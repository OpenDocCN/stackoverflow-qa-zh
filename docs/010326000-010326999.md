# StackOverflow 问答 10326000-10326999

# emacs - 将 cedet 1.0 更新到 1.1

> ID：10326001
> 
> 赞同：11
> 
> 时间：2012-04-26T01:15:41.540
> 
> 标签：emacs, cedet, emacs24

我目前在 OS X 上使用 emacs24。

```
CEDET Version:  1.0
                        Requested       File            Loaded
  Package               Version         Version         Version
  ----------------------------------------------------------
  cedet:                1.0             nil             ok
  eieio:                1.3             nil             ok
  semantic:             2.0             nil             ok
  srecode:              1.0             nil             Not Loaded
  ede:                  1.0             nil             Not Loaded
  speedbar:             1.0             nil             Not Loaded 
```

emacs24 带有 cedet ，我正在尝试将 cedet 1.0 升级到 1.1 。我编译了 cedet ：

```
emacs -Q -nw -l cedet-build.el -f cedet-build -f save-buffers-kill-terminal 
```

并加上`(load-file "~/.emacs.d/cedet/common/cedet.el")`之后`.emacs`cedet 告诉我一切都很好，花花公子

```
CEDET Version:  1.1
                        Requested       File            Loaded
  Package               Version         Version         Version
  ----------------------------------------------------------
  cedet:                1.1             ok              ok
  eieio:                1.4             ok              ok
  semantic:             2.1             ok              ok
  srecode:              1.1             ok              ok
  ede:                  1.1             ok              ok
  speedbar:             1.0.4           ok              ok
  cogre:                1.1             ok              Not Loaded
  cedet-contrib:        1.1             ok              Not Loaded 
```

但是，当我尝试运行它时，语义模式会像齐柏林飞艇一样崩溃：

> 自动加载未能定义函数语义模式

我没有尝试在 emacs23 上运行它，我的系统上没有安装 emacs23。我也没有 macports 或 fink，我使用自制软件安装了 emacs。所以它的香草emacs。

我猜是因为 emacs 内置了一个 cedet 构建，所以有些东西崩溃了，我查看了 cedet 和 emacs 站点，并进行了一些谷歌搜索以查看是否有升级它的方法，但我还没有看到升级文档可能是因为 emacs24 是预发布版本，而 cedet1.1 是相当新的。

提前干杯... :)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T05:48:39.983

请注意，激活 CEDET 1.1（和 1.0）不同于激活与 Emacs 捆绑的 CEDET。你需要使用类似的东西：

```
(load-file "..../cedet/common/cedet.el")
(semantic-load-enable-excessive-code-helpers) 
```

加载并激活它。这是在 CEDET 存储库中的当前版本中已经更改的旧行为 - 从本周开始，开发切换到与 Emacs 中用于 CEDET 的相同方案。

要阅读有关“旧”激活方案的更多信息，请查看[我的文章](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)（尽管我想用“新”激活方案的描述来更新它）。

# google-sheets - 如何平均前 5 个具有值的单元格

> ID：10326002
> 
> 赞同：2
> 
> 时间：2012-04-26T01:15:53.807
> 
> 标签：google-sheets, google-sheets-formula, array-formulas

我有一个看起来像这样的电子表格

![在此处输入图像描述](../Images/79a63419f567e85c168f6b21e054482f.png)

我只想对其中包含数据的前 5 个单元格进行平均。我怎样才能做到这一点？

随着列表获得更多数据，如下所示：

![在此处输入图像描述](../Images/876a09fa6b919dae63980166a565825f.png)

我希望能够定位一个单元格（如 A10）并从中返回 5。同样，仅当其中包含数据时。

所以图像的公式应该是这样的：(23 + 60 + 53 + 42 + 40)/5 = 43.6

它向后移动并跳过黑色空间，但仍然获得前 5 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:30:13.843

以下公式假设您的值位于 A 列（`A:A`如果不是，请调整所有引用）：

```
=Average(Filter(Sort(A:A;If(A:A="";0;Row(A:A));false);Row(A:A)<6)) 
```

要理解上面的公式，请分别粘贴它的部分（当你得到一个没有`Filter`公式的部分时，你需要将它包装在一个`ArrayFormula`.eg

```
=Filter(Sort(A:A;If(A:A="";0;Row(A:A));false);Row(A:A)<6)
=ArrayFormula( Sort(A:A; If(A:A="";0;Row(A:A)); false) )
=ArrayFormula( Row(A:A) ) 
```

将这些“辅助”公式放在工作表上可能有的空列上（在第一个单元格中，例如`D1`, `T1`）。

对于非整个列，就像您建议的那样，您可能还需要将整个公式包装在数组公式中，例如

```
=ArrayFormula( Average(Filter(Sort(K1:K10;If(K1:K10="";0;Row(K1:K10));false);Row(K1:K10)<6)) ) 
```

我最初认为该`Filter`公式的行为类似于`ArrayFormula`，但似乎它不会“递归”到其参数的内部。Hance，这是正常工作`ArrayFormula`所必需的。`IF`我不知道为什么它确实`A:A`有用。

# wolfram-mathematica - 在多个点评估函数

> ID：10326008
> 
> 赞同：5
> 
> 时间：2012-04-26T01:17:08.487
> 
> 标签：wolfram-mathematica

我想在 (1,-2) 点评估 f[x,y]=-4 x + x^2 - 4 y - y^2; (2,-3); (3,-2); (2,-1)。

我尝试使用*Outer*但由于某种原因它没有给我实际值。帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T01:24:28.537

请记住，Mathematica 有一种定义函数的特定方式。在你的情况下，它会是`f[x_,y_]:=-4 x + x^2 - 4 y - y^2`. 然后你可以简单地使用`f[1,-2]`等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T12:53:25.583

也许考虑使用“纯”功能。例如：

```
-4 #1 + #1^2 - 4*#2 - #2^2 & @@@ {{1, -2}, {2, -3}, {3, -2}, {2, -1}} 
```

给

{1, -1, 1, -1}

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T06:48:47.497

以下是主题的一些变化：

```
Clear[f]

f[{x_, y_}] := -4 x + x^2 - 4 y - y^2
points = {{1, -2}, {2, -3}, {3, -2}, {2, -1}};
Map[f, points] 
```

{1, -1, 1, -1}

```
f[x_, y_] := -4 x + x^2 - 4 y - y^2
f[1, -2] 
```

1

```
f = Function[{x, y}, -4 x + x^2 - 4 y - y^2];
f[1, -2] 
```

1

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T10:50:31.110

您可以使用 和 之类`Apply`的`Map`函数来评估点列表中的函数，例如

```
f[x_, y_] := -4 x + x^2 - 4 y - y^2 

pts =  {{1, -2}, {2, -3}, {3, -2}, {2, -1}};

Apply[f, pts, {1}]

(* out: {1, -1, 1, -1} *) 
```

或`@@@`用作简写`Apply[ ...., {1}]`

```
f @@@ pts 
```

# javascript - Javascript 新关键字使用

> ID：10326009
> 
> 赞同：3
> 
> 时间：2012-04-26T01:17:09.523
> 
> 标签：javascript, object, new-operator

使用或不使用 new 关键字调用 javascript 函数有区别吗？例如，如果我有这个功能：

```
function computer(){
  this.hardDrive = "big";
  this.processor = "fast";
} 
```

然后我以两种不同的方式调用它：

```
var hp = computer();
var hp = new computer(); 
```

两个函数调用之间有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T01:19:48.010

没有`new`,`this`指的是全局对象，而不是函数返回的任何对象。

如果你要执行你的代码，你会发现第一个`hp`是`undefined`，而第二个是`[object Object]`。此外，由于显而易见的原因，第一个不具有`hardDrive`or的属性`processor`，但第二个具有。

在第一个示例中，您的两个属性将被添加到`window`对象中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T01:20:54.873

第一个，不是 using `new`，将在`this`引用 window 对象的情况下运行。第二个， using `new`，将创建一个新的空对象，该对象将是`this`函数内。

# php - 使用 jQuery 和 CodeIgniter 更新视图

> ID：10326014
> 
> 赞同：0
> 
> 时间：2012-04-26T01:17:34.930
> 
> 标签：php, jquery, codeigniter

我有一个包含 2 个功能的控制器，第一个是“消息”，生成存储在数据库中的消息的 html 内容。第二个函数“收件箱”包含所有格式和一个 div，我想在其中包含“消息”中的内容（基本上是整个页面），它应该每 5 秒刷新一次。

我尝试将此 jQuery 代码放在“收件箱”的视图中（有`<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>`）：

```
function update() {
  $.get("<?= base_url("index.php/chat/messages") ?>", function(data) {
    $("#output_div").html(data);
    window.setTimeout(update, 1000);
  });
} 
```

并在其下方放置一个 div#output_div 。但它没有显示任何内容。

您对如何使这项工作有任何建议吗？谢谢你的建议 ;）

编辑：我发现出了什么问题：

```
$(document).ready(function update() {
      $.get("<?= base_url("index.php/chat/messages") ?>", function(data) {
        $("#output_div").html(data);
        window.setTimeout(update, 1000);
      });
    }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:51:41.990

您需要将 JS 调用用引号括起来，即：

```
window.setTimeout("update", 10000); 
```

您可能还需要括号： `"update()"`

# python - Numpy的奇异矩阵问题

> ID：10326015
> 
> 赞同：45
> 
> 时间：2012-04-26T01:17:40.550
> 
> 标签：python, matrix, numpy

我正在尝试将向量（3 乘 1）乘以其转置（1 乘 3）。我得到一个 (3 x 3) 数组，但我无法得到它的倒数。知道为什么吗？

```
import numpy as np

c=array([1, 8, 50])
np.transpose(c[np.newaxis]) * c
array([[   1,    8,   50],
   [   8,   64,  400],
   [  50,  400, 2500]])
np.linalg.inv(np.transpose(c[np.newaxis]) * c)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "C:\Python26\lib\site-packages\numpy\linalg\linalg.py", line 445, in inv
    return wrap(solve(a, identity(a.shape[0], dtype=a.dtype)))
  File "C:\Python26\lib\site-packages\numpy\linalg\linalg.py", line 328, in solve
    raise LinAlgError, 'Singular matrix'
LinAlgError: Singular matrix 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-26T01:22:05.590

您粘贴的矩阵

```
[[   1,    8,   50],
 [   8,   64,  400],
 [  50,  400, 2500]] 
```

行列式为零。这是奇异矩阵的定义（不存在逆矩阵的矩阵）

[http://en.wikipedia.org/wiki/Invertible_matrix](http://en.wikipedia.org/wiki/Invertible_matrix)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-04-26T01:21:40.330

根据定义，通过将一维向量乘以其转置，您创建了一个奇异矩阵。

每一行都是第一行的线性组合。

请注意，第二行只是第一行的 8 倍。

同样，第三行是第一行的 50 倍。

您的矩阵中只有一个独立的行。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-02-16T16:51:56.660

正如在之前的答案中已经提到的那样，您的矩阵不能倒置，因为它的行列式是 0。但是如果您仍然想获得逆矩阵，您可以使用`np.linalg.pinv`，它利用 SVD 来近似初始矩阵。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-05-22T09:56:59.640

使用 SVD 或 QR 分解计算实数或复数域中的精确解：

numpy.linalg.svd numpy.linalg.qr

# android - 如何停止或暂停 Pandora 和 Spotify

> ID：10326017
> 
> 赞同：3
> 
> 时间：2012-04-26T01:18:04.580
> 
> 标签：android, spotify, pandora

我有一个应用程序，它具有启动应用程序、潘多拉站或快捷方式的功能。这一切都很好。稍后我想停止我启动的应用程序。这适用于大多数事情，除了 Pandora 和 Spotify 并不总是关闭。有时他们会这样做，但并非总是如此。它似乎与当前的 UI 状态有关。例如，当我显示 Pandora 或显示主屏幕时，它工作正常。当 Home Dock 或 Car Mode 处于活动状态时，它不起作用。您可以在此处查看我的所有源代码：[http](http://code.google.com/p/a2dpvolume/) ://code.google.com/p/a2dpvolume/ service.java 是具有此功能的文件。

这是该代码的一部分，它试图阻止音乐播放然后停止应用程序。

```
if (bt2.hasIntent()) {
        // if music is playing, pause it
        if (am2.isMusicActive()) {
            // first pause the music so it removes the notify icon
            Intent i = new Intent("com.android.music.musicservicecommand");
            i.putExtra("command", "pause");
            sendBroadcast(i);
            // for more stubborn players, try this too...
            Intent downIntent2 = new Intent(Intent.ACTION_MEDIA_BUTTON, null);
            KeyEvent downEvent2 = new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_MEDIA_STOP);
            downIntent2.putExtra(Intent.EXTRA_KEY_EVENT, downEvent2);
            sendOrderedBroadcast(downIntent2, null);
        }

        // if we opened a package for this device, try to close it now
        if (bt2.getPname().length() > 3 && bt2.isAppkill()) {
            // also open the home screen to make music app revert to
            // background
            Intent startMain = new Intent(Intent.ACTION_MAIN);
            startMain.addCategory(Intent.CATEGORY_HOME);
            startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(startMain);
            // now we can kill the app is asked to

            final String kpackage = bt2.getPname();
            CountDownTimer killTimer = new CountDownTimer(6000, 3000) {
                @Override
                public void onFinish() {
                    try {
                        stopApp(kpackage);
                    } catch (Exception e) {
                        e.printStackTrace();
                        Log.e(LOG_TAG, "Error " + e.getMessage());
                    }
                }

                @Override
                public void onTick(long arg0) {

                    if (am2.isMusicActive()) {

                        // for more stubborn players, try this too...
                        Intent downIntent2 = new Intent(Intent.ACTION_MEDIA_BUTTON, null);
                        KeyEvent downEvent2 = new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_MEDIA_STOP);
                        downIntent2.putExtra(Intent.EXTRA_KEY_EVENT, downEvent2);
                        sendOrderedBroadcast(downIntent2, null);
                    }

                    try {
                        stopApp(kpackage);
                    } catch (Exception e) {
                        e.printStackTrace();
                        Log.e(LOG_TAG, "Error " + e.getMessage());
                    }
                }
            };
            killTimer.start();

        }
    } 
```

这是函数 stopApp()。

```
protected void stopApp(String packageName) {
    Intent mIntent = getPackageManager().getLaunchIntentForPackage(
            packageName);
    if (mIntent != null) {
        try {

            ActivityManager act1 = (ActivityManager) this
                    .getSystemService(ACTIVITY_SERVICE);
            // act1.restartPackage(packageName);
            act1.killBackgroundProcesses(packageName);
            List<ActivityManager.RunningAppProcessInfo> processes;
            processes = act1.getRunningAppProcesses();
            for (ActivityManager.RunningAppProcessInfo info : processes) {
                for (int i = 0; i < info.pkgList.length; i++) {
                    if (info.pkgList[i].contains(packageName)) {
                        android.os.Process.killProcess(info.pid);
                    }
                }
            }
        } catch (ActivityNotFoundException err) {
            err.printStackTrace();
            Toast t = Toast.makeText(getApplicationContext(),
                    R.string.app_not_found, Toast.LENGTH_SHORT);
            if (notify)
                t.show();
        }

    }
} 
```

有没有其他人遇到过这个问题？如何可靠地停止启动的应用程序？我需要先让它暂停并将其置于后台。这就是我遇到的问题。它适用于大多数情况，但不是全部。在某些情况下，Pandora 和 Spotify 不会响应正在发送的关键事件，它们只是继续播放。这使通知图标保持活动状态并使应用程序成为前台活动，因此我无法停止它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T02:33:36.260

我终于发现，当 Pandora 看到耳机断开连接时，它确实会暂停音乐。所以，我只需要发送断开连接的意图，这样 Pandora 就会暂停。一旦暂停，它就可以被推到后台并被杀死。

```
//Try telling the system the headset just disconnected to stop other players
            Intent j = new Intent("android.intent.action.HEADSET_PLUG");
            j.putExtra("state", 0);
            sendBroadcast(j); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-09T00:15:16.000

对于其他尝试此操作的人；除非您作为系统运行，否则不再允许广播 android.intent.action.HEADSET_PLUG 意图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-06T21:21:37.560

由于“HEADSET_PLUG”意图现在仅在被系统调用时才受支持，我发现特定于应用程序的意图是要走的路：

```
 Intent pauseSpotify = new Intent("com.spotify.mobile.android.ui.widget.PLAY");
           pauseSpotify.setPackage("com.spotify.music");
           sendBroadcast(pauseSpotify); 
```

从本质上讲，它的作用是从 spotify 应用程序中调用“PLAY”。

我从一篇[文章中](https://androidtrix.wordpress.com/2013/11/05/tasker-spotify-plug-load-and-play/)得到了这个想法，并将其应用于普通的 android。

# iphone - 将用户与应用数据库分离

> ID：10326018
> 
> 赞同：0
> 
> 时间：2012-04-26T01:18:07.690
> 
> 标签：iphone, large-data

我的应用程序刚刚被 Apple 拒绝，原因如下：

> 2.23
> 
> 我们发现您的应用未遵循 App Store 审核指南所要求的 iOS 数据存储指南。
> 
> 特别是，我们发现在启动和/或内容下载时，您的应用程序存储 10.3 MB。要检查您的应用存储了多少数据：
> 
> *   安装并启动您的应用
> *   转到设置 > iCloud > 存储和备份 > 管理存储
> *   如有必要，点击“显示所有应用”
> *   检查您应用的存储空间
> 
> iOS 数据存储指南指出，只有用户使用您的应用程序创建的内容，例如文档、新文件、编辑等，可以存储在 /Documents 目录中 - 并由 iCloud 备份。

我所做的是，我在资源文件夹中提供大约 10 MB 的数据库，并在初始启动时将该数据库复制到库路径（参见下面的代码）。在设备设置中启动后查看我的应用程序设置时，它实际上说，文档和数据文件夹包含这 10 MB 的数据。该应用程序安装后不再需要该数据库，因此我只是尝试在使用 removeItemAtPath 完成复制时从资源文件夹中删除数据库。但似乎存在许可问题。

这是我在初始启动时用来填充数据库的代码：

```
// Copy the database from the app resource, if it is not already existing in the library path

- (void) copyDatabaseIfNeeded {

NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory , NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];
NSString *dbPath = [documentsDir stringByAppendingPathComponent:@"abiliator.sqlite3"];

BOOL success = [fileManager fileExistsAtPath:dbPath]; 

if(!success) {

    NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"abiliator.sqlite3"];
    success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];

    if (!success) {
        NSLog(@"Failed to create writable database file with message '%@'.", error);
    }
    else {
        success = [fileManager removeItemAtPath:defaultDBPath error:&error];
        if (!success) {
            NSLog(@"Failed to remove the source database file with message '%@'.", error);
        }

    }
}   
} 
```

在对该问题进行了数小时的研究之后，我实际上很确定，我根本没有做错任何事情。库路径是根据 Apple 文档存储可更新文件的位置。特别是如果想要备份和隐藏/不向用户公开数据。我的应用程序都是这种情况，我希望备份数据并且我不希望用户看到我的数据库。所以图书馆似乎完全正确。我唯一能想到的是资源目录中数据库的大小。我可以通过拉链来减少它。但是有什么限制呢？审阅者和文档都不能告诉我任何具体的内容。

那么实际上有什么问题呢？如果资源目录不是存储我的源数据库以进行初始设置的正确位置，我可以在我的项目中使用什么其他目录？

非常感谢任何提示。勒内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:03:13.313

收到 Apple 的回复，提到我应该将用户数据存储在与我提供的数据不同的数据库中。虽然我对此不是很热衷，因为它增加了不必要的代码复杂性，而且我的应用程序中的用户数据可能会比我提供的数据更大，但我想确保我现在得到了正确的解决方案. 我打算实现的是 2 个目录：/Library/UserDB 和 /Library/AppDB。AppDB 将包含交付的数据库，而 UserDB 将仅包含用户数据，我会将 AppDB 目录标记为非备份。猜猜这会让 Apple 高兴并让我的应用程序为此获得批准，对吗？在我开始实施之前，将不胜感激有关该方法的任何意见。

# javascript - 用“var”和没有“var”关键字声明的变量有什么区别。

> ID：10326020
> 
> 赞同：0
> 
> 时间：2012-04-26T01:18:58.750
> 
> 标签：javascript, keyword, var

> **可能重复：**
> [在 JavaScript 中使用 var 和不使用 var 的区别](https://stackoverflow.com/questions/1470488/difference-between-using-var-and-not-using-var-in-javascript)

这两种方法的主要区别是什么。有人可以帮我理解。如果在函数中使用“var”关键字声明变量，这意味着什么？在这两种情况下，计时器都按预期在 3 秒内清除。

```
Approach 1:
<html>
<body>
<script type="text/javascript">
function function2()
{
int=self.setInterval(function(){
alert(int);
clearInterval(alert("in clear"+ int));
},3000);
}
</script>
<button onclick="function2()">Start</button>
</body>
</html>

Approach 2

<html>
<body>
<script type="text/javascript">
function function2()
{
var int=self.setInterval(function(){
alert(int);
clearInterval(alert("in clear"+ int));
},3000);
}
</script>
<button onclick="function2()">Start</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:22:11.667

如果不使用 var，您会将该变量隐式放入全局命名空间中。使用 var 变量是函数的局部变量。

# c# - 阻止Firefox提交表单

> ID：10326022
> 
> 赞同：0
> 
> 时间：2012-04-26T01:19:23.780
> 
> 标签：c#, jquery, asp.net, firefox

我在阻止按钮提交表单时遇到问题。它在 FF 中不起作用，但在 IE 和 chrome 中运行良好。有什么建议吗？

```
function CheckExhibitsAndRunningLog(taskId) {

    if (event.preventDefault) {
        event.preventDefault();
    }
    if (event.stopPropagation) {
        event.stopPropagation();
    }
    event.returnValue = false;
    //e.cancelBubble = true;        
//  window.event.preventDefault();
    //this is web service call
    Empire.ScriptServices.CheckTaskUpdateValid(taskId, OnComplete, OnError);
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:51:18.197

在做了一些假设之后......

要抑制响应按钮的常规（HTML）表单提交，您可以简单地放入`onsubmit="return false;"`表单标记或等效的 javascript：

```
var myForm = document.getElementById("myForm");
if(myForm) {
    myForm.onsubmit = function() {
        return false;
    }
} 
```

或在 jQuery 中：

```
$("#myForm").on('submit', function() {
    return false;
}); 
```

有了这种抑制作用：

a)`CheckExhibitsAndRunningLog()`然后应该减少到：

```
function CheckExhibitsAndRunningLog(taskId) {
    Empire.ScriptServices.CheckTaskUpdateValid(taskId, OnComplete, OnError);
} 
```

`myform.submit();`b)如有必要，仍然可以从您的 javascript 中的其他地方强制提交表单。

# git - SSH 与 Git 的兼容性问题

> ID：10326026
> 
> 赞同：1
> 
> 时间：2012-04-26T01:20:20.220
> 
> 标签：git, ssh, version, incompatibility

今天更新 Macports 后

```
$ sudo port upgrade 
```

Git 无法推送

```
$ git push
OpenSSL version mismatch. Built against 1000005f, you have 1000100f
fatal: The remote end hung up unexpectedly

$ ssh -version
OpenSSH_5.9p1, OpenSSL 1.0.1 14 Mar 2012
Bad escape character 'rsion'.

$ uname -a
Darwin foobar.local 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386 
```

还有谁？如何快速解决这个问题？（这阻止了我做有用的工作。）

### 编辑：回滚`git-core`和`open-ssl`端口后出现的错误：

```
$ port installed git-core openssh
Warning: port definitions are more than two weeks old, consider using selfupdate
The following ports are currently installed:
  git-core @1.7.5.1_0+doc+python27
  git-core @1.7.5.2_0+doc+python27
  git-core @1.7.7_0+doc+pcre+python27
  git-core @1.7.7.4_0+doc+pcre+python27
  git-core @1.7.9.2_1+credential_osxkeychain+doc+pcre+python27 (active)
  git-core @1.7.9.4_0+credential_osxkeychain+doc+pcre+python27
  openssh @5.8p1_0 (active)
  openssh @5.9p1_0
$ git push
OpenSSL version mismatch. Built against 1000004f, you have 1000100f
fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:25:46.430

`sudo port deactivate`、和可能的端口，以及`openssl`旧版本。（看到这些旧版本。）虽然我认为这已经被修复了；你是第一个吗？`openssh``git-core``sudo port activate``port installed openssl git-core openssh``port selfupdate`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:12:20.090

尝试更新您的 openssh（git 正在使用）。

$ sudo 端口升级 openssh

我发现在这个线程的最后： [安装 git-core (to upgrade OpenSSL) 会导致错误](http://comments.gmane.org/gmane.os.apple.macports.user/27333)

# mysql - MySQL 存储过程：IF 在 WHERE

> ID：10326027
> 
> 赞同：3
> 
> 时间：2012-04-26T01:20:23.320
> 
> 标签：mysql, stored-procedures

我正在尝试以下列方式选择一些数据：

```
SELECT column
FROM table
WHERE a = a1
AND (b = b1 OR b = b2 OR b = b3); 
```

我想要它做的是如果 b 不等于 b1，请检查 b = b2。但是，如果 b=b1，则不要检查其他条件。此 select 语句的结果必须只有一个条目。但是，在我没有的语句中，它会检查所有三个条件，有时会返回多行。同样，我希望它停止检查条件是否为真。

关于如何实施的任何想法？我试过case，但没有成功...

先感谢您！

编辑这是我正在尝试运行的实际查询。

```
INSERT INTO shipment_flights 
    (airlinename, flt_no, flt_date, destination, phone, depttime, arrivaltime, pcs, weight)
SELECT st.airlinename, flightno, flightdate, destination,     
(SELECT phone 
FROM carrierlocations 
WHERE carriers_carrierid = (select carrierid from carriers where airlinename = st.airlinename) 
AND (city = destination OR (city != destination AND
    city = (SELECT city FROM airports WHERE iataid = 
            (SELECT airports_iataid FROM ratelegs 
                WHERE shipments_shipid = c.shipments_shipid))
                ))) phone, 
depttime, arrivaltime, sum(linepcs), sum(lineweight)
FROM segment_times st
    JOIN contents2flights c2f 
        ON st.flightid = c2f.segments_flights_flightid 
        AND st.segmentid = c2f.segments_segmentid 
    JOIN contents c 
        ON c.lineno = c2f.contents_lineno 
        AND c.shipments_shipid = c2f.contents_shipments_shipid

WHERE c.shipments_shipid = var_shipid
GROUP BY flightid
ORDER BY flightdate, depttime; 
```

这是一个示例输出：

```
airlinename         flt_no  flt_date        destination    phone         pcs   weight
Everts Air Alaska   CH1     2008-02-20      Hughes         9074502351    24    2121 
```

该查询将一堆航班数据插入到临时表中。我遇到的问题是获取某个位置的电话号码。这部分内容如下：

```
(SELECT phone 
FROM carrierlocations 
WHERE carriers_carrierid = (select carrierid from carriers where airlinename = st.airlinename) 
AND (city = destination OR (city != destination AND
    city = (SELECT city FROM airports WHERE iataid = 
            (SELECT airports_iataid FROM ratelegs 
                WHERE shipments_shipid = c.shipments_shipid))))) phone 
```

在 Amit Bhargava 建议的查询中，只有在临时表中有一行时，我才会得到正确的结果。如果还有更多，则会在选择电话部分时引发错误。

“错误代码：1242。子查询返回多于 1 行”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T01:48:41.287

通过使用 IF() + IF() + IF()，并测试 sum = 1 可以防止很多额外的而不是其他标准。如果 2 或所有 3 相同，则总和将大于 1。如果它们都不匹配，则结果为 0。这应该完全符合您的要求。

```
SELECT column
  FROM table
  WHERE a = a1
    AND  if( b = b1, 1, 0 )
       + if( b = b2, 1, 0 )
       + if( b = b3, 1, 0 ) = 1 
```

或者......在 ypercube 的帮助下，我一直忘记逻辑测试分别返回 1 或 0 表示真/假，例如......

```
SELECT column
  FROM table
  WHERE a = a1
    AND  (b = b1) + (b = b2) + (b = b3) = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T01:26:18.623

请尝试以下方法。不是最优雅的解决方案，但它应该可以工作。

```
SELECT column
FROM table
WHERE a = a1
AND (b = b1 OR (b != b1 AND (b = b2 OR (b != b2 AND b = b3)))) 
```

# submit - Moodle - 提交时的引号和反斜杠

> ID：10326028
> 
> 赞同：0
> 
> 时间：2012-04-26T01:20:24.680
> 
> 标签：submit, quotes, moodle, backslash

我在一台 Moodle 1.9.9+ 服务器中有一个险恶的问题。

在启动页面（是否登录）上，我有摘要，如果我使用 HTML 编辑器创建链接，它会正确创建，但是当我提交时，链接会变成带有一些反斜杠。请参阅我上面的示例：

1) 在 HTML 编辑器上，我写了一段文字：`http://www.example.com`

2）选择链接按钮

3) 在“URL”字段中，我重复了 URL：`http://www.example.com`

4) 单击确定按钮。

5) 单击保存更改按钮。

在摘要中，链接显示为：`<a href="\"http://www.example.com\"">http://www.example.com</a>` 当我点击他时，浏览器转到`http://mymoodledomain.com/\"http://www.example.com\"`

如果我重新编辑相同的摘要并简单地按保存更改，链接将变为带有更多反斜杠：

`http://mymoodledomain.com/\"\\\"http://www.example.com\\\"\"`

然后再次：

`http://mymoodledomain.com/\"\\\"\\\\\\\"http://www.example.com\\\\\\\"\\\"\"`

我不知道我的 Moodle 或我的 PHP 发生了什么。

我试图禁用magic_quotes_gpc，并且他们用一些值定义了常量MOODLE_SANE_INPUT，但部分工作，因为同样的问题也出现在首页设置中，并且禁用magic_quotes并启用常量，对于这种情况不起作用。如果我的标题带有引号，则每次提交时都会保存更多反斜杠，例如：

`\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"example\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"`

请大家，我需要更快地解决这个问题是可能的。

有什么建议吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:28:52.907

我遇到了问题并解决了。在 PostgreSQL 上。

9.1 版本默认启用 2 个选项，而 8.3 则关闭。这些选项称为“standard_conforming_strings”和“escape_string_warning”，在 postgresql.conf 中会遇到。

启用后，这些选项会为转义字符保存转义，该转义字符是 PHP 在提交表单时由“magic_quotes_gpc”资源提供的。

谢谢大家！

# java - ObjectInputStream 给出奇怪的结果

> ID：10326033
> 
> 赞同：1
> 
> 时间：2012-04-26T01:20:55.833
> 
> 标签：java, network-programming

这是我正在使用的代码。

客户：

```
public static void main(String[] args) throws IOException {
    Socket socket = new Socket("0.0.0.0", 5555);
    ObjectOutputStream out = new ObjectOutputStream(socket.getOutputStream());
    FileInputStream in = new FileInputStream("C:/Documents and Settings/Owner/Desktop/Client/README.txt");
    byte[] b = new byte[1024];
    int i = 0;
    i = in.read(b);
    out.writeInt(i);
    out.write(b, 0, i);
    out.flush();
    i = in.read(b);
    out.writeInt(i);
    out.write(b, 0, i);
    out.flush();
    out.close();
    in.close();
    socket.close();
} 
```

服务器：

```
public static void main(String[] args) throws IOException {
    ServerSocket ss = new ServerSocket(5555);
    Socket s = ss.accept();
    ObjectInputStream in = new ObjectInputStream(s.getInputStream());
    FileOutputStream fos = new FileOutputStream("C:/README.txt");
    int i = 0;
    i = in.readInt();
    System.out.println(i);
    byte[] bytes = new byte[i];
    in.read(bytes);
    i = in.readInt();
    System.out.println(i);
    byte[] bytes2 = new byte[i];
    in.read(bytes2);
    fos.write(bytes);
    fos.close();
    s.close();
    ss.close();
} 
```

文件 README.txt 中有大约 2400 个字节。当我运行它时，服务器会输出它。

1024

1869488225

然后它抛出一个 java.lang.OutOfMemoryError。

谁能告诉我为什么它读的是 1869488225 而不是 1024？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:28:41.913

```
in.read(bytes);
in.read(bytes2); 
```

在这里，您忽略了 read 的返回值并假设它填充了缓冲区。您应该更改`read()`为`readFully()`此处，但通常您永远不应该忽略`read()`结果。它可以是 -1 表示 EOS，也可以是从 1 到缓冲区大小的任何计数。如果您无意中指定了长度为零的缓冲区，它甚至可以为零。

# sql - SQL Server：按小时和星期几的平均计数

> ID：10326036
> 
> 赞同：8
> 
> 时间：2012-04-26T01:21:04.757
> 
> 标签：sql, sql-server, count, group-by

### 背景

我在 SQL Server 环境中设置了一个表，其中包含我正在跟踪的各种活动的日志。特定的日志项使用唯一代码对正在发生的活动进行分类，并使用日期时间字段跟踪该活动发生的时间。

### 问题

我想使用单个查询或存储过程来获得按星期几分组的平均每小时活动计数。例子：

```
Day      | Hour | Average Count
-------------------------------
Monday   | 8    | 5
Monday   | 9    | 5
Monday   | 10   | 9
...
Tuesday  | 8    | 4
Tuesday  | 9    | 3
...etc 
```

现在，我有一个查询设置，可以每天输出每小时的计数，但我的问题是更进一步，并按一周中的每一天计算平均值。这是我当前的查询：

```
SELECT CAST([time] AS date) AS ForDate,
   DATEPART(hour, [time]) AS OnHour,
   COUNT(*) AS Totals
FROM [log] WHERE [code] = 'tib_imp.8'
GROUP BY CAST(time AS date),
   DATEPART(hour,[time])
   ORDER BY ForDate Asc, OnHour Asc 
```

关于我如何做到这一点的任何建议？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T01:47:35.080

在这里猜测：

```
SELECT [Day], [Hour], [DayN], AVG(Totals) AS [Avg]
FROM
  (
        SELECT 
          [Day]  = DATENAME(WEEKDAY, [time]),
          [DayN] = DATEPART(WEEKDAY, [time]),
          [Hour] = DATEPART(HOUR,    [time]),
          Totals = COUNT(*)
        FROM dbo.[log] 
            WHERE [code] = 'tib_imp.8'
        GROUP BY 
          DATENAME(WEEKDAY, [time]),
          DATEPART(WEEKDAY, [time]),
          DATEPART(HOUR,    [time])
  ) AS q
GROUP BY [Day], [Hour], [DayN]
ORDER BY DayN; 
```

同样，如果没有数据，我可能会再次向墙上扔一把泥，希望它能粘住，但也许你需要的是：

```
SELECT [Day], [Hour], [DayN], AVG(Totals) AS [Avg]
FROM
(
    SELECT 
  w = DATEDIFF(WEEK, 0, [time]),
      [Day]  = DATENAME(WEEKDAY, [time]),
      [DayN] = DATEPART(WEEKDAY, [time]),
      [Hour] = DATEPART(HOUR,    [time]),
      Totals = COUNT(*)
    FROM dbo.[log] 
      WHERE [code] = 'tib_imp.8'
    GROUP BY 
  DATEDIFF(WEEK, 0, [time]),
      DATENAME(WEEKDAY, [time]),
      DATEPART(WEEKDAY, [time]),
      DATEPART(HOUR,    [time])
  ) AS q
GROUP BY [Day], [Hour], [DayN]
ORDER BY DayN; 
```

这也将产生基于整数的平均值，因此您可能希望将内部查询中的 Totals 别名转换为 DECIMAL(something,something)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:27:28.137

```
; WITH a AS (
    SELECT CAST([time] AS date) AS ForDate
       , DATEPART(hour, [time]) AS OnHour
       , txtW=DATENAME(WEEKDAY,[time])
       , intW=DATEPART(WEEKDAY,[time])
       , Totals=COUNT(*)
    FROM [log] WHERE [code] = 'tib_imp.8'
    GROUP BY CAST(time AS date)
    , DATENAME(WEEKDAY,[time])
    , DATEPART(WEEKDAY,[time])
    , DATEPART(hour,[time])
)
SELECT [Day]=txtW
, [Hour]=OnHour
, [Average Count]=AVG(Totals)
FROM a
GROUP BY txtW, intW, OnHour
ORDER BY intW, OnHour 
```

# php - 强制 php 查看文档根目录

> ID：10326037
> 
> 赞同：4
> 
> 时间：2012-04-26T01:21:05.557
> 
> 标签：php, require-once

所以我在搞乱 twitter api，我想在每个页面的页脚中包含这个文件。页脚通过 phps 的 require_once 函数加载。问题是我不能使用完整的 url，因为 url 文件访问由于明显的原因被关闭。所以我尝试使用

```
require_once $_SERVER['DOCUMENT_ROOT']('/lib/twitter/base.php'); 
```

但那失败了。我做错了什么或者我怎样才能做得更好？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T01:23:35.007

尝试这个：

```
require_once($_SERVER['DOCUMENT_ROOT'].'/lib/twitter/base.php'); 
```

# python - 如何在 Python 中从 Matlab 执行此步骤？

> ID：10326038
> 
> 赞同：1
> 
> 时间：2012-04-26T01:21:07.167
> 
> 标签：python, arrays, matlab, matrix

在 Matlab 中，我们可以使用以下代码行来将 `1+N x 1+N`大小矩阵的整个最后一行和最后一列设置`x`为`1`.

```
x=zeros((1+N,1+N))
x(1+N,1:N+1) = 1
x(1:N+1,1+N) = 1 
```

在使用和不使用 numpy 的情况下，在 python 中获得类似结果的等效方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T01:29:10.550

要创建一个充满零的数组：`x = numpy.zeros((1+N,1+N))`

将一行或一列设置为 1：例如，`x[:,3] = 1`

如果不使用 numpy，您可能会使用嵌套列表。获得一个零的矩形数组的最简单方法是使用这样的理解`x = [m*[0] for i in range(n)]`：`x`那么你可以通过说替换一行，`x[3] = ...`但更新一整列，或者一些但不是全部一行，将需要一个显式循环。

# android - 动态壁纸水波纹效果

> ID：10326039
> 
> 赞同：9
> 
> 时间：2012-04-26T01:21:23.220
> 
> 标签：android, live, effects, wallpaper

我正在制作一个动态壁纸，它在触摸屏幕时加入了一些水波纹效果，但我有点卡住了。

创建多个图像并循环它们以创建波纹动画会更好，还是在将位图放在画布上之前稍微扭曲位图会更好？

[这](http://www.youtube.com/watch?v=V-94z_LyWMc)是一个通过 OpenGL 完成的非常漂亮的涟漪效果的视频。

我还没有任何使用 OpenGL 的经验，想知道是否仍然可以在动态壁纸上创建 2D 水效果？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T10:32:11.020

我也想在 Android 中实现逼真的涟漪效果，所以分享一下我的经验：

作为参考实现，我采用了 Neil Wallis Java 算法的 Sergey 的 Chikuyonok JavaScript 端口。这是一个游乐场，您可以在其中试验原始 JS 代码：http: [//jsfiddle.net/esteewhy/5Ht3b/6/](http://jsfiddle.net/esteewhy/5Ht3b/6/)

起初，我将 JS 代码移植到 Java 只是为了意识到在我的华为 U8100 硬件上无法压缩超过 1 fps。（网上有几个类似的尝试，唯一的结论是：它们慢得离谱）。

顺便说一句，这个 SO 答案对于基本了解如何在 Android 中编写交互式图形非常有用：[https](https://stackoverflow.com/a/4946893/35438) ://stackoverflow.com/a/4946893/35438 。我从那里借了 fps 计数器。

然后我决定尝试 Android NDK 在纯 C 中重新实现原始算法（我在 10 多年前第一次遇到它！）。尽管 NDK 的文档有些混乱（尤其是在要求和先决条件方面），但一切都像一个魅力，所以我能够达到 30 fps——它可能不是太令人印象深刻，但仍然是对 Java 代码的根本改进.

最后，我把我所有的工作都放到了网上：[https](https://github.com/esteewhy/whater) ://github.com/esteewhy/whater ，所以请随意使用。它包含：

1.  上面提到的交互式弹跳球代码（仅供参考）。
2.  水波纹 Java 端口（慢得像地狱！）
3.  水波纹C实现（需要NDK编译和JDK创建.h文件）。

（该项目不是“干净的”，即：所有二进制文件都在那里，因此即使没有 NDK，也可以尝试“按原样”运行它。）

![在此处输入图像描述](../Images/d68827dd4e7dfab11688056e763cfea8.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T07:12:59.840

您可以在此处找到触摸波纹效果的示例：

[https://github.com/MasDennis/RajawaliExamples](https://github.com/MasDennis/RajawaliExamples)

它利用了 rajawali OpenGL ES 框架/库。您可以从市场上下载 rajawali 示例应用程序以查看它的外观。浏览“src”文件夹，您将看到 TouchRippleEffect 活动和渲染器。希望有帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-26T01:31:26.647

我不是这方面的专家，但我相信在 OpenGL 中做水效果的典型方法是使用片段着色器。使用静态图像作为纹理，您的着色器可以改变用于对该图像进行采样的纹理坐标，以任意方式对其进行扭曲。

计算像素到圆心的方向和距离，根据距离的正弦函数调整纹理坐标朝向或远离圆心，你应该会得到一个很好的波纹效果。

从您链接的那个 YouTube 视频的描述来看，这听起来像是通过使用三角形网格并仅在顶点处调整纹理坐标来完成的。这也应该有效，但除非您使用相当精细的网格，否则它看起来不会那么好。使用片段着色器按像素进行处理是理想的，但我不知道这是否会导致手机 GPU 出现性能问题。

# wpf - 如何对 WPF 数据网格中的列中的唯一值进行验证

> ID：10326043
> 
> 赞同：1
> 
> 时间：2012-04-26T01:21:57.033
> 
> 标签：wpf, validation, wpfdatagrid

我有一个数据网格，用户将添加行。它有一个列（文本列（带有文本框和单元格 eidt 模板的模板列））和一个组合列。

我想做这些验证

1.  文本列不应允许重复值，并且应显示验证错误。

所以让我们说用户输入

A，组合框项目 1 B，组合框项目 1 C，组合框项目 2 B，组合框项目 3 E，组合框项目 4

A，Combobox Item 5 -- 这应该显示验证错误

1.  整个数据应该是唯一的：

所以让我们说用户输入

A，组合框项目 1 B，组合框项目 1 C，组合框项目 1 A，组合框项目 2 C，组合框项目 2

A，Combobox Item 2 -- 这应该显示验证错误

我看到了validationRule，但那是用于单行中单元格值的Vaidation。我找不到任何可以验证现有/以前输入的数据的内容。

顺便说一句，我正在使用 MVVM 进行开发。

有什么建议么 ？

*   吉里哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:53:19.110

对于第一种类型验证，因为它是单个单元格验证，我使用[IDataErrorInfo](http://msdn.microsoft.com/en-us/library/system.componentmodel.idataerrorinfo.aspx)

对于第二部分，我使用 datagRid.RowValidationRule 但由于我需要当前行的数据网格集合，我需要以某种方式将集合传递给验证规则。所以我使用它如下：

1.  [将参数传递给验证规则](http://dedjo.blogspot.com/2007/05/fully-binded-validation-by-using.html)

注意：上面的这个例子传递的是静态资源而不是绑定。但这是一个解释清楚的博客。

1.  为了传递绑定集合，我使用了这个[博客中提到的模式](http://www.codeproject.com/Articles/18678/Attaching-a-Virtual-Branch-to-the-Logical-Tree-in)

希望这可以帮助任何正在寻找类似问题的人。

*   吉里哈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:20:33.750

数据表内置了这个:)你可以设置约束并收到验证错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T01:30:34.653

使用 MVVM，您可能希望使用行 ViewModel 上[的 IDataErrorInfo 接口使用基于属性的验证。](http://www.codeproject.com/Articles/97564/Attributes-based-Validation-in-a-WPF-MVVM-Applicat)

对于自定义验证，您可以将[CustomValidationAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.customvalidationattribute.aspx)与个性化验证方法一起使用。

# javascript - 在 IE9 中访问 iframe 文档的“正文”

> ID：10326047
> 
> 赞同：0
> 
> 时间：2012-04-26T01:22:25.557
> 
> 标签：javascript, internet-explorer, internet-explorer-9

我正在尝试将“脚本”元素附加到 iframe 的主体，但 IE9 认为主体未定义。

```
document.getElementsByTagName("iframe")[0].contentWindow.document.body 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:28:14.083

函数应该是getElementsByTagName，整行如下：

```
document.getElementsByTagName("iframe")[0].contentWindow.document.body 
```

我刚刚在 IE9 中尝试过，它对我来说工作正常。如果它仍然无法在您的网站上运行，则可能是其他原因（也尝试在 chrome 中测试完全相同的代码，看看是否有效）。

# c# - 回传视图值到控制器 MV3

> ID：10326049
> 
> 赞同：0
> 
> 时间：2012-04-26T01:23:00.707
> 
> 标签：c#, asp.net-mvc-3, razor

我是 mvc 3 的新手。我正在尝试创建一个视图和控制器。我的情况是我有控制器，它有两个动作。当我在控制器内调用第一个操作时，我必须加载默认值才能查看。内部视图我有一个按钮来回发值。因此，当单击视图内的按钮之一时，它必须在同一控制器中执行第二个操作，并且必须返回同一视图并显示成功或失败消息。

我的看法是这样的

```
@using (Html.BeginForm())
{
<table>
    <tr>
        <td>
            @Html.TextBox("txtTitle")
        </td>
        <td>
            <input type="button" value="Go Somewhere Else" onclick="location.href='@Url.Action("Postback", "Default1")'" />
        </td>
    </tr>
</table> 
```

}

我的控制器，

```
public class Default1Controller : Controller
{
    //
    // GET: /Default1/

    public ActionResult Index()
    {
// has to default load value to text box
        return View();
        }

    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Postback(FormCollection obj)
    {
// has to take value from txt box
        object obj1 = Request["txtTitle"];
        return View("Index");
    }
} 
```

如果从任何其他视图调用 Postback 操作，我的问题是有效的。但是如果我点击按钮，在相同的视图中，错误会显示为“http://localhost:14953/Default1/Postback”。

这里有什么解决方案？**我希望导航到同一个控制器以及同一个表单内的其他控制器并返回到同一个视图。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:04:45.937

作为参考这篇[文章](http://blog.ashmind.com/2010/03/15/multiple-submit-buttons-with-asp-net-mvc-final-solution/)......

```
public class HttpParamActionAttribute : ActionNameSelectorAttribute {
  public override bool IsValidName(ControllerContext controllerContext, string actionName, MethodInfo methodInfo) {
      if (actionName.Equals(methodInfo.Name, StringComparison.InvariantCultureIgnoreCase))
        return true;

      if (!actionName.Equals("Action", StringComparison.InvariantCultureIgnoreCase))
        return false;

      var request = controllerContext.RequestContext.HttpContext.Request;
      return request[methodInfo.Name] != null;
  }
} 
```

在这样的视图中...

```
@using (Html.BeginForm("Action", "Post")) { 
  <!— …form fields… -->
  <input type="submit" name="SaveDraft" value="Save Draft" />
  <input type="submit" name="Publish" value="Publish" />
} 
```

和控制器中的动作...

```
public class PostController : Controller {
    [HttpParamAction]
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult SaveDraft(…) {
        //…
    }

    [HttpParamAction]
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Publish(…) {
        //…
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:28:14.450

我认为我们可以在 Html helper 中指定具体的操作和控制器。

```
@using (Html.BeginForm("Postback", "Default1"))
{
  <table>
     <tr>
      <td>
        @Html.TextBox("txtTitle")
      </td>
      <td>
        <input type="submit" value="Go Somewhere Else" />
        <!-- the input should be submit?-->
      </td>
</tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T01:33:15.437

您可以像这样为 Postback 方法指定一个 ActionName：

```
[ActionName("Index")]
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Postback(FormCollection obj)... 
```

因此 F5 重新发布相同的值并直接从地址栏调用 URL 会按预期返回视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T01:35:57.870

`Html.BeginForm`Helper 方法有一个构造函数，它采用动作名称和控制器名称。使用那个

```
public static MvcForm BeginForm(
    this HtmlHelper htmlHelper,
    string actionName,
    string controllerName
) 
```

[http://msdn.microsoft.com/en-us/library/dd492590.aspx](http://msdn.microsoft.com/en-us/library/dd492590.aspx)

所以你的表格应该是这样的。您不需要在输入元素中使用 onclick 功能。

```
@using (Html.BeginForm("Postback", "Default1"))
{
  //Your elements
 <input type="button" value="Go Somewhere Else"  />
} 
```

这将像这样呈现 HTML 标记

```
<form action="/Default1/Postback" method="post">
 // Your elements
  <input type="button" value="Go Somewhere Else"  />
</form> 
```

如果您想在同一个表单中使用多个提交按钮，请在[此处回答](https://stackoverflow.com/questions/8258750/asp-net-mvc-3-multiple-submit-inputs-in-one-form)

# javascript - 在 Play Framework 2.0 中获取原始字符串以用于 Javascript

> ID：10326050
> 
> 赞同：5
> 
> 时间：2012-04-26T01:23:21.893
> 
> 标签：javascript, scala, escaping, playframework-2.0

我目前正在尝试在我的 Play 应用程序中使用 Scala 对象动态生成 Javascript，如下所示：

```
<script type="text/javascript">@JavascriptGenerator.generateChangingTextScript()</script> 
```

此 Javascript 包含 Play 想要自动转义的字符，例如引号 (")。它会自动将其转换为：

```
&quot;String goes here&quot; 
```

而不是想要的：

```
"String goes here" 
```

返回的 Javascript 不喜欢这样，因此不起作用。我如何告诉 Play 不要这样做？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-26T06:58:25.800

相当于 Play 1 的 Play 2`${"<".raw}`是`@Html("<")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:34:15.310

在 play 1.2.4 中，有一个方法 .raw() 返回模板中属性的原始内容。你试过@JavascriptGenerator.generateChangingTextScript().raw(); 那可能行得通。

# iphone - 在 Core Graphics 中绘制子弹箭头

> ID：10326053
> 
> 赞同：4
> 
> 时间：2012-04-26T01:23:42.697
> 
> 标签：iphone, objective-c, ios, core-graphics

除非绝对必要，否则我不想重新发明轮子，所以我想看看如何使用 Core Graphics 绘制这样的箭头：

![在此处输入图像描述](../Images/bceb02ee64ed0c00647ff9edf7dcbe75.png)

有谁知道我该如何开始？这是我到目前为止所拥有的，但它绘制了一个正三角形而不是括号形状：

```
 CGPoint origin = CGPointMake(100, 20);
    UIBezierPath *path = [UIBezierPath bezierPath];
    [path moveToPoint:origin];
    [path addLineToPoint:CGPointMake(origin.x-10, origin.y-20)];
    [path addLineToPoint:CGPointMake(origin.x-10, origin.y+20)];
    [[UIColor redColor] set];
    [path fill]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T02:30:34.460

如果您按照@NSGod 的建议使用笔划进行绘制，则需要移动到上或下尖端，然后与箭头对齐，然后再到下或上尖端。如果你想要一个像你画的那样的 45 度角，你在坐标中添加或减去的量应该是相等的。

您还需要设置路径的线宽。这将需要与大小成比例。

```
CGPoint origin = CGPointMake(100, 20);

UIBezierPath *path = [UIBezierPath bezierPath];
// Upper tip
[path moveToPoint:CGPointMake(origin.x+20, origin.y-20)];
// Arrow head
[path addLineToPoint:CGPointMake(origin.x, origin.y)];
// Lower tip
[path addLineToPoint:CGPointMake(origin.x+20, origin.y+20)];

[[UIColor redColor] set];
// The line thickness needs to be proportional to the distance from the arrow head to the tips.  Making it half seems about right.
[path setLineWidth:10];
[path stroke]; 
```

结果是这样的形状。

![上面代码绘制的箭头](../Images/6e17f7a4d93d58a0b5a45879bda37382.png)

如果你想填充，而不是描边——如果你想勾勒出你的箭头，这可能是必要的——你需要画出 6 个点，然后关闭路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T02:13:02.570

问题的一个潜在部分是您使用`fill`的是`stroke`.

通过更改`[path fill]`为`[path stroke]`，您将获得以下信息：

```
CGPoint origin = CGPointMake(100, 20);
UIBezierPath *path = [UIBezierPath bezierPath];
[path moveToPoint:origin];
[path addLineToPoint:CGPointMake(origin.x - 10, origin.y - 20)];
[path addLineToPoint:CGPointMake(origin.x - 10, origin.y + 20)];
[[UIColor redColor] set];
// [path fill];
[path stroke]; 
```

![在此处输入图像描述](../Images/e6655c9036d096f0af8eba1b5ab6f058.png)

这就提出了你的意思的`origin`问题。它实际上会转化为箭头点，而不是传统意义上的原点使用方式（意味着被绘制对象的左上角）。

如果要保留 的含义`origin`，则需要将代码修改为以下内容：

```
CGPoint origin = CGPointMake(100, 20);
UIBezierPath *path = [UIBezierPath bezierPath];
[path moveToPoint:CGPointMake(origin.x - 20, origin.y - 20)];
[path addLineToPoint:origin];
[path addLineToPoint:CGPointMake(origin.x - 20, origin.y + 20)];
path.lineWidth = 4.0;
[[UIColor redColor] set];
[path stroke]; 
```

或者，如果您想使用 的传统含义`origin`，您可以使用：

```
CGPoint origin = CGPointMake(100, 20);
UIBezierPath *path = [UIBezierPath bezierPath];
[path moveToPoint:origin];
[path addLineToPoint:CGPointMake(origin.x + 20, origin.y + 20)];
[path addLineToPoint:CGPointMake(origin.x, origin.y + 20 * 2)];
path.lineWidth = 4.0;
[[UIColor redColor] set];
[path stroke]; 
```

这会产生以下结果：

![在此处输入图像描述](../Images/e488ba2dab05fcf9ee597f4c96c7ac4e.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-02T10:17:25.420

这是一个与**Swift 3.0**兼容的类，其来源代码来自上面的@Dondragmer 的回答。

您可以更改：

*   lineHeight : CGFloat
*   线条颜色：UIColor
*   方向：Arrow.Direction（枚举与.up，.down，.left，.right）

```
类箭头：UIView {

    枚举方向{
        向上、向下、向左、向右
    }

    变种方向：方向=方向。右{
        设置{
            审查（）
        }
    }

    var lineColor = UIColor.red {
        设置{
            审查（）
        }
    }

    var lineWidth : CGFloat = 20 {
        设置{
            审查（）
        }
    }

    功能审查（）{
        设置需求显示（）
    }

    静态函数 directionToRadians(_ 方向: Arrow.Direction) -> CGFloat{
        切换方向{
        案例.up：
            返回 Arrow.degreesToRadians(90)
        案例.down：
            返回 Arrow.degreesToRadians(-90)
        案例.左：
            返回 Arrow.degreesToRadians(0)
        案例.对：
            返回 Arrow.degreesToRadians(180)
        }
    }

    静态函数degreesToRadians（_度：CGFloat）-> CGFloat {
        返回度数 * CGFloat(M_PI) / 180
    }

    覆盖 func draw(_ rect: CGRect) {
        让 origin = CGPoint(x: 12, y: self.frame.height / 2)
        让路径 = UIBezierPath()
        path.lineJoinStyle = CGLineJoin.round
        path.move(to: CGPoint(x: origin.x + self.frame.width * (1/2), y: frame.height - 10))
        path.addLine(to: CGPoint(x: origin.x, y: origin.y))
        path.addLine(to: CGPoint(x: origin.x + self.frame.width * (1/2), y: 10))
        lineColor.set()
        path.lineWidth = 线宽
        path.stroke()
        self.backgroundColor = UIColor.clear
        self.transform = CGAffineTransform(rotationAngle: Arrow.directionToRadians(self.direction))
    }
}

```

## 现在你可以使用

这也**与自动布局**兼容。

```
let arrow = Arrow(frame: CGRect(x: 0, y: 0, width: 400, height: 400))
arrow.lineWidth = 20
arrow.lineColor = UIColor.blue
arrow.direction = .up 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T01:46:47.613

我不是在电脑前写代码，但基本上你创建一个 CGMutablePath，然后添加

```
CGContextStrokePath(context); 
```

您可以设置笔触宽度和线帽以获得所需的效果

# django - Django 表单：ModelMultipleChoiceField 显示错误“null”不是主键的有效值

> ID：10326054
> 
> 赞同：0
> 
> 时间：2012-04-26T01:23:53.673
> 
> 标签：django, django-models, django-forms

*如下所述，我将尝试通过更多代码示例更准确地解释我的问题*

在我的应用程序中，我使用模型继承，其中基本模型类是：

```
class Entity(models.Model):
    VISIBILITY_LEVELS = (
                         ('0', 'Private'),
                         ('1', 'Closedy'),
                         ('2', 'Public'),
                         )
    entityType = models.CharField(max_length=50)
    userCreatedBy = models.ForeignKey(User, related_name='user_createdby', editable=False)
    dateCreated = models.DateField(editable=False)
    lastModified = models.DateField()
    lastModifiedBy = models.ForeignKey(User, related_name='user_lastModifiedBy')
    tags = models.ManyToManyField('Tag', blank=True, null=True)
    visibilityLevel = models.CharField(max_length=1, choices=VISIBILITY_LEVELS, default=False) 
```

在我的表单中，我正在编辑一个从实体派生的模型：

```
class Place(Entity):
    name = models.CharField(max_length=155)
    description = models.TextField()
    location = models.ForeignKey(Point) 
```

点和标签模型是：

```
class Point(models.Model):
    lat = models.FloatField()    #coordinates
    lng = models.FloatField()
    hgt = models.FloatField(default=0.0)

class Tag(models.Model):
    tagName = models.CharField(max_length=250)    #tag name
    usedAmount = models.IntegerField(default = 1)     #how many entities has this tag 
```

所有模型都有 django 自动生成的主键。在我的站点中，我使用 AJAX 来处理表单（目前，没有 AJAX 验证，但它会是；）我的第一个问题是：创建用于添加新 Place 对象的表单的最简单方法是什么？最棘手的部分是添加标签，因为我需要启用两者 - 添加新标签和选择现有标签。我是 Django 新手，所以我的一些尝试可能很天真。我的解决方案是制作两个从 ModelForm 继承的用于 Point and Place 的表单和一个用于标记的自定义表单。在标签形式中，我想让用户从数据库中选择现有标签或键入用“;”分隔的新标签 在文本输入中。所以我创建了这三种形式：

```
class PlaceAddForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(PlaceAddForm, self).__init__(*args, **kwargs)
        self.fields['name'].label = "Name"
        self.fields['description'].label = "Desc"
        self.fields['visibilityLevel'].label = "Visibility"

    class Meta:
        model = Place
        fields = ('name', 'description', 
                  'visibilityLevel' )

#--
class PointForm(forms.ModelForm):
    class Meta:
        model = Point

#---     
class TagAppendForm(forms.Form):
    newTags = forms.CharField(
                              widget=forms.TextInput(),
                              required = False,
                              )
    tagsAll = forms.ModelMultipleChoiceField(
                                             label="Choose:",
                                             queryset=Tag.objects.all(),
                                             required = False
                                             )

    def clean_newTags(self):
        if len(self.cleaned_data['newTags']) == 0:
            return []
        tags = self.cleaned_data['newTags'].split(';')
        for t in tags:
            if len(t) == 0:
                raise forms.ValidationError('Tag must be minum 3 characters long')
        return tags 
```

然后在我的模板中我有：

```
<form id="save-form" method="post" action="/user/places/addedit/">
{{ pointForm.as_p }}
{{ placeForm.as_p }}
{{ tagForm.as_p }}
<input type="submit" value="save" />
</form> 
```

视图是：

```
def place_save_view(request):
    ajax = request.GET.has_key('ajax')
    if request.method == 'POST':
        placeForm = PlaceAddForm(request.POST)
        pointForm = PointForm(request.POST)
        tagForm = TagAppendForm(request.POST)

        if placeForm.is_valid() and tagForm.is_valid() and pointForm.is_valid():
             place = _place_save(request, placeForm, pointForm, tagForm)
             variables = RequestContext(request, {'places' : place })
             return HttpResponseRedirect('/user/places/', variables)
        #else:
        #   if ajax:
    elif request.GET.has_key('entity_ptr_id'):
        place = Place.objects.get(id==request.GET['entity_ptr_id'])
        placeForm = PlaceAddForm(request.GET,instance=place)
        point = place.location
        pointForm = PointForm(request.GET,instance=point)
        tagForm = TagAppendForm(initial={'tagsAll': place.tags.values_list('id', flat=True)})
    else:
        placeForm = PlaceAddForm()
        pointForm = PointForm()
        tagForm = TagAppendForm()
    variables = RequestContext(request, {'placeForm': placeForm, 'pointForm': pointForm, 'tagForm': tagForm })
    if ajax:
        return render_to_response('places/place_save.html', variables)
    else:
        return render_to_response('places/add-edit-place.html', variables) 
```

最后是 AJAX：

```
function placeAdd() {
var div = $(document).find("#leftcontent");
div.load("/user/places/addedit/?ajax", null, function() {
    $("#save-form").submit(placeSave);
});
return false;
    }

  function placeSave()
 {
var item = $(this).parent();
var data = {
    lng: item.find("#id_lng").val(),
    lat: item.find("#id_lat").val(),
    hgt: item.find("#id_hgt").val(),
    name: item.find("#id_name").val(),
    description: item.find("#id_description").val(),
    pType: item.find("#id_pType").val(),
    visibilityLevel: item.find("#id_visibilityLevel").val(),
    newTags: item.find("#id_newTags").val(),
    tagsAll: item.find("#id_tagsAll").val()
};
$.post("/user/places/addedit/?ajax", data, function(result){

    if(result != "failure")
    {
        //todo....
    }
    else {
        alert("Failure!");
    }
});
return false; 
```

}

在这里，我要问的不仅仅是一个主题问题：

1.  这样做有更好的解决方案吗？（好的，我可以创建一个自定义表单，但我丢失了一些自动化部分......）

2.  为什么在提交带有空白 newTags 且未选择 tagsAll 字段的表单后，我的 tagsAll 字段出现错误（它出现在表单上 tagsAll 字段上方）：

**“null”不是主键的有效值**

当使用 AJAX 时，我也有在表单上显示错误的问题......：/ 我找到了解决方案，我必须在模板上手动迭代它们（http://infinite-sushi.com/2011/06/ using-ajax-with-django/).. 对于任何其他解决方案，我将不胜感激:)

# java - Hadoop 连接被拒绝错误

> ID：10326057
> 
> 赞同：0
> 
> 时间：2012-04-26T01:24:17.157
> 
> 标签：java, hadoop, connection

我试图安装 RMR (RHadoop) 包，但我设法弄乱了我的 hadoop 设置。现在，它给出了我无法找到解决方案的连接被拒绝错误。任何帮助，将不胜感激。谢谢

```
 java.net.ConnectException: Call to master/***.***.***.***:54310 failed on connection exception: java.net.ConnectException: Connection refused
at org.apache.hadoop.ipc.Client.wrapException(Client.java:1095)
at org.apache.hadoop.ipc.Client.call(Client.java:1071)
at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
at $Proxy2.getProtocolVersion(Unknown Source)
at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:396)
at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:379)
at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:119)
at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:238)
at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:203)
at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:89)
at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1386)
at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:66)
at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1404)
at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:254)
at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:123)
at org.apache.hadoop.mapred.Child$4.run(Child.java:254)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.net.ConnectException: Connection refused
at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:574)
at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:489)
at org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:434)
at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:560)
at org.apache.hadoop.ipc.Client$Connection.access$2000(Client.java:184)
at org.apache.hadoop.ipc.Client.getConnection(Client.java:1202)
at org.apache.hadoop.ipc.Client.call(Client.java:1046)
... 18 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:28:08.317

当你看到这个时，它基本上意味着你无法连接到 NameNode。它要么没有运行，要么运行在不同的端口上。如果您备份了您的工作 *-site.xml 文件，您可以返回到工作版本，而无需完全重新安装您在对您的问题的评论中提出的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T05:43:17.327

为了找出这个问题的答案，我苦苦挣扎了两天两夜。

在我的情况下（我确信这是大多数情况下的问题）必须手动创建 hadoop 临时文件夹并将它们添加到 hdfs-site.xml ！

```
<property>
<name>dfs.data.dir</name>
<value>/home/stefan/Downloads/hadoop-2.7.1/tmp/dfs/name/data</value>
<final>true</final> 
</property> 
<property> 
<name>dfs.name.dir</name>
<value>/home/stefan/Downloads/hadoop-2.7.1/tmp/dfs/name</value> 
<final>true</final> 
</property> 
```

我希望这可以帮助你们不要像我一样经历同样的地狱。

除此之外

```
chown user_name hadoop_folder hadoop_temp_folder
chmod 755 hadoop_folder hadoop_temp_folder 
```

# jquery - 将 KnockoutJS 与多个页面一起使用

> ID：10326062
> 
> 赞同：4
> 
> 时间：2012-04-26T01:25:36.603
> 
> 标签：jquery, knockout.js

我刚刚开始学习 KnockoutJS。我感到困惑的一件事是，样本似乎都集中在具有单个视图模型的单个视图上。大型应用程序如何工作？

我将编写一个纯 html/jquery 应用程序。所有数据都通过 ajax 以 json 格式提供。应用程序顶部有一个通用导航标题，其中包含多个选项卡和子选项卡，这些选项卡和子选项卡使用 Twitter Bootstrap 实现。

如果我将应用程序的每个页面构建为单独的 html 视图和 js 视图模型，我如何维护一个统一的标头？如果这是服务器端的 asp.net 网络表单，我会为此使用母版页。但这都是客户端。

Knockout 中有什么东西可以解决这个问题吗？或者也许是另一个解决这个特定问题的库？

我想我可以在一个大的 html 页面中编写应用程序，但它会相当大。一定有更好的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T20:27:55.417

您绝对可以将您的视图模型分开。在该`ko.applyBindings`方法中，第一个参数是视图模型，但第二个可选参数是要绑定该视图模型的 dom 元素。

我没有仔细研究过 Twitter Bootstrap，但我设置了 jsfiddle，它应该能让你站稳脚跟：http: [//jsfiddle.net/JasonMore/ygT6v/10/](http://jsfiddle.net/JasonMore/ygT6v/10/)

**看法**

```
<ul id="menu" data-bind="foreach:options">
    <li data-bind="text:option"></li>
</ul>
<br/>
<section id="person"> 
    <p>Hey, <span data-bind="text:fullName"></span>, what are you doing?</p>
    <p><label>First: <input type="text" data-bind="value:firstName" /></label></p>
    <p><label>Last: <input type="text" data-bind="value:lastName" /></label></p>
</section >
<br />
<section id="address"> 
    <p>You live at: <span data-bind="text:fullAddress "></span></p>
</section > 
```

**Javascript**

```
// main.js
var menuViewModel = {
    options: ko.observableArray([
        { option: 'person'},
        { option: 'address'}
    ])
};

ko.applyBindings(
    menuViewModel, 
    document.getElementById('menu')
);

// person.js
var personViewModel = new function() {
    var self = this;
    this.firstName = ko.observable('John');
    this.lastName = ko.observable('Doe');
    this.fullName = ko.computed(function() {
        return self.firstName() + ' ' + self.lastName();
    });
};    

ko.applyBindings(
    personViewModel, 
    document.getElementById('person')
);

// address.js
var addressViewModel = new function() {
    var self = this;
    this.address = ko.observable('123 main');
    this.city = ko.observable('Smallville');
    this.state = ko.observable('TX');
    this.zip = ko.observable('12345');
    this.fullAddress = ko.computed(function() {
       return self.address() + ' ' + self.city() + ' ' + self.state() + ' ' + self.zip(); 
    });
};

ko.applyBindings(
    addressViewModel, 
    document.getElementById('address')
);
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:36:02.270

您是说每个选项卡的内容都是“单页”吗？

如果是这样，您可以使用 jQuery.load() 来使用部分数据来拉取数据。那么每个页面都会有自己的模型，并且标题不会受到影响，不是吗？我想这需要澄清一下。

# mysql - Ubuntu 10.10 中奇怪的 mySQL 行为

> ID：10326066
> 
> 赞同：-1
> 
> 时间：2012-04-26T01:26:30.207
> 
> 标签：mysql, ubuntu, lamp

我在 Ubuntu 10.10 下新安装的 mySQL 服务器副本遇到了一些严重问题。我当时安装了 apt 并提供了密码。安装很顺利，但是服务器的行为很奇怪。

首先，为了测试数据库，我创建了一个 php 文件

```
mysql_connect("localhost", "root", "myPassword") or die(mysql_error()); 
```

其中 myPassword 是我在安装过程中询问时输入的密码。这给了我一个拒绝访问错误。我试图进入 mySQL 服务器以寻求我读到的解决方案。正常的语法不起作用，除了“访问被拒绝”之外，我不得不做

```
mysql -u root password myPassword 
```

但是，它不是 mysql shell，而是输出参数和变量的列表。所以在这一点上，我很难过；几年来我没有通过命令行使用过 mySQL，但是这种行为都不熟悉，而且我找不到与服务器交互的方法。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:31:23.480

用于提供密码的 mysql 命令行参数是`-p`，而不是`password`。您还应该省略空格。例如：

```
mysql -uroot -pmyPassword 
```

如果您不想冒密码被泄露的风险...

```
mysql -uroot -p 
```

...将提示您输入密码并在您键入时隐藏字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:40:45.183

如果您安装了 apparmor（这是默认设置），那么当您超出 ubuntu 设置的狭义默认设置时，它可能会导致问题。

mysql允许接触的东西在这里定义：`/etc/apparmor.d/abstractions/mysql`

如果您将套接字文件放在其他地方，您将收到拒绝访问的消息。

要更仔细地查看事物，请像这样运行您的 mysql 客户端：

```
strace -e file mysql <blah blah> 
```

这将打印出 stderr 上的任何系统级文件操作。然后，您可以准确查看导致权限错误的操作。如果您没有看到问题，您可以`-e network`改用，查看网络操作。

# android - 如何在 Android 的 SharedPreferences 中存储整数数组？

> ID：10326073
> 
> 赞同：3
> 
> 时间：2012-04-26T01:27:18.093
> 
> 标签：android, arrays, sharedpreferences

我有一个名为的数组`Upval`，它有 16 个整数值，我想将它们存储在我的 SharedPreferences 中，而不为每个值创建单独的值，但是 SharedPrefernces 不允许使用数组，最简单的方法是什么？声明看起来像这样：

```
Integer[] UpVal = new Integer[16]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T01:39:16.167

您可以通过转换将其存储为字符串：

```
Arrays.toString(upVal) 
```

将其取回并将 String 转换为 Integer 数组是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T02:23:12.913

您可以使用 TextUtils.join(";", myInts) 将数组序列化为 String，然后使用 TextUtils 之类的方法将其反序列化。SimpleStringSplitter 或实现您自己的 TextUtils.StringSplitter。

# scala - liftweb sbt 持续集成教程

> ID：10326076
> 
> 赞同：2
> 
> 时间：2012-04-26T01:27:37.030
> 
> 标签：scala, continuous-integration, lift, sbt

我们有一个 liftweb sbt 项目。我们在 sbt 中运行 'container:start' 进行开发，但现在我们需要一个测试部署。我们可以使用 Jenkins 进行持续集成吗？如何？我在网上搜索，但没有找到有关此主题的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:30:20.587

您是否尝试过使用 Jenkins SBT 插件？见[https://wiki.jenkins-ci.org/display/JENKINS/sbt+plugin](https://wiki.jenkins-ci.org/display/JENKINS/sbt+plugin)

# php - 从菜单显示 MYSQL 数据

> ID：10326077
> 
> 赞同：0
> 
> 时间：2012-04-26T01:27:38.967
> 
> 标签：php, mysql, database, menu

我有一个 MYSQL 数据库，其中包含许多字段，例如属性、卧室、大小等

我有两个下拉列表，其中包含数据库中包含的数据

提交选项时，我希望打开一个新页面以显示结果。我收到错误消息 mysql_fetch_assoc(): 提供的参数不是有效的 MySQL 并且不知道如何解决这个问题！非常感谢您的帮助...我了解 SQL 注入，并希望在我首先完成本节之后纠正这个问题

HTML

```
 <form method="get" action="submit.php">

     Number:  <select name="property">
     <option value="Aviemore House">Aviemore House</option>
     <option value="Dalfaber House">Dalfaber House</option>
     </select>
     <br>

     Name: <select name="bedrooms">
     <option value="2">2</option>
     <option value="3">3</option></select>
     <br>

    <input type="submit" value="submit" />
    </form> 
```

PHP

```
 <?php

 require 'defaults.php';
 require 'database.php';

 $property = $_GET['property'] ;
 $bedrooms = $_GET['bedrooms'] ;

 $query = "select FROM properties where property = '$property' & bedrooms = '$bedrooms'";

 while ($row = mysql_fetch_assoc($result))
 {
$r[] = $row;
 }

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:29:37.317

您忘记执行查询了！

```
<?php

 require 'defaults.php';
 require 'database.php';

 $property = $_GET['property'] ;
 $bedrooms = $_GET['bedrooms'] ;

 $query = "select FROM properties where property = '$property' & bedrooms = '$bedrooms'";
 $result = mysql_query($query); // <-- You forgot this
 while ($row = mysql_fetch_assoc($result))
 {
    $r[] = $row;
 }

 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:30:38.257

试试这个：

```
$query = "SELECT * FROM `properties` WHERE property = '{$property}' AND bedrooms = '{$bedrooms}'";
$row=mysql_query($query); 
```

您的 sql 格式错误，需要执行查询。

# java - 在 ubuntu 12.04 上的 Eclipse 中缺少带有 oracle-java7-jdk 的库

> ID：10326080
> 
> 赞同：2
> 
> 时间：2012-04-26T01:28:03.600
> 
> 标签：java, eclipse, ubuntu

我最近安装了 ubuntu 12.04 final beta

从 webupd8 ppa 安装 oracle jdk 后，启动 eclipse 失败并抱怨缺少共享库。

```
Can't load library: /home/bob/.swt/lib/linux/x86_64/libswt-gtk-3740.so 
```

我四处搜索，发现了这个问题：[Eclipse cannot load SWT libraries](https://stackoverflow.com/questions/10165693/ubuntu-eclipse-cannot-load-swt-libraries-not-opening)

正如 OP 所推荐的，我尝试切换到 open-jdk，效果非常好。然而，问题是我正在开发一个不支持 openjdk 的项目。

我也尝试了第二种解决方案（scott 的解决方案，它只是在 ~/.swt/lib/linux/x86_64/ 中创建指向 /usr/lib/jni/... 的符号链接）。Eclipse 启动，一切正常，但仍然缺少一些库；这是我尝试运行我的项目时得到的：

```
Caused by: java.lang.UnsatisfiedLinkError: /tmp/libgdx/1352105074/libjogl_awt-linux64.so: libjawt.so: cannot open shared object file: No such file or directory 
```

我知道 libjawt.so 在我电脑上的某个地方：

```
$ locate libjawt.so
/usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/libjawt.so
/usr/lib/jvm/java-7-oracle/jre/lib/amd64/libjawt.so 
```

但是eclipse或者java好像都认为库应该放在~/.swt/lib/linux/x86_64，是不是很奇怪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:29:33.143

尝试下载最新版本的 Eclipse 并运行它。出于某种原因，它工作正常。我刚刚放弃了旧版本的 Eclipse。我希望这对其他人有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:51:50.140

据我了解，Eclipse 在启动时默认为其自己的内部 JRE。我推荐以下内容：

1.  修改您的 CLASSPATH 变量以包含所需库的路径；
2.  设置您的 JAVA_HOME 以匹配实际的 JAVA_HOME；
3.  通过使用以下信息自定义 eclipse.ini 来设置 Eclipse 以从所需的 JVM 启动：[http ://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F#eclipse.ini](http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F#eclipse.ini)
4.  另外，您可以在启动 Eclipse 时指定 -classpath 选项吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T13:33:28.697

请注意，这里有*两个*Java 运行时在起作用。一个用于运行 Eclipse 本身，另一个用于运行您的代码。它们不必相同！

我会建议

*   使用有效的 JDK 运行 Eclipse
*   手动下载 Oracle JDK 并将其解压缩到主目录中的文件夹中
*   告诉 Eclipse 这个额外的运行时（[http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftask-add_new_jre.htm](http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftask-add_new_jre.htm)）
*   将您的项目配置为使用该 JVM。（[http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftask-assign_default_jre.htm](http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftask-assign_default_jre.htm)）

现在您自己的代码已针对 Oracle Java 进行编译并运行。

# java - 如何在我的 JTextPane 中显示 Applet

> ID：10326081
> 
> 赞同：0
> 
> 时间：2012-04-26T01:28:13.590
> 
> 标签：java, html, swing, applet, jtextpane

我有一个 html 文件，其中包含一个用于绘制图像的小程序，我试图在我的 JTextPane 中显示它，但是当我编译时，jTextPane 只显示小程序标记而不显示图像，当我使用导航器执行文件 html它工作正常，这是我的代码：

```
public static void main(String args[]) { 

JTextPane tp = new JTextPane();
  JScrollPane js = new JScrollPane();
  js.getViewport().add(tp);
  JFrame jf = new JFrame();
  jf.getContentPane().add(js);
  jf.pack();
  jf.setVisible(true); 
  tp.setPage("file:///C:/Documents%20and%20Settings/USER/Thomson/NetBeansProjects/testapp/src/testapp.html");

  }
} 
```

我不知道我的代码中的问题出在哪里，有人可以帮助我，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:31:01.833

[HTMLEditorKit](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/html/HTMLEditorKit.html)`applet`不支持该标记。

编辑：

JTextPane 对 HTML 的支持非常有限。我不确定您要实现什么，但您可以尝试使用嵌入式浏览器，即[jbrowser](http://code.google.com/p/jbrowser/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T01:46:39.770

我相信做到这一点的最好方法是简单`Applet`地将`AppletStub``Applet``JLabel`

# python - _subprocess 模块

> ID：10326087
> 
> 赞同：3
> 
> 时间：2012-04-26T01:28:46.657
> 
> 标签：python, subprocess

`_subprocess`如[该问题](https://stackoverflow.com/questions/3390762/how-do-i-eliminate-windows-consoles-from-spawned-processes-in-python-2-7)所示，有一个名为 的模块。

我能够导入它，但我没有找到任何关于它是什么以及它与`subprocess`.

这里有人知道这个模块是做什么的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T01:33:18.843

`_subprocess`似乎是一个特定于 Windows 的 C 扩展模块，它实现了`subprocess`模块本身使用的一些功能。如果您[在源代码中查找`subprocess`](http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Lib/subprocess.py),`_subprocess`仅在`if mswindows`块内部引用。

这是实现的一个细节，所以你绝对不应该在任何实际代码中使用它（当然，有些好奇从来都不是坏事）。

[这是 `_subprocess' 的来源](http://hg.python.org/releasing/2.7.3/file/7bb96963d067/PC/_subprocess.c)。顶部的评论说

```
* support routines for subprocess module
*
* Currently, this extension module is only required when using the
* subprocess module on Windows, but in the future, stubs for other
* platforms might be added here as well. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T01:33:08.647

这是一个实现细节，存在于 Windows 上，但不存在于（例如）Unix 系统上。你不应该使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T04:00:28.177

与 Python 中以下划线开头的其他名称一样，此类模块通常并不意味着直接使用。通常应该使用一个不带下划线的模块，例如`subprocess`.

这通常用于将模块实现划分为用 C 和纯 Python 编码的部分。带下划线的模块是用 C 语言编写的，并且“在其之上”添加了一个纯 Python 模块以提供高级 API。

# cakephp - CakePHP 中的路由和路径

> ID：10326094
> 
> 赞同：0
> 
> 时间：2012-04-26T01:29:52.553
> 
> 标签：cakephp

我目前正在为一个朋友开发一个网站，但我遇到了一个奇怪的问题。首先让我说我是一个没有经验的开发人员，我似乎找不到解决方案：我已经用不同的语言本地化了我的网站，你可以在这里观看：http: [//parfum-poudre.fr/en](http://parfum-poudre.fr/en)（英文）它工作正常，但如果你去[http://parfum-poudre.fr/en/](http://parfum-poudre.fr/en/)路径是混乱的，有些图片没有出现......例如，这个网站上有一个专业的空间，但如果你去回到公共空间，我也有同样的问题……有人对此有什么要说的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:48:51.553

是否在布局文件中使用普通 HTML 标签添加了图像、脚本和样式？
这可能是一个问题。
您可以使用将图像、脚本和样式添加到布局文件中

```
<?php
echo $this -> Html -> css('style');
echo $this -> Html -> script('jquery');

echo $this -> fetch('css');
echo $this -> fetch('script');

?>
<?php echo $this->Html->image('logo2.png', array('url' => '/ProjectName/','alt'=>'Logo')); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:42:00.100

将此添加到您的`app_helper.php`

```
class AppHelper extends Helper {
    function url($url = null, $full = false) {
        $routerUrl = Router::url($url, $full);
        if (!preg_match('/\\.(rss|html|js|css|jpeg|jpg|gif|png|xml?)$/', strtolower($routerUrl)) && substr($routerUrl, -1) != '/') {
            $routerUrl .= '/';
        }
        return $routerUrl;
    }
} 
```

AppHelper 的内容位于`HTDOCS/PROJECT/APP`文件夹 (APP ROOT) 中的 app_helper.php 文件中。如果文件不存在，请创建一个。

并编辑您的 .htaccess 到

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule ^(.*)$ http://domain.com/$1/ [L,R=301] 
```

.htaccess 代码位于文件`HTDOCS/PROJECT/APP/WEBROOT`夹 (APP ROOT/WEBROOT) 中的 .htaccess 文件中。只需替换原始内容并确保将 domain.com 更改为您的域。

# android - 第一次后停止位置更新

> ID：10326095
> 
> 赞同：0
> 
> 时间：2012-04-26T01:30:05.510
> 
> 标签：android

我正在使用实现 LocationListener 类的服务。现在我想知道设备的当前位置（纬度，经度）。我使用了 requestLocationUpdates 方法，以便在位置更改时调用 onLocationChanged 方法。我希望只调用一次 onLocationChanged 方法，即当我第一次获得位置时，不应再次调用它。我调用了 stopSelf 方法来停止 onLocationChanged 方法中的服务。但我仍然收到位置更新。请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T02:09:21.617

调用[removeUpdates](http://developer.android.com/intl/fr/reference/android/location/LocationManager.html#removeUpdates%28android.location.LocationListener%29) on `LocationManager`，传递您的位置侦听器。

```
mLocationManager.removeUpdates(mListener); 
```

# ubuntu - 为什么在 GNU/Linux 上停止（或重新启动）squid3 这么慢？

> ID：10326096
> 
> 赞同：3
> 
> 时间：2012-04-26T01:30:15.413
> 
> 标签：ubuntu, squid, performance, upstart

我使用的是 Ubuntu 11.04，在调用“/etc/init.d/squid3 restart”时，需要大约半分钟才能重新启动。它在做什么？

输出如下所示：

```
* Restarting Squid HTTP Proxy 3.x squid3
*  Waiting...
* ...
* ...
* ...
* ...
* ...
* ...                                                                   [ OK ]
* Creating Squid HTTP Proxy 3.x cache structure 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-03-21T16:14:58.830

降低您的`shutdown_lifetime`设置。默认设置为 30 秒。

[http://www.squid-cache.org/Doc/config/shutdown_lifetime/](http://www.squid-cache.org/Doc/config/shutdown_lifetime/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:05:22.080

因为它关闭了所有的文件描述符，sockets 才停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-16T09:35:01.387

也许这不适用于你..因为这假设鱿鱼坏了。

我在 Ubuntu 14 上有一个正在运行/工作的 squid，在 2 次升级到 Ubuntu 18 后，配置文件和文件夹愉快地发生了变化，它无法正常启动 - 但只在日志中可见，没有抛出错误，systemctl 也报告它启动和成功停止。

修复启动问题后，中高 cpu 负载消失了，重启时间长，我认为代理也可以工作。

在我的情况下，我所要做的就是将丢失的配置文件（在我的情况下为 squid_passwd）从旧配置文件夹复制到新配置文件夹。

# iphone - iPhone UIView touchesMoved: withEvent: 不会在 UIView 上使用手势识别器调用

> ID：10326097
> 
> 赞同：5
> 
> 时间：2012-04-26T01:30:19.777
> 
> 标签：iphone, objective-c, ios, uiview, uiresponder

我添加了一个`UIView`依赖于 TouchesMoved: 拖动触摸的事件。在同一个视图控制器中已经存在长按、点击、旋转和捏合手势识别器。我遇到了视图接收`touchesBegan:`和`touchesEnded:`事件，但没有移动的问题。

**我的 touchesMoved 问题不是由手势识别器取消视图中的触摸引起的吗？我还涉及到滚动视图。这可能是罪魁祸首吗？**

如果我无法使用 touchesMoved，这是最接近实现“触摸和移动”功能的手势。它是点击还是平移手势识别器？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T02:51:41.413

默认情况下，手势在它们处于活动状态时会取消它们链接到的对象中的触摸。[您可以通过将cancelsTouchesInView](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instp/UIGestureRecognizer/cancelsTouchesInView)属性设置为 来停止此行为`NO`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T03:59:42.480

将原始触摸处理与手势识别器混合可能会产生奇怪的行为，至少我无法让它稳定地工作，它有点不稳定。在您的情况下，您可能只想将拖动手势识别器 (UIPanGestureRecognizer) 添加到视图以处理拖动。

您可以通过查看 UIGestureRecognizerDelegate 的 gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer: 来控制手势识别器在哪些情况下触发的机制。

# asp.net - 使用 msi 部署 asp.net 网站与预编译部署

> ID：10326104
> 
> 赞同：0
> 
> 时间：2012-04-26T01:31:08.477
> 
> 标签：asp.net, deployment

我读到使用 aspnet_compiler 预编译网站可以加快网站速度（通过减轻因工作进程重启引起的延迟）。但是，当您使用 msi 进行部署时，部署的东西不是已经在预编译 (MSIL) 形式中了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:45:37.470

When`Compilation batch`为 True，消除了第一次访问文件时需要编译造成的延迟。当此属性设置为 True 时，ASP.NET 会以批处理模式预编译所有未编译的文件，这会导致第一次编译文件时的延迟更长。然而，在这个初始延迟之后，编译延迟在随后的文件访问中被消除。默认值为真。

[http://msdn.microsoft.com/en-us/library/s10awwz0.aspx](http://msdn.microsoft.com/en-us/library/s10awwz0.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T02:09:20.523

是的，当您使用 MSI 部署您的网站时，您首先[发布](http://msdn.microsoft.com/en-us/library/20yh9f1b%28v=vs.80%29.aspx)它，它**会完全预编译它**。因此，在第一次命中时节省了一些时间（无论 的值如何`Compilation batch`）。

这就是我们在工作中实际部署网站的方式。Visual Studio 的 Web 设置项目非常简单。您只需将预编译的网站添加为内容，设置虚拟目录名称即可！您将获得下一个下一个下一个类型的向导作为安装文件

# objective-c - 绘制图像

> ID：10326107
> 
> 赞同：2
> 
> 时间：2012-04-26T01:31:23.223
> 
> 标签：objective-c, uiimageview, drawing, transparent

我正在研究一些绘图代码。我的那部分工作得很好。

我想在图像上绘图，但我仍然希望能够看到图像的细节、黑线等。

我正在做的是制作一个透明的 UIImageView 来保存图像。

我不确定如何正确设置此设置。

这应该添加到我在它上面或下面着色的另一个 UIImageView 之上吗？

这是我到目前为止所拥有的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    topImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 46, 320, 370)];
    [topImageView setImage:[UIImage imageNamed:@"imagesmall.png"]];
    topImageView.alpha = 1.0;
    topImageView.layer.opacity = 1.0;
    topImageView.layer.opaque = NO;
    [self.view addSubview:topImageView];
    [topImageView release];
} 
```

有人想吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T03:39:11.917

是的，您可以在其他视图上绘制视图。它们是按照添加为子视图的顺序绘制的，除非您在那之后重新排列它们。

您可能需要`opaque`为某些视图设置属性（这不同于并覆盖它们的图层不透明度），并将它们设置`backgroundColor`为`nil`. `UIImageView`默认情况下似乎是透明的，只要它的图像是；其他一些`UIView`子类不是。

那么，您的叠加层将是什么？如果您只需要在另一个图像上显示一个图像，那么您在这里所拥有的似乎已经可以工作了。如果您需要以编程方式绘制一些线条，则需要这样做：

1.  创建 的子类`UIView`。
2.  实现它的`drawRect`方法来显示你需要的内容。
3.  当您在背景图像上添加自定义视图时，请确保它不是`opaque`并且没有`backgroundColor`.

这里的一个常见问题是发现您的前台工作正常，但后台没有正确加载。要确保背景存在，请将`alpha`前景视图的 设置为`0.5`。您不想在生产中这样做，但它可以让您验证两个视图是否存在。

# wordpress - 将 Wordpress 站点移至新服务器/域 | 被要求重新安装 WP

> ID：10326112
> 
> 赞同：0
> 
> 时间：2012-04-26T01:31:44.607
> 
> 标签：wordpress

在将站点移动到新服务器和域名后，我被要求重新安装 Wordpress（标准 5 分钟安装）。

[http://kevineikenberry.com](http://kevineikenberry.com)

测试网址：

[http://keg.brettatkin.com](http://keg.brettatkin.com)

我检查了 wp_config 并且新的数据库设置正确且有效 - 我设置了一个从数据库中提取记录的测试页面。

我已经完成了这个线程（http://stackoverflow.com/questions/4367058/problems-with-moving-my-wordpress-site-to-another-domain-server）中列出的事情，例如运行一对查询以更新域名。

我做的另一件事是将表扩展名更改为 wp_ 以外的其他内容

任何帮助都是极好的。我不知所措，一定是错过了一些愚蠢的事情。

谢谢

布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:38:49.687

你碰巧你的表的前缀，如果你这样做有需要更改的数据库记录，你也必须更改它`config.php`

看看这个：
[http ://digwp.com/2010/10/change-database-prefix/](http://digwp.com/2010/10/change-database-prefix/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:54:09.290

您已经更改了表前缀，这意味着您有不同的表并且您的 wp-config 设置将不起作用，如果您更改了表前缀，也会在 wp-config 文件中更新它，保存并再次检查。

# php - 为什么 PHP foreach 显示查询帖子两次？

> ID：10326113
> 
> 赞同：-2
> 
> 时间：2012-04-26T01:31:44.727
> 
> 标签：php, mysql, foreach

当我尝试从某个列下的某个表中查询某些内容时，回显结果显示两个值，一个带有键 0，另一个带有该列的键名。

我的代码是这样的：

$query = "从 nepal_posts 中选择 id"; $queryExe = mysql_query($query, $connection);

```
while ($fetched = mysql_fetch_array($queryExe)) {
    foreach ($fetched as $key => $value) {
        echo $key."----->".$value."  ";
    }
 } 
```

结果是这样的：

> 0----->9 id----->9 0----->10 id----->10

为什么有两次重复？

我应该如何编码，以获得正确的结果？

我的数据库表是这样的：

> id -> 9, 10 title -> About Us / Om Oss, Our Services / VÃ¥r Verksamhet post -> bla bla, bla bla

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T01:34:18.877

> `mysql_fetch_array`
> 
> 返回与获取的行相对应的字符串数组，或者 `FALSE`如果没有更多行。返回数组的类型取决于如何`result_type`定义。**通过使用`MYSQL_BOTH`（默认），您将获得一个包含关联索引和数字索引的数组。**使用`MYSQL_ASSOC`，您只能获得关联索引（按`mysql_fetch_assoc()`工作），使用 `MYSQL_NUM`，您只能获得数字索引（按`mysql_fetch_row()`工作）。
> 
> [http://php.net/mysql_fetch_array](http://php.net/mysql_fetch_array)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T01:33:58.393

使用`mysql_fetch_assoc()`代替`mysql_fetch_array()`

```
while ($fetched = mysql_fetch_assoc($queryExe)) {
    foreach ($fetched as $key => $value) {
        echo $key."----->".$value."  ";
    }
 } 
```

# seo - 如何向 Google 及其机器人添加动态链接

> ID：10326114
> 
> 赞同：0
> 
> 时间：2012-04-26T01:32:10.253
> 
> 标签：seo, sitemap

我有一个网站，当您第一次访问该网站时，它只会显示普通域，因此 /. 当他们使用表单时，他们将被转发到 /question/DYNAMIC(question id)。

所以google没有办法看到这些链接。

有没有办法告诉谷歌所有这些链接，而无需手动放入这些链接，也不必保持最新，因为某些问题可能会在以后删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:35:17.217

提交[XML 站点地图](http://www.sitemaps.org/)

# python - 将数字字符串编码为缩短的字母数字字符串，然后再返回

> ID：10326118
> 
> 赞同：9
> 
> 时间：2012-04-26T01:32:49.867
> 
> 标签：python, string, encode, numeric

快速提问。我正在尝试在 Python 中查找或编写一个编码器，以通过使用大小写字母来缩短一串数字。数字字符串看起来像这样：

```
20120425161608678259146181504021022591461815040210220120425161608667 
```

长度始终相同。

我最初的想法是编写一些简单的编码器来利用大小写字母和数字将这个字符串缩短成看起来更像这样的东西：

```
a26Dkd38JK 
```

这完全是武断的，只是想尽可能清楚。我确信有一种非常巧妙的方法可以做到这一点，可能已经内置了。也许这是一个令人尴尬的问题，甚至被问到。

此外，我需要能够获取缩短的字符串并将其转换回更长的数值。我应该写一些东西并发布代码，还是这是我应该已经知道的 Python 内置函数？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T02:04:20.820

有两个函数是自定义的（不是基于`base64`），但会产生更短的输出：

```
chrs = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'
l = len(chrs)

def int_to_cust(i):
    result = ''
    while i:
        result = chrs[i % l] + result
        i = i // l
    if not result:
        result = chrs[0]
    return result

def cust_to_int(s):
    result = 0
    for char in s:
        result = result * l + chrs.find(char)
    return result 
```

结果是：

```
>>> int_to_cust(20120425161608678259146181504021022591461815040210220120425161608667)
'9F9mFGkji7k6QFRACqLwuonnoj9SqPrs3G3fRx'
>>> cust_to_int('9F9mFGkji7k6QFRACqLwuonnoj9SqPrs3G3fRx')
20120425161608678259146181504021022591461815040210220120425161608667L 
```

如果将其他字符添加到`chrs`变量中，还可以缩短生成的字符串。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-26T01:38:55.857

这是一个很好的压缩：

```
import base64

def num_to_alpha(num):
    num = hex(num)[2:].rstrip("L")

    if len(num) % 2:
        num = "0" + num

    return base64.b64encode(num.decode('hex')) 
```

它首先将整数转换为字节串，然后 base64 对其进行编码。这是解码器：

```
def alpha_to_num(alpha):
    num_bytes = base64.b64decode(alpha)
    return int(num_bytes.encode('hex'), 16) 
```

例子：

```
>>> num_to_alpha(20120425161608678259146181504021022591461815040210220120425161608667)
'vw4LUVm4Ea3fMnoTkHzNOlP6Z7eUAkHNdZjN2w=='
>>> alpha_to_num('vw4LUVm4Ea3fMnoTkHzNOlP6Z7eUAkHNdZjN2w==')
20120425161608678259146181504021022591461815040210220120425161608667 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-18T15:42:50.460

用“类”来做：

```
VALID_CHRS = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'
BASE = len(VALID_CHRS)
MAP_CHRS = {k: v
            for k, v in zip(VALID_CHRS, range(BASE + 1))}

class TinyNum:
    """Compact number representation in alphanumeric characters."""

    def __init__(self, n):
        result = ''
        while n:
            result = VALID_CHRS[n % BASE] + result
            n //= BASE
        if not result:
            result = VALID_CHRS[0]
        self.num = result

    def to_int(self):
        """Return the number as an int."""
        result = 0
        for char in self.num:
            result = result * BASE + MAP_CHRS[char]
        return result 
```

示例用法：

```
>> n = 4590823745
>> tn = TinyNum(a)
>> print(n)
4590823745
>> print(tn.num)
50GCYh
print(tn.to_int())
4590823745 
```

（基于[塔德克的回答](https://stackoverflow.com/a/10326291/2529619)。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T01:55:03.963

```
>>> s="20120425161608678259146181504021022591461815040210220120425161608667"
>>> import base64, zlib
>>> base64.b64encode(zlib.compress(s))
'eJxly8ENACAMA7GVclGblv0X4434WrKFVW5CtJl1HyosrZKRf3hL5gLVZA2b'
>>> zlib.decompress(base64.b64decode(_))
'20120425161608678259146181504021022591461815040210220120425161608667' 
```

所以 zlib 在压缩数字字符串方面并不是很聪明:(

# objective-c - ttimageview setframe 的问题不起作用

> ID：10326119
> 
> 赞同：0
> 
> 时间：2012-04-26T01:33:07.747
> 
> 标签：objective-c, ios, uiimageview

我有一个 ttimageview 可以很好地与最初使用构造函数设置的框架配合使用。但是，如果我做类似 [ttimageview setFrame: someFrame]; 它不起作用。

任何人都可以建议如何解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:54:28.843

所以，似乎我需要删除图像，释放它，用适当的框架重新分配它来修复框架问题。不知道为什么 setFrame 不起作用。最后写了一个新方法。

# java - 使用继承，为什么我的测试类中没有定义 goPee()？

> ID：10326124
> 
> 赞同：4
> 
> 时间：2012-04-26T01:33:26.077
> 
> 标签：java, inheritance

我正在尝试使用继承，以便我可以正确执行测试类中包含的代码。我不确定如何实现具有 goPee() 方法的名为浴室的抽象类或接口。你知道如何编码吗？

如果我添加一个抽象类或一个接口并分别通过扩展或实现将它们添加到 Human 类中，我总是被要求在 Human 类中为 goPee() 方法编写实现，我不想这样做，因为我的 goPee() 方法实现是在 Male 和 Female 子类中编写的。

```
import java.util.ArrayList;

class Human
{
  private String name;
  public Human (String name)
  {
    this.name = name;
  }
  public String getName()
  {
    return name;
  }
  public void eat()
  {
    System.out.println(name + " went to fridge.");
  }
}

class Male extends Human
{
  public Male(String name)
  {
    super(name);
  }
  public void goPee()
  {
    System.out.println(getName() + " stood up.");
  }
}

class Female extends Human
{
  public Female(String name)
  {
    super(name);
  }
  public void goPee()
  {
    System.out.println(getName() + " sat down.");
  }
}

public class TestHuman
{
  public static void main(String[] args)
  {
    ArrayList<Human> arr = new ArrayList<Human>();
    arr.add(new Male("john"));
    arr.add(new Female("sally"));
    for (int count = 0; count < arr.size(); count++)
    {
      arr.get(count).eat();
      arr.get(count).goPee();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T01:36:14.493

`goPee()`您必须在 Human 类中定义一个方法。由于您在两个子类中都覆盖了它，因此它可以是一个抽象方法。这也意味着 Human 必须是抽象的。

```
abstract class Human
{
  private String name;
  public Human (String name)
  {
    this.name = name;
  }
  public String getName()
  {
    return name;
      }
  public void eat()
  {
    System.out.println(name + " went to fridge.");
  }
  public abstract void goPee();
} 
```

在 Human 中声明一个抽象方法可确保 Human 的所有子类`goPee()`以相同的参数和返回类型实现该方法。这使您可以`goPee()`在不知道是男性还是女性的情况下调用人类，因为您知道两者都实现了它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T01:36:13.920

为了能够多态地调用子类的方法，您需要在基类中定义一个具有相同签名的方法。

```
abstract class Human {
    public abstract void goPee();
} 
```

您不需要将类抽象化，但在这种情况下这样做是有意义的，因为没有无性别的人类。但是，如果您想在派生类的方法之间共享*一些*实现，您可以将通用代码放在基类实现中：

```
class Human {
    public void goPee() {
        System.out.println(getName() + " lifted the cover.");
    }
}

class Male extends Human {
    public void goPee() {
        super.goPee();
        System.out.println(getName() + " stood up.");
    }
}

class Female extends Human {
    public void goPee() {
        super.goPee();
        System.out.println(getName() + " sat down.");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T01:39:37.953

您的基本问题是您尝试在不存在的 Human 引用上调用方法。

如果您将对象正确地转换为男性或女性对象，那么您会发现您可以调用该方法。由于您的容器只知道您的基类，因此您需要在那里定义方法，然后多态性将调用与 Human 引用相关的类型中的正确定义。（即男性或女性对象）

# ruby-on-rails - Rails：Nokogiri 问题，放置代码的位置。

> ID：10326128
> 
> 赞同：1
> 
> 时间：2012-04-26T01:34:08.337
> 
> 标签：ruby-on-rails, ruby, nokogiri

我有一个关于将 Nokogiri 应用到我的 Rails 应用程序的问题。我正在尝试从网站收集棒球统计数据并将数据显示到视图中。我成功地解析了数据，但是，我不确定在哪里以 RESTful 方式存储代码。

目前，我正在收集统计数据，将它们放入一个数组中，然后将它们与另一个数组匹配（按排名、团队、联赛等）。然后将这两个数组放入哈希中。有没有更有效的方法来做到这一点（如解析数据，然后将数据分配为哈希值，而排名、球队、联赛等被分配为哈希键）？

最后，我已将 Nokogiri 调用放入我的控制器中，但我确实相信有更好的方法。Ryan Bate 的 Railscasts 建议将 Nokogiri 调用放入 rake 任务 (/lib/tasks/)。因为，我希望网站每天接收新的棒球统计数据，我是否必须定期运行 rake 任务？其次，我如何最好地将数据实施到视图中。

在线搜索带来了将其放入配置/初始化程序的想法，但我不确定这是否是一个更好的解决方案。

以下是 Nokogiri 调用：

```
task :fetch_mets => :environment do 
  require 'nokogiri' 
  require 'open-uri' 

    url = "http..." 
    doc = Nokogiri::html(open(url)) 

    x = Array.new
    doc.css('tr:nth-child(14) td').each do |stat|
      x << stat.content 
    end 

    a = %w[rank team league games_total games_won games_lost ratio streak] 
    o = Hash[a.zip x] 

    statistics = Hash[o.amp{|(y,z)| [y.to_sym, z]}] 

    @order_stat = statistics.each{|key, value| puts #{key} is #{value}."}
end 
```

如果我需要澄清任何事情，请告诉我，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:37:01.580

在您的数据库中创建一个名为 statistics 的表，并在您的哈希中包含所有键（加上 created_on 和 id）。要保存您的统计数据，请执行以下操作：

```
Statistic.new(statistics).save 
```

然后在您的视图中拉出created_on 最高的那个。要在 cron 计划上运行 rake 任务，请查看[无论何时](https://github.com/javan/whenever)。

也可能更清洁：

```
keys = %w[rank team league games_total games_won games_lost ratio streak].map(&:to_sym)
values = doc.css('tr:nth-child(14) td').map(&:text)
statistics = Hash[keys.zip values] 
```

# vb.net - DigitalPersona 序列化

> ID：10326131
> 
> 赞同：0
> 
> 时间：2012-04-26T01:34:49.187
> 
> 标签：vb.net, serialization, digital-persona-sdk

在这里遇到一个小问题，不知道代码哪里错了

```
 Private Sub SimpleButton1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles SimpleButton1.Click
    Dim str As New MemoryStream
    Dim Serializetemplate As New DPFP.Template
    Serializetemplate.Serialize(str)
    Dim serializedTemplate As Byte() = str.ToArray()

    'save to database
    opencon1()
    Dim cmd As MySql.Data.MySqlClient.MySqlCommand
    cmd = New MySql.Data.MySqlClient.MySqlCommand
    cmd.Parameters.AddWithValue("?imagedata", serializedTemplate)
    cmd.Parameters.AddWithValue("?userid", txtEmpid.Text)
    cmd.CommandText = "UPDATE master SET fp1=?imagedata WHERE userid=?userid"
    cmd.CommandType = CommandType.Text
    cmd.Connection = con1
    cmd.ExecuteNonQuery()
End Sub 
```

**我在Serializetemplate.Serialize(str)**处收到错误消息，错误消息**为 Bad Serialization**

有人遇到过这个错误并解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:47:37.637

Joseph 我不太擅长 VB，但据我所知，您正在声明一个新的 DPFP.Template，然后将其序列化到您的内存流中。你为什么做这个？

鉴于您正在注册或验证 SDK，将为您提供事件处理程序上的模板

```
private void Enrolled(object Control, int Finger, DPFP.Template Template, ref DPFP.Gui.EventHandlerStatus Status)
{
   if (Status == DPFP.Gui.EventHandlerStatus.Success)
   {
      // Here you can use the template as  Template.Bytes
   }
} 
```

模板已经序列化为 byte[]。

我认为，鉴于您只是创建模板（空白），那么当您尝试序列化它时会引发异常。

# wpf - 如何将一个窗口添加到另一个窗口？

> ID：10326135
> 
> 赞同：1
> 
> 时间：2012-04-26T01:35:55.103
> 
> 标签：wpf, mvvm, wpftoolkit

在这里，我想将 accountview.xaml 添加到 accountlistview.xaml 中。我尝试了很多选项，但我做不到。这里 accountlistview.xaml 包含网格，accountview.xaml 包含文本框。accountlistview.xaml 的代码

```
<UserControl x:Class="MyBooks.View.accountListView"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:vw="clr-namespace:MyBooks.View"
xmlns:uic="clr-namespace:UIControls;assembly=UIControls"
xmlns:wpftoolkit="http://schemas.microsoft.com/wpf/2008/toolkit">

<UserControl.Resources>
    <ResourceDictionary Source="ViewResources.xaml" />
</UserControl.Resources>

<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <Grid.ColumnDefinitions>
        <ColumnDefinition  Width="*"/>
        <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions><wpftoolkit:DataGrid Grid.Row="1"
                         ItemsSource="{Binding Payments}"
                         SelectedItem="{Binding SelectedPayment, Mode=TwoWay}"
                         AutoGenerateColumns="False"
                         SelectionMode="Single"
                         IsReadOnly="True">
        <wpftoolkit:DataGrid.Columns>
            <wpftoolkit:DataGridTextColumn
                Header="{Resx ResxName=MyBooks.Properties.Strings, Key=Journal_Date_Label}"
                Binding="{Binding Date}"/>
            <wpftoolkit:DataGridTextColumn
                Header="{Resx ResxName=MyBooks.Properties.Strings, Key=Journal_CreditedParty_Label}"
                Binding="{Binding CreditedAccount.Name}"/>
            <wpftoolkit:DataGridTextColumn
                Header="{Resx ResxName=MyBooks.Properties.Strings, Key=Journal_Narration_Label}"
                Binding="{Binding Narration}"/>
        </wpftoolkit:DataGrid.Columns>
    </wpftoolkit:DataGrid> 
```

如何在此窗口中添加 accountview.xaml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:21:32.613

只需在中包含以下行`AccountListView.xaml`：

```
<uic:AccountView.xaml /> 
```

# php - 使用php从目录中读取文件然后在我的html文件中显示它们时的过程

> ID：10326143
> 
> 赞同：0
> 
> 时间：2012-04-26T01:36:15.217
> 
> 标签：php, html

我在我的网站中使用 php 文件，并在这些文件中包含我的 html 以显示我希望用户查看的任何内容。但是我遇到了一个问题。我需要从我的网站的特定文件夹中显示可用下载列表。从我的网站上传可下载的作品。从目录中读取文件有效，这是使用 php 代码完成的。现在的问题是如何在我的 html 中显示它，如何以我最喜欢的方式向我的用户显示它，例如 Dropbox 如何显示他们的文件列表类似的东西。

问题是传递在 PHP 文件中找到的那些文件并将它们传递给 html 以便能够以我想要的方式使用它们。

我希望我很清楚，以防万一，请告诉我，以便我详细说明。

谢谢。

根据要求提供一些代码，这就是我应该如何从我的网站目录中提取文件的方式......

啊这样的事情，我明白了，但这是我的问题......

我的代码看起来像这样......

```
$directory_mine;

    if ($directory_mine = opendir('/path/to/files')) {
//This is for testing.
echo "Directory: ". $directory_mine . "\n";
echo "Entries:\n";

while (false !== ($entry = readdir($directory_mine))) {

    //should be writing each file name into the html here. at least thats my thinking.

}

closedir($directory_mine);
    }
    include("overall_header.html");
    include("mobiledownloadview.html");
    include("overall_footer.html"); 
```

看到这里是问题所在，我怎样才能将我的php文件提取的数据添加到mobiledownloadview.html？？？我相信这是一种方法，但如果这很糟糕，请告诉我。有没有更好的方法来实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:53:58.163

从手册开始[`readdir`](http://php.net/manual/en/function.readdir.php)：

```
<?php

if ($handle = opendir('/path/to/files')) {
    echo "Directory handle: $handle\n";
    echo "Entries:\n";

    /* This is the correct way to loop over the directory. */
    while (false !== ($entry = readdir($handle))) {
        echo "$entry\n";
    }

    /* This is the WRONG way to loop over the directory. */
    while ($entry = readdir($handle)) {
        echo "$entry\n";
    }

    closedir($handle);
}
?> 
```

如果要对其进行样式设置，请将其包装在（未）有序列表中并为此使用 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:56:24.440

```
while ($entry = readdir($directory_mine)) !== false) {
      echo "Entry: $entry ; filetype: " . filetype($directory_mine . $entry) . "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T02:14:16.397

如果您使用的是 PHP 5.3+，那么 PHP SPL 类`FilesystemIterator`在这种情况下可能很有用，它可以轻松地遍历某个路径并将文件作为对象检索，包括元数据。

[http://www.php.net/manual/en/class.filesystemiterator.php](http://www.php.net/manual/en/class.filesystemiterator.php)

例子：

```
<?php
$it = new FilesystemIterator($directory_mine);
echo '<ul class="file_list">'
foreach ($it as $fileinfo) {
    echo  '<li>' . $fileinfo->getFilename() . '</li>' . PHP_EOL;
}
echo '</ul>' 
```

您可以将 CSS 添加到页面以设置无序列表的样式。

# iphone - 检查日期是否在日期范围之间 - 逻辑问题 - 初学者

> ID：10326148
> 
> 赞同：0
> 
> 时间：2012-04-26T01:37:13.080
> 
> 标签：iphone, objective-c

我有一个`Person`对象。这个人对象具有以下属性；

```
Name
StartDate
EndDate 
```

我将这些`Person`对象保存到一个数组中。该数组可能包含超过 100 个人员对象。以上所有属性都是字符串。

以下是该数组中人员对象的示例；

```
John, Tue Feb 22, Thr Mar 30
Jack, Wed Mar 09, Fri Apr 21
Jack, Thu Mar 19, Fri Dec 20
Jack, Tue Jan 08, Fri Apr 26 etc.. 
```

现在我需要提供一个日期，例如`Wed 29 Mar`，我需要检查它是否在 person 对象的范围`StartDate`和`EndDate`数组中。我有一个场景的伪代码。

我要检查的日期`StartDate`也是`EndDate`字符串。

伪代码：

```
if Startdate >= providedDate && EndDate <= providedDate {

// Add to an Array

else 

//Do not add to an array 
```

因为，`StartData`和`EndDate`都是`ProvidedDate`字符串，我如何检查它是否大于或小于提供的日期？

注意：我需要一种不使用的方法`NSPredicate`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:51:07.810

你在这里测试什么？将日期存储为字符串很奇怪。您是否打算解析字符串日期以便将它们与提供的日期进行比较？如果是这样，我会远离任何类型的约会课程。

如果是这样，我只需将其拆分为 3 个字符串——星期几、月份、日期。你不关心星期几。

你没有一年，所以你不能对此做任何逻辑......我想只是假设这一切都在同一年。（你可以做一些疯狂的事情，比如计算“最近哪一年的这一天是一周中的这一天”，但是来吧......）

将每个月与一个整数相关联。比方说，使用哈希映射。如 Months.put('January',1) 等。

从每个日期中获取数字——只需将字符串转换为整数即可。

那么某件事是在日期之前还是之后的逻辑是（如果 -1 是 myMonth 在之前，0 是它们相同，1 是 myMonth 在之后）

```
if (Months.get(myMonth) < Months.get(providedMonth)) return -1
else if (Months.get(myMonth) > Months.get(providedMonth)) return 1
else
  if (myDate < providedDate) return -1;
  else if (myDate > providedDate) return 1;
  else return 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T03:57:14.463

为了比较值，您需要具有可比性的值。您可以使用 NSDate 对象，可以将日期转换为可排序的字符/数字形式（例如 20120425），或者您可以使用实现自己的`compare:options:`方法的自定义对象。

或者您可以编写一个单独的`compareString:string1 toString:string2`方法并使用您拥有的字符串。

你只需要下定决心要做什么。

# sql - Oracle SQL -- 从多行中获取值

> ID：10326150
> 
> 赞同：1
> 
> 时间：2012-04-26T01:37:34.413
> 
> 标签：sql, oracle, pivot, dynamic-sql

我有一张这样的桌子：

```
TABLE: FACTS
ID       KEY         VALUE
1        name        Jeremy
1        height      5'11
1        awesomeness 10
2        name        Mark
2        awesomeness 4
3        height      4'6 
```

因此，（ID，KEY）元组可以被视为主键。

我试图返回这样的行：

```
ID     NAME     HEIGHT    AWESOMENESS
1      Jeremy   5'11      10
2      Mark     (null)    4
3      (null)   4'6       (null) 
```

因此，除了对每一列进行子选择之外，如何获取键值（如果它们存在）并将它们收集到我的单行中？到目前为止我尝试的是：

```
SELECT 
  id,
  CASE WHEN facts.key = 'name' THEN value END name,
  CASE WHEN facts.key = 'height' THEN value END height,
  CASE when facts.key = 'awesomeness' THEN value END awesomeness
FROM
  facts
WHERE
  facts.id in (1,2,3) 
```

但是由于显而易见的原因，这会为每个匹配的键返回一行，而不是每个 id 一行。

我怎样才能以我想要的方式得到这个？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T01:44:51.790

您可以在任何版本的 Oracle 中像这样对数据进行透视。

```
SELECT id,
       MAX( CASE WHEN key = 'name' THEN value ELSE null END ) name,
       MAX( CASE WHEN key = 'height' THEN value ELSE null END ) height,
       MAX( CASE WHEN key = 'awesomeness' THEN value ELSE null END ) awesomeness
  FROM facts
 WHERE id IN (1,2,3)
 GROUP BY id 
```

如果你使用的是 11g，你也可以使用`PVOT`操作符。

但是，如果这是您的数据模型的代表，那么这种实体属性数据模型通常会相当低效。`name`通常，使用包含、`height`、`awesomeness`等列的表格会更好。

# c# - WP7在页面之间传递多条数据

> ID：10326156
> 
> 赞同：1
> 
> 时间：2012-04-26T01:38:32.200
> 
> 标签：c#, windows-phone-7

在我的应用程序中，我正在构建自己的媒体播放器。当用户选择要播放的歌曲时，希望能够将链接传递给示例媒体以及与之关联的元数据（艺术家、曲目、专辑封面等）。我坚持的部分是如何将所有数据并将其传递给媒体播放器页面。这是我到目前为止所拥有的。

确定选择了什么项目并将数据添加到查询字符串。

**更新**

```
 public void musicSampleSelectedHandler(object sender, RoutedEventArgs e)
    {
        Track selected = (sender as Image).DataContext as Track;
        ListBoxItem pressedItem = this.listReleaseMain.ItemContainerGenerator.ContainerFromItem(selected) as ListBoxItem;
        if (pressedItem != null)
        {
            string _rT = selected.title;
            string _rN = selected.release.name;
            //string _rA = selected.artists; ????
            string _rI = selected.images.large.url;
            string _rS = selected.sampleUrl;

            this.NavigationService.Navigate(new Uri("/Pages/MediaPage.xaml?releaseName=" + _rN + "&releaseTrack=" + _rT + "&releaseImage=" + _rI
                + "&releaseSample=" + _rS, UriKind.Relative));
        }
    } 
```

OnNavigatedTo 方法从查询字符串中提取数据

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);

        string releaseName = String.Empty;
        string releaseImg = String.Empty;
        string releaseUrl = String.Empty;

        if (NavigationContext.QueryString.TryGetValue("releaseUrl", out releaseUrl))
        {
            sampleMedia.Source = new Uri(releaseUrl, UriKind.Absolute);
        }
    } 
```

我不确定我是否可以使用查询字符串将多个片段传递给媒体播放器，或者我是否可以做一些不同的事情来将数据传递给另一个页面。我所有的数据都来自使用网络客户端的网络。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T03:03:34.380

`QueryString`只是通过 Uri 传入的参数的字典。Uri 使用标准语法传入由 . 分隔的参数`&`。所以在你的例子中，如果你有类似的东西：

```
this.NavigationService.Navigate(new Uri("/Pages/MediaPage.xaml?releaseUrl=" + releaseUrl + "&releaseImg=" + releaseImg , UriKind.Relative)); 
```

然后你可以使用类似的东西来解析它：

```
if (NavigationContext.QueryString.TryGetValue("releaseUrl", out releaseUrl))   
{   
    sampleMedia.Source = new Uri(releaseUrl, UriKind.Absolute);   
} 

if (NavigationContext.QueryString.TryGetValue("releaseImg", out releaseImg))   
{   
    // do something with releaseImg
} 
```

# django - .html 模板页面中的 django for 循环（新手）

> ID：10326159
> 
> 赞同：7
> 
> 时间：2012-04-26T01:38:56.747
> 
> 标签：django, for-loop

当我学习一门新的语言/框架时，我真正讨厌的事情是当我陷入一个看似容易解决的问题时，我是多么的无知。

我在 html 页面中有一个 django for 循环，但由于某种原因它不起作用。我错过了一些东西，无法自己解决问题，所以我求助于 StackOverflow 来帮助我。

这是我在**models.py**上运行查询的模型：

```
class RIAchievement(models.Model):
  riAchievementID = models.AutoField(primary_key=True, db_column="RIAchievementID")
  userLanguageVersionID = models.ForeignKey(UserLanguageVersion, db_column="UserLanguageVersionID")
  typeAchievementID = models.ForeignKey(TypeAchievement, db_column="TypeAchievementID")
  riAchievementTypeUserDescription = models.CharField(max_length=255, blank=True, null=True, db_column="RIAchievementTypeUserDescription")
  riAchievementDescription = models.TextField(max_length=2000, db_column="RIAchievementDescription")
  auth_user_id = models.ForeignKey(auth_user, db_column="auth_user_id")
  class Meta:
    db_table="RIAchievement" 
```

这是我的**models.py**文件在我的项目中的位置： GlobalXpy\app_data\models.py

这是我的**views.py**文件中的代码：

```
from django.shortcuts import render_to_response
from GlobalXpy.app_data.models import RIAchievement

def index(request):
  ri_achievement = RIAchievement.objects.all()
  get_template = loader.get_template('ri_achievement.html')
  return render_to_response(get_template) 
```

这是我的模板文件 ( **ri_achievement.html** ) 中的 for 循环：

```
{% for e in ri_achievement %}
  <td> Preview  Edit  Duplicate  Delete </td>
  <td> FlagPath </td>
  <td> AchievementType / RIAchievementTypeUserDescription </td>
  <td> {{ e.riAchievementDescription }} </td>
{% endfor %} 
```

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T08:14:49.197

```
from django.shortcuts import render
from GlobalXpy.app_data.models import RIAchievement

def index(request):
  ri_achievement = RIAchievement.objects.all()
  return render(request, 'ri_achievement.html',{'ri_achievement': ri_achievement}) 
```

在您的模板中：

```
{% if ri_achievement %}
   There are {{ ri_achievement|length }} records:
   {% for e in ri_achievement %}
      <td> Preview  Edit  Duplicate  Delete </td>
      <td> FlagPath </td>
      <td> AchievementType / RIAchievementTypeUserDescription </td>
      <td> {{ e.riAchievementDescription }} </td>
   {% endfor %}
{% else %}
   There are no records in the system
{% endif %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T01:47:13.550

您忘记传递变量。

```
return render_to_response(get_template, {'ri_achievement': ri_achievement}) 
```

# ldap - SaaS LDAP/目录服务？

> ID：10326166
> 
> 赞同：5
> 
> 时间：2012-04-26T01:40:05.433
> 
> 标签：ldap, saas

我知道我的谷歌搜索技能让我失望了，因为**肯定**有这样的东西：一个简单、易于使用的远程托管目录服务（更好的是，通过几个不同的界面和 SSO 公开用户目录）。

你知道一个和/或有一个推荐吗？

我正在查看 Atlassian Crowd - [http://www.atlassian.com/software/crowd/overview](http://www.atlassian.com/software/crowd/overview) - 它与可插入接口很接近，但它没有实现 LDAP。它只能连接到现有的 LDAP 服务器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T09:06:49.757

这已经在 ServerFault 上讨论过了，我认为[这里给出的答案](https://serverfault.com/a/187180/67343)可能是您搜索的一个很好的起点。它列出了 [Sympliified](http://www.symplified.com/main/what-we-do-for-you/products/provisioning/)、[Entic.net](http://entic.net/)和[eApps](http://www.eapps.com/applications/openldap-hosting.php)。

# android - Android，如何使用动画来显示闪烁？

> ID：10326170
> 
> 赞同：2
> 
> 时间：2012-04-26T01:41:09.847
> 
> 标签：android, image, background, handler

在我的应用程序中，我有录制按钮。我希望当用户每秒钟单击一次时，我会更改背景以模拟闪烁。我创建了一个处理程序并将其设置为 1 秒，因此该处理程序每​​运行一秒。在这里我改变了背景。这是我的代码：

```
mUpdateUITimerTask = new Runnable() {
            public void run() {

                // Simulating blinking for capture button
                if(bolToggle) {
                    bolToggle = false;
                    captureButton.setBackgroundDrawable(getResources().getDrawable(R.drawable.btn_record_blink));
                } else {
                    bolToggle = true;
                    captureButton.setBackgroundDrawable(getResources().getDrawable(R.drawable.btn_record));
                }

                mHandler.postDelayed(mUpdateUITimerTask, 1000);
            }
        }; 
```

当我运行该应用程序时，我看到了更改，但不清楚。按钮是这样的： ![在此处输入图像描述](../Images/48db3ac54491099378ce0af9d8cb8d20.png)

当我运行应用程序时，红色图像显示正常，但对于白色图像，它显示红色图像，周围有一点白色光晕。我试着`captureButton.setBackgroundColor(Color.TRANSPARENT);`在设置背景之前放，但结果是一样的。

任何建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T01:52:25.683

找到您需要的答案：[https ://stackoverflow.com/a/4852468/1352556](https://stackoverflow.com/a/4852468/1352556)

基本上你想要一个[alpha 动画](http://developer.android.com/reference/android/view/animation/AlphaAnimation.html)。我相信这会使整个按钮闪烁但是，您只希望红点闪烁吗？

# c++ - 交换两个数组而不完全分配第三个（C++）

> ID：10326171
> 
> 赞同：1
> 
> 时间：2012-04-26T01:41:10.440
> 
> 标签：c++, c

我有两个类型的数组，`Region`大小均为 1000，并且在循环的每次迭代中，我都想交换它们中的两个（通过交换它们的内存地址）。我希望这会奏效：

```
 Region *swap = (Region*)myRegions;
        myRegionsLast = myRegions;
        myRegions = (Region[1000])swap; 
```

第一行看起来不错。第二行和第三行是无效分配，因为您显然无法重新分配该类型。第三行也是无效的，因为您不能强制转换为 type `(Region [1000])`。显然，如果我能提供帮助，我不想分配全新的 Region[1000]。有人可以帮我完成我想要的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T01:49:44.877

发生这种情况是因为您不能一次分配整个数组。但是，您可以分配一个指针：

```
Region reg1[1000], reg2[1000];
Region *myRegionsLast = reg1;
Region *myRegions = reg2; 
```

现在您的交换程序无需进一步修改即可工作。

您也可以一次交换一个元素的数组，但这将涉及更多的数据复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:50:12.633

如何仅创建 Region 类型内容的变量并遍历它...

```
for(int i=0; i<1000; i++)
{
    tempRegionTypeVariable = myRegionsLast[i];
    myRegionsLast[i] = myRegions[i];
    myRegions[i] = tempRegionTypeVariable;
} 
```

希望这会有所帮助。这里的“tempRegionTypeVariable”只是一个临时变量或一个对象。不是数组..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T01:52:30.077

评论中还发布了其他几个有效的答案：

1.  使用 std::swap() / std::array::swap
2.  使它们动态分配数组而不是静态

# java - 删除 Java 中文件的第一行，无论换行类型如何，无需调用 exec 或逐行迭代它

> ID：10326176
> 
> 赞同：2
> 
> 时间：2012-04-26T01:42:28.437
> 
> 标签：java, io, newline

我正在尝试用 Java 编写一个删除文件第一行的方法。

第一个想法（被拒绝，因为调用 .exec 不是一个好习惯）

```
public void removeHeader(String fileName) throws IOException, InterruptedException {
    if (StringUtils.isBlank(fileName)) {
        throw new IllegalArgumentException("fileName was empty");
    }

    Process p = Runtime.getRuntime().exec("sed -i 1d " + fileName);

    if (p.waitFor() != 0) {
        throw new IOException("Failed to remove the header from " + fileName);
    }
} 
```

第二个想法（在 CR 中被拒绝，因为遍历每一行并将其写入新文件很慢且不时尚）。

```
public void removeHeader(String fileName) throws IOException, InterruptedException {
    if (StringUtils.isBlank(fileName)) {
        throw new IllegalArgumentException("fileName was empty");
    }

    File inFile = new File(fileName);
    File tempFile = new File(inFile.getAbsolutePath() + ".tmp");

    BufferedReader br = null;
    PrintWriter pw = null;

    try {
        br = new BufferedReader(new FileReader(fileName));
        pw = new PrintWriter(new FileWriter(tempFile));

        String line = null;
        boolean first = true;
        while ((line = br.readLine()) != null) {
            if (!first) {
                pw.println(line);
                pw.flush();
            }

            first = false;
        } 
    }
    finally {
        pw.close();
        br.close();
    }

    if (inFile.exists() && tempFile.exists()) {
        inFile.delete();
        tempFile.renameTo(inFile);
    }
} 
```

无论换行格式如何，我都希望我的解决方案能够正常工作并且易于阅读。是否有满足所有这些需求的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T02:05:22.610

我不是 Java 人，但没有办法（Java 或其他方式）在不重写剩余内容的情况下从文件开头删除内容（除非您可以访问底层文件系统来移动文件的起始块，即会破坏您的“易于阅读”的要求）。

我在这里感觉到过早的优化，除非文件真的很大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T02:14:56.893

你必须阅读和复制任何你想保留的东西（甚至`sed`正在这样做）。

第二个版本可以通过简单地在循环之前通过单独读取跳过第一行来稍微改进，然后您不必在每次循环时检查您是否在第一行。

第二个也可以通过编写一个跳过第一行的[FilterReader来获得一些优雅。](http://docs.oracle.com/javase/6/docs/api/java/io/FilterReader.html)为此目的可能不值得麻烦，但学习实现这样的过滤器是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T04:56:06.750

您的代码可以像这样缩短（需要 Java7）：

*   打开一个`FileInputStream`
*   读到第一个换行符
*   [使用Files.copy](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#copy%28java.io.InputStream,%20java.nio.file.Path,%20java.nio.file.CopyOption...%29)复制其余部分

但除此之外，正如其他人所说，没有简单的方法可以删除文件的第一部分。

# php - Drupal 7：网络表单中的节点字段

> ID：10326179
> 
> 赞同：3
> 
> 时间：2012-04-26T01:43:29.223
> 
> 标签：php, drupal, drupal-7, drupal-modules, drupal-webform

我有一个出现在内容类型“工作”块中的网络表单。我正在尝试从节点获取两个字段到 webform 提交中。我有这个自定义模块：

```
function webform_nodevalues_form_alter(&$form, $form_state, $form_id) {  
  // 1\. Webform ID  
  if ($form_id == 'webform_client_form_237') {  
    if ($node = menu_get_object()) {  
      // 2\. Webform field for the node title  
      $form['submitted']['title']['#value'] = $node->title;  
      // 3\. Webform field for a CCK field  
      $form['submitted']['email']['#value'] = $node->field_email[0]['value'];  
    }  }
} 
```

但是，我收到此错误：

注意：未定义的偏移量：webform_nodevalues_form_alter() 中的 0（/drup/sites/all/modules/webform_nodevalues/webform_nodevalues.module 的第 35 行）。

关于如何在网络表单提交中获取电子邮件字段的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:14:38.250

稍微修修补补一下，我就明白了（感谢 Muhammad Reda 为我指明了正确的方向）。

```
$form['submitted']['email']['#value'] = $node->field_email['und'][0]['email']; 
```

我是 Devel 的新手，但是看着负载，然后将每个级别放在括号中似乎是可行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T09:41:20.720

我认为这个错误是因为以下行：

```
// ERROR HERE...
$form['submitted']['email']['#value'] = $node->field_email[0]['value']; 
```

这应该是这样的：

```
$form['submitted']['email']['#value'] = $node->field_email['und'][0]['value']; 
```

或者：

```
$form['submitted']['email']['#value'] = $node->field_email[LANGUAGE_NONE][0]['value']; 
```

希望这会有所帮助……穆罕默德。

# ruby - 如何在 JRuby 中进行语法高亮显示？

> ID：10326184
> 
> 赞同：1
> 
> 时间：2012-04-26T01:45:28.017
> 
> 标签：ruby, jruby, syntax-highlighting

我想在 JRuby中使用类似[紫外线的东西。](http://ultraviolet.rubyforge.org/)但是，它（显然）无法编译：

```
$ gem install ultraviolet
Fetching: oniguruma-1.1.0.gem (100%)
Building native extensions.  This could take a while...
ERROR:  Error installing ultraviolet:
  ERROR: Failed to build gem native extension.

        ~/.rvm/rubies/jruby-1.6.7/bin/jruby extconf.rb
WARNING: JRuby does not support native extensions or the `mkmf' library very well.
Check http://kenai.com/projects/jruby/pages/Home for alternatives.
checking for main() in -lonig... yes
creating Makefile

make
cc -I. -I. -I~/.rvm/rubies/jruby-1.6.7/lib/native/include/ruby -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE        -Wall  -arch x86_64 -c oregexp.c 
```

有没有类似的图书馆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:59:01.263

我真的很喜欢[pygments.rb](http://rubydoc.info/gems/pygments.rb/0.2.12/frames)。Pygments 本身是用 Python 编写的，但集成对我来说效果很好。它真的很快，最重要的是它支持大量的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:53:39.323

也许[Coderay](http://coderay.rubychan.de/)？它是纯 Ruby，所以没有原生扩展大惊小怪。它列出了对 JRuby 1.5.2+ 的支持。

# codeigniter - Amazon SQS 队列和 CodeIgniter

> ID：10326189
> 
> 赞同：1
> 
> 时间：2012-04-26T01:46:31.180
> 
> 标签：codeigniter, amazon-sqs

我想让我的 CI 服务器使用 SQS 队列发送电子邮件。在适当的时候，我的服务器会在这个队列上放一条消息，其中包含要发送的电子邮件的所有详细信息。然后，监听这个队列的守护进程会注意到有一条新消息，将它出列并做正确的事情并实际发送电子邮件。

我的问题 - 我希望我的服务器只有 1 个“send_email”队列实例并始终使用它。那么，我会在主控制器的 _construct() 中创建队列吗？这样，它只会被创建一次吗？我是否以正确的方式思考这个问题？

谢谢！

米兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:44:01.990

是的，这很好用。如果您尝试创建具有与另一个队列完全相同的属性名称和值的 SQS 队列，则 CreateQueue 只会返回成功。这使您可以在每次服务器启动时继续创建队列，而不会出现问题。

# php - 如何使 PHP 代码检查标题是否包含某个单词？（WordPress 商店）

> ID：10326197
> 
> 赞同：0
> 
> 时间：2012-04-26T01:47:39.777
> 
> 标签：php, wordpress, preg-match, shopp, stripos

我正在使用 WordPress Shopp 插件在我的 WordPress 网站上销售产品。到目前为止，我喜欢这个插件，但我正在尝试做一些自定义的事情，不幸的是我对 PHP 不够好，无法自己解决这个问题（我也做过大量的研究！）。

这是我想要完成的...

要显示每个单独产品的产品标题，Shopp 使用以下代码来引用产品标题...

```
<?php shopp('product','name'); ?> 
```

我要做的是引用产品名称，例如，如果产品名称显示类似“FLIR H 系列热成像相机”之类的内容，我希望我的代码检测产品名称中是否包含“FLIR”一词如果它确实包含“FLIR”一词，我希望它回显 FLIR 徽标图像（假设图像的 URL 是[http://example.com/images/flir.jpg](http://example.com/images/flir.jpg)）。或者，我希望它在产品标题等中找到“Thermal-Eye”一词时回显 Thermal-Eye 徽标图像。我该如何修改代码来做到这一点？

希望这是有道理的，感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:18:15.840

```
<?php
$keywords = array('FLIR', 'Thermal-Eye');
foreach($keywords as $word)
{
    if(preg_match('/'.$word.'/i', shopp('product','name', 'return=true')))
        echo $word;
}
?> 
```

**更新：**如果您想根据单词而不是单词本身来回显一个独特的图像，您可以执行以下操作：

```
if(preg_match('/'.$word.'/i', shopp('product','name', 'return=true')))
        echo '<img src="'.get_bloginfo('stylesheet_directory').'/images/'.$word.'.jpg" />'; 
```

因此，对于 FLIR，您只需确保 FLIR.jpg 存在于主题目录的 images 文件夹中。

最好的办法是玩弄它，看看什么对你有用。

# java - 将 SQLite 数据库从版本 0 升级到 1 时出错

> ID：10326200
> 
> 赞同：0
> 
> 时间：2012-04-26T01:48:45.820
> 
> 标签：java, android, sqlite

我正在尝试在我的 Android 应用程序中访问我的嵌入式 SQLite 数据库，但我无法访问它。当我在运行模拟器时进入文件资源管理器时，我看到了数据库。

```
private boolean checkDataBase() {
    SQLiteDatabase checkDB = null;
    boolean exist = false;
    try {
        String dbPath = DATABASE_PATH + DATABASE_NAME;
        checkDB = SQLiteDatabase.openDatabase(dbPath, null,
                SQLiteDatabase.OPEN_READONLY);
    } catch (SQLiteException e) {
        Log.v("db log", "database does't exist");
    }

    if (checkDB != null) {
        exist = true;
        checkDB.close();
    }
    return exist;
} 
```

# c# - .net 锁定 - 两个问题

> ID：10326202
> 
> 赞同：3
> 
> 时间：2012-04-26T01:49:08.450
> 
> 标签：c#, .net, multithreading

关于 .net 中 Lock() 构造的两个问题

首先，我知道如果一个对象被锁定在一个类中，而另一个类试图锁定同一个对象，则会产生死锁。但为什么？我在 MSDN 上读过它，但 MSDN 很少那么清楚。

----编辑问题一---- 仍然很困惑。我有一个产生许多 Threadpool 线程的主线程（UI 线程）。每个子线程在使用数据之前都会锁定数据。这每次都很好。

如果我然后尝试从 UI 线程锁定相同的数据以检查我是否应该为边缘情况创建一个新线程，我几乎每次都会创建死锁。

----编辑问题二---- 其次，如果我有一个我锁定的复合对象，那么其中的所有子对象是否也被锁定？短代码演示：

```
internal sealed class Update
{
    //Three objects instantiated via other external assemblies
    public DataObject One { get; set; }
    public DataObject Two { get; set; }
    public ReplayStatus Status { get; set; }
} 
```

如果我调用 lock(UpdateObject) 三个内部对象中的每一个以及所有子对象都被锁定了吗？

所以我应该做这样的事情来防止线程玩我的数据对象：

```
Lock(UpdateObject.One)
{
    Lock(UpdateObject.Two)
    {
        Lock(UpdateObject.Status)
        {
            //Do Stuff
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T01:56:18.680

> 首先，我知道如果一个对象被锁定在一个类中，而另一个类试图锁定同一个对象，则会产生死锁。

不可以。如果一个线程锁定了一个对象，而另一个线程尝试锁定该对象，则第二个线程必须等待第一个线程退出锁定。

死锁是另外一回事：

```
1\. thread1 locks instanceA
2\. thread2 locks instanceB
3\. thread1 attempts to lock instanceB and now must wait on thread2
4\. thread2 attempts to lock instanceA and now must wait on thread1 
```

这两个线程不能再执行，因此永远不会释放它们的锁。真是一团糟。

> 如果我调用 lock(UpdateObject) 三个内部对象中的每一个以及所有子对象都被锁定了吗？

不，“锁定”仅在锁定的实例上。注意：锁不会阻止除第二个线程之外的任何东西同时获取该实例上的锁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T01:56:47.993

首先，锁的全部意义在于两段代码不能同时获得同一个锁。这是为了协调多个线程使用相同的东西而不相互干扰。如果您在一个对象上有一个锁，那么任何其他试图获得锁的人都会阻塞（等待）直到原始锁被释放（在任何给定时间只有一个线程可以拥有锁）。如果第一个线程从不放弃锁，或者如果两个线程都在等待对方的某些东西并且在每个线程都得到它正在等待的东西之前都无法继续，那么你只会遇到死锁。

其次，如果您`lock`是 C# 中的一个对象，那么您实际上并没有在任何语义上“锁定”该对象。您正在*获取*对象上的“锁定”（稍后您*将 release*或*relenquish*）。该对象纯粹是一个方便的令牌，用于唯一标识您希望获得的锁。所以不，对象上的锁不会在该对象的任何子部分上创建锁。

# vb.net - VB将击键发送到最小化的窗口/应用程序

> ID：10326204
> 
> 赞同：2
> 
> 时间：2012-04-26T01:49:19.833
> 
> 标签：vb.net

我是 vb 中的一个完整的菜鸟。我一直在试图弄清楚如何将击键发送回我自己的应用程序，同时最小化/或专注于另一个窗口。我想我需要使用 PostMessageA 。我在论坛上读到过。但它对我来说就像中文。我的目标是在 1 台电脑上运行 100 个这些小程序。他们只是一遍又一遍地在自己的应用程序中按下一个键。有人可以帮帮我吗？谢谢

我在想这样的事情

```
Private Declare Function PostMessage Lib "user32.dll" Alias "PostMessageA" (ByVal hwnd As Long,  ByVal wMsg As Long, ByVal wParam As Long, ByVal lParam As Long) As Long
Private Const WM_CHAR As Long = &H102 
```

* * *

```
PostMessage("notepad", WM_CHAR, "T", 1) 
```

作为测试。我究竟做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:23:27.550

有几件事，其中之一是您在 VB6 论坛中找到了您的代码。从那时起，整数的大小发生了变化。`Long`VB6 中的A等同`Integer`于 VB.Net 中的 a（[请参阅此 Msdn 链接](http://msdn.microsoft.com/en-us/library/7f5ztkz3.aspx)）。第二个问题是您正在向`String`期望`PostMessage`窗口句柄的位置提供一个。我建议您查看这篇关于如何[使用 Windows 消息将字符串发送到另一个应用程序的CodeProject 文章](http://www.codeproject.com/Articles/19740/Send-strings-to-another-application-by-using-Windo)

您的`PostMessage`声明应如下所示。

```
Private Declare Function PostMessage Lib "user32.dll" Alias "PostMessageA" (ByVal hwnd As Integer, ByVal wMsg As Integer, ByVal wParam As Integer, ByVal lParam As Integer) As Integer 
```

# javascript - 有没有办法可以使用 JavaScript 或 XHTML 禁用 ActiveX 控件的信息栏？

> ID：10326208
> 
> 赞同：1
> 
> 时间：2012-04-26T01:50:13.853
> 
> 标签：javascript, jquery

我将这个文件保存为 test.html，当我在 IE 中打开这个文件时，我得到了 ActiveX 控件的信息栏，有什么方法可以使用 javascript 代码或 jQuery 代码禁用这个东西？

```
<html>
<body>
<h1>My First Web Page</h1>
<script type="text/javascript">
if(navigator.appName == "Microsoft Internet Explorer")
{
window.location = "http://www.google.com/"
}
else
        {
window.location = "http://www.yahoo.com/"
}
</script>
</body>
</html> 
```

而且我只是想确保，因为我在我的盒子上本地运行，所以这就是它显示 ActiveX 控件信息栏的原因？一旦我将此文件上传到远程服务器并从那里访问它，那么这个活动的 x 栏将不会出现？但是有什么方法可以以编程方式禁用此信息栏吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:56:17.747

使用网络标记 (MOTW)。我们可以通过在打开的 html 标记之前添加以下代码来禁用 ActiveX 控件警告：

```
<!-- saved from url=(0014)about:internet --> 
<html>
<body>
......
</body>
</html> 
```

上述代码称为“Web 标记 (MOTW)”，这是 Windows Internet Explorer 的一项功能，它通过使 Internet Explorer 强制网页在保存页面的位置的安全区域中运行来增强安全性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:58:38.523

您看到的信息栏与 ActiveX 无关（即使它可能显示“ActiveX”）。它只是告诉您 IE 没有在本地文件上运行脚本，这是一种安全预防措施。

*   是的，通过 HTTP 访问时，不会出现警告。
*   ~~没有办法以编程方式禁用它，因为（1）您的代码一开始就没有运行；(2) 这样做会规避本应存在的安全限制。~~使用[MOTW](https://stackoverflow.com/a/10326603/201952)。

如果您只想让页面在您的计算机上运行，​​请转到工具、Internet 选项、高级，然后选中允许活动内容在我的电脑上的文件中运行。但是，我只会在开发时启用此选项。

# objective-c - Core Data 是否对字符串的长度施加了限制？

> ID：10326210
> 
> 赞同：13
> 
> 时间：2012-04-26T01:50:19.860
> 
> 标签：objective-c, ios, core-data, nsstring

我想知道在 iOS 中使用 Core Data 存储的字符串长度是否有任何限制。（设备上的可用 RAM 或磁盘空间除外）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T04:04:21.490

我认为在达到 Core Data 的任何存储限制之前，您更有可能达到 iOS 设备的性能限制。拉入大量数据也会对性能造成影响。

在性能和可管理性方面，你最好将大块文本分解成更小的块。

无论如何，据我记得马库斯·扎拉告诉我的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-02T14:13:21.603

只是为了确认一下，CoreData 没有特定的限制（不包括内存/磁盘空间限制）。在 iOS 上使用 CoreData 时，您几乎在所有情况下都使用 sqlite 作为持久存储。CoreData 将 String 存储为 Varchar 并且从 sqlite 的角度来看：

*SQLite 不强制 VARCHAR 的长度。您可以声明一个 VARCHAR(10)，SQLite 很乐意在其中存储 5 亿个字符串。它将保持所有 5 亿个字符完好无损。您的内容永远不会被截断。SQLite 将“VARCHAR(N)”的列类型理解为与“TEXT”相同，无论 N 的值如何。*

...取自[sqlite 的常见问题解答](https://www.sqlite.org/faq.html#q9)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T02:36:52.687

据我所知，它没有限制，除非您在模型文件中指定一个（有一个最小长度和最大长度部分）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T03:39:47.083

我不记得阅读过 Core Data 文档中的任何限制，但请记住 Core Data 只是一个真实数据库之上的框架，通常是 sqlite。我认为可以安全地假设限制是由底层数据库决定的。

# c++ - 为什么`this`等于0x0，导致我的程序崩溃？

> ID：10326214
> 
> 赞同：4
> 
> 时间：2012-04-26T01:51:08.400
> 
> 标签：c++, segmentation-fault, this, smart-pointers

我正在设计一个简单的 Connect 4 游戏。到目前为止，我有 4 个基础类：

`Colour`- 负责表示颜色（RGBA）。包括转换运算符。

`Player`- 代表游戏的玩家。每个`Player`都有一个`Colour`和一个名字。

`Board`- 代表棋盘。它包含维度，以及`Tile`具有这些维度的 s 的二维向量。

`Tile`- 内的嵌套类`Board`。代表板上的一个空间。每个瓷砖的所有者`Tile`都有一个`Colour`和一个。`std::unique_ptr`所有者以 开头，`nullptr`并且可以更改**一次**为`Player`。颜色以透明黑色开始。

* * *

我已经测试了我的`Colour`课程，它似乎工作正常。我的`Player`班级也处于最佳状态。但是，我在`Board/Tile`上课时遇到了一些问题。

我的测试包括创建两个玩家和一个棋盘。这些正常执行。接下来，我遍历电路板的尺寸，每个瓷砖一次。然后我打电话

```
board.tile (j, i).claimBy (p2); 
```

循环遍历带有 的行和带有的`i`列`j`，这是您期望的打印方式。

`tile (j, i)`检索我正在使用的图块。它按预期工作。

* * *

**导致崩溃的事件链：**

`claimBy (p2)`设置牌被玩家 2 认领。它的实现如下：

```
bool Board::Tile::claimBy (const Player &owner)
{
    if (!_owner)
    {
        *_owner = owner;
        _colour = owner.colour();
        return true;
    }

    return false;
} 
```

`_owner`是我的`std::unique_ptr<Player>`。它首先检查之前是否设置了图块的所有者（即 is not `nullptr`）。如果不是，它将`Player`内部设置为传入的那个。然后它更新瓦片的颜色并返回`true`。如果该图块先前已被认领，则返回`false`。

在调试器之后，崩溃发生在`*_owner = owner;`. 介入将我带到行`struct Player`（我的`Player`类声明），我认为它是隐式复制构造函数（请记住该类只有 a`Colour _colour`和 a `std::string _name`）。

再次介入会导致我`Colour::operator=`（这对于调用复制构造函数是有意义的）。这是定义：

```
Colour &Colour::operator= (const Colour &rhs)
{
    if (*this != rhs)
    {
        _red = rhs.red();
        _green = rhs.green();
        _blue = rhs.blue();
        _alpha = rhs.alpha();
    }

    return *this;
} 
```

路径变为`*this != rhs`。这只是对 的反向调用`operator==`，即：

```
return red() == rhs.red()
    && green() == rhs.green()
    && blue() == rhs.blue()
    && alpha() == rhs.alpha(); 
```

`red() == rhs.red()`这里的第一个比较`red()`是 just `return _red;`。这是程序崩溃的地方。调试器声明`this`( `this->_red`) 为 0x0。

我不知道为什么会这样。我最好的猜测是我错误地使用了智能指针。我以前从未真正使用过它，但它应该与普通指针非常相似，而且我认为`release`如果指针是`nullptr`.

`this`0x0的原因可能是什么？

**编辑：**
我确定一切都已初始化，正如我在每个构造函数中所做的那样，在成员初始化程序（例如`Board::Tile::Tile() : _colour (Colours::NONE), _owner (nullptr){}`）中，其中 NONE 是透明的黑色。

我也不太精通调试器，因为在打印调试值时我并没有太多使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T01:59:52.017

线

```
*_owner = owner; 
```

意思是“制作对象的副本`owner`，并将其存储在`_owner`指向的位置”。问题是`_owner`它还没有指向任何东西。它仍然是空的。

如果您真的想在玩家控制的每个图块中制作对象的*副本*，`Player`您需要这样做

```
_owner.reset(new Player(owner)); 
```

但是复制`Player`对象是一件奇怪的事情。考虑`shared_ptr`改用——你可以同时拥有`owner`和`_owner`be `shared_ptr`s，并以通常的方式将一个分配给另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T02:12:06.600

你从一个默认的初始化开始`std::unique_ptr<Player>`。也就是说，相当于一个带有一些清理语义的NULL指针。然后您尝试在语句中取消引用它，`*_owner=owner;`以便您可以分配给它。

因此该语句`*_owner=owner;`基本上等同于`((Player*)NULL)->operator=(owner);`调用隐式赋值运算符。这样做的第一件事就相当于`((Player*)NULL)->_colour=owner._colour;` Finding`this==NULL`在这里并不奇怪；确实，这是意料之中的。

修复取决于您实际想要发生的事情。是否应该给每个`Board::Tile`人一个全新的副本`owner`？然后你想改为说`_owner.reset(new Player(owner))`. 您是否只想让每个图块都包含对现有玩家的引用？你能保证 Player 对象的`owner`寿命会比 Board::Tile 对象长吗？然后你想要一个原始指针：（在 Board::Tile 的声明中）`Player const *_owner;`（在实现中）`_owner=&owner;`。

# css - 如何在日间单元格中绘制可变背景？

> ID：10326220
> 
> 赞同：0
> 
> 时间：2012-04-26T01:51:45.363
> 
> 标签：css, fullcalendar

我正在寻找一种方法（缺少背景图像）将日历日背景设置为几个彩色带。例如，17 号可能需要上半部分为浅蓝色，下半部分为浅黄色。或者一天的背景可能被分成 3 或 4 个水平带，每一天都不同。使用 CSS 有什么想法吗？

如果不是，在javascript中设置特定日期背景图像的属性方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:20:13.357

我不会用 javascript 做任何事情。您可以简单地编辑“今天”单元格的 CSS。

```
.fc-state-highlight {
    background: #ffc;
} 
```

这将解决它。另外，我也会考虑使用 CSS 渐变。 [http://gradients.glrzad.com/](http://gradients.glrzad.com/)

如果您想更改 javascript，因为 FullCalendar 使用 jQuery。您可以编写一个函数来与日期交互并使其随机化。我不太确定我现在是否能想到它。理想情况下，让它每天增加一堂课。

```
$('.fc-state-highlight').css({"background":"GRADIENT"}); 
```

不过，就目前而言。我建议使用[http://arshaw.com/fullcalendar/docs/display/上的功能](http://arshaw.com/fullcalendar/docs/display/)

# c# - 填充时在 ComboBox 上自动设置 SelectedIndex

> ID：10326225
> 
> 赞同：0
> 
> 时间：2012-04-26T01:52:13.030
> 
> 标签：c#, winforms, .net-4.0, combobox

通过执行 Items.Add() 或 Items.AddRange() 调用，如果将 SelectedIndex 设置为 -1，是否可以自动将其设置为 0？

我的第一个猜测是创建一个新事件来监听 Items 属性的变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:37:26.087

如果您不愿意在`SelectedIndex = 0`之后设置`Add`（我个人认为这并不太乏味......但对于每个人来说都是他们自己的），那么您可以尝试创建一个自定义控件来为您执行此操作。但是，添加项目时没有事件，因此您必须创建一个新方法。

```
public class MyComboBox: ComboBox
{
    public void AddItem(object item)
    {
        base.Items.Add(item);
        if (SelectedIndex == -1)
            SelectedIndex = 0;
    }
} 
```

最终，这似乎有点矫枉过正，但通过这种方式是可行的。

# ruby-on-rails - 转到 resque web ui 时的“未定义方法 `process_route'”

> ID：10326232
> 
> 赞同：5
> 
> 时间：2012-04-26T01:53:18.393
> 
> 标签：ruby-on-rails, resque

在我的服务器上访问 Resque web ui 时，我刚刚开始收到此错误。它不会在本地发生，并且在我最近进行的一些应用程序更改/升级之前也没有发生。我没有对服务器本身进行任何更改。我可以开始恢复变更列表以查看它在哪里损坏，但我一次升级了很多宝石，所以我有预感这会很棘手。

那么，任何想法会导致这种情况或它可能起源于哪里？

我要去的路径是 mydomain.com/app/resque

路线.rb

```
scope :path => "/app" do
  mount Resque::Server.new, :at => '/resque'
end 
```

* * *

```
NoMethodError (undefined method `process_route' for #<Resque::Server:0x00000005dc95b0>):
  newrelic_rpm (3.3.4.1) lib/new_relic/agent/instrumentation/sinatra.rb:38:in `block in dispatch_with_newrelic'
  newrelic_rpm (3.3.4.1) lib/new_relic/agent/instrumentation/sinatra.rb:62:in `block in transaction_name'
  newrelic_rpm (3.3.4.1) lib/new_relic/agent/instrumentation/sinatra.rb:61:in `each'
  newrelic_rpm (3.3.4.1) lib/new_relic/agent/instrumentation/sinatra.rb:61:in `transaction_name'
  newrelic_rpm (3.3.4.1) lib/new_relic/agent/instrumentation/sinatra.rb:37:in `dispatch_with_newrelic'
  sinatra (1.0) lib/sinatra/base.rb:411:in `block in call!'
  sinatra (1.0) lib/sinatra/base.rb:566:in `instance_eval'
  sinatra (1.0) lib/sinatra/base.rb:566:in `block in invoke'
  sinatra (1.0) lib/sinatra/base.rb:566:in `catch'
  sinatra (1.0) lib/sinatra/base.rb:566:in `invoke'
  sinatra (1.0) lib/sinatra/base.rb:411:in `call!'
  sinatra (1.0) lib/sinatra/base.rb:399:in `call'
  rack (1.4.1) lib/rack/auth/basic.rb:25:in `call'
  sinatra (1.0) lib/sinatra/base.rb:979:in `block in call'
  sinatra (1.0) lib/sinatra/base.rb:1005:in `synchronize'
  sinatra (1.0) lib/sinatra/base.rb:979:in `call'
  actionpack (3.2.1) lib/action_dispatch/routing/mapper.rb:40:in `call'
  journey (1.0.3) lib/journey/router.rb:68:in `block in call'
  journey (1.0.3) lib/journey/router.rb:56:in `each'
  journey (1.0.3) lib/journey/router.rb:56:in `call'
  actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:589:in `call'
  omniauth (1.1.0) lib/omniauth/strategy.rb:177:in `call!'
  omniauth (1.1.0) lib/omniauth/strategy.rb:157:in `call'
  omniauth (1.1.0) lib/omniauth/builder.rb:48:in `call'
  newrelic_rpm (3.3.4.1) lib/new_relic/rack/browser_monitoring.rb:23:in `call'
  airbrake (3.0.9) lib/airbrake/rack.rb:27:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.1) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.1) lib/rack/etag.rb:23:in `call'
  rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.1) lib/action_dispatch/middleware/head.rb:14:in `call'
  remotipart (1.0.2) lib/remotipart/middleware.rb:30:in `call'
  actionpack (3.2.1) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.1) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.1) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.1) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `_run__2652675143263662148__call__736553824066291236__callbacks'
  activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.1) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.1) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.1) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.1) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.1) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  rack-ssl (1.3.2) lib/rack/ssl.rb:27:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  airbrake (3.0.9) lib/airbrake/user_informer.rb:12:in `call'
  railties (3.2.1) lib/rails/engine.rb:479:in `call'
  railties (3.2.1) lib/rails/application.rb:220:in `call'
  railties (3.2.1) lib/rails/railtie/configurable.rb:30:in `method_missing'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/abstract_request_handler.rb:513:in `accept_and_process_next_request'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/rack/application_spawner.rb:171:in `block in handle_spawn_application'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/utils.rb:479:in `safe_fork'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
  <internal:prelude>:10:in `synchronize'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /usr/local/rvm/gems/ruby-1.9.3-p0@global/gems/passenger-3.0.11/helper-scripts/passenger-spawn-server:99:in `<main>' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T06:44:33.683

您正在将 的新版本`new_relic`与非常旧版本的`sinatra`. 运行`bundle update sinatra`并确保您至少拥有 Sinatra 1.3.0，或者尝试降级`new_relic`gem。

如果您想知道为什么您`sinatra`的捆绑包中有：`resque` [取决于它](https://rubygems.org/gems/resque)。

您还可以为`sinatra`您`new_relic`的`Gemfile`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:41:59.850

我通过修改我`Gemfile`的具有以下几行来解决这个问题：

```
gem 'sinatra', ">= 1.3.0"
gem 'newrelic_rpm'
gem 'resque' 
```

# c++ - 项目分布

> ID：10326239
> 
> 赞同：0
> 
> 时间：2012-04-26T01:53:51.230
> 
> 标签：c++, linux, opengl, codeblocks, software-distribution

我希望在我的网站上发布我的项目的“潜伏高峰”，在 Windows 中，我知道如何正确分发所需的文件，如 .dll 等。但是对于 Linux（Ubuntu 发行版），我无法在除我的开发机器之外的任何其他机器上运行我的程序。我已经能够静态链接所有依赖项，但一个

-Tiny XML
-FreeType2
-SDL
-Lua
-LuaBind
-GLU

这些都有自己合适的 .a 静态库。但是，正如我链接的那样，OpenGL 或 lGL 显然指向一个 .so 动态链接库。我找不到 OpenGL 的静态库，但我确实了解使用动态链接库的好处。所以我的问题是，设置客户端计算机以运行我的文件的正确过程是什么？IE。如何在他们的系统上安装依赖项（在这种情况下只有 libGL.so）？

我想我还必须自动 chmod +x 文件，然后它也会为他们运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:35:33.007

您应该创建一个具有适当依赖关系的 .deb 文件，因此像 synaptic 这样的工具可以自动满足依赖关系。

# ipad - 在应用程序中复制 iPad 的原生日历

> ID：10326242
> 
> 赞同：0
> 
> 时间：2012-04-26T01:53:58.527
> 
> 标签：ipad, calendar

我想在我的应用程序中复制 iPad 本机日历，我可以在其中选择日期/添加事件/拖动事件/重新安排等。我见过一些像 taiku 和 kal 这样的库，但它们都没有复制类似于 iPad 的日历。我发现了几个使用 iPad 样式日历的应用程序，但不确定它们使用的所有组件。让我知道是否有人知道库（甚至付费）或如何实现它（scrollViews？tableviews？）

[日历](http://www.zdnet.com/blog/perlow/ipad-at-work-the-essential-guide-for-business-users/13758)

[日历-Salesbag](http://www.isalesbag.com/features)

-anoop

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-26T16:42:13.363

终于找到这个了....看起来不错

[http://maniacdev.com/2014/04/example-code-a-reproduction-of-the-ios-7-ipad-calendar](http://maniacdev.com/2014/04/example-code-a-reproduction-of-the-ios-7-ipad-calendar)

-anoop

# c++ - c中的自定义PCB闪烁灯

> ID：10326243
> 
> 赞同：1
> 
> 时间：2012-04-26T01:54:31.200
> 
> 标签：c++, c, circuit

有没有办法/教程来获取 PCB（印刷电路板）并使 LED 闪烁？我基本上是在问：

1.  是否有为 PCB 制作迷你操作系统的 DIY 教程（不是 Arduino 之类的）。

2.  我想在这个 PCB 上放一个 LED，我想用 C/C++ 编写一个迷你操作系统，让灯闪烁

2a. 关于这个的教程/视频？

我去了图书馆、一所大学和谷歌，发现没有办法做到这一点。不是博客、视频或有用的提示。任何事情都会有所帮助！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T02:05:21.403

O'Reilly 出版了一本名为[Programming Embedded Systems in C and C++](http://shop.oreilly.com/product/9781565923546.do)的书。本书用一整章专门介绍了这个练习（毫不奇怪，这一章被称为“Das Blinkenlights”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T02:10:49.473

[SparkFun](http://www.sparkfun.com/)是嵌入式设计入门的绝佳资源。[这](http://www.sparkfun.com/tutorials/category/1)是关于使用 AVR 开始嵌入式电子产品的完整系列。[这](http://www.sparkfun.com/tutorials/93)是该系列中的文章，他们告诉您如何使 LED 闪烁。

# backbone.js - 如何防止用户直接在地址栏上使用路由器 URL？

> ID：10326244
> 
> 赞同：0
> 
> 时间：2012-04-26T01:54:35.147
> 
> 标签：backbone.js

已经使用 Backbone Router 完成了一些工作示例，但是有没有办法保护直接在地址栏上使用的路由？而且当用户按下浏览器上的后退按钮时，路由不会被清除并会产生问题。什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:16:48.410

我想我明白你在说什么 - 你想强迫用户通过某个（主页）页面进入你的网站。那是对的吗？

这很有用，例如，当您构建移动优化网络应用程序时，您总是希望用户通过启动屏幕进入。我要做的是为我的路由器设置一个“合法入口”属性，并在每条路由上检查它，如下所示：

```
APP.Router = Backbone.Router.extend({
 legitEntrance: false,

 // Just a helper function
 setLegitEntrance: function() { 
  this.legitEntrance = true; 
 },

 // Send the user back to the home page
 kickUser: function() {
  this.navigate("home", {trigger:true});
 },

 routes : {
  ...
 },

 // Example router function: Home page
 routeToHome: function() {
  this.setLegitEntrance();
  var homeView = APP.HomeView.extend({ ... });
  homeView.render();
 },

 // Example router function: some other internal page
 routeToSomeOtherInternalPage: function() {
  if(!this.legitEntrance) {
   this.kickUser();
   return;
  }

  var someOtherInternalView = APP.SomeOtherInternalView.extend({ 
   ...
  });

  someOtherInternalView.render();
 }

 ....
}); 
```

我确信这段代码可以清理一些，但你明白了。希望能帮助到你。

# bash - Bash：替换二进制文件中的一些字节

> ID：10326250
> 
> 赞同：4
> 
> 时间：2012-04-26T01:55:31.013
> 
> 标签：bash, dd

我有一个包含 10 个字节的 0x00 的二进制文件 zero.bin，以及一个包含 5 个字节的 0x01 的数据文件 data.bin。我想用 data.bin 替换 zero.bin 的前 5 个字节。我试过了

`dd if=data.bin of=zero.bin bs=1 count=5`

但是，zero.bin 被截断，最后变成 0x01 的 5 个字节。我想保留 0x00 的尾随 5 个字节。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T05:22:51.050

没问题，只需添加`conv=notrunc`：

```
dd if=data.bin of=zero.bin bs=1 count=5 conv=notrunc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T01:58:06.483

你有一半的解决方案；将其放入临时文件`tmp.bin`而不是`zero.bin`, 然后

```
dd if=zero.bin bs=1 seek=5 skip=5 of=tmp.bin
mv zero.bin old.bin # paranoia
mv tmp.bin zero.bin 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T02:05:54.477

不要坚持使用 dd(1)。还有其他工具，例如：

```
(cat data.bin && tail -c +5 zero.bin) > updated.bin 
```

# ruby - Emacs Ruby Electric 不插入结尾

> ID：10326255
> 
> 赞同：8
> 
> 时间：2012-04-26T01:56:30.060
> 
> 标签：ruby, emacs

我通过 ELPA 安装了 Ruby Electric 模式。

我访问了一个 ruby​​ 文件`~/test.rb`

`C-h m`显示 ruby​​ 电动模式已启用，字体锁定也已启用，请参见下面的输出

```
Enabled minor modes: Auto-Compression Auto-Encryption Blink-Cursor Column-Number 
Delete-Selection File-Name-Shadow Global-Font-Lock Global-Linum Iswitchb Line-Number 
Menu-Bar Mouse-Wheel Shell-Dirtrack Tooltip Transient-Mark 
```

但是，当我输入代码时；

```
class Test
  def foo() 
```

我没有`end`在击球时自动插入`RET`

**更新**

我`package-list`按照我找到的页面上的建议安装了，我认为该页面属于作者。查看来源，`~/emacs.d/elpa/ruby-electric-1.1/ruby-electric.el`我看到以下内容；

```
;; FIXME: it should be available in next versions of ruby-mode.el
(defun ruby-insert-end ()
  (interactive)
  (insert "end")
  (ruby-indent-line t)
  (end-of-line)) 
```

所以看起来我可能有一个坏文件，将尝试另一个。

**更新**

我使用`ruby-electric.el`从[http://svn.ruby-lang.org/repos/ruby/tags/v1_9_2_0/misc/ruby-electric.el下载](http://svn.ruby-lang.org/repos/ruby/tags/v1_9_2_0/misc/ruby-electric.el)

从这篇文章链接到[http://appsintheopen.com/articles/1-setting-up-emacs-for-rails-development/part/7-emacs-ruby-foo](http://appsintheopen.com/articles/1-setting-up-emacs-for-rails-development/part/7-emacs-ruby-foo)

然后把这个要点[https://gist.github.com/1213051](https://gist.github.com/1213051)添加到`ruby-electric.el`

```
(defun ruby-insert-end () 
  "Insert \"end\" at point and reindent current line." 
  (interactive) 
  (insert "end") 
  (ruby-indent-line t) 
  (end-of-line)) 
```

而这个钩子进入我的`.emacs`，它似乎也可以在没有钩子的情况下工作

```
(add-hook 'ruby-mode-hook
      (lambda ()
        (require 'ruby-electric)
        (ruby-electric-mode t))) 
```

正如这个谷歌组线程中所讨论的；[https://groups.google.com/forum/?fromgroups#!msg/emacs-on-rails/Cuh_x5eCK_M/KDwjY4K6X1YJ](https://groups.google.com/forum/?fromgroups#!msg/emacs-on-rails/Cuh_x5eCK_M/KDwjY4K6X1YJ)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T02:28:20.477

确保它`REl`在您的 emacs 状态栏中显示。

我从这里下载了 ruby​​-electric：http:
[//shylock.uw.hu/Emacs/ruby-electric.el](http://shylock.uw.hu/Emacs/ruby-electric.el)

然后我将库加载到 emacs 中，并进入一个 ruby​​ 文件并使用以下命令激活 ruby​​ Electric：

```
M-x ruby-electric-mode 
```

当我键入`class`并点击空格时，它会自动填充`end`（运行 emacs 23）。`ruby-electric.el`如果您无法从 ELPA 获得该版本，也许您想尝试该版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-28T12:20:46.090

您需要包含“ruby-additional”才能使用“ruby-electric”：

[https://github.com/ruby/ruby/blob/trunk/misc/ruby-additional.el](https://github.com/ruby/ruby/blob/trunk/misc/ruby-additional.el)

有一天应该合并到emacs中。

# ruby-on-rails - 使用 Devise，我如何为管理员和用户提供不同的配置选项？

> ID：10326256
> 
> 赞同：0
> 
> 时间：2012-04-26T01:56:44.750
> 
> 标签：ruby-on-rails, devise

使用 Devise，我有一个管理模型和一个用户模型。我想为每个模型指定不同的配置选项。目前，我所有的设计配置都在`/config/initializors/devise.rb`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:00:03.143

你需要为每个人做两件事：路由助手（最终会出现在 中`routes.rb`）和设计字段助手（最终会出现在你的两个模型中）。

当你运行`rails generate devise user`and`rails generate devise admin`时，你应该设置你需要的东西来开始。

哦，然后用 追赶它`rake db:migrate`，因为根据您的需要，不同的列将被添加到两个表中。

（如果您要求为不同的模型设置不同的*全局*配置选项，我不确定如何去做，实际上，如果可能的话。）

# sitemesh - 排除站点网格

> ID：10326258
> 
> 赞同：1
> 
> 时间：2012-04-26T01:57:32.880
> 
> 标签：sitemesh

我想在项目中为我的一些文件排除站点网格装饰器。但怎么做。我的文件名是 listApps.jsp

这是我的 decorators.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<decorators defaultdir="/WEB-INF/pages">
<excludes>
    <pattern>/j_spring_security_logout</pattern>
    <pattern>/pages/logout-redirect.jsp</pattern>
    <pattern>/flexweb/*</pattern>
    <pattern>/ApplicationScaffold.html</pattern>
    <pattern>/listApps.html</pattern>
</excludes>

<decorator name="main" page="main.jsp">
    <pattern>/*</pattern>
</decorator> 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T18:27:50.887

好吧，您可以创建另一个名为 nothingfancy 的模板，并且您无需为该模板做任何特别的事情

把它放在第一位，以便在之前对其进行评估

```
<?xml version="1.0" encoding="utf-8"?>
<decorators defaultdir="/app/decorators">

    <decorator name="nothingfancy" page="nothingfancy.jsp">
        <pattern>/j_spring_security_logout</pattern>
        <pattern>/pages/logout-redirect.jsp</pattern>
        <pattern>/flexweb/*</pattern>
        <pattern>/ApplicationScaffold.html</pattern>
        <pattern>/listApps.html</pattern>
    </decorator>

    <decorator name="main" page="main.jsp">
        <pattern>/*</pattern>
    </decorator>
</decorators> 
```

# iphone - 如何将大 (60mb+) 图像保存到照片库？

> ID：10326262
> 
> 赞同：4
> 
> 时间：2012-04-26T01:58:24.820
> 
> 标签：iphone, ios, memory, uiimage, photolibrary

我知道将 UIImage 保存到照片库的各种方法：

*   UIImageWriteToSavedPhotosAlbum
*   ALA资产库

但是，我的图像非常大（60mb+），因此无法将它们带入内存。我可以通过将图像流式传输到磁盘来下载图像，甚至可以使用 imageWithContentsOfFile 进行查看（尽管在给定屏幕尺寸的情况下这是不必要的）。

但我希望用户能够保存这些图像以备后用。无论如何我可以将这些大图像放入照片库吗？我只需要将它们本地存储在应用程序沙箱中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T02:23:14.323

我认为将它们存储在照片库中是没有意义的，因为它是为在设备上查看而设计的，并且查看这么大的图像没有意义。如果您想让用户看到图像，那么我建议您创建一个预览并将该版本保存到照片库中。如果您想让用户将它们从设备传输到计算机，那么您的应用程序包中有一个特殊文件夹，可以在使用 iTunes 并选择您的应用程序时显示这些图片。然后他可以将这些照片传输到他的电脑。您能否详细说明图像的特征？格式、尺寸、目的等。

# clojure - 将函数应用于序列的每个第 n 个元素的巧妙方法？

> ID：10326265
> 
> 赞同：7
> 
> 时间：2012-04-26T01:58:52.580
> 
> 标签：clojure, functional-programming

将函数映射到序列中的每个第 n 个元素的巧妙方法是什么？之类的东西`(map-every-nth fn coll n)`，这样它就会返回只有每第 n 个元素转换的原始序列，例如 (map-every-nth inc (range 16) 4) 将返回 (0 1 2 4 4 5 6 8 8 9 10 12 12 13 14 16)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T02:23:09.167

试试这个：

```
(defn map-every-nth [f coll n]
  (map-indexed #(if (zero? (mod (inc %1) n)) (f %2) %2) coll))

(map-every-nth inc (range 16) 4)
> (0 1 2 4 4 5 6 8 8 9 10 12 12 13 14 16) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T03:06:38.883

我建议这比公认的答案更简单、更干净：

```
(defn map-every-nth [f coll n]
  (map f (take-nth n coll))) 
```

这是一个方便的知道：[http ://clojuredocs.org/clojure_core/clojure.core/take-nth](http://clojuredocs.org/clojure_core/clojure.core/take-nth)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-17T13:54:36.217

我个人更喜欢这个解决方案：

```
(defn apply-to-last [f col] (concat (butlast col) (list (f (last col)))))
(apply concat (map #(apply-to-last (fn [x] (* 2 x)) %) (partition 4 (range 16)))) 
```

或者作为一个函数：

```
(defn apply-to-last [f col] (concat (butlast col) (list (f (last col)))))
(defn map-every-nth [f col n] (apply concat (map #(apply-to-last f %) (partition n col))))
(map-every-nth (fn [x] (* 2 (inc x))) (range 16) 4)
; output: (0 1 2 8 4 5 6 16 8 9 10 24 12 13 14 32) 
```

`apply-to-first`请注意，这很容易导致能够控制映射每个第 n 个元素的“开始” `apply-to-second`。`apply-to-third`

我不知道我上面写的代码的性能，但它对我来说似乎更惯用。

# rack - Padrino 子应用程序如何工作？

> ID：10326266
> 
> 赞同：1
> 
> 时间：2012-04-26T01:58:58.003
> 
> 标签：rack, code-organization, padrino

好的，假设我有两个不同的项目。每个都是分类相关的，但不同的数据库等。

示例（项目）：

```
Project Management
Help Desk Management 
```

用户可以是任一项目（或两者）的成员。但我希望能够将它们联系在一起。这样任何一个都可以独立存在。或者，帮助台票可以与项目等相关联。

我会有一个用户群。

那么，我将如何构建它？用户会是两者的子应用吗？我是否会有某种类型的“启动器”应用程序将这些作为两个子应用程序包含在内？

喜欢：

```
Launcher App
    Projects
    Help Desk
    Users 
```

# php - 显示 wordpress 中同一类别中是否有超过 3 篇相关文章

> ID：10326268
> 
> 赞同：1
> 
> 时间：2012-04-26T01:59:04.160
> 
> 标签：php, wordpress, conditional-operator, conditional-statements

我似乎遇到了困难。如果 wordpress 的帖子页面模板上有超过或等于 3 个帖子，我需要显示一段特定的文本。（循环单.php）

它应该足够动态地检测相关类别中的帖子总数是否大于或等于 3。

这是我发现的一个代码，它在类别模板页面（archive.php）上运行良好，但是当我在帖子模板中使用它时它会搞砸。

```
<?php
$count = 1;
if (have_posts()) : while(have_posts()): the_post(); ?>

<!-- Less than 3 post - nothing shown at all -->

<?php $count++;
  endwhile; endif; ?>
<?php if ($count > '3') { ?>

<div> This line shown when 3 or more posts are in current post category</div>

<?php } ?> 
```

注意：我试图让它在 loop-single.php 模板文件上工作。

任何帮助将不胜感激，谢谢

* * *

更新代码以包含上述解决方案。我修复了一些语法错误，但它现在抛出 T-STRING 错误：解析错误：语法错误，意外 T_STRING

这是我的完整页面代码：

```
<?php /* Start loop */ ?>
<?php while (have_posts()) : the_post(); ?>
<?php roots_post_before(); ?>
<article <?php post_class() ?> id="post-<?php the_ID(); ?>">
<?php roots_post_inside_before(); ?>
<header>
<h1 class="entry-title"><?php the_title(); ?></h1>

<!-- POST DATE STAMP -->
<div class="post-top">
<div class="date-stamp">
<b><?php the_time('M d'); ?></b>
</div>
</header>

<div class="entry-content">
<?php the_content(); ?>
</div>

<footer>
<hr />

<?php
$cat = get_query_var('cat');
$posts = get_posts(array('category' => $cat));
if(count($posts) >= 3)
{

<!-- POST FOOTER RELATED CONTENT (2 HORIZONTAL) --> 
<h5>Featured: <?php $cats=get_the_category(); echo $cats[0]->cat_name; ?></h5>
<div id="foot-container">
<?php echo do_shortcode("[catlist categorypage=yes comments=yes numberposts=2 class=horizontal-2 offset=2 orderby=date order=desc thumbnail=yes thumbnail_size=75 thumbnail_class=footer-thumb title_tag=p title_class=footer-link comments_tag=p      comments_class=comment-count]"); ?>
<div style="clear:both;"></div>
</div>
<hr />

}
else
{
Why hello there LESS than three
}
?>

</footer>
<?php comments_template(); ?>
<?php roots_post_inside_after(); ?>
</article>
<?php roots_post_after(); ?>
<?php endwhile; /* End loop */ ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:20:43.410

这应该让你开始：

```
<?php
$cat = get_query_var('cat');
$posts = get_posts(array('category' => $cat));
if(count($posts) >= 3)
{
    //CODE EXECUTED IF THREE OR MORE POSTS EXIST IN CURRENT CATEGORY
}
else
{
    //CODE EXECUTED IF LESS THAN THREE POSTS EXIST IN CURRENT CATEGORY
}
?> 
```

**额外信息：**它失败的原因是你的循环只执行了一次迭代。单个帖子不会多次循环，因为......嗯......这是一个帖子。这种方法的作用是获取现有类别，并查询匹配类别中的所有 Wordpress 帖子。使用 PHP 的 count 函数将为您提供使用给定参数找到的确切帖子数。

警告词：上面的脚本不会找到匹配类别中的所有帖子。只有该给定类别中的五个最近的。如果您想要所有匹配帖子的实际总数，请将一行更改为以下内容：

```
$posts = get_posts(array('category' => $cat, 'numberposts' => -1)); 
```

**代码更新：**这一行：

```
<article <?php post_class(); ?> id="post-<?php the_ID(); ?>"> //missing semicolon after post_class() 
```

而这个块：

```
<?php
$cats=get_the_category();
$posts = get_posts(array('category' => $cats[0]->cat_ID));
if(count($posts) >= 3)
{
?> 
<!-- POST FOOTER RELATED CONTENT (2 HORIZONTAL) --> 
<h5>Featured: <?php echo $cats[0]->cat_name; ?></h5>
<div id="foot-container">
<?php echo do_shortcode("[catlist categorypage=yes comments=yes numberposts=2 class=horizontal-2 offset=2 orderby=date order=desc thumbnail=yes thumbnail_size=75 thumbnail_class=footer-thumb title_tag=p title_class=footer-link comments_tag=p comments_class=comment-count]"); ?>
<div style="clear:both;"></div>
</div>
<hr />
<?php
}
else
{
echo 'Why hello there LESS than three';
}
?> 
```

# django - django 自动化同步数据库

> ID：10326277
> 
> 赞同：2
> 
> 时间：2012-04-26T02:00:20.807
> 
> 标签：django, syncdb

我正在开发一个包含 django 服务器和设置模块的项目。

用户将配置他们的系统来运行我的程序，其中包括一个 django webserver 元素以及其他项目。我正在开发一个设置模块，该模块可帮助用户正确设置所有设置并设置所有适当的文件。在设置过程中，我想做的一件事本质上是一个“manage.py syncdb”命令，它从无到有创建一个适当的 SQLite 文件和表。

我可以获取在 manage.py 中找到的代码，并直接将其适当地粘贴到我的设置模块中，但我不确定是否有更好的方法我缺少 - 沿着两行组成：

```
import django.something
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")
django.something.syncdb() 
```

或者类似的东西。我只是在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T02:06:09.483

这应该这样做：

```
import os
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")
from django.core import management
management.call_command('syncdb', interactive=False) 
```

* * *

你也可以做

```
import os
import settings
from django.core.management.commands import syncdb 

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")

syncdb.Command().execute(noinput=True) 
```

# php - 使用 PHP 函数从 XML 获取数据

> ID：10326281
> 
> 赞同：0
> 
> 时间：2012-04-26T02:01:35.913
> 
> 标签：php, mysql, xml

我目前有一个 XML 文件（http://redmine.something.com/projects.xml）。我想使用 PHP 函数读取该数据以插入到我的数据库中，但我不知道如何编写函数来获取数据。下面是我的 XML 文件结构示例：

```
<projects type="array" total_count="7" offset="0" limit="25">
    <project>
       <id>147</id>
       <name>012-003: online shop jakob schlaepfer</name>
       <identifier>012-003</identifier>
       <created_on>2012-02-01T09:14:29+07:00</created_on>
       <updated_on>2012-02-20T10:58:28+07:00</updated_on>
    </project>
</projects> 
```

任何链接或帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:02:26.033

你正在寻找[`SimpleXML`](http://us.php.net/manual/en/book.simplexml.php). 以下是一些[基本示例](http://us.php.net/manual/en/simplexml.examples-basic.php)。

# javascript - 更新一个 当用户点击一个 元素？

> ID：10326283
> 
> 赞同：0
> 
> 时间：2012-04-26T02:02:51.727
> 
> 标签：javascript, jquery, html, youtube

我有 HTML 代码：

```
<div id=ytVid>
    <iframe width="420" height="315" src="http://www.youtube.com/embed/5EdmHSTwmWY" frameborder="0" allowfullscreen></iframe>
    <script type="text/javascript" src="js/youtube.js"></script>
</div> 
```

目前，我有一组由 jQuery 使用数组生成的段落。

我想要发生的是，当用户单击生成的段落之一时，这将从 youtube.js 文件启动此代码：

```
$(document).ready(function() {
    function openLink(evt) {
        var search = evt.target.innerHTML;
        var keyword= encodeURIComponent(search);
        var yt_url='http://gdata.youtube.com/feeds/api/videos?q='+keyword+'&format=5&max-results=1&v=2&alt=jsonc';

        $.ajax({
            type: "GET",
            url: yt_url,
            dataType:"jsonp",
            success: function(response) {
                if(response.data.items) {
                    $.each(response.data.items, function(i,data) {
                        var video_id=data.id;
                        var video_frame="<iframe width='420' height='236' src='http://www.youtube.com/embed/"+video_id+"' frameborder='0' type='text/html'></iframe>";
                        $("#ytVid").html(video_frame); 
                    });
                } else {
                    $("#ytVid").html("<div id='no'>No Video</div>");
                }
            }
        });
    };
}); 
```

我不知道上面的代码是否正确，但它应该做的是使用数组中的内容（如果可能）或段落中的内容来搜索 youtube 的视频以更新 ytVid div。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:15:23.923

In your "simplified" copy of the JavaScript jsfiddle, you have the strings wrapped in brackets, which signifies they are arrays. You also didn't have jQuery selected to be included.

[http://jsfiddle.net/PADL9/1/](http://jsfiddle.net/PADL9/1/)

And here's one with the JS from above added in

[http://jsfiddle.net/PADL9/2/](http://jsfiddle.net/PADL9/2/)

(remove the alert/return for the AJAX to work)

# ruby-on-rails - 安装设备时出现问题

> ID：10326284
> 
> 赞同：0
> 
> 时间：2012-04-26T02:03:19.063
> 
> 标签：ruby-on-rails, devise

在我安装了 gem devise 之后..当我尝试运行服务器时..这就是我得到的

DEVISE] Devise.case_insensitive_keys 为假，不再受支持。最近的 Devise 版本会在将电子邮件保存到数据库之前自动将其小写，但您的应用程序未使用此功能。您可以通过以下任一方式解决此问题：

1) 在您的设计初始化程序中设置 config.case_insensitive_keys = [:email] 并运行迁移，该迁移将降低数据库中已有的所有电子邮件；

2）设置 config.case_insensitive_keys = [] （所以什么都不会被小写）并确保你没有使用 Devise :validatable （因为 Validatable 假定不区分大小写）

[DEVISE] Devise.apply_schema 为真。这意味着 Devise 会自动配置您的数据库。这不再发生。您应该将 Devise.apply_schema 设置为 false 并手动设置 Devise 使用的字段，如下所示：[https ://github.com/plataformatec/devise/wiki/How-To:-Upgrade-to-Devise-2.0-migration-schema -风格](https://github.com/plataformatec/devise/wiki/How-To:-Upgrade-to-Devise-2.0-migration-schema-style)

[DEVISE] Devise.use_salt_as_remember_token 为 false，不再支持。现在设计只使用盐作为记忆令牌，并且可以从模型中删除 remember_token 列。

[DEVISE] Devise.reset_password_within 为 nil。请将此值设置为一个时间间隔（例如，6.hours）并将一个 reset_password_sent_at 字段添加到您的设计模型（如果它们还没有）。

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:15:00.087

运行`rails g devise:install`。

它将生成`config/initializers/devise.rb`包含所有这些设置的文件。

# jquery - 如何制定 jQuery 验证规则 - 输入不在数组中的值，基本上是为了使值唯一？

> ID：10326288
> 
> 赞同：0
> 
> 时间：2012-04-26T02:03:51.907
> 
> 标签：jquery, jquery-plugins, jquery-validate

我有一个 Web 应用程序，我在其中使用 jQuery 验证引擎进行客户端验证。此应用程序维护用户必须输入某个 ID 的记录，基本上是一个数字。我维护用户输入的所有序列号的数组。

现在我想对表单进行验证，用户输入的 ID 值应该已经输入，意味着不应该在数组中。

例如：ids = {1,2,3,6,8}，现在 ID 的下一个值不能是数组 ids 中的值。我想在验证引擎中编写这样的规则。

```
var validator = $("#formId").validate({ 
        rules: { 
            uniqueId: <Rule to write here ???>, 
        }, 
        messages: { 
            uniqueId: "Entered ID already exists", 

        }, 
    }); 
```

请帮帮我。**此外，如果有人有一些教程链接或其他东西，我可以从中学习所有可能的验证规则实现......那就太好了**。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:11:37.980

我从未使用过 jQuery 验证，但这应该可以帮助您入门。首先创建验证函数

```
function validateID(value, element) {
    if(ids.indexOf(value) > -1) {
        //value does exist in ids
    }
    else {
       //value does not exist in ids
       //(maybe add it to ids?)
    }
} 
```

然后将其添加到 jquery 验证规则中：

```
$.validator.addMethod("idRule", validateID, "message"); 
```

并创建一个规则：

```
var validator = $("#formId").validate({ 
    rules: { 
        uniqueId: { 
            idRule: true
        } 
    }, 
    messages: { 
        uniqueId: "Entered ID already exists", 

    }, 
}); 
```

这是一篇[博客文章](http://randomactsofcoding.blogspot.com/2008/10/starting-with-jquery-how-to-write.html)，我在其中找到了很多此类信息，您可能会发现它也很有用

# android - 传递变量时 GeoPoint 不起作用

> ID：10326289
> 
> 赞同：0
> 
> 时间：2012-04-26T02:03:58.903
> 
> 标签：android, android-mapview

我是 Android/Java 新手，当我尝试向它发送变量时创建 GeoPoint 时遇到问题，但是当我向它发送文字值时它可以正常工作。

在下面的代码块中，toast 消息显示正确的纬度（从 strings.xml 检索

如何使用变量设置纬度？

```
Integer intLat = Integer.valueOf(R.string.MexCityLat);
Toast.makeText(HelloGoogleMapsActivity.this, intLat, Toast.LENGTH_SHORT).show();

GeoPoint point = new GeoPoint(intLat , -99120000);  //this puts my point near North Pole
//GeoPoint point = new GeoPoint(19240000, -99120000);  //this puts my point in Mexico City

OverlayItem overlayitem = new OverlayItem(point, "Hola, Mundo!", "I'm in Mexico City!"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:19:30.543

**地理点**

```
public GeoPoint(int latitudeE6,int longitudeE6) 
```

构造具有给定纬度和经度的 GeoPoint，以微度 (度 * 1E6) 为单位。

**参数：**

```
 latitudeE6 - The point's latitude. This will be clamped to between -80 degrees and +80 degrees inclusive, in order to maintain accuracy in the Mercator projection.
 longitudeE6 - The point's longitude. This will be normalized to be greater than -180 degrees and less than or equal to +180 degrees. 
```

另请参阅此[链接](https://stackoverflow.com/questions/3577866/android-geopoint-with-lat-long-values)以了解如何将双精度浮点数转换为地理点。并确保您获得正确的 intLat 值

# c++ - 在 C++ 中记录 SEH 错误

> ID：10326290
> 
> 赞同：0
> 
> 时间：2012-04-26T02:04:08.750
> 
> 标签：c++, windows, exception-handling

是否可以执行以下操作？我对 Windows 编程很陌生，所以我要求的内容可能从不可能到荒谬。如果我理解正确，Windows 结构化异常机制会处理诸如被零除或访问冲突等错误。我想将最大数量的可用信息转储到日志文件中，最好是出现结构化异常时的堆栈跟踪。我正在使用 MSVC10，Windows 7。

编辑：一个不无关的问题是这是否合理？堆栈是否包含足够的有用信息来帮助调试，即函数名称。另外，转储捕获此异常的堆栈的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:34:31.230

是的，这是可能的。在这里您可以找到一个示例：[try-except 语句](http://msdn.microsoft.com/en-us/library/s58ftw19.aspx)。

但最好考虑为意外的 SEH 异常[创建转储](http://msdn.microsoft.com/en-us/library/windows/desktop/ee416349%28v=vs.85%29.aspx)，否则可能很难找到原因。

# python - Django 1.4 RegexUrlResolver 对象不可调用

> ID：10326293
> 
> 赞同：1
> 
> 时间：2012-04-26T02:04:32.340
> 
> 标签：python, django, url

我正在使用一些旧代码。从我读过的内容来看，互联网上没有关于此错误的任何内容，但是现在我再次开始使用该代码，但以前版本中的工作不再有效

在 urls.py

```
(r'^blog/detail/(?P<slug_id>[-w]+/$', 'blog.views.detailView'), 
```

由此引发的错误

```
'RegexURLResolver' object is not callable 
```

我在 Django 1.4 的任何地方都找不到使用此方法的任何问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T02:22:05.757

修复您的正则表达式 - 也许这会有所帮助？如果没有，我会删除这个。只是猜测一个错误的正则表达式和一个错误，上面写着正则表达式可能会导致这个......

```
(r'^blog/detail/(?P<slug_id>[-w]+/$', 'blog.views.detailView'), 
```

应该

```
(r'^blog/detail/(?P<slug_id>[-w]+)/$', 'blog.views.detailView'), 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T05:24:42.420

您在 urlpatterns 元组中遗漏了一个逗号。

Python 尝试调用后跟一对括号的对象。所以如果你有

```
( 
 (a, b, c),
 (d, e, f)
) 
```

这是 3 元组的 2 元组，但如果你有

```
( 
 (a, b, c)
 (d, e, f)
) 
```

你会得到这个错误，因为它试图用第二个元组作为参数调用第一个元组。

# php - jQuery，$.post() 没有访问目标 url

> ID：10326294
> 
> 赞同：0
> 
> 时间：2012-04-26T02:04:40.407
> 
> 标签：php, javascript, json, jquery

在下面的代码中有一个带有目标 url 的 XMLHTTPRequest ，`test_location_jquery.php`尽管触发了成功函数，但永远不会访问该文件。当单独运行以进行测试时，`test_location_jquery.php`已成功按预期返回 JSON 对象。任何关于如何在不访问文件时触发成功功能的想法将不胜感激。

## 查询

```
<?php

    require_once '../meta/php/dbConn.php';

    $charlie_query = "";
    $charlie_result = "";

    $charlie_query = "
        SELECT  ud.user_id as 'id',
                concat(ud.last_name,', ',ud.first_name) as 'name'
        FROM    `user_detail` AS ud,
                `user_type` AS UT
        WHERE ud.user_type = ut.id
        AND ut.class IN ('charlie')
        AND ut.level IN (4)
        ORDER BY ut.class;
    ";
    $charlie_result = mysql_query($charlie_query);

    if(!(bool)$charlie_result){
        throw new Exception();
    }

?>

<html>
<head>

    <script src="../meta/js/jquery-1.7.2.js"></script>
<!-- <script src="../meta/js/getXML_sir.js"></script>  -->
    <script>
        $(document).ready(function(){
            $('#charlie').change(function(){
                var charlie_id =  $('#charlie option:selected').val();
                var DT = "json";

                $.post(
                        'test_location_jquery.php',
                        {'id':charlie_id,'datatype':DT},
                        function(data){
                            alert('Success');
                            var obj = $.parseJSON(data);
                        }
                );

                if(obj != 'undefined'){
                    var locations = obj.find('location');
                    console.log(locations);
                }else{
                    alert("failure");
                }

            })
        })

    </script>

</head>
<body>

    <form>
        <label>Charlie: </label><select id="charlie" name="charlie">
            <option>&nbsp;</option>
        <?php
            while($row = mysql_fetch_assoc($charlie_result)){
                print("<option value='".$row['id']."'>".$row['name']."</option>");
            } 
        ?>
        </select>
        <label>Location: </label><select id="location" name="location"></select>
    </form>

    <div></div>

</body>
</html> 
```

## test_location_jquery.php

```
<?php

require_once("../meta/php/dbConn.php");

if(!isset($_POST)){
    throw new Exception();
}else{
    $id = $_POST['id'];
    $datatype = $_POST['datatype'];
}

$query = "
        SELECT  l.id as 'id',
            ld.attribute_string as 'name'
        FROM    `location` AS l,
                `location_details` AS ld
        WHERE l.id = ld.location_id
        AND     ld.attribute_label = 'name'
        AND l.id = ".$id.";
";
$result = mysql_query($query);

if(!(bool)$result){
    throw new Exception();
}else{
    switch($datatype){
        case 'xml':
        break;
        case 'json':
            $rows = array();
            while($r = mysql_fetch_assoc($result)) {
                $rows[] = $r;
            }
            return json_encode($rows);
        break;
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T02:07:35.367

你的`.post()`函数是异步的。这意味着调用`.post()`只是开始发布帖子。`post()`它后面的行在完成之前和调用成功处理程序之前立即执行。

然后，一段时间后调用成功处理程序。

所有使用帖子响应的代码必须在成功处理程序中或从成功处理程序调用。

因此，您的问题是您无法引用此代码所在的成功处理程序中的数据集（在`.post()`调用之后）。您必须将此代码放入成功处理程序本身。

```
 if(obj != 'undefined'){
                var locations = obj.find('location');
                console.log(locations);
            }else{
                alert("failure");
            } 
```

因此，在这样做之后，您的代码将如下所示：

```
<script>
    $(document).ready(function(){
        $('#charlie').change(function(){
            var charlie_id =  $('#charlie option:selected').val();
            var DT = "json";

            $.post(
                    'test_location_jquery.php',
                    {'id':charlie_id,'datatype':DT},
                    function(data){
                        alert('Success');
                        var obj = $.parseJSON(data);
                        if(obj != 'undefined'){
                            var locations = obj.find('location');
                            console.log(locations);
                        }else{
                           alert("failure");
                        }
                    }
            );

        })
    })

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:10:47.970

这应该有效。

```
 $.post(
                        'test_location_jquery.php',
                        {'id':charlie_id,'datatype':DT},
                        function(data){
                            alert('Success');
                            var obj = $.parseJSON(data);
                            if(obj != 'undefined'){
                             var locations = obj.find('location');
                                  console.log(locations);
                             }else{
                                alert("failure");
                             }
                        }
                ); 
```

由于 Ajax 是异步的，因此 obj 变量在页面被完全调用之前并不存在。因此，如果您将其放入函数（数据）中，它只会在调用完成后继续进行，并且该变量现在将存在。

# objective-c - 可变宽度字符串填充

> ID：10326305
> 
> 赞同：1
> 
> 时间：2012-04-26T02:06:27.863
> 
> 标签：objective-c, ios5

我收到了一个字符串值，该值可以以 0-4 位十进制数字开头，并以少量但未知的非十进制文本结尾。我需要用“0”字符将前导十进制数字填充为四位数字。如果我通过“abcd”，我会返回“0000abcd”。如果我通过“0xyz”，我会返回“0000xyz”。等等...

我正在使用以下代码来检测我需要做多少填充：

```
int padding = 0;
int strlen = [rawString length];
NSRange rng = [rawString rangeOfCharacterFromSet:[[NSCharacterSet decimalDigitCharacterSet] invertedSet]];

if (rng.length > 0 && rng.location < 4) // Characters were found at the end.
    padding = 4 - rng.location;
else if (rng.length == 0 && strlen < 4) // Only numbers were found.
        padding = 4 - strlen; 
```

现在我可以准确地确定填充，我的挑战是以有效的方式添加填充。我可以做类似以下的事情，但这对我来说效率低下。

```
for (; padding > 0; padding--)
    rawString = [@"0" stringByAppendingString:rawString]; 
```

有没有更好的方法可以像我描述的那样向字符串添加**可变**数量的填充？

**编辑：**我考虑砍掉数字部分，填充它，然后将其添加回来，但极端情况的数量似乎表明原位解决方案是最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:09:18.073

由于`padding`介于`0`和之间`4`，您可以这样做：

```
rawString = [[@"0000" substringFromIndex:4-padding] stringByAppendingString:rawString]; 
```

这个想法是从包含四个元素的字符串中去掉正确数量的零。

# c++ - 更简单的 CORBA 协议？它存在吗？

> ID：10326308
> 
> 赞同：0
> 
> 时间：2012-04-26T02:06:52.857
> 
> 标签：c++, sockets, corba

我希望能够使用 CORBA 功能之一，即我希望我的 CORBA 客户端在 CORBA 服务器上执行一个函数，将参数传递给函数并接收函数的返回值。但是，我想使用不同的协议，一个更简单的协议……这样的事情存在吗？

在浏览文档和教程时，我觉得 CORBA 很重，难以实现和管理。

那么上述功能是否存在于另一个协议中？

编辑：为了根据当前答案澄清我的问题，
我仍然没有实现服务器和客户端。我的客户端需要能够在服务器上执行函数并传递参数和接收返回值。我只是想知道还有什么其他协议可以做到这一点？以更简单的方式？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T02:16:49.843

一个 CORBA 客户与一个 CORBA 服务对话——你希望他们怎么讲其他的东西？

您想使用什么 CORBA 功能？

您是否已经拥有此客户端和服务器，或者您只是在考虑如何实现它们？

一旦你有了 IDL，我不明白为什么实施如此困难。您将使用工具来帮助完成其余的工作。无论协议如何，管理都会很困难。你想象什么会更简单？

我会考虑为基于 HTTP 的协议放弃 CORBA。CORBA 几乎消失是有原因的——简单而公开的胜利。基于 HTTP 的服务可以用您选择的语言（Java、C# 或其他语言）实现，并且可以与任何可以建立 HTTP 连接的客户端进行通信。如果您仍处于设计阶段，这是值得的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-18T09:54:11.267

这个话题很老，但我会尽力给我两分钱。

CORBA 是用于开发分布式对象计算中间件的标准中间件架构。因此，对象是系统的原语。在高级视图中，客户端调用位于另一台计算机（服务器）上的对象上的方法，并获得结果，就好像该对象位于客户端本身上一样。换句话说，它是一种执行 RPC 的方法。

从底层的角度来看，当在客户端调用方法时，它会将所有参数以及许多其他字段放在消息上，这些字段将用于识别服务器上的对象。这条消息被发送到服务器，服务器读取消息并调用指定对象的方法。方法结果被放置在发送回客户端的消息中。

使用 CORBA 的 GIOP 协议（​​消息格式）可以完成的工作，也可以使用 HTTP 协议使用 RESTful 方法完成。同样，您可以创建一个客户端，将所有方法参数放在 HTTP POST 消息（或 GET 消息，具体取决于您打算做什么）上，将该消息发送到 HTTP 服务器，该服务器将消息传递给服务，该服务评估您的请求并返回一个响应，该响应封装在 HTTP 响应中，然后发送回客户端。

尽管分布式对象和 RESTful 服务之间存在概念上的差异，但两者都做同样的事情：客户端-服务器通信。两者之间的区别在于通信是如何完成的。CORBA 使用 IDL（接口描述语言的缩写）。此 IDL 描述了对象接口，包括所有可用的方法、作为参数传递或作为响应返回的数据类型和其他内容。然后使用此 IDL 生成可以与您的代码一起编译的存根。这些存根处理所有讨厌的消息序列化和通信代码。

然而，RESTful 服务不使用 IDL。因为 HTTP 是一个简单的协议，所以有大量的开源 http 客户端库可用于封装消息参数和调用 RESTful 服务，适用于许多不同的语言（Java、C++、C#、Python、Ruby、Lua、Erlang、哈斯克尔，计划，...）

基于 IDL 的方法的缺点是，每次对象接口更改时，您都必须为所有客户端重新生成 Stub，如果这样做太多，可能会令人头疼。这种方法声称的优点是您可以对消息进行基于编译器的静态检查。

关于替代方案，如今还有许多其他 RPC 风格的通信协议。SOAP 是一个非常著名的替代方案，与 CORBA 相比，许多人更喜欢使用它。其他开源 RPC 协议包括 Google 的 Protocol Buffers、Apache Thrift、Apache Avro 和 Message Pack。

好吧，你应该学习很多关于 RPC 和分布式系统的知识，以便对这些主题有更多的了解。我希望我能有所启发。

# javascript - 在javascript中解析十六进制文字

> ID：10326309
> 
> 赞同：2
> 
> 时间：2012-04-26T02:07:05.027
> 
> 标签：javascript, parsing, hex

嘿大家快速提问，我知道这在 javascript 中听起来很奇怪，但我有很好的用途。我需要能够解析在 textarea 中传递的字符串，以便转义十六进制文字“\x41”或任何不作为四个字符 '\' 'x' '4' '1' 而是作为 'A' 处理的内容例如：

```
var anA = "\x41";
console.log(anA); //emits "A"
var stringToParse = $(#someTextArea).val(); //using jquery for ease not a req
//lets say that "someTextArea" contains "\x41"
console.log(stringToParse); // equals "\" "x" "4" "1" -- not what i want
console.log(new String(stringToParse)); same as last
console.log(""+stringToParse); still doesnt work
console.log(stringToParse.toString()); failz all over (same result) 
```

我希望能够有一种方法让 stringToParse 包含“A”而不是“\x41”......除了正则表达式之外还有什么想法吗？我想我会用一个正则表达式，我只是想要一种让javascript做我的投标的方法:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T02:13:15.567

```
String.prototype.parseHex = function(){
    return this.replace(/\\x([a-fA-F0-9]{2})/g, function(a,b){
        return String.fromCharCode(parseInt(b,16));
    });
}; 
```

在实践中：

```
var v = $('#foo').val();
console.log(v);
console.log(v.parseHex()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T02:26:03.620

我想通了，尽管它有点老套，我使用 eval :(...如果有人有更好的方法，请告诉我：

```
stringToParse = stringToParse.toSource().replace("\\x", "\x");
stringToParse = eval(stringToParse);
console.log(stringToParse); 
```

主要是我需要这个来解析混合字符串......就像在混合了十六进制的字符串文字中一样

# iphone - 设置委托对象中的委托方法没有响应

> ID：10326311
> 
> 赞同：0
> 
> 时间：2012-04-26T02:07:25.953
> 
> 标签：iphone, ios, xcode, delegates, uitableview

我对这个问题有一些类似的担忧，[即 didSelectRowAtIndexPath 中的自定义委托方法](https://stackoverflow.com/questions/5067769/a-custom-delegate-method-inside-didselectrowatindexpath)。

但是，在我的情况下，在访问名为 BarCodeViewController 的 UIViewController 的委托对象之前，我应该首先从初始视图控制器中传递 2 个视图控制器，即 CardViewController，它是一个表视图控制器。我正在通过以下方式为我的自定义委托设置委托对象：

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    CardDetailsViewController *details = [self.storyboard instantiateViewControllerWithIdentifier:@"cardDetails"];

    Card *selectedCard = [self.myWallet objectAtIndex:indexPath.row]; // I want this selected card to be accessible until the user clicks another card or during end of program.

    [self.navigationController pushViewController:details animated:YES];

    [self.delegate cardWalletViewController:self withCurrentCard:selectedCard];

    [self setDelegate:self.barCodeVC]; // barCodeVC is declared in CardWalletViewController.h as @property (nonatomic, strong) BarCodeViewController *barCodeVC;

    if (self.delegate) {
        NSLog(@"delegate is not nil");
    }

} 
```

这就是我实例化设置为委托对象的视图控制器的方式

```
- (void)viewDidLoad
{
    [self setBarCodeVC:[self.storyboard instantiateViewControllerWithIdentifier:@"myBarcodeVC"]];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

在我的委托对象中，即 BarCodeViewController 我实现了委托方法

```
#import "CardWalletViewController.h"
@interface BarCodeViewController () <CardWalletDelegate>

@end

@implementation

- (void)cardWalletViewController:(CardWalletViewController *)sender withCurrentCard:(Card *)currentCard 
{
    Card *myCurrentCard = currentCard;

    NSLog(@"This is my current card: %@", myCurrentCard);
}

@end 
```

我想我可以设置我的委托对象，但是委托方法没有被实现，因为我在控制台中没有看到 NSLog(@"this is my current......"); 当我到达 BarCodeViewController 时。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:23:38.833

这不是委托的标准用法，很难说出你真正想要发生的事情。但是，它看起来像你的代码......

```
[self.delegate cardWalletViewController:self withCurrentCard:selectedCard];
[self setDelegate:self.barCodeVC]; 
```

正在调用任何“旧”委托（在将其设置为 barCodeVC 之前）。你真的想打电话给“新”代表吗？是不是应该...

```
[self setDelegate:self.barCodeVC];
[self.delegate cardWalletViewController:self withCurrentCard:selectedCard]; 
```

**编辑**

我的意思是您正在向这一行的代表发送消息......

```
[self.delegate cardWalletViewController:self withCurrentCard:selectedCard]; 
```

然后你将委托设置为 barCodeVC

```
[self setDelegate:self.barCodeVC]; 
```

因此，消息实际上被发送到代理设置为 barCodeVC 之前设置的任何位置（另一个视图控制器，或 nil，或...）。也许这就是你想要发生的事情，但它看起来很可疑。

# jquery-mobile - jQuery Mobile + PhoneGap 一个 href 和 javascript 源码

> ID：10326312
> 
> 赞同：1
> 
> 时间：2012-04-26T02:07:33.333
> 
> 标签：jquery-mobile, cordova

我有这个 index.html 和 login.html，我使用 href 从索引链接到登录。并在每个 index.html 和 login.html 中导入 javascript。但是，似乎只有那些来自正在加载的 index.html。所以如果我将js放在login.html的index.html中，它工作正常。但是然后，我们将它分开放置（login.html 的另一个 js 不在 index.html 中），它不起作用

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T08:58:01.970

当 JQM(jQuery mobile) 加载页面时，它使用 ajax 来完成此操作。发生这种情况时，该部分中的所有代码都将`<head>`被忽略。JQM 查找 data-role="page" 部分并将其插入到与 index.html 相同的 dom 中。因此，当您在 index.html 页面中添加 js 时，基本上您是在以正确的方式进行操作。

如果您想划分您的 js 代码以适用于某些页面，请使用以下示例：

```
$(document).on('pageinit', '#page1', function(){
    // code for #page1
});
$(document).on('pageinit', '#page2', function(){
    // code for #page2
});
$(document).on('pageinit', '[data-role=page]', function(){
    // this code will execute for every page that is data-role="page"
}); 
```

因此，继续将所有代码放在一个文件中。将您的代码拆分为上述适当的页面，并将其包含在您的 index.html 文件中。

此外，如果您将 JQM 版本 1.0.1 与 jQuery 版本 1.6.4（推荐使用 1.0.1）一起使用，请使用 .delegate() 而不是 .on()。IE

```
$(document).delegate('#page1', 'pageinit', function(){  // notice that pageinit and #page1 are switched around for delegate
    // code for #page1
});  // interesting to note that if you use delegate in jQuery 1.7.x it actually just calls the .on() method. 
```

**注意**如果您正在制作一个 Web 应用程序而不是 phonegap 应用程序，那么您最好将您的 javascript 放在一个文件中并将其包含在每个页面中。这样，如果有人关注链接或为您的页面添加书签，他们仍将获得所需的正确 javascript 文件。

无论如何，我希望对您有所帮助。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:17:16.990

请发布您的代码，特别是页面如何相互链接，以及您为应用程序设置的全局配置设置（如果有）。与 jQM 一样，页面架构支持多种实践和策略。

您还可以使用桌面浏览器工具进行学习，并查看“资源”以了解您的资源是在什么时候加载的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:59:32.377

如果您正在执行此操作，`window.location.href`那么它将加载新的 HTML（在您的情况下是 login.html）。如果您使用这种方法，那么您必须再次重新加载所有脚本，从而将这些脚本添加到所有 .html 页面中。

```
<script src="cordova-1.6.0.js" type="text/javascript"></script> 
<script type="text/javascript" src="jquery/jquery-1.7.1.min.js"></script>
<link rel="stylesheet" href="jquerymobile/jquery.mobile-1.1.0.min.css" />
<script type="text/javascript" src="jquerymobile/jquery.mobile-1.1.0.min.js"></script> 
```

但是，如果您使用@deadlock 推荐的方法，那么您只需要加载脚本一次。后一种方法是最好的方法。

# php - 如何为 stripos 做 OR 语句？

> ID：10326315
> 
> 赞同：-1
> 
> 时间：2012-04-26T02:07:55.360
> 
> 标签：php, security, validation

如何在下面的同一代码段中添加另一个条件？我需要添加一个“OR”条件，其中 $variable = $variable？

```
 if ( stripos($userallowed, $sid) !== false ) {
 echo("allowed");
 } else {
 echo("not allowed");
 die();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:27:12.943

```
if ( stripos($userallowed, $sid) !== false OR $variable == $variable ) 
```

# mysql - MySQL 的 Rails 迁移排序规则

> ID：10326316
> 
> 赞同：2
> 
> 时间：2012-04-26T02:08:17.003
> 
> 标签：mysql, ruby-on-rails, migration, collation

我刚刚注意到我最近的迁移创建了带有 latin1_swedish_ci 而不是 utf8_unicode_ci 排序规则的表。它用于创建 utf8_unicode_ci。我的 database.yml 具有编码：utf8，我假设我创建的所有表都将具有 utf8。

我的开发机器工作正常，但我在共享主机上的生产存在这个问题。

为什么会这样？

谢谢。

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:10:32.707

您可以使用这些选项强制迁移`TYPE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci`以选择编码，或更改 mysql 服务器的默认字符集。

# c# - 查找特定项目的 BindingSource 索引

> ID：10326320
> 
> 赞同：0
> 
> 时间：2012-04-26T02:09:20.977
> 
> 标签：c#, database

基本上，我想要实现的是设置 BindingSource 的位置，以指向主键是一些预先计算的值的行。

例子：

我有一个存储类的数据库表。DataGridView 绑定到该表的绑定源。用户从组合框中选择一个类名，系统查找哪一行具有选定的类名，并且绑定源位置设置为绑定源中该行的索引。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T07:18:41.977

```
BindingSource.Position = BindingSource.Find("CLASS_NAME", value); 
```

其中 CLASS_NAME 是在 db 中存储类名的列的名称，value 是您要搜索的值。希望有帮助

# regex - 正则表达式基础 URL 抓取

> ID：10326322
> 
> 赞同：0
> 
> 时间：2012-04-26T02:09:44.727
> 
> 标签：regex

我正在尝试过滤掉一堆 url 以找到它们的基本 url，其中不包括 www 或任何前缀，在编写表达式来捕获它时遇到了麻烦，但是对于 TLD 的子集，它变成了一个相当复杂的问题.

```
answers.yahoo.com => yahoo.com
www.google.com => google.com
uk.answers.yahoo.co.uk = > yahoo.co.uk
www.g.se => g.se 
```

有什么建议么？

我正在使用这个表达式，但是当域名不超过 2 个字符或域 tld 少于 2 个字符时，它会出错。

```
(?P<domain>[a-z0-9][a-z0-9\-]{1,63}\.[a-z\.]{2,6})$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:12:28.660

您怎么知道 uk.answers.yahoo.co.uk 的基础是 yahoo.co.uk，但例如 foo.bar.maps.google.com 的基础不是 maps.google.com？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T02:15:19.170

```
[^\.]*\.(?:co.uk|\w{2,3})$ 
```

您需要在正则表达式中添加已知域。

[http://regexr.com?30p4r](http://regexr.com?30p4r)

# mysql - 从具有多个属性的选择查询中获取奇异投影

> ID：10326324
> 
> 赞同：0
> 
> 时间：2012-04-26T02:10:41.803
> 
> 标签：mysql, sql

我正在尝试编写一个查询，该查询将对`update_winnerlist`已经 GROUPed BY的视图执行以下操作`item_index`：

```
SELECT email_id
(SELECT email_id, MIN(bid_amount)
   FROM update_winnerslist AS a1
  WHERE a1.item_index = 10 ) 
```

我需要在单个查询中执行上述操作，因为我在触发器中使用它来更新表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:16:30.220

```
select top 1 email_id from update_winnerslist
 where item_index = 10 order by bid_amount desc 
```

# python - tkinter LabelFrame 未附加小部件

> ID：10326330
> 
> 赞同：1
> 
> 时间：2012-04-26T02:11:48.050
> 
> 标签：python, tkinter, python-2.7

我遇到了一个 tkinter 程序的问题，我有 LabelFrame 对一组标签和条目进行分组，但是，它没有对我的小部件进行分组。我的 LabelFrame 代码如下：

（编辑：我设法让标签显示，但是，它没有对我的小部件进行分组。）

```
root=Tk()
message_frame=LabelFrame(root,text="testing",padx=0,pady=0,width=100,height=100).grid(padx=5,pady=10)

message_label=Label(message_frame,text="Message").grid(row=1,column=0,sticky=W)
pub_label=Label(message_frame,text="Public Key").grid(row=2,column=0,sticky=W)
priv_label=Label(message_frame,text="Public Key").grid(row=3,column=0,sticky=W)

message_entry=Entry(message_frame,textvariable=message,width=50).grid(row=1,column=1,sticky=W)
pub_entry=Entry(message_frame,textvariable=pub_key,width=50).grid(row=2,column=1,sticky=W)
priv_entry=Entry(message_frame,textvariable=private_key,width=50).grid(row=3,column=1,sticky=W) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:40:03.113

给框架一些尺寸属性：

```
from Tkinter import *
root = Tk()  
message_frame = LabelFrame(root,text="testing",padx=0,pady=0,width=100,height=100).grid(row=0,column=0,padx=5,pady=10) 
```

一旦定义了宽度和高度，框架就会很好地显示出来。如果您发布一些框架的内容，如果这不是问题，它可能会更清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T03:20:45.683

在 Tkinter 中，典型的工作流程是创建一个小部件，然后使用一些几何管理器将其放置***在两条单独的行上***。

如果我没记错的话，`.grid`Tkinter 小部件上的方法返回`None`. 因此，如果您`print message_frame`在创建它之后立即看到它，您可能会看到它是`None`. 当您使用传递给下一个小部件时，他们假设您要将其放在根小部件上......

简单的解决方法是执行以下操作：

```
message_frame=LabelFrame(root,text="testing",padx=0,pady=0,width=100,height=100)
message_frame.grid(row=0,column=0) 
```

你可能想对所有小部件做同样的事情，因为我怀疑你真的想要`pub_label`= `priv_label`= `None`...

# hex - 检测 exe 32/64bit

> ID：10326331
> 
> 赞同：1
> 
> 时间：2012-04-26T02:11:54.583
> 
> 标签：hex, 32bit-64bit

如何手动[没有任何额外的脚本/程序]查看 Windows 可执行文件是否为 32/64 位？

我一直在环顾四周，发现应该是我的答案。据我了解，在 60 字节处，下面的数字应该会出现。

I386 0x014c

IA64 0x0200

AMD64 0x8664

* * *

* * *

## **编辑**

跳转到PE偏移后，还是没有看到机器类型。我做了一个查找并没有看到任何匹配项[除非由于某种原因它接近底部]。64 86 06 00 不在上面的列表中，所以我不知道我做错了什么。

```
 Notepad.exe (64bit)

4D 5A 90 00 03 00 00 00 04 00 00 00 FF FF 00 00
B8 00 00 00 00 00 00 00 40 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 E8 00 00 00
0E 1F BA 0E 00 B4 09 CD 21 B8 01 4C CD 21 54 68
69 73 20 70 72 6F 67 72 61 6D 20 63 61 6E 6E 6F
74 20 62 65 20 72 75 6E 20 69 6E 20 44 4F 53 20
6D 6F 64 65 2E 0D 0D 0A 24 00 00 00 00 00 00 00
83 C2 32 29 C7 A3 5C 7A C7 A3 5C 7A C7 A3 5C 7A
CE DB D8 7A C6 A3 5C 7A CE DB C9 7A C5 A3 5C 7A
CE DB CF 7A DA A3 5C 7A C7 A3 5D 7A 33 A3 5C 7A
CE DB DF 7A D3 A3 5C 7A CE DB D5 7A CC A3 5C 7A
CE DB C8 7A C6 A3 5C 7A CE DB CD 7A C6 A3 5C 7A
52 69 63 68 C7 A3 5C 7A 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 50 45 00 00 64 86 06 00 <--
B3 C9 5B 4A 00 00 00 00 00 00 00 00 F0 00 22 00
0B 02 09 00 00 A8 00 00 00 58 02 00 00 00 00 00
70 35 00 00 00 10 00 00 00 00 00 00 01 00 00 00
00 10 00 00 00 02 00 00 06 00 01 00 06 00 01 00
06 00 01 00 00 00 00 00 00 50 03 00 00 06 00 00
49 E7 03 00 02 00 40 81 00 00 08 00 00 00 00 00
00 10 01 00 00 00 00 00 00 00 10 00 00 00 00 00
00 10 00 00 00 00 00 00 00 00 00 00 10 00 00 00
00 00 00 00 00 00 00 00 F8 CF 00 00 2C 01 00 00
00 40 01 00 60 F1 01 00 00 30 01 00 B4 06 00 00
00 00 00 00 00 00 00 00 00 40 03 00 B8 00 00 00
10 B7 00 00 38 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 E0 02 00 00 38 01 00 00
00 C0 00 00 F0 07 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
2E 74 65 78 74 00 00 00 70 A7 00 00 00 10 00 00
00 A8 00 00 00 06 00 00 00 00 00 00 00 00 00 00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:31:09.813

出现的 60 字节不是机器类型，而是 PE 标头的偏移量。（在本例中，0x00000100：256 字节。）PE 标头开始：'P'、'E'、00、00。之后是机器类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T03:28:12.983

OMG想通了。列出 AMD64 0x86 64 的代码匹配“64 86”。我从来没有意识到它被翻转了。

# sql - 使用带有 select & group by 子句的聚合函数的案例

> ID：10326334
> 
> 赞同：1
> 
> 时间：2012-04-26T02:12:19.057
> 
> 标签：sql, oracle

我有下表

```
ID    TYPE    
---   ----    
1     P    
1     W    
2     P    
3     W    
4     W    
4     X    
5     P    
6     null 
```

我需要创建一个新表，如下所示

```
ID   Count of Type      Code    
--  --------------     -------    
1        2             null    
2        1             P      
3        1             W    
4        2             null    
5        1             P    
6        0             null    

1st col ---> ID    
2nd col ---> count of "type" for an ID    
3rd col ---> if count(type) = 1 then TYPE      
             else null 
```

请帮助我编写 ORACLE SQL 查询

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T02:18:17.953

您可以使用带有 max 函数的子查询来获取代码的值，然后在 case 语句中使用它来仅在 count=1 时在最终查询中获取值。

```
select id, cnt, case when cnt=1 then maxtype else null end as code
from 
(select id, count(*) as cnt, max(type) as maxtype
from t1
group by id) t2 
```

# emacs - 如何在默认自动保存目录的“重定向”中包含 Emacs '.#' 崩溃恢复文件/符号链接？

> ID：10326339
> 
> 赞同：2
> 
> 时间：2012-04-26T02:12:44.143
> 
> 标签：emacs, autosave

目前，我可以使用下面的代码将 Emacs 备份文件（以“~”结尾的文件和以“#”开头的文件）重定向到一个中心位置（它也很好地重命名它们，在文件名中编码文件路径（例如，`~/tmp/emacs_autosaves/#!home!cbalz!.bashrc#`)。

但是如何保留该代码中的功能，同时移动 Emacs 生成的以 '.#' 开头的文件（那些通常或总是符号链接）？

当前工作代码 - 需要修改或扩充以使用以 '.#' 开头的文件/符号链接：

```
(defvar autosave-dir
 (concat "~/tmp/emacs_autosaves/" (user-login-name) "/"))
(make-directory autosave-dir t)
(setq auto-save-file-name-transforms `(("\\(?:[^/]*/\\)*\\(.*\\)" ,(concat
      autosave-dir "\\1") t)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T02:54:02.463

dot-hash-files 由 Emacs 创建为一个锁，以避免文件的并发修改。不幸的是，[文档](http://www.gnu.org/software/emacs/manual/html_node/elisp/File-Locks.html)没有提到更改这些文件的默认位置的可能性：

> 文件锁实际上是一个文件，一个具有特殊名称的符号链接，存储在与您正在编辑的文件相同的目录中。

# java - 查看 Jasper 报告时出现异常“java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter”

> ID：10326343
> 
> 赞同：4
> 
> 时间：2012-04-26T02:13:25.580
> 
> 标签：java, swing, jasper-reports

我正在使用 Jasper Reports 并在我的类路径中使用以下库

```
jasperreports-4.5.1.jar
common-digester3-3.2.jar
common-digester2.1.jar
castor-1.2.jar
commons-beanutils-1.8..0.jar
commons-collections-2.1.1.jar
commons-logging-1.1.1.jar
groovy-1.2.6.jar
asm-2.2.3.jar
asm-3.1.jar
asm-all-3.1.jar
antlr-3.3.1.1.jar
jtds-1.2.5.jar 
```

我得到了以下异常

```
Exception in thread "AWT-EventQueue-0" java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(I)V
at org.codehaus.groovy.control.CompilationUnit.createClassVisitor(CompilationUnit.java:791)
at org.codehaus.groovy.control.CompilationUnit$14.call(CompilationUnit.java:755)
at org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:967)
at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:546)
at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:524)
at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:501)
at net.sf.jasperreports.compilers.JRGroovyCompiler.compileUnits(JRGroovyCompiler.java:96)
at net.sf.jasperreports.engine.design.JRAbstractCompiler.compileReport(JRAbstractCompiler.java:188)
at net.sf.jasperreports.engine.JasperCompileManager.compileReport(JasperCompileManager.java:212)
at Utilities.ReportDriver.runReport(ReportDriver.java:81)
at jewelleryerpapplication.GUI.MainReports.jbtnViewReportActionPerformed(MainReports.java:544)
at jewelleryerpapplication.GUI.MainReports.access$100(MainReports.java:18)
at jewelleryerpapplication.GUI.MainReports$2.actionPerformed(MainReports.java:210)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505) 
```

在执行以下代码时：

```
 JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, param, jdbcConnection);
 JasperViewer.viewReport(jasperPrint); 
```

我做错了什么？我该如何解决这个问题或进一步调试它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T02:41:40.003

请注意，您列出了两个不同版本的 ASM。这是该库的一个非常常见的问题，因为许多其他库在后台使用它，并且因为 Java 的类路径机制不允许使用同一库的不同版本。（这种情况在 Groovy 和 Hibernate 之间一直发生。）因此，当您设置类路径时，一个库需要 2.2.3 版本，一个需要 3.1。但是，在查找类时，类路径中的第一个获胜。在您的情况下，Groovy 试图调用 ClassWriter 上的构造函数，该构造函数在任何版本中都不存在（2.2.3，如果您按实际的类路径顺序列出它们）。当您遇到这种需要不同版本的情况时，您所能做的就是选择一个版本并交叉手指。试试看它是否适用于您需要的任何地方。如果您使用较新的 ASM 版本 (3.1)，很可能一切都会好起来的。反正这是我的经验。如果您找不到适用于所有内容的版本，您可能会遇到一个大问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:19:18.950

我有一个类似的错误信息。它不依赖于 ASM，而是依赖于使用的 groovy 库 groovy-xxxjar。当心 - 您必须使用 groovy-all-xxxjar 才能完成这项工作。

# android - 自定义 ListView 适配器以更改某些项目

> ID：10326345
> 
> 赞同：1
> 
> 时间：2012-04-26T02:13:39.577
> 
> 标签：android, listview, baseadapter

我为 Android 编写了一个自定义 ListView 适配器来更改数据的视觉方面。当我加载我的 ListView 时，所需项目的外观发生了变化。当我滚动视图时，其他项目将随机更改，直到最终列表中的每个项目都修改了其外观。

根据我在 SO 上阅读的有关此类代码的内容，我知道`position`in 中的字段
`public View getView(int position, View convertView, ViewGroup parent)`
不一定映射到我的数据结构，因为 Android 会重用旧视图。这似乎是我正在努力解决的行为。

正如 Vincent 建议的那样，使用 ViewHolder 模式更新了 getView 方法：

```
@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View rowView = convertView;
    if (rowView == null)
    {
        LayoutInflater inflater = LayoutInflater.from(context);
        rowView = inflater.inflate(R.layout.rowlayout, null);
        ViewHolder viewHolder = new ViewHolder();
        viewHolder.text = (TextView) rowView.findViewById(R.id.tv01);
        rowView.setTag(viewHolder);
    }

    ViewHolder holder = (ViewHolder) rowView.getTag();
    String s = names[position];
    holder.text.setText(s);
    if (s.startsWith("a"))
    {
        holder.text.setTextColor(0xff00ffff);
    }

    return rowView;
} 
```

我需要修改的项目是静态的，所以如果有比在运行时更改它们更好的方法，那也可以！任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:27:09.350

您的布局正在被android重用，这就是您获得此输出的原因。您需要做的是拥有一个类，该类将充当每个视图的静态视图并将其用作标签。请参阅[this](https://stackoverflow.com/a/10162100/1075066)以供参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T19:17:08.920

您没有修改现有视图。如果 convertView 不为 null，则意味着 Android 正在回收视图而不是对其进行膨胀，但您仍然必须使用新值对其进行更新。像这样的东西会起作用：

```
public View getView(int position, View convertView, ViewGroup parent) {
ViewHolder holder;          

if(convertView == null) {
    convertView = mInflater.inflate(R.layout.rowlayout, null);
    holder = new ViewHolder();  
}
else {
    holder = (ViewHolder) convertView.getTag();
}
holder.title = (TextView) convertView.findViewById(R.id.tv01); 
convertView.setTag(holder);

return convertView; 
```

}

# php - 如何在“单个”foreach() 循环中使用多个数组

> ID：10326346
> 
> 赞同：2
> 
> 时间：2012-04-26T02:13:43.850
> 
> 标签：php, arrays, foreach, echo

我正在尝试使用单个 foreach 循环生成 url 来回显两个数组的所有变量。一些编码示例将受到尊重。

到目前为止我有这个：

```
<?php
foreach($menu_names as $menu_name){
echo "<li><a href='?subj= " .urlencode($subjects["id"]). " '>".$menu_name."</a></li>";
}
?> 
```

我想在这个循环中再添加一个数组

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T02:30:25.817

假设您在这两个数组中有相同数量的项目。

如果要使用`foreach()`，则数组需要具有相同的索引：

```
foreach ($a as $index => $value)
{
    echo $a[$index] .' '. $b[$index];
} 
```

如果数组有数字索引，你可以使用`for()`：

```
for ($i = 0; $i < sizeof($a); $i++)
{
    echo $a[$i] .' '. $b[$i];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-20T10:03:07.190

`array_combine()`会将您的 2 个数`key=>value`组合并为一个数组，然后通过 foreach 语句访问它们，例如

```
foreach(array_combine($a,$b) as $key=>$value) {
    echo $key."<br/>".$value;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T02:22:35.907

答案取决于您*究竟*需要对数组做什么以及您需要如何去做。

如果您的数组具有相似的索引，并且您需要使用每个数组中的相同元素，您可以这样做

```
foreach ($array1 as $index => $value1) {
    $value2 = $array2[$index];
    // do stuff with $value1 and $value2 here
} 
```

（虽然在这种情况下，特别是如果您发现自己经常这样做，您可能需要考虑使用对象或数组的单个数组，以便数据始终在一起并且更容易连接。）

或者，如果数组中包含相同类型的元素，并且您想按顺序遍历两者，则可以遍历`array_merge($array1, $array2)`. （但是，如果数组没有数字索引，特别是如果它们具有相同的字符串键，则数组的一个元素可以替换另一个。有关详细信息，请参阅[文档`array_merge`](http://php.net/manual/en/function.array-merge.php)。）

还有很多其他的可能性，这取决于您需要元素的方式。（这个问题确实没有提供任何信息。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T09:09:17.660

完整代码：

1)

```
<?php
$First = array('a', 'b', 'c', 'd');
$Second = array('1', '2', '3', '4');

foreach($First as $indx => $value) {
    echo $First[$indx].$Second[$indx];
    echo "<br />";
}
?> 
```

或 2)

```
<?php
$First = array('a', 'b', 'c', 'd');
$Second = array('1', '2', '3', '4');

for ($indx = 0 ; $indx < count($First); $indx ++) {
  echo $First[$indx] . $Second[$indx];
  echo "<br />";
}
?> 
```

# javascript - 您如何在 Meteor 中存储特定于客户端的数据服务器端？

> ID：10326347
> 
> 赞同：16
> 
> 时间：2012-04-26T02:13:51.367
> 
> 标签：javascript, session, meteor

Express 实现了一个服务器端会话对象，可让您存储特定于客户端的数据。你会如何在 Meteor 中做同样的事情？

strack 推荐使用一个集合。如果集合中对象的 id 是在连接对象上同时在服务器端和客户端公开的 session_ids，这将起作用。

看来客户端和服务器通过客户端上的 LivedataConnection 共享一个 session_id：

```
if (typeof (msg.session) === "string") {
  var reconnected = (self.last_session_id === msg.session);
  self.last_session_id = msg.session;
} 
```

和服务器上的 LivedataSession 对象：

```
self.id = Meteor.uuid(); 
```

但是 Meteor API 并没有公开这些对象。访问会话信息的正确方法是什么？

如果客户端的 Session 对象与客户端唯一的服务器端 Session 对象同步，可以从 Meteor#publish 和 Meteor#methods 访问，那将非常方便。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-28T09:13:36.307

我为 Meteor 编写的[用户会话智能包](https://github.com/BenjaminRH/meteor-user-session)正是为此而设计的。它提供了 Meteor `Session`API 的所有方法（除了`setDefault`），以及一些额外的方法。它是被动的，所有的变化都是持久的。最重要的是，它既可以在客户端使用，也可以在带有附加`userId`参数的服务器上使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-22T14:58:27.697

如果您愿意使用 Meteor 的 Auth 分支，这就是我添加一些注释所做的。我不喜欢乔希的回答，因为我不信任客户！他们说谎。

在这个例子中，我们会说每个用户都有一个魔法对象。我们拒绝使用用户可以操纵客户端的任何信息（即会话变量）。

在服务器上：

```
//Create our database
MagicalObjects = new Meteor.Collection("magicalObjects");

// Publish the magical object for the client
Meteor.publish("get-the-magical-object", function () {

//In the auth branch, server and client have access to this.userId
//And there is also a collection of users server side

var uid =  this.userId();
//I make sure that when I make this connection, I've created a magical object 
//for each user. 

//Let's assume this adds a parameter to magical object for the userId
//it's linked to (i.e. magObject.uid = ~user id~ )

//we grab our current user from the users database, and pass to our function
checkUserHasMagicalItem(Meteor.users.findOne({_id: uid}));

var self = this;
console.log('Writing publish');
console.log('uid: ' + this.userId());

var magicalObject = MagicalObjects.findOne({uid: uid});

//Now, I want to know if the magical object is changed -- and update accordingly 
//with its changes -- you might not need this part

//If you don't- then just uncomment these two lines, ignore the rest
//self.set("magicObject", uid, {magicalobject: magicalObject});
//self.flush();

//Here, we're going to watch anything that happens to our magical object
//that's tied to our user
var handle = MagicalObjects.find({uid: uid}).observe({
    added: function(doc, idx)
    {       
    //get the latest version of our object
    magicalObject = MagicalObjects.findOne({uid: uid});
    console.log('added object');
    //now we set this server side
    self.set("magicObject", uid, {magicalobject: magicalObject});
    self.flush();   
    },
     //I'm not concerned about removing, but
    //we do care if it is changed
    changed: function(newDoc, idx, oldDoc)
    {
    console.log('changed object');
    magicalObject = MagicalObjects.findOne({uid: uid});
    self.set("magicObject", uid, {magicalobject: magicalObject});
    self.flush();           
    }       
//end observe

});

//for when the player disconnects
self.onStop(function() {

    console.log('Stopping');
    handle.stop();

//end onStop
});

//end publish
}); 
```

在客户端：

```
//this is the name of our collection client side
MagicalObject = new Meteor.Collection("magicObject");

//notice the name is equal to whatever string you use when you call
//self.set on the server

//notice, this is the name equal to whatever string you use when you
//call Meteor.publish on the server
Meteor.subscribe("get-the-magical-object"); 
```

然后，当你想去拿你的魔法物品时：

```
var magicObject = MagicalObject.findOne().magicalobject; 
```

请注意，.magicalobject 不是拼写错误，它是我们在 self.set 中使用的参数——{magicalobject: magicObject}。

我为冗长的回答道歉。但要快速总结一下：我们做了什么？

在服务器上，我们有一个客户端无法访问的 MagicalObjects 集合。相反，我们从魔法对象中发布一个对象——我们称之为“magicalObject”。根据我们的设置，每个对象都属于一个用户。因此，它是操作请求的用户特定对象。

客户端创建一个集合（其名称为“magicalObject”），然后在服务器数据库中的实际数据发生变化时发送数据。这个集合在设计上只有一个对象，但该对象可以有许多参数（例如magicObject.kazoo 或magicObject.isHarryPotter），或者您可以存储许多不同的对象（例如nonMagicItem）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T01:29:44.170

我认为这样做的“流星”方式是：

在服务器端创建并发布 ClientSession 集合

```
UserSession = new Meteor.Collection("user_sessions");

Meteor.publish('user_sessions', function (user) {

    return UserSession.find(user);    
}); 
```

在客户端

```
Session.set('user_id', 42);

UserSession = new Meteor.Collection("user_sessions");
Meteor.subscribe('user_sessions', Session.get('user_id')); 
```

您现在有一个特定于该用户的应用程序级 UserSession 对象，您可以放置​​/获取内容。

此外，您可以使用 Meteor#methods 操作服务器上的 UserSession 集合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-17T10:51:17.230

需要注意的一件事是，UserSession 不适用于尚未在客户端登录的用户。我遇到了这种情况，因为我想在保存到 MongoDB 之前修改创建新用户的数据对象。修改是添加从当前页面的 URL 路径获取的属性/字段（使用 Iron Route 客户端路由）。但是我收到了这个错误，

“当没有用户登录时，您不能使用 UserSession 方法。”

因此，如果您的用例仅限于在客户端和服务器之间为登录用户共享数据，那么 UserSession 包似乎可以完成这项工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-24T13:28:01.370

会话的行为与集合略有不同。如果您真的在寻找基于会话的解决方案，当然可以使用 Session.set() 方法设置您的值，并在需要时使用 Session.get() 检索它们。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-26T16:31:09.190

我认为这就是`Session`流星的用途——存储客户端所需的信息。

如果您需要将某些内容传递给服务器，也许将其放入 Meteor 集合中？：

```
Cookies = new Meteor.collection("cookies") 
```

否则，只需使用[Session](http://docs.meteor.com/#session)。

# java - 使用jsp表单向servlet发送字符串——在jsp中使用setAttribute，在servlet中使用getAttribute

> ID：10326348
> 
> 赞同：3
> 
> 时间：2012-04-26T02:13:55.143
> 
> 标签：java, jsp, servlets, setattribute, getattribute

我正在尝试从 jsp 表单发送数据并调用 servlet 并在 servlet 中显示该数据。

我想使用 setAttribute 和 getAttribute。

在这个 jsp 文件中，我使用了 setAttribute：

```
<HTML>
<HEAD>
    <TITLE>
        Multi Processor
    </TITLE>
</HEAD>
<BODY>
    <h4>This is a form submitted via POST:</h4>
    <FORM action = "/MyWebArchive/MulitProcessorServlet" method = "POST">
        Enter your name: <INPUT type="TEXT" name="name"/>
        <BR/>
        <INPUT type="submit"/>
    </FORM> 
    <BR/>
    <h4>This is a form submitted via GET:</h4>
    <FORM action = "/Week05WebArchive/MulitProcessorServlet">
        Enter your name: <INPUT type="TEXT" name="name"/>
        <BR/>
        <INPUT type="submit"/>
    </FORM>
</BODY>
<%
String strMasjidLocation = "Selimiyie Masjid Methuen";
session.setAttribute("MasjidLocation", strMasjidLocation);
%>

</HTML> 
```

这是我想使用 getAttribute 但我不知道如何使用 GetAttribute 的 servlet。你能告诉我我需要向 servlet 添加哪些额外代码，以便我可以从 setAttribute 中捕获值吗？

```
package temp22;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.Locale;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class MulitProcessorServlet
 */
public class MulitProcessorServlet extends HttpServlet {

public void doGet(HttpServletRequest req, HttpServletResponse res)
        throws IOException, ServletException {

    doPost(req, res);
}

public void doPost(HttpServletRequest req, HttpServletResponse res)
        throws IOException, ServletException {

    String name = req.getParameter("name");
    StringBuffer page = new StringBuffer();
    String methodWhoMadeTheCall = req.getMethod();
    String localeUsed = req.getLocale().toString();

    String strMasjidLocation = null;
    //strMasjidLocation = this is where I would like to capture the value from the jsp that called this servlet.

    page.append("<HTML><HEAD><TITLE>Multi Form</TITLE></HEAD>");
    page.append("<BODY>");
    page.append("Hello " + name + "!");
    page.append("<BR>");
    page.append("The method who called me is: " + methodWhoMadeTheCall);
    page.append("<BR>");
    page.append("The language used is: " + localeUsed);
    page.append("<BR>");
    page.append("I am at this location: " + strMasjidLocation);
    page.append("</BODY></HTML>");

    res.setContentType("text/html");
    PrintWriter writer = res.getWriter();
    writer.println(page.toString());
    writer.close();
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T02:23:08.067

这应该有效： String value = (String) req.getSession(false).getAttribute("MasjidLocation")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T02:18:34.073

不要使用小脚本；那是1999年的风格。学习 JSTL 并使用它编写您的 JSP。

您的 servlet 永远不应该在其中嵌入 HTML。只需验证和绑定参数，将它们传递给服务进行处理，然后将响应对象放在请求或会话范围内以供 JSP 显示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T02:21:08.597

我同意 duffymo 的观点，即您应该学习更新的技术（如果适用，也许您的客户不允许这样做......）。无论如何，要获得你应该做的属性的值：

```
strMasjidLocation = (String)req.getSession().getAttribute("MasjidLocation"); 
```

另外，我注意到您的 HTML <form> 标记中有两个不同的 servlet 路径：

```
MyWebArchive/MulitProcessorServlet 
```

和

```
Week05WebArchive/MulitProcessorServlet 
```

是预期的吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T02:25:56.223

您使用的是会话而不是请求。您可能需要从请求中获取会话。

```
String strMasjidLocation = request.getSession().getAttribute("MasjidLocation"); 
```

# javascript - 我可以根据窗口大小执行 javascript 吗？

> ID：10326349
> 
> 赞同：6
> 
> 时间：2012-04-26T02:14:04.817
> 
> 标签：javascript, jquery, responsive-design

我有一个响应式网站，我在其中使用 javascript 创建一个粘性侧边栏。

当浏览器大小小于 768 像素时，我还使用媒体查询从多列布局更改为单列布局。

我需要弄清楚如何在单列布局中禁用粘性菜单脚本。本质上，我需要脚本语句的媒体查询之类的东西。

这是我用来启用脚本的代码：

```
<script>
jQuery('#info').containedStickyScroll({
        duration: 0,
        unstick: false
    });
</script> 
```

有什么我可以添加到它的，只有当窗口是 768px 宽或更宽时才会触发它？

编辑：如果用户动态调整窗口大小，我正在寻找一种可行的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T02:18:14.680

尝试这个。

```
$(function(){
     $(window).resize(function(){
         if($(this).width() >= 768){
             jQuery('#info').containedStickyScroll({
                 duration: 0,
                 unstick: false
             });
         }
      })
      .resize();//trigger resize on page load
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:20:24.450

试试这个代码：

```
var height = $(window).height(); //I'm assuming you mean height, you can try .width() if yo u need it

if (height < 768) {
  jQuery('#info').containedStickyScroll({
      duration: 0,
      unstick: false
  });
} 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-12T07:21:49.883

看一下这个：

```
var targetWidth = 768;
if ( $(window).width() &gt;= targetWidth) {     
  //Add your javascript for screens wider than or equal to 768 here
  jQuery('#info').containedStickyScroll({
      duration: 0,
      unstick: false
  });
}
else {
  //Add your javascript for screens smaller than 768 here
  console.log(`am less than ${targetWidth}`)
} 
```

# c - 如何复制数组？（大小相同）

> ID：10326351
> 
> 赞同：0
> 
> 时间：2012-04-26T02:14:52.427
> 
> 标签：c

我想创建一个与“chaine”大小相同但仅在函数之后的新数组

```
 char chaine[Lenght];   //Lenght = 20
 function(chaine, sizeof(chaine)); 
```

当我调用“函数”时，“chaine”的大小是随机变化的。

新数组“chaine2”也需要充满“*”字符。

让我们尝试用一些 printf 来解释：

```
 printf("chaine = %s\n", chaine); 
```

将在屏幕上显示类似：chaine = WORDS（5 个字符）

我希望“chaine2”这样显示：chaine2 = *****（5 星）

我为我的英语道歉，谢谢你的阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T09:15:57.360

```
#include <stdio.h>
#include <stdlib.h>

char *dup_and_fillStar(const char *src, const size_t size){
    char *p,*ret;
    ret=p=(char*)malloc(sizeof(char)*size);
    while(*src++)
        *p++='*';
    *p = '\0';
    return ret;
}

#define Length  20

int main(void){
    char chaine[Length] = "WORDS"; 
    char *chaine2;

    chaine2 = dup_and_fillStar(chaine, sizeof(chaine));
    printf("chine = %s\n", chaine);
    printf("chine2 = %s\n", chaine2);
    free(chaine2);

    return(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T02:34:08.443

请记住，`char`数组是特殊的，因为它们具有在声明它们时指定的*size*和取决于它们的内容的*length 。*数组的大小是分配给它的内存量。`'\0'`字符串的长度是终止 null ( )之前的字符数。

```
some_func() {
  int len = 20;      // Size of the array
  char chaine[len];  // Uninitialized array of size 20.

  memset(chaine, '\0', sizeof(chaine)); // Init to all null chars, len = 0
  strcpy(chaine, "WORDS"); // Copy a string, len = 5

  char *chaine2 = function(chaine, sizeof(chaine));
  printf("%s\n", chaine2);
  free (chaine2);
} 
```

当您将数组传递给函数时，它被视为指针。所以`sizeof(str)`在函数内部总是会返回指针到字符的大小，而*不是*原始数组的大小。如果您想知道字符串有多长，请确保它以 null 结尾并`strlen()`像这样使用：

```
char *function(char *str, int len) {
  // Assume str = "WORDS", len = 20.
  char *new_str = malloc(len); // Create a new string, size = 20

  memset(new_str, '\0', len);  // Initialize to nulls
  memset(new_str, '*', strlen(str)); // Copy 5 '*' chars, len = 5

  return new_str;  // Pointer to 20 bytes of memory: 5 '*' and 15 '\0'
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T02:38:34.060

我将假设您使用的是 C99（因此能够使用可变长度数组）。

如果要在外部创建数组`function()`（其中`chaine`仍然是数组），您可以简单地执行以下操作：

```
char chaine2[Lenght]; 
```

或者，可能更好：

```
char chaine2[sizeof(chaine)]; 
```

如果你在里面`function()`，请注意这`chaine`将是一个指针，因为编译器将函数参数中的数组定义视为指向它的第一个元素的指针（如果这令人困惑，[请记住指针不是数组](http://c-faq.com/aryptr/aryptr2.html)）

所以，即使函数是这样定义的：

```
function(char chaine[], size_t length) { 
```

编译器会将其视为：

```
function(char *chaine, size_t length) { 
```

无论哪种方式，您都可以`chaine2`通过以下方式创建：

```
 char chaine2[length]; 
```

但不是

```
 char chaine2[sizeof(chaine)]; // DONT DO THIS 
```

因为`sizeof`将返回指针的大小而不是数组的大小。

无论您如何创建它，如果您想用“*”字符填充新数组，您可以使用[`memset()`](http://www.manpagez.com/man/3/memset/)：

```
 memset(chaine2,'*',sizeof(chaine2)); 
```

# flash - 用于主应用程序事件的皮肤中的 Flex 4 事件侦听器

> ID：10326354
> 
> 赞同：0
> 
> 时间：2012-04-26T02:15:26.950
> 
> 标签：flash, apache-flex, events, air, flex4

Flex 4 中是否有一种方法可以设计一个皮肤，以便它可以侦听由我的主应用程序调度的事件，在这种情况下，它是`<s:WindowedApplication>`该类的一个实例？

我尝试`contentGroup`在皮肤中添加一个事件侦听器，只是为了好玩。毫不奇怪，它没有奏效。

有任何想法吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T02:35:46.870

您想为哪个组件设计皮肤？

如果你正在为 WindowedApplication 设计一个皮肤并且想要监听从你的 WindowedApplication 类触发的事件；好的。您可以使用皮肤中的 hostComponent 变量来侦听 WindowedApplication 实例上的所述事件。

我相信 hostComponent 属性是根据皮肤元数据自动创建的；除非您正在创建移动皮肤，否则文档会告诉您手动创建它。概念上是这样的：

```
public var hostComponent : WindowedApplication; 
```

在代码中的某个未来点：

```
hostComponent.addEventListener('myCustomEvent',myEventListener); 
```

我不知道在 Flex 组件生命周期中的哪一点设置了 hostComponent 属性。我确定您可以在 creationComplete 事件期间添加没有问题的事件侦听器；但也可能在生命周期的早期。

如果这不是您想要做的，您可以通过引用 FlexGlobals.topLevelApplication 变量在代码中的任何位置（包括皮肤类）侦听主应用程序上的事件：

```
var tla : WindowedApplication = FlexGlobals.topLevelApplication as WindowedApplication;
tla.addEventListener('myCustomEvent',myEventListener); 
```

这被认为是封装的中断，我不确定我是否会推荐它。事件应该用来向上沟通；但是执行方法和属性应该用于向下通信。在这种情况下，您正在使用事件进行通信。

让皮肤类监听 hostComponent 上的事件有点像横向工作——而不是向上或向下工作。我对此也有复杂的感觉。

# html - 选框可以安全使用吗？

> ID：10326360
> 
> 赞同：0
> 
> 时间：2012-04-26T02:16:36.020
> 
> 标签：html, cross-browser, web-standards

我个人喜欢正确而谨慎地使用选框。您不再经常看到它们，但我认为它们可以添加一些简单的吸引眼球的东西来加载新闻提要或更新等内容。由于它不再是标准的一部分，因此浏览器可能不支持未来某个时间的选框标签？为了安全起见，我应该避免我的个人偏好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:36:06.493

我真的怀疑选框会卷土重来。我没有证据，但我可以提供替代品。很简单，选框标签并不是那么可配置的。如今，Web 开发人员需要更多的控制权。您可以使用 javascript 轻松模拟选取框（这里有[一个示例](http://remysharp.com/demo/marquee.html)）。所以现在，我的建议是如果你必须有一个选框，使用 javascript。如果它稍后卷土重来，切换回来将是微不足道的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T02:39:10.300

据我所知，使用`<marquee>`. 显然，在此[链接](http://www.w3.org/wiki/HTML/Elements/marquee)上，W3C 暗示“*不再使用它*”方案。无意冒犯，但我现在发现`<marquee>`自己是某种廉价的注意力吸引者。它有它的一天，可能你可能想要使用 JavaScript 作为强制性替代方案。

# css - 如何在 div 中使图像居中

> ID：10326361
> 
> 赞同：0
> 
> 时间：2012-04-26T02:16:40.153
> 
> 标签：css, wordpress, html, header, center

我试图在我的标题中将徽标居中。我在课堂上尝试了`display:block`and ，但它不起作用。`margin:auto``#site-title`

代码的链接是： http: [//pastebin.com/iNvhTSBL](http://pastebin.com/iNvhTSBL) 而CSS是： http: [//pastebin.com/f5mPTjuU](http://pastebin.com/f5mPTjuU)

我不知道该怎么办......也许我没有正确地做 CSS？

任何帮助，将不胜感激！CSS 来自 wordpress 主题，只是让大家知道。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:30:44.057

下次，只在您的问题中发布相关代码位。这使得人们更有可能费心回答。

如果这是您所指的代码：

```
<div id="header">
            <div id="site-title">
                    <a href="http://www.panduzee.com/wordpress"><img src="http://i.imgur.com/ysxPP.jpg"></a>
            </div>
            <!-- other bits stripped for brevity -->
            <div class="clear"></div>
    </div> 
```

CSS是这样的：

```
#header {
    border-bottom: 1px solid #dedfe0; 
    padding-bottom: 50px;
}
#site-title { 
    float: left; 
    width: 100%; 
    padding-right: 40px; 
    overflow: hidden; 
    line-height: 27px; 
    font-size: 23px; 
    display:block; 
    margin: auto;
}  
#site-title a {
    color: #333; 
    font-weight: bold; 
    text-decoration: none; 
} 
```

然后你需要修改css如下：
1.`float: left`从site-title中删除。不必要的。
2\. 请注意，您`padding-right of 40px`将导致您的问题`width: 100%`
3\. 添加`text-align: center;`到站点标题。
4.添加`margin: 0 auto;`到您的站点标题

以下代码将执行您想要的操作：

```
#header {
    border-bottom: 1px solid #dedfe0; 
    padding-bottom: 50px;
}
#site-title { 
    width: auto; 
    padding-right: 40px; 
    overflow: hidden; 
    line-height: 27px; 
    font-size: 23px;  
    text-align: center;
}  
#site-title a {
    color: #333; 
    font-weight: bold; 
    text-decoration: none; 
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:25:19.643

将此添加到`#site-title`

```
text-align: center; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T02:31:17.207

这应该有效：

```
#header {
width: 500px;
margin: 0 auto;
}
</style>
<div id="header">
<!-- div content here -->
</div> 
```

# php - 一起使用javascript和php来验证

> ID：10326362
> 
> 赞同：2
> 
> 时间：2012-04-26T02:16:47.553
> 
> 标签：php, javascript

如何同时使用 php 和 javascript？从我自己的研究来看，这似乎是不可能的。我知道他们是不同的，他们每个人都有自己做的特别的事情。但是，假设您正在验证一个表单。您使用 javascript 验证表单，然后如果没有错误，则运行 php 插入记录。你会怎么做？有没有办法在 javascript 中运行 php 或调用 php 方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T03:26:23.630

通常你会看到 Javascript 被用作**客户端**代码。这意味着访问您网站的浏览器将下载您的 Javascript 代码、编译并自行运行。客户端代码仅仅意味着客户端（访问您网站的人）运行代码。

另一方面，PHP 用作**服务器端**代码。这意味着您的 Web 服务器会解析并运行您的代码。服务器端代码只是意味着代码在您的 Web 服务器上运行。

您可以从 PHP 代码向 Javascript 提供信息。例如：

```
<?php
    $myVariable = 'a testing variable';
?>
<script type='text/javascript'>
    var fromTheServer = '<?php echo $myVariable; ?>';
</script> 
```

Javascript 变量*fromTheServer*设置为 php 变量*myVariable*的值。所有这一切实际上都是将 php 变量的值输出为 Javascript 使用的字符串。这种方法很有用，例如，如果您想要用户当前在其购物车中的购物车项目的 Javascript 数组。

```
<?php
    // get some shopping cart items using a function
    $shoppingCartItemsArray = getShoppingCartItems();
?>
<script type='text/javascript'>
    var shoppingCartItemsArray = "<?php echo implode('|', $shoppingCartItemsArray); ?>";

    // split the string value by the | delimeter to get an array
    shoppingCartItemsArray = shoppingCartItemsArray.split('|');
</script> 
```

现在您已经了解了如何将 php 与 Javascript 集成一点。再一次，这并不是真正的*集成*，只是从服务器输出信息。向服务器发送信息呢？这就是 AJAX 的用武之地。

假设您正在使用 Javascript 实现拖放式购物车。这个想法是用户从您的网站中挑选一个项目并将其拖到他们的购物车中。放开物品后，该物品应添加到服务器上的用户购物车中。您将使用 AJAX 将项目编号发布到服务器并等待服务器告诉您项目是否已成功添加。注意：您可以使用本机 Javascript 代码构建自己的 AJAX 方法，但是，当您可以使用内置它的框架时，为什么要这样做呢？我通常使用[jQuery](http://jquery.com/)，但是您可以使用许多[其他 JS 框架。](http://en.wikipedia.org/wiki/Comparison_of_JavaScript_frameworks)

以下非常简单的示例显示了在上述情况下与 Javascript 和 php 交互的样子。它使用[jQuerys`$.ajax();`](http://api.jquery.com/jQuery.ajax/)函数。

```
<?php
    /** File: https://www.example.com/cart.php **/
    // .. code
    if($_POST['action'] === 'addItem'){
        $result = addItemToCart($_POST['itemId']);
        echo $result;
    }
    // ... code

?>
<script type='text/javascript'>
    // code ....
        $.ajax({
            url: 'https://www.example.com/cart.php'
            type: 'POST',
            data: {
                action: 'addItem',
                itemId: getDraggedItem() // get the item id from a function
            }
            success: function(result){
                $('#ServerMessage').html(result);
            }
        });
    // code ....
</script> 
```

*好的，现在您可以非常简要地了解如果将*javascript 用作客户端代码，则php 和 Javascript 是如何工作的。

Javascript 也可以用作服务器端代码，例如，[IIS 允许您运行与 VBScript 相切的 JScript](http://www.codeproject.com/Articles/4271/Sharing-JavaScript-source-code-between-client-side)。

```
<script type='text/javascript' runat='server'>
   Response.Write("MS Server here.")
</script> 
```

除此之外，[CommonJS](http://www.commonjs.org/)还为许多项目正在实施的服务器端 Javascript 代码提供 API。您可能听说过其中的一些，尤其是[Node.js。](http://nodejs.org/)这些项目之一可能允许您同时运行 php 和 javascript，您必须查看。

底线是，Javascript 不仅仅是客户端代码。它只是可以在服务器或客户端上执行的简单代码，或者作为[清理 iTunes 资料库的一种方式](http://ottodestruct.com/itunes/RemoveDeadTracks.txt)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T02:25:03.543

您需要在 JavaScript 和 PHP 中进行验证。但最重要的是 PHP 验证，因为请记住：Javascript 是前端代码，因此可以由用户修改或简单地禁用。因此，在插入之前，您必须在 PHP 中进行验证。

有成千上万的 javascript 验证插件，一个很好的是 jQuery Validate： [http ://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

你有一个关于 PHP 验证的例子：http: [//buildinternet.com/2008/12/how-to-validate-a-form-complete-with-error-messages-using-php-part-1/](http://buildinternet.com/2008/12/how-to-validate-a-form-complete-with-error-messages-using-php-part-1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T02:40:23.277

您可以使用 javascript 验证并使用 php 插入记录。但是，如果您将使用 javascript 和 php 验证记录会更好。为什么？因为当您在浏览器中关闭 javascript 时，javascript 验证将无用，这意味着，如果浏览器 javascript 关闭，则不会运行任何验证，这意味着无效记录将被插入到您的数据库中。所以最好有一个备份 php 验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T03:26:24.157

```
<?php
  if(PHP VALIDATION) {
    echo 'You were not validated';
  } else {
    echo "<script src=\"FILE WITH UR JAVASCRIPT\"><script>"
  }
?> 
```

只有在 php 验证完成后，此 javascript 才会加载和执行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-26T02:37:09.007

让我们举个简单的例子：给出的例子使用了 jquery，你可以用谷歌搜索一下。html:

```
 <html>
      <body>
      <input type = "text" name = "username" id = "username"></input>
      <input type = "button" name = "submit" id = "save_button" value = "insert"></input>
        <div id = "save_stat"></div> <!--This will be the status of the insertion. "loading   or sucess!"---->
         <script>
        $('#save_button').click(function(){ //assign an event handler
           //grab values
           var name = $('#username').val(); //get the value of whatever the user entered
             //perform HTTP ajax request
             //could be $.get instead
             $.post('phpfile.php', (name:name)/*this could be modified to (name:name, password: password) etc.*/, function(data){ //send the data to the php file.
                 $('#save_stat').html(data);
              });
         });
      </script>
     </body>
    </html> 
```

现在剩下要做的就是创建 php 注册页面并链接它而不是“phpfile.php”并在该文件中加载值，sinply 使用 $_POST['name']; 或 $_POST['密码']; 等等

上面的答案（由其他人建议）是完美的，因为它们暗示了创建同步 Javascript 和 php 应用程序实际需要的本质。

****** ******编辑通知****** ** *** ****** 创建 php 时，给用户消息时使用 echo 语句，即**

 **```
if(!empty($_POST['name'])){
echo "You successfully entered your name!"; 
}else
   echo "you forgot to enter a name"; 
```

样品 #2

```
if(!empty($_POST['name'])){
$message = "You successfully entered your name!"; 
}else
   $message = "you forgot to enter a name";
    echo $message; 
```**

# sql - 数据比较问题

> ID：10326364
> 
> 赞同：1
> 
> 时间：2012-04-26T02:16:56.877
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures, sql-server-2008-r2

我有以下 sql 查询：

```
select @table1 as DataState, *  from
(select * from importedcsvclients 
except 
select * from tblClients) x
union all
select @table2 as DataState, *  from
(select * from tblClients 
except select *  
from importedcsvclients) x 
```

上面的代码工作正常，但是，如果 table1 和 table2 包含相似的数据，则两条记录都会显示。

谁能帮助我使查询工作为：

获取 table1 和 table2 的结果，但如果 table1 中不存在相同的名称，则仅显示 table2 数据。

谢谢。

信息：

```
table1
ID   Name
1    TestA
2    TestB    
3    TestC
4    TestD

table2
ID   Name
1    TestE
2    TestF    
3    TestG
4    TestD

Results:
Name     DataState
TestA    table1
TestB    table1
TestC    table1
TestD    table1
TestE    table2
TestF    table2
TestG    table2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T03:04:53.253

使用起来非常诱人，`EXCEPT`但正如您所发现的那样，从稍微复杂的任何事情中获得正确的结果并不总是那么简单。这是使用 CTE 后的结果的尝试：

```
DECLARE @table1 TABLE(ID INT, Name VARCHAR(32));    
INSERT @table1 VALUES (1,'TestA'), (2,'TestB'), (3,'TestC'), (4,'TestD');

DECLARE @table2 TABLE(ID INT, Name VARCHAR(32));
INSERT @table2 VALUES (1,'TestE'), (2,'TestF'), (3,'TestG'), (4,'TestD');

;WITH x AS 
(
  SELECT m, Name, rn = ROW_NUMBER() OVER (PARTITION BY Name ORDER BY m)
  FROM 
  (
    SELECT m = 'table1', Name FROM @table1
    UNION ALL 
    SELECT m = 'table2', Name FROM @table2
  ) AS y
)
SELECT Name, DataState = m
  FROM x 
  WHERE rn = 1
  ORDER BY Name; 
```

结果：

```
Name        DataState
---------   ---------
TestA       table1
TestB       table1
TestC       table1
TestD       table1
TestE       table2
TestF       table2
TestG       table2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:45:21.737

在（伪）关系代数中：

```
table1 UNION ( table2 NOT MATCH table1 ) 
```

在 TSQL 中（添加`DataState`）：

```
SELECT ID, Name, 
       'table1' AS DataState
  FROM table1
UNION
SELECT ID, Name,
       'table2' AS DataState
  FROM table2
 WHERE Name NOT IN ( SELECT Name FROM table1 ); 
```

包括您的样本数据测试数据：

```
WITH table1 
     AS
     (
      SELECT * 
        FROM (
              VALUES (1, 'TestA'),
                     (2, 'TestB'),    
                     (3, 'TestC'),
                     (4, 'TestD')
             ) AS T (ID, Name)
     ),
     table2
     AS
     (
      SELECT * 
        FROM (
              VALUES (1, 'TestE'),
                     (2, 'TestF'),    
                     (3, 'TestG'),
                     (4, 'TestD')
             ) AS T (ID, Name)
     )
SELECT ID, Name, 
       'table1' AS DataState
  FROM table1
UNION
SELECT ID, Name,
       'table2' AS DataState
  FROM table2
 WHERE Name NOT IN ( SELECT Name FROM table1 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:06:51.107

我现在用下面的。感谢所有帮助。

```
DECLARE @sql VARCHAR(8000)
SET @sql = 'SELECT ''' + @table1 + ''' AS DataState, * FROM
(SELECT ' + @columnlist + ' FROM ' + @table1 + '
    EXCEPT
SELECT ' + @columnlist + ' FROM ' + @table2 + ') x
    UNION
SELECT ''' + @table2 + ''' AS DataState, * from
    (SELECT ' + @columnlist + ' FROM ' + @table2 + '
        INTERSECT
    SELECT ' + @columnlist + ' FROM ' + @table1 +') x'

EXEC(@sql) 
```

# c# - 自定义事件 arg 有什么用？

> ID：10326365
> 
> 赞同：1
> 
> 时间：2012-04-26T02:18:05.527
> 
> 标签：c#, mvvm

这是自定义事件参数的代码。我对这些的使用以及它们的作用感到困惑。我无法理解这个属性`public object AddedObject { get; private set; }`，代码在这里：

```
public class ObjectAddedEventArgs : EventArgs
{
    public ObjectAddedEventArgs(object addedObject)
    {
        AddedObject = addedObject;
    }

    public object AddedObject { get; private set; }
} 
```

我无法理解添加对象的 get 和 set 属性的使用。请给我解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:25:18.240

该`AddedObject`属性就是所谓的“自动属性”，这意味着 C# 编译器将生成一个私有变量来保存该属性的值。“get”是允许您读取属性值的机制。“设置”是允许您设置属性值的机制，尽管在这种情况下，由于设置是`private`您无法设置值。这转换为大致如下所示的代码：

```
private object _AddedObject;
public object AddedObject
{
   get { return this._AddedObject; }
   private set { this._AddedObject = value; }
} 
```

类本身（`ObjectAddedEventArgs`类）用于向事件处理程序提供附加数据（`AddedObject`值），该事件处理程序可能会访问该数据并对其进行处理，作为其对事件的响应的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:06:35.620

当你像这样声明你的事件时的好事

```
 event EventHandler<ObjectAddedEventArgs> MyObjectAddedEvent; 
```

您可以轻松地以弱方式订阅它

```
 myObjectInstance.MyObjectAddedEvent += new EventHandler<ObjectAddedEventArgs>(MyObjectAddedEventMethod).MakeWeak(eh => d.MyObjectAddedEvent -= eh);

    private void MyObjectAddedEventMethod(object sender, ObjectAddedEventArgseventargs)
    {
        //do something with the event args
    } 
```

你在[这里](http://diditwith.net/2007/03/23/SolvingTheProblemWithEventsWeakEventHandlers.aspx)找到的弱点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T02:22:41.970

根据[微软的文档](http://msdn.microsoft.com/en-us/library/system.eventargs.aspx)：

> EventArgs 是包含事件数据的类的基类。

……

> 此类不包含事件数据；它由在引发事件时不将状态信息传递给事件处理程序的事件使用。**如果事件处理程序需要状态信息**，则应用程序必须从此类派生一个类来保存数据。

话虽如此，该类的原始开发人员打算处理事件，同时使对象`AddedObject`可用于事件处理程序方法。请参阅上面的网站以获取一个很好的示例。

# java - 在布局中添加子项时无法关注editText

> ID：10326370
> 
> 赞同：1
> 
> 时间：2012-04-26T02:18:27.940
> 
> 标签：java, android

每次单击按钮时，我都会在线性布局中添加微调器、图像和编辑文本。

现在，每当我添加此布局时，editText 都会闪烁，这意味着它有焦点但键盘不会出现。即使我点击它，键盘也不会出现。我能做的最多的是单击其他地方，然后返回editText以使其显示键盘和正确的焦点。

我正在使用以下代码，我该如何解决这个错误。

```
 viewHolder.title = (EditText) view.findViewById(R.id.AddNewDetail);

  view.setTag(viewHolder);  
 layout.addView(view); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:32:52.080

您是否已在清单文件中为您的活动添加了以下行

```
android:windowSoftInputMode="stateHidden" 
```

尝试删除它，或者您可以手动使用 requestfocus 方法来获得焦点。试试下面的方法。

```
edittext.requestFocus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:35:37.537

我认为你应该强制显示软键盘。

```
((InputMethodManager) context
            .getSystemService(Context.INPUT_METHOD_SERVICE))
            .showSoftInput(editText,
                    InputMethodManager.SHOW_FORCED); 
```

并关闭它

```
((InputMethodManager) context
            .getSystemService(Context.INPUT_METHOD_SERVICE))
            .hideSoftInputFromWindow(editText.getWindowToken(),
                    0); 
```

并专注于edittext

```
editText.requestFocus(); 
```

# python - 设置 3D 绘图的纵横比

> ID：10326371
> 
> 赞同：33
> 
> 时间：2012-04-26T02:18:31.547
> 
> 标签：python, matplotlib, mplot3d

我正在尝试根据声纳在 500m x 40m 海底部分运行的数据绘制海底的 3D 图像。我将 matplotlib/mplot3d 与 Axes3D 一起使用，我希望能够更改轴的纵横比，以便 x 和 y 轴按比例缩放。包含生成数据而不是真实数据的示例脚本是：

```
import matplotlib.pyplot as plt
from matplotlib import cm
from mpl_toolkits.mplot3d import Axes3D
import numpy as np

# Create figure.
fig = plt.figure()
ax = fig.gca(projection = '3d')

# Generate example data.
R, Y = np.meshgrid(np.arange(0, 500, 0.5), np.arange(0, 40, 0.5))
z = 0.1 * np.abs(np.sin(R/40) * np.sin(Y/6))

# Plot the data.
surf = ax.plot_surface(R, Y, z, cmap=cm.jet, linewidth=0)
fig.colorbar(surf)

# Set viewpoint.
ax.azim = -160
ax.elev = 30

# Label axes.
ax.set_xlabel('Along track (m)')
ax.set_ylabel('Range (m)')
ax.set_zlabel('Height (m)')

# Save image.
fig.savefig('data.png') 
```

这个脚本的输出图像：

![matplotlib 输出图像](../Images/5a7f8290a38a6ce240abf16fd9632d52.png)

现在我想改变它，使沿轨道 (x) 轴上的 1 米与范围 (y) 轴上的 1 米相同（或者可能是不同的比率，具体取决于所涉及的相对尺寸）。我还想设置 z 轴的比率，由于数据中的相对大小，再次不一定要设置为 1:1，但是该轴小于当前绘图。

我已经尝试构建和使用[matplotlib 的这个分支，遵循](https://github.com/WeatherGod/matplotlib/tree/mplot3d/pbaspect)[邮件列表](http://comments.gmane.org/gmane.comp.python.matplotlib.general/27415)中此消息中的示例脚本，但将该`ax.pbaspect = [1.0, 1.0, 0.25]`行添加到我的脚本（已卸载 matplotlib 的“标准”版本以确保正在使用自定义版本）没有不会对生成的图像产生任何影响。

**编辑：**因此所需的输出将类似于以下（使用 Inkscape 粗略编辑）图像。在这种情况下，我没有在 x/y 轴上设置 1:1 的比例，因为这看起来非常薄，但我已经将它展开，所以它不像原始输出那样是方形的。

![期望的输出](../Images/bc0deff5ff2216d6f250ad3e1787fa1d.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-26T06:15:51.203

在 savefig 之前添加以下代码：

```
ax.auto_scale_xyz([0, 500], [0, 500], [0, 0.15]) 
```

![在此处输入图像描述](../Images/8fec59c82e8dca2f8ebd4cb314575a32.png)

如果你不想要方轴：

编辑`get_proj`site-packages\mpl_toolkits\mplot3d\axes3d.py 中的函数：

```
xmin, xmax = np.divide(self.get_xlim3d(), self.pbaspect[0])
ymin, ymax = np.divide(self.get_ylim3d(), self.pbaspect[1])
zmin, zmax = np.divide(self.get_zlim3d(), self.pbaspect[2]) 
```

然后添加一行来设置 pbaspect：

```
ax = fig.gca(projection = '3d')
ax.pbaspect = [2.0, 0.6, 0.25] 
```

![在此处输入图像描述](../Images/e242fd07c354b198f2d4f5c20ff3d982.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-26T10:42:57.563

[这个问题](https://stackoverflow.com/questions/13685386/matplotlib-equal-unit-length-with-equal-aspect-ratio-z-axis-is-not-equal-to)的答案对我来说很完美。而且您不需要设置任何比率，它会自动完成所有操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-01T15:14:38.153

在 github 上已经打开了一个问题：[https ://github.com/matplotlib/matplotlib/issues/8593](https://github.com/matplotlib/matplotlib/issues/8593)

上述解决方案似乎不再起作用。现在必须通过以下方式编辑`get_proj`里面的函数：`site-packages\mpl_toolkits\mplot3d\axes3d.py`

```
 try:
            self.localPbAspect = self.pbaspect
        except AttributeError:
            self.localPbAspect = [1,1,1]

        xmin, xmax = ( lim / self.localPbAspect[0] for lim in self.get_xlim3d() )
        ymin, ymax = ( lim / self.localPbAspect[1] for lim in self.get_ylim3d() )
        zmin, zmax = ( lim / self.localPbAspect[2] for lim in self.get_zlim3d() ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-01T10:14:45.553

那我如何解决浪费空间的问题：

```
try: 
    self.localPbAspect=self.pbaspect
    zoom_out = (self.localPbAspect[0]+self.localPbAspect[1]+self.localPbAspect[2]) 
except AttributeError: 
    self.localPbAspect=[1,1,1]
    zoom_out = 0 
xmin, xmax = self.get_xlim3d() /  self.localPbAspect[0]
ymin, ymax = self.get_ylim3d() /  self.localPbAspect[1]
zmin, zmax = self.get_zlim3d() /  self.localPbAspect[2]

# transform to uniform world coordinates 0-1.0,0-1.0,0-1.0
worldM = proj3d.world_transformation(xmin, xmax,
                                         ymin, ymax,
                                         zmin, zmax)

# look into the middle of the new coordinates
R = np.array([0.5*self.localPbAspect[0], 0.5*self.localPbAspect[1], 0.5*self.localPbAspect[2]])
xp = R[0] + np.cos(razim) * np.cos(relev) * (self.dist+zoom_out)
yp = R[1] + np.sin(razim) * np.cos(relev) * (self.dist+zoom_out)
zp = R[2] + np.sin(relev) * (self.dist+zoom_out)
E = np.array((xp, yp, zp)) 
```

# iphone - UIView 背景图片按比例调整大小

> ID：10326375
> 
> 赞同：1
> 
> 时间：2012-04-26T02:19:26.883
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiview

我有一个大小为 200*100 的 Background.png 图像，我将 uiview 的背景图像设置为：

```
 UIView view= UIView alloc] initWithFrame:CGRectMake(50, 100, 200, 100)];
    view.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"Background.png"]]; 
```

现在，我通过以下方式重置框架 UIView：

```
 [view setFrame:CGRectMake(50,100,400,200)]; 
```

我需要按 uiview 的比例调整背景图像的大小，但我只有一个固定大小的 Background.png 图像。我该怎么办。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T06:49:05.500

相应地选择你的尺寸

```
 UIGraphicsBeginImageContext( newSize );
   [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
   UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
   UIGraphicsEndImageContext();

    UIView view= UIView alloc] initWithFrame:CGRectMake(50, 100, 200, 100)];
    view.backgroundColor = [[UIColor alloc] initWithPatternImage:newImage]; 
```

否则采取 imageview 并设置`contentMode`，如果你不想平铺图像

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T02:23:42.653

根据您的需求，将 UIImageView 添加为视图的子视图并设置其图像，让它为您处理调整大小可能是最简单的。否则，您可能需要编写一些复杂的调整大小和绘图代码。

# windows-phone-7 - 当前运行的应用程序 GUID 的 Windows Phone ISETool.exe 快捷方式

> ID：10326378
> 
> 赞同：2
> 
> 时间：2012-04-26T02:19:38.813
> 
> 标签：windows-phone-7, isolatedstorage

一周前，我遇到了一个 SO 帖子（在评论中），其中有人将当前运行的应用程序的 GUID 的快捷方式发布到[独立存储资源管理器工具 (ISETool.exe)](http://msdn.microsoft.com/en-us/library/hh286408%28v=vs.92%29.aspx)命令行参数中。该快捷方式效果很好，是一种使用 ISETool.exe 的简单方法，无需查找应用程序的 GUID。该帖子现在正在躲避我，我希望有人能够重新回答其他帖子评论中的内容。

例如，使用 ISETool.exe，您必须添加应用程序的 GUID，即，

```
ISETool.exe ts xd 11111111-2222-3333-4444-555555555555 C:\SomeDirectory 
```

`localhost`注释指出，您可以使用类似于or的东西，而不是使用实际的 GUID `http://localhost`，即

```
ISETool.exe ts xd localhost C:\SomeDirectory 
```

我知道其他具有类似功能的工具，即[WP7 隔离存储资源管理器](http://wp7explorer.codeplex.com)和[ISETools-Batch-script](http://blog.supaywasi.com/2011/08/using-isolated-storage-explorer-tool)。不过，我正在寻找与 ISETool.exe 一起使用的快捷方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:18:49.117

你确定是那个有快捷方式的*应用程序吗？*通过 ISEtool.exe 的反射源，我看不到任何可以识别正在运行的应用程序的东西。

此外，产品 ID 参数始终被解析为 a`Guid`并传递给`Device.GetApplication`. 我尝试传递`Guid.Empty`给`GetApplication`但它引发了异常。

事实上，跳进去`Microsoft.SmartDevice.Connectivity`，`Microsoft.VisualStudio.DeviceConnectivity.Interop`我根本看不到可以提供该信息的托管 API：

*   `Microsoft.SmartDevice.Connectivity.RemoteApplication.IsRunning()`抛出一个`NotImplementedException`
*   `Microsoft.VisualStudio.DeviceConnectivity.Interop.ICcConnection3.IsApplicationRunning``Microsoft.SmartDevice.Connectivity`（COM 接口）没有被or`IseTool.exe`程序集中的任何东西引用

我同意这样的快捷方式会很有用，所以如果你发现了什么，请更新。

# php - 使用 SOAP 连接到 API

> ID：10326382
> 
> 赞同：1
> 
> 时间：2012-04-26T02:19:50.407
> 
> 标签：php, xml, api, soap

我正在使用 PHP，而且我是 SOAP 新手，并且在理解基本知识时遇到了问题。我有这个文件，解释了我需要什么

[http://dl.dropbox.com/u/508603/api/API%20Web%20Service3.docx](http://dl.dropbox.com/u/508603/api/API%20Web%20Service3.docx)

我有一个网络表单，用户在其中输入邮政编码并选择服务类别。

然后，在填写完此表单后，它需要通过 SOAP、WSDL 或 REST Posting 调用发送请求来连接到 API。

在文档中，请转到第 3 页。您将看到可以访问 API 的所有 URL。您可以选择这些方法中的任何一种。

在第 4 页上，我需要 ping 他们的 API 以查看他们是否是给定邮政编码中的服务。“categoryID”可以在 page#10 - page#14 上找到。

在第 4 页上，我们将根据输入的邮政编码测试用户是否覆盖了他们的服务。邮政编码和 categoryid 将在 Web 表单中输入。

然后，在第 5 页，我们有了所有需要命名的字段名。

在第 6 页上，我们有一个 POST 示例

您还将看到 api 返回的响应类型。

如果有人可以为我提供一种方法来完成这项工作，我将不胜感激......

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T06:39:39.330

恐怕我无法打开你的 docx 文件。但是，让我尽量笼统。

他们是否提供了[WSDL](http://en.wikipedia.org/wiki/Web_Services_Description_Language)文件？这对于定义使用 API 时可用的上下文/方法非常有帮助。

PHP 有多种[SOAP](http://us2.php.net/manual/en/book.soap.php)类。你会想要的是[`SoapClient`](http://us2.php.net/manual/en/class.soapclient.php).

```
$client = new SoapClient($wsdlurl, $optionsArray);
$client->api_method_name($params); 
```

很直接。如果您提供此 doc 文件中的更多示例，我可以尝试提供更多帮助。

# regex - 语法的正则表达式

> ID：10326383
> 
> 赞同：1
> 
> 时间：2012-04-26T02:19:56.763
> 
> 标签：regex, grammar, context-free-grammar, finite-automata

我正在从 Aho 的编译器构造中读取有限自动机和语法，并且我被这种语法困扰了很长时间。我对如何描述它没有清晰的认识：

> 考虑以下语法：
> 
> S -> (L) | 一个 L -> L, S | 小号
> 
> 请注意，括号和逗号实际上是该语言中的终结符，并出现在该语法接受的句子中。试着描述这个语法生成的语言。这个语法有歧义吗？

我在这里关心的是：这种语法生成的语言可以描述为正则表达式吗？我对如何做到这一点感到困惑。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T03:41:33.940

为了证明语法是模棱两可的，你需要能够在解析同一个字符串的同时构造两个不同的解析树。您的字符串将由“(”、“)”、“”和“a”组成，因为它们是语法中唯一的终端符号。

尝试以几种方式排列这 4 个终端符号，看看是否可以显示不同的成功解析，本着[Wikipedia 上的模棱两可语法示例](http://en.wikipedia.org/wiki/Ambiguous_grammar)的精神。

立即左递归往往会给某些解析器带来问题。看看 "a,a,a" 是否对 "L → L , S | S" 做了什么有趣的事情......

> 我在这里关心的是这个语法生成的语言作为正则表达式可以描述......我对如何做感到困惑

一个正则表达式不能完全描述语法。重写部分语法将使这一点更加明显：

1.  **小号 → ( 大号 )**
2.  S → 一个
3.  L → L , S
4.  **大号→小号**

注意#1 和#4。L 可以产生 S，S 可以产生 (L)。这意味着 S 可以产生 ( S )，它可以产生 ( ( S ) )、( ( ( S ) ) ) 等等，无穷无尽。关键是这些括号是匹配的；“（”符号与“）”符号的数量相同。

正则表达式无法做到这一点。

正则表达式映射到有限自动机。有限自动机不能数。语言 L ∈ {w: 0 ^n 1 ^n } 不是正则。L ∈ {w: ( ^n ) ^n }，只是用 "(" 代替 "0" 和 ")" 代替 "1"，也不是。[请参阅： Regular Languages - Wikipedia](http://en.wikipedia.org/wiki/Regular_language)下的第一个示例部分。（注解：s ¹是 s，s ²是 ss，...，s ^n是 s 重复 n 次。）

这意味着您不能使用正则表达式来描述语言的那一部分。这使其属于 CFG、图灵机和下推自动机领域。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T14:26:50.670

正则表达式（以及解释它们的库）是识别上下文无关语法句子的糟糕工具。相反，您可能希望使用 yacc、bison 或 ANTLR 之类的解析器生成器。

我认为阿霍书中练习的重点是用文字“描述语言”，以便了解它是否有歧义。处理它的一种方法：给定语法的产生，你能设计一个可以用两种不同方式解析的语法句子吗？如果是这样，则语法是模棱两可的。

# php - PHP中的并发

> ID：10326386
> 
> 赞同：9
> 
> 时间：2012-04-26T02:20:36.427
> 
> 标签：php, mysql, api, concurrency, server-side

我在我的 PHP 服务器端 API 中进行大量 MySQL 查询，我想通过让多个线程处理不同的查询然后返回结果来加速它。

但是如何在 PHP 中创建另一个线程？我正在传递 POST 参数，所以一个简单的方法`shell_exec()`可以工作，但似乎有点不安全。我正在考虑的选项：

1）使用我拥有的参数发出一个cURL请求，处理来自请求的JSON然后返回

2）用PHP CLI调用a`shell_exec()`并以某种方式（我该怎么做？？）处理PHP中的响应

这里最好的选择是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T02:22:37.663

PHP 中没有线程支持。但是，您可以使用[`pcntl`](http://php.net/pcntl)扩展来生成和管理分叉，但如果您得出结论认为应该使用线程来完成，最好再看看您的算法。

异步处理长时间运行的操作的一个选项是将它们存储在数据库中，并让后台工作进程从数据库中获取它们，计算结果，然后将结果存储在数据库中。然后前面的脚本会在数据库中查找它们以查看它们是否已完成以及结果是什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T02:25:21.023

查看[pcntl 扩展名](http://php.net/manual/en/function.pcntl-fork.php)。PHP 根本不支持真正的线程，所以你必须通过 fork()ing 来实现伪线程。请注意，fork() 进程比生成线程要“重”得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T02:37:46.087

PHP 还没有实现线程（可能永远不会），因为许多 PHP 的库不是线程安全的。该替代方案是`pcntl`包装 C`fork`函数的。

我为这些函数[创建了一个方便的包装器](https://gist.github.com/2495273)，让我可以在更高级别管理它们。

```
$thread1 = new Thread( function( $thread ) {
    sleep( 4 );
    $thread->write( "Hello\n" );
} );

$thread2 = new Thread( function( $thread ) {
    sleep( 5 );
    $thread->write( "World\n" );
} );

$thread3 = new Thread( function( $thread ) {
    sleep( 6 );
} );

print $thread1->read(); // time: 0 -> 4
print $thread2->read(); // time: 4 -> 5
$thread3->join(); // time 5 -> 6

// More advanced handling:
// Thread::selectUntilJoin( array( $thread1, $thread2, $thread3 ), function () { ... }, function () { ... } ); 
```

# css - 使用 100% 宽度的背景图像居中定位 DIV

> ID：10326390
> 
> 赞同：0
> 
> 时间：2012-04-26T02:21:46.450
> 
> 标签：css, css-float

我对 CSS 和 Div 定位还很陌生，遇到了一个问题

我正在构建的应用程序底部有一个状态栏 -

状态栏是 1600 像素宽，但是因为我不希望浏览器有任何超过 1000 像素宽的水平滚动条，并且因为状态栏上的实际文本只有中间 1000 像素，所以我创建了三个图像-

图 1 是 LEFT 200 像素

图 2 是中间 1000 像素（设置为绝对位置，贴在浏览器窗口底部并且工作正常）

图 3 是正确的 200 像素

我所做的是制作一个 1600 像素版本的状态栏，并将其放在 1000 像素栏下方的一层，并尝试使用 WIDTH:100% 将其设置为 DIV 中的背景图像

# 页脚br

{

```
background-image:url(images/footerol.jpg);
background-repeat:no-repeat;
text-align: center;
padding: 0px;
width: 100%;
height:40px;
position: absolute;
bottom:0px;
z-index: 3; 
vertical-align:bottom;
left: 0;
right: 0;
margin-left: auto;
margin-right: auto; 
```

}

我确定我在这里做错了什么......我可以使用这种方法并只允许浏览器在假设 1100 像素宽时没有水平滚动条，因为我在 DIV 中使用背景图像......话虽如此，当我有宽度时，我似乎无法居中：100%

最好的方法是，如果我可以将左右元素放置在低于中心 1000 像素条的图层上，并在浏览器窗口宽度减小（或开始时很小）时让它滑到下面。基本上我可以'没有水平滚动条，我不介意状态栏的左右部分是否位于中间状态栏下方（浏览器窗口宽度小于1600） -

非常感谢 - 我感谢大家的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:54:22.290

您试图在页面底部强制设置页脚，同时将其居中。看看 [http://www.cssstickyfooter.com/using-sticky-footer-code.html](http://www.cssstickyfooter.com/using-sticky-footer-code.html)。按照该示例，您可以在页脚中放置一个具有指定宽度和边距：0 居中的容器：

```
<div id="wrap">
  <div id="header"> </div>
  <div id="main"> </div>
</div>

<div id="footer">
  <div id="nav2"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:28:58.840

我想出了一个非常简单的解决方案，以及为什么我的简单解决方案最初不起作用

首先，我意识到我没有

其次，我为超过 1000 像素的左右部分创建了一个居中的背景图像......

第三，我在 div 中使用了一张图片来表示中间的 1000 像素——

这就是在底部获得居中页脚所需的全部内容：

1.  1000像素中心片
2.  左侧 200 像素和右侧 200 像素将是“填充”块
3.  停留在页面底部

# 页脚

```
{

    background-image:url(images/footerol.jpg);
    background-repeat:no-repeat;
    background-position:center;
    text-align: center;
    padding: 0px;
    width: 100%;
    height:40px;
    position: absolute;
    bottom:0px;
    z-index: 2; 
    vertical-align:bottom;
    left: 0;
    right: 0;
    margin-left: auto;
    margin-right: auto;
} 
```

# android - 在文本视图上自动向下滚动

> ID：10326397
> 
> 赞同：0
> 
> 时间：2012-04-26T02:23:01.697
> 
> 标签：android, android-scrollbar

我的应用程序中有 3 个组件，顶部有 1 个 textview(inputType:textMultiline, scrollbar:vertical,gravity:bottom|right)，中间有 1 个 editview，底部有 1 个按钮。当我在编辑视图上键入内容并单击按钮时，编辑视图上写入的文本会显示在文本视图上。每次我点击确定时，文本都会显示在底部，显示的是前三个输入。我必须向下滚动文本视图才能看到我的最后输入。

现在，我希望我的用户在他们的 textview 上看到他们最后的输入。我想知道每次我在其上输入新文本时是否有这样的文本视图自动滚动代码。我是开发 android 应用程序的新手。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T04:12:31.497

当您将文本设置为 textview 时，只需将焦点设置为它。像

```
tv.setFocusable(true); 
```

每当您在 textview 上更改字符串时，它都会自动聚焦您的视图。

如果您一次又一次地将文本添加到文本视图中，那么您可以试试这个

```
 int scroll_amount = tv.getBottom();
    tv.scrollTo(0, scroll_amount); 
```

希望它会工作不确定..

也试试这个

```
 int scroll_amount = (int) (tv.getLineCount() * tv.getLineHeight()) - (tv.getBottom() - tv.getTop());
    tv.scrollTo(0, scroll_amount); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T02:43:43.450

您可以使用 scrollView.scrollTo(x,y) 自动滚动到您想要的位置。

/ ****编辑**** /

为滚动视图创建自定义类

```
package com.android.mypackage
public class myScrollView extends ScrollView{
    private int maxY = 0;
    @Override
    protected void onScrollChanged(int x, int y, int oldx, int oldy) {
        super.onScrollChanged(x, y, oldx, oldy);
       if(y>maxY)
        maxY=y;
    }
    public void moveToEnd(){
        this.scrollTo(0, maxY);
    }
} 
```

在布局 xml 中使用这个自定义类，如下所示：

```
...
<com.android.mypackage.myScrollView
    android:id="@+id/my_scrollview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <TextView .../>
</com.android.mypackage.myScrollView>
..... 
```

当您按下确定按钮时，只需调用函数 myscrollViewObj.movetoEnd(); 这只是一个草稿代码，还没有经过测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T12:08:13.580

我已经得到了这个答案！谢谢你给我一些想法。我将来也许可以使用它们。@Bharat Sharma，您几乎得到了答案！谢谢！

```
public void onClick(View v) {
            // TODO Auto-generated method stub
            log.setText(log.getText() + "\n" +input.getText());

            if(log.getLineCount() > 5){
                scroll_amount = scroll_amount + log.getLineHeight();
                log.scrollTo(0, scroll_amount);
            }
        } 
```

我在 onCreate() 之外调用了变量滚动量。再次感谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-24T12:00:01.827

就是这个。

```
public void onScrollDownClicked(View view) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
        mTextView.scrollTo(0, mTextView.getLayout().getHeight() - mTextView.getHeight());
    }
} 
```

# asp.net-mvc - 在剃刀foreach上获取索引值

> ID：10326406
> 
> 赞同：72
> 
> 时间：2012-04-26T02:24:12.510
> 
> 标签：asp.net-mvc, asp.net-mvc-2, razor, partial-views

我`List<T>`在我的视图中迭代一个剃刀 foreach 循环，它呈现一个部分。在部分中，我正在渲染一条记录，我希望在我的视图中连续显示 4 条记录。我有一个用于两端列的 css 类，因此需要在部分中确定调用是第一条记录还是第四条记录。在我的部分中识别这一点以输出正确代码的最佳方法是什么？

这是我的主页，其中包含循环：

```
@foreach (var myItem in Model.Members){

        //if i = 1
        <div class="grid_20">
        <!-- Start Row -->

        //is there someway to get in for i = 1 to 4 and pass to partial?
        @Html.Partial("nameOfPartial", Model)

        //if i = 4 then output below and reset i to 1
        <div class="clear"></div>
        <!-- End Row -->
        </div>

} 
```

我想我可以创建一个 int ，我可以在每次传递时更新并在这里渲染文本没有问题，但它将整数值传递给我更关心的部分。除非有更好的方法。

这是我的部分：

```
@{
switch()
case 1:
        <text>
        <div class="grid_4 alpha">
        </text>
break;
case 4:
        <text>
        <div class="grid_4 omega">
        </text>
break;
default:
        <text>
        <div class="grid_4">
        </text>
break;
}

        <img src="Content/960-grid/spacer.gif" style="width:130px; height:160px; background-color:#fff; border:10px solid #d3d3d3;" />
        <p><a href="member-card.html">@Model.Name</a><br/>
        @Model.Job<br/>
        @Model.Location</p>
</div> 
```

不确定我今天是否有一个金发碧眼的日子，这非常容易，但我想不出传递 int 值的最佳方法。希望有人能提供帮助。

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2014-03-13T08:40:22.830

```
 @{int i = 0;}
 @foreach(var myItem in Model.Members)
 {
     <span>@i</span>
     @{i++;
      }
 } 
```

// 使用@{i++ 增加值}

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2012-11-29T22:44:00.033

```
//this gets you both the item (myItem.value) and its index (myItem.i)
@foreach (var myItem in Model.Members.Select((value,i) => new {i, value}))
{
    <li>The index is @myItem.i and a value is @myItem.value.Name</li>
} 
```

有关我的博客文章 [http://jimfrenette.com/2012/11/razor-foreach-loop-with-index/的更多信息](http://jimfrenette.com/2012/11/razor-foreach-loop-with-index/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-11-17T00:55:35.100

或者你可以简单地这样做：

```
@foreach(var myItem in Model.Members)
{    
    <span>@Model.Members.IndexOf(myItem)</span>
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-26T02:43:54.143

看看[这个使用 Linq 的解决方案。](http://benmccallum.wordpress.com/2011/04/28/a-foreach-loop-with-an-index-thanks-to-linq/)他的示例与他的示例相似，因为他需要为每个第 3 个项目使用不同的标记。

```
foreach( var myItem in Model.Members.Select(x,i) => new {Member = x, Index = i){
    ...
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-26T02:53:21.860

您是否有理由不使用 CSS 选择器来设置第一个和最后一个元素的样式，而不是尝试将自定义类附加到它们？不要使用基于 alpha 或 omega 的样式，而是使用 first-child 和 last-child。

[http://www.quirksmode.org/css/firstchild.html](http://www.quirksmode.org/css/firstchild.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-13T11:10:32.663

IndexOf 在这里似乎很有用。

```
@foreach (myItemClass ts in Model.ItemList.Where(x => x.Type == "something"))
    {
       int currentIndex = Model.ItemList.IndexOf(ts);
       @Html.HiddenFor(x=>Model.ItemList[currentIndex].Type) 
```

...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-06T10:06:49.173

您还可以使用解构和元组并尝试这样的事情：

```
@foreach (var (index, member) in @Model.Members.Select((member, i) => (i, member)))
{
  <div>@index - @member.anyProperty</div>

  if(index > 0 && index % 4 == 0) { // display clear div every 4 elements
      @: <div class="clear"></div>
  }
} 
```

有关更多信息，您可以查看此[链接](https://docs.microsoft.com/en-us/dotnet/csharp/deconstruct)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-16T03:56:09.583

非常简单：

```
 @{
         int i = 0;
         foreach (var item in Model)
         {
          <tr>
          <td>@(i = i + 1)</td>`
          </tr>
         }
      }` 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-07T17:22:22.460

以上所有答案都需要视图中的逻辑。视图应该是愚蠢的并且包含尽可能少的逻辑。为什么不在视图模型中创建与列表中位置相对应的属性，例如：

```
public int Position {get; set} 
```

在您的视图模型构建器中，您设置位置 1 到 4。

但是..甚至还有更清洁的方法。为什么不让 CSS 类成为你的视图模型的属性呢？因此，您只需执行以下操作，而不是部分中的 switch 语句：

```
<div class="@Model.GridCSS"> 
```

将 switch 语句移动到您的视图模型构建器并在那里填充 CSS 类。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-26T04:35:52.470

如果您想在您的视图的 foreach 循环中计算来自模型的引用（即：客户端将地址作为引用，因此您想计算客户端将存在多少地址），例如：

```
 @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.DtCadastro)
                                </td>

                                <td style="width:50%">
                                    @Html.DisplayFor(modelItem => item.DsLembrete)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.DtLembrete)
                                </td>
                                <td>
                                    @{ 
                                        var contador = item.LembreteEnvolvido.Where(w => w.IdLembrete == item.IdLembrete).Count();
                                    }
                                    <button class="btn-link associado" data-id="@item.IdLembrete" data-path="/LembreteEnvolvido/Index/@item.IdLembrete"><i class="fas fa-search"></i> @contador</button>
                                    <button class="btn-link associar" data-id="@item.IdLembrete" data-path="/LembreteEnvolvido/Create/@item.IdLembrete"><i class="fas fa-plus"></i></button>
                                </td>
                                <td class="text-right">
                                    <button class="btn-link delete" data-id="@item.IdLembrete" data-path="/Lembretes/Delete/@item.IdLembrete">Excluir</button>
                                </td>
                            </tr>
                        } 
```

按照编码执行：

```
@{ var contador = item.LembreteEnvolvido.Where(w => w.IdLembrete == item.IdLembrete).Count();} 
```

并像这样使用它：

```
<button class="btn-link associado" data-id="@item.IdLembrete" data-path="/LembreteEnvolvido/Index/@item.IdLembrete"><i class="fas fa-search"></i> @contador</button> 
```

ps：不要忘记在你的 DbContext 里面添加 INCLUDE 到那个引用，例如，你的 Index 动作控制器，以防这是一个 IEnumerable 模型。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-20T16:56:10.140

我更喜欢使用这种扩展方法：

```
public static class Extensions
{
    public static IEnumerable<(T item, int index)> WithIndex<T>(this IEnumerable<T> self)
        => self.Select((item, index) => (item, index));
} 
```

来源：

[https://stackoverflow.com/a/39997157/3850405](https://stackoverflow.com/a/39997157/3850405)

剃刀：

```
@using Project.Shared.Helpers 

@foreach (var (item, index) in collection.WithIndex())
{
<p>
    Name: @item.Name Index: @index
</p>
} 
```

# iphone - iPad和iPhone之间是否有字体大小比例

> ID：10326408
> 
> 赞同：0
> 
> 时间：2012-04-26T02:24:17.717
> 
> 标签：iphone, ipad, fonts

我为 iPhone 的客户端设计了一个应用程序。他们想为 iPad 创建应用程序。如果iphone上的字体大小是12pt，ipad上的字体大小会加倍吗？iPhone 和 iPad 上的字体大小有准确的比例吗？他们的作者希望使用 iPad 上字体的“精确”大小，我认为这是看什么适合以及如何流动。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:31:44.937

我没有找到默认比率，但我建议 18

# c++ - 函子参数和结果的任意类型转换

> ID：10326413
> 
> 赞同：3
> 
> 时间：2012-04-26T02:24:55.453
> 
> 标签：c++, c++11, functor, template-meta-programming

我有一堂这样的课：

```
template <typename T>
struct operation {
    typedef T result_type;
    typedef ::std::shared_ptr<operation<T> > ptr_t;
}; 
```

我有一个匹配这种`::std::function`类型的函子：

```
::std::function<int(double, ::std::string)> 
```

我想创建一个具有如下签名的函子：

```
operation<int>::ptr_t a_func(operation<double>::ptr_t, operation< ::std::string>::ptr_t); 
```

我想以一种自动化的方式来做这件事，这样我就可以为任何给定的`::std::function`类型创建一个类似的函子。

最后，我想把这个皱纹放进去。这个：

```
::std::function<int(operation<double>::ptr_t, ::std::string)> 
```

应该导致：

```
operation<int>::ptr_t a_func(operation<double>::ptr_t, operation< ::std::string>::ptr_t); 
```

因为如果一个仿函数已经接受了一个`operation<T>::ptr_t`，这意味着它理解它们是什么并且愿意处理它们本身的异步性质。

我该怎么做？我在这里有一个天真的和部分工作的尝试：

```
template <typename argtype>
struct transform_type {
   typedef typename operation<argtype>::ptr_t type;
};

template <typename ResultType, typename... ArgTypes>
::std::function<typename transform_type<ResultType>::type(typename transform_type<ArgTypes...>::type)>
make_function(::std::function<ResultType(ArgTypes...)>)
{
   return nullptr;
} 
```

它不会检测到已经是类型的参数`std::shared_ptr<operation<T> >`。并且 transform_type 的这种特化无法编译：

```
template <typename argtype>
struct transform_type<typename operation<argtype>::ptr_t>
{
   typedef typename stub_op<argtype>::ptr_t type;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:56:19.440

```
template<template<typename...> class F, typename Sig>
struct transform;

template<template<typename...> class F, typename R, typename... A>
struct transform<F, R(A...)> {
    using type = typename F<R>::ptr_t(typename F<A>::ptr_t...);
}; 
```

用法如下：

```
template<typename Sig>
void foo(std::function<Sig> f)
{
    using transformed_type = typename transform<operation, Sig>::type;
    std::function<transformed_type> g;
} 
```

至于避免转换已经处于所需形式的类型的专业化：

```
template<typename T>
struct operation<std::shared_ptr<T>> {
    using ptr_t = std::shared_ptr<T>;
    using result_type = ptr_t; // Or perhaps this needs to be T, you haven't said
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T03:32:11.740

我相信我已经在[R. Martinho Fernandez](https://stackoverflow.com/users/46642/r-martinho-fernandes)的帮助下解决了这个问题：

```
template <typename T>
struct is_op_ptr {
 private:
   // Returns false_type, which has a ::value that is false.
   template <class AT>
   static constexpr std::false_type is_it_a_ptr(...);

   // Returns true_type (if enable_if allows it to exist).
   template <class AT>
   static constexpr typename ::std::enable_if<
      ::std::is_same<
         AT,
         typename operation<typename AT::element_type::result_type>::ptr_t>::value,
      std::true_type>::type  // note the true_type return
   is_it_a_ptr(int); // no definition needed

 public:
   // do everything unevaluated
   static constexpr bool value = decltype(is_it_a_ptr<T>(0))::value;
};

template <typename T>
struct transform_type
   : ::std::conditional< is_op_ptr<T>::value, T, typename operation<T>::ptr_t>
{
}; 
```

这也允许我查询一个类型是否会在包装函数的构造中进行转换。

# ruby - 代理背后的omniauth

> ID：10326416
> 
> 赞同：3
> 
> 时间：2012-04-26T02:25:13.573
> 
> 标签：ruby, sinatra, omniauth

我有一个使用omniauth 的小应用程序，我正在使用LinkedIn 提供商（omniauth-linkedin）对其进行测试。不幸的是，我的测试环境在代理后面。所以我需要通过代理访问linkedin。

如何设置代理地址以使对linkedin的请求成功？它似乎没有遵守 http_proxy 设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T16:59:48.063

我想通了，我想..

```
ue OmniAuth::Builder do
  provider :linkedin, "KEY", "SECRET", {:client_options => { :proxy =>\
 ENV["HTTP_PROXY"] || ENV["http_proxy"]  }}
end 
```

# sql - Rails 3.2.x 未定义方法“加入”

> ID：10326420
> 
> 赞同：1
> 
> 时间：2012-04-26T02:25:33.620
> 
> 标签：sql, ruby-on-rails, activerecord, join, ruby-on-rails-3.2

我有一个具有多对多关系的篮球应用程序，其中一名教练可以执教多个球队，而一个球队可以有许多教练。

**Coaches_Controller.rb**

```
 def index
    @coaches = Coach.joins(:teams).select("coaches.first_name, coaches.last_name, teams.team_level")

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @coaches }
    end
  end 
```

**索引.html.erb**

```
<% @coaches.each do |coach| %>
      <tr>
        <td><%= link_to coach.first_name, coach_path(coach) %></td>
        <td><%= coach.last_name %></td>
        <td><%= coach.team_level %></td>
        <td>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_coach_path(coach), :class => 'btn btn-mini' %>
          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                      coach_path(coach),
                      :method => :delete,
                      :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')),
                      :class => 'btn btn-mini btn-danger' %>
        </td>
      </tr>
    <% end %> 
```

我收到了这个错误，我不太清楚为什么......

[http://i.stack.imgur.com/5a6oB.png](http://i.stack.imgur.com/5a6oB.png)

想法？我觉得这是我没有看到的小东西......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:47:32.090

我可以看到错误的一件事是`coaches.id`您的`select`. 你需要`id`for`coach_path(coach)`才能工作。试试这个：

```
@coaches = Coach.joins(:teams).select("coaches.id, coaches.first_name, coaches.last_name, teams.team_level") 
```

不确定这是否可以解决`join`您遇到的错误。

# android - java.lang.NoClassDefFoundError - 用于活动类

> ID：10326421
> 
> 赞同：2
> 
> 时间：2012-04-26T02:25:44.143
> 
> 标签：android, adt, android-activity, android-viewpager

我正在调用另一个活动。而第二个加载我得到

```
java.lang.NoClassDefFoundError 
```

被调用的动作类

```
public class Entry extends Activity implements ViewPager.OnPageChangeListener {

ViewPager form;

@Override
public void onCreate( Bundle savedInstanceState )
{
....
form.setOnPageChangeListener(this);
...
}
} 
```

如果我删除了`implements ViewPager.OnPageChangeListener`和，活动就会加载`form.setOnPageChangeListener(this)`，但是用这些它会抛出

```
java.lang.NoClassDefFoundError.. 
```

这段代码完全适用于 ADT16，我更新到 ADT18 并陷入了这个混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:35:42.343

试试这个：

在项目中创建新文件夹`libs`并将所有外部 JAR 文件复制到此文件夹。

然后，右键单击`Project`-> `Properties`-> `Java Build Path`。在这里将 JAR 文件的路径更改为文件`libs`夹，并从计算机路径中删除您提供的外部 jar 文件的路径。之后它将起作用。

*注意：* * 如果您的项目中已有文件夹“lib”，则只需将文件夹名称“lib”更改为“libs”。如果您不明白我的意思，请查看此[站点](http://xrigau.wordpress.com/2012/03/22/fix-some-problems-with-libraries-in-the-adt-17-plugin-10/)

`libs`文件夹名称不应该`Libs`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:14:56.663

ViewPager.OnPageChangeListener类[来自](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)版本 4（冰淇淋三明治）库。您的项目没有找到它们，因此配置不正确。首先要检查的是**"Project Settings" -> Android**，并确保为您的项目构建目标检查 4.0 或 4.0.3。

有时，即使您选择了其中之一，eclipse 仍然使用较旧的库。检查的两个地方是：

1.  您的**AndroidManifest.xml**文件。确保您`android:versionCode="4"`在主清单中有，并且`<uses-sdk android:minSdkVersion="14" />`（至少 14 个）

2.  然后检查您的**project.properties**文件并确保您有：`target=android-14`.

还有一种方法可以通过`support-v4.jar`在 libs 目录中包含文件来将额外的 4.0 功能添加到旧平台。

上述选项之一应该可以解决您的问题。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:15:24.737

我有第二节课，需要一个罐子。我检查了 libs 文件夹，发现这个 jar 没有复制到 libs 文件夹中。因此，每当我尝试启动第二个活动时，它都会给我 NoClassDefFoundError。只需将jar复制到libs文件夹中，问题就解决了。

# spring-mvc - Spring/JSTL 迭代列表>

> ID：10326427
> 
> 赞同：0
> 
> 时间：2012-04-26T02:27:06.007
> 
> 标签：spring-mvc, controller, jstl

我有一个从 MySQL 查询返回的行的小列表，我想在 MVC 视图中显示这些行。我很难让视图正常工作。在我最初拥有的 DAO 中

```
return this.jdbcTemplate.queryForList(queryCohort); 
```

我虽然会工作。这似乎是一个非常标准的查询。无论如何，我将其更改为

```
List<Map<String, Object>> graduates = this.jdbcTemplate.queryForList(queryCohort);
return graduates; 
```

遵循这个过程。在我的控制器中，我有

```
List<Map<String, Object>> graduates = awardRecipientDAO.getAwardRecipientCohort(cohort);
mav.addObject(graduates); 
```

控制器代码如下：

```
ModelAndView mav = new ModelAndView("success");
    mav.addObject("conferralDate", conferralDate);
    List<Map<String, Object>> graduates = awardRecipientDAO.getAwardRecipientCohort(cohort);
    mav.addObject(graduates);
    return mav; 
```

视图代码如下：

```
<c:forEach var="item" items="${graduates.graduates}">
    <tr>
        <td>${item.unique_code}</td>
        <td>${item.surname}, {$item.givenname1}</td>
        <td>${item.birth_date}</td>
        <td>${item.standing_name}</td>
    </tr>
</c:forEach> 
```

视图没有输出，但我在日志中得到以下信息：

```
JstlView:[ 328] Added model object 'linkedCaseInsensitiveMapList' 
of type [java.util.ArrayList] to request in view with name 'success'
INFO: JstlView:[ 328] Added model object 'conferralDate' of type [java.util.Date] to request in view with name 'success' 
```

这是一致的`List<Map<String,Object>>`还是变量`graduates`？Date 匹配变量、类型和值。

db 输出看起来不错 -

```
INFO: {unique_code=aa001380, surname=Mouse, givenname1=Michael, birth_date=1928-11-01, standing_name=Alumni} 
```

有什么建议么？

# analytics - 将百分比值显示为自定义形状的填充

> ID：10326433
> 
> 赞同：2
> 
> 时间：2012-04-26T02:27:42.013
> 
> 标签：analytics, data-visualization

我正在寻找一些新选项，用于将百分比值显示为自定义形状的填充。考虑到这种效果类似于传统仪表板 UI 意义上的“进度温度计”。

## 注意事项

*   目标 - 显示自定义报告百分比值的图形元素。
*   格式 - 完整的图形（或信息图）本身，或通过 Photoshop/InDesign 甚至 iBooks 生成的 PDF 的一部分（作为使用它的借口）。
*   用法 - 我希望该过程是程序化的，以便重复使用。它需要准确，我希望解决方案有点面向对象，以应用于其他数据集和图形容器。这排除了手绘图表。
*   源数据 - 目前是 Excel 中的数据透视表，但我可以根据需要使用任何其他主机。
*   形状 - 是源自 Illustrator/Inkscape 的自定义矢量形状。最适合报告的分辨率和呈现的最终格式。我也会对任何其他生成形状的想法（如 java/javascript）感兴趣。
*   填充 - 我希望能够将填充表示为总面积的实际百分比（正确）和垂直比例的百分比。我想这种灵活性也将有助于将该方法重用为针对选定对象变量（高度、面积等）的填充值。

我知道我在编程语言或主机方面有点模糊，但这让我有机会打破通常的分析工具链并找出一些创新或新的解决方案。我对开源解决方案特别感兴趣，但我非常热衷于查看您可能建议的其他当前方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T02:00:17.657

如前所述，[D3](http://mbostock.github.com/d3/)似乎可以满足您的需求 - 以下是我认为您所要求的一些简单示例：

更改不同形状的填充颜色：http: [//jsfiddle.net/jsl6906/YCMb8/](http://jsfiddle.net/jsl6906/YCMb8/)

更改简单形状的“填充量”：http: [//jsfiddle.net/jsl6906/YCMb8/1/](http://jsfiddle.net/jsl6906/YCMb8/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T00:49:40.603

如果您将自己限制在可以通过更改其中一个尺寸轻松将百分比转换为新形状的形状中，则可以通过在第一个形状的基础上创建*第二个*形状并填充第二个形状的 100%来覆盖显示部分形状。

这显然最适用于正方形、矩形、圆形等简单的形状，其中很容易将“50% 的面积”或“75% 的高度”转换为矢量节点的操作。

但是，如果您想支持真正任意的自定义形状，事情就会变得更加困难。处理这个问题的一种方法是将复杂的“进度条”分解成“进度条”（例如，代表总进度的 10% 的温度计灯泡，然后是剩余 90% 的简单条）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T11:17:45.560

这对您来说可能有点开放，但[d3.js](http://d3js.org/)非常强大。网站上可能有一些有用的模板，或者您可以从库中构建自己的模板。

# .net - PostgreSQL 服务停止工作

> ID：10326435
> 
> 赞同：1
> 
> 时间：2012-04-26T02:27:58.790
> 
> 标签：.net, database, wcf, web-services, postgresql

我遇到的问题是我的 PostgreSQL 实例在我的应用程序运行后的某个时候经常停止工作。通过重新启动 PostgreSQL windows 服务，我可以让它再次工作，但我需要知道是什么让我的 postgres 实例停止工作。

通过查看 postgres 日志，我收到此错误（以及其他错误）：

```
"FATAL:  could not reattach to shared memory (key=348, addr=01E70000): 487
2012-04-25 11:05:24 PDT WARNING:  worker took too long to start; cancelled" 
```

这是我正在处理的场景。我正在使用在 PostgreSQL (8.3) 数据库上进行一些处理的 WCF 服务。每 10 秒就有 2 台“客户端”机器使用此 Web 服务。

从客户端应用程序中，我正在初始化 Web 服务，例如

```
RemoteServiceClient service = new RemoteServiceClient(); 
```

在 Web 服务方面，在每次初始化时，我都会创建一个新的 postgres 连接实例。这里我没有打开连接，只是初始化：

```
public class Service : IService
{
    NpgsqlConnection connection = null;

    /// <summary>
    /// Default constructor for remote service
    /// </summary>
    public Service()
    {
        connection = new NpgsqlConnection(Utils.DBConnectionString);
    }
} 
```

在我的 Web 服务的功能中，我根据需要打开和关闭连接，这样我就不会在运行中留下打开的连接。通过查看机器使用 Web 服务时的常见活动，我注意到只有大约 3-4 个连接（当没有数据库活动发生时为空闲）。我检查了 postgres 默认设置，“max_connections”设置为 100。

我真的很难解决这个问题，任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T05:59:23.503

[版本 8.3.8](http://www.postgresql.org/docs/8.3/interactive/release-8-3-8.html)（发布日期：2009-09-09）中有一个针对此问题的错误修复：

> 修复 Windows 共享内存分配代码（Tsutomu Yamada，Magnus）
> 
> 此错误导致经常报告的“无法重新附加到共享内存”错误消息。

使用检查您的版本`SELECT version();`

# mysql - MySQL - 计算登录的团队成员

> ID：10326439
> 
> 赞同：-4
> 
> 时间：2012-04-26T02:29:56.270
> 
> 标签：mysql, sql

我有以下表格：

```
CREATE TABLE 成员 (
  member_id int(1) 无符号 NOT NULL AUTO_INCREMENT,
  登录 tinyint(1) 非空，
  主键（member_id），
  唯一键 member_id (member_id)
) 引擎=InnoDB 默认字符集=utf8；

插入成员（member_id，logged_in）值
  (1, 0),
  (2, 1),
  (3, 1),
  (4, 1),
  (5, 0);

+------------------------+
| 会员 |
+-----------+------------+
| 会员编号 | 登录 |
+-----------+------------+
| 1 | 0 |   
| 2 | 1 |
| 3 | 1 |
| 4 | 1 |
| 5 | 0 |
+-----------+------------+

```

```
创建表 team_members (
  team_id int(1) 无符号非空，
  member_id int(1) 无符号非空，
  主键 (team_id,member_id)
) 引擎=InnoDB 默认字符集=utf8；

插入到 team_members (team_id, member_id) 值
  (1, 1),
  (1, 2),
  (2, 3),
  (2, 4),
  (3, 5);

+----------+
| 团队成员 |
+---------+-----------+
| team_id | 会员编号 |
+---------+-----------+
| 1 | 1 |
| 1 | 2 |
| 2 | 3 |
| 2 | 4 |
| 3 | 5 |
+---------+-----------+

```

这是我需要实现的输出：

```
+---------+----------+
| team_id | 登录用户数 |
+---------+----------+
| 1 | 1 |
| 2 | 2 |
| 3 | 0 |
+---------+----------+

```

我正在尝试以下 sql 查询，但它没有返回预期的输出：

```
选择
  tm.team_id,
  (SELECT COUNT(m.logged_in) FROM members m WHERE m.logged_in = 1) AS logged_in_users_count
从
  会员米
  INNER JOIN team_members tm ON (m.member_id = tm.member_id)
通过...分组
  tm.team_id

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:33:36.483

```
选择
 team_members.team_id,
 COUNT(members.logged_in)
从
 team_members LEFT JOIN members
 ON (team_members.member_id = members.member_id AND members.logged_in = 1)
GROUP BY
  team_members.team_id;

```

# objective-c - Objective C arc——保持对类的引用

> ID：10326440
> 
> 赞同：4
> 
> 时间：2012-04-26T02:30:02.213
> 
> 标签：objective-c, ios, automatic-ref-counting

我想要一个 Class 类型的 ivar，并在传入后保留指针。但无论我做什么，arc 都不会让我这样做。例如，如果我声明

```
@property (nonatomic, strong) Class myClass; 
```

编译器决定 myClass 应该是 unsafe_unretained。如果我尝试这个：

```
-(id) initWithClass: (Class) passedInClass {
   if ((self = [super init])) {
     self.myClass = passedInClass;
   }
   return self;
} 
```

发生的情况是，即使调用代码中的类不是 nil，它在 init 方法中也是 nil。

没有关闭电弧，有没有办法解决这个问题？

编辑：这个问题是错误的。它确实有效。请参阅已接受的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T04:18:23.397

与针对 10.7 和 5.1 的 Xcode 4.3.2 广告一样工作：

```
@interface MOYNObject : NSObject
@property (nonatomic, strong, readwrite) Class myClass;
@end

@implementation MOYNObject
@synthesize myClass;

- (id)initWithClass:(id)pClass
{
    self = [super init];
    if (self != nil)
        self.myClass = pClass;
    assert(self.myClass);
    CFShow((__bridge const void*)self.myClass);
    return self;
}

@end

int main(int argc, const char* argv[]) {
    @autoreleasepool {
        MOYNObject * o = [[MOYNObject alloc] initWithClass:[NSString class]];
        // ...
    }
    return 0;
} 
```

你领先还是落后于 4.3.2？

# selenium - 在测试 IE 时，watin 与 selenium 相比如何？

> ID：10326447
> 
> 赞同：2
> 
> 时间：2012-04-26T02:31:05.600
> 
> 标签：selenium, automation, watin

我的团队已经开始使用 selenium 来做 IE 浏览器测试。一个主要的症结在于 selenium 很难（阅读：看似不可能）确定页面何时完全加载。我们使用了大量的 javascript、相当数量的 AJAX 和少量的第三方控件。因此，很难知道所有活动何时完成并且页面已准备好进行测试。大部分代码都是遗留的，所以简单地重写或重构页面不是一种选择——它是一个非常大的企业应用程序。

我的主要问题是：Watin 在这方面做得更好吗？它是否有任何内置机制来检测页面何时完全加载？

不幸的是，我们不能只是等待一个元素变得可见，这是硒的普遍接受的做法。通常我们正在处理动态元素的滚动列表并且需要等待 javacript 完成，因为我们必须等待的元素数量不确定（测试）。

切换到另一个浏览器根本不可能，我们必须找到一个适用于 IE 的解决方案。我正在尝试决定是否值得我们花时间调查 watin，或者我们是否只是将一组限制换成另一组限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T03:12:01.493

我使用 WatiN 已经有一段时间了，最​​近又改用 Selenium，因为我觉得它实际上比 WatiN 更好地处理了你解释的情况（可以在 Selenium WebDriver 的驱动程序上创建一个“等待”）。但是，我认为这真的是一个见仁见智的问题。WatiN 仅适用于 IE，因此您仅限于此，无法扩展到其他浏览器。由于这个原因，WatiN 是为 IE 设计的，这表明你可能会在 IE 上获得更好的成功。

附带说明一下，您是否尝试过使用 Windows 调用来检查浏览器是否已完成加载？我相信这是可能的？在 Selenium 中添加 XPath 可能相当有用，但在 IE 中速度较慢。

编辑：或者，您不能调用一些 javascript 来查看页面上的 javascript 何时完成吗？

编辑编辑：[这篇文章](https://stackoverflow.com/q/417380/1314366)也涵盖了很多比较和意见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:01:29.067

就我与 WatiN 的合作而言，它比 Selenium 更容易。我们也有很多 javascript、ajax - 我的解决方案是使用

```
WebBrowser.Current.Div(ids.waitForBagGridToLoadIdentifier).WaitUntil("style", "display: none;"); 
```

等待特定的 javascript 完成它的工作。Selenium 可能有类似的方法。

# android - 拉伸以水平填充行android xml

> ID：10326451
> 
> 赞同：0
> 
> 时间：2012-04-26T02:31:19.453
> 
> 标签：android, xml, android-linearlayout, tablerow

我可能在这里遗漏了一些明显的东西，但我似乎无法弄清楚。我正在寻找像 1、5 或 6 这样的结果，即单排 3 个均匀分布的按钮，这些按钮填充了屏幕的宽度。然而不幸的是，这些方法中的每一个似乎都有问题。1 给我一个警告，“这个 TableRow 布局或其 TableLayout 父级可能没用”，而 5 和 6 给出“嵌套权重对性能不利”。所以基本上我想知道最好的方法是什么。我应该忽略 1 号上的警告，还是可以让它们仅使用 TableRow 或 TableLayout 正确显示

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:orientation="vertical" >

<!-- No.1 -->
<TableLayout android:id="@+id/tableLayout1" android:layout_width="fill_parent" android:layout_height="wrap_content" android:stretchColumns="*" >
    <TableRow android:id="@+id/tbRow0" android:layout_width="wrap_content" android:layout_height="wrap_content" >
        <Button android:id="@+id/btn1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/num1" />
        <Button android:id="@+id/btn2" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/num2" />
        <Button android:id="@+id/btn3" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/num3" />
    </TableRow>
</TableLayout>

<!-- No.2 -->
<TableRow android:id="@+id/tbRow1" android:layout_width="fill_parent" android:layout_height="wrap_content" >
    <Button android:id="@+id/btn4" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/num1" />
    <Button android:id="@+id/btn5" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/num2" />
    <Button android:id="@+id/btn6" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/num3" />
</TableRow>

<!-- No.3 -->
<TableRow android:id="@+id/tbRow2" android:layout_width="fill_parent" android:layout_height="wrap_content" >
    <Button android:id="@+id/btn7" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="@string/num1" />
    <Button android:id="@+id/btn8" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="@string/num2" />
    <Button android:id="@+id/btn9" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="@string/num3" />
</TableRow>

<!-- No.4 -->
<TableRow android:id="@+id/tbRow3" android:layout_width="fill_parent" android:layout_height="wrap_content" android:stretchColumns="*" >
    <Button android:id="@+id/btn10" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/num1" />
    <Button android:id="@+id/btn11" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/num2" />
    <Button android:id="@+id/btn12" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/num3" />
</TableRow>

<!-- No.5 -->
<TableRow android:id="@+id/tbRow4" android:layout_width="fill_parent" android:layout_height="wrap_content" >
    <Button android:id="@+id/btn13" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_weight="1" android:text="@string/num1" />
    <Button android:id="@+id/btn14" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_weight="1" android:text="@string/num2" />
    <Button android:id="@+id/btn15" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_weight="1" android:text="@string/num3" />
</TableRow>

<!-- No.6 -->
<LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content" >
    <Button android:id="@+id/btn16" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1" android:text="@string/num1" />
    <Button android:id="@+id/btn17" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1" android:text="@string/num2" />
    <Button android:id="@+id/btn18" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1" android:text="@string/num3" />
</LinearLayout>

<!-- No.7 -->
<LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content" >
    <Button android:id="@+id/btn19" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/num1" />
    <Button android:id="@+id/btn20" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/num2" />
    <Button android:id="@+id/btn21" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/num3" />
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:52:00.073

我认为 5 是正确的，而且我没有收到嵌套权重警告。

也许这与 Agarwal 指出的有关。

**编辑：**对不起，我虽然 5 使用的是 LinearLayout。我的意思是：

```
<LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content" >
    <Button android:id="@+id/btn13" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_weight="1" android:text="@string/num1" />
    <Button android:id="@+id/btn14" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_weight="1" android:text="@string/num2" />
    <Button android:id="@+id/btn15" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_weight="1" android:text="@string/num3" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:38:38.880

在第一行之后的 xml 文件中，您正在关闭 tablelayout，但即使您在 2 ,5 行中使用表行也可能是一个问题。

如果您只需要一个，那么最好使用线性布局，因为性能不错，因为您有一个小的 xml 文件，这还可以。

# jqgrid - jqgrid 设置编辑对话框的宽度

> ID：10326452
> 
> 赞同：2
> 
> 时间：2012-04-26T02:31:38.900
> 
> 标签：jqgrid

我正在使用 jqgrid，并且出现了一个编辑对话框：我不想要默认宽度 300，而是 700。

我搜索并找到了一些示例，并将代码更改为：

```
$("#list").navGrid('#pager', { edit: false, add: true, del: true, search: false }, {width:700}, {}, { url: "/../Invoice/DeleteInvoiceLine" }); 
```

这应该将宽度更改为 700？它没有？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T05:48:06.903

添加和编辑对话框有单独的设置。您使用[navGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3anavigator#definition)`edit: false, add: true`的选项，但仅设置“添加”对话框的宽度。如果你真的只需要添加对话框

```
$("#grid_id").navGrid('#gridpager', { edit: false, search: false },
    {/*Edit options*/}, { width: 700 }, { url: "/../Invoice/DeleteInvoiceLine" }); 
```

只有编辑对话框，您可以使用

```
$("#grid_id").navGrid('#gridpager', { add: false, search: false },
    { width: 700 }, {/*Add options*/}, { url: "/../Invoice/DeleteInvoiceLine" }); 
```

如果您需要具有不同选项的“添加”和“编辑”对话框，则应另外使用[recreateForm: true](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#properties)选项：

```
$("#grid_id").navGrid('#gridpager', { search: false },
    { width: 700, recreateForm: true },
    { width: 600, recreateForm: true },
    { url: "/../Invoice/DeleteInvoiceLine" }); 
```

# actionscript-3 - actionscript 3 错误 1136：参数数量不正确。预计 1

> ID：10326457
> 
> 赞同：0
> 
> 时间：2012-04-26T02:32:08.123
> 
> 标签：actionscript-3, flash-cs5

当我调用一个方法时，我得到 1136 错误，它说我需要 1 个参数，但我没有请求任何参数：

```
function tutorial()
{
main.arcade.gotoAndStop(5);
gotoAndPlay(2);
Main();
} 
```

这是我正在打电话的课程

```
package 
{

import flash.display.MovieClip;
import flash.events.Event;
import flash.events.Event;
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;

public class Main extends MovieClip
{

    var temp:int;
    var temp2:int;
    var onLeft:Boolean = true;
    var coolDown:int;
    var distance:int;
    var p2h= new hitBar2();
    var p1h= new hitBar();
    var roy = new Roy();
    var shane = new Shane();

    public function Main(){
        combat(roy,shane);

    } 
```

我对actionscript和一般编程很陌生，请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:01:20.233

你不能像这样调用构造函数

```
Main(); 
```

尝试

```
var main:Main = new Main(); 
```

此外，如果 Main 类是您的应用程序主类（入口点），那么您可以执行以下操作。

```
package 
{
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.Event;
    import flash.events.KeyboardEvent;
    import flash.ui.Keyboard;

    public class Main extends MovieClip
    {
    var temp:int;
    var temp2:int;
    var onLeft:Boolean = true;
    var coolDown:int;
    var distance:int;
    var p2h= new hitBar2();
    var p1h= new hitBar();
    var roy = new Roy();
    var shane = new Shane();

    public function Main()
    {
        if (stage) init();
        else addEventListener(Event.ADDED_TO_STAGE, init);
    }

    private function init():void
    {
       removeEventListener(Event.ADDED_TO_STAGE,init);
       combat(roy,shane);
    }

    private function combat(roy:Roy,shane:Shane):void
    {

    }
} 
```

# c# - 是否可以制作 WinRT 服务

> ID：10326459
> 
> 赞同：5
> 
> 时间：2012-04-26T02:32:20.823
> 
> 标签：c#, windows-runtime

由于WinRT具有独特的功能，我想知道是否要制作针对WinRT的Windows服务？如果不可能，是否有使不可见的 WinRT/Metro 应用程序成为可能的解决方法？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T23:20:15.123

否是正确答案。Metro 应用程序在 Metro shell 和执行容器内执行，该容器创建远离系统资源（包括服务）的沙箱。因此，metro 应用程序无法访问本地服务。同样，出于这个原因，metro 应用程序不能成为服务。

后台任务和通过 Windows 通知服务推送通知是 Metro 应用程序在不活动时与用户交互的唯一方式。否则，当应用程序不活动（不可见）时，它的所有线程都被挂起（与服务不同）。

至于后台任务，它们的活动受到与 Metro 应用程序相同的限制，并且每 2 小时限制为一个 CPU 秒（有一个例外）。推送通知可以更频繁地执行，但只能更新磁贴或发出 toast 通知。

Metro 应用程序的意图不同于传统的桌面应用程序：

> Metro 应用程序是独立于架构的（在 Intel 或 arm 上运行）。Metro 应用程序是触手可及的，专为触摸屏而构建。Metro 应用程序是完全硬件加速的。Metro 应用程序利用经过认证的设备提供的下一代硬件，包括前所未有的电池寿命。Metro 应用程序是 Windows 商店提供的唯一应用程序。

看，选择 Metro 应用程序确实意味着承认桌面应用程序的一些无限功能。但是，收益也很显着。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:11:10.380

不，这是不可能的（服务枯萎，或“隐形”地铁应用程序）。

您可以运行可能会执行您所追求的后台任务，但在不了解您的问题的情况下我不能说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:37:04.370

这取决于你想做什么。

WinRT 是一种 API，可以从 Metro（Windows 应用商店）应用程序和桌面/C# 应用程序访问。

但是没有公开完整的 API - 请参阅此处允许访问的内容：http: [//msdn.microsoft.com/en-us/library/windows/desktop/hh920511%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh920511%28v=vs.85%29.aspx)

Hanselman 展示了如何向 WinRT 添加引用：

*   编辑 csproj：

> ```
> <PropertyGroup>
>   <TargetPlatformVersion>8.0</TargetPlatformVersion>
> </PropertyGroup> 
> ```

*   然后添加对 Core/Windows 的引用。

[http://www.hanselman.com/blog/HowToCallWinRTAPIsInWindows8FromCDesktopApplicationsWinRTDiagram.aspx](http://www.hanselman.com/blog/HowToCallWinRTAPIsInWindows8FromCDesktopApplicationsWinRTDiagram.aspx)

# file-upload - 使用 Jersey 客户端上传大文件时如何避免 OutOfMemoryError

> ID：10326460
> 
> 赞同：20
> 
> 时间：2012-04-26T02:32:24.660
> 
> 标签：file-upload, jersey, large-files

我正在使用 Jersey 客户端进行基于 http 的请求。如果文件很小但在我发布大小为 700M 的文件时出错，则效果很好：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2786)
    at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:94)
    at sun.net.www.http.PosterOutputStream.write(PosterOutputStream.java:61)
    at com.sun.jersey.api.client.CommittingOutputStream.write(CommittingOutputStream.java:90)
    at com.sun.jersey.core.util.ReaderWriter.writeTo(ReaderWriter.java:115)
    at com.sun.jersey.core.provider.AbstractMessageReaderWriterProvider.writeTo(AbstractMessageReaderWriterProvider.java:76)
    at com.sun.jersey.core.impl.provider.entity.FileProvider.writeTo(FileProvider.java:103)
    at com.sun.jersey.core.impl.provider.entity.FileProvider.writeTo(FileProvider.java:64)
    at com.sun.jersey.multipart.impl.MultiPartWriter.writeTo(MultiPartWriter.java:224)
    at com.sun.jersey.multipart.impl.MultiPartWriter.writeTo(MultiPartWriter.java:71)
    at com.sun.jersey.api.client.RequestWriter.writeRequestEntity(RequestWriter.java:300)
    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler._invoke(URLConnectionClientHandler.java:204)
    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:147)
    at com.sun.jersey.api.client.Client.handle(Client.java:648)
    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:680)
    at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)
    at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:568)
    at TestHttpRequest.main(TestHttpRequest.java:42) 
```

这是我的代码：

```
ClientConfig cc = new DefaultClientConfig();
        Client client = Client.create(cc);
        WebResource resource = client.resource("http://localhost:8080/JerseyWithServletTest/helloworld");
        FormDataMultiPart form = new FormDataMultiPart();
        File file = new File("E:/CN_WXPPSP3_v312.ISO");
        form.field("username", "ljy");
        form.field("password", "password");
        form.field("filename", file.getName());
        form.bodyPart(new FileDataBodyPart("file", file, MediaType.MULTIPART_FORM_DATA_TYPE));
        ClientResponse response = resource.type(MediaType.MULTIPART_FORM_DATA).post(ClientResponse.class, form); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-27T12:43:21.523

您可以使用流。在客户端上尝试这样的事情：

```
InputStream fileInStream = new FileInputStream(fileName);
String sContentDisposition = "attachment; filename=\"" + fileName.getName()+"\"";
WebResource fileResource = a_client.resource(a_sUrl);       
ClientResponse response = fileResource.type(MediaType.APPLICATION_OCTET_STREAM)
                        .header("Content-Disposition", sContentDisposition)
                        .post(ClientResponse.class, fileInStream); 
```

在服务器上有这样的资源：

```
@PUT
@Consumes("application/octet-stream")
public Response putFile(@Context HttpServletRequest a_request,
                         @PathParam("fileId") long a_fileId,
                         InputStream a_fileInputStream) throws Throwable
{
    // Do something with a_fileInputStream
    // etc 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-30T13:29:43.047

为了使您的代码不依赖于上传文件的大小，您需要：

1.  使用流
2.  定义球衣客户的夹头尺寸。例如： `client.setChunkedEncodingSize(1024);`

*服务器*：

```
 @POST
    @Path("/upload/{attachmentName}")
    @Consumes(MediaType.APPLICATION_OCTET_STREAM)
    public void uploadAttachment(@PathParam("attachmentName") String attachmentName, InputStream attachmentInputStream) {
        // do something with the input stream
    } 
```

*客户*：

```
 ...
    client.setChunkedEncodingSize(1024);
    WebResource rootResource = client.resource("your-server-base-url");
    File file = new File("your-file-path");
    InputStream fileInStream = new FileInputStream(file);
    String contentDisposition = "attachment; filename=\"" + file.getName() + "\"";
    ClientResponse response = rootResource.path("attachment").path("upload").path("your-file-name")
            .type(MediaType.APPLICATION_OCTET_STREAM).header("Content-Disposition", contentDisposition)
            .post(ClientResponse.class, fileInStream); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-30T14:01:22.707

下面是使用 Jersey 2.11 上传具有分块传输编码（即流）的（可能很大）文件的代码。

马文：

```
<properties>
    <jersey.version>2.11</jersey.version>
</properties>

<dependencies>
    <dependency>
        <groupId>org.glassfish.jersey.core</groupId>
        <artifactId>jersey-client</artifactId>
        <version>${jersey.version}</version>
    </dependency>
    <dependency>
    <groupId>org.glassfish.jersey.media</groupId>
        <artifactId>jersey-media-multipart</artifactId>
        <version>${jersey.version}</version>
    </dependency>
<dependencies> 
```

爪哇：

```
Client client = ClientBuilder.newClient(clientConfig);
client.property(ClientProperties.REQUEST_ENTITY_PROCESSING, "CHUNKED");

WebTarget target = client.target(SERVICE_URI); 
InputStream fileInStream = new FileInputStream(inFile);
String contentDisposition = "attachment; filename=\"" + inFile.getName() + "\"";
System.out.println("sending: " + inFile.length() + " bytes...");
Response response = target
            .request(MediaType.APPLICATION_OCTET_STREAM_TYPE)
            .header("Content-Disposition", contentDisposition)
            .header("Content-Length", (int) inFile.length())
            .put(Entity.entity(fileInStream, MediaType.APPLICATION_OCTET_STREAM_TYPE));
System.out.println("Response status: " + response.getStatus()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-07T10:06:07.920

在我的情况下（泽西 2.23.2）[rschmidt13 的解决方案](https://stackoverflow.com/a/31140433/771431) 给出了这个警告：

```
WARNING: Attempt to send restricted header(s) while the [sun.net.http.allowRestrictedHeaders] system property not set. Header(s) will possibly be ignored. 
```

这可以通过添加以下行来解决：

```
System.setProperty("sun.net.http.allowRestrictedHeaders", "true"); 
```

但是我认为可以使用`StreamingOutput`界面获得更清洁的解决方案。我发布了一个完整的示例，希望它可能有用。

## 客户端（文件上传）

```
WebTarget target = ClientBuilder.newBuilder().build()
            .property(ClientProperties.CHUNKED_ENCODING_SIZE, 1024)
            .property(ClientProperties.REQUEST_ENTITY_PROCESSING, "CHUNKED")
            .target("<your-url>");

StreamingOutput out = new StreamingOutput() {

    @Override
    public void write(OutputStream output) throws IOException, 
            WebApplicationException {

        try (FileInputStream is = new FileInputStream(file)) {

            int available;
            while ((available = is.available()) > 0) {
                // or use a buffer
                output.write(is.read());
            }
        }
    }
};

Response response = target.request().post(Entity.text(out)); 
```

## 服务器

```
@Path("resourcename")
public class MyResource {

    @Context
    HttpServletRequest request;

    @POST
    @Path("thepath")
    public Response upload() throws IOException, ServletException {

        try (InputStream is = request.getInputStream()) {
            // ...
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T02:35:43.630

如果可能的话，你能把你发送的文件分成更小的部分吗？这样会减少内存使用，但是需要在上传/下载代码两边更改代码。

如果你不能，那么你的堆空间太小了，试着用这个 JVM 参数增加它。在您的应用程序服务器中添加/更改`Xmx`JVM 选项。例如

```
-Xmx1024m 
```

将最大堆空间设置为 1Gb

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-02T22:16:23.973

```
@Consumes("multipart/form-data")
@Produces(MediaType.TEXT_PLAIN + ";charset=utf-8")
public String upload(MultipartFormDataInput input,  @QueryParam("videoId") String  videoId,
        @Context HttpServletRequest a_request) {

    String fileName = "";
    for (InputPart inputPart : input.getParts()) {
        try {

            MultivaluedMap<String, String> header = inputPart.getHeaders();
            fileName = getFileName(header);
            // convert the uploaded file to inputstream
            InputStream inputStream = inputPart.getBody(InputStream.class, null);               
            // write the inputStream to a FileOutputStream
            OutputStream outputStream = new FileOutputStream(new File("/home/mh/Téléchargements/videoUpload.avi"));
            int read = 0;
            byte[] bytes = new byte[1024];
            while ((read = inputStream.read(bytes)) != -1) {
                outputStream.write(bytes, 0, read);
            }
            System.out.println("Done!");
        } catch (IOException e) {
            e.printStackTrace();
            return "ko";
        }

    } 
```

# php - SQL 和 PHP：查找连接到“演示文稿”的所有“资产”

> ID：10326462
> 
> 赞同：1
> 
> 时间：2012-04-26T02:32:52.067
> 
> 标签：php, mysql, sql, oop

我真的需要一些关于 SQL 的帮助。

**问题一：**

如果资产在其表中具有相应的“presentationid”，则很容易获取属于“presentation”的所有“assets”。

```
SELECT * FROM asset WHERE presentationid = 3 
```

但是我如何通过加入来完成同样的事情呢？最好的说法是什么：

`SELECT * FROM asset WHERE ...`资产通过“presentationasset”连接到演示文稿：

```
TABLE asset
id
name

TABLE presentation
id
name

TABLE presenationasset
id
presentationid
assetid 
```

我希望这是有道理的。我想列出所有实际资产及其列，而不是关联表。:)

**问题2：（**不那么重要）

我有我的应用程序设置，因此“演示文稿”是一个类，“资产”是一个类......

考虑到问题 1，如何将每个关联资产作为“资产”对象返回？或者这甚至有关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:39:11.083

Q1：

```
SELECT a.id, a.name
FROM asset a 
JOIN presentationasset pa ON pa.assetid = a.id AND pa.presentationid = 3
JOIN presentation p ON p.id = pa.presentationid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T02:43:02.937

很公平 ：）

```
Select * from asset where id in
(select assetid from presentationasset where id in
(select id from presentation where name = "whateva")) 
```

或者

```
Select * from asset where id in
(select assetid from presentationasset where presentationid = 3) 
```

# javascript - 无法让 javascript 从 XML 列表中正确创建链接

> ID：10326463
> 
> 赞同：0
> 
> 时间：2012-04-26T02:32:55.730
> 
> 标签：javascript, html, xml

我正在尝试使用 javascript 创建一个带有来自 XML 文件的链接的 HTML 表。html tbale 工作正常，但是在创建链接时，链接似乎只有链接中我的字符串的第一个单词。如果我执行 alert(String) 命令，我会得到完整的字符串，但一旦我尝试制作 HTML LINK，它只会添加第一个单词。

例子：

基本链接： http: [//kat.ph/usearch/](http://kat.ph/usearch/) {SEARCH FIELD GOES HERE} XML 列表的字符串输出：“Hello Sir”

实际输出为链接（不带引号）： **“http://kat.ph/usearch/Hello”** 预期输出为链接（不带引号）：**“http://kat.ph/usearch/Hello Sir”**

代码如下

```
 <script type="text/javascript">
                if (window.XMLHttpRequest)
                {// code for IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp=new XMLHttpRequest();
                }
                else
                {// code for IE6, IE5
                    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
                xmlhttp.open("GET","playlist.xml",false);
                xmlhttp.send();
                xmlDoc=xmlhttp.responseXML; 

                document.write("<table border='1'>");
                var x=xmlDoc.getElementsByTagName("void");
                for (i=0;i<x.length;i++)
                { 
                    document.write("<tr><td>");
                    document.write(x[i].getElementsByTagName("string")[0].childNodes[0].nodeValue);
                    document.write("</td><td>");
                    //alert(x[i].getElementsByTagName("string")[0].childNodes[0].nodeValue); just testing to see what i get here
                    // document.write("<a href=http://www.kat.ph/usearch/" + x[i].getElementsByTagName("string")[0].childNodes[0].nodeValue + ">"+"KAT.PH"+"</a>");
                    document.write("<a href='" + "http://www.kat.ph/usearch/" + x[i].getElementsByTagName("string")[0].childNodes[0].nodeValue + "'>" + "KAT.PH" + "</a>"); 

                    document.write("</td></tr>");  

                }
                document.write("</table>");
            </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:08:46.213

URI (http://www.w3schools.com/jsref/jsref_encodeuri.asp) 中不能有空格。您可以做的是对其进行编码：

```
var term = x[i].getElementsByTagName("string")[0].childNodes[0].nodeValue;
var uri = "http://www.kat.ph/usearch/" + term;

document.write("<a href='" + encodeURI(uri) + "'>" + "KAT.PH" + "</a>"); 
```

# php - PHP服务器本地变量？

> ID：10326464
> 
> 赞同：1
> 
> 时间：2012-04-26T02:33:39.073
> 
> 标签：php

简短而甜蜜，我需要在页面完成加载后不取消设置变量。我使用了一个文件来存储该值，并且我使用了一个带有 1 条记录的 MySQL 表，并从中更新/读取，但我想要一些更清洁和更简单的东西。有任何想法吗？

有些人误解了这个问题，所以这里有一个例子。在我的页面顶部，我会有一些代码，例如：

```
$_PERMANENT['hits']+=1;
print 'Hits: '.$_PERMANENT['hits']; 
```

请注意，这适用于多个客户端，因此它不是 $_SESSION。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:58:32.893

我终于找到了答案：[apc_store](http://php.net/manual/en/function.apc-store.php) et al

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:36:10.893

使用[$_SESSION](http://php.net/manual/en/reserved.variables.session.php)，这正是它的用途。这要么要求用户的浏览器启用 cookie，要么要求您格式化链接以维护会话 ID。

在页面的开头，使用`session_start()`- 仅执行一次，并且必须在写入内容之前使用，因为它需要访问页眉区域。

`session_register()`已弃用，因此只需执行 a `$_SESSION['key'] = $value;`，该会话中的下一页加载将可以通过以下方式访问该值：`$value = $_SESSION['key'];`

# iphone - CCTouchDispatcher 优先级问题？

> ID：10326469
> 
> 赞同：0
> 
> 时间：2012-04-26T02:34:13.677
> 
> 标签：iphone, ios, cocos2d-iphone

使用我在主程序中初始化的 CCTouchDispatcher...

```
[[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES]; 
```

我认为到目前为止这是正确的-我可以通过触摸进行拖放工作和所有操作，但是当我将精灵拖到 CCMenu 上方时，触摸优先级在菜单上，而不是在精灵上-有什么方法可以解决这？

```
gameBoard = [CCMenu menuWithItems:nil];
    [self addChild:gameBoard z:-1]; 
```

（我稍后填充游戏板）

我没有使用 CCTouchDispatcher 和手势识别器让它工作，但无论出于何种原因它都没有触发 ccTouchEnded，所以我想我会试一试！

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:12:44.913

想出了一个解决方法。

```
[[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES]; 
```

只需将 0 更改为 -129 或更低。CCMenu 的优先级为 -128，值越低优先级越高。

```
[[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:-130 swallowsTouches:YES]; 
```

因此，这允许将 Sprite 堆叠到按钮的 CCMenu 上，其中 Sprite 仍在识别触摸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:29:12.337

这是一个聪明的解决方案。但我认为更好的解决方案是您自己实现 CCMenu。据我所知，很多人在按钮或您可以按下的东西上使用 CCMenu。但它有许多你无法克服的限制。例如，CCMenu 上的回调函数不能超过一个。所以我建议你有自己的类来实现它。

这是C++中的一些代码，希望对您有所帮助（但您仍然必须实现所有方法，哈哈）：

```
class ownButton : public CCNode
{
  public:
  ownButton();

  void init(const char* normalPicPath, const char* pressedPicPath, const char* disabledPicPath, const char* basePicPath);
  bool isContainpoint(CCTouch *touch); 
  void pressed();
  void disabled();
  void normalized();
  int getStatus();
  virtual CCSize getSize();
protected:
  CCSprite* normalPicSprite_;
  CCSprite* pressedPicSprite_;
  CCSprite* disabledPicSprite_;
  CCSprite* basePicSprite_;
  int stat_;
}; 
```

# django - django 完整性错误将 _id 附加到我的属性名称的末尾

> ID：10326476
> 
> 赞同：0
> 
> 时间：2012-04-26T02:35:30.960
> 
> 标签：django, forms, foreign-keys, integrity

我已经阅读了一些关于将 _id 附加到属性末尾引起的完整性错误的示例，但其中大多数都认为 user_id 这不是我遇到的错误 - 我正在处理将外键的初始值设置为另一个模型（食谱有 fk 到食谱）

所以这是我的踪迹

```
IntegrityError at /cookbook/createrecipe/

(1048, "Column 'original_cookbook_id' cannot be null")

Request Method:     POST
Request URL:    http://127.0.0.1:8000/cookbook/createrecipe/
Django Version:     1.3.1
Exception Type:     IntegrityError
Exception Value:    

(1048, "Column 'original_cookbook_id' cannot be null")

Exception Location:     /Library/Python/2.6/site-packages/MySQL_python-1.2.3-py2.6-macosx-10.6-universal.egg/MySQLdb/connections.py in defaulterrorhandler, line 36
Python Executable:  /usr/bin/python
Python Version:     2.6.1
def createrecipe(request):

        form = RecipeForm(request.POST)

        if request.method == 'POST':

            if form.is_valid():

                form = RecipeForm(initial = {'original_cookbook' : request.user.cookbooks.all()[0]})

                recipe = form.save()//error

...

            t = loader.get_template('cookbook/create_form.html')

            c = RequestContext(request, {

                'form': form,

            })

            data = {

            'form': t.render(c), 
```

正如您可能看到的那样，我有一个名为 original_cookbook 的外键，我想将其设置为用户的食谱的初始值。

知道可能是什么原因，如果需要，我可以发送更多代码

谢谢

零食鱼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:33:43.593

......

```
form = RecipeForm(request.POST)
if request.method == 'POST':
  if form.is_valid():
    recipe = form.save(commit=False)
    recipe.original_cookbook = request.user.cookbooks.all()[0]
    recipe.save() 
```

# php - 使用 PHP Simple HTML DOM Parser 选择随机链接

> ID：10326484
> 
> 赞同：-1
> 
> 时间：2012-04-26T02:36:15.810
> 
> 标签：php, parsing, dom, random

我正在尝试制作一个脚本，它会选择一个随机链接并从其页面获取一些信息。但是在尝试这个时：

```
$html= file_get_html('xxxbh.com/3/overview.aspx';); 
$title = $html->find('.userlist a', 0)->plaintext; 
```

我发现它不断获得第一个。页面的html是这样的：

```
<td style="width: 20%; padding-bottom: 5px;"><a href="/item/18243/details.aspx">item.135</a></td>
<td style="width: 20px;"><im g style="padding: 0pt; float: none; vertical-align: middle;" src="/images/item_X.png"></td>
<td style="width: 20%; padding-bottom: 5px;"><a href="/item/11272/details.aspx">item.18</a></td>
<td style="width: 20px;"><im g style="padding: 0pt; float: none; vertical-align: middle;" src="/images/item_X.png"></td> 
```

有人可以告诉我一个方法吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T03:41:29.333

我不知道是否有更优化的解决方案，但如果您没有很多链接，您可以将所有链接作为一个数组抓取并随机选择一个：

```
<?php
$links = $html->find('.userlist a');
$c = count($links);
$randomLink = $links[mt_rand(0, $c - 1)]; 
```

# apache - url 问题，需要重定向 3 个 url，但我尝试过的代码不起作用

> ID：10326492
> 
> 赞同：0
> 
> 时间：2012-04-26T02:37:13.987
> 
> 标签：apache, redirect, canonical-link

遗憾的是，我对代码一无所知，但我希望你能提供帮助。我试过询问我的网页设计师，但他声称他不知道 301 重定向是什么，并且注意到他自己的网站存在规范化问题。

我需要将以下 3 个网址重定向到 www.mydomain.co.uk

*   www.mydomain.co.uk/index.html
*   mydomain.co.uk/index.html
*   mydomain.co.uk

我以前从未使用过 ftp，但今晚下载了 filezilla，所以我可以尝试解决这个问题并制作了一个 .htaccess 文件，因为我的网站似乎没有。

我已经（几乎）浏览了整个互联网来寻找这个解决方案的答案，并尝试了这里以前帖子中建议的一些代码，但它们似乎没有做任何事情。

如果您需要知道，我认为我的服务器是 apache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:53:09.010

1.  我希望您的网站不是使用 HTML 构建的。但是，使用您的网站，`.htaccess`您可以尝试：

    ```
    RewriteEngine On
    RewriteCond %{HTTP_HOST} !^www\.mydomain\.co\.uk [NC]
    RewriteRule ^(.*)$ http://www.mydomain.co.uk/ [R=301,L] 
    ```

这应该足以强制 www 如果你需要强制 index.html 你会这样做：

```
 RewriteEngine On
    RewriteCond %{HTTP_HOST} !^www\.mydomain\.co\.uk [NC]
    RewriteRule ^(.*)$ http://www.mydomain.co.uk/$1 [R=301,L] 
```

已经有一段时间了，但是这两个都应该足以做你想做的事......

1.  我认为是时候找一个新的开发者了，因为你拥有的那个听起来像个十足的白痴。

# ruby-on-rails - 验证 ActiveRecord 属性长度取决于其他对象属性

> ID：10326497
> 
> 赞同：0
> 
> 时间：2012-04-26T02:38:00.807
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在尝试创建一个验证，`:phone`如果当前对象`country_code` 设置为`ES`.

我试图做这样的事情，但它不起作用。

```
validates_length_of :phone, :is => 9, :message => "number needs to be at least 9 digits." if self.country_code == "ES" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:44:09.533

我认为您正在寻找的是：

```
validates_length_of :phone, :is => 9,
:message => "number needs to be at least 9 digits.",
:if => "country_code == 'ES'" 
```

或者

```
validates_length_of :phone, :is => 9,
:message => "number needs to be at least 9 digits.",
:if => Proc.new { |a| a.country_code == 'ES' } 
```

看看[这里](http://guides.rubyonrails.org/v2.3.11/activerecord_validations_callbacks.html#conditional-validation)的文档。

# android - 为什么 JPCT-AE AGL 字体类仅适用于 Android 模拟器？

> ID：10326507
> 
> 赞同：3
> 
> 时间：2012-04-26T02:39:18.333
> 
> 标签：android, opengl-es, android-emulator, hardware, jpct

我目前正在使用 JPCT-AE 框架为 android 构建一个 3D 游戏。因为它还没有显示字体的类，所以它创建了一个所谓的 AGLFont 类来在 android 屏幕上显示文本。这是该课程的论坛链接。

[http://www.jpct.net/forum2/index.php/topic,1563.0.html](http://www.jpct.net/forum2/index.php/topic,1563.0.html)

此类在 Android 模拟器上运行良好，但在 Android 手机上使用时似乎不显示文本且不会导致游戏中断。我们曾尝试在两部 Android 手机 [Droid X & Nexus S] 上使用此类，但均未成功。

有谁知道如何配置此代码以使用物理电话，或者为什么它们可能是模拟器和实际电话之间的差异？

# android - android空指针错误：无法获取上下文

> ID：10326519
> 
> 赞同：0
> 
> 时间：2012-04-26T02:42:35.967
> 
> 标签：android

HI当android app新建一个alert dialog，出现空点异常，说viewroot无法获取上下文，上下文返回null。有没有人遇到同样的问题。并给我一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:35:03.137

您不应将 getapplicationcontext() 用于警报对话框。取而代之的是，使用活动类名称。

如果您的活动名称是 AlertBuilderActivity 使用

```
 (AlertBuilderActivity.this) for context 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:50:15.253

```
AlertDialog alertDialog = new AlertDialog.Builder(YourActivity.this).create(); 
```

要创建警报对话框，您不能使用 getApplicationContext()，您必须像上一行那样使用。

```
AlertDialog alertDialog = new AlertDialog.Builder(getApplicationContext()).create(); 
```

# php - 如何在 slickgrid 中添加复选框？

> ID：10326521
> 
> 赞同：0
> 
> 时间：2012-04-26T02:43:03.313
> 
> 标签：php, slickgrid

我还是 slickgrid 的新手，所以我正在尝试使用带有 SlickGrid jQuery 插件的 DataView 的简单示例。但是我无法弄清楚数据是如何添加到 DataView 中的。

这里的代码：

```
$data = '';
$i = 0;

$query = "SELECT * FROM tahun";
$result = mysql_query($query);
while($row = mysql_fetch_array($result)){
    $data .= '
        data['.$i.'] = {

            spt: "'.$row['ID'].'",
            nama: "'.$row['nama'].'",
            alamat: "'.$row['alamat'].'",
            bayar: "'.$row['tanggal_bayar'].'",
            hutang: "'.$row['tanggal_hutang'].'",
            perkiraan: "'.$row['perkiraan'].'",
        };
    ';
    $i++;
}

 var grid;
  var columns = [

        {id:"spt", name:"ID", field:"spt",sortable: true},
        {id:"nama", name:"Nama", field:"nama",sortable: true},
        {id:"alamat", name:"Alamat", field:"alamat",sortable: true},
        {id:"bayar", name:"Bayar", field:"bayar",sortable: true},
        {id:"hutang", name:"Hutang", field:"hutang",sortable: true},
        {id:"perkiraan", name:"Perkiran", field:"perkiraan",sortable: true}

    ];

    var options = {
        enableCellNavigation: true,
        enableColumnReorder: false,
        multiColumnSort: true,
        editable: true,
        asyncEditorLoading: false,
        autoEdit: false
    };
    var columns = [];

  $(function() {
       var checkboxSelector = new Slick.CheckboxSelectColumn({
      cssClass: "slick-cell-checkboxsel"
    });
    columns.push(checkboxSelector.getColumnDefinition());

    columns.push({
        var data = [];
        <?=$data?> //This is where we echo the PHP variable $data which contains our JavaScript array as a string.
        });
        grid = new Slick.Grid($("#myGrid"), data, columns, options);

    grid.setSelectionModel(new Slick.RowSelectionModel({selectActiveRow: false}));
    grid.registerPlugin(checkboxSelector); 
```

我不知道如何在上面的代码中为复选框添加 id。这里的代码 [https://rapidshare.com/files/3188523206/slickgrid.rar](https://rapidshare.com/files/3188523206/slickgrid.rar)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:15:45.110

您上面的代码示例和问题标题根本不相关。您能否改写问题或提供相关代码？您提到 DataView - 但您上面的代码根本不使用 DataView。

# c# - 从两个父母打开一个孩子表格

> ID：10326534
> 
> 赞同：0
> 
> 时间：2012-04-26T02:46:10.000
> 
> 标签：c#, winforms

好的，我正在尝试从两个不同的父母那里打开一份表格，但我不知道如何让它发挥作用。我尝试对 AdminStartMenu 和 TeacherStartMenu 使用布尔值，如果从一个打开，一个为真，另一个从另一个打开，则为假，但这似乎不起作用。

如何让一个孩子为两个不同的父母工作？

谢谢！

```
public partial class EditUser : Form
{
    AdminStartMenu pf;
    TeacherStartMenu tp;
    public bool first = true;
    public int st = 0;
    public bool Editting;
    public bool Adding;
    public bool Viewing;

    public bool AdminParent;
    public bool TeacherParent;

    public EditUser()
    {
        InitializeComponent();
    }

    public EditUser(AdminStartMenu Parent)
    {

        pf = Parent;
        InitializeComponent();
        EditFunction();
        if (pf.Adding == true)
        {
            BlankForm();
            SaveButton.Text = "Save";
        }
        if (pf.Editting == true)
        {
            FillFormVariables();
            SaveButton.Text = "Save";
        }
    }

    public EditUser(TeacherStartMenu TParent)
    {
        tp = TParent;
        InitializeComponent();
        EditFunction();
        if (tp.Adding == true)
        {
            BlankForm();
            SaveButton.Text = "Save";
        }
        if (tp.Editting == true)
        {
            FillFormVariables();
            SaveButton.Text = "Save";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:14:00.187

尽管 Hasan 认为两者之间的耦合过多是正确的，但您也许可以简化一种调用另一种形式的表单，但无论用户类型如何，都可以放置通用的东西。也许就像使用接口对 StartMenus 进行分类一样。我看到它们有共同的元素，所以我已经声明了一个接口，例如：

```
public interface IMyCommonParent
{
    bool Adding { get; set; }
    bool Editing { get; set; }
    bool Viewing { get; set; }
}

public class AdminStartMenu : DerivedFromSomeOtherClass, IMyCommonParent
{  // being associated with IMyCommonParent, this class MUST have a declaration
   // of the "Adding", "Editing", "Viewing" boolean elements
}

public class TeacherStartMenu : DerivedFromSomeOtherClass, IMyCommonParent
{ // same here } 
```

它们都支持“IMyCommonParent”接口，您的子表单可以接受任何支持该接口的对象。然后，你不必具体知道哪个是用来启动子窗体的，并且可以将它保存到窗体的一个属性中

```
public class ChildForm : Form
{
   private IMyCommonParent whichMenu
   private bool IsAdminMode;

   public ChildForm(IMyCommonParent UnknownParent)
   {
      whichMenu = UnknownParent;
      // then a flag to internally detect if admin mode or not based on
      // the ACTUAL class passed in specifically being the admin parent instance
      IsAdminMode = ( UnknownParent is AdminStartMenu );

      // the rest is now generic.
      InitializeComponent();
      EditFunction();

      if( whichMenu.Adding )
         BlankForm();
      else if( whichMenu.Editing )
         FillFormVariables();

      SaveButton.Text = "Save";
   }
} 
```

# python - 创建 ModelAdmin 对象时没有属性“_meta”错误

> ID：10326535
> 
> 赞同：7
> 
> 时间：2012-04-26T02:46:13.557
> 
> 标签：python, django

我是 Django 新手，我正在尝试为我的模型自定义管理界面，但在尝试添加 ModelAdmin 对象时出现错误。我的代码和错误包含在下面。如果我从 register 语句中取出 BlogAdmin 对象，我不会收到任何错误并且站点加载正常。

谢谢你的帮助！

```
class Blog(models.Model):
    name = models.CharField(max_length=300)
    url = models.URLField()

class BlogAdmin(admin.ModelAdmin):
    list_display = ['name', 'url']
    search_fields = ["name"]

admin.site.register([Blog,BlogAdmin]) 
```

我收到以下错误：

类型对象“BlogAdmin”没有属性“_meta”

```
Exception Location:     /Users/Bilal/Development/Django/ENV/traveller3/lib/python2.7/site-packages/django/contrib/admin/sites.py in register, line 80
Python Executable:  /Users/Bilal/Development/Django/ENV/traveller3/bin/python
Python Version:     2.7.1
Python Path:    

['',
 '/Applications/PyCharm.app/helpers/pydev',
 '/Users/Bilal/Development/Django/ENV/traveller3/lib/python2.7/site-packages/pip-1.0.2-py2.7.egg',
 '/Users/Bilal/Development/Django/ENV/traveller3/lib/python2.7/site-packages/MySQL_python-1.2.3c1-py2.7-macosx-10.7-intel.egg',
 '/Users/Bilal/Development/Django/ENV/traveller3/lib/python2.7/site-packages/scikit_learn-0.9-py2.7-macosx-10.7-intel.egg',
 '/Users/Bilal/Development',
 '/Library/Python/2.7/site-packages/pip-1.0.2-py2.7.egg',
 '/Users/Bilal/Development/scrapyard',
 '/Applications/PyCharm.app/helpers',
 '/Users/Bilal/Development/Django/ENV/traveller3/lib/python27.zip',
 '/Users/Bilal/Development/Django/ENV/traveller3/lib/python2.7',
 '/Users/Bilal/Development/Django/ENV/traveller3/lib/python2.7/plat-darwin',
 '/Users/Bilal/Development/Django/ENV/traveller3/lib/python2.7/plat-mac',
 '/Users/Bilal/Development/Django/ENV/traveller3/lib/python2.7/plat-mac/lib-scriptpackages',
 '/Users/Bilal/Development/Django/ENV/traveller3/Extras/lib/python',
 '/Users/Bilal/Development/Django/ENV/traveller3/lib/python2.7/lib-tk',
 '/Users/Bilal/Development/Django/ENV/traveller3/lib/python2.7/lib-old',
 '/Users/Bilal/Development/Django/ENV/traveller3/lib/python2.7/lib-dynload',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
 '/Users/Bilal/Development/Django/ENV/traveller3/lib/python2.7/site-packages',
 '/Users/Bilal/Development/Django/ENV/traveller3/lib/python2.7/site-packages/PIL',
 '/Library/Python/2.7/site-packages',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC',
 '/Users/Bilal/Development/Django/ENV/traveller3/lib/python2.7/site-packages/IPython/extensions'] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-26T03:01:47.707

当你写：

```
admin.site.register([Blog, BlogAdmin]) 
```

您在 admin 中注册了两个模型：`Blog`并且`BlogAdmin`，您必须为它注册`Model`和`ModelAdmin`，如下所示：

```
admin.site.register(Blog, BlogAdmin) 
```

# ruby-on-rails - 如何按某个值过滤模型的行？

> ID：10326537
> 
> 赞同：0
> 
> 时间：2012-04-26T02:46:23.853
> 
> 标签：ruby-on-rails, ruby, activerecord

我只想返回属于用户的元素。该`user_id`值是来自运行的列。我想要的`runs`是从`current_user`.

```
def index
  @runs = Run.all

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @runs }
  end
end 
```

正如尝试过的那样

```
@runs = Run.where(user_id= => current_user.id) 
```

但它没有奏效。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T02:57:33.537

如果您的 User 模型和 Run 模型之间有关联，您应该能够简单地执行`current_user.runs`. 例如：

```
class User < ActiveRecord::Base
  has_many :runs
end

class Run < ActiveRecord::Base
  belongs_to :user
end 
```

*不过，我不知道您的实际数据库架构或模型名称，因此我无法确定这是否适合您的情况。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T02:50:36.637

参数化`.where()`使用如下语法：

```
@runs = Run.where("user_id = ?", current_user.id) 
```

它也可以作为哈希来完成，这可能更具可读性：

```
@runs = Run.where(:user_id => current_user.id) 
```

## 不要这样做（作为纯字符串）......

因为它可能会打开 SQL 注入漏洞，即使`id`不太可能被篡改......

```
# Don't do this...
@runs = Run.where("user_id = #{current_user.id}") 
```

查看[有关 ActiveRecord 条件的文档以](http://guides.rubyonrails.org/active_record_querying.html#conditions)获取完整详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T00:58:39.707

Gem [cancan](https://github.com/ryanb/cancan)非常适合这些用途。如果您使用参数在类中添加`user_id`条件，并且在控制器中，gem 自动加载只需要为当前用户运行。阅读文档以进行补充:)`Run``Ability``:read``load_resource``index`

# asp.net-mvc-3 - 使用辅助方法在我的剃刀视图中查看或隐藏下拉列表

> ID：10326538
> 
> 赞同：0
> 
> 时间：2012-04-26T02:46:41.207
> 
> 标签：asp.net-mvc-3, razor

我有一个名为的对象`Visit`，我定义了以下内容`helper method`（“CanBeEdited”）来指定用户是否可以编辑对象`Status`属性：-

```
public partial class Visit 
    {
        public bool CanBeEdited(string username)
        {return (((DoctorID != null) && (DoctorID.ToUpper().Equals(username.ToUpper()))) && (StatusID == 5));       }     }} 
```

然后我指定根据天气`dropdownlist`在我的视图上显示或隐藏某些帮助方法返回真或假（如果它返回真那么用户可以查看和编辑，如果它返回假然后视图将呈现一个代表旧状态值）。`Edit``CanBeEdited``Status dropdownlist``@Html.HiddenFor`

我的包含辅助方法的编辑视图如下所示：-

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Visit</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.Note)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Note)
            @Html.ValidationMessageFor(model => model.Note)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.DoctorID)
        </div>
        <div class="editor-field">
            @Html.DropDownList("DoctorID", String.Empty)
            @Html.ValidationMessageFor(model => model.DoctorID)
        </div>

        @{
       if (Model.CanBeEdited(Context.User.Identity.Name))
       {
        <div class="editor-label">
            @Html.LabelFor(model => model.StatusID)
        </div>
        <div class="editor-field">
            @Html.DropDownList("StatusID", String.Empty)
            @Html.ValidationMessageFor(model => model.StatusID)
        </div>
       }
       else
       {
       @Html.HiddenFor(model => model.StatusID)}
}
        <p>
          @Html.HiddenFor(model => model.VisitTypeID)
          @Html.HiddenFor(model => model.CreatedBy)
          @Html.HiddenFor(model => model.Date)
          @Html.HiddenFor(model => model.VisitID)
          @Html.HiddenFor(model => model.PatientID)
          @Html.HiddenFor(model => model.timestamp)

        <input type="submit" value="Create" />

        </p>
    </fieldset>
} 
```

老实说，这是我第一次实施案例，**所以我的方法听起来有效吗？？？，或者它有一些我不知道的弱点？？**. 因为我需要在我的 Web 应用程序周围实现类似的案例......

*请记住，我还在检查操作方法上的 CanBeEdited ..*

提前感谢您的帮助。

**更新：-** 我的后操作方法如下：-

```
 [HttpPost]
        public ActionResult Edit(Visit visit)
        {
            if (!(visit.Editable(User.Identity.Name)))
            {
                return View("NotFound");
            }
            try
            {
                if (ModelState.IsValid)
                {
                    repository.UpdateVisit(visit);
                    repository.Save();
                    return RedirectToAction("Index");
                }
            }
            catch (DbUpdateConcurrencyException ex)
            {
                var entry = ex.Entries.Single();
                var clientValues = (Visit)entry.Entity;

                ModelState.AddModelError(string.Empty, "The record you attempted to edit "
                + "was modified by another user after you got the original value. The "
                + "edit operation was canceled and the current values in the database "
                + "have been displayed. If you still want to edit this record, click "
                + "the Save button again. Otherwise click the Back to List hyperlink.");
                //   patient.timestamp = databaseValues.timestamp;
            }

            catch (DataException)
            {
                //Log the error (add a variable name after Exception)
                ModelState.AddModelError(string.Empty, "Unable to save changes. Try again, and if the problem persists contact your system administrator.");
            }
            ViewBag.DoctorID = new SelectList(Membership.GetAllUsers(), "Username", "Username", visit.DoctorID);
            ViewBag.StatusID = new SelectList(db.VisitStatus, "StatusID", "Description", visit.StatusID);
            ViewBag.VisitTypeID = new SelectList(db.VisitTypes, "VisitTypeID", "Description", visit.VisitTypeID);
            return View(visit);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T03:03:13.693

我不觉得在视图中添加它是一个好主意。我想让 My ViewModel 保存一个布尔类型的属性，以确定它是否可编辑。检查相关权限后，您可以在控制器中设置的值。

```
public class ProductViewModel
{
  public bool IsEditable { set;get;}
  //other relevant properties
} 
```

和控制器动作

```
public ActionResult GetProduct()
{
  ProductViewModel objVM=new ProductViewModel();
  objVm.IsEditable=CheckPermissions();

}
private bool CheckPermissions()
{
  //Check the conditions and return true or false;
} 
```

所以视图会像这样干净

```
@if (Model.IsEditable)
{
  //Markup for editable region
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:52:49.550

恕我直言，这听起来足够有效。

更新：删除了不相关的评论，并进行了编辑以表明主要关注点。

现在，仔细看看，尤其是使用控制器操作，我强烈建议您消除隐藏字段（除了需要从后端重新加载记录的字段）。

精明的用户可以篡改隐藏的表单数据（所有表单数据），您的控制器操作会很乐意将其全部发送回服务器。

实际上，您应该只回发允许更改的字段，从后端重新水化记录，并将“可编辑”字段转移到新副本。这也更接近于解决并发编辑和陈旧记录问题。

# django - 将 django-endless-pagination 与扩展 ListView 的基于 c 的自定义视图一起使用

> ID：10326543
> 
> 赞同：2
> 
> 时间：2012-04-26T02:47:05.280
> 
> 标签：django, django-class-based-views, django-endless-pagination

阅读[django-endless-pagination](http://django-endless-pagination.readthedocs.org/en/latest/index.html)的文档，它说您可以将其[Ajax](http://django-endless-pagination.readthedocs.org/en/latest/twitter_pagination.html#a-shortcut-for-ajaxed-views)分页功能扩展到基于类的视图，只需使用 @page_template() 装饰器......我一直在尝试使用该装饰器实现该装饰器一个小时：

```
class ExtendedListView(ListView):
    template_name = 'global_template.html'

    @method_decorator(@page_template('path_to_updatable_content_only_template'))
    def dispatch(self, *args, **kwargs):
        return super(ExtendedListView, self).dispatch(*args, **kwargs) 
```

视图函数不会输出任何错误，但是当我转到另一个页面时，它会在目标中加载“global_template”，而不是在装饰器中定义的模板。

如果有人知道这个实现是否真的有效并且我犯了一些错误，请指出，我会很高兴以正确的方式使用它。

我设法想出了一个解决方法，所以如果有人遇到同样的问题并且对此没有合规的答案，您可以这样做：

```
class ExtendedListView(ListView):
    template_name='global_template_path'

    ''' 
    render_to_response ¿hack? so that i can render only the updatable DOM part template
    '''
    def render_to_response(self, context):
        if self.request.is_ajax():
            self.template_name = 'path_to_updatable_content_only_template'
            return super(ExtendedListView, self).render_to_response(context)
        else:
            return super(ExtendedListView, self).render_to_response(context) 
```

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T08:50:54.007

正式地，您可以使用 AjaxListView 来执行此任务：

```
# views.py
from endless_pagination.views import AjaxListView    
class BookView(AjaxListView):
    context_object_name = "books"
    model = Book

    template_name = 'books.html'
    page_template = 'books_list.html' 
```

在 book.html 中：

```
{% extends 'base.html' %}

{% block js %}
    {{ block.super }}
    <script src="/static/js/jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="/static/js/endless.js" type="text/javascript" charset="utf-8"></script>
{% endblock %}

{% block content %} 

<div class="endless_page_template">

    {% include page_template %}
</div>

{% endblock %} 
```

这是books_list.html

```
{% load endless %}

{% paginate books %}

{% for book in books %} 
    {{ book.title }}
{% endfor %}

<div class="pagination">

    {% show_pages %}
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:00:24.620

Ajax 实现的工作方式实际上相当复杂。我不得不推出自己的解决方案，因为我想使用通用视图、Ajax 和多分页。为了弄清楚如何让它工作，我不得不对示例中的代码、django-endless-pagination 装饰器和 Django 的视图本身进行逆向工程。在推出我自己的解决方案的过程中，我稍微简化了一些事情，但它可能会进一步简化。也许这可能对其他人有用：

```
class SearchView(View):
    """
    Based on code from django-endless-pagination, modified for multiple
    pagination views on the same page 
    """

    template = 'app/search.html'
    page_templates = {'object1Page': 'app/search_object1_pane.html',
    'object2Page': 'app/search_object2_pane.html'}

    def get_context_data_and_template(self, **kwargs):
        context = {'params': kwargs}

        # Check whether AJAX has made a request, if so, querystring_key will be
        # set, identifying which paginator to render
        querystringKey = self.request.REQUEST.get('querystring_key')
        template = self.page_templates.get(querystringKey)
        # switch template on ajax requests
        if not (self.request.is_ajax() and template):
            template = self.template    
        context['page_template'] = template

        # Always generate the QuerySets that will be paginated
        if self.request.GET['query']:
            searchTerm = self.request.GET['query']
        else:
            searchTerm = kwargs['search']

        # *** Insert your search code here ***   

        context['object1Results'] = object1QuerySet
        context['object2Results'] = object2QuerySet

        extraContext = self.kwargs.get("extra_context", {})
        context.update(extraContext)

        return context, template

    def get(self, request, *args, **kwargs):
        context, template = self.get_context_data_and_template(**kwargs)
        return TemplateResponse(request=self.request,
            template=template,
            context=context) 
```

# android - android.graphics.camera 错误

> ID：10326545
> 
> 赞同：0
> 
> 时间：2012-04-26T02:47:29.680
> 
> 标签：android, graphics, camera

我正在 Eclipse 上开发一个 Android 应用程序，并且一直在使用 android.graphics.camera 来 3d 转换图像。简而言之，我的应用程序采用 2d 图像并赋予它透视图。我的问题是我还想在转换图像时围绕屏幕旋转图像。

```
 final Matrix mMatrix = canvas.getMatrix();
        canvas.save();
        mCamera.save();
        mCamera.rotateX(60);
        mCamera.rotateY(0);
        mCamera.rotateZ(0); 
        mCamera.getMatrix(mMatrix);
        mMatrix.preTranslate(-this.gridWidth / 2, -this.gridHeight);
        mMatrix.postTranslate(this.gridWidth / 2, this.gridHeight);
        canvas.concat(mMatrix);
        mCamera.restore();
        //Draw and move image here          
        canvas.restore(); 
```

当图像到达屏幕底部，即相机被平移的位置时，图像会失真。我在屏幕上看到了它的一部分，但它就像被向后或侧向绘制一样。我也尝试使用 rotateZ 属性旋转图像，但效果相同。一旦图像“落后”于翻译点，它就会发疯。

我认为这可能是一个模拟器错误，所以我将它加载到我的 Droid X 和 Acer Iconia 上，效果保持不变。

我还没有看到其他人有这个问题，所以我想这里有人可能知道发生了什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:13:37.430

可以使用允许您更改相机距离的较新版本的 Android 解决此问题：

[http://developer.android.com/reference/android/graphics/Camera.html#setLocation](http://developer.android.com/reference/android/graphics/Camera.html#setLocation(float)（浮动，浮动，浮动）

# file - 如何在 ruby 中检查一行中的 pangrams？

> ID：10326547
> 
> 赞同：1
> 
> 时间：2012-04-26T02:47:48.273
> 
> 标签：file, io, line, pangram

你们中的一些人可能会注意到我已经用同样痛苦的代码回来了。一旦我接受答案，我不确定其他问题是否仍然存在。

现在问题稍微简单了一点。我发现了一些检查 pangrams 的代码。它曾经是 def pangram?('sentence') 但我需要 line 进去所以我试着把它改成 def pangram?(line)。它似乎与我的编码风格不太吻合，而且不起作用。我尝试使用 .contain('a' . . 'z') 来检查 pangram，但我认识的人尝试过，但没有成功。谷歌也没有太大帮助。

关于如何在 if stmt 中检查 pangrams 的任何想法？

```
# To change this template, choose Tools | Templates
# and open the template in the editor
# This program reads a file line by line,
#separating lines by writing into certain text files.
#PPQ - Pangrams, Palindromes, and Quotes
class PPQ
  def pangram?(line)
    unused_letters = ('a'..'z').to_a - line.downcase.chars.to_a
    unused_letters.empty?
  end
  def categorize
    file_pangram = File.new('pangram.txt', 'w')
    file_palindrome = File.new('palindrome.txt', 'w')
    file_quotes = File.new('quotes.txt','w')
    File.open('ruby1.txt','r') do |file|
      while line = file.gets
        if(line.reverse == line)
          file_palindrome.write line
        elsif(pangram?(line)== true)
          file_pangram.write line
        else
          file_quotes.write line
        end
      end
    end
    file.close
    file_pangram.close
    file_palindrome.close
    file_quotes.close
   end
end
my_ruby_assignment = PPQ.new
my_ruby_assignment.categorize 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-20T06:46:11.460

我偏爱更简单的语法，比如

```
def pangram?(line)
  ('a'..'z').all? { |word| line.downcase.include? (word) }
end

if pangram?(line) then file_pangram.write line end 
```

# php - 网络上是否有 PHP 验证站点或测试站点？

> ID：10326548
> 
> 赞同：1
> 
> 时间：2012-04-26T02:47:51.753
> 
> 标签：php, validation, testing

是否有类似于[css](http://jigsaw.w3.org/css-validator/)或[html](http://validator.w3.org/)的 PHP 验证站点？更好的是，网络上是否有任何类似于[jsfiddle](http://jsfiddle.net/)的站点，您可以在其中创建和测试代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:48:42.267

我猜有一个可以与 JSFiddle 相比，这里：Codepad [Viper](http://codepad.viper-7.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T02:49:11.620

[http://ideone.com](http://ideone.com) - 它支持*很多*编程语言

# ruby-on-rails - 如何在表单中包含 Rails 连接表字段？

> ID：10326551
> 
> 赞同：5
> 
> 时间：2012-04-26T02:48:27.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, join, ruby-on-rails-3.1

在这种情况下，我可以将值插入到 Member 表和 Club 表中。但是在我想提交一个值`:task`的表中有一个名为的字段，并且在 Memberships 表中并由Rails 自动插入。如何在下面的表格中包含该字段？先感谢您。`memberships``member_id``club_id``task`

查看/表格：

```
<%= form_for @member ,:url=>{:action =>"create"} do |f| %>
  <%= f.text_field :email %>
  <%= f.fields_for :clubs do |s| %>
    <%= s.text_field :name %>
  <% end %>
  <%= f.submit "submit" %>
<% end %> 
```

楷模

```
class Member < ActiveRecord::Base
  has_many :clubs ,:through=> :memberships
  has_many :memberships
  accepts_nested_attributes_for :clubs 
  attr_accessible :clubs_attributes
end

class Club < ActiveRecord::Base
  has_many :members ,:through=>:memberships
  has_many :memberships
end

class Memberships < ActiveRecord::Base
  belongs_to :Member
  belongs_to :Club
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T04:25:50.910

```
<%= f.fields_for :memberships do |m| %>
  <%= m.text_field :task %>
  <%= m.fields_for :clubs do |s| %>
    <%= s.text_field :name %>
  <% end %>
<% end %> 
```

# oop - OCaml - 错误的函数类型

> ID：10326552
> 
> 赞同：1
> 
> 时间：2012-04-26T02:48:34.407
> 
> 标签：oop, types, functional-programming, ocaml

我做了一个类方法，我想要这种类型：

`unit -> (dir -> 'b)`

但我的实际方法：

```
method iter () = fun x -> match x with
| Up -> if (Stack.is_empty pz) then raise Stack.Empty else if (Stack.length pz = 1) then failwith "Cannot go up" else (ignore (Stack.pop pz) ; {< a = (Stack.top pz) >})
| Down(v) -> match (Stack.top pz) with
| Noeud(o, {contents = []}) -> raise Not_found
| Noeud(o, {contents = l}) -> if mem_assoc v l then ((Stack.push (assoc v l) pz) ; {< a = (Stack.top pz) >} ) else raise Not_found 
```

有类型`unit -> dir -> 'b`

我怎样才能使它成为第一种类型？

以下是自定义类型：

```
 type 'a arbre =  Noeud of 'a option ref * (char * 'a arbre) list ref
    type dir = Up | Down of char 
```

编辑：我需要这个，所以它可以符合某个接口，并且由于类型不匹配，它不会编译。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T03:27:36.627

这不是问题。`unit -> (dir -> 'b)`和`unit -> dir -> 'b`OCaml 中的类型相同！（类型箭头是右结合的）

您能否向我们展示实际的错误消息，以便我们知道问题出在哪里？

附录：你真的试过这个吗？如果*没有*其他问题，那么您会发现它会正常工作。

# embedded - RTOS - 等待队列中的不同数据

> ID：10326553
> 
> 赞同：3
> 
> 时间：2012-04-26T02:48:35.793
> 
> 标签：embedded, message-queue, rtos, isr

我正在对 TI 的电路板进行编程，并且我希望能够以某种方式将两个不同的 ISR 发布到任务的消息队列中。那部分工作正常。但是，在接收端，是否有任何智能方式让任务挂在其队列上，并根据 ISR 发布的数据对数据执行不同的操作？

基本上，我有一个 LCD 更新任务，它显示来自我的电机的信息。但是，如果我有一个电机传感器 ISR 和一个按钮按下 ISR，它们发送不同的信息进行更新，这可以在一个队列中完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T02:55:27.590

当然。当每个 ISR 向队列发送消息时，在消息中放入一些标识发送它的 ISR 的内容。然后，当接收方读取队列时，它可以根据标识符决定采取何种行动。

```
ISR1() {
  char msg[4];
  msg[0] = '1';                 // Identify the queue
  get_3_ISR1_data_bytes(msg+1); // Get the data
  q_send(msg);
}

ISR2() {
  char msg[4];
  msg[0] = '2';                 // Identify the queue
  get_3_ISR2_data_bytes(msg+1); // Get the data
  q_send(msg);
}

handler() {
  char *msg;
  q_rcv(msg);
  switch (msg[0]) {
  case '1':
    // Do ISR1 stuff
    break;
  case '2':
    // Do ISR2 stuff
    break;
  default:
    // Something unpleasant has happened
  }
} 
```

如果一个整体`char`太昂贵，您可以只设置一个位（to`0`或`1`）来识别 ISR。

# php - CodeIgniter + HTML5 Boilerplate + Twitter Bootstrap

> ID：10326558
> 
> 赞同：8
> 
> 时间：2012-04-26T02:49:34.997
> 
> 标签：php, html, codeigniter, twitter-bootstrap, boilerplate

我正在尝试开始一个新项目，并正在寻找“终极”包来启动 PHP/MySQL/HTML5 开发。首先尝试了 CodeIgniter，这很棒。然后发现了 Twitter Bootstrap，并很好地集成了它。最后，找到了看起来很棒的 HTML5 Boilerplate，并看到有人将这三者混合在一起。

想知道是否有人真的能够将这三者整合在一起并运行好？我看到有一个 github 回购：[https](https://github.com/vesparny/codeigniter-html5boilerplate-twitter-bootstrap) ://github.com/vesparny/codeigniter-html5boilerplate-twitter-bootstrap ，但我找不到任何关于它的 StackOverflow 查询。在我加入之前，有人可以分享一些经验吗？不想花几天时间试图弄清楚，只是为了发现坚持使用纯 CodeIgniter 或仅使用 HTML5BP 会更容易/更好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T22:46:48.177

我是您正在研究的那个图书馆的作者。[https://github.com/vesparny/codeigniter-html5boilerplate-twitter-bootstrap](https://github.com/vesparny/codeigniter-html5boilerplate-twitter-bootstrap)

正如您在我的代码中看到的那样，Tw bootstrap 和 H5BP 可以简单地混合在一起；Codeigniter 是一个很棒的框架，但缺乏视图组织恕我直言。使用这个库，您可以利用最好的客户端工具，以及最著名和最简单的 php 框架，并通过一些增强来加速和更好地组织您的代码和使用 codeigniter 编写代码的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T05:36:17.383

我猜似乎没有多少人尝试过这个，但它确实有效，而且据我所知它工作正常。

CodeIgniter 作为 php 框架运行良好，您可以集成 HTML5 BP 以对 HTML5 友好的方式呈现您的页面，并使用一些 JavaScript 库（如 Initialzr 的现代化工具）来帮助加载资源。CodeIgniter 非常快，在将 CI 与 HTML5 BP 结合时几乎零冲突，使其成为一个非常快速且轻松的添加。

Twitter Bootstrap 也可以正常工作，因为它主要是组件的 CSS 和 javascript 插件，如果你想要/需要它，你可以将它们与 HTML5 的 plugins.js 文件合并。我想说的是，在玩过这个之后，Twitter Bootstrap 并不是真正需要的，但它确实可以帮助你很快地组装一个响应式前端。不确定是否还有其他可能更好的软件包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T17:53:19.790

你想如何运行 css 和 javascript 文件的安装？
获取 HTML5 Boilerplate 和 Twitter 引导文件并将它们复制到您的网站根目录（您的 Codeigniter 应用程序文件夹所在的目录）。
现在您可以将它们用作任何其他 javascript/html/css 库和框架。

而且我仍然不知道您为什么要尝试将 Twitter Bootstrap 与 HTML5 Boilerplate 一起使用。我没有使用任何这些，但它们看起来很相似。对于您的网站来说，这看起来有点开销。

# php - 将 PHP 代码连接到 Microsoft Outlook 以发送电子邮件？

> ID：10326559
> 
> 赞同：-3
> 
> 时间：2012-04-26T02:49:46.160
> 
> 标签：php, html, email, outlook

我现在的情况是

1.  我正在使用 XAMPP（本地主机）
2.  所有传出端口都被阻止（gmail 25,465,587、hotmail 等）

我想使用 PHP 连接到我自己的 Microsoft Outlook，这样我就可以从我的公司电子邮件地址发送电子邮件。可以的话请帮忙，谢谢！

我是否还需要配置 Mercury Server，因为我正在连接到 Microsoft Outlook 以发送电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-29T05:28:00.753

实际上，您可以直接连接到 Outlook。对我来说，下一个代码开箱即用：

```
<?php
    $subject="This is a test message";        
    $message="This is a Body Section now.....! :)";        
    $to="someaddress@somedomain.com";

    // starting outlook        
    com_load_typelib("outlook.application"); 

    if (!defined("olMailItem")) {define("olMailItem",0);}

    $outlook_Obj = new COM("outlook.application") or die("Unable to start Outlook");

    //just to check you are connected.        
    echo "Loaded MS Outlook, version {$outlook_Obj->Version}\n";        
    $oMsg = $outlook_Obj->CreateItem(olMailItem);        
    $oMsg->Recipients->Add($to);
    $oMsg->Subject=$subject;        
    $oMsg->Body=$message;        
    $oMsg->Save();        
    $oMsg->Send();    
?> 
```

请确保您已添加

```
[COM_DOT_NET]
extension=php_com_dotnet.dll 
```

在 php.ini 的末尾（在我的情况下，我有 PHP 5.3）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T02:55:25.190

您不使用 PHP 连接到 Outlook，而是连接到邮件服务器......在这种情况下，我怀疑那将是 Exchange。您可以使用[SwiftMailer](http://swiftmailer.org/)、[PHPMailer](http://phpmailer.worxware.com/)或[Zend_Mail](http://framework.zend.com/manual/en/zend.mail.html)之类的包通过 SMTP 使用帐户发送消息。因此，您可以使用与 Outlook 邮箱相同的凭据和设置……特别是：SMTP 服务器（传出服务器）、端口、加密 (ssl/tls) 用户名​​、密码。

文档中的示例

1.  [斯威夫特梅勒](http://swiftmailer.org/docs/sending.html#smtp-with-a-username-and-password)
2.  [PHPMailer](http://phpmailer.worxware.com/index.php?pg=examplebsmtp)
3.  [Zend_Mail](http://framework.zend.com/manual/en/zend.mail.sending.html)

# html - 在嵌套非常深的 DIV 中设置列 表样式

> ID：10326561
> 
> 赞同：-1
> 
> 时间：2012-04-26T02:49:53.533
> 
> 标签：html, css

我正在处理位于[http://www.richmindonline.com/doggy/index.html](http://www.richmindonline.com/doggy/index.html)的网页。我无法在页面中间附近设置单个列表的样式。我想添加`{list-style-type:disc;}`为一种样式，但它不起作用。我想要应用样式的列表位于“欢迎”段落下，特别是在标有“新闻”的 4 个框的第一个下。列表的第一项是“链接到新闻故事”。我尝试使用 Firefox 来查找元素，但即使我非常具体，样式也不会改变。

任何帮助，将不胜感激。下面列出了 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Go-to Guide For Pets</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<link href="style.css" rel="stylesheet" type="text/css" />
<link href="layout.css" rel="stylesheet" type="text/css" />
<script src="maxheight.js" type="text/javascript"></script>
</head>

<body  id="page1" onload="new ElementMaxHeight(); ">
<div class="main">
<div id="header">
    <ul class="ul1">
        <li><a href="index.html">Welcome</a></li>
        <li><a href="news.html">News</a></li>
        <li><a href="information.html">Information</a></li>
        <li><a href="products.html">Products</a></li>
        <li><a href="services.html">Services</a></li>
        <li><a href="funhouse.html">Funhouse</a></li>
    </ul>
    <div class="block">
        <div class="indent-block">
            <img alt="" src="images/title1.gif" /><br />
            <p><strong>Special program for your dog</strong></p>
            <ul class="ul">
                <li><a href="#">Nulla dui. Fusce feugiat mal</a></li>
                <li><a href="#">Esuada odio. scing elitauris </a></li>
                <li class="last"><a href="#">Fermentum dictum</a></li>
            </ul>
        </div>
        <a href="#"><img alt="" src="images/button.gif" class="button" /></a>
  </div>
    <div class="indent">
        <a href="index.html"><img alt="" src="images/logo.gif" class="logo" /></a><br />
        <a href="index.html"><img alt="" src="images/img.jpg" /></a><br />
    </div>
</div>
<div id="content">      
    <div class="indent-main">
        <div class="indent">
            <div class="container">
                <div class="col-1">
                    <div class="indent-col1">
                        <h1 class="title">Welcome</h1>
                        <p class="p1">Welcome Pet Lovers! &nbsp;Here you'll find just what you're looking for - with a big extra bonus: FUN! &nbsp;Sure, you could buy that catnip or dog toy anywhere else, but here at the Go-To Guide, we are SERIOUSLY committed to making you SMILE. &nbsp;Maybe even LAUGH!</p>
                      <div class="box">
                            <div class="border-top">
                                <div class="border-bottom">
                                    <div class="corner-top-right">
                                        <div class="corner-top-left">
                                            <div class="corner-bottom-left">
                                                <div class="corner-bottom-right"> 
                                                    <div class="indent-box">
                                                        <div class="container">
                                                          <div class="col-3">
                                                                <img alt="" src="images/1page_img1.jpg" class="img-indent" /><br />
                                                              <a href="#" class="link2"><strong>News</strong></a> <br />
                                                                <ul class="boxlist">
                                                                   <li>Link to News Story</li>
                                                                   <li>Link to News Story 2</li>
                                                                   <li>Link to News Story 3</li>
                                                                </ul>
                                                               </div>
                                                            <div class="col-3">
                                                                <img alt="" src="images/1page_img2.jpg" class="img-indent" /><br />
                                                              <a href="#" class="link2"><strong>Information</strong> <br />
                                                               &nbsp; &nbsp; &nbsp; &nbsp;mau <span>rillus</span> </a>
                                                            </div>
                                                            <div class="col-3">
                                                                <img alt="" src="images/1page_img3.jpg" class="img-indent" /><br />
                                                              <a href="#" class="link2"><strong>Products</strong> <br />
                                                               &nbsp; &nbsp; &nbsp; &nbsp;cumsoci <span>inatot</span> </a>
                                                            </div>
                                                            <div class="col-4">
                                                                <img alt="" src="images/1page_img4.jpg" class="img-indent" /><br />
                                                              <a href="#" class="link2"><strong>Services</strong> <br />
                                                               &nbsp; &nbsp; &nbsp; &nbsp;us etgnis <span>sriea</span>  </a>
                                                          </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <img alt="" src="images/1page_title2.gif" class="title1" /><br />
                        <p><strong>04/18/2009 - 14:53</strong></p>
                        <p class="p"><strong>Lum moleie lacneanrit</strong> lacneanrit maurillus Cum sociis natotibus etgnis disriea jesertas leraen<br />
                        monluslertas lrurtas feugiat maleadabi nunc odgravida atcursus nec, luctus a, locenas tristique orci ac sem. Duis ultricies pharetra magna onec accumsan malesuada nec sit amet er orem </p>
                        <a href="#" class="link">more info</a> &nbsp; &nbsp; &nbsp;<a href="#" class="link">view comments</a>
                    </div>
                </div>
                <div class="col-2">
                    <div class="box1">
                        <div class="border-top">
                            <div class="border-bottom">
                                <div class="border-right">
                                    <div class="border-left">
                                        <div class="corner-top-right">
                                            <div class="corner-top-left">
                                                <div class="corner-bottom-left">
                                                    <div class="corner-bottom-right"> 
                                                        <img alt="" src="images/1page_title7.gif" class="title2" /><br />
                                                        <div class="indent-box">
                                                            <ul class="ul">
                                                                <li><a href="#">Acneanrit</a> maurillus cum sociis </li>
                                                                <li><a href="#">Cum sociis</a> natotibus etgnis </li>
                                                                <li><a href="#">Natotibus</a> etgnis disriea </li>
                                                                <li><a href="#">Egnis</a> disriea jesertas leraen </li>
                                                                <li><a href="#">Jesertas</a> leraen monluslertas </li>
                                                                <li><a href="#">Leraen monluslertas</a> lrurtas </li>
                                                                <li><a href="#">Monluslertas</a> lrurtas feugiat </li>
                                                                <li><a href="#">Lrurtas</a> feugiat male</li>
                                                                <li class="last"><a href="#">Feugiat</a> malesuadabi unc </li>
                                                            </ul>
                                                        </div>                                     
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                  <form action="" id="form1">
                    <div class="indent-1">
                        <img alt="" src="images/1page_title8.gif" /><br />
                        <p>Enter your email</p>
                         <p><input type="text" class="input" /><a href="#" class="ok" onclick="document.getElementById('form1').submit()">ok</a></p>
                        <a href="#" class="link3"> Unsubscribe</a>
                    </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="box3">
            <div class="border-top3">
                <div class="corner-top-right3">
                    <div class="corner-top-left3">
                        <div class="indent-box3">
                            <img alt="" src="images/1page_title3.gif" /><br />
                            <div class="container">
                                <div class="col-5 maxheight">
                                    <div class="box2 maxheight">
                                        <div class="border-top maxheight">
                                            <div class="border-bottom maxheight">
                                                <div class="border-right maxheight">
                                                    <div class="border-left maxheight">
                                                        <div class="corner-top-right maxheight">
                                                            <div class="corner-top-left maxheight">
                                                                <div class="corner-bottom-left maxheight">
                                                                    <div class="corner-bottom-right maxheight"> 
                                                                        <div class="indent-box">
                                                                            <img alt="" src="images/1page_title4.gif" class="title-1" /><br />
                                                                            <h4>Sed laoreet aliquam lda let aliquam. </h4> 
                                                                            <p>Mauris fermentum dictum gna. Sed laoreet aliquam leo. Ut tellus dolorap
                                                                            ibus eget element vel, cursus </p>
                                                                            <p>Mauris fermentum dictum gnased </p>
                                                                            <a href="#" class="link3">more info</a>            
                                                                        </div>                                     
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-5 maxheight">
                                    <div class="box2 maxheight">
                                        <div class="border-top maxheight">
                                            <div class="border-bottom maxheight">
                                                <div class="border-right maxheight">
                                                    <div class="border-left maxheight">
                                                        <div class="corner-top-right maxheight">
                                                            <div class="corner-top-left maxheight">
                                                                <div class="corner-bottom-left maxheight">
                                                                    <div class="corner-bottom-right maxheight"> 
                                                                      <div class="indent-box">
                                                                          <img alt="" src="images/1page_title5.gif" class="title-1" /><br />
                                                                          <ul class="p">
                                                                            <li><a href="#">Vivamus eget nibhacilisiaenea</a></li>
                                                                                <li><a href="#">Nec erosestibulum ante ipsum</a></li>
                                                                                <li><a href="#">Faucibus orci luctus et ultrices </a></li>
                                                                                <li><a href="#">Posuere cubilia curae</a></li>
                                                                            <li><a href="#">Suspendisse sollicitudin velit sed </a></li>
                                                                            </ul>
                                                                            <a href="#" class="link3">more info</a>            
                                                                        </div>                                     
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                              <div class="col-5 maxheight">
                                    <div class="box2 maxheight">
                                        <div class="border-top maxheight">
                                            <div class="border-bottom maxheight">
                                                <div class="border-right maxheight">
                                                    <div class="border-left maxheight">
                                                        <div class="corner-top-right maxheight">
                                                            <div class="corner-top-left maxheight">
                                                                <div class="corner-bottom-left maxheight">
                                                                    <div class="corner-bottom-right maxheight"> 
                                                                        <div class="indent-box">
                                                                          <img alt="" src="images/1page_title6.gif" class="title-1" /><br />
                                                                            <h4>Ut tellus dolorapibus eget elemeel. </h4> 
                                                                            <p>Sed laoreet aliquam leo. Ut tellus dolorapibus eget element vel, cursus eleifend, elit. Aenean auctor wisi et </p>
                                                                            <p>Sed laoreet aliquam leo. Ut tellus  </p>
                                                                            <a href="#" class="link3">more info</a>            
                                                                        </div>                                     
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>   
                    </div>
                </div>
            </div>
        </div>
     </div>
</div>   
<div id="footer">
    <div class="bot-left">
        <div class="bot-right">
            <div class="indent-footer">Doggie &nbsp;&copy; 2009 &nbsp;<a href="index-5.html">Privacy Policy</a></div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:58:14.107

这可以为这些元素添加项目符号。

```
.boxlist li {
    list-style-type: disc;
    list-style-position: inside;
} 
```

您的项目符号被您的父 div 隐藏，因为默认情况下它们出现在列表边界框之外。您可以将子弹移动到边界框内（如上所示）或在它们上设置一个margin-left。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:56:23.037

要获得直系`<li>`子女，您可以这样做：

```
$(".boxlist").children(); 
```

（我假设您使用的是 jQuery，我现在看到您可能没有这样做。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T02:58:18.683

例如使用这个 css 来调整。如果我理解正确，这应该会有所帮助。

前任。.boxlist li{color:#f1f;}

# objective-c - 目标 C：在不同页面上添加图像

> ID：10326562
> 
> 赞同：0
> 
> 时间：2012-04-26T02:50:03.260
> 
> 标签：objective-c, ios

我是新手尝试创建一个仅使用单视图应用程序来适应新 xcode 的基于页面的应用程序的图书应用程序，因为学习模板非常混乱。

我找到了这段代码，我试图将这项工作的 HTML 内容替换为 UIImageView，但我失败了。

```
- (void) createContentPages
{
    NSMutableArray *pageStrings = [[NSMutableArray alloc] init];
    for (int i = 1; i < 11; i++)
    {
        NSString *contentString = [[NSString alloc]
                                   initWithFormat:@"<html><head></head><body><h1>Chapter %d</h1><p>This is the page %d of content displayed using UIPageViewController in iOS 5.</p></body></html>", i, i];
        [pageStrings addObject:contentString];
    }
    pageContent = [[NSArray alloc] initWithArray:pageStrings];
} 
```

我想要的是每页显示不同的图像。

这就是我所做的。（我知道这是错误的，我只是尝试过）

```
- (void) createContentPages
{
    NSMutableArray *pageStrings = [[NSMutableArray alloc] init];
    for (int i = 1; i < 11; i++)
    {
        NSArray *photos = [[NSArray arrayWithObjects:   
                        [UIImage imageNamed:@"p1.png"],
                        [UIImage imageNamed:@"p2.png"],
                        [UIImage imageNamed:@"p3.png"],
                        [UIImage imageNamed:@"p4.png"],
                        nil];
        [pageStrings addObject:photos];
    }
    pageContent = [[NSArray alloc] initWithArray:pageStrings];
} 
```

它在每个页面中都有 UIWebView 。如果我用 UIImageView 替换它，它会运行吗？

这是其余的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self createContentPages];
    NSDictionary *options = 
    [NSDictionary dictionaryWithObject:
     [NSNumber numberWithInteger:UIPageViewControllerSpineLocationMin]
                                forKey: UIPageViewControllerOptionSpineLocationKey];

    self.pageController = [[UIPageViewController alloc] 
                           initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl
                           navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal
                           options: options];

    pageController.dataSource = self;
    [[pageController view] setFrame:[[self view] bounds]];

    contentViewController *initialViewController = 
    [self viewControllerAtIndex:0];
    NSArray *viewControllers =  
    [NSArray arrayWithObject:initialViewController];

    [pageController setViewControllers:viewControllers  
                             direction:UIPageViewControllerNavigationDirectionForward 
                              animated:NO 
                            completion:nil];

    [self addChildViewController:pageController];
    [[self view] addSubview:[pageController view]];
    [pageController didMoveToParentViewController:self];
}

- (contentViewController *)viewControllerAtIndex:(NSUInteger)index
{
    // Return the data view controller for the given index.
    if (([self.pageContent count] == 0) || 
        (index >= [self.pageContent count])) {
        return nil;
    }

    // Create a new view controller and pass suitable data.
    contentViewController *dataViewController = 
    [[contentViewController alloc]
     initWithNibName:@"contentViewController" 
     bundle:nil];
    dataViewController.dataObject = 
    [self.pageContent objectAtIndex:index];
    return dataViewController;
}

- (NSUInteger)indexOfViewController:(contentViewController *)viewController
{
    return [self.pageContent indexOfObject:viewController.dataObject];
}

- (UIViewController *)pageViewController:
(UIPageViewController *)pageViewController viewControllerBeforeViewController:
(UIViewController *)viewController
{
    NSUInteger index = [self indexOfViewController:
                        (contentViewController *)viewController];
    if ((index == 0) || (index == NSNotFound)) {
        return nil;
    }

    index--;
    return [self viewControllerAtIndex:index];
}

- (UIViewController *)pageViewController:
(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
    NSUInteger index = [self indexOfViewController:
                        (contentViewController *)viewController];
    if (index == NSNotFound) {
        return nil;
    }

    index++;
    if (index == [self.pageContent count]) {
        return nil;
    }
    return [self viewControllerAtIndex:index];
} 
```

在子类上

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [webView loadHTMLString:dataObject 
                    baseURL:[NSURL URLWithString:@""]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:15:23.770

将您的 createContentPages() 方法与这一小改动一起使用（仅 UIImage 并不代表您可以放在“视图”上的任何内容，而是您需要使用包含 UIImages 的 UIImageView）：

```
- (void) createContentPages
{
    NSMutableArray *pageStrings = [[NSMutableArray alloc] init];
    for (int i = 1; i < 11; i++)
    {
        NSArray *photos = [[NSArray arrayWithObjects:   
                        [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"p1.png"] autorelease],
                        [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"p2.png"] autorelease],
                        [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"p3.png"] autorelease],
                        [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"p4.png"] autorelease],
                        nil];
        [pageStrings addObject:photos];
    }
    pageContent = [[NSArray alloc] initWithArray:pageStrings];
} 
```

您可以使用主控制器中的代码（您发布的大块代码）。

您需要做的唯一更改是您所谓的“子类”。（实际上是 UIPageViewController 处理显示实际页面）。

在那个 UIPageViewController 中删除“webView”（UIWebView）。这可能是在 .xib 文件中完成的（看起来不像是在代码中添加的）。然后让 UIPageViewController 中的 viewWillAppear 看起来像这样：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    self.view = dataObject;

} 
```

这应该够了吧。基本上，我们不再使用 UIWebView 来显示 HTML 数据，而只是添加 dataObject（一个 UIImageView）作为 UIPageViewController 的子视图。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T02:40:03.940

任何时候你都可以使用 HTML 标签来使用 HTML 页面中的图片`<IMG>`。所以，没有理由使用 UIImageView。

# android - Android Controller如何实现包含Runnable Observable的Observer

> ID：10326568
> 
> 赞同：3
> 
> 时间：2012-04-26T02:50:50.140
> 
> 标签：android, runnable, observable, observers

我正在编写一个 Cowndown 计时器，并且我有一个 countdowntimerController，它实现了 Observer 接口。它有一个名为 countdown 的内部类，它扩展了 Observable 类并实现了 Runnable 接口。但是，当可运行对象完成时，我的控制器不会收到通知。以下是我的代码，请告诉我哪里出错了。PS 因为 Observer 在 Observable 内部，所以我使用了 countdown.addObserver(this)，这会是问题吗？

```
public class CountdownTimerController extends ActivityController implements Observer {
    private Handler handler = new Handler(); 
    private void startTimer(int posi) {
        /* some countdown timer codes */
        Countdown countdown = new Countdown();
        countdown.addObserver(this);
       handler.post(countdown);
    }
    public void update(Observable arg0, Object arg1) {
        // TODO Auto-generated method stub
        Log.d("countdownController", "update");
    }
    private class Countdown extends Observable implements Runnable {
        //private Handler handler = new Handler();      
        public void run() {
            long millis = countdownTime - (System.currentTimeMillis() - startTime) + pausedTime;
            if(millis <=0) {
                onFinish();
                return;
            }
            /* time calculation logic */
            handler.postDelayed(this, 100);
        }

        public void onFinish(){
            notifyObservers();
            handler.removeCallbacks(this);
        }
    };
} 
```

# java - HTTPUrlConnection 和 application/octet-stream 内容类型响应处理

> ID：10326569
> 
> 赞同：0
> 
> 时间：2012-04-26T02:50:54.467
> 
> 标签：java, http, media-player, httpurlconnection

我正在编写一个使用 Java 的 HTTPUrlConnection 类来访问 URL 的 Android 媒体播放器。我最近收到了与以下 URL 相关的错误报告：

“http://listen.theradio.cc”

此 URL 重定向到“http://listen.theradio.cc/theradiocc.pls”，它返回 PLS 格式的播放列表。我面临的问题是我的应用程序通常会在内容类型标头字段中确定如何最好地处理 URL。我在上面发布的 URL 返回“application/octet-stream”的内容类型，它可以是任何东西。因此，我的应用程序没有尝试解析返回的播放列表，而是尝试播放 URL（显然失败了）。在这种情况下，有没有其他方法可以有效地确定 URL 返回的内容类型？我应该尝试获取 InputStream 并检查返回内容的前几行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T03:55:13.290

任何事情都可能`application/octet-stream`因此具有误导性，因为服务器不会为播放列表返回预期的内容类型。

最好在服务器端修复。

另外做一个`HEAD`请求应该可以知道 URL 的信息。

发出 curl 请求以`http://listen.theradio.cc/theradiocc.pls`返回以下内容。

```
curl -i http://listen.theradio.cc/theradiocc.pls

HTTP/1.1 200 OK
Server: nginx
Date: Thu, 26 Apr 2012 03:44:42 GMT
Content-Type: application/octet-stream
Content-Length: 111
Last-Modified: Tue, 15 Nov 2011 23:57:04 GMT
Connection: keep-alive
Accept-Ranges: bytes

[playlist]
NumberOfEntries=1
File1=http://theradio.cc:8000/trcc-stream
Title1=TheRadio.CC
Length1=-1
Version=2 
```

所以事情需要修复并正确修复！

# python - 使用“~”符号从不同目录导入 Python

> ID：10326571
> 
> 赞同：1
> 
> 时间：2012-04-26T02:51:26.923
> 
> 标签：python

在 linux 结构下，我注意到以下工作：

```
import sys
sys.path.append("/home/username/fullpathname/")
import my_module 
```

但是以下不

```
import sys
sys.path.append("~/fullpathname")
import my_module 
```

有没有办法使用“~”运算符？我不明白为什么 python 想要完整的目录。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T02:54:14.953

您可以使用`os.path.expanduser`：

```
import sys, os
sys.path.append(os.path.expanduser("~/fullpathname"))
import mymodule 
```

# java - 如何使用主键查找数据库中的行号（Android SQLite Eclipse Java）

> ID：10326574
> 
> 赞同：0
> 
> 时间：2012-04-26T02:51:55.730
> 
> 标签：java, android, eclipse, sqlite

我在 ListView 中显示了一系列 sqlite 条目，并且它们的主键位于并行数组中。当用户选择一个项目时，该项目被发送到一个编辑器活动（因此用户可以编辑该条目）。按照我的编程方式，Editor 活动类使用 Cursor 的 moveToPosition 函数使用其行号（表示位置）从数据库中检索条目。

如何使用条目的主键找出其行号？

**编辑：**
我找到了一个解决方案，其中我首先从数据库中检索条目选择，然后返回并检索这些条目的主键。我将条目存储在一个数组中，将主键存储在另一个数组中。

希望您在看到代码后能够给出更清晰的响应。我正在寻找一个更优雅的解决方案，尽管这似乎可行。

这是相关的代码。

**日历菜单.java**

```
@Override
public void onCreate(Bundle savedInstance){
  incomeManager = new SQLManagerIncome(this);
incomeManager.open();

  //This method (see below) gets all of the SQLite entries between two dates
    incomeArray = incomeManager.getDatedEntriesString(
            currentDay.getTimeInMillis(), 
              nextDay.getTimeInMillis());

  //This method (see below) gets the primary keys of all the entries retrieved 
  //in the previous method

    incomeArrayKeys = incomeManager.getDatedKeys(
           currentDay.getTimeInMillis(),
            nextDay.getTimeInMillis());
    incomeManager.close();

    // Sending the SQL info to the ListViews
    incomeAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, incomeArray);
    dayList.setAdapter(incomeAdapter);
}

    @Override
public void onItemClick(AdapterView<?> listView, View view, int pos, long id) {
    Bundle basket = new Bundle();
    // we need to send the position of an entry inside the entire database to the
    // Editor class. So we'll use the primary key of an entry to retrieve its position.

    switch (listView.getId()) {
    case R.id.dayList:
        int entryPos = 0;
        //incomeArrayKeys holds all of the primary keys. It is a parallel
        //array to the array that is displayed in the listview 
        //(using a standard ArrayAdapter)
            incomeManager.open();
            entryPos = incomeManager.findPosByKey(incomeArrayKeys[pos]);
            incomeManager.close();

        basket.putLong("index", entryPos);
                    Class dayClass;
            try {
                dayClass = Class.forName("com.shulim.maaser.EditIncome");
                Intent dayIntent = new Intent(CalendarMenu.this, dayClass);
                dayIntent.putExtras(basket);
                startActivityForResult(dayIntent, 0);
            } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        break;
} 
```

**SQLManagerIncome.java**

```
public String[] getDatedEntriesString(Long firstDay, Long lastDay){
    String[] columns = new String[] { KEY_ROWID, KEY_DESCRIPTION,
            KEY_AMOUNT, KEY_DATE, KEY_OWED };
    String selection = KEY_DATE + " >=" + firstDay + " AND " + KEY_DATE
            + "<" + lastDay;
    Cursor c = ourDatabase.query(INCOME_TABLE, columns, selection, null, null, null, null);
    int iDescription = c.getColumnIndex(KEY_DESCRIPTION);
    int iAmount = c.getColumnIndex(KEY_AMOUNT);
    ArrayList<String> keys = new ArrayList<String>();

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        Long dateMillis = c.getLong(3);
        final Calendar cal = Calendar.getInstance();
        cal.setTimeInMillis(dateMillis);
        int mYear = cal.get(Calendar.YEAR);
        int mMonth = cal.get(Calendar.MONTH)+1;
        int mDay = cal.get(Calendar.DAY_OF_MONTH);
        String date = mMonth + "-" + mDay + "-" + mYear;
        String result = "Desc: " + c.getString(iDescription) 
                + ". Amount: $"
                + c.getString(iAmount) + ". Date: "
                + date + "\n";
        keys.add(result);
    }
    String[] stringDateKeys = new String[keys.size()];
    stringDateKeys = keys.toArray(stringDateKeys);
    c.close();
    return stringDateKeys;
}

public Integer[] getDatedKeys(Long firstDay, Long lastDay) {
    String[] columns = new String[] { KEY_ROWID, KEY_DESCRIPTION,
             KEY_AMOUNT, KEY_DATE };
    String selection = KEY_DATE + " >=" + firstDay + " AND " + KEY_DATE
            + "<" + lastDay;
    Cursor c = ourDatabase.query(INCOME_TABLE, columns, selection, null,
            null, null, null);
    int iRow = c.getColumnIndex(KEY_ROWID);
    ArrayList<Integer> keys = new ArrayList<Integer>();

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        int result = c.getInt(iRow);
        keys.add(result);
    }

        Integer[] intKeys = new Integer[keys.size()];
        intKeys = keys.toArray(intKeys);
        c.close();
        return intKeys;
}

public int findPosByKey(Integer integer) {
    String[] columns = new String[] { KEY_ROWID, KEY_DESCRIPTION,
            KEY_AMOUNT, KEY_DATE };
    Cursor c = ourDatabase.query(INCOME_TABLE, columns, null, null,
            null, null, null);
    int iRow = c.getColumnIndex(KEY_ROWID);
    int position = 0;
    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        if (c.getInt(iRow) == integer) {
            break;
        }
        position++;
    }
    c.close();
    return position;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:57:15.610

> 按照我的编程方式，Editor 活动类使用 Cursor 的 moveToPosition 函数使用其行号（表示位置）从数据库中检索条目。

您不需要使用光标的 moveToPosition 函数。相反，有一个更好的解决方案：使用您已有的主键。主键允许一个非常简单和高效的 SQL 查询，它只返回您想要的确切行。我不知道您的列名，但加载此行的示例 SQL 查询将是

```
SELECT foo, bar, baz
FROM FooBar
WHERE pk = userSelectedPrimaryKey; 
```

where`userSelectedPrimaryKey`通过查询生成器插入到语句中。

当然这只是一个粗略的草图，但重点是这个查询将只返回一行，这是用户选择的唯一具有主键值的行。这更简单，并且提高了性能，因为不需要遍历不必要的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:51:26.043

您已经提到，您可以选择通过调用并将此值传递`I have their primary keys in a parallel array.`给来检索从该数组中选择的项目的主键。在您可以轻松地检索您想要编辑的行，方法是在您的情况下传递这个主键，就像 Adam Mihalcin 在他的回答中提到的那样。`int pk= array[position]``EditorActivity``EditorActivity``SQL query`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T08:22:12.203

我找到了一个解决方案，我首先从数据库中检索条目的选择，然后返回并检索这些条目的主键。我将条目存储在一个数组中，将主键存储在另一个数组中。请参阅我在问题中发布的代码。

我正在寻找一个更优雅的解决方案，尽管现在这似乎可行。我希望有更优化的东西。

# wordpress - 将 Wordpress 小部件插件移植到 Blogger 小工具：管理界面、全局设置？

> ID：10326576
> 
> 赞同：0
> 
> 时间：2012-04-26T02:52:19.980
> 
> 标签：wordpress, porting, blogger, opensocial, google-gadget

我正在尝试将 Wordpress 小部件插件移植到 Blogger 小工具，并发现它们截然不同的世界。WP 小部件的作用是：

1.  在管理界面（由小部件对象的`form()`方法提供）中，它显示博客中的帖子列表供博客所有者从中选择，并将其保存为小部件设置。
2.  在小部件显示中（由小部件对象的`widget()`方法提供），它显示链接到所选帖子的一些内容。

这似乎是在 Google 小工具中复制的异常困难的行为。我最终遇到的问题是：

1.  据我所知，Blogger 几乎没有管理界面的概念，当然也没有管理小部件的概念。看来我需要通过同一个小工具显示部署管理员和用户功能；我对此是否正确？
2.  我可以很容易地获得博客文章列表，但是我究竟如何创建一个对小部件实例是全局的设置，而不是特定于查看它的用户？我有一种模糊的印象，那就是通过 OpenSocial 可能以某种方式实现这一点，但如果我能弄清楚怎么做，那该死的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:31:40.060

您是否已经检查过以下链接：[https](https://developers.google.com/blogger/docs/gadgets/gadgets_for_blogger) ://developers.google.com/blogger/docs/gadgets/gadgets_for_blogger和[https://developers.google.com/gadgets/docs/basic](https://developers.google.com/gadgets/docs/basic)？他们应该对第 1 项有足够的信息。

**请注意：**随着最近添加的动态视图，您似乎需要修改一些东西才能在启用动态视图时使您的小工具工作（请参阅[这篇文章](http://blogger-hints-and-tips.blogspot.com/2012/01/adding-gadgets-to-dynamic-view.html)）。也许他们将来会改进这一点，但与动态视图相关的最后一个博客小工具公告是在 2012 年 2 月[dynamic-views-update-3-gadgets](http://buzz.blogger.com/2012/02/dynamic-views-update-3-gadgets.html)。

对于第 2 项，我也不确定。也许他们将来会添加。

# shell - 如何在 Shell 脚本中运行 AWK 命令？

> ID：10326582
> 
> 赞同：2
> 
> 时间：2012-04-26T02:53:13.177
> 
> 标签：shell, scripting, awk

我正在尝试在 for 循环中使用 AWK 创建文件，但得到空文件。看起来 AWK 没有被执行。你能指教一下，这里有什么不正确的吗？

我有一个文件`$LOG/order_"$id".txt`，它在 2 个字符串等之间有一些行`CUT:1`。`CUT2`我只需要将这些行放在单独的文件中，所以我写了这个 for 循环。

```
for (( i=1; i<=$CNTLN; i++ ))
do
    j=`expr $i - 1`
    /usr/bin/awk '/CUT:$j/, /CUT:$i/' $LOG/order_"$id".txt >  $LOG/order_"$id"_"$i".txt
done 
```

这会生成空白文件，但是如果我在 shell 上复制并过去这个命令，它就可以工作。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:22:32.870

您的引用是正确的，但是您应该使用变量传递而不是尝试在 AWK 脚本中嵌入 shell 变量。

```
for (( i=1; i<=CNTLN; i++ ))
do
    (( j = i - 1 ))
    /usr/bin/awk -v i="$i" -v j="$j" '$0 ~ "CUT:" j, $0 ~ "CUT:" i' "$LOG/order_$id.txt" >  "$LOG/order_${id}_$i.txt"
done 
```

使用 AWK 变量时，您必须使用波浪号匹配运算符而不是斜线分隔的形式。

你没有说你正在使用哪个 shell，但根据`for`声明，我猜是 Bash、Korn 或 Z shell。如果它是其中之一，那么您可以在不使用外部`expr`实用程序的情况下进行整数运算。对于 ksh 或 zsh，您也可以进行浮点数学运算。

您可以删除计算的行`j`并将其包含在`for`语句中。

```
for (( i=1, j=0, i<=CNTLN; i++, j++ )) 
```

在几个地方，您使用全大写的变量名。我建议养成不这样做的习惯，以避免与 shell 或环境变量发生名称冲突。在这种特定情况下，这不是问题，但这是一个好习惯。

其实，现在想想。可以消除 shell 循环并用 AWK 编写整个内容。

# linux - 字节顺序：用户空间中的 le32_to_cpu

> ID：10326584
> 
> 赞同：0
> 
> 时间：2012-04-26T02:53:30.347
> 
> 标签：linux, kernel, endianness

我正在使用`/dev/mem`. Linux内核中是否有一些功能相当于`le32_to_cpu`来自用户空间？

是否有替代方法来实现这一目标？

RRS

PS：我正在为嵌入式板交叉编译此应用程序（运行 Linux 的 Xilinx Microblaze）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:08:00.660

使用此标头中`#include <endian.h>`的和宏`le32toh()`。

# c - strcpy 的分段错误

> ID：10326586
> 
> 赞同：19
> 
> 时间：2012-04-26T02:53:52.290
> 
> 标签：c, segmentation-fault, strcpy

我想知道为什么我在下面的代码中出现分段错误。

```
int main(void)
{
        char str[100]="My name is Vutukuri";
        char *str_old,*str_new;

        str_old=str;
        strcpy(str_new,str_old);

        puts(str_new);

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-26T02:57:04.193

您尚未初始化`*str_new`，因此它只是复制`str_old`到某个随机地址。您需要执行以下任一操作：

```
char str_new[100]; 
```

或者

```
char * str = (char *) malloc(100); 
```

`#include <stdlib.h>`如果您还没有使用 malloc 函数，则必须这样做。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-26T02:55:15.260

`str_new`是一个未初始化的指针，所以你试图写入一个（准）随机地址。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T02:56:08.727

因为`str_new`它没有指向有效的内存——它未初始化，包含垃圾，并且如果您遇到分段错误，可能指向甚至没有映射的内存。在调用之前，您必须`str_new`指出一个足够大的有效内存块来保存感兴趣的字符串（包括`\0`末尾的字节）`strcpy()`。

# c# - 如何在 ToolStrip 中保持对 ToolStripControlHost 所有者的关注

> ID：10326587
> 
> 赞同：1
> 
> 时间：2012-04-26T02:54:01.267
> 
> 标签：c#, winforms, focus, toolstrip, toolstripcontrolhost

将 C# 与 .Net 2.0 一起使用（尽管问题出现在 4.0 中）

似乎存在涉及 Windows 窗体中 ToolStrip 控件和 ToolStripControlHosts 焦点的错误。

考虑这个例子：用户单击 ToolStripMenuItem“Test A”，然后将鼠标斜向移动到下拉 ToolStripMenuItem“5”上。对角拖动时鼠标经过“Test B”，但当鼠标进入下拉列表时，焦点会自动从“Test B”移回“Test A”。这可以正常工作。

示例 1：http: [//i.stack.imgur.com/0X9mZ.png](http://i.stack.imgur.com/0X9mZ.png)

现在考虑一个类似的例子，但下拉列表中有一个 ToolStripControlHost。鼠标沿对角线移动，经过获得焦点的“测试 B”。当鼠标进入 ToolStripControlHost 时，焦点不会返回到父“Test A”，因此下拉列表关闭并且 ToolStripControlHost 被隐藏。

示例 2：http: [//i.stack.imgur.com/XJ75K.png](http://i.stack.imgur.com/XJ75K.png)

我的问题是，我该如何处理这种情况？有没有办法将焦点强制到 ToolStripMenuItem“测试 A”上？

我尝试将“Test A”的 DropDown 的 autoclose 属性设置为 false，然后手动处理 close 事件，但这会导致几个问题。单击 ToolStripControlHost 时，ToolStrip 会收到一个 OnClose 事件，其中 ToolStripDropDownCloseReason 被 AppClicked。此外，ToolStripControlHost 中的任何文本框都不会接收文本事件，因为 ToolStrip 似乎正在使用它们（退格键在下拉列表中将焦点向上移动，而不是删除文本等）。

谢谢你的帮助

西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T02:46:56.227

因此，当我想将控件添加到 ToolStrip 的 DropDown 项中时，我遇到了类似的问题。该解决方案的第一部分，至少在我的情况下，涉及创建包含我需要的所有内容的自定义用户控件。但是，即使这样做，在将所有内容都放入 LayoutControls 之前，我仍然会遇到焦点问题。一切都按预期工作，除了 DevExpress CheckedComboBoxEdit，因为它抓住了焦点，并且没有 DropDown 项目有句柄，它失去焦点并丢失。

我还尝试管理很多事件，并将 AutoClose 设置为 false，但它最终产生了其他问题。

我的建议是创建一个带有 LayoutControl 的 UserControl 来包含您的文本框（以及其他必要的项目）。这也将允许您在 UserControl 后面的代码中将您想要挂钩的任何附加功能（事件、绑定等）放入文本框中。我希望这会有所帮助，如果您有任何其他问题，请告诉我。

# c++ - 结构指针的动态数组在成员变量赋值上抛出 SIGSEGV

> ID：10326589
> 
> 赞同：0
> 
> 时间：2012-04-26T02:54:12.657
> 
> 标签：c++, pointers, struct, dynamic-arrays

我很确定这是一个简单的问题，但我正在尝试创建一个实现动态结构数组的数据结构。

每个结构都将实现一个链表。

所以我认为我想要一个指针数组，它将指向每个列表的头部。出于某种原因，分配方法变量会给我一个段错误。如果可以的话，我很想解释一下我做错了什么。谢谢！

哦，另外，所有这些都在一个名为 Cache 的类中，所以这就是为什么有些变量似乎没有定义，但我向你保证它们是。索引[i]->next = NULL 上的程序段错误；以及该行下方的类似行。

```
 typedef struct setNode {
    char valid, dirty;
    unsigned int tag;
    setNode *next;
    Cache *nextCache;

} set;
    set **indexes;

    arrayLength = cache_size / block_size;

    indexes = new setNode *[arrayLength];

    set *temp;

    //Step through the array. The array is full of pointers to "Dummy Nodes"
    for (size_t i = 0; i < arrayLength; i++) {
        indexes[i]->next = NULL;
        indexes[i]->valid = 0;
        indexes[i]->dirty = 0;
        indexes[i]->tag = 0;
        //create empty linked list for each tag spot (One for direct mapped. etc...)

         for(size_t i = 0; i < associativity; i++)
         {
         temp = indexes[i];
         temp->next = new setNode;
         temp = temp->next;
         temp->next = NULL;
         temp->valid = 0;
         temp->dirty = 0;
         temp->tag = 0;
         }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:58:33.437

`indexes`是指向对象的指针数组`set`，但它们未初始化。它们不指向实际`set`对象，而只是指向随机内存位置。尝试写入随机存储器是分段违规的本质。

在使用指针之前，您需要分配`set`对象并使指针指向它们——即，

```
for (size_t i = 0; i < arrayLength; i++) {
    indexes[i] = new set;
    indexes[i]->next = NULL;
    indexes[i]->valid = 0;
    ... 
```

# algorithm - 使用 Map/Reduce 算法计算单词

> ID：10326594
> 
> 赞同：1
> 
> 时间：2012-04-26T02:55:15.890
> 
> 标签：algorithm, map, count, word, reduce

如果有20个字数。每 5 个单词一组，这些组由不同的计算机节点处理。那么，如果“boy”这个词出现了两次，但是又分成了不同的组，那么Map/Redude是用什么样的算法来得到“boy”这个词的实际数量呢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:01:46.030

在这个例子中，使用 Map/Reduce 计算这个最明显的方法是每个 mapper 得到 5 个单词，然后将这个单词发送给 reducer。单词将在 reducer 之间拆分，因此 reducer 1 获得所有“boy”单词，reducer 2 获得所有“the”单词等，然后 reducer 可以简单地总结它收到的单词以获得出现次数那个词。

Hadoop 文档中有一个示例：http: [//hadoop.apache.org/common/docs/current/mapred_tutorial.html#Example%3A+WordCount+v1.0](http://hadoop.apache.org/common/docs/current/mapred_tutorial.html#Example%3A+WordCount+v1.0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:57:59.507

这就是 MapReduce 中的 reduce。主节点将获取每个子组中的出现计数，并通过添加每个单词的出现来组合它们。因此，如果有四个组，并且 'boy' 在其中两个中每个只出现一次，它将通过添加出现来组合它们以获得总共 1+1+0+0=2。

# android - ListView 的光标索引越界错误

> ID：10326606
> 
> 赞同：0
> 
> 时间：2012-04-26T02:56:32.210
> 
> 标签：android, listview, simplecursoradapter

我遇到了一个令人沮丧的问题，我有一个带有 3 个选项卡和 3 个 ListViews 的 Activity，我遇到了 OnItemClick 事件的问题。当我单击任何条目时，它会打开另一个活动并正确显示所需的结果，但是当我再次返回列表视图并尝试打开任何条目时，我得到了索引超出范围异常索引 -1 请求。没有意义的是，这 3 个中的一个列表视图可以正常工作，而其他 2 个则没有。下面是我的代码：

这个 OnResume () ：

```
 public void onTextChanged(CharSequence s, int start, int before,
                int count) {

        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        public void afterTextChanged(final Editable s) {

            mAdapter.setFilterQueryProvider(new FilterQueryProvider() {
                public Cursor runQuery(CharSequence constraint) {

                    String value = "%" + constraint + "%";
                    String Type2 = "%" + jype + "%";

                    curs = mDb.query(TABLE_NAME, columns, COL_SanTitle
                            + " LIKE ? And " + COL_SanCat + " LIKE ?",
                            new String[] { value, Type2 }, null, null,
                            COL_SanTitle + " ASC");

                    return curs;

                }
            });

            fAdapter.setFilterQueryProvider(new FilterQueryProvider() {
                public Cursor runQuery(CharSequence constraint) {

                    String value = "%" + constraint + "%";

                    String Type2 = "%YES%";

                    cursF = mDb.query(TABLE_NAME, columns, COL_SandFavor
                            + " LIKE ? And " + COL_SanTitle + " LIKE ?",
                            new String[] { Type2, value }, null, null,
                            COL_SanTitle + " ASC");

                    return cursF;

                }
            });

            dAdapter.setFilterQueryProvider(new FilterQueryProvider() {
                public Cursor runQuery(CharSequence constraint) {

                    String value = "%" + constraint + "%";
                    String Type2 = "%" + jype + "%";

                    cursD = mDb.query(TABLE_NAME, columns, COL_SanTitle
                            + " LIKE ? And " + COL_SanCat + " LIKE ?",
                            new String[] { value, Type2 }, null, null,
                            COL_SanTitle + " ASC");

                    cursD.moveToFirst();

                    return cursD;

                }

            }

            );

            fAdapter.getFilter().filter(s.toString());
            mAdapter.getFilter().filter(s.toString());
            dAdapter.getFilter().filter(s.toString());

            mAdapter.notifyDataSetChanged();
            fAdapter.notifyDataSetChanged();
            dAdapter.notifyDataSetChanged();
            mList.setAdapter(mAdapter);
            fList.setAdapter(fAdapter);
            dList.setAdapter(dAdapter);

            cursD.moveToFirst();
            cursS.moveToFirst();
            curs.moveToFirst();

        }
    }); 
```

这是 Logcat 错误：

> 04-26 18:56:50.310: E/AndroidRuntime(878): 致命异常: main 04-26 18:56:50.310: E/AndroidRuntime(878): android.database.CursorIndexOutOfBoundsException: 请求索引-1，大小1 04-26 18:56:50.310: E/AndroidRuntime(878): 在 android.database.AbstractCursor.checkPosition(AbstractCursor.java:580) 04-26 18:56:50.310: E/AndroidRuntime(878): 在android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214) 04-26 18:56:50.310: E/AndroidRuntime(878): 在 android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41) 04-26 18: 56:50.310: E/AndroidRuntime(878): 在 master.chef.mediamaster.Interface.onItemClick(Interface.java:781) 04-26 18:56:50.310: E/AndroidRuntime(878): 在 android.widget.AdapterView .performItemClick(AdapterView.java:284) 04-26 18:56:50.310: E/AndroidRuntime(878):在 android.widget.ListView.performItemClick(ListView.java:3513) 04-26 18:56:50.310: E/AndroidRuntime(878): 在 android.widget.AbsListView$PerformClick.run(AbsListView.java:1812) 04- 26 18:56:50.310: E/AndroidRuntime(878): 在 android.os.Handler.handleCallback(Handler.java:587) 04-26 18:56:50.310: E/AndroidRuntime(878): 在 android.os。 Handler.dispatchMessage(Handler.java:92) 04-26 18:56:50.310: E/AndroidRuntime(878): 在 android.os.Looper.loop(Looper.java:123) 04-26 18:56:50.310: E/AndroidRuntime(878): 在 android.app.ActivityThread.main(ActivityThread.java:3683) 04-26 18:56:50.310: E/AndroidRuntime(878): 在 java.lang.reflect.Method.invokeNative(Native方法) 04-26 18:56:50.310: E/AndroidRuntime(878): at java.lang.reflect.Method.invoke(Method.java:507) 04-26 18:56:50.310: E/AndroidRuntime(878) : 在 com.android.internal.os。ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 04-26 18:56:50.310: E/AndroidRuntime(878): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 04-26 18：56：50.310：E/AndroidRuntime（878）：在 dalvik.system.NativeStart.main（本机方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:06:24.060

您开始另一个活动，以便打开要删除的前一个活动，听起来好像是这样。要克服这个问题，请将您的列表生成代码移至 onResume，然后它会在您转到另一个活动并返回时运行，以及在您最初启动该活动时运行。

# c++ - 除了班级之外的每个人都是恒定的，有这样的事情吗？

> ID：10326618
> 
> 赞同：2
> 
> 时间：2012-04-26T02:58:08.670
> 
> 标签：c++, oop

我一直想知道有没有办法让一个类成员不使用只能由它的类修改的getter？

我在想的是这样的。

```
class A 
{
    public:
        crazyconst int x;

        void doStuff()
        {
             // Gettin' stuff done
             x = someValue; // OK
        }
};

int main(int argc, char** argv)
{
     A a;
     a.x = 4; // ERROR
} 
```

所以它是可见的，但对其班级以外的每个人都是只读的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T03:04:16.340

你的类可以有一个对私有非数据成员的公共`const`引用。`const`

编辑：但是，我应该指出，这样做会阻止您使用编译器生成的复制构造函数和复制赋值运算符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T03:04:20.350

答案是否定的，如果没有某种吸气剂，你就无法做到这一点。但是，您可以使 getter 可重用，并且可以使字段的简单语法（大多数情况下）起作用，而无需括号。

（需要 C++11）

```
template<typename Friend, typename FieldType>
class crazyconst
{
    FieldType value;
    friend Friend;
    FieldType& operator=(const FieldType& newValue) { return value = newValue; }
public:
    operator FieldType(void) const { return value; }
    FieldType operator()(void) const { return value; }
};

class A
{
public:
    crazyconst<A, int> x;

    void doStuff()
    {
        // Gettin' stuff done
        x = 5; // OK
    }
};

int main(int argc, char** argv)
{
    A a;
    int b = a.x;
    int c = a.x(); // also works
} 
```

C++03版本：http: [//ideone.com/8T1Po](http://ideone.com/8T1Po)

但请注意，这将编译但不能按预期工作：

```
const int& the_x = a.x;
a.doStuff();
std::cout << the_x; 
```

OTOH，这应该没问题：

```
const auto& ref_x = a.x;
a.doStuff();
std::cout << ref_x; 
```

# android - 在九个补丁的内容区绘制进度条和textview

> ID：10326631
> 
> 赞同：0
> 
> 时间：2012-04-26T02:59:41.453
> 
> 标签：android, styles, nine-patch

我有一个`RelativeLayout`with a`ProgressBar`和一个`TextView`嵌套在里面。的背景`RelativeLayout`是​​由 9patch 图像定义的，但是子视图没有正确地遵循 9patch 图像的内容区域，相反，如果我的 9patch 图像中没有定义内容区域，它们只会出现在它们出现的位置。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal"
    android:orientation="vertical"
    android:background="@+drawable/loading_screen" 
    android:padding="0dip" >

    <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_above="@+id/progressBar1"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/loading"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@android:color/black" />

</RelativeLayout> 
```

这是我的 9patch 文件：

![我的 9 补丁文件](../Images/b1657ed789817303e85244f2ff17ac64.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:17:30.157

9patch 图像中定义的内容区域与 UI 组件的位置完全没有关系，它只是定义了应该如何拉伸图像以填充指定区域。为了使 UI 组件的放置与 9patch 图像保持一致，您需要为您`RelativeLayout`的 .

# firefox-addon - 如何获取点击链接的 URL？

> ID：10326632
> 
> 赞同：1
> 
> 时间：2012-04-26T02:59:43.423
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在尝试通过 Mozilla Add-On Builder 创建一个附加组件。我需要知道的是如何通过加载项获取活动选项卡中左键单击链接的 URL 并在新选项卡中打开它。

我知道这个过程涉及通过 page-mod 添加一个事件监听器，然后使用 tabs 模块，但是我似乎无法获得正确的语法。

编辑：（这是我到目前为止所拥有的）

```
var Widget = require("widget").Widget;
var tabs = require('tabs');
var pageMod = require("page-mod");

exports.main = function() {

    pageMod.PageMod({
    include: '*',
    contentScriptWhen: 'ready',
    contentScript: "window.addEventListener('click', function(event) { self.port.emit( 'click',event.target.toString() )},false)",
    onAttach: function(worker) {
        worker.port.on("click", function(urlClicked) {
            tabs.open(urlClicked);

        });
     }

    }); 

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:44:06.827

您那里的代码大部分是正确的并且对我有用。但是，您的内容脚本代码存在两个问题：

*   它需要调用`event.preventDefault()`以防止浏览器跟踪链接。否则，链接页面将同时加载到当前选项卡和您的扩展程序打开的新选项卡中。
*   它不检查是否`event.target`实际上是一个链接。它可能是链接的子节点，也可能根本不是链接。

总之，您的内容脚本应如下所示：

```
window.addEventListener("click", function(event)
{
  var link = event.target;
  while (link && link.localName != "a")
    link = link.parentNode;

  if (link)
  {
    self.port.emit("click", link.href);
    event.preventDefault();
  }
}, false); 
```

对于像这样的非平凡内容脚本，您不应使用`contentScript`参数，而应将其放入`data/`目录中自己的文件中。然后，您可以`contentScriptFile`在构造面板时使用参数：

```
contentScriptFile: require("self").data.url("contentScript.js"), 
```

# android - android捆绑包不会结转

> ID：10326633
> 
> 赞同：1
> 
> 时间：2012-04-26T02:59:43.473
> 
> 标签：android, database, bundle

你好，我是这个网站的新手，对安卓编程也有点陌生......

每次我单击按钮进入下一个活动时，我都会强制关闭。我知道该活动有效，因为我注释掉了捆绑包..有人知道我做错了什么吗？

```
// click button on 1st activity

    Intent iCreate = new 
Intent("silver.asw.charactersheet.CREATECHARACTER");
        iCreate.putExtra("cname",item);
        startActivity(iCreate);

// on item select
item = spin.getItemAtPosition(position).toString();
// spinner is being populated by sql database

// 2nd activity
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.character);
    TextView character = (TextView)findViewById(R.id.tvViewCharacter);

    Bundle b = this.getIntent().getExtras();
    String item = b.getString("cname");
    character.setText(item);
} 
```

此外，我没有任何警告或无法检查我的 logcat，因为我正在使用 AIDE，它是一个 android 应用程序 ide。（我离开家之前已经在我的电脑上测试过这段代码，同样的问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:08:04.217

我不确定您的 onClick 功能在哪里，但请尝试类似 Ex.

初始化按钮

```
Button b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new OnClickListener() {
        //start activity
        public void onClick(View v) {
            startActivity(new Intent(Main.this, StartPage.class));

        }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T03:06:15.503

you are not putting any bundle in intent but trying receiving in second activity.use this way:

```
// 1nd activity
item = spin.getItemAtPosition(position).toString();
Bundle bundle = new Bundle();
bundle.putString("cname", item);
iCreate.putExtras(bundle);

// 2nd activity

 Bundle bundle = this.getIntent().getExtras();
 String name = bundle.getString("cname"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T03:16:29.173

```
 Bundle b = this.getIntent().getExtras(); 
```

replace the above line with below in first activity

```
Bundle bundle = new Bundle();

Bundle b = getIntent().getExtras();//from 2 activity you can call as it no need to have this 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T03:28:27.623

在第二个活动中，使用

```
String item = getIntent().getStringExtra("cname"); 
```

代替

```
Bundle b = this.getIntent().getExtras();
// b is null, because you use intent.putExtra(string, string). you should     
// use above method to get the data.
String item = b.getString("cname"); 
```

这将导致 NULLPointerException。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T05:03:36.127

如果您使用此代码

```
 Intent iCreate = new Intent("silver.asw.charactersheet.CREATECHARACTER");
    iCreate.putExtra("cname",item);
    startActivity(iCreate); 
```

在您的第二个活动中，您可以像这样使用。

```
// 2nd activity
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.character);
TextView character = (TextView)findViewById(R.id.tvViewCharacter);

String item = getIntent().getExtras()..getString("cname");
character.setText(item);
} 
```

或者你可以这样使用的另一种方式，

```
 Intent iCreate = new Intent("silver.asw.charactersheet.CREATECHARACTER");
    Bundle b=new Bundle();
    b.putString("cname", item);
    iCreate.putExtras(bundle);
    startActivity(iCreate); 
```

在你的第二个活动中

```
/ 2nd activity
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.character);
TextView character = (TextView)findViewById(R.id.tvViewCharacter);
Bundle b = getIntent().getExtras();
String item = b.getString("cname");
character.setText(item);
} 
```

# javascript - JavaScript 数组中的字符串索引

> ID：10326635
> 
> 赞同：3
> 
> 时间：2012-04-26T03:00:07.700
> 
> 标签：javascript, arrays, indexing

除了数组索引中的数字之外，我还想使用特定的字符串，

我这样做

```
var array = new Array();
$(document).ready(function(){
    array = addToArray();
    console.log("array size " + array.length);
});

function addToArray(){
    var i = 0;
    var tmpArray = new Array();
    while(i<10){
        if(i>9){
            addToArray();
            i++;
        }
        else{
            tmpArray["elem"+i] = "i";
            console.log(tmpArray["elem"+i]); // It prints out!!!
            i++;
        }
    }
    console.debug(tmpArray);

    return tmpArray;
} 
```

​ 当我打印出 tmpArray 时，它是空的。大小也是0。当我从数组的索引中删除“elem”时，它可以正常工作。我该怎么办？

这是一个真实的例子：http: [//jsfiddle.net/dfg3x/](http://jsfiddle.net/dfg3x/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T03:02:05.460

JavaScript 没有像 PHP 和其他一些语言那样的字符串数组键。您所做的是为对象添加一个名为`elem + i`的`tmpArray`属性。它不会影响数组的`.length`属性，即使该属性在那里并且可以访问，并且*不能通过*数组方法访问，例如`.pop(), .shift()`

也许您应该将其声明`tmpArray`为对象文字，因为您似乎没有将它与任何数字键一起使用。

```
function addToArray() {
    var i = 0;
    // Make an object literal
    var tmpObj = {};
    while(i<10) {
       if(i>9) {
          addToArray();
          i++;
       }
       else {
          tmpObj["elem"+i] = "i";
          console.log(tmpObj["elem"+i]); //it prints out !!!
          i++;
       }
    }
    console.debug(tmpObj );

    return tmpObj ;
} 
```

# spring-roo - Spring Roo 中的归档版本是什么意思？

> ID：10326649
> 
> 赞同：0
> 
> 时间：2012-04-26T03:02:50.843
> 
> 标签：spring-roo

我不知道为什么我用 roo 命令创建新实体，它总是有一个文件名版本。

版本字段有什么好处？

如果我不想要它，如何编写不会在实体中生成版本文件的 roo 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:21:08.333

该字段使用@javax.persistence.Version 进行注释，实体管理器使用它来创建乐观锁定。

让我们来看看这个场景：有一个 CD 列表应用程序。

用户可以打开带有 CD 数据的表格并可以对其进行修改。您不能锁定数据库中的记录并等待用户是否要修改记录（例如，使用 SELECT ... FOR UPDATE），因为它花费的时间太长（从数据库的角度来看）。很可能连接在读取数据并返回池后关闭。

相反，当您保存记录时，实体管理器会检查数据库中的版本字段是否与您发送的相同。如果是，那么您可以安全地保存更改并将版本增加 1。如果有人在您在屏幕上编辑记录时修改了记录，那么数据库中的版本高于您的，您无法保存数据，因为对方已经这样做了。这实际上是锁定（如果其他人这样做，您将无法保存）并且是乐观的，因为它仅在有修改时“锁定”，而在大多数情况下并非如此，并且当它不使用数据库时它不使用数据库不得不。

# jquery - .click() 无法使用 jQuery 更改背景图像

> ID：10326650
> 
> 赞同：2
> 
> 时间：2012-04-26T03:02:59.937
> 
> 标签：jquery, events, onclick, click

```
$(function(){
$('.change-bg').hover(function(){
    $('header').css({ 'background-image' : 'url("img/map.jpg")' });
}, function(){
    $(this).fadeTo('slow', 1);
});
}); 
```

这是我正在使用的基本 jQuery 脚本。上面的版本有效，但是，当我更改`.hover()`为`.click()`（第 2 行）时，脚本不再有效。

我想要的是背景图片改变onClick。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:07:50.293

检查这一行

```
 $('header').css({ 'background-image' : 'url("img/map.jpg")' }); 
```

我猜您缺少 # 或 . 在选择器中

应该是这样的'

```
$('#header').css({ 'background-image' : 'url("img/map.jpg")' }); 
```

或者

```
$('.header').css({ 'background-image' : 'url("img/map.jpg")' }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T03:14:04.237

您可能希望以这种方式绑定点击事件：

```
$(function(){
$('.change-bg').bind('click', function(){
    $('header').css({ 'background-image' : 'url("img/map.jpg")' });
}, function(){
    $(this).fadeTo('slow', 1);
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T03:31:43.060

尝试更改以下行：

```
$('.change-bg').hover(function(){ 
```

到

```
$(document).delegate('.change-bg', 'click', function(){ 
```

或者

```
$(document).on('click', '.change-bg', function(){ 
```

# java - JVM 任意精度库

> ID：10326656
> 
> 赞同：9
> 
> 时间：2012-04-26T03:03:56.417
> 
> 标签：java, scala, biginteger, numeric, arbitrary-precision

我正在做一个项目（在 Scala 中），我需要处理一些非常大的数字；太大而无法用整数类型表示。Java 提供了 BigInteger 和 BigDecimal 类（scala 提供了一个很好的瘦包装器）。但是，我注意到这些库比我过去使用过的其他任意精度库（即[http://www.ginac.de/CLN/](http://www.ginac.de/CLN/)）要慢得多，而且速度差异似乎比可以归因的更大单独的语言。

我对我的程序进行了一些分析，44% 的执行时间花费在 BigInteger 乘法方法上。我想加快我的程序速度，所以我正在寻找比 BigInteger 类（及其 Scala 包装器）更快、更高效的选项。我看过 LargeInteger（来自 JScience）和 Aint（来自 Afloat）。但是，两者的执行似乎都比标准 BigInteger 类慢。

有谁知道专注于高性能整数乘法和加法的 Java（或在 JVM 上可用）任意精度数学库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:31:29.603

我有点晚了......好吧，我只知道 apfloat 库，在 C++ 和 Java 中都可用。 [Apfloat库：](http://apfloat.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:10:19.173

不幸的是，我认为您对 Java 本地库不走运。我还没有找到一个。我推荐使用 JNI 封装具有出色任意精度性能的 GMP。有 JNI 开销，但如果你在 1500 位范围内，与算法复杂度的差异相比，这应该很小。您可以找到 Java GMP 的各种包装（我相信最流行的包装在[这里](https://bitbucket.org/dfdeshom/gmp-java/overview)）。

# postgresql - 更改 pg_config

> ID：10326659
> 
> 赞同：4
> 
> 时间：2012-04-26T03:04:02.097
> 
> 标签：postgresql

[当我尝试将 psycopg2 安装到 Mac OS 10.6.3 上时](https://stackoverflow.com/questions/3044801/im-trying-to-install-psycopg2-onto-mac-os-10-6-3-it-claims-it-cant-find-stda)，我遇到了一个非常相似的问题；[它声称它找不到“stdarg.h”，但我可以看到它在那里；](https://stackoverflow.com/questions/3044801/im-trying-to-install-psycopg2-onto-mac-os-10-6-3-it-claims-it-cant-find-stda)[我该怎么办？](https://stackoverflow.com/questions/3044801/im-trying-to-install-psycopg2-onto-mac-os-10-6-3-it-claims-it-cant-find-stda)（除了我在 OS X 10.7 和 PostgreSQL v 9.0.5 上），我正在考虑更改我的 psql config c-compiler。

当我在终端中键入 pg_config 时，我得到：

```
BINDIR = /usr/bin
DOCDIR = /usr/share/doc/postgresql
HTMLDIR = /Library/WebServer/Documents/postgresql
INCLUDEDIR = /usr/include
PKGINCLUDEDIR = /usr/include/postgresql
INCLUDEDIR-SERVER = /usr/include/postgresql/server
LIBDIR = /usr/lib
PKGLIBDIR = /usr/lib/postgresql
LOCALEDIR = /usr/share/locale
MANDIR = /usr/share/man
SHAREDIR = /usr/share/postgresql
SYSCONFDIR = /private/etc/postgresql
PGXS = /usr/lib/postgresql/pgxs/src/makefiles/pgxs.mk
CONFIGURE = '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--disable-dependency-tracking' '--prefix=/usr' '--sbindir=/usr/libexec' '--sysconfdir=/private/etc' '--localstatedir=/var/pgsql' '--htmldir=/Library/WebServer/Documents/postgresql' '--enable-thread-safety' '--enable-dtrace' '--with-tcl' '--with-perl' '--with-python' '--with-gssapi' '--with-krb5' '--with-pam' '--with-ldap' '--with-bonjour' '--with-openssl' '--with-libxml' '--with-libxslt' '--with-system-tzdata=/usr/share/zoneinfo' 'CFLAGS=-arch x86_64 -arch i386 -pipe -Os -g -Wall -Wno-deprecated-declarations' 'LDFLAGS=-arch x86_64 -arch i386 -pipe -Os -g -Wall -Wno-deprecated-declarations' 'LDFLAGS_EX=-mdynamic-no-pic'
CC = gcc
CPPFLAGS = -I/usr/include/libxml2
CFLAGS = -arch x86_64 -arch i386 -pipe -Os -g -Wall -Wno-deprecated-declarations -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv
CFLAGS_SL = 
LDFLAGS = -arch x86_64 -arch i386 -pipe -Os -g -Wall -Wno-deprecated-declarations -Wl,-dead_strip_dylibs
LDFLAGS_EX = -mdynamic-no-pic
LDFLAGS_SL = 
LIBS = -lpgport -lxslt -lxml2 -lpam -lssl -lcrypto -lgssapi_krb5 -lz -lreadline -lm 
VERSION = PostgreSQL 9.0.5 
```

我想知道如何更改 pg_config（所以我可以设置 CC = gcc-4.2）或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:48:28.363

[pg_config](http://www.postgresql.org/docs/8.1/static/app-pgconfig.html)只是一个提供信息的实用程序，它不是您可以编辑属性的典型意义上的“配置”。如果要更改`pg_config`提供的值，则需要在 util 之外手动执行此操作（在您的情况下，您需要安装新的 C 编译器）。

# ruby-on-rails - 搜索句子

> ID：10326662
> 
> 赞同：2
> 
> 时间：2012-04-26T03:04:20.537
> 
> 标签：ruby-on-rails, ruby, string, search

我有一个 Rails 应用程序，并决定进行搜索。我有一个搜索文本字段，控制器会处理所有事情。在我的搜索方法中

```
def self.search(search)
    if search
      str = []
      search.split.each do |s|
        a = find(:all, :conditions => ['title or content LIKE ?', "%#{s}%" ])
        str = (str + a).uniq
      end

    else
      find(:all)
    end
  end 
```

我希望能够处理多个单词搜索。如果您删除 each...loop，它适用于 1 个单词搜索。无论如何，我想为每个搜索的单词找到相关的帖子并返回它们的组合。

前任。如果有人搜索“Greatest Player”，它将返回标题或内容为“Greatest”的所有帖子实例以及任何标题或内容为“Player”的帖子实例

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T04:19:21.843

您很可能应该查看全文搜索：

*   [使用 Rails 进行全文搜索](https://stackoverflow.com/questions/1132284/full-text-searching-with-rails)
*   [http://en.wikipedia.org/wiki/Full_text_search](http://en.wikipedia.org/wiki/Full_text_search)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T04:18:36.760

难道不应该

```
a = find(:all, :conditions => ['title or content LIKE ?', "%#{s}%" ]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-05T19:23:26.153

您只需将 find 语句更改为 Mischa 的代码并添加 return 语句

工作代码：

```
def self.search(search)
    if search
      str = []
      search.split.each do |s|
        a = where(title LIKE ? or content LIKE ?', "%#{s}%", "%#{s}%")
        str = (str + a).uniq
      end
    return str

    else
      find(:all)
    end
  end 
```

# java - java字符串与mysql字符串

> ID：10326663
> 
> 赞同：0
> 
> 时间：2012-04-26T03:04:20.880
> 
> 标签：java, mysql, string, character-encoding

```
mysql> CREATE database testing CHARACTER SET utf16;
Query OK, 1 row affected (0.00 sec)

mysql> USE testing;
Database changed

mysql> CREATE TABLE t (str varchar(64));
Query OK, 0 rows affected (0.43 sec)

mysql> INSET INTO t values ("1234567891234567");
Query OK, 1 row affected (0.00 sec) 
```

==============================

然后我有一段java代码

```
Connection connection = DriverManager.getConnection(url, usr, pass);
Statement statement = connection.createStatement();

statement.execute("USE  testing");

ResultSet rst = statement.executeQuery("SELECT str, LENGTH(str) FROM t;");
while (rst.next())
             System.out.print("java length: " + rst.getString(1).length() 
                     + "\nmysql length: " + rst.getInt(2)); 
```

这会给

```
java length: 16
mysql length: 32 
```

我不明白为什么长度不同。我明确地将数据库的字符集设置为 UTF16（这是 Java 的默认字符集，对吗？）为什么我仍然会得到不一致的长度值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T03:11:42.920

mySql 函数“CHAR_LENGTH()”返回 #/Unicode 字符（如 Java 的“.length”）。

MySQL 函数“LENGTH()”返回 #/bytes。

这是 MySQL 参考：

*   [http://dev.mysql.com/doc/refman/5.5/en/string-functions.html](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T03:12:52.927

Mysql[长度（字符串）](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_length)

> 返回字符串的长度`str`，以字节为单位。多字节字符计为多个字节。这意味着对于包含五个两字节字符的字符串，LENGTH() 返回 10，而 CHAR_LENGTH() 返回 5。

也许你需要的是[CHAR_LENGTH(str)](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_char-length)

> 返回字符串的长度`str`，以字符为单位。多字节字符计为单个字符。这意味着对于包含五个两字节字符的字符串，LENGTH() 返回 10，而 CHAR_LENGTH() 返回 5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T03:09:59.973

Java 的默认字符集不是 UTF-16，它[依赖于](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/charset/Charset.html#defaultCharset%28%29)语言环境。

如果要更改 Java 中的 Charset，则必须在 JVM 启动之前进行，否则将使用依赖于语言环境的 defaultCharset 值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T03:10:00.150

尝试以 UTF-16 编码连接：

```
Connection connection = DriverManager.getConnection(url+"?characterEncoding=UTF-16", usr, pass); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T03:10:28.177

我的猜测是 Java ios 报告字符数，而 MySQL 报告用于存储字符的字节数。

# gnuplot - 如何在gnuplot中的函数上绘制一个点

> ID：10326672
> 
> 赞同：2
> 
> 时间：2012-04-26T03:05:25.700
> 
> 标签：gnuplot

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T18:13:37.750

another option is to use 'inline data'

```
plot sin(x) w lines, '-' w p pt 7 ps 5
   3.14 0
e 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:15:29.243

尝试类似：

```
set terminal postscript enhanced color
set output 'plot.eps'

set xr[-10:10]
set yr[-2:2]
plot sin(x), \
 "<echo '3.141592 0'" pt 7 ps 2 notitle 
```

逗号允许您在同一个图中绘制多个事物。这样你必须手动指定范围和点位置，但它在 gnuplot 4.6 的绘图脚本中对我有用。

# python - Provide callback function to OAuth when using python-oauth2

> ID：10326674
> 
> 赞同：1
> 
> 时间：2012-04-26T03:05:45.620
> 
> 标签：python, callback, oauth-2.0

I'm using [python-oauth2](https://github.com/simplegeo/python-oauth2) to authenticate API calls to Dropbox's API.

There are two problems I'm having:

1.  I don't know how to provide a callback function to OAuth. I tried making the request as follows:

    ```
    resp, content = client.request(request_token_url,\
    "POST",body=urllib.urlencode({'oauth_callback':callbackURL})) 
    ```

    However, the function at `callbackURL` is not called.

2.  At the moment, I've just modified the example code given in the [README](https://github.com/simplegeo/python-oauth2/blob/master/README.md) for `python-oauth2`, and I've managed to redirect the user to the Dropbox authentication page. However, I've written no code to explicitly sign my requests. Is that being done by the module, or are the requests I am making just unsigned? If its the latter, I'm really confused as to how things are working.

Help much appreciated. Thanks!

--Edit--

So I was reading the API docs, and the authorization URL takes two parameters - one is the `access_token` and the second is `oauth_callback`. I managed to created a URL that had these two parameters, and now, once the user authenticates my app, they are successfully redirected to my website. However, this seems like a very crude hack, and I'd love to learn to do this in a better way.

# opengl - Is there a TweenMax equivalent based on opengl/opencv

> ID：10326675
> 
> 赞同：-2
> 
> 时间：2012-04-26T03:06:11.480
> 
> 标签：opengl, animation, gsap

I'm still relatively new to OpenGL/OpenCV, so I'm still unfamiliar with the multitudes of libraries available for use, particularly for animation. Where I'm from (the Flash world), we have access to several 3rd-party tweening engines that make life very easy for us when we want to programmatically move things around the stage without relying on the (vastly inferior) built-in Adobe tween APIs. One of the most popular is Greensock's TweenMax.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:30:37.880

“在舞台上移动”的概念比 OpenGL 更高层次。其实*物*的概念比OpenGL还要高。所有 OpenGL 渲染都是三角形（以及线和点）。它转换顶点并将它们渲染为三角形，并具有一些用于填充中间部分的机制（如映射纹理）。OpenGL 不知道任何东西的持久性。它不知道对象。它所做的只是在你告诉它的地方画一些东西。

因此，如果您想要移动某些东西，则必须在下一帧将其绘制在不同的位置。如果你想“补间”一些东西，补间和你正在补间的东西都必须由你来实现。

# php - 具有 nl2br 功能的自动编号

> ID：10326679
> 
> 赞同：1
> 
> 时间：2012-04-26T03:06:45.223
> 
> 标签：php, mysql, html

我有一个来自数据库的数据，用于存储来自 Textarea 框的用户输入。

这是用户在 Textarea 框中输入的示例；

```
iPhone
Samsung
Nokia 
```

当我将它保存到数据库中时，我想在表格中显示该数据，使其变得像这样；

```
1\. iPhone
2\. Samsung
3\. Nokia 
```

那么我将如何显示带有编号的数据呢？

到目前为止，这是我的代码；

```
<table>

     <td align="left"><?php echo nl2br($sis_sistem) ?></td>

</table> 
```

注意：$sis_sistem 是存储数据库数据的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T03:09:00.277

`explode()`在换行符上放入一个数组，然后对其进行迭代。与其用纯文本对它们进行编号，不如使它们成为适当的 HTML 有序列表`<ol>`

```
// Get an array of items from lines
$list = explode("\n", $sis_sistem);

// Open an ordered list
echo "<ol>";
// Output the items as list elements
foreach ($list as $num => $item) {
  echo "<li>" . htmlspecialchars($item) . "</li>";
}
echo "</ol>"; 
```

# wildcard - ln with dotfiles?

> ID：10326680
> 
> 赞同：0
> 
> 时间：2012-04-26T03:07:07.767
> 
> 标签：wildcard, symlink, glob, ln, dotfiles

I have a directory with several "dot files". I would like to symlink all these files.

I tried

```
$ ln -s /usr/dotfiles/* /usr/test
ln: creating symbolic link `/usr/test/*' to `/usr/dotfiles/*': No such file or directory 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:09:20.493

```
ln -s /usr/dotfiles/.[!.]* /usr/test 
```

灵感来自

[`pavium’s answer`](https://stackoverflow.com/a/1586499)

# silverlight-4.0 - Are there any good examples of Exception Handling Block of Enterprise Library 5.0

> ID：10326681
> 
> 赞同：1
> 
> 时间：2012-04-26T03:07:10.153
> 
> 标签：silverlight-4.0, exception-handling, mvvm-light, enterprise-library-5

I'm using Enterprise Libray 5.0 version. I'm working on its Exception Handling Block. For this to understand Exception Handling Block I downloaded StockTraderRI Application - (Example Application of Exception Handling). But it uses PRISM Framework.

Is there any example which shows simple silverlight Application using MVVM-Light.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:45:43.867

你看过[MSDN 页面](http://msdn.microsoft.com/en-us/library/ff632023.aspx)吗？那里应该有很多信息可以帮助您入门。特别是查看动手实验室和开发人员指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:31:28.707

Pluralsight has a good video on how to use it. You may be able to watch it with a trial of the site: [Enterprise Library Exception Handling Application Block](http://www.pluralsight-training.net/microsoft/Courses/TableOfContents?courseName=exception-handling)

# html - Tumblr Themes : ul, il spacing issues?

> ID：10326682
> 
> 赞同：0
> 
> 时间：2012-04-26T03:07:16.003
> 
> 标签：html, css, tumblr

I am in the process of creating a Tumblr theme to work on my CSS and HTML abilities and I have run into a problem.

[http://cl.ly/3c0q3X3a0A193z1u2u2V](http://cl.ly/3c0q3X3a0A193z1u2u2V) - photo post

[http://cl.ly/3V3R1W2h17100g371W2y](http://cl.ly/3V3R1W2h17100g371W2y) - text post

As you can see from the picture above, the text seems to scoot itself down without any other code versus the photo which is always in the correct location.

I am still in my infancy whenever it comes to this kind of thing so I'm not really sure what to do.

Here's my CSS and HTML:

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<ul class="header">
    <li><a href="/"><h1>{Title}</h1></a>
    <li><a href="/about">About</a>
    <li><a href="/message">Message</a>
    <li><a href="/archive">Archive</a>
</ul>

<ul class="content">
    {block:Posts}
    {block:Text}
        <li class="text_post">
            {block:Title}
                    <h3><a href="{Permalink}">{Title}</a></h3>
                {/block:Title}
            {Body}
        </li>
    {/block:Text}
    {block:Photo}
        <li class="photo_post">
            <img src="{PhotoURL-500}">
        </li>
    {/block:Photo}
{/block:Posts}
</ul>

<style type="text/css">
body {
    font-family:Georgia, times, serif; 
    font-size:0.7em;}
h1 {
    display:inline;
    font-family:'Lucida Grande', Arial, sans-serif;
    font-size:100%;
    color:#00C462; }
ul, ol {
    list-style-type:none;
    margin:0;
    padding:0;}
.header {
    position:fixed;
    margin-top:1em;}
.header li {
    float:left;
    padding-left:1em;}
.header li a, a:visited {
    color:#000000;
    font-family:'Lucida Grande', Arial, sans-serif;
    text-decoration:none;}
.header li a:hover {
    color:#CCCCCC;}
.content {
    float:left;
    overflow:auto;
    margin-top:1.3em;
    width:500px;
    margin-left:23em;}
</style> 
```

Also, if you have any suggestions on how I can improve my code, please share.

Thank you for your help,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:19:53.363

首先，明确地将**h3**的**边距**和**填充**设置为 0。然后编写适当的规则以将边距/填充添加到 h3 的底部。

其次，你为什么不分别向左和向右浮动标题和内容类？这是我正在研究的主题的链接 - [El Aleph](http://tinkererof.tumblr.com/)。我正在对我的博客标题和内容做类似的事情。我刚刚将我的标题向左浮动，我的内容向右浮动。随意看看我的主题的 CSS。

另外，您为什么将 UL 用于块级内容？最好的方法是使用 DIV 来划分内容块或使用 HTML5 元素，例如标题、文章等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T03:51:00.910

It looks to me like you are just missing a width on .header...

The .content ul should then float up nicely next to it.

You just have to calculate the contents of your container. eg...

```
#container {
    width:800px; for example
    }
.header {
    width:300px;
    float:left;
    }
.content {
    width:500px;
    float:left;
    } 
```

Hope this helps...

# ruby-on-rails - 如何使用 Content-Type 组合或加入文件：application/octet-stream

> ID：10326687
> 
> 赞同：0
> 
> 时间：2012-04-26T03:08:14.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-plugins, ruby-on-rails-3.1, plupload

我使用[jquery 文件上传](https://github.com/blueimp/jQuery-File-Upload/)。在文件被分块（或切割）到更小的文件时，在路径分块[文件上载。](https://github.com/blueimp/jQuery-File-Upload/wiki/Chunked-file-uploads)它在客户端中结合，或者我必须在我的控制器中结合它。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:58:13.293

它总是有助于建立你的谷歌技能：

[rails 分块文件上传](https://github.com/blueimp/jQuery-File-Upload/wiki)

# backbone.js - Backbone.js：将简单模型持久保存到 localStorage 时遇到问题

> ID：10326690
> 
> 赞同：0
> 
> 时间：2012-04-26T03:09:11.727
> 
> 标签：backbone.js

我开始使用骨干网，我使用[了这个 localStorage 适配器](https://github.com/jeromegn/Backbone.localStorage/blob/master/backbone.localStorage.js)。这是我的测试代码：

```
cartStatus = Backbone.Model.extend({
    localStorage: new Store("cartStatus"),
    currentClientId: ""
});

var myStatus = new cartStatus;

$(function () {
    myStatus.fetch();
    alert("loaded" + myStatus.get("currentClientId"));
    myStatus.set({ "currentClientId": "abc" });
    myStatus.save();
}); 
```

如果我多次加载页面，它`loaded: undefined`每次都会说。`loaded: abc`但是，在我第二次加载之后，我每次都期望。当我在 2 次加载后检查我的本地存储时，我看到了这个：

```
cartStatus-d2a7b64d-2f15-a741-9a8c-e254b4a13682 {"0":{"currentClientId":"abc","id":"dd5e0e47-9356-ea30-2de3-75a041848b88"},"currentClientId":"abc","id":"d2a7b64d-2f15-a741-9a8c-e254b4a13682"}
cartStatus dd5e0e47-9356-ea30-2de3-75a041848b88,d2a7b64d-2f15-a741-9a8c-e254b4a13682
cartStatus-dd5e0e47-9356-ea30-2de3-75a041848b88 {"currentClientId":"abc","id":"dd5e0e47-9356-ea30-2de3-75a041848b88"} 
```

有谁知道出了什么问题？

**编辑**
我创建了一个 jsfiddle 来演示这个（运行两次）[http://jsfiddle.net/Myster/fE9eQ/3/](http://jsfiddle.net/Myster/fE9eQ/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:12:47.247

@tkone，您提出了我认为的正确答案。获取是异步的，因此除非您使用 jquery deferreds 或在成功回调中设置/保存模型，否则这将是行为。

```
cartStatus = Backbone.Model.extend({
    localStorage: new Store("cartStatus"),
    currentClientId: ""
});

var myStatus = new cartStatus();

$(function () {
    debugger;
    myStatus.fetch({
        success: function(x) {
            document.write('myStatus.fetch - success !<br />');
            myStatus.set("currentClientId", "abc" );
            myStatus.save();
        }
    });
}); 
```

# actionscript-3 - 在 AS3 中，如何将连续 SWF 动画无缝动态加载和卸载到舞台？

> ID：10326693
> 
> 赞同：0
> 
> 时间：2012-04-26T03:09:30.810
> 
> 标签：actionscript-3, animation, dynamic, flash

我正在开发一个项目，该项目将使用户根据选择在建筑模型中从一个点到另一个点进行 3D 飞行。它是一个树流，一切都从一个点开始，然后从那里分支出来，它只需要在一个方向上制作动画，这让事情变得更容易。

问题是从一个地方到另一个地方的动画是渲染为 PNG 序列的 C4D 动画，总的来说它们会非常大，所以我想将每个片段打包为一个单独的 SWF，并根据需要动态加载和卸载它们。

我希望要做的第一件事是看看我是否可以让我的上游人员将它们渲染为 JPG 序列......这是一个好主意吗？我想这将是在带宽方面。

然而，主要问题是我如何动态加载这些序列之一，让它在最后一帧播放和停止（将显示哪些数据和选择），然后 - 基于用户的选择 - 加载并播放下一个从一开始就无缝地制作动画，无需无休止地堆叠加载的剪辑。当用户返回一个关卡时，我只需要跳转到动画的第一帧，但向前总是涉及到平稳的飞行。

我怀疑解决方案可能与通过特定名称添加到加载器有关，然后当我们过渡时，加载具有特定名称的下一个，然后 unloadChild() 并执行我需要的任何其他类型的垃圾收集完全从记忆中清除。我想尽可能地了解内存使用和性能，因为在某些地方会在飞行动画之上加载其他图像和视频。

有人对此有任何想法吗？我确信这是一个常见的需求，我以前从未这样做过，而且我希望尽可能不受时间限制地做到这一点。

提前感谢您的任何建议！

马蒂纳比

# search - 如何通过在 Vim 中搜索所有缓冲区的内容直接转到任何缓冲区，例如在 Sublime Text 中按 Ctrl+P？

> ID：10326695
> 
> 赞同：2
> 
> 时间：2012-04-26T03:09:48.473
> 
> 标签：search, vim, hotkeys, sublimetext2

在 Sublime Text 2 中，当我打开一堆文件时，我可以通过以下 3 个步骤转到任何打开的文件：

1.  打`<Ctrl>+P`。
2.  输入要搜索的模式。编辑器会在我输入时立即显示与模式匹配的文件（不点击`<Enter>`）。
3.  显示正确的文件后，我点击`<Enter>`选择文件。

如何在 Vim 中使用类似的功能来搜索所有缓冲区/选项卡？我知道有很多插件可以让我搜索所有缓冲区，但它们并不像上述 3 个步骤那么简单。我认为这个功能在导航中特别有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:16:32.940

您可以使用 vim [CtrlP 插件](http://www.vim.org/scripts/script.php?script_id=3736)搜索当前工作目录中的所有文件（`:pwd`更改为`:cd dir`），也可以使用[Lusty Explorer](http://www.vim.org/scripts/script.php?script_id=1890)插件搜索 vim 中所有打开的缓冲区

使用 CtrlP，您可以输入 ctrl+p，然后输入文件模式，然后输入（或 ctrl-t 在新选项卡中打开）

使用 Lusty，您可以输入 Leader lb（默认情况下，leader 是 \），输入您打开的缓冲区的名称，然后按 enter 或 ctrl-t

# c++ - 隐藏密码以防止从 .o 文件或 .hex 文件中读取

> ID：10326698
> 
> 赞同：2
> 
> 时间：2012-04-26T03:09:50.283
> 
> 标签：c++, c, arrays, arduino, password-protection

我正在 arduino 上编写一个项目，并将密码存储在 const char 数组中。这个密码是写在代码中的，我想对有权访问 .o 文件和 .hex 文件的恶意读者隐藏密码。

有谁碰巧知道如何隐藏它？

我已经尝试将其存储在 const 字节数组而不是 const char 数组中，但这似乎并不能解决我的问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:12:00.893

棘手的部分是，无论如何，由于您需要使用密码，（我假设您每次启动时都不能输入密钥）您的代码将同时包含锁和打开的钥匙它。真正的问题是这必须有多好？

如果它不必真的很好，您可以将密码异或某个值，并将其用作源中的密码。然后，当您需要使用它时，您可以通过相同的值对它进行异或运算，然后 ta-da...

如果您想要一些不那么琐碎的东西（并且 arduino 适合它），您可以使用您的私钥签署密码，并将您的公钥存储在源中。取消签名密码的算法比简单的异或复杂得多（因此更难发现。）

*无论如何，任何需要使用明文密码的独立系统都是有缺陷的。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:38:43.760

您可以将密码存储在[EEPROM](http://arduino.cc/it/Reference/EEPROM)中，您可以使用 avrdude 或在您的代码中写入该密码。在后一种情况下，您需要在闪烁后的某个时间点向您的设备提供密码。

任何对设备有物理访问权限的人仍然可以访问密码，但不能访问只有文件`.o`和`.hex`文件的人。

我不确定 Arduino 引导加载程序是否允许您通过 avrdude 读取和写入 EEPROM，但如果没有，您可以编写一个初始 Arduino 草图，将密码写入 EEPROM，然后用只读取它的实际草图覆盖它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T16:44:32.287

只需散列密码并存储散列即可。比您散列用户输入密码以尝试匹配它们。

现在，如果您需要将密码存储到另一个服务，并且您不得不在他们的 API 中使用纯密码，那么您几乎没有可能的选择。

# django - Django 管理员显示错误的翻译

> ID：10326699
> 
> 赞同：1
> 
> 时间：2012-04-26T03:09:51.237
> 
> 标签：django, internationalization, nginx, django-admin, fastcgi

问题很奇怪。一半的管理员铭文被翻译成错误的语言。我在我的项目中使用**ru**和**en**语言。网站以正确的语言呈现，但在同一个浏览器中，管理员会出现，如图所示：

![在此处输入图像描述](../Images/d66223e852c15bf1f4b4c84a58713ad0.png)

我有**语言环境**文件夹，其中包含**en**和**ru**语言环境，**.po**和**.mo**文件在那里......

设置.py：

```
LANGUAGES = (
    ('ru', gettext(u'Русский')),
    ('en', gettext(u'English')),
) 
```

尝试不同的网络浏览器...浏览器在标题中发送以下字符串：

```
Accept-Language: ru-ru,ru;q=0.8,en-us;q=0.5,en;q=0.3 
```

问题仅在管理页面中...

**更新 1：**

在 Diego 的帮助下，问题已本地化，但并未解决。使用**runserver**一切看起来都很好。但是在**fastcgi+nginx**下就不行了……

![在此处输入图像描述](../Images/0c4b4d7c632fdbb14b336b8dca1a504a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:35:55.310

确保你有

`fastcgi_pass_header "Accept-Language";`

在你的 nginx 配置文件中。

# css - Sass 颜色函数列表渐变

> ID：10326702
> 
> 赞同：0
> 
> 时间：2012-04-26T03:10:07.063
> 
> 标签：css, colors, haml, sass

我正在尝试为列表`background-color`中的每个`%li`标签分配一个不同的标签。我希望这些颜色要么使用颜色的阴影，要么使用两种指定颜色之间的渐变。很像非常受欢迎的[Clear](http://itunes.apple.com/us/app/clear/id493136154?mt=8)。我熟悉使用 sass 使颜色变亮和变暗的能力......

```
$this_color: darken($that_color, 10%) 
```

但除此之外，我不知道如何创造我正在寻找的影响。视觉上这是我想要做的：

```
%ul
    %li full color
    %li darken 5%
    %li darken 10%
    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:56:32.560

这是一种在循环中一一更改颜色的方法
[http://jsfiddle.net/STuD5/1/](http://jsfiddle.net/STuD5/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T05:00:04.937

```
// set your color
$backgroundColor: red

// set the scale/increment for the function
$backgroundColorScale: 8

// number of items in your list
$numberOfItemsInList: 10

// here's a custom function to change the color
// but you could make this fairly advanced
// and shift color, saturate, etc.
@function -modify-bg($bgcolor, $counter, $depth: $backgroundColorScale)
  @return lighten($backgroundColor, ($i * $backgroundColorScale))

// here's the loop that steps through LIs and assigns each a new bg
$i: 0
@while $i < $numberOfItemsInList
  li:nth-child(#{$i})
    background-color: -modify-bg($backgroundColor, $i)
  $i: $i + 1 
```

# sql - oracle sql - 加入与和分组？

> ID：10326706
> 
> 赞同：0
> 
> 时间：2012-04-26T03:11:14.310
> 
> 标签：sql, oracle

如果我必须找到多次观看同一视频的所有用户，那么我将使用以下查询。

```
SELECT userid AS users,video_id 
FROM watching_list GROUP BY userid , video_id HAVING COUNT(*) > 1; 
```

^^它确实给了你，对吧？如果 watch_list 包含用户观看的 userid 和 videoid 以及日期时间戳。

我想做的是将它加入到用户表中，基于用户ID，来查找用户名等，而不仅仅是用户ID。

我试着做简单的加入，当然它打破了我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T03:38:56.293

```
SELECT Users.Name, Users.userid AS users,video_id 
FROM watching_list 
    JOIN Users
        ON Users.UserID = watching_list.UserID
GROUP BY Users.userid , video_id, Users.Name
HAVING COUNT(*) > 1; 
```

为什么会这样断？它应该是同一用户，因此将同一个人的其他信息添加到`group by`不应导致更改

[这是一个粗略的、快速的 SQLFiddle 来证明这一点](http://sqlfiddle.com/#!4/0beea/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T03:36:35.030

一个有点不优雅的方法是这样的：

```
Select USERS.LAST_NAME,
       USERS.FIRST_NAME,
       double_watchers.VIDEO_ID
  FROM USERS,
      (SELECT userid AS users,
              video_id 
         FROM watching_list
        GROUP BY userid , video_id
       HAVING COUNT(*) > 1) double_watchers
Where double_watchers.userid = users.id; 
```

我正在使用您的原始查询创建一个内联表（不确定术语），然后将其加入到 USERS 表中。可能有一种更有效的方法可以做到这一点，但是我现在没有测试实例可以进行试验。

# sql - sql/coldfusion 显示重复行

> ID：10326708
> 
> 赞同：0
> 
> 时间：2012-04-26T03:11:40.790
> 
> 标签：sql, coldfusion

鉴于下表，我想在我的查询中实现这个逻辑：如果 2 个 UPC 相同，则显示具有最高 PRODUCTID 值的行。所以在我的表中它将是第 2 行。

```
产品 UPC
100 01434
101 01434
102 05877

```

这是我需要帮助的代码

```
<cfquery name="GetData" datasource="#Application.ds#" dbtype="ODBC" username="#Application.UserName#" password="#Application.Password#">
Select PRODUCTID, UPC 
FROM Products
Where ...
</cfquery> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T03:18:34.167

```
SELECT MAX(PRODUCTID) AS PRODUCTID, UPC
FROM Products
GROUP BY UPC
HAVING COUNT(UPC) > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T03:17:05.100

尝试类似这样的查询...

```
SELECT MAX(ProductId) as Id, Upc 
FROM Products
GROUP BY Upc
HAVING COUNT(*) > 1 
```

[http://archive.msdn.microsoft.com/SQLExamples/Wiki/View.aspx?title=DuplicateRows](http://archive.msdn.microsoft.com/SQLExamples/Wiki/View.aspx?title=DuplicateRows)

# css - CSS 网格项根据容器宽度调整大小

> ID：10326711
> 
> 赞同：0
> 
> 时间：2012-04-26T03:12:13.487
> 
> 标签：css, responsive-design

我有一个像这样的网格：

```
<div class="container">
    <div class="item">
        Some Content
    </div>
    <div class="item">
        Some Content
    </div>
    <div class="item">
        Some Content
    </div>
    <div class="item">
        Some Content
    </div>
    <div class="item">
        Some Content
    </div>
    <div class="item">
        Some Content
    </div>
</div> 
```

像这样的CSS

```
.container{
width:100%;
}

.item{
width:33%;
float:left;
min-width:150px
} 
```

在这种情况下发生的情况是，如果容器大于 450 像素，您将获得三列和两行。如果容器的宽度减小到 450px 以下，您最终会变成两列和三行，并且项目被强制为 150px 宽度。

问题是第二项右侧有难看的空白。

我想让它总是填满容器的宽度。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T03:36:10.347

你试过 jQuery Masonry 吗？我认为这是解决您问题的最佳方法：[jquery masonry](http://masonry.desandro.com/)

# c# - SkyDrive 作为修补程序存储服务器

> ID：10326714
> 
> 赞同：0
> 
> 时间：2012-04-26T03:12:53.970
> 
> 标签：c#, .net, networking, patch, onedrive

最近，我们开始了一个相当大的项目（C# XNA 游戏）。
将所有文件存储在远程服务器中，使用数据库存储文件“版本”并让修补程序下载较新的版本并删除任何过时的文件，这似乎是一个非常明显的解决方案。
现在理论上这一切都很好，我们甚至找到了一个有空间的服务（SkyDrive 提供 25GB 的报价）。当涉及到文件操作时，问题就出现了。

我们正在寻找：

*   可以以编程方式将文件下载/上传（用于补丁制作者）到 SkyDrive。
*   具有包含 uname/pass 的安全方式。

请允许我解释两者。

问题是，我们必须在我的个人帐户上制作 SkyDrive（因为 25gb 优惠仅适用于老用户）。我对有人获得我的密码不太满意，即使我显然会将其更改为完全过时的东西，但他们仍然可以访问我的大多数其他 hotmail/msn 相关内容。（我想这是重新制作这一切的理由吗？）。因此，如果可能的话，我会确保程序中的实际 uname/pass 安全。因为它`.NET`是按需编译的，（并且可以很容易地被反编译）我怀疑在这种情况下真正的安全性是不可能的（如果可以确保安全，请告诉我如何）。

最重要的是，没有高效且官方的 SkyDrive API。这意味着存在更大的安全漏洞（参见上一段），并且通信不一定按预期工作）。这也意味着通信可能会很慢 - 如果您有 1000 个用户下载相同的文件，那就不好了。

因此，要制定所有这些：

考虑到它已链接到我的个人帐户，将 SkyDrive 用作修补程序的存储服务器的正确方法*（读取 API）是什么？*

*小旁注，如果必须的话，我可以是邪恶的，让我们的慢艺术家托管服务器*

*编辑 1：*
这个想法是让任何人都能够下载客户端，但启动任何东西都需要我们数据库上的活动帐户。因此，每个人都可以阅读文件本身并没有问题。所以我将添加以下内容：如果文件是公开的，如何以编程方式从 SkyDrive 直接下载？当前链接指向他们的 Web UI。我的意思是以编程方式（可能在上传期间）以避免手动完成所有操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:51:56.230

1.  这是一个坏主意。

给定＃1：

1.  使用公用文件夹来存储您的资产并授予每个人访问它的权限
2.  使用 httpclient 在您的补丁程序客户端中匿名下载公用文件夹中的文件
3.  使用 SkyDrive 桌面客户端从“构建”计算机同步公用文件夹

# c++ - 停止 QPushButton 缩进

> ID：10326718
> 
> 赞同：2
> 
> 时间：2012-04-26T03:13:35.767
> 
> 标签：c++, qt, button

我想阻止 QPushButton 在单击时缩进，而只是更改它的背景颜色。

提前喝彩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:38:24.490

一个易于实施（但可能无法*完全*提供您想要的）的解决方案是使用[Qt Style Sheet](http://qt-project.org/doc/qt-4.8/stylesheet.html)。

[使用样式表，您可以为按钮的按下状态](http://qt-project.org/doc/qt-4.8/stylesheet-examples.html)指定背景颜色。这样做会抑制缩进。例如 ：

```
pMyPushButton->setStyleSheet("QPushButton:pressed { background-color : red; }"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T03:19:38.283

至于停止缩进，我认为您可以按照此处记录的方式执行 setFlat：http: [//doc.qt.io/archives/qt-4.7/qpushbutton.html#flat-prop](http://doc.qt.io/archives/qt-4.7/qpushbutton.html#flat-prop)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T03:42:21.090

一种选择是继承 QPushButton 并使用您自己的实现覆盖其 paintEvent(QPaintEvent *) 方法，使其具有您想要的外观。

或者，您可以创建 QCommonStyle（或 QWindowsStyle 等）的子类并将其传递给 qApp->setStyle()，并覆盖 drawControl() 方法，以便当使用元素 CE_PushButtonBevel 调用 drawControl 时，它会使用调用超类一个单独的 QStyleOptionButton 参数，不包括 State_Sunken 或 State_On 位集。（可能需要对超类的 drawControl() 方法进行一些检查才能准确确定获得所需效果所需的条件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-19T08:14:37.473

它帮助我`padding:`在样式表中设置属性。

```
QPushButton *cmd = new QPushButton();
cmd->setStyleSheet("padding: 0px;"); 
```

该值在某种程度上不相关。`0px`具有相同的效果`4px`。我不知道为什么。

像这样设置按下的属性：

```
cmd->setStyleSheet("QPushButton {background: blue; padding: 0px;}"
                   "QPushButton:pressed {background: orange;}"); 
```

另外我设置`border: 1px solid black; outline: none;`- 以防万一这相关。

# ruby - 麻烦消除每个子项的单独查询

> ID：10326720
> 
> 赞同：0
> 
> 时间：2012-04-26T03:13:50.320
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我有一个场景，我有一个候选人，一个候选人有很多票。我想按票数从高到低的顺序排列候选人。此查询执行此操作：

```
Candidate.joins(:votes).
  select(['candidates.*', 'SUM(votes.score) as total_score']).group('candidates.id, candidates.candidate_id, candidates.user_id, candidates.status, candidates.card_id, candidates.created_at, candidates.updated_at').
  order('candidates.status desc, total_score desc, candidates.created_at asc').where("candidates.riding_id = ? and candidates.status != ?", 124, CandidateStatus::Eligible ).
  having('SUM(votes.score) >= 0') 
```

我的问题是我用它来渲染它：

```
render :json => @candidates.to_json(:include => [:votes]) 
```

然后，这会导致对每个候选人进行查询以获得他们的选票。我应该能够在一个查询中做到这一点，但无论我如何更改它，它仍然会分别获取每个候选人的选票。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:43:32.877

到`#to_json`调用时间时，必须再次获取选票，因此每次额外查询。但是，使用预先加载，无需额外的查询就可以做到这一点：

```
Candidate.all(:include => :votes).to_json(:include => [:votes]) 
```

因此，可以通过`@candidates`包含急切加载来完成，例如：

```
@candidates = Candidate.all(:include => :votes)

@candidates.to_json(:include => [:votes]) 
```

# android - 怎么给第二张sim卡设置铃声

> ID：10326723
> 
> 赞同：4
> 
> 时间：2012-04-26T03:14:11.683
> 
> 标签：android, ringtone, sim-card

有人知道如何在安卓手机上设置第二张sim卡的铃声吗，比如三星W899设备~

```
RingtoneManager.setActualDefaultRingtoneUri(Media_RingTongActivity.this, RingtoneManager.TYPE_ALARM, pickedUri); 
```

这只是设置了第一张sim卡，第二张怎么办，谢谢~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:17:03.290

您无法使用 Android API 为第二张 SIM 卡设置铃声。

Android 平台不支持多张 SIM 卡。所有支持更多 SIM 卡的设备都运行由制造商定制的 Android 操作系统版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-20T01:10:43.020

我在三星 S20 上测试了两种方法。其中一些可能无法在您的手机上使用：

1.  用另一个替换文件。这是最通用的方法，因为它不仅允许为第二张 SIM 更改声音，还允许为任何应用程序更改声音。您需要做的是首先手动将声音设置为某个特定文件，然后在其上复制另一个文件（例如使用 Tasker）。例如，创建 whatsapp.wav 文件并在其上复制任何 mp3、ogg 或 wav 文件。Macrodroid 似乎无法将单个文件复制到这样的新名称。

2.  在 Macrodroid - 系统设置中更改铃声、ringtone_2、notification_sound 或 notification_sound_2（更改第一个 SIM 铃声、第二个 SIM 铃声、第一个 SIM 短信、第二个 SIM 短信）。例如，您可以将其更改为字符串`file:///sdcard/Notifications/myfile.wav`。

# sql - 使用表变量中的 Update Join 语句时出错

> ID：10326727
> 
> 赞同：-1
> 
> 时间：2012-04-26T03:14:27.757
> 
> 标签：sql, sql-server, sql-server-2005

如果我在这里创建一个表变量：

```
declare @Table Table (ProductID int, Color = varchar(60)) 
```

然后当然填充它，并尝试在下面的`Update`with`Join`语句中使用它，我得到错误。

```
UPDATE [Product]
    SET [Product].[Active] = 1                      
    ,[Product].[Color] = t.[Color]
    INNER JOIN @Table t 
    ON t.[ProductID] = [Product].[ProductID] 
```

错误：

```
 Msg 156, Level 15, State 1, Procedure
 Incorrect syntax near the keyword 'INNER'. 
```

任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T03:18:16.460

您也可以这样做（适用于 SQL Server 和所有符合 ANSI SQL 的数据库）：

```
UPDATE [Product] SET 
    [Product].[Active] = 1                      
    ,[Product].[Color] = t.[Color]
FROM @Table t 
WHERE t.[ProductID] = [Product].[ProductID] 
```

* * *

SQL Server 的专有 UPDATE FROM 有一些需要改进的地方，您可以轻松地更改`UPDATE`语句以使其匹配整个表，无论是否没有匹配的行。

很容易塑造这个*仅匹配行的*更新...... [http://www.sqlfiddle.com/#!3/8b5a3/26](http://www.sqlfiddle.com/#!3/8b5a3/26)

```
update p SET
  Qty = t.Qty
from Product p
inner join Latest t 
on t.ProductId = p.ProductId; 
```

...要`UPDATE`匹配所有行，您只需将其更改`INNER JOIN`为`LEFT JOIN`：[http ://www.sqlfiddle.com/#!3/8b5a3/27](http://www.sqlfiddle.com/#!3/8b5a3/27)

```
update p SET
  Qty = ISNULL(t.Qty,0)
from Product p
left join Latest t 
on t.ProductId = p.ProductId;

select * from Product; 
```

而如果你想`UPDATE`用*匹配的行*来塑造 ANSI SQL ... [http://www.sqlfiddle.com/#!3/8b5a3/28](http://www.sqlfiddle.com/#!3/8b5a3/28)

```
update Product SET
  Qty = t.Qty
from Latest t
where t.ProductId = Product.ProductId 
```

...要`UPDATE`匹配所有行的语句，您必须稍微调整查询：[http ://www.sqlfiddle.com/#!3/8b5a3/29](http://www.sqlfiddle.com/#!3/8b5a3/29)

```
update Product SET
  Qty = ISNULL(t.Qty, 0)
from 
(
  select x.ProductId, lat.Qty
  from Product x
  left join Latest lat on lat.ProductId = x.ProductId
) as t  
where t.ProductId = Product.ProductId; 
```

尽管作为开发中的大多数选择，人们应该权衡代码可读性/可维护性与灵活性方面的利弊

数据样本：

```
create table Product
(
  ProductId int primary key not null,
  Name varchar(50) not null,
  Qty int not null
  );

insert into Product(Name,Qty) values
(1,'CAR',1),
(2,'Computer',1000),
(3,'Shoes',2);

create table Latest
(
  ProductId int primary key not null,
  Qty int not null
);

insert into Latest(ProductId, Qty) values
(2,2000),
(3,3); 
```

# r - 不要放弃零计数：躲避条形图

> ID：10326729
> 
> 赞同：46
> 
> 时间：2012-04-26T03:14:39.570
> 
> 标签：r, ggplot2

我正在 ggplot2 中制作一个躲闪的条形图，并且一个分组的计数为零，我想显示。我记得不久前在[这里](http://groups.google.com/group/ggplot2/browse_thread/thread/b520e0be08f5d100)看到了这个，并认为它`scale_x_discrete(drop=F)`会起作用。它似乎不适用于闪避的条形图。如何使零计数显示？

例如，（下面的代码）在下图中，type8~group4 没有示例。我仍然希望该图显示零计数的空白空间，而不是消除条形图。我怎样才能做到这一点？

![在此处输入图像描述](../Images/50bef6794893a18cee8e1c2a40849026.png)

```
mtcars2 <- data.frame(type=factor(mtcars$cyl), 
    group=factor(mtcars$gear))

m2 <- ggplot(mtcars2, aes(x=type , fill=group))
p2 <- m2 + geom_bar(colour="black", position="dodge") +
        scale_x_discrete(drop=F)
p2 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2018-01-19T14:46:25.123

以下是在不先制作汇总表的情况下如何做到这一点的方法。
它在我的 CRAN 版本（2.2.1）中不起作用，但在 ggplot 的最新开发版本（2.2.1.900）中我没有问题。

```
ggplot(mtcars, aes(factor(cyl), fill = factor(vs))) +
  geom_bar(position = position_dodge(preserve = "single")) 
```

[http://ggplot2.tidyverse.org/reference/position_dodge.html](http://ggplot2.tidyverse.org/reference/position_dodge.html)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-26T07:32:47.467

**更新** `geom_bar()`需求`stat = "identity"`

对于它的价值：上面的计数表 dat 包含 NA。有时，使用显式 0 来代替是有用的；例如，如果下一步是将计数放在条形上方。下面的代码就是这样做的，尽管它可能并不比 Joran 的简单。它涉及两个步骤：使用 获取计数的交叉表`dcast`，然后使用 融合表格`melt`，然后`ggplot()`照常进行。

```
library(ggplot2)
library(reshape2)
mtcars2 = data.frame(type=factor(mtcars$cyl), group=factor(mtcars$gear))

dat = dcast(mtcars2, type ~ group, fun.aggregate = length)
dat.melt = melt(dat, id.vars = "type", measure.vars = c("3", "4", "5"))
dat.melt

ggplot(dat.melt, aes(x = type,y = value, fill = variable)) + 
  geom_bar(stat = "identity", colour = "black", position = position_dodge(width = .8), width = 0.7) +
  ylim(0, 14) +
  geom_text(aes(label = value), position = position_dodge(width = .8), vjust = -0.5) 
```

![在此处输入图像描述](../Images/312ec8e4d502af1638361fc2823c4b90.png)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-26T03:41:22.160

我知道的唯一方法是预先计算计数并添加一个虚拟行：

```
dat <- rbind(ddply(mtcars2,.(type,group),summarise,count = length(group)),c(8,4,NA))

ggplot(dat,aes(x = type,y = count,fill = group)) + 
    geom_bar(colour = "black",position = "dodge",stat = "identity") 
```

![在此处输入图像描述](../Images/1f2093a4ded005c687d6d7ffd2f9caa1.png)

我认为使用`stat_bin(drop = FALSE,geom = "bar",...)`代替会起作用，但显然它没有。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-05-21T00:53:59.807

我问了同样的问题，但我只想使用`data.table`，因为对于更大的数据集，它是一种更快的解决方案。我在数据上添加了注释，以便那些经验不足并想了解我为什么要做我所做的事情的人可以很容易地做到这一点。以下是我操作`mtcars`数据集的方式：

```
library(data.table)
library(scales)
library(ggplot2)

mtcars <- data.table(mtcars)
mtcars$Cylinders <- as.factor(mtcars$cyl) # Creates new column with data from cyl called Cylinders as a factor. This allows ggplot2 to automatically use the name "Cylinders" and recognize that it's a factor
mtcars$Gears <- as.factor(mtcars$gear) # Just like above, but with gears to Gears
setkey(mtcars, Cylinders, Gears) # Set key for 2 different columns
mtcars <- mtcars[CJ(unique(Cylinders), unique(Gears)), .N, allow.cartesian = TRUE] # Uses CJ to create a completed list of all unique combinations of Cylinders and Gears. Then counts how many of each combination there are and reports it in a column called "N" 
```

这是生成图表的调用

```
ggplot(mtcars, aes(x=Cylinders, y = N, fill = Gears)) + 
               geom_bar(position="dodge", stat="identity") + 
               ylab("Count") + theme(legend.position="top") + 
               scale_x_discrete(drop = FALSE) 
```

它产生了这个图：

![圆柱图](../Images/5881ca0cb9f69d73caf9d5ff363507a2.png)

此外，如果有连续的数据，比如`diamonds`数据集中的数据（感谢 mnel）：

```
library(data.table)
library(scales)
library(ggplot2)

diamonds <- data.table(diamonds) # I modified the diamonds data set in order to create gaps for illustrative purposes
setkey(diamonds, color, cut) 
diamonds[J("E",c("Fair","Good")), carat := 0]
diamonds[J("G",c("Premium","Good","Fair")), carat := 0]
diamonds[J("J",c("Very Good","Fair")), carat := 0]
diamonds <- diamonds[carat != 0] 
```

然后使用`CJ`也可以。

```
data <- data.table(diamonds)[,list(mean_carat = mean(carat)), keyby = c('cut', 'color')] # This step defines our data set as the combinations of cut and color that exist and their means. However, the problem with this is that it doesn't have all combinations possible
data <- data[CJ(unique(cut),unique(color))] # This functions exactly the same way as it did in the discrete example. It creates a complete list of all possible unique combinations of cut and color
ggplot(data, aes(color, mean_carat, fill=cut)) +
             geom_bar(stat = "identity", position = "dodge") + 
             ylab("Mean Carat") + xlab("Color") 
```

给我们这张图：

![钻石固定](../Images/8f3751d91ea59abd4a53d5e1707c6a95.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-05-16T11:26:09.437

使用`count`和`complete`from`dplyr`来执行此操作。

```
library(tidyverse)

mtcars %>% 
    mutate(
        type = as.factor(cyl),
        group = as.factor(gear)
    ) %>%
    count(type, group) %>% 
    complete(type, group, fill = list(n = 0)) %>%
    ggplot(aes(x = type, y = n, fill = group)) +
        geom_bar(colour = "black", position = "dodge", stat = "identity") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-28T02:42:02.827

您可以利用该`table()`函数的特性，它计算一个因子在其*所有*级别的出现次数

```
# load plyr package to use ddply
library(plyr) 

# compute the counts using ddply, including zero occurrences for some factor levels
df <- ddply(mtcars2, .(group), summarise, 
 types = as.numeric(names(table(type))), 
 counts = as.numeric(table(type)))

# plot the results
ggplot(df, aes(x = types, y = counts, fill = group)) +
 geom_bar(stat='identity',colour="black", position="dodge") 
```

![](../Images/61c9e5932e7f64d059eb87795a31de29.png)

# mysql - 我的 group_concat SQL 查询有什么问题？

> ID：10326731
> 
> 赞同：1
> 
> 时间：2012-04-26T03:14:51.040
> 
> 标签：mysql, sql, left-join

我有三张桌子：

```
CREATE TABLE `b10g_entries` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `permalink` text NOT NULL,
  `title` varchar(300) NOT NULL,
  `fullcontent` text NOT NULL,
  `introcontent` text NOT NULL,
  `dateadded` datetime NOT NULL,
  `lastedited` datetime NOT NULL,
  `author` varchar(40) NOT NULL,
  `comments` int(11) NOT NULL DEFAULT '0',
  `published` tinyint(1) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=299 DEFAULT CHARSET=utf8

CREATE TABLE `b10g_tag_map` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `tag_id` bigint(20) unsigned DEFAULT NULL,
  `entry_id` bigint(20) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8

CREATE TABLE `b10g_tags` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 
```

我正在尝试使用以下查询获取前 25 个带有标签的博客条目（这就是我使用多对多关系的原因）：

```
SELECT b10g_entries.*, GROUP_CONCAT( b10g_tags.name SEPARATOR ', ') 
AS tags FROM b10g_entries 
LEFT JOIN b10g_tag_map ON b10g_entries.id = b10g_tag_map.entry_id 
LEFT JOIN b10g_tags ON b10g_tag_map.tag_id = b10g_tags.id LIMIT 0, 25; 
```

但我只拿回一张唱片。这个查询有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T03:32:15.510

添加**GROUP BY**子句。

现在，您将获得集合中任何位置的所有标签的列表。相反，您只需要组内的那些（按条目）。

```
SELECT b10g_entries.*, GROUP_CONCAT( b10g_tags.name SEPARATOR ', ') 
AS tags FROM b10g_entries 
LEFT JOIN b10g_tag_map ON b10g_entries.id = b10g_tag_map.entry_id 
LEFT JOIN b10g_tags ON b10g_tag_map.tag_id = b10g_tags.id 
GROUP BY b10g_entries.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T03:33:04.353

您有一个`GROUP_CONCAT()`聚合函数，但没有使用`GROUP BY`子句，因此您的结果将是一行。

请注意，在 MySQL 中，允许使用 a`GROUP BY`仅指定一列，而列表中会出现更多`SELECT`列，但这不能移植到其他 RDBMS。因此，我第二次加入以连接该表中`b10g_entries`的所有其他列，同时仅使用.`id``GROUP BY`

```
SELECT
  b10g_entries_all.*, 
  GROUP_CONCAT( b10g_tags.name SEPARATOR ', ') AS tags
FROM
  /* Main table, used gor GROUP BY aggregate */
  b10g_entries
  /* self join to pull in other columns without needing to put them in GROUP BY */
  JOIN b10g_entries b10g_entries_all ON b10g_entries.id = b10g_entries_all.id 
  LEFT JOIN b10g_tag_map ON b10g_entries.id = b10g_tag_map.entry_id 
  LEFT JOIN b10g_tags ON b10g_tag_map.tag_id = b10g_tags.id 
/* group on the entry id */
GROUP BY b10g_entries.id
LIMIT 0, 25; 
```

# c - 标记为只读的程序可执行文件

> ID：10326734
> 
> 赞同：1
> 
> 时间：2012-04-26T03:15:11.583
> 
> 标签：c, segmentation-fault, file-permissions

我正在阅读有关分段错误的维基百科，并通过以下代码和语句来阅读。

```
int main(void)
 {
     char *s = "hello world";
     *s = 'H';
 } 
```

> 当包含此代码的程序被编译时，字符串“hello world”被放置在程序可执行文件中标记为只读的部分；加载时，操作系统会将其与其他字符串和常量数据一起放在内存的只读段中。执行时，变量 s 被设置为指向字符串的位置，并尝试通过变量将 H 字符写入内存，从而导致分段错误。使用在编译时不检查只读位置分配的编译器编译这样的程序。

我的问题是关于文件权限，即当可执行文件标记为只读时以及何时读写等等？

我想了解有关文件权限的所有信息。我们可以明确更改文件权限吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T03:21:44.353

*“hello world”存储在内存*的只读部分中。写入可执行文件内存的给定部分的能力与写入磁盘上的可执行文件的能力无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T03:43:46.203

您在这个问题中讨论了 3 个不相关的概念：

*   文件属性（某些操作系统支持，例如 Windows）- 其中之一是只读的。管理文件的正常打开方式，具有修改文件权限的用户可以随意更改文件属性。
*   文件权限（大多数操作系统支持）。如果给定的用户有权访问/修改，并且在某些系统中执行该文件。
*   内存页上的内存保护属性。大多数实现虚拟内存的操作系统都支持。内存的每个页面（即 4Kb 块）都有一组属性（即读、写、执行），这些属性由操作系统的内存管理部分与 CPU 一起设置和执行。大多数现代 CPU 直接使用此页面属性来验证内存操作。

即在Windows 上，您可以使用[VirtualProtect](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366898%28v=vs.85%29.aspx)函数来指定给定在程序地址空间中分配的内存块应该具有的属性。

# perl - Using grep and gawk in Perl

> ID：10326736
> 
> 赞同：1
> 
> 时间：2012-04-26T03:15:20.280
> 
> 标签：perl, formatting, awk, grep, cgi

```
 $chosenbeer = param('beers');
    $beerprice = `grep "$chosenbeer" beers | gawk '{gsub(/[a-zA-Z\t ]/,"");print $1}'`; 
```

This is the code I'm trying to use, $chosenbeer is the string of a list from a CGI page previously. I'm trying to get the price of the beer selected.

beers ex line:

```
Dogfish Head 60 Minute IPA      35.96 
```

But for some reason this isn't working. Any idea why? When I print $beerprice nothing comes out.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T03:27:35.963

您可以在 Perl 中更好地做到这一点，而无需花费大量精力。应该更快、更灵活、更便携、更容易调试并且不包含大的安全漏洞。

```
sub find_beer {
    my $beer = shift;

    open my $fh, "beers" or die $!;

    # Take the first beer that matches
    my($line) = grep /\Q$beer/, <$fh>;
    return unless $line;

    # I'm presuming the name and price are separated by a hard tab.
    my($name, $price) = split /\t/, $line;

    return { name => $name, price => $price };
}

my $beer = find_beer("Dogfish Head 60 Minute IPA");
print $beer->{price}, "\n"; 
```

# php - 数据库/服务器设计（Cookie 和索引）- 整数还是文本？

> ID：10326739
> 
> 赞同：0
> 
> 时间：2012-04-26T03:15:30.767
> 
> 标签：php, mysql, cookies

这是一个与我正在构建的网站相关的设计问题。

我有一个“玩家”表，它将存储姓名、密码、最后一个 IP、出生日期、头像链接、位置等。

当玩家登录时，将在数据库中搜索他们输入的用户名，并检查他们的密码（是的，当然密码是经过哈希处理的）。然后，他们将获得一些让他们保持登录状态的 cookie。

每次他们访问新页面时，都会使用 cookie 中的信息在数据库中查找正确的玩家。如果他们当前的 IP 与他们登录的最后一个 IP 匹配（可能是 10 秒前），则页面会输出他们的名字等等。

这是我的问题：我应该让 Player 表的主键是玩家的名字（我知道这是唯一的文本字段），还是应该为此创建一些任意的自动递增索引？

请记住，这也会对存储在 cookie 中的信息产生影响——无论是存储 int 还是文本中的用户名。同样，我想对该值进行某种散列（只是为了增加一点安全性），以便 cookie 不只包含 int 或用户名。

那么，就效率和设计而言，哪个是更好的选择呢？

*编辑*对数据库使用 VARCHAR 也可以，而且可能更快，我想。 *EDIT2*这个主键也将被其他表引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T03:59:28.063

正如 Marc 的评论所表明的那样， int 在内存和性能方面都会更有效。我建议不要将登录名绑定到 IP 地址，某些用户将对服务器的每个请求都来自不同的 IP 地址（洋葱路由器、AOL，谁知道还有什么其他奇怪的公司 NAT），并且一直被注销会超级烦人的。您可能还想考虑使用会话而不是设置一个 cookie，说明他们的登录身份。尽管有一个 sig 会使其更安全，但使用会话会更安全，同时让您更灵活地在用户登录之前跟踪有关用户的信息（例如，成功登录后应该将他们重定向到哪个页面）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:04:56.737

> 这是我的问题：我应该让 Player 表的主键是玩家的名字（我知道这是唯一的文本字段），还是应该为此创建一些任意的自动递增索引？

后者。
名称往往会改变。

> 1.  是否以文本形式存储 int 或用户名。
> 2.  同样，我想对该值进行某种散列

请先下定决心，然后问
它最终会是散列还是普通值？如果是后者 - 那么有什么区别呢？

> 那么，就效率和设计而言，哪个是更好的选择呢？

哦。这个绝对无所谓。

# linux - Retrieve password for Fedora 14

> ID：10326740
> 
> 赞同：0
> 
> 时间：2012-04-26T03:15:32.100
> 
> 标签：linux, fedora, forgot-password, password-retrieval

Hello I use a Fedora 14 VM on my Macbook pro. I haven't logged into it for a while and now I have forgot its password, I am trying to see if there is a way I could retrieve my password. I have looked around on google, and all I get is how to change a root password, but I am not looking for that.

I am stuck at the initial login screen, and am trying to see if I can retrieve my password.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:36:18.953

好的，我需要的只是一点耐心。以下链接将帮助我们了解如何修改密码。

这个展示了如何编辑 root 的密码，如果有人想更改用户的密码，那么它必须是 passwd 用户名。

[http://www.labtestproject.com/using_linux/step_by_step_to_reset_change_root_password_on_fedora_10](http://www.labtestproject.com/using_linux/step_by_step_to_reset_change_root_password_on_fedora_10)

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:53:49.700

如果您仍然可以完全访问 grub，则可以将参数“init=/bin/sh”添加到内核参数中，然后引导系统。这将直接带您进入 shell（不询问密码）。从那里您可以轻松地修改 /etc/passwd 文件并使系统恢复工作。

# php - How to store photo upload in a PHP session?

> ID：10326743
> 
> 赞同：6
> 
> 时间：2012-04-26T03:16:05.267
> 
> 标签：php, mysql, file-upload

I've built this webform wizard, consisting of several PHP pages. In this several pages users can fill in the form and the data gets temporarily stored in a session and at the last page the sessions are used to store all the data in the MYSQL database. Everything works fine with the exception of the uploaded file. Here is my code:

**HTML:** wizard_page2

```
<form name="registratieformulier" method="post" enctype="multipart/form-data" action="sw3.php">

    <tr><td>Foto winkel uploaden: </td><td><input type="file" name="uploadfoto"/></td></tr><br /><br />

      <tr><td><strong>Omschrijving van winkel:</strong></td>                    </tr><br />

       <tr><textarea cols="50" rows="7" name="omschrijvingwinkel"></textarea></tr>
       <input name="pkbedrijven" value="<?php echo($pkbedrijven); ?>" type="hidden" />
    <input type="submit" name="stuurfoto" value="Verzenden" />

</form> 
```

**PHP:** wizard_last_page

```
 $_FILES['uploadfoto']['name']       = $_SESSION["naamfoto"];
    $_FILES['uploadfoto']['tmp_name']   = $_SESSION["tijdelijk"];

    $bn =   $_SESSION["wn"];

     $target_path = "../../winkels/$bn/";

      $target_path = $target_path . basename( $_FILES['uploadfoto']['name']);

    move_uploaded_file($_FILES['uploadfoto']['tmp_name'], $target_path)or die("There was an error uploading the file, please try again!");
     $foto_path  = "http://mywebsite.nl/winkels/$bn/".basename($_FILES['uploadfoto']['name']);

   $omschrijving   = $_SESSION["omschrijving"];

   $add = "UPDATE winkelprofiel SET winkelomschrijving='$omschrijving', winkelfoto='$foto_path' WHERE fkBedrijvenID=$pkbedrijven ";
   $query_upload = mysql_query($add) or die("De winkelfoto en omschrijving konden niet worden opgeslagen"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T03:23:50.700

该`$_FILES`数组仅保存有关已*在此请求*中上传的文件的信息。如果您没有将该文件保存在同一请求中的其他位置，PHP 将在请求结束时将其删除。您不能简单地保存`$_FILES['uploadfoto']['tmp_name']`到会话中并期望文件稍后仍然存在，因为它不会存在。`$_SESSION`将值分配回也没有意义`$_FILES`，它不会带回文件。

你需要做什么：

1.  如果上传成功，`$_FILES['uploadfoto']['tmp_name']`立即移动到其他地方
2.  保存您已将其移动到的位置`$_SESSION`
3.  `$_SESSION`在多页进程结束时对该文件执行某些操作（不再需要`$_FILES`）
4.  有一些机制来删除旧的上传文件，以防用户放弃会话并且文件永远不会被使用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T03:25:50.503

我认为问题在于，位于 $_FILES['uploadfoto']['tmp_name'] 的文件只有在上传时才可用。即使您将值存储在会话中，当您来到wizard_last_page 时，该文件也不会存在。您需要在 POST 请求中立即处理上传的文件。

因此，您需要在上传文件时将文件移动到 $target_path 或任何某个临时位置，然后将 $target_path 存储在会话中，以便稍后在 wizard_last_page 上访问该文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-10T22:16:46.347

我不同意接受的答案。有一种方法可以将所有图像存储在会话数组变量中。您可以使用“file_get_contents”函数来存储图像。看看这个：

```
 $_SESSION['imgArrayFile'][] = $_FILES['file']; //Your file informations
  $_SESSION['imgArrayName'][] = $_POST["ImgNewNamePlacowki"]; //new name for img
  $_SESSION['ImgArrayAlt'][] = $_POST["ImgAltPlacowki"]; // alt tags if you use them
  $_SESSION['obj_image_session'][] = file_get_contents($_FILES['file']['tmp_name']); 
  //above "file_get_contents" function - store image as a long string. 
```

无论其他人如何考虑将其用于此目的，它都可以为您完成工作。在会话中存储大量数据存在几个问题，但如果您的图像足够小并且您知道您的设置限制，那么您会很好。

保存您的文件

```
$file= $destination."/".$filename; //images/new.jpg
$fp=fopen($file,"w");
fwrite($fp,$_SESSION['obj_image_session'][$index]); 
```

我（工作）项目的示例：

```
<?php
//$galery_img_folder = "your/new/image/destination";

foreach($_SESSION['imgArrayFile'] as $index => $name){
  if($_SESSION['imgArrayName'][$index]!="" 
  && $_SESSION['ImgArrayAlt'][$index]!=""
  && $_SESSION['obj_image_session'][$index]!=""
  ){

    $allowedExts = array("gif", "jpeg", "jpg", "png");
    $temp = explode(".", $_SESSION['imgArrayFile'][$index]["name"]);
    $extension = end($temp);
    if ((($_SESSION['imgArrayFile'][$index]["type"] == "image/gif")
    || ($_SESSION['imgArrayFile'][$index]["type"] == "image/jpeg")
    || ($_SESSION['imgArrayFile'][$index]["type"] == "image/jpg")
    || ($_SESSION['imgArrayFile'][$index]["type"] == "image/pjpeg")
    || ($_SESSION['imgArrayFile'][$index]["type"] == "image/x-png")
    || ($_SESSION['imgArrayFile'][$index]["type"] == "image/png"))
    && ($_SESSION['imgArrayFile'][$index]["size"] < 104857600)
    && in_array($extension, $allowedExts))
      {
          if(isset($_SESSION['imgArrayName'][$index]) && $_SESSION['imgArrayName'][$index]!=""){ 
          $rename = $_SESSION['imgArrayName'][$index];
          $rename = $rename.".".end($temp);
        }

      if ($_SESSION['imgArrayFile'][$index]["error"] > 0)
        {
        echo "Return Error Code: " . $_SESSION['imgArrayFile'][$index]["error"] . "<br>";
        }
      else
        {
        $size = display_filesize($_SESSION['imgArrayFile'][$index]["size"]);
        echo "Upload: " . $_SESSION['imgArrayFile'][$index]["name"] . "<br>";
        echo "Type: " . $_SESSION['imgArrayFile'][$index]["type"] . "<br>";
        echo "Size: " . ($size) . "<br>";
        echo "Temp file: " . $_SESSION['imgArrayFile'][$index]["tmp_name"] . "<br>";

        if (file_exists($galery_img_folder."/".$rename))
          {
          $error[] = ''.$rename.' <span class="error" id="error"> this name exsists </span>';
          }
        else
          {
          $_FILES["file"]["tmp_name"]=$_SESSION['imgArrayFile'][$index]["tmp_name"];
          move_uploaded_file($_FILES["file"]["tmp_name"], $galery_img_folder."/".$rename);
          //now make use of the file_get_content variables
          $file= $galery_img_folder."/".$rename;
          $fp=fopen($file,"w");
          fwrite($fp,$_SESSION['obj_image_session'][$index]);
        }
          }
        }
      }
    else
      {
      $error[] = '<span class="error" id="error"> Niewłaściwy plik </span>';
      $maxsixe = display_filesize(104857600);
      echo "Size: " . ($maxsixe) . "<br>";
      }
    }
  }//end foreach ! ! ! 
}//end dodawanie zdjecia
?> 
```

当然，您必须进行一些小的修改才能使其适用于您的项目，但我的意思是向您展示这是可能的。

祝你有美好的一天，快乐的编码！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-30T02:03:02.433

好吧，您可以先将文件上传到一个临时位置。然后在最后一页，提交表单后，您可以将文件传输到所需位置，然后删除临时文件。

```
$_SESSION['file'] = $_FILES["file"]["name"];

if (file_exists("uploads/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],"uploads/temp/" . $_FILES["file"]["name"]);
      };

//This for the last page.
$file = file_get_contents("uploads/temp/".$_SESSION['file']);
file_put_contents("uploads/".$_SESSION['file'], $file); 
```

# php - Display Data From MYSQL; SQL statement error

> ID：10326746
> 
> 赞同：-3
> 
> 时间：2012-04-26T03:16:35.870
> 
> 标签：php, mysql, sql, database

I have a form..want to display the data from mysql table..problem is that the SQL query statement is not displaying the data..any ideas? I think the error may be orruring due to the AND statement in the SQL query line?

```
 <form method="get" action="submit.php">

   Number of Bedrooms: <select name="bedrooms">
   <option selected value='#'>--Choose Number of Bedrooms--</option>
   <option value="2">2</option>
   <option value="3">3</option>
   <option value="4">4</option>
   <option value="5">5</option>
   </select>

   Number of Occupants:  <select name="sleeps_min">
   <option selected value='#'>--Choose Number of Bedrooms--</option>
   <option value="2">2</option>
   <option value="3">3</option>
   <option value="4">4</option>
   <option value="5">5</option>
   <option value="6">6</option>
   <option value="7">7</option>
   <option value="8">8</option>
   <option value="9">9</option>  
   <option value="10">10</option>
   </select>

   Availability:  <select name="availability">
   <option selected value='#'>--Select Availability Period--</option>
   <option value="All year round">All Year Round</option>
   <option value="New Year Availability Only">New Year</option>

   </select>
   <input type="submit" value="submit" />
    </form> 
```

--

```
 require 'defaults.php';
 require 'database.php';

 /* get properties from database */

 $property = $_GET['bedrooms'] ;
 $sleeps_min = $_GET['sleeps_min'] ;
 $availability = $_GET['availability'] ;

  $query = "SELECT * FROM `properties` WHERE bedrooms = '{$bedrooms}' sleeps_min = '{$sleeps_min}' AND availability = '{$availability}'";
  $row=mysql_query($query);

  $result = do_query("SELECT * FROM `properties` WHERE bedrooms = '{$bedrooms}' sleeps_min = '{$sleeps_min}' AND availability = '{$availability}'", $db_connection);

 while ($row = mysql_fetch_assoc($result))
 {
$r[] = $row;
 }

 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:19:18.753

您`AND`在 where 子句中缺少逻辑运算符（例如 ）：

```
$query = "SELECT * FROM `properties` WHERE bedrooms = '{$bedrooms}' sleeps_min =
                                                                   ^----here 
```

并且您的查询容易受到 SQL 注入攻击。至少你应该通过[mysql_real_escape_string传递你的 $_GET 变量](http://php.net/mysql_real_escape_string)

如果您的代码中甚至有简单的错误处理，您就会看到语法错误：

```
$result = mysql_query($query) or die(mysql_error());
                             ^^^^^^^^^^^^^^^^^^^^^^ 
```

**永远不要**假设查询成功。即使 SQL 语法本身是完美的（你的不是），也可能有其他原因导致查询失败而不检查失败。

# android - 未找到子目录中的 Android 布局 XML 文件

> ID：10326750
> 
> 赞同：1
> 
> 时间：2012-04-26T03:17:11.953
> 
> 标签：android, android-layout

我试图组织我的 layout.xml 文件，并创建了一个目录

```
/res/layout/content/ 
```

然后我试图从这样的代码中指向一个文件：

```
setContentView(R.layout.content.product_strategy); 
```

但我收到一个错误，即内容不是可以解析的字段。

做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:28:18.020

你不能在android中创建自己的资源文件夹。请查看此链接以提供有关资源文件夹的信息：

[http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T04:26:52.540

R.java 不会在资源中创建对子目录的引用。这就是原因。所以你需要使用单级默认目录结构。

# c++ - 为什么我的 opengl freeglut 应用程序编译为 C 而不是 C++？

> ID：10326752
> 
> 赞同：0
> 
> 时间：2012-04-26T03:17:43.673
> 
> 标签：c++, c

代码没有问题，因为当我告诉编译器将其编译为 C 时它会编译，但当我将设置设置为默认值时它不会编译（即编译为 C++）。当我将它编译为 C++ 时，我收到许多错误，例如“未定义对 glClear 的引用”

我正在使用微软的 Visual Studio C++ 编译器。我把所有东西都正确链接了。

代码是：

```
#include <GL/glut.h>
#include <GL/freeglut.h>
#include <GL/gl.h>

void display(void)
{
    /* Clear all pixels */
    glClear(GL_COLOR_BUFFER_BIT);

    /*  draw white polygon (rectangle) with
     *  corners at (0.25, 0.25, 0.0) and (0.75, 0.75, 0.0)
     */

    glColor3f(1.0, 1.0, 1.0);
    glBegin(GL_POLYGON);
        glVertex3f(0.25, 0.25, 0.0);
        glVertex3f(0.75, 0.25, 0.0);
        glVertex3f(0.75, 0.75, 0.0);
        glVertex3f(0.25, 0.75, 0.0);
    glEnd();

    /*  don't wait!
     *  start processing buffered OpenGL routines
     */

        glFlush();
}

void init(void)
{
    /* Select clearing background color */
    glClearColor(0.0, 0.0, 0.0, 0.0);

    /* Initialize viewing values */
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0.0, 1.0, 0.0, 1.0, -1.0, 1.0);
}

/*
* Declare initial window size, position, and display mode
* (single buffer and RGBA). Open window with “hello”
* in its title bar. Call initialization routines.
* Register callback function to display graphics.
* Enter main loop and process events.
*/
int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(250, 250);
    glutInitWindowPosition(100, 100);
    glutCreateWindow("hello");
    init();
    glutDisplayFunc(display);
    glutMainLoop();
    return 0; /* ISO C requires main to return int. */
} 
```

另外，如果有人有合适的资源来学习使用 C++ 的 opengl，你能推荐一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:45:23.857

这可能是因为`glClear`在当前包含的任何头文件中都没有声明。在 C 中，通常假定未声明的函数具有基于其参数的特定类型，并返回一个`int`. 因此，当使用 C 编译时，您可能会收到关于它未声明的警告（我希望您启用了警告，并在编译时阅读它们？），但它会尽力编译和链接它。

C++ 对未声明的函数更加严格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:12:42.777

正如 Alexadre Jasmin 和 Bart 所指出的，验证您是否正确链接了 OpenGL 库。我用

```
-lGLU -lGL -lglut
```

在 ubuntu 上使用 freeglut。

如果这不能解决问题，请尝试添加

```
#define GLUT_DISABLE_ATEXIT_HACK
```

在您的 cpp 文件的顶部。

# mfc - Visual C++ MFC 应用程序 - 事件未在子对话框中接收

> ID：10326753
> 
> 赞同：0
> 
> 时间：2012-04-26T03:17:50.767
> 
> 标签：mfc, event-handling, dialog, mouseevent

我创建了一个派生控件处理事件，如鼠标移动、左键向下、向下等。我有一个弹出对话框，在该对话框中，有三个子对话框。当我在弹出对话框中使用派生控件时，它工作正常。但是当我将控件放在任何子对话框中时，鼠标事件都不会被处理。请提出解决方案。

在此先感谢，马丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T23:51:11.560

必须转发事件。使用相应的消息处理程序在子对话框中捕获它们，然后使用 ::SendMessage 方法转发它们。弹出对话框可能会自动捕捉鼠标事件并启用转发。

# vb.net - 在 Windows 窗体和 Visual Basic .NET 的字符串中查找/替换 -

> ID：10326761
> 
> 赞同：0
> 
> 时间：2012-04-26T03:19:11.390
> 
> 标签：vb.net, winforms, string, replace

我在查找字符串中的特定文本然后用“”替换它时遇到问题，这只是一个空白条目。

```
Dim ABCTEST As String
ABCTEST = previousJob.Comments.ToString() + currentJob.Comments.ToString() 
```

所以现在我的问题是搜索 ABCTEST 文本并从中删除诸如“Tier Market”之类的文本。然后将它传递给一个新字符串，也许是 ABCTEST_NEW。

我知道我可能必须使用`for`循环来搜索关键字，但是我看过的所有示例都非常广泛。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T03:24:36.757

```
ABCTEST_NEW = ABCTEST.Replace("Tier Market", " ") 
```

**String.Replace**方法

[http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)

# objective-c - Objective-C 从对象数组中创建逗号分隔字符串的最简单方法

> ID：10326762
> 
> 赞同：67
> 
> 时间：2012-04-26T03:19:15.513
> 
> 标签：objective-c, arrays, swift, nsmutablearray

所以我有一个 nsmutablearray 里面有一堆对象。我想为每个对象的 id 值创建一个逗号分隔的字符串。

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-04-26T03:25:19.240

使用`NSArray`实例方法`componentsJoinedByString:`。

在 Objective-C 中：

```
- (NSString *)componentsJoinedByString:(NSString *)separator 
```

在斯威夫特：

```
func componentsJoinedByString(separator: String) -> String 
```

**例子：**

在 Objective-C 中：

```
NSString *joinedComponents = [array componentsJoinedByString:@","]; 
```

在斯威夫特：

```
let joinedComponents = array.joined(seperator: ",") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-17T16:20:59.920

如果你在 Swift 中寻找相同的解决方案，你可以使用这个：

```
var array:Array<String> = ["string1", "string2", "string3"]
var commaSeperatedString = ", ".join(array) // Results in string1, string2, string3 
```

要确保您的数组不包含 nil 值，您可以使用过滤器：

```
array = array.filter { (stringValue) -> Bool in
    return stringValue != nil && stringValue != ""
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-03T22:39:40.217

**从数组创建字符串：**

```
-(NSString *)convertToCommaSeparatedFromArray:(NSArray*)array{
    return [array componentsJoinedByString:@","];
} 
```

**从字符串创建数组：**

```
-(NSArray *)convertToArrayFromCommaSeparated:(NSString*)string{
    return [string componentsSeparatedByString:@","];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-13T17:00:31.897

**迅速**

```
var commaSeparatedString = arrayOfEntities.joinWithSeparator(",") 
```

# html - CSS截断流体图像顶部的文本

> ID：10326767
> 
> 赞同：0
> 
> 时间：2012-04-26T03:19:28.220
> 
> 标签：html, css

我绝对将文本定位在图像之上，如果文本在图像上扩展，我想截断它。如果定义了文本的宽度，这将不是问题。但是，图像上的文本块设置为 100%，并位于图像的底部。

如果文本扩展通过图像，如何隐藏文本？

查看我的示例：http: [//jsfiddle.net/qhFUL/](http://jsfiddle.net/qhFUL/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:22:07.177

设置`overflow`为`hidden`：

```
.box {
  overflow: hidden;
} 
```

**演示：http: [//jsfiddle.net/qhFUL/1/](http://jsfiddle.net/qhFUL/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T03:26:06.190

如果您还想防止文本换行（因此它不会隐藏图像），您可以这样做：

```
 .box {
    position: relative;
    margin-bottom: 20px;
    overflow: hidden;
  }

  .text {
    position: absolute;
    bottom: 0;
    left: 0;
    padding: 20px;
    white-space: nowrap;
  } 
```

这将截断长文本而不是换行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T03:39:47.737

您还可以在 .text div 上指定一个高度，这样它就会被截断而不是换行。

然后你可以添加一个小的 jQuery 省略号脚本来美化它......

[http://yue.st/notes/code/js/ellipsis.en.html](http://yue.st/notes/code/js/ellipsis.en.html)

或者

[https://github.com/rmorse/AutoEllipsis](https://github.com/rmorse/AutoEllipsis)

好的... ：）

# python - 什么可能导致日志记录模块多次记录一条记录？

> ID：10326768
> 
> 赞同：1
> 
> 时间：2012-04-26T03:19:33.713
> 
> 标签：python, logging

[我有一个使用内置日志记录](http://docs.python.org/library/logging.html)模块的多线程 Python 应用程序。为了控制日志记录级别并使将来更容易`StreamHandler`与 a交换`FileHandler`，我创建了一个由每个模块调用的通用辅助函数来创建一个相同的记录器（除了它的名称）。

**我应该如何解决这个问题？**

**关键点**

1.  项目中的每个模块都有自己的记录器实例。
2.  `self._logger.info("Logger Setup")`示例输出是通过对记录器 ( )的一次调用生成的
3.  我尝试包含当前线程名称（`threading.Thread.getName()`），它确认同一个线程正在调用导致多个日志。

**记录器创建 - 现在工作**

```
import logging
import sys
def createSystemLogHandler(logger):
    # This is now called once at the logger's root 
    ch = logging.StreamHandler(sys.stdout) # Normal output is to stderr which doesn't show up on Window's CMD
    format = logging.Formatter('%(asctime)s - %(levelname)s - %(name)s - %(message)s')
    ch.setFormatter(format)
    logger.addHandler(ch)
    return logger

def configureSystemLogger(name='', level=logging.WARNING):
        logger = logging.getLogger(name)
        logger.setLevel(level)
        logger.info("Logger Setup")
        return logger 
```

**样本输出**

```
2012-04-25 21:59:40,720 - INFO - HW_MGR - Logger Setup
2012-04-25 21:59:40,720 - INFO - HW_MGR - Logger Setup
2012-04-25 21:59:40,720 - INFO - HW_MGR - Logger Setup
2012-04-25 21:59:40,720 - INFO - HW_MGR - Logger Setup
2012-04-25 21:59:40,720 - INFO - HW_MGR - Logger Setup 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:00:24.420

我的猜测是您有多个处理程序（即，一条消息被多次发出；但是在重新阅读您的问题时，您似乎已经知道这一点）。要调试它，请尝试：

*   查看`logging.getLogger("").handlers`（即根记录器上的处理程序）
*   检查您的来电`addHandler()`
*   [Brandon Rhode 的](http://twitter.com/#!/brandon_rhodes) [`logging_tree`](http://pypi.python.org/pypi/logging_tree)模块
*   用于[`pdb`](http://docs.python.org/library/pdb.html)跟踪日志消息的生命周期（即，在调用之前放置一个断点`self._logger.info(…)`，然后单步执行该函数）。

# javascript - document.selection.createRange() 在 IE 中不起作用

> ID：10326778
> 
> 赞同：4
> 
> 时间：2012-04-26T03:21:23.727
> 
> 标签：javascript, internet-explorer

我正在尝试制作一个简单的 ubb 编辑器，但 document.selection.createRange() 在 IE 中不起作用，它不会得到任何突出显示的文本（尝试提醒突出显示的文本但什么也得不到）。我仍然无法找到原因并解决此问题。

[您可以在此处查看此脚本的运行情况](http://www.sharingbus.info/public/ubb/ubb.html)

```
window.onload = function () {
    var ubb = document.getElementById('ubb_code');
    var ubba = ubb.getElementsByTagName('a');//ubb buttons
    var textarea = document.getElementsByTagName('textarea')[0];//editable textarea filed 

    //onclick to insert ubbcode
    ubba[0].onclick = function() {
        tag('[b]','[/b]');
    };

    //function used to insert ubbcode
    function tag(tag1,tag2){
        // code for IE
        if (document.selection){
            textarea.focus();
            var sel = textarea.document.selection.createRange();//It DOES NOT work!
            //alert(sel.text);
            sel.text = tag1 + sel.text + tag2;
        }else{  
        // code for none-IE webbrowsers
            var len = textarea.value.length;
            var start = textarea.selectionStart;
            var end = textarea.selectionEnd;

            var scrollTop = textarea.scrollTop;
            var scrollLeft = textarea.scrollLeft;

            var sel = textarea.value.substring(start, end);
            //alert(sel);
            var rep = tag1 + sel + tag2;
            textarea.value =  textarea.value.substring(0,start) + rep + textarea.value.substring(end,len);

            textarea.scrollTop = scrollTop;
            textarea.scrollLeft = scrollLeft;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:31:18.650

更新：IE9 支持此功能
[http://msdn.microsoft.com/en-us/library/ie/ms536394(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms536394(v=vs.85).aspx)

```
if (document.selection.createRange) {       // Internet Explorer
    var range = document.selection.createRange();
    var selText = range.text;
    var htmltext = range.htmlText;                        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T07:00:09.677

在 IE11 中，不再支持选择对象。您可以使用 window.getSelection 来实现相同的行为。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ie/ms535869(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms535869(v=vs.85).aspx)

# ios - 来自 .plist 的整数

> ID：10326780
> 
> 赞同：0
> 
> 时间：2012-04-26T03:21:49.477
> 
> 标签：ios, properties, cocos2d-iphone, plist

我是 plists 的新手，我真的需要使用一个。我所拥有的是一个 plist，其中存储了两个字典下的不同数字。我需要获取存储的数字，并将其设为整数。此过程将从名为“readPlist”的方法运行。

该 plist 称为“properties.plist”。第一本词典被称为“敌人”。它包含各种其他字典，其名称将存储在 NSMutableString 中，称为“SpriteType”。数字名称的格式为“L - %d”，其中 %d 是一个称为“LevelNumber”的整数。

如果可能的话，有人可以给我有关如何使用该信息和上面的字典名称获取该整数的代码。

我已经查看了如何访问 plist，但是人们显示的代码不起作用。

提前致谢。

编辑：也让它更容易理解，这是我的 plist。我想要一个整数，称为'SpriteNumber'等于'L - %d'的值

![属性.plist](../Images/dc1608ebff63ad85704523e2251b11c8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:33:27.513

如果您将 plist 的内容读入字典（我不会告诉您如何操作，但这[是](http://ipgames.wordpress.com/tutorials/writeread-data-to-plist-file/)我经常参考的教程），那么只需将字符串从关卡的键中取出`[[myDictionary objectForKey:@"key"]stringValue];`. 然后，使用 NSString 非常有助于`-stringByReplacingOccurencesOfString:withString:`摆脱“L -”部分，只得到一个数值。最后，使用 . 从字符串中获取一个整数`[myString intValue]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:52:09.383

好吧，最简单的方法是：

```
-(int) getMosquitoCountForLevel:(int) level {
    int mosquitoCount=0;
    NSString *gsFile = @"whateverFullyQualifiedFileNameYourPlistIs";
    NSDictionary* definitions = [NSDictionary dictionaryWithContentsOfFile:gsFile];
    NSDictionary* mosquitos = [definitions objectForKey:@"Mosquito"];
    if(mosquitos) {
       NSString *levelKey = [NSString stringWithFormat:@"L - %d",level];
       NSNumber *mosquitoCountAsNumber = [mosquitos objectForKey:levelKey];
       if(mosquitoCountAsNumber) {
         mosquitoCount=[mosquitoCountAsNumber intValue];
       } else {
         CCLOGERROR(@"%@ - Mosquito definitions in %@ does not contain a en entry for level %@.",self.class,gsFile,levelKey);
       }
    } else {
      CCLOGERROR(@"%@ - file %@ does not contain a Mosquito dictionary.",self.class,gsFile);
    }
    return mosquitoCount;
} 
```

这可以编译但未使用实际数据进行测试。

# java - 用 Java 播放在线音频文件

> ID：10326783
> 
> 赞同：0
> 
> 时间：2012-04-26T03:22:17.863
> 
> 标签：java, mp3, javasound

我正在尝试用 Java 播放在线音频文件 这是文件的链接，[可以](http://zekr.org/download/recit/ghamdi-40kbps-online.properties)从 Java 代码运行。如何在不将其下载到 PC 的情况下从我的 Java 代码中播放它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:29:50.477

尝试[播放音频](http://docs.oracle.com/javase/tutorial/sound/playing.html)教程。这是一个[例子](http://www.exampledepot.com/egs/javax.sound.sampled/StreamAudio.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T03:33:18.660

[Java 媒体框架](http://www.oracle.com/technetwork/java/javase/index-135334.html)( [JMF](http://en.wikipedia.org/wiki/Java_Media_Framework) ) 怎么样？

# javascript - chrome.tts.speak 中的回调？

> ID：10326790
> 
> 赞同：1
> 
> 时间：2012-04-26T03:22:54.647
> 
> 标签：javascript, google-chrome, google-chrome-extension, text-to-speech

我试图`chrome.tts.speak`在演讲结束后调用一个回调函数，并且有一个很好的参数空间。但是，在寻找有关它的更多细节之后，非常令人失望的是[，文件](http://code.google.com/chrome/extensions/tts.html#method-speak)是这样说的：

> ***回调（可选函数）***
> 　　在讲话结束前立即调用。

而且我不希望它立即被调用。演讲结束*后*我想要它。那么有可能吗？欢迎任何方法。（但不是那么*“hacky”*）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T03:25:25.760

在同一页面中，它提到`onEvent`（作为 的一部分`options`）：

> ***onEvent ( 可选函数 )***
> 　　这个函数在说话过程中发生的事件被调用。
> 　　**参数**
> 　　***event ( `TtsEvent`)***
> 　　　　来自文本转语音引擎的更新事件，指示此话语的状态。

`TtsEvent`有一个`type`属性，可以`end`用来标记演讲的结尾。把它放在一起：

```
chrome.tts.speak("Hello, world!", {
    requiredEventTypes: ['end'],
    onEvent: function(event) {
        if(event.type === 'end') {
            alert('Speech ended.');
        }
    }
}); 
```

# javascript - 首先从 xml 中读取照片链接并使用 Photoswipe 打开它

> ID：10326791
> 
> 赞同：0
> 
> 时间：2012-04-26T03:23:01.737
> 
> 标签：javascript, xml, global-variables, photoswipe

我想要做的是将照片的链接保存到一个数组中，然后将其传递给 photowiper，以便 photowiper 可以查看我的照片。

不幸的是，jquery xml 解析无法更改全局变量。我可以在 parseXml(xml) 函数中更改全局变量的值。然后我可以将链接传递给函数（窗口，PhotoSwipe）。

```
 var cars = new Array();

 var carcar;

$(document).ready(function()
{
$.ajax({
    type: "GET",
    url: "http://www.utravel.com.hk/mobile-app/news-photo-xml.php?id=3256",
    dataType: "xml",
    success: function(xml) { parseXml(xml); }
        });
});

function parseXml(xml)
{ 
$(xml).find("item").each(function()
{  
carcar="http://www.utravel.com.hk/cms/news_photo/original/"+$(this).find("photo").text().substring(5);
        cars.push(carcar);   

});

}               
    (function(window, PhotoSwipe){

        document.addEventListener('DOMContentLoaded', function(){

            var
                options = {
                    preventHide: true,
                    getImageSource: function(obj){
                        return obj.url;
                    },
                    getImageCaption: function(obj){
                        return obj.caption;
                    }
                },
                instance = PhotoSwipe.attach( 
                    [
                        { url: 'cars[0]', caption: 'Image 001'},
                        { url: 'cars[1]', caption: 'Image 002'},
                        { url: 'cars[2]', caption: 'Image 003'},
                    ], 
                    options 
                );

                instance.show(0);

        }, false);

    }(window, window.Code.PhotoSwipe)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T23:30:41.250

我认为现在你可能已经解决了你的问题，但是你的 URL 不应该在冒号之间，应该是这样的：

```
{ url: cars[0], caption: 'Image 001'},
{ url: cars[1], caption: 'Image 002'},
{ url: cars[2], caption: 'Image 003'}, 
```

否则，您所做的是说该 URL 实际上是`cars[x]`它当然永远不会被找到的 URL。

# c - 我可以部分/选择性地内联函数吗？

> ID：10326792
> 
> 赞同：6
> 
> 时间：2012-04-26T03:23:24.040
> 
> 标签：c, inline, c99

```
void run_hot(void) {
    // I am called very often!
    serve();
    // <more code here>
}

void run_cold(void) {
    // I am called only occasionally!
    serve();
    // <more code here>
}

???inline??? void serve(void) {
    // I only want to be called inline from hot functions!
    // <more code here>
} 
```

有没有办法在函数*B中显式内联函数**A而在函数**C*中显式*不*内联相同的函数 A ？还是我完全受制于编译器？

 **** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T03:24:35.543

您完全受内联编译器的支配。
撇开一部分不谈，`inline`函数是否完全由编译器做出最好的决定，你应该依靠它来做出最好的决定。***

# php - 在调整大小时查找屏幕分辨率

> ID：10326796
> 
> 赞同：0
> 
> 时间：2012-04-26T03:24:02.843
> 
> 标签：php, javascript, resize, resolution

这几天一直在纠结这个问题，希望大家帮忙。

加载页面时，我需要找出浏览器的大小。

我正在用 PHP 和 javascript 编写一个 PHP 页面。该页面以以下代码开头：

```
if ( empty($_GET['w']) ) {
    echo '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
            <html xmlns="http://www.w3.org/1999/xhtml">
            <body>
                <script type="text/javascript">
                    var winW = 630, winH = 460;
                    if (document.body && document.body.offsetWidth) {
                     winW = document.body.offsetWidth;
                     winH = document.body.offsetHeight;
                    }
                    if (document.compatMode=="CSS1Compat" &&
                        document.documentElement &&
                        document.documentElement.offsetWidth ) {
                     winW = document.documentElement.offsetWidth;
                     winH = document.documentElement.offsetHeight;
                    }
                    if (window.innerWidth && window.innerHeight) {
                     winW = window.innerWidth;
                     winH = window.innerHeight;
                    }
                    location.replace("'.$_SERVER['PHP_SELF'].'?w=" + winW + "&h=" + winH );
                </script>
            </body>
          </html>';
} else {
    $w = $_GET['w'];
    $h = $_GET['h'];
// my main page goes here
} 
```

这段代码基本上获得了分辨率，然后使用 url 查询中发送的宽度和高度重新加载页面，以便 PHP 可以使用这些值。

问题是：当用户调整他/她的窗口大小然后重新加载页面时，发送的值是旧值（因为它们仍在 URL 查询中）。

每次加载或重新加载页面时，如何找到新的宽度和高度值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:28:11.497

使用 Jquery。大致这样的事情应该可以工作。将 .resize 处理程序附加到窗口。

```
$(document).ready(function(){
  echoWindowDimensions();

  $(window).resize(function(){
      echoWindowDimensions();
  });
});

function echoWindowDimensions {
   var h = $(window).height();
   var w = $(window).width();
   alert('height'+h+'   width'+w);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T03:56:08.593

如何使用 jQuery，轮询脚本，将通过 GET 接收的值作为 json 返回。当屏幕被调整大小而无需用户交互时，它将更新为任何值！

在我的示例中，它只是更新了段落，但您也可以对这些值做一些事情。（少写多做；p）

```
<?php
if(isset($_GET['width']) && $_GET['height']){
$size = array('width'=>intval($_GET['width']),'height'=>intval($_GET['height'])); 
echo json_encode($size);
die;
}
?>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
function poll(){
   setTimeout(function(){

      $.ajax({ url: "http://localhost/screensize.php?width="+ $(window).width() +"&height="+ $(window).height() +"",cache: false,
      success: function(data){
      //Do something with returned json
      $("#screensize").replaceWith("<p id=\"screensize\">Width:"+ data.width +"px Height:"+ data.height +"px</p>");
        //Next poll
        poll();
      }, dataType: "json"});
     // 1/2 a sec
  }, 500);
}

$(document).ready(function(){
    poll();
});
</script>

<p id="screensize">Updating...</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T03:56:33.430

你的这段代码的问题是，如果 w 和 h 作为 url 参数存在，它绝对什么都不做。如果您查看源代码，它将是空白的。

您应该做的是检查 url 参数是否与窗口当前具有的实际值匹配，然后继续执行您计划执行的任何操作。

```
<?php

$w = 0;
$h = 0;
if (isset($_GET['w'])) {
    $w = $_GET['w'];
}
if (isset($_GET['h'])) {
    $h = $_GET['h'];
}

 echo '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">
        <body>
            <script type="text/javascript">
                window.onload = function(event) {
                    var winW = 630, winH = 460;
                    if (document.body && document.body.offsetWidth) {
                     winW = document.body.offsetWidth;
                     winH = document.body.offsetHeight;
                    }
                    if (document.compatMode=="CSS1Compat" &&
                        document.documentElement &&
                        document.documentElement.offsetWidth ) {
                     winW = document.documentElement.offsetWidth;
                     winH = document.documentElement.offsetHeight;
                    }
                    if (window.innerWidth && window.innerHeight) {
                     winW = window.innerWidth;
                     winH = window.innerHeight;
                    }

                    if (winW=='.$w.' && winH=='.$h.') {
                        document.write("Yay, victory!");
                    } else {
                        location.replace("'.$_SERVER['PHP_SELF'].'?w=" + winW + "&h=" + winH );
                    }
                }
            </script>
        </body>
      </html>';
// my main page goes here

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T03:29:38.800

我不是 100% 确定，但你不能阻止页面从开始通过用户交互重新加载。但是您可以收听页面卸载事件，以便您可以做您需要做的事情。

# git - git 暂存区如何存储文件？

> ID：10326797
> 
> 赞同：10
> 
> 时间：2012-04-26T03:24:03.507
> 
> 标签：git

我想了解将文件移动到“暂存”状态时 Git 实际存储的内容。

**考虑以下顺序：**

一个新文件被添加并提交到本地存储库：

```
touch file.txt
git add file.txt
git commit 
```

我对文件进行了更改：

```
echo text1 > file.txt
git add file.txt 
```

然后我在提交之前再次编辑文件：

```
echo text2 > file.txt 
```

一个 git 状态显示：

```
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   file.txt
#
# Changed but not updated:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   file.txt
# 
```

然后我提交文件：

```
git commit file.txt 
```

git 如何在不被告知的情况下处理对*file.txt的新的第二次更新？*“状态”输出看起来好像它会尝试签入第一个修订版，但保留未暂存的更改而不签入它们。

在这种情况下是否有一个隐含的阶段？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T04:58:45.857

将 Git 视为两件事 - 提交（文件的快照）和标签（分支等）。

Git 实际上是在您创建提交时`git add`，而不是在您创建提交时`git commit`。因此，当您`git add`在更改的文件上执行时，它会使用这些更改创建一个提交，并将“暂存”标签分配给该特定提交。

当您在执行之前再次更改文件时`git commit`，它现在具有“暂存提交”（`git commit`尚未对其执行），并且对文件的新更改既未添加也未提交。这`git status`就是能够向你们展示的方式。

当您时`git commit`，它实际上是将您当前的分支标签移动到该特定提交（并删除“暂存”标签），因此该提交不再标记为“暂存”而是“主”（或您当前所在的任何分支） .

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T04:28:43.407

`git commit <somefiles>`相当于`git add <somefiles>`后面跟着`git commit`。如果您只是这样做`git commit`，git 将提交所有暂存的更改，但不会提交自您上次暂存相关文件以来所做的编辑。

# javascript - 从客户端将参数传递给 ModalpopupExtender

> ID：10326798
> 
> 赞同：0
> 
> 时间：2012-04-26T03:24:04.140
> 
> 标签：javascript, asp.net, c#-4.0, asp.net-ajax, ajaxcontroltoolkit

我有一个网格视图，其中一列可以指向链接 A 或链接 B。这些链接有 2 种不同的模式弹出窗口。我正在使用 Ajax modalpopupextender。我正在使用 $find(mpid).show() 从客户端启动模式弹出窗口。我想将一些参数传递给模式弹出窗口。如果我在后面执行此代码，我知道它会像我尝试过的那样工作。但是，由于我是从客户端启动模式弹出窗口，如何将参数值传递给模式弹出窗口。请告诉我。

我正在使用以下 - ASP.NET FWv4.0、IIS 7.5、VS2010、IE8。

谢谢询问

# unity-container - Microsoft Unity - 是否可以在运行时更改注册类型？

> ID：10326799
> 
> 赞同：2
> 
> 时间：2012-04-26T03:24:07.320
> 
> 标签：unity-container

我目前正在使用 Unity 和 MOQ 对 WCF 进行单元测试。在应用程序的代码中，我有以下内容：

```
private void MyMethod()
{
.....
.....
    _proxy = new UnityContainer().LoadConfiguration().Resolve<IMyInterface>();
.....
} 
```

在应用程序的 app.config 中，我有以下内容：

```
<container>
  <register type="IMyInterface" mapTo="MyActualObject" />
</container> 
```

在单元测试的 app.config 中，我将其替换为代理的模拟对象实现。

```
<container>
  <register type="IMyInterface" mapTo="MyMockObject" />
</container> 
```

这一切都很好。但是我想进一步做的是对于某些测试，我想用不同的模拟对象实现替换 MyMockObject 。

是否可以在运行时更改注册类型？我曾尝试在运行时修改应用程序配置，但无法检测到更改。

```
 Configuration appConfig = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
 var section = (UnityConfigurationSection)appConfig.GetSection("unity");
 section.Containers[0].Registrations[0].MapToName = "AnotherMockObject";
 appConfig.Save(); 
```

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T04:52:57.263

是的，有可能。

您可以根据需要多次配置 Unity。如果存在冲突，则最近的定义获胜。

在您的情况下，如果您想进行运行时更改，请使用 fluent API 而不是配置文件。尝试这样的事情：

```
IUnityContainer container = new UnityContainer();
container.LoadConfiguration();
container.RegisterType<IMyInterface, AnotherMockObject>();

// use AnotherMockObject
_proxy = Resolve<IMyInterface>(); 
```

[注册类型和类型映射](http://msdn.microsoft.com/en-us/library/ff660923%28v=pandp.20%29.aspx#registertype_mapping)的文档

# oracle10g - 从列到行的数据转换

> ID：10326801
> 
> 赞同：0
> 
> 时间：2012-04-26T03:24:14.100
> 
> 标签：oracle10g

我有一个记录`DCP_SC_DOT_TBL`，其中有 2 个键`SETID`和`CONTRACTID`. 除此之外，还有 78 列是复选框并包含一个值`Y`或`Blank`。例如：

```
SETID CONTRACTID  1  2   3 ...... 78  
DCPID  00102      Y      Y
DCPID  00192         Y   Y         Y 
```

现在我想删除所有这些列并为每个非空白列创建一个新行以创建一个表，例如，像这样：

```
SETID CONTRACTID Checkbox(New column for all the 78 columns)
DCPID  00102      1
DCPID  00102      3
DCPID  00192      2
DCPID  00192      3
DCPID  00192      78 
```

有人可以建议如何实现这一目标吗？我只想要包含针对`CONTRACTID`s 的一些数据的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:38:31.443

在重新阅读您的帖子时，听起来您只需要一个大型联合查询：

```
Select SetId, ContractId, '1' As ColNum, 
From SomeTable As S1
Where S1.Col1 = 'Y'
Union All
Select SetId, ContractId, '2'
From SomeTable As S1
Where S1.Col2 = 'Y'
Union All
Select SetId, ContractId, '3'
From SomeTable As S1
Where S1.Col3 = 'Y'
...
Union All
Select SetId, ContractId, '78'
From SomeTable As S1
Where S1.Col78 = 'Y' 
```

如果您想从主表中获取其他信息，那么您可以将此结果集加入其中：

```
Select
From SomeTable As S
        Join    (
                Select SetId, ContractId, '1' As ColNum, 
                From SomeTable As S1
                Where S1.Col1 = 'Y'
                Union All
                Select SetId, ContractId, '2'
                From SomeTable As S1
                Where S1.Col2 = 'Y'
                Union All
                Select SetId, ContractId, '3'
                From SomeTable As S1
                Where S1.Col3 = 'Y'
                ...
                Union All
                Select SetId, ContractId, '78'
                From SomeTable As S1
                Where S1.Col78 = 'Y'
                ) As Z
            On Z.SetId = S.SetId
                And Z.ContractId = S.ContractId 
```

# php - 将增量变量号添加到变量

> ID：10326802
> 
> 赞同：0
> 
> 时间：2012-04-26T03:24:32.807
> 
> 标签：php, loops, for-loop

我正在尝试创建一个使用增量/计数创建变量的循环：

```
$names = 4;

for($it=0;$it<$names;$it++){ 
           $NAME{$it}       = $_REQUEST['NAME'.$it.''];
           $SURNAME{$it}    = $_REQUEST['SURNAME'.$it.''];
           $AGE{$it}        = $_REQUEST['AGE'.$it.''];
 } 
```

我的问题是，我没有得到 $NAME0、$NAME1 等，而是得到一个数组（所以 $NAME[0]、$NAME[1] 等等）。

如何使用循环获取 $NAME0、$NAME1、$NAME2、$SURNAME1、$SURNAME2 $SURNAME3、$AGE1、$AGE2、$AGE3 中的所有信息？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T03:27:15.707

您不想要具有相关名称的变量；使用数组要简单得多。在这种情况下，`$NAME0`与 相同，只是您可以用比用`$NAME[0]`做更多的事情。坚持阵列，学会使用；不要重新发明轮子。`$NAME[0]``$NAME0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T03:33:09.667

一般来说，如果`$_REQUEST`没有认真考虑，这对于超全局变量（例如 ）来说是危险的。

但是，对于未充分利用的 PHP 函数来说，这是一个极好的用例[`extract()`](http://php.net/extract)。

如果您要在这种情况下使用它，我强烈建议您使用`EXTR_PREFIX_ALL`标志设置附加参数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T03:29:36.493

我同意其他人关于使用数组的看法，这要好得多，但如果这不是您想要的，请尝试在变量中添加下划线......可能不是“完美”但不会创建数组：

```
$names = 4;

for($it=0;$it<$items;$it++){ 
       $NAME_{$it}       = $_REQUEST['NAME'.$it.''];
       $SURNAME_{$it}    = $_REQUEST['SURNAME'.$it.''];
       $AGE_{$it}        = $_REQUEST['AGE'.$it.''];
} 
```

# tsql - 获取所有值名的 XML 节点查询

> ID：10326805
> 
> 赞同：1
> 
> 时间：2012-04-26T03:25:15.487
> 
> 标签：tsql

我有一个表（Table1），它有一个名为 XMLColoumn 的列，xml 的一部分就像

```
<StudentSubjects>
   <ValueName>Maths</ValueName>
   <ValueName>Science</ValueName>
   <ValueName>History</ValueName>
   <ValueName>Calculus</ValueName>
</StudentSubjects> 
```

我的表是 (Table1) 之类的

```
StudentNo   XMLColoumn(textfile)
 112           (above XML)
 1445          (same structure as above XML) 
```

我正在尝试将输出作为

```
StudentNo     Subjects
112           Maths
112           Science
112           History
112           Calculus 
```

到目前为止我的发现是

```
SELECT
     convert(XML,CAST(XMLCOLOUMN AS nvarchar(max)).value('(//StudentSubjects/ValueName/text())[1]','nvarchar(max)'),StudentNo from Table1 
```

它只返回第一行，即数学......我怎样才能得到所有的`<ValueName>?` 请让我知道我尝试了很多寻找......但不能。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:34:44.983

您需要使用[`nodes()`](http://msdn.microsoft.com/en-us/library/ms188282.aspx)将 XML 分解为行。

```
select StudentNo,
       N.value('.', 'nvarchar(max)') as Subjects
from Table1
  cross apply XMLColumn.nodes('/StudentSubjects/ValueName') as X(N) 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/67874)

# c# - c# 字符串混淆

> ID：10326809
> 
> 赞同：-4
> 
> 时间：2012-04-26T03:25:30.933
> 
> 标签：c#, string

我对 C# 还很陌生，对某些事情感到困惑.....

让我告诉你发生了什么，希望你们能告诉我我在这里做错了什么。

```
string incomming = Encoding.UTF8.GetString(bytes);
//MessageBox.Show(incomming); shows me the string "stop", No problem

executeCommand(incomming);

public void executeCommand(string action)
{
    MessageBox.Show(action + " was recieved"); // shows the string "stop", No  problem here... that works

    switch (action)
    { 
        case "start":
            MessageBox.Show("start was recieved"); //shows nothing
            break;

        case "stop":
             MessageBox.Show("stop was recieved"); //shows nothing
             break;
    }            
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:54:58.863

在不知道要转换为字符串的 Byte 数组的内容的情况下，很难为您提供任何帮助。但这里有几件事可以尝试。

1.  `executeCommand(incomming)`您可以在监视窗口类型中放置断点`incomming.ToCharArray()`，您需要单击值列中的绿色圆圈，然后才能看到字符串之外的字符。这应该让你知道你正在处理什么。 ![](../Images/a30c243953f71336e724a4d731247551.png)

2.  您可以使用[String.Contains](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)方法在传入的字符串中搜索您要查找的字符串的匹配项。

* * *

```
if (action.Contains("stop"))
    MessageBox.Show("stop was recieved");
else if (action.Contains("start"))
    MessageBox.Show("start was recieved"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:59:36.037

对此唯一合理的解释是，您的“停止”字符串中有一个字母与英语不同，但看起来相同。在这种情况下：

```
"stop" != "stоp" 
```

是真的;

# delphi - 随机 Indy ResponseCode = -1 / EIdSocketError 套接字错误 #0 异常

> ID：10326810
> 
> 赞同：4
> 
> 时间：2012-04-26T03:25:33.310
> 
> 标签：delphi, upload, delphi-2010, indy

我有一个 delphi 代码，它基本上使用**Indy 10.4.704将文件上传到远程****安全**服务器：

 **```
 IdHTTP                 := TIdHTTP.Create(nil);
 try
    TheCompressor       := TIdCompressorZLib.Create(nil);
    TheSSL              := TIdSSLIOHandlerSocketOpenSSL.Create(nil);

    with IdHTTP do
    begin
         HTTPOptions     := [hoForceEncodeParams];
         AllowCookies    := True;
         HandleRedirects := True;
         ProtocolVersion := pv1_1;

         IOHandler       := TheSSL;
         Compressor      := TheCompressor;
    end;    // with

    // Get upload resume offset
    try
       IdHttp.Head('https://www.domain.com/my-file.bin');
       if (IdHttp.Response.ResponseCode <> 404) And (IdHttp.Response.ContentLength >= 0) then
          StartPos   := IdHttp.Response.ContentLength
       else
           StartPos  := 0;
    except
          StartPos   := 0;
    end;    // try/except

    // Upload File
    TheFile          := TFileStream.Create(FileName, fmOpenRead OR fmShareDenyWrite);
    RangeStream      := TIdHTTPRangeStream.Create(TheFile, StartPos, -1, True);
    try
       if (RangeStream.ResponseCode = 206) then
          IdHTTP.Post(https://www.domain.com/upload.php', RangeStream);
    finally
           RangeStream.Free;
    end;    // try/finally
 finally
        FreeAndNil(IdHTTP);
 end;    // try/finally 
```

问题是**有时**代码会因 Indy 抛出**EIdSocketError Socket Error # 0**异常而失败（**idHTTP.ResponseCode**为 -1）

考虑到我糟糕的互联网连接，我启动了一个 EC2 windows 实例并在上面测试了我的代码（windows 实例在云上运行，所以我认为连接*不是*问题），但我遇到了同样的问题！

错误似乎是随机的，有时上传有效，有时没有。我用 TidLogFile 调试，我能找到的都是这样的：

```
Stat Connected.
Sent 4/26/2012 4:18:42: POST /app/upload.php...
Sent 4/26/2012 4:18:42: <uploaded_file_data_here>
Stat Disconnected. 
```

任何人都知道是什么导致了这个/如何解决这个问题？

**编辑**

我[将异常追溯到 TIdSSLIOHandlerSocketOpenSSL](http://derp.co.uk/02511)。我google了很多，看来这不是SSL错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T23:49:51.877

请升级到最新的 Indy 10 版本，即**10.5.8 r4743**。与错误代码 0 相关的 SSL 问题已在一年前得到修复。**

# panel - 单击按钮时显示和隐藏面板

> ID：10326820
> 
> 赞同：0
> 
> 时间：2012-04-26T03:27:08.890
> 
> 标签：panel, show-hide, sencha-touch-2

![在此处输入图像描述](../Images/1ee3d2a52c467eb7e82274d26556cba5.png)

如图所示，我有一个“隐藏”按钮。单击“隐藏”按钮时，我希望隐藏左侧面板，而右侧面板覆盖 100% 的屏幕。这样做时，“隐藏”按钮将更改以显示面板返回到其原始位置的位置。

为了做同样的事情

```
xtype:'toolbar',
            docked:'top',
            items:[
                {
                    cls:'hide',
                    xtype:'button',
                    text:"Hide",
                    iconMask:true,
                    ui:'back',
                    id:'hide',
                    handler:function () {

                        var viewWidth = Ext.Viewport.getWindowWidth();
                        alert(viewWidth);
                        desiredWidth = Math.min(viewWidth, 400) - 10;
                        Ext.fly('protocol').setStyle('width', desiredWidth); ;

                    }
                }, 
```

我尝试使用上面的代码动态更改面板的宽度，但 Ext.fly 似乎不起作用。有什么办法可以解决这个问题？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:38:56.293

Ext.getCmp('workItemPanel').hide();

对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T03:36:11.810

左侧面板的亮点将不胜感激。

但是，仅查看您的图像，我就在这里做出假设。如果您要隐藏的只是包含以下内容的左侧面板

![我对左面板的假设](../Images/b2d6d3279e4c8d7c0b708ceb9d0843e1.png)

那么也许，您可以做的是在例如“DIV”html标签中声明LEFT和RIGHT面板之后执行jQuery切换。请参阅下面的链接。

[用于切换的 jQuery API](http://api.jquery.com/toggle/)

此外，如果您使用 Javascript 库或工具来构建它，那么您可能想要获取 Javascript 的源代码并深入研究它。

根据我的经验，自己编写 Javascript 函数比使用现成的东西要容易得多。

# c++ - 引用是否认为是 C++ 中的指针

> ID：10326831
> 
> 赞同：1
> 
> 时间：2012-04-26T03:29:17.990
> 
> 标签：c++, pointers, reference

引用是否认为是 c++ 中的指针？

```
int &x = y; 
```

x 在内存中有空间吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T03:38:19.117

依赖于实现而不由标准指定。编译器可能把`int &x`它当作一个指针，并在堆栈上为它腾出空间；它可能会挂在 CPU 寄存器中（因此不需要堆栈空间）；它可能会意识到它是现有对象的不同名称，并在运行时将两者混为一谈。

这里有几种情况作为示例，说明编译器如何根据引用的使用方式来做不同的事情。

在如下函数中：

```
int foo( int x ) 
{
   int &y = x;
   y += 2;
   return y + x;
} 
```

像 MSVC 这样的编译器会简单地将 y 视为 x 的别名——同一变量的不同名称——并在编译期间悄悄地将所有提及的*y*替换为*x 。*因此，该函数实际上将被编译，就好像它是

```
int foo( int x ) 
{
   x += 2;
   return x + x;
} 
```

但是，如果您使用引用作为参数

```
int foo( int &x )
{
   x += 2; 
   return x;
} 
```

然后*x*在内部实现为指针，并[像任何其他参数一样传递到堆栈上的函数中](http://en.wikipedia.org/wiki/X86_calling_conventions#cdecl)。编译器将其视为：

```
int foo( int *x )
{
   (*x) += 2; 
   return *x;
} 
```

关键是您问题的答案不仅取决于您使用的编译器，还取决于您正在编写的特定代码。标准没有以任何方式指定它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T03:31:33.107

将引用实现为引擎盖下的指针是很常见的。Itanium C++ ABI 为参数指定指针：

> **3.1.2 参考参数**
> 
> 引用参数通过传递指向实际参数的指针来处理。

是的，引用使用了一些内存。如果它的实现实际上是一个指针，那么它将是指针大小的。如何实现引用是实现定义的。

**编辑**

正如 Jesse Good 从标准中引用的那样，未指定参考是否需要存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T03:34:16.670

*将引用作为函数参数传递可能通过传递指针来工作*。*像在您的示例中一样，声明对同一范围内现有变量的引用可能只会使两个名称都引用内存中的同一位置。但这取决于实现；不同的编译器可能会做不同的事情。*

# python - 使用 Python 压缩 PDF

> ID：10326836
> 
> 赞同：15
> 
> 时间：2012-04-26T03:29:52.600
> 
> 标签：python

所以我在一个文件夹中有大量的 pdf，我想递归地（使用 os.path.walk）缩小它们。我看到 adobe pro 有一个缩小尺寸的保存。我能用这个吗/你建议我怎么做。

注意：是的，我希望它们保留为 pdf，因为我发现这是最常用和安装的文件查看器。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-08-12T22:37:06.087

从[项目的 GitHub 页面](https://github.com/pts/pdfsizeopt/commits/master)获取 pdfsizeopt，它是用 Python 编写的：

> pdfsizeopt 是一个将大 PDF 文件转换为小文件的程序。更具体地说，pdfsizeopt 是一个免费的跨平台命令行应用程序（适用于 Linux、Mac OS X、Windows 和 Unix）和优化 PDF 文件大小的最佳实践集合，重点关注从 TeX 和 LaTeX 创建的 PDF文件。pdfsizeopt 是用 Python 编写的……”

您可能可以轻松地根据您的特定需求进行调整。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-08-03T16:38:37.043

意识到这是一个老问题。以为我会建议使用 pdfsizeopt 的替代方案，因为我在使用 PDF 格式的地图时遇到了质量损失。[PDFTron](https://www.pdftron.com/)提供了一套全面的功能。这是从[他们的网页](https://www.pdftron.com/documentation/samples/py/OptimizerTest)修改的片段（参见“示例 1”）：

```
import site
site.addsitedir(r"...pathToPDFTron\PDFNetWrappersWin32\PDFNetC\Lib")

from PDFNetPython import PDFDoc, Optimizer, SDFDoc

doc = PDFDoc(inPDF_Path)
doc.InitSecurityHandler()
Optimizer.Optimize(doc)
doc.Save(outPDF_Path, SDFDoc.e_linearized)
doc.Close() 
```

# jquery - :not 选择器不工作，删除类不离开......？

> ID：10326839
> 
> 赞同：0
> 
> 时间：2012-04-26T03:31:17.420
> 
> 标签：jquery, jquery-selectors, hover

我遗漏了图像，但功能在那里。我试图：

1.  单击 li 后，应用一些类并附加一个单词。（这有效）
2.  禁用当前选定项目的悬停效果。（不工作）
3.  当点击不同的 li 时，恢复到 base 然后使用新选择的 li 执行步骤 1 和 2。

我有时会做一些这样的工作。通过 Firebug，所有的类都被添加了，但我不能选择多个类的正确方法。

[http://jsfiddle.net/thumbslinger/HbezN/3/](http://jsfiddle.net/thumbslinger/HbezN/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T03:39:13.610

像这样的东西？[http://jsfiddle.net/HbezN/11/](http://jsfiddle.net/HbezN/11/)

一些技巧：

*   不要使用 jQuery 代替 CSS。使用 CSS 代替 CSS。
*   轻松使用类名。稍后你会感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T03:42:55.770

[http://jsfiddle.net/HbezN/13/](http://jsfiddle.net/HbezN/13/) 您需要在删除类之前删除添加的`span`内容。`li``current`

# ios - Prime 失败（“不”）；将停止（1/5925 帧）

> ID：10326846
> 
> 赞同：3
> 
> 时间：2012-04-26T03:32:16.870
> 
> 标签：ios, audioqueue

启动后audioqueue工作正常，可以播放音频，但是当我手动更改播放器进度时，AudioQueuePrime会失败，输出Prime failed（'nope'）；将停止（1/5925 帧），返回的错误代码为 1852797029，但下一个 AudioQueueStart 将成功，因此播放器将工作，然后有时只是 AudioQueuePrime 失败。所以为什么？

# jquery - 使用 Jquery 图像轮播的不需要的弹跳图像

> ID：10326847
> 
> 赞同：0
> 
> 时间：2012-04-26T03:32:37.437
> 
> 标签：jquery, image

请看这个小提琴并点击“减少”：

[http://jsfiddle.net/2C8fy/16/](http://jsfiddle.net/2C8fy/16/)

如您所见，图像向右反弹。增加功能按钮完全可以正常工作。我知道问题出在这个函数上，我用注释特别指出了它：

```
 function slide_img_right() {

    var imgs = imgArr.length;
    a--;
    if (a < 0) {
        a = imgs - 1;
    }

    b = a - 1;
    c = a + 1;

    if (b < 0) {
        b = imgs - 1;
    }
    if (c >= imgs) {
        c = 0;
    }

    var left = $('#left_slot');
    var middle = $('#middle_slot');
    var right = $('#right_slot');
    var newImgSR = imgArr[a].clone();

    $('#basic_div').animate({
        left: '+=40px'      // This part is causing the bounce
    }, 300, function() {

    });

    left.attr('id', 'middle_slot');
    middle.attr('id', 'right_slot');

    (newImgSR).insertBefore("#middle_slot");
    newImgSR.attr('id', 'left_slot');
    newImgSR.css('opacity','0');
    newImgSR.fadeTo(300, 1);

    right.animate({
        opacity: 0
    }, 300, function() {
        right.remove();
        $('#basic_div').css({
            left: '0px'               //This part is causing the bounce back.
        });
    });
} 
```

我只是不知道如何解决它。我试过改变宽度而不是左边，我也试过改变函数中发生的事情的顺序，但是我能做些什么来让那个东西像增加按钮一样只在相反的方向工作呢？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:02:41.947

```
$('#basic_div').css("left","-40px"); //Add this line here.

        $('#basic_div').animate({
            left: '+=40px'      // This part is causing the bounce
        }, 300, function() {

        }); 
```

查看更新的小提琴：http: [//jsfiddle.net/2C8fy/19/](http://jsfiddle.net/2C8fy/19/)

看看*为什么*看看：

[http://jsfiddle.net/2C8fy/20/](http://jsfiddle.net/2C8fy/20/)在这里，您可以看到，为了将该图像滑动到视图中，它必须位于您当前的查看区域之外。

# r - 为什么 lm 内存不足而矩阵乘法适用于系数？

> ID：10326853
> 
> 赞同：11
> 
> 时间：2012-04-26T03:33:27.420
> 
> 标签：r, memory, regression, linear-regression, lm

我正在尝试使用 R 进行固定效应线性回归。我的数据看起来像

```
dte   yr   id   v1   v2
  .    .    .    .    .
  .    .    .    .    .
  .    .    .    .    . 
```

然后我决定通过制作`yr`一个因素来简单地做到这一点并使用`lm`：

```
lm(v1 ~ factor(yr) + v2 - 1, data = df) 
```

但是，这似乎内存不足。我的因子中有 20 个级别，`df`有 1400 万行，大约需要 2GB 来存储，我在一台有 22GB 专用于这个过程的机器上运行它。

然后我决定尝试老式的方法：为我的每一年创建虚拟变量，方法`t1`是`t20`：

```
df$t1 <- 1*(df$yr==1)
df$t2 <- 1*(df$yr==2)
df$t3 <- 1*(df$yr==3)
... 
```

并简单地计算：

```
solve(crossprod(x), crossprod(x,y)) 
```

这运行没有问题，并且几乎立即产生答案。

我特别好奇，当我可以很好地计算系数时，lm 是什么导致内存不足？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T08:12:39.867

除了 idris 所说的之外，还值得指出的是 lm() 不会像您在问题中说明的那样使用正规方程来求解参数，而是使用 QR 分解，这种分解效率较低，但往往会产生更准确的数值解决方案。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-09-04T17:43:49.643

到目前为止，没有一个答案指向正确的方向。

[@idr](https://stackoverflow.com/users/717636/idr)接受的答案是混淆`lm`和`summary.lm`。**`lm`根本不计算诊断统计**；相反，`summary.lm`确实如此。所以他在说`summary.lm`。

[@Jake](https://stackoverflow.com/users/892657/jake-westfall)的答案是关于 QR 分解和 LU / Choleksy 分解的数值稳定性的事实。[Aravindakshan](https://stackoverflow.com/users/1593932/aravindakshan-babu)的回答扩展了这一点，指出了两个操作背后的浮点运算量（尽管正如他所说，他没有计入计算矩阵叉积的成本）。但是，不要将 FLOP 计数与内存成本混淆。实际上这两种方法在 LINPACK / LAPACK 中的内存使用情况相同。具体来说，他认为 QR 方法需要更多 RAM 来存储`Q`因子的论点是虚假的。lm()中解释的压缩存储[：什么是 LINPACK / LAPACK 中的 QR 分解返回的 qraux](https://stackoverflow.com/q/38741127/4891738)阐明了如何计算和存储 QR 分解。QR vs Chol的速度问题在我的回答中有详细说明：[为什么内置的 lm 函数在 R 中这么慢？](https://stackoverflow.com/q/36571864/4891738)，而我对[faster`lm`](https://stackoverflow.com/a/38604244/4891738)的回答提供了一个使用Choleksy方法的小程序`lm.chol`，比QR方法快3倍。

[@Greg](https://stackoverflow.com/users/430909/greg-snow)的回答/建议`biglm`很好，但它没有回答问题。既然`biglm`提到了，我会指出[QR 分解在`lm`和`biglm`](https://stackoverflow.com/q/13248960/4891738)中不同。`biglm`计算户主反射，使所得`R`因子具有正对角线。有关详细信息，请参阅[通过 QR 分解的 Cholesky 因子](https://scicomp.stackexchange.com/q/1101)。这样做的原因`biglm`是，结果`R`将与 Cholesky 因子相同，有关信息，请参阅[R 中的 QR 分解和 Choleski 分解](https://stackoverflow.com/q/19536933/4891738)。此外，除了`biglm`，您还可以使用`mgcv`. 阅读我的答案：[`biglm`预测无法分配大小为 xx.x MB 的向量以](https://stackoverflow.com/q/38151057/4891738)获得更多信息。

* * *

**总结之后，是时候发布我的答案了**。

为了拟合线性模型，`lm`将

1.  生成模型框架；
2.  生成模型矩阵；
3.  要求`lm.fit`QR 分解；
4.  返回 QR 分解的结果以及`lmObject`.

您说您的 5 列输入数据框需要 2 GB 的存储空间。对于 20 个因子级别，生成的模型矩阵有大约 25 列，占用 10 GB 存储空间。现在让我们看看调用`lm`.

*   **[全局环境]**最初您有 2 GB 的数据框存储空间；
*   **[`lm`环境]**然后将其复制到模型框架中，花费2 GB；
*   **[`lm`环境]**然后生成模型矩阵，消耗10GB；
*   **[`lm.fit`环境]**复制模型矩阵，然后通过 QR 分解覆盖，花费 10 GB；
*   **[`lm`环境]**返回结果`lm.fit`，消耗10GB；
*   **[全局环境]**的结果由`lm.fit`进一步返回`lm`，额外消耗 10 GB；
*   **[全局环境]**模型框架由`lm`, 消耗 2 GB 返回。

因此，总共需要 46 GB RAM，远远大于可用的 22 GB RAM。

实际上，如果`lm.fit`可以“内联”到`lm`中，我们可以节省 20 GB 的成本。但是没有办法在另一个 R 函数中内联一个 R 函数。

也许我们可以举一个小例子来看看周围发生了什么`lm.fit`：

```
X <- matrix(rnorm(30), 10, 3)    # a `10 * 3` model matrix
y <- rnorm(10)    ## response vector

tracemem(X)
# [1] "<0xa5e5ed0>"

qrfit <- lm.fit(X, y)
# tracemem[0xa5e5ed0 -> 0xa1fba88]: lm.fit 
```

所以确实，`X`在传递到`lm.fit`. 让我们看看有`qrfit`什么

```
str(qrfit)
#List of 8
# $ coefficients : Named num [1:3] 0.164 0.716 -0.912
#  ..- attr(*, "names")= chr [1:3] "x1" "x2" "x3"
# $ residuals    : num [1:10] 0.4 -0.251 0.8 -0.966 -0.186 ...
# $ effects      : Named num [1:10] -1.172 0.169 1.421 -1.307 -0.432 ...
#  ..- attr(*, "names")= chr [1:10] "x1" "x2" "x3" "" ...
# $ rank         : int 3
# $ fitted.values: num [1:10] -0.466 -0.449 -0.262 -1.236 0.578 ...
# $ assign       : NULL
# $ qr           :List of 5
#  ..$ qr   : num [1:10, 1:3] -1.838 -0.23 0.204 -0.199 0.647 ...
#  ..$ qraux: num [1:3] 1.13 1.12 1.4
#  ..$ pivot: int [1:3] 1 2 3
#  ..$ tol  : num 1e-07
#  ..$ rank : int 3
#  ..- attr(*, "class")= chr "qr"
# $ df.residual  : int 7 
```

请注意，紧凑的 QR 矩阵`qrfit$qr$qr`与模型矩阵一样大`X`。它是在内部创建`lm.fit`的，但在退出时`lm.fit`，它会被复制。所以总的来说，我们将有 3 个“副本” `X`：

*   全球环境中的原始版本；
*   复制到`lm.fit`中的那个，被 QR 分解覆盖；
*   返回的那个`lm.fit`。

在您的情况下，`X`是 10 GB，因此单独相关的内存成本`lm.fit`已经是 30 GB。更不用说与`lm`.

* * *

另一方面，让我们看看

```
solve(crossprod(X), crossprod(X,y)) 
```

`X`占用 10 GB，但`crossprod(X)`只是一个`25 * 25`矩阵，并且`crossprod(X,y)`只是一个长度为 25 的向量。与 相比，它们是如此之小`X`，因此内存使用量根本不会增加。

也许您担心调用`X`时会制作本地副本`crossprod`？一点也不！与`lm.fit`执行 read 和 write to不同`X`，`crossprod`只执行 reads `X`，因此不进行复制。我们可以通过我们的玩具矩阵验证这一点`X`：

```
tracemem(X)
crossprod(X) 
```

您将看不到复制消息！

* * *

**如果您想要以上所有内容的简短摘要，请点击此处：**

*   `lm.fit(X, y)`（甚至）的内存成本`.lm.fit(X, y)`是 的三倍`solve(crossprod(X), crossprod(X,y))`；
*   根据模型矩阵比模型框架大多少，内存成本`lm`是 的 3 ~ 6 倍`solve(crossprod(X), crossprod(X,y))`。永远不会达到下限 3，而当模型矩阵与模型框架相同时，会达到上限 6。当没有因子变量或“类似因子”的术语（如`bs()`和`poly()`等）时就是这种情况。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-26T13:33:08.433

您可能需要考虑使用[biglm](https://cran.r-project.org/package=biglm)包。它通过使用较小的数据块来拟合 lm 模型。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-26T04:48:23.020

`lm`不仅仅是找到输入特征的系数。例如，它提供了诊断统计数据，可以告诉您更多关于自变量系数的信息，包括每个自变量的标准误差和 t 值。

我认为在运行回归以了解回归的有效性时，了解这些诊断统计数据非常重要。

这些额外的计算导致`lm`比简单地为回归求解矩阵方程要慢。

例如，使用`mtcars`数据集：

```
>data(mtcars)
>lm_cars <- lm(mpg~., data=mtcars)
>summary(lm_cars)

Call:                                                         
lm(formula = mpg ~ ., data = mtcars)                          

Residuals:                                                    
    Min      1Q  Median      3Q     Max                       
-3.4506 -1.6044 -0.1196  1.2193  4.6271                       

Coefficients:                                                 
            Estimate Std. Error t value Pr(>|t|)              
(Intercept) 12.30337   18.71788   0.657   0.5181              
cyl         -0.11144    1.04502  -0.107   0.9161              
disp         0.01334    0.01786   0.747   0.4635              
hp          -0.02148    0.02177  -0.987   0.3350              
drat         0.78711    1.63537   0.481   0.6353              
wt          -3.71530    1.89441  -1.961   0.0633 .            
qsec         0.82104    0.73084   1.123   0.2739              
vs           0.31776    2.10451   0.151   0.8814              
am           2.52023    2.05665   1.225   0.2340              
gear         0.65541    1.49326   0.439   0.6652              
carb        -0.19942    0.82875  -0.241   0.8122              
---                                                           
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Residual standard error: 2.65 on 21 degrees of freedom        
Multiple R-squared: 0.869,      Adjusted R-squared: 0.8066    
F-statistic: 13.93 on 10 and 21 DF,  p-value: 3.793e-07 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-12T19:58:21.487

详细说明杰克的观点。假设您的回归试图解决：（`y = Ax`A 是设计矩阵）。具有 m 个观察值和 n 个自变量 A 是一个 mxn 矩阵。那么 QR 的成本是 ~ `m*n^2`。在您的情况下，它看起来像 m = 14x10^6 和 n = 20 。`m*n^2 = 14*10^6*400`一个巨大的成本也是如此。

但是，使用正规方程，您试图反转`A'A`（' 表示转置），它是正方形和大小`nxn`。求解通常使用 LU 完成，其成本为`n^3 = 8000`. 这比 QR 的计算成本要小得多。**当然这不包括矩阵乘法的成本。**

**此外，如果 QR 例程尝试存储大小为`mxm=14^2*10^12`(!) 的 Q 矩阵，那么您的内存将不足。**可以写二维码不出现这个问题。知道实际使用的是什么版本的 QR 会很有趣。以及为什么`lm`调用内存不足。

# php - Salesforce API：->update() 出错，“INVALID_TYPE：必须发送具体实体类型。”

> ID：10326862
> 
> 赞同：3
> 
> 时间：2012-04-26T03:35:06.013
> 
> 标签：php, salesforce

我一直在研究这一点，并根据我对如何更新 SObject 中的记录的理解尝试了许多变体，但我不断收到以下错误：

> SoapFault 异常：[sf:INVALID_TYPE] INVALID_TYPE：必须发送一个具体的实体类型。在 /home/public_html/soapclient/SforceBaseClient.php:509

我能够成功登录到该页面，但是当我执行下面的代码时，我收到了上面列出的错误。

```
 $fieldsToUpdate = array (
        "Name"=>$_POST['Name']
    );

    $sObject = new SObject();
    $sObject->Id = $_POST['prospectID']; // this is the Id of the record
    $sObject->fields = $fieldsToUpdate;
    $sObject->type = 'Prospect__c'; // this is the API name of custom object

    try {
        $response = $mySforceConnection->update($sObject);
    } catch (Exception $e) {
        echo $e;
    } 
```

我正在使用 Force.com 开发人员文档中的 PHP Toolkit 13.0，但无法深入了解此错误。另外，我在沙盒模式下使用 Enterprise WSDL，并分配了正确的 wsdl xml。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:25:02.227

sObject 是可更新的所有其他 Salesforce 对象的基本类型。使用企业 API (SOAP) 时，您需要传递派生自 sObject 的实例。（Lead、Contact 和 Account 是示例）

这里也是[update()](http://www.salesforce.com/us/developer/docs/api/index_Left.htm#StartTopic=Content/sforce_api_calls_update.htm)方法的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-11T21:26:23.657

您需要提供一个对象类型作为第二个 update() 参数。此外，update() 方法的第一个参数必须是您要更新的对象数组：

```
$response = $mySforceConnection->update(array($object), 'Prospect__c'); 
```

此外，您不需要使用工具包提供的任何对象类，一个简单的 StdClass 应该可以工作：

```
$prospect = new StdClass();
$prospect->Id = '006....';
$prospect->Name 'Foobar';
$response = $mySforceConnection->update(array($prospect), 'Prospect__c'); 
```

仅供参考，我从来没有找到一次更新多个对象类型的方法，但是您可以更新一批相同类型的对象，因此第一个参数需要是一个数组。Salesforce 工具包不会自动考虑传递单个对象的人（即它不会为您将其包装在数组中）。我一直在我的应用程序逻辑和 Salesforce 的 SOAP 工具包之间使用一个抽象层，它提供了我刚才描述的便利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T14:23:18.797

如果您使用的是合作伙伴 wsdl

```
 <?php
    // SOAP_CLIENT_BASEDIR - folder that contains the PHP Toolkit and your WSDL
    // $USERNAME - variable that contains your Salesforce.com username (must be in the form of an email)
    // $PASSWORD - variable that contains your Salesforce.com password

    define("SOAP_CLIENT_BASEDIR", "../../soapclient");
    require_once (SOAP_CLIENT_BASEDIR.'/SforcePartnerClient.php');
    require_once ('../userAuth.php');

    try {
      $mySforceConnection = new SforcePartnerClient();
      $mySoapClient = $mySforceConnection->createConnection(SOAP_CLIENT_BASEDIR.'/partner.wsdl.xml');
      $mylogin = $mySforceConnection->login($USERNAME, $PASSWORD);

    /*--------------------------------------------------------\
    | Please manage the values for OBJECT ID from file 
    | userAuth.php
    \--------------------------------------------------------*/

      $fieldsToUpdate = array (
      'FirstName' => 'testupdate',
      'City' => 'testupdateCity',
      'Country' => 'US'
      );
      $sObject1 = new SObject();
      $sObject1->fields = $fieldsToUpdate;
      $sObject1->type = 'Lead';
      $sObject1->Id = $UPDATEOBJECTID1;

      $fieldsToUpdate = array (
      'FirstName' => 'testupdate',
      'City' => 'testupdate',
      'State' => 'testupdate',
      'Country' => 'US'
      );
      $sObject2 = new SObject();
      $sObject2->fields = $fieldsToUpdate;
      $sObject2->type = 'Lead';
      $sObject2->Id = $UPDATEOBJECTID2;
      $sObject2->fieldsToNull = array('Fax', 'Email');

      $response = $mySforceConnection->update(array ($sObject1, $sObject2));

      print_r($response);

    } catch (Exception $e) {
      print_r($mySforceConnection->getLastRequest());
      echo $e->faultstring;
    }
?> 
```

其他企业 wsdl 使用

```
<?php
// SOAP_CLIENT_BASEDIR - folder that contains the PHP Toolkit and your WSDL
// $USERNAME - variable that contains your Salesforce.com username (must be in the form of an email)
// $PASSWORD - variable that contains your Salesforce.com password

define("SOAP_CLIENT_BASEDIR", "../../soapclient");
require_once (SOAP_CLIENT_BASEDIR.'/SforceEnterpriseClient.php');
require_once ('../userAuth.php');

try {
  $mySforceConnection = new SforceEnterpriseClient();
  $mySoapClient = $mySforceConnection->createConnection(SOAP_CLIENT_BASEDIR.'/enterprise.wsdl.xml');
  $mylogin = $mySforceConnection->login($USERNAME, $PASSWORD);

/*--------------------------------------------------------\
| Please manage the values for OBJECT ID from file 
| userAuth.php
\--------------------------------------------------------*/

  $sObject1 = new stdclass();
  $sObject1->Id = $UPDATEOBJECTID1;
  $sObject1->FirstName = 'testupdate';
  $sObject1->City = 'testupdateCity';
  $sObject1->Country = 'US';

  $sObject2 = new stdclass();
  $sObject2->Id = $UPDATEOBJECTID2;
  $sObject2->FirstName = 'testupdate';
  $sObject2->City = 'testupdate';
  $sObject2->State = 'testupdate';
  $sObject2->Country = 'US';
  $sObject2->fieldsToNull = array('Fax', 'Email');

  $response = $mySforceConnection->update(array ($sObject1, $sObject2), 'Lead');

  print_r($response);

} catch (Exception $e) {
  print_r($mySforceConnection->getLastRequest());
  echo $e->faultstring;
}
?> 
```

# jquery - 简单的展开/折叠 div

> ID：10326864
> 
> 赞同：1
> 
> 时间：2012-04-26T03:35:47.027
> 
> 标签：jquery

我怎样才能让它工作，当点击展开它，当再次点击折叠它...如果它已经展开然后说隐藏，如果它已经折叠然后说显示。

下面是到目前为止的代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Collapsible Message Panels</title>
        <style type="text/css">
        *
        {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 12px;
        }
        #content
        {
            width: 200px;
            height: 100px;
            margin: 20px auto;
            padding: 20px;
            border: 1px dotted #999999;
            overflow: hidden;
            text-align: justify;
        }

    </style>

    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            // Hide the "view" div.
            $('one').hide();
            $('second').hide();
            // Watch for clicks on the "slide" link.
            $('div.slide').click(function () {
                // When clicked, toggle the "view" div.
                $('second').hide();
                $('one').slideToggle(400);
                return false;
            });
            $('div.slide1').click(function () {
                // When clicked, toggle the "view" div.
                $('one').hide();
                $('second').slideToggle(400);
                return false;
            });

        });
    </script>
</head>
<body>

    <div class="slide">
        <a href="#" class="slide">Disclaimer-1</a></div>
    <div class="slide1" >
        &nbsp; &nbsp; | &nbsp; &nbsp; <a href="#" class="slide1">Behavior</a></div>
    <div id="one" class="content">
       As you can see the structure, the elements of the menu are inside the div with class “menu_list”. 

    </div>
    <div id="second" class="content1">
       I’m not a good color chooser so please forgive me for the color combinations. Above CSS code is straight  
    </div>
    <br />
    <br />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T03:45:50.620

嗨，你去吧 man **workingDemo** [http://jsfiddle.net/gVjFs/](http://jsfiddle.net/gVjFs/) **第二个链接在这里** [http://jsfiddle.net/gVjFs/3/](http://jsfiddle.net/gVjFs/3/)（使用 span 而不是 div）

**最后在这里切换文本** [http://jsfiddle.net/KpqvE/](http://jsfiddle.net/KpqvE/)

上面评论中提到的花哨的第二个**演示：http:** [//jsfiddle.net/5TfJy/2/](http://jsfiddle.net/5TfJy/2/)（这个演示只有 2 个选项卡。

最适合你的布鲁夫。代码将清楚地说明遗漏了什么，即`#`ids。

希望这有助于你提到的行为:)

**HTML 使用 span 而不是 div** [http://jsfiddle.net/KpqvE/](http://jsfiddle.net/KpqvE/)

```
<span class="slide">
    <a href="#" class="slide">Disclaimer-1</a></span>
<span class="slide1" >
    &nbsp; &nbsp; | &nbsp; &nbsp; <a href="#" class="slide1">Behavior</a></span>
<div id="one" class="content">
   As you can see the structure, the elements of the menu are inside the div with class “menu_list”. 

</div>
<div id="second" class="content1">
   I’m not a good color chooser so please forgive me for the color combinations. Above CSS code is straight  
</div>
<br />
<br />​ 
```

**jQuery（旧）**

```
 $(document).ready(function () {

        // Hide the "view" div.
        $('#one').hide();
        $('#second').hide();
        // Watch for clicks on the "slide" link.
        $('div.slide').click(function () {
            // When clicked, toggle the "view" div.
            $('#second').hide();
            $('#one').slideToggle(400);
            return false;
        });
        $('div.slide1').click(function () {
            // When clicked, toggle the "view" div.
            $('#one').hide();
            $('#second').slideToggle(400);
            return false;
        });

    });​ 
```

**更新了 Jquery 代码**

```
$(document).ready(function() {

    // Hide the "view" div.
    $('#one').hide();
    $('#second').hide();
    // Watch for clicks on the "slide" link.
    $('span.slide').click(function() {
        // When clicked, toggle the "view" div.
        $('#second').hide();
        $('#one').slideToggle(400, function() {

            if ($(this).is(":visible"))
              $('span.slide > a').text('hide Disc');
            else
              $('span.slide > a').text('Disclaimer-1');

        });
        return false;
    });
    $('span.slide1').click(function() {
        // When clicked, toggle the "view" div.
        $('#one').hide();
        $('#second').slideToggle(400, function() {

            if ($(this).is(":visible"))
              $('span.slide1 > a').text('hide Behavior');
            else
              $('span.slide1 > a').text('Behavior');

        });
        return false;
    });

});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T03:56:11.653

试试这个：[演示](http://jsfiddle.net/HBv2j/)，我想这几乎不会回答你的问题，但至少这会让你知道如何使用`toggle()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T03:41:16.277

jquery 有一个`toggle()`功能，如果可见则隐藏，如果隐藏则显示。

# php - 我需要创建一个不刷新页面的“投票”按钮

> ID：10326866
> 
> 赞同：1
> 
> 时间：2012-04-26T03:36:08.453
> 
> 标签：php, mysql, ajax

嗨，我正在建立一个允许对视频进行投票的视频投票网站。我希望用户能够在不中断视频播放的情况下投票。

这是我正在使用的剪辑。

```
if ($_POST['vote']) {
    $sql = mysql_query("UPDATE videos SET vid_votes=vid_votes+1 WHERE vid_id=$vid_id"); 
}
$votebutton ="<form action='index.php?id=$vid_id' method='post' enctype='multipart/form-data'><input name='vote' type='hidden' id='vote' value='$vid_id'><input type='submit' name='Submit' value='Vote for it!' /></form>"; 
```

我根据登录的选民今天是否已经投票的查询来回应投票或不投票。

此脚本记录投票并将用户返回到他正在观看的视频。如果用户在一天内已经投票，更多的脚本会将其更改为取消投票按钮。但是我主要关心的是如何让这个按钮在不重新启动视频的情况下运行脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T03:59:58.037

我会用 jQuery 来做这件事。您绝对不必*使用*jQuery，但它很好地封装了 AJAX 调用，并使它们以标准方式跨多个平台工作。

首先，您需要加载 jQuery。您可以从 CDN 加载它：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

接下来，在您的 JavaScript 中，只需`.post()`调用您现有的 PHP 脚本：

```
$.post('yourscript.php', 
    {vid_or_whatever: 12345},
    function (data, textStatus, jqXHR) {
        /* Handle the response data here. */
    }
); 
```

您可以在此处找到有关此方法的更多详细信息：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

最后，确保您在服务器端使用 PDO 准备好的查询。这样，您可以避免 SQL 注入漏洞。

# xcode - 在 Xcode 4 中移动了文件位置，无法推送到 Github

> ID：10326874
> 
> 赞同：1
> 
> 时间：2012-04-26T03:37:00.420
> 
> 标签：xcode, git, github

Git新手在这里。使用 Xcode 4.3.2。不得不移动我的项目文件目录。提交仍然可以正常工作，但是当我执行 a 时`git push`，我得到了`Everything up-to-date`，这是不正确的。

我如何回到正轨？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:16:58.883

还要检查您是否处于[DETACHED HEAD 模式](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head)。

如果您签出标签或文件，就会发生这种情况（参见[`git checkout`gotgit 中的插图](http://www.ossxp.com/doc/gotgit-en/#chapter-8-git-checkout)）：

![git结帐](../Images/548079ca4d093cd1be29ad1c8607214d.png)

XCode 问题“ [Xcode 中的 Git (no branch)](https://stackoverflow.com/questions/9071472/git-no-branch-in-xcode) ”就是这种情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:27:20.953

当您移动项目目录时，您是否移动了 .git 文件夹？一个简单的检查方法是运行`git log`并查看您之前的所有提交是否仍然存在。

如果您将 .git 文件夹与其余文件一起移动，那么您的遥控器仍将正确设置。

如果由于某种奇怪的原因确实没有连接，请尝试运行`git remote show origin`并检查以确保 url 正确无误。

# android - android：未找到启动器活动

> ID：10326875
> 
> 赞同：2
> 
> 时间：2012-04-26T03:37:03.773
> 
> 标签：android

我的 AndroidManifest.xml 如下所示：

```
<application android:label="droid VNC server" android:icon="@drawable/icon"
android:name="MainApplication" android:debuggable="true">
<activity android:name=".MainActivity" android:launchMode="singleInstance"
    android:label="@string/app_name" android:icon="@drawable/icon">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
                    <action android:name="org.onaips.vnc.ACTIVITY_UPDATE" />
    </intent-filter> 
</activity>
</application> 
```

我已经设置了以下两行：

为什么我仍然收到错误未找到启动器活动启动只会同步设备上的应用程序包

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T03:40:16.303

你`intent-filter`在 xml 文件中的标签应该是这样的：

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

把它放在`<activity>`标签里，你应该没问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T04:23:41.153

删除线

```
<action android:name="org.onaips.vnc.ACTIVITY_UPDATE" /> 
```

因为有 2 条相似的行，所以通常考虑第 2 行。（歧义）。因此，只需删除该行，您就会在启动器中看到该应用程序！

# java - 异常“java.lang.AbstractMethodError：org.codehaus.groovy.control.CompilationUnit$ClassgenCallback.call(Lorg/objectweb/asm/ClassVisitor;)V”

> ID：10326876
> 
> 赞同：2
> 
> 时间：2012-04-26T03:38:08.617
> 
> 标签：java, swing, jasper-reports, netbeans-7

我正在使用 Jasper Reports 并在我的类路径中使用以下库

```
jasperreports-4.5.1.jar
common-digester3-3.2.jar
common-digester2.1.jar
castor-1.2.jar
commons-beanutils-1.8..0.jar
commons-collections-2.1.1.jar
commons-logging-1.1.1.jar
groovy-1.2.6.jar
asm-3.1.jar
antlr-3.3.1.1.jar
jtds-1.2.5.jar 
```

我得到了以下异常

```
 Exception in thread "AWT-EventQueue-0" java.lang.AbstractMethodError: org.codehaus.groovy.control.CompilationUnit$ClassgenCallback.call(Lorg/objectweb/asm/ClassVisitor;Lorg/codehaus/groovy/ast/ClassNode;)V
at org.codehaus.groovy.control.CompilationUnit$14.call(CompilationUnit.java:776)   org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes                                                                                                                          at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation
    at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations
    at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:501)
    at net.sf.jasperreports.compilers.JRGroovyCompiler.compileUnits
    at net.sf.jasperreports.engine.design.JRAbstractCompiler.compileReport
at net.sf.jasperreports.engine.JasperCompileManager.compileReport)
at Utilities.ReportDriver.runReport(ReportDriver.java:81)
at jewelleryerpapplication.GUI.MainReports.jbtnViewReportActionPerformed
at jewelleryerpapplication.GUI.MainReports.access$100(MainReports.java:18)
at jewelleryerpapplication.GUI.MainReports$2.actionPerformed(MainReports.java:210)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased
 at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2713)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege
at java.security.ProtectionDomain$1.doIntersectionPrivilege
at java.awt.EventQueue$4.run(EventQueue.java:680)
at java.awt.EventQueue$4.run(EventQueue.java:678)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege
at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
at java.awt.EventDispatchThread.pumpOneEventForFilters
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

在执行以下代码时：

JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, param, jdbcConnection); JasperViewer.viewReport(jasperPrint);

我做错了什么？我该如何解决这个问题或进一步调试它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:04:42.267

我有一个类似的错误信息。

它不依赖于 ASM，而是依赖于使用的 groovy 库`groovy-x.x.x.jar`。

**当心**- 您必须使用`groovy-all-x.x.x.jar`才能完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:03:31.410

这与您在此处的其他问题完全相同： [Exception "java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter" on Viewing Jasper Report](https://stackoverflow.com/questions/10326343/exception-java-lang-nosuchmethoderror-org-objectweb-asm-classwriter-on-viewin)

答案是一样的。您需要找到合适的 ASM 版本来满足您对它的所有依赖关系，这也可能涉及更改其他一些库的版本。

# javascript - 如何控制 Web 表单按钮的可用性

> ID：10326879
> 
> 赞同：0
> 
> 时间：2012-04-26T03:38:26.700
> 
> 标签：javascript, webforms

我有一个带有文本字段的网络表单。我想让表单按钮仅在某些条件下可用。填写文本字段时。

下面是我的 javascript 代码，但它没有按预期工作。

我在那里错过了什么？

谢谢你。

```
function validate(input, name) {
    if(name=='name') {
        if(input==null || input=='') {
            document.getElementById('nameDiv').style.visibility='visible';
            document.getElementById('next').disabled='disabled';
        } else {
            document.getElementById('nameDiv').style.visibility='hidden';
            var emailField = document.getElementByID('email').value;
            if(emailField!="" || emailField!=null) {
                document.getElementById('next').disabled='';
            }
        }
    }

    if(name=='email') {
        if(input==null || input=='') {
            document.getElementById('emailDiv').style.visibility='visible';
            document.getElementById('next').disabled='disabled';
        } else {
            document.getElementById('emailDiv').style.visibility='hidden';
            var nameField = document.getElementByID('name').value;
            if(nameField!="" || nameField!=null) {
                document.getElementById('next').disabled='';
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:52:21.503

Try With this...

```
document.getElementById('next').disabled= false;
document.getElementById('next').disabled=true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:42:13.393

尝试更改以下两行

```
if(emailField!="" || emailField!=null) {
if(nameField!="" || nameField!=null) { 
```

喜欢

```
if(emailField!="" && emailField!=null) {
if(nameField!="" && nameField!=null) { 
```

# php - 将大写的html标签转换为小写

> ID：10326880
> 
> 赞同：2
> 
> 时间：2012-04-26T03:38:28.713
> 
> 标签：php, regex

我有以下用小写字母替换大写 HTML 标记。

```
$output = preg_replace("%<(/?[A-Z].*?)>%s",strtolower('$1'),$output); 
```

匹配似乎运行良好（在我的 RegEx 测试站点中），但替换不是。

```
<EM>TEST</EM> becomes EMTEST/EM 
```

希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T03:47:23.253

您正在调用`strtolower`，`"$1"`然后使用结果（又是`$1`一次）来替换。

相反，使用[`preg_replace_callback`](http://php.net/preg-replace-callback)并让回调为：`function($m) {return strtolower($m[0]);}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T03:59:35.067

```
$output = preg_replace("%<(/?[A-Z].*?)>%se", "'<' . strtolower('\\1') . '>'",$output); 
```

**编辑**：忘了提到你不应该*使用*HTML`preg`东西 :) DOMDocument 是一个更好的选择。

# pattern-matching - Opa 匹配模式或

> ID：10326881
> 
> 赞同：3
> 
> 时间：2012-04-26T03:38:34.073
> 
> 标签：pattern-matching, opa

我正在编写我的第一个 Opa 应用程序。我正在尝试为 url 处理设置匹配项。代码如下：

```
function start(url) 
{
    match (url)
    {
        case {path:[] ...}: Resource.page("Home", home())
        case {...}: Resource.page("nofindy", nofindy())
    }
}
Server.start(Server.http, { dispatch: start }) 
```

它就像一个魅力，但现在我希望能够进行同义映射。比如我希望不仅能有/去首页，还能有/home。

是否有一种简洁的方法可以做到这一点，也许使用 OR 运算符，或者我是否需要设置触发相同资源的单独案例？

tl; dr：有没有更好的方法来编写以下代码段：

```
case {path:[] ...}: Resource.page("Home", home())
case {path:["home"] ...}: Resource.page("Home", home()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:41:34.377

您应该使用 a`custom`而不是 a `dispatch`：

```
function start(v){
   Resource.page(v, <h1>{v}</h1>)
} 

urls = parser {
   case ("/" | "/home") : start("home")
   case .* : start("other")
}

Server.start(Server.http, {custom: urls}) 
```

在此处了解有关解析器的更多信息：http: [//doc.opalang.org/manual/The-core-language/Parser](http://doc.opalang.org/manual/The-core-language/Parser)

# javascript - 正则表达式转义括号

> ID：10326887
> 
> 赞同：14
> 
> 时间：2012-04-26T03:39:34.460
> 
> 标签：javascript, regex

我尝试了不同的方法来使用 JavaScript 中的正则表达式来转义括号，但我仍然无法使其工作。

这是字符串：

```
"abc(blah (blah) blah()...).def(blah() (blah).. () ...)" 
```

我希望检测到这一点：

```
abc().def() 
```

使用此代码，它返回 false。

```
 str.match(/abc\([^)]*\)\.def\([^)]*\)/i); 
```

你能告诉我为什么我的正则表达式不起作用吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T03:57:21.323

此正则表达式将匹配您提供的字符串：

```
(abc\().+(\)\.def\().+(\)) 
```

并且使用反向引用`$1$2$3`会产生`abc().def()`

或者如果您不想要反向引用，请使用它：

```
abc\(.+\)\.def\(.+\) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:08:22.940

K...这是一个想法...

```
abc(blah (blah) blah()).def(blah() (blah).blah()) 
```

像这样使用正则表达式

```
var regExp1 = \^([a-z])*\(\ig; 
```

它会匹配

```
abc( 
```

然后使用

```
var regExp2 = /\)\./ 
```

它会匹配

```
")." 
```

在字符串..

然后拆分实际的字符串，使其变为

```
def(blah() (blah).blah()) 
```

重复直到正则表达式找不到

```
regExp2 
```

并添加一个右括号..我能想到的最简单的解决方案..希望它有所帮助..

# linux - 单一提供者，单一消费者。哪个适合条件变量：pthread_cond_t、sem_t 或 pthread_mutex_t？

> ID：10326888
> 
> 赞同：2
> 
> 时间：2012-04-26T03:39:35.013
> 
> 标签：linux, pthreads, conditional, semaphore, producer-consumer

有：

一个条件变量“var”：var 的值只能是 0 或 1；

一个提供者线程“thP”：当从网络接收到数据时，设置 var 1（可用）；

一个消费者线程“thC”：等待() for var。获得 var 后，将其设置为 0（不可用），然后处理某些内容。

.

我找到了两种方法来实现这个简单的模型：

(1) 使用 pthread_cond_t 作为 var。此方法需要一个额外的互斥锁和一个回调函数来解锁互斥锁，同时清理线程。

(2) 使用 sem_t 作为 var。这种方法可能会导致“var>1”的情况。thC 可能会执行多个 wait() 操作来将 var 的值减小到 1。

.

问题是：

要实现这个简单的模型“单一提供者、单一消费者、一个条件变量”，我应该为 var、pthread_cond_t、sem_t 使用哪种类型，还是简单地将 pthread_mutex_t 用作二进制信号量？

.

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:21:42.007

对于单个消费者、单个提供者、有界队列示例，典型的做法是使用一个锁保护两个条件变量（一个在“队列未满”时发出信号，一个在“队列不为空”时发出信号）。

该算法如下所示：

```
post(item):
  lock;
  while (queue is full):
    wait(cvar_queue_not_full);
  queue.push(item)
  signal(cvar_queue_not_empty);
  unlock;

consume():
  lock;
  while (queue is empty):
    wait(cvar_queue_not_empty);
  item = queue.shift(item);
  signal(cvar_queue_not_full);
  unlock;
  return item; 
```

这本质上是一个有界信号量，但允许您以原子方式调整信号量并同时推送/弹出队列。不幸的是，POSIX 信号量是无限的并且不提供原子性。

# javascript - 如何使用 javascript 知道一个对象是否是一个 Html 文档

> ID：10326889
> 
> 赞同：3
> 
> 时间：2012-04-26T03:39:44.170
> 
> 标签：javascript, jquery, html, asp.net-mvc-3, internet-explorer-8

我正在将一个对象说 , 传递`obj`给一个函数。`obj`可能是***任何类型***- *（TemplatedHelper、AlertMessage、PartialViews、HTMLDocument 等）*我想知道是否`obj`是 HTML 文档。有哪些可能的方法来实现它？

我试过使用

```
 var containerCount = $(obj).length;
      for (var ctr = 0; ctr < containerCount; ctr++) {
        var containerTagName = $(obj)[ctr].tagName;
        alert(containerTagName); // to know all detected tagNames
                                 // this returns LINK, SCRIPT, DIV, INPUT, etc..                   
        if ((containerTagName == "TITLE") || (containerTagName == "HTML")) {
          var isHTML = true;
          break;
        }
      } 
```

使用上述代码，Chrome 只检测`title`标签，而 IE8 不检测`html`,`head`和`title`标签。虽然这些片段代码在 IE8 中也不起作用：

```
 alert($(obj).has('title')); // or 'html' as element parameter, returns [object Object]
    alert($(obj).find('title')); // or 'html' as element parameter, returns [object Object]
    if ($(obj)[ctr].parent())  
      alert($(obj)[ctr].parent().get(0).tagName); // returns undefined 
```

请与我分享您对此的看法。提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T04:20:21.537

尝试这个：

```
if (obj instanceof HTMLDocument)
{
    // obj is a HTMLDocument
}
if (Object.prototype.toString.call(obj) == "[object HTMLDocument]")
{
    // obj is a HTMLDocument
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T03:42:52.267

你可以试试这个

```
$obj.is('html') 
```

# javascript - Javascript - 替换大量 if 语句

> ID：10326898
> 
> 赞同：2
> 
> 时间：2012-04-26T03:40:37.480
> 
> 标签：javascript, if-statement, refactoring, code-cleanup

我有几个不同的单选按钮，它们返回种族和性别。该脚本在内部应用程序中运行，因此我不会返回“男孩”、“女孩”或“两者”，而是返回 7707330、7707333 和 7707336。与种族单选按钮类似。

然后，我需要根据种族和性别的组合来验证数据。这是一个非常简单的任务，但我最终得到了 15 个 if 语句！一切正常，但必须有更清洁的解决方案？

```
function test(radioResults) {
    var1 = radioResults[0].toString();
    var2 = radioResults[1].toString();

    var roll = parseFloat(parent.roll);

    if (var2 == '7707330') {
        gender = 'boy';
    }
    if (var2 == '7707333') {
        gender = 'girl';
    }
    if (var2 == '7707336') {
        gender = 'both';
    }

    if (var1 == '7707341') {
        maori(gender);
    }
    if (var1 == '7707344') {
        pasifika(gender);
    }
    if (var1 == '7707347') {
        all(gender);
    }
}

function maori(gender) {
    //Maori 
    if (gender == 'boy') {
        ethnicity = parseFloat(parent.getMBoys);
        validation(ethnicity);
    }
    if (gender == 'girl') {
        ethnicity = parseFloat(parent.getMGirls);
        validation(ethnicity);
    }
    if (gender == 'both') {
        ethnicity = parseFloat(parent.getTotalM);
        validation(ethnicity);
    }
}

function pasifika(gender) {
    //Pasifika
    if (gender == 'boy') {
        ethnicity = parseFloat(parent.getPBoys);
        validation(ethnicity);
    }
    if (gender == 'girl') {
        ethnicity = parseFloat(parent.getPGirls);
        validation(ethnicity);
    }
    if (gender == 'both') {
        ethnicity = parseFloat(parent.getTotalP);
        validation(ethnicity);
    }
}

function all(gender) {
    //All
    if (gender == 'boy') {
        ethnicity = parseFloat(parent.getBoys);
        validation(ethnicity);
    }
    if (gender == 'girl') {
        ethnicity = parseFloat(parent.getGirls);
        validation(ethnicity);
    }
    if (gender == 'both') {
        ethnicity = parseFloat(parent.getTotalRoll);
        validation(ethnicity);
    }
}

function validation(ethnicity) {

    percent = ethnicity * 5 / 100;

    if (ethnicity - percent > roll || (ethnicity + percent < roll)) {
        parent.document.getElementById('CF_7784443').value = "FAIL";
    } else {
        parent.document.getElementById('CF_7784443').value = "PASS";
    }
} 
```

我该如何清理这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T03:56:25.613

我不确定这是否符合您的口味，但对我来说这似乎是一个更清洁的解决方案。首先分别布置所有映射。然后将映射解析为*parent*的正确属性。然后为您检索到的属性调用一次*验证。*这是一个草图：

```
// map var1 and var2 to gender and ethnicity
var genderMap = { "7707330" : "boy", "7707333": "girl", "7707336": "both" };
var ethnicityMap = { "7707341": "maori", "7707344": "pasifica", "7707347": "all" };

// map gender and ethnicity to the correct property of "parent"
var props = 
    { "boy": 
        {
            "maori": "getMBoys", "pacifica": "getPBoys", "all": "getBoys"
        },
        "girl": 
        {   
            "maori": "getMGirls", "pacifica": "getPGirls", "all": "getGirls"
        },
        "all":
        {   
            "maori": "getTotalM", "pacifica": "getTotalP", "all": "getTotalRoll"
        }
    };

// get the correct property    
var prop = props[genderMap[var1]][ethnicityMap[var2]];

// run the validation
validation(parseFloat(parent[prop])); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T03:46:03.437

使用`switch`可能会有所帮助

```
switch (var2) {  
   case '7707330': gender = 'boy'; break;  
   case '7707333': gender = 'girl'; break;  
   case '7707336': gender = 'both'; break;
   default: gender = 'not boy or girl here?';
} 
```

[MDN 中的](https://developer.mozilla.org/en/JavaScript/Reference/Statements/switch)文档

编辑：缩小换行符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T03:51:54.330

我会这样编码。有些人可能会建议`switch`语句，但我真的从未在我的代码中使用它们，因为它们增加了行数而不影响可读性：

```
function foo() {
  var func;

  if (var1 == '7707330') {
    func = maori;
  } else if (var1 == '7707344') {
    func = pasifika;
  } else if (var1 == '7707347') {
    func = all;
  }

  if (var2 == '7707330') {
    func('boy');
  } else if (var2 == '7707333') {
    func('girl');
  } else if (var2 == '7707336'):
    func('both');
  }
}

function maori(gender) {
  //Maori 
  if (gender == 'boy') {
    ethnicity = parseFloat(parent.getMBoys);
  } else if (gender == 'girl') {
    ethnicity = parseFloat(parent.getMGirls);
  } else if (gender == 'both') {
    ethnicity = parseFloat(parent.getTotalM);
  }

  validation(ethnicity);
}

function pasifika(gender) {
  //Pasifika
  if (gender == 'boy') {
    ethnicity = parseFloat(parent.getPBoys);
  } else if (gender == 'girl') {
    ethnicity = parseFloat(parent.getPGirls);
  } else if (gender == 'both') {
    ethnicity = parseFloat(parent.getTotalP);
  }

  validation(ethnicity);
}

function all(gender) {
  //All
  if (gender == 'boy') {
    ethnicity = parseFloat(parent.getBoys);
  } else if (gender == 'girl') {
    ethnicity = parseFloat(parent.getGirls);
  } else if (gender == 'both') {
    ethnicity = parseFloat(parent.getTotalRoll);
  }

  validation(ethnicity);
}

function validation(ethnicity) {
  var percent = ethnicity * 5 / 100;

  if (ethnicity - percent > roll || (ethnicity + percent < roll)) {
    parent.document.getElementById('CF_7784443').value = "FAIL";
  } else {
    parent.document.getElementById('CF_7784443').value = "PASS";
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T03:48:52.113

好吧，就干净的代码而言，您可以将 if 替换为 Switch 语句，这里有一个描述：

[http://www.w3schools.com/js/js_switch.asp](http://www.w3schools.com/js/js_switch.asp)

那是你能得到的最好的替代品。当然你的代码也是有效的。

# java - 如何将八位字节字符串转换为可读字符串

> ID：10326900
> 
> 赞同：3
> 
> 时间：2012-04-26T03:41:02.127
> 
> 标签：java

> **可能重复：**
> [使用 Java 将十六进制转储的字符串表示形式转换为字节数组？](https://stackoverflow.com/questions/140131/convert-a-string-representation-of-a-hex-dump-to-a-byte-array-using-java)

For example I get an octet string as follow: 3c3f786d6c2076657273696f6e3d22312e302220656e636f64696e673d225554462d38223f3e3c53 6f6170456e763a456e76656c6f706520786d6c6e733a536f6170456e763d22687474703a2f2f7363 68656d61732e786d6c736f61702e6f72672f736f61702f656e76656c6f70652f223e3c536f617045 6e763a48656164657220786d6c6e733a7773613d22687474703a2f2f7777772e77332e6f72672f32 3030352f30382f61646472657373696e67223e3c7773613a46726f6d3e3c7773613a416464726573 733e43484e594442473c2f7773613a416464726573733e3c2f7773613a46726f6d3e3c7773613a54 6f3e434352433c2f7773613a546f3e3c7773613a416374696f6e3e687474703a2f2f636372632e73 6572766963652e62616e6b636f6d6d2e636f6d2f6162737472616374696f6e2f61746f6d69632f74 6563686e6963616c2e506572736f6e616c4372656469745265706f7274536572762f4661756c743c 2f7773613a416374696f6e3e3c7773613a4d65737361676549443e75726e3a757569643a30303031

而且我知道底层文本是 UTF-8 编码，那么谁能提供一些方法将这些八位字节转换为可读字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T04:09:08.843

尝试读取每两个字符，将它们解析为 16 进制整数[`Integer.parseInt(String,int)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)，将它们添加到字节数组中，并[`String`从结果](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5b%5d,%20java.lang.String%29)构造 a ：

```
public static String fromHex(String s) throws UnsupportedEncodingException {
  byte bs[] = new byte[s.length() / 2];
  for (int i=0; i<s.length(); i+=2) {
    bs[i/2] = (byte) Integer.parseInt(s.substring(i, i+2), 16);
  }
  return new String(bs, "UTF8");
}

fromHex("48656c6c6f2c20576f726c6421"); // => "Hello, World!" 
```

您的字符串示例看起来像一个包含 SOAP 消息的 XML 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T04:02:16.783

看看这里来自 snmp4j的[OctetString 。](http://www.snmp4j.org/doc/org/snmp4j/smi/OctetString.html)这可能对您有所帮助。

```
OctetString octetString = new OctetString(java.lang.String);
octetString.toString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T03:48:43.060

I think you need to convert it into a byte array first and then building the string, look into Byte class to see if it has a method for getting the byte out of two hex chars, then it would be only a matter of iterating through every two chars and convering them to bytes.

This link may be useful [Byte parseByte with radix](http://docs.oracle.com/javase/7/docs/api/java/lang/Byte.html#parseByte%28java.lang.String,%20int%29)

# ssas - 根据另一个集的名称过滤 MDX 集

> ID：10326901
> 
> 赞同：1
> 
> 时间：2012-04-26T03:41:02.290
> 
> 标签：ssas, mdx

我还是 MDX 的新手，所以我不确定是否有一种简单的方法，或者不是那么简单的方法来做我所要求的，但这里有一个模糊的描述，我想为我的MDX 查询。我有两套，两者在同一层次结构或表亲中没有直接关系，尽管可能有一个我不知道的“家庭”电话会做我想做的事情。

`[Company].[Parent Company].[Parent Company]`检索一组公司的所有成员，这些成员是第二组中公司的父级。

`[Company].[Company].[Company]`检索公司本身的所有成员的集合，包括父母本身。

我正在尝试过滤掉该`[C].[C].[C]`集合，以在我的 MDX 查询的成员中**不**包含 a 的任何实例。`[Parent Company]`我用 Filter() 尝试了一些奇怪的东西，但一直弄乱集合/元组或获取错误类型的数据。
这些系列没有任何祖父母/多代人的诡计，只有两个层面需要担心（公司及其潜在的父母，可能没有）。如果多维数据集的格式更好，如果它们处于层次结构中会很好，但这里不是这种情况。

示例输出：

*   `[Company].[Parent Company].[ParentCompany]`= {A, C, E} 的成员
*   `[Company].[Company].[Company]`= {A, B, C, D, E, F, G}的成员

然后我想得到一个将返回以下内容的集合：{B，D，F，G}，就是这样。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:25:28.083

您可以在不使用 Member_Name 的情况下执行此操作：

```
Exclude([Company].[Company].[Company].Members, Extract([Company].[Company].[Company].Members * [Company].[Parent Company].[Parent Company].Members, [Company].[Company])) 
```

或者

```
Exclude([Company].[Company].[Company].Members, Exists([Company].[Company].[Company].Members, [Company].[Parent Company].[Parent Company].Members)) 
```

# python - 如何抓取实时数据并将其加载到 cubism.js

> ID：10326902
> 
> 赞同：1
> 
> 时间：2012-04-26T03:41:02.493
> 
> 标签：python, json, graphite, cubism.js

我想获得使用[cubism.js的经验](http://square.github.com/cubism/)

我找到了我想要绘制的这个数据集[nyc 实时流量。](http://207.251.86.229/nyc-links-cams/LinkSpeedQuery.txt)

我需要一些关于如何完成这项工作的提示。我知道我可以使用 python 每 N 分钟查询一次 txt 文件。然后我会在服务器端存储最后 M 分钟的交通数据。当用户访问站点时，服务器将提供最后 M 分钟的数据。但是然后呢？客户端通过 cubism.js 查询服务器？还是服务器将更新推送给用户？

我已经阅读了[cubism.js wiki](https://github.com/square/cubism/wiki)，但没有任何示例说明如何在没有立方体或石墨的情况下做到这一点。

此外，这将是我自 jsp 时代以来的第一个项目，因此也欢迎任何关于这方面的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:27:58.263

您将创建一个知道如何获取数据范围的新立体主义上下文。它可以每次重新获取和解析文件，也可以有某种内存数据库。

另一种选择是让一个单独的进程提取数据并将其放入 Graphite。然后你可以使用内置的 Graphite 后端。

# python - Python翻译器，如何只替换一个单词

> ID：10326903
> 
> 赞同：1
> 
> 时间：2012-04-26T03:41:06.940
> 
> 标签：python, text, replace, language-translation

所以我正在尝试在 python 中创建一个翻译器（在一个 s60 设备中）。所以我们要做的就是只替换一个完整的单词而不触及其他单词。这是一个例子

原文：“棕狐跳过了名叫布朗尼的狗。” 我想把“brown”这个词替换成“deathlesi”（忽略为什么）结果应该是：“the deathlesi fox jumps over the dog named brownie”。但相反，它也改变了字符串中的“brownie”，结果为：“the deathlesi fox jumps over the dog named deadlesiie”。

由于我试图替换每一个单词，有时它会陷入一个永无止境的悖论。示例：“我很愚蠢” 我正在尝试将“I”更改为“ium”，这就是发生的情况。“iumumumumumumumumumumumumumumumumumumum....am stupiuiuiuiuiuiuiuiuiuiuiuiuiuiuiuiuiuiuim..”，它基本上改变了字符串中的每个“I”，直到字符串中没有“I”才停止。

有什么帮助吗？谢谢！

编辑：我已经尝试过 "stringhere".replace() 但某些部分，如小写字母 "i" 通常会替换愚蠢的 "i"。

这是另一个例子：“人们对巨型野兔感到兴奋。” 将“are”替换为“iume”，而不是“人们 iume 对巨型野兔感到兴奋”。它还取代了“hare”，从而导致“人们 iume 对巨大的 hiume 感到兴奋”。

假设我排列了句子并翻译了它们。这就是我现在的方法。基本上将每个单词转换为一个数组并转换它们中的每一个。然后做一个

```
translated_sentence=["particulus:people", "iume:are", "geus:getting", "exchantus:excited", "d:at", "qun:the", "gesas:giant", "hsont:hare"]
sentence= "People are getting excited at the giant hare."
for i in translated_sentence do
element=i.split(":")
sentence=sentence.replace(element[1], element[0]) 
```

它仍然抛出“particulus uime geus exchantus d qun gesas huime（而不是 hsont）”

我刚弄明白了。我只是将字符串拆分为一个数组，并通过清理当前单词并对原始单词执行 string.replace() 来保留格式。

```
sentence="The quick brown fox jumps over the lazy dog.".split(" ")
result=""

for i in sentence:

cleaned=clean(i) #removes the punctuations and stuff leaving the raw word.

translated=translate(cleaned) #returns the translated word

result=result+i.replace(cleaned,translated)+" "

return result 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:15:48.637

这听起来像一个正则表达式场景：

```
import re
x = "The brown fox jumps over the dog named brownie."
newstring = re.sub(r"(\s+|[:punct:]+|^)brown(\s+|[:punct:]+|$)",r"\1deathlies\2",x, flags=re.IGNORECASE) 
```

产生：

```
>>> print newstring
The deathlies fox jumps over the dog named brownie. 
```

或者：

```
x = "People are getting excited at the giant hare."
newstring = re.sub(r"(\s+|[:punct:]+|^)are(\s+|[:punct:]+|$)",r"\1iume\2",x, flags=re.IGNORECASE) 
```

哪个产生：

```
>>> print newstring
People iume getting excited at the giant hare. 
```

第一个捕获组`(\s+|[:punct:]+|^)`匹配空格、标点符号或字符串的开头，另一个组`(\s+|[:punct:]+|$)`匹配字符串的结尾。

在进行替换时，`\1`将`\2`标点或空格与替换的文本一起放回去，使事情变得整洁。

附言

如果您很懒惰，只需创建捕获组`(\W+|^)`并`(\W+|$)`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:15:34.597

由于您只想找到第一次出现，因此您只需要一种方法来跟踪它。您可以通过多种方式做到这一点。就这么简单：

```
def replacer(original, looking_for, replace_with):
   ''' A straightforward way... '''
   return original.replace(looking_for, replace_with, 1)
   #return regex.sub(replace_with, looking_for, 1) 
```

该数字表示您要替换多少次。如果存在两个，并且您输入 2，则两个匹配项都将被替换。

字符串是不可变的，因此您必须重新分配新字符串。每次你`replace`都在生成一个新字符串。

如果您不想要内置的，您也可以编写一个循环来查找第 N 次出现。

我建议让你的帖子更短（我的意思是更少的单词，更多的语法高亮）。格式化它。如果我没有正确阅读您的帖子，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T03:48:02.450

Just call replace function of string

```
"I am stupid".replace("I", "ium")

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T04:15:50.987

您想替换完全相等的单词。不是 string.replace()

> 替换“are”，但不要替换“hare”

如果是这样的话

## 已编辑

正如@Niall 所说[，正则表达式搜索和替换](http://docs.python.org/howto/regex.html#search-and-replace)是满足您任务的最佳工具。

或者，如果你刚刚开始学习 Python，而正则表达式太复杂了。只需使用`str.split()`then 循环单词将字符串拆分为单词。

```
def simply_replace(string, search, replace):
    words = string.split(' ')
    for i in range(len(words)):
        if(words[i].lower() == search):
            words[i] = replace
    return ' '.join(words)

>>> simply_replace("I am stupid", 'i', 'ium')
'ium am stupid'
>>> simply_replace("The brown fox jumps over the dog named brownie.", 'brown', 'deathly')
'The deathly fox jumps over the dog named brownie.'
>>> simply_replace("People are getting excited at the giant hare.", 'are', 'ium')
'People ium getting excited at the giant hare.' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T03:57:18.203

我现在没有 python，但是如何创建一个将字符串转换为列表的函数。您可以取出空白，因此列表将是 [The, brown, fox, jumps...]。然后做一个.replace。

# css - 如何给 div 或 IMG 一个“最小尺寸”

> ID：10326904
> 
> 赞同：0
> 
> 时间：2012-04-26T03:41:08.407
> 
> 标签：css, image, user-interface, zooming

我有这两张 50 x 50 像素的图像。它们每个都被锁定在 50px×50px 的 div 中。当用户使用整页缩放来减小页面大小时，我不希望它们缩小。实际上，我希望图像默认缩放到大约 75 x 75 像素，并且我希望它们至少缩小到 50 像素。

谁能告诉我该怎么做？我可以以某种方式拉伸图像以占用 100% 的 div，然后默认将 div 设置为 75px 吗？那么，我可以以某种方式为 div 设置至少 50px 吗？你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:00:51.877

您可以在*div*标签上设置`min-width`和`min-height`样式属性，并将*img标签设置为跨越**div*标签的整个宽度和高度。

# objective-c - UIBarButtonItem 如何知道 UIToolBar 使用哪个 UIBarStyle？

> ID：10326909
> 
> 赞同：0
> 
> 时间：2012-04-26T03:41:39.623
> 
> 标签：objective-c, ios, cocoa-touch, uikit, uitoolbar

在 Xcode ui builder 中，当设置 UIToolBar 的 UIBarStyle（例如 BlackTranslucent）时，UIToolBarItem 会匹配背景图像。UIToolBarItem 如何知道它应该使用哪种样式？

我正在尝试将自定义彩色图像放在常规背景图块的顶部（以编程方式将给定图像合并到背景图像的顶部）。我希望代码足够通用，以便能够处理所有 UIBarStyles。这意味着我想知道 UIToolBarItem 何时决定使用哪个背景并拦截它，以便我可以即时组合按钮图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T03:48:21.500

由于无法看到苹果对 UIBarbuttonItem 的实现，我认为他们实际上*并不*知道他们的 UIToolbar 的样式是什么。如果您仔细观察，它们具有与工具栏相同的 alpha 和相同的叠加层（表示子视图）。因此，作为子视图添加到此突出显示层下方的任何图像都应符合 UIToolbar 的样式。如果您想使用多个图像（每个 barStyle 一个），您可以`self.myToolbar.barStyle`在 -viewDidLoad 时确定并适当地计划。至于真正的图像绘制，子类 UIToolbar 并覆盖`-drawRect:`使用`[UIImage drawInRect:rect];`

# javascript - jQuery 是否支持常量？

> ID：10326910
> 
> 赞同：0
> 
> 时间：2012-04-26T03:41:58.167
> 
> 标签：javascript, jquery, constants

根据[JavaScript 中有常量吗？](https://stackoverflow.com/questions/130396/are-there-constants-in-javascript)Javascript 没有常量。

有 jQuery 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T03:43:31.330

jQuery 只是一个用 javascript 编写的库。它不是一种单独的语言。

因此，jQuery 没有比普通 javascript 更多的语言功能。

也就是说，jQuery 确实有一些预定义的值，您可以将它们与各种函数一起使用。例如，如果您正在使用该`.fadeIn()`方法，则可以将其称为`.fadeIn("slow")`因为`"fast"`和`"slow"`是该`fadeIn()`方法识别的特殊字符串。jQuery 倾向于只使用这样的字符串，而不是使用`jQuery.SLOW`在其他语言中可能看起来更像是预定义常量的定义或类似的东西。

# actionscript-3 - 如何自定义流协议到 Flash 客户端

> ID：10326912
> 
> 赞同：0
> 
> 时间：2012-04-26T03:42:03.077
> 
> 标签：actionscript-3, flash, netstream

我需要在服务器和 Flash 客户端之间创建自定义通信。例如，我想使用纠错编写 UDP 协议。它比 TCP 快得多，并且不受路由问题的影响。不幸的是，我绝对想不出如何替换现有的方式：

```
_stream = new NetStream(_connection);
_video.attachNetStream(_stream); 
```

这包含了所有通信，我无法控制它。我知道我可以使用 appendBytes，但不确定传递给这个函数的确切内容。我可以在服务器端做任何事情。我的视频是 H.264，音频是 ACC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:11:55.297

我押注 UDP，但从来没有让它在 Flash 中工作。我来解释一下：

在你的浏览器中，真的没有办法使用UDP！！！**那里的 Flash 应用程序在沙箱中运行，它只使用 TCP！**

**Air**用于**桌面应用程序**，编译后在桌面包装器中运行，它本身可以直接访问套接字和其他可能性。

**而已！您必须使用 TCP。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:52:47.527

除非它是 AIR 应用程序，否则您不能。它是已经处理应用层（OSI 模型）的原生 API。

如果您想自己制作，请使用`flash.net.DatagramSocket`类（在 AIR 2+ 中可用）为您的应用程序层和`NetStream.appendBytes`音频/视频流解码和播放（提供 FLV/F4V 块）

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/DatagramSocket.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/DatagramSocket.html)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#appendBytes%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#appendBytes%28%29)

# php - MYSQL 结果；未找到记录声明

> ID：10326917
> 
> 赞同：-4
> 
> 时间：2012-04-26T03:42:50.560
> 
> 标签：php, mysql, sql, database

> **可能重复：**
> [显示来自 MYSQL 的数据；SQL语句错误](https://stackoverflow.com/questions/10326746/display-data-from-mysql-sql-statement-error)

我有下面的代码显示来自 MYSQL 数据库的数据（目前正在调查 sql 注入问题）当没有找到结果时我需要插入一条错误消息......不知道在哪里定位它！我已经尝试过代码 if( mysql_num_rows($result) == 0) { echo "No row found!" 但是继续出现语法错误，有人知道代码中的正确位置吗？

--

```
 require 'defaults.php';
 require 'database.php';

 /* get properties from database */

 $property = $_GET['bedrooms'] ;
 $sleeps_min = $_GET['sleeps_min'] ;
 $availability = $_GET['availability'] ;

  $query = "SELECT * FROM `properties` WHERE bedrooms = '{$bedrooms}' AND sleeps_min = '{$sleeps_min}' AND availability = '{$availability}'";
  $row=mysql_query($query);

  $result = do_query("SELECT * FROM `properties` WHERE bedrooms = '{$bedrooms}' sleeps_min = '{$sleeps_min}' AND availability = '{$availability}'", $db_connection);

 while ($row = mysql_fetch_assoc($result))
 {
$r[] = $row;
 }

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:55:36.010

我在您的代码中发现了一些符合要求的错误

```
$query = "SELECT * FROM `properties` WHERE bedrooms = '{$bedrooms}' AND sleeps_min = '{$sleeps_min}' AND availability = '{$availability}'";
$row=mysql_query($query); 
```

你使用`bedrooms = '{$bedrooms}'`但是`$bedrooms is not variable in whole cod it must be $preopery`。我对下面给出的代码进行了一些更改，请尝试一下。

```
 <?php

        require 'defaults.php';
        require 'database.php';

        /* get properties from database */

        /*if get $_GET['bedrooms'] value else ''*/

        if (isset($_GET['bedrooms'])) {
            $property = $_GET['bedrooms'];
        } else {
            $property = '';
        }

        /*if get $_GET['sleeps_min'] value else ''*/

        if (isset($_GET['sleeps_min'])) {
            $sleeps_min = $_GET['sleeps_min'];
        } else {
            $sleeps_min = '';
        }

        /*if get $_GET['availability'] value else ''*/

        if (isset($_GET['availability'])) {
            $availability = $_GET['availability'];
        } else {
            $availability = '';
        }

        $query = "SELECT * FROM `properties` WHERE bedrooms = '" . $property . "' AND sleeps_min = '" . $sleeps_min . "' AND availability = '" . $availability . "'";

        $result = mysql_query($query) or die(mysql_error());

        if ($result) {
            while ($row = mysql_fetch_assoc($result)) {
                $r[] = $row;
            }
        }
        ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:34:13.423

做`var_dump($GET_)`调试你是否得到有效的字符串。如果其中任何一个为空白，则查询将尝试匹配空白值而不是`NULL`. 您应该通过执行以下操作来防止这种情况：

```
if(!$_GET['bedrooms'] || $_GET['bedrooms'] == ''){
$property = 'NULL';
}//repeat for all three

$query = "SELECT * FROM `properties` WHERE 'bedrooms' = '$bedrooms' AND 'sleeps_min' = '$sleeps_min' AND 'availability' = '$availability'"; 
```

代替：

```
while ($row = mysql_fetch_assoc($result)) {
    $r[] = $row; 
} 
```

你可以简单地做：

```
$r = mysql_fetch_array($query); 
```

但将其附在条件中以查看您的查询是否找到任何内容：

```
if(mysql_affected_rows() > 0){
  //your code here will execute when there is at least one result
  $r = mysql_fetch_array($query); 
} 
else{//There was either nothing or an error
  if(mysql_affected_rows() == 0){
    //There were 0 results 
  } 
  if(mysql_affected_rows() == -1) {
    //This executes when there is an error 
    print mysql_error(); //not recommended except to debug
  }
} 
```

# jquery - 使用 jQuery .load() 时如何将光标更改为等待

> ID：10326925
> 
> 赞同：38
> 
> 时间：2012-04-26T03:43:57.140
> 
> 标签：jquery, html, css

在等待来自 .load() 的响应时，有没有办法将光标更改为忙/等待光标？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-04-26T03:48:11.757

尝试：

**更新为与 jQuery 1.8 + 一起使用**

```
$(document).ajaxStart(function() {
    $(document.body).css({'cursor' : 'wait'});
}).ajaxStop(function() {
    $(document.body).css({'cursor' : 'default'});
}); 
```

任何 ajax 开始和结束时的光标更改。这包括`.load()`.

在此处尝试不同的光标样式：

[https://developer.mozilla.org/en-US/docs/Web/CSS/cursor](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-08T13:28:47.950

我不得不调整上面雄辩的答案以使用 jQuery > 1.8。

```
$(document).ajaxStart(function () {
    $(document.body).css({ 'cursor': 'wait' })
});
$(document).ajaxComplete(function () {
    $(document.body).css({ 'cursor': 'default' })
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-03T17:10:30.543

我不喜欢简单地将 css 属性添加到 body 标记的解决方案：如果您已经为元素分配了光标，则它不会起作用。像我一样，我`cursor: pointer;`在所有锚标签上都使用。所以，我想出了这个解决方案：

创建一个 CSS 类以避免覆盖当前光标（之后能够恢复正常）

```
.cursor-wait {
    cursor: wait !important;
} 
```

创建函数以添加和删除光标

```
cursor_wait = function()
{
    // switch to cursor wait for the current element over
    var elements = $(':hover');
    if (elements.length)
    {
        // get the last element which is the one on top
        elements.last().addClass('cursor-wait');
    }
    // use .off() and a unique event name to avoid duplicates
    $('html').
    off('mouseover.cursorwait').
    on('mouseover.cursorwait', function(e)
    {
        // switch to cursor wait for all elements you'll be over
        $(e.target).addClass('cursor-wait');
    });
}

remove_cursor_wait = function()
{
    $('html').off('mouseover.cursorwait'); // remove event handler
    $('.cursor-wait').removeClass('cursor-wait'); // get back to default
} 
```

然后创建您的 ajax 函数（我不使用 ajaxStart 或 ajaxStop 之类的事件，因为我不想在所有 ajax 调用中使用光标等待）

```
get_results = function(){

    cursor_wait();

    $.ajax({
        type: "POST",
        url: "myfile.php",

        data: { var : something },

        success: function(data)
        {
            remove_cursor_wait();
        }
    });
} 
```

我对 jQuery load() 不是很熟悉，但我想它会是这样的：

```
$('button').click(function()
{
    cursor_wait();

    $('#div1').load('test.txt', function(responseTxt, statusTxt, xhr)
    {
        if (statusTxt == "success")
        { remove_cursor_wait(); }
    });
}); 
```

**[演示](http://jsfiddle.net/pmrotule/qg9hkm4b/)**

希望能帮助到你！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-26T03:46:42.530

你可以使用这个：

```
$('body').css('cursor', 'progress'); 
```

在开始加载之前，完成后将光标更改为自动

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T03:48:31.310

我希望这有帮助

```
$("body").css('cursor','wait');
   //or
   $("body").css('cursor','progress'); 
```

问候

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-09T04:13:13.763

我尝试了在这里和其他地方找到的各种方法，并确定在各种浏览器（甚至设置，如 RDP/VNC/终端用户）中存在太多错误，因为更改了鼠标光标。所以我最终得到了这个：

在文档准备好后触发的我的应用程序初始化代码中：

```
 // Make working follow the mouse
    var working = $('#Working');
    $(document).mousemove(function(e) {
        working.css({
            left: e.pageX + 20,
            top: e.pageY
        });
    });

    // Show working while AJAX requests are in progress
    $(document).ajaxStart(function() {
        working.show();
    }).ajaxStop(function() {
        working.hide();
    }); 
```

在我的 HTML 末尾，就在我的正文中：

```
<div id="Working" style="position: absolute; z-index: 5000;"><img src="Images/loading.gif" alt="Working..." /></div> 
```

它的工作原理很像 Windows 中的“应用程序加载”鼠标光标，您仍然可以看到正常的光标，但您也可以看出正在发生一些事情。这对我来说是理想的，因为我希望用户觉得他们在等待时仍然可以做其他事情，因为到目前为止我的应用程序处理得很好（测试的早期阶段）。

我的 loading.gif 文件只是一个典型的旋转轮，大约 16x16 像素，所以不太烦人，但很明显。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-14T17:32:49.427

尝试：

```
$(document).ajaxStart(function () {
    $('body').css('cursor', 'wait');
}).ajaxStop(function () {
    $('body').css('cursor', 'auto');
}); 
```

从 jQuery 1.8 开始，.ajaxStop() 和 .ajaxComplete() 方法只能附加到文档。

将 .ajaxStop() 与 .ajaxComplete() 互换都给了我令人满意的结果。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-26T03:45:38.543

将正文的 CSS 更改为`cursor: progress`.

为此，只需使用此 CSS 创建一个“等待”类，然后从正文中添加/删除该类。

CSS：

```
.waiting {
    cursor: progress;
} 
```

然后在你的 JS 中：

```
$('body').addClass('waiting'); 
```

您可以稍后使用 删除它`.removeClass`。

*   [https://developer.mozilla.org/en/CSS/cursor](https://developer.mozilla.org/en/CSS/cursor)
*   [http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)
*   [http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

# c++ - C/C++ 如何从 2 个数组中获取唯一值？

> ID：10326928
> 
> 赞同：0
> 
> 时间：2012-04-26T03:44:40.247
> 
> 标签：c++, c, arrays, unique

我需要从 2 个 int 数组中获取唯一值

允许重复

只有一个独特的价值

像 ：

```
int arr1[3]={1,2,3};
int arr2[3]={2,2,3}; 
```

我想得到的价值是：

```
int unique[]={1} 
```

我怎样才能做到这一点？我已经对我的“for”和“if”感到困惑，这不是家庭作业

我知道如何合并 2 个数组和删除重复值

但我还需要知道哪个数组具有唯一值

请帮助我:)

这是我做的一些代码

```
int arr1[3]={1,2,3}
int arr2[3]={2,2,3}
int arrunique[1];
bool unique = true;
for (int i=0;i!=3;i++)
{

    for (int j=0;j!=3;j++)
    {
    if(arr1[i]==arr2[j])
    {
        unique=false;
        continue;
    }
    else 
    {
        unique=true;
    }
if(unique)
{
arrunique[0]=arr1[i]
break;
}
}

cout << arrunique[0]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T04:09:12.970

假设：

*   你有两个不同长度的数组，
*   数组已排序
*   数组中可以有重复的值
*   您想要获取仅出现在其中一个数组中的值列表
    *   包括他们的副本（如果存在）

你可以做（​​未经测试）：

```
// Assuming arr1[], arr2[], and lengths as arr1_length  
int i = 0,j = 0, k = 0;
int unique[arr1_length + arr2_length];

while(i < arr1_length && j < arr2_length) {
   if(arr1[i] == arr2[j]) {
     // skip all occurrences of this number in both lists
     int temp = arr1[i];
     while(i < arr1_length && arr1[i] == temp) i++;
     while(j < arr2_length && arr2[j] == temp) j++;
   } else if(arr1[i] > arr2[j]) {
     // the lower number only occurs in arr2
     unique[k++] = arr2[j++]; 
   } else if(arr2[j] > arr1[i]) {
     // the lower number only occurs in arr1
     unique[k++] = arr1[i++]; 
   }     
}

while(i < arr1_length) {
   // if there are numbers still to read in arr1, they're all unique
   unique[k++] = arr1[i++];
}
while(j < arr2_length) {
   // if there are numbers still to read in arr2, they're all unique
   unique[k++] = arr2[j++];
} 
```

一些替代方案：

*   如果您不希望`unique`数组中出现重复项，则可以在分配给唯一数组时跳过相关列表中此数字的所有出现。

*   如果要记录位置而不是值，请维护两个“唯一位置”数组（每个输入数组一个），并根据需要将`i`或分配`j`给相应数组的值。

*   如果只有一个唯一值，请将分配更改为唯一数组以返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:48:06.487

根据您的需要，您可能还想查看标准库的[set_symmetric_difference()](http://www.sgi.com/tech/stl/set_symmetric_difference.html)函数。但是，至少可以说，它对重复值的处理使它的使用有点棘手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T07:34:09.383

```
#include <stdio.h>
#include <stdlib.h>
int cmp ( const void *a , const void *b )
{
        return *(int *)a - *(int *)b;
}
int main()
{
int arr1[5] = {5,4,6,3,1};
int arr2[3] = {5, 8, 9};
int unique[8];

qsort(arr1,5,sizeof(arr1[0]),cmp);

printf("\n");

qsort(arr2,3,sizeof(arr2[0]),cmp);

//printf("%d", arr1[0]);
int i = 0;
int k = 0;
int j = -1;

while (i < 5 && k < 3)
{
    if(arr1[i] < arr2[k])
    {
        unique[++j] = arr1[i];
        i++;
    }
    else if (arr1[i] > arr2[k])
    {
        unique[++j] = arr2[k];
        k++;
    }
    else
    {
        i++;
        k++;
    }
}
//int len = j;
int t = 0;
if(i == 5)
{
    for(t = k; t < 3; t++)
        unique[++j] = arr2[t];
}
else
    for(t = i; t < 5; t++)
        unique[++j] = arr2[t];

for(i = 0; i <= j; i++)
    printf("%d ", unique[i]);
return 0;
} 
```

这是我的代码，虽然有一个很好的答案。我没有意识到知道哪个数组具有独特价值的想法。我也认为您选择的正确答案也没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-01T11:26:51.477

这是我的算法版本，用于在 C++ 中的 Python 上的排序数组中查找相同元素，它的工作方式类似

```
def unique_array(array0 : (int), array1 : (int)) -> (int):
index0, index1, buffer = 0, 0, []
while index0 != len(array0) and index1 != len(array1):
    if array0[index0] < array1[index1]:
        buffer.append(array0[index0])
        index0 += 1
    elif array0[index0] > array1[index1]:
        buffer.append(array1[index1])
        index1 += 1
    else:
        index0 += 1; index1 += 1
buffer.extend(array0[index0 : len(array0)])
buffer.extend(array1[index1 : len(array1)])
return buffer 
```

# windows - 如何使用 int3（VEH 或 SEH）

> ID：10326931
> 
> 赞同：0
> 
> 时间：2012-04-26T03:44:56.640
> 
> 标签：windows, assembly, x86, seh

知道我想替换`function prologue`为`jmp`跳转到我的分配区域（VirtualAllocateEx）。但是`function prologue`只有 3 个字节，并且`jmp`有 5 个字节。像这样：

```
55                 `push ebp`  

8B EC              `mov ebp, esp`

833D C4354200 02   `cmp dword ptr ds:[4235C4],2`

E9 AD00000000  `jmp` 00140000 // replace above three instructions 
```

如果我想使用 jmp 覆盖函数序言，则必须覆盖函数序言之后的第三条指令。

所以知道我想用 int3 替换函数序言来跳转到我的分配区域或任何地址，我该怎么做？

我尝试使用 VEH 或 SEH 来做到这一点，但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T03:50:18.493

You need to write the original code (the one you quoted) on another memory location (just allocate something).

Write it while saving some space for the additional OpCodes (your custom new code). It doesn't have to fit exactly as you're allowed to fill the unused bytes with NOP (0x90 if I'm not mistaken).

Now, jump to this code from the original code.

I've been doing this stuff when I was making game trainers years ago.. Works very well.

On thing to note: Your reWritten code should, at the end, jump back to the original place to continue the code flow.

Let me know if it's unclear.

# bash - 大小写敏感排序 Unix Bash

> ID：10326933
> 
> 赞同：5
> 
> 时间：2012-04-26T03:45:23.553
> 
> 标签：bash, unix, sorting

这是我遇到的排序问题的屏幕截图：

[http://i.imgur.com/cIvAF.png](http://i.imgur.com/cIvAF.png)

我想要的目标是将所有相等的字符串放在连续的行上。它适用于我正在排序的列表的 99%，但有一些问题，例如屏幕截图中的问题。

所以所有的 yahoo.coms 应该彼此相邻，然后是所有 Yahoo.coms，然后是 YAHOO.coms yahoo.cmos yhoo.c 等。（错别字甚至有自己的一组行）

不完全确定如何通过排序来处理这个问题，但我肯定在尝试。

我将所有未排序的域打印到一个文件中，然后仅使用 vanilla 对其进行排序`sort filename`

希望得到一些建议/意见。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T03:47:33.240

You probably need to override the locale; most Linux systems default to a UTF8 locale which specifies both case independent sorting and ignoring punctuation.

```
LANG=C sort filename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:38:09.030

将您的输入标准化一点

```
tr [A-Z] [a-z] 
```

尝试阅读“诗人的 Unix”

# python - 分析 Python 脚本时按 percall 对 cProfile 输出进行排序

> ID：10326936
> 
> 赞同：87
> 
> 时间：2012-04-26T03:45:33.350
> 
> 标签：python, profiling, cprofile

我在用着`python -m cProfile -s calls myscript.py`

`python -m cProfile -s percall myscript.py`不起作用。

Python 文档说“在 Stats 文档中查找有效的排序值。”：[http://docs.python.org/library/profile.html#module-cProfile](http://docs.python.org/library/profile.html#module-cProfile)，我找不到。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-12-18T00:40:00.587

-s 仅使用[在 sort_stats 下找到的键。](http://docs.python.org/2/library/profile.html#pstats.Stats.sort_stats)

```
calls (call count)
cumulative (cumulative time)
cumtime (cumulative time)
file (file name)
filename (file name)
module (file name)
ncalls (call count)
pcalls (primitive call count)
line (line number)
name (function name)
nfl (name/file/line)
stdname (standard name)
time (internal time)
tottime (internal time) 
```

这是一个例子

```
python -m cProfile -s tottime myscript.py 
```

# django - 将对象级别权限添加到通用视图

> ID：10326938
> 
> 赞同：11
> 
> 时间：2012-04-26T03:45:43.670
> 
> 标签：django, django-views, django-permissions

情况很简单：我正在编写一个多用户博客系统。系统应防止非所有者编辑或删除博客文章。在我看来，我使用通用视图。

类博客更新视图（更新视图）：...

我知道我应该使用@method_decorator 来装饰调度方法。但是，大多数示例只是 @method_decorator(login_required) 或模型级别权限。如何应用对象级别的权限来检查 request.user 是否是这篇博文的作者？例如，我尝试使用 django-authority 应用程序，我在这个文件中有一个 BlogPermission 类。我试图在这个类中定义一个方法，例如

`def blog_edit(self, ??, ??)`

我应该在这个方法中加入什么？

然后像这样调用它： `@method_decorator(permission_required('blog_permission.blog_edit(???)'))`

我应该在这里传递什么？

更新：阅读method_decorator代码后，我发现它只能接受没有参数的函数。我认为这就是为什么 permission_required 在这里不起作用。但是解决这个问题的方法是什么？

更新解决方案：

在 dispatch 方法中，我检查用户权限，如果用户不满足权限，则返回 HttpResponseForbidden()。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-28T05:11:48.393

您可以使用基于类的视图来做到这一点：

```
class BlogEdit(UpdateView):
    model = Blog

    def dispatch(self, request, *args, **kwargs):
        if not request.user.has_perm('blog_permission.blog_edit'):
            return HttpResponseForbidden()
        return super(BlogEdit, self).dispatch(request, *args, **kwargs)

    # OR (for object-level perms)

    def get_object(self, *args, **kwargs):
        obj = super(BlogEdit, self).get_object(*args, **kwargs)
        if not obj.user == self.request.user:
            raise Http404 # maybe you'll need to write a middleware to catch 403's same way
        return obj 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-24T09:57:33.447

另一种选择是使用[UserPassesTestMixin](https://docs.djangoproject.com/en/3.2/topics/auth/default/#django.contrib.auth.mixins.UserPassesTestMixin)（或基于函数的[user_passes_test](https://docs.djangoproject.com/en/3.2/topics/auth/default/#django.contrib.auth.decorators.user_passes_test)）。

> **`class UserPassesTestMixin`**
> 
> 使用基于类的视图时，您可以使用 **`UserPassesTestMixin`**来执行此操作。
> 
> **`test_func()`**
> 
> 您必须重写**`test_func()`**类的方法以提供执行的测试。此外，您可以设置任何参数来自**`AccessMixin`**定义对未授权用户的处理：
> 
> ```
> from django.contrib.auth.mixins import UserPassesTestMixin
> 
> class MyView(UserPassesTestMixin, View):
> 
>     def test_func(self):
>         return self.request.user.email.endswith('@example.com') 
> ```

我们现在可以检查是否`self.request.user`允许处理传递给`self.request.GET`or的详细信息`self.request.POST`。

```
class MyView(UserPassesTestMixin, View):
    raise_exception = True  # To not redirect to the login url and just return 403\. For the other settings, see https://docs.djangoproject.com/en/3.2/topics/auth/default/#django.contrib.auth.mixins.AccessMixin

    def test_func(self):
        return (
            self.request.user.is_staff
            or self.request.user.has_perm('app.change_blog')
            or self.request.user.email.endswith('@company.staff.com')
            or is_requested_object_accessible(self.request.user, self.request.GET, self.request.POST)  # If you have a custom checker
        )
    ... 
```

# ios - IOS：无法获取iphone 4s和ipad 3的imei

> ID：10326940
> 
> 赞同：-5
> 
> 时间：2012-04-26T03:45:54.980
> 
> 标签：ios, imei

iphone手机imei的代码我在网上找的，在iphone 3gs/4/ipad 1/2代都可以访问，但是，在大部分iphone4s和ipad3上却不能正常访问，不知道用什么程序才能访问它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:48:51.273

The App Store is rejecting apps that access the IMEI now. You shouldn't need it.

# php - PHP 案例中的 OR 运算符

> ID：10326944
> 
> 赞同：0
> 
> 时间：2012-04-26T03:46:33.483
> 
> 标签：php, switch-statement, case

我想知道是否有办法在 case 语句中评估 OR，例如：

```
case 0 || 3:
    echo "equal to 0 or 3!";
    break; 
```

我试过|| 不久前，它似乎对我不起作用，谷歌也没有证明有帮助。
我只是想知道这一点，因为在某些情况下，案例中的 or 运算符会非常有用……
感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T03:47:26.437

你可以让案件通过。

```
case 0:
case 3:
   echo "equal to 0 or 3!";
   break; 
```

许多风格指南不建议这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:15:15.597

当使用解析为布尔值的逻辑和比较运算符时，您可以在需要第一种情况的情况下使用`switch(true)`（*或者实际上，任何“真实”值，由于检查的非严格性`switch`*`true`） 。

```
switch(true){
    case ($foo >= 0):
        break;
    case ($bar <= 0):
        break;
    case ($baz == 0):
        break;
    case ($foo > $bar && $bar < $baz):
        break;
    default:
        break;
} 
```

但是，有一些语法替代方案可能证明更易读，或提供更多控制。

正如@alex 指出的那样，如果您希望将多个案例解析为同一个代码块，您可以将它们堆叠起来并让它们通过。

# c# - 如何将 Matlab 生成的 dll 与 .net 集成？

> ID：10326947
> 
> 赞同：0
> 
> 时间：2012-04-26T03:46:52.987
> 
> 标签：c#, .net, assemblies, .net-framework-version

当我调用 make 它的对象时，我试图将 Matlab 生成的 dll 与我的 .net 项目集成，它给出了以下错误。

**错误 1 ​​无法加载文件或程序集“ChordRecognizerDotNETAssemplyForTuning”或其依赖项之一。此程序集由比当前加载的运行时更新的运行时构建，无法加载。**

正如您在图片中看到的那样，我已经安装了 MCR 和框架直到 4.0。请帮忙

![在此处输入图像描述](../Images/6071fbb51f357e4e0ca806eba64eb9c7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:59:32.203

把它放在你的主项目 app.config 文件中

```
 <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup> 
```

`useLegacyV2RuntimeActivationPolicy`应该做的伎俩。

并且不要忘记将您的目标框架设置为“.NET Framework 4”而不是“.NET Framework 4 Client Profile”

# iphone - 在 UILabel 中将单词居中的算法

> ID：10326948
> 
> 赞同：1
> 
> 时间：2012-04-26T03:46:56.887
> 
> 标签：iphone, ios, algorithm, uilabel

我需要在 iphone 应用程序的 UILabel 中将一个单词居中。我有一串文本太长而无法放入标签中，因此我想让标签以特定单词为中心并截断末端。例如：这是一个例句。“大家好，我一直在试图将 UILabel 中长句中的一个词居中。” 我想集中在“卡住”这个词上，以便 UILabel 看起来像这样，“......我被困住了...... **”**。我找到了一个指向具有相同问题的问题的链接，但我无法得到适合我的答案。我对这种编程非常陌生，因此非常感谢您提供任何进一步的帮助！提前致谢。这是另一个问题的链接：[iOS：在 UILabel 内的句子中居中单词的算法](https://stackoverflow.com/q/6949195/1243744)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T04:25:48.870

我只是编码并运行了它（但没有测试任何边缘情况）。这个想法是围绕单词创建一个 NSRange 居中，然后在每个方向上对称地扩大该范围，同时测试截断字符串的像素宽度与标签的宽度。

```
- (void)centerTextInLabel:(UILabel *)label aroundWord:(NSString *)word inString:(NSString *)string {

    // do nothing if the word isn't in the string
    //
    NSRange truncatedRange = [string rangeOfString:word];
    if (truncatedRange.location == NSNotFound) {
        return;
    }

    NSString *truncatedString = [string substringWithRange:truncatedRange];

    // grow the size of the truncated range symmetrically around the word
    // stop when the truncated string length (plus ellipses ... on either end) is wider than the label
    // or stop when we run off either edge of the string
    //
    CGSize size = [truncatedString sizeWithFont:label.font];
    CGSize ellipsesSize = [@"......" sizeWithFont:label.font];  // three dots on each side
    CGFloat maxWidth = label.bounds.size.width - ellipsesSize.width;

    while (truncatedRange.location != 0 &&
           truncatedRange.location + truncatedRange.length + 1 < string.length &&
           size.width < maxWidth) {

        truncatedRange.location -= 1;
        truncatedRange.length += 2;  // move the length by 2 because we backed up the loc
        truncatedString = [string substringWithRange:truncatedRange];
        size = [truncatedString sizeWithFont:label.font];
    }

    NSString *ellipticalString = [NSString stringWithFormat:@"...%@...", truncatedString];
    label.textAlignment = UITextAlignmentCenter;  // this can go someplace else
    label.text = ellipticalString;
} 
```

并这样称呼它：

```
[self centerTextInLabel:self.label aroundWord:@"good" inString:@"Now is the time for all good men to come to the aid of their country"]; 
```

如果你认为它是一个守门员，你可以把它改成 UILabel 上的一个分类方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T03:56:15.807

建议：使用**两个**标签，一个左对齐，一个右对齐。两者都应在“外部”（可见）标签边框的外侧截断，并并排放置。分配你的句子，你的中心词构成两者之间的过渡。

这样，你不会得到一个完美的居中（它会随着你的中心词的长度而变化），但它会接近它。

# node.js - 在 EJS 中将变量呈现为 HTML

> ID：10326950
> 
> 赞同：111
> 
> 时间：2012-04-26T03:47:04.907
> 
> 标签：node.js, express, ejs

我正在使用 Node.js ( [Forms](https://github.com/caolan/forms) ) 的 Forms 库，它将在后端为我呈现一个表单，如下所示：

```
var signup_form = forms.create({
    username: fields.string({required: true})
    , password: fields.password({required: true})
    , confirm:  fields.password({
        required: true
        , validators: [validators.matchField('password')]
    })
    , email: fields.email()
});
var signup_form_as_html = signup_form.toHTML(); 
```

最后一行`var signup_var signup_form_as_html = signup_form.toHTML();`创建了一个 HTML 块，如下所示：

```
<div class="field required"><label for="id_username">Username</label><input type="text" name="username" id="id_username" /></div><div class="field required"><label for="id_password">Password</label><input type="password" name="password" id="id_password" /></div><div class="field required"><label for="id_confirm">Confirm</label><input type="password" name="confirm" id="id_confirm" /></div><div class="field"><label for="id_email">Email</label><input type="text" name="email" id="id_email" /></div> 
```

基本上只是一长串HTML。然后我尝试使用 EJS 和 Express 使用以下代码呈现它：

```
res.render('signup.ejs', {
    session: loginStatus(req)
    , form: signup_form_as_html
}); 
```

但是在呈现 HTML 时，只是我在上面发布的字符串，而不是实际的 HTML（因此是我想要的表单）。有没有办法使用 EJS 使该字符串呈现为实际的 HTML？还是我必须使用 Jade 之类的东西？

* * *

## 回答 #1

> 赞同：333
> 
> 时间：2012-04-26T09:09:38.623

使用 EJS，您可以拥有多个标签：

```
 <% code %> 
```

...这是评估但未打印出来的代码。

```
 <%= code %> 
```

...这是被评估和打印出（转义）的代码。

```
 <%- code %> 
```

...这是评估和打印出来的代码（未转义）。

由于您想打印变量而不是转义它，因此您的代码将是最后一种类型（带有`<%-`）。在你的情况下：

```
 <%- my_form_content %> 
```

有关更多标签，请参阅[完整的 EJS 文档](https://ejs.co/#docs)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-10-08T06:48:49.280

### 2017 年 10 月更新

新的**ejs** (v2, v2.5.7) 开发在这里进行：[https](https://github.com/mde/ejs) ://github.com/mde/ejs 旧的 ejs (v0.5.x, 0.8.5, v1.0.0) 在这里[https://github.com/mde/ejs /github.com/tj/ejs](https://github.com/tj/ejs)

现在有了 ejs，你可以做更多的事情。您可以使用：

*   转义输出`<%= %>`（转义功能可配置）
*   未转义的原始输出`<%- %>`
*   `-%>`带有结束标签的换行修剪模式（'newline slurping'）
*   用于控制流的空白修剪模式（啜食所有空白）`<%_ _%>`
*   控制流`<% %>`

`<%- variable %>`所以，在你的情况下，它将是`variable`类似的东西

```
var variable = "text here <br> and some more text here"; 
```

我希望这可以帮助别人。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-08-20T05:48:12.233

从所见即所得编辑器渲染文本区域输入时，我遇到了同样的问题，该编辑器在我的数据库中保存为 html。浏览器不会呈现它，而是将 html 显示为文本。经过几个小时的搜索，我发现

`<%= data %>`转义数据，而

`<%- data %>`留下数据'原始'（未转义），浏览器现在可以呈现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-18T08:43:12.737

根据 ejs[文档](https://ejs.co/)

<% 'Scriptlet' 标签，用于控制流，无输出

<%_ 'Whitespace Slurping' Scriptlet 标记，去掉它之前的所有空格

<%= 将值输出到模板中（HTML 转义）

<%- 将未转义的值输出到模板中

<%# 注释标签，不执行，不输出

<%% 输出文字 '<%'

%> 普通结束标签

-%> Trim-mode ('newline slurp') 标签，在换行符之后进行修剪

_%> 'Whitespace Slurping' 结束标签，删除它后面的所有空格

# android - 如果在将数据发布到服务器并等待服务器响应后网络不可用，HTTP setReadTimeOut 可以工作

> ID：10326951
> 
> 赞同：3
> 
> 时间：2012-04-26T03:47:19.213
> 
> 标签：android, communication

我正在通过 HTTP 连接将数据从 Android Mobile 发布到服务器。我能够将数据发布到服务器并得到服务器的确认。但是有时，如果我的服务器通信线程在发布数据后等待来自服务器的确认，那么我失去了 Internet 连接并且线程无法从服务器接收 Ack 并进入无限循环。我尝试了 setReadTimeOut(180000) 方法。

它可以为我工作吗？如果没有网络可用/服务器和移动设备之间没有连接，它是否会给出 SocketTimeOutException

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:47:20.283

设置超时很可能会起作用。但是，我不建议将其设置为 180000（= 180 秒 = 3 分钟！）。30 秒通常绰绰有余。您可能还想添加一个[setConnectTimeout](http://developer.android.com/reference/java/net/URLConnection.html#setConnectTimeout(int))

请注意，在某些情况下 HttpUrlConnection 并不总是正常工作：

1.  Android 版本 2.2 或更早版本，这些版本最好使用 Apache HTTP 客户端（另见[这篇文章](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)）
2.  在模拟器上（另见[这篇文章](https://stackoverflow.com/a/8522632/741249)）

# java - 如何使用 PreparedStatement 和不区分大小写的搜索

> ID：10326952
> 
> 赞同：1
> 
> 时间：2012-04-26T03:47:19.743
> 
> 标签：java, postgresql, prepared-statement, case-insensitive

**1.如何将 PrepareStatement 用于姓氏和名字？
2.另外，如何按姓氏或名字进行不区分大小写的搜索？**

```
String query ="SELECT agent.familyname, agent.givenname" +
                    " FROM agent" +
                    " WHERE agent.agentid = piececreation.agentid" +
                    " AND (LOWER(familyname) = '"+agent_lastname+"' OR LOWER(givenname) = '"+agent_name+"') ORDER by familyname";

            PreparedStatement pst = conn.prepareStatement(query, Statement.RETURN_GENERATED_KEYS);
            pst.setString(1, agent_lastname);
            pst.setString(2, agent_name);
            // Executing the insert
            pst.executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:52:05.177

将 familyName 或 givenName 也设为小写，因为您已经在使用 LOWER DB API

```
String query ="SELECT agent.familyname, agent.givenname" +
                        " FROM agent" +
                        " WHERE agent.agentid = piececreation.agentid" +
                        " AND (LOWER(familyname) = '"+agent_lastname.toLowerCase()+"' OR LOWER(givenname) = '"+agent_name.toLowerCase()+"') ORDER by familyname"; 
```

当您使用`PreparedStatement`不直接在 SQL 中附加值时，如果这样做，您很容易受到[SQL 攻击](http://en.wikipedia.org/wiki/SQL_injection)，而是参数化您的值。

```
String query = 
                "SELECT agent.familyname, agent.givenname"
                + " FROM agent"
                + " WHERE agent.agentid = ?"
                + " AND (" 
                + " LOWER(familyname) = ? OR LOWER(givenname) = ?" 
                + ") " 
                + " ORDER by familyname";

        pst.setInt(1, piececreation.agentid);
        pst.setString(2, agent_lastname.toLowerCase());
        pst.setString(3, agent_name.toLowerCase()); 
```

[然后调用此处](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)定义的适当 setXXX 方法设置值。

[你可以在这里](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)阅读教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:11:35.840

您可以使用以下查询进行不区分大小写的搜索。

```
String query = 
                "SELECT agent.familyname, agent.givenname"
                + " FROM agent"
                + " WHERE agent.agentid = ?"
                + " AND (" 
                + " familyname ilike ? OR givenname ilike ?" 
                + ") " 
                + " ORDER by familyname";

        pst.setInt(1, piececreation.agentid);
        pst.setString(2, agent_lastname.toLowerCase());
        pst.setString(3, agent_name.toLowerCase()); 
```

# php - 使用 FormData 对象，服务器收到一个空的 POST

> ID：10326955
> 
> 赞同：3
> 
> 时间：2012-04-26T03:47:27.303
> 
> 标签：php, javascript, ajax, xmlhttprequest

我正在尝试使用 FormData 对象将一个文件和一个文本变量发送到我的服务器。查看 Chrome 开发者工具中的网络选项卡，我可以看到文件和变量正在发送。但是，我在 $_POST 和 $_FILES 变量上尝试了 var_dump() ，两者都显示为空数组。这是我用于表单的代码：

```
var image_upload = document.getElementById("image_upload");

if(image_upload.value == '')
{
   alert("Please select a file to upload.");
}
else
{
   alert("in");
   var ajaxHandler = new XMLHttpRequest();
   var content = image_upload.files[0];
   var formData = new FormData();
   formData.append("type", "5");
   formData.append("content", content)

   ajaxHandler.onreadystatechange = function() {
      if(ajaxHandler.readyState == 4)
      {
         alert(ajaxHandler.responseText);
      }
   };

   ajaxHandler.open("POST", "newCard", false);
   ajaxHandler.setRequestHeader("Content-type","multipart/form-data");
   ajaxHandler.send(formData);
} 
```

我已经尝试过在内容类型中使用和不使用“charset = utf-8”的这段代码，它似乎没有任何区别。这里发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T04:01:56.383

`ajaxHandler.setRequestHeader("Content-type","multipart/form-data");`从代码中删除。正确的 multipart/form-data 标头应包含边界字符串。如果您在 FormData 中添加文件，浏览器会自动设置该标题。

# javascript - jQuery Rotate Function Img Selecting

> ID：10326959
> 
> 赞同：1
> 
> 时间：2012-04-26T03:48:04.337
> 
> 标签：javascript, jquery, function, html, selector

**I'm trying to** use jQuery to rotate an image 90 degrees upon click on my div. Why doesn't it work?

Here's my HTML ...

```
<div class="class1">
    <div class="class2">
        <img id="whatever">
    </div>
</div> 
```

.. and here's my jQuery ;

```
 jQuery(document).ready(function() {
       jQuery(".class1").click(function()
               {
            jQuery(this).find('img').rotate({animateTo:-90})
               });
             }); 
```

If it helps, [http://code.google.com/p/jqueryrotate/wiki/Examples](http://code.google.com/p/jqueryrotate/wiki/Examples)

NOTE: **I need the code to FIND the first image...not just get the image by id, then rotate it.**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:17:23.450

根据@Abdullah Jibaly 的帖子并查看评论。我想你想念类似的东西

```
<script src="http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate.js"></script> 
```

这是一个旋转第一张图片的例子[http://jsfiddle.net/oamiamgod/BeUBF/2/](http://jsfiddle.net/oamiamgod/BeUBF/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-19T17:02:27.020

// 根据使用情况

```
<div class="class1">
    <div class="class2">
        <img src="https://www.google.com/images/srpr/logo3w.png">
        <img src="https://www.google.com/images/srpr/logo3w.png" >
    </div>
</div>
        <button id='test'>click</button>

<script>
jQuery(document).ready(function() {
    var setvalue=90;
    jQuery("#test").click(function() {
        jQuery('.class1').find('img').rotate({
            animateTo: setvalue
        });
                setvalue=setvalue+90;        
    });
});
</script> 
```

[https://code.google.com/p/jqueryrotate/wiki/Examples](https://code.google.com/p/jqueryrotate/wiki/Examples)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T04:00:57.523

你的代码看起来很好，我猜插件没有被加载或者给定上下文之外的其他东西出错了。

要获得第一个 img，您可以使用：

```
jQuery(this).find('img').first().rotate({animateTo:-90}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T03:52:29.787

fisrt letter of `class` name should not be a number, change them to `class1` and `class2` instead and add quotation marks for `animateTo` value:

```
<div class="class1">
    <div class="class2">
        <img id="whatever">
    </div>
</div>

  $(document).ready(function() {
       $(".class1").click(function(){
            $(this).find('img').rotate({animateTo: "-90"})
       });
  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T03:55:10.810

试试看

```
 <div class="class1">
        <div class="class2">
            <img id="whatever">
        </div>
    </div>

jQuery(document).ready(function() {
    jQuery(".class1").click(function()
    {
       $("#whatever").rotate(90);
    });
}); 
```

# iphone - UIView animated swap views (slide down)

> ID：10326962
> 
> 赞同：0
> 
> 时间：2012-04-26T03:48:15.423
> 
> 标签：iphone, animation, view, transition

This is what i have so far. What I am trying to do is make the starting view (startUpView) to switch to the other view (creatNewGameViewController) by sliding down the screen with the new view. All it does now is switch views normally, but i really want that sliding effect. If anyone can spot the error in my code it would be much appreciated. Thanks

```
#import "CreateNewGameViewController.h"
@synthesize createNewGameViewController;
UIButton *mainCreateGame = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[mainCreateGame addTarget:self
                   action:@selector(goToCreateGameViewController)
         forControlEvents:UIControlEventTouchUpInside];
[mainScroll addSubview:mainCreateGame];
mainCreateGame.frame = CGRectMake(65, 10, 190, 60);

-(void)goToCreateGameViewController{
CreateNewGameViewController *newGame = [[CreateNewGameViewController alloc]initWithNibName:@"CreateNewGameViewController" bundle:nil];
self.createNewGameViewController = newGame;

CATransition *transition = [CATransition animation];
transition.duration = 2;
transition.timingFunction = [CAMediaTimingFunction      
                             functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type =kCATransitionMoveIn;

CATransition *transition1 = [CATransition animation];
transition1.duration = 2;
transition1.timingFunction = [CAMediaTimingFunction      
                             functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition1.type =kCATransitionMoveIn;
transition1.subtype =kCATransitionFromTop;

transition1.delegate   = self;

[createNewGameViewController.view.layer addAnimation:transition1 forKey:nil];
transition1.subtype =kCATransitionFromTop;

transition1.delegate = self;

[self presentModalViewController:newGame animated:NO];
[self.view insertSubview:newGame.view atIndex:0];

[createNewGameViewController.view.layer addAnimation:transition1 forKey:nil]; 

[newGame release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:55:08.080

UIView 有一个类方法，称为从视图到动画视图的转换，检查是否有帮助并告诉我它是怎么回事:)

[界面视图](http://developer.apple.com/library/ios/ipad/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)

一条建议，你真的应该使用导航控制器、故事板或类似的东西来做那种视图转换，因为这是正确的做法。

# xml - 使用 xsl 创建本地化内容

> ID：10326974
> 
> 赞同：1
> 
> 时间：2012-04-26T03:49:58.680
> 
> 标签：xml, xslt, localization

给定一个具有以下结构的输入文件：

```
<resources>
    <text name="property.to.match">
        <en_US>The American translation</en_US>
        <en_GB>The British translation</en_GB>
        <en>The language localized, but non locale based generic translation</en>
    </text>
    <text name="other.property.to.match">
        <en>The other language localized, but non locale based generic translation</en>
    </text
</resources> 
```

还有一个模板文件，我可以读入具有以下结构的样式表：

```
<html>
    <div>Lot's of html</div>
    <div>[property.to.match]</div>
    <div>[other.property.to.match]</div>
</html> 
```

如何让 xsl 输出模板的本地化版本...例如，如果我将 en_US 作为参数传递给样式表，我想要以下输出：

```
<html>
    <div>Lot's of html</div>
    <div>The American translation</div>
    <div>The other language localized, but non locale based generic translation</div>
</html> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:43:31.983

这是一个快速编写的样式表，应该可以完成这项工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:param name="lang">en_US</xsl:param>
  <xsl:variable name="text" select="document('resources.xml')//text"/>

  <xsl:template match="html">
    <html>
      <xsl:apply-templates/>
    </html>
  </xsl:template>

  <xsl:template match="div"> 
    <xsl:variable name="id" select="substring(., 2 , string-length(.)-2)"/>
    <xsl:variable name="repl">
      <xsl:choose>
        <xsl:when test="$text[@name=$id]/*[name()=$lang]">
          <xsl:value-of select="$text[@name=$id]/*[name()=$lang]"/>          
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="$text[@name=$id]/*[name()=substring-before($lang, '_')]"/>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:variable>    
    <div>
      <xsl:choose>
        <xsl:when test="substring(.,1,1)='[' and substring(.,string-length(.))=']' and $repl!=''">
          <xsl:value-of select="$repl"/>
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="."/>
        </xsl:otherwise>
      </xsl:choose>
    </div>
  </xsl:template>
</xsl:stylesheet> 
```

$lang='en_US' 的输出：

```
<html>
  <div>Lot's of html</div>
  <div>The American translation</div>
  <div>The other language localized, but non locale based generic translation</div>
</html> 
```

$lang='en_GB' 的输出：

```
<html>
  <div>Lot's of html</div>
  <div>The British translation</div>
  <div>The other language localized, but non locale based generic translation</div>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:11:18.393

**这是一种更有效的基于键的查找**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pLookupPath" select="'file:///c:/temp/delete/lookup2.xml'"/>
 <xsl:param name="pLang" select="'en_GB'"/>

 <xsl:key name="kLookup" match="text/*"
  use="concat(../@name, '+', name())"/>

 <xsl:variable name="vDict" select="document($pLookupPath)"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "div/text()
     [starts-with(., '[')
    and substring(., string-length(),  1) = ']'
      ]">

  <xsl:variable name="vTextName" select="substring(., 2, string-length() -2)"/>

  <xsl:for-each select="$vDict">
   <xsl:value-of select=
    "(key('kLookup', concat($vTextName, '+', $pLang))
    |
      key('kLookup', concat($vTextName, '+', substring-before($pLang, '_')))
      )[1]
    "/>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**如果提供的翻译文件位于`c:/temp/delete/lookup2.xml`并且何时对提供的 XML 文档应用转换**：

```
<html>
    <div>Lot's of html</div>
    <div>[property.to.match]</div>
    <div>[other.property.to.match]</div>
</html> 
```

**产生了想要的正确结果**：

```
<html>
   <div>Lot's of html</div>
   <div>The British translation</div>
   <div>The other language localized, but non locale based generic translation</div>
</html> 
```

* * *

**二、XSLT 2.0 解决方案：**

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pLookupPath" select="'file:///c:/temp/delete/lookup2.xml'"/>
 <xsl:param name="pLang" select="'en_GB'"/>

 <xsl:key name="kLookup" match="text/*"
  use="concat(../@name, '+', name())"/>

 <xsl:variable name="vDict" select="document($pLookupPath)"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "div/text()
     [starts-with(., '[') and ends-with(., ']')]">

  <xsl:variable name="vTextName" select="substring(., 2, string-length() -2)"/>

   <xsl:sequence select=
    "(key('kLookup', concat($vTextName, '+', $pLang), $vDict)
    ,
      key('kLookup', concat($vTextName, '+', substring-before($pLang, '_')),
          $vDict)
      )[1]
    "/>
 </xsl:template>
</xsl:stylesheet> 
```

# javascript - How to find and click :javascript links using Selenium Ruby?

> ID：10326978
> 
> 赞同：0
> 
> 时间：2012-04-26T03:51:02.073
> 
> 标签：javascript, ruby, selenium, hyperlink

I want to click on all :javascript links on page that I am loading in Firefox using Selenium Ruby.

What could be the correct method for doing this? I did for simple links like this:

```
require 'rubygems'
require 'selenium-webdriver'

driver = Selenium::WebDriver.for :firefox
driver.get " http://www.testfire.net "
driver.find_elements(:tag_name, "a").each {|link| link.open} 
```

Though its not working properly due to some error

```
Selenium Test.rb:6: private method `open' called for #<Selenium::WebDriver::Element:0x4c155f0> (NoMethodError)
        from Selenium Test.rb:6:in `each'
        from Selenium Test.rb:6 
```

Can :javascript links can be clicked using find_element method? The problem I am facing here is that if it clicks one link successfully and open it , it crashes while going for next. How to keep this continue till all links in page gets clicked.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T07:58:03.707

我看到脚本有两个问题：

1.  您正在尝试使用 Element 类的私有方法。要打开链接，您需要所有 element.click，而不是 element.open：这应该可以

    driver.find_elements(:tag_name, "a")[0].click

2.  不要遍历页面上的链接并尝试单击它们，而不能确保在下次单击之前返回初始页面。否则 Selenium 会失去上下文，并会给你以下消息：

    Selenium::WebDriver::Error::StaleElementReferenceError

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T09:57:20.483

> 试试下面的代码。我对 Ruby 不太熟悉，下面的代码可能对你有帮助

```
link = driver.find_elements(:tag_name, "a")
i = 0
link.times do
{
link[i].click
driver.navigate.back
i=i+1
link = driver.find_elements(:tag_name, "a")
} 
```

# ios5 - Init and playing MPMoviePlayerController returns black screen

> ID：10326980
> 
> 赞同：4
> 
> 时间：2012-04-26T03:51:08.103
> 
> 标签：ios5, mpmovieplayercontroller, xcode4.3

I am trying to play an mp4 video under iPhone Simulator 5.1 using some sample code from Xcode. I created both MPMovieViewController and MPMovieController, supply a local path which contains the mp4 and add it as subview to my root controller.

When I run it under iPhone Simulator, only back screen shown. I've tried a couple of suggestions of the same problem in SO but still it doesn't work.

Here's the code:

```
 NSURL *myURL = [[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:@"VIDEO_CX75_01" ofType:@"mp4"]];

    MPMoviePlayerViewController *moviePlayerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:myURL];        
    MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL: myURL];

    [self presentMoviePlayerViewControllerAnimated:moviePlayerViewController];

    [player.view setFrame: self.view.bounds];  // player's frame must match parent's
    [self.view addSubview: player.view];
    player.view.frame = self.view.frame;

    player.initialPlaybackTime = -1.0;
    [player prepareToPlay];
    [player play]; 
```

Where I am doing it wrong?

PS: I am on Xcode 4.3.2

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T20:02:12.800

我有同样的问题，我所做的就是让 player 成为一个强大的属性并合成它。有效。

也应该适用于您的情况。！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:50:15.200

决定并使用其中一个`MPMoviePlayerViewController` **或** `MPMoviePlayerController`两个，但不能同时使用。

```
NSURL *myURL = [[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:@"VIDEO_CX75_01" ofType:@"mp4"]];
MPMoviePlayerViewController *moviePlayerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:myURL];        
[self presentMoviePlayerViewControllerAnimated:moviePlayerViewController]; 
```

**或者**

```
NSURL *myURL = [[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:@"VIDEO_CX75_01" ofType:@"mp4"]];
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL: myURL];
player.view.frame = self.view.bounds;
[self.view addSubview:player.view];
player.initialPlaybackTime = -1.0;
[player prepareToPlay];
[player play]; 
```

# c# - C# delegates with flexible signatures

> ID：10326981
> 
> 赞同：1
> 
> 时间：2012-04-26T03:51:23.203
> 
> 标签：c#, delegates

What I want to do is to execute a method on one of various objects, but before and after the method call, I need to execute functions to do various maintenance tasks. The functions to run before and after are always the same. The method's return type and parameters can be almost anything.

Currently, I'm doing this by defining delegates for every possible method signature that I'm using, and it's getting stupendously awkward to do. This is one example:

```
protected delegate void DelVoidString(string string1);
protected void Execute(DelVoidString p, string string1)
{
    PreInvoke();
    p.Invoke(string1);
    PostInvoke();
} 
```

Other than the signatures, the code on all of them is identical. So my question is: is there a better way of doing this? I'm not attached to using delegates, just as long as I have some means of executing PreInvoke() and PostInvoke() before and after those method calls that need them, without having to remember to write out that code every single time.

I have only a vague knowledge of Lambda expressions...can they help me out better here? Or am I missing something else stupendously obvious? Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T03:58:49.630

您可以使用泛型和内置`System.Action`委托类型来减少一些重复：

```
protected void Execute(Action action)
{
    PreInvoke();
    action();
    PostInvoke();
}

protected void Execute<T>(Action<T> action, T arg)
{
    PreInvoke();
    action(arg);
    PostInvoke();
}

protected void Execute<T1, T2>(Action<T1, T2> action, T1 arg1, T2 arg2)
{
    PreInvoke();
    action(arg1, arg2);
    PostInvoke();
}

// Additional methods for three arguments, four arguments, etc. 
```

要处理返回值，请使用`System.Func`：

```
protected TResult Execute<TResult>(Func<TResult> func)
{
    PreInvoke();
    TResult result = func();
    PostInvoke();
    return result;
}

protected TResult Execute<T, TResult>(Func<T, TResult> func, T arg)
{
    PreInvoke();
    TResult result = func(arg);
    PostInvoke();
    return result;
} 
```

您可能还想研究 C# 的面向方面编程 (AOP)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:25:19.143

如果您需要这种用于很多方法的前/后调用机制，我认为您应该考虑使用适用于 .net 的[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming "AOP")工具，例如[PostSharp](http://www.sharpcrafters.com/ "PostSharp")。

您可以在[Dror Helper 博客](http://blog.drorhelper.com/2011/11/list-executed-code-using-postsharp.html "List executed code using PostSharp")或 PostSharp 站点中的示例下查看使用 PostSharp 的*OnMethodBoundaryAspect的*[示例](http://www.sharpcrafters.com/solutions "Examples")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:24:32.573

提供其他人提供的主题的变体 - 您可以考虑创建一个通用抽象基类并从它继承，如下所示：

```
public abstract class Executable<T>
{
    protected void Execute(Action<T> action, T value)
    {
        PreInvoke();
        action();
        PostInvoke();
    }
    private void PreInvoke() { /* something */ }
    private void PostInvoke() { /* something */ }
}

public MyFooExecutable : Executable<string>
{
} 
```

这种实现将泛型类型关闭到`string`类上`MyFooExecutable`。这将允许您拥有改变类型的其他子类，而不会为所有类型的 T 保留类型。根据您的 Pre/Post-Invoke 方法所做的事情，您甚至可以将它们放入扩展方法并编码到接口中：

```
public interface IInvocable
{
   void PreInvoke();
   void PostInvoke();
}

public class MyFooExecutable : IInvocable
{
    public void PreInvoke() { /* something */ }
    public void PostInvoke() { /* something */ }
}

public static class InvocableExtensions
{
    public static void Execute<T>(this IInvocable self, Action<T> action, T value)
    {
        self.PreInvoke();
        action(value);
        self.PostInvoke();
    }
} 
```

# javascript - Form - How to submit and go to url?

> ID：10326982
> 
> 赞同：0
> 
> 时间：2012-04-26T03:51:25.840
> 
> 标签：javascript, forms

I have this form below which is perfect for my needs with dependent fields. What I would like to do is when someone selects one of the subcategories (ie: Beddings), they would then be transferred to a url (ex: www.beddings.com). But this is far beyond my understanding!

Any help would be appreciated!

Here is a demo of this form: [http://www.tamilcodes.com/demopages/jsdropdownlist.html](http://www.tamilcodes.com/demopages/jsdropdownlist.html)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script language="javascript" type="text/javascript">
function dropdownlist(listindex)
{

document.formname.subcategory.options.length = 0;
switch (listindex)
{

case "Home Ware" :
document.formname.subcategory.options[0]=new Option("Select Sub-Category","");
document.formname.subcategory.options[1]=new Option("Air-Conditioners/Coolers","Air-                               Conditioners/Coolers");
document.formname.subcategory.options[2]=new Option("Audio/Video","Audio/Video");
document.formname.subcategory.options[3]=new Option("Beddings","Beddings");
document.formname.subcategory.options[4]=new Option("Camera","Camera");
document.formname.subcategory.options[5]=new Option("Cell Phones","Cell Phones");

break;

case "Education" :
document.formname.subcategory.options[0]=new Option("Select Sub-Category","");
document.formname.subcategory.options[1]=new Option("Colleges","Colleges");
document.formname.subcategory.options[2]=new Option("Institutes","Institutes");
document.formname.subcategory.options[3]=new Option("Schools","Schools");
document.formname.subcategory.options[4]=new Option("Tuitions","Tuitions");
document.formname.subcategory.options[5]=new Option("Universities","Universities");

break;

case "Books" :
document.formname.subcategory.options[0]=new Option("Select Sub-Category","");
document.formname.subcategory.options[1]=new Option("College Books","College Books");
document.formname.subcategory.options[2]=new Option("Engineering","Engineering");
document.formname.subcategory.options[3]=new Option("Magazines","Magazines");
document.formname.subcategory.options[4]=new Option("Medicine","Medicine");
document.formname.subcategory.options[5]=new Option("References","References");

break;

}
return true;
}
</script>
</head>
<title>Dynamic Drop Down List</title>
<body>

<form id="formname" name="formname" method="post" action="submitform.asp" >
<table width="50%" border="0" cellspacing="0" cellpadding="5">
<tr>
<td width="41%" align="right" valign="middle">Category :</td>
<td width="59%" align="left" valign="middle"><select name="category" id="category"         onchange="javascript: dropdownlist(this.options[this.selectedIndex].value);">
<option value="">Select Category</option>
<option value="Home Ware">Home Ware</option>
<option value="Education">Education</option>
<option value="Books">Books</option>
</select></td>
</tr>
<tr>
<td align="right" valign="middle">Sub Category :
</td>
<td align="left" valign="middle"><script type="text/javascript" language="JavaScript">
document.write('<select name="subcategory"><option value="">Select Sub-    Category</option>        </select>')
</script>
<noscript><select name="subcategory" id="subcategory" >
<option value="">Select Sub-Category</option>
</select>
</noscript></td>
</tr>
</table>

</form> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T03:56:23.610

您可以使用 javascript 执行以下操作

```
window.location = url 
```

您需要检查子类别并相应地设置 url。

干得好

```
function redirect_subCategory() 
{
var e = document.getElementById("subcategory"); //set subcategory as id of select box
var subcategory = e.options[e.selectedIndex].value;

switch (subcategory)
{

case "Colleges" :
windows.location = "www.colleges.com";

break;

case "Institutes" :
windows.location = "www.insitutes.com";

break;

case "Schools" :
windows.location = "www.schools.com";

break;

case "Tuitions" :
windows.location = "www.tuitions.com";

break;

case "Universities" :
windows.location = "www.universities.com";

break;

}
} 
```

创建一个函数并将上面的代码保留在其中。在选择框的 onchange 事件中调用该函数为 -

```
<select id="subcategory" onchange='redirect_subCategory()'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:20:41.587

不确定您是否要实际发布到表单；如果没有，您可以使用您的 Option 结构来存储您的目标路径，创建一个导航到 url 的函数，并从第二个下拉列表的 onChange 事件中调用，即：

```
<script language="javascript" type="text/javascript">
  function dropdownlist(listindex)
  {
    document.formname.subcategory.options.length = 0;
    switch (listindex)
    {
      case "Home Ware" :
        document.formname.subcategory.options[0]=new Option("Select Sub-Category","");
        document.formname.subcategory.options[1]=new Option("Air-Conditioners/Coolers", "www.google.com");
        document.formname.subcategory.options[2]=new Option("Audio/Video", "www.yahoo.com");
        document.formname.subcategory.options[3]=new Option("Beddings", "www.ikea.com");
        document.formname.subcategory.options[4]=new Option("Camera", "www.apple.com");
        document.formname.subcategory.options[5]=new Option("Cell Phones", "www.sprint.com");
        break;
      case "Education" :
        document.formname.subcategory.options[0]=new Option("Select Sub-Category","");
        document.formname.subcategory.options[1]=new Option("Colleges", "www.aol.com");
        document.formname.subcategory.options[2]=new Option("Institutes", "www.facebook.com");
        document.formname.subcategory.options[3]=new Option("Schools", "www.pintrest.com");
        document.formname.subcategory.options[4]=new Option("Tuitions", "www.lottopick.in");
        document.formname.subcategory.options[5]=new Option("Universities", "www.cnn.com");
        break;
      case "Books" :
        document.formname.subcategory.options[0]=new Option("Select Sub-Category","");
        document.formname.subcategory.options[1]=new Option("College Books","www.oracle.com");
        document.formname.subcategory.options[2]=new Option("Engineering","stackoverflow.com");
        document.formname.subcategory.options[3]=new Option("Magazines","monster.com");
        document.formname.subcategory.options[4]=new Option("Medicine","www.twitter.com");
        document.formname.subcategory.options[5]=new Option("References","www.yelp.com");
        break;
    }
    return true;
  }

  function navigate(target){
    window.location.href = 'http://' + target;
  }
</script> 
```

还：

```
 <tr>
      <td align="right" valign="middle">Sub Category : </td>
      <td align="left" valign="middle">
        <select name="subcategory" onchange="javascript:navigate(this.options[this.selectedIndex].value);">
          <option value="">Select Sub-Category</option>
        </select>
      </td>
    </tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T03:56:10.770

您应该为 Select 框的 onChange 事件编写一个 java 函数。

在该函数中，使用 window.location 重定向到页面..

例如：

```
function redirect() {
      window.location = 'www.beddings.com';
} 
```

# ruby - Find all manually installed Ruby Gems?

> ID：10326983
> 
> 赞同：1
> 
> 时间：2012-04-26T03:51:45.327
> 
> 标签：ruby, rubygems

I found [this script](https://gist.github.com/915271) that find all manually installed packages in Fedora (every argument that I passed `yum install`). Specifically, the script does not return dependencies that were automatically installed. Is there something similar for Ruby Gems?

Otherwise, does Ruby Gems keep a command history somewhere?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:05:17.957

如果 YUM 像 APT 一样工作（我假设它基于您的描述），它会识别显式安装的包（如您所说的“手动”）和隐式安装的包（即作为依赖项）之间的区别。

Rubygems 没有这样的区别，因此这是不可能的。正如评论中提到的，Bundler 可以做到这一点，但这是在项目级别而不是系统级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T08:18:34.810

```
history | grep "gem install" 
```

这将显示您在运行它的计算机中使用的所有 gem 安装命令。

# php - Session variables doesn't work with background process in php

> ID：10326985
> 
> 赞同：1
> 
> 时间：2012-04-26T03:52:05.043
> 
> 标签：php, session-variables, background-process

Does session variables work when using background process?

I have two php scripts - index.php:

```
session_start();
$_SESSION['test'] = 'test';

$WshShell = new COM("WScript.Shell");
$oExec = $WshShell->Run("C:/xampp/php/php-cgi.exe -f C:/xampp/htdocs/sand_box/background.php".session_id(), 0, false);
/*
continue the program
*/ 
```

and the background.php:

```
session_id($argv[1]);
session_start();

sleep(5);

$test = $argvs[1];

$myFile = "myFile.txt";
$fh = fopen($myFile, 'w') or die("can't open file");
fwrite($fh, $test);
fclose($fh); 
```

The background process creates the myFile.txt however the session variable doesn't work. I did some other tests and it doesn't work in any case. Anyone knows why?

Is it a limitation of using a background process?

I edited the code, my problem now is that I can't pass any variable as arguments. $argv is always empty.

I finally solved it, register_argc_argv must be enabled on php.ini!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:05:09.480

php 通常从 cookie 或 http 请求字段中获取会话 ID。当您直接通过命令行执行时，它们都不可用。因此，请考虑通过命令行参数或环境变量传递 session_id()，然后在生成的脚本中通过

```
session_start($the_session_id); 
```

接下来，您需要确保其他 php 实例使用相同的配置。它可以使用不同的设置`session_save_path`。通过 phpinfo() 检查并根据需要进行调整。

最后，php 在会话文件上使用独占锁定模型。因此，一次只有一个进程可以打开特定会话 ID 的会话文件。php 通常在执行完脚本后释放对会话文件的锁定，但您可以通过 session_write_close() 更快地实现这一点。如果您在生成另一个脚本之前不调用 session_write_close()，则另一个脚本在`session_start($the_session_id);`被调用时将陷入死锁。

但是......如果第二个脚本不需要修改会话，甚至不要打扰。只需将它需要的值传递给它并忘记会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:05:23.520

您可以传递`session_id`给后台脚本：

```
$oExec = $WshShell->Run("C:/xampp/php/php-cgi.exe -f C:/xampp/htdocs/sand_box/background.php " . session_id(), 0, false); 
```

在您的后台脚本中，您写为第一行：

```
session_id($argv[1]);
session_start(); 
```

**编辑**：正如@chris 所提到的，由于锁定，您需要知道后台脚本将等待`index.php`停止执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:03:24.393

COM 调用的 PHP 进程将不知道用户已经建立的会话。相反，您应该尝试将会话值作为参数传递给`background.php`脚本：

```
$oExec = $WshShell->Run(sprintf("C:/xampp/php/php-cgi.exe -f C:/xampp/htdocs/sand_box/background.php %s", $_SESSION['test']) , 0, false); 
```

然后在您的`background.php`您应该能够通过以下方式访问该值`$argv`：

```
// You should see the session value as the 2nd value in the array
var_dump($argv);

$myFile = 'myFile.txt';
.... 
```

以上只是一个理论，因为我之前没有运行过`COM`，但应该可以。

更多关于 argv[的信息](http://www.php.net/manual/en/reserved.variables.argv.php)。

**- 更新 -**

```
session_start();

$WshShell = new COM("WScript.Shell");

// Notice the space between background.php and session_id()
$oExec = $WshShell->Run("C:/xampp/php/php-cgi.exe -f C:/xampp/htdocs/sand_box/background.php " . session_id(), 0, false); 
```

# javascript - Javascript eval() for Json strings injects global scope functions

> ID：10326987
> 
> 赞同：0
> 
> 时间：2012-04-26T03:52:19.923
> 
> 标签：javascript, json, parsing, eval

I've got a perfectly correct Json string which gets parsed inside a function's method by using the eval function. When that is done, though, for some unknown reason the first line of a globally defined method is injected inside as one of the array's parameters.

the string being parsed is:

{"id":1,"name":"object1","volume":15,"weight":100}

The parsing line is:

var decoded = eval('(' + encoded + ')');

Once decoded by using the eval() function, I've got the "complementary" attribute decoded['replaceNode'] inside, which contains a global scope function contained inside another file.

I'd consider it a bug, but since the same happens in both firefox and safari, it seems unlikely. More probably I've misunderstood the purpose of eval.

Thank you for your help in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T03:54:30.857

# 不要使用评估。

eval 是不安全的，可以使攻击者执行任意代码。请改用 JSON[库](https://github.com/douglascrockford/JSON-js)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:15:02.123

暂时搁置使用的陷阱`eval()`...

我无法重现您描述的副作用。

猜测一下，您已经加载了一个库，该库覆盖`eval()`以“增强” eval 返回的任何结果的结果。

# javascript - 是否可以在变量上调用 jquery 函数？

> ID：10326990
> 
> 赞同：0
> 
> 时间：2012-04-26T03:53:01.293
> 
> 标签：javascript, jquery, html, jquery-ui

我正在尝试对变量调用查询函数，但它不起作用。有没有办法解决？

```
$(function() {
      $variableName = '#fanpagePanelHeader';
      $(variableName).click( function()
           {
             $("#videoAcco").click();
           }
      );
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T03:55:13.770

您的变量名为`$variableName`，因此在变量上调用 jQuery 函数：

```
$($variableName).click(... 
```

美元符号是变量名中的有效字符，但不要认为它是特定于 jQuery 的。这只是另一个角色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T03:54:57.773

我是 jQuery 的新手，但不应该是：

```
var variableName = '#fanpagePanelHeader'; 
```

# login - Cannot Login after configure oracle-xe

> ID：10326994
> 
> 赞同：1
> 
> 时间：2012-04-26T03:54:12.433
> 
> 标签：login, configure, oracle-xe

I already success install oracle-xe on my ubuntu 10-04, tried to configure the port and password `sudo /etc/init.d/oracle-xe configure`, and then restart my computer and go to `http://127.0.0.1:8080/apex` and input `system` as the username and my password `admin` but it said that `Invalid Login Credentials`.

The problem here I cannot login, try to re-install the oracle but same problem occur. Anyone can help me with this things? I'm very appreciated your help, thanks...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:58:40.487

我发现在我再次重新安装`oracle-xe`并将密码设置为与我的系统密码相同后，它可以工作。

# hadoop - 使用 Cloudera 模拟 Map-reduce

> ID：10326998
> 
> 赞同：0
> 
> 时间：2012-04-26T03:54:41.237
> 
> 标签：hadoop, simulation, cloudera

我想使用 cloudera 在单台机器上模拟 Hadoop 作业（当然还有很多虚拟机）。我有 2 个问题 1）我可以更改 cloudera 中 HDFS 的复制策略吗？2) 我可以查看每个虚拟机的 cpu 使用率吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:18:07.357

您可以使用[`hadoop fs -setrep`](http://hadoop.apache.org/common/docs/r0.20.0/hdfs_shell.html#setrep)更改任何文件的复制因子。您还可以`hdfs-site.xml`通过添加以下内容进行修改来更改默认复制因子： `<property> <name>dfs.replication</name> <value>2</value> </property>`

您必须登录每个框并使用`top`来查看每个 VM 的 cpu 使用情况。Hadoop 中没有任何开箱即用的功能可以让您看到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T16:55:35.083

我发现我可以通过更改“ReplicationTargetChooser.java”来更改数据复制策略。