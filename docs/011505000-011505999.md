# StackOverflow 问答 11505000-11505999

# java - 如何在我的 HTML 中插入小程序

> ID：11505000
> 
> 赞同：0
> 
> 时间：2012-07-16T13:07:05.337
> 
> 标签：java, applet

我有一个扩展自 JApplet 的 Applet 和 5 个与此 JApplet 交互的其他类，但我需要将此 Applet 放在我的 HTML 页面中。

我怎样才能做到这一点 ？

我尝试以下代码

```
<applet archive="test.jar"
    width="100" height="100">
</applet> 
```

两个文件（HTML 和 JAR）都在 sme 目录中，但是什么也没有发生……没有错误……但是我的小程序没有加载。

我读了一些关于 Manifest 的东西，但我不能说，因为我是从 JApplet 扩展而来的

**编辑：编码** 我的主类称为 FormMain

```
public FormMain() {
    super();
}

/**
 * Initialize GUI.
 */
public void init() {

    try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } catch (Exception e) {
    }

    this.setSize(515, 560);

    this.setContentPane(createContentPane());

    this.fingerprintSDKSample = new Util(this);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:11:06.680

**CODE**、**WIDTH**和**HEIGHT**是 applet 标记的必需属性。您尚未定义 Code 属性。

如果您的`start()`部分位于名为 的文件中`someclass.class`，则需要在 applet 标记中指定 code 参数，如下所示：

```
<applet archive="test.jar"
    width="100" height="100" code="someclass.class">
</applet> 
```

[参考](http://docs.oracle.com/javase/1.5.0/docs/guide/plugin/developer_guide/using_tags.html#applet)

# mysql - 如何在导出数据之前锁定mysql？

> ID：11505002
> 
> 赞同：0
> 
> 时间：2012-07-16T13:07:07.070
> 
> 标签：mysql

如何在导出数据之前锁定mysql？

```
Database == MyISAM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:10:00.653

我建议您在导出中使用事务。所有查询都一次性执行，其他查询无法“中断”（它们已排队）。

`START TRANSACTION;`

现在做你的出口： `COMMIT;`

如果你们中的一个导出查询出了问题： `ROLLBACK;`

见：[http ://dev.mysql.com/doc/refman/5.0/en/commit.html](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

**如果您有 InnoDb 并且想要锁定表：**

打电话`LOCK TABLES table WRITE`

导出后：`UNLOCK TABLES`

见：[http ://dev.mysql.com/doc/refman/5.0/en/lock-tables.html](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)

# android - 如何解决 Honeycomp 之前的布局动画

> ID：11505003
> 
> 赞同：0
> 
> 时间：2012-07-16T13:07:09.117
> 
> 标签：android, animation, layout

我读了很多关于 Honeycomp 之前的动画，而这些变化只考虑了内部绘图。我必须支持低至 2.1 的版本，所以`Animator`也不是选项。

我有一个 LinearLayout，其中包含两个位于屏幕右侧的按钮。在某些事件中，我将右侧的按钮设置为视图之外的动画。不幸的是，Click-ecents 注册在其原始位置。作为一种解决方法，我添加了一个`AnimationListener`，并将 Buttons 可见性设置为`View.GONE`on AnimationEnd，`View.VISIBLE`如果 Button 再次为 In 设置动画，则将其带回来。如果我应用可见性，这会导致布局的丑陋闪烁。

动画后是否有另一种方法来跟踪视图？我可以删除一个视图，而不导致包含布局内的闪存（可能是某种双缓冲）吗？

**编辑：** 该术语`Flash`意味着视图在其位置上消散了很短的时间，然后再次出现在同一位置上。如果`onAnimation[Start|End]`更改该布局内的某些内容，就会发生这种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:23:51.847

“flash”是指视图跳转到新位置吗？或者你的意思是在动画 end 之间的过渡期间，有一些看起来像错误的东西，它会在一秒钟内将视图移动到其原始位置？

无论如何，这是一个在类似情况下对我有用的示例代码。你当然需要改变它。我希望它可以帮助你：

```
final int deltaXToMove=50;
TranslateAnimation translateAnimation=new TranslateAnimation(0,deltaXToMove,0,0);
int animationTime=1000;
translateAnimation.setDuration(animationTime);
translateAnimation.setFillEnabled(true);
translateAnimation.setFillAfter(true);
final Button b=(Button)findViewById(R.id.button);
translateAnimation.setAnimationListener(new AnimationListener()
  {
  @Override
  public void onAnimationEnd(Animation animation)
    {
    animation.setFillAfter(false);
    FrameLayout.LayoutParams par=(LayoutParams)b.getLayoutParams();
    par.leftMargin=deltaXToMove;
    b.setLayoutParams(par);
    }
...
b.startAnimation(translateAnimation); 
```

# html - 网站布局问题

> ID：11505005
> 
> 赞同：0
> 
> 时间：2012-07-16T13:07:17.713
> 
> 标签：html, css, layout

我已经完成了一个网站，但我遇到了问题。我有一个侧边栏，其中包含指向屏幕左侧其他页面的绿色链接。其余内容在黄色边栏的右侧。我遇到的问题是该网站在我的屏幕上看起来不错，但是，在我以较大或较小的分辨率查看该网站时，文本和其他内容被转移到侧边栏的绿色中。我将身体的宽度设置为 100%。我不确定问题是什么。CSS：

```
body
{
    background-image:url(Images/testbackground.jpg);
    width:100%

}

#Links
{
    float: left;
    width: 10%;
    margin: 0;
    padding: 0;
    height: 200px;

}

#ContentLayout
{
    clear: right;
    float: right;
    width: 80%;
    font-size:18px;
}

#wrapper
{
    margin: 0 auto;
    width:100%;

} 
```

HTML：

```
<body>

<!--[if lte IE 6]>
<link rel="stylesheet" type="text/css" media="all" href="OldHome.css" />
<![endif]-->

<div id="wrapper">

<img src="Images/logo.jpg" name="Logo" id="Logo"  />

<div id="Links">
  <a href="index.html"><img src="Images/HomeLogo.jpg" alt="home" border="0px" /></a>
  <br />
  <a href="Programs.html"><img src="Images/ProgramsLogo.jpg" alt="programs" border="0px" /></a>
  <br />
  <a href ="Services.html"><img src="Images/ServicesLogo.jpg" alt="services" border="0px" /></a>
  <br />
  <a href ="Contact.html"><img src="Images/ContactLogo.jpg" alt="contact" border="0px" /></a>
  <br />
  <a href ="OtherLinks.html"><img src="Images/OtherLinksLogo.jpg" alt="links" border="0px" /></a>
  <br />
  <a href ="FAQ.html"><img src="Images/FAQLogo.jpg" alt="faq" border="0px" /></a>
  <br />
  <a href="Feedback.html"><img src="Images/FeedBackLogo.JPG" alt="feedback" border="0px" /></a>
  <br />
  <a href="Photos.html"><img src="Images/PhotosLogo.JPG" alt="photos" border="0px" /></a>
</div>

<div id="header"> 
    <h1><center>

  <u>Home</u>

  <p><img src="Images/OutsideBld2.jpg" width="600" height="500" /></p>
    </center></h1>
</div>
    <div id="ContentLayout">
      <h3 style="padding-left:30px"><center>Mission Statement</center></h3>
<p id="MissionStatement">The Employment Preparation Centre offers employment assistance programs and services to clients at no charge. These are available on a one-on-one basis or in group settings.

Programs and services at The Employment Preparation Centre are based on a belief that a person’s employability is enhanced through &nbsp;self-assessment, knowledge of the current labour market, and development of a return-to-work action plan.</p>
<p id="MissionStatement">
Programs and services at The Employment Preparation Centre are funded through the Department of Advanced Education and Skills under several key divisions.
</p>
<br />
<br />

<p>Trouble finding us?</p>
<!-- Google map START -->
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=10+Main+Street,+Corner+Brook&amp;aq=&amp;sll=39.017445,-98.196116&amp;sspn=35.694805,86.044922&amp;ie=UTF8&amp;hq=&amp;hnear=10+Main+St,+Corner+Brook,+Division+No.+5,+Newfoundland+and+Labrador+A2H+1C6,+Canada&amp;t=m&amp;z=14&amp;ll=48.951917,-57.947721&amp;output=embed"></iframe><br /><small><a href="http://maps.google.com/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=10+Main+Street,+Corner+Brook&amp;aq=&amp;sll=39.017445,-98.196116&amp;sspn=35.694805,86.044922&amp;ie=UTF8&amp;hq=&amp;hnear=10+Main+St,+Corner+Brook,+Division+No.+5,+Newfoundland+and+Labrador+A2H+1C6,+Canada&amp;t=m&amp;z=14&amp;ll=48.951917,-57.947721" style="color:#0000FF;text-align:left">View Larger Map</a></small>
<!-- Google map END -->
<p>This page has <span><?=$hits;?></span> hits</p>
<address>

&copy; 2012
</address>
</div>
</div>

<script type="text/javascript">
  var $buoop = {}
      $buoop.ol = window.onload;
      window.onload=function(){
        if ($buoop.ol) $buoop.ol();
        var e = document.createElement("script");
    e.setAttribute("type", "text/javascript");
        e.setAttribute("src", "http://browser-update.org/update.js");
        document.body.appendChild(e);
      }
    </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:25:26.283

确保您的区域和文本的位置设置为绝对？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:33:17.750

问题是你的宽度。#Links 始终占屏幕的 10%，内容区域始终占屏幕的 80%。所以如果你把视口变小，总有 10% 和 80% 的分配。字体保持不变，因此它会尝试使文本适合 10% 和 80% 的区域。

也许您应该尝试使用绝对宽度和[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)

这是一个小提琴，它仍然是糟糕的 css，但它可以工作（添加了一个修复链接宽度） [http://jsfiddle.net/dennym/AGt9L/](http://jsfiddle.net/dennym/AGt9L/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:34:29.913

问题是，如果您将所有列宽都以百分比表示，则站点在某些分辨率（视口宽度）下可能看起来很糟糕。我建议您将菜单栏设置为固定大小（例如 200 像素）并提供内容 div `width: auto`（即没有宽度）。两个 div 都应该保持浮动。使包装器也固定大小。这样，两个容器就在旁边。菜单列的宽度是固定的，而内容列的宽度加起来是父宽度，即包装器的宽度。

我也重组了你的 HTML 代码。

这是一个[JsFiddle](http://jsfiddle.net/Mikey/Wmms3/)（图像不工作，CSS 仍然有点糟糕）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:37:26.283

我认为你的标记顺序可能是罪魁祸首。[如果你像在这个 JSFiddle 中](http://jsfiddle.net/SWaEX/)那样移动东西，布局的适应性要强得多，而不必 position:absolute;

# php - 查询以获取具有或不具有组连接的多行

> ID：11505008
> 
> 赞同：2
> 
> 时间：2012-07-16T13:07:29.070
> 
> 标签：php, mysql, sql, query-performance

我有以下表结构：

```
 users:
    id PK
    username
    email
    salt
    password
    date_created

questions:
    id PK
    user_id FK(users)
    title
    date_created
    date_updated

answers:
    id PK
    question_id FK(questions)
    user_id FK(users)
    body
    date_created 
```

所以我需要一个查询来从这些表中获取数据并显示用户的最后 5 个问题以及每个问题的前 3 个答案。像这样的东西：

```
"What is my favorite color? posted by user

red - posted by user1
green - posted by user2
yellow - posted by user3

.....
" 
```

所以这就是我想要的展示。如何在 1 个查询中执行此操作？我应该使用 group concat 对 1 个问题的多个答案进行分组吗？或者我应该得到结果并在 PHP 中解析数组以按 question_id 对答案进行分组。我也需要这个查询非常快。我不确定是否会更快进行 1 个查询或进行多个查询以获取用户问题，然后问题得到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:05:13.437

我认为我要给出的关键“提示”是您可以*在*GROUP_CONCAT(); 中使用常规 CONCAT(); 然后使用 JOIN 以及评论中提到的一些技术来获得这两个函数需要的中间结果集来获得你的输出。

# ios - 确定当前语言环境是否在 iOS 中使用非阿拉伯数字？

> ID：11505010
> 
> 赞同：4
> 
> 时间：2012-07-16T13:07:35.930
> 
> 标签：ios, cocoa-touch, localization, nslocalizedstring, nslocale

`[NSLocale currentLocale]`在 iOS 中，如果用户不使用[阿拉伯数字](http://en.wikipedia.org/wiki/Arabic_numerals)（即不是 0123456789），我想执行一些特定的功能。如何检查这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T21:02:30.520

不幸的是，没有直接的属性要检查，但下面的代码会检查它：

```
NSCharacterSet *nSet = [NSCharacterSet characterSetWithCharactersInString:@"1234567890"];
NSNumberFormatter *numFmt = [[NSNumberFormatter alloc] init];
NSDecimalNumber *value = [NSDecimalNumber decimalNumberWithString:@"1234567890"];
NSCharacterSet *fSet = [NSCharacterSet characterSetWithCharactersInString:[numFmt stringFromNumber:value]];
if([fSet isSupersetOfSet:nSet]==NO){
    NSLog(@"No arabic digits");
} 
```

检查是通过一组数字 (nSet) 针对当前语言环境的语言环境感知格式化程序 (numFmt) 完成的。该值用于格式化所有数字的数字，可以将其减少到少于 1 到 0 的数字。但是，这也可以作为其他检测的示例。请注意，使用分隔符或千位分组字符不会破坏检测，因为正在使用超集。

# joomla - 显示消息以纵向模式旋转手机（用于网站）

> ID：11505011
> 
> 赞同：1
> 
> 时间：2012-07-16T13:07:48.333
> 
> 标签：joomla, landscape

我的网站在纵向模式下看起来很糟糕，但在横向模式下还可以。我想向用户显示一条消息，建议用户旋转手机以正确查看页面。我的网站在 Joomla。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:11:43.747

Joomla 有几个扩展程序可让您显示漂亮的弹出消息。但是使用 Javascript 来检测用户设备是否是纵向的，然后显示一条消息会更容易。

```
if(window.innerHeight > window.innerWidth){
    alert("Please use landscape!");
} 
```

上面的代码只会显示消息“请使用横向！” 如果用户设备处于纵向模式。在页面顶部运行该 JS 代码，它应该可以正常工作。

**编辑：**当视口只有 600px 高时，它可以工作：

```
if(window.innerHeight > window.innerWidth){
    if(window.innerHeight < "600"){
        alert("Please use landscape!");
    }
} 
```

# git - 按本地恢复原始主状态

> ID：11505012
> 
> 赞同：0
> 
> 时间：2012-07-16T13:07:56.673
> 
> 标签：git, branch

我将一些提交移到另一个分支

```
git checkout -b old-state 0d1d7fc32 
```

现在我想将我的本地主状态推送到主状态，但是

```
Everything up-to-date 
```

发生。我怎样才能恢复原始状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:18:55.653

让我们总结一下：

*   您已将本地状态推`master`送到`origin/master`
*   你做错了什么
*   你想重置`master`为修订版`0d1d7fc32`
*   你还想`origin/master`指出`0d1d7fc32`

这是如何实现的：

1.  将您的本地主分支重置为`0d1d7fc32`：
    `git checkout master`
    `git reset --hard 0d1d7fc32`

2.  使`origin/master`和`master`平等：
    `git push -f origin master:master`

完毕。

* * *

不要将 Git 命令与您可能从其他 VCS 知道的命令混淆。我知道有一些 VCS`checkout`意味着

> 将工作副本进行修订

这不是 Git 的情况。也许您想浏览[http://git-scm.com/](http://git-scm.com/)以获得第一印象，然后[阅读一本书](http://git-scm.com/book)左右。

* * *

**原始答案：**
`git checkout -b old-state 0d1d7fc32`创建一个名为的本地分支`old-state`，其最后一次提交是带有 SHA 的那个`d1d7fc32`。

我假设您希望与本地分支机构`origin/master`处于同一状态。`master`

在这种情况下，做一个

```
git push -f origin master:master 
```

使他们平等。

[`git checkout`](http://linux.die.net/man/1/git-checkout)不移动任何东西。它只是创建了一个新分支`old-state`，它与当前分支共享相同的历史记录。如果您传递修订号，它会共享相同的历史记录**，直到**（包括）给定的修订。

# iphone - iPhone的MAC地址是唯一的吗？它会改变吗？

> ID：11505015
> 
> 赞同：3
> 
> 时间：2012-07-16T13:08:06.010
> 
> 标签：iphone, objective-c, mac-address

我想使用 iphone 的 MAC 地址作为我的应用程序的唯一标识符。我想知道它是否会改变或者每个设备是否唯一。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T06:29:23.267

不要使用 MAC 地址代替 UDID。请改用广告商标识符 [IDFA] 或供应商标识符 [IDFV]。

p1。MAC 地址不需要是全球唯一的。

p2。即使 EUI-48 或 EUI-64 格式中的 U/L 位将地址标识为“通用”，MAC 地址也不需要是全局唯一的。这一点真正意味着 OUI 是在全球范围内注册的，并且它所识别的组织正在承担注册使用该 OUI 的个人地址的责任。

p3。说真的，MAC 地址不是全球唯一的。询问在网络互操作性实验室工作的任何人。根据他们从未公开讨论过的政策，硬件制造商一直在重复使用它们。它不能替代 UDID。

p4。操作系统没有义务向非特权应用程序提供实际的硬件 MAC 地址。当前版本今天可能正在这样做，但某些未来版本可能会突然而默默地停止这样做。它可以开始在每个设备上返回相同的地址。

不要使用 MAC 地址代替 UDID。请改用广告商标识符 [IDFA] 或供应商标识符 [IDFV]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:13:05.730

UDID API 在 iOS 5 中已弃用。要获取唯一标识符，您需要使用[MAC 地址](http://en.wikipedia.org/wiki/MAC_address)

媒体访问控制地址（MAC 地址）是分配给网络接口的唯一标识符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T13:18:33.663

**不**识别设备的原因有很多。

只需为安装创建一个唯一标识符或允许用户创建一个帐户。任何其他识别设备的方法都可能真正导致问题。

例如，如果有人在那里销售手机，那么下一个用户将在应用程序中看到前一个用户的所有数据。由于您不识别用户而是识别设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:11:07.237

您可以简单地使用`UDID` Like the name said it's an **Unique** Device Identifier

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T13:15:15.113

我也会尝试使用 IMEI，这应该是每部手机 100% 唯一的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-16T13:16:08.313

MAC地址是全球唯一的——[读MAC地址](http://en.wikipedia.org/wiki/MAC_address)。错误，应该是。有一些方法可以改变它，但这不是普通用户的任务，所以，是的，你可以使用它。

人们倾向于使用[OpenUDID](https://github.com/ylechelle/OpenUDID)和朋友之类的东西。

去谷歌叔叔搜索“iOS deprecated UDID”，你可以读一整夜的东西 :) 或者[这里有一些摘要](http://techcrunch.com/2012/03/29/apple-post-udid/)。

# c# - 事件处理程序 C#中的线程安全？

> ID：11505018
> 
> 赞同：13
> 
> 时间：2012-07-16T13:08:12.930
> 
> 标签：c#, .net, events, .net-4.0

使用我的自定义 EventArgs，例如：

```
public event EventHandler<MyEventArgs> SampleEvent; 
```

来自[msdn](http://msdn.microsoft.com/en-us/library/db0etb8x.aspx) 例如：

```
public class HasEvent
{
// Declare an event of delegate type EventHandler of 
// MyEventArgs.

    public event EventHandler<MyEventArgs> SampleEvent;

    public void DemoEvent(string val)
    {
    // Copy to a temporary variable to be thread-safe.
        EventHandler<MyEventArgs> temp = SampleEvent;
        if (temp != null)
            temp(this, new MyEventArgs(val));
    }
} 
```

我有**两个**问题：

1）查看标记的代码：

![在此处输入图像描述](../Images/18bff64deb9c3cb2a146b658c8292c4e.png)

我看不出为什么应该将它复制到另一个参数（关于线程）

因为我们有`event`keyowrd ，所以没有人可以触摸它的调用列表（我的意思是类没有外部代码）

2）如果我没记错的话，这个 `DemoEvent`函数应该是虚拟的，所以它可以在子类中被覆盖......（我确定我在某处见过它）

奇怪的是 resharper 也不会添加 virtual ：

所以如果我有这个代码：

![在此处输入图像描述](../Images/178f93e72283e4ac73cc6342f8bce085.png)

它建议我：

![在此处输入图像描述](../Images/60bb9ed9fe9fe14a9f14cea91e0847fb.png)

当我按下它时：

![在此处输入图像描述](../Images/ebaf40241b3e586512507b4961cc689b.png)

所以我的**2 个**问题：

`EventHandler<MyEventArgs> temp = SampleEvent;`1）关于线程安全，这条线将解决什么场景 ？

2）功能不应该是`virtual`吗？（我敢肯定我已经用虚拟看到过这种模式）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T13:14:01.317

> 这一行 EventHandler temp = SampleEvent; 的场景是什么？将解决，关于线程安全？

想象一下你这样做：

```
if (SampleEvent != null)
    SampleEvent(this, new MyEventArgs()); 
```

如果另一个线程将在 if 之后但在调用之前分离事件处理程序，那么您将尝试调用`null`委托（并且您将获得异常）。

> 该功能不应该是虚拟的吗？（我确定我见过这种虚拟模式）

是的，如果该类不是，`sealed`那么您应该标记该功能`virtual`（这不是强制性的，但它是一种被广泛接受的模式）。

**编辑**

```
时间 线程 1 线程 2
1 obj.SampleEvent += MyHandler;
2 if (SampleEvent != null)                     
3 { obj.SampleEvent -= MyHandler;
4 SampleEvent(this, new MyEventArgs());
5 }

```

在这种情况下，在时间 4，您将调用一个`null`委托，它会抛出一个`NullReferenceException`. 现在看这段代码：

```
时间 线程 1 线程 2
1 obj.SampleEvent += MyHandler;
2 var sampleEvent = SampleEvent;
3 if (sampleEvent != null)                     
4 { obj.SampleEvent -= MyHandler;
5 sampleEvent(this, new MyEventArgs());
6 }

```

现在在时间 5 您调用`sampleEvent`它，它保存 的**旧**内容`SampleEvent`，在这种情况下，它不会抛出任何异常（但`MyHandler`即使它已被第二个线程删除，它也会调用）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T13:16:40.140

```
 if (SampleEvent != null)
    SampleEvent(this, new MyEventArgs(val)); 
```

这是一场经典的穿线比赛。此代码运行时，另一个线程可以取消订阅事件处理程序。这使得 if() 语句得出结论，即存在订阅者，但事件调用失败并出现 NullReferenceException。将委托对象复制到局部变量中可确保通过取消订阅事件处理程序来更改委托对象引用的客户端代码不会导致崩溃。仍然是一个问题，您将在取消订阅后调用事件处理程序，但这是不可避免的竞争，不一定像 NRE 那样致命，并且可以由事件处理程序处理，这与 NRE 不同。

是的，这样的方法通常被设置为受保护的虚拟方法并命名为 OnSampleEvent()，因此派生类可以更改事件引发行为。

# c# - 通过 C# 将图片上传到 ASP.NET MVC 3 操作

> ID：11505020
> 
> 赞同：0
> 
> 时间：2012-07-16T13:08:25.743
> 
> 标签：c#, asp.net-mvc-3

我正在开发一个 Windows Phone 7 应用程序。这个应用程序将使人们能够上传图片。我的后端使用 ASP.NET MVC 3。现在，人们可以上传图片。但我发现其中一些图片没有正确上传。奇怪的是，图片上传了一半，但下半部分是纯灰色的。

我什至无法想到会发生这种情况的场景。有人可以帮我确定这会如何发生吗？基本上，一张图片被上传。上半部分看起来不错。下半部分是纯灰色。它只是偶尔发生。我自己无法重现该问题。我只看到我的用户上传的一些照片有这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:09:47.023

如果图片未完全上传，例如您的用户在过程中停止上传，则可能会发生这种情况。

通过停止，可能会导致连接丢失、应用程序关闭等。

您应该在“验证”您的数据之前检查上传是否完全完成（IE 检查图像文件大小与 POST 请求的内容长度）。

# php - PHP MySQL 插入从 t1 到 t3，其中 t1 和 t2 的 id 相等不工作

> ID：11505021
> 
> 赞同：0
> 
> 时间：2012-07-16T13:08:34.933
> 
> 标签：php, mysql, insert

我正在尝试将一些内容从表 1 复制到表 3，但只有表 1 和表 2 中的 id 具有相同的 ID，但它不起作用。它没有给出任何错误，但它没有复制任何内容。

这就是我现在所拥有的。

```
include("conect.php");
$copiar = "INSERT INTO 
              temp_usr 
           SELECT 
               * 
           FROM 
               temp_reg,
               temp_cod 
           WHERE 
               temp_reg.cp = temp_code.cp";
$insert = $asies -> query($copiar); 
```

非常感谢所有帮助。

解决了！！

如果其他人需要类似的答案，以下是它的工作方式：

```
include("connect.php");
$query = mysqli_query($asies, "
INSERT INTO table3  (usr_id)
 SELECT table1.id FROM table1,table2
WHERE table1.cp = table2.cp")
 or die (mysqli_error($asies)); 
```

我为 INSERT INTO 表指定了行，在 SELECT 中，我按照@Pete 的建议做了。

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:13:56.250

哦，我的鳕鱼 - 你的查询有些可疑。

```
INSERT INTO 
    temp_usr 
SELECT 
    * 
FROM 
    temp_reg,
    temp_code 
WHERE 
    temp_reg.cp = temp_code.cp 
```

您的代码充满了拼写错误。我已将 cod 更改为代码。

你最好也有某种错误报告，例如

```
or die(mysql_error()) 
```

# java - Hibernate ManyToMany - 只返回唯一元素

> ID：11505027
> 
> 赞同：0
> 
> 时间：2012-07-16T13:09:01.750
> 
> 标签：java, hibernate

我有三张桌子：

```
Company
id  name
1   Fred Co.

Person
id   name
1    Fred

Employee
id company_id person_id rank
1  1          1         1
2  1          1         2 
```

现在排名被不同的应用程序使用，但对于我正在使用的内容，我并不关心它。我想做的是创建一个只返回唯一员工的休眠映射（通过域模型）。

我目前有

```
class Person {
    @Column(name = "id")
    Long id;

    @Column(name = "name")
    String id;
}

class Company {
    @Column(name = "id")
    Long id;

    @Column(name = "name")
    String id;

    @ManyToMany(fetch = FetchType.LAZY)
        @JoinTable(name = "EMPLOYEE", 
                joinColumns = { @JoinColumn(name = "COMPANY_ID") },
                inverseJoinColumns = { @JoinColumn(name = "PERSON_ID") })
    @LazyCollection(LazyCollectionOption.EXTRA)
    List<Person> employees = new ArrayList<Person>();
} 
```

但这意味着`fredCo.employees.size() == 2`。如何过滤以便只返回唯一的人？

我想通过域模型来做到这一点。

编辑：虽然上面的例子很小，但在现实生活中，Person 对象非常大，每个公司有 1000 名员工（因此非常懒惰）。

现在我可以（并且已经）得到一个

```
companyDao.getEmployeesFor(Company...)
companyDao.getEmployeeCountFor(Company...) 
```

但感觉有点恶心，我想在没有 Dao 的情况下这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:29:57.187

如果排名始终设置并且第一条记录始终为“1”，那么您可以在映射中添加一个简单的@Where/@WhereJoinTable 子句，将集合限制为排名为 1 的记录。

[https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Application_Platform/5/html/Hibernate_Annotations_Reference_Guide/entity-hibspec-collection.html](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Application_Platform/5/html/Hibernate_Annotations_Reference_Guide/entity-hibspec-collection.html)

另一种方法是将集合更改为 Set 并在不涉及“rank”字段的 Person 上实现 equals() 方法。

# 更新：

好的，正如您之前所说，这将不起作用。我已经进行了一些测试，而且似乎当在关联上定义 @LazyCollection 时，无论如何都会忽略对该关联的 @Where 限制。在超惰性集合上调用 size() 实际上会导致 Hibernate 对数据库发出 count() 查询。没有附加附加条款。

为什么应该忽略@Where 我不知道，但这已在其他地方查询过，似乎是一个悬而未决的问题：

[https://forum.hibernate.org/viewtopic.php?f=9&t=988631&view=previous](https://forum.hibernate.org/viewtopic.php?f=9&t=988631&view=previous)

[https://hibernate.onjira.com/browse/HHH-3319](https://hibernate.onjira.com/browse/HHH-3319)

我认为您仍然可以通过创建一个附加的 Employee 实体来做您想做的事情，该实体映射到使用之前的 SQL 内部查询定义的 VIEW - 然后在数据库级别完成过滤。将实体映射到视图与表一样。

然后用两个从公司和个人到员工的一对多关联替换您的多对多。

# excel - 如何在不替换的情况下比较和突出显示 Excel 中两列的匹配项？

> ID：11505029
> 
> 赞同：0
> 
> 时间：2012-07-16T13:09:21.173
> 
> 标签：excel, compare, highlight, replace

我在 Excel 电子表格中有两列数据。我必须看到 A 列中的每个值在 B 列中都有一个匹配项。我知道可以使用 Match 函数在条件格式中比较和突出显示两列。

问题是条件格式中的匹配功能不会从列表中排除以前匹配和突出显示的值以供将来比较。例如...

答：1、1、2、3

B：2、3、1、0

如果在条件格式中使用匹配函数，则 A 列中的两个“1”值都将突出显示，因为它看到 B 列中有一个“1”。我需要这些列一对一匹配。因此，一旦在另一列中发现一个值匹配，该匹配将从函数执行其余部分的比较中排除。如果可能的话，我宁愿在不使用宏的情况下完成整个项目。但是如果需要宏，我完全可以使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:08:26.627

如果您的值在 A 和 B 列中，您可以尝试以下操作：

```
=COUNTIF(A:A,A1)-COUNTIF(B:B,A1) 
```

将公式放在 C1 中，然后向下复制整个列。它将测试 A 列中的每个值，以查看它在 B 列中出现的次数是否与在 B 列中出现的次数相同，并显示它在 A 列中出现的次数。

为了平衡它，您还可以使用

```
=COUNTIF(A:A,B1)-COUNTIF(B:B,B1) 
```

在 D 列 whichc 将测试 B 列中的值。

以下是使用您的样本数据加上 1 个附加行以获得负数的外观：

```
A   B   Test A  Test B
1   2      1       0
1   3      1       0
2   1      0       1
3   0      0       0
0   4      0      -1 
```

绝对不是最优雅的解决方案，但它应该可以工作。

编辑：或者您可以使用[间接引用](http://mediaczar.com/blog/2008/12/referring-to-this-cell-using-excel-conditional-formatting/)的条件格式来引用当前单元格：

```
=COUNTIF(A:A,INDIRECT("R"&ROW()&"C"&COLUMN(),FALSE))=COUNTIF(B:B,INDIRECT("R"&ROW()&"C"&COLUMN(),FALSE)) 
```

将此条件格式应用于 A 列将突出显示在每列中出现相同次数的任何值。

# machine-learning - 使用 Mahout 进行朴素贝叶斯分类的情感分析

> ID：11505035
> 
> 赞同：1
> 
> 时间：2012-07-16T13:09:30.627
> 
> 标签：machine-learning, classification, mahout

我正在尝试使用 Mahout 训练朴素贝叶斯分类器。

我不太清楚的第一件事是我的训练数据应该是什么样子。我的数据集包含一个意见，如果它是正面的还是负面的（1 表示正面，-1 表示负面。）根据我从 Mahout in Action 书中关于分类的章节中的理解，我已经像这样设置了我的训练数据：

```
 1   'Content of positive opinion'
-1   'Content of negative opinion' 
```

我已使用 seqdirectory 将此数据转换为序列文件，并使用以下命令训练分类器：

```
$MAHOUT_HOME/bin/mahout trainnb -i seq_data/chunk-0 -o bmodel -ow 
```

输出此错误：

```
Exception in thread "main" java.io.FileNotFoundException: File temp/labelIndex does not exist. 
```

查看 trainnb 接受的选项，我看到了 --labelIndex 选项。我不确定这是做什么的，我可以对此进行一些澄清。

然后我像这样运行命令（其中 lindex 是我创建的文件）：

```
$MAHOUT_HOME/bin/mahout trainnb -i seq_data/chunk-0 -o bmodel -ow -li lindex 
```

输出此错误：

```
java.lang.ClassCastException: org.apache.hadoop.io.Text cannot be cast to org.apache.mahout.math.VectorWritable
    at org.apache.mahout.classifier.naivebayes.training.IndexInstancesMapper.map(IndexInstancesMapper.java:29)
    at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212) 
```

如果我的方法不正确，我想知道我在这里做错了什么。我应该如何构建训练数据并运行命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:41:39.890

这是关于什么是序列文件的 Hadoop 文档（[链接](http://wiki.apache.org/hadoop/SequenceFile)）

因此，从您的错误来看，trainnb 步骤似乎需要 VectorWritable 而不是 Text。

seqdirectory步骤似乎以 Text、Text 形式生成数据**。**我相信你必须在你的序列文件上运行**seq2sparse**命令来生成 TF 或 TF-IDF 加权向量。

此[链接](https://cwiki.apache.org/MAHOUT/quick-tour-of-text-analysis-using-the-mahout-command-line.html)通过一个示例介绍如何进行文本分析。可能值得一看。

# css - 使全屏 div 从顶部向下动画

> ID：11505037
> 
> 赞同：0
> 
> 时间：2012-07-16T13:09:47.347
> 
> 标签：css, html, mootools, fullscreen, webkit-transition

我有一个全屏覆盖，我目前在 jfiddle 中设置了它，所以它只是淡入 [http://jsfiddle.net/9NJP9/1/](http://jsfiddle.net/9NJP9/1/) 我想要它做的而不是淡入淡出是从顶部动画屏幕向下到底部；滑下来。我的网站比屏幕高度长，当单击按钮时，虽然我真的不希望它从整个网站的顶部一直滑到页面底部，只是从屏幕顶部滑到屏幕底部，然后即使有人滚动也停留在那里。我只是不确定如何操纵 css 来做到这一点。

我能得到的任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:29:43.960

在这里，[http://jsfiddle.net/9NJP9/8/](http://jsfiddle.net/9NJP9/8/)

对于向下滑动效果，您可以将属性从或更改为 ，而不是`opacity`从 0 更改为 1 。在小提琴中，我将其设置为从 过渡到. 此外，您需要使效果**跨浏览器兼容**，而不是仅用于 webkit 浏览器的 CSS 。我已经相应地修改了 CSS。`top``-500px``-50%``0``-100%``0`

 **```
.fullscreen_hide {
    -webkit-transition-property: all;
    -moz-transition-property: all;
    -o-transition-property: all;
    -ms-transition-property: all;
    transition-property: all;

    -webkit-transition-duration: 1s;
    -moz-transition-duration: 1s;
    -o-transition-duration: 1s;
    -ms-transition-duration: 1s;
    transition-duration: 1s;

    -webkit-transition-delay: 0s;
    -moz-transition-delay: 0s;
    -o-transition-delay: 0s;
    -ms-transition-delay: 0s;
    transition-delay: 0s;
    position: absolute;
    z-index: 1000;
    height: 100%;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
    opacity: 1;
    top: -100%;
    bottom: 0;
    right: 0;
    left: 0;
    background: #141414;
}

.fullscreen_show {
    -webkit-transition-property: all;
    -moz-transition-property: all;
    -o-transition-property: all;
    -ms-transition-property: all;
    transition-property: all;

    -webkit-transition-duration: 1s;
    -moz-transition-duration: 1s;
    -o-transition-duration: 1s;
    -ms-transition-duration: 1s;
    transition-duration: 1s;

    -webkit-transition-delay: 0s;
    -moz-transition-delay: 0s;
    -o-transition-delay: 0s;
    -ms-transition-delay: 0s;
    transition-delay: 0s;
    position: absolute;
    height: 100%;
    z-index: 1000;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
    opacity: 1;
    top: 0;
    bottom: 0;
    right: 0;
    left: 0;
    background: #141414;
} 
```

正如@MichaelGiovanniPumo 指出的那样，您也应该尝试使用[jQuery](http://api.jquery.com/)。它使生活更加舒适。:)**

# r - 从 /dev/random 生成随机整数

> ID：11505039
> 
> 赞同：5
> 
> 时间：2012-07-16T13:09:51.577
> 
> 标签：r, random

这不是家庭作业。我想从 R 中的 /dev/random 生成一个随机整数序列（0:9 之间的 50 个数字）。我有一个[硬件熵密钥](http://www.entropykey.co.uk/)。

我找到了两个“想法”，但我都无法向我提供我所追求的数字：

1）[RDieHarder](http://cran.r-project.org/web/packages/RDieHarder/index.html)。似乎允许访问 /dev/random，但我无法让它生成我需要的整数序列。例如

```
>library(RDieHarder)  
>x  <-dieharder(rng="/dev/urandom", psample=50) #urandom used for example 
```

2) [accuracy 包](http://cran.r-project.org/web/packages/accuracy/index.html)可以提供真正的随机数，但似乎已经过时了，我看不到如何从 /dev/random 中排序。例如

```
>library(accuracy)
>x=runifT(50) 
```

是的，我已阅读 Knuth 等并了解 TRNG 的问题（因此是硬件熵密钥）。

还有其他想法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T14:16:40.180

以下是如何从开发人员读取并获取从 a 到 b 的 n 个数字（含）：

```
readRandom <- function(n,a,b,dev="/dev/urandom"){
  size = b-a + 1
  rng = file(dev,"rb") # open connection
  nums = readBin(rng,what="integer",n=n) # read some 8-byte integers 
  close(rng) # close the connection
  return( a + nums %% size ) # reduce range and shift
} 
```

如果我从 /dev/random 读取它会阻塞，因为我的系统用完了熵，但是我认为您的密钥应该正忙于向系统输入熵......

“边缘”效应问题如下。假设我生成从 0 到 10 的随机整数，但您想要从 0 到 6 的整数。那么 X %% 7 将生成两倍的 0,1,2,3 值，因为映射是这样的：

```
> (0:10) %% 7
 [1] 0 1 2 3 4 5 6 0 1 2 3 
```

现在 readBin 正在获取 8 位整数，这些整数很大，因此序列末尾的奇数个额外数字应该没有太大区别......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-25T17:12:25.703

好吧，这是一个迟到的答案，但我通过谷歌找到了这个，所以其他人也可以。

执行此操作的代码实际上非常简单。（实际上只有下面两行是必需的。）

```
entropy <- file('/dev/urandom', 'rb')                           #rb = read binary .. try `cat /dev/urandom` at the command line to see what this "binary" output looks like if you don't encode it rationally
print(entropy)                                                  #you don't need to run this but reading it will help you understand what's going on
?readLines                                                      #again just to explain what's going on and what the other options, like scan(), do
readBin(entropy, what='integer')            #print random numbers from environmental noise
set.seed(readBin(entropy,1L))               #a truly random beginning to your R session… 
```

在一行中：

```
file('/dev/urandom', 'rb') %>% readBin('integer') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T13:28:41.697

您可以使用从[random.org](http://www.random.org)上的硬件 RNG 检索数据的[random](http://dirk.eddelbuettel.com/code/random.html)包（也在[CRAN](http://cran.r-project.org/package=random)上） 。

```
R> library(random)
R> randomNumbers(n=50,min=1,max=9,col=5)
      V1 V2 V3 V4 V5
 [1,]  8  7  4  6  3
 [2,]  4  8  3  6  8
 [3,]  5  2  9  1  6
 [4,]  9  5  6  5  5
 [5,]  2  2  1  3  7
 [6,]  6  3  9  7  5
 [7,]  7  9  1  9  9
 [8,]  5  9  1  3  8
 [9,]  8  2  9  3  7
[10,]  6  1  1  8  7
R> 
```

# objective-c - 构成 TableViewController 的详细视图

> ID：11505042
> 
> 赞同：0
> 
> 时间：2012-07-16T13:10:04.303
> 
> 标签：objective-c, ios5, uitableview

我正在使用 xcode 为 iOS5 开发一个项目。ARC 开启 使用情节提要

我有一个名为**Event**的类，其中包含事件信息。我在情节提要上有一个 TableView 链接到我的**ListViewController.m**文件我还在情节提要上创建了一个名为“Detail”的视图和一个**DetailViewController.m**文件（它链接到）

目前在我的**ListViewController.m**我使用了这个功能：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    DetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"detail"];
    [self.navigationController pushViewController:detail animated:YES];
} 
```

listview 中的项目由 listviewcontroller 中的 var 组成，命名为 events。

我想要做的是当我初始化详细视图时，我想传递与该列表项耦合的事件，这样我就可以用我的**DetailViewController.m**中的正确信息填充标签中的文本。

我想这样做，因为我还将有事件的其他表示（在地图上，...），并希望对所有事件都使用此详细视图。

如何最好地设置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:21:18.920

在“DetailViewController”上添加一个“Event”属性，并在推送之前将其分配给控制器：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Get here the selected event fron the datasource and assign it to yourSelectedEvent

    DetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"detail"];

    [detail setEvent: yourSelectedEvent];

    [self.navigationController pushViewController:detail animated:YES];
} 
```

然后你可以用它把文本放到标签上。

# java - JSP 中损坏的 UTF-8 URI 编码

> ID：11505047
> 
> 赞同：1
> 
> 时间：2012-07-16T13:10:21.643
> 
> 标签：java, jsp, encoding, utf-8, tomcat6

我遇到了一个关于错误 URI 编码的奇怪问题，不胜感激！

该项目使用 JSP、Servlet、Jquery、Tomcat 6。

[JSP 中的字符集设置为 UTF-8，所有 Tomcat 连接器都使用 URIEncoding=UTF-8，并且我还使用此处](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding)描述的字符编码过滤器。此外，我在元标记中设置了 contentType，我的浏览器正确检测到它。

在使用 Jquery 的 Ajax 调用中，我在我想用作 URL 参数的术语上使用 encodeURIComponent()，然后使用 $.param() 序列化整个参数集。在被调用的 servlet 中，这些参数使用 Java.net.URLDecoder.decode(term, "UTF-8") 正确解码。

在某些地方，我从 JSP 中的参数映射生成 href 元素的 URL。每个参数值在 JSP 端使用 Java.net.URLEncoder.encode(value, "UTF-8") 进行编码，但随后以与之前相同的方式对其进行解码会导致特殊字符损坏。相反，我必须在 JSP 中将其编码为“ISO-8859-2”，然后在 servlet 中将其正确解码为“UTF-8”。

一个澄清的例子：术语“überfall”是通过Javascript（％C3％BCberfall）进行URIEncoded并发送到servlet进行解码和处理，这是有效的。将其传递回 JSP 后，我会将其编码为 UTF-8 并构建 URL，例如：

```
<a href="/myWebapp/servletPath?term=%C3%BCberfall">Click here</a> 
```

但是，单击此链接会将参数作为“%C3%83%C2%BCberfall”发送到解码为“Ã¼berfall”的 servlet。当不进行编码时也会发生同样的情况。

当使用“ISO-8859-2”进行编码时，我得到：

```
<a href="/myWebapp/servletPath?term=%FCberfall">Click here</a> 
```

单击此链接时，我可以在 Wireshark 中观察到 %C3%BCberfall 作为参数发送，该参数再次解码为“überfall”！

谁能告诉我我错过了什么？

编辑：在 Firebug 中观察网络选项卡时，我意识到通过使用

```
$.param({term : encodeURIComponent(term)}); 
```

该术语被 UTF-8 编码两次，导致“%25C3%25BCberfall”，即百分比符号也是百分比编码的。类似地，如果我对参数映射中的每个值调用 encode(term, "UTF-8") 两次，它对我有用。

编码一次而不解码字符串会再次导致“Ã¼berfall”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:10:28.257

Java 在内部使用什么编码？你开始你的应用程序

```
-Dfile.encoding=utf-8 
```

请澄清“JSP 中的参数映射”的定义位置。它是来自一些持久性数据存储还是代码中以文字形式给出的字符串？

关于正在发生的事情的一些想法，这可能会有所帮助：

`Ã¼`是当一个`UTF-8`编码`ü`被读取时出现的结果`ISO-8859-1`，当每个字节都被自己解码时。是 a 的两个字节`%C3%BC`的 URI 编码表示。我认为这是正在发生的事情：`UTF-8``UTF-8` `ü`

**`%C3%BC`**被**错误**解码为 →**`Ã¼`**被编码为 →**`%C3%83%C2%BC`**然后再次被解码为 →**`Ã¼`**所以你最终得到`Ã¼berfall`.

所以我猜，您使用错误的编码来解码 URI 编码的字符串。这可能与 Java/JVM 使用的内部编码有关：

> [默认情况下，如果 JRE 7 安装程序识别出主机操作系统仅支持欧洲语言，它会安装欧洲语言版本。](http://docs.oracle.com/javase/7/docs/technotes/guides/intl/encoding.doc.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:55:08.727

我想我现在肯定解决了这个问题。

按照 Jontro 的评论，我对所有 URL 参数值进行了一次编码，并删除了手动 servlet 端解码。

在 servlet中给我的 Firebug 的 Network 选项卡中发送`ü`应该看起来像。Java 使用 -Dfile.encoding 参数绝对设置为“UTF-8”内部编码。我将问题追溯到这样的 request.getParameter() 方法。request.getQueryString 没问题，但是在提取实际参数时它失败了：`%C3%BC``Ã¼`

> request.getCharacterEncoding()) => UTF-8
> request.getContentType() => null
> request.getQueryString() => from=0&resultCount=10&sortAsc=true&searchType=quick&term=%C3%BC
> request.getParameter("term") => Ã¼
> Charset.defaultCharset() => UTF-8
> OutputStreamWriter.getEncoding() => UTF8
> new String(request.getParameter("term").getBytes(), UTF-8) => Ã¼
> System.getProperty("file.encoding ") => UTF-8

通过查看实现 request.getParameter() 的 Tomcat 和 Coyote 的来源，我发现了问题：来自连接器的 URIEncoding 始终为空，在这种情况下，它默认为 org.apache.coyote.Constants.DEFAULT_CHARACTER_ENCODING，即“ISO- 8859-1”就像 Wolfram 所说的那样。

长话短说：我的错是在 Tomcat 的 conf 目录中编辑 server.xml，只有在服务器视图中创建新服务器时才会将其加载到 Eclipse 中！之后，必须编辑 Servers 项目中的单独 server.xml。这样做后，连接器设置正确加载，一切正常。

感谢您的评论！希望这可以帮助某人...

# c# - 任务通常不运行

> ID：11505048
> 
> 赞同：0
> 
> 时间：2012-07-16T13:10:25.973
> 
> 标签：c#, .net, task-parallel-library

我是并行编程的新手。我在下面编写了基本代码，但它并不总是像我一样运行。

```
Console.WriteLine ("Start");

Task task = Task.Factory.StartNew(() => {

  for (int i = 0; i < 5; i++)
{
    Console.WriteLine (i);
}

});

Console.WriteLine ("End"); 
```

我通常无法在 10 次试验中得到循环 8-9 的结果。有时它会打印循环结果，有时不会。但我它总是打印`Start`and `End`。后面发生了什么？为什么有时我无法得到循环的结果？

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:14:02.093

您的程序在并行循环有机会打印任何输出之前终止。

```
Console.WriteLine ("Start");
Task task = Task.Factory.StartNew(() => {
for (int i = 0; i < 5; i++)
{
    Console.WriteLine (i);
}
});

Console.ReadLine();
Console.WriteLine("End"); 
```

通过等待输入暂停，您将看到循环正确运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:16:45.280

在末尾添加一个 readline。您将看到以下内容：

```
Start
End
0
1
2
3
4

Console.WriteLine("Start");

Task task = Task.Factory.StartNew(() =>
{

    for (int i = 0; i < 5; i++)
    {
        Console.WriteLine(i);
    }

});

Console.WriteLine("End");
Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T13:16:56.410

你必须告诉你的主线程等到你的任务结束。

在大多数情况下，您的“结束”是在任务线程执行之前打印的。用于`TaskContinuationOptions`告诉父线程等待其任务线程完成。

```
Console.WriteLine ("Start");
Task task = Task.Factory.StartNew(() => {
for (int i = 0; i < 5; i++)
{
    Console.WriteLine (i);
}
});
task.ContinueWith(ant =>
{
    Console.WriteLine("End");
}, TaskContinuationOptions.NotOnFaulted| TaskContinuationOptions.AttachedToParent);
task.Wait(); 
```

# android - 选项卡活动未显示

> ID：11505051
> 
> 赞同：0
> 
> 时间：2012-07-16T13:10:30.887
> 
> 标签：android, android-tabhost, android-activity

我正在尝试让 Activity 显示在选项卡中，但无法使其正常工作。我已经检查过活动是否单独显示，但是一旦我尝试将其放入选项卡中，我就会得到一个空选项卡。

这是选项卡屏幕及其 XML 布局文件：

```
public class TestTabs extends TabActivity{

private TabHost tabHost;          // The tabhost for all the tabs
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    this.setContentView(R.layout.tabbed_screen);

    tabHost = getTabHost();

    initTabs();

}

protected void addTab(String tabName, Intent tabIntent){
    TabSpec tabSpec = tabHost.newTabSpec(tabName);
    tabSpec.setIndicator(tabName);
    tabSpec.setContent(tabIntent);
    tabHost.addTab(tabSpec);

}

protected void initTabs() {
    addTab("1",new Intent(this,TestActivity.class));
}

} 
```

布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<TabHost android:layout_width="fill_parent"
    android:layout_height="fill_parent" xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost">
    <LinearLayout android:id="@+id/LinearLayout01"
        android:orientation="vertical" android:layout_height="fill_parent"
        android:layout_width="fill_parent">
        <TabWidget android:id="@android:id/tabs" android:layout_height="fill_parent" android:layout_width="fill_parent"></TabWidget>    
        <FrameLayout android:id="@android:id/tabcontent"
            android:layout_height="fill_parent" android:layout_width="fill_parent">
        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

这是“孩子”活动：

```
public class TestActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    // The super.onCreate() call will set the general frame also for this Screen:
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
} 
```

}

布局：

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:ellipsize="end"
    android:maxLines="1"
    android:singleLine="true"
    android:text="Hello World"
    android:textSize="12sp"
    android:textStyle="bold" /> 
```

正如我所说，儿童活动在单独时显示正常，但是当我将它放在选项卡中时，我得到的选项卡没有任何内容。

我可能遗漏了一些明显的东西，但这是我第一次在 Android 中使用选项卡做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:24:17.810

您应该更改方法“addTab”的名称，因为它的默认方法 TabActivity 可能会导致此问题。其次，您的代码应如下所示：

```
public class TestTabs extends TabActivity{

    private TabHost tabHost;          // The tabhost for all the tabs
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.setContentView(R.layout.tabbed_screen);

        tabHost = getTabHost();
        TabSpec tabSpec;

        Intent intent = new Intent().setClass(this, tab1_activity.class);
        tabSpec = tabHost.newTabSpec("Tab-1").setIndicator("Tab-1",drawable1_obj).setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, tab2_activity.class);
        tabSpec = tabHost.newTabSpec("Tab-2").setIndicator("Tab-2",drawable2_obj).setContent(intent);
        tabHost.addTab(spec);   

        tabHost.setCurrentTab(1);

    }    
} 
```

# struts2 - struts2中如何设置和销毁会话变量？

> ID：11505052
> 
> 赞同：2
> 
> 时间：2012-07-16T13:10:34.287
> 
> 标签：struts2, session-variables, destroy

我是 Struts2 的初学者。我在 PHP 中使用，同时记录以将身份验证保存在**会话**变量中，我可以在注销后将其销毁。我想知道如何在 Struts2 中执行相同的过程：在登录时**设置****会话**变量并在注销时**销毁**它。十分感谢。

**更新（另一种解决方案）**

除了有用的答案和评论外，我们还可以使用：

```
session.remove("session_var_name"); // instead of session.clear(); 
```

删除一个确切的会话变量，而不是删除所有会话变量。谢谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:07:23.077

您可以执行以下操作之一

```
public class MyAction extends ActionSupport implements ServletRequestAware
{
    private HttpServletRequest httpServletRequest;

    public void setServletRequest(HttpServletRequest request)
    {
        this.httpServletRequest = request;
    }

    public String login()
    {
        httpServletRequest.getSession(false).setAttribute("key", your_session_object);
        return SUCCESS;
    }

    public String logout()
    {
        httpServletRequest.getSession(false).removeAttribute("key");
        return SUCCESS;
    }
}

public class MyAction extends ActionSupport implements SessionAware
{
    private Map sessionMap;

    public void setSession(Map map)
    {
        this.sessionMap = map;
    }

    public String login()
    {
        sessionMap.put(key, your_session_object);
        return SUCCESS;
    }

    public String logout()
    {
        sessionMap.remove(key);
        return SUCCESS;
    }
} 
```

第二种选择，即实现`SessionAware`是首选，因为它可以保护您免受`Servlet`API 的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-13T08:21:46.980

您可以在调用注销时使用 Scope Interceptor，并且在您的 struts xml 配置中使用“end”类型，Interceptor 将 null 设置为您的会话对象：

```
<action name="scopea" class="com.mevipro.test.action.ScopeActionA">
    <result name="success" type="dispatcher">/jsp/test.jsp</result>
    <interceptor-ref name="basicStack"/>
    <interceptor-ref name="scope">
        <param name="key">funky</param>
        <param name="session">person</param>
        <param name="type">start</param>
    </interceptor-ref>
</action>
<action name="scopeb" class="com.mevipro.test.action.ScopeActionB">
    <result name="success" type="dispatcher">/jsp/test.jsp</result>
    <interceptor-ref name="scope">
        <param name="key">funky</param>
        <param name="session">person</param>
        <param name="type">end</param>
    </interceptor-ref>
    <interceptor-ref name="basicStack"/>
</action> 
```

您必须定义“开始”和“结束”，开始是在会话中初始化对象时，“结束”用于销毁对象

更多细节：[https ://struts.apache.org/docs/scope-in​​terceptor.html](https://struts.apache.org/docs/scope-interceptor.html)

# sql - T-SQL：将具有相等值的行“压缩”为一

> ID：11505053
> 
> 赞同：0
> 
> 时间：2012-07-16T13:10:34.777
> 
> 标签：sql, sql-server, tsql

如果有任何行具有相同的值，是否有机会只显示一行？

我有以下情况：

> 身份证 | A栏| B栏| C栏
> 
> 1 | 2 | '测试' | 5
> 
> 2 | 3 | '测试'| 6
> 
> 3 | 2 | '测试'| 5

在这种情况下，我只想显示以下结果集：

> 身份证 | A栏| B栏| C栏
> 
> 1 | 2 | '测试' | 5
> 
> 2 | 3 | '测试'| 6

谢谢你的帮助。

问候，亲

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T13:16:09.387

由于 id 列，您的行不是完全重复的。如果您不关心 id 的哪个值出现，您可以做您想做的事情：

```
select max(id) as id, ColumnA, ColumnB, ColumnC
from t
group by ColumnA, ColumnB, ColumnC 
```

如果您根本不需要 id，这更简单：

```
select distinct ColumnA, ColumnB, ColumnC
from t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:16:27.247

```
Try this :

With cte As
( Select  * , row_number() over (partition by ColumnA, ColumnB,ColumnC
 order by ID ) as myrownumber from myTable
)
Select * from cte where myrownumber=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:17:59.407

```
select id, column1,column2,colum3 from
(
    select *, row_number() over (partition by column1,column2,colum3 order by id) as sno 
    from table
) as t
where sno=1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:25:35.933

```
CREATE TABLE #test
(
    ID      TINYINT     NOT NULL,
    colA    TINYINT     NOT NULL,
    colB    VARCHAR(10) NOT NULL,
    colC    TINYINT     NOT NULL
);

INSERT INTO #test VALUES (1,2, 'test', 5);
INSERT INTO #test VALUES (2,3, 'test', 6);
INSERT INTO #test VALUES (3,2, 'test', 5);

SELECT 
    ID,
    ColA,
    ColB,
    ColC
FROM 
(   
    SELECT 
        ID,
        ColA,
        ColB,
        ColC,
        ROW_NUMBER() OVER(PARTITION BY ColA ORDER BY ColA DESC) AS RowNum
      FROM #test
) AS WorkTable
WHERE RowNum = 1 
```

# neural-network - 建立一个人工神经网络对井字游戏结束游戏进行分类

> ID：11505054
> 
> 赞同：3
> 
> 时间：2012-07-16T13:10:44.007
> 
> 标签：neural-network, classification, tic-tac-toe

我很难建立一个神经网络来将井字棋棋盘状态（最终或中间）分类为“X 胜”、“O 胜”或“平局”。

我将描述我目前的解决方案和结果。任何建议表示赞赏。

*** 数据**集 * 数据 集 = 958 种可能的终局游戏 + 958 种随机游戏 = 1916 种棋盘状态（随机游戏可能不完整，但都是合法的。即没有两个玩家同时获胜）。

训练集 = 数据集测试集的 1600 个随机样本 = 剩余 316 个案例

在我当前的伪随机开发场景中，数据集具有以下特征。训练集： - “X” 527 胜 - “O” 264 胜 - 809 场 测试集： - “X” 104 场 - “O” 56 场 - 156 场

*** 调制 *** 输入层：18 个输入神经元，每个神经元对应一个棋盘位置和玩家。因此，棋盘（B=blank）：xxo ox B B o X 编码为：1 0 1 0 0 1 0 1 1 0 0 0 0 0 0 1 1 0

输出层：3 个输出神经元，分别对应每个结果（X 胜、O 胜、平）。

*** 建筑学 ***

基于：[http ://www.cs.toronto.edu/~hinton/csc321/matlab/assignment2.tar.gz](http://www.cs.toronto.edu/~hinton/csc321/matlab/assignment2.tar.gz)

1 Single Hidden Layer 隐藏层激活函数：Logistic 输出层激活函数：Softmax 误差函数：Cross-Entropy

*** 结果 ***

似乎没有任何参数组合能够达到 100% 的正确分类率。一些例子：

```
NHidden     LRate   InitW   MaxEpoch Epochs FMom    Errors  TestErrors
8           0,0025  0,01    10000   4500    0,8     0       7
16          0,0025  0,01    10000   2800    0,8     0       5
16          0,0025  0,1     5000    1000    0,8     0       4
16          0,0025  0,5     5000    5000    0,8     3       5
16          0,0025  0,25    5000    1000    0,8     0       5
16          0,005   0,25    5000    1000    0,9     10      5
16          0,005   0,25    5000    5000    0,8     15      5
16          0,0025  0,25    5000    1000    0,8     0       5
32          0,0025  0,25    5000    1500    0,8     0       5
32          0,0025  0,5     5000    600     0,9     0       5
8           0,0025  0,25    5000    3500    0,8     0       5 
```

重要 - 如果您认为我可以改进以下任何一项： - 数据集特征（训练和测试用例的来源和数量）不是最好的。- 替代问题调制更合适（输入/输出神经元的编码） - 更好的网络架构（隐藏层数、激活/错误函数等）。

假设我目前在这方面的选择，即使不是最优的，也不应该妨碍系统具有 100% 的正确分类率，我想关注其他可能的问题。

换句话说，考虑到游戏的简单性，这个数据集/调制/架构应该做到这一点，因此，我在参数方面做错了什么？

我对 ANN 没有太多经验，我的主要问题如下：使用 16 个隐藏神经元，ANN 可以学习将每个隐藏单元与“某个玩家以某种方式获胜”相关联（3 个不同的行 + 3 个不同的列 + 2 对角线）* 2 名玩家

在此设置中，“最佳”权重集非常简单：每个隐藏单元具有来自 3 个输入单元（对应于玩家的行、列或对角线）的“更大”连接权重和“更大”连接权重到其中一个输出单元（对应于该玩家的“胜利”）。

如上表所示，无论我做什么，我都无法减少测试错误的数量。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:27:03.940

您所做的一切都是正确的，但您只是在这里尝试解决一个难题，即将井字游戏配置的一些示例**推广到所有其他示例。**

不幸的是，您使用的简单神经网络无法感知输入（邻域）的空间结构，也无法利用对称性。因此，为了获得完美的测试错误，您可以：

*   增加数据集的大小以包含大多数（或所有）可能的配置——然后网络将能够简单地记住这些配置，如大多数设置中的零训练错误所示；

*   选择一个不同的问题，其中有更多的结构可以概括；

*   使用可以捕获对称性（例如通过权重共享）和/或输入的空间关系（例如不同的特征）的网络架构。[卷积网络](http://deeplearning.net/tutorial/lenet.html)只是其中一个例子。

# r - R中的条件cumsum？

> ID：11505056
> 
> 赞同：3
> 
> 时间：2012-07-16T13:11:03.337
> 
> 标签：r, vectorization

嗨，这是这里提出的问题的扩展： [条件累积和](https://stackoverflow.com/questions/8537783/conditional-cumulative-sum)

假设我有以下向量。我想计算零内块的运行总数。

```
d <- c(0,0,0,1,3,4,5,-1,2,3,-5,8,0,0,-2,-3,3,5,0,0,0,-1,-1,-1,-1);

Ans d <- c(0,0,0,1,4,8,13,12,14,17,12,20,0,0,-2,-5,-2,3,0,0,0,-1,-2,-3,-4). 
```

我想以矢量化的方式来做，因为我的矢量相当大。到目前为止，我一直在尝试使用 rle 来实现这一目标，但没有取得多大成功。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T13:20:31.563

这将起作用：

```
aux <- split(d, cumsum(d == 0))
v <- unlist(sapply(aux, cumsum))
1   2  31  32  33  34  35  36  37  38  39 310   4  51  52  53  54  55   6   7  81  82  83  84  85 
0   0   0   1   4   8  13  12  14  17  12  20   0   0  -2  -5  -2   3   0   0   0  -1  -2  -3  -4  
as.vector(v)
[1]  0  0  0  1  4  8 13 12 14 17 12 20  0  0 -2 -5 -2  3  0  0  0 -1 -2 -3 -4 
```

这里`as.vector()`只是隐藏了元素的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-16T21:36:38.383

这应该有效。没有循环。非常快，因为所有工作都发生在 R 之外

```
sum_from<-function(value,from)
{
  i  <- cummax(seq_along(value)*from)
  cv <- cumsum(value*cummax(from))  
  cv - c(0,0,cv[-length(cv)])[i+1] 
}

d <- c(0,0,0,1,3,4,5,-1,2,3,-5,8,0,0,-2,-3,3,5,0,0,0,-1,-1,-1,-1)

all(sum_from(d,d==0)==c(0,0,0,1,4,8,13,12,14,17,12,20,0,0,-2,-5,-2,3,0,0,0,-1,-2,-3,-4)) 
```

结果匹配：

```
> all(sum_from(d,d==0)==c(0,0,0,1,4,8,13,12,14,17,12,20,0,0,-2,-5,-2,3,0,0,0,-1,-2,-3,-4))
[1] TRUE
> 
```

# jquery - Jquery幻灯片调整

> ID：11505062
> 
> 赞同：0
> 
> 时间：2012-07-16T13:11:20.817
> 
> 标签：jquery, slideshow

我正在尝试运行 jQuery 幻灯片，[这里是](http://jsfiddle.net/ZLMez/).

我需要

1.  自动播放幻灯片
2.  幻灯片使用交叉淡入淡出过渡。我需要幻灯片向左/向右移动并淡出，新幻灯片移动/淡入。如果单击右箭头，当前幻灯片应向左移动并淡出，新幻灯片将从右边并淡入。

需要做哪些调整？有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:28:10.767

转到插件的网站并查找幻灯片的选项以及如何实现它们（通常这样做很容易）。您正在寻找的其他效果也是如此。如果此插件没有所需的选项，那么我建议您尝试其他可以满足您需求的东西。当然，您可以尝试自己调整源，但有这么多其他免费替代品，这不是最有效的方法。

# hibernate - 在同一对象上休眠一对一关系

> ID：11505063
> 
> 赞同：3
> 
> 时间：2012-07-16T13:11:21.987
> 
> 标签：hibernate, hibernate-mapping, hibernate-annotations

我有一个事务表，其中包含有关...事务的信息，一些事务是从以前的事务派生的，因此事务之间可以存在一对一的关系。

我试图在休眠中设置注释来创建这个数据结构，但我无法弄清楚或找到如何去做。

```
@Entity
@Table(name="transaction")
public class Transaction {
private String transactionid;
private Transaction derivedFrom;

   /**
     * @return the transactionid
     */
    @Id
    public String getTransactionid() {
        return transactionid;
    }
    /**
     * @param transactionid the transactionid to set
     */
    public void setTransactionid(String transactionid) {
        this.transactionid = transactionid;
    }

    @OneToOne(mappedBy = "transaction", cascade = CascadeType.ALL)
    public Transaction getDerivedFrom() {
        return derivedFrom;
    }
    public void setDerivedFrom(Transaction derivedFrom) {
        this.derivedFrom = derivedFrom;
    }

} 
```

这是一个代码示例，因此您将了解我要处理的内容...有关如何设置此关系的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:09:40.617

它不起作用，因为

```
mappedBy="transaction" 
```

在关系的另一端调用双向关系和属性名称事务。正如您从代码中看到的那样，您没有这样的属性。

如果您想要从孩子到父母**的单向一对一，以下是可行的方法：**

```
public class Transaction {
    private String transactionid;
    private Transaction parent;

    @Id
    public String getTransactionid() {
        return transactionid;
    }
    public void setTransactionid(String transactionid) {
        this.transactionid = transactionid;
    }
    @OneToOne
    public Transaction getParent() {
        return parent;
    }
    public void setParent(Transaction parent) {
        this.parent = parent;
    }
} 
```

关系默认保留为 column name `parent_transactionid`，这当然可以通过[@JoinColum](http://docs.oracle.com/javaee/6/api/javax/persistence/JoinColumn.html)更改。此外，您可能希望为列设置唯一约束。

**要建立上述双向一对一的关系，只需添加以下内容**（无需其他修改）：

```
private Transaction child;

@OneToOne(mappedBy = "parent")
public Transaction getChild() {
    return parent;
}
public void setChild(Transaction child) {
    this.child = child;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:54:56.790

假设您的事务表中有一个外键列“derived_id”，您可以指定连接列

```
 @Entity
 public class Transaction 
 {
    @OneToOne
    @JoinColumn(name = "derived_id", nullable = true)
    private Transaction derivedFrom;
 } 
```

# java - 每次我更改我的 java 代码时，我可以防止重新启动我的应用程序吗？

> ID：11505064
> 
> 赞同：4
> 
> 时间：2012-07-16T13:11:28.017
> 
> 标签：java, eclipse, jakarta-ee, websphere

使用的 ide 是：IBM Rational® Software Architect™ for WebSphere® Software Version: 7.5.5.3

使用的应用服务器是 Wbesphere 6.1。

我发布这个问题是因为我的服务器需要大约 7 到 8 分钟才能启动。

因此，即使我做了一个小的更改，我也必须等待 10 分钟才能测试我的应用程序中的更改。所以有没有一种方法可以更改我的 java 代码并在不重新启动服务器的情况下对其进行测试。

建议赞赏！

笔记：

我不应该在我的环境中使用任何构建工具。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T13:14:11.410

有一个名为[JRebel](http://zeroturnaround.com/software/jrebel/)的插件可以让您在不重新启动服务器的情况下进行更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T13:21:49.903

[Dynamic Code Evolution VM](http://ssw.jku.at/dcevm/)是 JRebel 的开源替代品，您可以尝试重新加载类。它将重新定义整个类，甚至重新加载对类层次结构所做的更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T19:47:05.533

理论上，重新加载类是内置在 JVM 中的，尽管大多数实现（特别是 Oracle 的）只重新加载（热交换），只要您只更改方法体内的代码即可。

另一个问题是，在 Eclipse 中，WTP 适配器必须配合并且只部署更改的类定义（增量部署）。由于某种原因，GlassFish 一直是增量部署的主要反对者，因此它的 WTP 适配器会在进行最微小的更改后重新启动服务器。

JBoss 曾经是增量部署的支持者，但在 AS 7 之后（“一切都必须不同”），他们现在也成为了“重启服务器”学派的追随者。

另一个问题是简单的类加载通常只是故事的一部分。在 EJB、JSF、JPA 和许多其他框架中，类也必须由框架重新注册，必须清除缓存等

这就是像 JRebel 这样的东西出现的地方。它重新加载了对类的几乎所有类型的更改。它还可以独立于 WTP 适配器工作，从而使您摆脱服务器供应商的心血来潮，即今天重新启动是时髦的，明天是跛脚的，或者正好相反。JRebel 还拥有许多框架的知识和插件。

不幸的是，JRebel 并不完美，偶尔会失败，但总的来说它运行良好。

另一条建议：大多数现代应用程序服务器在相对较快的硬件和小型应用程序上在一秒钟内启动，对于较大的应用程序则需要大约 10 秒。有了这些和会话序列化，你*几乎*不再需要像 JRebel 这样的东西了。

# c - strcpy() 复制指针？

> ID：11505068
> 
> 赞同：-2
> 
> 时间：2012-07-16T13:11:44.697
> 
> 标签：c, strcpy

我有一个关于 strcpy() 的问题。据我了解，我认为 strcpy 复制位于指针处的字节而不是指针本身。但是这段代码似乎反应不同。

```
char* str2  = (char*) malloc(50) ;
printf("str2:%d (%p), strTrim:%d (%p)", strlen(str2),*str2,strlen(strTrim),*strTrim) ;
strcpy(str2,strTrim);
printf("str2:%d (%p), strTrim:%d (%p)", strlen(str2),*str2,strlen(strTrim),*strTrim) ; 
```

我得到的输出是：

```
str2: 64 (FFFFFFCD) , strTrim:8 (00000061)
str2:8 (00000061) , strTrim:8 (00000061) 
```

现在，第一行输出对我来说似乎很清楚。但是第二行让我感到困惑。为什么它将 strTrim 的指针复制到 str2 ？我真的不明白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:15:58.010

```
char* str2  = (char*) malloc(50) ;
strlen(str2);  // undefined behavior, `str2` has an indeterminate value 
```

在`malloc`分配的对象有一个不确定的值之后。你不能`strlen`用`str2`参数调用：它还不是一个字符串。

取消第一个字节`str2`并将成为指向（空）字符串的指针：

```
str2[0] = '\0';
strlen(str2); // OK, strlen(str2) is 0 
```

# python - 我将如何压缩多个 StringIO 文件？

> ID：11505070
> 
> 赞同：2
> 
> 时间：2012-07-16T13:11:49.257
> 
> 标签：python, pyramid

我有一个 Pyramid Web 应用程序，它使用内部 Web 服务使用 reportlab 将一些数据转换为 PDF 文件。这很好用，但一次只生成一个 PDF 文件。客户现在希望能够*打印*（可以压缩，而不是通过打印机实际打印）多个 PDF 文件。

我目前在底部有这段代码：

```
 result = {"sales_order_data": {"sales_order_list": order_pdf_data}}
    encoded_result = urllib.urlencode(result)
    received_data = requests.post('http://convert_to_pdf/sales_order', data=encoded_result)
    pdf_file = received_data.content
    content_disposition = received_data.headers['Content-Disposition']

    res = Response(content_type='application/pdf', content_disposition=content_disposition)
    res.body = pdf_file
    return res 
```

pdf_file 是 PDF 文件的二进制形式。我正在考虑多次运行我的 pdf 转换代码，每次都将 pdf 二进制数据存储在一个列表中，然后使用 StringIO 和 ZipFile 将一堆文件压缩在一起。

我不太确定这是否可能：

```
list_of_pdf_files = []
for order in list_of_orders:
    <processing of data here>
    result = {"sales_order_data": {"sales_order_list": order_pdf_data}}
    encoded_result = urllib.urlencode(result)
    received_data = requests.post('http://convert_to_pdf/sales_order', data=encoded_result)
    pdf_file = received_data.content
    list_of_pdf_files.append(pdf_file)

zipped_file = <What do I do here to zip the list of pdf files?>   
content_disposition = 'attachment; filename="pdf.zip"'
res = Response(content_type='application/zip', content_disposition=content_disposition)
res.body = zipped_file
return res 
```

获取二进制 pdf 文件列表后我该怎么做，以便我可以在内存中生成压缩文件并通过 content-disposition 返回该文件作为响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:22:43.313

用于[`ZipFile.writestr()`](http://docs.python.org/library/zipfile.html#zipfile.ZipFile.writestr)将 PDF 文件一次一个写入存档。

# r - 通过匹配模式将特定值添加到 data.frame 列

> ID：11505071
> 
> 赞同：4
> 
> 时间：2012-07-16T13:12:01.477
> 
> 标签：r, pattern-matching, dataframe

我有两个data.frames：

```
pattern <- data.frame(pattern = c("A", "B", "C", "D"), val = c(1, 1, 2, 2))

match <- data.frame(match = c("A", "C")) 
```

我想向我的 data.frame 模式添加另一个名为 new_val 的列，并将“X”分配给列模式的值在 data.frame 匹配中的每一行，否则分配“Y”

```
is.element(pattern$pattern, match$match) 
```

[1] 真假真假

因此，生成的 data.frame 应如下所示：

```
 pattern val new_val
1   A       1   X
2   B       1   Y
3   C       2   X
4   D       2   Y 
```

我用丑陋的for循环实现了它，但我相信这几乎可以在一行R命令中使用花哨的东西完成:-)

有人能帮忙吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:59:42.967

我只是在 Tyler 说“如果你想要一个单衬 data.table 可能会这样做”之后才真正发布这个，而且我知道在基础中使用一个衬里绝对是可能的。我还假设`match`已重命名为`mat`.

```
 pattern$new_val <- c("Y", "X")[(pattern$pattern %in% mat)+1]
  pattern
#  pattern val new_val
#1       A   1       X
#2       B   1       Y
#3       C   2       X
#4       D   2       Y 
```

`pattern$pattern %in% mat`正在查找模式的哪些元素在 mat 中，如果在 mat 中则返回 TRUE，如果不在则返回 FALSE。然后我加 1 使其成为 1-2 范围内的数字，以便它可以用于索引。然后我们将其用作自定义向量的索引，`c("Y", "X")`并且由于我们创建的索引始终为 1 或 2，因此我们始终能够获取感兴趣的元素。所以在这种情况下，如果图案不在垫子中，我们将抓住“Y”，如果是，我们将抓住“X”——这就是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:20:41.083

这是一种方法（我将您的 match 重命名为 mat ，因为有一个非常重要的名为 match 的基本函数，您实际上可以使用它来解决这个问题；实际上`%in%`是一种形式`match`：

```
pattern <- data.frame(pattern = c("A", "B", "C", "D"), val = c(1, 1, 2, 2))
mat <- c("A", "C")

pattern$new_val <- "Y"                            #pre allot everything to be Y
pattern$new_val[pattern$pattern %in% mat] <- "X"  #replace any A or C with an X
pattern 
```

PS如果你想要一个班轮`data.table`可能会这样做。

如果你想要一些更复杂的东西，你可以使用我正在处理的包中的一个函数：

```
library(qdap)

#original problem
pattern$new_val <- text2color(pattern$pattern, list(c("A", "C")), c("X", "Y"))

#extending it
#makes D  a 5
text2color(pattern$pattern, list(c("A", "C"), "D"), c("X", 5, "Y")) 
```

这个函数实际上是为了做其他事情而设计的，但如果你想了解它的基本部分，你可以查看源代码。

# javascript - 数据角色打破“for循环”为什么

> ID：11505074
> 
> 赞同：0
> 
> 时间：2012-07-16T13:12:09.747
> 
> 标签：javascript, for-loop

将 data-role="listview" 添加到此 html 时：

```
<ul id="mylinks" class="options" data-role="listview"> 
```

它打破了我的“for循环”。我用警报检查了“lis.length”，它仍然保存着数字值。我也在使用jquery mobile js。

为什么添加数据角色时我的“for循环”不起作用，我该如何解决这个问题。是否有运行此循环的替代方法。

```
<script type="text/javascript">
window.onload=function()
{
    var ul = document.getElementById("mylinks");
    var lis = ul.getElementsByTagName("li");
    alert(lis.length);
    var url = "http://" + window.location.host + "/mobile/";
    var NEWurl = "http://www.sportingpulse.com/mobile/";
    for( var i = 0; i < lis.length; i++ );
    {
        lis.item(i).childNodes[0].href = lis.item(i).childNodes[0].href.replace(url,     NEWurl);
        alert("working")
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:27:28.563

你有一个不受欢迎的分号

```
for( var i = 0; i < lis.length; i++ ); 
```

应该

```
for( var i = 0; i < lis.length; i++ ) 
```

# ios - 核心数据迁移——如何只填充一个新对象？

> ID：11505075
> 
> 赞同：0
> 
> 时间：2012-07-16T13:12:10.827
> 
> 标签：ios, core-data, migration

我在市场上有一个应用程序，它`a1`在核心数据中只有一个 A 类对象实例。

在新版本中，我现在需要 2`b1, b2`个新类 B 实例和 2`c1, c2`个新类实例`C`。在这里`b1`并从旧的同时`c1`获取大部分数据，并且必须创建但留空 - 所以不要从旧的核心数据对象获取数据。`a1``b2``c2`

所有教程和描述都详细说明了旧数据转换 -> 新数据，但在我的例子中，它是关于从旧数据到新数据的迁移，包括创建新的空对象。

**这样做的正确方法是什么，因为“典型迁移”并没有真正涵盖这种情况？**

我在 Android 中对我的数据库做了同样的事情，这真的很容易，但我不确定如何将我的问题“压入”核心数据迁移方案。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:19:21.393

您必须创建自定义迁移策略。使用这篇文章作为入门指南，并获得研究文档的良好起点。

[使用自定义策略进行核心数据版本控制和迁移](https://stackoverflow.com/questions/7027108/core-data-versioning-and-migrating-with-custom-policy)

# iphone - iPhone 不会在断点处停止

> ID：11505076
> 
> 赞同：4
> 
> 时间：2012-07-16T13:12:13.483
> 
> 标签：iphone, ios, xcode, debugging, breakpoints

我已经在 Max OsX Lion 上安装了 Xcode 4.3.3，现在当我在 iOS 5.1.1 的模拟器中调试我的应用程序时，它会在断点处停止，但是当我在装有 iOS 5.1.1 的 iPhone 设备上调试时，它不会停止断点。
我不知道为什么它不能正常工作。我研究了很多，但没有得到任何解决方案。我的设备已越狱，我将其 iOS 从 3.1 更新到 5.1.1。如果有人知道，请帮助我。

我已尝试将这些链接作为解决方案，但在我的情况下无效：

[在 iPhone 设备上运行时，调试器不会在断点处停止](https://stackoverflow.com/questions/6733284/debugger-does-not-stop-at-breakpoints-when-running-on-iphone-device)

[如何在带有断点的 xcode4 中运行 iphone 应用程序？](https://stackoverflow.com/questions/7925644/how-to-run-the-iphone-app-in-xcode4-with-breakpoints)

[iPhone 设备调试](https://stackoverflow.com/questions/983657/iphone-device-debugging)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:51:31.190

这一定是一个错误，因为即使使用未越狱的 iPhone，我也遇到了完全相同的问题，并且在我的 Macbook Pro 上安装 10.8 后它就可以工作。我不知道这是否适合您，但它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T10:59:37.703

我发现了问题，不知何故在我的 Xcode 中启用了“调试时显示反汇编”，这会产生该问题。当我禁用它时，我的所有调试器都停止在我的源代码中。

可以在Product->Debug Workflow->Show Disassembly下找到

# java - Android Logcat：如何输出带有 TAB 字符的日志消息？

> ID：11505077
> 
> 赞同：6
> 
> 时间：2012-07-16T13:12:13.540
> 
> 标签：java, android, tabs, logcat, ddms

在 Java 中，`System.out.printf("\t")`在控制台中给出一个 TAB 字符。

我想在 Logcat DDMS 中使用该功能，方法是在我的日志消息中输出一个 TAB 字符。

```
public void testLogMessage(){
    Log.d("Test", "TAB: " + "\t" + "AAAAAAAA" + "\t" + "AAAAAAAAA");
} 
```

但是，在 Logcat 中，我看不到 A 中的 TAB 字符。

如果可能，我应该如何在 Logcat 中输出 TAB 字符？提前致谢。

编辑：

可能我没有把我的问题说清楚。我想在此显示 TAB 控制字符：

![日志猫](../Images/776a105d0492b65c5f8ff57830ba7e14.png)

我只是无法让 TAB 字符出现。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:29:20.270

如果没有人能够证明 TAB 字符可以输出到 Logcat，那么我猜这意味着 Logcat 无法显示 TAB 字符。

我没有 TAB 字符的解决方法，也不想继续解决这个问题。

# android - 我如何为所有安卓设备开发应用程序？我可以在适用于大多数设备的模拟器上设置什么设置？

> ID：11505078
> 
> 赞同：1
> 
> 时间：2012-07-16T13:12:21.580
> 
> 标签：android, samsung-mobile

在为三星 Galaxy s2 和 Galaxy s3 开发应用程序时，我应该保持什么模拟器分辨率？

我发现三星 Galaxy s2 的分辨率为 480x800，而 s3 的分辨率为 1280x720，所以到目前为止我所理解的是，我应该要求我的图形设计师为我提供包含 480x800 背景图像的 hdpi 图形，并在 Galaxy s3 移动版中实现相同的背景图像，我将使用大小为 1280x720 的图像并放入 xhdpi 文件夹，以便它可以在 s3 上工作。

背景图像覆盖了移动应用程序的整个可用区域。所以我是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:21:18.717

您将需要创建多个模拟器或获取各种设备。

有一些非常重要的，所以通常你需要确保你有：

```
ldpi, mdpi, hdpi, xhdpi 
```

和

> 小、中、大、超大

有些人选择排除某些尺寸（如 small 和 ldpi），但 htat 由您决定，

如果您选择以下部分或全部，这应该是一个好的开始：

> ```
> 480x320 (SE Mini 10), 480x800 (GS2, Desire, etc), 1280x720 (GS3, Galaxy Nexus etc), 1280x800 (Note, Xoom, various other tablets)
> 
> HTC ChaCha (because it's landscape default) 
> ```

您需要确保在每个密度的相关文件夹中创建资源，通常，我倾向于忽略 ldpi 而只是将资源放入：

> mdpi、hdpi 和 xhdpi（对于 ldpi 设备，mdpi 将自动按比例缩小）

您可能还需要创建不同尺寸的各种纵向和横向布局。

阅读此页面可提供大部分必要信息：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

此页面还包含有关尺寸分布和流行度的重要信息，这些信息不断更新：

[安卓统计](http://developer.android.com/about/dashboards/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:19:57.877

Android 为您做的一件事是它管理分辨率。如果您使用正确的尺寸格式（`dp`、`sp`等），您的布局将缩放到几乎所有分辨率。如果您将图像放置在正确的可绘制文件夹（hdpi、ldpi、mdpi 等）中，操作系统也会根据需要将它们交换出去。

此外，如果我没记错的话，模拟器应该处理特定设备的分辨率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:20:16.097

以聪明的方式设计懒惰！通常这意味着不要在一种布局中放置内容。确保所有东西在最小尺寸和最大尺寸上看起来都很好。最好分开处理片剂。阅读[提供替代资源](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)的工作原理，您可以为每种屏幕尺寸构建单独的布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:57:23.943

在使用之前检查该设备上的硬件是否可用。hasSystemFeature() 可用于检查。

# android - 如何通过谷歌天气API读取天气数据

> ID：11505079
> 
> 赞同：1
> 
> 时间：2012-07-16T13:12:28.503
> 
> 标签：android

我正在使用适用于 android 的 Google 天气 API 开发天气示例​​应用程序，到目前为止我已经开发了（您可以看到下图）

![在此处输入图像描述](../Images/d150a2060d882ca5d28731cadbff00e5.png)

我有问题如何读取数据，如下面的红色矩形所示。现在我需要在源代码中进行哪些更改才能读取数据。

![在此处输入图像描述](../Images/6610ee91f69c7820948215b32d95c51b.png)

我的主要活动

```
 package org.anddev.android.weatherforecast;

import java.net.MalformedURLException;
import java.net.URL;

import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.anddev.android.weatherforecast.views.SingleWeatherInfoView;
import org.anddev.android.weatherforecast.weather.GoogleWeatherHandler;
import org.anddev.android.weatherforecast.weather.WeatherCurrentCondition;
import org.anddev.android.weatherforecast.weather.WeatherForecastCondition;
import org.anddev.android.weatherforecast.weather.WeatherSet;
import org.anddev.android.weatherforecast.weather.WeatherUtils;
import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;

public class WeatherForecast extends Activity 
{

    private final String DEBUG_TAG = "WeatherForcaster";
    private CheckBox chk_usecelsius = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle icicle) 
    {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        this.chk_usecelsius = (CheckBox) findViewById(R.id.chk_usecelsius);

        Button cmd_submit = (Button) findViewById(R.id.cmd_submit);

        cmd_submit.setOnClickListener(new OnClickListener() 
        {

            public void onClick(View arg0) 
            {
                URL url;
                try {
                    /* Get what user typed to the EditText. */
                    String cityParamString = ((EditText) findViewById(R.id.edit_input)).getText().toString();
                    String queryString = "http://www.google.com/ig/api?weather=Peshawar, Khyber Pakhtunkhwa";  //Lincoln,Nebraska
                    /* Replace blanks with HTML-Equivalent. */  
                    url = new URL(queryString.replace(" ", "%20"));

                    /* Get a SAXParser from the SAXPArserFactory. */
                    SAXParserFactory spf = SAXParserFactory.newInstance();
                    SAXParser sp = spf.newSAXParser();

                    /* Get the XMLReader of the SAXParser we created. */
                    XMLReader xr = sp.getXMLReader();

                    /*
                     * Create a new ContentHandler and apply it to the
                     * XML-Reader
                     */
                    GoogleWeatherHandler gwh = new GoogleWeatherHandler();
                    xr.setContentHandler(gwh);

                    /* Parse the xml-data our URL-call returned. */
                    xr.parse(new InputSource(url.openStream()));

                    /* Our Handler now provides the parsed weather-data to us. */
                    WeatherSet ws = gwh.getWeatherSet();

                    /* Update the SingleWeatherInfoView with the parsed data. */
                    updateWeatherInfoView(R.id.weather_today, ws.getWeatherCurrentCondition());

                    updateWeatherInfoView(R.id.weather_1, ws.getWeatherForecastConditions().get(0));
                    updateWeatherInfoView(R.id.weather_2, ws.getWeatherForecastConditions().get(1));
                    updateWeatherInfoView(R.id.weather_3, ws.getWeatherForecastConditions().get(2));
                    updateWeatherInfoView(R.id.weather_4, ws.getWeatherForecastConditions().get(3));

                } 
                catch (Exception e) 
                {
                    resetWeatherInfoViews();
                    Log.e(DEBUG_TAG, "WeatherQueryError", e);
                }
            }
        });
    }

    private void updateWeatherInfoView(int aResourceID,WeatherForecastCondition aWFIS) 

            throws MalformedURLException 
            {

        /* Construct the Image-URL. */
        URL imgURL = new URL("http://www.google.com" + aWFIS.getIconURL());
        ((SingleWeatherInfoView) findViewById(aResourceID)).setRemoteImage(imgURL);

        int tempMin = aWFIS.getTempMinCelsius();
        int tempMax = aWFIS.getTempMaxCelsius();

        /* Convert from Celsius to Fahrenheit if necessary. */
        if (this.chk_usecelsius.isChecked()) 
        {
            ((SingleWeatherInfoView) findViewById(aResourceID)).setTempCelciusMinMax(tempMin, tempMax);
        } 

        else 
        {
            tempMin = WeatherUtils.celsiusToFahrenheit(tempMin);
            tempMax = WeatherUtils.celsiusToFahrenheit(tempMax);
            ((SingleWeatherInfoView) findViewById(aResourceID)).setTempFahrenheitMinMax(tempMin, tempMax);
        }
    }

    private void updateWeatherInfoView(int aResourceID,
            WeatherCurrentCondition aWCIS) throws MalformedURLException 
            {

        /* Construct the Image-URL. */
        URL imgURL = new URL("http://www.google.com" + aWCIS.getIconURL());
        ((SingleWeatherInfoView) findViewById(aResourceID)).setRemoteImage(imgURL);

        /* Convert from Celsius to Fahrenheit if necessary. */
        if (this.chk_usecelsius.isChecked())
        {
            ((SingleWeatherInfoView) findViewById(aResourceID)).setTempCelcius(aWCIS.getTempCelcius());
        }

        else
        {
            ((SingleWeatherInfoView) findViewById(aResourceID)).setTempFahrenheit(aWCIS.getTempFahrenheit());
        }
    }

    private void resetWeatherInfoViews() 
    {
        ((SingleWeatherInfoView)findViewById(R.id.weather_today)).reset();
        ((SingleWeatherInfoView)findViewById(R.id.weather_1)).reset();
        ((SingleWeatherInfoView)findViewById(R.id.weather_2)).reset();
        ((SingleWeatherInfoView)findViewById(R.id.weather_3)).reset();
        ((SingleWeatherInfoView)findViewById(R.id.weather_4)).reset();
    }
} 
```

天气信息查看活动

```
package org.anddev.android.weatherforecast.views;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;
import java.util.Map;

import org.anddev.android.weatherforecast.R;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Typeface;
import android.util.AttributeSet;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

/**
 * The View capable of showing a WeatehrIcon + a Temperature-TextView.
 */
public class SingleWeatherInfoView extends LinearLayout {

    // ===========================================================
    // Fields
    // ===========================================================

    private ImageView myWeatherImageView = null;
    private TextView myTempTextView = null;

    // ===========================================================
    // Constructors
    // ===========================================================

    public SingleWeatherInfoView(Context context) 
    {
        super(context);
    }

    public SingleWeatherInfoView(Context context, AttributeSet attrs) //,Map inflateParams
    {
        super(context,attrs);
        /* Setup the ImageView that will show weather-icon. */
        this.myWeatherImageView = new ImageView(context);
        this.myWeatherImageView.setImageDrawable(getResources().getDrawable(R.drawable.dunno));

        /* Setup the textView that will show the temperature. */
        this.myTempTextView = new TextView(context);
        this.myTempTextView.setText("? °C");
        this.myTempTextView.setTextSize(16);
        this.myTempTextView.setTypeface(Typeface.create("Tahoma", Typeface.BOLD));

        /* Add child views to this object. */
        this.addView(this.myWeatherImageView, new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

        this.addView(this.myTempTextView, new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    }

    // ===========================================================
    // Getter & Setter
    // ===========================================================

    public void reset() 
    {
        this.myWeatherImageView.setImageDrawable(getResources().getDrawable(R.drawable.dunno));
        this.myTempTextView.setText("? °C");
    }

    /** Sets the Child-ImageView of this to the URL passed. */
    public void setRemoteImage(URL aURL) 
    {
        try 
        {
            URLConnection conn = aURL.openConnection();
            conn.connect();
            InputStream is = conn.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            Bitmap bm = BitmapFactory.decodeStream(bis);
            bis.close();
            is.close();
            this.myWeatherImageView.setImageBitmap(bm);
        } 

        catch (IOException e) 
        {
            /* Reset to 'Dunno' on any error. */
            this.myWeatherImageView.setImageDrawable(getResources().getDrawable(R.drawable.dunno));
        }
    }

    public void setTempCelcius(int aTemp) 
    {
        this.myTempTextView.setText("" + aTemp + " °C");
    }

    public void setTempFahrenheit(int aTemp) 
    {
        this.myTempTextView.setText("" + aTemp + " °F");
    }

    public void setTempFahrenheitMinMax(int aMinTemp, int aMaxTemp) 
    {
        this.myTempTextView.setText("" + aMinTemp + "/" + aMaxTemp + " °F");
    }

    public void setTempCelciusMinMax(int aMinTemp, int aMaxTemp) 
    {
        this.myTempTextView.setText("" + aMinTemp + "/" + aMaxTemp + " °C");
    }

    public void setTempString(String aTempString) 
    {
        this.myTempTextView.setText(aTempString);
    }
} 
```

# matlab - 平均时间信息

> ID：11505082
> 
> 赞同：0
> 
> 时间：2012-07-16T13:12:39.067
> 
> 标签：matlab

我有两个带有时间信息的单元格数组：

这是示例：

```
'2012-05-10'
'2012-05-10'
'2012-05-10'
'2012-05-10'
'2012-05-10'
'2012-05-11'
'2012-05-11'

'19:28:27.000'
'19:28:38.000'
'21:57:31.000'
'21:57:37.000'
'21:57:40.000'
'21:57:43.000'
'21:57:50.000' 
```

我只需要两个时间信息，就像我独一无二的：

```
'2012-05-10'    '19:28:27.000'
'2012-05-11'    '21:57:40.000' 
```

我也会有一段时间有这个：

```
'2012-05-10'
'2012-05-10'
'2012-05-10'
'2012-05-10'
'2012-05-10'

'19:26:27.000'
'19:26:38.000'
'21:55:31.000'
'21:57:37.000'
'21:55:40.000' 
```

我该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:42:18.690

您可以使用以下`unique`功能执行此操作：

```
>> dates = {'01-Jan-2001'; '01-Jan-2001'; '01-Jan-2001'; '02-Jan-2001'};
>> times = {'15:52';'16:03';'17:05';'04:13'};
>> [d idx] = unique(dates);
>> t = times(idx);
>> [d t]
ans = 
    '01-Jan-2001'    '17:05'
    '02-Jan-2001'    '04:13' 
```

此方法获取与每个日期关联的*最后*时间。如果你想抢*第*一次那么你可以使用这个功能：

```
function [d t] = uniqueDates(dates,times)
[d idx] = unique(flipud(dates));
reversed_times = flipud(times);
t = reversed_times(idx); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:35:00.220

使用[datevec () 将字符串转换为向量，然后删除 min 和 sec 信息并使用](http://www.mathworks.com/help/techdoc/ref/datevec.html)[datestr](http://www.mathworks.com/help/techdoc/ref/datestr.html) ()转换回单个字符串，然后使用 unique()

这是一个例子，但我没有测试过：

```
dates = ['2012-05-10'
'2012-05-10'
'2012-05-10'
'2012-05-10'
'2012-05-10'
'2012-05-11'
'2012-05-11']

times = ['19:28:27.000'
'19:28:38.000'
'21:57:31.000'
'21:57:37.000'
'21:57:40.000'
'21:57:43.000'
'21:57:50.000']

%this bit might not work, if not just do it with a for loop. It is constructing a vecotr of spaces.
spaces = zeros(size(times,1), 1);
spaces(:) = " ";

%Concatenate the date and time strings with a space character between them.
DateVectors = datevec([dates, spaces, times]);
%discard min and sec
DateVectors(:, 5:6) = 0;
%convert back to strings
DateStrings = datestr(DateVectors);
%find unique values
unique(DateStrings) 
```

# javascript - 限制视图中的字符数 (Backbone.js)

> ID：11505083
> 
> 赞同：4
> 
> 时间：2012-07-16T13:12:42.277
> 
> 标签：javascript, jquery, css, backbone.js

我有一个backbone.js 视图，它从HTML 文件中读取模板并将其模型中的值插入到模板中。其中一个值在变量`title`中，它的长度足以破坏页面上元素的流动。我想使用 Javascript 来限制最大值。可以拥有的字符数`title`，而不是在后端进行，因为最终`title`必须显示完整的字符。

我尝试选择模板渲染后包含的 div `title`，但似乎无法选择它。否则我该怎么做？

**模板**

```
<script type="text/template" id="tpl_PhotoListItemView">
    <div class="photo_stats_title"><%= title %></div>
</script> 
```

**看法**

```
PhotoListItemView = Backbone.View.extend({
    tagNAme: 'div',
    className: 'photo_box',

    template: _.template( $('#tpl_PhotoListItemView').html() ),

    render: function() {
        $(this.el).html( this.template( this.model.toJSON() ) );
        console.log($(this.el).children('.photo_stats_title')); <!-- returns nothing -->
        this.limitChars();
        return this;
    },

    limitChars: function() {
        var shortTitle = $(this.el).children('.photo_stats_title').html().substring(0, 10);
        $(this.el .photo_stats_title).html(shortTitle);
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:18:33.557

与其在渲染后尝试修改标题，不如在渲染时对其进行修改。

`maxlength`将变量也传递给您的模板，然后：

```
<script type="text/template" id="tpl_PhotoListItemView">
    <div class="photo_stats_title"><%= title.substr(0,maxLength) %></div>
</script> 
```

如果`title.length`小于 maxlength，将显示整个字符串。如果它更大，则仅`maxlength`显示第一个字符。

或者，只需将最大长度硬编码`title`到调用中`.substr()`

如果您需要执行更高级的截断（例如，在截断的标题中添加“...”），最好在渲染模板之前修改标题，将截断的标题版本传递给模板

另一种选择是覆盖`Model.parse(response)`，在模型上创建一个`shortTitle`属性；这样，每当您使用模型时，它始终可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:41:42.437

两件事，第一件事，让任何 View 的孩子我建议你用这种方式而不是你正在做的事情：

```
console.log( this.$('.photo_stats_title') ); 
```

"this.$" 是一个具有特定视图范围的 jQuery 选择器。

第二件事是包装你的模型来处理这个问题，我不建议在你的模板或视图中验证它。在您的模型中为 shortTitle 定义一个新属性：

```
var titleMaxLength = 20;
var YourModel : Backbone.Model.extend({
    defaults : {
        id          : null,
        shortTitle  : null,
        title       : null
    },

    initialize : function(){
        _.bindAll(this);
        this.on('change:name', this.changeHandler);
        this.changeHandler();
    },

    changeHandler : function(){
        var shortTitle = null;

        if( this.title ){
            shortTitle = this.title.substr(0, titleMaxLength);
        }

        this.set({ shortTitle : shortTitle }, {silent: true});
    }

}); 
```

# java - 在 java 中使用 selenium 拍摄不同网页的快照

> ID：11505084
> 
> 赞同：0
> 
> 时间：2012-07-16T13:12:41.773
> 
> 标签：java, selenium-rc, webpage-screenshot

我有一个 URL 列表，我需要拍摄它们的快照。我正在使用 cmd 运行 selenium 服务器并在 eclipse 中运行以下代码。

```
package com.example.tests;

import com.thoughtworks.selenium.DefaultSelenium;
import com.thoughtworks.selenium.Selenium;

public class MainClass {

    void func(String url, String file)
    {
        Selenium selenium = new DefaultSelenium("localhost", 4444, "*firefox", url);
        selenium.start();

        selenium.windowMaximize(); 

        selenium.open("/");
        selenium.waitForPageToLoad("30000");

        System.out.println("laoded\n");
    //  selenium.wait();
        String file1= "C:\\test\\"+file+".png";
        String file2= "C:\\test\\"+file+"2.png";
        selenium.captureScreenshot(file1);
        selenium.captureEntirePageScreenshot(file2, "");

        selenium.stop();

    }

    public static void main(String[] args)
    {

        MainClass demo = new MainClass();

        demo.func("http://www.facebook.com","face"); 

        demo.func("www.reddit.com","reddit"); 

    }
} 
```

它给出了[这个错误](https://imgur.com/sDX75)

我浏览了[这些链接](https://stackoverflow.com/questions/1414934/selenium-could-not-start-selenium-session-failed-to-start-new-browser-session)，但找不到解决方案。请帮我解决这个问题。我是新来的硒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:15:53.620

为什么不这样尝试：

```
WebDriver driver = new FirefoxDriver();
driver.get("http://www.google.com/");
File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
// Now you can do whatever you need to do with it, for example copy somewhere
FileUtils.copyFile(scrFile, new File("c:\\tmp\\screenshot.png")); 
```

或者在此处查看此链接以获得良好的入门教程：http: [//vishnuagrawal.blogspot.com/2011/12/selenium-taking-screenshot-of-webpage.html](http://vishnuagrawal.blogspot.com/2011/12/selenium-taking-screenshot-of-webpage.html)

**参考：**

*   [使用 Selenium WebDriver 截屏](https://stackoverflow.com/questions/3422262/take-a-screenshot-with-selenium-webdriver)

# ajax - 加载初步结果，完成后重新加载（Django 或 ajax）

> ID：11505085
> 
> 赞同：0
> 
> 时间：2012-07-16T13:12:44.993
> 
> 标签：ajax, django

我有一个页面加载时间过长，因为它需要从数据库中获取 50 多个对象。我想只加载前 10 个结果的页面，然后让服务器继续在后台加载其余结果，然后刷新页面。

有没有办法做类似的事情：

```
def foo_view(request):
    values = Foo.objects.all()[:10]
    render_to_response(template, values, context_instance=...)
    values = Foo.objects.all()
    return render_to_response(template, values, context_instance=...) 
```

或者这是 ajax 的工作？（页面加载后立即重新加载数据。）

谢谢！

**编辑：**

事实证明我弄错了加载时间长的原因：实际上从数据库中获取 50-100 个对象几乎不会导致延迟。我的模板中有一个方法导致我的 n 项的 n^3 数据库命中，而我应该在视图函数中调用它一次，并将结果传递给我的模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:48:09.900

AJAX 是您的解决方案。将前 10 个对象添加到您的页面。然后如果用户向下滚动获取另一个 10 等等。喜欢推特。还是使用分页？:)

# android - 用耳机处理“闪避”audioFocusChange

> ID：11505091
> 
> 赞同：2
> 
> 时间：2012-07-16T13:13:04.643
> 
> 标签：android, notifications, media-player

当 Android 收到 SMS 通知时，通知会发送 AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK 焦点更改。我通过将媒体播放器的音量减少 50% 来处理这个问题。

例如

```
 public void onAudioFocusChange(int focusChange) {
      switch (focusChange) {
        // E.g. SMS
        case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK :
          playerDuck(true);
          break;
        case AudioManager.AUDIOFOCUS_GAIN :
        case AudioManager.AUDIOFOCUS_GAIN_TRANSIENT :
          playerDuck(false);
          playerResume();
          break;
      }
  }

  public synchronized void playerDuck(boolean duck) {
    if (mediaPlayer != null) {
      // Reduce the volume by half when ducking - otherwise play at full volume.
      mediaPlayer.setVolume(duck ? 0.5f : 1.0f, duck ? 0.5f : 1.0f);
    }
  } 
```

这在通过设备的扬声器收听媒体播放器时效果很好，但如果您插入耳机，而不是暂时降低音量，媒体播放器会在通知播放时静音。

插入耳机后，我应该如何以不同的方式处理音频焦点的变化？

# android - 如何捕获具有背景的surfaceview的屏幕截图

> ID：11505093
> 
> 赞同：2
> 
> 时间：2012-07-16T13:13:07.007
> 
> 标签：android, android-layout

在我的应用程序中，我想捕获带有surfaceview的屏幕，但我无法捕获使用背景绘制的屏幕。如何保存与背景一起绘制的屏幕。请帮助我如何解决这个问题。

```
 View content  = findViewById(R.id.relative21);
        content.setDrawingCacheEnabled(true);

        SurfaceHolder sfhTrack = drawingSurface.getHolder();
              sfhTrack.setFormat(PixelFormat.TRANSPARENT);

               private void getScreen() {
          // TODO Auto-generated method stub

             View content = findViewById(R.id.relative21);
                Bitmap bitmap = content.getDrawingCache();
            File myDir=new File("/sdcard/saved_images");
                myDir.mkdirs();
                Random generator = new Random();
                int n = 10000;
                n = generator.nextInt(n);
                String fname = "Image-"+ n +".png";
                File file = new File (myDir, fname);
                try 
                {

                    FileOutputStream ostream = new FileOutputStream(file);
                    bitmap.compress(CompressFormat.PNG, 100, ostream);
                    ostream.close();
                } 
                catch (Exception e) 
                {
                    e.printStackTrace();
                }
    } 
```

我尝试了上面的代码，我能够保存背景，但我无法保存绘制的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:34:12.643

```
 public static Bitmap overlay(Bitmap bmp1,Bitmap bmp2) {
        Bitmap bmOverlay = Bitmap.createBitmap(bmp1.getWidth(), bmp1.getHeight(),      bmp1.getConfig());
        Canvas canvas = new Canvas(bmOverlay);
        canvas.drawBitmap(bmp1, 0,0, null);

        canvas.drawBitmap(bmp2, 0, 0, null);
        Log.i("bmOverlay.......",""+bmOverlay);
        bmp3=bmOverlay;
        return bmOverlay;
    }

       private void getScreen() {
        Toast.makeText(BookType1.this, "saved", Toast.LENGTH_SHORT).show();
          File myDir=new File("/sdcard/saved_images");
            myDir.mkdirs();
            Random generator = new Random();
            int n = 10000;
            n = generator.nextInt(n);
            String fname = "Image-"+ n +".png";
            File file = new File (myDir, fname);

        try 
        {

            FileOutputStream ostream = new FileOutputStream(file);
            bmp3.compress(CompressFormat.PNG, 100, ostream);

            ostream.close();
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    } 
```

通过重叠两个位图，我在一个位图中解决了这个问题，我捕获了背景，在第二个位图中我捕获了表面视图，我在这两个位图中都重叠了，我得到了解决方案。

# android - 活动在屏幕旋转时重新启动我的游戏（Android）

> ID：11505094
> 
> 赞同：2
> 
> 时间：2012-07-16T13:13:14.603
> 
> 标签：android, layout, orientation, oncreate

我知道这个问题已经被问过了，但我的有点不同：

我的游戏有 2 个不同的布局文件；一种用于纵向模式，一种用于横向模式。当我旋转屏幕时，onCreate 方法会重新启动我的游戏（再次创建所有元素）。我不希望这种情况发生，所以我在清单中写了这一行：

```
android:configChanges="orientation" 
```

它有效，未调用 onCreate，但未正确显示新布局！

我试图将以下代码放入我的 Activity 中，但它一直在做一些奇怪的事情：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
  super.onConfigurationChanged(newConfig);
  setContentView(R.layout.gameview);
} 
```

我怎样才能解决这个问题？谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:26:48.353

首先了解android中方向变化的工作原理：

1.  默认情况下，活动在方向更改事件上重新启动（并转到 throw `onCreate`）。

2.  如果您`android:configChanges="orientation"`在清单中写入 - 这意味着它不会被重新创建，而只是重新测量和重新绘制视图树。

关于您的代码的评论：

*   如果您对不同的方向有不同的布局 - 您必须在方向改变时重新创建活动。
*   `setContentView`每个活动生命周期应该只调用一次方法。

处理这种情况的一般方法是：

1.  在方法中保存游戏状态`onSaveInstanceState`
2.  `onCreate`如果提供，则在方法中恢复游戏状态（`savedInstanceState`参数不为空）。
3.  从清单中删除对配置更改的侦听。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:29:46.500

对于任何对象，您应该使用 onRetainNonConfigurationInstance() 保存状态和恢复状态 getLastNonConfigurationInstance()。或者在清单中硬编码设置 android:screenOrientation="portrait/landscape"。

# drupal - l - 添加类或 ID 的菜单块

> ID：11505095
> 
> 赞同：0
> 
> 时间：2012-07-16T13:13:19.283
> 
> 标签：drupal, menu, module, drupal-7

我正在使用 d7 版本的菜单块。

[http://drupal.org/project/menu_block/](http://drupal.org/project/menu_block/)

我想给菜单的 ul 一个类，我知道我可以挂钩到 template_preprocess_menu_block_wrapper(&$variables) 但这会将它添加到包装器中。

或者是否可以编写我自己的包装器并让菜单模板选择我的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:07:49.573

使用以下答案之一，[第一个答案](https://drupal.stackexchange.com/a/27303)和[第二个答案](https://drupal.stackexchange.com/a/2270)。

希望这会有所帮助……穆罕默德。

# knockout.js - knockout.js 在选择更改时更新绑定数组项的属性

> ID：11505098
> 
> 赞同：0
> 
> 时间：2012-07-16T13:13:35.727
> 
> 标签：knockout.js

我有一个要绑定到可观察数组的选择。我想为每个绑定到模型项目中可观察布尔值的项目设置选项的标题属性。如果该部分发生更改，我想将可观察数组中每个项目的布尔值设置为 false，然后将 newley 所选项目的布尔值设置为 true。

我的问题是如何解决这个问题： - 是否可以设置选项绑定生成的选项元素的标题属性？- 是否可以使用值绑定设置绑定项目的布尔值而不是单独的属性？

还是我必须为此编写自己的绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:29:55.343

这样的事情怎么样？

```
<select data-bind="foreach: Dog, value: SelectedDogID">
    <option data-bind="text: DogName, value : DogID, attr: {title : DogID == $parent.SelectedDogID()'}" />
</select> 
```

尽管我同意自定义绑定将提供最干净的解决方案。

# perl - Perl：如何将数组转换为嵌套的哈希键

> ID：11505100
> 
> 赞同：4
> 
> 时间：2012-07-16T13:13:38.893
> 
> 标签：perl, perl-data-structures

我需要将一个平面键列表转换为嵌套哈希，如下所示：

> 我的 $hash = {};
> 
> 我的@array = qw(key1 key2 lastKey Value);
> 
> ToNestedHash($hash, @array);

会这样做：

> $hash{'key1'}{'key2'}{'lastKey'} = "值";

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T13:36:07.873

```
sub to_nested_hash {
    my $ref   = \shift;  
    my $h     = $$ref;
    my $value = pop;
    $ref      = \$$ref->{ $_ } foreach @_;
    $$ref     = $value;
    return $h;
} 
```

解释：

*   取第一个值作为 hashref
*   取最后一个值作为要赋值的值
*   其余的是钥匙。
*   然后创建对基本哈希的*SCALAR*引用。
*   反复：
    *   取消引用指针以获取哈希（第一次）或将指针自动激活为哈希
    *   获取密钥的哈希槽
    *   并将标量引用分配给哈希槽。
    *   （下次这将自动激活到指定的哈希）。
*   最后，参考最里面的槽，赋值。

我们知道：

*   哈希或数组的占用者只能是标量或引用。
*   引用是一种标量。( `my $h = {}; my $a = [];`)。
*   因此， \$h->{ $key } 是对堆上标量槽的引用，可能是自动激活的。
*   *如果*我们这样处理嵌套哈希的“级别”，则可以将其自动激活为哈希引用。

这样做可能更明确：

```
foreach my $key ( @_ ) { 
    my $lvl = $$ref = {};
    $ref    = \$lvl->{ $key };
} 
```

但由于重复使用这些参考成语，我完全按原样写了那行，并在发布前对其进行了测试，没有错误。

至于替代方案，以下版本“更容易”（想出）

```
sub to_nested_hash {
    $_[0] //= {};
    my $h     = shift;
    my $value = pop;
    eval '$h'.(join '', map "->{\$_[$i]}", 0..$#_).' = $value';
    return $h;
} 
```

但慢了大约 6-7 倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-01T02:44:28.833

我认为这段代码更好 - 更适合移动到类方法中，并且可以根据提供的参数设置一个值。否则选择的答案很整洁。

```
#!/usr/bin/env perl

use strict;
use warnings;
use YAML;

my $hash = {};

my @array = qw(key1 key2 lastKey);
my $val = [qw/some arbitrary data/];

print Dump to_nested_hash($hash, \@array, $val);
print Dump to_nested_hash($hash, \@array);
sub to_nested_hash {
    my ($hash, $array, $val) = @_;
    my $ref   = \$hash;
    my @path = @$array;
    print "ref: $ref\n";
    my $h     = $$ref;
    $ref      = \$$ref->{ $_ } foreach @path;
    $$ref     = $val if $val;
    return $h;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:07:11.757

谢谢你的好东西！！！

我用递归的方式做到了：

```
sub Hash2Array
{
  my $this = shift;
  my $hash = shift;

  my @array;
  foreach my $k(sort keys %$hash)
  {
    my $v = $hash->{$k};
    push @array,
      ref $v eq "HASH" ? $this->Hash2Array($v, @_, $k) : [ @_, $k, $v ];
  }

  return @array;
} 
```

在所有这些解决方案之间进行性能比较会很有趣......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-10T16:48:52.640

我认为制作了一个更好的斧头版本。至少没有 -> 和 \shift 对我来说更容易理解。3 行没有子程序。

带子程序

```
sub to_nested_hash {
    my $h=shift;
    my($ref,$value)=(\$h,pop);
    $ref=\%{$$ref}{$_} foreach(@_);
    $$ref=$value;
    return $h;
}

my $z={};
to_nested_hash($z,1,2,3,'testing123'); 
```

无子程序

```
my $z={};

my $ref=\$z; #scalar reference of a variable which contains a hash reference
$ref=\%{$$ref}{$_} foreach(1,2,3); #keys
$$ref='testing123'; #value

#with %z hash variable just do double backslash to get the scalar reference
#my $ref=\\%z; 
```

结果：

```
$VAR1 = {
          '1' => {
                   '2' => {
                            '3' => 'testing123'
                          }
                 }
        }; 
```

# matlab - 如何以我想要的方式删除单元格中的空元素

> ID：11505101
> 
> 赞同：2
> 
> 时间：2012-07-16T13:13:39.003
> 
> 标签：matlab, row, cell

在 MATLAB 我有一个像这样的单元格数组

```
a = { 1 2 2 3 4 5 [] []
      2 4 5 4 3 2 4 5 
      4 5 4 3 4 [] [] []} 
```

我想以某种方式删除空元素：

```
a = { 1 2 2 3 4 5 2 4 5 4 3 2 4 5 4 5 4 3 4} 
```

但是当我使用这个时：`a(cellfun(@isempty,a)) = [];` 我得到的是这个：

```
a = {1 2 4 2 4 5 2 5 4 3 4 3 4 3 4 5 2 4 5} 
```

这不是我想要的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:26:58.863

问题是线性索引在行的方向上运行，即它穿过第一列，然后穿过第二列，依此类推。

当您调用`reshape`向量时，您可以看到这一点：

```
>> reshape([1 2 3 4 5 6 7 8 9],3,3)
ans =
     1     4     7
     2     5     8
     3     6     9 
```

为了达到你想要的结果，你需要`a`在索引到它之前进行转置。

```
a = a';
a(cellfun(@isempty,a)) = []; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:16:25.647

你可以试试这个：A(~cellfun('isempty',A))

# java - 使用 for 循环创建多个地图（集合）

> ID：11505102
> 
> 赞同：-3
> 
> 时间：2012-07-16T13:13:41.330
> 
> 标签：java, collections

如何在 java.. 中使用 for 循环（或动态）创建多个地图（集合）？

```
List<Integer> temp = new ArrayList<Integer>();

for(int i=1; i<=10; i++)
{

   Map<Integer, Map> temp.get(i) = new HashMap<Integer, Map>();
} 
```

考虑 temp 的值为“一”、“二”...“十”

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:19:23.943

这将为您创建一个包含 10 个地图的数组：

```
List<Map> temp = new ArrayList<Map>();

for(int i=1; i<=10; i++)
{

   temp.add(new HashMap<Integer, Map>());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:19:32.150

不确定我是否完全理解你。这是你想要的？

```
List<Map<Integer, Map> temp = new ArrayList<Map<Integer, Map>>();

for(int i=1; i<=10; i++)
{
   Map<Integer, Map> map = new HashMap<Integer, Map>();
   temp.add(map);
}

//Get the maps as you please here, from the tmp list 
```

# java - 如何在 JUnit 测试用例中获取传递给 Runtime.getRuntime.exit(value) 的值

> ID：11505109
> 
> 赞同：1
> 
> 时间：2012-07-16T13:14:00.313
> 
> 标签：java, junit, runtime, runtime.exec

我必须编写一个测试用例，`JUnit`让`Class`我们`C1`在内部调用它`Runtime.getRuntime.exit(somevalue)`。

该类`C1`有一个`main`接受一些的方法，然后`arguments`创建一个`CommandLine`然后根据传递`arguments`的特定任务。

现在执行后的所有任务都调用一个`Runtime.getRuntime.exit(somevalue)`. 定义任务是成功执行`somevalue`（意味着某个值为 0）还是有错误（意味着某个值为 1）。

在此的 JUnit 测试用例中，我必须得到它`somevalue`并检查它是否是所需的`somevalue`。

我如何`somevalue`在 JUnit 测试用例中获得。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:33:38.700

您可以覆盖安全管理器以捕获退出代码，如果您使用模拟框架会更简洁：

```
@Test
public void when_main_is_called_exit_code_should_be_1() throws Exception {
    final int[] exitCode = new int[1];
    System.setSecurityManager(new SecurityManager() {
        @Override
        public void checkExit(int status) {
            exitCode[0] = status;
            throw new RuntimeException();
        }});

    try { main(); } catch(Exception e) {}

    assertEquals(exitCode[0], 1);
}

public static void main() {
    System.exit(1);
} 
```

# sql - 从现有数据库中提取创建表语句。

> ID：11505116
> 
> 赞同：0
> 
> 时间：2012-07-16T13:14:26.600
> 
> 标签：sql, derby, javadb

我正在尝试从现有的 derby 模式中提取 create table 语句。我可以通过这个获取所有的列和数据类型。

`select * from SYS.SYSTABLES a inner join sys.SYSCOLUMNS b on a.TABLEID= b.REFERENCEID`

这给了我表名、列名、数据类型、默认值、自动增量等。对于基本的表构建非常有用。它缺少约束和索引。

我可以通过以下方式获得有关约束的一些信息：

`select a.*, b.TABLENAME from SYS.SYSCONSTRAINTS a inner join sys.SYSTABLES b on a.TABLEID = b.TABLEID`

这将为我提供约束名称、它所在的表和类型。我不知道类型字母是什么意思。我也不确定这里有索引信息。

我想要的是与我可以从视图中得到的非常相似的东西。

`select * from sys.SYSVIEWS`

有一个名为 VIEWDEFINITION 的列将为我提供每个视图的创建语句。这对表格非常有用。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:55:37.313

dblook 的完整源代码作为 Derby 源代码的一部分提供。您可以在此处阅读有关 dblook 的信息：http: [//db.apache.org/derby/docs/10.8/tools/ctoolsdblook.html](http://db.apache.org/derby/docs/10.8/tools/ctoolsdblook.html)

# cuda - Cuda，3d 块中的执行线程顺序

> ID：11505117
> 
> 赞同：7
> 
> 时间：2012-07-16T13:14:29.077
> 
> 标签：cuda

作为标题，我想知道正确的执行顺序，以防我们有 3d 块

我想记住我已经读过一些关于它的东西，但那是前一段时间，我不记得在哪里，但它是由一个看起来不那么可靠的人来的..

无论如何，我想对此进行一些确认。

是否如下（按经线划分）？

[0, 0, 0]...[blockDim.x, 0, 0] - [0, 1, 0]...[blockDim.x, 1, 0] - (...) - [0, blockDim .y, 0]...[blockDim.x, blockDim.y, 0] - [0, 0, 1]...[blockDim.x, 0, 1] - (...) - [0, blockDim .y, 1]...[blockDim.x, blockDim.y, 1] - (...) - [blockDim.x, blockDim.y, blockDim.z]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T13:35:27.510

是的，这是正确的顺序；线程按照块内的 x 维度首先变化，然后是 y，然后是 z（相当于列优先顺序）进行排序。计算可以表示为

```
int threadID = threadIdx.x + 
               blockDim.x * threadIdx.y + 
               (blockDim.x * blockDim.y) * threadIdx.z;

int warpID = threadID / warpSize;
int laneID = threadID % warpsize; 
```

这`threadID`是块内的线程号，是块`warpID`内的经线，是经线内`laneID`的线程号。

请注意，线程不一定以与块内此顺序相关的任何可预测顺序执行。执行模型保证*同一个warp*中的线程被“锁步”执行，但是你不能从块内的线程编号推断出更多。

# asp.net - Ajax 工具包 AutoCompleteExtender 和 javascript

> ID：11505118
> 
> 赞同：0
> 
> 时间：2012-07-16T13:14:35.973
> 
> 标签：asp.net, ajax, autocompleteextender

我有一个针对文本框的 Ajaxtool 工具包 AutoComplete 扩展器控件。我正在调用 Web 服务并返回要绑定到 AutoComplete 扩展器的值，并且效果很好。我真的很想知道如何在选择项目时在 javascript 中检索 AutoCompleteextender 控件的项目值。

当一个项目被选中时，我通过调用 OnClientItemSelected 属性中的函数来捕获 javascript 函数中的选定值。

```
<pre>function CallJS(source, eventArgs) {
    alert('something got selected');
    alert(eventArgs.get_value());
} 
```

但我不确定使用哪个 Javascript 属性或对象可以获取 AutoComplete 扩展器控件中的值列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:34:01.427

使用隐藏字段。你可以在 javascript 中存储值并在服务器端获取它。

```
function ItemSelected(sender, EventArgs)
            {
                hid.value = EventArgs.get_value();
            } 
```

# django - 对于带有选项的 django 模型字段，如何有效地获取数据库中使用的选项列表？

> ID：11505120
> 
> 赞同：3
> 
> 时间：2012-07-16T13:14:42.350
> 
> 标签：django

我只是 django query-fu 的棕带。所以也许这里有一些我不知道的新技巧。

这是我的模型：

```
SCHOOL_TYPES = (('elementary', 'Elementary Schools'), ('middle', 'Middle Schools'), ('junior_high', 'Junior High Schools'), ('high_school', 'High Schools'), ('other', "Other"))

class School (BaseSlugModel):
    name=CharField(max_length=100)
    school_type = models.CharField(max_length=20, choices=SCHOOL_TYPES) 
```

出于 UI 目的，我想编写一个函数，该函数`get_active_school_types`返回 SCHOOL_TYPES 元组的子集，其中包含 1 个或多个学校。有没有比蛮力更有效的方法来做到这一点，*得到所有学校然后循环通过它们的*方法？

编辑：这是我的解决方案，基于西蒙的回答：

```
active_types = School.objects.values_list('school_type', flat=True).distinct()
return [ school_type for school_type in SCHOOL_TYPES if school_type[0] in active_types] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:18:00.350

您可以使用[`distinct`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.distinct)QuerySet 的方法：

```
School.objects.order_by('school_type').distinct('school_type') 
```

这将让数据库而不是您的 Python 代码来处理它。请注意，`distinct`仅当您使用 PostgreSQL 时才将字段名称传递给。

您还可以使用[`values_list`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.values_list)：

```
School.objects.values_list('school_type', flat=True).distinct() 
```

这将返回一个值列表。

# java - Camel & spring 忽略 @Produce 和 @EndpointInject

> ID：11505121
> 
> 赞同：0
> 
> 时间：2012-07-16T13:14:45.130
> 
> 标签：java, spring, messaging, apache-camel

我有一个简单的`MessageProducer`类，它使用骆驼将消息发送到直接通道`ProducerTemplate`

这是代码

```
@Component
@Slf4j
public class MessageProducer {

    @EndpointInject(uri = "direct:app.out")
    protected ProducerTemplate template;

    public void sendEvent(Object payload, String eventName) {
        Map<String, Object> headers = new HashMap<String, Object>();
        headers.put("eventName", eventName);

        template.sendBodyAndHeaders(payload, headers);

        log.debug("Sent message {}", payload);
    }

} 
```

当我调试它时，我发现模板在 web 应用程序中运行时为空，但它在 spring Junit 测试中工作。

我不明白出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:29:58.537

是的，spring bean 后处理器需要启动，让 IoC 运行。Camel Test Kit 自动执行此操作，因此它可以通过单元测试工作。

# iphone - 在 scrollViewDidScroll 上的 navigationBar 中更改（更新）self.title

> ID：11505125
> 
> 赞同：0
> 
> 时间：2012-07-16T13:15:03.493
> 
> 标签：iphone, objective-c, ios, ios5, uiscrollview

所以我想做的是编写一个简单的画廊应用程序 - 详细视图的行为非常类似于 Apple 在 developer.apple.com 上的示例代码部分中提供的 PhotoScroller，即它允许用户在所有图片。我想做的是在用户滑动时更新 title 属性，换句话说，如果用户更改了她正在查看的图像， self.title 属性应该将自身更新为该照片的标题。我知道这是可能的，因为 Apple 自己的照片应用程序能够显示当前索引（“1 of x”）。如何才能做到这一点？我真的很感激任何建议，并在此先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:31:22.743

如果您将图像放在滚动视图中，则此方法将为您提供当前所在的页码：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    NSInteger pageNum = (int)(scrollView.contentOffset.x / scrollView.frame.size.width);
    NSLog(@"page no is:%d",pageNum);

    [self updateTitleForIndex: pageNum];
}

- (void)updateTitleForIndex:(NSInteger) pageNum
{
    //set title using your page number
    //also call this method initially for setting title
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:34:40.417

当您滚动`ScrollView`结束滚动后

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView 
```

方法是调用。所以你可以在这个方法中给出标题。首先制作一个包含所有图像标题的数组。然后，如果您的图像宽度为 320，则使用此：-

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
  {
     int index = scrollView.contentOffset.x / 320;
     self.title = [titleArray objectAtIndex:index];
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T13:29:18.233

如果您使用的是分页 UIScrollView，最好的方法是在调用的委托方法中对标题进行操作

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:29:28.293

您应该使用`UIScrollViewDelegate`协议方法，例如`-scrollViewDidScroll:`

# c# - 使用 Automapper 导致堆栈溢出的循环引用

> ID：11505128
> 
> 赞同：17
> 
> 时间：2012-07-16T13:15:05.353
> 
> 标签：c#, circular-reference, csla, automapper-2

我正在使用 Automapper 将我的 NHibernate 代理对象 (DTO) 映射到我的 CSLA 业务对象

我正在使用 Fluent NHibernate 创建映射 - 这工作正常

我遇到的问题是`Order`有一个集合，`OrderLines`其中每个都有对`Order`.

```
public class OrderMapping : ClassMap<OrderDTO>
{
    public OrderMapping()
    {
        // Standard properties
        Id(x => x.OrderId);
        Map(x => x.OrderDate);
        Map(x => x.Address);

        HasMany<OrderLineDTO>(x => x.OrderLines).KeyColumn("OrderId").Inverse();

        Table("`Order`");
    }
}

public class OrderDTO
{
    // Standard properties
    public virtual int OrderId { get; set; }
    public virtual DateTime OrderDate { get; set; }
    public virtual string Address { get; set; }

    // Child collection properties
    public virtual IList<OrderLineDTO> OrderLines { get; set; } <-- this refs the lines
} 
```

和：

```
public class OrderLineMapping : ClassMap<OrderLineDTO>
{
    public OrderLineMapping()
    {
        // Standard properties
        Id(x => x.OrderLineId);
        References<OrderDTO>(x => x.Order).Column("OrderId");
        Map(x => x.Description);
        Map(x => x.Amount);

        Table("`OrderLine`");
    }
}

public class OrderLineDTO
{
    // Standard properties
    public virtual int OrderLineId { get; set; }
    public virtual string Description { get; set; }
    public virtual decimal Amount { get; set; }

    public virtual OrderDTO Order { get; set; } // <-- this refs the order
} 
```

这些 DTO 对象分别映射到`Order`CSLA`OrderLines`对象

当自动映射到`OrderLines`列表时`OrderLinesDTO`被映射。然后自动映射器将`"Order"`属性映射到行上，这些行映射回`Order`然后循环映射回`OrderLine`，然后再映射到`Order`等等

有谁知道 Automapper 是否可以避免这种循环引用？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-16T13:48:51.843

在您的 Automapper 配置中：

```
Mapper.Map<OrderLine, OrderLineDTO>()
    .ForMember(m => m.Order, opt => opt.Ignore());

Mapper.Map<Order, OrderDTO>()
    .AfterMap((src, dest) => { 
         foreach(var i in dest.OrderLines) 
             i.Order = dest;
         }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-07-21T14:56:28.403

我在使用 EF 6 和 AutoMapper 6 时遇到了同样的问题。显然 Kenny Lucero 发布的内容让我找到了解决方案。这是来自 AM 网站的摘录：

```
// Circular references between users and groups
cfg.CreateMap<User, UserDto>().PreserveReferences(); 
```

将 PreserveReferences() 添加到两个模型中使其工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-03T04:23:45.133

我遇到了同样的问题并通过降级到版本 4.2.1 解决了它。显然，循环引用的检查很昂贵，所以他们默认不检查。 [迁移到 AutoMapper 5 - 循环引用](https://stackoverflow.com/questions/40650571/migrating-to-automapper-5-circular-references)

假设这些应该是 v 5+ 的设置方法，但它不适用于我的数据模型，因为我们选择了复杂的 dto 关系而不是每个操作的单一使用 dto。

```
// Self-referential mapping
cfg.CreateMap<Category, CategoryDto>().MaxDepth(3);

// Circular references between users and groups
cfg.CreateMap<User, UserDto>().PreserveReferences(); 
```

[http://docs.automapper.org/en/stable/5.0-Upgrade-Guide.html#circular-references](http://docs.automapper.org/en/stable/5.0-Upgrade-Guide.html#circular-references)

Automapper 应该能够静态确定 v6.1+ 中的循环引用设置，因此如果在 v6.1+ 版本中它不能自动为您工作，请联系 automapper 团队。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-16T21:24:37.927

由于这是排名第一的谷歌搜索结果，我想可能有一些人，比如我，来到这里没有遇到 stackoverflow 异常，但是在将对象（通过 ASP.NET）发送到客户端时遇到了麻烦，并且因此它被 JSON 序列化。

所以我有相同的结构，`Invoice`s 有多个`InvoiceLines`，当我加载`Invoice`并使用 Linq-to-SQL`.Include(x => x.InvoiceLines)`时，当我尝试从 Api 加载对象时出现错误，因为每个都`InvoiceLine`包含相同的内容`Invoice`。

要解决此问题，请在 ASP.NET Core 启动类中执行以下操作：

```
services.AddMvc().AddJsonOptions(o =>
{
    o.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver();
    o.SerializerSettings.NullValueHandling = Newtonsoft.Json.NullValueHandling.Ignore;
    o.SerializerSettings.PreserveReferencesHandling = PreserveReferencesHandling.Objects;
    // ^^ IMPORTANT PART ^^
}).SetCompatibilityVersion(CompatibilityVersion.Version_2_2); 
```

因此`o.SerializerSettings.PreserveReferencesHandling = PreserveReferencesHandling.Objects;`，在您`JsonConfiguration`将 MVC 添加到您的应用程序时包括在内。

> JSON.Net 正在采取额外的步骤来为每个引用设置一个名为“$id”的附加元属性。当 JSON.Net 在对象图中的另一个地方遇到相同的实例时，它只是删除对原始实例的引用，而不是复制数据，因此不会导致循环引用问题！

来源：[https ://johnnycode.com/2012/04/10/serializing-circular-references-with-json-net-and-entity-framework/](https://johnnycode.com/2012/04/10/serializing-circular-references-with-json-net-and-entity-framework/)

所以现在我不必进一步编辑我的`AutoMapper`配置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-05T12:48:42.917

如果有人使用**Mapster**（与 AutoMapper 相同的 C# 映射库）

```
TypeAdapterConfig<TSource, TDestination>
    .NewConfig()
    .PreserveReference(true); 
```

需要用于防止堆栈溢出错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-18T13:18:04.357

不知道我是否应该在这里发布：

在方法中执行 automapper.map 后，我遇到了同样的错误。CularBytes 的回答让我认为这个问题与自动映射器无关，而是与 json 相关。

我做了：

```
Return ok(_service.getDataById(id)); 
```

代替

```
Return ok(await _service.getDataById(id)); 
```

（我忘了等待一个异步调用......我知道的菜鸟错误）

# image - wordpress 图片交错

> ID：11505130
> 
> 赞同：1
> 
> 时间：2012-07-16T13:15:19.640
> 
> 标签：image, wordpress, html

Wordpress 菜鸟警报！在我主页的 HTML 编辑器中，我添加了一个作为页脚的 div。加载在其中的是一排应该坐在一条直线上的徽标图像 - 但是，它们垂直交错显示。左上角的标志（Ocean Basket）位置正确，下一个有太多的填充/边距，下一个甚至更多，然后下一个标志更多等等。我在css中将填充和边距设置为0，将图像向左浮动-我不明白为什么会这样！有什么想法吗？测试站点[http://inexshopfitting.co.za/](http://inexshopfitting.co.za/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:22:33.480

尝试添加`display: block;`到图像并摆脱`<br>`中间。

（例如，通过添加`#home_logostrip_box br{ display:none; }`到您的主题 css 文件中）

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-21T18:25:19.297

我有 5 张图像彼此相邻浮动（每张 20%），它在 HTML 中运行良好，但当网站转换为 Wordpress 时就不行了；漂浮的图像，但它们“阶梯状/交错”。如前所述，每张图片之间都有括号中的“br”元素——由 Wordpress 插入。我通过将 .classname br { display: none } 添加到我的图像的容器类来修复。它工作得很好。

# c - g_strdupv 函数的段错误

> ID：11505136
> 
> 赞同：0
> 
> 时间：2012-07-16T13:15:37.750
> 
> 标签：c, segmentation-fault, valgrind, glib, libmysql

我在这个函数上遇到了段错误。

```
/**
 * Excutes the passed query and returs the the first row as an array of 
 * strings. You must free this array by calling g_strfreev()
 */
static gchar** mysql_single_row(MYSQL *mysql_handle, char* query){
    my_ulonglong num_rows=0;
    MYSQL_RES *result = NULL;
    gchar ** single_row = NULL;
    GString *q = g_string_new(query);
    MYSQL_ROW row={0};
    int query_status = mysql_real_query(mysql_handle, q->str, q->len);

    if(query_status!=0){
        g_string_free(q, TRUE);
        return NULL;
    }
    fprintf(stderr, "Storing mysql result!\n");
    result = mysql_store_result(mysql_handle);

    if(result==NULL){
            /// it was not a query that returns statemnet (e.g. INSERT, DELETE)
            g_string_free(q, TRUE);
            return NULL;
    }

    num_rows = mysql_num_rows(result);

    fprintf(stderr, "Total rows = %Ld\n", num_rows);

    if(num_rows>0){
            /// We only fetch the first row
            row = mysql_fetch_row(result);
            fprintf(stderr, "Copy single rows\n");
            single_row =  g_strdupv(row); // <------------- SIGSEGV happens here
            fprintf(stderr, "Copy single rows done\n");
    }else{
            mysql_free_result(result);
            g_string_free(q, TRUE);
            return NULL;
    }

    /// clean up
    g_string_free(q, TRUE);
    mysql_free_result(result);
    return single_row;
} 
```

基本上我想做的是执行一些'SELECT'查询并将第一行作为字符串数组返回。按照说明书`g_strdupv`应该把退回的复印一份重新`char **`制作。我退回这个。`g_strfreev`后来我用推荐的方法清理了这个。

但是为什么我在这里遇到段错误。我用 valgrind 运行它。输出和相应的代码可以在[这里找到](http://pastie.org/4265727)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:24:15.360

`g_strdupv()`复制一个`NULL`以 C 字符串结尾的数组（每个字符串都必须以 NUL 结尾）。[C API 数据结构](http://dev.mysql.com/doc/refman/5.0/en/c-api-data-structures.html)上的 MySQL 文档指出这`MYSQL_ROW`是一个字节字符串数组，不一定以 NUL 结尾“如果字段值可能包含二进制数据”。因此 a`MYSQL_ROW`既不能保证是 -`NULL`终止的数组，也不能保证是 C 字符串的数组。

段错误很可能发生，因为`g_strdupv()`一直在寻找`NULL`终止符，但直到它尝试读取非进程内存时才找到终止符。

# java - java程序从给定字符串中查找所有字典单词

> ID：11505137
> 
> 赞同：1
> 
> 时间：2012-07-16T13:15:48.347
> 
> 标签：java, string, word

我需要一个 java 程序，它应该从给定的字符串组合中给出所有字典单词。示例：如果给定的字符串是“IOSMNEAB”，它是一个长度为 8 的字符串。我需要 IS、NAME、SOME、SON、MEAN 等单词。

我的解决方案：我对字符串进行了所有排列，并在已经创建的字典数据库中进行了搜索。但它只给出 8 位长度的单词。我需要长度 >=2 和 <=8 的单词。请帮忙 ：-（

```
 import java.sql.DriverManager;
   import java.sql.SQLException;
   import java.util.Random;
   import java.sql.*;
   public final class Combination1 {    

  static String url = "jdbc:mysql://localhost:3306/file";
  static int count;
  static String Vowel = "AEIOU";
  static String Consonant = "BCDFGHJKLMNPQRSTVWXYZ";
  static StringBuffer word;
  static Connection con;
  static ResultSet rs;
  static PreparedStatement preparedStatement;
  static Random randomGenerator = new Random();

   public static final void main(String... aArgs){
  String str="";
  for(int i=0;i<5;i++){
      char a = getRandomConsonant(); 
      str = str+a;}
  for(int i=0;i<3;i++){
      char a = getRandomVowel(); 
      str = str+a;}
    StringBuffer strBuf = new StringBuffer(str);
    count = 0;
    doPerm(strBuf,str.length());

    if(count>=1){
        try
          {
             Class.forName("com.mysql.jdbc.Driver");
             try
             {              
                con = DriverManager.getConnection(url,"root","1234");
                preparedStatement = con.prepareStatement("insert into FILE.WORDS values (?,?)");
                preparedStatement.setString(1, str);
                preparedStatement.setInt(2, count);
                preparedStatement.executeUpdate();
             }

             catch (SQLException ex)
             {
                ex.printStackTrace();
             }
          }
        catch(ClassNotFoundException e)
          {
             System.out.println(e);
          }
    }

      }

      private static char getRandomVowel(){
  int randomInt = randomGenerator.nextInt(4);
  return Vowel.charAt(randomInt);
  }
      private static char getRandomConsonant(){
  int randomInt = randomGenerator.nextInt(20);
  return Consonant.charAt(randomInt);
  }
      private  static void swap(StringBuffer str, int pos1, int pos2){
    char t1 = str.charAt(pos1);
    str.setCharAt(pos1, str.charAt(pos2));
    str.setCharAt(pos2, t1);
} 
    private static void doPerm(StringBuffer str, int index){

    if(index == 0)
    {
     System.out.println(str);
     try
      {  
         String word = str.toString();
         Class.forName("com.mysql.jdbc.Driver");
         try
         {              
            con = DriverManager.getConnection(url,"root","1234");
            preparedStatement = con.prepareStatement("SELECT * FROM DICT WHERE word=?");
            preparedStatement.setString(1, word);
            rs = preparedStatement.executeQuery(); 
            rs = preparedStatement.getResultSet();
            if(rs.next()){
                count++;
            }
         }

         catch (SQLException ex)
         {
            ex.printStackTrace();
         }
      }
    catch(ClassNotFoundException e)
      {
         System.out.println(e);
      }
    }

    else {
        doPerm(str, index-1);
        int currPos = str.length()-index;
        for (int i = currPos+1; i < str.length(); i++) {
            swap(str,currPos, i);
            doPerm(str, index-1);
            swap(str,i, currPos);
        }
    }
}
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:24:57.620

在您现有的代码中，假设它有效地找到了 8 个字符长度的单词，您只需将测试替换为`permuted.equals(dictionaryWord)`：`permuted.contains(dictionaryWord)`如果您置换的单词的一部分等于字典单词，这将返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:18:16.823

您可以采用每个排列并检查子字符串中的单词。您不必总是使用完整的字符串长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:19:29.103

我建议您使用给定字符串的所有可能子集来生成所有可能的单词。

请参阅下面的帖子： [数字列表排列的 Java 代码](https://stackoverflow.com/questions/10503392/java-code-for-permutations-of-a-list-of-numbers)

# c# - 不会产生仇恨的部署计划/方法的最佳解决方案

> ID：11505138
> 
> 赞同：0
> 
> 时间：2012-07-16T13:15:49.863
> 
> 标签：c#, sharepoint, deployment

我们是一个由 3 名开发人员和 1 名应用程序管理员组成的小型团队，他们都在为我们的面向公众的网站安装单一的 SharePoint。

尽管我们确实有用于版本控制的 Perforce，但我们都没有太多的大型 Web 应用程序部署经验。

我们倾向于将实施计划写入 Word 文档，这给我们带来了麻烦。我们的文档将包含运行 STSADM 部署 CMD 文件、根据需要修改 Web.CFG 设置并最终在 GUI 中配置选项的步骤。我们的问题总是归结为环境挂断和一般的沟通问题。

我想就其他人如何解决同样的问题获得一些意见。我们不想要太复杂的东西。我们想要功能比 Word DOC 更好的东西，但不需要 2 周的时间来学会使用。

是否有任何软件或 Web 应用程序可以帮助您规划 Web 应用程序部署？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:21:03.150

使用脚本自动执行此操作。将脚本存储在您的版本控制软件中。运行脚本进行部署。不允许手动更改 - 这样，当您发现错误时必须修复您的脚本，并且您永远不会忘记应用手动修复。我们也不再在组装后手动修补二进制文件......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:23:23.087

我同意达伦的观点，你想从一个脚本开始。如果这不起作用，您将希望在自动化层次结构中朝着更复杂的方向努力。我猜我公司的[uDeploy](http://www.urbancode.com/html/products/deploy/)对你的团队来说太过分了，但是在脚本和企业级部署工具之间，应该有适合的东西。当然，在我们的最后，我们有 .config 文件的模板、简单的文件移动和拖放流程设计器。在低端，您可能会查看[octodeploy](http://octopusdeploy.com)。我还没有机会踢轮胎，但它看起来有光泽、便宜且 .Nety。

不可协商的部分是自动化。如果您走上自动化道路，好事就会发生，您将拥有一个可以构建的平台。如果您开始尝试手动执行此操作，一年后您将面临越来越大的混乱、更多压力的部署以及更多您想要处理的 Word 文档。在极端情况下，我已经看到 Word 被弃用了数以千计的 Excel 电子表格。不好玩。

# android - timer_create()，睡眠期间的过期事件

> ID：11505140
> 
> 赞同：0
> 
> 时间：2012-07-16T13:15:52.030
> 
> 标签：android, timer

我需要澄清一下 timer_create() 的用法。我了解如何使用此功能、设置延迟和分配处理函数等。

我想知道如何使用这个 fn 创建计时器，即使设备（Android 手机）处于低功耗状态（睡眠模式），它也可以生成过期事件。我无法从手册页中找到此信息，也许有人可以指导我正确的方向。我的时钟基准是 CLOCK_REALTIME，所需的延迟是毫秒级的。基于 CLOCK_REALTIME 的定时器即使处于睡眠状态也能唤醒处理器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:14:30.807

尝试 IOCTL RTC 计时器 [http://www.informit.com/articles/article.aspx?p=414983&seqNum=4](http://www.informit.com/articles/article.aspx?p=414983&seqNum=4)

使用 RTC_WKALM_SET

# mercurial - Mercurial Checkout 不移除更改

> ID：11505154
> 
> 赞同：1
> 
> 时间：2012-07-16T13:16:28.797
> 
> 标签：mercurial

我正在尝试使用两个独立的分支。第一个分支更接近部署阶段，而第二个分支是早期开发阶段。由于某种原因，第二个分支不包含第一个分支的一些开发。当我在第二个分支上工作时尝试签出第一个分支时，我收到以下错误：

```
abort: crossed branches (use 'hg merge' to merge or use 'hg update -c' to discard changes) 
```

现在我的问题是我不想摆脱第二个分支或无论如何都要编辑它。我什么时候可以选择，我是否错过了 Mercurial 的一些基本事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:32:26.427

You need to either commit your changes or otherwise save them (e.g. with [`hg shelve`](http://mercurial.selenic.com/wiki/ShelveExtension)) before checking out a new branch.

Mercurial (and most CVSes AFAIK) doesn't save the state of the working directory until you commit the changes, so switching branches effectively discards anything you haven't commited. You can work around this with the `hg shelve` extension, or by having one working copy for each branch you're working on.

# java - 什么时候在 Java 邮件中触发 TransportEvent？

> ID：11505158
> 
> 赞同：0
> 
> 时间：2012-07-16T13:16:50.750
> 
> 标签：java, email, jakarta-mail

我正在尝试使用侦听器获取已发送消息的 Message-Id。我正在
使用代码示例中给出的具体方法实现 javax.mail.event.TransportListener。

它侦听在调用 void javax.mail.Transport.sendMessage(.....) 时生成的 javax.mail.event.TransportEvent。

令我惊讶的是，当我实际发送邮件时，我没有调用任何方法..??? 它什么时候真正被调用？调用 sendMessage(..) 后是否需要添加任何等待时间？

它不是实时发生的吗？

```
@Override
public void messageDelivered(TransportEvent e)
{
    try {
        System.out.println(e.getMessage().getHeader("Message-Id")[0]);
    } catch (MessagingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
}

@Override
public void messageNotDelivered(TransportEvent e) 
{
    try {
        System.out.println(e.getMessage().getHeader("Message-Id")[0]);
    } catch (MessagingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }       
}

@Override
public void messagePartiallyDelivered(TransportEvent e) 
{
    try {
        System.out.println(e.getMessage().getHeader("Message-Id")[0]);
    } catch (MessagingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T20:33:53.607

您是否使用用于发送消息的传输实例注册了您的侦听器？请记住，静态 Transport.send() 方法会创建您自己从未见过的 Transport 实例。

# sqlite - SQLite：如何从另一行中减去一行中的值？

> ID：11505160
> 
> 赞同：2
> 
> 时间：2012-07-16T13:16:54.700
> 
> 标签：sqlite

这是我的示例表：

```
column_example
10
20
25
50 
```

这是我想要的：

```
column_example2
10
5
25 
```

我确定这是一个简单的问题，但我在[SQLite Syntax 网页](http://www.sqlite.org/lang.html/)或通过 Google 没有找到答案。

编辑：澄清一下，代码可能会返回以下输出：20-10 25-20 50-25

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T13:55:18.547

这个解决方案可能很慢，但我必须考虑成功之间的潜在差距`rowid`：

[http://sqlfiddle.com/#!5/daeed/1](http://sqlfiddle.com/#!5/daeed/1)

```
SELECT
  (SELECT x
   FROM t AS t3
   WHERE t3.rowid =
     (SELECT MIN(tt.rowid)
      FROM t AS tt
      WHERE tt.rowid > t.rowid
     )
  )
  - x

FROM t
WHERE diff IS NOT NULL 
```

如果保证 s 之间没有任何间隙`rowid`，那么您可以使用这个更简单的查询：

[http://sqlfiddle.com/#!5/1f906/3](http://sqlfiddle.com/#!5/1f906/3)

```
SELECT t_next.x - t.x
FROM       t
INNER JOIN t AS t_next
        ON t_next.rowid = t.rowid + 1 
```

# c - 困惑：C中的指针和字符数组

> ID：11505165
> 
> 赞同：0
> 
> 时间：2012-07-16T13:17:09.827
> 
> 标签：c, pointers, strtok, character-arrays

我是 C 的新手，并试图拆分一个字符数组（我从 Ardunio 的串行端口接收）。我查阅了一些教程并想出了这个。请帮我调试一下。

```
char action[10];
unsigned long duration;

void split(char input[20])
{
 char *param, *ptr;

 param = strtok_r(input, "#", &ptr);
 action = *param;                      // Need help with this line

 param = strtok_r(NULL, "!", &ptr);
 duration = (unsigned long) *param;    // Need help with this line
} 
```

据我了解，strtok_r 在分隔符（#）之后返回一个指向字符的指针。因此，如果我希望 action[] 成为 input[] 的子集字符数组直到分隔符，我该怎么办？

编辑：输入是这样的：“left#1000！”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:21:56.133

看起来您的第一个令牌是一个字符串，而第二个令牌是一个长字符。您可以使用[`strncpy`](http://en.cppreference.com/w/c/string/byte/strncpy)to 复制`param`into `action`，然后[`strtoul`](http://en.cppreference.com/w/c/string/byte/strtoul)解析`unsigned long`to `duration`。

```
param = strtok_r(input, "#!", &ptr);
strncpy(action, param, sizeof(action));
// Force zero termination
action[sizeof(action)-1] = '\0';

param = strtok_r(NULL, "#!", ptr);
duration = strtoul(param, &param, 10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:25:14.273

您无法初始化`action = *param`.

你需要使用

```
memcpy(action, param, strlen(param)) 
```

和

```
duration = (unsigned long) atoi(param) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T13:28:38.800

您应该使用 strcpy() 和必要的转换来在 C 中分配字符串（或字符数组）。

访问[http://en.cppreference.com/w/c/string/byte/strcpy](http://en.cppreference.com/w/c/string/byte/strcpy)

此函数将处理字符串之间的成员分配。要手动执行此操作，您必须使用循环并分别分配每个数组成员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T13:53:23.040

这个片段应该在纯 C 中工作（添加了评论）。您可以使用 C`struct`来收集值。`Struct`s 可以从简单数据类型之类的函数返回（如图所示）。您可以将其用作您自己的程序的开始。

**编辑：**此类程序不需要这些`strXYZ(..)`功能（如果您的传入数据中可能有`'\0'`-bytes 则很有用）。

```
...

#include <stdlib.h>
#include <stdio.h>
#include <string.h>

 typedef struct {
    char action[10];  unsigned long duration;
 } Result;

 Result split(char *input, char delim)
{
 Result result = {'\0', 0};                   // initialize result by zeros
 char *p = (char*)memchr(input, delim, sizeof(result.action)-1); 
 if(p != NULL) {                              // if delimiter found in input 
    memcpy(result.action, input, p-input);    // copy text till delimiter
    result.duration = strtoul(p+1, NULL, 10); // convert number after delimiter
 }
 return result;                               // return values
}

 int main(char argc, const char*argv[])
{
 char input[20] = "left#1000!";

 Result result = split(input, '#');
 printf("action: %s, duration %u\n", result.action, result.duration);

 return 0;
}

... 
```

问候

rbo

# iphone - RestKit - 将参数附加到所有请求

> ID：11505172
> 
> 赞同：2
> 
> 时间：2012-07-16T13:17:40.620
> 
> 标签：iphone, objective-c, restkit

我有一个使用 RestKit 的 iOS 应用程序，以便与 RESTful Rails 服务器进行通信。服务器使用基本会话令牌对用户进行身份验证。我想将此令牌附加到使用 RKObjectManager 的方法发送的每个请求中。

我尝试创建 NSManagedObject 的 Category 重载，以便使用以下方法：

```
- (void)willSendWithObjectLoader:(RKObjectLoader *)objectLoader 
```

这很好用，但是我看不到附加到对象加载器的参数的方法。我什至已经对对象进行了重新序列化，但是如果不使用转义字符发送它，就无法做到这一点。例如，下面的代码会给我 JSON 序列化形式的对象

```
RKObjectMapping *serializationMapping = [[[RKObjectManager sharedManager] mappingProvider] serializationMappingForClass:[self class]];
RKObjectSerializer *ser = [RKObjectSerializer serializerWithObject:self mapping:serializationMapping];
NSObject<RKRequestSerializable> *obj = [ser serializationForMIMEType:RKMIMETypeJSON error:nil]; 
```

但是那里返回的对象打算立即用作参数，因此以下代码不起作用

```
[params setValue:[LCSingletonLoggedInUser sharedLoggedInUser].sessionToken forParam:@"token"];
[params setData:obj.HTTPBody forParam:@"data"]; 
```

我还尝试了 setObject 和 setData 和 obj.HTTPBody 以及 obj 的各种组合。

实际上以任何方式将 obj 附加到 params 总是会导致它添加服务器无法处理的转义字符。设置 params = obj 将为服务器提供正确的值，但不会包含令牌。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:21:58.963

将它添加到 queryParams 怎么样？

```
NSString *resourcePath = [@"/products" stringByAppendingQueryParameters:_queryParams]; 
```

其中 queryParams 是一个 NSMutableDictionary，您可以在其中添加您的令牌。

# c - 调试自执行程序的 GDB MI 机制

> ID：11505173
> 
> 赞同：0
> 
> 时间：2012-07-16T13:17:43.007
> 
> 标签：c, gdb, gdbserver

我最近下载了 MI 库并执行/阅读了一些示例代码。在我看到的所有示例中，实现都是通过一个单独的程序，如下所示：

```
Main Program
Interact with GDB
exec another program
Gather  Debug info of the another program 
```

我的问题是我们如何在当前线程/程序本身中调用/实现 GDB，即附加这个自执行过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T01:16:56.023

> 我们如何在当前线程/程序本身中调用/实现 GDB MI，即将此自执行/运行进程附加到 GDB，然后告诉它逐步执行

你不能。

想一想：GDB 在附加后要做的第一件事就是*停止*你的程序，然后等待下一步做什么的指示。此时你的程序应该向 GDB 发送`continue`命令，但它*不能*因为它已经*停止*。

现在，*如果*您的程序是多线程的，*并且*您要求 GDB 以不间断模式执行，*并且*您仔细安排事情以使执行 GDB 交互的线程本身永远不会停止，那么*也许*这可以工作。我怀疑它会可靠地工作。

# asp.net-mvc-3 - 数据未从视图传递到控制器

> ID：11505176
> 
> 赞同：1
> 
> 时间：2012-07-16T13:17:50.740
> 
> 标签：asp.net-mvc-3

我是 MVC 的新手。我无法将数据从视图传递到控制器。

此应用程序用于订购衬衫。我有不同的类型，如 T 恤、休闲衬衫和正式衬衫。在一个订单中，我想订购 2 件 T 恤、3 件休闲衬衫和 5 件正式衬衫。我能够以一个顺序编辑单个值，即它们中的任何一个。我面临的问题是在一个订单中订购多种类型的衬衫。

```
public class Shirt    
{
   //[Key]
   public int ShirtId{ get; set; }
   public string ShirtName{ get; set; } // This is an read-only field    
}

public class Order
{
    public int ShirtId { get; set; }
    public virtual Shirt Shirt { get; set; } // a reference to Shirt
    public int Quantity { get; set; } 
    public int OrderId { get; set; }
} 
```

我有一个用我的视图模型“订单”强类型的视图。最初我将数据从我的控制器传递到视图使用

```
 [HttpGet]
    public ActionResult Index()
    {
       OrdersList();
       return View(db.Order.ToList());
    } 
```

这里的 OrdersList 是一个与数据库交互并获取 Orders 列表的函数

```
 void OrdersList()
   {
     ViewBag.OrdersLsit= from f in db.Shirt
                            orderby f.ShirtName
                            select f;
   } 
```

我正在使用将数据返回给控制器，

```
 [HttpPost]
    public ActionResult Index(List<Order> order)
    {
        Order newOrder = new Order();
        for (int i = 0; i < order.Count; i++)
        {
            newOrder.Quantity = order.ElementAt(i).Quantity;
            if (ModelState.IsValid)
            {
                db.Entry(newOrder).State = EntityState.Modified;

                db.SaveChanges();
            }
        }
    } 
```

我的问题是列表顺序作为空值传递。如果我
在 HttpPost 中执行 public ActionResult Index(Order order)，我只会得到第一项（在这种情况下，T 恤正在数据库中更新）。

在 Index.cshtml 中，我正在做这样的事情

```
 <legend>Order Shirts</legend>
         <table>
            <tr>
                @{List<Order> orderList = new List<Order>(); }
                @foreach (Order ord in ViewBag.OrderList)
                {
                    <td>
                    @Html.DisplayFor(model => ord.Shirt.Shirtname)
                    </td>
                    orderList.Add(ord);
                }
            </tr>

            <tr>
                @for (int i = 0; i < orderList.Count; i++)
                {
                    <td class = "editorClass">
                            @Html.HiddenFor(model => orderList.ElementAt(i).Shirt.ShirtId)
                            @Html.HiddenFor(model => orderList.ElementAt(i).OrderId)
                            @Html.ValidationSummary(true)
 @Html.HiddenFor(model => orderList.ElementAt(i).ShirtId)                                
                            @Html.EditorFor(model => orderList.ElementAt(i).Quantity)
                            @Html.ValidationMessageFor(model => orderList.ElementAt(i).Quantity)
                    </td>
                }
            </tr>
        </table>
    </fieldset>
   <p>
       <input id = "btnSubmit" type="submit" value="Save Order" /> 
    </p>
    <div>
        @Html.ActionLink("Back to List", "Index")
    </div> 
```

我是 MVC 新手，这是我的第一个应用程序。任何建设性的意见和建议表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:09:52.753

我不明白你为什么要创建`orderList`视图，实际上你必须从控制器传递它并将视图强输入到`List<Order>`.

而不是使用这个，

```
@Html.EditorFor(model => orderList.ElementAt(i).Quantity) 
```

您可以尝试（如果您强烈键入视图`List<Order>`），

```
@Html.EditorFor(m => m[i].Quantity) 
```

如果视图不是强类型的，`List<Order>`你可以试试这个，

```
@Html.EditorFor(m => orderList[i].Quantity) 
```

但在这种情况下，您必须按以下方式更改操作，

```
[HttpPost]
public ActionResult Index([Bind(Prefix="orderList")]List<Order> order)
{
} 
```

The reason is I'm not sure whether the `ElementAt(i)` generate the names properly for fields, so try index approach!

# c# - 如何响应重定向到选项卡容器中的面板或控件

> ID：11505184
> 
> 赞同：0
> 
> 时间：2012-07-16T13:18:13.860
> 
> 标签：c#, asp.net, tabs, panel, response.redirect

我正在处理一个选项卡式页面（4 个选项卡 - 选项卡容器），其中 2 个使用相同的控件并具有不同的 gridview 和不同的数据源，可以编辑和添加项目。

编辑和添加项目工作正常，但是当我添加项目时，gridview 或页面需要刷新以显示新项目。使用 Response.Redirect 只会刷新页面并重定向到第一个选项卡。我正在处理选项卡 2 和 3，并且重定向需要指向相关选项卡，而不总是指向第一个选项卡。

关于如何做到这一点的任何建议？

我正在使用 Visual Studio 2010、C# ASP.Net

代码：

页：

```
<asp:Content ID="Content2" ContentPlaceHolderID="pnlMainContent" runat="server">
<div style="padding: 10px">
    <cc1:TabContainer ID="tbMain" runat="server" ActiveTabIndex="0" Width="100%" AutoPostBack="true"
        OnActiveTabChanged="tbMain_ActiveTabChanged">
        <cc1:TabPanel runat="server" ID="tbpgWFTypes" HeaderText="Work Flow Types">
            <ContentTemplate>
                <table style="width: 100%">
                    <tr>
                        <td align="center">
                             <uc1:ctrlWorkflowTypeControl ID="ctrlWorkflowTypeControl" runat="server" />
                        </td>
                    </tr>
                </table>
            </ContentTemplate>
        </cc1:TabPanel>
        <cc1:TabPanel runat="server" ID="tbpgWFStatus" HeaderText="Work Flow Status">
            <ContentTemplate>
                <table style="width: 100%">
                    <tr>
                        <td align="center">
                            <uc2:ctrlStatusControl ID="ctrlStatusControl" runat="server" />
                        </td>
                    </tr>
                </table>
            </ContentTemplate>
        </cc1:TabPanel>
        <cc1:TabPanel runat="server" ID="tbpgWFActions" HeaderText="Work Flow Actions">
            <ContentTemplate>
                <table style="width: 100%">
                    <tr>
                        <td align="center">
                            <uc3:ctrlActionControl ID="ctrlActionControl" runat="server" />                                
                        </td>
                    </tr>
                </table>
            </ContentTemplate>
        </cc1:TabPanel>
        <cc1:TabPanel runat="server" ID="tbpgWFRouting" HeaderText="Work Flow Routing">
            <ContentTemplate>
                <table style="width: 100%">
                    <tr>
                        <td align="center">
                           <uc4:ctrlWorkflowRoutingControl ID="ctrlWorkflowRoutingControl" runat="server" />
                        </td>
                    </tr>
                </table>
            </ContentTemplate>
        </cc1:TabPanel>
    </cc1:TabContainer>
</div> 
```

代码背后：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        tbpgWFTypes.Focus();
        if (!IsPostBack)
        {
            tbMain_ActiveTabChanged(tbMain, null);                                       
        }           
}

protected void tbMain_ActiveTabChanged(object sender, EventArgs e)
{
    try
    {
        if (tbMain.ActiveTabIndex == 1)
        {
            ctrlActionControl.ActionPanelMode = true;
            ctrlStatusControl.StatusPanelMode = false;
        }

        if (tbMain.ActiveTabIndex == 2)
        {
            ctrlStatusControl.StatusPanelMode = true;
            ctrlActionControl.ActionPanelMode = false;
        }                
    }
    catch (Exception ex)
    {
        Support.ExceptionHandler.HandleException(ex);
    }
  }
} 
```

控制：

```
 <table>
    <tr>
        <td align="left" colspan="2">
            <asp:DropDownList ID="ddlWFStatus" runat="server" Width="400px" DataSourceID="dsStatus" DataTextField="Description" Visible="false"></asp:DropDownList>
            <asp:DropDownList ID="ddlWFAction" runat="server" Width="400px" DataSourceID="dsAction" DataTextField="Description" Visible="false"></asp:DropDownList>
        </td>
    </tr>
    <tr>
        <td  colspan="2"></td>
    </tr>
    <tr>
        <td align="left"  colspan="2">
        <asp:Panel ID="pnlStatus" runat="server" Visible="false">
            <asp:GridView ID="gvStatus" runat="server" DataSourceID="dsStatus"
                AutoGenerateColumns="False" CellPadding="4" DataKeyNames="WFStatusID"
             ForeColor="#333333" EnableSortingAndPagingCallbacks="True" AllowPaging="True" 
                AllowSorting="True" onselectedindexchanged="gvStatus_SelectedIndexChanged">
               <Columns>
                <asp:BoundField DataField="WFStatusID" HeaderText="WFStatusID" SortExpression="WFStatusID" Visible="false">
                    <ItemStyle HorizontalAlign="Left" Width="400px" /> 
                </asp:BoundField>
                <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description">
                    <ItemStyle HorizontalAlign="Left" Width="400px" /> 
                </asp:BoundField>
               <asp:CommandField  ButtonType="Button" EditText="Edit" ShowEditButton="true" />
               </Columns>
              <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                <EditRowStyle BackColor="#999999" />
                <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
            </asp:GridView>
            </asp:Panel>
             <asp:Panel ID="pnlAction" runat="server" Visible="false">
            <asp:GridView ID="gvAction" runat="server" DataSourceID="dsAction"
                AutoGenerateColumns="False" CellPadding="4" DataKeyNames="WFActionID"
             ForeColor="#333333" EnableSortingAndPagingCallbacks="True" AllowPaging="True" 
                AllowSorting="True" onselectedindexchanged="gvAction_SelectedIndexChanged">
               <Columns>
                <asp:BoundField DataField="WFActionID" HeaderText="WFActionID" SortExpression="WFActionID" Visible="false">
                    <ItemStyle HorizontalAlign="Left" Width="400px" /> 
                </asp:BoundField>
                <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description">
                    <ItemStyle HorizontalAlign="Left" Width="400px" /> 
                </asp:BoundField>
               <asp:CommandField  ButtonType="Button" EditText="Edit" ShowEditButton="true" />
               </Columns>
              <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                <EditRowStyle BackColor="#999999" />
                <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
            </asp:GridView>
            </asp:Panel>
        </td>
    </tr>
    <tr>
        <td align="left"  colspan="2">
            <asp:Button ID="btnShowAddSection" runat="server" Text="" onclick="btnShowAddSection_Click"/>
        </td>
    </tr>
    <tr id="divAddEditRow" runat="server" visible="false">       
        <td><asp:Label ID="lblAdd" runat="server" Text="New Item: " />  
            <asp:TextBox ID="txtEdit" runat="server" ></asp:TextBox>
        </td>
        <td>
            <asp:Button ID="btnAdd" runat="server" Text="Add" onclick="btnAdd_Click" style="float: right; padding-right:5px; margin-right:8px"/>
        </td>
    </tr>    
</table>

<asp:ObjectDataSource ID="dsStatus" runat="server" SelectMethod="FillWFStatus" UpdateMethod="UpdateWFStatus"
 TypeName="***.**.Services.WorkflowDataService" onupdating="dsStatus_Updating">
 <UpdateParameters>
    <asp:Parameter Type="Int32" Name="WFStatusID" />
    <asp:Parameter Type="String" Name="Description" />
 </UpdateParameters>
</asp:ObjectDataSource>

 <asp:ObjectDataSource ID="dsAction" runat="server" SelectMethod="FillWFAction" UpdateMethod="UpdateWFAction"
 TypeName="***.**.Services.WorkflowDataService" onupdating="dsAction_Updating">
 <UpdateParameters>
    <asp:Parameter Type="Int32" Name="WFActionID" />
    <asp:Parameter Type="String" Name="Description" />
 </UpdateParameters>
</asp:ObjectDataSource> 
```

控制代码后面：

```
protected void Page_Load(object sender, EventArgs e)
    {  
    }

protected void gvStatus_SelectedIndexChanged(object sender, EventArgs e)
{
    WorkflowDataService.InsertWFStatus(0, txtEdit.Text);
}

protected void gvAction_SelectedIndexChanged(object sender, EventArgs e)
{
    WorkflowDataService.InsertWFAction(0, txtEdit.Text);
}

public bool StatusPanelMode
{
    set { pnlStatus.Visible = !value;
    btnShowAddSection.Text = "Add New Status";
    ddlWFStatus.Visible = !value;
    }           
}

public bool ActionPanelMode
{
    set
    {
        pnlAction.Visible = !value;
        btnShowAddSection.Text = "Add New Action";
        ddlWFAction.Visible = !value;
    }
}

protected void btnShowAddSection_Click(object sender, EventArgs e)
{
    this.divAddEditRow.Visible = true;
    btnShowAddSection.Visible = false;
}

protected void dsStatus_Updating(object sender, ObjectDataSourceMethodEventArgs e)
{
    var test = gvStatus.SelectedIndex;
    var test2 = dsStatus.UpdateParameters[0];
}

protected void dsAction_Updating(object sender, ObjectDataSourceMethodEventArgs e)
{
    var test = gvStatus.SelectedIndex;
    var test2 = dsAction.UpdateParameters[0];
}

protected void btnAdd_Click(object sender, EventArgs e)
{
    this.divAddEditRow.Visible = false;
    btnShowAddSection.Visible = true;

    if (pnlStatus.Visible == true)
    {
        WorkflowDataService.InsertWFStatus(0, txtEdit.Text);
        //Response.Redirect("ManageRoutingPage.aspx?tab=2");   <--- This Doesnt Work                
    }
    if (pnlAction.Visible == true)
    {
        WorkflowDataService.InsertWFAction( 0, txtEdit.Text);
        Response.Redirect("ManageRoutingPage.aspx");  // <-- This goes back to tab 1 instead of 3
    }
  }            
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:23:43.813

您可以为此目的使用查询字符串，如下所示

```
Response.Redirect("default.aspx?tab=1");
Response.Redirect("default.aspx?tab=2");
Response.Redirect("default.aspx?tab=3"); 
```

并在default.aspx 页面中。你可以做类似的事情

```
var tab = Request.QueryString["tab"];
switch(tab)
{
case "1":
//Bind data for first tab
break;
case "2":
//Bind data for second tab
break;
} 
```

希望能帮助到你 ：）

# iphone - 如何隐藏 iPhone 应用程序二进制文件的符号？

> ID：11505194
> 
> 赞同：0
> 
> 时间：2012-07-16T13:18:40.307
> 
> 标签：iphone, objective-c, xcode

我通过运行“字符串”检查了从 App Store 下载的几个 IPA。它们都没有显示出有意义的符号。

但是我在发布模式下构建的二进制文件显示了字符串输出中的所有符号名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:32:17.503

In your Project Build Settings, set *Strip Debug Symbols During Copy* to `YES` for *Release*. That's the default.

If that doesn't work, try toggling these build settings:

*   Symbols Hidden by Default
*   Strip Linked Product

# java - 通过@RequestBody 加载的实体不会在“saveOrUpdate”上保留其一对多关系中的项目删除

> ID：11505196
> 
> 赞同：2
> 
> 时间：2012-07-16T13:18:46.817
> 
> 标签：java, spring, hibernate

考虑两个实体：

```
@Entity
public class A implements Serializable {
    ...

    @OneToMany(mappedBy = "a", orphanRemoval = true)
    @Cascade(CascadeType.ALL)
    @JsonManagedReference
    private List<B> bs = new ArrayList<B>();

    ...
}

@Entity
public class B implements Serializable {
    ...

    @ManyToOne
    @JsonBackReference
    private A a;
    ...
} 
```

我正在接收 A 的 JSON 表示并通过我的一个 Spring 控制器中的 @RequestBody 加载它（在这种情况下，这是一个已经具有标识符的现有实体；以下问题*不适*用于新实体）。

如您所料，调用 session.saveOrUpdate 不会**自动**神奇地删除任何不在反序列化 A.bs 集合中的 B（从数据库中）。对集合的添加**确实**有效，集合中各个实体的更新也是如此。

删除这些对象的正确方法是什么？请求是否必须采用不同的结构才能使其起作用？（使用 Spring 3.1.1 / Hibernate 4.0.1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:23:20.867

编辑：

尝试将 CascadeType.DELETE_ORPHAN 添加到级联注释

```
@OneToMany(mappedBy = "a", orphanRemoval = true)
@Cascade(cascade = {CascadeType.ALL, CascadeType.DELETE_ORPHAN}, mappedBy = "a")
private List<B> bs = new ArrayList<B>(); 
```

[资源](https://stackoverflow.com/questions/549961/hibernate-removing-item-from-a-list-does-not-persist)

# linux - linux分页的最大进程数

> ID：11505198
> 
> 赞同：0
> 
> 时间：2012-07-16T13:18:54.360
> 
> 标签：linux, paging

我听说linux中的最大进程（任务）数是用

“线程数=总虚拟内存/（堆栈大小*1024*1024）”

但是，我很好奇，因为页表无法分页

每个进程都需要它自己的页表（包括页目录）

我认为这可能是限制操作系统中进程数量的一个因素。

我是对还是错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T08:17:23.610

根据[IA-64 Linux Kernel: Design and Implementation, 第 4.3 章 Page Tables](http://www.informit.com/articles/article.aspx?p=29961&seqNum=3)，您是正确的。

# android - CSS3 KeyFrame 翻译动画 - Android 中的严重跳帧

> ID：11505201
> 
> 赞同：0
> 
> 时间：2012-07-16T13:18:58.390
> 
> 标签：android, html, css, jquery-mobile, css-animations

一个简单的翻译动画（在一个小矩形上）在 Android 2.2 浏览器上跳帧，这非常令人惊讶。它甚至不是每秒 10 帧。手机是三星 Galaxy Ace (S5830)。图像上没有其他动画。下面附上代码。我是不是做错了什么，因为我没想到这么简单的翻译动画会这么糟糕。请建议任何解决方法以获得一些可接受的平滑度

```
<html>
  <head>
    <style type="text/css">

    #di1, #ci1 {position: absolute;left:0px;top:0px;-webkit-transform-origin: 0% 0%;}

.anim1{
    -webkit-animation-duration: 5s;
    -webkit-animation-name: animation1;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count:1 ;

}

@-webkit-keyframes animation1
{
    0%{ -webkit-transform: translate(25px, 25px) }
    50%{ -webkit-transform: translate(200px, 00px) }
    100%{ -webkit-transform: translate(0px, 200px) }
}

</style>

<script type="text/javascript">

    window.addEventListener("load",win_load,false);

    function win_load()        
    {
        var c=document.getElementById("ci1");var ctx=c.getContext("2d");
        ctx.fillStyle="#ff0000";
        ctx.fillRect(25,25,30,30);

    }

</script> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-17T08:09:31.133

这是 hacky 解决方法。

在转换规则中添加

```
rotateZ(0deg); 
```

使它变成

```
-webkit-transform:rotateZ(0deg) translate(30,40); 
```

这迫使 webkit 在可用的情况下使用硬件加速，并按位提高性能。

虽然没有保证这个工作。

并且动画在 android 3.x 之后变得更加流畅，试试看。

# ruby-on-rails - 验证失败后保留表单字段，“渲染”不起作用

> ID：11505202
> 
> 赞同：2
> 
> 时间：2012-07-16T13:19:01.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我是 Rails 新手，正在尝试修改由另一个团队编写的应用程序。我有一个常见问题是验证失败后需要保留表单字段。在我们的应用程序中，用户提交姓名、电子邮件和邀请码等基本信息。我在控制器中验证邀请码。如果失败，它当前会执行一个`redirect_to :back`但会丢失用户填写的信息并清除表单。从我研究过的其他页面来看，似乎正确的做法是`render :action => :new`. 但是，当我尝试时，我得到了错误。

这次尝试...

```
format.html { render :action => "new" } 
```

都给出相同的结果...

> 模板丢失
> 
> 缺少模板 after_step/new, application/new with...

以前的开发者设置的方式，表单的第1步是在“users/registrations/new”，但是下面的步骤是在“after_step/step_two”等。所以，表单提交时，它是在“after_step_controller” .rb" 我正在做我的验证。显然，我看到它正在尝试在该控制器上呈现“新”操作而不是“registrations_controller.rb”。

然而，当我试图强迫它...

```
format.html { render :template => "registrations_controller/new" }        
format.html { render :action => "new", :controller => "registrations" } 
```

...我仍然收到缺少模板的错误。因此，我尝试了我在网上找到的其他建议......

```
format.html { render :template => "users/registrations/new" }
format.html { render :file => "users/registrations/new.html.erb" } 
```

这些也不起作用，因为他们给出了这个错误：

> NilClass:Class 的未定义方法“model_name”

然后我对此进行了研究，大多数人说“新”功能并没有创建新用户。但是，代码在那里，所以我不确定发生了什么。

谁能指出我正确的方向？这显然不是一个阻碍，但为了更好的用户体验，我希望表单字段在验证失败时保留其值。

这里有一些信息...

**用户/注册/new.html.erb**

```
<%= form_for(@user, :url => step_two_path) do |f| %>
        <div class="signup_step_mid_content">
          <div class="step_content_block">
            <h3> First, tell us a little bit about yourself:</h3>
            <div class="signup_filed_small mrgn_r_20">
              <label>First Name</label>
              <%= f.text_field :first_name, :title => "First Name", :placeholder => "First Name" %>
            </div> 
```

**注册控制器.rb**

```
def new
    @user = User.new
    @invite_code = params[:invite_code]
end 
```

**after_step_controller.rb**

```
def step_two
    @user = User.find_by_email(params[:user][:email])
    respond_to do |format|

      @tester = Prefinery::Tester.new(:beta_id => 1234) 
      @tester.email = params[:user][:email]
      @tester.invitation_code = params[:user][:invitation_code]
      @tester.status = 'active' 

      if !@tester.save 
        #format.html{redirect_to :back }

        #format.html { render :template => "registrations_controller/new" }        
        #format.html { render :action => "new", :controller => "registrations" }
        #format.html { render :action => "new" }

        #format.html { render :template => "users/registrations/new" }
        #format.html { render :file => "users/registrations/new.html.erb" } 
```

让我知道是否需要任何进一步的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T14:32:28.087

这一步你是对的：

```
format.html { render :template => "users/registrations/new" } 
```

问题是你没有在“after_step_controller”中为@user设置一个实例，如果你想进行渲染，你应该为@user设置一个实例，它应该包含在表单，因此您可以显示验证错误。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T14:39:40.457

嗯。这里有几个建议：

```
format.html { render :template => "users/registrations/new" } 
```

要不就

```
format.html { render "users/registrations/new" } 
```

似乎要走的路。不过，我会考虑清理一切并将所有内容移到一个特定的控制器中以用于该过程。

*   您需要像这样初始化@user 实例变量

    @user = User.new(params[:user])

（可能）使得下一个表单中的用户保留表单发送的参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-21T17:27:21.330

```
render :new 
```

会为你做这项工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T14:29:02.460

我想，你得到了

```
undefined method `model_name' for NilClass:Class 
```

例外，因为`new`模板使用变量`@user`但`step_two`方法没有定义它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-12T00:19:45.227

我发现在模型验证失败后，文本框和单选按钮被保留，正如预期的那样。但是，选择框有问题，直到我插入 selected: 子句，如

```
<div class="row">
  <div class="col">
    <legend>Area of Expertise</legend>
    <%= form.select :srvy_area_of_expertise,
       options_for_select(ThemConstants::AREAS_OF_EXPERTISE,
          **selected: @survey.srvy_area_of_expertise**),
      id: :survey_srvy_area_of_expertise,
      include_blank: true,
      prompt: "Choose one",
      class: "form-control"%>
    <%= text_field_tag :other_area_of_expertise, @survey.srvy_area_of_expertise, class: 'form-control',
      placeholder: "If 'Other' type area of expertise here" %>_
  </div> 
```

# c# - ORA-06550：第 1 行，第 7 列：PLS-00306：参数数量或类型错误

> ID：11505204
> 
> 赞同：6
> 
> 时间：2012-07-16T13:19:11.070
> 
> 标签：c#, oracle, odp.net

我在 Oracle 11g 服务器上调用存储过程时遇到问题。

**存储过程**

```
PROCEDURE get_rit_by_user_id(KDC_KEY      IN VARCHAR2,
                             p_id_utente IN NUMBER,
                             p_cur_out   OUT type_cursor) IS
  BEGIN
    ...
    ...
    ...
  END 
```

**c# 代码**

```
OracleCommand cmd = new OracleCommand();
cmd.Connection = oracleConnection;
cmd.CommandText = userIdEsercizio + packageName + "GET_RIT_BY_USER_ID";
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.Add("KDC_KEY", OracleDbType.Varchar2, kdcKey, ParameterDirection.Input);
cmd.Parameters.Add("P_ID_UTENTE", OracleDbType.Int32, user_id, ParameterDirection.Input);
cmd.Parameters.Add("P_CUR_OUT", OracleDbType.RefCursor, ParameterDirection.Output);

OracleDataReader reader = cmd.ExecuteReader(); 
```

`cmd.ExecuteReader()`抛出此异常：

> ORA-06550：第 1 行，第 7 列：PLS-00306：调用“GET_RIT_BY_USER_ID”时参数的数量或类型错误 ORA-06550：第 1 行，第 7 列：PL/SQL：语句被忽略

上面的代码有什么问题导致`wrong number of types of arguments`错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T13:30:29.013

您的第二个参数是 a `NUMBER`，而不是整数。将第二个参数类型更改为`OracleDbType.Decimal`

[http://docs.oracle.com/cd/B19306_01/win.102/b14307/OracleDbTypeEnumerationType.htm](http://docs.oracle.com/cd/B19306_01/win.102/b14307/OracleDbTypeEnumerationType.htm)

还要检查`Add`方法的语法。现在最好更明确地指定参数属性，即使它使代码更加冗长：

```
cmd.Parameters.Add(
    new OracleParameter() 
        {
            ParameterName="KDC_KEY", 
            DbType=OracleDbType.Varchar2, 
            Value=kdcKey, 
            Direction=ParameterDirection.Input
        } 
    ); 
```

等等

*除了游标之外，* proc 还返回结果集吗？如果不使用`ExecuteNonQuery`代替`Execute`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T13:27:49.590

输入参数最常见的问题是`null`. 如果`kfcKey`or`user_id`是`null`（空引用或`Nullable<T>`没有值的），那么对于许多提供者（因此我也假设 Oracle）它**不会添加参数**。要通过 a `null`，您通常需要通过`DBNull.Value`。

所以：检查`null`s。

```
cmd.Parameters.Add("KDC_KEY", OracleDbType.Varchar2,
    (object)kdcKey ?? DBNull.Value, ParameterDirection.Input);
cmd.Parameters.Add("P_ID_UTENTE", OracleDbType.Int32,
    (object)user_id ?? DBNull.Value, ParameterDirection.Input); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T19:34:06.657

检查您的参数拼写，它必须与存储过程变量名称匹配，特别是如果您有输出变量。我只是花了几个小时来解决一个类似的问题，结果我拼错了我的输出参数名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-10T08:19:29.453

我经历了类似的问题，发现根本原因很愚蠢。如果您的问题类似，这可能会对您有所帮助。

在我们的例子中，确切的错误消息是从包的过程调用中返回的。经过 10 次验证 Java 代码、它的参数和后端包“Body”及其过程，我们无法找出任何差异。

然后，我们注意到该包具有类似的过程，但参数数量不同。这里的“问题”是包没有使用从前端调用的新方法编译。所以，它要走旧程序。

请检查这是否与您的情况相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-04T05:40:23.203

您有某种名为“type_cursor”的用户定义类型，但正在绑定一个 SYS_REFCURSOR 参数。这就是这个错误的原因。

# java - 将数组/指针从 C 转换为 Java

> ID：11505214
> 
> 赞同：4
> 
> 时间：2012-07-16T13:19:33.147
> 
> 标签：java, c, arrays, pointers

我正在尝试将 C 中的程序重新编写为 java。我没有 C 经验，但有一些 C++ 经验，所以我了解一些指针/数组的东西。不过我有点困惑......我在 C 中给出了以下代码：

```
void ProcessStatus(Char *Stat){
    DWORD relayDate;
    DWORD APIDate;

    version3=false;
    version4=false;
    version9=false;
    tiltAngle = false;
    ver4features=0;
    tooNew=false;
    ProgRev=0;

    switch(Stat[14]){ 
```

据我了解，该函数`ProcessStatus`传递了一个指向 char 的指针；我假设因为在提供的代码的最后一行`Stat[14]`被称为它的数组内。

所以我感到困惑的是如何将指针传递给 Java 中的数组中的 char。

任何帮助将不胜感激，即使它有助于我理解 C 代码。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:24:39.357

很难说它是一个字符串还是一个已经传递的原始数据。

如果是字符串，请使用 Java 内置的 String 类。

```
void ProcessStatus( String stat)
{
  ...

  switch ( stat.charAt( 14 ) )
  {
  } 
} 
```

如果是原始数据数组，请使用`byte`数组

```
void ProcessStatus( byte[] stat)
{
  ...

  switch ( stat[ 14 ] )
  {
  } 
} 
```

顺便说一句，C 的`char`数据类型被转换为`byte`Java 中的类型。`char`Java 中的 type 表示 2 个字节长的 UTF-16 字符。 `byte`正是它的本质（8 位，有符号）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:22:10.590

由于 C 没有内置的 String 类型，因此 C 中的 String 表示为一个字符数组。在 C 中，传递指向数组中第零个元素的指针等同于传递对数组的引用，我认为这就是我认为这段代码正在做的事情。本质上，将 char* Stat 替换为 String Stat 并将 switch(Stat[14]) 替换为 switch(Stat.charAt(14))

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T13:23:33.553

首先，澄清一下，它不是 a `char`，而是 a `Char`; `Char`带有大写字母`C`的是一些用户定义的类型。它*可能*只是一个 typedef for `char`，也可能是别的东西；我们不知道。

其次，传递给该方法的显然是指向`Char`对象块的第一个元素的指针。最接近的等价物是 Java 数组，但取决于您如何执行此操作，您可以将数据结构完全保留在 C 中，将指针作为 a 传递`long`给 Java，并让 Java 通过调用您提供的本机函数来操作它。Java 数组与 C 中的“数组”或连续分配的对象序列完全不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T13:23:34.100

大多数时候，当您在 C 或 C++ 中看到`char *`（我不知道您最初的上限`Char`是什么）时，Java 等价物将是`String`or `char[]`。前者是字符串类，后者是字符数组。

使用的等效函数签名`String`如下所示；我们[`charAt`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt%28int%29)用来访问第 15 个字符：

```
void ProcessStatus(String Stat){
    // ...
    switch (Stat.charAt(14))
    // ...
} 
```

等价的 with`char[]`看起来像这样（因为它是一个数组，我们像在 C 中使用`char *`or一样对它进行索引`char[]`）：

```
void ProcessStatus(char[] Stat){
    // ...
    switch (Stat[14])
    // ...
} 
```

# c++ - OpenCV 配置问题

> ID：11505217
> 
> 赞同：1
> 
> 时间：2012-07-16T13:19:57.197
> 
> 标签：c++, visual-studio-2010, opencv

我正在尝试让 OpenCV 在我的 PC 上运行。

我已经下载了 openCV 2.4.2 版，并且我还下载了另一个使用 open CV 的 VC++ 2010 项目。

但是，在 Linker -> Input -> Additional Dependencies 部分，我有 4 个 .lib 项：

*   cv200d.lib

*   cxcore200d.lib

*   highgui200d.lib

*   cvaux200d.lib

问题是我在我的 openCV 版本中找不到那些。我当前的 openCV 版本中的 .lib 项目具有前缀 opencv_*.lib 。

你知道我为什么会收到这个错误吗？我应该用一些新的 .lib 项目替换这些值吗？如果有，通讯员是谁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:26:38.090

OpenCV 2.0 是一个非常老的版本。当前版本在 2.4.x 范围内。如果你编译了 OpenCV 源代码，你应该有 cv242d.lib（和其他 242 个库）。在您的项目链接器输入中，您需要将*200*中的每一个替换为*242*。同样，您将需要更改您的附加包含路径（在 C/C++ 选项中）以指向新的包含目录。如果你很幸运并且 API 没有变化，你的代码应该可以成功编译——我认为它很有可能会发生。

如果您遇到编译/链接错误，您将需要检查您的项目并修复错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:27:47.173

```
cv200d.lib
cxcore200d.lib
highgui200d.lib
cvaux200d.lib 
```

这是一个旧的库文件 - 第一个 opencv 版本。您使用第二个版本（2.4.2）并且必须使用 opencv*.lib 文件而不是上面的文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:29:47.453

项目使用旧版本的 OpenCV。您应该包括新文件（来自您的 opencv2/ 目录），添加您的库（编译后）。版本之间的某些功能可能会有所不同，并且可能需要重写一些代码。

您的另一个选择是下载相同版本的 opencv 并编译它。

# objective-c - Objective-c 中的 0x02, 0x03 十六进制字符

> ID：11505223
> 
> 赞同：0
> 
> 时间：2012-07-16T13:20:10.850
> 
> 标签：objective-c, string, char, hex

我目前正在开发一个服务器客户端项目，并且正在编写一个小的 tcp iPhone 应用程序客户端。问题是，我必须向服务器发送一个具有以下格式的“数据包”：

`0x02`+ 一个字符串 + `0x09`+ 一个整数 +`0x03`

问题是，我不知道如何包含 0x02 （作为十六进制）。最后，我应该将所有内容作为 NSData 发送。

这是我到目前为止所得到的。

```
unsigned char tag_start = 0x02;
unsigned char tag_end = 0x03;
unsigned char tag_split = 0x09;

NSString * stringToSend = [NSString stringWithFormat: @"%c%@%c%@%c%@%c%@%c", tag_start, oobject, tag_split, oid, tag_split, oaction, tag_split, ovalue, tag_end];

NSData * dataToSend = [[NSData alloc] initWithData:[stringToSend dataUsingEncoding:NSASCIIStringEncoding]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:18:01.520

在类似的问题中，我使用了 NSMutableData，然后使用`appendBytes`（附加 STX、ETX、CSM）或`appendData`（NSString）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:40:10.000

试试这种方式：

```
NSString *_command = @"\x02...\x09...\x03"; 
```

它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T17:27:41.980

以下是它的工作原理：

```
NSMutableData * mutableData = [[NSMutableData alloc] init];

// Appends STX
[mutableData appendData: [NSData dataWithBytes: "\x02" length:1]];

// Appends ETX
[mutableData appendData: [NSData dataWithBytes: "\x09" length:1]];

// Appends CSM
[mutableData appendData: [NSData dataWithBytes: "\x03" length:1]]; 
```

我的问题是服务器没有回复我的消息，但消息是正确的。

# c++ - 将朋友声明注入命名空间，Eckel，Vol1，pg:440？

> ID：11505226
> 
> 赞同：3
> 
> 时间：2012-07-16T13:20:13.703
> 
> 标签：c++

我试图了解将朋友声明注入命名空间：

```
#include <iostream>
using namespace std;

namespace Z { //forward declaration
  class X;
}

class Y {
   public:
   void func(Z::X*, int);
 };

namespace Z {
  class X {
    int i;
    public:
    X() : i(999) {}
    friend void Y::func(Z::X*, int);
    void print(void) { cout << i << endl; }
  };
}

void Y::func(Z::X* ptr, int i)
{
  ptr->i = 40;
}

int main(void)
{
  Z::X zx;
  zx.print();

  Y y;
  y.func(&zx, 40);
  zx.print();

  using namespace Z;
//  func(&zx, 30); DOES NOT WORK
} 
```

> friendInject.cc:39: 错误：'func' 没有在这个范围内声明这本书说：“你可以通过在一个封闭的类中声明一个朋友声明到一个命名空间中”。“现在函数 you() 是命名空间 Me 的成员。”

这到底是什么意思？？我试过 Y::func 但这可能只适用于静态成员函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:33:03.660

你必须写

```
y.func(&zx, 30); // work well 
```

与 y。因为fund - 它是一个类实例方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:00:53.160

C++11 标准 7.3.1.2 (3) 说：

“如果非本地类中的友元声明首先声明了一个类或函数**[脚注：这意味着类或函数的名称是不合格的]**，则友元类或函数是最内层封闭命名空间的成员。”

因此，任何*不合格*的友元函数声明都会在最里面的封闭命名空间中引入一个自由函数；（可能）这本书将其称为“注入命名空间”。

请注意，甚至可以在朋友声明中定义（实现）一个函数：

```
namespace Z
{
  class C
  {
    friend void f(void){/*do something*/}
  };
} 
```

这个友元声明不仅“注入”，而且还实现了命名空间 Z 中的自由函数 f（f 本身不是 C 类的成员！），因此 Z::f 不需要其他声明或定义。

至于你的例子，

```
friend void Y::func(Z::X*, int); 
```

是*限定*的（以命名空间/类名为前缀），因此它不*声明*函数，它仅引用先前在类 Y 中声明的成员函数 Y::func。这样的友元声明“注入”什么都没有。

# post - express js同时调用一个请求两次一次：好诡异

> ID：11505229
> 
> 赞同：0
> 
> 时间：2012-07-16T13:20:17.540
> 
> 标签：post, request, express

```
var a = 0;
app.post('/rpc', function(req, res){
    debugger; // hits only once
    var console = require('console');
    a++; // runs once
    console.log(a); // runs twice!!!
    debugger; // hits only once
}); 
```

我真的很疯狂。console.log 运行两次！和一个++，其余的只有一次......

输出它是：

```
1
1 
```

请问有什么帮助吗？谢谢

编辑：

当我像这样运行我的应用程序时

```
 supervisor -w .,services,models,test -- --debug index.js 
```

它调用了两次。如果我只打电话

```
 node --debug index.js 
```

它工作得很好..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:09:37.267

您正在设置一个额外的控制台实例（默认情况下有一个）您是否尝试过从 app.post 块中删除您的要求控制台语句？

通常情况下，您不需要在默认情况下添加“需要控制台” - 除非您出于某些我无法从帖子中收集到的特殊原因需要它。

希望能帮助到你

# c++ - gdb 和 ffmpeg 编译

> ID：11505230
> 
> 赞同：0
> 
> 时间：2012-07-16T13:20:20.840
> 
> 标签：c++, c, ffmpeg, gdb

我使用网站 ffmpeg 的说明安装了 ffmpeg：http: [//ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide](http://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)，编译工作正常，他们生成一个文件“ffmpeg_201207131721-git-1_amd64.deb”然后，我执行

```
sudo dpkg-i ffmpeg_201207131721-git-1_amd64.deb 
```

当我执行命令时

```
ffmpeg -i -f toto.flv mp3-vn-acodec copy new_video.mp3 
```

文件“new_video.mp3”已经很成熟了。我想知道什么是命令“gdb”，当我运行命令时，我可以使用它来查找已查阅的文件`ffmpeg -i -f toto.flv mp3-vn-acodec copy new_video.mp3`

先感谢您

图菲克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-06T14:01:23.507

要调试 ffmpeg 代码，我建议在 Linux 中执行以下步骤：

1）获取最新版本的ffmpeg：wget [http://ffmpeg.org/releases/ffmpeg-snapshot.tar.bz2](http://ffmpeg.org/releases/ffmpeg-snapshot.tar.bz2)

2) 'untar' ffmpeg 包：tar xjvf ffmpeg-snapshot.tar.bz2

3) 在没有优化选项的情况下配置 ffmpeg（为了启用调试），例如 ./configure --enable-shared --disable-static --disable-optimizations --disable-mmx --disable-stripping

4) 制作

5) 须藤制作安装

6）gdb ffmpeg ....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T02:06:45.487

确保`make install`在修改 FFmpeg 后每次都执行一次，否则您的更改将不会被反映 - 这可能是您的 printf() 行不起作用的原因。

# python - 针对 Web 服务的 Python Web 框架建议

> ID：11505231
> 
> 赞同：0
> 
> 时间：2012-07-16T13:20:21.190
> 
> 标签：python, json, web-services, web-frameworks

我将编写一个允许上传/下载文件、管理权限和用户的网络服务。它将是桌面应用程序或移动应用程序将与之通信的界面。我想知道我应该使用哪个 Web 框架？

它是一种媒体文件的远程存储。

我将在 Linux 环境中的 EC2 上托管 Web 服务。它应该很快（显然），因为它必须每秒处理数十个请求，传输大量数据（GB）......通信将使用 JSon 完成......但是如何处理二进制数据？如果我使用base64，它将增长33％......

我觉得web2py应该是可以的，因为它是一个非常稳定和成熟的项目，但是在选择之前想要其他建议。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:50:35.970

毫无疑问，我会因为这个答案而被击落，但需要说...

您将编写一个允许每秒数十次传输的服务，并且文件大小非常大......正常运行时间将是必不可少的，传输速度等也是如此......

如果这是针对企业，而不仅仅是个人宠物项目，请让负责 IT 预算的个人给“Box”或“DropBox”一些便士并使用他们的服务（我*不*隶属于任何一家公司）。

在业务层面上，这可以让您直接启动并运行，最终可能会比您编码、设计、调试、支付 EC2 等费用更便宜......

与您的问题更相关：

`Flask`似乎是一个即将到来且可用的“简单”框架。这应该提供所有的功能，而不需要所有的*花里胡哨*。

我会花时间研究的另一个是`Pyramid`- 当使用一个非常基本的入门模板时非常简单，但是你有它背后的机制来真正完成非常复杂的事情。（例如，您可以在必要时混合使用 url 调度和遍历）。

# scala - 在 SBT 中从 sbt.package.File 转换为 java.io.File

> ID：11505232
> 
> 赞同：0
> 
> 时间：2012-07-16T13:20:23.910
> 
> 标签：scala, sbt, sbt-android-plugin

我正在为 SBT 扩展 Jan Berkel 的 Android 插件。

现在，我想知道，我怎样才能转换`sbt.SettingKey[sbt.package.File]`为`java.io.File`？有没有办法从中`java.io.File`提取`sbt.SettingKey[sbt.package.File]`？

例如：

我有一个功能：

```
def isUpToDate(input: java.io.File): Boolean 
```

期望`java.io.File`作为一个论点。

我有一个`sbt.SettingKey[sbt.package.File]`（命名`myFileKey`）映射到我`File`需要的。

我如何调用`isUpToDate`映射到的文件`myFileKey`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:26:13.163

您将需要使用*组合依赖*项，使用设置键`<<=`的方法提取文件。`apply`例如

```
yourKey <<= fileKey { file => ... } 
```

这是缩写

```
yourKey <<= fileKey.apply { file => ... } 
```

[请参阅sbt getting-started-guide](https://github.com/harrah/xsbt/wiki/Getting-Started-More-About-Settings)的“根据其他键的值计算值”部分。

另请注意，这`sbt.File`只是`java.io.File`.

* * *

例如映射一些文件：

```
val yourKey  = SettingKey[File]("yourKey", "Description")
val settings = Seq[Setting[_]](
  // ....
  yourKey <<= fileKey { f => f / "subdirectory" }
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:14:08.450

关于更新的问题。我仍然假设您正在修改现有的 sbt 插件。因此，您仍然需要引入依赖项。设置键的值仅在构建过程*的特定阶段有效。*因此，要检索该值，您需要依赖于设置键。

请阅读[.sbt 构建定义文档](https://github.com/harrah/xsbt/wiki/Getting-Started-Basic-Def)中的“任务键”部分，以决定您是需要依赖普通设置键（静态）还是另一个任务的结果（动态）。在我看来，您`isUpToDate`可能需要一遍又一遍地重新评估。因此，您将需要一项任务。

```
val isUpToDate = TaskKey[Boolean]("isUpToDate", "Description")
val settings = Seq[Setting[_]](
// ....
   isUpToDate <<= fileKey.map(checkUpToDate)
)

private def checkUpToDate(f: File): Boolean = { ... } 
```

**Note** that you need `map` here instead of `apply` in order to construct a task from a setting key.

# image-processing - 方向梯度直方图与边缘方向直方图

> ID：11505234
> 
> 赞同：7
> 
> 时间：2012-07-16T13:20:29.713
> 
> 标签：image-processing, machine-learning, computer-vision, pattern-recognition

我不清楚 HOG 和 EOH 之间的区别。Hog 基于图像导数 EOH 基于边缘方向。似乎 HOG 也以某种方式代表了 EOH。

您能否给我一些关于 EOH 与 HOG 的不同之处以及 EOH 与 HOG 相比的优势的解释。与 HOG 相比，在什么情况下我们可以使用 EOH？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:39:25.910

我认为主要区别在于，对于 HOG，计算实际梯度方向然后分箱，对于 EOH，边缘方向是通过在一组边缘滤波器内核上搜索最大响应来评估的。所以你可以说 HOG 在梯度计算之后进行分箱，其中 EOH 直接计算分箱中的梯度。根据您想要的垃圾箱数量，一个会比另一个快。

在 EOH 中，明暗边缘和暗光边缘通常被视为相同，因此方向在 0 到 pi 的范围内，而在 HOG 中，bin 通常跨越完整的 2*pi。但是，您也可以轻松地让 EOH 执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-18T10:47:59.487

虽然，我不认为它们有一个独特的定义，并且细节可以在许多层面上有所不同（例如如何计算方向（或方向梯度）），但关键是边缘方向直方图构建的直方图只考虑到考虑与边缘相对应的像素的梯度（这又是用其他方法计算的，例如`canny`边缘），而定向梯度直方图考虑了每个像素的所有梯度。

我可能错了，但这就是我实现 EOH 的方式： [http ://robertour.com/2012/01/26/edge-orientation-histograms-in-global-and-local-features/](http://robertour.com/2012/01/26/edge-orientation-histograms-in-global-and-local-features/)

# python - 如何在使用 multiprocessing.Pool #python 时在 KeyboardInterrupt 上停止执行

> ID：11505235
> 
> 赞同：2
> 
> 时间：2012-07-16T13:20:30.143
> 
> 标签：python, multiprocessing, keyboardinterrupt

> **可能重复：**
> [键盘中断与 python 的多处理池](https://stackoverflow.com/questions/1408356/keyboard-interrupts-with-pythons-multiprocessing-pool)

Python 的多处理模块有一个叫做 Pool [http://docs.python.org/library/multiprocessing.html#module-multiprocessing.pool](http://docs.python.org/library/multiprocessing.html#module-multiprocessing.pool)

当一个进程池正在运行时，我无法让脚本使用 KeyboardInterrupt 终止，即 Ctrl + c。池产生新进程，唯一退出的方法是 ctrl + z 然后手动杀死它们。

这是我尝试对其进行测试的脚本：

```
import multiprocessing
import random
import time

def sometask(arg):
    #do something nasty to arg
    time.sleep(arg)
    return random.randint(0,arg)

if __name__=="__main__":
    pool = multiprocessing.Pool(processes=4)
    print pool.map(sometask, range(10)) 
```

我的主脚本尝试做一些比 time.sleep() 更耗时的事情，每次我尝试测试运行它时，我都必须等待它完成或通过首先找到它的进程的 ID 手动终止它产生。请提出解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:13:28.387

我也遇到了这个问题。一个可能的解决方法（一个肮脏的）可以产生另一个进程并将主脚本的 PID 传递给该进程。让那个进程杀死主脚本。我已经尝试过了，它对我来说效果很好。

# jsf - 如何在更改 ah:selectOneMenu 时加载和显示依赖的 h:selectOneMenu

> ID：11505248
> 
> 赞同：3
> 
> 时间：2012-07-16T13:21:15.260
> 
> 标签：jsf, jsf-2, selectonemenu

我想创建 JSF 注册表单，其中包含所有国家/地区列表的选择菜单。我知道这很容易用 Java 实现，`HashMap`但我不知道如何实现的棘手部分是用户从列表中选择他的国家后，第二个选择菜单如何与他国家的城市一起出现？有什么有用的例子吗？

最良好的祝愿。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-16T13:55:38.497

你可以用`<f:ajax>`这个。当嵌套在诸如 的输入组件中`<h:selectOneMenu>`时，默认情况下将在输入值更改时调用它。您可以指定一种`listener`方法，该方法可以根据当前输入值为下一个组件预填充数据，并且您可以指定下一个组件的客户端 ID`render`以显示预填充的数据。

```
<h:selectOneMenu value="#{bean.country}">
    <f:selectItems value="#{bean.countries}" />
    <f:ajax listener="#{bean.changeCountry}" render="cities" />
</h:selectOneMenu>
<h:panelGroup id="cities">
    <h:selectOneMenu value="#{bean.city}" rendered="#{not empty bean.cities}">
        <f:selectItems value="#{bean.cities}" />
    </h:selectOneMenu>
</h:panelGroup> 
```

bean 必须至少在视图范围内（不是请求）：

```
@ManagedBean
@ViewScoped
public class Bean implements Serializable {

    private String country; // +getter+setter
    private String city; // +getter+setter
    private List<String> countries; // +getter
    private List<String> cities; // +getter

    @EJB
    private LocationService locationService;

    @PostConstruct
    public void init() {
        countries = locationService.getCountries();
    }

    public void changeCountry() {
        cities = locationService.getCities(country);
    }

    // ...
} 
```

您当然也可以使用 a`Map<String, String>`而不是 a `List<String>`。映射键成为选项标签，映射值成为选项值。您只需要记住 a`HashMap`本质上是无序的。您更喜欢使用它`LinkedHashMap`来按`Map`插入顺序显示项目。

### 也可以看看：

*   [我们的`selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)
*   [何时使用 valueChangeListener 或 f:ajax 监听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener)

# javascript - 关于 JQuery Mobile 的两个问题

> ID：11505251
> 
> 赞同：1
> 
> 时间：2012-07-16T13:21:20.600
> 
> 标签：javascript, jquery, jquery-mobile

这是我的标题代码。

```
<div data-role="header" class="header">
    www.google.com  
</div><!-- /header --> 
```

1.  如何添加两个按钮，一个在我的左侧，一个在我的标题右侧。
2.  如何添加指向“www.google.com”的链接。

当我尝试添加链接时，它会忽略`class property of div`并带来棕色标题，而不是在我的`div.header css class`.

```
<div data-role="header" class="header">
     <a href="http://www.google.com">www.google.com</a>     
</div><!-- /header --> 
```

下面是 CSS 类。

```
div.header{
    background: url('../images/green-bg.png');
    margin-top:auto;
    height:auto;
    text-align:center;  
    width:auto;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:56:18.553

要添加按钮，您只需添加左侧按钮的标记，然后添加一个`h`标记，然后是第二个按钮的标记，[JQM 应该自动](http://jquerymobile.com/demos/1.1.1/docs/toolbars/docs-headers.html)将它们定位在右侧和左侧。为了防止 JQM 增强您的链接并弄乱您的样式，您可以将[data-role="none"](http://jquerymobile.com/demos/1.1.1/docs/forms/forms-all-native.html) `attribute`添加到它的 parent `h element`。

例如

```
<div data-role="page">
<div data-role="header" class="header">
<a href="#" data-icon="back" data-role="button" >Button 1</a>
<h1><a href="http//www.google.com" rel="external" data-role="none">Google.com</a></h1>
<a href="#" data-icon="gear" data-role="button">Button 2</a>
</div>
<div data-role="content">
<p>Test</p>
</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T05:24:50.670

在 jquery mobile .css 文件中编写所需的类。

如果它不是缩小版本，我们可以肯定地对其进行编辑。

您可以将自定义类添加到其中，这样主题就不会影响配色方案和样式。

您也可以为超链接提供“ui-btn-left”和“ui-btn-right”类。

# java - 为服务器端缓存一个jsp

> ID：11505252
> 
> 赞同：1
> 
> 时间：2012-07-16T13:21:22.910
> 
> 标签：java, jsp, servlets

我有一个“搜索”页面，可让用户按选项选择一些搜索。这些选项包括由数据库填充的许多下拉列表。这些下拉菜单可能会改变，但很少会改变（最多一个月一次）。

现在我们的页面每次加载页面以填充这些下拉列表时都会访问数据库，页面加载大约需要 3-4 秒。我希望它缓存页面服务器端，并且每隔一小时左右才处理一次 jsp。任何进来的请求都应该得到已处理 jsp 的最新输出，但不会导致服务器重新处理它。也就是说，我希望页面刷新始终与 get 方法分开，因此现在用户不必再等待 0.5 秒来获取页面。

是否可以像在asp中一样在服务器端缓存jsp页面（是否可以在[服务器端缓存asp页面？](https://stackoverflow.com/questions/2867415/is-it-possible-to-cache-an-asp-page-on-the-server-side)）来解决这个问题？一般采用什么方法来解决这个问题？我可以想到解决方案，但如果已经开发出常见的最佳实践，我不想重新发明轮子，我知道它们一定是这样的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:28:04.100

我不知道 jsp 缓存服务器端，但您也可以缓存数据库的结果，因为这很可能是最慢的部分。

我总是将[ehcache](http://ehcache.org/)与 spring 和 aop 一起使用来实现对 java 方法结果的非侵入式缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-16T19:10:11.417

JSTL`c:set`呢？这里是菜单缓存的例子：

```
<c:if test="${empty JSPCACHE_menu}">
  <c:set var="JSPCACHE_menu" scope="session">
    <ul id="user-menu">...</ul>
  </c:set>
</c:if>
${JSPCACHE_menu} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:14:39.413

如果您使用的是弹簧，那么我认为弹簧[缓存抽象](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html)也是为了救援。我在缓存控制器方法和一些服务方法的输出的相同场景中使用了它。Spring 缓存很好地利用了缓存作为横切关注点。

# c++ - 错误：“||”之前的预期不合格 ID 令牌

> ID：11505254
> 
> 赞同：0
> 
> 时间：2012-07-16T13:21:28.110
> 
> 标签：c++, templates, gcc

我定义了以下模板，用于组合已定义的谓词：

```
namespace SomeNamespace
{
//TODO: for now simply taking argument type of first predicate
template<typename LhPredicate, typename RhPredicate>
struct OrPredicate : public std::unary_function<typename LhPredicate::argument_type, bool>
{
public:
  OrPredicate(LhPredicate const& lh, RhPredicate const& rh)
    : m_lh(lh),
      m_rh(rh)
  {
  }

  bool operator()(typename LhPredicate::argument_type arg) const
  {
      return m_lh(arg) || m_rh(arg);
  }

private:
  LhPredicate m_lh;
  RhPredicate m_rh;
};

//TODO: for now simply taking argument type of first predicate
template<typename LhPredicate, typename RhPredicate>
struct AndPredicate : public std::unary_function<typename LhPredicate::argument_type, bool>
{
public:
    AndPredicate(LhPredicate const& lh, RhPredicate const& rh)
      : m_lh(lh),
        m_rh(rh)
    {
    }

    bool operator()(typename LhPredicate::argument_type arg) const
    {
      return m_lh(arg) && m_rh(arg);
    }

private:
    LhPredicate m_lh;
    RhPredicate m_rh;
};

template<typename LhPredicate, typename RhPredicate>
OrPredicate<LhPredicate, RhPredicate> or(LhPredicate const& lh, RhPredicate const& rh)
{
  return OrPredicate<LhPredicate, RhPredicate>(lh, rh);
}

template<typename LhPredicate, typename RhPredicate>
AndPredicate<LhPredicate, RhPredicate> and(LhPredicate const& lh, RhPredicate const& rh)
{
  return AndPredicate<LhPredicate, RhPredicate>(lh, rh);
}

} 
```

问题是，当使用辅助函数模板（或/和）编译代码时，gcc 会抱怨这些行：

```
AndPredicate<LhPredicate, RhPredicate> and(LhPredicate const& lh, RhPredicate const& rh)

OrPredicate<LhPredicate, RhPredicate> or(LhPredicate const& lh, RhPredicate const& rh) 
```

像这样：

```
error: expected unqualified-id before '||' token
error: expected unqualified-id before '&&' token 
```

所以他真正抱怨的是那些台词：

```
return m_lh(arg) && m_rh(arg);
return m_lh(arg) || m_rh(arg); 
```

模板参数（要组合的谓词）当然正确地定义了 operator() 本身，我真的不知道 gcc 的问题是什么 - 相同的代码在 VS2005 上编译就好了。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:24:06.573

`and`并且`or`都是 C++ 的关键字。你介意给他们改名字吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:25:22.483

`and`并且`or`被保留`keywords`。它们是`&&`和`||`运算符的同义词。例如：

```
bool or(int a)
{

} 
```

不会编译

# macos - OSX：检查屏幕是否被锁定

> ID：11505255
> 
> 赞同：24
> 
> 时间：2012-07-16T13:21:28.960
> 
> 标签：macos, shell, applescript

有什么方法可以检查屏幕是否锁定在 shell 或 applescript 中？不仅检查屏幕保护程序是否正在运行，而且通过节能设置或按`⌃⇧⏏</kbd> (`shift`+`control`+`eject`).`

先感谢您。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-16T19:43:23.310

首先，你的问题有点混乱。Shift+Control+Eject 和 Energy Saver 都使屏幕进入睡眠状态，这与锁定屏幕不同。根据您的其他设置，这也可能需要锁定屏幕，但这是一个单独的问题。IIRC，在 Lion 上，默认情况下，任何人都不会锁定屏幕 - 但如果您让屏幕处于休眠状态的时间超过安全和隐私中设置的时间，则会锁定它。

无论如何，API[`CGSessionCopyCurrentDictionary`](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGSessionCopyCurrentDictionary)允许您为您的 GUI 会话获取有关屏幕睡眠和屏幕锁定的信息。如果您没有 GUI 会话（例如，因为您在 ssh shell 中运行），或者您的会话不拥有控制台（例如，因为有人快速用户将您切换出去），您将不会无法获得此信息，但您至少能够检测到这些情况。

这是我所知道的唯一适用于从 10.5（实际上是 10.3）到 10.8 的所有操作系统的机制（但这并不意味着它实际上是唯一的……）。

没有直接的方法可以从 bash 或 AppleScript 调用它。但是，您可以使用自己喜欢的桥接器（PyObjC、MacRuby、ASOC 等）来间接调用它。这是一个使用 Python 的示例：

```
#!/usr/bin/python
import Quartz
d = Quartz.CGSessionCopyCurrentDictionary()
print d 
```

以下是解释响应的方法：

*   如果您一无所获，那么您就没有 UI 会话。
*   如果字典有`kCGSSessionOnConsoleKey`= 0 或不存在，则您的 GUI 会话不拥有控制台，或者控制台的屏幕处于休眠状态。
*   如果字典有`CGSSessionScreenIsLocked`= 1，则屏幕被锁定。

一个有问题的情况是`kCGSSessionOnConsoleKey`0（或缺失）和`CGSSessionScreenIsLocked`1。在这种情况下，要么您已将屏幕置于睡眠状态并锁定它们，要么其他人已使用控制台并锁定屏幕（无论是否放置它们）睡觉）。而且我不确定是否有办法区分这些情况。但是，如果您正在寻找“不要尝试显示对话框，因为用户必须先解锁屏幕”，那么这两种情况都意味着“不显示对话框”。

所以，这应该给你你想要的：

```
#!/usr/bin/python
import sys
import Quartz
d=Quartz.CGSessionCopyCurrentDictionary()
sys.exit(d and 
         d.get("CGSSessionScreenIsLocked", 0) == 0 and 
         d.get("kCGSSessionOnConsoleKey", 0) == 1) 
```

或者，把它变成一个单行，你可以直接放在一个 shell 脚本中：

```
python -c 'import sys,Quartz; d=Quartz.CGSessionCopyCurrentDictionary(); sys.exit(d and d.get("CGSSessionScreenIsLocked", 0) == 0 and d.get("kCGSSessionOnConsoleKey", 0) == 1)' 
```

现在，如果您已经 ssh 进入 Mac，并且当前*也*登录到该 Mac 的 GUI 控制台（作为同一用户），该怎么办？在这种情况下，您的 ssh 登录会话可以以与本地终端登录会话完全相同的方式与控制台登录会话进行通信。因此，CGSessionCopyCurrentDictionary 将获得相同的值。

调解该连接的引导服务器将应用一些限制（例如，`security authorize -u foo`应该从终端工作但不能通过 ssh 工作），但这些限制没有完整记录，并且从一个版本到另一个版本，所以这可能不是你想要依赖的东西. 相反，您想实际阅读您的登录会话信息

如果您想进一步了解这一点，请从阅读[多用户环境编程主题](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPMultipleUsers/BPMultipleUsers.html#//apple_ref/doc/uid/10000180-SW1)开始。但是有些信息并没有真正记录在任何地方（例如，引用的 Mach 级会话`SessionGetInfo`和引用的 BSD 级会话`utmpx`是如何联系在一起的）。许多相关工具和库都是[开源](http://opensource.apple.com/source/libsecurity_authorization/)的，这可能会有所帮助。即使阅读所有这些内容并不能告诉您如何做您想做的事，它也会准确地告诉您您想要什么，以及用于搜索和提问的正确术语，这可能已经足够了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2021-03-20T14:55:21.207

@LevB 的答案很好，但是随着macOS中 Python“[弃用](https://developer.apple.com/documentation/macos-release-notes/macos-catalina-10_15-release-notes#3318257)”的出现（截至 Big Sur 还没有看到它被删除）我想知道是否有另一种方法可以得到*，*`CGSSessionScreenIsLocked` Applecare 企业支持向我指出了`ioreg`这些 CoreGraphics会话值也有效

下面是几个 shell 函数单行代码，在 shell 样式中，它们在肯定（成功）中返回零（0），在否定中返回非零（1），因此它们可以在`if`语句中按预期使用。

```
function screenIsLocked { [ "$(/usr/libexec/PlistBuddy -c "print :IOConsoleUsers:0:CGSSessionScreenIsLocked" /dev/stdin 2>/dev/null <<< "$(ioreg -n Root -d1 -a)")" = "true" ] && return 0 || return 1; }
function screenIsUnlocked { [ "$(/usr/libexec/PlistBuddy -c "print :IOConsoleUsers:0:CGSSessionScreenIsLocked" /dev/stdin 2>/dev/null <<< "$(ioreg -n Root -d1 -a)")" != "true" ] && return 0 || return 1; } 
```

请注意，这些键**仅**在屏幕锁定时存在：`kCGSSessionSecureInputPID`、`CGSSessionScreenLockedTime`、`CGSSessionScreenIsLocked`。当屏幕解锁时`CGSSessionScreenIsLocked` 不*存在*，因此`!= "true"`比较，因为它永远不会`"false"`

示例用法（因为`if`有时无法实现评估退出代码的简单性）：

```
#!/bin/sh

function screenIsLocked { [ "$(/usr/libexec/PlistBuddy -c "print :IOConsoleUsers:0:CGSSessionScreenIsLocked" /dev/stdin 2>/dev/null <<< "$(ioreg -n Root -d1 -a)")" = "true" ] && return 0 || return 1; }
function screenIsUnlocked { [ "$(/usr/libexec/PlistBuddy -c "print :IOConsoleUsers:0:CGSSessionScreenIsLocked" /dev/stdin 2>/dev/null <<< "$(ioreg -n Root -d1 -a)")" != "true" ] && return 0 || return 1; }

if screenIsLocked; then
    echo "Screen locked"
fi

if screenIsUnlocked; then
    echo "Screen unlocked"
fi

if ! screenIsLocked; then
    echo "Screen unlocked (inverse logic)"
fi

if ! screenIsUnlocked; then
    echo "Screen locked (inverse logic)"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-31T18:53:18.390

使用 jdk9，您可以使用

```
java.awt.Desktop

Desktop tempDesktop = Desktop.getDesktop();
        tempDesktop.addAppEventListener(new UserSessionListener() {

            @Override
            public void userSessionDeactivated(UserSessionEvent aE) {
                LOG.info("Desktop:userSessionDeactivated Reason=" + aE.getReason() + " Source=" + aE.getSource());
                // Windows Key L: 
                // Tue Aug 31 11:22:49 CEST 2021:info:MainController:userSessionDeactivated Reason=LOCK

                // Close Lid:
                // Tue Aug 31 11:24:38 CEST 2021:info:MainController:userSessionDeactivated Reason=LOCK
                // Tue Aug 31 11:24:39 CEST 2021:info:MainController:systemAboutToSleep Source=java.awt.Desktop@741f67cd

                ptcUserStatus = PtcUserStatus.AWAY;

            }

            @Override
            public void userSessionActivated(UserSessionEvent aE) {
                LOG.info("Desktop:userSessionActivated Reason=" + aE.getReason() + " Source=" + aE.getSource());
                // Logon after Windows Key L
                // Tue Aug 31 11:22:53 CEST 2021:info:MainController:userSessionActivated Reason=LOCK

                // Open Lid:
                // Tue Aug 31 11:24:56 CEST 2021:info:MainController:systemAwoke Source=java.awt.Desktop@741f67cd
                // Tue Aug 31 11:25:06 CEST 2021:info:MainController:userSessionActivated Reason=LOCK
                ptcUserStatus = PtcUserStatus.BACK;
            }
        }); 
```

# objective-c - uilabel 在添加时显示“正在移动”

> ID：11505258
> 
> 赞同：1
> 
> 时间：2012-07-16T13:21:35.503
> 
> 标签：objective-c, ios, xcode, cocoa-touch, ipad

在我的 iPad 应用程序中，

不知何故，我设法在导航栏上添加了一个 UILabel 作为标题。

**在将它添加到导航栏时，**我会看到一些偏移量。

这里“移动”的意思是，它在 0.1 秒内向我展示了一些动画。（添加活动，从一些 x,y 到一些 x,y）

这是我的代码，

```
-(void)addnavigationcomponents:(id)sender
{

if(titleLabel)
{
    [titleLabel release];
    titleLabel = [[CustomLabelA alloc] initWithFrame:CGRectMake(0,42,600,50) settag:1];
}

viewForLabel=[[UIView alloc] initWithFrame:CGRectMake(0,0,600,96)];
[titleLabel setFont:[UIFont fontWithName:@"TAHOMA" size:34.0f]];

[titleLabel setTextAlignment:UITextAlignmentCenter];

[viewForLabel addSubview:titleLabel];
self.navigationItem.titleView=viewForLabel;

titleLabel.text =calcname;

UIView *viewForButton=[[UIView alloc] initWithFrame:CGRectMake(0,0,71,96)];

} 
```

在`viewWillAppear`中，我添加了以下代码：

```
[self performSelector:@selector(addnavigationcomponents:) withObject:self afterDelay:0.00]; 
```

我已经完成了选择器，因为标签和内容的简单代码隐藏在我的导航背景后面，所以我该怎么做。

如何删除该动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:26:24.290

您需要在这里做几件事：

1.  不要在“viewWillAppear”上调用它 - 您希望在“viewDidLoad”上执行此代码。

2.  避免在延迟 0.0 后执行选择器 - 如果这是唯一可行的方法，那么根本不应该以这种方式完成。

3.  作为最佳实践，在将文本作为子视图添加到“viewForLabel”之前设置文本。

# android - Android - RadioButton 未取消选中初始选中状态

> ID：11505262
> 
> 赞同：3
> 
> 时间：2012-07-16T13:21:49.493
> 
> 标签：android, radio-button, radio-group

我在 RadioGroup 中有一个 RadioButton，

当我设置按钮的初始状态时出现问题

> 机器人：检查=“真”

因为如果我按下单选按钮“F”，单选按钮“M”不会取消选中...

我能怎么做？怎么了？

这是代码：

```
<RadioGroup
   android:id="@+id/registrazione_utente_sesso"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:orientation="horizontal" >

   <RadioButton
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:checked="true"
      android:text="M"
      android:textColor="#ff7415"
      android:textSize="18sp" />

   <RadioButton
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_marginLeft="13.33dp"
      android:text="F"
      android:textColor="#ff7415"
      android:textSize="18sp" />
</RadioGroup> 
```

屏幕：

初始状态（正确）：

[http://i.imgur.com/YsUIg.png](http://i.imgur.com/YsUIg.png)

当我按下 RadioButton "F" 时的最终状态（错误）：

[http://i.imgur.com/YJms9.png](http://i.imgur.com/YJms9.png)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T13:26:01.150

使用 android:id 为单选按钮分配一个唯一的 id，然后设置 RadioGroup 的 android:checkedButton 属性，如下所示：

```
<RadioGroup
   android:id="@+id/registrazione_utente_sesso"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:orientation="horizontal"
   android:checkedButton="@+id/radiobutton_m" >

   <RadioButton
      android:id="@+id/radiobutton_m"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="M"
      android:textColor="#ff7415"
      android:textSize="18sp" />

   <RadioButton
      android:id="@+id/radiobutton_f"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_marginLeft="13.33dp"
      android:text="F"
      android:textColor="#ff7415"
      android:textSize="18sp" />
</RadioGroup> 
```

# javascript - 无法检索动态创建的元素的 id

> ID：11505266
> 
> 赞同：0
> 
> 时间：2012-07-16T13:22:01.833
> 
> 标签：javascript, jquery, html

我已经用 id 在 JavaScript 中动态创建了 HTML 元素。

当单独获得价值时，它会起作用。但是我使用 jQuery 来处理使用 id 更新数据库的单击操作，并且我得到的 id 是未定义的。代码如下。

脚本：

```
var bt=document.createElement("b");
bt.setAttribute("class","assign");

var ah=document.createElement("a");
ah.href="";
ah.setAttribute('id',jsonobj[k]);
ah.id=jsonobj[k];
ah.innerHTML="Assign";

bt.appendChild(ah);
lb.appendChild(bt); 
```

jQuery：

```
$('b.assign a').click(function(event) {
    var id1 = $(this).attr('id');
    alert(id1);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:27:09.253

尝试委派点击处理程序，这样它将自动适用于任何新创建的标签：

```
$(document).on('click','b.assign a',function(event) {
    var id1 = $(this).attr('id');
    alert(id1);
}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

# php - 两种添加/编辑节点形式：如何让用户选择

> ID：11505268
> 
> 赞同：0
> 
> 时间：2012-07-16T13:22:02.440
> 
> 标签：php, forms, drupal

我创建了一个模块，在其中我使用 node_form_alter 来更改某个数据类型的添加/编辑表单。我希望用户能够在表单的两个更改版本之间进行选择。最好我希望有一个页面，他们可以单击“Formtype 1”或“Formtype 2”两个链接中的任何一个，并根据他们单击的链接被带到节点添加/编辑表单并进行适当的更改。关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:25:42.147

您可以简单地使用两个链接，例如：

1.  `node/add/node_type/f1`
2.  `node/add/node_type/f2`

drupal 将忽略路径的最后一部分，但在 node_form_alter 中，您可以使用[arg()](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/arg/7)函数访问 url 部分的每个部分。

# fluent-security - 安装 Fluent Security 预发布 nuget 包

> ID：11505270
> 
> 赞同：1
> 
> 时间：2012-07-16T13:22:09.360
> 
> 标签：fluent-security

我尝试使用以下命令安装 Fluent Security 预发布包。

**安装包 FluentSecurity -Pre**

当我从 VS 2010 尝试上述命令时，得到以下错误。

PM> Install-Package FluentSecurity -Pre Install-Package：找不到与参数名称“Pre”匹配的参数。在 line:1 char:36 + Install-Package FluentSecurity -Pre <<<< + CategoryInfo : InvalidArgument: (:) [Install-Package], ParameterBindingException + FullyQualifiedErrorId : NamedParameterNotFound,NuGet.PowerShell.Commands.InstallPackageCommand

有什么想法吗！！！

[http://nuget.org/packages/FluentSecurity](http://nuget.org/packages/FluentSecurity)

谢谢，-纳伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T19:52:53.650

请试试 ：

```
Install-Package FluentSecurity -IncludePrerelease 
```

# javascript - 在 Chrome 中播放来自 Google App Engine 开发服务器的音频

> ID：11505273
> 
> 赞同：2
> 
> 时间：2012-07-16T13:22:11.677
> 
> 标签：javascript, google-app-engine, html5-audio

从本地计算机上运行的 Google App Engine 开发服务器 (1.7.0) 播放音频时，音频只会在 Chrome (20.0.1132.47) 中播放一次。部署到生产服务器后，多次调用 play() 时，相同的音频可以正常工作。

在 Firefox 中，音频可以使用任一服务器正确播放。

我正在使用 Buzz (http://buzz.jaysalvat.com/) 虽然我在尝试直接使用音频 API 时遇到了同样的问题。

我的代码每 2 秒播放一次音频，如下所示：

```
var mySound = new buzz.sound( "/audio/hoversound", {
    formats: [ "ogg", "mp3", "wav" ]
});
setInterval(function() {
    mySound.play();
}, 2000); 
```

我的 app.yaml 有以下内容：

```
- url: /audio
  static_dir: static/audio
  mime_type: audio/ogg 
```

无论有无 mime_type，它的行为都相同。

请注意，在 Javascript 代码中将 URL 更改为“http://somewebsite.appspot.com/audio/hoversound”可以让示例播放多次。

这是 Chrome 中的错误，还是 AppEngine 开发服务器中的错误，还是两者的结合？

**编辑：**这是 Chrome 中的一个错误，如果服务器使用 200 OK 响应而不是 206 Partial-Content 返回文件，则它不支持音频搜索。这里有一个未解决的问题： [http](http://code.google.com/p/chromium/issues/detail?id=121765) ://code.google.com/p/chromium/issues/detail?id= 121765 AppEngine 开发服务器仅实现 HTTP 1.0，这就是问题出现的原因。

# networking - 从 WiFi 电子秤接收 TCP 数据

> ID：11505280
> 
> 赞同：0
> 
> 时间：2012-07-16T13:22:42.330
> 
> 标签：networking, tcp, listen

我本质上是在尝试利用现有的 WiFi 规模并开发一个程序来处理接收到的数据。我正在查看的秤有现有的软件，理想情况下，在这个项目结束时，我会用我自己的软件替换他们的软件。我过去开发了一些基本的网络通信程序，但对于这个项目，我可能需要了解设备和 PC 是如何通信的。

我以前没有真正使用过 Telnet 或 PuTTy，但是否可以使用这些程序来监听连接并显示所有传入和传出数据？

这是我正在查看的规模[http://www.withings.com/en/bodyscale](http://www.withings.com/en/bodyscale) 我希望他们使用 HID-Point of Scale

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:12:34.970

在查看了他们的规模用户指南后，您似乎无法设置规模与之对话的服务器，并且似乎没有任何消息规范/API 文档的迹象，其中详细说明了规模所涉及的协议。这将使它变得更复杂一些。

我首先设置 Wireshark 并嗅探秤执行的通信。然后你可以解码它使用的协议，这可能很简单。您可以编写一个理解该协议的服务器。最后一步是让秤与您的服务器而不是他们的服务器对话；这可能需要您设置自己的 dns 服务器并解析秤尝试连接的域名，以便它指向您运行服务器的机器。

另一种方法是使用 WinPcap（或类似软件）编写自定义数据包分析/捕获程序，然后只嗅探秤与其服务器之间的通信，并编写您自己的数据收集器/处理器来处理嗅探数据。

他们可能会提供一个 API，您可以在您的秤上传数据后使用该 API 从他们的服务器/站点中提取数据，这可能是最好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:27:50.993

PuTTY 是 Windows 的 SSH 客户端。您无法使用 PuTTY 监听流量。Telnet 是一个 Telnet 客户端。您可以与客户端连接到 TCP 端口并与具有纯文本协议的服务进行通信。我想 telnet 在你的情况下也没有用。

在这种情况下，嗅探和流量分析是一个坏主意。但如果你愿意，你可以使用 tcpdump、tshark、wireshark 等来完成。

据我了解，bodyscale 使用一些基于 Web 的 API 将其数据直接重新传输到 Web 服务。我想您以后可以从服务中获取这些数据（在它们被重新传输之后）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-08T16:03:43.737

今天我自己研究这个并发现了这个：[https](https://github.com/damonachey/Withings) ://github.com/damonachey/Withings 我意识到这是 4 年后的事了，不完全是你问的，但可能会给你预期的结果？

# c# - 有界数据更改后重新排序 WPF DataGrid

> ID：11505283
> 
> 赞同：34
> 
> 时间：2012-07-16T13:22:51.947
> 
> 标签：c#, wpf, data-binding, datagrid, collectionviewsource

当基础数据发生**变化**时，我正在寻找一种**重新排序**的方法。`DataGrid`

 **（设置非常标准：DataGrid 的`ItemSource`属性绑定到`ObservableCollection`; 列是`DataGridTextColumns`; DataGrid 内的数据对 ObservableCollection 内的更改做出正确反应；用鼠标单击时排序工作正常）

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-16T17:22:41.527

我花了整个下午，但我终于**找到了一个**非常*简单*、*简短*和*高效*的解决方案：

要控制相关 UI 控件（此处为 a `DataGrid`）的行为，可以简单地使用 a `CollectionViewSource`。它充当 ViewModel 中 UI 控件的一种代表，而不会完全破坏 MVMM 模式。

在 ViewModel 中声明 a`CollectionViewSource`和一个普通的`ObservableCollection<T>`并`CollectionViewSource`环绕`ObservableCollection`：

```
// Gets or sets the CollectionViewSource
public CollectionViewSource ViewSource { get; set; }

// Gets or sets the ObservableCollection
public ObservableCollection<T> Collection { get; set; }

// Instantiates the objets.
public ViewModel () {

    this.Collection = new ObservableCollection<T>();
    this.ViewSource = new CollectionViewSource();
    ViewSource.Source = this.Collection;
} 
```

然后在应用程序的 View 部分中，您无需将 的 绑定`ItemsSource`到`CollectionControl`View 的属性，`CollectionViewSource`而不是直接绑定到`ObservableCollection`：

```
<DataGrid ItemsSource="{Binding ViewSource.View}" /> 
```

从此时起，您可以使用`CollectionViewSource`ViewModel 中的对象直接操作 View 中的 UI 控件。

例如排序 - 这是我的主要问题 - 看起来像这样：

```
// Specify a sorting criteria for a particular column
ViewSource.SortDescriptions.Add(new SortDescription ("columnName", ListSortDirection.Ascending));

// Let the UI control refresh in order for changes to take place.
ViewSource.View.Refresh(); 
```

你看，非常非常简单和直观。希望这可以帮助其他喜欢它帮助我的人。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-16T18:22:00.377

这更多是为了澄清而不是答案，但 WPF**始终**绑定到一个`ICollectionView`而不是源集合。`CollectionViewSource`只是一种用于创建/检索集合视图的机制。

这是关于该主题的一个很好的资源，可以帮助您更好地利用 WPF 中的集合视图：[http ://bea.stollnitz.com/blog/?p=387](http://bea.stollnitz.com/blog/?p=387)

在 XAML 中使用`CollectionViewSource`实际上可以简化一些代码：

```
<Window.Resources>
    <CollectionViewSource Source="{Binding MySourceCollection}" x:Key="cvs">
      <CollectionViewSource.SortDescriptions>
        <scm:SortDescription PropertyName="ColumnName" />
      </CollectionViewSource.SortDescriptions>
    </CollectionViewSource>
</Window.Resources>

...

<DataGrid ItemsSource="{Binding Source={StaticResource cvs}}">
</DataGrid> 
```

有人争辩说，当遵循 MVVM 模式时，视图模型应该始终公开集合视图，但在我看来，这仅取决于用例。如果视图模型永远不会直接与集合视图交互，那么在 XAML 中配置它会更容易。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-07T23:35:27.767

sellmeadog 的答案要么过于复杂，要么已经过时。超级简单。你所要做的就是：

```
<UserControl.Resources>
    <CollectionViewSource 
        Source="{Binding MyCollection}" 
        IsLiveSortingRequested="True" 
        x:Key="MyKey" />
</UserControl.Resources>

<DataGrid ItemsSource="{Binding Source={StaticResource MyKey} }" >... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:52:06.003

我看不到任何明显简单的方法，所以我会尝试附加行为。这有点混蛋，但会给你你想要的：

```
public static class DataGridAttachedProperty
{
     public static DataGrid _storedDataGrid;
     public static Boolean GetResortOnCollectionChanged(DataGrid dataGrid)
     {
         return (Boolean)dataGrid.GetValue(ResortOnCollectionChangedProperty);
     }

     public static void SetResortOnCollectionChanged(DataGrid dataGrid, Boolean value)
     {
         dataGrid.SetValue(ResortOnCollectionChangedProperty, value);
     }

    /// <summary>
    /// Exposes attached behavior that will trigger resort
    /// </summary>
    public static readonly DependencyProperty ResortOnCollectionChangedProperty = 
         DependencyProperty.RegisterAttached(
        "ResortOnCollectionChangedProperty", typeof (Boolean),
         typeof(DataGridAttachedProperty),
         new UIPropertyMetadata(false, OnResortOnCollectionChangedChange));

    private static void OnResortOnCollectionChangedChange
        (DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
    {
      _storedDataGrid = dependencyObject as DataGrid;
      if (_storedDataGrid == null)
        return;

      if (e.NewValue is Boolean == false)
        return;

      var observableCollection = _storedDataGrid.ItemsSource as ObservableCollection;
      if(observableCollection == null)
        return;
      if ((Boolean)e.NewValue)
        observableCollection.CollectionChanged += OnCollectionChanged;
      else
        observableCollection.CollectionChanged -= OnCollectionChanged;
    }

    private static void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
    {
      if (e.OldItems == e.NewItems)
        return;

      _storedDataGrid.Items.Refresh()
    }
} 
```

然后，您可以通过以下方式附加它：

```
<DataGrid.Style>
  <Style TargetType="DataGrid">
    <Setter 
      Property="AttachedProperties:DataGridAttachedProperty.ResortOnCollectionChangedProperty" 
                                    Value="true" 
      />
   </Style>
 </DataGrid.Style> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-14T16:15:06.637

对于遇到此问题的其他任何人，这可能会让您入门...如果您有 INotifyPropertyChanged 项目的集合，则可以使用它而不是 ObservableCollection - 当集合中的单个项目更改时它将刷新：注意：因为这会标记项目删除然后读取（即使它们实际上并未被删除和添加）选择可能会不同步。对于我的小型个人项目来说已经足够了，但它还没有准备好发布给客户......

```
public class ObservableCollection2<T> : ObservableCollection<T>
{
    public ObservableCollection2()
    {
        this.CollectionChanged += ObservableCollection2_CollectionChanged;
    }

    void ObservableCollection2_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.OldItems != null)
            foreach (object o in e.OldItems)
                remove(o);
        if (e.NewItems != null)
            foreach (object o in e.NewItems)
                add(o);
    }
    void add(object o)
    {
        INotifyPropertyChanged ipc = o as INotifyPropertyChanged;
        if(ipc!=null)
            ipc.PropertyChanged += Ipc_PropertyChanged;
    }
    void remove(object o)
    {
        INotifyPropertyChanged ipc = o as INotifyPropertyChanged;
        if (ipc != null)
            ipc.PropertyChanged -= Ipc_PropertyChanged;
    }
    void Ipc_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        NotifyCollectionChangedEventArgs f;

        f = new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Remove, sender);
        base.OnCollectionChanged(f);
        f = new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add, sender);
        base.OnCollectionChanged(f);
    }
} 
```**

# asp.net - Facebook 提要参数“属性”在使用 C# SDK 时不起作用

> ID：11505286
> 
> 赞同：2
> 
> 时间：2012-07-16T13:23:04.313
> 
> 标签：asp.net, facebook, facebook-c#-sdk

我正在使用 Facebook C# SDK 6.0.20 并像这样发布到 facebook（服务器端流程）。

```
dynamic parameters = new ExpandoObject();
parameters.message = message;
parameters.description = description;
parameters.link = url;
parameters.name = url;
parameters.picture = smallImage;
parameters.caption = "www.mysite.com";
parameters.properties = new
{
    text = joinPrompter,
    href = url
};
parameters.actions = new
{
    name = joinPrompter,
    link = url
};
var api = new FacebookClient
{
    AccessToken = accessToken,
    AppId = ClientID,
    AppSecret = ClientSecret
};
result = api.Post("me/feed", parameters); 
```

除了我要传递的属性外，一切都很好。它在最后的帖子中显示为

> 文字：现在加入！
> 链接：[http ://www.mysite.com](http://www.mysite.com)

我发给我/提要的帖子可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:38:18.853

实际上属性应该在发布之前进行 JSON 编码。

```
JsonArray jsonArray = new JsonArray();
jsonArray.Add(new {
  text = joinPrompter,
  href = url
});

parameters.properties = jsonArray.ToString(); 
```

这是使用[facebook-c#-sdk](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk)内部使用的[SimpleJson](https://github.com/facebook-csharp-sdk/simple-json)的示例。

或者你可以简单地使用类似的东西：

```
parameters.properties = '[{"text":"Some text", "href":"http://example.com"}]'; 
```

**更新：**
似乎你可以使用`IList<object>`它应该由 Facebook C# SDK 自动编码：

```
IList<object> properties = new IList<object>();
properties.Add(new {
  text = joinPrompter,
  href = url
});
parameters.properties = properties; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:59:33.180

问题不在于出色的 Facebook C# SDK。问题在于我使用它的方式。`properties`应该这样使用

```
parameters.properties = new {
    URL = new
    {
        text = joinPrompter,
        href = url
    }
}; 
```

# php - Symfony2：在页面加载事件监听器中获取路由

> ID：11505287
> 
> 赞同：14
> 
> 时间：2012-07-16T13:23:08.267
> 
> 标签：php, symfony

如何在页面加载甚至监听器中获取路由？

我在 services.yml 中有以下代码：

```
 page_load_listener:
    class: Acme\MainBundle\EventListener\PageLoadListener
    arguments: [@security.context, @session]
    tags:
        - { name: kernel.event_listener, event: kernel.controller, method: onKernelController, priority: 64 } 
```

在 PageLoadListener 类中，我有相应的方法：

```
 public function onKernelController(FilterControllerEvent $event)
    {

        // Some code I need to execute that needs the route arguments

    } 
```

问题似乎是路由和参数不可用。我错过了什么？

**我需要通过哪个事件来获取路线及其参数？**

谢谢，

JB

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-16T14:08:21.240

所有内核事件都扩展[`KernelEvent`](https://github.com/symfony/symfony/blob/2.0/src/Symfony/Component/HttpKernel/Event/KernelEvent.php)，这意味着您可以简单地`Request`通过`$event->getRequest()`.

```
public function onKernelController(FilterControllerEvent $event)
{
    $request = $event->getRequest();

    // Matched route
    $_route  = $request->attributes->get('_route');

    // Matched controller
    $_controller = $request->attributes->get('_controller');

    // All route parameters including the `_controller`
    $params      = $request->attributes->get('_route_params');
} 
```

如果您想获得普通的路由属性，只需过滤掉所有以“_”为前缀的元素。

选择要收听的正确事件取决于您的特定用例。

# c# - 在线程管理类中正确放置锁对象

> ID：11505291
> 
> 赞同：0
> 
> 时间：2012-07-16T13:23:24.520
> 
> 标签：c#, multithreading, locking

我正在尝试创建一个`ThreadManager`对象来处理应用程序期间创建的线程。

整个目的是在关闭主线程之前终止线程，`Form`并且在关闭期间不允许创建新线程。如您所见，我在整个线程创建代码以及内部应用了锁定`AllowNewThreads`。

我很确定有时会有 2 个或更多新线程在锁上等待，这不是**很**糟糕，但可能会导致小的延迟。是否有另一种锁定位置的替代方案以获得更好的结果，或者可能是我尚未考虑的另一种策略？

```
public class ThreadManager
{
    #region Fields
    private List<Thread> _threads;
    private static Logger _logger = LogManager.GetCurrentClassLogger();
    private static object _lock;
    private bool _allowNewThreads;
    #endregion

    #region Properties

    public bool AllowNewThreads
    {
        get
        {
            return _allowNewThreads;
        }
        set
        {
            lock (_lock)
            {
                _allowNewThreads = value;
            }
        }
    }

    public int CountAlive
    {
        get
        {
            int count = (from t in _threads where (t.IsAlive) select t).Count();
            return count;
        }
    }
    #endregion

    #region Constructors
    private ThreadManager()
    {
        _threads = new List<Thread>();
    }

    public static ThreadManager Instance
    {
        get { return Singleton<ThreadManager>.Instance; }
    }
    #endregion

    #region Methods

    // There must always be thread body in order to create a new thread.
    // Thread parameters are the objects that are needed for calculations etc inside the thread and are optional
    // Start info is the thread itself parameters needed for its creation, such as the thread name, the apartment state 
    // and if it's background or not. That information is optional as well.
    public bool TryAddThread(ParameterizedThreadStart threadBody, object threadParams, ThreadStartInfo startInfo)
    {
        bool success = true;
        try
        {
            lock (_lock)
            {
                if (!AllowNewThreads)
                {
                    throw new Exception("Creation of new threads is denied.");
                }

                Thread f = new Thread(threadBody);

                if (startInfo != null)
                {
                    f.Name = startInfo.Name;
                    f.SetApartmentState(startInfo.ApartmentState);
                    f.IsBackground = startInfo.IsBackground;
                }

                if (threadParams != null)
                {
                    f.Start(threadParams);
                }
                else
                {
                    f.Start();
                }

                _threads.Add(f);
            }
        }
        catch (Exception ex)
        {
            _logger.ErrorException("AddThread", ex);
            success = false;
        }
        return success;
    }
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:11:21.100

正如您在评论中提到的，您将等到线程完成工作。因此，您可以使用 代替手动管理线程`ThreadPool`，因为它对于短期工作更有效。对于长时间运行的任务，我会使用`Task`可用于 .NET 3.5 的类（支持取消！）（我认为 Rx 支持它，也许还有更简单的方法）。

线程是非常重的对象，它们的管理可能会成为您应用程序的一个棘手部分。

* * *

还有一个关于锁定对象的评论（在编辑之前），您应该尝试确保整个应用程序中每个类只有一个对象可以锁定线程，否则您会遇到令人讨厌的错误。

# javascript - 简单的 Javascript 表单验证代码问题

> ID：11505296
> 
> 赞同：0
> 
> 时间：2012-07-16T13:23:34.663
> 
> 标签：javascript, forms, validation

基本上我正在尝试编写一些用于表单验证的代码，我对此很陌生，但我认为可以管理吗？我的问题基本上是这样的，我为表单中的 3 个输入创建了 3 个验证方法，但我不太确定如何将所有 3 个方法添加到一键单击中？

到目前为止，我的代码是：

```
function validation() {
  function validateName() {
    console.log("reaching here");

    var name = document.getElementById("full_name");

    if (name.value.length == 0) {
      document.getElementById("okName").className = "fail";
    }else{
      document.getElementById("okName").className = "success";
    }
  }//End of validate name

  function validateEmail() {
    var email = document.getElementById("email");

    if (email.value.length == 0) {
      document.getElementById("okEmail").className = "fail";
    }else{
      document.getElementById("okEmail").className = "success";
    }
  }//end of validate email

  function validatePhone() {
    var phone = document.getElementById("phone");

    if (phone.value.length == 0) {
      document.getElementById("okPhone").className = "fail";
    }else{
      document.getElementById("okPhone").className = "success";
    }
  }//End of validate phone
}//End of validation function 
```

我还尝试从单个函数中删除所有验证方法，并将它们放在一个函数中，但这也不起作用？如果有人能阐明我哪里出错了，那就太好了！提前干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:34:15.670

尝试将`onclick()`事件附加到您的提交按钮 - [http://jsfiddle.net/zWrUM/](http://jsfiddle.net/zWrUM/)

```
<button onclick="validation();">validate</button>

<script>
function validation() {
    var name = document.getElementById("full_name");
    if (name.value.length == 0) {
      document.getElementById("okName").className = "fail";
        alert("error 1");
        return false;
    }else{
      document.getElementById("okName").className = "success";
    }

    var email = document.getElementById("email");
    if (email.value.length == 0) {
      document.getElementById("okEmail").className = "fail";
        alert("error 2");
        return false;
    }else{
      document.getElementById("okEmail").className = "success";
    }

    var phone = document.getElementById("phone");
    if (phone.value.length == 0) {
      document.getElementById("okPhone").className = "fail";
        alert("error 3");
        return false;
    }else{
      document.getElementById("okPhone").className = "success";
    }

    alert("success")
}//End of validation function
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:28:05.223

你可以看看[`addEventListener`](https://developer.mozilla.org/en/DOM/element.addEventListener)和oldIE类似的方法。

# php - PHP中一条语句中的最后两行代码

> ID：11505298
> 
> 赞同：1
> 
> 时间：2012-07-16T13:23:41.927
> 
> 标签：php

为了优化我的代码，如何将最后两行代码写在一个语句中？

```
$v1 = functionName;
$strR = "get".$v1;
echo $obj->$strR(); 
```

正如我想得到的`$obj->getfunctionName()`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T13:25:35.713

您可以将其包含在其中`{}`以缩短代码，但这在执行速度方面不会产生显着差异（如果有的话）：

```
echo $obj->{"get" . $v1}(); 
```

此功能在[PHP5 OOP 介绍页面](http://us3.php.net/manual/en/language.oop5.php)上的用户提供的评论中进行了描述，尽管我不认为该官方文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:30:41.497

另一种没有优化的方法：

```
<?
Echo "\$obj->getfunctionName();";
?> 
```

# python - 迭代嵌套列表、元组和字典

> ID：11505304
> 
> 赞同：3
> 
> 时间：2012-07-16T13:24:10.557
> 
> 标签：python, loops

我对[Iterate over nested lists and dictionaries](https://stackoverflow.com/questions/11501090/iterate-over-nested-lists-and-dictionaries)的主题还有另一个问题。

对于上面链接的主题，我需要一些扩展功能。可迭代元素现在还包含**元组**。元组中的整数也需要转换为十六进制字符串。因此，我尝试使用以下代码将元组转换为列表。

```
for path, value in objwalk(element):
    if isinstance(value, tuple):
        parent = element
        for step in path[:-1]:
            parent = parent[step]
        parent[path[-1]] = list(value) 
```

但我的问题是，元组中的元组没有被转换。如何以优雅的方式将“子元组”转换为列表？

最好的问候

PS：我创建了一个新主题，因为另一个主题对我来说是固定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:20:10.397

`objwalk`在这种情况下，直接在结构遍历器中处理元组会更容易。这是一个修改后的版本，它在遍历元组以查找嵌套元素之前将其转换为列表：

```
def objwalk(obj, path=(), memo=None):
    if memo is None:
        memo = set()
    iterator = None
    if isinstance(obj, dict):
        iterator = iteritems
    elif isinstance(obj, (list, set)) and not isinstance(obj, string_types):
        iterator = enumerate
    if iterator:
        if id(obj) not in memo:
            memo.add(id(obj))
            for path_component, value in iterator(obj):
                if isinstance(value, tuple):
                    obj[path_component] = value = list(value)
                for result in objwalk(value, path + (path_component,), memo):
                    yield result
            memo.remove(id(obj))
    else:
        yield path, obj 
```

使用您上一个问题中稍作修改的示例，以及`hex`我在该问题中给您的相同解决方案：

```
>>> element = {'Request': (16, 2), 'Params': ('Typetext', [16, 2], 2), 'Service': 'Servicetext', 'Responses': ({'State': 'Positive', 'PDU': [80, 2, 0]}, {})}
>>> for path, value in objwalk(element):
...     if isinstance(value, int):
...         parent = element
...         for step in path[:-1]:
...             parent = parent[step]
...         parent[path[-1]] = hex(value)
... 
>>> element
{'Params': ['Typetext', ['0x10', '0x2'], '0x2'], 'Request': ['0x10', '0x2'], 'Responses': [{'State': 'Positive', 'PDU': ['0x50', '0x2', '0x0']}, {}], 'Service': 'Servicetext'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:29:35.923

如果创建新对象的开销不是问题，我认为很明显可以使用：

```
def transform(obj):
    _type = type(obj)
    if _type == tuple: _type = list
    rslt = _type()
    if isinstance(obj, dict):
        for k, v in obj.iteritems():
            rslt[k] = transform(v)
    elif isinstance(obj, (list, tuple)):
        for x in obj:
            rslt.append(transform(x))
    elif isinstance(obj, set):
        for x in obj:
            rslt.add(transform(x))
    elif isinstance(obj, (int, long)):
        rslt = hex(obj)
    else:
        rslt = obj

    return rslt

element = transform(element) 
```

# web-services - 跨越多个请求的 Web 服务中的套接字连接

> ID：11505305
> 
> 赞同：1
> 
> 时间：2012-07-16T13:24:12.567
> 
> 标签：web-services, sockets

我有一个客户端使用的 Web 服务。该 Web 服务将通过 TCP 与另一个服务通信。在 Web 服务中，我想建立和维护一个套接字连接，以便对 Web 服务的调用将重用该套接字连接。

不幸的是，我找不到有关此技术的任何信息，因此我不知道利弊。这是已知模式还是反模式？这叫什么？

我找到了关于“keep-alive”的信息，但我相信这种模式是指 Web 服务客户端通过多个请求保持连接打开。我不确定这是否相同，因为在这种情况下我的服务是客户端并且它是 TCP 连接。

# sql-server - SSRS 对范围内的值进行分组

> ID：11505311
> 
> 赞同：0
> 
> 时间：2012-07-16T13:24:42.583
> 
> 标签：sql-server, reporting-services, range, grouping

我正在尝试构建分组数据的频率直方图，其中我沿 x 轴的初始值是浮点数。例如，我有数据库中每个项目的货币价值，我想计算价值介于 0 到 49、50 到 99、100 到 149 之间的项目的数量，依此类推。

如上所述，我如何在 SSRS 中对我的数据进行分组？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:34:41.927

我实际上并没有 SSRS 工具，但我记得您可以通过转到`CustomAttribute` 类别来设置默认分组，您可以在图表的属性窗口中找到它。在该类别中，您有一个名为 .You 的属性`HistogramSegmentIntervalWidth`。您可以设置值为 50

MSDN 文档：- [HistogramSegmentIntervalWidth](http://msdn.microsoft.com/en-us/library/dd220610%28v=sql.100%29.aspx)

# android - 如何在andEngine中使用字体和文本？

> ID：11505314
> 
> 赞同：4
> 
> 时间：2012-07-16T13:24:50.540
> 
> 标签：android, andengine

这就是我尝试这样做的方式：

```
fontTextureAtlas = new BitmapTextureAtlas(1024, 1024, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
font = FontFactory.createFromAsset(fontTextureAtlas,this,"times.ttf",45f,true,Color.WHITE);
getEngine().getTextureManager().loadTexture(fontTextureAtlas); 
```

然后，在代码中：

```
Text text = new Text(10,10, font,"Some text");
scene.attachChild(text); 
```

我所看到的就是：

![黑块而不是文本](../Images/3db17a2f23831a65b9c7f3d58b469786.png)

我也尝试使用`new Font(fontTextureAtlas,Typeface.DEFAULT,45f,true,Color.WHITE);`初始化`font`，但结果几乎相同。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T13:35:46.517

尝试添加`font.load();`后 `getEngine().getTextureManager().loadTexture(fontTextureAtlas);`

如果这不起作用，请尝试

```
getEngine().getFontManager().loadFont(font); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-02T17:03:50.410

这对我有用

```
FontFactory.SetAssetBasePath("fontfolder/");

mFont = FontFactory.createFromAsset(mEngine.getFontManager(),
            mEngine.getTextureManager(), 256, 256, TextureOptions.BILINEAR,
            activity.getAssets(), "QUARTZMS.TTF", 32f, true,
            Color.YELLOW_ARGB_PACKED_INT);
    mFont.load(); 
```

然后我只是添加`mText = new Text(25, 25, mFont, "Some Text",getVertexBufferObjectManager());`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T12:03:26.563

我在 andengine 中写了一篇关于文本的博客文章，这可能会有所帮助[http://stuartmct.co.uk/2012/07/16/andengine-creating-and-using-text/](http://stuartmct.co.uk/2012/07/16/andengine-creating-and-using-text/)

# android - 安卓连接oracle数据库

> ID：11505315
> 
> 赞同：1
> 
> 时间：2012-07-16T13:24:52.933
> 
> 标签：android, database, oracle

嗨，我在连接到 oracle 数据库时遇到问题。当我在模拟器中启动我的应用程序时，它工作得很好。但是当我尝试在手机上运行它时它崩溃了。我收到以下错误：

> detailMessage "Io 异常：网络适配器无法建立连接

我的连接代码是：

```
 try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
    Connection conn;
    try {
        conn = DriverManager.getConnection("jdbc:oracle:thin:@ip:port/dtabase name","user", "port"); 
```

那么关于什么可能是一个问题的任何想法？我的手机开启了数据连接...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:29:40.790

我猜你要么没有在清单中请求互联网权限，要么你使用的是本地 IP，而你的设备正在尝试通过 WAN 而不是 LAN 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:14:04.567

不建议将移动设备直接连接到 RDBMS。这在技术上是可行的，但存在严重的安全隐患，更不用说性能、电池寿命等了。

Oracle 实际上提供了一种专为将移动设备连接到 Oracle 后端而设计的产品：Oracle Database Mobile Server。

[http://www.oracle.com/technetwork/products/database-mobile-server/overview/index.html](http://www.oracle.com/technetwork/products/database-mobile-server/overview/index.html)

您可以在那里阅读它，也可以从下载选项卡下载并试用它。除了 Oracle 数据库，您还需要一个应用服务器。推荐使用 WebLogic 或 Glassfish。

它提供了几个优点，主要优点是能够将来自 Android 设备的 SQLite 数据与 Oracle 后端同步，而无需任何额外的开发工作。您可以获得应用程序在断开连接模式下运行的能力，并且它提供了一些基本的设备管理功能。

祝你的项目好运。

Eric Jensen，甲骨文产品经理

# vba - Excel/Access 中 ADO 连接的“打开”方法错误

> ID：11505316
> 
> 赞同：1
> 
> 时间：2012-07-16T13:24:53.117
> 
> 标签：vba, ado

尝试在 VBA 中使用 ADO 连接打开数据库时，我不断收到错误消息 - 我收到以下错误消息：

运行时错误“-2147467259 (80004005)”：对象“_Recordset”的方法“打开”失败

我已经检查并重新检查了我的所有文件路径和语法，但找不到下面的代码有什么问题 - 任何人都可以帮忙吗？

```
Public Sub PlainTextQuery()

Dim rsData As ADODB.Recordset
Dim sConnect As String
Dim sSQL As String

Dim sCusip As String

sCusip = Trim(Range("cusip").Value)

' Create the connection string
sConnect = "Provider=Microsoft.ACE.OLEDB.12.0; " & _
    "Data Source=C:\Users\intern\Documents\NewStuff\ResiOffers_v1.accdb;"

' Create the SQL statement
sSQL = "SELECT Date, Cusip, Bond, OF, CF, Dealer, Price, Matcher, DayCount, MktValue " & _
    "FROM ResiOffersColor " & _
    "WHERE Cusip = 16163HAE1 " & _
    "ORDER BY Date;"

' Create the recordset object and run the query
Set rsData = New ADODB.Recordset
rsData.Open sSQL, sConnect, adOpenForwardOnly, _
    adLockReadOnly, adCmdText

' Make sure we get records back
If Not rsData.EOF Then
    ' Dump the contents onto the worksheet
    Sheet2.Range("A2").CopyFromRecordset rsData
    ' Close the recordset object
    rsData.Close
Else
    ' Close the recordset object
    rsData.Close
    MsgBox "Error: No records returned.", vbCritical
End If

' Destroy the recordset object
Set rsData = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T09:17:15.450

这里的问题是`sSQL`声明。
这一行：

```
"WHERE Cusip = 16163HAE1 " & _ 
```

应替换为：

```
"WHERE Cusip = '16163HAE1' " & _ 
```

在 SQL 中，您将字符串或文本用`'`（撇号）括起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:31:47.560

Whomever is executing the function must have write access to the directory because ms-access is going to try to create a lock (ldb) file.

# vim - ^I 在 vi m 中的含义以及如何不显示它们？

> ID：11505318
> 
> 赞同：25
> 
> 时间：2012-07-16T13:24:59.997
> 
> 标签：vim

由于我`:set list`在 Vim 中，我经常`^I`在一些 C 文件的开头看到奇怪的字符。这些是标签的列表字符还是它们的含义？我怎样才能将它恢复正常？我只想看到行尾字符。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-16T13:27:30.993

它们是标签。默认情况下，VIM 显示除 EOL 之外的所有控制字符，`^n`其中`n`是与显示字符相对应的字母表字符（tab = char #9，`I`= 字母表中的第 9 个字符）。要停止显示它们，请使用`:set nolist`，但这也会关闭 EOL 显示。

如果您想看到行尾字符而不是制表符，您可以使用`listchars`它。用于`:help listchars`详细信息，但大致：

```
:set listchars=tab:\ \ ,eol:$
```

也就是说，在显示选项卡时，为它占用的第一个虚拟空间显示一个空间，为后续的虚拟空间显示一个空间；显示 EOL 时，使用`$`. （由于选项卡可以跨越多个虚拟列，因此您可以使用两个不同的字符，一个用于第一列，一个用于其他列。）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-16T18:03:39.527

除了 TJ Crowder 的[回答](https://stackoverflow.com/a/11505369/11573842)之外，另一种选择是使标签更令人赏心悦目：

```
set listchars=tab:▸\ ,eol:¬ 
```

# android - Android ADT：扩展 android.widget.EditText - 运行时类转换异常

> ID：11505319
> 
> 赞同：0
> 
> 时间：2012-07-16T13:25:08.853
> 
> 标签：android

我有一个简单的应用程序，它将有一堆 EditTexts 采用数值，以及它们之间的各种计算。就像一个单位转换工具。

因此，我将 CalcField 定义为 EditText 的子类，以用作仅包含浮点值的字段，并带有一些额外的方法，例如：

```
package com.example.ex1;
import android.content.Context;
import android.widget.*;
public class CalcField extends EditText {

// no idea why this is needed.  without it i'm told an explicit constructor needed.
public CalcField(Context c) {
    super(c);
}

public void setValue(float d) {
    setText(String.valueOf(d));
}
public float getValue() {
    return Float.valueOf(getText().toString());
}
} 
```

==

在我的布局中，我定义了一个字段 X，如下所示：

```
 <EditText
            android:id="@+id/X"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="numberDecimal" /> 
```

在我的主要活动中，我尝试从我的布局中获取该字段，如下所示：

```
 CalcField fieldX = (CalcField) findViewById(R.id.X); 
```

这给出了一个我不明白的类转换异常：

```
07-16 21:23:49.049: E/AndroidRuntime(1429): FATAL EXCEPTION: main
07-16 21:23:49.049: E/AndroidRuntime(1429): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.ex1/com.example.ex1.MainActivity}: java.lang.ClassCastException: android.widget.EditText cannot be cast to com.example.ex1.CalcField
07-16 21:23:49.049: E/AndroidRuntime(1429):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956) 
```

谁能告诉我为什么我不能做这个简单的类型转换？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:27:21.787

改变这个

```
 <EditText
        android:id="@+id/X"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="numberDecimal" /> 
```

至

```
 <com.example.ex1.CalcField
        android:id="@+id/X"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="numberDecimal" /> 
```

# c# - 如何将整数变量保存到 XML 文件？

> ID：11505320
> 
> 赞同：0
> 
> 时间：2012-07-16T13:25:08.877
> 
> 标签：c#, xml, xna

我知道如何从 XML 文件中读取内容，但我不知道如何向其中写入内容。

例如，我从 XML 文件中读取一个整数变量并对其进行修改。修改后，我想将整数变量保存到同一个 XML 文件中。旧整数值必须替换为新值。我的游戏在 Windows 7 上运行。

我使用以下代码加载 XML 文件：

```
protected override void LoadContent()
{
    scorexml = Content.Load<List<Gamescore>>("Score");
    foreach (Gamescore score in scorexml)
    {
        score.Load(Content);
    }   
}  

public class Gamescore
{
    int score;
    public int Score
    {
        get { return score; }
        set { score = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:37:36.983

我可以建议你两种方法。

1.  使用代表您的 XML 并实现[ISerializable 接口](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializable.aspx)的类：
    *   将 xml 反序列化为对象，类的实例。
    *   处理数据（设置整数值或其他）。
    *   将对象序列化到 xml 文件中。
2.  使用[Linq to XML](http://msdn.microsoft.com/en-us/library/bb387061.aspx)处理 XML：
    *   从 xml 文件创建一个 XDocument。
    *   使用 Linq 处理 XDocument。
    *   将 XDocument 保存到 xml 文件中。

# sql - 将行与单独表中的 DISTINCT 版本相关联

> ID：11505321
> 
> 赞同：0
> 
> 时间：2012-07-16T13:25:11.757
> 
> 标签：sql, postgresql, distinct

我有一个包含几百万行的 Postgres 9.1.4 表。一个非常小的版本可能是这样的：

**掌握**

```
index  location
----------------
1      A
2      C
3      B
4      C
5      C
6      A 
```

我需要对*位置*字段中的每个不同值进行昂贵的计算。我不想使用*主*表中的这个字段，因为我会重复处理同一个位置。我想要一个具有不同*location*值的表，计算结果将存储在*计算*字段中：

**清楚的**

```
index  location  calculation
------------------------------
1      A'        X
2      C'        Y
3      B'        Z 
```

填充**distinct后，** *master*和*distinct*之间的关系不容易确定。我必须做一些数据操作才能使位置在计算中起作用。*我真的需要第三张表，大致在我填充distinct*的同时创建，以帮助我将 distinct 中的每个条目与*master**中*的父项相关联。

 *****第三个表可能如下所示：

**相关性**

```
master_index  distinct_index
------------------------------
1             1
2             3
3             2
4             3
5             3
6             1 
```

问题是我看不到如何使用任何简单的 SQL 来完成。我可以使用这样的东西作为查询的开头来填充*distinct*：

```
SELECT location, array_agg(index)
FROM master
GROUP BY location; 
```

问题是我需要另一个*不同*的数组列来保存这些值，然后我需要使用其他一些程序来解析数组并构造*相关*表。

我错过了一种更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:53:47.763

您可以按如下方式创建“不同”表（尽管我提醒您避免使用 SQL 关键字作为表名作为列）：

```
create table TDistinct as
    select m.location, min(index) as TDindex, <whatever> as calculation
    from master m
    group by m.location 
```

创建关联表为：

```
create table correlation as
    select m.index as MasterIndex, td.TDIndex
    from master m join
         TDistinct td
         on m.location = td.location 
```

这些工作，但你可能想要更有效的东西。创建表后，您可以添加索引以提高效率。您还可以执行其他技巧，例如使用自动递增的主键预先创建不同的表，并将其用作不同的索引。然后，您将使用 insert 将数据加载到查询中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T18:21:20.000

您所描述的不是 n:m 而是**1:n 关系**。因此，您根本不需要`correlation`表来实现关系。

在具有“几百万行”的表中冗余拼写位置是次优设计。你应该**规范它**。大桌子会缩小很多（让一切都更快）。将该列替换为`master.location`引用专用表的新主键的外键列`location`。这就是它*应该*的方式。

表`master`：

```
master_id  loc_id  ...
-----------------
1          1       ...
2          2
3          3
4          3
5          3
6          1 
```

表`location`：

```
loc_id  loc  loc_derived calc
-----------------------------
1       A    A'          X
2       C    C'          Y
3       B    B'          Z 
```

昂贵的计算似乎需要在`calc`. `loc_derived`但是您的问题中没有关于列的计算。如果它不是很昂贵（并且定期使用），则不应将其包含在`location`表中，而应为其创建视图或[函数（生成的列）](https://stackoverflow.com/q/11165450/939860)。

通常，您会在`master`和之间添加外键约束`location`以保证关系完整性。`master`将来，您将在添加引用它的行之前添加一个位置。

### 如何到那？

1.  `location`使用代理整数主键 ( )创建表`loc_id`。

    ```
    CREATE TABLE location (
     loc_id serial
    ,loc text
    ,loc_derived  text  -- you really need redundant storage here?
    ,calc text          -- seems you need redundant storage here.
    ); 
    ```

    有些人会建议将`loc`自己用作*自然主键*。我不在其中，我认为这是一个坏主意。

    *   文本列上的字符串操作和索引比处理整数要慢得多。
    *   如果您遇到（中间）重复的位置名称，则很难更改位置名称。
    *   对位置名称的每次更改都会触发依赖表中的其他更新——代理键不会发生这种情况。
    *   大`master`表将小得多，只需一个整数而不是整个字符串来引用该`location`表。
2.  填写新`location`表（我会使用 CTE 进行计算）。

    ```
    WITH x AS (
        SELECT DISTINCT loc
        FROM master
        )
    INSERT INTO location (loc, loc_derived, calc)
    SELECT loc, some_calc(loc), some_expensive_calc(loc)
    FROM   x; 
    ```

3.  将 loc_id 添加到主表。

    ```
    ALTER TABLE master ADD COLUMN loc_id integer; 
    ```

4.  填写列`loc_id`。

    ```
    UPDATE master m
    SET    loc_id = l.loc_id
    FROM   location l
    WHERE  l.loc = m.loc; 
    ```

5.  删除列`master.loc`。

    ```
    ALTER TABLE master DROP COLUMN loc; 
    ```

6.  真空/分析。

    ```
    VACUUM ANALYZE; 
    -- VACUUM FULL ANALYZE
    -- much slower, only to shrink the table and return disk space. 
    ```

7.  添加 fk 约束。

    ```
    ALTER TABLE master
    ADD CONSTRAINT master_loc_id_fkey FOREIGN KEY (loc_id)
    REFERENCES location(loc_id); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:30:27.967

您可以仅使用主表和不同表来执行此操作。您的不同列表（即使来自多个字段）实际上是您的外键的基础。不同表的唯一值将与主表具有一对多的关系。如果将主表位置数据上的索引和不同表位置数据上的唯一索引重新组合在一起，则将有助于提高性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:54:13.267

我已经完成了这个 SQL 服务器。我想这就是你要找的

您可以使用查询创建不同的表

```
select MIN("index") "index",location from tmaster
group by location 
```

以及下面查询的相关表

```
select M."index" master_index,A."index" distinct_index
 from tmaster M left outer join 
(select MIN("index") "index",location from tmaster
group by location)A
on A.location=M.location 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T14:40:13.283

您不需要将相关性放入表中，视图或 CTE 就足够了：（顺便说一句：索引是保留字；我用 zindex 替换了它（没有以 Z 开头的 SQL 关键字，对于 zDISTINCT 也是如此）

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp;
SET search_path=tmp;

-- Make some data ...
CREATE TABLE master
        ( zindex INTEGER NOT NULL PRIMARY KEY
        , location CHAR(1) NOT NULL
        );
INSERT INTO master(zindex,location) VALUES
 (1, 'A')
,(2, 'C')
,(3, 'B')
,(4, 'C')
,(5, 'C')
,(6, 'A')
        ;

    -- a view with a CTE inside
CREATE VIEW correlation AS (
        WITH zdistinct AS (
                SELECT MIN(m.zindex) AS zindex
                , m.location AS location
                FROM master m
                GROUP BY m.location
                )
        SELECT m.zindex AS master_index
                , d.zindex AS distinct_index
        FROM master m
        JOIN zdistinct d ON m.location = d.location
        );

SELECT * FROM correlation; 
```

而且，顺便说一句：zdistinct CTE 与原始问题中的“distinct”表大致相同。只需添加“计算”字段，您就到家了。（你可以先把它放到一个单独的视图中）*****

# actionscript-3 - AIRKinect 与 Kinect for Windows on OSX 10.7.4

> ID：11505322
> 
> 赞同：0
> 
> 时间：2012-07-16T13:25:11.420
> 
> 标签：actionscript-3, air, kinect, openkinect

我目前正在尝试使用 AirKinect 2 在 OSX 10.7 上运行新的适用于 Windows 的 Kinect。到目前为止，我没有运气。

这是我到目前为止所做的：

*   我使用了来自[http://as3nui.github.com/airkinect-2-core/的代码](http://as3nui.github.com/airkinect-2-core/)

*   在[http://code.google.com/p/simple-openni/wiki/Installation#OSX](http://code.google.com/p/simple-openni/wiki/Installation#OSX) 我做了“安装 OpenNI 的捷径”方法....没有错误。

*   我安装了[https://github.com/avin2/SensorKinect](https://github.com/avin2/SensorKinect)的东西。

然后我想验证设备是否工作。我使用了这个应用程序[http://www.thingiverse.com/thing:18425](http://www.thingiverse.com/thing:18425) 但它无法识别该设备。

在 FDT 5.5 中，我有一个使用 AirKinect Native Extension/ane 的示例项目。

它所做的只是检查 Kinect.isSupported() 但我经常收到以下错误：

错误 #3500：扩展上下文没有名为 applicationStartup 的方法。

目前我被困在这里。是否缺少驱动程序？有人在 OSX 10.7 上安装了适用于 Windows 的 AirKinect + Kinect 吗？

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:51:12.913

首先，确认 OpenNI 工作正常。它应该带有一些非常基本的非 AIR 样本。如果样本不起作用，则驱动程序可能有问题。

据我从 GitHub 上收集到的信息，avin2 的 SensorKinect 分支尚不支持 Kinect for Windows 传感器。有一个待处理的[拉取请求](https://github.com/avin2/SensorKinect/pull/2)，显然添加了缺失的功能。[您可以在此处](https://github.com/shenberg/SensorKinect/tree/unstable/Bin)找到支持 Windows 的 Kinect 二进制文件。

现在，OpenNI 示例应该可以工作了。再次尝试您的 AIRKinect 测试。如果失败，请考虑使用[AIRKinect 开发存储库](https://github.com/AS3NUI/airkinect-2-core/tree/dev/bin)中的 ANE - 那里的构建更新比主分支更频繁。

但请记住：我既没有尝试过这种方法，也没有能力这样做。我只是命名一些常见的问题来源及其解决方案。

# c++ - 将 'const char [6]' 转换为 'WCHAR**

> ID：11505328
> 
> 赞同：0
> 
> 时间：2012-07-16T13:25:22.200
> 
> 标签：c++

我是 C++ 新手，有人可以帮我解决这个错误：无法转换`'const char [6]'`为`'WCHAR** {aka wchar_t**}'`

我的代码如下：

```
const char name[]   = "madz";
void method1(LPCWSTR lpServer, LPWSTR* lpNameBuffer,
        PNETSETUP_JOIN_STATUS BufferType)
{

    lpNameBuffer = name;
    return NERR_Success;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:28:46.100

也许你想要类似的东西[`mbstowcs()`](http://msdn.microsoft.com/en-us/library/k1f9b8cy.aspx)：

```
char input[6] ="qwerty";
wchar_t output[6];
mbstowcs( output, input, 6 ); 
```

上面的代码会将“qwerty”字符串转换`wchar_t`为*输出*数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:29:28.887

使用 MultiByteToWideChar 函数。

[http://msdn.microsoft.com/en-us/library/bb202786.aspx](http://msdn.microsoft.com/en-us/library/bb202786.aspx)

# django - Django 表演——神秘的 11 秒

> ID：11505336
> 
> 赞同：1
> 
> 时间：2012-07-16T13:25:47.983
> 
> 标签：django, performance

我遇到了一些让我感到困惑的性能问题。我正在将 Django 与 MySQL 一起使用。我执行以下操作：

1\. 使用 Ajax 从网页发送数据。

2\. 在 Views.py 中接收 post 数据并通过许多函数调用对其进行处理，将数据插入 MySQL。我做的第一件事是设置一个 Python 变量 timeStart。在返回响应之前，我要做的最后一件事是计算处理数据的时间：

```
processTime = time.clock() - timeStart 
```

我使用渲染到响应发送响应，其中响应是 processTime。

3\. processTime 显示在网页上。

processTime 为 1.5 秒，但从通过 Ajax 发送数据到收到响应的总时间为 13 秒。11.5 秒来呈现一个简单的页面并发送和接收数据 - 这是一个很长的时间。但后来它变得更奇怪了。我缩短了 views.py 函数，几乎立即发回了响应。这将处理时间从 1.5 秒减少到几乎 0。但它也将总时间从 13 秒减少到大约 2 秒。这似乎表明，事实上，数据处理速度很慢。但是，这并不能解释计算出的 processTime 仅达到 1.5 秒。我确实在第一行设置了 startTime，并在最后一行计算了 processTime。StartTime 不会被覆盖。

就好像有某种清理过程或与完成和发送响应相关的东西，这取决于函数调用。但是什么？或者我在计算时间时做了一些愚蠢的事情？我已设置调试 = False。

编辑 - 额外信息：

该模板仅包含单词“hello”和 {{result}}。我没有返回任何查询集，只是 processTime: {'result':processTime}

当我使用 MySQL 存储函数时，似乎可能会出现时差。就像它正在返回结果，但仍然在做某事？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:58:39.167

您没有提供有关如何返回响应的正确详细信息，但我猜您正在做这样的事情：

```
data = MyModel.objects.all()
processTime = time.clock() - timeStart 
return render_to_response('my_template.html, {'processTime': processTime,
                                              'data': myqueryset}) 
```

因此，processTime 的计算与创建响应时发生的最后一件事相去甚远，因为*整个*模板渲染都是在之后进行的。有两个元素你打折了：渲染模板本身的成本，远不便宜（Django 的模板语言不是特别高效）；以及任何数据库调用的成本：例如，`MyModel.objects.all()`我在下面给出的查找实际上不会到达数据库，直到它在模板中迭代，所以这将在您的 processTime 计算之后。

在任何情况下，您都应该研究 Django 调试工具栏，它可以为您提供更好的渲染时间细分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:13:10.620

问题在于我测量 processTime 的方式。我需要使用 time.time()，而不是 time.clock()。time.clock() 告诉我我只花了 1.5 秒，但这显然只是 CPU 时间，而不是实际时间。在 view.py 中花费的实际时间更像是 13 秒，这与我为完整事务测量的时间相对应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:47:42.617

您有在模板渲染阶段正在查询的 ORM/DB 模型查询集。你的观点没有计算在内。磁盘命中导致约 10 秒。

要么是这样，要么是您的视图通过一些与 ORM 相关的中间件触发它，在发回 HTTP 响应之前执行进一步的数据库操作。

打开并检查您的数据库日志记录。

# asp.net - 我如何检查锚标签内的复选框

> ID：11505337
> 
> 赞同：0
> 
> 时间：2012-07-16T13:25:52.503
> 
> 标签：asp.net, html, css

我正在研究 asp.net 和 HTML。我有一个包含 3 个复选框的 div 标签。为了使 div 可点击，我已将 div 标签放在锚标签内，例如..

```
<a href="#">
<div class="box1">
<input type="checkbox" value="xxx"/>
<input type="checkbox" value="yyy"/>
<input type="checkbox" value="zzz"/>
</div>
</a> 
```

由于锚标签，我无法签入/签出 div 标签内的复选框。它会将我重定向到锚标记的 href 地址。我如何检查锚标签内的复选框。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:50:17.953

首先，您的方法很糟糕，您可以添加`onclick="yourfunction()"`以使您的 div “可点击”，然后就不需要`<a>`

如果您确实需要锚标记，请`<a>`添加`return false;`到用于获取复选框值的函数中。这将阻止导航的默认行为。

# ruby-on-rails - 映射到哈希的键

> ID：11505343
> 
> 赞同：12
> 
> 时间：2012-07-16T13:26:20.773
> 
> 标签：ruby-on-rails, hashmap

我正在使用一个名为**my_hash**的哈希：

```
{"2011-02-01 00:00:00+00"=>816, "2011-01-01 00:00:00+00"=>58, "2011-03-01 00:00:00+00"=>241} 
```

首先，我尝试解析**my_hash**中的所有键（即时间）。

```
my_hash.keys.sort.each do |key|
  parsed_keys << Date.parse(key).to_s
end 
```

这给了我这个：

```
["2011-01-01", "2011-02-01", "2011-03-01"] 
```

然后，我尝试将**parsed_keys**映射回 my_hash 的**键**：

```
Hash[my_hash.map {|k,v| [parsed_keys[k], v]}] 
```

但这会返回以下错误：

```
TypeError: can't convert String into Integer 
```

如何将**parsed_keys**映射回 my_hash 的**键**？

我的目标是摆脱所有键末尾的“00:00:00+00”。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-16T13:30:59.950

Why don't you just do this?

```
my_hash.map{|k,v| {k.gsub(" 00:00:00+00","") => v}}.reduce(:merge) 
```

This gives you

```
{"2011-02-01"=>816, "2011-01-01"=>58, "2011-03-01"=>241} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-08T00:14:42.107

这个任务有一个新的“Rails way”方法:)

[http://api.rubyonrails.org/classes/Hash.html#method-i-transform_keys](http://api.rubyonrails.org/classes/Hash.html#method-i-transform_keys)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-16T14:27:01.803

使用**iblue**答案，您可以使用正则表达式来处理这种情况，例如：

```
pattern = /00:00:00(\+00)+/
my_hash.map{|k,v| {k.gsub(pattern,"") => v}}.reduce(:merge) 
```

您可以改进模式以处理不同的情况。

希望能帮助到你。

编辑：

抱歉，**iblue**已经发布了答案

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-10T13:58:06.340

另一种选择可能是：

1.  地图
2.  返回转换后的两个元素数组 [converted_key，converted_value]
3.  转换回哈希

```
irb(main):001:0> {a: 1, b: 2}.map{|k,v| [k.to_s, v.to_s]}.to_h               
=> {"a"=>"1", "b"=>"2"} 
```

# performance - 语音识别，例如 Siri

> ID：11505345
> 
> 赞同：3
> 
> 时间：2012-07-16T13:26:26.813
> 
> 标签：performance, speech-recognition, speech-to-text, siri

Siri 等软件接受语音命令并适当地回答这些问题 (98%)。我想知道，当我们编写一个软件来获取语音信号的输入流并回答这些问题时，

我们是否需要将输入转换为人类可读的语言？比如英语？

在自然界中，我们有很多不同的语言，但是当我们说话时，我们基本上会发出不同的声音。而已。但是，我们创建了所谓的字母表来表示这些噪声变化。

所以，我的问题是，当我们编写语音识别算法时，**我们是将这些噪声变化信号与我们的数据库匹配还是首先将这些噪声变化转换为英语，然后检查从数据库中回答什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T17:47:42.483

Apple 基于自然语言理解的 Siri.. 我相信 Nuance 在幕后..[参考这篇文章](http://techcrunch.com/2011/10/05/apple-siri-nuance/)
Nuance 是语音识别系统开发的领导者。Nuance Dragon 引擎的准确性令人惊叹……我为之工作的客户正在为他们的 IVR 系统使用 Nuance NOD 服务……
我已经尝试过[适用于 Android 的 Nuance Dragon SDK](http://dragonmobile.nuancemobiledeveloper.com/public/index.php?task=home) ……

根据我的经验，如果你使用 Nuance，你不需要担心噪音变化等......
但是当你去企业发布你的应用程序时，Nuance 可能会很昂贵......

如果您打算使用 Power of voice 来驱动您的应用程序，Google API 也是一个更好的选择...

有像[Sphinx](http://cmusphinx.sourceforge.net/)和[袖珍 sphinx](http://cmusphinx.sourceforge.net/2010/03/pocketsphinx-0-6-release/)之类的 API也可以帮助您更好地进行语音应用程序开发。以上所有 API 都会处理噪声抑制和将语音转换为文本等。

所有你需要担心的是构建你的系统来理解给定字符串或识别语音内容的语义。苹果应该有非常好的语义解释器。所以试试 Nuance SDK。它适用于 Android、iOS、Windows 手机和 HTTP 客户端版本。

我希望它可以帮助你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T14:21:19.047

您所指的“噪声变化信号”称为[音素](http://en.wikipedia.org/wiki/Phoneme)。语音识别系统如何将这些音素翻译成单词取决于系统的类型。Siri 不是一个基于语法的系统，您可以根据一组规则告诉语音识别系统您期望的短语类型。由于 Siri 在开放环境中翻译语音，它可能使用某种类型的统计模型。当今流行的语音识别统计模型是隐马尔可夫模型。虽然涉及到各种数据库，但它并不是将音素组简单地搜索为单词。[这里](http://electronics.howstuffworks.com/gadgets/high-tech-gadgets/speech-recognition2.htm)有一个非常好的过程和翻译问题的高级描述。

# javascript - 如何从 javascript setInterval 更新变量？

> ID：11505348
> 
> 赞同：0
> 
> 时间：2012-07-16T13:26:34.910
> 
> 标签：javascript

假设我有一个对象：

```
var myObj = function {
this.count = 0;
}

myObj.prototype {
   setCount : function() {
       var interval = setInterval(function() {
           this.count++;
       }, 500);
   }
} 
```

问题是 setInterval 中的计数始终未定义，因此我永远不能将 myObj 中的计数变量增加到 0 以外的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:29:02.430

`this`根据被调用的函数（以及如何调用函数）而变化。

您传递给的匿名函数`setInterval`是一个不同的函数。

首先将值复制到非魔术变量。

```
 setCount : function() {
       var that = this;
       var interval = setInterval(function() {
           that.count++;
       }, 500); 
```

请参阅文档中[的`this`问题](https://developer.mozilla.org/en/DOM/window.setInterval#The_%27this%27_problem)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:30:26.967

`setInterval()`在浏览器窗口范围内运行，所以`this.count`指的是`window.count`不存在的。

# jquery - 如何使用jquery .map去除isNaN元素

> ID：11505350
> 
> 赞同：0
> 
> 时间：2012-07-16T13:26:37.907
> 
> 标签：jquery

我对 jquery.map 函数有点困惑。

我有一个数组说`myArray = ["1", 3, "a", 5]`。

我可以`$.map().get().join(',')`用来得到结果吗`[1, 3, 5]`？

```
$(myArray).map(function() { 
    if (!isNaN(this)){  
        return this
    }       
}).get().join(','); 
```

上面的代码返回`["1","3","a","5"]`

[http://jsfiddle.net/kkgian/khurZ/](http://jsfiddle.net/kkgian/khurZ/)

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:30:23.143

`.map()`不会改变原始数组。因为您的代码没有捕获返回的值，所以您只是将其丢弃。

使用（名称不佳的）[`$.grep`](http://api.jquery.com/jQuery.grep/)函数而不是`.map()`. 多亏了这个`invert`论点，您甚至不必使用匿名函数；您可以`isNaN`直接用作谓词。

```
var filteredArray = $.grep(myArray, isNaN, true); 
```

[http://jsfiddle.net/mattball/nzeBZ/](http://jsfiddle.net/mattball/nzeBZ/)

**NB** `isNaN('1')`返回`false`，因为`'1'`它是一个可以合理强制转换为数字的字符串。如果这不可接受，请使用更好的过滤谓词。但是，您是否真的想要一个数字数组或只是字符串，这有点不清楚`'[1, 3, 5]'`。

# objective-c - 使用绑定使用基于视图的 NSOutlineView（源列表）时，是否可以根据某些条件不显示数据源中的行？

> ID：11505353
> 
> 赞同：0
> 
> 时间：2012-07-16T13:26:43.957
> 
> 标签：objective-c, macos, cocoa, interface-builder, cocoa-bindings

例如，下图显示了一个 NSOutlineView，它使用 NSTreeController 绑定到基于文件夹和项目的树结构：

![在此处输入图像描述](../Images/1e1a7715c3e89bbf6cdeba095cbdf564.png)

我想要的是 Item 对象保留在模型中，但不显示为行，即：

![在此处输入图像描述](../Images/dc5d7a9f1ebf50f28eaead8bf664004e.png)

NSOutlineView 委托协议有一个方法通知委托即将显示项目，但不提供不显示的选项。

有什么方法可以子类化 NSOutlineView 来实现这个（或其他方法）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:59:03.143

大概你正在使用`NSTreeController`它根据他们用来识别他们的孩子的关键路径来组织你的模型对象。

如果你想从视图中过滤掉任何东西，你需要做的就是实现你的子键路径方法来只返回你想要显示的子元素。（如果您需要继续跟踪模型中的“真实”孩子，这可能意味着需要进行一些额外的簿记才能返回单独的孩子列表以供显示。）

# stax - StaxMate：访问纯 XML

> ID：11505370
> 
> 赞同：0
> 
> 时间：2012-07-16T13:27:34.207
> 
> 标签：stax, woodstox, staxmate

我得到了以下（实际上是巨大的）XML 来处理：

```
<root>
  <item attr="hello world">
    <subitem></subitem>
    <subitem></subitem>
    <subitem></subitem>
    <subitem></subitem>
  </item>
  <item attr="hello world">
    <subitem></subitem>
    <subitem></subitem>
    <subitem></subitem>
    <subitem></subitem>
  </item>
  .
  .
  .
</root> 
```

使用[StaxMate](http://staxmate.codehaus.org/)，这非常容易。但是我到底如何告诉 StaxMate“记录”例如每个*项目*的纯 XML （参见上面的 XML）。所以在处理完一个*项目*后，我已经完成了我的处理+我有字符串

```
 <item attr="hello world">
    <subitem></subitem>
    <subitem></subitem>
    <subitem></subitem>
    <subitem></subitem>
  </item> 
```

某处。

非常感谢，法比安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:48:53.563

你需要写条目；XMLStreamWriter2 有很好的方法，`XMLStreamWriter2.copyEventFromReader(...)`可以用来制作令牌的精确副本。

但是你为什么要创建`String`s 呢？直接编写 XML 片段或处理它们不是很有意义吗？字符串对于 XML 来说是低效的东西；占用内存，写出时需要编码，包含XML时需要解析。所以这样做的唯一原因是它们是否必须作为字符串传递给另一个库。

# mvvm - 如何从 ZK-Framework 中的另一个 ViewModel 获取 ViewModel

> ID：11505371
> 
> 赞同：1
> 
> 时间：2012-07-16T13:27:35.470
> 
> 标签：mvvm, zk

我的 MVVM 应用程序中有两个 ViewModel。一个绑定到主窗口，另一个绑定到单击按钮后出现的弹出窗口。在弹出窗口中，我需要从主窗口绑定到选定的实体。如何从 PopupViewModel 访问 MainViewModel 中的这个实体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T20:23:18.187

ZK 具有事件队列的概念和用于多个 ViewModel 之间通信的全局命令，因此我们可以使用它将当前选定的实体传递给弹出窗口的 ViewModel。

使用这个 zk mvvm 演示页面：

（[见文档](https://github.com/simbo1905/ZkToDo2/blob/master/src/main/webapp/presentationmodel.zul)）

我在列表框中添加了一个全局命令，该命令会触发当前选定的主 ViewModel 提醒，需要通过弹出窗口显示：

```
 <listbox id="list" multiple="true" rows="6"
        model="@load(vm.reminders)"
        selectedItem="@bind(vm.selectedReminder)" 
        onSelect="@global-command('refresh', reminder=vm.selectedReminder)"> 
```

然后我在页面底部添加了一个带有第二个 ViewModel 的弹出窗口：

```
 <window id="info" visible="false" width="120px" border="normal" position="parent"
     apply="org.zkoss.bind.BindComposer"
    viewModel="@id('vm') @init('org.zkforge.zktodo2.ui.ViewModelPopup')"
    >
You have selected <label value="@load(vm.currentReminder.name)"/>
</window>
<button label="More info" onClick="info.doPopup()"/>
</zk> 
```

弹出的 Viewmodel 有一个方法，它接受将实体作为参数的全局命令：

```
public class ViewModelPopup  {

    protected Reminder currentReminder = new Reminder();

    public Reminder getCurrentReminder() {
        return currentReminder;
    }

    public void setCurrentReminder(Reminder currentReminder) {
        this.currentReminder = currentReminder;
    }

    @GlobalCommand @NotifyChange("currentReminder")
    public void refresh(@BindingParam("reminder") Reminder reminder ){
        this.setCurrentReminder(reminder);
        return;
    }

} 
```

因此，现在每当您在列表框中选择一个项目时，都会在弹出 ViewModel 上触发刷新方法，并将从主 ViewModel 获取的数据传递给它。每当您点击页面底部的“更多信息”按钮以显示弹出窗口时，它都会显示当前选定实体的名称。

我遵循的文档位于：

（[文档1](http://books.zkoss.org/wiki/ZK_Developer's_Reference/MVVM/Data_Binding/Global_Command_Binding)）

（[文档2](http://books.zkoss.org/wiki/ZK_Developer's_Reference/MVVM/Data_Binding/Global_Command_Binding)）

运行该示例应用程序的说明位于 ( [Docs3](https://github.com/simbo1905/ZkToDo2) )的自述文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:40:03.763

您的主窗口中有实体列表吗？如果是这种情况，则需要从主窗口的视图模型中将所选实体放在地图中，并将其作为 createComponents 的参数传递，如下所示：

```
//In the view Model of the main window 
Map arg = new HashMap();
arg.put("selectedEntity", SelectedEntity);
Executions.createComponents("/myPopup.zul", null, arg); 
```

现在在弹出视图模型中，您只需在 Init 方法中检索 Entity 的值：

```
 //PopupView model
    @Init
    public void init(@ExecutionArgParam("selectedEntity") SelectedEntity newEntity)           {

    entity = newEntity;

} 
```

您会注意到 ExecutionArgParam 中的字符串是您放入地图的键。

# iphone - iOS - libical / const char * - 内存使用情况

> ID：11505372
> 
> 赞同：1
> 
> 时间：2012-07-16T13:27:42.463
> 
> 标签：iphone, objective-c, ios, icalendar, libical

我正在使用 libical 库来解析 iCalendar 格式并从中读取我需要的信息。到目前为止，它工作得非常好，但是关于 ical 有一件奇怪的事情。这是我的代码：

```
icalcomponent *root = icalparser_parse_string([iCalData cStringUsingEncoding:NSUTF8StringEncoding]);

if (root)
{    
    icalcomponent *currentEvent = icalcomponent_get_first_component(root, ICAL_VEVENT_COMPONENT);

    while (currentEvent)
    {    
        while(currentProperty)
        {    
            icalvalue *value = icalproperty_get_value(currentProperty);
            char *icalString = icalvalue_as_ical_string_r(value); //seems to leak
            NSString *currentValueAsString = [NSString stringWithCString:icalString
                                                                encoding:NSUTF8StringEncoding];
            icalvalue_free(value);
            //...
            //import data
            //...
            icalString = nil;
            currentValueAsString = nil;
            icalproperty_free(currentProperty);
            currentProperty = icalcomponent_get_next_property(currentEvent, ICAL_ANY_PROPERTY);
        } //end while
    } //end while
    icalcomponent_free(currentEvent);
}
icalcomponent_free(root); 
```

//...

我确实使用了工具来检查我的内存使用情况，并且能够发现这条线似乎泄漏了：

```
char *icalString = icalvalue_as_ical_string_r(value); //seems to leak 
```

如果我将此行复制并粘贴 5 或 6 次，我的内存使用量将增长约 400kb，并且再也不会被释放。

该方法没有免费方法，`icalvalue_as_ical_string_r`因为它返回一个 char *..

任何建议如何解决这个问题？我将不胜感激任何帮助！

**编辑**

看一下苹果文档说以下内容：

> 要从字符串对象中获取 C 字符串，建议使用 UTF8String。这将返回一个使用 UTF8 字符串编码的 const char *。

```
const char *cString = [@"Hello, world" UTF8String]; 
```

> 您收到的 C 字符串归一个临时对象所有，并且在发生自动解除分配时将变为无效。如果要获取永久的 C 字符串，则必须创建一个缓冲区并复制该方法返回的 const char * 的内容。

但是如果使用 arc，现在如何正确释放 char * 字符串？我试图在我的while循环前面添加@autorelease {...}，但没有任何努力。仍在增加内存使用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:26:18.663

`icalvalue_as_ical_string_r`返回 a`char *`因为它为您的结果字符串执行了 malloc() 。如果您的指针非 NULL，则必须在使用后对其进行 free()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:31:06.543

小心声明“没有免费方法......因为它返回一个 char*”；这绝不是您可以假设的事情。

在没有文档的情况下，您可以查看库的源代码以了解它的作用；例如：

[http://libical.sourcearchive.com/documentation/0.44-2/icalvalue_8c-source.html](http://libical.sourcearchive.com/documentation/0.44-2/icalvalue_8c-source.html)

不幸的是，这个函数可以做*很多*不同的事情。当然，在*某些*情况下调用`free()`返回的缓冲区是正确的，但也许并非在每种情况下都可以确保这一点。

我认为最好从库的维护者那里请求一个适当的释放方法。他们需要收拾自己的烂摊子；该`icalvalue_as_ical_string_r()`函数至少有十几个`switch`可能具有不同释放要求的情况。

# getelementbyid - 使用 Ajax 加载后使用 document.getElementById

> ID：11505376
> 
> 赞同：0
> 
> 时间：2012-07-16T13:27:50.533
> 
> 标签：getelementbyid

请帮帮我。

我有一个文件 index.php，相关部分（之前加载了 Jquery）：

```
<div id="test"></div>
<script type="text/javascript">
$('#test').load("table.php");
</script> 
```

还有一个文件table.php。如果没有给出变量，则显示未过滤的表格。当 table.php 加载时，它还会加载一个选择字段，例如：

```
<select name="testfield" id="testfield" onchange="javascript:setactionfilter();">
<option value="1">Test</option>
<option value="2">Test2</option>
</select> 
```

之后，使用过滤结果在该 testdiv 中重新加载 table.php 的脚本：

```
<script type="text/javascript">
function setactionfilter(){
$('#test').load("table.php?action=".document.getElementById('testfield').selectedvalue);
}
</script> 
```

问题是我的浏览器告诉我 getElementById 为空，换句话说，它在页面中找不到我的选择字段。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:38:55.080

更改`.`为`+`

连接是`+`在 javascript 中完成的，例如`string3 = string1 + " " + string2`

```
$('#test').load("table.php?action="+document.getElementById('testfield').value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:31:35.857

该[`.load`](http://api.jquery.com/load/)函数是异步的，因此执行立即需要数据的操作将失败。相反，使用 load 函数的回调功能：

```
$('#test').load('table.php', function() {
    // Do your stuff here!
}); 
```

将代码放入回调函数中可确保`table.php`在代码运行时加载并准备就绪。

# sql - 如何在 SQL 中执行运行总和（余额）

> ID：11505379
> 
> 赞同：0
> 
> 时间：2012-07-16T13:27:50.953
> 
> 标签：sql, accounting

我有 2 个 SQL 表

unit_transaction unit_detail_transactions

（这里的表架构：[http](http://sqlfiddle.com/#!3/e3204/2) ://sqlfiddle.com/#!3/e3204/2 ）

![这是表格及其上的示例数据](../Images/fa5e79e5e7ca1e032829ccf8e9c2e2b3.png)

我需要执行 SQL 查询以生成带有余额的表。现在我有这个 SQL 查询，但它不能正常工作，因为当我有 2 笔相同日期的交易时，余额计算不正确。

```
SELECT 
ft.transactionid,
ft.date,
ft.reference,
ft.transactiontype,
CASE ftd.isdebit WHEN 1 THEN MAX(ftd.debitaccountid) ELSE MAX(ftd.creditaccountid) END as financialaccountname,
CAST(COUNT(0) as tinyint) as totaldetailrecords,
ftd.isdebit,
SUM(ftd.amount) as amount,
balance.amount as balance
FROM unit_transaction_details ftd
JOIN unit_transactions ft ON ft.transactionid = ftd.transactionid
JOIN
(
    SELECT DISTINCT
    a.transactionid,
    SUM(CASE b.isdebit WHEN 1 THEN b.amount ELSE -ABS(b.amount) END) as amount
    --SUM(b.debit-b.credit) as amount
    FROM unit_transaction_details a
    JOIN unit_transactions ft ON ft.transactionid = a.transactionid
    CROSS JOIN unit_transaction_details b
    JOIN unit_transactions ft2 ON ft2.transactionid = b.transactionid
    WHERE (ft2.date <= ft.date)
    AND ft.unitid = 1
    AND ft2.unitid = 1
    AND a.masterentity = 'CONDO-A'
    GROUP BY a.transactionid,a.amount

) balance ON balance.transactionid = ft.transactionid

WHERE 
ft.unitid = 1
AND ftd.isactive = 1
GROUP BY 
ft.transactionid,
ft.date,
ft.reference,
ft.transactiontype,
ftd.isdebit,
balance.amount
ORDER BY ft.date DESC 
```

查询的结果是这样的：

![SQL查询结果](../Images/f637d8ec6d37e18a1196729c36e44221.png)

关于如何执行正确的 SQL 的任何线索，它将向我显示在后代模式下按交易日期排序的正确余额？

非常感谢。

编辑：考虑 2 个可能的解决方案

当您在 2 个交易中具有相同的日期时会产生问题，所以这就是我要做的：

1.  将日期和时间保存到“日期”列中。这样就不会有2个确切的日期。

或者

2.  创建一个“优先级”列并为每条记录设置优先级。因此，如果我发现日期已经存在并且它的优先级 = 1，那么当前的优先级将为 2。

你怎么看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:35:24.490

有两种方法可以计算运行总和。我将在一个更简单的表格上展示语法，给你一个想法。

一些数据库（例如 Oracle、PostgreSQL、SQL Server 2012、Teradata、DB2）直接支持累积和。为此，您使用以下功能：

```
select sum(<val>) over (partition by <column> order by <ordering column>)
from t 
```

这是一个 windows 函数，它将计算由 标识的每组记录的运行总和。总和的顺序是 。

唉，许多数据库不支持此功能，因此您需要在数据库中的单个 SELECT 查询中执行自连接：

```
select t.column, sum(tprev.<val>) as cumsum
from t left join
     t tprev
     where t.<column> = tprev.<column> and
           t.<ordering column> >= tprev.<ordering column>
group by t.column 
```

也有可能创建另一个表并使用游标来分配累积总和，或者在应用程序级别进行总和。

# ember.js - 为模板中的视图指定操作？

> ID：11505385
> 
> 赞同：3
> 
> 时间：2012-07-16T13:28:06.127
> 
> 标签：ember.js

我想知道是否可以将操作分配给视图，就像我可以将操作分配给 HTML 标记一样：

这有效：

```
<button {{action "show2" }}>Test 1</button> 
```

这不会：

```
{{#view NewApp.MenuButton }}
   {{action "show3" target="controller"}}
{{/view}} 
```

我知道我可以在视图中实现点击功能。但我想将按钮用作某种可重用的组件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:42:46.277

您通常希望在 HTML 元素上使用 Handlebars[操作助手](http://docs.emberjs.com/#doc=Handlebars.helpers&method=.action&src=false)，而不是在`Ember.View`.

由于您想将事件附加到您的 NewApp.MenuButton 视图中，请在您的视图类定义中定义事件。例如，这里我们处理`click`事件：

```
NewApp.MenuButton = Ember.View.extend({

  click: function(event){
    // When the user clicks this view, 
    // this function will be called.

    // ... handle the click
    App.myController.menuButtonWasClicked();
  }
}); 
```

如果您要附加的事件不是内置事件之一，您可以注册自己的事件。在此处查找内置支持的事件以及如何注册自定义事件：[Ember.js - 事件](http://emberjs.com/guides/view_layer/#toc_adding-new-events)

* * *

**编辑**：您说您希望能够重用它。您可以定义一个 mixin 来附加任意事件和定位任意对象：

```
Ember.MyEventAttacher = Ember.Mixin.create({
   init: function() {
     var action = this.get('action');
         target = this.get('target'),
         targetObj = Ember.getPath(target);

     if (action && targetObj) {
        var targetEventFnc = targetObj[action];

        if (typeof targetEventFnc === 'function') {
           var actionFnc = function(event) {
              targetEventFnc(event);
           }

           this.set(action, actionFnc);
     }

     this._super();
   }
}); 
```

在你的视图中包含 Mixin：

```
NewApp.MenuButton = Ember.View.extend(Ember.MyEventAttacher); 
```

然后在您的模板中重新使用此视图，确保定义`action`和`target`属性。例子：

```
{{#view NewApp.MenuButton action="show3" target="NewApp.myController"}}
   <!--  ...  -->
{{/view}} 
```

定位：

```
NewApp.myController = Ember.Controller.create({
   show3: function(event) {
      // the event is sent here!
   }
}); 
```

# php - 如何用另一个数组填充一个数组？

> ID：11505389
> 
> 赞同：0
> 
> 时间：2012-07-16T13:28:31.570
> 
> 标签：php, arrays

我正在尝试在对象中创建元素的克隆并为克隆设置新名称。

```
class My_Obj{
 var $obj;
 var $obj_name;
 var clone;      //----int input to say how many clones are needed
 var clone_names;//----array input to make clone's name different from $obj
 function __construct( $args = '' ) {
   $defaults=array(
   /* codes to set up the default $obj */
  )
if ( $this->clone >0 ){
  for ( $i = 0; $i <= $this->clone; ++$i ){
   $clone_obj[$i]['name'] = /* need to loop through array $clone_name to fill this */

}
 }

/* other codes */
} 
```

例如，$clone_names 可以是 array('cat', 'dog', 'bird')。只要每个克隆都有一个名字，哪个顺序都没有关系。我想学习如何做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:37:36.610

如果我正确理解你的问题，你想`$clone_obj`用从`$clone_names`- 到指定的克隆数的值填充数组`$clone`？

如果是这种情况，这可能会起作用（我已经重写了您使用的示例类）：

```
class My_Obj {
    public $clone = 0;          //----int input to say how many clones are needed
    public $clone_names = array();  //----array input to make clone's name different from $obj
    private $clone_obj = array();   // array to store cloned names in

    function __construct($args = '') {
        for ($i=0; $i<$this->clone; $i++) {
            // copy the name in "$clone_names" to "$clone_obj", if it exists
        $this->clone_obj[$i] = array();
            $this->clone_obj[$i]['name'] = (isset($this->clone_names[$i]) ? $this->clone_names[$i] : '');
        }
    }
} 
```

# osx-lion - 致命的 org.apache.hadoop.conf.Configuration - 解析 conf 文件时出错：org.xml.sax.SAXParseException

> ID：11505392
> 
> 赞同：0
> 
> 时间：2012-07-16T13:28:34.790
> 
> 标签：osx-lion, apache-pig, homebrew

我正在尝试在本地运行 pig，使用自制软件安装，以测试脚本。但是，当我尝试从交互式提示运行简单转储时，出现以下错误`pig -x local`：

```
2012-07-16 23:20:40,447 [Thread-7] INFO  org.apache.pig.backend.hadoop.executionengine.util.MapRedUtil - Total input paths (combined) to process : 1
[Fatal Error] :63:85: Character reference "&#2" is an invalid XML character.
2012-07-16 23:20:40,688 [Thread-7] FATAL org.apache.hadoop.conf.Configuration - error parsing conf file: org.xml.sax.SAXParseException: Character reference "&#2" is an invalid XML character. 
```

相同的加载/转储在 Elastic MapReduce 上运行良好。

我找不到任何 XML 配置文件，我已经尝试使用 0.9.2 和 0.10.0 版本

我错过了什么？

编辑：刚刚检查了直接下载（与自制软件相比），它似乎也不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:10:26.920

您应该检查您的 Hadoop 配置文件是否具有正确的配置数据。

看看你的 hadoop/conf 目录。

看看里面：

hdfs-site.xml mapred-site.xml core-site.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:39:52.603

终于搞清楚问题出在哪里了。我最终不得不`dtruss -p`在 pig/java 进程上使用。这显示了一个临时目录和动态生成的 xml 文件。发现临时目录后，一切都很快到位。

它正在从我的网络连接中提取代理排除项，据我所知，该代理已嵌入其中`&#2`（[http://www.fileformat.info/info/unicode/char/02/index.htm ）。](http://www.fileformat.info/info/unicode/char/02/index.htm)这个无效值最初是如何出现在我的网络偏好中的，我一点也不知道。

然后将该值拉入动态生成的文件中，例如`/tmp/hadoop-vertis/mapred/staging/vertis-1005847898/.staging/job_local_0001/job.xml`.

违规行：

```
<property><name>ftp.nonProxyHosts</name><value>localhost|*.localhost|127.0.0.1|h&#2;|*.h&#2;</value></property>
<property><name>socksNonProxyHosts</name><value>localhost|*.localhost|127.0.0.1|h&#2;|*.h&#2;</value></property>
<property><name>http.nonProxyHosts</name><value>localhost|*.localhost|127.0.0.1|h&#2;|*.h&#2;</value></property> 
```

# iframe - 如果父级和 iframe 运行相同的 Google Analytics，我可以避免双重跟踪吗

> ID：11505395
> 
> 赞同：1
> 
> 时间：2012-07-16T13:28:44.837
> 
> 标签：iframe, google-analytics

如果父文档使用相同的 Google Analytics ID 但我不想将网页浏览量翻倍，我如何在 iframe 中使用事件跟踪功能？我可以禁用默认页面跟踪或切换到“手动跟踪”吗？

故事简介：父文档在 iframe 中显示评论，我想跟踪评论框架内的一些点击。我不想对父母和孩子使用不同的 GA 帐户，也不想将 iframe 合并到父文档中。我希望你能帮助我，如果你想要一些，我会给你一个免费的虚拟啤酒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:25:06.510

iframe 文档[可以检测到它们是](https://stackoverflow.com/questions/925039/detect-iframe-embedding-in-javascript)iframe 的。

您只能在框架外恢复逻辑并触发 GA 跟踪代码：

```
if (window.self === window.top) { /* I'm NOT in a frame! */
// GA tracking code 
_gaq.push(['_trackPageview']) ;
} 
```

这回答了你的问题了吗 ？

# ios - UITableView 不同部分的不同单元格高度（无行）

> ID：11505397
> 
> 赞同：1
> 
> 时间：2012-07-16T13:28:45.643
> 
> 标签：ios, uitableview

我有`UITableViewController`两个部分。第 0 部分始终包含 1 行，高度为 22px。我将其设置为`heightForRowAtIndexPath`... 第 1 节包含 0-n 行，高度为 44px。我还设置了这些的高度`heightForRowAtIndexPath`。

问题是，当我在第 1 节中没有行时，所有“填写单元格”的高度都将是 22px，就像第 0 节中的单元格一样，而不是我希望的 44px。

即使我只有一行是 22px，是否可以将这些填充单元格的高度设置为 44px（为空并自动添加以填充表格视图的单元格）？

这是我得到的（左边）和我想要的（右边）： ![这不是我想要的](../Images/0086b1290f4fbb7c641c475e363babc5.png) ![这就是我要的](../Images/7cc953d1f9b5d4e59ec21092b84c3310.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:40:01.970

尝试在 XIB 中编辑 UITableView 属性 - 您可以设置默认行高，以便如果另有说明，所有这些“填充”单元格都默认为 44px 高度。您说无论如何 22px 单元都在那里，所以我认为它应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:54:30.437

您可以将其设置为第 1 节的标题视图，而不是让您的“状态栏”成为自己的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T10:15:24.630

我在这里遇到同样的问题。两个部分，第一个显示 3 个高度较小且始终具有相同内容的单元格，它们应该与表格一起滚动，因此它们不能成为标题。下面具有较大单元格高度的行正在更改，因此有时没有。

我调整了 tableView 以及原型单元格的单元格高度并`heightForRowAtIndexPath`正确分配了值，但这无济于事。如果后面没有单元格，tableView 似乎会以某种方式将第一节中的单元格重复到第二节中。

到目前为止，唯一的解决方案似乎是在第二部分中创建一个空单元格。如果您使用动画单元格，那就更复杂了。

# c# - 以 DataTable 为源的 GridView 不自动分页或排序

> ID：11505398
> 
> 赞同：1
> 
> 时间：2012-07-16T13:28:46.313
> 
> 标签：c#, asp.net

基本上我将我的gridview上的数据源设置为我手动填写的数据表。有没有办法让gridview自动分页和排序？当我尝试转到 gridview 上的另一个页面时，它给了我一个异常，说没有捕获分页事件（这意味着我没有该事件的方法）。我也允许分页设置为 true。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T13:33:05.893

你必须实现`OnPageIndexChanging`分页`OnSorting`事件，排序事件，如：

```
<asp:GridView ID="GridView1" OnPageIndexChanging="GridView1_PageIndexChanging" OnSorting="GridView1_Sorting" runat="server" /> 
```

在后面的代码中：

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridView1.PageIndex = e.NewPageIndex;
        GridView1.DataBind();
    }
protected void GridView1_Sorting(object sender, GridViewSortEventArgs e)
    {
        // sort expression
    } 
```

你可以参考这个[例子](http://forums.asp.net/post/1177923.aspx)

# symfony - recaptcha 不存在，或无法自动加载

> ID：11505400
> 
> 赞同：0
> 
> 时间：2012-07-16T13:28:47.797
> 
> 标签：symfony, recaptcha

我在我的 windows 上安装了一个项目，今天我需要在 Ubuntu 服务器上安装。该项目保存在 svn 服务器上。所以我只是使用 co 来检查项目并更新所有供应商捆绑包。访问 web/config.php 时一切正常：
为了增强您的 Symfony 体验，建议您修复以下问题：

```
Install and enable the intl extension.
Set short_open_tag to off in php.ini*.

* Changes to the php.ini file must be done in "/home/siteadm/common/php/Perso.ini". 
```

所以当我点击“进入欢迎页面”时，我得到了：

```
 AnnotationException: [Semantical Error] The annotation "@EWZ\bundle\RecaptchaBundle\Validator\Constraints\True" in property Acme\...\User::$recaptcha does not exist, or could not be auto-loaded. 
```

事实上，它在我的语言环境中运行良好。userbunle 使用 recapchaBundle 和 FOSUserbundle，它们在我的本地 Windows 机器上都运行良好。

我检查 /vendor 目录：它们是 755

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T18:12:41.443

Windows 不区分大小写。Linux 是。

也许你应该使用

> @EWZ\**捆绑**\RecaptchaBundle\Validator\Constraints\True

代替

> @EWZ\**捆绑**\RecaptchaBundle\Validator\Constraints\Tru3

?

这是很常见的错误。

# css - 外部css链接问题

> ID：11505402
> 
> 赞同：0
> 
> 时间：2012-07-16T13:28:58.793
> 
> 标签：css

我是网站开发的新手。我在将外部 CSS 链接到我的索引页面时遇到问题。

这是我网站的结构。

![结构体](../Images/443ec3c89ba748a99393d604160220a1.png)

我尝试使用此代码链接到我的外部 css

```
<link rel="stylesheet" type="text/css" href="../css/main.css"/> 
```

但我一直在谷歌浏览器中遇到错误![错误](../Images/8d6edf1075ebec4dc00b9302771fe71d.png)

显示的路径是 css 文件的正确路径。我做错了什么？顺便说一句，我正在使用 MAMP 在 localhost 上执行此操作。谁能帮我？提前致谢

“重新启动 MAMP 并在不同的路径上尝试现在似乎可以工作。感谢所有帮助。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:32:23.477

一般来说，LAMP 中的大多数网站都位于 public_html 目录中，因此您希望外部访问的所有内容都应该放在该目录中。即在 public_html 中移动 css 和 images 文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:32:44.193

可能是css文件有一些权限相关的问题。

或者

尝试提供始终有效的绝对网址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T08:43:44.450

重新启动 MAMP 并在不同的路径上尝试现在似乎可以工作。感谢所有的帮助。

# javascript - 如何检查未选中任何单选按钮

> ID：11505404
> 
> 赞同：-2
> 
> 时间：2012-07-16T13:29:15.770
> 
> 标签：javascript, jquery

我想检查是否没有选中任何单选按钮。我该怎么做？

```
 $(document).ready(function(){

     $('#delete_btn').click(function(){ as answer
         if ( !($("RadioGroup1").is(':checked')) )// THis line is not wirking..I need the code for this line
{ 

             }else{
//message
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:35:08.073

你可能使用了错误的选择器

```
$("RadioGroup1") 
```

而不是`$(".RadioGroup1")`或`$("#RadioGroup1")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:34:00.773

从 jQuery 1.7+ 开始，您可以使用[`.prop()`](http://api.jquery.com/prop/)

```
$(document).on('click','#delete_btn', function(){
  if($(this).prop('checked')){
    // do whatever if checked
   }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:34:14.270

在客户端？

如果是这样，请查询所有单选按钮，遍历它们并检查它们的“已检查”状态。

```
$("input:radio").each(function(){
   if($(this).attr("checked")!='checked' || !($(this).attr("checked"))){

   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:35:00.587

如果选择器返回结果 - 它将以数组的形式返回它们。

同样，如果您的选择器返回零个元素，它将返回的数组将为空。您可以简单地测试返回的数组的长度 -

```
$("#radioElement:checked").length 
```

如果长度大于零 -该选择器下**有**一些`:checked`单选元素。

# android - 单击Android中自定义ListView的方法？

> ID：11505408
> 
> 赞同：0
> 
> 时间：2012-07-16T13:29:21.023
> 
> 标签：android, android-listview

我有自定义列表视图。有两个文本框和一个复选框。也添加了 XML 文件。

```
package com.example.phonebook;

import java.util.ArrayList;
import java.util.List;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity implements AdapterView.OnItemClickListener{

ListView lst;

CustomPerson p;

private static final int CAMERA_REQUEST = 1888;
ImageView imageView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.setContentView(R.layout.activity_main);

    Button buttonSms, buttonCall, buttonPhoto;

    List<CustomPerson> list = new ArrayList<CustomPerson>();

    list = GetContacts();

    lst = (ListView) findViewById(R.id.lst_person);
    buttonSms= (Button) findViewById(R.id.btnSms);
    buttonCall = (Button) findViewById(R.id.btnCall);
    buttonPhoto = (Button) findViewById(R.id.BtnPhoto);

    lst.setAdapter(new CustomAdapter(getApplicationContext(),list));

    lst.setOnItemClickListener(this);

     public void onItemClick(AdapterView<?> parent, View view, int position,       long id) {

    // I want to get name and number here
     Toast.makeText(this,"Clicked!", Toast.LENGTH_LONG).show();
}

 @SuppressLint({ "NewApi", "NewApi" }) private List<CustomPerson> GetContacts()
{
    Intent intentContact = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI); 
    List<CustomPerson> contactList = new ArrayList<CustomPerson>();

    Cursor cursor =  managedQuery(intentContact.getData(), null, null, null, null);      
       while (cursor.moveToNext()) 
       {          
           String Name = "";
           String PhoneNumber = "";
           String contactId = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
           Name = cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME)); 

           String hasPhone = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));

           if ( hasPhone.equalsIgnoreCase("1"))
               hasPhone = "true";
           else
               hasPhone = "false" ;

           if (Boolean.parseBoolean(hasPhone)) 
           {
            Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ contactId,null, null);
            while (phones.moveToNext()) 
            {
              PhoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            }
            phones.close();
           }

           contactList.add(new CustomPerson(Name, PhoneNumber));

      }          
       cursor.close();
       return contactList;
} 
```

我有 CustomPerson 类和 CustomAdapter。

当我从列表视图中单击一个人时，我想将人的电话和号码获取到我的对象 p。但是这些 setOnItemClickListener 和 OnItemClick 方法不起作用，因为当我运行项目时，我无法单击任何项​​目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:38:12.913

This problem I think it's for the clickable checkbox. Try to follow this similar issue with a button on a listview resolved early here:

[I can't click the ListView in android?](https://stackoverflow.com/questions/11203713/i-cant-click-the-listview-in-android)

# matlab - 如何在matlab中重复元素矩阵

> ID：11505410
> 
> 赞同：2
> 
> 时间：2012-07-16T13:29:24.977
> 
> 标签：matlab, matrix, repeat

如何重复

```
A = [ 1 2 ; 
      3 4 ] 
```

重复

```
B = [ 1 2 ; 
      2 1 ] 
```

所以我想要我的答案，比如矩阵 C：

```
C = [ 1 2 2; 
      3 3 4 ] 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T14:40:37.520

只是为了好玩，另一个使用arrayfun的解决方案：

```
res = cell2mat(arrayfun(@(a,b) ones(b,1).*a, A', B', 'uniformoutput', false))' 
```

这导致：

```
res =

     1     2     2
     3     3     4 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T13:46:10.407

为简单起见，我假设您只会添加更多列，并且您已检查每行的列数是否相同。

然后它变成了重复元素和重塑的简单组合。

*编辑*我已经修改了代码，因此如果 A 和 B 是 3D 数组，它也可以工作。

```
%# get the number of rows from A, transpose both
%# A and B so that linear indexing works
[nRowsA,~,nValsA] = size(A);
A = permute(A,[2 1 3]);
B = permute(B,[2 1 3]);

%# create an index vector from B 
%# so that we know what to repeat
nRep = sum(B(:));

repIdx = zeros(1,nRep);
repIdxIdx = cumsum([1 B(1:end-1)]);
repIdx(repIdxIdx) = 1;
repIdx = cumsum(repIdx);

%# assemble the array C
C = A(repIdx);
C = permute(reshape(C,[],nRowsA,nValsA),[2 1 3]);

C =
     1     2     2
     3     3     4 
```

# google-app-engine - 用于位置查询的 App Engine 全文搜索与 Geohashing

> ID：11505415
> 
> 赞同：0
> 
> 时间：2012-07-16T13:29:29.587
> 
> 标签：google-app-engine, geohashing

我正在考虑将应用程序从 RoR 移植到以地理搜索为中心的 Python App Engine。我一直在使用其中一个开源 GeoModel（即 geohashing）库，以允许应用程序处理诸如“附近有哪些餐馆（纬度/经度对）”之类的问题的查询以及类似的事情。
GeoModel 使用 ListProperty 创建了一个沉重的索引，这让我担心定价，因为我有大约 1000 万个实体需要加载到生产环境中。

我今天早上发现的这篇文章在成本方面似乎相当可怕：

[https://groups.google.com/forum/?fromgroups#!topic/google-appengine/-FqljlTruK4](https://groups.google.com/forum/?fromgroups#!topic/google-appengine/-FqljlTruK4)

所以我的问题是——既然谷歌已经发布了支持地理搜索的全文搜索，地理散列是一个没有实际意义的概念吗？不过，目前尚不清楚这个新 API 的幕后发生了什么，而且我担心索引大小可能与我使用 GeoModel 方法一样大。

搜索 API 的另一个问题是，看来我不仅必须在数据存储中创建我的模型，而且还要将其中一些数据（它所代表的模型的 GeoPtProperty 和 entity_key）复制到 Documents 中，这大大增加了我的数据集。

对此有什么想法吗？目前我正在考虑刮掉这个端口太昂贵了，尽管到目前为止我真的很喜欢在 App Engine 环境中工作并且很想在我的一些应用程序中摆脱 EC2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:28:15.807

你在这里问了很多问题：

*   地理散列是一个没有实际意义的概念：可能不是，我怀疑搜索 API 使用地理散列或类似的东西来进行位置搜索。

*   您可以使用搜索 API 还是自己实现它：是的，但我不知道哪种方式的成本。

*   应用引擎上的地理散列很昂贵：在消息线程中，由于索引写入成本高，成本很差。您必须设计您的地理哈希数据以最小化索引。如果 GeoModel 在列表中放置了很多索引值，您可能会遇到麻烦 - 在不知道索引如何工作的情况下，我不会直接使用它。我的猜测是，如果您降低定位精度，您可以减少索引条目的数量，这可以为您节省大量成本。

*   如线程中所述，您可以在 CloudSQL 中运行 geohashing。

# apache - Zabbix 上的错误：/server-status 404：未找到。

> ID：11505427
> 
> 赞同：0
> 
> 时间：2012-07-16T13:30:10.510
> 
> 标签：apache, zabbix

我一直在处理这一天，但仍然无法弄清楚。我已经在一台机器上设置了 Zabbix，我想在另一台机器上监控 Apache 服务器。我已经完成了文档中描述的所有步骤：[http](http://www.zabbix.com/wiki/templates/apache) ://www.zabbix.com/wiki/templates/apache ，但我仍然没有在 Apache 模板中获得任何数据。检查 Apache 服务器上的日志时，我可以在 access.log 中看到：

```
IPADDR - - [16/Jul/2012:13:29:08 +0000] "GET /server-status?auto HTTP/1.0" 404 13826 "-" "Python-urllib/1.17" 
```

我认为这可能与我在该机器上的虚拟服务器和其他站点有关，但我无法弄清楚，文档中也没有提到任何内容......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:21:05.047

Apache 检查并不像您想象的那么聪明。

Zabbix 可以与您的 apache 服务器通信吗？将其链接到具有“正常运行时间”之类的简单内容的模板，并验证它确实获取了数据。

接下来，验证没有任何防火墙规则阻止 zabbix 服务器与您的 Web 服务器通信。你可以从zabbix主机卷曲你的主页没有问题吗？

apache 检查是主动检查吗？如果是这样，您需要确保在 /etc/zabbix/zabbix-agentd.conf 文件中启用了主动检查，并且 conf 中的“主机名”是唯一的并且与您在 zabbix 服务器中的内容正确匹配。

如果失败，将 /etc/zabbix-agentd.conf 中的 DebugLevel 更改为 4 并跟踪 zabbix 日志。看看它是否有任何检查问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:33:11.990

`/server-status`这是一个 apache 配置问题，如果产生 404 错误，zabbix 将无法执行任何操作。

也许该`<Location /server-status>...</Location>`指令不在 apache 配置中的正确位置。

尝试将其移动到路由`<VirtualHost>`到的特定虚拟服务器的部分内。`GET /server-status`

还要确保[mod_status](http://httpd.apache.org/docs/2.2/mod/mod_status.html)已启用。

# html - Div AutoResize（好像它是空的）

> ID：11505430
> 
> 赞同：0
> 
> 时间：2012-07-16T13:30:17.840
> 
> 标签：html, css, autosize

![在此处输入图像描述](../Images/6e3a1f336f3a1542ad7f34dbd74fffe0.png)

我有一排div。左侧的所有 div 都会调整大小以适应其内容。我希望左侧的 div 也可以调整大小以适应其内容，但我希望它服从于右侧的 div。因此，如果右侧的 div 变得非常大，左侧的 div 将切断其内容（无论它有多长）并缩小到适合右侧 div 的大小。

这可以查找左侧 div 是否为空，但如果其中包含内容，则不会调整大小。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:37:45.767

[http://jsfiddle.net/6WuVz/](http://jsfiddle.net/6WuVz/)

具有重新排序元素的 HTML：

```
<div class="r">Right 1</div>
<div class="r">Right 2</div>
<div class="l">Left</div> 
```

CSS：

```
.r {
    float: right;
}

.l {
    overflow: hidden; /* turn into a "Block Formatting Context" */
} 
```

阅读有关 BFC 如何占用浮点数剩余空间的更多信息：

[http://www.stubbornella.org/content/2009/07/23/overflow-a-secret-benefit/](http://www.stubbornella.org/content/2009/07/23/overflow-a-secret-benefit/)

旧 IE 的 BFC：

```
display: block; overflow:hidden; zoom:1; position:relative; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:40:33.483

在计算完其他 div 大小后，设置页面加载时的宽度和/或高度。使用 jquery：

```
$( function() {
   $("#leftdiv").width($("#rightdiv").width()) 
   $("#leftdiv").height($("#rightdiv").height());
}); 
```

# c++ - 如何在 Switch 语句中使用 IF

> ID：11505438
> 
> 赞同：1
> 
> 时间：2012-07-16T13:30:35.913
> 
> 标签：c++, switch-statement, average

如何在 Switch 语句中应用 if 条件，我想计算平均值：但是我已经尽力解决这个问题，但仍然没有从 Switch 语句中得到输出。我是 C++ 的初学者，

```
#include <iostream>

using namespace std;

int main()
{
    //declaration of variables.
    int sub1,sub2,sub3, sub4,sub5,total,avg;

    //accepting marks from user in each subject
    cout << " Enter Programming in C++ Marks: " << endl;
    cin >> sub1;
    cout << " Enter Software Engineering Marks : " << endl;
    cin >> sub2;
    cout << " Enter Personal Communication Marks : " << endl;
    cin >> sub3;
    cout << " Enter Database Application Marks: " << endl;
    cin >> sub4;
    cout << " Enter Computer Concept Marks: " << endl;
    cin >> sub5;

    //calculatin sum of marks obtained in each subject
    total = (sub1 + sub2 + sub3 + sub4 + sub5);

    //calculating the average marks
    avg = total / 5;

    // starting of if condition for finding out grades of total subjects.

    switch (avg){
      case 1:{
        if ((avg >= 80) && (avg <= 100))
        {
            cout << " Your Average is: " << avg << endl;
            cout << "You Grade is A+ " << endl;
        }
        break; 
      }
      case 2:{
        if ((avg >= 70) && (avg <= 79))
        {
            cout << " Your Average is: " << avg << endl;
            cout << " Your grade is A " << endl;
        }    
        break;
      } 
      case 3:{
        if ((avg >= 60) && (avg <= 69))
        { 
            cout << " Your Average is: " << avg << endl;
            cout << " Your Grade is B+  " << endl;
        }   
        break;  
      }
      case 4:{
        if ((avg >= 50) && (avg <= 59))
        {
            cout << " Your Average is: " << avg << endl;
            cout << " Your Grade is C+ " << endl;
        }
        break;
      }
      case 5: {
        if ((avg >= 40) && (avg <= 49))
        {
            cout << " Your Average is: " << avg << endl;
            cout << " Your Grade is  C- ! " << endl;
        }
        break;    
      }
      case 6: {
        if ((avg >= 30) && (avg <= 39))
        {
            cout << " Your Average is: " << avg << endl;
            cout << " Your Grade is  D ! " << endl;
        }
        break; 
      }

      default:{ 
        if ((avg >= 100) && (avg <= 29))
        {
            cout << " Your Average is: " << avg << endl;
            cout << " Your Grade is  F, So you are Fail in the class ! " << endl;
            break;
        }
      }
    }

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T13:34:40.880

好吧，`switch`将`case`s 与您给它的变量进行比较。因此，因为`case 1`它会尝试与您的陈述进行比较*，*`avg`然后`1`它会继续您的陈述，当然，这永远不会适用。*`if`*

 *我不太确定你在那里尝试什么；从所有我可以看到你最好使用嵌套`if`：

```
if ((avg >= 80) && (avg <= 100))
{
  cout << " Your Average is: " << avg << endl;
  cout << "You Grade is A+ " << endl;
} else if ((avg >= 70) && (avg <= 79))
{
  cout << " Your Average is: " << avg << endl;
  cout << " Your grade is A " << endl;
} else if ((avg >= 60) && (avg <= 69))
{ 
  cout << " Your Average is: " << avg << endl;
  cout << " Your Grade is B+  " << endl;
} ... 
```

但即使这样也可以更优雅地处理，这取决于你的技能。例如，您可以将平均值除以 10 并`switch`在其上使用，利用整数除法截断的事实，将所有内容折叠到`50`同`59`一个存储桶中`5`：

```
switch (avg / 10) {
  case 10:
  case 9:
  case 8:
    cout << " Your Average is: " << avg << endl;
    cout << "You Grade is A+ " << endl;
    break;
  case 7:
    cout << " Your Average is: " << avg << endl;
    cout << "You Grade is A " << endl;
  ...
} 
```

此外，您会注意到您打印 »*您的平均值是：...* « 每次，因此您可以在条件*之前*移动该行：

```
cout << " Your Average is: " << avg << endl;
switch (avg / 10) {
  ...
} 
```

最后，由于您有一个非常小的可能结果列表，您可以将它们收集在一个数组中并简单地引用适当的数组元素，甚至不需要`if`/`else if`或`switch`：

```
char[][] grades = {
  "F", "F", "F", "D", "C-", "C+", "B+", "A", "A+", "A+", "A+"
};
char[] grade;
if (avg > 100)
  grade = "F";
else
  grade = grades[max(0, avg / 10)];

cout << " Your average is " << avg << endl;
cout << " Your grade is " << grade << endl; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-16T13:44:46.337

switch 语句用于根据特定值执行一段代码。从某种意义上说，switch 语句可以被认为是 if 语句的一种形式：代码

```
switch (avg) {
   case 1 : { /* code block 1 */ } break;
   case 2 : { /* code block 2 */ } break;
   default : { /* code block default */ } break;
} 
```

可以读作

```
if (1 == avg) { /* code block 1 */ }
else if (2 == avg) { /* code block 2 */ }
else { /*code block default */ } 
```

您的 switch 语句可以读作

```
if (1 == avg) 
{
   if ((avg >= 80) && (avg <= 100))
   {
      cout << " Your Average is: " << avg << endl;
      cout <<  "You Grade is A+ " << endl;
   }
} else if... 
```

并且 avg 不可能 == 1 并且大于 80 且小于 100，这就是为什么你没有得到任何输出的原因。

在 C++ 中，switch 语句不适合测试范围。我只会使用 if 语句：

```
if ( (avg<=100) && (avg >=80))
{
   // you get an A
} else if ... 
```

但是，如果您真的需要使用开关，有几种方法可以解决：

```
switch (avg) {
   case 100:
   case 99:
   case 98:
   ...
   case 80 : { /* you get an A+ */ break; }
   case 79 :
   case 78 : 
   ...
   case 70 : { /* you get a A */ break: }
etc. 
```

这很难看，但它*是*一个 switch 语句。使用 switch 语句的更简洁的方法可能是将 avg “强制”为离散值，而不是范围。

```
int percentile = avg / 10;  // integer division. 
```

现在范围将在 0 到 10 之间，假设 avg 在 0 到 100 之间。这将使开关变得更清晰：

```
switch (percentile) { 
   case 10 :
   case 9:
   case 8: /* You get an A+ */ break;
   case 7: /* You get an A */ break;
   case 6: /* You get a B+ */ break;

etc. 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-16T13:42:00.673

该代码始终在您的默认语句中，因为您的 switch 语句将不会获得任何输入，以防万一。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T13:34:21.400

您使用 switch 有点错误，这不是`if`问题。这：

```
switch (avg){
    case 1:{
        if ((avg >= 80) && (avg <= 100))
        {
            cout << " Your Average is: " << avg << endl;
            cout << "You Grade is A+ " << endl;
        }
        break; 
```

意思是一样的

```
if( avg == 1 )
{
    if ((avg >= 80) && (avg <= 100))
    {
        cout << " Your Average is: " << avg << endl;
        cout << "You Grade is A+ " << endl;
    }
} 
```

所以显然这个条件永远不会满足。对于您的特定情况，您可以移除开关并只留下`if`s。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-17T14:04:59.663

删除`Switch- case`，你会得到你想要的输出，因为在这种情况下它总是默认的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-16T13:34:46.283

当你说

```
Switch(avg)

{
   case 1:
   break;
} 
```

就像说一样`if(avg == 1)`。所以取下你的开关盒并像这样处理它

```
if ((avg >= 80) && (avg <= 100))
//do this
else if ((avg >= 70) && (avg <= 79))
//do that 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-16T13:44:26.290

switch 语句将 1、2、3 等 case 情况识别为 avg 的值。

您只能使用带有特定值的 switch() 控件，而不是间隔。在这种情况下，我建议您使用 else if{} 结构。

或者您可以在多种情况下实现 1 条语句（但不可读）。

```
switch(avg){
   case 80: case 81: case 82:   //do this until 100

      cout << " Your Average is: " << avg << endl;
      cout << "You Grade is A+ " << endl;
      break;
} 
```

而且您不需要为每种情况使用范围（大括号）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-16T14:08:00.430

最好也可能是最简单的做法是去掉 switch 语句并使用“if”和“elseif”。*

# java - Eclipse 说“更新 Android 开发者工具包”

> ID：11505441
> 
> 赞同：8
> 
> 时间：2012-07-16T13:30:50.120
> 
> 标签：java, android, eclipse, eclipse-plugin, ubuntu-12.04

我设法弄乱了我的 Eclipse 和 Android 设置，我不知道如何修复它。问题的症状如下：

In Preferences > Android, I try to select the location of android-sdk-linux, when select the error appears "This Android SDK requires Android Developer Toolkit version 20.0.0 or above. Current version is 18.0.0.v201203301601-306762\. Please将 ADT 更新到最新版本。”

转到帮助 > 检查 Eclipse 中的更新，返回未找到更新

转到帮助 > 安装新软件并选择使用 ADT 插件 - [https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)。选择开发者工具，然后返回

无法完成请求。有关详细信息，请参阅错误日志。“Android DDMS”将被忽略，因为它已经安装。“Android 开发工具”将被忽略，因为它已经安装。“Android Hierarchy Viewer”将被忽略，因为它已经安装。“Android Traceview”将被忽略，因为它已经安装。“Tracer for OpenGL ES”将被忽略，因为它已经安装。

如果我再看看已经安装了什么，Android Development Tools 被列出并且版本是 20.0.0.v201206242043-391819

现在是有趣的部分：

如果我转到帮助 > 关于 > 安装详细信息 > 功能将 Android Development Toolkit 列为版本：20.0.0.v201206242043-391819 但如果我随后进入插件，它将 Android Development Toolkit 列为版本：18.0.0 ...

很抱歉关于更新 ADT 的另一个问题，因为似乎已经有很多关于该主题的问题，但我已经尝试了典型的解决方案，它们似乎让我走得很远

人们经常要求操作系统的一些额外信息：Ubuntu 12.04 LTS Eclipse 平台：版本 3.7.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:55:12.103

最后还是无法修复，所以我把它卸载了，然后从头开始重新设置，谢谢你的帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:46:00.570

在您安装的文件夹中`eclipse`有一个名为`plugins`.
请执行下列操作：

1.  找到插件文件/文件夹`Andriod` `SDK`并将其移动到其他文件夹进行备份。
2.  从`Android`网站下载最新版本的`Android` `SDK`
3.  将其复制/粘贴到您的`plugins`文件夹中
4.  重新开始`eclipse`

一切都应该没问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T13:48:55.353

尝试使用[http://dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/)而不是[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-20T17:01:03.773

从 SDK 管理器将 Android SDK 工具更新到最新版本后，执行以下操作：

1.  转到Eclipse->帮助->安装新软件
2.  在“使用”文本框中键入[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)
3.  从列表中选择全部，然后单击下一步
4.  现在 Eclipse 会提示你为了安装这些新软件，Eclipse 会卸载旧版本（在本例中为 Android Developer Tools），点击下一步，阅读并接受许可并等待下载
5.  重新启动 Eclipse，一切都应该正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T22:59:46.977

在 Eclipse 中运行软件更新（帮助 > 检查更新）并更新 ADT。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-23T06:40:04.283

取消选中“安装期间联系所有更新站点以查找所需软件”

请参阅：[更新到 SDK 21.1 后，无法在 eclipse Juno (Windows 7) 上安装 Android ADT 21.1](https://stackoverflow.com/questions/14866656/can-not-install-android-adt-21-1-on-eclipse-juno-windows-7-after-upadate-to-sd)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-01T04:00:22.140

转到以下站点 [https://developer.android.com/sdk/installing/installing-adt.html](https://developer.android.com/sdk/installing/installing-adt.html) 并从该站点下载 ADT-22.3.0.zip。然后按照那里提到的程序..

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-29T23:02:20.053

我知道我在这个游戏上迟到了，但我想我会做出贡献，因为我自己也遇到了同样的问题。为了在 Eclipse 中检查已安装的插件，请执行以下操作。

从 Eclipse 首选项菜单.. - 选择“安装/更新” - 从常规菜单，应该有一个链接按钮，上面写着“卸载或更新”

这将带您进入一个提示，允许您卸载添加到 Eclipse 设置中的任何内容！

# string - CLR 字符串索引器如何工作？

> ID：11505445
> 
> 赞同：3
> 
> 时间：2012-07-16T13:31:08.527
> 
> 标签：string, clr

[**SSCLI声明**](http://en.wikipedia.org/wiki/Shared_Source_Common_Language_Infrastructure)[**中一些 C++ 代码**](http://www.koders.com/cpp/fidAB4768BA4DF45482A7A2AA6F39DE9C272B25B8FE.aspx)中的注释，指的是 String.Chars 属性的非托管内部实现：[](http://en.wikipedia.org/wiki/Shared_Source_Common_Language_Infrastructure)

 **> 这种方法实际上并没有使用。JIT 将为字符串类上的索引器方法生成代码。

*那么......这是*什么神奇的代码？我理解抖动的全部意义在于它们在不同的情况下会产生不同的代码。但至少，对于现代 x64 Windows 7+ 平台，/a 抖动如何实现这一点？或者那是真正的秘密酱汁？

**额外细节**

不久前，我正在寻找[**在 C# 中迭代​​字符串中单个字符的最快方法**](https://stackoverflow.com/questions/8793762/what-is-the-fastest-way-to-iterate-through-individual-characters-in-a-string-in)。结果证明，不使用不安全代码或复制内容（通过`ToCharArray()`）的最快方法是内置字符串索引器，它实际上是对[String.Chars 属性](http://msdn.microsoft.com/en-us/library/system.string.chars.aspx)的调用。就在我最初的问题中，我问是否有人对索引器的实际工作有深入的了解，但是尽管 Skeet 和 Lippert 都遇到了问题，但我没有得到任何回应。所以我决定自己深入研究：

**停止 1：mscorlib**

通过使用 ildasm 检查 mscorlib.dll，我们可以看到它`String::get_Chars(int32 index)`只是一个`internalcall`指针（加上一个属性）：

```
.method public hidebysig specialname instance char 
        get_Chars(int32 index) cil managed internalcall
{
  .custom instance void System.Security.SecuritySafeCriticalAttribute::.ctor() = ( 01 00 00 00 ) 
} // end of method String::get_Chars 
```

正如[**MethodImplOptions 枚举的文档中所述**](http://msdn.microsoft.com/en-us/library/System.Runtime.CompilerServices.MethodImplOptions.aspx)，“内部调用是对在公共语言运行时本身内实现的方法的调用。” [**2004 年 MSDN 杂志**](http://msdn.microsoft.com/en-us/magazine/cc163896.aspx)的文章和[**SO 帖子**](https://stackoverflow.com/questions/1317861/net-clr-internalcall)都表明`internalcall`名称到非托管实现的映射可以在[**共享源 CLI**](http://en.wikipedia.org/wiki/Shared_Source_Common_Language_Infrastructure)内的 ecall.cpp 中找到。

**第 2 站：ecapp.cpp**

搜索[**ecall.cpp 的在线副本**](http://www.koders.com/cpp/fid006DC4C11F458707221DA6ED2ED9CC3C7AE12E11.aspx)显示它`get_Chars`是由以下人员实现的`COMString::GetCharAt`：

```
FCIntrinsic("get_Chars", COMString::GetCharAt, CORINFO_INTRINSIC_StringGetChar) 
```

**第 3 站：comstring.cpp**

[**comstring.cpp**](http://www.koders.com/cpp/fidAB4768BA4DF45482A7A2AA6F39DE9C272B25B8FE.aspx)确实包含 GetCharAt 的实现，从第 1219 行开始。除了，它前面有以下注释：

```
/*==================================GETCHARAT===================================
**Returns the character at position index.  Thows IndexOutOfRangeException as
**appropriate.
**This method is not actually used. JIT will generate code for indexer method on string class.
**
==============================================================================*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:58:37.080

首先，请参阅 Hans Passant 对关键部分的评论。

`String`在早期的 .NET（CLR 1 和 2）中，CLR 对和`StringBuilder`类型有相当多的特殊支持。事实上，这两种类型非常紧密地结合在一起，`StringBuilder.ToString`不会将实际字符复制到任何地方，字符串索引器仍然使用特殊的抖动支持从同一内存位置获取字符。我认为抖动支持`String.Chars`最初是为了避免通过堆栈传递索引整数，但从那时起抖动似乎有所[改善。](http://blogs.msdn.com/b/vancem/archive/2008/08/19/to-inline-or-not-to-inline-that-is-the-question.aspx)

.NET 4 附带了一个不同的`StringBuilder` [(ropes](http://en.wikipedia.org/wiki/Rope_%28computer_science%29) ) 实现，不再依赖于如何`String`处理。（它必须在 期间复制`ToString`，但追加速度要快得多。）在这些更改之后，

*   `StringBuilder`索引器在大字符串上 显着减慢到*O(log n) 。*[见这里](https://stackoverflow.com/q/1863440/1235565)。它从不内联，即使在短字符串上也不行。
*   `String`indexer 仍然使用（未发布的）特殊抖动支持。我希望这个基本上可以内联到移位、加法和内存提取，或者最近的循环允许的更快的东西。**

# actionscript-3 - AS3：内部类和接口的编译器错误？

> ID：11505447
> 
> 赞同：2
> 
> 时间：2012-07-16T13:31:13.537
> 
> 标签：actionscript-3, flash, air, flash-cs5

由于一些不相关的原因，我需要一个类：

1.  继承（直接或不）从`MovieClip`.
2.  它实现了一个特定的接口（让我们假设这个接口是空的，因为它不会改变任何问题）。
3.  并且其*.as*文件声明了内部类。

以下代码总结了这一点：

```
package {
    import flash.display.MovieClip;
    public class MyClass extends MovieClip implements EmptyInterface { }
}

class MyInnerClass { } 
```

上面代码的问题是它不会总是编译。一旦我将库的一个项目`MyClass`用作*链接*，编译器就会抱怨`MyClass`不是`MovieClip`. 另一方面，如果我手动实例化它并将其添加到舞台，一切都会很好。

看起来接口和内部类在那种非常特殊的情况下是互斥的。事实上，如果我删除内部类，我就不再有这个错误了：

```
package {
    import flash.display.MovieClip;
    public class MyClass extends MovieClip implements EmptyInterface { }
} 
```

当我删除实现的接口但保留内部类时也是如此：

```
package {
    import flash.display.MovieClip;
    public class MyClass extends MovieClip { }
}

class MyInnerClass { } 
```

请注意，我只在 Flash CS5 中对此进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:16:00.743

我说这是编译器的错误。

我已经测试并发现私有类必须扩展任何不是`Object`. 除了扩展类，它还可以实现任何接口。

即使我将类放入更深的包中，这也是一样的。

我已经用 Flash CS6 对此进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T22:01:58.930

如果我没看错的话，你想要一个公共类来扩展一个内部类吗？- 没有什么可以阻止你这样做，只要你将你的*内部类*声明为它自己的打包文件。

根据文档：

```
[dynamic] [public | internal] [final] class className [ extends superClass ] [ implements interfaceName[, interfaceName... ] ] { 
    // class definition here
} 
```

如果它是让你悲伤的界面，你是否也在一个单独的文件中声明了它 - 你会导入吗？正如评论中所回避的那样，命名空间范围很重要，以便编译器了解升级优先级是什么。

例如：

```
package my.example {
   public interface EmptyInterface
   {
   }
} 
```

以便：

```
package {
    import flash.display.MovieClip;
    import my.example.EmptyInterface;
    public class MyClass extends MovieClip implements EmptyInterface { }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T00:57:15.460

如果这不能解决它，我有另一个想法，但先试试这个。
单击文件
单击发布设置
单击设置按钮
取消选中自动声明阶段实例
单击确定

# c# - .NET - 基于 URL 动态加载应用程序配置

> ID：11505451
> 
> 赞同：2
> 
> 时间：2012-07-16T13:31:27.873
> 
> 标签：c#, .net, asp.net-mvc

我正在使用 MVC4 在 .NET 中创建业务应用程序。该应用程序将被多个企业客户使用，每个客户都拥有自己的品牌元素（包括样式表和徽标图像）。UI 为后端平台调用 Web 服务，以填充应用程序的各个区域；调用这些 Web 服务时必须提供客户特定的参数。

我的目标是部署应用程序的单个实例，同时使应用程序根据 URL 本身的一部分动态加载适当的品牌方案和 Web 服务参数。该应用程序将是一个面向公众的消费者应用程序（由我的组织代表公司客户托管），因此 URL 必须易于记忆（因此不依赖查询字符串参数进行访问），例如[https://mysite .com/公司名](https://mysite.com/companyname)。

目的是为产品提供单一的代码库和功能集（使产品比为每个企业客户进行多个不同的部署更容易支持），同时支持有限程度的品牌。我可以进行少量手动操作设置（例如为每个客户创建一个新的 app.config、web.config 或虚拟目录）。

**任何人都可以推荐实施此类应用程序的建议方法或最佳实践吗？请注意，如果必须解析 URL 结构，我需要确保可以在开发、QA 和暂存环境中正确复制该结构。**

我当前的方法需要将应用程序不同地部署到不同的客户特定环境，自定义品牌和 Web 服务参数在 web.config 文件中被称为“appsettings”键，每个客户都不同。这对于少量部署来说是可以的，但随着功能升级/错误修复推送对于数十或数百个客户站点变得必要，这将变得笨拙。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:56:08.217

最简单的解决方案是对大部分内容使用动态样式表。这里有一个很好的例子[Dynamic CSS for ASP.NET MVC?](https://stackoverflow.com/questions/4492748/dynamic-css-for-asp-net-mvc) 和一个完整的源代码示例[http://www.codeproject.com/Articles/171695/Dynamic-CSS-using-Razor-Engine](http://www.codeproject.com/Articles/171695/Dynamic-CSS-using-Razor-Engine)

剩下的就是细节。您需要从 url（或 cookie - 用于在 dev/qa 中测试它）中解析公司标识符。您需要从存储、数据库或配置文件中提取适合您的客户特定值。一件不相关的事情要考虑。[https://mysite.com/companyname](https://mysite.com/companyname)。如果公司改名怎么办？您可能想要一个用户友好但隐秘的技术网址，例如[https://mysite.com/companyname/590](https://mysite.com/companyname/590)。您可以显示用户友好名称，但在您的代码中忽略它，只使用公司 ID。然后，如果公司更改名称，没什么大不了的 - [https://mysite.com/somethingElse/590](https://mysite.com/somethingElse/590)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:44:21.590

实现此目的的一种方法是创建一个目录结构，其中每个客户都有一个文件夹。然后在每个文件夹中都有自己的客户特定文件，例如 css、模板、品牌等。您还可以有一个在应用程序开始时应用的共享/公共文件夹，该文件夹在所有客户之间共享。

然后，您需要从 URL 中提取的唯一内容是客户端的名称（如果可能的话）。这将决定加载和应用哪个文件夹及其内容。

# qt - QT如何摆脱小部件与其父母之间的空间

> ID：11505455
> 
> 赞同：0
> 
> 时间：2012-07-16T13:31:41.960
> 
> 标签：qt, user-interface, qt-designer

我喜欢在 qtdesigner 中设计我的用户界面，因为它非常简单。但是，小部件和它们的父级之间总是有空间，我想消除这些空间。

**问题示例**

*   我创建了一个简单的对话框并向其中添加了一个 webview。然后横向布局。
*   为了使父级更明显，我修改了它的 css 以使其背景颜色为绿色

瞧，我想去掉绿色部分，因为在我看来它们让程序看起来很丑。 ![丑陋的形象](../Images/4b711f6d7df0e2b9e39aa03360a98482.png) 链接到我的 ui 文件。 [从我的 Dropbox 下载 ui 文件](https://dl.dropbox.com/u/51343591/problematic.ui) 或[从 pastebin 获取它](http://pastebin.com/nTykFHi5)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:40:30.227

在 Qt Designer 中，选择您的顶级小部件（在本例中`Dialog`），然后查看右侧边栏上的**Property Editor 。**一直向下滚动，您将看到一个引用分配给该小部件的布局的部分。您想要更改`layoutLeftMargin`、`layoutRightMargin`等属性。

# c++ - method gets called with null pointer

> ID：11505457
> 
> 赞同：0
> 
> 时间：2012-07-16T13:31:48.263
> 
> 标签：c++

> **Possible Duplicate:**
> [Calling class method through NULL class pointer](https://stackoverflow.com/questions/2505328/calling-class-method-through-null-class-pointer)

**How is the below program giving output?**

```
class A
{
    public:
    void dosomething()
    {
        std::cout <<"hello world";
    }
};
int main()
{
    A *ptr =NULL;
    ptr->dosomething(); <---------------- outputs hello world
    return 0;
} 
```

[http://ideone.com/oLtJN](http://ideone.com/oLtJN)

Shouldn't the program crash as the `dosomething()` is called by the `null pointer`.

# regex - vim 中乳胶命令的全局替换

> ID：11505460
> 
> 赞同：1
> 
> 时间：2012-07-16T13:31:58.073
> 
> 标签：regex, vim, latex

我正在写一个很长的文档，并且我经常将一些术语格式化为斜体。一段时间后，我意识到也许这就是我现在想要的，所以我想删除所有将文本格式化为斜体的乳胶命令。

例子：

`\textit{Vim} is undoubtedly one of the best editors ever made. \textit{LaTeX} is an extremely powerful, intelligent typesetter. \textbd{Vim-LaTeX} aims at bringing together the best of both these worlds`

我如何运行一个替换命令来识别所有实例`\textit{whatever}`并将它们更改为just`whatever`而不影响不同的命令，例如`\textbd{Vim-LaTeX}`本示例中的命令？

编辑：从技术上讲，有帮助的答案是来自 Igor 的答案，我会将其标记为正确的答案。尽管如此，应该考虑康拉德的回答，因为它显示了要遵循的正确乳胶策略。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T13:37:06.887

您根本不应该在文本中使用格式化命令。

LaTeX 是围绕*语义标记*的思想构建的。所以不要说“这个文本应该是斜体”，你应该使用它的*函数*来标记文本。例如：

```
\product{Vim} is undoubtedly one of the best editors ever made. \product{LaTeX}
is an extremely powerful, intelligent typesetter. \product{Vim-LaTeX} aims at
bringing together the best of both these worlds 
```

…然后，在你的序言、一个包或一个文档类中，你（重新）定义一个宏`\product`来设置你想要的格式。这样，您可以在您认为有必要时调整宏，而无需更改代码。

或者，如果您想完全删除格式，只需让宏显示其裸参数：

```
\newcommand*\product[1]{#1} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T13:36:54.047

使用这个替换命令：

```
% s/\\textit{\([^}]*\)}/\1/ 
```

如果 textit 可以跨越多行：

```
%! perl -e 'local $/; $_=<>; s/\\textit{([^}]*)}/$1/g; print;' 
```

你也可以在没有 perl 的情况下做到这一点：

```
%s/\\textit{\(\_.\{-}\)}/\1/g 
```

这里：

*   `\_.`-- 任何符号，包括换行符
*   `\{-}`——`*`不贪心。

# java - Currency: number of fraction digits unexpectedly zero

> ID：11505461
> 
> 赞同：4
> 
> 时间：2012-07-16T13:31:59.827
> 
> 标签：java, android, locale, currency

I am trying to parse and store currency amounts as `BigDecimal` values. I am given the locale of the currency in question, and in most cases it works fine, but I'm getting unexpected results when the currency is the Costa Rican colón.

I am informed by my Costa Rican customers that a typical currency amount might look like `1.508.534,16` with the `,16` being the fractional part (two decimal places). However, when I call `Currency.getDefaultFractionDigits()` it returns `0` instead of `2` as the number of fractional digits. As a result, the values I'm calculating are being wrongly truncated.

Code looks like this:

```
// currencyLocale is "es_CR"
Currency currency = Currency.getInstance(currencyLocale);
int scale = currency.getDefaultFractionDigits();
// scale is 0 instead of 2

BigDecimal v = new BigDecimal("12.34")
                          .setScale(scale, BigDecimal.ROUND_HALF_DOWN);
// gives 12 instead of 12.34 
```

Note that although the end-user-visible amounts are correctly formatted for the locale with the `,` as the decimal separator, the data source here is providing the values as standard `1234.56` decimal amounts.

What am I doing wrong?

* * *

**UPDATE**

After doing some more research, and [reporting the issue to Google](http://code.google.com/p/android/issues/detail?id=35057), I am now convinced this is an Android bug. Google's response is that this works as intended, since the affected currencies can only be spent in whole-number multiples (smallest coin is 5 colón).

Google's response ignores the fact that you can quite legitimately have fractional amounts in your bank account, though, as a result of wire transfers, interest calculations, etc.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:10:05.063

不是真正的答案，但这会打印 2（Java JDK，而不是 Android）：

```
public static void main(String[] args) {
    Locale currencyLocale = new Locale("es","CR");
    Currency currency = Currency.getInstance(currencyLocale);
    System.out.println(currency.getDefaultFractionDigits());
} 
```

# php - robots.txt pattern matching not working

> ID：11505462
> 
> 赞同：3
> 
> 时间：2012-07-16T13:32:01.680
> 
> 标签：php, .htaccess, robots.txt

I need to get a pattern matching rule to get this results.

```
allow /dir/path_name.htm/something
disallow /dir/path_name/something
and disallow /dir/path_name.htm 
```

Actually those two disallows are typos accumulated all along. Those pages never exist. How to stop google crawling them never again?

I tested here: [http://www.frobee.com/robots-txt-check/](http://www.frobee.com/robots-txt-check/) with the following, but seems nothing working.

```
Allow: /dir/*.htm/?*
Disallow: /dir/* 
```

What went wrong? Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:56:55.207

根据规范：

[http://www.robotstxt.org/norobots-rfc.txt](http://www.robotstxt.org/norobots-rfc.txt)

`*`不允许使用通配符 ( )。路径只是完全匹配。我的猜测是您正在使用某种形式的重写，并且您不希望显示具有相同内容的多个 ulr。在这种情况下，这可能是一个更好的解决方案：

[http://googlewebmastercentral.blogspot.de/2009/02/specify-your-canonical.html](http://googlewebmastercentral.blogspot.de/2009/02/specify-your-canonical.html)

# lucene - With Lucene, if someone searches for "red barn", how do you also return results that contain "redbarn"?

> ID：11505464
> 
> 赞同：1
> 
> 时间：2012-07-16T13:32:02.007
> 
> 标签：lucene, elasticsearch

I have a working search where if someone searches for two separate words (like "red barn", Lucene does a great job of returning records that have "red barn", "barn red", and "red tractor next to the big brown barn". That's great, but the results do not return anything that contains "redbarn" (unless you specifically search for "redbarn", but then you don't get "red barn" records).

I'm just using the standard analyzer at the moment, but am not sure what needs to change in order to get the all records I'd like.

If it matters, I'm using the NEST client on top of ElasticSearch (which is Lucene under the hood). I've researched the various analyzers and properties available but haven't found the right combination to do this.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:52:59.243

最好的方法是编写一个分析器，将“redbarn”标记为[“red”，“barn”]。Lucene 已经为德语做到了，你可以看看[DictionaryCompoundWordTokenFilter](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/analysis/compound/DictionaryCompoundWordTokenFilter.html)例如。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T17:14:50.790

标准分析器适用于大多数情况，但如果您需要详细的文本分析，则需要编写自己的分析器。

[Solr 附带的WorldDelimeterFilter](http://svn.apache.org/repos/asf/lucene/java/tags/lucene_solr_3_4_0/solr/core/src/java/org/apache/solr/analysis/WordDelimiterFilter.java)应该可以解决您的问题。Solr 是建立在 lucene 之上的，因此如果您使用 solr 附带的过滤器，应该不会有问题。请参见下面的示例：

```
public class CustomAnalyzer extends Analyzer { 
  public TokenStream tokenStream(String fieldName, Reader reader) { 
    TokenStream ts = new WhitespaceTokenizer(reader); 
    ts = new WordDelimiterFilter(ts, 1, 1, 1, 1, 1); 
    ts = new LowerCaseFilter(ts); 
    return ts; 
  } 
} 
```

# r - 解析数字列表的快速方法

> ID：11505465
> 
> 赞同：1
> 
> 时间：2012-07-16T13:32:04.117
> 
> 标签：r

我在 CSV 文件中有一列看起来像`c("","1","1 1e-3")`（即空格分隔）。我试图遍历所有值，`sum()`在至少有一个值的地方取 of 值，`NA`否则返回。

我的代码目前执行以下操作：

```
x <- c("","1","1 2 3")
x2 <- as.numeric(rep(NA,length(x)))
for (i in 1:length(x)) {
  si <- scan(text=x[[i]],quiet=TRUE)
  if (length(si) > 0)
    x2[[i]] <- sum(si)
} 
```

我正在努力做到这一点；`x`实际上是来自包含几十万行的 CSV 文件的一组列，并且认为应该可以在 R 中执行此操作。

（这些是来自可逆跳转 MCMC 算法后部的细化样本，因此随着整个文件的维数变化组合多个值，我想要有用的列）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:14:03.840

基于@Chase 的想法，但处理 NA 并避免为辅助函数命名：

```
unlist(lapply(strsplit(x, " "),
              function(v)
                if (length(v) > 0)
                  sum(as.numeric(v))
                else
                  NA
      )      ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:58:29.857

这似乎执行得更快一些，并且可能对您有用。

```
#define a helper function
f <- function(x) sum(as.numeric(x))
unlist(lapply((strsplit(x3, " ")), f))
#-----
[1] 0 1 6 
```

这将返回零而不是 NA，但也许这对您来说不是一个交易破坏者？

让我们看看这如何扩展到更大的问题：

```
#set up variables
x3 <- rep(x, 1e5)
x4 <- as.numeric(rep(NA,length(x3)))
#initial approach
system.time(for (i in 1:length(x3)) {
  si <- scan(text=x3[[i]],quiet=TRUE)
  if (length(si) > 0)
    x4[[i]] <- sum(si)
})
#-----
   user  system elapsed 
   30.5     0.0    30.5 

#New approach:
system.time(unlist(lapply((strsplit(x3, " ")), f)))
#-----
   user  system elapsed 
   0.82    0.01    0.84 
```

# php - PHP read a dat file and output lowest difference

> ID：11505466
> 
> 赞同：-2
> 
> 时间：2012-07-16T13:32:03.613
> 
> 标签：php, file-get-contents

This is what I have so far:

```
ini_set('auto_detect_line_endings',true);

$filename = ('w_data.dat');

$lines = split("\n", file_get_contents($filename));
$spread = array();

for($i = 6; $i < 35; $i++){
    echo $lines[$i];
    $date = $lines[$i][2] . $lines[$i][3];
    $max = $lines[$i][6] . $lines[$i][7];
    $min = $lines[$i][12] . $lines[$i][13];
    $spread[] = $max - $min;
    $lowest = min($spread);

    echo 'date: ', $date, ' max: ', $max, ' min: ', $min, ' lowest: ', $lowest, ' <br>';
}

print_r($lines); 
```

I get the output of all 30 days. I only need the line that has the lowest difference.

Thanks for any and all help.

```
 1  88    59    74          53.8       0.00 F       280  9.6 270  17  1.6  93 23 1004.5
    2  79    63    71          46.5       0.00         330  8.7 340  23  3.3  70 28 1004.5
    3  77    55    66          39.6       0.00         350  5.0 350   9  2.8  59 24 1016.8
    4  77    59    68          51.1       0.00         110  9.1 130  12  8.6  62 40 1021.1
    5  90    66    78          68.3       0.00 TFH     220  8.3 260  12  6.9  84 55 1014.4
    6  81    61    71          63.7       0.00 RFH     030  6.2 030  13  9.7  93 60 1012.7
    7  73    57    65          53.0       0.00 RF      050  9.5 050  17  5.3  90 48 1021.8
    8  75    54    65          50.0       0.00 FH      160  4.2 150  10  2.6  93 41 1026.3
    9  86    32*   59       6  61.5       0.00         240  7.6 220  12  6.0  78 46 1018.6
   10  84    64    74          57.5       0.00 F       210  6.6 050   9  3.4  84 40 1019.0
   11  91    59    75          66.3       0.00 H       250  7.1 230  12  2.5  93 45 1012.6
   12  88    73    81          68.7       0.00 RTH     250  8.1 270  21  7.9  94 51 1007.0
   13  70    59    65          55.0       0.00 H       150  3.0 150   8 10.0  83 59 1012.6
   14  61    59    60       5  55.9       0.00 RF      060  6.7 080   9 10.0  93 87 1008.6
   15  64    55    60       5  54.9       0.00 F       040  4.3 200   7  9.6  96 70 1006.1
   16  79    59    69          56.7       0.00 F       250  7.6 240  21  7.8  87 44 1007.0
   17  81    57    69          51.7       0.00 T       260  9.1 270  29* 5.2  90 34 1012.5
   18  82    52    67          52.6       0.00         230  4.0 190  12  5.0  93 34 1021.3
   19  81    61    71          58.9       0.00 H       250  5.2 230  12  5.3  87 44 1028.5
   20  84    57    71          58.9       0.00 FH      150  6.3 160  13  3.6  90 43 1032.5
   21  86    59    73          57.7       0.00 F       240  6.1 250  12  1.0  87 35 1030.7
   22  90    64    77          61.1       0.00 H       250  6.4 230   9  0.2  78 38 1026.4
   23  90    68    79          63.1       0.00 H       240  8.3 230  12  0.2  68 42 1021.3
   24  90    77    84          67.5       0.00 H       350  8.5 010  14  6.9  74 48 1018.2
   25  90    72    81          61.3       0.00         190  4.9 230   9  5.6  81 29 1019.6
   26  97*   64    81          70.4       0.00 H       050  5.1 200  12  4.0 107 45 1014.9
   27  91    72    82          69.7       0.00 RTH     250 12.1 230  17  7.1  90 47 1009.0
   28  84    68    76          65.6       0.00 RTFH    280  7.6 340  16  7.0 100 51 1011.0
   29  88    66    77          59.7       0.00         040  5.4 020   9  5.3  84 33 1020.6
   30  90    45    68          63.6       0.00 H       240  6.0 220  17  4.8 200 41 1022.7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:34:43.070

```
$veryLowest = null;

for (...) {
    ...

    if ($veryLowest === null || $lowest < $veryLowest) {
        $veryLowest = /* the current line */;
    }
}

echo $veryLowest; 
```

# android - Getting minWidth (appwidget-provider) across all devices, phones and tablets

> ID：11505469
> 
> 赞同：5
> 
> 时间：2012-07-16T13:32:20.010
> 
> 标签：android, android-widget

My android application (Banner) uses widgets sizes from 1x1 to 8x1\. I'm getting annoyed with trying to get the magic minWidth set in the XML `appwidget-provider` files.

Old school method to get widget minimum size was something like [74 x (n) - 2]. Now the method is [70 x (n) - 30]. Neither of these work well past 3x1 widgets. 4x1 if set correctly on a phone usually becomes a 3x1 widget on tablets because of dpi/density/size, etc.

So I ended up placing `xml` files as such to adjust width as needed. However, I'm really only guessing that the increased minWidth works with all devices as I only tested on my own tablet.

So my question is this... has anyone figured out the BEST minWidths or methods for making widgets on different device sizes, etc?

![enter image description here](../Images/d9c0de1f7f911f577e008cab6bd9e027.png)

# mvc-mini-profiler - MVC-Mini-Profiler - Web 表单 - 'MiniProfiler' 未定义

> ID：11505470
> 
> 赞同：6
> 
> 时间：2012-07-16T13:32:21.520
> 
> 标签：mvc-mini-profiler

[我厌倦了使用http://miniprofiler.com/](http://miniprofiler.com/)上的 HowTo 安装 MiniProfiler

这似乎有效：

```
<%= StackExchange.Profiling.MiniProfiler.RenderIncludes() %> 
```

但是当我启动该站点时，我收到以下错误消息：

```
'MiniProfiler' is undefined 
```

问题出在包含的 MiniProfiler 代码中：

```
 var initMp = function(){
                load('/mini-profiler-resources/includes.js?v=6cJT7lsVkH6SxAlFpQstk1/AgtUwMUApXN3pviVvaRE=',function(){
                    MiniProfiler.init({..... 
```

当我尝试`http://localhost/mini-profiler-resources/includes.js?v=6cJT7lsVkH6SxAlFpQstk1/AgtUwMUApXN3pviVvaRE=`用 IE 打开时，我得到一个 404。

我什至尝试了[在stackoverflow上找到的](https://stackoverflow.com/questions/7771911/mini-profiler-does-not-render-scripts)这个解决方案，但它对我不起作用:(

有谁知道这个问题，或者知道我能做些什么来解决这个问题？

## **解决方案**

我通过添加[此](https://stackoverflow.com/questions/7771911/mini-profiler-does-not-render-scripts)解决方案中的配置部分和“runAllManagedModulesForAllRequests”行来解决问题：

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <handlers>
        <add name="UrlRoutingModule1" path="mini-profiler*.js" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
        <add name="UrlRoutingModule2" path="mini-profiler*.css" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
        <add name="UrlRoutingModule3" path="mini-profiler*.tmpl" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
    </handlers>
</system.webServer> 
```

“诀窍”是添加下面的行以使处理程序工作。

```
<modules runAllManagedModulesForAllRequests="true"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-15T20:58:54.593

`web.config`通过将以下内容添加到主文件中，您应该能够更简洁地避免此问题（一个处理程序行而不是三个） ：

```
<system.webServer>
  ...
  <handlers>
    <add name="MiniProfiler" path="mini-profiler-resources/*" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
  </handlers>
</system.webServer> 
```

# android - XML 无法正确生成 android

> ID：11505478
> 
> 赞同：0
> 
> 时间：2012-07-16T13:32:44.673
> 
> 标签：android

我有一个扩展类`AsyncTask`，这个类用于生成 XML 文件。这是我的课

```
import java.io.File;
import java.util.ArrayList;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerConfigurationException;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Attr;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;

import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;

import android.util.Log;
import android.widget.Toast;

public class GenerateXML extends AsyncTask<String, Void, String> {

private final static String TAG = "GENECREATE_XML: "; 

DocumentBuilder docBuilder; 
DocumentBuilderFactory docFactory;

ArrayList<Case> caseArray;
Context c;

ProgressDialog pd; 

String address; 

public GenerateXML(ArrayList<Case> caseArray, Context c) {

    caseArray = new ArrayList<Case>(); 

    this.caseArray = caseArray; 
    this.c = c; 

    address = "/sdcard/case.xml";

}

protected void onPreExecute() {

      pd=ProgressDialog.show(c,"Please Wait..","Generating XML",false);

}

@Override
protected String doInBackground(String... params)  {

    int i = 0; 

    docFactory = DocumentBuilderFactory.newInstance();

    try {
         docBuilder = docFactory.newDocumentBuilder();
    } catch (ParserConfigurationException e) {
        Log.e(TAG, e.getMessage()); 
    }

    Document doc = docBuilder.newDocument(); 

    //root element in the xml
    Element rootCase = doc.createElement("Cases"); 
    doc.appendChild(rootCase);

    for(Case cases : caseArray) {

    // case elements
    Element caseElement = doc.createElement("case");
    rootCase.appendChild(caseElement);

    // set attribute to staff element
    Attr attr = doc.createAttribute("id");
    attr.setValue(Integer.toString((++i)));
    caseElement.setAttributeNode(attr);

    // pcn
    Element pcn = doc.createElement("pcn");
    pcn.appendChild(doc.createTextNode(cases.getCaseNumber()));
    caseElement.appendChild(pcn);

    //status
    Element status = doc.createElement("status");
    status.appendChild(doc.createTextNode(Integer.toString(cases.getStatus())));
    caseElement.appendChild(status);

    //date
    Element date = doc.createElement("date");
    date.appendChild(doc.createTextNode(cases.getDate()));
    caseElement.appendChild(pcn);

    }

    TransformerFactory transformerFactory = TransformerFactory.newInstance();
    Transformer transformer = null;
    try {
        transformer = transformerFactory.newTransformer();
    } catch (TransformerConfigurationException e) {
        Log.e(TAG, e.getMessage()); 
    }

    DOMSource source = new DOMSource(doc);
    StreamResult result = new StreamResult(new File(address));

    try {
        transformer.transform(source, result);
    } catch (TransformerException e) {
        Log.e(TAG, e.getMessage());
    }

    return null;
}

protected void onPostExecute(String result) {
    pd.dismiss(); 
    Toast.makeText(c, "Finished. File saved to: " + address, Toast.LENGTH_LONG).show(); 
} 
```

}

我的 XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<Cases/> 
```

为什么不显示整个内容`ArrayList<Case>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:43:29.650

问题似乎是您在给他们孩子之前附加项目。我建议你在 for 循环之后移动这一行：

```
doc.appendChild(rootCase); 
```

考虑到这一点，您可能还需要重构 for 循环的内容。

# html - 使用 HTML5 和 XHR 在 codeigniter 中上传多个文件

> ID：11505487
> 
> 赞同：0
> 
> 时间：2012-07-16T13:33:10.057
> 
> 标签：html, codeigniter, xmlhttprequest

我正在使用 html5 和 xhr 进行多文件上传，如您所见，我正在循环发送请求，这是一个不好的概念，但是当我将文件发送到循环外并且只有最后一个文件得到时，我无法上传文件上传。我哪里错了？

```
$('#uploadimg').on('click', function(e) {

    var files = document.getElementById('files').files;

    var formData = new FormData();
    for (var i = 0; i < files.length; i++) {
        formData.append('file', files[i]);

        var xhr = new XMLHttpRequest();
        xhr.open('POST', 'http://localhost/ajaxuploader/upload/uploadimg');
        xhr.onload = function() {
            if (xhr.status === 200) {
                console.log('all done: ' + xhr.status);
            } else {
                console.log('Something went terribly wrong...');
            }
        };

        xhr.send(formData);

    }

    // now post a new XHR request
}); 
```

代码点火器

```
public function uploadimg (){

    $config['upload_path'] = FCPATH . 'uploads/' ;
    $config['allowed_types'] = 'gif|jpg|png|jpeg|pdf|doc';

    $config['remove_spaces'] = 'TRUE';

    $this -> load -> library('upload', $config);
    //$this->upload->initialize($config);

    foreach ($_FILES as $k => $f) :
        $this -> upload -> do_upload($k);
    endforeach;
    //$this->index();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T20:49:10.810

您应该首先查看的似乎是您的 js for 循环。ID应该是唯一的，所以我会排除这种方法。

我可能会循环每个输入字段，检查 attr type == 文件，然后将其附加到您的 formData 对象。

```
var inpts    = document.getElementsByTagName('input');      

    for(var i=0; i < inpts.length; i++)
    {
       if(inpts[i].getAttribute('type') == 'file')
       {
           formData.append('myFiles[]', inpts[i].files[0]);
       }
    } 
```

在服务器端，我会查看您的 foreach 循环，也许 for 循环就足够了。

```
for($i=0; $i < count($_FILES); $i++){
   $this->upload->initialize(); //new initialization for each file
   $this->upload->do_upload($_FILES[$i]);
   continue;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:32:52.760

大家好，我发现问题codeigniter工作正常，问题出在jquery中。这是导致问题的线路。“formData.append（文件[i].name，文件[i]）；” 感谢大家为解决我的问题所做的努力

```
$('#uploadimg').on('click', function(e) {
            //console.log(files);
            //               files = document.getElementById('files').files;
            var formData = new FormData();
            $(files).each(function(i) {
                formData.append(files[i].name, files[i]);
            })
            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://localhost/ajaxuploader/upload/uploadimg');
            xhr.onload = function(data) {
                console.log(xhr.responseText);
            };

            xhr.send(formData);
        }); 
```

# iphone - 如何使用 AVAssetWriter 更改视频元数据？

> ID：11505489
> 
> 赞同：4
> 
> 时间：2012-07-16T13:33:30.303
> 
> 标签：iphone, avassetwriter

如何使用`AVAssetWriter`API 更改视频（.mp4）元信息？

我不想重新编码。只想修改视频元信息。

如何编写下一个代码？

```
AVAssetWriter *writer = [AVAssetWriter assetWriterWithURL:[NSURL URLWithString:myPath] fileType:AVFileTypeQuickTimeMovie error:nil]; 
```

如果我弄错了，请给我一些提示。

谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T11:33:19.090

参考以下代码。

```
AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:[NSURL fileURLWithPath:"your path"] options:nil];
NSMutableArray *metadata = [NSMutableArray array];
AVMutableMetadataItem *metaItem = [AVMutableMetadataItem metadataItem];
metaItem.key = AVMetadataCommonKeyPublisher;
metaItem.keySpace = AVMetadataKeySpaceCommon;
metaItem.value = @"your_value";
[metadata addObject:metaItem];

AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:asset presetName:AVAssetExportPresetPassthrough];
exportSession.outputURL = [NSURL fileURLWithPath:"your output path"];
CMTime start = CMTimeMakeWithSeconds(0.0, BASIC_TIMESCALE);
CMTimeRange range = CMTimeRangeMake(start, [asset duration]);
exportSession.timeRange = range;
exportSession.outputFileType = AVFileTypeAppleM4V // AVFileTypeMPEG4 or AVFileTypeQuickTimeMovie (video format);
exportSession.metadata = metadata;
exportSession.shouldOptimizeForNetworkUse = YES;
[exportSession exportAsynchronouslyWithCompletionHandler:^{
     switch ([exportSession status]) 
     {
         case AVAssetExportSessionStatusCompleted:
             NSLog(@"Export sucess");
         case AVAssetExportSessionStatusFailed:
             NSLog(@"Export failed: %@", [[exportSession error] localizedDescription]);                
         case AVAssetExportSessionStatusCancelled:
             NSLog(@"Export canceled");
                default:
                    break;
             }
         }]; 
```

# jquery - Jquery Datepicker Rails 3日期格式问题

> ID：11505495
> 
> 赞同：5
> 
> 时间：2012-07-16T13:33:54.490
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, datepicker

我正在尝试将 JQuery UI 日期选择器用于创建事件的表单。

表单本身渲染得很好，如果我使用正常的 rails date_field 信息保存没有任何问题。但是，当我尝试使用日期选择器时，它指出表单不能为空，即使我选择了一个日期。我意识到这是由于 rails 和 datepicker 使用的日期格式不同，所以我尝试了以下代码：

```
$(function(){
    $("#dateField").datepicker({
        dateFormat: "yyyy-mm-dd"
    });
}); 
```

但这似乎没有奏效。日期仍以 datepickers 默认格式显示，并将该格式作为参数传递，这会导致错误。任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T14:08:27.183

几个月前我遇到了类似的问题。

试试这种格式：

```
$(function (){
$('#dateField').datepicker({ dateFormat: 'D, dd M yy' });
}); 
```

它适用于我所有的 Rails 应用程序。

**编辑**

还要确保保存日期（在数据库上）的列的数据类型设置为`string`而不是`date`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:50:28.190

请澄清什么不起作用？日历没有出现？试试这个代码

```
jQuery(document).ready(function($) {
    $("#dateField").datepicker({
        dateFormat: "yyyy-mm-dd"
    });

}) 
```

什么是默认格式？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-25T16:15:58.387

答案已经过时了，我使用过 Postgres 和 Datetime 字段
`{format: "dd/mm/yyyy"}` ，它确实有效。

# php - 在普通 php 上是否有任何 i18n 库（没有任何框架）？

> ID：11505496
> 
> 赞同：1
> 
> 时间：2012-07-16T13:33:56.113
> 
> 标签：php, internationalization

> **可能重复：**
> [你如何建立一个多语言的网站？](https://stackoverflow.com/questions/39562/how-do-you-build-a-multi-language-web-site)

我继承了一些代码，这些代码只是普通的 php，我必须在其中进行一些更改。因为改动很小，最大的需求是支持多语言，所以我选择保留现有代码而不是重写它，但我需要一个用于纯 php 的 i18n 库。

是否有任何与普通 php 一起使用的默认库？我真的不知道，使用/下载的链接会很有帮助。

**更新1：**

`__()`如果您可以向我指出一些类似控制台的工具，它可以帮助我构建一个包含所有应该翻译的字符串的文件，而不是手动完成（在 CakePHP 中是函数之间的每个实例），那将是很好的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T13:38:42.063

[intl](http://php.net/manual/en/book.intl.php) (从 php 5.3 开始) 和[gettext](http://php.net/manual/en/book.gettext.php) (从永远)

从 php intl 扩展文档页面：

> 国际化扩展（进一步称为 Intl）是[ICU](http://www.icu-project.org/)库的包装器，使 PHP 程序员能够在其脚本中执行 符合[UCA](http://www.unicode.org/reports/tr10/)的排序规则和日期/时间/数字/货币格式。

从 gettext 文档页面：

> 该软件包为程序员、翻译人员甚至用户提供了一套集成良好的工具和文档。具体来说，GNU gettext 实用程序是一组工具，它提供了一个框架，其他免费包可以在该框架内生成多语言消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:36:11.867

[gettext](http://php.net/gettext)是使用非常普遍的 gettext 系统的默认 PHP i18n 扩展。

# github - Github Wiki - 源代码语法高亮

> ID：11505503
> 
> 赞同：14
> 
> 时间：2012-07-16T13:34:06.467
> 
> 标签：github, syntax-highlighting, wiki

如何在我的项目 github wiki 中编写一些代码并突出显示语法？

在 MoinMoin wiki 我习惯做

```
{{{#!highlight cpp
my code
}}} 
```

它工作得很好。

对 github wiki 有什么建议吗？提前致谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-16T13:50:49.517

您使用“```”
ruby​​ 示例：

```
```ruby
code and stuff
``` 
```

# pentaho - Pentaho Design Studio - 空白报告 - 警告 Invalid chunk

> ID：11505506
> 
> 赞同：0
> 
> 时间：2012-07-16T13:34:16.607
> 
> 标签：pentaho, pentaho-design-studio

我使用 jdbc 连接创建了一个简单的 xaction。该操作成功但得到一个空白报告。

结果集未显示。

```
enter code here
<?xml version="1.0" encoding="UTF-8"?>
<action-sequence> 
<title>latest1</title>
<version>1</version>
<logging-level>TRACE</logging-level>
<documentation> 
<author>reskin</author>  
<description>Empty blank action sequence document</description>  
<help/>  
<result-type>none</result-type>  
<icon/> 
</documentation>

<inputs/>

<outputs> 
<resultset type="result-set" is-output-parameter="false"> 
<destinations> 
<response>resultset</response> 
</destinations> 
</resultset> 
</outputs>

<resources/>

<actions> 
<action-definition> 
  <component-name>SQLLookupRule</component-name>
  <action-type>Relational</action-type>
  <action-outputs> 
    <query-result type="result-set" mapping="resultset"/> 
  </action-outputs>
  <component-definition> 
    <query><![CDATA[select * from cust_txn_list]]></query>  
    <live><![CDATA[true]]></live>  
    <driver><![CDATA[com.mysql.jdbc.Driver]]></driver>  
    <connection><![CDATA[jdbc:mysql://localhost:3306/hive_sample]]></connection>  
    <user-id><![CDATA[root]]></user-id>  
    <password><![CDATA[553450]]></password> 
  </component-definition> 
 </action-definition>

</actions> 
</action-sequence> 
```

我在 BI 服务器日志中收到以下警告消息

```
Parameters: Invalid chunk '' ignored. is the warning 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:02:33.390

我的问题解决了。问题是由于输出参数，“输出参数复选框应该始终选中。

# java - PowerMock + Drools + JBoss 的 FileNotFoundException

> ID：11505512
> 
> 赞同：0
> 
> 时间：2012-07-16T13:34:35.563
> 
> 标签：java, jboss, drools, powermock

有人用过“PowerMock + Drools + JBoss”的组合吗？

当我运行尝试在 JUnit 测试（JUnit 4.10）中使用单元测试 drools 规则时，我加载了 drl 规则知识 kobtext：

```
KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();
kbuilder.add(ResourceFactory.newClassPathResource("com/mycompany/myproject/rooles.drl"), ResourceType.DRL); 
```

它工作正常。org.drools.io.impl.ClassPathResource 包含 3 个类加载器：

*   java.net.FactoryURLClassLoader
*   org.jboss.mx.loading.UnifiedClassLoader
*   sun.misc.Launcher

但是当我添加

```
@RunWith(org.powermock.modules.junit4.PowerMockRunner.class) 
```

到单元测试 org.drools.io.impl.ClassPathResource 包含 2 个类加载器：

*   org.powermock.core.classloader.MockClassLoader
*   sun.misc.Launcher

并且测试因 java.io.FileNotFoundException 而失败：

```
java.lang.RuntimeException: java.io.FileNotFoundException: 'com/mycompany/myproject/rooles.drl' cannot be opened because it does not exist 
at org.drools.compiler.PackageBuilder.addKnowledgeResource(PackageBuilder.java:638) 
at org.drools.builder.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:28)
...
Caused by: java.io.FileNotFoundException: 'com/wiley/cms/jqa/service/lifecycle/lifecycle.drl' cannot be opened because it does not exist 
at org.drools.io.impl.ClassPathResource.getURL(ClassPathResource.java:128) 
at org.drools.io.impl.ClassPathResource.getInputStream(ClassPathResource.java:109) 
at org.drools.compiler.PackageBuilder.addPackageFromDrl(PackageBuilder.java:352) 
at org.drools.compiler.PackageBuilder.addKnowledgeResource(PackageBuilder.java:538)
... 
```

谁能建议如何避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:04:59.667

解决方案是添加 @PowerMockIgnore("org.drools.*") 注释。

# android - 带有按钮的列表 - 只有第一个按钮注册

> ID：11505513
> 
> 赞同：0
> 
> 时间：2012-07-16T13:34:38.013
> 
> 标签：android

我已经实现了一个 ListView，它的每个元素都包含一个复选框和一个按钮。我为视图编写了一个适配器，如下所示：

```
public class myadapter extends SimpleAdapter
{
    LayoutInflater mLayoutInflater;

    public myadapter(Context context, List<? extends Map<String, ?>> data, int resource, String[] from, int[] to)
    {
        super(context, data, resource, from, to);
        mLayoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) 
    {
        View view = null;

        Log.i("xx","getView called: position="+position);

        if (convertView != null)
        {
            view = convertView;
        } 
        else 
        {      
            view = mLayoutInflater.inflate(R.layout.custom_row_view, parent, false);
        }

        Button buttonEdit = (Button) view.findViewById(R.id.editbut);
        CheckBox cb = (CheckBox)view.findViewById(R.id.checkbox);

        buttonEdit.setOnClickListener(new OnClickListener()
        {   
            public void onClick(View arg0)
            {
                Log.i("xx","Button pressed! position ="+position);
            }
        });
        cb.setOnCheckedChangeListener(new OnCheckedChangeListener()
        {
            @Override
            public void onCheckedChanged(CompoundButton arg0, boolean arg1) 
            {
                Log.i("xx","Checkbox changed! position ="+position);
            }
          });

        return super.getView(position, convertView, parent);
    }
} 
```

在运行时，如果我单击列表顶行中的按钮，我总是会在日志输出中看到“按下按钮！位置 = 0”。同样，如果我单击复选框，我会看到“复选框已更改！位置 = 0”。如果我单击列表中任何其他元素上的按钮，就会出现问题。有时我会看到正确的日志消息，但有时我什么也看不到。有任何想法吗？

**编辑：**这是我的 custom_row_view.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="142dp"
            android:layout_height="wrap_content"
            android:orientation="vertical" >
            <TextView android:id="@+id/text1"         
                android:textSize="16sp"         
                android:textStyle="bold" 
                android:textColor="#FFFF00"        
                android:layout_width="match_parent"         
                android:layout_height="fill_parent"/>
            <TextView android:id="@+id/text2"         
                android:textSize="12sp"         
                android:textStyle="bold"      
                android:layout_width="match_parent"         
                android:layout_height="fill_parent"/>
            <TextView android:id="@+id/text3" 
                android:typeface="sans"
                android:textSize="14sp"
                android:textStyle="italic"
                android:layout_width="match_parent" 
                android:layout_height="wrap_content"/>

        </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right" >

    <CheckBox
        android:id="@+id/checkbox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
                    android:focusable="false"
            android:focusableInTouchMode="false"
        android:text="" />
        <Button
            android:id="@+id/editbut"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:text="Edit" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:59:58.503

您将返回超类值，并将 convertview 作为参数。

```
return super.getView(position, convertView, parent); 
```

但你这样做：

```
if (convertView != null)
    {
        view = convertView;
    } 
    else 
    {      
        view = mLayoutInflater.inflate(R.layout.custom_row_view, parent, false);
    } 
```

如果 convertView 为 null，则您正在膨胀一个新视图，但您没有返回它。

我的建议是

```
return view; 
```

代替

```
return super.getView(position, convertView, parent); 
```

这应该足够了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:54:28.547

做这个：

```
Button buttonEdit = (Button) view.findViewById(R.id.editbut);
          CheckBox cb = (CheckBox)view.findViewById(R.id.checkbox);
          buttonEdit.setTag(String.valueOf(positin));
          cb.setTag(String.valueOf(positin));
          buttonEdit.setOnClickListener(new OnClickListener()
            {   
          public void onClick(View arg0)
           {
           Log.i("xx","Button pressed! position ="+arg0.getTag());
             }
           });
       cb.setOnCheckedChangeListener(new OnCheckedChangeListener()
        {
        @Override
        public void onCheckedChanged(CompoundButton arg0, boolean arg1) 
        {
        Log.i("xx","Checkbox changed! position ="+arg0.getTag(););
         }
          }); 
```

您正在使用 `OnClickListener`() 内部作为内部类。对于内部类，位置的值保持为零。直到您在按钮上设置标签（），然后从按钮上获取标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:37:59.613

这样做

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) 
{
    View view = convertView;

    Log.i("xx","getView called: position="+position);

    if (view == null)
    {
        view = convertView;             
        view = mLayoutInflater.inflate(R.layout.custom_row_view, parent, false);
    }
    Button buttonEdit = (Button) view.findViewById(R.id.editbut);
    CheckBox cb = (CheckBox)view.findViewById(R.id.checkbox);

    return view;
} 
```

# django - Django & South：在数据迁移中执行 obj.save() 时不执行自定义字段方法

> ID：11505519
> 
> 赞同：6
> 
> 时间：2012-07-16T13:34:45.983
> 
> 标签：django, migration, custom-fields, django-south, unique-key

在我的 Django 模型中，我有两个字段，`name`（一个常规`CharField`）和`slug`一个自定义字段，它根据字段定义中传递的字段名称生成 slug，在本例中我`name`用于此。

首先，该模型只有`name`字段，以及相应的迁移和所有内容。然后我需要添加该`slug`字段，因此按照 South 约定，我添加了 slug 字段`unique=False`，创建了模式迁移，然后创建了一个数据迁移，设置`unique=True`并为最后一次更改创建另一个迁移。

由于 slug 的值是在模型保存时生成的，因此`forwards`在数据迁移的方法中，我所做的是遍历返回的查询集并在每个实例上`orm['myapp.MyModel'].objects.all()`调用该方法。`save()`

但是 slug 字段的值永远不会生成。在 IPython 会话下，我做了同样的事情，但将模型引用为`from myapp.models import MyModel`, 并且工作正常。使用一些调试语句，打印`type`South 的 orm dict 返回的模型的 显示真实类，它似乎不是 South 动态构建的假模型。

slug 字段在方法时创建它的值`pre_save`。如何在数据迁移期间强制调用它？我需要确保值的唯一性，以便在以后的架构迁移中应用索引时，列不包含重复值。

谢谢！

顺便说一句：蛞蝓字段类确实定义了`south_field_triple`所以南方玩得很好。

**编辑**：请看[我的回答](https://stackoverflow.com/a/11505977/288457)。但更像是一个答案，感觉更像是一个黑客。有没有更好/正确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T09:12:02.107

通常，您应该在迁移中尽可能地显式复制生成字段内容的代码（有目的的代码复制的罕见示例）。您的方法中的代码即使有效，也会按照*执行*迁移时定义的方式调用 pre_save，这可能在创建迁移时已更改甚至因模型状态而失败（它可能取决于其他字段而不是在更早的时间出现等）。

因此，您示例中的正确方法是直接使用 slugify() ，就像在 SlugField 的 pre_save 方法中所做的那样：

```
from django.template.defaultfilters import slugify

class Migration(DataMigration):

    def forwards(self, orm):
        "Write your forwards methods here."

        for myobj in orm['myapp.MyModel'].objects.all():
            myobj.slug = slugify(myobj.otherfield)
            myobj.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:01:55.657

我通过获取模型字段实例并`pre_save`直接调用它暂时解决了这个问题：

```
class Migration(DataMigration):

    def forwards(self, orm):
        "Write your forwards methods here."
        # Note: Remember to use orm['appname.ModelName'] rather than "from appname.models..."
        for myobj in orm['myapp.MyModel'].objects.all():
            slug_field = myobj._meta.get_field_by_name('slug')[0]
            myobj.slug = slug_field.pre_save(myobj, add=False)
            myobj.save() 
```

但是，将这一点考虑到自定义字段感觉很麻烦......

# mysql - MYSQL 声明变量

> ID：11505522
> 
> 赞同：23
> 
> 时间：2012-07-16T13:35:02.020
> 
> 标签：mysql

我不明白这个脚本有什么问题

```
BEGIN
DECLARE crs INT DEFAULT 0;

WHILE crs < 10 DO
INSERT INTO `continent`(`name`) VALUES ('cont'+crs)
SET crs = crs + 1;
END WHILE;
END; 
```

我希望它将 10 个值插入到大陆表中，但第二行有错误。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-16T13:36:52.023

在 MySQL 中声明变量**`@`**并赋值**`:=`**

```
SET @crs = 0; // declaration
--here your query
@crs := @crs+1 // assignment 
```

*参考*

*   [用户定义变量](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)
*   [任务](http://dev.mysql.com/doc/refman/5.0/en/assignment-operators.html)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-16T14:33:21.050

MySQL 不支持执行匿名存储过程代码块。

您需要创建一个包含该代码的存储过程，然后调用它。

此外，您在插入语句末尾缺少分号。我修好了。您可能还想使用 concat() 而不是 + 来生成名称，但我会将更改留给您。

创建过程：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS insert_ten_rows $$

CREATE PROCEDURE insert_ten_rows () 
    BEGIN
        DECLARE crs INT DEFAULT 0;

        WHILE crs < 10 DO
            INSERT INTO `continent`(`name`) VALUES ('cont'+crs);
            SET crs = crs + 1;
        END WHILE;
    END $$

DELIMITER ; 
```

调用过程：

```
CALL insert_ten_rows(); 
```

# opengl - 经典 greas.py 示例中 GlEndList() 中的 GLError

> ID：11505523
> 
> 赞同：1
> 
> 时间：2012-07-16T13:35:03.657
> 
> 标签：opengl, fedora, pyopengl

尝试在虚拟机上运行[此 gl gear 代码](http://bazaar.launchpad.net/~mcfletch/pyopengl-demo/trunk/view/head:/PyOpenGL-Demo/GLUT/gears.py)会导致以下堆栈跟踪：

```
OpenGL Warning: XGetVisualInfo returned 0 visuals for 0x92e18b0
OpenGL Warning: Retry with 0xd4 returned 1 visuals
OpenGL Warning: XGetVisualInfo returned 0 visuals for 0x92e18b0
OpenGL Warning: Retry with 0xd4 returned 1 visuals
Traceback (most recent call last):
  File "gears.py", line 264, in <module>
    init()
  File "gears.py", line 234, in init
    glEndList()
  File "errorchecker.pyx", line 50, in OpenGL_accelerate.errorchecker._ErrorChecker.glCheckError (src/errorchecker.c:1050)
OpenGL.error.GLError: GLError(
    err = 1280,
    description = 'invalid enumerant',
    baseOperation = glEndList,
    cArguments = ()
) 
```

但是相同的代码在我的桌面上运行良好——两台机器运行相同版本的 pyOpenGL，并且所有软件包安装应该相同。但是，底层操作系统是虚拟机上的 Fedora 12 和桌面上的 Fedora 16。

什么可能导致这种情况？

根据回答要求：

```
$ glxinfo | grep OpenGL
OpenGL vendor string: Humper
OpenGL renderer string: Chromium
OpenGL version string: 2.1 Chromium 1.9
OpenGL shading language version string: 1.20 NVIDIA via Cg compiler
OpenGL extensions: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:44:03.383

在我看来，您运行的 OpenGL 版本低于 1.2。检查您正在运行的 OpenGL 版本。

# python - 在 Ubuntu 上安装 Python 映像库 (PIL)

> ID：11505532
> 
> 赞同：6
> 
> 时间：2012-07-16T13:35:24.467
> 
> 标签：python, ubuntu, python-imaging-library

可能不应该给我带来这么多问题的东西是。

我正在尝试在我的 Ubuntu 服务器上安装 PIL。安装得很好。但是，每次我尝试更新数据库以添加图像字段时，都会出现以下错误：

错误：一个或多个模型未验证：product.product:“image”：要使用 ImageFields，您需要安装 Python Imaging Library。[从http://www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/)获取。

我刚刚意识到我已经以我的用户身份登录。我需要以root身份登录才能安装它吗？我在 VPS 而不是本地机器上执行此操作。

我在网上尝试了很多教程，但根本没有得到任何地方。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-16T13:56:34.597

我必须安装 python-dev 然后在我的 virtualenv 中安装 PIL。

现在都在工作。

谢谢大家的帮助！:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T13:39:10.630

If you are not root, then entering the following command should install python-imaging:

```
sudo apt-get install python-imaging 
```

Or (if you are root), the following command (without sudo) will install python-imaging

```
apt-get install python-imaging 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:41:19.393

理想情况下，您应该使用a `virtualenv`and `pip install pil`there `easy_install`...`pip`

确保您的服务器（Django？）已重新启动，以便它可以获取新库。（解释器在运行时似乎并不总是会选择新安装的模块）。

# .net - 无法安装或运行应用程序：单击一次

> ID：11505535
> 
> 赞同：31
> 
> 时间：2012-07-16T13:35:31.650
> 
> 标签：.net, clickonce

我使用 ClickOnce 发布了我的 .net 应用程序，我的所有用户在尝试打开程序时都会收到以下错误消息：

“无法安装或运行该应用程序。该应用程序要求先将程序集 Telerik.Windows.Data 版本 2012.1.215.40 安装在全局程序集缓存 (GAC) 中”。

我在应用程序中实际使用的版本比错误消息中提到的版本新。我用来开发应用程序的机器上也没有这个问题。我想知道为什么它要寻找旧版本的 dll。我找不到我的应用程序引用它的位置。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-19T14:48:23.380

我在这里找到了解决方案：

[http://ablogontech.wordpress.com/2009/01/02/unable-to-install-or-run-the-application-the-application-requires-that-the-assembly-be-installed-in-the-全局程序集缓存-gac-first/](http://ablogontech.wordpress.com/2009/01/02/unable-to-install-or-run-the-application-the-application-requires-that-the-assembly-be-installed-in-the-global-assembly-cache-gac-first/)

摘自wordpress链接：

> 我在编译我的第一个 C# 生产应用程序时收到了这个错误。我必须在 Visual Studio 中为该项目执行以下操作：
> 
> 1.  在解决方案资源管理器中，展开引用节点并单击错误中列出的程序集。确保“属性”网格中的“复制本地”设置为“真”。
> 2.  在项目的属性中，发布 | 应用程序文件选项卡，确保错误中列出的程序集的发布状态设置为“包含”</li>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-06T10:01:39.433

就我而言，导致此错误消息的问题是库发布配置不正确。

当我设置我的库属性**CopyLocal = false**，然后在项目发布应用程序文件中将**Publish Status**设置为**Include**，在项目重建和下次发布后一切正常。

因此，我们告诉 ClickOnce 编译器，默认情况下不要使用应用程序发布此库，并通过将 Publish State 从**Prerequisites**更改为**Include**告诉 ClickOnce，不要在**GAC**中搜索此库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-09T15:07:34.287

您还应该检查`app.config`文件中没有错误的程序集绑定重定向。寻找一个看起来像这样的节点：

```
 <dependentAssembly>
    <assemblyIdentity name="Telerik.Windows.Data" publicKeyToken="--SomePublicToken--" culture="neutral"/>
    <bindingRedirect oldVersion="0.0.0.0-3.0.2.0" newVersion="3.0.2.0"/>
  </dependentAssembly> 
```

并确保该节点有意义或简单的范围`old`是`new`有意义的。我的第一次尝试是简单地删除它并再次检查。一些 NuGet 包可能会与旧版本中的配置文件混淆，并且在新版本中不再需要此节点（并且不会自动删除）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-16T22:19:06.860

如果在依赖项目中引用了相同 dll 的两个版本，那么这将是错误的根本原因之一。

它发生在我身上并抱怨 NLog.dll，我发现我的应用程序引用了 Nlog.dll 的一个版本，而我的库项目引用了 Nlog.dll 的另一个版本，并且清单将一个版本列为依赖项（安装），将另一个版本列为依赖项（必要条件，即需要存在于系统中，甚至复制到本地设置为 true）。

# html - 如何获取存储在grails-app/views/teamplates目录下的gsp文件并在Grails中修改

> ID：11505540
> 
> 赞同：0
> 
> 时间：2012-07-16T13:35:49.647
> 
> 标签：html, grails, grails-2.0

我在“grails-app/views/teamplates”目录中创建了一个文件“_emailTemplate”。它是一个html模板文件，文件内容如下，

```
<html>
  <strong>Client: </strong>${client}<br/>
  <strong>Training: </strong>${training}<br/>
  <strong>Dates: </strong>${dates}<br/>
</html> 
```

我想加载此文件并用特定值替换占位符，例如

```
${client} with the value of client variable etc. 
```

这个怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:41:30.690

您可以将此模板呈现为字符串。在任何控制器中，您都可以使用以下代码：

```
def output = g.render(template: "/templates/emailTemplate", model: [client: 'John', training: 'Tennis', dates: 'tomorrow']) 
```

`g`是一个注入的 RenderTagLib 实例。如果你想在服务中使用它，你必须为自己创建一个实例，如下所示：

```
def renderTagLib = new RenderTagLib()
def output = renderTagLib.render(template: "/templates/emailTemplate", model: [client: 'John', training: 'Tennis', dates: 'tomorrow']) 
```

# android - 4x2 appwidget 使用什么尺寸

> ID：11505544
> 
> 赞同：6
> 
> 时间：2012-07-16T13:36:13.720
> 
> 标签：android, android-appwidget

我正在尝试创建一个标准大小为 4x2 瓷砖的 appwidget。目前，我正在使用这些值：

```
android:minHeight="146dp"
android:minWidth="294dp" 
```

在我运行 Gingerbread 的 Desire 上，小部件显示为 4x2。
在我运行 ICS 的 Asus TF101 平板电脑上，小部件的尺寸为 4x2。
最后，在运行 ICS 的 720x1280 模拟器中，小部件的大小为 4x3。

所以我在这里有点困惑。在所有设备上实现 4x2 小部件的正确值是什么（可能使用不同的资源文件夹）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:53:57.797

我发现大约工作。每 1x1 72dp x 72dp 效果最好。所以对于 2x2 小部件，我通常会使用 144dp x 144dp，但 google 建议使用 110dp x 110dp。

谷歌的这个页面更好地描述了使用什么尺寸以及如何计算它：http: [//developer.android.com/guide/practices/ui_guidelines/widget_design.html](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T12:41:10.880

根据谷歌指南，你应该使用这个公式：70 × n - 30

对于 4*2 小部件，这意味着您应该使用 250dp * 110dp。

更多信息：http: [//developer.android.com/guide/practices/ui_guidelines/widget_design.html](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html)

# sql - 加入并显示表中的不同列

> ID：11505546
> 
> 赞同：1
> 
> 时间：2012-07-16T13:36:31.330
> 
> 标签：sql, join, inner-join

我有一个简单的 SQL 问题，我认为这会很直接，但让自己陷入了混乱。任何帮助，将不胜感激

我有一个包含最后更新的表 A 表 A 与表 B 一对多 表 B 与表 C 一对多

我想显示表 C 的所有行以及表 A 的最后更新时间。我尝试了一些连接，但它们似乎不太有效。理想情况下，我想要类似的东西

```
select a.lastUpdated c.* from TableA a, TableC c where
a.id in (select a_id from TableB where (select b_id from TableC where c_id = select 
id  from TableC where XXXX=YYYY)) 
```

所以我可以传入表 C 的 id，然后返回一行，其中包含最后更新的时间。

XXX=YYY 将是我返回表 C 的一行的标准。

任何帮助或指针表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:41:26.433

您应该能够通过将 A 和 B 连接在一起，在 c_id 级别聚合结果，然后加入 C 来做到这一点：

```
select tc.*, maxlastupdated
from tablec tc left outer join
     (select tb.c_id, max(lastupdated) as maxlastupdated
      from tablea ta join
           tableb tb
           on ta.b_id = tb.b_id
      group by ta.id
     ) ta
     on tc.c_id = ta.c_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:45:05.193

就像是

```
SELECT c.* 
FROM TableA AS a 
    INNER JOIN TableB AS b 
    ON a.a_id = b.b_id 
        INNER JOIN TableC AS c 
        ON b.b_id = c.c_id 
WHERE a.lastUpdated = c.lastUpdated; 
```

应该管用。在这种情况下，一条直线`INNER JOIN`就足够了；当然，除非我错过了什么。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T13:56:19.667

您需要从表 C*驱动*您的 SQL 查询。下面的查询显示了从表 A 更新的时间戳列。由于它是表 A --> B --> C 方向的一对多，因此您将不可避免地结束- 在表 C 中有很多行 - 所有行都具有相同的时间戳。

```
SELECT c.*, a1.update_timestamp 
FROM table_c c, table_b b, table_a a1
WHERE c.join_column = b.join_column
AND b.join_column = a1.join_column
AND a1.update_timestamp =
(SELECT max(a2.update_timestamp) FROM table_a a2
WHERE a2.<identifying columns> = a1.<identifying columns>
); 
```

# encryption - 如何使用密钥大小和明文长度计算 RSA 密文的大小？

> ID：11505547
> 
> 赞同：12
> 
> 时间：2012-07-16T13:36:48.297
> 
> 标签：encryption, cryptography, rsa, polarssl

我有一些我想使用 RSA_PKCS_V21 加密的明文（使用 PolarSSL 库）。问题是我需要在执行算法之前知道密文的大小（用于动态内存分配目的）。我知道 RSA 密钥大小和明文长度。
我也想知道输入明文长度的限制。
任何想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T23:45:32.607

只需检查[RSA PKCS#1 v2.1 标准，第 7.2 章](https://www.rfc-editor.org/rfc/rfc3447#section-7.2)：

> RSAES-PKCS1-V1_5-ENCRYPT ((n, e), M)
> 
> 输入：
> 
> *   (n, e) 接收者的 RSA 公钥（k 表示模数 n 的八位字节长度）
> *   M要加密的消息，长度为mLen的八位字节串，其中**mLen <= k - 11**

所以输入取决于密钥大小。`k`是那个密钥大小，但以八位字节为单位。因此，对于 1024 位密钥，您有 1024 / 8 - 11 = 117 个字节作为最大纯文本。

* * *

请注意，上面是带有 PKCS#1 v1.5 填充的 RSA 的最大大小。对于较新的 OAEP 填充，可以在[第 7.1 章](https://www.rfc-editor.org/rfc/rfc3447#section-7.1)中找到以下内容：

> RSAES-OAEP-加密（（n，e），M，L）
> 
> ...
> 
> 输入：

> *   (n, e) 接收者的 RSA 公钥（k 表示 RSA 模数 n 的八位字节长度）
> *   M要加密的消息，长度为mLen的八位字节串，其中**mLen <= k - 2hLen - 2**
> *   l 与消息关联的可选标签；如果未提供 L，则 L 的默认值为空字符串

其中 hLen 是用于掩码生成函数的哈希函数的输出大小。如果使用默认的 SHA-1 哈希函数，则消息的最大大小为 k - 42（因为 SHA-1 的输出大小为 20 字节，并且 2 * 20 + 2 = 42）。

* * *

通常加密随机生成的密钥而不是消息。然后使用该密钥对消息进行加密。这允许几乎无限长的消息，并且对称加密（例如 CBC 模式中的 AES）比非对称加密快得多。这种组合称为[混合加密](http://en.wikipedia.org/wiki/Hybrid_cryptosystem)。

* * *

带有任何填充的 RSA 加密或签名生成的输出大小与以*字节*为单位的模数大小相同（当然向上舍入），因此对于 1024 位密钥，您期望 1024 / 8 = 128 个八位字节 / 字节。

请注意，计算大小的输出数组可能包含设置为零的前导字节；这应该被认为是正常的。

# java - jTidy html 到 xhtml 返回空文件

> ID：11505548
> 
> 赞同：3
> 
> 时间：2012-07-16T13:36:48.590
> 
> 标签：java, xhtml, html-parsing, jtidy

我正在尝试从 html 文件创建 xhtml 文件，但我遇到了错误。在转换期间，我收到以下错误：

> 第 1 行第 1 列 - 警告：插入缺少的“标题”元素
> 
> InputStream：文档内容看起来像 HTML 2.0
> 
> 1 个警告，未发现错误！

我的代码如下：

```
Tidy tidy = new Tidy(); //HTML parser and pretty printer. 
tidy.setXHTML(true); //true if tidy should output XHTML   
tidy.parse(fin, fout); 
```

最后我收到一个空文件。我究竟做错了什么？

真诚的，佐利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:02:37.397

尝试像下面这样强制输出，它将返回强制结果。 **tidy.setForceOutput(true)。**

# c# - 通过.def文件在c#中调用vc++ dll（按序号）

> ID：11505549
> 
> 赞同：1
> 
> 时间：2012-07-16T13:36:50.320
> 
> 标签：c#, visual-c++, dll

我在 vc++ 9.0 中有一个 dll 现在我必须在我们的 c# 应用程序中调用这个 dll 的函数，但问题是我们必须使用 .def 文件来导出函数。

```
EXPORTS
Abc           @1  NONAME
Xyz            @2 NONAME 
```

我们必须在 c# 应用程序中只使用函数的序号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:39:33.133

指定 DllImport 属性时，可以指定函数的 Ordinal：

```
 [DllImport("dllname", EntryPoint="#123")]
 static extern int MyFunc(int i); 
```

然后你调用 MyFunc 调用序数 123。

# java - java集合接口中的继承

> ID：11505550
> 
> 赞同：7
> 
> 时间：2012-07-16T13:36:51.317
> 
> 标签：java, collections, interface

Java集合接口中存在一些继承关系。例如，`Collection<T>`接口将扩展`Iterable<T>`. 我检查了JDK中的源代码，基类中定义的一些方法在子类中重复了几次。例如： `Interable<T>`接口定义了一个方法 `Iterator<E> iterator();`但是在接口`Collection<E>`和`List<T>`中，也包含相同的方法。在我的理解中，既然继承是用来减少重复的，为什么要在子类中定义相同的方法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T13:41:56.127

参见[java.util.List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)

“List 接口对迭代器、add、remove、equals 和 hashCode 方法的合同进行了额外的规定，超出了 Collection 接口中指定的规定。为方便起见，此处还包括其他继承方法的声明。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:42:26.890

`Collection`在 1.2 版中出现，但`Iterable`后来在 1.5 版中出现以允许简洁的 for 循环，所以我认为这是`Collection`在版本之间保持接口和 Javadocs 相同的情况。但是你是对的，你没有理由不能`iterator()`从 中删除该方法`Collection`，一切仍然可以编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T13:43:23.443

`Collection`接口*扩展* `Iterable`。_ 抽象超类实现了几个类共有的方法，在列表的情况下，它是[`AbstractList`](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractList.html)，每个具体类（比如`ArrayList`或`LinkedList`）都提供特定的实现细节。

事实上，正如您已经猜到的那样，继承用于减少代码重复。但正因为如此，所有的子类都将包含父类中定义的相同操作，几个类共有的实现细节在抽象类级别的类层次结构中只会出现一次，并且不会在抽象类中再次“定义”子类 - 只有发生变化的部分在具体子类中重新定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:40:00.200

该`Iterable`接口是稍后介绍的`since 1.5`。所以，在这个版本的早期，只有`java.util.Collection`子类用于实现`iterator()`.

后来`iterator()`通过引入`Iterable`接口成为标准，任何可以迭代的类都可以实现这个接口。

在引入`Iterable`接口之后，`Collection`接口也做了扩展`Iterable`接口，使`Collection`接口也实现了标准接口。

**例如，**

*   `java.sql.SQLException`还实现了 Iterable

# mysql - MySQL 表类型为钱

> ID：11505553
> 
> 赞同：4
> 
> 时间：2012-07-16T13:36:55.643
> 
> 标签：mysql, decimal

> **可能重复：**
> [货币的最佳数据类型](https://stackoverflow.com/questions/628637/best-data-type-for-currency)

我的数据库中有一张表，用于存储产品价格；列类型设置为`DECIMAL(12, 2)`。但是，每当我添加以下价格`1,199.00`并保存它时，由于某种原因它会转换为 1.00。

或者，如果我添加类似的价格`12,000.00`，它会将其转换为 12。我应该使用其他类型的字段还是添加其他值`DECIMAL`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T13:57:16.123

根据[文档`DECIMAL`](http://dev.mysql.com/doc/refman/5.5/en/fixed-point-types.html)，该列类型应该可以正常工作。如果您使用另一种语言与 MySQL 交互（例如 PHP），您应该将该代码与您的 SQL 代码一起发布，因为在普通 SQL 中，我无法重现您指出的行为。这是我使用的示例：

```
CREATE TABLE money (
    amount DECIMAL(12, 2));

INSERT INTO `money` (`amount`) VALUES (12999.00);

INSERT INTO `money` (`amount`) VALUES (12,999.00); 
```

这应该失败并出现错误，因为第二个`INSERT`语句将`12,999.00`两个单独的值视为两个单独的列。由于仅列出一列 ( `amount`)，因此失败。请参阅[this fiddle](http://www.sqlfiddle.com/#!2/9e436)了解我如何重现错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:41:04.230

您的数据类型 DECIMAL(12,2) 似乎没问题。

您应该插入 12999.00，而不是 12,999.00

# javascript - 等效于 rspec =~ 用于 Chai 中的数组

> ID：11505554
> 
> 赞同：6
> 
> 时间：2012-07-16T13:37:01.757
> 
> 标签：javascript, testing, mocha.js, chai

Chai，匹配器是否与 rspecs 等效`=~`（这意味着具有所有元素，但顺序无关紧要。

### 传递示例

```
[1, 2, 3].should =~ [2, 1, 3] 
```

### 失败

```
[1, 2, 3].should =~ [1, 2] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-14T15:11:19.953

您可以使用`members`最新 Chai 版本中提供的测试：

```
expect([4, 2]).to.have.members([2, 4]);
expect([5, 2]).to.not.have.members([5, 2, 1]); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T23:05:31.440

我认为没有，但您可以通过[构建一个助手](http://chaijs.com/guide/helpers/)轻松创建一个：

```
var chai = require('chai'),
    expect = chai.expect,
    assert = chai.assert,
    Assertion = chai.Assertion

Assertion.addMethod('equalAsSets', function (otherArray) {
    var array = this._obj;

    expect(array).to.be.an.instanceOf(Array);
    expect(otherArray).to.be.an.instanceOf(Array);

    var diff = array.filter(function(i) {return !(otherArray.indexOf(i) > -1);});

    this.assert(
        diff.length === 0,
        "expected #{this} to be equal to #{exp} (as sets, i.e. no order)",
        array,
        otherArray
    );
});

expect([1,2,3]).to.be.equalAsSets([1,3,2]);
expect([1,2,3]).to.be.equalAsSets([3,2]);

flag 
```

**请注意**，这不是无序相等测试，而是设置相等。任一数组中都允许重复项；这通过了，例如：`expect([1,2,3]).to.be.equalAsSets([1,3,2,2]);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T07:50:29.083

[http://www.rubydoc.info/gems/rspec-expectations/frames#Collection_membership](http://www.rubydoc.info/gems/rspec-expectations/frames#Collection_membership)

```
expect([4, 2]).to match_array([2, 4]) 
```

# jquery-mobile - 使用 Geolocation 和 Google Maps API [帮助]

> ID：11505555
> 
> 赞同：2
> 
> 时间：2012-07-16T13:37:02.220
> 
> 标签：jquery-mobile, cordova, geolocation, maps

我是移动开发领域的新手，现在我正在构建一个使用 jQuery mobile 和 PhoneGap 的应用程序。这是我的逻辑：

*   我有一个包含用户及其地址的表。我获取用户地址并通过地图 API 传递它以获取位置。但是我对每条记录都这样做，有时 API 会因为同时请求的数量而中断。

如果不通过地图 API 运行，我如何知道哪些用户离我最近？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:59:58.190

Rafael，Google 限制了您可以执行的请求数量，因为在不支付（相当昂贵的）营业执照的情况下进行批量地理编码违反了他们的 TOS。您需要找到一种服务，允许您对地址进行整体地理*编码*。

我会推荐一个像[LiveAddress API](http://smartystreets.com/products/liveaddress-api)这样的 API ，它不仅可以对地址进行地理编码，还可以确认其有效性并填写缺失或不正确的信息。对 API 的每个请求最多可包含 100 个地址。如果您只想验证电子表格或 CSV 文件中的现有地址列表，则可以使用非 API 版本。

我在[SmartyStreets](http://smartystreets.com)工作，很乐意帮助您解决有关您地址的任何其他问题。

# visual-studio-2010 - 在 Visual Studio 中更改默认字体

> ID：11505556
> 
> 赞同：3
> 
> 时间：2012-07-16T13:37:04.380
> 
> 标签：visual-studio-2010, fonts

Visual Studio 2010 中的默认字体是`Microsoft Sans Serif`. 有没有办法可以更改当前项目的默认字体，这样我就不必为我添加的每个表单和控件都更改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:58:52.867

完成您需要的最佳方法是创建自定义模板。

*   创建一个新的 WinForm 项目
*   使用您喜欢的字体自定义默认表单
*   保存项目
*   在文件菜单上选择导出模板
*   按照向导

现在，当您添加新表单时，您应该在可用项目列表中找到新模板

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-03T18:40:29.357

这是一个更好的解决方案：http: [//msdn.microsoft.com/en-us/library/ms165337%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms165337%28v=vs.80%29.aspx)

:-)

# python - python 2.6 exceptions.TypeError：未绑定方法_init_（）ESMTP客户端实例

> ID：11505558
> 
> 赞同：1
> 
> 时间：2012-07-16T13:37:08.870
> 
> 标签：python, python-2.6, buildbot

我是 Python 和 BuildBot 的全新用户。目前，当 BuildBot 构建状态发生变化（从成功变为失败，反之亦然）时，我正在使用电子邮件警报，并且每次构建失败时都会发送电子邮件。尝试发送电子邮件时遇到以下 Python 错误。

```
--- <exception caught here> ---
**ESMTPClient.__init__(self, secret, contextFactory, *args, **kw)
exceptions.TypeError?: unbound method init() must be called with ESMTPClient 
instance as first argument (got ESMTPSender instance instead)** 
```

在搜索答案时，我在网上找到了一些此错误的示例，包括

> 您只需将“self”作为参数传递给“Thread.init”并调用超类

但我仍然不确定为什么会出现错误。我将不胜感激有关为什么会发生此错误以及如何解决问题的任何指导/帮助。我不是这段代码的作者，所以我不确定要寻找什么来解决问题。

在以下代码从 gmail 帐户更改为公司帐户之前，该电子邮件正在工作。

```
 c['status'].append(mail.MailNotifier(
                 fromaddr="load.builder@company.co.uk",
                 extraRecipients=["example@company.com",
                      ],
                 sendToInterestedUsers=False,
                 mode=('change', 'failing'),
                 relayhost="smtp.company.lan",
                 useTls=True,
                 smtpUser="lbuilder",
                 smtpPassword="password")) 
```

这是产生异常的代码块：

```
class ESMTPSender(SenderMixin, ESMTPClient): 
    requireAuthentication = True 
    requireTransportSecurity = True 
    def __init__(self, username, secret, contextFactory=None, *args, **kw):  
        self.heloFallback = 0 
        self.username = username 

        if contextFactory is None: 
             contextFactory = self._getContextFactory() 

        ESMTPClient.__init__(self, secret, contextFactory, *args, **kw) 
        self._registerAuthenticators() 
```

SSA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:56:38.933

这似乎是一个很难出现的例外——通常你不会`__init__`显式调用，除非你是从其他类继承的。这是您可能会收到该错误的一种情况：

```
class Foo(object):
    def __init__(self,*args):
       print("In Foo, args:",args,type(self))

class Bar(object):
    def __init__(self,*args):
        Foo.__init__(self,*args)  #Doesn't work.  Complains that the object isn't the right type. 
```

为了解决这个问题，我们可以`Bar`继承自`Foo`：

```
class Bar(Foo):
         #^ Bar now inherits from Foo
    def __init__(self,*args):
        Foo.__init__(self,*args) #This will work now since a Bar instance is a Foo instance 
```

`Bar`如果从 继承子类没有意义`Foo`，您可以将通用代码分解为一个单独的函数：

```
def common_code(instance,*args):
    print("Common code: args",args,type(instance))

class Foo(object):
    def __init__(self,*args):
        common_code(self,*args)

class Bar(object):
    def __init__(self,*args):
        common_code(self,*args) 
```

尽管如果不实际查看产生错误的代码，这种问题可能很难诊断。

# core-data - UITableViewCell 图像 + 保存到核心数据

> ID：11505562
> 
> 赞同：0
> 
> 时间：2012-07-16T13:37:28.497
> 
> 标签：core-data, uitableview

我有一个 UITableView，我在其中显示来自核心数据（人）的数据。滚动表格时，我从网络（异步）获取该人的个人资料图像，并在完成后更新 Core Data 对象以及单元格的图像视图。

但是，我遇到了一个问题，因为`- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {`每次我将图像保存到 Core Data 时都会触发（一旦用户向下滚动，最终会减慢应用程序的速度）。在`controllerDidChangeContent:`我调用表视图上的 reloadData 时，这当然是帧速率急剧下降的原因。

一旦下载并适当更新单元格，如何处理将图像保存到核心数据对象的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:35:53.170

您可以响应`NSFetchedResultsController`可能有帮助的更精细的更改（请参阅示例代码）。

您可能还想看看今年 WWDC (2012) 中的一个会话，该会话讨论了如何改进 UITableView 中的滚动，特别是尝试将处理量限制为仅在屏幕上的那些行的技术：**会话 211 -在 iOS 上构建并发用户界面**

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller
   didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath
     forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath {        
        switch(type)
        {
            case NSFetchedResultsChangeInsert:
                [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeDelete:
                [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeUpdate:
                [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeMove:
                [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;
        }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView endUpdates];
} 
```

# php - php/mysql 两个变量数组

> ID：11505565
> 
> 赞同：0
> 
> 时间：2012-07-16T13:37:37.157
> 
> 标签：php, mysql, arrays

我允许用户使用表单中的文本框创建最多十个类别。为此，我有十个格式为 name = cat[] 的文本框。当他们第一次输入类别时——不管有多少，最多十个，在接收端，我只是收集类别数组并使用插入语句将它们保存到类别表中。到现在为止还挺好。

但是，现在我想让他们更改他们已经设置的类别或添加最多十个额外的类别。他们已经设置的类别有 id。因此，我将 id 与类别名称一起回显到表单中。我的问题是我现在如何收集姓名和身份证？需要插入新的并且可能需要在表中更新现有的？出于某种原因，我完全不知道如何做到这一点。这是我到目前为止所拥有的>

餐桌猫

```
id | catname | userid 
```

表格页面：

```
//retrieve existing cats if any...also get catids

echo '<form action = storecats.php method=post>';
$i=1;
//Get all existing cats
while($row = mysql_fetch_array($res))
{
    $catname = $row['catname'];
    $catid = $row['id'];
    echo '<input type = "text name="cat[]" value="'.$catname.'">Cat 1';
    echo '<input type="hidden" name="id[]" value = "'.$catid.'">';
    $i = $i+1;
}
//empty boxes up to ten.
while($i <= 10){
    echo '<input type="text" size=18 name="cat[]" value=""> Cat '.$i.'<br>';
    $i = $i+1;
}//end appending of blank categories
echo '<input type="submit" name="submit" value="submit"></form>'; 
```

在接收端，我可以收集 cat 和 id 的数组。

```
$idarray = $_POST['id']; //there will be as many elements as there were ids
$catarray = $_POST['cat'];  //there will be ten elements in array 
```

在有 id 的地方，我想执行更新，而在没有 id 的地方我想插入，除非该值为空白。

我的问题是我不知道如何链接不同数组中接收到的 id 和 cat 名称。请注意，总会有十个猫名，但只会有与该用户之前表中一样多的 id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:42:30.767

您可以在 HTML 端使用 2 个数组：

```
 $x=0;
    while ($row = mysql_fetch_array($res))
    {
        echo '<input type="text" name="updateCat['.$row["id"].']" value="'.$row["catname"].'"> Cat Name';
        $x++;
    }

    // new ones
    for(;$x<10;$x++)
    {
        echo '<input type="text" name="newCat[]">';
    } 
```

在php方面：

```
 // update old categories
    foreach ($_POST["updateCat"] as $key => $value)
    {
        mysql_update ("UPDATE table SET name = $value WHERE id = $key");
    }

    // insert 
    foreach ($_POST["newCat"] as $value)
    {
        mysql_update ("INSERT INTO table {...}");
    } 
```

您还检查了插入新类别时不超过 10 个类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:53:45.100

命名用于现有类别的`cat_update[]`输入并命名用于新类别的输入`cat_insert[]`。当您使用 PHP 处理表单数据时，您有三个数组：

```
$ids = $_POST['id'];                // Ids for update
$update = $_POST['cat_update'];     // Values for UPDATE
$insert = $_POST['cat_insert'];     // Values for INSERT

for($i = 0; $i < count($ids); $i++) {
    //Execute 'UPDATE `table` SET `value` = $update[$i] WHERE `id` = $ids[$i]
}

for($i = 0; $i < count($insert); $i++) {
    //Execute 'INSERT INTO `table` (`value`) VALUES ($insert[$i])
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:59:58.903

我不确定我是否明白，但您可以简单地为两组类别赋予不同的名称。

在您的第二个循环中，放置 'name = "new_cat[]"' 将允许您区分修改后的类别（' **$_POST[cat] '）和要在接收****存储**猫中插入的新类别（' **$_POST[new_cat]** '）**.php**代码。

# iphone - UINavigationController 的背景图像在视图控制器被推送或弹出时保持静止并且不动画

> ID：11505570
> 
> 赞同：3
> 
> 时间：2012-07-16T13:37:55.437
> 
> 标签：iphone, objective-c, ios, cocoa-touch

有没有办法将**UINavigationController**与保持静止的背景图像一起使用，并且在推送或弹出视图控制器时不会动画？

**通过在它下面有一个分页的UIScrollView**和一个**UIImageView**可以实现相同的效果，但我想使用**UINavigationController**所以调用像`viewWillAppear`,之`viewDidDisappear`类的方法，并且我可以使用**UINavigationController 的**逻辑来弹出和推送视图控制器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T13:41:29.767

是的，这很容易。将图像添加到窗口（或视图后面的任何内容），然后使 uiviewcontroller 主视图具有透明背景。这适用于 iOS 4 及更高版本。

# javascript - 如何跟踪在 javascript 中打开的子窗口

> ID：11505572
> 
> 赞同：1
> 
> 时间：2012-07-16T13:38:00.240
> 
> 标签：javascript

我的页面中有三个链接，我想限制用户一次打开一个链接。那么当用户点击链接时如何通过javascript检查它是否已经打开了一个窗口（通过打开我的意思是不仅仅是点击链接并关闭它，窗口应该在用户点击链接时打开） .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:48:55.397

为窗口命名，然后您可以使用 DOM 访问它们。每次用户打开一个新的弹出窗口时，您都可以运行一个循环来尝试访问所有弹出窗口。如果另一个窗口已经打开，您可以阻止当前的弹出事件发生。

弹出窗口都必须在您的域下才能正常工作。

# php - 将 Joomla 1.5 组件更新为 Joomla 2.5 组件的步骤

> ID：11505574
> 
> 赞同：-3
> 
> 时间：2012-07-16T13:38:03.920
> 
> 标签：php, joomla, components, upgrade, joomla2.5

请提供将 Joomla 1.5 组件更新为 Joomla 2.5 组件的步骤。

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T13:53:59.560

在Adapting [from 1.5 to 1.6](http://docs.joomla.org/Adapting_a_Joomla_1.5_extension_to_Joomla_1.6)以及从[这个 DVLacer 博客](http://dvlancer.com/blog/1-blog/33-migrating-joomla-extensions-from-version-15-to-joomla-25.html)中可以学到很多东西：

***全局变量 $mainframe 和 $option***

**Joomla 1.5**

```
global $mainframe, $option; 
```

**Joomla 2.5**替换为

```
$mainframe =& JFactory::getApplication();
$option = JRequest::getCmd('option'); 
```

或者

```
$option = $this->option //If the code is in a controller class derived from JControllerForm 
```

**获取模板中的页面标题***

**Joomla 1.5**

```
global $mainframe;
$mainframe = &JFactory::getApplication();
$page_title = $mainframe->getPageTitle(); 
```

**在 Joomla 2.5 中替换为**

```
$app =& JFactory::getDocument();
$page_title = $app->getTitle(); 
```

***模板路径***

**Joomla 1.5

```
"templates/templatename/" 
```

**Joomla 2.5**

```
$app= & JFactory::getApplication();
$template = $app->getTemplate(); 
```

**或者**

```
"templates/".$this->template."/" 
```

***如何确定您是否在主页上***

**Joomla 1.5**

```
if( JRequest::getVar('view') == "frontpage" ) {
  // You are on the home page
} else {
  // You are not 
} 
```

**Joomla 2.5**

```
$menu =& JSite::getMenu(); // get the menu
$active = $menu->getActive(); // get the current active menu
if ( $active->home == 1 ) { // check if this is the homepage
  // You are on the home page
} else {
  // You are not
} 
```

***访问错误变量***

**Joomla 1.5**

```
$code = $this->error->code;
$message = $this->error->message; 
```

在**Joomla 2.5**中，这些变量现在是私有的，必须通过 getter 方法访问以避免以下错误： `PHP cannot acess protected property error`

```
$code = $this->error->getCode();
$message = $this->error->getMessage(); 
```

# django - 使用 mod_wsgi 在 Apache 上部署多个 django 应用程序

> ID：11505576
> 
> 赞同：24
> 
> 时间：2012-07-16T13:38:09.553
> 
> 标签：django, apache, mod-wsgi

我想在同一主机上部署两个不同的 django 应用程序：第一个对应 url /site1，第二个对应 url /site2。这是我的配置：

```
LoadModule wsgi_module 模块/mod_wsgi.so

WSGIScriptAlias /site1 /var/www/py/site1/site1/wsgi.py
WSGIScriptAlias /site2 /var/www/py/site2/site2/wsgi.py

WSGIPythonPath /var/www/py/site1:/var/www/py/site2

<目录“/var/www/py/site1/site1”>
<文件 wsgi.py>
订单拒绝，允许
允许所有人
</文件>
</目录>

<目录“/var/www/py/site2/site2”>
<文件 wsgi.py>
订单拒绝，允许
允许所有人
</文件>
</目录>

```

这也是两个应用程序的 wsgi.py 文件

```
导入操作系统
导入系统

路径 = '/var/www/py/site1'
如果路径不在 sys.path 中：
    sys.path.append(路径)

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "site1.settings")
从 django.core.wsgi 导入 get_wsgi_application
应用程序 = get_wsgi_application()

```

现在，这是我的问题。当我访问我的服务器时，假设[http://app1.sites.gr/site1](http://app1.sites.gr/site1)有时会加载 site1，有时会加载 site2 ！！！当我访问 [http://app1.sites.gr/site2](http://app1.sites.gr/site2)时也是如此......有时我会看到 site1 的欢迎页面，有时我会看到 site2 的欢迎页面！我正在按 F5 并获得不同的欢迎页面。我已经检查了前几个小时的所有内容，没有发现任何奇怪的东西......

请在我发疯之前告诉我可能是什么问题......

谢谢 ！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-17T03:27:48.043

这是 Django 1.4 生成的 wsgi.py 文件的问题。如果尝试在同一进程中托管两个不同的 Django 实例，即使在单独的子解释器中，它也不起作用。

改变：

```
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "site1.settings") 
```

至：

```
os.environ["DJANGO_SETTINGS_MODULE"] = "site1.settings" 
```

或者更好的是仍然使用守护进程模式并将每个委托在不同的守护进程组中运行。

也就是说，而不是：

```
WSGIScriptAlias /site1 /var/www/py/site1/site1/wsgi.py
WSGIScriptAlias /site2 /var/www/py/site2/site2/wsgi.py

WSGIPythonPath /var/www/py/site1:/var/www/py/site2 
```

利用：

```
WSGIDaemonProcess site1 python-path=/var/www/py/site1
WSGIScriptAlias /site1 /var/www/py/site1/site1/wsgi.py process-group=site1 application-group=%{GLOBAL}

WSGIDaemonProcess site2 python-path=/var/www/py/site2
WSGIScriptAlias /site2 /var/www/py/site1/site2/wsgi.py process-group=site2 application-group=%{GLOBAL} 
```

* * *

更新

请注意，现在有一篇关于此和其他原因的完整博客文章。

*   [http://blog.dscpl.com.au/2012/10/requests-running-in-wrong-django.html](http://blog.dscpl.com.au/2012/10/requests-running-in-wrong-django.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:55:34.170

您的应用程序在同一个端口上侦听，并且似乎没有将它们委托给不同端口的代理。

您要么必须在 apache 中设置 VirtualHosts，要么使用 Nginx、lighttpd 或其他东西来创建适当的代理

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T03:48:39.467

Graham Dumpleton 的回复可能是您最想阅读的回复，但我建议通过将您的两个 Django 托管在不同子域的根目录而不是同一域的非根位置来节省很多胃灼热。恕我直言，运行非根 Django 站点有很多陷阱。

祝你好运！

# iphone - JSON响应编码问题

> ID：11505577
> 
> 赞同：1
> 
> 时间：2012-07-16T13:38:10.290
> 
> 标签：iphone, ios, json

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:36:27.970

查看[AFNetworking](https://github.com/AFNetworking/AFNetworking/)和 Apple 的 NSJSONSerializer。甚至 ASIHTTPRequest 的开发者也不再推荐使用这个框架。AFNetworking 对编码问题有很好的支持，而且它被广泛使用，所以我很确定你的错误不存在。

# iphone - How can i release the entries object

> ID：11505581
> 
> 赞同：0
> 
> 时间：2012-07-16T13:38:44.467
> 
> 标签：iphone, memory-leaks

```
- (id)init {
    if (self == [super init]) {
        entries = [[NSMutableArray alloc] init];
        NSString *file = [[NSBundle mainBundle] pathForResource:@"qanda" ofType:@"db"];
        sqlite3 *database = NULL;

        if (sqlite3_open([file UTF8String], &database) == SQLITE_OK) {
            sqlite3_exec(database, "select * from qanda order by question", LoadEntriesCallback, entries, NULL);
        }

        sqlite3_close(database);
    }
    return self;
} 
```

leak near entries object: instance variable used while 'self' is not set to the result of [ super of self[init ...]]

leak near self: returning while 'self' is not set to the result of [ super of self[init ...]]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:15:15.687

你应该有

```
self = [super init]; 
```

不是

```
self == [super init]; 
```

最常用的模式是：

```
self = [super init];
if (self) {
    // Initialisation code
}
return self; 
```

在您的示例中，您没有将 [super init] 的结果分配给任何东西并且它被挂起，因此泄漏和消息。

如果您想根据标题中的问题发布条目：

```
entries = [[[NSMutableArray alloc] init] autorelease]; 
```

或者

```
entries = [[NSMutableArray alloc] init]; 
```

和

```
[entries release]; 
```

在`return`或 在您的`dealloc`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:40:41.340

您可以通过替换来释放条目：

```
entries = [[NSMutableArray alloc] init]; 
```

和 ：

```
entries = [[[NSMutableArray alloc] init] autorelease]; 
```

但我认为问题应该是：这是从数据库中获取内容的好方法吗？坦率地说，我认为如果你将阅读内容从数据库部分移到方法中，你的代码会更好`loadData`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:41:10.707

您应该在创建时自动释放它。

```
entries = [[[NSMutableArray alloc] init] autorelease]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T14:16:23.063

尝试更换

```
entries = [[NSMutableArray alloc] init]; 
```

和

```
self.entries = [[[NSMutableArray alloc] init]autorelease]; 
```

并更换

```
sqlite3_exec(database, "select * from qanda order by question", LoadEntriesCallback, entries, NULL); 
```

和

```
sqlite3_exec(database, "select * from qanda order by question", LoadEntriesCallback, self.entries, NULL); 
```

# android - Listview 在 android 中填充

> ID：11505586
> 
> 赞同：1
> 
> 时间：2012-07-16T13:39:11.813
> 
> 标签：android, listview

在我的应用程序中，我有 1 个列表视图，使用 arrayadapter 从数据库中填充数据。

这是以下代码：

```
public void onClick(View v) {
                    // TODO Auto-generated method stub

                      Cursor c = db.gethouseholdTitle();
                      startManagingCursor(c); 
//                   if(cat.equals("Income"))
//                   {  
////                         System.out.println("inside if="+select);
////                         Cursor cin = db.income();
                         String[] fromdes = new String[] {db.KEY_DATE,db.KEY_DESC,db.KEY_INCOME,db.KEY_TOTAL};
                         int[] todes = new int[] {R.id.text1 ,R.id.text3,R.id.text5,R.id.text7};
                         SimpleCursorAdapter notes =
                                    new SimpleCursorAdapter(this, R.layout.columnview, c, fromdes, todes);
                        //  System.out.println("notes="+notes.getCount());
                        //  setListAdapter(notes);    
                           lv.setAdapter(notes);  

                } 
```

但显示错误：

```
The constructor SimpleCursorAdapter(new View.OnClickListener(){}, int, Cursor, String[], int[]) is undefined 
```

我做错了什么。在此先感谢。我认为我们无法在单击功能中填充光标适配器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:41:06.127

更改此行：

```
SimpleCursorAdapter notes = new SimpleCursorAdapter(this, R.layout.columnview, c, fromdes, todes); 
```

进入这个：

```
SimpleCursorAdapter notes = new SimpleCursorAdapter(MyActvity.this, R.layout.columnview, c, fromdes, todes); 
```

这里`MyActivity`应该是您的活动的实际名称。

同时，我会提请您注意以下`SimpleCursorAdapter`javadoc 的摘录：

> 此构造函数已弃用。不鼓励使用此选项，因为它会导致在应用程序的 UI 线程上执行游标查询，从而导致响应速度不佳甚至应用程序无响应错误。作为替代方案，将 LoaderManager 与 CursorLoader 一起使用。

# javascript - 如何使 Ext.button.Cycle 使用单选按钮而不是复选标记？

> ID：11505588
> 
> 赞同：0
> 
> 时间：2012-07-16T13:39:17.797
> 
> 标签：javascript, extjs, extjs4, extjs4.1

ExtJS`Cycle`按钮菜单包含选中的菜单项，我们在任何时候都只能选择一项（见附图或[现场示例](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.button.Cycle)）。这让用户感到困惑。我想知道是否有任何方法可以配置此 Cycle 组件以显示单选按钮而不是复选框。

![在此处输入图像描述](../Images/535e5757ebb0086da01a91d39cc50a13.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:26:35.100

`Ext.menu.CheckItem`可以配置为显示为单选按钮，因此我们要使用它，然后我们必须指定包含所有项目的自定义菜单，`Ext.menu.CheckItem`并在每个项目中提供`group`配置以使其成为单选按钮。

```
{
    xtype : 'cyclebutton',
    menu : {
        xtype : 'menu',
        items : [{
            xtype : 'menucheckitem',
            text : 'Check 1',
            group : 'check'     // this will make sure that checkboxes will be rendered as group
        },{
            xtype : 'menucheckitem',
            text : 'Check 2',
            group : 'check'     // this should be same for every check item to put it in single group
        }]
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T16:57:45.857

您可以尝试将项目 xtype 设置为收音机

```
 items: [{
        xtype: 'radio',
        boxLabel  : 'a'            
    },{
        xtype: 'radio',
        boxLabel  : 'b'
    }] 
```

# apache - 在 503 页面上使用 Google Analytics

> ID：11505589
> 
> 赞同：0
> 
> 时间：2012-07-16T13:39:18.823
> 
> 标签：apache, google-analytics, varnish, http-status-code-503

我正在使用清漆来缓存我们的页面。当我们得到一个 503 时——这种情况发生得太频繁了——我想在那里进行某种页面跟踪。我想把GA代码放在那里。我似乎找不到任何其他人这样做的例子。有人做过吗？这样做是否违反了某种条款和条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:14:53.743

对于 Varnish，您可以使用**vcl_error**来包含您自己的响应（具有 Google Analytics 代码）。

*编辑：我没有测试过这些。它们只是例子。*

一个例子：

```
sub vcl_error {
    set obj.http.Content-Type = "text/html; charset=utf-8";

    if (obj.status == 503) {
        synthetic {"
<html>
<head>
<title></title>
</head>
<body>
<h1>Error</h1>
<p>Something</p>
<!-- ANALYTICS CODE -->
</body>
</html>
        "};

        return(deliver);
    }
} 
```

或者，您可以使用[vmod](https://www.varnish-cache.org/docs/3.0/reference/vmod_std.html)（作为标准包含在版本 3.*+ 中）从文件系统添加您自己的页面。

```
# Add this to the top of your config
import std;

# vcl_error
sub vcl_error {
    set obj.http.Content-Type = "text/html; charset=utf-8";

    if (obj.status == 503) {
        set obj.http.error503 = std.fileread("/path/to/errors/503.html");
        synthetic obj.http.error503;
        return(deliver);
    }
} 
```

# c# - C# 编译器参数 - 找不到元数据

> ID：11505598
> 
> 赞同：1
> 
> 时间：2012-07-16T13:39:52.610
> 
> 标签：c#, assemblies

在尝试从 .txt 文件中编译一些代码（在运行时）时，我的代码引用了正在编译的代码的程序集。

几个月来它一直运行良好，但我最近不得不将 System.Speech.dll 添加为引用的程序集之一，现在当它尝试编译任何文本文件中的代码时出现错误。

这是错误：

找不到元数据文件“System.Speech.dll”

System.Speech.dll 也在项目的引用中，所以如果这可能是问题，它不是。此外，所有其他引用的 dll 都完全正常，完全没有错误。

这是代码部分：（如果您需要更多，请评论）

```
 CompilerParameters options = new CompilerParameters();
        options.ReferencedAssemblies.Add("System.dll");
        options.ReferencedAssemblies.Add("System.Core.dll");
        options.ReferencedAssemblies.Add("System.Drawing.dll");
        options.ReferencedAssemblies.Add("System.Speech.dll"); 
```

我怎样才能消除这个错误？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:00:06.563

我能够重现您的错误并通过执行以下更改来解决它：

```
CompilerParameters options = new CompilerParameters();
        options.ReferencedAssemblies.Add("System.dll");
        options.ReferencedAssemblies.Add("System.Core.dll");
        options.ReferencedAssemblies.Add("System.Drawing.dll");
        options.ReferencedAssemblies.Add(@"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Speech.dll"); 
```

当然，您需要将其更改为您的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:00:53.287

根据评论，我会将 dll 添加到 GAC。.NET 附带的 gacutil.exe 可用于将程序集添加到 GAC。

要添加共享程序集，请从命令行输入：

```
gacutil.exe /i mySpeechAssembly.dll 
```

您还可以使用程序集的完整路径，

```
options.ReferencedAssemblies.Add(@"C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Speech.dll") 
```

但我建议不要这样做。

# ruby-on-rails - ElasticSearch 分面滚动周（轨道/轮胎）

> ID：11505600
> 
> 赞同：0
> 
> 时间：2012-07-16T13:39:57.700
> 
> 标签：ruby-on-rails, elasticsearch, tire

使用带有 Rails 3.2.6 (/w Tire) 的 ElasticSearch 我的项目对象上有一个方面，它显示当前项目发布的月份：

```
facet('timeline') { date :post_date, :interval => 'month' } 
```

这给了我按日历月分组的项目。也尝试过“周”而不是“月”，但这让我按日历周分组。理想情况下，我们要做的是有这样的滚动组：

*   过去 7 天
*   过去 14 天
*   过去 21 天

关于如何实现这一点的任何建议，以便我们不限于日历周，并且可以轻松地从数据中挑选出相关的桶？非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T17:51:25.143

您是指例如：过去 7 天、14 天、21 天更新的项目数量？

如果是这样，请使用[范围方面](http://www.elasticsearch.org/guide/reference/api/search/facets/range-facet.html)：

```
curl -XGET 'http://127.0.0.1:9200/YOUR_INDEX/project/_search?pretty=1'  -d '
{
   "query" : {
      "match_all" : {}
   },
   "facets" : {
      "projects" : {
         "range" : {
            "ranges" : [
               {
                  "to" : "2012-07-09"
               },
               {
                  "to" : "2012-07-02"
               }
            ],
            "field" : "last_modified_date"
         }
      }
   }
}
' 
```

[使用date math](http://www.elasticsearch.org/guide/reference/mapping/date-format.html)会很有用，例如：

```
curl -XGET 'http://127.0.0.1:9200/_search?pretty=1&search_type=count'  -d '
{
   "query" : {
      "match_all" : {}
   },
   "facets" : {
      "created" : {
         "range" : {
            "ranges" : [
               {
                  "to" : "now-7d"
               },
               {
                  "to" : "now-14d"
               }
            ],
            "field" : "created"
         }
      }
   }
}
' 
```

但这尚不支持。我已经打开了一个问题来请求它： [https ://github.com/elasticsearch/elasticsearch/issues/2102](https://github.com/elasticsearch/elasticsearch/issues/2102)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:43:18.733

您可以改用[Range Facets](http://www.elasticsearch.org/guide/reference/api/search/facets/range-facet.html)，您可以完全控制将要使用的组。

# azure - 我无法在 Azure 中将我的网站更改为保留模式

> ID：11505602
> 
> 赞同：0
> 
> 时间：2012-07-16T13:40:00.993
> 
> 标签：azure, web, instance, reserved

我正在尝试将我的网站更改为保留模式，但我不能......无论我选择的实例大小如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:46:50.087

更新：最近添加了额外容量：http: [//blogs.msdn.com/b/windowsazure/archive/2012/07/17/additional-reserve-instance-capacity-for-windows-azure-web-sites-preview .aspx](http://blogs.msdn.com/b/windowsazure/archive/2012/07/17/additional-reserve-instance-capacity-for-windows-azure-web-sites-preview.aspx)

他们一直在增加容量。我过去也遇到过他。我知道这不是您想听到的答案，但每隔几天再试一次，将会有更多实例可用。

请记住，这是预览技术。微软正在评估使用和需求

# iphone - 自定义单元重用问题

> ID：11505611
> 
> 赞同：0
> 
> 时间：2012-07-16T13:40:15.340
> 
> 标签：iphone, objective-c, ios

我正在将自定义单元格加载到表格视图中，并注意到我的单元格没有被正确重用。我正在使用 NSFetchedResultsController 从核心数据中提取结果。

我正在从笔尖加载单元格。单元标识符在界面生成器中设置。这些单元格似乎被重复使用，因为我没有在每次滚动表格时创建一个新单元格。但是，单元格上的数据未正确显示。

```
// BeerCell.h
@interface BeerCell : UITableViewCell

@property (nonatomic, strong) IBOutlet UIImageView *beerImage;
@property (nonatomic, strong) IBOutlet UILabel *displayBeerName;
@property (nonatomic, strong) IBOutlet UILabel *displayBeerType;

@end

// BeerCell.m
@implementation BeerCell

@synthesize beerImage;
@synthesize displayBeerName;
@synthesize displayBeerType;

@end

 // Code where i'm setting up the cells for the tableView

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"BeerCell";

    BeerCell *cell = (BeerCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"BeerCell" owner:self options:nil];

        for (id currentObject in topLevelObjects){

            if ([currentObject isKindOfClass:[UITableViewCell class]]){
                cell =  (BeerCell *) currentObject;
                break;
            }
        }

        [self configureCell:cell atIndexPath:indexPath];

    }        

    return cell;
}

- (void)configureCell:(BeerCell *)cell 
          atIndexPath:(NSIndexPath *)indexPath 
{
    Beer *beer = (Beer *) [self.fetchedResultsController objectAtIndexPath:indexPath];
    cell.displayBeerName.text = beer.name;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:42:47.820

在 if 块之外调用 configureCell 函数。

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"BeerCell";

    BeerCell *cell = (BeerCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"BeerCell" owner:self options:nil];

        for (id currentObject in topLevelObjects){

            if ([currentObject isKindOfClass:[UITableViewCell class]]){
                cell =  (BeerCell *) currentObject;
                break;
            }
        }
    }        
    [self configureCell:cell atIndexPath:indexPath];
    return cell;
} 
```

# php - 如何将导出到 mysql 更改为 php 中的文件？

> ID：11505613
> 
> 赞同：0
> 
> 时间：2012-07-16T13:40:18.400
> 
> 标签：php, mysql, sql, transbase

现在我有这样的方法：

```
 function exportFromTransbase($table_name) {
 $odbc_query = "SELECT * FROM " . $table_name;

 $data = odbc_exec($this->odbc_id, $odbc_query);
 odbc_longreadlen($data, 10485760);

 while($row = odbc_fetch_array($data))
 {

 foreach($row as $key => $value) {
 $keys[] = "`" . $key . "`";
 $values[] = "'" . mysql_real_escape_string($value) . "'";
 }

 $mysql_query = "INSERT INTO `" . strtolower(substr($table_name, 4)) . "` (" . implode(",", $keys) . ") VALUES (" . implode(",", $values) . ")";

 mysql_query($mysql_query);
 set_time_limit(3600);
 unset($keys);
 unset($values);
 unset($row);
 }
    if ($mysql_query){
        print "Ýêñïîðò äàííûõ èç òàáëèöû " . $table_name . " çàâåðøåí!";
        //strtolower(substr($table_name, 4))
    }
 } 
```

但是导入mysql的时候很慢。我决定将其更改为导出到文件 .sql，以便将来我可以通过终端或 phpmyadmin 导入该表。如何更改导出到 sql 文件我的数据？

笔记！我正在从 transbase 转换为 mysql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:33:48.327

代替...

```
while($row = odbc_fetch_array($data))
{
   foreach($row as $key => $value) {
      $keys[] = "`" . $key . "`";
      $values[] = "'" . mysql_real_escape_string($value) . "'";
   }

   $mysql_query = "INSERT INTO `" . strtolower(substr($table_name, 4)) . "` (" . implode(",", $keys) . ") VALUES (" . implode(",", $values) . ")";

    mysql_query($mysql_query);
    set_time_limit(3600);  // this should not be here
    unset($keys);          // this is redundant
    unset($values);        // and this
    unset($row);           // and this too
 } 
```

尝试：

```
$oufile=fopen("export.sql", 'w') || die("error writing file");

while($row = odbc_fetch_array($data))
{
   foreach($row as $key => $value) {
      $keys[] = "`" . $key . "`";
      $values[] = "'" . mysql_real_escape_string($value) . "'";
   }

   $mysql_query = "INSERT INTO `" . strtolower(substr($table_name, 4)) . "` (" . implode(",", $keys) . ") VALUES (" . implode(",", $values) . ")";

   fputs($outfile, $mysql_query . ";\n";        
 } 
```

但是，如果您...会更快。

```
$oufile=fopen("export.sql", 'w') || die("error writing file");
fputs($outfile, "ALTER TABLE `" . . strtolower(substr($table_name, 4)) . "` DISABLE KEYS;\n";

while($row = odbc_fetch_array($data))
{
   foreach($row as $key => $value) {
      $keys[] = "`" . $key . "`";
      $values[] = "'" . mysql_real_escape_string($value) . "'";
   }

   $head="INSERT DELAYED INTO `" . strtolower(substr($table_name, 4)) . "` (" . implode(",", $keys) . ") VALUES ";
   $row[]="(" . implode(",", $values) . ")";

   if (count($row)>100) {
      flush_ins($outfile, $head, $row);
      $row=array();
   }       
 }
 if (count($row)) flush_ins($outfile, $head, $row);
 fputs($outfile, "ALTER TABLE `" . . strtolower(substr($table_name, 4)) . "` ENABLE KEYS;\n";
 fclose($outfile);
...
function flush($rows, $head, $fh) 
 {
    fputs($fh, $head . implode("\n,", $rows) . ";\n");
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:45:06.103

看到这个帖子：

[无需访问服务器或 phpMyADMIN 即可导出 SQL 表的简便方法](https://stackoverflow.com/questions/81934/easy-way-to-export-a-sql-table-without-access-to-the-server-or-phpmyadmin)

它使用`select into outfile`语法。这种语法的文档在这里：[http ://dev.mysql.com/doc/refman/5.1/en/select-into.html](http://dev.mysql.com/doc/refman/5.1/en/select-into.html)

你会做这样的事情：

`mysql_query('SELECT * INTO OUTFILE "/path/to/my_file/my_file.sql" from '.$table_name)`

然后这个 .sql 文件将在您的服务器上。

如果您没有运行`select into outfile`synatx 的权限。您可以使用该`mysqldump`实用程序，如下所示：

```
<?php
    exec('mysqldump db_name '.$table_name.' > my_file.sql');
?> 
```

这将创建一个带有指定名称的 .sql 文件。

# android - Path.reset 与 Path.rewind

> ID：11505617
> 
> 赞同：13
> 
> 时间：2012-07-16T13:40:31.953
> 
> 标签：android, reset, graphicspath

`path.reset()`在android中和有什么区别`path.rewind()`？

[文档](http://developer.android.com/reference/android/graphics/Path.html#rewind%28%29)说_

> 公共无效重置（）
> 
> 清除路径中的所有线条和曲线，使其为空。这不会更改填充类型设置。
> 
> 公共无效倒带（）
> 
> 倒回路径：清除路径中的任何直线和曲线，但保留内部数据结构以便更快地重用。

但这到底是什么意思？

什么时候应该使用其中之一？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-16T14:02:30.457

Path.reset => 你的路径是重置器。返回创建一个：new Path()

Path.rewind => 只需清空 Path 的内容，从列表中返回 make .clear()

# ms-access - 报告文本颠倒？

> ID：11505622
> 
> 赞同：3
> 
> 时间：2012-07-16T13:40:51.103
> 
> 标签：ms-access, vba, ms-office

出于特定原因，我需要能够在报告的下半部分颠倒（倒置）显示一些值。这份报告的目的是打印并向下折叠，所以我希望它遵守这种特定的格式。我找不到任何可以轻松做到这一点的东西。我考虑过但不知道如何实现的一些想法：

**“导入”倒置字体并将控件的字体设置为该字体？**

**以某种方式将整个控件反转 180 度**

有没有人有任何经验来做到这一点？

**编辑：安装颠倒字体并将控制源的字体属性设置为该字体是我实现的解决方案。对于一些颠倒的字体，可能需要在文本上调用str_reverse，因为颠倒的字体可能会颠倒顺序问题是——这只能在安装了字体的计算机上工作，对吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:53:17.597

我认为你的选择是：

*   黎巴嫩人： http: [//www.lebans.com/](http://www.lebans.com/)
*   Word 邮件合并
*   一种颠倒的字体
*   一个图像。

Access 有一个 Vertical 属性，但这仅适用于 90°。

# objective-c - 如何在显示为模态的 uinavcontroller 中添加视图

> ID：11505624
> 
> 赞同：0
> 
> 时间：2012-07-16T13:41:01.283
> 
> 标签：objective-c, ios

我的视图包含一个注册按钮，它以模态方式显示注册视图，我想在 uinavigationcontroller 中进行此注册，如何在 uinavcontroller 中添加此视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:51:59.683

只需让按钮的操作方法呈现导航控制器，如下所示：

```
-(IBAction)showSignup:(id)sender {
    MyViewController *signupController = [[MyViewController alloc] init];
    //Other setup for signupController;

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:signupController];

    //Set modal presentation and transition styles, if needed.

    [self presentModalViewController:navController animated:YES];
} 
```

# r - 如何找到到最近的非重叠元素的距离？

> ID：11505625
> 
> 赞同：2
> 
> 时间：2012-07-16T13:41:02.923
> 
> 标签：r, dataframe

我有一个如下表所示的表格，其中每个集群（第 1 列）包含小区域中不同元素（第 4 列）的注释，具有起始（第 2 列）和结束（第 3 列）坐标。对于每个条目，我想添加一列，该列对应于到该集群中最近的其他元素的距离。但我想排除集群中的一对元素具有相同的开始/结束坐标或重叠区域的情况。我怎样才能`nearest_distance`为这样的数据框生成这样的额外列？

```
cluster-47593-walk-0125 252     306     AR    
cluster-47593-walk-0125 6       23      ZNF148
cluster-47593-walk-0125 357     381     CEBPA 
cluster-47593-walk-0125 263     276     CEBPB 
cluster-47593-walk-0125 246     324     NR3C1 
cluster-47593-walk-0125 139     170     HMGA1 
cluster-47593-walk-0125 139     170     HMGA2 
cluster-47593-walk-0125 207     227     IRF8  
cluster-47593-walk-0125 207     227     IRF1  
cluster-47593-walk-0125 207     245     IRF2  
cluster-47593-walk-0125 207     227     IRF3  
cluster-47593-walk-0125 207     227     IRF4  
cluster-47593-walk-0125 207     227     IRF5  
cluster-47593-walk-0125 207     227     IRF6  
cluster-47593-walk-0125 204     245     IRF7  
cluster-47593-walk-0125 13      36      PATZ1 
cluster-47593-walk-0125 14      143     PAX4  
cluster-47593-walk-0125 4       25      RREB1 
cluster-47593-walk-0125 73      87      SMAD1 
cluster-47593-walk-0125 73      87      SMAD2 
cluster-47593-walk-0125 73      87      SMAD3 
cluster-47593-walk-0125 71      89      SMAD4 
cluster-47593-walk-0125 11      40      SP1   
cluster-47593-walk-0125 11      38      SP2   
cluster-47593-walk-0125 7       38      SP3   
cluster-47593-walk-0125 11      38      SP4   
cluster-47593-walk-0125 13      33      GTF2I 
cluster-47593-walk-0125 281     352     YY1   
cluster-47586-walk-0222 252     306     AR    
cluster-47586-walk-0222 6       23      ZNF148
[...] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:42:07.500

一、一些列名

```
names(data) <- c("cluster", "start", "end", "element")
data
                   cluster start end element
1  cluster-47593-walk-0125   252 306      AR
2  cluster-47593-walk-0125     6  23  ZNF148
3  cluster-47593-walk-0125   357 381   CEBPA
4  cluster-47593-walk-0125   263 276   CEBPB 
```

现在创建新列

```
data$nearest_distance <- apply(data, 1, function(x) 
 {
     cluster <- x[1]
     start <- as.numeric(x[2])
     end <- as.numeric(x[3])
     elem <- x[4]
     posb <- data[data$cluster == cluster & data$element != elem & 
                  ((data$start > end) | (data$end < start)), ]
     startDist <- as.matrix(dist(c(end, posb$start)))[, 1]
     endDist <- as.matrix(dist(c(start, posb$end)))[, 1]
     best.dist <- min(startDist[startDist > 0], endDist[endDist > 0])
     return(best.dist)
  }
) 
```

至少我不太喜欢函数的开头，但我想不出更好的解决方案。所以我们有

```
 cluster start end element nearest_distance
1  cluster-47593-walk-0125   252 306      AR                7
2  cluster-47593-walk-0125     6  23  ZNF148               48
3  cluster-47593-walk-0125   357 381   CEBPA                5
4  cluster-47593-walk-0125   263 276   CEBPB                5
5  cluster-47593-walk-0125   246 324   NR3C1                1 
..... 
```

**编辑：**修复`system.time()`测试后，这似乎是一种非常低效的方法。显然，计算整个`dist()`矩阵 是多余的，所以我们可以将这两行改为

```
startDist <- abs(end-posb$start)
endDist <- abs(start-posb$end) 
```

另一个小的变化是我们可以删除约束`data$element != elem`，因为后面有`> 0`. 在 1000 个集群上测试这个函数，每个集群有 30 行，耗时超过三分钟。仍然存在子集问题，所以我尝试将数据拆分为一个列表，这允许我们使用矩阵而不是数据框（因为集群的约束消失了） ，这也提高了效率。这次我们有 10 000 个集群，每个集群 30 行

```
data <- data[rep(1:30, each = 10000), ]
data$cluster <- factor(rep(1:10000, 30))

spl <- split(data[, c(2:3)], data$cluster)
spl <- lapply(spl, data.matrix)

system.time({
x = lapply(spl, function(z) {
     apply(z, 1, function(x) {
       start <- x[1]
       end <- x[2]
       posb <- z[z[,1] > end | z[,2] < start, , drop = FALSE]
       startDist <- abs(end-posb[, 1])
       endDist <- abs(start-posb[, 2])
       best.dist <- min(startDist[startDist > 0], endDist[endDist > 0])
       return(best.dist)
     })
  })
})
data$nearest_distance = unsplit(x, data$cluster)

user  system elapsed 
18.16    0.00   18.35 
```

# c# - 集合的可观察返回集合

> ID：11505628
> 
> 赞同：1
> 
> 时间：2012-07-16T13:41:04.213
> 
> 标签：c#, system.reactive

我刚刚开始学习`Observable`和所有它的变化并遇到一些奇怪的问题。这里是：

我有一个 WCF 服务声明（在“添加服务引用”过程之后）：

```
public IAsyncResult ReceiveAllUsersAsync(AsyncCallback Callback, object State)
{
    // Do some work
} 
```

这里是闭幕词：

```
public IObservable<User> EndReceiveAllUsers(IAsyncResult AsyncResultHandler)
{
   // Do some work (actuall y it's a:  return AsyncResultHandler.EndInvoke();
   // return IObservable<User>
} 
```

正如你可以看到的返回`EndReceiveAllUsers`集合`User`

接下来我像这样运行 RX：

```
// This will not owrk
Func<IObservable<User>> callWcfService = Observable.FromAsyncPattern<IObservable<User>>(BeginReceiveAll, EndReceiveAll);

// Actuall Func<> signature is:
Func<IObservable< IObservable<User> >> callWcfService = Observable.FromAsyncPattern<IObservable<User>>(BeginReceiveAll, EndReceiveAll); 
```

但问题是从返回的任何内容`Observable.FromAsyncPattern`都是. 实际上它返回。我如何只返回一个结果而不是结果集合`IObservable<>``IObservable<User>``IObservable< IObservable<User> >``IObservable<User>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:36:12.337

这实际上取决于您想要的行为，但要直接回答您的问题，您可以在完成最后一个用户后简单地连接每个用户序列：

```
IObservable<IObservable<User>> tooMuch = callWcfService();
IObservable<User> justRight = tooMuch.Concat(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:47:50.017

编辑：

`Observable``ReceiveAllUsersAsync`为您抽象了对/的多个调用`EndReceiveAllUsers`，因此每次获得一个整体`IEnumerable<User>`时，它都是由`Observable`. 因此，如果要`User`一个一个生成 s，则需要切换到一次生成一个用户的函数。`ReceiveAllUsersAsync`不是您需要的功能，因为它会等到获得所有用户，然后将它们全部归还。

您可以做的一件事是将所获得的转换`IEnumerable<User>`为`IObservable<User>`，但这将再次以这样的方式运行：（1）让所有用户在后台，（2）在没有暂停的情况下生成所有用户 - 这不是你的期望从一个像样的`IObservable<>`。

* * *

旧答案，供参考：
查看[http://msdn.microsoft.com/en-us/library/hh212031%28v=vs.103%29.aspx](http://msdn.microsoft.com/en-us/library/hh212031%28v=vs.103%29.aspx)：

```
public static Func<IObservable<TResult>> FromAsyncPattern<TResult>(
    Func<AsyncCallback, Object, IAsyncResult> begin,
    Func<IAsyncResult, TResult> end
) 
```

所以你也许只是需要`Observable.FromAsyncPattern<User>`，`User`你的`TResult`.

# salesforce - 如何使销售人员中的所有人都可以看到任务

> ID：11505632
> 
> 赞同：0
> 
> 时间：2012-07-16T13:41:09.140
> 
> 标签：salesforce

我们有一个要求，我们需要将任务设为私有，以便任务的所有者和分配给它的用户只能查看它。我们有一个开放的共享模型，所有对象的OWD设置都是公共的，活动由父级控制。关于如何实现这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:25:19.193

为了使活动完全私有，您需要将*活动*对象的共享模型更改为*私有*，并确保未选中*使用层次结构授予访问权限*。

这将确保用户无法看到未分配给他们的任务。

显然，如果您希望角色层次结构中较高的人员有权访问其下用户的任务，请确保选中*使用层次结构授予访问权限。*

# html - 跨域请求

> ID：11505634
> 
> 赞同：0
> 
> 时间：2012-07-16T13:41:10.637
> 
> 标签：html, jquery, request, cross-domain

我尝试从另一台服务器加载静态 html 页面。我提出跨域请求。

```
$(document).ready(function (){  
  $("div[src]").each(function(){
    var staticFileURL = $(this).attr('src');
    $.ajax({
          url: staticFileURL,
          dataType: 'jsonp',
          data: {},
          error: function(xhr, status, error) {
            alert(error);
          },
          success: function() {
                alert("success");
           },
            jsonp: false,
            jsonpCallback: 'jsonpCallback'
        });    
    });
 }); 
```

但是我遇到了 chrome 错误“SyntaxError:Unexpected token <”。

在 FF 中“语法错误：无效的 xml 属性值”。怎么了。有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:49:06.410

JSONP 是从服务器获取 json 数据，看起来你正在尝试接收 HTML 数据。尝试将您的 HTML 数据放在服务器上的 JSON 对象中，然后在成功回调中读取该 HTML：

例如，来自服务器的 json 数据：

`{ html: "<html><head>...</head></html>" }`

此外，您的成功回调应如下所示：

`success: function(**data**){ }`

# regex - MACOS 10.6 上的 GREP 用于 ' 嗨，我正在尝试确保没有任何文件具有 > /phptags.txt 所以这应该在我的根文件夹中给我一个名为 phptags.txt 的空白文件，如果所有 我尝试使用转义字符来表示 ? IE。/？遵循以下 URL 上的建议 https://unix.stackexchange.com/questions/10004/what-does-mean-in-a-regular-expression 以前的经验如何表明在 MacOS10.6 上 grep 正则表达式不需要 ? 转义以将其作为文字字符串进行搜索...但它不起作用！ 有什么建议吗？提前致谢 詹姆士 regexgreposx-snow-leopard 4 1 回答 1 This answer is useful 1 如果没有-E标志和*通配符，您的'> /phptags.txt 否则，在您的尝试中，会发生以下情况：

> ID：11505642
> 
> 赞同：2
> 
> 时间：
> 
> 标签：regex, grep, osx-snow-leopard

嗨，我正在尝试确保没有任何文件具有

```
<? 
```

（PHP 短标签），他们确实有

```
<?PHP 
```

到目前为止，我必须

```
grep -r -E '<?*' * | grep -Ev '<?php' >> /phptags.txt 
```

所以这应该在我的根文件夹中给我一个名为 phptags.txt 的空白文件，如果所有

我尝试使用转义字符来表示 ? IE。/？遵循以下 URL 上的建议

[https://unix.stackexchange.com/questions/10004/what-does-mean-in-a-regular-expression](https://unix.stackexchange.com/questions/10004/what-does-mean-in-a-regular-expression)

以前的经验如何表明在 MacOS10.6 上 grep 正则表达式不需要 ? 转义以将其作为文字字符串进行搜索...但它不起作用！

有什么建议吗？提前致谢

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T21:46:27.800

如果没有`-E`标志和`*`通配符，您的`'<?'`模式将匹配并按预期工作，之后您可以管道到逆。建议也添加`-i`不区分大小写的标志：

```
grep -ir '<?' * | grep -iv '<?php' >> /phptags.txt 
```

否则，在您的尝试中，会发生以下情况： `<?*`扩展的正则表达式匹配 first `<`，这`?`使得可选，然后`*`表示“前面的表达式的零个或多个”。所以实际上，这匹配任何以 开头或不以 开头的`<?`内容，因此匹配所有内容。

如果您切换到基本模式（不是`-E`），`<?`则按字面意思匹配。将其连接到逆向，该逆向`-v` `<?php`也与字面匹配以删除那些。

# c++ - 如何修复二叉搜索树中的逻辑错误？

> ID：11505647
> 
> 赞同：1
> 
> 时间：2012-07-16T13:41:48.117
> 
> 标签：c++, binary-search-tree

所以我一直在尝试让我的一个旧的 c++ 二叉搜索树程序工作。它编译并运行，但我没有得到我期望的结果。如果我按该顺序插入 c、d、a、b 并尝试删除 c，我的删除函数会跳过在顺序后继中找到的 if 条件。如果跳过条件，为什么还有其他 2 个？

它也是使用 gcc 编译的。

```
 Node::Node(string nodeItem,
           int nodeLine){
    item=nodeItem;
    vector<int> tempVector;
    tempVector.push_back(nodeLine);
    lines=tempVector;
    leftPtr = NULL;
    rightPtr = NULL;
}

// recursive method for finding node containing the word
Node* BST::find(string data, Node *curr) {

    if(curr==NULL) {
        cout << data << " is not in the tree" << endl;
        return curr;

    }
    if(curr->getItem().compare("theplaceholder")==0){
        return curr;
    }
    string tempItem = curr->getItem();
    //this if statement is if I am inserting a word that is already in the tree
    // or if I am removing the word from the tree
    if(data.compare(tempItem)==0){
        return curr;
    }
    else if(data.compare(tempItem)<0){
        return find(data,curr->getLeftPtr());
    }
    else{
        return find(data, curr->getRightPtr());
    }

}

void BST::insert(string data, int fromLine) {
    Node *curr;

    curr=find(data, root); 

    if(curr!=NULL && curr->getItem().compare("theplaceholder")==0){

        curr->setData(data);

        curr->addLines(fromLine);
    }

    if(curr==NULL){

        // I want to point to a nonNull node.
        // I am making a new node and having curr point to that instead of NULL
        //then I set it to

        curr=new Node(data, fromLine);

        cout <<curr->getItem() << endl;

        vector<int> foundLines=curr->getNodeLines();
        //cout<< "The word " <<curr->getItem() << " can be found in lines ";
        if(foundLines.empty())
            cout << "foundLines is empty";
        int size=foundLines.size();
        for(int count=0; count<size; count++){

            //cout << foundLines[count] << ", ";
        }

    }

    if(curr->getItem()==data){
        curr->addLines(fromLine);
    }
}
// remove method I am trying to check for in order successors to swap with the deleted node.
void BST::remove(string data) {
    Node *curr=root;

    Node *temp=find(data, curr);
    if(temp==NULL){
        cout << " nothing to remove" << endl;
    }
    else if(temp->getRightPtr()!=NULL){

        curr=temp->getRightPtr();
        cout << curr->getItem() << endl;
        while(curr->getLeftPtr()!=NULL){
            curr=curr->getLeftPtr();
            cout << curr->getItem() << endl;
        }
        temp->setData(curr->getItem());

        temp->setLines(curr->getNodeLines());
        delete curr;
        curr=NULL;
    }
    else if(temp->getLeftPtr()!=NULL){
        cout <<"if !temp->getLeftPtr" << endl;
        curr=temp->getLeftPtr();
        cout << curr->getItem() << endl;
        while(curr->getRightPtr()!=NULL){
            curr=curr->getRightPtr();
            cout << curr->getItem() << endl;
        }
        temp->setData(curr->getItem());

        temp->setLines(curr->getNodeLines());
        delete curr;
        curr=NULL;
    }
    else{
        cout <<"else delete temp" << endl;
        delete temp;
        temp=NULL;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:48:40.237

这条线的原因

```
else if(temp->getRightPtr()!=NULL){ 
```

永远不会成功是您从未在任何节点上设置正确的指针 - getRightPtr 只能返回 null。如果您在构建树后在调试器中检查了树的状态，或者您单步执行了插入函数，您可能已经看到了这一点。问题是：

*   如果节点不在树中，您的 find 函数不会返回 null ，而您的 insert 函数期望它会
*   您的插入函数需要在树中找到该节点应位于的位置 - 通过修复 find 函数或自己，然后创建一个新节点并从左侧或右侧的父节点添加对它的引用适当的一面
*   您的插入函数将第一个插入的节点的行号显示两次：一次是覆盖占位符时，一次是在插入结束时（而不是在这里使用占位符，我可能已经初始化`root`为 null 而是设置 root = curr创建第一个节点时）
*   从左侧分支提升最高节点时，您的删除功能需要做更多的工作；它需要
    *   从它的前一个父节点中正确清理该节点 - 此时您删除对象但不理会任何悬空指针
    *   在移动该节点以占用其上一个插槽之前提升该节点的任何子节点

IE

```
 D                                       C                           
     / \                                     / \
    A   E  remove 'D'                       A   E
     \       => 'C' is highest on left       \
      C         but need to move B to C       B
     /
    B 
```

# maven - org.apache.maven.BuildFailureException：没有提供 SCM URL 来执行从

> ID：11505666
> 
> 赞同：20
> 
> 时间：2012-07-16T13:42:55.677
> 
> 标签：maven, maven-release-plugin

我正在使用 Maven 2.2.1 并且成功运行：

```
mvn -B release:clean release:prepare 
```

但得到错误信息：

> 没有提供 SCM URL 来执行从

当我运行时：

```
mvn release:perform 
```

我`pom.xml`的`scm`标签定义正确：

```
<scm>
    <url>file:///C:/tmp/svnrepo/myproj/trunk</url>        
    <connection>scm:svn:file:///C:/tmp/svnrepo/myproj/trunk</connection>
    <developerConnection>scm:svn:file:///C:/tmp/svnrepo/myproj/trunk</developerConnection>        
</scm> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-08-13T05:48:21.240

可以通过在根文件夹中`release:perform`创建手动编辑的文件来重新运行 maven 。`release.properties`该文件应定义这两个属性：`scm.url`和`scm.tag`. 这是一个可能的例子：

```
scm.url=scm:git:https://github.com/owner/repo.git
scm.tag=v1.0.4 
```

使用此文件可以重做`release:perform`任务。

*受到这个[答案](https://stackoverflow.com/a/18943705)的启发。*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-16T13:59:17.723

看起来我做了一个`mvn -DdryRun=true release:perform`，这已经从准备阶段删除了 release.properties 文件。

所以我将 -DconnectionUrl 添加到命令中以提供标签的 url

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-14T08:51:21.520

它应该工作。我有类似的问题，但在我的情况下，由于网络错误，我不得不重新启动它：

```
mvn release:perform -rf :{ARTIFACT ON WHICH IT FAILED} -DconnectionUrl=scm:svn:{URL TO TAG} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-30T12:05:37.953

讯息

> 没有提供 SCM URL 来执行从

不代表中的 SCM URL `pom.xml`！

有两种 SCM-URLS：

1.  主干文件夹（用于开发）
2.  标记文件夹（用于标记发布）

在 pom.xml 中，您指定 trunk-folder-url。release:perform 需要的是 tag-folder-url。您可以指定参数[-DconnectionUrl](https://maven.apache.org/maven-release/maven-release-plugin/perform-mojo.html#connectionUrl)。

通常你在一个 Maven 调用中使用`prepare`and 。`perform`准备做所有准备工作，并将使用注释向版本控制系统提交一些资源`[maven-release-plugin] prepare release XXX`-**但并非所有文件**都已提交！一个重要的文件**没有**提交给版本控制系统，`release.properties`. 如果您省略[-DconnectionUrl](https://maven.apache.org/maven-release/maven-release-plugin/perform-mojo.html#connectionUrl) ，则使用此文件。

问题是`perform`因为结帐/提交分别需要`release.properties`或[-DconnectionUrl](https://maven.apache.org/maven-release/maven-release-plugin/perform-mojo.html#connectionUrl)。

您可以：

1.  使用[-DconnectionUrl](https://maven.apache.org/maven-release/maven-release-plugin/perform-mojo.html#connectionUrl)或
2.  `release:prepare release:perform`一枪打来靠不承诺`release.properties`

更多信息[在这里](https://maven.apache.org/maven-release/maven-release-plugin/examples/perform-release.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-25T08:33:19.540

我在我们的 CI 自动化中遇到了同样的异常，结果证明是因为`target/checkout`目录已经有一个发布版本。`release:prepare`对于其中一个项目，我们必须在真正的 Maven和`release:perform`步骤之间引入一个临时的 Maven 发布执行构建。作为即兴创作的一部分，发布标签被签出，`target/checkout`我注意到如果这个目录没有被删除，它会导致`release:perform`失败并出现`No SCM URL was provided to perform the release from`错误。我不知道这是否重要，但我们也使用`-DlocalCheckout=true`选项。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-05-21T14:01:27.780

只是`mvn release:clean release:prepare`先运行，然后`mvn release:perform`为我工作。

# java - Spring Roo MySQL JDBC 驱动程序

> ID：11505671
> 
> 赞同：1
> 
> 时间：2012-07-16T13:43:23.123
> 
> 标签：java, mysql, spring-roo

我正在尝试在 Spring Roo 中安装 MySQL JDBC 驱动程序。这是日志：

```
roo> addon search --requiresDescription "#jdbcdriver,driverclass:com.mysql.jdbc.Driver"
0 found, sorted by rank; T = trusted developer; R = Roo 1.2 compatible
ID T R DESCRIPTION -------------------------------------------------------------
--------------------------------------------------------------------------------
[HINT] use 'addon info id --searchResultId ..' to see details about a search result
[HINT] use 'addon install id --searchResultId ..' to install a specific search result, or
[HINT] use 'addon install bundle --bundleSymbolicName TAB' to install a specific add-on version 
```

我该做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-03T21:30:30.697

在 Spring Roo 1.2.5.RELEASE 中，似乎有一个错误。add on 命令显示 MySQL 驱动程序已成功安装，但运行 DBRE 命令失败且未找到驱动程序。

对于这个版本的 Roo，我也有其他人抱怨这个问题。

对我有用的唯一方法是将 MySQL 驱动程序 (JAR) 手动复制到 /spring-roo-1.2.5.RELEASE/bundle 文件夹并重新启动 Spring STS，这是我运行 Roo 的位置。

那行得通；希望这可以帮助同一条船上的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T18:03:11.447

告诉 roo 安装 jdbc-drive 试试这个：

```
roo> addon search jdbc
9 found, sorted by rank; T = trusted developer; R = Roo 1.2 compatible
ID T R DESCRIPTION -------------------------------------------------------------
01 Y Y 1.2.4.0010 #jdbcdriver driverclass:net.sourceforge.jtds.jdbc.Driver.
       This bundle wraps the standard Maven artifact: jtds-1.2.4.
02 Y Y 5.1.18.0001 #jdbcdriver driverclass:com.mysql.jdbc.Driver. This bundle
       wraps the standard Maven artifact: mysql-connector-java-5.1.18.
03 Y Y 10.8.2.2_0001 Derby Client #jdbcdriver
       driverclass:org.apache.derby.jdbc.ClientDriver. This bundle wraps the...
04 Y Y 6.7.0.0010 #jdbcdriver driverclass:com.ibm.as400.access.AS400JDBCDriver.
       This bundle wraps the standard Maven artifact: jtopen-6.7.
05 Y Y 10.8.2.2_0001 Derby #jdbcdriver
       driverclass:org.apache.derby.jdbc.EmbeddedDriver. This bundle wraps...
06 Y Y 9.1.0.901-1_0001 Postgres #jdbcdriver driverclass:org.postgresql.Driver.
       This bundle wraps the standard Maven artifact:...
07 Y Y 9.1.0.901_0001 Postgres #jdbcdriver driverclass:org.postgresql.Driver.
       This bundle wraps the standard Maven artifact:...
08 Y Y 1.3.170.0001 H2 #jdbcdriver driverclass:org.h2.Driver. This bundle wraps
       the standard Maven artifact: h2-1.3.170.
09 Y Y 2.1.6.0020 #jdbcdriver driverclass:org.firebirdsql.jdbc.FBDriver. This
       bundle wraps the standard Maven artifact: firebird-2.1.6.
--------------------------------------------------------------------------------
[HINT] use 'addon info id --searchResultId ..' to see details about a search result
[HINT] use 'addon install id --searchResultId ..' to install a specific search result, or
[HINT] use 'addon install bundle --bundleSymbolicName TAB' to install a specific add-on version
roo> addon install id --searchResultId 02 
```

ID是列表中的ID...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T17:35:09.360

如果您只是想添加驱动程序，您可以直接在 pom.xml 中添加它，例如

```
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.21</version>
</dependency> 
```

# java - 理解 Java 中的类加载器

> ID：11505675
> 
> 赞同：4
> 
> 时间：2012-07-16T13:43:55.550
> 
> 标签：java, jvm, classloader

我对 JVM 和 ClassLoaders 还很陌生。我有这两个类：

```
public abstract class CoreModule extends Entity

public final class EventManager extends CoreModule 
```

在程序开始时，我创建了一个`EventManager`. 所以我知道JVM知道什么是`Entity`类以及如何加载它（也就是说，它知道`ClassLoader`要使用什么），因为`EventManager`它是一个孙子。但是当一个`Entity`实例通过某种序列化机制传递时，它会抛出`ClassNotFoundException`. 我必须手动设置`ClassLoader`使用（`Event.class.getClassLoader()`）。

JVM 怎么会不知道什么是`Event`类，或者如果它已经完成了如何加载它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:57:52.973

实际上，JVM 并没有“神奇地”解决这个问题。这一切都基于一个系统类加载器，它会根据您使用的环境而有所不同。然后每个线程都有一个上下文 ClassLoader，它自动派生自 this。

您可以使用[Thread.setContextClassLoader更改上下文 ClassLoader](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#setContextClassLoader%28java.lang.ClassLoader%29)

如果您的序列化代码应该能够解析从上下文 ClassLoader 中不可见的类，您需要按照您的方式进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:58:12.253

仅仅通过创建`EventManager`你的实例并没有向 JVM 展示如何加载它。实际上，您在这里不是在与 JVM 对话。您正在与一个特定的类加载器交谈，并且当反序列化时同一个类加载器不负责时，您可能会收到错误。这就是为什么您的问题完全在于 claloader 在什么时候负责。

# paypal - 在 PayPal RequestPermission API 中指定多个范围

> ID：11505676
> 
> 赞同：6
> 
> 时间：2012-07-16T13:43:57.157
> 
> 标签：paypal, paypal-nvp

查看[RequestPermissions API](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_PermissionsRequestPermissionsAPI)，它说范围应该是一个字符串。但是，我一直未能找到如何指定多个范围（特别是 EXPRESS_CHECKOUT 和 REFUND）。逗号分隔、分号，甚至使用他们的 NVP 列表语法都不起作用。CURL 示例将不胜感激。

逗号分隔的示例...

```
curl -s --insecure -H 
"X-PAYPAL-SECURITY-USERID: API_USERNAME" 
-H "X-PAYPAL-SECURITY-PASSWORD: API_PASSWORD" 
-H "X-PAYPAL-SECURITY-SIGNATURE: API_SIGNATURE" 
-H "X-PAYPAL-REQUEST-DATA-FORMAT: NV" 
-H "X-PAYPAL-RESPONSE-DATA-FORMAT: NV" 
-H "X-PAYPAL-APPLICATION-ID: APP-80W284485P519543T" 
https://svcs.sandbox.paypal.com/Permissions/RequestPermissions -d 
"requestEnvelope.errorLanguage=en_US&scope=EXPRESS_CHECKOUT,REFUND&callback=http://my/callback" 
```

当我提出该请求时，我返回“无效的请求参数范围，值为 EXPRESS_CHECKOUT，REFUND”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T20:21:58.893

行。随机找到答案。范围变量必须使用“scope(0)=SCOPE_1&scope(1)=SCOPE_2...”来设置

所以，cURL 请求看起来像这样......

```
curl -s --insecure -H 
"X-PAYPAL-SECURITY-USERID: API_USERNAME" 
-H "X-PAYPAL-SECURITY-PASSWORD: API_PASSWORD" 
-H "X-PAYPAL-SECURITY-SIGNATURE: API_SIGNATURE" 
-H "X-PAYPAL-REQUEST-DATA-FORMAT: NV" 
-H "X-PAYPAL-RESPONSE-DATA-FORMAT: NV" 
-H "X-PAYPAL-APPLICATION-ID: APP-80W284485P519543T" 
https://svcs.sandbox.paypal.com/Permissions/RequestPermissions -d 
"requestEnvelope.errorLanguage=en_US&scope(0)=EXPRESS_CHECKOUT&scope(1)=REFUND&callback=http://my/callback" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-22T23:57:07.937

如果您使用他们的 JSON API，范围可以是一个数组。

# java - JBDC 和 Phpmyadmin / MySQL 未连接

> ID：11505678
> 
> 赞同：0
> 
> 时间：2012-07-16T13:43:58.910
> 
> 标签：java, mysql, jdbc, phpmyadmin

有人可以向我解释以下代码哪里出错了：

```
package newdbtet;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;

public class NewDBTet {

    public static void main(String[] args) throws InstantiationException, SQLException, IllegalAccessException {
        try {
            System.out.println("MySQL Connect Example.");
            Connection conn = null;
            String url = "jdbc:mysql://localhost:3306/";
            String dbName = "evidence_db";
            String driver = "com.mysql.jdbc.Driver";
            String userName = "root";
            String password = "";

                Class.forName(driver).newInstance();
                conn = DriverManager.getConnection(url + dbName, userName, password);
                System.out.println("Connected to the database");
                conn.close();
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(NewDBTet.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

异常错误：

```
Jul 16, 2012 2:59:24 PM newdbtet.NewDBTet main
SEVERE: null
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver 
```

这是否意味着我没有正确安装驱动程序/库？抱歉 - Java 不是最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:08:46.013

下载 MySQL Driver for Eclipse/Java 然后你应该得到一个 .jar 驱动程序。然后右键单击您的课程并转到构建路径。最后将外部库添加到您的项目中，这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:01:54.153

使用 -cp 命令将 JDBC 驱动程序 .jar 添加到类路径中，即 -`java -cp MysqlDriver.jar; MyProgram`或将 .jar 添加到 IDE 中的构建路径中。

# c - __read_mostly、__init、__exit 宏的良好解释

> ID：11505681
> 
> 赞同：38
> 
> 时间：2012-07-16T13:44:08.220
> 
> 标签：c, gcc, linux-kernel

的宏展开`__read_mostly`：

```
#define __read_mostly __attribute__((__section__(".data..read_mostly")) 
```

这个来自`cache.h`

`__init`：

```
#define __init          __section(.init.text) __cold notrace 
```

从`init.h`

`__exit`：

```
#define __exit          __section(.exit.text) __exitused __cold notrace 
```

通过网络搜索后，我没有找到任何关于那里发生的事情的好的解释。

附加问题：我听说过内核开发中使用的各种“链接器魔术”。任何有关此的信息都会很棒。

我对这些宏的作用有一些**想法**。Like`__init`应该表示初始化后可以删除功能代码。`__read_mostly`用于指示数据很少被写入，从而最大限度地减少缓存未命中。但我不知道**他们是如何做到**的。我的意思是它们是`gcc`扩展。所以理论上它们可以通过小的用户空间 c 代码来演示。

**更新 1：**

我试图`__section__`用任意部分名称来测试。测试代码：

```
#include <stdio.h>

#define __read_mostly __attribute__((__section__("MY_DATA")))

struct ro {
    char a;
    int b;
    char * c;
};

struct ro my_ro  __read_mostly = {
    .a = 'a',
    .b = 3,
    .c = NULL,
};

int main(int argc, char **argv) {
    printf("hello");
    printf("my ro %c %d %p \n", my_ro.a, my_ro.b, my_ro.c);
    return 0;
} 
```

现在使用`__read_mostly`生成的汇编代码：

```
 .file   "ro.c"
.globl my_ro
    .section    MY_DATA,"aw",@progbits
    .align 16
    .type   my_ro, @object
    .size   my_ro, 16
my_ro:
    .byte   97
    .zero   3
    .long   3
    .quad   0
    .section    .rodata
.LC0:
    .string "hello"
.LC1:
    .string "my ro %c %d %p \n"
    .text
.globl main
    .type   main, @function
main:
.LFB0:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    pushq   %rbx
    subq    $24, %rsp
    movl    %edi, -20(%rbp)
    movq    %rsi, -32(%rbp)
    movl    $.LC0, %eax
    movq    %rax, %rdi
    movl    $0, %eax
    .cfi_offset 3, -24
    call    printf
    movq    my_ro+8(%rip), %rcx
    movl    my_ro+4(%rip), %edx
    movzbl  my_ro(%rip), %eax
    movsbl  %al, %ebx
    movl    $.LC1, %eax
    movl    %ebx, %esi
    movq    %rax, %rdi
    movl    $0, %eax
    call    printf
    movl    $0, %eax
    addq    $24, %rsp
    popq    %rbx
    leave
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE0:
    .size   main, .-main
    .ident  "GCC: (GNU) 4.4.6 20110731 (Red Hat 4.4.6-3)"
    .section    .note.GNU-stack,"",@progbits 
```

现在没有`__read_mostly`宏，汇编代码或多或少保持不变。

这是差异

```
--- rm.S    2012-07-17 16:17:05.795771270 +0600
+++ rw.S    2012-07-17 16:19:08.633895693 +0600
@@ -1,6 +1,6 @@
    .file   "ro.c"
 .globl my_ro
-   .section    MY_DATA,"aw",@progbits
+   .data
    .align 16
    .type   my_ro, @object
    .size   my_ro, 16 
```

所以基本上只创建了 a 小节，没什么特别的。

即使是 objdump disassmbly 也没有任何区别。

所以我对它们的最终结论是，**链接器的工作**是为标有特殊名称的数据部分做一些事情。我认为 linux 内核使用某种自定义**链接器脚本**来实现这些事情。

其中一件事是`__read_mostly`，可以对放置在那里的数据进行分组和管理，从而可以减少缓存未命中。

**lkml**有人提交了一个补丁来删除`__read_mostly`. 这引发了一场关于`__read_mostly`.

这是链接：[https ://lkml.org/lkml/2007/12/13/477](https://lkml.org/lkml/2007/12/13/477)

我将在`__init`和上发布进一步的更新`__exit`。

**更新 2**

这些宏`__init`，`__exit`并将**数据**`__read_mostly`的内容（在 的情况下）和**文本**（在和的情况下）放入自定义命名的部分。这些部分由链接器使用。现在由于各种原因链接器没有用作其默认行为，因此使用**链接器脚本**来实现这些宏的目的。**`__read_mostly`**`__init``__exit`****

 ******背景可以找到如何使用自定义链接器脚本来消除**死代码**（链接器链接到但从未执行的代码）。这个问题在嵌入式场景中非常重要。本文档讨论如何微调链接器脚本以删除**死代码**：elinux.org/images/2/2d/ELC2010-gc-sections_Denys_Vlasenko.pdf

如果内核可以找到初始链接描述文件`include/asm-generic/vmlinux.lds.h`。这不是最终脚本。这是一种**起点**，**链接描述文件**针对不同的平台进行了进一步修改。

快速浏览一下这个文件，可以立即找到感兴趣的部分：

```
#define READ_MOSTLY_DATA(align)                     \
    . = ALIGN(align);                       \
    *(.data..read_mostly)                       \
    . = ALIGN(align); 
```

这部分似乎正在使用“.data..readmostly”部分。

您还可以找到`__init`和`__exit`部分相关的链接器命令：

```
#define INIT_TEXT                           \
    *(.init.text)                           \
    DEV_DISCARD(init.text)                      \
    CPU_DISCARD(init.text)                      \
    MEM_DISCARD(init.text)

#define EXIT_TEXT                           \
    *(.exit.text)                           \
    DEV_DISCARD(exit.text)                      \
    CPU_DISCARD(exit.text)                      \
    MEM_DISCARD(exit.text) 
```

链接似乎很复杂:)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-16T15:23:11.430

[GCC 属性](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Attribute-Syntax.html)是一种通用机制，用于向编译器提供超出语言本身规范的指令。

您列出的宏的常用功能是使用描述为的[`__section__`属性](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Function-Attributes.html#index-g_t_0040code_007bsection_007d-function-attribute-2579)：

> 该`section`属性指定函数位于特定部分中。例如，声明：
> 
> ```
> extern void foobar (void) __attribute__ ((section ("bar"))); 
> ```
> 
> 将函数 foobar 放在 bar 部分。

那么将某些内容放在一个部分中意味着什么？一个目标文件分为几个部分：`.text`可执行机器代码、`.data`读写数据、`.rodata`只读数据、`.bss`初始化为零的数据等。这些部分的名称和用途是平台约定的问题，还有一些特殊的只能使用`__attribute__ ((section))`语法从 C 中访问节。

在您的示例中，您可以猜测这是大部分将被读取的数据`.data..read_mostly`的子部分；是一个文本（机器代码）部分，将在程序初始化等时运行。`.data``.init.text`

在 Linux 上，决定如何处理各个部分是内核的工作；当用户空间请求`exec`程序时，它将逐段读取程序映像并适当地处理它们：`.data`段被映射为读写页面、`.rodata`只读页面、只`.text`执行页面等。大概`.init.text`会在程序开始；这可以由内核或放置在程序入口点的用户空间代码来完成（我猜是后者）。

如果您想查看这些属性的效果，一个好的测试是运行 gcc 并`-S`选择输出汇编代码，其中将包含节指令。然后，您可以使用或不使用节指令运行汇编程序，并使用`objdump`甚至十六进制转储生成的目标文件以查看它的不同之处。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-07T19:50:13.187

据我所知，这些宏*仅供*内核使用。从理论上讲，它们可以应用于*user-space*，但我认为情况并非如此。它们都*将*相似的变量和代码组合在一起以获得不同的效果。

## 初始化/退出

*设置内核*需要大量代码；这发生在任何*用户空间*运行之前。即，在*init 任务*运行之前。在许多情况下，此代码永远不会再次使用。因此，在启动后消耗*不可交换的*RAM 将是一种浪费。熟悉的内核消息**Freeing init memory**是该`init`部分的结果。一些驱动程序可能配置为*模块*。在这些情况下，他们*退出*。但是，如果它们被编译到内核中，则不一定会*退出*（它们可能会*关闭*）。这是对此类代码/数据进行分组的另一部分。

## 冷热

每个**高速缓存**行具有固定大小。您可以通过将相同类型的数据/函数放入其中来最大化**缓存。**这个想法是经常使用的代码可以并排使用。如果**高速缓存**是四条指令，则一个热例程的结束*应该与下一个热**例程*的开始合并。同样，将很少使用的代码放在一起也很好，因为我们希望它永远不会进入**缓存**。

 ***## 主要阅读

这里的想法类似于**hot**；与数据的差异我们可以更新值。完成后，整个高速缓存行变*脏*，必须*重新写入*主 RAM。这对于多 CPU 一致性以及该**缓存行**过时是必需的。**如果 CPU缓存**版本和主内存之间的差异没有任何变化，那么*eviction*不需要发生任何事情。这优化了 RAM 总线，以便其他重要的事情可以发生。

这些项目严格用于内核。可以（是？）为*用户空间*实施类似的技巧。这取决于使用的*装载机*；这通常取决于使用的*libc*。*********

# android - WebView 之上的 VideoView

> ID：11505683
> 
> 赞同：0
> 
> 时间：2012-07-16T13:44:18.287
> 
> 标签：android, focus, android-videoview

我有一个带有 WebView 的选项卡，其中显示来自主页的视频列表。一旦我点击一个视频，我就会设置内容视图（视频），它是一个只包含一个视频视图的 XML。我在 VideoView 中添加了一个 onCompletionListener，所以当视频结束时，我想 setContentView(webview)。我的 LogCat 显示 WebView 正在加载，但我从未出现。屏幕保持黑色。如何让焦点回到 WebView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:46:17.657

当您想要切换时，不要使用两种不同的布局并调用 setContentView() 我认为您应该将 WebView 和 VideoView 放入相同的布局中，并使用`View.setVisibility(View.INVISIBLE);`并`View.setVisibility(View.VISIBLE);`控制在适当的时间显示哪一个。

# perl - 编程语言语法解析器（将 Perl 脚本转换为 Lua）

> ID：11505685
> 
> 赞同：0
> 
> 时间：2012-07-16T13:44:20.700
> 
> 标签：perl, lua

是否有通用词法分析器可用于将 100-1000 个 perl 脚本转换为包含 API 更改的 lua 脚本？

例如，我有一个使用 perl 编写脚本界面的 c++ 程序——它使用子按钮之类的东西

按钮.addEventLister(...)

结尾

现在我想将我的脚本界面更改为 lua - 我拥有所有这些 perl 脚本 - 我可以编写一个基于正则表达式等的手动解析器，以获得良好的对话率，我相信 - 但是我更喜欢一个智能的解决方案，这将使它成为不可能在语言之间出现对话错误（不同的数据类型、语言语法关键字等）

也许是这样的？ [http://irony.codeplex.com/wikipage?title=expression%20grammar%20sample&referringTitle=Home](http://irony.codeplex.com/wikipage?title=expression%20grammar%20sample&referringTitle=Home)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:07:10.057

没有现成的解决方案可以完全满足您的需求（尤其是考虑到您需要的“API 更改”）。

您的下一个最佳选择是找到一个可以生成抽象语法树的 perl 解析器，然后您可以将其转换为 Lua。

您当然可以分叉 perl 解析器并从那里开始工作，但使用已经制作的 Perl 解析器可能会更简单，例如[PPI](http://search.cpan.org/~adamk/PPI-1.215/)。它将允许您在更高级别上操作语言。

您仍然需要通过更多 perl 将 PPI 生成的内存数据结构转换为 Lua 代码。那一块不见了，你必须自己编程。

如果您正在编写 100 个脚本，则可能不值得尝试走这条路，而是手动进行翻译。如果你更接近1000，我会说值得一试。

不过，我希望你有办法自动测试你的脚本。否则，您将获得很多乐趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:10:31.627

首先，您必须在 Lua 中编写与 Perl 的操作符做同样事情的函数。即使像加法这样简单的事情在 Perl 和 Lua 中的行为也不同，更不用说更复杂`split`的事情，比如匹配运算符。

一旦你完成了这些，实际上将你的 Perl 脚本翻译成 Lua 就相当容易了。问题是第一步需要你数年才能完成。

更好的选择是在你的 Lua 进程中[嵌入](http://perldoc.perl.org/perlembed.html)一个 Perl 解释器（假设 Lua 允许你链接到 C 代码，但如果你不能，我会非常惊讶）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:01:04.353

我的回答很简短：**不**，除非你的 Perl 代码看起来和表现得像带有印记的 C ;-)

（但是，您可以尝试通过应用大量正则表达式来帮助手动翻译，例如

`s/ sub \s+ (\w+) \s* \{ /function $1/x`,

`s/ \} \s* elsif \s* \{ /elseif/x`或者

`s/[@\$%]//`和排序）

# asp.net - appcmd 使用 iis 7 创建了忽略 asp.net web.config 文件的站点

> ID：11505686
> 
> 赞同：1
> 
> 时间：2012-07-16T13:44:20.393
> 
> 标签：asp.net, iis, web-config, appcmd

如果我通过 inetmgr 应用程序（IIS 7）手动创建一个站点并为其提供站点名称和物理位置（以及将其应用程序池更改为 .net 4），它都运行良好并获取 web.config 文件。

但是，如果我使用 appcmd 在命令行上设置相同的站点，它出于某种原因会忽略 web.config 文件，inetmgr 会显示该站点正在工作并且文件在那里，但是在“配置编辑器”下没有来自那里的条目web.config 文件。

命令行 app cmd 从构建脚本运行，但执行此操作的方法如下：

```
def create_web_site(site_name, site_location, site_port)
  delete_command = "#{$file["appcmd"]} delete site #{site_name}"
  result = system delete_command
  puts "Failed to delete site on IIS: #{$?}" unless result

  add_command = "#{$file["appcmd"]} add site /name:#{site_name} /bindings:http/*:#{site_port}: /physicalPath:#{site_location}"
  result = system add_command
  raise "Failed to add site on IIS: #{$?}" unless result

  set_app_pool_command = "#{$file["appcmd"]} set app #{site_name}/ /applicationPool:\"ASP.NET v4.0\""
  result = system set_app_pool_command
  raise "Failed to bind site to .net 4 app pool on IIS: #{$?}" unless result

  start_site_command = "#{$file["appcmd"]} start site #{site_name}"
  result = system start_site_command
  raise "Failed to start site on IIS: #{$?}" unless result
end 
```

您真的不需要知道 rake/ruby 就可以看到它正在运行 appcmd 并删除一个站点（如果存在），然后使用 .net 4 应用程序池添加新站点，然后启动该站点。这一切都很好，据我所知，我可以看到两个相同的站点（除了我通过 GUI 手动创建的站点与另一个站点具有不同的端口以停止冲突）。

appcmd 中是否缺少 GUI 在设置站点时为您做的一些事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:12:12.357

在解决了这个问题之后，文件夹之间的斜线对于 IIS 不正确。这一切似乎都可以工作，但什么都不会，所以我的站点目录是这样的：

c:/some_folder/some_site

在我的脚本中，我不得不将它们交换为：

c:\some_folder\some_site

一切正常，但是由于“\”字符通常表示跳过或忽略下一个字符，我只是将其作为第一个字符串的字符串替换而不是作为*正确*的开始方式输入。

# xml - 当输出不是序列时，name(path) 和 path/name() 之间的区别

> ID：11505687
> 
> 赞同：1
> 
> 时间：2012-07-16T13:44:20.470
> 
> 标签：xml, xquery, xpath-2.0

Xquery 之间的区别

```
 name(/Data/element1/element2[@ID=$ID]), 
```

和

```
 /Data/element1/element2[@ID=$ID]/name() 
```

当结果不是序列时，哪个是最佳实践？（如果是，那么前者基本不能用）

我忘记了什么，或者在那种情况下它们完全可以互换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:33:42.907

**`name()`在 XPath 2.0 中，如果函数的参数是包含多个项目的序列，则此表达式会引发错误**：

```
name(/Data/element1/element2) 
```

**在 XPath 1.0 中，这不是错误**，`name()`它使用节点集中的第一个节点作为其参数。

两者同样无用，因为一看就知道结果一定是`"element2"`。

> 当结果不是序列时哪个是最佳实践（如果是，则基本上不能使用前一个）？

**这适用于 XPath 2.0 / XQuery 的两种情况**：

```
/Data/element1/element2/name() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:39:37.033

好的，区别在于没有区别，因为它是同一个函数，因为 name() 等于 name(.)，所以它不是不同的语法。它发生的是 name(X) 应该始终包含一个输出不超过 1 次的表达式。

所以我们可以使用：

```
/Data/name(./element1/element2) = /Data/name(element1/element2) 
 * element2, if a single occurrence in the whole data

/Data/element1/name(./element2) = /Data/element1/name(element2)
 * element2, if a single occurrence per any element1, for each element1

/Data/element1/element2/name() = /Data/element1/element2/name(.)
 * element2, no matter num of occurrences, we print them all 
```

因此，当我们预计只出现一次时，name(complete_expression) 可能会受到青睐，因为我们可以为我们的假设添加一个额外的验证步骤，但替代方案还有一个优点是我们可以准备地形以处理表达式的多个输入（数组) 如果有一天，数据发生变化并且这是有效且预期的

# facebook - 注销后更改 Facebook 登录按钮自定义文本

> ID：11505692
> 
> 赞同：-2
> 
> 时间：2012-07-16T13:44:31.403
> 
> 标签：facebook

我有应用程序，我在其中放置了自定义文本“连接”。在 fb-login 按钮上但在 fb 注销之后。它被更改为“登录”而不是“连接”。

连接

任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:02:40.830

您可以使用 FB.getLoginStatus 将按钮 InnerText 设置为 Connect 或 Log In 任何您想要的...

# javascript - jquery dom号

> ID：11505697
> 
> 赞同：0
> 
> 时间：2012-07-16T13:44:47.490
> 
> 标签：javascript, jquery, dom

我有两段重复的代码，我想独立工作。因此，我使用唯一的 dom 编号来操作每个编号。

我知道我可以使用 $("*").index(this) 来获取当前元素的 DOM 编号，但是我将如何获取当前元素的父级（使用名为“test”的类）的 DOM 编号元素？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:02:10.673

您可以使用 $(this).parent() 来获取当前元素的父元素，因此您可以将“ *this* ”替换为此查询的值，结果如下： $("*").index($(这个).parent()[0])

# bitmap - 位图或二叉搜索树

> ID：11505698
> 
> 赞同：0
> 
> 时间：2012-07-16T13:44:52.250
> 
> 标签：bitmap, binary-search-tree

以下哪种数据结构最适合插入、删除、查找、设置交集、联合？优化时间复杂度。

1.  位图
2.  二叉搜索树

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:30:01.630

# 前进

这个问题是模棱两可的，所以我会做一些假设。

首先，我们试图表示[0 到 M] 范围内的一**组数字，其中 M 是一个相当小的数字，例如 100,000。**

BST 可以简单地包含集合中的元素。

Bitmap 可以只有 M 位长，如果该位置的数字在集合中，则设置一个位，如果不是，则该数字不在集合中。我假设已经创建了一个大小为 M 的位图。

在这个答案中，我考虑[了自平衡二叉搜索树](http://en.wikipedia.org/wiki/Self-balancing_binary_search_tree)和[位图](http://en.wikipedia.org/wiki/Bitmap_index)——对于非平衡 BST，您必须处理每个操作的最佳情况、平均情况和最坏情况。

# 操作和复杂性

## 插入：将 n 添加到集合中。

*   **BST**需要 O( log(n) ) 时间进行插入。
*   **位图**需要对目标位进行简单的 (OR 1) 运算，并进行快速除法和一些移位以将该 1 放在正确的位置，但仍然保持 O(1)。

## 删除：从集合中删除 n。

*   **BST**找到元素，然后删除它，然后旋转树，所以总体 O( log(n) )。
*   **位图**需要对目标位进行简单的 (AND 0) 操作，并进行快速除法和一些移位以将该 1 放在正确的位置，但仍然保持 O(1)。

## 查找：n 在集合中吗？

*   **BST**需要 O(log(n)) 来查找 n。
*   **位图**在特定目标位上返回 (AND 1) 的值，进行除法和移位以将 1 放在正确的位置，总体 O(1)。

## Set Intersection：这里有 2 个集合，它们是相同的。

*   **BSTs**：以一种 MergeSort 样式按顺序遍历两个 BST，如果两个元素相同，则将其添加到返回的 BST 中。

    *   将元素按排序顺序添加到返回的 BST 不利于平衡，因此您可以通过对一半的 BST 进行中序遍历和对后半部分的逆序遍历来修改它，然后添加相交的前向列表和反向列表中的元素以交替顺序排列。
    *   总体而言，这类似于 O( n*log(n) )，因为将所有元素添加到返回 BST 比遍历需要更长的时间。
*   **位图**：遍历两个位图，存储字节的（ AND ）（或者说一次 32 位）并将其作为位图存储在结果位置。O( M ) 其中 M 是位图初始化到的范围的大小。

## Set Union：这里有 2 套，将它们组合起来。

*   **BST**：通过在 BST1 和 BST2 之间交替进行 BST1 和 BST2 的广度优先遍历，将 BST1 和 BST2 中的所有元素添加到其中，从而创建一个新的 BST。如果元素已经存在，则不要再次添加它。总的来说，这类似于 O( n * log(n) )。
*   **位图**：与设置交集相同，但使用（或）操作。O( M ) 其中 M 是位图范围的大小。

# 问题中的歧义

*   这些集合中要存储哪些项目（数字、对象）
*   要分析的二叉搜索树是自平衡的吗？
*   这是从相当小的有限范围中选择的集合吗？（即这可以用位图完成吗？）
*   目前尚不清楚优化时间复杂度的含义，尽管它似乎意味着“对于此数据结构上的此操作的平均情况，已知的最低 Big-O（上限）是多少？”

# 结论

对于几乎所有这些操作，位图都优于自平衡 BST。

包含/排除位图的缺点：

*   您只存储包含/排除，并且不存储有关该元素的任何数据。
*   仅适用于整数，或以 1 对 1 方式散列为整数的对象（如果散列函数是可逆的，您可以将对象取回。）
*   您必须具有固定范围的元素，例如 0 到 100,000 的整数。
*   固定范围必须相当小，例如小于 1 亿。
*   联合和交集取决于范围大小而不是表示的元素数量。

# svg - 球面图变换

> ID：11505700
> 
> 赞同：1
> 
> 时间：2012-07-16T13:45:00.313
> 
> 标签：svg, raphael, transform

我正在使用 Raphael JS 显示可滚动、可缩放的世界地图，效果很好。但是地球的任何二维表示都会被扭曲。如果可能的话，我想改变地图，使顶部和底部被夹住，使地图至少更能代表一个地球。是否有可能用拉斐尔矩阵实现这样的效果，或者通过更深入地插入手动转换来实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:49:14.913

您无法使用 Raphael 的变换（或 SVG 的原生矩阵变换）来实现此效果。Raphael 是一个优秀的矢量绘图库，但尝试在其上使用地图有点类似于在应该使用 GIS 时使用 Illustrator，可能但并不理想。

如果你能承受失去 IE 8 =< 的支持，[d3.js](http://d3js.org)是一个支持地理投影的 SVG 可视化库。看看这个演示[http://mbostock.github.com/d3/talk/20111018/azimuthal.html](http://mbostock.github.com/d3/talk/20111018/azimuthal.html)

否则，我建议使用更适合您需要的投影获取地图的来源，例如[http://en.wikipedia.org/wiki/File:BlankMap-World6.svg](http://en.wikipedia.org/wiki/File:BlankMap-World6.svg)。但是，将 lon lat 转换为像素会更加困难。

# web-services - 当我向完全脱机的服务器发出请求时，我会遇到什么具体错误？

> ID：11505703
> 
> 赞同：0
> 
> 时间：2012-07-16T13:45:08.100
> 
> 标签：web-services, http

我在网上查了，但没有得到明确的答案。

我会得到 503 Service Unavailable，因为 DNS 仍在运行但 Web 服务器已关闭？或者是其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:04:37.560

收到 408 错误或任何与此相关的 HTTP 错误都需要与服务器建立有效连接。由于在您的示例中服务器处于脱机状态，因此请求将超时并且永远不会创建套接字。

# java - 在数据传输中反序列化后不是同一个对象

> ID：11505704
> 
> 赞同：2
> 
> 时间：2012-07-16T13:45:15.277
> 
> 标签：java, serialization, drag-and-drop, jtree, data-transfer

我真的需要一些帮助在这里...

我正在处理`Jtree`.
我创建了一个`TransferHandler`来管理拖放。

资源 ： `KineticsTransferHandler.java`

```
package tree;

import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.Transferable;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.io.IOException;

import javax.swing.JComponent;
import javax.swing.JTree;
import javax.swing.TransferHandler;
import javax.swing.tree.TreePath;

import datastructures.base.Acquisition;
import datastructures.base.Kinetics;
import datastructures.base.Location;

public class KineticsTransferHandler extends TransferHandler{
    private static final long serialVersionUID = -5653477841078614666L;

    final public static DataFlavor ACQUISITION_NODE = new DataFlavor(Acquisition.class, "Acquisition Node");

    static DataFlavor flavors[] = { ACQUISITION_NODE };

    @Override
    public int getSourceActions(JComponent c) {
        return MOVE;
    }

    @Override
    protected Transferable createTransferable(JComponent c) {
        JTree tree = (JTree) c;
        TreePath path = tree.getSelectionPath();

        System.out.println(tree.getSelectionPath().toString());

        if (path != null) {
            Object o = path.getLastPathComponent();
            if(o instanceof Acquisition) {
                return new AcquisitionTransferable((Acquisition)o);
            }
        }
        return null;
    }

    @Override
    protected void exportDone(JComponent source, Transferable data, int action) {
        if(action != NONE) {
            JTree tree = (JTree) source;
            StudyTreeModel model = (StudyTreeModel)tree.getModel();
            model.printStudy();

            tree.updateUI();
        }
    }

    @Override
    public boolean canImport(TransferHandler.TransferSupport support) {
        boolean canImport = false;
        if (support.isDrop()) {
            Acquisition source = null;

            if (support.isDataFlavorSupported(ACQUISITION_NODE)) {
                try {
                    source = (Acquisition) support.getTransferable().getTransferData(ACQUISITION_NODE);
                } catch (UnsupportedFlavorException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

                if(source != null) {
                    JTree.DropLocation dropLocation = (JTree.DropLocation)support.getDropLocation();
                    Object dest = dropLocation.getPath().getLastPathComponent();            
                    canImport = sameLocation(source, dest);
                }
            }
        }
        return canImport;
    }

    /*Verifies that the source and the dest are in the same Location*/
    private boolean sameLocation(Acquisition source, Object dest) {
        /*...
        A method to check if the source has the same Location than the dest.
        ...*/
    }

    @Override
    public boolean importData(TransferHandler.TransferSupport support) {
        boolean importData = false;
        if (canImport(support)) {
            Acquisition source = null;

            if (support.isDataFlavorSupported(ACQUISITION_NODE)) {
                try {
                    source = (Acquisition) support.getTransferable().getTransferData(ACQUISITION_NODE);
                    ((StudyTree)support.getComponent()).gettr
                } catch (UnsupportedFlavorException e) {
                    e.printStackTrace();
                    return false;
                } catch (IOException e) {
                    e.printStackTrace();
                    return false;
                }

                JTree.DropLocation dropLocation = (JTree.DropLocation)support.getDropLocation();
                Object dest = dropLocation.getPath().getLastPathComponent();

                int childIndex = dropLocation.getChildIndex();
                if (sameLocation(source, dest)) {// dest and source get the same Location
                /*...
                Management of the drop according to the dest.
                ...*/
            }
        }
        return importData;
    }

    public class AcquisitionTransferable implements Transferable {
        Acquisition acquisition;

        public AcquisitionTransferable(Acquisition s) {
            acquisition = s;
        }

        @Override
        public Object getTransferData(DataFlavor flavor)
                throws UnsupportedFlavorException {
            if (!isDataFlavorSupported(flavor))
                throw new UnsupportedFlavorException(flavor);
            return acquisition;
        }

        @Override
        public DataFlavor[] getTransferDataFlavors() {
            return flavors;
        }

        @Override
        public boolean isDataFlavorSupported(DataFlavor flavor) {
            return ACQUISITION_NODE.equals(flavor);
        }
    }
} 
```

它使用`Transferable`我调用的数据传输`AcquisitionTransferable`（如您在最后看到的）。

我的问题来自这部分

资源 ：`KineticsTransferHandler.canImport(TransferHandler.TransferSupport)`

```
source = (Acquisition) support.getTransferable().getTransferData(ACQUISITION_NODE); 
```

最后，我在`source`（上面的那个）中的结构就像是真实结构的副本。在调试的时候，我可以看到`source`的 ID 和真实的不一样。

但是在`support`（的参数`KineticsTransferHandler.canImport(TransferHandler.TransferSupport)`）中，我有我`Jtree`的包含结构的，这是好的。

所以，我在想的是，中结构的访问有问题`getTransferData`，可能是序列化的问题。当我访问我的结构时，`getTransferData`反序列化该结构，这就是为什么我得到它的克隆。

你知道我应该如何解决它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T10:35:30.390

您需要用 , 定义您`DataFlavor`的`javaJVMLocalObjectMimeType`，以表示传输的数据驻留在本地 JVM 中。在您的情况下，`DataFlavor`定义应如下所示：

```
final public static DataFlavor ACQUISITION_NODE = 
    new DataFlavor(DataFlavor.javaJVMLocalObjectMimeType+"; class=\"" +Acquisition.class.getCanonicalName()+"\"" 
    ,"Acquisition Node"); 
```

[还要在此处](http://docs.oracle.com/javase/6/docs/api/java/awt/datatransfer/DataFlavor.html#javaSerializedObjectMimeType)检查其他两种 Java 对象 MIME 类型。

# php - 一些不错的 OO 库来处理 PHP 中的目录

> ID：11505707
> 
> 赞同：-2
> 
> 时间：2012-07-16T13:45:37.083
> 
> 标签：php, oop, filesystems

是否有任何不错的“通用”OO 库来处理文件和目录，例如递归复制、删除、读取等？本机 php 函数很糟糕，它们像 OO 一样。这方面的任何提示都会有所帮助，我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:50:10.560

[目录](http://www.php.net/manual/en/class.directory.php)类应该是处理目录的“好”“OO”方式。我认为它成功地变得漂亮和面向对象。除此之外的任何事情都是在重新发明轮子；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:51:28.410

[SPL](http://www.php.net/manual/en/book.spl.php)中有一大堆类：

[`DirectoryIterator`](http://www.php.net/manual/en/class.directoryiterator.php)
[`RecursiveDirectoryIterator`](http://www.php.net/manual/en/class.recursivedirectoryiterator.php)
[`SPLFileObject`](http://www.php.net/manual/en/class.splfileobject.php)
[`SPLFileInfo`](http://www.php.net/manual/en/class.splfileinfo.php)

...说出你最有可能觉得有用的那些。

没有本机递归复制、删除等类，但基于这些 SPL 类很容易让您拥有。

# sqlite - 如何将一列中的值组合成一行？

> ID：11505711
> 
> 赞同：1
> 
> 时间：2012-07-16T13:46:03.723
> 
> 标签：sqlite

我有 2 张桌子：

表 1（让它成为*“产品”*）：

```
----------------
| id | product |
----------------
|  1 | Apple   |
|  2 | Grape   |
|  3 | Orange  | 
```

表2（让它成为*'标签'*）：

```
------------------------------
| id | product_id |    tag   |
------------------------------
|  1 |     1      |    tag1  |
|  2 |     1      |    tag2  |
|  3 |     2      |    tag2  |
|  4 |     2      |    tag3  |
|  5 |     3      |    tag4  | 
```

我想向**SQLite**数据库发出请求，该数据库将生成这样的表作为结果：

```
---------------------------
|   product  |    tags    |
---------------------------
|    Apple   | tag1, tag2 |
|    Grape   | tag2, tag3 |
|    Orange  |    tag4    | 
```

我怎样才能做到这一点？如何仅使用 SQLite 查询语言将标签组合成一列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:17:11.760

我认为您正在寻找的是“group by”和“group_concat（）”：

```
select products.product,group_concat(tags.tag) from products join tags on tags.product_id = products.rowid group by tags.product_id; 
```

# iphone - 在 iPhone 5.1 上实现推送通知

> ID：11505716
> 
> 赞同：0
> 
> 时间：2012-07-16T13:46:13.790
> 
> 标签：iphone, ios, push-notification, apple-push-notifications, devicetoken

我试图在我的 iPhone 应用程序上实现推送通知。我已成功创建临时配置文件。当我尝试使用以下代码读取我的设备令牌时。

```

- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken {
    NSLog(@"didRegisterForRemoteNotificationsWithDeviceToken:\n%@", deviceToken);
    viewController.tokenTextField.text = [NSString stringWithFormat:@"%@", deviceToken];
}

- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error {
    NSLog(@"didFailToRegisterForRemoteNotificationsWithError:%@", [error localizedDescription]);
    viewController.tokenTextField.text = [NSString stringWithFormat:@"Failed to get Device Token: %@", [error localizedDescription]];
}

```

抛出错误为

> didFailToRegisterForRemoteNotificationsWithError：找不到应用程序的有效“aps-environment”权利字符串

之后我清理并重新创建了整个证书并再次继续。仍然出现同样的问题。我还尝试了来自 git hub [https://github.com/damondanieli/Z2NotifyMe的示例应用程序](https://github.com/damondanieli/Z2NotifyMe)

> *谁能回答如何解决或如何识别错误的部分？*

# android - 如何从活动访问 AsyncTask 中定义的值

> ID：11505721
> 
> 赞同：0
> 
> 时间：2012-07-16T13:46:48.373
> 
> 标签：android, android-asynctask

我有这样的代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
     addItemsOnSpinnerOrgaLevel();

      btn_getReport.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {

            //How can i access map and list defined in orgaLevelTask(AsyncTask)???
             Like
             String option = parent.getItemAtPosition(pos).toString();              
            int orgaCode = orgaLevelMap.get(option);

            // Both are defined in AsyncTask ??

    }); //end of anonymous class

} //end of onCreate()

public void  addItemsOnSpinnerOrgaLevel() {

    orgaLevelTask  = new OrgaLevelTask(AccountReportActivity.this, spinner_orgaLevel, spinner_branch, txt_extra, txt_extra1);       
    orgaLevelTask.execute();

} //end of addItemsOnSpinnerOrgaLevel() 
```

在 AsyncTask onPostExecute() 方法中我有

```
@Override
protected void onPostExecute(ArrayList<OrgaLevel> result) {     
    super.onPostExecute(result);                        
    if (result != null) {               
        addItemsOnSpinnerOrgaLevel(result);                                     
    } 
    dialog.dismiss();   
} //end of onPostExecute()

 public void  addItemsOnSpinnerOrgaLevel(ArrayList<OrgaLevel> result) {

    orgaLevelElementslist = new ArrayList<String>();
    orgaLevelElementslist.add("All");
    orgaLevelMap = new HashMap<String, Integer>();
    orgaLevelMap.put("All", 0);

    for (int i=0; i<result.size(); i++) {

        OrgaLevel orgaLevelRecord = (OrgaLevel) result.get(i);
        String key = orgaLevelRecord.getOrgaName();
        String value = orgaLevelRecord.getOrgaCode();

        orgaLevelMap.put(key, Integer.parseInt(value));             
        orgaLevelElementslist.add(key);

    } //end of for()

    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(accountReportActivity, android.R.layout.simple_spinner_item, orgaLevelElementslist);
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner_orgaLevel.setAdapter(dataAdapter);

    setSpinnerOrgaLevelListener();

} //end of addItemsOnSpinnerOrgaLevel()

private void setSpinnerOrgaLevelListener() {

    spinner_orgaLevel.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int pos,long id) {             
            String option = parent.getItemAtPosition(pos).toString();               
            int orgaCode = orgaLevelMap.get(option);            
            subOrgaLevelTask  = new SubOrgaLevelTask(accountReportActivity, spinner_branch, orgaCode);      
            subOrgaLevelTask.execute();             

        } //end of onItemSelected()

    }); //end of anonymous class

} //end of setSpinnerOrgaLevelListener() 
```

在 subOrgaLevelTask​​ 中，我也有与此类相同的哈希映射。你可以看到我想要做的是，在微调器中放置一个键值。因此，当我的**btn_getReport**按钮被点击时，我得到所选项目的值。就像如果**All**被选中，那么我得到 0 等等。这个关键价值的东西正在起作用。问题是当**btn_getReport**获得点击时，我怎样才能获得所选项目的值。因为我在后台线程中填充项目（在 OrgaLevelTask​​ 和 SubOrgaLevelTask​​ 中）并且我的按钮在 Activity 中。那么当按钮被点击时我该怎么做，然后我从 OrgaLevelTask​​ 和 SubOrgaLevelTask​​ 中定义的地图中获取值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:52:50.087

好吧，让它们在 orgaLevelTask​​ 中公开，然后简单地访问它们。orgaLevelTask​​ 应该是您活动类中的变量。你试过了吗？有什么错误吗？

您必须确保以线程安全的方式访问 orgaLevelTask​​ 成员

# java - osm 映射中的标记与 osmdroid

> ID：11505727
> 
> 赞同：3
> 
> 时间：2012-07-16T13:47:07.787
> 
> 标签：java, android, map, marker, osmdroid

我试图在 OSM 中显示一个 marquer，但不能。我可以显示 OSM 地图和手机的位置，但不能显示其他内容。

这是我的代码：

```
public class Carte2Activity extends Activity implements LocationListener {
    MapView mapView;
    MapController myMapController;
    MyLocationOverlay location = null;
    double lat;
    double lng;
    LocationManager lm;
    LocationListener ll;

    ArrayList<OverlayItem> anotherOverlayItemArray;
    String[] sources;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main); 
        mapView = (MapView)findViewById(R.id.openmapview);
        mapView.setBuiltInZoomControls(true);
        mapView.setMultiTouchControls(true);

        lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        ll = new Myll();
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,1000,0,ll);

        myMapController = mapView.getController();
        myMapController.setZoom(10);
        myMapController.setCenter(new GeoPoint((int)(48.785152*1E6), (int)(2.285156*1E6)));

        location = new MyLocationOverlay(getApplicationContext(), mapView);

       //ajouter la loc
        mapView.getOverlays().add(location);
        //afficher
        location.enableMyLocation();

    }      

    private class Myll implements LocationListener{

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        lat = location.getLatitude();
        lng = location.getLongitude();
        run();
    }

    public void run() {
        // TODO Auto-generated method stub
        location.runOnFirstFix(new Runnable() { public void run() {
            mapView.getController().animateTo(location.getMyLocation());
            }}); 
    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub      
    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub      
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub      
    }
}

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub      
    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub      
    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub      
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
} 
```

机器人清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="comparateur.carte"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Carte2Activity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我不明白我怎么能做到这一点。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:20:44.763

看看这些代码行：

```
 OverlayItem myLocationOverlayItem = new OverlayItem("Here", "Current Position", currentLocation);
        Drawable myCurrentLocationMarker = this.getResources().getDrawable(R.drawable.person);
        myLocationOverlayItem.setMarker(myCurrentLocationMarker);

        final ArrayList<OverlayItem> items = new ArrayList<OverlayItem>();
        items.add(myLocationOverlayItem);

        currentLocationOverlay = new ItemizedIconOverlay<OverlayItem>(items,
                new ItemizedIconOverlay.OnItemGestureListener<OverlayItem>() {
                    public boolean onItemSingleTapUp(final int index, final OverlayItem item) {
                        return true;
                    }
                    public boolean onItemLongPress(final int index, final OverlayItem item) {
                        return true;
                    }
                }, resourceProxy);
        this.mapView.getOverlays().add(this.currentLocationOverlay); 
```

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-24T06:51:19.017

添加标记他们都像以前一样吃了:)

工作代码：

```
public class mapcode extends Activity {
    globalvar appState;
    int stats=0;
    private MapView mapView;
    private IMapController mapController;
    private SimpleLocationOverlay mMyLocationOverlay;
    private ScaleBarOverlay mScaleBarOverlay;  
    ItemizedIconOverlay<OverlayItem> currentLocationOverlay;
    DefaultResourceProxyImpl resourceProxy;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        setContentView(R.layout.map);

        appState = ((globalvar) getApplicationContext());

        mapView = (MapView) this.findViewById(R.id.mapview);  
        mapView.setTileSource(TileSourceFactory.MAPNIK);
      //  mapView.setBuiltInZoomControls(true); //кнопка ZOOM +-
        mapView.setMultiTouchControls(true);

        mapController = this.mapView.getController();
        mapController.setZoom(2);

        this.mMyLocationOverlay = new SimpleLocationOverlay(this);                          
        this.mapView.getOverlays().add(mMyLocationOverlay);

        this.mScaleBarOverlay = new ScaleBarOverlay(this);                          
        this.mapView.getOverlays().add(mScaleBarOverlay);

        /////////////////
        resourceProxy = new DefaultResourceProxyImpl(getApplicationContext());
        GeoPoint  currentLocation = new GeoPoint(55.860863,37.115046); 
        GeoPoint  currentLocation2 = new GeoPoint(55.8653,37.11556); 
        OverlayItem myLocationOverlayItem = new OverlayItem("Here", "Current Position", currentLocation);
        Drawable myCurrentLocationMarker = this.getResources().getDrawable(R.drawable.a);
        myLocationOverlayItem.setMarker(myCurrentLocationMarker);

        final ArrayList<OverlayItem> items = new ArrayList<OverlayItem>();
        items.add(myLocationOverlayItem);

      myLocationOverlayItem = new OverlayItem("Here", "Current Position", currentLocation2);
     myCurrentLocationMarker = this.getResources().getDrawable(R.drawable.a);
        myLocationOverlayItem.setMarker(myCurrentLocationMarker);

        items.add(myLocationOverlayItem);

        currentLocationOverlay = new ItemizedIconOverlay<OverlayItem>(items,
                new ItemizedIconOverlay.OnItemGestureListener<OverlayItem>() {
                    public boolean onItemSingleTapUp(final int index, final OverlayItem item) {
                        return true;
                    }
                    public boolean onItemLongPress(final int index, final OverlayItem item) {
                        return true;
                    }
                }, resourceProxy);
        this.mapView.getOverlays().add(this.currentLocationOverlay);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-31T09:37:36.540

```
 public void showOnMap(double lat , double lon){
    map = (MapView) root.findViewById(R.id.map);
    map.setTileSource(TileSourceFactory.MAPNIK);
    map.setBuiltInZoomControls(true);
    map.setMultiTouchControls(true);
    mapController = map.getController();
    myLocationoverlay = new MyLocationNewOverlay(map);
    myLocationoverlay.setEnabled(true);
    map.getOverlays().add(myLocationoverlay);
    GeoPoint startPoint = new GeoPoint(lat, lon);
    mapController.animateTo(startPoint);
    mapController.setZoom(16.0);
    Marker startMarker = new Marker(map);
    startMarker.setIcon(getResources().getDrawable(R.drawable.location));
    startMarker.setPosition(startPoint);
    map.getOverlays().add(startMarker);

} 
```

# iphone - 如何在当前视图控制器上添加模态视图？

> ID：11505728
> 
> 赞同：2
> 
> 时间：2012-07-16T13:47:15.430
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, modalviewcontroller

我有这个代码：

```
-(void)applicationDidBecomeActive:(UIApplication *)application {
JUnlockController *passcodeView = [[JUnlockController alloc] init];
[self.navigationController presentModalViewController:passcodeView animated:YES];
} 
```

问题是，当我在我的应用程序中打开一个模态视图控制器时，它不会出现在它上面。我希望能够找出用户正在查看的当前视图控制器，所以我可以将它显示在上面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:00:22.607

代替：

```
[self.navigationController presentModalViewController:passcodeView animated:YES]; 
```

利用：

```
[self presentModalViewController:passcodeView animated:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:57:13.573

如果您的应用程序仅由该导航控制器导航，您可以询问哪个 viewController 可见：

```
[self.navigationController.visibleViewController presentModalViewController:passcodeView animated:YES]; 
```

或者你可以利用[UIApplicationDidBecomeActiveNotification](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/c/data/UIApplicationDidBecomeActiveNotification)让你的所有视图控制器扩展一个自定义类，该类在 ; 上`viewWillAppear`注册并取消注册`viewWillDissapear`；并在您的自定义基类中实现显示模式的回调。

**编辑**注意，这假设您`self.navigationController`在您的应用程序委托中有一个（您设置的）。您可能需要使用类似的东西`self.window.rootViewController`。

# php - 向 MySQL (PHP) 添加值时防止在输入字段中执行数学表达式

> ID：11505729
> 
> 赞同：-3
> 
> 时间：2012-07-16T13:47:31.327
> 
> 标签：php, date, expression, textinput

我已经设置了以下表格：

```
<form name="pric" method="post" action="up.php">
    <div id="prices_col">Season A<br>
        <input type='text' name="date0" maxlength="13" size="15" style="font-size: 9px;" value="<?php echo $_date[0]?>" />
    </div>
    <div align="middle"><input type="submit" value="EDIT"></div>
</form> 
```

现在数据库中的信息是这样的（$_date[0] 包含）：

> 04/06 - 25/06

发布信息后，它决定运行表达式，我得到如下信息：

> -1.333333333

我使用以下代码：

```
$_date[0] = trim($_POST["date0"]);
mysql_query("UPDATE price SET _date=".$_date[0]." WHERE id='0'") or die(mysql_error()); 
```

我怎样才能阻止它执行？我需要将值作为纯文本存储到数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:17:29.253

```
mysql_query("UPDATE `price` SET `_date`='".mysql_real_escape_string(trim($_POST["date0"]))."' WHERE `id`=0") or die(mysql_error()); 
```

因为 _date 是一个文本字段，而 mysql_real_escape_string 是为了安全

# mysql - innoDB 上的慢计数（*）

> ID：11505732
> 
> 赞同：4
> 
> 时间：2012-07-16T13:47:45.600
> 
> 标签：mysql, performance, count

我有一个`message_message`包含 3000000 条记录的表。

当我进行计数（*）查询时，它非常慢......：

mysql> `select count(*) from message_message`;

+----------+

| 计数(*) |

+----------+

| 2819416 |

+----------+

一组 1 行（2 分 35.35 秒）

解释一下：mysql> `explain select count(*) from message_message`;

| 编号 | 选择类型| 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 |额外 |

| 1 | 简单 | message_message | 索引 | 空 | 初级 | 4 | 空 | 2939870 | 使用索引 |

一组中的 1 行（0.02 秒）

发生什么事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T13:49:55.287

看看InnoDB 中的[这篇文章](http://www.mysqlperformanceblog.com/2006/12/01/count-for-innodb-tables/)，您需要进行全表扫描，在 MyISAM 中，它是一个索引读取。

如果你使用一个`where`子句，尽管它改变了执行模式以使用索引，所以通常 InnoDB 在完全不受限制的计数上会比 MyISAM 慢，因为性能在受限计数上匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:51:56.997

如果要统计记录数，最好查询整个表，使用结果集的num_rows属性。`Count(...)`通常在您想要进行聚合查询时使用（与 结合使用`GROUP BY`）。

# java - Log4j 和 AOP，如何获取实际的类名

> ID：11505735
> 
> 赞同：12
> 
> 时间：2012-07-16T13:47:53.537
> 
> 标签：java, spring, log4j, spring-aop

我正在使用 Spring AOP 和 Log4J 将记录器作为方面实现，但我注意到日志文件中的类名始终是`LoggerAspect`类名，所以......有没有办法在我的日志中跟踪实际的类名?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-16T14:22:36.373

```
@Around("execution(* com.mycontrollerpackage.*.*(..))")
public Object aroundWebMethodE(ProceedingJoinPoint pjp) throws Throwable {      
    String packageName = pjp.getSignature().getDeclaringTypeName();
    String methodName = pjp.getSignature().getName();
    long start = System.currentTimeMillis();
    if(!pjp.getSignature().getName().equals("initBinder")) {
       logger.info("Entering method [" + packageName + "." + methodName +  "]");
    }
    Object output = pjp.proceed();
    long elapsedTime = System.currentTimeMillis() - start;
    if(!methodName.equals("initBinder")) {
       logger.info("Exiting method [" + packageName + "." + methodName + "]; exec time (ms): " + elapsedTime);
    }
    return output;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-17T15:42:34.923

这更容易：

```
pjp.getTarget().getClass() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-23T07:33:58.253

**使用**：`pjp.getTarget().getClass().getCanonicalName()`

此外，要在执行哪个方法的类级别添加日志，而不是使用建议类的记录器，请在建议方法中使用类级别记录器，如下所示

```
Logger logger = Logger.getLogger(pjp.getTarget().getClass().getCanonicalName()); 
```

# calendar - OAuth 令牌适用于 userInfo 但不适用于 Google 日历

> ID：11505736
> 
> 赞同：0
> 
> 时间：2012-07-16T13:48:00.213
> 
> 标签：calendar, oauth-2.0

有人能告诉我为什么我不能使用相同的令牌从 Google 检索 userInfo 和日历列表吗？

我已经设置了正确的范围（我认为）：

```
 private static final String PLUS_ME_SCOPE = "https://www.googleapis.com/auth/plus.me";
  private static final String USER_INFO_PROFILE_SCOPE = "https://www.googleapis.com/auth/userinfo.profile";
  private static final String USER_INFO_EMAIL_SCOPE = "https://www.googleapis.com/auth/userinfo.email";
  private static final String GOOGLE_CALENDAR_SCOPE = "https://www.googleapis.com/auth/calendar"; 
```

要获取用户信息，我使用以下网址：[https](https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token=) ://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token=对于我使用的日历： https: [//www.googleapis.com/calendar/v3/用户/我/calendarList?minAccessRole=writer&key=](https://www.googleapis.com/calendar/v3/users/me/calendarList?minAccessRole=writer&key=)。

在用户信息中，我得到了所有正确的信息，但对于日历，我得到了错误 401：需要登录。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:52:58.310

改变

> [https://www.googleapis.com/calendar/v3/users/me/calendarList?minAccessRole=writer&key=](https://www.googleapis.com/calendar/v3/users/me/calendarList?minAccessRole=writer&key=)

到

> [https://www.googleapis.com/calendar/v3/users/me/calendarList?minAccessRole=writer&access_token=](https://www.googleapis.com/calendar/v3/users/me/calendarList?minAccessRole=writer&access_token=)

就这么简单；）

**更新：**

另请注意，**不建议**将[访问令牌指定为查询参数](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-bearer-22#page-7)：

> 由于与 URI 方法相关的安全漏洞（参见第 5 节），包括包含访问令牌的 URL 很可能会被记录，除非不可能在“授权”中传输访问令牌，否则不应使用它请求头字段或 HTTP 请求实体主体。

# java - JSF 1.2 调用 id 为 *** 的组件的操作方法时出错

> ID：11505739
> 
> 赞同：3
> 
> 时间：2012-07-16T13:48:11.390
> 
> 标签：java, jsf

我正在做一个教程，其中包括如何在[此处创建教程的 Todo JSF 应用程序链接（7\. A Todo JSF 应用程序）。](http://www.vogella.com/articles/JavaServerFaces/article.html)

在服务器（tomcat）上运行“Todo.jsp”页面后，我没有在控制器构造函数上创建预期的待办事项列表，当我单击“保存”按钮时出现以下错误：

> **调用 id 为 j_id_jsp_1588810359_4:j_id_jsp_1588810359_14 的组件的操作方法时出错**
> 
> 造成的：
> 
> java.lang.NullPointerException - /Todo.jsp(44,3) '#{todoController.save}' java.lang.NullPointerException

我已经在网上搜索以修复这个错误，但我没有发现任何有用的东西:(

请问我是否必须链接任何其他代码行。谢谢...

**（编辑）**

堆栈跟踪的第一行是：

```
javax.faces.FacesException: Error calling action method of component with id j_id_jsp_1588810359_4:j_id_jsp_1588810359_14 
```

我使用的 URL 是“http://localhost:8080/de.vogella.jsf.todo/faces/Todo.jsp”

我的“web.xml”是：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>de.vogella.jsf.todo</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>FacesServlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>FacesServlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>
  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
  </context-param>
  <context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
  </context-param>
  <context-param>
    <description>
    This parameter tells MyFaces if javascript code should be allowed in
    the rendered HTML output.
    If javascript is allowed, command_link anchors will have javascript code
    that submits the corresponding form.
    If javascript is not allowed, the state saving info and nested parameters
    will be added as url parameters.
    Default is 'true'</description>
    <param-name>org.apache.myfaces.ALLOW_JAVASCRIPT</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <description>
    If true, rendered HTML code will be formatted, so that it is 'human-readable'
    i.e. additional line separators and whitespace will be written, that do not
    influence the HTML code.
    Default is 'true'</description>
    <param-name>org.apache.myfaces.PRETTY_HTML</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <param-name>org.apache.myfaces.DETECT_JAVASCRIPT</param-name>
    <param-value>false</param-value>
  </context-param>
  <context-param>
    <description>
    If true, a javascript function will be rendered that is able to restore the
    former vertical scroll on every request. Convenient feature if you have pages
    with long lists and you do not want the browser page to always jump to the top
    if you trigger a link or button action that stays on the same page.
    Default is 'false'
</description>
    <param-name>org.apache.myfaces.AUTO_SCROLL</param-name>
    <param-value>true</param-value>
  </context-param>
  <servlet>
    <servlet-name>faces</servlet-name>
    <servlet-class>org.apache.myfaces.webapp.MyFacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>faces</servlet-name>
    <url-pattern>*.jsf</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>faces</servlet-name>
    <url-pattern>*.faces</url-pattern>
  </servlet-mapping>
  <listener>
    <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
  </listener>
</web-app> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-16T13:54:32.183

你的 todocontroller 是空的。您是否按照教程中的说明注册了它？

> 7.4\. 注册您的托管 bean

# c# - 正则表达式删除特殊/不可见字符

> ID：11505742
> 
> 赞同：2
> 
> 时间：2012-07-16T13:48:23.357
> 
> 标签：c#, regex, character-encoding, special-characters

问题是从域名中删除一些奇怪的字符，但保留特殊的 unicode 字符，例如重音字母（德语、波兰语的丹麦语）例如：radisson-blu.es，你看不到，但 ss 之间还有额外的字符。（尝试复制到记事本查看）。

我看过很多关于类似问题的帖子，但每个解决方案都没有删除那个特殊字符，或者它正在删除它，还有我需要保留的其他特殊字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:51:14.617

您（未）看到的字符是 U+00AD 软连字符。您可以在正则表达式中使用 引用它`\u00ad`，例如：

```
Regex.Replace(str, @"\u00ad", ""); 
```

但是对于单字符替换，您也可以使用`string.Replace`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:51:31.193

`[^\w\s.,!@#$%^&*()=+~`-]`用空字符串替换正则表达式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T19:46:11.187

`'\xAD'`是一个软连字符（代码点的名称是`"SOFT HYPHEN"`）。

根据 Unicode 代码点数据库，它的类别是`"Cf"`(or `"Format"`)，因此可以与 regex 匹配`@"\p{Cf}"`。

奇怪的是，Microsoft Visual C# 2010 Express 说它不匹配`@"\p{Cf}"`，而是匹配`@"\p{Pd}"`( `"Dash Punctuation"`)，与普通连字符相同的类别。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-10T15:31:03.707

这对我有用：

```
[\x00-\x1f]|[\x81\x8d\x8d\x8f\x90\x9d\xa0\u2060\uFEFF] 
```

# entity-framework - Entity Framework + Autofac - 保存时出现随机错误

> ID：11505743
> 
> 赞同：1
> 
> 时间：2012-07-16T13:48:26.567
> 
> 标签：entity-framework, autofac, dbcontext, object-lifetime

使用 autofac 作为我的 IoC 框架。
我希望能够`DbContext`在我的应用程序启动时设置我的实例。

在我的 ASP.NET MVC 3 项目中，我`DbContext`在 Global.asax ( `PerLifetimeScope`) 中注册了实例。但是，当我一次在多个浏览器（或多个选项卡）上启动我的网站时，**有时**我会得到`Object reference not set to an instance of an object.`或`New transaction is not allowed because there are other threads running in the session`尝试将更改保存回数据库。我 `ExecuteReader requires an open and available Connection. The connection's current state: Broken.`有时也想从数据库中读取数据。

这些错误似乎是随机弹出的，我怀疑它与我的上下文的生命周期范围有关。这是我的 DbContext 的重写`SaveChange`方法。

```
public class MyContext : DbContext
{ 
    public override int SaveChanges()
    {
        var result = base.SaveChanges(); // Exception here
    }
} 
```

这是我注册上下文的方式：

```
builder.Register(c => new MyContext("SomeConnectionString"))
                 .InstancePerLifetimeScope(); 
```

如果我在浏览器中只有一个打开的网站选项卡，一切正常。
此外，值得一提的是，通过使用 Ajax 调用控制器方法，我在我的网站中每 5-10 秒对 db 进行一次 CRUD 操作。

StackTrace 用于`New transaction is not allowed because there are other threads running in the session`：

```
at System.Data.EntityClient.EntityConnection.BeginDbTransaction(IsolationLevel isolationLevel)
at System.Data.EntityClient.EntityConnection.BeginTransaction()
at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
at System.Data.Entity.Internal.InternalContext.SaveChanges()
at System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
at System.Data.Entity.DbContext.SaveChanges()
at MyProject.Data.MyContext.SaveChanges() in D:\Test.cs 
```

StackTrace 用于`Object reference not set to an instance of an object.`：

```
at System.Data.Objects.ObjectStateManager.DetectConflicts(IList`1 entries)
at System.Data.Objects.ObjectStateManager.DetectChanges()
at System.Data.Entity.Internal.InternalContext.DetectChanges(Boolean force)
at System.Data.Entity.Internal.InternalContext.GetStateEntries(Func`2 predicate)
at System.Data.Entity.Internal.InternalContext.GetStateEntries()
at System.Data.Entity.Infrastructure.DbChangeTracker.Entries()
at System.Data.Entity.DbContext.GetValidationErrors()
at System.Data.Entity.Internal.InternalContext.SaveChanges()
at System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
at System.Data.Entity.DbContext.SaveChanges()
at MyProject.Data.MyContext.SaveChanges() in D:\Test.cs   at 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:38:58.923

在使用 Autofac 解决 DbContext 时，我遇到了同样的问题，与 DbContext 相关的零星错误。

```
{System.Data.EntityCommandExecutionException: An error occurred while executing the command definition. See the inner exception for details.
etc.

{System.NullReferenceException: Object reference not set to an instance of an object.
at System.Data.Objects.ObjectStateManager.DetectConflicts(IList`1 entries)
etc. 
```

我在我的代码中找到了一个类似于以下内容的类。依赖解析发生在单例内部的静态方法中。正在解析的对象依赖于 DbContext。在我找到一种方法来重组这个类以使其不再是单例之后，我没有遇到任何其他问题。

也许你有类似的情况？要尝试的另一件事可能是使您的 DbContext InstancePerHttpRequest。这可以帮助确定这是否是问题所在。

```
public class Singleton
{
    private static Singleton _instance = new Singleton();

    private Singleton()
    {

    }

    public static void DoSomething<TSource>(TSource source) where TSource : ISource
    {
        var items = DependencyResolver.Current.Resolve<IEnumerable<IDbContextConsumer<TSource>>>();
        foreach (var item in items)
        {
            item.Execute(source);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:03:18.983

注册`MyContext`看起来没问题。是否有可能其他一些接受 a 的服务`MyContext`被注册为单例并跨线程共享？

# java - 在 dropbox.com 上托管 SQLite .db 文件

> ID：11505744
> 
> 赞同：4
> 
> 时间：2012-07-16T13:48:50.733
> 
> 标签：java, sqlite, dropbox, sqlitejdbc

首先，谁能告诉我 Dropbox.com 是否有写入权限。

如果是这样，那么您将如何访问托管在您的 Java 小程序中的 SQLite .db 文件

眼镜：

```
I'm using Eclipse Helios
Using David Crawshaw's SQLite jdbc driver (v. 056) 
```

不确定您可能需要哪些其他信息，如果您需要更多信息，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:38:08.907

您不能通过 Dropbox 共享可写的 SQLite 数据库。SQLite 需要文件系统访问所有读取或写入文件的应用程序的数据库文件。

# ruby-on-rails - 使用命名范围在 ActiveRecord 中通过电子邮件搜索“ 模棱两可'

> ID：11505750
> 
> 赞同：2
> 
> 时间：2012-07-16T13:49:13.007
> 
> 标签：ruby-on-rails, activerecord, arel

使用导轨 3.2.6。

```
# 1 letter domain name in email without scope
> Member.where('UPPER(email) LIKE UPPER(?)' , "a@b.com")                                              
  Member Load (0.7ms)  SELECT "members".* FROM "members" WHERE (UPPER(email) LIKE UPPER('a@b.com'))
=> []

# 2 letter domain name in email without scope
>  Member.where('UPPER(email) LIKE UPPER(?)' , "a@bc.com")
  Member Load (0.7ms)  SELECT "members".* FROM "members" WHERE (UPPER(email) LIKE UPPER('a@bc.com'))
=> []

# 1 letter domain name in email with scope
>  Member.with_households.where('UPPER(email) LIKE UPPER(?)' , "a@b.com")
  Member Load (0.7ms)  SELECT "members".* FROM "members" WHERE (UPPER(email) LIKE UPPER('a@b.com'))
=> []

# 2 letter domain name in email with scope
>  Member.with_households.where('UPPER(email) LIKE UPPER(?)' , "a@bs.com")
SQL (0.6ms)  SELECT "members"."id" AS t0_r0, "members"."last_name" AS t0_r1, "members"."first_name" AS t0_r2, "members"."household_id" AS t0_r3, "members"."created_at" AS t0_r4, "members"."updated_at" AS t0_r5, "members"."phone1" AS t0_r6, "members"."phone2" AS t0_r
7, "members"."address1" AS t0_r8, "members"."address2" AS t0_r9, "members"."city" AS t0_r10, "members"."state" AS t0_r11, "members"."zip" AS t0_r12, "members"."notes" AS t0_r13, "members"."active" AS t0_r14, "members"."email" AS t0_r15, "households"."id" AS t1_r0, "ho
useholds"."balance" AS t1_r1, "households"."created_at" AS t1_r2, "households"."updated_at" AS t1_r3, "households"."notes" AS t1_r4, "members_households"."id" AS t2_r0, "members_households"."last_name" AS t2_r1, "members_households"."first_name" AS t2_r2, "members_hou
seholds"."household_id" AS t2_r3, "members_households"."created_at" AS t2_r4, "members_households"."updated_at" AS t2_r5, "members_households"."phone1" AS t2_r6, "members_households"."phone2" AS t2_r7, "members_households"."address1" AS t2_r8, "members_households"."ad
dress2" AS t2_r9, "members_households"."city" AS t2_r10, "members_households"."state" AS t2_r11, "members_households"."zip" AS t2_r12, "members_households"."notes" AS t2_r13, "members_households"."active" AS t2_r14, "members_households"."email" AS t2_r15 FROM "members
" LEFT OUTER JOIN "households" ON "households"."id" = "members"."household_id" LEFT OUTER JOIN "members" "members_households" ON "members_households"."household_id" = "households"."id" WHERE (UPPER(email) LIKE UPPER('a@bs.com'))
ActiveRecord::StatementInvalid: PGError: ERROR:  column reference "email" is ambiguous
LINE 1: ..."."household_id" = "households"."id" WHERE (UPPER(email) LIK... 
```

这是错误：

```
ActiveRecord::StatementInvalid: PGError: ERROR:  column reference "email" is ambiguous 
```

一个家庭有_许多成员。

这是 with_households 范围定义：

```
scope :with_households, :include => [{:household => :members}] 
```

电子邮件域长度可能是一个红鲱鱼，但否则我无法重现该错误。**为什么在这种情况下 Arel 要做一堆连接？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T14:00:10.053

尝试

```
Member.with_households.where('UPPER(members.email) LIKE UPPER(?)' , "a@bs.com") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:12:33.393

**ActiveRecord StatementInvalid 是模棱两可**的，这是 AR 的说法：*先生，您的 SQL 语句没有意义，因为您正在检查的字段在多个表中找到，我不知道该使用哪个*。

我猜这个`with_households`范围是看另一个也有一个电子邮件字段的表。或者，也许你有一个 default_scope 可以做同样的事情。尝试在任何地方指定表名，例如`members.email`and `managers.email`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T20:57:07.963

```
Member.with_households.where(Member.arel_table[:email].matches("a@bs.com")) 
```

# jquery - MVC2 页面重定向问题

> ID：11505752
> 
> 赞同：0
> 
> 时间：2012-07-16T13:49:30.370
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-2

我有一个控制器“工资单”，它根据页面请求调用其他控制器。

目前我有一个视图“Proll”，其中有一个不是提交按钮的按钮。

当用户单击按钮时，我想用另一个视图“BankMst”替换当前视图

这就是我尝试的方式

```
function ViewDetails() {
    var pth = siteroot + "Payroll/BankMst";
    //alert(siteroot);
    $('#mainFrame').attr('src', pth);
    //window.location.href = rootPath + "Payroll/BankMst/2";
    return;
} 
```

但它只加载当前视图而不是 BankMst 视图。请求也转到旧控制器而不是新控制器。

我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:55:49.777

如果您不打算提交任何数据，请使用 ActionLink，而不是使用提交按钮。

例如

```
@Html.ActionLink("Do Something", "MyAction", "MyController") 
```

您始终可以使用 CSS 使链接看起来像一个按钮。

如果您必须使用提交按钮，那么您可以使用该`RedirectToAction`方法重定向到新的操作服务器端。

# java - 延迟接收 HttpResponse

> ID：11505754
> 
> 赞同：0
> 
> 时间：2012-07-16T13:49:43.847
> 
> 标签：java, servlets

我有一个客户端与服务器通信，该服务器在等待四秒钟后返回响应（通过 servlet），然后继续处理。

问题是服务器响应（200 OK）在所有处理结束时返回，而不是在 4 秒暂停后返回。我不明白为什么

这是我的代码片段

```
try {
        mimeTraitement.getMime(client);
        mimeTraitement.analyseMime(xmlDir);

        if (mimeTraitement.checkMime()) {

                System.out.println("Acquittement de la requete dans " + BeanParametrageTimers.getTimeWaitResponseOkToRequest()/1000+ " secondes");
                synchronized(response)
                {
                try {
                    response.wait(BeanParametrageTimers.getTimeWaitResponseOkToRequest());
                } catch (InterruptedException e1) {

                    e1.printStackTrace();
                }
            }

            writer.write("200 OK (MimeMultipart valide)");// this line is displayed after the processing of postXml.sendXml() on my java console 
            PostXml postXml = new PostXml(xmlDir,mimeTraitement.getGetUrl());
            System.out.println("Envoi du fichier xml dans " + BeanParametrageTimers.getTimeWaitSendXmlToRequest()/1000 + " secondes");
            Thread.sleep(BeanParametrageTimers.getTimeWaitSendXmlToRequest());
            postXml.sendXml();

        } else
            writer.write("400 POK (MimeMultipart non valide)");
    } catch (MessagingException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:00:41.973

使用[writer.flush()](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/Writer.html#flush%28%29)确保输出不会被缓冲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:00:35.277

我认为响应正在提交，因为缓冲区大小已达到。

在此处查找[做出响应的原因](https://stackoverflow.com/questions/11305563/cause-of-servlets-response-already-committed/11305612#11305612)

# asp.net - 未找到 System.Web？

> ID：11505755
> 
> 赞同：3
> 
> 时间：2012-07-16T13:49:45.897
> 
> 标签：asp.net, visual-studio-2010, web-config

我收到以下错误：

无法加载文件或程序集“System.Web”或其依赖项之一。该系统找不到指定的文件。

我正在尝试在 Web.Config 中进行 LDAP 成员资格配置，并在前面提出了这个问题，但我认为这可能是一个更普遍的问题。我在 VS2010/.NET 4.0 中使用 Visual Studio 开发服务器

编辑：Web.Config 如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
      <section name="FPLMobileWebApp.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <connectionStrings>
    <add name="LDAPConnectionString" connectionString="LDAP://ad.company.com/CN=Users,DC=company,DC=com" />
  </connectionStrings>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="Forms">
      <forms name=".ADAuthCookie" loginUrl="~/Account/Login" timeout="2880" defaultUrl="~/FPL/Search" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </profile>
    <membership defaultProvider="DomainLoginMembershipProvider">
      <providers>
        <clear/>
        <add name="DomainLoginMembershipProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web" connectionStringName="LDAPConnectionString" attributeMapUsername="sAMAccountName" applicationName="/" />
      </providers>
    </membership>
    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </roleManager>
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </providers>
    </sessionState>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
  <applicationSettings>
    <FPLMobileWebApp.Properties.Settings>
      <setting name="FPLMobileWebApp_FPLdb_Parts" serializeAs="String">
        <value>http://a09devlab/pld/parts.asmx</value>
      </setting>
    </FPLMobileWebApp.Properties.Settings>
  </applicationSettings>
</configuration> 
```

编辑：我只是将 System.Web dll 添加到我的应用程序的 bin 文件夹中。但是，我想确保它正确部署，现在它说我的连接字符串不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:52:35.280

**我认为这是一个权限问题。**
看看[MSDN](http://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx)。

> **ActiveDirectoryMembershipProvider**实例仅适用于 ASP.NET 的 完全**信任策略**默认配置。为了在任何部分信任级别使用 ActiveDirectoryMembershipProvider 实例，您必须对应用程序的适当信任策略文件进行更改，或者您必须创建部署在 GAC 中的“沙盒”程序集。**ActiveDirectoryMembershipProvider**类需要不受限制
> 的**DirectoryServicesPermission 权限******跑步。此权限不会添加到随 ASP.NET 提供的任何部分信任策略文件中。尽管将 DirectoryServicesPermission 权限添加到部分信任策略文件将启用 ActiveDirectoryMembershipProvider 类，但这样做会使 System.DirectoryServices 命名空间类可用于在 ASP.NET 页面中运行的任何代码。对于需要在安全、锁定模式下运行的任何 Web 服务器，不建议使用此选项。
> 作为替代方案，您可以创建一个**调用 ActiveDirectoryMembershipProvider 类的“沙盒”程序集**. 此程序集可以包含将方法调用转发到 ActiveDirectoryMembershipProvider 类的包装类或派生自 ActiveDirectoryMembershipProvider 类的类。在任何一种情况下，包装类都必须声明不受限制的 DirectoryServicesPermission 权限。在 GAC 中部署沙盒程序集并使用 AllowPartiallyTrustedCallersAttribute (APTCA) 属性标记该程序集。这将使您部分受信任的 ASP.NET 代码能够调用您的包装器类，并且由于包装器类在内部断言不受限制的 DirectoryServicesPermission 权限，因此您的包装器类将能够成功调用提供程序****

 ****因此，解决问题的最简单方法*（如果您确实面临安全问题）*是为您的应用程序设置**完全信任策略**。
怎么做？看[技术网](http://technet.microsoft.com/en-us/library/cc772237%28WS.10%29.aspx)****

# javascript - 鼠标悬停功能不起作用

> ID：11505759
> 
> 赞同：-1
> 
> 时间：2012-07-16T13:49:54.570
> 
> 标签：javascript, html, css, raphael

让我们尝试一些更简单的东西。我有一个粉红色的盒子，当用户将鼠标悬停在它上面时，我希望它从粉红色变为红色。此功能不起作用。谁能帮我修复代码或找到错误？他们告诉我，如果我不能让这个工作，我将被放手！！

```
<html>
<head><title></title>
<script src="raphael-min.js"></script>
<script src="jquery-1.7.2.js"></script>

<style type="text/css"> 
#input
{
margin-top:-200px;

}
</style>

</head>

<body style="background-color:black";>

<div id="draw-here-raphael" style="height: 400px; width: 400px; background: #666; z-index:0;">
</div>

<div id="input" style="z-index:99;" >
  <input type="text" value="0"; style="text-align:right;" /><br />
</form> 
  </div>

<script type="text/javascript">
//all your javascript goes here
$(function() {
var r = new Raphael("draw-here-raphael"),

    // Store where the box is
    position = 'left',

    // Make our pink rectangle
    rect = r.rect(20, 20, 250, 300, 10).attr({"fill": "#fbb"});
    $("rect").(function(i) {
        $("rect").mouseover(function() {
            $("rect").attr({"fill": "red"});
        });
    }); 
});

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:57:14.630

为什么你不使用 css

```
#draw-here-raphael:hover{background-color:Red;} 
```

或者，改用此代码

```
$(rect).mouseover(function() {
    this.attr({"background-color": "red"});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:52:40.797

尝试将其更改`$("rect")`为`rect`

```
rect = r.rect(20, 20, 250, 300, 10).attr({"fill": "#fbb"});
rect.(function(i) {
    rect.mouseover(function() {
        rect.attr({"fill": "red"});
    });
}); 
```

然而，正如有人在评论中指出的那样，它可能不适用于 SVG。

如果您将矩形作为具有高度和宽度的 div，具有左侧和顶部的固定位置以及背景颜色，您可以在鼠标悬停时更改背景颜色的 css 值。

对于一个 div 示例：

假设你有一个 div`id="pinkBox"`

```
$('#pinkBox').mouseover(function() {
    $(this).css('background-color','#ff0000');
}); 
```

你也需要定位 div，我不确定 Raphael 的东西是如何工作的，从来没有亲自看过它，但如果它的定位是固定的，那么你可以在 css 中模拟它`position:fixed; top: some value; left: some value; width: some value; height: some value`

完整代码：

HTML：

```
<div id="pinkBox" style="position:fixed; left:20, top:20; width:250; height:300" ></div> 
```

Javascript：

```
$(document).ready(function() {
    $('#pinkBox').mouseover(function() {
        $(this).css('background-color','#ff0000');
    });
}); 
```

不幸的是，如果您不使用 CSS3，除非您使用图像，否则您将无法拥有圆角。使用 CSS3 虽然您可以通过将以下样式添加到 div 来添加圆角

```
border-radius: 10px; 
-moz-border-radius: 10px; 
-webkit-border-radius: 10px; 
```

为简单起见，我在 div 上添加了内联样式，但我建议创建一个类并使用 class 属性，将您的 css 保存在单独的文件中或文档的头部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:21:48.547

我改变了一点，但是像这样的东西呢：

```
var canvas = Raphael(document.getElementById("draw-here-raphael"));

// Make rectangle pink
var r = canvas.rect(20, 20, 250, 300, 10).attr("fill", "#fbb");

$("#draw-here-raphael").mouseover(function() {
    r.attr("fill", "red");
}); 
```

[http://jsfiddle.net/7PLy9/](http://jsfiddle.net/7PLy9/)

# android - Android : myTextView.getLineCount() / getHeight() = 0？

> ID：11505765
> 
> 赞同：1
> 
> 时间：2012-07-16T13:50:11.710
> 
> 标签：android, textview, getline

我想以编程方式获取文本视图的高度或至少行数，但日志显示为 0。出了什么问题？这是我的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_off);

    titreOff = (TextView) findViewById(R.id.offTitre);
    titreOff.setText("some text"); // displays 2 lines of text with the font size I used
    System.out.println(titreOff.getLineCount() + " and " + titreOff.getHeight());
} 
```

感谢您的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:58:27.957

在`onCreate()`中，您`TextView`没有布局通道，因此当前的宽度和高度为零。如果您想获得您的尺寸，有一些解决方案`TextView`：

1.  添加`OnGlobalLayoutListener`到您`TextView`的`ViewTreeObserver`. （例如`titreOff.getViewTreeObserver().addOnGlobalLayoutListener(listener)`并在那里处理您的更改）。

2.  通过覆盖（在其中您将拥有as 参数的尺寸）来覆盖`TextView`和处理您的特殊情况。`onLayout()``TextView`

或者，您测量的最终目标是什么？如果你能给出一些细节，可能有比这更简单的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T14:09:10.133

您的应用不知道`TextView`while doing`onCreate()`方法的实际大小。解决方案是将您的输出移到此处：

```
onWindowFocusChanged(boolean hasFocus) {
    if (!hasFocus) {
        titreOff = (TextView) findViewById(R.id.offTitre);
        System.out.println(titreOff.getLineCount() + 
        " and " + titreOff.getHeight());
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T14:09:26.763

`setText()`不会立即更新`TextView`，只会使其无效。新文本将仅在下一次重绘时设置。如果您尝试在获得旧高度之前获得高度。

相反，您应该 subclass `TextView`， override[`onSizeChanged()`](http://developer.android.com/reference/android/view/View.html#onSizeChanged%28int,%20int,%20int,%20int%29)并且每次`TextView`更改大小时都会通知您。

# google-chrome - 如何设置 chrome 以在首选项文件中使用系统标题栏和边框？

> ID：11505767
> 
> 赞同：9
> 
> 时间：2012-07-16T13:50:12.630
> 
> 标签：google-chrome, chromium

我希望 chrome 默认使用系统标题栏和边框。如何使用 $HOME/.config/google-chrome/Default/ 目录中的首选项文件执行此操作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T14:02:55.010

打开`~/.config/google-chrome/Default/Preferences`. 这是一个 JSON 文件。可以通过编辑以下首选项来设置首选项（我只显示了相关条目）：

```
{ ...
   "browser": {
      ...
      "custom_chrome_frame": true,
      ... 
```

*   `true`- 隐藏系统标题栏和边框。
*   `false`- 显示系统标题栏和边框。

此首选项仅适用于 Linux，*不适*用于 Windows、macOS 或 Chrome 操作系统。
在 macOS 上，设置为`false`，在 Windows 和 Chrome OS 上，设置为`true` ^([ref](https://chromium.googlesource.com/chromium/src/+/70af3549366e24509cf05e6903a8431ba8af037b))。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-17T18:13:40.477

对于使用 Google Chrome 版本 41+ 的用户：

1.  点击最右边的栏
2.  单击设置
3.  点击“使用 GTK 主题”并勾选“使用系统标题和边框”

[过时，但仍然相关 来源](https://www.simplified.guide/chrome/hide-system-title-bar-in-kubuntu)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-11T14:14:12.627

在 Chrome 95 中，在 Windows 中，您可以通过选择“默认颜色”主题让系统根据标题栏是否处于活动状态为标题栏着色。

菜单 > 设置 > 自定义您的 Chrome 配置文件 > 默认颜色（顶行，左侧第二个表格）

[![在此处输入图像描述](../Images/588774a2e25b57cf052c82cc978a1bd5.png)](https://i.stack.imgur.com/C9e7E.png)

# android - 我应该使用什么布局

> ID：11505769
> 
> 赞同：1
> 
> 时间：2012-07-16T13:50:17.470
> 
> 标签：android, android-layout

因此，除了一些宠物项目之外，我对 android 还很陌生，我想对我的新项目做的是显示一个由六边形组成的图像，并在图像的边框上显示一些单选按钮。这可能吗/最好的方法是什么？我在想我可以用绝对的视角来做，你们认为这是最好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:53:46.923

1.  不要使用 AbsoluteLayout，因为它已被弃用。并且使用它会使您的应用程序的 UI 在不同的设备上看起来差别很大。

2.  对于您当前的需求，请使用RelativeLayout，因为它会提供更多的灵活性（与LinearLayout相比）

3.  没有最好的 UI 布局。最适合您的是您必须使用的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:02:30.400

相对布局将是您问题的最佳解决方案，但您可能需要使用一些“虚拟”视图来正确对齐真实视图。

# java - 位置更新的最佳省电方法

> ID：11505770
> 
> 赞同：8
> 
> 时间：2012-07-16T13:50:23.400
> 
> 标签：java, android

我正在尝试编写一个应该在后台运行的 Adroid 应用程序，并在用户接近数据库中给定的位置时通知用户。我应该通过扩展 IntentService 类中的 requestLocationUpdates 来完成吗？

尽可能减少电池消耗的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:58:56.103

Reto Meier 就这个主题写了大量文章：[http ://android-developers.blogspot.in/2011/06/deep-dive-into-location.html](http://android-developers.blogspot.in/2011/06/deep-dive-into-location.html)

`Optimizing Battery Life`Android 开发者网站上还有一个部分：http: [//developer.android.com/training/monitoring-device-state/index.html](http://developer.android.com/training/monitoring-device-state/index.html)

# java - hibernate 不会将条目保存到 postgresql 数据库

> ID：11505771
> 
> 赞同：3
> 
> 时间：2012-07-16T13:50:23.493
> 
> 标签：java, hibernate, postgresql

我通过这个 hibernate.cfg.xml 用 postgresql 设置了休眠

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

         <hibernate-configuration>
            <session-factory>
<!-- <property name="connection.url">jdbc:postgresql://localhost:5432/school</property>   -->
<property name="connection.url">jdbc:postgresql://localhost:5432/school</property>
<property name="connection.username">postgres</property>
<property name="connection.driver_class">org.postgresql.Driver</property>
<property name="dialect">org.hibernate.dialect.PostgreSQLDialect</property>
<property name="connection.password">root</property>
<property name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
<!-- thread is the short name for
org.hibernate.context.ThreadLocalSessionContext
and let Hibernate bind the session automatically to the thread
-->
<property name="current_session_context_class">thread</property>
<!-- this will show us all sql statements -->
<property name="hibernate.show_sql">true</property>
<!-- mapping files -->
                    <mapping resource="model/Student.hbm.xml" /> 
                   <mapping resource="model/link.hbm.xml" /> 
                <mapping resource="model/Course.hbm.xml" /> 
</session-factory>
</hibernate-configuration> 
```

但是我得到了这个错误，我无法弄清楚这个错误是什么意思......

```
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.sql.BatchUpdateException: Batch entry 0 insert into student (name, id) values ('asdfgh', '4') was aborted.  Call getNextException to see the cause.
    at org.postgresql.jdbc2.AbstractJdbc2Statement$BatchResultHandler.handleError(AbstractJdbc2Statement.java:2619)
    at org.postgresql.core.v3.QueryExecutorImpl$1.handleError(QueryExecutorImpl.java:457)
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1835)
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:405)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeBatch(AbstractJdbc2Statement.java:2752)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:246)
    ... 78 more
name asdfgh
returning
outside
org.hibernate.exception.SQLGrammarException: Could not execute JDBC batch update
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:253)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:237)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:141)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)
    at dao.StudentSave.addstudent(StudentSave.java:28)
    at action.ActionClass.adds(ActionClass.java:49)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.sql.BatchUpdateException: Batch entry 0 insert into student (name, id) values ('asdfgh', '4') was aborted.  Call getNextException to see the cause.
    at org.postgresql.jdbc2.AbstractJdbc2Statement$BatchResultHandler.handleError(AbstractJdbc2Statement.java:2619)
    at org.postgresql.core.v3.QueryExecutorImpl$1.handleError(QueryExecutorImpl.java:457)
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1835)
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:405)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeBatch(AbstractJdbc2Statement.java:2752)
    at or2012-07-16 19:06:26,272 DEBUG org.apache.struts2.dispatcher.ServletDispatcherResult.debug:68 - Forwarding to location result.jsp
2012-07-16 19:06:26,272 DEBUG com.opensymphony.xwork2.conversion.impl.InstantiatingNullHandler.debug:68 - Entering nullPropertyValue [target=[action.ActionClass@44b635, com.opensymphony.xwork2.DefaultTextProvider@1e45e75], property=struts] 
```

我必须自己在数据库中创建表和列吗？代码运行得非常好 usinf mysql 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:54:15.093

没关系

我没有将 hbm2ddl.auto 属性添加到配置文件中。现在这工作正常。

```
<property name="hbm2ddl.auto">update</property> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-30T18:12:43.413

我在 Hibernate 3.4 和 Postgres 9.1 中遇到了同样的问题。问题是我试图在 varchar(255) 列中存储一个长度超过 255 的文本字符串。解决方案是将列的类型更改为文本。

```
alter TABLE persistentmessage ALTER COLUMN payload TYPE text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:55:35.240

org.hibernate.exception.SQLGrammarException：无法执行 JDBC 批量更新

插入学生（姓名，身份证）值（'asdfgh'，'4'）

id 列是 VARCHAR 吗？

也许你可以从你调用数据库的地方发布java代码？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T07:41:04.803

这个说法：

```
insert into student (name, id) values ('asdfgh', '4'); 
```

如果`id`是数字列（整数、大整数、串行或任何其他数字数据类型），则无效

必须指定数字字面时不带单引号：

```
insert into student (name, id) values ('asdfgh', 4); 
```

MySQL 的草率数据类型检查允许这样的错误，但 PostgreSQL（和其他 DBMS）不允许。因此，您需要更改代码以确保将文字`4`作为数字而不是字符串文字传递。

如果您的列是 text/varchar/char 列，则它必须有所不同。

# android - 触摸事件时图像移动

> ID：11505776
> 
> 赞同：0
> 
> 时间：2012-07-16T13:50:45.053
> 
> 标签：android, imageview, touch-event

我有两张图像放在另一个上面，还有一个带有箭头标记的按钮。当用户触摸箭头并向左移动时，右侧图像应该变得可见，当用户触摸箭头并向右移动时，左侧图像应该完全可见。实现这一点的最佳方法是什么？

![在此处输入图像描述](../Images/541788d0377be4554de3fe7f2b014e47.png) 下面是图片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:55:08.873

尝试[http://negativeprobability.blogspot.in/2011/08/lazy-loading-of-images-in-listview.html](http://negativeprobability.blogspot.in/2011/08/lazy-loading-of-images-in-listview.html)来实现这一点

# c# - 我想通过 C# 将我的本地文件夹与 FTP 文件夹同步

> ID：11505777
> 
> 赞同：1
> 
> 时间：2012-07-16T13:50:47.577
> 
> 标签：c#, .net, ftp, synchronization

我正在使用以下代码将文件上传到 FTP：http:
[//msdn.microsoft.com/en-us/library/ms229715.aspx](http://msdn.microsoft.com/en-us/library/ms229715.aspx)。

一切都很好，但我认为使用这种同步两个文件夹会不太舒服。

我的 FTP 目录树是：`/categories/`=> `/category1`, `/category2`，`/category3`并且有大量文件 :)

在我的本地硬盘上，我的目录树是相同的，但这些文件夹中只有很少的文件。我的脚本的任务将检查特定文件是否存在于同一位置的 FTP 服务器上，如果不存在，则上传它。而已。

你能给我建议我应该去的解决方案或方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:17:16.803

你可以重新考虑一下你的设计。您可以在创建文件时直接使用事件处理程序 FileSystemWatcher 和“同步”（即上传到 ftp）文件，而不是只比较文件和文件夹结构。

*   [FileSystemWatcher 事件](http://msdn.microsoft.com/en-us/library/5h9akw31)

# c - 如何调用名称与c中的局部变量名称相同的函数

> ID：11505778
> 
> 赞同：1
> 
> 时间：2012-07-16T13:50:46.797
> 
> 标签：c

如何调用与调用函数中的局部变量名称相同的函数

设想：

我需要从其他函数 otherfun(int a,int myfun) 调用函数 myfun(a,b) 。我该怎么做？

```
int myfun(int a , int b)
{
 //
//
return 0;
}

int otherfun(int a, int myfun)
{
 // Here i need to call the function myfun as .. myfun(a,myfun)
 // how can i do this?? Please help me out

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T13:54:23.927

```
int myfun(int a , int b)
{
return 0;
}

int myfun_helper(int a, int b) 
{
 return myfun(a,b);
}
int otherfun(int a, int myfun)
{
 /* the optimizer will most likely inline this! */
 return myfun_helper(a,myfun);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:26:36.240

您可以创建一个变量来保存指向`myfun()`函数的指针。这将允许您有效地为原始函数“别名”，而无需引入额外的函数。

```
int myfun(int a, int b)
{
    // ...
    return 0;
}

static int (*myfunwrap)(int, int) = &myfun;

int otherfun(int a, int myfun)
{
    myfunwrap(a, myfun);
} 
```

当然，您可以`myfunwrap`用任何您喜欢的名称替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:27:54.593

最好的办法是为您的参数选择一个不同的名称。第二个最好的是这个，我认为：

```
int otherfun(int a, int myfun)
{
 int myfun_tmp = myfun;
 // Here i need to call the function myfun as .. myfun(a,myfun)
 {
   extern int myfun(int, int);
   myfun(a, myfun_tmp);
 }
} 
```

# c# - 保存幻灯片的背景图片

> ID：11505781
> 
> 赞同：1
> 
> 时间：2012-07-16T13:50:51.663
> 
> 标签：c#, ms-office, powerpoint, office-interop

有谁知道如何在PowerPoint演示文稿（2010）中保存幻灯片的背景图像。这是我的代码的一部分，我试图清除幻灯片以获取背景图像，但这并不是理想的结果

```
PowerPoint.Presentation p = app.Presentations.Open(slidesContainerPath, Microsoft.Office.Core.MsoTriState.msoFalse, Microsoft.Office.Core.MsoTriState.msoFalse, Microsoft.Office.Core.MsoTriState.msoFalse);

        string imagename;
        foreach (PowerPoint.Slide s in p.Slides) {
            imagename = s.SlideIndex.ToString() + ".jpg";
            s.BackgroundStyle = Microsoft.Office.Core.MsoBackgroundStyleIndex.msoBackgroundStyleNotAPreset;
            foreach(Microsoft.Office.Interop.PowerPoint.Shape shape in s.Shapes)
            {
                shape.Delete();
            }                
            s.Export(imagesContainerPath + "\\" + imagename, "JPG");
        }
        if (p != null) {
            p.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:33:14.170

如果您陈述问题，则更容易帮助您解决问题。你说“这不是理想的结果”。这可能意味着很多事情，从“什么都没发生”到“我的电脑爆炸了”。;-)

如果我不得不猜测（我确实猜到了），我会说您可能会看到从幻灯片中删除的所有其他形状，而不是每个形状。而不是 foreach 循环，使用类似这样的东西（VB/VBA，根据需要翻译）：

```
For x = s.Shapes.Count to 1 Step -1
  sShapes(x).Delete
Next 
```

这将删除幻灯片上的所有形状。

或者只是这个而不是循环：

s.Shapes.ShapeRange.Delete

# ios - 在 ios 中使用 Quartz 2d 进行注释（注释、评论）

> ID：11505782
> 
> 赞同：2
> 
> 时间：2012-07-16T13:51:10.170
> 
> 标签：ios, pdf, quartz-2d

我正在为 iPad 做基于 PDF 的应用程序。它支持缩略图视图、手绘评论和注释（Notes）。雅和我在网上搜索了很多，但我没有找到使用 Quartz 2d 在 PDF 上进行注释的任何相关答案。

我们可以使用
`CGPDFDictionaryRef CGPDFPageGetDictionary ( CGPDFPageRef page );`
And using `Annots`key 获取 PDF 页面信息。
`bool CGPDFDictionaryGetArray ( CGPDFDictionaryRef dict, "Annots", CGPDFArrayRef *value );`
您可以获得特定页面的注释。如果我是对的，**Notes**的关键是什么，如果它在那里，如何更新页面字典。
如果我在上述问题上完全错了，请让我知道**Notes**如何在 PDF 上呈现。或者 PDF 渲染器从哪里获取有关**Notes**的信息。？
请让我知道如果有人尽快知道。真的提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:04:05.510

我目前正在我的框架中实现注释。Apple 根本不会评估“Annots”字典 - 所以你自己。

我基本上重新实现了所有流行的注释类型，它们是如何绘制的，并编写了我自己的解析器，它从每个 CGPDFPage 的 Annots 字典中创建对象。然后在让 QuartzCore 绘制默认的 pdf 页面后绘制它们。

要获取所有密钥（Notes 等），请查看 Adob​​e 的 PDF 参考。阅读量很大（> 1000页）。

我不允许命名我正在开发的框架，因此请单击我的个人资料以查看链接。

# lucene - ElasticSearch：配置自定义分析器实现

> ID：11505789
> 
> 赞同：1
> 
> 时间：2012-07-16T13:51:45.593
> 
> 标签：lucene, elasticsearch, jsm

目前我正在评估是否以及如何将旧的基于 lucene 的分析器组件移动到弹性搜索（0.19.18）。由于遗留代码基于 lucene，我将分析器包装在 es-plugin 中。分析器的配置如下所示：

```
index.analysis.analyzer.myAnalyzer.type : myAnalyzer
index.analysis.analyzer.default.type: myAnalyzer
index.analysis.analyzer.default_index.type: myAnalyzer
index.analysis.analyzer.default_search.type: myAnalyzer 
```

到目前为止，一切都很好。

```
curl -XGET 'localhost:9200/_analyze' -d 'Some text' 
```

将返回一个包含正确标记化文本的对象，但

```
curl -XGET 'localhost:9200/<name-of-my-index>/_analyze' -d 'Some text' 
```

将返回一个根本没有标记化的文本。显然，只应用了小写过滤器而不是 myAnalyzer。索引中的对象都没有被正确分析。

索引映射如下所示（head-plugin 的输出）：

```
mappings: {
item: {
    analyzer: myAnalyzer
    properties: {
        id: {
            type: string
        }
        itemnumber: {
            type: string
        }
        articletext: {
            analyzer: myAnalyzer
            type: string
        }
        sortvalue: {
            type: string
        }
        salesstatus: {
            format: dateOptionalTime
            type: date
        }
    }
}
} 
```

由于我是 ES 新手，我无法弄清楚这种行为的真正原因是什么。有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:15:07.443

这就是我在 Elasticsearch 中设置自定义默认分析器的方式。

```
index:
  analysis:
    analyzer:
      default:
        filter: [lowercase]
        tokenizer: whitespace
        type: custom 
```

奇迹般有效。

# python - 为什么列表推导不过滤掉重复项？

> ID：11505791
> 
> 赞同：5
> 
> 时间：2012-07-16T13:51:53.820
> 
> 标签：python, list, filter, duplicates, list-comprehension

我有以下问题的解决方法。该解决方法将是一个 for 循环，其中包含一个测试以包含在输出中，如下所示：

```
#!/usr/bin/env python

def rem_dup(dup_list):
    reduced_list = []
    for val in dup_list:
        if val in reduced_list:
            continue
        else:
            reduced_list.append(val)

    return reduced_list 
```

我在问以下问题，因为我很想知道是否有列表理解解决方案。

给定以下数据：

```
reduced_vals = []
vals = [1, 2, 3, 3, 2, 2, 4, 5, 5, 0, 0] 
```

为什么

```
reduced_vals = = [x for x in vals if x not in reduced_vals] 
```

生成相同的列表？

```
>>> reduced_vals
[1, 2, 3, 3, 2, 2, 4, 5, 5, 0, 0] 
```

我认为这与将输出 ( `reduced_vals`) 作为分配给列表的一部分进行检查有关。我很好奇，但确切的原因。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T13:53:54.953

列表推导创建一个新列表，同时`reduced_vals`在列表推导评估期间始终指向空列表。

Python 中赋值的语义是：计算右侧并将结果对象绑定到左侧的名称。对裸名的赋值*永远不会*改变任何对象。

顺便说一句，您应该以有效的方式使用`set()`或`collections.OrderedDict.fromkeys()`删除重复项（取决于您是否需要保留顺序）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T13:54:06.280

您正在针对一个空列表进行测试。

在将表达式分配为 的新值之前，首先对表达式进行完整计算`reduced_vals`，因此在计算完整列表表达式之前，该值保持为空。

换句话说，表达式`[x for x in vals if x not in reduced_vals]`是单独执行的。如果您以稍微修改的方式查看代码可能会有所帮助：

```
temp_var = [x for x in vals if x not in reduced_vals]
reduced_vals = temp_var
del temp_var 
```

以上是直接将列表表达式的结果分配给的道德等价物`reduced_vals`，但我通过使用第二个变量更清楚地分开分配结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-16T13:54:07.030

在这一行中：`[x for x in vals if x not in reduced_vals]`没有一个值*不在*in 中`reduced_vals`，`reduced_vals`空列表也是如此`[]`。换句话说，没有任何内容被过滤，并且所有元素都`vals`被返回。

如果你试试这个：

```
[x for x in vals if x in reduced_vals] 
```

结果是空列表`[]`，因为*所有*值*都不*在`reduced_vals`其中（为空）。我相信您对过滤部分在列表理解中的工作方式感到困惑：您会看到，过滤器仅选择那些构成条件的值`True`，但它不会防止重复值。

现在，如果您需要过滤掉重复项，那么列表推导式就不是适合这项工作的工具。为此，使用一个集合 - 虽然它不一定会保留原始列表的顺序，但它会保证元素是唯一的：

```
vals = [1, 2, 3, 3, 2, 2, 4, 5, 5, 0, 0]
list(set(vals))
> [0, 1, 2, 3, 4, 5] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T13:53:56.723

因为列表推导式中的元素在`reduced_vals`整个列表构建完成之前不会被分配。如果您想完成这项工作，请使用`for`循环。`.append()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T13:54:45.833

因为`reduced_vals`在评估列表理解期间没有改变。

# grails - Grails WebFlow 和命令对象：只允许一个命令对象？

> ID：11505797
> 
> 赞同：1
> 
> 时间：2012-07-16T13:52:06.177
> 
> 标签：grails, spring-webflow, command-objects

圣杯 1..3.7

在常规控制器操作中，我可以执行以下操作：

```
def someAction = { OneCommand oneCmd, TwoCommand twoCmd ->

} 
```

但是，在 webflow 操作中，我有等价的：

```
def someFlow = {
  someAction { 
    on("something") { OneCommand oneCmd, TwoCommand twoCmd ->
    }
  }
} 
```

它不会将参数绑定到任何一个对象。如果我删除其中一个，它将绑定到左侧。这是错误还是预期行为？

# android - 查询时间过长（1-3 秒），显示加载过程图标

> ID：11505798
> 
> 赞同：-5
> 
> 时间：2012-07-16T13:52:09.813
> 
> 标签：android, window, loading

长数据处理该怎么办？当打开一个新活动时，我们会黑屏 3 秒。我需要一种方法来正确处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:55:49.607

用于`AsyncTask`在后台进行处理并在完成时将信息传回 UI。引用[文档](http://developer.android.com/reference/android/os/AsyncTask.html)，

> AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

`AsyncTask`文档中有一个子类化的基本示例。

# jquery - 防止在 Rails AJAX 表单中重复提交

> ID：11505801
> 
> 赞同：8
> 
> 时间：2012-07-16T13:52:21.910
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3, submit

### 是）我有的：

我有一个通过 AJAX 提交的表单。

```
<%= form_for([@map, @annotation], :remote => true ) do |f| %>
   ...
   <%= f.submit "Save annotation", :class => "btn btn-primary", :id => "annotation-submit-button" %>
<% end %> 
```

### 我想要的是：

我想防止重复提交。由于表单只有在请求成功完成后才会消失，所以只要数据库还没有完成数据写入，用户就可以点击提交按钮。我不想那样，很明显。

### 我试过的：

我尝试将它添加到提交按钮本身 - 但它不起作用。该按钮被禁用，但没有数据发送。

```
:onclick => "this.disabled = true" 
```

我还尝试将单击处理程序添加到提交按钮。这与之前的效果相同。实际上没有数据发送到控制器，但按钮被禁用。

```
$("#annotation-submit-button").click(function(event) {
  $(this).attr("disabled", "disabled");
  return false;
}); 
```

也试过同样没有返回`false`。禁用按钮后没有任何反应。

```
$("#annotation-submit-button").click(function(event) {
  $(this).prop("disabled", "disabled");
}); 
```

我开始认为这是特定于 Rails 的东西？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-16T14:20:35.960

[`disable_with`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-submit_tag)在 Rails 3 及更高版本中尝试这样的视图：

```
<%= f.submit "Save annotation", :data => {:disable_with => "Saving..."}, ... %> 
```

对于 Rails 2：

```
<%= f.submit "Save annotation", :disable_with => "Saving...", ... %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:57:15.097

禁用按钮应该可以正常工作。

只需禁用执行 ajax 调用的同一功能中的按钮即可。

```
$("#annotation-submit-button").click(function(event) {
  // do ajax call
  $.ajax(...);
  // disable the button
  $(this).prop("disabled", true);
  // prevent the standard action
  return false;
}); 
```

但是，从 jQuery 1.6 开始，您应该`prop()`使用`attr()`.

编辑：

在回复您的评论时，请尝试省略，`return false;`这样您就不会中断通过 Rails 执行表单提交。

```
$("#annotation-submit-button").click(function(event) {
  // disable the button
  $(this).prop("disabled", "disabled");
  // do not return false since this stops the event propagation
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T14:01:53.877

通过 jQuery：您可以执行以下操作来处理您想要的操作

```
$.ajax({
  .....,
  beforeSend: function (){ $('#your-button').attr('disabled', 'disabled'); },
  success: function (){ 
    // Here you can enable the button
  }
}); 
```

希望这可以帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-23T11:44:20.910

所有人，在回顾了您的想法并在我的团队中交谈后，我们得到了解决方案：

```
(function ($) {
  /**
   * 使用：
   *   在jquery的ajax方法中加入参数:beforeSend
   *   例如：beforeSend: function(){return $.preventMultipleAjax(event, 5000)}
   *
   * @param event
   * @param delay_duration
   * @returns {boolean}
   */
  $.preventMultipleAjax = function (event, delay_duration) {
    delay_duration = delay_duration || 3000;
    var target = $(event.target);
    var last_click_time_stamp = target.attr("_ajax_send_time_stamp") || 0;
    var time_duration = last_click_time_stamp ? event.timeStamp - last_click_time_stamp : 0;
    //console.debug("preventMultipleAjax", last_click_time_stamp, time_duration);
    if (time_duration && time_duration < delay_duration) {
      return false;
    } else {
      //console.debug("skip preventMultipleAjax~");
      target.attr("_ajax_send_time_stamp", event.timeStamp);
      return true;
    }
  };

  /**
   * 防止按钮重复点击。
   * NOTICE: #1 需要在作用点之前调用此方法 #2 stopImmediatePropagation 会阻止后面的所有事件包括事件冒泡
   * @delay_duration 两次点击的间隔时间
   */
  $.fn.preventMultipleClick = function (delay_duration) {
    delay_duration = delay_duration || 3000;
    var last_click_time_stamp = 0;
    var time_duration = 0;
    $(this).bind('click', function (event) {
      time_duration = last_click_time_stamp ? event.timeStamp - last_click_time_stamp : 0;
      //console.debug("preventMultipleClick", last_click_time_stamp, time_duration);
      if (time_duration && time_duration < delay_duration) {
        event.stopImmediatePropagation();
      } else {
        //console.debug("skip preventMultipleClick~");
        last_click_time_stamp = event.timeStamp;
      }
    });
  };
})(jQuery); 
```

如果你喜欢我会添加它作为一个小插件~谢谢你的建议~

# css - 右浮动 div 在页面中间浮动，直到页面渲染完成

> ID：11505803
> 
> 赞同：0
> 
> 时间：2012-07-16T13:52:40.140
> 
> 标签：css

该页面具有流畅的布局，以及一个浮动到页面右上角的登录状态 div。

问题是元素只是位于页面的中心，直到页面完全呈现，此时它移动到正确的位置。

假设这是因为浏览器在渲染之前不知道包含的 div 有多大。

有处理这个问题的技术吗？

这是div的css：

```
 div#headerLinks
{
    float: right;
    background: url('../Img/SomeImage.jpg') top left;
    display: inline-block;
    padding: 10px 14px 10px 15px;
    margin-right: -20px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:05:04.237

您总是可以使用一些 Javascript 和 jQuery 来解决它。

继续显示加载图像，直到文档准备好或加载。隐藏图像并显示其他 div。

代码可能如下所示：

```
$(function () {
    onLoadContent();
});

function onLoadStatistics() {
    $(window).load(function () {
        $('#loading-image').hide();
        $('#content').show();
    });
} 
```

# android - 如何更改 Android 手机上的蓝牙设备类别？

> ID：11505808
> 
> 赞同：5
> 
> 时间：2012-07-16T13:52:47.207
> 
> 标签：android, bluetooth

通过蓝牙连接时，是否可以让 Android 手机显示为不是来自 Phone 设备类？例如，假设我想假装我的手机是另一个设备的蓝牙键盘。

我一直在寻找[蓝牙 API](https://developer.android.com/reference/android/bluetooth/package-summary.html)，但无论如何我都看不到要更改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:39:02.863

无法从应用程序更改 COD（设备类别）。对于手机中的 bluez 堆栈，COD 在 adapter.c 中定义。虽然如果您希望您的手机可以充当其他设备的键盘，添加 SDP 记录可能会有所帮助。如果对端设备搜索到您手机支持的服务，它可以识别为带有 SDP 记录的 HID 设备

# c++ - ns3 网状 udp 流量错误

> ID：11505810
> 
> 赞同：2
> 
> 时间：2012-07-16T13:52:51.107
> 
> 标签：c++, udp, ns-3

我创建了以下代码来模拟 ns3 中的网格场景。当节点数（m_nnodes）为15时，脚本正常执行，流量接收正确。当节点数 (m_nnodes) 设置为 4 时，似乎没有收到任何数据包。我尝试了不同的拓扑，但结果是一样的。什么可能导致这种行为？任何想法将不胜感激。

```
#include "ns3/wifi-module.h"
#include "ns3/mesh-module.h"
#include "ns3/mobility-module.h"
#include "ns3/core-module.h"
#include "ns3/network-module.h"
#include "ns3/internet-module.h"
#include "ns3/point-to-point-module.h"
#include "ns3/hwmp-protocol.h"
#include "ns3/applications-module.h"
#include "ns3/random-variable.h"
#include "ns3/wifi-phy.h"
#include "ns3/flow-monitor.h"
#include "ns3/flow-monitor-helper.h"
#include "ns3/ipv4-flow-classifier.h"
#include "ns3/boolean.h"
#include "ns3/object.h"
#include "ns3/enum.h"
#include "ns3/double.h"
#include "ns3/simulator.h"
#include "ns3/log.h"
#include <cmath>
#include "ns3/uinteger.h"
#include "ns3/traced-value.h"
#include "ns3/trace-source-accessor.h"
#include "../src/mesh/model/dot11s/airtime-metric.h"
#include "ns3/mesh-wifi-interface-mac.h"
#include "ns3/wifi-remote-station-manager.h"
#include "ns3/wifi-mode.h"
#include <iostream>
#include <sstream>
#include <fstream>
#include <vector>

using namespace ns3;
NS_LOG_COMPONENT_DEFINE ("ConstantPosition");

class MeshTest {
public:
    /// Init test
MeshTest();
    /// Run test
    int Run();

private:
    int m_nnodes;
    double m_step;
    double m_randomStart;
    double m_totalTime;
    uint16_t m_packetSize;
    double m_packetInterval;
    uint32_t m_nIfaces;
    bool m_chan;
    bool m_pcap;
    uint8_t port;
    int maxPacketCount;
    std::string m_stack;
    std::string m_root;

    /// List of network nodes
    NodeContainer nodes;
    /// List of all mesh point devices
    NetDeviceContainer meshDevices;
    //Addresses of interfaces:
    Ipv4InterfaceContainer interfaces;
    // MeshHelper. Report is not static methods
    MeshHelper mesh;

private:
    /// Create nodes and setup their mobility
    void CreateNodes();
    /// Install internet m_stack on nodes
    void InstallInternetStack();
    /// Install applications
    void InstallApplication();

};    

MeshTest::MeshTest() :
    m_nnodes(4), m_step(10.0), m_randomStart(0.1), m_totalTime(100),
            m_packetSize(1024), m_packetInterval(0.1), m_nIfaces(1),
            m_chan(true), m_pcap(false), maxPacketCount(1000),
            m_stack("ns3::Dot11sStack"), m_root("00:00:00:00:00:01") {
}

void MeshTest::CreateNodes() {

    // Calculate nnodes stations random topology
    nodes.Create(m_nnodes);

    // Configure YansWifiChannel
    YansWifiPhyHelper wifiPhy = YansWifiPhyHelper::Default();

    YansWifiChannelHelper wifiChannel = YansWifiChannelHelper::Default();
    wifiPhy.SetChannel(wifiChannel.Create());
    mesh = MeshHelper::Default();

    mesh.SetStackInstaller(m_stack, "Root",
            Mac48AddressValue(Mac48Address(m_root.c_str())));

    if (m_chan) {
        mesh.SetSpreadInterfaceChannels(MeshHelper::SPREAD_CHANNELS);
    } else {
        mesh.SetSpreadInterfaceChannels(MeshHelper::ZERO_CHANNEL);
    }

    mesh.SetMacType("RandomStart", TimeValue(Seconds(m_randomStart)));
    // Set number of interfaces - default is single-interface mesh point
    mesh.SetNumberOfInterfaces(m_nIfaces);
    // Install protocols and return container if MeshPointDevices
    meshDevices = mesh.Install(wifiPhy, nodes);
    // Setup mobility

    //        wifiPhy.EnableAsciiAll (std::string("mp-"));
    MobilityHelper mobility;
    mobility.SetPositionAllocator("ns3::RandomRectanglePositionAllocator", "X",
            RandomVariableValue(UniformVariable(0, m_step)), "Y",
                RandomVariableValue(UniformVariable(0, m_step / 2)));
    mobility.SetMobilityModel("ns3::ConstantPositionMobilityModel");

    mobility.Install(nodes);

    for (NodeContainer::Iterator j = nodes.Begin(); j != nodes.End(); ++j) {
        Ptr<Node> object = *j;
    Ptr<MobilityModel> position = object->GetObject<MobilityModel> ();
        // NS_ASSERT (position != 0);// to verify the condition
        Vector pos = position->GetPosition();
        std::cout << "x=" << pos.x << ", y=" << pos.y << std::endl;
    }

    if (m_pcap)
        wifiPhy.EnablePcapAll(std::string("mp-"));

    // Create mesh helper and set stack installer to it
    // Stack installer creates all needed protocols and install them to device

}

void MeshTest::InstallInternetStack()

{
    //Install the internet protocol stack on all nodes
    InternetStackHelper internetStack;
    internetStack.Install(nodes);
    //Assign IP addresses to the devices interfaces (m_nIfaces)
    Ipv4AddressHelper address;
    address.SetBase("192.168.1.0", "255.255.255.0");
    interfaces = address.Assign(meshDevices);
}

void MeshTest::InstallApplication() {

    //
    // Create one UdpServer applications on node 0
    //

        //
    // Create UdpClient application to send UDP datagrams.
    //    

    for (int i = 1; i < m_nnodes; i += 2) {

        int server_id = i - 1;
        uint16_t port = 2000 + i;
        UdpServerHelper server(port);
        ApplicationContainer apps = server.Install(nodes.Get(server_id));
        apps.Start(Seconds(1.0));
        apps.Stop(Seconds(80.0));

        UdpClientHelper client(interfaces.GetAddress(server_id), port);
        client.SetAttribute("MaxPackets", UintegerValue(maxPacketCount));
        client.SetAttribute("Interval", TimeValue(Seconds(m_packetInterval)));
        client.SetAttribute("PacketSize", UintegerValue(m_packetSize));
        ApplicationContainer apps2 = client.Install(nodes.Get(i));
        apps2.Start(Seconds(2.0));
        apps2.Stop(Seconds(50.0));
    }

}

int MeshTest::Run() {
    CreateNodes();
    InstallInternetStack();
    InstallApplication();
    Simulator::Stop(Seconds(m_totalTime));
    Simulator::Run();
    Simulator::Destroy();
    return 0;
}

int main(int argc, char *argv[]) {
    LogComponentEnable("UdpClient", LOG_LEVEL_INFO);
    LogComponentEnable("UdpServer", LOG_LEVEL_INFO);
    MeshTest t;
    return t.Run();
} 
```

# c++ - 使用 websocketpp 库在多线程程序中为 endpoint.listen() 创建单独的 boost 线程

> ID：11505811
> 
> 赞同：1
> 
> 时间：2012-07-16T13:52:53.557
> 
> 标签：c++, multithreading, boost, websocket, boost-thread

我正在尝试将 websocketpp 服务器集成到多线程项目中。在单线程方法中一切正常，但是在为将在后台运行的 endpoint.listen() 创建单独的 boost::thread 时遇到了问题（因此它不会中断主线程的执行）。我已经在具有最新版本的 websocketpp 的 Ubuntu 12.04 64 位上尝试了 Boost v1.46.1 和 v1.50.0 的代码。下面是一个代码示例和我的方法的解释。

```
#include <websocketpp/websocketpp.hpp>
#include <boost/thread.hpp>
#include <boost/bind.hpp>
#include <exception>

using websocketpp::server;

class echo_server_handler : public server::handler {
public:
    void on_message(connection_ptr con, message_ptr msg) {
        con->send(msg->get_payload(),msg->get_opcode());
    std::cout << "Got message: " << msg->get_payload() << std::endl;
    }
};

int main(int argc, char* argv[]) {

    unsigned short port = 9002;

    try {       
        server::handler::ptr h(new echo_server_handler());
        server echo_endpoint(h);

        echo_endpoint.alog().unset_level(websocketpp::log::alevel::ALL);
        echo_endpoint.elog().unset_level(websocketpp::log::elevel::ALL);

        echo_endpoint.alog().set_level(websocketpp::log::alevel::CONNECT);
        echo_endpoint.alog().set_level(websocketpp::log::alevel::DISCONNECT);

        echo_endpoint.elog().set_level(websocketpp::log::elevel::RERROR);
        echo_endpoint.elog().set_level(websocketpp::log::elevel::FATAL);

        std::cout << "Starting WebSocket echo server on port " << port << std::endl;

        //Getting pointer to the right function
         void(websocketpp::role::server<websocketpp::server>::*f)(uint16_t,size_t) =
                &websocketpp::role::server<websocketpp::server>::listen;

        std::cout << "Starting WSServer thread... \n" << std:endl;
        boost::shared_ptr<boost::thread> ptr(new boost::thread(boost::bind(f, &echo_endpoint, port, 1)));
    //ptr->join();

    } catch (std::exception& e) {
        std::cerr << "Exception: " << e.what() << std::endl;
    }

    //Simulating processing in the main thread
    while(true) {std::cout << "Main thread processing..."<<std::endl; sleep(5);}

    return 0;

} 
```

如果我用*ptr->join();编译代码* 监听线程工作正常，但它使主线程休眠。如果我离开*ptr->join()*并让监听线程在后台运行，我会在线程创建后遇到错误：

> /usr/local/boost_1_50_0/libbin/include/boost/thread/pthread/recursive_mutex.hpp:105: void boost::recursive_mutex::lock(): 断言 `!pthread_mutex_lock(&m)' 失败。

我对线程或提升线程不是很有经验，而且对 websocketpp 很陌生，所以我不确定我是否在这里做错了什么。如果有更好的（和有效的）方法来解决这个问题，我很乐意看到一些例子。我一直在努力解决这个问题很长时间，所以任何帮助都是无价的。提前致谢！

另请查看：[gdb stacktrace](http://pastebin.com/Jcd6MGSy)和[valgrind 结果](http://pastebin.com/Cf2nmf4t)

**编辑：** 代码示例中的“while(true)”只是为了模拟主线程中的处理。我正在一个大型项目中集成一个 websocket 服务器，该项目在后台运行不同类型的套接字连接、事件、数据处理、客户端同步等。websocket 连接提供了另一种使用 Web 客户端而不是本机客户端连接到服务器的方法。主线程创建所有必要的东西，但我不能真正影响它们的创建顺序，所以 websocket 服务器必须在它自己的线程中启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:04:31.837

您在 try/catch 范围内创建所有对象。当您离开此范围时，这些对象将被销毁。

因此，要么将对象定义移出 try/catch，要么将`while(true)`循环移入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:34:46.630

为什么要`boost::thread`在堆上创建它，而它可能在堆栈上？

您不需要使用`boost::bind`with `boost::thread`，所以它应该是简单的：

```
 boost::thread t(f, &echo_endpoint, port, 1); 
```

简单得多，不是吗？

至于你的程序的行为。如果你`ptr->join()`在那里调用，那么主线程会等待另一个线程完成，这永远不会发生，所以它当然会休眠。如果你不加入它，那么`ptr`一切`echo_endpoint`都`h`超出了范围。然后另一个线程将尝试使用不再存在的对象。

作为@IgorR。[说](https://stackoverflow.com/a/11507071/981959)，你应该把`while`循环放在 try-catch 块中，这样主循环中的工作就可以在另一个线程和它使用的对象超出范围*之前发生。*

从 Boost 1.50开始，如果线程在其析构函数运行时可连接，析构函数与ie`boost::thread`的行为相匹配。这是为了防止您遇到的那种错误，即使引用它的句柄和其他堆栈对象不再存在，线程也会继续运行。如果你想让它继续运行，你必须显式地运行它（但在你的程序中这仍然是错误的，因为and对象仍然会不复存在并且线程仍然会尝试使用它们。）所以在对象超出范围之前你应该要么它要么它。`std::thread``terminate()``boost::thread``detach``echo_endpoint``h``boost::thread``join``detach`

# debian - 是否可以重新定位pythonbrew

> ID：11505814
> 
> 赞同：1
> 
> 时间：2012-07-16T13:53:09.727
> 
> 标签：debian, packaging, pythonbrew

我正在尝试使用 pythonbrew 创建一个包含自定义构建的 python 的 debian 包。

编译和debian构建成功。问题是当我在其他机器上安装包时，一些模块不起作用。例如`hashlib`甚至`os.getcwd()`不工作。而在构建机器上一切正常。

是否可以重新定位python安装？可能是什么问题？

```
>>> from hashlib import md5
ERROR:root:code for hash md5 was not found.
Traceback (most recent call last):
  File "/opt/sw-python/extra/pythonbrew/pythons/Python-2.7.2/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/opt/sw-python/extra/pythonbrew/pythons/Python-2.7.2/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type md5
ERROR:root:code for hash sha1 was not found.
Traceback (most recent call last):
  File "/opt/sw-python/extra/pythonbrew/pythons/Python-2.7.2/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/opt/sw-python/extra/pythonbrew/pythons/Python-2.7.2/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha1
ERROR:root:code for hash sha224 was not found.
Traceback (most recent call last):
  File "/opt/sw-python/extra/pythonbrew/pythons/Python-2.7.2/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/opt/sw-python/extra/pythonbrew/pythons/Python-2.7.2/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha224
ERROR:root:code for hash sha256 was not found.
Traceback (most recent call last):
  File "/opt/sw-python/extra/pythonbrew/pythons/Python-2.7.2/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/opt/sw-python/extra/pythonbrew/pythons/Python-2.7.2/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha256
ERROR:root:code for hash sha384 was not found.
Traceback (most recent call last):
  File "/opt/sw-python/extra/pythonbrew/pythons/Python-2.7.2/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/opt/sw-python/extra/pythonbrew/pythons/Python-2.7.2/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha384
ERROR:root:code for hash sha512 was not found.
Traceback (most recent call last):
  File "/opt/sw-python/extra/pythonbrew/pythons/Python-2.7.2/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/opt/sw-python/extra/pythonbrew/pythons/Python-2.7.2/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha512
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: cannot import name md5 
```

我在`/opt/sw-python/extra/pythonbrew`目录中构建它，并在安装时将 pythonbrew 放置到同一`/opt/sw-python/extra/pythonbrew`目录中。

目标机器：

```
Linux german-pc 3.0.0-12-generic ... x86_64 x86_64 x86_64 GNU/Linux 
```

建机：

```
Linux ds5vs5 2.6.32-5-amd64 ... 2012 x86_64 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:23:09.153

最后，我将我的 debian 软件包安装在与构建机器类似的不同 Debian 机器上。它奏效了！

我不知道究竟是什么导致了这个问题，但我想这是内核或编译器的不同。

# android - 有没有办法检查复选框是否被用户实际选中

> ID：11505827
> 
> 赞同：1
> 
> 时间：2012-07-16T13:53:55.207
> 
> 标签：android, checkbox

除此之外`setOnCheckedChangeListener`，还有什么方法可以检查用户是否实际触摸了屏幕并选中/取消选中`checkbox`.

我问这个问题是因为`setOnCheckedChangeListener`即使用户没有执行检查，我的流程也会进入内部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:56:56.857

这样你就可以有一个布尔值来查看你的复选框是否被选中。

在您的 java 代码中使用它。

```
CheckBox cb = findviewById(R.id.checkbox1);
if(cb.isChecked()){
          //it is checked 
}
//else it is not checked 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:56:28.537

取一个布尔标志。示例：boolean realyCkecked = false;

```
In setOnCheckedChangeListener:
If(realyCkecked == false) {
    realyCkecked = true;
} 
```

然后检查 realyCkecked 是真/假

```
If(realyCkecked) {
    System.out.println("Checked Atleast Once.");
} else {
    System.out.println("Not checked yet.");
} 
```

因此，您甚至可以知道任何时候 CheckBox 是否被选中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:26:18.530

在您的`setOnCheckedChangeListener()`方法中，您可以使用一个计数器并增加它。之后，在您想使用它的地方，将其与之前的值进行比较。

# sql - 是否可以在sql中获取行的最后更新时间

> ID：11505834
> 
> 赞同：7
> 
> 时间：2012-07-16T13:54:08.383
> 
> 标签：sql, phpmyadmin

是否可以使用 MYSQL 服务器获取行的最后更新时间和日期。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T14:03:35.377

好吧，MySQL 没有内置功能。虽然您可以通过添加时间戳列来获得相同的效果：

```
ALTER TABLE NAMEYOURTABLE
   ADD COLUMN last_update TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP 
```

使用上面创建名称为 last_update 列的时间戳将使其几乎可以自动管理和更新。现在您可以根据时间戳从 NAMEYOURTABLE 中选择最后更新的行。

# ruby - 内省模块类时，“#map(&proc)”习语是如何工作的？

> ID：11505835
> 
> 赞同：13
> 
> 时间：2012-07-16T13:54:08.073
> 
> 标签：ruby, constants, introspection, idioms, proc

### 呈现成语

我找到了一个[有趣但无法解释的替代](https://stackoverflow.com/a/3680719/1301972)已接受答案的方法。该代码在 REPL 中显然有效。例如：

```
module Foo
  class Bar
    def baz
    end
  end
end
Foo.constants.map(&Foo.method(:const_get)).grep(Class)
=> [Foo::Bar] 
```

但是，我并不完全理解这里使用的成语。特别是，我不了解 的使用`&Foo`，这似乎是某种闭包，或者 #grep 的这种特定调用如何对结果进行操作。

### 解析成语

到目前为止，我已经能够解析其中的点点滴滴，但我并没有真正看到它们是如何组合在一起的。这是我*认为*我对示例代码的理解。

1.  `Foo.constants`返回一个模块常量数组作为符号。

2.  `method(:const_get)`使用[Object#method](http://ruby-doc.org/core-1.9.3/Object.html#method-i-method)执行方法查找并返回一个闭包。

3.  `Foo.method(:const_get).call :Bar`是一个闭包，它返回类中常量的限定路径。

4.  `&Foo`似乎是[某种特殊的 lambda](http://www.ruby-doc.org/core-1.9.3/Proc.html#method-i-lambda-3F)。文档说：

    > 如果 Proc 对象由 & 参数给出，则 & 参数保留技巧。

    我也不确定我是否完全理解在这种特定情况下这意味着什么。为什么是 Proc？什么“技巧”，为什么它们在这里是必要的？

5.  `grep(Class)`是对[#map方法](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map)的值进行操作，但其特点并不明显。

    *   为什么这个 #map 构造返回一个 greppable 数组而不是一个枚举器？

        ```
        Foo.constants.map(&Foo.method(:const_get)).class
        => Array 
        ```

    *   对名为 Class 的类的 grepping 是如何实际工作的，为什么这里需要这种特殊的构造？

        ```
        [Foo::Bar].grep Class
        => [Foo::Bar] 
        ```

### 问题，重述

我真的很想完整地理解这个成语。任何人都可以在这里填补空白，并解释这些部分是如何组合在一起的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T14:09:20.257

`&Foo.method(:const_get)`是对象的`const_get`方法`Foo`。这是另一个例子：

```
m = 1.method(:+)
#=> #<Method: Fixnum#+>
m.call(1)
#=> 2
(1..3).map(&m)
#=> [2, 3, 4] 
```

所以最后这只是一种[无意义](http://www.haskell.org/haskellwiki/Pointfree)的说法`Foo.constants.map { |c| Foo.const_get(c) }`。`grep`用于`===`选择元素，因此它只会获取引用类的常量，而不是其他值。这可以通过添加另一个常量来验证`Foo`，例如`Baz = 1`，它不会被`grep`ped。

如果您还有其他问题，请将它们添加为评论，我会尽力澄清它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T00:48:51.033

您对成语的解析非常准确，但我会仔细阅读并尝试澄清您提到的任何问题。

## 1.`Foo.constants`

正如您所提到的，这将返回一个模块常量名称数组作为符号。

## 2.`Array#map`

您显然知道这是做什么的，但为了完整起见，我想将其包括在内。Map 接受一个块并以每个元素作为参数调用该块。它返回`Array`这些块调用的结果。

## 3.`Object#method`

同样正如您所提到的，这会进行方法查找。这很重要，因为在 Ruby 中不带括号的方法是对该方法的不带任何参数的方法调用。

## 4.`&`

该运算符用于将事物转换为块。我们需要这个，因为块不是 Ruby 中的一等对象。由于这种二等状态，我们无法创建独立的块，但我们可以转换`Procs`成块（但只有当我们将它们传递给函数时）！`&`运算符是我们进行这种转换的方式。每当我们想像传递一个`Proc`块一样传递一个对象时，我们可以在它前面加上`&`操作符并将它作为最后一个参数传递给我们的函数。但`&`实际上可以转换的不仅仅是`Proc`对象，它可以转换任何有`to_proc`方法的东西！

在我们的例子中，我们有一个`Method`对象，它确实有一个`to_proc`方法。`Proc`对象和对象之间的区别`Method`在于它们的上下文。一个`Method`对象绑定到一个类实例并且可以访问属于该类的变量。A`Proc`绑定到创建它的上下文；也就是说，它可以访问创建它的范围。`Method#to_proc`捆绑方法的上下文，以便结果`Proc`可以访问相同的变量。[您可以在此处](http://weblog.raganwald.com/2008/06/what-does-do-when-used-as-unary.html)找到有关`&`运营商的更多信息。

## 5.`grep(Class)`

工作方式`Enumerable#grep`是它对`argument === x`可枚举中的所有 x 运行。在这种情况下，参数的顺序`===`非常重要，因为它是调用`Class.===`而不是`Foo::Bar.===`. 我们可以通过运行看到这两者之间的区别：

```
 irb(main):043:0> Class === Foo::Bar
    => true
    irb(main):044:0> Foo::Bar === Class
    => false 
```

`Module#===`(`Class`从 继承其`===`方法`Method`)`True`当参数是它的一个实例`Module`或其后代之一（如`Class`！）时返回，这将过滤掉不属于`Module`or类型的常量`Class`。`Module#===` [您可以在此处](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-3D-3D-3D)找到文档。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T10:50:05.593

首先要知道的是：

**`&`调用`to_proc`它之后的对象并将生成的 proc 用作方法块。**

现在您必须深入了解该`to_proc`方法是如何在特定类中实现的。

## 1.符号

```
class Symbol
  def to_proc
    Proc.new do |obj, *args|
      obj.send self, *args
    end
  end
end 
```

或[类似的东西](http://www.ruby-doc.org/core-1.9.3/Symbol.html#method-i-to_proc)。从上面的代码中，您可以清楚地看到生成的 proc 调用对象上的方法（名称 == 符号）并将参数传递给该方法。举个简单的例子：

```
[1,2,3].reduce(&:+)
#=> 6 
```

正是这样做的。它执行如下：

1.  调用`:+.to_proc`并返回一个 proc 对象`=> #<Proc:0x007fea74028238>`
2.  它接受 proc 并将其作为块传递给`reduce`方法，因此而不是调用`[1,2,3].reduce { |el1, el2| el1 + el2 }`它调用
    `[1,2,3].reduce { |el1, el2| el1.send(:+, el2) }`。

## 2.方法

```
 class Method
   def to_proc
     Proc.new do |*args|
       self.call(*args)
     end
   end
 end 
```

如您所见，它具有不同的`Symbol#to_proc`. 为了说明这一点，再次考虑这个`reduce`例子，但现在让我们看看它是如何使用方法的：

```
def add(x, y); x + y end
my_proc = method(:add)
[1,2,3].reduce(&my_proc)
#=> 6 
```

在上面的例子中是调用`[1,2,3].reduce { |el1, el2| my_proc(el1, el2) }`.

现在，为什么该`map`方法返回一个 Array 而不是 Enumerator 是因为[你传递给它一个 block](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map)，试试这个：

```
[1,2,3].map.class
#=> Enumerator 
```

最后但并非最不重要的`grep`Array 是选择`===`与其参数有关的元素。希望这能澄清您的担忧。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T14:13:47.073

您的序列相当于：

```
c_names = Foo.constants #=> ["Bar"]
cs = c_names.map { |c_name| Foo.__send__(:const_get, c_name) } #=> [Foo::Bar]
cs.select{ |c| Class === c } #=> [Foo::Bar] 
```

您可以考虑`Object#method`（大致）：

```
class Object
  def method(m)
    lambda{ |*args| self.__send__(m, *args) }
  end
end 
```

`grep`此处描述[http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-grep](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-grep)

`===`for `Class`（它是 的子类`Module`）在此处描述[http://ruby-doc.org/core-1.9.3/Module.html#method-i-3D-3D-3D](http://ruby-doc.org/core-1.9.3/Module.html#method-i-3D-3D-3D)

**更新**：你需要，`grep`因为可以有其他常量：

```
module Foo
  PI = 3.14
  ...
end 
```

你可能不需要它们。

# php - 如何创建一个新的页面/数据库条目，然后将该新的“页面 id”传递给另一个页面？

> ID：11505843
> 
> 赞同：0
> 
> 时间：2012-07-16T13:54:33.147
> 
> 标签：php, mysql, forms

我知道如何在页面之间传递现有的变量值。但是如何设计一个页面，将新条目添加到 mySQL 数据库，然后将新创建的 page_id*（这就是我在我的数据库中调用它）的值检索到另一个页面？

*page_id 是我的数据库表中的“自动增量”/整数列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:57:28.147

如果您在数据库上运行`$db->insert_id()`或运行`mysql_insert_id()`，则返回最后一个（插入）查询的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:56:47.953

[`PDO::lastInsertId()`](http://php.net/manual/en/pdo.lastinsertid.php)在执行 INSERT 语句以检索自动增量列的新生成值后调用。

如果您使用的是 mysqli，则函数为[`mysqli_insert_id()`](http://php.net/manual/en/mysqli.insert-id.php).

如果你使用 ext/mysql，函数是[`mysql_insert_id()`](http://php.net/manual/en/function.mysql-insert-id.php).

# android - 无法拦截自定义 MediaController 子类中的触摸事件

> ID：11505845
> 
> 赞同：0
> 
> 时间：2012-07-16T13:54:36.380
> 
> 标签：android, user-interface, mediacontroller

我正在尝试继承 MediaController 以使其完全可定制（我不采用[vidtry](https://github.com/commonsguy/vidtry)方法，因为我有一些无法更改的遗留代码）。

我的代码大致如下：

mc_layout.xml：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/top"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ...>

        // Some buttons

    </LinearLayout>

    <LinearLayout
        android:id="@+id/bottom"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ... >

        // Some buttons

    </LinearLayout> 
```

mc_subclass.java：

```
public class MCSubclass extends MediaController {

private View mRoot;

GestureDetector mGestureDetector = new GestureDetector(getContext(), new SimpleOnGestureListener() {

    @Override
    public boolean onDown(MotionEvent e) {
     // Do something.
        return true;
    }

    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {
       // Do something.
        return true;
    }

    @Override
    public boolean onDoubleTap(MotionEvent e) {
        // Do something.
        return false;
    }
});

public MCSubclass(final Context context) {
    super(context);
}

public boolean onTouchEvent(final MotionEvent event) {
// NEVER CALLED!
    return mGestureDetector.onTouchEvent(event);
}

public final void setAnchorView(final View view) {
    super.setAnchorView(view);
    FrameLayout.LayoutParams frameParams = new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.MATCH_PARENT,
            ViewGroup.LayoutParams.MATCH_PARENT
    );

    removeAllViews();
    View v = makeControllerView();
    addView(v, frameParams);
}

private View makeControllerView() {
    LayoutInflater inflate = (LayoutInflater) getContext().getSystemService(
        Context.LAYOUT_INFLATER_SERVICE);

    mRoot = inflate.inflate(R.layout.mc_layout, null);
    initControllerView(mRoot);
    return mRoot;
}

private void initControllerView(View v) {
    mPlayButton = (ImageButton) v.findViewById(R.id.playBtn);
    if (mPlayButton != null) {
        mPlayButton.requestFocus();
        mPlayButton.setOnClickListener(mOnClickListener);
    }
// Init other views...
} 
```

}

现在，我看到了所有控件，并且它们都响应了它们的单击/触摸操作，但是当我单击/触摸 MC 窗口而不是调用覆盖的 onTouchEvent 时，正如我所期望的那样，装饰窗口的 MediaController 的 onTouch 被调用了在调用堆栈中看到：

```
MediaController$1.onTouch(View, MotionEvent) line: 149  
PhoneWindow$DecorView(View).dispatchTouchEvent(MotionEvent) line: 3762  
PhoneWindow$DecorView(ViewGroup).dispatchTouchEvent(MotionEvent) line: 897  
PhoneWindow$DecorView.dispatchTouchEvent(MotionEvent) line: 1862    
ViewRoot.handleMessage(Message) line: 1809  
ViewRoot(Handler).dispatchMessage(Message) line: 99 
Looper.loop() line: 123 
```

问题是我需要更换装饰窗口触摸监听器还是有更好的方法而我错过了什么？

ps我正在使用lv。9 API。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:29:52.053

我找到了！问题在于使用 FrameLayout，它只能显示单个项目，并且其大小是最大子项的大小。所以在我的情况下，它还不够大，无法像我预期的那样覆盖整个屏幕。结果，装饰窗口最终处理了非常有意义的触摸事件。

无论如何，工作布局现在看起来像：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/top"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        ...>

        // Some buttons

    </LinearLayout>

    <LinearLayout
        android:id="@+id/bottom"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        ... >

        // Some buttons

    </LinearLayout>
    ....
</RelativeLayout> 
```

希望有一天这对某人有所帮助:)

# mysql - MAMP MySQL 似乎运行非常缓慢

> ID：11505847
> 
> 赞同：3
> 
> 时间：2012-07-16T13:54:47.917
> 
> 标签：mysql, performance, wamp, mamp

自从我导入了一个相当大的数据库以来，MySQL 似乎运行得非常缓慢，有时我的本地站点只是坐在那里加载和加载，并且永远不会显示错误。在 chrome 的状态栏中，它只是说“发送请求...”我所有的仅 HTML 站点都会立即加载，但是任何必须访问数据库的内容都不会加载。这个问题似乎是随机发生的。我可以在我的本地站点上工作大约 30 分钟，然后 MySQL 突然决定对付我。我认为这是一个内存问题，但老实说，我不知道是什么原因造成的。有人有什么想法可以尝试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:51:30.200

首先，尝试安装一些工具来监控您的一般内存和 CPU 使用情况：

*   OS X 包含一个名为*Activity Monitor*的实用程序，它是 unix`top`命令的更直观版本，并包含一些简单的历史图表。如果您在计算机运行缓慢时查看活动监视器，您可以单击列标题对其进行排序（按“CPU %”或“Real mem”降序排序可能会识别出活动的罪魁祸首）。

*   还有一些更微妙的监控工具，例如[Menu Meters](http://www.ragingmenace.com/software/menumeters/)，其中包括一组有用的 Menubar Extras。菜单栏附加功能实时更新，因此您可以配置感兴趣的信息，并且在资源不足时也可以为您提供一些提示。

如果您有周期性的减速，这也可能是您的计算机正在为虚拟内存分配/删除交换文件..或将活动内存交换到磁盘时。上述任何一个实用程序都应该给你一些关于交换分配/使用的提示，以及该分配是否正在快速变化。

然后，看看一些 MySQL 特定的用法：

*   在 MySQL 中启用[慢查询日志；](http://dev.mysql.com/doc/refman/5.5/en/slow-query-log.html)它将帮助您找到不是最佳的查询

*   当速度变慢时，尝试使用`mysql`shell 查看当前正在运行的查询：

    ```
     show processlist 
    ```

*   您还可以安装一个控制台实用程序实用[`mytop`程序](http://jeremy.zawodny.com/mysql/mytop/)，它可以方便地监视 MySQL 进程列表（它会自动刷新，就像 unix 一样`top`）。我相信您也可以使用[MySQL Workbench](http://www.mysql.com/downloads/workbench/)从更闪亮的 GUI 进行类似的管理监控，但我最近没有使用过。

希望以上内容能给您一些想法，以帮助您找出一般问题。一旦您可以找出发生减速的原因（资源不足、缺少索引、错误查询等），您就可以采取适当的步骤进行纠正。

[O'Reilly 高性能 MySQL](http://shop.oreilly.com/product/0636920022343.do)书也是一本内容丰富的读物 :) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:58:03.183

可能会出现很多问题：

1.  你有锁（在应用程序验证这一点很慢时，在控制台中运行“show innodb status \G”）。
2.  您可能会内存不足，并且您的机器可能正在交换（如果 unix 使用 top 或 sar 进行验证）。
3.  您可能有需要很长时间才能执行的索引/查询，要验证这一点，您可以检查慢查询日志： [http ://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html](http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html)

这些只是可能影响性能的一小部分，但可能是最常见的一些。如果这没有帮助，您需要为您的问题添加更多详细信息。

# javascript - ('ontouchstart' in window) 返回 true 但没有触摸事件

> ID：11505849
> 
> 赞同：2
> 
> 时间：2012-07-16T13:55:04.587
> 
> 标签：javascript, html, jquery, cordova, dom-events

我正在尝试编写可以在浏览器中运行或作为 phonegap 应用程序运行的代码。我需要做的一件事是确定我是否处于支持触摸事件的环境中。

我目前的问题是我的 Chrome (20.0.01132.47 m) 返回`true`但`('ontouchstart' in window)`它不会触发触摸事件。

当我打开开发者工具设置对话框（开发者工具右下角的齿轮图标）。我可以选择“模拟触摸事件”。当我选中此选项时，浏览器会触发触摸事件。但是当它未被选中时，它不会触发事件，但我使用的检测仍然表明触摸事件可用。

我可以从脚本中判断是否启用了“模拟触摸事件”？

基于 JQuery 的答案很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:01:09.617

> 我可以从脚本中判断是否启用了“模拟触摸事件”吗？

尝试检查不止一根手指；-)

也许这有帮助？

```
window.addEventListener('touchstart', function(event) {
    var emulate = event.targetTouches.length == 2;
    alert(emulate ? true : false);
}, false); 
```

* * *

顺便说一句： 除非您**关闭**了开发人员工具栏，否则会`'ontouchstart' in window`导致`false`(chrome v21.0.1180.60) 。

 **### [小提琴](http://jsfiddle.net/5Z8zV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T05:34:01.923

js的最佳方法：

```
function is_touch_device() {
    return 'ontouchstart' in window || navigator.maxTouchPoints;
}
console.log(is_touch_device()) 
```**

# php - PHP PBKDF2 密码哈希码

> ID：11505850
> 
> 赞同：1
> 
> 时间：2012-07-16T13:55:05.580
> 
> 标签：php, passwords

我刚开始使用 pbkdf2。

我在这里找到了这个代码：http: [//crackstation.net/hashing-security.htm#phpsourcecode](http://crackstation.net/hashing-security.htm#phpsourcecode)这是免费的，但我的问题是：

将 pbkdf2 密码存储在 db 中的语法是什么？

我的意思是对于 md5，您只需键入 md5($_POST['Pass']) 就可以了。

用这种方法是怎么做到的？我是否在我的页面中包含代码并以某种方式调用它？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-16T14:00:20.103

pbkdf2 基本上与 md5 相同，因此要散列密码，您将：

```
$encoded_password=create_hash($_POST['Pass']); 
```

# c++ - 从模板参数类型推导出函数模板参数

> ID：11505852
> 
> 赞同：5
> 
> 时间：2012-07-16T13:55:15.693
> 
> 标签：c++, templates

我目前正在尝试编写一个函数，它将任何类型的 STL 数组作为其参数之一。很明显的写法是：

```
template<typename T, int count>
void setArrayBufferData(GLenum usage, const std::array<T, count>& data) {
  setArrayBufferData(usage, data.data(), sizeof(T) * count);
} 
```

这是另一个重载，它仅供参考

```
void setArrayBufferData(GLenum usage, void* data, int size) {
  glBufferData(GL_ARRAY_BUFFER, size, data, usage);
} 
```

函数定义编译得很好。但是，当我尝试调用它时

```
std::array<int, 4> data;
setArrayBufferData(GL_STATIC_DRAW, data); 
```

我收到“调用‘setArrayBufferData’没有匹配的函数”错误消息。我知道如果我在调用中指定了模板参数，它会起作用，但我希望调用推断它们。我已经尝试研究模板模板参数，一个更通用的声明，然后是一个 std::array 专业化，以及我能想到的所有其他语法变体，但我似乎无法找到一种方法来获得我正在寻找的东西为了。有没有可能，如果有，需要做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T14:05:33.033

```
template<typename T, int count>
void setArrayBufferData(GLenum usage, const std::array<T, count>& data) 
```

不正确，因为 std::array 是`template<typename T, size_t N> struct array`. 第二个参数必须是类型`size_t`，不是`int`。

此外，data.data() 返回 const T*，因为 data 是对 std::array 的 const 引用，因此，尝试使用`setArrayBufferData(GLenum usage, const void* data, int size)`或调用它`setArrayBufferData(usage, const_cast<T*>(data.data()), sizeof(T) * count);`

```
#include <array>

void function(const void* ptr, size_t bytes)
{
}

template<typename T, size_t count>
void function(const std::array<T, count>& array)
{
   function(array.data(), sizeof(T) * count);
}

int main()
{
   std::array<int, 4> array;
   function(array);
} 
```

这个例子工作正常。[http://liveworkspace.org/code/2a5af492e1f4229afdd0224171854d1c](http://liveworkspace.org/code/2a5af492e1f4229afdd0224171854d1c)

# rspec - Capybara如何从http重定向到https？

> ID：11505856
> 
> 赞同：1
> 
> 时间：2012-07-16T13:55:31.177
> 
> 标签：rspec, capybara

我尝试找到与 Capybara 进行检查的方法，当用户访问任何页面时，该协议已更改：（在 app/controllers/application.rb 中，我执行重定向到 https 而不是 http ）如何检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:04:20.837

尝试这个：

```
current_url.should match /^https:/ 
```

# c# - 在 Visual Studio ASP.NET 解决方案中禁用 Resharper 本地化检查

> ID：11505861
> 
> 赞同：12
> 
> 时间：2012-07-16T13:55:39.467
> 
> 标签：c#, asp.net, visual-studio-2010, localization, resharper

我在 Visual Studio 中有一个大型网站解决方案，由一个 ASP.NET 网站项目和许多类库项目组成。我正在寻找一种方法：

1.  完全禁用 ReSharper 本地化，或者；
2.  强制“英语”作为默认值，并且只有语言

该解决方案是我们组织的内部应用程序，被本地化的可能性为零。同时，我使用`StyleCop`and`ReSharper`进行代码样式管理，并且厌倦了被“字符串可以/应该本地化”警告等等。我可以在 StyleCop 和 Resharper 设置中关闭一些警告，但是我会而只是将英语指定为唯一的语言等。

我认为`AssemblyInfo.cs`每个类库项目的文件中都有一种方法可以仅指定英语等，但似乎无法找到在线方式，所以我可能不在那儿。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-16T14:02:42.617

至少在 Resharper 方面，我在事后找到了答案，并认为它可能会帮助其他人。

只需选择每个项目并按 F4（或打开属性窗口）。有一个选项 for `Localizable`with options for`Default`和。`Yes``No`

选择`No`，你很高兴。Resharper 将尊重这一点并停止检查每个字符串等。

![Resharper 本地化选项](../Images/83eb1cef5e7c24dd67672ace22275cdd.png)

# twitter - Twitter 集成：已设置用户密钥/密钥对

> ID：11505862
> 
> 赞同：11
> 
> 时间：2012-07-16T13:55:44.600
> 
> 标签：twitter, key, integration, twitter4j

尝试使用[twitter4j](http://twitter4j.org/en/index.html) lib 将我的 webapp 与 Twitter 集成。
我已经在 twitter 网站上注册了我的应用程序并获得了`Consumer key`价值`Consumer secret`。
没什么特别的，标准`OAuth`步骤。

**代码：**

```
public class TwitterService {
    private final String CONSUMER_KEY = "xxx";
    private final String CONSUMER_SECRET = "yyy";

    public String fav() {
        Twitter twitter = TwitterFactory.getSingleton();
        twitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
... 
```

**例外：**

```
Caused by: java.lang.IllegalStateException: consumer key/secret pair already set. 
```

我没有更多的配置`key`和`secret`，任何`.properties`或其他文件。

**编辑：**

注释行`twitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);`导致异常：

```
java.lang.IllegalStateException: OAuth consumer key/secret combination not supplied 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-24T23:09:10.717

查看代码和文档，似乎`Twitter`不建议您使用实例化实例的方法。如果您想以编程方式提供配置（而不是使用属性），看起来您需要`Configuration`向`TwitterFactory`.

```
...
ConfigurationBuilder builder = new ConfigurationBuilder();
builder.setOAuthConsumerKey(CONSUMER_KEY);
builder.setOAuthConsumerSecret(CONSUMER_SECRET);
配置配置 = builder.build();
TwitterFactory 工厂 = 新 TwitterFactory（配置）；
Twitter twitter = factory.getInstance();
...

```

未提供配置的工厂提供的单例默认使用配置`Authorization`支持的实现`PropertyConfiguration`。如果没有属性文件，它*看起来*不应该实例化`OAuthAuthorization`身份验证，这会导致您看到的异常。但是`PropertyConfiguration`会在整个文件中搜索`CLASSPATH`适当的属性文件，所以也许你忽略了一个。您可以在获取`Twitter`实例后立即尝试记录密钥和秘密以查看它们*的*设置：

```
System.out.println("key:" + twitter.getConfiguration().getOAuthConsumerKey());
System.out.println("秘密：" + twitter.getConfiguration().getOAuthConsumerSecret());

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:46:09.527

我的预感是您正在设置私有最终变量，然后 twitter.setOAuthConsumer() 正在尝试做同样的事情。您应该只需要其中一个。您是否尝试过注释掉 twitter.setOAuthConsumer() 行？

[文档](http://twitter4j.org/en/code-examples.html#oauth)解释了设置这些的“首选”方式。

# asp.net-mvc-routing - ASP.NET Web API 路由问题

> ID：11505864
> 
> 赞同：0
> 
> 时间：2012-07-16T13:55:46.343
> 
> 标签：asp.net-mvc-routing, asp.net-mvc-4, asp.net-web-api

这是我修改的默认路由器：

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}/{addParam}",
    defaults: new { id = RouteParameter.Optional, addParam = RouteParameter.Optional }
); 
```

这是控制器：

```
public class ReviewCycleController : ApiController
{

    private MrdSearchServices _mrss = new MrdSearchServices();

    // GET api/reviewcycle
    public IQueryable<MrdReviewCycle> GetReviewCycles()
    {

        return _mrss.GetAllReviewCycles();
    }

    // GET api/reviewcycle/Active
    public MrdReviewCycle GetReviewCycle(String is_active)
    {
        if (!is_active.ToLower().Equals("active"))
        {
            string url = new Uri(Request.RequestUri, "/api/ReviewCycle/Active").ToString();
            var resp = new HttpResponseMessage(HttpStatusCode.NotFound)
            {
                Content = new StringContent(string.Format("No Review Cycle with State of '{0}' could be found. The only acceptable value is 'Active'. Request should be made to {1}.", is_active, url)),
                ReasonPhrase = "Review Cycle Not Found!"
            };
            throw new HttpResponseException(resp);
        }

        return _mrss.GetActiveReviewCycle();
    }
} 
```

但是当我打电话时：`http://localhost:2515/api/ReviewCycle/asdf`或者`http://localhost:2515/api/ReviewCycle`我没有得到预期的结果。我得到的都是`return _mrss.GetActiveReviewCycle();`.

我到底做错了什么？

谢谢埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:21:01.970

```
public MrdReviewCycle GetReviewCycle(String is_active) 
```

应该是：

```
public MrdReviewCycle GetReviewCycle(String addParam) 
```

另请注意，路由中只能有 1 个可选参数，并且此参数必须是最后一个。在您的路线定义中，您有 2 个可选参数 (`{id}`和`{addParam}`)，这是不可能的。

调用 url 也应该是（一旦你将`{id}`参数设为非可选）：

```
http://localhost:2515/api/ReviewCycle/123/active 
```

我在您的代码中看到的另一个潜在问题是，在您的路由中没有`{action}`标记意味着您应该使用标准 HTTP 动词作为操作名称而不是`GetReviewCycle`. 应该是`Get`，并且由于您在`ReviewCycle`控制器上使用了 GET 动词，因此将调用此操作。

# php - mysql 真正的转义字符串不返回任何内容

> ID：11505868
> 
> 赞同：1
> 
> 时间：2012-07-16T13:55:53.333
> 
> 标签：php, mysql

有人可以解释为什么这个简单的表格不起作用吗？

问题是当我使用`mysql_real_escape_string()`结果时什么都没有，当我删除它时它可以完美运行，你能看看这里有什么问题吗？

这是完整的简单代码，

```
<?php

// Loop the post fields
$postFields = array('username', 'password', 'checkSubmission');
$postArray = array();
foreach($postFields as $postVal){
    $postArray[$postVal] = mysql_real_escape_string($_POST[$postVal]);
}
print_r($postArray);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Signin</title>
<head>
</head>
<body><? echo $error;?>
<form action="<?php echo $_SERVER['PHP_SELF']?>" method="post" id="signinForm">
    Username: <input type="text" name="username" value="" />
    Password: <input type="password" name="password" value="" />
    <input type="hidden" name="checkSubmission" value="1" />
    <input type="submit" name="Submit" value="Signin" />
</form>
</body>
</html> 
```

编辑：

我使用`print_r()`时是空的`mysql_real_escape_string()`

```
Array ( [username] => [password] => [checkSubmission] => ) 
```

这就是`print_r()`没有`mysql_real_escape_string()`

```
Array ( [username] => thre[password] => werr[checkSubmission] => 1) 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T14:04:22.890

`mysql_real_escape_string()`需要一个活动的数据库连接。

从 php 手册：

> 在使用 mysql_real_escape_string() 之前需要 MySQL 连接，否则会生成 E_WARNING 级别的错误，并返回 FALSE。如果未定义 link_identifier，则使用最后一个 MySQL 连接。

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

# facebook - 无法发布用户成就

> ID：11505869
> 
> 赞同：0
> 
> 时间：2012-07-16T13:55:58.090
> 
> 标签：facebook, facebook-graph-api

这已经让我发疯了很长一段时间，但显然我不是唯一一个。当我尝试为用户发布成就时，我不断收到需要扩展权限：publish_actions 错误。我在 Java 中使用 RestFB 发布到

```
https://graph.facebook.com/USER_ID/achievements?achievement=YOUR_ACHIEVEMENT_URL&access_token=APP_ACCESS_TOKEN 
```

我已经为应用程序设置了请求的权限。

我已经注册了成就，我使用的 url 就是它所在的位置。我已经检查过我使用了正确的令牌和 url 等。

我检查了扩展的身份验证对话是否已启用。

我已经检查过该应用程序是游戏类型。

我可能应该指出，我正在尝试发布到测试用户帐户。我尝试删除并重新添加测试用户，但仍然无法正常工作。

我还看到一些关于为成就创建工作聚合页面的内容。当我尝试创建一个聚合页面时，我似乎无法在“要显示的数据”对话框中选择游戏成就。我试过发布，但没有奏效。当我尝试预览聚合时，它似乎不起作用。

# javascript - Button with multi-line label bringing troubles with column layout

> ID：11505870
> 
> 赞同：1
> 
> 时间：2012-07-16T13:55:59.327
> 
> 标签：javascript, css, extjs4, extjs

I'm creating a dynamic panel with buttons. De buttons have an image 'big' image and a label. For longer labels I want multi-line labels. Using css you can force multi-line bij setting `white-space: normal`. But then the button on the next line snaps to the end of the line.

I've set up 2 jsfiddle's

One with the `.launchpad-button .x-btn-inner` white-space commented out.

[jsfiddle 1](http://jsfiddle.net/mAgfU/119/)

looks fine only I want the full text (so multi-line)

[jsfiddle 2](http://jsfiddle.net/mAgfU/118/)

looks not so fine.. how should I fix this?

**Edit:**

Ow snap! It works using ScottS' solution but when my window resizes or there isn't enough space I get this issue: The new line (clear: left) is in the wrong place

![new line in the wrong place](../Images/a245e7afec3b765c5bb16e123d478d37.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:54:05.347

如果每个只有三列宽，那么在你的 CSS 中的`cls: 'new-row'`每 4 个项目中添加一个 ...`xtype: 'container'`

```
.new-row {
    clear: left;
} 
```

...[解决问题](http://jsfiddle.net/mAgfU/121/)。一个纯 css3（所以[只能在现代浏览器中工作](http://jsfiddle.net/mAgfU/122/)）不需要`new-row`添加到脚本中的额外类，而只需要这个 css 来选择每 4 个元素：

```
.x-container:nth-of-type(4n) {
    clear: left;
} 
```

# javascript - Method to store data until browser is closed

> ID：11505872
> 
> 赞同：5
> 
> 时间：2012-07-16T13:56:11.133
> 
> 标签：javascript, session

is there any method (using JavaScript) how to store session until browser is closed? I wanted to use session cookie - when *expires* is not set the cookie is supposed to expire when browser is closed. But for any practical purpose this is not usable because Firefox with *Show my windows and tabs from last time* option does not clear session cookies even after browser is closed.

I also cannot use *onunload* or *onbeforeunload* because I need to remember the data until the browser is closed even when users reloads or goes to some other page and then comes back.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T14:25:53.693

您可能对[`sessionStorage`](https://developer.mozilla.org/en/DOM/Storage),`localStorage`鲜为人知的表弟感兴趣。它应该完全满足您的需要——在会话中存储变量并在会话结束时清除它们。

# wpf - MouseDown event doesn't fire on LibraryBarItem

> ID：11505875
> 
> 赞同：0
> 
> 时间：2012-07-16T13:56:26.960
> 
> 标签：wpf, events, pixelsense

I'm trying to bind events to my LibraryBarItem, however when I finished like this, the MouseDown event will never be fired, can anybody tell me what happend?

```
LibraryBar folderContainer = new LibraryBar();

foreach (Image folder in states.Preparation.folders)
{
    LibraryBarItem folderItem = new LibraryBarItem();
    folderItem.MouseDown += clickFolder;
    folderItem.Content = folder;
    folderItem.Name = folder.Name;
    folderContainer.Items.Add(folderItem);
}    

static public void clickFolder(object sender, MouseButtonEventArgs e)
{
    MessageBox.Show("Come!");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T01:47:15.220

看来@Xaade 是对的，我测试发现LibraryItem 本身对click 事件做了一些事情，并且在使用MouseDoubleClick 时，它工作得很好；

# c++ - 与 TCP 套接字的非常奇怪的断开连接

> ID：11505877
> 
> 赞同：9
> 
> 时间：2012-07-16T13:56:33.043
> 
> 标签：c++, windows, sockets, tcp

简而言之：服务器调用 ::send() 成功，但数据没有通过电缆输出。客户端在几秒钟后发送它的退出命令，因为它没有收到任何东西并且该命令被服务器正确接收。

详细说明：服务器每 1/10 秒向其客户端发送一条命令，每秒发送一次心跳。客户端只为心跳返回一个 ack。我们修改了服务器应用程序以记录发送和接收的每个命令，并且我们使用 Wireshark 记录了 pc 的流量。我们可以将每个记录的命令与一个 TCP 数据包匹配，直到问题出现。问题一次只影响一个客户端。数据继续与其他客户端正常流动。连接通常会在遇到麻烦前几分钟工作。从客户端启动到关闭（即几天），连接应该可以工作。

出现问题时，日志文件包含预期的命令，但 Wireshark 转储中不包含任何内容。下图显示了一个客户端的流量。红线是流量停止时，但服务器继续调用 ::send() 成功。![问题出现时的 TCP 流量](../Images/bbcdcc3a0e067ceb7ef65f0c276c28a1.png)大约 4 秒后，客户端超时并关闭连接。它发送一个退出命令，服务器正常接收。

更让我困惑的是包含退出命令的数据包没有被 TCP ACK 数据包确认。就好像 TCP 连接在发送端完全阻塞了一样。重传是这种堵塞的结果，但即使是建立新连接的 TCP SYN 也没有得到正确处理，也没有得到简单的 TCP ACK。

大约 30 秒后，问题消失，SYN 数据包最终被接受，通信继续使用新连接。

这已在各种 Windows 版本上进行了测试。在测试期间，使用了远程桌面会话，并且从未因同样的问题而断开连接。它保持连接数小时没有任何问题。当客户端通过无线网桥时，问题更加频繁。我们在无线端点的两侧都使用了 Wireshark，我们没有看到可以解释更高断开率的重传或丢包。

当许多客户端连接到同一个网桥时，它们不会同时发生故障。一次只有一个。所以无线噪音似乎不是一个解释。我们可以在 Wireshark 转储中看到一些重传，但通信照常继续，在问题发生之前没有重传。接入点连接到服务器的交换机。客户端电脑和服务器电脑不使用无线网卡。

一直以来，我们一直认为偶尔断线是网络造成的，但现在越来越多的安装是无线的，而且断线频繁到给用户带来困扰。

我们尝试了启用和不启用 Windows 防火墙。即使防火墙被禁用，我们也添加了端口例外。客户端或服务器都没有防病毒软件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T04:25:06.760

[http://tldp.org/HOWTO/html_single/TCP-Keepalive-HOWTO/#usingkeepalive](http://tldp.org/HOWTO/html_single/TCP-Keepalive-HOWTO/#usingkeepalive)可能会有所帮助。

# emacs - 在 dired 缓冲区中获取 ido

> ID：11505878
> 
> 赞同：5
> 
> 时间：2012-07-16T13:56:33.847
> 
> 标签：emacs, dired, ido

我经常使用`dired-mode`，最近开始使用`ido`：

```
(ido-mode 1); enable ido-mode
(setq ido-enable-flex-matching t); flexibly match names via fuzzy matching
(setq ido-everywhere t); use ido-mode everywhere, in buffers and for finding files
(setq ido-use-filename-at-point 'guess); for find-file-at-point
(setq ido-use-url-at-point t); look for URLs at point
(setq ffap-require-prefix t); get find-file-at-point with C-u C-x C-f 
```

当我在 dired 缓冲区中复制文件（带有`C`）时，我仍然必须使用“标准方式”来提供文件复制到的新位置。这意味着，我必须使用标准的 TAB 补全，但没有`ido`-completion。这同样适用于`R`移动文件等。因此我想知道是否有可能`ido`也作用于`C`或`R`在 dired 缓冲区中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T15:39:09.547

看起来我遇到了同样的问题。一些调查表明，我们需要覆盖`read-file-name-function`默认情况下调用的变量`read-file-name-function-default`。但是，查看源代码`ido-everywhere`（这是一个次要模式），它为我们做到了这一点。

**解决方案：**

而不是这样做`(setq ido-everywhere t)`，将其替换为：

`(ido-everywhere t)`

这为我修复了它，导致`ido-read-file-name`在您使用`C`或类似时在 dired 缓冲区中被调用。

**另外的选择：**

您也可以考虑以下增强版`ido-everywhere`：

[https://github.com/DarwinAwardWinner/ido-ubiquitous](https://github.com/DarwinAwardWinner/ido-ubiquitous)

```
;;; Commentary:

;; You may have seen the `ido-everywhere' variable in ido.el and got
;; excited that you could use ido completion for everything. Then you
;; were probably disappointed when you realized that it only applied
;; to *file names* and nothing else. Well, ido-ubiquitous is here to
;; fulfill the original promise and let you use ido completion for
;; (almost) any command that uses `completing-read' to offer you a
;; choice of several alternatives. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T17:28:56.903

我发现`(put 'dired-do-rename 'ido 'find-file)`R 键可以正常工作，如果您需要停在您只需按下`C-j`而不是完成文件名的路径上。

# radio-button - 检索单个单选按钮的值

> ID：11505882
> 
> 赞同：0
> 
> 时间：2012-07-16T13:56:47.657
> 
> 标签：radio-button

我正在尝试使用 javascript 从表单元素中提取选中的单选按钮的值。表单中单选按钮的数量不是固定的，因为它是在页面重新加载时动态检索的。 **问题：**当表单中有多个单选按钮时，我可以使用循环获取选中的单选按钮的值：

```
for (var i=0; i < document.form2.buddy_list.length; i++)
{
if (document.form2.buddy_list[i].checked)
{
selected_buddy_intn = document.form2.buddy_list[i].value;
}
} 
```

但是，当表单内只有一个单选按钮的情况下，在这种情况下，上述技术不起作用。任何建议表示赞赏

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:02:39.540

可能不满足循环条件，这就是不进行迭代的原因。试试这一行，而不是你的第一行：`for (var i=0; i <= document.form2.buddy_list.length; i++)`. 您可以使用 Mozilla FireBug 或 Opera Dragonfly 来调试 javascript 并查看问题所在

# php - 实现“通用”PHP（mysql）获取行方法（以及关联和对象）

> ID：11505891
> 
> 赞同：-2
> 
> 时间：2012-07-16T13:57:08.250
> 
> 标签：php, mysql, while-loop, fetch

在多次尝试为我的想法找到一个**独特的**解决方案之后，我没有机会在这里发布这个问题，希望能找到可以启发我的人（如果适用）。

我正在开发一个具有多种方法的“功能齐全”的 PHP 类，因此我将能够做我将来愿意做的事情（也就是说，有点个人框架）。

我被困在`fetchRow()`课堂上的方法中。我想使用此方法从查询中获取行并且我希望此方法自动形成正确的数据结构。

现在，假设我有这样的查询：

```
$query = mysql_query("SELECT name, surname FROM people", $dbHandle); 
```

我想得到这个结果（如果适用）：

```
/*
 * var_dump example results after launching a while statement with
 * mysql_fetch_row.
 *
 * 2 fields (name,surname), 2 "master" arrays with corresponding values
 *
 */

array
 0 = array( ...names... )
 1 = array( ...surnames... ) 
```

现在，我尝试了几个原生 PHP 函数、用户定义函数等，没有目标。

也许在这些尝试之后我疯了，也许这是不可能的，或者也许我看不到一个可能的简单方法来做到这一点。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:02:56.570

好吧，您只需执行以下操作：

```
$data = array();
while (false !== ($row = mysql_fetch_array($result, MYSQL_NUM)) {
   foreach($row as $key => $value) {
      if(!isset($data[$key]) {
         $data[$key] = array();
      }

      $data[$key][] = $value;
   }
} 
```

那就是说...

1.  只需使用 Doctrine - 完整的 ORM 或 DBAL。
2.  不要使用`ext/mysql`use`PDO`或`Mysqli`.

# php - 当我执行缓存刷新 (ctrl+f5) 时，我的会话终止

> ID：11505897
> 
> 赞同：0
> 
> 时间：2012-07-16T13:57:16.857
> 
> 标签：php, session

我用登录系统构建了一个功能，但是当我按`CTRL`+时，`F5`我的会话为用户而死。我可以更改`CTRL`+`F5`设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:00:08.123

Ctrl+F5 是没有“数据”的刷新。您可以尝试使用 cookie 进行会话或尝试更改会话的“php.ini”配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:02:00.300

您或许应该尝试使用 cookie 来管理您的会话。我还发现了这个描述`Ctrl`+`F5`对浏览器的影响的问题：

[浏览器的“F5”和“Ctrl + F5”刷新会产生什么请求？](https://stackoverflow.com/questions/385367/what-requests-do-browsers-f5-and-ctrl-f5-refreshes-generate)

# asp.net-mvc-3 - ServiceStack MVC 自动注册路由

> ID：11505902
> 
> 赞同：2
> 
> 时间：2012-07-16T13:57:38.240
> 
> 标签：asp.net-mvc-3, servicestack

我似乎无法让我的服务自动路由，MetaData 显示所有可用的类和服务，但是我应该去 /api/btbCustomerEvents 我得到未处理的路由错误。

我试过这个：

```
[Alias("btbCustomerEvents")]
[RestService("/btbCustomerEvents")]
public class Btbcustomerevent : BaseModel 
```

我的 AppHost 看起来像这样：

```
public class AppHost: AppHostBase
{       
    public AppHost() : base("Energy System API", typeof(DepartmentService).Assembly) { }

    public override void Configure(Funq.Container container)
    {
        //Set JSON web services to return idiomatic JSON camelCase properties
        ServiceStack.Text.JsConfig.EmitCamelCaseNames = true;

        //register all routes
        Routes
            .Add<Department>("/Departments")
            .Add<Department>("/Departments/{Id}")
            .Add<Paymentmethod>("/PaymentMethods")
            .Add<Paymentmethod>("/PaymentMethods/{Id}")
            .Add<MyExampleModel>("/MyExampleModel")
            .Add<MyExampleModel>("/MyExampleModel/{Id}");

        //Change the default ServiceStack configuration
        SetConfig(new EndpointHostConfig{ DebugMode = true, });

        container.Register<ICacheClient>(new MemoryCacheClient());
        container.Register<ISessionFactory>(c => 
            new SessionFactory(c.Resolve<ICacheClient>()));

        ControllerBuilder.Current.SetControllerFactory(new FunqControllerFactory(container));
    }

    public static void Start()
    {
        new AppHost().Init();
    } 
```

我真的不想为所有东西添加路由，我已经创建了从数据库创建模型的 TT 文件，并且还自动添加了其余服务 / CRUD 样式，现在我不得不手动添加每一个似乎很可惜，和每条路线。

有人对此有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T18:51:17.187

是的，路由的自动注册已经内置在 ServiceStack 中。使用`Routes.AddFromAssembly()`扩展方法，它将为指定的程序集中的所有服务注册自定义路由（对于您有实现的所有动词），例如：

```
//    /{RequestDto}
//    /{RequestDto}/{Id} - if Id exists
Routes.AddFromAssembly(typeof(Department).Assembly); 
```

如果您有不同的启发式方法，请参阅[Routes.AddFromAssembly() 的实现](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/ServiceRoutesExtensions.cs#L26)，了解如何自动注册自己的路由。

# html - 设置页脚宽度

> ID：11505903
> 
> 赞同：0
> 
> 时间：2012-07-16T13:57:38.887
> 
> 标签：html, css, layout, footer

你好我有以下问题。我用宽度和高度嵌入了页脚。到目前为止，页脚还没有背景颜色。现在我认为让页脚延伸到整个宽度并赋予它背景颜色。

我的问题是，我不知道如何使页脚充满一种颜色，这种颜色很容易简单地说“repeat-x”该颜色。我是用我的背景做的`body`。我不能轻易地创建图像，因为主页的内容没有固定到一个高度。我也想知道如何实现这个例子的页脚将留在底部？

我找到了一个示例，当您在此页面上调整解决方案的大小时，您可以看到我的意思：

[http://razzi.me/tour](http://razzi.me/tour)

希望这能说明我想要达到的目标。如果有人可以帮助我，我将不胜感激。

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:09:45.093

我完全不知道您在代码中使用的布局，但如果您想要全角页脚和内容为 960px，您可以将布局设置为：

```
<body>
   <div id="header">

       <div class="wrapper">

       </div>

   </div>

   <div id="container" class="wrapper">

       //your container with 960px width

   </div>

   <div id="footer">

       <div class="wrapper">

       </div>

   </div>
</body>
<!-- I suggested to have a wrapper in header and footer so that
     your text or links or whatever you have could be in 960px width
     but your header and footer backgrounds spawns to full-width
--> 
```

和 CSS 将是一些东西：

```
body { width:100% }

#header, #footer { width:100% }

.wrapper { width:960px }

#footer { clear:both; height:100px; bottom:0; display:block; background-color:#555; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:11:07.760

如果你想让页脚背景颜色扩展到窗口的 100% 宽度，它必须移出你的 mainwrapper。就像是：

```
<div id="mainwrapper">
    stuff goes here
</div>
<div id="footerwrapper">
    <footer>
      Stuff goes here
    </footer>
</div> 
```

然后，在 CSS 中：

```
#mainwrapper {
    width: 960px;
    margin: 0 auto;
}

#footerwrapper {
    background-color: blue /* or whatever */;
}

footer {
    width: 960px;
    margin: 0 auto;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T14:11:51.940

要达到这种效果，您需要将页脚放在包装器之外。我通常使用这个[粘性页脚](http://ryanfait.com/sticky-footer/)。

**HTML**

```
<div class="wrapper">
    <div class="push"></div>
</div>
<div class="footer"></div 
```

**CSS**

```
* {
    margin: 0;
}
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto;
    margin: 0 auto -50px;
    width: 960px;
}
.footer, .push {
    height: 50px;
}

.footer {
    width: 100%;
    background: blue;
} 
```

JS 小提琴：http: [//jsfiddle.net/3KDYX/](http://jsfiddle.net/3KDYX/)

# python - sys.path 和模块 - Python3.2

> ID：11505905
> 
> 赞同：0
> 
> 时间：2012-07-16T13:57:42.087
> 
> 标签：python, python-3.x, paramiko

我编译了 Python 3.2 并尝试运行以下脚本：

```
#/opt/python3/bin/python3
import sys
sys.path.append('/usr/lib/python2.4/site-packages')
print(sys.path)
import os
import paramiko 
```

输出是：

```
['/home/web.script/scripts/radar_python', '/opt/python3/lib/python32.zip', '/opt/python3/lib/python3.2', '/opt/python3/lib/python3.2/plat-linux2', '/opt/python3/lib/python3.2/lib-dynload', '/opt/python3/lib/python3.2/site-packages', '/usr/lib/python2.4/site-packages']
Traceback (most recent call last):
  File "./check_log_radar2.py", line 6, in <module>
    import paramiko
ImportError: No module named paramiko 
```

ls 命令显示：

```
ls /usr/lib/python2.4/site-packages

Alacarte
cracklibmodule.so
dogtail
easy-install.pth
easy_install.py
easy_install.pyc
easy_install.pyo
elementtree
GMenuSimpleEditor
gmenu.so
iniparse
invest
libsvn
paramiko-1.7.5-py2.4.egg
paramiko-1.7.7.2-py2.4.egg
pirut
pkg_resources.py
pkg_resources.pyc
pkg_resources.pyo
pycrypto-2.6-py2.4-linux-x86_64.egg
rpmUtils
setroubleshoot
setuptools
setuptools-0.6c5-py2.4.egg-info
site.py
site.pyc
site.pyo
sos
svn
urlgrabber
yum 
```

如果 paramiko 模块在我的路径上，为什么会出现错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:31:07.873

简短的回答是 Python 在 python 路径目录中搜索名为 paramiko 的目录，其中包含一个`__init__.py`文件，或者一个`paramiko.py`文件。都不存在。

还有更多，看看这里[http://docs.python.org/tutorial/modules.html](http://docs.python.org/tutorial/modules.html)

另外，看看这个（封闭的）问题： [Paramiko 是否会被移植到 Python 3.x？](https://stackoverflow.com/questions/3973947/is-paramiko-going-to-be-ported-over-to-python-3-x)

以及这个线程[https://github.com/paramiko/paramiko/issues/16](https://github.com/paramiko/paramiko/issues/16)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:33:20.243

你的路径上没有 paramiko 模块，你的路径上有 paramiko 鸡蛋！setuptools 使一些魔法允许访问鸡蛋，但这仅适用于它实际安装的 python。如果你想让它工作您必须将包含模块的鸡蛋中的路径添加到您的 sys.path 中。但显然最好将 paramiko 安装到您的 pyton3 中或使用 virtualenv。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T21:20:51.030

正在向我们`ls`展示 Python 2.4 安装，但您的脚本正在运行 3.您的 Python 3 站点包中有什么？

# mysql - 如何在不过度锁定系统的情况下摆脱 M yISAM 表的 1GB 开销

> ID：11505907
> 
> 赞同：0
> 
> 时间：2012-07-16T13:57:58.740
> 
> 标签：mysql, optimization, myisam

我在其中一张表上完成了一些维护任务，现在它有 1GB 的开销。

由于表操作运行了几个小时（删除 40% 的记录，花了 4 个小时）我不想用 OPTIMIZE table 命令锁定数据库几个小时，所以我正在寻找如何处理这种开销并以最佳方式删除的替代方法方法。

表本身是 3GB，有 204 705 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:26:12.787

假设您的表上没有触发器，完成在线 OPTIMIZE 的一种简单方法是使用[pt-online-schema-change](http://www.percona.com/doc/percona-toolkit/2.1/pt-online-schema-change.html)重建表。既然您说这是一个 MyISAM 表，您只需将引擎设置为 MyISAM 即可完成重建而无需更改任何内容：

```
pt-online-schema-change --alter "ENGINE=MyISAM" D=your_schema,t=your_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:58:59.623

我能够通过执行以下操作的 6 分钟过程来解决此问题：

```
CREATE TABLE table_reduced LIKE table;
ALTER TABLE table_reduced DISABLE KEYS;

insert into table_reduced
SELECT 
    *
FROM
    table;

ALTER TABLE table_reduced ENABLE KEYS;

RENAME TABLE table TO table_old;
RENAME TABLE table_reduced TO table;

DROP TABLE `table_old`; 
```

# python - Python：将变量值放入新字典

> ID：11505910
> 
> 赞同：1
> 
> 时间：2012-07-16T13:58:04.113
> 
> 标签：python, dictionary

我正在寻找将 2 个变量的内容放入字典的解决方案。一个变量应该作为键，另一个作为值。

这是我的代码：

```
dom = parseString(data)
macro=dom.getElementsByTagName('macro')
for node in macro:
    d={}
    id_name=node.getElementsByTagName('id')[0].toxml()
    id_data=id_name.replace('<id>','').replace('</id>','')
    print (id_data)
    cl_name=node.getElementsByTagName('cl2')[0].toxml()
    cl_data=cl_name.replace('<cl2>','').replace('</cl2>','')
    print (cl_data) 
```

我想要一个以 id_data 作为键，以 cl_data 作为值的字典，而不会在追加时覆盖旧数据。我该怎么做呢？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:00:39.760

```
from collections import defaultdict

d=defaultdict(list)

dom = parseString(data)
macro=dom.getElementsByTagName('macro')
for node in macro:
    id_name=node.getElementsByTagName('id')[0].toxml()
    id_data=id_name.replace('<id>','').replace('</id>','')
    print (id_data)
    cl_name=node.getElementsByTagName('cl2')[0].toxml()
    cl_data=cl_name.replace('<cl2>','').replace('</cl2>','')
    print (cl_data)
    d[id_data].append(cl_data) 
```

的键`d`是各种`id_data`s，元素是列表，其中每个`id_data`找到的元素按顺序对应。当然，如果您可以确定所有`id_data`s 都是唯一的，则可以使用常规字典：

```
d={}
for node in macro:
    ...
    d[id_data]=cl_data 
```

This differs from your original code in that I pulled the dictionary constructor out of the loop (You don't want to replace your dictionary each time in the loop) and actually I actually insert the elements into the `dict` although I'm guessing you did that too, you just don't show it.

# javascript - 使用单个输入来设置 jQuery 中几个不同选项的值的方法

> ID：11505911
> 
> 赞同：1
> 
> 时间：2012-07-16T13:58:08.573
> 
> 标签：javascript, jquery

我会解释我的问题。

我有一个包含多个选项和一个（或多个）输入的选择。我希望这个（这些）输入用于为我的选项提供额外的价值。

因此，我希望通过单个输入为每个选项提供一个附加值，并将其保存在内存中（没有数据库 ^^）。

你明白吗 ？？任何想法 ？泰！

编辑 ：

例如 ：

```
<select>
    <option>1</option>
    <option>2</option>
    <option>3</option>
</select>
<input type="text" /> 
```

我选择了选项 1，并在我的输入中设置了“ok”。

我选择了选项 3，并在我的输入“测试”中进行了设置。

如果我重新选择选项 1，我发现我的价值“ok”。

编辑 2：输入将是我的选项的一种配置。每个选项可以有 1 个或多个输入。如果我有 80 个选项，一个输入可以有 80 个不同的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:14:19.787

使用此版本，您可以更改输入的值并将其保存。

您可以使用 data- 属性：

[例子](http://jsfiddle.net/48zdm/)

```
<select id="select">
  <option value="test1">1</option>
  <option value="test2">2</option>
  <option value="test3">3</option>
</select>
<input id="textinput" type="text" />​​​​​​​​​​​​​​​​​​​

<script>
$('#select').change(function(){
    $('#textinput').val($(this).find('option:selected').val());
});
$('#textinput').keyup(function(){
    $('#select option:selected').val(this.value);
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:08:44.063

```
<select>
  <option text="ok">1</option>
  <option text="hello">2</option>
  <option text="test">3</option>
</select>
<input type="text" />

$(function(){
  $('select').on('change', function(){
    $('input').val($('option:selected', this).attr('text'));
  });
}); 
```

**[这是一个有效的 JSFiddle](http://jsfiddle.net/Ohgodwhy/LV6vc/)**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-16T14:07:25.670

我相信您想使用选项的`value`or`label`属性，请在[Mozilla 开发人员网络文档`<select>`](https://developer.mozilla.org/en/HTML/Element/select#Examples)和[MDN 文档中`<option>`](https://developer.mozilla.org/en/HTML/Element/option)查看更多详细信息。

有关其使用示例，请参阅[使用 JavaScript 获取选项文本/值。](https://stackoverflow.com/questions/4641962/getting-an-option-text-value-with-javascript)

# asp.net - 信箱不可用。服务器响应为：5.7.1 无法为 abc@gmail.com 中继

> ID：11505914
> 
> 赞同：1
> 
> 时间：2012-07-16T13:58:20.783
> 
> 标签：asp.net, sendmail, smtpclient

我正在使用下面的代码；以下几点之一可能是错误的原因，但我不知道；

1-应用程序在开发机器上 2-当应用程序在本地主机上运行时，smtp ip 托管在服务器上

我收到此错误“邮箱不可用。服务器响应为：5.7.1 无法中继 mhtbusoum@gmail.com”；

```
 Dim message As New MailMessage
 message.From = New MailAddress(Strings.LCase("mhtbusoum@mysite.com"))
 message.To.Add("mhtbusoum@gmail.com")
 message.IsBodyHtml = True
 message.Priority = MailPriority.Normal
 message.Subject = ("Testing SmtpClient email sending")
 message.Body = ("It is to test the email sending without any password")
 Dim client As New SmtpClient("mailSending.actualSite.com", 25)
 client.UseDefaultCredentials = False
 client.Send(message) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:08:14.710

当使用**localhost**作为邮件服务器时，服务器将阻止任何不在 localhost 中托管的电子邮件地址。

要从其他服务器中继另一个电子邮件地址，您需要配置 IIS 服务器以授予权限。

请参阅[此帖子](http://codebetter.com/petervanooijen/2006/04/05/using-localhost-as-mailserver-5-7-1-unable-to-relay-for-xxx/)以配置中继权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T22:19:11.810

尝试这个..

找到 IIS6 管理器（我发现搜索 IIS 可能会返回 2 个结果）转到 SMTP 服务器属性，然后“访问”，然后按中继按钮。

然后你可以选择全部或只允许某些 ip 像 127.0.0.1

![SMTP 中继](../Images/4f2fb70e7c4099924f92e1ce9fe2f7de.png)

# javascript - 检索输入字段中最后输入的值

> ID：11505917
> 
> 赞同：0
> 
> 时间：2012-07-16T13:58:30.990
> 
> 标签：javascript, jquery, html, jquery-ui

我正在尝试在 javascript 中实现 HTML5 搜索输入的后备功能。

我使用Modermizr检测不支持该功能的浏览器，使用jQuery开发回退功能。

首先，我想将自动完成属性添加到输入中，但并非所有浏览器都支持这个属性（例如 Internet Explorer）。

然后我有了使用 jQuery-UI 自动完成小部件的想法，但您需要为其提供要显示的值。

我的问题是如何在能够使用 jQuery-UI 小部件显示它们之后检索输入中输入的最后一个值？

# ruby-on-rails-3.1 - 使用 Git 标签对 Heroku 进行热修复

> ID：11505923
> 
> 赞同：0
> 
> 时间：2012-07-16T13:58:57.247
> 
> 标签：ruby-on-rails-3.1, heroku, git-branch, git-tag

希望有人可以在这里为我指明正确的方向。我想更好地了解我的应用程序如何将标签部署到 Heroku，以及我如何利用它来使用标签/分支的组合来对生产进行热修复。我有一个在 Heroku 上运行的 rails 3.1 应用程序。

这是我用于演示的自定义部署 rake 任务的一些输出

```
git push origin tag deploy.120716134715
Total 0 (delta 0), reused 0 (delta 0)
To git@github.com:myusername/myrepository.git
 * [new tag]         deploy.120716134715 -> deploy.120716134715

deploy tag deploy.120716134715 was created
git push demo deploy.120716134715:master --force
Everything up-to-date

git tag demo.120716134726 deploy.120716134715

git push origin tag demo.120716134726
Total 0 (delta 0), reused 0 (delta 0)
To git@github.com:myusername/myrepository.git
 * [new tag]         demo.120716134726 -> demo.120716134726 
```

所以我正在创建一个部署标签并将其推送到我的 heroku 演示应用程序，然后从部署标签创建一个演示标签。

我的生产 rake 任务输出类似：

```
Push deploy.120716132600 to Production?  Type 'y' to deploy
y
deploying
git push production deploy.120716132600:master --force
Counting objects: 19, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (15/15), done.
Writing objects: 100% (15/15), 1.42 KiB, done.
Total 15 (delta 12), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Configure Rails 3 to disable x-sendfile
       Installing rails3_disable_x_sendfile... done
-----> Configure Rails to log to stdout
       Installing rails_log_stdout... done
-----> Gemfile detected, running Bundler version 1.0.7
       All dependencies are satisfied
-----> Installing Exceptional plugin from git://github.com/exceptional/exceptional.git... done.
-----> Installing quick_sendgrid plugin from git://github.com/pedro/quick_sendgrid.git... done.
-----> Configuring New Relic plugin... done.
       Installing the New Relic plugin... done.
-----> Compiled slug size is 29.2MB
-----> Launching... done, v291
-----> Deploy hooks scheduled, check output in your logs
       http://my-app-production.heroku.com deployed to Heroku

To git@heroku.com:my-app-production.git
   9d0f2ca..9827475  deploy.120716132600 -> master

git push origin refs/tags/deploy.120716132600:refs/tags/production.120716133802
Total 0 (delta 0), reused 0 (delta 0)
To git@github.com:myusername/myrepository.git
 * [new tag]         deploy.120716132600 -> production.120716133802 
```

所以部署标签被推送到我的 Heroku 生产应用程序，然后创建一个生产标签并将其推送到源。

所以我的问题是现在对生产进行热修复的最佳方法是什么？假设我的主分支中有更改，我已经在本地提交然后推送。在不推动我对生产所做的新更改的情况下，将生产中的内容拉到本地、修改、提交并推回生产的最佳方法是什么？

这甚至可能吗？

提前感谢大家的帮助，让我知道我需要提供哪些其他信息。就像我说的 Rails 3.1 应用程序，Heroku 上的演示和生产应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:10:04.207

> 在不推动我对生产所做的新更改的情况下，将生产中的内容拉到本地、修改、提交并推回生产的最佳方法是什么？

将生产中的内容拉入新分支，对其进行修改、提交并将该分支推回。相关信息见这里：[Git pull a certain branch from GitHub](https://stackoverflow.com/questions/1709177/git-pull-certain-branch-from-github)

# cocos2d-iphone - 固定宽度的多行标签

> ID：11505924
> 
> 赞同：0
> 
> 时间：2012-07-16T13:58:57.403
> 
> 标签：cocos2d-iphone

在 cocos2d for iPhone 中，如何创建一个固定宽度的多行标签（文本框）？

目前，我正在使用：

```
CCLabelTTF  *labelTextTop = [CCLabelTTF labelWithString: @"My long string that should be placed in two lines, instead of in one extremely long one."
                                        fontName:        @"Marker Felt" 
                                        fontSize:        40]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:16:26.603

这是我目前使用的：

```
CGSize size;
size.width=400;
size.height=110;
sayBubbleTextDisplayed_=[[CCLabelTTF  labelWithString:@"some long and winded blabla "  
                                           dimensions:size 
                                            alignment:UITextAlignmentLeft 
                                        lineBreakMode:UILineBreakModeWordWrap
                                             fontName:@"American Typewriter" 
                                             fontSize:16] retain]; 
```

# jquery - jQuery img.load() 每次都会导致额外的负载

> ID：11505926
> 
> 赞同：0
> 
> 时间：2012-07-16T13:59:02.270
> 
> 标签：jquery, image, load

我有一个背景图像，每当触发 ajax 事件时我想重新加载它。在背景图像加载新图像源后，我淡入了一些其他隐藏元素。

问题在于，每次加载 ajax 时，背景图像 .load() 成功函数都会触发一次额外的时间（第一次，1 次加载；第二次，2 次加载；等等）

[编辑以显示更多上下文]

```
// all elements that will be updated (fades array) are faded out

// initial ajax request which includes bg image path, new content, etc
$.get( imgSrc, function(data) {

    // set background image src to preloaded image
    $("#content>img").attr({"src": imgData.src});
    $("#content>img").attr({"alt": imgData.alt});
    $("#content>img").attr({"title": imgData.title});

    // update other elements with ajax data
    [...]

    // load image and fade in all other elements
    console.log( 'begin bg image load');
    $("#content>img").load(function() {
       console.log( 'this selector matches ' + $(this).length + ' element');
       console.log( '> begin fades..');
       for(var i=0; i < fades.length; i++){
          $( fades[i] ).fadeTo(750, 1);
       }
       console.log( '> faded in ' + i + ' elements');
    });
}); 
```

当我第三次启动 ajax 加载时，firebug 控制台显示：

```
begin bg image load
this selector matches 1 element
> begin fades..
> faded in 7 elements
this selector matches 1 element
> begin fades..
> faded in 7 elements
this selector matches 1 element
> begin fades..
> faded in 7 elements 
```

我的假设：

*   这不是更大循环的一部分：“begin bg image load”只打印一次。
*   只有一个#content>img 元素，但如果不是这种情况，这种行为是有意义的。

这与 .load() 专门对图像进行操作的方式有关吗？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:35:50.150

一旦您`src`在元素上设置了属性，实际上就会触发图像加载。

当您调用时，`.load()`您实际上是在*注册*一个新的事件处理程序，因此每次调用时，`$.get()`您都在重新注册处理程序，*一遍又一遍，一遍又一遍*。

# perl - 从文件数据构建 Tree::Simple 对象

> ID：11505931
> 
> 赞同：0
> 
> 时间：2012-07-16T13:59:33.833
> 
> 标签：perl, tree

有没有人有[`Tree::Simple`](https://metacpan.org/module/Tree%3a%3aSimple)在 Perl 中使用或将数据放入树中的经验？

假设我有以下 CSV 数据文件：-

```
Bob, Bill, Ben, Brett
Bob, Bill, Brian
Bob, John, Jim
Alice, John, Jill, Jane
Alice, Jean
Alice, Janet, Brian 
```

我想将其转换为树结构以获得以下内容：

```
1, Bob
2, Alice
1.1, Bill
1.1.1, Ben
1.1.1.1, Brett
1.1.2, Brian
1.2, John
1.2.1, Jim
2.1, John
2.1.1, Jill
2.1.1.1, Jane
2.2, Jean
2.3, Janet
2.3.1, Brian 
```

我看过`Tree::Simple`并知道，如果我可以将数据放入树中，我可以用[`Tree::Parser`](https://metacpan.org/module/Tree%3a%3aParser)正确的编号输出它。

我想要的是一个如何逐行输入数据的示例。我可以首先将文件的每一行读入一个数组，然后`$array[0]`作为第一个孩子添加 - 例如

```
$tree->addChildren(Tree::Simple->new($array[0])); 
```

我不知道该怎么做是：

1.  检查树中是否已经有一个具有该名称的孩子，这样我就不会两次添加说 Bob。

2.  为每个孩子找到正确的父母，这样说 Jill 作为 John 的孩子输入，John 是 Alice 的孩子，而不是 Bob 的孩子

对于这个问题，我将不胜感激。我已经为此工作了 4 天，但无法到达那里。如果`Tree::Simple`这不是最好的方法，也许还有另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:55:37.413

该程序从文件句柄中读取您显示的示例数据，`DATA`并且似乎可以执行您需要的操作。

它通过将树中的所有节点放入由每个节点的值索引的哈希中来跟踪树中的所有节点。每次输入文件中出现一个值时，都会检查哈希以查看它的节点是否已经存在。如果不是，则创建一个新的树节点并将其添加到哈希中。无论哪种方式，该节点都用作同一行上下一个值的父节点。

没有检查数据的一致性，并且假设每个节点最多有一个父节点。如果某个值在不同父名称下的数据文件中再次出现，则忽略新关联。

```
use strict;
use warnings;

use Tree::Simple;
use Tree::Parser;

my %nodes;

my $root = Tree::Simple->new('root');

while (<DATA>) {
  my $parent = $root;
  for my $name (split) {
    $name =~ tr/,//d;
    $nodes{$name} = Tree::Simple->new($name, $parent) unless $nodes{$name};
    $parent = $nodes{$name};
  }
}

my $tp = Tree::Parser->new($root);
$tp->useDotSeparatedLevelFilters;
print "$_\n" for $tp->deparse

__DATA__
Bob, Bill, Ben, Brett
Bob, Bill, Brian
Bob, John, Jim
Alice, John, Jill, Jane
Alice, Jean
Alice, Janet, Brian 
```

**输出**

```
1 Bob
1.1 Bill
1.1.1 Ben
1.1.1.1 Brett
1.1.2 Brian
1.2 John
1.2.1 Jim
1.2.2 Jill
1.2.2.1 Jane
2 Alice
2.1 Jean
2.2 Janet 
```

# php - 无法从单选按钮获取价值

> ID：11505936
> 
> 赞同：1
> 
> 时间：2012-07-16T13:59:49.400
> 
> 标签：php, html

我想在提交时从单选按钮获取数据，但我不知道为什么我无法从单选按钮获取值。

我的代码

```
<?php
   $choice = $_GET['choice'];
?>

<html>
<head>
</head>
<body>
    <form action="index.php" method="POST">
    <table align="center">
        <tr><td>Please select</td></tr>
        <tr><td><input type="radio" name="choice" value="0">aaaa</td></tr>
        <tr><td><input type="radio" name="choice" value="1">bbbb</td></tr>
        <tr><td><input type="radio" name="choice" value="2">cccc</td></tr>
        <tr><td><input type="radio" name="choice" value="3">dddd</td></tr>
        <tr><td><input type="submit" value="submit"></td></tr>
    </table>
             <?php echo"$choice";?>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T14:02:13.473

使用`$_POST`而不是`$_GET` 从表单中获取数据。或者你也可以使用`$_REQUEST`。替换`$_GET['choice']`为`$_POST['choice']`或`$_REQUEST['choice'].`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:04:19.317

您的`method`表单元素应该与您为表单数据访问的变量匹配：

```
<form method="post">
// Need to use the $_POST[] array  to access values

<form method="get">
// Use the $_GET[] array to access values 
```

$_GET 通常用于 url 字符串。通常你会希望你的表单的方法是`post`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:02:35.070

您正在使用`$_GET`，但表格已**发布**。使用`$choice = $_POST['choice']`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T14:02:59.400

您的表格是`POST`，但您正在寻找它`$_GET[]`。而是在里面找`$_POST['choice']`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T14:09:51.473

如果您的表单将属性方法设置为 POST，那么您应该像这样使用 _POST 全局数组 -`<?php $choice = $_POST['choice']; ?>`

# jquery - jquery ajax 请求的路径 url 不正确

> ID：11505943
> 
> 赞同：1
> 
> 时间：2012-07-16T14:00:03.933
> 
> 标签：jquery

我有一个非常简单的问题。我想继续一个 jquery $.ajax 请求。我在“url”正确格式方面遇到了一些问题。我的 index.php 在某个文件夹中，称之为“公共”。在这个文件夹中，我还有我的 js 文件。与“public”共享同一级别的树，我有一个名为“classes”的文件夹，用于放置我的 php 文件。我想从 publuc 文件夹中的 html 页面发出 ajax 请求。所以对于jquery ajax方法的'url'数据，我把'../classes/ajax.php'

但它没有用。我有路径语法问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:01:27.373

路径是相对于当前 url 的（如浏览器地址栏中显示的那样），因此您需要考虑相对于当前加载的页面的目标路径。

要么使用以“/...”开头的 url，要么从站点根目录开始。

脚本文件（正在执行 ajax）的路径无关紧要。

这确实意味着，如果您需要从位于目录树不同级别的页面访问相同的 ajax url，则需要使用绝对 url 引用路径。

```
\Pages
    \Section1
        MyPage1.html
    \Section2.html
        MyPage2.html
\Scripts
    MyScript.js
\Ajax
    MyService.php 
```

如果从 MyPage1.html 调用 ajax 服务，路径将是`../../Ajax/MyService.html`或绝对路径`/Ajax/MyService.html`

# android - SipDemo 管理器在设备三星 SII android SIP API 中始终为空

> ID：11505944
> 
> 赞同：5
> 
> 时间：2012-07-16T14:00:04.337
> 
> 标签：android, sip

最近，我尝试`SIP API`在android中使用，并多次搜索，我发现了SipDemo（的`sample project`）`android-10`。我只是在eclipse中导入项目。然而，当我在这个项目（by `Log.e(...)`）中寻找细节时，我发现它`SipManager manager`总是`null`在这行之后：`manager = SipManager.newInstance(this);`. 因此，无论我向 Sip 提供商注册什么，都无法正常工作！有人有同样的问题吗？谁能给我一个建议？

编辑：

如果我使用 [这里的链接](http://xilard.hu/)，我可以让我的模拟器使用`register`，`call`然后`receive`打电话。但是，用我的设备，三星 SII，它不起作用！！这是因为我的设备还是基本 API 有问题？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:39:43.973

并非所有 Android 设备都支持使用 SIP 的 VOIP 呼叫。您应该始终调用`isVoipSupported()`以验证设备是否支持 VOIP 呼叫并`isApiSupported()`验证设备是否支持 SIP API。

# javascript - 使用 Javascript 调整动态导航元素的宽度

> ID：11505957
> 
> 赞同：1
> 
> 时间：2012-07-16T14:00:46.017
> 
> 标签：javascript, dynamic, width, adjustment

我有一个标准的水平下拉导航菜单，有 3 个级别。我想通过 JS 做的是动态调整顶部/级别 1 的宽度`Element`，`Navigation`无论最终用户放入多少。该网站在 Joomla 上运行。

这是我写的js代码。它简短而简单。我尝试了多种方式来编写它，以防出现语法错误，但我仍然不影响 1 级元素的宽度。

```
// load site, get the number of level 1 Elements

window.onload = function() { 

var elements_count = document.getElementsByClassName('level1').length;

// Get required width for level 1 elements

var rest = 1000 % elements_count;
var elements_width = (1000 - rest) / elements_count;

// adjust width of level 1 Elements

elements.style.width = elements_width + 'px';

} 
```

我将不胜感激任何建议；）

# c++ - 在元组中迭代和调用异构函数

> ID：11505961
> 
> 赞同：2
> 
> 时间：2012-07-16T14:01:06.547
> 
> 标签：c++, c++11, iteration, tuples, function-pointers

在最一般的术语中，我的问题如下：在编译时定义一系列异构函数指针（可能具有不同的arity），稍后需要在运行时以任意顺序迭代和调用。

把自己限制在 C++ 中，最合适的容器、迭代和调用机制是什么？

这个问题是由现实世界的情况引起的，我后来发现了一个更简单的解决方案，不涉及元组，但在本质上更专业。

最初我试图做这样的事情：

```
//type variables Y... have to be convertible to parameters of every function from the tuple std::tuple<T...> in order for this to compile
template<size_t n, typename... T, typename... Y>
void callFunNth(std::tuple<T...> &tpl, size_t i, Y... args) {
    if (i == n)
        std::get<n>(tpl)(args...); 
    else
        callFunNth<(n < sizeof...(T)-1? n+1 : 0)>(tpl, i, args...);
}
template<typename... T, typename... Y>
void  callFun(std::tuple<T...> &tpl, size_t i, Y... args) {
    callFunNth<0>(tpl,i, args...);
}

int main() 
{
    using T1 = int;
    namespace mpi = boost::mpi;
    //Several instantiations of boost::mpi::reduce algorithm I am interested in
    auto algs = make_tuple(boost::bind((void (*)(const mpi::communicator&, const T1*, T1, T1*, std::plus<T1>, int))mpi::reduce<T1, std::plus<T1>>, _1, _2, _3, _4, std::plus<T1>(), _5),
                           boost::bind((void (*)(const mpi::communicator&, const T1*, T1, T1*, mpi::minimum<T1>, int))mpi::reduce<T1, mpi::minimum<T1>>, _1, _2, _3, _4, mpi::minimum<T1>(), _5),
                           boost::bind((void (*)(const mpi::communicator&, const T1*, T1, T1*, std::minus<T1>, int))mpi::reduce<T1, std::minus<T1>>, _1, _2, _3, _4, std::minus<T1>(), _5)
                          );

    //Iterate through the tuple and call each algorithm
    for(size_t i=0; i < std::tuple_size<decltype(algs)>::value;i++)
        callFun(algs, i, /*actual arguments to each algorithm*/);
} 
```

这种方法的问题在于，要编译所有提供的参数， callFunNth 必须可类型转换为提供的元组内所有函数的参数，这严重限制了所述函数的异质性并强制使用 std::bind或 boost::bind 来解决这个问题。

当类型可以相互转换时，可以编写以下内容：

```
template <typename T, typename U>
void fja(T x, U y) { 
    std::cout << x << std::endl;
}
auto funs = std::make_tuple(fja<int,std::string>, fja<double,std::string>, fja<char,std::string>);
callFun(funs, 2, 'a', "Char");
callFun(funs, 1, 2.45, "Decimal");
callFun(funs, 0, 1, "Integer"); 
```

并将“a”、“2.45”和“1”分别发送到标准输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:54:06.850

您应该将函数对象存储为`std::vector<std::function<const boost::mpi::communicator&, const T1*, int, T1*, int>>`. 它更容易管理。

如果您必须使用函数元组，请参见下文。

* * *

***C++ 标准库非常需要 compile-time `iota`。***

如果您需要**使用相同的参数**调用所有函数，这是另一种方法。首先我们构造可变整数列表（从[https://github.com/kennytm/utils/blob/master/vtmp.hpp](https://github.com/kennytm/utils/blob/master/vtmp.hpp)`integers<0, 1, 2, ..., n-1>`复制）：

```
template <size_t... ns>
struct integers
{
    template <size_t n>
    using push_back = integers<ns..., n>;

};

namespace xx_impl
{
    template <size_t n>
    struct iota_impl
    {
        typedef typename iota_impl<n-1>::type::template push_back<n-1> type;
    };

    template <>
    struct iota_impl<0>
    {
        typedef integers<> type;
    };
}

template <size_t n>
using iota = typename xx_impl::iota_impl<n>::type; 
```

然后我们直接使用解包操作：

```
template <typename... T, size_t... ns, typename... Y>
void call_all_impl(const std::tuple<T...>& funcs,
                   const integers<ns...>&,
                   Y... args) {
    __attribute__((unused))
    auto f = {(std::get<ns>(funcs)(args...), 0)...};
}

template <typename T, typename... Y>
void call_all(const T& funcs, Y&&... args) {
    call_all_impl(funcs,
                  iota<std::tuple_size<T>::value>(), 
                  std::forward<Y>(args)...);
} 
```

例如，

```
int main() {
    call_all(std::make_tuple([](int x, double y){ printf("1: %d %g\n", x, y); },
                             [](double x, int y){ printf("2: %e/%d\n", x, y); },
                             [](int x, int y){ printf("3: %#x %#x\n", x, y); }),
            4, 9);
} 
```

印刷

```
1：4 9
2：4.000000e+00/9
3：0x4 0x9

```

* * *

稍作修改可以使其仅调用`i`在运行时选择的第 -th 个参数。

```
template <typename... T, size_t... ns, typename... Y>
void call_one_impl(const std::tuple<T...>& funcs, size_t which,
                   const integers<ns...>&,
                   Y... args) {
    __attribute__((unused))
    auto f = {(ns == which && (std::get<ns>(funcs)(args...), 0))...};
}

template <typename T, typename... Y>
void call_one(const T& funcs, size_t which, Y&&... args) {
    call_one_impl(funcs, which,
                  iota<std::tuple_size<T>::value>(),
                  std::forward<Y>(args)...);
} 
```

例如，

```
int main() {
    auto t = std::make_tuple([](int x, double y){ printf("1: %d %g\n", x, y); },
                             [](double x, int y){ printf("2: %e/%d\n", x, y); },
                             [](int x, int y){ printf("3: %#x %#x\n", x, y); });

    call_one(t, 2, 6.5, 7.5);
    call_one(t, 0, 4, 9);
    call_one(t, 1, 5.8, 8);
} 
```

印刷

```
3：0x6 0x7
1：4 9
2：5.800000e+00/8

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:38:46.103

异构容器的首选库是[Boost.Fusion](http://www.boost.org/libs/fusion/)。正如您将在该网站上看到的那样，他们使用编译时多态函子来完成此类任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T16:20:55.930

在对这个问题进行了更多修改之后，我相信使用类型联合可能是解决它的一种相当不错的方法，尽管我确实担心以当前形式陈述的问题有点太模糊，不值得一个最佳答案.

无论如何，这就是在 C++ 中使用类型联合解决问题的方法：

```
int main()
{
    auto f1 = [](int x) { std::cout << x << std::endl;};
    auto f2 = [](int x, std::string y) { std::cout << y << std::endl;};
    auto f3 = [](const std::vector<int> &x) { std::copy(x.begin(),x.end(),std::ostream_iterator<int>(std::cout," "));};
    using tFun1 = decltype(f1);
    using tFun2 = decltype(f2);
    using tFun3 = decltype(f3);
    using funUnion = boost::variant<tFun1,tFun2,tFun3>;

    std::vector<funUnion> funs = {f1,f2,f3};
    for(auto &ff : funs) {
        if (tFun1* result = boost::get<tFun1>(&ff)) (*result)(2);
        else
        if (tFun2* result = boost::get<tFun2>(&ff)) (*result)(2,"Hello!");
        else
        if (tFun3* result = boost::get<tFun3>(&ff)) (*result)({1,2,3,4,5});
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T15:03:03.393

我认为使用元组存储函数是个坏主意
对我来说，创建函数指针更简单

```
typedef impl_defined pointer_to_function 
```

并将功能推入

```
std::vector<pointer_to_function> 
```

# esb - 访问 MULE jdbc:query 中的 java 对象属性

> ID：11505963
> 
> 赞同：0
> 
> 时间：2012-07-16T14:01:17.197
> 
> 标签：esb, mule

`InsurancePolicyStatus`我有一个具有属性“String policyId” 的 Java 类 (insurancePolicyStatus) 的实例。

此类的实例使用以下代码保存：

```
message.setSessionProperty("insurance_policy_status", insurancePolicyStatus) 
```

如何`insurancePolicyStatus.policyId`在 jdbc 查询中访问值属性？

```
jdbc:query key="messageUpdateSuccessStatus"
    value="UPDATE message  SET [UpdateTime] = GETDATE(), 
         [Status] = 'SUCCESS', 
         [ResultId]=#[header:SESSION:insurancePolicyStatus.messageResultId]
    WHERE [MessageId] = #[header:SESSION:id]" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:36:09.990

尝试使用表达式

```
#[groovy:message.getProperty('insurance_policy_status',org.mule.api.transport.PropertyScope.SESSION).getPolicyId () 
```

您需要 policyId 值的地方。getPolicyId() 应该是您获取 policyId 属性的 java 方法。

问候。

# sql - 如何在 Oracle 10g 中进行“选择性位置”？

> ID：11505964
> 
> 赞同：2
> 
> 时间：2012-07-16T14:01:22.847
> 
> 标签：sql, oracle

我有一个父表 A，它有 2 个外键（来自表 B 和 C），但它一次只能有一个外键。例子：

```
SELECT a.evi, a.time, a.date, 
       a.number, a.descr, a.x, 
       a.y, a.z,  a.FK_tableB, a.FK_tableC, 
       b.brand, b.type, 
       b.color, b.model, c.name, c.lastname, 
  FROM tableA a, 
       tableB b, 
       tableC c  
 WHERE (PK_tableA = 100 AND PK_tableB = FK_tableB)      
    OR (PK_tableA = 100 AND PK_tableC = FK_tableC) 
```

（这显然不起作用）

当只有一个 where 子句为真时，我如何返回数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T14:19:16.710

看来您想对查询执行“异或”（XOR）。

由于 SQL 没有 XOR，您可以尝试以下操作：

```
create table a
( a_id int, b_id int, c_id int);

create table b
( b_id int);

create table c
( c_id int);

insert into a (a_id, b_id, c_id) values (1, 1, 1);
insert into a (a_id, b_id, c_id) values (2, NULL, 2);
insert into a (a_id, b_id, c_id) values (3, 2, NULL);
insert into a (a_id, b_id, c_id) values (4, NULL, NULL);

insert into b (b_id) values (1);
insert into b (b_id) values (2);

insert into c (c_id) values (1);
insert into c (c_id) values (2);

SELECT a.a_id, a.b_id, a.c_id, b.b_id, c.c_id
  FROM a 
  LEFT JOIN b
    ON (a.b_id = b.b_id)
  LEFT JOIN c  
    ON (a.c_id = c.c_id)
 WHERE (   (b.b_id is NOT NULL AND c.c_id is NULL) 
        OR (c.c_id is NOT NULL AND b.b_id is NULL)); 
```

请参阅此[SQLFiddle](http://sqlfiddle.com/#!4/c2a29/1)进行尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:17:58.150

使用希望使用左外连接来保留表 A 中的所有行，即使其他表中没有匹配的行。

```
SELECT a.evi, a.time, a.date, a.number, a.descr, a.x, a.y, a.z,  a.FK_tableB,
       a.FK_tableC, b.brand, b.type,  b.color, b.model, c.name, c.lastname
FROM tableA a left outer join
     tableB b
     on a.FK_TableB = b.PK_tableB left outer join
     tableC c
     on a.FK_tableC = c.pk_TableB
where PK_tableA = 100 
```

此外，您需要在查询中使用正确的连接语法。而且，在 SELECT 子句中使用别名很好，但您也应该在 ON 和 WHERE 子句中使用它们。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-16T14:17:18.573

尝试在表 B 和 C 上指定一个外连接 两个外连接.... *我认为它会起作用*

```
SELECT a.evi, a.time, a.date, 
       a.number, a.descr, a.x, 
       a.y, a.z,  a.FK_tableB, a.FK_tableC, 
       b.brand, b.type, 
       b.color, b.model, c.name, c.lastname, 
FROM tableA a, 
     tableB b, 
     tableC c  
WHERE PK_tableA = 100
AND a.PK_tableB = b.FK_tableB(+)
AND a.PK_tableB = c.FK_tableC(+) 
```

# objective-c - RMMapview 将触摸/手势数据从顶视图发送到底视图

> ID：11505965
> 
> 赞同：1
> 
> 时间：2012-07-16T14:01:24.683
> 
> 标签：objective-c, ios, route-me, ofx

我一直在尝试将触摸/手势事件从顶部视图发送到底部视图的各种可能性。我正在使用开放框架 GLView。我可以将数据从一个类发送到子类，但 RMMapView 仍然不会覆盖手势和触摸事件。我尝试过使用触摸/手势和 Hittest，但在所有这些上我都无法控制地图视图。这是我尝试转发 pan 事件的地方。

我在 EAGLView.h [https://github.com/openframeworks/openFrameworks/blob/master/addons/ofxiPhone/src/EAGLView.h](https://github.com/openframeworks/openFrameworks/blob/master/addons/ofxiPhone/src/EAGLView.h) 图层类中做了什么：

```
 UIPanGestureRecognizer *panGestureRecognizer = [[[UIPanGestureRecognizer alloc]        initWithTarget:self action:@selector(handlePanGesture:)] autorelease];
            panGestureRecognizer.minimumNumberOfTouches = 1;
            panGestureRecognizer.maximumNumberOfTouches = 1;
            [self addGestureRecognizer:panGestureRecognizer];

 - (void)handlePanGesture:(UIPanGestureRecognizer *)recognizer
            {
        NSLog(@"EAGLEVIEW Pan");

        for (UIView *view in [ofxiPhoneGetUIWindow() subviews])
        {
            if([view isKindOfClass:[RMMapView class]])
            {
                [view  handlePanGesture:recognizer];

               // [view panGestureRecognizer delegate self];
               //  [self addGestureRecognizer:recognizer];
            }

        }

    } 
```

[https://github.com/route-me/route-me/blob/master/MapView/Map/RMMapView.m](https://github.com/route-me/route-me/blob/master/MapView/Map/RMMapView.m) RMMapview 的子类：

```
 if (self) {
    UIPanGestureRecognizer *panGestureRecognizer = [[[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanGesture:)] autorelease];
    [panGestureRecognizer setDelegate:self];
    panGestureRecognizer.minimumNumberOfTouches = 1;
    panGestureRecognizer.maximumNumberOfTouches = 1;
  NSLog(@"hallo123 %@",self);
    [self addGestureRecognizer:panGestureRecognizer];

- (void)handlePanGesture:(UIPanGestureRecognizer *)recognizer
    {
NSLog(@"pan");
 [recognizer setDelegate:self];
[super handlePanGesture:recognizer];
    } 
```

# c# - .net 列表 修剪多余的

> ID：11505968
> 
> 赞同：1
> 
> 时间：2012-07-16T14:01:32.843
> 
> 标签：c#, collections, garbage-collection, dynamic-memory-allocation

考虑这种情况：Form1 构建了一个 List 对象，其中包含大量元素。然后，它必须通过参数将此集合传递给 Form2。

在 Form2 中制作硬拷贝后，我想清除与 Form1 中的集合相关的所有内容。设**Col1**为 Form1 中集合的标识符。

由于 Col1 是通过参数通过引用传递的，因此我调用**Col1.Clear()**来清除它的元素，然后**调用 Col1.TrimExcess()**将其实际大小减小到 0，因此它不会跟踪大量*空*值。

我的目的是尽快清除所有使用过的内存。Col1.TrimExcess() 应该清除所有使用的内存，但我很好奇 Col1 = null 在我（或大多数）情况下是否会更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T14:25:55.703

我想调用 Col1.Clear() 来清除它的元素，然后 Col1.TrimExcess() 将是一个更好的方法，因为 Col1 = null 只会取消引用列表，但它仍然会在内存中，直到 GC 完成它的工作.

调用 Col1.Clear() 将从列表本身取消引用列表项，然后 Col1.TrimExcess() 将从列表中删除所有空元素。

因此，这样它将删除内存中所有内容的引用。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T14:35:21.910

我猜你这样做是为了你可以在form1中“准备”东西，然后将准备好的内容传递给Form2以避免某种滞后或其他东西，对吗？无论如何，有几个问题需要考虑：

正如 Tim Schmelter 指出的那样，从表格 2 中添加对列表“X”的引用不会创建副本 - 只会创建对 X 的新引用。从表格 2 中删除对 X 的引用也不应该减少内存，因为 X 仍然存在- 指向它的指针只会少一件事。但是，如果您*确实*创建了列表的硬拷贝，那么您确实可以通过删除所有对原始列表及其包含的数据的引用来节省一些内存。（但是请注意，[深度复制列表并不总是直截了当......](https://stackoverflow.com/questions/4226747/deep-copy-of-listt)）

至于使用天气`clear()`和`TrimExcess()`，我通常会假设这些是内置的，并期望它们表现得相当好。无论如何，我非常怀疑它们是否会以任何显着方式影响您的代码速度。

此外，如果您应该选择使用`col = null`，您最终将得到一个具有空值的变量（显然......），而另一个选项将以一个空（但非空）列表结束。如果我没记错的话，相当于“手动”将列表修剪为零长度不是将其设置为空，而是将其指向一个新的（空）列表：`col = new List()`，但我怀疑这会为您节省任何 CPU 周期.

简而言之，我建议您像开始一样继续，并使用内置方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T14:29:23.710

据[MSDN](http://msdn.microsoft.com/en-us/library/ms132207.aspx)：

> 要将 List 重置为其初始状态，请在调用 TrimExcess 方法之前调用 Clear 方法。修剪空列表会将列表的容量设置为默认容量。

所以我想你的方法是正确的。

# android - 如何强制 tableview 使用所有屏幕空间？

> ID：11505970
> 
> 赞同：0
> 
> 时间：2012-07-16T14:01:38.777
> 
> 标签：android, xml, android-layout, tablelayout

我有一个表格视图，里面有一些空按钮。当我运行我的应用程序时，所有的按钮都塞在了顶部。如何强制表格占据整个屏幕区域？

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<TableRow
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <Button 
        android:id="@+id/button1"
        />
</TableRow> 
```

我的布局实际上很大，所以这只是一个示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:13:42.877

正如我从您的问题中了解到的那样，答案是：

您可以将重力赋予行。像：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="fill_width"
    android:layout_height="wrap_content"
    android:gravity = 1.0 >
    <Button
        android:id="@+id/button1"
        android:text="button" />
</TableRow>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="fill_width"
    android:layout_height="wrap_content"
    android:gravity = 1.0 >
    <Button
        android:id="@+id/button1"
        android:text="button" />
</TableRow> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:44:44.057

```
<TableLayout android:stretchColumns="*" ... > 
```

代替 *，您可以指定要拉伸的列，例如“1”或“1,2,3”

# maven - jenkins 不读取 build.properties

> ID：11505972
> 
> 赞同：0
> 
> 时间：2012-07-16T14:01:44.723
> 
> 标签：maven, build

我正在尝试使用 jenkins 构建我的 maven 项目。它创建了战争文件，但无法读取 build.properties 文件，因此所有的 css、图像路径都没有得到反映。

知道的请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T20:30:57.227

没有更多信息，就很难理解你想要什么。但我猜你习惯用 Ant 构建，它正在过滤你的资源。

所以，如果你想做同样的事情，你可以使用 maven-resources-plugin，它会在你运行 mvn:package（或更高版本）时自动触发。

这里有一个例子：

```
<project>
  ...
  <build>
    ...
    <resources>
      <resource>
        <directory>src/main/resources</directory>
        <filtering>true</filtering>
        <includes>
          <include>**/*.xml</include>
        </includes>
      </resource>
      <resource>
        <directory>src/main/webapp</directory>
        <filtering>false</filtering>
        <includes>
          <include>**/*.xml</include>
        </includes>
      </resource>

    <filters>
        <filter>build.properties</filter>
    </filters>
      ...
    </resources>
    ...
  </build>
  ...
</project> 
```

如果我弄错了，请发布你的 pom 和你的模板配置文件。

# php - 如何在 PHP 网站中包含不同的语言？

> ID：11505974
> 
> 赞同：0
> 
> 时间：2012-07-16T14:01:50.210
> 
> 标签：php

在我正在创建的网站中，我想包含多种语言。

下面是我如何确定我应该显示哪种语言。

```
 <?php
    $pagename = $_SERVER["REQUEST_URI"];
       if (strpos($pagename,'?en') !== false) 
         {
            echo 'english';
here is when I have to include a language template file for english language.
         }
    ?> 
```

我的目标是包含语言模板文件，而不是为任何语言复制我的所有网站。

所以我的想法是，例如，`index.php`所有语言的变量都是相同的，但内容会改变。

```
<div id="main">
<?php echo $main_description; ?>
</div> 
```

我应该如何包含一个语言文件才能使它工作？

```
$main_description ="this is the main description written in english" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:06:46.543

您可以使用类似于您拥有的 if 语句的内容，并将特定文件包含在所有变量中。

```
switch ($_GET['lang']) {
    case "en":
        include "lang/en.php";
        break;
    case "es":
        include "lang/es.php";
        break;
    default:
        include "lang/en.php";
} 
```

但是在这里，您的所有字符串都将位于变量中，您必须小心不要在其余代码中使用/覆盖这些变量。

[此页面](http://www.mind-it.info/2010/02/22/a-simple-approach-to-localization-in-php/)提供了一个非常简单且易于遵循的示例，说明如何执行 JSON 编码语言文件，脚本加载并找到您想要的文本并返回翻译后的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:07:29.037

如果您在开发中没有走得太远，我建议您使用支持国际化的框架。

例如，Codeigniter 有[Language 类](http://codeigniter.com/user_guide/libraries/language.html)

或者你可以实现与他们类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T14:08:26.887

您可能必须为每个模板编写不同的语言，并且只包含该文件而不是英文文件。

如果我可以推荐，你有没有为你的网站尝试过这个？ [https://translate.google.com/manager/](https://translate.google.com/manager/)

可能会让你的工作轻松很多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T14:10:03.343

国际化事实上的标准方法是[GNU Gettext](http://www.gnu.org/software/gettext/)（[PHP 绑定](http://bg2.php.net/manual/en/book.gettext.php)）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T14:08:16.387

不要用文件来做，建立一个像这样的数据库：

```
id               | en              | de             | es
---------------------------------------------------------------------
MAIN_DESCRIPTION | English desc .. | German desc .. | Spanish desc ..
MENU_1           | English des2 .. | German des2 .. | Spanish des2 .. 
```

当您获得正确的代码时，只需加载正确的表

```
if ( strpos( $pagename, '?en' ) !== false ) {
  $lang_code = 'en';
} elseif ( strpos( $pagename, '?de' ) !== false ) {
  $lang_code = 'de';
...
}

$query = "SELECT " . $lang_code . " FROM texts WHERE id = MAIN_DESCRIPTION"; 
```

ETC ...

PS：不要在查询中直接插入变量，这会导致错误的`query injection`尝试。

# xml - 如何检查字符串的第一个字符是否是bash中的数字？

> ID：11505988
> 
> 赞同：1
> 
> 时间：2012-07-16T14:02:21.367
> 
> 标签：xml, regex, bash, shell

我正在用 bash 编写一个 xml 元素。我需要将一些以数字开头的字符串替换为以字符开头的字符串，因此它是一个有效的 XML 标记（记住 xml 标记不能以字母数字字符开头）。

例如，

```
 str = 192.16.76.52,1001 
```

这不是一个有效的 xml 标签，即我不能这样做

```
<192.16.76.52,1001>
.....
</192.16.76.52,1001> 
```

所以，我打算检测它是否是一个数字并用类似的东西替换它

```
IP192.16.76.52 
```

我知道我可以用 IFS 做到这一点，但可能需要很长时间和额外的代码。

既然您知道主要问题，请随时发表评论或提供建议。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T14:04:56.447

`=`in的 RHS`[[`采用 glob 模式。

```
$ [[ 123 = [0-9]* ]] ; echo $?
0
$ [[ foo = [0-9]* ]] ; echo $?
1 
```

# c# - 第 3 方 DLL 因 System.AccessViolationException（受保护的内存）而崩溃

> ID：11505992
> 
> 赞同：0
> 
> 时间：2012-07-16T14:02:34.917
> 
> 标签：c#, .net, dll, nullreferenceexception

我在 .Net 4.0 和 VS2010 中使用 C#，并且使用了一些非托管的 3rd 方 DLL（来自同一供应商）。DLL 处理文件中的字节数组，执行它们的逻辑，并返回一些新的东西。这适用于大约 80% 的文件，但其余文件会使应用程序崩溃。这可以用相同的文件重现。例外是：

System.AccessViolationException 试图读取或写入受保护的内存。这通常表明其他内存已损坏。

它在这条线上崩溃：

```
oPages = _penReq.Pages; 
```

旧版本的软件（大约从 2008 年开始）调用相同的 DLL 并处理相同的文件不会发生这种情况。我已将此添加到配置文件中：

```
<legacyNullReferenceExceptionPolicy enabled = "1"/> 
```

添加后，程序不会崩溃（在问题行周围有一个 try-catch），但当然 oPages 为空。

我意识到这是一个第 3 方非托管 DLL，因此我只能在不联系该供应商的情况下获得这么多帮助（这非常困难），但考虑到相同的代码和 DLL 可以与我们的旧版本软件一起使用，是否有解释或可能的解决方案？

为了让这更有趣，在我们的 Server 2003 32 位机器上崩溃的文件中约有 25% 在我的 Win7 64 位机器上成功处理。

谢谢。

**更新**

下面是更好地查看代码：

```
byte[] inkBytes = Data;   //produces an array of Bytes
Vendor.Service.PenRequest _penReq = new Vendor.Service.PenRequest();
_penReq.Initialize(Data);
_penId = _penReq.PenId;  //returns a string with an ID.  Confirmed working.
Vendor.Service.RequestPages oPages = _penReq.Pages; //returns list of pages.  Not working 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:31:32.937

Dot Net 2.0 比 1.1 有一个新的安全功能，要求您完全信任非托管文件和资源，然后才能使用它们。确保 dll 和它使用的任何资源必须具有完全访问权限并且它们是完全受信任的。