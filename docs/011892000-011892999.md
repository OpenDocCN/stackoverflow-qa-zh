# StackOverflow 问答 11892000-11892999

# powershell - 带有输出文件问题的 Powershell foreach 循环

> ID：11892000
> 
> 赞同：1
> 
> 时间：2012-08-09T21:09:27.833
> 
> 标签：powershell

我正在尝试使用 powershell 测试与服务器列表的网络连接，然后仅当它返回 true 时才转储到文本文件。我的代码发生的情况是它包含未 ping 的服务器。这是我所拥有的：

```
$servers = Get-Content c:\script\servers.txt
foreach($server in $servers)
{
Test-Connection $server -count 1 -quiet
    if ($True){out-file -InputObject $server, $True -Encoding ASCII -Width 50 -Append c:\scriptoutput.txt}
    else { write-host "server $server could not be contacted"}
} 
```

现在我在输出文件中看到的是

```
server1
True
server2
True
server3
True 
```

但是我在控制台上看到的是这样的：

```
PS C:\> C:\test.ps1
True
True
False 
```

服务器 3 不存在，因此无法 ping 通，在输出文件中仍显示为 True，但在控制台中读取为 False。是什么赋予了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T23:15:02.263

不仅永远不会到达 else 语句，而且您总是输出`true`到文件中。试试这个：

```
$servers = Get-Content c:\script\servers.txt
foreach ($server in $servers)
{
    $connected = Test-Connection $server -count 1 -quiet
    if ($connected) {
        $server,$connected | Out-File -Enc ASCII -Width 50 -Append c:\scriptoutput.txt
    }
    else { 
        write-host "server $server could not be contacted"
    }
} 
```

# ruby-on-rails - Hartl 的教程“找不到 id=1 的用户”（第 7 章）

> ID：11892006
> 
> 赞同：0
> 
> 时间：2012-08-09T21:10:10.797
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

Hartl 教程中的下一个新手问题。现在在第 7 章。当我运行应用程序时，我在浏览器中得到了类似的东西：

```
ActiveRecord::RecordNotFound in UsersController#show

Couldn't find User with id=1

Rails.root: C:/rails_project/my_app
Application Trace | Framework Trace | Full Trace

app/controllers/users_controller.rb:4:in `show'

Request

Parameters:

{"id"=>"1"}

Show session dump

Show env dump
Response

Headers:

None 
```

我的 user_controller.rb 看起来像这样：

```
 class UsersController < ApplicationController

     def show
    @user = User.find(params[:id])
    describe "profile page" do  
    #Code to make a user variable
    before { visit user_path(user) }

        it { should have_selector('h1',    :text => user.name) }
        it { should have_selector('title', :text => user.name) }
    end
  end

  def new
  end

  end 
```

感谢您的帮助和兴趣！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-18T09:56:13.397

您可以使用`find_by_id`而不是`find`.

`find`当模型中不存在参数时会导致错误。

另请参阅：[find、where 和 find_by_id 之间的区别](https://stackoverflow.com/questions/15185919/difference-between-find-where-and-find-by-id)

# xml - 在 XML 中连接来自多个节点的值 - 使用 XSLT

> ID：11892013
> 
> 赞同：3
> 
> 时间：2012-08-09T21:11:02.747
> 
> 标签：xml, xslt, xml-parsing

这是一个测试 XML，而不是原始 XML。我只需要在 bloggrs 块中提取那些博客 ID 存在的博客网站。**是否可以仅使用 XSLT？**我认为不是。

```
<root>
<bloggers>
<name bloggerId = "1">Jacob Sebastian</name>
<name bloggerId = "2">Adam Machanic</name>
<name bloggerId = "3">Pinal Dave</name>
<name bloggerId = "4">Steve Jones</name>
<name bloggerId = "5">Michael Coles</name>
</bloggers>
<blogs>
<url bloggerId = "1">http://www.sqlblog.com/adam_machanic </url>
<url bloggerId = "2">http://www.sqlauthority.com </url>
<url bloggerId = "3">http://www.beyondrelational.com </url>
<url bloggerId = "4">http://www.sqlblog.com/michael_coles </url>
<url bloggerId = "5">http://www.sqlservercentral.com/blogs/steve_jones </url>
<url bloggerId = "6">http://www.cnn.com/belief </url>
<url bloggerId = "7">http://www.yahoo.com/360 </url>
</blogs>
</root> 
```

我的输出是这种形式

```
+-------+----------+
| Site  | Blogger  |
+-------+----------+
| site1 | blogger1 |
| site2 | blogger2 |
+-------+----------+ 
```

此列表将排除站点 6 和 7，因为这些博客编号在博客中不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:25:09.157

甚至 xpath 就足够了：`//blogs/url[@bloggerId = //bloggers/@bloggerId]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T21:34:14.783

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <table border="1">
            <xsl:apply-templates select="//url" />
        </table>
    </xsl:template>

    <xsl:template match="url">
        <xsl:variable name="id" select="@bloggerId" />

        <xsl:if test="count(//bloggers//name[@bloggerId = $id]) &gt; 0">
            <tr>
                <td>
                    <xsl:value-of select="//bloggers//name[@bloggerId = $id]" />
                </td>
                <td>
                    <xsl:value-of select="." />
                </td>
            </tr>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

![在此处输入图像描述](../Images/785a765f23cae271f657d4ebb504acc0.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T03:48:14.337

**这个简短的（不`xsl:variable`，不`xsl:if`）转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <table border="1">
   <thead>
     <th>Site</th><th>Blogger</th>
   </thead>
   <tbody>
    <xsl:apply-templates/>
   </tbody>
  </table>
 </xsl:template>

 <xsl:template match=
  "url[@bloggerId = /*/bloggers/name/@bloggerId]">
   <tr>
     <td><a href="{.}"><xsl:value-of select="."/></a></td>
     <td><xsl:value-of select=
     "/*/bloggers/name[@bloggerId = current()/@bloggerId]"/></td>
   </tr>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<root>
    <bloggers>
        <name bloggerId = "1">Jacob Sebastian</name>
        <name bloggerId = "2">Adam Machanic</name>
        <name bloggerId = "3">Pinal Dave</name>
        <name bloggerId = "4">Steve Jones</name>
        <name bloggerId = "5">Michael Coles</name>
    </bloggers>
    <blogs>
        <url bloggerId = "1">http://www.sqlblog.com/adam_machanic</url>
        <url bloggerId = "2">http://www.sqlauthority.com</url>
        <url bloggerId = "3">http://www.beyondrelational.com</url>
        <url bloggerId = "4">http://www.sqlblog.com/michael_coles</url>
        <url bloggerId = "5">http://www.sqlservercentral.com/blogs/steve_jones</url>
        <url bloggerId = "6">http://www.cnn.com/belief</url>
        <url bloggerId = "7">http://www.yahoo.com/360</url>
    </blogs>
</root> 
```

**产生想要的正确结果**：

```
<table border="1">
   <thead>
      <th>Site</th>
      <th>Blogger</th>
   </thead>
   <tbody>
      <tr>
         <td>
            <a href="http://www.sqlblog.com/adam_machanic">http://www.sqlblog.com/adam_machanic</a>
         </td>
         <td>Jacob Sebastian</td>
      </tr>
      <tr>
         <td>
            <a href="http://www.sqlauthority.com">http://www.sqlauthority.com</a>
         </td>
         <td>Adam Machanic</td>
      </tr>
      <tr>
         <td>
            <a href="http://www.beyondrelational.com">http://www.beyondrelational.com</a>
         </td>
         <td>Pinal Dave</td>
      </tr>
      <tr>
         <td>
            <a href="http://www.sqlblog.com/michael_coles">http://www.sqlblog.com/michael_coles</a>
         </td>
         <td>Steve Jones</td>
      </tr>
      <tr>
         <td>
            <a href="http://www.sqlservercentral.com/blogs/steve_jones">http://www.sqlservercentral.com/blogs/steve_jones</a>
         </td>
         <td>Michael Coles</td>
      </tr>
   </tbody>
</table> 
```

# c++ - streambuf、ostream、ostreambuf、istream、istreambuf 和相关的迭代器

> ID：11892016
> 
> 赞同：2
> 
> 时间：2012-08-09T21:11:13.897
> 
> 标签：c++, stl, stream, iterator, buffer

我想有人不得不问这些问题，所以请多多包涵。

让我们考虑以下野兽：

*   ostream
*   istream
*   iostream
*   流缓冲
*   ~~字符串~~- 根据本杰明的观察，这个不属于这里。
*   字符串缓冲区

和以下迭代器：

*   ostream_iterator
*   ostreambuf_iterator
*   istream_iterator
*   istreambuf_iterator

**问题：**

为什么不存在`iostream_iterator`, `streambuf_iterator`, ~~`string_iterator`~~(std::string::iterator 和 std::string::const_iterator 确实存在) 或`stringbuf_iterator`？

为什么上面列出的 4 个迭代器没有类似的 const 版本`std::vector<T>::const_iterator`？

如果它们不提供 begin() 和 end() 方法，我们应该如何迭代这些野兽中的任何一个？以上4个迭代器的目的是什么？

N00b 问题：我在哪里可以找到详细说明这些类背后的逻辑以及如何使用它们的一些不错的示例的好参考？

希望有经验的人能为上述问题提供一个很好的答案。

* * *

PS：现实生活中的情况：

```
void writeToStream(std::ostream &out);
int main ()
{
    std::ostringstream byteStream;
    writeToStream(byteStream);
    std::string byteString = byteStream.str();

    for (unsigned short i = 0; i < byteString.size(); ++i)
    {
        //do something with each byteString[i]
    }
    return 0;
} 
```

我的猜测是，我可以`ostream`通过使用类似 for 的迭代器来使用和迭代其元素`std::vector`，而不是使用`ostringstream`and`str()`将其转换为 a 的方法`string`，但我找不到任何有关此的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T21:50:39.343

> 为什么没有：
> * iostream_iterator
> * streambuf_iterator

不知道。可能是因为在进行输入和输出时语义很难定义。当您在带有迭代器的流中前进然后后退时，您期望会发生什么？

> *   字符串迭代器
> *   stringbuf_iterator？

这些很容易被现有的迭代器覆盖：

```
std::string                  line; // load line.
std::stringstream            linestream(line);
std::istream_iterator<int>   lineIterator(linestream); 
```

> 为什么上面列出的 4 个迭代器没有像 std::vector::const_iterator 这样的 const 版本？

因为当您遍历流时，流的状态正在发生变化。

> 如果它们不提供 begin() 和 end() 方法，我们应该如何迭代这些野兽中的任何一个？以上4个迭代器的目的是什么？

因为流通常是一个方向。您不是从头开始迭代，而是从流中的当前位置迭代到结尾。因此，您只需声明一个指定流的迭代器。迭代器从当前位置开始，向末尾移动。您可以通过不指定流来声明流迭代器的结束。

```
 std::istream_iterator<int>   loop(std::cin);
 for(;loop != std::istream_iterator<int>(); ++loop)
 {
     std::cout << *loop;
 } 
```

> N00b 问题：我在哪里可以找到详细说明这些类背后的逻辑以及如何使用它们的一些不错的示例的好参考？

这里是个好地方。
搜索“C++ istream_iterator”你会得到很多点击。

> 希望有经验的人能为上述问题提供一个很好的答案。

希望。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T21:46:43.443

> 为什么没有 iostream_iterator、streambuf_iterator 或 stringbuf_iterator？

我不知道。虽然我猜这只是因为它们会更复杂，而且对它们的需求不足。

> 为什么上面列出的 4 个迭代器没有类似的 const 版本 `std::vector<T>::const_iterator`？

一个 const 输入迭代器将是相当多余的，无论如何您只能从它们中读取，而不能写入它们。一个 const 输出迭代器将毫无意义，因为这会破坏它的唯一目的，即输出。

> 如果它们不提供 begin() 和 end() 方法，我们应该如何迭代这些野兽中的任何一个？以上4个迭代器的目的是什么？

通过使用各自的构造函数创建迭代器，例如

```
std::istream_iterator<int> in_begin(std::cin), in_end;
std::ostream_iterator<int> out_begin(std::cout, "\n");
std::copy(in_begin, in_end, out_begin); 
```

请注意，结束迭代器 for`istream_iterator`是通过简单地不向其构造函数传递任何参数来创建的，并且没有等效于`end()`输出迭代器的 for 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T21:39:08.640

这些流迭代器的存在是为了使用标准算法直接从/向容器写入/读取流。所以不要写

```
for (vector<int>::iterator i=v.begin(); i!=v.end(); ++i)
    cout << *i <<"\n"; 
```

你可以只使用 std::copy:

```
copy(v.begin(), v.end(), ostream_iterator(cout, "\n")); 
```

如需参考，请检查类似[this](http://stdcxx.apache.org/doc/stdlibref/2-8.html)或[TC++PL](http://en.wikipedia.org/wiki/The_C%2B%2B_Programming_Language)的内容。恕我直言，它们是一个巧妙的技巧，但并没有太大帮助，因为您几乎无法控制输入/输出。

# freebase - 如何在中间搜索freebase

> ID：11892017
> 
> 赞同：7
> 
> 时间：2012-08-09T21:11:26.930
> 
> 标签：freebase

我刚刚从 Freebase 中转储了数据，但是当我看到数据时，我看到了中间的“/m/03lp844”。但是我如何从那个中间获得更多细节呢？我在文档中找不到任何内容。

所以，我转储了电影数据，当我寻找演员时，它只显示了一堆中频，但我也需要演员的名字。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:49:25.847

您应该查看[Freebase 模式](http://www.freebase.com/schema/film/film?domain=/film)，以便了解事物如何相互连接。对于电影和演员，它们通过中间节点 /film/performance 连接在一起。您需要按照从电影到这些节点的链接，然后从那里到链接的演员（并查看演员的 /type/object/name 属性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:58:36.983

mid 是 freebase 中每个对象的唯一 ID。所以你会看到很多边缘指向其他中点。确实，我认为只有当链接信息不是字符串、数字等简单值时，它才会是中间值。查看这些 mid 所指内容的一种简单方法是使用 rdf api：您可以通过键查询 /en/michael_jordan ： [https](https://www.googleapis.com/freebase/v1/rdf/en/michael_jordan) ://www.googleapis.com/freebase/v1/rdf/en/michael_jordan 或者您可以通过以下方式查询mids： [https](https://www.googleapis.com/freebase/v1/rdf/m/054c1) ://www.googleapis.com/freebase/v1/rdf/m/054c1 ，您可以使用“rdfs:name”边缘获取演员姓名。显示给您的 RDF api 结果应该很熟悉。它们都是 freebase 转储中以 key 或 mid 开头的三元组。

其他有趣的 api 在这里： [http](http://wiki.freebase.com/wiki/API) ://wiki.freebase.com/wiki/API 您可以搜索、获取描述、查找与 mid 相关的所有内容等。希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:24:46.047

你可以使用 Freebase 的 MQLRead api，例如，这将返回一个关于 "micheal jordan" 的所有 "common topic" 的 json 字符串

[https://www.googleapis.com/freebase/v1/mqlread?query={"id":"/en/michael_jordan","limit":1,"*":null,"type":"/common/话题”}](https://www.googleapis.com/freebase/v1/mqlread?query=%7B%22id%22%3a%22/en/michael_jordan%22,%22limit%22:1,%22%2a%22%3anull,%22type%22%3a%22/common/topic%22%7D)

这将显示 /en/micheal_jordan 拥有的所有类型。

[https://www.googleapis.com/freebase/v1/mqlread?query={"id":"/en/michael_jordan","limit":1,"*":null}](https://www.googleapis.com/freebase/v1/mqlread?query=%7B%22id%22%3a%22/en/michael_jordan%22,%22limit%22:1,%22%2a%22%3anull%7D)

# node.js - 如果脚本被杀死，node.js 生成的进程仍然存在

> ID：11892028
> 
> 赞同：12
> 
> 时间：2012-08-09T21:12:36.943
> 
> 标签：node.js, spawn, child-process

是否可以确保当父进程被杀死时，使用 node.js child_process 生成的进程将被杀死？

这是一个示例脚本

```
var spawn = require('child_process').spawn;
var log_tail = spawn("tail", ["-f", "/dev/null"]);

setInterval(function() {
  console.log('just chilling');
}, 10000); 
```

如果我查看进程树，我会看到：

```
$ ps faux
ubuntu    9788  0.0  0.0  73352  1840 ?        S    15:04   0:00  |   \_ sshd: ubuntu@pts/7  
ubuntu    9789  0.0  0.2  25400  6804 pts/7    Ss   15:04   0:00  |       \_ -bash
ubuntu   10149  1.0  0.2 655636  8696 pts/7    Sl+  15:07   0:00  |           \_ node test.js
ubuntu   10151  0.0  0.0   7184   608 pts/7    S+   15:07   0:00  |               \_ tail -f /dev/null 
```

然后稍后我需要停止该脚本并且不能 ctrl-c （说我的 ssh 连接丢失了）

```
$ kill 10149
$ ps faux
ubuntu   10151  0.0  0.0   7184   608 pts/7    S    15:07   0:00 tail -f /dev/null 
```

您可以看到尾部进程仍在运行，并且已与任何父进程分离。

如果生成器被杀死，是否有编程方法来杀死生成的进程？

有没有可以传递给 spawn 的选项，或者我应该使用不同的方法还是需要捕获 kill 信号（这对 kill -9 有效）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T21:20:35.913

不是很劳动友好，但这是我使用的模板：

```
var spawn = require("child_process").spawn;
var workers = [];

var killWorkers = function() {
  workers.forEach(function(worker) {
    process.kill(worker);
  });
});

process.on("uncaughtException", killWorkers);
process.on("SIGINT", killWorkers);
process.on("SIGTERM", killWorkers);

var new_worker = spawn("tail", ["-f", "/dev/null"]);
workers.push(new_worker); 
```

当主进程死亡时，我主要使用它来杀死集群中的工作人员。Ed：显然，你可以`killWorkers`从任何地方调用，而不仅仅是崩溃或中断。

# mysql - MySQL以多对多关系选择数据（我认为）

> ID：11892036
> 
> 赞同：0
> 
> 时间：2012-08-09T21:13:17.450
> 
> 标签：mysql

假设我有一个名为联系人的 MySQL 表。它看起来像这样：

```
+----------+
|contacts  |
+----------+
|id: int   |
|name: vc  |
|rank: int |
+----------+ 
```

'rank' 是映射到名为 rank 的表的外键，如下所示：

```
+--------+
|ranks   |
+--------+
|id: int |
|name: vc|
+--------+ 
```

我做了一个看起来像这样的 sql 查询，希望我能为每个用户获得一个排名，但它只给了我第一个匹配排名的用户：

```
SELECT c.id, c.name, c.rank, r.name as rank_name FROM contacts c 
INNER JOIN ranks r ON r.id=c.rank 
```

在我看来，这将是获取联系人列表的正确 SQL 语句，其中还包含他们各自的等级名称。但是，每个等级我只能取回一个联系人，而且它始终是第一个联系人（如果按contact.id 排序）。

有什么解决办法吗？也许我错过了一些太容易的东西。我不知道。

谢谢！

# 编辑

根据请求，以下是一些行：

```
Table: ranks
id      name
6       Primary
7       Secondary
10      Test

Table: contacts
id      name        rank
1       Joe         6
2       Jane        6
3       Mike        7
4       Adam        10
5       Edna        7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:18:53.307

您的查询看起来不错，但问题可能出在您的数据上。你能验证你的数据，给我们看一些记录吗？

特别是问题可能是不是每个等级（或联系人）在另一个表中都有适当的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:21:58.097

您的 SQL 客户端是否包含 LIMIT 1,1？

通过使用 INNER JOIN，您将只获得两个表中存在的行（即匹配）。如果您想获得无等级的联系人，您可以使用 LEFT JOIN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:24:05.857

这不是多对多关系，因为您仅将 1 个等级映射到 0 个或更多联系人。

完全一样的查询应该可以工作。您能否向我们提供更多数据，例如确切查询中的内容以及表中的数据？

**编辑**：数据看起来不错。您是否正在使用

```
GROUP BY rank.id 
```

在您的确切查询中？

# sql - 查询 Oracle 以获取 ORA 代码错误详细信息

> ID：11892043
> 
> 赞同：3
> 
> 时间：2012-08-09T21:14:00.470
> 
> 标签：sql, oracle, error-handling

**我的问题：**如何查询 11g Oracle 数据库以获取错误代码的描述？

**背景：**有人告诉我，他们曾经看过可以查询 oracle 以获取有关特定`ORA-code`错误的详细信息的代码。我在谷歌上搜索了一段时间，似乎找不到类似的东西。有谁知道这是否可能？是否有 av$view 之类的？

**原因：**我想编写一个程序，该程序将返回我给它的错误代码的描述。所以当它写出来时，我可以这样称呼它：

```
select ora_code_desc('ORA-00000')
from dual; 
```

它会输出：

```
Normal, successful completion.
Cause: An operation has completed normally, having met no exceptions.
Action: No action required. 
```

或类似的东西:) 感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T21:34:09.310

它不能从 SQL 访问，但在 PL/SQL 中，您可以使用该`SQLERRM`函数。

例如

```
SQL> ed
Wrote file afiedt.buf

  1  begin
  2    dbms_output.put_line( sqlerrm(0) );
  3    dbms_output.put_line( sqlerrm(-1041) );
  4* end;
SQL> /
ORA-0000: normal, successful completion
ORA-01041: internal error. hostdef extension doesn't exist

PL/SQL procedure successfully completed. 
```

当然，您可以构建一个`ora_code_desc`函数，该函数接受一个字符串，删除前三个字符，将结果数字传递给`SQLERRM`，然后返回结果

```
SQL> ed
Wrote file afiedt.buf

  1  create or replace function ora_code_desc( p_code in varchar2 )
  2    return varchar2
  3  is
  4    l_str varchar2(1000);
  5  begin
  6    l_str := sqlerrm( substr(p_code, 4 ) );
  7    return l_str;
  8* end;
SQL> /

Function created.

SQL> select ora_code_desc( 'ORA-00000' ) from dual;

ORA_CODE_DESC('ORA-00000')
--------------------------------------------------------------------------------
ORA-0000: normal, successful completion 
```

Oracle 还在 Unix 平台上提供了一个实用程序，[它](http://perumal.org/oerr-the-command-line-oracle-error-code-lookup-utility/)提供了更多详细信息，尤其是您正在寻找的原因和操作。如果您真的也想要这些数据，您可以编写一个 Java 存储过程，调用操作系统 shell，执行`oerr`命令并返回结果。这将为您提供更多数据，但显然会更加复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T21:31:05.210

您正在寻找[SQLERRM](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/sqlerrm_function.htm)函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T21:38:22.670

从命令行

```
oerr ora <error number> 
```

输出：

```
oerr ora 1501
01501, 00000, "CREATE DATABASE failed"
// *Cause:  An error occurred during create database
// *Action: See accompanying errors. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T07:37:49.073

为了完整起见，我想指出，Oracle 文档确实包含所有错误的完整列表，而不仅仅是`ORA`那些错误。这些还包含解释和建议[的操作，如`oerr`实用程序](https://stackoverflow.com/a/11892336/146325)。

我知道开发人员更喜欢编写查询而不是 RTFM。但如果你喜欢复古，你可以[在这里找到它](http://docs.oracle.com/cd/E11882_01/server.112/e17766/toc.htm)。

# objective-c - 自动显示 MapKit 注释

> ID：11892045
> 
> 赞同：2
> 
> 时间：2012-08-09T21:14:04.680
> 
> 标签：objective-c, mapkit, mkannotation, ios5

我正在尝试获取自动显示标注的注释。我已经设法这样做了，但是当这样做时，地图出于某种原因放大了北冰洋中部。有人知道为什么会这样吗？这是我当前的代码：

```
- (void)viewDidLoad
{

    CLLocationCoordinate2D zoomLocation;
    zoomLocation.latitude = 59.*****;
    zoomLocation.longitude = 17.*****;
    MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation,  0.5 * METERS_PER_MILE, 0.5 * METERS_PER_MILE);
    MKCoordinateRegion adjustedRegion = [self.mapView regionThatFits:viewRegion];
    [self.mapView setRegion:adjustedRegion animated:YES];

    self.mapView.delegate = self;

    CLLocationCoordinate2D location = CLLocationCoordinate2DMake(59.*****, 17.*****);
    MapAnnotation *annotaion = [[MapAnnotation alloc] initWithCoordinates:location title:@"*****" subTitle:@"*****"];
    [self.mapView addAnnotation:annotation];
    [super viewDidLoad];
}

- (void)mapView:(MKMapView *)mv didAddAnnotationViews:(NSArray *)views
{
    MKAnnotationView *annotationView = [views objectAtIndex:0];
    id <MKAnnotation> mp = [annotationView annotation];
    [mv selectAnnotation:mp animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:49:40.180

`showsUserLocation`如果打开， 这似乎会发生。

当地图视图添加用户位置注释视图时，尝试选择它（`animated`设置为`YES`）会使地图缩放到北极（原因不明）。

在通话中设置`animated`为将避免缩放到北极，但您最终可能会选择用户位置注释而不是您的注释。`NO``selectAnnotation`

关闭`showsUserLocation`或 in`didAddAnnotationViews`循环遍历`views`数组，直到找到不是用户位置的注释：

```
for (MKAnnotationView *av in views) {
    id <MKAnnotation> mp = [av annotation];
    if (![mp isKindOfClass:[MKUserLocation class]])
    {
        [mv selectAnnotation:mp animated:YES];
        break;
    }
} 
```

# algorithm - Math.atan2 寻的导弹问题

> ID：11892046
> 
> 赞同：1
> 
> 时间：2012-08-09T21:14:07.687
> 
> 标签：algorithm, trigonometry, game-physics

我正在为安卓中的水平滚动太空射击游戏开发寻的导弹。我无法从我正在使用的算法中获得所需的行为。我希望导弹从玩家的船上水平射出，然后逐渐瞄准目标，如果弧度太大，有机会错过目标。它可以工作，除非导弹没有击中目标，在这种情况下，它通常会尝试跟随正弦波的路径，直到它跑出屏幕的右侧。我想要的是，导弹试图在其当前曲线上继续围绕目标盘旋（就像典型的寻的导弹），直到它击中一个精灵或跑出屏幕边缘。我可能会添加一个限制，这样它就会爆炸并且不会在屏幕上继续旋转，

下面是代码示例：

```
public class HomingMissile extends Shot
{
    Bitmap bitmap;
    Rect sourceRect;
    Rect destRect;

    private double heading;

    private Sprite target;

    private int frameNumber;
    private int currentFrame;
    private int frameDelta;

    public HomingMissile(Context context, ImageLoader imageLoader, int x,
        int y, int minX, int minY, int maxX, int maxY, int dx, int dy)
    {
        super(context, imageLoader, x, y, minX, minY, maxX, maxY, dx, dy);

        heading = 0;

        frameNumber = 3;
        currentFrame = 0;
        frameDelta = 1;

        target = new Sprite(context, imageLoader, 300, 50, minX, minY, 
            maxX, maxY, 0, 0);
    }

    @Override
    public void setBitmap(int id)
    {
        bitmap = imageLoader.GetBitmap(id);

        width = bitmap.getWidth();
        height = bitmap.getHeight() / frameNumber;

        sourceRect = new Rect(0, 0, width - 1, height);
        destRect = new Rect(X, Y, X + width - 1, Y + height - 1);
    }

    public void setTarget(Sprite sprite)
    {
        target = sprite;
    }

    @Override
    public void Move()
    {
        if (!visible)
            return;

        final double f = 0.03;
        double oldHeading = heading;

        double atanY = target.Y + (target.height / 2) - Y;
        double atanX = target.Y + target.X - X;

        heading = (1 - f) * oldHeading + f * Math.atan2(atanY, atanX);

        X += Math.cos(heading) * 10;
        Y += Math.sin(heading) * 10;

        UpdateBounds();

        if (currentFrame == frameNumber - 1)
            frameDelta = -frameDelta;

        if (currentFrame < 0)
        {
            frameDelta = -frameDelta;
            currentFrame += frameDelta;
        }

        sourceRect.top = height * currentFrame;
        sourceRect.bottom = sourceRect.top + height;

        currentFrame += frameDelta;

        if (target.Collide(destRect, bitmap))
        {
            visible = false;

            heading = 0;
        }

        if (OutOfBounds())
        {
            visible = false;

            heading = 0;
        }
    }

    @Override
    public void Draw(Canvas canvas)
    {
        if (visible)
        {
            canvas.save();
            canvas.rotate((float) (heading * 180 / Math.PI) * 1.5f, X + width
                / 2, Y + height / 2);
            canvas.drawBitmap(bitmap, sourceRect, destRect, paint);
                canvas.restore();
        }
    }
} 
```

归位算法发生在 Move() 中。我发现该问题的部分解决方案是添加此检查：

```
if (atanY >= 0 && atanX < 0)
    atanY = -atanY; 
```

在航向计算之前，但如果从大于目标 Y 位置的 Y 位置发射导弹，导弹仍然会出错。

我已经为此奋斗了好几天，而且我的三角学不是很好，所以我希望有人能帮助我。我尽量不要用代码混淆问题，但如果需要更多代码或信息，我可以提供。

谢谢！

## 编辑

我改变了这一行：

```
double atanX = target.Y + target.X - X; 
```

至：

```
double atanX = target.X - X; 
```

但是，如果导弹是从大于目标 Y 位置的 Y 位置发射的，它仍然会出错。它向目标俯冲，但如果它未命中，它会突然向上弯曲，就好像它要进行循环解循环一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:23:14.333

问题可能是由于跨越 360 度/0 度边界。

使用h = 航向，即导弹行进的方向，t = 导弹到目标的方向，f=0.1。现在考虑 t 与 h 顺时针成 20 度的情况。

如果 h = 180 则 t = 200 且 h(final) = 0.9*180+0.1*200 = 182，因此导弹按预期顺时针转动了少量。

但是如果 h = 350 那么 t = 370 = 10（根据 atan 公式），所以现在 h(final) = 0.9*350+0.1*10=316 并且导弹已经朝错误的方向转动了很大距离。

您需要添加一些逻辑来检查过零并避免此问题。

**添加评论**

好的 - atan 总是一件棘手的事情，因为 b = tan(a) 对范围内的任何 a 都有效 (-inf < a < + inf)，但 a = atan(b) 总是会在某个范围内提供 ab (bmin <= b < bmin + 360)，所以当一个向量围绕一个圆圈旋转时，在某个点上，当它上升超过 bmin + 360 并立即下降到 bmin 或下降到 bmin 以下时，计算的角度会出现不连续性突然跳到 bmin + 360。如果我没有说清楚，那么请考虑一下时钟超过 12:59 pm 时会发生什么。它不会持续到 13:00（欧洲除外），而是回到凌晨 1:00。

黑熊的回答显示了正确的想法。我等效的“修复”是替换您的行

```
 heading = (1 - f) * oldHeading + f * Math.atan2(atanY, atanX); 
```

有类似的东西

```
 TheAngle = Math.atan2(atanY, atanX);
  if Abs(TheAngle-oldheading) > 180 then
    TheAngle = TheAngle - Sign(TheAngle)*360;
  heading = (1 - f) * oldHeading + f * TheAngle; 
```

其中 Sign(x) = +1 表示 x >=0 和 -1 表示 x < 0

请注意，我的代码不是 C++、Java 或您使用的任何代码，因此您将无法直接进行剪切和粘贴 - 但您应该能够将其翻译成有用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:43:14.213

我前段时间遇到过同样的问题，一旦发现解决方案就很简单了；）这是我的更新例程的违规代码，它是帮助程序类的一部分，因此您可以将所有者视为您的导弹并瞄准它目标。它是 python，但应该很简单：

```
vectorToTarget = target.position - owner.position
ang = vectorToTarget.angle() - owner.angle

self.distanceToTarget = vectorToTarget.length()

if ang < -180:       # \
    ang += 360       #  | 
                     #  |-- this solved the problem!
elif ang > 180:      #  |
    ang -= 360       # /

self.angleToTarget = ang
owner.movement.turn(ang) 
```

ang 是所有者为了面对目标而应该转动的角度。解决方案是添加标记部分以纠正该行为

# oracle - 如何将表名作为参数传递给存储过程？

> ID：11892047
> 
> 赞同：1
> 
> 时间：2012-08-09T21:14:15.347
> 
> 标签：oracle, stored-procedures, plsql, rowtype

是否可以为`rowtype`作为参数传递给 a 的表名创建 a`Stored-Procedure`以及我如何知道要在`DBMS_OUUTPUT.PUT_LINE()`语句中寻址它们的列。

最终用户可以给出任何用户名（模式）和表名

我想做如下的事情，但它不起作用。

```
 CREATE OR REPLACE PROCEDURE SP_PASS(USER_NAME VARCHAR2,TAB_NAME IN VARCHAR2)
 AS
    TYPE REF_CUR IS REF CURSOR;
    V_ARR REF_CUR;
    V_SQL VARCHAR(200);
    V_ROWTYPE USER_NAME.TAB_NAME%ROWTYPE;
 BEGIN
     V_SQL := 'SELECT * FROM '||USER_NAME||'.'||TAB_NAME;
     OPEN V_ARR FOR V_SQL;
     LOOP
     FETCH V_ARR INTO V_ROWTYPE;
     EXIT WHEN V_ARR%NOT FOUND;
     DBMS_OUTPUT.PUT_LINE(V_ROWTYPE.COL1||','||V_ROWTYPE.COL2||','||V_ROWTYPE.COL3);
     END LOOP;
     CLOSE V_ARR;
END; 
```

让我知道是否可能。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T21:23:16.667

`%ROWTYPE`在编译时不知道表名时，不能为未知表创建变量，也不能静态引用列名。

您可以使用[dbms_sql 包](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_sql.htm)来处理完全动态的 SQL 语句。您需要准备 SQL 语句，描述列以找出列数及其数据类型，绑定适当的变量，然后获取数据。这是一种比您发布的示例更繁琐的代码编写方式，但它为您提供了极大的灵活性。

在我链接到的文档中有许多使用 dbms_sql 包的示例。您可能还想查看 Tom Kyte 的[dump_csv 函数](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:68212348056)，该函数使用`UTL_FILE`. 如果您真的想将数据写入`DBMS_OUTPUT`，您可以简单地将`UTL_FILE`调用替换为`DBMS_OUTPUT`。但我很确定您想做一些比将数据写入`DBMS_OUTPUT`缓冲区更有用的事情，因此 Tom 的过程可能更接近您真正想要完成的事情。

# iphone - iOS应用启动时如何播放开场动画

> ID：11892052
> 
> 赞同：1
> 
> 时间：2012-08-09T21:14:39.243
> 
> 标签：iphone, image, animation, launch

我试图让代码正确，以便在我在 xcode 中创建的 iphone 应用程序上播放开场动画。我希望它只在应用程序启动时播放（如愤怒的小鸟），而不是每次我回到主页时播放。我已经尝试了几件事，但似乎没有任何工作正常。有人能告诉我如何正确地做到这一点吗？

我正在使用一系列图像来创建动画。

我试图将来自极客柠檬教程（[http://www.youtube.com/watch?v=5AbdZ-8JBZQ](http://www.youtube.com/watch?v=5AbdZ-8JBZQ)）的动画代码放在 viewDidLoad 中。这确实可以播放动画，但每次我回到主页时，动画都会播放。我不希望在返回主页时播放动画，只是在应用程序启动时播放。

我还尝试添加另一个视图，它是应用程序启动时的第一个视图，并在 viewDidLoad 中播放动画，然后在动画完成后使用执行选择器转到主页（使用 after Delay 部分完成）。这也有效并且确实播放动画并且当我返回主屏幕时不播放但是这会导致导致应用程序崩溃的一些错误。我已将 NSLogs 放在 viewDidLoad 部分中，因此我可以看到页面正在运行，有时当我在应用程序中播放时，它会说正在调用我的打开动画 viewDidLoad。所以我认为这与崩溃有关。当我取出这个视图并直接进入主视图时，它不会崩溃。

我也尝试将它放在应用程序委托中，但我根本无法让它工作。

请帮助这让我发疯我无法弄清楚出了什么问题。我知道它可以工作愤怒的小鸟和其他人非常成功地做到这一点。

如果有更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-11T17:51:40.783

尝试这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self.window makeKeyAndVisible];

    UIImageView *imageView =[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    imageView.animationImages = [NSArray arrayWithObjects:
                                 [UIImage imageNamed:@"myImage1.png"], [UIImage imageNamed:@"myImage2.png"], [UIImage imageNamed:@"myImage3.png"], [UIImage imageNamed:@"myImage4.png"], [UIImage imageNamed:@"myImage5.png"], [UIImage imageNamed:@"myImage6.png"], nil];

    imageView.animationDuration = 0.5;
    imageView.animationRepeatCount = 3;
    [imageView startAnimating];
    [self.window addSubview:imageView];

    return YES;
} 
```

为您添加动画作为子视图`self.window`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:17:46.993

您需要将它包含在您的应用程序委托的 - (void)applicationWillEnterForeground:(UIApplication *)application 方法中，仅当您的应用程序“启动”时才会调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:19:31.190

或者你也可以把它放进去

> -（BOOL）应用程序：（UIApplication *）应用程序didFinishLaunchingWithOptions：（NSDictionary *）launchOptions

我有一个视图控制器，并在其中加载视图。从那里调用这个。

如果您的动画在单个视图中，您可以让该动画在单独的线程上运行，并在主线程上休眠。

> (void)applicationDidFinishLaunching:(UIApplication *)application {
> // 添加子视图
> 
> [窗口 addSubview:animationController.view];
> // 一段时间后做另一件事
> [self performSelector:@selector(firstcontroller) withObject:nil afterDelay:5];
> [窗口 makeKeyAndVisible]; }
> 
> -(void)firstcontroller{
> [窗口 addSubview:firstControllerAfterLaunch.view];
> }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T00:35:15.460

尝试使用 dispatch_once 将动画代码放入 viewDidAppear 中。这样，您将确保在应用程序的生命周期内只调用一次动画。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T21:20:19.923

将您的动画方法放入

```
- (BOOL)application:(UIApplication *)app didFinishLaunchingWithOptions:(NSDictionary *)opts 
```

方法。使用为动画指定的单独视图。将其添加到应用程序的关键窗口中，并在动画结束时将其删除。

# php - SHA-256 是否区分大小写？

> ID：11892053
> 
> 赞同：18
> 
> 时间：2012-08-09T21:14:45.757
> 
> 标签：php, ios, sha256

我在应用程序的两侧运行使用 SHA-256 的服务 - 一个是服务器端 PHP 实现，另一个是客户端 iOS 实现。两边都使用算法的结果是相同的字母数字字符串，除了所有字母在 iOS 上大写而在 PHP 上小写的事实。它们是相同的字母数字字符串这一事实使我相信 SHA-256 不区分大小写，但我找不到任何支持我的假设的文档。有人可以给我看一些文件来确认这一点吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-09T21:18:09.893

如果您指的是十六进制字符串输出，那么是的，不区分大小写。它是二进制数据的文本表示。

[http://en.wikipedia.org/wiki/十六进制](http://en.wikipedia.org/wiki/Hexadecimal)

算法本身绝对是区分大小写的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T21:20:16.290

**没有**像样的加密哈希函数是不区分大小写的，因为那样会更容易产生冲突。输出是另一回事。它基本上是一个很大的数字（因此*不适用*大小写），但为了方便起见，它以 16 为基数给出，即使用字母 a 到 f 作为附加数字。十六进制表示法确实不区分大小写，或者至少大写和小写变体都是常见的并且可以识别。没关系，也不会改变所代表的数字。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-09T21:20:46.783

如果输入的二进制表示在两边相同，则哈希值的二进制表示将相同。十六进制不区分大小写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T21:20:16.290

所有`SHA`系列都是二进制算法，它们对大小写一无所知，因此它们不能不区分大小写。
您可以简单地在单台机器上使用一个字符串的 2 个输出和不同的情况进行测试，您可以看到它们提供了不同的结果。
在您的情况下，我认为如果一切正常，iOS 可能会在手机中显示大写字符串，但在内部传递给您正常（小写）字符串

# jquery - jQuery UI 可拖动对齐网格，选择要对齐的元素？

> ID：11892056
> 
> 赞同：1
> 
> 时间：2012-08-09T21:15:02.330
> 
> 标签：jquery, jquery-ui, draggable, droppable

我正在使用 jQuery UI 的可拖动和可放置可拖动元素被设置为捕捉到具有特定类的元素

删除元素时，如何选择要捕捉到的元素？我似乎在文档中找不到任何东西谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:20:48.477

您必须在此处找到的 jQuery UI 事件列表中捕获 STOP 事件：

[http://jqueryui.com/demos/draggable/#events](http://jqueryui.com/demos/draggable/#events)

例子：

```
$( ".selector" ).draggable({
   stop: function(event, ui) { $(this).parent()//you got it from here }
}); 
```

# python - 使用python处理json中的转义url字符串

> ID：11892061
> 
> 赞同：2
> 
> 时间：2012-08-09T21:15:16.173
> 
> 标签：python, json, parsing, escaping, url-parsing

我正在访问返回 json 的服务，如下所示：

```
{
"A":"A value",
"B":{
      "B1":"B1 value",
      "B2":"B2 value"
    },
"C":{
               "c_url":"http:\/\/someurl:someport\/somefolder\/somefile",

    }
} 
```

我想要做的是解析这个 json 并在键值对中获取文件夹的 url 和 somefile 部分。

所以，基本上，在我的脚本处理完 json 之后，它会以某种分隔方式在文件中输出 url 和 somefile。

文件处理上述提供的 json 后的输出将是：

```
url: http://someurl:someport/somefolder/somefile
file: somefile 
```

我很确定python中有许多json解析器可以解析json，但是我将如何处理已经用转义字符预处理的url字符串？我是否需要编写自己的 url-encoder 来去除 url 字符串中的转义字符？

此外，我需要标记 url 的各个组件以到达“文件”部分，是否有任何库可以帮助解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:35:05.050

因此，根据[http://www.quora.com/Why-does-the-cjson-Python-module-not-correctly-unescape-reverse-solidus-solidus](http://www.quora.com/Why-does-the-cjson-Python-module-not-correctly-unescape-reverse-solidus-solidus)

`simplejson`应该能够处理这种“错误”的转义算法。考虑：

```
#!/usr/bin/env python
import simplejson

print simplejson.loads('"http:\/\/someurl:someport\/somefolder\/somefile"') 
```

请注意，这`simplejson`不是标准包，但可以通过`easy_install`.

样本输出：

```
[85][23:35:24] vlazarenko@alluminium (~/tests) > python unescape.py 
http://someurl:someport/somefolder/somefile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T21:42:48.747

您的示例 JSON 在“c_url”kv 对之后不需要逗号。

```
>>> import json
>>> st = '{"A":"A value","B":{ "B1":"B1 value", "B2":"B2 value" },"C":{ "c
_url":"http:\/\/someurl:someport\/somefolder\/somefile" }}'
>>> json.loads(st)
{u'A': u'A value', u'C': {u'c_url': u'http://someurl:someport/somefolder/somefile'}, u'B': {u'B1': u
'B1 value', u'B2': u'B2 value'}} 
```

并仅获取 URL 的“somefile”部分：

```
url.split('/')[url.count('/')] 
```

# r - 如何将每日时间序列转换为平均每周？

> ID：11892063
> 
> 赞同：0
> 
> 时间：2012-08-09T21:15:26.393
> 
> 标签：r, time-series, aggregate, xts

我希望（算术）平均每日数据，从而将我的每日时间序列转换为每周时间序列。

遵循此线程：[如何使用 R 按列计算每周数据的平均值？](https://stackoverflow.com/questions/11129562/how-does-one-compute-the-mean-of-weekly-data-by-column-using-r)，我正在使用**xts**库。

```
# Averages daily time series into weekly time series
# where my source is a zoo object
source.w <- apply.weekly(source, colMeans) 
```

我遇到的问题是它平均了周二到下周一的系列数据。

我正在寻找从周一到周五平均我的每日数据的选项。

有什么提示吗？

这里还有一点：

```
 # here is part of my data, from a "blé colza.txt" file

    24/07/2012  250.5   499
    23/07/2012  264.75  518.25
    20/07/2012  269.25  525.25
    19/07/2012  267 522.5
    18/07/2012  261.25  517
    17/07/2012  265.75  522.25
    16/07/2012  264.25  523.25
    13/07/2012  258.25  517
    12/07/2012  253.75  513
    11/07/2012  246.25  512.75
    10/07/2012  248 515
    09/07/2012  247 519.25
    06/07/2012  243.25  508.25
    05/07/2012  245 508.5
    04/07/2012  236 500.5
    03/07/2012  234 497.75
    02/07/2012  234.25  489.75
    29/06/2012  229 490.25
    28/06/2012  229.75  487.25
    27/06/2012  229.75  493
    26/06/2012  226.5   486
    25/06/2012  220 482.25
    22/06/2012  214.25  472.5
    21/06/2012  212 469.5
    20/06/2012  210.25  473.75
    19/06/2012  208 472.75
    18/06/2012  206.75  462.5
    15/06/2012  203 456.5
    14/06/2012  205.25  460.5
    13/06/2012  205.25  465.25
    12/06/2012  205.25  469
    11/06/2012  208 471.5
    08/06/2012  208 468.5
    07/06/2012  208 471.25
    06/06/2012  208 467
    05/06/2012  208 458.75
    04/06/2012  208 457.5
    01/06/2012  208 463.5
    31/05/2012  208 466.75
    30/05/2012  208 468
    29/05/2012  212.75  469.75
    28/05/2012  212.75  469.75
    25/05/2012  212.75  465.5

# Loads external libraries
library("zoo") # or require("zoo")
library("xts") # or require("xts")

# Loads data as a zoo object
source <- read.zoo("blé colza.txt", sep=",", dec=".", header=T, na.strings="NA",     format="%d/%m/%Y")

# Averages daily time series into weekly time series
# https://stackoverflow.com/questions/11129562/how-does-one-compute-the-mean-of-weekly-    data-by-column-using-r
source.w <- apply.weekly(source, colMeans) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T15:43:26.087

[mrdwab](https://stackoverflow.com/users/1270695/mrdwab)的[答案](https://stackoverflow.com/a/11896895/271616)恰好起作用，因为它们与 OP 共享一个时区（或其特征）。为了显示：

```
Lines <- 
    "24/07/2012  250.5   499
    23/07/2012  264.75  518.25
    20/07/2012  269.25  525.25
    19/07/2012  267 522.5
    18/07/2012  261.25  517
    17/07/2012  265.75  522.25
    16/07/2012  264.25  523.25
    13/07/2012  258.25  517
    12/07/2012  253.75  513
    11/07/2012  246.25  512.75
    10/07/2012  248 515
    09/07/2012  247 519.25
    06/07/2012  243.25  508.25
    05/07/2012  245 508.5
    04/07/2012  236 500.5
    03/07/2012  234 497.75
    02/07/2012  234.25  489.75
    29/06/2012  229 490.25
    28/06/2012  229.75  487.25
    27/06/2012  229.75  493
    26/06/2012  226.5   486
    25/06/2012  220 482.25
    22/06/2012  214.25  472.5
    21/06/2012  212 469.5
    20/06/2012  210.25  473.75
    19/06/2012  208 472.75
    18/06/2012  206.75  462.5
    15/06/2012  203 456.5
    14/06/2012  205.25  460.5
    13/06/2012  205.25  465.25
    12/06/2012  205.25  469
    11/06/2012  208 471.5
    08/06/2012  208 468.5
    07/06/2012  208 471.25
    06/06/2012  208 467
    05/06/2012  208 458.75
    04/06/2012  208 457.5
    01/06/2012  208 463.5
    31/05/2012  208 466.75
    30/05/2012  208 468
    29/05/2012  212.75  469.75
    28/05/2012  212.75  469.75
    25/05/2012  212.75  465.5"

# Get R's timezone information (from ?Sys.timezone)
tzfile <- file.path(R.home("share"), "zoneinfo", "zone.tab")
tzones <- read.delim(tzfile, row.names = NULL, header = FALSE,
  col.names = c("country", "coords", "name", "comments"),
  as.is = TRUE, fill = TRUE, comment.char = "#")

# Run the analysis on each timezone
out <- list()
library(xts)
for(i in seq_along(tzones$name)) {
  tzn <- tzones$name[i]
  Sys.setenv(TZ=tzn)
  con <- textConnection(Lines)
  Source <- read.zoo(con, format="%d/%m/%Y")
  out[[tzn]] <- apply.weekly(Source, colMeans)
} 
```

现在您可以运行`head(out,5)`并看到一些输出根据使用的时区而有所不同：

```
head(out,5)
$`Europe/Andorra`
               V2      V3
2012-05-27 212.75 467.625
2012-06-03 208.95 465.100
2012-06-10 208.00 467.400
2012-06-17 205.10 462.750
2012-06-24 212.90 474.150
2012-07-01 229.85 489.250
2012-07-08 241.05 506.850
2012-07-15 254.10 516.200
2012-07-22 265.60 521.050
2012-07-23 250.50 499.000

$`Asia/Dubai`
               V2      V3
2012-05-27 212.75 467.625
2012-06-03 208.95 465.100
2012-06-10 208.00 467.400
2012-06-17 205.10 462.750
2012-06-24 212.90 474.150
2012-07-01 229.85 489.250
2012-07-08 241.05 506.850
2012-07-15 254.10 516.200
2012-07-22 265.60 521.050
2012-07-23 250.50 499.000

$`Asia/Kabul`
               V2      V3
2012-05-27 212.75 467.625
2012-06-03 208.95 465.100
2012-06-10 208.00 467.400
2012-06-17 205.10 462.750
2012-06-24 212.90 474.150
2012-07-01 229.85 489.250
2012-07-08 241.05 506.850
2012-07-15 254.10 516.200
2012-07-22 265.60 521.050
2012-07-23 250.50 499.000

$`America/Antigua`
                V2      V3
2012-05-25 212.750 465.500
2012-06-01 209.900 467.550
2012-06-08 208.000 464.600
2012-06-15 205.350 464.550
2012-06-22 210.250 470.200
2012-06-29 227.000 487.750
2012-07-06 238.500 500.950
2012-07-13 250.650 515.400
2012-07-20 265.500 522.050
2012-07-24 257.625 508.625

$`America/Anguilla`
                V2      V3
2012-05-25 212.750 465.500
2012-06-01 209.900 467.550
2012-06-08 208.000 464.600
2012-06-15 205.350 464.550
2012-06-22 210.250 470.200
2012-06-29 227.000 487.750
2012-07-06 238.500 500.950
2012-07-13 250.650 515.400
2012-07-20 265.500 522.050
2012-07-24 257.625 508.625 
```

`Sys.setenv(TZ="<yourTZ>")`更强大的解决方案是通过使用全局设置或`indexTZ(Source) <- "<yourTZ>"`为每个单独的对象设置它来确保正确表示您的时区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T07:01:45.833

我能够重现您的问题，您可以使用`period.apply()`自定义“端点”来解决它。

首先，您提供的数据以其他人可以轻松阅读的格式提供。

```
temp = structure(list(V1 = structure(c(33L, 32L, 29L, 27L, 25L, 23L, 
22L, 19L, 17L, 15L, 13L, 12L, 9L, 7L, 5L, 3L, 2L, 41L, 39L, 37L, 
36L, 35L, 31L, 30L, 28L, 26L, 24L, 21L, 20L, 18L, 16L, 14L, 11L, 
10L, 8L, 6L, 4L, 1L, 43L, 42L, 40L, 38L, 34L), .Label = c("01/06/2012", 
"02/07/2012", "03/07/2012", "04/06/2012", "04/07/2012", "05/06/2012", 
"05/07/2012", "06/06/2012", "06/07/2012", "07/06/2012", "08/06/2012", 
"09/07/2012", "10/07/2012", "11/06/2012", "11/07/2012", "12/06/2012", 
"12/07/2012", "13/06/2012", "13/07/2012", "14/06/2012", "15/06/2012", 
"16/07/2012", "17/07/2012", "18/06/2012", "18/07/2012", "19/06/2012", 
"19/07/2012", "20/06/2012", "20/07/2012", "21/06/2012", "22/06/2012", 
"23/07/2012", "24/07/2012", "25/05/2012", "25/06/2012", "26/06/2012", 
"27/06/2012", "28/05/2012", "28/06/2012", "29/05/2012", "29/06/2012", 
"30/05/2012", "31/05/2012"), class = "factor"), V2 = c(250.5, 
264.75, 269.25, 267, 261.25, 265.75, 264.25, 258.25, 253.75, 
246.25, 248, 247, 243.25, 245, 236, 234, 234.25, 229, 229.75, 
229.75, 226.5, 220, 214.25, 212, 210.25, 208, 206.75, 203, 205.25, 
205.25, 205.25, 208, 208, 208, 208, 208, 208, 208, 208, 208, 
212.75, 212.75, 212.75), V3 = c(499, 518.25, 525.25, 522.5, 517, 
522.25, 523.25, 517, 513, 512.75, 515, 519.25, 508.25, 508.5, 
500.5, 497.75, 489.75, 490.25, 487.25, 493, 486, 482.25, 472.5, 
469.5, 473.75, 472.75, 462.5, 456.5, 460.5, 465.25, 469, 471.5, 
468.5, 471.25, 467, 458.75, 457.5, 463.5, 466.75, 468, 469.75, 
469.75, 465.5)), .Names = c("V1", "V2", "V3"), class = "data.frame", row.names = c(NA, 
-43L)) 
```

我们会进行清理并将对象转换为`xts`对象。

```
temp$V1 = as.Date(temp$V1, format="%d/%m/%Y")
library(xts)
temp.x = xts(temp[-1], order.by=temp$V1) 
```

现在。我们尝试了这个`apply.weekly()`功能，但它没有给我们你想要的。

```
apply.weekly(temp.x, colMeans)
#                V2      V3
# 2012-05-28 212.75 467.625
# 2012-06-04 208.95 465.100
# 2012-06-11 208.00 467.400
# 2012-06-18 205.10 462.750
# 2012-06-25 212.90 474.150
# 2012-07-02 229.85 489.250
# 2012-07-09 241.05 506.850
# 2012-07-16 254.10 516.200
# 2012-07-23 265.60 521.050
# 2012-07-24 250.50 499.000 
```

要使用`period.apply()`，您需要指定期间的端点（可以是不规则的）。在这里，我们的第一次月经只是第一次约会，从那里开始，每五天一次。这还剩下几天，所以我们添加`nrow(temp.x)`作为最后一个时期的结束。

```
ep = c(0, seq(1, nrow(temp.x), by = 5), nrow(temp.x))
period.apply(temp.x, INDEX = ep, FUN = colMeans)
#                 V2      V3
# 2012-05-25 212.750 465.500
# 2012-06-01 209.900 467.550
# 2012-06-08 208.000 464.600
# 2012-06-15 205.350 464.550
# 2012-06-22 210.250 470.200
# 2012-06-29 227.000 487.750
# 2012-07-06 238.500 500.950
# 2012-07-13 250.650 515.400
# 2012-07-20 265.500 522.050
# 2012-07-24 257.625 508.625 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T03:04:08.753

我运行了您的示例，如果我正确理解了问题，则该`apply.weekly`函数将第一个星期五与您的数据的第一个星期一聚合。我不使用该`xts`软件包，因此其他人必须对此提供更多见解。我会将日期转换为日期向量，其中每周星期一的日期表示该周的每个观察值。`?strptime`总结了我用于转换的代码。

```
# Get the year of the first observation
start_year <- format(time(source)[1],"%Y")
# Convert this into a date for the 1st of Jan in that year.
start_date <- as.Date(strptime(paste(start_year, "1 1"), "%Y %d %m"))

# Using the difftime function determine the distance (days) since the first day of the first year.
jul_day <- as.numeric(difftime(time(source),start_date),units="days")
# Get the date of the Monday before each observation and add it to the start of the year. 
mondays <- start_date + (jul_day - (jul_day-1)%%7)
# the %% calculates the remainder.
# to check that it has worked convert the mondays vector into day names.
format(mondays, "%A")

# And now you can aggregate the observations using the mondays vector.
source.w <- aggregate(source[,1:2], mondays, "mean") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T10:49:39.473

跟进约书亚乌尔里希的回答。

在我的系统（kUbuntu 12）上，以下内容没有检索到 zone.tab 文件

```
tzfile <- file.path(R.home("share"), "zoneinfo", "zone.tab") 
```

但是，我能够通过以下方式找到 zone.tab

```
locate zone.tab 
```

出于某种原因（可能是文件权限），我无法直接指向该 zone.tab 文件，即：

```
tzfile <- "usr/share/zoneinfo/zone.tab" 
```

回来：

```
Error in file(file, "rt") : cannot open the connection
In addition: Warning message:
In file(file, "rt") :
  cannot open file 'usr/share/zoneinfo/zone.tab': No such file or directory 
```

制作 zone.tab 的本地副本并指向该副本后问题解决：

```
tzfile <- "~/R/zone.tab" 
```

现在，如果你用谷歌搜索 zone.tab，你会在网上找到一份 zone.tab 的副本，以防你的系统没有它或者它已损坏或其他什么。这里是这样一个地方：

```
http://www.ietf.org/timezones/data/zone.tab 
```

PS我<15，所以我不能发表评论，否则我会这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-20T21:20:34.957

再看看我手头的问题。

使用**xts**库非常简单。

```
# say you have xts object name 'dat'
ep <- endpoints(dat, on = 'weeks')                          # 
period.apply(x = dat, INDEX = ep, FUN = mean) 
```

# c# - 具有自定义 PropertyDescriptor 的 PropertyGrid

> ID：11892064
> 
> 赞同：4
> 
> 时间：2012-08-09T21:15:30.140
> 
> 标签：c#, winforms, propertygrid

我一直在努力让自定义 PropertyDescriptors 以我想要的方式使用 PropertyGrid。

前提：

*   我有一个名为“Animal”的类，其中包含属性`Age`、`Type`、`Location`和`Name`。
*   我有另一个名为“AnimalGroup”的类，其中包含`List<Animal>`存储动物的位置。包含此列表的类成员称为`Members`。
*   在程序的 UI 中，表单元素将列出分配给 PropertGrid属性`PropertyGrid`的 AnimalGroup 中的动物。`SelectedObject`

第三个子弹我可以很容易地开始工作（见下图）。

![PropertyGrid 显示 AnimalGroup 的成员。](../Images/d3892ff76d92a99c723bb6cb71e3df59.png)

AnimalGroup 类实现了该`ICustomTypeDescriptor`接口以在其`Members`类成员中实现 Animals 的列表功能。

不幸的是，如上图所示，属性值只是 Animal 的 ToString 方法返回的值。

**我想让用户能够编辑 PropertyGrid 中每个动物的成员（年龄、类型、位置和名称）。我怎样才能做到这一点？** 我认为需要有某种类型的自定义编辑器。然而，老实说，我不知道从哪里开始，因为谷歌搜索并没有出现太多。

以下是我遵循的教程：

*   [在运行时向（从）PropertyGrid 添加（删除）项目](http://www.codeproject.com/Articles/9280/Add-Remove-Items-to-from-PropertyGrid-at-Runtime)
*   [将 PropertyGrid 与字典对象一起使用](http://www.differentpla.net/content/2005/02/using-propertygrid-with-dictionary)（本教程似乎很老）

如果需要，这是我的代码（使用 .NET 4.0）：

**动物.cs**

```
public class Animal
{
    private String _Name;

    public String Name
    {
        get { return _Name; }
        set { _Name = value; }
    }

    private String _Type;

    public String Type
    {
        get { return _Type; }
        set { _Type = value; }
    }
    private String _Age;

    public String Age
    {
        get { return _Age; }
        set { _Age = value; }
    }
    private String _Location;

    public String Location
    {
        get { return _Location; }
        set { _Location = value; }
    }

    public override string ToString()
    {
        return this.Name + " - " + this.Type;
    }
} 
```

**动物组.cs**

```
public class AnimalGroup : ICustomTypeDescriptor
{
    public List<Animal> Members;

    public AnimalGroup()
    {
        this.Members = new List<Animal>();
    }

    public AttributeCollection GetAttributes()
    {
        return TypeDescriptor.GetAttributes(this, true);
    }

    public string GetClassName()
    {
        return TypeDescriptor.GetClassName(this, true);
    }

    public string GetComponentName()
    {
        return TypeDescriptor.GetComponentName(this, true);
    }

    public TypeConverter GetConverter()
    {
        return TypeDescriptor.GetConverter(this, true);
    }

    public EventDescriptor GetDefaultEvent()
    {
        return TypeDescriptor.GetDefaultEvent(this, true);
    }

    public PropertyDescriptor GetDefaultProperty()
    {
        return null;
    }

    public object GetEditor(Type editorBaseType)
    {
        return TypeDescriptor.GetEditor(this, editorBaseType, true);
    }

    public EventDescriptorCollection GetEvents(Attribute[] attributes)
    {
        return TypeDescriptor.GetEvents(this, attributes, true);
    }

    public EventDescriptorCollection GetEvents()
    {
        return TypeDescriptor.GetEvents(this, true);
    }

    public PropertyDescriptorCollection GetProperties(Attribute[] attributes)
    {
        PropertyDescriptor[] pds = new PropertyDescriptor[this.Members.Count];

        int i = 0;
        foreach (Animal a in this.Members)
        {
            pds[i] = new AnimalPropertyDescriptor(a, attributes);

            i++;
        }

        return new PropertyDescriptorCollection(pds);
    }

    public PropertyDescriptorCollection GetProperties()
    {
        return this.GetProperties(new Attribute[0]);
    }

    public object GetPropertyOwner(PropertyDescriptor pd)
    {
        return this.Members;
    }
} 
```

**AnimalPropertyDescriptor.cs**

```
public class AnimalPropertyDescriptor : PropertyDescriptor
{
    private Animal property;

    public AnimalPropertyDescriptor(Animal target, Attribute[] attrs)
        : base(target.Name, attrs)
    {
        this.property = target;
    }

    public override bool CanResetValue(object component)
    {
        return false;
    }

    public override Type ComponentType
    {
        get { return null; }
    }

    public override object GetValue(object component)
    {
        return property;
    }

    public override bool IsReadOnly
    {
        get { return false;  }
    }

    public override Type PropertyType
    {
        get { return this.property.GetType(); }
    }

    public override void ResetValue(object component)
    {
        // Not relevant.
    }

    public override void SetValue(object component, object value)
    {
        this.property = (Animal)value;
    }

    public override bool ShouldSerializeValue(object component)
    {
        return false;
    }
} 
```

仅供参考，我知道代码有点荒谬（有名字的动物，动物群体等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:13:05.660

看起来你缺少一个转换器：

```
internal class AnimalConverter : ExpandableObjectConverter {

  public override object ConvertTo(ITypeDescriptorContext context, 
                                   CultureInfo culture, 
                                   object value,
                                   Type destinationType) {

    if (destinationType == typeof(string) && value is Animal) {
      Animal a = (Animal)value;
      return a.ToString();
    }
    return base.ConvertTo(context, culture, value, destinationType);
  }
} 
```

然后装饰你的动物：

```
[TypeConverter(typeof(AnimalConverter))]
public class Animal {...} 
```

发现此 Code Project [Customized display of collection data in a PropertyGrid](http://www.codeproject.com/Articles/4448/Customized-display-of-collection-data-in-a-Propert)很有帮助。

# ruby-on-rails - 第一个 Rails 应用程序 - 渲染

> ID：11892065
> 
> 赞同：0
> 
> 时间：2012-08-09T21:15:30.487
> 
> 标签：ruby-on-rails, rendering

我有

```
 <%= javascript_include_tag "application" %> 
```

我想我应该得到

```
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

但是我怎么得到

```
 <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/home.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:17:52.763

很可能是因为您处于开发模式。默认情况下，在开发模式`config.assets.debug`下`true`，防止 Sprockets 连接您的 javascript/css 包含。在`config/evironments/development.rb`集合

```
config.assets.debug = false 
```

[在这个 Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html#turning-debugging-off)中阅读它。

# php - 找出 mysqli 查询字符串

> ID：11892066
> 
> 赞同：1
> 
> 时间：2012-08-09T21:15:31.353
> 
> 标签：php, mysqli

简短的问题，但显然谷歌或 php.net 对此一无所知，所以我很好奇是否可能。

你能得到一个mysqli元素的查询字符串吗？我需要它来生成正确的错误函数

```
$mysqli = new mysqli(....);
$mysqli->query('INSERT INTO test(value) VALUES ('.rand(1,10000).');');
// here how do i find out the query of the $mysqli object WITHOUT having 
// to save it before (i.e. using the actual $mysqli object) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:21:49.367

从[http://www.php.net/manual/en/class.mysqli-result.php](http://www.php.net/manual/en/class.mysqli-result.php)判断- 你不能。

`$mysqli->query()`是一个方法调用，它返回`mysqli_result`对象，并且查看上面的手册页，它不包含刚刚执行创建它的查询的记录。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-09T21:21:59.897

不确定我是否理解您的问题，但是：

```
$sql = "INSERT INTO test(value) VALUES ('.rand(1,10000).');";
$mysqli->query($sql); 
```

...然后，稍后在您的脚本中，您可以参考`$sql`：

```
if($sql = '...'){...} 
```

等等。

# java - 顺序写入文件与批量写入

> ID：11892069
> 
> 赞同：1
> 
> 时间：2012-08-09T21:15:55.053
> 
> 标签：java, file-io

我有一个程序可以在一个平面文件中写入大约 800 万行数据。截至目前，该程序正在为每条记录调用 bufferedwriter.write，我打算使用以下策略批量写入

1.  保留一个数据结构（我使用数组）来保存特定数量的记录。
2.  使用数组将详细信息写入文件。这是代码片段（数组是存储记录的数组的名称，阈值计数是编写过程的开始）

    ```
    if (array.length==thresholdCount) {
        writeBulk(array);
    }

    public void writeBulk(String[] inpArray) {
         for (String line:inpArray) {
              if (line!=null) {
                   try {
                        writer.write(line +"\n"); 
                   } catch (IOException e) {
                        e.printStackTrace();
                   }
              }
         }

     } 
    ```

但是我没有看到太多的性能改进。我想知道是否有办法确定最佳阈值计数？我还计划进一步调整代码，以便将数组中的每个元素存储为一些 n 条记录的串联，然后调用 bulk 方法。例如，长度为 5000 的数组实际上将包含 50000 条记录，其中数组中的每个索引包含 10 条记录。但是在这样做之前，我需要专家意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:28:13.927

对文件的写入在被推送到磁盘之前已经以类似的方式缓冲（除非您刷新 - 实际上并不总是这样做）。因此，预缓冲写入不会加快整个过程。注意：一些 IO 类尝试通过在每次写入后插入刷新请求来进行立即写入。对于那些特殊情况，预缓冲有时会有所帮助，但通常您首先只使用类的缓冲版本，而不是自己手动缓冲。

如果您正在写入文件末尾以外的其他位置，那么您可以看到改进，因为写入文件中间不需要复制硬盘上已刷新条目的内容。

# java - 如何在 Heroku 下的 java cedar 堆栈中强制执行 HTTPS

> ID：11892072
> 
> 赞同：3
> 
> 时间：2012-08-09T21:16:22.370
> 
> 标签：java, heroku, https

我发现了很多关于在 heroku 下强制执行 HTTPS 的问题，但没有关于 java.util 的回应。

这是我找到的链接：

斯卡拉：[http ://www.andersen-gott.com/2012/03/using-unfiltered-and-https-on-heroku.html](http://www.andersen-gott.com/2012/03/using-unfiltered-and-https-on-heroku.html)

Rails：[Rails - 如何从 http://example.com 重定向到 https://www.example.com](https://stackoverflow.com/questions/4329176/rails-how-to-redirect-from-http-mysite-com-to-https-www-mysite-com)

请注意，我使用的是 Spring MVC 3.1，所以我更喜欢基于 WebMvcConfigurerAdapter.addInterceptors(InterceptorRegistry registry) 的解决方案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T23:09:40.363

这是一个将所有非 https 请求重定向到 https 的 Servlet 过滤器：

```
package com.jamesward;

import javax.servlet.*;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class HttpsEnforcer implements Filter {

    private FilterConfig filterConfig;

    public static final String X_FORWARDED_PROTO = "x-forwarded-proto";

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        this.filterConfig = filterConfig;
    }

    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {

        HttpServletRequest request = (HttpServletRequest) servletRequest;
        HttpServletResponse response = (HttpServletResponse) servletResponse;

        if (request.getHeader(X_FORWARDED_PROTO) != null) {
            if (request.getHeader(X_FORWARDED_PROTO).indexOf("https") != 0) {
                response.sendRedirect("https://" + request.getServerName() + (request.getPathInfo() == null ? "" : request.getPathInfo()));
                return;
            }
        }

        filterChain.doFilter(request, response);
    }

    @Override
    public void destroy() {
        // nothing
    }
} 
```

我将其作为 Servlet 过滤器执行，因为我无法让 Spring Interceptor 拦截静态资产（资源）请求。

完整来源：[https ://github.com/jamesward/springmvc-https-enforcer](https://github.com/jamesward/springmvc-https-enforcer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T19:43:02.380

较晚的答案，但另一种配置驱动的方法是`requires-channel="https"`在各种`<sec:intercept-url>`标签上使用 Spring Security with ，并与 Tomcat 结合使用`RemoteIpValve`，后者处理先前答案中提到的相同代理标头（`x-forwarded-proto`等）。Valve 会根据代理标头更改行为`HttpServletRequest.isSecure()`以反映代理报告的协议，而不是连接器实际接收的协议 - 因此，任何依赖于`isSecure()`做正确事情的框架（如 Spring）在 SSL 卸载时都会正常运行。

[Heroku 中的 SSL 重定向](https://stackoverflow.com/questions/13397034/ssl-redirects-in-heroku)有关于配置 Valve 以与 webapp-runner 和 Heroku 一起使用的说明。

此外，我建议使用`PropertyPlaceholderConfigurer`让值可以被环境覆盖。例如，在您的 Spring Security 配置中：

```
<sec:intercept-url pattern="/api/**" requires-channel="${REQUIRES_CHANNEL}" access="..."/> 
```

相关内容`application-config.xml`将包括以下内容：

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE" />
  <property name="properties" ref="applicationProperties"/>
</bean>

<bean id="applicationProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
  <property name="locations">
    <list>
      <value>classpath:/application-config.properties</value>
    </list>
  </property>
</bean> 
```

该`application-config.properties`文件将`REQUIRES_CHANNEL=http`默认包含，然后在部署到 Heroku 时，您设置`heroku config:set REQUIRES_CHANNEL=https`为覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T23:12:15.440

詹姆斯过滤器的一点优化版本

```
import javax.servlet.*;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class HttpsFilter implements Filter {
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest httpReq = (HttpServletRequest) request;
        HttpServletResponse httpResp = (HttpServletResponse) response;
        if ("http".equalsIgnoreCase(httpReq.getHeader("x-forwarded-proto"))) {
            StringBuffer requestURL = httpReq.getRequestURL();
            httpResp.sendRedirect("https" + requestURL.substring(requestURL.indexOf(":")));
        } else {
            chain.doFilter(request, response);
        }
    }

    @Override
    public void destroy() {
    }
} 
```

[要旨](https://gist.github.com/elmot/433b56b45f3356a23da067f2cfb26211)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-26T21:33:21.427

这是基于 spring mvc 的 hte 解决方案：

```
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;

public class ForceHerokuSsl extends HandlerInterceptorAdapter {
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
         String proto = request.getHeader("x-forwarded-proto");
         return proto == null || "https".equalsIgnoreCase(proto);
    }
} 
```

然后在配置中：

```
@Configuration
@EnableWebMvc
public class WebMvcConfig extends WebMvcConfigurerAdapter {

   public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(new ForceHerokuSslInterceptor());
   }
} 
```

# php - Symfony2：重定向到最后一条路线并闪现一条消息？

> ID：11892080
> 
> 赞同：44
> 
> 时间：2012-08-09T21:17:04.840
> 
> 标签：php, symfony

我在尝试闪烁消息并将用户重定向回**Symfony 2**中的上一页时遇到了一个小问题。

我有一个非常简单的 CRUD。新建或编辑时，如果相应的创建/更新方法出现问题，我想闪现一条消息：

1.  `User --GET--> new`
2.  `new --POST--> create (fails)`
3.  `--REDIRECT--> new (with flash message)`

我正在执行以下操作：

```
 $this->container->get('session')->setFlash('error', 'myerror');
  $referer = $this->getRequest()->headers->get('referer');   
  return new RedirectResponse($referer); 
```

但是，它不会重定向到正确的推荐人！即使referrer 的值是正确的（例如：）`http://localhost/demo/2/edit/`，它也会重定向到索引。为什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-10-19T21:20:13.187

这是 Naitsirch 和 Santi 他们的代码的替代版本。我意识到一个特质对于这个功能来说是完美的。还对代码进行了一些优化。我更喜欢返回所有参数，包括 slug，因为您在生成路线时可能需要这些参数。

此代码在 PHP 5.4.0 及更高版本上运行。当然，您可以将 trait 用于多个控制器。如果您将特征放在单独的文件中，请确保将其命名为与特征相同，遵循 PSR-0。

```
<?php
trait Referer {
    private function getRefererParams() {
        $request = $this->getRequest();
        $referer = $request->headers->get('referer');
        $baseUrl = $request->getBaseUrl();
        $lastPath = substr($referer, strpos($referer, $baseUrl) + strlen($baseUrl));
        return $this->get('router')->getMatcher()->match($lastPath);
    }
}

class MyController extends Controller {
    use Referer;

    public function MyAction() {
        $params = $this->getRefererParams();

        return $this->redirect($this->generateUrl(
            $params['_route'],
            [
                'slug' => $params['slug']
            ]
        ));
    }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-12-13T05:34:16.067

对于 symfony 3.0，带有重定向到上一页的闪烁消息，这可以在控制器中完成。

```
 $request->getSession()
                ->getFlashBag()
                ->add('notice', 'success');
            $referer = $request->headers->get('referer');
            return $this->redirect($referer); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-26T17:12:10.160

来自 Naitsirch 的消息显示在下一个 URL 中： [https ://github.com/symfony/symfony/issues/2951](https://github.com/symfony/symfony/issues/2951)

似乎是您需要的一个很好的解决方案：

```
public function getRefererRoute()
{
    $request = $this->getRequest();

    //look for the referer route
    $referer = $request->headers->get('referer');
    $lastPath = substr($referer, strpos($referer, $request->getBaseUrl()));
    $lastPath = str_replace($request->getBaseUrl(), '', $lastPath);

    $matcher = $this->get('router')->getMatcher();
    $parameters = $matcher->match($lastPath);
    $route = $parameters['_route'];

    return $route;
} 
```

然后使用重定向：

```
public function yourFunctionAction()
{
    $ruta = $this->getRefererRoute();

    $locale = $request->get('_locale');
    $url = $this->get('router')->generate($ruta, array('_locale' => $locale));

    $this->getRequest()->getSession()->setFlash('notice', "your_message");   

    return $this->redirect($url);
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-01-09T15:24:28.793

这对我有用：

```
$this->redirect($request->server->get('HTTP_REFERER')); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-05T11:03:25.223

我的网站上有类似的功能。它是多语言的。文章仅存在于单一语言环境中。当用户尝试切换到其他语言环境时，它应该重定向回上一页并闪烁消息，表明该页面/文章在请求的语言环境中不存在。

```
/en/article/3 -> /fr/article/3 (404) -> Redirect(/en/article/3) 
```

`dev`这是我在环境和环境中运行良好的脚本版本`prod`：

```
$referer = $request->headers->get('referer')

// 'https://your-domain.com' or 'https://your-domain.com/app_dev.php'
$base = $request->getSchemeAndHttpHost() . $request->getBaseUrl();

// '/en/article/3'
$path = preg_replace('/^'. preg_quote($base, '/') .'/', '', $referer);

if ($path === $referer) {
    // nothing was replaced. referer is an external site
} elseif ($path === $request->getPathInfo()) {
    // current page and referer are the same (prevent redirect loop)
} else {
    try {
        // if this will throw an exception then the route doesn't exist
        $this->container->get('router')->match(
            // '/en/hello?foo=bar' -> '/en/hello'
            preg_replace('/\?.*$/', '', $path)
        );

        // '/app_dev.php' . '/en/article/3'
        $redirectUrl = $request->getBaseUrl() . $path;

        return new RedirectResponse($redirectUrl);
    } catch (\Symfony\Component\Routing\Exception\ResourceNotFoundException $e) {}
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-10T01:20:32.873

我只是设置了一个简单的应用程序，它似乎工作正常。我的 createAction() 看起来像这样：

```
public function createAction()
{
    $entity  = new Pokemon();
    $request = $this->getRequest();
    $form    = $this->createForm(new PokemonType(), $entity);
    $form->bindRequest($request);

    if ($entity->getName() == "pikachu")
    {
        $this->container->get("session")->setFlash("error", "Pikachu is not allowed");
        $url = $this->getRequest()->headers->get("referer");
        return new RedirectResponse($url);
    }

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getEntityManager();
        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('pokemon_show', array('id' => $entity->getId())));

    }

    return $this->render('BulbasaurBundle:Pokemon:new.html.twig', array(
        'entity' => $entity,
        'form'   => $form->createView()
    ));
} 
```

流程如下：

*   用户导航到 /new
*   用户输入的“皮卡丘”选项无效
*   用户点击提交（POST 到 /create）
*   应用程序拒绝该条目，添加 Flash 消息，并重定向回 /new
*   用户看到 /new 和 flash 消息

需要检查的几件事：

*   你的路线`/demo/{entityId}/edit`真的有效吗？（即，如果您在浏览器中输入它，它实际上会到达您期望的位置吗？）

*   您是否将不同的重定向/转发链接在一起？我注意到当我有一个重定向到 URL 的控制器并且负责该 URL 的控制器也重定向到其他地方时，我得到了意外（但正确）的行为。我已经通过使用转发解决了这个问题。

也就是说，如果一切都失败了，你可以只使用控制器的 redirect() 方法来管理重定向：

```
public function createAction()
{
    ...
    return $this->redirect($this->generateUrl("pokemon_new"));
    ...
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-11T10:54:06.037

在这里，将其声明为服务，它会在您需要的任何时间和地点向您返回推荐人。没有特征，没有奇怪的依赖。

```
class Referer
{

    /** @var RequestStack */
    private $requestStack;

    /** @var RouterInterface */
    private $router;

    public function __construct(RequestStack $requestStack, RouterInterface $router)
    {
        $this->requestStack = $requestStack;
        $this->router       = $router;
    }

    public function getReferer() : string
    {
        $request = $this->requestStack->getMasterRequest();

        if (null === $request)
        {
            return '';
        }

        //if you're happy with URI (and most times you are), just return it
        $uri = (string)$request->headers->get('referer');

        //but if you want to return route, here you go
        try
        {
            $routeMatch = $this->router->match($uri);
        }
        catch (ResourceNotFoundException $e)
        {
            return '';
        }

        $route = $routeMatch['_route'];

        return $route;
    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-10T06:41:01.707

似乎您需要有一个有效负载来指向您的重定向。对我来说，这似乎是模糊的概念代码。我还建议您确保您的配置文件指向正确的重定向代码片段。检查您的服务器访问文件以确保它也启用了重定向。

# php - 将 Markdown 文件转换为 HTML

> ID：11892083
> 
> 赞同：2
> 
> 时间：2012-08-09T21:17:56.197
> 
> 标签：php, html, markdown

是否有将 Markdown 文件转换为 HTML 的 PHP 脚本？

我想创建一个平面文件 CMS，将 markdown 文件（在内容文件夹中）转换为可以在网站上提供的静态 HTML 文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T21:21:05.090

您可能想在下次提问之前使用搜索引擎。你可以看看[PHP-markdown](http://michelf.ca/projects/php-markdown/)。如果您正在寻找更完整的解决方案（即成熟的静态站点生成器），请查看[Phrozn](http://www.phrozn.info/en/)。

# python - 使用元组分离集合

> ID：11892084
> 
> 赞同：3
> 
> 时间：2012-08-09T21:17:55.703
> 
> 标签：python

在名为mixed_sets 的元组列表中，存在三个单独的集合。每个集合都包含具有相交值的元组。一组中的元组不会与另一组中的元组相交。

我想出了以下代码来整理集合。我发现当涉及到元组时，python 集的功能是有限的。如果设置交集操作可以查看每个元组索引而不是在封闭的元组对象处停止，那就太好了。

这是代码：

```
mixed_sets=  [(1,15),(2,22),(2,23),(3,13),(3,15),
              (3,17),(4,22),(4,23),(5,15),(5,17),
              (6,21),(6,22),(6,23),(7,15),(8,12),
              (8,15),(9,19),(9,20),(10,19),(10,20),
              (11,14),(11,16),(11,18),(11,19)]

def sort_sets(a_set):
    idx= 0
    idx2=0
    while len(mixed_sets) > idx and len(a_set) > idx2:
        if a_set[idx2][0] == mixed_sets[idx][0] or a_set[idx2][1] == mixed_sets[idx][1]:
            a_set.append(mixed_sets[idx])
            mixed_sets.pop(idx)
            idx=0

        else:
            idx+=1
            if idx == len(mixed_sets):
                idx2+=1
                idx=0
    a_set.pop(0) #remove first item; duplicate
    print a_set, 'a returned set'            
    return a_set

sorted_sets=[]
for new_set in mixed_sets:
    sorted_sets.append(sort_sets([new_set]))

print mixed_sets #Now empty.

OUTPUT:
[(1, 15), (3, 15), (5, 15), (7, 15), (8, 15), (3, 13), (3, 17), (5, 17), (8, 12)] a returned set
[(2, 22), (2, 23), (4, 23), (6, 23), (4, 22), (6, 22), (6, 21)] a returned set
[(9, 19), (10, 19), (10, 20), (11, 19), (9, 20), (11, 14), (11, 16), (11, 18)] a returned set 
```

现在这看起来不像是完成这项任务的最 Pythonic 方式。此代码适用于大型元组列表（大约 2E6），我觉得如果它不必检查已排序的元组，程序会运行得更快。因此我使用 pop() 来缩小混合集列表。我发现使用 pop() 会使列表推导、for 循环或任何迭代器出现问题，因此我使用了 while 循环。

它确实有效，但是是否有一种更 Pythonic 的方式来执行此任务，它不使用 while 循环以及 idx 和 idx2 计数器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:43:05.157

可能您可以通过首先计算混合集中元组中所有第一个元素的集合和所有第二个元素的集合来提高速度。然后在您的迭代中，您可以检查第一个或第二个元素是否在其中一个集合中，并使用二进制搜索找到正确的完整元组。实际上你需要多组，你可以使用字典来模拟。

类似[当前未测试]：

```
from collections import defaultdict
# define the mixed_sets list.
mixed_sets.sort()
first_els = defaultdict(int)
secon_els = defaultdict(int)

for first,second in mixed_sets:
    first_els[first] += 1
    second_els[second] += 1

def sort_sets(a_set):
    index= 0
    while mixed_sets and len(a_set) > index:
        first, second = a_set[index]
        if first in first_els or second in second_els:
            if first in first_els:
                element = find_tuple(mixed_sets, first, index=0)
                first_els[first] -= 1
                if first_els[first] <= 0:
                    del first_els[first]
            else:
                element = find_tuple(mixed_sets, second, index=1)
                second_els[second] -= 1
                if second_els[second] <= 0:
                    del second_els[second]

            a_set.append(element)
            mixed_sets.remove(element)
        index += 1
    a_set.pop(0) #remove first item; duplicate
    print a_set, 'a returned set'            
    return a_set 
```

其中“find_tuple(mixed_sets, first, index=0,1)”返回属于在给定索引处具有“first”的mixed_sets的元组。

可能您还必须复制mixed_sets 并按第一个元素排序一个副本，另一个按第二个元素排序。

或者，也许您可​​以再次使用字典。添加到“first_els”和“second_els”中的值也是一个排序的元组列表。

我不知道性能将如何扩展，但我认为如果数据在 200 万左右，您应该不必担心太多。

# c# - Linq to XML：解析一些元素并跳过一些元素

> ID：11892087
> 
> 赞同：0
> 
> 时间：2012-08-09T21:18:44.770
> 
> 标签：c#, xml, linq, linq-to-xml

我正在尝试`XDocument`使用实例解析数据`Linq to XML`并将其存储在`IEnumerable<MyClass>`. 我不想从 xml 文档中获取每个元素，所以我使用`ElementAt(#index)`它来获取值。但是有时我想要的元素不在文档中，然后我得到索引超出范围异常。有没有更好的方法来解析这个文档中的值？这是代码：

XML 文档如下所示：

```
<someotherelement>   /* I dont want the "someotherelement" part either */
   <subelement></subelement>
   <subelement></subelement>
</someotherelement>
<result>
   <doc>
      <int name="personid">8394</int> /* I don't want this value so I am skipping it */
      <str name="name">James</str>
      <str name="address">30 Awesome Lane</str>
      <arr name="randomearray"> /* I want to skip this too */
         <str name="random1">SomeValue</str>
         <str name="random2">SomeValue</str>
         <str name="random2">SomeValue</str>
      </arr>
      <str name="city">Awesome City</str>
      <str name="state">CA</str>
      <int name="zipcode">84392</int>
      <str name="country">USA</str>
      <str name="phonenumber">8309933820</str>
      <date name="reportdate">2012-07-27T06:01:05.256Z</date>
   </doc>

   /* This is missing address and country */
   <doc>
      <int name="personid">10394</int> /* I don't want this value so I am skipping it */
      <str name="name">Mathew</str>
      <arr name="randomearray"> /* I want to skip this too */
         <str name="random1">SomeValue</str>
         <str name="random2">SomeValue</str>
         <str name="random2">SomeValue</str>
      </arr>
      <str name="city">Not Awesome City</str>
      <str name="state">CA</str>
      <str name="zipcode">58439</str>
      <str name="phonenumber">8309933820</str>
      <date name="reportdate">2012-07-27T06:01:05.256Z</date>
   </doc>
</result> 
```

班级：

```
public class Doc
{
    public string Name {get;set;}
    public string Address{get;set;}
    public string City {get;set;}
    public string State {get;set;}
    public int ZipCode {get;set;}
    public string Country {get;set;}        
    public string PhoneNumber {get;set;}
    public DateTime ReportDate {get;set;}
} 
```

链接到 XML

```
string pathToXml = "http://www.foo.com/something";
var doc = XDocument.Load(pathToXml);
IEnumerable<Doc> myDoc = from item in doc.Descendants("doc")
                 select new Doc
                 {
                   Name = item.Element("str").Value,
                   Address = item.Element("str").ElementsAfterSelf("str").First().Value,
                   City = item.Element("str").ElementsAfterSelf("str").ElementAt(1).Value,
                   State = item.Element("str").ElementsAfterSelf("str").ElementAt(2).Value,
                   ZipCode = Convert.ToInt32(item.Element("int").Value)
                   Country = item.Element("str").ElementsAfterSelf("str").ElementAt(3).Value,
                   PhoneNumber = item.Element("str").ElementsAfterSelf("str").ElementAt(4).Value,
                   ReportDate = Convert.ToDateTime(item.Element("date").Value)
                 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:37:44.037

您可能希望使用[XPath](http://msdn.microsoft.com/en-us/library/ms256086.aspx)，它允许您更舒适地指定元素，例如使用它们的属性值，这在您的情况下似乎很有用。

结合扩展方法避免重复语句：

```
public static string GetElementValue(this XElement element, string query)
{
    var elem = element.XPathSelectElement(query);
    return elem == null ? null : elem.Value;
} 
```

一个例子：

```
select new Doc
{
    Name = item.GetElementValue("str[@name='name']"),
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:37:17.780

我通过添加扩展方法解决了这个问题：

```
public static class Extensions {
  public static string GetValue(this XElement element) {
    return element == null ? null : element.Value;
  }
} 
```

然后使用`Attribute()`-based 选择您的值：

```
IEnumerable<Doc> myDoc = from item in doc.Descendants("doc")
                 select new Doc
                 {
                   Name = item.Element("str").Value,
                   Address = item.Element("str").ElementsAfterSelf("str").First().Value,
                   City = item.Element("str").ElementsAfterSelf("str").Where(el => (string)el.Attribute("name") == "city").FirstOrDefault().GetValue(),
                   State = item.Element("str").ElementsAfterSelf("str").Where(el => (string)el.Attribute("name") == "state").FirstOrDefault().GetValue(),
                   ZipCode = Convert.ToInt32(item.Element("int").Value),
                   Country = item.Element("str").ElementsAfterSelf("str").Where(el => (string)el.Attribute("name") == "country").FirstOrDefault().GetValue(),
                   PhoneNumber = item.Element("str").ElementsAfterSelf("str").Where(el => (string)el.Attribute("name") == "phonenumber").FirstOrDefault().GetValue(),
                   ReportDate = Convert.ToDateTime(item.Element("date").Value)
                 }; 
```

该扩展方法可能有一个内置方法，但我不知道。

# android - 如何使用java套接字编程将android连接到oracle

> ID：11892092
> 
> 赞同：1
> 
> 时间：2012-08-09T21:19:14.553
> 
> 标签：android, oracle, sockets

您好极客，因为我是 android 新手，我正面临一个关键问题，因为我希望我的 android 应用程序连接到外部数据库，所以我只是阅读了一些解决方案，发现它可以通过使用 java 套接字编程来完成...

但我不知道该怎么做..请提出一些简单而有用的方法来做到这一点..

由于 android 和 .net 应用程序都可以访问 oracle 数据库。

我的要求也是我还可以访问我的数据库，该数据库将通过 sqlite 数据库在我的 android 应用程序上创建，以保持对我的应用程序数据的快速访问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:23:07.797

看看我的[Android-Oracle Connectivity](http://androracle.blogspot.in/2012/07/java-class-as-server-for-client-with.html)博客文章。希望对您有所帮助。如果还是有问题。让我知道。

对于 sqlite 数据库，请将您的邮件 ID 发送给我，我将向您发送在运行时使用 java 套接字编程从 oracle 数据库在 sqlite 上创建完整数据库模式的代码。

祝你好运。。

# python - python将装饰器应用于类中的每个方法而不进行检查

> ID：11892093
> 
> 赞同：0
> 
> 时间：2012-08-09T21:19:17.013
> 
> 标签：python, class, decorator, metaclass

稍微修改[将python装饰器应用于类中的方法](https://stackoverflow.com/questions/2237624/applying-python-decorators-to-methods-in-a-class)的答案，可以将装饰器应用于类中的每个方法。没有检查模块有没有办法做到这一点？我一直在尝试使用元类和修改 __getattribute__ 来实现这一点，但我不断得到无限递归。从[如何使用 __getattribute__ 方法？](https://stackoverflow.com/questions/371753/python-using-getattribute-method)，这可以使用 object.__getattribute__(self, name) 在普通类中修复。元类有什么等价的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:26:12.950

定义一个元类，然后在类定义的末尾应用装饰器。

```
class Classname:
   def foo(self): pass

for name, fn in inspect.getmembers(Classname):
    if isinstance(fn, types.UnboundMethodType):
        setattr(Classname, name, decorator(fn)) 
```

对于 Python 3，只需`types.UnboundMethodType`将`types.FunctionType.`

但如果你真的不想使用检查，那么你可以这样做

```
import types

class DecoMeta(type):
   def __new__(cls, name, bases, attrs):

      for attr_name, attr_value in attrs.iteritems():
         if isinstance(attr_value, types.FunctionType):
            attrs[attr_name] = cls.deco(attr_value)

      return super(DecoMeta, cls).__new__(cls, name, bases, attrs)

   @classmethod
   def deco(cls, func):
      def wrapper(*args, **kwargs):
         print "before",func.func_name
         func(*args, **kwargs)
         print "after",func.func_name
      return wrapper

class MyKlass(object):
   __metaclass__ = DecoMeta

   def func1(self): 
      pass

MyKlass().func1() 
```

> 输出：
> 
> func1 之前 func1
> 之后

**注意：不会修饰staticmethod和classmethod**

# open-source - 云虚拟机可免费用于开源测试？

> ID：11892094
> 
> 赞同：12
> 
> 时间：2012-08-09T21:19:20.077
> 
> 标签：open-source, virtual-machine, cluster-computing, distributed-computing

任何人都知道云中可以创建（虚拟）机器（如 Amazon EC2）以用于您的计算任务的地方 - 提供大量（至少 5-10 台）免费机器的地方，如果它们用于测试开放源项目？

我不是在为开源项目寻找免费托管 CI 环境的地方，如 Jenkins、Hudson、TeamCity 等。我正在寻找一个可以运行一些服务器的地方，在那里我可以在集群和分布式环境中设置开源系统本身。然后通过自动化测试（例如从 CI 环境执行）驱动针对该集群和分布式环境的测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-27T16:42:33.703

AWS 免费套餐是否适合您？我意识到这不是一个真正的集群.. [http://aws.amazon.com/free/](http://aws.amazon.com/free/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-29T08:34:02.023

我认为[Openshift](https://www.openshift.com/) 可能会满足您的要求。特别是如果您不需要打开除 http 之外的外部端口

# sql - 保留字段“null”，除非已通过 SQL Server 2008 中的表单将其他信息放入其中

> ID：11892095
> 
> 赞同：0
> 
> 时间：2012-08-09T21:19:22.360
> 
> 标签：sql, null

您如何预设字段以便（除非从表单本身输入特定值）它们保持为空？对于另一个项目，我稍后将不得不根据人们选择的选项从该表中提取信息，所以如果我可以针对空值执行 cfif，我认为如果我不这样做，它会比当前生成的空白容易得多t 插入任何新值。

有谁知道在哪里/如何做到这一点？我正在使用 Microsoft 的 SQL Server Management Studio 来编辑各个列的内容，我能找到的只是使用 INSERT、SELECT 等的命令代码，而不是我编辑的列表。或者这是使我的默认设置为“null”的唯一方法？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:21:34.693

如果某个字段设置为可空字段（即允许`NULL`），则添加行时，`NULL`除非另有说明，否则为空。

你不需要为此做任何特别的事情。

如果您的`INSERT`and`UPDATE`语句只是省略了该字段，它将不会被更新，尽管您可以根据需要专门指定`NULL`这样的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:58:18.963

您可以使用辅助函数来处理参数设置。这是我使用的功能的简化版本...

```
private static object ProcessParameter(object input)
{
    if (input == null)
        return input;

    switch (input.GetType().ToString().ToLower())
    {
        case "system.string":
            if (input == null || input.ToString() == "") { return DBNull.Value; }
            return input;

        case "system.int32":
        case "system.double":
            if (input.ToString() == "0" && IsNullable(input)) { return DBNull.Value; }
            return input;

        case "system.datetime":
            if (System.Convert.ToDateTime(input) == DateTime.MinValue || System.Convert.ToDateTime(input) == default(DateTime)) { return DBNull.Value; }
            return input;

        default:
            return input;
    }
} 
```

# drop-down-menu - Nivo Slider 覆盖了我的下拉菜单，是 z-index 吗？

> ID：11892099
> 
> 赞同：2
> 
> 时间：2012-08-09T21:19:58.240
> 
> 标签：drop-down-menu, menu, slider, z-index, nivo-slider

我目前正在这个网站上工作[http://brasco.co/LDF/](http://brasco.co/LDF/)并且 nivo 滑块覆盖了我的下拉菜单。我摆弄了各种 z-index 设置，但无法完全找到它可能关闭的位置。有什么建议么？我很难过

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T00:05:35.703

我有同样的问题。我问开发人员，他说把它粘贴到 CSS 中：

```
 .nav-menu {
        position:relative;
        z-index:9999 !important;
    } 
```

它解决了这个问题。这是他网站上讨论该问题的链接：

[http://support.dev7studios.com/discussions/nivo-slider-wordpress-plugin/1002-nivo-slider-hides-dropdown-menus](http://support.dev7studios.com/discussions/nivo-slider-wordpress-plugin/1002-nivo-slider-hides-dropdown-menus)

# jquery - 在 jQuery 中

> ID：11892106
> 
> 赞同：1
> 
> 时间：2012-08-09T21:20:29.320
> 
> 标签：jquery, css

我正在使用[该站点上](http://igoo.co.uk/labs/jquery-wrap-captions/)的一些 jQuery，但无法使其正常工作。

当我尝试验证它时，它会抛出 jQuery 中包含的 div 错误，但是在示例站点中运行时似乎很好。

```
<!-- Caption Wrap script  -->
<script type="text/javascript">
$(document).ready(function(){
    $("img.captionme").each(function(i){
        var captiontext = $(this).attr('title');
        $(this).wrap("<div class='imgpost'></div>");
        $(this).parent().append("<div class='thecaption'>" + captiontext + "</div>");
    });
});
</script> 
```

我曾尝试将脚本放在外部文件中，但这似乎也无法修复它。

站点在这里，脚本与图像标题（蓝色部分）有关，但换行不起作用。

[http://www.haselden.co.uk/james/docs/](http://www.haselden.co.uk/james/docs/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:30:59.250

从视觉上看，问题在于div的`overflow:auto;`属性。`#portfoliowrapper`只需删除`overflow: auto;`或更改为`overflow:visible;`，它将正确显示。

当您更改溢出时，您需要清除浮动。就在`#portfoliowrapper`关闭之前，插入一个清除（例如`<br clear="all" />`）。

验证器的问题是因为 JavaScript 是内联的。嵌入到外部文件中，它就会通过。

# sql - 在 SQL 中使用 SELECT INTO 创建新表

> ID：11892113
> 
> 赞同：37
> 
> 时间：2012-08-09T21:20:47.947
> 
> 标签：sql, oracle, select, create-table

> **可能重复：**
> [使用 Oracle SELECT INTO](https://stackoverflow.com/questions/2250196/select-into-using-oracle)

我遇到了`SQL SELECT INTO`用于创建新表并将旧表记录转储到单个 SQL 语句中的新表的语句

```
 SELECT * INTO NEW_TABLE FROM OLD_TABLE; 
```

但是当我尝试上面的查询时，它给出的错误是`ORA-00905: missing keyword`

在 ORACLE 中可以做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-08-09T21:25:40.830

创建新表的语法是

```
CREATE TABLE new_table
AS
SELECT *
  FROM old_table 
```

这将创建一个`new_table`以任何列命名的新表`old_table`并复制数据。它不会复制表上的约束，不会复制存储属性，也不会复制表上定义的任何触发器。

`SELECT INTO`当您想从表中获取数据到 PL/SQL 块中的局部变量时，在 PL/SQL 中使用。

# c# - 具有内联模式的 XDocument。架构信息为空

> ID：11892115
> 
> 赞同：2
> 
> 时间：2012-08-09T21:21:05.307
> 
> 标签：c#, xml, xsd, linq-to-xml

好的，我们开始吧。我有一组要加载到我的应用程序中的 XML 文档。在我的小测试中，我创建了一个针对 XML 文档指定的模式进行验证的阅读器。使用以下代码可以很好地工作。

```
// Set the validation settings.
XmlReaderSettings settings = new XmlReaderSettings();
settings.ValidationType = ValidationType.Schema;
settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessInlineSchema;
settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessSchemaLocation;
settings.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings;
settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessSchemaLocation;
settings.ValidationEventHandler += new ValidationEventHandler(ValidationCallBack);

// Create the XmlReader object.
XmlReader reader = XmlReader.Create("xml/note.xml", settings);

// Load the XDocument from the reader
XDocument loadedDoc = XDocument.Load(reader); 
```

现在我的 XML 文档已正确加载，并且发生的任何验证错误都由回调处理。

但是，如果我想通过在所述元素上调用 GetSchemaInfo() 来获取有关该元素的模式信息，我会得到 null。[这个问题在这里](https://stackoverflow.com/questions/3167070/xelement-getschemainfo-is-returning-null-why)讨论了使用重载的 Validate 方法，但这并不真正适用于这种情况，除非我遗漏了一些东西。

是否可以使用内联模式将模式信息加载到 XDoc 中，或者我应该以另一种方式执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:38:05.030

查看[我](https://stackoverflow.com/a/8112949/250725)对自己问题的回答。

代码块之后的第一段对您来说很重要，但基本上，`SchemaInfo` *将*在那里，但直到验证回调*之后才添加。*

我使用的解决方法基本上是这样的（注意：此代码在直接加载 XML 并调用 时已经过测试和工作`XDocument.Validate`，`XmlSchemaSet`但前提应该与`XmlReader`内联模式相同或相似）：

```
List<XElement> errorElements = new List<XElement>();

serializedObject.Validate((sender, args) =>
{
    var exception = (args.Exception as XmlSchemaValidationException);

    if (exception != null)
    {
        var element = (exception.SourceObject as XElement);

        if (element != null)
            errorElements.Add(element);
     }

});

foreach element in errorElements
{
    var si = element.GetSchemaInfo; 

    // do something with SchemaInfo
} 
```

我只是试图捕获`SchemaInfo`元素，因此进行强制转换`as`和空值检查，但这应该适用于其他节点类型，例如`Attributes`（虽然未经测试，所以我可能是错的）。

如果您希望使用特定的回调方法而不是匿名委托，您`errorElements`将需要是一个类级别的字段，并且您可以在验证完成后执行您需要执行的操作（再次，我将添加**未经测试**的标签）。

```
public class SomeClass
{

    List<XElement> errorElements = new List<XElement>();

    public void Load()
    {

        // Set the validation settings.
        XmlReaderSettings settings = new XmlReaderSettings();
        settings.ValidationType = ValidationType.Schema;
        settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessInlineSchema;
        settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessSchemaLocation;
        settings.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings;
        settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessSchemaLocation;
        settings.ValidationEventHandler += new ValidationEventHandler(ValidationCallBack);

        // Create the XmlReader object.
        XmlReader reader = XmlReader.Create("xml/note.xml", settings);

        // Load the XDocument from the reader
        XDocument loadedDoc = XDocument.Load(reader);

        // do something with errorElements

    }

    public void ValidationCallBack(object sender, ValidationEventArgs e)
    {
        var exception = (args.Exception as XmlSchemaValidationException);

        if (exception != null)
        {
            var element = (exception.SourceObject as XElement);

            if (element != null)
                errorElements.Add(element);
         }

    }

} 
```

为了回应您关于想要所有节点的评论`IXSchemaInfo`，*无论*节点是失败还是通过，架构信息都会在验证后添加到 XElement，因此您的要求实际上会更容易，因为您不需要保留失败的列表节点。你应该能够做到这一点：

```
public void Load()
{

    // Set the validation settings.
    XmlReaderSettings settings = new XmlReaderSettings();
    settings.ValidationType = ValidationType.Schema;
    settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessInlineSchema;
    settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessSchemaLocation;
    settings.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings;
    settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessSchemaLocation;
    settings.ValidationEventHandler += new ValidationEventHandler(ValidationCallBack);

    // Create the XmlReader object.
    XmlReader reader = XmlReader.Create("xml/note.xml", settings);

    // Load the XDocument from the reader
    XDocument loadedDoc = XDocument.Load(reader);

    foreach (var node in loadedDoc.Descendants())
    {
        var si = node.GetSchemaInfo();
    }

} 
```

上面的例子只会访问`XElement`你的 s ，`XDocument`但这只是为了说明我的观点。加载完成并验证 xml 后，架构信息应该在那里。

# jquery - JQuery parseXML 和打印

> ID：11892118
> 
> 赞同：0
> 
> 时间：2012-08-09T21:21:27.147
> 
> 标签：jquery

```
var usrconf = "<root><node>abc</node><node>efg</node></root>";
var xmlDoc = $.parseXML( usrconf );
$(xmlDoc).find('node').each(function(i) {
    // change node values here
}); 
```

现在如何打印更改后的 XML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:28:38.947

$(this) 使您可以访问在 each() 中选择的元素。`i`是这里描述的函数索引：http: [//api.jquery.com/each/](http://api.jquery.com/each/)

```
.each( function(index, Element) ) 
```

所以正确的代码是：

```
var usrconf = "<root><node>abc</node><node>efg</node></root>";
var xmlDoc = $.parseXML( usrconf );
$(xmlDoc).find('node').each(function(i) {
 $(this).attr('changed', true);
});
console.log(xmlDoc); 
```

或者如果你想将它序列化回来

```
var usrconf = "<root><node>abc</node><node>efg</node></root>";
var xmlDoc = $.parseXML( usrconf );
$(xmlDoc).find('node').each(function(i) {
 $(this).attr('changed', true);
});

console.log(xmlDoc);

// from http://stackoverflow.com/a/6507766/141200
function xmlToString(xmlData) { 

    var xmlString;
    //IE
    if (window.ActiveXObject){
        xmlString = xmlData.xml;
    }
    // code for Mozilla, Firefox, Opera, etc.
    else{
        xmlString = (new XMLSerializer()).serializeToString(xmlData);
    }
    return xmlString;
}   

console.log(xmlToString(xmlDoc)); 

​ 
```

# java - 检查 HashMap 的 Key 的变量

> ID：11892121
> 
> 赞同：4
> 
> 时间：2012-08-09T21:21:45.487
> 
> 标签：java, hashmap

我的问题是我有一个 HashMap ，其中键是一个对象，我需要它成为所述对象中的变量之一。目前， HashMap.get() 只查看 myNums 对象，但我需要一种方法来获取 num1 的值，因为那是“真正的键”。我不能使用 myNums.get() 方法，因为我没有 myNums 的实例化。我可以遍历 HashMap 中的每个项目来检查，但我不想这样做。有没有更优雅的解决方案？

是）我有的：

```
public static void main(String [] args){
   int [] array = {//integers 1-100};
   HashMap < myNums, String > hash = //data from another source;
   for(int i = 0;i < array.length; i++){
       if(hash.get(i) != null)
          OtherFunction(hash.get(i));         
   }
}

public class myNums{
   private int num1;
   private int num2;
   //get and set functions...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:27:29.220

也许条目迭代更能满足您的目的：

```
for (Entry<MyNums, String> entry : map.entrySet()) {
    System.out.println("Key:" + entry.getKey());
    System.out.println("Value:" + entry.getValue());
} 
```

使用这种迭代样式，您不必一直调用`get`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:49:39.007

您应该重写 hashCode() 方法并扩展类的 equals() 方法。

```
private class myNums{
  public int hashCode(){
    //Return something unique
  }
  public boolean equals(myNums that){
    return this.num1==that.num1;
  }
} 
```

# algorithm - 自然语言处理教程

> ID：11892128
> 
> 赞同：25
> 
> 时间：2012-08-09T21:22:10.830
> 
> 标签：algorithm, machine-learning, nlp, artificial-intelligence

我最近参加了[coursera](https://class.coursera.org/nlp/lecture)上关于“自然语言处理”的课程，我学到了很多关于解析、IR 和 Q&A 等其他有趣方面的知识。虽然我很好地掌握了这些概念，但我实际上并没有得到任何实际的知识。谁能推荐我关于自然语言处理的优秀在线教程或书籍？

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-09T21:23:36.330

您可以阅读 Jurafsky 和 ​​Martin 的[语音和语言处理（2008 年版）](https://rads.stackoverflow.com/amzn/click/com/0131873210)，这是该领域的标准教科书。它很长，而且有各种各样的主题，所以我建议只阅读真正适用于你兴趣的章节。

此外，最好的学习方式几乎可以肯定是从头开始实际实现 NLP 算法。您可以选择一些标准任务（语言建模、文本分类、POS 标记、NER、解析）并从头开始实施各种算法（ngram 模型、HMM、朴素贝叶斯、MaxEnt、CKY），以真正了解它们的工作原理。找到一些免费的数据集来测试你的实现也不应该太难。

最后，还有很多针对特定 NLP 算法的优秀教程。例如，如果你想构建一个 HMM，我建议[Jason Eisner 的教程](http://www.cs.jhu.edu/~jason/465/hw-hmm/hw-hmm.pdf)，该教程还涵盖了使用 EM 进行平滑和无监督训练。如果你想为无监督的朴素贝叶斯训练实现 Gibbs 采样，我建议[Philip Resnik 的教程](http://www.umiacs.umd.edu/~resnik/pubs/gibbs.pdf)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-10T11:51:15.990

除了 Jurafsky 和 ​​Martin 的书外，Christopher D. Manning 和 Hinrich Schütze 的[Foundations of Statistical Natural Language Processing](http://nlp.stanford.edu/fsnlp/promo/)也被广泛使用。对于 IR，Manning 等人。还写[了信息检索简介](http://nlp.stanford.edu/IR-book/)，可以在他们的网站上在线阅读或下载。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-29T03:58:06.710

如果您想了解如何使用自然语言的实用知识，您应该开始实施它。我建议在 Python 中使用 NLTK（自然语言处理工具包）。它很容易在 python 中实现 NLP。

你可以参考这个链接 [http://nltk.org/](http://nltk.org/)

或者您可以在 [http://cst.dk/online/pos_tagger/uk/上在线试用](http://cst.dk/online/pos_tagger/uk/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-26T07:55:36.473

与其阅读特定的书，不如深入研究论文的海洋可能是一个好主意。例如，[http: //www.aclweb.org 包含许多关于 NLP 的主题。](http://www.aclweb.org)通过这些论文，您可以获得更多论文的引用，其中一些是 NLP 某个分支的基础。而且因为它们是由不同的作者写的，所以你不太可能受到一种观点的影响。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-25T22:59:48.023

[如果您是 Java 开发人员，那么在http://alias-i.com/lingpipe/demos/tutorial/read-me.html](http://alias-i.com/lingpipe/demos/tutorial/read-me.html)上有大量关于如何使用 LingPipe 构建 NLP 系统组件的教程列表。完全披露我写了其中一些教程和下面的一本书。

有几本书更面向工业：

1) Richard M Reese 用 Ja​​va 进行自然语言处理

这涵盖了如何使用一系列开源工具包（包括 LingPipe）来完成一些常见任务。

2) Breck Baldwin、Krishna Dayanidhi 用 Ja​​va 和 LingPipe Cookbook 平装的自然语言处理

本书是“构建组件”级别的任务驱动，涵盖了驱动大多数文本驱动的 NLP 系统的主要技术。它不包括翻译。它比第一本书更详细，覆盖范围比 LingPipe 教程更广泛，但有时不如教程详细。

布雷克

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-20T09:51:53.297

有一个名为[TeLeMaCo](https://fedora.clarin-d.uni-saarland.de/hub/)的教学和学习材料中心。您可以找到 NLP 的许多方面的资源，并且您可以轻松地添加您在网络上找到的更多材料。

# jsp - 如何让我的 JSP 在线？

> ID：11892129
> 
> 赞同：3
> 
> 时间：2012-08-09T21:22:10.887
> 
> 标签：jsp, tomcat

问这个问题我觉得很愚蠢，因为在搜索了三个小时后，我不断得到答案。提醒我，我对网络编程还是很陌生。

我编写了一个很酷的小应用程序，它使用 jsp、一个 mysql 数据库，并一直在本地（在本地主机上）托管它来测试它等等。好吧，现在我想把它放到网上。tomcat 仅用于本地主机吗？或者是否有一些有趣的 IP 地址 url，我可以从另一台计算机输入以通过 Internet 访问？还是我必须做一些特别的事情，比如将我所有的文件打包成特别的东西，然后把它们放到某个第三方软件中。

我发现了一些关于端口转发的信息，现在我是否可以输入 url`http://localhost/priorq/queue.jsp`并查看我的页面。所以我想我弄清楚了端口转发的事情..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T04:32:45.027

1) 如果您打算让访问者大量使用并且不想让您的网站被永久禁止，则您必须拥有快速的互联网连接。注意上传速度。这很重要。

2) 如果您计划为商业目的开发您的网站，那么您需要从您的提供商处获取静态本地 IP 地址。为了让用户可以在一个容易记住的 URL 上找到您的网站。

3) 当然，您的计算机必须一直打开才能全天候访问您的站点。

4) 你需要安装一个网络服务器。[Apache Server](http://httpd.apache.org)非常适合这项任务。

5) 您应该打开或重定向必要的端口（通常是 80），以便能够在网络上访问您的站点。

6) 您还需要配置或禁用防火墙以允许通过端口的流量到达您的 Web 服务器软件。

以下是关于此主题的 2 个很好的参考资料：

[在家用电脑上托管我的网站](http://www.webdevelopersnotes.com/hosting/host_web_site_home_computer.php3)

[家庭托管的优点和缺点](https://webmasters.stackexchange.com/questions/28504/can-i-make-my-home-computer-a-server/28506#28506)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:12:33.177

要将您的本地 JSP 应用程序公开到 Internet，很可能需要对为您的计算机提供 Internet 访问的网络设备（路由器）上的防火墙进行更改。这是一个一般讨论在路由器上设置[端口转发](http://www.wikihow.com/Set-up-Port-Forwarding-on-a-Router)的网页。

谨防！！将您的内部计算机暴露于 HTTP 端口 80 流量会使您的计算机容易受到黑客攻击！根据您的应用程序的编写方式，您的 MySQL 数据库也面临[SQL 注入的风险。](http://en.wikipedia.org/wiki/SQL_injection)如果您是编程新手并且不完全了解保护网站和编写安全代码的最佳实践，则这种情况尤其可能发生。

这是[IBM 文档的链接，该文档介绍了保护 Web 服务器的安全](http://www.ibm.com/developerworks/web/library/wa-secureweb/)。

# sql - 将一行拆分为多行——表格转换

> ID：11892132
> 
> 赞同：2
> 
> 时间：2012-08-09T21:22:27.687
> 
> 标签：sql, sql-server

我有一个应该转换为一个目标表的源表。源表包含四列传感器值。目标表应包含四行，其中包含单个传感器值和一列用于传感器编号 - 对于源表中的每一行。换句话说，目标表的行数将增加四倍。（我相信这叫做归一化。至少，我认为将来要使用或多或少或不同的传感器时会更实用。）

更多背景信息来解释。我已经成功尝试了一个插入触发器，它对单行执行此操作：

```
CREATE TRIGGER dbo.temperatures_to_sensors
  ON dbo.Data
  AFTER INSERT
AS
BEGIN
  DECLARE @line_no TINYINT;
  SET @line_no = 2;        -- hardwired for the production line

  DECLARE @UTC DATETIME;
  DECLARE @value1 FLOAT;
  DECLARE @value2 FLOAT;
  DECLARE @value3 FLOAT;
  DECLARE @value4 FLOAT;

  SELECT
      @UTC = CAST((CAST(LEFT(inserted.UTC, 16) AS FLOAT) - 2415020.5) AS DATETIME),
      @value1 = inserted.temperature_1,
      @value2 = inserted.temperature_2,
      @value3 = inserted.temperature_3,
      @value4 = inserted.temperature_4
    FROM inserted;

  INSERT INTO dbo.line_sensor_values
         (UTC, line_no, sensor_no, sensor_value)
  VALUES (@UTC, @line_no, 1, @value1),
         (@UTC, @line_no, 2, @value2),
         (@UTC, @line_no, 3, @value3),
         (@UTC, @line_no, 4, @value4);
END;
GO 
```

现在，我想从旧表初始化一次目标表。之后，触发器将继续填充这些值。

我不擅长 SQL。我试过：

```
CREATE PROCEDURE dbo.init_line_sensor_values
AS
BEGIN
  DECLARE @line_no TINYINT;
  SET @line_no = 2;        -- hardwired for the production line

  DECLARE @UTC DATETIME;
  DECLARE @value1 FLOAT;
  DECLARE @value2 FLOAT;
  DECLARE @value3 FLOAT;
  DECLARE @value4 FLOAT;

  INSERT INTO dbo.line_sensor_values
         (UTC, line_no, sensor_no, sensor_value)
  VALUES (@UTC, @line_no, 1, @value1),
         (@UTC, @line_no, 2, @value2),
         (@UTC, @line_no, 3, @value3),
         (@UTC, @line_no, 4, @value4)
  SELECT
      @UTC = CAST((CAST(LEFT(t.UTC, 16) AS FLOAT) - 2415020.5) AS DATETIME),
      @value1 = t.temperature_1,
      @value2 = t.temperature_2,
      @value3 = t.temperature_3,
      @value4 = t.temperature_4
    FROM dbo.Data AS t;

END;
GO

EXECUTE dbo.init_line_sensor_values
GO 
```

...但它失败了

> 无法将值 NULL 插入到列“UTC”、表“1000574.dbo.line_sensor_values”中；列不允许空值。插入失败。

很明显，`SELECT`应该以不同的方式使用`INSERT`. 还是我必须使用循环？（光标创建`FETCH NEXT...`和`WHILE...`）

**更新**

可以通过这种方式创建源表（简化）：

```
CREATE TABLE dbo.Data(
    UTC varchar(32) NOT NULL,
    temperature_1 float NULL,
    temperature_2 float NULL,
    temperature_3 float NULL,
    temperature_4 float NULL

PRIMARY KEY CLUSTERED 
(
    UTC ASC
)
GO 
```

目标表是这样创建的：

```
CREATE TABLE dbo.line_sensor_values (
    UTC DATETIME NOT NULL,
    line_no TINYINT NOT NULL,   -- line number: 1, 2, 3, etc.
    sensor_no TINYINT NOT NULL, -- sensor number: 1, 2, 3, etc.
    sensor_value float NULL,    -- the measured value

  PRIMARY KEY CLUSTERED (
    UTC ASC,
    line_no ASC,
    sensor_no ASC
  )
)
GO 
```

谢谢你的帮助，彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:59:16.427

如果您需要做的只是将具有四列的表转换为单个表，其中每一行代表源表中的行号和源表中的列，那么这里是一个示例：

这是[SQLFiddle](http://sqlfiddle.com/#!3/4feaf/2)

```
create table fourColumns
(
    column1 varchar(50),
    column2 varchar(50),
    column3 varchar(50),
    column4 varchar(50)
)

insert into fourColumns select 'A','B','C','D'
insert into fourColumns select 'E','F','G','H'

    ;with MyCTE (lineNumber, columnNumber, Result)
as
(
    select ROW_NUMBER() OVER(ORDER BY column1 ASC) AS Row, 1, column1  
    from fourColumns
    union all
    select ROW_NUMBER() OVER(ORDER BY column2 ASC) AS Row, 2, column2  
    from fourColumns
    union all
    select ROW_NUMBER() OVER(ORDER BY column3 ASC) AS Row, 3, column3  
    from fourColumns
    union all
    select ROW_NUMBER() OVER(ORDER BY column4 ASC) AS Row, 4, column4  
    from fourColumns        
)
    -- add insert here
select lineNumber, 
       columnNumber,
       Result
 from MyCTE
 order by lineNumber 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:54:24.673

```
INSERT INTO dbo.line_sensor_value
(UTC, line_no, sensor_no, sensor_value)
select UTC, line_no, sensor_no, temperature_1 as sensor_value from dbo.Data
union
select UTC, line_no, sensor_no, temperature_2 as sensor_value from dbo.Data
union
select UTC, line_no, sensor_no, temperature_3 as sensor_value from dbo.Data
union
select UTC, line_no, sensor_no, temperature_4 as sensor_value from dbo.Data 
```

# asp.net - ASP.NET URL 重写在开发服务器中有效，但在本地 IIS 中无效

> ID：11892140
> 
> 赞同：2
> 
> 时间：2012-08-09T21:23:13.297
> 
> 标签：asp.net, iis, url-rewriting, iis-7.5, aspnet-development-server

我正在使用 Visual Studio 2010 和 IIS 7.5 对 ASP.NET 进行编程

我在 Global.asax (RouteTable.Routes.MapPageRoute) 中有 URL 重写。它适用于开发服务器，但不适用于 IIS。

在 IIS 中是否有此配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:31:33.350

有一个 webconfig ......你*不需要*删除/添加部分，这只是显示你如何明确地*只*包含这个模块。

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="UrlRoutingModule" />
      <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web.Routing, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </modules>
    <handlers>
      <add name="UrlRoutingHandler" preCondition="integratedMode" verb="*" path="UrlRouting.axd" type="System.Web.HttpForbiddenHandler, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    </handlers>
  </system.webServer> 
```

系统网站：

```
 <httpModules>         
      <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web.Routing, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
 </httpModules> 
```

# c# - 一次选择和操作多个滑块

> ID：11892143
> 
> 赞同：1
> 
> 时间：2012-08-09T21:23:18.303
> 
> 标签：c#, .net, wpf, xaml

我脑子里有一个类似均衡器的控制的想法，但我希望能够多选各种拇指并同时移动它们。我想过使用列表框并使用它所具有的选择属性，但我还没有完全弄清楚如何将它传递到滑块中并一致地移动它们。有没有人有任何好主意或以前做过类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:31:04.330

大概你有一些与用户交互的控制权。一种想法是围绕这些控件创建装饰器以显示“选定”状态。监听每个控件的鼠标点击并测试 Ctrl 修饰符（Ctrl 和/或 shift，两者通常用于多选）。切换它们中的每一个的选定状态，您将存储在一个单独的集合中（也许是一个数组）。

当您检测到这些控件之一的移动时，请检查它是否被选中。如果是，请移动所有其他人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T23:29:29.720

也许您可以在 MultiExtended 选择模式下使用 Listbox 的 SelectedItems 属性。

你将它绑定到一个 Observablecollection

然后检查滑块的 valueChanged 事件，并在事件处理程序中获取差异并增加集合中所有滑块的值。

现在，当您选择并拖动滑块的拇指时，它将影响其他选定的滑块。

（小问题：你在使用 MVVM 吗？）

# jquery - 用户点击自动完成建议后重新加载页面

> ID：11892144
> 
> 赞同：0
> 
> 时间：2012-08-09T21:23:25.217
> 
> 标签：jquery, google-maps-api-3

我使用谷歌地图的自动完成功能来建议位置作为用户类型（http://code.google.com/p/geo-autocomplete/）。一旦用户单击其中一个建议，javascript 就会将其填充到文本字段中。一旦发生这种情况，我想重新加载页面，通过 URL 传递用户单击的完整地址。

我尝试将 onclick() 放在建议列表中并让它重新加载页面，但是，例如，如果用户键入“dubl”，然后从建议中单击“都柏林，爱尔兰”，则页面重新加载通过“dubl” . 所以我需要在 javascript 填充文本字段后重新加载页面。但我找不到javascript在哪里做这个......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:33:39.777

我不知道 jquery 使用哪个 API，如果没有更多信息，我无法提供确切的答案，但我想我可以指出方向。你有几个问题需要克服：

首先，自动完成 API 通常有一个用于选择下拉菜单的事件。这通常是因为元素在自动完成创建它们之前不存在，因此您不能提前编写选择器。jQuery UI 自动完成是这样做的：

```
"Triggered when an item is selected from the menu; 
ui.item refers to the selected item. The default 
action of select is to replace the text field's value 
with the value of the selected item. Canceling this event 
prevents the value from being updated, but does not 
prevent the menu from closing."

$( ".selector" ).autocomplete({
   select: function(event, ui) { //override this behavior }
}); 
```

您的另一个大问题是，如果您无法阻止自动完成触发页面重新加载，则在页面重新加载之间没有有效的客户端通信方式。除非您可以将查询字符串附加到类似`.html?reload=true`或类似的 URL，否则您将无法告诉重新加载的页面它已经重新加载。

# xml - XSLT：更改命名空间的值

> ID：11892147
> 
> 赞同：2
> 
> 时间：2012-08-09T21:23:47.613
> 
> 标签：xml, xslt, xslt-1.0, xml-namespaces

我必须使用 XSLT 从一个 XML 转换为另一个 XML。我的源文件中有一些命名空间，并且在所需的文件中，除了更改节点的值`xsi:schemaLocation`和添加`adlcp:scormtype="sco"`属性外，我必须保持所有命名空间不变。`<resource>`

**我的输入文件：**

```
 <?xml version="1.0" encoding="UTF-8"?>
            <manifest identifier="eXescorm_quiz4823c6301f3d3afc1c1f" 
            xmlns="http://www.imsglobal.org/xsd/imscp_v1p1"
            xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_rootv1p2" 
            xmlns:imsmd="http://www.imsglobal.org/xsd/imsmd_v1p2" 
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
            xsi:schemaLocation="http://www.imsglobal.org/xsd/imscp_v1p1 imscp_v1p1.xsd http://www.imsglobal.org/xsd/imsmd_v1p2 imsmd_v1p2p2.xsd"> 

    <resources>
         <resource identifier="RES22" type="webcontent" href="index.html"> 
                 <file href="index.html"/>
                 <file href="common.js"/>
         </resource>
    </resources>
</manifest> 
```

**期望的输出：**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <manifest xmlns="http://www.imsglobal.org/xsd/imscp_v1p1" 
              identifier="eXeorm_sample4823c6301f29a89a4c1f" 
              xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_rootv1p2" 
              xmlns:imsmd="http://www.imsglobal.org/xsd/imsmd_v1p2" 
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
              xsi:schemalocation="http://www.imsproject.org/xsd/imscp_v1p1 imscp_v1p1.xsd http://www.imsglobal.org/xsd/imsmd_v1p2 imsmd_v1p2p2.xsd http://www.adlnet.org/xsd/adlcp_rootv1p2 adlcp_rootv1p2.xsd">

    <resources>
         <resource identifier="RES22" type="webcontent" href="index.html" adlcp:scormtype="sco"> 
                 <file href="index.html"/>
                 <file href="common.js"/>
         </resource>
    </resources>   
</manifest> 
```

**我的 XSLT（更新）**

```
<xsl:stylesheet version="1.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_rootv1p2"
        xmlns:xhtml="http://www.imsglobal.org/xsd/imscp_v1p1"
        xmlns="http://www.imsglobal.org/xsd/imscp_v1p1"
        exclude-result-prefixes="xhtml">
        <xsl:output method="html" indent="yes" encoding="UTF-8"/>
        <xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="xhtml:resource[@type='webcontent']"
  xmlns="http://www.w3.org/1999/xhtml">
  <resource adlcp:scormtype="sco">
    <xsl:apply-templates select="
      (@*[local-name()!='adlcp:scormtype'])
      | node()"/>
  </resource>
</xsl:template> 
```

请帮助我更改命名空间的值`xsi:schemalocation`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:22:35.133

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:x="http://www.imsglobal.org/xsd/imscp_v1p1"
 xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_rootv1p2"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="*">
  <xsl:element name="{name()}" namespace="{namespace-uri()}">
  <xsl:copy-of select="namespace::*[name()]"/>
   <xsl:apply-templates select="@*|node()"/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="@*">
  <xsl:copy-of select="."/>
 </xsl:template>

 <xsl:template match="/*">
  <xsl:element name="{name()}" namespace="{namespace-uri()}">
  <xsl:copy-of select="namespace::*[name()]"/>
   <xsl:apply-templates select="@*"/>
   <xsl:attribute name="xsi:schemaLocation">
    <xsl:value-of select=
    "'http://www.imsproject.org/xsd/imscp_v1p1 imscp_v1p1.xsd http://www.imsglobal.org/xsd/imsmd_v1p2 imsmd_v1p2p2.xsd http://www.adlnet.org/xsd/adlcp_rootv1p2 adlcp_rootv1p2.xsd'"
    />
   </xsl:attribute>
   <xsl:apply-templates select="node()"/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="x:resource">
  <xsl:element name="{name()}" namespace="{namespace-uri()}">
  <xsl:copy-of select="namespace::*[name()]"/>
   <xsl:apply-templates select="@*"/>
   <xsl:attribute name="adlcp:scormtype">sco</xsl:attribute>
   <xsl:apply-templates select="node()"/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<manifest identifier="eXescorm_quiz4823c6301f3d3afc1c1f"
                xmlns="http://www.imsglobal.org/xsd/imscp_v1p1"
                xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_rootv1p2"
                xmlns:imsmd="http://www.imsglobal.org/xsd/imsmd_v1p2"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://www.imsglobal.org/xsd/imscp_v1p1 imscp_v1p1.xsd http://www.imsglobal.org/xsd/imsmd_v1p2 imsmd_v1p2p2.xsd">

        <resources>
             <resource identifier="RES22" type="webcontent" href="index.html">
                     <file href="index.html"/>
                     <file href="common.js"/>
             </resource>
        </resources>
</manifest> 
```

**产生想要的正确结果：**

```
<manifest xmlns="http://www.imsglobal.org/xsd/imscp_v1p1" xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_rootv1p2" xmlns:imsmd="http://www.imsglobal.org/xsd/imsmd_v1p2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" identifier="eXescorm_quiz4823c6301f3d3afc1c1f" xsi:schemaLocation="http://www.imsproject.org/xsd/imscp_v1p1 imscp_v1p1.xsd http://www.imsglobal.org/xsd/imsmd_v1p2 imsmd_v1p2p2.xsd http://www.adlnet.org/xsd/adlcp_rootv1p2 adlcp_rootv1p2.xsd">
   <resources>
      <resource identifier="RES22" type="webcontent" href="index.html" adlcp:scormtype="sco">
         <file href="index.html"/>
         <file href="common.js"/>
      </resource>
   </resources>
</manifest> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:38:05.020

在我看来，你忘记包括

```
 xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_rootv1p2" 
```

XSLT 中的命名空间。这应该是您遇到错误的原因。

# php - 如何使用 Digest Auth 手动进行身份验证？

> ID：11892148
> 
> 赞同：0
> 
> 时间：2012-08-09T21:23:59.273
> 
> 标签：php, rest, authentication, digest, digest-authentication

我有一个想要访问的 api，我的应用程序有自己的登录表单。每次我尝试访问我的休息资源时，我都想使用这些凭据。问题是，因为我使用的是 HTTP Digest，所以每次我发送 401 Unauthorized 标头时，都会弹出一个丑陋的特定于浏览器的登录表单。我该如何覆盖这个？如何在不使用默认表单的情况下将用户名和密码传递给 Digest Auth？不确定我的问题是否足够具体...

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-09T21:25:41.640

只需在 url 中指定登录名和密码，形式为

```
http://username:password@domain/url 
```

# javascript - 如何减少 Javascript 中的两个循环以提高效率

> ID：11892149
> 
> 赞同：0
> 
> 时间：2012-08-09T21:23:59.860
> 
> 标签：javascript, arrays, loops, while-loop, big-o

我有一个特定的数组，我想通过它检查数组中的两个值是否等于传递给函数的值，如果两个整数相等，则将其传递给一个新数组。

我通过使用两个向后的while循环并将长度缓存为变量来解决这个问题，这似乎很有效。但是，有人向我提到，可能有一种方法可以消除对其中一个循环的需求，并使其更加高效，从而优化 BIG O 表示法。

任何想法如何做到这一点？这就是我所拥有的...

```
var intArray = [1, 3, 7, 8, 10, 4, 6, 13, 0],
    newArray = [],
    i = intArray.length;

function arrayCheck(k) {
    while(i--) {
        var z = i;
        while (z--) {
            if (intArray[i] + intArray[z] === k) {
                newArray.push(intArray[i]);
                newArray.push(intArray[z]);
            }
        }
    }
    alert(newArray);
}

arrayCheck(8); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:37:50.837

有一种算法可以在线性 [O(n)] 时间内解决这个问题。我建议您查看这个[SO 答案](https://stackoverflow.com/questions/5630363/find-two-elements-in-an-array-that-sum-to-k)。

此外，正如其他人所说，将答案标记为已接受将使人们更有可能回答您的问题。您可能希望重新审视您之前提出的问题并接受任何应得的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:06:38.380

如果您检查 number`N`和`intArray[i] = M`，那么您需要`N-M`在数组中找到一个值。

构建一个高效的树搜索来查找值`N-M`，您可以在`O(n+logn)`.

# javascript - 使悬停菜单适用于移动设备的最佳实践方法是什么？

> ID：11892155
> 
> 赞同：3
> 
> 时间：2012-08-09T21:24:43.870
> 
> 标签：javascript, jquery, mouseevent, jquery-events, touch-event

我环顾四周，但我没有找到似乎是常见问题的答案。

我有一个在悬停时激活的基本下拉菜单（使用 jQuery 的 hoverintent 插件）。它适用于桌面浏览器，但对于不能像 iPad 那样将悬停事件转换为点击的移动设备，它不起作用。这是现在的Javascript：

```
$('li.threecolumns, li.twocolumns, li.onecolumn').hoverIntent(      
function() {
    $(this).children('div').fadeToggle(fadeInSpeed);
},
function() {
    $(this).children('div').fadeToggle(fadeOutSpeed);
}); 
```

我的问题是：在移动设备上使用点击和在桌面上悬停作为下拉菜单的最干净、问题最少的方法是什么？我有几个想法，但不确定哪个：

1.  `onclick`每次点击时附加事件并禁用悬停。

2.  检测悬停的能力（不确定如何完成）并使用点击处理程序（如果可用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:30:39.797

至少`hover`当有事件处理程序时，iOS 会自动干扰事件，因此您必须为该`hover`事件点击一次，为任何事件点击第二次`click`。

对 hove 的检测是微不足道的。检查客户端是否支持`touch`. 如果有`touch`，就没有`hover`。

```
if ("ontouchstart" in document) {
    // touch only code
} else {
    // "desktop" code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T22:01:14.653

默认情况下，iO 和一些 Android 实现了悬停事件的点击。它很方便，但是，您需要确保您的顶级链接指向有效的锚点。不可点击的父放置者的日子已经一去不复返了，如果该链接只指向一个页面，所有子元素都列为链接，那就这样吧。但让它去某个地方。

# java - 不关闭光标的android缺点

> ID：11892159
> 
> 赞同：18
> 
> 时间：2012-08-09T21:24:54.043
> 
> 标签：java, android, sqlite, android-cursor

我有一些关于`Cursor`.

我想知道不关闭 a 的缺点是`Cursor`什么？

它释放资源，但释放了哪些资源？

如果我们不关闭`Cursor`？后果是什么，程度如何？

不关闭 a`Cursor`不会`Activity`有一点影响，但它会在 log cat 中产生错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T21:35:48.967

关闭 a`Cursor`将避免任何潜在的内存泄漏，因此**是**的，它们应该在不再使用时始终关闭。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T22:46:42.480

我认为您不会因为忘记关闭一个光标而看到很多问题。问题（这适用于几乎所有内存泄漏）是，如果你一遍又一遍地这样做，最终会发生一些不好的事情。

例如，我编写了一个将数据从设备的 SQLite DB 上传到服务器的应用程序。如果每次从数据库读取和写入数据时我都没有关闭游标，最终我会遇到内存不足错误和其他各种问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T22:15:44.233

光标只是一个界面。很大程度上取决于实现，实现您正在使用的接口的特定类......

在 SQLiteCursor 的情况下，有很多事情需要清理（来自 Froyo）：

```
@Override
public void close() {
    super.close();
    deactivateCommon();
    mQuery.close();
    mDriver.cursorClosed();
} 
```

不关闭光标，数据应该仍然是一致的，但你会泄漏内存......

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-09T21:29:25.200

如果您不关闭游标，那么您将无法访问数据库中的数据，因为当数据库打开时，如果发生 Activity 暂停或其他情况，则无法访问它。具体来说，如果让 Activity 来管理，这个问题就可以得到缓解。

# sql - 编写一个选择语句来比较同一列中的信息而不创建单独的函数

> ID：11892161
> 
> 赞同：0
> 
> 时间：2012-08-09T21:24:59.783
> 
> 标签：sql, sql-server-2008

所以我有下表：

```
 Age    Name    School
 22     x       ryerson
 31     y       york
 14     z       U of T 
```

我想写一个查询结果如下：

```
 Age  Name School(of the next-youngest person)     
  22    x    U  of T
  31    y    ryerson
  14    z    null 
```

在不创建另一个函数或将参数传递给另一个函数的情况下，我将如何编写此查询？我正在使用 SQL Server。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:51:54.507

不知道为什么你不能使用`MAX`. 无论如何，这应该这样做：

```
SELECT A.Age, A.Name, B.School
FROM YourTable A
OUTER APPLY (   SELECT TOP 1 School
                FROM YourTable
                WHERE Age < A.Age
                ORDER BY Age DESC) B 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:57:08.127

您可以使用子查询：

```
SELECT o.Age, o.Name,
    (SELECT TOP 1 c.School
    FROM Students c
    WHERE c.Age < o.Age
    ORDER BY c.Age DESC) as school
FROM Students o 
```

# vbscript - 基本 VBS 帮助 - 优化 VBS 脚本

> ID：11892162
> 
> 赞同：1
> 
> 时间：2012-08-09T21:25:01.790
> 
> 标签：vbscript, wmi

我发现了这个输出逻辑磁盘大小的简单脚本。

```
strComputer = "."

Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" _
    & strComputer & "\root\cimv2")

Set colDisks = objWMIService.ExecQuery _
    ("Select * from Win32_LogicalDisk")

For Each objDisk in colDisks
    Wscript.Echo "DeviceID: " & objDisk.DeviceID & " with a Disk Size: " & objDisk.Size

Next 
```

我的 VBS 技能很差，需要帮助：

1.  我想获得一个大小数量的只有 C 和 D 分区加在一起
2.  如果大小（来自第 1 步）不等于 500 GB（介于 450,000,000,000 和 550,000,000,000 之间），我需要计算机提示警告并“按任意键”继续
3.  我不想要一个弹出窗口，因为这将在 WinPE 的提示下运行，是否可以在提示窗口中获取输出？

我问了很多所以提前谢谢你如果你能帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:44:38.343

您将需要使用 cscript 启动您的脚本。此代码来自[http://ask.metafilter.com/79481/vbscript-printing-to-command-line](http://ask.metafilter.com/79481/vbscript-printing-to-command-line) 这允许回显转到命令行而不是消息框。

```
CheckStartMode
strComputer = "."

Set objWMIService = GetObject("winmgmts:" _
& "{impersonationLevel=impersonate}!\\" _
& strComputer & "\root\cimv2")

Set colDisks = objWMIService.ExecQuery _
("Select * from Win32_LogicalDisk")

For Each objDisk in colDisks
    If(objDisk.DeviceID="C:" or objDisk.DeviceID="D:") then
        Wscript.Echo "DeviceID: " & objDisk.DeviceID & " with a Disk Size: " & objDisk.Size
        TotalSize = CCur(TotalSize) + CCur(objDisk.Size)
    End if
Next
If(TotalSize <450000000000 or TotalSize >550000000000) then
    Wscript.Echo "Disk size of " & TotalSize & " is out of range."
    Wscript.Echo "Press enter to contine."
    z = WScript.StdIn.Read(1)
End if

Wscript.Echo "Complete, Press enter to end."
z = WScript.StdIn.Read(1)
Sub CheckStartMode
     ' Returns the running executable as upper case from the last \ symbol
     strStartExe    = UCase( Mid( wscript.fullname, instrRev(wscript.fullname, "\") + 1 ) )

     If Not strStartExe = "CSCRIPT.EXE" Then
          ' This wasn't launched with cscript.exe, so relaunch using cscript.exe explicitly!
          ' wscript.scriptfullname is the full path to the actual script

          set           oSh = CreateObject("wscript.shell")
          oSh.Run   "cscript.exe """ & wscript.scriptfullname & """"
          wscript.quit

     End If
End Sub 
```

# java - Java中的正则表达式：将字符串捕获到一组单词

> ID：11892166
> 
> 赞同：3
> 
> 时间：2012-08-09T21:25:35.810
> 
> 标签：java, regex, string

我正在尝试捕获一个字符串，直到某个单词在某组单词中。

我只想捕获字符串直到其中一个单词的第一个实例，因为它们可能在字符串中出现很多次。

例如：

词组：（*是、在、为*）

String = "从前有*一只*狐狸*在*洞里"; 会返回“曾几何时那里”

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T21:33:26.180

您需要的称为[Lookahead](http://www.regular-expressions.info/lookaround.html)。您的情况的确切正则表达式是：

```
/^.+?(?=(?:was)|(?:in)|(?:for))/ 
```

无论如何，^ 匹配字符串的开头，.+? 是一个惰性匹配（它将匹配尽可能短的字符串）， (?= ... ) 表示“跟随”并且 (?: ... ) 是一个非捕获组 - 这可能对您来说是必需的，也可能不是必需的。

对于奖励积分，您可能应该使用单词边界来确保匹配整个单词，而不是子字符串（“The fox was not”将返回“The fox”），并在前瞻中使用前导空格杀死比赛中的尾随空格：

```
/^.+?(?=\s*\b(?:was)|(?:in)|(?:for)\b)/ 
```

其中 \s* 匹配任意数量的空白（包括根本没有），而 \b 匹配单词的开头或结尾。这是一个零宽度断言，这意味着它与实际字符不匹配。

或者，在 Java 中：

```
Pattern p = Pattern.compile("^.+?(?=\\s*\\b(?:was)|(?:in)|(?:for)\\b)"); 
```

我认为这会奏效。我没有使用它，但根据文档，那个确切的字符串应该可以工作。只需要逃避所有的反斜杠。

## 编辑

一年多之后，我在这里，我刚刚意识到上面的正则表达式并没有像我当时认为的那样做。交替具有最高优先级，而不是最低优先级，因此这种模式更正确：

/^.+?(?=\s*\b(?:was|in|for)\b)/

将这个[新的正则表达式](http://regexr.com?371uc)与我的[旧正则表达式进行比较。](http://regexr.com?371uf) 此外，未来的旅行者，如果不存在这样的中断词，您可能希望捕获整个字符串。试穿这个尺寸：

```
/^(?:(?!\s*\b(?:was|in|for)\b).)*/ 
```

这个使用 NEGATIVE 前瞻（断言匹配失败的模式）。它可能更慢，但它仍然可以完成工作。 [在这里查看它的实际应用](http://regexr.com?371uo)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T21:38:08.667

您可以使用此代码在终止词之前捕获字符串：

```
Pattern p = Pattern.compile("^(.*?)((\\b(was|in|for)\\b)|$)");
String s = "Once upon a time there was a fox in a hole";
Matcher m = p.matcher(s);
if (m.find()) {
    System.out.println(m.group(1));
} 
```

此代码产生以下输出（[链接](http://ideone.com/Lrt5h)）：

```
Once upon a time there 
```

以下是这个表达式的工作原理：`(\\b(was|in|for)\\b)`表示“内括号中列出的任何单词，当它们出现在单词边界上时”。`$`即使在源中没有出现任何终止词，外部的表达式也允许捕获某些内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T21:38:37.890

处理此问题的一个非常简单的方法是只`split`使用正则表达式的字符串并保留返回的第一件事：

```
String str = "Once upon a time there was a fox in a hole";
String match = str.split("(was|in|for)")[0];

// match = "Once upon a time there " 
```

在此示例中，将在第一个匹配的单词*之前*`match`包含字符串的第一部分，或者在未找到单词的字符串的情况下，它将包含整个字符串。

 ** * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T21:37:16.517

```
String s = "Once upon a time there was a fox in the hole";
String[] taboo = {"was", "in", "for"} ;
for (int i = 0; i < taboo.length; i++){
    if (s.indexOf(taboo[i]) > -1 ){
        s=s.substring(0, s.indexOf(taboo[i])) ;
    }
}
out.print(s); 
```

在我的电脑上工作..*

# macos - 在 mac osx 中编译 libqxt

> ID：11892171
> 
> 赞同：5
> 
> 时间：2012-08-09T21:25:44.013
> 
> 标签：macos, qt, makefile, libqxt

我有最新的 (git) 版本的 libqxt。我运行`./configure`并且效果很好，然后 make 失败并出现以下错误：

```
linking ../../lib/QxtWidgets.framework/QxtWidgets
ld: warning: directory not found for option '-L/usr/local/pgsql/lib'
ld: warning: directory not found for option '-L/tmp/qt-stuff-85167/source/qt-everywhere-opensource-src-4.8.1/Desktop/Qt/4.8.1/gcc/lib'
ld: warning: directory not found for option '-F/tmp/qt-stuff-85167/source/qt-everywhere-opensource-src-4.8.1/Desktop/Qt/4.8.1/gcc/lib'
Undefined symbols for architecture x86_64:
  "_CGSGetWindowProperty", referenced from:
      QxtWindowSystem::windowTitle(long)   in qxtwindowsystem_mac.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make[1]: *** [../../lib/QxtWidgets.framework/QxtWidgets] Error 1
make: *** [sub-src-widgets-install_subtargets] Error 2 
```

如果重要的话，我正在使用 OSX Mountain Lion。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:53:50.817

作为一个 hacky 修复，您可以删除 CGSGetWindowProperty 属性调用 - Qxt 将编译，但当然`QxtWindowSystem::windowTitle`不能正常工作。

```
diff --git a/src/widgets/mac/qxtwindowsystem_mac.cpp b/src/widgets/mac/qxtwindowsystem_mac.cpp
index 63cab38..de4a89c 100644
--- a/src/widgets/mac/qxtwindowsystem_mac.cpp
+++ b/src/widgets/mac/qxtwindowsystem_mac.cpp
@@ -89,11 +89,7 @@ QString QxtWindowSystem::windowTitle(WId window)
     // most of CoreGraphics private definitions ask for CGSValue as key but since
     // converting strings to/from CGSValue was dropped in 10.5, I use CFString, which
     // apparently also works.
-    err = CGSGetWindowProperty(connection, window, (CGSValue)CFSTR("kCGSWindowTitle"), &windowTitle);
-    if (err != noErr) return QString();
-
-    // this is UTF8 encoded
-    return QCFString::toQString((CFStringRef)windowTitle);
+    return QString();
 }

 QRect QxtWindowSystem::windowGeometry(WId window) 
```

为了将来参考，您可以[在 libqxt 存储库中监视此问题](http://dev.libqxt.org/libqxt/issue/27/building-fails-under-mac-os-x-108)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T10:44:27.430

似乎 Qxt 正在使用一些已在 Mountain Lion 中删除的私有 Mac OS X API。CGSGetWindowProperty 没有记录在以前版本的 Mac OS X 中，所以我认为无论如何使用它都不可靠。

# symfony - 调试生产错误模板的最佳方法是什么？

> ID：11892172
> 
> 赞同：4
> 
> 时间：2012-08-09T21:25:47.410
> 
> 标签：symfony, twig

我正在尝试按照这篇[食谱文章](http://symfony.com/doc/current/cookbook/controller/error_pages.html)为我的应用程序创建漂亮的错误页面。有时会出现错误，导致应用程序返回一行：`503 Service Unavailable`. 只要我能看到引发的潜在错误或异常，我的生活就会轻松很多。切换到开发环境也无济于事，因为错误模板仅在生产中使用。

我发现我需要添加`TwigBundle`到资产配置中才能使用 javascript 和 css 资产。像这样的问题在生产环境中确实很难调试。

在我的前端控制器中将调试模式设置为`true`无济于事，因为生产错误模板被开发模板取代。

**编辑**

感谢 Mike Purcell，我设法找回了提供的错误。我有

> /[snip]/app/cache/prod/appprodUrlMatcher.php:669 中未捕获的异常“Symfony\Component\Routing\Exception\ResourceNotFoundException”

结果框架应该处理异常，但如果错误 Twig 模板中可能出现错误，它只是决定抛出 503 错误。

~~如何在 Symfony2 应用程序中打开生产环境的错误报告？~~

我厌倦了猜测出了什么问题并清除了缓存。在生产中调试 Twig 的错误模板的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T23:33:43.053

查看生产中发生的错误的最佳方法是配置 Monolog 以将错误发送给您或发送到文件中。

查看有关电子邮件日志的 Symfony2 Cookbook [http://symfony.com/doc/master/cookbook/logging/monolog_email.html](http://symfony.com/doc/master/cookbook/logging/monolog_email.html)

为了使错误页面看起来更好看一下这个食谱条目如何做到这一点[http://symfony.com/doc/master/cookbook/controller/error_pages.html](http://symfony.com/doc/master/cookbook/controller/error_pages.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-28T18:44:16.197

有专门为错误报告而构建的开源工具，如[Sentry](https://getsentry.com/welcome/)，它有一个[本地 Symfony 客户端](https://docs.getsentry.com/hosted/clients/php/integrations/symfony2/?_ga=1.13843127.1035364749.1447199367)。

免责声明：我为哨兵工作

# ravendb - RavenDb 分面搜索，包括过滤掉的分面范围

> ID：11892173
> 
> 赞同：2
> 
> 时间：2012-08-09T21:25:49.783
> 
> 标签：ravendb, faceted-search

我想问一下 RavenDb 中是否有一种方法可以执行分面搜索，但也可以获得被过滤掉的分面。

例子：

让我们有一个具有属性和的`Car`实体。`Color : string``Status : enum(New,Used)`

当我搜索`Red`汽车时，我还希望获得所有其他颜色的计数。同样，如果我搜索`Used`汽车，我还想查看新车的数量。

如果我没有选中所有内容：

```
UI
Color:  [ ] Red (5)   [ ] Blue (7) [ ] White (15)
Status: [ ] Used (20) [ ] New (7)

C#
session.Query<Car, Cars_Index>().ToFacets("facets/Cars"); 
```

我得到了正确的结果。

但是一旦我过滤了两者`Color`，`Status`我得到的结果非常有限：

```
UI
Color:  [x] Red (3)
Status: [x] Used (3)

C#
session.Query<Car, Cars_Index>()
    .Where(a => a.Status == CarStatus.Used)
    .Where(a => a.Color == "Red")
    .ToFacets("facets/Cars");

Response (JSON):
{ "Color": [ { "Range": "Red", "Count": 3 } ], "Status" : [ { "Range": "Used", "Count": 3 } ] } 
```

我目前所做的我为每个方面发出单独的查询：

```
var colorFacet = session.Query<Car, Cars_Index>()
    .Where(a => a.Status == CarStatus.Used)
    .ToFacets("facets/Cars");

var statusFacet = session.Query<Car, Cars_Index>()
    .Where(a => a.Color == "Red")
    .ToFacets("facets/Cars"); 
```

我想达到的目标：

```
UI
Color:  [x] Red (3)  [ ] Blue (4) [ ] White (12)
Status: [x] Used (3) [ ] New (7) 
```

所以得到红色二手车，蓝色二手车，白色二手车和用户红色汽车和新红色汽车的数量。因此，用户可以立即反馈当他单击复选框时会发生什么。

随着方面的数量和可变性的增加，这变得难以管理。有没有办法设置它，它可以在一个请求/查询中执行。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:28:23.527

这不是方面与 RavenDB 一起工作的方式（或一般而言，就此而言）。您根据*当前*查询查看构面，而不是所有构面的交集。

# iphone - 将 pid_t 转换为 NSString

> ID：11892174
> 
> 赞同：1
> 
> 时间：2012-08-09T21:25:55.143
> 
> 标签：iphone, objective-c, ios

如何将 pid_t 实例转换为字符串实例？我知道 pid_t 只不过是一个有符号整数，但我不能这样做：

```
 # suppose appID is already an instance of pid_t
NSString *appStringID = [NSString stringWithFormat:@"%@", appID]; 

```

为什么这会引发错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T21:26:54.497

作为有符号整数，这只是您的 NSString 的格式问题：

改为这样做：

```
NSString *appStringID = [NSString stringWithFormat:@"%ld", (long)appID]; 
```

" " 的格式字符串`%@`意味着您正在传递另一个 NSString 对象，而不是整数（原始 C 类型）。

# matplotlib - matplotlib 中未填充的条形图

> ID：11892175
> 
> 赞同：15
> 
> 时间：2012-08-09T21:26:02.270
> 
> 标签：matplotlib, bar-chart

使用直方图，有一个简单的内置选项`histtype='step'`。如何制作相同风格的条形图？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-08-27T21:58:15.790

[阅读评论后添加答案]将可选关键字设置`fill=False`为条形图：

```
import matplotlib.pyplot as plt

plt.bar(bins[:5], counts[:5], fill=False, width=60)  # <- this is the line

plt.title("Number of nodes with output at timestep")
plt.xlabel("Node count")
plt.ylabel("Timestep (s)") 
```

会给： [![在此处输入图像描述](../Images/6b8f1c48e9510f66bd3550139ab981be.png)](https://i.stack.imgur.com/DO2av.png)

或`plt.plot`与关键字一起使用`ls='steps'`：

```
plt.plot(bins[-100:], counts[-100:], ls='steps')
plt.title("Number of nodes with output at timestep")
plt.xlabel("Node count")
plt.ylabel("Timestep (s)") 
```

[![在此处输入图像描述](../Images/10f0d3135a3c8bb258f2558e5a613eaa.png)](https://i.stack.imgur.com/iuQjl.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-03-21T18:55:43.440

尽管 OP 链接到一个帖子，该帖子回答了与直方图阶梯图有关的稍微不同的问题，但对于通过这里的任何人来说，这是一个解决方案，他们专门试图关闭`pyplot.bar`条形图中的面部颜色：

```
import matplotlib.pyplot as plt
import numpy as np

# create x coords for the bar plot
x = np.linspace(1, 10, 10)

# cook up some random bar heights -- exact results may vary :-P
y = np.random.randn(10)
z = np.random.randn(10) * 2

# plot bars with face color off
plt.bar(x-0.2, y, width=0.4, edgecolor='purple', color='None')
plt.bar(x+0.2, z, width=0.4, edgecolor='darkorange', color='None')
plt.show() 
```

[![在此处输入图像描述](../Images/8b69d93ffa02a6d0810fc2ae885cb33a.png)](https://i.stack.imgur.com/G07gb.png)

请注意，条形边缘具有可设置的`matplotlib.lines.Line2D`属性，例如`linewidth`、`linestyle`、`alpha`等：

```
plt.bar(x-0.2, y, width=0.4, edgecolor='purple', color='None', 
linewidth=0.75, linestyle='--')
plt.bar(x+0.2, z, width=0.4, edgecolor='darkorange', color='None',
linewidth=1.5, linestyle='-.')
plt.show() 
```

[![在此处输入图像描述](../Images/e33f6bda9435cf930791cbe8d212a3c9.png)](https://i.stack.imgur.com/8B2Ir.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-03T18:33:23.923

我看到你找到了关于[这个其他主题](https://stackoverflow.com/questions/11297030/matplotlib-stepped-histogram-with-already-binned-data)的答案，但我感觉`matplotlib.pyplot.step`也能完成这项工作，而且更直接（[见这里](https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.step.html)）。

***编辑：***根据要求，一些示例代码来说明`plt.step`

```
import matplotlib.pyplot as plt
plt.step(list(range(10)),list(range(5))+list(range(5))) 
```

# themes - 如何在 MVC4 中更改主题

> ID：11892182
> 
> 赞同：1
> 
> 时间：2012-08-09T21:26:30.137
> 
> 标签：themes, asp.net-mvc-4

好像我可以从 jquery 站点下载我喜欢的 jquery 主题来创建新主题。但这在我的 MVC 站点中并没有太大变化。谁能告诉我如何在 MVC4 应用程序中更改主题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-11T05:40:05.277

据我了解你的问题：

**如何用来自 jquery ui 主题滚轮的自定义生成主题替换 MVC4 应用程序中的基本主题？**

我的 razor MVC4 Visual Studio 2012 应用程序的步骤是从一些用于 Intranet 应用程序的 MS 标准模板创建的。jQueryUI 已经使用 nuget 的基本主题安装在我的应用程序中。

1.  [使用http://jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)创建主题并将 zip 下载到某个临时文件夹
2.  将 jquery-ui-1.10.3.custom.js 提取到我的 Scripts 文件夹中
3.  在文件 App_Start/Bundle.Config 中编辑了我的 RegisterBundles 方法
    ~~`bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include("~/Scripts/jquery-ui-1.10.1.js"));`~~
    `bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include("~/Scripts/jquery-ui-1.10.3.custom.js"));`
4.  以我的自定义主题（例如 my-theme）命名的 css 子文件夹提取到主题文件夹“Content/themes/my-theme”中。
5.  注释掉 App_Start BundleConfig.cs 中的基本主题行，并将大的基本主题 StyleBundle 替换为单文件包
    `bundles.Add(new StyleBundle("~/Content/themes/my-theme/css").Include( "~/Content/themes/my-theme/jquery-ui-1.10.3.custom.css"));` ~~`//bundles.Add(new StyleBundle("~/Content/themes/base/css").Include( // "~/Content/themes/base/jquery.ui.core.css", // "~/Content/themes/base/jquery.ui.resizable.css", // ...`~~
6.  最后用新的替换了我的 layout.cshtml 中的基本主题包调用。
    `@Styles.Render("~/Content/themes/kjr-theme/css")` ~~`@Styles.Render("~/Content/themes/base/css")`~~

如果有更好或更简洁的方法来替换 MVC4 应用程序中的主题，请告诉我！

迈克尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:45:48.983

由于 jquery ui 版本已更改，MVC4 模板中的 jquery ui 脚本似乎与当前版本的 jquery ui 不兼容。所以你不能只是将下载的 jquery ui 的 css 目录复制到 MVC4 的主题文件夹中，并期望它会应用于你的站点。

所以我所做的就是用jquery.ui.custom.css中的相应部分替换jquery.ui.theme.css。现在，新主题已正确显示在我的 MVC4 站点中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-19T10:54:42.900

代码项目站点使用[Chris Pietschmann的实现](http://pietschsoft.com/post/2009/03/ASPNET-MVC-Implement-Theme-Folders-using-a-Custom-ViewEngine)

代码项目： http: [//www.codeproject.com/Articles/32847/ASP-NET-MVC-Dynamic-Themes](http://www.codeproject.com/Articles/32847/ASP-NET-MVC-Dynamic-Themes)

# c# - 如何从字符串中提取文本？

> ID：11892183
> 
> 赞同：0
> 
> 时间：2012-08-09T21:26:42.260
> 
> 标签：c#, .net

我有这个代码：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    WebRequest request = WebRequest.Create(url);
    request.Method = "GET";
    WebResponse response = request.GetResponse();
    Stream stream = response.GetResponseStream();
    StreamReader reader = new StreamReader(stream);
    string content = reader.ReadToEnd();
    int start = content.IndexOf("profile/");
    int end = content.IndexOf("'");
    string result = content.Substring(start, end - start - 1);
    reader.Close();
    response.Close();
} 
```

例如，我有一条长线：

```
<span class="message-profile-name" ><a  href='/profile/daniel'>daniel</a></span>: <span class="message-text">hello everyone<wbr/> <img class='emoticon emoticon-tongue' src='/t.gif'/></span> 
```

我想建立一个新的字符串： daniel 大家好

我该怎么做 ？在我的代码中它不起作用我得到错误异常说

> ArgumentOutOfRangeException 长度不能小于零。参数名称：长度

上线：`string result = content.Substring(start, end - start - 1);` 在这种情况下：`start = 19572 end = 2110`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:31:46.317

使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)而不是尝试手动解析。

```
var wc = new WebClient();

wc.DownloadStringCompleted += (s, e) =>
{
    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
    doc.LoadHtml(e.Result);

    var link = doc.DocumentNode
                    .SelectSingleNode("//span[@class='message-profile-name']")
                    .Element("a")
                    .Attributes["href"].Value;
};

wc.DownloadStringAsync(new Uri("http://chatroll.com/rotternet")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:39:13.100

似乎您想要的字符串将始终包含在格式为**profile/xxx**的 href 中，一旦您将内容转换为文本形式，使用正则表达式会很简单，即使您有可能使用正则表达式仍然有效有多个*<a href=...>*元素

```
Match match = Regex.Match(content, @"(?<=<a\s*?href='/profile/\w*?'>\s*?)\w*?(?=\s*?<\s*?/a\s*?>)");
string result = match.Value; 
```

将匹配所有粗体，并且**.Value**将返回元素的值，在这种情况下***daniel***，您还可以在正则表达式前面加上**(i?)**以使其不区分大小写以匹配列表中的最后一项

*   **<a href='/profile/daniel'>丹尼尔</a>**
*   **<a href='/profile/danielbc'>丹尼尔</a>**
*   <a href='/profilex/danielbc'>丹尼尔</a>
*   **<a href='/profile/danielbc'>丹尼尔</a>**
*   <a href='/profile/danielbc '>丹尼尔</a>
*   *<a href='/PROFILE/danielbc'>丹尼尔</a>*

**更新：**

要从任何其他类型的元素中获取内容，只需替换突出显示的部分以匹配元素 (?<= **<a\s*?href='/profile/\w*?'>\s*?** )\w *?(?= **\s*?<\s*?/a\s*?>** )。在您的情况下，`"message-text">hello everyone<wbr/>`将是*(?i)(?<= **"message-text"\s*?>\s*?** )* ***.*?*** *(?= **\s*?<\s*?/wbr\s*?>** )*，这将从以下变体中得到**大家好，** **.*?** 表示匹配任何内容（包括空格和标点符号），但尽可能少）。请注意，我从您的回复中更改了您的结束标签，如果它应该是**并不是*这是一个微小的改变，你可以让它工作***

 ****   "message-text">大家好</wbr>
*   <wbr asdfjlds "message-text">大家好</wbr>
*   <wbr "message-text">大家好</wbr>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:30:22.590

使用适当的工具将符号数组拆分为*对您*有意义的数据数组。

您可以使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)*解析*字符串并返回有意义的标记树。

在您可以迭代它们并根据您自己的逻辑聚合成结果字符串之后。***

# jquery - jQuery覆盖点击

> ID：11892193
> 
> 赞同：-2
> 
> 时间：2012-08-09T21:27:35.327
> 
> 标签：jquery, overlay, modal-dialog

我想知道如何在鼠标单击时使用 jQuery 进行叠加？例如我发现了这个：

```
<script>
  $(".my_overlay_trigger").overlay({
     color: '#fff',
     top: 50
  });
</script> 
```

但由于我不知道这实际上是如何工作的，所以我不能使用它。

我想要的是？我想单击一个按钮来运行一个无法用任何类型的按钮关闭的覆盖窗口。只需“Esc”按钮即可关闭它。就像在模态弹出框上一样...

对我有什么解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:31:05.483

如果您愿意添加 jquery ui，您可以参考这个

[http://jqueryui.com/demos/dialog/modal.html](http://jqueryui.com/demos/dialog/modal.html)

看这里：http: [//jsfiddle.net/u8EBJ/](http://jsfiddle.net/u8EBJ/)

注意 src 取自上面的 jqueryui 链接

# jquery - 用户单击时如何删除超链接

> ID：11892195
> 
> 赞同：1
> 
> 时间：2012-08-09T21:27:38.593
> 
> 标签：jquery

单击它后，我正在尝试删除超链接。（分页）

我希望删除超链接但仍显示文本。

```
<a href='#'>1</a>
<a href='#'>2</a>
<a href='#'>3</a>   //remove the hyperlink but keep number 3.
<a href='#'>4</a>
<a href='#'>5</a> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:33:47.860

```
$('a').click(function(){
    $(this).removeAttr("href");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T21:36:20.260

## *[jsBin 演示](http://jsbin.com/emucov/1/edit)*

```
$('a').click(function(e){
  e.preventDefault();          // if you need it
  $(this).contents().unwrap();
}); 
```

[http://api.jquery.com/contents/](http://api.jquery.com/contents/)
[http://api.jquery.com/unwrap/](http://api.jquery.com/unwrap/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T21:30:28.343

怎么样：

```
$('a').click(function(){
    $(this).replaceWith($(this).html());
}); 
```

[jsfiddle](http://jsfiddle.net/mELzT/)

# javascript - 正则表达式 - 所有不带引号的属性

> ID：11892198
> 
> 赞同：0
> 
> 时间：2012-08-09T21:28:12.793
> 
> 标签：javascript, regex, attributes

我有以下 html 字符串

```
<span onclick="Popup=window.open('C_SPD').URL;','Popup','menubar=No,toolbar=No,scrollbars=Yes,width=600,height=500,top=20,left=60,resizable=yes');return  fallse;" href="#">xyz</span>

<a href=mailto@abc.com?subject=LongTerm  third=third>esc@abc.com</a> 
```

我需要在缺少的属性周围加上双引号。

# mysql - INNER JOIN 与更多 AND

> ID：11892205
> 
> 赞同：0
> 
> 时间：2012-08-09T21:29:00.897
> 
> 标签：mysql, sql

我有 2 张桌子。

```
table one: items
table two: items_options 
```

现在我需要在表二上搜索 2 个 options_ids

```
SELECT i.id FROM items as i
INNER JOIN items_options as io ON i.item_id = i.id 
WHERE io.option_id = 60143 AND io.option_id = 60142  
ORDER BY i.xy ASC LIMIT 0,50 
```

如果没有 group by/have 怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:32:45.067

似乎您想要`OR`或使用`IN`声明。

```
SELECT i.id 
    FROM items as i
INNER JOIN items_options as io
    ON i.item_id = i.id 
WHERE io.option_id IN (60143, 60142)
ORDER BY i.xy ASC 
LIMIT 0,50 
```

或者

```
SELECT i.id 
FROM items as i
INNER JOIN items_options as io 
    ON i.item_id = i.id 
WHERE io.option_id = 60143 OR io.option_id = 60142  
ORDER BY i.xy ASC 
LIMIT 0,50 
```

你不能有一个`option_id`同时具有这两个值的。

编辑：如果你想要两个值，你可以使用`UNION ALL`查询：

```
SELECT x.id
FROM
(
  SELECT i.id, i.xy
  FROM items as i
  INNER JOIN items_options as io 
    ON i.item_id = i.id 
  WHERE io.option_id = 60143 
  UNION ALL
  SELECT i.id, i.xy
  FROM items as i
  INNER JOIN items_options as io 
    ON i.item_id = i.id 
  WHERE io.option_id = 60142  
) x
ORDER BY i.xy ASC 
LIMIT 0,50 
```

或者您可以尝试加入`items_options`桌面两次：

```
SELECT i.id 
FROM items as i
INNER JOIN items_options as io1 
  ON i.item_id = io1.id 
INNER JOIN items_options as io2 
  ON i.item_id = io2.id 
WHERE io1.option_id = 60143 AND io2.option_id = 60142  
ORDER BY i.xy ASC 
LIMIT 0,50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:32:14.780

看起来你想要一个`OR`代替`AND`. items_options 中不会有任何行满足这两个条件。

```
WHERE io.option_id = 60143 OR io.option_id = 60142
                           ^^ 
```

或者，

```
WHERE io.option_id IN (60143,60142) 
```

* * *

您提到不想使用 GROUP BY。听起来好像您不想返回重复的 items.id 值。您可以在 SELECT 列表之前添加 DISTINCT 关键字以消除重复项：

```
SELECT DISTINCT i.id FROM items as i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:33:59.700

使用`OR`here 而不是`AND`. `AND`表明这两种情况可以同时发生。由于您正在寻找具有 的行以及具有 的`option_id = 60143`行，因此`option_id = 60142`using`OR`将获得具有其中任何一个的行。

```
SELECT i.id FROM items as i
INNER JOIN items_options as io ON i.item_id = i.id 
WHERE io.option_id = 60143 OR io.option_id = 60142  
ORDER BY i.xy ASC LIMIT 0,50 
```

# objective-c - NSDateComponents 关闭了一个小时

> ID：11892206
> 
> 赞同：1
> 
> 时间：2012-08-09T21:29:07.357
> 
> 标签：objective-c, ios, nsdate, nsdatecomponents

试图将这两个日期与 NSDateComponents 结合起来

**“2012-09-03 00:00:00 +0000”和“1970-01-01 08:00:00 +0000”**

使用以下代码，我得到--> **2012-09-02 11:00:00 +0000**

```
unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;
    NSDateComponents *comps = [[NSCalendar currentCalendar] components:unitFlags fromDate:session.date];
    NSDate *day3 = [[NSCalendar currentCalendar] dateFromComponents:comps];

    unitFlags = NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
    comps = [[NSCalendar currentCalendar] components:unitFlags fromDate:session.start];
    comps.timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
    day3 = [[NSCalendar currentCalendar] dateByAddingComponents:comps toDate:day3 options:0]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T04:29:49.820

找到了解决方案。

这是答案：

```
unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;
    NSCalendar *cal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

    cal.timeZone = [NSTimeZone timeZoneWithName:@"UTC"]; <--this is key

    NSDateComponents *comps = [cal components:unitFlags fromDate:session.date];
    comps.hour = 0;
    comps.minute = 0;
    NSDate *day3 = [cal dateFromComponents:comps];

    unitFlags = NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
    NSDateComponents *hourComps = [cal components:unitFlags fromDate:session.start];

    day3 = [cal dateByAddingComponents:hourComps toDate:day3 options:0]; 
```

**给定上述日期的结果应该是 2012-09-02 08:00:00 +0000**

# php - 自定义wordpress插件不做任何事情

> ID：11892207
> 
> 赞同：0
> 
> 时间：2012-08-09T21:29:07.457
> 
> 标签：php, api, wordpress

我想编写一个简单的插件来调用我使用的网站的 API，并将链接/网址列表返回给我。

我正在尝试关注大量的“编写您自己的简单 wordpress 插件”链接，但没有做到正确。

这就是我所做的：1）在 plugins/myplugin.php 下创建了一个插件文件，如下所示：

```
function myplugin()
{
   // making api call via curl
   // return the result
   return $result;
} 
```

我已经在 wordpress 管理面板中激活了这个插件。

我想在我网站的特定页面上调用它。该页面是用php编写的。

我做的很简单`<?php $blah=myplugin(); echo "$blah"; ?>`

但它什么也没做。我错过了什么。

**编辑：0**

当我在尝试使用此功能的页面上执行“查看选择源”时，我得到：

```
<div class="post">
<!--?php $blah=myfunction(); echo "$blah"; ?-->
</div> 
```

这看起来正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:59:55.497

您确定 $result 包含任何信息吗？如果您在 myplugin() 中使用 echo 语句，它将在您的站点上打印。因为据我所知，你没有做错任何事。

此外，显然，请确保您从当前模板调用您的插件。

# javascript - JavaScript - innerHTML 改变比第一次出现更多的地方加上随机数组

> ID：11892210
> 
> 赞同：1
> 
> 时间：2012-08-09T21:29:34.617
> 
> 标签：javascript, html

我有两件莫名其妙的事情，

第一：我是否正在尝试使用 .innerHTML 进行更改，而不仅仅是第一次出现。
第二：是我试图用一个随机词替换.innerHTML。

我只能更改第一个单词，更不用说全部加上随机是完全失败的，任何帮助将不胜感激。

```
Hello <p id="p1">World!</p>
Hello <p id="p1">World!</p>
Hello <p id="p1">World!</p>

<script type="text/javascript">

document.getElementById("p1").innerHTML="newWorld()";

function newWorld() {
  var worlds = new Array ("Pluto!", "Mars!", "Saturn!", "Earth!", "Mercury!");

var whichWorld = Math.floor(Math.random()*worlds.length); 

worlds[whichWorld](); 
};

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:33:36.060

HTML 文档中的 ID 是唯一的。该函数`getElementById`只会返回 1 个元素，仅此而已。对于相似元素的组，你想给它们一个共同的`class`然后使用`getElementsByClassName`（注意复数 Elements vs Element） - 但是，这个函数不适用于 IE 8 或更早版本，所以如果你需要支持 IE，你会拥有做`getElementsByTagName`，然后只过滤那些有你想要的课程的人。

至于代码的第二部分，首先您将 innerHTML 设置为实际字符串`newWorld()`，而不是函数的返回值（没有，因为您当前没有从 inside 返回某些内容`newWorld`）-我认为您的意思是做`document.getElementById("p1").innerHTML = newWorld();`。其次，代码的随机部分是正确的，应该每次都选择一个随机的星球。然而，代码的结尾有点令人费解——你到底想在那里做什么？`worlds[whichWorld]`将是一个字符串（`Earth!`等）而不是一个可调用的函数。如果`worlds`是一个函数数组，那么代码就可以工作（假设你也返回了它，因为你打算将它设置为 innerHTML）

简而言之，这样的事情将是将`<span>`父元素中的所有元素设置为随机行星的“正确”方式：

```
<div id="planets">
    <p>Hello <span>World!</span></p>
    <p>Hello <span>World!</span></p>
    <p>Hello <span>World!</span></p>
</div> 
```

和 Javascript：

```
var spans = document.getElementById('planets').getElementsByTagName('span');
for(var i = 0; i < spans.length; i++) {
    spans[i].innerHTML = randomWorld();
}

function randomWorld() {
    var worlds = ["Pluto!", "Mars!", "Saturn!", "Earth!", "Mercury!"];
    var whichWorld = Math.floor(Math.random() * worlds.length);
    return worlds[whichWorld];
} 
```

[在这里，它正在发挥作用。](http://jsfiddle.net/vYjAm/2/)您显然是 Javascript 的新手，所以我鼓励您继续尝试并学习它的基础知识。然而，最终，您将希望研究 jQuery 等库，这些库可以消除编写跨浏览器 Javascript 的许多乏味。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:33:36.247

根据 HTML 标准 id 必须是唯一的，因此 getElementById 总是返回 1 个元素（通常是在 HTML 中找到的第一个元素。

你可以写：

```
Hello <p class="planet">World!</p>
Hello <p class="planet">World!</p>
Hello <p class="planet">World!</p>

<script type="text/javascript">
  var planets = document.getElementsByClassName("planet")
  for (var i=0; i < planets.length; i++) {
      planets[i].innerHTML = newWorld();
  }

  function newWorld() {
    var worlds = new Array ("Pluto!", "Mars!", "Saturn!", "Earth!", "Mercury!");
    var whichWorld = Math.floor(Math.random()*worlds.length); 
    return worlds[whichWorld]; 
  }
</script> 
```

我知道 jQuery 超出了问题的范围，但是使用诸如 jQuery 之类的库（并且不使用相同的 id），可以用一个语句更改多个元素的内容......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T21:37:58.837

使用为您提供一组元素的函数，例如`querySelectorAll`or`getElementsByTagName`或`getElementsByClassName`：

```
Hello <p class="world">World!</p>
Hello <p class="world">World!</p>
Hello <p class="world">World!</p>

<script type="text/javascript">
var newWorld = function () {
    var worlds = new Array ("Pluto!", "Mars!", "Saturn!", "Earth!", "Mercury!");
    var whichWorld = Math.floor(Math.random()*worlds.length); 

    return worlds[whichWorld]; 
};

var worlds = document.getElementsByClassName("world");

for (var i=0; i < worlds.length; i++) {
    worlds[i].innerHMTL = newWorld();
}

</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T21:49:08.913

HTML 中的 ID 应该是唯一的。因此，该`getElementById`方法仅返回具有给定 ID 的第一个元素。你的所有逻辑都是正确的，但你可以稍微简化你的答案。将 id 更改为类并使用如下`getElementsByClassName`方法：

```
Hello <span class="p1">World!</span>
Hello <span class="p1">World!</span>
Hello <span class="p1">World!</span>

<script type="text/javascript">
    var worlds = ["Pluto!", "Mars!", "Saturn!", "Earth!", "Mercury!"];

    var pTags = document.getElementsByClassName("p1");
    for (i = 0; i < pTags.length; i++)
    {
        pTags[i].innerHTML = worlds[Math.floor(Math.random() * worlds.length)];
    }
​&lt;/script> 
```

[**演示**](http://jsfiddle.net/Snowsickle/T8AQH/)

请注意，该`getElementsByClassName`方法在 IE8 或更早版本中不起作用。因此，如果您希望它向后兼容那些浏览器，您需要`getElementsByTagName`手动使用和过滤它们或使用 jQuery。

[**JAVASCRIPT 演示，适用于所有浏览器**](http://jsfiddle.net/Snowsickle/DUMcQ/1/)

[**查询演示**](http://jsfiddle.net/Snowsickle/JpBVd/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T22:04:33.687

要标记多个元素，您应该使用类属性。DOM 中的多个元素可以具有相同的**class**属性值，但**id**属性的值应该是唯一的。

所以这个例子可能看起来像：

```
<button id="change-world-btn">Change World</button>
<hr />
<h4>Elements with target class name:</h4>
Hello <span class="world-name">World!</span><br />
Hello <span class="world-name">World!</span><br />
Hello <span class="world-name">World!</span><br />
<hr />
<h4>Element with different class name:</h4>
Hello <span class="other-class">World!</span><br />

<script type="text/javascript">
    var worlds = new Array ("Pluto!", "Mars!", "Saturn!", "Earth!", "Mercury!");

    function newWorld() {
        return worlds[Math.floor(Math.random() * worlds.length)];
    }

    elements = document.getElementsByTagName('span');

    document.getElementById('change-world-btn').onclick = function() {
        world = newWorld();
        for(var i = 0, el; el = elements[i++];) {
            if(el.className == 'world-name') {
                el.innerHTML = world;
            }
        }
    };
​&lt;/script> 
```

[尝试一下。](http://jsfiddle.net/f0t0n/Ws7kr/)

您也可以使用 document.getElementsByClassName 函数来简化任务，但 IE < 9 不支持此函数。

# c# - 无法同步两个线程

> ID：11892214
> 
> 赞同：0
> 
> 时间：2012-08-09T21:29:52.993
> 
> 标签：c#, multithreading, mutex, semaphore

如果我做：

控制台应用程序1：

```
 bool mutexCreated;
    var mutex = new Mutex(true, "MemoryMappedFileMutex", out mutexCreated);

    Console.Write("Run Console App2 then press enter");
    Console.Read();

    // do work
    Thread.Sleep(5000);

    mutex.ReleaseMutex(); // makes console app 2 to stop waiting 
```

控制台应用程序2

```
 var mutex = Mutex.OpenExisting("MemoryMappedFileMutex");

    mutex.WaitOne();

    // continue executing once console app 1 releases mutex 
```

一切都很好。不过，我必须先启动 consoleApp1 才能使该算法起作用。

**现在我的问题是**我希望 consoleApp2 充当服务器。因此，我想先启动该应用程序。问题是，如果我这样做：

```
 bool mutexCreated;
    var mutex = new Mutex(true, "MemoryMappedFileMutex", out mutexCreated);

    mutex.WaitOne();  // <------ mutex will not wait why???? 
```

如果我这样做`mutex.WaitOne()`，该线程将不会等待。换句话说，我想首先启动 consoleApp2 并让该应用程序等到我在控制台应用程序 1 上以某种方式向互斥锁发出信号...。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:39:38.670

在您的服务器应用程序中，尝试使用 false 作为第一个参数调用构造函数，以便调用线程最初不会拥有互斥锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:39:38.670

等待来自拥有线程的 Mutex 不会阻塞，并且您将 true 指定为第一个 Mutex 构造函数 arg，这表明它已被当前线程所拥有。

# pdf - 动态 - 在 Adob e Acrobat X Pro 中扩展文本框？

> ID：11892221
> 
> 赞同：0
> 
> 时间：2012-08-09T21:30:36.083
> 
> 标签：pdf, adobe, acrobat, livecycle

我有一些表单需要添加扩展文本框。我已经选择了多行。是的，当字段已满并且您继续输入文本时，会出现滚动条。但是，当您打印时，它不会打印出全文。

我知道在 Adob​​e LiveCycle 中您可以制作动态表单，然后跳转到下一页。我已经这样做了，但是您在 LiveCycle 中失去了很多功能。要保持动态，您将失去在不使用表格的情况下定位对象的能力，因此进行设计和图形并不那么容易。

有没有人找到在 Adob​​e Acrobat X Pro 中执行此操作的方法？

在这一点上，我认为通过打印 CSS 样式表让人们相信 Web 表单更容易更新和设置样式会更容易。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:46:25.537

> 要保持动态，您将失去在不使用表格的情况下定位对象的能力，因此进行设计和图形并不那么容易。

那不是真的。表单是否动态与是否流动或定位内容无关。静态表单在服务器上渲染一次，动态表单可以在客户端重新渲染，因此能够反映布局更改，例如隐藏对象或更改对象高度（[更多信息](http://help.adobe.com/en_US/livecycle/8.2/static_dynamic_diffs.pdf)）。

使用任何一种表单类型，您都可以拥有定位和流动的内容。诀窍是根据要显示的数据结构将表单分成子表单（[教程](http://livedocs.adobe.com/livecycle/8.2/wb_designer/000103.html#1581109)）。

要让文本字段随文本量自动增长，请将其包含在包含流动内容的子表单中，允许多行并启用“扩展以适应”（或“自动适应”）。

# sql - PL/pgSQL 检查一行是否存在

> ID：11892233
> 
> 赞同：61
> 
> 时间：2012-08-09T21:31:13.570
> 
> 标签：sql, postgresql, plpgsql, postgresql-9.1, exists

我正在 PL/pgSQL 中编写一个函数，并且正在寻找检查行是否存在的最简单方法。
现在我正在 SELECTing an `integer`into a `boolean`，这并没有真正起作用。我对 PL/pgSQL 的经验还不够，还不知道最好的方法。

这是我的功能的一部分：

```
DECLARE person_exists boolean;
BEGIN

person_exists := FALSE;

SELECT "person_id" INTO person_exists
  FROM "people" p
WHERE p.person_id = my_person_id
LIMIT 1;

IF person_exists THEN
  -- Do something
END IF;

END; $$ LANGUAGE plpgsql; 
```

*更新*- 我现在正在做这样的事情：

```
DECLARE person_exists integer;
BEGIN

person_exists := 0;

SELECT count("person_id") INTO person_exists
  FROM "people" p
WHERE p.person_id = my_person_id
LIMIT 1;

IF person_exists < 1 THEN
  -- Do something
END IF; 
```

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-08-09T22:18:13.633

更简单、更短、*更快：* [**`EXISTS`**](https://www.postgresql.org/docs/current/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS) .

```
IF **EXISTS** (SELECT 1 FROM people p WHERE p.person_id = my_person_id) THEN
  -- do something
END IF; 
```

查询计划程序可以在找到的第一行处停止 - 而不是`count()`，它将扫描所有（匹配的）行。与大桌子不同。对于唯一列上的条件，差异很小：只有一行符合条件，并且有一个索引可以快速查找它。

^([通过评论中@a_horse_with_no_name](https://stackoverflow.com/questions/11892233/pl-pgsql-checking-if-a-row-exists-select-into-boolean/11892796#comment15828730_11892796)的输入进行了改进。)

您可以只使用一个空`SELECT`列表：

```
IF EXISTS (**SELECT FROM** people p WHERE p.person_id = my_person_id) THEN ... 
```

该`SELECT`列表对 的结果没有影响`EXISTS`。只有存在至少一个符合条件的行很重要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T21:40:12.710

使用计数（*）

```
declare 
   cnt integer;
begin
  SELECT count(*) INTO cnt
  FROM people
  WHERE person_id = my_person_id;

IF cnt > 0 THEN
  -- Do something
END IF; 
```

**编辑**（对于没有阅读该声明的反对者和其他可能正在做类似事情的人）

该解决方案之所以有效，是*因为*列上有一个 where 子句（并且该列的名称表明它是主键 - 所以 where 子句非常有效）

由于该`where`子句，不需要使用 LIMIT 或其他东西来测试由其主键标识的行的存在。这**是**测试这一点的有效方法。

# objective-c - 更改 UIImage 的大小

> ID：11892236
> 
> 赞同：0
> 
> 时间：2012-08-09T21:31:20.303
> 
> 标签：objective-c, ios, cocoa-touch, uiimage

所以我有这个功能：

```
- (UIImage*)imageByCombiningImage:(UIImage*)firstImage withImage:(UIImage*)secondImage {
    UIImage *image = nil;

    UIImageView *temp_img = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 400, 400)];
    temp_img.image = secondImage;
    secondImage = temp_img.image;

    CGSize newImageSize = CGSizeMake(MAX(firstImage.size.width, secondImage.size.width), MAX(firstImage.size.height, secondImage.size.height));
    if (UIGraphicsBeginImageContextWithOptions != NULL) {
        UIGraphicsBeginImageContextWithOptions(newImageSize, NO, [[UIScreen mainScreen] scale]);
    } else {
        UIGraphicsBeginImageContext(newImageSize); 
    }

    [firstImage drawAtPoint:CGPointMake(roundf((newImageSize.width-firstImage.size.width)/2), 
                                        roundf((newImageSize.height-firstImage.size.height)/2))]; 
    [secondImage drawAtPoint:CGPointMake(roundf((100)), 
                                         roundf((100)))]; 
    image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
} 
```

我正在尝试更改 secondImage UIImage 的大小，以便在它们合并时我可以调整大小以使其看起来不错。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:36:55.687

注意 UIGraphicsBeginImageContextWithOptions 中的“0”：

```
UIGraphicsBeginImageContextWithOptions(newSize, NO, 0);
CGContextRef context = UIGraphicsGetCurrentContext();

CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, newSize.height);
CGContextConcatCTM(context, flipVertical);
...
// make anySize the size you want and pt any point

CGContextDrawImage(context, (CGRect){ pt1, anySize1 }, [first CGImage]);
// make anySize the size you want and pt any point
CGContextDrawImage(context, (CGRect){ pt2, anySize2 }, [secondImage CGImage]);

UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return image; 
```

# asp.net - 类似 AD 身份验证的 Sharepoint 限制对特定网页的访问

> ID：11892238
> 
> 赞同：1
> 
> 时间：2012-08-09T21:31:25.443
> 
> 标签：asp.net, active-directory, asp.net-membership, asp.net-roles

我有几个在 WAMP 服务器上运行的 PHP 应用程序，出于管理原因，我的老板告诉我将它们迁移到 IIS 服务器和 ASP.NET 中，因此我们只需要管理一个用户数据库，在这种情况下是 Active Directory 用户组 (Windows Server 2008 R2)。
因此，我们将创建一个名为 Delete_Update_Stock_Toolcrib 的安全组，并且只有该组内的用户才能访问发生交易的网页（不需要超安全，因为我的用户是非常基本的用户）。
所以我的问题是，是否可以使用 .NET API 从 AD 用户那里获得自动身份验证？
就像 Sharepoint 一样，根据您所在的安全组，您可以访问您部门可用信息的某些部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:09:39.483

您可以使用内置的[ActiveDirectoryMembershipProvider](http://msdn.microsoft.com/fr-fr/library/system.web.security.activedirectorymembershipprovider.aspx)对用户进行身份验证。
那么，在 ASP.Net 中，更接近的概念`Users Group`是`Roles`. [codeproject 上](http://www.codeproject.com/Articles/28546/Active-Directory-Roles-Provider)有一个Active Directory 角色提供程序，它应该允许您将用户组映射到角色，但我从未尝试过。

[这里有一个关于这个主题的很棒的教程](http://www.4guysfromrolla.com/articles/120705-1.aspx)

# r - 在 R 中按范围合并 - 应用循环

> ID：11892241
> 
> 赞同：5
> 
> 时间：2012-08-09T21:31:34.147
> 
> 标签：r, loops, merge, genetics

我在这里发布了一个问题：[R 中的匹配范围合并](https://stackoverflow.com/questions/11851240/matched-range-merge-in-r)关于根据一个文件中的数字合并两个文件，该数字落入第二个文件的范围内。到目前为止，我一直未能成功拼凑代码来完成此任务。我遇到的问题是我使用的代码逐行比较文件。这是一个问题，因为 1.) 一个文件比另一个文件长得多，并且 2.) 我需要通过较长文件中的每个范围对扫描较短文件中的行 - 而不仅仅是同一行中的范围.

我一直在使用原始问题中发布的函数，我觉得应该有一种方法可以将它应用于更通用的循环，将第一个文件中的每一行与第二个文件中的每一行进行比较，但我没有t想通了。如果有人有任何建议，我将不胜感激。

**** 已编辑。

数据的性质是这样的：每个范围不一定是唯一的，尽管大多数是唯一的。它们的大小也不相同，有些完全属于其他范围。`findInterval`因此会产生错误，因为无法对范围进行排序以符合“非降序”顺序。

以下是每个数据帧的前 6 行：

```
file1test <- data.frame(SNP=c("rs2343", "rs211", "rs754", "rs854", "rs343", "rs626"), BP=c(860269, 369640, 861822, 367934, 706940, 717244))

file2 <- data.frame(Gene=c("E613", "E92", "E49", "E3543", "E11", "E233"), BP_start=c(367640, 621059, 721320, 860260, 861322, 879584), BP_end = c(368634, 622053, 722513, 879955, 879533, 894689)) 
```

因此，如您所见，第 5 行的范围在第 4 行的范围内，第一个文件中的两个 SNP 在第 4 行的范围内，但只有一个在第二行的范围内。

第一个包含 SNP 的文件只有约 400 行。但是，包含范围的第二个文件大约有 20K。我想作为输出生成一个数据框，其中包含来自第一个文件（SNP）的行，其中 BP 属于第二个文件中的 BP 范围。如果一个 SNP 属于两个范围，那么它会出现两次，等等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T04:09:21.760

我相信你要的是一个`conditional join`. 它们在 SQL 中很容易，并且该`sqldf`包使使用 SQL 在 R 中查询数据帧变得容易。

只需根据您希望如何处理不匹配的 SNP 来选择一个版本。

**内连接版本：**

```
> sqldf("select * from file1test f1 inner join file2 f2 
+       on (f1.BP > f2.BP_start and f1.BP<= f2.BP_end) ") 
```

输出：

```
 SNP     BP  Gene BP_start BP_end
1 rs2343 860269 E3543   860260 879955
2  rs754 861822 E3543   860260 879955
3  rs754 861822   E11   861322 879533
4  rs854 367934  E613   367640 368634
> 
```

**左连接版本：**

```
> sqldf("select * from file1test f1 left join file2 f2 
+       on (f1.BP > f2.BP_start and f1.BP<= f2.BP_end) ") 
```

输出：

```
 SNP     BP  Gene BP_start BP_end
1 rs2343 860269 E3543   860260 879955
2  rs211 369640  <NA>       NA     NA
3  rs754 861822 E3543   860260 879955
4  rs754 861822   E11   861322 879533
5  rs854 367934  E613   367640 368634
6  rs343 706940  <NA>       NA     NA
7  rs626 717244  <NA>       NA     NA
> 
```

`=`请注意，在 BP 与 BP_start 或 BP_end 完全匹配的情况下，如果重要的是 BP 将落入哪个组，您可能需要小心放置位置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T23:27:47.367

Bioconductor 中的[GenomicRanges](http://bioconductor.org/packages/2.10/bioc/html/GenomicRanges.html)包专为此类操作而设计。使用例如 read.delim 读取您的数据，以便

```
con <- textConnection("SNP     BP
rs064   12292
rs319   345367
rs285   700042")
snps <- read.delim(con, head=TRUE, sep="")

con <- textConnection("Gene    BP_start    BP_end
E613    345344      363401
E92     694501      705408
E49     362370      368340") ## missing trailing digit on BP_end??
genes <- read.delim(con, head=TRUE, sep="") 
```

然后从每个创建“IRanges”

```
library(IRanges)
isnps <- with(snps, IRanges(BP, width=1, names=SNP))
igenes <- with(genes, IRanges(BP_start, BP_end, names=Gene)) 
```

（注意坐标系，IRanges 期望 start 和 end 包含在范围内；另外，当 end = start - 1 时，end >= start 期望 0 宽度范围）。然后找到与基因（“主题”）重叠的 SNP（IRanges 术语中的“查询”）

```
olaps <- findOverlaps(isnps, igenes) 
```

两个 SNP 重叠

```
> queryHits(olaps)
[1] 2 3 
```

它们与第一个和第二个基因重叠

```
> subjectHits(olaps)
[1] 1 2 
```

如果一个查询与多个基因重叠，它会在 queryHits 中重复（反之亦然）。然后，您可以将数据框合并为

```
> cbind(snps[queryHits(olaps),], genes[subjectHits(olaps),])
    SNP     BP Gene BP_start BP_end
2 rs319 345367 E613   345344 363401
3 rs285 700042  E92   694501 705408 
```

通常基因和 SNP 具有染色体和链（'+'、'-' 或 '*' 表示该链不重要）信息，并且您希望在这些上下文中进行重叠；而不是创建“IRanges”实例，您将创建“GRanges”（基因组范围），随后的簿记将为您处理

```
library(GenomicRanges)
isnps <-
    with(snps, GRanges("chrA", IRanges(BP, width=1, names=SNP), "*")
igenes <-
    with(genes, GRanges("chrA", IRanges(BP_start, BP_end, names=Gene), "+")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-15T13:23:51.830

您可以使用*and*来按范围*合并*。只返回那些匹配的（内连接）：*`apply``which`*

 *```
do.call(rbind, apply(file1test, 1, function(x) {
  if(length(idx <- which(x["BP"] >= file2$BP_start & x["BP"] <= file2$BP_end)) > 0) {
    cbind(rbind(x), file2[idx,])
  }
}))
#      SNP     BP  Gene BP_start BP_end
#x  rs2343 860269 E3543   860260 879955
#1   rs754 861822 E3543   860260 879955
#2   rs754 861822   E11   861322 879533
#x1  rs854 367934  E613   367640 368634 
```

或全部来自 file1test（左连接）：

```
do.call(rbind, apply(file1test, 1, function(x) {
  if(length(idx <- which(x["BP"] >= file2$BP_start & x["BP"] <= file2$BP_end)) > 0) {
    cbind(rbind(x), file2[idx,])
  } else {
    cbind(rbind(x), file2[1,][NA,])
  }
}))
#      SNP     BP  Gene BP_start BP_end
#x  rs2343 860269 E3543   860260 879955
#x1  rs211 369640  <NA>       NA     NA
#1   rs754 861822 E3543   860260 879955
#2   rs754 861822   E11   861322 879533
#x2  rs854 367934  E613   367640 368634
#x3  rs343 706940  <NA>       NA     NA
#x4  rs626 717244  <NA>       NA     NA 
```*

# asp.net - 在 IIS Express 上使用 SignalR 和 ASP.NET MVC 3 启动时偶尔出现异常

> ID：11892243
> 
> 赞同：0
> 
> 时间：2012-08-09T21:31:47.190
> 
> 标签：asp.net, asp.net-mvc-3, signalr, signalr-hub

我正在为使用 ASP.NET MVC 3 和 SignalR 0.5.2 的服务器软件编写一个内部 Web 应用程序。我们偶尔会在启动时看到以下异常：

```
System.InvalidOperationException: This method cannot be called during the application's pre-start initialization stage.

Server stack trace: 
   at System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled()
   at System.Web.Compilation.BuildManager.GetReferencedAssemblies()
   at SignalR.Hosting.AspNet.Infrastructure.AspNetAssemblyLocator.GetAssemblies()
   at SignalR.Hubs.ReflectedHubDescriptorProvider.BuildHubsCache()
   at System.Lazy`1.CreateValue()

Exception rethrown at [0]: 
   at System.Lazy`1.get_Value()
   at SignalR.Hubs.ReflectedHubDescriptorProvider.TryGetHub(String hubName, HubDescriptor& descriptor)
   at SignalR.Hubs.DefaultHubManager.<>c__DisplayClass1.<GetHub>b__0(IHubDescriptorProvider p)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   at SignalR.Hubs.DefaultHubManager.GetHub(String hubName)
   at SignalR.Hubs.HubManagerExtensions.EnsureHub(IHubManager hubManager, String hubName)
   at SignalR.Hubs.HubDispatcher.GetSignals(ClientHubInfo hubInfo, String connectionId)
   at SignalR.Hubs.HubDispatcher.<>c__DisplayClass23.<CreateConnection>b__22(ClientHubInfo info)
   at System.Linq.Enumerable.<SelectManyIterator>d__14`2.MoveNext()
   at System.Linq.Enumerable.<ConcatIterator>d__71`1.MoveNext()
   at System.Collections.Generic.HashSet`1.UnionWith(IEnumerable`1 other)
   at System.Collections.Generic.HashSet`1..ctor(IEnumerable`1 collection, IEqualityComparer`1 comparer)
   at SignalR.Connection..ctor(IMessageBus messageBus, IJsonSerializer jsonSerializer, String baseSignal, String connectionId, IEnumerable`1 signals, IEnumerable`1 groups, ITraceManager traceManager)
   at SignalR.Hubs.HubDispatcher.CreateConnection(String connectionId, IEnumerable`1 groups, IRequest request)
   at SignalR.PersistentConnection.ProcessRequestAsync(HostContext context)
   at SignalR.Hubs.HubDispatcher.ProcessRequestAsync(HostContext context)
   at SignalR.Hosting.AspNet.AspNetHandler.ProcessRequestAsync(HttpContextBase context)
   at SignalR.Hosting.AspNet.HttpTaskAsyncHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

我怀疑发生这种情况是因为在我们重新启动 IIS Express 时打开了一个浏览器，并且它在映射集线器路由和初始化完成之间的确切时刻发出请求（通过 SignalR javascript）。我可能完全错了原因，不幸的是，我们无法可靠地重现这一点，这是我的第一个 ASP.NET 项目，所以我对可能发生的事情感到非常迷茫。

这是我们在 App_Start 文件夹中的 NinjectWebCommon.cs 文件：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(WebStatusClient.App_Start.NinjectWebCommon), "Start")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(WebStatusClient.App_Start.NinjectWebCommon), "Stop")]

namespace WebStatusClient.App_Start
{
    using System;
    using System.Web;

    using Microsoft.Web.Infrastructure.DynamicModuleHelper;

    using Ninject;
    using Ninject.Web.Common;
    using SignalR.Infrastructure;
    using SignalR.Ninject;
    using SignalR;
    using System.Web.Routing;

    public static class NinjectWebCommon 
    {
        private static readonly Bootstrapper bootstrapper = new Bootstrapper();

        public static StandardKernel Kernel { get; private set; }

        /// <summary>
        /// Starts the application
        /// </summary>
        public static void Start() 
        {
            DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
            DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
            bootstrapper.Initialize(CreateKernel);

            RouteTable.Routes.MapHubs();
        }

        /// <summary>
        /// Stops the application.
        /// </summary>
        public static void Stop()
        {
            bootstrapper.ShutDown();
        }

        /// <summary>
        /// Creates the kernel that will manage your application.
        /// </summary>
        /// <returns>The created kernel.</returns>
        private static IKernel CreateKernel()
        {
            Kernel = new StandardKernel();
            Kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            Kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

            RegisterServices(Kernel);
            return Kernel;
        }

        /// <summary>
        /// Load your modules or register your services here!
        /// </summary>
        /// <param name="kernel">The kernel.</param>
        private static void RegisterServices(IKernel kernel)
        {
            kernel.Bind<Impl.StatusForwarder>()
                .To<Impl.StatusForwarder>()
                .InSingletonScope();

            kernel.Bind<StatusInterfaceClient.IStatusNotificationTarget>()
                .ToMethod(context => context.Kernel.Get<Impl.StatusForwarder>());

            // Set the SignalR dependency injector.
            SignalR.GlobalHost.DependencyResolver = new SignalR.Ninject.NinjectDependencyResolver(kernel);

            // Force the creation of the status manager.
            Impl.StatusInterfaceManager.Initialize();
        }
    }
} 
```

有什么建议可以找出可能出了什么问题吗？我应该在初始化过程的后期映射集线器吗？

# c# - 将变量从一个文件传递到另一个 c#

> ID：11892244
> 
> 赞同：0
> 
> 时间：2012-08-09T21:31:56.113
> 
> 标签：c#

我有两个 .cs 文件（`Hex2Bin.cs`和`Program.cs`），我想将变量`end_addr`从`Program.cs``Hex2Bin.cs`

我在 Program.cs 中的代码：

```
class Program
{
    enum to_exit {
        exit_ok = 0,
        exit_invalid_args,
        exit_to_few_args,
        exit_invalid_input_file,
        exit_invalid_args_file,
        exit_permission_denied,
        exit_unexpected_eof
    };

    // class value holders
    static String args_file_name = "";
    static String in_u1_name = "";
    static String in_u22_name = "";
    static String out_name = "";
    static short end_addr = 0x0000;                 // 4-digit Hexadecimal end address
    static Byte[] version_code = { 0, 0, 0, 0 };    // 3 bytes version, 1 for extra info
} 
```

无论如何我可以做到这一点吗？我知道如何在 c 中做到这一点，但我对 c# 很陌生。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:39:20.447

`static`C# 在变量方面不像 C 那样工作。您可以通过将变量设为字段来使该变量在类`end_addr`外部可用。默认情况下，字段是.`Program``public``private`

```
public static end_addr = 0x0000; 
```

然后可以像这样访问它：

```
var x = Program.end_addr; 
```

但是，我建议您花更多时间熟悉 C# 习惯用法和约定。似乎您仍在从 C 的角度考虑 C#，并且它们非常不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:39:07.780

`end_addr`标记为`public`这样就足够了

```
public static short end_addr = 0x0000; 
```

然后你可以像这样从任何地方访问它

```
Program.end_addr 
```

尽管使用[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw%28v=vs.100%29.aspx)而不是字段来公开数据是一种更好的做法。

```
// Property
public static short end_addr { get; private set; }

// Constructor
public Program()
{
    // Initialize property value.
    end_addr = 0x0000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:40:19.643

如果您像这样声明变量：

```
public static short end_addr = 0x0000; 
```

然后从另一个类中，您可以像这样使用它：

```
Program.end_addr 
```

但不要这样做，不是面向对象的！

如果您的类 Hex2Bin 由 Program 类的 Main 方法使用/调用，您应该能够将变量作为您调用的方法的输入参数传递或将它们设置为您使用的类/对象的属性...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T21:40:24.180

鉴于您在 C 方面的背景，我认为您可能将运行时与编译时问题混为一谈。

但是，在 Hex2Bin.cs 中，您可以创建一个更新静态变量的静态方法。

```
class Hex2Bin 
{
    static short end_addr = 0x0000;
    static void updateEndAddr(short endAddr)
    {
        end_addr = endAddr;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T21:40:30.847

您说的是“文件”，但您真正想做的是将数据从程序的入口点 ( `Program.cs`) 传递给将处理数据的类（或静态类的方法）的对象，对吗？

如果是这样，这应该很简单。您要么必须修改 Program.cs 并像这样创建类的实例（来自 Hex2Bin.cs 的实例）

```
...
Hex2Bin hex2bin = new Hex2Bin( end_addr );
... 
```

我假设 Hex2Bin 如下：

```
public class Hex2Bin
{
    private short endAddress;
    public Hex2Bin( short endAddress )
    {
        this.endAddress = endAddress;
    }
} 
```

这将允许您使用`end_addr`from的值`Program.cs`

另一种方法是将它直接传递给将使用它的方法：

```
Hex2Bin.Method(end_addr); 
```

在 Hex2Bin 文件中：

```
public static void Method(short endAddress)
{
    //... do the work here
} 
```

# windows-phone-7 - 添加 UI 元素 WP7

> ID：11892245
> 
> 赞同：1
> 
> 时间：2012-08-09T21:32:01.023
> 
> 标签：windows-phone-7, user-interface

如何以编程方式将 N 个元素添加到 WP7 控件，使它们彼此位于下方（目前我将所有元素放在一个地方并且它们相互重叠）？

```
//this code N times
TextBlock block = new TextBlock();
block.Text = message.Body;
ContentPanel.Children.Add(block); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:37:19.553

创建一个 StackPanel 并将您的控件添加到其中。

[http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:24:02.567

这里的基本问题是你要添加的元素的 x 和 y 坐标都是一样的。因此，它们都集中在一个地方。由于网格布局不考虑这一点。

这个问题的答案是使用stackpanel或者单独定义uielement.margin；价值。边距基本上是一个厚度元素。我遇到了同样的问题，但后来利用更改元素的 x 和 y 坐标。我用了 uielement.margin.left=previousUiElement.margin.left+6; uielement.margin.top=previousUiElement.margin.top+36;

无论您的要求是什么，都可以更改 6。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:18:22.043

```
private Ellipse GenerateEllipse()
{
    Ellipse element = new Ellipse();
    element.Fill = new SolidColorBrush(Colors.White);
    element.Height = 8.0;
    element.Width = 8.0;
    this.ContentPanel.Children.Add(element);
    return element;
} 
```

之后如何在*for*循环中调用该方法。

希望这可以帮助。

# android - Android - 某些设备的应用程序未在 Market 中显示

> ID：11892246
> 
> 赞同：0
> 
> 时间：2012-08-09T21:32:01.893
> 
> 标签：android, android-manifest, google-play

我们已经在 StackOverflow 和其他论坛上搜索**了很多**类似的主题，但到目前为止还没有解决这个问题。

我们开发了市场上某些设备**缺少**的 Android 应用程序。它广泛使用地理数据和相机。**“复制保护”已经关闭**，我们无法弄清楚为什么它没有显示在某些看起来完全兼容的设备上。

*宣言如下：*

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.syncmobile.riogastronomia"
    android:versionCode="5"
    android:versionName="1.2.1" >

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.SET_ORIENTATION" />

    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 

    <uses-feature android:name="android.hardware.camera" android:required="true"/>
    <uses-feature android:glEsVersion="0x00020000" android:required="true" /> 

    <supports-screens
        android:xlargeScreens="false"
    />

    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name"  >

        <activity
            android:name=".Splash" android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
</manifest> 
```

### 到目前为止我们遇到问题的设备：

> **型号：** *Xperia x10* | **型号：** *X10i* | **安卓版本：** *2.3.3*

如果您想查看它是否显示在您的设备中，应用名称为：“ ***Rio Gastronomia*** ”

预先感谢大家的宝贵时间。=D

## 更新：

我在浏览器中打开了应用程序的直接 URL，我从市场上收到了这条消息：

> 您的内容过滤级别不允许您下载此项目。

应用成熟度级别设置为**low**。

所以......在从市场上得到这个错误后，我尝试切换我的过滤配置。它设置为*“所有人”*，当我将其设置为*“所有应用程序”*时，我终于可以在市场上看到该应用程序了。但是我无法更改用户设备中的设置，那么我应该怎么做才能让设置了*“所有人”*的人看到我们的应用程序？

（该应用设置为*“低成熟度”*，因为*“所有人”*选项已被 Google Play 禁用）

# mysql - 显示所有分组结果并排序

> ID：11892247
> 
> 赞同：2
> 
> 时间：2012-08-09T21:32:08.873
> 
> 标签：mysql, sorting, group-by, distinct

我有一张桌子，就像那个：

```
| B | 1 |
| C | 2 |
| B | 2 |
| A | 2 |
| C | 3 |
| A | 2 | 
```

我想取它，但已排序和分组。也就是说，我希望它按字母分组，但按组的最高总和排序。另外，我想显示组内的所有条目：

```
| C | 3 |
| C | 2 |
| A | 2 |
| A | 2 |
| B | 2 |
| B | 1 | 
```

顺序是这样的，因为 C 有 3 和 2。3+2=5，高于 A 的 2+2=4，而 A 又高于 B 的 2+1=3。

我需要显示所有“分组”字母，因为我需要显示其他所有不同的列。

**编辑：**

感谢您的快速回复。然而，我有胆量进一步询问。

我有这个查询：

```
SELECT * FROM `ip_log` WHERE `IP` IN
(SELECT `IP` FROM `ip_log` GROUP BY `IP` HAVING COUNT(DISTINCT `uid`) > 1)
GROUP BY `uid` ORDER BY `IP` 
```

上面描述中的字母是`ip`（我需要按 IP 地址分组），数字是`timestamp`（我需要按总和排序（或仅用作排序参数））。我应该创建一个临时表，然后使用下面的解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T21:36:31.220

```
select t.Letter, t.Value
from MyTable t
inner join (
    select Letter, sum(Value) as ValueSum
    from MyTable
    group by Letter
) ts on t.Letter = ts.Letter
order by ts.ValueSum desc, t.Letter, t.Value desc 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/d137a/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:42:13.590

如果您的表的列是`letter`and `number`，那么我将采取的方法如下：

```
SELECT
    letter,
    GROUP_CONCAT(number ORDER BY number DESC),
    SUM(number) AS total
FROM table
GROUP BY letter
ORDER BY total desc 
```

根据您的示例，您将获得以下内容：

```
| C | 3,2 | 5
| A | 2,2 | 4
| B | 2,1 | 3 
```

然后，您可以处理该数据以获得您想要/需要的实际信息。

如果您仍然想要原始请求格式的数据，则无法使用单个查询。原因是您无法根据未在同一查询中计算的聚合数据（`number`列的 SUM）进行排序。因此，您需要创建一个子查询来计算并将其反馈到原始查询中（免责声明：未经测试的查询）：

```
SELECT
    letter,
    number
FROM table
     JOIN (SELECT ltr, SUM(number) AS total FROM table GROUP BY letter) AS totals
          ON table.letter = totals.ltr
ORDER BY totals.total desc, letter desc, number desc 
```

# mercurial - mercurial rebase 可以删除分支吗？

> ID：11892248
> 
> 赞同：4
> 
> 时间：2012-08-09T21:32:08.640
> 
> 标签：mercurial, branch, rebase

这是 hg 会议的摘要：

```
> hg branch dev
marked working directory as branch dev
(branches are permanent and global, did you want a bookmark?)
> hg branch
dev
> hg ci -m 'test'
> hg update default
3 files updated, 0 files merged, 0 files removed, 0 files unresolved
> hg pull --rebase
pulling from ssh://hg@bitbucket.org/user/repo
searching for changes
adding changesets
adding manifests
adding file changes
added 3 changesets with 44 changes to 44 files (+1 heads)
saved backup bundle to C:\repo\.hg\strip-backup\edc5f75b39d1-backup.hg 
```

问题是，在这一切之后，没有任何“开发”分支的踪迹。我无法理解它。我在 dev 分支中提交了一个变更集，所以它必须被保存。怎么可能消失？可以rebase以某种方式删除它吗？

编辑：只是为了澄清“测试”提交在那里，但它在“默认”分支中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T22:13:18.863

终于可以重现了！

您的命名分支从默认分支上的*本地变更集分支出来。*

当您运行`pull --rebase`它时，它将拉取的变更集插入树中，然后将本地变更集从默认分支重新定位到拉取的默认变更集。

由于您的分支`dev`从该本地更改集分支出来，因此它也被重新设置。此外，由于您无法传递`--keepbranches`到`pull --rebase`，因此您会丢失分支名称。

为防止这种情况发生，请从`dev`公共变更集分支或使用`--keepbranches`.

# git - Git/SCM 工作流程：当 QA 发现问题时处理更改

> ID：11892261
> 
> 赞同：5
> 
> 时间：2012-08-09T21:33:20.013
> 
> 标签：git, version-control, workflow

我正在尝试将我们的组织从 SVN 切换到 Git。现在我们的工作流程基本上是这样的：

1.  开发人员进行更改，然后提交到 Beta 分支
2.  QA 发现错误，然后告诉开发人员修复它们
3.  GOTO 1\. 重复至少 5 次。（我们没有测试套件。另一个问题......）
4.  同行代码审查
5.  在 sprint 结束时，分支管理器将所有标记为就绪的代码合并到主分支中。

我认为 Git 可能对第 4 步和第 5 步有很大帮助。具体来说，当有 10 次提交时，同行代码审查真的很困难，中间可能有很多次提交*。我知道使用 Git 很容易恢复提交，可能会为每个功能/错误创建一个提交以进行审查。引导我提出我的问题：

**对于涉及来回冗长的 QA 的场景，最好的 Git 工作流程是什么？**

请记住，我在更改时遇到了一些阻力，因此工作流程越简单，就越有可能被采用。另请记住，这是一个 Web 开发项目，因此 QA 测试针对的是 Beta 服务器，而不是本地，因此 QA 切换分支并不是一个真正的选择。

*意思是，在此错误票的提交之间，可能有来自同一文件上的其他错误票的提交，这使得与之前的状态进行简单比较并隔离此票的代码更改变得困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T22:24:44.050

如果您列出了更具体的工作流程目标，您的问题会更容易回答。让我感到奇怪的是，您在同行代码审查*之前就参与了 QA，而*[最佳实践却给出了相反的建议](http://www.ibm.com/developerworks/rational/library/11-proven-practices-for-peer-review/index.html)。

但是，从您对恢复提交的引用来看，听起来您的主要目标之一是避免肮脏的历史，其中充满了标题为“哎呀，QA 刚刚指出我搞砸了最后一次提交，这个修复了它”之类的提交”。如果是这样，您应该熟悉 git 强大的历史重写功能 - 特别是通过`git rebase -i`. 这些可用于为每个新功能或错误修复生成一​​组干净、简洁的提交，从而使同行评审*和*所有未来的历史重读变得更加容易。我不会详细介绍如何做到这一点，因为它在[无数](https://stackoverflow.com/questions/2302736/trimming-git-checkins-squashing-git-history) [其他](http://www.reviewboard.org/docs/codebase/dev/git/clean-commits/) [地方](http://ao2.it/en/blog/2012/05/08/have-clean-history-git-rebase)都有介绍。

您还应该非常清楚何时可以安全地变基（通常仅在“私有”分支中）和不安全（“公共”）分支，以及违反该经验法则的影响。但是，在您描述的场景中，听起来 QA 不参与测试服务器使用的存储库的设置，在这种情况下它可能是安全的。

其次，您应该确保**每个功能或错误修复始终有一个分支**。这将大大减少您当前在同行评审和合并时面临的困难，因为每组逻辑相关的更改都将被完全隔离，而不是与*不相关*的更改混合在一起——后一种情况会混淆和破坏评审和 QA 流程。那里有一些[人喜欢](http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/)[的更复杂的 git 分支工作流](http://nvie.com/posts/a-successful-git-branching-model/)，但如果你担心吓跑你的同事远离迁移到 git，听起来你现在应该避免这些。即使是像[github 这样庞大而复杂的组织也更喜欢更简单的工作流程](http://scottchacon.com/2011/08/31/github-flow.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T22:41:04.147

每次我看到一篇关于 Git 工作流的帖子，我都会忍不住将它们推荐给 Vincent Driessen 的优秀*[文章 A successful Git branching model](http://nvie.com/posts/a-successful-git-branching-model/)*。我第一次读到这篇文章时，一个灯泡亮了，我意识到这种方法几乎可以成为任何项目的基础。

由于您的项目是 Web 开发项目，因此只需让您的 QA 服务器拉取`develop`分支（或者如果您有一个独立于 QA 的开发服务器，则从`qa`拉取自的分支`develop`）。您修改后的工作流程将是：

1.  开发人员对其`feature-X`或`bugfix-Y`分支进行更改并提交。
2.  开发人员将功能或错误修复合并`develop`到服务器中并推送到服务器。
3.  QA 发现错误，提交错误报告。
4.  GOTO 1\. 重复 X 次。
5.  同行评审可以自动审查涉及特定功能的更改并批准/修改/拒绝它，因为每个功能的合并提交都指定了该功能的所有更改。
6.  在 sprint 结束时，分支经理将所有代码合并`develop`到QA 以进行任何最终验证，或者如果不需要特殊的发布分支，则`release-candidate`直接合并到。`master`

如您所见，可以调整方法以满足您的特定需求。工作流程相对简单，尽管您的开发人员需要习惯在功能/错误修复分支中工作并在完成后合并的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T03:34:24.650

我把我的公司从 SVN 搬到了 Git，在这个过程中学到了很多关于 Git 的知识。自从那次搬迁以来，我已经看到我们的工作流程在大约 3 年的时间里不断发展和变化……基于此，也基于在我自己的个人共享项目中使用 Git：

nvie模型很棒。我将它用于我自己的项目，那里只有 2-3 个人并且喜欢它。**但是，除非每个**提交代码的人都是高级 Git 用户，否则我不会建议更大的团队使用它。它将很多责任放在人们从正确的地方切割分支，合并到正确的地方并且通常“做正确的事情”。实际上，在一个庞大的团队中，会有几个人不会理解 Git，记住一些命令，最终会影响整个计划。如果你现在对改变有抵抗力，这只会在它爆发时变得更糟（而且它会）。

根据您的描述（根据您当前或缺乏软件实践），Git 让您的生活更轻松的一种方法是将您的`Beta`分支与其他开发分支隔离开来。所以，你会：

*   `Beta`从主人那里剪下一个分支
*   做工作。Git 不会让您免于开发人员草率并推送未经测试/未经审查的代码。但是，这*将使*开发人员有机会在他们推送代码**之前**纠正他们所犯和注意到的任何错误（变基或修改提交）
*   假设您有一个`dev`分支......其他开发人员可以在那里推送开发代码
*   什么时候`Beta`好做，把它合并到`master`and`dev`中。
*   对于下一个版本，`Beta`从您的分支中剪切一个新`dev`分支并重复。

所以，你并没有放慢任何人的速度，因为人们总是可以提交`dev`. 您还有一个发布候选 ( `Beta`) 分支，它只修复错误。

Git 在这里也可以提供帮助，因为您不一定需要在进行代码审查之前推送您的代码。我们使用[审查委员会](http://www.reviewboard.org/)和工作方式，您在本地提交代码并发布审查。当您收到反馈时，您可以简单地更新您的代码`git commit --amend`并更新您的评论。完成后，我们推送*一个*提交而不是`n`.

从您的描述看来，单元测试和开发人员对质量代码的更多责任现在是一项更好的投资。Git 本身并不能解决您的问题，但它至少可以提供帮助。关于如何使用 Git 之类的 DVCS 设置开发过程，您将有更多*选择。*让我们面对现实吧……Git 比 Subversion 更有趣。:>)

# perl - 需要帮助在 Perl 中创建网络蜘蛛/机器人脚本

> ID：11892262
> 
> 赞同：1
> 
> 时间：2012-08-09T21:33:23.077
> 
> 标签：perl, scripting, web-crawler

我使用 Perl 作为这个作业的唯一语言

我的目标：

创建一个将创建网络蜘蛛/机器人的 Perl 脚本。我的脚本将从 Internet 下载一个网页，搜索并提取 Metatags，然后在 MySQL 数据库中对它们进行索引。

然后，我的数据库将可以通过 web 界面通过元标记字段或 URL 进行搜索。

我的脚本还将显示完整的数据库，包括一个列出数据库中记录数的特殊字段。

所以我的问题是：

我如何着手为将从 Internet 下载网页并提取 Metatags 的网络蜘蛛创建脚本？

我可以阅读哪些资源来帮助我创建这个或任何脚本？

感谢您的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T23:17:02.040

你的教授。假设您对 Perl 有一定的了解并会使用 CPAN 模块。如果您不了解 CPAN，请从[这里](http://www.perlhowto.com/what_is_cpan)开始。一旦您熟悉了如何从 CPAN 安装和使用模块，就可以安装家伙建议的模块之一，然后开始编写代码。

“我如何去创建一个脚本”太笼统了。如果您是 Perl 的新手，请尝试[不耐烦的 Perl或来自](http://www.perl.org/books/impatient-perl/)[Perl.org](http://www.perl.org/)或各种[教程站点](http://perl-tutorial.org)的任何其他资源。

# iphone - 寻找一种从嵌入网络浏览器的 iphone 录制视频并保存到服务器的方法

> ID：11892264
> 
> 赞同：0
> 
> 时间：2012-08-09T21:33:30.367
> 
> 标签：iphone, flash, webcam, red5

好的，所以我正在开发一个项目，该项目将允许用户在浏览器中录制自己并将视频保存到服务器以供以后观看。

现在我有一个实现，我将 Red5 服务器与 Red5 Recorder 一起使用，并且工作正常，但我想知道您如何在 iphone 上执行此操作，因为预计这将是一个庞大的用户群。

据我的研究表明，没有通用的方法可以在浏览器中收集此视频，因为没有 HTML5 解决方案，而 Flash 似乎是迄今为止将网络摄像头录制到服务器的最佳方式。

所以我想知道是否有人遇到过这个问题并找到了解决方案，无论是仅适用于 Iphone，还是适用于所有平台的通用解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:35:58.307

目前，在 iPhone 上实现这一点的唯一方法是编写本机应用程序。网络浏览器无法访问相机，也不支持 Flash、Java 等。

# c++ - 类互相使用？

> ID：11892267
> 
> 赞同：2
> 
> 时间：2012-08-09T21:33:38.873
> 
> 标签：c++, visual-studio-2010

我有 2 个包含 2 个类的头文件。每个类都依赖于其他类，如下所示：

```
// class1.h

#include "class2.h"

class ClassOne {
    ClassTwo* c2;
}; 
```

* * *

```
// class2.h

#include "class1.h"

class ClassTwo {
    ClassOne* c1;
}; 
```

我希望代码不会编译，所以我在其中一个标题中添加了前向声明：

```
// class1.h

#include "class2.h"

class ClassTwo;

class ClassOne {
    ClassTwo* c2;
}; 
```

但遗憾的是，这也不起作用。我不断收到“使用未定义类型'ClassTwo'”的编译器错误。

我知道我可以将它们组合到一个头文件中，它们会起作用，但实际上它们都是非常大的类，我真的希望它们有自己的头文件用于组织目的。

有没有办法解决这个问题？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T21:34:47.123

您添加了前向声明，但没有删除`include`. 这样做，你就是金子。

实际上，删除两个包含，并用前向声明替换它们。

```
// class1.h

class ClassTwo;

class ClassOne {
    ClassTwo* c2;
};

// class2.h

class ClassOne;

class ClassTwo {
    ClassOne* c1;
}; 
```

请注意，实际上需要循环依赖的情况很少而且相距甚远，因此至少要审查设计。

# android - Android：为什么我的线性布局在运行时切换时崩溃？

> ID：11892269
> 
> 赞同：0
> 
> 时间：2012-08-09T21:33:43.663
> 
> 标签：android, android-layout, nullpointerexception, android-linearlayout

当用户按下按钮时，我想切换到“详细信息”布局，如​​下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layoutDetails"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

        <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:textSize="16dp"
            android:textColor="#ff0000"
            android:text="Category" />      

        <TextView android:id="@+id/tv_category" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="16dp"
            android:layout_marginLeft="10dp" />

</LinearLayout> 
```

这就是我试图切换它的方式：

```
 switch(item.getItemId())
                {
                case ID_DETAILS:
                    // show new layout to for details                   
                    LinearLayout detailsLayout = (LinearLayout) findViewById(R.id.layoutDetails);
                    LayoutInflater detailsvi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    View detailsv = detailsvi.inflate(R.layout.activity_details, null);

// IT CRASHES ON THIS LINE
                    detailsLayout.addView(detailsv,new LinearLayout.LayoutParams(detailsLayout.getLayoutParams().width, detailsLayout.getLayoutParams().height));

                            return true;
} 
```

它给出了一个空指针异常错误！！！

```
08-09 17:23:47.146: E/AndroidRuntime(1572): FATAL EXCEPTION: main
08-09 17:23:47.146: E/AndroidRuntime(1572): java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:42:04.597

以下是您解决此问题的方法：

1）在崩溃线上设置断点并在调试模式下运行。您可以立即查看 detailsLayout 是否为空。如果不是，请执行第 2 步同时检查 detailsv 是否为空。

2) 细节对象o1 = etailsLayout.getLayoutParams(); // 检查这是否为空。

它必须是其中之一。

更新：因为它的 detailsLayout 实际上是空的。必须是

1) 在请求 detailsLayout 之前未调用 setContentView，或 2) setContentView 设置为未定义 detailsLayout 的布局，或 3) setContentView 已正确调用，但该布局文件中的 detailsLayout 未正确标识。

它必须是这三个之一。

# c# - 在c#二进制字符串中查找特定位值

> ID：11892272
> 
> 赞同：1
> 
> 时间：2012-08-09T21:33:50.620
> 
> 标签：c#, binary

是否有任何解决方案可以在二进制数的字符串表示中找到特定的二进制位值？例如，我有一个 64 位长度的二进制字符串：

```
0000000000000000000000000001000000000000000000100001001000000000 
```

我需要找到并返回第 28 位的值，从左边开始。在上面的示例中，它等于`1`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:36:37.480

```
int val = s[28 - 1] - '0';  /////// 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:37:31.883

好吧，*左边*`28`第 th 位的值是位 (64-28) 的值。*`2^36``64`*

 *因此，只需使用您的值制作一个二进制文件`&`，如果它已更改，则意味着`28`左侧的 th 是 a `0`，如果不是`1`

```
long value = ... 
//binary rapresentation value is (say) 

0000000000000000000000000001000000000000000000100001001000000000 
```

因此，如果

```
if(value & 2^36 != value) //binary AND 
    return 0; //28th was 0
else
    return 1; //28th was 1 
```

如果这不是您要的，请澄清。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T21:38:43.670

这里可能是语言障碍，但这听起来像是 indexOf 的好地方？如果您需要获取字符串的特定部分，我可以这样做：

```
//string array for example
foreach(string BinaryString in BinaryStrings[])
{
  string TwentyEightBitSub = BinaryString.SubString(28);
  if(TwentyEightBitSub.indexOf("00000010") != -1)
  {
    //do something with matched string 
  }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T21:39:37.717

如果您始终知道字符串将是 64 位（前导零从不存在），那么这将起作用：

```
private int getBit(string binString, int index) {
    if (binString == null)
        throw new ArgumentNullException("binString");
    if (binString.Length != 64)
        throw new ArgumentException("binString was not of length 64.", "binString");
    if (index < 0 || index > 63)
        throw new ArgumentException("index was not in [0,63]", "index");

    char theBit = binString[binString.Length - (1 + index)];
    if (theBit == '0')
        return 0;
    else if (theBit == '1')
        return 1;
    else
        throw new ArgumentException("The supplied string was not binary.", "binString");
} 
```*

# c# - 如何修改此数据库设计以适应这两个必需的要求？

> ID：11892276
> 
> 赞同：0
> 
> 时间：2012-08-09T21:34:10.257
> 
> 标签：c#, asp.net, database-design, sql-server-2008-r2

我是一名新的 ASP.NET 开发人员，在数据库设计方面拥有丰富的知识。我正在为我的公司开发一个基于 Intranet Web 的预订系统，现在我正在努力设计以下必需的两个要求和一个可选要求：

要求：

1.  事件可能有多个时间段。
2.  用户必须只能在这些时间段之一中注册。

可选要求：

1.  如果活动中没有可用座位，则用户必须列在等候名单下。

我的简单数据库设计是：

```
Users Table: UserID, Name, Department
Admins Table: UserID
Event Table: ID, Title, Description, Start_Date, End_Date, Start_Time, End_Time, Location,NumberOfSeats, isActive
BookingDetails Table: BookingID, EventID, UserID 
```

**那么我应该在我的数据库设计中添加什么以至少满足所需的要求？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T21:42:59.620

1.  一个事件可能有超过 1 个时隙。

事件时隙表：TimeSlotID、EventID、Date、StartTime、EndTime

BookingDetails 表：BookingID、EventID、UserID、TimeSlotID

1.  用户必须能够在每个事件中仅注册一个时间段。

在 BookingDetails（EventID、UserID）上创建唯一索引

# python - Heroku 上的 Gunicorn 'ImportError: No module named app.wsgiapp'

> ID：11892277
> 
> 赞同：14
> 
> 时间：2012-08-09T21:34:11.567
> 
> 标签：python, heroku, flask, wsgi, gunicorn

我无法使用简单的烧瓶应用程序在 heroku 上运行 gunicorn。
该应用程序非常简单。这是 app.py：

```
app = Flask(__name__)

@app.route("/")
def say_hello(url):
    return "Hello"

if __name__ == "__main__":
    port = int(os.environ.get('PORT', 8888))
    app.run(host='0.0.0.0',port=port) 
```

该应用程序通过 heroku 上的烧瓶测试服务器运行良好，但是当我切换到使用 gunicorn 时，它会崩溃：

```
ImportError: No module named app.wsgiapp 
```

我的要求.txt：

```
Flask==0.8
gevent==0.13.7
gunicorn==0.13.2 
```

我尝试了从 0.13.7 到 0.14.6 的不同版本的 gunicorn，但没有成功。

档案：

```
web: gunicorn app:app -w 4 -b 0.0.0.0:$PORT 
```

运行此命令：

```
heroku logs 
```

给出了这个：

```
←[33m2012-08-09T21:08:02+00:00 app[web.1]:←[0m ImportError: No module named app.
wsgiapp ←[33m2012-08-09T21:08:02+00:00 app[web.1]:←[0m     entry = __import__(self.modul
e_name, globals(),globals(), ['__name__']) 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-14T11:04:58.430

就我而言，我`gunicorn.py`在顶级文件夹中有一个文件时遇到了这个错误。这与 Heroku 上已安装的 gunicorn 库发生冲突。

所以我导致问题的运行命令是：

```
gunicorn -c gunicorn.py myapp:main 
```

引发以下错误：

```
Traceback (most recent call last):
  File "/app/.heroku/python/bin/gunicorn", line 9, in <module>
    load_entry_point('gunicorn==18.0', 'console_scripts', 'gunicorn')()
  File "/app/.heroku/python/lib/python2.7/site-packages/pkg_resources.py", line 378, in load_entry_point
    return get_distribution(dist).load_entry_point(group, name)
  File "/app/.heroku/python/lib/python2.7/site-packages/pkg_resources.py", line 2566, in load_entry_point
    return ep.load()
  File "/app/.heroku/python/lib/python2.7/site-packages/pkg_resources.py", line 2260, in load
    entry = __import__(self.module_name, globals(),globals(), ['__name__'])
ImportError: No module named app.wsgiapp 
```

而在`mv gunicorn.py gunicorn_config.py`它工作正常之后：

```
gunicorn -c gunicorn_config.py myapp:main 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-11T23:17:54.210

我在将 Ubuntu 升级到 14.04 LTS 时遇到了这个问题。

由于某种原因，`gunicorn`未能选择正确的 python 路径来解析 wsgi 模块。

我现在解决了这个问题，方法是`gunicorn`通过`--pythonpath`参数显式声明 python 路径（[在此处](http://docs.gunicorn.org/en/develop/configure.html#pythonpath)记录）。

例如：

```
gunicorn --pythonpath /path/to/containing/directory "app.wsgi_app:wsgi_app" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T21:01:57.083

我终于想通了这一点。

这基本上只是一个PATH问题。如果根据您的设置以错误的顺序导入某些模块（如**os**和**sys ），您将导致 Gunicorn 在****app.wsgiapp**模块的错误包中查找。**（不要与 Flask 中的app.wsgi_app**函数混淆）

正确的导入顺序将根据您的设置而有所不同，但基于我能够工作的经验法则是确保您的**sys模块在您的****os**模块之前导入。

除此之外，假设其余配置是正常的（如上所述），您应该没有任何问题。

注意：这只是 Gunicorn 在 Heroku 上的问题。这与他们的 PYTHONPATH 和模块搜索路径的设置方式有关。我不知道为什么，但这只是生产环境所必需的，无论模块导入顺序如何，本地设置都可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T21:01:37.627

我的猜测是 python 路径中还有另一个“应用程序”模块（gunicorn 和烧瓶都有一个名为 app 的模块）。将其重命名为 app.py 以外的任何其他名称，它应该可以工作。

# java - 将大对象拆分为多个较小的字节数组

> ID：11892281
> 
> 赞同：1
> 
> 时间：2012-08-09T21:34:50.380
> 
> 标签：java

我有一个巨大的 POJO (1G - 6G)，我想将其拆分为每个 100Kb 的多个字节数组。我的算法目前如下：

1.  将大对象序列化为大字节[] 即 1G 对象为 1G 字节[]
2.  将大字节 [] 拆分为更小的 100k 字节 []

但是，这会产生很大的内存压力，因为我现在有 1 个对象 + 1 个字节 [] + 大约 100k 字节 []

使用 FileInputStream 将一个大文件拆分为多个较小的字节数组相对容易，如下所示

```
File file = new File("asd");
FileInputStream fis = new FileInputStream(file);
BufferedInputStream bis = new BufferedInputStream(fis);
byte[] buffer = new byte[1024*1024*10];
int n = -1;
while((n = bis.read(buffer))!=-1) {
  bos.write(buffer,0,n):
} 
```

我怎样才能为常规 POJO 实现相同的目标？有没有办法可以迭代地将对象读入 100K 字节数组，而不是创建大字节数组并将其拆分？

# html - 在 div 中对齐 ul

> ID：11892283
> 
> 赞同：-1
> 
> 时间：2012-08-09T21:34:54.957
> 
> 标签：html, css, layout

有人可以帮我在 div 中对齐我的 ul，以便它在 div 的底部对齐。

```
<div id="metanav_top">
    <ul class="metanav">
      <li>Entry 1</li>
      <li>Entry 2</li>
      <li>Entry 3</li>
    </ul>
</div>​ 
```

请看看我的[小提琴](http://jsfiddle.net/y4zBT/)。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T21:37:42.990

您应该[了解 CSS 中的`position`属性](http://www.alistapart.com/articles/css-positioning-101/)。没有它，你不会走得太远。

```
#metanav_top {
    position: relative;
}

ul.metanav {
    position: absolute;
    bottom: 0; left: 0;
} 
```

[jsFiddle 演示](http://jsfiddle.net/y4zBT/6/)

# java - 将 JSP 转换为 JSTL

> ID：11892284
> 
> 赞同：0
> 
> 时间：2012-08-09T21:35:03.437
> 
> 标签：java, jsp, jstl

我是 JSP 的初学者，需要一些帮助。我从我的第一个 JSP 页面中的这段代码开始

```
<%
    LoginService user = new LoginService();
%>

Hello <%=user.getUserID() %>! 
```

并且工作得很好。我正确导入了 LoginService 类，并且那段代码有效！但现在我正在学习 JSTL 并尝试将上述内容转换为 JSTL 标签。所以我右脚下车，但需要一些帮助才能完成。到目前为止我有

```
<jsp:useBean id="user" class="org.test.LoginService"></jsp:useBean> 
```

但是我无法将最后一行 Hello 转换为 JSTL 标记！我不知道如何像在 JSP 标记中那样引用方法 getUserID()。我一个人走了这么远，但需要一些帮助才能完成！任何回应将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:48:20.563

您可以使用表达式语言：

```
<c:out value="Hello ${user.userId}!" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T21:52:49.367

您可以使用：

```
<jsp:getProperty name="user" property="userID" /> 
```

但更好用：

```
${user.userID} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T21:47:52.427

那将是：

```
Hello ${user.userID}! 
```

# java - Tomcat JVM 的大小是可变的？

> ID：11892286
> 
> 赞同：1
> 
> 时间：2012-08-09T21:35:08.263
> 
> 标签：java, tomcat, web-applications, jvm

我正在开发一个 java web 应用程序，并在 Tomcat 7 服务器上运行它。我通过调用来检查内存的大小：

```
System.out.println("Total memory is: " + Runtime.getRuntime().totalMemory()); 
```

我注意到大小正在发生变化，当我的数据大小变大时，它`Runtime.getRuntime().totalMemory()`也会变大。

1- JVM 是否试图大于应用程序数据的大小？

2- 除了 RAM 内存大小之外，JVM 大小是否有任何限制？

3-第三个问题与上述两个不太相关：正在运行的 Tomcat 7 服务器应用程序的大小是多少？实际上，我的服务器中有一个小 RAM（亚马逊云服务器，免费轮胎，600 MB RAM），而且我注意到 JAVA 在没有部署任何 Web 应用程序的情况下占用了大约 52% 的内存。

请原谅我的非常基本的问题，我不熟悉 Web 服务器和 Web 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:42:27.950

> 除了 RAM 内存大小之外，JVM 大小是否有任何限制？

是的，[你设置](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)的限制。

`-Xmx`对于最大堆大小和`-Xms`初始堆大小

JVM 虚拟运行。如果您分配的内存比机器上的可用内存多，它将被换出。

> 正在运行的 Tomcat 7 服务器应用程序的大小是多少？

你自己没有回答过这个问题吗？这是你记忆的 52%。一般来说，您可以[为您的 Tomcat 指定最大内存。和分钟。大小](http://wiki.razuna.com/display/ecp/Adjusting+Memory+Settings+for+Tomcat)也一样。毕竟它只是另一个JVM。

# asp.net-mvc-3 - 使用构造函数继承基本控制器

> ID：11892294
> 
> 赞同：1
> 
> 时间：2012-08-09T21:35:59.427
> 
> 标签：asp.net-mvc-3, ninject, ninject.web.mvc

我正在使用 ninject 注入我的存储库。我想继承一个我的基类，但我不能，因为它有一个构造函数。

基本控制器：

```
namespace Orcha.Web.Controllers
{
    public class BaseController : Controller
    {
        public IRepository<string> db;

        public BaseController(Repository<string> db){
            this.db = db;
            Debug.WriteLine("Repository True");
        }
    }
} 
```

具有继承的控制器： **错误“BaseController”不包含采用 0 个参数 HomeController.cs 的构造函数**

```
public class HomeController : BaseController
{

    public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";

        return View();
    }

    public ActionResult About()
    {
        return View();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:11:22.877

C# 要求，如果您的基类没有默认构造函数，则必须向派生类添加构造函数。例如

```
public class HomeController : BaseController
{
    public HomeController(IRepository<string> db) : base(db) { }

    public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";

        return View();
    }

    public ActionResult About()
    {
        return View();
    }
} 
```

如果您具有所需的绑定，则 Ninject 会提供依赖项：

```
Bind<IRepository<string>>().To<Repository<string>(); 
```

您的 BaseController 不应该采用具体的存储库，而是采用接口。

```
public class BaseController : Controller
{
    public IRepository<string> db;

    public BaseController(IRepository<string> db){
        this.db = db;
        Debug.WriteLine("Repository True");
    }
} 
```

# ruby-on-rails - 如何将我的助手包含到我的 gem 中并将它们加载到 rails 应用程序

> ID：11892296
> 
> 赞同：0
> 
> 时间：2012-08-09T21:36:01.230
> 
> 标签：ruby-on-rails, gem, helpers

我正在研究一个 gem 来进行一些测试，我已经从 lib 加载了方法并将它们用于我的应用程序，这里的问题是我试图调用：

**应用程序/帮助者/test_helper.rb**

```
module TestHelper
  def tags_inserted(person)
    content_tag(:p, "Hello #{person}!")
  end
end 
```

当我写：

```
= tags_inserted('myname') 
```

在我的代码中它只是说：

```
undefined method `tags_inserted' for #<#<Class:0x00000003efdc80>:0x00000003fce4c0> 
```

我进行了一些搜索，每个人都说 gems 中助手的标准是将它们放在**/lib**目录中，但是我的老板告诉我将它们放在**/app/helpers/**应该可以，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:16:21.253

上次我用 rails 2 做的。我已将帮助模块放在 lib 目录中，并在 init.rb 中添加了以下行，该行位于 gem/plugin 的根目录中：

```
ActionController::Base.helper TestHelper 
```

它使 TestHelper 模块方法可用于模板。以下是上述辅助方法的工作原理：[辅助方法](http://apidock.com/rails/AbstractController/Helpers/ClassMethods/helper)

# django - 在 Django 中自定义访问数据库

> ID：11892297
> 
> 赞同：1
> 
> 时间：2012-08-09T21:36:03.163
> 
> 标签：django, django-models

我正在使用 Django 1.4、python 2.7。我想在将数据插入数据库时​​对其进行加密，并在从数据库中读取数据时对其进行解密。我可以覆盖每个模型的 Save 方法来存储加密数据，但是当我想读取这些数据时，我不知道该怎么做。我必须处理管理站点模型和我的项目模型。我应该覆盖哪种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:25:19.423

和from [django-extensions](https://github.com/django-extensions/django-extensions/)似乎是您正在寻找的东西`EncryptedTextField`。`EncryptedCharField`

# c# - 如何从 C# Windows 窗体中运行命令行代码？

> ID：11892302
> 
> 赞同：1
> 
> 时间：2012-08-09T21:36:32.037
> 
> 标签：c#, winforms, command-line

我对编码相当陌生，但已经构建了一些小东西。我在上一个项目中发现的一件事是如何运行通常从控制台运行的 2 个简单命令，而不是从表单应用程序中运行。简单地说，表单有 2 个按钮，单击一个会导致`ipconfig`运行，另一个会导致运行`ipconfig /all`。然后它将来自命令的 ip 信息发布到我创建为消息框的另一个表单中。这很重要，因为我正在尝试做类似的事情，但现在没有任何效果。

我有一个表单，其中有一个用户名位置和一个密码位置。在提交时，我希望它基本上运行以下内容：

```
NET USE F: \\ALPHA\CLIENTAPPS /user:domain\%username% %password% /persistent:no
NET USE O: \\ALPHA\USERS /user:domain\%username% %password% /persistent:no
NET USE S: \\ALPHA\COMPANY /user:domain\%username% %password% /persistent:no 
```

`%username%`从表单和`%password%`域中捕获的位置和域将是我们的实际域。

使用与上述正在运行的 ipconfig 程序类似的方法，这就是我想出的。但是，当我单击提交按钮时，没有任何反应，没有错误，也没有实际创建网络共享：

```
private void btnSubmit_Click(object sender, EventArgs e)
{
    string un = txtUsername.Text;
    string pw = txtPassword.Text;

    System.Diagnostics.ProcessStartInfo PR = new System.Diagnostics.ProcessStartInfo("cmd", @" /c net use W: \\\\ALPHA\\CLIENTAPPS /user:acsdish\\" + un + " " + pw + "/persistent:no");
    PR.RedirectStandardOutput = true;
    PR.UseShellExecute = false;
    PR.CreateNoWindow = true;
    System.Diagnostics.Process StartPR = new System.Diagnostics.Process();
    StartPR.StartInfo = PR;
    StartPR.Start();
} 
```

我在这里错过了什么，还是有更好的方法？谢谢。

麦克风

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T21:47:20.853

```
System.Diagnostics.ProcessStartInfo PR = new System.Diagnostics.ProcessStartInfo("cmd", @" /c net use W: \\\\ALPHA\\CLIENTAPPS /user:acsdish\\" + un + " " + pw + "/persistent:no"); 
```

尝试删除“@”或删除“\”字符的转义

[此处的信息](http://msdn.microsoft.com/en-us/library/362314fe.aspx)（逐字字符串文字）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T22:16:32.040

> 没有任何反应，没有错误，也没有实际创建网络共享

你已经做了很多来确保这一点。“没有错误”很容易解释，您不会*检查*错误，也不会让用户*看到*它们，因为您确保控制台窗口不可见。如果命令失败，它将不可见。检查 Process.ExitCode 是最低要求。

下一个缺陷是您为特定用户创建到共享的映射。这很好，驱动器映射是每个用户的设置。但是您实际上并未以该用户身份登录，因此您*看不到*这些映射。您必须按 Ctrl+Alt+Del 并切换用户帐户。但这是一个失败的原因，因为您通过了 /persistent:no。这意味着“在用户登录时持续存在”。

Ultimate flaw is that you leave it up to an another process to take care of it. That always loses critical information, especially errors. You should pinvoke the Windows api function that does this so you *know* when it doesn't work and don't burn a gazillion cycles to run another process. Pinvoke WNetAddConnection2().

# java - @ManyToMany JPA 2 复杂查询

> ID：11892305
> 
> 赞同：3
> 
> 时间：2012-08-09T21:36:41.337
> 
> 标签：java, hibernate, jpa, jpa-2.0, spring-data-jpa

我有以下多对多映射。

```
@Entity
public class Class1 {
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;

@ManyToMany(fetch = FetchType.LAZY)
@JoinTable(name = "class1_class2", joinColumns = @JoinColumn(name = "class1Id"),  inverseJoinColumns = @JoinColumn(name = "class2Id"))
private List<Class2> class2;
}

@Entity
public class Class2 {

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;
} 
```

我想检索与 Classe2 实体有关系的所有 Class1 实体，其中 class2Id = 1 和 class2Id =2 和 class2Id =3。{1,2,3}

或者过滤 Class2 列表中的 Classe1 实体，Class2 实体的值：class2Id = 1 和 class2Id =2 和 class2Id =3

例如：

如果在连接表上，我有以下值。

```
class1Id   class2Id
   1          1
   1          2
   1          3
   1          4
   6          1
   6          2
   6          3
   4          1
   5          2 
```

对于此示例，结果将是 Class1 与 class1Id: 1 和 6。因为 Class1 实体与 class1Id=1 有关系与 classe2Id:1,2,3,4 和 Class1 实体与 class1Id=2 有关系与 classe2Id:1 ,2,3

是否可以使用 JPA2（谓词）返回正确的实体？

有没有更好的映射来处理这种情况？

目前，我想出了以下 SQL 查询：

```
select v1.class1Id from class1_class2 v1
inner join class1_class2 v2 on v1.class1Id=v2.class1Id
inner join class1_class2 v3 on v2.class1Id=v3.class1Id
where v1.classe2Id=1 and v2.classe2Id=2 and v3.classe2Id=3; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T18:27:38.193

这是可以提供帮助的查询：

```
select c1 
from Class1 c1 
join c1.class2 c2 
where c2.id in (1,2,3)
group by c1
having count(c1)=3 ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T11:59:49.843

首先，在您的*Class2*类中，您需要添加以下内容：

```
@ManyToMany(fetch = FetchType.LAZY, mappedBy="class2")
private List<Class1> class1; 
```

在此之后，您的任务应该使用此查询完成：

```
select c1 from Class1 c1 join c1.class2 c2 where c2.id in ?1 group by c1 
```

其中 ?1 - 类型的对象`List<Long>`，包含 id `{1,2,3}`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T23:21:35.857

仍然有一些部分在问题上不是很清楚，因为我在连接表值中没有看到 class1Id=2，或者 class1Id=6 只有 class2Id=1。但无论如何，我会给你类似的谓词映射示例，以便你可以根据需要进行修改。我用过[StaticMetaModels](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/metamodel.html)。您可以将它们移动到实体类的同一个包中。我无法测试当然，但我相信可以成为一个很好的路线图。

**JPA 2.0 查询：**

```
 CriteriaBuilder criteriaBuilder = getEm().getCriteriaBuilder();

     CriteriaQuery<Class1> criteriaQuery = criteriaBuilder.createQuery(Class1.class);

     Root<Class1> fromClass1 = criteriaQuery.from(Class1.class);

     List<Predicate> conditions = new ArrayList<Predicate>();

     Subquery<Class2> qry = criteriaQuery.subquery(Class2.class);                     

     Root<Class2> fromClass2 = qry.from(Class2.class);

     qry.select(fromClass2);

     qry.where(criteriaBuilder.equal(fromClass2.get(Class2_.getId()), idParamGoesHere));

     conditions.add(criteriaBuilder.in(.get(Class1_.getClass2()).value(qry));

     criteriaQuery.where(conditions.toArray(new Predicate[0]));

     TypedQuery<Class1> query = getEm().createQuery(criteriaQuery);

     List<Class1> results = query.getResultList(); 
```

**StaticMetaModel Class1：（**这种情况下不需要，但我已添加）

```
@StaticMetamodel(Class1.class)
public class Class1_ {

    private static volatile SingularAttribute<Class1, Long> id;
    private static volatile SingularAttribute<Class1, Class2> class2;

public static SingularAttribute<Class1, Long> getId() {
        return id;
    }
    public static void setId(SingularAttribute<Class1, Long> id) {
        Class1_.id = id;
    }
    public static SingularAttribute<Class1, Class2> getClass2() {
        return class2;
    }
    public static void setClass2(SingularAttribute<Class1, Class2> class2) {
        Class1_.class2 = class2;
    }
} 
```

**静态元模型类 2：**

```
@StaticMetamodel(Class2.class)
public class Class2_ {

    private static volatile SingularAttribute<Class2, Long> id;

public static SingularAttribute<Class2, Long> getId() {
        return id;
    }
    public static void setId(SingularAttribute<Class2, Long> id) {
        Class2_.id = id;
    }
} 
```

# c# - C#代码的实现标准？它存在吗？

> ID：11892307
> 
> 赞同：0
> 
> 时间：2012-08-09T21:36:48.297
> 
> 标签：c#, class, standards

我最近的任务是将我公司的 4 名独立开发人员召集到一个有凝聚力的团队中，作为一个团队生成相似（和良好）的代码。

我们正在实施 iDesigns C#[编码标准](http://www.sourceformat.com/pdf/cs-coding-standard-idesign.pdf)的使用，这将有助于我们的代码看起来相似，并且确实提供了一些实施指南，但是是否有一个通用标准、经验法则（前 10 名）来说明如何构建代码、什么每堂课都应该“有”还是“做”？

我阅读[了 John Connelly 撰写的](http://www.codehustle.com/2011/06/implementation-practices-10-things-you-should-do-to-every-c-class-that-you-write.html)关于实施实践的这篇文章，但在找到更多关于该主题的参考资料时运气不佳。

c# 类/项目是否有实施“标准”？或者它是一个如此广泛的主题以至于无法定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:51:29.713

## [风格警察](http://stylecop.codeplex.com/)

尽管它本身不是标准，但我强烈建议您考虑使用[`StyleCop`](http://stylecop.codeplex.com/). 它是一个高度可定制的 Visual Studio 插件，可让您轻松实施编码标准。此外，它可以集成到您的巡航控制服务器构建中，因此如果不遵守任何这些标准，它会破坏构建。

一个非常有用的小工具，起初我讨厌它，但现在我喜欢它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T21:45:09.413

我最喜爱的：

*   [http://csharpguidelines.codeplex.com/releases/view/46280](http://csharpguidelines.codeplex.com/releases/view/46280)
*   Microsoft[开发类库的设计指南](http://msdn.microsoft.com/en-us/library/ms229042.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:42:16.640

唯一的 C# 标准 C# 是[“标准 ECMA-334 C# 语言规范](http://www.ecma-international.org/publications/standards/Ecma-334.htm)”。除此之外的任何事情都取决于开发人员在编写程序时按照他们的意愿去做。

现在有一些很好的经验法则可以遵循（比如你提到的两个），但它们只是经验法则。只要整个团队彼此***一致，您就可以做任何您想做的“标准”。***

# apache - 强制 HTTPS 并剥离 WWW 而不会收到 Cert 错误

> ID：11892312
> 
> 赞同：2
> 
> 时间：2012-08-09T21:36:58.060
> 
> 标签：apache, .htaccess, mod-rewrite, ssl, https

我正在一个仅拥有 domain.com 的 SSL 证书的网站上工作。我正在尝试删除 www。并重定向到 domain.com。这我工作得很好。

我还想在所有页面上强制使用 HTTPS，如果 www. 没有打字。

当[https://www.domain.com](https://www.domain.com)访问 URL 时会出现错误。

我可以看到它重写为[https://domain.com](https://domain.com)但我收到一个证书错误，我必须接受或拒绝。

有没有办法在不购买另一个证书的情况下解决这个问题？

这是我尝试过的许多规则组合中的两个（其中许多来自其他 SO 答案）。

1.

```
RewriteCond %{HTTP_HOST} ^(www\.)(.+) [OR]
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^(www\.)?(.+)
RewriteRule ^ https://%2%{REQUEST_URI} [R=301,L] 
```

2.

```
RewriteCond %{HTTPS} =on
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ https://%1%{REQUEST_URI} [R=301,L]

RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]

RewriteCond %{SERVER_PORT} !^443
RewriteRule ^ https://domain.com%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:45:19.603

我不认为有办法解决这个问题。证书错误来自 SSL (TLS) 连接，该连接发生在发出任何 HTTP 请求之前。

如果用户访问[http://www.domain.com/](http://www.domain.com/)或只是[http://domain.com/](http://domain.com/)您可以重定向到[https://domain.com/](https://domain.com/)就好了。如果用户访问[https://www.domain.com/](https://www.domain.com/)，他们会在收到重定向之前收到证书错误。

我认为你的选择是：

1.  将 www.domain.com 指向禁用了 HTTPS 的服务器。[用户在点击https://www.domain.com/](https://www.domain.com/)时会收到连接错误，这可能比证书错误更可取
2.  为 www.domain.com 或 *.domain.com 购买证书

# ruby - 使用 ActiveRecord 时是否应始终检查“保存”的返回值？

> ID：11892314
> 
> 赞同：0
> 
> 时间：2012-08-09T21:37:12.070
> 
> 标签：ruby, activerecord, coding-style

一般来说，`save`使用ActiveRecord时是否应该检查always的返回值？

例如，我遇到了一些这样的代码：

```
def foo(active_record_instance)
  active_record_instance.field_1 = 'a'
  active_record_instance.field_2 = 'b'
  # ...15 more lines...
  active_record_instance.save # <==
  baz = bar(active_record_instance.id)
  # ...15 more lines that use baz...
  baz
end

def bar(id)
  instance = ActiveRecordSubclass.find(id)
  instance.field_3 = instance.field_1 + instance.field_2
  instance
end 
```

这有点做作，但对于我正在处理的代码库来说，这是一个相当现实的例子。（这不是这种模式的孤立案例。）

鉴于对的验证`ActiveRecordSubclass`在不断变化，并且在不久的将来（甚至一年后）可能会发生变化，我的想法是`active_record_instance.save`应该检查的返回值。另一种选择是使用`active_record_instance.save!`.

检查记录是否保存是否合适？或者`foo`考虑到当前的验证没有失败，该方法是否对某些不应该关注的事情进行微观管理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:53:44.743

也许你可以使用保存！方法，捕获异常并将您的逻辑放入 .

```
begin
  foo.save!
rescue ActiveRecord::RecordInvalid
  # handle logic here
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:49:16.413

真正的答案是，‘你关心有问题的数据吗？

如果您关心数据，那么是的，您应该返回错误或抛出异常，并以某种方式传达验证失败的原因。

如果您真的不在乎它是否保存，并且它将在 10 秒内尝试，此时您希望它可以工作，则忽略该错误。

作为个人喜好和经验，我宁愿让某些东西快速而剧烈地失败，也不愿花费数小时或数天来寻找错误，因为 50 步之前的东西实际上并没有保存。

# c#-4.0 - 继续取消任务

> ID：11892315
> 
> 赞同：11
> 
> 时间：2012-08-09T21:37:15.267
> 
> 标签：c#-4.0, asynchronous, task

我已经定义了以下任务

```
var t = Task.Factory.StartNew(
    () => LongRunningMethod( cancellationToken ),
    cancellationToken
);

t.ContinueWith(
    Callback,
    cancellationToken,
    TaskContinuationOptions.None,
    TaskScheduler.FromCurrentSynchronizationContext()
); 
```

在 内部`LongRunningMethod`，我检查取消令牌是否有取消请求，如果是，我从方法返回。这么多工作正常。

但是，在这种情况下不会调用回调。*如果*我将上面的第二行替换为

```
t.ContinueWith(
    x => Callback( x, cancellationToken ),
    TaskScheduler.FromCurrentSynchronizationContext()
); 
```

在这种情况下，任务仍然认为它运行完成。

为什么第一个电话不起作用？我的印象`TaskContinuationOptions.None`是，无论线程的状态如何，都会调用回调。

我通过调用取消任务：

```
_cancellationTokenSource.Cancel(); 
```

在一些相关的说明中，必须传递取消令牌似乎是任务库的主要设计缺陷。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-09T21:38:48.730

您的继续任务需要一个您取消的 CancellationToken。这意味着未启动的延续任务正在被取消。不要将该令牌传递给您不想取消的事物。

CancellationToken 旨在一次取消整个动作图。您可以通过不传递令牌来排除取消内容。

# jquery - Jquery 显示和隐藏而不是切换

> ID：11892318
> 
> 赞同：2
> 
> 时间：2012-08-09T21:37:21.330
> 
> 标签：jquery

好吧，你会看到我是设计师而不是程序员，所以不要对我强硬。我有一个效果很好的切换开关，但我无法启动简单的显示和隐藏脚本。我比较松……问题是带有切换功能的 H4 独立运行良好。但我还需要通过按两个按钮来显示全部并隐藏全部。

**切换效果**

```
$(function() {
    $('.toggle-item').each(function(ix, el) {

        $(this).addClass('inactive');
        var contentDiv = $('.toggle-content', $(el));
        $(this).attr('data-height', contentDiv.outerHeight());
        contentDiv.css('overflow', 'hidden');
        contentDiv.height(0);
    });

    $(".toggle-item h4").click(function(){
        var $parent = $(this).parent('.toggle-item');
        if($parent.length) {
            if( $parent.hasClass('inactive') ) {
                $parent.removeClass('inactive');
                $('.toggle-content', $parent).height(           $parent.attr('data-height'));
            } else {
                $parent.addClass('inactive');
                $('.toggle-content', $parent).height( 0 );
            }
        }
    });
}); 
```

**HTML 代码：**

```
<div class="toggle-item">
    <h4>SOME TEXT AS HEADLINE</h4>
    <div class="toggle-content">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras accumsan, turpis facilisis ultricies consequat, tellus ligula sagittis libero, porttitor venenatis urna dui non quam. Fusce aliquam, libero sed eleifend pellentesque, ligula dolor porta neque, et egestas diam mauris id odio.</p>
    </div>
</div> 
```

**按钮**

```
<button id="show">Show All</button> 
<button id="hide">Hide All</button> 
```

**意图**

```
$(document).ready(function(){
  $("#show").click( function() {
       $('.toggle-content').show();
  });
  $("#hide").click(function(){
       $('.toggle-content').hide();
  });
}); 
```

[在这里](http://yosoy.mitiendy.com/posts/cosmetica-facial?test=1)您可以找到正在运行的示例。

欢迎任何提示！TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:39:31.093

我认为您需要这个，只需尝试将您的脚本更新为如下：

```
 $("#show").click( function() {
       $('.toggle-content').each(function(){
         // you need this because height goes to 0pt
         $(this).height('auto');
         $(this).show();
       });
  });
  $("#hide").click(function(){
       $('.toggle-content').each(function(){
         $(this).hide();
       });
  }); 
```

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:18:26.400

好吧，通过来自 Tiendy.com 的 Manuel Cebrian 先生的诀窍：

```
$(document).ready(function(){

  $("#show").click( function() {
       $('.toggle-item').each(function(i) {             
            $(this).removeClass('inactive');
            $('.toggle-content', this).height( $(this).attr('data-height'));
       });
  });

  $("#hide").click(function(){
       $('.toggle-item').each(function(i) {
            $(this).addClass('inactive');
            $('.toggle-content', this).height( 0 );
       });
  });

}); 
```

这将打开和关闭所有，一些打开的也会关闭。非常感谢 Cebrian 先生，希望这能帮助更多人。谢谢大家。

# ssis - 在平面文件 SSIS 中处理多个批次

> ID：11892324
> 
> 赞同：0
> 
> 时间：2012-08-09T21:37:34.193
> 
> 标签：ssis

我有一个包含多个批次的平面文件。

我想将文件读入数据库表，但要保留对每行所属批处理的一些引用。

我的想法是将每行所属批次的标题行中的日期/时间戳附加到每个详细信息行。

我所做的是将文件读入内存记录集中，然后使用 foreach 循环容器检查和处理每一行。

我被困在以下问题上：1.检查每一行，确定它是否是标题 2.将批处理标题信息附加到每一行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:40:26.553

我 在 MSDN 上发现[这个示例脚本运行良好。](http://msdn.microsoft.com/en-US/library/ms345160%28v=sql.100%29#Y3223)如果您在 C# 中编码，请在函数之外初始化您的计数器变量，否则每次调用该函数时它将继续重新初始化。

# autologin - 在 gumtix 上自动启动

> ID：11892327
> 
> 赞同：0
> 
> 时间：2012-08-09T21:37:44.737
> 
> 标签：autologin, gumstix

我正在尝试让我的 gumstix 计算机自动登录，以便我可以运行一个重新启动它的程序以及文件上的 scps。我的问题是我尝试按照此处的说明进行操作：[Autologin](http://wiki.gumstix.org/index.php?title=AutoLogin) 但是当我尝试编译它时，我收到此错误：'memset' 未在此范围内声明有没有人想出如何解决这个问题或者是否有更简单的方法来处理这个问题

-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:05:36.797

Your login program is exiting instead of spawning a successful login process.

# jakarta-ee - httpservletrequest.getservletcontext.getrealpath 内容在亚马逊 ec2 重启后丢失

> ID：11892330
> 
> 赞同：0
> 
> 时间：2012-08-09T21:37:55.017
> 
> 标签：jakarta-ee, amazon-ec2, tomcat7

我在亚马逊实例上运行了 tomcat 7。

我正在使用该类保存一些文件

```
@POST
public BooleanResponse foo(@Context HttpServletRequest req,
        FormDataMultiPart data) {
  String fileString = req.getservletcontext().getrealpath("/images");                   
  File filePath = new File(fileString + File.separator + filename);
  saveImage(inputStream, filePath); 
```

这很好用！

问题是每次我重新启动我的亚马逊实例时，我所有的图像文件都会丢失:(

知道我做错了什么吗？

谢谢

# asp.net-mvc-3 - 性能瓶颈 Url.Action - 我可以解决它吗？

> ID：11892335
> 
> 赞同：7
> 
> 时间：2012-08-09T21:38:17.210
> 
> 标签：asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-routing, asp.net-4.0, asp.net-3.5

我有一个最近从 ASP.NET MVC1 升级到 ASP.NET MVC4 rc1 的应用程序。

它使用 Webforms 视图引擎。

每当使用 Url.Action(action,controller) 时，它都会出现性能问题。

我可以在 ASP.NET MVC3 中重现该问题。

我需要 3 毫秒来呈现在 ASP.NET MVC1 中包含 10 个 Url.Action 帮助器实例的视图，并且需要 40 毫秒来在 ASP.NET MVC3 中呈现相同的视图。

我已经找到了一些让它渲染得更快的方法：

*   我将默认路由移到顶部

*   我删除了 Url.Action 并使用了静态链接

这感觉不对：应用程序非常大，我需要其中的体面工作路由的优点。我也不相信我发现了所有的性能瓶颈。路由是 MVC 的核心部分：如果有什么表现不好，它会在应用程序的不同部分弹出。

我的印象是 MVC3 引入了一些路由功能（如正则表达式约束），即使我不使用它们也会导致应用程序性能不佳。

有什么我可以做的，比如打开路由功能或使用一组不同的 URL 助手？

此代码重现了该问题：

索引操作

```
public ActionResult Index()
        {

            return View();
        } 
```

索引.aspx

```
<%@ Page Language="C#"  Inherits="System.Web.Mvc.ViewPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head >
    <title></title>
    <link href="../../Content/Site.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div class="page">
<%= Url.Action("Action1", "Controller1") %>
<%= Url.Action("Action2", "Controller2") %>
<%= Url.Action("Action3", "Controller3") %>
<%= Url.Action("Action4", "Controller4") %>
<%= Url.Action("Action5", "Controller5") %>
<%= Url.Action("Action6", "Controller6") %>
<%= Url.Action("Action7", "Controller7") %>
<%= Url.Action("Action8", "Controller8") %>
<%= Url.Action("Action9", "Controller9") %>
<%= Url.Action("Action10", "Controller10") %>
    </div>
</body>
</html> 
```

路由注册 这看起来很奇怪：但我只是想模拟我的不是很复杂的路由。这不是SO的600条路线！

```
public static void RegisterRoutesSlow(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.IgnoreRoute("{language}/Content/{*pathInfo}");

    routes.IgnoreRoute("images/{*pathinfo}");
    routes.IgnoreRoute("scripts/{*pathinfo}");
    routes.IgnoreRoute("content/{*pathinfo}");
    routes.IgnoreRoute("{file}.gif");
    routes.IgnoreRoute("{file}.jpg");
    routes.IgnoreRoute("{file}.js");
    routes.IgnoreRoute("{file}.css");
    routes.IgnoreRoute("{file}.png");
    routes.IgnoreRoute("{file}.pdf");
    routes.IgnoreRoute("{file}.htm");
    routes.IgnoreRoute("{file}.html");
    routes.IgnoreRoute("{file}.swf");
    routes.IgnoreRoute("{file}.txt");
    routes.IgnoreRoute("{file}.xml");
    routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" });

    for (int i = 0; i <= 10; i++)
    {
        routes.MapRoute(
            // Route name
            "RouteName" + i.ToString(),
            // URL with parameters                              
            "{language}/{controller}/{action}/{para1}",
            // Parameter defaults
            new
            {
                action = "Index",
                language = "de",
                para1 = 0
            },
            //Parameter constraints
            new { language = "de|en", controller = "SomeNameOfAnActualController" + i.ToString() }
            );
    }
    routes.MapRoute(
                   "DefaulRoute",            // Route name
                   "{controller}/{action}",    // URL with parameters
                   new
                   {
                       controller = "Home",
                       action = "Index",
                   }
               );
    routes.MapRoute("404-PageNotFound", "{*url}", new { controller = "Error", action = "PageNotFound", language = "de" });
} 
```

**编辑**

示例代码现在是针对 MVC2 编译的。在 VS2010 中，MVC2 可以针对 .NET 3.5 或 4.0 进行编译。

3.5 的性能很好，4.0 的性能很差。

我猜这意味着性能不佳的部分不在 MVC 程序集中，而是在框架程序集中（如 System.Web.Routing.dll）。问题还是一样：我能做点什么吗？一个可接受的答案也是：不，代码很慢，因为从 3.5 版到 4.0 版 MS 更改了 XXX

**编辑-2**

我反编译了 System.Web.Routing.dll 需要很长时间的部分。它使用编译的正则表达式。有一个代码路径（constraint2.Match）在不执行正则表达式的情况下返回，但我还没有检查它是否在内部使用了不同的昂贵操作。

```
protected virtual bool ProcessConstraint(HttpContextBase httpContext, object constraint, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
{
    object obj2;
    IRouteConstraint constraint2 = constraint as IRouteConstraint;
    if (constraint2 != null)
    {
        return constraint2.Match(httpContext, this, parameterName, values, routeDirection);
    }
    string str = constraint as string;
    if (str == null)
    {
        throw new InvalidOperationException(string.Format(CultureInfo.CurrentUICulture, SR.GetString("Route_ValidationMustBeStringOrCustomConstraint"), new object[] { parameterName, this.Url }));
    }
    values.TryGetValue(parameterName, out obj2);
    string input = Convert.ToString(obj2, CultureInfo.InvariantCulture);
    string pattern = "^(" + str + ")$";
    return Regex.IsMatch(input, pattern, RegexOptions.CultureInvariant | RegexOptions.Compiled | RegexOptions.IgnoreCase);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:56:43.667

解决了与您类似的问题：[在页面上第一次调用 Url.Action 很慢](https://stackoverflow.com/questions/11900134/first-call-to-url-action-on-a-page-is-slow/11901219#11901219) 关于路由约束的结论与正则表达式约束非常慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:17:56.177

每个视图在第一次使用时都会被编译和缓存。但是，由于 aspx 视图不是专门为 Mvc 设计的，因此每个 Url.Action 不会在最终链接中全部编译一次，而是在每次执行时重新计算。Razor 编译器有更好的优化。唯一的解决方案是使用 Url.Action 计算各种链接并将它们存储到某个应用程序级别的属性中，因此它仅在第一次执行时计算。您可以将它们放在应用程序字典或类的静态属性中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:56:23.867

我不确定您所看到的原因，但它可能不仅是 MVC 1 与 MVC 4，更高版本中的 IIS 设置会影响视图渲染的速度。几个月前，我遇到了一个幻灯片，我认为它非常有趣，与 MVC 3 应用程序中的性能改进技巧有关。

[http://www.slideshare.net/ardalis/improving-aspnet-mvc-application-performance](http://www.slideshare.net/ardalis/improving-aspnet-mvc-application-performance)

具体来说，请看幻灯片 28，其中指出：

> 卸载 IIS UrlRewrite 模块
> 
> *   如果*服务器*上没有应用程序正在使用它
> *   在 v3 之前的 MVC 应用程序中无效
> *   提高 URL 生成速度

我认为这意味着 UrlRewrite 模块将对 MVC 3 产生负面影响，但不会对 MVC 2 或 1 产生负面影响，这可能是您所看到的减速的根源。还有其他一些改进，但我不相信它们中的任何一个“直接”与您所看到的有关。

# python - 根据第二个列表过滤列表

> ID：11892337
> 
> 赞同：2
> 
> 时间：2012-08-09T21:38:26.947
> 
> 标签：python, filter, list-comprehension

这可能是一个简单的问题，但我自己无法找到一个直接的答案。

给定两个列表，一个只有一个 id 列表，另一个包含所有数据，包括一些我们不关心的 id：
`all_data = [['abc', 123], ['cde', 234], ['fgh', 345]]`
`ids = ['abc', 'fgh']`

获得以下输出的最佳方法是什么，请注意它只保留那些具有相同 ID 的输出： `new_data = [['abc', 123], ['fgh', 345]]`

我当前的代码执行以下操作：

```
for x in all_data:
    for y in ids:
         if x[0] == y:
              new_data.append(x) 
```

你会怎么做？是否有一个内置功能可以解决我在某处错过的问题？

（我说“类似”，因为它实际上是一个非常长的序列，涉及集合以及所有这一切，这就是为什么没有“pythonic”单线可以共享的原因。）

更新：你们很有趣。

要不我让它更难一点。如果我有一个字典 all_data_dict 而不是“all_data”，它有几个与“all_data”格式相同的列表条目怎么办？按照规则，我会确保接受原始问题的答案，但如果你们都想跟上乐趣，让我们看看我们得到了什么！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T21:40:14.660

使用列表推导，其中条件检查集合中的成员资格：

```
>>> all_data = [['abc', 123], ['cde', 234], ['fgh', 345]]
>>> ids = ['abc', 'fgh']
>>> id_set = set(ids)
>>> [s for s in all_data if s[0] in id_set]
[['abc', 123], ['fgh', 345]] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T21:40:41.510

评论后编辑，我的意思是使用一套。正如雷蒙德在他的回答中建议的那样，使用带有一组 ID 的列表理解:)。

```
all_data = [['abc', 123], ['cde', 234], ['fgh', 345]]
ids = set(['abc', 'fgh'])
filtered_data = [x for x in all_data if x[0] in ids] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T21:40:57.833

你应该`all_data`变成一本字典，因为你像一个字典一样使用它：

```
d = dict(all_data)
new_data = [(k, d[k]) for k in ids] 
```

这将使用 给出的顺序`ids`，而不是 给出的顺序`all_data`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T21:45:34.643

有很多人使用过 dicts 或 LC 我想我应该展示`filter`

```
>>> all_data = [['abc', 123], ['cde', 234], ['fgh', 345]]    
>>> ids = set(['abc', 'fgh'])
>>> values = filter(lambda value: value[0] in ids, all_data)
>>> values
[['abc', 123], ['fgh', 345]]
>>> 
```

至于第二部分。

```
>>> all_data_dict = {'abc':all_data, 'cde':all_data, 'fgh':all_data}
>>> ids = set(['abc', 'fgh'])
>>> dict(filter(lambda value: value[0] in ids, all_data_dict.items()))
{'abc': [['abc', 123], ['cde', 234], ['fgh', 345]], 'fgh': [['abc', 123], ['cde', 234], ['fgh', 345]]} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T09:00:42.453

您的第二个问题并不难，只是从一开始就构建数据的正确方法：

```
>>> all_data = {'abc': 123, 'cde': 234,'fgh': 345}  # a dict
>>> ids = {'abc', 'fgh'}  # a set
>>> {k:v for k,v in all_data.viewitems() if k in ids}
{'abc': 123, 'fgh': 345} 
```

顺便说一句，获取匹配键的一个很好的快速方法是：

```
>>> all_data.viewkeys() & ids 
set(['abc', 'fgh']) 
```

# jquery - 用 If / Else 条件替换 Jquery 中的内容

> ID：11892348
> 
> 赞同：0
> 
> 时间：2012-08-09T21:39:11.467
> 
> 标签：jquery

嗨，我有一个表格，其中有一些单元格，一个单元格中有 0，所以我想将其更改为否，另一个有 1，所以我想将其更改为是，但我似乎无法让它工作，这是我迄今为止所拥有的：

```
if ($('.fsAction td:eq(2)').text('0')) {

    $('.fsAction td:eq(2)').html('No');

} elseif ($('.fsAction td:eq(2)').text('1')) {

    $('.fsAction td:eq(2)').html('Yes');

} 
```

我错过了什么吗？我不能使用 val 因为这些不是表单区域

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:43:09.920

`.text()`将获取文本值，并将`'.text('0')`文本设置为“0”。尝试比较文本。

```
if ($('.fsAction td:eq(2)').text() === '0') {

    $('.fsAction td:eq(2)').html('No');

} elseif ($('.fsAction td:eq(2)').text() === '1') {

    $('.fsAction td:eq(2)').html('Yes');

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:44:13.127

你有两个问题之一。要么你的选择器不好，要么你的方法不好。我会尝试通过将类名添加到有问题的表格单元格中来消除选择器问题的可能性，然后只做

```
if ($('.tablecelltest').text() == '0') {
    $('.tablecelltest').html('No');
} 
elseif ($('.tablecelltest').text() == '1') {
    $('.tablecelltest').html('Yes');
} 
```

如果这不起作用，则说明您有选择器问题。我可以试试这个，因为有时纯文本选择器会给我带来麻烦：

```
$('.fsAction').find('td').eq(2) 
```

如果这不起作用，我们可能需要查看 jsfiddle 或类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:41:39.743

谢谢大家，但这些似乎都不起作用，

我有多个 1 和 0 需要替换，但他们只将第一个更改为否，第一个是 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T21:46:01.697

尝试这个 ：-）

```
var elem = $('.fsAction td:eq(2)');
elem.text() == '0' ? str = 'No' : str = 'Yes';
elem.text(str); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T21:43:08.917

您在调用时设置文本值`text('0')`。要获取文本值，您需要调用不带任何参数的函数，如`text()`. 尝试这个：

```
if ($('.fsAction td:eq(2)').text() == "0") {
    $('.fsAction td:eq(2)').text('No');
} else if ($('.fsAction td:eq(2)').text() == "1") {
    $('.fsAction td:eq(2)').text('Yes');
} 
```

另外，请注意我将替换文本内容的功能从`html()`更改为`text()`。由于您实际上并没有放入任何 HTML，`text()`因此是更好更快的方法。

# c# - 使用/不使用相对路径在 C# 中写入文件

> ID：11892356
> 
> 赞同：1
> 
> 时间：2012-08-09T21:39:42.700
> 
> 标签：c#, .net, streamwriter

我目前正在尝试从命令行获取用户输入`OutputPath`

```
 using (outfile = new StreamWriter(OutputPath))
 {
     outfile.Write(result);
 } 
```

如果给定，这将写入绝对路径或将文件写入 c:\windows\system32 下

如何使其成为绝对路径或取决于当前目录。有没有办法从命令行获取当前工作目录，或者是否有更好的 API 可以解决它。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T21:50:24.983

使用[Path.IsPathRooted](http://msdn.microsoft.com/en-us/library/system.io.path.ispathrooted.aspx)判断输入是否为绝对输入，使用[Environment.CurrentDirectory](http://msdn.microsoft.com/en-us/library/system.environment.currentdirectory.aspx)获取当前目录。有了这些信息，你应该已经准备好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T21:42:48.637

您可以使用[Directory.GetCurrentDirectory](http://msdn.microsoft.com/en-us/library/system.io.directory.getcurrentdirectory.aspx)获取当前工作目录`OS`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T21:45:52.023

C# 确实知道如何使用基于当前目录的相对路径。

如果您看到在 中创建的文件`C:\Windows\System32`，那么这可能是您当前的工作目录。

快捷方式可以设置它正在启动的程序的工作目录。打开/保存通用文件对话框也会与当前工作目录混淆。

如果您在不使用快捷方式的情况下启动应用程序，它将从父进程继承当前目录。 `explorer.exe`通常`C:\Windows\System32`作为工作目录，这使得通过双击资源管理器中的图标启动的应用程序非常常见。

# python - Matlab vs Python：重塑

> ID：11892358
> 
> 赞同：22
> 
> 时间：2012-08-09T21:39:54.363
> 
> 标签：python, matlab, matrix, numpy, scipy

所以我发现[了这个](https://docs.scipy.org/doc/numpy/user/numpy-for-matlab-users.html)：

> 转换 MATLAB 代码时，可能需要先将矩阵整形为线性序列，执行一些索引操作，然后再整形。由于 reshape （通常）在同一存储上生成视图，因此应该可以相当有效地执行此操作。
> 
> 请注意，Numpy 中 reshape 使用的扫描顺序默认为“C”顺序，而 MATLAB 使用 Fortran 顺序。如果您只是简单地转换为线性序列并返回，这无关紧要。但是，如果您要从依赖于扫描顺序的 MATLAB 代码转换整形，那么这个 MATLAB 代码：
> 
> ```
> z = reshape(x,3,4); 
> ```
> 
> 应该成为
> 
> ```
> z = x.reshape(3,4,order='F').copy() 
> ```
> 
> 在 Numpy 中。

`mafs`当我在 MATLAB 中执行以下操作时，我有一个名为 的多维 16*2 数组：

```
mafs2 = reshape(mafs,[4,4,2]) 
```

我得到的东西与我在 python 中所做的不同：

```
mafs2 = reshape(mafs,(4,4,2)) 
```

甚至

```
mafs2 = mafs.reshape((4,4,2),order='F').copy() 
```

对此有什么帮助吗？谢谢你们。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-09T22:54:32.350

例子：

### MATLAB：

```
>> mafs = [(1:16)' (17:32)']
mafs =
     1    17
     2    18
     3    19
     4    20
     5    21
     6    22
     7    23
     8    24
     9    25
    10    26
    11    27
    12    28
    13    29
    14    30
    15    31
    16    32

>> reshape(mafs,[4 4 2])
ans(:,:,1) =
     1     5     9    13
     2     6    10    14
     3     7    11    15
     4     8    12    16
ans(:,:,2) =
    17    21    25    29
    18    22    26    30
    19    23    27    31
    20    24    28    32 
```

### Python：

```
>>> import numpy as np
>>> mafs = np.c_[np.arange(1,17), np.arange(17,33)]
>>> mafs.shape
(16, 2)
>>> mafs[:,0]
array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16])
>>> mafs[:,1]
array([17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32])

>>> r = np.reshape(mafs, (4,4,2), order="F")
>>> r.shape
(4, 4, 2)
>>> r[:,:,0]
array([[ 1,  5,  9, 13],
       [ 2,  6, 10, 14],
       [ 3,  7, 11, 15],
       [ 4,  8, 12, 16]])
>>> r[:,:,1]
array([[17, 21, 25, 29],
       [18, 22, 26, 30],
       [19, 23, 27, 31],
       [20, 24, 28, 32]]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-10T14:49:12.800

我自己也有类似的问题，因为我也在尝试从 MATLAB 过渡到 Python。我终于能够将一个以深度、行、列、格式给出的 numpy 矩阵转换为单张列向量（每张图像）。

在 MATLAB 中，我会做类似的事情：

```
output = reshape(imStack,[row*col,depth]) 
```

在 Python 中，这似乎转化为：

```
import numpy as np
output=np.transpose(imStack)
output=output.reshape((row*col, depth), order='F') 
```

# powershell - Import-CSV 查找已经过去了多少分钟

> ID：11892360
> 
> 赞同：0
> 
> 时间：2012-08-09T21:39:59.120
> 
> 标签：powershell

我想最终从 csv 转到 html。我之前做过类似的事情，但需要在数据准备好之前完成一个步骤。我需要获取开始时间，而不是时间，而是经过的分钟。

当我引入数据时，其中一列的格式如下：

```
mSTART:
2012-08-07 15:58:57.043
2012-08-07 11:00:45.350
2012-08-07 15:54:47.870
2012-08-07 15:44:28.557 
```

我想将该数据操作到一个列中。

```
Duration:
38 minutes
70 minutes
108 minutes 
```

它会`[(now)-(the start time)]`在几分钟内。

我当前的 import-csv 行如下所示：

```
import-csv .\mydata.csv -header mID, mDES, mTYPE, mVAL, mSTART, mEFF, mDT, mDTDES | Select mDES, mSTART, @{Name="DT";Expression={ $_.mDT+" - "+$_.mDTDES}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:20:43.470

使用命令行开关将日期列中的文本转换为日期对象`get-date`。

只需从当前时间中减去该结果，即可返回一个[时间跨度对象](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)。如果您只想要经过的分钟数，请调用该`TotalMinutes`对象的属性。

```
import-csv .\mydata.csv -header mID, mDES, mTYPE, mVAL, mSTART, mEFF, mDT, mDTDES | 
    Select mDES, mSTART, @{Name="DT";Expression={ $_.mDT+" - "+$_.mDTDES}, @{Name="Duration";Expression={ ((get-date) - (get-date $_.mStart)).TotalMinutes} } 
```

# imagemagick - 使用自制软件安装 imagemagick 时出错

> ID：11892362
> 
> 赞同：0
> 
> 时间：2012-08-09T21:40:01.733
> 
> 标签：imagemagick, homebrew

我正在尝试通过 home brew 安装 imagemagick 并收到以下错误：

```
Error: Failed executing: make install (imagemagick.rb:97)
These existing issues may help you:
https://github.com/mxcl/homebrew/issues/13618
Otherwise, this may help you fix or report the issue:
https://github.com/mxcl/homebrew/wiki/bug-fixing-checklist 
```

我已经完全卸载了 xcode 并重新安装了它和命令行工具，它仍然抛出这个错误。

`brew doctor`正在引发一些警告：

```
Warning: /Library/Frameworks/Mono.framework detected
This can be picked up by CMake's build system and likely cause the build to
fail. You may need to move this file out of the way to compile CMake.
Warning: Unbrewed dylibs were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected dylibs:
/usr/local/lib/libcdt.5.dylib    /usr/local/lib/libcgraph.6.dylib /usr/local/lib/libgraph.5.dylib    /usr/local/lib/libgvc.6.dylib    /usr/local/lib/libgvpr.2.dylib    /usr/local/lib/libpathplan.4.dylib     /usr/local/lib/libxdot.4.dylib
Warning: Unbrewed .pc files were found in /usr/local/lib/pkgconfig.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected .pc files:
/usr/local/lib/pkgconfig/libcdt.pc    /usr/local/lib/pkgconfig/libcgraph.pc    /usr/local/lib/pkgconfig/libgraph.pc    /usr/local/lib/pkgconfig/libgvc.pc    /usr/local/lib/pkgconfig/libgvpr.pc    /usr/local/lib/pkgconfig/libpathplan.pc    /usr/local/lib/pkgconfig/libxdot.pc
Warning: /usr/bin occurs before /usr/local/bin
This means that system-provided programs will be used instead of those
provided by Homebrew. The following tools exist at both paths:

2to3
pkg-config

Consider amending your PATH so that /usr/local/bin
occurs before /usr/bin in your PATH.
Warning: You have a non-Homebrew 'pkg-config' in your PATH:
/usr/bin/pkg-config => /Library/Frameworks/Mono.framework/Versions/2.10.9/bin/pkg-config

This was most likely created by the Mono installer. `./configure` may
have problems finding brew-installed packages using this other pkg-config. 
```

您认为其中任何一个都可能是问题所在吗？

谢谢你的帮助！

**编辑：**

我正在运行狮子。Brew 是最新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:11:38.517

好吧，我昨天遇到了同样的问题，在我的情况下，解决方案令人惊讶地导致在[Mac OS X 上卸载 Mono 之后卸载](http://www.mono-project.com/Mono%3aOSX#Uninstalling_Mono_on_Mac_OS_X)Mono 框架，删除所有放置意外 dynlib 和 .pc 文件的包（在我的情况下是保险丝相关）。

但是，我确实根据自制软件的意愿设置了 PATH，修改`/usr/local/bin`了 PATH 环境变量。

# c# - 为一个类命名未知数量的新实例

> ID：11892366
> 
> 赞同：1
> 
> 时间：2012-08-09T21:40:18.560
> 
> 标签：c#, class

我正在尝试开发一个 Windows 窗体应用程序，用户将在其中设置未知数量的“子类别”。如何自动命名这些新实例。

万一这有帮助，这就是我想要的

```
private class Category
{
    int numberOfCategories = 0;

    Category(int categoryNumber)
    {
        numberOfCategories = categoryNumber;

        for (int i = 0; i <= numberOfCategories; ++i)
        {
            SubCategory *automateThis* = new SubCategory();
        }
    }
}
private class SubCategory
{ 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T21:43:42.243

你为什么要给他们起名字？这将产生另一个问题——你将如何访问它们？更好的方法是创建集合`List<SubCategory>`，在这种情况下，您不必担心命名对象。

如果您想删除子类别 - 您可以考虑使用字典，其中字符串可能是子类别的唯一标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:42:58.187

制作一个`list<>`对象`SubCategory`并使用`i`来增加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:51:54.943

一种解决方案

```
private List<SubCategory> _subCategories = new List<SubCategory>();
private class Category
{
    int numberOfCategories = 0;

    Category(int categoryNumber)
    {
        numberOfCategories = categoryNumber;

        for (int i = 0; i <= numberOfCategories; ++i)
        {
           _subCategories.Add(new SubCategory());   
        }
    }
} 
```

或者您可以使用数组或其他聚合如果您想要名称，请使用字典。不过叫什么名字？

发表评论后

什么时候？在创建它们之前你知道吗？您是从文件还是数据库中加载它们？

为什么除了具有 Name 属性的 SubCategory 之外，您还需要其他东西？

# python - 打印语句仅出现在子流程调用之前或之后

> ID：11892370
> 
> 赞同：1
> 
> 时间：2012-08-09T21:40:36.703
> 
> 标签：python, file-io, subprocess, output-buffering

这个问题与[Python 有关：为什么 print 语句和 subprocess.call() 输出不同步？](https://stackoverflow.com/questions/10253698/python-why-print-statements-and-subprocess-call-output-are-out-of-sync)但解决方案不适用于我的特殊情况。我正在尝试在 python 中完成一个自动化测试过程，它首先打印测试套件的名称，然后有一个 for 循环，该循环遍历打印特定测试名称的列表，然后是执行测试的子进程调用，以测试完成的打印语句结束。最后，我打印了一条语句，说明它是测试套件名称的结尾。

即=========开始测试套件：=========

---------开始测试： ----------

子进程调用执行测试

---------结束测试：------------

重复测试

=========结束测试套件：==========

我当前的代码工作正常，但是当我将其输出重定向到文件时，它会将所有打印语句放在底部。在另一个问题中使用解决方案时，它对我来说完全相反，首先打印所有打印语句，然后执行测试。我尝试使用 sys.stdout.flush()，以及关闭缓冲，但两者都给了我同样的东西。当我重定向输出或写入文件时，如何才能完全按照代码执行/在代码中的方式打印所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:25:26.203

我通常解决此类问题的方法是捕获 python 程序中的输出并在我希望它使用打印时打印它`Popen`

```
>>> def do_ls():
...     print "I'm about to ls"
...     ls = subprocess.Popen('ls', stdout=subprocess.PIPE)
...     output = ls.communicate()[0] #wait for the process to finish, capture stdout
...     print 'ls output:'
...     print output
...     print 'done.' 
```

如果您发布一些代码，我可以向您展示如何更具体地为您的测试执行此操作

# javascript - div内图像的垂直中间对齐？

> ID：11892373
> 
> 赞同：3
> 
> 时间：2012-08-09T21:40:56.093
> 
> 标签：javascript, html, css, vertical-alignment

> **可能重复：**
> [div内图像的垂直对齐](https://stackoverflow.com/questions/5429056/vertical-alignment-of-image-inside-a-div)

**好的，这就是我想要做的：**

*   我有一个空的 div（一个盒子），几乎没有高度。
*   我正在发出 AJAX 请求以将一些内容加载到其中。
*   在加载内容之前，我想以典型的**“ajax 加载”**旋转 gif 显示。

**我设法：**

*   水平居中`img`（通过把它放在另一个`div`里面`text-align:center;`）

**剩下什么 ：**

*   能够给那个空的 div 一些高度。*（简单的）*
*   垂直对齐图像，使其出现**在框的正中心**。*（我完全不知道该怎么做。我目前正在设置一个上边距，它适用于一个特定的盒子，但如果盒子已经有一些不同的高度，这将不起作用......）*

你会怎么做？（任何可能的想法都是可以接受的。CSS/Javascript 等等……）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:51:22.160

[**http://jsfiddle.net/teresko/5mG2y/**](http://jsfiddle.net/teresko/5mG2y/)

基本思想是使用`display: table-cell;`然后`vertical-align: middle;`

> [**HTML** _]

 **```
<div class="container">
    <div class="holder">
        <img class="stuff" src="path/to/image.png">
    </div>                
</div> 
```

> [的**CSS**：]

```
.container{ 
    /* the container in which image is placed */
    height:         300px;
    margin:         0 auto;
    width:          200px;
}

.holder{
    display:        table-cell;
    width:          100%;
    vertical-align: middle;
    height:         inherit;
}

.stuff{
    display:        block;
} 
```

这样图像的放置将不依赖于容器的尺寸。它也可以调整到水平中心。您所要做的就是添加`.stuff{ margin: 0 auto;}`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:47:06.097

不要忘记 table-cell 不是正确的用法。您不希望将图像视为表格单元格，因为表格单元格应该只包含表格数据。只是举起谨慎的旗帜。坚持语义。

最好使用其他线程的答案。这个：

```
#container { position: relative; }
#container img {
  position: absolute;
  left: 50%;
  top: 50%;
  margin-top: /* -1/2 the height of the image */
  margin-left: /* -1/2 the width of the image */
} 
```

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T22:10:50.227

使用 jQuery

```
//HTML
<div><img src="loader.gif" class="loader" alt="Loader" /></div>

//JS
$.fn.centeringIn = function(){
 var pere = this.parent();
 (pere.css("position") == 'static') ? pere.css("position","relative"):pere.css("position");
 this.css({
  'position' : 'absolute',
  'top' : ( pere.height() - this.height() )/2+'px',
  'left' : ( pere.width() - this.width() )/2+'px'
 });
}

$(document).ready( function() {
 $('.loader').centeringIn();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T21:45:40.940

为图像样式添加一些 margin-top ，使其在 div 的中间对齐。假设您的 div 高度为 50px，而您的图像高度为 5px。然后让你的 margin-top 20px 放在中间。**

# mysql - 添加外键时出现错误'表'.\schema\table'已经存在

> ID：11892377
> 
> 赞同：3
> 
> 时间：2012-08-09T21:41:00.133
> 
> 标签：mysql, sql, foreign-keys

我有以下现有表格，如此处所示..

**显示创建表 ExpeditedAddress；**

```
CREATE TABLE `expeditedaddress` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `description` varchar(255) NOT NULL,
  `address` varchar(255) NOT NULL,
  `city` varchar(255) NOT NULL,
  `country` varchar(255) NOT NULL,
  `stateProvince` varchar(255) NOT NULL,
  `zipPostal` varchar(255) NOT NULL,
  `brokerageId` bigint(20) NOT NULL,
  `timezoneCode` varchar(100) NOT NULL,
  `productionFacilityId` bigint(20) NOT NULL,
  `deliveryCutoffTime` time NOT NULL,
  `deliveredByTime` time NOT NULL,
  `daysToDeliver` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_ExpeditedAddress_Brokerage_ID` (`brokerageId`),
  KEY `FK_ExpeditedAddress_Country_StateProvince` (`country`,`stateProvince`),
  CONSTRAINT `ExpeditedAddress_ibfk_1` FOREIGN KEY (`brokerageId`) REFERENCES `brokerage` (`id`),
  CONSTRAINT `ExpeditedAddress_ibfk_2` FOREIGN KEY (`country`, `stateProvince`) REFERENCES `stateprovince` (`countryName`, `name`)
) ENGINE=InnoDB AUTO_INCREMENT=149 DEFAULT CHARSET=utf8; 
```

引用此表

**显示创建表生产设施；**

```
CREATE TABLE `productionfacility` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `description` varchar(255) NOT NULL,
  `address` varchar(255) NOT NULL,
  `city` varchar(255) NOT NULL,
  `country` varchar(255) NOT NULL,
  `stateProvince` varchar(255) NOT NULL,
  `zipPostal` varchar(255) NOT NULL,
  `timezoneCode` varchar(100) NOT NULL,
  `workingWeek` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_ProductionFacility_Country_StateProvince` (`country`,`stateProvince`),
  CONSTRAINT `productionfacility_ibfk_1` FOREIGN KEY (`country`, `stateProvince`) REFERENCES `stateprovince` (`countryName`, `name`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8; 
```

然后当我尝试添加一个外键来喜欢这个时......

```
alter table ExpeditedAddress add foreign key FK_ExpeditedAddress_Productionfacility(productionFacilityId) references ProductionFacility(id); 
```

我得到以下...

```
[2012-08-09 15:39:22] [42S01][1050] Table '.\realtorprint_dev_prod\expeditedaddress' already exists
[2012-08-09 15:39:22] [HY000][1025] Error on rename of '.\realtorprint_dev_prod\#sql-1d74_710a' to '.\realtorprint_dev_prod\expeditedaddress' (errno: -1)
[2012-08-09 15:39:22] [42S01][1050] Table '.\realtorprint_dev_prod\expeditedaddress' already exists 
```

似乎是一个非常奇怪的错误。列的类型都是“bigint(20) not null”。这两个表都是 InnoDB。引用的列是主键。

有人有什么想法吗？

另外，这是运行的结果

**显示引擎 InnoDB 状态；**

```
=====================================
120809 15:45:41 INNODB MONITOR OUTPUT
=====================================
Per second averages calculated from the last 54 seconds
-----------------
BACKGROUND THREAD
-----------------
srv_master_thread loops: 9322 1_second, 9321 sleeps, 846 10_second, 894 background, 894 flush
srv_master_thread log flush and writes: 9323
----------
SEMAPHORES
----------
OS WAIT ARRAY INFO: reservation count 520, signal count 520
Mutex spin waits 197, rounds 836, OS waits 12
RW-shared spins 499, rounds 14942, OS waits 498
RW-excl spins 2, rounds 242, OS waits 8
Spin rounds per wait: 4.24 mutex, 29.94 RW-shared, 121.00 RW-excl
------------------------
LATEST FOREIGN KEY ERROR
------------------------
120809 15:34:11 Transaction:
TRANSACTION 40CE, ACTIVE 0 sec inserting, thread declared inside InnoDB 485
mysql tables in use 2, locked 2
7 lock struct(s), heap size 1248, 16 row lock(s), undo log entries 7
MySQL thread id 28938, OS thread handle 0x16d4, query id 350923 localhost 127.0.0.1 rpuser copy to tmp table
alter table ExpeditedAddress add foreign key FK_ExpeditedAddress_Productionfacility(id) references ProductionFacility(id)
Foreign key constraint fails for table `realtorprint_dev_prod`.`#sql-1d74_710a`:
,
  CONSTRAINT `#sql-1d74_710a_ibfk_1` FOREIGN KEY (`id`) REFERENCES `productionfacility` (`id`)
Trying to add in child table, in index `PRIMARY` tuple:
DATA TUPLE: 15 fields;
 0: len 8; hex 8000000000000008; asc         ;;
 1: len 6; hex 0000000040ce; asc     @ ;;
 2: len 7; hex a3000005f90176; asc       v;;
 3: len 12; hex 536f757468204f6666696365; asc South Office;;
 4: len 25; hex 233235322c2031313438382d20323420537472656574205345; asc #252, 11488- 24 Street SE;;
 5: len 7; hex 43616c67617279; asc Calgary;;
 6: len 6; hex 43616e616461; asc Canada;;
 7: len 7; hex 416c6265727461; asc Alberta;;
 8: len 7; hex 54325a20344339; asc T2Z 4C9;;
 9: len 8; hex 8000000000000012; asc         ;;
 10: len 16; hex 416d65726963612f45646d6f6e746f6e; asc America/Edmonton;;
 11: len 8; hex 8000000000000001; asc         ;;
 12: len 3; hex 81adb0; asc    ;;
 13: len 3; hex 829810; asc    ;;
 14: len 4; hex 80000001; asc     ;;

But in parent table `realtorprint_dev_prod`.`productionfacility`, in index `PRIMARY`,
the closest match we can find is record:
PHYSICAL RECORD: n_fields 11; compact format; info bits 0
 0: len 8; hex 8000000000000007; asc         ;;
 1: len 6; hex 00000000401f; asc     @ ;;
 2: len 7; hex b6000003a10176; asc       v;;
 3: len 16; hex 4461746147726f7570204c6f6e646f6e; asc DataGroup London;;
 4: len 21; hex 313837302043686561707369646520537472656574; asc 1870 Cheapside Street;;
 5: len 6; hex 4c6f6e646f6e; asc London;;
 6: len 6; hex 43616e616461; asc Canada;;
 7: len 7; hex 4f6e746172696f; asc Ontario;;
 8: len 7; hex 4e355620334537; asc N5V 3E7;;
 9: len 15; hex 416d65726963612f546f726f6e746f; asc America/Toronto;;
 10: len 0; hex ; asc ;;

InnoDB: Renaming table `realtorprint_dev_prod`.`#sql-1d74_710a` to `realtorprint_dev_prod`.`expeditedaddress` failed!
InnoDB: Renaming table `realtorprint_dev_prod`.`#sql-1d74_710a` to `realtorprint_dev_prod`.`expeditedaddress` failed!
InnoDB: Renaming table `realtorprint_dev_prod`.`#sql-1d74_710a` to `realtorprint_dev_prod`.`expeditedaddress` failed!
InnoDB: Renaming table `realtorprint_dev_prod`.`#sql-1d74_710b` to `realtorprint_dev_prod`.`expeditedaddress` failed!
------------
TRANSACTIONS
------------
Trx id counter 40FD
Purge done for trx's n:o < 40F2 undo n:o < 0
History list length 827
LIST OF TRANSACTIONS FOR EACH SESSION:
---TRANSACTION 40F3, not started
MySQL thread id 28939, OS thread handle 0x2ed8, query id 350949 localhost 127.0.0.1 rpuser
show engine innodb status
--------
FILE I/O
--------
I/O thread 0 state: wait Windows aio (insert buffer thread)
I/O thread 1 state: wait Windows aio (log thread)
I/O thread 2 state: wait Windows aio (read thread)
I/O thread 3 state: wait Windows aio (read thread)
I/O thread 4 state: wait Windows aio (read thread)
I/O thread 5 state: wait Windows aio (read thread)
I/O thread 6 state: wait Windows aio (write thread)
I/O thread 7 state: wait Windows aio (write thread)
I/O thread 8 state: wait Windows aio (write thread)
I/O thread 9 state: wait Windows aio (write thread)
Pending normal aio reads: 0 [0, 0, 0, 0] , aio writes: 0 [0, 0, 0, 0] ,
 ibuf aio reads: 0, log i/o's: 0, sync i/o's: 0
Pending flushes (fsync) log: 0; buffer pool: 0
1363 OS file reads, 17403 OS file writes, 4157 OS fsyncs
0.00 reads/s, 0 avg bytes/read, 0.11 writes/s, 0.11 fsyncs/s
-------------------------------------
INSERT BUFFER AND ADAPTIVE HASH INDEX
-------------------------------------
Ibuf: size 1, free list len 0, seg size 2, 11 merges
merged operations:
 insert 11, delete mark 0, delete 0
discarded operations:
 insert 0, delete mark 0, delete 0
Hash table size 1458971, node heap has 15 buffer(s)
3.54 hash searches/s, 12.39 non-hash searches/s
---
LOG
---
Log sequence number 121733086
Log flushed up to   121733086
Last checkpoint at  121601659
0 pending log writes, 0 pending chkp writes
2674 log i/o's done, 0.11 log i/o's/second
----------------------
BUFFER POOL AND MEMORY
----------------------
Total memory allocated 754434048; in additional pool allocated 0
Dictionary memory allocated 795806
Buffer pool size   44992
Free buffers       42494
Database pages     2483
Old database pages 896
Modified db pages  36
Pending reads 0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 335, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 1352, created 1131, written 13915
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
Buffer pool hit rate 1000 / 1000, young-making rate 0 / 1000 not 0 / 1000
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 2483, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
--------------
ROW OPERATIONS
--------------
0 queries inside InnoDB, 0 queries in queue
1 read views open inside InnoDB
Main thread id 7616, state: sleeping
Number of rows inserted 194766, updated 699, deleted 143, read 806318
2.74 inserts/s, 0.00 updates/s, 0.00 deletes/s, 2.74 reads/s
----------------------------
END OF INNODB MONITOR OUTPUT
============================ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:55:21.917

如果您查看“最新的外键错误”，那很长的一个抱怨您尝试添加的外键被违反：您现有的数据不符合外键约束。

（我不是 100% 确定这就是它的意思，它可能在抱怨索引损坏，在这种情况下，您需要弄清楚索引是如何损坏并重建索引，但我认为不是。我认为他们已经自从我上次看到它以来，刚刚更改了违反外键的错误消息）。

# iis - IIS FTP 是否包含用于检测文件上传何时完成的 API？

> ID：11892380
> 
> 赞同：2
> 
> 时间：2012-08-09T21:41:11.653
> 
> 标签：iis, ftp

我想使用 IIS FTP 服务器，但我需要能够判断特定用户的文件上传何时完成。我宁愿不依赖于直接在 Windows 中查看文件更改，因为我认为我无法判断文件上传是否真正完成或被中止并且可能在稍后完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T22:54:04.003

您可以使用自定义日志记录提供程序来执行此操作。我已经实现了一些非常相似的使用

[http://learn.iis.net/page.aspx/632/how-to-use-managed-code-c-to-create-an-ftp-provider-that-sends-an-email-when-files-已上传/](http://learn.iis.net/page.aspx/632/how-to-use-managed-code-c-to-create-an-ftp-provider-that-sends-an-email-when-files-are-uploaded/)

作为开始。

# nosql - 关于 Cassandra 的好教程以及一个小型数据库查询

> ID：11892381
> 
> 赞同：3
> 
> 时间：2012-08-09T21:41:19.343
> 
> 标签：nosql, cassandra

我有一个两部分的问题。

1) 有没有很好的教程来解释 Cassandra 的系统如何与列族、超级列族和所有爵士乐一起工作？我正在阅读文档，但有点困惑.... 2）我现在也在设计我的 MYSQL 表，并且完全打算在几个月内完成所有新功能和有时间开始传输数据。我目前有一个类似于以下内容的架构：

```
Folders:
  folder_id
  folder_name
  ...

Files:
  file_id
  file_name
  ... 
```

现在我有两种可能的解决方案，因为 Cassandra 不支持连接，我可以像往常一样使用规范化系统来处理它并执行此操作：

```
Folders:
  folder_id
  folder_name
  ...

Folder_files:
  folder_id
  file_id

Files:
  file_id
  file_name
  ... 
```

或者我可以创建重复项并将其中一个查询从 3 个查询消除为 2 个查询：

```
Folders:
  folder_id
  file_id
  folder_name
  ...

Files:
  file_id
  file_name
  ... 
```

会推荐哪一个？感谢您提供有关此简单数据库设置的任何教程和信息 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:02:58.690

如果您将按文件夹 ID 查询以获取文件夹的所有文件，那么这似乎是合适的：

```
Folder_Files: 
  folder_id 
  file_id 
  file_name 
  ... 
```

# acpi - ACPI STORE 位置取决于参数

> ID：11892382
> 
> 赞同：1
> 
> 时间：2012-08-09T21:41:19.900
> 
> 标签：acpi

我正在尝试存储`\_SB.I2C1.(value passed as parameter)`into的值`BUFF`。此代码不起作用，但 ASL 中是否有任何机制允许我这样做？

```
CreateByteField(BUFF, 0x02, DATA)
Name(REGO, 0x0)
Method(DI2C, 1)
{
         Store(Arg0, REGO)
         Store (\_SB.I2C1.REGO, BUFF)
} 
```

# python - 自定义 python 回溯或调试输出

> ID：11892383
> 
> 赞同：1
> 
> 时间：2012-08-09T21:41:21.133
> 
> 标签：python, error-handling

我有一个回溯打印，想自定义它的最后一部分。

*   什么：错误发生在另一个进程中，并且回溯在那里（就像多处理中的情况一样）。
*   问题：我想要完整的回溯和错误报告。

类似于此代码：

```
>>> def f():
    g()

>>> def g():
    raise Exception, Exception(), None ## my traceback here

>>> f()

Traceback (most recent call last):
  File "<pyshell#14>", line 1, in <module>
    f()
  File "<pyshell#8>", line 2, in f
    g()
  File "<pyshell#11>", line 2, in g
    raise Exception, Exception(), None ## my traceback starts here
my traceback appears here
my traceback appears here

Exception 
```

不可能的“解决方案”：子类和模拟对象

```
>>> from types import *
>>> class CostomTB(TracebackType):
    pass

Traceback (most recent call last):
  File "<pyshell#125>", line 1, in <module>
    class CostomTB(TracebackType):
TypeError: Error when calling the metaclass bases
    type 'traceback' is not an acceptable base type
>>> class CostomTB(object):
    pass

>>> try: zzzzzzzzz
except NameError:
    import sys
    ty, err, tb = sys.exc_info()
    raise ty, err, CostomTB()

Traceback (most recent call last):
  File "<pyshell#133>", line 5, in <module>
    raise ty, err, CostomTB()
TypeError: raise: arg 3 must be a traceback or None 
```

我正在使用python 2.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:51:05.687

我猜你想要完整的回溯堆栈。看到这个有很好的例子[python 日志模块](http://blog.tplus1.com/index.php/2007/09/28/the-python-logging-module-is-much-better-than-print-statements/)。
如果出现一些混乱，请参阅[日志记录文档](http://docs.python.org/library/logging.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:26:40.117

您提到了一个单独的进程：如果您的问题是在进程 A 中捕获回溯并将其显示在进程 B 中，就好像后者实际上引发了异常，那么恐怕没有干净的方法可以做到这一点。

我建议序列化进程 A 中的回溯，将其发送到进程 B，然后从那里引发一个新异常，其中包括前者的描述。结果是稍长的输出，但它包含有关两个进程堆栈的信息。

在下面的示例中，实际上并没有两个单独的进程，但我希望它能让我的观点更清楚：

```
import traceback, StringI

def functionInProcessA():
    raise Exception('Something happened in A')

class RemoteException(Exception):
    def __init__(self, tb):
        Exception.__init__(self, "Remote traceback:\n\n%s" % tb)

def controlProcessB():
    try:
        functionInProcessA()
    except:
        fd = StringIO.StringIO()
        traceback.print_exc(file=fd)
        tb = fd.getvalue()
        raise RemoteException(tb)

if __name__ == '__main__':
    controlProcessB() 
```

输出：

```
Traceback (most recent call last):
  File "a.py", line 20, in <module>
    controlProcessB()
  File "a.py", line 17, in controlProcessB
    raise RemoteException(tb)
__main__.RemoteException: Remote traceback:

Traceback (most recent call last):
  File "a.py", line 12, in controlProcessB
    functionInProcessA()
  File "a.py", line 4, in functionInProcessA
    raise Exception('Something happened in A')
Exception: Something happened in A 
```

# android - PhoneGap (1.9)：如何使用文件系统删除文件夹的内容？

> ID：11892385
> 
> 赞同：0
> 
> 时间：2012-08-09T21:41:43.463
> 
> 标签：android, cordova, filesystems, sencha-touch

我正在使用 Sencha Touch 2.0 和 PhoneGap 1.9 创建一个 Android 应用程序。我已经使用 PhoneGap 提供的文件系统访问将所有图像（通过拍照）保存在 SD 卡上。

现在，我还希望能够在用户卸载应用程序时删除 SD 卡上文件夹的全部内容。

在 API Doc 中我找不到合适的删除操作，所以我希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:07:40.963

你会想要使用[DirectoryEntry.removeRecursively](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#DirectoryEntry_removerecursively)。

# c++ - 是否有可用于 c++11 中的 boost ptr_map 的 auto_ptr 的替代品

> ID：11892387
> 
> 赞同：4
> 
> 时间：2012-08-09T21:42:06.640
> 
> 标签：c++, boost, c++11

在 c++11`auto_ptr`中已弃用并替换为更明智的`unique_ptr`. 唉，如果您使用`boost::ptr_map`已`auto_ptr`实现的非常方便的用途：

```
std::auto_ptr<Layer> pLayer(new Layer());
mRawLayerPtrMap.insert(layerName,pLayer); 
```

是否有可能使用与 c++11 类似的东西。我知道

```
Layer* pLayer = new Layer();
mFusedLayers.insert(fusedLayerName,pLayer); 
```

有效，但`auto_ptr`在一些更复杂的情况下有它的优点。是否有适用于 C++11 的替代品？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T21:49:11.307

怎么样

```
std::unique_ptr<Layer> pLayer(new Layer());
mFusedLayers.insert(fusedLayerName,pLayer.release()); 
```

# c# - 在 gridview 中创建表单

> ID：11892391
> 
> 赞同：0
> 
> 时间：2012-08-09T21:42:25.503
> 
> 标签：c#, asp.net, listview, gridview

我目前有一个网格视图，其中包含从数据库绑定的数据。这些数据应该是可编辑和可删除的。

是否可以在网格视图中创建表单？

即，当您单击gridview 中的某个项目时，下方或上方的所有内容都会向下/向上移动，以便为带有两个下拉列表和一些用于删除/更新的图标的新编辑窗格创建一些空间。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:45:54.297

gridview 本身有一些功能可以编辑、添加、删除等。查看[http://msdn.microsoft.com/en-us/library/ms972948.aspx](http://msdn.microsoft.com/en-us/library/ms972948.aspx)。虽然它有一种学习曲线，所以你必须阅读才能使用 Gridview 做一些很酷的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T03:47:53.630

**我已经看到Telerik 的** 网格控件[Telerik ASP.NET Grid](http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/usercontroleditform/defaultcs.aspx)的那种功能 。如果您的表单字段很多，您可以在 eidt/insert 上打开一个模式弹出窗口，否则 gridview 的内置编辑就可以了。

[使用模式弹出添加编辑更新gridview记录](http://www.aspsnippets.com/Articles/Add-Edit-Update-Records-in-GridView-using-Modal-Popup-in-ASP.Net.aspx)

# file-upload - 我可以将 Coldfusions cffile action="upload" 与图像目标 URL 一起使用吗？

> ID：11892397
> 
> 赞同：0
> 
> 时间：2012-08-09T21:42:46.890
> 
> 标签：file-upload, coldfusion, verification, cffile

在更改文件大小并将其存储到服务器之前，我需要遍历路径名和图像名称列表并验证文件是否存在并且是 jpg/png。

我想用这个：

```
 <cffile result="upload" action="upload" accept="image/jpeg, image/png" destination="#tempDirectory#" nameconflict="overwrite" />
    <cfset testFilePath = tempDirectory & upload.serverFile>
    <cfimage name="tempFile" action="read" source="#testFilePath#" />
    <cfif NOT isImageFile( testFilePath ) >
        <cfset fileDelete( testFilePath ) />
        <cfthrow type="FileNotFound" message="#tx_settings_icons_error_img#" />
    <cfelseif NOT listfindnocase(allow, upload.serverfileext) >
        <cfset fileDelete( testFilePath ) />
        <cfthrow type="FileNotFound" message="#tx_settings_icons_error_file#" />
    </cfif> 
```

但我的问题是，我不知道如何从路径上传文件

```
 http://www.some.com/folder/image.jpg 
```

**问题**：
我可以只`read`图像，执行我的验证然后存储到磁盘还是我需要先上传图像。我将不得不遍历一个包含 500 个图像的列表，并且正在阅读`cffile action="read"`不应该与大文件一起使用。`isImage`检查图像文件的正确类型和文件扩展名的替代方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T22:14:24.923

我通常`cfhttp`用来读取图像并验证我是否拥有它，然后转换为有效`cfimage`对象并进行操作。你可以在[这个问题](https://stackoverflow.com/questions/1536815/convert-an-image-from-cfhttp-filecontent-to-binary-data-with-coldfusion/1537433#1537433)的答案中看到我的过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T21:56:55.927

使用 cfimage 从 URL 读取文件。将源设置为该 URL。然后，您可以将其写入本地磁盘。

代码示例：

```
<cfset imageData = ImageRead("http://tutorial28.learncf.com/img/bgHead.png") />
<cfimage action="write" source="#imageData#" destination="#expandPath('test.png')#" /> 
```

# iphone - 添加到self.view后可以立即释放哪些对象

> ID：11892407
> 
> 赞同：0
> 
> 时间：2012-08-09T21:43:40.150
> 
> 标签：iphone, objective-c, ios

在一个测试程序中，我在 (void)loadview 中以编程方式初始化了 2 个 UITextFields、2 个 UILabels、1 个 UITextView 和 1 个 UIButton，并且我尝试在 loadview 的最后 [self.view addSubview:controlname] 之后立即释放它们。除了 UIButton 之外，它们都可以正常工作。那么我应该什么时候释放按钮呢？我想知道哪些对象可以立即释放添加到self.view？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:52:29.083

我假设您正在使用 UIButton 的 +(id)buttonWithType: 创建按钮，如果是这种情况，则不应释放它。

我还建议使用 ARC，这样您就不必担心这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:01:12.267

好吧，释放或不释放取决于您是否拥有该对象，这取决于您如何创建对象，来自[内存管理策略](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)：

**您拥有您创建的任何对象**：您使用名称以“alloc”、“new”、“copy”或“mutableCopy”开头的方法创建对象（例如，alloc、newObject 或 mutableCopy）。

因此，如果您使用其他方法（不以这些词开头的方法）创建了对象，那么您不应该释放它，因为您不拥有它。

# sql-server - SQL Server 事件通知和服务代理 - 多台服务器的最低要求？

> ID：11892413
> 
> 赞同：1
> 
> 时间：2012-08-09T21:44:03.667
> 
> 标签：sql-server, service-broker

我试图找出使用服务代理将 SQL Server 事件通知发送到单独服务器的最简单方法。我已经在每台服务器上建立了一个端点，在每台服务器上建立了一个队列，处理对话和合同以及激活......但我需要这些吗？

`CREATE EVENT NOTIFICATION`说它可以将通知 XML 发送到“目标服务” - 所以我可以在“发送”服务器上创建一个指向“接收服务器”上的队列的合同，并在那里使用激活吗？

还是我需要将其发送到本地队列，然后转发到接收服务器的队列？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:01:40.610

You can target the remote service, but you have to have the ROUTEs defined for bidirectional communication so that you get the Acknowledgement message back. I once had a script for creating a centralized processing server for all Event Notifications, and the other servers targeted it's service. If I can find it I'll post it on my blog and update this with a link.

# json - RestSharp 可以处理字节数组吗？

> ID：11892414
> 
> 赞同：3
> 
> 时间：2012-08-09T21:44:11.320
> 
> 标签：json, serialization, restsharp

我正在使用 RestSharp。我使用 XML 作为数据的传输编码，但后来我[遇到了问题](https://stackoverflow.com/q/11799750/98422)，所以我改用 JSON。现在我也有这个问题！

一切都很好，直到我尝试传递一个包含字节数组 (*) 的对象。现在我收到一个反序列化错误，抱怨“对象没有无参数构造函数”。（服务器返回的 JSON 看起来很干净——它只是没有被 RestSharp 正确反序列化）。

我知道我[不是唯一一个有问题的人](https://stackoverflow.com/questions/10890790/restsharp-deserialize-json-contentrepresent-an-object-contains-an-byte-array-e)。除了该帖子中建议的婴儿洗澡水方法之外，没有其他解决方案吗？

(*) 在我开发的早期，我用一个小的手动编码字节数组对其进行了测试，只是为了检查它是否有效。它*当时确实*有效，但现在无效。我不知道这是由于数组的大小、数组中的“字符”还是什么。该死，这真是一个时间沉没！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:07:27.423

对于其他为此苦苦挣扎的人，我最终只是将 JSON 格式化程序换成了 JSON.NET。这样可行。

# xhtml - 在 Liquid 模板中将文本转换为段落

> ID：11892420
> 
> 赞同：2
> 
> 时间：2012-08-09T21:44:39.043
> 
> 标签：xhtml, template-engine, liquid, shopify

我正在尝试使用 Liquid 模板语言将原始字符串转换为 html。我想要做的是转换这个：

```
Hello. This
is a text.

Please convert me. 
```

进入这个：

```
<p>Hello. This<br />
is a text.</p>
<p>Please convert me.</p> 
```

**我试过的**

```
{{ mytextvariable | newline_to_br | replace: "<br />\n<br />", "</p><p>" | replace: "<p></p>", "" | prepend: '<p>' | append: '</p>' }} 
```

但这给了我（注意 double `<br />`）：

```
<p>Hello. This<br />
is a text.<br />
<br />
Please convert me.</p> 
```

**网站说明**

这将用于 Shopify 网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:41:10.870

使用 newline_to_br 时，您正在用中断标记替换新行，因此第一个替换不会替换任何内容，换行已消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:52:35.753

据我所知，Liquid 不支持正则表达式，因此 replace:`"<br />\n<br />"`可能会按字面意思解释。

作为新过滤器可能更容易实现？

......这样的事情：

```
def newline_to_p_or_br(input)
  input.to_s.gsub(/(.*?)\n\n/, "<p>\1</p>").gsub(/\n/, "<br />\n")
end 
```

以下是`newline_to_br`供参考的定义： [http ://rubydoc.info/gems/liquid/2.2.2/Liquid/StandardFilters:newline_to_br](http://rubydoc.info/gems/liquid/2.2.2/Liquid/StandardFilters:newline_to_br)

# c# - 无法按索引访问 DataGridViewRow 单元格

> ID：11892421
> 
> 赞同：1
> 
> 时间：2012-08-09T21:44:50.843
> 
> 标签：c#, datagridview

我正在尝试遍历 a 中的两列`DataGridView`并将它们添加到如下坐标中

```
foreach (DataGridView row in dataGridView1.Rows)
{
    double x = Convert.ToDouble(row["X"]);
    double y = Convert.ToDouble(row["Y"]);
    Coordinate c = new Coordinate(x, y);
    Point p = new Point(c);
    IFeature currentFeature = fs.AddFeature(p);
    for (int i = 0; i < dataGridView1.Columns.Count; i++)
    {
        currentFeature.DataRow[i] = row[i];
    }
} 
```

但我遇到以下错误：

> 无法使用 [] 将索引应用于“System.Windows.Forms.DataGridViewRow”类型的表达式

你能告诉我为什么会这样吗？

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T21:48:49.857

这相当简单——`DataGridViewRow`类不公开索引器。您需要通过其`Cells`集合访问单元格。`row.Cells[i]`应该可以解决问题：

```
for (int i = 0; i < dataGridView1.Columns.Count; i++)
{
   currentFeature.DataRow[i] = row.Cells[i].Value as IConvertible;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T21:49:34.117

`DataGridViewRow`不是收藏。您需要在`Cells`集合上运行它:)

# asp.net - ASP.NET：无法加载类型

> ID：11892429
> 
> 赞同：2
> 
> 时间：2012-08-09T21:45:49.870
> 
> 标签：asp.net, vb.net, visual-studio, master-pages

我收到以下错误：

```
Could not load type 'Intel.Intel'. 
```

在格式化计算机之前，我复制了整个 Visual Studio 2010 文件夹，并在再次安装 Windows 后复制/替换了同一个文件夹。我在本地而不是在主机服务器上运行它。有人知道我在做什么错吗？我搜索了谷歌并找到了许多提供解决方案的页面，但似乎没有一个可以解决我的问题。如果我需要提供更多额外信息，请告诉我。谢谢！

**更新：**对不起，我不清楚我从我的文档下复制了“Visual Studio 2010”文件夹。我已经从我的 MSDN 帐户安装了 Visual Studio 2010 Premium。

**更新 2：**我也忘记了在无法加载类型错误之前我在下面收到此错误。我通过用“。”替换“〜”来修复它。奇怪的是，虽然这似乎可以解决这个错误——如果我在重新输入“MasterPageFile=”时尝试通过“Pick Master..”选项定位文件，它会给我带有 tilda 的路径，但它不会工作. 我不知道这是否有助于确定整体问题。

```
The file '/Intel.Master' does not exist. 
```

下面注意“~/Intel.Master”——如上所述，我可以通过将其更改为“./Intel.Master”来摆脱这个错误

```
<%@ Page Title="" Language="vb" AutoEventWireup="false" MasterPageFile="~/Intel.Master" CodeBehind="Index.aspx.vb" Inherits="Intel.Index" %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T22:12:48.947

找到了解决方案。

我查看了 IIS 管理器，发现我的应用程序是文件夹图标而不是应用程序图标。所以我右键单击它并选择“转换为应用程序”。这样做之后，它解决了这个错误，现在我有了另一个错误。然而，我觉得这个解决方案确实“解决”了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T21:50:24.030

以这种方式安装会缺少一堆注册表设置。还有一些组件（共享）安装在 VS2010 文件夹之外。

您最好的选择是以通常（来自媒体）的方式重新安装 Studio。

基于编辑：

丢失的类型看起来像是以前存储在 GAC 中的。删除项目中的引用并重新创建引用实际程序集文件 (DLL)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:56:08.980

要将引用添加回您的项目，请打开您的项目，下拉您的解决方案文件夹，然后您的项目 - 找到引用节点，右键单击它选择添加引用，转到浏览.net 程序集和/或文件选项卡，具体取决于dll是，找到你的dll并双击它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-13T16:28:13.220

替换`CodeBehind`By`CodeFile`并删除命名空间。在`Inherits`类名之前。例如：

错误的：

```
<%@ Page Title="" Language="vb" AutoEventWireup="false"
MasterPageFile="~/Intel.Master" **CodeBehind**="Index.aspx.vb"
Inherits="**Intel.Index**" %> 
```

对：

```
<%@ Page Title="" Language="vb" AutoEventWireup="false" MasterPageFile="~/Intel.Master" **CodeFile**="Index.aspx.vb"
Inherits="**Index**" %> 
```

我保证它有效

# html - html5互动视频

> ID：11892434
> 
> 赞同：0
> 
> 时间：2012-08-09T21:46:04.543
> 
> 标签：html, video, actionscript, canvas

我是 actionScript 编程的新手。我知道一些html，我目前正在学习html5。我需要通过将 html 内容放在视频的特定时间来制作交互式视频。我会更简洁：

例如，我有一个 5 分钟长的视频，假设从第二个 3:50 到 4:00 我需要在视频上显示两个框，每个框代表一个选择。如果在 3:50，视频向观看者显示了在两条路径中进行选择的可能性（例如，视频告诉用户在这些路径中进行选择），则观看者将有可能通过单击其中一条路径来选择其中一条路径将出现在该时间间隔内的两个框。我知道这需要使用标签和超链接进行。

我的问题是如何告诉 html5 视频播放器从 3:50 分钟到 4:00 分钟显示一个画布，其中将显示两个超链接？

感谢您的关注，我将非常感谢您的帮助。我需要一些指导，因为我已经找了很多天了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-19T10:21:07.520

对于您的用例，您似乎希望能够通过跳转到视频中不同时间的交互来控制用户的视频流。

使用 html5 视频播放器在视频中寻找不同的时间（使用[currentTime](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement)），您可以在放置在视频顶部的框上创建单击事件，并设置单击该框的时间，使用：

```
// Jump 30 seconds into the video
var time = '30';
var video = document.createElement('video');
video.src = "video.mp4";

// Set the time
video.currentTime = time;
video.play(); 
```

您可以查看我们如何使用 html5 和 JS 创建[交互式视频创作工具](https://github.com/h5p/h5p-interactive-video/tree/master/scripts)（开源）并使用它。

如果您不想花时间编写交互式视频，您应该通过这个[简单的示例](https://h5p.org/interactive-video)查看 H5Ps 创作工具。[您也可以在H5P.org](https://h5p.org/node/add/h5p-content)上测试自己的创建。该工具是完全免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T10:21:27.480

我可能错了，但我相信你的意思是 javascript 而不是 actionscript。如果是这种情况，那么我肯定会检查一下[Video.JS](http://videojs.com/docs/api/)。当您到达当前时间时，您会触发您的方法/功能，该方法/功能会在视频顶部添加您想要的任何内容。

> var whereYouAt = myPlayer.currentTime();

但是，如果您的意思是动作脚本，那么您正在使用 Flash 播放器。因此我建议你看看这个[Vimeo Player](http://developer.vimeo.com/player/as-api)

> currentTime:Number [只读]​​ 返回视频的当前播放时间。

# git - Git svn 没有检查它应该检查的所有内容

> ID：11892436
> 
> 赞同：0
> 
> 时间：2012-08-09T21:46:11.957
> 
> 标签：git, git-svn

我使用 git svn（版本 1.7.10.msysgit.1）通过以下步骤签出存储库：

在 Windows 7 上使用 git bash 的新目录中

1）`git svn init "https://source/svn/repository/...pathToRepo..../trunk"` （我只关心主干 - 回购太大而无法完全接受，我对它毫无用处）。

2）`git svn fetch -r HEAD`（因为我也不关心任何历史）

我的问题是，虽然这似乎可以正常工作并干净地退出，但我的版本中缺少几个文件！如果我`tortoise-svn`过去检查 repo，我会得到一切。我本来希望他们两个都返回相同的结果。丢失的文件是一些 python 文件和一些 .png 文件。丢失的文件集总是相同的。我想不出这些文件有什么特别的原因。它们分布在几个目录中，我正在使用`kdiff3`（并手动验证）它们确实不同。

编辑：他们是 svn 外部

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:14:54.640

git-svn 不支持开箱即用的外部。 [此答案](https://stackoverflow.com/questions/350651/how-do-i-keep-an-svnexternal-up-to-date-using-git-svn)描述了一种可能对您有用的解决方法。

# c++ - 你如何在 DirectX 和 C++ 中做 LoD？

> ID：11892437
> 
> 赞同：0
> 
> 时间：2012-08-09T21:46:23.640
> 
> 标签：c++, optimization, directx, models

我加载了 4 个单元格，我想知道如何制作它，以便它以低细节显示。任何人都知道如何做到这一点？我不需要你做距离之类的事情。告诉我如何将单元格置于低 LoD 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:51:49.547

（带有基本的 dirextX 功能）

对于纹理，使用 IDirect3DBaseTexture9::SetLOD
对于网格，请参见名为 ProgressiveMesh 或 Tessellation 的 directx 示例

# c# - 使用 C# .NET 使用 Soundcloud API 连接和上传曲目

> ID：11892440
> 
> 赞同：7
> 
> 时间：2012-08-09T21:46:44.800
> 
> 标签：c#, .net, api, audio, soundcloud

我正在尝试使用 C#.NET 将音轨上传到 Soundcloud.com，但在任何地方都没有任何 .NET 资源。有人可以发布如何使用 .NET 将音频文件上传到我的 Soundcloud.com 帐户的链接或示例吗？

谢谢你，阿曼

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T21:58:56.503

要使用 soundcloud 的 REST API 上传音频，您需要处理与 HTTP POST 相关的问题 (RFC 1867)。一般来说，ASP.NET 不支持使用 POST 发送多个文件/值，所以我建议你使用 Krystalware 库：[http ://aspnetupload.com/Upload-File-POST-HttpWebRequest-WebClient-RFC-1867.aspx](http://aspnetupload.com/Upload-File-POST-HttpWebRequest-WebClient-RFC-1867.aspx)

之后，您需要将正确的表单字段发送到[https://api.soundcloud.com/tracks](https://api.soundcloud.com/tracks) url：

*   身份验证令牌 (oauth_token)
*   曲目标题（曲目[标题]）
*   文件 (track[asset_data])

示例代码：

```
using Krystalware.UploadHelper;
...

System.Net.ServicePointManager.Expect100Continue = false;
var request = WebRequest.Create("https://api.soundcloud.com/tracks") as HttpWebRequest;
//some default headers
request.Accept = "*/*";
request.Headers.Add("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.3");
request.Headers.Add("Accept-Encoding", "gzip,deflate,sdch");
request.Headers.Add("Accept-Language", "en-US,en;q=0.8,ru;q=0.6");

//file array
var files = new UploadFile[] { 
    new UploadFile(Server.MapPath("Downloads//0.mp3"), "track[asset_data]", "application/octet-stream") 
};
//other form data
var form = new NameValueCollection();
form.Add("track[title]", "Some title");
form.Add("track[sharing]", "private");
form.Add("oauth_token", this.Token);
form.Add("format", "json");

form.Add("Filename", "0.mp3");
form.Add("Upload", "Submit Query");
try
{
    using (var response = HttpUploadHelper.Upload(request, files, form))
    {
        using (var reader = new StreamReader(response.GetResponseStream()))
        {
            lblInfo.Text = reader.ReadToEnd();
        }
    }
}
catch (Exception ex)
{
    lblInfo.Text = ex.ToString();
} 
```

示例代码允许您从服务器上传音频文件（注意 Server.MapPath 方法来形成文件的路径）并获得 json 格式的响应（reader.ReadToEnd）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-11T12:50:13.303

这是通过 SoundCloud API 上传曲目的代码片段 =>

```
 using (HttpClient httpClient = new HttpClient()) {
            httpClient.DefaultRequestHeaders.ConnectionClose = true;
            httpClient.DefaultRequestHeaders.UserAgent.Add(new ProductInfoHeaderValue("MySoundCloudClient", "1.0"));
            httpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
            httpClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("OAuth", "MY_AUTH_TOKEN");
            ByteArrayContent titleContent = new ByteArrayContent(Encoding.UTF8.GetBytes("my title"));
            ByteArrayContent sharingContent = new ByteArrayContent(Encoding.UTF8.GetBytes("private"));
            ByteArrayContent byteArrayContent = new ByteArrayContent(File.ReadAllBytes("MYFILENAME"));
            byteArrayContent.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
            MultipartFormDataContent content = new MultipartFormDataContent();
            content.Add(titleContent, "track[title]");
            content.Add(sharingContent, "track[sharing]");
            content.Add(byteArrayContent, "track[asset_data]", "MYFILENAME");
            HttpResponseMessage message = await httpClient.PostAsync(new Uri("https://api.soundcloud.com/tracks"), content);

            if (message.IsSuccessStatusCode) {
                ...
            } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-30T11:50:31.707

这是另一种使用 C# 获取非过期令牌并将音轨上传到 SoundCloud 的方法：

```
public class SoundCloudService : ISoundPlatformService
{
    public SoundCloudService()
    {
        Errors=new List<string>();
    }

    private const string baseAddress = "https://api.soundcloud.com/";

    public IList<string> Errors { get; set; }

    public async Task<string> GetNonExpiringTokenAsync()
    {
        using (var client = new HttpClient())
        {
            client.BaseAddress = new Uri(baseAddress);
            var content = new FormUrlEncodedContent(new[]
            {
                new KeyValuePair<string, string>("client_id","xxxxxx"),
                new KeyValuePair<string, string>("client_secret","xxxxxx"),
                new KeyValuePair<string, string>("grant_type","password"),
                new KeyValuePair<string, string>("username","xx@xx.com"),
                new KeyValuePair<string, string>("password","xxxxx"),
                new KeyValuePair<string, string>("scope","non-expiring")
            });

            var response = await client.PostAsync("oauth2/token", content);

            if (response.StatusCode == HttpStatusCode.OK)
            {
                dynamic data = JsonConvert.DeserializeObject(await response.Content.ReadAsStringAsync());
                return data.access_token;
            }

            Errors.Add(string.Format("{0} {1}", response.StatusCode, response.ReasonPhrase));

            return null;
        }
    }        

    public async Task UploadTrackAsync(string filePath)
    {
        using (var client = new HttpClient())
        {
            client.BaseAddress=new Uri(baseAddress);

            var form = new MultipartFormDataContent(Guid.NewGuid().ToString());

            var contentTitle = new StringContent("Test");
            contentTitle.Headers.ContentType = null;
            form.Add(contentTitle, "track[title]");

            var contentSharing = new StringContent("private");
            contentSharing.Headers.ContentType = null;
            form.Add(contentSharing, "track[sharing]");

            var contentToken = new StringContent("xxxxx");
            contentToken.Headers.ContentType = null;
            form.Add(contentToken, "[oauth_token]");

            var contentFormat = new StringContent("json");
            contentFormat.Headers.ContentType = null;
            form.Add(contentFormat, "[format]");

            var contentFilename = new StringContent("test.mp3");
            contentFilename.Headers.ContentType = null;
            form.Add(contentFilename, "[Filename]");

            var contentUpload = new StringContent("Submit Query");
            contentUpload.Headers.ContentType = null;                                
            form.Add(contentUpload, "[Upload]");

            var contentTags = new StringContent("Test");
            contentTags.Headers.ContentType = null;
            form.Add(contentTags, "track[tag_list]");

            var bytes = File.ReadAllBytes(filePath);                
            var contentFile = new ByteArrayContent(bytes, 0, bytes.Count());                
            contentFile.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
            form.Add(contentFile, "track[asset_data]", "test.mp3");

            var response = await client.PostAsync("tracks", form);                
        }
    }
} 
```

# iphone - 无法在 Xcode 中打开 XIB

> ID：11892441
> 
> 赞同：0
> 
> 时间：2012-08-09T21:46:53.623
> 
> 标签：iphone, objective-c, xcode, macos, xcode4.4

当我尝试为我的一个应用程序编辑 xib 时，我从 Xcode 收到此消息。

> _无法打开文档“ViewController_iPhone.xib”。此版本的 Xcode 不支持 iOS 文档的自动布局。使用更新版本的 Xcode 编辑此文档。

我有 Xcode 版本“4.4”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:55:59.873

如果 XIB 文件最初是在 Xcode 版本 4.5+ 中创建的（目前的预览版本是 4.5），您可能会遇到这个问题。Auto Layout 是一项新功能，以前的旧版本 Xcode 不支持它。

转到开发人员门户并下载 4.5 Preview Xcode 并尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:40:39.110

简单的解决方案：

1.  右键单击 .xib 文件 -> 作为“源代码”打开。

2.  从 xib 源代码中查找和删除对象（一些 int/Hex）。

3.  保存存档。

4.  再次右键单击并以“Interface Builder”打开 xib。

它将打开您损坏的 .xib 文件，并且您不会丢失项目中的整个更新。

# css - 如何在我单击其中一个后隐藏 Bootstrap 下拉菜单选项 ?

> ID：11892448
> 
> 赞同：0
> 
> 时间：2012-08-09T21:47:35.910
> 
> 标签：css, drop-down-menu, twitter-bootstrap

在 Bootstrap 下拉菜单中，我想在单击其中一个选项时隐藏下拉选项。现在，当我单击其中一个选项时，我仍然可以看到这些选项。我只需要在没有 javascript 的情况下在 CSS 中这样做。这是小提琴：http: [//jsfiddle.net/2Smgv/](http://jsfiddle.net/2Smgv/) 谢谢。

# apache - 需要从 apache solr 查询搜索中忽略破折号（“ - ”）

> ID：11892449
> 
> 赞同：4
> 
> 时间：2012-08-09T21:47:37.560
> 
> 标签：apache, symfony1, solr, search-engine

我正在使用 apache solr 构建一个 Symfony 1.4 应用程序来搜索音乐数据库。我正在使用 tjSolrDoctrineBehaviorPlugin 将 apache solr 移植到我的 Symfony 1.4 / Doctrine 1.2 应用程序。我是使用 apache solr 的新手。

我遇到的问题是，当我输入字符串“Katy Perry - Firework”时，我只得到“Katy Perry”的结果，而且查询中破折号“-”之后的所有内容似乎都被忽略了。如果我只输入“KatY Perry Firework”，则搜索工作正常，并检索到确切的歌曲。我不确定为什么破折号会扰乱搜索。我认为 WordDelimiterFilterFactory 会丢弃非字母数字字符。我的参数错了吗？

我如何使用标记器/过滤器来忽略破折号或“ - ”（空格破折号空格）字符串，因为我很确定用户会在搜索栏中大量使用破折号来描绘来自艺术家（“ - ”）的歌曲。

这是我的 schemal.xml：

```
 <fieldType name="text" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <!-- in this example, we will only use synonyms at query time
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    -->
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <!-- <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/> -->
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
  </analyzer>
</fieldType> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:11:18.993

某些字符在 Lucene (Solr) 中具有特殊功能。[阅读本文](http://lucene.apache.org/core/3_6_0/queryparsersyntax.html#Escaping%20Special%20Characters)以了解哪些以及如何逃脱它们。

# ruby - 红宝石中的英语单词（一，二，三）到数字（1,2,3）

> ID：11892451
> 
> 赞同：1
> 
> 时间：2012-08-09T21:47:47.010
> 
> 标签：ruby, numbers, words

我正在尝试将单词/字符串转换为 Ruby 中的数字，例如：-

```
ONE => 1 
TWO => 2  
THREE => 3 
FOUR => 4 
etc... 
```

我已经看到了很多其他的例子（数字到单词）；但是，我找不到如何将单词转换为数字的示例。如果我能对此有任何见解或帮助，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:03:22.593

这可能会有所帮助：[http ://www.rubyquiz.com/quiz25.html](http://www.rubyquiz.com/quiz25.html)

编辑：错误地阅读问题。根据我在下面的评论，这是一种可以解决此问题的方法。

如果 num_to_word(number) 是您将数字转换为单词的方法：

```
def number_hash_creator(min, max)
    number_hash = {}
    for num in (min..max)
        number_hash[num_to_word(num)] == num
    end
    number_hash
end 
```

然后执行以下操作：

```
number_hash = number_hash_creator(min, max) # min and max are whatever you need them to be

number_hash['three']
=> 3 
```

您还可以将类似的方法附加到字符串类，以便您可以执行以下操作`"three".to_number`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:03:36.463

我为所有单词创建了一个最多二十个的哈希值，并且只为十个（三十、四十、五十等）。使用 Reg-ex 去掉两个单词并添加它们，例如 22 是 20+2=22 的加法；现在我的脚本只能工作到一百，但它可以扩展到超过 100 的数字等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T23:38:49.287

我认为您会发现本教程非常有趣，尤其是底部附近的代码：

[http://pine.fm/LearnToProgram/?Chapter=08](http://pine.fm/LearnToProgram/?Chapter=08)

# iphone - 自我没有在块中被捕获

> ID：11892453
> 
> 赞同：0
> 
> 时间：2012-08-09T21:48:00.213
> 
> 标签：iphone, ios, ios5, objective-c-blocks

我有一个问题，我的块没有捕获它周围的实例变量。这是代码：

```
__block NSArray *oldArray = self.savedArray;
viewController.block = ^(NSArray *array) {
    NSLog(@"array: %@", array);
    NSLog(@"oldArray: %@", oldArray); // CRASH
    NSLog(@"self: %@", self); // CRASH
}; 
```

正在调用我的块，但如果我尝试访问 self 或任何实例变量，应用程序就会崩溃。另外，我试图专门打电话`__block`，但没有帮助。

除了数组（来自块）和 .block_descriptor 之外，这些也没有显示在变量视图中的变量。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:45:27.447

它必须是您的属性定义。我刚刚编码并转储了您拥有的代码：

```
@property (strong, nonatomic) void (^b)(NSArray *a);
@property (strong, nonatomic) NSArray *array;
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    array = @[ @"1", @"2", @"3" ];

    __block NSArray *oldArray = array;
    b = ^void(NSArray *a) {
                NSLog(@"array: %@", a);
                NSLog(@"oldArray: %@", oldArray); // CRASH
                NSLog(@"self: %@", self); // CRASH
            };

    dispatch_async(dispatch_get_main_queue(), ^{ b(oldArray);}  );
}
2012-08-09 18:18:04.259 Searcher[49816:f803] array: (
    1,
    2,
    3
)
2012-08-09 18:18:04.260 Searcher[49816:f803] oldArray: (
    1,
    2,
    3
)
2012-08-09 18:18:04.261 Searcher[49816:f803] self: <ViewController: 0x6884550> 
```

# scala - 递归定义类型中的 Scala 和 == 方法

> ID：11892455
> 
> 赞同：7
> 
> 时间：2012-08-09T21:48:13.140
> 
> 标签：scala

我知道`==`Scala 中的方法与 Java 中的 equals 方法具有相同的语义。但是，我想了解何时应用于递归结构的实例。例如，考虑一堆表达式：

```
abstract class Exp

abstract class BinaryExp(l:Exp, r:Exp) extends Exp

case class Plus(l:Exp, r:Exp) extends BinaryExp(l,r)

case class Minus(l:Exp, r:Exp) extends BinaryExp(l,r)

case class Mult(l:Exp, r:Exp) extends BinaryExp(l,r)

case class Div(l:Exp, r:Exp) extends BinaryExp(l,r)

case class Num(v:Int) extends Exp 
```

那么，当我有两个实例 a`BinaryExp`时，比如说`obj1`and `obj2`，是否会`obj1 == obj2`导致深度（递归）相等测试？也就是说，是否保证 if`obj1 == obj2`成立，然后`obj1`和`obj2`表示相同的精确表达式树？

请注意，在所有类中，我都依赖于`==`（它不会在任何地方被覆盖）的默认实现。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T21:53:29.870

这很容易测试自己：

```
val x = Plus(Num(1), Num(2))
val y = Plus(Num(1), Num(2))
val z = Plus(Num(1), Num(3))

println(x == y) // prints true
println(x == z) // prints false 
```

这些给出正确答案的事实表明相等性检查正在检查子表达式的“深度”相等性。

此外，您可以在[文档](http://www.scala-lang.org/node/107)中看到：

> 对于每个案例类，Scala 编译器都会生成实现**结构相等的 equals 方法**

“结构相等”是您想知道的那种深度相等检查。

最后，如果你真的想看看语法糖之外发生了什么，你可以`-xPrint:typer`在运行`scalac`或启动 REPL 时使用该选项。如果您将该选项与 REPL 一起使用，然后声明 class `Plus`，您会得到以下结果（缩短）：

```
scala> case class Plus(l:Exp, r:Exp) extends BinaryExp(l,r)
[[syntax trees at end of typer]]// Scala source: <console>
...
case class Plus extends $line2.$read.$iw.$iw.BinaryExp with ScalaObject with Product with Serializable {
  ...
  override def equals(x$1: Any): Boolean = Plus.this.eq(x$1.asInstanceOf[java.lang.Object]).||(x$1 match {
    case (l: $line1.$read.$iw.$iw.Exp, r: $line1.$read.$iw.$iw.Exp)$line3.$read.$iw.$iw.Plus((l$1 @ _), (r$1 @ _)) if l$1.==(l).&&(r$1.==(r)) => x$1.asInstanceOf[$line3.$read.$iw.$iw.Plus].canEqual(Plus.this)
    case _ => false
  }); 
```

所以，埋在第一个`case`你会看到它是为了检查平等`Plus.equals`而调用的。`if l$1.==(l).&&(r$1.==(r))`换句话说，case 类的生成相等方法调用`==`它的子表达式来检查它们的相等性。

# php - PHP Cookie 未在表单提交上设置

> ID：11892457
> 
> 赞同：0
> 
> 时间：2012-08-09T21:48:23.007
> 
> 标签：php, forms, post, cookies

所以这是交易。我有一个登录表单，我可以用 Jquery 设置 cookie，但我的雇主希望它用 php 完成。所以我试图这样做。

这是我的表格

```
<?php if(!isset($_POST['commit'])){
     echo "<a id='loginbtn' class='btn dropdown-toggle loginbtn' href='#' data-toggle='dropdown'>Sign in <strong class='caret'></strong></a>";
     echo "<div id='loggedout' class='dropdown-menu' style='padding: 15px; padding-bottom: 0px;'>";
         echo "<form name='LoginForm' id='LoginForm' action=''  method='post' accept-charset='UTF-8'>";
             echo "<input id='user_username' style='margin-bottom: 15px; height:25px;' type='text' name='username' size='30' value='Username' />";
             echo "<input id='user_password' style='margin-bottom: 15px; height:25px;' type='password' name='password' size='30' value='********' />";
             echo "<input class='btn btn-primary' id='login' style='clear: left; width: 100%; height: 32px; font-size: 13px;' type='submit' name='commit' value='Sign In' />";
         echo "</form>";
     echo "</div>";
     }
?> 
```

当我尝试设置 cookie 时，它​​看起来像这样：

```
<?php
    if(isset($_POST['commit'])){
       $username= $_POST["username"];
       setcookie("TestCookie", $username, time()+3600, '/', 'mydomain.com');
    }
?>

    <!DOCTYPE html>
    <html class='wf-franklingothicurwcond-n5-active wf-franklingothicurwcond-n7-active wf-active' lang='en'> 
```

我曾一度将 $username 变量设为全局变量并将其输出到页面上，因此我知道这是可行的，但由于某种原因，cookie 不会设置。

任何帮助是极大的赞赏 ：）

编辑：

不知道这是否有任何区别，但我也在使用 Bootstrap

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:59:26.823

看起来好像您使用该`setcookie()`方法在 PHP 中正确设置了它。我的第一个猜测是服务器和本地时间之间可能存在的差异。

可能因为您和服务器位于不同的时区，此 cookie 一经设置就会过期？查看[设置时区](http://php.net/manual/en/function.date-default-timezone-set.php)和[支持的时区列表](http://php.net/manual/en/timezones.php)。

同样，从代码示例和解释来看，这只是一个猜测。也可能是您的浏览器未设置为接受 cookie 等...

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:11:27.473

Cookie 设置为 HTTP 标头的一部分，如果有任何其他输出先发送到浏览器，则无法成功设置。那么您的 cookie 页面中的 php 标签上方是否有任何空格或其他文本/html 内容？如果是这样，请将其删除并重试。

我建议首先制作一个单独的最小测试用例，其中只包含 cookie 内容，然后一旦你确信你可以正常工作，添加你的帖子逻辑。

# javascript - jQuery 和 Ajax 请求数据问题

> ID：11892458
> 
> 赞同：0
> 
> 时间：2012-08-09T21:48:38.373
> 
> 标签：javascript, jquery, ajax

我对这段代码有疑问：

```
setInterval(function() {
        var timed = $("#chMsgCont").find(".chatMsg:last-child");
        var timee = timed.attr("data");
        $.ajax({
            url: "./ajax/checknew.php",
            data: {timestamp: timee},
            success: function(data) {
                $("#chMsgCont").append(data);
                if(data != null) {
                var div = $('#chMsgCont');
                var o = div.offset().top; 
                div.scrollTop( o + 12302012 );
                }
            }
        });
    },1000); 
```

即使数据为空，`$("#chMsgCont)`向下滚动，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:51:52.477

试试这种方式：

```
if(data) 
```

或者这样：

```
if(data != null && data != "") 
```

基本上，`if(data)`在这些情况下被认为数据是错误的：

*   数据是 "" 或 '' => 空字符串

*   数据是假的

*   数据为空

*   数据未定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:50:51.817

`data`只是空的而不是`null`（未定义）所以它会通过，尝试在你的 PHP 文件中返回一些额外的东西。

我更喜欢在 PHP 端执行以下操作：

```
/* suppose that i am evaluating an insert to my DB */
print(1); //if success

print(0); //if error 
```

然后在 javascript 端，执行以下操作：

```
if(data == 1) //means success 
```

或者如果您没有在 PHP 端评估某些内容，则只需执行以下操作：

```
if(data != null && data != '') 
```

# javascript - 我们可以用来确保 Javascript 中精确精度的最大数字？

> ID：11892461
> 
> 赞同：1
> 
> 时间：2012-08-09T21:49:03.383
> 
> 标签：javascript

我一直无法找到一个直接的答案。我检查了规范，但没有看到任何定义精度的东西。

```
Number.MAX_VALUE
    1.7976931348623157e+308
a = 9007199254740992
a == a-1
    false
a+1
    9007199254740992
a+2
    9007199254740994
a*a
    8.112963841460668e+31   
a*a == ((a*a)-1)
    true
a*a == ((a*a)*a)
    false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:50:30.137

```
Math.pow( 2, 53 ) 
```

是最大的整数。之后，您开始失去整数的精度。

你可以在[这里](http://en.wikipedia.org/wiki/Double_precision)找到它：

> 有效位精度：53 位（显式存储 52 位）

至于“小数”，无论它们有多大或多小，您都永远不能依赖获得准确的结果。

```
0.1 + 0.2 === 0.30000000000000004 
```

顺便说一句，如果您正在寻找上述解决方法：

```
function round(num) {
     return Math.round( num * 1e9 ) / 1e9;
}

round(0.1 + 0.2) === 0.3 
```

# c#-4.0 - 更新DLL而不替换它？

> ID：11892467
> 
> 赞同：0
> 
> 时间：2012-08-09T21:49:27.183
> 
> 标签：c#-4.0, dll, patch

假设我有一个 100 MB 的 C# DLL。现在，如果我想更新这个 DLL，据我所知，我需要通过下载它来获取另一个 DLL，删除旧的 DLL，然后将这个新的 DLL 移动到它的位置以“更新”DLL（假设程序集的那个引用此 DLL 不关心 DLL 的版本）。

有没有办法创建一个文件，其中包含所有已更改的类和项目（仅已更改的内容）并重新编译 DLL 以进行这些更改，或者如何使用这些更改更新 DLL？

目标是通过小补丁更新 DLL，而无需重新下载整个 DLL。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:54:32.577

您使用与版本控制系统相同的机制 - 例如，SVN 很高兴地只存储不同二进制签入之间的更改，以及一些可以将 mb dll 转换为几 k 的 dll。（显然你的里程可能会改变）

通常二进制差异不如文本有效，这就是它不经常使用的原因，但它可以适用于某些人 - 它取决于二进制文件的布局方式，如果编译过程产生的东西通常相同，而不是完全不同。

您需要客户端上的一些代码来拉下更改，或者使用[gnu 补丁工具](http://gnuwin32.sourceforge.net/packages/patch.htm)，或者使用类似[Windows BITS](http://en.wikipedia.org/wiki/Background_Intelligent_Transfer_Service)的东西。

# php - 使用 PHP/MYSQL 书籍但在尝试访问数据库时没有从 PHP 获得输出

> ID：11892474
> 
> 赞同：-1
> 
> 时间：2012-08-09T21:49:44.967
> 
> 标签：php, mysql, mysqli

我目前正在研究“PHP 和 MySQL Web 开发”。我已经成功地创建了数据库，并且能够制作表格并使用数据库。我还成功地完成了有关 PHP 的所有章节，并且到目前为止，PHP 没有任何问题。此页面的目标是从数据库返回搜索结果。这是一件非常简单的事情，但由于某种原因，脚本没有向页面输出任何内容。我没有收到任何错误或任何东西。它只是空白，标题在顶部。谁能帮我解决这个问题？谢谢你。

这是PHP代码：

```
<html>
<head>
<title>Book-O-Rama Search Results</title>
</head>
<body>
<h1>Book-O-Rama Search Results</h1>
<?php
// create short variable names
$searchtype=$_POST['searchtype'];
$searchterm=trim($_POST['searchterm']);

 if (!$searchtype || !$searchterm) {
 echo 'You have not entered search details.  Please go back and try again.';
 exit;
 }

 if (!get_magic_quotes_gpc()){
 $searchtype = addslashes($searchtype);
 $searchterm = addslashes($searchterm);
 }

 @ $db = new mysqli('localhost', 'bookorama', 'bookorama123', 'books');

 if (mysqli_connect_errno()) {
 echo 'Error: Could not connect to database.  Please try again later.';
 exit;
 }

 $query = "select * from books where ".$searchtype." like '%".$searchterm."%'";
 $result = $db->query($query);

 $num_results = $result->num_rows;

 echo "<p>Number of books found: ".$num_results."</p>";

 for ($i=0; $i <$num_results; $i++) {
 $row = $result->fetch_assoc();
 echo "<p><strong>".($i+1).". Title: ";
 echo htmlspecialchars(stripslashes($row['title']));
 echo "</strong><br />Author: ";
 echo stripslashes($row['author']);
 echo "<br />ISBN: ";
 echo stripslashes($row['isbn']);
 echo "<br />Price: ";
 echo stripslashes($row['price']);
 echo "</p>";
 }

 $result->free();
 $db->close();

 ?>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:08:14.210

您正在抑制该行中的错误：

```
@ $db = new mysqli('localhost', 'bookorama', 'bookorama123', 'books'); 
```

这就是@ 符号的作用，删除@ 符号并验证连接是否正常工作，可能是您的脚本在那里失败。

你不应该使用它，据我所知，这不被认为是好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:00:24.010

您需要创建另一个发送发布请求的 php 页面。这是一个示例：

看看小提琴：

```
<html>
<head>
<title>Book-O-Rama Search </title>
</head>
<body>
<h1>Book-O-Rama Search</h1>

<form id='uploadform' method='post' enctype='multipart/form-data' action='link to your search action php page'>
<legend>Submit form</legend><br/>
<div class='form-inputs'>
    SearchType <input name='searchtype' id='searchtype'/><br>
    SearchTerm <input name='searchterm' id='searchterm'/><br>
    <input type="submit" value= "Search" />
</div>
</form>

</body>
</html>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T22:08:16.287

它对我有用！没有白页！如果您使用包含 ftp 的编辑器，有时保存文件会失败。比你得到一个空白文件。在这种情况下，请保护您的代码并重新打开文件。

至于sql注入试试这个：

```
 $searchtypes = array('type1','type2');
 if (!in_array($searchtype,$searchtypes) || $searchterm=='') {
      echo 'You have not entered search details.  Please go back and try again.';
      exit;
 } 
```

# android - TimePickerDialog 不显示/显示

> ID：11892475
> 
> 赞同：1
> 
> 时间：2012-08-09T21:49:46.767
> 
> 标签：android, timepicker

我有一个 TimePickerDialog，我想在用户按下按钮时显示它，以便她可以选择一个时间来将显示设置为（当前时间以外的某个时间）。当前，当按下按钮时，当前时间显示在 TextView 和 Toast 中。屏幕也会变暗，屏幕中央会出现一个小框。TimePickerDialog 不会向用户显示。

这是代码；

```
import java.util.Calendar;
import android.os.Bundle;
import android.app.Activity;
import android.app.Dialog;
import android.app.TimePickerDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.support.v4.app.DialogFragment;
import android.support.v4.app.FragmentActivity;
import android.text.format.DateFormat;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.TimePicker;
import android.widget.Toast;

public class AddAlarmActivity extends FragmentActivity implements TimePickerDialog.OnTimeSetListener, TimePickerDialog.OnDismissListener {

Button setTime;
public int hour_local;
public int minute_local;
public Dialog onCreateDialog;
public TimePicker timePicker;
public TextView displayAlarm;

static final int TIME_DIALOG_ID = 999;

@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_add_alarm);
    //add a TextView thing to this part

    setTime = (Button) findViewById(R.id.button_set_time);
    displayAlarm = (TextView) findViewById(R.id.tvDisplayTime);

    setTime.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            onCreateDialog(savedInstanceState);
            showTimePickerDialog(timePicker);
            displayAlarm.setText(hour_local + ":" + minute_local);
        }
    }); 

}

public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the current time as the default values for the picker

    final Calendar c = Calendar.getInstance();
    hour_local = c.get(Calendar.HOUR_OF_DAY);
    minute_local = c.get(Calendar.MINUTE);

    Context context = getApplicationContext();
    CharSequence text = hour_local + ":" + minute_local;
    int duration = Toast.LENGTH_LONG;

    Toast toast = Toast.makeText(context, text, duration);
    toast.show();

    // Create a new instance of TimePickerDialog and return it
    return new TimePickerDialog(getApplicationContext(), this, hour_local, minute_local,
            DateFormat.is24HourFormat(getApplicationContext()));
}

public void showTimePickerDialog(View v) {
    DialogFragment newFragment = new DialogFragment();
    newFragment.show(getSupportFragmentManager(), "timePicker");
}

public void onDismiss(DialogInterface dialog){

    System.out.println("oui c'est très bon !");

}

public void onTimeSet(TimePicker view, int hour_l, int minute_l) {
   hour_local = hour_l;
   minute_local = minute_l;
    System.out.println("voila");
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:02:26.207

我建议您按照开发人员网站的方式进行操作：

*   创建一个处理对话框片段的静态类

    ```
    public static class TimePickerFragment extends DialogFragment
                            implements TimePickerDialog.OnTimeSetListener {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current time as the default values for the picker
        final Calendar c = Calendar.getInstance();
        int hour = c.get(Calendar.HOUR_OF_DAY);
        int minute = c.get(Calendar.MINUTE);

        // Create a new instance of TimePickerDialog and return it
        return new TimePickerDialog(getActivity(), this, hour, minute,
                DateFormat.is24HourFormat(getActivity()));
    }

    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        // Do something with the time chosen by the user
    }
    } 
    ```

*   在单击侦听器的按钮中调用此方法：

    ```
    public void showTimePickerDialog(View v) {
        DialogFragment newFragment = new TimePickerFragment();
        newFragment.show(getSupportFragmentManager(), "timePicker");
    } 
    ```

来源[在这里](http://developer.android.com/guide/topics/ui/controls/pickers.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T21:29:54.530

```
public class AddAlarmActivity extends FragmentActivity {

Button setTime;
public static int hour_local;
public static int minute_local;
public Dialog onCreateDialog;
public TimePicker timePicker;
public static TextView displayAlarm;
public static int hour_alarm;
public static int minute_alarm;

@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_add_alarm);

    setTime = (Button) findViewById(R.id.button_set_time);
    displayAlarm = (TextView) findViewById(R.id.tvDisplayTime);

    final Calendar c = Calendar.getInstance();
    hour_local = c.get(Calendar.HOUR_OF_DAY);
    minute_local = c.get(Calendar.MINUTE);
    displayAlarm.setText(hour_local + ":" + minute_local);

    setTime.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            showTimePickerDialog(timePicker);

        }
    });  
}

public void onTimeSet(TimePicker view, int hour_l, int minute_l) {
// intentionally blank
}

public void showTimePickerDialog(View v) {
    DialogFragment newFragment = new TimePickerFragment();
    newFragment.show(getSupportFragmentManager(), "timePicker");
}

/*New static class*/
public static class TimePickerFragment extends DialogFragment implements TimePickerDialog.OnTimeSetListener {

    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current time as the default values for the picker

        final Calendar c = Calendar.getInstance();
        hour_local = c.get(Calendar.HOUR_OF_DAY);
        minute_local = c.get(Calendar.MINUTE);

        Context context = getActivity();
        CharSequence text = hour_local + ":" + minute_local;
        int duration = Toast.LENGTH_LONG;

        Toast toast = Toast.makeText(context, text, duration);
        toast.show();

        // Create a new instance of TimePickerDialog and return it
        return new TimePickerDialog(getActivity(), this, hour_local, minute_local,
                DateFormat.is24HourFormat(getActivity()));
    }

    public void onTimeSet(TimePicker view, int hour_l, int minute_l) {
        hour_alarm = hour_l;
        minute_alarm = minute_l;

        displayAlarm.setText(hour_alarm + ":" + minute_alarm);
        }

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:18:38.363

```
TimePickerDialog dialog = new TimePickerDialog(this,OnTimeSet,DateTime.Now.Hour,DateTime.Now.Minute,true);
dialog.Show();

void OnTimeSet (object sender, TimePickerDialog.TimeSetEventArgs e)
{

} 
```

# xml - 获取错误“错误：解析 XML 时出错：未绑定前缀”

> ID：11892476
> 
> 赞同：1
> 
> 时间：2012-08-09T21:50:02.070
> 
> 标签：xml, android-layout

我收到一个错误“错误：解析 XML 时出错：未绑定前缀”我的 XML 文件如下所示。

```
<item xmlns:android="http://schemas.android.com/apk/res/android"
 android:title="About Us"   
 anroid:id="@+id/aboutUs"
 android:numericShortcut="1"
 android:alphabeticShortcut="a"/>

<item
 android:title="Preferences"   
 anroid:id="@+id/preferences" /> 
```

很长一段时间我都无法解决这个问题。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T21:51:45.640

你拼错`android`了两个地方。

# sql - 将 REAL 转换为 INT 并进行比较

> ID：11892489
> 
> 赞同：1
> 
> 时间：2012-08-09T21:50:45.110
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我将 a`real`转换为 an`int`并将 a`float`转换为 an`int`并像这样比较两者：

```
 where
  cast(a.[SUM(PAID_AMT)] as int)!=cast(b.PAID_AMT as int) 
```

但我仍然得到两者相等的结果。例如：

```
+-----------+-----------+------------+------------+----------+
|   accn    |  load_dt  |   pmtdt    | sumpaidamt | Bpaidamt |
+-----------+-----------+------------+------------+----------+
| A133312   | 6/7/2011  | 11/28/2011 | 98.39      | 98.39    |
| A445070   | 6/2/2011  | 9/22/2011  | 204.93     | 204.93   |
| A465606   | 5/19/2011 | 10/19/2011 | 560.79     | 560.79   |
| A508742   | 7/12/2011 | 10/19/2011 | 279.65     | 279.65   |
| A567730   | 5/27/2011 | 10/24/2011 | 212.76     | 212.76   |
| A617277   | 7/12/2011 | 10/12/2011 | 322.02     | 322.02   |
| A626384   | 6/16/2011 | 10/21/2011 | 415.84     | 415.84   |
| AA0000044 | 5/12/2011 | 5/23/2011  | 197.38     | 197.38   |
+-----------+-----------+------------+------------+----------+ 
```

这是完整的查询：

```
select 
  a.accn,
  a.load_dt,
  a.pmtdt,
  a.[SUM(PAID_AMT)] sumpaidamt,
  sum(b.paid_amt) Bpaidamt
  from
  [MILLENNIUM_DW_DEV].[dbo].[Millennium_Payment_Data_May2011_July2012] a
  join
  F_PAYOR_PAYMENTS_DAILY b
  on
  a.accn=b.ACCESSION_ID
  and
  a.final_rpt_dt=b.FINAL_REPORT_DATE
  and
  a.load_dt=b.LOAD_DATE
  and
  a.pmtdt=b.PAYMENT_DATE
  where
  cast(a.[SUM(PAID_AMT)] as int)!=cast(b.PAID_AMT as int) 

  group by 
    a.accn,

  a.load_dt,
  a.pmtdt,
  a.[SUM(PAID_AMT)] 
```

我究竟做错了什么？我如何只返回不相等的记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T22:03:53.023

我不明白为什么会有问题。

该查询返回b ( *sum* (b.paid_amt) Bpaidamt) 中的付款总和。where 子句是比较个人付款。这只是意味着有不止一次的付款。

也许您的意图是使用 HAVING 子句：

```
having cast(a.[SUM(PAID_AMT)] as int)!=cast(sum(b.PAID_AMT) as int) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:29:37.563

你可以做一个回合和一个演员声明。

`cast(round(sumpaidamt,2) as money) <> cast(round(Bpaidamt,2) as money)`

Sql Fiddle 展示了它是如何工作的[http://sqlfiddle.com/#!3/4eb79/1](http://sqlfiddle.com/#!3/4eb79/1)

# python - 在 scipy 中为 pdist 指定缺失值

> ID：11892491
> 
> 赞同：1
> 
> 时间：2012-08-09T21:50:58.670
> 
> 标签：python, numpy, matplotlib, scipy

`pdist`在 scipy 中调用时如何指定缺失值？即这里描述的功能：

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.pdist.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.pdist.html)

例如，如果您有：

```
pdist(X, "euclidean") 
```

但`X`可能包含诸如字符串之类的缺失值，并且您希望在's 列之间的`"NA"`成对比较中排除这些值。`X`我正在寻找的行为是在获取任何一对列之间的欧几里德距离时不考虑缺失值`X`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:41:14.220

最好的方法是用 np.nan 填充 X 数组以排除要排除的点。例如，假设具有 X a (10,2) 数组的二维情况：

```
import numpy as np
X = np.random.rand(10, 2) 
```

假设您想从计算中排除 X[7]：

```
X[7] = np.nan
my_dist = pdist(X, "euclidean") 
```

然后，您会看到 my_dist 对于涉及计算与排除元素的距离的对具有“nan”。您可以排除多个元素。

一个更好的主意是使用 numpy 掩码数组，但 pdist 会忽略掩码数组并使用数据。但是，一旦有了输出 my_dist，就可以将其转换为掩码数组，这样 nans 就不会妨碍未来的数组操作：

```
my_dist = np.ma.array(my_dist, mask = ~np.isfinite(my_dist)) 
```

# python - 已经安装了 pyzmq 但仍然收到“ImportError: No module named zmq”

> ID：11892497
> 
> 赞同：14
> 
> 时间：2012-08-09T21:51:28.840
> 
> 标签：python, ipython

我正在尝试让 ipython notebook 运行。我已经安装了 pyzmq。你知道为什么它仍然给出这个错误吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-09T22:06:02.897

您会看到该错误（手动安装 pyzmq）的唯一原因是 pyzmq 是否安装到与 ipython 运行位置不同的 pythonpath。

如果您按照安装说明进行操作，则应该没有问题：

```
easy_install ipython pyzmq tornado
# or
pip install ipython pyzmq tornado 
```

也有可能安装程序在另一个位置看到了已经满足的依赖项并且没有做任何事情，然后 ipython 可能正在使用没有看到它的不同 pythonpath 运行。您可以强制升级所有内容：

```
easy_install -U ipython pyzmq tornado 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-12T06:39:06.720

```
pip3 uninstall pyzmq
pip3 install pyzmq 
```

为我工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-30T18:14:26.943

尝试以下操作：

```
pip3 install --upgrade pip
pip3 install jupyter 
```

以上假设您已别名`pip`为`pip3`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-01T23:09:31.220

检查你在 python 上安装的版本

```
python --version 
```

当您运行该应用程序时，请确保您使用的**版本与**您安装它时使用的版本相同。

对我来说，问题是我为 python 3.6 安装了它，但在 python 2.7 下运行它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-19T13:35:49.897

我已经安装了所有软件包，它也显示在路径中，但确实抛出了同样的错误

```
jabira@ubuntu:~$ python
Python 2.7.3 (default, Feb 27 2014, 19:58:35) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> sys.path
['', '/usr/share/pyshared/zmq', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages', '/usr/lib/pymodules/python2.7']
>>> 
jabira@ubuntu:~$ ls /usr/share/pyshared/zmq/
core  devices  eventloop  green  __init__.py  log  ssh  tests  utils  web
jabira@ubuntu:~$ less /usr/share/pyshared/zmq/__init__.py 
jabira@ubuntu:~$ python
Python 2.7.3 (default, Feb 27 2014, 19:58:35) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import zmq
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named zmq
>>> 
jabira@ubuntu:~$ dpkg -l|grep zmq
ii  libzmq3                                 3.2.2+dfsg-1lucid                          lightweight messaging kernel (shared library)
ii  python-zmq                              2.2.0.1-1lucid3                            0MQ is a fast messaging library
jabira@ubuntu:~$ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-16T04:39:50.020

我有一个文件试图`import zmq`抛出：

`ModuleNotFoundError: No module named 'zmq'`

但是`pip install zmq`或者`pip install pyzmq`一直告诉我我已经安装了一个版本，因此`Requirement already satisfied`在 Library/blahblah/Python/3.6 ...

我已经别名`pip3`为`pip`，但尝试`pip3`也没有用

我最终不得不重置我的 $PYTHONPATH 并删除了我实际上不需要的 Python 3.6 安装。

在那之后`pip install pyzmq`仍然没有工作。

最终起作用的是`pip3 install zmq`……很奇怪，因为我已经有了别名，但是路径可能仍然很混乱。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-30T20:59:18.580

对我来说，解决方案是将我的脚本从 zmq.py 重命名为其他任何内容。

发生这种情况是因为使用名称 zmq.py 与包发生名称冲突，因为 python 尝试包含脚本本身而不是库，因为脚本在包含层次结构中具有优先级。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-26T16:30:27.153

您应该在安装 zmq 之前将 Phython 路径添加到 Windows 局部变量 PATH

# android - 蓝牙扫描随机强制退出

> ID：11892511
> 
> 赞同：0
> 
> 时间：2012-08-09T21:52:18.597
> 
> 标签：android, bluetooth, quit

我是 android 和 java 程序的新手。

我正在尝试编写一个程序来通过 Android HP 蓝牙远程控制开关。

一切都很好，只有我对蓝牙功能/活动的扫描确实会随机强制退出。我不确定我的代码发生了什么/错误，因此我希望有人可以相应地帮助/建议我。下面是我提取的 logcat 文件。

```
08-08 17:23:40.035: D/getView(1876): WindowsCE
08-08 17:23:40.035: D/getView(1876): WindowsCE
08-08 17:23:42.949: E/BluetoothEventLoop.cpp(107): event_filter: Received signal org.bluez.Adapter:DeviceFound from /org/bluez/1610/hci0
08-08 17:23:42.953: D/BluetoothService(107): updateDeviceServiceChannelCache(00:15:A0:6B:BB:1B)
08-08 17:23:42.980: V/BluetoothEventRedirector(450): Received android.bluetooth.device.action.FOUND
08-08 17:23:42.988: D/getView(1876): WindowsCE
08-08 17:23:42.988: D/AndroidRuntime(1876): Shutting down VM
08-08 17:23:42.988: W/dalvikvm(1876): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-08 17:23:42.992: E/AndroidRuntime(1876): FATAL EXCEPTION: main
08-08 17:23:42.992: E/AndroidRuntime(1876): java.lang.NullPointerException: println needs a message
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.util.Log.println_native(Native Method)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.util.Log.d(Log.java:137)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at com.android.ui.single.ScanDeviceList.getView(ScanDeviceList.java:61)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.widget.AbsListView.obtainView(AbsListView.java:1409)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.widget.ListView.onMeasure(ListView.java:1127)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.view.View.measure(View.java:8313)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.view.View.measure(View.java:8313)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.view.View.measure(View.java:8313)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.view.View.measure(View.java:8313)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.view.View.measure(View.java:8313)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.os.Looper.loop(Looper.java:123)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.app.ActivityThread.main(ActivityThread.java:3683)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at java.lang.reflect.Method.invokeNative(Native Method)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at java.lang.reflect.Method.invoke(Method.java:507)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at dalvik.system.NativeStart.main(Native Method)
08-08 17:23:42.999: W/ActivityManager(107):   Force finishing activity com.android/.DogActivity
08-08 17:23:43.499: W/ActivityManager(107): Activity pause timeout for HistoryRecord{408014c0 com.android/.DogActivity}

08-09 21:32:27.968: D/SurfaceFlinger(107): About to give-up screen, flinger = 0x11df90
08-09 21:41:54.546: D/SntpClient(107): request time failed: java.net.UnknownHostException: north-america.pool.ntp.org
08-09 21:41:54.554: D/SntpClient(107): request time failed: java.net.UnknownHostException: north-america.pool.ntp.org
08-09 21:41:54.554: D/SntpClient(107): request time failed: java.net.UnknownHostException: north-america.pool.ntp.org
08-09 21:41:54.617: D/skia(107): purging 201K from font cache [12 entries] 
```

下面是我的 DogActivity 代码

```
package com.android;

import java.io.FileOutputStream;

import com.android.backend.data.bluetooth.BluetoothManager;
import com.android.ui.UIManager;
import com.android.ui.single.ScanDeviceList;

import android.app.Activity;
import android.app.Dialog;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.text.Editable;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AdapterView.OnItemLongClickListener;

public class DogActivity extends Activity {

    public BroadcastReceiver mRvc = new BroadcastReceiver(){ // The new is instantiate the class **always read from the back
                                                             // The line from the back is creating an instantiate of this class         
        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();

            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                // Get the BluetoothDevice object from the Intent
                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                // If it's already paired, skip it, because it's been listed
                // already

                // Bluetooth Manager Update

                BluetoothManager.getInstance().addDiscovered_Devices(device);
                // UI Manager Update

                UI_discovered_Devices.add(device);

            }
            if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
                uiMgr.hideScanningProgressBox();
            }
        }
    };

    public ScanDeviceList UI_discovered_Devices;
    public UIManager uiMgr = new UIManager();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.overallscanentrylayout);
        uiMgr.owner = this;
        final DogActivity tt = this;

        // set your list view
        UI_discovered_Devices = new ScanDeviceList(this,R.layout.overallscanitemlayout);
        UI_discovered_Devices.set_view(R.id.toptexto1, R.id.bottomtexto1);
        ListView discoverListView = (ListView) findViewById(R.id.clistView1);
        UI_discovered_Devices.clear(); ///////////// Testing to solve memory issue
        discoverListView.setAdapter(UI_discovered_Devices);

        discoverListView
                .setOnItemLongClickListener(new OnItemLongClickListener() {

                    @Override
                    public boolean onItemLongClick(AdapterView<?> parent,
                            View view, int position, long id) {
                        // getItem = retrieving item from UI_discovered_Devices
                        // Arraylist
                        final BluetoothDevice getItem = UI_discovered_Devices
                                .getItem((int) id);

                        final Dialog dialog_createPL = new Dialog(tt);
                        dialog_createPL.setContentView(R.layout.catdogname);

                        Button okButt = (Button) dialog_createPL
                                .findViewById(R.id.catdogok);
                        okButt.setOnClickListener(new OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                EditText edit1 = (EditText) dialog_createPL
                                        .findViewById(R.id.catdogtext1);
                                Editable ret = edit1.getText();
                                String ls = ret.toString();

                                // Start activity
                                startActivity(new Intent(tt,
                                        ManualActivity.class));

                                // Write message to text
                                String msg = ls + "," + getItem.getName() + ","
                                        + getItem.getAddress();
                                writeDataToMem(msg);
                            }
                        });

                        Button cancelButt = (Button) dialog_createPL
                                .findViewById(R.id.catdogcancel);
                        cancelButt.setOnClickListener(new OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                dialog_createPL.cancel();
                            }
                        });

                        dialog_createPL.setTitle("Enter Name for Bluetooth Device");
                        dialog_createPL.show();

                        return false;
                    }
                });
        discoverListView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                final BluetoothDevice getItem = UI_discovered_Devices
                        .getItem((int) id);

                final Dialog dialog_createPL = new Dialog(tt);
                dialog_createPL.setContentView(R.layout.catdogname);

                Button okButt = (Button) dialog_createPL
                        .findViewById(R.id.catdogok);
                okButt.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        EditText edit1 = (EditText) dialog_createPL
                                .findViewById(R.id.catdogtext1);
                        Editable ret = edit1.getText();
                        String ls = ret.toString();

                        // Start activity
                        startActivity(new Intent(tt,
                                ManualActivity.class));

                        // Write message to text
                        String msg = ls + "," + getItem.getName() + ","
                                + getItem.getAddress();
                        writeDataToMem(msg);
                    }
                });

                Button cancelButt = (Button) dialog_createPL
                        .findViewById(R.id.catdogcancel);
                cancelButt.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        dialog_createPL.cancel();
                    }
                });

                dialog_createPL.setTitle("Enter Name for Bluetooth Device");
                dialog_createPL.show();
            }
        });

        // Register for broadcasts when a device is discovered
        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);  // IntentFilter class is important to declare for below filter
        registerReceiver(mRvc,filter); //mRvc is the location of logic, filter is message identify by android

        // Register for broadcasts when discovery has finished
        filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED); //Must make sure the IntentFilter is declare
        registerReceiver(mRvc,filter); //mRvc is the location of logic, filter message indetiy by android

        // // Logic
        BluetoothManager.getInstance().doDiscovery();

        uiMgr.showScanningProgressBox();
        // uiMgr.clearUIDiscovered_Devices();
    }

    public void writeDataToMem(String msg) {
        // Write playlist to database
        FileOutputStream fos;
        try {
            fos = this.openFileOutput("bone.txt", Context.MODE_PRIVATE);
            fos.write(msg.getBytes());

            Log.d("bone.txt", msg);
            fos.close();
        } catch (Exception e) {
            e.printStackTrace();
        }

        try {
            msg = msg +"\n";
            fos = this.openFileOutput("fish.txt", Context.MODE_APPEND);
            fos.write(msg.getBytes());

            Log.d("fish.txt", msg);
            fos.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    protected void onResume() { //restart bluetooth is accidently off it
        super.onResume();
        // The activity has become visible (it is now "resumed").
        BluetoothManager.getInstance().init();
        BluetoothManager.getInstance().getBluetoothAdapter().enable();

        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND); // IntentFilter class is important to declare for below filter
        registerReceiver(mRvc,filter); // mRvc is the location of logic, filter is message identify by android

        filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED); //Must make sure the IntentFilter is declare
        registerReceiver(mRvc,filter); 
    }

    protected void onPause() {  // Clear all mac address **is a trial for memory leak
        super.onPause();
        BluetoothManager.getInstance().ccDiscovery();
        BluetoothManager.getInstance().clearDiscoveredDevices();
        uiMgr.hideScanningProgressBox();
        unregisterReceiver(mRvc);
    }

} 
```

下面是我的 ScanDeviceList 代码

```
package com.android.ui.single;

//import java.util.ArrayList;

import java.util.Set;

import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
//import android.widget.CompoundButton;
//import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.TextView;
//import android.widget.ToggleButton;

//import com.android.R;
//import com.android.ScanListActivity;
//import com.android.backend.data.bluetooth.BluetoothManager;

public class ScanDeviceList extends ArrayAdapter<BluetoothDevice> {
    Context context;
    int layoutResourceID;
    int topViewID;
    int bottomViewID;

    public ScanDeviceList(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
        this.context = context;
        layoutResourceID = textViewResourceId;
    }

//  public ScanDeviceList(Context context, int textViewResourceId, ArrayList<BluetoothDevice> items) {
//      super(context, textViewResourceId, items);
//      this.context = context;
//      layoutResourceID = textViewResourceId;
//  }

    public void set_view(int passtopView, int passBottomView){
        topViewID = passtopView;
        bottomViewID = passBottomView;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(layoutResourceID, null);
        }

        TextView topView = (TextView) v.findViewById(topViewID);
        TextView bottomView = (TextView) v.findViewById(bottomViewID);

        final BluetoothDevice o = this.getItem(position);

        // Get the local Bluetooth adapter
        BluetoothAdapter mBtAdapter = BluetoothAdapter.getDefaultAdapter();

        // Get a set of currently paired devices
        Set<BluetoothDevice> pairedDevices = mBtAdapter.getBondedDevices();

        //if (o != null) 
        if (pairedDevices.size() > 0) 
        {

            if (topView != null) {
                topView.setText("Name: " + o.getName());
                Log.d("getView", o.getName());
            }

            if (bottomView != null) {
                String msg = "MAC: " + o.getAddress();
                if(o.getBondState() == BluetoothDevice.BOND_BONDED)
                    {msg = msg + "/" + "Paired";}
                else
                    {msg = msg + "/" + "Not Paired";}

                bottomView.setText(msg);
            }
        }
        return (v);
        }

} 
```

希望有人可以告诉我我的错误是什么。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:23:14.547

此行来自您的*ScanDeviceList.java*

```
if (topView != null) {
   topView.setText("Name: " + o.getName());
   Log.d("getView", o.getName());
} 
```

`o.getName()``null`基于您的 logcat 中的这一行：

```
08-08 17:23:42.992: E/AndroidRuntime(1876): FATAL EXCEPTION: main
08-08 17:23:42.992: E/AndroidRuntime(1876): java.lang.NullPointerException: println needs a message
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.util.Log.println_native(Native Method)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at android.util.Log.d(Log.java:137)
08-08 17:23:42.992: E/AndroidRuntime(1876):     at com.android.ui.single.ScanDeviceList.getView(ScanDeviceList.java:61) 
```

如上所示的 logcat 片段中的最后一行是您崩溃的地方。

解决方案：

```
if (topView != null) {
   if (o != null && o.getName() != null){
      topView.setText("Name: " + o.getName());
      Log.d("getView", o.getName());
   }else topView.setText("Name: !UNKNOWN!");
} 
```

您将知道 UI 控件`topView`是否具有字符串“!UNKNOWN!”。在那里 - 因为`o.getName()`是空的。

# javascript - 传单：动态 div 容器

> ID：11892514
> 
> 赞同：2
> 
> 时间：2012-08-09T21:52:37.593
> 
> 标签：javascript, css, svg, leaflet

我正在尝试使用 Leaflet 创建一个小示例并将其用于我的网络应用程序，但是我遇到了一些困难。

我已经从他们页面的[快速入门指南](http://leaflet.cloudmade.com/examples/quick-start.html)中制作了一个独立的 Leaflet 示例，它有一个静态地图 div 并覆盖了一些对象（`marker`和`circle`）`polygon`。但是在我的应用程序中，地图 div 容器是使用 jquery 动态定位和调整大小的，它是一个非常复杂的应用程序，所以我不能在这里发布整个代码。

问题是，在正确处理 div 后，地图在 div 中正确绘制（无论它在哪里），但是在覆盖层中我只能看到`marker`. 和`circle`不`polygon`可见。

```
 var map = L.map(this.$el.attr('id')).setView([51.505, -0.09], 13);
    L.tileLayer('http://{s}.tile.cloudmade.com/<APIKEY>/997/256/{z}/{x}/{y}.png', {
        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',
        maxZoom: 18
    }).addTo(map);

    var circle = L.circle([51.508, -0.11], 500, {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.5
    }).addTo(map);

    var polygon = L.polygon([
        [51.509, -0.08],
        [51.503, -0.06],
        [51.51, -0.047]
    ]).addTo(map);

    var marker = L.marker([51.5, -0.09]).addTo(map);
    marker.bindPopup("<b>Hello world!</b><br>I am a popup.");
    circle.bindPopup("<b>Hello world!</b><br>I am a popup.").openPopup(); 
```

我相信我创建地图和对象的方式没有任何问题，我什至`map.invalidateSize()`在整个调整 div 大小后调用。奇怪的是弹出窗口显示在正确的位置，但后面没有圆圈。

问题可能出在我调整 div 容器大小和位置的方式上吗？`CSS`我应该在 div 容器中使用任何特定属性吗？

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:10:10.933

在解决了这个问题之后，我想到了一个`JSFiddle`例子来重现这个问题。但是，无论我多么努力，我都无法在更简单的独立示例中复制该问题，因此问题必须在我的应用程序中存在一些冲突。

每个症状都指向一个`CSS`问题，但我`CSS`的范围很广。所以我的最后一个理论是它必须是我正在使用的某个库中的冲突。

结果证明是正确的。问题是`CSS`库[NVD3的样式表中的冲突](http://nvd3.com/)

# git - git fetch 与 git fetch origin master 对跟踪分支有不同的影响

> ID：11892517
> 
> 赞同：34
> 
> 时间：2012-08-09T21:52:53.237
> 
> 标签：git, branch, git-fetch

当我试图熟悉 Git 时，这主要是出于好奇。我查看了“git fetch”的文档，但我没有看到下面的明显解释。在此先感谢，如果这非常明显，我们深表歉意。

1）从一个中央存储库，比如 GitHub，我克隆了一个`website`在两台机器上命名的存储库，`HostA`并且`HostB`.

2) 在 上`HostA`，我对文件进行更改，比如说`README.txt`，并提交它。
在这一点上`HostA`，分支的提交`master`和 `origin/master`预期不同，因为我还没有推送

```
git show master
git show origin/master 
```

报告不同的哈希值（因为`master`有变化而`origin/master`没有）

3）一旦我推动，他们之后是一样的。

* * *

4）现在，`HostB`如果我执行以下操作：

```
git fetch
git merge FETCH_HEAD 
```

之后，在 HostB 上`master`，并`origin/master`在查询时报告相同的哈希值`git show`

但

如果相反，我已经完成了，则`HostB`：

```
git fetch origin master
git merge FETCH_HEAD 
```

那时哈希值仍然不同。

```
git show origin
git show origin/master 
```

报告*不同的*哈希值

跟踪分支`origin/master`在我执行普通操作之前不会更新`git fetch`

为什么是这样？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-10T06:14:15.620

如果您的分支有关联的[远程跟踪分支](https://stackoverflow.com/a/4697054/6309)，这意味着它的配置如下：

```
git config branch.[branch-name].remote [remote-name]
git config branch.[branch-name].merge [remote-master] 
```

**[`git fetch`](http://git-scm.com/docs/git-fetch)**其中解释这两个命令之间区别的关键部分是：

```
<refspec> 
```

> 参数的格式`<refspec>`是可选的加号`+`，后跟源引用`<src>`，后跟冒号`:`，然后是目标引用`<dst>`。获取
> 匹配的远程引用，**如果****不是空字符串，则使用 快速转发匹配它的本地引用**。`<src>`**`<dst>``<src>`**

让我重复一遍：

**如果`<dst>`不是空字符串，则匹配它的本地 ref 使用 . 快进`<src>`**。
知道：

*   **`git fetch`**相当于**`git fetch origin master:master`**（从您的分支配置的默认值），因此它将更新远程跟踪分支：**为您指定 refspec 的目标**。

*   **`git fetch origin master`**等价于“ `git fetch origin master:`”，而不是“ `git fetch origin master:master`”；它将获取的' `master`'分支（远程' `origin`'）的值存储`FETCH_HEAD`在' `master`'分支或远程跟踪' `remotes/origin/master`'分支中（来自[Jakub Narębski](https://stackoverflow.com/users/46058/jakub-narebski) 's [answer](https://stackoverflow.com/a/1071300/6309)）
    换句话说，**您没有指定您的目的地参考规范**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:11:55.467

答案在于您从`git fetch`. 在第一种情况下，当您在不提供 refspec 的情况下获取时，您会看到远程跟踪分支已更新：

```
remote: Counting objects: 5, done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From /depot
   c67d1c8..1941673  master     -> origin/master 
```

请注意消息如何说 origin/master 已使用来自源的 master 进行更新。

现在在第二种情况下，您指定 refspec，您会得到完全不同的东西：

```
remote: Counting objects: 5, done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From /depot
 * branch            master     -> FETCH_HEAD 
```

因此，当您指定 refspec 时，不会更新远程跟踪分支（源/主），仅更新 FETCH_HEAD。

最终结果是，当你不是真的时，你会显得领先于原产地/主人。我无法想象为什么这种行为是可取的，但这绝对是 fetch 命令的一个有趣的小怪癖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-12T20:14:32.270

如果你想自己快进合并，或者使用 git pull。您似乎不明白 git fetch 的目的不是更新您的工作树。Fetch 旨在更新您的跟踪分支。

# javascript - 重构“停止运行此脚本？” jQuery中的错误

> ID：11892519
> 
> 赞同：0
> 
> 时间：2012-08-09T21:53:03.957
> 
> 标签：javascript, jquery, internet-explorer

我一直在调整这个、那个和另一个，试图让“停止运行这个脚本？” 在 IE7 中消失的错误 - 此时所有用户都必须使用的浏览器：P 我已经尝试了几次改进尝试；所有这些都导致脚本停止工作，而不是长时间运行。我试过使用 setTimeout()，但没有运气。有可能我没有正确地做到这一点。任何人都可以提出改进方法以使其更高效（并让该长时间运行的脚本消息消失）？

这是代码：

的HTML：

```
<div class="changeView" style="float:right;">Show All...</div>
<div id="accordion" style="width: 99%;">
    <% foreach (var obj in Model.Objects) { %>
        <h3><a href="#"><span class="title"><%:obj.Id%></span><span class="status" style="font-size:75%"> - <%:obj.Status%></span></a></h3>
        <div id="<%:obj.Id %>">
            <div class="loading"><img src="<%=Url.Content("~/Content/Images/ajaxLoader.gif") %>" alt="loading..." /></div>
        </div>
    <% } %>
</div> 
```

然后我们有一个 onclick 函数来启动它......

```
$(function () {
    $(".changeView").click(function () {
        var divText = $(this).html();
        var src = '<%=Url.Content("~/Content/Images/ajax-loader.gif")%>';

        if (divText == "Show All...") {
            $(this).html("Show Filtered...");
            $('#accordion').accordion('destroy');
            $('#accordion').empty();
            $('#accordion').addClass("loading");
            $('#accordion').append('Loading Information...<img src="' + src + '" alt="loading..." />');
            changePartialView("all");
        }
        else {
            $(this).html("Show All...");
            $('#accordion').accordion('destroy');
            $('#accordion').empty();
            $('#accordion').addClass("loading");
            $('#accordion').append('Loading Information...<img src="' + src + '" alt="loading..." />');
            changePartialView("filter");
        }
    });
}); 
```

接下来调用changeView函数：

```
//change view and reinit accordion
function changePartialView(viewType) {
    $.ajax({
        type: "POST",
        url: "<%:Model.BaseUrl%>" + "ToggleView",
        data: "Type=<%:Model.Target%>&Id=<%:Model.Id%>&view=" + viewType,
        success: function (result) {
            $('#accordion').empty();
            $('#accordion').removeClass();
            for (var index = 0; index < result.Html.length; index++) {
                $('#accordion').append(result.Html[index]);
            }
            var $acc = $("#accordion").accordion({
                collapsible: true,
                active: false,
                autoHeight: false,
                change: function (event, ui) {
                    var index = $acc.accordion("option", "active");
                    if (index >= 0) {
                        var clickedId = ui.newHeader.find("a").find(".title").text();
                        getRequirements(clickedId);
                    }
                    else {
                        // all panels are closed
                    }
                }
            });
        },
        error: function (xhr, err) {
            alert("readyState: " + xhr.readyState + "\nstatus: " + xhr.status);
            alert("responseText: " + xhr.responseText);
            alert("Error in ajax: " + result);
        }
    });
} 
```

**注意：** result.Html 返回一个通用的格式化 HTML 列表，每个折叠面板对应一个。除了长时间运行的脚本错误消息外，每个人都工作得很好。

**返回值说明：** result.Html 由这些字符串的大约 200-250 个实例组成：

```
"<h3><a href=\"#\"><span class=\"title\">" + obj.Id +
"</span><span class=\"status\" style=\"font-size:75%\"> - " + obj.Status + count +
"</span></a></h3><div id=\"" + obj.Id + "\"><div class=\"loading\"><img src=\"" +
Url.Content("~/Content/Images/ajaxLoader.gif") + "\" alt=\"loading...\" /></div></div>") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:57:58.243

```
 for (var index = 0; index < result.Html.length; index++) {
            $('#accordion').append(result.Html[index]);
        } 
```

将大量节点一次一个地添加到 DOM 中很慢，一种可以加快速度的方法是将它们全部插入到一个未连接的节点中，然后在完成后立即将它们全部移动：

```
 var holder = $('<div></div>');
        for (var index = 0; index < result.Html.length; index++) {
            holder.append(result.Html[index]);
        }
        $('#accordion').append(holder.children()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:24:07.967

更改服务器以返回数据而不是大量 HTML。使用客户端模板解决方案。然后，一旦你有了一个数组，你就可以异步更新显示（就像`setTimeout`你提到的那样）

那个大的 HTML 字符串中只有两个动态的东西，非常浪费。

还是退货少？

# python - Tkinter 自定义窗口

> ID：11892521
> 
> 赞同：2
> 
> 时间：2012-08-09T21:53:24.793
> 
> 标签：python, tkinter, custom-titlebar

我想在 Tk 中创建一个具有自定义标题栏和框架的窗口。我在这个网站上看到了很多关于这个的问题，但我正在寻找的是使用画布实际渲染框架，然后将内容添加到画布。我不能使用框架来执行此操作，因为边框是渐变的。

根据这个网站：[http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.create_window-method](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.create_window-method)，我不能将任何其他画布项目放在小部件之上（使用该`create_window`方法），但我需要做所以，因为我的一些小部件是使用画布呈现的。

关于如何做到这一点的任何建议？我在这里一无所知。

编辑：Bryan Oakley 确认用画布渲染是不可能的。那么是否有可能有一个具有自定义边框颜色的框架？如果是这样，有人可以举一个简单的例子吗？我对python有点陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T23:13:07.897

您可以像使用框架一样使用画布来绘制自己的窗口边框。但是，就像您说的那样，您不能在嵌入在画布中的小部件之上绘制画布项目；小部件始终具有最高的堆叠顺序。没有办法解决这个问题，但不清楚你是否真的需要这样做。

这是一个快速而肮脏的示例，展示了如何为自定义边框创建一个带有渐变的窗口。为了使示例简短，我没有添加任何代码来允许您移动或调整窗口大小。此外，它使用固定颜色作为渐变。

```
import Tkinter as tk

class GradientFrame(tk.Canvas):
    '''A gradient frame which uses a canvas to draw the background'''
    def __init__(self, parent, borderwidth=1, relief="sunken"):
        tk.Canvas.__init__(self, parent, borderwidth=borderwidth, relief=relief)
        self._color1 = "red"
        self._color2 = "black"
        self.bind("<Configure>", self._draw_gradient)

    def _draw_gradient(self, event=None):
        '''Draw the gradient'''
        self.delete("gradient")
        width = self.winfo_width()
        height = self.winfo_height()
        limit = width
        (r1,g1,b1) = self.winfo_rgb(self._color1)
        (r2,g2,b2) = self.winfo_rgb(self._color2)
        r_ratio = float(r2-r1) / limit
        g_ratio = float(g2-g1) / limit
        b_ratio = float(b2-b1) / limit

        for i in range(limit):
            nr = int(r1 + (r_ratio * i))
            ng = int(g1 + (g_ratio * i))
            nb = int(b1 + (b_ratio * i))
            color = "#%4.4x%4.4x%4.4x" % (nr,ng,nb)
            self.create_line(i,0,i,height, tags=("gradient",), fill=color)
        self.lower("gradient")

class SampleApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        self.wm_overrideredirect(True)
        gradient_frame = GradientFrame(self)
        gradient_frame.pack(side="top", fill="both", expand=True)
        inner_frame = tk.Frame(gradient_frame)
        inner_frame.pack(side="top", fill="both", expand=True, padx=8, pady=(16,8))

        b1 = tk.Button(inner_frame, text="Close",command=self.destroy)
        t1 = tk.Text(inner_frame, width=40, height=10)
        b1.pack(side="top")
        t1.pack(side="top", fill="both", expand=True)

if __name__ == "__main__":
    app = SampleApp()
    app.mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:25:47.117

# jquery - 结合jQuery函数调用和if语句？

> ID：11892527
> 
> 赞同：2
> 
> 时间：2012-08-09T21:53:47.447
> 
> 标签：jquery, ruby-on-rails, dynamic, coffeescript

我对 jQuery 很陌生，所以这可能是“说真的，伙计？” 类型的问题，但我有以下情况：

```
dri = $('#drink_restaurant_id :selected').val()

$('#drink_restaurant_id').change ->
  restaurant = $('#drink_restaurant_id :selected').text()
  ... 
```

我想拥有它，以便应用程序检查ID 字段`.change`上的a`#drink_restaurant_id`或是否`dri`具有值/是否有效。

我试过这样的事情：

```
$('#drink_restaurant_id').change -> || if dri

if dri || $('#drink_restaurant_id').change ->

(if dri) || ($('#drink_restaurant_id').change ->) 
```

以及各种其他排列，但在我的网站上不断收到错误消息。

**结合这两项检查的最佳方法是什么，这样我就不必为这两个实例重新键入代码？**

## 说明和代码

[我在动态选择菜单上的 RailsCast](http://railscasts.com/episodes/88-dynamic-select-menus-revised)之后创建了所有这些

当您转到新的创建页面时，该程序运行良好，但如果您要编辑现有记录，则餐厅字段 ( `#drink_restaurant_id`) 已被选中，但尺寸 ( `drink_size_ids`) 和成分 ( `drink_ingredient_ids`) 字段未根据餐厅字段进行过滤。要解决此问题，我必须从下拉列表中选择另一家餐厅，然后重新选择原始餐厅以启用大小和餐厅的过滤器。

我自己发现的一种解决方法是通过执行以下操作来检查 Restaurant 字段是否具有值：

```
dri = $('#drink_restaurant_id :selected').val() 
```

如果`dri`有值，则执行与某人从下拉菜单中选择餐厅并触发操作时相同的所有`.change`操作。

所以现在，我的代码看起来像这样。注意代码的重复只是因为我想检查两个不同的东西。

```
jQuery ->
  $('.chzn-select').chosen()

  sizes = $('#drink_size_ids').html()
  ingredients = $('#drink_ingredient_ids').html()

  # Empty out size and ingredients dropdown
  $('#drink_size_ids').html(null).trigger "liszt:updated"
  $('#drink_ingredient_ids').html(null).trigger "liszt:updated"

  # When 'editing', will see if restaurant is already selected
  dri = $('#drink_restaurant_id :selected').val()

  $('#drink_restaurant_id').change ->
    restaurant = $('#drink_restaurant_id :selected').text()
    size_options = $(sizes).filter("optgroup[label='#{restaurant}']").html()    
    ingredient_options = $(ingredients).filter("optgroup[label='#{restaurant}']").html()    
    if size_options
      $('#drink_size_ids').html(size_options).trigger "liszt:updated"
    else
      $('#drink_size_ids').html($("<option>").attr('selected',true)).trigger "liszt:updated"

    if ingredient_options
      $('#drink_ingredient_ids').html(ingredient_options).trigger "liszt:updated"
    else
      $('#drink_ingredient_ids').html($("<option>").attr('selected',true)).trigger "liszt:updated"

  if dri
    restaurant = $('#drink_restaurant_id :selected').text()
    size_options = $(sizes).filter("optgroup[label='#{restaurant}']").html()    
    ingredient_options = $(ingredients).filter("optgroup[label='#{restaurant}']").html()    
    if size_options
      $('#drink_size_ids').html(size_options).trigger "liszt:updated"
    else
      $('#drink_size_ids').html($("<option>").attr('selected',true)).trigger "liszt:updated"

    if ingredient_options
      $('#drink_ingredient_ids').html(ingredient_options).trigger "liszt:updated"
    else
      $('#drink_ingredient_ids').html($("<option>").attr('selected',true)).trigger "liszt:updated" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:22:55.450

您的问题的解决方案似乎是变量中的函数：

```
# Create a variable that contains a function
updateFields = ->
    restaurant = $('#drink_restaurant_id :selected').text()
    size_options = $(sizes).filter("optgroup[label='#{restaurant}']").html()
    ...    

# Now add this function as the event handler
$('#drink_restaurant_id').change updateFields

# And call it manually if that is indicated
updateFields() if dri 
```

# couchdb - 如何在 CouchDB 中获取 GET 参数

> ID：11892531
> 
> 赞同：0
> 
> 时间：2012-08-09T21:54:04.000
> 
> 标签：couchdb

我需要在我的 CouchDB map() 函数中获取 GET（或其他）参数。

PS我想按多边形搜索，为此我需要有点列表并与文档位置进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T05:16:54.220

您无法访问地图函数中的任何参数。map 函数唯一做的就是**输出**键/值对。然后，您可以根据单个键 ( `key`)、多个键的列表 ( `keys`) 或键范围 ( `startKey`and/or `endKey`) 限制返回的行。[在文档](http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options)中查看更多信息。

# sql - 存储过程 INSERT INTO VALUES 具有从另一个表中选择的一个值

> ID：11892532
> 
> 赞同：1
> 
> 时间：2012-08-09T21:54:17.813
> 
> 标签：sql, sql-server-2008, stored-procedures

我正在使用 SQL Server 2008。

以下是存储过程的一部分。@Param1 --> @Param6 是存储过程参数。

这就是我想要做的：

```
INSERT INTO myTable 
VALUES (otherTableValue, @Param2, @Param3, @Param4, @Param5)
SELECT ID as otherTableValue
FROM otherTable
WHERE otherTable.Param6 = @Param6 
```

我收到“无效的列名”作为错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:57:01.113

你的语法是错误的。要`select`在 an中使用 a `insert`，请使用 the`select`而不是`values`：

```
INSERT INTO myTable 
SELECT ID, @Param2, @Param3, @Param4, @Param5
FROM otherTable
WHERE otherTable.Param6 = @Param6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:00:10.360

添加列名通常是一种好习惯……如果有人更改了架构怎么办。

```
INSERT INTO myTable (ColName1, ColName2, ColName3, ColName4, ColName5)
SELECT ID,@Param2, @Param3, @Param4, @Param5
FROM otherTable
WHERE otherTable.Param6 = @Param6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:59:42.453

语法错误。@Param2、@Param3 等不是列名。

```
 INSERT INTO myTable 
 VALUES (otherTableValue, field2, field3, field4, field5)
 SELECT ID as otherTableValue, @Param2, @Param3, @Param4, @Param5
 FROM otherTable
 WHERE otherTable.Param6 = @Param6 
```

# python - 如何将一对嵌套的for循环重写为综合列表表达式

> ID：11892534
> 
> 赞同：0
> 
> 时间：2012-08-09T21:54:25.870
> 
> 标签：python

我想让我的代码更 Pythonic。

有一个简单的列表列表，例如

```
numbers = [[1, 2], [3, 4, 5]] 
```

我想做这个：

```
mylist = []
for sublist in numbers:
  for number in sublist:
      mylist.append(number) 
```

但在一行中，使用一个全面的列表定义：

```
mylist = [ number for number in  sublist for sublist in numbers] 
```

但是我得到的结果是 [3, 3, 4, 4, 5, 5]

我究竟做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T21:55:55.147

for 循环的顺序是错误的——应该是

```
mylist = [number for sublist in numbers for number in sublist] 
```

反而。人们常常对此感到惊讶。只需使用与嵌套`for`循环中相同的顺序即可。

您可以使用的替代方法是

```
from itertools import chain

mylist = list(chain.from_iterable(numbers)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T22:00:21.647

我个人发现嵌套列表推导难以阅读和理解。`itertools`标准库有一个方便的功能`chain`：

> `chain(*iterables) --> chain object`
> 
> 返回一个链对象，其 .next() 方法从第一个可迭代对象返回元素，直到它用尽，然后从下一个可迭代对象返回元素，直到所有可迭代对象都用完。

所以你会这样做：

```
import itertools
mylist = list(itertools.chain(*numbers)) 
```

# sql-server - 将 ObjectSet 限制为相关实体并按动态列名排序

> ID：11892540
> 
> 赞同：1
> 
> 时间：2012-08-09T21:54:55.677
> 
> 标签：sql-server, linq, entity-framework, linq-to-entities, linq-expressions

给定一个父级和一个有效的列名，我想找到所有相关的子级，按动态列名排序。这是我认为我的代码的样子：

```
Parent.                                             // EntityObject
Children.                                           // EntityCollection
Where(c => c.Gender == 'm').                        // IEnumerable
OrderBy(columnName, ListSortDirection.Ascending).   // -- not available --
Skip(pages * pageSize).Take(pageSize); 
```

IEnumerable.OrderBy(string columnName) 不存在。环顾四周以完成“按动态列名排序”，我从这个看起来很棒的解决方案开始：[如何为运行时排序创建表达式树？](https://stackoverflow.com/questions/11336713/how-do-i-create-an-expression-tree-for-run-time-sorting)，但这在 IQueryable 上运行

如果是这样，我认为它会将记录通过网络进行排序并降低我的寻呼机的性能。所以我重新排序：

```
Repository.                                         // Repository
Children.                                           // ObjectSet
Where(c => c.Parent == Parent && c.Gender == 'm').  // ObjectQuery, runtime error
OrderBy(columnName, ListSortDirection.Ascending).   // IOrderedQueryable
Skip(pages * pageSize).Take(pageSize); 
```

ObjectSet 和 ObjectQuery 实现 OrderBy(string columnName)，并且此代码编译，但产生错误：

> 无法创建类型为“DataModel.Parent”的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

当然，我可以获取父ID，但是Child.ParentReference也是非原始类型。

我可以想到几种方法可以通过网络加载整个记录集，但我觉得我一定遗漏了一些东西，因为使用所有 MS 将一组基本指令传递到数据库一定不难以技术为中心。

编辑：假装我是[http://en.wikipedia.org/wiki/Quiverfull](http://en.wikipedia.org/wiki/Quiverfull)，需要给我的孩子分页。:) edit2：澄清了我需要查询动态列名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:26:56.043

```
var parents = db.Parents; // Do whatever you need to get your unsorted collection from EF here.

if (sortBy == "Gender")
{
    parents = parents.OrderBy(p => p.Gender);
}
else if (sortBy == "FirstName")
{
    parents = parents.OrderBy(p => p.FirstName);
} 
```

现在，这显然不是在多列上排序，只是在单列上。您还可以为排序方向添加更多逻辑。

编辑：拿出关于 PredicateBuilder 的废话，当我开始输入这个答案时，我走错了路，忘了拿出旧的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:58:16.573

尝试更换您的 OrderBy

```
OrderBy("age", ListSortDirection.Ascending). 
```

和

```
OrderBy(x => x.Age). 
```

还有哪里

```
Where(c => c.Parent == Parent && c.Gender = 'm'). 
```

应该读

```
Where(c => c.Parent == Parent && c.Gender == 'm'). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:46:57.913

所以我遇到了几个问题，都在问题标题中提到。

按运行时选择的或动态的列名排序需要一些表达式构建。[我在这里](https://stackoverflow.com/questions/307512/how-do-i-apply-orderby-on-an-iqueryable-using-a-string-column-name-within-a-gene)使用了@Slace 的流行扩展方法。

这需要一个 IQueryable。IQueryable 对我有用，因为每次我不小心将查询转换为可枚举时，我当然会在分页之前通过网络将所有结果带回，这是我试图避免的。但是我仍然需要一种方法来获取与我已经持有的实体有关系的结果的 IQueryable。

这很[简单](https://stackoverflow.com/questions/11914729/objectcollection-whereo-o-related-entityobject-unable-to-create-a-cons)，我忽略了，只是加入 Entity.Id 工作，并没有导致数据源的冗余连接。不像我对 EF 所期望的那样面向对象，但它会做到的。

```
Repository.                                         // Repository
Children.                                           // ObjectSet
Where(c => c.Parent.Id == Parent.Id).               // ObjectQuery, works fine
OrderBy(columnName, ListSortDirection.Ascending).   // IOrderedQueryable
Skip(pages * pageSize).Take(pageSize);              // Only transfers 1 page 
```

# xml - 如何确定 XML 节点是否有最后一个不具有特定属性的祖先？

> ID：11892547
> 
> 赞同：0
> 
> 时间：2012-08-09T21:55:50.877
> 
> 标签：xml, xslt, xpath-1.0

*   **`<p>`标签中的***任何***`<body>`标签都应转换为`Body_Text`.**

***   `<p>`具有最后一个祖先`<sec>` **但没有**属性“ ”的标签`sec-type`应转换为`Flush_Text`（此处覆盖第一个`Body_Text`转换）。

    *   `<p>`具有最后一个祖先`<sec sec-type="irrelevant-attribute-name>`（**具有**属性“ ”）的标签`sec-type`应转换为`Body_Text`.** 

 *** * *

`<sec><p>asdf</p></sec>`应转化为`<sec><Flush_Text>asdf</Flush_Text></sec>`.

`<sec sec-type="whatevs"><p>asdf</p></sec>`应该是`<sec sec-type="whatevs"><Body_Text>asdf</Body_Text></sec>`。

**此外**，任何进一步嵌套到具有此`sec-type`属性的祖先都应该是`Body_Text`：

`<sec sec-type="whatevs"><sec><p>asdf</p></sec></sec>`应该是`<sec sec-type="whatevs"><sec><Body_Text>asdf</Body_Text></sec>`。

* * *

这是我的 XML：

```
<root>
  <body>
  <sec sec-type="asdf">
    <title>This is an H1</title>

    <sec>
      <title>This is an H2</title>

      <sec>
        <title>This is an H3</title>
        <p>This SHOULD be "Body_Text", but it's "Flush_Text"</p>
      </sec> <!-- end of H3 -->
    </sec> <!-- end of H2 -->
  </sec> <!-- end of H1 -->

  <sec>
    <p>This is Flush_Text</p>
  </sec>
    <p>This is Body_Text</p>
  </body>
</root> 
```

...这是我的 XSL，它***不能***正常工作：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes" method="xml"/>
<xsl:strip-space elements="*"/>

    <!-- identity rule -->
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

        <!-- Body_Text -->
        <xsl:template match="body//p">
            <Body_Text>
                <xsl:apply-templates select="@*|node()"/>
            </Body_Text>
        </xsl:template>

        <!-- Flush_Text -->
        <xsl:template match="sec//p">
          <xsl:if test="not(@sec-type)">
            <Flush_Text>
                <xsl:apply-templates select="@*|node()"/>
            </Flush_Text>
          </xsl:if>
        </xsl:template>

        <!-- H1 -->
        <xsl:template match="sec//title">
            <H1>
                <xsl:apply-templates select="@*|node()"/>
            </H1>
        </xsl:template>

        <!-- H2 -->
        <xsl:template match="sec//sec//title">
            <H2>
                <xsl:apply-templates select="@*|node()"/>
            </H2>
        </xsl:template>

        <!-- H3 -->
        <xsl:template match="sec//sec//sec//title">
            <H3>
                <xsl:apply-templates select="@*|node()"/>
            </H3>
        </xsl:template>
</xsl:stylesheet> 
```

...这是不正确的输出：

```
<?xml version="1.0" encoding="utf-16"?>
<root>
    <body>
        <sec sec-type="asdf">
            <H1>This is an H1</H1>
            <sec>
                <H2>This is an H2</H2>
                <sec>
                    <H3>This is an H3</H3>
                    <Flush_Text>This SHOULD be "Body_Text", but it's "Flush_Text"</Flush_Text>
                </sec>
                <!-- end of H3 -->
            </sec>
            <!-- end of H2 -->
        </sec>
        <!-- end of H1 -->
        <sec>
            <Flush_Text>This is Flush_Text</Flush_Text>
        </sec>
        <Body_Text>This is Body_Text</Body_Text>
    </body>
</root> 
```

请注意，`<p>`此示例中的第一个实例应转换为`Body_Text`，但它正在转换为`Flush_Text`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:12:33.153

这是一个我*认为*你想要的解决方案。很难解释你的问题。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes" method="xml" />
  <xsl:strip-space elements="*" />

  <!-- identity rule -->
  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="title">
    <xsl:element name="H{count(ancestor::sec) + 1}">
      <xsl:apply-templates select="node() | @*" />
    </xsl:element>
  </xsl:template>

  <xsl:template match="p[ancestor::sec[last()][@sec-type]]">
    <Body_Text>
      <xsl:apply-templates select="node() | @*" />
    </Body_Text>
  </xsl:template>

  <xsl:template match="p">
    <Flush_Text>
      <xsl:apply-templates select="node() | @*" />
    </Flush_Text>
  </xsl:template>

</xsl:stylesheet> 
```

[http://www.xmlplayground.com/vmuroB](http://www.xmlplayground.com/vmuroB)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T02:27:28.910

好的，所以为了在这里产生想要的结果，我已将语句`<xsl:template match="sec//p">`（在 Flush_Text 下的 XSL 中）更改为`<xsl:template match="p[ancestor::sec[last()][not(@sec-type)]]">`，并删除了 if 语句。

这是更正后的 XSL：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes" method="xml"/>
<xsl:strip-space elements="*"/>

    <!-- identity rule -->
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

        <!-- Body_Text -->
        <xsl:template match="body//p">
            <Body_Text>
                <xsl:apply-templates select="@*|node()"/>
            </Body_Text>
        </xsl:template>

    <!-- Flush_Text -->
    <xsl:template match="p[ancestor::sec[last()][not(@sec-type)]]">
        <Flush_Text>
            <xsl:apply-templates select="@*|node()"/>
        </Flush_Text>
    </xsl:template>

        <!-- H1 -->
        <xsl:template match="sec//title">
            <H1>
                <xsl:apply-templates select="@*|node()"/>
            </H1>
        </xsl:template>

        <!-- H2 -->
        <xsl:template match="sec//sec//title">
            <H2>
                <xsl:apply-templates select="@*|node()"/>
            </H2>
        </xsl:template>

        <!-- H3 -->
        <xsl:template match="sec//sec//sec//title">
            <H3>
                <xsl:apply-templates select="@*|node()"/>
            </H3>
        </xsl:template>
</xsl:stylesheet> 
```

...产生这个期望的输出：

```
<root>
<body>
<sec sec-type="asdf">
<H1>This is an H1</H1>
<sec>
<H2>This is an H2</H2>
<sec>
<H3>This is an H3</H3>
<Body_Text>This SHOULD be "Body_Text", but it's "Flush_Text"</Body_Text>
</sec>

</sec>

</sec>

<sec>
<Flush_Text>This is Flush_Text</Flush_Text>
</sec>
<Body_Text>This is Body_Text</Body_Text>
</body>
</root> 
```

这在以下位置进行了测试：http: [//xslt.online-toolz.com/tools/xslt-transformation.php](http://xslt.online-toolz.com/tools/xslt-transformation.php)。

感谢@Tomalak 在使用`ancestor`xpath 轴时为我指明了正确的方向。 ***在这里，我***匹配了任何没有属性

的最后一个祖先（我错误地称之为“最高父级”），并将其转换为. 这阻止了本示例中的第一个实例，该实例具有其最后一个祖先，并允许覆盖。 另外，我喜欢 Tomalak 对 H1 - H3 自动化的使用......我仍在尝试这个，并且在我完全理解它之前不想使用它;）`<sec>``<p>`*`sec-type``Flush_Text``<p>``<sec sec-type...``Flush_Text``Body_Text`***

# java - java中字符串的最大字符数

> ID：11892553
> 
> 赞同：2
> 
> 时间：2012-08-09T21:56:10.167
> 
> 标签：java

为了尝试提高性能，我打算使用包含大量字符的字符串。我想知道是否有任何尺寸可以被认为是最佳的。例如，如果我声明一个可以容纳 5000 个字符串的字符串数组，并且每个单元格中的字符串可以容纳 5000-7000 个字符，我正在考虑是否存在任何性能下降。

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:59:58.990

由于存储在常量池中，字符串文字被限制为 65535 个字节。我不确定运行时字符串是否存在限制，除了由于数组寻址而导致的明显限制 2^31-1 之外。

编辑以清除问题：这是修改后的 Utf8 编码中的 65535 字节。它与普通 Utf8 相同，只是空字符是两个字节，BMP 之外的字符使用代理对（6 个字节而不是 4 个）。如果你只是在做 ascii，那么这只是每个字符一个字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T22:14:56.123

原则上，正如 Antimony 所提到的，字符串的限制是您可以放入数组中的字符数，即 2^31-1。

您提到的数据量大约为 100MB：即如果您真的坚持该数据顺序，这不是一个大问题。如果您想使用 10 倍以上的量，您*可能*需要开始重新考虑。

您可以考虑做的一件事是尝试声明您的代码以传递 CharSequences 而不是 Strings。您不能覆盖 String，但是如果您稍后意识到这样做可以为您带来一些优化（例如以某种方式压缩内部表示），您可以创建自己的实现 CharSequence 的类。

除此之外，我会按照您的意图编写代码，然后在您实际遇到性能问题时进行分析。

# php - 在 cakephp 的视图中查找用户名

> ID：11892554
> 
> 赞同：1
> 
> 时间：2012-08-09T21:56:11.633
> 
> 标签：php, mysql, cakephp

我希望能够在我的 default.ctp 视图中使用 cakephp 显示用户的用户名。使用 authComponent 我知道我可以查找用户 ID，但是如何使用它从用户表中查找用户名？我习惯于从控制器执行此操作，我不确定如何在视图中执行此操作。

```
users table
userid |  username 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:11:28.053

如果您已经知道如何在控制器中执行此操作 - 那么您已经完成了 99% 的战斗。您只需要将在控制器中检索到的用户传递给视图。

**在您的控制器中：**

```
$user = $this->User->read(null, $this->Auth->user('id'));
$this->set('user', $user); 
```

**在您看来：**

```
<?php echo $user['User']['username']; ?> 
```

这是非常基本的蛋糕材料，你应该多花点时间在手册上:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:04:43.450

我不熟悉 CakePHP。但是在任何 MVC 框架中，您都不应该*从*您的视图中访问数据库。处理这个问题的正确方法是让**Controller**告诉**View**要显示哪些数据（通常来自**Model**）。

有关 CakePHP 中的 MVC 的更多信息，请查看[此处](http://book.cakephp.org/2.0/en/cakephp-overview/understanding-model-view-controller.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-17T00:08:28.740

从 cake 3.6.X 开始，这是我在 cake 3 中使用的示例，也制作了一个注销按钮，用于打印经过身份验证的用户的用户名

```
 <?php
        $usert=$this->request->getsession()->read('Auth.User');
    //then you can print the 'username' by
        echo $user['username'];
    ?> 
```

在之前的 cake 版本中，这些功能是可用的，但现在有弃用通知：

```
 $usert=$this->request->session()->read('Auth.User');
    $usert=$this->Session->read('Auth.User'); 
```

# sql - Oracle SQL 查询和可能跨 4 个表的子查询

> ID：11892556
> 
> 赞同：0
> 
> 时间：2012-08-09T21:56:31.210
> 
> 标签：sql, database, oracle, subquery

我有 4 个表，需要从其中 2 个表中获取值。

**政策**policy_id, template_id

**报价**quote_id，policy_id

**quote_clause** quote_clause_id, quote_id

**quote_clause_variable** quote_clause_variable_id, quote_clause_id, variable_name, value

-

*   每个策略policy_id有2-3条quotequote_id记录。

*   每个报价quote_id 有100-200 条quote_clausequote_clause_id 记录
    。

*   每个quote_clause_id 都有quote_clause_variable 的600-700 条记录。

我正在尝试获取特定 template_id 为 28 的所有 policy_id，并从那里获取变量名称为“R01011C1”的 quote_clause_variable 值。

在这一点上我有点迷茫，下面的查询都不是正确的。

```
SELECT policy.policy_id, quote_clause_variable.value 
FROM mciaweb.policy 
LEFT JOIN mciaweb.quote ON policy_id = policy_id 
LEFT JOIN mciaweb.quote_clause ON quote_id = quote_id 
LEFT JOIN mciaweb.quote_clause_variable ON quote_clause_id = quote_clause_id 
WHERE policy.template_id = '28' 
AND variable_name = 'R01011C1';

select 
(select value from mciaweb.quote_clause_variable 
where variable_name in ('R01011C1') 
and quote_clause_id in 
(select quote_clause_id from MCIAWEB.quote_clause where quote_id in 
(select quote_id from MCIAWEB.quote where policy_id in 
(select policy_id from mciaweb.policy where template_id in ('28') 
)))) situation, 
policy_id  
from mciaweb.policy where template_id = '28'
; 
```

非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:37:52.077

如果我了解您要查找的内容，您的第一个查询非常接近。这是我尝试过的：

```
SELECT p.policy_id, qcv.value 
FROM policy p
INNER JOIN quote q ON p.policy_id = q.policy_id 
INNER JOIN quote_clause qc ON qc.quote_id = q.quote_id 
INNER JOIN quote_clause_variable qcv ON qcv.quote_clause_id = qc.quote_clause_id 
WHERE p.template_id = '28' 
AND qcv.variable_name = 'R01011C1'; 
```

# ios - 如何将现有的 .momd 添加到 Xcode 4 中的项目中？

> ID：11892560
> 
> 赞同：1
> 
> 时间：2012-08-09T21:56:45.277
> 
> 标签：ios, core-data, xcode4

我有一个包含子项目的项目。该子项目有一个Core Data 模型并生成一个.momd“包”。我需要将该 .momd 包包含在项目构建时生成的主项目应用程序包中。.momd 文件已生成，并且位于构建目录中，但我看不到如何将其包含在最终的应用程序包中。

我可以将 .momd 作为文件添加到“复制捆绑资源”中（通过在我的支持文件组中添加对主项目的引用），但由于 .momd 不是 Finder 级别的捆绑包，因此将其添加为目录和 .momd 内容被复制到应用程序包中，而不是 .momd 文件夹本身，因此在应用程序运行时系统无法找到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T22:44:01.957

当然，在整个下午尝试了各种各样的事情之后，用谷歌和必应在 SO 中搜索，但没有提出任何问题，在我发布问题后不久，我就明白了。

将 .momd 文件添加到主应用程序项目时（我将其添加到“支持文件”组），选中“为任何添加的文件夹创建文件夹引用”而不是“为任何添加的文件夹创建组”（也不要选中“如果在子项目中生成 .momd，则将项目复制到目标组的文件夹中）

这样做会使 .momd 被复制到应用程序包中......

# jquery - Jquery On 而不是 Live 用于动态输入

> ID：11892561
> 
> 赞同：1
> 
> 时间：2012-08-09T21:56:48.117
> 
> 标签：jquery, jquery-on

我有这个代码...

```
// Display number of pixels left from nav width
$('.inputs input').live('keyup',function() {
    var nav_width = $('#nav-width').val();
    var sumOfVals = 0;
    $('.inputs input').each(function () {
    sumOfVals = sumOfVals + parseInt($(this).val());
});
sumOfVals = nav_width - sumOfVals;
    $('#px-left em').html(sumOfVals);
}); 
```

它需要在动态添加的输入字段的 keyup 事件上执行，但我想使用 'on' 事件。这可能吗？我曾尝试用“on”替换“live”，但没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:00:27.713

您不能只替换`live`为`on`. 如果您阅读有关文档，[`on`](http://api.jquery.com/on/)您会看到：

```
.on( events [, selector] [, data], handler(eventObject) ) 
```

因此，通过遵循您将`on`像这样使用的方法：

```
$('.closest-parent').on('keyup', '.inputs input', function () { ... }) 
```

`.closest-parent`是最接近的父元素`.inputs`。通过使用最近的父代而不是仅仅使用`document`您可以提高性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:58:59.417

这应该有效：

```
$(document).on('keyup', '.inputs input', function() {
    var nav_width = $('#nav-width').val();
    var sumOfVals = 0;
    $('.inputs input').each(function () {
    sumOfVals = sumOfVals + parseInt($(this).val());
}); 
```

# objective-c - “不兼容的指针到整数转换”

> ID：11892565
> 
> 赞同：0
> 
> 时间：2012-08-09T21:57:18.837
> 
> 标签：objective-c

对于 Objective-C 编程世界，我是一个*完全*的“菜鸟”，我遇到了各种各样的绊脚石。前几天我刚拿到 Stephen G. Kochan 的“Objective-C 编程，第 4 版”，并且一直在完成练习，其中包括创建 Fraction 类。好吧，作为我自己，我决定看看是否可以通过添加用于加法、减法、乘法和除法的方法来做一些超出本教程范围的“高级”修补。而且，我遇到了一些我还不知道该怎么做的事情......（1）调用带有（和不带）参数的类方法，以及（2）将它们的返回值分配给与返回相同类型的变量。引用的方法应该返回整数**（int）**输入数字，但由于某种原因，我在两个赋值语句上都收到错误：“不兼容的指针到整数转换...等”。一直把我的头撞在墙上一个小时。我究竟做错了什么？这是相关方法的代码：

```
-(void) add: frac1:(Fraction *) f1: (Fraction *) f2 
{ 
   int n1 = [Fraction: getNumerator()];
   int d1 = [Fraction: getDenominator()];
   // rest of method not yet written
} 
```

——安迪·H。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:58:49.220

```
int n1 = [Fraction getNumerator];
int d1 = [Fraction getDenominator]; 
```

不需要分号或括号。

一个方法是这样的：

```
[ClassName methodName:paramater nextParam:param2]; 
```

等等参数名称...

另外：您的方法声明也是错误的：

```
-(void) addfrac1:(Fraction *) f1 withF2:(Fraction *) f2 
```

摆脱`add:`and `f1:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:10:38.637

我将尝试冒着被否决的愤怒的风险并间接回答这个问题。

首先 - 在一个类中实现加法的常用方法是提供一种方法来给自己添加一些东西。因此，与其提供一个添加两个分数的方法，不如尝试提供一个将分数添加到自身并将结果作为新的 Fraction 对象返回的方法。

其次 -`get`在方法名称中使用通常用于表示间接返回对象和值的方法 - 如[可可编码指南中所述](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html#//apple_ref/doc/uid/20001282-BCIGIJJF)

最好只使用 @properties 作为分子和分母，而不是编写自己的访问器。

所以，IMO - 你的方法可能是：

```
- (Fraction *)addFraction:(NSFraction *)fraction {
    NSInteger numerator = self.numerator + fraction.numerator;
    NSInteger denominator = self.denominator + fraction.denominator;

    return [[NSFraction alloc] initWithNumerator:numerator andDenominator:denominator];
} 
```

当然，这假设您具有相关属性和启动器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T22:05:10.527

您误解了如何声明一个 Objective-C 方法。你输入了这个：

```
-(void) add: frac1:(Fraction *) f1: (Fraction *) f2 
```

以下是编译器如何解释它。`add:::`它看到一个带有三个参数的选择器（方法名） 。第一个参数名为`frac1`。第二个参数名为`f1`。第三个参数名为`f2`。由于您没有为`frac1`参数提供类型，因此编译器假定类型`id`（可以引用任何对象）。所以就像你输入了这个：

```
- (void)add:(id)frac1 :(Fraction *)f1 :(Fraction *)f2 
```

您可以像这样调用该方法：

```
id something;
Fraction *fraction1;
Fraction *fraction2;
[myCalculator add:something :fraction1 :fraction2]; 
```

但这可能不是你想要的。

我认为你想要做的是这样声明你的方法：

```
- (void)addFraction:(Fraction *)f1 toFraction:(Fraction *)f2; 
```

然后你可以这样称呼它：

```
Fraction *fraction1;
Fraction *fraction2;
[myCalculator addFraction:fraction1 toFraction:fraction2]; 
```

如果`Fraction`是一个 Objective-C 类，那么在你的`addFraction:toFraction:`方法中，你会想要发送你的参数消息来获取它们的分子和分母，像这样：

```
int n1 = [f1 numerator];
int d1 = [f1 denominator]; 
```

# python - 如何从可调用的视图中渲染 Jinja2 宏？

> ID：11892566
> 
> 赞同：5
> 
> 时间：2012-08-09T21:57:23.860
> 
> 标签：python, templates, macros, pyramid, jinja2

我定义了一些从多个模板调用的宏。

例如，产品页面有一个评论部分，它使用定义的宏`'helpers/review.jinja2'`来打印每个评论。该`'helpers/review.jinja2'`文件有这两个宏：

```
{% macro render_review(request,review) -%}
{% macro render_review_comment(request,comment) -%} 
```

当有人通过 ajax 提交新评论时，我想返回呈现的评论以便将内容附加到评论部分。

现在，我有一个`'review/review.jinja2'`看起来像这样的中间模板：

```
{% import 'helpers/review.jinja2' as review_helper %}
{{ review_helper.render_review(request,review) }} 
```

此模板是从视图中呈现的：

```
@view_config(route_name='review.add_review', renderer='review/review.jinja2')
def add_review(request):
    return dict(review=my_new_review) 
```

但我希望有更好的方法来做到这一点。那么，是否可以渲染模板中定义的宏？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T02:52:17.307

该解决方案实际上可以在 Armin 的另一个项目中找到 - Flask 实现了一种[`get_template_attribute`](http://flask.pocoo.org/docs/api/#flask.get_template_attribute)方法（有关方法的来源，请参见[此处）。](https://github.com/pallets/flask/blob/master/src/flask/helpers.py#L377)这将我们指向 Jinja2 的`Template`类，更具体地说，是`Template`类的[`module`属性](http://jinja.pocoo.org/docs/api/#jinja2.Template.module)。

我不知道 Pyramid 的 Jinja2 默认渲染器是否为您公开了该功能，但如果默认渲染器不允许您执行此类操作（完全理论上），则应该可以创建和注册自定义渲染器：

```
@view_config(route_name='review.add_review',
                renderer='helpers/review.jinja2:render_review')
def add_review(request):
    return dict(review=my_new_review) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-31T05:47:24.933

这种方法在其他地方被建议，它帮助了我：

```
@app.route("/test")
def test_view():
    t = app.jinja_env.get_template('macros.html')
    mod = t.make_module({'request': request})
    return mod.my_macro() 
```

[渲染 Jinja2 宏而不影响模板其余部分的内容](https://stackoverflow.com/q/21521566/67416)

# objective-c - 如何使用变量在 xcode 中将图像调用到不同的视图

> ID：11892567
> 
> 赞同：1
> 
> 时间：2012-08-09T21:57:40.033
> 
> 标签：objective-c, xcode

我目前正在 Xcode 4.4 中使用objective-c 而不在 cocos2d 中开发一个项目，其中我有一个名为 GameView 的视图和一个名为 Characters 的类。在 GameView 中有，嗯，游戏，这是你玩游戏的场景。在字符中，所有字符的图像和力量或它们独有的任何东西都被称为。**我想要它，以便我可以在 CharacterSelect 页面中选择一个角色，然后我选择的角色是 GameView 中的角色并且我正在控制。**现在我只是在处理图像。在 GameView 中，我基本上是在尝试设置一种方法来从 Characters 类中调用相应角色的图像。如果可以的话，我会制作角色的动画，但我会一步一步地进行。我想要的只是角色面向右侧时的相应图像 这是我在 GameView.m 中的代码，用于创建图像的函数，我知道我需要从 Characters 中的变量调用图像文件。bluebox 就像在 .h 中定义为 UIImageView 一样，实际上它只包含角色可以做的所有事情......例如左右按钮允许它移动等等......

```
 -(void)createCharacter
 {
     bluebox = [[UIImageView alloc] initWithFrame:
           CGRectMake(70, 100, 150, 130)];
     bluebox = [[UIImageView alloc] init];

 } 
```

在我的 Characters.m 中，我在我的 .h 字符中创建了一个 NSString，它被称为lookingRight1 ...然后对于我的一个角色，我有这个

```
-(void)megaMan
{
 lookingRight1 = @"MegaManRight1.png";
} 
```

现在我想我需要打电话给寻找正确的人。我实际上在尝试写这篇文章时让我自己感到困惑，所以请帮忙，如果你也不感到困惑的话。我的 CharacterSelect 页面并没有太多代码，但我所做的只是将标有角色名称的特定按钮链接到 GameView。如果你能请帮助我将非常感激。我认为如果你也可以展示一个模拟的第二个角色会有所帮助，这样我就可以看到如何获得我想要的角色......

抱歉，如果这让您感到困惑。

# php - php中的电话号码格式帮助

> ID：11892571
> 
> 赞同：1
> 
> 时间：2012-08-09T21:58:07.747
> 
> 标签：php, phone-number

我是 php 新手，知道有一个简单的解决方案，但我似乎找不到它。我希望在返回时调整用户输入符号的字段并应用格式。

```
static function getFormatedNum($num){
    if(empty($num)){}else{
    $first=  "(".substr($num, 0, 3).")";
    $second= substr($num,3,3)."-";
    $third=substr($num,6,4);
    $num=$first.$second.$third;}
    return $num; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:02:35.667

*假设输入格式为：5555555555*

```
function getFormattedNum($num)
{
    if($num){
        return "(" . substr($num,0,3) . ")"
            . substr($num,3,3) . "-"
            . substr($num,6);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-07T01:07:44.003

这并不适用于所有格式，一些电话号码可以以不同的格式放置，不能仅通过检查 011 或长度来完成。您需要一份所有区号/组合的完整列表，以检查每个可能的长度。

[http://support.hostgator.com/articles/specialized-help/making-international-calls-from-the-united-states](http://support.hostgator.com/articles/specialized-help/making-international-calls-from-the-united-states) 例如，您可能会看到英国 (UK) 的电话号码以其中一种方式表示：

(+44) (0)20 7930 4832 +44 20 7930 4832 020 7930 4832

简单的解决方案可能是。另外我对这段代码不满意，我确定是否可以简化大约一千次。

```
private function cleanNumber($uglyNumber){

    $number = preg_replace("/[^0-9]/","",$uglyNumber);
    if(($check = substr($number,0,3))!=='011'){
        //NON 011 Numbers

        switch(strlen($number)){
            //Same Area Code 
            //123-4567
            case 7:
                $prefix = substr($number,0,3);
                $SLN = substr($number,3,10);
                $cleanNumber = $prefix.'-'.$SLN;
                break;

            //Domestic US
            //No International Number
            case 10:
            $area = substr($number,0,3);
            $prefix = substr($number,3,3);
            $SLN = substr($number,6,10);
            $cleanNumber = '('.$area.') ' .$prefix.'-'.$SLN;
                break;

            case 11:
            // International Number [1]
                $country = substr($number,0,1);
                $area = substr($number,0,3);
                $prefix = substr($number,4,3);
                $SLN = substr($number,7,10);
                $cleanNumber = '['.$country .'] ('.$area.') ' .$prefix.'-'.$SLN;
                break;

            case 12:
            // International Number [12]
                $country = substr($number,0,2);
                $area = substr($number,0,3);
                $prefix = substr($number,4,3);
                $SLN = substr($number,7,10);
                $cleanNumber = '['.$country .'] ('.$area.') ' .$prefix.'-'.$SLN;
                break;

            case 13:
            // International Number [123]
                $country = substr($number,0,3);
                $area = substr($number,0,3);
                $prefix = substr($number,4,3);
                $SLN = substr($number,7,10);
                $cleanNumber = '['.$country .'] ('.$area.') ' .$prefix.'-'.$SLN;
                break;

            default:
                //dono 
                return $number;
        }

    }else{
        switch(strlen($number)){

            case 11:
                // ExitUS 001 [1]
                //No Area Code Country
                $exitUs = substr($number,0,3);
                $country = substr($number,3,1);
                $prefix = substr($number,4,3);
                $SLN = substr($number,7,11);
                $cleanNumber = ''.$exitUs .' ['.$country.'] ' .$prefix.'-'.$SLN;
                break;

            case 12:
                // ExitUS 001 [12]
                //No Area Code Country
                $exitUs = substr($number,0,3);
                $country = substr($number,3,2);
                $prefix = substr($number,4,3);
                $SLN = substr($number,7,12);
                $cleanNumber = ''.$exitUs .' ['.$country.'] ' .$prefix.'-'.$SLN;
                break;

            case 13:
                // ExitUS 001 [123]
                //No Area Code Country
                $exitUs = substr($number,0,3);
                $country = substr($number,3,3);
                $prefix = substr($number,6,3);
                $SLN = substr($number,9,13);
                $cleanNumber = ''.$exitUs .' ['.$country.'] ' .$prefix.'-'.$SLN;
                break;

            case 14:
                // ExitUS 001 [1]
                // With Country Code
                $exitUs = substr($number,0,3);
                $country = substr($number,3,1);
                $area   = substr($number,4,3);
                $prefix = substr($number,7,3);
                $SLN = substr($number,10,14);
                $cleanNumber = ''.$exitUs .' ['.$country.'] ('.$area.') ' .$prefix.'-'.$SLN;
                break;

            case 15:
                // ExitUS 001 [12]
                // With Country Code
                $exitUs = substr($number,0,3);
                $country = substr($number,3,2);
                $area   = substr($number,5,3);
                $prefix = substr($number,8,3);
                $SLN = substr($number,11,4);
                $cleanNumber = ''.$exitUs .' ['.$country.'] ('.$area.') ' .$prefix.'-'.$SLN;
                break;

            case 16:
                // ExitUS 001 [123]
                // With Country Code
                $exitUs = substr($number,0,3);
                $country = substr($number,3,3);
                $area   = substr($number,6,3);
                $prefix = substr($number,9,3);
                $SLN = substr($number,12,4);
                $cleanNumber = ''.$exitUs .' ['.$country.'] ('.$area.') ' .$prefix.'-'.$SLN;
                break;

            default:
                //dono 
                return $number;
        }

    }

    return $cleanNumber;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T22:04:25.243

**更新**：在同一个函数中完成所有工作

```
function getFormatedNum($num){
    //first strip all the non-digit characters from the input
    $num = preg_replace("/[^0-9]+/", "", $num);
    //and only then re-format the phone-number   
    if(!empty($num)){
      $first=  "(".substr($num, 0, 3).")";
      $second= substr($num,3,3)."-";
      $third=substr($num,6,4);
      $num=$first.$second.$third;
    }
    return $num;
}
//test
echo getFormatedNum("408.807.9565"); 
```

**输出：**

```
(408)807-9565 
```

# cuda - CUDA-如何对块进行平均？

> ID：11892575
> 
> 赞同：2
> 
> 时间：2012-08-09T21:58:26.240
> 
> 标签：cuda, average

我有一个关于平均块的问题。我输入的数据大小为 256*512，我将 256 个线程放在一个块中，所以总共有 512 个块。输出的大小应为 256，每个元素是不同块之间相同线程 ID 的平均值。所以换句话说，来自所有 512 个块的线程 1 被平均，并将结果提供给输出数组的线程 1。类似地，来自所有 512 个块的线程 2 被平均并提供给输出数组的线程 2。我知道通过使用共享内存在块内进行平均是非常快速和高效的，但这不是这里的条件。使用 NPP 函数可以让我在 for 循环中完成它，但它确实很耗时。任何人都可以就如何有效地对块进行平均提出建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:35:10.147

为什么不翻转它，每个块执行 512 个线程并进行共享内存减和以计算块内的总和，然后除以 512 并存储到全局内存？

[您还可以使用推力](http://thrust.googlecode.com)快速编码，使用按键减少操作。

# java - 找到围绕多个市场的最短和最便宜的路径

> ID：11892576
> 
> 赞同：0
> 
> 时间：2012-08-09T21:58:27.153
> 
> 标签：java, traveling-salesman

我正在研究我的硕士项目，希望你能给我一些关于如何在 java 中解决以下问题的想法：

> 交易者想要购买物品清单。他可以从多个卖家/市场购买商品。市场与买方的距离不同。买家必须想办法在尽可能短的距离内购买最便宜的商品。

本质上，买家希望在寻找最便宜的商品的同时尽量减少他的旅行成本。

我希望描述是有道理的，如果我不清楚，请告诉我，我会尝试以不同的方式解释它。

到目前为止，我有一个买家类、卖家类、项目类和主类。我打算把买家的位置和卖家的位置使用Java Point类型。

我正在考虑使用类似 Dijkstra 的最短路径算法，但问题是如果买家走得更远，他可能会以更便宜的价格买到一件物品。

提前感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T22:03:02.187

首先，这是一个算法问题，而不是 Java 问题。一旦确定了要使用的算法，您应该能够轻松地用您选择的语言实现它（尽管 Python 比 Java 容易得多）。

至于算法，这是一个 NP-Hard 问题，因此没有已知的多项式时间算法。（如果您找到一个，您将获得一百万美元的奖金）。您希望处理什么样的输入？即使最坏情况的复杂性很差，在实践中也可能有一些效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T22:25:05.843

假设差旅成本计入总成本，并且您想最小化总差旅+购买成本，这听起来就像[旅行购买者问题](http://en.wikipedia.org/wiki/Traveling_purchaser_problem)，旅行推销员问题是一个特例。wiki 文章中的参考资料对该问题有几种不同的解决方案。请注意，这个问题是 NP-Hard，因此没有一个已知的解决方案可以保证既快速又给出最佳解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T22:01:43.723

我认为 Dijkstra 的方向是正确的。我们有一个类似的问题，我们需要将客户优先级与旅行距离考虑在内，我们只是决定了一种将优先级与距离相关联的方式。在您的情况下，这会更容易，因为可以轻松比较旅行成本和物品成本。只需将两者的总和作为您的边缘权重。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T22:09:27.787

“买家必须想办法在尽可能短的距离内买到最便宜的商品。”

那只是找到最便宜物品的位置，然后找到它们之间的最短路线。如果相同的物品在不同的位置以相同的价格提供，那么你为每条路线做最短路径。

或者找到涵盖所有项目的最短路线，然后将价格相加。

只有当您添加旅行距离的成本因素（例如，在不同地点之间行驶的汽油）时，您旅行的距离才会与您的购物旅行成本相关。

你可能想谷歌“遗传算法旅行商问题”

# c# - UI 不像 ObservableCollection

> ID：11892585
> 
> 赞同：1
> 
> 时间：2012-08-09T21:59:07.803
> 
> 标签：c#, wpf, listview, observablecollection

我试图让 ListView 更改为我在 ObvservableCollection 中修改的任何值。

我目前正在使用它并将集合绑定到我的 ListView

```
private ObservableCollection<Task> _tasks = TaskInit.TaskCollection;
        /// <summary>
        /// Observable Collection to hold all tasks
        /// </summary>
        /// 

        public ObservableCollection<Task> TasksCollection
        {
            get { return _tasks; }
            set
            {
                _tasks = value;
                NotifyPropertyChanged("TasksCollection");
            }
        } 
```

问题是如果我要使用以下代码：

```
TaskInit.TasksCollection[2].TaskNumber = "hi"; 
```

该值仍将与以前的值相同，即使它应该已更改。

谁能指出我可能遇到的问题？

xaml 的第一行是：

```
<ListView SelectionMode="Single" ScrollViewer.CanContentScroll="True" x:Name="listTasks" Margin="0,0,0,35" Background="{x:Null}" BorderBrush="{x:Null}" ItemsSource="{Binding TasksCollection, Mode=TwoWay}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" BorderThickness="0" FontFamily="Myriad Pro" Foreground="{x:Null}" IsSynchronizedWithCurrentItem="True"> 
```

任务类：

```
public class Task : INotifyPropertyChanged
    {
        /// <summary>
        /// 
        /// </summary>
        public string Module { get; set; }
        /// <summary>
        /// 
        /// </summary>
        public string FirstValue { get; set; }
        /// <summary>
        /// 
        /// </summary>
        public string SecondValue { get; set; }
        /// <summary>
        /// 
        /// </summary>
        public string ThirdValue { get; set; }
        /// <summary>
        /// 
        /// </summary>
        public int Minutes { get; set; }

        /// <summary>
        /// 
        /// </summary>
        public string TaskNumber { get; set; }

        /// <summary>
        /// 
        /// </summary>
        public string Story1 { get; set; }

        /// <summary>
        /// 
        /// </summary>
        public string Story2 { get; set; }

        /// <summary>
        /// 
        /// </summary>
        public string Story3 { get; set; }

        /// <summary>
        /// 
        /// </summary>
        public string NetworkAdapter { get; set; }

        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T22:04:21.603

ObservableCollection 将处理从集合中添加或删除项目的情况，但不会处理更改集合中项目的属性的情况。[根据 MSDN：](http://msdn.microsoft.com/en-us/library/ms668604.aspx) *表示动态数据集合，在添加、删除项目或刷新整个列表时提供通知。*

您需要确保您的 Task 类实现 INotifyPropertyChanged 接口，并在其 TaskNumber 属性更改时触发 PropertyChanged 事件：

```
 private string _taskNumber;
 public string TaskNumber
 {
     get { return _taskNumber; }
     set
     {
         if(_taskNumber!= value)
         {
            _taskNumber= value;
            OnPropertyChanged("TaskNumber");
         }
     }
 } 
```

您的 Task 类实现了 INotifyPropertyChanged，但当其属性的值发生更改时，它实际上从未触发 PropertyChanged 事件。当您的每个属性更改时，您需要手动调用 OnPropertyChanged - 它不会自动发生。

# c++ - 这个 C++ 测验的答案背后的解释是什么？

> ID：11892591
> 
> 赞同：0
> 
> 时间：2012-08-09T21:59:34.920
> 
> 标签：c++

[我在C++ 测验](http://www.barrgroup.com/Embedded-Systems/Embedded-C++-Quiz)中遇到了这个问题（初学者 C++）：我的答案不正确，我想了解正确答案背后的解释 - “未定义的行为”

问题：函数 foo() 返回后，下面的代码会发生什么？

```
class base
{
    public:
        base() { }
        ~base() { }
};

class derived : public base
{
    private:
        int *p_pi_values;

    public:
        derived() : p_pi_values(new int[100]) {  }
        ~derived() { delete [] p_pi_values; }
};

void foo(void)
{
    derived *p_derived = new derived();
    base *p_base = p_derived;

    // Do some other stuff here.

    delete p_base;
} 
```

我给出了这个答案，结果是错误的 ==> 整数数组将不会被正确删除。

正确答案 ==> 行为未定义。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T22:04:08.383

您的基类的析构函数不是`virtual`. 这只是语言的一条规则，如果您通过指向基子对象的指针删除对象，则相应的基类必须具有虚拟析构函数，否则它是未定义的行为。

（实际上，如果您的基类没有虚拟析构函数，编译器可能不会发出必要的代码来对派生对象执行所有必要的清理。它只会假设您的对象与指针而不必费心去进一步查看，因为实际上对最派生对象的多态查找是以您不想不必要地强加的代价。）

**§5.3.5/3：**

> 在第一种选择（删除对象）中，如果操作数的静态类型与其动态类型不同，则静态类型应为操作数动态类型的基类，并且静态类型应具有虚拟析构函数或行为未定义

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T22:06:00.367

您应该在基类中使您的析构函数成为虚拟的。现在代码的问题是`delete p_base`会导致基类的析构函数被调用。派生类中的那个不会被调用，分配给整数数组的内存也不会被释放。

发生这种情况是因为如果基类中的方法不是虚拟的，编译器只会查看指针类型并调用位于该类型中的方法（在这种情况下 - 它是基类），即决定调用什么方法编译时间基于指针的类型，而不是指针所指对象的真实类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T22:52:41.580

出于好奇，我检查了 C++ 规范。问题的答案是第 5.3.5 节中的第 3 项：

> 在第一种选择（删除对象）中，如果要删除的对象的静态类型与其动态类型不同，则静态类型应为要删除的对象的动态类型的基类，并且静态类型应具有虚拟析构函数或*行为未定义。*

就个人而言，我会以与您相同的方式回答。如果忽略编译器的警告，最可能的结果是派生类的析构函数不会被调用。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-09T22:06:25.860

我猜编译器被允许优化这段代码，因此 p_derived 到 p_base 的分配永远不会发生。

更具体地说，编译器可以将代码优化为一行。

删除新的派生（）；

因此，人们认为像这样未定义的行为可以改变编译器真正优化代码的方式。

# java - Java SMS USB 调制解调器

> ID：11892594
> 
> 赞同：2
> 
> 时间：2012-08-09T21:59:47.117
> 
> 标签：java, sms, modem, smslib

我正在尝试使用 USB 调制解调器发送短信（我有一个 D-Link Usb 调制解调器）。我刚刚找到 SmsLib，但我不知道如何使用 USB 调制解调器。我找到的示例是针对串行调制解调器的，我没有找到任何关于 USB 调制解调器的示例。我需要将 USB 端口映射为串行端口吗？用什么？SmsLib 支持我的调制解调器。您对如何使用 SmsLib 配置 USB 调制解调器有任何想法吗？

（我有一台 MacBook）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:03:07.110

所有 USB 调制解调器在系统中都可用作 COM（串行端口）。如果操作系统是 Windows，请打开设备管理器并检查调制解调器属性。端口号在那里可见。我正在使用一个，它在基于 SMSLib 的 java 应用程序中运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T06:48:14.670

没有 MacBook 经验，但这里是 Linux 中的步骤。

1.  使用 dmesg 查找操作系统为调制解调器指定的名称，例如 /dev/ttyACM0
2.  ln -sf /dev/ttyACM0 /dev/ttyS0
3.  使用 ls 确保 /dev/ttyS0 可由您写入
4.  使用 /dev/ttyS0 更新 javax.comm.properties（使用 Java Comm 时）
5.  将 /dev/ttyS0 修补到发送和接收示例中

Java Comm 似乎不支持 OS/X，但 RxTx 支持。HTH。祝你好运！

# ruby-on-rails - 部分在 ActiveAdmin 中呈现两次

> ID：11892595
> 
> 赞同：9
> 
> 时间：2012-08-09T21:59:53.963
> 
> 标签：ruby-on-rails, activeadmin

我的部分被渲染了两次：在页面顶部和它应该在的地方。显然，这只发生在我有特定于 ActiveAdmin 的代码 (table_for) 时。

任何帮助是极大的赞赏。下面是我正在使用的一些代码片段。

**在我的活动管理文件中：**

```
panel "Children - SubProcesses" do
    text_node link_to "New", new_admin_sub_process_node_path(:parent_id => process_node.id)
    div render :partial => "/admin/process_nodes/child_list", :locals => { :parent => process_node }
end 
```

**在 _child_list.html.erb 文件中**

```
<%=
unless parent.children.empty?
table_for parent.children do 
    column :id
    column :name
    column "Actions" do |child_node|
            text_node link_to "View", admin_process_node_path(child_node)
            text_node " "
            text_node link_to "Edit", edit_admin_process_node_path(child_node)
            text_node " "
            text_node link_to "Delete", admin_process_node_path(child_node),  :method => :delete, :confirm => "Delete?"
    end
end
end
%> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:05:53.900

根据我的阅读，ActiveAdmin 将根据当前模型/资源名称自动获取部分路径。这意味着传递`"child_list"`将导致
`"/admin/process_nodes/_child_list.html.erb"`.

用法是

```
div render "child_list", :locals {  :parent => process_node } 
```

`unless`此外，将您的语句包含在 ActiveAdmin 面板块中似乎会更好。如果没有子进程，您就不必添加不必要的渲染调用。

```
panel "Children - SubProcesses" do
    text_node link_to "New", new_admin_sub_process_node_path(:parent_id => process_node.id)

    unless parent.children.empty?
        div render "child_list", :locals {  :parent => process_node }
    end
end 
```

最后，我不知道使用部分是否有很大的好处。我不知道您在部分中是否还有其他内容，但是您可以这样写。

```
panel "Children - SubProcesses" do
  text_node link_to "New", new_admin_sub_process_node_path(:parent_id => process_node.id)

  unless parent.children.empty?
    table_for parent.children do 
      column :id
      column :name
      column "Actions" do |child_node|
        text_node link_to "View", admin_process_node_path(child_node)
        text_node " "
        text_node link_to "Edit", edit_admin_process_node_path(child_node)
        text_node " "
        text_node link_to "Delete", admin_process_node_path(child_node),  :method => :delete, :confirm => "Delete?"
        end
    end
  end
end 
```

# iphone - 来自 Plist 的数据在 UITableView 中的排序不正确

> ID：11892598
> 
> 赞同：0
> 
> 时间：2012-08-09T22:00:05.340
> 
> 标签：iphone, ios, xcode, uitableview, plist

我有存储在 plist 中的数据，但是当我将其拉到 UITableView 时，由于某种原因它会重新排序。这是我的表格视图数据源方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [self.lunch_Dinner count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [[self.lunch_Dinner allKeys] objectAtIndex:section];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSString *typeOfEntree = [self tableView:tableView titleForHeaderInSection:section];
    return [[self.lunch_Dinner valueForKey:typeOfEntree] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"EntreeCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    NSString *typeOfEntree = [self tableView:tableView titleForHeaderInSection:indexPath.section];
    NSString *entree = [[self.lunch_Dinner valueForKey:typeOfEntree] objectAtIndex:indexPath.row];

    cell.textLabel.text = entree;

    return cell;
} 
```

这是 plist 的顺序：

*   开胃菜
*   汤
*   意大利面
*   比萨饼
*   特价商品

这是编译后 UITableView 中的结果顺序：

*   比萨饼
*   汤
*   开胃菜
*   意大利面
*   特价商品

任何帮助都会很棒！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:22:56.267

如果要将表存储在 plist 中，最好考虑以下结构：

```
NSArray *sections = [NSArray arrayWithObjects:
    [NSDictionary dictionaryWithObject:
        [NSArray arrayWithObjects:row_1, row_2, ... , nil] 
            forKey:@"section name 1"],
    [NSDictionary dictionaryWithObject:
        [NSArray arrayWithObjects:row_1, row_2, ... , nil] 
            forKey:@"section name 2"],
    ...
    [NSDictionary dictionaryWithObject:
        [NSArray arrayWithObjects:row_1, row_2, ... , nil] 
            forKey:@"section name N"], 
    nil]; 
```

这种代码表示很容易复制为 plist。如下例所示创建它

![在此处输入图像描述](../Images/37b2cf1673faf706152ee3c169bd8ef0.png)

这种结构可以很容易地用作 UITableView 数据源

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [self.datasource count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSDictionary *dict = [self.datasource objectAtIndex:section];
    return [dict.allKeys lastObject];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSDictionary *dict = [self.datasource objectAtIndex:section];
    return [dict.allValues.lastObject count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSDictionary *dict = [self.datasource objectAtIndex:indexPath.section];
    id cellPresenter = [dict.allValues.lastObject objectAtIndex:indexPath.row];
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:08:07.103

看起来`lunch_Dinner`是一个`NSDictionary`. `NSDictionary`s 是无序的，因此不能保证它们的特定输出顺序。

有点难以确切地看到您从这里拥有一个键/值对获得了什么值，但一种选择是保持一个`NSArray`具有正确顺序的单独的，并使用它来正确填充事物。

# javascript - Javascript for..in 对象属性

> ID：11892601
> 
> 赞同：0
> 
> 时间：2012-08-09T22:00:19.463
> 
> 标签：javascript, json

我有以下 JSON：

```
{"data":[{"id":1,"client_id":1},{"id":2,"client_id":1}]} 
```

我正在尝试做一个`for...in`，但有些事情进展不顺利。

看我的代码：

```
for (post in data) {
    console.log(post.client_id); //return undefined
} 
```

但如果我这样做：

```
for (i=0 ; i<data.length; i++) {
    console.log(data[i].client_id); //return the correct value
} 
```

为什么`for..in`在这种情况下我不能迭代？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:02:01.797

“数据”属性的值是一个数组。你需要：

```
for (var i = 0; i < json.data.length; ++i)
  console.log(json.data[i].client_id); 
```

这是假设 JSON 已被解析并存储在一个名为“json”的变量中。如果它实际上被称为“数据”，那么它将是“data.data”而不是“json.data”。

你真的不应该`for ... in`对真正的数组使用循环。由于各种原因，这是一个坏习惯。使用数字索引或类似`.forEach()`新浏览器中可用的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:08:31.407

首先，您永远不应该使用`for/in`. 该结构迭代对象的属性。您将获得所有数组元素，但您也可能获得对象的其他可迭代属性。

数组应始终使用传统`for`循环进行迭代，如下所示：

`for (var i = 0; i < arr.length; i++)`.

其次，您必须确保正确遵循自己的数据结构。你有这个：

```
var item = {"data":[{"id":1,"client_id":1},{"id":2,"client_id":1}]}; 
```

展开更多看起来像这样：

```
var item = {
    "data":[
        {"id":1,"client_id":1},
        {"id":2,"client_id":1}
     ]
}; 
```

因此，您的 JSON 是一个对象。该对象有一个属性`data`，其中一个属性的值是一个包含对象的数组。您将通过以下方式获得数组中的第一项：

```
item.data[0] 
```

或者该对象上的属性：

```
item.data[0].id
item.data[0].client_id 
```

您将像这样迭代该数组中的所有项目：

```
for (var i = 0; i < item.data.length; i++) {
    // access each object in the array
    item.data[i].id
    item.data[i].client_id
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T22:02:40.457

它应该是这样的：

```
for (var post in data) {
      console.log(data[post].client_id); //return undefined
} 
```

这是使用 for... 进行迭代的正确形式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T22:02:47.647

```
for (post in data) {
    console.log(post.client_id); //return undefined
} 
```

你做错了，试试这样：

```
for (post in data) {
    console.log(data[post].client_id); //return undefined
} 
```

您实际上还应该包含一个过滤器，因为原型中的东西可能会泄漏：

```
for (post in data) {
    if (data.hasOwnProperty(post)) {
        console.log(data[post].client_id); //return undefined
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T22:03:33.953

这是因为您的 JSON 的结构。请注意，您有一个只有一个顶级属性的外部对象：`data`.

```
{ "data":
    [
        {"id":1,"client_id":1},
        {"id":2,"client_id":1}
    ]
} 
```

`data`没有`client_id`属性：它是您尝试迭代的子条目的数组，并且这些子条目*具有*属性`client_id`。这就是为什么您的索引循环`data`有效的原因。

# java - 添加 ActionbarSherlock 后出现 abs__attrs.xml 错误

> ID：11892607
> 
> 赞同：0
> 
> 时间：2012-08-09T22:01:02.680
> 
> 标签：java, android, android-actionbar, actionbarsherlock

我的项目成功了，我把它放在了 Git 上。现在我想在一段时间后再做一些工作。我正在从 Git 中检索项目。我能够同时拉动我的项目和 ActionbarSherlock 项目。两者都没有错误，但是我的项目对 ActionbarSherlock 的依赖不存在。ActionbarSherlock 项目不在 Android 构建目标下。但是，当我在项目的 Android 构建目标下添加 ActionbarSherlock 项目时，我在 abs__attrs.xml 中出现错误。如果我从我的项目中删除 ActionbarSherlock 项目依赖项，错误就会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:05:05.417

文件夹结构已损坏。

# java - 为什么 onActivityResult 意图数据为空？

> ID：11892608
> 
> 赞同：1
> 
> 时间：2012-08-09T22:01:05.833
> 
> 标签：java, android, null

这让我快疯了。谁能指出我的错误。当活动结果返回时，意图数据始终为空。

```
public void btnAddActionOnClick (View v) {
Intent i = new Intent(NFCEditActivity.this, NFCAddActionActivity.class);
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
this.startActivityForResult(i,1);
return; 
} 
```

...

```
 @Override
protected void onActivityResult (int requestCode, int resultCode, Intent data) {      super.onActivityResult(requestCode,resultCode,data);

  if(data==null) { Log.e(LOG_TAG,"Intent bundle extras 'data' is null!"); return ; }
      ...
  } 
```

...

```
@Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position,   long arg3) {
        selectedAction = (Action) lv.getItemAtPosition(position);
        Intent data = new Intent();
        data.putExtra("action", selectedAction.intActionNumber);
            data.putExtra("test", "test");
        setResult(RESULT_OK, intent);

        finish();
        return;
    }  
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:05:28.130

看起来您发送了错误的 Intent。不应该`setResult(RESULT_OK, data)`，不是`setResult(RESULT_OK, intent)`吗？

# javascript - 如何使用 HTML 图像请求将数据发送到服务器，或返回数据作为响应

> ID：11892615
> 
> 赞同：3
> 
> 时间：2012-08-09T22:01:43.387
> 
> 标签：javascript, asp.net, browser-cache

我正在通过创建图像标签并将其注入 DOM 来在 javascript 中创建像素图像。

标签看起来像这样：

`<img style="height:0;visibility:hidden;display:none;" src="http://xyz.com/pixel.aspx">`

正如你所看到的，这个标签实际上会调用一个 ASP.Net 页面，它会做一些处理并写回一个像素，如下所示：

```
byte[] _imgbytes = Convert.FromBase64String("R0lGODlhAQABAIAAANvf7wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");
Response.ContentType = "image/gif";
Response.AppendHeader("Content-Length", _imgbytes.Length.ToString());
Response.Cache.SetLastModified(DateTime.Now);
Response.Cache.SetCacheability(HttpCacheability.Public);
Response.BinaryWrite(_imgbytes); 
```

我需要的是一种将一小段数据（在像素请求之前在 javascript 中生成的 GUID 值）传递到服务器或将一些数据（在像素 aspx 代码中生成的不同 GUID）传递回浏览器的方法一种可以被javascript获取的方式。

注意事项：

1.  不能使用查询字符串，因为像素需要可缓存，如果查询字符串不同，则在后续请求中不会从浏览器缓存中提取像素（文件名将不同）。
2.  无法使用 cookie，像素请求与应用程序位于不同的根域上，并且在禁用第三方 cookie 的情况下需要此功能。
3.  不能使用AJAX，因为不想担心跨域问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:05:36.390

使用`http://xyz.com/pixel.aspx/your-guid-here`. 然后只需配置您的网络服务器和/或应用程序，这样就不会导致 404 错误，而是执行您的 aspx 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T21:34:28.720

我自己解决了这个问题。

我没有使用图像，而是使用远程脚本请求。所以我注入的标签是这样的：

`<script async src="http://xyz.com/tracking.aspx"></script>`

然后，在我的 aspx 中，我有以下内容：

```
string script = "(function(){Complete('" + guidValue + "');})();";

Response.ContentType = "application/javascript";
Response.Cache.SetLastModified(DateTime.Now);
Response.Cache.SetCacheability(HttpCacheability.Public);
Response.Write(script); 
```

当响应返回到浏览器时，该`Complete`方法（位于页面已加载的 javascript 文件中）使用我的 guid 参数执行。这使我的页面可以完全访问 guid。

此外，由于请求 URL 永远不会更改，因此脚本会被浏览器正确缓存。

瞧。

# delphi - 访问子 GUI 属性标准

> ID：11892618
> 
> 赞同：2
> 
> 时间：2012-08-09T22:02:03.340
> 
> 标签：delphi, oop, standards

我想知道访问子组件控件属性的标准是什么。

例如，我有我的主窗体，它创建了一个带有标签的子窗口。使用 Delphi 可以只执行 ChildForm.Label.Caption := 'text'，但是由于某些未知原因，这对我来说感觉不对。设置文本的另一种方法是为 ChildForm 设置一个属性，该属性在设置时调用更新标签标题的方法。

有什么理由为什么我应该以一种或另一种方式做这件事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:24:40.740

想到了四种可能性：

*   a：按照您的建议，直接访问子表单的组件和它们的属性

    ```
    ChildForm.Label.Caption := 'text', 
    ```

**加**：快速简便。**减号**：您的子窗体的“内部”不必要地暴露于外部世界，因此您的调用代码可能会变得更加脆弱。

*   b：通过子窗体的新发布属性访问

    ```
    ChildForm.LabelCaption := 'text', 
    ```

**另外**：如果您希望能够通过 IDE 表单设计器轻松设置属性，这很有用。更好地封装上面的“a”。**减号**：可能是我最不喜欢的方法，但我无法准确解释原因。属性很强大，但所有在幕后发生的事情让我有点担心

*   c: 通过子表单设置方法访问

    ```
    ChildForm.SetCaption('text') 
    ```

**加**：比 B 更简单，但具有相同改进的封装，并且（在我看来）感觉更干净。

*   d：对于设置，通过额外的构造函数参数访问

在许多情况下，您只是希望能够在创建表单时稍微自定义它。在这种情况下，向构造函数添加参数是最简单的方法。它使您不必担心属性的“可读”性质，并且标题在创建表单时变得固定（就外界而言），这可能会有所帮助。

```
FormChild := TChildForm.Create(nil, 'test'); 
```

**加：**省去额外属性或方法的麻烦。**减号：**并非在所有情况下都适用。

# grails - Groovy 元编程

> ID：11892620
> 
> 赞同：0
> 
> 时间：2012-08-09T22:02:16.897
> 
> 标签：grails, groovy, overriding, metaprogramming, metaclass

我想覆盖 Grails 中的方法定义。我正在尝试使用 Groovy 元编程，因为我要覆盖的类属于框架。

下面是原来的类。

```
class SpringSocialSimpleSignInAdapter implements SignInAdapter {
    private RequestCache requestCache

  SpringSocialSimpleSignInAdapter(RequestCache requestCache) {
     this.requestCache = requestCache;
 }

    String signIn(String localUserId, Connection<?> connection, NativeWebRequest request) {
      SignInUtils.signin localUserId
      extractOriginalUrl request
   }
} 
```

我正在尝试像下面这样覆盖

```
SpringSocialSimpleSignInAdapter.metaClass.signIn = {java.lang.String str, org.springframework.social.connect.Connection conn, org.springframework.web.context.request.NativeWebRequest webreq ->
        println 'coming here....'  // my implementation here
        return 'something'
    } 
```

但由于某种原因，压倒一切并没有变好。我无法弄清楚。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:14:36.333

是的，好像是那个bug。我不知道您的整个情况，但无论如何，这是我提出的一个小解决方法：

1.  在您的类定义中，您没有实现接口
2.  你创建你的对象并做你的超魔
3.  使用 groovy coercion 使其充当接口，然后您可以传递它

这是我使用 JIRA 错误制作的一个小脚本来证明它：

```
interface I {
    def doIt()
}

class T /*implements I*/ {
    def doIt() { true }
}

def t = new T()
assert t.doIt()

t.metaClass.doIt = { -> false }

// here the coercion happens and the assertion works fine
def i = t as I
assert !i.doIt()
assert !t.doIt()

// here the polymorphism happens fine
def iOnlyAcceptInterface(I i) { assert !i.doIt() }
iOnlyAcceptInterface(i) 
```

# javascript - 比较日期时，全日历中的 DayClick 事件警报

> ID：11892621
> 
> 赞同：1
> 
> 时间：2012-08-09T22:02:18.187
> 
> 标签：javascript, fullcalendar

当用户在 Fullcalendar dayClick 事件中单击月视图中的日槽时，我希望收到一条警报，指出该日期不可用。日历上的某些日期被阻止，例如 2012 年 12 月 10 日 - 2012 年 12 月 14 日。

我写了这段代码，但由于我是新手，我需要有人帮我理解这里有什么问题：

```
 dayClick: function (date, allDay, jsEvent, view) {
    var myDate=new Date();
    myDate.setFullYear(2012,11,10);

    var deadline=new Date();
    deadline.setFullYear(2012,11,14);

   if (myDate <= deadline)
   {
   alert("No reservations available");
   return false;
   } 
```

fullcalendar 集成在 ASP.NET MVC 应用程序中。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:57:20.873

检查这个小提琴 - [http://jsfiddle.net/100thGear/zBZrs/](http://jsfiddle.net/100thGear/zBZrs/)

您需要将`date`传递给`dayClick`eventCallback 的参数与您的截止日期进行比较。

让我知道这是否有帮助。

# python - StringIO 和与 'with' 语句的兼容性（上下文管理器）

> ID：11892623
> 
> 赞同：53
> 
> 时间：2012-08-09T22:02:29.637
> 
> 标签：python, python-2.x, with-statement, contextmanager

我有一些带有遗留函数的遗留代码，该函数将文件名作为参数并处理文件内容。代码的工作传真如下。

我想要做的不是必须将我生成的一些内容写入磁盘才能使用这个遗留功能，所以我虽然可以`StringIO`用来创建一个对象来代替物理文件名。但是，这不起作用，如下所示。

我认为`StringIO`这是解决这个问题的方法。谁能告诉我是否有办法使用这个遗留函数并在参数中传递一些不是磁盘上的文件但可以被遗留函数处理的东西？遗留函数确实让`with`上下文管理器对`filename`参数值进行处理。

我在谷歌遇到的一件事是：[http](http://bugs.python.org/issue1286) ://bugs.python.org/issue1286 ，但这对我没有帮助......

**代码**

```
from pprint import pprint
import StringIO

    # Legacy Function
def processFile(filename):
    with open(filename, 'r') as fh:
        return fh.readlines()

    # This works
print 'This is the output of FileOnDisk.txt'
pprint(processFile('c:/temp/FileOnDisk.txt'))
print

    # This fails
plink_data = StringIO.StringIO('StringIO data.')
print 'This is the error.'
pprint(processFile(plink_data)) 
```

**输出**

这是输出`FileOnDisk.txt`：

```
['This file is on disk.\n'] 
```

这是错误：

```
Traceback (most recent call last):
  File "C:\temp\test.py", line 20, in <module>
    pprint(processFile(plink_data))
  File "C:\temp\test.py", line 6, in processFile
    with open(filename, 'r') as fh:
TypeError: coercing to Unicode: need string or buffer, instance found 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-08-09T22:10:49.883

`StringIO`实例已经*是*一个打开的文件。`open`另一方面，该命令只接受文件名，返回一个打开的文件。`StringIO`实例不适合作为文件名。

此外，您不需要关闭`StringIO`实例，因此也不需要将其用作上下文管理器。虽然关闭实例会释放分配的内存，但让垃圾收集器获取对象也是如此。无论如何，如果您想确保释放内存同时仍持有对对象的引用，[`contextlib.closing()`上下文管理器](https://docs.python.org/library/contextlib.html#contextlib.closing)可以负责关闭对象。

如果您的所有遗留代码都可以采用文件名，那么`StringIO`实例不是要走的路。改用该[`tempfile`模块](http://docs.python.org/library/tempfile.html)生成一个临时文件名。

这是一个使用上下文管理器来确保临时文件随后被清理的示例：

```
import os
import tempfile
from contextlib import contextmanager

@contextmanager
def tempinput(data):
    temp = tempfile.NamedTemporaryFile(delete=False)
    temp.write(data)
    temp.close()
    try:
        yield temp.name
    finally:
        os.unlink(temp.name)

with tempinput('Some data.\nSome more data.') as tempfilename:
    processFile(tempfilename) 
```

您还可以切换到`io`模块提供的更新的 Python 3 基础设施（在 Python 2 和 3 中可用），其中/[`io.BytesIO`](https://docs.python.org/3/library/io.html#io.BytesIO)是更强大的替代品。该对象确实支持用作上下文管理器（但仍不能传递给）。`StringIO.StringIO``cStringIO.StringIO``open()`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T22:05:45.040

你可以定义你自己的开放函数

```
fopen = open
def open(fname,mode):
    if hasattr(fname,"readlines"): return fname
    else: return fopen(fname,mode) 
```

但是想要在完成后调用 __exit__ 并且 StringIO 没有退出方法...

你可以定义一个自定义类来使用这个打开

```
class MyStringIO:
     def __init__(self,txt):
         self.text = txt
     def readlines(self):
          return self.text.splitlines()
     def __exit__(self):
          pass 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-20T08:20:14.190

这个是基于[contextmanager的python doc](https://docs.python.org/2/library/contextlib.html)

它只是用简单的上下文包装了StringIO，当**exit**被调用时，它会返回到屈服点，并正确关闭StringIO。这避免了制作临时文件的需要，但是对于大字符串，这仍然会占用内存，因为 StringIO 缓冲了该字符串。它适用于大多数您知道字符串数据不会很长的情况

```
from contextlib import contextmanager

@contextmanager
def buildStringIO(strData):
    from cStringIO import StringIO
    try:
        fi = StringIO(strData)
        yield fi
    finally:
        fi.close() 
```

然后你可以这样做：

```
with buildStringIO('foobar') as f:
    print(f.read()) # will print 'foobar' 
```

# google-apps-script - 我应该使用哪些技术来构建 gmail 扩展程序

> ID：11892634
> 
> 赞同：-1
> 
> 时间：2012-08-09T22:03:06.430
> 
> 标签：google-apps-script, gmail

我正在寻找一些关于我“应该”研究什么我被要求记住的特定项目的建议。通过探索各种 Google 技术，我已经这样做了大约 3 天，但似乎没有一个是完全正确的。

我需要为 gmail 整理一些与我为 Windows Outlook 整理的大致相当的东西。我将简要解释一下我为 Outlook 用户所做的工作，让您了解我在寻找什么。我整理了一个 Outlook C# 插件，当 Outlook 在启动时加载它时，它会向 Outlook 界面添加许多可点击的选项卡、按钮和其他各种界面元素。当您单击它们时，我的加载项中的 C# 代码将以各种方式调用以执行各种活动，例如归档当前在由我们的一个 Web 应用程序管理的远程数据库中选择的电子邮件消息。它通过调用可用于任何加载的 AddIn 的各种 Outlook C# API 来提取或操作各种 Outlook“对象”来实现这一点。它在单击按钮时所做的另一件事是调出 AddIn 从 .Net 类“webbrowser 控件”实例创建的 Web 浏览器，本质上是将 chrome 添加到 IE“引擎”。它还将它需要的内容添加到该 Web 浏览器的 DOM 中，以使可能在该浏览器的页面中运行的 javascript 代码可以调用大量的 Add-In C# 函数，本质上为我们的 Web 应用程序提供了一种“询问”的方式我的插件来代表该应用程序创建 Outlook 联系人、任务、消息等。它的要点是，我添加到 Outlook 应用程序的 UI 可用于对我们的应用程序进行各种 Web 服务调用（基于通过 Outlook C# API 可见/可管理的各种 Outlook“对象”的状态），

对于完全不同的 gmail 野兽（而不是 Windows 应用程序和基于浏览器的 Web 应用程序），我需要支持“类似”功能。在调查的过程中，我觉得最近几天我一直在转圈。我开始研究 gmail Sidebar 和 Contextual gadgets，向 gmail 添加一些我自己的大致等效的 UI，但很快发现我无法真正使用它们的任何 gmail API，只能尝试硬塞我已经进入的内容一组由上下文小工具支持的触发 gmail“行为”，我意识到这并不足以支持我想要的。最终，我导航到了一组描述功能支持的 Google Apps 脚本的开发人员页面，这在一段时间内看起来像是“要走的路” 为我提供 gmail API 的挂钩。我和他们一起玩了一会儿，制作了一个网络应用程序脚本来收集我所有的 gmail 邮件的主题行并将它们转储到同样由脚本构建的 UI 中，只是为了获得一个实验性的快速感觉，以了解事物如何组合在一起。该脚本有效，但似乎很慢，大约需要一分钟来收集和显示 57 个电子邮件主题行。而且我真的不知道如何将任何脚本构建的 UI 放入 gmail 用户界面。我尝试使用引用的我的应用程序脚本的 URL 构建一个侧栏小工具（内容标记正文中根本没有 HTML 或 javascript）。一个区域已分配给小工具，但我的脚本 UI 从未出现在其中。在尝试让我的脚本在完全不同的上下文中的 iframe 中运行有点失败之后，

我知道我的问题有点大，但是我“应该”寻找其他谷歌技术来构建我想到的那种东西，还是我“大致”遵循一条站得住脚的轨道。我想我正在寻找一些粗略的架构建议，一些关于我可能应该进一步探索的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:08:00.960

使用 Google Apps 脚本，您无法向 Gmail 界面添加任何内容。简单地说，它不会做你想做的事。

现在回到你的问题，如果侧边栏和上下文小工具对你来说还不够。我看到的唯一可以真正操作页面的解决方案是通过安装在用户浏览器上的插件/扩展/脚本。

这种方法很强大，可以随心所欲地改变页面，但也有它的缺点。首先，更明显的是，它在某种程度上依赖于浏览器并安装在本地浏览器上。这意味着如果用户切换计算机或浏览器，他将需要重新安装您的附加组件。

此外，您在某种程度上依赖于 gmail 的“内部”结构。我说“有点”，因为这取决于您如何编写应用程序。但是他们可能会在没有任何通知的情况下立即做出更改并破坏您的应用程序，因为 gmail 的 html-css 结构不是“已发布的 API”。

好吧，那是我的 2 美分。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T06:46:14.987

使用**JSF**和**丰富的面孔**。这可以给 ua google gmail 的外观和开发非常容易和快速。

快乐编码

# c# - 什么是维护所有线程可访问的全局状态的线程安全方法

> ID：11892635
> 
> 赞同：0
> 
> 时间：2012-08-09T22:03:07.073
> 
> 标签：c#, .net

我有一个客户端/服务器设置，它们之间有一个代理。我希望代理表现得更聪明一点，这样当连接 5 个客户端时，某些数据包可以从客户端中继到客户端，而不是客户端-> 服务器-> 客户端。每个客户端当前都有自己的线程，那么共享具有对其他客户端的引用的全局状态的最佳方式是什么。这个状态对象实际上只包含一个与每个客户端关联的 id 和一个对其套接字的引用，以便我可以在其上发送。

像字典这样简单的东西会起作用吗？我担心的是，在访问字典时，我可能有另一个客户端连接或断开连接，这将在我访问字典时修改字典。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:05:07.287

您应该阅读[Semaphores](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)。

但在 C# 的上下文中，您需要确保谨慎且恰当地使用`lock`关键字。这东西*很难*，而且很容易以灾难性的方式出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:19:23.470

如果您的代理设置为 WCF 服务，那么您可以使用 ASP.NET 缓存。WCF 中的会话状态是每次调用，但缓存仍然潜伏在幕后。请注意，这只是为您提供缓存 - 它不会为您提供对缓存的任何预滚动访问控制，因此您仍然会遇到竞争问题。

有关使用缓存的更多信息，请查看之前的 SO 问题 How to return [HttpContext.Current.Cache from WCF?](https://stackoverflow.com/questions/490913/how-to-return-httpcontext-current-cache-from-wcf) 和这篇博文[在 WCF 服务中启用会话状态](http://tahirkhanstechnicalblog.blogspot.co.nz/2011/05/enable-session-state-in-wcf-service.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T22:20:32.490

*如果字典是适合您情况的数据结构*，字典会起作用。这个决定与多线程无关。

也就是说，如果您决定使用字典，则应使用同步对它的访问

*   例如`lock`语句
*   或切换到[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)，一个线程安全的版本`Dictionary`

# javascript - 奇怪的 Javascript 警报输出

> ID：11892636
> 
> 赞同：1
> 
> 时间：2012-08-09T22:03:16.087
> 
> 标签：javascript, arrays, multidimensional-array, alert

我有一个奇怪的问题。我正在尝试使用 Javascript 从多维数组中获取一些值，它给了我一些奇怪的输出。

这是我的代码：

```
foo = [['3','4'],['5','6']];

for (bar in foo) {

    baz = bar[0];
    alert(baz);

    qux = bar[1];
    alert(qux);

} 
```

这是上面的输出：

```
// These are all alerts, by the way
0,undefined,1,undefined,$,f,$,c,e,a,c,l,c,l,i,i,n,a,s,l,i,c,o,a,p,g,e,g,e,i,n,c,o,e,r,e,m,f,l,p,i,h,e,r,g 
```

有人可以告诉我发生了什么吗？

这是问题的 jsFiddle：http: [//jsfiddle.net/Jey6w/](http://jsfiddle.net/Jey6w/)

**编辑：**

这是另一个 jsFiddle，还有一层“Inception”：http: [//jsfiddle.net/8vyGq/](http://jsfiddle.net/8vyGq/)

输出：

```
// Again, these are all alerts, and * signifies undefined
0**1**$ff$ceaacllcllinnassliicooappgeegeeinncooerremmfllpiiheergg 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T22:06:36.287

JavaScript`for ... in`循环为您提供对象属性的**名称**，而不是值。

不要`for ... in`用于真正的数组。使用数字索引或`.forEach()`.

您获得输出的原因是复杂且无趣的，因为您不应该这样做，但这是一个开始。属性名称将被强制转换为字符串`for ... in`。因此，在第一次迭代中，“bar”是字符串“0”，所以`("0")[0]`只是“0”，因为“bar”`("0")[1]`是`undefined`一个单字符字符串。

之后，您的`for ... in`循环会错开到从某处继承的其他一些属性；也许你正在使用原型或其他东西。然后循环提醒前两个字符所有其他属性的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:08:51.880

我可能是错的，但我认为这是由于`bar`返回对对象内属性的引用。将您的选择器更改为`foo[bar][0]`一种享受。

```
foo = [['3','4'],['5','6']];

for (bar in foo) {
    alert(foo[bar][0]);
    alert(foo[bar][1]);
}​ 
```

如果您的对象只是一个多维数组，我会使用该`for in`语句来改变数组，因为它可以选择不需要的属性。我会坚持好的老式`for(start, stop, increment)`

```
foo = [['3','4'],['5','6']];

for (i = 0; i < foo.length; i++) {
    alert(foo[i][0]);
    alert(foo[i][1]);
}​ 
```

## 更新 - jQuery

由于已经提到 jQuery 的[`.each`](http://api.jquery.com/jQuery.each/)方法，我想我也会发布一个如何使用它的示例。jQuery 的 each 方法传递 2 个可选参数`indexInArray`， 和`valueOfElement`。此外，jQuery 文档还指出

> 该值也可以通过`this`关键字访问，但Javascript总是将这个值包装为一个对象，即使它是一个简单的字符串或数字值

考虑到这一点，我们可以使用以下 jQuery ( [jsFiddle](http://jsfiddle.net/GeekyEggo/Jey6w/1/) ) 获得与前面示例相同的结果：

```
var foo = [['3','4'],['5','6']];

$.each(foo, function() {
    // 'this' is the context of the current item within the array
    alert(this[0]);
    alert(this[1]);
}​)​ 
```

# email - 如何配置 Internet 邮件服务器以与 IIS 网站一起使用

> ID：11892642
> 
> 赞同：0
> 
> 时间：2012-08-09T22:03:51.103
> 
> 标签：email, iis, smtp, webserver, exchange-server

我正在为我的问题寻找一点方向。短篇小说，我有一个托管在网络服务器上的网站。我每年支付订阅费。今年我计划将其取下并在内部托管。我已经备份、恢复和安装了所有必要的组件（在带有 IIS、PHP 和 MySQL 的 Windows BTW 上）。该站点在内部运行良好，并且通过防火墙在外部通过 IP 地址运行。（现在的IP地址，直到我的虚拟主机订阅到期，然后我将转发并注册DNS）。

但现在这是我的问题，我的网站具有可在我的提供商服务器上运行的电子邮件功能。我想为我的网站安装一个本地邮件服务器，最终将通过我的网站发送和接收电子邮件。我在这里迷路了。不确定我应该走哪条路。过去我只为内部域安装和使用过 Exchange 2003，对 Internet 和 Internet 没有任何作用。

任何有想法，链接，建议的人？我看到 IIS 确实支持 SMTP 虚拟服务器，这是一条可能的路线吗？如果是这样，那么 POP3 或 IMAP（传入）服务器解决方案呢？

谢谢

编辑---更新情况---到目前为止，我已经配置了一个与我的本地网络服务器一起工作的本地交换服务器。然后，我在我的网络主机 DNS 区域中为我的 IP 地址创建了一个 CNAME。我为我的网站创建了一个简单的子域，重定向到我的家庭网络服务器。一切正常，通过 Exchange 2003 从 IIS 上的网站发送内部电子邮件，重定向 DNS 名称，几乎就在那里。现在我只需要在 Exchange 中创建 Internet Mail 功能。通过 Exchanges 向导为 Internet 邮件“打开系统”，创建新的 SMTP 连接器和....没有外部邮件测试。失败的！以为一切都配置正确。我还尝试打开防火墙上的所有端口，25 和 110。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:07:09.983

我建议使用 PostMarkApp 之类的东西从网站发送交易电子邮件，并使用托管电子邮件（Google Apps for Domains）作为您的电子邮件。运行真正的邮件服务器很痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T19:18:31.387

链接到 Exchange Internet 邮件 SMTP 连接器配置： [配置 Exchange Internet 邮件 SMTP 连接器](http://support.microsoft.com/kb/319426)

嗯，我确实想通了。我走在正确的道路上，一切正常，但我只是错误地配置了我的客户端，我的 ISp 阻止了端口 25，呵呵。将端口更改为未使用的 366。但是对于将来可能需要解决此问题的任何人，这里有一个小提示。

1) 使用默认 SMTP 和 NNTP 虚拟服务器设置安装 IIS。

2) 将 Exchange 安装到组织中。如果您在防火墙后面，内部命名约定并不会真正区分内部和外部。基本上，这意味着如果将其用于托管在其他地方的单独域，则不必在 DNS 中创建单独的区域。希望这不会让任何人感到困惑。

3) 右键单击​​ Exchange 系统管理器中的服务器名称，然后转到 Internet 邮件向导

4）如果您希望您的客户拥有与您的内部不同的域电子邮件地址，您可以通过 Exchange 系统管理器 >> 收件人 >> 收件人策略进行交换，然后在默认 SMTP 虚拟服务器中添加伪装

5) 将 gmail Internet SMTP 连接器设置为 smtp.gmail.com 作为智能主机，并检查 gmail 电子邮件帐户设置和 TLS

6）默认 SMTP VS 设置出站端口 587 和 TLS 检查

如果您还需要更改 SMTP 端口，请不要忘记不仅要更改防火墙，还要更改 Exchange 内部。

# c# - 重建 RiaService 后无法访问新的数据库字段

> ID：11892644
> 
> 赞同：0
> 
> 时间：2012-08-09T22:03:53.740
> 
> 标签：c#, silverlight, service, ria

我有一个使用 RiaService 项目的解决方案。我已经成功使用它很长一段时间了。不过，在我上次更改数据库时，我遇到了一个问题，即在我的 Silverlight 项目中访问任何新字段时都会出错。

加载操作后，我将属性设置为返回的第一条记录：

```
Rights = loadOp.Entities.First(); 
```

此时我可以访问所有旧字段：

```
int _id = Rights.Id
string _name = Rights.Name 
```

但是当我尝试访问新添加的数据库字段时：

```
string _description = Right.Description 
```

我收到以下错误：

*   RIAServices.Web.Models.Rights'不包含'Description'的定义，并且找不到接受'RIAServices.Web.Models.Rights'类型的第一个参数的扩展方法'Description'（您是否缺少 using 指令或装配参考？）

我在构建时没有收到错误，因此它看到了正确的元数据并识别出 DESCRIPTION 字段是有效的。它使用元数据中的描述构建 RiaService。所以我不知道为什么会这样。当我构建一个添加新表和字段的项目时，我已经做了数百次同样的事情，我以前从未见过这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:33:38.973

我最终只使用了大约 3 周前的备份，它工作正常，并手动更新了代码到现在。这似乎已经成功了，但没有确定问题的实际原因。

# php - php echo中多余的空格

> ID：11892646
> 
> 赞同：2
> 
> 时间：2012-08-09T22:04:14.880
> 
> 标签：php, whitespace

我的服务器的 PHP 回显功能有问题。

出于某种原因，每次我调用“回声”时，任何回声都会在其前面有六七个额外的空格，从而导致如下所示：

```
echo "hello world"           //ends up like:
             hello world    //instead of:
     hello world 
```

关于发生了什么的任何想法？

它发生在我的整个服务器上（奇怪的是，昨天它运行良好。我没有触摸 php 设置或任何东西）

这只是显示此错误的脚本示例：

将 URI 发布到数据库

```
require_once("../../m/includes/globals.php");
$user = DB_Login($_POST["username"], $_POST["password"]);
$uri = mysql_escape_string($_POST["uri"]);
$userID = $user['userID'];
$result = DB_ExecuteQuery("UPDATE driver SET windowsPhoneID = '$uri' WHERE userID = '$userID'" );
if ($result === FALSE) { 
echo "error occurred during updating"; 
} 
echo "success!"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T22:30:00.623

在 m/includes/globals.php 的末尾是否有一个结束 php 标记？结束标签后可能有一些空格。

# javascript - 按下“输入”键时防止页面重新加载

> ID：11892650
> 
> 赞同：0
> 
> 时间：2012-08-09T22:04:36.100
> 
> 标签：javascript, html, forms, reload, preventdefault

我试过阅读其他问题/答案，但我没有让它工作。

我试过这段代码：

```
function submitClick(e)
{
     e.preventDefault();
     otherFunction();
}
$(document).ready(function() {
    $('#contactSend').click(submitClick(e));
}); 
```

但是告诉我'e'没有定义`$('#contactSend').click(submitClick(e));`

该网站是`http://207.45.189.68:8004`，javascript 是[http://bluecodestudio.com/scripts/kiposgift.js](http://bluecodestudio.com/scripts/kiposgift.js)，它在最底部有一些我试图解决问题的注释掉的代码。

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:09:46.650

没关系，让它工作。onSubmit 事件不是来自对象，而是来自对象。捂脸...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:09:56.983

看起来问题是您的回调`submitClick`被立即调用，而不是作为参数传递给`click`.

试试这个：

```
$(doucment).ready(function() {
  $('#contactSend').click(submitClick);
}); 
```

# ios - 选择新选项卡时，iOS UITabBarController 不会自动旋转

> ID：11892653
> 
> 赞同：1
> 
> 时间：2012-08-09T22:04:49.143
> 
> 标签：ios, uiviewcontroller, uitabbarcontroller, autorotate

我有一个`UITabBar`带有 5 个选项卡的基于 iOS 应用程序，其中一些选项卡是`UINavigationController`s。我的一些选项卡视图支持横向，而另一些则不支持。

I have all of the auto-rotation taken care of for the views themselves, but I noticed something peculiar happening when I was testing the app - whenever a new tab is selected, the `shouldAutoRotateToInterfaceOrientation`method is not called by any `UIViewController`. 有没有办法在选择新标签时强制进行方向检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:12:26.693

创建一个方法并调用它`viewWillAppear`来检查方向，然后在需要时强制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:59:40.150

方法`shouldAutorotateToInterfaceOrientation:`是`NOT supported in iOS 6`。它已弃用。以防万一你是一个新手，刚开始使用 cocoa，想知道为什么你的视图控制器在 iOS 6 中搞砸了，而在 iOS 5 中却完美无缺，只需要知道 shouldAutorotateToInterfaceOrientation: 不再受支持。即使它可能会很好地`Xcode 4 to 4.3`工作`NOT work on Xcode 4.5.`

Apple 提供了一种新方法来完成这项工作，而且方式更加简洁。您改用supportedInterfaceOrientations。它返回视图控制器支持的所有界面方向，一个界面方向值的掩码。

`UIInterfaceOrientationMask Enum:`

这些常量是用于指定视图控制器支持的界面方向的掩码位。

```
 typedef enum {
     UIInterfaceOrientationMaskPortrait = (1 << UIInterfaceOrientationPortrait),
     UIInterfaceOrientationMaskLandscapeLeft = (1 << UIInterfaceOrientationLandscapeLeft),
     UIInterfaceOrientationMaskLandscapeRight = (1 << UIInterfaceOrientationLandscapeRight),
     UIInterfaceOrientationMaskPortraitUpsideDown = (1 << UIInterfaceOrientationPortraitUpsideDown),
     UIInterfaceOrientationMaskLandscape =
     (UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight),
     UIInterfaceOrientationMaskAll =
     (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft |
     UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortraitUpsideDown),
     UIInterfaceOrientationMaskAllButUpsideDown =
     (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft |
     UIInterfaceOrientationMaskLandscapeRight),
 } UIInterfaceOrientationMask; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T08:44:14.113

可能是您使用 ios 6.0 或更高版本，因为在 ios 6.0 及更高版本中，shouldAutoRotateToInterfaceOrientation 方法已被弃用并且不会为此调用您必须为 UINavigationController 和 UITabbarContrller 创建自己的类别，并添加一些在设备旋转时调用的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T00:36:05.320

通常当我看到这个时，这是因为标签栏中的一个视图控制器没有`shouldAutoRotateToInterfaceOrientation`正确设置。添加到选项卡栏的所有类都需要设置相同的值，否则会导致旋转失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T15:11:38.747

iOS的 Apple [UIViewController 编程指南](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ViewControllerPGforiOS.pdf)指出：

“标签栏控制器仅在其所有托管视图控制器都支持新方向时才允许更改方向。”

如果您想支持横向，那么您需要确保所有选项卡都支持它，因为这是全有或全无的情况。

# objective-c - ObjC：在循环中构造一个可变字典

> ID：11892657
> 
> 赞同：0
> 
> 时间：2012-08-09T22:05:11.250
> 
> 标签：objective-c, nsmutabledictionary

我觉得我已经阅读了许多（简单）示例，这些示例完全符合我的要求。我似乎无法让它发挥作用。我需要重新审视我的代码，而且我周围没有任何人，所以如果这看起来很简单，请原谅我......代码编译没有问题。谢谢！

```
@implementation Engine
- (id) initWithInventory: (NSString *) path {
    if (self = [super init]) {
        NSString *contents = [NSString stringWithContentsOfFile:@"ingredientList.csv" encoding:NSASCIIStringEncoding error:nil];

        NSLog(@"%@",contents); // This yields the contents of the file appropriately

        NSArray *lines = [contents componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];
        NSRange ingredientRange = {0,96}; // This is done because I want to omit the last element of the array... the 97th is an empty string caused by the end of file newline character.  I know it's bad coding...

        NSEnumerator *enumerator = [[lines subarrayWithRange:ingredientRange] objectEnumerator];
        NSString *curString;
        NSArray *ingredientElements;
        NSRange activeEffectRange = {1,4}; // Element 0 will be the key, elements 1-4 are the array to be stored.

        while (curString = [enumerator nextObject]) {
            ingredientElements = [curString componentsSeparatedByString:@","];
            Ingredient *theIngredient = [[Ingredient alloc] initWithName:[ingredientElements objectAtIndex:0] andActiveEffects:[ingredientElements subarrayWithRange:activeEffectRange]];
            NSLog(@"%@",[theIngredient ingredientName]);
            NSLog(@"%@",[theIngredient activeEffects]); //These both print out correctly.

            NSString *theName = [theIngredient ingredientName];
            [allIngredients setObject:theIngredient forKey:theName];
            NSLog(@"%@",[allIngredients objectForKey:[theIngredient ingredientName]]); // ***This yields (null)***
        }
    }
    return self;
} 
```

编辑：我应该添加，这`allIngredients`是正在启动的类的实例变量，因此它被正确定义为`NSMutableDictionary`：

```
@interface Engine : NSObject {
    NSMutableDictionary *allIngredients;
}
- (id) initWithInventory: (NSString *) path;
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T22:13:36.037

你在哪里创作`allIngredients`？你已经声明了它，但在使用它之前你还没有分配它。

```
allIngredients = [[NSMutableDictionary alloc] init] 
```

# postgresql-9.1 - 恢复 Postgres 数据库时获取过去的循环依赖项

> ID：11892659
> 
> 赞同：2
> 
> 时间：2012-08-09T22:05:17.727
> 
> 标签：postgresql-9.1

我的问题是重新。数据库中的循环依赖。如果 db 有一个具有自定义数据类型 d1 的表 t1，则 d1 必须在 t1 可以恢复之前存在。类似地，如果视图 v1 依赖于表 t1 和 t2，则两个表都必须存在才能恢复视图。这在转储复杂数据库并将其还原到另一台服务器上时会产生问题。

有没有一种方法（开关）允许恢复转储，但在整个 kaboodle 恢复之前不进行任何完整性检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:39:58.250

该`pg_dump`实用程序*应*自动处理此问题，并且通常会这样做；但是，最近发现（并修复了）依赖项跟踪中的一些错误。

*   首先要做的是确保您使用的是[受支持的主要版本以及您正在运行的任何主要版本的最新次要（错误修复）版本](http://www.postgresql.org/support/versioning/)。

*   如果您发现问题仍然存在，请发布详细信息，以便我们确定您是否发现了尚未修复的新问题，或者您是否在错误修复之前存在挥之不去的依赖映射问题。请务必显示输出`select version();`以及确切的错误消息。

# java - 在停靠模式下启动我的应用程序

> ID：11892664
> 
> 赞同：0
> 
> 时间：2012-08-09T22:06:01.487
> 
> 标签：java, android

我正在开发一个汽车启动器应用程序，我希望它在手机对接时启动我该怎么做？

另外，由于我有一个简单的汽车坞站，如何为了测试目的而设置汽车坞站状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:15:54.063

这个页面应该可以帮助你：http: [//developer.android.com/training/monitoring-device-state/docking-monitoring.html](http://developer.android.com/training/monitoring-device-state/docking-monitoring.html)

# ios - 联网 iOS 应用程序的框架？

> ID：11892666
> 
> 赞同：1
> 
> 时间：2012-08-09T22:06:04.533
> 
> 标签：ios, xcode, api, rest, social-networking

我正在尝试在新的 iOS 6 测试版中构建一个基本的社交 iOS 应用程序作为概念验证项目，以提高我的 iOS 开发技能。本质上，我希望允许用户生成一个帐户，将一些信息存储在云中，然后能够将他们的信息（以及他们朋友的信息）提取到设备中。我已经在设备上粗略地设计了一个前端，但我现在需要启动网络组件，并正在寻找有关任何库、框架、教程和/或使用指南的建议。

我正在考虑使用 node.js 和 mongodb 构建服务器端，因为我已经在它们之上构建了一个 RESTful API，我可以适应这个任务。这是完成这样一个应用程序的最佳方式吗？我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T00:34:13.467

更多网络库建议：

1) AFNetworking - [https://github.com/afnetworking/afnetworking](https://github.com/afnetworking/afnetworking)。这被广泛使用（现在更是如此，因为 ASIHttpRequest 已经停止开发）。它是现代的和基于块的。但是，它还不是 ARC。

2) MKNetworkKit - [https://github.com/MugunthKumar/MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit)。现代和基于 ARC。

我将所有应用程序从 ASIHttpRequest 切换到 AFNetworking 并强烈推荐它。

到目前为止提到的所有框架（ASIHttpRequest、RESTKit、AFNetworking、MKNetworkKit）都可以很好地与 node.js/restful API 后端通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:25:20.163

处理网络连接的最常见和流行的库是 ASIHTTPRequest：[http](http://allseeing-i.com/ASIHTTPRequest/) ://allseeing-i.com/ASIHTTPRequest/和 RESTKit：[http](http://restkit.org) ://restkit.org 。我现在使用 RESTKit 作为 Salesforce 库的一个组件。我过去使用过 ASIHTTPRequest，发现它是一个非常好的库。我有一段时间没有使用它，但我强烈推荐它。

编辑：我还建议使用 CocoaRestClient 来测试您的 API。

# css - Chrome中的浮动div，出现位置不正确

> ID：11892670
> 
> 赞同：3
> 
> 时间：2012-08-09T22:06:18.870
> 
> 标签：css, google-chrome, css-float

我在让三个项目漂浮在 Chrome 中时遇到问题。基本上，它是左侧的图像，右侧浮动了两个 div。问题是右浮动潜水下降到图像的底部。这是 Chrome 中的一个已知问题，我该如何解决？在 IE、Opera、Safari 和 Firefox 中似乎没问题...

这是代码：

```
 <body>
    <div id="container">
        <div id="header">
            <img src="image1.gif" width="320" alt="Logo"/>
            <div id="social">
                <img src="images/facebook_logo.png" alt="Facebook logo" width="25" />
                <img src="images/twitter.png" alt="Twitter logo" width="25" />
            </div>

            <div id="review">
        <img src="roundel1.gif" alt="Click here!" style="float:left; width:50px;"/><div>
                    FREE service!
                </div>
            </div>
</div>
</div>
</body>
</html> 
```

和CSS：

```
* {
  margin:0;
  padding:0;
}

body    {
    background-image:url(../images/greenbg.png);
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size:120%;
    }
#container           {
    margin-left:auto; 
    margin-right:auto; 
    width:960px;
    background-color:#FFF;
}
#header {
    height:100px;
}
#header-image   {
    float:left;
}
/* flyout boxes */

#review {
    float:right;
    width:216px;
    border-style:solid;
    border-width:2px;
    height:63px;
    margin-right:20px;
}
#social {
    float:right;
    width:136px;
    border-style:solid;
    border-width:2px;
    height:48px;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T17:20:57.393

对于任何找到这个主题的人，我在复杂的响应式设计中遇到了同样的问题，其中两个相同大小的左浮动 div，右 div 将比右边的 div 偏移约 20 - 30px。

这似乎是 Chrome 的一个错误，因为 div 在所有其他浏览器（包括 IE9、IE8 和 IE7）中都按预期显示。

**问题：**上边距放置在这两个 div 的父包装上

```
margin-top: 30px; 
```

**解决方案：**改用填充，适用于 MSIE > 6、Opera、Chrome、FF、Safari

```
padding-top: 30px; 
```

希望这可以为你们中的一些人节省一些挫折和时间，因为这很烦人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T22:27:07.963

我能够重现您的问题，最终在 chrome 中打开开发人员工具，然后查看`css`审查代码`div`并禁用`float`规则并重新启用它。这就是你解决问题的方式吗？如果是这样，那么解决方案可能是`floating`图像`left`。就我而言，它提出了解决方案。如果没有，那么如果您提供图像将很有帮助。谢谢

# asp.net - 在 asp.net 中，如何使用 ListView 服务器控件从数据库中检索到的照片库完全 ajaxfy 页面？

> ID：11892671
> 
> 赞同：0
> 
> 时间：2012-08-09T22:06:21.250
> 
> 标签：asp.net, ajax

我相信这是关于 asp.net 操作数据库项目的方式的一个基本问题。基本上，操作数据库项目的服务器端方式（使用 ListView 或类似方式）已经过时，因为与 AJAX 相比，回发模型已经过时。假设您在图库上有前进和后退按钮来更新数据库中的图像。您需要回发才能更新页面。显然，这可以使用 ajaxfied 方法。我一直在努力思考这个问题，并且观察到大多数使用 ListView 或 GridView 或任何不 ajaxfy 过程的网站，可能是由于这个问题的难度。对于那些 ajaxfy 页面，他们使用 UpdatePanel，它只是“伪 ajax”。

我想知道其他程序员是否有一种完全 ajaxfied 的方式来更新由 ListView 从数据库中检索的照片库页面？正如我所说，我一直在思考这个问题，我认为可能有两种方法：首先，使用 ListView 首先填充照片库。在按下前进或后退按钮时，使用 jQuery 的 ajax 方法连接到 .ashx 页面并使用 .ashx 页面检索数据项，然后使用 jQuery 更新客户端的照片库。

我预见的第二种方法是完全放弃 ListView 并在 .ashx 中使用 for 循环从一开始就填充画廊。这种方法统一了初始数据检索方法和“回发”数据检索方法，这可能意味着需要更少的代码，因为您根本不需要 aspx 页面。

我的问题是，完全 ajaxfy 上述页面的现实方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:30:49.883

我仍然在我的 asp.net 网站中使用代码。但我确实在 .aspx 页面上使用了 ajax 元素

看看[ASP.Net Ajax Control Toolkit](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/)

所有 Ajax 元素，有好处或仍在使用后面的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T00:44:30.897

到目前为止，我发现最好的方法是使用 jQuery AJAX 来更新任何更改，尽管它可能比回发到服务器并从那里更新更耗时

# php - 未找到 PHP 类“COM”

> ID：11892674
> 
> 赞同：1
> 
> 时间：2012-08-09T22:06:36.290
> 
> 标签：php, windows, com

我正在运行 Windows Server 2008 32 位、PHP 5.4.5 和 Apache 2.2.22。我很确定 COM 是 PHP 核心内置的，但是当我运行代码来调用一个新的 COM 对象时，我得到一个“找不到类‘COM’’错误。我正在调用的 COM 对象是 Microsoft Word，已安装。

编码：

```
$word = new COM("word.application") or die("Could not initiate Word COM Object."); 
```

PHP 只是吐出如上所述的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T22:21:44.410

[来自PHP 网站](http://uk.php.net/manual/en/com.installation.php)上的用户评论：

> 从 PHP 5.4.5 开始，COM 和 DOTNET 不再内置于 php 核心中。您必须在 php.ini 中添加 COM 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T02:42:47.480

值得注意的是，这也存在于 5.3.15 及更高版本，从用户评论如下：

> 从 5.3.15 开始（如果您仍在 5.3 分支上），您必须将 extension=php_com_dotnet.dll 行添加到您的 php.ini 中，以使 COM、DOTNET、VARIANT 和类似的类可用并正常工作。
> 
> 来自 PHP 更改日志：
> 
> ```
> COM
> 
>     Fixed bug #62146 com_dotnet cannot be built shared 
> ```
> 
> 因此，Windows 的官方 PHP 构建现在使用“--enable-com-dotnet=shared”选项构建，这意味着默认情况下不支持 COM/DOTNET。

# javascript - XMLHttpRequest HTTP 标头

> ID：11892682
> 
> 赞同：1
> 
> 时间：2012-08-09T22:07:29.593
> 
> 标签：javascript, google-chrome, xmlhttprequest

我正在尝试制作一个小脚本来在 imgur 上重新托管网络上的图片。

这称为图像侧载，您只需将浏览器指向[http://api.imgur.com/2/upload?url=](http://api.imgur.com/2/upload?url=) + 图片的 Url

它不返回任何 XML 或 JSON 响应，因此我无法解析它以获取 img URL。

但我想我找到了一种方法来做到这一点，但不能让它正常工作。这是我正在使用的代码。

```
$(document).ready(function() {
    $("#button").click(function() {
        str = $("input").val().toString();
        link = "http://api.imgur.com/2/upload?url=" + str;
        var xhr = new XMLHttpRequest();
        xhr.open("GET", link);
        xhr.send();
        var headers = xhr.getAllResponseHeaders().toLowerCase;
        alert(headers);

    });

}); 
```

看看谷歌浏览器的控制台，这些是脚本运行后生成的结果。

我还不允许发布图片，所以这里是结果的链接：http: [//i.imgur.com/xCyIP.png](http://i.imgur.com/xCyIP.png)

我需要以某种方式访问​​第 4 个响应标头，因为即使此方法不返回任何可解析的 XML 或 JSON 响应，该链接也是上传的 img 的 URL，这正是我所需要的。

那么有没有办法访问该信息？为什么会被取消？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:07:03.093

好吧，API 必须返回一些东西，否则它是无用的。

实际上，[http:](http://api.imgur.com/examples) //api.imgur.com/examples 建议您执行以下操作：

```
var xhr = new XMLHttpRequest();
xhr.open("GET", link);
xhr.onload = function() {
    var url = JSON.parse(xhr.responseText).upload.links.imgur_page;
    alert(url);
}
xhr.send(); 
```

**编辑。**好，我知道了。通常，上面的代码应该可以工作，但我认为 imgur 遇到了问题。我会报告错误。

虽然错误仍然存​​在，但这里有一个肮脏的解决方案来满足您的需求：

```
var xhr = new XMLHttpRequest();
xhr.open("GET", link);
xhr.onload = function() {
    html = xhr.responseText;
    alert(html.substr(html.indexOf('http://i.imgur.com/') + 19, 5));
}
xhr.send(); 
```

您的代码不起作用，因为您没有等待答案。您必须通过回调函数来捕获它。

**编辑。**上面的代码只在本地工作。当您使用 jQuery 时，让我介绍一下快捷方式`$.post`：

```
$(document).ready(function() {
    $("#button").click(function() {
        $.post('http://api.imgur.com/2/upload.json', {
            key: 'ec575de603b936e54c2b4a9f232d537e',
            image: $("input").val().toString()
        }, function(data) {
            alert(data.upload.image.hash);
        });
    });
});​ 
```

[http://jsfiddle.net/Le_Sphinx/rEfdS/](http://jsfiddle.net/Le_Sphinx/rEfdS/)

# javascript - 获取单击类元素 jquery的名称值

> ID：11892684
> 
> 赞同：3
> 
> 时间：2012-08-09T22:07:52.577
> 
> 标签：javascript, jquery

我目前正在尝试以下操作，但它不断获取具有“button-blue”类的第一个元素的名字值。我怎样才能正常工作，以便它获取使用此类单击的元素的名称值？

```
$(".button-blue").click(function() {

    alert($(".button-blue").attr('name'));

}); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-09T22:08:48.873

改为使用`this.name`。在事件处理程序内部，`this`是触发事件的 DOM 元素。

如果您出于其他原因更喜欢使用`.attr()`或需要包含该元素的 jQuery 对象，您可以简单地使用`$(this).attr('name')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-18T00:09:31.923

在事件处理程序中， this.tagName 应该为您提供名称。

# objective-c - 如何按日期对 NSMutableArray 键进行排序（Facebook 生日？）

> ID：11892690
> 
> 赞同：1
> 
> 时间：2012-08-09T22:08:25.470
> 
> 标签：objective-c, ios, xcode, facebook-graph-api, nsmutablearray

我试图使用 NSSortDescriptor 对 NSMutableArray *friends, key:birthday, 按日期进行排序，我的 NSLog 中的所有生日都为空，但名称仍在记录中。如果我拔出我的 NSSortDescriptor，我的 NSLog 将再次给我这些值，想知道为什么我在将它们传递给 NSSortDescriptor 时会丢失这些值，以及我如何才能完成它。我使用 Hackbook 示例代码来学习 Facebook 集成，并修改了代码给我朋友的生日，并且我想让他们按照 1/1 - 12/31 的格式对 1 月 - 12 月进行排序是不是因为随机拉动朋友列表的结果数据？提前感谢您，一旦我们查明真相，我一定会接受！

```
******************************CODE TO PULL KEYS BIRTHDAY AND NAMES FROM GRAPH API ******

   - (void)getUserFriends {
currentAPICall = kAPIGraphUserFriends;
HackbookAppDelegate *delegate = (HackbookAppDelegate *)[[UIApplication sharedApplication]      delegate];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                            @"name, birthday",  @"fields", nil];
[[delegate facebook] requestWithGraphPath:@"me/friends" andParams:params andDelegate:self];
[self apiGraphFriends];
}

  ***********RANDOMIZE LIST OF FRIENDS NAMES W BIRTHDAYS AND PUSH TO VIEW CONTROLLER

NSMutableArray *friends = [[NSMutableArray alloc] initWithCapacity:1];
NSArray *resultData = [result objectForKey:@"data"];
if ([resultData count] > 0) {
    for (NSUInteger i=0; i<[resultData count] && i < 1000; i++) {
        [friends addObject:[resultData objectAtIndex:i]];
    }
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"birthday"
                                                                   ascending:TRUE];
    [friends sortUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];
    [sortDescriptor release];

    // LOG VALUES OF KEYS birthday and name FOR DEBUGGING

    NSLog(@"name %@" , [friends valueForKey:@"name"]);
    NSLog(@"birthday %@" , [friends valueForKey:@"birthday"]);

    // Show the friend information in a new view controller
    NSLog(@"Check#3");
    APIResultsViewController *controller = [[APIResultsViewController alloc]
                                                initWithTitle:@"Friends Birthdays"
                                                         data:friends action:@""];
    [self.navigationController pushViewController:controller animated:YES];
    [controller release];
} else {
    [self showMessage:@"You have no friends."];
}
[friends release]; 
```

**8/10 编辑在上面添加了代码，显示了我如何获得这些名字和生日，我相信它们都是**[http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)的NSStrings 只需向下滚动到生日部分。我还想提一下，非常重要的是，我已经扩展了权限，这不是权限问题，当我尝试对数组进行排序时，我做错了，我相信我的经验不足是我自己最大的敌人。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:12:18.697

这可以帮助您识别问题。通常，这允许您使用自定义比较器对列表进行排序，但确定 sortUsingDescriptors 将您的生日归零的原因可能很有用。也许您的一个或多个生日无效。

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                             initWithKey:@"birthday"
                               ascending:YES
                              comparator:^NSComparisonResult(id obj1, id obj2) {
                                  NSLog(@"bday1 = '%@' bday2 = '%@'", obj1, obj2);
                                   return NSOrderedSame;
                              }]; 
```

# ruby-on-rails - Rails：在生成 PDF 时“等待”HTML 屏幕

> ID：11892692
> 
> 赞同：1
> 
> 时间：2012-08-09T22:08:31.757
> 
> 标签：ruby-on-rails, ruby, rack, prawn

我有一个可以使用 Prawn 生成 PDF 的 Rails 应用程序。其中一些可能相当大（数十或数百页）并且需要一些明显的时间来生成。我想做的是显示一些 HTML 页面，其中包含“请稍候，我们正在创建您的文档（旋转图标）”之类的消息，然后在完成后显示 PDF。

我正在考虑使用机架中间件来做到这一点。[诚然，除了看过Railscasts Episode #151](http://railscasts.com/episodes/151-rack-middleware)之外，我对 Rack 一无所知。似乎我可以拦截对这些大型 PDF 的请求，显示 HTML 等待页面，然后拦截响应并将 HTML 替换为生成的 PDF 内容。

这可能吗？这适用于 Rack 吗？如果没有，有什么东西可以做到这一点？如果它适用于 Rack，有人可以给我一个通用的解释步骤吗？我一直在搜索互联网，我发现的 Rack 东西对初学者不太友好（因此，我在这里问）。

任何帮助都感激不尽。

*   伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:39:59.770

不确定这是您想要的，但您可以在 PDF 准备好后通过[private_pub](https://github.com/ryanb/private_pub/)之类的方式向浏览器发送消息，并在客户端处理该消息的接收（显示链接、开始下载等）。

# ios - 为什么我的 iOS 正则表达式不起作用？

> ID：11892693
> 
> 赞同：0
> 
> 时间：2012-08-09T22:08:41.257
> 
> 标签：ios, xml, regex, nsregularexpression

我试图从某些标签中获取所有 XML（不仅是值，而且包括两个打开和关闭标签之间的更多 XML），我想我会使用正则表达式。

我的代码看起来像这样

```
NSError *error2 = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<PayloadPost>(.*)</PayloadPost>"
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error2];
if (error2)
{
    NSLog(@"Error %@", [error2 description]);
}

NSArray *payloadRanges=[regex matchesInString:theXMLString options:0 range:NSMakeRange(0, [theXMLString length])];
int size=[payloadRanges count];
printf("Size %d",size); 
```

基本上我需要“PayloadPost”中的所有内容，但它一直没有给我任何东西。我的大小一直为 0，并且我知道 XML 中有 3 个实例。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:15:08.657

确保设置多行标志，[https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSRegularExpressionDotMatchesLineSeparators](https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSRegularExpressionDotMatchesLineSeparators)

否则'.' 字符将不匹配换行符，您的正则表达式将匹配

```
<PayloadPost>something</PayloadPost> 
```

但不是

```
<PayloadPost>
something
</PayloadPost> 
```

# asp.net-mvc-3 - 用于 API 访问的 WCF 或 Asp.Net MVC？

> ID：11892698
> 
> 赞同：4
> 
> 时间：2012-08-09T22:09:29.783
> 
> 标签：asp.net-mvc-3, wcf, api

我想通过 WCF 或 MVC 了解有关 API 访问的一些想法。两者都可以，但我喜欢使用 MVC 构建自定义路由的想法。我知道这可以通过 WCF（维护请求路由）实现，但除了*不*使用 WCF（不是交易破坏者）的安全缺点之外，社区对此还有什么其他想法。

我有一个项目，我们一直在讨论使用 MVC 或 WCF，我们对两者都很满意，但我们正在转向 MVC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:12:58.797

您应该使用新的 ASP.Net MVC Web API 框架，新的 MVC 4.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:12:15.653

我认为 MVC 是一个很棒的 Web API。不久前，我为一个使用 MVC 3 的 RESTful Web API 的 android 应用程序做了这个。这是一个很好的教程：

[http://msdn.microsoft.com/en-us/magazine/dd943053.aspx](http://msdn.microsoft.com/en-us/magazine/dd943053.aspx)

如果您喜欢冒险，请查看 MVC 4 中包含的 Web API 框架。注意：我还没有尝试过这个，但计划在不久的将来。见这里：[http ://www.asp.net/web-api](http://www.asp.net/web-api)

# php - 如何正确使用 PHP 将 MySQL 对象编码为 JSON？

> ID：11892699
> 
> 赞同：1
> 
> 时间：2012-08-09T22:09:30.720
> 
> 标签：php, mysql, json, mysqli

我正在尝试遍历 MySQL 对象并在另一个页面上使用 ajax 调用来附加数据，但我无法让 php 将有效的 JSON 返回给回调。

这个明显不行。。。

```
<?php

    $db_host = "localhost";
    $db_user = "blah";
    $db_pass = "blah";
    $db_name = "chat";
    $mysqli = new MySQLi($db_host, $db_user, $db_pass, $db_name);
    $myQuery = "SELECT * FROM users";
    $result = $mysqli->query($myQuery) or die($mysqli->error);
    $row = $result->fetch_assoc();
    echo json_encode($row);

?> 
```

或者这个...

```
<?php

    $db_host = "localhost";
    $db_user = "blah";
    $db_pass = "blah";
    $db_name = "chat";
    $mysqli = new MySQLi($db_host, $db_user, $db_pass, $db_name);
    $myQuery = "SELECT * FROM users";
    $result = $mysqli->query($myQuery) or die($mysqli->error);
    while ( $row = $result->fetch_assoc() ){
        echo json_encode($row) . ", ";
    }

?> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T22:12:05.230

```
$data = array();

while ( $row = $result->fetch_assoc() ){
    $data[] = json_encode($row);
}
echo json_encode( $data ); 
```

这应该这样做。此外，您可以使用[http://jsonlint.com/](http://jsonlint.com/)查看 JSON 输出的问题。

**更新：**使用`fetch_all()`也可能是个好主意

```
$data = $result->fetch_all( MYSQLI_ASSOC );
echo json_encode( $data ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-27T17:38:49.723

我用这个：

```
 $json = array();

    if(mysqli_num_rows($result)){
        while($row=mysqli_fetch_assoc($result)){
                $json[]=$row;
        }
    }
    mysqli_close($mysqli);
    echo json_encode($json);

?> 
```

我得到这样的东西

[ {"id":"2","usuario":"zeldafranco","password":"lol"},{"id":"3","usuario":"franco","password":"franco "},{"id":"4","usuario":"peteko","password":"sanpeteko"},{"id":"5","usuario":"prueba","password": "prueba"},{"id":"6","usuario":"test","password":"test"}, {"id":"7","usuario":"pibe","password ":"hola"}, {"id":"8","usuario":"que ase","password":"que ase"},{"id":"9","usuario":"trt “，“密码”："trt"}, {"id":"10","usuario":"tyt","password":"tyt"} ]

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-09T22:15:42.603

```
$arrUsers = array();

$fetch = mysql_query("SELECT * FROM users"); 

while ($row = mysql_fetch_array($fetch, MYSQL_ASSOC)) {

 $arrUsers['id'] = $row['name'];
    $arrUsers['col1'] = $row['col1'];
    $arrUsers['col2'] = $row['col2'];

    array_push($arrUsers,$row_array);

}

echo json_encode($arrUsers); 
```

# iphone - 应用程序中的 Iphone 应用程序商店 url

> ID：11892701
> 
> 赞同：0
> 
> 时间：2012-08-09T22:09:36.263
> 
> 标签：iphone, ios

我的 iPhone 应用程序在服务器上进行了一些处理，我将 url 保存在核心数据数据库中，这样每次运行应用程序时，我都可以从数据库中读取 url 值。

我的问题是：如果这个 url 值发生变化，我的应用程序将停止工作。如何动态获取 url 值而不将其存储在数据库中，以便在更改 url 时，我的应用程序将继续工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:13:23.103

您可以从任何服务器获取它，打开[NSURLConnection 类引用](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)并阅读响应。所以基本上一开始你的应用程序总是会检查服务器以确保它具有最新的 URL。

# php - 每次返回相同数组的 PHPUnit Mock

> ID：11892707
> 
> 赞同：2
> 
> 时间：2012-08-09T22:09:56.983
> 
> 标签：php, unit-testing, mocking, phpunit

我正在构建一个会话管理类和相关的单元测试。为了将类与 $_SESSION 的全局状态分开，我使用了一个非常简单的类来管理类和会话数据之间的绑定。

Binding类的整个源码如下：

```
class Binding implements iface\Binding
{
    public function &getNamespace ($namespace)
    {
        return $_SESSION [$namespace];
    }
} 
```

在消费会话类中，我有以下内容：

```
protected function initStorage ()
{
    // Check that storage hasn't already been bound to the session
    if ($this -> storage === NULL)
    {
        // Attempt to start the session if it hasn't already been started
        if (($this -> sessionId () !== '')
        || ((!$this -> headersSent ())
        && ($this -> startSession ())))
        {
            // Bind the storage to the session
            $this -> storage    =& $this -> binding -> getNamespace ($this -> namespace);
            // Make sure the session is in a usable state
            if (!$this -> hasData ())
            {
                $this -> reset ();
            }
        }
        else
        {
            // We couldn't start the session
            throw new \RuntimeException (__METHOD__ . ': Unable to initiate session storage at this time');
        }
    }

    return $this;
} 
```

sessionId、headersSent 和 startSession 是用作“测试接缝”的简单单行函数，我可以很容易地用 PHPUnit 中的模拟替换它们。

我在编写测试时意识到，我可以使用模拟绑定类做更多的事情，而不仅仅是将会话从类中分离出来，我还可以将其用作观察类的非公共属性的一种方式，而无需实际暴露任何内部状态，从而使班级变得脆弱。由于该类对数组的引用而不是直接对数组进行操作，因此我可以观察到被引用的数组。

我希望用 PHPUnit 的模拟 API 来做到这一点，但我不知道该怎么做。

我知道我可以创建一个返回这样的数组的模拟：

```
$mock = $this -> getMock ('iface\Binding');

$mock -> expects ($this -> any ())
      -> method ('getNamespace')
      -> will ($this -> returnValue (array ())); 
```

但是，它对于观察状态变化没有用，因为它每次都返回一个不同的数组。我需要的是一个模拟，它每次都返回对同一个数组的引用。

最后我写了一个类来代替真正的 Binding 类并使用它：

```
class BindingMock implements iface\Binding
{
    protected $storage = array ();

    public function &getNamespace ($namespace)
    {
        return $this -> storage [$namespace];
    }
} 
```

使用此类可以让我在调用 Session API 之前和之后检查 $storage 的内容，因为我可以查看存储数组中的内容，而无需在 Session 类中公开非公共状态。这是一个使用该技术的示例测试：

```
public function testCreateItem ()
{
    $storage    =& $this -> binding -> getNamespace ('unittest');
    $this -> assertEmpty ($storage);
    $this -> object ->  createItem ('This is a test', 'test');
    $this -> assertNotEmpty ($storage);
    $this -> assertEquals ('This is a test', $storage ['test']);
} 
```

我宁愿能够使用 PHPUnit 生成替代类，但是，只为单元测试使用附加类似乎是错误的方法，除非在 PHPUnit 中无法实现相同的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:29:36.370

我认为您可以返回一个[`ArrayObject`](http://php.net/manual/en/class.arrayobject.php)将内部数组公开给您的测试的，但在这种情况下，我更愿意避免将数组暴露给测试`Binding`。相反，`Binding`接口应该提供方法来获取、设置和清除值以及其他更高级别的操作。然后，您可以传入一个期望这些调用的模拟对象，而不是返回原始数组的模拟对象。

# zend-framework - Zend Framework：在布局中添加表单

> ID：11892715
> 
> 赞同：3
> 
> 时间：2012-08-09T22:11:15.570
> 
> 标签：zend-framework, zend-form

我创建登录表单并添加 UserController->loginAction：

```
 public function loginAction() {
    $form = new Application_Form_Login();

    $this->view->loginForm = $form;
} 
```

如何在 layouts/scripts/header.phtml 中添加我的表单，因为我尝试了这个，但不起作用：

```
<?php echo $this->loginForm ?> 
```

如果我在views/scripts/user/login.phtml 中回显表单，我会看到登录表单。

那是我的登录表单：

```
class Application_Form_Login extends Zend_Form {

public function init() {
    $this->setDecorators(array('FormElements', 'Form'))
            ->setAction("/user/login/");

    $username = new Zend_Form_Element_Text(array('name' => 'username', 'class' => 'input-text'));
    $username->setRequired(true)
            ->setDecorators(array('ViewHelper',));

    $this->addElements(array($username));
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:53:18.857

由于布局与视图对象是分开的，因此您需要将表单分配给布局。

在您的控制器中：

```
public function loginAction()
{
    $form = new Application_Form_Login();

    // assign the form to the layout
    $this->_helper->layout()->loginForm = $form;
} 
```

在您的布局中：

```
<?php if ($this->layout()->loginForm): ?>
    <?php echo $this->layout()->loginForm; ?>
<?php endif; ?> 
```

试试这个：

```
// in controller:
$form = new Application_Form_Login();
$this->view->placeholder('loginForm')->set($form);

---------------

// in layout script:
$form = $this->placeholder('loginForm');
if ($form instanceof Zend_Form) {
    echo $form;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:56:41.647

您正在寻找渲染功能：

```
<?php
    echo $this->loginForm->render();
?> 
```

# android - 为什么 Android WebView 不加载 youtube HTML5 iframe 视频？

> ID：11892716
> 
> 赞同：15
> 
> 时间：2012-08-09T22:11:16.327
> 
> 标签：android, webview, youtube

我尝试了以下方法：

```
 WebView wv = (WebView) findViewById(R.id.webView1);
    String playVideo= "<html><body><iframe width='200' height='143' src='http://www.youtube.com/embed/JW5meKfy3fY' frameborder='0' allowfullscreen></iframe></body></html>";
    wv.getSettings().setPluginsEnabled(true);
    wv.getSettings().setAllowFileAccess(true);
    wv.getSettings().setPluginState(PluginState.ON);
    wv.getSettings().setBuiltInZoomControls(true);
    wv.getSettings().setJavaScriptEnabled(true);
    wv.loadData(playVideo, "text/html", "utf-8"); 
```

我只看到缩略图，然后当我点击它时，框架变成黑色并且不加载视频。我的目标是 API 15，我有互联网许可。如何在 Android webview 中运行 html5 youtube iframe 视频？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-20T20:37:23.007

你必须把它放在你的清单中

```
<application android:hardwareAccelerated="true" ...> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T08:55:00.160

在 Android 3.0++ 上，如果您的 android:targetSdkVersion 低于 11，则必须激活硬件加速。并且，您必须添加以下行：

```
wv.setWebChromeClient(new WebChromeClient()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T04:00:16.933

您是在 2.3（GingerBread）还是 4.0（冰淇淋）上运行？

如果您在 Ice Cream 上运行，则需要启用硬件加速。

如果在 GingerBread 上运行，请参考： [WebView and HTML5 <video>](https://stackoverflow.com/questions/3815090/webview-and-html5-video)

希望这个有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T14:43:39.837

iframe 为我工作。但是，我发现，在 Windows 上使用 Android 模拟器播放视频时，模拟器上的互联网会在一段时间后停止工作，我需要重新启动模拟器才能访问互联网。这在 Android 手机上从未发生过。

因此，只需在浏览器上检查它以确保有互联网连接。

# javascript - 将图像从 localStorage 加载到画布仅每秒刷新一次？

> ID：11892718
> 
> 赞同：1
> 
> 时间：2012-08-09T22:11:27.147
> 
> 标签：javascript, html, canvas, local-storage, image

我有一个小画布，每次单击它时都会绘制随机矩形。在添加的每个新矩形上，整个画布都会保存到*localStorage*。

刷新网页时，会加载来自 localStorage 的最后保存的图像。

**问题：** 我必须刷新两次才能获得最后一张图像/捕获。Rrefreshing once 只给了我一个空白画布。为什么是这样？

索引.html：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="./script.js"></script>
    </head>
    <body>
        <canvas onclick="draw(this, event);" id="drawarea" height="240" width="320" style="border:1px solid black;">
        </canvas>
    </body>
</html> 
```

脚本.js：

```
"use strict;"

window.onload=function(){
    c=document.getElementById("drawarea");
    if (c) initCanvas(c);
};

function initCanvas(canvas){
    // Load last canvas
    loadLastCanvas(canvas);
}

function draw(canvas, event){

    // Draw at random place
    ctx=c.getContext("2d");
    ctx.fillStyle="#ff0000";
    ctx.beginPath();
    ctx.fillRect (250*Math.random()+1, 220*Math.random()+1, 40, 30);
    ctx.closePath();
    ctx.fill();

    // Save canvas
    saveCanvas(canvas);
}

function saveCanvas(c){
    localStorage['lastImgURI']=c.toDataURL("image/png");
}

function loadLastCanvas(c){
    if (!localStorage['lastImgURI']) return;
    img = new Image();
    img.src= localStorage['lastImgURI'];
    ctx=c.getContext("2d");
    ctx.drawImage(img, 0, 0, img.width, img.height);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:13:26.770

问题是这`img.src = ""`是一个异步调用。所以你必须为`onload`事件添加一个回调。有关更多信息，请参阅[html5canvastutorials.com](http://www.html5canvastutorials.com/tutorials/html5-canvas-images/)。

```
function loadLastCanvas(c){
    if (!localStorage['lastImgURI']) return;
    img = new Image();
    img.onload = function() {
       ctx=c.getContext("2d");
       ctx.drawImage(img, 0, 0, img.width, img.height);
    };
    img.src= localStorage['lastImgURI'];
} 
```

# ruby-on-rails-3 - 如何在完整日历中向事件对象添加新的非标准字段

> ID：11892722
> 
> 赞同：0
> 
> 时间：2012-08-09T22:11:48.520
> 
> 标签：ruby-on-rails-3, fullcalendar

如何将非标准事件字段添加到完整日历？

我已经阅读了有关此的其他问题-他们的答案与不完整的[文档](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)所说的相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:59:14.587

（简单的概念） - 如果您已经在数据库中创建了一个字段，那么一种方法是将该字段放在您的 rails 页面中的数组中。在 JS 方面，使用[eventRender](http://arshaw.com/fullcalendar/docs/event_rendering/eventRender/)并将其附加到您想要的任何元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:06:24.687

我刚刚在其他问题中阅读了这个，但我没有测试。

添加此回调

```
eventRender: function( event, element, view ) 
    { 
        //redo the title to include the description
        element.find(".fc-event-title").html(event.title + ": <span>" + event.description + "</span>");
    }, 
```

[jQuery 日历：如何在特定日期添加可点击事件？](https://stackoverflow.com/questions/12008454/jquery-calendar-how-to-add-clickable-events-on-particular-dates)

# asp.net - ASP.NET 成员数据库和单独的主要组件数据库

> ID：11892723
> 
> 赞同：0
> 
> 时间：2012-08-09T22:11:52.000
> 
> 标签：asp.net, database, database-design, architecture, aspnetdb

我正在建立一个 asp.net 公寓租赁网站。目前，我没有使用任何会员功能，因此无需创建长期用户、管理个人资料或任何广泛的用户相关数据。

但是，我有一个单独的数据库，其中包含（单位、位置、标签等）的表，其中包含一个简单的用户表，其中包含以下三个字段：姓名、电子邮件和电话号码。请注意，当单位的报价过期时，创建的用户将从数据库中删除。

考虑到可扩展性和最佳实践，我应该在一个巨大的数据库中创建所有表（例如：`ASPNETDB`如果我想使用默认的 asp.net 会员提供程序）还是应该将会员数据库与公寓相关的数据库分开?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:12:59.560

没有理由不将所有这些都放在一个数据库中 - 从长远来看，维护更少。

# html - Chrome中出现奇怪的黑块

> ID：11892727
> 
> 赞同：19
> 
> 时间：2012-08-09T22:12:09.007
> 
> 标签：html, google-chrome, css, webkit

出于某种原因，黑框在 Chrome（最新版本）中的随机空间中显示。

其中一些框出现在主容器之外，而另一些则出现在内联中，覆盖了内容块。它们随机出现，通常在滚动后出现，并且在打开检查器、悬停在元素上或向下和向上滚动时通常会消失。

作为参考，页面上有一些动画、盒子阴影（已被禁用）、线性渐变和位置：页面上的固定元素，尽管这在 Chrome 以外的浏览器中不是问题。

这已在用户测试中得到广泛报道，尽管我无法想出一个修复方法。我不确定这是 CPU 还是显卡问题，因为该网站相对较轻，而且我正在使用 16gb 内存的新笔记本电脑浏览。我的旧 Mac Mini，带有 4GB 内存，不会产生这个问题。

任何指针将不胜感激。

![在此处输入图像描述](../Images/5693d53cae0c0774c256dc10eecf7a3c.png)

![在此处输入图像描述](../Images/aa163fd5f4e43cfd49f137ac235ecdac.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T19:05:51.747

更新：这是 Chrome 中的一个错误并已修复：[https ://code.google.com/p/chromium/issues/detail?id=142038](https://code.google.com/p/chromium/issues/detail?id=142038)

eddz 在 crbug.com/new 上提交了该问题，超过 40 人为这张票加注了星标以跟进。它导致工程团队在 Chrome 中进行了一些单独的修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:20:20.017

`transformZ (0)`我在一个用于强制 GPU 渲染的网站上遇到了这个问题。当我删除这种风格时，问题就消失了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T22:31:13.873

**这不是一个答案，但如果你能够以某种方式重现它，可能会在以后的路上：**

在本地或任何地方复制页面，将基本 href 设置为主域，现在开始从底部到顶部删除 css 链接和 js 脚本，直到您不再体验该行为，如果您到达那一点那么您删除的最后一个脚本/样式表是罪魁祸首。

如果您找到罪魁祸首文件，现在尝试查找罪魁祸首行/部分。

如果你没有达到那一点，它**可能**是浏览器，但听起来不像。

它也可能在脚本/样式表之间链接和/或意外继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T12:29:18.003

我们在我们的网站上也经历过这种奇怪的障碍。过去我们使用过渡，过渡正在重现另一个错误“奇怪的线条”随机出现在页面上并在滚动过程中消失。

现在我们开始使用transformX-Y，可能在某些地方Z也是。我们有这个地狱块。

Chrome 中的 transfom + 过渡动画似乎有问题。当一次动画过多的块时，可能会出现此错误吗？

FF 工作正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-09T06:55:12.577

我遇到了这些相同的盒子。对我来说，问题在于我使用的是 mp4 视频，这些视频在 chrome 中已被弃用，而不是 webm 视频。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-01T01:29:47.550

我认为这与我在我的网站上遇到同样问题的 GPU 有关。当我打开 Metal Rendering 标志时，它就停止了。

我的网站在滚动时随机呈现 bgs。它在视频和动画上真的很重，看起来 chrome 可用的 GPU 太少，以至于图形密集型网站在眨眼时无法正常工作。我注意到当 chrome 使用 webkit 时，这些问题并没有发生。

我这是一个闪烁渲染问题。

# python - 如何使用 Python 的 Requests 模块“登录”到网站？

> ID：11892729
> 
> 赞同：128
> 
> 时间：2012-08-09T22:12:14.537
> 
> 标签：python, python-requests, pyquery

我正在尝试使用 Python 中的 Requests 模块发布登录网站的请求，但它并没有真正起作用。我是新手......所以我不知道是否应该制作我的用户名和密码 cookie 或我发现的某种类型的 HTTP 授权 (??)。

```
from pyquery import PyQuery
import requests

url = 'http://www.locationary.com/home/index2.jsp' 
```

所以现在，我想我应该使用“post”和cookie....

```
ck = {'inUserName': 'USERNAME/EMAIL', 'inUserPass': 'PASSWORD'}

r = requests.post(url, cookies=ck)

content = r.text

q = PyQuery(content)

title = q("title").text()

print title 
```

我有一种感觉，我做错了饼干……我不知道。

如果没有正确登录，主页的标题应该是“Locationary.com”，如果是，它应该是“主页”。

如果您能向我解释一些关于请求和 cookie 的事情并帮助我解决这个问题，我将不胜感激。:D

谢谢。

...它仍然没有真正起作用。好的...所以这是主页 HTML 在您登录之前所说的内容：

```
</td><td><img src="http://www.locationary.com/img/LocationaryImgs/icons/txt_email.gif">    </td>
<td><input class="Data_Entry_Field_Login" type="text" name="inUserName" id="inUserName"  size="25"></td>
<td><img src="http://www.locationary.com/img/LocationaryImgs/icons/txt_password.gif"> </td>
<td><input  class="Data_Entry_Field_Login"  type="password" name="inUserPass"     id="inUserPass"></td> 
```

所以我认为我做得对，但输出仍然是“Locationary.com”

第二次编辑：

我希望能够长时间保持登录状态，并且每当我请求该域下的页面时，我希望内容显示为好像我已登录一样。

* * *

## 回答 #1

> 赞同：286
> 
> 时间：2013-07-13T18:32:18.403

我知道您已经找到了另一种解决方案，但是对于像我这样发现这个问题的人来说，寻找相同的东西，可以通过以下请求来实现：

首先，就像 Marcus 所做的那样，检查登录表单的来源以获得三条信息——表单发布到的 url，以及用户名和密码字段的名称属性。在他的示例中，它们是 inUserName 和 inUserPass。

完成后，您可以使用`requests.Session()`实例向登录 url 发出 post 请求，并将您的登录详细信息作为有效负载。从会话实例发出请求与正常使用请求基本相同，它只是增加了持久性，允许您存储和使用 cookie 等。

假设您的登录尝试成功，您可以简单地使用会话实例向站点发出进一步的请求。识别您的 cookie 将用于授权请求。

**例子**

```
import requests

# Fill in your details here to be posted to the login form.
payload = {
    'inUserName': 'username',
    'inUserPass': 'password'
}

# Use 'with' to ensure the session context is closed after use.
with requests.Session() as s:
    p = s.post('LOGIN_URL', data=payload)
    # print the html returned or something more intelligent to see if it's a successful login page.
    print p.text

    # An authorised request.
    r = s.get('A protected web page url')
    print r.text
        # etc... 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-08-09T22:21:48.950

## 如果您想要的信息在您登录后立即被定向到的页面上...

让我们改为调用您的`ck`变量`payload`，就像在[python-requests](http://docs.python-requests.org/en/latest/user/quickstart/#more-complicated-post-requests)文档中一样：

```
payload = {'inUserName': 'USERNAME/EMAIL', 'inUserPass': 'PASSWORD'}
url = 'http://www.locationary.com/home/index2.jsp'
requests.post(url, data=payload) 
```

## 除此以外...

请参阅下面的[https://stackoverflow.com/a/17633072/111362](https://stackoverflow.com/a/17633072/111362)。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2015-02-20T12:07:52.087

让我试着简单点，假设站点的 URL 是[http://example.com/](http://example.com/)，假设你需要填写用户名和密码来注册，所以我们去登录页面说[http://example。 com/login.php](http://example.com/login.php)现在查看它的源代码并搜索它将在表单标记中的操作 URL，例如

```
 <form name="loginform" method="post" action="userinfo.php"> 
```

现在使用 userinfo.php 创建绝对 URL，即“ [http://example.com/userinfo.php](http://example.com/userinfo.php) ”，现在运行一个简单的 python 脚本

```
import requests
url = 'http://example.com/userinfo.php'
values = {'username': 'user',
          'password': 'pass'}

r = requests.post(url, data=values)
print r.content 
```

我希望有一天这对某个地方的人有所帮助。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-07-27T11:44:16.760

该`requests.Session()`解决方案协助登录到具有 CSRF 保护的表单（如在 Flask-WTF 表单中使用的）。检查是否`csrf_token`需要 a 作为隐藏字段，并使用用户名和密码将其添加到有效负载中：

```
import requests
from bs4 import BeautifulSoup

payload = {
    'email': 'email@example.com',
    'password': 'passw0rd'
}     

with requests.Session() as sess:
    res = sess.get(server_name + '/signin')
    signin = BeautifulSoup(res._content, 'html.parser')
    payload['csrf_token'] = signin.find('input', id='csrf_token')['value']
    res = sess.post(server_name + '/auth/login', data=payload) 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-01-27T15:03:23.910

找出网站表单上用于用户名`<...name=username.../>`和密码的输入的名称，`<...name=password../>`并在下面的脚本中替换它们。还要替换 URL 以指向要登录的所需站点。

***登录.py***

```
#!/usr/bin/env python

import requests
from requests.packages.urllib3.exceptions import InsecureRequestWarning
requests.packages.urllib3.disable_warnings(InsecureRequestWarning)
payload = { 'username': 'user@email.com', 'password': 'blahblahsecretpassw0rd' }
url = 'https://website.com/login.html'
requests.post(url, data=payload, verify=False) 
```

`disable_warnings(InsecureRequestWarning)`当尝试使用未经验证的 SSL 证书登录站点时，使用将使脚本的任何输出静音。

额外的：

要在基于 UNIX 的系统上从命令行运行此脚本，请将其放置在一个目录中，`home/scripts`即将此目录添加到您的路径`~/.bash_profile`或终端使用的类似文件中。

```
# Custom scripts
export CUSTOM_SCRIPTS=home/scripts
export PATH=$CUSTOM_SCRIPTS:$PATH 
```

然后在里面创建一个指向这个python脚本的链接`home/scripts/login.py`

```
ln -s ~/home/scripts/login.py ~/home/scripts/login 
```

关闭你的终端，启动一个新的，运行`login`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-10-29T22:50:22.770

某些页面可能需要的不仅仅是登录/通过。甚至可能有隐藏字段。最可靠的方法是使用检查工具并在登录时查看网络选项卡，以查看正在传递哪些数据。

# css - 背景需要有渐变

> ID：11892731
> 
> 赞同：0
> 
> 时间：2012-08-09T22:12:31.747
> 
> 标签：css

我对 css 完全是个菜鸟，我需要在页面顶部的背景图像中添加渐变。这是我尝试过的，但显然它不能作为背景覆盖值。我该如何解决

我有一个背景图像，我需要在它上面有一个渐变。这是我的CSS

```
body.test {
    /* Mozilla: */
    background: -moz-linear-gradient(top, #00FF00, #000000);
    /* Chrome, Safari:*/
    background: -webkit-gradient(linear,
    left top, left bottom, from(#00FF00), to(#000000));
    /* MSIE */
    filter: progid:DXImageTransform.Microsoft.Gradient(
        StartColorStr='#00FF00', EndColorStr='#000000', GradientType=0);
background: url(../mybackground.png);
} 
```

**在这里测试** [http://jsfiddle.net/PsDuF/](http://jsfiddle.net/PsDuF/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:14:23.173

首先，看看这个用于创建 CSS 渐变的[工具。](http://www.colorzilla.com/gradient-editor/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:14:14.537

改变

```
background: url(../mybackground.png); 
```

到

```
background-image:  url(../mybackground.png); 
```

`background`是简写语法。或者，您可以将图像与其他语法结合起来：

```
background:  url(../mybackground.png), -moz-linear-gradient(top, #00FF00, #000000); 
```

在您的情况下，您要声明`background`多次，因此每次声明它时，您都会覆盖先前的声明。

当您在一个声明中声明多个背景时，您声明它们的顺序将改变堆叠顺序。使用图像和 mozilla 背景渐变的 JSBIN 示例：jsbin.com/abumuz/1

请注意，如果您希望在图像顶部使用渐变，但仍想查看图像，则需要确保您的渐变具有 Alpha 透明度。

# django - Django：对 UserProfile 进行单元测试时出错

> ID：11892733
> 
> 赞同：0
> 
> 时间：2012-08-09T22:12:35.043
> 
> 标签：django, unit-testing

我在 Django 中不断收到单元测试错误，我不明白。

**完整的错误信息：**

```
Creating test database for alias 'default'...
.................................................................................E.......................................................................................................................................................................................................................................................................s........................................................................
======================================================================
ERROR: test_site_profile_not_available (django.contrib.auth.tests.models.ProfileTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/django/contrib/auth/tests/models.py", line 29, in test_site_profile_not_available
    del settings.AUTH_PROFILE_MODULE
  File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 215, in __delattr__
    delattr(self._wrapped, name)
AttributeError: AUTH_PROFILE_MODULE

----------------------------------------------------------------------
Ran 418 tests in 26.548s

FAILED (errors=1, skipped=1)
Destroying test database for alias 'default'... 
```

**更新：**

我已插入完整的错误消息，甚至将测试减少到最低限度：

```
class ContactModelTest(TestCase):
    def setUp(self):
        ctype = ContactType.objects.create()
        ctype.contact_type= "test1"
        ctype.save()  

def test_get_contacts_user1(self):        
        ctype = ContactType.objects.all() 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:48:31.957

好像您没有`AUTH_PROFILE_MODULE`在设置中声明。正如[Django 文档所指出](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)的，您需要通过说出您正在使用的应用程序和 UserProfile 模型来声明它，例如

```
AUTH_PROFILE_MODULE = "accounts.UserProfile" 
```

# sql - 在 2 个表之间建立一对多关系

> ID：11892734
> 
> 赞同：3
> 
> 时间：2012-08-09T22:12:37.887
> 
> 标签：sql, sql-server, database, relation

我正在构建一个数据库，该数据库由一个表`category, customer table`和一个产品表组成，该表从类别中获取信息。

现在我需要一张新表出售，其中包含`customerID, date, productID`. 我的问题是客户可能会购买很多产品。如何在 SQL Server 2008 中建立它们之间的关系？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T22:16:28.420

```
Customer {id, name, ...}
Product {id, name, ...}
Sale {product_id, customer_id, order_id, qty, ...}
Order {id, date, ...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:15:17.080

只需添加一个订单表，订单表将保持对订单中产品的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T22:36:34.037

您在@orn 的回答中评论的绘图只有在每次销售只能涉及一种产品时才有意义。

Fliim 先生让您在一次销售中处理多种产品的正确轨道。

# bash - Bash 脚本不等待读取

> ID：11892735
> 
> 赞同：11
> 
> 时间：2012-08-09T22:12:38.750
> 
> 标签：bash

我正在尝试以另一个用户身份运行命令并以该用户身份读取输入。由于某种原因，脚本不会在`read`命令上暂停，我不确定为什么。这是脚本的一个示例：

```
#!/bin/bash
username='anthony'
sudo -H -u "$username" bash << 'END_COMMAND'

# Commands to be run as new user
# -------------------------------

echo "#!  Running as new user $USER..."

echo "#!  Gathering setup information for $USER..."
echo -n "Enter your name and press [ENTER]: "
read name
echo -n "Enter your email and press [ENTER]: "
read email
END_COMMAND

echo "Done" 
```

关于为什么这不会停止的任何想法`read name`或`read email`？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-09T22:29:11.070

`read`正在从标准输入读取，并`bash`从来自heredoc 的sudo 继承其标准输入。如果您希望它来自其他地方，则需要明确。例如：

```
bash  3<&0 << 'END_COMMAND'
...
read <&3
... 
```

但是，这不适用于 sudo，因为 sudo 会关闭非标准文件描述符。但是 sudo 不会关闭 stderr，因此如果您可以重用该文件描述符，您可以这样做：

```
sudo -H -u "$username" bash 2<&0 << 'END_COMMAND'
...
read -u 2 email
... 
```

但这样做可能更安全：

```
sudo -H -u "$username" bash << 'END_COMMAND'
...
read email < /dev/tty
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:36:57.390

你可以让这个脚本检查它是否以 sudo 运行，如果不是，用 sudo 执行自身吗？

```
#!/bin/bash
username='anthony'

if [[ -z "${SUDO_USER}" ]]; then
    exec sudo -H -u "${username}" -- $0
fi

echo "
# Commands to be run as new user
# -------------------------------
"
echo "#!  Running as new user $USER..."

echo "#!  Gathering setup information for $USER..."
echo -n "Enter your name and press [ENTER]: "
read name
echo -n "Enter your email and press [ENTER]: "
read email 
```

# python - Python / YAML：如何在 loadConfig 中不仅从 YAML 文件初始化其他对象？

> ID：11892736
> 
> 赞同：3
> 
> 时间：2012-08-09T22:12:47.080
> 
> 标签：python, object, yaml, init

我认为加载一些 YAML 对象是一个小误解。我定义了下面的类。

我想要做的是加载一些具有覆盖`loadConfig`函数的对象`YAMLObjects`。其中一些来自我的`.yaml`文件，但其他应该由从 YAML 文件加载的对象构建而成。

例如，在下面的类中，我加载了一个名为“keep”的成员对象，它是一个字符串，用于命名要保留在该区域中的一些项目。但我也想将其解析为一个列表，并将该列表也存储为成员对象。而且我不希望用户必须在 YAML 中同时提供此参数的字符串和列表版本。

我目前的工作是覆盖`__getattr__`里面的函数`Region`，如果它看起来没有找到它们，让它创建默认值。但这比初始化对象所需要的笨重和复杂。

我在这里误解了什么约定。为什么该`loadConfig`方法不创建 YAML 中没有的其他内容？

```
import yaml, pdb

class Region(yaml.YAMLObject):
    yaml_tag = u'!Region'

    def __init__(self, name, keep, drop):
        self.name = name
        self.keep = keep
        self.drop = drop

        self.keep_list = self.keep.split("+")
        self.drop_list = self.drop.split("+")
        self.pattern = "+".join(self.keep_list) + "-" + "-".join(self.drop_list)
    ###

    def loadConfig(self, yamlConfig):
        yml = yaml.load_all(file(yamlConfig))
        for data in yml:

            # These get created fine
            self.name = data["name"]
            self.keep = data["keep"]
            self.drop = data["drop"]

            # These do not get created.
            self.keep_list = self.keep.split("+")
            self.drop_list = self.drop.split("+")
            self.pattern = "+".join(self.keep_list) + "-" + "-".join(self.drop_list)
    ###  
### End Region

if __name__ == "__main__":
    my_yaml = "/home/path/to/test.yaml"
    region_iterator = yaml.load_all(file(my_yaml))

    # Set a debug breakpoint to play with region_iterator and
    # confirm the extra stuff isn't created.
    pdb.set_trace() 
```

在这里`test.yaml`，你可以运行所有这些，看看我的意思：

```
 Regions:

   # Note: the string conventions below are for an
   # existing system. This is a shortened, representative
   # example.

   Market1:  
    !Region                 
        name: USAndGB
        keep: US+GB
        drop: !!null 

   Market2:
    !Region
        name: CanadaAndAustralia
        keep: CA+AU
        drop: !!null 
```

例如，这里是我在 IPython shell 中运行它并探索加载的对象时的样子：

```
In [57]: %run "/home/espears/testWorkspace/testRegions.py"
--Return--
> /home/espears/testWorkspace/testRegions.py(38)<module>()->None
-> pdb.set_trace()
(Pdb) region_iterator
<generator object load_all at 0x1139d820>
(Pdb) tmp = region_iterator.next()
(Pdb) tmp
{'Regions': {'Market2': <__main__.Region object at 0x1f858550>, 'Market1': <__main__.Region object at 0x11a91e50>}}
(Pdb) us = tmp['Regions']['Market1']
(Pdb) us
<__main__.Region object at 0x11a91e50>
(Pdb) us.name
'USAndGB'
(Pdb) us.keep
'US+GB'
(Pdb) us.keep_list
*** AttributeError: 'Region' object has no attribute 'keep_list' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:34:25.960

我发现对基本上是存储的类使用 yaml 很有用的一种模式是让加载器使用构造函数，以便以与正常创建对象时相同的方式创建对象。如果我理解您正在尝试正确执行的操作，那么这种结构可能会很有用：

```
import inspect
import yaml
from collections import OrderedDict

class Serializable(yaml.YAMLObject):
    __metaclass__ = yaml.YAMLObjectMetaclass
    @property
    def _dict(self):
        dump_dict = OrderedDict()

        for var in inspect.getargspec(self.__init__).args[1:]:
            if getattr(self, var, None) is not None:
                item = getattr(self, var)
                if isinstance(item, np.ndarray) and item.ndim == 1:
                    item = list(item)
                dump_dict[var] = item

        return dump_dict

    @classmethod
    def to_yaml(cls, dumper, data):
        return ordered_dump(dumper, '!{0}'.format(data.__class__.__name__), 
                            data._dict)

    @classmethod
    def from_yaml(cls, loader, node):
        fields = loader.construct_mapping(node, deep=True)
        return cls(**fields)

def ordered_dump(dumper, tag, data):
    value = []
    node = yaml.nodes.MappingNode(tag, value)
    for key, item in data.iteritems():
        node_key = dumper.represent_data(key)
        node_value = dumper.represent_data(item)
        value.append((node_key, node_value))

    return node 
```

然后，您希望您的 Region 类继承自 Serializable，并删除 loadConfig 的东西。我发布的代码检查构造函数以查看要保存到 yaml 文件的数据，然后在加载 yaml 文件时使用相同的数据集调用构造函数。这样，您只需在构造函数中正确获取逻辑，并且 yaml 加载应该免费获得它。

该代码是从我的一个项目中提取的，如果它不能正常工作，请提前道歉。它也比它需要的稍微复杂一些，因为我想通过使用 OrderedDict 来控制输出的顺序。你可以用对 dumper.represent_dict 的调用来替换我的 ordered_dump 函数。

# ruby-on-rails - simple_form 如何表示 mongoid 数组

> ID：11892739
> 
> 赞同：3
> 
> 时间：2012-08-09T22:13:04.367
> 
> 标签：ruby-on-rails, arrays, checkbox, simple-form

我有一个项目模型和一个没有关系的类别模型。在项目模型的表单中，我希望能够选择项目所属的类别（复选框）（可以有很多）。类别有一个字符串标题和一组属于该标题的类别。

我有这个代码而不使用 simple_form 它列出了类别和复选框，就像一个魅力。我将如何使用 simple_form 做到这一点？

```
<% @categories.each do |category| %>
  <b><%= category.heading %></b><br />
  <% category.categories.each do |subcategory| %>
    <%= check_box_tag "project[categories][]", subcategory,@project.categories.include(subcategory) %><%=subcategory%><br />
  <% end %><br />
<% end %> 
```

我尝试更新的模型如下：

```
class Project
  include Mongoid::Document
  ...
  field :categories, type: Array
  ...
end 
```

类别也顺便存储在 Mongoid 文档中，但与项目没有关系。

```
class Category
  include Mongoid::Document
  field :heading, type: String
  field :categories, type: Array # should probably be called subcategories...
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:09:13.873

我不确定你到底想要什么，但你可以尝试这样的事情。如果你能澄清你在问什么，我会尽量给出更详细的答案。

```
 <%= simple_form_for @document do |f| %>
        # other form inputs...
        <%= f.input :categories, collection: listOfCategoryNames, as: :check_boxes %>
        # other form inputs...
    <% end %> 
```

其中`listOfCategoryNames`是所有类别名称的字符串数组。

# java - 如何在 Java 中同时执行多个进程？

> ID：11892740
> 
> 赞同：2
> 
> 时间：2012-08-09T22:13:05.053
> 
> 标签：java

我正在开发一个希望同时执行多个任务的应用程序。

我还希望能够跟踪并行运行的此类任务的数量，有时除了当前已处理的任务集外，还添加另一个要并行处理的任务。

还有一件事——我想在桌面应用程序和云应用程序中执行上述操作，在该应用程序中我初始化另一个运行 Tomcat 的虚拟机，然后在该实例中重复上述所有操作。

做这个的最好方式是什么？如果您可以为我指出有关此主题的正确理论/指南，那就太好了，尽管也欢迎代码示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T22:17:23.727

并发在 Java 中是一个很大的话题，请慢慢来

[课程：并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

Java 程序中的并发是通过启动您自己的[线程](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)来完成的。多进程只能用多个JVM来实现。完成基础知识后，您想看看[Executors。](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)它们将有助于以结构化的方式实现您的应用程序，因为它们从*Threads*抽象到*Tasks*。

我不知道您为此计划了多少时间，但如果您真的刚开始，请获得[Java Concurrency in Practice](http://jcip.net/)，阅读并编写一个出色的并发 Java 应用程序。

将整个事情提升到分布式水平是另一回事。你不能一下子解决所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:17:03.193

哇...多么一系列的步骤。首先扩展[Runnable](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runnable.html)，然后使用[Thread](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html)运行和管理您的作业。之后就可以进入Tomcat了。

# firefox - linux 操作系统中缺少 selenium ide 菜单栏

> ID：11892744
> 
> 赞同：3
> 
> 时间：2012-08-09T22:13:18.780
> 
> 标签：firefox, ubuntu, selenium, menubar

我是一个硒新手，试图在我的 Ubuntu 上安装硒 ide。

这就是我安装的方式 - 1\. 打开 Firefox 浏览器 2\. 转到[http://seleniumhq.org/download/](http://seleniumhq.org/download/) 3\. 单击下载版本 1.9.0 4\. 安装并重新启动 Firefox 5\. 单击工具，找到 Selenium IDE 并单击开始。

Selenium IDE 的问题 -

Selenium IDE 未正确安装，因为我在打开 selenium ide 时看不到菜单栏（文件、编辑、选项、帮助）。所以我无法保存、重命名等或访问其他功能。

我正在使用的版本 - Ubuntu 12.0.4、Firefox 14.0.1、Selenium ide 1.9.0。

如果我没有正确安装 ide，请告诉我。

我感谢有关如何解决此问题或任何解决方法的所有提示和指示。如果您发现任何信息含糊不清或需要有关此问题的任何更具体的详细信息，也请告诉我。

谢谢你的时间

普维

PS - 我尝试上传缺少菜单栏的 Selenium ide 的屏幕截图，但是，stakoverflow 不允许新成员上传图像，直到他们获得 10 声望点！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T07:13:51.197

您可以在浏览器菜单本身上找到菜单选项。只需在 Selenium IDE 的窗口打开时将鼠标指向浏览器的菜单栏。它将显示 Selenium IDE 的菜单选项，而不是 Firefox 的菜单选项...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:34:58.997

Selenium Firefox 插件版本 1.7.3 和 1.9.0 的菜单选项出现在我面前。

我使用 Firefox 14.0.1 进行测试。

*   [从https://addons.mozilla.org/en-US/firefox/addon/selenium-ide/](https://addons.mozilla.org/en-US/firefox/addon/selenium-ide/)下载 Selenium IDE 1.7.3
*   安装并重启
*   单击`Tool`（在顶部），然后单击`Selenium IDE`

1.9.0 版可在此处获得。 [http://release.seleniumhq.org/selenium-ide/1.9.0/selenium-ide-1.9.0.xpi](http://release.seleniumhq.org/selenium-ide/1.9.0/selenium-ide-1.9.0.xpi)

如果您仍然遇到问题，请考虑创建一个新的 firefox 配置文件，然后重新安装 Selenium。

或者您可以使用位于此处的便携式 Firefox 版本进行安装。

[http://portableapps.com/apps/internet/firefox_portable/](http://portableapps.com/apps/internet/firefox_portable/)

# sql-server - SQL Server DB 中的 Outlook BCM 消息正文在哪里？

> ID：11892746
> 
> 赞同：2
> 
> 时间：2012-08-09T22:13:25.743
> 
> 标签：sql-server, outlook, bcm

我们正在尝试从 Outlook Business Contact Manager (BCM) 获取所有邮件的转储。内置的导出工具会给我们联系信息，但不会给我们与每个联系人关联的消息。

我可以访问 BCM 存储其所有信息的 SQL Server 数据库。是否有某个字段包含 BCM 中所有消息的正文？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:59:47.713

18 小时和 50 杯咖啡后，我终于找到了包含电子邮件正文的字段。它的别名是“ActivityNote”，可以在“ActivityFullView”视图中找到。很难找到的原因是字段数据被查询结果中返回的列的视觉宽度所掩盖——您只能看到电子邮件的标题，所以它看起来像：

```
"From: Contact Name<contact@emailaddress.com> To:..." 
```

这完全会误导你的眼睛，因为它看起来像一个电子邮件标题字段而不是电子邮件正文字段。

从那里，您只需几个连接即可获得与该活动相关的所有联系信息。

希望这对将来的某人有所帮助。

# django - 尽管有数据（也就是在索引中缓存外键关系信息），但对字段的 Haystack 过滤会在 heroku 上返回一个空集

> ID：11892748
> 
> 赞同：0
> 
> 时间：2012-08-09T22:13:55.847
> 
> 标签：django, heroku, django-haystack

我的一个索引中有效地缓存了一个外键字段，称为thingy_ids，它只是一个逗号分隔的id列表，前面有thingy_id_。我想这样使用：

```
>>> sqs.filter(thingy_ids="thingy_id_133932,")

```

获得附有那个东西的结果。

这适用于我的本地机器，但不适用于 heroku。在 heroku 上，以下是令人费解的结果：

```
>>> sqs = SearchQuerySet()

>>> sqs[0].thingy_ids
你'thingy_id_133932，thingy_id_133923，'

>>> sqs.filter(thingy_ids="thingy_id_133932")
[]

```

事实上，thingy_ids 上的过滤器似乎不起作用：

```
>>> sqs.filter(thingy_ids="1")
[]
>>> sqs.filter(thingy_ids="thingy_id")
[]

```

**编辑：** 啊哈！在逗号分隔列表之间添加空格似乎可以解决问题。

我保留这个问题是因为可能有更好的方法可以在索引中缓存这个外键关系并搜索它。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:51:47.570

在逗号之间添加空格解决了这个问题，但我仍然不确定为什么。

# javascript - HTML 表单 | 始终使用 ID 访问

> ID：11892749
> 
> 赞同：0
> 
> 时间：2012-08-09T22:13:58.240
> 
> 标签：javascript

我想选择一个以保持一致性（尽管我认为这并不重要）并选择了 id....via`document.getElementById().`

不再使用

*   js访问的name属性
*   表单数组访问

关于这个有多个帖子......但只是为了让生活更轻松，不再考虑它......我只使用ID。

这个选择有问题吗？

我不太关心 N5 和 N6 以及 W3 规格。

以下是一些类似的帖子：

[最佳实践：通过 HTML id 或 name 属性访问表单元素？](https://stackoverflow.com/questions/2435525/best-practice-access-form-elements-by-html-id-or-name-attribute)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:17:06.020

ID 假设用于页面上每个元素的唯一 ID。所以在同一个文档中多次出现是无效的。

但是... NAME 属性可以在 html 标准中合法地重复。当 name 用于表单输入项时，cgi 接收的值基于 name=value 对。ID 没有固有的名称。

老实说..我认为你在这里混合苹果和橙子，因为两者的目的非常不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:54:44.130

如果在一个页面上有多个带有多个输入的表单时，每个表单输入都使用**id**，那么您应该关心每个输入的标识符的唯一性。所以标识符可能会变得很长，比如“my-form-user-name”和“my-other-special-form-user-name”等。

所以我建议给表单元素一个id，通过id检索表单，然后按名称引用它的元素。为几个表单创建唯一且可读的标识符比为 5 个表单的 50 个字段（每个表单有 10 个字段）更容易。并且可能代码将更具可读性。

```
<h4>Article form</h4>
<form id="article-form" method="post">
    <label>Title:</label>
    <input name="title" type="text" />
    <label>Text:</label>
    <textarea name="text"></textarea>
    <input type="submit" name="submit" value="Comment" />
</form>

<hr />

<h4>Support form</h4>
<form id="support-form" method="post">
    <label>Title:</label>
    <input name="title" type="text" />
    <label>Text:</label>
    <textarea name="text"></textarea>
    <input type="submit" name="submit" value="Submit issue" />
</form>
<script type="text/javascript">
    var article = document.getElementById('article-form'),
        ticket = document.getElementById('support-form');

    article['title'].value = 'My Article';
    article['text'].value = 'The text of my article...';

    ticket['title'].value = 'I found bug at your site';
    ticket['text'].value = 'Bug description...';
</script> 
```

[小提琴](http://jsfiddle.net/f0t0n/whbMs/)

但是，如果您在我的示例中使用标签并希望`for`在其中使用属性将它们绑定到输入，那么无论如何您都需要具有该输入的标识符。

# ios - iOS TwitVid SDK 未发送请求

> ID：11892751
> 
> 赞同：2
> 
> 时间：2012-08-09T22:14:08.477
> 
> 标签：ios, twitter

我正在尝试使用内置的 iOS 5 Twitter 框架和 TwitVid SDK 将视频上传到 Twitter。

我正在采取的步骤：

1) 使用 TWRequest 获取签名请求。

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];

[accountStore requestAccessToAccountsWithType:[accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter] withCompletionHandler:^(BOOL granted, NSError *error) {
    if(error) {
        [[[UIAlertView alloc] initWithTitle:@"Sorry!" message:[error description] delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles: nil] show];
    }
    else if (granted) {
        NSArray *arrayOfAccounts = [accountStore accountsWithAccountType:[accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter]];
        if ([arrayOfAccounts count] > 0) {
            ACAccount *account = [arrayOfAccounts objectAtIndex:0];

            NSURL *spURL = [NSURL URLWithString:@"https://api.twitter.com/1/account/verify_credentials.json"];
            TWRequest *twRequest = [[TWRequest alloc] initWithURL:spURL parameters:nil requestMethod:TWRequestMethodGET];
            [twRequest setAccount:account];
            NSURLRequest *signedURLRequest = [twRequest signedURLRequest]; 
```

2) 创建一个 TwitVid 实例并触发上传请求

```
TwitVid *twitVid = [[TwitVid alloc] initWithSource:@"Test" delegate:self];
[twitVid uploadWithMediaFileAtPath:moviePath offset:0 message:@"Test Message" mediaID:nil playlistID:nil vidResponseParent:nil userTags:nil geoLatitude:nil geoLongitude:nil tags:nil categoryID:nil description:@"upload test" title:@"The title" xVerifyCredentialsAuthorization:[signedURLRequest valueForHTTPHeaderField:@"Authorization"] xAuthServiceProvider:[spURL absoluteString]]; 
```

我第一次这样做时，我从适当的委托方法中得到了一些错误，并认为这是一个签名问题（我的代码中有一些错误）。现在，无论我做什么，我在我的任何委托方法中都一无所获。它没有发送数据，没有收到任何响应 - 什么都没有。我不知道该怎么办。有任何想法吗？

# css - CSS规则的“语义”：table、table-row、table-cell

> ID：11892752
> 
> 赞同：3
> 
> 时间：2012-08-09T22:14:10.263
> 
> 标签：css, semantic-markup

我最近一直在使用这些属性，尤其是`display: table-cell`。它在现代浏览器中得到了很好的支持，它对一些网格和对齐内容有很多好处，不需要复杂的标记。但是在过去的几天里，我看到人们在谈论这个，因为使用这些属性是一种不好的做法/方法，就像在这个[答案](https://stackoverflow.com/a/11892442/1456376)中一样。

优点（我现在想到的）：

*   不向 HTML 标记添加语义
*   在现代浏览器中得到很好的支持
*   有助于对齐内容
*   有助于网格系统（最有可能结合对齐内容）

缺点

*   如果您只使用`display: table-cell;`缺少的部分（行和表），则会自动添加

所以我真的不明白，为什么将它们用于布局会很糟糕。

我想这个问题已经结束（我可以理解），但也许有人有一个不错的答案——甚至对他们的使用持肯定态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T22:20:32.690

引用[链接的答案](https://stackoverflow.com/a/11892442/1456376)：

> 不要忘记 table-cell 不是正确的用法。您不希望将图像视为表格单元格，因为表格单元格应该只包含表格数据。只是举起谨慎的旗帜。*坚持语义*。

我不会说这么长：**CSS 与语义毫无关系。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:21:45.170

我喜欢根据需要设置显示和位置，尽管我几乎总是设置任何大型元素，`position: relative;`这样我就可以更轻松地处理他们的孩子。

至于`display:table-cell`- 它只是改变它的布局方式。如果您只需要一个整洁的小 4x4 网格，而不是在桌子上编写完整的代码，为什么不使用它呢？它非常简单，非常干净，是对大（凌乱）表进行编码的非常非常简单的替代方案。

我的建议是“如果它没有坏，就不要修复它”。`display:`只会改变物品的显示方式...**显示**〜去图！

我`display:`根据需要使用尽可能多的 's，例如菜单可能`:inline-block;`用于媒体查询或`:block`完整文章，或者`:table-cell`用于侧边栏/文章部分的一个漂亮的简单甚至 2 列位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T20:02:16.780

一个积极的：提供表格布局而不使用表格元素。一个负面：对某些用户代理产生负面影响： [http](http://www.456bereastreet.com/archive/201110/using_displaytable_has_semantic_effects_in_some_screen_readers/) ://www.456bereastreet.com/archive/201110/using_displaytable_has_semantic_effects_in_some_screen_readers/ 这是“这一切都取决于......”问题之一。

# c++ - C++ 可变参数模板 AND 和 OR

> ID：11892759
> 
> 赞同：8
> 
> 时间：2012-08-09T22:14:40.543
> 
> 标签：c++, c++11, variadic-templates

你可以使用 C++11 可变参数模板来完成`/* ??? */`：

```
template<bool...v> struct var_and { static bool constexpr value = /* ??? */; }; 
```

这样就在编译时`var_and<v...>::value`提供`&&`了布尔包？`v`

你可以为`struct var_or<v...>`for做同样的事情`||`吗？

您可以使用短路评估（在这两种情况下）吗？

**编辑**：对[已接受答案](https://stackoverflow.com/a/11892813/985943)的更新添加了 C++17[折叠表达式](http://en.cppreference.com/w/cpp/language/fold)启用

```
template<bool... v> constexpr bool var_and = (v && ...);
template<bool... v> constexpr bool var_or  = (v || ...); 
```

似乎，对于基于参数包的方法，只有一种受限类型的“短路评估”是可能的：虽然`var_or<true,foo(),bar()>`只实例化一次调用`||`，但它也同时调用`foo`和`bar`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T22:20:03.517

您不想`value`成为 typedef。

```
template<bool head, bool... tail>
struct var_and {
    static constexpr bool value = head && var_and<tail...>::value;
};

template<bool b> struct var_and<b> {
    static constexpr bool value = b;
}; 
```

显然同样可以为`||`.

短路评估无关紧要，因为这只处理不会有任何副作用的常量表达式。

这是另一种方法，一旦发现错误值就停止递归生成类型，模拟一种短路：

```
template<bool head, bool... tail>
struct var_and { static constexpr bool value = false; };

template<bool... tail> struct var_and<true,tail...> {
    static constexpr bool value = var_and<tail...>::value;
};

template<> struct var_and<true> {
    static constexpr bool value = true;
}; 
```

* * *

C++17 更新：使用折叠表达式使这更简单。

```
template<bool...v> struct var_and {
    static constexpr bool value = (v && ...);
}; 
```

或者也使用 enobayram 建议的模板变量：

```
template<bool... b> constexpr bool var_and = (b && ...); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-18T14:21:50.860

我只需要类似的东西，但我可以使用 C++14，所以我最终选择了以下内容，这可能比公认的答案更快（编译）：

```
template <size_t N>
constexpr bool and_all(const bool (&bs) [N]) {
  for(bool b: bs) if(!b) return false;
  return true;
} 
```

现在，这是 constexpr，因此它可以在编译时上下文和运行时使用。所以我们可以，例如，在这样的上下文中使用它`some_struct<and_all({true, false, arg_pack...})>`

# c#-4.0 - 如何获取重载静态方法的 MethodInfo？

> ID：11892760
> 
> 赞同：2
> 
> 时间：2012-08-09T22:14:40.137
> 
> 标签：c#-4.0, generics, reflection

当我运行时：

```
MethodInfo m = typeof(Expression).GetMethod("Lambda", new Type[]{typeof(Expression), typeof(ParameterExpression[])}); 
```

我得到：

```
System.Reflection.AmbiguousMatchException: Ambiguous match found. 
```

这是为了一般地做到这一点（而不是知道它是一个字符串）

```
var newExpression = Expression.Lambda<Func<T, string>>(propertyExpression, parameters);
return entities.OrderBy(newExpression); 
```

**编辑**：附加信息：

跑步：

```
typeof(Expression).GetType().GetMethod("GetMethodCandidates", BindingFlags.NonPublic | BindingFlags.Instance).Invoke(typeof(Expression),new object[]{"Lambda", BindingFlags.Static| BindingFlags.Public, CallingConventions.Standard,new Type[]{typeof(Expression), typeof(ParameterExpression).MakeArrayType()},false}) 
```

返回数组：

```
[0]: {System.Linq.Expressions.Expression`1[TDelegate] Lambda[TDelegate](System.Linq.Expressions.Expression, System.Linq.Expressions.ParameterExpression[])}
[1]: {System.Linq.Expressions.Expression`1[TDelegate] Lambda[TDelegate](System.Linq.Expressions.Expression, System.Collections.Generic.IEnumerable`1[System.Linq.Expressions.ParameterExpression])}
[2]: {System.Linq.Expressions.LambdaExpression Lambda(System.Linq.Expressions.Expression, System.Linq.Expressions.ParameterExpression[])}
[3]: {System.Linq.Expressions.LambdaExpression Lambda(System.Linq.Expressions.Expression, System.Collections.Generic.IEnumerable`1[System.Linq.Expressions.ParameterExpression])} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:13:33.837

不幸的是，反射是在泛型可用之前编写的，并且通常根本不支持泛型方法/类。

已经提出了与此类似的问题（[GetMethod for generic method](https://stackoverflow.com/questions/4035719/getmethod-for-generic-method)），答案是获取候选方法并从方法集合中选择您想要的方法。

# java - 如何使用 JGit 删除远程分支

> ID：11892766
> 
> 赞同：6
> 
> 时间：2012-08-09T22:15:13.153
> 
> 标签：java, git, jgit, remote-branch

我无法弄清楚如何删除远程分支。

我试图模仿以下 GIT 命令： git push origin :branchToDelete

以下代码及其与空源的变体：

```
RefSpec refSpec = new RefSpec();
refSpec = refSpec.setSource("");
// remove branch from origin:
git.push().setRefSpecs(refSpec).add(branchToDelete).call(); 
```

抛出和异常，如：

```
org.eclipse.jgit.api.errors.JGitInternalException: Exception caught during execution of push command
    at org.eclipse.jgit.api.PushCommand.call(PushCommand.java:175)
    at org.gitscripts.DeleteBranchOperation.execute(DeleteBranchOperation.java:27)
    at org.gitscripts.Main.main(Main.java:27)
Caused by: java.io.IOException: Source ref  doesnt resolve to any object.
    at org.eclipse.jgit.transport.RemoteRefUpdate.<init>(RemoteRefUpdate.java:285)
    at org.eclipse.jgit.transport.RemoteRefUpdate.<init>(RemoteRefUpdate.java:189)
    at org.eclipse.jgit.transport.Transport.findRemoteRefUpdatesFor(Transport.java:612)
    at org.eclipse.jgit.transport.Transport.findRemoteRefUpdatesFor(Transport.java:1150)
    at org.eclipse.jgit.api.PushCommand.call(PushCommand.java:149)
    ... 2 more 
```

提前感谢您的想法和解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-12T09:35:32.810

这应该可以帮助您：

```
//delete branch 'branchToDelete' locally
git.branchDelete().setBranchNames('refs/heads/branchToDelete').call();

//delete branch 'branchToDelete' on remote 'origin'
RefSpec refSpec = new RefSpec()
        .setSource(null)
        .setDestination("refs/heads/branchToDelete");
git.push().setRefSpecs(refSpec).setRemote("origin").call(); 
```

*用 jgit 2.0.0.201206130900-r 测试*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T05:16:42.923

按照常规的 git 语法，你不应该`RefSpec()`是：`:branchToDelete`？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T07:16:09.040

我从来没有这样做过，但是您是否只是`DeleteBranchCommand`通过指定来尝试 a `origin/branchToDelete`？

编辑：我的意思是 Git/JGit 通过结构引用远程分支`<remote name>/<branch name>`（使用 ListBranchCommand 将帮助您确保拼写正确）。

要知道分支名称的确切拼写，您可以使用 a `ListBranchCommand`（不要忘记调用`setListMode(REMOTE)`）。

注意：Git 允许比 JGit 更奇怪的行为，所以除非它写在某个地方，否则不要指望它们。

编辑：我的意思是 refspec 应该具有以下语法：（`<remote branch>:<local branch>`或者可能相反），但如果你错过了一端，不要指望它在 JGit 中有效，即使它在 Git 中有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T12:15:53.803

我可以让它工作：

```
StoredConfig config = git.getRepository().getConfig();
config.unsetSection("remote", "origin");
try {
    config.save();
} catch (IOException e) {
    logger.error(e.getMessage());
} 
```

希望能帮助到你。

# c# - 如何进行 Google 搜索并将结果显示为 URL 列表？

> ID：11892771
> 
> 赞同：0
> 
> 时间：2012-08-09T22:16:00.823
> 
> 标签：c#, list, url, search

我正在尝试用 c# 编写一个程序来搜索 Google 并将结果显示为 URL 列表。

我不确定我什至可以申请在 Google 帮助上搜索任何内容，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:21:09.357

如果您付出一些努力，看起来这个问题讨论可能会在一定程度上解决您的问题。[使用 C# 反序列化 JSON](https://stackoverflow.com/questions/4521239/deserializing-json-using-c-sharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:21:09.603

您每天可以针对 Google 搜索 API 进行 100 次免费搜索。我认为这正是你想要的。更多信息在这里 - [https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

# jquery - jQuery 的 Fancybox 错误

> ID：11892772
> 
> 赞同：0
> 
> 时间：2012-08-09T22:16:06.210
> 
> 标签：jquery, fancybox

简单的 Fancybox 实现：

```
<!-- Add fancyBox -->
<link rel="stylesheet" href="<?php echo $path ?>/scripts/fancybox/source/jquery.fancybox.css?v=2.0.6" type="text/css" media="screen" />
<script type="text/javascript" src="<?php echo $path ?>/scripts/fancybox/source/jquery.fancybox.pack.js?v=2.0.6"></script>

<script type="text/javascript">
$(document).ready(function() {
    $(".bte-banner").fancybox({
        maxWidth    : 400,
        maxHeight   : 500,
        fitToView   : false,
        width       : 400,
        height      : 500,
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'fade',
        closeEffect : 'fade',
        type        : 'iframe'
    });
});
</script> 
```

...

```
<a class="bte-banner" href="pages/products/"><img src="images/banners/imagename.png"></a> 
```

我不断收到此错误：未捕获的类型错误：无法读取未定义的属性“defaultView”

有人遇到这个或类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:22:10.400

joomla 插件的 mootools 冲突。jQuery.noConflict 解决了它。 [http://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

# iphone - 将一个数据库中的所有表插入另一个数据库

> ID：11892773
> 
> 赞同：0
> 
> 时间：2012-08-09T22:16:07.270
> 
> 标签：iphone, ios, sqlite, fmdb

一旦你像这篇文章一样附加数据库，我已经看到了将数据从一个表插入到另一个表的代码：

[iOS 上的 SQLite - SQL 从一个文件复制到另一个文件](https://stackoverflow.com/questions/10350894/sqlite-on-ios-sql-to-copy-from-one-file-to-another)

但是，我不想特定于表格。我只想从一个数据库（我们包中的那个）中获取所有数据，并将其复制到文档目录中的新数据库中。这可以做到吗？如果是这样，它的命令是什么？

我试过了

```
INSERT INTO newDBPath SELECT * FROM 'BundleDatabase' 
```

BundleDatabase 是我附加的数据库。我正在使用 FMDatabase，当我这样做时：

```
BOOL success = [newDBPath executeUpdate:theAboveQuery]; 
```

是的，我确实获得了成功。但是我在新表中什么也没得到。所以我想知道是否甚至可以将所有表从一个数据库插入到另一个数据库而不是特定于表的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:13:24.523

看起来索引是特定于数据库的，不能从我所做的研究中得到。

# c++ - C++ toString() 和 sprintf()

> ID：11892774
> 
> 赞同：2
> 
> 时间：2012-08-09T22:16:14.083
> 
> 标签：c++, string, tostring, printf, c-str

使用 C++，我正在尝试为我的类实现一个 toString() 函数：

```
void ClassName::toString(string& returnString)
{
    sprintf(returnString.c_str(), "Position: (%f, %f, %f)\n", position.x, position.y, position.y);
} 
```

但是我不断收到此错误：**const char* 类型的参数与 char* 类型的参数不兼容**

我该如何解决这个问题并使论点不再是 const？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T22:17:59.443

> 我该如何解决？

使用不同的方法，使用`stringstream`替代或辅助缓冲区。

```
void ClassName::toString(string& returnString)
{
    std::stringstream ss;
    ss << "Position: (" << position.x << ", " << position.y << ", " 
       << position.z << ")\n");
    returnString = ss.str();
} 
```

> 并使论点不再是常量？

**不。**`c_str`如果您更改为非常量类型，地狱将失败。其他程序员会哭的。天使会失去翅膀。小猫会死。油价将上涨。股市崩盘。僵尸启示录。

**这是`const`有原因**的——所以你不要修改它。这样做会导致未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:31:37.580

在现代 C++ 中，您可以说：

```
std::string ClassName::toString() const
{
    return "Position: (" + std::to_string(position.x) + ", "
          + std::to_string(position.y) + ", "
          + std::to_string(position.z) + ")\n";
} 
```

如果您必须使用`printf`，您仍然可以使用字符串，但您必须先调整它的大小。

```
std::string ClassName::toString() const
{
    static const int initial_size = 1024;

    std::string s(initial_size);
    int ret = std::snprintf(&s[0], s.size(), "Position: (%f, %f, %f)\n", position.x, position.y, position.y);
    s.resize(ret);

    // handle overflow: print again
    if (s.size() > initial_size)
    {
        std::snprintf(&s[0], s.size(), "Position: (%f, %f, %f)\n", position.x, position.y, position.y);
    }
    return s;
} 
```

请注意，它`&s[0]`为您提供了一个指向可变字符的指针，实际上是指向整个数组的第一个元素的 size `s.size()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T22:34:08.140

`c_str()`返回 a`const char *`因为使用函数返回的指针更改字符串的值通常不是一个好主意`c_str()`。

顺便说一句，您尝试做的事情毫无意义。你应该简单地使用`returnString.append()`方法。

但是如果你必须用 sprintf 来做，你应该确保你的字符串有空间来保存 sprintf 的输出。

**第一种方法：**你可以用方法来做，但是如果你直接用方法修改字符串缓冲区，`.reserve()`它不会改变字符串的内部大小计数器（会做适当的大小调整）。据我所知，如果您不需要使用该方法，不会有任何问题。`.size()``sprintf()``append()``.size()`

**第二种方法（更好）：**如果您知道 sprintf 的确切输出长度，这是更好的方法。您应该调用`.resize()`method 而不是`.reserve()`. `.resize()`将正确调整字符串的大小计数器。

最后，您应该使用：`sprintf(const_cast<char *>(returnString.data()), ...`

顺便说一句，这整件事不是一个好主意。

**PS** `.data()`与它相同，`.**c**_str()`只是它不附加空终止符以使其成为 c 样式字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-29T09:15:30.703

为 sprintf 创建一个缓冲区。然后分配给 returnString 回来。

```
void ClassName::toString(string& returnString)
{ 
    char buffer[64] = {}; // expect the length of `Position Info` will not exceed 63
    sprintf(buffer, "Position: (%f, %f, %f)\n", position.x, position.y, position.y);
    returnString = buffer;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-09T22:28:20.087

[http://www.cplusplus.com/reference/string/string/c_str/](http://www.cplusplus.com/reference/string/string/c_str/)

> 返回的数组指向一个内部位置，该位置具有该字符序列所需的存储空间加上其终止的空字符，但该数组中的值不应在程序中修改，并且只能保证在下一次调用之前保持不变字符串对象的非常量成员函数。

您不能修改返回的字符的内容 *

尝试类似：

```
void ClassName::toString(string& returnString)
{
    char tmp[256];
    sprintf(tmp, "Position: (%f, %f, %f)\n", position.x, position.y, position.y);
    returnString=tmp;
} 
```

# c# - 在 WinForms WebBrowser 中编辑 CSS

> ID：11892776
> 
> 赞同：2
> 
> 时间：2012-08-09T22:16:21.277
> 
> 标签：c#, css, winforms, browser

我目前有一个带有 WebBrowser 控件的 WinForms 应用程序，我可以使用非常有用的 HtmlAgilityPack 成功编辑标记。我现在的问题是，如何编辑我的页面引用的样式表？

理想情况下，我希望能够获得完整的规则集，找到必要的 ID，然后像这样简单地编辑 CSS 声明： background-color: **#ccc** ; <-- 这就是我要即时修改的内容（并保存 CSS 文件并重新加载引用所述样式表的页面）。

似乎应该有一个简单的解决方案，但我很难找到一个。

编辑：另外，我应该指出它可能并不总是“#ccc”，关键是我确切地知道我想要修改哪些选择器，以及它们在样式表中的哪些类中。第一次编辑后，确切的颜色将是未知的，所以我不能只对该 background-color:#ccc 规则进行替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:31:41.847

您可以`src`从文档的 HTML 中获取 CSS 文件的 URL，以获取完整的 CSS 样式集。然后，修改后，将 CSS 保存到文件系统。

最后，要应用更改，您可以修改`<link src="..."** >`以指向更新的样式表。

如果您需要解决页面上存在多个样式表的可能性，您可以简单地将各个表单声明的内容合并到一个字符串中，然后继续执行上述操作

# r - R中的自定义滞后acf / ccf

> ID：11892782
> 
> 赞同：0
> 
> 时间：2012-08-09T22:17:12.150
> 
> 标签：r, correlation, xts

有没有办法在 R 中生成一个 ccf 图，`ccf`但只允许它使用负滞后？我尝试改变`lag.max`，但它仍然保持对称形状。

编辑：澄清一下，我需要大于绘制的标准默认值的滞后（我认为默认值为 +-34）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T22:46:13.727

我遵循了 ?ccf 中的一个示例。我创建了一个`ccf`对象，然后查看了它的结构，我还没有使用以下方法绘制它`plot=F`：

```
>xccf=ccf(mdeaths,fdeaths,ylab="wtf!",lag.max=200, plot=F)
>str(xccf) 
```

该`str`命令显示存在某种序列的组件调用延迟，请使用以下命令查看：

```
 > xccf$lag
, , 1

              [,1]
  [1,] -5.91666667
  [2,] -5.83333333
  [3,] -5.75000000
  [4,] -5.66666667
  [5,] -5.58333333
 ...       ...    ...
[141,]  5.75000000
[142,]  5.83333333
[143,]  5.91666667 
```

滞后的长度将是 lag.max 或较短数据中的观察数，以较低者为准。对于这个示例数据，我将 max.lag 设置为 200，但由于没有足够的数据来计算那么多，所以你只能得到 143。如果你只想要负数，那么前 71 个就是它们。所以我把哪个滞后到方括号中来作为那些的子集。然后调用情节上的东西。

> 情节（xccf[xccf$lag[1:71],]）

这给出了这个情节：

![啊啊啊啊！](../Images/91092ccfa6d1ad4faabd8bfadaa87aaa.png)

# javascript - jQuery 图像循环器

> ID：11892783
> 
> 赞同：-2
> 
> 时间：2012-08-09T22:17:19.130
> 
> 标签：javascript, jquery, image

我正在尝试使用 jQuery 为我的网站制作一个图像循环器，但我无法让它循环播放。我想添加三个按钮来循环播放图片，button1 = 第一张图片，button2= 第二张图片，等等......如果没有点击按钮，让它每5秒左右自动循环一次，我该怎么做。我一直在寻找解决方案，但没有运气。帮助将不胜感激。我的代码是：

```
$(document).ready(function() {
var current = 1
if(current == 1){
    $('.imgslide1').fadeOut();
    $('.imgslide2').fadeOut();
    $('.imgslide3').fadeOut();
    $('.imgslide1').fadeIn().delay(3000).fadeOut().curr();
};
if(current == 2){
    $('.imgslide1').fadeOut();
    $('.imgslide2').fadeOut();
    $('.imgslide3').fadeOut();
    $('.imgslide2').fadeIn().delay(3000).fadeOut().curr();
};
if(current == 3){
    $('.imgslide1').fadeOut();
    $('.imgslide2').fadeOut();
    $('.imgslide3').fadeOut();
    $('.imgslide3').fadeIn().delay(3000).fadeOut().curr();
};
if(current > 3){
    current = 1;
};
function curr(){
    current++;
};
$('#button1').click(function() {
    current = 1
});
$('#button2').click(function() {
    current = 2
});
$('#button3').click(function() {
    current = 3
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:22:04.280

这是一个使用 Jquery 的示例，请查看 slidejs.com 以获得更全面的示例，其中包含您可以使用的代码。

```
<script src="js/slides.min.jquery.js"></script>
    <script>
        $(function(){
            $('#slides').slides({
                preload: true,
                preloadImage: 'img/loading.gif',
                play: 5000,
                pause: 2500,
                hoverPause: true,
                animationStart: function(current){
                    $('.caption').animate({
                        bottom:-35
                    },100);
                    if (window.console && console.log) {
                        // example return of current slide number
                        console.log('animationStart on slide: ', current);
                    };
                },
                animationComplete: function(current){
                    $('.caption').animate({
                        bottom:0
                    },200);
                    if (window.console && console.log) {
                        // example return of current slide number
                        console.log('animationComplete on slide: ', current);
                    };
                },
                slidesLoaded: function() {
                    $('.caption').animate({
                        bottom:0
                    },200);
                }
            });
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:30:26.603

你有什么特别的理由想要一个定制的吗？有许多可用的 jQuery 插件和库。我过去使用过[Easy Slider](http://cssglobe.com/easy-slider-17-numeric-navigation-jquery-slider/)。它非常简单并且不是很大，因此对性能几乎没有影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T22:33:57.967

我看到其他人发布了一些建议。我只想分享一个我在许多项目中使用过的非常棒的插件。

它叫做 Cycle，你可以在这里阅读更多关于它的信息：http: [//jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

它支持导航（1、2、3）、下一个、上一个、自定义回调等等。查看一些非常简单的演示。

（我已经测试了许多循环插件，这是我遇到的最好的一个）。

# regex - 如何有效地匹配 Perl 正则表达式中已经匹配的内容？

> ID：11892788
> 
> 赞同：1
> 
> 时间：2012-08-09T22:17:51.663
> 
> 标签：regex, perl, lookahead, lookaround

我编写了一个正则表达式来验证必须遵守以下规则的字符串：

1.  必须至少为一个字符
2.  不得包含空白字符
3.  第一个字符不能是标点符号
4.  最后一个字母不能是标点符号
5.  不能以标点符号结尾，后跟数字
6.  所有其他字符可以是除`/[:@#]`.

这是正则表达式：

```
my $name_re = qr/
     [^[:punct:][:blank:]]      #  not punct or blank
     (?:                        #  followed by...
         [^[:blank:]:@#]*       #      any number non-blank, non-@, non-#, non-@
         [^[:punct:][:blank:]]  #      one not blank or punct
     )?                         #  ... optionally
/x; 
```

看到有什么遗漏吗？不执行规则#5。我一直在通过编写如下代码来执行它：

```
die "$proj is not a valid name" unless $proj =~ /\A$name_re\z/
    && $proj !~ /[[:punct:]][[:digit:]]+\z/; 
```

有很多*地方*我必须这样做，所以我宁愿这一切都在一个正则表达式中完成。问题是：如何？什么正则表达式会拒绝诸如“foo,23”之类的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T22:27:43.860

以下应该有效：

```
my $name_re = qr/
    \A(?![[:punct:]])         # first character isn't punctuation
    (?:                       # start non-capturing group, repeated once or more
       (?![[:punct:]][[:digit:]]+\z)  # make sure 5th condition isn't violated
       [^[:blank:]:@#]                # match a valid character
    )+                        # end non-capturing group
    (?<![[:punct:]])\z        # last character isn't punctuation
/x; 
```

请注意，我在正则表达式中移动了锚点，这对于您当前的方法可能不是完全必要的，但我认为将它们全部放在一个地方会更清楚。

`(?!...)`并且`(?<!...)`分别是负前瞻和后瞻。它们使验证这样的事情变得非常简单，基本上中间部分可以“匹配这些有效字符”，在开始和结束时使用前瞻/后视来检查这些条件。

中间的否定前瞻验证在给定位置，我们不能仅使用标点符号或数字匹配字符串的末尾，或者换句话说，它会检查以确保不违反条件 5。因为这个前瞻在重复组内，所以在每个位置都检查它。

如果您可以使用可变长度的后视，这会更简单，但我认为 Perl 不支持它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:19:39.080

@fj 的答案对于匹配完整的字符串是正确的，但还需要一个可以作为较大字符串的一部分与其中的其他内容匹配的变体。这是那个版本：

```
my $name_re = qr/
    (?![[:punct:]])                # first character isn't punctuation
    (?:                            # start non-capturing group, repeated once or more ...
       (?!                         #    negative look ahead for...
           [[:punct:]]             #       punctuation
           [[:digit:]]+            #       digits
           (?:$|[[:blank:]])       #       eol or blank
       )                           #    ...
       [^[:blank:]:@#]             #     match a valid character
    )+                             # ... end non-capturing group
    (?<![[:punct:]])\b             # last character isn't punctuation
/x; 
```

# c++ - 初始化文件的好习惯

> ID：11892790
> 
> 赞同：0
> 
> 时间：2012-08-09T22:17:55.233
> 
> 标签：c++, initialization

什么是应用程序初始化文件的好习惯。我将使用 xml 文件作为我的初始化文件，但我不只是想将所有内容都塞进一个文件中。我应该如何拆分文件？应该按班级吗？按模块？

谢谢，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:39:25.797

想想用户或开发人员希望如何与这些文件交互、备份它们、对它们进行版本化（SVN、CVS 等）和/或将配置从一台机器/安装传输到另一台机器。通常最好将所有配置保存在一个文件中。你需要一个充分的理由不这样做。

过去我有充分的理由，但通常用于非常专业的内部应用程序，其中特定于机器的配置（与本地硬件相关）需要与特定于应用程序的配置分开。这种分离意味着我可以更新应用程序配置并将其推广到我们所有的机器上，而不必担心覆盖硬件配置。

一般来说，我喜欢结构良好、文档齐全且组织直观的单一配置文件。如果它变得很大，很重要 - 这就是滚动条和搜索实用程序的设计目的！沿着轨道，当你在寻找一个特定的设置时，如果你必须在 10 个不同的文件中搜索它，它会让你大吃一惊。

# .net - ProtoContractAttribute with Inherited = false

> ID：11892791
> 
> 赞同：1
> 
> 时间：2012-08-09T22:17:57.237
> 
> 标签：.net, protobuf-net

这是一个场景：

```
[ProtoContract]
class A{} 
```

过了一会儿，另一个开发人员补充道：

```
class B : A {
  int m;
} 
```

如果一个类没有 ProtoContractAttribute 或在 Google Protocol Buffers 序列化期间出现错误，我将回退到 XML。上面代码的问题是 B 来自 A 的固有 ProtoContractAttribute（注意下面的 Inherited = true），但成员 'm' 不会被序列化，因为它没有 ProtoMemberAttribute。

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Struct | AttributeTargets.Enum 
| AttributeTargets.Interface, AllowMultiple = false, Inherited = true)]
public sealed class ProtoContractAttribute : Attribute
{...} 
```

能够添加：

```
[AttributeUsage(AttributeTargets.Class, Inherited = true)]
public class ProtoContractWithoutInheritance : ProtoBuf.ProtoContractAttribute
{
} 
```

但是 ProtoContractAttribute 是密封的，即使它没有被密封，ProtoBuf-Net 也在寻找显式类型：

```
if (item.AttributeType.FullName == "ProtoBuf.ProtoContractAttribute")
{...} 
```

任何解决方案/解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T05:09:03.837

好吧，我能想到的最简单的解决方法是：

```
bool isProto = Attribute.IsDefined(
    yourType, typeof(ProtoContractAttribute), false); 
```

但是，我也在调查如果我们将其设为非继承会出现什么问题。被继承的东西看起来有点不对劲！

编辑：这也应该从 r571 开始修复；该属性现在未标记为继承。

# php - 预期具有部分已知数组的 phpunit 模拟：正确的约束是什么？

> ID：11892795
> 
> 赞同：2
> 
> 时间：2012-08-09T22:18:11.790
> 
> 标签：php, phpunit

我想在 phpunit 中创建一个模拟来验证是否使用正确的参数调用了一个函数。该参数是一个关联数组，包含三个元素，两个已知，一个未知：

```
array( 'objecttype' => 'thing', 'objectid'=> 2, 'tstamp' => [some tstamp here] ) 
```

因为我不知道确切的完整数组，所以我不能使用 equalTo 约束。我可以使用logicalAnd、contains 和arrayHasKey 的组合来到达那里，但这看起来很老套，而且，如果出于某种疯狂的原因，我的键和值混淆了，它不会捕获错误。有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T22:44:50.903

这是一个快速而简单的自定义约束，用于检查传递的数组是否至少包含给定的条目（键/值对）。将其添加到您的自定义测试框架或 PHPUnit 分支。请注意，它使用`==`相等性以便`'5'`匹配的键/映射`5`。

```
class ArrayHasEntries extends PHPUnit_Framework_Constraint
{
    /**
     * @var array
     */
    protected $array;

    /**
     * @param array $array
     */
    public function __construct(array $array)
    {
        $this->array = $array;
    }

    /**
     * Evaluates the constraint for parameter $other. Returns TRUE if the
     * constraint is met, FALSE otherwise.
     *
     * @param mixed $other Value or object to evaluate.
     * @return bool
     */
    protected function matches($other)
    {
        foreach ($this->array as $key => $value) {
            if (!array_key_exists($key, $other) || $other[$key] != $value) {
                return false;
            }
        }
        return true;
    }

    /**
     * Returns a string representation of the constraint.
     *
     * @return string
     */
    public function toString()
    {
        return 'has the entries ' . PHPUnit_Util_Type::export($this->array);
    }

    /**
     * Returns the description of the failure
     *
     * The beginning of failure messages is "Failed asserting that" in most
     * cases. This method should return the second part of that sentence.
     *
     * @param  mixed $other Evaluated value or object.
     * @return string
     */
    protected function failureDescription($other)
    {
        return 'an array ' . $this->toString();
    }
} 
```

# ruby-on-rails - ActionPack 仍然依赖于“旧”版本的 Sprockets

> ID：11892798
> 
> 赞同：2
> 
> 时间：2012-08-09T22:18:30.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3, dependencies, sprockets, actionpack

想知道是否有人可以帮助我更好地理解 Rails 中设置它们的依赖关系，也许，为什么？

我注意到由于某种原因，我的 Rails (ActionPack) 安装依赖于**Sprockets** gem 的看似旧版本（2.1.3 而不是“当前”的 2.4.5）。

这是正常的还是我在我不知道的地方携带了一些遗留依赖？如果正常，有人知道为什么 Rails 团队可能会忽略 Sprockets 的更新吗？只是好奇...

```
$ gem list sprockets

*** LOCAL GEMS ***

sprockets (2.4.5, 2.1.3)

$ gem cleanup
You have requested to uninstall the gem:
    sprockets-2.1.3
actionpack-3.2.8 depends on [sprockets (~> 2.1.3)]
If you remove this gems, one or more dependencies will not be met.
Continue with Uninstall? [Yn]  n
Unable to uninstall sprockets-2.1.3:
    Gem::DependencyRemovalException: Uninstallation aborted due to dependent gem(s) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:30:08.243

我不能说太多关于它背后的原因，但是这个提交应该已经在当前的 3-2-stable 分支中修复了它：

[https://github.com/rails/rails/commit/83e0c952d6823964ead68437c280583ac8a00ce4](https://github.com/rails/rails/commit/83e0c952d6823964ead68437c280583ac8a00ce4)

这也应该回答关于这些依赖项在哪里设置的问题。

让我们期待 Rails 3.2.x 尽快发布，这样我们就可以使用当前的 sprockets。

# ios - Xcode 4.4，使用 ARC 为 iOS 4.2 构建应用程序

> ID：11892800
> 
> 赞同：6
> 
> 时间：2012-08-09T22:18:42.710
> 
> 标签：ios, xcode, automatic-ref-counting, llvm

Xcode 4.4、Mountain Lion、llvm 4.0 编译器。我构建了我的应用程序，它适用于 ios5、ios6 设备，但在 iphone 3g 和 ios 4.2 上我有这样的错误：

```
dyld: lazy symbol binding failed: Symbol not found: _objc_storeStrong
Referenced from: /var/mobile/Applications/68B78A19-71E6-4BDA-B997-B7DED4D02429/iGuides.app/iGuides
Expected in: /usr/lib/libobjc.A.dylib

dyld: Symbol not found: _objc_storeStrong
Referenced from: /var/mobile/Applications/68B78A19-71E6-4BDA-B997-B7DED4D02429/iGuides.app/iGuides
Expected in: /usr/lib/libobjc.A.dylib 
```

在 Xcode 4.3 上一切正常，因为我只使用了 strong 和 unsafe_unretained 修饰符。

我明白了，没有弧库链接到我的应用程序。

我试图手动链接 libarclite_iphoneos.a，没有反应。我添加了 -fobj-arc 来链接标志，没有反应。

我想，iPhone 3g 支持将在 XCode 4.5 中被删除，而不是 4.4。是这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T20:42:47.597

我刚刚发现问题。错误是因为[iRate](https://github.com/nicklockwood/iRate)库，当我删除对这个库的引用时，一切都开始工作了。

更新：更新到最新版本后一切正常。谢谢@Nick Lockwood 的解释：在iOS arclite lib 加载**后**[class load] 方法执行。所以你需要延迟初始化。在 iRate 中，他在 load 方法中插入了 performOnTheMainThread。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:07:27.807

尝试添加*Other Linker* Flags `-fobjc-arc`。

# php - 将表单字段保存到 sql 数据库 - 只保存数字？

> ID：11892801
> 
> 赞同：0
> 
> 时间：2012-08-09T22:18:51.323
> 
> 标签：php, sql

这应该很简单，但它让我发疯。我正在尝试从某些表单字段将一些值插入数据库，但只保存小数。我很困惑。

例如，这将从表单字段中回显正确的值，所以我知道这些值正在传递......

```
echo "Trying to insert $posttime, $name, $agency, $message"; 
// The above correctly outputs this: Trying to insert 1344548784, Mike, Test, Test 
```

但是下面的 SQL 查询只有在我在文本字段中使用数字时才有效，其他都不起作用。（我正在使用 phpmyadmin 来确认）

```
mysql_query("INSERT INTO mytable (id, from_name, from_agency, message) VALUES ($posttime, $name, $agency, $message)"); 
```

作为测试，当我对值进行硬编码时，此查询确实有效。我很困惑……</p>

```
mysql_query("INSERT INTO mytable (id, from_name, from_agency, message) VALUES (1344548784, 'Mike', 'Test', 'Test')"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:20:41.100

插入数据时用引号封装您的文本字段。即使它们是 PHP 中的变量，您也需要告诉数据库它们是字符串 - 这是用引号完成的。：

```
mysql_query("INSERT INTO mytable (id, from_name, from_agency, message) VALUES ($posttime, '$name', '$agency', '$message')"); 
```

此外，这些`mysql_*`功能确实有点过时，您应该真正考虑迁移到 PDO 或 mysqli。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:21:22.067

首先：停止使用已弃用的 mysql 扩展！切换到 PDO 或 mysqli。

使用其中一种技术，您可以使用准备好的语句，并且可以将您的值作为参数传递。它们还允许使用面向对象的编程风格。

例子：

```
// Assuming $link is a valid connection resource

// Prepare statement
$statement = mysqli_prepare($link, "INSERT INTO mytable (id, from_name, from_agency, message) VALUES (?, ?, ?, ?)");

// Bind parameters
mysqli_stmt_bind_param($statement, 'i', $posttime);
mysqli_stmt_bind_param($statement, 's', $name);
mysqli_stmt_bind_param($statement, 's', $agency);
mysqli_stmt_bind_param($statement, 's', $message);

// Execute
$result = mysqli_stmt_execute($statement); 
```

这样您就不会受到 SQL 注入的攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T22:22:47.747

您缺少的报价：

```
mysql_query("INSERT INTO mytable (id, from_name, from_agency, message) VALUES ('$posttime', '$name', '$agency', '$message')") 
```

# objective-c - 从 NSString 获取变量？

> ID：11892802
> 
> 赞同：1
> 
> 时间：2012-08-09T22:18:57.573
> 
> 标签：objective-c, ios, variables

在我的应用程序中，我想减少 if 检查的数量，所以我认为这种方式是最好的，但我不知道该怎么做。

所以我有一堆 #define ，它们是：state1、state2、state3 等......

无论如何，我有 UIButtons 并且带有标签 1 的按钮的图像由 state1 等确定...

无论如何，我现在已经到了做这样的事情的地步：

```
NSString *variableString = [NSString stringWithFormat:@"state%i", theButton.tag]; 
```

那么现在如何从刚刚得到的 NSString 中获取 state1 或 state2 或 state3 之类的变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T22:22:57.060

使用带有@"state1"、@"state2"...等字符串的 NSDictionary 作为键，并将图像的匹配引用作为键的对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T23:05:57.977

您可以使用：

```
[self valueForKey:variableString]; 
```

**但是**，如果字符串中的值`variableString`与变量或属性不匹配，则此调用将引发异常。您可以使用块捕获异常`@try { ... } @catch ...`。如果您不捕获并处理异常，您的应用程序将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T22:33:35.187

```
const int value = [[someString substringFromIndex:nCharsToTrim] intValue]; 
```

或者，您可以通过访问字符值来避免不必要的字符串创建`-[NSString characterAtIndex:]`

（在这种情况下，您可能应该避免使用 0 作为有效的状态值）

# php - PHP文件上传一直超时

> ID：11892804
> 
> 赞同：0
> 
> 时间：2012-08-09T22:19:13.130
> 
> 标签：php, file, upload, timeout

我有一个问题，我试图使用 PHP 将 MP3 文件上传到我的网站。

几秒钟后连接/服务器超时。

这是 PHP 上传表单的 HTML 代码：

```
<html>

<head>
<title>Upload Music</title>
<link rel="stylesheet" type="text/css" href="css/styles.css" />
</head>

<br />
<div class="center">
<form enctype="multipart/form-data" action="uploader.php" method="POST">
<input type="hidden" name="MAX_FILE_SIZE" value="200000" />
Choose a file to upload: <input name="uploadedfile" type="file" /><br />
<input type="submit" value="Upload File" />
</form>
</div>
</html> 
```

这是 uploader.php 文件：

```
<head>
<title>Success!</title>
<link rel="stylesheet" type="text/css" href="css/styles.css" />
</head>

<div class="center">
<br />
<?php
set_time_limit(1000000);
$target_path = "uploads/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file " . basename( $_FILES['uploadedfile']['name']) . 
    " has been uploaded";
} else {
    echo "There was an error uploading the file, please try again!";
}
file_put_contents("uploads.txt", basename( $_FILES['uploadedfile']['name']), 
FILE_APPEND);
?>
</div>

</html> 
```

这是我的 php.ini 文件：
`upload_max_filesize = 2000M`
`post_max_size = 2000M`
`memory_limit = 2000M`
`max_input_time = 1000000000`
`max_execution_time = 1000000000`

我检查了 phpinfo() ，看起来我的 php.ini 文件被正确读取。有没有什么办法解决这一问题？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T03:09:21.127

好的，我想通了。我的虚拟主机不允许我上传大于 5MB 的文件……这有点糟糕，但我想我会使用外部主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:22:17.077

忽略 uploader.php 文件中的 HTML 注释。他们不应该在那里。

# codeigniter - 在服务器上找不到模型

> ID：11892806
> 
> 赞同：0
> 
> 时间：2012-08-09T22:19:20.773
> 
> 标签：codeigniter, codeigniter-2

我遇到了一个奇怪的问题：我在本地机器和开发服务器（ubuntu）上完全按照原样使用了这段代码。

当我进行 ajax 调用时，它会转到给定的 URL 并传递一些帖子。但是，在服务器上它给了我一个错误 500。经过一番调查，我发现模型没有加载。奇怪的是，在我的本地机器上，代码运行良好。

这会是配置问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:24:36.840

听起来您可能在对文件或模型的引用中使用了不一致的大小写。如果您引用 models/My_Model 但文件名为 models/my_model 它可能会在本地的 mac 或 windows 机器上工作，其中文件名默认不区分大小写，但在 Ubuntu 盒子上，文件路径可能区分大小写，那些会然后是不同的文件。其他可能性是文件权限设置不正确，尽管这是不太可能的选项。

如果这没有帮助，如何发布一些代码和错误日志的相关位。

# java - Java - 计算一系列数字的总和

> ID：11892812
> 
> 赞同：0
> 
> 时间：2012-08-09T22:19:57.727
> 
> 标签：java

我正在尝试计算系列 1、3、9、27、81 的前 16 个元素的总和。代码通过首先创建一个合适的 Geometric 实例来实现，该实例将是 TYPE Seq。

```
public class Geometric implements Seq {

private double b;
public Seq s;
public double sum;

public Geometric(double a) {

    this.b = a;
}

public double valAtIndex(int i) {
    // TODO Auto-generated method stub
    return Math.pow(b, i);
}

public double total() {

    s = new Geometric(3.0);
    for (int a = 0; a < 16; a++) {

        int c = -1;
        sum = sum + s.valAtIndex(c = c + 1);
        c++;

    }
    return sum;
}

public double getSum() {

    return sum;
}

public static void main(String[] args) {

    System.out.println(sum);
} 
```

}

不知道我是否在做这个很长的路要走？它还没有工作，eclipse 说我需要将 sum 的修饰符更改为 static？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T22:25:09.943

它希望`sum`是静态的，因为您试图在静态方法中达到 sum `main`，. 您无法访问静态方法中的非静态字段。您应该创建一个`Geometric`inside实例`main`，然后您应该调用该变量`sum`。

```
public static void main(String[] args) {
    Geometric geo = new Geometric(some_number);
    System.out.println(geo.sum);
} 
```

另外，你的做事方式也不是面向对象编程概念的好方法。

您正在从一个方法返回系列的总数，但您还将它存储在一个名为 的字段中`sum`，并且`sum`在计算它之前您需要。相反，您应该从该方法中获取总数。

```
public static void main(String[] args) {
    Geometric geo = new Geometric(3.0);
    System.out.println(geo.total());
} 
```

由于该方法`total`是为此类的实例指定的，因此不应创建新实例来计算总数，而应计算当前实例的总数。

```
public double total() {
    double temp = 1;
    double sum = 0;
    for (int a = 0; a < 16; a++) {
        sum += temp;
        temp *= this.b;
    }
    return sum;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:25:45.313

好像你把它弄得比它需要的复杂一点。以下是我在不使用另一个类的情况下的做法（代码可以放在任何需要计算总和的类中）：

```
int currentNumber = 1;
int sum = 0;
for (int i = 0; i < 16; i++)
{
    sum += currentNumber;
    currentNumber *= 3;
} 
```

几何序列中各项之和的值将存储在变量 中`sum`。或者，对几何序列中的项之和使用[封闭形式：](http://en.wikipedia.org/wiki/Geometric_progression#Geometric_series)

```
int firstNumber = 1;
int multFactor = 3;
int numTerms = 16;
int sum = firstNumber * ((1 - multFactor ^ numTerms) / (1 - multFactor)); 
```

或者在你的情况下：

```
int sum = 1 * ((1 - 3^16) / (1 - 3));  // returns 21523360, the number you were trying to calculate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T22:25:19.507

> eclipse是说我需要将sum的修饰符更改为static？

因为您正在`sum`以静态方法打印出来`main(String[])`。您不能从静态方法访问实例字段。您需要创建一个 Geometric 实例并`sum`从该实例中获取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T22:27:03.487

total 和 sum 看起来应该是静态的。我不知道 getSum 是干什么用的。但真正的问题是，为什么不直接将数字相加？你不需要所有的课程。

# android - Android RelativeLayout：如何将一个视图放在另一个视图之上，而不必触摸？

> ID：11892814
> 
> 赞同：3
> 
> 时间：2012-08-09T22:20:10.490
> 
> 标签：android, view, alignment, android-relativelayout

我正在显示一个可以有任意行数的 ListView。我希望 ListView 包装内容。无论列表的大小如何，我还希望一些文本位于屏幕底部。像这样：

![我想要发生的事情](../Images/40fae1eef2097c3ad70978287b8f5008.png)

我的尝试如下，但是当内容很大时，它会导致它看起来像左下角的图像。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@color/blue">
    <TextView
        android:id="@+id/fine_print"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"  
        android:layout_below:"@+id/table"
        android:gravity="center_horizontal"
      />
    <ListView 
        android:id="@+id/table" 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:background="@drawable/white_box">
    </ListView>
</RelativeLayout> 
```

并添加

```
android:layout_above="@id/fine_print" 
```

@id/table 使它看起来像右下角的图像。

![最终会发生什么](../Images/29be77fe0acefbf9f35728d584ca4a16.png)

我怎样才能让它做我想做的事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-21T10:46:54.423

回答题目：`view.bringToFront();`

您也可以在 xml 中尝试：`android:translationZ="10dp"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T14:08:42.797

这似乎有点奇怪，但这就是我如何让它工作的。由于底部的文本大小为“8dip”，并且根据屏幕方向占用 1 或 2 行，因此我在列表下方放置了“16dip”填充。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@color/blue">
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/details_wrapper"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:paddingBottom="16dip">
        <ListView 
            android:id="@+id/table" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:background="@drawable/white_box">
        </ListView>
    </LinearLayout>

<TextView
    android:id="@+id/fine_print"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"  
    android:gravity="center_horizontal"
  />
</RelativeLayout> 
```

不过，仍然愿意接受有关使这个更清洁的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T00:10:54.240

`TextView`我认为您可以通过简单地添加类似的内容来解决您的问题

`android:layout_below:"@+id/table"`

让我知道 ot 是否有效。

# xcode - Xcode 中的垂直高亮（列选择）

> ID：11892816
> 
> 赞同：19
> 
> 时间：2012-08-09T22:20:15.607
> 
> 标签：xcode, text-editor, highlighting

如何在 Xcode 中突出显示矩形选择？

![](../Images/efad0870c3def95330ccc35ec54eabfe.png)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-09T22:20:15.607

**按住 Option 键的同时单击并拖动**。

进行垂直突出显示/块选择时适用正常的复制和粘贴规则（command-c 和 command-v）。

# xcode - 如何更改 IKImageBrowserView 的选择突出显示颜色

> ID：11892824
> 
> 赞同：3
> 
> 时间：2012-08-09T22:20:46.887
> 
> 标签：xcode, cocoa, ikimagebrowserview

当您在 IKImageBrowserView 中选择一个项目时，它的边缘会以灰色突出显示。我如何改变这个的颜色？

![在此处输入图像描述](../Images/1c2ce0010a62b7408691211e0434b582.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:33:28.663

```
[imageBrowserView setValue:[NSColor blueColor] forKey:IKImageBrowserCellsOutlineColorKey]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:34:10.147

所以我能够通过组合建议的复杂路线来实现我正在寻找的东西（谢谢！）。我在这里的示例项目中实现了自定义 IKImageBrowserView 和 IKImageBrowserCell 类：http: [//developer.apple.com/library/mac/#/legacy/mac/library/samplecode/ImageKitDemo/Introduction/Intro.html](http://developer.apple.com/library/mac/#/legacy/mac/library/samplecode/ImageKitDemo/Introduction/Intro.html)

太糟糕了，没有更简单的方法可以做到这一点，但这暂时可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T05:38:45.137

[查看IKImageBrowserView 文档](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/IKImageBrowserView/IKImageBrowserView_Reference.html#//apple_ref/doc/c_ref/IKImageBrowserSelectionColorKey)中的“查看选项键” 。我认为 IKImageBrowserSelectionColorKey 应该可以解决问题。

所以你的代码在你的视图控制器的 awakeFromNib 中会是这样的：

```
[imageBrowserView setValue:[NSColor blueColor] forKey:IKImageBrowserSelectionColorKey]; 
```

# iphone - 创建自定义 URL 方案操作

> ID：11892828
> 
> 赞同：2
> 
> 时间：2012-08-09T22:21:14.923
> 
> 标签：iphone, objective-c, ios, url, url-scheme

我知道如何创建自定义`URL schemes`，但如何向它们添加操作？我如何将信息传递到我的应用程序中。

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T23:03:24.900

你必须弄清楚行动..但这里有一个例子：

```
yourAppURL://doSomething 
```

或者

```
yourAppURL://doAnotherThing 
```

然后在你的`AppDelegate`

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    NSString *text = [[url host] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    if ([text isEqualToString:@"doSomething"]) {
        // then do something
    }
    if ([text isEqualToString:@"doAnotherThing"]) {
        // do another thing
    }
} 
```

您可以通过在 URL 中发送各种文本来做各种事情。例如，Facebook 使用它打开应用程序以直接转到个人资料`facebook://profile=username`

# php - 使用 PHP 从 MySQL 获取信息时遇到问题

> ID：11892835
> 
> 赞同：0
> 
> 时间：2012-08-09T22:21:36.173
> 
> 标签：php, mysql, database

我已经尝试了几个小时，但没有任何运气。我在网上找到的每个教程都提供了一种使用 PHP 连接到 MySQL 数据库的不同方法，因此很难找到一致性。

当我运行以下代码时，我尝试检索的值得到“0”。我怎样才能得到这些值？到目前为止，我有以下代码：

```
<?php 
        //Connect to MySQL server
        $conn = mysql_connect('XXIP ADDRESSXX', 'XXUSERNAMEXX', 'XXPASSWORDXX') or die(mysql_error()); //Connect to mysql

        //Continue if connection successful
        if($conn != null) {
            $db_selected = mysql_select_db('itemdata', $conn) or die(mysql_error()); //Connect to database using the connection

            //Continue if selected database successfully
            if($db_selected == true) {
                //The statement used to query the database  
                $query = "SELECT * FROM item_prices";

                //Store the results of the query
                $result = mysql_query($query, $conn) or die(mysql_error()); //Retrieve all data from the table  

                //Convert to assoc array
                $values = mysql_fetch_assoc($result);

                $cost = $values['cost'];
                $retail = $values['retail'];
                $in_stock = $values['available'];

                                    echo("<p>$cost</p>");
                                    echo("<p>$retail</p>");
                                    echo("<p>$in_stock</p>");
            }
            else 
                echo "Unable to connect to database";
        }
        else
            echo "Unable to connect to MySQL Server";

        //Close database
        mysql_close($conn);
    ?> 
```

现在获取更多信息：通过调试，我验证了代码到达了最里面的“if”语句，因此它正确连接并选择了数据库。由于我尝试检索的 3 个变量只收到“0”，因此没有抛出任何错误。（我尝试打印后验证它不是变量范围的问题）。

任何帮助都会很棒，我从未编写过与 MySQL 的连接，而且我无法找到最佳方法（我找到了有关 mysqli、mysql、面向对象等的教程……但没有一个是完整的（我查看了用户手册也）..

谢谢。

**编辑：数据库的结构如下（到目前为止）**

数据库名称：itemdata

表名：item_prices

该表有 4 列：

*   itemID（主键） - 这是搜索的内容（类型 int）
*   成本（浮动类型）
*   零售（浮动类型）
*   库存（布尔类型）

我正在尝试使用 itemID 检索表中的所有值

**最终编辑** 我从 PHPMyAdmin 复制了表格（这都是为了测试目的，所以数据是 bs）

```
itemID  cost    retail  instock
0   0   0   0
1   100 150 1
2   200 250 1
3   300 350 0
4   400 450 0
5   500 550 1
10  100 150 1
11  200 250 1
12  300 350 0
13  400 450 0
14  500 550 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:41:45.160

1）您说您正在搜索 itemId 但查询没有“where”条件。

2）由于您的表有不止一行，因此您应该以这种方式使用 mysql_fetch_assoc 来获取所有行：

```
// While a row of data exists, put that row in $row as an associative array
// Note: If you're expecting just one row, no need to use a loop
// Note: If you put extract($row); inside the following loop, you'll
//       then create $userid, $fullname, and $userstatus
while ($row = mysql_fetch_assoc($result)) {
    echo $row["userid"]; 
    echo $row["fullname"];
    echo $row["userstatus"];
} 
```

如果您只期望一个结果，您可以执行以下操作：

```
$row = mysql_fetch_assoc($result);
extract($row); 
```

并且您将获得所有尚未分配的变量，这些变量的名称与您在数据库中获得的名称相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:41:48.623

由于您的查询可能返回不止一行，因此您需要将 fetch 函数放在 while 循环中。

```
while ($row = mysql_fetch_assoc($result)) 
{
    echo $row["cost"];
    echo $row["retail"];
    echo $row["instock"];
} 
```

同样根据您的表格描述，您没有名为“可用”的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T22:50:51.170

我看了看你的代码，我很确定（比如 95%）这是工作代码。如果它仍然不起作用，则说明您做错了其他事情。

顺便说一句，您不需要在使用时回显错误消息`die()`，脚本将从那时起停止工作。

这是我的美化代码：

```
<?php 
//Connect to MySQL server
$conn = mysql_connect('XXIP ADDRESSXX', 'XXUSERNAMEXX', 'XXPASSWORDXX')
    or die('Unable to connect to MySQL Server');

// Select db
mysql_select_db('itemdata', $conn)
    or die('Unable to connect to database');

// Run the query and fetch the results
$query = "SELECT cost FROM item_prices WHERE itemID = 4";
$values = mysql_fetch_assoc(mysql_query($query));

// Echo everything
echo '<p>'.$values['cost'].'</p>';
echo '<p>'.$values['retail'].'</p>';
echo '<p>'.$values['available'].'</p>';

// Close the connection
mysql_close($conn);
?> 
```

# gwt - 寻找具有当前 MVP 实现的 GWT 的详细示例项目

> ID：11892839
> 
> 赞同：1
> 
> 时间：2012-08-09T22:21:49.023
> 
> 标签：gwt

我喜欢用 gwt 开始一个新项目，2 年前我用 gwt 工作，但从那以后发生了很多变化。现在，如果有一个包含 gwt 应用程序当前最佳实践的示例项目，那就太好了。我四处寻找，但只找到了较旧的，我对 MVP、地点、历史、uibinder 等感兴趣。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:49:25.270

我很惊讶它还没有被提及：GWT 自己的示例[MobileWebApp](http://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples/mobilewebapp)。它具有您正在寻找的所有 GWT 应用程序元素，以及带有[GIN](http://code.google.com/p/google-gin/)的依赖注入。此外，它还提供了一种使用延迟绑定为不同屏幕尺寸选择视图的简洁方式：台式机、平板电脑或智能手机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T05:26:21.933

你有几个选择：

1.  您可以浏览官方示例，例如使用 MVP的[费用示例应用程序。](http://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples/expenses%253Fstate%253Dclosed)
2.  您可以使用[Roo](http://www.springsource.org/spring-roo/)为您生成使用 MVP 架构的 GWT 应用程序。但是，请注意 Roo 生成的复杂代码具有陡峭的学习曲线。
3.  您可以在社区项目中搜索使用 MVP 的项目
4.  代替不支持嵌套演示者的官方 GWT MVP（对于大型项目至关重要，IMO），您可以使用其他 MVP 解决方案，例如[GWTP](http://code.google.com/p/gwt-platform/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T05:40:04.603

看看这个用 GWT 最佳实践（MVP、GIN、单元测试等）编写的开源项目[http://james.apache.org/hupa/](http://james.apache.org/hupa/)

# android - 自定义气球 - 切换按钮

> ID：11892847
> 
> 赞同：0
> 
> 时间：2012-08-09T22:22:31.833
> 
> 标签：android, user-interface, popup-balloons

我使用这个不错的库来显示气球：MapViewBalloons

我想在气球中添加一个切换按钮，这样我就可以将一个点标记为收藏。问题是它会切换整个叠加层的状态，而不仅仅是当前气球的状态。

我该如何解决？这是我的代码，提前谢谢！

```
@Override
protected void setupView(Context context, final ViewGroup parent) {

    // inflate our custom layout into parent
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = inflater.inflate(R.layout.baloon_overlay, parent);

    ToggleButton favorite = (ToggleButton) v
            .findViewById(R.id.toggleButton1);

    favorite.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            if (isFav==false) {
                isFav=true;
                System.out.println("true");}
            else {
                isFav=false;
                System.out.println("false");
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:57:14.990

首先，“它切换整个叠加层的状态，而不仅仅是当前气球的状态”是什么意思？你指的是什么状态。

无论您对切换状态的定义如何，我都建议这样做：尝试为每个叠加层使用单独的 ItemizedOverlay，而不是将多个叠加层添加到同一个气球。我遇到了一个类似的问题，即我的整个叠加层都受到了影响，而不是当前的气球，这样做解决了这个问题。

让我展示一下我试图使用来自 mapviewballoons 的代码（custommap 活动）的建议：

```
 itemizedOverlay = new CustomItemizedOverlay<CustomOverlayItem>(drawable, mapView);

    GeoPoint point = new GeoPoint((int)(51.5174723*1E6),(int)(-0.0899537*1E6));
    CustomOverlayItem overlayItem = new CustomOverlayItem(point, "Tomorrow Never Dies (1997)", 
            "(M gives Bond his mission in Daimler car)", 
            "http://ia.media-imdb.com/images/M/MV5BMTM1MTk2ODQxNV5BMl5BanBnXkFtZTcwOTY5MDg0NA@@._V1._SX40_CR0,0,40,54_.jpg");
    itemizedOverlay.addOverlay(overlayItem);

    //This bottom line is what I'm trying to suggest
    itemizedOverlay2 = new CustomItemizedOverlay<CustomOverlayItem>(drawable, mapView);
    GeoPoint point2 = new GeoPoint((int)(51.515259*1E6),(int)(-0.086623*1E6));
    CustomOverlayItem overlayItem2 = new CustomOverlayItem(point2, "GoldenEye (1995)", 
            "(Interiors Russian defence ministry council chambers in St Petersburg)", 
            "http://ia.media-imdb.com/images/M/MV5BMzk2OTg4MTk1NF5BMl5BanBnXkFtZTcwNjExNTgzNA@@._V1._SX40_CR0,0,40,54_.jpg");       
    itemizedOverlay2.addOverlay(overlayItem2);

    mapOverlays.add(itemizedOverlay); 
```

# android - Android 应用内购买插件？

> ID：11892848
> 
> 赞同：7
> 
> 时间：2012-08-09T22:22:34.343
> 
> 标签：android, plugins, in-app-purchase, google-play

我正在开发一个需要插件的 Android 应用程序。这些插件本质上是供我的应用程序使用的资产包。我最初可能会创建大多数这些资产包插件，但我希望其他开发人员能够为我的应用程序创建（和销售）这些资产包。如果需要，可以将这些资产插件视为 Minecraft 的纹理包。这些资产包每个大约 50 MB，因此将它们与应用程序打包是没有意义的。

**我想这样做的方式：**

1.  开发人员创建插件资产 APK 命名为特定的东西 (org.name.app_name.plugin.{MY_ASSET_PACK})
2.  开发者申请自己的 Google Play 开发者账号，并在“库和演示”部分列出自己名下的资产包（免费或付费）。
3.  *我的应用程序在 Google Play 中查询与查询字符串*(org.name.app_name.plugin.*)匹配的所有 apk 包（免费或付费），*并将它们列在应用程序用户的“过滤市场视图”中，允许他们轻松找到应用程序的插件。*
4.  用户可以在我的“filtered-market-view”中点击这些条目，直接跳转到 Google Play 市场并通过 Play 进行购买，开发者可以通过此次交易获得补偿。购买的资产插件 apk 会下载到用户的设备上，并且不会显示在启动器中。（请参阅[如何发布应用程序插件](https://stackoverflow.com/questions/4803342/how-to-release-application-plugin-using-android-market)）
5.  我的应用程序对手机上与查询字符串 (org.name.app_name.plugin.*) 匹配的包进行索引，并将它们放在“插件选择器视图”中供用户选择。
6.  我的应用程序从这个插件加载和使用资产（请参阅[如何发布应用程序插件](https://stackoverflow.com/questions/4803342/how-to-release-application-plugin-using-android-market)）

**问题**

问题出现在第 4 步。我找不到任何方法从我的应用程序中查询商店（即使没有通配符）。我确实找到了这个[“android-market-api”](http://code.google.com/p/android-market-api/)项目，它允许我从我的应用程序中查询市场，但它似乎需要我必须从用户那里查询的谷歌服务用户名和密码。这是一个非首发。

**问题**

*   有没有一种简单的方法可以解决这个问题并直接在我的应用程序中的列表中获取市场查询？
*   这是处理应用程序插件的错误方法吗？
*   有没有办法使用现有的应用内购买 API 来处理这个问题，而无需为这些包维护我自己的服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:05:01.137

> *   有没有一种简单的方法可以解决这个问题并直接在我的应用程序中的列表中获取市场查询？

不，这不受 Google 支持，Android API 项目只是市场使用的 Protbuff 对象的逆向工程。它可以（并且将会！）随时中断。此外，这很可能是非法的。更好的方法是向 Playstore 发出搜索查询并让它处理它。这不是什么大问题，因为无论如何您都会直接在 Playstore 中获得过滤列表。不要重新发明轮子。

> *   这是处理应用程序插件的错误方法吗？

不，它很好而且安全。

> *   有没有办法使用现有的应用内购买 API 来处理这个问题，而无需为这些包维护我自己的服务器？

不可以。您无法看到用户的所有购买，只能看到来自您自己的应用程序的购买。

# php - 无法通过 AJAX 将数据发送到 PHP 文件

> ID：11892861
> 
> 赞同：0
> 
> 时间：2012-08-09T22:23:34.810
> 
> 标签：php, javascript, jquery, html, ajax

我有一个表，其中有一列中的所有行都有锚链接。

相关代码是

```
<tbody>
  <?php foreach ($rowarr as $k => $v) { ?>
    <tr>
      <td><?php echo $k ?></td>
      <td>
        <div class="divBox">                          
          <a id="vendorlink" data-toggle="modal" data-vendor="<?= $v ?>" href="#myModal"><?php echo $v; ?></a>
        </div>
      </td>
    </tr>
  <?php } ?>
</tbody> 
```

我正在尝试将供应商的名称从表中单击的链接发送到使用 AJAX 的模式，并尝试在模式中打印名称以进行测试，但即使这样也没有发生。

```
<script type="text/javascript">
  $('#myModal').modal('hide');
  $("#vendorlink").click(function(){
    var vendor = $(this).data('vendor');
    $('#myModal').on('shown', function(){                
        $.ajax({
          type: "GET",
          url: "ip.php",
          data:     "id=" + vendor,
          success: function(html){
            $("#modal-body").html(html);
            $('.countstable1').dataTable( {
              "sDom": "T<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
              "sPaginationType": "bootstrap",
              "oLanguage": {
                "sLengthMenu": "_MENU_ records per page"
              },
              "aaSorting":[[0, "desc"]],
              "iDisplayLength": 10,
              "oTableTools": {
                    "sSwfPath": "swf/copy_csv_xls_pdf.swf",
                    "aButtons": ["csv", "pdf"]
                  }
            });
          }
      });              
    });
  });
</script> 
```

而 ip.php 文件暂时只有这个

```
<?php

$vendor = $_GET['id'];

echo $vendor;
?> 
```

但是在模态中，我只看到默认的引导标记代码，没有任何回显

这是默认的引导标记代码 - [http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

有什么问题？为什么供应商不传递给 PHP 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:31:12.127

您为 html 文件中的所有链接设置了相同的 id，这将无法按您的意愿工作，您最好为所有链接添加一个事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:43:26.660

`data`属性应该这样定义：

```
data: {id: vendor}, 
```

**编辑。**哦，替换：

```
<a id="vendorlink" data-toggle="modal" data-vendor="<?= $v ?>" href="#myModal"><?php echo $v; ?></a> 
```

和：

```
<a id="vendorlink_<?=$v?>" class="vendorlink" data-toggle="modal" href="#myModal"><?=$v?></a> 
```

和`$("#vendorlink")`with `$(".vendorlink")`（所以你会影响*所有的条目*）和`$(this).data('vendor');`with `$(this).attr('id').replace('vendorlink_', '');`。

# facebook - 如何将查询参数传递给 Facebook 页面选项卡应用程序

> ID：11892862
> 
> 赞同：0
> 
> 时间：2012-08-09T22:23:36.887
> 
> 标签：facebook, url, append

是否可以将 ?variable=value 添加到 facebook 应用程序 url 的末尾？

例如：facebook.com/pagename/app_abcdefghij/phppage.php?variable=value

然后使用 _Get 查询 mysql 数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T22:30:08.227

要将数据传递到页面选项卡应用程序，请使用 app_data 参数。您为此提供的值将出现在`signed_request`POSTed 到您的应用程序中。其他参数不传。

**在与 Facebook API 集成**标题下的[页面选项卡文档](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)中有更多信息

# mysql - mysql复制滞后巨大

> ID：11892872
> 
> 赞同：2
> 
> 时间：2012-08-09T22:25:13.613
> 
> 标签：mysql

我们有一个巨大的数据仓库（几乎 4 TB）数据库，我们正在将其复制到从属数据库，它比我们的主数据库/主数据库滞后 45 小时。此时，使复制更快的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:54:23.337

mysql 复制是单线程的——这通常是滞后的原因。你有几个选择：

*   mysql 5.6 引入了并行复制——如果你有许多独立的数据库——那应该会加快速度
*   或者查看[Tungsten Replicator](http://code.google.com/p/tungsten-replicator/) - 它是 mysql [包括多线程] 更灵活复制的第 3 方实现。[这](http://www.slideshare.net/datacharmer/advanced-mysql-replication-techniques)对您来说可能也很有趣。

# ruby-on-rails - Rails：防止模型中的额外字段（批量分配）？

> ID：11892873
> 
> 赞同：1
> 
> 时间：2012-08-09T22:25:14.610
> 
> 标签：ruby-on-rails, ruby, forms, security

我有一个`Secret`具有 3 个字段的模型`f1`：`f2`和`f3`。
我有**一个表单**，用户只能**输入** `f1`和`f2`. **不是`f3`**。
将值传递给新对象的最佳方法是什么？

如果我写`@secret = Secret.new(params[:secret])`，邪恶的用户可能会传递`f3`给我的模型，并将其保存在模型中。

防止用户传递额外值的最佳方法是什么？

我阅读了[http://guides.rubyonrails.org/security.html#mass-assignment](http://guides.rubyonrails.org/security.html#mass-assignment)并且有 3 个变体：
1）黑名单（`attr_protected :f3`）
2）白名单（`attr_accessible :f1, :f2`） 3）全局白名单（通过配置行
强制）`attr_accessible``config.active_record.whitelist_attributes = true`

什么方法最好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:47:06.933

最偏执（因此也是最好）的设置将`attr_accessible :f1, :f2`与`config.active_record.whitelist_attributes = true`.

如果您稍后添加任何新属性（通过添加迁移），则必须主动启用新属性以进行批量分配。如果您只是将禁止的属性列入黑名单，您可能会忘记将新属性添加到黑名单中。如果您使用白名单，则不会发生这种情况。

# java - Java - 更改 FileReader 的文件路径

> ID：11892874
> 
> 赞同：0
> 
> 时间：2012-08-09T22:25:17.327
> 
> 标签：java, java-io

我正在尝试使用 FileReader 读取文件，但我尝试访问的文件与正在运行的代码位于不同的目录中。有没有办法让 FileReader 读取其他目录中的文件？

如果没有，是否有其他方法可以从不同目录读取文件？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T22:26:29.027

你当然可以

```
BufferedReader br = new BufferedReader(new FileReader("C:\\test.txt")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:27:33.313

BufferedReader 对路径一无所知。

代码可能如下所示：

```
BufferedReader br = new BufferedReader(new InputStreamReader(new FIleInputStream("/a/b/c"), "utf-8")); 
```

# xml - XSLT：添加具有属性的新节点

> ID：11892880
> 
> 赞同：0
> 
> 时间：2012-08-09T22:25:41.817
> 
> 标签：xml, xslt, xslt-1.0

我必须使用 XSLT 从一个 XML 转换到另一个。我必须在标签内添加两个新节点`<file href="new1.js">`和`<file href="new2.js">`属性`<resource>`——无论它出现在哪里——

我的输入文件：

```
<?xml version="1.0" encoding="UTF-8"?>
            <manifest identifier="eXescorm_quiz4823c6301f3d3afc1c1f" 
            xmlns="http://www.imsglobal.org/xsd/imscp_v1p1"
            xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_rootv1p2" 
            xmlns:imsmd="http://www.imsglobal.org/xsd/imsmd_v1p2" 
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 

    <resources>
         <resource identifier="RES22" type="webcontent" href="index.html"> 
                 <file href="index.html"/>
                 <file href="common.js"/>
         </resource>
    </resources>
</manifest> 
```

**期望的输出：**

```
<?xml version="1.0" encoding="UTF-8"?>
    <manifest xmlns="http://www.imsglobal.org/xsd/imscp_v1p1" 
              identifier="eXeorm_sample4823c6301f29a89a4c1f" 
              xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_rootv1p2" 
              xmlns:imsmd="http://www.imsglobal.org/xsd/imsmd_v1p2" 
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <resources>
         <resource identifier="RES22" type="webcontent" href="index.html">
                 <file href="index.html"/>                                    
                 <file href="common.js"/>
                 <file href="new1.js"/>
                 <file href="new2.js"/>
         </resource>
    </resources>   
</manifest> 
```

我的 XSLT：

```
 <xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xhtml="http://www.imsglobal.org/xsd/imscp_v1p1"
                xmlns="http://www.imsglobal.org/xsd/imscp_v1p1"
                exclude-result-prefixes="xhtml">
                <xsl:output method="html" indent="yes" encoding="UTF-8"/>
                <xsl:strip-space elements="*" />

        <xsl:template match="@*|node()">
         <xsl:copy>
          <xsl:apply-templates select="@*|node()"/>
         </xsl:copy>
        </xsl:template>

    <xsl:template match="xhtml:resource">
     <file href="new1.js"/>
    <file href="new2.js"/>
     <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
     </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

但它不会添加新的文件节点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:40:40.743

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:ims="http://www.imsglobal.org/xsd/imscp_v1p1"
  exclude-result-prefixes="xsl ims">
<xsl:output method="xml" indent="yes" />
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="ims:resource" xmlns="http://www.imsglobal.org/xsd/imscp_v1p1">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
  <file href="new1.js"/>
  <file href="new2.js"/>   
 </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

# interop - Outlook 安全，互操作 NET 参考？

> ID：11892884
> 
> 赞同：0
> 
> 时间：2012-08-09T22:26:20.647
> 
> 标签：interop, outlook

我正在尝试创建一个访问 Outlook 电子邮件详细信息的独立应用程序。特别是 MailItem 的主题、发件人和正文。

我一生都无法弄清楚为什么有时 Outlook 会提示用户允许访问（例如，获取“程序正在尝试访问电子邮件地址信息....允许访问 x 分钟消息框），有时不会. 这种不规则性是在几周内提出申请的不同尝试中造成的，所以我在想我添加的引用或对象使用可能有什么不同？

我已经安装了 Microsoft Office 2010 互操作程序集并添加了 Microsoft.Office.Interop.Outlook 版本 14.0.0.0 的 .NET 引用

这是一个非常基本的代码片段，它确实会导致诊断日志：

```
using System; <br/>
using System.Collections.Generic; <br/>
using System.Linq; <br/>
using System.Text; <br/>
using Microsoft.Office.Interop.Outlook; <br/>

namespace OutlookTest
{
    class Program
   {
        static void Main(string[] args)
        {
            Microsoft.Office.Interop.Outlook.Application olApp = new Microsoft.Office.Interop.Outlook.Application();
            Microsoft.Office.Interop.Outlook.NameSpace olNS = olApp.GetNamespace("MAPI");
            MAPIFolder oFolder = olNS.GetDefaultFolder(OlDefaultFolders.olFolderInbox);

            foreach (object item in oFolder.Items)
            {
                if (item is MailItem)
                {
                    MailItem i = (MailItem)item;

                    Console.WriteLine("{0}", i.Body); 
                }
            }

            Console.ReadLine();
        }
    }
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:38:51.960

您没有做错任何事，这是对用户/公司有益的 Outlook 安全警报。去年我也有类似的问题。到目前为止我记得的选项：您可以像 Remou 提到的那样创建一个[受信任的 microsoft 插件，或者您可以将自己添加为](http://support.microsoft.com/kb/327657)[受信任的发布](http://office.microsoft.com/en-us/outlook-help/add-remove-or-view-a-trusted-publisher-HA010034138.aspx)者，或者您可以将一个 Visual Basic 脚本添加到您可以[从您的应用程序调用的](http://blogs.msdn.com/b/sachinsancheti/archive/2006/05/16/598951.aspx)Outlook 中。

# xml - XSLT 计算每个月内匹配字段的行数

> ID：11892885
> 
> 赞同：1
> 
> 时间：2012-08-09T22:26:22.113
> 
> 标签：xml, xslt

我的 XML 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Rowsets DateCreated="2012-08-01T17:43:31" EndDate="2012-08-01T17:43:03" StartDate="2012-08-01T16:43:03" Version="12.0.12 Build(9)">
<Rowset>
    <Columns>
        <Column Description="FirstName" MaxRange="1" MinRange="0" Name="Plant" SQLDataType="12" SourceColumn="Plant"/>
        <Column Description="Lastname" MaxRange="1" MinRange="0" Name="Process" SQLDataType="12" SourceColumn="Process"/>
        <Column Description="BorninMonth" MaxRange="1" MinRange="0" Name="ScheduleStartTimestamp" SQLDataType="93" SourceColumn="ScheduleStartTimestamp"/>
        <Column Description="BorninWeek" MaxRange="1" MinRange="0" Name="PO" SQLDataType="4" SourceColumn="PO"/>
        <Column Description="Phone" MaxRange="1" MinRange="0" Name="EquipmentName" SQLDataType="-1" SourceColumn="EquipmentName"/>
    </Columns>
    <Row>
        <FirstName>Derek</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>1</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
    </Row>
    <Row>
        <FirstName>Michael</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>1</BorninMonth>
        <BorninWeek>2</BorninWeek>
        <Phone>925</Phone>
    </Row>
    <Row>
        <FirstName>Yang</FirstName>
        <Lastname>Patel</Lastname>
        <BorninMonth>1</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
    </Row>
    <Row>
        <FirstName>Bruke</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>1</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
    </Row>
    <Row>
        <FirstName>Maulik</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>2</BorninMonth>
        <BorninWeek>2</BorninWeek>
        <Phone>925</Phone>
    </Row>
    <Row>
        <FirstName>Montu</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>3</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
    </Row>
    <Row>
        <FirstName>CHintu</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>4</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
    </Row>
    <Row>
        <FirstName>Pintu</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>4</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
    </Row>
    <Row>
        <FirstName>Puppy</FirstName>
        <Lastname>Patel</Lastname>
        <BorninMonth>4</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
    </Row>
    <Row>
        <FirstName>Tommy</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>5</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
    </Row>
</Rowset> 
```

现在我想找出第 1 个月出生并姓 Shah 的人数。同样的方式出生于第 2 个月，姓 Shah。出生于第 3 个月，姓 Shah。

所以我的输出 XML 将如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Rowsets DateCreated="2012-08-01T17:43:31" EndDate="2012-08-01T17:43:03" StartDate="2012-08-01T16:43:03" Version="12.0.12 Build(9)">
<Rowset>
    <Columns>
        <Column Description="FirstName" MaxRange="1" MinRange="0" Name="Plant" SQLDataType="12" SourceColumn="Plant"/>
        <Column Description="Lastname" MaxRange="1" MinRange="0" Name="Process" SQLDataType="12" SourceColumn="Process"/>
        <Column Description="BorninMonth" MaxRange="1" MinRange="0" Name="ScheduleStartTimestamp" SQLDataType="93" SourceColumn="ScheduleStartTimestamp"/>
        <Column Description="BorninWeek" MaxRange="1" MinRange="0" Name="PO" SQLDataType="4" SourceColumn="PO"/>
        <Column Description="Phone" MaxRange="1" MinRange="0" Name="EquipmentName" SQLDataType="-1" SourceColumn="EquipmentName"/>
    </Columns>
    <Row>
        <FirstName>Derek</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>1</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
        <CountMonth>3</CountMonth>
    </Row>
    <Row>
        <FirstName>Michael</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>1</BorninMonth>
        <BorninWeek>2</BorninWeek>
        <Phone>925</Phone>
        <CountMonth>3</CountMonth>
    </Row>
    <Row>
        <FirstName>Yang</FirstName>
        <Lastname>Patel</Lastname>
        <BorninMonth>1</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
        <CountMonth>3</CountMonth>
    </Row>
    <Row>
        <FirstName>Bruke</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>1</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
        <CountMonth>3</CountMonth>
    </Row>
    <Row>
        <FirstName>Maulik</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>2</BorninMonth>
        <BorninWeek>2</BorninWeek>
        <Phone>925</Phone>
        <CountMonth>1</CountMonth>
    </Row>
    <Row>
        <FirstName>Montu</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>3</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
        <CountMonth>1</CountMonth>
    </Row>
    <Row>
        <FirstName>CHintu</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>4</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
        <CountMonth>2</CountMonth>
    </Row>
    <Row>
        <FirstName>Pintu</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>4</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
        <CountMonth>2</CountMonth>
    </Row>
    <Row>
        <FirstName>Puppy</FirstName>
        <Lastname>Patel</Lastname>
        <BorninMonth>4</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
        <CountMonth>2</CountMonth>
    </Row>
    <Row>
        <FirstName>Tommy</FirstName>
        <Lastname>Shah</Lastname>
        <BorninMonth>5</BorninMonth>
        <BorninWeek>1</BorninWeek>
        <Phone>925</Phone>
        <CountMonth>1</CountMonth>
    </Row>
</Rowset> 
```

所以我需要一些帮助来编写这样的 XML，它会增加 Month 的值并计算行数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:37:59.757

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kRowByNameMonth" match="Row"
  use="concat(Lastname, '+', BorninMonth)"/>

 <xsl:template match=
  "Row[Lastname='Shah']
      [generate-id()
      = generate-id(key('kRowByNameMonth',concat('Shah+',BorninMonth))[1])
      ]">
   Born in month: <xsl:value-of select="BorninMonth"/>
   <xsl:value-of select="concat(' Count: ',
                                count(key('kRowByNameMonth',
                                          concat('Shah+',BorninMonth)
                                          )
                                       )
                                )"/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
 <Rowsets DateCreated="2012-08-01T17:43:31" EndDate="2012-08-01T17:43:03" StartDate="2012-08-01T16:43:03" Version="12.0.12 Build(9)">
    <Rowset>
        <Columns>
            <Column Description="FirstName" MaxRange="1" MinRange="0" Name="Plant" SQLDataType="12" SourceColumn="Plant"/>
            <Column Description="Lastname" MaxRange="1" MinRange="0" Name="Process" SQLDataType="12" SourceColumn="Process"/>
            <Column Description="BorninMonth" MaxRange="1" MinRange="0" Name="ScheduleStartTimestamp" SQLDataType="93" SourceColumn="ScheduleStartTimestamp"/>
            <Column Description="BorninWeek" MaxRange="1" MinRange="0" Name="PO" SQLDataType="4" SourceColumn="PO"/>
            <Column Description="Phone" MaxRange="1" MinRange="0" Name="EquipmentName" SQLDataType="-1" SourceColumn="EquipmentName"/>
        </Columns>
        <Row>
            <FirstName>Derek</FirstName>
            <Lastname>Shah</Lastname>
            <BorninMonth>1</BorninMonth>
            <BorninWeek>1</BorninWeek>
            <Phone>925</Phone>
        </Row>
        <Row>
            <FirstName>Michael</FirstName>
            <Lastname>Shah</Lastname>
            <BorninMonth>1</BorninMonth>
            <BorninWeek>2</BorninWeek>
            <Phone>925</Phone>
        </Row>
        <Row>
            <FirstName>Yang</FirstName>
            <Lastname>Patel</Lastname>
            <BorninMonth>1</BorninMonth>
            <BorninWeek>1</BorninWeek>
            <Phone>925</Phone>
        </Row>
        <Row>
            <FirstName>Bruke</FirstName>
            <Lastname>Shah</Lastname>
            <BorninMonth>1</BorninMonth>
            <BorninWeek>1</BorninWeek>
            <Phone>925</Phone>
        </Row>
        <Row>
            <FirstName>Maulik</FirstName>
            <Lastname>Shah</Lastname>
            <BorninMonth>2</BorninMonth>
            <BorninWeek>2</BorninWeek>
            <Phone>925</Phone>
        </Row>
        <Row>
            <FirstName>Montu</FirstName>
            <Lastname>Shah</Lastname>
            <BorninMonth>3</BorninMonth>
            <BorninWeek>1</BorninWeek>
            <Phone>925</Phone>
        </Row>
        <Row>
            <FirstName>CHintu</FirstName>
            <Lastname>Shah</Lastname>
            <BorninMonth>4</BorninMonth>
            <BorninWeek>1</BorninWeek>
            <Phone>925</Phone>
        </Row>
        <Row>
            <FirstName>Pintu</FirstName>
            <Lastname>Shah</Lastname>
            <BorninMonth>4</BorninMonth>
            <BorninWeek>1</BorninWeek>
            <Phone>925</Phone>
        </Row>
        <Row>
            <FirstName>Puppy</FirstName>
            <Lastname>Patel</Lastname>
            <BorninMonth>4</BorninMonth>
            <BorninWeek>1</BorninWeek>
            <Phone>925</Phone>
        </Row>
        <Row>
            <FirstName>Tommy</FirstName>
            <Lastname>Shah</Lastname>
            <BorninMonth>5</BorninMonth>
            <BorninWeek>1</BorninWeek>
            <Phone>925</Phone>
        </Row>
    </Rowset>
</Rowsets> 
```

**产生想要的正确结果**：

```
 Born in month: 1 Count: 3
   Born in month: 2 Count: 1
   Born in month: 3 Count: 1
   Born in month: 4 Count: 2
   Born in month: 5 Count: 1 
```

**说明**：

正确使用带有复合键的**[Muenchian 分组方法。](http://www.jenitennison.com/xslt/grouping/muenchian.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:03:14.160

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="Row">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
  <CountMonth>
    <xsl:value-of select="count(../Row
      [BorninMonth = current()/BorninMonth]
      [Lastname    = current()/Lastname   ]    
       )" /> 
  </CountMonth> 
 </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

# html - CSS导航口音背景图像不起作用

> ID：11892886
> 
> 赞同：0
> 
> 时间：2012-08-09T22:26:27.323
> 
> 标签：html, css, navigation

我已经查看了stackoverflow上的几个问题，但仍然没有找到答案......谷歌搜索也没有用......

这是我的CSS：

```
#nav {
    text-align:center;
    display: block;
    background-image: url(lines.png);
    background-repeat: repeat-x;
    font-family: Gabrielle;
    text-decoration: none;
} 
```

最常见的问题是文件是否在正确的文件夹中——我向你保证是的。这个网站没有上线，到目前为止我只使用本地文件。

这是随附的 HTML：

```
<div id="nav">
 <ul>
    <li><a href="kitchen.html">Kitchen &amp; Bath</a></li>
    <li><img src="nav-bullet.png"></li>
    <li><a href="interior.html">Interior Design</a></li>
    <li><img src="nav-bullet.png"></li>
    <li><a href="graphic.html">Graphic Design</a></li>
    <li><img src="nav-bullet.png"></li>
    <li><a href="cad.html">Auto CAD</a></li>
    <li><img src="nav-bullet.png"></li>
    <li><a href="modeling.html">3D Modeling</a></li>
</ul> 
```

以防万一有帮助。

我正在尝试在导航的两侧制作“重音线”，但我不确定我是否以正确的方式进行。这是一个“启发”我的网站的链接......你会看到他们导航的两边都有优雅的小线条。这些就是我想要创造的。

[http://www.tinkeringmonkey.com/](http://www.tinkeringmonkey.com/)

正如我所说，也许我走错了路。任何使现有代码工作的建议，或关于改进方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:30:04.607

您必须为 指定高度`nav`。指定行高也是一个好主意，以便其中的文本`ul`垂直居中。

```
#nav {
    text-align:center;
    display: block;
    background-image: url(lines.png);
    background-repeat: repeat-x;
    font-family: Gabrielle;
    text-decoration: none;
    height: 20px;
    line-height: 20px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:04:12.420

尝试在#nav 中添加高度和宽度，并为背景图像添加引号：url()

```
#nav {
text-align:center;
display: block;
background-image: url('./lines.png');
background-repeat: repeat-x;
font-family: Gabrielle;
text-decoration: none;
} 
```

还要仔细检查文件名/类型和文件位置。如果在与您的 html 文件相同的文件夹中有一个名为“lines.png”的文件，上述解决方案应该可以工作。

# python - Python PyEnchant 分段错误或无效指针

> ID：11892891
> 
> 赞同：3
> 
> 时间：2012-08-09T22:26:51.940
> 
> 标签：python, segmentation-fault, ctypes, pyenchant

我有一个调用 PyEnchant 的多线程 Python 应用程序。我不是 Python 专家，大部分代码来自第三方。我所做的是添加代码以从多线程应用程序调用 PyEnchant。由于我进行了更改，应用程序运行了不同的时间长度然后崩溃。我在 Ubuntu 12.04 上运行它。我收到如下错误：

```
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7fffc5ffd700 (LWP 6858)]
0x00007ffff4424854 in ?? () from /usr/lib/libenchant.so.1
(gdb) backtrace
#0  0x00007ffff4424854 in ?? () from /usr/lib/libenchant.so.1
#1  0x00007ffff442517d in enchant_dict_check () from /usr/lib/libenchant.so.1
#2  0x00007ffff48a2ea4 in ffi_call_unix64 () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#3  0x00007ffff48a28c5 in ffi_call () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#4  0x00007ffff48932c2 in _ctypes_callproc () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#5  0x00007ffff4893aa2 in ?? () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#6  0x00000000004c7c76 in PyObject_Call ()
#7  0x000000000042aa4a in PyEval_EvalFrameEx ()
#8  0x000000000042abe2 in PyEval_EvalFrameEx ()
#9  0x000000000042abe2 in PyEval_EvalFrameEx ()
#10 0x00000000004317f2 in PyEval_EvalCodeEx ()
#11 0x000000000054aa40 in ?? ()
#12 0x00000000004c7c76 in PyObject_Call ()
#13 0x000000000049e9ba in ?? ()
#14 0x00000000004c7c76 in PyObject_Call ()
#15 0x00000000004c7d36 in PyEval_CallObjectWithKeywords ()
#16 0x0000000000443e3a in ?? ()
#17 0x000000000042a862 in PyEval_EvalFrameEx ()
#18 0x000000000042abe2 in PyEval_EvalFrameEx ()
#19 0x000000000042abe2 in PyEval_EvalFrameEx () 
```

或者

```
*** glibc detected *** /usr/bin/python: free(): invalid pointer: 0x00007fffd4000178 ***
(gdb) backtrace
#0  0x00007ffff68fa445 in raise () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00007ffff68fdbab in abort () from /lib/x86_64-linux-gnu/libc.so.6
#2  0x00007ffff6937e2e in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#3  0x00007ffff6942626 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#4  0x00007ffff4424861 in ?? () from /usr/lib/libenchant.so.1
#5  0x00007ffff442517d in enchant_dict_check () from /usr/lib/libenchant.so.1
#6  0x00007ffff48a2ea4 in ffi_call_unix64 () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#7  0x00007ffff48a28c5 in ffi_call () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#8  0x00007ffff48932c2 in _ctypes_callproc () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#9  0x00007ffff4893aa2 in ?? () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#10 0x00000000004c7c76 in PyObject_Call ()
#11 0x000000000042aa4a in PyEval_EvalFrameEx ()
#12 0x000000000042abe2 in PyEval_EvalFrameEx ()
#13 0x000000000042abe2 in PyEval_EvalFrameEx ()
#14 0x00000000004317f2 in PyEval_EvalCodeEx ()
#15 0x000000000054aa40 in ?? ()
#16 0x00000000004c7c76 in PyObject_Call ()
#17 0x000000000049e9ba in ?? ()
#18 0x00000000004c7c76 in PyObject_Call ()
#19 0x00000000004c7d36 in PyEval_CallObjectWithKeywords ()
#20 0x0000000000443e3a in ?? ()
#21 0x000000000042a862 in PyEval_EvalFrameEx ()
#22 0x000000000042abe2 in PyEval_EvalFrameEx () 
```

或者

```
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7fffe57fa700 (LWP 17532)]
0x0000000000000000 in ?? ()
(gdb) backtrace
#0  0x0000000000000000 in ?? ()
#1  0x00007ffff3f5fe33 in g_hash_table_lookup () from /lib/x86_64-linux-gnu/libglib-2.0.so.0
#2  0x00007ffff44245a3 in ?? () from /usr/lib/libenchant.so.1
#3  0x00007ffff442518b in enchant_dict_check () from /usr/lib/libenchant.so.1
#4  0x00007ffff48a2ea4 in ffi_call_unix64 () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#5  0x00007ffff48a28c5 in ffi_call () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#6  0x00007ffff48932c2 in _ctypes_callproc () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#7  0x00007ffff4893aa2 in ?? () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#8  0x00000000004c7c76 in PyObject_Call ()
#9  0x000000000042aa4a in PyEval_EvalFrameEx ()
#10 0x000000000042abe2 in PyEval_EvalFrameEx ()
#11 0x000000000042abe2 in PyEval_EvalFrameEx ()
#12 0x00000000004317f2 in PyEval_EvalCodeEx ()
#13 0x000000000054aa40 in ?? ()
#14 0x00000000004c7c76 in PyObject_Call ()
#15 0x000000000049e9ba in ?? ()
#16 0x00000000004c7c76 in PyObject_Call ()
#17 0x00000000004c7d36 in PyEval_CallObjectWithKeywords ()
#18 0x0000000000443e3a in ?? ()
#19 0x000000000042a862 in PyEval_EvalFrameEx ()
#20 0x000000000042abe2 in PyEval_EvalFrameEx ()
#21 0x000000000042abe2 in PyEval_EvalFrameEx ()
#22 0x000000000042abe2 in PyEval_EvalFrameEx () 
```

阅读我尝试过的另一篇文章

```
ulimit -s unlimited 
```

以及 ulimit 的各种其他值，但它似乎没有帮助。

我已经监视了以“top”运行的应用程序，它似乎没有使用太多资源。有时它运行 5 分钟，有时 15 分钟。在这些运行期间，它处理数百个字符串并找到数百个未知单词。运行代码的机器没有已知问题，它是我的开发机器，其他一切都稳定运行。

任何人都可以阐明这些错误的含义吗？在我的 Python 代码中是否有我应该或不应该做的事情来解决它？我想这是一个内存问题（我对此知之甚少），我应该检查内存泄漏等吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T21:13:21.480

我做了一些更多的测试，发现它可以在单个工作线程上正常工作。经过一番谷歌搜索后，我发现[http://aspell.net/](http://aspell.net/)在“需要完成的事情”下说；“让 Aspell Thread 安全。尽管 Aspell 本身不是多线程的，但我希望它是线程安全的，以便它可以被多线程程序使用。” 我通过 Enchant 将 Aspell 与 PyEnchant 一起使用，所以我想我所看到的是可以预料的。我联系了 Enchant [http://www.abisource.com/projects/enchant/的作者](http://www.abisource.com/projects/enchant/)他们说“Enchant 本身是线程安全的。不幸的是，它的一些后端可能不是，就像你在 Aspell 中发现的那样。不过，我们可以在 Enchant 中解决这个问题，通过序列化对 Aspell 字典的所有访问，从而隐藏线程对用户的不安全性。” 我可以提交增强请求吗？所以我已经提交了增强请求，并期待在适当的时候进行增强。

# jquery - 理解 jquery 术语

> ID：11892893
> 
> 赞同：1
> 
> 时间：2012-08-09T22:26:56.200
> 
> 标签：jquery

谁能帮我解决我的疑问之一？

在在线阅读 jquery 教程时，我遇到了一些我没有正确理解的术语。

例如：“默认操作”、“冒泡”等。

因此，当我们说取消默认操作并防止它冒泡时，下面的代码：

```
$("a").live("click", function() { return false; }) 
```

这里的默认操作是什么？当他们说取消默认操作时，这是否意味着取消“实时”操作？另外，如果需要取消，为什么要首先使用它？

另外，“防止它冒泡”是什么意思？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:30:23.667

> 这里的默认操作是什么？

它是点击链接的常规浏览器处理程序 - 这会导致地址栏中的 url 发生变化

> 当他们说取消默认操作时，这是否意味着取消“实时”操作？

不，它没有。`return false;`阻止默认操作，即定期单击链接，这会导致更改页面（通常）

> 另外，如果需要取消，为什么要首先使用它？

你可以在处理程序的任何地方取消，没关系

> 另外，“防止它冒泡”是什么意思？

如果你不阻止事件冒泡 - 它会通过 DOM 树从当前元素冒泡到根。

# openerp - 在 OpenErp 中创建功能字段

> ID：11892897
> 
> 赞同：2
> 
> 时间：2012-08-09T22:27:07.370
> 
> 标签：openerp

如何在 OpenERP 中创建功能字段？

看来我需要在python中创建函数，然后用XML调用它。我看到需要编辑的XML，但是python代码进入了什么文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T05:18:08.623

py文件的代码..

```
class some_model(osv.osv):

    _name = 'some.model'

    def Method_of_Function(self, cr, uid, ids, fld_name, arg, context=None):
        #Logic
        return value 

    _columns = {
        "functional_filed":fields.function(Method_of_Function, 
                   method=True,type='int',string='Label', store=True),

    }
some_model() 
```

并且在 xml 文件记录标签看起来像......

```
<record model="ir.ui.view" id="object_name_form_view">
        <field name="name">objectname.form</field>
        <field name="model">some.model</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="form_string">
                <field name="functional_filed" />
            </form>
        </field>
    </record> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T07:38:53.040

首先，您必须在 .py 文件中定义功能字段：

> 'amount' : fields.function(_calc_amount, type="float", method=True, store=True, string="Amount"),
> 
> def _calc_amount(self, cr, uid, ids, name, args, context=None):
> 你的代码...

然后在 .xml 文件中定义功能字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T06:39:14.787

你可以从这里参考。如何创建功能字段

[http://doc.openerp.com/v6.0/developer/2_5_Objects_Fields_Methods/field_type.html](http://doc.openerp.com/v6.0/developer/2_5_Objects_Fields_Methods/field_type.html)

这是另一个链接供您参考

[http://members.hellug.gr/xrg/openerp-doc/html/api_reference/osv/fields_function.html](http://members.hellug.gr/xrg/openerp-doc/html/api_reference/osv/fields_function.html)

您必须在 py 文件中创建函数字段并从 xml 文件中调用它。

# date - Lua os.date() 函数在 Computer Craft 中不起作用

> ID：11892899
> 
> 赞同：1
> 
> 时间：2012-08-09T22:27:07.543
> 
> 标签：date, lua, minecraft, computercraft

我正在尝试让模拟时钟显示时间（12 小时），我必须使用 Lua。我使用以下行以这种格式获取时间：

```
os.date('%I:%M') 
```

这显然不起作用，因为我不断收到零错误，这是代码唯一有问题的地方。os.time 工作正常，但不是 os.date；我什至尝试不使用'%I:%M'（时间格式），但它仍然无法与 os.date() 一起使用。

我究竟做错了什么？我是否必须从其他库导入日期函数？顺便说一句，我是一个完全的 Lua nooby ......

我实际上用它来为 Minecraft 上的 ComputerCraft 工作监视器，但代码是：

```
m = peripheral.wrap('back')
m.setTextScale(5)
while i == i do
m.clear()
m.setCursorPos(1,1)
x = os.date('%I:%M')
m.write(x)
sleep(60)
end 
```

问题是其余的代码不会影响它。os.date 是唯一的问题，因为我单独尝试它，它给了我同样的错误“尝试调用 nil”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:53:10.407

据此[，](http://computercraft.info/wiki/index.php?title=OS_%28API%29) ComputerCraft 似乎没有公开`os.date()`。[这里](http://www.computercraft.info/forums2/index.php?/topic/1401-two-questions-here/)建议一种解决方法：

> 不幸的是，日期和时间没有向我们透露。在 Lua 中，os.date() 和 os.time() 函数将是我们想要的，但是在 ComputerCraft 中，日期并没有实现，时间给了 minecraft 时间。
> 
> 我知道获取真实日期和时间的唯一方法是使用 http API 从 Web 获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-23T14:45:08.310

另外，如果您想要我的世界日期，请尝试使用`os.getday()`

# java - Java：如何使用 Pattern 类提取表达式的片段？

> ID：11892900
> 
> 赞同：4
> 
> 时间：2012-08-09T22:27:08.523
> 
> 标签：java, regex

我有以下模式定义：

```
private static final String D = "(Mon|Tue|Wed|Thu|Fri|Sat|Sun)";
private static final String DD = "(" + D + "-" + D + ")";
private static final String m_daysPattern = "(" + D + "|" + DD + ")(?:,(" + D + "|" + DD + "))*";
private static final Pattern m_daysRegex = Pattern.compile(m_daysPattern); 
```

此正则表达式应匹配如下表达式：

*   “周一至周五”
*   “周二至周五，周日”
*   “周一至周三，周五至周日”

我在 .NET 中使用命名组很容易做到这一点，但在 Java 6 中我有点迷茫。谁能给我看一个代码示例，它可以让我提取日期并准确理解给定表达式中提到的范围和单日？

谢谢。

**编辑1**

好的，这是我检查以下组的结果`m_daysRegex.matcher("Mon-Fri")`：

```
matchDays.groupCount() = 10
matchDays.groups = [0,7,0,7,-1,-1,0,7,0,3,4,7,-1,...,-1] (22 values)
matchDays.group(0) = "Mon-Fri"
matchDays.group(1) = "Mon-Fri"
matchDays.group(2) = null
matchDays.group(3) = "Mon-Fri"
matchDays.group(4) = "Mon"
matchDays.group(5) = "Fri"
matchDays.group(6) = null
matchDays.group(7) = null
matchDays.group(8) = null
matchDays.group(9) = null
matchDays.group(10) = null 
```

有人可以向我解释这一切的逻辑吗？我的意思是我不仅应该得到“Mon”和“Fri”，而且我还必须知道它们是范围子表达式“Mon-Fri”的一部分，而不仅仅是“Mon,Fri”。

顺便说一句，匹配 "Mon,Fri" 给了我们这个：

```
matchDays.groupCount() = 10
matchDays.groups = [0,7,0,3,0,3,-1,-1,-1,-1,-1,-1,4,7,4,7,-1,...,-1] (22 values)
matchDays.group(0) = "Mon,Fri"
matchDays.group(1) = "Mon"
matchDays.group(2) = "Mon"
matchDays.group(3) = null
matchDays.group(4) = null
matchDays.group(5) = null
matchDays.group(6) = "Fri"
matchDays.group(7) = "Fri"
matchDays.group(8) = null
matchDays.group(9) = null
matchDays.group(10) = null 
```

这是不同的，这很好。我仍然觉得很难理解这个算法。

这在 .NET 中很容易，所以我期待在 Java 中也能做到这一点。公平，不是吗？

**编辑2**

是否有解释这些内容的 Java 正则表达式指南？到目前为止，我看到的所有指南都检查了非常简单的正则表达式。

**编辑3**

好的，我开始明白了。我的正则表达式可以这样描述：

```
 (          // 1 = D1|D2-D3
  (D1)|     // 2 = D1
  (         // 3 = D2-D3
   (D2)-    // 4 = D2
   (D3)     // 5 = D3
  )
 )
 (?:,
  (         // 6 = D4|D5-D6
   (D4)|    // 7 = D4
   (        // 8 = D5-D6
    (D5)-   // 9 = D5
    (D6)    // 10 = D6
   )
  )
 )* 
```

它解释了“Mon-Fri”和“Mon,Fri”的组值。但是如何处理重复？例如，“周一、周三、周五”？仍在试图弄清楚。

**编辑4**

我现在明白了。我可以将复杂的正则表达式与重复匹配，但我无法轻松提取相应的匹配项 - 必须使用该`find()`方法和更简单的子正则表达式进行迭代。所以，就我而言，我决定：

1.  匹配整个表达式以确保它有效
2.  用'，'分割它（`StringUtils.split`来自apache）
3.  迭代拆分部分，必要时用“-”拆分。

感谢所有善良的撒玛利亚人提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:14:44.457

有关捕获组等的描述，请访问此处：[http ://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

至于你的模式，如果你写出所有的括号，你会得到：

```
((d)|((d)-(d)))(?:,((d)|((d)-(d))))* 
```

其中 d 是

```
Mon|Tue|... 
```

列出组，使用 M 显示属于给定组的部分：

```
 0 - the matching string, if there is one
 1 - ((M)|((M)-(M)))(?:,((d)|((d)-(d))))*
 2 - ((M)|((d)-(d)))(?:,((d)|((d)-(d))))*
 3 - ((d)|((M)-(M)))(?:,((d)|((d)-(d))))*
 4 - ((d)|((M)-(d)))(?:,((d)|((d)-(d))))*
 5 - ((d)|((d)-(M)))(?:,((d)|((d)-(d))))*
 6 - ((d)|((d)-(d)))(?:,((M)|((M)-(M))))*
 7 - ((d)|((d)-(d)))(?:,((M)|((d)-(d))))*
 8 - ((d)|((d)-(d)))(?:,((d)|((M)-(M))))*
 9 - ((d)|((d)-(d)))(?:,((d)|((M)-(d))))*
10 - ((d)|((d)-(d)))(?:,((d)|((d)-(M))))* 
```

给定字符串“Mon-Fri”，您将获得在输出中看到的字符串，即

```
 0 - Mon-Fri i.e. the full match
 1 - Mon-Fri i.e. ((M)|((M)-(M)))
 2 - null i.e. not matched by (M)
 3 - Mon-Fri i.e. ((M)-(M))
 4 - Mon i.e. the first (M) in group 3
 5 - Fri i.e. the second (M) in group 3
 6 - and so on... 
```

对于多场比赛，你会做类似的事情

```
Matcher m = pattern.matcher(input);
while (m.find()) {
    // extract groups from m
} 
```

编辑：想想看，你可能不需要最后一部分，即

```
(?:,((d)|((d)-(d))))* 
```

在你的模式中。只需将 while 循环与

```
(d)|((d)-(d)) 
```

模式来查找每个部分（即逗号之间的内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:40:06.907

java 正则表达式中的组是使用索引访问的，索引是左括号的计数器。

这是一个适用于 java 组的示例（我之前做过的一些事情）。希望这可以帮助。

```
/**
 * <li>range={0,2} -&gt; 0 to 2 
 * <li>range={3,n} -&gt; 3 to Integer.MAX_VALUE
 * <li>range={7} -&gt; 0 to 7
 * <li>range={n} -&gt; 0 to Integer.MAX_VALUE
 * <li>range={-n} -&gt; Integer.MIN_VALUE to 0
 */
@Test
public void getRange() {
    Pattern p = Pattern.compile(
        "\\{" +
        "([+-]?(n|[0-9])){1}" + // group 1
        "(" +
        "(,){1}" +
        "([+-]?(n|[0-9])){1}" + // group 5
        "){0,1}" +
        "\\}");

    Matcher m = null;
    String range = null;

    logger.debug("pattern: " + p.pattern());

    range = "{0,2}";
    m = p.matcher(range);
    logger.debug(range + " -> groupCout: " + m.groupCount());
    printGroups(m);
    Assert.assertEquals("0", m.group(1));
    Assert.assertEquals("2", m.group(5));

    range = "{3,n}";
    m = p.matcher(range);
    logger.debug(range + " -> groupCout: " + m.groupCount());
    printGroups(m);
    Assert.assertEquals("3", m.group(1));
    Assert.assertEquals("n", m.group(5));

    range = "{7}";
    m = p.matcher(range);
    logger.debug(range + " -> groupCout: " + m.groupCount());
    printGroups(m);
    Assert.assertEquals("7", m.group(1));
    Assert.assertEquals(null, m.group(5));

    range = "{n}";
    m = p.matcher(range);
    logger.debug(range + " -> groupCout: " + m.groupCount());
    printGroups(m);
    Assert.assertEquals("n", m.group(1));
    Assert.assertEquals(null, m.group(5));

    range = "{-3,-7}";
    m = p.matcher(range);
    logger.debug(range + " -> groupCout: " + m.groupCount());
    printGroups(m);
    Assert.assertEquals("-3", m.group(1));
    Assert.assertEquals("-7", m.group(5));
}

private void printGroups(Matcher m) {
    if(m != null && m.matches()) {
        for(int i = 0; i < m.groupCount()+1; i++) {
            logger.debug("group " + i + ": " + m.group(i));

        }   
    }
} 
```

# matplotlib - 在 OSX Lion 上使用 Alt-Tabbing 到 matplotlib 图形时遇到问题

> ID：11892901
> 
> 赞同：0
> 
> 时间：2012-08-09T22:27:16.997
> 
> 标签：matplotlib, osx-lion

在 OSX Leopard 上这对我来说不是问题，因为每个 matplotlib 图形窗口都用类似火箭飞船的图标表示，但是当现在在 Lion 上出现图形时，没有与之关联的符号或图标出现在我可以使用 Alt-Tab 切换到的应用程序列表。这可能听起来微不足道，但它是我工作流程的重要组成部分。

有针对这个的解决方法吗？我一直在阅读有关这些后端的信息，我想知道是否为 OSX Lion 更改了后端，例如 X11 或 Quartz 图标将代表每个图形...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:00:13.813

如果您使用与 X11 相关的后端（GTK 或 Qt 的某些配置），那么所有图形都属于 X11 应用程序，您不能在它们之间使用 alt-tab（尽管您可以右键单击 X 图标并选择图）。

如果您没有使用 X11 后端并且您的所有图形都来自同一个进程（例如，ipython 中的交互式绘图），那么它们都属于同一个“火箭船”图标，所以也没有 alt-tab。如果您使用的是“osx”后端或“qt4”后端（使用 qt-mac，而不是 qt-x11），那么每个进程应该有一个火箭飞船。请注意，“osx”后端仅在创建图形时启动火箭飞船，而“qt4”后端在导入 pylab/matplotlib 后立即启动它。

我刚刚在雪豹和狮子下尝试过，行为是相同的。

# javascript - 在 jQuery 中，如何从 $.ajax 回调函数访问 $(this)？

> ID：11892902
> 
> 赞同：0
> 
> 时间：2012-08-09T22:27:19.213
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何访问 $(this) inside ajax 成功回调函数](https://stackoverflow.com/questions/2643798/how-to-access-the-this-inside-ajax-success-callback-function)

我有这样的代码：

```
$('.each_button').click(function(){

$.ajax({ type: 'POST', url: process.php, data: data, success: function(data){

/////
       }
   })
}); 
```

如何访问`$('.each_button')`触发事件的内容？我试过`$(this)`但它不起作用，可能是因为它在另一个函数中..

提前非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T22:49:45.627

出于某种原因，每个人都想使用变量。这是没有必要的。

```
$('.each_button').click(function(){

    $.ajax({
        context: this, // <-- do this instead...
        type: 'POST', 
        url: process.php, 
        data: data, 
        success: function(data) {
               // ...now 'this' is the element you want
            alert(this.className);
        }
    });

}); 
```

* * *

或者`$.proxy`，如果您愿意，可以使用...

```
$('.each_button').click(function(){

    $.ajax({
        type: 'POST', 
        url: process.php, 
        data: data, 
        success: $.proxy(function(data) {
               // ...now 'this' is the element you want
            alert(this.className);
        }, this) // <-- bind the context
    });

}); 
```

* * *

这些方法的一个好处是它可以让您重用该`success`功能......

```
function ajax_success(data) {
    alert(this.className);
}

$('.each_button').click(function(){
    $.ajax({
        context: this,
        type: 'POST', 
        url: process.php, 
        data: data, 
        success: ajax_success
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T22:30:38.027

您可以将对象保存在另一个变量中并在`function(data)`.

像这样的东西：

```
$('.each_button').click(function(){
    var $obj = $(this);
    $.ajax({
        type: 'POST', 
        url: process.php, 
        data: data, 
        success: function(data) {
            $obj.val(data.foobar);
        }
    })
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T22:29:54.420

在 ajax 调用之前在变量中捕获它：

```
$('.each_button').click(function(){

    var $this = $(this);

    $.ajax({ type: 'POST', url: process.php, data: data, success: function(data){

            alert($this);

       }
   })
}); 
```

# c# - 有没有办法获得对嵌入式资源文件的字符串路径引用？

> ID：11892908
> 
> 赞同：7
> 
> 时间：2012-08-09T22:28:16.510
> 
> 标签：c#, .net

我有一个方法，它接受一个字符串参数，它是一个文本文件的文件路径。我希望能够传入我作为资源嵌入到程序集中的文本文件。

有没有办法获得对嵌入文本文件的字符串引用，以便它可以用作打开 StreamReader 的文件路径？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T22:32:24.513

您可以使用`Assembly.GetManifestResourceStream(resource_name_of_the_file)`访问文件的流，将其写入 TEMP 目录并使用此路径。

例如，如果您的项目中有一个位于“ **Resources\Files\File.txt** ”路径下的文件，并且项目的程序集默认命名空间是“ **RootNamespace** ”，则您可以从该程序集的代码中访问该文件的流

```
Assembly.GetExecutingAssembly().GetManifestResourceStream("RootNamespace.Resources.Files.File.txt") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T22:32:02.503

> 有没有办法获得对嵌入文本文件的字符串引用，以便它可以用作打开 StreamReader 的文件路径？

不，嵌入资源不是单独的文件，而是嵌入到可执行文件中。但是，您可以使用`StreamReader`.

```
var name = "...";
using (var stream = Assembly.GetExecutingAssembly().GetManifestResourceStream(name)) 
  using (var streamReader = new StreamReader(stream)) {
    // Read the embedded file ...
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-03T19:15:01.573

适用于我的用例的一种方法来自以下答案： [https ://stackoverflow.com/a/34664553/11860907](https://stackoverflow.com/a/34664553/11860907)

对于二进制文件：`File.WriteAllBytes(outputpath, Properties.Resources.file);`

对于文本文件：`File.WriteAllText(outputpath, Properties.Resources.file);`

当我的程序第一次打开时，我只是为我需要的每个嵌入式资源文件运行了这行代码，并将资源文件放在我可以作为字符串路径引用的某个地方。

# python - 在 Python 中创建单个成员列表的简洁方法？

> ID：11892909
> 
> 赞同：7
> 
> 时间：2012-08-09T22:28:18.183
> 
> 标签：python, list

假设我有一些对象`x`可能是数据类型的单个实例（比如`float`），或者它可能是`float`类型列表。

有什么我可以确保它`x`被包装为一个列表，如果需要的话可能是一个单例列表，而不检查它的类型或做任何类似的事情。

我想要像`list(x)`总是工作的东西，无论是否`x`是单例，但这不起作用，因为单例是不可迭代的。

编辑：有关详细信息，请参阅[下面的答案](https://stackoverflow.com/a/26017248/567620)。

同时，我不想定义自己的函数来从单例构造列表，我也不想像这样内联地做任何事情：

```
from collections import Iterable
y = [x] if not isinstance(x, Iterable) else list(x) 
```

如果没有比这更简洁的了，那也没关系。我正在寻找一些已经内置在语言中的干净的方法。

我敢肯定，有些人可能认为这种`isinstance`方法既干净又好，但我特意寻找更简洁的东西，不需要我事先写任何新东西。我在搜索文档页面时找不到任何东西，而且我不知道如何向搜索引擎提出这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T23:08:17.227

这是您没有问但也许应该问的问题的答案。我只能猜测，因为您没有提供相关的上下文。

**我如何处理传递给我的违反我的接口合同的参数？**

你不应该尝试。如果我打电话`sum(2)`，我会得到

> TypeError：“int”对象不可迭代

因为`sum`期待一个可迭代的，我没有给它一个。如果您担心有人会同时致电

```
my_function(2.2)
my_function([2.2, 4.4]) 
```

正确的响应是引发 TypeError，而不是尝试为调用者修补问题，因为一旦你修复了第一个案例，就会有人打电话

```
my_function([2.2, 'loretta']) 
```

你也报道那个案子吗？如果他们给你一个自我参照列表怎么办？如果您来自强类型语言背景，那么很容易滥用 Python 以使其表现得像 Java。这只会产生糟糕的 Python 代码：你已经在缺陷之上堆积了一个 hack。

而且“类型安全”也有点像谣言，否则`double sqrt(float)`不必返回域错误，但确实如此。应该`sqrt`取其论点的绝对值吗？屏蔽调用签名中的错误只能确保缺陷未被发现，然后在您收到未预料到的无效参数时中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-24T12:44:02.093

在获得更多 Python 经验后重新审视这个问题时，我想到了一个解决方案，但它违反了我当时要求的不定义函数的属性。

```
def make_list_containing(*args):
    return list(args) 
```

然后`make_list_containing(3)`或`make_list_containing('foo')`按预期行事（与`list`构造函数相反，您必须改变直觉来*学习*如何期望它起作用）。

令我惊讶的是，`list`作为构造函数是“转换为`list`类型”而不是“放入`list`对象实例”的同义词。

我可以看到构造函数的多态行为在单例也是可迭代的情况下可能是模棱两可的，比如字符串。但是，为什么不支持不可迭代单例的“放入列表”行为？

另一件事是，至少对我而言，我所描述的方法似乎*更*一致，更符合最小惊讶。

`make_list_containing`你知道你总是会得到一个列表，它会包含*传入*的元素。只要你以你想要的格式传入它们，那么这正是你会得到的。考虑：

```
In [34]: make_list_containing(*'foo')
Out[34]: ['f', 'o', 'o']

In [35]: make_list_containing('foo')
Out[35]: ['foo'] 
```

或者

```
In [40]: make_list_containing(*enumerate(range(3)))
Out[40]: [(0, 0), (1, 1), (2, 2)]

In [41]: make_list_containing(enumerate(range(3)))
Out[41]: [<enumerate at 0x7f61a7f0fd70>] 
```

现在*这*对我来说似乎更直观。预先设置这`*`正是我应该如何“去迭代”作为参数的东西中的项目。如果我不特意选择它，那么我必须将其`'foo'`视为单例，并计划在函数调用内部自己处理其元素或可迭代性。

在这次谈话中令人沮丧的一件事是，仅仅因为 Python 的这种约定*是老*人们似乎将其与意义混为一谈，这并不奇怪。但这是对惊喜的狭义定义。是的，当我启动翻译时，我不再“惊讶”`list('foo')`给我`['f', 'o', 'o']`。但我仍然感到惊讶的是，对于构造函数来说，语言的接口选择与`list`. 这让我感到惊讶，因为它似乎有更多的设计弱点而不是优势，而且最初用来证明它的理由是对语法的一些固定，而不是思想的清晰。

在这一点上，它偏离了意见区太远了，我显然同意这样一个事实，即由于压倒性的历史势头，这在 Python 中不会改变。但是我的问题的精神仍然是关于这个非常合理的观点。这不是“懒惰”或“只需编写一个包装函数并继续前进”的问题，因为大多数评论似乎都希望它是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T22:30:56.980

我不知道内置的任何类似的东西。您的解决方案对我来说似乎是最好的选择，尽管您可能想使用序列 ABC 而不是 Iterable。

# jquery - jquery高亮显示任何div

> ID：11892911
> 
> 赞同：0
> 
> 时间：2012-08-09T22:28:26.337
> 
> 标签：jquery

我正在尝试创建一种可以突出显示页面上的 div（和模糊主体）的效果...

我的html代码...

```
<div class="highlighter">content goes here</div> 
```

jquery代码...

```
$(document).ready(function () { 
   setTimeout(function() {
       $('body').css("background-color","black").fadeTo('fast', 0.3, function() {
           $('.highlighter').fadeTo('slow', 0.9);
       });

   }, 5000);
}); 
```

但我的 jquery 代码没有按预期工作，我想做的是：加载页面，用较低的不透明度或黑色背景模糊页面（正文）但没有 .highlighter div 所以这个 div 应该突出显示 5 秒然后模糊效果从网站中删除，网站将正常工作，请帮助我实现效果，谢谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:08:33.980

这是关于子元素不需要的不透明度更改的问题吗？因为当你改变body的不透明度时，div的不透明度也会改变。

为避免这种情况，您可以创建另一个 div，将其绝对定位以覆盖整个页面并将其不透明度设置为，例如，0.2，并将其 z-index 分配给一个值（例如，1000）。然后将要突出显示的 div 的 z-index 分配给大于 (1001) 的值。

# asp.net-mvc - mvc c# jquery如果记录存在则更新视图的一部分否则更新表

> ID：11892914
> 
> 赞同：2
> 
> 时间：2012-08-09T22:28:41.363
> 
> 标签：asp.net-mvc, jquery

我正在（像往常一样）寻求有关如何使用此功能的建议。我有一个带有编辑框的页面，用户在其中提交带有输入的页面，其唯一目的是将其保存到记录中。但是我想要做的（避免重复）是首先在表中搜索任何 SIMILAR 记录，如果有任何类似的记录，我想将其返回给用户（在同一视图上）并问，你想要使用这些记录而不是保存新记录？

所以我有一个看法

```
<script type="text/javascript">
   $(document).ready(function(){
      $(function(){
         $('.submit-link').click(function(){
             /** not sure how to handle this **/
         });
      });
   });
</script>

<% using(Html.Beginform()){%>
   <%: Html.TextBoxFor(model => model.Name)
   <button type="submit" value="register name" class="submit-link">Submit</button>
<%}%>

<div class="search-results"></div> 
```

我的控制器

```
public ActionResult New(){
   return View();
}

[HttpPOst]

public ActionResult New(FormCOllection collection){
   try{
    Profile profile = new Profile();
    TryupdateModel(profile);
    context.Profile.Add(profile);
    context.SaveChanges();
   }
catch(Exception ex)
{
}
   return View();
} 
```

所以我的困境是，我不确定是否：

1.  我应该将它发布到“新建”操作，然后在其中进行搜索，如果存在记录，我应该返回一个 json 格式的数据，以便我可以使用 jquery 无缝显示它，否则保存它然后重定向到同一页面。

2.  或者，我是否应该将整个内容指向将处理搜索的 json 操作，如果找到某些内容，则返回到同一页面，否则保存然后返回。

我对后者的问题是，它需要一个 GET 操作，如果我有一个 get 操作，我不确定这是一个好习惯，然后是控制器中的一个单独的 JSon 类型方法。那有意义吗？

或者也许我只需要有人给我指出另一种解决方案

任何帮助表示赞赏！非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:04:53.730

为什么不使用[jQuery Autocomplete 插件](http://jqueryui.com/demos/autocomplete/)将现有项目填充为用户类型。因此，如果用户键入现有的自动完成将显示选项并且用户将选择它。现在，当用户从现有的（从自动完成的建议中）中选择时，您知道您不需要将其另存为新的。

这对用户来说是更少的工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:37:12.447

我只会做前者。如果记录存在，则返回 Json，否则返回重定向。我认为在同一方法中返回一种以上的 ActionResult 没有任何问题。也许外面的其他人认为这很草率，但我不这么认为。

我在很多项目中都看到过这样的事情：

```
[HttpPost]
public ActionResult MethodName()
{
    ....
    if(error)
        return Json(new { Error = "Error!" });
    else
        return RedirectToAction("NextStep");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:00:20.157

1b怎么样？总是重定向，请检查服务器端，如果存在类似的重定向到显示类似的页面，否则重定向到保存后的页面。通过这种方式，您可以将一种场景与另一种场景解耦，更易于维护。唯一的缺点是额外的往返

# jquery - jquery 中转动画和 .stop() fx 队列

> ID：11892918
> 
> 赞同：5
> 
> 时间：2012-08-09T22:29:04.843
> 
> 标签：jquery, animation, transition

首先，jQuery Transit 摇滚。如果您还没有看过它，请查看[http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)并感到惊讶！

但一个问题是，虽然它声称使用 jQuery 的效果队列，而且似乎在大多数情况下，但我无法使用 jQuery 的`.stop()`方法来使用它。

我在这里发布了一个小提琴：http: [//jsfiddle.net/nicholasstephan/sTpa7/](http://jsfiddle.net/nicholasstephan/sTpa7/)

如果单击动画按钮，`.animate()`则使用标准 jQuery 将框慢慢向右移动。如您所料，点击停止将停止动画。点击重置也会停止动画并将盒子放回它开始的地方。

如果您单击转换，它应该做完全相同的事情......但它没有......

这里发生了什么？有人知道解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T08:42:54.917

这是一个可能有效的解决方案。

尝试创建一个新的转换函数来排队一个额外的回调。这个回调可以在动画被 stop 出队后进行清理。清除和跳过指令但是不会从旧的停止功能接收到。但是我们可以为此创建一个新的停止函数。这只是在浏览器中输入的，完全未经测试

```
(function($){
    $.fn.stopableTransition = function (...){
        var skip = false
        var clear = false
        this.handle("stopTransition", function(doclear, doskip){
            skip = doskip; clear = doclear;
        })
        this.transition(...)
        this.queue(function(){
            if(skip){
               //todo: ensure animation is removed from css
               //todo: move object to where the animation would have finished
            } 
            else
            {
               //todo: ensure animation is removed from css
               //todo: make sure object stays at its current position
            }

            if(clear){
                skip = false
                clear = false
                $(this).clearQueue()
            }  
            else 
            { 
                skip = false
                clear = false
                $(this).dequeue()
            }

        })
    }
    $.fn.stopTransition = function (clear, skip){
        clear = (typeof(clear) === 'undefined') ? false : clear;
        skip = (typeof(skip) === 'undefined') ? false : skip;
        this.triggerHandler("stopTransition", [clear, skip])
        this.dequeue();
    }
})(jQuery) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T19:20:43.820

正如@Jason More 所说，我在那个线程中查找，我发现存在一个[fork](https://github.com/tblasv/jquery.transit)并且有一个名为的函数`transitionStop()`（并且为了清除所有剩余的动画，你还应该调用`clearQueue()`），但考虑到这个 fork 有它的事实是最后一个大约一年前提交，而原始 TransitJS 的最后一次提交大约是 3 个月前，也许你会错过使用该 fork 的一些功能。
但对于我需要的，这是最快的方法。

# variables - 使用变量替换批处理文件子字符串

> ID：11892922
> 
> 赞同：9
> 
> 时间：2012-08-09T22:29:10.330
> 
> 标签：variables, batch-file, substring, replace

使用变量时，我无法让此批处理文件执行子字符串替换。具体当 !original! 指定变量；如果它是一个文字字符串，它可以正常工作。但是，这不适用于我的使用。

```
setlocal ENABLEDELAYEDEXPANSION
set original=chair
set replacement=table
set str="jump over the chair"
set str=%str:!original!=!replacement!% 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-10T01:19:51.540

如果您使用`call`，您可以在不需要 的情况下执行此操作`setlocal enabledelayedexpansion`，如下所示：

`call set str=%%str:%original%=%replacement%%%`

注意：这首先被解析为`call set str=%str:chair=table%`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T23:50:08.387

你的扩张顺序颠倒了。

正常（百分比）扩展发生在解析时（第 1 次）
延迟（感叹号）扩展发生在运行时（第 2 次）

必须先扩展搜索和替换项，然后才能进行搜索和替换。所以你要：

```
set str=!str:%original%=%replacement%! 
```

# php - 在 CodeIgniter 中将数据传递给语言文件

> ID：11892925
> 
> 赞同：1
> 
> 时间：2012-08-09T22:29:16.637
> 
> 标签：php, internationalization, codeigniter-2

我正在使用 CodeIgniter 的库来更改网站上的语言。这就是我从控制器加载语言文件的方式：

```
$this->load->helper('language');
$this->load->helper('url');
$this->lang->load('custom','english'); 
```

但是我需要将一些数据从数据库传递到该语言文件（custom_lang.php），但我不知道如何？请指教...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-31T17:35:35.483

这是针对**Codeigniter 2.0**的。

您需要动态创建一个语言文件 (custom_lang.php)（例如，每当您更新数据库的语言内容时）

**一：数据库布局**

创建一个包含、、 、`lang_token`列的表，并像这样填充其字段：`id``category``description``lang``token`

```
 CREATE TABLE IF NOT EXISTS `lang_token` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `category` text NOT NULL,
      `description` text NOT NULL,
      `lang` text NOT NULL,
      `token` text NOT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

    INSERT INTO `lang_token` (`id`, `category`, `description`, `lang`, `token`) 
    VALUES
      (1, 'error', 'noMail', 'english', 'You must submit a valid email address'),
      (2, 'error', 'noUser', 'english', 'You must submit a username'); 
```

**第二：关于CodeIgniter语言文件**

CodeIgniter 将首先在您的应用程序/语言目录中查找，每种语言都应存储在其自己的文件夹中。确保您创建了英语或德语等子目录，例如`application/language/english`

**第三：动态创建语言文件的控制器功能**

关于 Codeigniter 语言文件：最好为给定文件中的所有消息使用公共前缀（类别），以避免与其他文件中类似命名的项目发生冲突。结构如下：`$lang['category_description'] = “token”;`

```
 function updatelangfile($my_lang){
        $this->db2->where('lang',$my_lang);
        $query=$this->db2->get('lang_token');

        $lang=array();
        $langstr="<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
                /**
                *
                * Created:  2014-05-31 by Vickel
                *
                * Description:  ".$my_lang." language file for general views
                *
                */"."\n\n\n";

        foreach ($query->result() as $row){
            //$lang['error_csrf'] = 'This form post did not pass our security checks.';
            $langstr.= "\$lang['".$row->category."_".$row->description."'] = \"$row->token\";"."\n";
        }
        write_file('./application/language/'.$my_lang.'/custom_lang.php', $langstr);

    } 
```

**最后注意事项：**

1.  每当您更改数据库时，都会调用该函数`updatelangfile(‘english’)`
2.  不要忘记在 updatelangfile() 所在的控制器的构造函数中加载*文件助手*和*语言类：*

    ```
    function __construct(){
        parent::__construct();
        $this->load->helper('file');
        $this->lang->load('custom', 'english');
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:19:42.707

我猜您想处理翻译文本中的变量，例如“您有 XYZ 新消息”？

简单地在翻译文本中放置一些特定的标签，然后使用 str_replace 用所需的值填充它，比如“你有 %num_messages% 个新消息”。

在控制器中使用这个：

```
$parsed_text = str_replace ("%num_messages%", $msg_count, $input_translation_text); 
```

然后将 $parsed_text 分配给模板/视图。

# php - php 5.3 上的 php_pdo_informix

> ID：11892926
> 
> 赞同：4
> 
> 时间：2012-08-09T22:29:17.930
> 
> 标签：php, pdo, informix

我有一个广泛使用 PDO 的 php 应用程序，并且有一个具有 informix 的新客户端。以前我们使用 php 5.2 没有任何问题，但切换到 PHP 5.3 是不可避免的，所以：

有人找到了在 php5.3 上使用 php_pdo_informix 的方法，还是它完全过时了，我必须找到另一种选择？

这对于我们的测试环境 (CentOS) 是必需的，但开发人员目前在 Windows 上工作，我们有类似的问题。有一个 php_pdo_informix.dll 但它是针对 php5.2 编译的并且拒绝在 php5.3 上加载

有人有php5.3的dll吗？

谢谢

我已经尝试过：

```
$ sudo pecl install pdo_informix
pecl.php.net is using a unsupported protocol - This should never happen.
pecl/PDO_INFORMIX requires package "pear/PDO"
No valid packages found
install failed 
```

或者

```
pecl install --alldeps pdo_informix 
```

表明它依赖于 pear/PDO，但在 5.3 中已被弃用

并且使用显式版本 1.2.6 、 1.2.7 无济于事

即使我尝试安装 pear/PDO，它也会失败并出现许多错误，这是预期的，因为 PHP 中有许多 API 更改会中断。

尝试预先安装 pdo 时出现这种错误：（省略了某些行）

```
$ sudo pecl install  pdo
WARNING: "pecl/PDO" is deprecated in favor of "channel://http://svn.php.net/viewvc/php/php-src/trunk/ext/pdo//ext/PDO"
downloading PDO-1.0.3.tgz ...
Starting to download PDO-1.0.3.tgz (52,613 bytes)
.............done: 52,613 bytes
12 source files, building
<...more lines ...>
/tmp/pear/temp/PDO/pdo_dbh.c: In function 'pdo_stmt_instantiate':
/tmp/pear/temp/PDO/pdo_dbh.c:410:8: error: 'zval' has no member named 'refcount'
/tmp/pear/temp/PDO/pdo_dbh.c:411:8: error: 'zval' has no member named 'is_ref'
/tmp/pear/temp/PDO/pdo_dbh.c: In function 'pdo_stmt_construct':
/tmp/pear/temp/PDO/pdo_dbh.c:435:6: error: 'zend_fcall_info' has no member named 'object_pp'
/tmp/pear/temp/PDO/pdo_dbh.c:458:6: error: 'zend_fcall_info_cache' has no member named 'object_pp'
/tmp/pear/temp/PDO/pdo_dbh.c: In function 'zim_PDO_setAttribute':
/tmp/pear/temp/PDO/pdo_dbh.c:752:12: error: 'zval' has no member named 'refcount'
/tmp/pear/temp/PDO/pdo_dbh.c: In function 'zim_PDO_getAttribute':
/tmp/pear/temp/PDO/pdo_dbh.c:818:28: error: 'zval' has no member named 'refcount'
/tmp/pear/temp/PDO/pdo_dbh.c: In function 'pdo_hash_methods':
/tmp/pear/temp/PDO/pdo_dbh.c:1122:24: warning: assignment discards 'const' qualifier from pointer target type [enabled by default]
/tmp/pear/temp/PDO/pdo_dbh.c:1126:20: warning: assignment discards 'const' qualifier from pointer target type [enabled by default]
make: *** [pdo_dbh.lo] Error 1
ERROR: `make' failed 
```

如果我尝试安装特定的 pdo_informix 版本，我会得到以下输出：

```
pecl install --alldeps  http://pecl.php.net/get/PDO_INFORMIX-1.2.6.tgz 
downloading PDO_INFORMIX-1.2.6.tgz ...
Starting to download PDO_INFORMIX-1.2.6.tgz (65,676 bytes)
.................done: 65,676 bytes
WARNING: "pecl/PDO" is deprecated in favor of "channel://http://svn.php.net/viewvc/php/php-  src/trunk/ext/pdo//ext/PDO"
downloading PDO-1.0.3.tgz ...
Starting to download PDO-1.0.3.tgz (52,613 bytes)
...done: 52,613 bytes
12 source files, building
running: phpize
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
<more lines>
<same output as above> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:47:14.700

PDO是核心的一部分；无需从 pecl 安装它。

可能您必须安装**linux 发行版**的 php-pdo-informix 包，例如 via`apt-get`或`yum`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:43:46.227

您需要编译模块。官方链接：

[安装、配置和测试 Linux、Apache、Informix 和 PHP 服务器的分步操作指南](http://www.ibm.com/developerworks/data/library/techarticle/dm-0606bombardier/)

原始答案：@user1998717

# java - 在 JBossWs Web 服务中发送日期时的日期转换

> ID：11892927
> 
> 赞同：0
> 
> 时间：2012-08-09T22:29:36.043
> 
> 标签：java, web-services, date

我有一个小型测试设置，其中我的服务器（托管 web 服务）位于 BST 时区，客户端（基于简单 java 的 web 服务客户端）位于 EDT。当 Date 对象（更大的复杂对象的一部分）从 Client 发送到 Server 时，反之亦然，日期正在调整。例如

服务器上的 Thu Aug 9 23:24:31 BST 2012 在客户端将被视为 Thu Aug 9 18:24:37 EDT 2012。我明白这是正确和好的。

在我提到的应用程序中，客户端和服务器都不知道相反的时区。因此，如果没有相应的时区信息，我该如何保留 Time 值。

即当从服务器传输 Aug 9 23:24:31 2012 时，客户端也应该得到 Aug 9 23:24:31 2012 作为值。

我希望我说得通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:06:30.413

大约一个月前，我刚刚遇到了同样的问题。它让我发疯，因为它会因为 UTC 时间而翻转日期。客户端只想要返回 yyyy/MM/dd，但 JBoss 想要返回整个时间戳。

我上周发现了这个，它解决了这个问题。这是整个[示例的链接。](https://blogs.oracle.com/CoreJavaTechTips/entry/exchanging_data_with_xml_and)

```
import java.util.Date;
import java.text.SimpleDateFormat;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class DateAdapter extends XmlAdapter<String, Date> {

    // the desired format
    private String pattern = "MM/dd/yyyy";

    public String marshal(Date date) throws Exception {
        return new SimpleDateFormat(pattern).format(date);
    }

    public Date unmarshal(String dateString) throws Exception {
        return new SimpleDateFormat(pattern).parse(dateString);
    } 
```

# objective-c - CoreData 无法完成故障

> ID：11892928
> 
> 赞同：34
> 
> 时间：2012-08-09T22:29:36.653
> 
> 标签：objective-c, ios, core-data, nsmanagedobject, nsmanagedobjectcontext

我有一个非常烦人的问题，我似乎无法解决。

当我发送一条保存到核心数据的消息时，我有一个视图，完成后它会向数据库询问随机消息（句子）并将其保存到数据库中的另一行。

如果我对最后一部分进行硬编码，而不从数据库中获取数据，它工作得很好而且很花哨，但是一旦我从数据库中获取随机行，它就会发疯。

在我的 AppDelegate.m 中：

```
- (void)save {
    NSAssert(self.context != nil, @"Not initialized");
    NSError *error = nil;
    BOOL failed = [self.context hasChanges] && ![self.context save:&error];
    NSAssert1(!failed,@"Save failed %@",[error userInfo]);
}

- (NSString*)selectRandomSentence
{
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Sentences" inManagedObjectContext:self.managedObjectContext];
    [request setEntity:entity];

    NSError *error = nil;
    NSUInteger count = [self.context countForFetchRequest:request error:&error];

    NSUInteger offset = count - (arc4random() % count);
    [request setFetchOffset:offset];
    [request setFetchLimit:1];

    NSArray *sentenceArray = [self.context executeFetchRequest:request error:&error];

    [request release];

    return [[sentenceArray objectAtIndex:0] sentence];
}

- (NSManagedObjectContext *)context {

    if (_managedObjectContext != nil)
        return _managedObjectContext;

    NSPersistentStoreCoordinator *coordinator = [self coordinator];
    if (coordinator != nil) {
        _managedObjectContext = [[NSManagedObjectContext alloc] init];
        [_managedObjectContext setPersistentStoreCoordinator:coordinator];
    }

    return _managedObjectContext;
} 
```

在我的 ChatController.m 中：

```
- (void)didRecieveMessage:(NSString *)message
{
    [self addMessage:message fromMe:NO];
}

#pragma mark -
#pragma mark SendControllerDelegate

- (void)didSendMessage:(NSString*)text {
    [self addMessage:text fromMe:YES];
}

#pragma mark -
#pragma mark Private methods

- (void)responseReceived:(NSString*)response {
    [self addMessage:response fromMe:NO];
}

- (void)addMessage:(NSString*)text fromMe:(BOOL)fromMe {
    NSAssert(self.repository != nil, @"Not initialized");
    Message *msg = [self.repository messageForBuddy:self.buddy];
    msg.text = text;
    msg.fromMe = fromMe;

    if (fromMe)
    {
        [self.bot talkWithBot:text];
    }

    [self.repository asyncSave];

    [self.tableView reloadData];
    [self.tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:[self.buddy.messages count] - 1] atScrollPosition:UITableViewScrollPositionBottom animated:YES];
} 
```

在我的 OfflineBot.m 中：

```
- (void)talkWithBot:(NSString *)textFromMe
{
    AppDelegate *delegate = [[UIApplication sharedApplication] delegate];
    [self didRecieveMessage:[delegate selectRandomSentence]];
}

- (void)didRecieveMessage:(NSString *)message
{
    if ([self.delegate respondsToSelector:@selector(didRecieveMessage:)])
        [self.delegate didRecieveMessage:message];
} 
```

存储库.m

```
- (Message*)messageForBuddy:(Buddy*)buddy {
    Message *msg = [self.delegate entityForName:@"Message"];
    msg.source = buddy;
    [self.delegate.managedObjectContext refreshObject:buddy mergeChanges:YES];
    return msg;
}

- (void)asyncSave {
    [self.delegate save];
} 
```

错误：

> 2012-08-10 00:28:20.526 聊天 [13170:c07] *** -[AppDelegate 保存] 中的断言失败，/Users/paulp/Desktop/TestTask/Classes/AppDelegate.m:28 2012-08-10 00:28 :20.527 Chat[13170:c07] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“保存失败 {type = immutable dict, count = 2, entries => 1 : {contents = "NSAffectedObjectsErrorKey"} = (" (实体：句子；id：0x6b8bf10；数据：)") 2：{contents = "NSUnderlyingException"} = CoreData 无法满足 '0x6b8bf10' 的错误}

我究竟做错了什么？

***更新*** 我指出了这一行的错误：

```
NSArray *sentenceArray = [self.context executeFetchRequest:request error:&error]; 
```

当我执行该行时，我得到了错误......那是在获取数据时。但是，将新数据保存到 Messages 实体时似乎出现了错误。随机句子是从句子中获取的。

在我将 asyncSave 方法更改为直接保存（因此不使用新线程）后，它会保存第一次聊天，但之后什么也没有。它死了。

***更新*** 这一切似乎都在我的`didFinishLaunchingWithOptions`：

```
[self.context setRetainsRegisteredObjects:YES]; 
```

我了解 CodeData 对象模型上下文不会释放其对象，这似乎是添加和保存之间的问题。但为什么？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-15T23:07:13.670

唔。您是否按照[本指南](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreData/Concurrency.html)正确实施并发？您看到的问题是跨多个线程使用核心数据时的常见问题。对象在您的“背景上下文”中被删除，而另一个上下文正在访问它。在删除之后但在保存之前调用`[context processPendingChanges]`您的背景上下文可能会有所帮助。

还有一个关于优化核心数据性能的 WWDC 2010 会议 (137)，其中涉及到一些删除。

当您执行 fetch 时，Core Data 返回与您提供的谓词匹配的对象集合。这些对象实际上还没有设置它们的属性值。当您访问一个属性时，Core Data 会返回存储区以“触发故障” - 使用存储区中的数据填充该属性。“Could not fulfill a fault...”异常发生在 Core Data 去存储区获取对象的属性值，但该对象在持久存储区中不存在时。托管对象上下文*认为*它应该存在，这就是它可以尝试错误的原因——这就是问题所在。导致抛出异常的上下文不知道该对象已被其他东西（如另一个上下文）从存储中删除。

请注意，上面的并发指南现在已经过时了，您应该使用父子上下文和私有队列并发，而不是旧的线程限制模型。由于许多原因，父子上下文不太可能遇到“无法完成错误......”。请提交文档错误或使用反馈表来请求更新并发指南。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T13:12:56.167

*在不同的行中“**保存*”核心数据对象在概念上是不可能的。请记住，Core Data 是一个对象图而不是数据库。

 *如果您想“重新定位”您的句子，最好的方法是销毁它并重新创建它。如果要保留旧实例，只需创建一个新实例，然后从现有实例中填写属性。

为了破坏，使用

```
[self.context deleteObject:sentenceObject]; 
```

为了重新创建，使用

```
Sentence *newSentence = [NSEntityDescription insertNewObjectForEntityForName:
  "Sentences" inManagedObjectContext:self.context];
newSentence.sentence = sentenceObject.sentence;
// fill in other properties, then
[self.context save:error]; 
```

如果您想阅读此内容，请查看“Core Data Programming Guide”的“Using Managed Objects”部分中的“ [Copying and Copy and Paste ”。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdUsingMOs.html#//apple_ref/doc/uid/TP40001803-213600)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T03:39:55.597

检查核心数据机制。“故障减少了您的应用程序消耗的内存量。故障是表示尚未完全实现的托管对象的占位符对象，或表示关系的集合对象：”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T04:23:35.857

发生这种情况是因为您在完成获取第一次调用的所有关系之前将“随机消息”添加到新行。

您可以在第一次调用中添加预取以避免延迟加载，我相信问题将得到解决。

这是我们可以为请求进行预取的方法：

```
[request setRelationshipKeyPathsForPrefetching:[NSArray arrayWithObjects:@"whatEverOfYourWillNumberOne",@"whatEverOfYourWillNumberTwo", nil]]; 
```

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-02T08:20:25.010

我通过将 NSFetchedResultsController 的“cacheName”字符串更改为 nil 来修复错误。

NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName: **~~@"Root"~~ nil** ];*

# php - 使用 Jquery 并加载到 div 中的复选框中的多个复选框

> ID：11892930
> 
> 赞同：0
> 
> 时间：2012-08-09T22:29:53.530
> 
> 标签：php, jquery, checkbox

我有一些复选框，我想允许多项选择，只有在每次选择后，DIV 才会加载内容。

这是我来自 PHP 的复选框，而：

```
<input type='checkbox' class='regularCheckbox' name='color[]' value='".$colorBoxes[color_base1]."' /> 
```

这是我当前的 Jquery，它只允许我 1 个复选框：

```
jQuery(document).ready(function($) {
    $("input:checkbox").change(function() {
        if($(this).is(':checked')) 
            {
        $(".loadingItems").fadeIn(300); //fade in on change
        var color = $(this).val();
            $(".indexMain").load('indexMain.php?color='+color,function(){
            $(".indexMain").fadeIn(slow);

            })
            $(".loadingItems").fadeOut(300); //remove when load is complete
        }
        else 
            {
$(".indexMain").load('indexMain.php');
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:35:46.540

在您的情况下，您可能会更好地使用`delegate`而不是`change`：

`$(document).delegate("input:checkbox", "change", function(evt) { //... });`

# android - 下载时我应该使用多少个并发网络连接？

> ID：11892934
> 
> 赞同：3
> 
> 时间：2012-08-09T22:29:55.767
> 
> 标签：android, concurrency, download, inputstream

我想在用户等待时将可能包含数百张图像的列表下载到 SD 卡。我想获得最大的吞吐量，但仍然是一个负责任的应用程序。我将保存下载的数据，因为它填充了`InputStream`此[答案](https://stackoverflow.com/a/3296950/403455)中的内容。

我应该记住哪些注意事项？有数量限制`InputStreams`吗？添加更多并发性是否会或多或少地有效利用无线电功率（大部分数据都在下游）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:46:16.520

我怀疑解决这个问题的最佳方法是在运行时测量您的吞吐量并调整并发下载的数量以获得最高的吞吐量。

不同位置的不同提供商的不同网络连接类型（wifi、lte、3g 等）将决定有多少连接是最佳的。

所以我会从一个连接开始，测量它的吞吐量，然后创建另一个连接并再次测量。如果您获得更多吞吐量，请继续添加连接，直到您看到下降。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:43:32.843

查看 AT&T 网站上的一些文章，了解如何在编写大量使用网络的应用程序时提高效率。[http://developer.att.com/developer/forward.jsp?passedItemId=7200042](http://developer.att.com/developer/forward.jsp?passedItemId=7200042)

他们的 ARO 工具还将帮助您确保您的应用程序有效利用网络，并将应用程序性能和电池使用量降至最低。[http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312](http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312)

最近发布的 Android SDK 附带的 Android traceview 工具也将帮助您[http://developer.android.com/tools/debugging/debugging-tracing.html](http://developer.android.com/tools/debugging/debugging-tracing.html)

# c++ - Qt远程数据库与MySql？

> ID：11892940
> 
> 赞同：0
> 
> 时间：2012-08-09T22:30:15.447
> 
> 标签：c++, mysql, sql, qt

添加远程 MySql 数据库连接的最佳方法是什么。

我尝试使用 QODBC 驱动程序没有运气，我相信另一个问题可能是这是一个共享服务器，但相信我[根据我的主机有正确的设置](https://my.justhost.com/cgi/help/6)。

这是我目前的尝试：

```
bool CardSQL::connectSQL(void){
     db = QSqlDatabase::addDatabase("QODBC"); 
     db.setHostName("173.254.28.127");// Tried www.themindspot.com & ip with http:// and https:// 
     db.setPort(3306);
     db.setDatabaseName("dbName");
     db.setUserName("dbUser");
     db.setPassword("dbPass");
     bool ok = db.open();
     return ok;
} 
```

我在 if 语句中检查 'ok' 并且它不断返回失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T22:54:09.137

我的猜测是，您的 justhost.com 共享主机上的 MySQL 服务器未在公共网络接口上运行，只能通过 localhost 访问（这意味着您必须在服务器上本地运行应用程序才能连接）。如果有一个选项可以这样做，它可能目前没有这样做。

一些 cpanel 配置具有“远程数据库访问主机”选项，可让您指定允许连接到 MySQL 数据库的特定外部域。

此外，对于 mysql，您可能会使用`QMYSQL`数据库驱动程序。

# ruby-on-rails - 独角兽仍然指向一个旧的发布文件夹

> ID：11892946
> 
> 赞同：1
> 
> 时间：2012-08-09T22:30:44.087
> 
> 标签：ruby-on-rails, ruby, unix, capistrano, unicorn

我拥有一个使用 Unicorn 作为 Web 服务器的 Rails 应用程序。

我通过 Capistrano 部署它。

这是我的`deploy.rb`文件：

```
require "bundler/capistrano"

server "91.121.11.100", :web, :app, :db, primary: true

set :application, "myapp"
set :user, "deployer"
set :deploy_to, "/home/#{user}/apps/#{application}"
#set :deploy_via, :remote_cache
set :use_sudo, false

set :scm, "git"
set :repository, "git@github.com:therepository/#{application}.git"
set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

#after "deploy", "deploy:cleanup" # keep only the last 5 releases

namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, roles: :app, except: {no_release: true} do
      run "/etc/init.d/unicorn_#{application} #{command}"
    end
  end

  task :setup_config, roles: :app do
    sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}"
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"
    run "mkdir -p #{shared_path}/config"
    put File.read("config/database.yml"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."
  end
  after "deploy:setup", "deploy:setup_config"

  task :symlink_config, roles: :app do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  end
  after "deploy:finalize_update", "deploy:symlink_config"

  desc "Make sure local git is in sync with remote."
  task :check_revision, roles: :web do
    unless `git rev-parse HEAD` == `git rev-parse origin/master`
      puts "WARNING: HEAD is not the same as origin/master"
      puts "Run `git push` to sync changes."
      exit
    end
  end
  before "deploy", "deploy:check_revision"
end 
```

部署顺利，服务器上的当前文件夹包含预期的更新文件。

但是，发生了一些我不明白的非常奇怪的事情：

我在我的过程开始时有这条线：

```
logger = Logger.new "#{Rails.root}/log/web_agents.log" 
```

并且仍然出现此错误：

```
No such file or directory - /home/deployer/apps/myapp/releases/20120612122610/log/web_agents.log 
```

为什么是20120612122610？？？这是一个旧版本，我什至删除了。

Unicorn 为什么不指向最后一个版本？

为了测试，我什至将 Rails.root 替换为当前路径的硬编码路径。

仍然有同样的错误......我已经杀死，停止，强制停止独角兽......没关系......

任何的想法 ？

我确切地说，我确定该进程是使用“当前”文件夹中的最后更新文件启动的，因为当我删除一个时，进程无法工作并且出现许多错误。

**更新**

这是我的`config/unicorn.rb`文件：

```
root = "/home/deployer/apps/myapp/current"
working_directory root
pid "#{root}/tmp/pids/unicorn.pid"
stderr_path "#{root}/log/unicorn.log"
stdout_path "#{root}/log/unicorn.log"

listen "/tmp/unicorn.myapp.sock"
worker_processes 2
timeout 30 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:13:32.007

我发现自己的问题来自哪里。

事实上，Unicorn 和 Sidekiq 之间存在故障排除。

事实上，正如我在上面的一条评论中所说，流程是由 Sidekiq 启动的。

首先，在 deploy.rb 中，必须有这一行：

```
require 'sidekiq/capistrano' 
```

这允许部署过程优雅地重新启动 Sidekiq。见那里： [https ://github.com/mperham/sidekiq/wiki/Deployment](https://github.com/mperham/sidekiq/wiki/Deployment)

其次，在 unicorn.rb 中，必须有这样的块：

```
after_fork do |server, worker|
  Sidekiq.configure_client do |config|
    config.redis = { :size => 1 }
  end
end 
```

有关它的更多信息，请参见：

[https://github.com/mperham/sidekiq/wiki/Problems-and-Troubleshooting](https://github.com/mperham/sidekiq/wiki/Problems-and-Troubleshooting)

现在，没有更多奇怪的问题了:)

*一个可能的解释：*

可能 Sidekiq 管理一些缓存，以防止它基于上一个版本......这就是为什么重新启动以及干净地启动 Unicorn 和 Sidekiq 就足够了。

# javascript - 如何使用 jquery、声音/静音按钮更改图像 src onclick

> ID：11892948
> 
> 赞同：-4
> 
> 时间：2012-08-09T22:30:54.033
> 
> 标签：javascript, jquery

嘿伙计们，我真的需要一些帮助！因此，当您单击图像时，我需要将图像更改为另一个图像。本质上它是一个声音按钮，所以当它点击它时会显示静音。

到目前为止，我完全感到困惑，不知道从哪里开始我知道我可以使用 Jquery/Javascript。请帮我！！这是我的代码：

```
 <div id= "Mute">
    <img class="BeforeClick"src="images/BeforeClickMute.png" width="140" height="126"/>
    <img class="AfterClick"src="images/AfterClickMute.png" width="140" height="126" />
    <p>Mute</p>
    </div> 
```

这也是我的CSS代码

```
 .BeforeClick {
position:absolute;
z-index:9;
left:245px;
top:340px;  
}

    .AfterClick {
position:absolute;
z-index:8;
left:245px;
top:340px;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:35:25.257

```
$(function(){ /* on document load */
    $('img').click(function(){ /* click handler for images */
        if($(this).attr('src') === 'images/BeforeClickMute.png'){ /* check source */
            $(this).attr('src','images/AfterClickMute.png'); /* change source */
        }
        else{
            $(this).attr('src','images/BeforeClickMute.png'); /* change source */
        }
    });
}); 
```

不过，如果您只是复制此代码，我敢打赌，您会在整个文档中得到一些意想不到的结果。了解如何将此事件限制为您希望定位的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T02:54:13.033

```
<a href="index.html">
<img src="images/play.png" onmouseover="this.src='images/playdiffcolor.png'" onclick="this.src='images/pause.png'" onmouseout="this.src='images/pause.png'" border="0" />
</a> 
```

我就是这样做的——效果很好。

我希望这会有所帮助。我现在只是想学习如何播放/暂停/停止音频文件......

# search-engine - Pythonanywhere 上的重复搜索引擎结果

> ID：11892953
> 
> 赞同：1
> 
> 时间：2012-08-09T22:31:23.707
> 
> 标签：search-engine, sitemap, pythonanywhere

我目前正在为我的 Pythonanywhere 应用程序使用我自己的域名。原始的 username.pythonanywhere.com 仍然提供与 www.my-domain.com 相同的内容，我想知道是否会有重复的搜索引擎结果。

我的 sitemap.xml 文件是为 www.my-domain.com 编写的，以防万一发生任何变化。我只想抓取 www.my-domain 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:20:57.767

目前，这当然是可能的。但只有在有人链接到您的 .pythonanywhere.com 时才会真正发生。我们目前正在进行重大升级，这将为每个 webapp 提供自己的 wsgi 服务器，并且这种情况发生的可能性将完全消失

# macos - 在 OS X 10.7 上融合不起作用？

> ID：11892957
> 
> 赞同：9
> 
> 时间：2012-08-09T22:31:43.703
> 
> 标签：macos, installation, diff, port, meld

我正在使用端口在 Mac OS 上安装 meld。

它已下载所有依赖项并告诉一切正常：

```
Staging meld into destroot
Installing meld @1.5.3_0
Activating meld @1.5.3_0
Cleaning meld
Updating database of binaries: 100.0%
Scanning binaries for linking errors: 100.0%
No broken files found. 
```

但是当我运行时：

```
[18:28:24]~$ meld 
```

回溯（最近一次通话最后）：

```
File "/opt/local/bin/meld", line 75, in <module>

locale.setlocale(locale.LC_ALL,'')

File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/locale.py", line 539, in setlocale

return _setlocale(category, locale)

locale.Error: unsupported locale setting 
```

问题是什么以及如何处理？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-15T02:09:11.710

环境

```
export LANG=C; export LC_ALL=C 
```

解决了问题并让融合运行。

# java - 在 Java 中调整这个正则表达式

> ID：11892959
> 
> 赞同：0
> 
> 时间：2012-08-09T22:31:49.960
> 
> 标签：java, regex

```
"^(?:(2\d\d\d)\s+)?(?:Comm\. Rep\.\s+)?(?:CONG\s+)?(\S+)\s+(\S+)\s+(?:No\.\s+)?(\S+)(?:\s+\(.*?\))?$" 
```

目前这能够解析一个字符串，如

```
2009 IA H.B. 184 (NS) 
```

我怎样才能让它解析像这样的文本

```
2009 IA HEART RATE 184 (NS) 
```

我正在寻找一个可以解析间隔单词 HEART RATE 的调整。

编辑：只要第三个单词没有间隔，它似乎就可以工作。例如，它适用于 2009 IA REG 184 (NS) ... 但是一旦第三个单词实际上是由空格组成的，它就会像 HEART RATE 一样失控。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:08:05.103

我将假设您想要所有这些空格分隔的单词，这现在不起作用，因为您试图`HEART RATE`通过阅读直到找到空格来阅读“第三个单词”（第二个正则表达式捕获组） （第二个`(\S+)`）。

为了解决这个问题，我假设你“第三个单词”是**所有空格分隔的单词，直到你点击一个数字或一个以开头的单词`No.`**（告诉我这个假设是否错误！）。这是`((?:\S|\s(?!\d|No\.))+)`解决方案中的。

这是我的解决方案：

```
"^(?:2\d{3}\s+)?(?:Comm\. Rep\.\s+)?(?:CONG\s+)?(\S+)\s+((?:\S|\s(?!\d|No\.))+)\s+(?:No\.\s+)?(\S+)(?:\s+\(.*?\))?$" 
```

当我测试它时

> 2009 年 IA HB 184 (NS)

它（仍然）发现第三个词是`H.B.`

当我测试它时

> 2009 IA 心率 184 (NS)

它发现第三个词是`HEART RATE`

当我测试它时

> 2009 IA 心率无 184 (NS)

它发现第三个词是`HEART RATE None`

当我测试它时

> 2009 年 IA 心率第 184 号 (NS)

它发现第三个词是`HEART RATE`

看起来挺好的？

PS [gskinner](http://gskinner.com/RegExr/)很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:46:04.850

让我们把表达式分解成几个部分：

1.  `^`
    从一行的开头开始。

2.  `(?:(2\d\d\d)\s+)?`
    如果出现年份，则将其捕获在第 1 组中（第 0 组是整个事件）。如果没有给出年份也没关系。

3.  `(?:Comm\. Rep\.\s+)?`
    接受字符串“Comm. Rep.” 和一个或多个空白字符，但不捕获它。如果它不存在也没关系。

4.  `(?:CONG\s+)?`
    接受字符串“CONG”和一个或多个空格字符，但不要捕获它。如果它不存在也没关系。

5.  `(\S+)\s+(\S+)\s+`
    必须有两个至少一个字符长度的非空白字符块，每个字符后跟至少一个空格。捕获第 2 组和第 3 组中的块。

6.  `(?:No\.\s+)?`
    接受字符串“否”。和一个或多个空白字符，但不捕获它。如果它不存在也没关系。

7.  `(\S+)`
    必须存在另一个至少有一个非空白字符的块。在第 4 组中捕获它。

8.  `(?:\s+\(.*?\))?`
    接受至少一个空格，然后是任何内容，只要它在括号内，但不要捕获它。如果它不存在也没关系。

9.  `$`
    然后该行必须结束。

以下是部分如何映射到当前匹配项（省略行首和行尾）：

```
2009 IA H.B. 184 (NS)
---- ------- --- ----
2    5       7   8 
```

您的问题在于表达式的第 5 部分，因为只接受两个“块”：

```
2009 IA HEART RATE 184 (NS)
---- ------------- --- ----
2    ???           7   8 
```

假设字符串“HEART RATE”也应该进入第三组，您需要将第 5 部分替换为：

`(\S+)\s+`
接受至少一个非空白字符块，后跟至少一个空白字符，并将其捕获到第 2 组（未更改）。

和

`(.+?)\s+`
接受任何内容的至少一个字符，后跟一个空格，并捕获除第 3 组中的最后一个空格之外的所有字符。

所以，这是你需要的整体表达：

```
^(?:(2\d\d\d)\s+)?(?:Comm\. Rep\.\s+)?(?:CONG\s+)?(\S+)\s+(.+?)\s+(?:No\.\s+)?(\S+)(?:\s+\(.*?\))?$ 
```

顺便说一句，我对[http://regexpal.com](http://regexpal.com)非常满意。

PS：Carl Walsh 的解决方案在性能方面更聪明，因为它不依赖于非贪婪（或懒惰）捕获。

# c - 如何释放从函数返回的指针？

> ID：11892962
> 
> 赞同：15
> 
> 时间：2012-08-09T22:32:12.110
> 
> 标签：c, memory, dynamic, malloc, free

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

char* f(void) {
  char *x;
  x = malloc(sizeof(char) * 4);
  strcpy(x, "abc");
  return(x);
}

int main(void) {
  char *a;
  a = f();
  printf("%s", a);
  free(a);
  return(0);
} 
```

函数中的变量是否`x`必须被释放？如果是这样，当我需要退货时怎么可能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T22:34:24.190

> 函数中的变量 x 是否必须被释放？

是的（有点，见我后来的评论）。每次调用都`malloc`需要稍后调用`free`。否则，您有泄漏。但请记住；您不是“free[ing] `x`”，而是在释放 x 所指的内存。

当您返回的*值*（地址）的`x`副本被制作并返回给调用者。 声明了自动存储期限。它所指的内存必须被释放。*`x``x`*

 *> 如果是这样，当我需要退货时怎么可能。

你的设计让调用者有责任释放内存。您已经在 main 中完成了此操作。当然，使用此方法需要您记录函数，以便代码的用户知道他们正在接收动态分配的内存地址。

更好的方法（IMO）是将缓冲区作为输入参数。现在很清楚谁负责管理这个内存（即调用者）。也许我什至不想动态分配它。有了这个设计，这是我的选择。

```
void f(char *buf, size_t buf_size) {
  strncpy(buf, "abc", buf_size - 1);
  buf[buf_size-1] = '\0';
} 
```

* * *

附带说明一下，您应该始终检查`malloc`. 它可能会失败，在这种情况下将返回一个空指针。此外，`sizeof(char)`保证符合`1`标准，因此您可以删除该位并说`malloc(n)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:33:52.057

是的，它应该由调用者释放。比如`free`在你的主要。

当您`x`在函数中返回时`f`，地址的副本将传回给调用者。呼叫者可以呼叫`free`该地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T22:35:33.530

是的，您需要释放，但是当您执行时它已经被释放`free(a);`（`main`因为在 line`a`中分配为 equal ）。`x``a = f();`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T22:39:42.820

`x`退出函数后被销毁。的值`x`是指向动态分配对象的地址。退出函数后对象仍然存在。

要释放动态对象，您必须将函数`x`返回的值传递`f`给`free`函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T22:39:48.227

当您调用`malloc`它时，它会分配内存并返回该内存块的初始地址。

在您的情况下，您将此地址返回给被调用者，现在被调用者 main 负责释放它。

释放内存块唯一需要的是初始地址，AFIK 操作系统负责分配/释放内存，它使用相当复杂的算法，但程序只需要跟踪初始内存地址。这个地址可以像任何其他整数值一样被存储或移动，因为在 32 位系统中它只是一个 int 值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T22:40:54.807

您的代码运行良好，您释放`a`了由 f 分配的字符串。*

# jquery - jQuery 动画代码在 Google Chrome 上不起作用，在 Firefox 上起作用

> ID：11892963
> 
> 赞同：0
> 
> 时间：2012-08-09T22:32:17.213
> 
> 标签：jquery, jquery-ui, firefox, google-chrome

好的，所以我有这段代码，它为表格元素的背景设置动画。

[JSFiddle 1](http://jsfiddle.net/n6mRm/2/)

HTML：

```
<table>
    <tr>
        <td id="foo2">Some Random Text</td>
    </tr>
</table> 
```

JS：

```
function doItOn(el) {    
    var backgroundColor = el.css("backgroundColor");
    el.css("backgroundColor", "yellow");
    el.animate({backgroundColor: backgroundColor}, 2000);
}

var table = $("<table><tr><td>Dynamic td</td></tr></table>");

doItOn($("#foo2"));
doItOn(table.find("tr"));

$("body").append(table); 
```

这适用于 Firefox，但不适用于 Chrome。

但是，如果我移到`doItOn(table.find("tr"));`下面`$("body").append(table);`，它在两者中都有效。（[JSFiddle 2](http://jsfiddle.net/n6mRm/3/)）

为什么会这样？

编辑：我也在使用 jQueryUI，因为 jQuery 不支持 backgroundColor 动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:35:26.167

这可能是不可预测的行为。jQuery 文档对这个`.animate()`函数说：

> 所有动画属性都应动画为单个数值，除非以下说明；大多数非数字属性无法使用基本的 jQuery 功能进行动画处理（例如，宽度、高度或左侧可以进行动画处理，但**`background-color`不能**进行动画处理，除非使用了 jQuery.Color() 插件）。除非另有说明，否则属性值被视为像素数。可以在适用的情况下指定单位 em 和 %。

**编辑：**这在使用 jQuery UI 时不适用。

# android - 在图像视图中查找坐标？

> ID：11892968
> 
> 赞同：0
> 
> 时间：2012-08-09T22:32:42.977
> 
> 标签：android, imageview, coordinates

我试图找到用户仅在图像视图内触摸的坐标。

到目前为止，我已经通过以下代码设法做到了这一点：

```
 img = (ImageView) findViewById(R.id.image);
    img.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            x = (int) event.getX();
            y = (int) event.getY();
            int[] viewCoords = new int[2];
            img.getLocationOnScreen(viewCoords);
            int imageX = (int) (x - viewCoords[0]); // viewCoods[0] is the X coordinate
            int imageY = (int) (y - viewCoords[1]); // viewCoods[1] is the y coordinate
            text.setText("x:" +x +"y"+y);

            return false;
        }
    }); 
```

然而这是 onTouchListener 这意味着它只在每次触摸后找到坐标，我想做的是创建它，以便在用户在图像视图周围移动手指时不断找到坐标。我通过这段代码在整个屏幕上实现了这一点：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    x = (float)event.getX();
    y = (float)event.getY();
    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_MOVE:
        case MotionEvent.ACTION_UP:
    }

    text.setText("x:"+ x +" y:" +y);

return false;
} 
```

但是我不知道如何使此代码仅在 imageview 内工作。

![在此处输入图像描述](../Images/ea10c06df05384999b12bf3d9ca00ce1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:44:29.307

您的问题是您`return false`在 onTouch 事件结束时。

当 you 时`return false`，您是在告诉操作系统您不再对与此特定手势相关的任何事件感兴趣，因此它会停止通知您对未来活动的看法（例如 ACTION_MOVE 和 ACTION_UP）。

返回`true`，`onTouchEvent`只要手指按住屏幕，您将继续接收事件流，并在松开手指时收到最终事件。

# php - 在其他页面上使用 $_GET

> ID：11892969
> 
> 赞同：0
> 
> 时间：2012-08-09T22:33:21.600
> 
> 标签：php

我有一个搜索文件 - dir/search.php

在 search.php 中：

```
<script type="text/javascript" src="timeout.js"></script> 
```

在 timeout.js 中：

```
<script src="functions.php"></script> 
```

在functions.php中的一行我有：

```
document.write('<?php if (!isset($_GET["r"])) { echo "error"; } elseif ($_GET["r"] ==     "top") { ?><title>Top Results</title><?php } ?>'); 
```

我想知道为什么当我查看 search.php?r=top 时，它会显示“错误”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:37:11.680

尝试将functions.php 包含在functions.php?r=top 中。我敢打赌你的输出会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:37:38.290

虽然你可以做一些疯狂的事情，比如[在脚本标签中 src'ing PHP 文件](http://www.impressivewebs.com/php-file-html-script-tag/)，但你源文件必须是输出 javascript 的 PHP 文件。

在这种情况下，functions.php 实际上是输出 PHP 的 javascript。这永远不会像预期的那样运行 PHP。

# perl - Perl：如何将键/值对推送到 hashref 并仍然保留引用

> ID：11892970
> 
> 赞同：6
> 
> 时间：2012-08-09T22:33:32.860
> 
> 标签：perl, hashref

```
$a = {b=>{c=>1}};   # set up ref
$b = $a->{b};       # ref the ref
$b .= (d=>1,e=>1);  # where we want to assign multiple key/val at once 
```

最后`$a`应该如下所示：

*   ```
    {
      'b' => {
               'c' => 1,
               'd' => 1,
               'e' => 1
             }
    }; 
    ```

最后`$b`应该如下所示：

*   ```
    {
      'c' => 1,
      'd' => 1,
      'e' => 1
    } 
    ```

* * *

***注意：**这与执行以下操作相同：*

```
$b->{d} = 1;
$b->{e} = 1; 
```

* * *

`$b = { %$b, d=>1, e=>1 };`不需要，因为它会创建副本`$a`并丢失引用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T22:44:31.747

```
%{$b} = ( d => 1, e => 1 ); 
```

您只需取消对匿名 hash-ref 的引用，使其看起来像赋值运算符的哈希。

你甚至可以这样做：

```
%{$b} = ( %{$b}, d => 1, e => 1 ); 
```

在这些情况下`%{$b}`，对于`%$b`.

...或者你可以做...

```
foreach ( qw/ d e / ) {
    $b->{$_} = 1;
} 
```

显然，您可能不打算将“1”的值分配给所有内容。那么切片怎么样：

```
@{$b}{ qw/ d e / } = ( 1, 1 ); 
```

切片在[perldoc perldata](http://perldoc.perl.org/perldata.html#Slices)中进行了讨论，但是对于获取切片的匿名哈希并没有真正好的 perldoc 描述。为此，您必须了解所有关于引用的 Perl 文档，然后推断如何将其应用于切片语法。...或在 PerlMonks 检查[匿名哈希切片](http://www.perlmonks.org/?node_id=354362)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T23:10:46.147

使用哈希切片表示法。

```
 @$b{"d","e"} = (1,1);

 %newdata = (d => 1, e => 1);
 @$b{keys %newdata} = values %newdata; 
```

# image - WordPress 网络不显示图像；图像已损坏

> ID：11892972
> 
> 赞同：0
> 
> 时间：2012-08-09T22:33:36.680
> 
> 标签：image, wordpress, wpmu

使用 Wordpress 3.x 网络。升级到最新版本后，所有图像都停止显示。

进一步检查，图像数据正在传输，但图像文件本身已损坏。将 Wordpress wp-includes/ms-files.php 脚本发送的图像与服务器上的源文件进行比较，似乎在图像数据中添加了额外的空格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:32:45.903

在 readfile 解决问题之前，将以下代码行添加到 wp-includes/ms-files.php：

```
+ob_clean();
+flush();

// If we made it this far, just serve the file
readfile( $file ); 
```

补充阅读：

*   [http://core.trac.wordpress.org/ticket/14730](http://core.trac.wordpress.org/ticket/14730)
*   [http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T00:25:34.403

如果您使用的是 wordpress-mu-domain-mapping 插件，请确认 ./wp-content/sunrise.php 文件在结束 php 标记之后不包含多余的行。

# java - 肥皂网络服务 - 返回错误信息？

> ID：11892974
> 
> 赞同：3
> 
> 时间：2012-08-09T22:33:49.033
> 
> 标签：java, web-services, jakarta-ee, soap

我有一个小肥皂网络服务。我想知道如何应对错误。

例如：

```
public int createUser(String username) {
   //create...
   return id;
} 
```

现在，如果无法创建用户，我该如何做出正确的响应？我必须抛出自定义异常吗？哪个是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:53:30.450

此处正确的方法是将异常转换为[SOAP Fault](http://www.herongyang.com/Web-Services/SOAP-Fault-Message-Structure.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:09:44.570

我在我的 SOAP 服务器中执行此操作 - 但不要胡乱尝试构建您自己的 Soap 故障 - 只需抛出一个运行时异常，它就会被转换为一个 soap 故障。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T00:58:00.600

我的经验是，我们创建了一个与数据类一起返回的公共类。例如，soap 响应返回一个 CommonOut 对象和一个 ResultData 对象。CommonOut 类包含填充有请求是好还是坏的数据的字段，例如状态、返回的记录和消息。

拦截器用于捕获容器中的所有异常，并将它们包装成我们自定义的格式并返回给用户。这样您就可以捕获真正的异常消息并以您自己的格式包装它们。

将真正的错误消息返回给调用者的危险在于，它可能会暴露有关您系统的详细信息，除非您捕获异常并覆盖返回的值。

这与上面提到的 SOAP 错误类似，但使您能够自定义输出格式。

# c++ - 为什么我的日志在 std 命名空间中？

> ID：11892976
> 
> 赞同：70
> 
> 时间：2012-08-09T22:33:56.230
> 
> 标签：c++, namespaces, overloading

在下面的代码中，我定义了一个简单的`log`函数。在`main`我尽量*不*叫它；我打电话`std::log`。然而，我自己的`log`被称为；我看到“日志！” 在屏幕上。有谁知道为什么？我使用 G++ 4.7 和 clang++ 3.2。

```
#include <iostream>
#include <cmath>

double log(const double x) { std::cout << "log!\n"; return x; }

int main(int argc, char *argv[])
{
  std::log(3.14);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-09T23:02:46.230

C++ 标准 17.6.1.2 第 4 段（强调我的）：

> 除第 18 至 30 条和附录 D 中另有说明外，每个标题的内容`cname`应与相应标题的内容相同`name.h`，如 C 标准库 (1.2) 或 C Unicode TR 中规定的，视情况而定，如同通过包容。但是，在 C++ 标准库中，声明（在 C 中定义为宏的名称除外）在 namespace 的命名空间范围 (3.3.6) 内`std`。 **未指定这些名称是否首先在全局命名空间范围内声明，然后通过显式*****使用声明*****(7.3.3)****注入命名空间。`std`**

 *g++ 采用后一种方式，这样一些相同的头文件可以被 C 和 C++ 重用。所以允许g++`double log(double)`在全局命名空间中声明和定义。

第 17.6.4.3.3 节第 3 和第 4 段：

> 使用外部链接声明的标准 C 库中的每个名称都保留给实现，以在命名空间和全局命名空间中用作具有`extern "C"`链接的名称。`std`
> 
> 使用外部链接声明的标准 C 库中的每个函数签名都保留给实现，以用作具有`extern "C"`和`extern "C++"`链接的函数签名，或作为全局命名空间中命名空间范围的名称。

在第 17.6.4.3 节第 2 段的顶部：

> 如果程序在保留名称的上下文中声明或定义名称，除非本条款明确允许，否则其行为未定义。

另一方面，您*不得*以任何方式声明或定义`::log`。

不过，g++ 工具链没有给您任何错误消息，这太糟糕了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-09T22:46:28.593

我预计会发生什么，`std::log`只是将`::log`. 不幸的是，`::log`只提供了一个`float`重载，而您请提供一个`double`重载，使您的匹配更好。但是我仍然看不到它在重载集中是如何被考虑的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-09T22:47:21.983

在 libstdc++ 上，`cmath`您将看到：

```
using ::log; 
```

所以它将 math.h 函数从全局命名空间引入到`std`. 不幸的是，您正在为 提供一个实现`double log(double)`，因此链接器不会使用数学库中的那个。~~所以绝对是 libstdc++ 中的一个错误~~。

编辑：我声称这是 libstdc++ 中的一个错误，因为当您明确要求版本`std::log`时，不应受到与 C 库的干扰。`std::`当然，这种覆盖标准库函数的方式是 C 语言的一个旧“特性”。

编辑 2：我发现该标准实际上并没有禁止将名称从全局命名空间带入`std`. 所以毕竟不是错误，只是实现细节的结果。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-09T23:06:29.897

在 C++ 中，编译器可以自由地在全局命名空间中实现 C 库并委托给它（这是实现定义的）。

> 17.6.1.2.4 除了第 18 到 30 条和附录 D 中的说明外，每个头文件 cname 的内容应与 C 标准库 (1.2) 或 C 中指定的相应头文件 name.h 的内容相同。 Unicode TR，视情况而定，好像通过包含。然而，在 C++ 标准库中，声明（在 C 中定义为宏的名称除外）在命名空间 std 的命名空间范围 (3.3.6) 内。未指定这些名称是否首先在全局命名空间范围内声明，然后通过显式 using 声明(7.3.3)**注入命名空间 std 。**

一般来说，我会避免使用与 C 标准库之一具有相同签名的函数。C++ 标准当然让编译器可以自由选择使用这些签名，这意味着如果您尝试使用相同的签名，您可能会与编译器发生冲突。因此，您会得到奇怪的结果。

不过，我预计会出现链接器错误或警告，我认为值得报告这一点。

[编辑]

哇，忍者。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-06T01:51:41.337

因为您已经在全局命名空间中覆盖了它。如果您不想继续使用像[Nim](http://nim-lang.org/)这样的更安全、更清洁的语言，则使用命名空间可以避免这种危险。

[正确使用命名空间演示](http://ideone.com/vSU5tD)：

```
#include <iostream>
#include <cmath>  // Uses ::log, which would be the log() here if it were not in a namespace, see http://stackoverflow.com/questions/11892976/why-is-my-log-in-the-std-namespace

// Silently overrides std::log
//double log(double d) { return 420; }

namespace uniquename {
    using namespace std;  // So we don't have to waste space on std:: when not needed.

    double log(double d) {
        return 42;
    }

    int main() {
        cout << "Our log: " << log(4.2) << endl;
        cout << "Standard log: " << std::log(4.2);
        return 0;
    }
}

// Global wrapper for our contained code.
int main() {
    return uniquename::main();
} 
```

输出：

```
Our log: 42
Standard log: 1.43508 
```*

# css - 我如何让所有孩子 当一个孩子导致父母扩大时，s扩大到父母div的长度？

> ID：11892979
> 
> 赞同：0
> 
> 时间：2012-08-09T22:34:01.743
> 
> 标签：css, html, parent

我已经看到这个问题被问了一百次，我已经尝试了所有给出的解决方案，但我仍然没有设法让它发挥作用。

问题：我有一个带有四个子 DIV 的父 DIV，其中两个包含内容，两个仅用于外观：

（[站点阴影] [左侧菜单] [内容区域] [右侧阴影]）

当内容区域有足够的文本来扩展内容区域时，我希望右阴影和左菜单图形与其余的 DIV 一起向下扩展页面。

我尝试将 clear:both 添加到父 div 并且什么都不做。我将在下面包含相关代码。

我应该补充一点，当向父 DIV 添加高度 % 时，网页右侧的阴影会完全消失

此外，如果我向父 div 添加一个非常大的 height:4000px ，一切都会按照我的意愿进行合作，尽管我希望网站重新调整内容的大小而不仅仅是 4000px。

相关的 HTML：

```
<div id="body_area">
  <div id="body_left"></div><!-- just a left page graphic -->

    <div id="sidebar">
      some info here
    </div>

    <div id="content_area">
      enough text here to cause the div to expand beyond browser height.
    </div>

    <div id="body_right"></div>  <!-- just a right shadow graphic -->

    <div id="footer"></div>
</div> 
```

以及相关的 CSS

```
#body_area{
    overflow:auto;
    width:1024px;
    margin:0px auto;
    clear:both;
}

#body_left{
    height:516px;
    width:25px;
    margin:0px;
    background:url("images/body_left.jpg") repeat-y;
    float:left;
}

#body_right{
    height:100%;
    width:28px;
    margin:0px;
    background:url("images/body_right.jpg") repeat-y;
    float:left;
}

#sidebar{
    height:100%;
    width:213px;
    margin:0px;
    background:url("images/side_menu.jpg") repeat-y;
    float:left;
}

#content_area{
    height:100%;
    width:758px;
    margin:0px;
    background:url("images/content_area.jpg") repeat-y;
    float:left;
}

#footer{
    height:34px;
    width:1024px;
    margin:0px auto;
    background:url("images/footer.jpg");
    float:left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:01:21.147

如果您需要一个纯粹的`css`解决方案，那么将很难实现。但要轻松完成此操作，您可以使用`jQuery`.

编辑：从 jquery cdn 添加 jquery 库

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
    $(document).ready(function(){
            var h1 = $('#sidebar').height(),
                h2 = $('#content_area').height(),
                maxNum = ( h1 > h2 ) ? h1 : h2;

            $('#body_area').css('height', maxNum);
        });
</script> 
```

这很好用。但是有个小问题，你得重新调整div`div`里面s的宽度。`body_area`谢谢

编辑：完整代码

```
<!DOCTYPE html>
<html>
    <head>
        <title>Lessons by Larissa</title>
        <link rel="stylesheet" type="text/css" href="http://www.leigero.com/div_expanding_issue/style.css" />
        <link class='webFontsCSSLink' href='http://fonts.googleapis.com/css?family=Comfortaa|Pacifico|Dancing+Script' rel='stylesheet' type='text/css'>
    </head>
    <body>
    <!-- Header area -->
        <div id="header_area">
            <div id="title_box">
                <div id="title_text"><h1></h1></div>
            </div>

            <div id="banner">
                <div id="banner_text">
                    <font color="#fff" face="'dancing script', arial, sans-serif" size="4">
                        Learning music is a motion of the mind…, a flowing of harmonious notes, on a wisp of melodious air. <p class="quote">-M.O'Malley</p>
                    </font>
                </div>
            </div>
            <div id="header_right"></div>
            <div id="header_left"></div>
            <div id="title_image"></div>
            <div id="nav_bar">
                <div id="nav_bar_text">
                    <!-- This is where all of your upper menu items are located. You can add more or remove the links by copying and pasting more in the appropriate sections -->

                    <ul id="nav"> <!-- This begins all the links in the top menu bar -->
                        <li class="home"><a href="http://www.leigero.com/lessons">Home</a></li>
                        <li>
                            <a href="#blah2.html">About</a>                        
                            <ul><!--Sub menu for 'Home.' These are the links that appear when you hover over 'home' -->
                                <li><a href="#1.html">Philosophy</a></li>
                                <li><a href="#2.html">Pricing</a></li>
                                <li><a href="#3.html">Add as many links as you want</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#blah3.html">Link 2</a>
                            <ul><!--Sub menu for 'Home.' These are the links that appear when you hover over 'home' -->
                                <li><a href="#1.html">Sub Link 1</a>
                                    <ul>
                                        <li><a href="#6.html">More Links </a></li>
                                        <li><a href="#6.html">More Links </a></li>
                                    </ul>
                                </li>

                                <li><a href="#2.html">Sub Link 2</a></li>
                                <li><a href="#3.html">Sub Link 3</a></li>
                            </ul>
                        </li>
                    </ul>

                </div>
            </div>
        </div>

    <!-- Body area -->

        <div id="body_area">
            <div id="body_left"></div>
            <div id="sidebar">
                   <p>ASLFKJASDFLSJDAFLSDKJKJFlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                   LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                   LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                   LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                   LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                   LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                   LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                   LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                   LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                   LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                   LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    </p>

            </div>
            <div id="content_area">
                    <p>ASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF 
                    LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF LDSAfjlkdfjsldkfjsdlfkjdsljASLFKJASDFLSJDAFLSDKJF </p>

            </div>
            <div id="body_right"></div>
    <!-- Footer area -->
                <div id="footer"></div>
        </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script>
            $(document).ready(function(){
                    var h1 = $('#sidebar').height(),
                        h2 = $('#content_area').height(),
                        maxNum = ( h1 > h2 ) ? h1 : h2;

                    $('#body_area').css('height', maxNum);
                });
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T10:02:33.437

在尝试了一切（或者看起来如此）之后，我终于意识到，将 3 个以上的列扩展到最长列的高度的最佳（可能也是唯一）方法是不使用 DIV，而是使用表格。

DIV 有它们的用途，它们很方便，但是表格会按照我希望 DIV 扩展的方式自动扩展，但表格不需要浮点数等也可以对齐。DIV 中的快速表使这变得超级简单

```
<div id="body_area">
    <table id="content">
        <tr>
            <td class="lmargin"></td>
            <td class="sidebar"></td>
            <td class="content_area">
                <div id="content_area_content">
                </div>
            </td>
            <td class="body_right"></td>
        </tr>
    </table>
<!-- Footer area -->
<div id="footer"></div>
</div> 
```

通过这种方式，表格扩展了所有等高的列，并且在表格数据中，我可以添加另一个 DIV 来编辑其内容的边距和所有其他属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T10:54:53.297

您的浏览器范围是多少？（即 - 您的访问者使用哪些浏览器？）

如果你忽略了 IE7，你可以通过使用这样的 CSS 表来解决这个问题......

1.  将#footer移出#body-area
2.  设置显示：#body-area 上的 table-cell
3.  将四个子项（#body-left、#body-right、#content-area 和 #sidebar）的“float:left”替换为“display:table-cell;vertical-align:top”
4.  删除四个孩子的高度 - 对于这些类型的布局，CSS 表格的一个好处是表格的单元格一起垂直扩展

该解决方案的一个坏处是它在 MISE7 中不起作用（但您*可以*为 IE7 提供单独的 Javascript，例如，如果您不想排除这些用户，则可以使用条件注释）

可在“所有现代浏览器”（包括 IE8）中工作：）

所以试试看：

```
<div id="body_area">

  <div id="body_left"></div><!-- just a left page graphic -->

    <div id="sidebar">
      some info here
    </div>

    <div id="content_area">
      enough text here to cause the div to expand beyond browser height.
      enough text here to cause the div to expand beyond browser height.
      enough text here to cause the div to expand beyond browser height.
      enough text here to cause the div to expand beyond browser height.
      enough text here to cause the div to expand beyond browser height.
      enough text here to cause the div to expand beyond browser height.
    </div>

    <div id="body_right"></div>  <!-- just a right shadow graphic -->

</div>

<div id="footer"></div> 
```

和

```
#body_area{
    overflow:auto;
    width:1024px;
    height: 768px; /* just a sample value */
    margin:0px auto;
    clear:both;
    display: table;
}

#body_left{
    width:25px;
    margin:0px;
    background:url("http://www.leigero.com/div_expanding_issue/images/body_left.jpg") repeat-y;
    display: table-cell;
    vertical-align: top;
}

#body_right{
    width:28px;
    margin:0px;
    background:url("http://www.leigero.com/div_expanding_issue/images/body_right.jpg") repeat-y;
    display: table-cell;
    vertical-align: top;
}

#sidebar{
    width:213px;
    margin:0px;
    background:url("http://www.leigero.com/div_expanding_issue/images/side_menu.jpg") repeat-y;
    display: table-cell;
    vertical-align: top;
}

#content_area{
    width:758px;
    margin:0px;
    background:url("http://www.leigero.com/div_expanding_issue/images/content_area.jpg") repeat-y;
    display: table-cell;
    vertical-align: top;
}

#footer{
    height:34px;
    width:1024px;
    margin:0px auto;
    background:url("http://www.leigero.com/div_expanding_issue/images/footer.jpg");
} 
```

# windows-phone-7 - 在 Windows Phone 的 Visual Studio 2010 express 上看不到目标 Windows Phone OS 7.5 的选项

> ID：11892982
> 
> 赞同：1
> 
> 时间：2012-08-09T22:34:13.403
> 
> 标签：windows-phone-7

我安装了 Windows Phone SDK 7.1.1 Update ，但是当我创建新应用程序时，我在 Visual Studio 2010 express for Windows Phone 上看不到目标 Windows Phone OS 7.5 的选项。有人能告诉我为目标 Windows Phone OS 7.5 创建应用程序需要哪些软件吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T22:42:49.023

Windows Phone 7.5 与操作系统版本 7.10.x 相同。

> *Windows Phone 7.5 是我们用来描述此版本的官方产品名称。但是，由于软件开发的一个怪癖，实际的操作系统版本在技术上被识别为 7.10.7720。您将在手机的“设置”>“关于”>“更多信息”中看到这两个名称。

# objective-c - 刷新整个 NSFetchedResultsController tableView

> ID：11892986
> 
> 赞同：0
> 
> 时间：2012-08-09T22:34:37.060
> 
> 标签：objective-c, ios, uitableview, refresh, nsmanagedobject

我正在通过获取该单元`refreshObject:mergeChanges:`格来刷新我的核心数据中的单个单元格。是否可以刷新整个而不是单个单元格？我只发现它适用于我需要做的事情。`tableView``indexPath``tableView``refreshObject:mergeChanges:`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:30:37.420

只需重新获取您的数据。

有一个属性`setShouldRefreshRefetchedObjects`可以确保获取请求到达存储。

setShouldRefreshRefetchedObjects：设置获取请求是否应该使用持久存储中的当前值更新获取的对象的属性值。

> **- (void)setShouldRefreshRefetchedObjects:(BOOL) 标志**
> 
> **参数**
> 
> 如果获取请求应该导致使用持久存储中的当前值更新获取的对象的属性值，则标记为 YES，否则为 NO
> 
> **讨论**
> 
> 默认情况下，当您获取对象时，它们会保持其当前属性值，即使持久存储中的值已更改。通过使用参数 YES 调用此方法，当执行 fetch 时，将使用持久存储中的当前值更新所获取对象的属性值。这提供了更方便的方法来确保托管对象属性值与存储一致，而不是依次对多个对象使用 refreshObject:mergeChanges: (NSManagedObjetContext)。

# php - 未定义变量：用户

> ID：11892987
> 
> 赞同：0
> 
> 时间：2012-08-09T22:34:38.453
> 
> 标签：php, cakephp, cakephp-2.1

有了这段代码，我显然有

```
Undefined variable: user 
```

所以，我的问题是如何访问`$user`in `add.ctp`？可能这是基本的，但我是 Cake 的新手。或者正确的方法是调用如下方法：

```
$user = new UsersController();
$user -> add(); 
```

?

* * *

用户控制器.php

```
 public function add() {
           ...   
           $user = $facebook->getUser();
           ...
    } 
```

添加.ctp

```
<?php if ($user){ ?>
<a href="<?php echo $logoutUrl; ?>">Logout</a>
<?php }else{ ?>
<a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:37:01.530

你需要设置它：

```
public function add() {
       ...   
       $user = $facebook->getUser();
       $this->set('user', $user);
       ...
} 
```

见[http://book.cakephp.org/2.0/en/controllers.html#interacting-with-views](http://book.cakephp.org/2.0/en/controllers.html#interacting-with-views)

# ruby - 如何使用 Goliath/Heroku 进行 HTTP 身份验证？

> ID：11892988
> 
> 赞同：1
> 
> 时间：2012-08-09T22:34:41.713
> 
> 标签：ruby, rack, http-authentication, goliath

我正在使用 Goliath 作为我的应用程序服务器，并且我正在尝试转换“ [Ruby – 来自用户和机器人的公共应用程序的安全登台环境](http://olemortenamundsen.wordpress.com/2011/04/05/ruby-secure-staging-environment-of-your-public-app-from-users-and-bots/)”，因此它适用于我的 Goliath 应用程序。

我正在尝试使用`Rack::Static`，但我不确定如何编写代码。我正在尝试类似的东西：

```
class Application < Goliath::API
  use(Rack::Lock) 
```

但我不太确定如何翻译我发布的链接。

我对其他选择持开放态度，我只需要保护我的整个站点密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:30:24.197

您是在尝试使用 Rack::Static 来提供静态文件，还是使用 Rack::Basic::Auth 来处理身份验证？

应该没有什么能阻止你放一个

```
use Rack::Auth::Basic, "Restricted Area" do |username, password|
  [username, password] == ['admin', 'admin']
end 
```

在您的歌利亚应用程序中。Rack::Basic::Auth 在异步环境中应该可以正常工作，因为它在返回路径上什么都不做，所以我们可以在返回处理程序的途中安全地“跳过”中间件。

如果您正在寻找设置 Rack::Static，请查看 Goliath 示例目录中的“template.rb”示例。

# java - actionscript socket readBytes() <- java app write() write() write()

> ID：11892991
> 
> 赞同：0
> 
> 时间：2012-08-09T22:35:05.870
> 
> 标签：java, sockets, actionscript, duplex

我是动作脚本的新手。我使用socket for IO开发了一个flex应用程序。

问题是我无法通过动作脚本套接字从服务器端的各种写入中读取字节，而无需在每次 flexapp 读取后向服务器（读取我的写入）写入内容。

例如，这很好用：

`server: write()`

`flex app: read()`

`server: write()`

`flex app: read()`

ETC

但： `server: write()`

`server: write()`

`server: write()`

`flex app: read()`

导致只阅读第一条消息

似乎动作脚本套接字不支持全双工模式。这是真的？

ps：第一次以为是安全问题，现在一切都搞定了，包括 Security.allowDomain("*"); 和策略文件检索（也在使用 crossdomain.xml 文件进行测试） - 没有结果；

psps：服务器端在最后写入带有'\n'的消息，并且每次写入后都会调用flush（）方法。我认为我用于部分数据检索的代码没问题，因为它会发送所有数据，但仅在读取后进行写入时

你有什么想法？

谢谢，安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:57:42.130

全双工模式无关紧要，每个TCP都是全双工的。TCP 不保证一次接收多少数据，实际上您会发现这里有许多线程抱怨他们*不*只是接收示例中第一个 write() 写入的内容。您只需要读取字节流并自己弄清楚。

# facebook - 0-278 频道 facebook.com 上的 Facebook HTTP 请求 JS API 错误

> ID：11892995
> 
> 赞同：0
> 
> 时间：2012-08-09T22:35:28.197
> 
> 标签：facebook, fbjs

在将 Facebook JavaScript API 用于类似网关的页面选项卡之前，有没有人遇到过这个问题，并且长时间等待这个 URL 请求：0-278.channel.facebook.com！

我不知道从哪里开始解决这个问题，因为它在 Facebook 上的停机时间。任何解决方法的想法。

[HTTP 嗅探器的屏幕截图](http://i.stack.imgur.com/tDBW2.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:07:36.423

对这些域的请求与标签应用程序无关，对您的应用程序没有影响。您可以放心地忽略这些。