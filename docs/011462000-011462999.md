# StackOverflow 问答 11462000-11462999

# less - 我可以使用 .LESS 变量来缩短这种语法吗？

> ID：11462000
> 
> 赞同：1
> 
> 时间：2012-07-12T23:05:32.083
> 
> 标签：less

我的 .less 文件根据页面类设置各种元素的颜色。因此，对于我的 3 页（关于、能量、报告），我正在重复这些元素，我觉得我应该只能以某种方式解决一次，但我无法弄清楚：

```
@color_about: #54B948;
@color_energy: #C41230;
@color_reports: #FBB040;

.about {
  @color: @color_about;
  h1, .thick-bottom-border, &.thick-bottom-border { color: @color;     }
  &.button:hover, &.button:focus, &.label { background-color: @color; }
}

.energy {
  @color: @color_energy;
  h1, .thick-bottom-border, &.thick-bottom-border { color: @color;         }
  &.button:hover, &.button:focus, &.label { background-color: @color; }
}

.reports {
  @color: @color_reports;
  h1, .thick-bottom-border, &.thick-bottom-border { color: @color;     }
  &.button:hover, &.button:focus, &.label { background-color: @color; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T10:15:06.447

是的，您可以使用 (~"") 将变量输出为选择器。

```
.do_color("about", #54B948);
.do_color("energy", #C41230);
.do_color("reports", #FBB040);

.do_color(@name, @color) {
  (~".@{name}") {
    h1, .thick-bottom-border, &.thick-bottom-border { color: @color;     }
    &.button:hover, &.button:focus, &.label { background-color: @color; }
  }
} 
```

# c# - 在循环内或循环外声明对象

> ID：11462001
> 
> 赞同：0
> 
> 时间：2012-07-12T23:05:35.857
> 
> 标签：c#, performance

我有一个并行循环，它检查数据库中大约 1 百万条记录并向数据库发送许多请求。我在每次并行循环迭代时重新声明新的 DB 对象。

```
DataSet ds = new psqlWork().getDataSet("SELECT * FROM z_sitemap_links");
DataTable dt = ds.Tables[0];
Parallel.ForEach(dt.AsEnumerable(), dr =>
{
    new Sitemap().runSitemap(dr[1].ToString(), counter);
    counter++;
}); 
```

`new Sitemap()`在循环外或每次执行时声明对象是否合适？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:12:24.670

这两种情况下代码的含义完全不同，不知道为什么这个“性能”问题......

如果您的对象在所有迭代中共享 - 在外部声明并共享。否则在本地声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T23:19:21.797

我会在循环内声明它。始终在需要的确切位置声明所有内容。它使您的代码更整洁，更容易重构。

如果您发现系统太慢，甚至还要考虑性能，然后使用分析器找出它慢的地方并一次改进一件事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T23:09:06.030

好吧，这取决于对象的作用。如果对象的状态在任何时候改变，它需要保持在循环中。否则，您可以在外面声明它以节省一些分配。

# windows - CruiseControl.net - 在多个构建机器上作为服务运行

> ID：11462007
> 
> 赞同：1
> 
> 时间：2012-07-12T23:06:25.033
> 
> 标签：windows, svn, windows-services, cruisecontrol.net, cruisecontrol

我有一个 Cruise Control (v1.5.726) 安装，各种项目正在多台机器上构建。每台机器构建它配置为运行的任何项目，如果构建成功，则将输出的副本放置在 Web 服务器上，以便内部访问。我有一个包含“黄金”（已知工作）CC.net 安装的 SVN 分支，所以当我想添加另一台构建机器时，我需要做的就是将 SVN 分支同步到该机器并创建一个调用的批处理文件ccnet.exe，然后引用 .ccnet.config 文件，该文件包含每台机器负责构建的项目列表。

昨天我想出了如何将 CC.net 设置为 Windows 服务，但我似乎无法像使用 ccnet.exe 那样将任何参数传递给 ccservice.exe。我能够让 ccservice.exe 加载机器特定配置的唯一方法是在 ccservice.exe.config 文件中添加一行，该文件引用回机器配置。例如

```
<add key="ccnet.config" value="C:\CruiseControl\Config\Machine-Name.ccnet.config"/> 
```

现在，考虑到我有多个构建机器并且配置文件是通过 SVN 存储的这一事实 - 将 ccservice.exe.config 提交回 SVN 会导致问题，因为它引用了单个机器的配置文件。

我的问题是 - 是否有某种方法可以将命令行参数（或某种方法告诉 ccservice 要查看哪个配置文件）传递给 ccservice.exe 其他，而不是通过 ccservice.exe.config 文件？我试过 ccservice.exe /? 但我只看到弹出消息说您必须使用 IntstallUtil.exe 将 CC.net 安装为服务。

我正在使用 CC.net 版本：1.5.7256.1 构建机器正在运行 Windows 7 Enterprise。英特尔酷睿 i7-2600K CPU。16GB 内存。

如果您需要任何进一步的信息，请告诉我。
谢谢里奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:01:13.203

你可以使用环境变量吗？`COMPUTERNAME`已经在那里了。

```
<add key="ccnet.config" value="C:\CruiseControl\Config\%COMPUTERNAME%.ccnet.config"/> 
```

也许它会扩展变量，我没有尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:14:09.057

您可以尝试的一件事是在 ccservice.exe.config 之外的文件中使用此特定值。请参阅此问题以供参考：[appsettings 文件属性是否覆盖 app.config 中的内容？](https://stackoverflow.com/questions/8990142/does-the-appsettings-file-attribute-override-what-is-in-the-app-config)

我认为您的 ccservice.exe.config 看起来像

```
....
<appSettings file="local.config">
  <add key="service.name" value="CCService" />
  ... other existing keys in appSettings ...
<appSettings> 
```

然后 local.config 看起来像

```
<appSettings>
  <add key="ccnet.config" value="C:\path\to\machine-name.ccnet.config" />
</appSettings> 
```

在设置新机器时这样做，您需要创建 local.config 和 machine-name.ccnet.config，但您的 ccservice.exe.config 不需要在机器之间更改。

# javascript - 我如何检查这个对象的长度？

> ID：11462009
> 
> 赞同：0
> 
> 时间：2012-07-12T23:06:34.527
> 
> 标签：javascript, jquery, html, arrays

我正在使用经过大量修改的 jquery-tokeninput

它本质上是一个文本输入框，允许多个标签，就像堆栈溢出一样。

您可以通过运行以下命令获取当前输入中所有标签的返回值：

`$("#no-custom-tokens").tokenInput("get")`

问题是，它为我返回以下内容：

![在此处输入图像描述](../Images/1363e6fa5f1113308d502994184ae120.png)

如果我尝试调用`$("#no-custom-tokens").tokenInput("get").length`它只是说未定义。

我需要检查这个对象内是否有任何 u1、u2 等（基本上.. 是输入空白）。

我考虑过做...

`if ($("#no-custom-tokens").tokenInput("get").u1.name != "")`

除了如果你删除令牌，然后再添加 2 个，它不会从 u1、u2 开始......它从 u3 和 u4 开始。

：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:10:56.647

> *“我需要检查这个对象内是否有任何 u1、u2 等（基本上.. 是输入空白）。”*

如果您基本上需要检查至少一个属性是否存在，并且属性是可枚举的，您可以这样做...

```
var has_props = false,
    obj = $("#no-custom-tokens").tokenInput("get");

for (var p in obj) {
    has_props = true;
    break;
}

console.log(has_props); 
```

* * *

如果您想知道有多少，并且再次，如果它们是可枚举的，您可以使用`Object.keys`...

```
var props_len = Object.keys($("#no-custom-tokens").tokenInput("get")).length; 
```

* * *

如果您支持较旧的浏览器，则只需要对其进行填充...

```
if (!Object.keys)
    Object.keys = function(o) {
        var keys = [];
        for (var k in o)
            if (o.hasOwnProperty(k))
                keys.push(k);

        return keys;
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:11:23.307

看起来它是作为对象返回的，而不是数组，所以没有 .length 方法。如果您只想检查对象中是否有任何内容，您可以尝试遍历该对象并在找到任何内容时设置一个标志。所以：

```
var isEmpty = true;
var tokens = $("#no-custom-tokens").tokenInput("get");
for (var i in tokens) {
    isEmpty = false;
    break;
}
if (isEmpty) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T23:17:49.637

检查是否为空：

```
function isEmpty(obj) {
    for (var i in obj) {
        if (obj.hasOwnProperty(i)) return false;
    }
    return true;
} 
```

检查它的长度：

```
function objectLength(obj) {
    var size = 0;
    for (var i in obj) {
        if (obj.hasOwnProperty(i)) ++size;
    }
    return size;
}

// or:

function objectLength(obj) {
    return Object.keys(obj).length;
} 
```

# sql - 如何安全地允许用户定义的 SQL 查询？

> ID：11462011
> 
> 赞同：16
> 
> 时间：2012-07-12T23:07:05.987
> 
> 标签：sql, sql-injection, sql-parametrized-query

我希望允许用户使用一些相当灵活的标准来查询数据库。我可以使用以下内容：

```
String slqCmdTxt = "SELECT * FROM TheTable WHERE " + userExpression; 
```

但是，我知道这对 SQL 注入很开放。使用参数很好，但我看不到允许非常灵活的查询的方法。

我怎样才能允许灵活的数据库查询而不让自己接受 SQL 注入？

* * *

更多细节：

确实有两个表，一个具有属性的主表和一个辅助表。一份主记录可能有许多属性。我们想查询两个表中的值。结果被处理成比简单的表格视图更具可读性的报告。数据由 C# 程序编写，但当前方向是从用 Java 编写的组件中查询表。

所以我需要一种方法来提供用户输入，然后安全地构建查询。对于一组有限的输入，我编写了代码来使用给定的输入和参数值构建查询字符串。然后，我将输入值添加为参数。这导致了复杂的字符串 catination，很难更改/扩展。

现在我正在使用Java，一些搜索已经出现了像jOOQ这样的SQL语句构造库......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T23:17:52.953

您可能应该创建一个 UI，用户可以在其中从下拉列表中选择一个表，然后添加过滤器。如果您曾经使用过 TOAD 或 DBVisualizer 甚至 SQLDeveloper，它们在 UI 中都有您可以选择表的部分，然后无需实际编写 SQL，用户就可以从 UI 控件添加过滤器和排序。

然后，当然，在 UI 后面的代码中，您将验证过滤器输入并将它们用作准备好的语句中的参数（取决于您使用的语言）。

例如，当您浏览数据库对象并单击表时，这就是 DBVisualizer（用 Java 编写）在其 UI 中的内容。请注意，您可以从下拉列表中选择任何列，然后从另一个下拉列表中选择运算符（即 =、>、>=、<、<=、LIKE、IN 等），然后您可以输入用户定义的值为过滤器值。

![DBVisualizer 用户界面](../Images/83215de56c997f84edf1aca39cc710a7.png)

你可以在你的 UI 中做一些非常相似的事情。

顺便说一句，如果您包含您的应用程序将使用哪种语言编写，这将有所帮助。如果我不得不猜测，我会根据您的字符串声明说 Java 或 C#，但最好确定一下。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T23:33:10.983

假设一个现代 DBMS（例如 Sql Server 或 Oracle；我不熟悉 MySQL），那么您可以允许用户编写原始 SQL，只要您确保他们登录的帐户具有适当的限制。

在 SQL Server 中，您可以限制用户可以对任何 db 对象执行的操作（SELECT、DELETE、UPDATE、EXECUTE）。我相信这在 Oracle 中是正确的。我认为它甚至可能扩展到列级别，但我不确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-04T17:44:37.867

# 准备好的语句和输入清理

## 1\. 准备好的报表

Java 提供**PreparedStatement**来执行参数化查询。使用 Prepared Statements 构建的查询不太容易受到攻击。

## 例子：

**我们需要做的查询：**

```
String query = "SELECT col1, col2, col3 FROM table1 WHERE " + user_input; 
```

**使用带有参数化值的 PreparedStatement：**

```
// write the query with "?" placeholder for the user_input
String query = "SELECT col1, col2, col3 FROM table1 WHERE ?";

// Create database connection
Connection conn = source.getConnection();

// Prepare a statement for the query
PreparedStatement stmt = conn.prepareStatement(query);

// set the placeholder with the actual user_input
stmt.setString(1, user_input);

// execute the query
ResultSet result = stmt.executeQuery(query); 
```

# 够了吗？不！

~~即使在使用 PreparedStatement 或 createQuery（JPA 的类似方法）或任何东西之后，攻击者仍有可能通过。所以这把我们带到了这个......~~

正如@phil 指出的那样进行编辑，使用 PreparedStatement 确实可以阻止非法值的执行。但我仍然强烈建议对输入进行清理，因为当您期待“int”时，用户可能会输入“String”或随机特殊字符。

## 2\. 消毒

假设我们有两组表的列，用户也可以输入列名和值。

而不是像这样未经过滤的输入： String query = "SELECT col1, col2, col3 FROM table1 WHERE ?"; 使用一些过滤器。过滤器可以是任何东西。可能是一些字符串函数或字符串比较或输入变量类型检查或任何东西。

**案例1：** 假设用户可以使用列“col1”进行过滤，并且它是“整数”或“数字”类型，我们可以使用正则表达式过滤输入以查看其中是否有任何特殊字符：

```
^[0-9]*$ 
```

**Case2：** 检查输入的列名是否有效。

```
private static final Set<String> valid_column_names 
= Collections.unmodifiableSet(Stream
.of("col1", "col2", "col3")
.collect(Collectors.toCollection(HashSet::new)));

boolean is_valid = false;

if (valid_column_names.contains(user_column_input)) {
  is_valid = true;
}

if(!is_valid){
  throw new IllegalArgumentException("Invalid Column input");
}
String query = "SELECT col1, col2, col3 FROM table1 WHERE ?";
// prepare statements and execute 
```

**最后说明：**

那么，在所有这些预防措施之后，您动态生成的查询是否安全？安全得多，但你不能保证。有很多问题使您的数据库容易被注入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-05T13:13:21.653

有很多方法可以保护您的数据库免受 SQL 注入。我将一一列出。

1.  对 DBMS 提供的用户提供的输入使用字符转义函数，如下所示；还要确保必须在服务器级别设置字符集，并且 mysql_real_escape_string() 函数不会转义 % 和 _ 通配符。

    ```
    $input = mysqli_real_escape_string($db_connection, $_POST['username']); 
    ```

2.  在 SQL 查询中使用 ESCAPE 关键字也可以保护您，如下所示；

    `SELECT * FROM table WHERE column LIKE '%%' ESCAPE '!'`

3.  使用**Web 应用程序防火墙**，例如**[https://www.cloudflare.com/waf/](https://www.cloudflare.com/waf/)**这将在您的 Web 服务器前面运行，并将监控进出您的 Web 服务器的流量。因此，对 WAF 的每个请求都会根据规则引擎和威胁情报（例如 SQL 注入、XSS、参数篡改等）进行检查。因此，可以立即阻止、质疑或记录任何可疑请求。

4.  避免管理权限，例如 DB root 访问。至于搜索，您的帐户只需要对那些需要的表和列具有读取权限。

5.  使用存储过程和特殊的 EXECUTE 权限。

6.  通过绑定参数使用参数化查询，以便引用输入并且提供的输入不会导致意图的变化。

7.  输入验证和清理。

8.  即使您使用诸如 jOOQ 或 JPA 之类的 SQL 语句构造库和其他 ORM 来使您免于创建手工编码的 SQL 语句，它也不会保护您免于编写易受攻击的代码。如果你用 Java 开发。您可以使用 Spring Cloud Vault 等短期凭证。

9.  如果发生攻击，您可以记录所有内容以防止损坏范围。

10.  阻止使用 UNION 运算符。它是一种非常常见的基于联合的 SQL 注入攻击。例如：

    **GET yourapp.com/store.php?store=-1 UNION SELECT 1,pass,cc FROM users WHERE uname='test' HTTP/1.1 Host: yourapp.com**

11.  阻止使用 DROP 运算符。

    从用户中选择 *；删除用户——

# asp.net - ASP.Net 中的表

> ID：11462015
> 
> 赞同：0
> 
> 时间：2012-07-12T23:07:23.643
> 
> 标签：asp.net, html, markup

我正在使用 ASP.net 创建我的第一个网站，并且在格式化表格的标记方面遇到了一些问题。我希望能够让用户填写问卷。这是一个多部分的问卷，所以我使用手风琴来节省空间。第一个窗格中的一个问题有一个由五部分组成的答案。我的桌子给了我一些意想不到的行为。大约一半时，我尝试在五个文本框上方显示五个标签。我将它们插入表格中的适当位置，但由于某种原因，它们出现在页面底部。我无法确定发生了什么。有任何想法吗？提前致谢。

```
<%@ Page Title="About Us" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeFile="Questionnaire.aspx.cs" Inherits="About" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <style type="text/css">
        .accordion
        {
            width: 950px;
        }

        .accordionHeader
        {
            border: 1px solid #2F4F4F;
            color: white;
            background-color: #2E4d7B;
            font-family: Arial, Sans-Serif;
            font-size: 12px;
            font-weight: bold;
            padding: 5px;
            margin-top: 5px;
            cursor: pointer;
        }
        .accordionHeaderSelected
        {
            border: 1px solid #2F4F4F;
            color: white;
            background-color: #5078B3;
            font-family: Arial, Sans-Serif;
            font-size: 12px;
            font-weight: bold;
            padding: 5px;
            margin-top: 5px;
            cursor: pointer;
        }

        .accordionContent
        {
            background-color: #D3DEEF;
            border: 1px dashed #2F4F4F;
            border-top: none;
            padding: 5px;
            padding-top: 10px;
        }

        .style1
        {
            width: 100%;
        }
    </style>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <h2>
        Questionnaire
    </h2>
    <p>
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
    </p>
    <p>
    </p>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:Accordion ID="Accordion1" CssClass="accordion" HeaderCssClass="accordionHeader"
                HeaderSelectedCssClass="accordionHeaderSelected" ContentCssClass="accordionContent"
                runat="server" Height="100px" Width="950px">
                <Panes>
                    <asp:AccordionPane ID="AccordionPane2" runat="server">
                        <Header>
                            General Business & Project Question</Header>
                        <Content>
                            <table class="style1">
                                <tr>
                                    <asp:Label ID="lblQid2_1" runat="server"></asp:Label>
                                    <asp:Label ID="lblQ2_1" runat="server"></asp:Label>
                                </tr>
                                <tr>
                                    <asp:TextBox ID="txtQ2_1" runat="server"></asp:TextBox></tr>
                                <tr>
                                    <asp:Label ID="lblQid2_2" runat="server"></asp:Label>
                                    <asp:Label ID="lblQ2_2" runat="server"></asp:Label></tr>
                                <tr>
                                    <asp:TextBox ID="txtQ2_2" runat="server"></asp:TextBox>
                                </tr>
                                <tr>
                                    <asp:Label ID="lblQid2_3" runat="server"></asp:Label>
                                    <asp:Label ID="lblQ2_3" runat="server"></asp:Label></tr>
                                <tr>
                                    <asp:TextBox ID="txtQ2_3" runat="server"></asp:TextBox>
                                </tr>
                                <tr>
                                    <asp:Label ID="lblQid2_4" runat="server"></asp:Label>
                                    <asp:Label ID="lblQ2_4" runat="server"></asp:Label></tr>
                                <tr>
                                    <asp:TextBox ID="txtQ2_4" runat="server"></asp:TextBox>
                                </tr>
                                <tr>
                                    <asp:Label ID="lblQid2_5" runat="server"></asp:Label>
                                    <asp:Label ID="lblQ2_5" runat="server"></asp:Label></tr>
                                <tr>
                                    <asp:TextBox ID="txtQ2_5" runat="server"></asp:TextBox>
                                </tr>
                                <tr>
                                    <asp:Label ID="lblQid2_5_1" runat="server"></asp:Label>
                                    <asp:Label ID="lblQ2_5_1" runat="server"></asp:Label></tr>
                                <tr>
                                    <asp:TextBox ID="txtQ2_5_1" runat="server"></asp:TextBox>
                                </tr>
                                <tr>
                                    <asp:Label ID="lblQid2_5_2" runat="server"></asp:Label>
                                    <asp:Label ID="lblQ2_5_2" runat="server"></asp:Label></tr>
                                <tr>
                                    <asp:TextBox ID="txtQ2_5_2" runat="server"></asp:TextBox>
                                </tr>
                                <tr>
                                    <asp:Label ID="lblQid2_5_3" runat="server"></asp:Label>
                                    <asp:Label ID="lblQ2_5_3" runat="server"></asp:Label></tr>
                                <tr>
                                    <asp:TextBox ID="txtQ2_5_3" runat="server"></asp:TextBox>
                                </tr>
                                <tr>
                                    <asp:Label ID="lblQid2_6" runat="server"></asp:Label>
                                    <asp:Label ID="lblQ2_6" runat="server"></asp:Label></tr>
                                <tr>
                                    <asp:TextBox ID="txtQ2_6" runat="server"></asp:TextBox>
                                </tr>
                                <tr>
                                    <asp:Label ID="lblQid2_7" runat="server"></asp:Label>
                                    <asp:Label ID="lblQ2_7" runat="server"></asp:Label></tr>
                                <tr>
                                    <asp:TextBox ID="txtQ2_7" runat="server"></asp:TextBox>
                                </tr>
                                <tr>
                                    <asp:Label ID="lblQid2_8" runat="server"></asp:Label>
                                    <asp:Label ID="lblQ2_8" runat="server"></asp:Label></tr>
                                <tr>
                                    <td>
                                        <asp:Label ID="Label1"  Text="test" runat="server"></asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label ID="Label2" runat="server"></asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label ID="Label3" runat="server"></asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label ID="Label4" runat="server"></asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label ID="Label5" runat="server"></asp:Label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <asp:TextBox ID="txtQ2_8" runat="server"></asp:TextBox>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="TextBox3" runat="server"></asp:TextBox>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="TextBox4" runat="server"></asp:TextBox>
                                    </td>
                                </tr>
                                <tr>
                                    <asp:Label ID="lblQid2_9" runat="server"></asp:Label>
                                    <asp:Label ID="lblQ2_9" runat="server"></asp:Label></tr>
                                <tr>
                                    <asp:TextBox ID="txt2_9" runat="server"></asp:TextBox>
                                </tr>
                                <tr>
                                    <asp:Label ID="lblQid2_10" runat="server"></asp:Label>
                                    <asp:Label ID="lblQ2_10" runat="server"></asp:Label></tr>
                                <tr>
                                    <asp:TextBox ID="txtQ2_10" runat="server"></asp:TextBox>
                                </tr>
                                <tr>
                                    <asp:Label ID="lblQid2_11" runat="server"></asp:Label>
                                    <asp:Label ID="lblQ2_11" runat="server"></asp:Label></tr>
                                <tr>
                                    <asp:RadioButton ID="rboQ2_11y" Text="Yes" runat="server" AutoPostBack="True" GroupName="a"
                                        OnCheckedChanged="rboQ2_11y_CheckedChanged" />
                                    <asp:RadioButton ID="rboQ2_11n" Text="No" runat="server" AutoPostBack="True" GroupName="a"
                                        OnCheckedChanged="rboQ2_11n_CheckedChanged" /></tr>
                                <tr>
                                    <asp:Label ID="lblQid2_11_1" runat="server"></asp:Label>
                                    <asp:TextBox ID="txtQ2_11_1" runat="server"></asp:TextBox>
                                </tr>
                            </table>
                        </Content>
                    </asp:AccordionPane>
                    <asp:AccordionPane ID="AccordionPane3" runat="server">
                        <Header>
                            Solution Architecture & Technical Questions</Header>
                        <Content>
                            <table class="style1">
                                <tr>
                                    <asp:CheckBox ID="chb_1" runat="server" Text="Testing" /></tr>
                            </table>
                        </Content>
                    </asp:AccordionPane>
                </Panes>
            </asp:Accordion>
        </ContentTemplate>
    </asp:UpdatePanel>
    <p>
        <asp:Button ID="btnSave" runat="server" Text="Save" OnClick="btnSave_Click" />
        <asp:Label ID="lblError" runat="server" Text=""></asp:Label>
    </p>
    <p>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:11:50.623

你需要解决这个问题：

```
<tr>
    <asp:Label ID="lblQid2_1" runat="server"></asp:Label>
    <asp:Label ID="lblQ2_1" runat="server"></asp:Label>
</tr> 
```

为此，您在每一行都有`<tr>`标签：

```
<tr>
    <td>
        <asp:Label ID="lblQid2_1" runat="server"></asp:Label>
        <asp:Label ID="lblQ2_1" runat="server"></asp:Label>
    <td>
</tr> 
```

或者，这取决于您需要`<td>`每行 ( ) 有多少列 ( ) ：`<tr>`

```
<tr>
    <td>
        <asp:Label ID="lblQid2_1" runat="server"></asp:Label>
    </td>
    <td>
        <asp:Label ID="lblQ2_1" runat="server"></asp:Label>
    <td>
</tr> 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T23:11:45.530

您的 html 表格有`<tr> table rows but no <td> table columns` 这可能是您的标签和文本在页面底部移动的原因

# php - PHP调用Python，返回多个值

> ID：11462017
> 
> 赞同：3
> 
> 时间：2012-07-12T23:07:50.263
> 
> 标签：php, python, arrays, soap

我正在使用 php 设置一个 SOAP 服务器。在处理 SOAP 请求时，我需要调用一些现有的 python 脚本。这些脚本通常返回 3 个值：成功、描述和数据。

如何将所有三个值传递回 php？

我的要求是：

```
exec('python test.py', $output); 
```

test.py 做：

```
from getData import getData

status, description, data = getData()

return status, description, data 
```

我现有的python看起来像这样：

```
def getData():
    database = Database()

    # get all the Data from the db
    data = database.getData()

    if data is None:
        return False, "...notes...", ""

    return True, "...notes...", data 
```

我不确定 test.py 中的返回是否正确。但即使是这样，当我查看 var_dump($output) 时，我看到的只是“数组”

有人有想法么？

TIA,

布赖恩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T23:11:50.757

由于`exec()`调用将 shell 输出接收到变量`$output`中，因此它无法从 Python 函数接收返回的字符串。您必须打印它们，而不是返回它们，并且每条打印的行都将进入`exec()`数组`$output`。

主脚本必须将值打印到标准输出：

```
from getData import getData
status, description, data = getData()

# Print the values
print("STATUS:", status)
print("DESCRIPTION:", description)
print("DATA:", data) 
```

在 PHP 中，检查您返回的输出：

```
exec("python test.py", $output);
var_dump($output); 
```

您需要将`print`Python 中的语句格式化为可以在 PHP 中轻松解析值的格式，例如每行一个内容，或者您​​可以使用的键：值对`explode()`。

# csv - 如何在 CSV 文件的字符串中包含“，”？

> ID：11462018
> 
> 赞同：-2
> 
> 时间：2012-07-12T23:07:50.980
> 
> 标签：csv

假设你有一个这样的字符串：

```
example_string = "
  "Hi, My name is "Fohsap", and I'm dumb"
  "Hi, Fohsap," she interrupted.
" 
```

你正试图把它变成这样的 CSV 文件：

```
"example_recipient","example_string","example_recipient2","example_string2",..."example_recipientN","example_stringN" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:15:48.290

逗号应该不是问题（因为您将在每个值周围使用双引号），但您需要转义双引号。以下是一些关于此的指南：[CSV reader](http://www.csvreader.com/csv_format.php)，但它实际上取决于您用于读取文件的内容。您还需要关注换行符（对于 Excel，只要您使用引号，这不是问题，对于 Unix，您需要执行正常的 Unix 转义操作，例如 \n）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:26:51.147

这将因使用的[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)实现而异，但一种常见的方法是*引用*包含分隔符 ( `,`) 字符的字段。请注意，如果需要，*引号*( `"`) 字符会进行双重转义。（请参阅[CSV：基本规则和示例](http://en.wikipedia.org/wiki/Comma-separated_values#Basic_rules_and_examples)。）

因此，想象 3 个字段 , ，`a`它们可以写成：`b,c``"hello,world"`

```
a,"b,c","""hello,world""" 
```

个别领域的推理：

```
a                 <- no escape/quote needed
"b,c"             <- quoted so [,] is not treated as separator
"""hello,world""" <- quoted for [,] and the ["]s are double-escaped 
```

我建议**不要**编写自己的 CSV（或者更糟糕的是，手动构建字符串！），而是使用现有的库。它已经解决了错误和边缘情况，例如如何处理嵌入式换行符。

快乐编码！

# c++ - 使用字符串类输入空格时出现 cin 问题

> ID：11462021
> 
> 赞同：10
> 
> 时间：2012-07-12T23:07:56.357
> 
> 标签：c++, string, input

我有以下代码：

# 主文件

```
#include <iostream>
#include <string>

using namespace std;

string name;
string age;

int main() {
    cout <<"Name: ";
    cin >> name;
    cout << endl;
    cout <<"Age: ";
    cin >> age;
    cout << endl;
    cout << "Your name is " << name << ", and you are " << age << " years old."  << endl;
    cout << "Press enter to close this application" << endl;
    getchar();
    return 0;
} 
```

我注意到，如果我在姓名输入中放置一个空格，它不会给我输入姓名的机会，并且它将在空格之后的条目视为年龄。如果这是一个新手错误，我很抱歉，它可能是。我以前编写过 Java，并决定改用 C++，因为它更适合我的需要。我也可能按照你的标准格式化我的代码，如果你愿意，请更正它。

![控制台截图](../Images/ae36694d77c6cbff3fe55edfc4186b7c.png)

我还注意到另一个错误，这是我在 Java 中从未真正遇到过的问题。我不知道如何防止它在完成处理后立即关闭。我听说你可以使用 "system.("pause"); 但我也被告知不要使用它。我真的很困惑该使用什么。我听说过使用 getchar();，但是它似乎没有做任何事情。

任何帮助将不胜感激，因为我是 C++ 的初学者。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-12T23:26:12.200

以下是运行程序时输入缓冲区发生的情况：

```
std::cin >> name; 
```

您正在等待输入。当您输入“Ryan Cleary”并按下回车键时，输入缓冲区包含：

```
Ryan Cleary\n 
```

现在您`cin`可以正常读取输入，在空白处停止，让您的缓冲区如下所示：

```
 Cleary\n 
```

注意开头的空格，因为它在 read 后停止`Ryan`。您的第一个变量现在包含`Ryan`. 但是，如果您想要全名，请使用[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline). 它将读取到换行符，而不仅仅是空格。无论如何，继续：

```
std::cin >> age; 
```

现在你得到另一个输入。不过，那里已经有东西了。它会跳过空白，直到它可以开始读取，只留下缓冲区：

```
\n 
```

您的第二个变量获取 text `Cleary`。请注意仍在缓冲区中的换行符，这将我带到第二部分。`system ("pause");`以一种始终有效的方式进行替换是很棘手的。您最好的选择通常是使用不太完美的解决方案，或者像我喜欢做的那样，不能保证完全按照它所说的那样做：

```
std::cin.get(); //this consumes the left over newline and exits without waiting 
```

好的，所以[`cin.get()`](http://en.cppreference.com/w/cpp/io/basic_istream/get)没有工作。这个怎么样：

```
std::cin.get(); //consume left over newline
std::cin.get(); //wait 
```

这很好用，但是如果你将它复制粘贴到没有留下换行符的地方呢？你必须按两次输入！

解决方案是清除换行符（和其他任何内容），然后等待。这就是 的目的[`cin.sync()`](http://en.cppreference.com/w/cpp/io/basic_istream/sync)。但是，如注释部分所示，不能保证像它所说的那样清除缓冲区，因此如果您的编译器选择不清除，则无法使用它。然而，对我来说，它正是这样做的，留下了一个解决方案：

```
std::cin.sync(); //clear buffer
std::cin.get(); //wait 
```

主要的坏事`system("pause");`是你不知道它将在别人的计算机上运行什么程序。他们本可以更改`pause.exe`或放置一个最先找到的，而您无法知道。这可能会破坏他们的计算机，因为它可能是*任何*程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-12T23:10:24.593

~~您应该尝试[cin.getline](http://www.cplusplus.com/reference/iostream/istream/getline/)，这样，将读取流直到第一个换行符。~~

好的，正如一些人指出的那样，不好的建议。您可以使用[std::getline](http://www.cplusplus.com/reference/string/getline/)读取整行。同样，除非通知，否则分隔符是换行符。要从中读取`cin`，您可以将其作为第一个参数传递（并将字符串作为第二个参数传递）。

```
std::string str;
std::getline(cin, str); // to read until the end of line

std::getline(cin, str, ' '); // to read until a space character, for instance 
```

（当然，您可以省略`std::`行中的部分，因为您已经通知编译器您正在使用`std`命名空间）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-04T19:45:06.303

在 C++ 编程语言`getline(cin, name);`中用于字符串变量输入。

Where`cin`可以是任意的`istream`，并且`name`是您要保存该值的字符串。

# javascript - gwt 使用本机 javascript 发送远程服务器的 POST 请求失败

> ID：11462028
> 
> 赞同：1
> 
> 时间：2012-07-12T23:08:30.183
> 
> 标签：javascript, gwt

我正在开发一个需要将数据发送到远程 cognos 服务器以运行一些报告的 GWT 应用程序。我正在使用本机 javascript 代码发送数据，但不知何故 cognos 服务器没有接收到所有数据，我们将大数据作为 URL 中的参数发送。这是代码：

```
private static native void openReportWindow(String action, String uiObject, String reportName, String reportParams) /*-{
    var form = document.createElement("form");
    form.setAttribute("method", "POST");
    form.setAttribute("action", action);
    form.setAttribute("target", "reports");

    var reportValues = new Array();
    reportValues = reportParams.split('&');

    for(var i=0;i<reportValues.length;i++) {
        var tempArr = new Array();
        tempArr = reportValues[i].split('=');
        var hiddenField = document.createElement("input");
        hiddenField.setAttribute("name", tempArr[0]);
        hiddenField.setAttribute("value", tempArr[1]);
        form.appendChild(hiddenField);
    }

    document.body.appendChild(form);

    // open a new window to display the reports
    window.open(action, 'reports', 'scrollbars=yes,menubar=no,height=600,width=800,resizable=yes,toolbar=no,status=no');
    form.submit();

}-*/; 
```

有一个更好的方法吗？

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:13:10.007

您不应使用 JSNI 创建和提交表单。您可以使用完整的 Java API 来做到这一点。

无论如何，如果您使用 JSNI 这样做，请确保使用 $doc 而不是 document 和 $wnd 而不是 window 来使用正确的 window 和 document 对象。（这与不同的引导加载程序和 GWT 以及代码的加载方式有关）有时窗口对象将指向子框架。$wnd 和 $doc 由编译器设置并且总是指向正确的。

请记住，没有必要去 JSNI 做你想做的事......

# javascript - 在 D3.js 中向 svg:g 元素添加标题属性

> ID：11462029
> 
> 赞同：11
> 
> 时间：2012-07-12T23:08:32.927
> 
> 标签：javascript, jquery, svg, d3.js, treemap

我正在使用 D3.js 构建一个在树形图中显示数据的应用程序。理想情况下，我想要给树形图一个工具提示，以在树形图的每个节点上显示更多信息。树形图由 .JSON 文件提供数据。

我目前正在使用 jquery 插件，我可以在其中通过属性`Poshy Tip`传递此信息。`title=`我知道我需要以某种方式将标题属性添加到树图中的 svg:g 元素，但我无法弄清楚我在哪里设置每个节点的标题属性。

这是我的脚本的开头，我在其中进行所有声明等......

```
<div id="chart"></div>
<script type="text/javascript">
var tree = d3.layout.tree()
.size([h, w - 160]);

var diagonal = d3.svg.diagonal()
.projection(function(d) { return [d.y, d.x]; });

var vis = d3.select("#chart").append("svg:svg")
.attr("width", w)
.attr("height", h)
.append("svg:g")
.attr("transform", "translate(40,0)");

d3.json("test.json", function(json) {
  json.x0 = 800;
  json.y0 = 0;
  update(root = json);
}); 
```

这是我`poshytip()`在头部使用的方式

```
$(function(){
  $('node').poshytip({slide: false, followCursor: true, alignTo: 'cursor', 
    showTimeout: 0, hideTimeout: 0, alignX: 'center', alignY: 'inner-bottom',
    className: 'tip-twitter'});
} 
```

几乎我只是希望能够“鼠标悬停”交互式树状图中的各个项目并获得弹出工具提示..但我没有运气。如何将每个项目设置为具有特定的 ID。我在 .JSON 文件中执行此操作吗？有没有更简单的方法来做到这一点？我是否以错误的方式处理这件事？任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-26T19:53:03.580

```
var vis = d3.select("#chart").append("svg:svg")
.attr("width", w)
.attr("height", h);

var yourGElement = vis.append("svg:g").attr("transform", "translate(40,0)");

yourGElement.append("svg:title").text("Your tooltip info"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-22T04:11:00.130

```
nodeEnter.append("svg:circle")
      .attr("r", 1e-6)
      .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; })
      .append("svg:title")
          .text(function(d){return "Name:"+d.Name+"\nAge:"+d.age;}); 
```

`SVG`动态附加标题属性。一旦我们将鼠标移到圆圈上，它就会在小弹出窗口中显示名称、年龄。姓名、年龄必须在 中指定`test.json`。

# red-gate-ants - 如何从命令行运行 ANTS 内存分析器

> ID：11462030
> 
> 赞同：1
> 
> 时间：2012-07-12T23:08:37.260
> 
> 标签：red-gate-ants

我正在尝试使用 ANTS 内存分析器来监控内存消耗，而我正在运行自动化测试，但没有运气。

我了解 ANTS Memory Profiler 希望负责启动该应用程序。我的方法是创建一个 ANTS 内存分析器项目来调用我的应用程序，然后使用以下命令将 ant 设置为自动启动我的应用程序：

"C:\Program Files\Red Gate\ANTS Memory Profiler 7\RedGate.MemoryProfiler.UI.exe" /nowizard /startimmediately

这来自我能找到的唯一适用于版本 4 的命令行文档。我正在运行版本 7，但这些不起作用

[http://www.red-gate.com/supportcenter/content/ANTS_Profiler/help/4.0/AP_startup_parameters](http://www.red-gate.com/supportcenter/content/ANTS_Profiler/help/4.0/AP_startup_parameters)

如果我尝试从命令行运行 RedGate.MemoryProfiler.UI.exe /help 我只会启动应用程序。该产品是否仍支持命令行？

我也在探索常规的支持渠道，但希望这里有人知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:26:02.850

不，内存分析器不再支持 CL。相反，我们有一个 API：

[https://www.red-gate.com/supportcenter/content/ANTS_Memory_Profiler/help/7.4/amp_snapshot_api](https://www.red-gate.com/supportcenter/content/ANTS_Memory_Profiler/help/7.4/amp_snapshot_api)

每当您想拍摄快照时，请调用 RedGate.MemoryProfiler.Snapshot.TakeSnapshot()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:28:54.813

我自己没有对此进行过测试，但我想知道让 ANTS 运行会起作用（至少对于一次测试运行）

# pagination - Ext JS 4：将存储与其分页内存代理同步

> ID：11462031
> 
> 赞同：3
> 
> 时间：2012-07-12T23:08:40.530
> 
> 标签：pagination, extjs4, store

我正在尝试创建一个网格，该网格在 Ext JS 4.0.7 中有一个带有 PagingMemoryProxy 的商店。我希望能够编辑商店中的信息，但我发现如果我编辑信息并转到下一页，我会丢失前一页上编辑的信息。我的代码如下。

```
Ext.Loader.setConfig({
  enabled: true
});

Ext.Loader.setPath('Ext.ux', 'examples/ux');

Ext.require('Ext.ux.data.PagingMemoryProxy');

Ext.onReady(function() {
  var data = [
    {name: 'jack johnson', text: 'record1'},
    {name: 'jack johnson', text: 'record2'},
    {name: 'jack johnson', text: 'record3'},
    {name: 'jack johnson', text: 'record4'}
  ];

  var store = Ext.create('Ext.data.Store', {
    fields: ['name', 'text'],
    data: data,
    proxy: {
      type: 'pagingmemory'
    },
    pageSize: 2
  });

  var grid = Ext.create('Ext.grid.Panel', {
    store: store,
    region: 'center',
    id: 'thegrid',
    plugins: [{
      ptype: 'cellediting',
      clicksToEdit: 1,
      listeners: {
        edit: function(editor, e) {
          //e.record.commit();
        }
      }
    }],
    columns: [{
      text: 'Name',
      dataIndex: 'name',
      editor: {
        allowBlank: false
      }
    }, {
      text: 'Text',
      dataIndex: 'text'
    }],
    dockedItems: [{
      xtype: 'pagingtoolbar',
      store: store,
      dock: 'bottom',
      displayInfo: true
    }],
  });

  Ext.create('Ext.Viewport', {
    layout: 'border',
    items: [grid]
  });
}); 
```

我想知道如何将商店的数据与代理的数据同步，因为商店的数据实际上包含记录，而代理的数据包含记录的数据，因此无法在代理中通过 id 找到记录。我决定尝试一下同步方法。

使用同步方法后，似乎什么也没发生，所以我想也许我应该提交记录......因此注释掉的`e.record.commit`代码。当那没有做任何事情时，我开始在 Firebug 中进行挖掘，最终在 ext-all-debug`me.getNewRecords`代码中看到了第 44,600 行。这最终导致我只返回未提交的记录（因为它显然检查了记录的幻像属性），因此，我编辑的任何记录都不会包含在第`toCreate`44,600 行的变量中。

当我取出 e.record.commit 时，toCreate 变量现在包含已编辑的记录，但这些都没有帮助解决我的问题......只是最初的探索和我发现的内容。

所以我的问题是，如何将存储与 PagingMemoryProxy 同步？是否可以？如果是这样，我该怎么办？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:45:24.453

Solved the problem by looping through the JSON data that I eventually add to the PagingMemoryProxy... basically added an "index" value to each record in the JSON, so when I want to edit the record in the store, I can easily index into its PagingMemoryProxy by using this index value. Simple fix.

# c# - C# 日期设置为文本框，将数据作为其他格式发送到文本文件

> ID：11462032
> 
> 赞同：0
> 
> 时间：2012-07-12T23:08:46.200
> 
> 标签：c#, datetime

我有一个设置为今天日期的文本框。问题是它在视觉参考表单上的格式为 07/12/12，但它需要在 2012 年 7 月 12 日的报告（word doc/data thru mail merge）上。用户可以编辑日期，它只是填充今天的日期是最常用的。

```
 string today = DateTime.Now.ToString("MMddyy");
        LetterDate.Text = today;

        var Date = String.Format(DateTime.ParseExact(LetterDate.Text,"MMddyy", CultureInfo.CurrentCulture).ToString(), "MMMM dd, yyyy"); 
```

日期给出的输出为 7/12/2012 12:00:00 AM --- 我很迷茫为什么/如何获得这种格式。

我知道这应该很容易，但它的一天结束，我只是没有看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:18:21.173

尝试

```
 string today = DateTime.Now.ToString("MMddyy");
        LetterDate.Text = today;
        var date = Convert.ToDateTime(LetterDate.Text).ToString("MMMM dd, yyyy"); 
```

看看这个网站以获得更多参考：

[自定义日期和时间格式字符串 MSDN](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

[DateTime C# 角的字符串格式](http://www.csharp-examples.net/string-format-datetime/)

最好的祝福

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:20:49.777

您可以在不使用 DateTime.Parse 的情况下实现 2012 年 7 月 12 日的格式，如下所示：

`LetterDate.Text.ToString("MMMM dd, yyyy");`

# windbg - 使用 WinDbg 时可以在托管应用程序的源代码处设置断点吗？

> ID：11462033
> 
> 赞同：6
> 
> 时间：2012-07-12T23:09:01.380
> 
> 标签：windbg, sos

我尝试在 ac# 应用程序的源代码中使用 WinDbg 设置断点，但没有成功。当我使用 WinDbg 时，有没有办法在托管应用程序的源代码处设置断点？

复制步骤如下：

1.制作一个简单的c#应用程序

```
class Proram
{
  static void MyWrite(){
      Console.WriteLine("test");
  }
  static void Main(string[] args){
      Console.ReadLine();
      MyWrite();
  }
 } 
```

2.从 WinDbg 启动 .NET 应用程序
3.将其源文件打开到 WinDbg
4.中断执行（在*ReadLine()*中的应用程序时）
5.设置符号路径并加载 sos.dll
6.在*Console.WriteLine( "test")*使用 F9
7\. 执行 "g" 命令 8.
发生错误

```
Unable to insert breakpoint 0 at <address>, Win32 error 0x998 
     "Invalid access to memory location."
bp0 at <address> failed
WaitForEvent failed 
```

我有应用程序的私有符号，所以我不认为这是与符号相关的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-07T17:44:57.133

尝试：

```
0:000> sxe ld clrjit.dll

ModLoad: 72ea0000 72f1d000   C:\Windows\Microsoft.NET\Framework\v4.0.30319\clrjit.dll

0:000> .loadby sos clr

0:000> !bpmd SslStreamTest.exe SslStreamTest.Program.Main

Found 1 methods in module 00bb2edc… 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:52:23.120

使用 !sex.mbp。例如，要在 myapp.cs 处中断，第 10 行：!mbp myapp.cs 10

[您可以从http://www.stevestechspot.com](http://www.stevestechspot.com)免费下载 sosex

# c++ - c++模板元编程是函数式编程的一种形式吗

> ID：11462037
> 
> 赞同：14
> 
> 时间：2012-07-12T23:09:20.380
> 
> 标签：c++, templates, functional-programming

c++ 模板元编程是函数式编程的一种形式吗？如果是，是否存在一些陷阱，例如与 c++ 模板元编程相关的非尾递归的 stackoverflow？

对于[这个问题](https://stackoverflow.com/questions/112277/best-introduction-to-c-template-metaprogramming)中的阶乘模板示例，我猜它是标准的函数式编程。还是相似只是表面现象？

```
#include <iostream>
using namespace std;

template< int n >
struct factorial { enum { ret = factorial< n - 1 >::ret * n }; };

template<>
struct factorial< 0 > { enum { ret = 1 }; };

int main() {
    cout << "7! = " << factorial< 7 >::ret << endl; // 5040
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-03-10T12:39:58.790

> c++ 模板元编程是函数式编程的一种形式吗？

是的！模板扩展没有副作用，所以它是纯函数式的。

> 如果是，是否存在一些陷阱，例如与 c++ 模板元编程相关的非尾递归的 stackoverflow？

绝对地。阶乘并不是一个很好的证明，因为结果会在你的堆栈溢出之前很久，但是长递归肯定会导致编译器出错。然而，有趣的是，编译器倾向于以这样一种方式实现模板，即您可以获得自动记忆。例如，斐波那契数列的简单编写实现倾向于在 O(n) 时间而不是 O(2^n) 时间内编译。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-12T23:32:01.720

我认为最好的答案是这两个概念是完全不同的东西。然而，这并没有真正的帮助，所以这里有一些我能想到的关键点：

*   C++ 模板和 ML 等函数式语言（参数多态性）都是[*泛型编程*](http://en.wikipedia.org/wiki/Generic_programming)的示例，因此在一个问题中一起提及它们是有意义的。在学术界，甚至还有[关于通用编程的研讨会](http://www.wgp-sigplan.org/2012/)，通常涵盖 C++ 模板内容和 ML 风格的函数式编程。

*   但是，模板元编程为您提供了一种编写代码的方法，该代码在 C++ 代码编译期间得到“评估”，因此您只能将其用于非常有限的任务。另一方面，函数式程序通常在运行时运行，您可以定义复杂的数据结构、构建抽象等（您可以使用模板元编程来做一些事情，但它看起来很难看）。

*   为什么阶乘示例类似于函数式编程中的阶乘？当您使用模板元编程时，您无法定义“可变变量”（因为您只是在定义新类型或模板），因此模板元编程可能感觉有点像函数式编程风格。

*   使用模板元编程编写的代码在编译时进行评估。这意味着它不能依赖于用户输入！它要么编译，要么不编译（编译器可能对递归深度有一些限制，并在一段时间后放弃）。另一方面，函数式程序可以接受一些输入然后进行评估（这意味着它们可以使用所有可用的堆栈或内存然后失败）。

^(对于函数式程序员，我知道像[Agda](http://en.wikipedia.org/wiki/Agda_%28programming_language%29)这样的一些函数式语言也可以在编译时评估事物，但我认为最好保持简单！)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-30T08:55:20.143

模板元编程在理论上是一种纯粹的面向函数的语言，即函数只依赖于它们的参数，而不考虑任何全局或局部状态。然而，我们似乎可以使用友元注入来捕获和检索元编程状态。因此，函数可以根据全局/局部元编程状态返回不同的结果。

# apache - mod_rewrite - 我需要一个非常简单的示例来在内部重定向 url

> ID：11462039
> 
> 赞同：0
> 
> 时间：2012-07-12T23:09:26.347
> 
> 标签：apache, .htaccess, mod-rewrite

我确信这很简单，但是我发现的所有示例都使它看起来非常复杂。

我有一个本地 Web 服务器作为开发服务器 ( `http://localhost:8080`) 运行，并且我有另一个 Web 服务器正在运行 ( `http://nameofnetworkmachine:80`)。我需要弄清楚如何将所有流量从内部路由`nameofnetworkmachine:80`到`localhost:8080`.

我在 apache2 的 httpd.conf 文件底部包含了以下代码：

```
RewriteEngine  on
RewriteRule    ^/$  localhost:8080/ [PT] 
```

但不会发生重定向。

有谁知道最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:50:36.157

把它放在以下的 webroot 中`nameofnetworkmachine`：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} .*
RewriteRule ^(.*)$ http://localhostrealname:8080 
```

# javascript - 访问嵌入式 ruby 中的 javascript 变量

> ID：11462044
> 
> 赞同：0
> 
> 时间：2012-07-12T23:09:53.870
> 
> 标签：javascript, ruby, variables

我在视图中使用以下 JS 代码来计算两个变量“user_name”和“user_uid”：

```
<script type="text/javascript">
function f1() {
.
.
.
user_name = "some variable";
user_uid = "another variable";
});
}
</script> 
```

我想将两个变量“user_name”和“user_uid”发送到我的控制器。我使用以下代码：

```
<%= link_to "GO!", new_user_path(:userName => user_name, :userUid => user_id), :remote=> true %> 
```

我的控制器和模型工作正常。但是这两个变量并没有从 JS 传递到上面嵌入的 ruby​​ 代码。我会很感激任何关于我做错了什么的指示。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T23:15:39.417

最大的错误是不知道代码在哪里执行：

*   在客户端看到任何 HTML 之前，内部代码`<%= ... %>`（[Erb 标记）在服务器上执行。](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)
*   JS 从服务器发送后，在客户端执行。

有许多选项，包括使用 Ruby 变量创建 JS 变量值——这是否是*最佳*选项取决于。例如：

```
function f1() {
  var user_name = "<%= escape_javascript(a_ruby_variable) %>";
  // Or, more concisely:
  var user_uid = "<%=j another_ruby_variable %>"; 
```

Ruby 变量可以在模板、控制器等中初始化。

同样，它是否*应该*是值得商榷的。

# gwt - 如何在绝对定位的父面板中构建 GWT 下拉菜单栏？

> ID：11462051
> 
> 赞同：0
> 
> 时间：2012-07-12T23:10:52.363
> 
> 标签：gwt, gwt2, uibinder, gwt-platform

我有一个带有标题和内容的 GWT 应用程序。标头是绝对定位的

```
HorizontalPanel 
```

内容也是

```
HorizontalPanel 
```

这是绝对定位的。

如何在标题中获得一个不受标题面板高度限制的下拉菜单，即绝对定位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:36:40.727

最简单的方法可能是使用[PopupPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/PopupPanel.html)并将您的菜单内容放入其中。如果您想实现动画下拉动作，例如可以使用[DisclosurePanel](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/DisclosurePanel.html)作为弹出窗口中的主容器。

您可以在显示之前将 PopupPanel 的坐标设置在它应该打开的位置。您可以编辑样式以使其看起来像您自己的菜单。

看看 GWT[展示](http://gwt.google.com/samples/Showcase/Showcase.html)，例如使用这些。

# cakephp - CakePHP 创建路由仅在所有其他路由失败时使用

> ID：11462057
> 
> 赞同：1
> 
> 时间：2012-07-12T23:11:41.120
> 
> 标签：cakephp, routes, custom-routes

我正在使用 PagesController（与 Ca​​ke 内置的不同），我想连接一个新路由：

```
Router::connect('/*', array('controller' => 'pages', 'action' => 'view')); 
```

如果所有其他（默认）路由都失败，我真的希望 Cake 只使用这条路由。但是，我似乎无法让它与路线一起工作。我有一种预感，我需要使用自定义 CakeRoute 类，但我完全不知道如何让它做我想做的事。

有人可以帮我解决这个问题吗？

[编辑] 哦，知道我使用的是 CakePHP 2.2.0 可能很有用

[第二次编辑] 应要求提供更多信息。我的路由器目前看起来像这样：

```
Router::connect('/', array('controller' => 'pages', 'action' => 'index'));
CakePlugin::routes();
require CAKE . 'Config' . DS . 'routes.php';
Router::connect('/*', array('controller' => 'pages', 'action' => 'view')); 
```

当我转到 /home/about 时，我得到“错误：找不到 HomeController”。我也试过这个：

```
Router::connect('/', array('controller' => 'pages', 'action' => 'index'));
CakePlugin::routes();
Router::connect('/*', array('controller' => 'pages', 'action' => 'view'));
require CAKE . 'Config' . DS . 'routes.php'; 
```

但随后一切都被路由到我的页面控制器，我不希望这样。我只希望在所有其他路线都失败时使用该路线。

同样，我有一种预感，这只能通过自定义 CakeRoute 类来完成，但我不知道具体如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:00:16.050

尝试将您的一般路线放在最后但在`CakePlugin::routes();`线路之前。像这样的东西：

```
Router::connect('/', array('controller' => 'pages', 'action' => 'index'));
//all your routes
Router::connect('/*', array('controller' => 'pages', 'action' => 'view'));

CakePlugin::routes();
require CAKE . 'Config' . DS . 'routes.php'; 
```

希望这可以帮助

已编辑：我有一个具有相同原理的网站..我使用了这条路线

```
Router::connect('/:slug', array('controller' => 'users', 'action' => 'view'),array('pass'=>array('slug'),'slug'=>"[a-z0-9\-]+")); 
```

最后（之前`CakePlugin::routes()`），它对我来说工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-04T23:54:41.133

我知道这是一篇旧帖子，但对于任何在 Cake 中挣扎于包罗万象的路由的人来说，这里是瘦的：

当您创建诸如 /* 之类的包罗万象的路由时，您就允许该定义抓取 URL 中的任何内容。换句话说，它非常贪婪。据我所知，没有办法有条件地启用这种定义。这意味着如果在定义 /* 之前 URL 不匹配任何路由定义，则 /* 定义将选择它。所以总是最后定义包罗万象的路线，我们当然已经知道了:-)

现在，为了确保 Cake 继续“正常”运行——这意味着像 /posts/view/4 这样的 URL 将路由到 PostsController::view($id = 4)——你实际上需要在路由文件，在 /* 定义之前。是的，如果您在 Cake 中使用包罗万象的路由，则需要在其前面显式定义每个 Controller::method() 路由以利用标准的 Cake 路由约定。

虽然这听起来可能令人生畏，但如果您在 routes.php 中按字母顺序排列所有路由定义，这还不错。只需查看项目的 /Controller 目录并以相同的顺序列出它们。我还在每个控制器分组上方实现了一个注释，因为有些控制器需要多个路由定义。这是从我的一个 routes.php 文件中提取的示例：

```
/**
 * CaseStudiesController
 */
Router::connect('/case-studies', array('controller' => 'case_studies', 'action' => 'index'));
Router::connect('/case-studies/:action', array('controller' => 'case_studies'));
Router::connect('/case-studies/:action/*', array('controller' => 'case_studies'));
Router::connect('/case-studies/*', array('controller' => 'case_studies', 'action' => 'index'));

/**
 * PostsController
 */
Router::connect('/posts', array('controller' => 'posts', 'action' => 'index'));
Router::connect('/posts/:action', array('controller' => 'posts'));
Router::connect('/posts/:action/*', array('controller' => 'posts'));
Router::connect('/posts/*', array('controller' => 'posts', 'action' => 'index')); 
```

一般来说，每个控制器只需要 4 个路由定义。最后，在我的例子中，这是 routes.php 的底端：

```
/**
 * UrlAliasesController
 *
 * This catch-all route is very greedy and even grabs the default CakePHP /:controller/:action URL format
 * Above this line, all public controller methods must be accounted for in specific routes
 */
Router::connect('/*', array('controller' => 'url_aliases', 'action' => 'check', 'admin' => false));

/**
 * Load all plugin routes. See the CakePlugin documentation on
 * how to customize the loading of plugin routes.
 */
CakePlugin::routes();

/**
 * Load the CakePHP default routes. Only remove this if you do not want to use
 * the built-in default routes.
 */
require CAKE . 'Config' . DS . 'routes.php'; 
```

# c# - WPF TextBlock 文本仅更新一次

> ID：11462064
> 
> 赞同：0
> 
> 时间：2012-07-12T23:12:12.610
> 
> 标签：c#, wpf, tooltip, textblock, mouseenter

对于可能的菜鸟问题，我很抱歉，我对 C# 和 WPF 很陌生。

我创建了一个带有一些控件的窗口。他们都填写了工具提示。我想在窗口底部有一个专用区域（一个 TextBlock）来显示这些提示而不是工具提示气球。我已经看到了一个解决方案，类似的东西：

```
public partial class MyWindow : Window
{
    public MyWindow()
    {
        InitializeComponent();

        EventManager.RegisterClassHandler(typeof(FrameworkElement), FrameworkElement.MouseEnterEvent, new MouseEventHandler(MyMouseEventHandler));
    }

    private void MyMouseEventHandler(object sender, MouseEventArgs e)
    {
        // To stop the tooltip from appearing, mark the event as handled
        // But not sure if it is really working
        e.Handled = true;

        FrameworkElement source = e.OriginalSource as FrameworkElement;
        if (null != source && null != source.ToolTip)
        {
            // This really disables displaying the tooltip. It is enough only for the current element...
            source.SetValue(ToolTipService.IsEnabledProperty, false);

            // Instead write the content of the tooltip into a textblock
            textBoxDescription.Text = source.ToolTip.ToString();
        }
    } 
```

文本块没有数据绑定，只是简单地从代码中设置文本。

我的问题是，当使用 ShowDialog() 方法启动对话框时，这在第一次运行时工作正常。但是在关闭（或隐藏）并再次显示**textBoxDescription 后**不再更新。该事件被引发和处理，我可以在调试时看到，该控件甚至到达设置**textBoxDescription.Text**的行，只是 TextBlock 不再更新。我试图用 TextBox 替换 TextBlock，但结果相同。

有没有办法强制 TextBlock 更新？为什么我需要它？为什么它第一次起作用？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:03:31.730

尝试在 MyWindow 类型的静态构造函数中执行 RegisterClassHandler，并提供静态方法。

你必须在回调方法中做一些不同的事情（因为它是静态的）才能找到你的 textBoxDescription 元素.....递归地使用 LogicalTree.GetParent 直到你找到你的 Window 元素......然后做一个 LogicalTree.FindLogicalNode 到找到你的 textBoxDescription 命名元素。

[http://www.japf.fr/2009/08/wpf-memory-leak-with-eventmanager-registerclasshandler/](http://www.japf.fr/2009/08/wpf-memory-leak-with-eventmanager-registerclasshandler/)

```
public partial class MyWindow : Window
{
    static MyWindow()
    {
        EventManager.RegisterClassHandler(typeof(FrameworkElement), FrameworkElement.MouseEnterEvent, new MouseEventHandler(MyMouseEventHandler));
    }

    public MyWindow()
    {
        InitializeComponent();
    }

    static private void MyMouseEventHandler(object sender, MouseEventArgs e)
    {
        // To stop the tooltip from appearing, mark the event as handled
        // But not sure if it is really working
        e.Handled = true;

        FrameworkElement source = e.OriginalSource as FrameworkElement;
        if (null != source && null != source.ToolTip)
        {
            // This really disables displaying the tooltip. It is enough only for the current element...
            source.SetValue(ToolTipService.IsEnabledProperty, false);

            // Instead write the content of the tooltip into a textblock
            textBoxDescription.Text = source.ToolTip.ToString();
        }
    } 
```

# asp.net - 调用时不显示带有图像的 aspx

> ID：11462067
> 
> 赞同：0
> 
> 时间：2012-07-12T23:13:04.913
> 
> 标签：asp.net, image

我有两个 aspx 页面：Default.aspx 和 with_Image.aspx。在 Default.aspx 中，我尝试显示一个位于 with_Image.aspx 中的 jpg 图像。with_Image.aspx 显示 jpg 图像没有问题。但是 Default.aspx 不显示任何图像，只显示一个“X”。

在 Default.aspx 上：

```
<body>
    <form id="form1" runat="server">

    <div>
    <img src="with_Image.aspx" runat="server" id="imgCaptcha" />    
    </div>

    </form>
</body>
</html> 
```

在 with_Image.aspx 上：

```
<body>
    <form id="form1" runat="server">    
        <img src="image.jpg" />
    </form>
</body>
</html> 
```

什么不见​​了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:38:45.850

你问的是不可能的。

您需要使用 jquery、iframe 或将其从 asp.net 流式写入您的网页，以将单独的网页插入到您的 html 代码中。

此外，您所做的并不是最佳实践，而且由于有 2 个带有 runat="server" 的表单，它会导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:27:31.430

这对您不起作用，因为 img 标记的 src 属性需要是[图像文件的 URL](http://www.w3.org/wiki/HTML/Elements/img)，但您已将其指向网页 (with_Image.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-18T22:10:35.103

2012年的问题，但我想我会为此提供答案。

我刚刚做了一个类似设置的项目，这是我的解决方案。

默认.aspx

```
<td style="width:80%">
    <img id="imgCaptcha" runat="server" />
</td> 
```

默认.aspx.cs

```
imgCaptcha.Src = "Image.aspx?path" + ImagePath; 
```

我的 Image.aspx 是空白的，但在 Image.aspx.cs 中有以下代码

```
string path = Request.QueryString["path"].ToString(); 
string ext = path.Substring(path.LastIndexOf("."));
if (File.Exists(path))
{
    Response.Clear();
    Response.ClearHeaders();
    switch (ext.ToUpper())
    {
        case ".JPG":
        case ".JPEG": Response.ContentType = "image/JPEG";
            break;
        case ".GIF": Response.ContentType = "image/GIF";
            break;
        case ".PDF": Response.ContentType = "application/pdf";
            break;
    }
    Response.WriteFile(path, true);
    Response.End(); 
```

这应该允许您在任何块内显示图像页面。

# google-app-engine - 从 appengine 数据库中检索数据并在表单中显示

> ID：11462068
> 
> 赞同：0
> 
> 时间：2012-07-12T23:13:13.790
> 
> 标签：google-app-engine

我正在使用 python 为 appengine 开发 CMS，我有一个表单页面，很像 wordpress 的工作方式，您可以在其中输入页面的标题、内容和其他元数据。可以说这是 AddPage

保存页面后，将存储数据并在文章索引页面上显示链接。就像点击帖子时的 wordpress 一样。我试图做的是，一旦在索引页面上单击链接，用户就会被重定向到与 AddPage 完全相同的页面，但它已经填充了数据以供编辑。

如果我错过了一些东西，我该怎么做：

```
class EditPageHandler(webapp2.RequestHandler):
    def get(self, articleID):
        page_details = db.GqlQuery("SELECT * FROM TitlePage WHERE key_name = '" + articleID + "'" )
    pageDetails_list = page_details.fetch(10)
    template = jinja_environment.get_template('templates/editcourse.html')
    self.response.out.write(template.render({'page_details':pageDetails_list})) 
```

html 模板将显示如下内容：

```
<input id="author" type="text" name="author" maxlength="120" value="{{ page_details.Author }}"> 
```

我没有收到任何错误，这不起作用，所以这里有问题：

我也尝试过像这样输出它：

仍然没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:44:45.817

我设法解决了这个问题，我上面使用的方法都是错误的，而有效的是：

```
class EditPageHandler(webapp2.RequestHandler):
    def get(self, articleID):
          page_details = TitlePage.get_by_key_name(articleID)
          template = jinja_environment.get_template('templates/editcourse.html')
          self.response.out.write(template.render({'detail':page_details})) 
```

至于我刚刚做的html：

```
<input id="author" type="text" name="author" value="{{ detail.Author }}"> 
```

它奏效了:)

感谢 gwynhowell 提出的改进代码的建议，我进行了更改，非常感谢 Sebastian Kreft 的建议，让我走上了正确的道路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T06:47:55.553

伙计，根据您发布的代码，显然它`pageDetails_list = page_details.fetch(10)`会返回一个列表/数组。

但是在模板方面，你做的事情 `<input id="author" type="text" name="author" maxlength="120" value="{{ page_details.Author }}">` 实际上是错误的，因为这里的**page_details**期望对象。但你通过那里的名单。所以它应该像这样在for循环中，

```
{% for page_detail in page_details %}
   //do stuff..
{% endfor %} 
```

我想，这应该对你有用。

# cookies - 识别计算机

> ID：11462072
> 
> 赞同：0
> 
> 时间：2012-07-12T23:14:05.067
> 
> 标签：cookies, ip

我想识别访问者的计算机并对其进行跟踪。我记录访问过的页面。例如，当您访问我的网页时，我正在生成您的 ip 的 md5 哈希并将其作为 cookie 发送给您。然后，当您浏览我的页面时，我会使用此 cookie 的值记录每个页面。所以，当你明天访问我的网页时，我可以告诉你， *你昨天访问了这些页面：*

但是，如果您更改您的 ip，我将丢失有关您的所有信息。

我可以用什么代替 IP 地址来识别计算机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:18:08.207

真的没什么。HTTP 是无状态的，你能做的最好的就是尝试通过请求中的标头来缩小范围。$_SERVER['REMOTE_ADDR'] + $_SERVER['HTTP_USER_AGENT'] + $_SERVER['HTTP_ACCEPT_CHARSET'] 什么的。

然而，这并没有真正起作用，因为即使最终用户没有离开他们的方式，这些信息也会发生变化。

[大型网站](http://www.google.com/goodtoknow/)所做的就是向您发送会话 cookie。他们通常不会特意跟踪您。

# python - 使用 Python 创建 mediaWiki 页面

> ID：11462075
> 
> 赞同：0
> 
> 时间：2012-07-12T23:14:29.560
> 
> 标签：python, shell, mediawiki

只是在工作中进行头脑风暴，并认为使用我们所有的 shell 实用程序并将它们的 --help 文档放到网上的工具会很有用。

是否有 py 模块，或者有人对使用 python 在 mediaWiki 中自动创建页面有任何建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:17:41.797

[PyWikipediaBot](http://www.mediawiki.org/wiki/Manual%3aPywikipediabot)可能是您正在寻找的。

在内部，它与 MediaWiki API 交互。您可以通过访问您的 wiki 安装中的“api.php”（或查看另一个安装的 api.php：例如[http://en.wikipedia.org/w/api.php](http://en.wikipedia.org/w/api.php)）来获取相关信息。

# eclipse - java.io.FileNotFoundException: C:\Program Files\Apache Software Foundation\Tomcat 7.0\logs\localhost_access_log.2012-07-12.txt（访问被拒绝）

> ID：11462080
> 
> 赞同：4
> 
> 时间：2012-07-12T23:15:20.240
> 
> 标签：eclipse, tomcat, servlets

我正在尝试通过在 Tomcat 上运行它来测试我的 servlet。但是，我收到上述错误（有时会发生此错误，但之前 servlet 运行良好）。几个事实：

1.  我已经彻底查看了[这个类似问题](https://stackoverflow.com/questions/10207033/http-status-404-description-the-requested-resource-is-not-available-apache-t)的解释，以及[这里](https://stackoverflow.com/questions/4728110/the-requested-resource-is-not-available-when-running-tomcat-7-0-after-downl)和[这里](https://stackoverflow.com/questions/2280064/tomcat-started-in-eclipse-but-unable-to-connect-to-link-to-http-localhost8085)

2.  当我尝试重新启动 Tomcat（从 Eclipse 的“服务器”选项卡中）时，我从控制台收到一些错误日志：

“严重：无法打开访问日志文件 [~\Tomcat 7.0\logs\localhost_access_log.2012-07-12.txt]”，在日志输出的最后，有“INFO: SessionListener: sessionDestroyed('E9A6117FDF54752D80A1B9B72F2B83D3') -- 在本文底部查看更多信息

3.  我在“C:\Program Files\Apache Software Foundation\Tomcat 7.0\logs”查看了我的日志文件，并且没有与上面第 (2) 项中的内容相似的文件

4.  我通过 Eclipse“部署”我的应用程序（也就是说，在开发过程中，我依赖 Eclipse 来启动 Tomcat），只有当我通过将适当的 java 类文件复制到 Tomcat 的 /webapps/ 中获得稳定版本的项目时才进行真正的部署WEB-INF/classes 文件夹并重启 Tomcat

最重要的是，5\. 输入“ [http://localhost:8080](http://localhost:8080) ”将我带到 Tomcat 主页（所以我很确定服务器正在运行），而“ [http://localhost:8080/MyProjectName/MyServlet](http://localhost:8080/MyProjectName/MyServlet) ”在浏览器中导致显示此问题标题的错误。

有什么想法/帮助吗？非常感谢！

在此处查看更多错误日志

```
>!Jul 12, 2012 6:18:18 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jdk1.7.0\jre\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/bin;C:/Program Files/Java/jre7/lib/i386;C:\Users\Kiptoo\introcs\java\bin;C:\Windows\system32;C:\Windows;C:\Windows\system32\wbem;C:\Program Files\MiKTeX 2.8\miktex\bin;C:\Windows\System32\WindowsPowerShell\v1.0;C:\Program Files\Matlab\R2010a\runtime\win32;C:\Program Files\Matlab\R2010a\bin;C:\Program Files\TortoiseSVN\bin;C:\Program Files\QuickTime\QTSystem;C:\Users\Kiptoo\introcs\bin;C:\Users\Kiptoo\introcs\java\bin;C:\Python27;C:\Program Files\Eclipse;;.
Jul 12, 2012 6:18:20 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Jul 12, 2012 6:18:20 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Jul 12, 2012 6:18:20 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 2050 ms
Jul 12, 2012 6:18:20 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Jul 12, 2012 6:18:20 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.25
Jul 12, 2012 6:18:20 PM org.apache.catalina.valves.AccessLogValve open
SEVERE: Failed to open access log file [C:\Program Files\Apache Software Foundation\Tomcat 7.0\logs\localhost_access_log.2012-07-12.txt]
java.io.FileNotFoundException: C:\Program Files\Apache Software Foundation\Tomcat 7.0\logs\localhost_access_log.2012-07-12.txt (Access is denied)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    at org.apache.catalina.valves.AccessLogValve.open(AccessLogValve.java:1115)
    at org.apache.catalina.valves.AccessLogValve.startInternal(AccessLogValve.java:1222)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardPipeline.startInternal(StandardPipeline.java:185)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1144)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1568)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1558)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

Jul 12, 2012 6:18:20 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\AndroidTest
Jul 12, 2012 6:18:20 PM org.apache.catalina.core.StandardContext postWorkDirectory
WARNING: Failed to create work directory [C:\Program Files\Apache Software Foundation\Tomcat 7.0\work\Catalina\localhost\AndroidTest] for context [/AndroidTest]
Jul 12, 2012 6:18:21 PM org.apache.catalina.util.SessionIdGenerator createSecureRandom
INFO: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [175] milliseconds.
Jul 12, 2012 6:18:21 PM org.apache.jasper.EmbeddedServletOptions <init>
SEVERE: The scratchDir you specified: C:\Program Files\Apache Software Foundation\Tomcat 7.0\work\Catalina\localhost\AndroidTest is unusable.
Jul 12, 2012 6:18:21 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\docs
Jul 12, 2012 6:18:21 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\examples
Jul 12, 2012 6:18:21 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextInitialized()
Jul 12, 2012 6:18:21 PM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextInitialized()
Jul 12, 2012 6:18:21 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: attributeAdded('org.apache.jasper.compiler.TldLocationsCache', 'org.apache.jasper.compiler.TldLocationsCache@ff8399')
Jul 12, 2012 6:18:21 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\host-manager
Jul 12, 2012 6:18:22 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\manager
Jul 12, 2012 6:18:22 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\ROOT
Jul 12, 2012 6:18:22 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Jul 12, 2012 6:18:22 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Jul 12, 2012 6:18:22 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 2225 ms
Jul 12, 2012 6:19:22 PM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: sessionDestroyed('E9A6117FDF54752D80A1B9B72F2B83D3') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T01:28:02.603

> 只有当我有一个稳定版本的项目时才进行真正的部署，方法是将适当的 java 类文件复制到 Tomcat 的 /webapps/WEB-INF/classes 文件夹并重新启动 Tomcat

停在那里：你永远不应该把任何文件放进去`webapps/WEB-INF`，并期望它会带来任何好处。使用广为接受的打包方式（例如 WAR 文件或分解的 WAR 结构）将您的 webapp 正确部署到 webapps 目录中。

二、问题很明显：`java.io.FileNotFoundException: C:\Program Files\Apache Software Foundation\Tomcat 7.0\logs\localhost_access_log.2012-07-12.txt (Access is denied)`。您的 Tomcat 无法写入该文件。仅仅因为您是管理员并不意味着 Tomcat 可以写入该目录：据我所知，Tomcat 不能很好地与 UAC 配合使用，而您正在尝试写入`Program Files`通常需要一些丑陋的 UI 凭据输入 hack。

因此，请检查您的文件（和目录）权限。检查Tomcat进程的uid：确保它们都是好的。最后，考虑使用`CATALINA_HOME`and `CATALINA_BASE`（阅读文档以了解如何做到这一点）来解决您的所有权限问题。

# nhibernate - 批量大小，用于在 nhibernate 中有效地急切加载集合对象图

> ID：11462086
> 
> 赞同：1
> 
> 时间：2012-07-12T23:15:49.827
> 
> 标签：nhibernate

我想有效地加载一组对象。以下代码示例显示了我现在正在做的事情。但是 c.CommunicationMethods 和 c.Roles 对象一次加载 1 个 Sql 语句。我看到了对袋子和批量大小的引用...有人可以提供示例映射文件引用吗？那是我最好的选择吗？我可以在此处保留循环并批处理我的 sql 语句吗？

CommunicationMethods 和 Roles 都在联系人映射文件中定义为多对一。

```
NHibernateUtil.Initialize(entity.Collection1);
NHibernateUtil.Initialize(entity.Collection2);

NHibernateUtil.Initialize(entity.Contacts);
foreach (var c in entity.Contacts)
{
NHibernateUtil.Initialize(c.CommunicationMethods);
NHibernateUtil.Initialize(c.Roles);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T14:08:01.153

而不是 Initialize 您可以指定在查询时要初始化哪些集合，并且使用多查询可以使笛卡尔积保持较小。

```
// load all collection1 into cache
session.QueryOver<Entity>()
    .Where(filter)
    .Fetch(e => e.Collection1).Eager
    .Future();

// load all collection2 into cache
session.QueryOver<Entity>()
    .Where(filter)
    .Fetch(e => e.Collection2).Eager
    .Future();

var results = session.QueryOver<Entity>()
    .Where(filter)
    .Fetch(e => e.Contacts).Eager
    .Fetch(e => e.Contacts.CommunicationMethods).Eager
    .Fetch(e => e.Contacts.Roles).Eager
    .List();

// results contain all entities with initialised collection1, collection2, contacts, contact.role, contact.CommunicationMethod 
```

# ios - 尝试更改导航控制器上的标题和后退按钮等属性

> ID：11462087
> 
> 赞同：0
> 
> 时间：2012-07-12T23:15:52.673
> 
> 标签：ios, cocoa-touch

我正在尝试在当前在堆栈上有我的视图的导航控制器上设置后退按钮。我不能改变它的任何属性。

有没有办法可以抓住最上面的导航控制器，例如：[self navigationcontroller]？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:37:48.750

默认情况下， a 中的后退按钮`UINavigationController`归父级所有。

只需在调用前设置后退按钮`pushViewController:`

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] 
                                initWithTitle:@"Go Back" 
                                        style:UIBarButtonItemStyleBordered
                                       target:nil 
                                       action:nil];

[self.navigationItem setBackBarButtonItem:backButton];

[self.navigationController pushViewController:myNewController]; 
```

（取自[本教程](http://astralbodies.net/blog/2011/03/20/ios-basics-uinavigation-controller-back-button-text/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:23:35.243

您可以`NavigationController`使用`self.navigationController`. 就像 push 和 pop 时一样`ViewControllers`。

默认情况下，您`NavigationController`从 中获取标题`ViewController`，因此您只需像这样设置即可；

```
self.title = @"My title"; 
```

并访问后退按钮；

```
self.navigationController.backBarButtonItem 
```

[UINavigationController 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UINavigationItem_Class/Reference/UINavigationItem.html#//apple_ref/occ/instp/UINavigationItem/backBarButtonItem)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T23:35:55.013

设置标题：

```
[[self navigationItem] setTitle:tabTitle]; 
```

设置 barButton 外观

```
[[UIBarButtonItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIFont fontWithName:@"Font-Name" size:12.0f], UITextAttributeFont, [UIColor blackColor], UITextAttributeTextColor, nil] forState:UIControlStateNormal]; 
```

# ruby-on-rails - 如何让模型对自己执行一种方法？

> ID：11462089
> 
> 赞同：1
> 
> 时间：2012-07-12T23:16:14.650
> 
> 标签：ruby-on-rails

```
class MyAwesomeClass

  def foobar
    puts "trip!"
  end 
```

这样我就可以执行：

```
MyAwesomeClass.foobar

=> "trip!" 
```

我不断得到：

```
NoMethodError: undefined method `foobar' for MyAwesomeClass:Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T23:17:28.373

```
class MyAwesomeClass
  def self.foobar
    puts "trip!"
  end 
end 
```

使用“self”使该方法成为类实例方法

# javascript - 需要 Javascript 正则表达式帮助

> ID：11462094
> 
> 赞同：0
> 
> 时间：2012-07-12T23:16:53.853
> 
> 标签：javascript, jquery, regex

我有一个字符串：

```
User_TimeStamp=20120712201112&email_id=ufe.test20@markit.com&resetCode=**uNcoHR9O3wAAB46xw**&reset=true 
```

我尝试并搜索了很多以获取突出显示的文本。基本上我想要一个 JavaScript 正则表达式来获取 和 之间的所有`resetCode=`字符`&reset=true`。

对此的任何帮助都将受到高度赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:22:30.790

两种方式：

1.  你的正则表达式应该是`resetCode=([^&]*)`
2.  拆分字符串，`&`然后遍历每个字符串，然后`=`将第一个字符串与第二个字符串进行比较`resetCode`并在找到时返回第二个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:24:32.980

在您正在寻找`resetCode`变量的地方尝试此代码

```
var resetCodeValue;
var s = window.location.split('&');
for(var k in s) { var pair = s[k].split('=');
   if (pair[0] == 'resetCode'){
      resetCodeValue = pair[1];
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T23:26:05.677

你可以做一些更“可读”的事情：

```
retrieveDesired = User_TimeStamp.split('=')[3].split('&')[0]; 
```

## *[jsBin 演示](http://jsbin.com/avucut/2/edit)*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T23:19:42.057

为什么不直接使用这个方便的函数来获取 resetCode 的值

```
function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
}
document.write(getUrlVars()["resetCode"]); 
```

# c# - 循环大量记录

> ID：11462096
> 
> 赞同：0
> 
> 时间：2012-07-12T23:16:57.920
> 
> 标签：c#, winforms, performance, postgresql, query-optimization

我有一个位于网络中的 postgre 服务器，我正在使用数据库。我需要检查大量记录（100 万+），每次选择都需要时间。

这是我目前的方法：

```
DataSet ds = new psqlWork().getDataSet("SELECT * FROM z_sitemap_links"); 
DataTable dt = ds.Tables[0]; 
Parallel.ForEach(dt.AsEnumerable(), dr => 
{ 
    new Sitemap().runSitemap(dr[1].ToString(), counter); 
    counter++; 
}); 
```

但是当数据库大小增加时，这种方法（在我看来）不会那么有效。你能建议一个更好的方法吗？也许将数据拉到块中进行处理；虽然我现在不知道如何管理这个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T23:33:52.977

优化点：

*   创建命名类型，并使用 ADO.NET 读取命名类型，而不是使用`DataSet`and `DataTable`，这将减少一些内存占用。
*   只提取您实际需要使用的记录（您通常不需要引入超过一百万条记录，但我们不知道您的业务逻辑）

澄清您的原始帖子的问题：

*   你有理由说明这在未来不会扩展吗？
*   你如何处理它，你正在利用它`Parallel.ForEach`？如果底层系统有它的能力，你可能会很好地使用你现在拥有的方法。还要考虑一下，您可能应该分析实际性能，而不是仅仅猜测会发生什么。

```
DataSet ds = new psqlWork().getDataSet(@"
  SELECT * FROM z_sitemap_links 
  order by timestamp asc /*always order when skipping records so you get the same skips */
  LIMIT 100000 /* using these two with variables you could skip so many records /*
  OFFSET 100000 /* depending on what you're aiming for */
"); 
DataTable dt = ds.Tables[0]; 
Parallel.ForEach(dt.AsEnumerable(), dr => 
{ 
    new Sitemap().runSitemap(dr[1].ToString(), counter); 
    counter++; 
}); 
```

而且，如果你可以使用这样的东西：`row_number() OVER (ORDER BY col1) AS i`那么你可以跳过计数器，因为当你选择返回的行时会为你提供，但我的 postgres 知识并没有告诉我这是否每次都是 1..100000从上面的代码，或者如果它会是你想要的，但[数据库管理员](https://dba.stackexchange.com/)的人肯定会知道。这意味着您的代码将变为：

```
Parallel.ForEach(recordList, record => 
{ 
    new Sitemap().runSitemap(record.FieldYouNeed, record.RowNumberFromDatabase);
}); 
```

# eclipse - Ubuntu 12.04 中没有用于 Eclipse Juno 的 HTTP 预览服务器

> ID：11462099
> 
> 赞同：0
> 
> 时间：2012-07-12T23:17:05.860
> 
> 标签：eclipse, ubuntu

我刚刚在 Ubuntu 12.04（32 位）上安装了 Eclipse Juno，并下载了 Eclipse Web Developer Tools。我创建了一个新的静态 Web 项目，但无法为目标运行时创建/使用 HTTP 预览来测试/运行我的项目。有人知道这是否可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T14:46:33.253

您可以在以下四个阶段创建补丁并使其适用于您拥有的 Eclipse Juno 版本。它有点长，但它有效

`**Phase 1**: Create a plug-in project for the plug-in you need to patch.`

1.  创建一个新工作区（推荐）或打开一个现有工作区。
2.  选择`File`->`Import`
3.  展开`Plug-in Development`，选择`Plug-ins and Fragments`，然后单击`Next`
4.  在该`Import As`部分中，选择`Projects with source folders` 并单击`Next`。
5.  在顶部的字段中`org.eclipse.wst.server.preview.adapter`输入（或复制和粘贴，不带引号） ，然后单击。这应该将这个插件移动到右窗格。`ID``Add All`
6.  单击`Finish`以将“org.eclipse.wst.server.preview.adapter”插件源导入项目。
7.  展开项目的根目录并确保它包含一个名为“src”的文件夹。如果您安装了“WST 服务器适配器插件开发人员资源”，您将只获得“src”文件夹。

`**Phase 2**: Apply the changes needed to update the plug-in. Since there is a bug with a patch attached that can be used to apply the changes, the following steps will take advantage of that`.

1.  在浏览器中打开[错误 402848](https://bugs.eclipse.org/bugs/attachment.cgi?id=229828)。
2.  点击`Patch v1.0 for 3.4.2p`附件链接打开补丁。
3.  从第二次出现以 开头的行开始`---`，从文本末尾选择此行并将其复制到剪贴板。这包含对 PreviewLaunchConfigurationDelegate.java 文件的更改，这是需要修复的地方。你不想要补丁的上部，因为这会改变插件的版本，这会使事情复杂化。
4.  回到 Eclipse，右键单击“org.eclipse.wst.server.preview.adapter”项目。选择`Team`并单击`Apply Patch`。
5.  选择剪贴板并单击`Next`。
6.  确保选择了“org.eclipse.wst.server.preview.adapter”项目，然后单击`Next`。
7.  将 设置`Ignore leading path name segments`为 3。“补丁内容”窗口应变为蓝色的左箭头，而不是红色的 x 指示符。
8.  单击`Finish`以应用更改。

`**Phase 3:** Create the replacement jar. Due to the approach in Phase 1, the name of this jar will be identical to your current jar, which simplifies updating the Eclipse installation.`

1.  `org.eclipse.wst.server.preview.adapter`在 Project Explorer 或其他导航器视图中右键单击项目并选择`Export`
2.  展开`Plug-in Development`，选择`Deployable plug-ins and fragments`，然后单击`Next`
3.  单击`Browse`目标选项卡中目录选项旁边的按钮，然后单击确定。这会将输出目录设置为与您的工作区相同。
4.  单击`Finish`以构建替换插件 jar。它将出现在工作区根目录下的“插件”文件夹中。

`**Phase 4:** Replace the installed plug-in jar with the fixed version.`

1.  如果 Eclipse 正在运行，请退出它。
2.  在 Eclipse 安装的“plugins”文件夹下，移动或重命名**org.eclipse.wst.server.preview.adapter_1.1.101.v20121107_1651.jar**，如果您不想用补丁版本覆盖它（在步骤 3 中提到以下）。如果您有不同的版本，这意味着您没有使用 Juno SR2，并且希望您安装了与您的版本匹配的“WST 服务器适配器插件开发人员资源”。
3.  从工作区下的“plugins”文件夹中复制**org.eclipse.wst.server.preview.adapter_1.1.101.v20121107_1651.jar并将其粘贴到 Eclipse 安装的“plugins”文件夹中。**

您现在应该能够使用固定插件运行 Eclipse。因为修补的 jar 具有相同的版本号，所以不需要额外的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:59:38.023

我不熟悉您使用的工具，但我在 12.04 上遇到了 eclipse 的内部浏览器的大问题，因为它试图使用 mozilla 的 XULRunner。由于 Mozilla 的发布周期，XULRunner 的包装在 12.04 中发生了变化，并且没有单独包含在 repo 中。通过在 config.ini 的 vmargs 部分设置以下属性，我强制我的 Eclipse 使用 WebKit

```
-Dorg.eclipse.swt.browser.DefaultType=webkit 
```

这解决了我的问题 - 希望这对你有帮助。

# javascript - 如何禁用由第 3 方引入的 javascript 事件处理程序？

> ID：11462111
> 
> 赞同：1
> 
> 时间：2012-07-12T23:17:55.640
> 
> 标签：javascript, asp.net, html

我的网站正在使用鼠标签名工具：

[http://www.realsignature.com/demo/default.aspx](http://www.realsignature.com/demo/default.aspx)

它使用画布捕获签名并将其呈现为 jpeg。

不幸的是，有一个（可怕的）chrome扩展工具栏破坏了鼠标签名工具：

[http://bittorrentbar.ourtoolbar.com/](http://bittorrentbar.ourtoolbar.com/)

从我能够挖掘的内容来看，看起来有一个鼠标事件处理程序正在捕获工具栏中的 mousedown / mouseup 事件，这会导致麻烦......但我不确定。我唯一的提示是，当有点击事件时，chrome 会抛出这个警告：

```
Unsafe JavaScript attempt to access frame with URL chrome-    extension://mhfdcmehmjcclgopdodkjdicohagipid/Js/items/container/container.html#tabUrl=http:/    /localhost:1805 from frame with URL http://localhost:1805/secure/Confirm.aspx?    ID=MAYNHQHRXBQSDOKKYRMVWFRWAMSSQK. 
Domains, protocols and ports must match.
chrome-extension://cekbgkmeapobkbadclnkjfjdbpbcaobd/copier.js:278

getSelectedText chrome-extension://cekbgkmeapobkbadclnkjfjdbpbcaobd/copier.js:278

doMouseUp chrome-extension://cekbgkmeapobkbadclnkjfjdbpbcaobd/copier.js:91

(anonymous function) 
```

我试过用我自己的方法覆盖 doMouseUp 方法，试图阻止事件冒泡......但我不是 javascript 大师，似乎没有任何工作。我已通过电子邮件向签名工具和工具栏的开发人员发送了电子邮件，但双方均未做出任何回应。

请帮我阻止这个邪恶的恶意软件工具栏！

需要明确的是，我不是想为自己解决这个问题……而是为每周使用我网站的成千上万的人解决这个问题。他们是安装此工具栏的人，而不是我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:23:56.640

我不知道扩展程序在做什么，但您可以禁用和/或从 Chrome 中删除它。只需转到选项>工具>扩展并取消选中启用框。如果您不需要扩展程序，也可以将其丢弃。

# scala - Scala Akka Actors act() 函数

> ID：11462117
> 
> 赞同：2
> 
> 时间：2012-07-12T23:18:35.200
> 
> 标签：scala, akka

我读过的所有教程都是这样工作的：

```
class HelloWorldActor extends Actor {
  def receive = {
    case "Hello" => self.reply("World")
  }
}

val myActor = system.actorOf(Props[MyActor], name = "myactor") 
```

我想知道 AKKA 是否支持 Actor 类中的 act() 函数，如下所示：

```
class HelloWorldActor extends Actor {
  def act() = {

  }
} 
```

然后你可以打电话：

```
val myActor = new HelloWorldActor
myActor.start() 
```

我想这样做是因为我的演员不会收到任何消息。它只是自己工作。那么我可以在我的 AKKA 演员中使用 act() 函数吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T23:56:56.030

在 Akka 中，您的 actor 应该在使用系统创建后自动启动。但听起来好像您想像使用我们都知道的 Java 中的普通线程一样使用 actor。我会说，从惯用的角度来看，这不是正确的方法。您当然可以只向您的演员添加一条开始消息，在创建后将其发送给演员，然后在处理程序中进行处理。但是，如果您不想对任何消息做出反应，也许您应该考虑使用普通线程或 Future 而不是演员？

# xslt - 将 umbraco:item 字段存储到 xsl:variable

> ID：11462118
> 
> 赞同：0
> 
> 时间：2012-07-12T23:18:52.773
> 
> 标签：xslt, umbraco

我想在 umbraco 的模板中使用 creationDate 字段。

我知道我可以用这个提取这个字段， `<umbraco:Item field="createDate" runat="server" />` 但我想把这个数据存储为 xsl:variable 并对其进行操作。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:20:40.173

通过一个名为`currentPage`. 因此，在您的宏中只需使用以下行：

```
<xsl:variable name="myDate" select="$currentPage/@createDate" /> 
```

如果您希望格式化日期，请使用`umbraco.library`扩展提供的功能，如下所示：

```
<xsl:value-of select="umbraco.library:FormatDateTime($myDate, 'dd-MM-yyyy')" /> 
```

如果您需要对日期变量进行更精确的操作，请查看`Exslt.ExsltDatesAndTimes`Umbraco 附带的扩展。里面也有大约四十多个函数。

# haskell - readIO解析错误haskell，这个close

> ID：11462119
> 
> 赞同：1
> 
> 时间：2012-07-12T23:19:04.387
> 
> 标签：haskell

所以我一直很享受这种具有挑战性的语言，我目前正在为学校做作业。

这就是它所说的：我需要提示用户输入数字列表，然后显示列表的平均值，我非常接近弄清楚。但是我得到了这个奇怪的解析错误：

```
"Exception: user error (Prelude.readIO: no parse)" 
```

这是我的代码：

```
module Main (listM', diginums', getList, main) where 

import System.IO     
import Data.List

diginums' = []
listM' = [1, 2, 3]
average' = (sum diginums') / (fromIntegral (length diginums'))
getList :: IO [Double]
getList = readLn

main = do
      putStrLn "Please enter a few numbers" 
      diginums' <- getList
      putStrLn $ show average' 
```

终端提示：`Enter a few #'s`

我输入：`123`

```
ERROR : Exception: user error (Prelude.readIO: no parse) 
```

我知道我的函数可以正常工作以计算平均值。现在我认为我的问题是，当我从用户那里获取数字列表时，我没有正确解析它们以输入`Double`我的平均功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:35:42.680

你的类型签名说

```
getList :: IO [Double]
getList = readLn 
```

读取`Double`s 的列表，这意味着它需要表单的输入

```
[123, 456.789, 1011.12e13] 
```

但是你给了它可以被读为一个数字的东西，`"123"`. 因此`read`失败，输入无法解析为`[Double]`.

如果您想以不同的形式解析输入，而不是语法上正确的 Haskell 值，例如以空格分隔的数字列表，则不能使用`readLn`，但必须自己编写所需格式的解析器。对于提到的以空格分隔的数字列表，这很容易，例如

```
getList :: IO [Double]
getList = do
    input <- getLine
    let nums = words input
    return $ map read nums 
```

如果您想以数字形式获取列表，每个数字都在其自己的行上，以空行结尾，您将使用带有累加器的递归，

```
getList :: IO [Double]
getList = completeList []

completeList :: [Double] -> IO [Double]
completeList acc = do
    line <- getLine
    if null line
        then return (reverse acc)
        else completeList (read line : acc) 
```

更复杂或更不严格格式的解析器将更难编写。

解析完成后，您会遇到尚未习惯值不可变这一事实的问题。

```
diginums' = []
listM' = [1, 2, 3]
average' = (sum diginums') / (fromIntegral (length diginums')) 
```

定义了三个值，`Double`值`average'`是根据空列表定义的`diginums'`，因此它的值是

```
sum diginums' / fromIntegral (length diginums') = 0 / 0 
```

这是一个`NaN`。

您需要的是一个计算`Double`s 列表平均值的函数，并将其应用于`main`.

```
average :: [Double] -> Double
average xs = sum xs / fromIntegral (length xs)

main = do
    putStrLn "Please enter a few numbers" 
    numbers <- getList
    print $ average numbers 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T00:02:35.563

Haskell 中没有可变变量，但看起来您正试图初始化`diginums'`为一个空列表，然后用`getList`.

相反，也许您想将数字列表`average'`作为参数传递给，例如：

```
module Main (getList, main) where

import System.IO
import Data.List

average' ds = (sum ds) / (fromIntegral (length ds))
getList :: IO [Double]
getList = readLn

main = do
      putStrLn "Please enter a few numbers"
      diginums' <- getList
      putStrLn $ show $ average' diginums' 
```

此外，正如丹尼尔所说，您需要使用 Haskell 文字列表语法进行输入，因为您已经编码了它。

# c# - ArrayLists 不保留值

> ID：11462127
> 
> 赞同：0
> 
> 时间：2012-07-12T23:20:13.520
> 
> 标签：c#, asp.net

我在后面的代码中有数组列表，它们不会保留我添加到它们的值。我尝试将它们设为公共静态并且可行，但问题是我不希望在用户完成表单后保留这些值。当他们需要再次使用表格时，我希望他们被清除。当它们没有被设置为公共静态时，这些值会被添加，但是当下一个项目被添加到表单上时，第一个项目的值已经从数组列表中消失了。请帮忙。

```
namespace Application
{
    public partial class Enquiry : System.Web.UI.Page
    {
         ArrayList Dates = new ArrayList();
         ArrayList Dates2 = new ArrayList();
         ArrayList Cost = new ArrayList(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T23:24:41.963

ASP.NET 网页是无状态的。回发时不会自动保存和恢复类属性；每次重新加载页面时，都会实例化页面类的新实例，将私有`ArrayList`属性重置为空。如果您希望值被持久化，您必须自己管理它，或者使用[`ViewState`](http://msdn.microsoft.com/en-us/library/bb386448.aspx)、 或[`Session`](http://msdn.microsoft.com/en-us/library/ms178581.aspx)，或者通过在每次页面加载时简单地重建您的列表。

您可能需要研究[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)。它可能会让事情变得更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:34:38.700

使用下面的示例在视图状态中对数据进行排序。 [http://msdn.microsoft.com/en-us/library/bb386448.aspx](http://msdn.microsoft.com/en-us/library/bb386448.aspx)

# php - Xinetd 用 PHP 获取远程 IP

> ID：11462128
> 
> 赞同：0
> 
> 时间：2012-07-12T23:20:14.470
> 
> 标签：php, tcp, xinetd

**您好，我有 xinetd 的这项服务：**

```
service MyService 
{
port = 8881
socket_type = stream
wait = no
user = nobody
server = /usr/local/bin/php
server_args = /home/file/public_html/php/port/test1.php
log_on_success + = USERID
log_on_failure + = USERID
disable = no
} 
```

**我的文件 test1.php：**

```
<? php
$handle = fopen ('php :/ / stdin', 'r');
$input = fgets ($ handle);
fclose ($ handle);
$ip = $_SERVER['REMOTE_ADDR']
echo "Hello {$ input} your IP: $ip";
?> 
```

**我无法获取远程IP：**

```
$ip = $ _SERVER['REMOTE_ADDR'] 
```

**因为我可以得到远程IP？？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:35:37.420

解决方案是修改 PHP：

**$IpX = $_SERVER['REMOTE_HOST'] ？$_SERVER['REMOTE_HOST'] : $_SERVER['HOST'];**

```
<? php
$IpX = $_SERVER['REMOTE_HOST'] ? $_SERVER['REMOTE_HOST'] : $_SERVER['HOST'];
$handle = fopen ('php :/ / stdin', 'r');
$input = fgets ($ handle);
fclose ($ handle);
echo "Hello {$ input} your IP: $IpX";
?> 
```

感谢： [贡萨洛·阿尤佐](http://gonzalo123.wordpress.com/2010/05/23/building-network-services-with-php-and-xinetd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-23T07:00:01.157

我测试并发现：

Apache httpd 将“ **REMOTE_ADDR** ”和“ **REMOTE_PORT** ”以及更多其他环境传递给 CGI 程序。

但是 xinetd 只将“ **REMOTE_HOST** ”环境传递给 xinetd.d/xxxx 中“server”定义的我的程序。而且，“REMOTE_HOST”看起来像“::ffff:192.168.1.23”，而不是纯 IP 地址。（顺便说一句：这是什么意思 ？）

所以：xinetd + 程序只能充当一个很小的 ​​httpd 模块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T23:39:30.233

`$REMOTE_ADDR`是一个环境变量，由 Web 服务器设置为 CGI 协议的一部分。您直接在套接字上运行。这里没有网络服务器。没有设置这个变量（或者实际上是[Laxus](https://stackoverflow.com/users/711206/laxus)在评论中建议的变量）并不奇怪。

[如果您想要远程地址，则必须使用getpeername](http://php.net/manual/en/function.socket-getpeername.php)自己获取。

# c++ - 读取加密的用户名/密码

> ID：11462129
> 
> 赞同：1
> 
> 时间：2012-07-12T23:20:21.197
> 
> 标签：c++, text-files, encryption

我正在开发一个充当日记的控制台应用程序。在这个阶段，我正在开发登录身份验证并且遇到了一些问题！由于我将处理用于登录和日记存储的文本文件，因此我想加密这些文本文件以防被窥探。

现在，问题是我不知道如何进行解密>>检查用户&&pass>>再次加密。

会是这样吗？：

*   程序负载

*   解密密码.txt

*   如果程序在任何时候关闭，则运行 encryptFile()。

*   验证用户输入

*   加密密码.txt

如果我走在正确的路线上，我该如何实施呢？我搜索了使用 c++ 的文本文件的加密教程，但它们不是很有帮助。

这是我被屠杀的初学者密码.txt 代码，我该从哪里开始？如果您推荐我错过的加密教程/文章，请发布！

```
void checkPasswordFile() {

string username;
string password;
string passwordAgain;

string userIn;
string passIn;
string line;

ifstream passwordFile("passwords.txt");
istringstream instream;

if (passwordFile.good()) {

    cout << "\t==================================" << endl;
    cout << "\t----------------------------------" << endl;
    cout << "\tYou are a returning user, please fill in your details" << endl;

    while(!passwordFile.eof()) {
        getline(passwordFile, line);
        instream.clear();
        instream.str(line);
        username = line;

        getline(passwordFile, line);
        instream.clear();
        instream.str(line);
        password = line;
    }

    do {
        cout << "Username: " << endl;
        cin >> userIn;
        cout << "Password: " << endl;
        cin >> passIn;

        if (userIn == username && passIn == password) {

            displayMenu();

        } else {

            cout << "Username and Password Do Not Match, Try Again" << endl;
        }

    } while(userIn != username && passIn != password);

} else {
    cout << "file no exist";

    ofstream passwordFile;
    passwordFile.open ("passwords.txt", ios:: in | ios::app);

    cout << "\t==================================" << endl;
    cout << "\t----------------------------------" << endl;
    cout << "\tThis is your first run, please enter a username and password" << endl;
    cout << "\tUsername: " << endl;
    cin >> username;
    cout << "\tPassword: " << endl;
    cin >> password;

    /*
    Do Loop:
    Prompts Re-Entry if PasswordAgain is not equal to Password
    */
    do {

        cout << "Re-Type Password: ";
        cin >> passwordAgain;

        if(password != passwordAgain) {
            cout << "Passwords Do Not Match! Try Again" << endl;
        }
    } while(password != passwordAgain);

    passwordFile << username << "\n";
    passwordFile << password;
   }

} 
```

非常感谢您的宝贵时间。

ps 对于我的生活，我不知道该怎么做：

用户名：[cin>>username] 在同一控制台行上，很抱歉加倍，但认为这对于自己的帖子来说不是一个足够大的问题！谢谢。

编辑：

我已经成功地解密了用户名并在创建并存储在文本文件中时通过。然后当用户回来时，他们输入的内容被加密并与文件进行比较。

问题是这仅适用于简短的单词，用户密码有效，但用户名和密码不起作用......任何想法为什么？这是我的加密代码：

```
 char encryptKey = 'h';
        cout << "\tUsername: ";
        cin >> userIn;
        cout << "\tPassword: ";
        cin >> passIn;

        for (int i = 0; i < userIn.size(); i++) {
            userIn[i] ^= encryptKey;
        }
        for (int x = 0; x < passIn.size(); x++) {
            passIn[x] ^= encryptKey;
        }

        if (userIn == username && passIn == password) {

            displayMenu();

        } else {

            cout << "\tUsername and Password Do Not Match, Try Again" << endl;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:29:36.333

正确的做法是不要加密密码文件——问题是文件的加密密钥需要存储在程序可以访问的地方，这将使其相对容易找到和滥用。

相反，您应该使用密码散列（使用像 SHA1 这样的强散列算法）。哈希算法是一种将一段文本确定性地映射到一个大数（称为其哈希）上的算法，其设计目的是无需付出很大努力即可实现不可逆。基本概念是您获取密码，使用它来计算其哈希值，然后存储该哈希值。稍后，当用户输入密码登录时，您再次计算其哈希值并将生成的哈希值与存储的哈希值进行比较。即使有人获得了对哈希的访问权，他们也不会获得密码，这很重要，因为人们经常在应用程序之间共享密码。不要实现自己的 SHA1 哈希 - 请参阅“[什么是 C/C++ 中最好的加密库？](https://stackoverflow.com/questions/180870/what-is-the-best-encryption-library-in-c-c) ”以获取库列表。

您还必须使用[加盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)和[键拉伸](http://en.wikipedia.org/wiki/Key_stretching)来防御常见的暴力攻击。

# html - 图片未出现在 Facebook 的分享链接工具中

> ID：11462130
> 
> 赞同：2
> 
> 时间：2012-07-12T23:20:33.833
> 
> 标签：html, facebook, image

我遇到一个间歇性问题，Facebook 共享链接功能无法从页面中提取链接图像。这种情况会间歇性地持续发生，也就是说，它一直在发生，但不是针对一致的页面、图像、样式等。我找不到任何模式。页面不起作用，然后它们会起作用。大多数页面在第一次尝试时运行良好，但可能有 5% 失败。

每次发生这种情况时，我都会在 Facebook 调试工具中检查 URL，它会毫无问题地找到文章图像。通常，在我使用调试工具并尝试再次共享链接后，Facebook 会找到该图像。

该站点使用通过 Facebook 调试工具签出的 Open Graph 标签。

这是一个示例页面：

[http://zujava.com/must-have-school-supplies](http://zujava.com/must-have-school-supplies)

是否还有其他因素会影响图片是否与 Facebook 中的 URL 一起被拉取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:27:28.557

Facebook 每 24 小时抓取一次您的页面。因此，除非您喜欢该页面或通过调试器发送它，否则在最初运行时，图像（和其他元数据）将不会出现。

阅读更多

*   [http://developers.facebook.com/docs/reference/plugins/like/#scraperinfo](http://developers.facebook.com/docs/reference/plugins/like/#scraperinfo)和
*   [Facebook Sharer 如何选择图片？](http://facebook.stackoverflow.com/questions/1138460/how-does-facebook-sharer-select-images)

# sql - 将 SQL 左连接转换为 Linq Lambda 表达式

> ID：11462132
> 
> 赞同：1
> 
> 时间：2012-07-12T23:20:52.483
> 
> 标签：sql, linq-to-entities

我有这个 SQL 查询

```
select at.description, 
       a.Address1, 
       a.Address2, 
       a.City
  from address_types at
  left join Address a
    on a.addresstype = at.addresstype
    and a.addressid=24 
```

想用 Linq Lambda 表达式写，有什么线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:10:44.230

我宁愿以下列方式简化它

```
(from at in address_types
join a in address 
on at.addresstype  equals a.addresstype  into tt
from ar in tt.DefaultIfEmpty()
where (ar != null && ar.addressid == 24)
select new 
 {
    at.Description,
    ar.Address1, 
    ar.Address2, 
    ar.City 
  }) 
```

我们不需要这个检查“(ja == null)”的原因是因为我们已经在“where (ar != null && ar.addressid == 24)”这一行中限制了我们的集合。

同时这个查询有效，我的观点是 LEFT JOIN 在 SQL 查询中也是多余的。由于您的条件“a.addressid = 24”，您不会得到 NULL 行，因此 SQL 也可以重写为 INNER JOIN 和 LINQ 查询

```
(from at in address_types
    join a in address 
    on at.addresstype  equals a.addresstype
    where at.addressid == 24
    select new 
     {
        at.Description,
        a.Address1, 
        a.Address2, 
        a.City  
      }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:14:19.230

你可以尝试这样的事情：

```
 var resultset = (from at in addresstypes
                   join a in addresses
                    on at.AddressType equals a.AddressType into joinaddress
                   from ja in joinaddress.DefaultIfEmpty()
                   where (ja != null && ja.AddressID == 24)
                   select new 
                     {
                        AddressType = at.AddressType,
                        AddressID = ja == null ? 0 : ja.AddressID,
                        Address1 = ja== null ? string.Empty : ja.Address1
                      }); 
```

# c# - 仅允许来自移动浏览器的 HTTP 请求

> ID：11462137
> 
> 赞同：0
> 
> 时间：2012-07-12T23:21:19.183
> 
> 标签：c#, android, iphone, asp.net-mvc-3

是否可以允许用户访问仅为移动浏览器创建随机数的页面？

是否有捷径可寻？

我应该对照移动设备检查浏览器和代理吗？

本质上，我不希望用户在他们的 PC 上使用网络浏览器点击 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:27:45.987

是的，您可以通过检查从 servervaraible HTTP_USER_AGENT 或 HttpContext.Request.Browser.IsMobileDevice 返回的值来检测并在您的移动页面上允许 httprequest

[http://www.codeproject.com/Articles/34422/Detecting-a-mobile-browser-in-ASP-NET](http://www.codeproject.com/Articles/34422/Detecting-a-mobile-browser-in-ASP-NET)上的示例

# html - 用浮动定位元素？..没有任何作用

> ID：11462141
> 
> 赞同：0
> 
> 时间：2012-07-12T23:21:43.310
> 
> 标签：html, css, css-float, positioning

```
<div class="block1">
<div class="test">
    <div class="about">This is where text about the app will be displayed</div>
</div>
<div class="app1">
<ul>
<li class="roundabout-moveable-item" style="background: url('img/1.png')"></li>
<li class="roundabout-moveable-item" style="background: url('img/2.png')"></li>
<li class="roundabout-moveable-item" style="background: url('img/3.png')"></li>
</ul>
</div>` 
```

CSS：

```
.topbox {
width:700px;
height:150px;
border-radius:20px;
position:fixed;
-moz-box-shadow:    inset 0px 4px 8px #000000;
-webkit-box-shadow: inset 0px 4px 8px #000000;
box-shadow:         inset 0px 4px 8px #000000;}

.block1 {
width:800px;}

.about {
float:right;
} 
```

我已经尝试了一切，搜索了堆栈溢出，但我似乎无法让它工作。

非常感谢您的帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:58:55.360

试试这个并更改绝对定位的值以满足您的需要。

```
.block1 {
  width:800px;
  position: relative;
}

.test {
  width:400px;
  height:300px;
  border-radius: 20px;
  background: transparent;
  width:800px;
  position: absolute;
  top: 200px;
  left: 400px;
} 
```

# android - Android 动画替代品

> ID：11462142
> 
> 赞同：0
> 
> 时间：2012-07-12T23:21:49.183
> 
> 标签：android, google-tv

我想在我的应用程序中实现一个新闻自动收报机，带有垂直和水平滚动，以及一些 alpha 动画。

我需要动画不受应用程序其余部分的影响（GPU/硬件加速）。特别是因为该应用程序将在谷歌电视盒上运行，并且预计用户将使用 D-Pad 导航，这可能会导致动画变得不稳定。

这些似乎是我的选择（我需要支持 Honeycomb 及更高版本）：

1.  使用 Android 动画类

    *   这种方法的性能是否会与使用 OpenGL 相媲美？
    *   硬件加速是否可行且可靠？
    *   最容易使用。

2.  OpenGL ES 2

    *   纹理大小似乎有 2048 个限制。如果我的标题比那个长

3.  渲染脚本

    *   这里的文档很少。

在您看来，最好的解决方案是什么？还有哪些其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:19:07.247

一种常见的模式是启用硬件加速、动画，然后禁用它。但是，在基于 Intel 的 GoogleTV 盒子上，当您打开硬件加速时，文本会出现问题。我还没有在基于 ARM 的 Google TV 上尝试过。

我绝不是 OpenGL ES 专家，但我是一个超级粉丝，并且已经看到使用它为 Google TV 完成了一些很棒的事情。也就是说，我认为您对 OpenGL ES Textures 的理解是不正确的。纹理的大小应该对标题的长度几乎没有影响。我目前有一个实习生正在研究一堆 OpenGL ES 示例，我们希望在 8 月底之前发布这些示例。

即使文档很少，也有使用 RenderScript 的优秀示例代码。然而，一些开发人员无法将 RenderScript 与 d-pad 导航集成。

我的建议是使用 OpenGL ES 作为一个非常短的程序来尝试最坏的情况，看看它是如何工作的。这可能是最好的解决方案。

我可以想象为什么您在某些 GoogleTV 动画上看到断断续续，StateLists 在 D-Pading 时触发，但这不是一个无法解决的问题。

# sql - 在 SQL Server 存储过程中拆分文本

> ID：11462149
> 
> 赞同：1
> 
> 时间：2012-07-12T23:22:33.833
> 
> 标签：sql, sql-server, stored-procedures

我正在使用数据库，其中我提取的字段之一是：

```
1-117 3-134 3-133 
```

这些数字集中的每一个都代表另一个表中的不同数据集。以= 设备 ID 和= 设备设置`1-117`为例。`1``117`

我有另一个表，我需要根据前一个字段从中提取数据。它有两列拆分设备 ID 和设置。本质上，我需要一种方法从查询的列`1-117`中运行查询以从另一个表中提取数据，其中 1 和 117 是两个单独的对应列。

那么，有没有办法拆分这个数字来运行这个查询？

另外，我如何将这三个数字 ( `1-117 3-134 3-133`) 分成三个不同的查询集？

这里棘手的部分是此列可以在此处包含任意数量的集合（例如`1-117 3-133`或`1-117 3-134 3-133 2-131`）。

我在存储过程中创建这些查询作为较大文档的一部分以显示提取的数据。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:39:09.410

由于您没有提供数据库供应商，因此这里有两篇文章分别为 SQL Server 和 Oracle 回答了这个问题......

[T-SQL：与字符串连接相反 - 如何将字符串拆分为多条记录](https://stackoverflow.com/questions/314824/t-sql-opposite-to-string-concatenation-how-to-split-string-into-multiple-reco)

[在 PL/SQL 存储过程中拆分逗号分隔的字符串](https://stackoverflow.com/questions/4004377/splitting-comma-separated-string-in-a-pl-sql-stored-proc)

如果您正在使用其他一些 DBMS，请搜索“拆分文本”。我几乎可以保证您不是第一个提出问题的人，而且每种 DBMS 风格都有答案。

正如你所说的格式是不变的，你也可以使用 SUBSTRING 函数做一些更简单的事情。

编辑以回应 OP 评论...

由于您使用的是 SQL Server，并且您说这些值始终采用一致的格式，因此您可以做一些简单的事情，例如使用 SUBSTRING 获取值的每个部分并将它们分配给 T-SQL 变量，然后您可以在其中使用它们来做任何你想做的事情，比如在查询的谓词中使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T04:07:34.967

假设您所说的格式始终为#-###（正好是 1 位、破折号和 3 位）是正确的，这相当容易。

```
WITH EquipmentSettings AS (
   SELECT
      S.*,
      Convert(int, Substring(S.AwfulMultivalue, V.Value * 6 - 5, 1) EquipmentID,
      Convert(int, Substring(S.AwfulMultivalue, V.Value * 6 - 3, 3) Settings
   FROM
      SourceTable S
      INNER JOIN master.dbo.spt_values V
         ON V.Value BETWEEN 1 AND Len(S.AwfulMultivalue) / 6
   WHERE
      V.type = 'P'
)
SELECT
   E.Whatever,
   D.Whatever
FROM
   EquipmentSettings E
   INNER JOIN DestinationTable D
      ON E.EquipmentID = D.EquipmentID
      AND E.Settings = D.Settings 
```

在 SQL Server 2005+ 中，此查询将支持字符串中的 1365 个值。

如果数字的长度可以变化，那就有点难了。让我知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T01:00:08.700

如果集合不增加超过 4，那么您可以使用 Parsename 来检索结果

```
 Declare @Num varchar(20)
 Set @Num='1-117 3-134 3-133'

 select parsename(replace (@Num,' ','.'),3)

 Result :- 1-117

 Now again use parsename on the same resultset 

 Select parsename(replace(parsename(replace (@Num,' ','.'),3),'-','.'),1)

 Result :- 117 
```

如果值超过 4 个，则使用拆分函数

# perl - 为什么我在使用 perl 模块 Catalyst::Model::Adaptor 时收到此错误？

> ID：11462152
> 
> 赞同：2
> 
> 时间：2012-07-12T23:23:21.570
> 
> 标签：perl, catalyst

我正在尝试让我运行一个旧项目，但我遇到了我们为 TheSchwartz 提供的模型的问题。该代码看起来与我在网上找到的执行类似操作的一堆其他示例完全相同。代码也很简单；

```
package MyApp::Model::TheSchwartz;
use Moose;
use namespace::autoclean;

extends 'Catalyst::Model::Adaptor';

__PACKAGE__->config( class => "TheSchwartz" );

sub mangle_arguments
{
  my ($self, $args) = @_;
  if($args->{databases})
  {
    if(ref($args->{databases}) eq 'HASH')
    {
      my %db = %{ $args->{databases} };
      $args->{databases} = [ \%db ];
    }
  }
  return %{ $args }
}
1; 
```

我得到的错误是

```
Couldn't instantiate component "MyApp::Model::TheSchwartz", "unknown options args, catalyst_component_name, class at /usr/local/share/perl/5.14.2/Catalyst/Model/Adaptor/Base.pm line 27."Compilation failed in require at /usr/local/share/perl/5.14.2/Module/Runtime.pm line 317.
 at /usr/local/share/perl/5.14.2/Catalyst/Script/Server.pm line 242. 
```

我试过删除 mangle_arguments 函数，我试过删除 Moose 用法并改用“use base”。我总是以同样的错误告终，而且我真的很难理解错误信息。我在代码中的任何地方都没有看到catalyst_component_name 定义，所以它必须从Catalyst::Model::Adaptor 传递下来，但是.. 为什么它不起作用？

编辑：

这是相关的配置部分：

```
<Model::TheSchwartz>
    <args>
        verbose 1
        <databases>
            dsn     dbi:mysql:host=db.vpn;dbname=theschwartz
            user    user
            pass    password
        </databases>
    </args>
</Model::TheSchwartz> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:27:39.430

您正在尝试创建一个 Moose 类，但它与常规[Catalyst::Model::Adaptor](http://metacpan.org/module/Catalyst%3a%3aModel%3a%3aAdaptor)用法不兼容；而且，在您的示例中，无论如何您都没有使用任何 Moose 功能。这可能是您真正想要的，经过轻微测试。

```
package MyApp::Model::TheSchwartz;
use parent "Catalyst::Model::Adaptor";

__PACKAGE__->config( class => "TheSchwartz" );

sub mangle_arguments {
    my ($self, $args) = @_;
    if ( $args->{databases} )
    {
        if (ref ( $args->{databases} ) eq "HASH" )
        {
            my %db = %{ $args->{databases} };
            $args->{databases} = [ \%db ];
        }
    }
    return %{ $args }
}

1; 
```

[parent](http://metacpan.org/module/parent)有时被认为比[base](http://metacpan.org/module/base)更可取，但它们几乎可以互换。

### 更新，2012 年 7 月 26 日

FWIW，这是 TheSchwartz 的工作版本，在我的一个应用程序中用作模型；我想它已经生产了 2 年。Cat 版本有几回，但不是 2 岁。很抱歉我之前没有把它挖出来——

```
package MyApp::Model::TheSchwartz;
use parent "Catalyst::Model::Adaptor";
__PACKAGE__->config( class => "TheSchwartz" );

sub mangle_arguments { %{$_[1]} }

1;

__END__
# In MyApp.pm

"Model::TheSchwartz" => {
    args => {
        verbose => 1,
        databases => [{
            dsn => "dbi:mysql:MyAppDB;host=my_host",
            user => "something",
            pass => "somethingsecret",
            }],
            }
}, 
```

您使用的[Config::General](http://metacpan.org/module/Config%3a%3aGeneral)格式可能要归咎于您的 ref/HASH 处理。您可以从我`mangle_arguments`的文章中看到，如果 args 格式正确，则根本不需要对它们做任何事情，只需将它们展平到 TheSchwartz 期望的列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T18:21:00.163

这是彻头彻尾的愚蠢，你试图说你尝试过而不期望它工作的事情之一，但不知何故这实际上似乎已经解决了它。

```
delete $args->{class};
delete $args->{catalyst_component_name};
delete $args->{args};
return %{ $args } 
```

该模型似乎仍然可以正常工作，尽管我真的希望通过随意删除像那样出错的键来破坏某些东西。

# c++ - 哪个是更好的字符串搜索算法？Boyer-Moore 还是 Boyer Moore Horspool？

> ID：11462153
> 
> 赞同：1
> 
> 时间：2012-07-12T23:23:28.457
> 
> 标签：c++, string, algorithm, search, pattern-matching

Boyer Moore 算法的预处理时间为 Θ(m + |Σ|)，匹配时间为 Ω(n/m)，O(n)。我知道 Boyer Moore Horspool 是 Simplified Boyer Moore 本身的一个进步，但是根据[这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/Boyer-Moore-Horspool_algorithm)，它的平均情况复杂度是 O(N) 和最坏情况 O(MN) 。所以在最坏的情况下，它应该比 Boyer Moore 算法慢。但智利大学的[这项经典调查](http://orion.lcg.ufrj.br/Dr.Dobbs/books/book5/chap10.htm)显示，Boyer-Moore horspool 几乎每次都优于 Boyer Moore。我很困惑！我应该使用哪个（对于小型和大型模式）进行字符串搜索，哪种算法在实际世界中具有更大的意义（我只是一名计算机科学专业的学生）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T23:35:28.733

关键词是“几乎”。最坏情况的行为可能是极少数情况。现实生活中的平均行为和渐近行为也是相当松散耦合的。Boyer-Moore-Horspool的*最佳情况*行为与 Boyer-Moore 相同。Boyer-Moore-Horspool 的最坏情况比 Boyer-Moore 更糟糕。对于典型使用，Boyer-Moore-Horspool 往往与 Boyer-Moore 大致相同，但开销和初始化成本稍好（较低）。

使用哪一个？这取决于您的目标以及您对要搜索的模式和文本的期望。两者都不是特别难以实施，所以为什么不两者都做并自己比较结果。（看看当你承认自己是学生时会发生什么？你得到了作业！:)）

# telerik-mvc - Telerik 自动完成 - 检查用户是否从返回的值集中选择了一个值

> ID：11462155
> 
> 赞同：1
> 
> 时间：2012-07-12T23:23:36.233
> 
> 标签：telerik-mvc

我的 mvc 视图上有一个 Telerik 自动完成控件。如果用户选择/键入不在值列表中的值，我想向用户显示一条消息。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:32:15.680

您可以使用从 AutoComplete 模糊时将触发的[OnChange事件。](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-combobox-client-api-and-events.html#OnChange)此外，您在事件参数对象的**e.value**字段下也有新值。

# php - php 和 html 的 echo 混合 - synatx

> ID：11462156
> 
> 赞同：0
> 
> 时间：2012-07-12T23:23:54.820
> 
> 标签：php

我正在尝试获取缩略图以显示它是否存在于 div 类中，但它以意想不到的方式输出代码（例如永久链接在 href 之外）

我究竟做错了什么？

```
<?php
 if (has_post_thumbnail( $post->ID ) ) {
   $image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'single-post-thumbnail' );
   echo '<div class="thumbnail"><a href="' . the_permalink() . '">' . $image[0] . '</a></div>';
 } else {
   echo '';
 }
?> 
```

结果是

```
 http://www.permalink.com/<div class="thumbnail"><a href="">http://www.mysite.com/wp_myblog/wp-content/uploads/2011/10/fretless-thumbnail1.jpg</a></div> 
```

不，我没有遗漏任何胡萝卜、括号、引号或任何其他代码。这是复制和过去的确切输出方式

**编辑：修复**

我不得不添加一些额外的 html，因为修复只吐出 jpg url sans`img`标签。另外，它没有显示正确的图像 - 它显示的是原始 jpg 而不是缩略图版本

```
<?php
    if (has_post_thumbnail( $post->ID ) ) {
        $image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'thumbnail' );
        echo '<div class="thumbnail"><a href="' . get_permalink() . '">' . '<img src="' . $image[0] . '"></a></div>';
    }
?> 
```

耶！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:28:15.707

该[`the_permalink`](http://codex.wordpress.org/Function_Reference/the_permalink)函数`echo`已经包含一个语句。

将其更改为[`get_permalink`](http://codex.wordpress.org/Function_Reference/get_permalink)，它应该可以正常工作：

```
<?php
    if (has_post_thumbnail( $post->ID ) ) {
        $image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'single-post-thumbnail' );
        echo '<div class="thumbnail"><a href="' . get_permalink() . '">' . $image[0] . '</a></div>';
    }
?> 
```

你也不需要那个`else`位。这可能是多余的。

事实上，对于一个更简洁的替代方案，这可能会起作用（从我自己的代码修改；只是添加了链接）：

```
<?php if ( has_post_thumbnail() ) : ?>
    <div class="hover_img">
        <a href="<?php the_permalink(); ?>">
            <?php the_post_thumbnail('thumbnail'); ?>
        </a>
    </div>
<?php endif; ?> 
```

# ios - 将我的 iPad 应用程序连接到 SQL Server

> ID：11462158
> 
> 赞同：2
> 
> 时间：2012-07-12T23:23:58.823
> 
> 标签：ios, sql-server, xcode, ipad

我有一个 iPad 应用程序，它使用表视图控制器来呈现数据列表。我想将这些表连接到 SQL Server 中的数据。我在这个编程领域的经验很少，我不知道从哪里开始。从长远来看，我想在应用程序上添加/编辑/删除数据以与服务器同步。我知道这是一个非常广泛的问题，所以我主要是在寻找帮助我入门的建议。例如，如果它不是可以实现我目标的框架，我不想开始研究和学习 Core Data。

简而言之，如何将我的应用程序连接到 SQL Server，以便我可以访问其数据并将其同步到设备？任何示例代码/演练将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:39:11.400

我目前正在使用需要相同功能的 iOS 应用程序。对于服务器上的 mySQL 数据库查询，我使用可以接受变量的服务器端 PHP 脚本，例如表名或数据库搜索词。

我所做的是使用 Objective-C 的 NSMutableURLRequest 发出 HTTP GET 请求，然后让服务器处理请求（在 PHP 中），然后以 JSON 格式将数据库查询结果返回给我的应用程序。我使用[SBJsonParser](https://github.com/stig/json-framework/)将返回的数据解析为一个 NSData，然后是一个 NSArray 对象。

在 Objective-C 中发出 HTTP 请求的示例：

```
NSString *urlString = [NSString stringWithFormat:@"http://website.com/yourPHPScript.php?yourVariable=something"];
NSURL *url = [NSURL URLWithString: urlString];

NSMutableURLRequest *request1 = [[NSMutableURLRequest alloc] initWithURL:url];

/* set the data and http method */  
[request1 setHTTPMethod:@"GET"];
[request1 setHTTPBody:nil];

/* Make the connection to the server with the http request */
[[NSURLConnection alloc] initWithRequest:request1 
                                delegate:self]; 
```

您需要添加更多代码才能在请求返回时实际响应请求，如果您愿意，我可以发布一个示例。

我实际上不知道这是否是最好的方法，但到目前为止它对我有用。不过，它确实要求您了解 PHP，如果您有任何经验，我不知道。

* * *

更新：

下面是一些示例代码，展示了如何响应请求。在我的例子中，因为我得到一个 JSON 编码的响应，所以我使用 SBJsonParser 来解析响应。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    /* This string contains the response data.
     * At this point you can do whatever you want with it 
     */
    NSString *responseString = [[NSString alloc] initWithData:receivedData
                                                     encoding:NSUTF8StringEncoding];

    /* Here I parse the response JSON string into a native NSDictionary using an SBJsonParser */
    SBJsonParser *parser = [[[SBJsonParser alloc] init] autorelease];

    /* Parse the JSON into an NSDictionary */
    NSDictionary *responseArr = [parser objectWithString:responseString];

    /* Do whatever you want to do with the response */

    /* Relsease the connection unless you want to re-use it */
    [connection release];
} 
```

还要添加这些方法，假设您有一个名为 receivedData 的 NSMUtableData 实例变量。

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{ 
    [receivedData appendData:data];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:37:46.663

我不建议直接连接到 SQL 服务器。理论上，您可以尝试为 iOS编译[FreeTDS或 unixODBC。](http://www.freetds.org/)我没有尝试过，但根据我的经验，至少 FreeTDS 应该是相当便携的。

但是，还有许多其他（并且对于大多数目的来说更好、更简单）的方法可以将数据与 SQL Server 同步。例如，您可以在 iPad 端使用[RestKit](http://restkit.org/)，在 SQL Server 端使用简单的 REST 服务。或者您可以使用具有[iOS 库的](http://odataobjc.codeplex.com/)[OData](http://www.odata.org/)（我必须承认，这是我最近才了解到的）。

# google-chrome-frame - Chrome 框架：IE9 中的访问被拒绝错误

> ID：11462159
> 
> 赞同：6
> 
> 时间：2012-07-12T23:24:25.080
> 
> 标签：google-chrome-frame

我正在尝试在我正在构建的网站上使用 Chrome-Frame。在 IE8 及更低版本中，一切正常...在 IE9 中出现此错误：

```
SCRIPT5: Access is denied.
cf-dlpage.js, line78 character 209 
```

不知道该怎么办！

这是触发行为的条件：

```
<!--[if lte IE 9]>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <style>
        body {
            overflow-y:hidden;
        }
      .chromeFrameOverlayContent {
            border:none;
            overflow:hidden;            
        }
      .chromeFrameOverlayContent iframe {
            border:none;
            overflow:hidden;
        }
      .chromeFrameOverlayCloseBar {
            display:none;
        }
      .chromeFrameOverlayUnderlay {
            background-image:url(/img/bg.png);
            opacity: 1;
            filter: alpha(opacity = 100);
        }

  </style> 
  <script type="text/javascript">
    window.onload = function() {
        CFInstall.check({
            url: "/fix/update.html",
            mode: "overlay",
            destination: "/"
        });
    };
  </script> 
  <![endif]--> 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T22:12:16.437

试试[这个](http://code.google.com/p/chromium/issues/detail?id=103925)，听起来它与你的问题有关。我希望它有帮助。阅读来自 erikwright@chromium.org 的评论，是现在的最后一条评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:39:49.403

问题是由此引起的：

1.  您的页面已开启`www.example.com`
2.  安装例程创建一个`iframe`带有 url`www.google.com/...`
3.  该`iframe`页面本身执行 Javascript 并尝试读取`window.parent`，但是...
4.  ...这是不允许的，因为两个框架都有不同的域。

唯一的解决方案似乎是：

1.  创建自己的安装脚本
2.  谷歌修复了他们的脚本

我浪费了一整天的时间来解决这个问题（嵌套框架、自定义脚本、通过我的服务器路由 Google 请求……），直到我明白*为什么*Google 似乎忽略了这个错误：

**大多数人根本没有注意到这个问题**。无论此错误如何，安装都会成功执行。要真正获得消息框，您必须启用 Javascript 调试或显示 Javascript 错误功能。

你和我启用了上述功能，因为我们是开发人员，所以我们自然会吓坏，但普通乔不会注意到任何事情。

# c# - 捕获流输出到字符串

> ID：11462163
> 
> 赞同：3
> 
> 时间：2012-07-12T23:25:06.657
> 
> 标签：c#, .net

我正在调用一个写入流的库方法。但我想写一个字符串。这可能吗？（我不控制我正在调用的方法的源代码，因此改变它不是一种选择。）

实验，我尝试了这样的事情：

```
iCalendarSerializer serializer = new iCalendarSerializer();
MemoryStream stream = new MemoryStream();
serializer.Serialize(new iCalendar(), stream, System.Text.Encoding.UTF8);
byte[] buff = new byte[stream.Length];
stream.Read(buff, 0, (int)stream.Length); 
```

但是我在最后一行收到一个错误，这与无法访问封闭的流有关。显然， Serialize() 方法在完成后关闭流。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:29:59.560

怎么样`byte[] buff = stream.ToArray()`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:30:52.727

ToArray 是从内存流中获取数据的两种正确方法之一（另一种是 GetBuffer 和 Length）。看起来您只想将字节数组大小调整为流的数据，而 ToArray 正是这样做的。

请注意，在已释放的流上调用这 3 个方法是设计安全的，因此您可以安全地包装`using(stream)`将一些数据写入流的代码。

在您的情况下，流看起来是由序列化代码（`.Serialize`）处理的。

```
iCalendarSerializer serializer = new iCalendarSerializer();
MemoryStream stream = new MemoryStream();
using(stream)
{
  serializer.Serialize(new iCalendar(), stream, System.Text.Encoding.UTF8);
}
byte[] buff = stream.ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T23:28:40.217

在您的示例中，您需要在读取发生之前更改流的位置：

```
stream.Position = 0;
stream.Read(buff, 0, (int)stream.Length); 
```

为了将流写入字符串，您可以使用 StreamReader.ReadToEnd() 方法：

```
var reader = new StreamReader(stream);
var text = reader.ReadToEnd(); 
```

# jsf - 带有单个托管 bean 的 JSF 多个数据表

> ID：11462172
> 
> 赞同：1
> 
> 时间：2012-07-12T23:27:05.583
> 
> 标签：jsf, datatable

将问题更新到以下内容：

请参阅附件代码。

```
<h:form id="tblForm" styleClass="formTblClass">
    <h3 style="text-align: center; background-color: purple; color: white;">Contact Details</h3>
        <h:panelGrid id="contactPanel" columns="3">
        <h:outputLabel for="roleIn" value="Role: " />
        <h:selectOneMenu id="roleIn" value="#{docHeader.roleIn}" required="true" requiredMessage="Please select one from dropdown.">
            <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
            <f:selectItems value="#{docHeader.listOfRoles}"/>
        </h:selectOneMenu>
        <h:message for="roleIn" style="color: red;"/>
        <h:outputLabel for="empIdIn" value="Employee ID: " />
        <h:inputText id="empIdIn" value="#{docHeader.empId}" required="true" requiredMessage="Please enter valid employee id">
            <f:ajax listener="#{docHeader.fetchEmpDetails}" render="empName workPhone emailId" />
        </h:inputText>
        <h:message for="empIdIn" style="color: red;"/>
        <h:outputLabel for="empName" value="Name: " />
        <h:inputText id="empName" readonly="true" value="#{docHeader.empName}" /><br/>
        <h:outputLabel for="workPhone" value="Work Phone: " />
        <h:inputText id="workPhone" readonly="true" value="#{docHeader.workPhone}" /><br/>
        <h:outputLabel for="emailId" value="Email ID: " />
        <h:inputText id="emailId" readonly="true" value="#{docHeader.emailId}" /><br/>
    </h:panelGrid>
    <h:commandButton value="Add">
    <f:ajax event="click" listener="#{docHeader.addContactToList}"
        render="contactPanel contactTable" execute="@this contactPanel" />
    </h:commandButton>
    <h:dataTable id="contactTable" value="#{docHeader.contactList}"
                var="contact" headerClass="list-header" rowClasses="list-row" columnClasses="list-column-center" border="1" width="100%">
    <h:column>
        <f:facet name="header">Role</f:facet>#{contact.roleIn}
    </h:column>
    <h:column>
        <f:facet name="header">Employee ID</f:facet>#{contact.empId}
        </h:column>
    <h:column>
       <f:facet name="header">Employee Name</f:facet>#{contact.empName}
        </h:column>
    <h:column>
        <f:facet name="header">Work Phone</f:facet>#{contact.workPhone}
        </h:column>
    <h:column>
        <f:facet name="header">Email ID</f:facet>#{contact.emailId}
        </h:column>
    </h:dataTable>
    <div style="text-align: center">
    <h:commandButton value="Next">
    <f:ajax event="click" render="none" listener=""/>
    </h:commandButton>
    </div>
</h:form> 
```

从上面的代码中，addtoContactList 工作得很好，contactTable 也显示了信息。

但是，当单击“下一步”时，我会收到必填字段消息，并且无法导航到下一页。

单击下一步时，我想在托管 bean 中执行一个方法，例如 moveToNextPage。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:10:42.283

您`<h:message>`在上面的 panelGrid 中有每个 inputText 的标签。所以默认情况下`<f:ajax>`会执行以下渲染=“@this”并执行=“@this”。您需要进行如下更改：

```
<h:panelGrid id="myPanel" columns="3">
  <h:outputLabel for="wrNum" value="ITG/WR #: " />
  <h:inputText id="wrNum" required="true" value="#{docHeader.wrNum}" requiredMessage="Please enter ITG/WR #."/>
  <h:message for="wrNum"/>
  <h:outputLabel for="wrDesc" value="ITG/WR Description: " />
  <h:inputText id="wrDesc" required="true" value="#{docHeader.wrDesc}" requiredMessage="Please enter ITG/WR Description"/>
  <h:message for="wrDesc"/>
</h:panelGrid>
<h:commandButton value="Add" immediate="true">
  <f:ajax event="click" listener="#{docHeader.addWrReqInfoToList}" render="myPanel workReqInfoTbl" execute="@this myPanel"/>
</h:commandButton>
<h:dataTable id="workReqInfoTbl" value="#{docHeader.workReqInfoList}" var="wrReqInfo" style="border: red solid 1px;">
</h:dataTable> 
```

# html - 仅使用 CSS 和 HTML 保持垂直滚动位置

> ID：11462176
> 
> 赞同：0
> 
> 时间：2012-07-12T23:27:38.343
> 
> 标签：html, css

单击引用的链接时，有没有办法保持我的滚动位置`href="#"`？我知道我可以使用 Javascript 来保持当前窗口的位置，但我想知道是否有办法在 CSS 和 HTML 中做到这一点。

解决方案：添加`return false;`到 JavaScript`click`函数的末尾。这可以防止`<a href="#">`实际尝试链接到`#`，从而使页面不需要在单击时重新加载，即使函数的其余部分执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:45:10.420

据推测，此链接的存在仅用于支持单击处理程序，在这种情况下，所述处理程序应该阻止链接的默认效果（即滚动页面）。

# linux - 在Linux中搜索目录中的MS word文件以获取特定内容

> ID：11462184
> 
> 赞同：18
> 
> 时间：2012-07-12T23:28:50.230
> 
> 标签：linux, unix, ms-word

我有一个充满 MS Word 文件的目录结构，我必须在目录中搜索特定的字符串。到目前为止，我一直在使用以下命令在目录中搜索文件

> 寻找 。-exec grep -li 'search_string' {} \;
> 
> 寻找 。-name '*' -打印 | xargs grep 'search_string'

但是，此搜索不适用于 MS word 文件。

是否可以在 Linux 中的 MS word 文件中进行字符串搜索？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-26T14:15:06.650

我是一名翻译，对脚本几乎一无所知，但我对 grep 无法扫描 Word .doc 文件感到非常恼火，因此我想出了如何制作这个小 shell 脚本以使用 catdoc 和 grep 搜索目录给定输入字符串的 .doc 文件。

您需要安装`catdoc`和`docx2txt`打包

```
#!/bin/bash
echo -e "\n
Welcome to scandocs. This will search .doc AND .docx files in this directory for a given string. \n
Type in the text string you want to find... \n"
read response
find . -name "*.doc" | 
while read i; do catdoc "$i" | 
grep --color=auto -iH --label="$i" "$response"; done
find . -name "*.docx" | 
while read i; do docx2txt < "$i" | 
grep --color=auto -iH --label="$i" "$response"; done 
```

欢迎所有改进和建议！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-12T01:26:31.733

这是一种使用“解压缩”将整个内容打印到标准输出的方法，然后通过管道传输到“grep -q”以检测输出中是否存在所需的字符串。它适用于 docx 格式文件。

```
#!/bin/bash
PROG=`basename $0`

if [ $# -eq 0 ]
then
  echo "Usage: $PROG string file.docx [file.docx...]"
  exit 1
fi

findme="$1"
shift

for file in $@
do
  unzip -p "$file" | grep -q "$findme"
  [ $? -eq 0 ] && echo "$file"
done 
```

将脚本保存为“inword”并在三个文件中搜索“wombat”：

```
$ ./inword wombat file1.docx file2.docx file3.docx
file2.docx 
```

现在您知道 file2.docx 包含“wombat”。您可以通过添加对其他 grep 选项的支持来获得更好的体验。玩得开心。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-29T06:28:29.393

最新版本的 MS Word 将 ascii[0] 散布在文本的每个字母之间，用于我尚无法理解的目的。我编写了自己的 MS Word 搜索实用程序，在搜索字段中的每个字符之间插入 ascii[0]，它工作得很好。笨拙但还可以。还有很多问题。也许垃圾字符并不总是相同的。需要做更多的测试。如果有人可以编写一个将所有这些考虑在内的实用程序，那就太好了。在我的 Windows 机器上，相同的文件对搜索响应良好。我们能做到！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-12T23:35:47.867

在`.doc`文件中，文本通常存在并且可以通过 grep 找到，但是该文本被分解并散布有域代码和格式信息，因此搜索您知道的短语可能不匹配。搜索非常短的内容有更好的匹配机会。

`.docx`文件实际上是在一个目录结构中收集多个文件的存档`zip`（尝试将 .docx 重命名为 .zip 然后解压缩它！）——使用 zip 压缩，grep 不太可能找到任何东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-22T09:59:11.973

开源命令行实用程序[crgrep](https://sourceforge.net/projects/crgrep)将搜索大多数 MS 文档格式（我是作者）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T19:47:27.857

如果您安装了名为**antiword**的程序，您可以使用以下命令：

```
find -iname "*.doc" |xargs -I {} bash -c 'if (antiword {}|grep "string_to_search") > /dev/null 2>&1; then echo {} ; fi' 
```

用您的文本替换上述命令中的“string_to_search”。此命令吐出包含“string_to_search”的文件的文件名

该命令并不完美，因为在小文件上工作很奇怪（结果可能是**不可信**的），因为某些反义词会吐出以下文本：

> “恐怕这个文件的文本流太小了，无法处理。”

如果文件很小（不管它是什么意思 .o.）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-13T00:05:56.173

如果文件不多，您可以编写一个包含 catdoc 之类的脚本：http://manpages.ubuntu.com/manpages/gutsy/man1/catdoc.1.html [，](http://manpages.ubuntu.com/manpages/gutsy/man1/catdoc.1.html)通过循环遍历每个文件，执行 catdoc 和 grep ，将其存储在 bash 变量中，如果满意则将其输出。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-03T18:05:23.817

我遇到的最佳解决方案是使用`unoconv`将 word 文档转换为 html。它也有一个 .txt 输出，但在我的情况下它删除了内容。

[http://linux.die.net/man/1/unoconv](http://linux.die.net/man/1/unoconv)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-12T23:32:51.047

您是否尝试过**awk** '/Some|Word|In|Word/' document.docx ？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-13T03:16:38.570

我找到了一种使用 ripgrep 的预处理器功能来搜索 Word 文件 (`doc`和) 的方法。`docx`

这取决于正在安装的以下内容：

*   [ripgrep](https://github.com/BurntSushi/ripgrep)（更多关于预处理器的信息在[这里](https://github.com/BurntSushi/ripgrep/blob/master/GUIDE.md#preprocessor)）
*   自由办公室
*   [docx2txt](https://github.com/ankushshah89/python-docx2txt)
*   这个 catdoc2 脚本，我已添加到我的`$PATH`：

```
#!/bin/bash

temp_dir=$(mktemp -d)
trap "rm $temp_dir/* && rmdir $temp_dir" 0 2 3 15

libreoffice --headless --convert-to "txt:Text (encoded):UTF8" --outdir ${temp_dir} $1 1>/dev/null
cat ${temp_dir}/$(basename -s .doc $1).txt 
```

一级递归搜索的命令模式是：

```
$ rg --pre <preprocessor> --glob <glob with filetype> <search string> 
```

例子：

```
$ ls *
one:
a.docx

two:
b.docx  c.doc
$ rg --pre docx2txt --glob *.docx This
two/b.docx
1:This is file b.

one/a.docx
1:This is file a.
$ rg --pre catdoc2 --glob *.doc This
two/c.doc
1:This is file c. 
```

# algorithm - 在矩阵中查找有效词

> ID：11462196
> 
> 赞同：2
> 
> 时间：2012-07-12T23:31:09.553
> 
> 标签：algorithm

给定一个单词字典，两个 API Is_word(string) Is_prefix(string) 和一个 NxN 矩阵，每个位置由一个字符组成。如果从任何位置（i，j）你可以在四个方向中的任何一个方向移动，找出所有可以在矩阵中形成的有效单词。（不允许循环，即如果您从 (i,j) 开始并移动到 (i-1,j) 则不能从该位置返回到 (i,j)）

我尝试了什么 :: 我可以看到一个指数解决方案，我们通过所有可能性和跟踪已经访问过的索引。我们能有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:42:59.673

这是我能做的最好的：

1.  在允许的方向的一半中枚举所有可能的字符串。（您可以反转字符串以获得其他方向。）
2.  对于每个字符串中的每个起始字符位置，构建子字符串，直到它们既不是单词也不是前缀。

编辑：我可能误解了这个问题。我认为每个单独的单词只能由同一方向的动作组成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:03:30.293

我倾向于通过创建两个并行数据结构来解决这个问题。一个是单词列表（删除重复项）。另一个是前缀矩阵，其中每个元素都是一个列表。希望可以使用这样的数据结构。列表矩阵实际上可以是一个三元组列表，单词和坐标在原始矩阵中。

在任何情况下，遍历原始矩阵并在每个元素上调用 isword()。如果是单词，则将该单词插入单词列表。

然后遍历原始矩阵，并比较每个元素上的调用 isprefix()。如果是前缀，则插入前缀矩阵。

然后，通过前缀矩阵并测试前缀与附加字母的四种组合。如果是单词，则放入单词列表。如果是前缀，则添加到前缀矩阵，在最后一个字母的位置。记住两者都要，因为一个词可以是前缀。

此外，在前缀列表中，您不仅需要保留字母列表，还需要保留已使用字母的位置。这用于防止循环。

然后继续这个过程，直到没有单词和前缀。

很难衡量这种结构的复杂性，因为它似乎取决于字典的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T05:31:28.320

我认为你不能在这里击败指数。证明？

考虑一下当你有一个矩阵的情况，你有一个字母排列，这样每个组合都是一个有效的字典单词，即当你从 [i,j] 开始时，例如 [i,j] 与 [i-1,j ] 或 [i+1,j] 或 [i,j+1] 或 [i,j-1] 都是 2 个字母的单词，并且递归地继续，即长度 n（根据您的规则）的任何组合都是一个单词。在这种情况下，你不能比蛮力做得更好。

# c++ - 以 jpeg 格式发送 Iplimage 数据

> ID：11462197
> 
> 赞同：0
> 
> 时间：2012-07-12T23:31:15.373
> 
> 标签：c++, opencv

我正在尝试将 Iplimage 作为 c++/cli 中的字节数组发送到另一个程序。程序需要将 Iplimage 保存为 jpeg 图像。假设 Iplimage 是我通过 cvQyeryFrame 从 avi 视频文件中获取的 img，我将 img->imagedata 返回给其他程序。img->imagedata 是否包含要保存的 jpeg 图像的标头，还是仅包含数据。如果它只包含数据，我如何包含标题？我可以使用 cvSaveImage 保存图像然后读取它，但应该有更直接的方法（也许是 cvEncodeImage？）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:42:18.267

一旦从磁盘读取 Iplimage 中的数据，就已经将其解码为自己的 openCV 格式（通常为 8 位 B、G、R）。

较新版本的 opencv 可以对内存中的图像进行编码/解码，请参见[imencode](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#imencode)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:34:07.973

如果您需要整个 JPEG 数据，您可能需要考虑从磁盘读取整个文件，`fread()`而不是`cvLoadImage()`.

如果这对您不起作用，请考虑马丁的回答。

# javascript - 隐藏输入的值在显然不是时返回空白

> ID：11462198
> 
> 赞同：2
> 
> 时间：2012-07-12T23:31:28.373
> 
> 标签：javascript, jquery

为什么我不能从此输入中获取值？见下图：

![在此处输入图像描述](../Images/a954829cfec6e082f69d14a1fdcbafdd.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T23:33:44.213

输入上的属性应该是`value`，而不是`val`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:33:54.670

而是使用：

```
$('#SortField').prop('value'); 
```

在你的 HTML 中应该是：

```
<input type="hidden" name="sortField" id="SortField" value="CT#" /> 
```

## *[jsBin 演示](http://jsbin.com/isezut/2/edit)*

# c# - 忽略 DTO 的 ReSharper 命名规则

> ID：11462199
> 
> 赞同：9
> 
> 时间：2012-07-12T23:31:34.053
> 
> 标签：c#, resharper, resharper-6.1

我设置了 ReSharper 命名规则，以便所有属性名称都必须是 PascalCase。然而，有时我必须使用不同的命名风格来处理序列化。例如，backbone.js 期望对象有一个名为“id”的 ID。

我宁愿让我的对象与序列化程序的期望相匹配，而不是使用花哨的序列化属性来改变事物的命名方式。有没有办法将我的 DTO 类标记为这样，这样 resharper 就不会抱怨它们？那么基于约定的方法呢，例如“免除任何名称以 'Dto' 结尾或位于名为 'Dto' 的命名空间中的类？此外，我宁愿不使用特殊的`//disable rule XX`注释块。我发现它们真的让人分心

```
 public class PersonDto
 {
     public int id {get;set;}    //i want resharper to accept this as a valid name,
                                 //  but only in this context.
     public string Name {get;set;}
     public string _CID {get;set;} //some external api is sending me data named like this
 } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-13T05:35:25.297

您可以禁用对任何文件的检查。在 Resharper 选项中，转到**代码检查：设置**，然后单击“编辑要跳过的项目”。添加`*.DTO.cs`到“要跳过的文件掩码”列表。

# javascript - 正则表达式从空格分隔的字符串中删除顺序重复

> ID：11462201
> 
> 赞同：1
> 
> 时间：2012-07-12T23:31:48.267
> 
> 标签：javascript, regex

我正在尝试仅删除（从字符串中）顺序出现的重复项。也就是说，给定字符串“1 2 3 3 2 1”，只有一个 3 应该被删除（即“1 2 3 2 1”）。我真的以为我已经弄清楚了。然后，在测试过程中，我发现了一个不起作用的案例。我已经尝试了我能想到的所有组合，但无济于事。当然这很简单，因为这不是一件难事（显然，除了我）。

以下是一些 Javascript 来说明问题。第一个 testVal 字符串被正确处理。注释掉的 testVal 字符串未正确处理。

```
// The following string should reduce to: MTC MTCA MTC ORD MTC (it does).
var testVal = "MTC MTC MTCA MTC MTC MTC ORD MTC";

// The following string should reduce to: MTC (it does not.  Result = MTC MTC).
// The string MTC MTC MTC MTC also only reduces to MTC MTC, so I'm thinking
// it's a whitespace issue.
// var testVal = "MTC MTC";

while (/\b(\s*\w+\s*)\b\1/.test(testVal)) {
    testVal = testVal.replace(/\b(\s*\w+\s*)\b\1/g,'$1');
}

alert(testVal1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:35:27.990

您将空格作为要匹配两次的单词的一部分。尝试

```
/\b(\w+)\s+\1\b/ 
```

# java - frame.add() 出错，不知道为什么

> ID：11462206
> 
> 赞同：2
> 
> 时间：2012-07-12T23:32:55.770
> 
> 标签：java, swing

所以我用java做了一个简单的盒子，这是到目前为止的代码：

导入 java.awt.Canvas；导入 javax.swing.JFrame；

```
public class Display {

    public static final int WIDTH = 800;
    public static final int LENGTH = 600;

    public static void main(String[] args) {
        Display game = new Display();
        JFrame frame = new JFrame();
        frame.setResizable(false);
        frame.setVisible(true);
        frame.setSize(WIDTH, LENGTH);
        frame.add(game);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

我在这里遇到错误“frame.add(game);” 它说“容器类型中的方法添加（组件）不适用于参数（显示）”

我如何不确定我做错了什么，我正在使用 javaSE-1.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:55:23.923

您正在尝试将`Display`不是 Swing 组件的 实例添加到您的`frame`中，因此出现错误。查看您的导入，您可能打算`JPanel`在您的`Display`类中添加一个（如果有的话）到`frame`.

或者，如果您想直接添加它，您的`Display`类需要从类似的东西继承。`JComponent`您不应该不必要地混合 AWT 和 Swing 组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T23:54:52.403

您的显示需要扩展 Component ，因为这是该`add`方法期望的参数。将其设为 JPanel 可能是个好主意。

你提到你只想要一个基本的窗口。这可以解决问题：

```
import javax.swing.*;

public class Display extends JFrame {

    public static void main(String[] args){
        new Display();
    }

    public Display() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(400, 200);
        setVisible(true);
    }
} 
```

# java - Java，多重继承。我该怎么做？

> ID：11462208
> 
> 赞同：6
> 
> 时间：2012-07-12T23:32:59.463
> 
> 标签：java, design-patterns, inheritance, multiple-inheritance

我正在创建一个员工工资系统。我有一个抽象`Employee`类。`WageEmployee`并`Manager`扩展`Employee`。然后程序员和`SalesPerson`扩展`WageEmployee`。

我的问题是我想创建一个`SalesManager`. 他们的`SalesManger`工资是通过增加佣金和工资来计算的。所以他们有类型`SalesPerson`和`Manager`。

我应该做什么接口，应该`SalesPerson`扩展什么？

从管理器扩展`SalesManager`，然后做`SalesPerson`一个接口是很自然的。但我不能，因为它继承自`WageEmployee`...

我怎样才能让它工作。适当地？

```
abstract class Employee 
{
  String name;

  Employee() {}
  Employee (String nm) { name = nm; }
  abstract double computePay();
  void display () {}
  void setHours(double hrs) {}
  void setSales(double sales) {}
  void setSalary(double salary) { System.out.println("NO!"); } 
```

}

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T23:44:32.293

说我疯了，但你可能不需要子类来处理这里不同的支付方式。相反，考虑使用[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)来计算工资/销售佣金。这样，您就有了一个类`Employee`及其子类`SalesEmployee`；这些中的每一个都将具有一个对象作为属性`PayStrategy`，该对象可以具有具体的子类`WagePayStrategy`和`CommissionPayStrategy`. 如果您在`PayStrategy`（可能是接口或抽象类）上定义了正确的方法，您可以让您的`Employee`实例询问策略对象员工因某些输入（工作时间、销售额等）而获得的报酬。

考虑以下简单的示例：

```
interface PayStrategy {
    public float getPay(float hoursWorked, float salesMade);
}

class WageStrategy implements PayStrategy {
    public float getPay(float hoursWorked, float salesMade) {
        return hoursWorked * 8.5;
    }
}

class CommissionStrategy implements PayStrategy {
    public float getPay(float hoursWorked, float salesMade) {
        return salesMade * 0.5 + hoursWorked * 5.0;
    }
}

abstract class Employee {
    public PayStrategy payStrategy; // assign as needed

    public float getPay(float hoursWorked, float salesMade) {
        return this.payStrategy.getPay(hoursWorked, salesMade);
    }
} 
```

请注意如何在不需要不同类别的情况下更改任何给定员工的薪酬策略，从而为您提供更多的灵活性和围绕该算法的封装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:41:57.910

`Employee`有方法`getFixedSalary()`和`getComissionSalary()`.

您可以创建抽象子类`SalariedEmployee`（`getComissionSalary`始终返回 0）并制作`Programmer`和`SalesPerson`扩展它。`SalesManager`直接实现`Employee`。

或者所有的类都直接继承自`Employee`，以在薪水等级发生变化时提供最大的灵活性（我会这样做）。编写辅助方法以避免重复代码，但如果以后需要，您仍然可以选择更改操作方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T23:44:23.833

当您扩展类时，您通常希望保留某种功能并通过扩展来添加它。使用接口，它为您提供对象将具有的方法列表。

看起来你有`Employee`s 和`Manager`s，你必须决定从哪里扩展功能。不查看您的代码或对象模型，看起来每个人都是 an`Employee`并且其中一些是`Manager`. 所以看起来你需要决定一个经理做什么额外的事情，使它与一个员工分开。然后一切都将扩展`Employee`，并扩展`Employee`（`WageEmployee`，，`SalaryEmployee`等）的子类，然后是管理器，它们实现一个`Manager`接口。所以你可以有一个`SalesPerson`扩展 a`WageEmployee`然后一个`SalesManager`扩展`SalesPerson`来实现`Manager`.

# javascript - 类似 Jinja 的 JS 模板语言

> ID：11462211
> 
> 赞同：25
> 
> 时间：2012-07-12T23:33:13.330
> 
> 标签：javascript, jquery, jinja2, template-engine, language-comparisons

我真的很喜欢 django/jinja2 模板语言。它们的语法非常简单，但用途广泛。在javascript中的语法和功能上是否有类似的东西，或者如果不是两者，至少在功能上。

我查看了下划线、jquery 模板和 mustache 模板，但它们似乎都不是我想要的。

**补充说明**

我认为在所有库（我看过）中，胡子是最好的，但我不太喜欢这种语法。例如这个胡子模板

```
{{#people}}
    {{name}}
{{/people}}
{{^people}}
    No people :(
{{/people}} 
```

与 django 的模板相比：

```
{% for person in people %}
    {{ person.name }}
{% empty %}
     No people :(
{% endfor %}` 
```

应用过滤器也是一样的。例如：

```
{{#filter}}{{value}}{{/filter}} 
```

对比

```
{{ value|filter }} 
```

我认为 django/jinja2 方法更干净，感觉更自然。

那么，是否有任何 js 库的模板与 django/jinja 非常相似？如果不是，我想我必须忍受 muschache（或者其他一些好的 js 库——我愿意接受建议），但这感觉不对。

谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-04-03T20:55:42.773

看看[Nunjucks](http://jlongster.github.io/nunjucks/)，一个深受 Jinja2 启发的 JS 模板引擎。它支持块继承、宏、过滤器等等，并且适用于服务器（NodeJS）和客户端（大多数浏览器）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-10T15:02:03.380

我的 JavaScript Jinja 实现可以在这里找到： [https ://github.com/sstur/jinja](https://github.com/sstur/jinja)

它支持 Jinja 和 Liquid 语法，在浏览器和 Node 中运行，将模板编译为无依赖的 JavaScript，压缩后大小约为 3K

[http://sstur.com/jinja/demo/](http://sstur.com/jinja/demo/)

包括测试。Express.js 支持正在进行中..

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-12T04:47:19.017

来自@pradeek 评论的链接。它是 jinja 到 js 的一个端口。

[https://github.com/ericclemmons/jinja.js](https://github.com/ericclemmons/jinja.js)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-26T22:43:41.797

**编辑：不再维护**

[Swig](http://paularmstrong.github.io/swig/)是一个很棒的、类似于 Django/Jinja 的模板引擎，适用于 node.js 和浏览器。

```
<h1>{{ pagename|title }}</h1>
<ul>
{% for author in authors %}
    <li{% if loop.first %} class="first"{% endif %}>{{ author }}</li>
{% endfor %}
</ul> 
```

您可以添加自定义标签来实现各种类型的模板语法：

```
{% filter %}{{value}}{% endfilter %}
{% filter 'value' %}
{{ value | filter }} 
```

旁注：您可以使用 Django`request.is_ajax()`有条件地发回未渲染的 Django 模板，并使用 Swig 使用 JSON 对象渲染它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-13T08:51:16.243

> 一个javascript模板库，旨在兼容django的模板语言

[盘子](https://github.com/chrisdickinson/plate)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-13T17:24:54.160

这是非常新的：angularjs [http://googledevelopers.blogspot.nl/2012/06/better-web-templating-with-angularjs-10.html](http://googledevelopers.blogspot.nl/2012/06/better-web-templating-with-angularjs-10.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-30T04:25:30.040

我已经将 Jinja2 与 Python 一起使用，现在我在 Node.js 平台上的另一个项目中使用 jinjs。

[https://github.com/ravelsoft/node-jinjs](https://github.com/ravelsoft/node-jinjs)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-13T14:19:57.473

twig.js 看起来也很有趣，而且重量小于盘子 [https://github.com/justjohn/twig.js](https://github.com/justjohn/twig.js)

# php - PHP删除以前的循环数据

> ID：11462218
> 
> 赞同：0
> 
> 时间：2012-07-12T23:34:27.383
> 
> 标签：php, javascript, ajax

所以我在我的网站上有一个“显示最近的”图片 div，我会每 20 秒刷新一次内容，以显示一张新图片。问题是我当前的 ajax 调用会立即刷新，而不是在 20 秒后刷新，并且刷新时不会删除以前的数据，因此它列出了所有 1000 多张图片。

这是我的ajax调用：

```
$(window).load(function(){
    var timer = 0;
    for (x =0; x<=20; x++)
    {
        timer++;
        if(timer == 20 || x == 20)
        {
            //create XMLHttpRequest object
            xmlHttpRequest = (window.XMLHttpRequest) ?
                new XMLHttpRequest() : new ActiveXObject("Msxml2.XMLHTTP");

            //If the browser doesn't support Ajax, exit now
            if (xmlHttpRequest == null)
                return;

            //Initiate the XMLHttpRequest object
            xmlHttpRequest.open("GET", "../php/rotalas.php", true);

            //Setup the callback function
            xmlHttpRequest.onreadystatechange = updt_pictures;

            //Send the Ajax request to the server with the GET data
            xmlHttpRequest.send(null);
        }
        function updt_pictures()
        {
            if(xmlHttpRequest.readyState == 4)
            {
                document.getElementById('friss_kepek').innerHTML = xmlHttpRequest.responseText;
            }
        }
    } 
```

这是列出新文件的调用php

```
<?php
$timer = 0;
for($x = 0; $x < 20; $x++)
{
    if($timer == 20 OR $x==20)
    {
        $timer = 0;
        $x= 0;
    }
}

$x = 1;
while($x >=$timer)
{
$imgdir = '../img/blog/img/amator/Amator_thumb/'; //Pick your folder .. images

$i=0;

$dimg = opendir($imgdir);//Open directory
while($imgfile = readdir($dimg))
{
    if( in_array(strtolower(substr($imgfile,-3)),$allowed_types) OR
        in_array(strtolower(substr($imgfile,-4)),$allowed_types) )
        /*If the file is an image add it to the array*/
    {$a_img[] = $imgfile;}
    if ($imgfile != "." && $imgfile!="..")
    {
        $imgarray[$i]=$imgfile;
        $i++;
    }

closedir($imgdir);

$totimg = count($a_img);  //The total count of all the images .. img_coun

for($x=$page*1; $x < $totimg && $x < ($page+1)*1; $x++){
    $rand=rand(0,count($imgarray)-1);
    if($rand >= 0)
    {
        echo '<img class="kep_listaz" src="../img/blog/img/amator/Amator_thumb/'.$imgarray[$rand].'" width="160" height="140">';
    }} 
```

我尝试在循环结束时使用 sleep(20)，但它根本没有刷新。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:51:16.383

正如 Erty 提到的，您的代码运行速度非常快 20 倍，因此它基本上一次发送 20 个请求。如果你可以设置20秒超时的递归函数。

前任：

```
function updatePic(counter){
  setTimeout(function(){
    //do ajax call and you can use counter to determine what picture to return
    updatePic(counter++);
  }, 20000);
} 
```

对于 PHP 端，您不需要任何与计时器相关的东西。请注意，您可以在 setTimeout() 外部或内部运行 ajax 调用 - 取决于您想要在第一个循环中执行的操作（调用该函数，然后在进行 ajax 调用之前等待 20 秒，或者每 20 秒进行一次 ajax 调用，第一个在您调用该函数时立即发生）。

更好的选择是使用 javascript/jquery 的幻灯片插件。有很多选择，我最喜欢的是[循环](http://jquery.malsup.com/cycle/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:40:29.417

Javascript 不会每秒运行一次“++”运算符 - 它会运行 20 次，非常快。您应该使用 setInterval 函数让 js 仅每 20 秒调用一次：

[http://www.w3schools.com/jsref/met_win_setinterval.asp](http://www.w3schools.com/jsref/met_win_setinterval.asp)

更改您的 JS（未经测试！！！）：

```
$(window).load(function(){
    setInterval(function(){
        //create XMLHttpRequest object
        xmlHttpRequest = (window.XMLHttpRequest) ?
            new XMLHttpRequest() : new ActiveXObject("Msxml2.XMLHTTP");

        //If the browser doesn't support Ajax, exit now
        if (xmlHttpRequest == null)
            return;

        //Initiate the XMLHttpRequest object
        xmlHttpRequest.open("GET", "../php/rotalas.php", true);

        //Setup the callback function
        xmlHttpRequest.onreadystatechange = function(){
            if(xmlHttpRequest.readyState == 4){
                document.getElementById('friss_kepek').innerHTML = xmlHttpRequest.responseText;
            }
        };

        //Send the Ajax request to the server with the GET data
        xmlHttpRequest.send(null);
    }, 20000); //Run every 20000ms
} 
```

编辑：你的PHP应该是这样的：

```
$imgdir = '../img/blog/img/amator/Amator_thumb/'; 

$i=0;

$dimg = opendir($imgdir);//Open directory
while($imgfile = readdir($dimg))
{
    if( in_array(strtolower(substr($imgfile,-3)),$allowed_types) OR
        in_array(strtolower(substr($imgfile,-4)),$allowed_types) )
        /*If the file is an image add it to the array*/
    {$a_img[] = $imgfile;}
    if ($imgfile != "." && $imgfile!="..")
    {
        $imgarray[$i]=$imgfile;
        $i++;
    }
}
closedir($imgdir);

$totimg = count($a_img);  //The total count of all the images .. img_coun

for($x=$page*1; $x < $totimg && $x < ($page+1)*1; $x++){
    $rand=rand(0,count($imgarray)-1);
    if($rand >= 0)
    {
        echo '<img class="kep_listaz" src="../img/blog/img/amator/Amator_thumb/'.$imgarray[$rand].'" width="160" height="140">';
    }
} 
```

我根本没有测试过这个，但一般的想法应该在那里。javascript 使用 setInterval 每 20 秒进行一次 AJAX 调用，然后 PHP 立即响应一些图像。由您决定如何获得您想要的图像。

需要注意的是：**不要使用 for 循环来计时！**这就是所谓的 CPU 限制，除非你真的知道自己在做什么，否则不应该这样做。

祝你好运！

# apache-flex - 创建延迟组件时显示弹出窗口

> ID：11462219
> 
> 赞同：0
> 
> 时间：2012-07-12T23:34:33.927
> 
> 标签：apache-flex

我有一个具有 ViewStack 的应用程序。该堆栈有大约 15 个左右的全屏面板，每个面板都有很多事情要做。因此，每个面板的子项的创建都被推迟（使用 creationPolicy），直到需要它们为止。我想在面板创建开始之前将某些内容显示为模式弹出窗口（请稍候...），如下所示：

```
PopUpManager.addPopUp(myPopup, FlexGlobals.topLevelApplication.root, true);

LayoutManager.getInstance().usePhasedInstantiation = false; 
theStack.thePanel.createComponentsFromDescriptors(true);
LayoutManager.getInstance().usePhasedInstantiation = true;

PopUpManager.removePopUp(instance); 
```

但当然似乎发生的是没有显示任何内容，创建发生，持续几秒钟，然后弹出窗口迅速出现并消失。

在继续之前，如何强制在 addPopUp 之后显示弹出窗口？

# assembly - 汇编代码中的返回地址

> ID：11462221
> 
> 赞同：3
> 
> 时间：2012-07-12T23:34:48.147
> 
> 标签：assembly, x86, call

汇编代码如下：

```
 call next
next:
  popl %eax 
```

我想之后`call next`，返回地址将被压入堆栈，对吗？但是在上面的代码中，返回地址是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T00:57:46.523

在该代码执行后 %eax 将具有标签“next”的地址

1.  调用分支到恰好是下一条顺序指令的目标并推送返回地址，该地址始终是下一条顺序指令的地址
2.  popl 会将返回地址从堆栈中弹出到 %eax 寄存器中

最终效果是 %eax 指向标签“下一个”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T00:02:46.433

它是紧跟在指令后面的`call`指令的地址。请参阅您的 CPU 文档以了解其`call`工作原理。

# c# - 更新抛出 EntityCollection 已初始化错误

> ID：11462226
> 
> 赞同：1
> 
> 时间：2012-07-12T23:35:47.570
> 
> 标签：c#, asp.net, entity-framework

我正在使用实体框架来更新两个表。数据库模式由具有自动递增 ID 的 Customer 表和具有外键关系的子表组成。子表只有两列 - 客户 ID 的复合键和作为 varchar 中第二列的信息。

我有一个视图对象：

```
public class CustomerView
{
    public long id { get; set; }
    public String firstName { get; set; }
    public String lastName { get; set; }
    public String streetAddress { get; set; }
    public String city { get; set; }
    public String state { get; set; }
    public String zip { get; set; }
    public String profession { get; set; }
    public String[] linesOfBusiness { get; set; }
} 
```

这是我的视图对象和实体之间的映射类：

```
internal static Customer getCustomerFromView(CustomerView customer)
{
    Customer newCustomer = new Customer
    {
        Customer_ID = customer.id,
        FirstName = customer.firstName,
        LastName = customer.lastName,
        Street = customer.streetAddress,
        City = customer.city,
        State = customer.state,
        Zip = customer.zip,
        Profession = customer.profession
    };
    foreach (String line in customer.linesOfBusiness)
    {
        newCustomer.LinesOfBusinesses.Add(new LinesOfBusiness { Customer_ID = customer.id, LineOfBusiness = line });
    }
    return newCustomer;
} 
```

我可以很好地创建实体，但是当我去更新一个时，我遇到了实体集合已经被初始化的错误。下面是更新方法：

```
private void updateCustomer(CustomerView customer)
{
    using (LocalCustomerDB data = new LocalCustomerDB())
    {
        Customer dbCustomer = (from c in data.Customers where c.Customer_ID == customer.id select c).Single();
        Customer tempCustomer = CustomerMapper.getCustomerFromView(customer);
        dbCustomer.FirstName = tempCustomer.FirstName;
        dbCustomer.LastName = tempCustomer.LastName;
        dbCustomer.LinesOfBusinesses = tempCustomer.LinesOfBusinesses;
        dbCustomer.Profession = tempCustomer.Profession;
        dbCustomer.State = tempCustomer.State;
        dbCustomer.Street = tempCustomer.Street;
        dbCustomer.Zip = tempCustomer.Zip;
        dbCustomer.City = tempCustomer.City;
        data.SaveChanges();
    }
} 
```

我对 Entity Framework 很陌生：我哪里出错了？

谢谢！

编辑

* * *

应评论的要求，这里是调用 update(); 的代码。

```
 public long saveCustomer(CustomerView customer)
        {
            long returnValue = 0;
            using (LocalCustomerDB data = new LocalCustomerDB())
            {
                if (customer.id > 0)
                {
                    updateCustomer(customer);
                    returnValue = customer.id;
                }
                else
                {
                    Customer newCustomer =
                    CustomerMapper.getCustomerFromView(customer);
                    data.Customers.AddObject(newCustomer);
                    data.SaveChanges();
                    returnValue = newCustomer.Customer_ID;
                }
            }
            return returnValue;
        } 
```

这是堆栈跟踪：

```
 at System.Data.Objects.DataClasses.RelationshipManager.InitializeRelatedCollection[TTargetEntity](String relationshipName, String targetRoleName, EntityCollection1 entityCollection)
    at CustomerRegistry.Customer.set_LinesOfBusinesses(EntityCollection`1
value) in C:\Users\Michael\Documents\Personal
Projects\CustomerRegistry\CustomerRegistry\CustomerRegistry\CustomerModel.Designer.cs:line
386
    at CustomerRegistry.Project_Code.DataAccess.CustomerRepository.updateCustomer(CustomerView
customer) in C:\Users\Michael\Documents\Personal
Projects\CustomerRegistry\CustomerRegistry\CustomerRegistry\Project
Code\DataAccess\CustomerRepository.cs:line 41
    at CustomerRegistry.Project_Code.DataAccess.CustomerRepository.saveCustomer(CustomerView
customer) in C:\Users\Michael\Documents\Personal
Projects\CustomerRegistry\CustomerRegistry\CustomerRegistry\Project
Code\DataAccess\CustomerRepository.cs:line 19
    at CustomerRegistry.CustomerEntry.Submit_Click(Object sender,
EventArgs e) in C:\Users\Michael\Documents\Personal
Projects\CustomerRegistry\CustomerRegistry\CustomerRegistry\CustomerEntry.aspx.cs:line
40
    at System.Web.UI.WebControls.Button.OnClick(EventArgs e)
    at System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument)
    at System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String
eventArgument)
    at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler
sourceControl, String eventArgument)
    at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData)
    at System.Web.UI.Page.ProcessRequestMain(Boolean
includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:37:37.510

我不是 100% 肯定的，因为我只使用 Code First 完成了 Entity，但我认为您在 CustomerView 中的子对象集合上缺少虚拟修饰符。尝试将 CustomerView 更改为：

```
public class CustomerView
{
    public long id { get; set; }
    public String firstName { get; set; }
    public String lastName { get; set; }
    public String streetAddress { get; set; }
    public String city { get; set; }
    public String state { get; set; }
    public String zip { get; set; }
    public String profession { get; set; }
    public virtual String[] linesOfBusiness { get; set; }
} 
```

注意linesOfBusiness 上的虚拟修饰符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:07:26.250

尝试改变

```
dbCustomer.LinesOfBusinesses = tempCustomer.LinesOfBusinesses; 
```

至

```
tempCustomer.LinesOfBusinesses.ForEach(z => dbCustomer.LinesOfBusinesses.Add(z)); 
```

让我们知道例外情况仍然存在。我认为您不能对导航属性 ( `dbCustomer.LinesOfBusinesses`) 产生任何影响。您可以添加、删除、查询对象。但是您不能修改*引用*的实例。

# c# - 在 WPF 中的用户控件之间传递对象

> ID：11462228
> 
> 赞同：0
> 
> 时间：2012-07-12T23:35:50.540
> 
> 标签：c#, .net, wpf, user-controls

我有一个包含一系列输入字段（等）的应用程序`TextBoxes`。`ComboBoxes`单击按钮时，用户输入被初始化为新的自定义对象。然后窗口的内容被替换为新的`UserControl`（所以我现在有一个空白视图来显示新信息）。

我想将第一个视图中创建的对象的一些方法输出绑定到已显示的新用户控件中的文本框。

单击按钮时会创建新对象，因此不会在开始时进行初始化。

但明显的错误是我在第一个视图中创建的 newObject 在第二个视图的上下文中不存在

希望这是有道理的

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T08:38:03.880

您可以隐藏/显示它们，而不是替换`UserControls`它们，这样您就可以在其他视图中访问它们。

但这不是一个很好的设计，如果您的窗口中有很多控件，则会出现问题。更好的方法是使用 MVVM 并将视图的输出保存在 MVVM 属性等中。

# wpf - 根据 ListBox 中的索引设置 ListBoxItem 的样式

> ID：11462229
> 
> 赞同：3
> 
> 时间：2012-07-12T23:35:53.820
> 
> 标签：wpf, xaml, listbox, listboxitem, multidatatrigger

如果 SomeProperty 值为 10，我想更改 ListBox 中第一项的边距，而不使用代码隐藏。这是我到目前为止所拥有的：

```
<ListBox  x:Class="Windows.CustomList"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                 xmlns:local="clr-namespace:Windows"
                 mc:Ignorable="d" x:Name="MyList"
                 d:DesignHeight="300" d:DesignWidth="300">
    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}">
            <Style.Triggers>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding Path=SomeProperty}" Value="10"/>
                        <Condition Binding="{Binding Path=Items.Count, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBox}}}" Value="1" />
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Margin">
                        <Setter.Value>
                            <Thickness Left="500"/>
                        </Setter.Value>
                    </Setter>
                </MultiDataTrigger>
            </Style.Triggers>
        </Style>
    </ListBox.ItemContainerStyle>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <local:ListBoxItemCustomTemplate/>
        </DataTemplate>
    </ListBox.ItemTemplate>
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
</ListBox> 
```

当我尝试这种方法时，我得到：

> System.Windows.Data 错误：4：找不到与引用'RelativeSource FindAncestor，AncestorType ='ListBox'，AncestorLevel ='1''的绑定源。BindingExpression:Path=Items.Count; 数据项=空；目标元素是 'ListBox' (Name=''); 目标属性是“NoTarget”（类型“对象”）

如果我只有第一个条件，它会正确应用边距。我尝试的另一种方法是使用 ElementName：

这种方法不会给出任何错误，但它也不起作用。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T23:58:36.210

见[`AlternationIndex`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.alternationindex.aspx)。（您可以使用非常高的值`AlternationCount`来确保只有第一项具有索引`0`和触发器）。

这有点滥用，更简洁的方法是值转换器/多值转换器，它通过类似`listBox.Items.IndexOf(currentItem)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T00:52:58.047

另一种解决方案是子类化列表框，并覆盖 PrepareContainerForItemOverride 方法。请参阅下面的示例（它适用于 WP7 中的 Silverlight，因此我没有 AlternationIndex）..

```
public class ListBoxEx: ListBox
{
    public interface iContainerStyle
    {
        Thickness containerMargin { get; }
        Thickness containerPadding { get; }
    };

    protected override void PrepareContainerForItemOverride( DependencyObject element, Object item )
    {
        base.PrepareContainerForItemOverride( element, item );

        var style = item as iContainerStyle;
        if( null == style )
            return;

        var container = element as ListBoxItem;
        if( null == container )
            return;
        container.Margin = style.containerMargin;
        container.Padding = style.containerPadding;
    }
} 
```

然后我从 ListBoxEx.iContainerStyle 派生我的项目以获得不同项目的不同边距。

# google-app-engine - AppEngine 恢复所有任务

> ID：11462233
> 
> 赞同：0
> 
> 时间：2012-07-12T23:35:54.960
> 
> 标签：google-app-engine, queue, task

在我的生产服务器上，我有大约 500 个任务队列连续 30 次失败并在任务队列中等待。除了手动单击所有任务的“运行”之外，有没有办法恢复所有任务？我不能在任务队列文档中指向“恢复所有”功能的任何内容。

我尝试使用 task_retry_limit: 100 上传新的 queue.yaml，但它不起作用。就像，在达到 30 标记后，appengine 只是停止执行任务

queue.yaml 在失败的 500 个任务之前

```
 queue:
      - name: default
      - rate: 1/s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:47:09.677

Note that as your tasks continue to fail and retry, the Task Queue system schedules the task to execute further and further into the future. By default, the maximum ETA is 1 hour. Was it just the case that your tasks all had an ETA of 1 hour into the future?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T06:34:01.143

只需尝试一次新队列名称（如下所示）而不是默认队列，此队列对我有用。

```
- name: sales-queue
  rate: 10/s
  max_concurrent_requests: 1
  retry_parameters:
   task_retry_limit: 500
   min_backoff_seconds: 10
   max_backoff_seconds: 20 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:47:32.120

仪表板中没有运行所有任务的按钮。任务未执行的原因是 15,000 个失败的任务（可能中间没有成功的任务）导致 App Engine 大幅停止任务执行，而不管指定的任务速率如何。

要恢复所有任务，只需手动运行其中几个。如果成功，App Engine 会注意到并再次缓慢增加任务执行率，这会导致更多任务运行并成功，这会导致 App Engine 增加任务率，依此类推，直到恢复默认任务率。这将相对快速地级联到正在运行的所有 500 个任务中。

# python - 使用正则表达式解析字符串？

> ID：11462235
> 
> 赞同：0
> 
> 时间：2012-07-12T23:36:07.773
> 
> 标签：python, regex

```
my_string = "Value1=Product Registered;Value2=Linux;Value3=C:5;C++:5;Value4=43;" 
```

我正在使用以下正则表达式：

```
tokens = re.findall(r'([^;]+)=([^;]+)', line, re.I) 
```

我需要解析 value1、value2 等并将它们的值放入数据库中。例如，我需要存储`"C:5;C++:5"`--`value3`但通过使用上面的正则表达式，我只能存储`C:5`，因为我基于`";"`. 有什么更好的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:49:33.997

假设键名不包含分号似乎是合理的。如果这不是真的，那么正如菲利普指出的那样，这种语言是模棱两可的。但如果不是，您可以使用前瞻来判断哪个`;`是分隔符：它必须后跟一系列不是`;`or的东西，`=`然后是一个`=`or 字符串结尾：

```
>>> my_string = "Value1=Product Registered;Value2=Linux;Value3=C:5;C++:5;Value4=43;"
>>> r = re.compile(r'([^;]+)=([^=]+);(?=[^;=]*(?:=|$))')
>>> r.findall(my_string)
[('Value1', 'Product Registered'),
 ('Value2', 'Linux'),
 ('Value3', 'C:5;C++:5'),
 ('Value4', '43')] 
```

# visual-studio - Visual Studio 9.0 错误指定未定义的结构/联合

> ID：11462237
> 
> 赞同：-1
> 
> 时间：2012-07-12T23:36:46.930
> 
> 标签：visual-studio, struct, union, undefined

我的 Visual Studio 9.0 项目出现错误

```
1>..\..\..\..\..\Work Projects\putty-svn\sshnogss.c(9) : error C2037: left of 'libraries' specifies undefined struct/union 'ssh_gss_liblist'
1>..\..\..\..\..\Work Projects\putty-svn\sshnogss.c(10) : error C2037: left of 'nlibraries' specifies undefined struct/union 'ssh_gss_liblist' 
```

我也不知道为什么。代码是：

```
struct ssh_gss_liblist *ssh_gss_setup(Conf *conf)
{
    struct ssh_gss_liblist *list = snew(struct ssh_gss_liblist *);
    list->libraries = NULL;
    list->nlibraries = 0;
    return list;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:39:51.493

您需要包括`sshgss.h`. 您是否检查过该文件的路径是否在 INCLUDE 列表中的路径列表中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:46:30.607

[编译器错误 C2037](http://msdn.microsoft.com/en-us/library/aa229188%28v=vs.60%29.aspx)

> 成员选择运算符（-> 或 .）之前的表达式标识了未定义的结构或联合类型。

# math - 如何沿圆移动点？

> ID：11462239
> 
> 赞同：4
> 
> 时间：2012-07-12T23:36:49.287
> 
> 标签：math, cocos2d-iphone, trigonometry

我想通过使用圆半径和移动角度以圆周运动移动精灵。

例如，我知道精灵在半径为 10 的圆圈中移动，它的当前位置是 (387,38)，角度是 28 度。现在我不想移动它说，沿着圆的周长 100 像素。

![描述场景的图片](../Images/4ab7919c7d2b074f8e1915504aeea005.png)

```
p1 = x&y coordinate, known (387,38) in example with movingangle 28 degrees
r = radius, known (10 in example)
l = distance to move along bend, known (100px in example)
p2 = new point, what is this x and y value? 
```

我有一个可行的解决方案，但我不太喜欢它。这对我来说有点没有意义，它需要的计算比我认为的要多。它的工作原理是首先使用 p1 计算中心点，然后向后做同样的事情，可以说得到 p2（使用 cosinus 和 sinus）。我相信应该有一种更快的方法，但我找不到任何人这样做。

我标记 cocos2d 的原因是因为这就是我正在使用的东西，有时游戏框架会提供函数来帮助处理三角函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T23:41:03.620

试试这个：

```
a1 = 28*(π/180)
cen.x = p1.x - r*SIN(a1)
cen.y = p2.y - r*COS(a1)
a2 = a1 + l/r
p2.x = cen.x + r*SIN(a2)
p2.y = cen.y + r*COS(a2) 
```

没有比这更简单的了。从 p1 移动到圆心，然后移动到 p2。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T08:09:03.987

您可以以非常简单的方式使用锚点的魔法来做到这一点=）任何节点的所有转换都是相对于它的锚点完成的。旋转也是一种变换。所以，你可以做这样的事情

```
CGFloat anchorY = neededRadius / spriteHeight;
[yourSprite setAnchorPoint:ccp(0.5f, anchorY)];
[yourSprite setPosition:neededPosition]; //remember that position is also for anchor point
[self addChild: yourSprite];
[yourSprite runAction:anyRotateAction]; // i mean, CCRotateBy or CCRotateTo 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T07:42:57.390

计算原点，然后使用[极坐标](http://en.wikipedia.org/wiki/Polar_coordinate_system)沿圆移动该点。

# jquery - Soundmanger 2 在 Rails 应用程序中不起作用

> ID：11462242
> 
> 赞同：3
> 
> 时间：2012-07-12T23:37:13.827
> 
> 标签：jquery, ruby-on-rails-3, soundmanager2

Soundmanager 2(http://www.schillmania.com/projects/soundmanager2/doc/download/) 在我的 ruby​​ on rails 应用程序中不起作用。

只有当我添加 ?assets_debug=1 时它才有效，我尝试了所有 sm .js 文件，但每次应用程序都不会重新启动。

错误：

```
soundManager is not defined
[Break On This Error]   

soundManager.setup({ 
```

并在萤火虫内部的 JS 代码中：

```
<script>
//<![CDATA[
soundManager.setup({
url: '/assets/',
debugMode: false,
onready: function() {
var mySound = soundManager.createSound({
id: 'aSound',
url: '/assets/start.mp3',
onload: function() { console.log('sound loaded!', this); }
});
mySound.play();
},
ontimeout: function() {
}
});
//]]>
</script> 
```

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:00:33.557

您可能有两个版本的 js——原始源文件，以及为 Rails 3 资产管道创建的编译文件（缩小、连接等）。

有时 JS 中的细微错误会导致编译过程生成无效代码（例如，如果一个文件没有以换行符结尾而附加了另一个文件）。当你运行 with 时`assets_debug=1`，你告诉 Rails 使用不受影响的原始源文件。

调试这个是一个挑战——无论是在 Firebug 还是 Chrome 调试器中，缩小的代码充其量是难以阅读的。但它可以给你一个线索。

另一个可能的原因是 Rails 默认和 soundmanager 使用的版本之间的 jQuery 版本差异尚未解决。您可能想查看正在使用的 jQuery 版本。但是，您报告的错误并不表明这是一个原因。

最后，确保在`app/assets/javascripts/application.js`文件中满足任何实际的依赖关系，可能通过更改在这些行之前或之后指定项目的顺序，这实际上不是注释:-)

```
//= require jquery
//= require jquery_ujs 
```

# objective-c - 使用点表示法的优点和缺点是什么？

> ID：11462248
> 
> 赞同：0
> 
> 时间：2012-07-12T23:38:02.950
> 
> 标签：objective-c

我正在学习Objective-C，并且我读过我应该专门使用括号表示法和点表示法。使用其中一个有什么实际好处，还是个人喜好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:48:43.943

点表示法是当前在 Objective-C 中访问属性的最佳方式。一种或另一种范式的论据主要是风格上的，Apple 的风格是点符号。作为一个 Objective-C 初学者，你应该始终努力模仿 Apple 的风格。谁告诉你专门使用括号表示法是不正确的。

而且，虽然你没有问这个，我还是要在这里提一下，因为对于刚学习 Obj-C 的人来说，它是一个永久的困惑源。以下设置器是*相同的*

```
[self setFoo:42];
self.foo = 42; 
```

以下吸气剂是*相同的*

```
bar = [self foo];
bar = self.foo; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:57:08.620

处理属性时，应始终使用点表示法。不仅写起来更快（`self.foo`比 字符少`[short foo]`），更重要的是它使链接的消息更容易理解。例如：

```
self.myTextField.text.length 
```

比更容易理解

```
[[[self myTextField] text] length] 
```

此外，它降低了您弄乱标点符号的可能性（确保您有正确数量的括号通常很痛苦）。

# android - 如何为edittext的焦点状态更改背景图像

> ID：11462249
> 
> 赞同：1
> 
> 时间：2012-07-12T23:38:12.480
> 
> 标签：android, colors, themes, android-edittext, border

我知道我的问题的标题听起来像是一个已经回答的问题。但是，我的问题有所不同，我找不到解决方案

在我的应用程序中，我有一个带有两个 EditText 的登录屏幕。我使用 Theme.Holo.Light 的修改版本。

EditText 看起来像这样：

![Theme.Holo.Light 的 EditText](../Images/185cc16ebdb279db27ed5c8e4d810b2b.png)

如您所见，文本下方有不同颜色的边框，具体取决于 EditText 的状态。

所以这是我的问题：谁能告诉我如何改变这些边框的颜色？

我希望有人能帮助我！提前致谢！

编辑：

不幸的是，我遇到了另一个问题：

我能够使用 dtmilano 的解决方案更改背景图像。但是，添加 StateListDrawable 删除了 EditView 的填充。如果我添加文本，光标位于最左边的位置，而不是像以前那样在描绘的边框内。到现在为止，我无法引入这个填充，例如使用 android:paddingLeft。

谁能告诉我使用此选择器覆盖了哪个属性

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector 
        xmlns:android="http://schemas.android.com/apk/res/android"  
        >
        <item 
            android:state_pressed="true"
            android:drawable="@drawable/edittext_pressed" 
            /> <!-- pressed -->    
        <item 
            android:state_focused="true"
            android:drawable="@drawable/edittext_focused"
            /> <!-- focused -->    
        <item 
            android:drawable="@drawable/edittext_default" 
            /> <!-- default -->
    </selector> 
```

和这样的 EditText：

```
 <EditText
        android:id="@+id/loginEmail"
        android:background="@drawable/edittext_modified_states"
        android:inputType="textEmailAddress"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:42:50.087

您应该在主题中使用[StateListDrawable](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)作为 EditText 的背景，以便您可以处理不同的状态。

# java - Getter 和 @Nonnull

> ID：11462257
> 
> 赞同：7
> 
> 时间：2012-07-12T23:39:28.020
> 
> 标签：java, null, annotations, non-nullable

我从 Eclipse 收到警告，我知道我可以通过抑制警告将其删除，但我更愿意了解是什么让它可能为空。

包信息.java

```
@ParametersAreNonnullByDefault
package test;

import javax.annotation.ParametersAreNonnullByDefault; 
```

测试.java

```
package test;

public class Test {
    public static void main( final String[ ] args ) {
        System.out.println( new Test( "a" ).getS( ) );
    }

    private final String s;

    public Test( final String s ) {
        this.s = s;
    }

    public String getS( ) {
        return this.s;//Null type safety: The expression of type String needs unchecked conversion to conform to '@Nonnull String'
    }
} 
```

我不明白为什么我会收到此警告...

PS：

`public Test( @Nonnull final String s ) {`-> nullness 注释是多余的，具有适用于该位置的默认值

`@Nonnull private final String s;`-> 没有任何变化

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T23:58:50.463

问题是 @Nonnull 注释对字段没有影响。它仅支持：

*   方法参数
*   方法返回值
*   局部变量（在代码块内）

[见日食文档](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/task-using_null_annotations.htm)

很明显 - 由于 Nonnull 没有在字段上检查 - 编译器不知道 Test.s 是 Nonnull 并抱怨它。

显而易见的解决方案确实是在字段访问（或方法上，如果它是一个简单的 getter）上添加一个 @SuppressWarnings("null") ：

```
public String getS() {
    @SuppressWarnings("null")
    @Nonnull String s = this.s;
    return s;
} 
```

# iphone - 在输入期间移动文本字段

> ID：11462258
> 
> 赞同：2
> 
> 时间：2012-07-12T23:39:28.840
> 
> 标签：iphone, objective-c, ios

我已经设置了一些文本字段和标签，使其看起来像一个简单的表单，必须获得一些用户输入。My problem is however that whenever some of the text fields are selected and the keyboard slides out, the text fields are covered making it impossible to see the input. 我的问题是如何向上移动文本字段，以便它们在选择时保持在视图中。也许有经验的人可以帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T23:50:42.420

我喜欢做的一个很好的解决方案是在文本字段开始使用以下委托函数进行编辑时收听：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    //keep a member variable to store where the textField started
    _yPositionStore = textField.frame.origin.y;

    //If we begin editing on the text field we need to move it up to make sure we can still
    //see it when the keyboard is visible.
    //
    //I am adding an animation to make this look better
    [UIView beginAnimations:@"Animate Text Field Up" context:nil];
    [UIView setAnimationDuration:.3];
    [UIView setAnimationBeginsFromCurrentState:YES];

    commentTextField.frame = CGRectMake(commentTextField.frame.origin.x,
                        160 , //this is just a number to put it above the keyboard
                        commentTextField.frame.size.width,
                        commentTextField.frame.size.height);

    [UIView commitAnimations];
} 
```

然后在此回调中，您可以将其返回到其原始位置：

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{

    [UIView beginAnimations:@"Animate Text Field Up" context:nil];
    [UIView setAnimationDuration:.3];
    [UIView setAnimationBeginsFromCurrentState:YES];

    commentTextField.frame = CGRectMake(commentTextField.frame.origin.x,
                        _yPositionStore ,
                        commentTextField.frame.size.width,
                        commentTextField.frame.size.height);

    [UIView commitAnimations];
} 
```

}

您需要将 _yPositionStore 声明为 CGFloat 的成员变量，并将您的 textFields 委托设置为拥有它的视图控制器（使用界面生成器并将委托拖动到文件所有者或设置 yourTextField.delegate = self）

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T23:50:25.137

这样做你需要遵循接下来的 2 个步骤：
- 将所有内容`UITextViews`放入`UIScrollView`
- 注册键盘通知并`UIScrollView`在键盘出现时滑动你的
两个步骤在这里解释：[“移动位于键盘下方的内容”](https://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T09:07:32.093

您可以调用 UITextfield 的委托方法并根据需要进行自定义。

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    [self animateTextField: textField up: YES];

}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    [self animateTextField: textField up: NO];

}

- (void) animateTextField: (UITextField*) textField up: (BOOL) up
{
    const int movementDistance = 110; 
    const float movementDuration = 0.3f; 

    int movement = (up ? movementDistance : -movementDistance);

    [UIView beginAnimations: @"aimation" context: nil];
    [UIView setAnimationBeginsFromCurrentState: YES];
    [UIView setAnimationDuration: movementDuration];
    yourView.frame= CGRectOffset(yourView.frame,0, movement);
    [UIView commitAnimations];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-14T14:34:20.017

对于我的应用程序，我使用以下代码，假设键盘高度为 216（纵向模式）和 162（横向模式）：

```
#pragma mark - textField delegate

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    // keyboard is visible, move views
    CGRect myScreenRect = [[UIScreen mainScreen] bounds];
    int keyboardHeight = 216;
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.35];
    int needToMove = 0;
    CGRect frame = self.view.frame;
    if (textField.frame.origin.y + textField.frame.size.height + self.navigationController.navigationBar.frame.size.height + [UIApplication sharedApplication].statusBarFrame.size.height > (myScreenRect.size.height - keyboardHeight)) {
        needToMove = (textField.frame.origin.y + textField.frame.size.height + self.navigationController.navigationBar.frame.size.height + [UIApplication sharedApplication].statusBarFrame.size.height) - (myScreenRect.size.height - keyboardHeight);
    }
    frame.origin.y =  -needToMove;
    [self.view setFrame:frame];
    [UIView commitAnimations];
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    // resign first responder, hide keyboard, move views
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.35];
    CGRect frame = self.view.frame;
    frame.origin.y = 0;
    [self.view setFrame:frame];
    [UIView commitAnimations];
} 
```

这个公式考虑了状态栏、导航栏和显示大小。当然不要忘记为您的字段设置委托。

与：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [[UIApplication sharedApplication] sendAction:@selector(resignFirstResponder) to:nil from:nil forEvent:nil];
} 
```

当用户在字段外点击时，您可以隐藏键盘。

# javascript - 如何在将索引作为函数参数发送时避免引用 for 循环中的最后一个索引？

> ID：11462261
> 
> 赞同：0
> 
> 时间：2012-07-12T23:39:53.973
> 
> 标签：javascript, jquery

我写了这段代码：

```
function(targetSliderObject, images){
        // create thumbs container
        var thumbsContainer = $("<div></div>").addClass(defaultOptions.thumbsContainerClass);
        // add thumbs
        for(i in images)
        {
            thumb = $("<img />").addClass(defaultOptions.thumbItemClass).addClass(i);
            thumb.attr("src", images[i]);
            thumb.click(function(){
                methods.slideNext(targetSliderObject, i);
            });
            thumb.appendTo(thumbsContainer);
        }
        // add thumbs container to container
        targetSliderObject.append(thumbsContainer);
} 
```

我打算做的是每次都用不同的数字调用 method.slideNext() ，但是我要发送对 i 的引用作为函数的参数，最后，它是我所有数组的最后一个索引大拇指。

我可以使用什么技巧来完成我想要的？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:44:03.417

“锚定”的值`i`：

```
(function(i) {
    // code that uses i
})(i); 
```

# php - 获取表单隐藏变量到函数

> ID：11462262
> 
> 赞同：0
> 
> 时间：2012-07-12T23:40:01.637
> 
> 标签：php, javascript, html

我知道该函数需要使用 onclick 或任何事件来调用。但是是否有可能在没有用户处理的情况下获得隐藏值。

样品表格：

```
 $ID = 3;
 $Report1 = "Test1.docx";
 <form id = "Test" action="Nextpage.php">
 //Not sure how to call out my function over here...
 <input type="hidden" id="ID" name="ID" value="<?php echo $ID ?>"/> 
 <input type="hidden" id="ReportPath" name="ReportPath" value="<?php echo $ReportPath ?>"/> 
 //Once user click, function of RemoveDoc() will handle it.
 <input type="submit" id="Remove" name="<?php echo $Report1?>" value="Remove" title="Remove report1" onclick="return RemoveDoc(this.name, this.getAttribute('Report1'));" /> 
```

我的功能：

```
 function Remove(ID, ReportPath, Report1)
 {
xmlhttp1=new XMLHttpRequest();

xmlhttp1.open("GET","functions/call.php?ID="+ID+"&ReportPath="+ReportPath+"&Report1="+Report1,true);
xmlhttp1.onreadystatechange=function()
 {
    if (xmlhttp1.readyState==4 && xmlhttp1.status==200)
     {
    document.getElementById("msg").innerHTML=           xmlhttp1.responseText;
     }
 }
xmlhttp1.send();
    return false;
 } 
```

那么如何将输入的隐藏值传递到我的函数 Remove(ID,ReportPath...) 中，因为它现在已隐藏并且未采取任何操作。好心提醒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:37:37.050

你可以得到

```
var id = document.getElementById('ID').value;
var reportpath  = document.getElementById('ReportPath').value;
var report1  = document.getElementById('Report1').value; 
```

调用函数：

```
Remove(id, reportpath, report1); 
```

为了让您更轻松。你可以使用jquery。只需将其包含在您的页面中：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<form id="Test" action="Nextpage.php">
 <input type="hidden" id="ID" name="ID" value="<?php echo $ID ?>"/> 
 <input type="hidden" id="ReportPath" name="ReportPath" value="<?php echo $ReportPath ?>"/> 

 <input type="submit" id="remove" name="<?php echo $Report1?>" value="Remove"/>
</form>

<script>
$('#remove').click(function(){
    var id = $('#ID').val();
    var reportpath  = $('#ReportPath').val();
    var report1  = $('#Report1').val(); //check this as I dont see it in your form

    //call your function from here
    Remove(id, reportpath, report1);
});

//function definition here
function Remove(id, reportpath, report1)...
</script> 
```

# objective-c - iOS - 想要动画 sin x 图

> ID：11462268
> 
> 赞同：0
> 
> 时间：2012-07-12T23:40:43.693
> 
> 标签：objective-c

对我在 SO 上的第一篇文章感到非常兴奋！

我想在 xcode中创建[这样的动画](http://www.ies.co.jp/math/products/trig/applets/graphSinX/graphSinX.html)

我对 CABasicAnimation 提供的东西不太满意。

感觉我可能需要那些花哨的物理引擎之一......（？）

如何*正确地*开始这样做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:38:11.413

我可能会`NSBezierPath`用来创建这样的动画。我将创建一条在每次迭代时沿正弦曲线延伸的路径，并适当地描边路径。如果您向我们提供有关您尝试做什么的更多详细信息，我们可以为您提供有关如何执行此操作的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-06T01:01:00.383

正是你想要的。[TFAnimation](https://github.com/luowenxing/TFAnimation/tree/master)允许您`timingFunction`通过将闭包设置为`timeFunction`of来使用自定义`TFBasicAnimation`。

github中的demo就是一个**Sin**动画。它使用x位置的`CAAnimationGroup`线性组合和y位置的**Sin**。`CABasicAnimation``TFBasicAnimation` **`timeFunction`**

# asp.net - 在 asp.net 错误中使用 WCF

> ID：11462273
> 
> 赞同：0
> 
> 时间：2012-07-12T23:41:31.787
> 
> 标签：asp.net, wcf, web-config, wcf-client

我通过向我的项目添加服务引用来消耗 wcf，然后我将 web.confing 更改为这样

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <connectionStrings>
    <add name="ApplicationServices" connectionString="data source=.;initial catalog=Services;user id=sa;password=123;Connect Timeout=45;"/>
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880"/>
    </authentication>
    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/"/>
      </providers>
    </membership>
    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>
    <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/"/>
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/"/>
      </providers>
    </roleManager>
  </system.web>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

  <system.serviceModel>
    <services>
      <service name="DreamServices.DreamService">
        <endpoint address="" binding="webHttpBinding" contract="DreamServices.IServices" behaviorConfiguration="web">
        </endpoint>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp />
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior>
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <webHttpBinding>
        <binding name="defaultRest">
          <readerQuotas maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxDepth="64" maxNameTableCharCount="2147483647" />
          <security mode="None" />
        </binding>
      </webHttpBinding>
    </bindings>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>

  <appSettings>
    <add key="JsonWebService" value="http://localhost:1381/PMAHost/Service.svc" />
  </appSettings>

</configuration> 
```

但我总是得到例外

在 ServiceModel 客户端配置部分中找不到引用合同“ServiceReference.IServices”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此协定匹配的端点元素。

该模块`system.serviceModel`在图书馆或网站中重复

任何想法如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:55:50.950

这是服务端配置

```
<service name="DreamServices.DreamService"> 
```

客户端配置是什么样的？它应该有一个客户端元素，`contract="DreamServices.IServices"`无论您的合同名称是什么。

# java - 如何在 Android Java 中知道网页最后修改的日期和时间

> ID：11462274
> 
> 赞同：2
> 
> 时间：2012-07-12T23:41:35.850
> 
> 标签：java, android, last-modified, if-modified-since

如何知道使用 Android Java 上次修改网页的日期？或者我如何要求

> If-Modified-Since：如果内容未更改，则允许返回 304 Not Modified

使用 http 标头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:24:39.577

我可以这样做：

```
URL url = null;
        try {
            url = new URL("http://www.example.com/example.pdf");
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        HttpURLConnection httpCon = null;
        try {
            httpCon = (HttpURLConnection) url.openConnection();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        long date = httpCon.getLastModified(); 
```

# ruby-on-rails - 是否有一个好的 oh-my-zsh 或 sublime text 2 插件可以使 Rails 查询更具可读性？

> ID：11462280
> 
> 赞同：0
> 
> 时间：2012-07-12T23:42:22.980
> 
> 标签：ruby-on-rails, terminal, zsh, sublimetext2, iterm

在 iterm2 中运行 rails 控制台并查询数据库时，它会以逗号分隔的大 blob 形式输出查询结果。是否有一个好的插件可以以更具可读性的方式格式化控制台查询的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:46:49.600

也许漂亮的印刷可以在这里提供帮助？我目前使用[awesome_print](https://github.com/michaeldv/awesome_print/)。

所以，而不是

```
User.all # or whatever another query you're running 
```

你会写这个

```
ap User.all 
```

你应该得到更好的结果。

# apache - Apache、Nginx 和静态内容

> ID：11462284
> 
> 赞同：0
> 
> 时间：2012-07-12T23:43:23.403
> 
> 标签：apache, nginx, static-content

Nginx比 Apache 更快地提供*静态*内容似乎已经达成共识。但是，我不确定这意味着什么。例如，我有一个脚本，*仅*当缓存中不存在相同的图像时才会生成图像。如果它确实存在于缓存中，则脚本只返回图像的公共地址。

这会被认为是动态的、静态的还是两者兼而有之？更重要的是，在这种场景下，Nginx 还会有速度优势吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:44:57.993

在 Web 服务器的上下文中，“静态”通常意味着内容已知存在于磁盘上的文件中，并且不是通过运行任何类型的程序动态生成的。

听起来你的脚本，因为它是一个脚本，是*动态*内容。

# sql-server-2008 - 使用 IN 插入/更新时触发错误

> ID：11462285
> 
> 赞同：0
> 
> 时间：2012-07-12T23:43:26.373
> 
> 标签：sql-server-2008

我的触发器执行以下操作：

```
INSERT INTO CRM_CONTACTS_PRERENDER 
SELECT * FROM V_CRM_ADDRESS_00
WHERE CRMID = (SELECT CRMID FROM INSERTED) 
```

现在，当插入/更新仅包含 1 个 CRMID 时，我没有遇到任何问题。但是一旦有 2 个或更多，触发器就会引发错误。帮助最受赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:06:52.690

您的`WHERE`子句仅处理单个（或没有）值。使用`IN`而不是`=`：

```
WHERE CRMID IN (SELECT CRMID FROM INSERTED) 
```

处理所有插入的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:56:02.113

因为 Select 返回一个结果集，所以在条件语句中应该使用“in”。喜欢：

```
WHERE CRMID in (SELECT CRMID FROM INSERTED) 
```

# ios - 如何创建自定义 Xcode 预处理器宏

> ID：11462286
> 
> 赞同：0
> 
> 时间：2012-07-12T23:43:40.107
> 
> 标签：ios, xcode, preprocessor

我正在尝试创建一个预处理器宏来简化我不断使用的一些代码。该代码只是创建一个字典，然后发布一个通知。像这样：

```
NSDictionary* dict = [NSDictionary dictionaryWithObject:@"This is a test"
                                                 forKey:@"debugMessage"];

[[NSNotificationCenter defaultCenter] postNotificationName:@"FLRDebugViewLog"
                                                    object:self
                                                  userInfo:dict]; 
```

我很想创建一个宏，这样我就可以输入：

```
MBDebug(@"This is a test",self); 
```

即只是传递我要发布的消息和对象。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:19:04.773

这应该有效。:)

```
#define MBDebug(m,s) NSDictionary* dict = [NSDictionary dictionaryWithObject:m forKey:@"debugMessage"]; [[NSNotificationCenter defaultCenter] postNotificationName:@"FLRDebugViewLog" object:s userInfo:dict]; 
```

# java - Hibernate验证器如何验证对象，包括它的相关对象？

> ID：11462287
> 
> 赞同：1
> 
> 时间：2012-07-12T23:43:43.993
> 
> 标签：java, hibernate, spring-mvc, hibernate-validator

我有一个 Event 类，与它关联的多对一 Person 对象，（它又具有自己的验证器注释。当我验证我的 Event 类时，它没有调用相关对象的验证？

```
Set<ConstraintViolation<Event>> cv = getValidator().validate(i); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T01:21:50.670

用 with注释`Person`字段以使验证也验证实例。`Event``@Valid``Person`

# jquery - 滚动跟随 div 在一个位置停止跟随并开始其他 div 跟随

> ID：11462288
> 
> 赞同：1
> 
> 时间：2012-07-12T23:43:49.970
> 
> 标签：jquery, css, scroll, position

我想做一个像这样的jQuery滚动跟随：

[http://www.girlfriendnyc.com/portfolio](http://www.girlfriendnyc.com/portfolio)

我希望右侧边栏停在特定位置，然后其他边栏开始。

我不知道该怎么做。

我希望你的帮助。对不起我的英语不好。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:22:13.957

最后我解决了我的问题。

这是一个小例子，如果它对某人有帮助：

[http://jsfiddle.net/e4VzT/2/](http://jsfiddle.net/e4VzT/2/)

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:12:07.170

快速回答可帮助您入门：

在滚动事件期间，使用 javascript 检测主要内容与窗口 scrollTop 的位置，然后将右侧边栏的 css 调整为 position:fixed 或 absolute。

# php - PHP排序复杂多维数组

> ID：11462289
> 
> 赞同：1
> 
> 时间：2012-07-12T23:43:51.497
> 
> 标签：php

我一直在努力尝试通过“user_likes”和“created_time”在 PHP 中对这个数组进行排序。我在 Stackoverflow 上查看了一些示例，但无法找出正确的语法。我希望订单从最多的“user_likes”开始，然后是“created_time”，不确定它是否可能。我一直在尝试使用 array_multisort，但没有成功。

```
 Array
            (
                [0] => Array
                    (
                        [taskuser] => Array
                            (
                                [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-04-23 13:53:58
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 0
                            )

                        [comments] => Array
                            (
                                [comments] => 0
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

                [1] => Array
                    (
                        [taskuser] => Array
                            (
                                [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-04-23 14:05:20
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 0
                            )

                        [comments] => Array
                            (
                                [comments] => 0
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

                [2] => Array
                    (
                        [taskuser] => Array
                            (
                                [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-04-23 14:09:11
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 0
                            )

                        [comments] => Array
                            (
                                [comments] => 0
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

                [3] => Array
                    (
                        [taskuser] => Array
                            (
                                [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-04-23 14:11:35
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 0
                            )

                        [comments] => Array
                            (
                                [comments] => 0
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

                [4] => Array
                    (
                        [taskuser] => Array
                            (
                                [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-05-25 11:22:17
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 3
                            )

                        [comments] => Array
                            (
                                [comments] => 1
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

                [5] => Array
                    (
                        [taskuser] => Array
                            (
                                [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-04-17 15:56:00
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 0
                            )

                        [comments] => Array
                            (
                                [comments] => 0
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

                [6] => Array
                    (
                        [taskuser] => Array
                            (
                                [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-04-17 15:58:03
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 0
                            )

                        [comments] => Array
                            (
                                [comments] => 0
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

                [7] => Array
                    (
                        [taskuser] => Array
                            (
                                [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-04-20 16:24:53
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 0
                            )

                        [comments] => Array
                            (
                                [comments] => 0
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

                [8] => Array
                    (
                        [taskuser] => Array
                            (
                                [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-05-11 15:56:55
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 1
                            )

                        [comments] => Array
                            (
                                [comments] => 0
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

                [9] => Array
                    (
                        [taskuser] => Array
                            (
                               [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-05-11 16:05:35
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 1
                            )

                        [comments] => Array
                            (
                                [comments] => 4
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

                [10] => Array
                    (
                        [taskuser] => Array
                            (
                               [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-05-30 21:04:00
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 0
                            )

                        [comments] => Array
                            (
                                [comments] => 0
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

                [11] => Array
                    (
                        [taskuser] => Array
                            (
                               [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-05-30 21:04:55
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 0
                            )

                        [comments] => Array
                            (
                                [comments] => 0
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

                [12] => Array
                    (
                        [taskuser] => Array
                            (
                                [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-04-17 15:54:32
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 0
                            )

                        [comments] => Array
                            (
                                [comments] => 0
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

                [13] => Array
                    (
                        [taskuser] => Array
                            (
                                [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-04-17 15:54:54
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 0
                            )

                        [comments] => Array
                            (
                                [comments] => 0
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

                [14] => Array
                    (
                        [taskuser] => Array
                            (
                                [profilepic] => 1e605ad76c82d41f6467c2525f796ebd.jpg
                                [postid] => 598
                                [message] => sweet!
                                  [created_time] => 2012-04-17 15:53:19
                            )

                        [time_created] => 3d
                        [likes] => Array
                            (
                                [like_type] => 0
                            )

                        [comments] => Array
                            (
                                [comments] => 1
                            )

                        [user_likes] => Array
                            (
                                [user_likes] => 0
                            )

                        [user_comments] => Array
                            (
                                [user_comments] => 0
                            )

                        [user_favorite] => Array
                            (
                                [isFav] => 0
                            )

                    )

            ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:44:54.413

你想要[`usort`](http://php.net/usort)。让回调比较`user_likes`，然后比较`created_time`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:15:35.187

其中 $results 是上面的数组，请尝试

```
usort($results, function($a, $b){
    //check case for same number of user likes
    if ($a['user_likes']['user_likes'] == $b['user_likes']['user_likes']){
        if (strtotime($a['taskuser']['created_time']) == strtotime($b['taskuser']['created_time'])){
            return 0;
        } else if (strtotime($a['taskuser']['created_time']) < strtotime($b['taskuser']['created_time'])){
            return 1;
        } else {
            return -1;
        }

    } else if ($a['user_likes']['user_likes'] < $b['user_likes']['user_likes']){
        return 1;
    } else {
        return -1;  
    }
}); 
```

# python - 谷歌应用引擎 + 谷歌云存储 + Sqlite3 + Django/Python

> ID：11462291
> 
> 赞同：1
> 
> 时间：2012-07-12T23:44:21.933
> 
> 标签：python, django, sqlite, google-app-engine, google-cloud-storage

由于无法在 GAE 上远程访问 mysql，如果没有谷歌云 sql，我可以将 sqlite3 文件放在谷歌云存储上并通过带有 django.db.backends.sqlite3 的 GAE 访问它吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:54:44.897

由于您无法修改 Google Cloud Storage 中的文件（有关更多详细信息，请参阅[此文档](https://developers.google.com/appengine/docs/python/googlestorage/overview#open_object_write)），我认为尝试它也不是一个好主意。此外，每次下载整个 sqlite 文件的开销（可能）会使您的应用程序非常慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T01:45:06.847

Google Cloud SQL 就是为此而生的，你为什么不想使用它呢？

如果您让每个前端实例都加载数据库文件，那么您将很难同步它们。这没有任何意义。你为什么想做这个？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T04:57:22.307

不可以。SQLite 需要 App Engine 上不可用的本机代码库。

# c++ - 有什么类似于 std::value_wrapper 与 std::reference_wrapper 平行的东西吗？

> ID：11462304
> 
> 赞同：-1
> 
> 时间：2012-07-12T23:45:24.827
> 
> 标签：c++, c++11, wrapper, const-correctness, reference-wrapper

（**更新：**这个问题源于一个包装类的实现，该包装类通过值传递一个对象，该对象对`const Foo`and具有不同的含义`Foo`，这一举动[完全基于这里人们的强烈意见](https://stackoverflow.com/questions/11219159/make-interchangeable-class-types-via-pointer-casting-only-without-having-to-all)。之前，我一直在传递`const Foo*`和`Foo*`当包装器来了，我把它换成了`Wrapper<Foo>`and `const Wrapper<Foo>`。 *现在很明显，机械替换没有意义，我需要更复杂的东西，比如`Wrapper<Foo>`and `Wrapper<const Foo>`...虽然我不知道如何正确地写还没有。对造成的误解表示歉意，但我会在这里保留这个，因为我实际上认为它比许多问题更能说明问题。*）

* * *

在调查[这个问题](https://stackoverflow.com/questions/11459270/boostoptional-not-letting-me-reassign-const-value-types)时，它似乎归结为与你不能这样做的想法平行：

```
const Foo defaultFoo (6502);
const Foo theFoo (getConstFoo()); // returns const Foo for privilege reasons
if (theFoo.getBar() < 2012) {
    theFoo = defaultFoo; // Error.
}
// ...you want to do const-safe methods with theFoo... 
```

就像引用一样，一个 const 值不能被重新定位。执行以下操作会编译，但不是我（在这种情况下）想要的：

```
Foo defaultFoo (6502);
Foo& theFooRef (getFooRef());
if (theFooRef.getBar() < 2000) {
    theFooRef = defaultFoo; // Not an error, but not a retarget.
}
// ...you want to do stuff with theFooRef... 
```

似乎（根据我的理解）[`reference_wrapper`](http://www.gototheboard.com/articles/Reference_Wrappers_Explained)可以在参考案例中解决这个问题，例如：

```
Foo defaultFoo (6502);
std::reference_wrapper<Foo> theFooRef (getFooRef());
if (theFooRef.get().getBar() < 2000) {
    theFooRef = std::ref(defaultFoo);
}
// ...do stuff with theFooRef.get() or employ implicit cast... 
```

我想知道是否有一个“ `value_wrapper`”在那里做类似的事情。出于 const 正确性的原因，想要一个按值保存项目的变量对我来说似乎是合理的……而不是因为您不打算更改它。 *（例如在前序树遍历中跟踪当前节点，尽管只有 const 访问该树中的节点，其中将前一个节点传递给函数是获取新节点的方式）*

如果你想变得笨重，你可以使用`std::pair<const Foo, bool>`并忽略`bool`：

```
const Foo defaultFoo (6502);
std::pair<const Foo, bool> theFooBool (getConstFoo(), false);
if (theFooBool.first.getBar() < 2012) {
    theFooBool = std::pair<const Foo, bool> (defaultFoo, false);
}
// ...do const-safe methods with theFooBool.first... 
```

但是，除了实现我自己的“”版本之外，还有更好的方法来解决这个问题`value_wrapper`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:42:32.343

如果我在这里忽略了一些东西，我深表歉意。但是由于您的问题没有提及，我想知道您是否知道并考虑过：

```
Foo defaultFoo (6502);
std::reference_wrapper<const Foo> theFooRef (getFooRef());
if (theFooRef.get().getBar() < 2000) {
    theFooRef = std::cref(defaultFoo);
}
// ...do stuff with theFooRef.get() or employ implicit cast... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T00:41:40.137

> 如果你想变得笨重，你可以使用 std::pair 并忽略布尔：

这清楚地解释了为什么你想要的不能完成，因为[这段代码不起作用。](http://ideone.com/a8pGz)我使用`const int`了而不是`const Foo`，但这是相同的想法。这条线是它中断的地方：

```
theFooBool = std::pair<const Foo, bool> (defaultFoo, false); 
```

未声明复制赋值运算符`const`，因为根据定义，复制赋值正在*更改*对象。`const`是当您希望对象不可更改时使用的。

当然，您可以只使用 a `std::reference_wrapper<const T>`，这将为您`const`提供访问权限，但允许重新绑定。当然，它不提供值语义，但这与您将获得的一样接近。一般来说，大多数人不需要甚至不想要这个，所以它还没有出现。

# jquery - 使覆盖在 Jquery 中可点击

> ID：11462306
> 
> 赞同：0
> 
> 时间：2012-07-12T23:45:31.753
> 
> 标签：jquery

我在下一页上使用了一个名为 capSlide 的 jquery 脚本

[http://sundial.whistlerwebhosting.com/meetings-events/whistler-weddings](http://sundial.whistlerwebhosting.com/meetings-events/whistler-weddings)

当用户将鼠标悬停在图像上时，顶部会出现一个透明的叠加层，并且标题会向上滑动，并带有标题和更多信息链接。

我想让整个 div 区域可点击。我在想，由于叠加层出现在它的这个 div 的顶部，我需要通过链接激活它。我正在尝试使用以下 jquery 脚本，但它不起作用。

```
jQuery('.overlay').click(function(){
     window.location=jQuery(this).parent().find('a').attr('href'); 
       return false;
}); 
```

HTML输出如下

```
<div class="ic_wrapper">
   <div id="capslide_img_cont11" class="ic_container"><img typeof="foaf:Image" src="/sites/all/themes/sundial/images/weddings/Wedding-Consulants.jpg" width="290" height="180" alt="Whistler Wedding Consulants" />
    <div class="overlay" style="display:none;"></div>
    <div class="ic_caption">
      <h3>Wedding Consulants</h3>
      <a href="/meetings-events/whistler-weddings/wedding-planners">
      <p class="ic_text">More Info</p>
       </a> </div>
   </div>
</div> 
```

任何见解将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:04:48.540

我将假设您的点击事件没有被注册，因为覆盖 div 是在您的脚本运行后添加的。尝试使用`on()`或`delegate()`jQuery 函数。一个例子：

```
 jQuery(".ic_container").on("click", ".overlay", function(){
        window.location = jQuery(this).parent().find('a').attr('href'); 
        return false;
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:58:24.560

在您的脚本文件 (functions.js) 中，您在文档就绪函数之外设置了单击处理程序。相反，把它**放在**你的 ready 函数中：

```
jQuery(document).ready(function() {
    jQuery('div#block-menu-menu-meeting-events-right.block div.content ul.menu li.last a').addClass('fancybox.iframe');

    // Your code has been moved to here...
    jQuery('.overlay').click(function(){
        window.location=jQuery(this).parent().children().find('a').attr('href'); 
        return false;
    });    
}); 
```

这使它等到页面准备好后再应用您的点击处理程序。

# c# - 从属性指定的 XML 中读取

> ID：11462307
> 
> 赞同：0
> 
> 时间：2012-07-12T23:45:44.453
> 
> 标签：c#, xml

我有以下 XML 文件：

```
<Categories>
<Category name="TopDown">
    <Path>http://localhost:8080/images/TopDown/Divx.png</Path>
    <Path>http://localhost:8080/images/TopDown/Blu-Ray.png</Path>
    <Path>http://localhost:8080/images/TopDown/Divx.png</Path>
    <Path>http://localhost:8080/images/TopDown/Divx.png</Path>
    <Path>http://localhost:8080/images/TopDown/Divx.png</Path>
    <Path>http://localhost:8080/images/TopDown/Divx.png</Path>  
</Category>
<Category name="SideScroll">
    <Path>http://localhost:8080/images/SideScroll/MediaMonkey.png</Path>
    <Path>http://localhost:8080/images/SideScroll/Miro.png</Path>
    <Path>http://localhost:8080/images/SideScroll/QuickTime.png</Path>
    <Path>http://localhost:8080/images/SideScroll/VLC.png</Path>
    <Path>http://localhost:8080/images/SideScroll/WinAmp.png</Path>
</Category> 
```

在我的 c# 代码中，我有一个函数，它获取一个表示类别“名称”属性的字符串，如果该字符串等于该属性，我想获取“路径”标签之间的所有文本。例如，如果函数获得一个等于“TopDown”的字符串参数，则输出将是：

```
http://localhost:8080/images/TopDown/Divx.png
    http://localhost:8080/images/TopDown/Blu-Ray.png
    http://localhost:8080/images/TopDown/Divx.png
    http://localhost:8080/images/TopDown/Divx.png
    http://localhost:8080/images/TopDown/Divx.png
    http://localhost:8080/images/TopDown/Divx.png 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:04:08.633

您可以使用 LINQ To XML 执行此操作：

```
var xdoc = @"<Categories>
    <Category name='TopDown'>
        <Path>http://localhost:8080/images/TopDown/Divx.png</Path>
        <Path>http://localhost:8080/images/TopDown/Blu-Ray.png</Path>
        <Path>http://localhost:8080/images/TopDown/Divx.png</Path>
        <Path>http://localhost:8080/images/TopDown/Divx.png</Path>
        <Path>http://localhost:8080/images/TopDown/Divx.png</Path>
        <Path>http://localhost:8080/images/TopDown/Divx.png</Path>
    </Category>
    <Category name='SideScroll'>
        <Path>http://localhost:8080/images/SideScroll/MediaMonkey.png</Path>
        <Path>http://localhost:8080/images/SideScroll/Miro.png</Path>
        <Path>http://localhost:8080/images/SideScroll/QuickTime.png</Path>
        <Path>http://localhost:8080/images/SideScroll/VLC.png</Path>
        <Path>http://localhost:8080/images/SideScroll/WinAmp.png</Path>
    </Category>
</Categories>";

var paths = XDocument.Parse(xdoc).Descendants("Category")
        .Where(w => (string)w.Attribute("name") == "TopDown")
        .Select(s => s.Elements("Path").Select (x => (string)x)).ToList();

foreach (var x in paths)
    Console.WriteLine(x); 
```

您可以将其复制粘贴到 linqpad 或 Visual Studio 中，它会运行。

# list - JasperReports：将列表列表作为数据源传递

> ID：11462311
> 
> 赞同：3
> 
> 时间：2012-07-12T23:45:57.900
> 
> 标签：list, jasper-reports

我需要用不同对象的列表填充一些子报表。基本上可以说我有以下内容：
二手
车子报告 新车子报告

我创建了一个带有变量作为字符串的车辆 bean 类，并为其创建了 getter 和 setter 方法。然后在我的数据源中，我传入一个`List<List<String>>`作为 detailRows。detailRows 包含一个新车列表和一个二手车列表。所以可以说，我在数据源中传递了 detailRows。
问题是我如何将这两个列表传递给两个子报告？我可以 `new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{newVehiclesList})`用作子报表 1 `new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{usedVehiclesList})`的数据源和子报表 2 的数据源吗？
除了我提到的，还有什么需要做的吗？我需要创建和传递任何变量吗？是我上面列出的列表列表的适当使用还是它`$F{detailRows}.get(0)`？

我在主报告中创建了一个字段 detailRows 作为类型列表。然后我将以下内容传递给子报表数据源表达式，`new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{detailRows}` 有什么方法可以将`newVehiclesList`from detailRows 传递给子报表？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T11:23:54.830

选择您的子报表，您可以将属性“连接类型”设置为“使用数据源表达式”，并在“数据源表达式”属性中设置：

```
new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{yourFieldHere}) 
```

您的“yourFieldHere”是一个列表（不要忘记将字段属性中的“字段类”也设置为 java.util.List）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:12:05.870

好的，那么您需要创建两个字段类为 java.util.List 的字段，每个列表一个（newVehiclesList 和 usedVehiclesList）。

将您的两个子报表放在您想要的任何位置，然后单击每个子报表，执行以下步骤：

将“连接类型”更改为“使用数据源表达式”，然后将“数据源表达式”更改为 new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{yourField})

完毕。

ps：为了使用 newVehiclesList 和 usedVehiclesList 中的字段，您必须在它们自己的 subReports 中创建它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-05T13:57:37.490

我和你有同样的问题，我使用 jasper 的标签列表解决了它，我在我的类 java 中使用了数据源，例如：parameter.put("MyList", new JRBeanCollectionDataSource(ListObjects)); 在 JRXML 中

在 Jasper 的面板中，选择标签 LIST 并在选择后拖放到您的关系中

*   创建新数据集
*   从连接创建新数据集... ...
*   在数据适配器中选择新的数据适配器 - javabeans 的集合
*   使用 JRDatasource 表达式
*   进入参数列表并选择列出操作对象（MyList）

现在转到 jasper 的大纲和 - 数据集属性 - 编辑和查询过滤器 ... ... - javabean - 搜索你的类（我使用 eclipse，所以很容易搜索我的类） - 添加要使用的字段

# redirect - 仅将单个非 www 主页重定向到 www 版本，而不重定向任何其他页面

> ID：11462313
> 
> 赞同：0
> 
> 时间：2012-07-12T23:46:22.487
> 
> 标签：redirect

我需要将仅一个页面的非 www 版本（即主页）重定向到 www。

我想独自离开网站的其余部分。由于需要保留非 www 的特定页面。

所以如果我尝试重写规则

/index.html [http://www.example.com/](http://www.example.com/)

我收到一个无限重定向类型错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:51:00.767

可能有一种方法可以实现您想要的，尽管我必须说这有点“味道”。听起来您正在尝试治疗单一症状而不是解决问题（诚然，这可能超出您的控制范围）。您的组织是否可能需要设置域指针，以便 www.example.com 和 examples.com 完全相同？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:05:19.290

所以你要

*   `http://example.com/`去`http://www.example.com/`，

但你想要

*   `http://example.com/index.html`,
*   `http://example.com/otherstuff`， 和
*   `http://example.com/subdir/path/file.php`

保持不变？

对于阿帕奇：

```
 RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
    RewriteRule ^/$ http://www.example.com/ [R=301,L] 
```

如果您希望站点上的任何非 www 子域被重定向到 www 版本：

```
 RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
    RewriteRule ^/$ http://www.%{HTTP_HOST}/ [R=301,L] 
```

如果您想重定向除特定页面之外的所有内容：

```
 RewriteCond %{REQUEST_URI} !^/subdir/path/file.php$ 
    RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
    RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

# python - 全局变量的 Python 替代方案

> ID：11462314
> 
> 赞同：9
> 
> 时间：2012-07-12T23:46:28.887
> 
> 标签：python, function, global-variables

```
import random  

#----------------------------------------------#
def main():  
    create_list_and_find_max_and_min(10)  
    the_smart_way()
#----------------------------------------------#
def create_list_and_find_max_and_min(n):
    global my_array
    my_array = []
    n = input("How many numbers do you want in your array?:")
    for i in range(n):
        my_array.append(random.randint(1,n))
    print "My array is:", my_array
    #----------------------------------------------#
    min = my_array[0]
    for number in my_array:
    if min > number:
        min = number
    print "The minimum value in the array is:", min
    #----------------------------------------------#
    max = my_array[0]
    for number in my_array:
        if max < number:
        max = number
    print "The maximum value in the array is:", max
#----------------------------------------------#
def the_smart_way():
    # "This one uses the built-in Python functions for min/max..."
    min_my_array = min(my_array)
    max_my_array = max(my_array)
    return min_my_array, max_my_array
#----------------------------------------------#
if __name__ == '__main__':
    main() 
```

我对使用 Python 还是很陌生。我通常听说在编程时使用全局变量是一种不好的做法。那么我在这里尝试做的事情还有其他选择吗？哪个是在另一个函数中使用变量“my_array”？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T23:49:27.143

是的，有两种选择。

首先，您可以传递值而不是使用全局变量。比如create_list_and_find_max_and_min可以在本地创建数组并返回，然后可以传入the_smart_way：

```
import random  

#----------------------------------------------#
def main():  
    my_array = create_list_and_find_max_and_min(10)  
    print the_smart_way(my_array)
#----------------------------------------------#
def create_list_and_find_max_and_min(n):
    my_array = []
    n = input("How many numbers do you want in your array?:")
    for i in range(n):
        my_array.append(random.randint(1,n))
    print "My array is:", my_array
    #----------------------------------------------#
    min = my_array[0]
    for number in my_array:
        if min > number:
            min = number
    print "The minimum value in the array is:", min
    #----------------------------------------------#
    max = my_array[0]
    for number in my_array:
        if max < number:
            max = number
    print "The maximum value in the array is:", max
    return my_array
#----------------------------------------------#
def the_smart_way(my_array):
    # "This one uses the built-in Python functions for min/max..."
    min_my_array = min(my_array)
    max_my_array = max(my_array)
    return min_my_array, max_my_array
#----------------------------------------------#
if __name__ == '__main__':
    main() 
```

其次，您可以创建一个封装数据的类以及对该数据进行操作的函数：

```
import random  

#----------------------------------------------#
class MyArrayClass(object):
    def create_list_and_find_max_and_min(self, n):
        self.my_array = []
        n = input("How many numbers do you want in your array?:")
        for i in range(n):
            self.my_array.append(random.randint(1,n))
        print "My array is:", self.my_array
        #----------------------------------------------#
        min = self.my_array[0]
        for number in self.my_array:
            if min > number:
                min = number
        print "The minimum value in the array is:", min
        #----------------------------------------------#
        max = self.my_array[0]
        for number in self.my_array:
            if max < number:
                max = number
        print "The maximum value in the array is:", max
    #----------------------------------------------#
    def the_smart_way(self):
        # "This one uses the built-in Python functions for min/max..."
        min_my_array = min(self.my_array)
        max_my_array = max(self.my_array)
        return min_my_array, max_my_array
#----------------------------------------------#
def main():
    my_array = MyArrayClass()
    my_array.create_list_and_find_max_and_min(10)  
    print my_array.the_smart_way()
#----------------------------------------------#
if __name__ == '__main__':
    main() 
```

您可能应该了解全局变量是不好的做法的*原因。*

假设您要创建两个数组。使用全局变量，第二个将替换第一个，这将永远消失。

```
create_list_and_fix_max_and_min(10)
create_list_and_fix_max_and_min(20)
# No way to operate on the original array! 
```

使用局部变量，您可以存储它们：

```
my_array_1 = create_list_and_fix_max_and_min(10)
my_array_2 = create_list_and_fix_max_and_min(20)
the_smart_way(my_array_1) 
```

使用对象提供了同样的好处；两者的区别最终归结为操作是否是数据含义的一部分，或者数据是否独立，操作是否通用。（或者，有时，无论你是功能性势利小人还是 OO 势利小人……）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T00:05:05.310

函数对对象做事，然后返回结果。您希望使函数保持简单，并在函数之外执行所有逻辑和处理。这将消除对全局变量的需求，并使您的代码更容易阅读。

话虽如此，这就是我将如何解决您的问题：

```
import random  

def random_list(n=None):
  n = n or int(raw_input('How many numbers do you want in your list? '))    

  return [random.randint(1, n) for i in range(n)]

if __name__ == '__main__':
  my_list = random_list(10)
  minimum, maximum = min(my_list), max(my_list)

  print 'My list is ', my_list
  print 'The minimum value in the list is ', minimum
  print 'The maximum value in the list is ', maximum 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T23:57:24.143

这是我将如何做到这一点：

```
import random  

#----------------------------------------------#
def main():
    # note that input can be dangerous since it evaluates arbitrary code
    n = int(raw_input("How many numbers do you want in your array?: "))
    my_list = [random.randint(1, n) for _ in range(n)]
    find_max_and_min(my_list)  
    the_smart_way(my_list)
#----------------------------------------------#
def find_max_and_min(seq):
    print "My array is:", seq
    #----------------------------------------------#
    min_num = seq[0] # Don't want to use same names as bultins here
    for number in seq:
        if number < min_num:
            min_num = number
    print "The minimum value in the array is:", min_num
    #----------------------------------------------#
    max_num = seq[0]
    for number in seq:
        if number > max_num:
            max_num = number
    print "The maximum value in the array is:", max_num
#----------------------------------------------#
def the_smart_way(seq):
    # "This one uses the built-in Python functions for min/max..."
    # No need for temp variables here
    print min(seq), max(seq)
#----------------------------------------------#
if __name__ == '__main__':
    main() 
```

# javascript - 本地页面可以接受文本值并以值作为参数在 Internet URL 处打开新选项卡吗？

> ID：11462318
> 
> 赞同：0
> 
> 时间：2012-07-12T23:46:59.520
> 
> 标签：javascript, jquery, dynamic-url

一个 Internet 站点的 URL 类似于`www.manyresultpages.net/cgi-bin/search.cgi?recnum=7777&`

我可以用一个输入字段和一个提交按钮为我爸爸制作一个本地静态 html 页面（用于他的 PC），这将修改上述 URL，用输入文本替换“7777”并在按钮上的新选项卡中打开新 URL点击？

我受到 HTML 挑战，用谷歌搜索了 45 分钟而没有走远。确实学习了 jsfiddle.net 已关闭。如果有帮助，可以加载 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:54:15.790

是的。在表单中使用`method="get"`以将表单数据放置在 URL 中，使用输入字段`name="recnum"`来获取表单数据的正确名称，并`target="_blank"`在表单中使用以在新窗口/选项卡中打开页面：

```
<form method="get" target="_blank">
  <input type="text" name="recnum"/>
  <input type="submit"/>
</form> 
```

请注意，您无法控制页面是在新窗口还是新选项卡中打开，因为这是浏览器中的用户首选项。

# java - 提前更新场景，同时仍渲染前一帧

> ID：11462321
> 
> 赞同：0
> 
> 时间：2012-07-12T23:47:02.593
> 
> 标签：java, multithreading, opengl, lwjgl

我目前正在开发一个多线程安全渲染系统，我想知道您对如何在当前渲染前一个场景时正确更新游戏世界的下一步的想法。目前我正在使用带有 Java 的 LWJGL Opengl 绑定。这是我当前设置的游戏循环的伪代码（这可能只是大多数人熟悉的基本循环）：

```
//DrawingLayers are wrappers for in game entities and has an update 
//and render method

game-loop:
    addInputEventsToInputStack()

    removeCompletedDrawingLayers()

    foreach layer in DrawingLayerQueue :
        layer.update(deltaTime) //update position/color/size for entity
        layer.render() //performs OpenGL calls
        if(layer.isCompleted):
            addToCompletedDrawingLayersList()

    swapBuffers() //blocks until scene is fully rendered
goto game-loop 
```

我的问题在于该`swapBuffers()`方法，因为它在渲染场景之前一直阻塞，这意味着在此过程中我无法执行任何更新。我对如何解决这个问题的想法是：

拥有我用于更新实体状态的所有 DrawingLayers 的副本，并将另一个副本作为渲染线程的参考。并且在渲染帧时，在之前启动一个线程`swapBuffers()`以更新未使用的副本。

我对这种方法持谨慎态度，因为我相信在每一帧之前创建副本会比我想要的更慢系统。

我的方法有意义吗？如果没有，你们对如何做到这一点有什么建议吗？我对彻底重组持开放态度。

**更新：**根据 datenwolf 的建议，我将游戏循环更改为以下内容：

```
//DrawingLayers are wrappers for in game entities and has an update 
//and render method

//A future for the pre-processing task
Future preProcess = null

game-loop:

    //Update: checks if we have a preprocessed update to wait for
    //and waits for it to complete
    if(preProcess != null):
        preProcess.get()
        preProcess = null

    addInputEventsToInputStack()

    removeCompletedDrawingLayers()

    foreach layer in DrawingLayerQueue :
        layer.render() //performs OpenGL calls
        if(layer.isCompleted):
            addToCompletedDrawingLayersList()

    //UPDATE: the following just calls all the update methods for the layers
    // in a new thread
    preProcess = executorService.submit(new UpdateRunnable())

    swapBuffers() //blocks until scene is fully rendered
goto game-loop 
```

到目前为止，我的性能有了显着提高。可能有一些我看不到的比赛条件问题，但总的来说我对这种改进感到满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:10:02.300

> 在 swapBuffers() 方法中，因为它阻塞直到场景被渲染

通过完成渲染，缓冲区交换的阻塞只是部分的。由于等待回溯，它通常也会阻塞。但是 OpenGL 向您保证，在任何绘图命令返回后，可以安全地修改它访问的缓冲区，而不会损害任何未决的渲染操作。该实现需要对所有数据进行复制或写时复制映射。

或者简而言之：只需修改缓冲区中的数据。一旦绘图调用（glDrawArrays、glDrawElements）返回，这样做是安全的。

# php - 友好的 URL 添加到导航栏菜单上的我的链接...创建问题

> ID：11462323
> 
> 赞同：0
> 
> 时间：2012-07-12T23:47:10.483
> 
> 标签：php

网站是 PHP/mySQL。一些页面（库存）具有友好的 URL。伟大的。

问题在于，在这些个人资料页面（具有友好 URL 的页面）上，它还会在顶部导航栏（也称为菜单下拉菜单）的链接前添加该友好 URL。

因此，而不是 faq.php ...现在链接是 productA/faq.php，这当然会破坏链接。

它不是在页脚中执行，只是在页眉链接中执行。

我们四处张望，认输！

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:51:21.000

看到我们没有要查看的代码，我只需要抛出一个疯狂的（但相关的）猜测 - 你在标题中使用相对链接。

例如，而不是`<a hreF="/faq.php">FAQ</a>`在菜单中，您有`<a href="faq.php">FAQ</a>`or `<a href="./faq.php">FAQ</a>`，使其将当前目录结构放在文件之前。

# c - 从 MongoDB _id 转换为 C 中的字符串

> ID：11462326
> 
> 赞同：1
> 
> 时间：2012-07-12T23:47:21.587
> 
> 标签：c, mongodb

我想使用 mongodb _id 属性来保证名称的唯一性。

```
mongo_cursor_init( cursor, &conn, &database );
bson_iterator iterator[1];

bson_find( iterator, mongo_cursor_bson( cursor ), "name" );
const char *filename = bson_iterator_string( iterator );

bson_find( iterator, mongo_cursor_bson( cursor ), "_id" );
const char *mongoid = bson_iterator_string(iterator);

char name[255];
strcpy(name,filename);
strcat(name,".");
strcat(name,mongoid); 
```

但是，变量 mongoid 没有正确填充（根本......）。我不确定如何找到_id 的数据类型。有没有人这样做过？谢谢！

编辑：我认为答案在[这里](http://api.mongodb.org/c/0.4/api/bson_8h.html)，但不确定......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T21:56:51.580

希望这可以帮助某人...

**Mongo _id 到字符串：**

```
char mongoid[25];
bson_find( iterator, mongo_cursor_bson( cursor ), "_id" );
bson_oid_t *oid = bson_iterator_oid( iterator );
bson_oid_to_string(oid,mongoid); 
```

**字符串到 Mongo _id：**

```
bson_oid_t new_oid;
bson_oid_from_string(&new_oid,mongoid); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T06:51:54.500

您想要`bson_iterator_oid()`--oid 用于 ObjectId。

您可以从中获取字节，并使用类似（未经测试）的循环将它们转换为十六进制：

```
bson_find( iterator, mongo_cursor_bson( cursor ), "_id" );
bson_oid_t *oid = bson_iterator_oid( iterator );

char mongoid[25];
for(int i = 0; i < 12; i++)
{
  snprintf( mongoid, 2, "%02X", oid->bytes[i] );
} 
```

此外，请考虑使用`strncpy`and`strncat`具有合理的最大值——如果名称字段的长度为 300 个字符，那么您将在此处遇到一些意外行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-03T13:59:32.260

如果我有足够的声誉点，我会在[@jacobra](https://stackoverflow.com/users/812335/jacobra)的[答案](https://stackoverflow.com/a/11513168/13901111)中添加此评论以使代码正常工作：

```
char mongoid[25];
bson_find( iterator, mongo_cursor_bson( cursor ), "_id" ); // not sure if this function actually exists or the user referred to bson_iter_find
const bson_oid_t *oid = bson_iterator_oid( iterator );
bson_oid_to_string(oid,mongoid); 
```

之前刚加了 const 关键字 `bson_oid_t *oid = bson_iterator_oid( iterator );`

还值得一提的是，我还没有找到函数“bson_find”，可以使用这样的东西：

```
bson_iter_t         Iterator; // to loop over the bson document 
if (!bson_iter_init(&Iterator, Document.GetDocumentStr())) // your document
        return;
while (bson_iter_next(&Iterator)) {
if (BSON_ITER_HOLDS_OID(&Iterator) && strcmp(Key, "_id") == 0)
// our key is the _id
        {       
            const bson_oid_t *oid = bson_iter_oid(&Iterator);
            bson_oid_to_string(oid, Data.Id);
        }
} 
```

有用的链接：

*   [bson_iter_find](http://mongoc.org/libbson/current/bson_oid_t.html)
*   [bson_oid_t 示例](http://mongoc.org/libbson/current/bson_oid_t.html)

# jquery - 如何使用 JSONP 将复杂数组发送到 asp.net mvc 控制器

> ID：11462328
> 
> 赞同：0
> 
> 时间：2012-07-12T23:47:37.367
> 
> 标签：jquery, asp.net-mvc, jsonp, getjson

如何使用 JSONP**发送包含数组的复杂类型对象**

```
 var product= {categories:[ {id:1,text:"cat 1"},{id:2,text:"cat 2"}],id:43,price:3535};
 $.getJSON(url ,product, function (data) {

 //i can get the data from the server but i cant pass the complex array to the server
 }); 
```

在 asp.net mvc 服务器上：

```
 public JsonpResult Create(Product product)
    {
        string thisisok = product.id;
        string needthis = product.categories[0].text;           
        return new JsonpResult { Data = true };
    } 
```

我应该如何使用“getjson”方法传递复杂的 json，我不能使用 ajax 请求，因为它需要跨域

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:59:02.760

好吧，我有一个类似的问题；我想使用 jsonp 将一组对象传递给控制器​​，但我总是将它作为空值接收！（我的意思是，通过 GET 方法并具有跨域的回调功能）

假设我有一个复杂的类：SearchCriteria

```
public class SearchCriteria
{
    public string destination {get; set;}
    public string destinationTitle { get; set; }        
    public string departure { get; set; }
    public string month { get; set; }
    public string nights { get; set; }
    public string cruiseline { get; set; }
} 
```

我想将一组 SearchCriteria 传递给我的控制器。

我找到了创建属性的解决方案：

```
public class JsonpFilter : ActionFilterAttribute
{
    public string Param { get; set; }
    public Type JsonDataType { get; set; }
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.HttpContext.Request.ContentType.Contains("application/json"))
        {
            string inputContent = filterContext.HttpContext.Request.Params[Param];                
            JavaScriptSerializer serializer = new JavaScriptSerializer();
            var result = serializer.Deserialize(inputContent, JsonDataType);
            filterContext.ActionParameters[Param] = result;
        }
    }
} 
```

在控制器中：

```
 [JsonpFilter(Param = "criterias", JsonDataType = typeof(SearchCriteria[]))]
 public JsonpResult getResultSet(SearchCriteria[] criterias)
 {            
     foreach (SearchCriteria sc in criterias)
     {
         // TODO (normalize criteria, etc..)
     }
     return Jsonp(new { content = RenderPartialViewToString("getResults", criterias)});
 } 
```

在我调用该方法时的客户端脚本中：

```
// Populate the Array of objects

var criteria = new Array();
for (var i = 0; i < 4; i++) {
    criteria.push({ "destination": $("#DestinationValue" + i).val(),
                    "departure": $("#PortValue" + i).val(),
                    "month": $("#Month" + i).val(),
                    "nights": $("#Nights" + i).val(),
                    "cruiseline": $("#CruiselineValue" + i).val()});                
}

// Call the controller; note i do not specify POST method and I specify "callback" in order to enable jsonp that cross the domain.

$.ajax({ 
  url: "getResultSet?callback=?", 
  dataType: 'json', 
  data: {"criterias" : JSON.stringify(criteria)}, 
  contentType: 'application/json; charset=utf-8',
  success: function (data) {
              // call return from the controller
           }
}); 
```

我希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T06:04:00.877

如果您需要从服务器返回 JSONP，为什么要从控制器操作返回 JSON？据说 jQuery 的 JSONP 实现依赖于向`<script>`DOM 添加标签，并且您知道`<script>`标签发送 GET 请求来获取资源。这是 jQuery 的 JSONP 实现的限制。

但首先你需要让你的服务器返回 JSONP。您可以编写一个返回 JSONP 的自定义 ActionResult：

```
public class JsonpResult : ActionResult
{
    private readonly object _obj;

    public JsonpResult(object obj)
    {
        _obj = obj;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        var serializer = new JavaScriptSerializer();
        var callbackname = context.HttpContext.Request["callback"];
        var jsonp = string.Format("{0}({1})", callbackname, serializer.Serialize(_obj));
        var response = context.HttpContext.Response;
        response.ContentType = "application/json";
        response.Write(jsonp);
    }
} 
```

然后在您的控制器操作中返回此结果：

```
public ActionResult Create(Product product)
{
    ...
    return new JsonpResult(new { success = true });
} 
```

然后客户端可以使用此操作，但使用 GET 请求（以及所有限制，例如发送您所显示的复杂对象）：

```
$.getJSON('http://example.com/products/create', product, function(result) {
    alert(result.success);
}); 
```

如果您需要发送复杂的对象，我认为最好的办法是在您的域上设置一个服务器端脚本，该脚本将充当您的域和远程域之间的桥梁，然后向`$.ajax`您的脚本发送请求。

# c++ - 如何在 ROOT (CERN) 中禁用屏幕输出

> ID：11462329
> 
> 赞同：2
> 
> 时间：2012-07-12T23:47:42.377
> 
> 标签：c++, performance, screen, root-framework

我正在将曲线拟合到大约 25000 个检测器事件中的峰值。我的代码只是循环遍历所有事件，适合它找到的所有峰值并获取参数信息。它需要永远！

我停止了我的代码实际绘制曲线，但我想知道我是否可以做任何其他事情来加速这个处理。我想如果我阻止 ROOT 将每个适合的参数打印到屏幕上，它可能会运行得更快。

这是真的？如果是这样，我该怎么做？还有其他想法吗？

```
 TGraphErrors * gr1 = view_waveform_ebars(run,evtNum,21);    
  mygaus -> SetParameters(671.55e3,-1000,S2loc,500);
  gr1 -> Fit(mygaus,"","",tspulse_sum[j],tepulse_sum[j]);
  fitResult = gr1 -> GetFunction("mygaus");

  pchi2[j] =  fitResult -> GetChisquare(); 
```

我希望不需要将我正在使用的功能复制到我的帖子中。但是`mygaus`有 4 个参数，每次我使用它调用它时，我都会`gr1-> Fit(mygaus,...)`在屏幕上看到参数。所以问题是屏幕输出是否会减慢我的速度，如果是，我该如何关闭它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-05T10:07:21.083

您也可以使用选项 -b 启动 root

```
root -b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-21T17:10:14.817

您是否尝试使用限制一般 ROOT 输出

```
gROOT->ProcessLine( "gErrorIgnoreLevel = 1001;") 
```

?

忽略级别越高，您获得的打印输出就越少。要忽略 INFO 消息，1001 就足够了。要忽略 WARNING，它必须高于 2001。要忽略 ERROR，它必须高于 3001。检查打印输出的级别并根据需要进行设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-22T18:09:21.647

也许，只是也许，您想以批处理模式运行 ROOT，如下所示：

```
{
  gROOT->SetBatch(1);
  ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-16T08:13:53.497

这更像是一条评论：

还有一个“N”选项，它强制 ROOT 不存储图形功能并且不绘制任何东西。

所以我会同时使用两者，即：

```
gr1 -> Fit(mygaus,"QN","",tspulse_sum[j],tepulse_sum[j]); 
```

# criteria-api - CriteriaBuilder - 使用 SelectCase 求和

> ID：11462330
> 
> 赞同：7
> 
> 时间：2012-07-12T23:48:10.393
> 
> 标签：criteria-api

我正在尝试执行汇总 SQL 查询，如下所示：

```
select group_ID, sum(case when user_type = 'Exec' then 1000  
                          when user_type = 'Office' then 10 else 0 end)  
from subscription  
group by group_ID; 
```

使用来自休眠 CriteriaBuilder 查询的以下片段：

```
criteriaBuilder.sum(
  criteriaBuilder.selectCase()  
     .when(criteriaBuilder.equal(subscriptionJoin.get(Subscription_.userType), "Exec"),1000)  
     .when(criteriaBuilder.equal(subscriptionJoin.get(Subscription_.userType), "Office"),1)  
     .otherwise(101)) 
```

但是会出现以下编译错误：

类型参数“N”的推断类型“java.lang.object”不在其范围内；应该扩展'java.lang.number'

知道如何支持使用 selectCase 执行求和吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-17T19:35:49.637

Sum 定义如下：

```
<N extends Number> Expression<N> sum(Expression<N> x); 
```

所以编译错误的原因是 sum 方法期望这样的参数是表达式，其类型扩展了 Number。它从 selectCase 中确定类型并以 java.lang.Object 结束，这是不可接受的。

问题可以通过给出类型参数 ( `<Number>`) 来解决：

```
criteriaBuilder.sum(
  criteriaBuilder.<Number>selectCase() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-22T20:56:36.977

我们在我们的项目中使用 Spring Data JPA，我有同样的情况需要求和。而不是标准查询，我只是遵循“命名参数”方法，因为这种方法看起来很容易。

我给我总和的方法如下。

```
 public interface ITransactionEntryRepo extends PagingAndSortingRepository<TransactionEntryEntity, String> {

        @Query("select SUM(CASE WHEN te.debit = 'Y' THEN (te.amount * - 1) WHEN te.debit = 'N' THEN te.amount ELSE 0 END) AS availablebalance FROM TransactionEntity t, TransactionEntryEntity te WHERE t.id = te.transactionEntity.id and te.accountEntity.id = :id and te.valid = 'T' and t.retcode = 'XX' GROUP BY te.accountEntity.id")
            public double findAvailableBalance(@Param("id") String id);
} 
```

我在需要的类中调用此方法

```
double balance = iTransactionEntryRepo.findAvailableBalance(accountEntity.getId()); 
```

并将它（平衡）传递到我需要的任何地方。希望这可以帮助某人。

# php - 使用 Join、SQL、Order Categories by Products' expiry、Opencart 的复杂排序函数

> ID：11462338
> 
> 赞同：1
> 
> 时间：2012-07-12T23:49:43.020
> 
> 标签：php, sql, sorting, opencart

**更新**

我的最终目标是按产品的有效期对类别进行分类。因此，最接近过期的产品类别排在最前面，所有产品都已过期的类别排在最后。感谢 Greg，请参阅问题底部的完整答案。

**/更新**

除了第二行（SELECT MIN(date_expires... 关于如何重写这一行有什么想法吗？

```
 SELECT   c.category_id, 
          name, 
          c.image, 
          description,
          (SELECT MIN(date_expires) 
           FROM     product 
           WHERE date_expires >= NOW() AND 
                 p.product_id = p2c.product_id) AS expiring
FROM category c 
        LEFT JOIN category_description cd 
            ON (c.category_id = cd.category_id) 
        LEFT JOIN product_to_category p2c 
            ON (c.category_id = p2c.category_id) 
        LEFT JOIN product p 
            ON (p2c.product_id = p.product_id) 
WHERE c.parent_id = 0 AND c.status = '1'
GROUP BY c.category_id
ORDER BY expiring 
```

一些样本数据：

```
category:
category_id = 62
category_id = 64
category_id = 63

product_to_category:
product_id = 43 category_id = 62
product_id = 50 category_id = 63
product_id = 56 category_id = 63
product_id = 58 category_id = 62
product_id = 59 category_id = 63
product_id = 60 category_id = 63
product_id = 61 category_id = 63
product_id = 62 category_id = 63
product_id = 63 category_id = 64

product:
product_id = 43 date_expires = 2012-07-11 20:35:00
product_id = 50 date_expires = 2012-06-29 00:00:00
product_id = 56 date_expires = 2012-07-13 00:00:00
product_id = 58 date_expires = 2012-07-26 15:01:00
product_id = 59 date_expires = 2012-07-16 14:12:00
product_id = 60 date_expires = 2012-07-18 08:15:00
product_id = 61 date_expires = 2012-08-02 13:04:00
product_id = 62 date_expires = 2012-08-24 00:00:00
product_id = 63 date_expires = 2012-07-12 19:16:00 
```

**回答** 我的最终目标是得到

```
SELECT c.category_id, minDateExpires.Expiring, 
CASE WHEN Expiring > 1 THEN 1 ELSE 2 END as available 
FROM category c
LEFT JOIN product_to_category p2c ON (c.category_id = p2c.category_id)   
LEFT JOIN product p ON (p2c.product_id = p.product_id)   
LEFT JOIN ( 
    SELECT MIN(date_expires) AS expiring, category_id FROM product p join product_to_category p2c on p2c.product_id = p.product_id WHERE date_expires >= GETDATE() GROUP BY category_id
) minDateExpires on p2c.category_id = minDateExpires.category_id
ORDER BY available, expiring 
```

**如果您正在为OpenCart**寻找这个并且您正在使用 Categories 模块，然后转到 catalog/model/catalog/category.php 并编辑函数 getCategoriesPag() 到：

```
 public function getCategoriesPag($data) {
        $query = $this->db->query("SELECT c.category_id, name, c.image, description, minDateExpires.Expiring, CASE WHEN Expiring > 1 THEN 1 ELSE 2 END as available FROM " . DB_PREFIX . "category c LEFT JOIN " . DB_PREFIX . "category_description cd ON (c.category_id = cd.category_id) LEFT JOIN " . DB_PREFIX . "category_to_store c2s ON (c.category_id = c2s.category_id) LEFT JOIN " . DB_PREFIX . "product_to_category p2c ON (c.category_id = p2c.category_id) LEFT JOIN " . DB_PREFIX . "product p ON (p2c.product_id = p.product_id) LEFT JOIN (SELECT MIN(date_expires) AS expiring, category_id FROM product p JOIN product_to_category p2c on p2c.product_id = p.product_id WHERE date_expires >= NOW() GROUP BY category_id) minDateExpires on p2c.category_id = minDateExpires.category_id WHERE c.parent_id = 0 AND cd.language_id = '" . (int)$this->config->get('config_language_id') . "' AND c2s.store_id = '" . (int)$this->config->get('config_store_id') . "'  AND c.status = '1' GROUP BY c.category_id ORDER BY available, Expiring, c.sort_order");

        return $query->rows;
    } 
```

您需要将自己的 date_expires 字段添加到数据库和后端管理面板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T01:02:00.267

我不相信这个说法是真的：

> 最初的问题在于子查询看不到您在主查询中加入的表。所以 p.product_id 和 p2c.product_id 在子查询中不存在。

由于该条件是主查询中外部联接的一部分，因此该条件已知为真或将评估为空，从而导致空结果。现在您的示例数据表明您无论如何都不需要外连接，我可以看到许多行的未来都有到期日期。

我相信你打算把它写成你的子查询。尽管我们获得的其他一些信息表明它仍然不是最终的解决方案，但它可能值得一试。

```
(
SELECT MIN(date_expires) 
FROM product as p2
WHERE date_expires >= NOW() AND 
      p2.product_id = p.product_id
) AS expiring 
```

**编辑** 进行我刚才建议的更改，但也要摆脱 GROUP BY 子句。

**编辑 2**

**1）**您似乎在可能属于单个产品表的多个表中具有属性。我会假设你有充分的理由这样做。

**2)** Mysql 允许您混合聚合列和非聚合列，但这是一种不好的做法，如果我的理论被证明是正确的，那是我们都被难住了一会儿的很大一部分原因。

**3）**所有左外连接似乎都在做你通常使用内连接的事情。你不会后悔第一次就做对了。

**4）**到期日期可以通过子查询来查找，就像您第一次编写它的方式一样，也可以作为另一个连接来查找，就像另一个答案所做的那样。如果那里确实存在一对一的关系，那么 MIN() 和 GROUP BY 就不是必需的，并且可能会使某些人感到困惑。（事实上​​，参见编辑#3。）

**5)**由于您的子查询对于任何过期时间为过去的产品评估为 null，因此您可能需要 ORDER BY 第二列或只使用过期日期，无论它是过去还是将来。

**编辑 3**

```
SELECT
    c.category_id,
    MIN(name) as name,
    c.image /* better as a subquery if you can't do an aggregate on a LOB */
    MIN(c.description) as description,

    /* don't even need the subquery because you've already joined the product table */
    CASE
        WHEN MIN(p.date_expires) >= NOW() THEN MIN(p.date_expires)
        ELSE NULL /* this may not be what you really wanted */
    END as expiring_my_first_guess,

    /* what was really intended */
    MIN( CASE WHEN p.date_expires >= NOW() THEN p.date_expires ELSE NULL END ) as expiring,

FROM category c 
    INNER JOIN category_description cd 
        ON (c.category_id = cd.category_id) 
    INNER JOIN product_to_category p2c 
        ON (c.category_id = p2c.category_id) 
    INNER JOIN JOIN product p 
        ON (p2c.product_id = p.product_id) 
WHERE c.parent_id = 0 AND c.status = '1'
GROUP BY c.category_id
ORDER BY expiring 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:53:49.427

更新答案现在数据样本可用

仍然假设它是 Microsoft SQL Server，此查询产生以下结果

```
SELECT c.category_id, minDateExpires.Expiring 
FROM category c   
LEFT JOIN product_to_category p2c ON (c.category_id = p2c.category_id)   
LEFT JOIN product p ON (p2c.product_id = p.product_id)   
LEFT JOIN ( 
    SELECT MIN(date_expires) AS expiring, Product_ID FROM product WHERE date_expires >= GETDATE() GROUP BY Product_ID 
) minDateExpires on p.product_id = minDateExpires.product_id 
ORDER BY expiring 
```

结果：

```
category_id Expiring
63      NULL
63      NULL
62      NULL
64      NULL
63      2012-07-16 14:12:00.000
63      2012-07-18 08:15:00.000
62      2012-07-26 15:01:00.000
63      2012-08-02 13:04:00.000
63      2012-08-24 00:00:00.000 
```

存在空列是因为这些产品 ID >= 当前日期/时间没有最小日期。您实际上是在按类别 ID 而非产品 ID 分组的最短日期时间之后吗？在这种情况下，您的查询可能类似于：

```
SELECT c.category_id, minDateExpires.Expiring
FROM @category c
LEFT JOIN @product_to_category p2c ON (c.category_id = p2c.category_id)   
LEFT JOIN @product p ON (p2c.product_id = p.product_id)   
LEFT JOIN ( 
    SELECT MIN(date_expires) AS expiring, Category_ID FROM @product p join @product_to_category p2c on p2c.product_id = p.product_id WHERE date_expires >= GETDATE() GROUP BY Category_id
) minDateExpires on p2c.category_id = minDateExpires.category_id
ORDER BY expiring 
```

这给了你

```
64  NULL
63  2012-07-16 14:12:00.000
63  2012-07-16 14:12:00.000
63  2012-07-16 14:12:00.000
63  2012-07-16 14:12:00.000
63  2012-07-16 14:12:00.000
63  2012-07-16 14:12:00.000
62  2012-07-26 15:01:00.000
62  2012-07-26 15:01:00.000 
```

# javascript - jquery ui动态对话框

> ID：11462340
> 
> 赞同：1
> 
> 时间：2012-07-12T23:49:53.040
> 
> 标签：javascript, jquery, dynamic, dialog

我对 js 和 jquery 还很陌生。我基本上希望能够从 onClick 事件或附加的东西中更改 table 和 id 变量，`<a>`这样我以后可以用 php 修改变量。这只是概念证明，自从我进行修改后似乎没有工作。有没有办法可以将变量从 a 传递给函数？

总体目标：我想要一个内联 onclick，它将 id 和表名从 loadMe 传递给函数并在对话框中显示 table_render.php?id=someid&table=sometable。

```
 <script>
    $(function loadMe(table, id) {
        $( "#dialog-view" ).dialog({
            autoOpen: false,
            height: 600,
            width: 700,
            modal: true,
            buttons: {
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
        $( "#create-view" ).click(function() {
            $( "#dialog-view" ).load("table_render.php?id=" + id + "&table=" + table + "").dialog("open");
        });
    });
    </script>
    <a href="" id="create-view" onClick="loadMe(testimonials,1)">Some text</a>
    <div id="dialog-view" title="">
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:00:08.627

您将连接事件两次，一次通过 onclick，一次通过 jQuery。你需要选择一个。

如果您选择 jQuery 方式（推荐），您将获得 jQuery 参数（这只是一个 arg，事件）。但是，jQuery 将设置`this`为触发事件的元素（在本例中为您的 A 标签）。您可以使用它从 A 标签中获取数据。

例如，如果您想要被点击的 A 的 ID，您可以在处理程序中执行此操作：

```
var clickedId = $(this).attr('id'); 
```

如果您想为每个 A 标记存储一些任意信息（例如“tableName”），您可以使用 HTML 5 数据属性（首选），或者只是组成您自己的属性（这将起作用，但“格式不正确” ”）。例如：

```
<a tableName='testimonials'>

var clickedFoo = $(this).attr('tableName'); 
```

或（更好一点）：

```
<a data-tableName='5'>

var clickedTableName = $(this).attr('data-tableName');
// Also, I believe this would work:
var clickedTableName = $(this).data('tableName'); 
```

*** 编辑 ***

只是为了进一步澄清一点，基本的总体思路是这样的：

1) 你通过 PHP 将你的 A 标签写到页面上

1A) 当你把它们写出来时，你把它们特有的任何数据放在 A 标签上，以一个或多个属性的形式（例如`id='foo' data-bar='baz'`）。

2) 你还写了一些 Javascript 代码，上面写着“嘿，只要 A 标签被点击，就运行这个函数”

3) 在您连接到 A 标签的点击事件的函数中，您使用`this`变量（指向 A 标签本身）来获取您需要的数据（“变量”）

3A) 例如，您可以使用 JQuery "attr" 方法：`$(this).attr('id')`

4）利润！（或者至少对你刚刚获得的数据做一些有用的事情）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:41:42.143

所以我让它工作了......这是解决方案

```
function createViewer(id, table) {
        var id;
        var table;
        $("#dialog-view").dialog({
            autoOpen: false,
            width:650,
            minHeight:400,
            show:{effect: "fade", duration: 500},
            hide:"clip",
            resizable: false,
            modal: true,
            buttons: {
                "Close": function () {
                    $(this).dialog("close");
                }
            }
        });
        $("#dialog-view").load("table_render.php?id=" + id + "&table=" + table + "").dialog("open");
    }; 
```

和内联代码

```
<a href="#" onMouseDown="createViewer(<?php echo $row_testimonials['id'];?>,'testimonials');">View Quote</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T00:07:03.910

您可能希望`$(document).ready()`在您周围放置初始化对话框和绑定 onclick 事件的函数。然后在 ajax 请求的回调中打开对话框。

我猜这样你可以用 loadFunction 解除 onclick 属性。（疲劳的）

就像是：

**HTML：**

```
<a href="#" id="trigger" data-my-id="123" data-my-table="myTable">
  trigger
</a>

<div id="dialog">
 Dialog Contents....
</div> 
```

**JS：**

```
$(document).ready(function() {

    $("#dialog").dialog({
        autoOpen: false,
        height: 600,
        width: 700,
        modal: true,
        buttons: {
            Cancel: function() {
                $(this).dialog("close");
            }
        }
    });

    $("#trigger").click(function() {

        var id = parseInt( $(this).attr('data-my-id');
        var table = $(this).attr('data-my-table');

        $("#dialog").load("table_render.php?id=" + id + "&table=" + table + "", 
          function(){
            $("#dialog").dialog("open");
          });
    });

});​ 
```

应该做的伎俩。

# git - 无法通过 SSH 使用化石，导致分段错误

> ID：11462346
> 
> 赞同：0
> 
> 时间：2012-07-12T23:50:59.113
> 
> 标签：git, svn, segmentation-fault, fossil

我正在尝试通过 SSH 在我的共享服务器上使用[Fossil 。](http://www.fossil-scm.org/fossil/doc/trunk/www/index.wiki)我已采取以下步骤：

1.  创建文件夹化石（在我的用户根目录中，它给出了路径 /fossil/）
2.  在 /fossil/ 中上传 Fossil 的 linux 版本
3.  给了化石文件夹和文件 CHMOD 755

但是，使用 SSH 和 cd'ing 进入 /fossil（这是正确的路径），然后使用任何命令只会导致`Segmentation fault`.

![问题的图像](../Images/71b9e0981342f9e122e504def1a09f19.png)

非常感谢有关如何解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:34:58.253

就像格雷格说的那样，我很可能使用了错误的版本。[我自己建造 Fossil](http://www.fossil-scm.org/index.html/doc/trunk/www/build.wiki)解决了我的问题，现在效果很好。

# xml - 使用 razor cshtml 渲染 XML 时，如何在 Visual Studio 中修复或删除验证

> ID：11462349
> 
> 赞同：8
> 
> 时间：2012-07-12T23:51:07.827
> 
> 标签：xml, visual-studio-2010, razor

我有一个生成 xml 的 cshtml 文件。
我如何删除上面写着的绿色曲线`Validation (XHTML 1.0 Transitional): Element '....' is not supported.`

![在此处输入图像描述](../Images/36929cd48acc4f926c9338151738a015.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T06:23:36.163

如果您使用 HTML5 标记，则会显示此错误，但您的 Visual Studio 未针对 HTML5 设置。此错误不会影响您的任何设计，并且会在您的浏览器中很好地呈现。所以实际上这不是错误。

如果您真的希望删除此错误，请按照以下步骤操作，

_Layout 页面必须有 . 表示我们正在使用 HTML5。（这是 MVC 3 及更高版本的默认设置）在您的 Visual Studio 中，转到调试菜单->工具->选项->扩展 HTML->选择验证。在目标下拉列表中，选择 HTML5，单击确定。而已。现在错误应该消失了。

# sas - SAS中的Huber-White Sandwich Estimator？

> ID：11462351
> 
> 赞同：0
> 
> 时间：2012-07-12T23:51:20.113
> 
> 标签：sas

我希望能够用可交换的 var-cov 矩阵拟合一个 gee 模型，然后在结果模型上运行 Huber-White 三明治估计器，以防止出现有偏差的结果。我的 GEE 模型代码如下：

```
Proc GENMOD data = Cohort1ONLY;
class SSID SCHIID0809 Ethnicity(ref = "500") ELLbaseline GENDER freeLunch failedInd
GRADE0809(ref = "3")/param = ref;
Model SSMATH0809 = TRT0809 SSMATH0708 SSENG0708 GRADE0809 ELLbaseline GENDER freeLunch 
ethnicity failedInd; 
repeated subject = SCHIID0809/ type = exch /*corrw: to print the varcov matrix*/; 
Run; 
```

我知道 Huber-White Sandwich 估计器（经验）可以很容易地在 Proc MIXED 中使用经验选项实现。由于我在上面定义的所有参考组，我必须使用 GENMOD。无论如何，我可以通过宏传递结果吗？ HuberWhite 三明治估计器基于从上面的 GENMOD 获得的残差？

我感谢您的帮助。-塞佩尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:54:11.877

一种方法是使用 proc GENMOD 中可用的 COVB 选项使用经验参数协方差矩阵。为了使用经验协方差矩阵估计器（也称为鲁棒方差估计器，或三明治估计器或 Huber-White 方法），我们应该在 proc genmod 中的重复语句中添加 covb 选项：

```
repeated subject={subject id} / covb; 
```

# visual-studio-2010 - Visual Studio 2010 免费 svn 存储库，支持敏捷

> ID：11462353
> 
> 赞同：0
> 
> 时间：2012-07-12T23:51:22.150
> 
> 标签：visual-studio-2010, svn, agile, ankhsvn

您对支持 Visual Studio 的免费 svn 服务器有什么建议？

包括/或与其他敏捷免费工具兼容。

对于小型团队合作，2/3

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:14:17.797

我推荐：

***规划与跟踪***

**版本一：** 一个非常好的工具，支持scrum和看板，团队版是免费的，还有一个vs插件，让团队成员更新他们的工作非常方便。

***源代码控制***

我已经使用了 SVN（2 年）和 git 使用 github（1 年），我肯定会投票支持 git，它比 SVN 更灵活——从我个人的角度来看，github 也有它自己的内置问题跟踪、代码审查和 wiki，这是一个很大的优势，因为您将只使用一个工具并且是免费的。

git 有其适用于 windows 操作系统的 GUI 客户端，如果您使用的是基于 linux 的发行版，它将更有趣且更易于使用。

话虽如此，免费帐户的缺点是您的存储库将是公开的（任何人都可以访问您的代码）。

[版本链接](http://www.versionone.com/pricing_and_editions/)

[github 功能链接](https://github.com/features/projects)

祝你好运 ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T00:05:57.777

我将[assembla.com](http://assembla.com "assembla.com")用于小型项目。它有一个 1GB 空间的免费计划。

# c# - 枚举关联时如何提高糟糕的 EF4 性能？

> ID：11462356
> 
> 赞同：2
> 
> 时间：2012-07-12T23:51:45.673
> 
> 标签：c#, performance, entity-framework-4

我正在使用 Entity Framework 4（数据库优先）开发电影数据库应用程序，将大约 8,200 行加载到列表中需要 30 秒。涉及三个表，当我使用 .Include() 时，性能下降得更多——加载 8,200 行几乎需要三分钟。这很痛苦。鉴于我一次学习了很多技术，我希望有一个简单的解决方法。以下是详细信息：

表 1 - 视频

这是一个大表，有 31 列，大约 7,800 行视频。它使用 Guid 作为其主键。

表 2 - ActorsVideos（连接表）

该表有两列：(1) VideoID 列，和 (2) ActorID 列。这两列都是 Guid，分别是 Video 和 Actor 表的外键。此表使用复合主键，其中两列都充当主键。EF4 不对这个表建模；但是，它会创建一个导航属性。该表允许用户为电影分配任意数量的演员。

表 3 - 参与者

有 16 列约 400 行。同样，主键是 Guid。

在代码中，我正在读取 Videos 表中的大约 10 列，然后从关联的 Actors 表中读取列。

C# 代码如下所示：

```
var videos = context.Videos
foreach (var video in videos)
{
    // retrieve 10 or so properties from 'video'

    if (video.Actors.Count > 0)
    {
        foreach (var actor in video.Actors)
        {
            // retrieve some properties on the actor
        }
    }
} 
```

我尝试在 context.Videos 之后添加 .Include("Actors") ，如上所述，性能从可怕变为可怕。

我查看了使用 Include 生成的 SQL，考虑到视频表中的列数，它大约有 2K 的文本。

我是否必须使用主/从模式拆分视频表？我的下一步是缓存演员表并完全避免导航/关联属性。还有其他建议可以加快速度吗？在我看来，它应该在 5-6 秒内运行。

编辑：数据库是 SQL Server CE 3.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T01:06:58.680

您要求 Entity Framework 加载视频及其所有演员，然后您在应用程序代码中进行过滤。通常，您提取的数据比您需要的要多。我会为您提供 SQL Server（或您正在使用的任何数据库）预过滤器：

```
var videos = context.Videos;
var results = from video in videos
              where video.Actors.count > 10
              group video.Actors by video.VideoID into grouping
          select new
          {
              video.VideoID,
              video.Actors
          };

foreach (var group in results)
{
    foreach (var actor in group.Actors)
    {
        // do stuff
    }
} 
```

加载约 8200 行以及它们在视频表中的相关行应该非常快。我在我的工作中做了一些开发，我必须处理一个包含 5 个表连接的 70+ 百万行测试数据表。这运行了大约半分钟。

但是，它运行速度比您正在执行的操作快得多的原因是因为我在SQL Server*内部进行过滤。*使用 EF 的等效“程序”程序需要几分钟，因为我在从数据库中提取行之后进行过滤。

可以这样想：您不仅要查询数据库中的每一行，而且*还要多次提取甚至不需要多次的数据*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:56:11.500

尝试使用[急切加载](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)：

```
var videos = context.Videos.Include(v=>v.Actors);
foreach (var video in videos)
{
    foreach (var actor in video.Actors)
    {
    }
} 
```

**注意**：请注意，查询使用延迟执行，这意味着多次迭代也会多次执行查询。如果您将进行多次迭代，请`.AsEnumerable()`在迭代之前使用并在本地分配它。此外，分析数据库以查看正在执行的查询将有助于确定您还需要急切地获取什么。您可能会强制 EF 加载不需要的实体。如果是这种情况，那么您的查询应该只投影（通过使用`Select(x=> new {...stuff you need... })`）必要的数据。

**编辑**：根据[Microsoft](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)，`Include()`不能与预测相结合，因此在这种情况下，您需要以不同的方式编写查询。

# android - 许多菜单选项的Android布局设计

> ID：11462365
> 
> 赞同：1
> 
> 时间：2012-07-12T23:53:20.393
> 
> 标签：android

设计具有大量公式和转换功能的 Android 应用程序的最佳方法是什么？我在想具有 ListViews 的多个活动有点像一棵树，叶子是实际的计算。但是，在阅读了 Android 设计原则之后，最好避免纯粹的导航结构，并尽量减少应用程序的深度。

例如：

```
Main Menu
  Conversions
    Weight
    Distance
  Distance - Speed - Time
    Calculate air speed
    Calculate distance traveled
  Weather
    METAR
    TAF 
```

所以到第 3 或第 4 个屏幕时，我们已经到达了实际的个人计算器。这有意义吗？如果是这样，是否有更好的设计方法（可能使用操作栏或选项卡）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:17:36.547

通过使用一个非常简单的可扩展列表视图的 UI 概念，其中父行的每个部分都有多个子行，通过点击“转换”，可以扩展到子行，就像你看到的每个部分一样fit，并将其视为一个单词意义上的*主菜单*，即您的主应用程序屏幕。

一个不错的优点是取消了 Android 方式的菜单嵌套，并且可以容纳任意数量的菜单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:57:16.737

第三个或第四个屏幕听起来好像太深了兔子洞，每个“类型”都有多个选项卡怎么样？

例如;

```
[Conversions][Distances][Weather] 
```

如果您`ActionBar`向其中添加一个，您可以拥有 GMAIL 应用程序所具有的过滤器类型（您可以在其中选择帐户）并使用它来切换不同的“模式”。

另一种方法是将所有内容都放在一个屏幕上，只需`Fragment`通过我上面提到的过滤器切换活动布局（或者也许）。

查看 GMAIL 应用程序，您会明白我在过滤器方面的意思。:-)

# github - 无法在 Mac 上安装 Jekyll - 尝试设置 Github 博客

> ID：11462367
> 
> 赞同：7
> 
> 时间：2012-07-12T23:53:56.717
> 
> 标签：github, jekyll

我成功安装了 Ruby 1.8.7 版，并且一直在尝试使用 sudo gem install jekyll 在终端中安装 Jekyll。这是我得到的错误：

> 错误：执行 gem ... (Gem::FilePermissionError) 您没有写入 /Library/Ruby/Gems/1.8 目录的权限。unknown68a86d3f981e:~ srb_1974$ sudo gem install jekyll 构建原生扩展。这可能需要一段时间... 错误：安装 jekyll 时出错：错误：无法构建 gem 原生扩展。
> 
> ```
>  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby 
> ```
> 
> extconf.rb mkmf.rb 在 /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h 找不到 ruby​​ 的头文件
> 
> Gem 文件将继续安装在 /Library/Ruby/Gems/1.8/gems/fast-stemmer-1.0.1 以供检查。结果记录到 /Library/Ruby/Gems/1.8/gems/fast-stemmer-1.0.1/ext/gem_make.out

我已经阅读了很多主题，但无法得到任何工作。许多话题都说我必须先拥有 XCode，但它甚至不会下载，更不用说安装了。我在 Lion 中读到，您必须设置另一个管理员并将其安装在该配置文件下，所以我这样做了，但安装包不存在。它甚至不会下载。我想这可能是因为我不是注册的 Apple Developer？

另一个建议是我安装 Ruby RVM - 这也不会安装。这是我使用的命令： bash < <( curl [https://rvm.beginrescueend.com/releases/rvm-install-head](https://rvm.beginrescueend.com/releases/rvm-install-head) )

这是我得到的错误：

> % Total % Received % Xferd 平均速度 时间 时间 当前 Dload 上传总花费 左速度 0 0 0 0 0 0 0 0 --:--:-- --:--:-- --:--:-- 0 curl: (60) SSL证书问题，验证CA证书是否OK。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败更多详细信息：[http ://curl.haxx.se/docs/sslcerts.html](http://curl.haxx.se/docs/sslcerts.html)
> 
> curl 默认使用证书颁发机构 (CA) 公钥（CA 证书）的“捆绑”执行 SSL 证书验证。如果默认捆绑文件不够用，您可以使用 --cacert 选项指定备用文件。如果此 HTTPS 服务器使用捆绑包中表示的 CA 签名的证书，则证书验证可能由于证书问题而失败（证书可能已过期，或者名称可能与 URL 中的域名不匹配）。如果您想关闭 curl 对证书的验证，请使用 -k（或 --insecure）选项。未知68a86d3f981e:~ srb_1974$

我只关心 Ruby RVM 和 XCode，因为我需要它们来安装 Jekyll。我只是想让我的 Github 博客运行起来，但我似乎做不到。我已经阅读并阅读了文档，但我缺少一些东西。我很确定这是每个人都假设我拥有的知识——我没有。我是一个初学者程序员。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T01:49:52.017

好的，这就是我如何让它工作的。这是一种随机的实验过程，直到某些东西起作用。

我根据其他人的建议安装了 XCode 和 Ruby RVM，后者导致了我的解决方案。[此页面](https://rvm.io/rvm/install/)上的建议之一是运行“rvm requirements”并阅读文本。它基本上告诉你运行和升级红宝石需要什么。该文档非常有帮助。它解释说我需要安装 Jekyll 的并不是真正的 XCode，而是 GCC。显然，旧版本的 XCode 带有 GCC，但新版本没有，这就是为什么安装 XCode 并没有解决我的问题。它还引导我到哪里可以下载和安装 GCC，警告我在较新版本的 XCode 上安装 GCC 会导致问题。所以，我卸载了 XCode 并前往[这里](http://github.com/kennethreitz/osx-gcc-installer)安装 GCC。

就这么简单——我在几秒钟内安装了 GCC 和 Jekyll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:56:49.940

> 错误：安装 jekyll 时出错：错误：无法构建 gem 原生扩展。

所以错误是***“无法构建 gem 原生扩展”。***当你运行`sudo gem install jekyll`命令时。你会在[Jekyll Wiki 的安装部分](https://github.com/mojombo/jekyll/wiki/Install)找到一个提示：

> 如果您在 Windows 上遇到**Failed to build gem native extension 之**类的错误，您可能... 在 OSX 上，您可能需要更新 RubyGems：
> 
> $ sudo gem 更新--系统

因此，尝试更新您的 RubyGems 并在`sudo gem install jekyll`此之后运行。而且我认为如果您不是 ruby​​ 开发人员，则不需要安装 ruby​​ rvm。

顺便说一句，我认为 Ruby v1.9.1 是推荐的版本。

* * *

对于您的 Xcode 相关问题，尽管您不是注册的 Apple 开发人员，但您可以从**App Store下载它。**免费。**当您需要使用gcc**
构建一些库时，Xcode 很有用（gcc 将在您安装 Xcode 后一起安装）。但是我不知道安装 jekyll 时是否需要它。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T01:56:05.777

我尝试了上述所有解决方案，但没有奏效。我最初在这里发布了我的答案：

[RVM 要求错误](https://stackoverflow.com/questions/17754806/rvm-requirements-error/19106724#19106724)

但为简洁起见，这是我发布的内容：

似乎在 OSX 10.9 和 XCode5 上移动了一些库。所以我必须安装 XCode5-DP6（Dev Preview 6），打开 DP6，在设置中，你必须告诉命令行工具使用新的 DP6 构建，而不是市场上的标准 XCode。

首先，我必须安装自制软件。没有人喜欢玩macports。就在一个月前，我还在使用我的第一台 Mac，所以当时 macports 正是为我解决了 apache 的问题。然后我不得不运行'brew install autoconf'

一旦我这样做了，我就跑了`rvm requirements`，一切安装都没有问题。然后`sudo gem install jekyll`从那里开始，现在一切都像魅力一样。

我敢肯定，一旦 Mavericks 真正发布，这将得到解决。毕竟我们使用的是早期版本......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-27T17:30:41.197

遇到同样的问题！在阅读了这篇文章和如下的随机实验之后，

*   xcode 安装
*   curl -sSL [https://get.rvm.io](https://get.rvm.io) | 重击
*   须藤宝石安装jekyll

修复了问题并可以成功安装 jekyll**

# jquery - 如何在beautytips jquery插件中左右对齐spike的位置

> ID：11462368
> 
> 赞同：1
> 
> 时间：2012-07-12T23:54:08.617
> 
> 标签：jquery, tooltip, beautytips

我正在使用 beautytips jquery 插件[，这是我的一个项目的演示链接](http://www.lullabot.com/files/bt/bt-latest/DEMO/index.html)。我有一张图片，当点击它时，它会弹出一个 Div 并显示相关内容，但尖峰的位置总是在中间。我想为其他图像左右改变这个尖峰的位置，但我不知道该怎么做。我还附上了这个中间尖峰位置的屏幕截图。请帮我把这个尖峰也对齐左右。![这是屏幕截图](../Images/ae4233311d361d81ee2e6f520f59229c.png)

![像这样](../Images/bb644d164d4b1e0d94eb9a2deb0930ad.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:19:07.130

由于您的工具提示（请参阅下面的解释）选择似乎不可能做到这一点，并且您并没有被此选项卡住，因此请查看这个名为[qtip](http://craigsworks.com/projects/qtip/)的工具顶部：

专门看看[这里](http://craigsworks.com/projects/qtip/demos/position/corner#)的定位选项，左上角在我看来非常适合你，希望对你有帮助，看截图：

![在此处输入图像描述](../Images/78275a83833ebb2698e2fd3f6ff4c777.png)

此外，还有许多其他有用的插件，请参阅[此处的列表](http://www.1stwebdesigner.com/css/stylish-jquery-tooltip-plugins-webdesign/)，也许您更喜欢其中的任何一个...

* * *

编辑我想我发现了问题所在，尖峰的长度不够长，因此它根本没有显示中心点的变化，不幸的是我认为它是插件，检查这个例子：

[http://jsfiddle.net/43Acn/5/](http://jsfiddle.net/43Acn/5/)

![在此处输入图像描述](../Images/83fa05b2b4114d55ec1ea77ff1d151fc.png)

现在，如果我只更改尖峰的长度，请在此处查看[http://jsfiddle.net/43Acn/6/](http://jsfiddle.net/43Acn/6/)你会看到：

![在此处输入图像描述](../Images/14f796f2c9bf206630554a834818291a.png)

请注意，唯一的变化`spikeLength: 30,`是`spikeLength: 5,`...

* * *

* * *

我不知道您是否要相对于气泡或图像对齐尖峰，如果是气泡，那么您必须使用此参数：

```
centerPointX: .5, 
```

检查[源代码](http://www.lullabot.com/files/bt/bt-latest/jquery.bt.js)，在最底部你会看到这个参数的默认选项是 0.5，这意味着 50%。如果你想要 30%（气泡），你应该使用：

```
centerPointX: .3, 
```

`centerPointY`如果您愿意，也可以使用。

[在这里查看](http://jsfiddle.net/43Acn/)一个工作示例。

尝试更改`centerPointY: .9,`以`centerPointY: .1,`查看更改...

# c++ - const char 在作为参数传递给 Freetype 时被清空

> ID：11462370
> 
> 赞同：0
> 
> 时间：2012-07-12T23:54:13.197
> 
> 标签：c++, c, freetype2

我正在挠头，试图弄清楚为什么这个论点没有被正确传递。以下是相关代码，为简洁起见缩短：

```
bool CCImage::initWithString(
    const char * pText,
    int nWidth/* = 0*/,
    int nHeight/* = 0*/,
    ETextAlign eAlignMask/* = kAlignCenter*/,
    const char * pFontName/* = nil*/,
    int nSize/* = 0*/)
{
    do
    {
        BitmapDC &dc = sharedBitmapDC();

        const char* pFullFontName = CCFileUtils::fullPathFromRelativePath(pFontName);
        CCLog("font is %s\n", pFullFontName);

        dc.getBitmap(pText, nWidth, nHeight, eAlignMask, pFullFontName, nSize);
    }

bool getBitmap(const char *text, int nWidth, int nHeight, CCImage::ETextAlign eAlignMask, const char * pFontName, float fontSize) {
    FT_Face face;
    FT_Error iError;

    bool bRet = false;
    if (libError) {
        return false;
    }
    do {
        iError = FT_New_Face( library, pFontName, 0, &face );
        CCLog("error is %d font is %s\n", iError, pFontName);
        if (iError) {
            iError = FT_New_Face( library, "/usr/share/fonts/arial.ttf", 0, &face );
        }
    } 
```

大约 20% 的时间，字体正确显示。在第一个 FT_NEW_FACE 失败后，其余时间它们显示为 arial。CCLogs 的输出（只是 printf 的一个宏）说明了原因。这是尝试为四个标签加载字体 Abduction 的输出：

```
font is ./Res/fonts/Abduction.ttf
error is 1 font is 
font is ./Res/fonts/Abduction.ttf
error is 0 font is ./Res/fonts/Abduction.ttf
font is ./Res/fonts/Abduction.ttf
error is 1 font is 
font is ./Res/fonts/Abduction.ttf
error is 1 font is 
```

正如你所看到的，除了第二个之外，pFontName 在被 initWithString 传递和被 getBitmap 接收之间以某种方式被清空。但我不确定为什么。更令人困惑的是，什么时候可以工作，什么时候不工作，完全是随机的。我正在为 WebOS 编译这个，它似乎在其他平台上没有发生（事实上，它在几天前在 WebOS 上运行良好）但我不认为这是一个平台问题，它似乎太基础了。我比计划晚了两周并且压力很大，所以也许我错过了一些简单的事情。但我会很感激一些想法，这些想法可能会让我重新取得进步，而不是旋转我的车轮。

# java - 用于查看实时系统中的错误/异常的 Web 界面

> ID：11462372
> 
> 赞同：0
> 
> 时间：2012-07-12T23:54:19.793
> 
> 标签：java, log4j, slf4j

应用程序中的错误/异常当前记录到日志文件中。除非有人检查这些日志文件，否则我们无法了解发生的错误数量。我们正在寻找一个可以显示不同类型的异常、它们的统计信息（图表）等的 Web 应用程序，以便任何人都可以轻松地查看界面或设置监视器以在应用程序中发生超过 x 个错误时发送电子邮件。

监控异常并获得通知的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:53:15.243

试试[JSnapshot](http://jsnapshot.com/)，它可能对你很有用。

# ios - iOS方式开始向下滚动时复选标记消失

> ID：11462377
> 
> 赞同：1
> 
> 时间：2012-07-12T23:54:48.420
> 
> 标签：ios, uitableview

开始向下滚动时复选标记消失的方式。

下面是该`didSelectRowAtIndexPath`方法的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];

    if (selectedCell.accessoryType == UITableViewCellAccessoryCheckmark) {
        selectedCell.accessoryType = UITableViewCellAccessoryNone;

        if ([[[collectionDataArray objectAtIndex:indexPath.section] objectAtIndex:indexPath.row] objectForKey:@"creditHours"]==@"1") {
            totalHoure = totalHoure - 1;
        }

    } else {

        selectedCell.accessoryType = UITableViewCellAccessoryCheckmark;

        if ([[[collectionDataArray objectAtIndex:indexPath.section] objectAtIndex:indexPath.row] objectForKey:@"creditHours"]==@"1") {
            totalHoure = totalHoure + 1 ;
        }
    }
} 
```

有什么问题吗 ？或者如果有任何其他技术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:00:13.173

确保将复选标记存储在模型中的某个位置。当用户滚动`UITableView`. 然后确保在 中正确重新设置复选标记`tableView:cellForRowAtIndexPath:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T06:36:36.440

试试这个来存储复选标记单元格数据。希望这能解决您的问题：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
       UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];

       if ([selectedCell accessoryType] == UITableViewCellAccessoryNone || [selectedCell accessoryType]== UITableViewCellAccessoryDisclosureIndicator)   
       {
           [selectedCell setAccessoryType:UITableViewCellAccessoryCheckmark];
                    [Mybuffer addObject:[arrItem objectAtIndex:indexPath.row]];
       }
       else
       {
           [selectedCell setAccessoryType:UITableViewCellAccessoryNone];
           [Mybuffer removeObject:[NSNumber numberWithInt:indexPath.row]];
       }
} 
```

# ios - 你如何使 UIScrollView 的溢出变暗？

> ID：11462379
> 
> 赞同：0
> 
> 时间：2012-07-12T23:55:08.727
> 
> 标签：ios, core-graphics

假设您想实现与 iOS 的相机“缩放和裁剪”相同的功能……您可以在其中滚动和裁剪图像。

图片中超出裁剪区域大小的任何部分都会变灰。我正在尝试完全复制这一点。如果标志“clipToBounds”设置为 NO，则可以显示整个子视图。

但是，我发现将 UIScrollView 的子视图溢出变灰有点困难。

你将如何实施？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T00:59:21.250

您可以通过`UIView`在溢出区域中创建一个半透明且在“裁剪”区域中透明的子类并将其放置在您的上方并将其`UIScrollView`扩展以覆盖溢出来做到这一点。

您需要实现的主要方法是`initWithFrame`：

```
#define kIDZAlphaOverlayDefaultAlpha 0.75

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        mAlpha = kIDZAlphaOverlayDefaultAlpha;
        self.backgroundColor = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:mAlpha];
        self.userInteractionEnabled = NO;
    }
    return self;
} 
```

不要错过，`userInteractionEnabled = NO`否则滚动视图将看不到事件。

和`drawRect`

```
- (void)drawRect:(CGRect)rect
{    
    CGRect apertureRect = /* your crop rect */;
    CGContextRef context = UIGraphicsGetCurrentContext();
    /* draw the transparent rect */
    CGContextSetRGBFillColor(context, 0.0, 0.0, 0.0, 0.0);
    CGContextSetBlendMode(context, kCGBlendModeCopy);
    CGContextFillRect(context, apertureRect);
    /* draw a white border */
    CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0);
    CGContextStrokeRect(context, apertureRect);
} 
```

这里重要的一点是，`kCGBlendModeCopy`这允许我们在半透明背景中绘制（或剪切）一个透明矩形。

如果您想将透明矩形设为圆角矩形，并包含裁剪图像的预览，最终会得到如下屏幕所示的内容：

![IDZAlphaOverlay 运行中的屏幕截图](../Images/83cd7f508aa979fd42119e57a18f8bf4.png)

抱歉，我无法分享屏幕截图的所有代码。它来自一个客户项目:-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:42:51.607

我已经通过...解决了这个问题：

*   添加一个新的帮助类，“ApertureOverlay”（UIView 的子类），代码如下：

    > *   (void)drawRect:(CGRect)rect {
    >     
    >     
    >     
    >     if(CGRectEqualToRect(_apertureRect, CGRectZero) == NO)
    >     
    >     
    >     
    >     {
    >     
    >     
    >     
    >     ```
    >     CGContextRef context = UIGraphicsGetCurrentContext();
    >     
    >     CGContextSetShouldAntialias(context, false);
    >     
    >     CGContextSetRGBFillColor(context, 1.0f, 1.0f, 1.0f, 1.0f);
    >     CGContextFillRect(context, _apertureRect);
    >     
    >     CGContextSetShouldAntialias(context, true); 
    >     ```
    >     
    >     
    >     
    >     }
    >     
    >     
    > 
    > }

*   ApertureOverlay 有一个背景，其 alpha 字节设置为 50%。

    [self setBackgroundColor:[UIColor colorWithRed:1.0f green:1.0f blue:1.0f alpha:0.5f]];

到目前为止...我们得到的是一个具有透明背景的视图和一个白色矩形（使用 _apertureRect 位置 + 大小绘制）。

在实现了这个类之后，我设置了 ScrollView 的 'mask' 属性，它包含了里面的图像。

```
[[self layer] setMask:[_apertureOverlayView layer]]; 
```

就是这样！。如果您更新 ApertureOverlay 的“_apertureRect”属性，则需要调用“setNeedsDisplay”，以便重新绘制。

还有一件事。通过将抗锯齿设置为假（ApertureOverlay）......事情工作得非常顺利。

# iphone - 在 TableView 单元格中加载 UIWebView

> ID：11462381
> 
> 赞同：1
> 
> 时间：2012-07-12T23:55:29.167
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiwebview

在我的表格视图中，当您滚动浏览单元格时，它们会分别加载来自 Youtube/Vimeo 的视频截图/链接...

但是当我第一次开始滚动表格视图时，我注意到每个 webview 不断地重新加载自己（我的意思是什么？）首先我会一直滚动到表格视图的底部，让每个表格单元格加载 web 视图，因此当我向上滚动到顶部，我认为 webviews 不需要再次重新加载，但他们确实......

为了解决这个问题，我在下面做了一些事情，但我遇到了另一个问题。当你第一次打开这个场景时，表格视图会正常加载所有可见单元格的 webview，但是当你开始向下滚动到其他表格视图单元格时，我注意到它所做的只是获取我第一次打开场景时加载的最后一个 webview并将其放入我向下滚动时遇到的所有其他 webviews。

我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [[UITableViewCell alloc] init];
    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    NSMutableString *VideoID;
    VideoID = [NSMutableString stringWithFormat:@"9394596"];

    if(indexPath.row == 19) {
        VideoID = [NSMutableString stringWithFormat:@"9820827"];
        NSLog(@"19");
    }
    NSString *htmlStringToLoad = [NSString stringWithFormat:@"http://player.vimeo.com/video/%@?title=0&amp;byline=0&amp;portrait=0\%%22%%20width=\%%22%0.0f\%%22%%20height=\%%22%0.0f\%%22%%20frameborder=\%%230\%%22", VideoID];
    // Configure the cell...

    UIWebView *thisWebView = (UIWebView*)[cell viewWithTag:10];
    NSString *contentsOfWebView = [thisWebView stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('body')[0].innerHTML"];

    UILabel *thisLabel = (UILabel*)[cell viewWithTag:20];

    if([contentsOfWebView length] < 3) {
        [thisWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:htmlStringToLoad]]];
        NSLog(@"IF");
    } else {
        NSLog(@"ELSE");
    }

    thisLabel.text = @"Video Title";
    cell.detailTextLabel.text = @"TEST";

    return cell;
} 
```

如何在表格视图中加载每个 webview，如果遇到已经加载的 webview，不要加载它们？

编辑：第 19 行应该加载不同的视频，但它没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:22:53.257

因为您正在重用表格视图单元格，所以其中包含的 Web 视图已经加载了内容（它将重用现在已经滚出屏幕的任何可用单元格），因此在您的语句中：

```
if([contentsOfWebView length] < 3) 
```

webview 的内容大于 3，因此它不会重新加载，从而显示现有内容。

# c++ - C++ 为什么我看不到 cout 的输出？

> ID：11462382
> 
> 赞同：2
> 
> 时间：2012-07-12T23:55:32.843
> 
> 标签：c++, eclipse, cout

鉴于这一小段代码

```
//============================================================================
// Name        : prwe.cpp
// Author      : 
// Version     :
// Copyright   : Your copyright notice
// Description : Hello World in C++, Ansi-style
//============================================================================

#include <iostream>
using namespace std;

int main() {
    cout << "Hello World" << endl; // prints Hello World
    return 0;
} 
```

此代码在 Eclipse 下编译，但控制台窗口中不显示任何内容。

知道我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T23:59:44.423

程序运行，打印 Hello World，然后在您看到它之前关闭。

添加

```
 cin.get(); 
```

返回0之前；它应该工作正常。然后，您必须按 Enter 键才能关闭控制台。

什么 cin.get(); 正在做的是要求用户输入继续，在这种情况下继续关闭程序。

# git - 如何使用 Git 在提交中选择一些文件

> ID：11462385
> 
> 赞同：0
> 
> 时间：2012-07-12T23:55:50.570
> 
> 标签：git, cherry-pick

在我想要`cherry-pick`从分支 B 到分支 A 的提交之一中，有四个文件发生了更改，但我只希望该提交中的一个文件位于分支 A。如何在分支 A 上获取该文件？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:13:46.833

这有点麻烦，但这有效：

如果您有更多不想提交的文件，那么您要提交的文件：

`git checkout BranchA
git cherry-pick <sha1>
git reset HEAD^
git add <file>
git commit
git reset --hard`

如果您有更多文件要提交，则不要：

`git checkout BranchA
git cherry-pick --no-commit <sha1>
git reset HEAD <file>
git commit`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T00:07:28.107

一种选择是`git show -p COMMIT_HASH:path/to/file > path/to/file`获取已更改的文件，然后添加并提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T01:50:37.987

挑选，还原除您想要的文件之外的所有文件，提交修改：

```
git cherry-pick BranchB
git show --pretty=format: --name-only | grep . | grep -v fileyouwant | xargs git checkout HEAD^ -- 
git commit -a --amend -C HEAD 
```

# javascript - 过渡定位

> ID：11462387
> 
> 赞同：0
> 
> 时间：2012-07-12T23:56:29.807
> 
> 标签：javascript, html, css

我有一些代码想集成到网站中并位于屏幕中间。这段代码用 Javascript 做了一些褪色。但我不能像我想的那样在屏幕上移动它。当我移动它时，它会弄乱动画。

这是HTML

```
<!DOCTYPE html> 
```

带有 JavaScript for() 循环的 jQuery 淡入

```
 <div id="elem0" class="toBeFaded">Here's the first message...</div>
    <div id="elem1" class="toBeFaded">We have second one here...</div>
    <div id="elem2" class="toBeFaded">And here's the third message...</div>
    <div id="elem3" class="toBeFaded">OMG!!! Here's the fourth message!</div>

<script src="js/jquery-1.7.1.min.js"></script>

<script src="js/fadeCode.js" defer="defer"></script> 
```

​</p>

Javascript

> $(函数(){
> 
> ```
> var yourFade = 1, // the amount of time in seconds that the elements will fade in AND fade out
>     yourDelay = 2, // the amount of time in seconds that there will be a delay between the fade ins and fade outs
>     fadeTime = yourFade * 1000, //convert fade seconds to milliseconds (1000)
>     delayTime = yourDelay * 1000, // convert delay seconds to milliseconds (2000)
>     totalTime = fadeTime + delayTime, //3000 milliseconds...needed for all those delays we talked about
>     allElems, // find out exactly how many page elements have the 'toBeFaded' class (4)
>     elemNoFade, // Will help us find the last element represent the last element (3)
>     i,
>     fadingElem;
> 
> for (i = 0, allElems = $('.toBeFaded').length, elemNoFade = allElems - 1; i < allElems; i+=1) {
>     fadingElem = "#elem" + i;
>     if (i === 0) {
>         $(fadingElem).fadeIn(fadeTime).delay(delayTime).fadeOut(fadeTime);
>     } else if (i === elemNoFade) {
>         $(fadingElem).delay(totalTime * i).fadeIn(fadeTime);
>     } else {
>         $(fadingElem).delay(totalTime * i).fadeIn(fadeTime).delay(delayTime).fadeOut(fadeTime);
>     }
> } });​ 
> ```

和 CSS

```
.toBeFaded {
display: none;
position:absolute;
font-size:70pt; 
```

}​</p>

和jsfiddle的[链接](http://jsfiddle.net/kaidez/6xfKN/33/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:36:58.343

我不确定我是否看到了问题。看看这个小提琴：http: [//jsfiddle.net/joplomacedo/6xfKN/375/](http://jsfiddle.net/joplomacedo/6xfKN/375/)

# iphone - 在没有“购买”提示的情况下恢复应用内购买？可能吗？

> ID：11462389
> 
> 赞同：0
> 
> 时间：2012-07-12T23:56:44.253
> 
> 标签：iphone, ios, xcode, in-app-purchase, storekit

我目前有我的应用内购买“恢复”按钮，

它*确实*有效，但本质上它会在整个过程中要求用户“购买”升级（就像在普通的应用内一样）我担心这会

a) 被苹果拒绝 b) 吓唬用户以为他们再次付款

有什么办法可以改变它，所以它可能有不同的信息？

```
-(IBAction)restore:(id)sender
{=
    [[SKPaymentQueue defaultQueue]
     addTransactionObserver:self];
    [[SKPaymentQueue defaultQueue]
     restoreCompletedTransactions];

    UIAlertView *alert;

    alert = [[[UIAlertView alloc] initWithTitle:@"Restoring Your Purchases, Please Wait..." message:nil delegate:self cancelButtonTitle:nil otherButtonTitles: nil] autorelease];
    [alert show];

    UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

    // Adjust the indicator so it is up a few pixels from the bottom of the alert
    indicator.center = CGPointMake(alert.bounds.size.width / 2, alert.bounds.size.height - 50);
    [indicator startAnimating];
    [alert addSubview:indicator];
    [indicator release];

    [alert dismissWithClickedButtonIndex:0 animated:YES];

    [[MKStoreManager sharedManager] buyFeature];=
}

-(void)productPurchased
{
    for (UIView *view in self.view.subviews)
    {
        if (view.tag==2000)
        {
            [view removeFromSuperview];
        }
    } 

    UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"Thank you" message:@"Your restore was successful." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
    [alert show];
    [alert release];
}

// error restore
- (void)failed
{
    for (UIView *view in self.view.subviews)
    {
        if (view.tag==2000)
        {
            [view removeFromSuperview];
        }
    }

    UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"Error" message:@"Your restore has failed." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
    [alert show];
    [alert release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:10:36.747

绝对有可能，事实上这是必要的。请参阅我对类似[问题的](https://stackoverflow.com/q/11200460/171206)[回答](https://stackoverflow.com/a/11200519/171206)。

本质上，当您按下恢复按钮时，应该要求用户验证他们的帐户；这是由`StoreKit`. 如果为该帐户找到 IA 购买，则该过程应该开始以与他们第一次购买该项目相同的方式恢复购买，只是没有实际购买的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:10:48.560

我看到你正在使用 MKStoreKit。只需在您的应用程序中启用 iCloud，其余的由 MKStoreKit 处理。其他设备甚至无需打开商店页面即可将购买“视为”“已购买”。

PS：我写了 MKStoreKit

# ios - FBSession：未提供 AppID；将 AppID 传递给 init，或添加字符串值键

> ID：11462400
> 
> 赞同：4
> 
> 时间：2012-07-12T23:57:51.790
> 
> 标签：ios, facebook

当我打开 FBSession (FB SDK 3.0) 时，我收到此错误：

```
FBSession: No AppID provided; either pass an AppID to init, or add a string
valued key with the appropriate id named FacebookAppID to the bundle *.plist 
```

我知道我可以在 .plist 中为 FacebookAppID 添加一个值，但是我应该使用什么方法来使用 AppId 初始化 FBSession？我曾尝试使用 [FBSession setDefaultAppID] ，但似乎没有这样做。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-13T00:13:58.270

这似乎对我有用：

```
[FBSettings setDefaultAppID: @"123456789"]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-22T15:24:37.197

新版SDK不接受

```
- (id)initWithAppId:(NSString *)app_id
    andDelegate:(id<FBSessionDelegate>)delegate; 
```

所以在 info.plist 文件中创建一个 FacebookAppID 并将应用程序 ID 作为字符串输入。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T00:25:59.323

通常，您必须从 Facebook SDK 调用 initWithAppId:。

```
- (id)initWithAppId:(NSString *)app_id
    andDelegate:(id<FBSessionDelegate>)delegate; 
```

见这里：http: [//developers.facebook.com/docs/reference/iossdk/authentication/](http://developers.facebook.com/docs/reference/iossdk/authentication/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-10T16:52:01.160

对我来说，出现这个问题是因为我的项目出于某种奇怪的原因（可能对我以前项目的复制和粘贴感到满意）有 2 个 plist 文件！因此，在为 FacebookAppID 读取的 plist 上不存在此信息。我删除了我不想要的 plist，然后返回到我的应用程序的常规设置并在“身份”部分中选择了我想要的 plist。繁荣！固定的

# ios - 使用带有单点触控的 SVG 文件

> ID：11462407
> 
> 赞同：4
> 
> 时间：2012-07-12T23:59:14.810
> 
> 标签：ios, svg, xamarin.ios

试图找到一种不使用 WebView 对象来显示/渲染 SVG 文件的方法。我找到了名为 SVGKit 的 ObjC 库。我想知道 SVGKit 有多可靠？它有单点触控绑定吗？在 iPhone/iPad 上显示矢量图形的选项有哪些？这可以通过使用 OpenGL 引擎来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:20:50.557

我不能亲自证明 SVGKit 有多可靠，但是[在 GitHub 上浏览它的历史](https://github.com/SVGKit/SVGKit/commits/master)，它通过了我的大部分“我会因为使用这个项目而讨厌自己吗？” 健全性检查：

1.  它每月有大约十几个来自不同开发人员的提交，
2.  它有一个活跃的问题列表，
3.  它有数百名观察者和数十个活跃的分叉。

我不知道 iOS 上矢量图形的任何其他替代方案。OpenGL 没有任何内置的矢量功能。我确信它可以被说服绘制你以其他方式解码的图形——虽然这听起来像是很多工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:00:10.413

查看[Codeautomat](http://www.codeautomat.com/)。它可以将 SVG 文件转换为 Objective-C。它与 SVGKit 的不同之处在于它不能在运行时工作；它基本上将您的 SVG 编译为静态代码。

# ios - iOS完成按钮重定向到jsp

> ID：11462409
> 
> 赞同：1
> 
> 时间：2012-07-12T23:59:29.543
> 
> 标签：ios

实际上，要求是我们在 iPod touch 中注册一个配置文件，并且在安装配置文件时有一个完成按钮。当我们单击完成按钮时，我们必须在 java 中捕获该事件并将其重定向到基本上是一个 jsp 的 safari。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:20:03.497

不，你不能这样做。该功能内置于操作系统中。

也许有一天，Apple 可能会选择提供重定向 URL 作为配置文件的一部分，但我不会屏住呼吸

# actionscript-3 - actionscript TLF 获取选定的文本

> ID：11462412
> 
> 赞同：2
> 
> 时间：2012-07-12T23:59:44.493
> 
> 标签：actionscript-3, flash-cs5, tlf

如何使用 actionscript 3 和 flash cs5 在 TLF 字段中捕获文本的潜文本？例如，我使用了所选文本的偏移量

```
var zz:int = textpane.selectionBeginIndex;
var zzz:int = textpane.selectionEndIndex; 
```

其中文本窗格是 TLF 框的一个实例。我得到了选择开始和结束的索引，但我不知道如何使用这些值来获取潜台词。

我的最终目标是在文本之前添加一些内容，在文本之后动态添加一些内容，而不仅仅是替换它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:55:37.900

使用开始和结束索引，调用`substring`from `textpane.text`：

```
var start:int = textpane.selectionBeginIndex;
var end:int = textpane.selectionEndIndex;

var text:String = textpane.text.substring(start, end); 
```

`TextField`并`TLFTextField`实现`replaceText()`可以插入文本的功能。

要在您的起始索引处替换：

```
textpane.replaceText(start, start, "-->"); 
```

在结束索引处替换：

```
textpane.replaceText(end, end, "<--"); 
```

要在开始和结束索引处都插入，请确保补偿插入文本的长度。

```
end += insertedText.length; 
```

总之，这就变成了：

```
// find start and end positions
var start:int = textpane.selectionBeginIndex;
var end:int = textpane.selectionEndIndex;

// selected text
var text:String = textpane.text.substring(start, end);

// insert text at beginning of selection
var inseredtText:String = "-->";
textpane.replaceText(start, start, insertText);

// insert text at end of selection
end += insertedText.length;
textpane.replaceText(end, end, "<--"); 
```

# java - 类路径 - 从命令行运行 java 程序

> ID：11462421
> 
> 赞同：6
> 
> 时间：2012-07-13T00:01:31.287
> 
> 标签：java, jar, classpath, classnotfoundexception

我的代码使用以下命令编译得很好：

`javac -cp "../lib/*" AvroReader.java`

（lib 是我放置 jar 文件的地方）

在运行时，我得到`ClassNotFoundException`以下行：

`DatumReader<?> dtmrdr = new GenericDatumReader();`

`org.apache.avro.generic.GenericDatumReader`它说即使我已经导入它也找不到。

为什么会这样？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T00:24:13.060

导入与加载类或设置 CLASSPATH 无关。

试试这个：

```
java -cp .;../lib/* Generator 
```

使用点`'.'`作为 CLASSPATH 中的第一个条目假定该`Generator.class`文件存在于您运行 java 的目录中，并且`/lib`比该目录高一级。如果这两个都不正确，请根据需要进行调整。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-13T00:06:42.697

您应该再次运行包含相同 cp 的程序：

```
java -cp "lib directory where i put all the jars" MainClassOfYourApplication 
```

编译后：

```
javac -cp "lib directory where i put all the jars" AvroReader.java 
```

更适用于您的示例：

```
First step(compile all the needed java files): javac -cp "path/to/jars/*" AvroReader.java //here you should include all the java files not yet compiled but which you need to run your app
Second step: java -cp "path/to/jars/*" package.subpackage1.subpackage2.Generator 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-08-21T08:04:32.793

使用外部 jar 文件在 Linux 系统上编译和执行 java 文件：

```
javac -cp jar_file1.jar:jar_file2:jar_file3.jar:. java_program_name.java

java -cp new_mail_api.jar:activation.jar:additional.jar:.java_program_name 
```

使用外部 jar 文件在 Windows 系统上编译和执行 java 文件：

```
javac -cp jar_file1.jar;jar_file2;jar_file3.jar;. java_program_name.java

java -cp new_mail_api.jar;activation.jar;additional.jar;.java_program_name 
```

在 Linux 的 Unix 中，Java Classpath 包含用冒号“:”分隔的目录名称，在 Windows 上 Java Classpath 将是分号“;” 如果您在 Manifest 文件中定义了 java 类路径，则这些将是空格分隔的。

有关 Classpath 的更多知识，请访问[https://javarevisited.blogspot.com/2011/01/how-classpath-work-in-java.html](https://javarevisited.blogspot.com/2011/01/how-classpath-work-in-java.html)

# python - 烧瓶应用的结构

> ID：11462427
> 
> 赞同：22
> 
> 时间：2012-07-13T00:03:11.160
> 
> 标签：python, flask, flask-sqlalchemy

我正在尝试使用 Flask 创建一个简单但并非微不足道的应用程序，但我一直遇到文档中没有很好解释的情况。

我希望我的应用程序在不同的模块之间拆分，但看起来很难从主模块以外的任何其他地方访问主`app`对象（或`db`from ）。`flask-sqlalchemy`看起来您必须真正编写自己的方式，将其视为一切都可以访问的全局，这需要一些有问题的代码和一些时间。

两者`app`和`db`都是在主应用程序实例化的级别创建的，每个示例都假定它们在顶层可用。但是如果我将不同的 url 处理程序拆分为不同的模块，我将失去使用`@app.route`装饰器的能力。我可以用 解决这个问题`app.add_url_rule('/...', some.module...)`，但话又说回来，app 没有传递给那个函数。

同样的事情发生在`db`- 我不知道我是否应该将它粘贴到，或者通过某种方式`g`使其可以访问。`app`这样做并不能帮助我将模型移动到一个单独的模块中——导入它们时我应该如何访问`db`它们？所有示例再次假设它仅可用作局部变量。

我是否遗漏了一些明显的东西，或者我是否试图在这里使用烧瓶来完成错误的任务？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-13T18:53:26.850

你的问题的答案是蓝图。实际上，如果您查看文档，就会提到蓝图可以将应用程序划分为模块。

示例代码：

```
 from flask import Blueprint

    mod = Blueprint(blueprint_name, __name__, template_folder="folder_name"
                    static_folder="folder_name")

    @mod.route('/mymodule')
    def view():
         # your code 
```

在 app.py 中

```
 from yourmodule import mod 

    app.register_blueprint(mod) 
```

这是将应用程序划分为模块的正确方法。查看蓝图文档了解更多详细信息。

此外，如果您需要在任何其他模块中访问应用程序，您应该使用`current_app`应用程序的代理。

```
 from flask import current_app 
```

查看此[文档](https://github.com/mitsuhiko/flask/wiki/Large-app-how-to)，该文档指导了烧瓶的创建者如何将烧瓶应用程序划分为大型项目的模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T16:27:20.307

您是否看过新`blueprints` [功能](http://flask.pocoo.org/docs/blueprints/#blueprints)（我还没有使用它，但听起来这*可能*对您的情况有所帮助）。

# ruby - 我可以检测到方法已被覆盖吗？

> ID：11462430
> 
> 赞同：11
> 
> 时间：2012-07-13T00:03:51.807
> 
> 标签：ruby

假设这里有一些我不知道的任意库代码：

```
class Foo
  def hi
  end
end

class Bar < Foo
  def hi
  end
end 
```

假设我有一些代码`Bar`作为参数传递。

```
def check(x)
  do_something_with(x.method(:hi))
end 
```

在上面的例子中，我能知道`x.hi`(where `x`references an instance of `Bar`) 与 不同`Foo#hi`吗？

* * *

根据加雷斯的回答，这就是我到目前为止所得到的：

```
def is_overridden?(method)
  name = method.name.to_sym
  return false if !method.owner.superclass.method_defined?(name)
  method.owner != method.owner.superclass.instance_method(name).owner
end 
```

可怕？华丽的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-13T00:12:12.593

你可以这样做：

```
if x.method(:hi).owner == Foo 
```

我远非 Ruby 专家。如果有人有比这更好的方法，我不会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T00:26:18.453

有趣的问题！我想知道同样的问题。您可以重新打开 Bar 类并检查在 Bar 的查找路径中定义了该方法的祖先是谁。

```
class Bar < Foo
  ancestors.each do |ancestor|
    puts ancestor if ancestor.instance_methods.include?(:hi)
  end
end 
```

# html - Twitter引导单选按钮不起作用

> ID：11462434
> 
> 赞同：16
> 
> 时间：2012-07-13T00:04:09.460
> 
> 标签：html, forms, twitter-bootstrap, radio-button

我的 twitter bootstrap javascript 单选按钮有问题。当我选择一个然后单击提交按钮时，它不会显示选定的单选值。

我的代码：

```
<form action="" class="form-horizontal" method="post">
  <fieldset>
    <div class="control-group">
      <label class="control-label">Type:</label>
      <div class="controls">
        <div class="btn-group" data-toggle="buttons-radio">
          <button type="button" data-toggle="button" name="option" value="1" class="btn btn-primary">Option One</button>
          <button type="button" data-toggle="button" name="option" value="2" class="btn btn-primary">Option Two</button>
        </div>
      </div>
    </div>
    <div class="form-actions">
      <input class="btn btn-primary" type="submit" value="Go">
      <a href="index.php" class="btn">Back</a>
    </div>
  </fieldset>
</form> 
```

如您所见，有一个`name="option" value="1"`and`name="option" value="2"`但是当我选择一个收音机时，我会这样做：

`<?php print_r($_POST); ?>`

没有`option`指定帖子。

它只发生在 twitter 单选按钮上，因为当我添加时，`<input type="text" name="test" value="something"/>`它会出现在`$_POST`变量中。

哪里有问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-13T00:16:17.503

问题是`<button>`单击时不提交任何内容。您将需要一个隐藏的输入字段，并在单击按钮时触发输入内的值更改

```
<input type="hidden" name="option" value="" id="btn-input" />
<div class="btn-group" data-toggle="buttons-radio">  
  <button id="btn-one" type="button" data-toggle="button" name="option" value="1" class="btn btn-primary">Option One</button>
  <button id="btn-two" type="button" data-toggle="button" name="option" value="2" class="btn btn-primary">Option Two</button>
</div>

<script>
  var btns = ['btn-one', 'btn-two'];
  var input = document.getElementById('btn-input');
  for(var i = 0; i < btns.length; i++) {
    document.getElementById(btns[i]).addEventListener('click', function() {
      input.value = this.value;
    });
  }
</script> 
```

在引导程序的情况下，“收音机”仅影响按钮状态和行为。它不会影响表单行为。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-03T14:29:08.547

这是上述作品的 jquery 替代品。

```
$("body").find(".btn").each(function(){
    $(this).bind('click', function(){
      $("input[name=view-opt-bt-group-value]").value = this.value
    });
  }); 
```

对此的 HTML 是：

```
<div class="row pull-right">
  <div class="btn-group view-opt-btn-group" data-toggle="buttons-radio">
    <button type="button" class="btn" value="0"><i class="icon-th-list"></i></button>
    <button type="button" class="btn" value="1"><i class="icon-th-list"></i></button>
    <input type="hidden" name="view-opt-bt-group-value" value="0">
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-25T12:21:59.550

您可以将`btn`类添加到`<label>`s，因此我实现了以下不需要隐藏输入的操作，如果没有引导程序或 javascript，则可以优雅地降级，并且您仍然可以使用 html 帮助程序。

[试试看](http://jsfiddle.net/vYfzU/28/)。

```
<div class="btn-group" data-toggle="buttons-radio">
   <label class="btn">@Html.RadioButton("option", 1) Option 1</label>
   <label class="btn">@Html.RadioButton("option", 2) Option 2</label>
</div>
...
<script type="text/javascript">
    $(function () {
        // Bootstrappable btn-group with checkables inside
        // - hide inputs and set bootstrap class
        $('.btn-group label.btn input[type=radio]')
          .hide()
          .filter(':checked').parent('.btn').addClass('active');
    });
</script> 
```

**更新：**他们现在在 Bootstrap 3 中使用这种格式，但它需要稍微不同的标记（即`data-toggle="buttons"`）。请参阅[http://getbootstrap.com/javascript/#buttons](http://getbootstrap.com/javascript/#buttons)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-02T05:41:14.540

我想出的最简单的 jQuery 代码是：

```
<div class="btn-group" data-toggle="buttons-radio">
    <button type="button" class="btn" onClick="$('#gender').val('f');">♀</button>
    <button type="button" class="btn" onClick="$('#gender').val('m');">♂&lt;/button>
</div>
<input name="gender" id="gender" type="hidden" value=""> 
```

对我来说，这是一个特殊的用例，所以它不需要强大或灵活。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-19T00:45:49.173

我的回答是基于@mcNux的[https://stackoverflow.com/a/16214643/1111662](https://stackoverflow.com/a/16214643/1111662)

在您看来（我使用 HAML 但如果需要转换为 ERB）

```
.btn-group{data:{toggle: "buttons-radio"}}
  %label.btn
    = f.radio_button :gender, "Male"
    Male
  %label.btn
    = f.radio_button :gender, "Female"
    Female 
```

在您特定于视图的 javascript 中，例如`pages.js.coffee`（再次，我使用 CoffeeScript，但如果需要，转换为纯 JS JQuery）

```
$(document).ready ->
  $('.btn-group label.btn input[type=radio]')
    .hide()
    .filter(':checked').parent('.btn').addClass('active') 
```

# actionscript-3 - 检查影片剪辑的平均亮度（忽略透明度）？

> ID：11462439
> 
> 赞同：1
> 
> 时间：2012-07-13T00:05:10.643
> 
> 标签：actionscript-3, flash

我正在开发一个 Flash 应用程序，该应用程序将显示由各种 PNG 制作的具有透明度的 MovieClip。PNG 需要在运行时进行颜色校正，以使亮度级别保持一致。为此，我编写了使用 MovieClip 的平均亮度级别来确定图像变亮或变暗的代码。有人慷慨地给了我代码来计算 Adob​​e 论坛上的平均亮度：[http ://forums.adobe.com/message/3501572](http://forums.adobe.com/message/3501572)

这种使用直方图的方法非常有效，除非影片剪辑具有透明区域。MovieClip 中的任何透明像素都会读取为纯白色并扭曲结果。

有谁知道更好的方法来做到这一点？我需要一个准确的结果；我记得尝试过一些古怪的事情，比如将 MovieClip 缩小到 1 个像素并读取该像素的颜色，但这并不有效。

编辑：

啊啊！[我终于从http://www.kirupa.com/forum/showthread.php?266493-Extract-Bitmap-or-BitmapData-from-MovieClip](http://www.kirupa.com/forum/showthread.php?266493-Extract-Bitmap-or-BitmapData-from-MovieClip)弄明白了。默认的 BitmapData 构造函数用白色填充。我用透明像素填充它。请参阅下面的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:25:09.980

```
 var bmp:BitmapData = new BitmapData(image.width/4,image.height/4, true, 0x00000000);
        bmp.draw(image);
        bmp.draw(image.getChildAt(0));
        var v:Vector.<Vector.<Number >  >  = bmp.histogram();
        var r:Number = 0;
        var g:Number = 0;
        var b:Number = 0;
        var a:Number = 0;

        for (var i:uint=0; i<256; i++) {
            r +=  i * v[0][i] / 255;
            g +=  i * v[1][i] / 255;
            b +=  i * v[2][i] / 255;
            a += i*v[3][i]/255;

        }
        var totalPixels:uint = bmp.rect.width * bmp.rect.height;
        r /=  totalPixels;
        g /=  totalPixels;
        b /=  totalPixels;
        a /= totalPixels;

        var brightness:Number = (r+g+b)/3;
        bmp.dispose();
        return brightness * 2; 
```

# html - CSS3 调整大小 - 你能移动调整大小的图标吗？

> ID：11462443
> 
> 赞同：2
> 
> 时间：2012-07-13T00:05:45.097
> 
> 标签：html, css

我正在使用 CSS3 属性“resize:both”来允许用户调整我拥有的 div 的大小。但是由于某种原因，您单击并拖动以调整窗口大小的调整大小三角形被推到了 div 之外，用户几乎看不到。有没有办法可以用 CSS 定位这个调整大小的三角形，使它在我的窗口的角落更正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:22:50.200

使用 css 您可以更改光标的图像，

```
cursor: url(cursor.cur),default; 
```

# c# - 在 C# 中，是一个声明如下的数组： int[]a = {numbers ...}; 在堆栈中？

> ID：11462444
> 
> 赞同：2
> 
> 时间：2012-07-13T00:05:46.217
> 
> 标签：c#, memory, heap-memory, stack-memory

在 C# 中，当我声明一个这样的数组时：

```
int []a = {1, 2, 3, 4, 5} 
```

这是在堆栈中声明的吗？

据我所知，我应该这样做：

```
int []a = new int[5]{1, 2, 3, 4, 5}; 
```

考虑到数组是引用类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T00:07:31.610

这两者之间没有区别。

第一个只是一个语法糖 ( [MSDN](http://msdn.microsoft.com/en-us/library/aa664573%28v=vs.71%29.aspx) ) 来保存几个击键。

它们都（只要它们是相同的数组）都在堆中声明，并且引用在堆栈中声明。因此，只要您超出范围-对象就会变得未被引用并且有资格被垃圾收集。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T00:14:08.860

实际上有一种方法可以将数组存储在堆栈中：

（来自[http://www.c-sharpcorner.com/uploadfile/GemingLeader/creating-a-stack-based-array/](http://www.c-sharpcorner.com/uploadfile/GemingLeader/creating-a-stack-based-array/)）

```
int* pArr = stackalloc int[length]; 
```

但这需要一个不安全的代码区域，因为使用了指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T00:16:57.640

你们两种语法都将在堆上声明，因为 int 是值类型

int[] a = {1, 2, 3, 4, 5 } 这种语法是另一种语法的简写

# php - php如何将数组数据保存到数据库

> ID：11462445
> 
> 赞同：0
> 
> 时间：2012-07-13T00:05:51.927
> 
> 标签：php, mysql, arrays

请检查我的代码，我得到以下输出：

```
in wood that 1

in wood that 2 

in wood that 3 

in wood that 4 
```

从下面显示的代码中，我希望将这四行**存储****在**我的 MySQL 数据库中。

```
$string = "imperfection in wood that 1 can appear during the wood drying process.imperfection in   wood that 2 can appear during the wood drying process.imperfection in wood that 3 can appear during the wood drying process.imperfection in wood that 4 can appear during the wood drying process";
preg_match_all('/(imperfection)(.*?)(can)/', $string, $matches);   

foreach($matches[2] as $value) 
    echo  $value.'<br />'; 

$sql="INSERT INTO string_check(st_name)VALUES($value)";
$result=mysql_query($sql); 
```

谢谢和亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:13:57.077

遍历匹配，将它们转义（以防万一）并将它们包装在引号和括号中；然后用逗号将它们全部连接起来，并将该字符串用作您的 VALUES 表达式：

```
$foreach($matches[2] as $match) {
  $values[] = '("' . mysql_real_escape_string($match) . '")';
}
$value_statement = implode(', ', $values);
$sql="INSERT INTO string_check (st_name) VALUES $value_statement"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:27:48.747

您要将这四行存储到不同的行中吗？如果是这种情况，那么试试这个

```
foreach($matches[2] as $value) {
    $sql="INSERT INTO string_check(st_name)VALUES($value)";
    $result=mysql_query($sql);
} 
```

如果要将其存储到一行中，请使用以下语法

```
$values = '';
foreach($matches[2] as $value) {
    $values .= $value;
}
$sql="INSERT INTO string_check(st_name)VALUES($values)";
$result=mysql_query($sql); 
```

# makefile - 将此 make 转换为 cmake

> ID：11462446
> 
> 赞同：0
> 
> 时间：2012-07-13T00:05:52.923
> 
> 标签：makefile, cmake

## 我发现了如何使用 Makefile 添加带有日期和内部版本号的链接变量的绝妙示例：

```
OBJECTS=main.o
BUILD_NUMBER_LDFLAGS  = -Xlinker --defsym -Xlinker __BUILD_DATE=$$(date +'%Y%m%d')
BUILD_NUMBER_LDFLAGS += -Xlinker --defsym -Xlinker __BUILD_NUMBER=$$(cat buildnumber.num)

a.out: $(OBJECTS) buildnumber.num
    $(CC) $(LDFLAGS) $(BUILD_NUMBER_LDFLAGS) -o $@ $(OBJECTS)
buildnumber.num: $(OBJECTS)
    @if ! test -f buildnumber.num; then echo 0 > buildnumber.num; fi
    @echo $$(($$(cat buildnumber.num)+1)) > buildnumber.num 
```

但是我在 CMakeLists.txt 中重复这一点的所有尝试都失败了...... :-( 例如：

```
ADD_CUSTOM_COMMAND(OUTPUT buildnumber.num 
    COMMAND @if ! test -f buildnumber.num; then echo 0 > buildnumber.num; fi
    COMMAND @echo $$(($$(cat buildnumber.num) + 1)) > buildnumber.num)

file (GLOB_RECURSE MAIN_SOURCES FOLLOW_SYMLINKS ./src/*.cpp)
add_custom_target(buildnumber.num DEPENDS ${MAIN_SOURCES}) 
```

我将非常感谢如何在 cmake 中实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:23:54.650

@安德烈

好吧，我得到了我想要的东西，但是以某种笨拙的方式，因为我是这方面的新手。请建议如何改进这一点（主要是如何避免单独的文件）。这是 CMakeLists.txt 文件：

```
include_directories(${CMAKE_CURRENT_BINARY_DIR})
set(CMAKE_EXE_LINKER_FLAGS " /Projects/Testnum/linker.scr")
add_custom_target(stam ALL COMMAND ${CMAKE_COMMAND} -P ${CMAKE_CURRENT_SOURCE_DIR}/custom.cmake) 
add_executable(foo main.c ) 
add_dependencies(foo stam) 
```

这是附加的 custom.cmake 文件：

```
execute_process(COMMAND increment.scr )
execute_process(COMMAND cat buildnumber OUTPUT_VARIABLE _output OUTPUT_STRIP_TRAILING_WHITESPACE)
file(WRITE linker.scr "__BUILD_NUM = ${_output} ;") 
```

这是 increment.csr 文件，我没有成功将其插入 custom.cmake：

```
#!/bin/bash
var=`cat buildnumber`; sum=$((1 + $var )); echo $sum >buildnumber 
```

最后，这是 main.c：

```
#include <stdio.h>
extern char* __BUILD_NUM;
int main()
{
  printf("LINK_TIME_VALUE: %d\n", (int)&__BUILD_NUM);
  return 0;
} 
```

一切正常，但似乎太笨拙了。

# linux - 如何更改微信加入/离开颜色？

> ID：11462449
> 
> 赞同：1
> 
> 时间：2012-07-13T00:06:09.167
> 
> 标签：linux, chat, irc, theming

在微信中，我熟悉大多数外观/颜色设置的位置，但我似乎找不到“已加入”和“已退出”消息的设置。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T00:16:57.993

在最近 2 个版本的 Weechat 中，这些颜色不属于配置下的**[color]**部分`weechat.conf`。它们实际上在`irc.conf`, 在**[color]**下，并设置为`message_join`and `message_quit`。您可以在微信中通过键入以下内容进行更改：

```
/set irc.color.message_join <color>
/set irc.color.message_quit <color> 
```

请记住键入`/save`以保存您的更改。

Weechat 0.3.6 及更高版本就是这种情况，并且可以肯定 0.3.5 有一个统一的配置文件（weechat.conf 下的所有内容）。

# java - java.text.SimpleDateFormat 闰年

> ID：11462460
> 
> 赞同：0
> 
> 时间：2012-07-13T00:08:37.350
> 
> 标签：java, date, simpledateformat, julian-date

所以我正在使用这个类“SimpleDateFormat”，这样我就可以使用“DDD”将一年中的天数转换为日期。但是，我不确定这是否涵盖闰年，因为我没有看到可以指定今年是闰年的选项。如果我指定一年，它是否已经知道这是一个飞跃？我只是想确定一下。

谢谢你，伊杰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T00:22:38.943

SimpleDateFormat 适用于儒略历中的闰年 :)

以防万一……您可以将 lenient 属性设置为 false。

```
 SimpleDateFormat sf=new SimpleDateFormat("ddMMMyyyy");
 sf.setLenient(false);
 sf.parse("29Feb2012");//OK
 sf.parse("29Feb2003");//throws parseException 
```

# android - Android, APK 重启后恢复到以前的版本

> ID：11462461
> 
> 赞同：2
> 
> 时间：2012-07-13T00:09:01.863
> 
> 标签：android, apk

我正在为客户编写软件；该软件将预先安装到自定义 ROM 上。

该软件的功能之一是在可用时自行更新到更新版本。

一切正常，但问题是这样的；当设备重启或重启时，更新版本消失！旧版本回归。

有什么不同的东西要写来创建可以更新的预装软件？

提前感谢您的任何指导/建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T12:58:04.700

我终于解决了这个问题。顺便说一句太愚蠢了 :) 因为我没有使用 Google Play 更新 APK，所以我没有更改 Manifest 中的 VERSIONCODE！只是。其他一切都很好。所以，如果其他人有同样的问题，这是我的提示：始终更改 versionCode 和 versionName。

谢谢您的帮助！

最好的问候，朱伯特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:27:44.133

我猜您进行更新时与相关 APK 存在冲突。由于您声明该*软件将预安装到自定义 ROM 上*，这意味着该软件已使用所使用的 ROM 签名密钥进行签名。

那么，听起来您用于签署 APK 的密钥与 ROM 的签署密钥不同，从而恢复到旧版本？

# php - 在 PHP 中的 while 循环中从 MySQL 结果向数组添加值

> ID：11462462
> 
> 赞同：4
> 
> 时间：2012-07-13T00:09:26.763
> 
> 标签：php, arrays

对不起初学者的问题。
我现在已经搜索了一个小时，只能找到在 while 循环中添加 1 个 key => value 的信息。我的目标是这个结果。谢谢

```
$menu = array(  
    '1' => array('id' => 1, 'parentid' => 0, 'title' => 'Apple'),  
    '2' => array('id' => 2, 'parentid' => 0, 'title' => 'Banana'),  
    '3' => array('id' => 3, 'parentid' => 0, 'title' => 'Tangerine'),  
    '4' => array('id' => 4, 'parentid' => 3, 'title' => 'Pear')
); 
```

我已经尝试了很多东西，但这似乎是最接近的。

```
$menu = array();
while($row = mysql_fetch_array($query)) {
    $menu[] = $row['id'] ;
    $menu[] = $row['parentid'] ;
    $menu[] = $row['title'];
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-13T00:13:34.830

啊，看起来你想要类似的东西

```
$menu = array();
while ($row = mysql_fetch_array($query)) {
    $menu[] = array(
        "id" => $row['id'], 
        "parentid" => $row['parentid'], 
        "title" => $row['title']
    );
} 
```

关联数组键是使用`"key" => "value"`.

* * *

*编辑*

有点离题，但我*强烈*建议为您的查询学习 PDO。它真的很容易学习并且有很多优点 - 安全性和灵活性是最重要的 - 并且确实将您的脚本提升到了一个新的水平。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T00:13:37.303

您只需添加一个新数组作为数组的元素值`$menu`。

```
$menu = array();
while($row = mysql_fetch_array($query)) {
    $menu[] = array(
        'id' => $row['id'],
        'parentid' => $row['parentid'],
        'title' => $row['title']
    );
}
var_dump($menu); 
```

**编辑：**如何遍历数组（基本上这是 PHP 101，所以我建议查找[PHP 数组](http://php.net/manual/en/language.types.array.php)）

```
foreach($menu as $index => $record){
    echo "ID: {$record['id']} ParentID: {$record['parentid']} Title: {$record['title']}";
} 
```

# windows - windows上没有单声道的单声道sqlite？

> ID：11462465
> 
> 赞同：0
> 
> 时间：2012-07-13T00:10:02.910
> 
> 标签：windows, sqlite, mono

曾几何时，我问[是否有办法在没有两个二进制文件的 windows/linux 上使用 sqlite db](https://stackoverflow.com/q/9694386/34537)。有人建议使用单声道，我问 Windows 上的 .NET 是否需要单声道安装，但被告知不需要。

我从我的 linux vm 中获取了这个参考文件

```
mono\gac\Mono.Data.Sqlite\2.0.0.0__0738eb9f132ed756\Mono.Data.Sqlite.dll 
```

然后我在 main() 中写了这两行

```
var connection = new Mono.Data.Sqlite.SqliteConnection("Data Source=test.db3");
connection.Open(); 
```

我得到了这个例外

```
System.TypeInitializationException was unhandled
  Message=The type initializer for 'Mono.Data.Sqlite.SqliteConvert' threw an exception.
  Source=Mono.Data.Sqlite
  TypeName=Mono.Data.Sqlite.SqliteConvert
  StackTrace:
       at Mono.Data.Sqlite.SqliteConvert.Split(String source, Char separator)
       at Mono.Data.Sqlite.SqliteConnection.ParseConnectionString(String connectionString)
       at Mono.Data.Sqlite.SqliteConnection.Open()
       at rsa_test.Program.Main(String[] args) in Program.cs:line 56
  InnerException: System.ArgumentException
       Message=Value does not fall within the expected range.
       Source=mscorlib
       StackTrace:
            at System.Runtime.CompilerServices.RuntimeHelpers.InitializeArray(Array array, RuntimeFieldHandle fldHandle)
            at Mono.Data.Sqlite.SqliteConvert..cctor()
       InnerException: 
```

那么在没有安装单声道的情况下就不能使用单声道 sq​​lite 吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T01:51:37.210

我遇到了同样的问题，发现[dotConnect for SQLite](http://www.devart.com/dotconnect/sqlite/)是另一种与 Mono 和 Windows 兼容的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T12:09:06.897

你不能使用 .NET 4.0，你必须使用 .NET 3.5

有一个错误：[https ://bugzilla.xamarin.com/show_bug.cgi?format=multiple&id=152](https://bugzilla.xamarin.com/show_bug.cgi?format=multiple&id=152)

# python - 在 Python 中读写二进制文件

> ID：11462466
> 
> 赞同：10
> 
> 时间：2012-07-13T00:10:04.290
> 
> 标签：python

以下代码似乎无法正确读取/写入二进制形式。它应该读取一个二进制文件，按位异或数据并将其写回文件。没有任何语法错误，但数据没有验证，我已经通过另一个工具测试了源数据以确认 xor 键。

**更新**：根据评论中的反馈，这很可能是由于我正在测试的系统的字节序。

[xortools.py](http://code.google.com/p/malwarecookbook/source/browse/trunk/12/1/xortools.py)：

```
def four_byte_xor(buf, key):
    out = ''
    for i in range(0,len(buf)/4):
        c = struct.unpack("=I", buf[(i*4):(i*4)+4])[0]
        c ^= key
        out += struct.pack("=I", c)
    return out 
```

调用 xortools.py：

```
from xortools import four_byte_xor
in_buf = open('infile.bin','rb').read()
out_buf = open('outfile.bin','wb')
out_buf.write(four_byte_xor(in_buf, 0x01010101))
out_buf.close() 
```

看来我需要读取每个[答案](https://stackoverflow.com/a/1035360/666891)的字节数。当上面的函数操作多个字节时，上面的函数如何合并到下面的函数中？还是没关系？我需要使用[struct](http://docs.python.org/library/struct.html)吗？

```
with open("myfile", "rb") as f:
    byte = f.read(1)
    while byte:
        # Do stuff with byte.
        byte = f.read(1) 
```

例如，以下文件有 4 个重复字节 01020304：

![异或之前](../Images/6de58e276734128b514cee5b6fac8f11.png)

数据与密钥 01020304 进行异或运算，将原始字节归零：

![异或后](../Images/5ab68722cf6ffd63af15678b661d1a07.png)

这是对原始函数的尝试，在这种情况下 05010501 是不正确的结果：

![不正确的异或尝试](../Images/0654656508250467c456391e6920b65a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T01:18:50.773

这是一个相对简单的解决方案（经过测试）：

```
import sys
from xortools import four_byte_xor
in_buf = open('infile.bin','rb').read()
orig_len = len(in_buf)
new_len = ((orig_len+3)//4)*4
if new_len > orig_len:
    in_buf += ''.join(['x\00']*(new_len-orig_len))
key = 0x01020304
if sys.byteorder == "little":  # adjust for endianess of processor
    key = struct.unpack(">I", struct.pack("<I", key))[0]
out_buf = four_byte_xor(in_buf, key)
f = open('outfile.bin','wb')
f.write(out_buf[:orig_len]) # only write bytes that were part of orig
f.close() 
```

它所做的是将数据的长度填充到 4 个字节的整数倍，与 4 字节的密钥进行异或，但随后只写出原始长度的数据。

这个问题有点棘手，因为 4 字节密钥的数据字节顺序取决于您的处理器，但总是先写入高字节，但字符串或字节数组的字节顺序总是先写入低字节如您的十六进制转储所示。为了允许将密钥指定为十六进制整数，有必要添加代码以有条件地补偿不同的表示形式——即允许密钥的字节可以按照与十六进制转储中出现的字节相同的顺序指定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T01:20:25.713

试试这个功能：

```
def four_byte_xor(buf, key):
    outl = []
    for i in range(0, len(buf), 4):
        chunk = buf[i:i+4]
        v = struct.unpack(b"=I", chunk)[0]
        v ^= key
        outl.append(struct.pack(b"=I", v))
    return b"".join(outl) 
```

我不确定您实际上是在输入 4 个字节，但我没有尝试破译它。这假设您的输入可以被 4 整除。

编辑，基于新输入的新功能：

```
def four_byte_xor(buf, key):
    key = struct.pack(b">I", key)
    buf = bytearray(buf)
    for offset in range(0, len(buf), 4):
        for i, byte in enumerate(key):
            buf[offset + i] = chr(buf[offset + i] ^ ord(byte))
    return str(buf) 
```

这可能会得到改进，但它确实提供了正确的输出。

# javascript - Javascript - 多次调用一个函数但只有一个效果

> ID：11462472
> 
> 赞同：0
> 
> 时间：2012-07-13T00:10:46.130
> 
> 标签：javascript, jquery, function

我知道我可以轻松解决这个问题，但我正在寻找这种情况下的最佳实践。这是一个简化版[http://jsbin.com/isered/3/edit](http://jsbin.com/isered/3/edit)。我正在尝试创建一个用于重用的函数，但我需要它以便在触发事件时（即单击锚标记），它只附加一次输出区域，而不是每次调用该函数时。

**jQuery/Javascript**

```
$(function () {

   function foo () {
      $('a').on('click', function () {
      $('.asdf').append('poo');
    });
   }

   foo ();
   foo ();
}); 
```

**HTML**

```
<a href='#'>hello</a>
<a href='#'>world</a>

<p class='asdf'></p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:16:34.300

您可以创建一个状态变量，在本例中为一个类：

```
$(function () {
  function foo() {
    $('a:not(.clicked)').on('click', function() {
      $(this).addClass('clicked');
      $('.asdf').append('poo');
    });
  }

  foo();
  foo();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T00:17:10.937

您可以在绑定之前[取消绑定](http://api.jquery.com/off/)事件：

```
function foo () {
  $('a').off('click').on('click', function () {
      $('.asdf').append('poo');       
  });
} 
```

虽然我不明白为什么只调用一次函数不是最好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T00:20:51.053

当我只想制作一个容器但在随后的点击中处理其余的功能时，我通常会遇到这种情况。在这种情况下，我检查容器是否存在，如下所示：

```
var foo = function(){
    $('a').on('click', function(ev){
       if (!$('.asdf .foo').length) {
           $('.asdf').append('<div class="foo">');
       }
       // do other click stuff here
    });
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T00:17:22.137

[Underscore.js 已经有了这个功能。](http://underscorejs.org/#once)

那么为什么要重新发明轮子。

> _.once(function) 创建只能调用一次的函数版本。对修改后的函数的重复调用将无效，返回原始调用的值。对于初始化函数很有用，而不是必须设置一个布尔标志，然后再检查它。

[例子：](http://jsfiddle.net/j3eSa/2/)

```
$(function () {

  var foo = _.once(function() {
    $('a').on('click', function () {
      $('.asdf').append('poo');       
    });
  });

  foo ();
  foo ();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T00:37:21.487

```
$(function () {
    function foo () {
        $('a').on('click', function () {
            var num = $('.asdf').text().length;
            if (num == 0) {
                $('.asdf').append('poopsicles');
            }
        });
    }

    foo();
    foo();
}); 
```

我想这个问题已经得到了回答，但是你去吧。

# c++ - 依赖于参数的查找是否也只搜索名称空间或类？

> ID：11462474
> 
> 赞同：3
> 
> 时间：2012-07-13T00:11:00.873
> 
> 标签：c++, argument-dependent-lookup

我一直在阅读 Josuttis 模板书，并且一直在尝试将头放在 ADL 上。他说“ADL 通过在命名空间和类中查找名称来“与”调用参数的类型“相关联”。我只是想看看它是如何在班级中查找名称的。我在下面放了一个测试示例。我看到它如何在命名空间中查找名称。

```
class bryan_ns {
  public:
  class bryan {
    public:
      enum E { e1 };
      static void bryan_test() { std::cout << __PRETTY_FUNCTION__ << std::endl; }
  };

  void f(bryan::E) { std::cout << __PRETTY_FUNCTION__ << std::endl; }
};

void f(int)
{
  std::cout << "::f(int) called\n";
}

int main()
{
  f(bryan_ns::bryan::e1); // calls ::f(int)
} 
```

但是，如果我将 bryan_ns 更改为这样的命名空间：

```
namespace bryan_ns {
  public:
  class bryan {
    public:
      enum E { e1 };
      static void bryan_test() { std::cout << __PRETTY_FUNCTION__ << std::endl; }
  };

  void f(bryan::E) { std::cout << __PRETTY_FUNCTION__ << std::endl; }
};

void f(int)
{
  std::cout << "::f(int) called\n";
}

int main()
{
  f(bryan_ns::bryan::e1); // calls bryan_ns::f(bryan::E)
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T02:54:09.580

ADL 将查看类型的封闭命名空间，以及*类型*本身。最好的例子是在类型内部定义的友元函数：

```
namespace X {
class test {
   friend void f( test ) { std::cout << "test" << std::endl; }
};
}
int main() {
   X::test t;
   f( t );
} 
```

调用`f(t)`将查找`X::f`其声明仅在 type中可用`test`。这是友元函数声明的一个鲜为人知的特性：它们声明一个命名空间级别的函数，但只在类型内部提供声明。验证此行为的简单测试：

```
namespace X {
   class test {
      friend void f( test );
   };
   //void f( test );          // [1]
}
void X::f( X::test ) {}       // [2]
int main() {
   X::test t;
   f(t);                      // [3]
} 
```

[2] 中的*定义*将触发编译错误，因为您只能*定义*一个已经声明的函数，并且由于 [2] 在命名空间之外，`X`该定义不符合自我声明的目的（如果您定义一个函数位于它所在的命名空间内，那么定义也是一个声明，但在这种情况下不是）。如果我们取消注释 [1]，错误就会消失。或者，如果我们注释 [2]，代码将编译，表明对于 [3] 中的调用，ADL 已在类中找到声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:18:22.067

在第一个例子中，`bryan_ns::f`是一个非静态成员函数。中的表达式`main`没有`.`或`->`成员运算符，因此它显然不是成员函数调用，`bryan_ns::f`也不是可行的函数。

# php - 如何检查scandir（）是否在php中返回false

> ID：11462475
> 
> 赞同：0
> 
> 时间：2012-07-13T00:11:39.223
> 
> 标签：php, file, directory, scandir

我会直截了当地解释我想要完成的工作，然后向您展示我目前正在使用什么来实现这一目标。

我想要的是检查目录是否有任何文件。现在我通常使用 readdir 并使用 while 循环来遍历它，但我运行了 scandir() 并认为它使用起来会更快一些。

我正在尝试在 scandir() 失败时使用逻辑运算符。例如：

```
if(false!==scandir($main_directory)){
//do something;
} 
```

起初它似乎可以工作，但是当我实现仅在 scandir() 失败时才完成的其他事情时，它似乎只是忽略它并不管它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:24:44.527

尝试为 scandir 函数定义一个变量并将其用作 if 语句中的条件。例如

```
$scan_result=scandir($main_directory);
if(scan_result == false)
{
 //Do something
}
else
{
 //Do something else
} 
```

# javascript - offset.top 返回的值大于 event.pageY

> ID：11462477
> 
> 赞同：1
> 
> 时间：2012-07-13T00:11:52.317
> 
> 标签：javascript, jquery, events, jquery-plugins

准确地说，正好是 50px。我知道它在某处的代码中，但我想我已经盯着它太久了。

**背景故事**：我正在制作一个简单的 jQuery 插件，当鼠标悬停在图像上时会添加放大镜效果。它工作正常，然后我添加了一些代码，从图像顶部进入时它开始表现得很奇怪。我使用firebug查看图像的顶部偏移量和光标的pageY值之间是否存在差异，并且存在。

在下面的链接中，您可以看到从上方移入它不会按时激活。

**代码**：

```
update: function(event) {
    img.stop(); // To stop the image from constantly animating
    img.lens.stop(); // Same for the lens
    img.lens.leftmax = img.width + img.left;
    img.lens.topmax = img.height + img.top;

    img.lens.x = event.pageX - (vars.size / 2);
    img.lens.y = event.pageY - (vars.size / 2);

    img.lens.css({
        left: img.lens.x + 'px',
        top: img.lens.y + 'px'
    });

    console.log(img.top + ' : ' + event.pageY);

    if (event.pageX >= img.lens.leftmax || event.pageY >= img.lens.topmax || event.pageX <= img.left || event.pageY <= img.top) {

        img.lens.hide(); // Hide lens
        if (options.caption) {
            img.lens.caption.hide();
        } // Hide Caption
        if (options.overlay) {
            methods.nooverlay();
        }

        // API Callback Exit
        vars.onexit(img, img.lens);
    } else {
        // API Callback on entering
        vars.onenter(img, img.lens);

        if (options.overlay) {
            methods.overlay();
        }

        methods.doMath(event); // Recalculate pos
        img.lens.show(); // Show lens
        img.lens.css({
            backgroundPosition: img.lens.bgleft + 'px ' + img.lens.bgtop + 'px'
        }); // Assign coordinates
        if (options.caption) {
            img.lens.caption.show(); // Show caption
            img.lens.caption.x = img.lens.x + ((vars.size - img.lens.caption.outerWidth()) / 2); // Center caption
            img.lens.caption.css({
                left: img.lens.caption.x + 'px',
                top: img.lens.y + vars.size + 'px'
            }); // Assign coordinates
        }
    }
},

doMath: function(event) {
    img.wr = img.Owidth / img.width;
    img.hr = img.Oheight / img.height;

    img.lens.bgleft = String(((event.pageX - img.left) * img.wr - vars.size / 2) * (-1));
    img.lens.bgtop = String(((event.pageY - img.top) * img.hr - vars.size / 2) * (-1));
},​ 
```

这些是使悬停动作起作用的主要功能（地图的一部分），我认为问题应该出在哪里。代码很长，所以为了便于阅读，我将添加一个指向我托管页面的链接，以防您想查看完整的插件代码。

***链接已删除***

我哪里错了？

**编辑：**

显然，问题的原因是一个浮动跨度元素，它嵌套在图像的父标记的父级的兄弟姐妹中：

```
 <div class="header">
        <!-- This span tag -->
        <span class="note">&rarr; If you're using IE8 or lower, you will see a square lens</span>
        <h1>jQuery Images Lens Preview</h1>
        <span><i>The most customizable zoom tool there is.</i> <a href="#">GET IT NOW!</a></span>
        <div style="clear: both;"></div>
   </div>

    <div class="example">
        <div class="desc">
             <h3>Demonstration #1 - Basic Usage</h3>
             <pre>$('img.basic').superLens();</pre>
        </div>
        <div class="theimages">
            <img src="images/demo_img1.jpg" width="214" height="320" class="basic" />
            <img src="images/demo_img2.jpg" width="214" height="320" class="basic" />
        </div>
        <div style="clear: both;"></div>
    </div> 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:20:17.793

它实际上并没有返回 50px 的差异。

基本上是从图像顶部的`img.top`偏移量。是光标到 顶部的偏移量`document`，因为悬停事件是光标的确切点，**而不是**悬停对象的点。`event.pageY``document`

 **如果你愿意，你可以使用`event.target`并从中获得最高价值。**

# java - 用 Java 画一个头和脖子。画线问题

> ID：11462480
> 
> 赞同：1
> 
> 时间：2012-07-13T00:12:25.000
> 
> 标签：java, drawing

在 Person 类内部：

```
 public Point[] endPointArray;
  private int scalar;
  private Head head;
  private Neck neck;

  public Person(){
    scalar = 1;
    endPointArray = new Point[100];
    for ( int i = 0 ; i < 100 ; i++ ){
      endPointArray[i] = new Point();
    }
    positionArray = new int[4];
    point = new Point(0,0);
    endPointArray[0].x = 5;
    endPointArray[0].y = 5;

    head = new Head(neck, endPointArray, scalar);
    neck = new Neck(body, endPointArray, scalar);
  }

  public void draw(Graphics g){
    head.draw(g);
    neck.draw(g);
  } 
```

头部类内部：

```
// ---------- CONSTANTS. ----------
  private static int Base_Radius = 20;

  // ---------- VARIABLE DECLARATIONS. ----------
  private int radius;
  private int scale; // Scale determines how large the Head will be.
  private Point startingPoint; //Starting Point for the Person and the Head.
  private Point endingPoint; //Ending Point, where the Neck will start from.
  private Point[] endPointArray; // Contains startingPoint in position [0] by this point from Person.
  private Point centre;
  private Neck neck;

  // ----------------------------------------
  // HEAD CREATION.
  // ----------------------------------------
  public Head(Neck neck, Point[] endPointArray, int scale){

    this.neck = neck;
    this.endPointArray = endPointArray;
    this.scale = scale;

    radius = Base_Radius * scale;
    startingPoint = new Point();
    endingPoint = new Point();
    centre = new Point();

    // Copies the value of endPointArray[0] into startingPoint.
    startingPoint.x = endPointArray[0].x;
    startingPoint.y = endPointArray[0].y;

    // Picks the point on the Head where the Neck will start from.
    endingPoint.x = startingPoint.x + radius;
    endingPoint.y = startingPoint.y + ( 2*radius );

    // Assigns the value of the circles centre to the centre point.
    centre.x = startingPoint.x + radius;
    centre.y = startingPoint.y + radius;
    // Puts the value of the endingPoint into the endPointArray[1].
    endPointArray[1].x = endingPoint.x;
    endPointArray[1].y = endingPoint.y;
  }

  // ----------------------------------------
  // DRAW THE HEAD.
  // ----------------------------------------
  public void draw(Graphics g){
    g.drawOval(startingPoint.x, startingPoint.y, radius, radius);
    System.out.println("Radius : " + radius);
    System.out.println("Head Starting Point : ("+startingPoint.x+","+startingPoint.y+").");
    System.out.println("Head Ending Point : ("+endingPoint.x+","+endingPoint.y+").\n");
  } 
```

颈部类内部：

```
// ---------- CONSTANTS. ----------
 private static int Base_Length = 10;

 // ---------- VARIABLE DECLARATIONS. ----------
 private int length;
 private int scale; // Scale determines how large the Head will be.
 private Point anglePoint;
 private Point startingPoint; //Starting Point for the Person and the Head.
 private Point endingPoint; //Ending Point, where the Neck will start from.
 private Point[] endPointArray; // Contains startingPoint in position [0] by this point from Person.
 private Body body;

 // ----------------------------------------
 // NECK CREATION.
 // ----------------------------------------
 public Neck(Body body, Point[] endPointArray, int scale){

  this.endPointArray = endPointArray;
  this.body = body;
  this.scale = scale;

  length = Base_Length * scale;
  startingPoint = new Point();
  endingPoint = new Point();
  anglePoint = new Point();

  // Making the startingPoint equal to the endPointArray[1].
  startingPoint.x = endPointArray[1].x;
  startingPoint.y = endPointArray[1].y;

  // Seting the values of the point where the neck finishes.
  endingPoint.x = startingPoint.x;
  endingPoint.y = startingPoint.y + length;

 }

 // ----------------------------------------
 // DRAW THE HEAD.
 // ----------------------------------------
 public void draw(Graphics g){
    g.drawLine(startingPoint.x, startingPoint.y, endingPoint.x, endingPoint.y);
    System.out.println("Neck Starting Point : ("+startingPoint.x+","+startingPoint.y+").");
    System.out.println("Neck Ending Point : ("+endingPoint.x+","+endingPoint.y+").");
  } 
```

输出：

半径：20

头部起点：（5,5）。

头部终点：(25,45)。

颈部起点：（25,45）。

颈部终点：（25,55）。

头部在 5,5 处绘制在面板中，并且似乎具有正确的半径。脖子漂浮在远离头部的地方。输出看起来正确，但在视觉上它是不正确的。脖子应该是从头部底部向下的一条水平线，我不知道为什么它的行为不像我期望的那样。抱歉，如果这是一个新手问题，但我现在很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:20:48.273

问题是 drawOval 将宽度和高度作为参数，但您传递的是半径。你需要使用：

```
g.drawOval(startingPoint.x, startingPoint.y, 2 * radius, 2 * radius); 
```

[从 API](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics.html#drawOval%28int,%20int,%20int,%20int%29)：

```
public abstract void drawOval(int x, int y, int width, int height)
    Draws the outline of an oval. The result is a circle or ellipse that fits within the rectangle specified by the x, y, width, and height arguments.
    The oval covers an area that is width + 1 pixels wide and height + 1 pixels tall.

Parameters:
    x - the x coordinate of the upper left corner of the oval to be drawn.
    y - the y coordinate of the upper left corner of the oval to be drawn.
    width - the width of the oval to be drawn.
    height - the height of the oval to be drawn. 
```

# asp.net - 在发布时自动压缩 html 和 css？

> ID：11462482
> 
> 赞同：8
> 
> 时间：2012-07-13T00:12:39.797
> 
> 标签：asp.net, asp.net-mvc-3, visual-studio-2010

这个问题我找不到合适的答案。我看到还有其他一些类似的问题被问到，但它们并没有为我提供体面的答案。

在 Visual Studio 中，有没有办法在应用程序发布时自动压缩所有应该压缩的文件（HTML、XML、CSS）？

在服务器上拥有所有额外的空白、评论和其他东西似乎有点无意义和浪费。我一直在寻找不同的扩展和 NuGet 包，但一直找不到任何可以为我提供解决方案的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T00:28:02.973

你想要像[Cassette](http://getcassette.net/)这样的东西。

> Cassette 自动对所有 JavaScript、CoffeeScript、CSS、LESS、Sass 和 HTML 模板进行排序、连接、缩小、缓存和版本化。

使用起来非常简单，只需阅读他们的文档即可。设置最多需要 5 分钟。

要安装，请打开 NuGet 包控制台并输入：

```
Install-Package Cassette.Web 
```

这将负责安装和设置。

如需帮助或建议，请查看他们的 Google 群组：

[http://groups.google.com/group/cassette](http://groups.google.com/group/cassette)

* * *

还可以选择使用 SquishIt。它适用于 MVC3，并且与 Cassette 具有相同的用途。但是，我个人更喜欢Cassette。

[http://lostinthegc.wordpress.com/2012/01/14/using-squishit-in-an-asp-net-mvc3-web-application/](http://lostinthegc.wordpress.com/2012/01/14/using-squishit-in-an-asp-net-mvc3-web-application/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T13:26:18.540

另一个有用的工具是**Chirpy**。我在 2010 年之前将它与 VS 一起使用。您正在使用简单的 XML 文件定义捆绑包。它集成到 VS 中，因此如果任何文件（css、less、js、...）发生更改，缩小版本会在后台自动（重新）呈现。

[http://www.weirdlover.com/2010/05/22/visual-studio-add-in-for-dotless-js-and-css-files/](http://www.weirdlover.com/2010/05/22/visual-studio-add-in-for-dotless-js-and-css-files/)

使用以下示例文件 (.chirp.config) 将给定的 CSS 文件捆绑并缩小为两个名为**external.min.css**和**internal.min.css**的文件：

```
<?xml version="1.0"?>
<root>
  <FileGroup Name="external.css">
    <File Path="css/jquery.ui.core.css" />
    <File Path="css/jquery.ui.theme.css" />
    <File Path="css/jquery.ui.button.css" />
    <File Path="css/default.css" />
  </FileGroup>
  <FileGroup Name="internal.css">
    <File Path="css/jquery.ui.core.css" />
    <File Path="css/jquery.ui.theme.css" />
    <File Path="css/jquery.ui.autocomplete.css" />
    <File Path="css/jquery.ui.progressbar.css" />
    <File Path="css/jquery.ui.accordion.css" />
    <File Path="css/default.css" />
    <File Path="css/datatables.css" />
  </FileGroup>
</root> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T00:39:04.967

有：

*   [http://yuicompressor.codeplex.com/](http://yuicompressor.codeplex.com/)
*   [http://getcassette.net/](http://getcassette.net/)
*   [http://mbcompression.codeplex.com/](http://mbcompression.codeplex.com/)
*   [https://developers.google.com/closure/](https://developers.google.com/closure/) （更多关于 JS）
*   本文中的其他内容[http://thefrontend.wordpress.com/2012/02/02/minify-javascript-and-css-files-when-publishing-web-applications/](http://thefrontend.wordpress.com/2012/02/02/minify-javascript-and-css-files-when-publishing-web-applications/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-14T01:43:46.500

我在 Nuget 上使用[WebMarkupMin](http://webmarkupmin.codeplex.com/)包。它有一个相当不错的 HTML 缩小器，我在我的程序中生成 HTML 输出时使用它：

```
var htmlMinifier = new HtmlMinifier();
var result = htmlMinifier.Minify(myHTML, generateStatistics: false);
Console.WriteLine(result.MinifiedContent); 
```

# .net - 来自通用中间语言 (CIL) 的代码分析

> ID：11462483
> 
> 赞同：0
> 
> 时间：2012-07-13T00:12:41.310
> 
> 标签：.net, optimization, profiler, cil, cci

我想对我的 .NET 代码（它是 .dlls、.exe 和 C# 代码的组合）进行一些相当基本的程序分析。使用 Microsoft 的[Common Compiler Infrastructure](http://ccimetadata.codeplex.com/)，我首先将代码转换为我想要构建调用图的 IL 形式。获得调用图后，是否可以利用一些标准工具来深入了解代码复杂性、识别瓶颈、内存占用等？任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:09:40.897

我认为你想要的几乎是不可能的。对象分配的数量可能会因特定输入而有很大差异。

例如，假设您的程序中有一个方法分配了很多对象，但它只能在某些条件下运行。如果您的分析要准确评估对象分配的计数，则需要知道该方法是否运行。做到这一点的唯一方法是实际评估该条件，这意味着您实际上需要运行该程序。

并且内存占用可能更加困难：它需要您跟踪完整的对象图并模拟 GC。

简而言之：找出程序性能特征的最佳方法是实际运行它。使用静态分析做同样的事情会很困难而且不准确。不要忘记，[使用静态分析是不可能知道程序是否完成的](http://en.wikipedia.org/wiki/Halting_problem)。我觉得你想要的更难。

# css - Yii 框架，未找到 CSS (404)

> ID：11462488
> 
> 赞同：0
> 
> 时间：2012-07-13T00:13:44.947
> 
> 标签：css, iis, yii, less

所以我在一个 linux 机器上安装了 Yii 作为我的开发环境。一切看起来都很好，而且效果很好。然后我使用 IIS 将它部署到生产机器上。由于我无权访问 IIS 管理器，因此我在配置方面的能力非常有限。

在生产机器上，一切正常，包括登录和与数据库交互，但css没有加载，打开firebug后，这显然是由404 not found引起的。

其他 css 文件，即使在同一个文件夹中，也可以正常加载。IIS服务器阻止下载.less文件是否存在某种问题？如果是这样，有没有办法解决它？

我的网站在`http://mysite/index.php/mycontroller/myaction` 并且萤火虫控制台说它正在寻找的 css 在`http://mysite/css/main.less`

布局文件中的代码：

```
<link rel="stylesheet/less" type="text/css" href="<?php echo Yii::app()->request->baseUrl; ?>/css/main.less" />

$baseUrl = Yii::app()->baseUrl; 
$cs = Yii::app()->getClientScript();
$cs->registerScriptFile($baseUrl.'/js/less-1.3.0.min.js'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:19:33.940

尝试这个

> <link rel="stylesheet/less" type="text/css" href="<?php echo Yii::app()->baseUrl; ?>/css/main.less" />

并制作正确的 mime 类型或重命名 `main.less` 为 `main.css`

# xml-rpc - JIRA XML RPC 响应始终相同

> ID：11462490
> 
> 赞同：0
> 
> 时间：2012-07-13T00:13:47.653
> 
> 标签：xml-rpc, jira

我知道我宁愿使用像 Apache 的 XMLRPC 客户端这样的库，但是当我执行以下操作时：

```
 HttpURLConnection con = (HttpURLConnection) new URL(JIRA_URL).openConnection();
    con.setRequestMethod("POST");
    con.setDoOutput(true);
    con.setDoInput(true);
    con.setRequestProperty("Content-Type", "text/xml"); 
```

...然后发送以下 xml

```
<?xml version="1.0" encoding=ISO-8859-1"?>
<methodCall>
  <methodName>jira1.login</methodName>
  <params>
    <param><value><string>someUser</string></value></param>
    <param><value><string>pwd123</string></value></param>
  </params>
</methodCall> 
```

我总是得到：

```
java.lang.NoSuchMethodException:&#32;com.atlassian.jira.rpc.xmlrpc.JiraXmlRpcService.getProjectsNoSchemes() 
```

现在为什么它甚至说我没有要求的方法？此外，该方法确实存在。

# handlebars.js - 将 Handlebars 模板与外部 JSON 结合使用

> ID：11462494
> 
> 赞同：2
> 
> 时间：2012-07-13T00:14:25.410
> 
> 标签：handlebars.js

我觉得自己很愚蠢，但我无法弄清楚这一点。我正在尝试 Handlebars.js，但我无法让它显示来自 Twitter API 的数据。这是我所拥有的：

```
$.ajax({
  url : 'http://twitter.com/statuses/user_timeline/alexlande.json',
  dataType : 'jsonp',
  success : function( tweets ) {

    var source = $('#tweet-template').html();
    var template = Handlebars.compile(source);
    var context = tweets;

    $('#container').html(template(context));
  }
}); 
```

这不会在我的模板中显示任何内容，但以下代码按预期工作：

```
var source = $('#tweet-template').html();
var template = Handlebars.compile(source);
var context = { tweets : [
  { text : "This is a test tweet" },
  { text : "And this is yet another" },
  { text : "And you always need three test tweets, right?" }
]};

$('#container').html(template(context)); 
```

这很简单，我不明白，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T06:51:21.270

在这里，您将一个对象传递给模板函数。

```
var context = { tweets : [
  { text : "This is a test tweet" },
  { text : "And this is yet another" },
  { text : "And you always need three test tweets, right?" }
]};

$('#container').html(template(context)); 
```

但是在不起作用的代码中：

```
 success : function( tweets ) {

    var source = $('#tweet-template').html();
    var template = Handlebars.compile(source);
    var context = tweets;

    $('#container').html(template(context));
  } 
```

**'tweets'**变量不是一个对象，它是一个数组。

我认为那是你做错了。尝试这个：

```
 success : function( tweets ) {

    var source = $('#tweet-template').html();
    var template = Handlebars.compile(source);
    var context = tweets;

    $('#container').html(template({tweets:context}));//wrap in an Object.
  } 
```

发布您的模板也可以提供更多帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-06T12:35:52.133

您必须将字符串转换为对象，因为 Handlebar 模板仅包装对象。

**尝试这个**

```
success : function( tweets ) {
var source = $('#tweet-template').html();
var template = Handlebars.compile(source);

var context = $.parseJSON(tweets); // convert string into object.
$('#container').html(template(context)); //wrap in an Object. 
```

}

# android - 检查时间设置是否大于当前时间？

> ID：11462498
> 
> 赞同：1
> 
> 时间：2012-07-13T00:15:28.577
> 
> 标签：android

时间将保存为字符串，有没有办法将字符串转换为时间，然后检查它是否等于或大于当前时间，或者是否小于当前时间？

对不起，如果这已经被问过很多次了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T00:36:01.650

**这是将字符串转换为日期格式的方法：**

我以为你使用`yyyy-MM-dd HH:mm:ss`格式

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd, HH:mm:ss");
formatter.setLenient(false); 

String oldTime = "2012-07-11 10:55:21";
Date oldDate = formatter.parse(oldTime); 
```

**这就是您获取当前时间的方式**

```
Calendar c = Calendar.getInstance(); 
SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String currentDate = df.format(c.getTime()); 
```

最后，本[教程](http://www.mkyong.com/java/how-to-compare-dates-in-java/)将向您展示如何在 java 中比较日期

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T00:17:59.167

时间是保存为字符串形式的时间戳，还是实际的字符串？如果是时间戳，您始终可以执行以下操作：

```
long timestamp = Long.parseLong(stringTimestamp); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-15T00:24:25.130

其他答案是正确的但已过时。请改用 java.time 类。

# `LocalTime`

[`LocalTime`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html)类代表一天中的时间。

```
LocalTime input = LocalTime.parse( "20:15" ); 
```

要获取当前时间，请指定时区。对于任何给定的时刻，一天中的时间因时区而异。

```
ZoneId zoneId = ZoneId.of( "America/Montreal" );
LocalTime now = LocalTime.now( zoneId ); 
```

您可以使用`equals`、`compareTo`、`isBefore`和`isAfter`方法进行比较。

```
Boolean input isAfterNow = input.isAfter( now ); 
```

您可以使用 24 小时制标准 ISO 8601 格式生成一个字符串来表示这个时间值`HH:MM:SS.SSSSSSSSS`。只要打电话`toString`。

```
String output = now.toString(); 
```

# java.time

java.time框架内置于 Java 8 及更高版本中[。](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)这些类取代了旧的麻烦的日期时间类，例如`java.util.Date`, `.Calendar`, & `java.text.SimpleDateFormat`。

[现在处于维护模式](https://en.wikipedia.org/wiki/Maintenance_mode)的[Joda-Time](http://www.joda.org/joda-time/)项目建议迁移到 java.time。

要了解更多信息，请参阅[Oracle 教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。并在 Stack Overflow 上搜索许多示例和解释。

许多 java.time 功能在 ThreeTen-Backport 中向后移植到 Java 6 和 7，并在[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP)中[进一步](http://www.threeten.org/threetenbp/)适应[Android](https://en.wikipedia.org/wiki/Android_(operating_system))。

ThreeTen [-Extra](http://www.threeten.org/threeten-extra/)项目通过附加类扩展了 java.time。该项目是未来可能添加到 java.time 的试验场。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T00:18:34.157

使用 Java SimpleDateFormat 类将 String 转换为 Date 并从那里进行比较。

```
String raw = "July 13 2012 08:43:12";

Date parsedDate= new SimpleDateFormat("MMMM d yyyy HH:mm:ss", Locale.ENGLISH).parse(raw);

Date currentDate = new Date();

boolean isafter = parsedDate.after(currentDate); 
```

# jquery - 带有 Twitter Bootstrap 的 jQuery 数据表在 Heroku 上的显示方式不同

> ID：11462501
> 
> 赞同：0
> 
> 时间：2012-07-13T00:15:59.370
> 
> 标签：jquery, ruby-on-rails-3, heroku, twitter-bootstrap, datatables

我有一个在 Heroku 上运行的 Rails 3.1 应用程序，我在其中使用带有 jQ​​uery 的 Bootstrap v1.4（我需要使用 Bootstrap 1 - 所以我不能移动到版本 2）数据表。虽然数据表在本地看起来很好，但当我将更改移动到 Heroku 时，它不起作用。

特别是，它没有显示有多少行的文本，也没有在分页后放置换行符/间距。此外，该表对数据进行了正确排序，但分页不起作用（它不显示页码，并且 Next/Previous 链接不执行任何操作）。

在本地，数据表的底部看起来[像这样](https://docs.google.com/open?id=0B8VE4g-Xc6CITHRBNFBDc3Z2M2s)。

然而，在 Heroku 上它看起来像[这样](https://docs.google.com/open?id=0B8VE4g-Xc6CIUVpjOUU1cHVfTFE)。

[我在Datatables 博客](http://www.datatables.net/blog/Twitter_Bootstrap)上实现了代码。

我的布局文件在标题中如下所示：

```
<head>
  <%= stylesheet_link_tag "application" %>
  <%= javascript_include_tag "application"%>

  <%= yield :javascript%>
  <%= yield :script%>

  <script type="text/javascript">
    jQuery.noConflict();
    /* Table initialisation */
    jQuery(document).ready(function() {
      jQuery('#datatable').dataTable( {
        sDom: "<'row'<'span5'l><'span8'f>r>t<'row'<'span4'i><'span8'p>>",
        "sPaginationType": "bootstrap",
        "oLanguage": {
          "sLengthMenu": "_MENU_ records per page"
        }
      } );
    } );
  </script>

</head> 

<table class="bordered-table zebra-striped" id="datatable" >
  <thead>
    <tr>
      <th>Date</th>
      <th>id</th>
      <th>User Name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><%= user.date.strftime("%m/%d/%Y") %></td>
      <td><%= user.id %></td>
      <td><%= user.user_name %></td>
    </tr>
  </tbody>
</table> 
```

应用程序 CSS

```
/*
*= require_self
*= require bootstrap
*/

div.dataTables_length label {
  width: 460px;
  float: left;
  text-align: left;
}

div.dataTables_length select {
  width: 75px;
}

div.dataTables_filter label {
  float: right;
  width: 460px;
}

div.dataTables_info {
  padding-top: 8px;
}

div.dataTables_paginate {
  float: right;
  margin: 0;
}

table {
  margin: 1em 0;
  clear: both;
}

table.dataTable th:active {
  outline: none;
} 
```

应用程序.js

```
//= require jquery.min
//= require jquery-ui.min
//= require jquery_ujs
//= require_self
//= require jquery.dataTables.min
//= require dataTables_bootstrap_plugin 
```

dataTables_bootstrap_plugin.js（使用来自[Datatables 博客](http://www.datatables.net/blog/Twitter_Bootstrap)的代码）

```
 /* Default class modification */
  jQuery.extend( jQuery.fn.dataTableExt.oStdClasses, {
    "sSortAsc": "header headerSortDown",
    "sSortDesc": "header headerSortUp",
    "sSortable": "header"
  } );

  /* API method to get paging information */
  jQuery.fn.dataTableExt.oApi.fnPagingInfo = function ( oSettings )
  {
    return {
      "iStart":         oSettings._iDisplayStart,
      "iEnd":           oSettings.fnDisplayEnd(),
      "iLength":        oSettings._iDisplayLength,
      "iTotal":         oSettings.fnRecordsTotal(),
      "iFilteredTotal": oSettings.fnRecordsDisplay(),
      "iPage":          Math.ceil( oSettings._iDisplayStart / oSettings._iDisplayLength ),
      "iTotalPages":    Math.ceil( oSettings.fnRecordsDisplay() / oSettings._iDisplayLength )
    };
  }

  /* Bootstrap style pagination control */
  jQuery.extend( $.fn.dataTableExt.oPagination, {
    "bootstrap": {
      "fnInit": function( oSettings, nPaging, fnDraw ) {
        var oLang = oSettings.oLanguage.oPaginate;
        var fnClickHandler = function ( e ) {
          e.preventDefault();
          if ( oSettings.oApi._fnPageChange(oSettings, e.data.action) ) {
            fnDraw( oSettings );
          }
        };

        jQuery(nPaging).addClass('pagination').append(
          '<ul>'+
            '<li class="prev disabled"><a href="#">&larr; '+oLang.sPrevious+'</a></li>'+
            '<li class="next disabled"><a href="#">'+oLang.sNext+' &rarr; </a></li>'+
          '</ul>'
        );
        var els = jQuery('a', nPaging);
        jQuery(els[0]).bind( 'click.DT', { action: "previous" }, fnClickHandler );
        jQuery(els[1]).bind( 'click.DT', { action: "next" }, fnClickHandler );
      },

      "fnUpdate": function ( oSettings, fnDraw ) {
        var iListLength = 5;
        var oPaging = oSettings.oInstance.fnPagingInfo();
        var an = oSettings.aanFeatures.p;
        var i, j, sClass, iStart, iEnd, iHalf=Math.floor(iListLength/2);

        if ( oPaging.iTotalPages < iListLength) {
          iStart = 1;
          iEnd = oPaging.iTotalPages;
        }
        else if ( oPaging.iPage <= iHalf ) {
          iStart = 1;
          iEnd = iListLength;
        } else if ( oPaging.iPage >= (oPaging.iTotalPages-iHalf) ) {
          iStart = oPaging.iTotalPages - iListLength + 1;
          iEnd = oPaging.iTotalPages;
        } else {
          iStart = oPaging.iPage - iHalf + 1;
          iEnd = iStart + iListLength - 1;
        }

        for ( i=0, iLen=an.length ; i<iLen ; i++ ) {
          // Remove the middle elements
          jQuery('li:gt(0)', an[i]).filter(':not(:last)').remove();

          // Add the new list items and their event handlers
          for ( j=iStart ; j<=iEnd ; j++ ) {
            sClass = (j==oPaging.iPage+1) ? 'class="active"' : '';
            jQuery('<li '+sClass+'><a href="#">'+j+'</a></li>')
              .insertBefore( $('li:last', an[i])[0] )
              .bind('click', function (e) {
                e.preventDefault();
                oSettings._iDisplayStart = (parseInt($('a', this).text(),10)-1) * oPaging.iLength;
                fnDraw( oSettings );
              } );
          }

          // Add / remove disabled classes from the static elements
          if ( oPaging.iPage === 0 ) {
            jQuery('li:first', an[i]).addClass('disabled');
          } else {
            jQuery('li:first', an[i]).removeClass('disabled');
          }

          if ( oPaging.iPage === oPaging.iTotalPages-1 || oPaging.iTotalPages === 0 ) {
            jQuery('li:last', an[i]).addClass('disabled');
          } else {
            jQuery('li:last', an[i]).removeClass('disabled');
          }
        }
      }
    }
  } ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T22:58:33.873

不确定它是否会有所帮助，但它对我的一张桌子有帮助......

尝试将“显示”添加到表类：

```
<table class="bordered-table zebra-striped display" id="datatable" > 
```

# javascript - AJAX 请求未在 js 中呈现

> ID：11462509
> 
> 赞同：1
> 
> 时间：2012-07-13T00:17:13.840
> 
> 标签：javascript, ajax, json

我有一个网页，当它被加载时，它会发出一个 ajax 请求，以从后端获取一些 JSON [] 格式的数据并将其显示在页面上。该网页是使用 MVC .NET 生成的

从后端加载事件的函数：

```
function initEvents() {
    $.ajax({
        url: '/Work/GetEvents/' + id, type: "GET", dataType: 'json',
        success: function (data) {
            events = data;
        },
        error: function(data) {
            //  Note: hardcoded JSON event in here
            events = hardcodedEvents;
        },
        complete: function(data) {
            // Add events
            for (var i = 0; i < events.length; i++){
                addEvent(events[i]);
            }
        }
    });
} 
```

当我使请求失败时（即更改 url 以指向虚假数据） - 它进入`error: function(data)`- 所以硬编码的 JSON 对象加载正常然后它进入“完整：函数（数据）”并逐个添加事件。

但是，当我使用正确的 URL 并从后端获取事件时，事件似乎来得太晚了；就像它退出该`complete`部分一样。问题是：为什么会发生这种情况？`complete`每当回复回来时，我都想加载。我相信这个有错吗？我该如何解决这个问题，以便将事件从后端加载到页面中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:22:23.700

`events`未在`complete`事件范围内定义。您应该将`events`数据传递给另一个函数，或者只是将`addEvent`逻辑移动到事件处理程序中。例如：

```
function onEventData(data) {
    for (var i = 0; i < data.length; i++){
        addEvent(data[i]);
    }
}

function initEvents() {
    $.ajax({
        url: '/Work/GetEvents/' + id, type: "GET", dataType: 'json',
        success: onEventData, 
        error: function(data) {
            //  Note: hardcoded JSON event in here
            onEventData(hardcodedEvents);
        }
    });
} 
```

请注意，`complete`在请求完成时调用（在执行成功和错误回调之后）。由于您只想为每个请求运行*一次*处理程序，因此在这种情况下您不应该使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T00:23:09.647

它看起来像一个**范围**问题。将您的 complete() 代码移动到一个单独的函数中，并从 success() 和 error() 中调用它：

```
function renderEvents(data) {
    // Add events
    for (var i = 0; i < data.length; i++){
        addEvent(data[i]);
    }
}

function initEvents() {
    $.ajax({
        url: '/Work/GetEvents/' + id, type: "GET", dataType: 'json',
        success: function (data) {
            renderEvents(data);
        },
        error: function(data) {
            //  Note: hardcoded JSON event in here
            renderEvents(hardcodedEvents);
        }
    });
} 
```

编辑：修复了 renderEvents() 中的变量名称。

# asp.net - ASP.net 构建错误：标识符“__ASP”不符合 CLS

> ID：11462515
> 
> 赞同：0
> 
> 时间：2012-07-13T00:18:33.707
> 
> 标签：asp.net, cls-compliant

构建 ASP.net 网站时出现错误：

> 标识符“__ASP”不符合 CLS

我的代码中没有标识符`__ASP`。

> 我知道*为什么* `__ASP`不符合 CLS（它以 开头`_`）。我需要弄清楚谁在发出它，以及如何：
> 
> *   将其更改为不以下划线开头，或
> *   将其设为私有
> 
> 我也可以停止将程序集标记为 CLSCompliant - 但我不会

警告没有列出任何有用的文件：

```
4d48b87d\63ccbbb9\App_Code.x0tl4q2v.49.cs line 15 
```

显然，这不是我创建的文件。如何识别此`__ASP`标识符的位置，并将其删除或设为私有？

* * *

我不是唯一遇到 __ASP 问题的人：

*   [删除“警告 CS3008：标识符 '__ASP' 不符合 CLS”警告](http://www.fishofprey.com/2009/02/removing-warning-cs3008-identifier-asp.html)
*   [警告 CS3008：标识符“__ASP”不符合 CLS](http://forums.asp.net/t/1201507.aspx/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:14:06.557

“__ASP”文件由运行时 ASP.NET 编译器创建，该编译器将 *.aspx、*.ascx、*.master 文件转换为从 CodeBehind 类（或在 MVC 中，从 ViewPage 类）派生的 .NET 类。编译器构建系统还在`App_Code`运行时编译您的文件（而不是从 IDE 中编译它们）。

但是，除非您已将 [CLSCompliant] 属性添加到某处的程序集，否则不应在 ASP.NET 应用程序中收到 CLS 兼容消息。你有`AssemblyInfo.cs`文件吗，如果有，在哪里？

编辑：

我刚刚看到您说您的程序集被标记为 CLSCompliant。嗯，那是你的问题。您需要删除它，因为 ASP.NET 的批处理编译文件不兼容：它们不需要。终端程序集（即那些未被其他程序集引用的程序集，通常因为它们是“应用程序”程序集）不需要符合 CLSCompliant。

你为什么说你“不会”删除该属性？没有它并不是不合适的。

# ios - Multiview：在iOS SDK中返回第一个视图时清除第二个视图的状态

> ID：11462519
> 
> 赞同：0
> 
> 时间：2012-07-13T00:18:46.607
> 
> 标签：ios, sdk

我正在编写一个有 2 个视图的程序。从主视图，即 FirstView，我通过以下方式移至第二个视图：

```
-(IBAction)switchToSecondView:(id)sender{

    SecondViewController *screen=[[SecondViewController alloc] initWithNibName:nil bundle:nil];
    screen.modalTransitionStyle=UIModalTransitionStyleCoverVertical;
    [self presentModalViewController:screen animated:YES];
    [screen release];
} 
```

在第二个视图中，我有一个按钮和一个标签。SecondView 是一个简单的活动，其 Label 的值从 0 开始。每次单击一个按钮都会导致 Label 增加 1。所以我对 SecondView 所做的是单击按钮将 Label 的新值设置为 5。

然后我通过调用返回到 FirstView：

```
[self dismissModalViewControllerAnimated:YES]; 
```

那么结束，我又回到了SecondView，但是Label的值还是5，这说明SecondView的状态还不清楚。

离开时是否有清除所有第二视图的状态？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:00:37.693

当您说文本视图时，您的意思是 UILabel 吗？

如果是这样，那么这将实现您所追求的 -

```
 -(void)viewWillDisappear:(BOOL)animated
{
    nameOfUILabel.text = @"";
    [navController viewWillDisappear:animated];
} 
```

这会将 UILabel 的文本值设置为空白字符串

# java - 当 EditText A 有字母时显示 EditText B

> ID：11462520
> 
> 赞同：0
> 
> 时间：2012-07-13T00:19:03.847
> 
> 标签：java, android, android-edittext, textwatcher

所有- 我试图隐藏 EditText B,C 直到 EditText A 中至少有一个字符。我尝试过使用文本观察器...

```
EditText editText = (EditText) findViewById(R.id.p1); //A
    final EditText editText$ = (EditText) findViewById(R.id.p1$); //B
    final TextView $ = (TextView) findViewById(R.id.$); //C

    editText$.setVisibility(View.INVISIBLE);
    $.setVisibility(View.INVISIBLE);

    editText.addTextChangedListener(new TextWatcher(){

        public void afterTextChanged(Editable arg0) {
        }
        public void beforeTextChanged(CharSequence s, int start,
                int count, int after) {
            }
        public void onTextChanged(CharSequence s, int start,
                int before, int count) {

            if (s.toString() != "" ) {                  
                editText$.setVisibility(View.VISIBLE);
                $.setVisibility(View.VISIBLE);
            }
            else {
                editText$.setVisibility(View.INVISIBLE);
                $.setVisibility(View.INVISIBLE);            
            }
        }
    }); 
```

但是 EditText B（和 C）要么总是可见，要么永远不可见，这取决于天气，或者我`editText$.setVisibility(View.INVISIBLE); $.setVisibility(View.INVISIBLE);`在 TextWatcher 之前声明。有人可以告诉我我做错了什么吗？感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:22:56.673

尝试使用 equals 方法来比较字符串而不是 java 运算符，如下所示：

```
if (s.toString().equals("") == false ) { 
```

您拥有的另一个选择是测试长度而不是等于`""`.

```
if (s.toString().length() > 0) { 
```

# python - 在 Solaris 10 上构建 msgpack-python - 使用 仅在 c99 编译环境中有效

> ID：11462527
> 
> 赞同：0
> 
> 时间：2012-07-13T00:19:56.120
> 
> 标签：python, solaris, cc, msgpack, stdbool

我正在尝试使用 Sun 编译器在 Solaris 上构建 python 模块[msgpack-python](http://pypi.python.org/pypi/msgpack-python/)，并且在 python ./setup.py 构建期间收到此错误：

```
/opt/SUNWspro/bin/cc -DNDEBUG -O -xO3 -m32 -xarch=sparc -I/opt/csw/include -xcode=pic32 -I/opt/csw/include/python2.6 -c msgpack/_msgpack.c -o build/temp.solaris-2.10-sun4v-2.6/msgpack/_msgpack.o
"/usr/include/stdbool.h", line 42: #error: "Use of <stdbool.h> is valid only in a c99 compilation environment." 
```

我还尝试通过添加'-std=c99' 来进行编译，如下所述：[Node.JS on Solaris](https://stackoverflow.com/questions/5363042/building-node-js-on-solaris-use-of-stdbool-h-is-valid-only-in-a-c99-compilat)

但最终得到：

cc: 警告：非法选项 -d=c99

任何人都对这个 stdbool.h 错误是什么以及如何解决它有任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:26:44.363

我不知道您正在运行哪个版本的 Sun Studio（这对于它是否支持您正在使用的 Solaris 10 版本很重要），但要获得 C99 模式，您可以执行以下两项操作之一：

1.  运行命令`/opt/SUNWspro/bin/c99`- 这是一个包装器可执行文件，它将以 C99 模式启动 Sun CC 编译器。

2.  [`-xc99`使用标志](http://docs.oracle.com/cd/E19205-01/819-5265/bjate/index.html)运行您的命令- 这也将在编译器中触发 C99 模式：

    `/opt/SUNWspro/bin/cc -xc99 ...`

或者，您也可以使用 GCC 编译器（通常安装在 中`/usr/sfw/bin/gcc`）来编译这个 C 模块，它是支持`-std=c99`flag 选项的编译器。如果我记得我的 Solaris 工作正常，那么`gcc`Solaris 包含的将使用 Sun 的`ld`并链接`libc.so`到系统上的正常链接`cc`（对于每个编译器的 C++ 版本根本不正确）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:07:17.727

尝试导出以下内容：

```
export CFLAGS="-D_XOPEN_SOURCE=500 -D__EXTENSIONS__ -features=extensions" 
```

然后再次运行`configure`脚本，重新编译。我认为它不再需要 C99 合规性。大多数 OpenSource SW 需要此定义来切换系统头文件的更多 OpenSource 行为。

更好的使用[pkgsrc](http://pkgsrc.org/)来编译 OS 软件。它会自动完成这些技巧。

# c# - 将数据添加到数据库以及如何使其正确

> ID：11462529
> 
> 赞同：0
> 
> 时间：2012-07-13T00:20:29.670
> 
> 标签：c#, sql, optimization

我一直在写一些简单的 c#，我通常使用相同的类和函数来插入和获取数据库中的数据。

例如，这是我的功能：

```
 public bool insert_and_ConfirmSQL(String Query, String comments)
    {
        bool success = false;
        NpgsqlCommand cmd = new NpgsqlCommand();
        NpgsqlConnection mycon = new NpgsqlConnection();
        string connstring = String.Format("Server={0};Port={1}; User Id={2};Password={3};Database={4};timeout=1000;CommandTimeout=120;", tbHost, tbPort, tbUser, tbPass, tbDataBaseName);
        mycon.ConnectionString = connstring;
        cmd = mycon.CreateCommand();
        cmd.CommandText = Query;
        mycon.Open();

        int temp = 0;
        try
        {
            temp = cmd.ExecuteNonQuery();
            success = true;
        }
        catch
        {
           if (mycon.State == ConnectionState.Open)
            {
                mycon.Close();
            }
        }

        return success;
    } 
```

现在我知道这个查询对于注入是不安全的，我需要使用准备好的语句。但是我不明白当我的每个查询都不同时我应该如何处理这个问题？是否有一个“通用”功能可以插入任何查询并“准备”它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T00:26:04.350

我建议您以这种方式使用它，因为 using 语句负责处理连接和命令

另外为了防止sqlinjection，请使用SqlParameters（在Npgsl中等效）来传递值

public void insert_and_ConfirmSQL（字符串查询，字符串注释）{

```
 using(NpgsqlConnection mycon = new NpgsqlConnection())
      {
        using(NpgsqlCommand cmd = mycon.CreateCommand())
        {
              string connstring = String.Format("Server={0};Port={1}; User Id={2};Password={3};Database={4};timeout=1000;CommandTimeout=120;", tbHost, tbPort, tbUser, tbPass, tbDataBaseName);
              mycon.ConnectionString = connstring;
              cmd = mycon.CreateCommand();
             cmd.CommandText = Query;
              mycon.Open();

            cmd.ExecuteNonQuery();
       }
     } 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T00:54:47.617

如果您正在寻找一种更通用的执行插入/更新/删除的方式，也许以下是合适的（使用 SqlClient 但很容易适应 NpgsqlClient）：

```
public static object ExecuteActionProcedure(System.Data.CommandType CommandType, string CommandText, string[] Parameters, object[] Values)
{
  try
  {
    using (SqlConnection con = new SqlConnection())
    {
      con.ConnectionString = ConfigurationManager.ConnectionStrings["YourConnection"].ConnectionString;
      con.Open();
      using (SqlCommand cmd = new SqlCommand())
      {

        cmd.Connection = con;
        cmd.CommandType = CommandType;
        cmd.CommandText = CommandText;
        SqlParameter result = new SqlParameter();
        result.ParameterName = "ResultValue";
        result.Direction = ParameterDirection.ReturnValue;
        cmd.Parameters.Add(result);
        for (int i = 0; i < Parameters.Length; i++)
        {
          cmd.Parameters.AddWithValue(Parameters[i], Values[i]);
        }
        cmd.ExecuteNonQuery();
        return (int)result.Value;
      }
    }
  }
    }
  }
  catch (Exception ex)
  {
    throw new Exception(ex.Message);
    return null;
  }
} 
```

调用语句：

```
ExecuteActionProcedure(CommandType.StoredProcedure, "aspnet_SaveFullName", new string[] { "UserName", "FullName" }, new object[] { model.UserName, model.FullName }); 
```

请注意，您可以向此方法传递一个包含参数以及存储过程的 SQL 字符串。

# javascript - 如何在猫鼬中扩展查询对象

> ID：11462530
> 
> 赞同：1
> 
> 时间：2012-07-13T00:20:40.543
> 
> 标签：javascript, node.js, prototype, mongoose

我正在尝试向名为“paginate”的 Query 对象添加一个链方法。如果我将它添加到 query.js，我可以毫无问题地使用它。但是，修改其中一个核心文件并不是一个好主意。

我正在使用经过一些修改找到的这段代码，并希望它成为 Query 原型的一部分，但我没有成功让它在 Query.js 中运行。

我怎样才能做到这一点？是否有任何关于如何通过模块扩展这些核心文件的文档？我还没有找到任何适合我的东西。

```
mongoose.Query.prototype.paginate = function(page, limit, cb) {
  var model, query, skipFrom;
  if (page == null) {
    page = 1;
  }
  if (limit == null) {
    limit = 10;
  }
  query = this;
  model = this.model;
  skipFrom = (page * limit) - limit;
  query = query.skip(skipFrom).limit(limit);
  if (cb) {
    return query.run(function(err, docs) {
      if (err) {
        return cb(err, null, null);
      } else {
        return model.count(query._conditions, function(err, total) {
          return cb(null, total, docs);
        });
      }
    });
  } else {
    throw new Error("pagination needs a callback as the third argument.");
  }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T16:44:17.163

事实证明这比我预期的要容易得多。这就是我所做的并且有效：

创建了一个 paginate.js 文件：

```
mongoose = require('mongoose');

mongoose.Query.prototype.paginate = function(aPageStart, aLimit, aCallback) {
  var model, query;

  if (aLimit == null) {
    aLimit = 10;
  }
  query = this;
  model = this.model;
  query = query.skip(aPageStart).limit(aLimit);
  if (aCallback) {
    return query.run(function(aError, aDocs) {
      if (aError) {
        return aCallback(aError, null, null);
      } else {
        return model.count(query._conditions, function(aError, aTotal) {
          return aCallback(null, aTotal, aDocs);
        });
      }
    });
  } else {
    throw new Error("pagination needs a callback as the third argument.");
  }
}; 
```

并且只在需要的地方需要它（在这种情况下在我的模型中）。

然后您可以将此方法称为链的最后一个。

干杯，

马科斯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:13:55.427

也许你可以使用这个模块或者看看他们是如何实现的：[mongoose-paginate](https://github.com/edwardhotchkiss/mongoose-paginate/)

另一种解决方案是为您的架构创建一个方法，如下所示：

```
Schema.statics.paginate = (page, limit, cb) ->
   ...
  return query;
// or
Schema.statics.paginate = (query, page, limit, cb) ->
   ...
  return query.exec(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-04T19:35:40.157

扩展 Mongoose 模式的 API 是`plugin()`. 定义一个简单的插件函数，如下所示：

```
function paginatePlugin(schema) {
  schema.query.paginate = function({ start, limit = 10 }) {
    return this.skip(start).limit(limit);
  };
} 
```

然后将其注入您的模型中，例如：

```
fooSchema.plugin(paginatePlugin); 
```

然后使用它：

```
await Foo.find().paginate({ start: 10, limit: 100 }); 
```

这也允许您编写查询扩展：

```
await Foo
  .find()
  .where({ bar: { $gt: 1 } })
  .sort({ bar: 1 })
  .paginate({ start: 10, limit: 100 }); 
```

# c++ - 使用 C++ 完成文件名

> ID：11462536
> 
> 赞同：1
> 
> 时间：2012-07-13T00:21:32.143
> 
> 标签：c++, windows

在python中，如果要打开所有以“apl_”开头的文件，只需打开“apl*”即可。你如何在 C++ 中做类似的事情。

假设我有一个文件，我知道它以“llll”开头，但有未知的后缀。我该如何打开它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:34:03.480

1.  打开目录
2.  遍历目录中的文件列表
3.  打开名称与您的模式匹配的文件。

[C：如何获取Windows目录下的文件列表？](https://stackoverflow.com/questions/6295156/c-how-to-obtain-a-list-of-files-in-windows-directory)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T00:41:09.083

您不能只在 Python 中“简单地打开“apl*””。如果你试试这个：

```
open("apl*") 
```

你会得到一个 IOError——除非你碰巧有一个文件名是“apl*”。

在 Python 中有两种基本方法可以做到这一点，这两种方法都可以翻译成 C++。

第一的：

```
[open(f) for f in glob.glob("apl*")] 
```

在大多数非 Windows 平台上，`glob.glob`直接转换为 POSIX 函数`glob`。不幸的是，在 Windows 上，它被称为`_glob`，并不存在于所有版本的 Windows 中，并且有严重的限制。因此，您想使用[FindFirstFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)和[FindNextFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364428%28v=vs.85%29.aspx)。链接页面上给出的示例应该向您展示如何做到这一点。

第二：

```
[open(f) for f in os.listdir(".") if f.startswith("apl")] 
```

您可以再次使用 FindFirstFile/FindNextFile 来迭代整个目录，然后过滤 data->cFileName 是否以“apl”开头，但您也可以使用更简洁（更便携）的 boost::filesystem： :directory_iterator。

# symfony1 - Capifony Deploy 需要内部供应商文件的密码

> ID：11462547
> 
> 赞同：0
> 
> 时间：2012-07-13T00:23:40.107
> 
> 标签：symfony1, debian, capistrano, capifony, composer-php

我正在通过 Capifony 将 Symfony 2 应用程序部署到 Debian 服务器。该应用程序的主存储库是私有的，但我还通过 composer install 包括了一些私有存储库。这导致了问题。

主存储库克隆得很好。我有公钥设置、带有`scm:passphrase:`定义的密码设置和以下行以启用密码的自动输入：

```
default_run_options[:pty] = true 
```

当我安装供应商时，项目所需的私有存储库需要密码 - 因为我已经拥有允许连接到我的存储库的私钥/公钥。它返回以下内容：

```
** [out :: 106.187.50.216] Cloning master
** [out :: 106.187.50.216] Enter passphrase for key '/home/deploy/.ssh/id_rsa': 
```

当这出现时，我无法输入任何密码，因为它只是一个`out`. 我会认为它共享密码，但似乎`composer.phar install`没有使用相同的 Capifony 设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:41:31.430

作为一种解决方法，我猜您应该使用无密码密钥进行部署。您可以将其设置为 github 上的部署密钥或创建一个新帐户，该帐户对您需要的少数存储库具有只读访问权限。这样，您就可以获得便利，而不会因丢失该密钥而带来太大风险。

现在对于一个适当的解决方案，我不确定需要什么。您可以在 composer 上打开一个[问题](https://github.com/composer/composer)，我们在那里进一步讨论。基本上问题是作曲家使用普通的 git clone 命令，没什么特别的，我想 capifony 在初始项目结帐时会做一些特殊的事情来解锁密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:57:01.307

Capistrano/capifony 实时处理输出。如果 Git 提示输入密码，它会自动提供用户的密码，与密码短语相同。这是 Capistrano 的一部分，您可以在 Capistrano 的 Git 类中看到：[https](https://github.com/capistrano/capistrano/blob/master/lib/capistrano/recipes/deploy/scm/git.rb#L255) ://github.com/capistrano/capistrano/blob/master/lib/capistrano/recipes/deploy/scm/git.rb#L255 。

我认为您可以使用无密码策略，也可以使用 ssh-agent。

# objective-c - 存储 UILocalNotifications 以便于处理

> ID：11462548
> 
> 赞同：1
> 
> 时间：2012-07-13T00:23:40.573
> 
> 标签：objective-c, ios, notifications, uilocalnotification

我正在开发一个应用程序，该应用程序根据用户设置的偏好提醒用户采取的行动。他们可以设置开始日期和结束日期（结束日期是可选的）。然后他们可以设置频率：

*   日常的
*   周刊
*   每 1-9 天
*   每 1-9 周
*   在每月的某些日子
*   具体日期

现在，我需要能够检索即将到来和过去的提醒列表以显示在 UITableView 中。如果用户忽略通知（不要在应用程序中检查提醒），那么我需要能够跟踪这一点，以便以后进行数学计算。

首先，我的想法是让 UITableView 只查看提醒集并找出在任何一天会触发哪些通知。

这需要对日期进行大量计算，并且不允许我知道用户是否忽略了提醒。

我的下一个（也是当前的）想法是存储一个数据库表（如下所示）并在未来一个月内输入提醒。任何未设置为响应的行都意味着他们忽略了它。这也将使 UITableView 变得非常简单。

有没有更好的方法来做到这一点？我应该提前多久创建数据库行？如果他们更改了提醒，我可能不得不在行上调用 DELETE 并重新输入它们；就 id 而言，这可以有很高的数字吗？

```
reminderLogs
-------------
id
reminderID
actionReceived
timestampShould
timestampTaken
comments 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:05:03.603

这听起来像是使用 Core Data 的好地方。设置星号可能会很痛苦，尤其是当您不熟悉它时，但是一旦您这样做了，您将拥有一个（相对）易于查询的持久数据存储。您还可以更改存储对象的属性，而无需删除和重新创建它们，因此可以在用户添加或修改任务时轻松添加或修改数据库中的记录。如果您需要显示列表或对存储的数据运行任何计算，正确的查询将提取您需要知道的所有内容。

Web 上有许多 Core Data 教程，但您不妨从[Apple 的示例](http://developer.apple.com/library/ios/#DOCUMENTATION/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:18:51.887

首先，+1 给 Husker Jeff 和他使用 Core Data 的建议。它应该是您构建通知规则的持久性方法。

我目前正在研究负责定期通知的服务器端组件。查看您对重复事件类型的描述， UILocalNotification 不够灵活，无法仅使用 repeatInterval 属性。

我强烈建议阅读以下内容：

1.  [Martin Fowler 的重复事件模式。](http://martinfowler.com/apsupp/recurring.pdf)
2.  [IceCube，一个用 Ruby 开发的循环事件库，用于处理循环事件和时间表达式。它应该为您提供如何实现对象图的好主意。](http://seejohnrun.github.com/ice_cube/)
3.  [关于构建 iCal 友好数据库模式的 Stack Overflow 主题。](https://stackoverflow.com/questions/1054201/ical-field-list-for-database-schema-based-on-ical-standard)

我建议尽可能依赖 UILocalNotification 的 repeatInterval。您可能希望将诸如weeklyRule 和dailyRule 之类的事情委托给UILocalNotification 的重复间隔。

对于像每 n 天和每 n 周这样的规则，您可能需要为它们创建自己的时间表达式和规则。

# java - OOP 中的设计建议

> ID：11462550
> 
> 赞同：0
> 
> 时间：2012-07-13T00:23:47.883
> 
> 标签：java, design-patterns, domain-driven-design, ooad

问题

1.  一个`Organization`可以有 1 个或多个`Credential`'s。
2.  每个部署环境（如 DEV、TEST、UAT、PROD 等）都可以有 1 个凭据。
3.  Credential 可以用于 UI 或 App 到 App 通信。

此外，用户可以指示所有环境中的凭证都是相同的。或者，用户可以指示跨环境的用户名相同，但他想为每个环境提供不同的密码。

如您所见，有两个维度可以限定凭证，即端点类型和环境。想知道如何在 OOP 世界中建模这种关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:29:41.217

下图显示了一个可能的解决方案 ![](../Images/b4da54e7cf060e15f4b79cc8143d9b18.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T07:13:31.423

我建议这样做： ![UML](../Images/a5f0d0601039231a84904c4d12158bed.png)

感谢@sergiofbsilva 提供的酷工具。

# mysql - 来自同一个表的多个wheres的MYSQL查询

> ID：11462555
> 
> 赞同：0
> 
> 时间：2012-07-13T00:24:38.403
> 
> 标签：mysql, union, left-join, where-clause, multiple-tables

所以我有两个表工作和联系人，我试图做一个显示工作的行，显示工作地点和分配的技术。现在联系人可以是技术人员或工作地点，我希望保持这种方式，但如果需要可以更改。有什么好方法可以做到这一点。

添加显示 location_label 的第二个 where 子句的正确方法是什么

```
SELECT 
  jobs.job_id, contacts.location_label, contacts.tech_label
FROM 
  jobs
LEFT JOIN 
  contacts ON jobs.tech_id = contacts.contact_id 
```

工作表

```
Field   Type    Null    Key     Default     Extra
job_id  int(6)  NO  PRI     NULL    auto_increment   
location_id     int(5)  NO      NULL         
tech_id     int(5)  YES         0        
creator_id  varchar(9)  NO      NULL     
creation    timestamp   NO      CURRENT_TIMESTAMP    
service_requested   varchar(400)    YES         NULL     
service_performed   varchar(400)    YES         NULL     
status_id   int(5)  NO      NULL 
```

联系人表

```
Field   Type    Null    Key     Default     Extra
contact_id  int(9)  NO  PRI     NULL    auto_increment    
location_label  varchar(30)     YES         NULL     
address     varchar(20)     YES         NULL     
city    varchar(15)     YES         NULL     
state   varchar(2)  YES         NULL     
zip     int(10)     YES         NULL     
phone   int(11)     NO      NULL         
user_level  int(2)  YES         NULL     
first_name  varchar(10)     YES         NULL     
last_name   varchar(10)     YES         NULL             
type_tech   tinyint(1)  YES         NULL     
type_location   tinyint(1)  YES         NULL     
type_admin  tinyint(1)  YES         NULL     
tech_label  varchar(20)     YES         NULL     
creator_id  int(9)  YES         NULL 
```

我正在寻找行输出为 jobs.job_id、contacts.location_label、contacts.tech_label

Contacts.location_label 将是工作的位置 (jobs.location_id) contacts.tech_label 将是分配工作的技术人员 (jobs.tech_id)

我发现了一些其他有类似问题的线程，但它们似乎都不能正常工作，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:55:14.123

您必须加入联系人表两次，一次用于技术，一次用于位置。

```
SELECT J.job_id, 
       L.location_label, 
       T.tech_label
  FROM jobs J
  LEFT JOIN contacts T ON J.tech_id = T.contact_id
  LEFT JOIN contacts L ON J.location_id = L.contact_id 
```

# java - 使用 url 加载 imaeview 的任何更快的方法

> ID：11462559
> 
> 赞同：0
> 
> 时间：2012-07-13T00:25:21.110
> 
> 标签：java, android, bitmap, android-imageview

我使用在 imageview 中加载图像

```
 try {
                Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new java.net.URL(SplashItems.get(position).get("imageUrl")).getContent());
                 ImageViewObject.setImageBitmap(bitmap); 

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

但它是如此缓慢，任何更快的方法来做到这一点

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:35:10.153

我建议使用`AsyncTask`加载。这样您的应用程序仍然可以运行，并且用户可以在图像加载时进行交互。我还发现它可以大大减少下载时间，因为下载是在后台线程上完成的，并且能够专注于此。以下是帮助您入门的链接：

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

本文还讨论了处理程序，它也可能对您有所帮助。

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:00:12.060

您可以查看示例中的类[ImageDownloader](http://code.google.com/p/googletv-video-player/source/browse/src/com/example/tv/videoplayer/ImageDownloader.java?r=c5ce73eef28e2b59891ce43af8fb668d5af0f85b)`GoogleTV`。他们使用 asynctask 在后台下载图像并实现缓存以提高性能。[Android 开发者博客Multithreading For Performance](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)的另一个教程

以及关于 SO 的类似问题：[Loading an image from the Web with Asynctask](https://stackoverflow.com/questions/3090650/android-loading-an-image-from-the-web-with-asynctask)。最后一个是[UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)。您可以检查性能并选择最佳的。我自己经常用`ImageDownloader`

# git - 关闭 Git 的 https 验证

> ID：11462561
> 
> 赞同：2
> 
> 时间：2012-07-13T00:25:29.950
> 
> 标签：git

我正在测试一个使用自签名 Apache 证书托管的内部 git 存储库。

不幸的是，我无法在没有这样的错误的情况下推动它

> 错误：gnutls_handshake() 失败：已收到 TLS 警告警报。访问 https://*网址时*

我进行了以下设置：

在 .git/config

```
[http]
    sslverify = false 
```

在环境变量世界中：

```
declare -x CURLOPT_SSL_VERIFYHOST="0"
declare -x GIT_CURL_VERBOSE="1"
declare -x GIT_SSL_NO_VERIFY="true" 
```

还有什么可能是我的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-19T11:30:35.113

就像有同样问题的人的参考：这很可能是由于 git 在旧的 Debian 和 Ubuntu 发行版上使用 libcurl-gnutls3 版本 < 7.21.7 造成的。

库中存在一个错误，至少在通过 HTTP 代理访问 HTTPS 网站（您自己的本地代理或远程反向代理或政府的透明代理）时，它会出现异常行为。这个问题没有说明作者是否使用了代理，但我强烈怀疑如果不一样，问题可能是相关的。见[https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=559371](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=559371)

修复方法是升级到支持固定 libcurl-gnutls3 版本的新发行版，自行重建，重建 git 以使用 libcurl-openssl（请参阅[https://askubuntu.com/questions/186847/error-gnutls-handshake- failed](https://askubuntu.com/questions/186847/error-gnutls-handshake-falied) ) 或...避免使用 https

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:05:20.473

可能是您的 apache VirtualHost 中的 ServerName 不正确。它应该对应于证书服务器名称。要找出 TLS 警报的原因，我建议运行 wireshark。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T01:38:07.107

让 git 改用 HTTPS：

假设您的自签名证书是：

```
/etc/ssl/certs/selfsigned.pem 
```

请执行下列操作：

```
openssl x509 -in /etc/ssl/certs/selfsigned.pem -out ~/certs/selfsigned.crt
git config --global http.sslcainfo ~/certs/selfsigned.crt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-28T13:49:42.687

我遇到了类似的问题。在虚拟主机的 apache 配置中填充服务器名称后，这有效。虽然 curl --cacert https..var.git 有效，但 git clone https:..var.git 抛出了错误 -

> 克隆到 'var'... 错误：gnutls_handshake() 失败：已收到 TLS 警告警报。访问[https://foo.server/var.git/info/refs 时](https://foo.server/var.git/info/refs) 致命：HTTP 请求失败

你应该做的另一件事是在你做完之后

> cd /var/www/var (var 是文档根目录)
> 
> ```
> sudo git clone --bare ~foo/var
> sudo git update-server-info 
> ```

# java - 在文本文件中指定 java.lang.Class 名称？

> ID：11462564
> 
> 赞同：1
> 
> 时间：2012-07-13T00:25:53.020
> 
> 标签：java, android, class, file-io, collaboration

我们在工作中成立了一个非正式的 Android 开发小组。我们每个人都将向单个应用程序添加半独立的活动。昨天闲逛，我能想出的最好的办法是让我们的主要活动成为一个 GridView，并允许开发人员通过硬编码数组中的一个元素在主要活动中“注册”他们的活动 '行动项目'：

```
 private final ActionItem[] actionItems = {
        new ActionItem(R.drawable.dms_to_dd, "DMS to/from DD", DegreeConverter.class)
    }; 
```

ActionItem 就是这样：

```
public class ActionItem {

    private int drawingID;
    private String label;
    private java.lang.Class<?> activity;

    public ActionItem(int drawingID, String label, Class<?> activity) {
        this.drawingID = drawingID;
        this.label     = label;
        this.activity  = activity;
    }

    public int getDrawingID() {
        return drawingID;
    }
    public String getLabel() {
        return label;
    }
    public Class<?> getActivity() {
        return activity;
    }   
} 
```

为了让人们开始，我创建了第一个简单的 Activity/ActionItem，它的注册如上所示。

我们希望在网格景观中的图像和标签的字符串中的图像以及最重要的是，在选择相应的GridView项时，将通过意图启动的类。

所有这些都有效。但是，如果人们不必编辑主要活动来完成这项工作，那就太好了。我希望我们可以在填充 GridView 之前从文本文件中读取相同的信息（对于 ActionItem）。drawable id 和 String 没有问题。所以主要问题是：我们如何在文本文件中指定该类？

有没有办法从名称（String/char []）创建一个 java.lang.Class 实例？有没有更好的方法来做我上面描述的事情？

如果有帮助，很乐意提供更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:31:15.053

您是否尝试过：

```
 Class.forName("com.something.MyClass") 
```

[http://developer.android.com/reference/java/lang/Class.html#forName(java.lang.String](http://developer.android.com/reference/java/lang/Class.html#forName(java.lang.String) )

您可以从文件中读取名称，并在 forName 方法中设置字符串。

因此，您可以执行以下操作：

```
 public ActionItem(int drawingID, String label, String activityClassName) {
    this.drawingID = drawingID;
    this.label     = label;
    this.activity  = Class.forName(activityClassName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:31:27.163

使用反射，下面的示例：

```
Class theClass  = Class.forName("YourClass");
YourClass instancevariable = (YourClass)theClass.newInstance(); 
```

# xpath - 何时必须将 XPath 属性设置为 XML DOM 对象？

> ID：11462566
> 
> 赞同：3
> 
> 时间：2012-07-13T00:25:59.823
> 
> 标签：xpath, vbscript, msxml

例如：

```
Set objXML = CreateObject("Microsoft.XMLDOM")

objXML.async = False
objXML.validateOnParse = False
objXML.resolveExternals = False
objXML.load("http://www.w3schools.com/dom/books.xml")

'objXML.setProperty "SelectionLanguage", "XPath"

For Each x In objXML.selectNodes("//book[@category='cooking' and @category='children']")
    WScript.Echo x.text
Next

For Each y In objXML.selectNodes("//book[position()<3]")
    WScript.Echo y.text
Next 
```

当`objXML.setProperty "SelectionLanguage", "XPath"`被注释时，第一个 xpath 表达式（x 对象）返回有效，但第二个 xpath 表达式（y 对象）引发错误：

```
msxml3.dll (14, 1) : Unknown method.

//book[-->position()<--<3] 
```

如果我取消注释`objXML.setProperty "SelectionLanguage", "XPath"`这两个表达式都有效。

我的问题是何时必须显式设置 XPath 属性，或者在不设置此属性的情况下执行哪种表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T01:42:54.373

对于旧版本的 MSXML，默认语言不是 XPath。
您已经使用旧的“与版​​本无关的 ProgID”创建了 DomDocument 实例。`Microsoft.XMLDOM`对应 MSXML 3.0（如果有）作为支持独立 ProgID 的最后一个 MSXML 版本。
您可以像这样确定默认选择语言：

```
WScript.Echo objXML.getProperty("SelectionLanguage") 
```

必须返回`XSLPattern`选择语言不支持的方法，如`position()`.
`XPath`是 MSXML 4.0 及更高版本的默认选择语言，因此您有两个选择正确使用 XPath。

1.  使用旧版本将选择语言指定为 XPath。
2.  使用较新（较旧？）版本而不指定任何选择语言

来自一篇*闻起来像我少年时代的*[古老文章](http://msdn.microsoft.com/en-us/magazine/cc302348.aspx) ，描述了 XSL 模式和 XPath 之间的区别。

 *> MSXML 2.0 提供对**XSL 模式的支持，它是****XPath** 1.0的前身。XML 寻址语言的概念被引入最初的 W3C XSL 工作草案 (http://www.w3.org/TR/1998/WD-xsl-19981216.html) 并称为 XSL 模式。**MSXML 2.0 实现了原始 XSL 规范中描述的 XSL 模式语言，但有一些小例外**。

所以，我认为你是轻微的（！）例外。*

# java - 如何处理 webrequest POST 服务器端

> ID：11462570
> 
> 赞同：1
> 
> 时间：2012-07-13T00:26:24.760
> 
> 标签：java, web-services, post

我是网络服务器工作的新手。我正在尝试从 C# 客户端向我的 Java webservice 发出 webrequest POST。我相信 POST 已成功完成，但我不知道如何告诉服务器检索和使用 POST 数据。

这是我现在用 Java 编写的代码：

```
//import org.apache.commons.lang.StringUtils;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.iharder.encoders.Base64;
import com.google.zxing.*;
import com.google.zxing.client.j2se.BufferedImageLuminanceSource;
import com.google.zxing.common.HybridBinarizer;

@Service("FCBarcodeRecognitionService")
public class DecodeBarcodeFromImageActivity extends Activity {

  private static final Log LOG = LogFactory
              .getLog(DecodeBarcodeFromImageActivity.class);

  @Operation("DecodeBarcodeFromImage")
  @Documentation("Attempt to decode a barcode from POST image data.\n  Returns a String of the decoded barcode and the type\n  of barcode detected if successful.")
  public DecodeFromImageOutput enact(DecodeFromImageInput input)
    throws DependencyException {

       DecodeFromImageOutput output = new DecodeFromImageOutput();
       LOG.debug("Received DecodeFromBarcodeImage request..."); 
       // Decode the images from the String arguments. They could
       // potentially be in any encoding format. (e.g. Base64)
       //How do I retrieve the POST data to use inside this operation??

       //I have something like this now
       ImageEncoder imageEncoder = new ImageEncoder();
       //the current input is just something I'm manually giving it. I want it to be the encoded image from the POST data
       List<BufferedImage> bufferedImgs = imageEncoder.decodeImageData(input);
       LOG.debug("Received " + bufferedImgs.size() + " images from decoder.");

       // Attempt to read a barcode (this will just pass the POST data, once I get it to my decode method)
       try {
           DecodedBarcode barcode = recognizeBarcodeFromImages(input, bufferedImgs);
           output.setDecodedBarcode(barcode); 
```

这是我现在在 C# 中的代码：//我正在尝试发布一个编码的（base64）图像

```
WebRequest serverReq = WebRequest.Create("http://saxtonl.desktop.amazon.com:8000/explorer");
serverReq.Method = "POST";
serverReq.ContentType = "application/x-www-form-urlencoded";
serverReq.ContentLength = base64String.Length;
Stream dataStream = serverReq.GetRequestStream();
dataStream.Write(imageBytes, 0, imageBytes.Length);
dataStream.Close();
WebResponse serverRsp = serverReq.GetResponse();
Console.WriteLine(((HttpWebResponse)serverRsp).StatusDescription);
dataStream = serverRsp.GetResponseStream();
StreamReader reader = new StreamReader(dataStream);
string responseFromServer = reader.ReadToEnd();
Console.WriteLine(responseFromServer);
reader.Close();
dataStream.Close();
serverRsp.Close(); 
```

# objective-c - 检索用户铃声库

> ID：11462571
> 
> 赞同：1
> 
> 时间：2012-07-13T00:26:25.053
> 
> 标签：objective-c, ios, xcode

我想知道是否有办法检索用户的铃声或声音。我对他们的音乐播放列表不感兴趣，但喜欢可用于 uilocalnotifications 的 30 秒音频剪辑。有谁知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:49:40.663

看到这个答案。 [如何在ios中以编程方式获取系统铃声？](https://stackoverflow.com/questions/7455643/how-to-get-the-system-ringtones-programmingly-in-ios)

如果您仍想触发音频通知，这篇[文章](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103)应该可以帮助您入门。看来您可以为 soundName 属性分配一个文件名，或者传递`UILocalNotificationDefaultSoundName`（我猜是）用户选择的通知声音。

```
- (void)scheduleNotificationWithItem:(ToDoItem *)item interval:(int)minutesBefore {
    UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    localNotif.soundName = UILocalNotificationDefaultSoundName;
    ...
    [localNotif release];
} 
```

# python - Facebook朋友ID上的用户的Django Manytomany字段保存错误

> ID：11462573
> 
> 赞同：0
> 
> 时间：2012-07-13T00:26:50.690
> 
> 标签：python, django, many-to-many, django-orm

我有一个适用于所有用户的 facebook 朋友表，并且希望为 User 提供一个多对多字段，但在保存数据时遇到了问题。

这是我的代码：

我的模型：

```
class FacebookFriend(models.Model):
user = models.ManyToManyField(User)
name = models.CharField(max_length="100", unique=False, db_index=True)
fid = models.CharField(max_length="30", unique=False, db_index=True)
birthday = models.DateTimeField(default="1776-07-04")
gender = models.CharField(max_length="10", default="NoData")
avatar = models.URLField() 
```

我的管理：

```
from django.db import models
from django.contrib.auth.models import User
from facepy import GraphAPI
from social_auth.signals import socialauth_registered

def facebook_friend_data(sender, user, response, details, **kwargs):

if sender == FacebookBackend:
    dict = UserSocialAuth.objects.filter(user=user.id).get()
    access_token = dict.extra_data['access_token']
    uid = dict.uid
    graph = GraphAPI(access_token)
    friends = graph.get(uid + '/friends?fields=id,name,birthday,gender,picture')

    from datetime import datetime
    from urllib2 import HTTPError

    try:
        for f in friends['data']:
            friend = FacebookFriend()
            friend.fid = f['id']
            friend.name = f['name']
            try:
                friend.gender = f['gender']
            except KeyError:
                pass
            try:
                bs= f['birthday'].split('/')
                if len(f['birthday'])==10:
                    formatted_bday= bs[2] + '-' + bs[0] + '-' + bs[1]
                else:
                    formatted_bday= '1900-' + bs[0] + '-' + bs[1]
                try:
                    friend.birthday = datetime.strptime(formatted_bday, '%Y-%m-%d')
                except ValueError:
                    pass
            except KeyError:
                pass
            friend.avatar = f['picture']
            friend.save()
            friend.user.add(user)

    except HTTPError:
        pass
socialauth_registered.connect(facebook_friend_data, sender=None) 
```

我的错误：

```
IntegrityError at /complete/facebook/
duplicate key value violates unique constraint "users_facebookfriend_fid_key" 
```

我正在使用 Django Social Auth 进行我的 facebook 处理。我知道问题出在我的模型以及我如何保存数据，但我不知道该怎么做。

谢谢，如果您还需要什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:22:19.917

我猜你的第一个版本有`FacebookFriend`一个. 更新模型后，您忘记重新创建数据库。此外，当您更改模型时不起作用。删除现有的表或数据库，然后再次运行。还有一个名为or的精美工具，可以帮助在 django 中进行模式/数据迁移。`fid``unique=True``manage.py syncdb``manage.py syncdb``south``django-south`

# php - 追加2个Mysql行

> ID：11462578
> 
> 赞同：-1
> 
> 时间：2012-07-13T00:27:54.037
> 
> 标签：php, mysql

我有一个两步注册，一个包含重要数据，如电子邮件用户名和密码，第二个可选包含个人信息，如简历、眼睛颜色等。我有两个 exec 文件，第一个 ofc 写入数据在数据库的第一部分，留下了大约 30 列个人数据空白。第二个做另一行，但现在重要数据为空。我想附加或加入这两行，所以所有信息都在一行中。

这是第二个

```
 $qry = "UPDATE `performers` SET `Bemutatkozas` = '$bemuatkozas', `Feldob` = '$feldob', `Lehangol` = '$lehangol', `Szorzet` = '$szorzet', `Jatekszerek` = '$jatek', `Kukkolas` = '$kukkolas', `Flort` ='$flort', `Szeretek` = '$szeretek', `Utalok` = '$utalok', `Fantaziak` = '$fantaziak', `Titkosvagyak` = '$titkos_vagyak, `Suly` = '$suly', `Magassag` = '$magassag', `Szemszin` = '$szemszin', `Hajszin` = '$hajszin', `Hajhossz` = '$hajhossz', `Mellboseg` ='$mellboseg', `Orarend` = '$orarend', `Beallitottsag` = '$szexualis_beallitottsag', `Pozicio` = '$pozicio', `Dohanyzas` = '$cigi', `Testekszer` = '$pc', `Tetovalas` ='$tetko', `Szilikon` ='$szilikon', `Fetish1` = '$pisiszex', `Fetish2` = '$kakiszex', `Fetish3` = '$domina', `Testekszerhely` = '$pchely', `Tetovalashely` = '$tetkohely', `Csillagjegy` = '$csillagjegy', `Parral` = '$par', `Virag` = '$virag' WHERE `Username` ='" .  $_POST['username']. "'";
$result = @mysql_query($qry);

//Check whether the query was successful or not
if($result) {
    header("location: perf_register_success.php");
    exit(); 
```

我不确定 $_POST 是否在这里工作。我有表格，然后是那个表格的 exec，它有效，然后是这个表格，这就是那个的 exec。无论如何，我总是收到“查询失败”消息，它位于“if”的 else 语句中正在使用。我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:07:22.767

UPDATE 的正确语法如下：

```
UPDATE table SET columnA=valueA, columnB=valueB WHERE condition=value 
```

（[这里的文档](http://dev.mysql.com/doc/refman/5.0/en/update.html)）

因此，您的查询应如下所示：

```
$qry = "UPDATE performers SET Bemutatkozas = $bemuatkozas, Feldob = $feldob, Lehangol = $lehangol [...] WHERE Username ='" .  $_POST['username']. "' 
```

您必须将 [...] 替换为您的所有值（这将需要一些时间），但希望您能得到模式。

除此之外，您应该在代码中改进/更改许多内容，但我只会指出[jeroen](https://stackoverflow.com/a/11462668/1329367)在这个问题中的回答，因为他几乎涵盖了所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T00:41:33.117

你想要[`UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/update.html)而不是`INSERT`你的第二个查询。

除此之外，您确实需要修复该 sql 注入错误，最好结合准备好的语句切换到 PDO 或 mysqli。这些`mysql_*`功能已弃用。

无论您采取何种解决方案，您都需要添加适当的错误处理，抑制错误是错误的，尤其是当您尝试修复问题但即使在生产站点中，错误也需要记录，而不是忽略。

# mysql - 如何获得前5名

> ID：11462580
> 
> 赞同：-1
> 
> 时间：2012-07-13T00:28:20.453
> 
> 标签：mysql

我有表（数据）具有类别（0 = 图片，1 = 视频，2 = 音乐）视图（视图数量）我想编写获取 top5 图片或 top5 视频的查询。

例如。

select * from data where category=0 按前 5 个视图排序。

对不起，我不擅长 sql。任何想法谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T00:29:13.947

用于`ORDER BY`排序，并`LIMIT`用于...限制。

```
SELECT * FROM data WHERE category = 0 ORDER BY views DESC LIMIT 5 
```

# javascript - 当检测到某个最小屏幕分辨率大小时，如何通过 Javascript 更改 CSS 属性

> ID：11462581
> 
> 赞同：1
> 
> 时间：2012-07-13T00:28:45.273
> 
> 标签：javascript, html, css

我有这个代码：

```
function AUTADIV () {
  var BRW = window.outerWidth;
  x = (BRW/1280) * 20
  document.getElementsByTagName("a").style.fontSize = x
} 
```

并且标签`<a>`已经在 .css 文件中的此类下：

```
a { 
   position:relative;
   z-index:1; 
   color:White; 
   background-color: transparent;
   font-size:20pt;
   text-decoration: none;
   text-shadow: blue 0em 0em 0.4em 
} 
```

当屏幕较大的人看到我的网站时，背景确实填满了所有内容，但字体太小了。有没有办法让它自动调整大小？如果没有，我该如何`font-size:20pt`通过 JavaScript 进行更改？我的代码仅在字体大小样式是内联的情况下才有效，并且我在 CSS 脚本中需要它。

我发现我需要的代码随`onResize`事件一起激活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:55:40.347

如果它需要在 CSS 中，那么可能很难做到。但是，如果它能够使用 JS 动态更改，那么您可以通过一个简单的测试来完成此操作，例如：

（我正在使用jquery）

```
$.getDocHeight = function(){
    return Math.max(
        $(document).width(),
        $(window).width(),
        /* For opera: */
        document.documentElement.clientWidth
    );
};
if($.getDocHeight>threshhold){ // some threshhold of a max width
    $('a').style('font-size','40pt');
} 
```

这也可以在常规 js 中完成。很难确定所有不同浏览器的宽度，这就是我包含该功能的原因。但是一旦你有了宽度，你只需要做一个简单的检查，你就可以为你的锚标签增加字体大小样式。我建议使用静态大小，以便字体更可预测并且不会随页面大小缩放。

这是考虑不同类型用户时的最佳实践（例如移动用户，您绝对不希望字体太小以至于所有字体都适合一页）。

源代码：http: [//james.padolsey.com/javascript/get-document-height-cross-browser/](http://james.padolsey.com/javascript/get-document-height-cross-browser/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:37:05.570

使用媒体查询可能会得到更好的结果：

```
@media all and (max-width: 1280px) {
    a{font-size:12pt;}
} 
```

您可以对越来越小的尺寸重复此操作。它不会平滑过渡，但它不需要 JavaScript（除了调整窗口大小时可能不会注意到文本大小跳跃的变化如此之多）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T01:28:18.203

您可以通过访问 CSSRule-Object 来修改规则。

## 细节：

**IE<9：** [http ://help.dottoro.com/ljcufoej.php](http://help.dottoro.com/ljcufoej.php)
**其他：** [http://help.dottoro.com/ljdxvksd.php](http://help.dottoro.com/ljdxvksd.php)

# jquery - 如果表单是动态创建的，那么 eq 是否有效？

> ID：11462583
> 
> 赞同：0
> 
> 时间：2012-07-13T00:28:49.367
> 
> 标签：jquery

我有一个表单，人们可以在其中输入元素并自动增长。我想对输入的数据进行一些数学运算，但在捕获输入字段的内容时遇到了问题。这是我正在使用的原始程序（[http://jsfiddle.net/doktormolle/WaL84/](http://jsfiddle.net/doktormolle/WaL84/)），我做了一些阅读并相信 .eq 是我需要获取自动增长列表的倒数第二个元素的命令（我无法获取最后一个元素，因为它在自动增长列表中始终为空白）。

我的最终目标是获取所有数字并返回总数或平均值等...

我尝试`var from = $("#siblings").eq(-1).val();`了 -2，但它一直只给我第一个单元格的值（例如，如果我在每个单元格上输入 1、2、3、4、5，那么我将继续得到 1）。

如果它有帮助这里的代码：

```
$(document).ready(function () {
    $("input[name='siblings']").on('keydown',
        function()
        {

           //is it the last input?
           if(this==$("input[name='siblings']:last",this.form)[0])
           {
            //insert an empty clone of the current input
            $(this).after($(this).clone(true).val(''));

           var from = $("#siblings").eq(-1).val();

           $("div#total").append("value = " + from + "<br>");       
           }
         });        
}); 
```

html:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
</script>
<script type="text/javascript" src="input.js">
</script>
<style type="text/css">
input{display:block}​
</style>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<body>
<p> test </p>
<form>
    <div id="inputform" name="inputform">
        <input id="siblings" name="siblings"> 
    </div>
</form>
<div id="total">
hello
</div>
&nbsp;
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:18:48.303

首先，`if()`子句中的条件即使不是真的错误也会令人困惑。

其次，我认为您想从触发 keydown 事件的输入元素中获取值，换句话说，就是在处理程序内部的`this`or `$(this)`。从新克隆的元素中获取价值是没有意义的，因为它已被故意清空。

尝试这个 ：

```
$("input[name='siblings']").on('keyup', function(e) {
    if(e.which === 9) return;
    var $this = $(this);
    if (this == $this.siblings().andSelf().last().get(0)) {
        //insert an empty clone of the current input
        $this.clone(true).val('').insertAfter(this);
        $("div#total").append("value = " + $this.val() + "<br>");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:31:00.453

你应该使用`.last()`：

```
var from = $('input[name="siblings"]').last().val(); 
```

此外，如果您使用类和名称来识别元素会更容易，因为键入要简单得多`.siblings`。

# c# - 使用 XAML 更改数据上下文属性时在视图中创建/销毁子项

> ID：11462586
> 
> 赞同：0
> 
> 时间：2012-07-13T00:29:21.317
> 
> 标签：c#, wpf, mvvm, triggers

好的，这对我来说有点难以解释，所以我使用带有 WPF 的 MVVM 模型编写了一个程序。

我的主 UserControl 上有一个网格，它需要通过代码动态更新子项（通过更新我的意思是创建和销毁）（因为数据由 ViewModel 更改，我希望根据需要创建和销毁 Grid 的子项） .

我很确定您不能仅使用 XAML 动态创建和销毁 UIElement，因此我的视图中有更新函数（这些更新函数仅更新 UI 本身，它们不会更改 ViewModel 中的任何内容，因此我不会破坏 MVVM，因为代码在视图仅根据 ViewModel 中的数据更改 UI，这样可以吗？）。

现在我在 View 中分配 ViewModel 的 PropertyChanged 事件，并通过代码捕获它并触发 Update 事件，所以我的 View 类中的事件如下所示：

```
 private void ViewModel_PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
        {
            if (e.PropertyName == "BoardWidth" || e.PropertyName == "BoardHeight")
                RecreateBoard();

            if (e.PropertyName == "Coordinates")
                UpdateCoordinates();

            if (e.PropertyName == "TilesOnly")
            {
                UpdateBoardBlocks();
                UpdateTiles();
            }

            if (e.PropertyName == "BoardBlockViewModels")
                UpdateBoardBlocks();

            if (e.PropertyName == "TileViewModels")
                UpdateTiles();

            if (e.PropertyName == "EntryPoint" | e.PropertyName == "CursorViewModel")
                UpdateEntryPoint();
        } 
```

更新事件使用基于 ViewModel 中数据的代码在视图的主网格中创建/销毁子项。当前的实现效果很好。

但是，我想通过 XAML 实现事件处理程序。所以我的问题是如何在 XAML 中实现上面的事件处理程序代码，当数据上下文属性更改时，我无法找到在视图中执行方法的任何方式。我研究了 DataTriggers 但它们不包含执行方法的能力。此外，DataTrigger 需要在属性更改时触发，而不是在将其设置为特定值时触发。

我不希望通过 ViewModel 推送更新，因为这完全是一个 View 事物，它与 viewmodel 本身无关。例如。在这些情况下，视图的不同实现可能不需要更新。即使我要通过 ViewModel 来推动它，视图本身仍然存在如何执行方法的相同问题。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:41:42.430

我认为如果您在视图中需要那么多命令式代码，那么您的处理方式可能是错误的。在大多数情况下，您只需将数据绑定到列表和字段等。您很少需要创建和删除元素，您要么拥有控件自动生成它们（例如`ItemsControls`），要么重用现有实例。

如果您确实需要执行此类动态操作，最好将该逻辑封装在`UserControls`自定义控件中，只需提供可以绑定的属性（在内部您可以处理依赖属性的值更改事件以进行任何更新）。

视图中剩下的应该是对这些控件的绑定。

# jquery - jquery验证提交-带ajax提交-点击功能

> ID：11462587
> 
> 赞同：0
> 
> 时间：2012-07-13T00:29:22.330
> 
> 标签：jquery, submit, form-submit, jquery-validate

我在链接上使用单击功能通过 ajax 提交表单，如果服务器返回错误，则会显示服务器端错误。

使用这种方法，输入键在表单中不起作用，我认为使用 jquery 验证的提交处理程序可能有一种更简单、更正确的方法。

到目前为止，这是我的代码...

```
function loginSubmit(){
    $.ajax({
        url: loginFormURL,          
        type: 'POST',
        /** contentType: "application/json;",  **/
        dataType:"text json",
        /** async: true, **/
        data:$('#loginForm').serialize(),
        success: function(data){

           if(data.isError == "false" || data.isError == ""){

                       $.postMessage(
                        'redirectURL|'+ redirectURL +'',
                        '*',
                        parent
                      );

                     } else

                     if(data.isError == "true"){

                       $("#loginError").empty().show(); 
                       // iterate over the message list and display the error
                       for (var i=0; i < data.errorMessages.length; i++){
                               // inject error message to the error container

                           $("#loginError").append(data.errorMessages[i]);

                           }    

                       // iterate over the field list and paint the fields in red

                       $('input').parent('div').addClass('inputError');

                   }

           }            
   });
} 
```

和点击功能：

```
 $("a#loginButton").click(function(){
                $("#loginForm").validate().form(this);
                if($('#loginForm').valid()){
                    loginSubmit();
                }
            }); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:37:36.867

您需要在输入字段上收听 ENTER 键：

```
$('input').keypress(function(event) {
    if(event.which == 13) {
        loginSubmit();
        event.preventDefault();
        return false;
    }
}); 
```

当然，您可能不想在所有 INPUT 标记上捕获 ENTER，只是一些，因此您可以根据需要使用另一个选择器。

[在此处](https://stackoverflow.com/questions/699065/submitting-a-form-on-enter-with-jquery)查看类似的讨论。

# parse-platform - 在对象创建时/之后设置 Parse.Object.relation

> ID：11462590
> 
> 赞同：0
> 
> 时间：2012-07-13T00:29:39.573
> 
> 标签：parse-platform

尽管没有按时设置关系，但正在编写我的电子邮件对象（我自己的自定义类），任何想法如何正确链接它？

```
// Create new Email model and friend it
addFriendOnEnter: function(e) {
  var self = this;
  if (e.keyCode != 13) return;

  var email = this.emails.create({
    email:   this.emailInput.val(),
    ACL:     new Parse.ACL(Parse.User.current())
  });

  var user = Parse.User.current();
  var relation = user.relation("friend");
  relation.add(email);
  user.save();

  this.emailInput.val('');
} 
```

谢谢！贡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:18:24.767

因为与 Parse 的服务器对话是异步的，所以 Parse.Collection.create 使用 Backbone 样式的选项对象，并在创建对象时使用回调。我想你想做的是：

```
// Create new Email model and friend it
addFriendOnEnter: function(e) {
  var self = this;
  if (e.keyCode != 13) return;

  this.emails.create({
    email:   this.emailInput.val(),
    ACL:     new Parse.ACL(Parse.User.current())
  }, {
    success: function(email) {
      var user = Parse.User.current();
      var relation = user.relation("friend");
      relation.add(email);
      user.save();

      self.emailInput.val('');
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:10:42.150

知道了！

this.emails 集合上的 .create 方法实际上并未返回对象，因此 var email 为空。Parse 以某种方式猜测它是 Email 类的一个空对象，所以我猜这个结构是 .create 完成它的工作后唯一剩下的东西。

相反，我使用 .query、.equalTo 和 .first 在服务器上检索电子邮件对象

```
// Create new Email model and friend it
addFriendOnEnter: function(e) {
  var self = this;
  if (e.keyCode != 13) return;

  this.emails.create({
    email:   this.emailInput.val(),
    ACL:     new Parse.ACL(Parse.User.current())
  });

  var query = new Parse.Query(Email);
  query.equalTo("email", this.emailInput.val());
  query.first({
    success: function(result) {
      alert("Successfully retrieved an email.");
      var user = Parse.User.current();
      var relation = user.relation("friend");
      relation.add(result);
      user.save();
    },
    error: function(error) {
      alert("Error: " + error.code + " " + error.message);
    }
  });

  this.emailInput.val('');
} 
```

# c - 在 LAPACK 中查询 dgels 的最佳块大小

> ID：11462597
> 
> 赞同：0
> 
> 时间：2012-07-13T00:30:58.980
> 
> 标签：c, segmentation-fault, lapack

我正在尝试使用 LAPACK 在 C 中实现卡尔曼滤波器，并且需要通过回归估计一些参数。我正在使用[dgels](http://www.netlib.org/lapack/double/dgels.f)，但是当我尝试运行它时不断出现奇怪的段错误。我认为这可能与我在参数 LWORK 中设置的块大小有关，所以我尝试通过设置 LWORK = -1 来查询最佳大小。根据文档，WORK 的第一个元素应该包含 LWORK 的最佳值。但是当我尝试访问 WORK[0] 时，我得到了另一个段错误，尽管在调用 dgels 之前已经分配了它！有什么线索吗？这是代码，减去我分配的位`double *A, *B`和`int p->N`.

```
char T = 'T';  // Transpose A
int n = 1000;
int LWORK = -1; 
int INFO = 0; 
double * WORK = (double *) malloc (200*sizeof(double));
printf("%e\n",WORK[0]); // This works
dgels_(&T, &(p->N), &n, &(p->N), A, &(p->N), B, &n, &WORK, &LWORK, &INFO); 
printf("%e\n",WORK[0]); // This segfaults 
```

gcc 4.2.1，Mac OS X 雪豹

**编辑：**原来英特尔有一个很好的例子来说明如何[在](http://software.intel.com/sites/products/documentation/hpc/mkl/lapack/mkl_lapack_examples/dgels.htm)`dgels`C中使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:10:33.927

您在这里不遵循*FORTRAN API*：数组作为对第一个元素的引用传递，但您将它作为对第一个元素的引用的引用传递（即您应该使用`WORK`而不是`&WORK`）。

另请阅读[DGELS 文档](http://www.nag.co.uk/numeric/fl/manual/pdf/F08/f08aaf.pdf)以确保您正确理解其参数含义（例如`NRHS`、`LDA`和`LDB`）。

是的，请注意*C* `int`的大小以及*FORTRAN*使用*列优先顺序*和*C*使用*行*优先顺序的事实（[维基百科文章](http://en.wikipedia.org/wiki/Row-major_order)）。

# java - Java 输入文件验证

> ID：11462599
> 
> 赞同：-1
> 
> 时间：2012-07-13T00:31:10.093
> 
> 标签：java, input, try-catch

有没有办法使用try/catch语句让用户输入一个文件，如果用户输入了错误的文件名，程序会再问两次，然后异常退出？我怎么能循环？因为一旦用户输入了错误的文件名，程序就会立即抛出异常。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.*;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Main {
    static String[] words = new String[5];
    public static void main(String[] args)
    {
        Scanner kb = new Scanner(System.in);

        System.out.println("enter file name:");
        String fileName = kb.next();

        try {

            File inFile = new File(fileName);
            Scanner in = new Scanner(new File(fileName));

        } catch (FileNotFoundException ex) {
            Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
        }    

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:42:54.840

所以你不希望它在用户输入错误的文件名时抛出任何类型的错误，对吧？如果是这样，那么我认为这就是您想要的：

```
for(int i = 0; i < 3; i++){
        try {
            File inFile = new File(fileName);
            Scanner in = new Scanner(new File(fileName));
            break;
        } catch (FileNotFoundException ex) {
            if(i == 2){
                Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
                System.exit(0);
            }
            else
                continue;
        }
    } 
```

如果用户输入正确的文件名，它将跳出循环。如果不是，它会检查循环是否在第三次迭代中。如果是，（这意味着用户已经尝试过两次但都失败了），它会打印错误并退出程序。如果循环不在第三次迭代中，它会继续循环并重新提示用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:37:36.613

假设您创建了一个布尔值 fileIsLoaded = false，并将其设置为 true。您可以创建一个循环

```
for(int i=0;i<2 && !fileIsLoaded; i++) {
//your try/catch goes here
} 
```

将当前 main 中的所有代码包含在该循环中（使用预先创建的布尔值）。最后，您可以在之后检查布尔值，以防所有尝试都失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T00:42:34.253

我希望很明显 FileNotFoundException 是由 Scanner 构造函数抛出的。那么在确定文件存在之前为什么要使用它呢？在获得正确的文件之前，您不应该创建 Scanner 对象！要实现这个想法，请在您的 try 块中使用：

```
//read file name from stdio
File inFile = new File(fileName);
int i = 0;
while(!inFile.exists() && i++ < 2 ){
        //read file name from System.in;
        inFile = new File(fileName);
}
Scanner in = new Scanner(new File(fileName)); 
```

# ios - 为什么我的 iOS 应用程序只是转到 @synthesize，而不是进一步转到 viewWillAppear 和 viewDidLoad？

> ID：11462604
> 
> 赞同：0
> 
> 时间：2012-07-13T00:31:28.980
> 
> 标签：ios, map, viewdidload

我的地图应用程序有一个“选择城市”按钮，`worldCitiesList`使用以下代码单击时显示：

```
[self.navigationController presentModalViewController:self.worldCitiesListNavigationController animated:YES]; 
```

但是现在“选择城市”按钮的位置必须由另一个按钮代替。

“选择城市”按钮必须重新定位到`MapViewController`由以下代码创建的另一个视图控制器：

```
[self.navigationController presentModalViewController:self.tableViewNavigationController animated:YES]; 
```

`worldCitiesList`可以从 中显示`tableViewNavigationController`。但是我们希望它仍然`MapViewController`像以前一样显示出来。

因此，在`MapViewController`从回退到 的按钮中`tableViewNavigationController`，我使用以下代码首先回退到`MapViewController`，然后显示`worldCityList`：

```
- (void) backMapView:(id)sender
{
    [self.navigationController dismissModalViewControllerAnimated:YES];

    [self.navigationController presentModalViewController:self.worldCitiesListNavigationController animated:YES];
} 
```

但我的应用程序只是返回`MapViewControler`，但没有`worldCityList`进一步显示。

在我的`WorldCitiesListController.m`中，我的 iOS 应用程序只是转到，`@synthesize`但没有转到更远。`viewWillAppear``viewDidLoad`

请帮忙。提前致谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:36:20.547

我的问题通过以下方式解决：'dismissModalViewControllerAnimated: NO'。谢谢！

# android - onStart 方法中的restartLoader 抛出异常

> ID：11462605
> 
> 赞同：0
> 
> 时间：2012-07-13T00:31:34.830
> 
> 标签：android, android-compatibility

我正在使用 android 兼容包来使用 Loaders 。当我在方法中初始化加载器或重新启动它时`onCreate`，它只是找到了但是当我重新启动或初始化它时`onStart`它会抛出一个错误，我想知道为什么“有时”当我在`onCreate`活动中初始化加载器并单击一些在加载器将数据绑定到 UI 之前快速将我移动到另一个活动的按钮，然后返回到之前初始化加载器的活动，加载器不加载数据“UI 上什么都没有出现？！！！！所以我认为将 initLoader 移动到，`onStart`但它会引发错误

```
07-13 03:19:15.140: E/AndroidRuntime(23179): java.lang.RuntimeException: Unable to resume activity {biz.dot.khtmeh/biz.dot.khtmeh.ui.HomeScreen}: java.lang.IllegalStateException: There is already a listener registered
07-13 03:19:15.140: E/AndroidRuntime(23179):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2444)
07-13 03:19:15.140: E/AndroidRuntime(23179):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2472)
07-13 03:19:15.140: E/AndroidRuntime(23179):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1173)
07-13 03:19:15.140: E/AndroidRuntime(23179):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-13 03:19:15.140: E/AndroidRuntime(23179):    at android.os.Looper.loop(Looper.java:137)
07-13 03:19:15.140: E/AndroidRuntime(23179):    at android.app.ActivityThread.main(ActivityThread.java:4424)
07-13 03:19:15.140: E/AndroidRuntime(23179):    at java.lang.reflect.Method.invokeNative(Native Method)
07-13 03:19:15.140: E/AndroidRuntime(23179):    at java.lang.reflect.Method.invoke(Method.java:511)
07-13 03:19:15.140: E/AndroidRuntime(23179):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-13 03:19:15.140: E/AndroidRuntime(23179):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-13 03:19:15.140: E/AndroidRuntime(23179):    at dalvik.system.NativeStart.main(Native Method)
07-13 03:19:15.140: E/AndroidRuntime(23179): Caused by: java.lang.IllegalStateException: There is already a listener registered
07-13 03:19:15.140: E/AndroidRuntime(23179):    at android.support.v4.content.Loader.registerListener(Loader.java:130)
07-13 03:19:15.140: E/AndroidRuntime(23179):    at android.support.v4.app.LoaderManagerImpl$LoaderInfo.start(LoaderManager.java:259)
07-13 03:19:15.140: E/AndroidRuntime(23179):    at android.support.v4.app.LoaderManagerImpl.installLoader(LoaderManager.java:509)
07-13 03:19:15.140: E/AndroidRuntime(23179):    at android.support.v4.app.LoaderManagerImpl.createAndInstallLoader(LoaderManager.java:496)
07-13 03:19:15.140: E/AndroidRuntime(23179):    at android.support.v4.app.LoaderManagerImpl.restartLoader(LoaderManager.java:642) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T19:53:45.187

您可能不止一次地重复使用加载程序。每次`onCreateLoader(..)`调用时，您都应该返回一个新的 a 实例`Loader<T>`。

# gigya - 带有站点登录的 gigya 插件

> ID：11462607
> 
> 赞同：1
> 
> 时间：2012-07-13T00:31:42.423
> 
> 标签：gigya

我正在使用带有站点登录而不是社交登录的 Gigya 插件（评级/评论），但在我使用 socialize.notifyLogin() 登录用户后，该插件将无法识别登录用户。我收到的响应表明 Gigya 知道用户并将用户识别为已登录，但插件仍以注销版本呈现。我假设这是一个常见的场景，但没有找到任何这样做的样本。是否需要拨打电话通知插件用户已登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:54:12.010

不要忘记发送 userinfo 对象：

```
ex:userInfo: { firstName: "David", gender: "m", age:30 } 
```

[在这里](http://developers.gigya.com/020_Client_API/010_Socialize/socialize.notifyLogin)阅读更多。

# c# - 在 C# 中，为什么我在声明它时看到我的 int 变量中存储了一个零，但仍然收到错误说我应该初始化它？

> ID：11462608
> 
> 赞同：8
> 
> 时间：2012-07-13T00:31:44.320
> 
> 标签：c#, variables

在 C# 中，如果我执行以下操作：

```
int x; 
```

然后按 F10，我看到 x 中存储了一个零。

但是当我尝试使用 x 时，它告诉我应该初始化它.. 为什么会这样？那里应该是零，对吧？

数组也是如此，所以：

```
int[]a = new int[5]; 
```

如果我们按 F10，我们会看到里面的所有整数都是零。

这是怎么回事 ？为什么我必须在 C# 中初始化一个变量，这与在 C++ 中不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T00:34:53.590

这是一个编译时错误，试图帮助您减少由于未初始化变量而导致的代码错误。很有用。

[http://msdn.microsoft.com/en-us/library/4y7h161d(VS.80).aspx](http://msdn.microsoft.com/en-us/library/4y7h161d(VS.80).aspx)

更多阅读：

[http://blogs.msdn.com/b/abhinaba/archive/2005/11/08/490248.aspx](http://blogs.msdn.com/b/abhinaba/archive/2005/11/08/490248.aspx)

关于禁用错误的一些话（你不能只是警告你 - 这不是警告）：

[http://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/a073ccea-c43b-4536-be76-41949f0e2135](http://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/a073ccea-c43b-4536-be76-41949f0e2135)

和

[http://blogs.msdn.com/b/ericlippert/archive/2009/10/12/absence-of-evidence-is-not-evidence-of-absence.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/10/12/absence-of-evidence-is-not-evidence-of-absence.aspx) （证明是关于这个主题的最丰富的信息）

甚至[更多](http://blog.liranchen.com/2010/07/behind-locals-init-flag.html)讨论“localsinit” IL 标志（强制为本地设置默认值）与其与“双重赋值”的关系（C# 强制您编写`int v=0`，即使它已经存在）之间的关系。如果您想更深入地阅读 - [ECMA-335 的第 I.12.2 节中定义的“localsinit”，请点击此处](http://www.ecma-international.org/publications/standards/Ecma-335.htm)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T00:37:27.863

简单地说，因为这就是 C# 的工作方式。来自 C# 语言规范：

> 5.3.2 最初未赋值的变量
> 
> 以下类别的变量被归类为最初未分配：
> 
> · 最初未分配的结构变量的实例变量。
> 
> ·输出参数，包括struct实例构造函数的this变量。
> 
> · 局部变量，在 catch 子句或 foreach 语句中声明的变量除外。

另一方面：

> 5.3.1 初始赋值变量
> 
> 以下类别的变量被归类为最初指定的：
> 
> · 静态变量。
> 
> · 类实例的实例变量。
> 
> · 最初分配的结构变量的实例变量。
> 
> · 数组元素。
> 
> · 值参数。
> 
> · 参考参数。
> 
> · 在 catch 子句或 foreach 语句中声明的变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T00:34:52.013

很简单……因为编译器坚持在使用局部变量之前先对其进行初始化。这可以防止与初始化失败相关的一整类错误。

如果您查看从以下几条语句生成的 IL：

```
int x;
Console.WriteLine("hello");
int y=5;
x=6;
Console.WriteLine(x+y); 
```

您会看到以下内容：

```
//notice no ops related to x prior to console.writeline
IL_0000:  ldstr       "hello"
IL_0005:  call        System.Console.WriteLine
IL_000A:  ldc.i4.5    
IL_000B:  stloc.1        //create/store y
IL_000C:  ldc.i4.6    
IL_000D:  stloc.0        //x is really only created right here
IL_000E:  ldloc.0     
IL_000F:  ldloc.1     
IL_0010:  add         
IL_0011:  call        System.Console.WriteLine 
```

如果您在将 x 存储到 IL 之前看到它的值，那么这是一个调试器技巧。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T00:36:26.537

我相信自动初始化是一种运行时安全功能，而不是语言保证。碰巧.NET 会将变量归零，但这并不一定适用于每个框架。

请注意，对于数组，它**是有**保证的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T00:34:03.437

它为 0 只是运气，它可以是任何东西，这就是为什么你必须初始化它。

# python - Mp3文件操作

> ID：11462610
> 
> 赞同：2
> 
> 时间：2012-07-13T00:33:33.960
> 
> 标签：python, mp3

我正在尝试加快 mp3 文件的速度。我目前在 Mac 上使用 python。我对这种东西不是很熟悉，到目前为止我已经学会了如何读取一个 mp3 文件并获取它的帧头，但这是我第一次处理音频。所以我在这里需要一些帮助。有谁知道一些python库来帮助我？也有人可以解释一下我必须做什么/学习才能做到这一点吗？我真的在寻找一些开箱即用的解决方案，但如果没有，我愿意自己学习和做。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T01:08:14.327

对于音频流的操作，您可以使用[http://pymedia.org/tut/](http://pymedia.org/tut/)，它功能强大，是的，它也是跨平台的。如果您使用 linux，那么 gstreamer 也是一个不错的选择。

# windows-phone-7 - 禁用 Webbrowser 控件的缩放/平移/滚动功能

> ID：11462611
> 
> 赞同：0
> 
> 时间：2012-07-13T00:33:51.877
> 
> 标签：windows-phone-7, browser

我已经看到很多关于如何在Windows Phone 7**本地**禁用 Web 浏览器控件上的缩放/平移/滚动功能的帖子。那么我们有哪些选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:33:53.110

我做了一点挖掘，我找到了一个快速的方法，所以我想我会在这里分享它。这不是快速的几行代码，这是一种耻辱，但所有这些都在网络上，所以它应该很容易实现。首先，您需要 Linq ddl 和这里称为[LinqToVisualTree](https://gist.github.com/2596707)的此类。[然后，您可以在WebBrowserHelper 类](https://gist.github.com/2596720)中使用这些，您只需在创建 webBrowserHelper 时传入您的 Web 浏览器，剩下的就可以处理了。您甚至可以设置是否要禁用滚动。

我发现的一个问题是，当我双击网页时，它有时仍会放大。有谁知道如何解决这个问题？我确定有一种方法可以使用[LinqToVisualTree](https://gist.github.com/2596707)，但我无法弄清楚。

# nservicebus - 如果我在 Nservicebus 的消息处理程序中设置标头，该标头值是否应可供下游处理程序使用？

> ID：11462618
> 
> 赞同：0
> 
> 时间：2012-07-13T00:34:29.767
> 
> 标签：nservicebus

我有一个由两个不同的处理程序处理的消息类型（顺序由 指定`ISpecifyMessageHandlerOrdering`）。

如果我在第一个处理程序中设置了一个标题，`message.SetHeader("SomeStatus", "value");`那么我应该能够调用`message.GetHeader("SomeStatus")`第二个处理程序并获取设置的值吗？

它目前对我不起作用，`GetHeader`只是返回 null，但我不知道我是否做错了什么，或者这是否不应该起作用。

我正在使用 nservicebus 3.2.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T05:22:18.140

你是对的 - 这是一个错误。记录为 #529 并将作为下一个版本的一部分进行修复。

[https://github.com/NServiceBus/NServiceBus/issues/529](https://github.com/NServiceBus/NServiceBus/issues/529)

# sql-server-2008 - 为什么 SSRS 在尝试查看属性时会给出 rsAccessDenied，除非用户是报表服务器上的管理员？

> ID：11462620
> 
> 赞同：2
> 
> 时间：2012-07-13T00:34:36.097
> 
> 标签：sql-server-2008, reporting-services

我有一个 SQL 2008r2 报表服务器，尽管在 RS 中分配了适当的 ROLE 权限，但您无法查看报表/文件夹属性，除非您也是服务器上管理员组的成员。您可以查看报告本身，但不能查看“属性”选项卡。查看“属性”选项卡时，显示 rsAccessDenied 错误，并显示消息“授予用户 'XXX\XXX' 的权限不足以执行此操作。”

我的理解是，仅仅作为浏览器角色的成员就足以查看报告属性，并且该帐户实际上是所有角色（内容管理器、发布者、浏览器等）的成员，所以这不是问题，所以为什么您还需要成为**服务器上**管理员组的成员？

鉴于一切都是通过远程计算机上的浏览器完成的，我对“属性”选项卡正在做什么需要额外权限感到有些茫然。

任何人都知道发生了什么以及需要更改什么以便用户不需要服务器本身的任何权限？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:48:15.503

我有一个类似的问题，我无法访问“属性”选项卡或“数据源”选项卡，但将我的用户添加到管理员并没有解决问题。然而，我所有的角色分配都在一个子文件夹中，当我以角色“浏览器”添加到 root/home 时，它​​突然开始工作。即使我不是 RS 服务器的管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:21:34.840

根据 Microsoft 文档，您需要更高的权限才能实现：

[http://technet.microsoft.com/en-us/library/ms157363(v=sql.105](http://technet.microsoft.com/en-us/library/ms157363(v=sql.105) )

浏览器角色仅允许您浏览文件夹结构和查看/订阅报告。您需要“内容管理员角色”来实现您想要的。

# matplotlib - 可以在不使用内联绘图的情况下远程访问 IPython Notebook 吗？

> ID：11462621
> 
> 赞同：6
> 
> 时间：2012-07-13T00:34:47.457
> 
> 标签：matplotlib, x11, ipython

我想连接到远程计算机上的 IPython 笔记本（通过 ssh 隧道或通过 https）并让 ipython 笔记本在新窗口中打开 matplotlib 图（相对于“内联”）。

这可能吗？

当我尝试在没有“内联”后端的情况下进行绘图时，笔记本内核报告“：无法连接到 X 服务器”并崩溃。

X11 服务器在客户端计算机上运行，​​我在创建 ssh-tunnel 时使用 -Y 选项启用了 X11 转发。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T03:28:52.107

是的，至少是通过 ssh 端口隧道。

（注意：示例是在 Ubuntu 12.04 上完成的，但同样的原则也适用于其他平台）

我遇到了类似的问题，发现如果我从端口和 X 转发 ssh 会话（即：设置端口和 X 转发的会话）中运行 IPython 笔记本，它就可以工作。笨重和烦人，但它的工作原理。例如：

```
at-home:~$ ssh -X -L 8889:localhost:8888 my.server
... login message from my.server
my.server:$ cd /folder/containing/my/notebooks
my.server:$ ipython notebook
[NotebookApp] .... lots of info about the IPython notebook server including
[NotebookApp] The IPython notebook is running at 'http://127.0.0.1:8888/' 
```

请注意，我已经转发了端口 8889 - 这意味着我`http://localhost:8889/`在我`at-home`机器上的浏览器中使用。对我来说，这与 Qt4Agg 后端配合得很好。

`ssh -X`我怀疑如果您以这种方式运行 IPython 笔记本服务器（即：从会话中），它也可以通过 https 访问笔记本。请注意，这些图将出现在转发 X 会话的机器上。如果有人在另一台机器上的浏览器中运行笔记本，这可能有点奇怪！

可以告诉正在运行的 IPython 笔记本服务器如何找到由一些新的 ssh 会话转发的 X 服务器，但我不确定如何（欢迎知识编辑！）。

# data-structures - 二项式堆的融合/合并应该一次性完成还是两次？

> ID：11462626
> 
> 赞同：4
> 
> 时间：2012-07-13T00:34:58.423
> 
> 标签：data-structures, functional-programming, binomial-heap

Okasaki 在*Purely Functional Data Structures*（第 22 页）中的实现分为两部分：一是合并森林，一是传播进位。这让我觉得比一次性版本更难分析，也可能更慢。我错过了什么吗？

冈崎的实现：

```
函子 BinomialHeap (元素:ORDERED):HEAP=
结构
  结构元素=元素
  数据类型 Tree = int*Elem.T*Tree 列表的节点
  类型堆 = 树列表
  有趣的链接（t1 作为节点（r，x1，c1），t2 作为节点（_，x2，c2））=
    如果 Elem.leq(x1,x2)
    然后节点 (r+1,x1,t2::c1)
    否则节点 (r+1,x2,t1::c2)
  有趣的 insTree (t,[])=[t]
     |insTree (t,ts as t'::ts')=
        如果排名 t < 排名 t' 则 t::ts 否则 insTree(link(t,t'),ts')
  fun insert (x,ts)=insTree(Node(0,x,​​[]),ts) (*仅供参考*)
  有趣的合并 (ts1,[])=ts1
     |合并 ([],ts2)=ts2
     |合并（ts1 作为 t1::ts1'，ts2 作为 t2:ts2'）=
        如果排名 t1 < 排名 t2 则 t1::merge(ts1',ts2)
        否则，如果排名 t2 < 排名 t1 则 t2::merge(ts1,ts2')
        否则 insTree（链接（t1，t2），合并（ts1'，ts2'））
结尾
```

这让我觉得很难分析，因为你必须证明传播所有进位的成本的上限（见下文）。我想出的自上而下的合并实现更明显是 O(log n) 其中 n 是较大堆的大小：

```
函子 BinomialHeap (元素:ORDERED):HEAP=
结构
  结构元素=元素
  数据类型 Tree = int*Elem.T*Tree 列表的节点
  类型堆 = 树列表
  有趣的排名 (Node(r,_,_))=r
  有趣的链接（t1 作为节点（r，x1，c1），t2 作为节点（_，x2，c2））=
    如果 Elem.leq(x1,x2)
    然后节点 (r+1,x1,t2::c1)
    否则节点 (r+1,x2,t1::c2)
  有趣的 insTree (t,[])=[t]
     |insTree (t,ts as t'::ts')=
        如果排名 t < 排名 t' 则 t::ts 否则 insTree(link(t,t'),ts')
  有趣的插入 (x,ts)=insTree(Node(0,x,​​[]),ts)

  有趣的合并（ts1，[]）=ts1
     |合并([],ts2)=ts2
     |合并（ts1 作为 t1::ts1'，ts2 作为 t2::ts2'）=
        如果排名 t1 < 排名 t2 则 t1::merge(ts1',ts2)
        否则，如果排名 t2 < 排名 t1 则 t2::merge(ts1,ts2')
        否则 mwc（链接（t1，t2），ts1'，ts2'）
  (*mwc=与进位合并*)
  和 mwc (c,ts1,[])=insTree(c,ts1)
     |mwc (c,[],ts2)=insTree(c,ts2)
     |mwc (c,ts1 作为 t1::ts1', ts2 作为 t2::ts2')=
        如果等级 c < 等级 t1
        那么如果排名 c < 排名 t2 则 c::merge(ts1,ts2)
                  否则 mwc（链接（c，t2），ts1，ts2'）
        否则 mwc（链接（c，t1），ts1'，ts2）
结尾

```

证明 Okasaki 的实现是 O(log n)：如果进位是“昂贵的”（需要一个或多个链接），那么它会产生零。因此，下一个昂贵的进位将在到达该点时停止。因此，传播所有进位所需的链接总数不超过传播前二进制表示的总长度，该长度以 ceil(log n) 为界，其中 n 是较大堆的大小。

# gwt - PlayN GWT 托管模式 BufferOverflowException

> ID：11462628
> 
> 赞同：1
> 
> 时间：2012-07-13T00:35:10.617
> 
> 标签：gwt, nio, playn, gwt-hosted-mode

我正在尝试获取 PlayN 演示并展示在 Eclipse 中工作的案例。

**当我使用maven**构建/运行“Cute”示例时：

```
/path-to/playn-samples/cute$ mvn -Phtml integration-test 
```

*它工作正常，我可以在http://localhost:8080/*上看到演示

 ***但是当我在托管模式下**在 eclipse 中运行 GWT 时，它似乎编译得很好，但是一旦在浏览器中（*http://127.0.0.1:8888/CuteGame.html?gwt.codesvr=127.0.0.1:9997*）我得到一个FireBug 控制台中的错误（一直重复，直到我关闭浏览器选项卡）

```
uncaught exception: java.lang.RuntimeException: Native buffer required java.nio.DirectFloatBufferU[pos=0 lim=640 cap=640]
uncaught exception: java.nio.BufferOverflowException 
```

知道这可能是什么吗？

编辑：这是我正在使用的版本：

*   播放N 1.4
*   GWT 2.4
*   日蚀靛蓝
*   火狐 13.0.1
*   爪哇 6
*   视窗 7, 64 位
*   托管模式适用于其他项目。*

# java - 使用按钮组使复选框不可选择

> ID：11462629
> 
> 赞同：1
> 
> 时间：2012-07-13T00:35:13.180
> 
> 标签：java, swing, user-interface

我有复选框。我有一个按钮组。当我单击选项“所有复选框”时，我希望按钮组中的所有复选框都无法选择（灰显）（除了选中的“所有复选框”。）我该怎么做？

另外，如何使用 NetBeans 添加项目/将项目设置到组合框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:59:17.920

> 我有复选框。我有一个按钮组。当我单击选项“所有复选框”时，我希望按钮组中的所有复选框都无法选择（灰显）（除了选中的“所有复选框”。）我该怎么做？

ButtonGroup 不能用于灰显（功能上*和*可见地禁用）JCheckBox。最好将它们放在`List<JCheckBox>`“All CheckBoxes”的ActionListener 中，通过调用`setEnabled(true/false)`列表中的项目进行迭代，该参数取决于“All Checkboxes”JCheckBox 的状态。

> 另外，如何使用 NetBeans 添加项目/将项目设置到组合框？

我不知道如何“使用 NetBeans”来做到这一点，但是使用 Swing，您只需获取 JComboBox 的模型，通常是 DefaultComboBoxModel，并向其中添加项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T02:38:35.610

> 另外，如何使用 NetBeans 添加项目/将项目设置到组合框？

就像您通常使用 Swing 一样，comboBox.setModel(comboBoxModel)。不要依赖表单编辑器为您完成。有些东西你只需要弄脏你的手。

# android - ActionBarSherlock Tab、ViewPager 和像 Foursquare 这样的 MultiFragments

> ID：11462638
> 
> 赞同：3
> 
> 时间：2012-07-13T00:37:15.383
> 
> 标签：android, android-fragments, android-actionbar, android-viewpager, actionbarsherlock

![在此处输入图像描述](../Images/62a3037740ec46ccefe99a64693df636.png)

我想创建一个带有标签导航和 ViewPager 的 ActionBarSherlock，比如 Foursquare。我正在使用此[页面](http://graetzer.org/index.php/2012/03/android-actionbarsherlock-mit-tabs-und-viewpager/)中的代码。我想要的是在第一个选项卡（打印屏幕中的朋友选项卡）中，我想从主片段创建新片段。简而言之，在 Foursquare 中，朋友选项卡有一个时间线，显示您朋友的签到，如果您单击签到行，它会转到此签到的详细信息。我的愿望和 Foursquare 一样。如何使用带有选项卡导航和 ViewPager 的 ActionBarSherlock 管理此操作（创建新窗口 -Fragment 或 Activity-）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:45:21.470

我有同样的问题，那是我想用两个栏创建的菜单，但目前我不能。我在 Android 开发者论坛[http://developer.android.com/design/patterns/actionbar.html](http://developer.android.com/design/patterns/actionbar.html)中找到了这篇文章，他们在标题为拆分操作栏的布局注意事项下讨论了不同的操作栏：

1.  顶部将是主要操作栏。在您的示例中：foursqare，刷新并设置位置
2.  顶栏：用于选项卡。朋友，探索，我
3.  底栏：在屏幕底部

如果有人解决了你的问题，我不知道如果是这样，请告诉我你是否使用过这个

谢谢

# asp.net-mvc - ASP.NET Web API 表单身份验证子应用程序

> ID：11462642
> 
> 赞同：1
> 
> 时间：2012-07-13T00:37:26.340
> 
> 标签：asp.net-mvc, asp.net-web-api, forms-authentication

我在同一个域下设置了 2 个 ASP.NET MVC Web 应用程序。一个只是一个标准的 MVC 网站。另一个是 Web API 项目。现在我只是在本地设置。

```
* http://localhost/myapp
* http://localhost/api 
```

我正在使用表单身份验证登录到 Web 应用程序，然后通过 jQuery $.get 请求访问 api 应用程序。有没有办法与 API 应用程序共享来自 Web 应用程序的表单身份验证？同样，这些是 2 个独立的应用程序，但共享相同的根域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T01:49:23.930

我找到了答案。我只需要在我的两个应用程序的 web.config 文件中添加一个匹配的 machineKey 元素。

```
<machineKey validationKey="..."
            decryptionKey="..."
            validation="SHA1"
            decryption="AES"
            /> 
```

# php - PHP打印和回显不起作用

> ID：11462644
> 
> 赞同：0
> 
> 时间：2012-07-13T00:37:33.787
> 
> 标签：php

我是 PHP 新手，我正在制作这个表格，我想打印一些数据，但它没有显示。它有什么问题？这是代码：

```
<form name="input" action="check.php" method="get">
            Unit number: 
            <input type="number" name="unit" />
            <input type="submit" value="Submit" />
            </form>

            <table>
            <tr><td class="check-table">
            <?php
            if($_GET[unit] = null) $output="<p>Please Enter A Unit Number</p>";
            echo $output;
            ?>
            </td></tr></table> 
```

请帮忙？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T00:41:02.843

更好的方法是：

```
if (empty($_GET['unit'])) {
    $output="<p>Please Enter A Unit Number</p>";
    echo $output;
} 
```

原因：

1.  你检查变量是否存在
2.  您使用`'`引号作为数组键名
3.  `$output`仅在必要时才输出变量。在你的情况下 - 你输出它即使它不存在
4.  您还混淆了`==`(comparison operator) 和`=`(assignment operator)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T00:38:59.747

我认为您错过了 $_GET['unit'] 中的单引号

```
<?php
            if($_GET['unit'] = null) $output="<p>Please Enter A Unit Number</p>";
            echo $output;
            ?> 
```

# excel - 在 ADO.NET 4.0 中处理与多个 Excel 文件的多个连接的正确方法是什么？

> ID：11462649
> 
> 赞同：4
> 
> 时间：2012-07-13T00:38:07.603
> 
> 标签：excel, .net-4.0, ado.net, .net-2.0, oledb

我有一段使用 VS 2005 编写的代码，它在运行 .NET 2.0 的计算机中运行良好，但在运行 .NET 4.0 的计算机中出现严重崩溃。

导致问题的代码部分是对 DataAdapter 的 Fill() 方法的调用。代码如下所示：

```
private void button_Click(object sender, EventArgs e)
{
    DataTable dt1 = new DataTable();
    string connectionString = ... //connects to excelfile1.xls
    string selectCommand = "SELECT * FROM [Sheet1$]";

    using(OleDbDataAdapter adapter = new OleDbDataAdapter(selectCommand, connectionString))
    {
        adapter.SelectCommand.Connection.Open();
        adapter.Fill(dt1);
    }

    DataTable dt2 = new DataTable();
    connectionString = ... //connects to excelfile2.xls

    using(OleDbDataAdapter adapter = new OleDbDataAdapter(selectCommand, connectionString))
    {
        adapter.SelectCommand.Connection.Open();
        adapter.Fill(dt2);
    }
} 
```

如果我对代码稍作修改，会发生几件事：

1.  如果我删除对 OleDbConnection.Open() 的两个调用，代码将在 .NET 2.0 中正常工作，但在 .NET 4.0 中会严重崩溃。

2.  如果我只删除对 OleDbConnection.Open() 的第二次调用，则代码将在 .NET 2.0 和 .NET 4.0 中正常工作。唉，每次触发事件时，我都需要从两个单独的 excel 文件中检索数据并填充两个单独的数据表。

3.  如果我同时使用对 OleDbConnection.Open() 的调用，如上面的代码所示，该代码将在 .NET 2.0 和 .NET 4.0 中正常工作，但在用户第二次或第三次单击按钮，程序运行。

我的猜测是 .NET 4.0 管理连接的方式与 .NET 2.0 不同，我错过了一些非常重要的步骤。

有人可以告诉我应该如何编写上述代码，使其在 .NET 2.0 和 .NET 4.0 下可以正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:28:49.617

问题是“应用程序验证程序”。

# java - 数组中的 Java 测试元素

> ID：11462653
> 
> 赞同：-1
> 
> 时间：2012-07-13T00:38:41.457
> 
> 标签：java, arrays, search, for-loop, element

> **可能重复：**
> [在 Java 中，如何测试数组是否包含某个值？](https://stackoverflow.com/questions/1128723/in-java-how-can-i-test-if-an-array-contains-a-certain-value)

我正在尝试做一种：

```
for(String s : myArray)
{
    if(s is in newArray) //how do you test this? i want something like
                        //if(newArray.indexOf(s)!=-1)
    {
        //do nothing
    }
    else
    {
        //add to newArray
    }
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T00:43:38.077

```
if(newAray.contains(s))
{
    //do nothing
}
else
{
    //add to newArray
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T00:48:30.467

您不能随意将项目添加到数组中，因为数组的大小是固定的。您需要先将数组转换为列表，然后将项目添加到列表中，最后将列表转换回数组：

```
List<String> tmp = new ArrayList<String>(Arrays.asList(newArray));
for(String s : myArray) {
    if(!tmp.contains(s)) {
        tmp.add(s);
    }
}
newArray = tmp.toArray(new String[tmp.size()]); 
```

# ruby-on-rails - Thinking-Sphinx 未在控制台或通过 Web 应用程序返回任何结果

> ID：11462659
> 
> 赞同：0
> 
> 时间：2012-07-13T00:39:28.020
> 
> 标签：ruby-on-rails, carrierwave, thinking-sphinx

类似于这些：[sphinx-not-indexing](https://stackoverflow.com/questions/2055033/thinking-sphinx-not-indexing-newly-added-records)，[thinking-sphinx 在控制台中返回空结果](https://stackoverflow.com/questions/10091367/thinkingsphinx-returning-empty-result-in-console)，[类似这里](https://stackoverflow.com/questions/6804776/thinking-sphinx-and-console)

问题描述是这样的：我无法使用 Sphinx 的任何参数得到任何结果。我有一个 hdd 脚手架，当我尝试使用 sphinx 在 rails 控制台中执行搜索时，我得到 []，即使我知道数据库中有项目也是如此。如果我执行 Hdd.search()，我应该得到与 Hdd.all 相同的结果，但我得到的是 []。我看到了一篇关于做 Hdd.search().to_a 的帖子，但这对我来说并没有什么不同，我得到了 nil。对于其他人来说，他们有时在网页上得到的结果与他们的 rails 控制台不同，但对我来说不是这样。我的网站也有搜索功能，它也产生 [] 。

有趣的是，从它上次工作到现在它失败了，我所做的只是添加一些小的修改——即更改模型和视图，进行一些迁移，然后安装一个新插件，carrierwave。现在，似乎在所有这些之间，搜索不起作用。我已经重新启动，重建，重新索引思考狮身人面像，但无济于事。我也重新启动了服务器，甚至在 webrick 而不是 apache 下运行它，但问题基本上保持不变。

输出：

耙 ts：重建

```
using config file '/home/adam/RailsForensicsHardDriveApp/ForensicsHDD/config/development.sphinx.conf'...
indexing index 'hdd_core'...
collected 6 docs, 0.0 MB
sorted 0.0 Mhits, 100.0% done
total 6 docs, 292 bytes
total 0.006 sec, 47510 bytes/sec, 976.24 docs/sec
indexing index 'hdd_delta'...
collected 0 docs, 0.0 MB
total 0 docs, 0 bytes
total 0.003 sec, 0 bytes/sec, 0.00 docs/sec
skipping non-plain index 'hdd'...
total 4 reads, 0.000 sec, 3.8 kb/call avg, 0.0 msec/call avg
total 14 writes, 0.000 sec, 2.5 kb/call avg, 0.0 msec/call avg
Started successfully (pid 6700). 
```

我注意到我在上面的 ^ 中有一行写着“**跳过非普通索引'hdd'......** ”

我不知道这意味着什么，但听起来它没有做它应该做的事情。

我曾尝试使用 ruby​​ debug 调试该功能，但尚未产生任何成果。我希望其他人从我发布的内容中得到一些可以帮助我的建议。

我已经运行了 rake rails:update 我已经卸载并重新安装了 thinking-sphinx gem

在[这个要点](https://gist.github.com/938b934c642b48b1cbbb)中，我包含了相关文件。你可以看到，在模型中，我试图通过扩展大小来消除连接空间太小的问题，但这也没有什么不同。

我已经阅读了有关与乘客一起设置[狮身人面像的](http://freelancing-god.github.com/ts/en/common_issues.html#deltas)[deltas 文档](http://freelancing-god.github.com/ts/en/deltas.html)和常见问题解答（是的，我正在与乘客一起运行轨道），我不觉得这两个都是问题，因为我在狮身人面像神秘地运行之前运行得很好（对我来说）停止正常运行。

老实说，我不知道为什么它不起作用。我在 git 下拥有整个项目，并且我尝试在它工作时回滚到早期版本，重建索引并执行搜索，但这似乎不起作用。我试过删除数据库并重新创建它，重新迁移，然后重建 sphinx，但这也没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T06:51:16.057

*跳过非普通索引“hdd”*是可以的 - 这是分布式索引，不能被索引。如果您查看索引器输出

```
collected 6 docs, 0.0 MB 
```

这意味着索引中只有六个文档。如果您没有从 Sphinx 收到任何错误，则可能是您没有任何与您的搜索匹配的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T01:04:04.173

我发现当我执行 sudo apt-get purge sphinxsearch 并因此重新安装它时，它以某种方式阻止了服务器盲目地继续执行错误。如果您查看我发布的模型，您会发现我有一个用于开发类型的特殊字段，我是通过迁移移入的。我认为这会阻止它工作，因为在我重新安装 thinking-sphinx （作为 gem 和 apt 包）后，我遇到了一些非常奇怪的错误。重新安装后，删除数据库并编辑迁移以使其现在是 hd_type 而不是 type，我能够成功地重新索引 hdd 并填充搜索结果。我知道这并不完全准确，

[请在此处](https://stackoverflow.com/questions/2055033/thinking-sphinx-not-indexing-newly-added-records/11462723#11462723)查看我的答案，该答案链接回本文，以防它提供的上下文与此答案的作用不同，我认为它没有。

# ipad - 在 WIFI 上，reachabilityForLocalWiFi 的状态是 ReachableViaWWAN？

> ID：11462661
> 
> 赞同：0
> 
> 时间：2012-07-13T00:39:57.913
> 
> 标签：ipad, wifi, reachability, wwan

我需要检测设备是否连接到 WIFI：

```
reach = [Reachability reachabilityForLocalWiFi];
status = [reach currentReachabilityStatus]; 
```

但是当我在 iPad 上连接到 WIFI 时状态是 WWAN，并且没有插入 SIM 卡，我将用 SIM 卡测试状态。

有谁知道原因？

编辑：

刚用SIM卡试了一下，还是识别为ReachableViaWWAN，但是实际连接是通过3G（服务器只允许3G连接，WIFI会失败），所以我猜Reachability可能会随着时间的推移而变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T00:54:28.650

终于搞清楚了，我使用的Reachability类是ASIHTTPRequest的一部分，是一个修改版，修改的方式是重写了一个方法，但是旧的方法（同一个签名）没有去掉，这个直到我为项目中使用的 3RD 方库创建了一个静态库，它将方法声明与不适合修改后的可达性框架的旧方法链接起来，才产生麻烦（即调用新方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-16T06:08:04.650

可达性*可达性=[可达性可达性ForInternetConnection]; BOOL remoteHostStatus = [可达性 currentReachabilityStatus];

```
if (remoteHostStatus == ReachableViaWiFi || remoteHostStatus == ReachableViaWWAN)

{
    [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    NSMutableDictionary *dict                       =   [[NSMutableDictionary alloc] initWithObjectsAndKeys:textFieldUserName.text,@"email",textFieldpass.text,@"password", nil];
    objApp.responseData      = [[NSMutableData data]init];
    objApp.request           = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@login",mainUrl]]];
    NSData * requestBodyData                        =   [NSJSONSerialization dataWithJSONObject:dict options:0 error:NULL];
    objApp.request.HTTPMethod=     @"POST";
    [objApp.request setHTTPBody:requestBodyData];

    [objApp.request setTimeoutInterval:8.0f];
    // Create url connection and fire request
    objApp.connection = [[NSURLConnection alloc] initWithRequest:objApp.request delegate:self];
}
else
{
    [objApp alertViewFromApp:@"check internet connection of device"];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-02T05:02:21.923

**步骤1：-**

**导入系统配置**

**第2步：-**

```
 //MARK:- Internet available or Not
public  static  func isConnectedToNetwork() -> Bool {

    var zeroAddress = sockaddr_in()
    zeroAddress.sin_len = UInt8(sizeofValue(zeroAddress))
    zeroAddress.sin_family = sa_family_t(AF_INET)
    let defaultRouteReachability = withUnsafePointer(&zeroAddress) {
        SCNetworkReachabilityCreateWithAddress(nil, UnsafePointer($0))
    }
    var flags = SCNetworkReachabilityFlags()
    if !SCNetworkReachabilityGetFlags(defaultRouteReachability!, &flags) {
        return false
    }
    let isReachable = (flags.rawValue & UInt32(kSCNetworkFlagsReachable)) != 0
    let needsConnection = (flags.rawValue & UInt32(kSCNetworkFlagsConnectionRequired)) != 0

    return (isReachable && !needsConnection)
} 
```

**第 3 步：-**

```
 if Global.isConnectedToNetwork() { 
```

}

# spring - 用 Spring 智能地获取 EhCache 实例

> ID：11462662
> 
> 赞同：8
> 
> 时间：2012-07-13T00:40:02.547
> 
> 标签：spring, ehcache

我需要按名称获取特定的 EhCache 实例，如果可能的话，我更喜欢自动装配。给定以下自动配置的控制器，我如何在我正在寻找的缓存实例中自动装配？

```
@Controller 
public class MyUniqueService {
    ...
} 
```

* * *

```
<beans ...>
    <ctx:component-scan base-package="my.controllers"/>
    <mvc:annotation-driven />
</beans> 
```

如何在我的应用程序上下文中配置 EhCache？我没有看到来自 EhCache 的任何关于它在我的`/WEB-INF/`目录中加载 ehcache.xml 文件的日志消息。我如何让它加载它？

如何将 EhCache 与我的 Spring 应用程序集成以使其`ehcache.xml`从我的`/WEB-INF/`目录中加载文件并将给定名称的缓存自动连接到我的`MyUniqueService`控制器中？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-13T11:36:57.097

首先，您需要在应用程序上下文中创建一个 Ehcache CacheManager 单例，如下所示：

```
<bean id="myEhCacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
    <property name="configLocation" value="classpath:my-ehcache.xml"/>
</bean> 
```

这里`configLocation`设置为从类路径加载或使用`value="/WEB-INF/my-ehcache.xml"`.

在您的控制器中只需注入`CacheManager`实例：

```
@Controller 
public class MyUniqueService {

    @Resource(name="myEhCacheManager")
    private CacheManager cacheManager;

    ...
} 
```

* * *

或者，如果您想走“完全自动布线”的路线，请执行以下操作：

```
<bean class="org.springframework.cache.ehcache.EhCacheCacheManager">
    <property name="cacheManager">
        <bean class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
            <property name="configLocation" value="/WEB-INF/ehcache.xml"/>
        </bean>
    </property>
</bean> 
```

像这样设置你的课程：

```
@Controller
public class MyUniqueService { 

    @Autowired
    private org.springframework.cache.CacheManager cacheManager;

    public org.springframework.cache.Cache getUniqueObjectCache() {
        return cacheManager.getCache("uniqueObjectCache");
    }
} 
```

`uniqueObjectCache`对应于`ehcache.xml`缓存定义中的此缓存实例：

```
<cache name="uniqueObjectCache"
       maxElementsInMemory="10000"
       eternal="false"
       timeToIdleSeconds="300"
       timeToLiveSeconds="600"
       memoryStoreEvictionPolicy="LRU"
       transactionalMode="off"/> 
```

没有办法注入实际的缓存实例，但如上所示，您可以注入缓存管理器并使用它来获取您感兴趣的缓存。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-02-05T11:18:11.203

假设您定义了 cacheManager：

```
<bean id="cacheManager"
    class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
    <property name="configLocation" value="classpath:/ehcache.xml"/>
</bean> 
```

您可以像这样获取/注入特定的缓存：

```
@Value("#{cacheManager.getCache('myCacheName')}")
private Cache myCache; 
```

如果您有兴趣，另请参阅`@Value()` [http://www.mkyong.com/spring3/spring-el-method-invocation-example/](http://www.mkyong.com/spring3/spring-el-method-invocation-example/)中如何使用 Spring EL 的示例。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-17T21:16:27.327

如果上下文可以找到具有正确类的 bean，您也可以使用 autowire。这是我配置xml的方式

```
<bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
    <property name="configLocation">
        <value>WEB-INF/ehcache.xml</value>
    </property>
</bean>

<bean id="cache" class="net.sf.ehcache.Cache" factory-bean="cacheManager" factory-method="getCache">
    <constructor-arg value="CacheNameHere" />          
</bean> 
```

还有我的java课

```
@Autowired
private net.sf.ehcache.Cache cache; 
```

这个设置对我有用。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-13T13:00:47.433

的确！或者，如果您想使用 java 配置类：

```
 @Inject
        private ResourceLoader resourceLoader;

        @Bean
        public CacheManager cacheManager() {
            EhCacheCacheManager ehCacheCacheManager = new EhCacheCacheManager();
            try {
                ehCacheCacheManager.setCacheManager(ehcacheCacheManager().getObject());
            } catch (Exception e) {
                throw new IllegalStateException("Failed to create an EhCacheManagerFactoryBean", e);
            }
            return ehCacheCacheManager;
        }

        @Bean
        public FactoryBean<net.sf.ehcache.CacheManager> ehcacheCacheManager() {
            EhCacheManagerFactoryBean bean = new EhCacheManagerFactoryBean();
            bean.setConfigLocation(resourceLoader.getResource("classpath:ehcache.xml"));
            return bean;
        } 
```

# ruby-on-rails - 试图在 Rails 控制器中创建一个方法

> ID：11462664
> 
> 赞同：1
> 
> 时间：2012-07-13T00:40:47.117
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我仍在尝试掌握 rails 的窍门，我正在尝试使用表单创建一个简单的应用程序，我可以在其中输入数据然后提交它，它将存储在数据库中。通过开始一个新项目然后运行，我变得非常简单：

```
$ rails generate scaffold RSVP firstName:string lastName:string 
```

现在我想在通过表单添加新记录后重定向到感谢页面。

我已手动将以下方法添加到我的 rsvps_controller.rb 文件中：

```
# GET /rsvps/thank_you
  def thank_you
    respond_to do |format|
      format.html # thank_you.html.erb
      format.json { render json: @rsvps }
    end
  end 
```

这一行在我的路线文件中：

```
resources :rsvps 
```

我的问题是，当我运行 rake 路线时，我没有看到我的thank_you 方法的路线。我的 :rsvps 资源不应该选择我的thank_you 路由吗？路由如何知道哪个控制器方法是哪个http 调用（get、post、put 等）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T00:53:18.840

为了获得将在您的控制器中执行该操作的路由，您应该在您的 routes.rb 文件中包含以下内容：

```
resources :rsvps do
  member { get :thank_you }
end 
```

或者

```
resources :rsvps do
  collection { get :thank_you }
end 
```

这取决于您是否要访问刚刚创建的资源。

你可以看看@http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)它应该可以帮助你更好地理解路由机制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T03:21:35.630

除了 wlad 所说的，您的 routes.rb 文件中的资源 :rsvps 东西创建了一组大多数模型都需要的默认路由。诸如索引、新建、创建或显示之类的东西。你的thank_you 动作没有出现在rake 路由中的原因是因为thank_you 不是一种非常常见的动作，它们需要在没有额外代码的情况下直接包含在内。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T19:32:29.587

您可以向任何控制器添加更多操作，但 Rails 不会将此功能视为操作，除非您在路由文件中指定它们。它将被视为用户创建的控制器类中的另一个函数。

因此，如果您想将thank_you 函数添加为操作，则需要将其添加到路由文件中。

正如其他人在回答中所解释的那样，有多种方法可以做到这一点。

*   [添加更多宁静的动作](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)

    使用`member`和`collection`里面`resources`。

    `member`当您希望函数仅用于某些模型对象时使用。例如：照片 id 1 的预览
    GET /photos/:id/preview

    在我们的示例中，`member`如果您想要这样的路线和功能。

    **获取 /rsvps/:id/thank_you**

    注意：当您将其指定为成员操作时，params 中的id 是必需的。

    ```
    resources :rsvps do
      member do 
        get :thank_you  #GET /rsvps/:id/thank_you(.:format)
      end
    end 
    ```

    `collection`如果您想直接调用操作，请使用

    **获取 /rsvps/thank_you(.:format)**

    在资源

    ```
    resources :rsvps do
      collection do 
          get :thank_you  #GET /rsvps/thank_you(.:format)
      end
    end 
    ```

    您需要在将其添加到路由时指定操作类型 (GET|POST)。

    在我们的示例中，thank_you 已被指定为 GET 操作。您可以选择其中任何一个。

您可以使用`match`. （这也需要在资源块中定义操作）。

`match`在这里查看更多信息[http://guides.rubyonrails.org/routing.html#non-resourceful-routes](http://guides.rubyonrails.org/routing.html#non-resourceful-routes)

我建议您阅读 Rails 团队创建的这个很棒的文档。（再一次；））[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

干杯。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-15T15:38:29.477

如果您需要在感谢页面上加载 rsvp 模型以显示该模型中的任何数据，那么您将需要使用成员路由。路由中的 :id 将在那里，因为这是一个资源成员路由，并且必须与特定资源相关联。url 中必须有一些东西才能知道要加载什么。

```
resources :rsvps do
  member { get :thank_you } #GET /rsvps/:id/thank_you(.:format)
end 
```

如果您只想要一个指向该控制器操作的通用路由，那么您可以使用如下内容：

匹配“/rsvps/thank_you”=>“rsvps#thank_you”，如：“rsvp_thank_you”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T05:53:52.210

正如您所说，您只想为每个 rsvp 显示一个感谢页面，因此应该使用成员路由。像这样

```
resources :rsvps do  
  member get :thank_you
end 
```

当您想显示所有或某些特定的thank_you 集合时，您应该使用thank_you 集合。

当您包含此内容并再次运行 rake 路由时，您将在那里看到新的 http 操作。

# symfony - Assetic - 路线“_assetic_001d5b7_0”不存在

> ID：11462673
> 
> 赞同：22
> 
> 时间：2012-07-13T00:42:02.337
> 
> 标签：symfony, assetic

这个问题似乎已经被问过多次，但没有一个解决方案对我有用。

我在我的产品环境中，这是我所做的：

*   在做任何事情之前/之后清除缓存
*   尝试注释掉 config_dev 中的 _assetic 东西并确保它不在其他任何地方（这在 prod env 中并不重要）
*   将 use_controller 设置为 true 和 false （显然适用于 true 但不使用编译后的文件）

还有什么我想念的吗？`php app/console assetic:dump --env=prod --no-debug` 从文件名匹配错误中的文件名减去路径内容，文件生成完全正常 。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-13T11:57:13.030

我在一分钟前遇到了这个问题。清理缓存对我有用：

```
app/console cache:clear --env=prod 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-09-30T17:57:39.413

如果清除缓存或转储资产不起作用。试试noisebleed的评论：

```
// app/config_dev.yml
assetic:
    use_controller: true
    bundles: ['FooBarBundle'] 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-11-20T16:19:20.330

也许您已经从 app/routing_dev.yml 中删除了资产路由

```
_assetic:
    resource: .
    type:     assetic 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-23T13:56:04.907

面临同样的问题，但原因是我将模板命名为“something.twig”，而不是“something.html.twig”。

它似乎资产不扫描扩展名中没有 .html 的模板。

结果 - 模板工作，但资产不执行从它的资产转储/添加路线。添加 .html 解决了这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-27T09:13:17.357

使用哑字符（换行符、空格）更新 config.yml 会删除该错误。似乎通过这样做，我们强制重新生成缓存。(Symfony 3.0.0)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-17T19:15:12.490

也许为时已晚，但是……对我有用的是：

```
php composer.phar install
php app/console cache:clear
php app/console cache:warmup 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-04T19:49:23.413

在这里尝试了所有建议的解决方案后，对我来说，这只是模板名称的问题。我有`.twig`但没有`.html.twig`扩展，仅此而已。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-11T15:00:52.370

就像@Marcus 所说，如果您尝试过：

```
php bin/console cache:clear 
```

它没有帮助，请`your_project_root/var/cache`手动清除文件夹（删除所有文件夹和文件）。如果您使用 unix/linux 系统，并且收到类似“删除文件时出错：权限被拒绝”的系统消息，您需要先更改对 dir 的访问权限，例如您可以使用控制台命令

```
sudo chmod -R 0777 /your_site_directory/var/cache/ 
```

在此之后，您可以清除缓存目录。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-30T21:16:00.480

在尝试覆盖我的 Twig 模板目录后，我在 Symfony 3.3 中遇到了这个问题。不知道如何解决这个问题，但现在恢复到默认模板目录配置解决了这个问题。

```
# config.yml
twig:
    paths: ["%kernel.project_dir%/templates"] # Remove this line to use default dir 
```

# c++ - 变量未在范围内声明的 C++ 奇怪错误，显然是

> ID：11462675
> 
> 赞同：-1
> 
> 时间：2012-07-13T00:42:12.413
> 
> 标签：c++, scope

我目前正在尝试使用变量“breakOK”进行非常简单的检查，以跳出 for 循环。如果满足我的拼图矩阵中的当前值设置为 46 的条件，则调用一个函数并将 breakOK 设置为 1，以便我们可以跳出循环。但是，在下面代码的 if 语句中使用 breakOK 时出现以下错误：

```
sudoku.cc:482:13: error: 'breakOK' was not declared in this scope

sudoku.cc:485:11: error: 'breakOK' was not declared in this scope 
```

这真的很奇怪，因为我以相同的方式声明 Guess，并且稍后在我的代码中使用它时不会出现范围错误！此外，当我在循环中设置 breakOK 等于 1 时，编译器不会抱怨。任何帮助将不胜感激，我已经坚持了太久了！

```
int Guess = 0; // will be set to a value if a guess is ok

int breakOk = 0; // will be set to 1 if breaking out of loops is necessary

for (int row = 0; row < 9; row++)
{
  for (int col = 0; col < 9; col++)
  {
    if (puzzle.matrix[row][col].currentValue == 46)
    {

      Guess = guessValues(row, col, puzzle, tried, allowed);
      breakOk = 1;

    }
    if (Guess != 0)
    {
      tried[row][col].tries.push_back(Guess);
      //puzzle.decide(row, col, Guess);
      puzzle.matrix[row][col].currentValue = Guess;
    }
    if (breakOK == 1) // line 482
      break;
  }
  if (breakOK == 1) // line 485
    break;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T00:46:03.690

你声明`breakOk`，但检查`breakOK`。注意OK中的大写K。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T00:46:10.207

这是因为您的变量是 breakOk 并且您正在引用 breakOK

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T00:46:31.763

`breakOK`不一样`breakOk`。在`k`.

# mysql - 在 mysql 中有一种方法可以查询数据库中的字符串，但只进行字母数字比较（忽略特殊字符）

> ID：11462677
> 
> 赞同：0
> 
> 时间：2012-07-13T00:42:21.173
> 
> 标签：mysql, sql, alphanumeric

我试图弄清楚是否可以在 mysql 表中查询一个字符串，但让它忽略在数据库中查询的字段中的特殊字符....

一个更好的方式来澄清我想要实现的目标可能是一个例子。

如果我有一个名为“Games”的表，其中有 2 列是“id”和“title”，其中包含这些行：

```
id    title
-----------------------
1     f-zero
2     quake
3     quake 4 
```

我希望能够搜索“fzero”（注意搜索字符串没有连字符），即

```
SELECT g.* FROM Games as g WHERE alphanumeric(title) = "fzero"; 
```

这会以一种或另一种方式实现吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:54:26.090

如果标题属性值中有一些结构，则可以使用正则表达式条件，例如：

```
SELECT g.* FROM Games as g WHERE title REGEXP 'f[0-9\-!\\]*z[0-9\-!\\]*e[0-9\-!\\]*r[0-9\-!\\]*o[0-9\-!\\]*'; 
```

# encryption - 我应该使用 RSACryptoServiceProvider.Encrypt 加密多少数据？

> ID：11462683
> 
> 赞同：1
> 
> 时间：2012-07-13T00:43:16.360
> 
> 标签：encryption

我在网上找到了一个使用 RSACryptoServiceProvider.Encrypt 加密和解密字符串的示例。直到现在我才意识到，这是一个坏主意吗？我是否应该使用 RijndaelManaged 之类的东西并使用 RSACryptoServiceProvider.Encrypt 加密密钥和 IV（48 字节），然后使用 AES 加密其余数据？

额外的问题：如果我尝试加密 1k+ 或给我糟糕的性能，RSACryptoServiceProvider 会炸毁我的脸吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:46:47.677

是的，将 RSA 与 Rijndael 结合使用是最佳解决方案。在相应的[MSDN](http://msdn.microsoft.com/ru-ru/library/system.security.cryptography.rsacryptoserviceprovider.encrypt.aspx)页面上有一个示例。

额外的答案：如果您尝试传递的数据多于提供程序实例允许的数据（对于默认的 1024 位（128 字节）密钥和默认的 PKCS#1.5 11 字节填充，它是 117 字节），将引发 CryptographicException。如果您尝试使用某种循环方法以块的形式传递数据，那么它会给您带来糟糕的性能。

# google-app-engine - Google App Engine Struts 2 中的会话超时

> ID：11462685
> 
> 赞同：0
> 
> 时间：2012-07-13T00:43:32.607
> 
> 标签：google-app-engine, struts2, session-timeout

Google App Engine 中的默认会话超时是多少？如何在 Struts 2 应用程序中的 Google App Engine 中设置会话超时。GAE 会议上有任何参考/文档吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:08:40.503

会话超时设置应通过标准方式完成，`web.xml`并且 App Engine 理想情况下会承认它。

例如

```
<session-config>
      <session-timeout>30</session-timeout> 
</session-config> 
```

这会将超时设置为 30 分钟。

# iphone - 应用程序大小限制和查找应用程序的大小

> ID：11462687
> 
> 赞同：7
> 
> 时间：2012-07-13T00:44:00.550
> 
> 标签：iphone, ios, xcode

好的，所以我读过无数地方说应用程序大小限制是 20 mb，有些人说它是 50mb ......这是什么？

更重要的是，我当前的应用程序在管理器的存档部分中的“估计应用程序商店大小”为 106.1mb。但是，当我将它分发到临时文件时，它以 .ipa 的形式出现，大小为 48.3mb。我应该使用哪一个，我很困惑为什么它们如此不同。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-13T00:46:57.773

官方（并且是最新的）资源是 iTunes Connect Guide 的[Uploading Your Binary](https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/SubmittingTheApp.html#//apple_ref/doc/uid/TP40011225-CH33-SW4)部分（展开“To begin the Ready to Upload Binary flow”部分）。在此编辑时，它指出：

> **iOS App 二进制文件最大可达 2 GB**，但可执行文件 (app_name.app/app_name) 不能超过 60 MB。但是，在确定您的应用程序大小时，请考虑下载时间。尽可能减小文件大小，记住**无线下载有 100 MB 的限制**。

无线下载限制意味着低于此阈值的应用程序可以通过移动数据连接下载（任何超过限制的应用程序都需要 WiFi 连接，或通过计算机上的 iTunes 下载）。这一点很重要，因为许多用户可能无法访问 WiFi，而您不想阻止他们获取您的应用程序！

.ipa 也是一个压缩的、加密的 zip 文件，而存档只是一个完全膨胀的应用程序包，这就是文件大小不同的原因。.ipa 文件大小将在 App Store 中使用，因此请使用它作为总大小的参考。也就是说，您的应用程序越小，用户显然就会越快乐！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T00:45:35.150

Apple 最近在 WWDC '12 后不久将尺寸从 20 增加到 50。我不确定它是否正式宣布，但在较大应用程序的错误消息中观察到。

![在此处输入图像描述](../Images/8a260a11f60dbbd5ea19c27648a89a39.png)

使用 IPA 大小。从应用商店发送的文件被压缩。也许 106.1 是未压缩的大小，或者它是一个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-18T20:30:43.983

## 今天，Apple 将无线 App Store 下载限制提高到 100MB。

![在此处输入图像描述](../Images/5390506a18c76217f73017f50ee533ff.png)

# php - 列表选项值无法插入数据库

> ID：11462688
> 
> 赞同：-4
> 
> 时间：2012-07-13T00:44:03.263
> 
> 标签：php, mysql

我创建了一个 php 表单来将值插入数据库。我的表单选项之一是一个动态列表，其中填充了另一个表中的字段。我首先创建了没有动态选项的表单，并且插入的所有数据都很好（现在仍然如此）。现在我试图包含下面的代码，虽然它正确显示了选项值，但该值无法插入。有什么建议吗？

```
 <?php
/*
 * LIST ALL CATEGORIES
 ****************************************/
 include('../dbconnection.php');

$query = 'SELECT category_id, category_name FROM ingredient_categories';
$result = mysql_query($query);

echo '<select>';
while ($ingredientCategoryOption = mysql_fetch_array($result)) {
  echo '<option value="'.$ingredientCategoryOption[category_id].'">'.$ingredientCategoryOption[category_name].'</option>';
}
echo '</select>';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:53:31.347

我昨天创造了类似的东西。该`$polls`数组被传递到 中的视图`CodeIgniter`，`$this->load->view('poll.php', $data['polls'])`而您在页面本身中执行此操作。但是，您可以大致了解一下。

```
<FORM id="formPoll" class="question" name="createpoll" action="<?php echo base_url()?>index.php/poll/selectOption/" method="POST">
     <select name="poll_list">
        <?php
        foreach($polls as $poll){
            echo "<option name='poll_table'>$poll->name</option>";
        }
        ?>
    </select>
     <div id="input">
        Poll name: <input type="text" name="name"></input>
        Title: <input type="text" name="title"></input>
     </div>
     <div id="options">
        Option: <input type="text" name="option"></input>
     </div>

     <input type="submit"></input>
</FORM> 
```

一些想法：

1.  使用前检查是否`$results`不为空
2.  `<select>`如上所示，为您的表单命名
3.  检查是否`$ingredientCategoryOption`不是`null`或是否返回了某些东西。
4.  检查您的数据库连接

# matlab-guide - 如何保存整个 matlab gui 面板？

> ID：11462693
> 
> 赞同：2
> 
> 时间：2012-07-13T00:45:53.143
> 
> 标签：matlab-guide

我可以使用 export_fig 过程保存特定的图形或轴。使用的命令如下：export_fig(handles.Myfigure, filename)。% 此代码可在线获取

但我正在尝试保存主 gui 的副本（如整个屏幕截图以保存记录）。如果我知道主面板的手柄，我想这可能会起作用。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:59:31.133

# objective-c - 设置一个在 IOS 应用程序的生命周期内运行的计时器

> ID：11462696
> 
> 赞同：1
> 
> 时间：2012-07-13T00:46:22.703
> 
> 标签：objective-c, ios, delegates, timer

我正在尝试找到一种方法来设置一个计时器，该计时器从安装应用程序时开始，即使应用程序在后台也能继续运行。我基本上是在使用定时器来定期检查连接到手机的外部设备的电池寿命。有人告诉我，最好的方法是对计时器函数使用某种委托调用，但我对 IOS 还很陌生，对如何做到这一点很困惑。我知道如何设置计时器并获得电池寿命，但是我对如何让计时器在应用程序的整个生命周期中保持不变感到困惑。您可以提供的任何帮助将不胜感激！非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T00:53:43.453

无法（永远）在后台运行应用程序。

但是当您的应用程序正在运行时......您可以将`repeats`方法的参数设置`scheduledTimerWithInterval:target:selector:userInfo:repeats:`为`YES`.

这是一个[链接](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)，它在后台运行一段时间以执行相对较大的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T00:50:01.090

> 即使应用程序在后台运行

不可能。您可以要求额外的 10 分钟，但仅此而已。您将无法按原样编写您的应用程序。

对于您问题的计时器部分，您可以这样做：

```
[NSTimer scheduledTimerWithTimeInterval:60.0
    target:self
    selector:@selector(checkBattery:)
    userInfo:nil
    repeats:YES]; 
```

但是您确实应该订阅有关电池更换事件的通知。[这是来自苹果的示例代码](http://developer.apple.com/library/ios/#samplecode/BatteryStatus/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008812)，展示了如何做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T00:53:42.330

康尼贝尔是对的。这是 iOS 政策，它完全是为了防止您尝试做的事情，即耗尽 iPhone（或 iPad）的电池寿命。

# java - 形成 Mockito “语法”

> ID：11462697
> 
> 赞同：52
> 
> 时间：2012-07-13T00:46:25.200
> 
> 标签：java, unit-testing, junit, mocking, mockito

Mockito 似乎是一个非常漂亮的 Java 存根/模拟框架。唯一的问题是我找不到任何关于使用他们的 API 的最佳方式的具体文档。测试中常用的方法包括：

```
doXXX(???) : Stubber
when(T) : OngoingStubbing
then(T) : OngoingStubbing
verify(???) : T
given(T) : BDDOngoingStubbing
willXXX(???) : BDDStubber 
```

当您在实践中看到 Mockito 的示例时，您会看到如下代码：

```
when(yourMethod()).thenReturn(5); 
```

从我读过的所有文档中，我已经确定了 Mockito “语法”的几个“模式”，这些模式是通过将这些方法调用以菊花链方式连接在一起的，就像上面的示例一样。我发现的一些常见模式是：

> **何时/然后：** when(yourMethod()).thenReturn(5);
> 
> **给定/将：**给定（yourMethod（））.willThrow（OutOfMemoryException.class）；
> 
> **做/当：** doReturn(7).when(yourMock.fizzBu​​zz());
> 
> **Will/Given/Do:** willReturn(any()).given(yourMethod()).doNothing();
> 
> **验证/执行：** verify(yourMethod()).doThrow(SomeException.class);

我正在窒息的是如何选择正确的方法调用模式/组合来为我的测试用例建模。似乎您可以将它们以看似无穷无尽的组合菊花链式连接在一起，我不确定哪种模式适合哪个问题。

一些 Mockito Guru 能否帮助阐明 Mockito 方法的哪些模式/组合用于哪些类型的测试用例（以及为什么）？提前致谢！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-14T01:02:51.800

`when/thenReturn`和`when/thenThrow`语法有几个缺点`when/then`。例如，

*   在 的情况下`when/thenReturn`，如果返回类型是带有通配符的泛型，并且您希望返回相同类型的模拟，您将无法避免编译警告。
*   您不能将`when/thenThrow`and`when/then`用于 void 方法。
*   您不能在 Mockito 间谍上使用这些语法。
*   模拟对象、方法和参数的每个组合只能调用`when`一次，除非`reset`在模拟上调用。
*   `when`当您使用参数匹配器时，为模拟对象和方法的一种组合多次调用可能会导致问题。

我发现这些案例很难记住。因此，与其尝试跟踪 `when/thenReturn`,`when/thenThrow`和`when/then`语法何时会起作用和不会起作用，我更愿意完全避免它们，而支持`doReturn/when`,`doThrow/when`和`doAnswer/when`替代方案。也就是说，由于你偶尔会需要`doReturn/when`,`doThrow/when`和`doAnswer/when`, 并且你总是可以使用这些方法，所以学习如何使用`when/thenReturn`,`when/thenThrow`和是没有意义的`when/then`。

请注意`doReturn`，`doThrow`和可以以与和`doAnswer`相同的方式链接`thenReturn`在一起。他们没有的是在一次调用中返回多个值（或抛出多个异常，或运行多个答案）的选项，和。但我发现我很少需要这样做，这并不重要。`thenThrow``then``doReturn``doThrow``doAnswer`

的还有一个缺点`doReturn`，我认为这无关紧要。您不会像使用`when/thenReturn`. 所以如果你弄错了参数类型，在你运行测试之前你不会发现。坦白说，我不在乎。

综上所述，我使用 Mockito 已经两年多了，我认为一致使用`doReturn`,`doThrow`和`doAnswer`是 Mockito 的最佳实践。其他 Mockito 用户不同意。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-13T01:54:19.197

Mockito 通常有几种做事方式。

我发现自己主要使用：

```
// Setup expectations
when(object.method()).thenReturn(value);
when(object.method()).thenThrow(exception);
doThrow(exception).when(object.voidMethod());

// verify things
verify(object, times(2)).method();
verify(object, times(1)).voidMethod(); 
```

我发现我可以通过这三种调用完成 95% 的操作。

另外，您使用的是什么版本的 Mockito？最新版本（1.9.0+）中不存在“given”和“will”结构

但是，在某些情况下，我希望返回值或异常响应输入。在这种情况下，您可以使用 Answer 接口检查方法参数并返回适当的值。

```
public class ReturnFirstArg<T> implements Answer<T> {
    public T answer(InvocationOnMock invocation) {
        return invocation.getArguments()[0];
    }
}

when(object.method(7)).thenAnswer(new ReturnFirstArg<Integer>()); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-13T04:18:40.893

事实上，事情看起来比你想象的要简单得多

参考：[http ://static.javadoc.io/org.mockito/mockito-core/2.7.12/org/mockito/Mockito.html](http://static.javadoc.io/org.mockito/mockito-core/2.7.12/org/mockito/Mockito.html)

**验证**：

为了使用 Mockito，您需要了解 Mockito 的一个基本理念：Stubbing 和 Verification 是分离的。因此，您提到的“验证/执行”实际上是在做“验证”工作，而其他 4 个“语法”是用于存根的。存根定义了模拟对象在不同情况下的反应方式。验证是为了确保在之前对被测系统 (SUT) 的调用中按预期调用了哪些模拟。

**何时/然后，给定/将**：

然后是“When”和“Given”系列。您可以简单地将它们视为彼此的别名。Mockito 1.8.x 中添加了“Given”系列，使其看起来更符合 BDD 实践。

**DoXxx** :

在正常情况下，我们主要使用`when(xxx).then(...)`(and `given(...).will(...)`) 。但是，在某些情况下，语法不起作用。最明显的情况是存根方法的返回类型为 void。在这种情况下`when(mockObj.voidMethod()).thenThrow(anException)`不会编译。作为一种解决方法，创建了 Do/When 的替代语法，因此您可以将上一行写为`doThrow(anException).when(mockObj.voidMethod())`

# windows - Windows 上的 Qt 不显示动画 GIF ins

> ID：11462704
> 
> 赞同：1
> 
> 时间：2012-07-13T00:47:24.680
> 
> 标签：windows, qt, windows-7, gif

我正在尝试在 Qt 4.7 和 4.8 上制作动画 GIF，它只是在 Windows 上不起作用： - 在 Linux 上运行良好 - 在 Wine 上的 Windows 上运行良好 - 但图像没有出现在 Windows XP 和 Windows 7 上, 但适用于 PNG

这是我的代码：

```
QMovie *movie = new QMovie(":/resources/loading");
QLabel *myLabel = new QLabel(this);
myLabel->setMovie(movie);
movie->start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T08:47:50.440

首先，对不起我的英语不好。我设法通过 3 个步骤解决了这个问题。我不知道这是否是正确的方法，但它有效！

1.  在应用程序的同一目录中创建一个文件夹名称“imageformats”。
2.  从您的 qt 插件目录中复制 qgif.dll 并粘贴到该文件夹​​中。
3.  将您的 gif 文件放在同一个文件夹中。

注意：但请确保正确设置 QMovie 对象的当前路径。例如： eye_right = new QMovie(QDir::currentPath()+"/imageformats/eye_right.gif");

# javascript - appendChild 加载

> ID：11462709
> 
> 赞同：2
> 
> 时间：2012-07-13T00:49:26.917
> 
> 标签：javascript, onload, appendchild

所以问题是，为什么这不会在加载时附加 div？我在这个问题上摸不着头脑。没有错误...只是没有加载。

```
<head>
    <script type="text/javascript">
        function load() {
            var divTag0 = document.createElement("div");
            divTag0.className = "newsBlock";
            divTag0.innerHTML = " Try this..";
            document.getElementById("newsLeft").appendChild(divTag0);

            var divTag1 = document.createElement("div");
            divTag1.className = "newsBlock";
            divTag1.innerHTML = " Blah..";
            document.getElementById("newsRight").appendChild(divTag1);

            var divTag2 = document.createElement("div");
            divTag2.className = "newsBlock";
            divTag2.innerHTML = " And this ..";
            document.getElementById("newsLeft").appendChild(divTag2);    
        }
    </script> 
</head>
<body>
    <p> Something filler </p>
    <div id="newsLeft">  
    </div>
    <div id="newsRight">     
    </div>
    <script type="text/javascript">
        window.onload="load()";
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T00:54:19.477

您应该为[getElementById](http://www.w3schools.com/jsref/met_doc_getelementbyid.asp)提供一个字符串...

以便： `document.getElementById(newsLeft).appendChild(divTag0);`

应该： `document.getElementById("newsLeft").appendChild(divTag0);`

但主要问题是： `window.onload="load()";`

应该是： `window.onload=load;`

感谢 jvillars 的小提琴，它帮助我注意到了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:19:32.950

如果 azhrei 的回答不起作用，我唯一能想到的是在加载后调用 onload 可能不会触发，您可以通过简单地调用 load(); 从示例中更改此设置；

我在[这里测试过](http://jsfiddle.net/jvillars/BZsvh/ "这里")

希望这可以帮助

编辑：

我相信 azhrei 有它的权利，与其说是 onload 没有触发，不如说是你的 onload 调用存在语法问题。

但是通过删除第二个 JS 调用，这段代码也可以在更好的风格（更易读/更容易理解）方面得到改进。

如果你写在标题中：

```
window.onload = function() { 
    //everything inside your load() function goes here
} 
```

它也同样有效。它还去除了很多在那里的绒毛。我希望这会有所帮助。

# mysql - 奇怪的“所有”在“哪里”

> ID：11462716
> 
> 赞同：8
> 
> 时间：2012-07-13T00:52:12.353
> 
> 标签：mysql, sql

这个问题存在于 MySQL 的最新版本中，所以我什至怀疑这可能是一个错误。

这里有两张表：

```
t1(id int), values (10),(2)
t2(id int), values (0),(null),(1) 
```

执行：

```
select id from t1 where id > all (select id from t2); 
```

返回结果集：

```
+------+
| id   |
+------+
|   10 |
|    2 |
+------+ 
```

根据我的知识和页面[http://dev.mysql.com/doc/refman/5.5/en/all-subqueries.html](http://dev.mysql.com/doc/refman/5.5/en/all-subqueries.html)

该语句应返回空结果！因为“where”中的每一个判断都会导致null，像这样：

```
select id > all (select id from t2)  as c1 from t1; 
```

返回：

```
+------+
| c1   |
+------+
| NULL |
| NULL |
+------+ 
```

实际上`select id from t1 where null;`什么也没返回！

最后，我尝试了这个：

```
explain extended select id from t1 where id > all (select id from t2);
show warnings; 
```

```
+-------+------+-------------------------------------------------------------------------------------------------------------------------------------+
| Level | Code | Message                                                                                                                             |
+-------+------+-------------------------------------------------------------------------------------------------------------------------------------+
| Note  | 1003 | select `test`.`t1`.`id` AS `id` from `test`.`t1` where <not>((`test`.`t1`.`id` <= (select max(`test`.`t2`.`id`) from `test`.`t2`))) |
+-------+------+-------------------------------------------------------------------------------------------------------------------------------------+ 
```

一组中的 1 行（0.00 秒）

我们可以看到 MySQL 将原来的 SQL 优化到了这个，实际上和结果集是吻合的。

但我认为优化后的 SQL 不等于原始 SQL。

我错了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T01:39:02.237

**更新**：进一步分析和展开 MySQL 的`> ALL`奇怪实现。这个答案应该被认为是 MySQL 特定的。因此，为了进一步免责声明，此处对答案的解释`> ALL`不适用于其他 RDBMS（除非有其他 RDBMS 复制了 MySQL 实现）。`> ALL`从到构造的内部转换`MAX`，仅适用于 MySQL。

这个：

```
select id from t1 where id > all (select id from t2); 
```

在语义上等价于：

```
select id from t1 where id > (select max(id) from t2); 
```

由于`select max(id) from t2`返回 1，第二个查询具体化为：

```
select id from t1 where id > 1 
```

这就是为什么它同时返回`10`和`2`从表 t1

* * *

应用 NULL 规则的实例之一是当您使用 时`NOT IN`，例如：

DDL：

```
create table t1(id int);

insert into t1 values (10),(2);

create table t2(id int); 

insert into t2 values (0),(null),(1); 
```

询问：

```
select * from t1 where id not in (select id from t2);

-- above is evaluated same as the following query, so the rules about null applies,
-- hence the above and following query will not return any record.    

select * from t1 where id <> 0 and id <> null and id <> 1;

-- to eliminate null side-effect, do this:
select * from t1 where id not in (select id from t2 where id is not null);

-- which is equivalent to this:
select * from t1 where id <> 0 and id <> 1; 
```

最后两个查询返回`10`and `2`，而前两个查询返回空集

现场测试：[http ://www.sqlfiddle.com/#!2/82865/1](http://www.sqlfiddle.com/#!2/82865/1)

希望这些示例消除您对 NULL 规则的困惑。

* * *

关于

> 但我认为优化后的 sql 不等于原始的。

优化的sql是这样的：

```
select `test`.`t1`.`id` AS `id` from `test`.`t1` where <not>((`
test`.`t1`.`id` <= (select max(`test`.`t2`.`id`) from `test`.`t2`))) 
```

这实际上等同于您的原始查询：`select id from t1 where id > all (select id from t2);`

该构造`t1.field > all (select t2.field from t2)`只是一个语法糖：

```
t1.field > (select max(t2.field) from t2) 
```

如果您将 DeMorgan 定理应用于 MySql 优化的 SQL：

```
not (t1.id <= (select max(t2.id) from t2)) 
```

这相当于：

```
t1.id > (select max(t2.id) from t2) 
```

这又相当于语法糖`ALL`：

```
t1.id > ALL(select t2.id from t2) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T14:19:08.313

这是 MySQL 中的一个错误（在[此处报告和验证](http://bugs.mysql.com/bug.php?id=65902)）。

> 该修复程序将在 5.6.7（下一个 5.6x 版本）以及下一个主要树（5.7x）中提供

它[不同于 MySQL 文档](http://dev.mysql.com/doc//refman/5.5/en/all-subqueries.html)中规定的行为和 ANSI 标准中规定的行为。

此外，它在 MySQL 中甚至不一致，当子查询引用表时，与子查询包含（相同）文字值时相比，您会得到不同的结果。

```
CREATE TABLE t2
  (
     id INT
  );

INSERT INTO t2
VALUES      (0),
            (NULL),
            (1);

/*Returns row with 10*/
SELECT *
FROM   (SELECT 10 AS id) T
WHERE  id > ALL (SELECT id
                 FROM   t2);

/*Returns no rows. Explain Plan says "Impossible Where"*/
SELECT *
FROM   (SELECT 10 AS id) T
WHERE  id > ALL (SELECT 0
                 UNION ALL
                 SELECT NULL
                 UNION ALL
                 SELECT 1); 
```

根据规范，第二种行为是正确的。应该如何`10 > ALL( (0),(null),(1) )`逻辑评价如下

```
10 > 0 =  TRUE
10 > NULL =  UNKNOWN
10 > 1 =  TRUE 
```

三值逻辑规则下

```
TRUE AND UNKNOWN AND TRUE = UNKNOWN 
```

因此不应返回此**行**。请参阅明确规定[的 ANSI 规范](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)

> " " 的结果`R <comp op> <quantifier> T`是通过将隐含的`<comparison predicate>`" `R <comp op> RT`" 应用于 中的每一行得出`RT`的`T`：

`T`因此，当为 Nullable时，这不是语义上有效的优化。规范的完整部分转载如下。

> 8.7
> 
> ```
>  Function
> 
>      Specify a quantified comparison.
> 
>      Format
> 
>      <quantified comparison predicate> ::=
>           <row value constructor> <comp op> <quantifier> <table subquery>
> 
>      <quantifier> ::= <all> | <some>
> 
>      <all> ::= ALL
> 
>      <some> ::= SOME | ANY
> 
>      Syntax Rules
> 
>      1) The <row value constructor> shall be of the same degree as the
>         result of the <table subquery>.
> 
>      2) The data types of the values of the <row value constructor>
>         shall be respectively comparable to those of the columns of the
>         <table subquery>.
> 
>      3) The collating sequence for each pair of respective values in
>         the <quantified comparison predicate> is determined in the same
>         manner as described in Subclause 8.2, "<comparison predicate>".
> 
>      Access Rules
> 
>         None.
> 
>      General Rules
> 
>      1) Let R be the result of the <row value constructor> and let T be
>         the result of the <table subquery>.
> 
>      2) The result of "R <comp op> <quantifier> T" is derived by the
>         application of the implied <comparison predicate> "R <comp op>
>         RT" to every row RT in T:
> 
>         Case:
> 
>         a) If T is empty or if the implied <comparison predicate> is
>           true for every row RT in T, then "R <comp op> <all> T" is
>           true.
> 
>         b) If the implied <comparison predicate> is false for at least
>           one row RT in T, then "R <comp op> <all> T" is false.
> 
>         c) If the implied <comparison predicate> is true for at least
>           one row RT in T, then "R <comp op> <some> T" is true.
> 
>         d) If T is empty or if the implied <comparison predicate> is
>           false for every row RT in T, then "R <comp op> <some> T" is
>           false.
> 
>         e) If "R <comp op> <quantifier> T" is neither true nor false,
>           then it is unknown. 
> ```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T02:33:12.213

**更新**（2012-07-15）问题仅限于 MySQL，也许我在 Chrome 上的许多 sqlfiddle 选项卡之间切换时感到困惑。Postgresql 没有问题，它的 NULL 行为在它的 SELECT 和 WHERE 子句上是一致的，与 Sql Server 相同。

~~坚定地说，我现在和你一样困惑，~~我在 Sql Server 上尝试了你的 MySql 查询：[http ://www.sqlfiddle.com/#!3/82865/6](http://www.sqlfiddle.com/#!3/82865/6)

```
-- query 1
select 
    case when id > all(select id from t2) then 1 else 0 end as c1
from t1;

-- query 2
select 
    *
from t1
where id > all(select id from t2); 
```

第一个查询返回`0`所有行。

```
| C1 |
------
|  0 |
|  0 | 
```

自然地，第二个查询（它有一个 WHERE 子句）不应该返回任何行。哪个 Sql Server 是正确的。~~虽然我不同意`0`列的结果`C1`（应该是`1`）~~，但我赞赏 Sql Server 的一致性。

然后在 MySql ( [http://www.sqlfiddle.com/#!2/82865/25](http://www.sqlfiddle.com/#!2/82865/25) ) 和 Postgresql ( [http://www.sqlfiddle.com/#!1/82865/5](http://www.sqlfiddle.com/#!1/82865/5) ) 上的 MySql 查询：

```
-- query 1
select 
    id > all(select id from t2) as c1
from t1;

-- query 2
select 
    *
from t1
where id > all(select id from t2); 
```

~~MySql 和 Postgresql 都产生了相同的输出：~~

MySql 产生这个输出：

```
|     C1 |
----------
| (null) |
| (null) |

| ID |
------
| 10 |
|  2 | 
```

~~我相信第二个查询具有正确的输出，但 SELECT 子句（第一个查询）上的嵌入条件表明并非如此。我不喜欢这种不一致。~~

**划线段修正**：MySQL有问题。Postgresql 实现是正确的，它的 SELECT 子句和 WHERE 子句都产生相同的结果，它在 SELECT 上返回 NULL，在 WHERE 子句上返回空行。

现在，我想在~~Postgresql 或~~MySql 论坛上问这个问题，为什么 WHERE 子句上的条件和 SELECT 子句上嵌入的条件之间的结果存在差异。

我希望 stackoverflow 中有一个志同道合的人可以为我们进一步解释这种**不一致**:-)

* * *

~~不管合成糖有多甜`ALL`，我都不想再使用它了。它在 WHERE 子句和嵌入 SELECT 之间的结果不一致。无论如何，我在所有查询中都使用`MAX`了，恕我直言，意图比类似英语的更清晰`ALL`，我需要继续使用的理由越多`MAX`：~~

**删除段落修正**`ALL`：我们不应该仅仅因为 MySQL 的实现有缺陷而厌恶;-)

在 MySql 和 Postgresql 上，MAX 产生相同的输出

```
-- Query 1
select 
    id > all(select id from t2) as c1,
    id > (select max(id) from t2) as c2
from t1;

-- Query 2
select 
    *
from t1
where id > all(select id from t2);

-- Query 3
select 
    *
from t1
where id > (select max(id) from t2); 
```

两个 RDBMS 上的`MAX`输出是一致的。

```
-- Query 1 output:

|     C1 | C2 |
---------------
| (null) |  1 |
| (null) |  1 |

-- Query 2 output:

MySql return this:

| ID |
------
| 10 |
|  2 |

Postgresql return empty row. Which is correct

-- Query 3 output:

| ID |
------
| 10 |
|  2 | 
```

* * *

* * *

此外，在所有 RDBMS中`MAX`是**一致的：**

```
select 
    case when id > all(select id from t2) then 'Yes' else 'Oh No!' end as c1,
    case when id > (select max(id) from t2) then 'Yes' else 'Oh No!' end as c2
from t1;

select 
    *
from t1
where id > all(select id from t2);

select 
    *
from t1
where id > (select max(id) from t2); 
```

现场测试：

*   Sql 服务器：[http ://www.sqlfiddle.com/#!3/82865/10](http://www.sqlfiddle.com/#!3/82865/10)

*   MySql：[http ://www.sqlfiddle.com/#!2/82865/29](http://www.sqlfiddle.com/#!2/82865/29)

*   Postgresql：[http ://www.sqlfiddle.com/#!1/82865/7](http://www.sqlfiddle.com/#!1/82865/7)

* * *

* * *

为了解决这个问题，只有 MySQL 实现`id > ALL`了`id > (SELECT MAX`. Postgresql 和 Sql Server 都解释`id > ALL(0,NULL,1)`为`id > 0 AND id > NULL AND id > 1`，因此 Postgresql 和 Sql Server 产生相同的输出。

对 NULL 规则的说明来自 Martin Smith 关于[NULL 值的见解被排除在外。为什么？](https://stackoverflow.com/questions/11491831/null-values-are-excluded-why#comment15180077_11491831)

MySQL 的`ALL`问题仅限于 MySQL，非常不一致。MySQL在其 WHERE 子句中转换`ALL`为；`MAX`而在其 SELECT 子句中，MySQL 转换`ALL`为*链式*AND。

其他 RDBMS 实现`> ALL`为*链式*AND，ALL 表达式上的 NULL 规则适用于它们的 SELECT 子句和 WHERE 子句，它们在 SELECT 子句和 WHERE 子句上具有一致的结果。他们的 on `NULL`on规则`ALL`是符合 ANSQL SQL 的

# php - 使用 Zend 适配器创建和删除表

> ID：11462717
> 
> 赞同：1
> 
> 时间：2012-07-13T00:52:18.470
> 
> 标签：php, mysql, zend-db

我正在尝试使用 Zend 适配器进行一些 SQL 查询。我尝试使用的代码是这样的：

`$result = $this->$db->getConnection()->exec('CREATE TABLE TEST');`

而且我知道 $db 已设置并且可以正常工作，因为我可以运行其他命令，例如

`$this->$db->listTables();`或者

`$result = $this->$db->fetchAssoc("SHOW COLUMNS FROM " .$schema);`

当我阅读 Zend 文档时，有人提到应该通过第一个示例（例如`exec("...")`）使用一些未准备好的数据库事务，但显然我在运行这些事务时遇到了问题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:48:00.707

这应该工作......

```
 $db = Zend_Db_Table::getDefaultAdapter();
    $db->query('CREATE TABLE wolf (tag VARCHAR(9))'); 
```

# jquery - jQuery Masonry 项目顺序

> ID：11462719
> 
> 赞同：10
> 
> 时间：2012-07-13T00:53:02.533
> 
> 标签：jquery, jquery-masonry

我怎样才能让砖石在这里尊重更多的原始项目订单？我希望顺序是海豚、鱼、无脊椎动物、鳍足类动物：

```
var $container = jQuery('.tax-product_cat #content');
$container.imagesLoaded( function(){
    $container.masonry({
        itemSelector: 'li.product',
        gutterWidth: 22
    });
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T01:15:08.293

[正如您在他们的API](http://masonry.desandro.com/docs/options.html)中看到的那样，masonry 插件没有提供太多的方式或排序选项。然而，同一作者的 Isotope 插件确实提供了过多的排序选项。

[http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)

就像你知道的那样，你可以像这样包装你所有的 jQuery 代码`(function($){ //your code here })(jQuery);`

```
var container = $('.tax-product_cat #content');

container.isotope({
  itemSelector : 'ul li',
  getSortData : {
    category : function (el) {
      // el refers to each item matching `itemSelector`
      return el.find('h3').text().trim();
    }
  },
  sortBy : 'category',
  sortAscending : true
}); 
```

这是排序参考。[http://isotope.metafizzy.co/docs/sorting.html](http://isotope.metafizzy.co/docs/sorting.html) 文档还指定了一些额外的 sortBy 参数：

*   'original-order' 将使用项目元素的原始顺序在布局中排列它们。
*   “随机”是随机顺序。

这是一个简单的演示，展示了使它工作的一切。尝试了解代码正在做什么，并调整您的代码以执行相同的操作。如果它没有按照您的意愿对它们进行排序，请尝试找出您需要的模式。看到 getSortData 对象了吗？`category`是*你*定义的东西。这完全是任意的。您可以创建一个`backwards`类别并编写函数以正确方式返回数据。

[http://jsfiddle.net/SRW6g/19/embedded/result/](http://jsfiddle.net/SRW6g/19/embedded/result/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-24T08:41:47.143

最新的砌体支持带有`horizontalOrder: true`设置的命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-29T12:41:33.257

有[插件 -](http://masonry-ordered.tasuki.org/) jquery masonry 的“masonry-ordered”，使排序表现得像

```
1, 2, 3
4, 5, 6
7, 8, 9 
```

# python - 除了 celery 之外，django/wsgi 中的后台工作人员、异步延迟任务队列的替代选择是什么？

> ID：11462730
> 
> 赞同：1
> 
> 时间：2012-07-13T00:54:29.660
> 
> 标签：python, django, wsgi, task-queue

后台任务有纯wsgi实现吗？

我想直接在同一上下文下使用局部变量，而不是通过代理序列化/反序列化到另一个守护进程。

在当前的 wsgi 基础设施下是否有可能做到这一点？例如，在返回响应后，运行一些回调函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T09:53:03.497

这是 Python WEB-SIG 上提出的问题的副本。我引用了与 Python WEB-SIG 上的问题相同的页面，以便其他人可以看到：

[http://code.google.com/p/modwsgi/wiki/RegisteringCleanupCode](http://code.google.com/p/modwsgi/wiki/RegisteringCleanupCode)

但是，这样做会占用请求线程，因此在您的任务完成之前它无法处理其他请求。

在请求结束时创建后台线程不是一个好主意，除非您使用池机制来限制任务的工作线程数量。因为进程可能会崩溃或关闭，所以您将作业丢失为仅在内存中，因此不会持久。

最好使用 Celery，或者如果您认为它太重，请查看 Redis Queue (RQ)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T04:13:39.500

你可以看看 Django async。它使用数据库内队列，因此可以更好地处理事务。所有参数都必须是 JSONable，返回类型也是如此。在某些情况下，这意味着您可能需要安排一个包装函数，但这不应该让您头疼。

[http://pypi.python.org/pypi/django-async](http://pypi.python.org/pypi/django-async)

您不想在 Web 服务器中做这种事情——这绝对不是做这件事的正确地方。Django async 提供了一个 manage.py 命令，用于刷新队列，您可以在循环中运行，可以在 Web 服务器的另一台机器上运行。

# iphone - 从视图执行 Segue

> ID：11462732
> 
> 赞同：0
> 
> 时间：2012-07-13T00:54:50.697
> 
> 标签：iphone, objective-c, ios

我创建了一个看起来像闪屏的视图，它将在应用程序首次启动时加载。我还创建了一个 segue，在执行某些后台任务后，它将从初始启动屏幕转到主视图。但是，我不知道如何启动 segue，因为我在该启动画面中没有任何用户交互。有人对这个问题有答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T01:17:13.860

如果您`UIViewController`从情节提要创建了一个，则可以使用`performSegueWithIdentifier:sender:`

# git - 对子模块进行更改，但不将其推送到上游

> ID：11462733
> 
> 赞同：2
> 
> 时间：2012-07-13T00:55:20.653
> 
> 标签：git, github

我的问题与我问过的另一个 SO 问题有些相关：[Refreshing the latest git submodule in repo](https://stackoverflow.com/questions/11423723/refreshing-the-latest-git-submodule-in-repo/11423830#comment15070190_11423830)

在提取最新更改后，我现在对子模块进行了更改，但我不想将这些上游推送到原始子模块存储库。但是，我想将这些更改推送到项目其余部分使用的主存储库（与子模块分开）。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T01:15:41.827

您不应该使用属于子模块的代码污染顶级存储库。您可以做的是更改子模块将推送到的配置中的 url。只要不跑`git submodule init`，就可以一直推拉到备用位置。甚至 git submodule 命令也会尊重该设置。

# powershell - 使用 powershell 通过标签执行源安全获取的问题

> ID：11462737
> 
> 赞同：1
> 
> 时间：2012-07-13T00:55:45.830
> 
> 标签：powershell, visual-sourcesafe-2005

我正在尝试使用 powershell 使用包含空格的标签从 srcSafe 执行“获取”。

我已经阅读了很多关于如何将带空格的参数传递给 exe 的帖子，但我尝试过的都没有。我的问题似乎是正确提供标签。

以下是 cmd 行版本（有效）。

```
ss get $/sandbox/TestSSCmdLine/* -R -I-N -VL"label space" 
```

我最简单的powershell版本是：

```
ss get '$/sandbox/TestSSCmdLine/*' -R -I-N '-VL\"label space\"' 
```

当我运行 powershell cmd 时，我没有得到任何文件，并且 $lastexitcode 是“100”。

Echo args 显示了我认为应该正确的内容。

```
Arg 0 is <get>
Arg 1 is <$/sandbox/TestSSCmdLine/*>
Arg 2 is <-R>
Arg 3 is <-I-N>
Arg 4 is <-VL"label space"> 
```

Powershell ISE 显示相同。

```
DEBUG: NativeCommandParameterBinder Information: 0 :  WriteLine   Raw argument string:  get $/sandbox/TestSSCmdLine/* -R -I-N "-VL\"label space\""
DEBUG: NativeCommandParameterBinder Information: 0 :  WriteLine   Argument 0: get
DEBUG: NativeCommandParameterBinder Information: 0 :  WriteLine   Argument 1: $/sandbox/TestSSCmdLine/*
DEBUG: NativeCommandParameterBinder Information: 0 :  WriteLine   Argument 2: -R
DEBUG: NativeCommandParameterBinder Information: 0 :  WriteLine   Argument 3: -I-N
DEBUG: NativeCommandParameterBinder Information: 0 :  WriteLine   Argument 4: -VL"label space" 
```

只是为了混淆 start-process 似乎工作：

```
$cmd = "ss.exe"
$args = "get", '$/sandbox/TestSSCmdLine/*', "-R", "-I-N", '-VL"label space"'
$proc = start-process $cmd $args -Wait -NoNewWindow -PassThru -WorkingDir $pwd
$proc.ExitCode 
```

另一个令人困惑的项目是 echo args 现在将版本参数显示为： Arg 4 is <-VLlabel space> -> 注意没有空格，也不适用于 cmd 行。

感谢您的帮助！

约翰·A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:01:31.523

在`cmd`中，引号将用于确保`label space`作为`-VL`参数的一部分传递。由于该`Start-Process`版本使用 的结果参数`-VLlabel space`，我会尝试使用 调用`ss`，不带任何嵌入式引号（[此答案](https://stackoverflow.com/a/8468690/2495)`'-VLlabel space'`顶部列出的第三个选项）。

# scala - 如何在 Dispatch for Scala 中使用 DELETE 请求？

> ID：11462739
> 
> 赞同：1
> 
> 时间：2012-07-13T00:55:53.297
> 
> 标签：scala, http, get, httprequest, scala-dispatch

我要做的是使用[dispatch 发出](http://dispatch.databinder.net/Dispatch.html)`DELETE`请求。我知道如何在and中使用它，但似乎找不到有关如何使用的示例？`POST``GET``DELETE`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:32:09.033

```
:/("www.scala-lang.org").DELETE 
```

where`:/`构造新的请求。[此处](https://github.com/ssuravarapu/Terrastore-Scala-Client/blob/master/src/main/scala/terrastore/client/TerrastoreClient.scala)提供了一些代码片段，只是为了帮助您入门。

# c# - 如何为 WPF 中托管的 Winforms UserControl 解析 XAML 中的自定义属性名称？

> ID：11462741
> 
> 赞同：0
> 
> 时间：2012-07-13T00:56:03.123
> 
> 标签：c#, wpf, winforms, user-controls, interop

我有一个为基于 XNA 的磁贴编辑器编写的用户控件。这是我现在尝试在 WPF 应用程序中托管的基于 winforms 的控件。

我正在使用 WindowsFormsHost 控件来嵌入 winforms 用户控件。在 winforms 用户控件上，我有一个名为 XnaBackground 的自定义属性，它的类型为 Microsoft.Xna.Framework.Color。我可以在 IntelliSense 的 XAML 中看到该属性正常，但是当我尝试设置它时，我在 XAML 窗口中收到一条消息，显示“无法转换“Microsoft.Xna.Framework.Blue””。

我尝试使用自定义 IValueConverter 但由于该属性不是依赖属性，控件也不是依赖对象，因此绑定不起作用。

这是 winforms 控件上的属性声明：

```
 [Category("Appearance"), DescriptionAttribute("Gets/Sets a value indicating the background color to use.")]
    [Bindable(true)]
    public Color XnaBackground { get; set; } 
```

这是我的 WPF 应用程序中的 XAML：

```
<Window x:Class="TileEditorWPF.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:TileEditorWPF"
    xmlns:winforms="clr-namespace:TileDisplay;assembly=TileDisplay"
    Title="MainWindow" Height="600" Width="800" Loaded="WindowLoaded">

<Window.Resources>
    <local:XnaColorConverter x:Key="colorConverter" />
</Window.Resources>
<DockPanel LastChildFill="true">
    <WindowsFormsHost Name="windowsFormsHost1" DockPanel.Dock="Top" 
                                      Background="Transparent"         
                                      HorizontalAlignment="Stretch"             
                                      VerticalAlignment="Stretch" >
        <winforms:TileDisplayControl XnaBackground="Blue" x:Name="tileDisplay1" OnDraw="TileDisplayControl_OnDraw" OnInitialize="TileDisplayControl_OnInitialize" />            
    </WindowsFormsHost>
</DockPanel> 
```

我不是 WPF 专家，所以如果答案很明显，请原谅我。在过去的 4 个小时里，我一直在敲我的脑袋，而谷歌搜索却让我无处可去。这是一个小众问题，很难找到这个特定主题的任何趋势。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T01:22:54.633

您需要实现一个`TypeConverter`知道如何将您在属性`"Blue"`中设置的字符串值转换为类型的方法。`XnaBackground``Microsoft.Xna.Framework.Color`

*   [http://msdn.microsoft.com/en-us/library/aa970913.aspx](http://msdn.microsoft.com/en-us/library/aa970913.aspx)

因为您没有创建`Microsoft.Xna.Framework.Color`类型/无法访问其源代码，所以您无法将`[TypeConverter(typeof(ToXnaColorConverter)]`类型放在指向您的转换器的位置。

但是，您可以将该属性放在属性上`XnaBackground`。因此，当在您的`XnaBackground`属性上设置“字符串”时，它会通过您的`TypeConverter`.... 它应该解释字符串并提供合适的`Xna.Framework.Color`值。

```
[Category("Appearance"), DescriptionAttribute("Gets/Sets a value indicating the background color to use.")]
[Bindable(true)]
[TypeConverter(typeof(ToXnaColorConverter)] 
public Color XnaBackground { get; set; } 
```

*   [http://blogs.windowsclient.net/rob_relyea/archive/2008/04/10/strings-to-things-or-how-xaml-interprets-attribute-values.aspx](http://blogs.windowsclient.net/rob_relyea/archive/2008/04/10/strings-to-things-or-how-xaml-interprets-attribute-values.aspx)

*   [http://msdn.microsoft.com/en-us/library/bb546926(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb546926(v=vs.90).aspx)

# scala - 为什么这段代码不能编译？这真的不安全吗？

> ID：11462743
> 
> 赞同：1
> 
> 时间：2012-07-13T00:56:21.907
> 
> 标签：scala

考虑这个简单的二叉树类型：

```
abstract class BinaryTree[T] {
  type Repr <: BinaryTree[T]

  def left: Repr
  def value: T
  def right: Repr

  def height: Int

 def add(elem: T): Repr = 
    if ( left.height <= right.height ) copy( left.add( elem ), right)
    else copy( left, right.add(elem))

 def copy( left: Repr, right: Repr ) : Repr
}

abstract class BinarySearchTree[T] extends BinaryTree[T] {
  type Repr <: BinarySearchTree[T]

  def ordering: Ordering[T]

  override def add(elem: T) = 
    if ( ordering.equiv( elem, value ) ) this.asInstanceOf[Repr]
    else if ( ordering.lt(elem, value) ) copy( left.add( elem ), right )
    else copy( left, right.add( elem ) )
}

class ScapegoatTree[T]( val value: T, val left: ScapegoatTree[T], val right: ScapegoatTree[T] )(implicit val ordering: Ordering[T])
  extends BinarySearchTree[T] {

  type Repr = ScapegoatTree[T]

  def add = this /* snip */

  def copy( left: ScapegoatTree[T], right: ScapegoatTree[T] ) = new ScapegoatTree( value, left, right )
}

class BalancedBinaryTree[T]( val value: T, val left: BalancedBinaryTree[T], val right: BalancedBinaryTree[T] )(implicit val ordering: Ordering[T])
  extends BinarySearchTree[T] {

  type Repr = BalancedBinaryTree[T]

  def add = this /* snip */

  def copy( left: BalancedBinaryTree[T], right: BalancedBinaryTree[T] ) = new BalancedBinaryTree( value, left, right )
} 
```

在 Scala-IDE 中使用 Scala 2.9，add 方法无法编译，因为 copy 需要一段`Repr`时间`left.add(elem)`并`right.add(elem)`返回一个`Repr#Repr`. 据我所知，`Repr#Repr`必须始终是 的子类型`Repr`，因此它应该是安全的。我是否没有考虑某些情况，或者这是幸运的罕见情况之一，类型系统阻止你做一些应该工作的事情？

另外，有什么方法可以更改我的类型定义，这样这将是合法的，或者向编译器断言`Repr#Repr`必须是`Repr`（除了强制转换，我的意思是）的子类型。我还在习惯 Scala，但我不确定我是否已经完全理解了类型系统。我确实通过编写一个执行强制转换的隐式方法来编译它，但这感觉更像是一种解决方法而不是解决方案。

在此先感谢您的帮助。

编辑：我应该补充一点，在我的实际实现中，我有进一步限制Repr类型的子类，如果这有影响的话。

编辑 2：根据要求添加了更多代码。此问题也出现在`BinarySearchTree`类型中，但不会出现在具体实现中，例如指定`ScapegoatTree`位置`Repr`。basic 也有一个具体的实现`BinaryTree`，但我试图保持最小化，这样您就不必费力地处理太多不必要的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:04:08.140

刚刚尝试使用类型参数而不是抽象类型重写，希望它适合您的需要。

```
trait BinaryTree[T, Repr <: BinaryTree[T, Repr]] {
  def left: Repr
  def value: T
  def right: Repr

  def height: Int
  def add(elem: T): Repr =  
    if ( left.height <= right.height ) copy( left.add( elem ), right)
    else copy( left, right.add(elem))

  def copy( l: Repr, r: Repr ) : Repr
}

trait BinarySearchTree[T, U<:BinarySearchTree[T,U]] extends BinaryTree[T, U] { self:U =>
  def ordering: Ordering[T]

  override def add(elem: T) = 
    if ( ordering.equiv( elem, value ) ) self
    else if ( ordering.lt(elem, value) ) copy( left.add( elem ), right )
    else copy( left, right.add( elem ) )
}

class ScapegoatTree[T]( val value: T, val left: ScapegoatTree[T], val right: ScapegoatTree[T] )(implicit val ordering: Ordering[T]) extends BinarySearchTree[T, ScapegoatTree[T]] {
  override def height = 1
  override def copy( left: ScapegoatTree[T], right: ScapegoatTree[T] ) = new ScapegoatTree( value, left, right )
}

class BalancedBinaryTree[T]( val value: T, val left: BalancedBinaryTree[T], val right: BalancedBinaryTree[T] )(implicit val ordering: Ordering[T]) extends BinarySearchTree[T, BalancedBinaryTree[T]]{
  override def height = 1
  override def copy( left: BalancedBinaryTree[T], right: BalancedBinaryTree[T] ) = new BalancedBinaryTree( value, left, right )
} 
```

根据[这个问题](https://stackoverflow.com/questions/3962219/mytype-problem-do-i-have-to-use-abstract-types-or-generics-in-scala-to-retu)，您遇到了“MyType”问题。

# java - 如何在不干扰程序 UI 的情况下播放声音？

> ID：11462745
> 
> 赞同：0
> 
> 时间：2012-07-13T00:56:43.290
> 
> 标签：java, android, multithreading, audio, user-interface

我的应用程序旨在按照一些数学公式有节奏地播放一些声音。在为其他平台开发的该程序的其他版本中，我只是“休眠”线程所需的时间，直到我需要播放下一个声音，但在 android 中，如果您休眠进程，UI 也会休眠。我尝试下一段代码作为示例，尝试将 UI 和声音过程分开：

```
public class SoundThread extends Thread{
private MediaPlayer player;
SoundThread(Context context)
{
    player = MediaPlayer.create(context, R.raw.ex);
}
public void run()
{
    for(int x=0;x<100;x++)
    {
        player.start();
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

此类以示例声音和调用它的活动的上下文启动 mediaplayer，它应该每秒播放 R.raw.ex。但是当我从我的活动中调用它时，我听到声音播放正确，但我的设备认为应用程序已冻结。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:13:28.893

对于这个特定的应用程序，如果您不需要播放控制，您可以将那段代码包装在[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中。

如果您希望能够控制播放，那么您应该[实现一个 Service](http://developer.android.com/guide/topics/media/mediaplayer.html#mpandservices)。

# scala - Cake Pattern 中显式类型的自引用的用处

> ID：11462748
> 
> 赞同：7
> 
> 时间：2012-07-13T00:57:45.533
> 
> 标签：scala, cake-pattern

似乎 Scala[显式类型的自引用](http://www.scala-lang.org/node/124)最常见的用法是在“[蛋糕模式](http://jonasboner.com/2008/10/06/real-world-scala-dependency-injection-di/)”中，其中模块的依赖项声明如下：

```
class Foo { this: A with B with C =>
  // ...
} 
```

一般来说，暂时忽略蛋糕模式，,`A`可以引用任何*类型*级别的东西，例如类型参数：`B``C`

 *```
class Outer[A, B, C] {
  class Inner { this: A with B with C =>
    // ...
  }
} 
```

...或抽象类型成员：

```
class Outer {
  type A
  type B
  type C
  class Inner { this: A with B with C =>
    // ...
  }
} 
```

在这两种情况下，我们都不能写,`abstract class Inner extends A with B with C`因为和不知道是特征。这里需要显式类型的自引用。但是，我只见过带有特征的蛋糕图案：`A``B``C`

```
trait A { def a }
trait B { def b }
trait C { def c }
class Foo { this: A with B with C =>
  // ...
} 
```

在这种情况下，我们可以`abstract class Foo extends A with B with C`直接写，如果我没记错的话，意思是一样的。我对么？如果不是，那么它们有何不同；如果是这样，为什么每个人似乎都使用显式类型的自我引用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T19:46:35.070

我似乎忽略了两个主要区别：

1.  尽管显式 self-type 注释和 simple`extends`关键字都描述了两种类型之间的“is-a”关系，但在前一种情况下，这种关系在外部是不可见的：

    ```
    scala> trait T
    defined trait T

    scala> class C { this: T => }
    defined class C

    scala> implicitly[C <:< T]
    <console>:10: error: Cannot prove that C <:< T. 
    ```

    这是一件好事，因为在蛋糕模式中，您不希望您的“模块”对象在不经意间被多态地用作它所依赖的特征之一。

2.  [正如 Mushtaq](https://stackoverflow.com/a/1991378/1011414)和[Daniel 间接](https://stackoverflow.com/a/11476927/1011414)指出的那样，在使用自类型注释时，依赖关系可以是循环的。循环依赖很常见，而且不一定是坏事（假设相互依赖的组件不需要彼此进行初始化，或者我们可以以某种方式在它们之间[打结](http://www.haskell.org/haskellwiki/Tying_the_Knot)），因此这是自类型注释相对于继承的另一个明显好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:15:09.083

当您使用继承时，您将决定初始化顺序。当您使用自我类型时，您将其保持打开状态。

还有其他差异，但我认为其中大部分是实现细节，可能会消失。我*知道*其中一些是。*

# php - 当 PDO 中的其他所有内容都正常工作时，无法执行 PDO 语句（更新 MySQL 表）

> ID：11462750
> 
> 赞同：3
> 
> 时间：2012-07-13T00:57:48.733
> 
> 标签：php, mysql, pdo

这是我在 StackOverflow 上的第一个问题，您能否向我解释一下我做错了什么：我有这段代码（如下），但由于某种原因，我试图查看和调试，我不明白为什么 PDO 不是完成下面的请求，插入和回显的工作方式相同，有人可以告诉我发生了什么吗？我沮丧地把头发从头上扯下来。

```
 $q = "UPDATE content SET urlid=:url, title=:title, description=:desc, keywords=:key     WHERE urlid=:urlid";
    $query = $pdo->prepare($q);
    $query->execute(array(
        ':url'     => $urlid,
        ':title'   => $title,
        ':desc'    => $desc,
        ':key'     => $key,
        ':contloc' => $contloc,
        ':userid'  => $uid,
        ':urlid'   => $urlid
        //':content' => $content
    )); 
```

我在 Apache 错误日志中收到以下警告：

> [Thu Jul 12 21:07:13 2012] [error] [client 99.230.122.54] PHP Warning: PDOStatement::execute(): SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens in /Library/Server/Web/Data/Sites/Default/addto2.php 在第 31 行，引用者：`http://localhost/sample/4fff30aea1f20`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T01:18:14.597

```
$q = "UPDATE content SET urlid=:url, title=:title, description=:desc, keywords=:key WHERE urlid=:urlid";
$query = $pdo->prepare($q);
$query->execute(array(
    ':url'     => $urlid,
    ':title'   => $title,
    ':desc'    => $desc,
    ':key'     => $key,
    ':urlid'   => $urlid
)); 
```

PDO complains because you are passing more arguments than you are using in your query. Or perhaps you meant to include more arguments in your query and you forgot?

# jquery - 滚动时淡出

> ID：11462751
> 
> 赞同：0
> 
> 时间：2012-07-13T00:57:49.160
> 
> 标签：jquery, scroll, fadeout

我对 JQUERY 比较陌生，我正在寻找正确方向的观点。

如何实现滚动效果的淡入淡出？

喜欢[http://fearthegrizzly.com/](http://fearthegrizzly.com/)或[http://davegamache.com](http://davegamache.com)

理想情况下，我希望可以选择将要淡出的任何图像放入 div 中。如果可能的话。

可能值得一提的是，我想在 Cargo Collective 上实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-06-28T17:29:24.103

Fearthegrizzly.com 使用 .css() 方法。你可以试试：

```
$(window).scroll(function() {
    $(".header-image").css({
    'opacity' : 1-(($(this).scrollTop())/250)
    });          
}); 
```

您向下滚动 250 像素，该属性完全淡出，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:21:57.487

提问提示：不要只告诉我们您想要什么。我们不是来为你做你的工作的。向我们展示您的尝试，以便我们帮助修复它。

话虽如此，这是一个开始......

当窗口的滚动顶部位置大于 20px 时，它会淡出一个 div，当您向上滚动时，它会淡出它。

```
$(window).scroll(function(){
   if($(window).scrollTop()<20){
         $('.fader').stop(true,true).fadeIn("slow");
   } else {
         $('.fader').stop(true,true).fadeOut("slow");
   }
}); 
```

[演示](http://jsbin.com/ufegac)

# ruby - Google Places API 服务器密钥无法使用 Curl

> ID：11462752
> 
> 赞同：1
> 
> 时间：2012-07-13T00:58:12.123
> 
> 标签：ruby, api, curl, google-places-api

我从 Google Places API 获得了一个有效的 api 密钥。我需要在后端使用它，所以我得到了一个服务器端密钥。但是，使用 curl 或 Rails 控制台无法调用。

但是，它确实可以通过浏览器工作。也就是说，我已经三重检查了我正在使用我生成的服务器端密钥。我也只使用 Google Places 文档中的示例 URL，所以所有参数都应该是正确的。这是我的卷曲：

curl -v [https://maps.googleapis.com/maps/api/place/search/xml?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=my_key](https://maps.googleapis.com/maps/api/place/search/xml?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=my_key)

此外，在（Ruby）Rails 控制台中：

Net::HTTP.get_response(URI.parse("https://maps.googleapis.com/maps/api/place/search/xml?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=my_key" ))

有任何想法吗？似乎很多人都遇到了问题，但是对于服务器密钥不起作用没有什么特别的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T00:54:07.220

使用 CURL，请务必在 URL 周围加上引号。否则，如果您在 Linux 中工作，则 URL 将在第一个 & 符号之后被截断，这将导致 REQUEST_DENIED 响应。

对于带有 Ruby 的 HTTPS，以下应该有效（参考[http://www.rubyinside.com/nethttp-cheat-sheet-2940.html](http://www.rubyinside.com/nethttp-cheat-sheet-2940.html)）：

```
require "net/https"
require "uri"

uri = URI.parse("https://maps.googleapis.com/maps/api/place/search/xml?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=...")
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

request = Net::HTTP::Get.new(uri.request_uri)

response = http.request(request)
print response.body 
```

# javascript - 脚本不创建元素

> ID：11462754
> 
> 赞同：0
> 
> 时间：2012-07-13T00:58:34.130
> 
> 标签：javascript, html, dom

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T01:04:59.977

您正在`.innerHTML`像方法一样使用该属性。不要使用括号，使用`=`. 另外，我不会费心设置属性，只需直接设置属性值。代码更直接，更易于阅读：

```
function createForgotPasswordLink() {
    var pwlink = document.createElement("a");
    pwlink.id = "forgotPssLink";
    pwlink.href = "http://www.mysite.com/page.aspx";
    pwlink.innerHTML = "Forgot Password?";
    document.body.appendChild(pwlink)
} 
```

# gridview - 如何在gridview中找到标签ID（ItemTemplate）和文本框ID（EditItemTemplate）？

> ID：11462760
> 
> 赞同：1
> 
> 时间：2012-07-13T00:59:51.353
> 
> 标签：gridview, textbox, controls, label, itemtemplate

我需要一些帮助。

在我的gridview（绑定到SQLDataSource）中，项目模板中有一个标签（lblDI），编辑项目模板中有一个文本框（tbEditDI）

```
 <asp:GridView ID="gvDiscussItem" runat="server" AutoGenerateColumns="False" BackColor="White" BorderColor="Black" BorderStyle="Double" BorderWidth="1px" 
CellPadding="2" DataKeyNames="discussionID" DataSourceID="SQLDiscussItems" 
ForeColor="Black" ShowHeaderWhenEmpty="True" 
style="font-size: small" Width="600px" >
<Columns>
<ItemTemplate>
<asp:Label ID="lblDI" runat="server" Text='<%# Bind("discussionItem") %>'></asp:Label>
</ItemTemplate>
<EditItemTemplate>
<asp:TextBox ID="tbEditDI" runat="server" Text='<%# Bind("discussionItem") %>' 
TextMode="MultiLine" onkeyup="SettingEditHeightDI(this);"></asp:TextBox>
</EditItemTemplate>
</asp:GridView> 
```

如何使标签（lblDI）变为多行以显示数据，并使文本框（tbEditDI）适合页面加载时的所有文本？

我有这些代码可供参考，可帮助我制作多行标签，以及适合页面加载大小的文本框，但它现在不起作用，至于标签，我无法控制在 aspx.cs 页面中使用的标签，以及通过 javascript 在加载时自动调整文本框的控件。

```
// to auto resize the textbox on pageload automatically using javascript
  document.getElementById("<%=tbAgenda.ClientID%>").style.height = document.getElementById("<%=tbAgenda.ClientID%>").scrollHeight + "px"; 
```

和

```
// to display multiline label in the aspx.cs page
 lblAgenda.Text = recentMinute.Agenda.Replace("\n", "<br/>"); // displays multilines textbox texts in a multiline label. For retrieval from database 
```

请帮助我，我在这个学术项目中遇到了很大的麻烦。:'(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:37:16.863

```
Try this 

For TextBox Control

Textbox EditTextBox = (TextBox)gvDiscussItem.FindControl("tbEditDI");

For Label Control

Label EditTextBox = (Label)gvDiscussItem.FindControl("lblDI"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:02:00.467

您可以在 gridview 的 RowDataBound 事件中添加此服务器端代码。就像是：

```
public void gvDiscussItem_RowDataBound(Object sender, GridViewRowEventArgs e)
{

    if(e.Row.RowType == DataControlRowType.DataRow)
    {
      // find your control...
      var lblDI = e.Row.FindControl("lblDI") as Label;
      if (lblDI != null)
      { 
         //fill the label and add the break-lines.
         lblDI.Text = DataBinder.Eval(Container.DataItem, "discussionItem").ToString().Replace("\n","<br />");
      }

    }
} 
```

# ruby-on-rails-3 - 活动 gmap4rails 映射到 fancybox 灯箱

> ID：11462765
> 
> 赞同：0
> 
> 时间：2012-07-13T01:01:28.793
> 
> 标签：ruby-on-rails-3, fancybox, gmaps4rails

我觉得我错过了一些非常愚蠢的东西，但我整天都被这个问题困扰，没有找到任何可以解决的问题。我想在调用fancybox灯箱时加载带有标记的用户的地图，以下代码是我拥有的最好和最小的方法，但我得到了：

ReferenceError：找不到变量：google

```
= link_to image_tag('map.png'), map_vendor_path(@coupon.vendor), class: 'js-show-map'

:javascript
  $(document).ready(function(){
    $('.js-show-map').fancybox({
      onComplete: function(){
        Gmaps.loadMaps();
        Gmaps.map.addMarkers([{"lng": "7.859409", "lat": "48.023551"}]);
      }
    });
  }); 
```

单击链接时会调用以下视图

# 地图.html.haml

```
// 
 it's here just for test
= stylesheet_link_tag 'gmaps4rails.css'
= javascript_include_tag "gmaps4rails/gmaps4rails.base"
= javascript_include_tag "gmaps4rails/gmaps4rails.googlemaps"

= gmaps4rails(@vendor.to_gmaps4rails)

= yield :scripts 
```

# 应用程序.js

```
...
//= require_tree ./templates
//= require_tree ./gmaps4rails 
```

# 应用程序.css

```
//= require gmaps4rails 
```

我检查了头源代码，我看到了

```
<script src="/assets/gmaps4rails/gmaps4rails.base.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.googlemaps.js?body=1" type="text/javascript"></script> 
```

不在灯箱中时，地图加载正常。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:17:42.597

我想问题如下：

*   你点击花式框

*   它检索 gmaps4rails html 和脚本

*   外部脚本不会即时加载

所以你应该：

*   在根视图中手动包含 js 依赖项

*   禁用外部 js 依赖项包含（虽然不是强制性的）

# iphone - facebook 应用程序不为我的应用程序进行身份验证

> ID：11462766
> 
> 赞同：-1
> 
> 时间：2012-07-13T01:01:56.250
> 
> 标签：iphone, xcode, facebook

我在将 facebook 应用程序与我的应用程序连接时遇到问题。我对 facebook sdk 了解不多，所以我只是从 facebook 示例应用程序中复制和粘贴。（我只需要上传带有一些文字的图片）。除非设备上安装了 facebook 应用程序，否则它运行良好，但如果设备具有 facebook 应用程序，似乎无法获取登录信息。我认为这是因为 facebook 应用程序不像 safari 浏览器那样要求对我的应用程序进行身份验证。我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:39:45.340

请从应用商店下载最新版本的 Facebook 应用 (4.1.1)。单点登录(SSO) 仅支持最新版本的 Facebook 应用程序。

# objective-c - 从Objective-C中的实例十六进制获取类

> ID：11462768
> 
> 赞同：13
> 
> 时间：2012-07-13T01:02:07.397
> 
> 标签：objective-c, ios, xcode

在调试器中看到实例变量的地址时，如何通过输入给定的内存地址来获取类？

我知道`p someObjectInstance`在调试器中或`NSLog(@"%p", someObjectInstance);`从代码中可能会出现相反的情况（从实例中获取地址）。有没有类似的方法可以反过来做呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-13T01:07:06.530

你要求的是非常不安全的。访问未知的内存位置通常是一个坏主意，但既然你问了：

编辑：如果在内部`gdb`or `lldb`，您可以执行以下操作：

```
po [(id)(0xDEADBEEF) class] 
```

但是，如果从代码运行，请使用以下内容；

```
NSString *input = @"0xFAFAFA";

unsigned address = UINT_MAX; // or UINT_MAX
[[NSScanner scannerWithString:input] scanHexInt:&address];

if (address == UINT_MAX)
{
    // couldn't parse input...
    NSLog(@"failed to parse input");
    return 0;
}

void *asRawPointer = (void *) (intptr_t) address;
id value = (__bridge id) asRawPointer;

// now do something with 'value'
NSLog(@"%@", [value class]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T01:24:21.343

在调试器中，您可以`po`在您怀疑是有效 Objective-C 对象的地址上使用。例如，在运行我的一个程序时，我知道它`0x9549ee0`指向一个 UIFont 对象。

使用`po`我看到以下内容：

```
(gdb) po 0x9549ee0
<UICFFont: 0x9549ee0> font-family: "Helvetica"; font-weight: normal; font-style: normal; font-size: 14px 
```

这将打印出您使用以下方法获得的相同信息：

```
NSLog(@"%@", someObject); 
```

也就是 的结果`[someObject description]`。这通常包含更多有用的信息，而不仅仅是类名（从上面的示例可以看出）。

正如理查德 J. 罗斯三世所说，你应该小心这样做。调试器通常可以判断地址是否无效，例如：

```
(gdb) po 0x9449ee0
0x9449ee0 does not appear to point to a valid object. 
```

但它这样做的方式并非万无一失。如果您要在程序中的代码中执行此操作，它可能会崩溃。

哦，当然你也可以`po`直接在变量上使用：

```
(gdb) po font
<UICFFont: 0x9549ee0> font-family: "Helvetica"; font-weight: normal; font-style: normal; font-size: 14px 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T18:09:44.957

右键单击调试区域并选择调试区域帮助->查看内存位置

或者在 Xcode 文档中转到

Xcode Developer Library->Xcode->IDEs->Debug Area Help->[查看内存位置](http://developer.apple.com/library/mac/recipes/xcode_help-debugger/articles/viewing_memory.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-15T04:43:28.043

在 Swift 中，您可以使用`unsafeBitCast`

```
(lldb) e let $vc = unsafeBitCast(0x7fd0b3e22bc0, GooglyPuff.PhotoCollectionViewController.self)
(lldb) po $vc.navigationItem.prompt = "WOOT!" 
```

阅读[Swift 的 Grand Central Dispatch 教程：第 2/2 部分](http://www.raywenderlich.com/79150/grand-central-dispatch-tutorial-swift-part-2)

# ruby-on-rails - Rails：渲染文本给出缺少模板错误

> ID：11462769
> 
> 赞同：3
> 
> 时间：2012-07-13T01:02:20.057
> 
> 标签：ruby-on-rails, ajax

我正在尝试使用 Rails 进行 AJAX 调用。调用的是我的控制器中的 change_profile 操作。该动作的内容如下：

```
def change_profile
    @test = params[:test]
    puts "AAAAAAA #{@test}"
    respond_to do |format|
       format.html
       format.js
    end
    render(:text => "FINISHED THE AJAX REQUEST")
end 
```

然而，当我调用它时，Rails 控制台会显示：

```
ActionView::MissingTemplate (Missing template main/change_profile  .... 
```

我不明白为什么会这样。既然我在渲染文本，难道不应该知道不要试图找到模板而只渲染文本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T01:07:58.010

当没有. 时`{}`，该`respond_to`块会查找名为`change_profile.erb.js`或其他的文件`change_profile.xxx.js`。`respond_to`在块中添加您的代码

```
def change_profile
    @test = params[:test]
    puts "AAAAAAA #{@test}"
    respond_to do |format|
       format.html
       format.js {
         render :text => "FINISHED THE AJAX REQUEST"
       }
    end
end 
```

# django - 如果模板中的标签与上下文中传递的布尔值不合作

> ID：11462779
> 
> 赞同：0
> 
> 时间：2012-07-13T01:04:31.770
> 
> 标签：django, django-templates

我有一个看法`login()`：

```
from django.http import HttpRequest
from useraccounts.models import BadIP
def login(request):
    client_address = request.META['REMOTE_ADDR']
    client_instance = BadIP.objects.get(ip_address=client_address)
    if client_instance.ban_state == True:
        return render(request, 'login.html', {'banned':True})
    else:
        return render(request, 'login.html', {'banned':False}) 
```

还有一个模板：

```
{% if banned == False %}
  <p>Content</p>
{% endif %}

{% if banned == True %}
  <p>Content #2</p>
{% endif %} 
```

在这些标准下，这两个段落都不会在模板中呈现。但是，如果我将代码中的实例更改`True`为`False`字符串，则模板会突然呈现正常。为什么会发生这种情况，有没有办法改变这种行为更明显/语义正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:17:32.530

它们已经是布尔变量了！无需与他们比较`True`或`False`. 试试这个：

```
{% if banned %}
    <p>Content</p>
{% else %}
    <p>Content #2</p>
{% end if %} 
```

# python - numpy/scipy 中的快速 2D 刚体转换

> ID：11462781
> 
> 赞同：5
> 
> 时间：2012-07-13T01:04:42.910
> 
> 标签：python, image-processing, numpy, scipy, affinetransform

我想将刚体变换应用于大量 2D 图像矩阵。理想情况下，我希望能够提供一个仿射变换矩阵，同时指定平移和旋转，一次性应用它，然后对输出进行三次样条插值。

不幸的是，似乎`affine_transform`in`scipy.ndimage.interpolation`不做翻译。我知道我可以使用 and 的组合`shift`，`rotate`但这有点混乱，并且涉及多次插值输出。

我也尝试过使用这样的泛型`geometric_transformation`：

```
import numpy as np
from scipy.ndimage.interpolation import geometric_transformation

# make the affine matrix
def maketmat(xshift,yshift,rotation,dimin=(0,0)):

    # centre on the origin
    in2orig = np.identity(3)
    in2orig[:2,2] = -dimin[0]/2.,-dimin[1]/2.

    # rotate about the origin
    theta = np.deg2rad(rotation)
    rotmat = np.identity(3)
    rotmat[:2,:2] = [np.cos(theta),np.sin(theta)],[-np.sin(theta),np.cos(theta)]

    # translate to new position
    orig2out = np.identity(3)
    orig2out[:2,2] = xshift,yshift

    # the final affine matrix is just the product
    tmat = np.dot(orig2out,np.dot(rotmat,in2orig))

# function that maps output space to input space
def out2in(outcoords,affinemat):
    outcoords = np.asarray(outcoords)
    outcoords = np.concatenate((outcoords,(1.,)))
    incoords = np.dot(affinemat,outcoords)
    incoords = tuple(incoords[0:2])
    return incoords

def rbtransform(source,xshift,yshift,rotation,outdims):

    # source --> target
    forward = maketmat(xshift,yshift,rotation,source.shape)

    # target --> source
    backward = np.linalg.inv(forward)

    # now we can use geometric_transform to do the interpolation etc.
    tformed = geometric_transform(source,out2in,output_shape=outdims,extra_arguments=(backward,))

    return tformed 
```

这可行，但速度*非常*慢，因为它本质上是在像素坐标上循环！有什么好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T08:11:29.450

你可以使用[scikit 图像](http://scikit-image.org)吗？如果是这种情况，您可以尝试应用单应性。用于通过 3x3 矩阵同时表示平移和旋转的单应性 cab。您可以使用 skimage.transform.fast_homography 函数。

```
import numpy as np
import scipy
import skimage.transform
im = scipy.misc.lena()
H = np.asarray([[1, 0, 10], [0, 1, 20], [0, 0, 1]])
skimage.transform.fast_homography(im, H) 
```

在我的旧 Core 2 Duo 上，转换大约需要 30 毫秒。

关于单应性：[http ://en.wikipedia.org/wiki/Homography](http://en.wikipedia.org/wiki/Homography)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T10:56:09.920

我认为`affine_transform` **确实**可以进行翻译 --- 有`offset`参数。

# c# - 在 wpf c# 应用程序的其他另一个类中访问 XAML 的按钮和复选框的值

> ID：11462782
> 
> 赞同：1
> 
> 时间：2012-07-13T01:04:45.280
> 
> 标签：c#, wpf, xaml, kinect

我正在开发一个 WPF Kinect 项目。它是 Windows Kinect 的开发工具包示例之一，被称为“Kinect Explorer”。您可以从 Kinect Developer Toolkit SDK 1.5 版下载它。在 kinectwindow.xaml 我添加了一个按钮和一个复选框。此外，还有一个名为 kinectskeleton.cs 的类，我在其中创建了两个数据表和一个布尔变量。第一个`DataTable`填充`OnRender`函数，而另一个为空。布尔变量默认设置为 false。所以，我想要的是当按下 kinectwindow.xaml.cs 中的按钮时，填充的最新数据`DataTable`被复制到空的。然后，当复选框被选中时，布尔值设置为 true。那么，如何做到这一点呢？

我在 kinectskeleton.cs 类中定义了一个函数，它将数据从填充复制到空`DataTable`。在`OnClick`kinectwindow.xaml.cs 的按钮函数中，我从类中创建了一个对象`kinectskeleton`并调用了该函数，但两个 DataTables 都是空的。函数中的复选框也是如此`CheckBox_Checked`：我将类的布尔值设置`kinectskelton`为 true（在未选中的函数中，我将其设置为 false）。但是，结果是在`kinectskelton`类中它总是设置为默认值 (false)，并且永远不会进入我为它设置的 if 条件，以便在它为 true 时输入。

希望现在更清楚，等待任何建议。要下载该工具包，请点击以下链接： http: [//www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)

我的代码的一部分：

```
//------------------------------------------------------------------------------
// <copyright file="KinectWindow.xaml.cs" company="Microsoft">
//     Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
//------------------------------------------------------------------------------

namespace Microsoft.Samples.Kinect.KinectExplorer
{
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Data;
    using System.Windows.Input;
    using Microsoft.Kinect;
    using Microsoft.Samples.Kinect.WpfViewers;

    /// <summary>
    /// Interaction logic for KinectWindow.xaml.
    /// </summary>
    public partial class KinectWindow : Window
    {
        public static readonly DependencyProperty KinectSensorProperty =
            DependencyProperty.Register(
                "KinectSensor",
                typeof(KinectSensor),
                typeof(KinectWindow),
                new PropertyMetadata(null));

        private readonly KinectWindowViewModel viewModel;
        /// <summary>
        /// Initializes a new instance of the KinectWindow class, which provides access to many KinectSensor settings
        /// and output visualization.
        /// </summary>
        public KinectWindow()
        {
            this.viewModel = new KinectWindowViewModel();

            // The KinectSensorManager class is a wrapper for a KinectSensor that adds
            // state logic and property change/binding/etc support, and is the data model
            // for KinectDiagnosticViewer.
            this.viewModel.KinectSensorManager = new KinectSensorManager();

            Binding sensorBinding = new Binding("KinectSensor");
            sensorBinding.Source = this;
            BindingOperations.SetBinding(this.viewModel.KinectSensorManager, KinectSensorManager.KinectSensorProperty, sensorBinding);

            // Attempt to turn on Skeleton Tracking for each Kinect Sensor
            this.viewModel.KinectSensorManager.SkeletonStreamEnabled = true;

            this.DataContext = this.viewModel;

            InitializeComponent();
        }

        public KinectSensor KinectSensor
        {
            get { return (KinectSensor)GetValue(KinectSensorProperty); }
            set { SetValue(KinectSensorProperty, value); }
        }

        public void StatusChanged(KinectStatus status)
        {
            this.viewModel.KinectSensorManager.KinectSensorStatus = status;
        }

        private void Swap_Executed(object sender, ExecutedRoutedEventArgs e)
        {
            Grid colorFrom = null;
            Grid depthFrom = null;

            if (this.MainViewerHost.Children.Contains(this.ColorVis))
            {
                colorFrom = this.MainViewerHost;
                depthFrom = this.SideViewerHost;
            }
            else
            {
                colorFrom = this.SideViewerHost;
                depthFrom = this.MainViewerHost;
            }

            colorFrom.Children.Remove(this.ColorVis);
            depthFrom.Children.Remove(this.DepthVis);
            colorFrom.Children.Insert(0, this.DepthVis);
            depthFrom.Children.Insert(0, this.ColorVis);
        }
        public KinectSkeleton ks = new KinectSkeleton();
        private void Calibrate_Click(object sender, RoutedEventArgs e)
        {

            ks.setcurrentdt();

        }

        private void AngleDifference_Checked(object sender, RoutedEventArgs e)
        {

            ks.is_checked = true;
        }

        private void AngleDifference_Unchecked(object sender, RoutedEventArgs e)
        {
            ks.is_checked = false;
        }

            }
}

    /// <summary>
    /// A ViewModel for a KinectWindow.
    /// </summary>
    public class KinectWindowViewModel : DependencyObject
    {
        public static readonly DependencyProperty KinectSensorManagerProperty =
            DependencyProperty.Register(
                "KinectSensorManager",
                typeof(KinectSensorManager),
                typeof(KinectWindowViewModel),
                new PropertyMetadata(null));

        public KinectSensorManager KinectSensorManager
        {
            get { return (KinectSensorManager)GetValue(KinectSensorManagerProperty); }
            set { SetValue(KinectSensorManagerProperty, value); }
        }
    }

}

namespace Microsoft.Samples.Kinect.WpfViewers
{
    using System.Collections.Generic;
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Media;
    using Microsoft.Kinect;
    using System.Data;
    using System.Windows.Media.Media3D;
    using System.Globalization;

    /// <summary>
    /// This control is used to render a player's skeleton.
    /// If the ClipToBounds is set to "false", it will be allowed to overdraw
    /// it's bounds.
    /// </summary>
    public class KinectSkeleton : Control
    {
        public bool is_checked=false;
        public DataTable x = new DataTable();
        public DataTable y = new DataTable();
protected override void OnRender(DrawingContext drawingContext)
        {
            base.OnRender(drawingContext);

            var currentSkeleton = this.Skeleton;

            // Don't render if we don't have a skeleton, or it isn't tracked
            if (drawingContext == null || currentSkeleton == null || currentSkeleton.TrackingState == SkeletonTrackingState.NotTracked)
            {
                return;
            }

            // Displays a gradient near the edge of the display where the skeleton is leaving the screen
            this.RenderClippedEdges(drawingContext);

            switch (currentSkeleton.TrackingState)
            {
                case SkeletonTrackingState.PositionOnly:
                    if (this.ShowCenter)
                    {
                        drawingContext.DrawEllipse(
                            this.centerPointBrush,
                            null,
                            this.Center,
                            BodyCenterThickness * this.ScaleFactor,
                            BodyCenterThickness * this.ScaleFactor);
                    }

                    break;
                case SkeletonTrackingState.Tracked:

                   // here i defined the DataTables

                        if (is_checked == false)
                        {
                            //fill data table x with value a
                        }
                        else
                        {
                            //fill data table x with value b
                        }

                    break;
            }
        }

 public void setcurrentdt()
        {

            //fill empty datatable "y" with filled one "x"
              y = x.Copy();
        }
    }
} 
```

复选框的xml代码：

```
 <Window x:Class="Microsoft.Samples.Kinect.KinectExplorer.KinectWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Microsoft.Samples.Kinect.KinectExplorer"
        xmlns:kt="clr-namespace:Microsoft.Samples.Kinect.WpfViewers;assembly=Microsoft.Samples.Kinect.WpfViewers"
        Title="Kinect Explorer" Width="839" Height="768">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/Microsoft.Samples.Kinect.WpfViewers;component/KinectControlResources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <local:KinectWindowsViewerSwapCommand x:Key="SwapCommand"/>
        </ResourceDictionary>
    </Window.Resources>
    <Window.CommandBindings>
        <CommandBinding Command="{StaticResource SwapCommand}" Executed="Swap_Executed"/>
    </Window.CommandBindings>
    <Window.InputBindings>
        <KeyBinding Key="Back"  Command="{StaticResource SwapCommand}"/>
    </Window.InputBindings>

    <Grid Name="layoutGrid" Margin="10 0 10 0" TextBlock.FontFamily="{StaticResource KinectFont}">        
        <Grid.RowDefinitions>
            <!-- The title bar -->
            <RowDefinition Height="Auto"/>
            <!-- The main viewer -->
            <RowDefinition Height="*" MinHeight="300"/>
            <!-- The audio panel -->
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <!-- The main viewer -->
            <ColumnDefinition Width="*" MinWidth="400"/>
            <!-- The side panels -->
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <DockPanel Grid.Row="0" Grid.ColumnSpan="2" Margin="10 0 10 20">
            <Image DockPanel.Dock="Left" Source="Images\Logo.png" Stretch="None" HorizontalAlignment="Left" Margin="0 10 0 0"/>
            <TextBlock DockPanel.Dock="Right" 
                       HorizontalAlignment="Right" 
                       VerticalAlignment="Bottom" 
                       Foreground="{StaticResource TitleForegroundBrush}" FontSize="{StaticResource LabelFontSize}">Kinect Explorer</TextBlock>
            <Image Source="Images\Status.png" Stretch="None" HorizontalAlignment="Center"/>
        </DockPanel>

        <!-- The main viewer -->
        <Grid Grid.Column="0" Grid.Row="1" Margin="10" >
            <Grid Name="MainViewerHost">
                <Grid Name="ColorVis" Background="{StaticResource DarkNeutralBrush}">
                    <Viewbox HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="Uniform">
                        <!-- Make the colorViewer and skeletonViewer overlap entirely. -->
                        <Grid>
                            <kt:KinectColorViewer x:Name="ColorViewer" KinectSensorManager="{Binding KinectSensorManager}" CollectFrameRate="True" RetainImageOnSensorChange="True" />
                            <Canvas>
                                <kt:KinectSkeletonViewer 
                                    KinectSensorManager="{Binding KinectSensorManager}"
                                    Visibility="{Binding KinectSensorManager.ColorStreamEnabled, Converter={StaticResource BoolToVisibilityConverter}}"
                                    Width="{Binding ElementName=ColorViewer,Path=ActualWidth}"
                                    Height="{Binding ElementName=ColorViewer,Path=ActualHeight}"
                                    ImageType="Color" />
                            </Canvas>
                        </Grid>
                    </Viewbox>
                    <Border 
                        TextBlock.Foreground="{StaticResource LabelForegroundBrush}" 
                        HorizontalAlignment="Right" VerticalAlignment="Top" 
                        Background="{StaticResource MediumNeutralBrush}"
                        Width="50" Height="50">
                        <StackPanel Orientation="Vertical" >
                            <TextBlock FontSize="{StaticResource HeaderFontSize}" Text="{Binding ElementName=ColorViewer, Path=FrameRate}" HorizontalAlignment="Center" Margin="-2"/>
                            <TextBlock FontSize="{StaticResource FPSFontSize}" HorizontalAlignment="Center" Margin="-2">FPS</TextBlock>
                        </StackPanel>
                    </Border>                   
                    <Rectangle Fill="#7777" Visibility="{Binding KinectSensorManager.ColorStreamEnabled, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=True}"/>
                </Grid>
            </Grid>
        </Grid>

        <!-- The Audio panel -->
        <Grid Grid.Row="2" Grid.Column="0"
              Margin="10 10 10 20"
              VerticalAlignment="Top">
            <kt:KinectAudioViewer 
                x:Name="kinectAudioViewer" 
                HorizontalAlignment="Stretch" 
                VerticalAlignment="Stretch"                 
                KinectSensorManager="{Binding KinectSensorManager}"/>
        </Grid>

        <!-- The side panels-->
        <StackPanel 
            Orientation="Vertical" 
            Grid.Column="1" 
            Grid.Row="1" 
            Grid.RowSpan="2" 
            Margin="10"
            HorizontalAlignment="Left" VerticalAlignment="Top">
            <Grid Name="SideViewerHost" Width="200" Height="150">
                <Grid Name="DepthVis" Background="{StaticResource DarkNeutralBrush}">
                    <Viewbox Stretch="Uniform" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <!-- Make the depthViewer and skeletonViewer overlap entirely. -->
                        <Grid>
                            <kt:KinectDepthViewer 
                            x:Name="DepthViewer"
                            KinectSensorManager="{Binding KinectSensorManager}"
                            CollectFrameRate="True" 
                            RetainImageOnSensorChange="True"/>
                            <Canvas>
                                <kt:KinectSkeletonViewer 
                                KinectSensorManager="{Binding KinectSensorManager}"
                                Visibility="{Binding KinectSensorManager.DepthStreamEnabled, Converter={StaticResource BoolToVisibilityConverter}}"
                                Width="{Binding ElementName=DepthViewer, Path=ActualWidth}"
                                Height="{Binding ElementName=DepthViewer, Path=ActualHeight}"
                                ShowBones="true" ShowJoints="true" ShowCenter="true" ImageType="Depth" />
                            </Canvas>
                        </Grid>
                    </Viewbox>
                    <Border 
                        TextBlock.Foreground="{StaticResource LabelForegroundBrush}" 
                        HorizontalAlignment="Right" VerticalAlignment="Top" 
                        Background="{StaticResource MediumNeutralBrush}"
                        Width="50" Height="50">
                        <StackPanel Orientation="Vertical" >                            
                            <TextBlock FontSize="{StaticResource HeaderFontSize}" Text="{Binding ElementName=DepthViewer, Path=FrameRate}" HorizontalAlignment="Center" Margin="-2"/>
                            <TextBlock FontSize="{StaticResource FPSFontSize}" HorizontalAlignment="Center" Margin="-2">FPS</TextBlock>
                        </StackPanel>
                    </Border>
                    <Rectangle Fill="#7777" Visibility="{Binding KinectSensorManager.DepthStreamEnabled, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=True}"/>
                </Grid>
                <Button HorizontalAlignment="Left" VerticalAlignment="Top" Command="{StaticResource SwapCommand}">
                    <Button.Template>
                        <ControlTemplate>
                            <Border Width="50" Height="50">
                                <Border.Style>
                                    <Style>
                                        <Style.Setters>
                                            <Setter Property="Border.Background" Value="{StaticResource MediumNeutralBrush}"/>
                                        </Style.Setters>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding RelativeSource={x:Static RelativeSource.TemplatedParent}, Path=IsMouseOver}" Value="True">
                                                <Setter Property="Border.Background" Value="{StaticResource DarkNeutralBrush}"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <Image Source="Images/swap.png"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>                
            </Grid>

            <kt:KinectSettings KinectSensorManager="{Binding KinectSensorManager}" Margin="0 20 0 0" />

        </StackPanel>
        <Button Content="Calibrate"  Height="23" x:Name="Calibrate" x:FieldModifier="public" Width="75" Margin="213,45,289,435" Grid.RowSpan="2" Click="Calibrate_Click" />
        <CheckBox Content="AngleDifference"  Height="25" x:Name="AngleDifference" x:FieldModifier="public" Width="135" Margin="0,45,137,433" Grid.RowSpan="2" Checked="AngleDifference_Checked" HorizontalAlignment="Right" Unchecked="AngleDifference_Unchecked" />
    </Grid> 
</Window> 
```

视图模型类：

```
public class ViewModel
    {

        public bool IsChecked { get; set; }
        public bool is_clicked { get; set; }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T13:29:09.860

在没有看到完整`KinectWindow.xaml`文件或下载 SDK 的情况下，我进行了一些猜测，但在我看来，您的问题是由以下两个不同实例引起的`KinectSkeleton`：

*   `ks`您正在实例化`KinectWindow`，设置其`is_checked`属性并调用`setcurrentdt`
*   被调用的某处声明`KinectWindow.xaml`的那个。`OnRender`

如何解决这个问题？

*   `KinectSkeleton`中查找`KinectWindow.xaml`。它应该像这样定义（而不是`local`，可以使用不同的命名空间前缀）：

> ```
> <local:KinectSkeleton ... /> 
> ```

*   给它一个名称，以便您可以`KinextWindow.xaml.cs`通过添加`x:Name`属性从后面的代码中引用它。如果您命名它，`ks`您将不需要更改现有的代码修改：

> ```
> <local:KinectSkeleton x:Name="ks" ... /> 
> ```

*   删除`KinectSkeleton`后面代码中的类声明以防止冲突：

> ```
> public KinectSkeleton ks = new KinectSkeleton(); 
> ```

现在您将只有一个`KinectSkeleton`, 因此`OnRender`将使用您从事件处理程序修改的相同数据。

# optimization - z3 中的 INST_GEN 是什么

> ID：11462788
> 
> 赞同：2
> 
> 时间：2012-07-13T01:06:07.247
> 
> 标签：optimization, option, z3, quantify

背景：我研究使用 z3 进行有界 Java 程序验证。我想得到一个关于线性化问题的优化模型。一种标准方法可以是逐步搜索模型，直到找到未满足的情况。但是性能似乎是个问题，它通过引入 JNI 破坏了代码的可移植性，它将 z3 c/c++ api 集成到我的工具中。

现在我想对 java 方法的所有输入添加约束。我使用数量数组（我使用数组理论来模拟堆）。但是，z3 总是在可满足的问题上立即返回“未知”。似乎不可能生成模型。我注意到z3有一个选项，INST_GEN，然后我试图理解它。我将以下公式提供给 z3。

```
(set-option :INST_GEN true)
(define-sort S () (_ BitVec 2))
(declare-fun s () S)
(assert (= s (_ bv0 2)))

(define-sort A () (Array S S))
(push) ;; 1st case    
(assert (forall ((a A)) (= (select a s) s)))
(check-sat)
(get-model)
(pop)

(push) ;; 2nd case
(declare-fun a () A)
(assert (forall ((t S)) (= (select a t) t)))
(check-sat)
(get-model)
(pop)

(push) ;; 3rd case
(check-sat)
(get-model)
(pop) 
```

在第一种和第二种情况下，z3 在 Linux 中返回“分段错误”，而在 Windows 7 中崩溃。z3 都是版本 4.0，x64。

第三种情况，免量化，Z3成功生成模型

```
sat 
(model (define-fun s () (_ BitVec 2) #b00) ) 
```

我的第一个问题是这个选项是如何工作的？它是否枚举数组？

第二个问题是，我注意到 z3 可以在量化数组的不满意问题上成功返回“unsat”。z3 是否支持某些选项或方法来在量化数组、有界索引和元素的满意问题中生成模型？例如使用 if-then-else 子句。

感谢您的阅读和考虑！任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T05:56:27.523

首先，该选项`INST_GEN`是实验的一部分。它不应该暴露给外部用户。这个选项没有经过认真测试。它将在以后的版本中隐藏。对于那个很抱歉。

其次，一般来说，Z3 在量化数组的可满足问题上会失败。以下[教程](http://rise4fun.com/Z3/tutorial/guide)（量词部分）描述了 Z3 完成的许多片段。

最后，Z3 有许多不同的引擎/求解器。但是，其中只有一个支持增量求解。每当使用`push`/`pop`命令时，Z3 都会自动切换到这个增量求解器。如果我们去掉`push`and`pop`命令，那么 Z3 可以证明第二个问题是可以满足的。这是修改后示例的链接：[http](http://rise4fun.com/Z3/apcQ) ://rise4fun.com/Z3/apcQ 。

# wpf - Datagrid 列标题设置

> ID：11462790
> 
> 赞同：0
> 
> 时间：2012-07-13T01:06:17.227
> 
> 标签：wpf, silverlight, datagrid, wpfdatagrid, advanceddatagrid

我有一个查询，它从加入 2 个实体返回 2 列，如下所示：

```
var myQ = myDataContext1.Entity1.Join(myDataContext1.Entity2, a=>a.id, b=>b.id, (a, b)=> new Tuple<int, float>(a.id, b.something)).ToList(); 
MyDatagrid.ItemSources = myQ; 
```

它工作得很好。但我的数据网格将两列标记为“item1”和“item2”。我试图将它们更改为正确的名称。到目前为止，我无法做到。我尝试使用：

```
MyDatagrid.Columns.Add(new DataGridTextColumns{ Header = "Aheader", Binding= new System.Windows.Data.Binding("a.id"); 
```

所有数据都会消失，因为绑定名称一定是错误的。但我不知道我应该在 Binding 之后放什么......然后，我尝试了

`MyDataGrid.Columns[0].Header = "myID"`

它不起作用，并且每次都告诉我列集合中没有列。所以我认为标题的更改必须在加载数据网格并添加事件之后发生：

```
MyDataGrid.loaded += (o, e) =>{MyDataGrid.Columns[0].Header = "myID"}; 
```

仍然是同样的错误.....知道我应该在这里做什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:17:37.913

绑定需要是 Item1 和 Item2。您还应该将 AutoGenerateColumns 设置为 false，并且最好在 XAML 中定义列。例如

```
<DataGrid AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding Path=Item1}" Header="Header 1"></DataGridTextColumn>
        <DataGridTextColumn Binding="{Binding Path=Item2}" Header="Header 2"></DataGridTextColumn>
    </DataGrid.Columns>
</DataGrid> 
```

使用匿名类型而不是元组可能会更好。这样绑定可能更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:55:41.077

将 MikeKulls 的代码转换为 C#：

`myDataGrid.Columns.Add(new DataGridTextColumn {Header ="myHeader" Binding = new System.Windows.Data.Binding("Item1")});`

# android - java.lang.InstantiationException

> ID：11462793
> 
> 赞同：2
> 
> 时间：2012-07-13T01:06:24.860
> 
> 标签：android

我正在制作一个应用程序来向人们发送 X 数量的文本，并且在重写我的代码以包含线程之后，它坏了。另外，将“Thread.sleep(3000);” 部分代码冻结了 UI，或者将我的所有代码放在一个线程中解决该问题？最后一个问题，如何防止脚本在后台停止（继续发送）

```
public abstract class multisender2 extends Activity implements Runnable {
    @Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
}
    public void csend(View view) {
     EditText number = (EditText)findViewById(R.id.pnumber);
     EditText message = (EditText)findViewById(R.id.pmessage);
     EditText hmany = (EditText)findViewById(R.id.hmany);
     String _hmany = hmany.getText().toString();
     final String _number = number.getText().toString();
     final String _message = message.getText().toString();
     final int xtime = Integer.parseInt(_hmany);
     final int count = 1;
    Thread background = new Thread(new Runnable() { 

@Override
public void run() {
    try {
    if (count > xtime == false){
    SmsManager.getDefault().sendTextMessage(_number, null, _message, null, null);
        Thread.sleep(3000);
              }
    } catch (InterruptedException e) {
 }
 }

});       
    background.start();
}
} 
```

谢谢，这里是 LogCat

> 07-12 21:04:40.222: E/AndroidRuntime(13948): 致命异常: main 07-12 21:04:40.222: E/AndroidRuntime(13948): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{com. dillonregi.multisender/com.dillonregi.multisender.multisender2}：java.lang.InstantiationException：com.dillonregi.multisender.multisender2 07-12 21:04:40.222：E/AndroidRuntime（13948）：在 android.app.ActivityThread.performLaunchActivity (ActivityThread.java:1580) 07-12 21:04:40.222: E/AndroidRuntime(13948): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1674) 07-12 21:04:40.222: E/AndroidRuntime (13948): 在 android.app.ActivityThread.access$1500(ActivityThread.java:117) 07-12 21:04:40.222: E/AndroidRuntime(13948): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java :942) 07-12 21:04:40.222:E/AndroidRuntime(13948): 在 android.os.Handler.dispatchMessage(Handler.java:99) 07-12 21:04:40.222: E/AndroidRuntime(13948): 在 android.os.Looper.loop(Looper.java :130) 07-12 21:04:40.222: E/AndroidRuntime(13948): 在 android.app.ActivityThread.main(ActivityThread.java:3701) 07-12 21:04:40.222: E/AndroidRuntime(13948):在 java.lang.reflect.Method.invokeNative(Native Method) 07-12 21:04:40.222: E/AndroidRuntime(13948): 在 java.lang.reflect.Method.invoke(Method.java:507) 07-12 21:04:40.222: E/AndroidRuntime(13948): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:895) 07-12 21:04:40.222: E/AndroidRuntime(13948):在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:653) 07-12 21:04:40.222: E/AndroidRuntime(13948): 在 dalvik.system.NativeStart.main(Native Method) 07-12 21:04:40。222: E/AndroidRuntime(13948): 引起: java.lang.InstantiationException: com.dillonregi.multisender.multisender2 07-12 21:04:40.222: E/AndroidRuntime(13948): at java.lang.Class.newInstanceImpl(本机方法) 07-12 21:04:40.222: E/AndroidRuntime(13948): at java.lang.Class.newInstance(Class.java:1409) 07-12 21:04:40.222: E/AndroidRuntime(13948):在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 07-12 21:04:40.222: E/AndroidRuntime(13948): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1572) 07-12 21 :04:40.222: E/AndroidRuntime(13948): ... 11 更多 07-12 21:04:40.222: E/AndroidRuntime(13948): [蓝色错误处理程序] 为 main 07-12 21:04 制作调试报告文件:40.222: E/AndroidRuntime(13948): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{com.dillonregi.multisender/com.dillonregi.multisender.multisender2}：java.lang.InstantiationException：com.dillonregi.multisender.multisender2 07-12 21:04:40.222：E/AndroidRuntime（13948）：在 android.app.ActivityThread.performLaunchActivity (ActivityThread.java:1580) 07-12 21:04:40.222: E/AndroidRuntime(13948): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1674) 07-12 21:04:40.222: E/AndroidRuntime (13948): 在 android.app.ActivityThread.access$1500(ActivityThread.java:117) 07-12 21:04:40.222: E/AndroidRuntime(13948): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java :942) 07-12 21:04:40.222: E/AndroidRuntime(13948): 在 android.os.Handler.dispatchMessage(Handler.java:99) 07-12 21:04:40.222: E/AndroidRuntime(13948):在 android.os.Looper.loop(Looper.java:130) 07-12 21:04:40.222:E/AndroidRuntime(13948): 在 android.app.ActivityThread.main(ActivityThread.java:3701) 07-12 21:04:40.222: E/AndroidRuntime(13948): 在 java.lang.reflect.Method.invokeNative(Native方法) 07-12 21:04:40.222: E/AndroidRuntime(13948): at java.lang.reflect.Method.invoke(Method.java:507) 07-12 21:04:40.222: E/AndroidRuntime(13948) : 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:895) 07-12 21:04:40.222: E/AndroidRuntime(13948): 在 com.android.internal.os.ZygoteInit.main (ZygoteInit.java:653) 07-12 21:04:40.222: E/AndroidRuntime(13948): at dalvik.system.NativeStart.main(Native Method) 07-12 21:04:40.222: E/AndroidRuntime(13948) ：引起：java.lang.InstantiationException：com.dillonregi.multisender.multisender2 07-12 21:04:40.222：E/AndroidRuntime(13948)：在 java.lang.Class。newInstanceImpl(Native Method) 07-12 21:04:40.222: E/AndroidRuntime(13948): at java.lang.Class.newInstance(Class.java:1409) 07-12 21:04:40.222: E/AndroidRuntime(13948) ): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 07-12 21:04:40.222: E/AndroidRuntime(13948): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1572) 07- 12 21:04:40.222: E/AndroidRuntime(13948): ... 11 更多还有 11 个还有 11 个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T01:13:06.070

Do not block the *main* thread. Try to use [AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html). Fore more information read - [Processes and Threads](http://developer.android.com/guide/components/processes-and-threads.html)

# ruby-on-rails - 带有导轨的 twitter 引导弹出窗口

> ID：11462795
> 
> 赞同：0
> 
> 时间：2012-07-13T01:06:58.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, twitter-bootstrap, popover

弹出框目前似乎对我不起作用。我成功地将 twitter-bootstrap gem 用于其他功能（如轮播），并且可以看到工具提示和弹出框已加载到页面的源代码中：

```
<script src="/assets/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-popover.js?body=1" type="text/javascript"></script> 
```

这是我的javascript（我放在application.js中）

```
$(function () {
    $('.popover-test').popover({ html : true });
}); 
```

这是我的看法：

```
<%= link_to('Popover test', '#', :class => "popover-test", :title => "This is a test", "data-content" => "<b>hello popover world</b>") %> 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T02:57:01.027

您没有初始化弹出窗口。尝试：

```
$(function () {
  $('.popover-test').popover({ 
    html : true
  }).popover('show');
}); 
```

注意`.popover('show')`

我还建议从您的 html 中取出内容逻辑，以便您的最终结果如下所示：

```
$(function () {
  $('.popover-test').popover({ 
    html : true,
    title: "This is a test",
    content: "<b>hello popover world</b>"
  }).popover('show');
}); 
```

...更清洁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:46:16.710

试试这个标记：

```
<%= link_to('Popover test', '#', :class => "popover-test", :rel => "popover", :title => "This is a test", :"data-content" => "<b>hello popover world</b>") %> 
```

您只是缺少 :rel 值，并且“数据内容”应该是一个符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:41:06.213

你得到这个工作了吗？如果不是，wisew 说的是正确的，但是，他有一个小错字-> 删除“数据内容”周围的引号：

```
<%= link_to('Popover test', '#', :class => "popover-test", :rel => "popover", :title => "This is a test", :data-content => "<b>hello popover world</b>") %> 
```

看看有没有这样

# google-nativeclient - 如何将图像从网页传输到 Native Client 应用程序？

> ID：11462802
> 
> 赞同：1
> 
> 时间：2012-07-13T01:07:41.757
> 
> 标签：google-nativeclient

我想知道如何将图像从网页传输到 Native Client 应用程序。

我有两个主要用例：1.）用户从他们的文件系统上传图像 2.）从网络摄像头捕获图像并保存在画布元素中

我查看了 imageData 下的文档，但我不确定如何使用它，或者这是否是正确的方法。

我也知道我们可以使用消息框架来传递数据，但我不确定该方法是否有效，对于至少 640x480 的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:03:51.523

是的，您可以通过 PostMessage API 将图像数据从 JS 传输到 NaCl。

```
var imageData = context.getImageData(0, 0, this.canvas.width, this.canvas.height);
NaClModule.postMessage(imageData.data.buffer); 
```

此外，您实际上可以将 fileBlob URL 交给 NaCl（也可以通过 postmessage），并使用 pp::GetURL API 直接获取文件。这将允许您在 JS 中弹出一个文件选择器，并让 NaCl 加载文件，而不是让 JS 加载它并传递它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:37:18.207

您应该检查 Nacl 端口中的 Nacl-mounts。您可以使用 http2mount 类从服务器加载图像文件。但是，到目前为止，我认为没有任何方法可以从 Nacl 访问 Camera。他们还没有发布相机 api。

# java - 使用 Java Web Start 程序创建客户端-服务器应用程序的最佳方法是什么？

> ID：11462805
> 
> 赞同：1
> 
> 时间：2012-07-13T01:08:07.693
> 
> 标签：java, netbeans, client-server, java-web-start, japplet

好的，所以我创建了一个应用程序，它是一个 Java Web Start 应用程序，但我确定我需要将数据写入服务器机器，因此需要一个额外的服务器应用程序。我非常希望客户端发送不同的字符串，以便以不同的方式处理客户端请求（例如，在服务器机器上创建一个新的用户文件或将从文件读取的用户数据发送到客户端机器）。

我在考虑可能使用套接字，但如果有更好的方法，那么我完全赞成。另外我假设无论我使用什么，我都需要使用线程来处理许多同时请求，这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:53:42.503

为了您的目的，您最好创建一个通过 http 进行通信以交换数据的 Web 服务。我建议在 Java 中执行此操作，或者在 C# 中创建 WCF。

Eclipse 中的 Java Web 服务教程：[http ://www.vogella.com/articles/REST/article.html#first_project](http://www.vogella.com/articles/REST/article.html#first_project)

在 netbeans 中：http: [//netbeans.org/kb/docs/websvc/jax-ws.html](http://netbeans.org/kb/docs/websvc/jax-ws.html)

第一个教程是一个非常流行且易于掌握的宁静服务。祝你好运！

# c - nftw 线程安全

> ID：11462808
> 
> 赞同：4
> 
> 时间：2012-07-13T01:08:47.913
> 
> 标签：c, recursion, thread-safety, delete-file, nftw

在 C/C++ 中是否有任何线程安全的[nftw()实现？](http://pubs.opengroup.org/onlinepubs/9699919799/functions/nftw.html)在文档中它说

> “nftw() 函数不必是线程安全的。”

我将使用 nftw 作为递归删除函数来遍历多线程应用程序中的目录结构。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T01:33:46.967

使非线程安全函数成为线程安全的一种简单方法是将其包装在一个函数中，该函数在调用它之前获得锁，并始终通过此包装器调用它。一般来说，您需要在解锁之前复制出结果，但`nftw`不会产生任何需要在返回后复制的结果。不过有几点需要注意：

1.  当多个线程想要使用接口时，这当然会阻止所有并行性。

2.  一个选项可以`nftw`使它`chdir`进入它遍历的每个目录。这对于多线程应用程序来说是一件非常糟糕的事情（因为当前目录由所有线程共享），因此您应该避免使用此选项。

在具有相关接口的 POSIX 2008 系统上，在没有任何用法或路径名长度限制的情况下`openat`实现您自己的等价物非常简单，因此您最好自己编写。`nftw``chdir`

# c++ - 存储和计算字符串或整数重复项的最佳方法是什么？

> ID：11462812
> 
> 赞同：0
> 
> 时间：2012-07-13T01:09:55.120
> 
> 标签：c++

这段代码解释了我想要做什么：

```
unsigned long g_PlayerIP[MAX_AMOUNT_OF_PLAYERS];//save the IP address of each player
int g_max_ip = MAX_CONNECTED_FROM_ONE_IP;

PLUGIN_EXPORT bool PLUGIN_CALL OnPlayerConnect(int playerid)
{
    PlayerLoopList.push_back(playerid);

    char szIP[32];
    GetPlayerIp(playerid,szIP);//get the ip of the player into szIP
    unsigned short explodeIP[4];//declare 4 eight bit variables, to store the exploded ip
    sscanf(szIP, " %d[^.].%d[^.].%d[^.].%d", &explodeIP[0], &explodeIP[1], &explodeIP[2], &explodeIP[3]);//explode ip into 4 pats ranging from 0 to 255
    g_PlayerIP[playerid] = (explodeIP[0] + (explodeIP[1] << 8) + (explodeIP[2] << 16) + (explodeIP[3] << 24));//store the ip as a 32bit integer
    int connected = 0;//variable for counting connected players fron one ip
    for(list <int>::iterator i = PlayerLoopList.begin(); i != PlayerLoopList.end(); ++i)
    {
        if(g_PlayerIP[playerid] == g_PlayerIP[*i])
        {
            ++connected;
        }
    }
    if(connected >= g_max_ip)
    {
        Report(playerid,IP_FLOOD,g_PlayerIP[playerid]);//too many connected from one ip, report it.
    }
    return true;
} 
```

并看到这部分：

```
 sscanf(szIP, " %d[^.].%d[^.].%d[^.].%d", &explodeIP[0], &explodeIP[1], &explodeIP[2], &explodeIP[3]);//explode ip into 4 pats ranging from 0 to 255
    g_PlayerIP[playerid] = (explodeIP[0] + (explodeIP[1] << 8) + (explodeIP[2] << 16) + (explodeIP[3] << 24));//store the ip as a 32bit integer
    int connected = 0;//variable for counting connected players fron one ip
    for(list <int>::iterator i = PlayerLoopList.begin(); i != PlayerLoopList.end(); ++i)
    {
        if(g_PlayerIP[playerid] == g_PlayerIP[*i])
        {
            ++connected;
        }
    } 
```

让我有点，好吧，质疑我是否可以更快地完成，C++ 中必须有一个极好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T01:17:37.957

只需使用 std::map。这样你就不需要每个可能的ip，只需要你实际使用的ip。

```
std::map<int, unsigned int> counts;

counts[playerid]++;
if (counts[playid] >= g_max_ip){ //Report
} 
```

# c++ - Marshal::copy 与 CvMat

> ID：11462819
> 
> 赞同：0
> 
> 时间：2012-07-13T01:11:25.170
> 
> 标签：c++, opencv, c++-cli

我需要使用 c++/cli 将图像发送到字节数组中。图像最初是 Iplimage 格式。

```
 int img_sz1 = img1->width * img1->height * img1->nChannels;
    array <Byte>^ hh1 = gcnew array<Byte> (img_sz1);
    Marshal::Copy( (IntPtr)img->imageData, hh1, 0, img_sz1 ); 
```

它工作正常。

我添加了编码步骤以将其作为 jpeg 发送

```
 CvMat* buf1 = cvEncodeImage(".jpeg", img1, jpeg_params);
    img_sz1=buf1->width*buf1->height 
    Marshal::Copy( (IntPtr)buf1, hh1, 0, img_sz1 ); 
```

现在它编译得很好，但在 marshal:copy 行给了我错误

```
 An unhandled exception of type 'System.AccessViolationException' occurred in   
 mscorlib.dll. Additional information: Attempted to read or write protected memory. 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:26:08.287

的返回`cvEncodeImage`是一个单行矩阵，包含编码的图像数据。您现在要复制的是结构本身，例如宽度字段、高度字段等。我相信您需要从中复制`buf1->data`。

# c++ - 使用类型和非类型参数在模板类之外定义函数

> ID：11462820
> 
> 赞同：1
> 
> 时间：2012-07-13T01:11:25.893
> 
> 标签：c++

```
template <typename T, int a, UINT32 B>
class Test
{
    public:
        Test(T, int);
        void foo();
        int bar();
}; 
```

如何在此类之外定义构造函数和函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T01:24:52.423

只需在构造函数/方法定义之前包含完整的模板“规范”，并在限定方法/构造函数名称时在类名之后的尖括号中包含模板参数名称。

像这样：

```
#include <iostream> 
#include <vector>

template <typename T, int a, int b>
class Test
{
    public:
        Test(T t, int i);
        void foo();
        int bar();
};

template <typename T, int a, int b>
Test<T, a, b>::Test(T t, int i)
{
    std::cout << "Constructor, i = " << i << std::endl;
}

template <typename T, int a, int b>
void Test<T, a, b>::foo()
{
    std::cout << "foo() Template params:" << a << " " << b << std::endl;
}

template <typename T, int a, int b>
int Test<T, a, b>::bar()
{
    std::cout << "bar() Template params:" << a << " " << b << std::endl;
}

int main()
{
    Test<std::vector<double>, 13, 42> t(std::vector<double>(2), 5);
    t.foo();
    t.bar();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:24:00.627

```
template <typename T, int a, int B>
Test<T, a, B>::Test(T x1, int x2)
{

} 
```

可以对函数执行相同的方法。

# java - 如何让这些数据保存在jsp的页面中？

> ID：11462821
> 
> 赞同：0
> 
> 时间：2012-07-13T01:11:43.823
> 
> 标签：java, jsp

我正在尝试做一个系统，将用户输入表单的数据保存在页面jsp中。然而没有奏效！例如：

用户输入表单中的数据：

```
<input type="text" name="title" id="title" /> 
```

用户在表单中输入的数据，会保存在页面jsp中：

```
<% String title = request.getParameter("title") %> 
```

数据将被保存。但是，当我更新页面时，数据丢失了。我想做一个这样的评论系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:58:15.320

如果要在页面中保存数据，则只需将其放入 value 属性中即可。试试这个 JSP。

```
<html>
<body>
<form>
  <input type="text" name="title" id="title" value="${param.title}"/>
  <input type="submit"/>
</form>
</body>
</html> 
```

# objective-c - 应用程序短暂关闭时不调用 UIApplicationWillEnterForegroundNotification

> ID：11462822
> 
> 赞同：1
> 
> 时间：2012-07-13T01:11:44.240
> 
> 标签：objective-c, ios, nsnotificationcenter

当应用程序仅短暂关闭时，似乎不会调用`UIApplicationDidBecomeActiveNotification`和通知。`UIApplicationDidBecomeActiveNotification`

具体来说：当应用程序进入前台时，它应该检查设置应用程序中的任何设置是否已更改。如果您直接进入设置应用程序，更改某些内容并立即返回，则有时不会发送通知。再次关闭并重新打开应用程序后，它们被调用并且一切正常。

有没有更好的方法来持续检测应用程序何时进入前台？还是有什么东西会导致冲突并阻止这些通知被发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:23:15.163

与其试图捕捉每个前景转换，不如通过观察来观察设置的变化，无论它们如何发生`NSUserDefaultsDidChangeNotification`。请参阅[如何在 iOS 4 上获取更新 NSUserDefault？](https://stackoverflow.com/questions/3195232/how-to-get-an-update-nsuserdefault-on-ios-4)

# jakarta-ee - Glassfish 服务器未加载 servlet

> ID：11462823
> 
> 赞同：0
> 
> 时间：2012-07-13T01:11:47.240
> 
> 标签：jakarta-ee, glassfish

```
I am getting a 404 when I navigate to http://localhost:8080/myWebApp/generic
but not when I go to http://localhost:8080/myWebApp/test.jsp 
```

我通过导航到 myWebApp 并键入“jar -cvf myWebApp.war”来创建 war 文件。

我把它放在 glassfish 自动部署文件夹中。**有什么我想念的吗？**

我有一个标准的文件结构

```
--> "myWebApp/"
||--> "WEB_INF/"
||||--> "classes/"
||||||--> "genericServlet.class"
||||--> "lib/" {empty}
||--> "test.jsp" 
```

这是 genericServlet.class

```
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.GenericServlet;
import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebInitParam;
import javax.servlet.annotation.WebServlet;

@WebServlet(name = "GenericServletDemoServlet", 
    urlPatterns = { "/generic" },
    initParams = {
        @WebInitParam(name="admin", value="Harry Taciak"),
        @WebInitParam(name="email", value="admin@example.com")
    }
)
public class GenericServletDemoServlet extends GenericServlet {

    private static final long serialVersionUID = 62500890L;

    @Override
    public void service(ServletRequest request, 
            ServletResponse response)
            throws ServletException, IOException {
        ServletConfig servletConfig = getServletConfig();
        String admin = servletConfig.getInitParameter("admin");
        String email = servletConfig.getInitParameter("email");
        response.setContentType("text/html");
        PrintWriter writer = response.getWriter();
        writer.print("<html><head></head><body>" + 
                "Admin:" + admin + 
                "<br/>Email:" + email +
                "</body></html>");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:50:25.577

看来，您需要在 web.xml 中映射 servlet。就像是：

```
<servlet>
<servlet-name>generic</servlet-name>
<servlet-class>servlet.package.GenericServletDemoServlet</servlet-class></servlet>

<servlet-mapping>
<servlet-name>generic</servlet-name>
<url-pattern>/generic</url-pattern></servlet-mapping> 
```

# cakephp - 如何从 CakePHP Shell 捕获输出

> ID：11462829
> 
> 赞同：3
> 
> 时间：2012-07-13T01:13:00.160
> 
> 标签：cakephp, cakephp-2.0

**有没有办法在 CakePHP 中捕获 shell 的输出？**

我已经编写了一些为 CakePHP 2.x 应用程序生成报告的 shell。我可以在命令行上运行 shell 并查看输出，但是，现在我想通过电子邮件发送这些 shell 的结果。

我考虑过使用另一个 shell 作为包装器，然后使用`$this->dispatchShell('shellname')`它来捕获它的输出，但它似乎`dispatchShell`只是运行 shell 并将它的输出转储到 CLI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:44:15.633

要将 Shell 输出到文件，请在 Shell 的构造函数中声明一个输出流。下面是一个示例，让 stdout 成为 CakePHP`TMP`目录（通常`app/tmp/`）上名为 的文件中的日志文件`shell.out`：

```
<?php
class FooShell extends AppShell {

    public function __construct($stdout = null, $stderr = null, $stdin = null) {
        // This will cause all Shell outputs, eg. from $this->out(), to be written to
        // TMP.'shell.out'
        $stdout = new ConsoleOutput('file://'.TMP.'shell.out');

        // You can do the same for stderr too if you wish
        // $stderr = new ConsoleOutput('file://'.TMP.'shell.err');

        parent::__construct($stdout, $stderr, $stdin);
    }

    public function main() {
        // The following output will not be printed on your console
        // but be written to TMP.'shell.out'
        $this->out('Hello world');
    }
} 
```

# ios - 可以为 adhoc 建立档案，但不能为应用商店建立档案

> ID：11462832
> 
> 赞同：0
> 
> 时间：2012-07-13T01:13:45.283
> 
> 标签：ios, xcode, ios5

我可以为临时破坏建立档案，但是当我选择“提交到 App Store”时，我得到以下弹出窗口。

![在此处输入图像描述](../Images/707b31ab724f4b03b24fc21891920e27.png)

我已经阅读了一堆 SO 问题/答案，但提交应用程序似乎真的很混乱。有没有办法查看正在运行的日志，而不是在这个过程中？还是从这一点开始有一个共同的下一步？

谢谢

**编辑#1**

![在此处输入图像描述](../Images/36e93517801540948e03dd37db6d3e8f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T01:16:58.787

过去，这太可怕了。最近，苹果确实改进了这个过程。首先浏览该通知上的 2 个大按钮，然后按照 Apple 在整个过程中提供的说明进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T01:18:02.920

确保您在 developer.apple.com 上的 Provisioning Portal 中有分发证书。我有同样的问题，原来我只有一个开发者证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:37:24.143

所以问题是*** -info.plist 中的 Bundle Identifier 需要完全（包括大小写）作为配置文件。对于这样的系统，它需要更好的反馈。

# javascript - 键盘导航无法正常工作，代码混乱

> ID：11462834
> 
> 赞同：0
> 
> 时间：2012-07-13T01:13:58.603
> 
> 标签：javascript, jquery, keyboard

我正在使用一个脚本，它使用键盘键 J 和 K 在我的博客上的文章之间滚动。现在的代码非常混乱，并且有一个错误，它目前只能运行一次......我想知道是否有更简单的方法可以使用 J & K 键在帖子之间平滑滚动，因为这个脚本就是这样大，必须有一个更简单的方法。该脚本使用 jQuery 库和 scrollto.js。基本上，我想要一个不同的脚本，当按下 J & K 键时，它可以在帖子之间平滑滚动。

```
 window.viewport = { height: function() { return $(window).height(); }, width: function() { return $(window).width(); }, scrollTop: function() { return $(window).scrollTop(); }, scrollLeft: function() { return $(window).scrollLeft(); } }; $.belowthefold = function(element, settings) { var fold = $(window).height() + $(window).scrollTop(); return fold <= $(element).offset().top - settings.threshold; }; $.abovethetop = function(element, settings) { var top = $(window).scrollTop(); return top >= $(element).offset().top + $(element).height() - settings.threshold; }; $.rightofscreen = function(element, settings) { var fold = $(window).width() + $(window).scrollLeft(); return fold <= $(element).offset().left - settings.threshold; }; $.leftofscreen = function(element, settings) { var left = $(window).scrollLeft(); return left >= $(element).offset().left + $(element).width() - settings.threshold; }; $.inviewport = function(element, settings) { return !$.rightofscreen(element, settings) && !$.leftofscreen(element, settings) && !$.belowthefold(element, settings) && !$.abovethetop(element, settings); }; $.extend($.expr[':'], { "below-the-fold": function(a, i, m) { return $.belowthefold(a, {threshold : 0}); }, "above-the-top": function(a, i, m) { return $.abovethetop(a, {threshold : 0}); }, "left-of-screen": function(a, i, m) { return $.leftofscreen(a, {threshold : 0}); }, "right-of-screen": function(a, i, m) { return $.rightofscreen(a, {threshold : 0}); }, "in-viewport": function(a, i, m) { return $.inviewport(a, {threshold : 0}); } }); 

        $(document).keypress(function( event ) { 
        if(event.which === 106) { 
            var currPost = $('article:in-viewport').eq(0); 
            var target = $(currPost).next('article'); 

            $.scrollTo( $(target), {
                duration: 400, 
                axis: "y", 
                offset: -120
            }); 
        }

        else if(event.which === 107) { 
            var currPost = $('article:in-viewport').eq(0); 
            var target = $(currPost).prev('article'); 

            $.scrollTo( $(target), {
                duration: 400, 
                axis: "y",
                offset: -120
            }); 
        }

    }); 
```

博客我正在使用脚本 - [http://jtestblog1.tumblr.com/](http://jtestblog1.tumblr.com/) 编辑：偏移量 -120 是这样，当它滚动时，它会显示整篇文章，包括 padding-top。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:06:09.537

好吧，对于 Stack Overflow 问题来说，“代码很乱”是不可接受的。当某些事情变得混乱时，这意味着您需要对其进行重构。虽然看起来很琐碎，但正确的提问方式是“我如何重构这段代码以使其更加干燥（不要重复自己）？这是我尝试过的。

此外，在 minifiers 和 gzip 时代，代码长度不应该是您关心的问题 - 它应该是代码的可读性和重用性。

话虽如此，开关是清理按键情况的常用方法。

```
(function(){
  var position = null;
  $(window).keypress(function( e ) {
    var posts = $('article');

    // note, it would probably be more reliable to start `position` at 0
    // and just get rid of this selector, but this works.
    if(position == null){
      position = posts.find(':in-viewport').first().index();
    }

    var keys = {
      k: 106,
      j: 107
    };

    switch (e.which) {
      default:
      case keys['k']:
        position++;
        break;
      case keys['j']:
        position--;
        break;
    }

    // fixes looping.
    if(position == posts.length+1){
      position = 0;
    } else if (position == -1){
      position = posts.length;
    }

    var target = $(posts[position]);
    // Don't try to scroll on something that doesn't match.
    if( target.length > 0 ) {
      $.scrollTo(target, {  // target doesn't need to be wrapped twice, 
        duration: 400,      // it is already a $ object.
        axis: "y",
        offset: -120
      });
    } 
  });
})(); 
```

# python - 3种方法冻结的原因是什么？

> ID：11462836
> 
> 赞同：0
> 
> 时间：2012-07-13T01:14:11.837
> 
> 标签：python, multithreading, wxpython

我在 wxPython 应用程序中有 3 个线程。应用程序在以下三种方法中挂起：

*   [`PIL.Image.open`](http://www.pythonware.com/library/pil/handbook/image.htm)
*   [`ElementTree.write`](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write)
*   [`time.sleep`](http://docs.python.org/library/time.html#time.sleep)

您知道造成这种情况的常见原因是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:28:14.817

我不知道到底发生了什么，但我猜你没有使用 wxPython 的线程安全方法与 GUI 通信。它们是 wx.CallAfter、wx.CallLater 和 wx.PostEvent。不要直接访问 GUI。

如果它们实际上在单独的线程中，那么它们不应该导致 GUI 挂起。我已经在我的博客上的一个线程中完成了 time.sleep() 一个，所以我知道它没有：

[http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)

我们可能需要一个小的、可运行的示例应用程序来解决这个问题：[http ://wiki.wxpython.org/MakingSampleApps](http://wiki.wxpython.org/MakingSampleApps)

# java - 用于 mac 的 Java EE SDK

> ID：11462837
> 
> 赞同：0
> 
> 时间：2012-07-13T01:14:16.740
> 
> 标签：java, sdk, osx-lion

在这上面花了 3 天的时间，没有什么可高兴的。我已经被吓坏了。我是java的新手，只是让它在java ee中滚动......

拜托，这里的好人。我很困惑。我正在寻找适用于 mac os x lion 10.7.2 64 位的 Java EE 6 SDK。

我在 oracle 的网站上找到了适用于 unix 和 windows 的 java ee 6 sdk 而没有 mac...在谷歌和苹果的网站论坛和支持上花费了大量时间，但没有发现任何与此相关的内容。

是不是mac不需要Java EE 6 SDK？或者是什么？我已经安装了 netbeans 和 eclipse，我在 java SE 的早期开始阶段就一直在使用它们。

任何人都可以帮忙吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:22:23.653

Java EE 是一个 API，而不是完整的实现（由部署代码的应用服务器提供）。

因此，您只需要 API 罐子。但是，如果您获得 Netbeans+Glassfish 捆绑包，并让 Netbeans 在创建新模块时选择适当的模板来完成工作，则可以避免这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:18:17.967

Mac是Unix，你试过他们提供的shell脚本吗？

# objective-c - Interface Builder 初始化 UITableViewCell 时调用什么方法？

> ID：11462838
> 
> 赞同：1
> 
> 时间：2012-07-13T01:14:26.800
> 
> 标签：objective-c, cocoa-touch, uitableview

我有一个自定义 UITableViewCell，我需要在它显示在 UITableView 之前初始化一些 ivars。我覆盖了`- (void)init`，但这似乎不是指定的初始化程序。我应该把我的代码放在哪里？

编辑：单元格是使用 Interface Builder 中的 UITableViewCell 原型制作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T01:40:34.653

```
- (id)initWithCoder:(NSCoder *)decoder; 
```

此外，对于听起来您想要做的事情，您可能想要覆盖：

```
-(void)awakeFromNib; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T01:35:49.730

[– initWithStyle:reuseIdentifier:](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableViewCell/initWithStyle%3areuseIdentifier%3a)是 UITableVIewCell 的指定初始化器

# symfony - 多对多 Ajax 表单（Symfony2 表单）

> ID：11462839
> 
> 赞同：3
> 
> 时间：2012-07-13T01:14:27.203
> 
> 标签：symfony

我在 mongodb 中的 Players 和 Tournaments 之间有多对多的关系。

我希望能够一次将许多玩家添加到锦标赛中。这在没有 ajax 的情况下是微不足道的，但是我们有一个包含数千名玩家的数据库，因此表单选择变得很大。

我们想为此使用ajax。是否可以创建一个小部件（使用 js）来正确处理这个问题？如果是这样，关于使用什么 jquery 插件（或其他）的任何提示？

如果不是，那么执行此操作的标准策略是什么？我想我可以大量更改此表单的视图并使用 ajax 自动完成来一次添加一个玩家，然后使用更多代码一次删除每个玩家。但是，我真的很想拥有一个可以重复使用的小部件，因为它非常干净，而且看起来效率更高。

我整天都在玩[Select2](http://ivaynberg.github.com/select2)（类似于 jQuery Chosen），我让它通过 ajax 添加许多播放器，但它不允许我在最初加载页面时设置已经连接的播放器，所以我不会能够看到谁已经参加了比赛，并且必须重新输入每个人。

感谢您对此事的任何意见！我无法通过谷歌找到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T18:15:45.193

我能够通过`$.ajax`在 onload 函数中的构造函数之后完成此操作，其中`//website/jsonItem`是所有项目的 json 编码列表，并且`//website/jsonItemUser`是附加到用户的所有项目的 json 编码列表。我过去常常在通话之间`//`保持`https/http`一致。

```
$(document).ready(function(){
  $('.selectitem').select2({
    minimumInputLength:0
    ,multiple: true
    ,ajax: {
      url: "//website/jsonItem"
      ,dataType: 'jsonp'
      ,data: function (term, page) {
        return {
          q: term, // search term
          limit: 20,
          page: page
        };
      }
      ,results: function (data, page) {
        var more = (page * 20) < data.total;
        return {
          results: data.objects, more: more
        };
      }
    }
    ,initSelection: function(element, callback){
      var items=new Array();
      $.ajax({
        url: "//website/jsonItemUser"
      });
      callback(items);
    }
  });
  $.ajax({
    url: "//website/jsonItemUser"
    ,dataType: 'jsonp'
    ,success: function(items, status, ob) {
      $('.selectitem').select2('data',items);
    }
  });
}); 
```

# ios - AVPlayer seekToTime 不在正确位置播放

> ID：11462843
> 
> 赞同：34
> 
> 时间：2012-07-13T01:14:37.320
> 
> 标签：ios, video-streaming, avplayer

我有一个正在播放 HLS 视频流的 AVPlayer。我的用户界面提供了一排按钮，视频中的每个“章节”都有一个按钮（按钮标记为“1”、“2”、“3”）。该应用程序从服务器下载一些元数据，其中包含以秒为单位的章节切入点列表。例如，一个视频长度为 12 分钟 - 章节切入点列表为 0、58、71、230、530 等。

当用户点击“章节按钮”之一时，按钮处理程序代码执行以下操作：

```
 [self.avPlayer pause];

    [self.avPlayer seekToTime: CMTimeMakeWithSeconds(seekTime, 600) 
              toleranceBefore: kCMTimeZero 
               toleranceAfter: kCMTimeZero 
            completionHandler: ^(BOOL finished) 
            {
                [self.avPlayer play];
            }]; 
```

其中“seekTime”是包含切入点的本地变量（如上所述）。

问题是视频并不总是从正确的点开始。有时确实如此。但有时它在请求的 seekTime 之前的十分之一秒到 2 秒之间。它永远不会在请求的 seekTime 之后开始。

以下是有关视频编码的一些统计信息：

编码器：handbrakeCLI 编解码器：h.264 帧率：24（实际上，23.976 - 与拍摄方式相同） 视频比特率：多个比特率（64/150/300/500/800/1200） 音频比特率：128k 关键帧：23.976（每秒 1 个）

当然，我正在使用 Apple mediafilesegmenter 工具和 variantplaylistcreator 来生成播放列表。

这些文件是从 Amazon Cloud/S3 存储桶提供的。

我仍然不清楚的一个领域是 CMTimeMakeWithSeconds - 我已经根据我阅读的不同文章/文档尝试了几种变体。例如，在上面的摘录中，我使用的是：

CMTimeMakeWithSeconds(seekTime, 600)

我也试过：

CMTimeMakeWithSeconds(seekTime, 1)

我不知道哪个是正确的，尽管两者似乎产生了相同的不一致结果！

我也试过：

CMTimeMakeWithSeconds(seekTime, 23.967)

一些文章声称这就像一个分子/分母，所以 n/1 应该是正确的，其中“n”是秒数（如 CMTimeMakeWithseconds(n, 1)）。但是，该代码最初是由另一个程序员（现在已经离开）创建的，他使用 600 数字作为首选时间刻度（即 CMTimeMakeWithseconds(n, 600)）。

任何人都可以提供任何关于我做错了什么的线索，或者即使我试图达到的那种准确性是可能的？

如果有人想提供“替代”解决方案，我们已经在考虑将视频分成单独的流，每章一个，但我们不相信这会给我们带来相同的性能，因为更改章节需要更长的时间作为一个新的 AVPlayerItem 必须被创建和加载，等等，等等，等等。所以如果你认为这是唯一可行的解​​决方案（我们确实希望这会达到我们想要的结果 - 即每一章都会从我们想要的地方开始）随意这么说。

提前致谢！

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-09-25T17:52:39.880

```
int32_t timeScale = self.player.currentItem.asset.duration.timescale;
CMTime time = CMTimeMakeWithSeconds(77.000000, timeScale);
[self.player seekToTime:time toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero]; 
```

我对“seekToTime”有疑问。我用这段代码解决了我的问题。'timescale' 是解决这个问题的窍门。

斯威夫特版本：

```
let playerTimescale = self.player.currentItem?.asset.duration.timescale ?? 1
let time =  CMTime(seconds: 77.000000, preferredTimescale: playerTimescale)
self.player.seek(to: time, toleranceBefore: kCMTimeZero, toleranceAfter: kCMTimeZero) { (finished) in /* Add your completion code here */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-03T09:07:23.177

我的建议：1）不要使用[avplayer seekToTime:toleranceBefore:toleranceAfter:]，这会延迟你的搜索时间4-5秒。

2) HLS 视频剪辑为每段 10 秒。您的章节起始位置应适合 10 的倍数。由于分段以 I 帧开始，这样您可以获得快速的寻道时间和准确的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T16:52:24.690

请使用类似的功能`[player seekToTime:CMTimeMakeWithSeconds(seekTime,1)]`。
因为您的公差值`kCMTimeZero`将花费更多时间来寻找。您可以使用**kCMTimeIndefinite 代替**使用 kCMTimeZero 的公差值，它等效于我之前指定的函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-29T12:23:31.400

放置此代码可能会解决您的问题。

```
let targetTime = CMTimeMakeWithSeconds(videoLastDuration, 1) // videoLastDuration hold the previous video state.
self.playerController.player?.currentItem?.seekToTime(targetTime, toleranceBefore: kCMTimeZero, toleranceAfter: kCMTimeZero) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-30T10:33:33.770

斯威夫特5

```
let seconds = 45.0
let time = CMTimeMake(value: seconds, timescale: 1)
player?.seek(to: time, toleranceBefore: CMTime.zero, toleranceAfter: CMTime.zero) 
```

# firefox - 同位素在 safari 中工作 - 不是 Firefox 或 Chrome

> ID：11462844
> 
> 赞同：2
> 
> 时间：2012-07-13T01:14:41.770
> 
> 标签：firefox, google-chrome, safari, cross-browser, jquery-isotope

我正在使用 David Desandro 的精彩 Isotope jQuery 插件来显示标题和描述列表，并能够按类别或标题的第一个字母进行排序。它在 Safari 中完美运行，但在 Chrome 和 Firefox 中，当用户尝试排序时，内容会从视图中消失。

我已经从项目中删除了该对象，它的行为仍然相同。我创建了一个 JSFiddle 来演示[http://jsfiddle.net/gojukebox/mH9Sd/上的行为](http://jsfiddle.net/gojukebox/mH9Sd/)

# google-app-engine - 将谷歌文档中的范围复制到另一个工作表

> ID：11462846
> 
> 赞同：0
> 
> 时间：2012-07-13T01:14:54.550
> 
> 标签：google-app-engine, google-apps-script

我有几个用户填写的 Google 表单。效果很好，但有它的局限性。

我想将从活动工作表输入的数据复制到一个名为“工作”的新工作表中，除了第一行之外的所有信息。在第一行中，我有一些数组公式，当在活动工作表上输入新数据时，它们会填充一些单元格。

第二张工作表（工作）有一个标题行，其中包含所有格式、数据验证、一些公式等（第 1 行）。当通过表单添加新记录时，无法应用此信息..所以我被告知..

因此，一旦从活动工作表（称为活动工作表）复制数据，我希望根据“工作”工作表的标题行（第 1 行）对新数据进行格式化，并包含所有格式、验证、公式等应用于新数据。

这是可行的吗？在编写脚本方面，我是菜鸟，因此非常感谢您提供完整的解决方案。

这是一个示例表单，您可以使用 [https://docs.google.com/spreadsheet/ccc?key=0AplugTacg-08dFNRUHROSW82bDhESkxBdjVTV0NOLUE](https://docs.google.com/spreadsheet/ccc?key=0AplugTacg-08dFNRUHROSW82bDhESkxBdjVTV0NOLUE)

我注意到的第一件事不能只是复制/粘贴，因为数组公式会将事情搞砸，所以它必须是特殊的粘贴 - 仅限值

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:24:21.180

我对你所做的事情背后的逻辑有点挣扎，但我已经在[你的电子表格副本中的](https://docs.google.com/spreadsheet/ccc?key=0AiZdNQHjqWKqdFFZbmg4dDZFTlZfWU1UWVREMUZ4ZWc)工作表“work2”中尝试了一个解决方案。也许有一个游戏并报告什么是不正确或缺失的。

脚本是这样的：

```
function onFormSubmit(e) {
  var sheet = SpreadsheetApp.getActive().getSheetByName('work2');
  var nextRow = sheet.getRange(sheet.getLastRow() + 1, 1, 1, 9); 
  sheet.getRange(2, 1, 1, 9).copyTo(nextRow);
  var sLength = e.values[2].length;
  var huuh = e.values[3] * sLength;
  var pending = e.values[3] * e.values[3] / huuh;
  var nextMonth = e.values[3] + pending;
  nextRow.setValues([[e.values[0], e.values[1], huuh, e.values[2], sLength, e.values[3], 'Please select action', pending, nextMonth]]);
} 
```

并附加了一个“表单提交”触发器。

# c# - Linq 和数组。（e=element 吗？）

> ID：11462847
> 
> 赞同：0
> 
> 时间：2012-07-13T01:14:58.257
> 
> 标签：c#, linq

```
from e in employees
where e.MonthlySalary >= 4000M && e.MonthlySalary <= 6000M
select e; 
```

e= element 在这种情况下，还是它说明了一些不同的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T01:20:17.037

`e`只是您设置的别名，指的是查询的结果集。

如果你愿意，你可以命名它`chocolateSprinkles`，关键是它可以让你的生活更轻松。:)

这将产生与原始代码完全相同的结果：

```
// The raddest of the rad dudes.
from radDudes in employees
where radDudes.MonthlySalary >= 4000M && radDudes.MonthlySalary <= 6000M
select radDudes; 
```

C# 开发人员通常在这些 Linq 查询中使用单字母变量，因为它更易于键入和一目了然。由于该变量通常不会在 Linq 查询之外的任何地方使用，因此有时人们只使用一个字母。

我建议*使用*描述性名称。在您的情况下，`e`您可以使用`employee`它，因为它更具可读性。

```
// Which is more readble?
where e.MonthlySalary >= 4000M && e.MonthlySalary <= 6000M

// or:
where employee.MonthlySalary >= 4000M && employee.MonthlySalary <= 6000M 
```

* * *

附带说明一下，您还可以使用此 Linq 语法。这完全是个人喜好：

```
var resultEmployees = employees.Where(e => e.MonthylSalary >= 4000M && e.MonthlySalary <= 6000M); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T01:20:13.043

假设你从某个地方复制了这个，`e`是任意的。如果`employees`是员工列表，则可能有人选择`e`代表单个员工。

作为旁注，您还可以将其重写为：

```
employees.Where(e => e.MonthlySalary >= 4000M && e.MonthlySalary <= 6000M) 
```

...有时更容易阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T01:33:25.517

```
from e in employees ... 
```

基本上是一样的

```
foreach(var e in employees) { ... } 
```

这说明了其他人在说什么：这`e`只是集合中当前元素的变量名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T01:17:09.010

嗯，这`e`可以是你想要的任何东西。您可以调用它`x, y, z`等。它代表您列表中的对象。所以在你的例子`e`中指的是一个`employee`对象。所以你可以说`e.MonthlySalary`或`e.EmployeeName`等等，它会在这些条件下匹配所有员工

# c++ - 使用记忆函数观察到奇怪的性能

> ID：11462848
> 
> 赞同：6
> 
> 时间：2012-07-13T01:15:02.967
> 
> 标签：c++, performance, optimization, c++11

我正在玩弄一些使用欧几里得算法来计算两个数字的 GCD 的东西。我像往常一样实现了标准的单线，它工作得很好。它用于计算序列并在每个元素变大时调用`gcd()`多次的算法。`n`我决定看看我是否可以通过记忆做得更好，所以这是我尝试的：

```
size_t const gcd(size_t const a, size_t const b) {
  return b == 0 ? a : gcd(b, a % b);
}

struct memoized_gcd : private std::unordered_map<unsigned long long, size_t> {
  size_t const operator()(size_t const a, size_t const b) {
    unsigned long long const key = (static_cast<unsigned long long>(a) << 32) | b;
    if (find(key) == end()) (*this)[key] = b == 0 ? a : (*this)(b, a % b);
    return (*this)[key];
  }
};

//std::function<size_t (size_t, size_t)> gcd_impl = gcd<size_t,size_t>;
std::function<size_t (size_t, size_t)> gcd_impl = memoized_gcd(); 
```

`std::function`我稍后通过实例调用选择的函数。有趣的是，例如当 n = 10,000 时，在这台计算机上计算运行时间为 8 秒，而使用记忆的版本接近一分钟，其他一切都相同。

我错过了什么明显的东西吗？我将`key`其用作权宜之计，因此我不需要专门`std::hash`研究哈希图。我唯一能想到的可能是 memoized 版本没有获得 TCO 并且`gcd()`确实获得了，或者通过仿函数调用`std::function`很慢（即使我同时使用它），或者我可能是智障。大师们，给我指路。

**笔记**

我已经在带有 g++ 4.7.0 的 win32 和 win64 以及带有 g++ 4.6.1 和 4.7.1 的 linux x86 上尝试过这个。

我还尝试了一个与`std::map<std::pair<size_t, size_t>, size_t>`未记忆版本具有可比性能的版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T05:23:27.043

您的 GCD 版本的主要问题是它可能会占用大量内存，具体取决于使用模式。

例如，如果您计算所有对 0 <= a < 10,000, 0 <= b < 10,000 的 GCD(a,b)，则记忆表最终将包含 100,000,000 个条目。由于在 x86 上每个条目都是 12 字节，因此哈希表将占用至少 1.2 GB 的内存。使用这么多内存会很慢。

当然，如果您评估 GCD 的值 >=10,000，您可以使表任意大......至少在您用完地址空间或提交限制之前。

**摘要**：一般来说，记忆 GCD 是一个坏主意，因为它会导致无限的内存使用。

有一些更好的观点可以讨论：

*   由于表超过各种大小，它将存储在越来越慢的内存中：首先是 L1 缓存，然后是 L2 缓存，L3 缓存（如果存在），物理内存，磁盘。显然，随着表格的增长，记忆的成本会急剧增加。
*   如果您知道所有输入都在一个很小的范围内（例如，0 <= x < 100），那么使用记忆化或预先计算的表仍然可能是一种优化。很难确定——你必须在你的特定场景中进行测量。
*   可能还有其他优化 GCD 的方法。例如，我不确定 g++ 在这个例子中是否自动识别尾递归。如果没有，您可以通过将递归重写为循环来提高性能。

但正如我所说，您发布的算法表现不佳并不奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T01:22:51.170

这并不奇怪。在现代 CPU 上，内存访问速度非常慢，尤其是当它不在缓存中时。重新计算一个值通常比将其存储在内存中更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T02:07:12.837

频繁的堆分配（创建新条目时）。还有 std::unordered_map 查找开销（虽然它可能是常数时间，但肯定比普通数组偏移慢）。缓存也未命中（访问模式和大小的函数）。

如果要进行“纯”比较，可以尝试将其转换为使用静态的、堆栈分配的普通数组；**这可能是一个使用更多内存的稀疏查找表，但如果**您可以将整个 memoized 数组放入 CPU 缓存中，它将更能代表memoization。

# zend-framework - 如何在zend框架中附加脚本文件

> ID：11462852
> 
> 赞同：2
> 
> 时间：2012-07-13T01:15:34.870
> 
> 标签：zend-framework, zend-layout

我的布局放置在 layout/scripts/layout.phtml 中我已将以下代码放置在 layout.phtml 的 head 部分中

```
<?php
print $this->headScript()->appendFile($this->baseUrl().'/js/jquery-1.7.2.min.js')
                         ->appendFile($this->baseUrl().'/js/simpla.jquery.configuration.js');
?> 
```

现在我想从视图中附加另一个 javascript 文件。为此，我编写了以下代码：

```
 $this->headScript()->appendFile($this->baseUrl().'js/fancybox/jquery.fancybox-1.3.4.pack.js'); 
```

虽然这附加了文件，但它出现在我的 jquery-1.7.2.min.js 之前。我想要的是我想在我的 jquery-1.7.2.min.js 下面添加 jquery.fancybox-1.3.4.pack.js 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:17:46.970

您的视图脚本在布局之前呈现，因此布局中的调用`appendFile()`导致这些脚本（jquery-1.7.2 和 simpla.jquery）被附加在您在视图脚本中附加的脚本之后。

要解决此问题，`prependFile()`请至少在布局中使用主 jQuery 脚本。

您的布局可能如下所示：

```
<?php
print $this->headScript()
           ->appendFile($this->baseUrl().'/js/simpla.jquery.configuration.js')
           ->prependFile($this->baseUrl().'/js/jquery-1.7.2.min.js'); 
```

无需更改视图脚本，就可以了。

请参阅[HeadScript Helper](https://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.headscript) Example #23，其中介绍了脚本的顺序。

要记住他们没有提到的重要一点是，您的视图脚本在布局之前被渲染。

# amazon-web-services - 如何测试 AWS 故障模式？

> ID：11462855
> 
> 赞同：5
> 
> 时间：2012-07-13T01:15:50.360
> 
> 标签：amazon-web-services

我有访问亚马逊网络服务 API 的应用程序。正如最近的中断所表明的那样，服务可能会以多种方式失败。是否有一种简单的方法可以模拟 AWS 故障和错误情况，以便我可以测试我的应用程序并使其更可靠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:45:30.077

[来自 NetFlix 的Chaos Monkey](http://techblog.netflix.com/search/label/chaos%20monkey)可能是合适的

# php - mysql php使用javascript旋转器随机选择

> ID：11462858
> 
> 赞同：0
> 
> 时间：2012-07-13T01:16:00.257
> 
> 标签：php, javascript, mysql

我刚开始学习PHP，一直在尝试建一个网站来学习。[我在这里](http://www.javascriptbank.com/random-text-rotator-script.html/en/)找到了一个在互联网上旋转文本的 javascript 脚本，如下所示：

```
 <script language="JavaScript">

    function rotateEvery(sec)
    {
    var Quotation=new Array()

    // QUOTATIONS
    Quotation[0] = 'First quotation';
    Quotation[1] = 'Second quotation';
    Quotation[2] = 'Third quotation';
    Quotation[3] = 'Fourth quotation';
    Quotation[4] = 'Fifth quotation';
    Quotation[5] = 'Sixth quotation';
    Quotation[6] = 'You can add <b>as many</b> quotations <b>as you like</b>';

    var which = Math.round(Math.random()*(Quotation.length - 1));
    document.getElementById('textrotator').innerHTML = Quotation[which];

    setTimeout('rotateEvery('+sec+')', sec*1000);
    }
</script> 
```

我还有一个名为 events 的数据库表，它包含三个字段（id、when、tag） When 是日期，tag 是事件的描述（例如我家的圣诞派对/万圣节）。

我要做的是选择今天发生的事件并将它们随机放入我的 javascript 旋转器中。

这可能吗？我将如何实施呢？我知道我在解释我的问题方面真的很糟糕，所以如果我遗漏了更多细节，如果你能告诉我，我可以提供帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T01:42:05.607

因此，如果我理解您的意图，您希望从数据库中提取事件并将它们传递到页面上的 JavaScript 以在您的旋转器中使用：

### 在你的 PHP

使用您已经使用的任何 MySQL API 来执行查询。使用旧`mysql_*()`函数如下所示。（*注意：`mysql_*()`实际上不建议使用这些功能，但似乎很可能这就是您当前正在使用的功能。如果我发现其他情况，我会更新......*）

```
// Assuming `when` is a real DATE or DATETIME data type in MySQL...
// compare to CURDATE() to get today's
$result = mysql_query("SELECT tag FROM events WHERE DATE(when)=CURDATE()");
if ($result) {
  // array to hold all the output
  $events = array();
  while ($row = mysql_fetch_assoc($result)) {
    // Add the event to your array
    $events[] = $row['tag'];
  }
  // After building the array, encode it as JSON
  // Later you'll echo this into your JavaScript in place of the array...
  $events = json_encode($events);
} 
```

### 稍后在您的 HTML/JavaScript 输出中

将 JSON 字符串（您的数组）输出到页面上的 JavaScript：

```
function rotateEvery(sec)
{
  // The JSON from PHP output here
  // Would look something like
  // ["Event 1","Event 2","Event 3"]
  var Quotations = <?php echo $events; ?>;

  var which = Math.round(Math.random()*(Quotation.length - 1));
  document.getElementById('textrotator').innerHTML = Quotation[which];

  setTimeout('rotateEvery('+sec+')', sec*1000);
} 
```

# php - 获取元素 ID 并传递给函数

> ID：11462877
> 
> 赞同：0
> 
> 时间：2012-07-13T01:19:01.453
> 
> 标签：php, javascript

我正在使用 javascript 来获取我的元素 id 值。但是在 3 个中，我的一个元素 id 没有解析。它给了我 [object HTMLInputElement] 而其余的元素 id 值可以工作。

示例代码：

```
<?php 
$Name = "Johnnnny";
echo "<input type=\"hidden\" name=\"Name\" id=\"Name\" value=\"$Name\"/>";
?>
 <script>
  var ID= document.getElementById('ID').value; //this works.
  var Name = document.getElementById('Name').value; //give me [object HTMLInputElement]
 </script> 
```

好心提醒。它应该能够获得'Name'.value的ElementID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:34:22.413

你应该把你的`<input>`元素放在一个`<form>`

你似乎把你的身份证弄糊涂了。获取 ElementById 会返回一个 id 属性设置为您提供的值的 DOM 元素。

所以如果我有这样的事情：

```
<form id="theform">
    <input type="hidden" name="Name" id="Name" value="Johnny"/>
</form> 
```

做这样的事情：

```
 document.getElementById('theform') 
```

将返回表格，这：

```
 var iname = document.getElementById('Name') 
```

将返回隐藏的输入。现在您可以像这样访问隐藏输入的属性：`iname.value`[返回值] 或 `iname.name` [返回名称]

此外，正如其他人所说，这不可能是您的所有代码，因为`document.getElementById('ID')`不会返回任何内容（null）并且您会收到错误消息。

# string - strings.Go 中的拆分

> ID：11462879
> 
> 赞同：13
> 
> 时间：2012-07-13T01:19:13.170
> 
> 标签：string, go

文件 names.txt 包含许多名称，格式如下：

```
"KELLEE","JOSLYN","JASON","INGER","INDIRA","GLINDA","GLENNIS" 
```

有谁知道如何拆分字符串，以便它是用逗号分隔的各个名称？

```
KELLEE,JOSLYN,JASON,INGER,INDIRA,GLINDA,GLENNIS 
```

以下代码用逗号分隔并在名称周围留下引号，拆分出来的转义字符是什么`"`。可以在一个拆分语句中完成，拆分`","`并留下逗号分隔吗？

```
package main

import "fmt"
import "io/ioutil"
import "strings"

func main() {
        fData, err := ioutil.ReadFile("names.txt")  // read in the external file
    if err != nil {
        fmt.Println("Err is ", err)     // print any error
    }
    strbuffer := string(fData)  // convert read in file to a string

    arr := strings.Split(strbuffer, ",")

    fmt.Println(arr)

} 
```

顺便说一句，这是 Project Euler 问题 #22 的一部分。[http://projecteuler.net/problem=22](http://projecteuler.net/problem=22)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-13T07:15:38.650

杰里米的回答基本上是正确的，并且完全符合您的要求。但是“names.txt”文件的格式实际上是众所周知的，称为[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)（逗号分隔值）。幸运的是，Go 附带了一个[encoding/csv](http://golang.org/pkg/encoding/csv/)包（它是标准库的一部分），用于轻松解码和编码这些格式。除了您的 + Jeremy 的解决方案之外，如果格式无效，此包还将给出准确的错误消息，支持多行记录并正确取消引用字符串的引用。

基本用法如下所示：

```
package main

import (
    "encoding/csv"
    "fmt"
    "io"
    "os"
)

func main() {
    file, err := os.Open("names.txt")
    if err != nil {
        fmt.Println("Error:", err)
        return
    }
    defer file.Close()
    reader := csv.NewReader(file)
    for {
        record, err := reader.Read()
        if err == io.EOF {
            break
        } else if err != nil {
            fmt.Println("Error:", err)
            return
        }

        fmt.Println(record) // record has the type []string
    }
} 
```

还有一种[ReadAll](http://golang.org/pkg/encoding/csv/#Reader.ReadAll)方法可能会使您的程序更短，假设整个文件都适合内存。

**更新：** dystroy 刚刚指出您的文件无论如何只有一行。CSV 阅读器也适用于此，但以下不太通用的解决方案也应该足够了：

```
for {
    if n, _ := fmt.Fscanf(file, "%q,", &name); n != 1 {
        break
    }
    fmt.Println("name:", name)
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-13T01:41:19.867

拆分不会从子字符串中删除字符。您的拆分很好，您只需要在之后使用 strings.Trim(val, "\"") 处理切片。

```
for i, val := range arr {
  arr[i] = strings.Trim(val, "\"")
} 
```

现在 arr 将删除前导和尾随 "s。

# jquery - jQuery: changing background color without making permanent (currently it disabled my css :hover)

> ID：11462884
> 
> 赞同：3
> 
> 时间：2012-07-13T01:19:47.013
> 
> 标签：jquery, css, background, hover, background-color

I currently have a set of divs (buttons) that all hover various colors using css. When one of this divs is pressed, I used jQuery to make the color permanent and reverted the color of all other divs back to default.

However, it seems that once this is done, the :hover color doesn't work anymore. Am I approaching the jQuery wrong? How can I fix this. Here is an example:

### EDIT

I am posting a jsfiddle to better explain. You will see that when you first scan your mouse across the divs, they hover different colors. And if you click either div 1 or div 2 (the others won't work, didn't bother doing the jQuery code for the fiddle for all of them), the div keeps it's color and any other one reverts to original. HOWEVER, this then disables the :hover pseudo class I have in my CSS. I need help fixing this.

[http://jsfiddle.net/P3Ckk/143/](http://jsfiddle.net/P3Ckk/143/)

What is the best solution to this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T01:58:18.243

### Working Demo: [http://jsfiddle.net/P3Ckk/145/](http://jsfiddle.net/P3Ckk/145/)

I would rather do this way:

**HTML**

```
<div id='mainIconTile1' class="mainIconTile">
</div>

<div id='mainIconTile2' class="mainIconTile">
</div>

<div id='mainIconTile3' class="mainIconTile">
</div>

<div id='mainIconTile4' class="mainIconTile">
</div>

<div id='mainIconTile5' class="mainIconTile">
</div>

<div id='mainIconTile6' class="mainIconTile">
</div>

<div id='mainContentTile1'>
    1
</div>

<div id='mainContentTile2'>
    2
</div>

<div id='mainContentTile3'>
    3
</div>

<div id='mainContentTile4'>
    4
</div>

<div id='mainContentTile5'>
    5
</div>

<div id='mainContentTile6'>
    6
</div> 
```

​<strong>CSS

```
.mainIconTile {
    background:#888888;                
    width:20px;
    height:20px;
    margin:1px;
    float:left;
}

#mainIconTile1:hover, #mainIconTile1.active {
    background:#5aa02c;
}

#mainIconTile2:hover, #mainIconTile2.active {
    background:red;
}

#mainIconTile3:hover, #mainIconTile3.active {
    background:blue;
}

#mainIconTile4:hover, #mainIconTile4.active {
    background:green;
}

#mainIconTile5:hover, #mainIconTile5.active {
    background:pink;
}

#mainIconTile6:hover, #mainIconTile5.active {
    background:brown;
}

#mainContentTile1 {
    background:orange;
    height:50px;
    width:50px;
    float:left;
    clear:left;
    display:none;
}

#mainContentTile2 {
    background:#e8e8e8;
    height:50px;
    width:50px;
    float:left;
    clear:left;

}

#mainContentTile3 {
    background:#e8e8e8;
    height:50px;
    width:50px;
    float:left;
    clear:left;
    display:none;
}

#mainContentTile4 {
    background:#e8e8e8;
    height:50px;
    width:50px;
    float:left;
    clear:left;
    display:none;
}

#mainContentTile5 {
    background:#e8e8e8;
    height:50px;
    width:50px;
    float:left;
    clear:left;
    display:none;
}

#mainContentTile6 {
    background:#e8e8e8;
    height:50px;
    width:50px;
    float:left;
    clear:left;
    display:none;
} 
```

​</p>

**JavaScript**

```
$(document).ready(function(){
    $('div[id*="mainIconTile"]').click(function() {
        var theId = $(this).attr("id");
        $(".mainIconTile").removeClass('active');
        $("#" + theId).addClass('active');
        $('.mainContentTile:visible').hide(0, function(){
            $('#mainContentTile' + theId.substring(12)).show();
        });
    });
}); 
```

## Working Demo: [http://jsfiddle.net/P3Ckk/145/](http://jsfiddle.net/P3Ckk/145/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:04:44.443

I have no idea why this is happening (pretty weird), but when I used:

```
$("div#mainIconTile1").hover(function () {
   $(this).css("background", "#5aa02c");
}, function () {
   $(this).css("background", "#888");
}); 
```

it worked! So you may want to rely on jQuery hover in this case if CSS doesn't work. Of course there is also the solution of adding/removing css classes.

# sql-server - 让 Yii 与 SQL Server 完美配合

> ID：11462893
> 
> 赞同：2
> 
> 时间：2012-07-13T01:20:29.347
> 
> 标签：sql-server, yii

我在我的配置文件中设置了一个数据库连接，如果我打印出 Yii::app() 的内容，我可以找到数据库连接的详细信息，它们是正确的。

然而，当我尝试使用 Gii 模型生成器工具时，它落在了我身上。

```
53    public function init() {
54 echo '<pre>';
55 print_r(Yii::app()->db);
56 echo '</pre>';
57 die();
58 Yii::app()->db = array(
59             'connectionString' => 'sqlsrv:Server=sti-hq2k8; Database=TrulinXLive',
60             'username' => 'jzumbrum',
61             'password' => 'my_super_secret_password',
62         'charset' => 'utf8',
63         'tablePrefix' => 'tbl',
64         );
65         if(Yii::app()->db===null)
66             throw new CHttpException(500,'An active "db" connection is required to run this generator.'); 
```

异常消息：

```
CDbConnection failed to open the DB connection: SQLSTATE[IMSSP]: The given attribute is only supported on the PDOStatement object. 
```

配置设置：

```
'db'=>array(
        'connectionString' => 'sqlsrv:Server=servername; Database=database',
        'username' => 'jzumbrum',
        'password' => 'password',
        'charset' => 'GB2312',
        'tablePrefix' => 'tbl',
    ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T03:21:28.500

据我记得，我认为一旦禁用模拟准备好的语句，我就不再遇到问题了：

```
'db'=>array(
    'connectionString' => 'sqlsrv:Server=servername; Database=database',
    'username' => 'jzumbrum',
    'password' => 'password',
    'charset' => 'GB2312',
    'tablePrefix' => 'tbl',
    'emulatePrepare' =>false
) 
```

其他可能的问题/修复在这里：[http ://www.yiiframework.com/forum/index.php/topic/17998-use-sqlsrv-with-php-53x-and-yii/](http://www.yiiframework.com/forum/index.php/topic/17998-use-sqlsrv-with-php-53x-and-yii/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:26:20.660

显然，问题是我可以连接到本地主机上的 sql 服务器。虽然我对这个服务器的设置方式并不十分熟悉，但我很确定我在另一台机器上，所以他们一定有一些疯狂的隧道或其他设置。

我觉得奇怪的是，当我输入错误的密码时，它告诉我存在连接错误，但是当我指定错误的服务器地址时，它却给了我另一个错误。也许它正在解决，只是有其他东西阻碍了它。

配置更改为：

```
'db'=>array(
    'connectionString' => 'sqlsrv:Server=localhost; Database=database',
    'username' => 'jzumbrum',
    'password' => 'password',
    'charset' => 'GB2312',
    'tablePrefix' => 'tbl',
) 
```

# php - 如何获取自午夜以来经过的秒数

> ID：11462894
> 
> 赞同：22
> 
> 时间：2012-07-13T01:20:42.997
> 
> 标签：php

使用 PHP 如何获取自当天午夜以来经过的秒数？

我现在尝试的只是：

```
$hour=substr(date("h:i:s"),0,2);
$minute=substr(date("h:i:s"),3,2);
echo $hour."\r\n";
echo $minute."\r\n"; 
```

...但它没有返回响应的正确服务器时间，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-13T01:26:46.617

这应该有效。

```
echo time() - strtotime("today"); 
```

不过，这只会显示您的服务器时区。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-12-01T14:06:37.403

我认为最简单的方法是将当前时间（以秒为单位）除以一天中的秒数（60*60*24），然后取余数：

```
(time() % 86400) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-06-02T01:15:41.673

如果您使用日期时间：

```
 $timeDiff = $time->diff(new \DateTime("today")); 
 $timeDiffSec = $timeDiff->h* 3600 + $timeDiff->i*60 + $timeDiff->s; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-04T16:40:52.927

```
echo (date('G') * 3600 + date('i') * 60); 
```

将当前小时乘以每小时的秒数，然后将其与分钟数乘以每分钟的秒数相加。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-06T17:24:21.503

我想你想从一天的开始到一天中的当前小时和秒，这可以这样做，你仍然需要设置你的时区时间来代替“亚洲/卡拉奇”。从用户时区的午夜开始，这将获得正确的时间，而不是服务器的时区时间。

这是工作链接： [http ://codepad.viper-7.com/ykJC2R](http://codepad.viper-7.com/ykJC2R)

```
//Get current time timestamp
$time_now = time();

//Create DateTime class object
$date = new DateTime(); 

//Set timestamp to DateTime object
$date->setTimestamp( $time_now );

//Set timezone so that code don't get server's timezone midnight time
$date->setTimezone(new DateTimeZone('Asia/Karachi'));

//Print current time in user's timezone
echo $date->format('Y-m-d H:i') . "<br />";

//Get time stamp for midnight tonight
$date->modify('today midnight');
$midnight_time = $date->getTimestamp();

//Print midnight time in user's timezone
echo $date->format('Y-m-d H:i') . "<br />"; 

    //Now you will need to subtract midnight time from current time in user's timezone
$seconds_since_midnight = $time_now - $midnight_time;

//Print seconds since midnight in your timezone
echo $seconds_since_midnight; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-06-02T08:49:14.160

最短的解决方案可能是这样的：

```
$time = "12:34:56";
echo strtotime("{$time}UTC", 0); 
```

这样做的原因是`strtotime`使用第二个参数来确定时间字符串的*日期*部分。在这种情况下，我使用的是`0`，这意味着完整的字符串会导致`1970-01-01 12:34:56 UTC`. `strtotime`然后返回 UNIX 时间戳（自 以来经过的秒数`1970-01-01 00:00:00 UTC`）。注意：已`UTC`附加第一个参数以防止将时间解释为本地时间。

### 日期时间（以微秒计）

比已经提到的解决方案更快（3 倍）和更精确的替代`DateTime::diff`方案：

```
$date = new DateTime;
[$h, $m, $s] = explode(':', $date->format('H:i:s.u'));
echo $h * 3600 + $m * 60 + $s; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-13T01:28:02.607

根据您的评论，如果您以字符串形式接收时间并希望计算从该时间开始的秒数：

```
$time = strtotime($_GET['time']); // Do some verification before this step
$midnight = strtotime("00:00"); // Midnight measured in seconds since Unix Epoch
$sinceMidnight = $time - $midnight; // Seconds since midnight 
```

你去吧。读入PHP 的[time()](http://www.php.net/manual/en/function.time.php)函数和[strtotime()](http://www.php.net/manual/en/function.strtotime.php)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-09-25T18:15:55.913

在 Carbon 中，从午夜开始经过的秒数可以这样计算：

`$seconds_since_midnight = $dt->secondsSinceMidnight()`;

尽管自午夜以来没有几分钟，但我想您会这样做：

`$minutes_since_midnight = (int) floor($dt->secondsSinceMidnight()/60);`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-07-13T01:28:47.470

```
echo time() - strtotime('today'); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-11-10T23:10:50.573

我坚持对数字的操作总是比对字符串的操作快的规则。当数字是整数时，操作会更快（因为 CPU 寄存器总是“整数宽”，意味着有 32 位或 64 位，所有其他非浮点类型在执行任何操作之前都转换为整数）。

无论如何，我发现这样的解决方案可以用时区计算到午夜的秒数，包括：

`$tillmidnight = 86400 - (time() - mktime(0, 0, 0));`

你想得到自午夜以来经过的秒数，所以：

`$sincemidnight = time() - mktime(0, 0, 0);`

最好也检查一下您的 php.ini 并在那里设置您的时区（[Date] 部分下的 date.timezone）。如果您无权访问 php.ini，您可以使用 date_default_timezone_set() 在 PHP 代码中设置您的时区；功能。

# google-chrome-extension - Chrome 扩展：单击某些 HTML 元素时向右键菜单添加选项

> ID：11462900
> 
> 赞同：16
> 
> 时间：2012-07-13T01:22:10.677
> 
> 标签：google-chrome-extension, right-click

我想创建一个 Chrome 扩展程序，当用户右键单击某个 HTML 元素（例如具有已知 ID 的 DIV）时，它会向右键单击菜单添加一个选项。

当用户右键单击 Twitter.com 上的推文并且该选项将调用 REST 服务时，我将使用它来添加一个选项。

这是否可以使用常规的 Chrome 扩展程序？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-13T01:58:54.890

是的，这些被称为上下文菜单。您可以在此处找到这些文档：[https ://developer.chrome.com/extensions/contextMenus](https://developer.chrome.com/extensions/contextMenus)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-01-27T18:46:59.597

使用 chrome.contextMenus 添加右键单击的选项

```
chrome.contextMenus.create({
    title: 'test',
    onclick: function(e){
        console.log(e)
    }

}, function(){})
```

# r - r中的集群表示树状图替代

> ID：11462901
> 
> 赞同：7
> 
> 时间：2012-07-13T01:22:18.087
> 
> 标签：r, hierarchical-clustering, dendrogram, phylogeny

我知道树状图很受欢迎。但是，如果有大量的观察和类别，则很难遵循。但是有时我觉得应该有更好的方法来呈现同样的东西。我有一个想法，但不知道如何实现它。

考虑以下树状图。

```
> data(mtcars)
> plot(hclust(dist(mtcars))) 
```

![在此处输入图像描述](../Images/cad6c357f44fdb2b2ebad017d59ee86b.png)

可以像散点图一样绘制它。其中两点之间的距离用线绘制，而单独的簇（假定阈值）是彩色的，圆的大小由某个变量的值决定。

![在此处输入图像描述](../Images/d03f97a5894c0acac30139e17b806c40.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-13T08:22:14.647

您正在描述进行聚类分析的一种相当典型的方式：

*   使用聚类算法（在本例中为层次聚类）
*   确定集群的数量
*   使用某种形式或主成分分析在二维平面中投影数据

编码：

```
hc <- hclust(dist(mtcars))
cluster <- cutree(hc, k=3)
xy <- data.frame(cmdscale(dist(mtcars)), factor(cluster))
names(xy) <- c("x", "y", "cluster")
xy$model <- rownames(xy)

library(ggplot2)
ggplot(xy, aes(x, y)) + geom_point(aes(colour=cluster), size=3) 
```

接下来发生的事情是您请一位熟练的统计学家来帮助解释 x 轴和 y 轴的含义。这通常涉及将数据投影到轴上并提取因子载荷。

剧情：

![在此处输入图像描述](../Images/f64a29055ce9c8f6455982eaf8dbc87a.png)

# wordpress - Wordpress 付费会员：播客“预览”？

> ID：11462904
> 
> 赞同：0
> 
> 时间：2012-07-13T01:22:25.880
> 
> 标签：wordpress

我目前正在从事一个涉及付费会员的个人项目。到目前为止，我一直在使用 Wordpress 和 s2member。该博客的一部分是每周播客，需要付费会员才能完整收听。

我想限制非会员可以收听播客的时间，并且我想在不必创建 2 个版本的播客的情况下完成此操作。是否有 WP 插件，或者我可以使用播客播放器实现的某种 JS 代码来限制非会员的播放？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:18:29.887

即使您找到类似的东西，用户也可以从代码中获得完整版本。JS会停止播放器，他们将无法继续播放，但他们可以使用其他方式获取完整曲目并直接下载。

最好有 2 个版本，这样非会员只能访问被切断的版本。

# java - 将java程序转换为linux上的可执行文件

> ID：11462905
> 
> 赞同：0
> 
> 时间：2012-07-13T01:22:34.140
> 
> 标签：java, linux, executable

我构建了一个由 2 个文件组成的 java 程序。包含 main 的是`SnortMonitor.java`，它用于`Database.java`连接到数据库并运行查询。我将它从我的 windows 机器迁移到它需要的 linux 机器。我能够在两台机器上编译并运行它。

我的最终目标，也就是我的下一步，是找到一种方法将它变成可执行文件，并在这台 linux 机器上**持续**运行。该程序旨在扫描数据库的每条记录并将某些信息发送到另一台机器，我需要它不断运行，以便它不断地将这些信息发送到另一台机器，或者每隔 3-5 秒。

一个脚注：由于某种我不知道的原因，我最终得到了`SnortMonitor.java`, `Database.java`，`SnortMonitor.class`并且`Database.class`一旦我完成了在 linux 上的编译和运行，我不确定这是否会有所不同，我对 linux 还是很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T01:42:05.600

你有两个选择：

1.  创建一个启动脚本，例如 .sh bash 脚本，用于启动您的 Java 应用程序。有关示例，请参阅[Tomcat 启动脚本。](http://www.akadia.com/download/soug/tomcat/html/tomcat_startscript.html)
2.  使用[GCJ](http://gcc.gnu.org/java/docs.html)将其编译为机器代码，但您的应用程序失去了可移植性。

我个人更喜欢第一个选项，但选择适合你的。

# ios - 尝试使用 NSTimer 以 2 秒的间隔执行方法？

> ID：11462906
> 
> 赞同：0
> 
> 时间：2012-07-13T01:22:45.680
> 
> 标签：ios, objective-c, xcode, timer, selector

好的，所以我有几个方法的字符串数组，我想以 2 秒的间隔运行每个方法。我不知道该怎么做，我尝试过使用前向循环，但是像这样：

```
SEL methods;
NSTimer *timerBetweenMethods;
for (int i=0;i<[self.arrayOfStringsOfMethods count];i++{
methods=NSSelectorFromString([self.arrayOfStringsOfMethods objectAtIndex:i]);
timeBetweenMethods=[NSSTimer scheduledTimerWithInterval:2 target:self selector:methods userInfo:nil repeats:NO];
} 
```

所以说我在那个数组中有 10 个方法，我想要发生的是第一个方法运行，然后在第二个之后 2 秒，然后在第三个之后 2 秒，等等......直到第 10 个，总共 20 秒去做这个。然而，实际发生的是 2 秒后所有方法同时运行，我认为这是因为这个前向循环只是快速设置计时器，而不是等到计时器在再次循环之前执行它的方法，我猜有道理，但我怎样才能让我的程序做我想做的事？o，顺便说一句，我今天刚刚了解了 NSTimer，所以我对它很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T01:25:06.177

正如您所注意到的，您正在同时安排它们。将间隔设置为`2*(i+1)`而不是 2。

# ios - 当电池电量不足时，iOS 是否会以降低的性能运行？

> ID：11462912
> 
> 赞同：2
> 
> 时间：2012-07-13T01:23:25.847
> 
> 标签：ios, battery

我的一位 iOS 游戏测试人员报告了这个错误：

> 当 ipod touch 的电池电量不足（低于 20%）时，游戏速度会显着减慢至 FPS 11。设备剩余电量不应影响游戏速度。

在iOS下这是正常的，还是这个问题是由其他原因引起的？如果这是正常的，如何在电池电量不足时获得完整的性能？

礼貌的做法可能是降低游戏中效果或处理的复杂性，但不幸的是我没有那种奢侈。

我想对此进行调试，但我有一个独特的问题：如果设备已插入，我无法耗尽电池电量，如果未插入设备，我将无法使用调试器。

[编辑] 我没电了，应用程序的性能没有受到影响，所以我不确定是什么原因造成的。如果设备过热，性能是否会下降？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T03:07:44.387

由于我无法在同一台设备上重现该问题，因此可能有其他原因使测试仪的设备陷入困境。似乎这里的答案可能是“不”，尽管还不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T03:47:08.687

我不明白为什么会这样。系统不会反映设备的电池电量（至少目前是这样），只有在提醒您电量不足并在角落显示电池时才会真正确认它。电池出现问题的唯一方法是 iPod Touch 的电池开始耗尽——它将无法以最快的速度为处理器供电，尤其是在处于红色时。

您的测试仪使用的是哪一代 iPod Touch？我建议在第 4 代或第 5 代上进行测试，因为 Apple 不再支持任何旧型号。

此外，每一款新的 iPod/iPhone 都配备了新的处理器（A4、A5、A6...），而旧款处理器无法处理许多现代应用程序所需的速度和功率。虽然有点极端，但以 Infinity Blade 为例。在 A5 或更新的芯片上运行应用程序时，它运行得非常好。但是在 A4 芯片上运行时（例如在 iPod Touch 第 4 代中），游戏会滞后，如果占用大量空间，则会崩溃。

作为对编辑的回应，我相信当电池过热时肯定会发生一些事情。与电量不足的情况不同，Apple 会认真对待过热的电池，以降低性能并尝试冷却电池 - 或者至少在我看来是这样。

希望这可以帮助！

# ruby - DCI，角色应该向数据对象添加属性吗？

> ID：11462913
> 
> 赞同：2
> 
> 时间：2012-07-13T01:23:26.073
> 
> 标签：ruby, dci

在跟随[The Right Way to Code DCI in Ruby](http://mikepackdev.com/blog_posts/24-the-right-way-to-code-dci-in-ruby/ "用 Ruby 编写 DCI 的正确方法")之后，我一直在玩 DCI 。我发现我一直希望我的角色为我的数据对象添加属性。

例如，如果我有一个用户对象。

```
class User
  def initialize(name)
    @name = name
  end
end

user = User.new('JonMR') 
```

用户可以扮演顾客的角色。

```
module Customer
  def add_to_cart(item)
    self.cart << item
  end
end

customer = user.extend Customer
customer.add_to_cart 'an item' 
```

为了完成这项工作，我需要添加一个购物车方法。购物车真的属于用户对象吗？感觉角色应该根据需要将购物车添加到数据对象中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T05:04:30.377

一般来说，DCI 数据对象应该只包含数据加上非常基本的域逻辑，如基本验证逻辑。DCI 角色应该是纯粹的行为。将购物车添加到角色中的用户感觉就像违反了那一秒。也许您缺少数据对象类型或角色？记住角色可以使用上下文中的其他角色，所以也许你的角色应该只期望扮演购物车角色的对象成为当前上下文的一部分。

# grails - Grails log4j 配置 - 配置 log4j 时缺少错误方法：记录器

> ID：11462916
> 
> 赞同：1
> 
> 时间：2012-07-13T01:23:37.957
> 
> 标签：grails, configuration, log4j

当我尝试将*logger* {...} 块添加到我的 Grails log4j 配置时，出于什么原因，我收到以下错误：

```
log4j:ERROR Method missing when configuring log4j: logger 
```

谁能看到我的配置可能有什么问题？这是一个 Grails 1.3.3 应用程序（即将升级到 2）。

TIA,

约翰

```
log4j = {
   error 'org.codehaus.groovy.grails.web.servlet',  //  controllers
         'org.codehaus.groovy.grails.web.pages', //  GSP
         'net.sf.ehcache.hibernate'
   debug 'org.hibernate'

   appenders {
       console name:'stdout', layout:pattern(conversionPattern: '[%t] %-5p %c{2} %x - %m%n')
   }

   logger {
      grails="error"
   }

   root {
      info 'stdout'
   }
} 
```

我也事先收到以下错误，不知道是否相关？

```
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/Users/pbwebguy/.ivy2/cache/org.slf4j/slf4j-log4j12/jars/slf4j-log4j12-1.5.8.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/data/dev/src/tdstm-trunk/./plugins/jmesa-0.8/lib/slf4j-log4j12-1.4.3.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T14:13:06.530

你混淆了你的语法——日志配置在 Grails 1.0 和 1.1 之间完全改变了。代替

```
logger {
  grails="error"
} 
```

您只需要

```
error 'grails' 
```

`debug 'org.hibernate'`沿着与你更高的相同模式。

# jpa - openJPA 日期格式

> ID：11462917
> 
> 赞同：0
> 
> 时间：2012-07-13T01:23:42.997
> 
> 标签：jpa, jpa-2.0, openjpa

我从表中创建了实体。这是我的员工实体。

类 Emp{ String id, java.sql.date joinDate }

正如我所见，to_date() 在 JPA 中不适用，如何使用 jpa 以相同的格式 2010-12-25T12:00:00 将加入日期保存到数据库中。

我如何指定这种格式 yyyy-MM-dd'T'HH:mm:ss。

稍后我想搜索以 (yyyy-mm-dd) 2010-12-25 格式加入的 emp，以便我可以从数据库 2010-12-25T12:00:00 2010-12 中获取所有值-25T11:00:00 2010-12-25T10:05:00

@NamedQuery(name="getEmployeeByDate",query="select p from Emp p where p.joinDate =?")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:25:57.410

我们无法将日期值“2010-12-25T12:00:00”直接保存在数据库中。所以我们必须使用 SimpleDateFormat 的 parse 方法将其转换为日期时间。借助 parse 方法可以获取日期时间值。然后您可以将该值存储到类型为时间戳的列中。

对于检索值，获取值作为日期时间，然后使用 java.text 包中的 simpledatformat 类的格式方法格式化值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T06:14:14.520

# 分析

您正在混合存储数据的方式和预览数据的方式。数据库不关心格式，用户关心。

[使用TemporalType](http://www.objectdb.com/java/jpa/entity/types#Date_and_Time_Temporal_Types_)将日期存储在数据库中，有三种形式：日期、时间和时间戳。

[使用DateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html)向用户预览日期：yyyy-MM-dd、yyyy-MM-dd'T'HH:mm:ss 等。

[通过删除 date 的不必要部分，](https://stackoverflow.com/questions/8969943/compare-dates-date-part-only-with-timestamp-in-hibernate/8970260#8970260)按给定日期的任何部分（忽略格式）查询数据库。

# 解决方案

您需要两个日期，一个代表今天的 00:00 和明天的 00:00，这将涵盖一天 24 小时。从两个日期中删除时间并将它们传递给查询：

```
Date fromTimestamp = new Date();
Date toTimestamp = new Date();
Date fromDate = DateHelper.getDateWithoutTime(fromTimestamp);
Date toDate = DateHelper.getDateWithoutTime(
                    DateHelper.getTomorrowDate(toTimestamp));

//DateHelper.java
public static Date getDateWithoutTime(Date date) {
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);
    cal.set(Calendar.HOUR_OF_DAY, 0);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);
    return cal.getTime();
}

public static Date getTomorrowDate(Date date) {
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);
    cal.add(Calendar.DATE, 1);
    return cal.getTime();
} 
```

更新您的查询以使用两个参数：

```
@NamedQuery(name="getEmployeeByDate",
    query="select p from Emp p where p.joinDate >= ? and p.joinDate <= ?") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T11:21:15.690

要将日期直接保存在数据库中 JAVA6 引入了 TimeStamp 类（[java.sql.Timestamp](http://docs.oracle.com/javase/6/docs/api/java/sql/Timestamp.html)）。

首先将您的实体替换为

> 类 Emp{ String id, TimeStamp joinDate }

现在您可以使用 setdate(), setHour()... 方法以您想要的格式设置 joinDate 来指定您的时间，这将被 SQL TIMESTAMP 直接接受。

# jquery - 将多个 jquery 循环与 ipad 的 touchwipe (swipe) 事件一起使用

> ID：11462919
> 
> 赞同：2
> 
> 时间：2012-07-13T01:24:00.450
> 
> 标签：jquery, ipad, mobile, touch, jquery-cycle

我已经将循环插件设置为在一页上多次工作，一切正常。不过，我正在尝试使用 touchwipe 插件添加一个滑动事件，该插件在单个循环轮播上运行良好，但我无法让它在多个轮播上运行。

这是我的 Javsacript，显示了循环代码，以及底部的 Touchwipe 添加：

```
function galleries () {     

    var counter = 1

    $('.gallery .pics').each(function() {
        $(this).parent().attr('id','slideshow_'+counter);
        $(this).before('<ul class="next-prev-nav"><li><a href="#" class="prev-'+counter+'">Previous</a></li><li><a href="#" class="next-'+counter+'">Next</a></li></ul><div style="clear:both;"></a>');
        $(this).after('<ul class="gallery-nav-'+counter+'">');
        $(this).cycle({
            fx: 'scrollHorz',
            speed:  '400', 
            timeout: '4000', 
            pager:  '.gallery-nav-'+counter,
            next: '.next-'+counter,
            prev: '.prev-'+counter,
            pause:   1,
            pauseOnPagerHover: true, 
            startingSlide: 0, // zero-based 

            pagerAnchorBuilder: function(id, slide) { 
                var s = $(slide);
                var imgsource = s.find('img.CycIMG').attr('src');

                // Set this as the source for our image
                return '<li><a href="#"><img src="' + imgsource + '" width="62" alt=""></a></li>';  
            }
        }).cycle('pause');
        $(this).touchwipe({
            wipeLeft: function() {
                $('.pics').cycle('next');       
            },
            wipeRight: function() {
                $(this).cycle('prev');
            }
        });
        counter++;
    });
} 
```

从 $(this).touchwipe 开始的代码行是我无法工作的。我在这里展示了两个不同的例子。“wipeLeft”功能有效，但由于它针对的是通用类（'pics'），因此它会一次滑动所有轮播。“wipeRight”函数是我希望它工作的方式，使用“this”，仅针对循环中的当前循环轮播。我已经尝试为我一开始创建的每个轮播设置单独的 ID，但这似乎不起作用。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T22:19:30.190

尝试在代码中添加上下文选择器：

```
$('.gallery .pics').each(function() {
    var parent = this.parentNode;

    /*...*/

    $(this).touchWipe({
        wipeLeft: function(){
            $('.pics', parent).cycle('next');
        }
    });
}); 
```

这样做是将“上下文”添加到您的选择器。它类似于：`$(parent).find('.pics')`

我实际上正在处理与您完全相同的情况，并且我已经对其进行了测试:)

# jquery - 自定义 Jquery 幻灯片

> ID：11462926
> 
> 赞同：0
> 
> 时间：2012-07-13T01:24:52.620
> 
> 标签：jquery, css

到目前为止，这是我的示例和代码：http: [//jsfiddle.net/6j4cT/3/](http://jsfiddle.net/6j4cT/3/)

代码太多，我在这里粘贴，所以如果大家都参考上面的链接会更容易。

我的问题是，在加载时，jquery 没有在#news-items 的第一个“li”上插入“active”类。

其次，我想将过渡更改为淡入淡出，而不是隐藏/显示过渡。

欢迎所有建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:35:24.593

您可以使用`fadeOut`函数将过渡更改为淡入淡出

```
$(function(){
    $('.slideshow img:gt(0)').hide();
    setInterval(function(){$('.slideshow :first-child').fadeOut(2000).next('img').fadeIn(2000).end().appendTo('.slideshow');}, 4000);
}); 
```

这是[jsfiddle 示例](http://jsfiddle.net/azizasm/5FWMt/)

此代码的功劳应归于[http://davealger.info](http://davealger.info)

# c++ - 从 DirectX BackBuffer 拉伸到窗口时，Windows 使用点采样

> ID：11462928
> 
> 赞同：3
> 
> 时间：2012-07-13T01:25:00.877
> 
> 标签：c++, directx, directx-9

Windows7 使用点过滤从我的 DirectX9 后台缓冲区延伸到窗口客户区。当窗口调整大小时，拉伸的伪影看起来很糟糕。我们可以通过更改后台缓冲区大小来避免这种情况，但这需要调用 IDirect3DDevice9::Reset()。这会导致在调整大小时出现黑屏和小延迟。

有什么方法可以改进 windows 使用的过滤方法吗？或者，有什么方法可以从不同的 DirectX 表面（例如渲染目标）更新窗口？

* * *

我使用非托管 C++ DirectX 代码。假设我有一个 1280 x 720 的后缓冲表面：

```
D3DPRESENT_PARAMETERS  presentParams;
presentParams.BackBufferWidth  = 1280;
presentParams.BackBufferHeight = 720;
gD3D->CreateDevice(
    0, D3DDEVTYPE_HAL, hWnd,               
    D3DCREATE_HARDWARE_VERTEXPROCESSING,
    &presentParams,
    &pD3D9Device); 
```

然而我有一个 1920 x 1080 的窗口：

```
hWnd = CreateWindowExA(NULL, "WindowClass", winName,
                flags, 0, 0, 1920, 1080,
                NULL, NULL, hInstance, NULL); 
```

当我调用 Present() 时，窗口会将我的 DirectX 后台缓冲区拉伸到窗口。然而，他们的伸展似乎没有执行任何过滤。

```
pD3D9Device->Present(NULL, NULL, NULL, NULL); 
```

我可以调整后缓冲区的大小，但这需要调用 Reset() 和[Reset()](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174425%28v=vs.85%29.aspx)会导致视频内存表面丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-11T23:59:02.770

当我尝试在窗口中播放视频时遇到这个问题，并且想要调整窗口大小而不需要重置设备。

我从 mpc-hc 源代码中找到了解决方案：[https ://github.com/mpc-hc/mpc-hc/blob/develop/src/filters/renderer/VideoRenderers/SyncRenderer.cpp](https://github.com/mpc-hc/mpc-hc/blob/develop/src/filters/renderer/VideoRenderers/SyncRenderer.cpp)

1）使后备缓冲区变大（您期望窗口的最大尺寸）-> 我选择了屏幕尺寸

2）仅在一个矩形上绘制，该矩形的大小等于窗口

3) 使用 Device.Present(srcrect, destrect)。srcrect 和 destrect 是同一个矩形并且是窗口大小。

我是 directX 的新手，但这个解决方案对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:22:41.953

如果您发布您所询问的特定操作的一些代码片段会很有帮助，但是如果您使用 GDI（非托管 Win32）StretchBlt 函数，您可以使用 HALFTONE 获得更好的调整大小行为，根据这篇文章：[Is StretchBlt HALFTONE == BILINEAR 用于所有缩放？](https://stackoverflow.com/questions/4250738/is-stretchblt-halftone-bilinear-for-all-scaling)

如果您使用 GDI+ (WinForms/C#)，您可以使用 g.InterpolationMode = InterpolationMode.Bilinear 获得双线性（或更好的）插值（查看 MSDN 了解所有选项）。请注意，GDI+ 通常比 GDI（或 DX）慢

（这篇文章中的一些相关信息：[双线性插值 - DirectX vs. GDI+](https://stackoverflow.com/questions/5275358/bilinear-interpolation-directx-vs-gdi)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:11:26.310

您是否尝试过 IDirect3DDevice9::SetSamplerState？

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb174698(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174698(v=vs.85).aspx)

实际上，我正在寻找类似的问题。我使用 D3D9 纹理来渲染一些图像。在 Vista 上，SetSamplerState 加上线性纹理过滤有助于减少因大量调整窗口大小而导致的伪影。但在 Windows7 上并非如此。我不确定这两个平台的处理方式有何不同。

# php - 如何在从 symfony2 php 中的抽象类扩展的 Doctrine Entity 中使用鉴别器映射

> ID：11462930
> 
> 赞同：0
> 
> 时间：2012-07-13T01:25:16.797
> 
> 标签：php, symfony, doctrine-orm

我有这个结构

```
`UserInterface.php`
 abstract class User implements UserInterfacee in model`
`class student extends user.php`
`class teacher extends user.php` 
```

现在我应该在哪个班级使用这个学说代码

```
/**
 * @Entity
 * @InheritanceType("JOINED")
 * @DiscriminatorColumn(name="discr", type="string")
 * @DiscriminatorMap({"user" = "User", "student" = "Student"})
 */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T02:37:18.650

您应该在父类中使用继承注释。

```
/**
 * @Entity
 * @InheritanceType("JOINED")
 * @DiscriminatorColumn(name="discr", type="string")
 * @DiscriminatorMap({"student" = "Student", "teacher" = "Teacher"})
 */
  class User
 {
 // ...
 }

  /** @Entity */
  class Student extends User
   {
    // ...
  }

  /** @Entity */
  class Teacher extends User
   {
    // ...
  } 
```

# php - Adobe AIR Socket Web 服务器 PHP 支持

> ID：11462932
> 
> 赞同：0
> 
> 时间：2012-07-13T01:26:14.897
> 
> 标签：php, actionscript-3, air

我一直在 Flash CS6 中的 AIR/AS3 中开发 Web 服务器。我想知道是否有可能支持PHP？比如，在 Web 服务器上加载 PHP 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:31:30.253

AIR/AS3 可以通过多种方式利用 PHP 作为后端。最常见的用法是将 PHP 用作 PHP 发送数据的数据泵，Flash 将通过将数据分配给文本字段、控件或将数据转换为输出图表或图形等绘图命令来呈现数据。

要将 PHP 用作数据泵，最好使用 PHP 通过[amfPHP](http://www.silexlabs.org/amfphp/)等软件发送和接收 AMF 。其他人可能会将 PHP 用于 REST、Web 服务甚至 XML Socket。

鉴于您提到 Adob​​e AIR，它具有比 Flash 更好地呈现 html 的能力。您可以创建加载 PHP 网页的 html 控件。这种方法在很多方面都会受到限制，因为 AS3 几乎不能与 PHP 网页执行交互，如果您想在移动平台上部署 AIR 应用程序，这种方法将进一步受到限制。

您的问题相当广泛，所以我希望我的回答可以让您有更具体的想法。

# javascript - 使活动页面链接保持纯色背景

> ID：11462933
> 
> 赞同：0
> 
> 时间：2012-07-13T01:26:25.727
> 
> 标签：javascript, jquery, html, css

我希望页面上的活动链接具有纯色背景。我想我需要 jQuery 来做到这一点。我试过这段代码，但它不起作用..

```
<script type="text/javascript">
$(document).ready(function(){
$("#navigation").each(function(){
    if($(this).attr('href') == document.URL){
        $(this).css("background-Color", "#e9fd99");
    }
});
});
</script> 
```

请参阅我的图片以进行澄清：

![在此处输入图像描述](../Images/813f7e84c07b91bb9ac54d7e8991d337.png)

正如您所看到的 - 根据您在链接上的哪个页面，将有一个保持静态的纯色 BG ..

- - - - - - - - - - - -更新 - - - - - - - - - - - - -

HTML 代码：

```
<div id="navigation">
<div class="sb_pos">
<ul id="red" class="treeview-red">

<li class="open">
    <span class="tree_titles">About</span>
    <ul>

        <li><span><a href="?page=about_getting_started">Getting Started</a></span></li>
        <li><span><a href="?page=about_recruiting_process">Recruiting Process</a></span></li>
        <li><span><a href="?page=about_responsibility">Responsibility</a></span></li>
        <li><span><a href="?page=about_opportunity">Opportunity</a></span></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:55:00.700

如果你愿意，你可以只用 css 来做。给每个页面的正文一个唯一的id，例如about、contact、tags等。然后给每个链接一个唯一的id、aboutlink、contactlink、tagslink等。

然后在你的CSS中，写下样式：

```
body#about a#aboutlink,
body#contact a#contactlink,
body#tags a#tagslink {
    background-color: #e9fd99;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:05:17.407

您的 JavaScript 存在一些问题。首先，jQuery "each" 函数不会遍历选定元素的子元素，它会遍历选定元素的所有实例。有关此函数的一些使用示例，请参见[http://api.jquery.com/each/](http://api.jquery.com/each/)。所以而不是

```
$("#navigation").each(function(){
    ...
}); 
```

如果你想遍历“li”元素，你应该使用

```
 $("#navigation li").each(function(){
    ...
}); 
```

或者一些更具体的选择 li 元素的选择器（它也可以`$(".open li")`基于您提供的 HTML）。请注意，您不能使用 ">" 选择器，因为它指定了直接子代，并且`li`不是`div`.

其次，一旦选择了`li`，就不能引用了，`(this).attr('href')`因为`this`引用的是`li`没有`href`属性的 。您需要使用或`a`选择所选元素下方的元素。`li``$("a", this)``$(this).find("a")`

最后，`document.URL`返回当前文档的整个 URL，http:// 和 all，但您将它与`href`链接的属性进行比较，它只是相对路径`?page=about_getting_started`。即使您正在查看正确的链接，这也永远不会相等。您将希望使用它`window.location.pathname`，因为这将返回当前的相对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T02:34:59.237

这是一个非常简单的解决方案：您可以使用 PHP 从 URL 中获取您希望的值，并将获取的值插入到 jQuery 代码中，例如：

```
$('.#').addClass('active'); 
```

其中“#”是从 URL 中获取的值。例如：

```
<?php

echo '<script type="text/javascript">
$(document).ready(function(){';
if(intval($_GET['page']) > 0) {
    $from_url = intval($_GET['page']);
    } else {
        if(isset($_GET['page'])) {
        $from_url = $_GET['page'];
        } else {
        $from_url = 'index';
        }
    }
echo '
    $(\'' . $from_url . '\').addClass(\'active\');
    });
</script>';

?> 
```

也在[这里](http://eduardomarques.com/snippets/jquery-active-links/)解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T01:29:11.267

我想你是这个意思

```
 $("#navigation").each(function(){ 
```

而不是这个

```
 $("navigation").each(function(){ 
```

如果您按 id 选择，请使用 #navigation ，如果类名是导航，请使用 .navigation

尝试这个

```
 <script type="text/javascript">
         $(document).ready(function(){
             $(".newclass > li").each(function(){
                 if($(this).attr('href') == document.URL){
                    $(this).css("background-Color", "#e9fd99");
                 }
             });
        });
   </script> 
```

添加这个

```
 <ul class="newclass">
    <li><span><a href="?page=about_getting_started">Getting Started</a></span></li>
    <li><span><a href="?page=about_recruiting_process">Recruiting Process</a></span>   </li>
    <li><span><a href="?page=about_responsibility">Responsibility</a></span></li>
    <li><span><a href="?page=about_opportunity">Opportunity</a></span></li> 
```

它必须选择父母的直接孩子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T02:00:12.210

试试这个，取消注释 console.log 并检查 href 是否等于你需要的

```
<script type="text/javascript" charset="utf-8">
    jQuery(document).ready(function($){
        $("#navigation").each(function(){
            //console.log($(this).attr('href'));
            //console.log(window.location.search);
            if($(this).attr('href') == window.location.search){
                $(this).css("background-Color", "#e9fd99");
            }
        });
    });
</script> 
```

# android - 尝试从 URI 启动时“导出的活动不需要许可”

> ID：11462936
> 
> 赞同：37
> 
> 时间：2012-07-13T01:26:51.557
> 
> 标签：android, uri, intentfilter

我正在尝试使用[此 SO 问题](https://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser)作为参考从 URI 启动 Android 应用程序。

我有一个清单文件，其中包含以下声明的活动：

```
<activity android:name=".MainActivity">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <data android:scheme="http" android:host="example.com" />
    </intent-filter>
</activity> 
```

我正在尝试使用[http://example.com](http://example.com)链接启动 MainActivity。我的问题是我收到警告

```
"exported activity does not require permission" 
```

我查看了报告相同警告的其他 SO 问题，并且所有解决方案似乎都不起作用。

如何正确编写活动意图过滤器以避免警告？

谢谢

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-07-17T15:40:28.303

当我**将 SDK 更新到版本 20**时，我遇到了同样的问题。我删除它添加**android:exported**属性：

```
<activity 
  android:name=".MainActivity"
  android:exported="false">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <data android:scheme="http" android:host="example.com" />
    </intent-filter>
</activity> 
```

在清单中的活动声明中。当然，如果活动仅用于应用程序内部使用，您可以指定此项

它修复它的原因可以在[docs](http://developer.android.com/guide/topics/manifest/activity-element.html)上找到：

**android:exported**：默认值取决于 Activity 是否包含 Intent 过滤器。没有任何过滤器意味着该活动只能通过指定其确切的类名来调用。这意味着该活动仅供应用程序内部使用（因为其他人不知道类名）。所以在这种情况下，默认值为“false”。另一方面，**存在至少一个过滤器意味着该活动是供外部使用的，因此默认值为 "true"**。

由于*“导出的接收器不需要许可”*（至少 LINT 消息是明确的），你明白了。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-07-17T14:07:08.490

您是否尝试清理您的项目（Project > Clean ...）？它为我的项目修复了这个警告，也许是你的。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-11-27T21:45:28.663

要消除此警告，您有两种选择：

*   您可以在 Activity 上设置属性`android:exported="false"`以**防止其他应用程序**通过意图调用您的 Activity
*   或者，如果您希望**允许其他应用程序调用您的活动**，则需要添加一个`android:permission`属性，您可以在其中指定应用程序需要具有哪些权限才能调用您的活动。
*   如果您想允许其他应用程序在没有任何特殊许可的情况下调用您的 Activity，那么您必须在 Manifest 中出现警告。

您可以在[Android 文档](http://developer.android.com/guide/topics/manifest/activity-element.html#prmsn)中获得更多信息。

感谢[@furykid](https://stackoverflow.com/a/11601600/414075)提供链接。

# single-sign-on - 为什么 SAML 基于浏览器

> ID：11462938
> 
> 赞同：11
> 
> 时间：2012-07-13T01:26:58.577
> 
> 标签：single-sign-on, saml

我正在研究 SAML 和 SSO，看起来使用 SAML 的应用程序需要是一个 Web 应用程序并依赖于浏览器。

谁能告诉我为什么？

我对 SAML 的有限了解告诉我，SAML 依赖于会话和 cookie，这在桌面应用程序或移动应用程序中不可用。这是唯一的原因吗？你能告诉我更多关于这件事的细节吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T11:38:03.763

好吧，你有一部分是错的。SAML2有不同的[访问配置文件](http://docs.oasis-open.org/security/saml/v2.0/saml-profiles-2.0-os.pdf)。Web 浏览器单点登录可能是使用最广泛的一种。它基于重定向，顾名思义，它需要浏览器。例如，您可以将[ECP](https://wiki.oasis-open.org/security/SAML2EnhancedClientProfile)（增强型客户端或代理）配置文件用于命令行客户端。Shibboleth 贡献站点和 ECP 配置文件页面上提供了不同语言的示例[实现](https://wiki.shibboleth.net/confluence/display/SHIB2/ECP)

查看 OASIS 文档以获取更多详细信息

* * *

编辑1：

我不知道你为什么认为我没有你那么懒惰；）

以下是ECP 配置文件的[简要说明](http://appliedlife.blogspot.com/2007/06/saml-enhanced-client-or-proxy.html)。一般来说，您应该能够从 IdP 获取断言，然后将其提供给 SP，而无需重定向。不幸的是，我还没有太多使用 ECP 配置文件的经验。我只熟悉理论。

# iphone - Xcode 4.x - 使其指向有问题的崩溃行

> ID：11462939
> 
> 赞同：3
> 
> 时间：2012-07-13T01:27:03.993
> 
> 标签：iphone, xcode, cocoa-touch, cocoa, xcode4

每次 Xcode 崩溃时，它都会指向 main.m 上的这一行

```
int retVal = UIApplicationMain(argc, argv, nil, @"AppController"); 
```

我知道与 3.x 相比，Xcode 4 调试很臭，但我如何让它指向发生崩溃的行。

请不要：

1.  告诉我启用 NSZombieEnabled；
2.  告诉我添加一个异常断点来中断 Catch 或 Throw 上的所有异常。
3.  告诉我 Xcode 4.x 在调试方面比 3.x 好。

所有这些东西都没用或几乎没用，Xcode 继续在 main.m 的同一行崩溃......

请救我脱离这一切。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T01:56:18.653

这是一个想法：在整个应用程序中只进行一次尝试/捕获，**从异常**记录堆栈，而不是当前堆栈（即**不是断点+检查**）：

**主文件**

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        @try {
            return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
        }
        @catch (NSException *exception) {
            NSLog(@"%@",[exception callStackSymbols]);
            return 1;
        }
    }
} 
```

我的理解是，我们没有好的方法的原因是崩溃本身直到运行循环的后期才会发生。我认为诸如未捕获的异常之类的事情只是将应用程序置于一种状态，当运行循环迭代时，它*会*在 Apple 代码的某处崩溃。*这类似于如果您曾经在 UI 中崩溃...当您设置*蹩脚的几何图形时它并不总是崩溃，当它尝试*使用*它时它会崩溃。出于这个原因，我们需要从异常对象中获取堆栈，而不是从实际发生崩溃时的当前状态中获取。

我会添加这个只是因为当我认为我没有可用的信息时它让我有几次，但我还不够了解 Xcode（我确信这是常识，我只是很傻）。有时当我*认为*我所拥有的只是可怕的顶级作用域时，我需要做的就是使用左下角的小滑块（在调试会话期间）来查看整个堆栈。由于上述原因，这通常几乎没有用（它在问题的运行循环的另一部分）。

![折叠堆栈](../Images/787685c245455167d963360ac65d1c1c.png) ![扩展堆栈](../Images/4daac59098669982abef8451cb95dbf2.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T01:41:14.747

显然，您已经完成了研究，并且只得出了相同的答案。这是有原因的；不幸的是，它们真的是我们为 Xcode 4.x 所拥有的一切，所以我们不能给你另一个答案。

我所能建议的是，如果您已经完成了所有上述修复，并且您正在使用链接的框架或库，那么这些可能是您没有得到崩溃发生的确切线路的核心原因。链接的库已经编译，无法显示崩溃的确切行，但如果您可以大致确定错误发生的位置以及导致错误的库，您可以从问题的根本原因开始归零并且找到违规行。

# python - 返回网页结果页面

> ID：11462944
> 
> 赞同：1
> 
> 时间：2012-07-13T01:27:30.497
> 
> 标签：python, web, request, urllib2

好的，我已经缩小了使用 python 返回谷歌搜索结果的问题。这不是搜索或使用 API 的问题。这是一个如何用 Python 阅读结果的问题。

现在，请任何人，任何人，向我展示可以像浏览器一样简单地打印网页结果的代码（单词和文本，我什至不在乎它是否具有所有 html 脚本......只要它确实包含来自网页的文本和网址......）

所以，这是我试图将结果页面加载到 python 中的 url：

```
 https://www.google.com/search?tbs=sbi:AMhZZiv5l6a7Y6F6PDOH62elkfPDoGserB70if-j-hUzcB30VB0IOmADts8UKGKr8dRpfXlU3VVMA-TOTbqYHXl4weH3A9fyYrpubR8zXlxSR_1jvfMbrz3nkeHCxTYgoSR34KQmSGYlV6NTXP1ag7QumbRdKqqlWsg6RwZh-v0ogPxPqEn3a_1dWgX_1SisyEKKRAD6K-Zge6NA-i54t0-sNR0lINQ96d_1YfN9aw7KQlZp2bzcw97h8Ckb1XR0-t9B_1WbdTv1A1WDWttcfUMGI3Y5zIgwHoQPpNM6x9zbhgemlabzqbMJzGUezF3KT1KG6AWCRdnlaMWbMb_1m_1T-A_1EHnqDm0Wt3wILSIAHdi_1sfMjSyDN2wNjeFxJ3LsGAZN-sx24MIlOz7nT4wOmXtEeECRIBvuSS4iH7SbeC5gf3Iac41He1k7w_1NTt1_1-R8TsdryCxs0Pysu2DA7WuBMLqHcrovkgoCZLGdXbuWx_1nY4nu39VqBiBIpQOPMfPkTknT_1M0nVgO_1ppmSgikY3fKbIByzz8FOJgUBb0Nu2p_1Zoo-XRprDgOb-UVubVk-CsGwN2dF_1I81J6vFOUI_14bS5nYjZaEHx6-Lxxij84Za-fL5G4XCnZc-0LPyzAmbvckao55OXqMUBgZbx9e7VRg2jLYaxrzFYtiIUqjG9-IqXoi4ZhWTxZuk_1sUkXFO3NNdeuQ_1Ise9lisoBCLyfpBz1Qnh1dvP_1zb0Cor2Vbp9gTr9VjuOxTHjglWJSntw4OLt6jCfdZOve-iuEdh9V5fSPk41WidEfkWTxMo1dfbPxShrGFGF1oEdd6soYCJnp6YjnXYEYGOEMUgdBUXdB1bFbmBop5WUUizhfgiOyTmGMPEyv7FH3MeiQCTf2pab6v1OdE7lRcKbHqQ3_1jcWi0IUTlk3UGnNSdWjS80h_1N4ljbWJ7CTT7RtJKDoL73rk0bKNgtGz5WeChnZ11AOQJEgV6hb9eyw56qIY37nNom3ehQhTuz5bvWtg1tKjySP1ezRU7TS_1ijJWK6m9ke9LkRXqbUVxZaCy0L6nAzIYh0ODOaZBexsCeLXV4N8iCxetcjmpBU7TvsoD319lRUcU-dfPEn4UfEAQTcP7x3WLHa1k5EOAXsYcXyWxk7N5GqcuPYmrYWvh_1V1hXjlcKCArh699NyyPCfaNpYlyS0IHRCz8VmVSXi07MxH9apW_1bFDK-h-zcy0_1qfH6uJoo_1BXp_1C0C8EM11UvczLZyKgX4LeFA7X0jJ57n6rr4Zysd2kEhrhJp6hJDSmkLcsF5UOsJ2i4MotSxrUB-tc5s9teV13Xr2-3f7wTbEqylWnYgwil1bA_10HKWMclDvhWJqsGQRFLu9_1lB-7gIwV0kS8xEfA 
```

这是通过 www.hidemyass.com（代理网络搜索器）搜索的网页：

```
 http://5.hidemyass.com/ip-1/encoded/Oi8vd3d3Lmdvb2dsZS5jb20vc2VhcmNoP3Ricz1zYmk6QU1oWlppdGw5UzlLXzF1LUFVdGFlUjNxQ3lpbE5TV2VIdVBzWVJhZkRvbS1UaGYyTi1jcmM0bm40T1N3V3R2ZzEtR3owOFZpMnZhbG52NklfMWFDNmQxRWNVZE1pSVZHN3N5TnlzOEttOElmY0NDVmpyOUtueVNPSmpFY015cG1Fckc4OU1DSHdTY0t5eUloNGNEQUpLbkl6a3ZVOWFvZEU0RXdlcTBNdW9mTWZSWU9uTl8xLWloUzBDRkN3QmREOHo4WjBxeFdudWhheXYya21uMU5OdDJEVzJ4Sno5OF8xNzl2QzlaNFFIZ2JveDZFMm9lZHVzSWhiZll5M2JDMGhvdlFsb3laTlhLWkpQLUZ5MkEyMkRtOWVEWnJkM2FQaV8xTi0zRjdVcTFYSnh4Rks5NV8xb1BPanlZNlFWRW1za043M1VFS3dlV0lJU2RfMW1qcERzS1lSQmQ2aC1uRjRFLXJEV2J2Q1Q3NTJGVlBMamFhZDdoZ1BadkdtRTlwbnRDaHk2LWhGQXhqVnUxQlhBQ1ZNUGFYbjRUODJsUDA0ZUV6OEJ1S2k5QktLck41bTZwelRBR3U4TzRRYkU4NDU1VVplbG0xb1ZTYW9LcUgzZ1lOUkhscEpwMEJzT0lBMlgzLTAzbFBwajUxUjR4M3JERDdaNWFpWG5QZUUtUVJiM1ZwZnlaV3JQYW82WDBzVTQ4LTdtWjRNUmgzVXhKVmQ5TDZwQU0tb3RFS0RHRHVVVUcwNVlnc2wyc3ZCd2xPMUZXRm1oWE9hbXBaTXVqaGoyQnl3YUFNcld4cmF0NmtHTHpxRDl4Wmh2cHBRaS1SNHFnYWxTaTJLZ18xLWVwZngydVBqbktMd1FaVktSakM4XzEyajk2MGtqM0F5ZUc0WE1YUU5xb3RvSHczdVpZOFpLaVAyVGxXMkU4UmNGZW9JUU5HWVVVOWk2UVpsTkhvQlFnTWNqNVZucHNFTVpRNE5VSEw3dUtud3JReVNRZV8xZ21nZU01VS1SXzFfMXROSUdhYlo5dHZUdzI5cWZBMnk0VHUyMnZNRVp4WDFDRTNBWVVuM3NkaVlyandLSkFUZ2Q1WlpDM2JjOHdiVk9YSmJXTXM3WFBNUV8xblVqS20xYW1tSVhHY2RYS1lETnQ5d2tHTjBhQ3hjdjBjV25jVE1qbEdBRndlanRfMUVlXzFZNWZub0xReEViSW51Q0tudy1QR1R1ZUZFWlljRmJRQkxUTDlTYnlZR096ZS1IcHVBUndqdEtBTC0wcWVBczVkMG00ZVo5N0ktemFjbGxraWxmUjRTdW5YZktZR210SDAxWXZRbW95dlBTN1NxVHE1dGZqc08tNmZwcjBSOHBvUmI1SDFMeVVjVF8xOGFOV2hoR29kMkpfMVVIbjRzd3VDY28teTROQl8xUU5uT1VsZEhEOE9CVm5LZGl5NjFsZnVhcEVKcHBCV18xcjBYYTJ2cVB0c2dVYUV6dWVQemJQd09hQlgxeHlwVmZiUXh2eDFRdDlKS1M1UVVCRjQzT3VCZWwtb3hieEVyUVVxdW12UWxMbTRIdEJrVGlXdjJZZHBFQjNkSm1TamdIQzdQUkh0aWY2Z0FCS3hrQlJZaFJhejQ5NkZzd1VoS2s5Qm1FR01YQ1djUk9nQ2kySm94b0tVSW5YNnNtb1hvVTVOWXhHeDZ2YWZNbURDemZfMWlXd3p2XzFTUlQwN1hXUnNTWWZZNU9ROUFSbDNzbUpQUFpybVNvb2ZkRWRnTXBMc3pUTS1aYWdlQVotaS1SUDViNHZQWHk0NlhjU1dvdl8xNFFYSTd2c3hVMmJPOVBGUzVfMWZpUklrNThBbFNMZG9uSTB1R2JqQjZaa2tRJmFtcDt1c2VyLWFnZW50PU1vemlsbGEvNS4wJTIwKFdpbmRvd3MlMjBOVCUyMDUuMTslMjBydjo2LjAuMiklMjBHZWNrby8yMDEwMDEwMSUyMEZpcmVmb3gvNi4wLjImYW1wO2Nvbm5lY3Rpb249a2VlcC1hbGl2ZQ%3D%3D&f=norefer 
```

所以很明显python可以返回这个页面的搜索结果，我就是想不通。

现在，我是新人，所以我正在学习，但到目前为止，我得到的唯一回应是我应该使用 google API，或者我应该使用非 python 方法（包括 spynner 或 selenium，它们不是标准的python库..）这里肯定有人知道如何做到这一点。

这是我尝试过的代码：

```
 import urllib2

    req=urllib2.Request(link)
    response=urllib2.urlopen(req)
    page=response.read()
    print(page)

    #or thru hidemyass.com:

    req=urllib2.Request('http://hidemyass.com/',link)
    response=urllib2.urlopen(req)
    page=response.read()
    print(page)

    # BeautifulSoup :

    from BeautifulSoup import BeautifulSoup

    soup=BeautifulSoup(page)
    print(soup) 
```

它都不起作用:(我没有得到结果页面，我没有得到“此图像的最佳猜测”文本..我一团糟:(

# iis-7 - 在我的 IIS 配置中，Firefox 无法在本地主机上建立与服务器的连接

> ID：11462948
> 
> 赞同：2
> 
> 时间：2012-07-13T01:27:56.473
> 
> 标签：iis-7

我收到了过去两天的消息.......当我的**WIN 7中的****[http://localhost](http://localhost)**和**127.0.0.1**也显示相同.... **C:\Windows\System32\drivers\etc\主机**也是正确的格式.....

 *******前两天它运行良好......IIS 7，但现在不工作......*

但我收到消息....

**Firefox 无法在 localhost 建立与服务器的连接**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:30:31.793

检查 IIS 的端口是否已更改。如果没有，请检查您的防火墙，它可能会阻止与服务器的连接。

如果您使用 http://localhost 进行连接，请确保 IIS 正在端口 80 上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-02T07:10:47.117

就我而言，我只是重新启动了笔记本电脑，然后问题就自行解决了。******

# jquery - jShowOff - 数字链接显示“未定义”（在 wordpress 中）

> ID：11462951
> 
> 赞同：0
> 
> 时间：2012-07-13T01:28:04.083
> 
> 标签：jquery, wordpress, jquery-plugins

我搜索和搜索，我发现与这种情况相关的唯一一件事是 jQuery 低于 1.6，我相信 wordpress 远远高于这个事实......我在 Wordpress 网站上构建了一个 jShowOff 内容旋转器，我想有数字幻灯片链接，因为我认为默认情况下它会显示，而是在每个链接中显示“未定义”....将鼠标悬停在内容旋转器上，它会弹出计数器，因为标题 xD 看起来很丑……有什么想法吗？这是代码：

```
<div id="recentes">
                <?php $my_query = new WP_Query('category_name=oficiais&posts_per_page=7');
                    while ($my_query->have_posts()) : $my_query->the_post();
                    $do_not_duplicate[] = $post->ID; ?>
                    <div><p>
                    <?php the_post_thumbnail('recent-thumbnail',array('title' => "")); ?>
                    <span class="recentes_tit"><?php the_title(); ?></span><br /><p><?php $myExcerpt = get_the_excerpt();
                    $tags = array("<p>", "</p>");
                    $myExcerpt = str_replace($tags, "", $myExcerpt);
                    $myExcerpt = str_replace("<br />", " ", $myExcerpt);
                    echo $myExcerpt;
                    ?></p class="content_readmore"><a href="<?php the_permalink(); ?>">Ver artigo</a></p></div>
                <?php endwhile; ?>
                </div>
                <script type="text/javascript">
                    jQuery(document).ready(function(){ jQuery("#recentes").jshowoff({
                        autoPlay:true,
                        changeSpeed:1500,
                        controls:true,
                        effect:"slideLeft",
                        hoverPause:true,
                        speed:4500,
                    }); });
                </script> 
```

仅供参考，假设我调用了 jShowOff css 和脚本 x) 提前谢谢你 =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:53:46.367

我今天碰巧遇到了同样的问题。谷歌搜索并获得此链接：[https ://github.com/ekallevig/jShowOff/issues/38](https://github.com/ekallevig/jShowOff/issues/38)

说：

将 jquery.jshowoff.js 的第 231 行从：

```
var linktext = $(this).attr('title') != '' ? $(this).attr('title') : i+1; 
```

到：

```
var linktext = $(this).prop('title') != '' ? $(this).prop('title') : i+1; 
```

就我而言，这行得通。

# html - 如何在另一个调整大小内制作图形？

> ID：11462952
> 
> 赞同：0
> 
> 时间：2012-07-13T01:28:09.613
> 
> 标签：html, css, fluid-layout

我在流体拼图图像中放置了一个黑色矩形。当有足够的屏幕空间时，它会完美地显示在我想要的位置。然而，当我缩小窗口时，它后面的拼图图像会按预期调整大小，而内部的矩形则不会。如何相对于外部图像定位矩形，并在外部图像时调整内部图像的大小？

当屏幕足够宽时，这是有效的：

```
<body>
    <div>
    <img height="100%" width="100%" src="http://db.tt/hziXuB1a"/>
    <div style="position:absolute; left:58%; bottom:48%;">
        <a href="a.html"><img src="http://db.tt/27WmDZlc"></a>
    </div>
</body> 
```

[http://jsfiddle.net/R7t6C/27/](http://jsfiddle.net/R7t6C/27/)

为内部图像添加宽度和高度是不够的，对于外部 800x400 图像也是如此。问题是我不使用 position:relative （就像我对外部一样）。这是我知道的将位置指定为外部图像百分比的唯一方法（[相对于第一个位置不是 static 的父元素](http://www.w3schools.com/Css/css_positioning.asp)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:33:09.493

添加`width: 100%`和`height: 100%`到您的内部图像至少会调整它的大小。

```
<img style="width: 100%; height: 100%" src="http://db.tt/27WmDZlc"> 
```

它在调整大小时也在移动，但我不确定它与父级的关系应该在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:29:52.060

HTML：

```
<div id="wrapper">
  <img id="puzzle" src="http://db.tt/hziXuB1a"/>
  <a id="link" href="a.html"><img src="http://db.tt/27WmDZlc"></a>
</div> 
```

CSS：

```
div#wrapper{
    position: relative;
}
img#puzzle{
    width:100%;
}
a#link{
    display:block;
    position:absolute;
    left:58%;
    top:23%;
    right: 10%;
}
a#link img{
    width:100%;
} 
```

演示：http:
[//jsfiddle.net/R7t6C/55/](http://jsfiddle.net/R7t6C/55/)

注意：
`<style type="text/css"></style>`在 jsfiddle 的 css-section 中不需要

# objective-c - Objective C - 非常慢的代码

> ID：11462969
> 
> 赞同：2
> 
> 时间：2012-07-13T01:29:32.870
> 
> 标签：objective-c, scripting-bridge

我正在使用**ScriptingBridge.framework**与**Mail.app**交互。以下代码大约需要 30 秒来加载 100 条消息。我在配备 4GB (1333 MHz DDR3) 内存的 2.8GHz Core i7 MacBook Pro 上运行它。我的操作系统是 10.7.4。

```
MailApplication *mailApp = [SBApplication applicationWithBundleIdentifier:@"com.apple.mail"];
MailMailbox *inbox = [mailApp inbox];
SBElementArray *messages = [inbox messages];

NSMutableArray *tmp = [NSMutableArray arrayWithCapacity:[messages count]];
for (MailMessage *message in messages) {
   RRMailItem *mailitem = [RRMailItem new];
   [mailitem setSender:[message sender]];
   [mailitem setSubject:[message subject]];
   [mailitem setDate:[message dateSent]];

   if (message.mailAttachments.count > 0) {
      [mailitem setHasAttachment:YES];
   }

   [tmp addObject:mailitem];
} 
```

RRMailItem 是一个简单的对象，如下所示。它只是一个保存值的对象。它没有任何方法：

```
@interface RRMailItem : NSObject

@property NSString *sender;
@property NSString *subject;
@property NSDate *date;
@property BOOL hasAttachment;

@end 
```

如果我删除`if (message.mailAttachments.count > 0)`，执行时间会减少 50%，到 15 秒来加载相同的 100 条消息。好多了，但仍然很高。我需要IF...

如何提高代码性能？欢迎任何提示和提示。

TIA,

鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:55:22.327

这个链接谈到了它：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/ImproveScriptingBridgePerf/ImproveScriptingBridgePerf.html%23//apple_ref/doc/uid/TP40006104-CH6-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/ImproveScriptingBridgePerf/ImproveScriptingBridgePerf.html%23//apple_ref/doc/uid/TP40006104-CH6-SW1)

# sql - 优化 sql 查询以统计不同表中具有来自同一用户的评论的产品

> ID：11462971
> 
> 赞同：2
> 
> 时间：2012-07-13T01:29:40.610
> 
> 标签：sql, postgresql, postgresql-9.1

我有 3 个表，每个表都有给定类型产品的评论，即 reviewshirts、reviewcoats、reviewpants 所有表都包含用户 ID 和项目 ID 的列。给定一个表中的 itemid，查询其他表中的产品组合的优化方法是什么，这些组合由使用该 itemid 审阅项目的用户审阅，按该组合出现的次数分组。

例如：给定 reviewshirts 表中的 itemid 'S11111'：

表评论衬衫：

```
------------------------------
| reviewid | itemid | userid |
------------------------------
|   ???    | S11111 | U1234  |     <---matches
------------------------------
|   ???    | S11111 | U4321  |     <---matches
------------------------------
|   ???    | S99999 | U5555  |      (only want userids that reviewed S11111)
------------------------------ 
```

表 reviewpants：（查找这些用户评论过的所有项目）

```
------------------------------
| reviewid | itemid | userid |
------------------------------
|   ???    | P11111 | U1234  |     <---matches
------------------------------
|   ???    | P11111 | U4321  |     <---matches
------------------------------
|   ???    | P11111 | U5555  |
------------------------------
|   ???    | P66666 | U4321  |     <---matches
------------------------------ 
```

表评论外套：

```
------------------------------
| reviewid | itemid | userid |
------------------------------
|   ???    | C11123 | U1234  |    <---matches
------------------------------
|   ???    | C00024 | U1234  |    <---matches
------------------------------
|   ???    | C00024 | U4321  |    <---matches
------------------------------ 
```

返回结果：

```
---------------------------
| pantid | coatid | count |
---------------------------
| P11111 | C11123 | 1     |
---------------------------
| P11111 | C00024 | 2     |
---------------------------
| P66666 | C00024 | 1     |
--------------------------- 
```

（根据评论过 S11111 的用户的 pantids 和 coatids 的不同组合数量对结果进行分组）

感谢您的任何帮助，您可以提供！

所要求的上下文：这是基于先前评论的幼稚推荐引擎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:46:29.740

我认为您正在其他两个表中寻找成对的产品。如果是这样，以下查询似乎是您要查找的内容：

```
select rp.pantid, rc.coatid, count(*) as cnt_pairs,
       count(distinct rs.userid) as cnt_users
from ReviewShirts rs join
     ReviewPants rp
     on rs.userid = rp.userid join
     ReviewCoats rc
     on rs.userid = rc.userid
where rs.itemid = <whatever>
group by rp.pantid, rc.coatid 
```

最后一列cnt_users 是您想要的值。

这似乎是一个不寻常的问题。您可以编辑问题以说明如何使用它吗？

# php - PHP CI - 将变量从 MY_controller 传递给方法

> ID：11462972
> 
> 赞同：1
> 
> 时间：2012-07-13T01:29:48.793
> 
> 标签：php, codeigniter

我试图在 $data 变量中声明 MY_Controller 中的 title 变量，以便在加载页面时使用它，所以我这样做：

```
function __construct()
    {
     parent::__construct();

    $this->data['siteNamePrefix'] = "Mysite.com - ";

     } 
```

所以当我用普通控制器的方法加载我的页面时，

```
class Home extends MY_Controller {

function __construct()
{
    parent::__construct();
}

public function index()
{
    var_dump($data);
    $this->load->view('home',$this->data);
} 
```

我在 var_dump 中没有看到我在 MY_controller 中声明的变量 siteNamePrefix

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:32:09.097

假设`__construct()`您帖子顶部的 是`MY_Controller::__construct()`，您已正确扩展它。

在对象实例中，您只需要`$this`在转储以及它后面的`load()`方法中使用：

```
public function index()
{
    // $this->data should be defined here and correctly initialized
    var_dump($this->data);
    $this->load->view('home',$this->data);
} 
```

# java - Java中的数组声明错误

> ID：11462973
> 
> 赞同：3
> 
> 时间：2012-07-13T01:29:59.997
> 
> 标签：java

为什么

```
int arr[][]=new int[5][]; 
```

声明很好，但是

```
int arr[][]=new int[][5] 
```

生成编译时错误？
请帮帮我。我无法理解为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T01:33:09.993

`int arr[][]`（通常写为`int[][] arr`）是一个数组，其中的每个元素又是对数组的引用。

`new int[][5]`将意味着“创建一个长度未知的数组，其中每个元素都是对数组的引用，每个长度为 5”。显然，这没有意义。

另一方面，`new int[5][]`表示“创建一个长度为 5 的数组，其中每个元素都是对数组的空引用”。

# jquery - 标签 onclick 跳转到顶部

> ID：11462974
> 
> 赞同：1
> 
> 时间：2012-07-13T01:30:07.873
> 
> 标签：jquery, twitter-bootstrap

使用引导程序，我在这里设置了一个示例：http: [//fixitup.com.au/clients/bootstrap/issue.html](http://fixitup.com.au/clients/bootstrap/issue.html)

使用滚动到主站点，以及 twitter 引导程序、选项卡。我发现当您单击选项卡时，页面会跳起来。

我添加`onclick="return false;"`到标签的href。

喜欢：

```
<ul id="myTab" class="nav nav-tabs">
<li class="active"><a href="#about" data-toggle="tab" onclick="return false;">About Me</a></li>
<li><a href="#ripoffs" data-toggle="tab" onclick="return false;">My Ripoffs</a></li>
</ul> 
```

我需要滚动，我需要标签......但我需要停止页面跳转，它让我发疯。有什么建议么 ？

补充：滚动的js在下面的aruo.js代码中：

```
// Any links with hash tags in them (can't do ^= because of fully qualified URL potential)
    $('a[href*=#]').each(function() {

        // Ensure it's a same-page link
        var thisPath = filterPath(this.pathname) || locationPath;
        if (  locationPath == thisPath
            && (location.hostname == this.hostname || !this.hostname)
            && this.hash.replace(/#/,'') ) {

                // Ensure target exists
                var $target = $(this.hash), target = this.hash;
                if ($(target).length > 0) {

                    // Find location of target
                    var targetOffset = $target.offset().top;
                    $(this).click(function(event) {

                        // Prevent jump-down
                        event.preventDefault();

                        // Animate to target
                        $(scrollElem).animate({scrollTop: targetOffset}, 1100, 'swing', function() {

                            // Set hash in URL after animation successful
                            location.hash = target;

                        });
                    });
                }
        }

    });

    // Use the first element that is "scrollable"  (cross-browser fix?)
    function scrollableElement(els) {
        for (var i = 0, argLength = arguments.length; i <argLength; i++) {
            var el = arguments[i],
            $scrollElement = $(el);
            if ($scrollElement.scrollTop()> 0) {
                return el;
            } else {
                $scrollElement.scrollTop(1);
                var isScrollable = $scrollElement.scrollTop()> 0;
                $scrollElement.scrollTop(0);
                if (isScrollable) {
                    return el;
                }
            }
        }
        return [];
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:09:01.490

您不能只修改您的选择器以使滚动功能不应用于选项卡吗？

取决于可用的 attr、类等。

在这个例子中，我使用 :not 选择器来排除“foo”类的元素

[http://jsfiddle.net/vfJWk/1/](http://jsfiddle.net/vfJWk/1/)

对于您的示例，将选择器更改为：

$('a[href*=#]:not([data-toggle="tab"])').each(function() {

可能有用吗？

# ios - 在 iOS 6 上制作时，如何让我的应用程序在 5.1.1 上运行

> ID：11462977
> 
> 赞同：0
> 
> 时间：2012-07-13T01:31:00.610
> 
> 标签：ios

当我在 5.1 上构建我的 iPhone 应用程序时，我得到了这个，当时它是为 iOS 6 制作的

2012-07-12 21:30:35.959 TechnoGadget[2836:f803] 如果要使用主情节提要文件，应用程序委托必须实现窗口属性。

有谁知道如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:11:04.840

LLVM 4.0 功能包括不需要 @synthesize 属性（它会自动为您执行此操作）。iOS6 的新包含文件可能遵循该约定。在接近完成之前，不要尝试将构建与 beta iOS 版本混合。现在有 3 种不同的 Xcode 版本，每种版本都有不同的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T02:46:03.423

borrrden & ahwulf 是目标。我添加了

```
 @synthesize window; 
```

到 AppDelegate.m，一切都很好:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T02:09:43.227

可能是因为您省略了`@synthesize`财产的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T09:15:44.103

这通常发生在这里，当我尝试编译在 Xcode >= 4.5 LLVM 4.0 中编辑的代码时，我运行运行 LLVM 3.1 的 Xcode 4.3.1 打开它。旧版本不知道如何在没有 @synthesize 的情况下处理 @properties。

# ios - ios半透明导航栏但实心导航栏按钮

> ID：11462978
> 
> 赞同：1
> 
> 时间：2012-07-13T01:31:24.417
> 
> 标签：ios, xcode, uinavigationbar, uibarbuttonitem

我正在尝试 [使用顶部的状态栏和导航栏覆盖创建这种效果全屏 UIView](https://stackoverflow.com/questions/373791/fullscreen-uiview-with-status-bar-and-navigation-bar-overlay-on-the-top)

导航栏是半透明的，但导航栏按钮是实心的。

```
self.navigationController.navigationBar.barStyle = UIBarStyleBlackTranslucent;
self.navigationController.navigationBar.alpha = .3; 
```

这也会自动使按钮半透明。使按钮具有纯色的解决方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:43:33.323

获取第二行代码的 id：`self.navigationController.navigationBar.alpha = .3;` 导航栏将是半透明的，它会像按钮一样“出现”，但它只是“半透明”栏顶部的“半透明”按钮，给人一种错觉实心按钮。

除非您想改用图像，否则您将无法比标准更轻 (.3)。

# php - 使用 404 作为 php 网站的基础是不恰当的形式吗？

> ID：11462979
> 
> 赞同：0
> 
> 时间：2012-07-13T01:31:28.373
> 
> 标签：php, http-status-code-404

*（对不起，如果这是一个重复的问题，我很难考虑如何搜索它，只是想出了数千个关于如何使 404 工作的结果。）*

我正在尝试构建一个大致遵循以下形式的 PHP 网站：`http://www.example.com/user/MrPoopPants`

我想知道最好的解决方案。在试图弄清楚 URL 缩短器如何重定向时，一个网站建议通过 404 发送每个请求，并让 404 错误页面使用`$_SERVER['REQUEST_URI']`

有了这个，您可以`preg_split`询问数据库是否有一个名为 MrPoopPants 的用户，然后只需使用 PHP 基于包含和他的数据库构建您的站点。

我不喜欢的两个问题是：我在网站的每个页面上都使用 404，这似乎是一件非常糟糕的事情；我还依赖于整个网站的单个 php 文件，这看起来很糟糕。

最好的方法是什么？编辑：也就是说，我意识到这是一种不好的做法，解决方案是什么？如何在不重定向到 404 的情况下检测 URL 信息？我如何设置一个页面，以便在您这样做时`/user/manboy`它知道让`/user/user.php`读取 URL 并构建页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:50:21.640

您本质上是在询问 URL 重写。`mod_rewrite`可以在**[此处](http://net.tutsplus.com/tutorials/other/a-deeper-look-at-mod_rewrite-for-apache/)**找到为初学者解释所有重要位和字节的优秀教程。

处理重写请求的 PHP 部分恐怕是 PHP 101，没有人可以简单地向您“解释”。你需要对一个非常具体的问题提出一个具体的问题，以便人们能够真正帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:48:02.250

您尝试做的事情可以通过 URL 重写来完成。尽管您确实应该研究 PHP 框架，但您可以自己进行重写。

它允许您创建`http://mydomain.com/user/1`可以在服务器上处理的 URL，方法是将其重写为：`http://mydomain.com?q=user/1`.

然后，您可以使用以下代码访问 URL： `$url = $_GET['q'];`

[http://www.addedbytes.com/for-beginners/url-rewriting-for-beginners/](http://www.addedbytes.com/for-beginners/url-rewriting-for-beginners/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:29:47.750

这里关于重写规则的其他答案是绝对正确的。但是，我过去遇到过一种情况，服务器在一个主机名下托管大量不同的应用程序，我必须完全按照您的建议进行操作。

基本上，由于共享 IIS 服务器上的锁定重写配置，我将 404 页面设置为 PHP 脚本。该脚本将在数据库中查找尝试的 URL，以查看它是否被设置为重定向到其他地方。

现在这里的关键是 404 从未发送给客户端。客户端收到带有`Location`标头的 301 或 302。客户端从来不知道它遇到了 404 页面，因为它没有作为一个返回。（当然，如果脚本在数据库中找不到重定向条目，它会返回正确的 404 页面和状态码。）

简而言之，虽然非常规，但如果您已经用尽了正常的选择，并且对如何回应客户保持谨慎，那么这种方法没有任何问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T01:38:07.770

404 错误并不是您用来使您的网站正常运行的工具。相反，仅将其视为在找不到客户要求的内容时发送给客户的响应。

处理这个问题的更好方法是设置你的 web 框架，这样你就有一个单一的脚本来响应表单的任何 URL，`http://www.example.com/user/_____`其中任何内容都跟在 final `/`. 然后您可以编写代码在数据库或其他任何地方查找用户名，并生成所需的结果页面。

# java - 在 java swings 中，我可以在画布上绘制画布吗？

> ID：11462980
> 
> 赞同：0
> 
> 时间：2012-07-13T01:31:29.003
> 
> 标签：java, swing

在 JFrame 中，我想在画布上绘制画布，并且根据需要，我想保持 canvas1 集可见或 canvas2 集可见。我可以这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T01:48:19.533

不要将 Swing (JFrame) 与 AWT (Canvas) 组件混合使用，除非您有令人信服的理由这样做，否则您只会遇到异常难以调试的麻烦。而是在其paintComponent 方法中绘制JPanel，如本网站多次描述的那样，并通过[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)交换JPanel 。此外，它是“Java Swing”，而不是“Java Swing”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T03:16:07.480

[`OverlayLayout`](http://docs.oracle.com/javase/7/docs/api/javax/swing/OverlayLayout.html)，显示[在这里](http://www.java2s.com/Tutorial/Java/0240__Swing/1401__OverlayLayout.htm)，可能会满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T01:43:51.707

由于 Canvas 只是 Component 的子类（有时是 JPanel 的子类），因此您可以简单地创建两个具有绝对定位的画布框，其中一个较大且位于另一个后面。您可以使用 .setVisibile(Boolean) 来显示/隐藏两者中的任何一个。

请参阅此链接以了解 Java 绝对布局 [http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)

# c++ - map<"string",..> 和 map 之间的性能差异 ?

> ID：11462981
> 
> 赞同：2
> 
> 时间：2012-07-13T01:31:32.793
> 
> 标签：c++, map

> **可能重复：**
> [将 std::map 与 std::string 键与 int 键一起使用的成本？](https://stackoverflow.com/questions/1842979/cost-of-using-stdmap-with-stdstring-keys-vs-int-keys)

如果我有两段代码：

1#：

```
map<unsigned int, unsigned short> ConnectedIPs;

PLUGIN_EXPORT bool PLUGIN_CALL OnPlayerConnect(int playerid)
{
    PlayerLoopList.push_back(playerid);
    char szIP[32];
    GetPlayerIp(playerid,szIP);
    unsigned short explodeIP[4];
    sscanf(szIP, " %d[^.].%d[^.].%d[^.].%d", &explodeIP[0], &explodeIP[1], &explodeIP[2], &explodeIP[3]);
    g_PlayerIP[playerid] = (explodeIP[0] + (explodeIP[1] << 8) + (explodeIP[2] << 16) + (explodeIP[3] << 24));
    ConnectedIPs[g_PlayerIP[playerid]] += 1;
    if(ConnectedIPs[g_PlayerIP[playerid]] >= g_max_ip)
    {
        Report(playerid,CHECK_IPFLOOD);
    }
    return true;
} 
```

2#：

```
map<char*, unsigned short> ConnectedIPs;//edited from char to char*

PLUGIN_EXPORT bool PLUGIN_CALL OnPlayerConnect(int playerid)
{
    PlayerLoopList.push_back(playerid);
    char szIP[32];
    GetPlayerIp(playerid,szIP);
    ConnectedIPs[szIP] += 1;
    if(ConnectedIPs[szIP] >= g_max_ip)
    {
        Report(playerid,CHECK_IPFLOOD);
    }
    return true;
} 
```

2#会更快吗？此代码用于计算一个 ip 的连接玩家数量。我认为我做得对，或者我不是？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T01:43:56.770

我假设你的意思`map<string, unsigned short>`是第二种情况，否则它甚至不会编译。

两者都基于键的比较在映射中触发*O(log n)查找。*比较 32 位整数通常比比较字符串快，所以第一种情况应该更快。

不过我不会担心，除非有分析数据显示这对性能有重大影响。如果您仅在玩家连接时这样做，并且会话往往持续“足够长”，那么这可能是一个微不足道的优化 - 即使那样，切换到`unordered_map`可能比更改密钥类型更重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:12:25.533

最大的影响可能是*由*. `std::string`您的 CPU 缓存可以容纳`long`比 s 多得多`std::string`的 s。

但是，我仍然会选择第二个选项。这将适用于 IPv6。

# c# - 如何模拟由 codefirst 策略创建的 EntityFramework 数据库？

> ID：11462982
> 
> 赞同：1
> 
> 时间：2012-07-13T01:31:38.747
> 
> 标签：c#, entity-framework, unit-testing, mocking

我有一个数据库存储库类：

```
public class DatabaseRepository : IRepository
    {
        private readonly Database _database;

        public DatabaseRepository(Database database)
        {
            _database = database;
        }

        ...

        public void Delete<TObject>(TObject entity) where TObject : BaseEntity
        {
            var dbSet = DbSet<TObject>();
            dbSet.Remove(entity);
            Save();
        }

        ...

        private void Save()
        {
            try
            {
                 _database.SaveChanges();
            }
            catch(DbEntityValidationException dbEx)
            {
                // do some action
            }
        }    
    } 
```

我需要测试方法`catch`块`private void Save()`，所以我需要类似...

```
[TestMethod]
public void SaveShouldDoSomethingIfDabaBaseConnectFalls()
{
    Mock<Database> mockDb = new Mock<Database>();
    mockDb.Setup(db => db.SaveChange()).Throws(new DbEntityValidationException());

    IRepository repository = new DatabaseRepository(mockDb.Object);

    ...
} 
```

所以我的问题是如何模拟实体框架数据库？`Mock<Database> mockDb = new Mock<Database>();`- 怎么写正确？？？为了嘲笑我使用`Moq`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T03:01:37.050

1.  使用一组典型属性为您定义`IDatabase`接口`DbContext``IIDbSet<T>`
2.  实施`FakeDbSet<T>: IDbSet<T>`
3.  更新`Repository`以使用`IDatabase`而不是`Database`

之后，您可以构造`IDatabase`.

[http://refactorthis.wordpress.com/2011/05/31/mock-faking-dbcontext-in-entity-framework-4-1-with-a-generic-repository/](http://refactorthis.wordpress.com/2011/05/31/mock-faking-dbcontext-in-entity-framework-4-1-with-a-generic-repository/)

这样做时请记住，针对假数据库集实施的单元测试并不能保证您的代码可以针对真实数据库运行。

LINQ-to-Entities (real `DbSet`) 不支持 LINQ-to-Objects ( `FakeDbSet`) 支持的许多功能。因此，当您使用数据库时，您的代码可能会在执行时失败。

此限制不会使针对伪造 DbSet 实施的单元测试毫无用处。测试仍然可以测试在您的存储库中实现的业务规则。但是您需要针对真实数据库 LINQ-to-Entities db 提供程序运行每个更新的 linq 语句（手动或来自集成测试），以确保该提供程序支持它。

这里有关于这个“圣战”主题的更多信息 - [Fake DbContext of Entity Framework 4.1 to Test](https://stackoverflow.com/questions/6904139/fake-dbcontext-of-entity-framework-4-1-to-test)

# ruby-on-rails - 乘客+nginx一个应用程序在不同控制器上的多域，如何？

> ID：11462983
> 
> 赞同：0
> 
> 时间：2012-07-13T01:31:54.850
> 
> 标签：ruby-on-rails, nginx

我有一个 Rails 应用程序，现在它在 nginx+passenger 上运行。我想要这样的东西： 将 nginx 配置为： host1.com 是应用程序默认服务器名称 host2.com 使用 app/controller1 作为根位置 host3.com 使用 app/controller2 作为根位置

如何配置nginx？

我目前的配置：

```
server {
    listen 0.0.0.0:80;
    server_name mainsite.com; 
    root '/home/sandbox/railsapp/public';
    passenger_enabled on;
    rails_env production;
    passenger_spawn_method smart-lv2;
    passenger_min_instances 1;
} 
```

我需要：

```
server {
  listen 0.0.0.0:80;
  server_name sitename1.com;
} 
```

让这个 sitename1.com 指向 mainsite.com/some-controller ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:14:15.267

我想您应该可以将其添加到您的`routes.rb`

```
constraints :subdomain => "sitename1" do
  root :to => "pages#sitename"
end 
```

然后对于该域，将 CNAME 记录添加到 sitename1.mydomain.com

# ruby-on-rails - AFNetworking HTTPClient 从 Rails JSON 服务接收 406

> ID：11462987
> 
> 赞同：0
> 
> 时间：2012-07-13T01:32:19.877
> 
> 标签：ruby-on-rails, ios, ruby

我正在构建一个 iOS 应用程序来使用 Rails 3.x 应用程序提供的 Web 服务；具体来说，我希望收到来自控制器的 JSON 响应，以响应`GET`带有此块的简单请求。

```
# after some data calls...

respond_to do |format|
  format.json { render :json => some_object }
  format.xml { render :xml => some_object }
end 
```

在我的 iOS 应用程序中，我正在使用该`AFNetworking`库来创建 an 的子类`AFHTTPClient`来使用此服务。当我调用我的 GET 端点时，我收到一个 HTTP 406 错误 - 如果我针对本地运行的 Rails 应用程序运行它，我可以验证这就是发送的内容。它成功地运行了所有数据调用，一旦到达`respond_to`块它似乎就死了，我很确定问题出在`AFNetworking`正在发送的请求标头中。

这是我的 HTTP 客户端为其标头设置的内容。

```
[self setDefaultHeader:@"Accept" value:@"application/json"];
[self registerHTTPOperationClass:[AFJSONRequestOperation class]]; 
```

我的终点是这个...

```
http://localhost:3000/api/some_object.json 
```

如果我在浏览器中调用此端点，它*会呈现得很好*。如果我用我的 iOS 应用程序调用它，那么我会得到 406。当我在我的 Rails 应用程序中抛出一个断点并检查正在通过的标头时，`AFNetworking`似乎设置`request.format`为`mobile`- 尽管`format`应该是`.json`（如 URL 所示）。从我的浏览器来看，应该是这样`request.format`。`application/json`

我已经尝试`format`在 URL 中的请求中手动设置此选项，作为查询字符串参数......我很难过。没有任何效果。有什么我想念的吗？我需要告诉`AFNetworking`它用作请求标头以使其正常工作吗？我不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:41:04.233

我刚刚搜索了[AFNetworking](https://github.com/AFNetworking/AFNetworking)源代码，并且没有将格式设置为的地方`mobile`，该字符串甚至没有出现在源代码中一次。

这必须发生在 Rails 方面。您是否定义了任何移动 Mime::Type 别名？搜索您的代码`mobile`以查看结果。对于临时修复，我会重写为

```
format.mobile { ... }
format.json { ... } 
```

# php - 使用 jquery 隐藏第 n 个文本

> ID：11462990
> 
> 赞同：1
> 
> 时间：2012-07-13T01:33:16.583
> 
> 标签：php, javascript, jquery, html, css

我有这个清单

```
<li id="field_7_div" class="field_block">
<div class="col_label">
<label class="form_field">How satisfied are you with <span class="aggregator_name">your aggregator</span>?</label>
<label class="form_required">*</label>
</div>
<div class="col_field">
<div class="radio" id="uniform-field_7_0"><span>
<input type="radio" class="form_radio" value="Very Satisfied" id="field_7_0" name="field_7" style="opacity: 0;">
</span></div>
<label for="field_7_0" class="form_choice_text">Very Satisfied</label>
<br>
<div class="radio" id="uniform-field_7_1"><span>
<input type="radio" class="form_radio" value="Satisfied" id="field_7_1" name="field_7" style="opacity: 0;">
</span></div>
<label for="field_7_1" class="form_choice_text">Satisfied</label>
<br>
<div class="radio" id="uniform-field_7_2"><span>
<input type="radio" class="form_radio" value="Neutral" id="field_7_2" name="field_7" style="opacity: 0;">
</span></div>
<label for="field_7_2" class="form_choice_text">Neutral</label>
<br>
<div class="radio" id="uniform-field_7_3"><span>
<input type="radio" class="form_radio" value="Unsatisfied" id="field_7_3" name="field_7" style="opacity: 0;">
</span></div>
<label for="field_7_3" class="form_choice_text">Unsatisfied</label>
<br>
<div class="radio" id="uniform-field_7_4"><span class="checked">
<input type="radio" class="form_radio" value="Very Unsatisfied" id="field_7_4" name="field_7" style="opacity: 0;">
</span></div>
<label for="field_7_4" class="form_choice_text">Very Unsatisfied</label>
<br>
<input type="hidden" value="5" name="field_7_length">
<div class="instruction" id="field_7_tip"></div>
</div>
</li> 
```

我想隐藏文本“满意、中立、不满意”，只留下“非常满意和非常不满意”。你们能告诉我如何使用Jquery隐藏这个文本吗？或 CSS 如果它在***IE8***中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T01:54:13.510

只有 CSS

使用[**相邻的兄弟选择器**](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)：

```
#uniform-field_7_1 + label,
#uniform-field_7_2 + label,
#uniform-field_7_3 + label{display:none} 
```

或[**属性选择器**](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)

```
label[for="field_7_1"],
label[for="field_7_2"],
label[for="field_7_3"]{display:none} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:35:21.437

如果 ids 永远不会改变，你可以用 CSS 隐藏

```
#uniform-field_7_1, #uniform-field_7_2,
#uniform-field_7_3 { display: none !important; } 
```

对于标签，使用 jquery

```
$('label[for*="field_7_1"], label[for*="field_7_2"], label[for*="field_7_3"]').hide(); 
```

# android - Web App 在 android 上列出，而不在 iOS 上列出

> ID：11462995
> 
> 赞同：0
> 
> 时间：2012-07-13T01:34:17.487
> 
> 标签：android, ios, facebook, web

Facebook 应用程序在 Web 和 Android 上列出，但不在 iOS 上。

过程

1.  从developers.facebook.com 创建了一个应用类型“Web”

2.  成功将此应用程序添加到我的新闻源页面左侧的“应用程序”部分。（在“应用程序”上列出）

3.  当我使用 Android 的 Facebook 应用程序登录时，成功将此应用程序添加到我在 Android 上的“应用程序”部分。它是在我登录 Android 时自动添加的。

4.  未能在任何 iOS Facebook 应用程序上看到此应用程序。它不在“APPS”列表中，但它存在于 iOS 的设置->应用程序中。没有菜单可以选择此应用程序添加到应用程序列表中。

似乎该应用程序不想在 iOS 的 Facebook 应用程序中列出。有谁知道如何在我的应用面板上列出该应用。

如果我需要澄清这个问题，请告诉我。我一直在寻找线索，但没有走运，这让我发疯。

在 iOS 上，即使看到所有内容也不会显示我创建的应用程序。在 web 和 android 上，它工作得很好。

![在此处输入图像描述](../Images/4ff856a3575b527f17b53941ee40d8c3.png)

![developer.facebook.com 应用设置](../Images/985393b7053b1238ec2466bfe82b0caf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:16:57.893

如果您的应用程序已在 Facebook 应用程序仪表板中启用 iOS 功能，则此应用程序只会出现在 Facebook iOS 应用程序的导航中 - 即您拥有应用程序的原生 iSO 版本。

# php - 将旧的 PHP URL 重定向到新的 ASP 页面时遇到问题

> ID：11462996
> 
> 赞同：1
> 
> 时间：2012-07-13T01:34:19.867
> 
> 标签：php, redirect, asp-classic

我不是 ASP 程序员。从该系统基于 PHP 构建时起，人们仍然使用链接。

**旧网址**：www.domain.com/shop/more.php

**新网址**：www.domain.com/shop/more.asp

它现在在没有安装 PHP 的 Windows 服务器上运行。如果我创建旧的 PHP 文件，那么在访问时会要求用户下载 .php 文件。

我的研究使我了解到我可以通过编辑 web.config 文件（在页面的根目录或文件夹中）来解决此问题，但我的所有更改要么导致错误，要么什么也没做。

我还考虑过将默认的 404 页面重定向到有问题的正确页面，但我的尝试发现了相同的结果。

有没有人有任何见解？有没有办法找出站点正在运行的 ASP 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:29:57.077

如果 PHP 不起作用，您应该能够使用 javascript 重定向：

```
<script type="text/javascript">
   window.location = "more.asp";
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:02:29.777

你不能使用 web.config，相当于 .htaccess 的 MS 吗？ [http://msdn.microsoft.com/en-us/library/ms972974.aspx](http://msdn.microsoft.com/en-us/library/ms972974.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:20:27.567

为此使用 web.config：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true" />
        <rewrite>
            <rules>
                <rule name="CanonicalHostNameRule" stopProcessing="true">
                    <match url="(.*)" />
                    <conditions>
                        <add input="{HTTP_HOST}" pattern="^www\.example\.com/something.php" negate="true" />
                    </conditions>
                    <action type="Redirect" url="http://www.example.com/something.aspx" />
                </rule>
            </rules>
        </rewrite>
  </system.webServer>
</configuration> 
```

我一生中从未使用过 ASP，所以这可能行不通，但希望它能引导您走上正确的道路。

祝你好运！

**忍者编辑：**

刚刚发现这可能有帮助？

```
<add name="en_index"
               redirect="Domain"
               ignoreCase="true" rewriteUrlParameter="IncludeQueryStringForRewrite"
               virtualUrl="http://mysitename/en/(.*).php"
               redirectMode="Permanent"
               destinationUrl="http://mysitename/en/$1.aspx" /> 
```

可能有帮助？

我从这里解释了这个（向下滚动）： http: [//our.umbraco.org/forum/core/general/14366-redirect-html-to-aspx](http://our.umbraco.org/forum/core/general/14366-redirect-html-to-aspx)

再次，祝你好运！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-13T08:32:46.003

在这种情况下，您应该在 IIS 服务器上安装 php => [http://php.iis.net/](http://php.iis.net/) 据我所知，您不能告诉 IIS 将 php 文件呈现为其他内容。

# android - 如何杀死looper/runnable

> ID：11462998
> 
> 赞同：1
> 
> 时间：2012-07-13T01:34:24.067
> 
> 标签：android

我有一个从按钮单击侦听器启动的异步作业。这是一项打印工作，因此它会在一天中一次又一次地发生。我想确保在打印作业之间我没有泄漏线程或对象。我只需要 looper.mylooper.quit() 行吗？

监听器代码是：

```
 private final Button.OnClickListener cmdPrintOnClickListener = new Button.OnClickListener() {

    public void onClick(View v) {
        enableScreenForUse(false);
        setStatus("Saving any changes");
        saveButtonClicked();
        TwoInchZebraDocket newDocket  = new TwoInchZebraDocket(mRunDetailID, getContentResolver());  //could set this to final if we get problems -> see for details http://stackoverflow.com/questions/11424924/how-can-i-pass-an-object-to-a-new-thread-generated-anonymously-in-a-button-liste/11425012?iemail=1#11425012
        setStatus("Creating docket for printing");
        PrintRunnable target = new PrintRunnable(newDocket, CheckoutActivity.this);
        new Thread(target).start();

      }
}; 
```

可运行的目标代码是：

```
 public void run() {
    Looper.prepare();
    printDocket();
    Looper.loop();
    Looper.myLooper().quit();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:25:17.490

我想你想要的是AsyncTask。如果“printDocket()”正在更新您的 UI 线程，您将不得不参考 looper，这很不方便。

这是开发人员文档：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

基本上，异步线程在 doInBackground() 中工作，UI 更新在 onPostExecute() 中。

# firefox-addon - what external content is accessed when visiting a page

> ID：11462999
> 
> 赞同：-1
> 
> 时间：2012-07-13T01:34:37.973
> 
> 标签：firefox-addon, loading, external, webpage, statusbar

When we open a new webpage, usually some external content is loaded. Like Google Analysis, ads from third parties, as we see though the status bar (i.e. Reading google-analysis.com...).

I wonder if there is an add-on for Firefox that remembers what content is loaded for a certain webpage, or a log of what appeared in the status bar.

An example would be (Firefox statue bar history):

Status bar history for page1.com:

1.loading page1.com
2.loading google-analysis.com
3.loading some-ad-provider.com
4.done

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:34:21.313

If you press Ctrl+Shift+K and then reload the page, all the requests the page makes will be visible.