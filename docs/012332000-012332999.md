# StackOverflow 问答 12332000-12332999

# javascript - 如何在Javascript中存储字节数组

> ID：12332002
> 
> 赞同：76
> 
> 时间：2012-09-08T15:25:10.727
> 
> 标签：javascript, arrays, html, bytearray, byte

我将在 Javascript 中存储大量字节值（很可能超过一百万）。如果我使用带有普通数字的普通数组，则需要 8 MB，因为数字存储为 IEEE 双精度数，但如果我可以将其存储为字节，则它将只有 1 MB。

出于显而易见的原因，我想避免浪费那么多空间。有没有办法将字节存储为字节而不是双精度数？浏览器兼容性对我来说不是问题，只要它在 Chrome 中工作。这是在 HTML5 中，如果有区别的话。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-09-08T17:11:02.147

通过使用[类型化数组](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays)，您可以存储[这些类型](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/ArrayBufferView#Typed_array_subclasses)的数组：

| 类型 | 值范围 | 大小（字节） |
| --- | --- | --- |
| [`Int8Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array) | -128 至 127 | 1 |
| [`Uint8Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array) | 0 到 255 | 1 |
| [`Uint8ClampedArray`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray) | 0 到 255 | 1 |
| [`Int16Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array) | -32768 至 32767 | 2 |
| [`Uint16Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array) | 0 至 65535 | 2 |
| [`Int32Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array) | -2147483648 至 2147483647 | 4 |
| [`Uint32Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array) | 0 至 4294967295 | 4 |
| [`Float32Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array) | -3.4E38 至 3.4E38 | 4 |
| [`Float64Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array) | -1.8E308 至 1.8E308 | 8 |
| [`BigInt64Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt64Array) | -2^63 到 2^63 - 1 | 8 |
| [`BigUint64Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigUint64Array) | 0 到 2^64 - 1 | 8 |

### Stack Snippets 和[JSFiddle中的演示](http://jsfiddle.net/kendfrey/mAhVp/)

```
var array = new Uint8Array(100);
array[42] = 10;
console.log(array[42]);
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-11-07T03:58:01.840

```
var array = new Uint8Array(100);    
array[10] = 256;
array[10] === 0 // true 
```

我在 firefox 和 chrome 中验证过，它实际上是一个字节数组：

```
var array = new Uint8Array(1024*1024*50);  // allocates 50MBytes 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T16:03:35.987

您可以将数据存储在一些固定大小的大字符串数组中。访问该字符串数组中的任何特定字符并将该字符视为一个字节应该是有效的。

看到您想要支持的操作（可能表示为接口）以使问题更具体会很有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-10T06:20:54.783

我想要一个更准确和有用的答案来回答这个问题。这是真正的答案（如果您需要专门的**字节**数组，请进行相应调整；显然，数学将偏离 1 倍`8 bits : 1 byte`）：

```
class BitArray {
  constructor(bits = 0) {
    this.uints = new Uint32Array(~~(bits / 32));
  }

  getBit(bit) {
    return (this.uints[~~(bit / 32)] & (1 << (bit % 32))) != 0 ? 1 : 0;
  }

  assignBit(bit, value) {
    if (value) {
      this.uints[~~(bit / 32)] |= (1 << (bit % 32));
    } else {
      this.uints[~~(bit / 32)] &= ~(1 << (bit % 32));
    }
  }

  get size() {
    return this.uints.length * 32;
  }

  static bitsToUints(bits) {
    return ~~(bits / 32);
  }
} 
```

用法：

```
let bits = new BitArray(500);
for (let uint = 0; uint < bits.uints.length; ++uint) {
  bits.uints[uint] = 457345834;
}
for (let bit = 0; bit < 50; ++bit) {
  bits.assignBit(bit, 1);
}
str = '';
for (let bit = bits.size - 1; bit >= 0; --bit) {
  str += bits.getBit(bit);
}
str; 
```

输出：

```
"00011011010000101000101100101010
 00011011010000101000101100101010
 00011011010000101000101100101010
 00011011010000101000101100101010
 00011011010000101000101100101010
 00011011010000101000101100101010
 00011011010000101000101100101010
 00011011010000101000101100101010
 00011011010000101000101100101010
 00011011010000101000101100101010
 00011011010000101000101100101010
 00011011010000101000101100101010
 00011011010000101000101100101010
 00011011010000111111111111111111
 11111111111111111111111111111111" 
```

**注意：**如果将此类创建为全局变量，至少在 Linux 上的 Firefox 76.0 控制台中，例如分配位（即每 1000 万次分配约 2 秒），该类的分配速度确实很慢......**另一方面**，如果它被创建**为**一个变量（即），**那么**它的**速度非常快**（即每 1000 万个分配约 300 毫秒）！**`let bits = new BitArray(1e7);`**

 ******* * *

有关更多信息，请参见此处：

*   “如何在 JavaScript 中设置、清除和切换单个位？”：[https ://stackoverflow.com/a/1436448/1599699](https://stackoverflow.com/a/1436448/1599699)
*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators)
*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays)
*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array)

请注意，我使用 Uint32Array 是因为无法直接拥有位/字节数组（您可以直接与之交互）**并且**因为即使有`BigUint64Array`，JS 也仅支持 32 位：

> 按位运算符将其操作数视为 32 位序列
> 
> ...
> 
> 所有位运算符的操作数都转换为...32位整数******

# c++ - 在paintEvent之后恢复TextCursor

> ID：12332009
> 
> 赞同：1
> 
> 时间：2012-09-08T15:27:08.927
> 
> 标签：c++, qt, events, text-editor, paint

我正在使用 subclassed `QPlainTextEditor`，并且我正在使用自定义`paintEvent`来突出显示每一行。现在，绘画作品，但`TextCursor`消失了，更糟糕的是，我看不到打字的字母，即使在不应该画的行中也是如此。我 `QPainter painter((QAbstractScrollArea*)(viewport()));`用作画家并 `painter.fillRect(...);`用于绘制行。这些是正确的功能吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:11:03.007

访问文本光标的代码是什么？它应该是这样的：

```
QTextCursor cursor = textEdit->textCursor();
cursor.insertText(QString(QChar::ObjectReplacementCharacter), svgCharFormat);
textEdit->setTextCursor(cursor); 
```

其中 textEdit 定义为：

```
QTextEdit *textEdit; 
```

您可以通过以下方式获取/设置 QTextDocument：

```
textEdit->document();
textEdit->setDocument(...); 
```

# android - 如何在扩展 AsyncTask 的类中将 Object 更改为 String？

> ID：12332016
> 
> 赞同：2
> 
> 时间：2012-09-08T15:28:18.503
> 
> 标签：android, android-asynctask

我正在学习 Google 的 Android 开发教程，但遇到了一个问题。在 Android 的[连接到网络指南中](https://developer.android.com/training/basics/network-ops/connecting.html#AsyncTask)，它说要创建一个扩展 AsyncTask 的类。

因此，当我编写该类时，它会自动实现该方法，如下所示：

```
private Object doInBackground(Object... args) {..}  //it's fine 
```

但是当我尝试按照教程中所说的那样编写时：

```
private String doInBackground(String... args) {..} //it gives an error 
```

错误说：

```
The method doInBackground(String...) of type MainActivity.DownloadWebpageText must override a superclass method. 
```

那么如何将 Object 更改为 String 而不会出现错误呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:35:52.790

当您扩展 AsyncTask 时，您必须定义后台、进度和执行后方法的输入。像这样

```
private class MyTask extends AsyncTask<String, Void, Boolean> 
```

它将定义一个扩展 AsyncTask 的类，并将其作为输入字符串并将布尔值返回给 onPostExecute 方法。

# asp.net - mscrm 身份验证

> ID：12332017
> 
> 赞同：0
> 
> 时间：2012-09-08T15:28:21.190
> 
> 标签：asp.net, authentication, dynamics-crm

添加参考：

*   microsoft.crm.sdk.dll
*   microsoft.crm.sdk.proxy.dll
*   microsoft.xrm.sdk.dll

我得到的错误：

> 错误 2“CrmService”不包含“Url”的定义，并且找不到接受“CrmService”类型的第一个参数的扩展方法“Url”（您是否缺少 using 指令或程序集引用？）
> 
> 错误 3“CrmService”不包含“CrmAuthenticationTokenValue”的定义，并且找不到接受“CrmService”类型的第一个参数的扩展方法“CrmAuthenticationTokenValue”（您是否缺少 using 指令或程序集引用？）
> 
> 错误 4“CrmService”不包含“Credentials”的定义，并且找不到接受“CrmService”类型的第一个参数的扩展方法“Credentials”（您是否缺少 using 指令或程序集引用？）

代码：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Net;
using System.Security;
using System.Runtime.InteropServices;
using Microsoft.Crm.Sdk;
using System.Xml;

public partial class _Default : System.Web.UI.Page
{
    public CrmService service;

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void id_Click(object sender, EventArgs e)
    {
         string server = "192.168.1.50";
         string domain = "domain";
         string org = "organization";
         string username = "user1\\crm.bdm";
         string password = "user1secret";

         NetworkCredential cred = new NetworkCredential();
         cred.Domain = domain;
         cred.UserName = username;
         cred.Password = password;

         CrmAuthenticationToken token = new CrmAuthenticationToken();
         token.AuthenticationType = 0;
         token.OrganizationName = org;

         service = new CrmService();
         service.Url = "http://192.168.1.50/airflights/XRMServices/2011/Organization.svc";
         service.CrmAuthenticationTokenValue = token;
         service.Credentials = cred;

         cred = null;
    }

    public CrmService Service
    {
        get
        {
            return service;
        }
    }
} 
```

我在这里忘记了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:59:16.967

我不确定为什么会出现编译错误，但这可能是因为您似乎在混合 Crm 4 和 Crm 2011 dll。

目前尚不清楚您要在这里实现什么，您正在使用 CrmService（Crm 4 类）尝试连接到 2011 端点，我从未尝试过，但我不希望它能够工作。

我猜您正在尝试为 Crm 2011 编写 Web 服务调用，在这种情况下，我建议您看一下：http: [//msdn.microsoft.com/en-us/library/gg309557](http://msdn.microsoft.com/en-us/library/gg309557)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T06:37:56.607

我认为您需要添加对“System.Web.Services”的引用才能使其正常工作。

# javascript - div 实际自动宽度

> ID：12332026
> 
> 赞同：0
> 
> 时间：2012-09-08T15:29:43.840
> 
> 标签：javascript, html, css

我有一个 div，它基本上是一个`float: left`较小的 div 网格。我希望整个网格具有自动宽度，并且它将相对于其容器居中。`display: inline-block`to grid + `text-align: center`to 容器不会产生预期的结果。似乎一旦用几个 div 填充网格以创建新行，即使较小的 div 不完全适合该行并且右侧还有一些空白区域，网格的宽度也会最大化为容器的宽度。

解决办法是什么？![在此处输入图像描述](../Images/8c8b16912b67a5c918df7842bd0bb68a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:43:30.060

为什么首先要使用`float`较小`div`的 s？在它们上使用`display: inline-block;`它们可以让您在居中时获得更多控制权，并使您也可以`width`通过这样做来使容器“自动” `display: inline-block;`。这是一个小的工作演示：[little link](http://jsfiddle.net/glee/4JbUJ/)。

这是基本大纲，HTML：

```
<div class = "container">
    <div class = "floatcontainer">
        <img src = "" alt = "" class = "floatimg"/>
        <img src = "" alt = "" class = "floatimg"/>
        <img src = "" alt = "" class = "floatimg"/>
        <br/>
        <img src = "" alt = "" class = "floatimg"/>
        <img src = "" alt = "" class = "floatimg"/>
        <img src = "" alt = "" class = "floatimg"/>
    </div>
</div> 
```

CSS：

```
.container {
    width: 100%;
    text-align: center;
}
.floatimg {
    width: 100px;
    display: inline-block;
    margin: 15px;
}
.floatcontainer {
    display: inline-block; /*makes the div's width only as large as needed*/
    text-align: center;
} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:49:45.403

您应该在这里使用表格，但如果不是这种情况，请尝试我制作的这个[小提琴。](http://jsfiddle.net/FLdGp/1/)

**HTML**

```
<!DOCTYPE html> 
```

演示​</p>

**CSS**

```
.container{
    margin: 10px;
    padding: 10px;
    border: 1px solid #000;
}
.item{
        height: 10px;
        margin-top: 10px;
        margin-right: 2%;
        width: 32%;
        float: left;
        background-color: #dfdfdf;
    }
    .mr0{
        margin-right: 0;
    }
    .clear{
        clear: both;
    }
    ​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-26T12:15:22.357

让它简单并使用

```
div.big {
width:100%;
}
div.small {
    width:33.33%
} 
```

# php - 如何将帖子 ID 传递给页面 URL？

> ID：12332027
> 
> 赞同：0
> 
> 时间：2012-09-08T15:29:50.307
> 
> 标签：php, wordpress, post, methods, get

我正在尝试将 AUTHORS POST 的 POST ID 传递/附加到 PAGE URL 的末尾。

到目前为止，我生成链接的努力如下

```
<?php foreach(get_posts(array('author' => $author_id)) as $post)?>
<a href="http://example.com/dashboard/form_page?gform_post_id=<?php echo $post->ID ?>">Link</a> 
```

但这似乎是在网站上制作的第一个 POST ID。不是作者 POST 的 ID。注意：这是我试图从作者那里获得的自定义帖子 ID。

页面 URL 是这样的： [http ://example.com/dashboard/form_page](http://example.com/dashboard/form_page)

我正在寻找的是： [http ://example.com/dashboard/form_page?gform_post_id=476](http://example.com/dashboard/form_page?gform_post_id=476)

其中 POST ID 是由登录的作者创建的 POST 的 ID。（在我的系统中，每个作者只有 1 个帖子）

提前祝...

使用的插件：[http ://wordpress.org/extend/plugins/gravity-forms-update-post/](http://wordpress.org/extend/plugins/gravity-forms-update-post/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:11:15.543

尝试

```
<?php foreach(get_posts(array('author' => $author_id)) as $post) { ?>
    <a href="http://example.com/dashboard/form_page?gform_post_id=<?php echo $post->ID 
    ?>">Link</a>
<?php } ?> 
```

# iphone - 图像只旋转一次

> ID：12332028
> 
> 赞同：0
> 
> 时间：2012-09-08T15:29:52.887
> 
> 标签：iphone, rotation, cgaffinetransform

我走过另一个相同的问题，但它没有帮助。我有一个应该将每个 doubleTap 旋转 90 度的图像

这是旋转功能

```
-(void) rotateImageWithAngle:(float)angle1
{

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.2];
    [UIView setAnimationBeginsFromCurrentState:YES];

    CGAffineTransform transform;
    transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(angle1));
    self.transform = transform;

    [UIView commitAnimations];   
} 
```

angel1 始终为 90。问题是它只旋转一次，每次额外的 doubleTap 都会转到函数但什么也不做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:44:47.653

您每次都应用相同的转换。每次双击都应将角度更改 90 度。

# jquery - 使用 jQuery / Javascript 从 eBay 中提取内容

> ID：12332034
> 
> 赞同：0
> 
> 时间：2012-09-08T15:30:52.353
> 
> 标签：jquery

我通常能够使用 jQuery 轻松地从网站中提取内容，但我无法从该页面中提取一些内容：

[http://cgi.ebay.com/ws/eBayISAPI.dll?ViewItem&item=290585620456](http://cgi.ebay.com/ws/eBayISAPI.dll?ViewItem&item=290585620456)

我想以以下格式提取产品名称、可用数量和销售数量：

2 件 10 英寸竹制单点针织针 0-11 - 32 已售出 0 - 5 号可用 1 - 5 号可用 2 - 5 号可用 ... 8 号 - 缺货

但我似乎无法弄清楚。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:33:42.557

您需要查看[跨域 jQuery AJAX 指南](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide) [(1)]或[eBay API](https://www.x.com/developers/ebay/javascript-developer-center) [(2)]。

* * *

1.  一旦你从 eBay 上抓取了详细信息，你就必须解析它们以获得你想要的信息，这可能很乏味。

2.  特别是对于 API，您可以查看`GetSingleItem`- [http://developer.ebay.com/devzone/shopping/docs/callref/GetSingleItem.html](http://developer.ebay.com/devzone/shopping/docs/callref/GetSingleItem.html)

# asp.net-mvc-3 - 在 MVC3 中使用 lambda 函数将一个视图模型中的字段填充为另一个视图模型中的值

> ID：12332035
> 
> 赞同：0
> 
> 时间：2012-09-08T15:30:53.137
> 
> 标签：asp.net-mvc-3, model, viewmodel, lambda

我有一个模型，其中包含每个视图的视图模型。该模型在会话中举行，并在应用程序启动时初始化。我需要能够使用来自另一个视图模型的值填充来自一个视图模型的字段，因此使用了 lambda 函数。下面是我的模型。我正在使用 lambda，因此当我获得 Test2.MyProperty 时，它将使用 FunctionTestProperty 从 Test1.TestProperty 中检索值。

```
 public class Model
    {
         public Model()
         {
             Test1 = new Test1()
             Test2 = new Test2(FunctionTestProperty () => Test1.TestProperty)
         }
    }

    public class Test1
    {
        public string TestProperty { get; set; }
    }
    public class Test2
    {
        public Test2() : this (() => string.Empty)
        {}
        public Test2(Func<string> functionTestProperty)
        {
             FunctionTestProperty = functionTestProperty;
        }

        public Func<string> FunctionTestProperty { get; set; }

         public string MyProperty 
         { 
              get{ return FunctionTestProperty() ?? string.Empty; } 
         }
    } 
```

当我第一次运行应用程序并从 Test1 导航到 Test2 时，这非常有效；我可以看到，当我获得 MyProperty 的值时，它会回调模型构造函数并检索 Test1.TestProperty 值。但是，当我随后提交表单 (Test2) 时，它会调用将其设置为 string.Empty 的默认构造函数。因此，如果我返回 Test1 并再次返回 Test2，它总是会调用 Test2 默认构造函数。有谁知道为什么这在第一次运行应用程序时有效，但在提交视图后无效，或者我犯了明显的错误？

# ruby-on-rails - 两个几乎相同的 Rails 项目，一个缺少 gem 帮助文件，另一个没有

> ID：12332042
> 
> 赞同：1
> 
> 时间：2012-09-08T15:31:48.503
> 
> 标签：ruby-on-rails, helpers, authorize.net

我的主目录中的同一个父级下有两个具有相同环境的 Rails 项目。两者都使用 authorize-net (1.5.2) gem。我在 Mac OS X 10.8.1 上使用 ruby​​ 1.8.7 (2012-02-08 patchlevel 358) [i686-darwin11.4.0]、Rails 2.3.14 和 rvm 1.14.3。两者都`config.gem 'authorize-net', :lib => 'authorize_net`在其 config/environment.rb 中，都`helper :authorize_net`在其相关控制器`helper :all`的顶部，都在其 application_controller.rb 的顶部。然而，一个工作正常，另一个`MissingSourceFile (Missing helper file helpers/authorize_net_helper.rb)`出错。帮助文件实际上位于`~/.rvm/gems/ruby-1.8.7-p358@global/gems/authorize-net-1.5.2/lib/app/helpers/authorize_net_helper.rb`

我一生都无法弄清楚为什么一个有效，而另一个无效。谁能指出我正确的方向？在每种情况下，我如何才能确定 Rails 使用什么路径来查找此帮助程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:56:24.103

多年来我在使用 StackExchange 宇宙中学到的一件事是，当我遇到一个奇怪的问题并且在几天内没有得到答案时，这是我做的一件愚蠢的事情，其他人没有做过或可能永远不会做. 我想这是其中之一，但我永远不会知道，因为问题已经消失了，我不知道为什么。

意识到工作项目来自 authorize.net 的示例而非工作项目没有，我发现 authorize-net gem 有一个我没有使用过的生成器。所以我通过生成器代码并意识到我缺少一个我确定我已经创建的初始化程序。这个初始化程序只是从 YML 文件中加载一些常量（api_login_id 和 api_transaction_key），与路径无关，但我还是创建了它，然后才意识到实际上我之前已经创建了它，但把它放在控制器而不是配置/初始化程序中。无论如何，当我重新启动 WEBrick 时，一切正常，没有路径问题。现在我之前已经多次重启了 WEBrick，包括在发布这个问题之前。但这一次问题消失了。

我讨厌这种情况发生。

# php - Yii：关于验证错误：需要保留选择的国家和城市

> ID：12332043
> 
> 赞同：1
> 
> 时间：2012-09-08T15:32:02.963
> 
> 标签：php, yii

我正在处理注册表单，我有两个步骤可以让用户在某个网站上注册，所以第 1 步是创建操作，第 2 步是在配置文件控制器上更新操作。

所以我的问题是如何在验证错误时保留选定的国家和城市，但它已经存在了？！检查图像

![检查这个](../Images/22e5f0944aed75d0120abe6d2edfa4ce.png)

看法：

```
<div class="row">

        <?php echo $form->labelEx($model,'countryId'); ?>
        <?php echo $form->dropDownList($model, 'countryId',
                CHtml::listData(SysCountry::model()->findAll(), 'id', 'name'),
                array(
                    'empty'=>'Select country',
                    'ajax' => array(
                    'type'=>'POST', //request type
                    'url'=>CController::createUrl('profile/dynamiccity'), //url to call.
                    //Style: CController::createUrl('currentController/methodToCall')
                    'update'=>'#Profile_cityId', //selector to update
                    //'data'=>'js:javascript statement' 
                    //leave out the data key to pass all form values through
                    )));

        ?>
        <?php echo $form->error($model,'countryId'); ?> 
</div>

<div class="row">
        <?php echo $form->labelEx($model,'cityId'); ?>
        <?php echo $form->dropDownList($model, 'cityId', array('empty'=>'Please select country first')
        ); ?>
        <?php echo $form->error($model,'cityId'); ?> 
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:05:56.177

选中此项，以更新您需要使用的第二个下拉菜单

```
'update'=>'#'.CHtml::activeId($model,'tracanton'),

echo CActiveForm::dropDownList
                     (
                        $model,'traprovincia',
                        CHtml::listData
                        ( 
                            CatUbicacionGeografica::model()->findAll('cat_ubigeo_nivel=? ORDER BY cat_ubigeo_descripcion', array('2') ), 
                            'cat_ubigeo_codigo', 'cat_ubigeo_descripcion'
                        ), 
                         array(
                            'ajax'=>array(
                                'type' => 'POST',
                                'url' => CController::createUrl('tramite/updatecanton'),
                                'data'=>array('padre'=>'js:this.value'), 
                                'update'=>'#'.CHtml::activeId($model,'tracanton'),
                                ),
                             'prompt' => '( Seleccione Provincia )',
                             'style' => "width: 300px;",
                            // 'onchange'=>'js:$("#tracanton").focus()',
                        )    
                     ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:41:37.853

是 javascript 还是 PHP 验证？如果它是前者使用 JS 来获取下拉框的值，然后重新填充（如果它是这个，ikll 会发布一些代码）。如果它的 PHP 然后在您的下拉菜单中执行以下操作

```
<select>

//-- If 'save' has been entered and validation has been caught
if (isset($_POST/GET['country'])) {

  echo '<option value=". $_POST/GET['country'] . '" selected="selected">' . $_POST/GET['country'] . '</option>';

} else {

   //-- if validation hasnt been actioned

}

</select> 
```

虽然这可能不适用于您的代码，但我希望您能理解。如果您可以发布您的验证码，那么您将无法正确修改它以适合您。

# windows-runtime - WinRT：下载文件

> ID：12332044
> 
> 赞同：2
> 
> 时间：2012-09-08T15:32:16.707
> 
> 标签：windows-runtime

我想从服务器下载文件并显示加载进度。我该怎么做？

下载我用这个：

```
HttpClient client = new HttpClient();
Stream response = await client.GetStreamAsync(url); 
```

但我不知道如何获取下载文件的大小，也不知道下载了多少 感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:05:41.643

```
HttpClient client = new HttpClient();

HttpResponseMessage response = await client.GetAsync(url); 
```

响应对象中有StatusCode属性，你可以分析这个属性是OK还是PartialContent。您还可以观看以下链接了解更多详情： [http ://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/f27c385a-e783-4062-a0b8-e21bf1704f95](http://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/f27c385a-e783-4062-a0b8-e21bf1704f95)

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh781241.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh781241.aspx)

# perl - 如何通过指定其解析树来创建 perl 子？

> ID：12332046
> 
> 赞同：9
> 
> 时间：2012-09-08T15:32:24.537
> 
> 标签：perl, bytecode

给定一个 CODE ref，是否可以：

1.  访问该 CODE ref 的解析树
2.  通过指定 CODE ref 的解析树来创建一个新的 CODE ref，该解析树可以包含^(1返回的解析树的元素)

通常我们通过指定源代码在 perl 中创建子例程，然后将其解析并转换为解析树。

我想编写一个 perl 函数，它可以通过指定其解析树来创建子例程，并且该解析树可以从其他子例程的另一个解析树派生。

可能的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T16:21:21.040

我不知道您问题的完整答案，但我知道 Data::Dumper 可以解析代码引用。查看它的文档，我发现它用于[`B::Deparse`](http://p3rl.org/B::Deparse)完成繁重的工作（`B::`模块是与编译器交互的模块）。不幸的是，这似乎只会导致 coderef 的文本表示。

相反，我[`Op`](https://metacpan.org/search?q=Op)在 metacpan 上搜索并获得了更多有趣的可能性。由于我现在在最深的 Perl 魔法方面还不够深入，所以我将留给您查看这些结果。也许有些东西会有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T04:01:23.123

这与操作码无关，但它确实将相同的两个变量包含在三个不同的闭包中。这些变量包含在子例程中，让人想起类 get/set 例程，然后这些关闭的变量通过它们的访问例程由其他闭包共享。

这是对评论的回应：*我确信有必要访问解析树中的底层节点，以便我可以创建在相同变量上关闭的新闭包。*

```
use strict;
use warnings;
use v5.14;

# create closed vars
my $v1 = access_closure(6);
my $v2 = access_closure(42);

# play with them
say "v1 ", &$v1;
say "v2 ", &$v2;
say "v1 ", &$v1(5);
say "v2 ", &$v2(43);
say "v1 ", &$v1;
say "v2 ", &$v2;

# create silly closures that use them
my $test1 = test_closure(2);
my $test2 = test_closure(17);
my $test3 = test_closure(50);

# play with those
&$test1;
&$test2;
&$test3;

# create the get/set routine for a closed var
sub access_closure {
    my $val = shift;
    return sub {
        $val = shift if @_;
        return $val;
    }
}

# create a silly closure that encloses a control var and uses the two other vars
sub test_closure {
    my $val = shift;
    return sub {
        say "\nval is $val";
        printf "v1 is %2d, v2 is %2d\n",
            &$v1, &$v2;
        if (&$v1 < $val) {
            say "Increment v1";
            &$v1(&$v1+1);
        }
        if (&$v2 > $val) {
            say "Decrement v2";
            &$v2(&$v2-1);
        }
        printf "v1 is %2d, v2 is %2d\n",
            &$v1, &$v2;
    }
} 
```

# java - java mac地址与iwconfig不同

> ID：12332048
> 
> 赞同：0
> 
> 时间：2012-09-08T15:32:51.523
> 
> 标签：java

我有在java中读取MAC地址的功能：

> ```
>  for(Enumeration<NetworkInterface> enm = NetworkInterface.getNetworkInterfaces(); enm.hasMoreElements();){
>         NetworkInterface network = (NetworkInterface) enm.nextElement();
>           if(null != network.getHardwareAddress()){
>               System.out.print(network.getDisplayName());
>               byte[] mac = network.getHardwareAddress();
>               StringBuilder sb = new StringBuilder(18);
>               for (byte b : mac) {
>                   if (sb.length() > 0)
>                       sb.append(':');
>                   sb.append(String.format("%02x", b & 0xff));
>               }                  
> 
>               System.out.print(sb.toString());
>               return null; 
>           }
>        } 
> ```

这个结果： wlan0: 00:25:d3:9c:ad:7a 但是当我这样做时：iwconfig，我收到：00:0D:F3:0D:DD:DC for wlan0

问题，为什么？

编辑：对不起，当我运行 ifconfig（不是 iwconfig）时，它会响应：

> wlan0 Link encap:Ethernet HWaddr 00:25:d3:9c:ad:7a
> inet addr:192.168.50.100 Bcast:192.168.50.255 Mask:255.255.255.0 inet6 addr: fe80::225:d3ff:fe9c:ad7a/64 范围： Link UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX 数据包:2417546 错误:0 丢弃:0 超限:0 帧:0 TX 数据包:1608679 错误:0 丢弃:0 超限:0 运营商:0 冲突:0 txqueuelen:1000 RX字节：3099222889 (3.0 GB) 发送字节：183978636 (183.9 MB)

所以没关系，还是谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:52:11.360

尝试运行此代码：

```
 for (Enumeration<NetworkInterface> enm = NetworkInterface
            .getNetworkInterfaces(); enm.hasMoreElements();) {
        NetworkInterface network = (NetworkInterface) enm.nextElement();
        if (null != network.getHardwareAddress()) {
            System.out.print(network.getDisplayName() + " is ");
            byte[] mac = network.getHardwareAddress();
            StringBuilder sb = new StringBuilder(18);
            for (byte b : mac) {
                if (sb.length() > 0)
                    sb.append(':');
                sb.append(String.format("%02x", b & 0xff));
            }

            System.out.println(sb.toString());
        }
    } 
```

这将打印出所有网络接口的名称/mac 地址，您的旧代码只是第一个。查看这些 MAC 地址是否与 iwconfig 给出的地址匹配

请让我知道我缺少什么，以便在搜索时我应该在谷歌中找到我的网站。 两个非常奇怪的 SlimDX DX11 错误 我正处于将一些代码移植到我的框架中的最后阶段。 最新的问题与我最近发布的问题非常相似（奇怪的“方法的类型参数无法从用法中推断出来。”），其中我正在移植代码的清单中包含在 '<' 和 '>' 中的文本丢失了. 最新的违规行是： using (var resource = SlimDX.Direct3D11.Resource.FromSwapChain(swapChain, 0)) renderTarget = new SlimDX.Direct3D11.RenderTargetView(graphics, resource); 我从编译器收到以下错误： 无法从用法中推断方法“SlimDX.Direct3D10.Device.OpenSharedResource(System.IntPtr)”的类型参数。尝试明确指定类型参数。 我试图通过将我的代码更改为： using (var resource = SlimDX.Direct3D11.Resource.FromSwapChain<slimdx.direct3d11.resource>(swapChain, 0)) renderTarget = new SlimDX.Direct3D11.RenderTargetView(graphics, resource); ...但现在我得到一个更奇怪的运行时错误： “错误：找不到方法‘SlimDX.Direct3D11.Resource.FromPointerReflectionThunk’。” 初步研究表明，我可能偶然发现了一些超出我想象的东西：http ://www.gamedev.net/topic/542095-slimdx-need-help-from-nativemanaged-interop-expert/ 我要做的就是将此代码移植到我的框架中： http : //www.aaronblog.us/?p=36 ...这就是关于使用 DX11 在 SlimDX 中绘制文本的全部内容。 在某个时候，我希望已经弄清楚如何将这段代码泛化到我的框架中。虽然它很重。 我正在使用 SlimDX SDK（2012 年 1 月）。 htmlweb-applicationskeywordmeta-tags 4 3 回答 3 This answer is useful 2 关键字 inhtml:meta几乎被所有重要的系统忽略，因为它们通常不能很好地反映页面的内容。重要的方面包括meta name="description"（这可以用作搜索结果页面上的描述）；内容的关键字密度（不要过多使用关键字，但显然也不要太少）；关键字是否出现在 URL（最好是域名）中；有多少网站和网页链接到您的页面；引用您页面的实体的评级；内容存在多长时间（越长越好）；托管您的内容的网站多久更新一次（越频繁越好）；代理（都是机器人）可以访问您的内容的程度；您向 Google 支付了多少钱（这应该很明显）；等等。 所以，是的，简短的回答：它不起作用，但其他事情可以。 此外，请确保 Google 已知的实体链接到您的内容。如果没有，谷歌将很难找到它。您可以直接将您的网站/网页提交给 Google，但有人告诉我，如果 Google 通过引用链接本身找到您的内容，您将获得更好的初始排名。 于 2012-09-08T15:53:40.343 回答 This answer is useful 0 首先，谷歌直到一段时间才会将你的网站包含在搜索结果中。我建议使用谷歌网站管理员来增加你的网站出现在他们的搜索结果中的机会。 元元素用于解释您网站上的内容。在您的网站变得流行之前，它不会帮助您在 google 上显示您的页面。 于 2012-09-08T16:37:02.887 回答 This answer is useful 0 网络开发中有一个完整的理念，称为 SEO（或搜索引擎优化）。 要点如下： 让您的网站使用良好、干净、语义化的 HTML 标记。 写出高质量的内容。 不要有重复的内容（或确保您的 URL 重写不允许它）。 拥有与您的主题相关的外部网站会有很大帮助（例如，拥有来自该网站的 CSS-Tricks 文章的链接比发布在游戏论坛中的文章更有帮助）。 等待。谷歌将您网站的正常运行时间考虑在内，更成熟、更稳定、更老牌的网站可以获得更好的搜索结果。 您的关键字应该出现在您的内容、标题和标题中，几乎无处不在。不过也不要过度！ 这是一个很棒的网站，可以帮助您入门。 至于具体问题：标签对搜索引擎结果几乎没有影响。谷歌从字面上忽略了它们。 于 2012-09-08T16:41:58.050 回答 Related 2 ruby-on-rails-3 - Rails 3 应用程序中的 Mp3 播放器 1 php - （大）Python 项目的数据库引擎 1 css - 如何在导航“div”中定位文本。 1 ruby-on-rails - omn iauth 如何在 Rails 中拦截 /auth/facebook？ 3 xslt-1.0 - XPath 中 sum 和 product 的聚合函数 1 ios - 带有许多圆圈的 UIView 2 javascript - 有没有办法24小时禁用按钮？ 1 cakephp - CakePHP：模型返回空值 5 php - 如何在 PHP 代码中引入 JavaScript 警报窗口 3 javascript - 使用 $(document).ready 为什么必须在匿名函数中？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# html - 我添加了元标记，如下所示。   问问题 问问题 2012-09-08T15:33:13.790 2527 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我添加了元标记，如下所示。   我期待这可以与谷歌搜索一起使用，但是当我搜索 abc（例如目的）时，我在谷歌中看不到我的网站。所以只是好奇上面的元标记不起作用。 HTML生成的文件是  <link type="text/css" rel="stylesheet" href="/faces/javax.faces.resource/themes/sam/theme.css?ln=primefaces"> <link type="text/css" rel="stylesheet" href="/faces/rfRes/skinning.ecss?db=eAHL6rC8BQAEkAIG"> <link type="text/css" rel="stylesheet" href="/faces/javax.faces.resource/buttonStyles.css?ln=css"> <link type="text/css" rel="stylesheet" href="/faces/javax.faces.resource/menuss.css?ln=css"> <link type="text/css" rel="stylesheet" href="/faces/javax.faces.resource/setFontForAll.css?ln=css">   <link type="text/css" rel="stylesheet" href="/faces/javax.faces.resource/menus_w.css?ln=css"> <link type="text/css" rel="stylesheet" href="/faces/javax.faces.resource/menus.css?ln=css"> <link type="text/css" rel="stylesheet" href="/faces/javax.faces.resource/myFont.css?ln=css">   <title> Welcome to My Site </title> 请让我知道我缺少什么，以便在搜索时我应该在谷歌中找到我的网站。 两个非常奇怪的 SlimDX DX11 错误 我正处于将一些代码移植到我的框架中的最后阶段。 最新的问题与我最近发布的问题非常相似（奇怪的“方法的类型参数无法从用法中推断出来。”），其中我正在移植代码的清单中包含在 '<' 和 '>' 中的文本丢失了. 最新的违规行是： using (var resource = SlimDX.Direct3D11.Resource.FromSwapChain(swapChain, 0)) renderTarget = new SlimDX.Direct3D11.RenderTargetView(graphics, resource); 我从编译器收到以下错误： 无法从用法中推断方法“SlimDX.Direct3D10.Device.OpenSharedResource(System.IntPtr)”的类型参数。尝试明确指定类型参数。 我试图通过将我的代码更改为： using (var resource = SlimDX.Direct3D11.Resource.FromSwapChain<slimdx.direct3d11.resource>(swapChain, 0)) renderTarget = new SlimDX.Direct3D11.RenderTargetView(graphics, resource); ...但现在我得到一个更奇怪的运行时错误： “错误：找不到方法‘SlimDX.Direct3D11.Resource.FromPointerReflectionThunk’。” 初步研究表明，我可能偶然发现了一些超出我想象的东西：http ://www.gamedev.net/topic/542095-slimdx-need-help-from-nativemanaged-interop-expert/ 我要做的就是将此代码移植到我的框架中： http : //www.aaronblog.us/?p=36 ...这就是关于使用 DX11 在 SlimDX 中绘制文本的全部内容。 在某个时候，我希望已经弄清楚如何将这段代码泛化到我的框架中。虽然它很重。 我正在使用 SlimDX SDK（2012 年 1 月）。 htmlweb-applicationskeywordmeta-tags 4 3 回答 3 This answer is useful 2 关键字 inhtml:meta几乎被所有重要的系统忽略，因为它们通常不能很好地反映页面的内容。重要的方面包括meta name="description"（这可以用作搜索结果页面上的描述）；内容的关键字密度（不要过多使用关键字，但显然也不要太少）；关键字是否出现在 URL（最好是域名）中；有多少网站和网页链接到您的页面；引用您页面的实体的评级；内容存在多长时间（越长越好）；托管您的内容的网站多久更新一次（越频繁越好）；代理（都是机器人）可以访问您的内容的程度；您向 Google 支付了多少钱（这应该很明显）；等等。 所以，是的，简短的回答：它不起作用，但其他事情可以。 此外，请确保 Google 已知的实体链接到您的内容。如果没有，谷歌将很难找到它。您可以直接将您的网站/网页提交给 Google，但有人告诉我，如果 Google 通过引用链接本身找到您的内容，您将获得更好的初始排名。 于 2012-09-08T15:53:40.343 回答 This answer is useful 0 首先，谷歌直到一段时间才会将你的网站包含在搜索结果中。我建议使用谷歌网站管理员来增加你的网站出现在他们的搜索结果中的机会。 元元素用于解释您网站上的内容。在您的网站变得流行之前，它不会帮助您在 google 上显示您的页面。 于 2012-09-08T16:37:02.887 回答 This answer is useful 0 网络开发中有一个完整的理念，称为 SEO（或搜索引擎优化）。 要点如下： 让您的网站使用良好、干净、语义化的 HTML 标记。 写出高质量的内容。 不要有重复的内容（或确保您的 URL 重写不允许它）。 拥有与您的主题相关的外部网站会有很大帮助（例如，拥有来自该网站的 CSS-Tricks 文章的链接比发布在游戏论坛中的文章更有帮助）。 等待。谷歌将您网站的正常运行时间考虑在内，更成熟、更稳定、更老牌的网站可以获得更好的搜索结果。 您的关键字应该出现在您的内容、标题和标题中，几乎无处不在。不过也不要过度！ 这是一个很棒的网站，可以帮助您入门。 至于具体问题：标签对搜索引擎结果几乎没有影响。谷歌从字面上忽略了它们。 于 2012-09-08T16:41:58.050 回答 Related 2 ruby-on-rails-3 - Rails 3 应用程序中的 Mp3 播放器 1 php - （大）Python 项目的数据库引擎 1 css - 如何在导航“div”中定位文本。 1 ruby-on-rails - omn iauth 如何在 Rails 中拦截 /auth/facebook？ 3 xslt-1.0 - XPath 中 sum 和 product 的聚合函数 1 ios - 带有许多圆圈的 UIView 2 javascript - 有没有办法24小时禁用按钮？ 1 cakephp - CakePHP：模型返回空值 5 php - 如何在 PHP 代码中引入 JavaScript 警报窗口 3 javascript - 使用 $(document).ready 为什么必须在匿名函数中？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</slimdx.direct3d11.resource>

> ID：12332049
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, web-applications, keyword, meta-tags

我添加了元标记，如下所示。

```
<meta name="keywords" content="abc, efg" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

我期待这可以与谷歌搜索一起使用，但是当我搜索 abc（例如目的）时，我在谷歌中看不到我的网站。所以只是好奇上面的元标记不起作用。

HTML生成的文件是

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link type="text/css" rel="stylesheet" href="/faces/javax.faces.resource/themes/sam/theme.css?ln=primefaces" />
<link type="text/css" rel="stylesheet" href="/faces/rfRes/skinning.ecss?db=eAHL6rC8BQAEkAIG" />
<link type="text/css" rel="stylesheet" href="/faces/javax.faces.resource/buttonStyles.css?ln=css" />
<link type="text/css" rel="stylesheet" href="/faces/javax.faces.resource/menuss.css?ln=css" />
<link type="text/css" rel="stylesheet" href="/faces/javax.faces.resource/setFontForAll.css?ln=css" />
<script type="text/javascript" src="/faces/javax.faces.resource/js/dropdownmenu.js"></script>
<script type="text/javascript" src="/faces/javax.faces.resource/js/menu.js"></script>
<link type="text/css" rel="stylesheet" href="/faces/javax.faces.resource/menus_w.css?ln=css" />
<link type="text/css" rel="stylesheet" href="/faces/javax.faces.resource/menus.css?ln=css" />
<link type="text/css" rel="stylesheet" href="/faces/javax.faces.resource/myFont.css?ln=css" />

    <meta name="keywords" content="abc, efg, xyz" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>
        Welcome to My Site
    </title>
</head> 
```

请让我知道我缺少什么，以便在搜索时我应该在谷歌中找到我的网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:53:40.343

关键字 in`html:meta`几乎被所有重要的系统忽略，因为它们通常不能很好地反映页面的内容。重要的方面包括`meta name="description"`（这可以用作搜索结果页面上的描述）；内容的关键字密度（不要过多使用关键字，但显然也不要太少）；关键字是否出现在 URL（最好是域名）中；有多少网站和网页链接到您的页面；引用您页面的实体的评级；内容存在多长时间（越长越好）；托管您的内容的网站多久更新一次（越频繁越好）；代理（都是机器人）可以访问您的内容的程度；您向 Google 支付了多少钱（这应该很明显）；等等。

所以，是的，简短的回答：它不起作用，但其他事情可以。

此外，请确保 Google 已知的实体链接到您的内容。如果没有，谷歌将很难找到它。您可以直接将您的网站/网页提交给 Google，但有人告诉我，如果 Google 通过引用链接本身找到您的内容，您将获得更好的初始排名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:37:02.887

首先，谷歌直到一段时间才会将你的网站包含在搜索结果中。我建议使用谷歌网站管理员来增加你的网站出现在他们的搜索结果中的机会。

元元素用于解释您网站上的内容。在您的网站变得流行之前，它不会帮助您在 google 上显示您的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T16:41:58.050

网络开发中有一个完整的理念，称为 SEO（或搜索引擎优化）。

要点如下：

*   让您的网站使用良好、干净、语义化的 HTML 标记。
*   写出高质量的内容。
*   不要有重复的内容（或确保您的 URL 重写不允许它）。
*   拥有与您的主题相关的外部网站会有很大帮助（例如，拥有来自该网站的 CSS-Tricks 文章的链接比发布在游戏论坛中的文章更有帮助）。
*   等待。谷歌将您网站的正常运行时间考虑在内，更成熟、更稳定、更老牌的网站可以获得更好的搜索结果。
*   您的关键字应该出现在您的内容、标题和标题中，几乎无处不在。不过也不要过度！

**[这是一个很棒的网站，可以帮助您入门](http://searchengineland.com/ "搜索引擎土地")**。

* * *

至于具体问题：`<meta>`标签对搜索引擎结果几乎没有影响。谷歌从字面上忽略了它们。</slimdx.direct3d11.resource>

# c# - 两个非常奇怪的 SlimDX DX11 错误

> ID：12332050
> 
> 赞同：0
> 
> 时间：2012-09-08T15:33:33.373
> 
> 标签：c#, directx, slimdx, directx-11

我正处于将一些代码移植到我的框架中的最后阶段。

最新的问题与我最近发布的问题非常相似（[奇怪的“方法的类型参数无法从用法中推断出来。”](https://stackoverflow.com/questions/12238973/strange-the-type-arguments-for-method-cannot-be-inferred-from-the-usage)），其中我正在移植代码的清单中包含在 '<' 和 '>' 中的文本丢失了.

最新的违规行是：

```
 using (var resource = SlimDX.Direct3D11.Resource.FromSwapChain(swapChain, 0))
            renderTarget = new SlimDX.Direct3D11.RenderTargetView(graphics, resource); 
```

我从编译器收到以下错误：

无法从用法中推断方法“SlimDX.Direct3D10.Device.OpenSharedResource(System.IntPtr)”的类型参数。尝试明确指定类型参数。

我试图通过将我的代码更改为：

```
 using (var resource = SlimDX.Direct3D11.Resource.FromSwapChain<SlimDX.Direct3D11.Resource>(swapChain, 0))
            renderTarget = new SlimDX.Direct3D11.RenderTargetView(graphics, resource); 
```

...但现在我得到一个更奇怪的运行时错误：

“错误：找不到方法‘SlimDX.Direct3D11.Resource.FromPointerReflectionThunk’。”

初步研究表明，我可能偶然发现了一些超出我想象的东西：[http ://www.gamedev.net/topic/542095-slimdx-need-help-from-nativemanaged-interop-expert/](http://www.gamedev.net/topic/542095-slimdx-need-help-from-nativemanaged-interop-expert/)

我要做的就是将此代码移植到我的框架中： [http](http://www.aaronblog.us/?p=36) : //www.aaronblog.us/?p=36 ...这就是关于使用 DX11 在 SlimDX 中绘制文本的全部内容。

在某个时候，我希望已经弄清楚如何将这段代码泛化到我的框架中。虽然它很重。

我正在使用 SlimDX SDK（2012 年 1 月）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:57:01.860

查看您引用的 gamedev.net 线程中的最后一篇文章 - 它说您可以通过将类型参数指定为`Texture2D`.

所以你可以试试：

```
using (var resource = SlimDX.Direct3D11.Resource.FromSwapChain<Texture2D>(swapChain, 0))
    renderTarget = new SlimDX.Direct3D11.RenderTargetView(graphics, resource); 
```

# javascript - 复选框和图像基于值显示

> ID：12332052
> 
> 赞同：2
> 
> 时间：2012-09-08T15:33:47.530
> 
> 标签：javascript

我目前正在使用复选框和单选按钮，根据所选值显示图片。在大多数情况下，我已经能够使一切正常。问题：复选框选择的值显示图像，但未选中时不会删除图片。取消选中复选框时是否可以删除图片？[例子](http://webprolearner2346.zxq.net/bike_calculator/)

**JS**

```
<script>
function check_value(val, id, type) {     
    var el = document.getElementById("imgBox" + id);
    if (val>0 && val<4) { //will trigger when [1,2,3]
         el.src = "images/"+ type + val + ".jpg";    
         el.style.display = "";

  }    
  }      
</script> 
```

**HTML**

```
 <h2>Choose a bike</h2>
    <form name="builder">
        <input type="radio" name="field" onclick='check_value(1, 1, "bike")' />KAWASAKI KX 450F
        <br />
        <input type="radio" name="field" onclick='check_value(2, 1, "bike")' />2010 Yamaha Road Star S
        <br />
        <input type="radio" name="field" onclick='check_value(3, 1, "bike")' />Aprilia RSV4
        <br />
    </form>
    <img id="imgBox1" src="#" style="display:none">

  <h2>Choose a tire</h2> 
    <form name="tire">
        <input type="radio" name="field" value="1" onclick='check_value(1, 2, "tire")'
        />Michelin Pilot Road 3 Tires
        <br />
        <input type="radio" name="field" value="2" onclick='check_value(2, 2, "tire")'
        />Dunlop Roadsmart Sport-Touring Tires
        <br />
        <input type="radio" name="field" value="3" onclick='check_value(3, 2, "tire")'
        />Pirelli Scorpion Trail Tires
        <br />
    </form>
    <img id="imgBox2" src="#" style="display:none">

  <h2>Choose Accesories</h2>   
    <form name="tire">
        <input type="checkbox" name="field" value="1" onclick='check_value(1, "3a", "accessories")'
        />Chrome Front Plate
        <br />
        <input type="checkbox" name="field" value="2" onclick='check_value(2, "3b", "accessories")'
        />Jacket
        <br />
        <input type="checkbox" name="field" value="3" onclick='check_value(3, "3c", "accessories")'
        />Gloves</form>
    <div id="accessories">
        <img id="imgBox3a" src="#" style="display:none">
        <img id="imgBox3b" src="#" style="display:none">
        <img id="imgBox3c" src="#" style="display:none">
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:41:32.873

您必须检查复选框是否被选中。

要添加一个条件来查看复选框是否被选中，您需要在`check_value`函数中引用该复选框。

所以向函数添加一个额外的参数`check_value`：`sourceElement`

```
function check_value(sourceElement, val, id, type) 
```

调用此函数`this`：

```
onclick='check_value(this, 1, "3a", "accessories")' 
```

并使用 sourceElement 查看复选框是否被选中：

```
var el = document.getElementById("imgBox" + id);
if(sourceElement.checked)
{
    //What you are already doing.
}
else
{
    el.src = "";
    el.style.display = "none";
} 
```

示例：http: [//jsfiddle.net/nivas/9cKEz/](http://jsfiddle.net/nivas/9cKEz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:47:51.787

```
<script>
function check_value(el1,val, id, type) {     

    var el = document.getElementById("imgBox" + id);
    if (val>0 && val<4) { //will trigger when [1,2,3]
       if(el1.checked){  el.src = "images/"+ type + val + ".jpg";    
         el.style.display = "";}else{ el.src = "";    
         el.style.display = "none";}

  }   

  }      
</script> 
```

调用函数 onchange check_value(this, 2, "3b", "accessories")

# windows-8 - 从 Win32 与 Metro 应用程序交互

> ID：12332056
> 
> 赞同：2
> 
> 时间：2012-09-08T15:34:48.590
> 
> 标签：windows-8, wmi, microsoft-metro

我有一个传统的 Win32 程序，它使用 WMI 获取一些数据（并且无法使用 Metro 应用程序可用的 API 来获取它）。现在我想用部分信息制作一个瓷砖。据我了解，不可能简单地将这些数据从 Win32 程序发送到 Metro 应用程序。做这种事情的首选方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T01:17:18.643

没有直接的应用程序到应用程序通信方法。但是，您想要做的事情可以通过多种方式完成。您的 Win32 应用程序可以将数据写入文件系统上 Metro 风格可以访问的位置。此外，您可以使用云将您的 Win32 应用程序与 Metro 风格应用程序同步。但是，您需要小心，因为这可能会违反某些[应用程序认证要求](http://msdn.microsoft.com/en-US/library/windows/apps/hh694083)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T19:51:06.030

如果您只是为自己编写一些东西（不关心发布您的应用程序），您可能会考虑采用桌面应用程序中当前具有的功能并将其封装在 localhost 上运行的 wcf 服务中。Metro 应用程序可以调用 wcf 服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T01:20:19.720

一种选择是让您的 Win32 程序创建磁贴 XML 并存放在 Windows Azure 存储中（或者实际上可以通过 URI 访问的任何东西），然后您的 Windows 8 应用商店应用程序可以通过[定期通知](http://blogs.msdn.com/b/jimoneil/archive/2012/08/30/windows-8-notifications-using-azure-for-periodic-notifications.aspx)订阅该磁贴。

这里有一些可能与您的应用程序相关或不相关的限制 - 例如磁贴的刷新率（从 30 分钟到 1 天的离散时间段），并且在从 URL 进行轮询时机器必须连接到网络.

您也许可以合并一个[后台任务](http://www.microsoft.com/download/en/details.aspx?id=27411)来做类似的事情。

# git - 使用 GIT 的软件版本编号

> ID：12332060
> 
> 赞同：2
> 
> 时间：2012-09-08T15:35:24.867
> 
> 标签：git, versioning, git-tag

**概述**：我想在 Git 中设置自动（或至少半自动）软件版本编号。

我想为我的项目设置一些起始版本号（如 v1.0）。我知道，有`tag`这个原因。谷歌了一下，找到了一堆材料。例如：

[git - 简单指南](http://rogerdudler.github.com/git-guide/)博客 说：

> 您可以创建一个名为 1.0.0 的新标签，方法是执行要使用标签引用的提交 id 的前 10 个字符的代表`git tag 1.0.0 1b2e1d63ff`。`1b2e1d63ff`

[库德拉布斯](http://www.kudelabs.com/2011/12/22/tags-in-git-for-sane-version-numbers)说：

```
$ git tag -a 'milestone1' -m 'starting work for milestone 1, due in 2 weeks'
$ git push --tags 
```

我真的很困惑。第一种和第二种方法有什么区别：`git tag`和`git tag -a`。无法弄清楚为此目的使用哪个。

如何在裸远程仓库中设置版本号，我对其进行了 5-6 次提交和推送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:01:38.150

Git 没有自动版本编号。您必须编写自己的脚本才能使用`git tag`.

如果您提供有关您希望如何分配版本号的更多信息，我们可能会提供进一步的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:50:43.327

`git describe`默认情况下使用带注释的标签。`-a`因此，按照Kudelabs 的说法，按照惯例创建带注释的 ( )。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T09:47:20.477

```
$ git tag -a -m 
```

称为注释标签。后面的值（在“”中）`-a`用作标签名称，而后面的值`-m`用作标签描述消息。

**使用标签不是一百万次（对于内部版本号）**
仅随时间增加。

**自动标记工作流程：**
根据您使用的 IDE，通常有一个选项可以在每次构建或 ftp-upload 或其他任何内容时运行 shell 命令。每次构建项目时都使用该 shell 脚本来检查是否存在新版本（可能在 IDE 中定义）。如果是这样，您可以从 shell 运行 git 命令并添加标签。

以下是如何在 Xcode 中执行此操作：[https](https://stackoverflow.com/questions/10091310/heres-how-to-auto-increment-the-build-number-in-xcode) ://stackoverflow.com/questions/10091310/heres-how-to-auto-increment-the-build-number-in-xcode 其他 IDE 可能类似地处理该事情

# php - Codeigniter 从模型中输入会话数据以实现简单的身份验证系统

> ID：12332064
> 
> 赞同：0
> 
> 时间：2012-09-08T15:36:04.093
> 
> 标签：php, oop, codeigniter, session

试图组合一个简单的登录身份验证。已经有一段时间了，我找不到我要去哪里错了。Codeigniter 和 OOP PHP 非常新。我知道那里有身份验证库，但我对使用它们不感兴趣。

模型：

```
 function login($username, $password){

    if ($this->db->table_exists($username)){
    $this->db->where('username', $username);
    $this->db->where('password', $password);
    $query = $this->db->get($username); 

        if($query->num_rows >= 1)
        {
        return true;
        $data = array(
            'username' => $this->input->post('username'),
            'login' => true
            );
            $this->session->set_userdata($data);

        } 
    }  
    } 
```

控制器

```
function __construct(){
    parent::__construct();
    $this->logincheck();
}
public function logincheck(){
    if ($this->session->userdata('login')){
        redirect('/members');
        }
    } 
```

如果我只是从控制器回显： $this->session->all_userdata(); 我得到一个空数组。所以问题似乎是模型中的 $data 数组没有存储在会话中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:46:42.003

此代码是您的问题的一部分。您正在询问数据库驱动程序是否存在与用户名同名的表，并且还试图从同一个表中获取用户名和密码。

```
if ($this->db->table_exists($username)){
    $this->db->where('username', $username);
    $this->db->where('password', $password);
    $query = $this->db->get($username); 
```

更改用户`$username`所在`$this->db->table_exists($username);`的`$this->db->get($username);`任何表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:46:42.747

我猜您的登录功能是问题所在：

```
if ($this->db->table_exists($username)){ 
```

这看起来不对...如果您的用户名是管理员，则需要有一个管理员表等...我发布了一个我最近编写的快速示例，似乎可以完成工作：

```
public function doLogin(){
    $this->db->select('user_pass,user_id');
    $query = $this->db->get_where('users', array('user_name' => $this->input->post('login')));
    if($query->num_rows<1 || $query->row('user_pass')!=md5($this->input->post('password')))
        return false;
    $this->session->set_userdata(array('loggedin'=>true,'user_id'=>$query->row('user_id')));
    return true;
} 
```

# git - gitignore - 如何忽略 .idea/ ruby mine 目录

> ID：12332069
> 
> 赞同：4
> 
> 时间：2012-09-08T15:37:00.730
> 
> 标签：git, gitignore

我已将 .idea/ 放置在我的`~/.gitignore_global`和我的项目特定`.gitignore`文件中（并提交了后者），但我仍然认为该文件未暂存。

我怎样才能真正忽略这些文件？

我已经这样做了：

```
git config --global core.excludesfile ~/.gitignore_global 
```

但这没有帮助。

文件名没问题：

```
$ ls ~/.gitignore_global
/home/durrantm/.gitignore_global 
```

![在此处输入图像描述](../Images/765c00d663ccf4b0d3c6b43245656ba3.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T15:46:24.533

这些文件已经添加到 git 存储库中。执行`git rm --cached .idea`then 提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T09:38:26.180

也许您还必须运行过滤器分支，以完全清除整个存储库的文件夹。在 github 上，你会找到一个方便的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T05:56:57.977

尝试`git update-index --assume-unchanged`

# sql - 使用嵌套的 group by 语句或子查询来过滤此结果集

> ID：12332072
> 
> 赞同：0
> 
> 时间：2012-09-08T15:37:16.633
> 
> 标签：sql, oracle, oracle11g

这个问题是[更改此查询以对行进行分组并过滤掉除具有最小值](https://stackoverflow.com/questions/12331810/)但最后有额外位的行之外的所有行的延续......

我有以下结果集：

```
275     72.87368055555555555555555555555555555556   foo    70
275     72.87390046296296296296296296296296296296   foo    90 
113     77.06431712962962962962962962962962962963   foo    80
113     77.07185185185185185185185185185185185185   foo    60 
```

我从这个查询中得到：

```
SELECT id, (tbl2.date_modified - tbl1.date_submitted)/86400, some_value
FROM tbl1, tbl2, tbl3
WHERE tbl1.id = tbl2.fid 
AND tbl1.id = tbl3.fid 
```

请注意，有 4 行有 2 个 id。我想过滤行以仅获取第二列中的最小数字。这修复了它：

```
SELECT id, min((tbl2.date_modified - tbl1.date_submitted)/86400), max(some_value)
FROM tbl1, tbl2, tbl3
WHERE tbl1.id = tbl2.fid 
AND tbl1.id = tbl3.fid
GROUP BY tbl1.id 
```

所以我得到了：

```
275     72.87368055555555555555555555555555555556   foo    70
113     77.06431712962962962962962962962962962963   foo    80 
```

如何更改它以执行相同但不包括其他行的行`some_value=90`？IE

```
113     77.06431712962962962962962962962962962963   foo    80 
```

我想我需要一些嵌套组或嵌套查询？！

非常感谢 ：）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:56:35.737

您应该能够使用`NOT EXISTS`：

```
SELECT id, 
  min((tbl2.date_modified - tbl1.date_submitted)/86400), 
  max(some_value)
FROM tbl1, tbl2, tbl3
WHERE tbl1.id = tbl2.fid 
  AND tbl1.id = tbl3.fid
  AND NOT EXISTS (SELECT id 
                  FROM tbl2 
                  WHERE tbl1.id = tbl2.fid
                    AND some_value = 90)
GROUP BY tbl1.id 
```

或者使用 ANSI 连接语法：

```
SELECT id, 
  min((tbl2.date_modified - tbl1.date_submitted)/86400), 
  max(some_value)
FROM tbl1
INNER JOIN tbl2
   ON tbl1.id = tbl2.fid 
INNER JOIN tbl3
   ON tbl1.id = tbl3.fid
WHERE NOT EXISTS (SELECT id 
                  FROM tbl2 
                  WHERE tbl1.id = tbl2.fid
                    AND some_value = 90)
GROUP BY tbl1.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:56:37.497

您可以使用`where not exists`

```
select a.id, min((b.date_modified - a.date_submitted)/86400), max(some_value)
  from tbl1 a
  join tbl2 b
    on a.id = b.fid 
  join tbl3 c
    on a.id = c.fid
 where not exists ( select 1 
                      from tbl2
                     where fid = a.id 
                       and some_value >= 90 )
 group by a.id 
```

或者`not in`

```
select a.id, min((b.date_modified - a.date_submitted)/86400), max(some_value)
  from tbl1 a
  join tbl2 b
    on a.id = b.fid 
  join tbl3 c
    on a.id = c.fid
 where a.id not in ( select fid 
                       from tbl2 
                        and some_value >= 90 )
 group by a.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T15:57:24.730

首先，您应该使用标准的 JOIN 语法编写查询。如果您只想排除 some_value = 90 的行，请在 WHERE 子句中执行此操作：

```
SELECT id, min((tbl2.date_modified - tbl1.date_submitted)/86400), max(some_value)
FROM tbl1 join
     tbl2
     on tbl1.id = tbl2.fid join
     tbl3
     on tbl1.id = tbl3.fid
WHERE somevalue = 90
GROUP BY tbl1.id 
```

我不确定您所说的“不包括具有 some_value = 90 的其他行的行”是什么意思。如果您的意思是在有 90 的情况下排除所有结果行，则使用 HAVING 子句：

```
SELECT id, min((tbl2.date_modified - tbl1.date_submitted)/86400), max(some_value)
FROM tbl1 join
     tbl2
     on tbl1.id = tbl2.fid join
     tbl3
     on tbl1.id = tbl3.fid
GROUP BY tbl1.id
HAVING sum(case when somevalue = 90 then 1 else 0 end) > 0 
```

另一个提示：始终包含列的别名，这样每个人都知道他们来自哪个表。

# php - 文件上传/移动临时在 nginx 上不起作用

> ID：12332073
> 
> 赞同：2
> 
> 时间：2012-09-08T15:37:31.633
> 
> 标签：php, file-upload, nginx

所以，我读过[这个](https://stackoverflow.com/questions/9952329/php-file-upload-move-uploaded-file-not-working)关于 move_uploaded_file() 问题的问题。但是，在我的 apache 驱动的 localhost 灯堆栈上，它工作得很好。所以我认为这可能是文件系统/路径的事情，而不是代码的事情。

在本地将文件上传到我的网站时，它可以工作。

但是当我在 QA 服务器上（由 nginx 驱动）时，我收到了这个错误：

```
2012/09/08 15:34:21 [error] 11794#0: *5187 FastCGI sent in stderr: "files not empty
PHP Warning:  move_uploaded_file(/var/www/qa.mysite.com/mysite/app/files/maps-aprilfools.tiff): failed to open stream: No such file or directory in /var/www/qa.mysite.com/mysite/app/models/files.php on line 516
PHP Warning:  move_uploaded_file(): Unable to move '/tmp/phpvdtznP' to '/var/www/qa.mysite.com/mysite/app/files/maps-aprilfools.tiff' in /var/www/qa.mysite.com/mysite/app/models/files.php on line 516" while reading response header from upstream, client: 72.xxx.xxx.xxx, server: qa.mysite.com, request: "POST /projects/3/files HTTP/1.1", upstream: "fastcgi://127.0.0.1:9000", host: "qa.mysite.com", referrer: "http://qa.mysite.com/projects/3/files" 
```

这是我为处理上传文件而编写的代码：

```
public function fileUploadToProject( $project_id ) {
    if ($_FILES["upload-file"]["error"] > 0) {
        echo "Error: " . $_FILES["file"]["error"] . "<br />";
    } else {

        $dbSuccess      = false;

        $tmp_name       = $_FILES["upload-file"]["tmp_name"];
        $name           = $_FILES["upload-file"]["name"]; // someFile.ext
        $size           = $_FILES['upload-file']['size']; //size in bytes
        $mime           = $_FILES['upload-file']['type']; //size in bytes

        $destination    = __FILES__.'/'.$name;
        $uploaded       = move_uploaded_file( $tmp_name, $destination );

        // add entry to database.

        /*
         * null because there is no container yet.
         * We're only uploading to local
         */
        $user_container_name = null; 

        $uploaded_by = LoggedInUser::get_user_id();

        /*
         * Set this 1 when we're not dealing with our external fileserver
         */
        $isLocal = 1;

        /*
         * Probably shouldn't do this forever for storage size reasons, but for now its useful.
         */
        $localPath = $destination;

        $task_id = null;

        if( $uploaded ) {
        $dbSuccess = $this->insertFileRefService( $task_id, 
                                                  $project_id,
                                                  $user_container_name, 
                                                  $name,
                                                  $mime, 
                                                  $size,
                                                  $uploaded_by,
                                                  $isLocal,
                                                  $localPath
                );
            if($dbSuccess) {
                return true;
            } else {
                // should I rollback / delete that file?
                return false;
            }
        } else {
            return false;
        }

    }
} 
```

那么，关于在 nginx 上将临时文件移动到我的文件系统，我应该知道什么吗？还是您认为这只是一个路径问题？代码问题？

另外，请注意第 516 行是这样的：`$uploaded = move_uploaded_file( $tmp_name, $destination );`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T17:25:07.107

**除其他外，该文件夹存在权限问题。**

该`/files`路径中的目录实际上不存在。我不知何故从未意识到该文件夹​​根本不存在。哎呀。

然后，我必须确定 nginx 使用什么用户来执行 php：

```
ps aux | grep "nginx" 
```

然后我不得不到`chown`目录`files`：

```
chown -R root:userFromStep1 files 
```

然后我不得不到`chmod`目录：

```
chmod g+w files 
```

这就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:24:28.450

请尝试给出确切的路径而不是使用`__FILES__`. 因为它不会是 nginx 的问题。这将只是路径问题

# php - 如何将 sql 查询传递给 PHP 中的另一个函数

> ID：12332074
> 
> 赞同：0
> 
> 时间：2012-09-08T15:37:31.727
> 
> 标签：php, pdo

我之前试过问这个，但没有真正得到答案，所以我会尝试重新表述。我不知道如何将多行查询的结果传递给另一个函数或页面，尤其是使用 PDO。我会在原始函数中执行循环吗？

```
public function viewGallery(){
    $pQuery = 'SELECT * FROM profiles WHERE  userId = ?';
    $viewGallery = $this-> _db ->prepare($pQuery);
    $viewGallery ->bindParam(1, $id);
    $viewGallery ->execute();

    while ($get_row = $viewGallery ->fetch()){
        $id = $get_row['id'];
    }
} 
```

然后是另一个访问这个的页面：

```
 //echo the results of viewGallery(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:42:56.333

您需要从 viewGallery() 返回您想要的结果，然后在其他页面上回显它们。

您可以返回一组结果（从外观上看是 id），然后在其他页面上使用 while 循环快速浏览它们以显示它们

```
while ($get_row = $viewGallery ->fetch()){
    $id = $get_row['id'];
    $myBigArray[] = $id;
}

return $myBigArray; 
```

然后在另一页上循环并回显每个结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:43:13.713

假设您的 SQL 返回`col1`,`col2`和`col3`

您可以执行以下操作来传递结果：

```
while ($get_row = $viewGallery ->fetch())
{
    $col1 = $get_row['col1'];
    $col2 = $get_row['col2'];
    $col3 = $get_row['col3'];
    someFunctionNameThatEchoesResults($col1, $col2, $col3);
} 
```

您还可以将所有结果放入一个数组中，*然后*将其传递给另一个函数：

```
$resArray=array();
while ($get_row = $viewGallery ->fetch())
{
    $col1 = $get_row['col1'];
    $col2 = $get_row['col2'];
    $col3 = $get_row['col3'];
    $resArray[]=array($col1, $col2, $col3);
}
someFunctionNameTheShowsResults($resArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T00:56:00.403

我会简单地返回完整的数据集`fetchAll()`

像下面的东西

```
try {
    $dbh = PDO(/* Connection Info */);
    $query = "SELECT * FROM foo";
    $stmt = $dbh->prepare($query);

    $stmt->execute();

    return $stmt->fetchAll();
}catch(PDOException $e) {
    echo "ERROR: " . $e->getMessage();
} 
```

# c# - c# ASP.Net Membership WebForm 电子邮件验证

> ID：12332075
> 
> 赞同：0
> 
> 时间：2012-09-08T15:37:35.783
> 
> 标签：c#, asp.net

我正在学习如何使用 ASP.net 会员资格，我希望用户在启用他的帐户允许他登录之前先通过向他发送电子邮件来验证他的电子邮件。

这里有一个教程[http://www.4guysfromrolla.com/articles/062508-1.aspx](http://www.4guysfromrolla.com/articles/062508-1.aspx)

但是我发现很难理解，有人可以解释我如何做到这一点，如果可能的话，可以链接到 C# 教程。奇怪的是，没有很多关于 c# ASP.net 的教程在这方面使用 Membership WebForm 并创建个人资料页面等，这是您在普通网站上看到的常见内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:09:07.670

在此视频中，Joe Stagner 通过添加电子邮件验证步骤扩展了 ASP.NET 应用程序中的注册过程。

[实现注册验证模式](http://www.asp.net/web-forms/videos/authentication/implement-the-registration-verification-pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:50:14.890

因为你正在阅读11的文章。请阅读所有18篇文章。

ASP.NET 在此处的安全部分下有一些关于成员资格的教程[http://www.asp.net/web-forms/tutorials/security](http://www.asp.net/web-forms/tutorials/security)

此外，如果您倾向于观看视频教程，请尝试这些。这是一个示例视频[http://www.asp.net/web-forms/videos/how-do-i/how-do-i-set-up-the-sql-membership-provider](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-set-up-the-sql-membership-provider)

# macos - 共享网络 (Mac OS X 10.7.4) 不工作

> ID：12332076
> 
> 赞同：0
> 
> 时间：2012-09-08T15:37:44.030
> 
> 标签：macos, apache

我在我的 Mac Book Pro 中有一个用 php 开发的项目。

我从来没有遇到过 Apache 服务器的问题。它总是工作得很好。只要我打开电脑，它就可以正常启动。

但是现在，发生了一些事情，它无法正常启动。可能是因为我做错了什么。

我正在关注本手册[http://www.noppanit.com/apache-enable-mod_rewrite-on-macosx/](http://www.noppanit.com/apache-enable-mod_rewrite-on-macosx/)。只是为了打开 mod_rewrite 模块。

当我遵循这一点时：`Second go to /private/etc/apache2/user/your-username.conf Change AllowOverride None to AllowOverride all`，我尝试在系统首选项中重新启动 Apache（共享 Web），但它根本不起作用。我单击 Share Web 检查，但它没有启动。

有任何想法吗？

我在哪里可以查看任何日志以查看发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:29:32.497

对不起。只是我。由于某种原因，该`httpd.conf`文件已损坏，并且最后包含了一些额外的特殊字符，导致 Apache 无法启动。

都解决了。

# caching - 用于 Fusebox 4 的 ColdFusion 缓存解决方案

> ID：12332077
> 
> 赞同：1
> 
> 时间：2012-09-08T15:37:45.373
> 
> 标签：caching, coldfusion, methodology

我有一个使用带有 ColdFusion 的 Fusebox 4 构建的应用程序。谁能推荐一个好的缓存解决方案，即一个插件，它可以直接与这个旧版本的框架一起工作？

我一直在修改的另一个想法是获取系统中最常用的查询并应用`cachedWithin`. 该值将是存储在应用程序范围内的变量。基本上，每当我们更新数据库中任何最常访问的表时，我们`application.cachedwithin`也会更新变量。因此，每当这些表被更新时，数据就会被刷新。不经常使用的任何其他内容都将简单地查询数据库以获取内容。

此外，添加到这种非常简单的缓存方法中的方法是直接在应用程序范围内简单地存储字符串或其他常用内容。

该应用程序的大部分内容约为 30 页，由大约 200 个产品组成。所以它是一个很小的网站。

谁能推荐一个好的 Fusebox 4 缓存插件或确认这种简单的缓存方法是否是个好主意？如果没有，你能推荐一个简单的替代方案吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T06:32:03.587

我建议您使用[cfcache](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d5a.html "如何使用cfcache")将所有页面输出存储到统计 HTML 文件中。

然后在任何更新时，您可以清除更新页面的缓存或所有缓存：

```
<cfcache action="flush" />
<cfobjectcache action="clear" /> 
```

确保禁用 URL 中的 urlSessionFormat()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:24:13.080

我不确定您是否需要根据网站的大小进行缓存，除非您获得大量流量。如果您当前遇到性能问题，首先要做的是确保 Fusebox 处于生产模式，这样它就不会在每个请求上重新创建已解析的文件。

缓存查询当然应该有助于提高性能 - 当前执行查询需要多长时间？使用 Fusebox 4，调试时在 CF 中打开“报告执行时间”可能会出现问题，因为它会显着影响请求执行所需的时间。

# c++ - 重载运算符<< c++; 对`std::basic_ostream 的未定义引用

> ID：12332082
> 
> 赞同：2
> 
> 时间：2012-09-08T15:38:30.197
> 
> 标签：c++, g++, operator-overloading, undefined

我试图在我的代码中重载 operator<<。如果我注释掉我尝试在自定义类中使用 << 运算符的行，它编译得很好。该错误几乎看起来不喜欢 c++ 库（？）。

我对这个问题的所有研究都表明这是一个链接问题。大多数建议使用 g++ 而不是 gcc。我使用 g++ 作为我的编译器，我仍然得到这个错误。

代码：

```
#include <iostream>
using namespace std;

//prototype the class and the functions
template<class T> class strange;
template<class T> ostream& operator<< (ostream& osObject, strange<T>& sObject);

//begin class
template <class T>
class strange
{
    public:
        // .... function prototypes go here.
            strange(T x,T y);
            friend ostream& operator<< <> (ostream& osObject, strange<T>& sObject);

    private:
    T a;
    T b;
};
// .... your function definitions go here
template <class T>
        strange<T>::strange(T first, T second){
        a = first;
        b = second;
}

template <class T>
ostream& operator<< (ostream& osObject, const strange<T>& sObject){
        osObject << sObject.a << ", " << sObject.b;
        return osObject;
}

int main()
{
    strange<int> x1(4,6) , x2(12,2) ;
    //strange<char> y1('m','n') , y2('m','n') ;
    cout << "x1 = " << x1 << endl;
    return 0;
} 
```

错误：

```
test.cpp:(.text+0x7a): undefined reference to `std::basic_ostream<char, std::char_traits<char> >& operator<< <int>(std::basic_ostream<char, std::char_traits<char> >&, strange<int>&)'
collect2: ld returned 1 exit status 
```

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T15:47:38.700

我做了两处更改，一处是朋友定义，另一处是原型。这应该编译：

```
#include <iostream>
using namespace std;

//prototype the class and the functions
template<class T> class strange;
template<class T> ostream& operator<< (ostream& osObject, const strange<T>& sObject);

//begin class
template <class T>
class strange
{
    public:
        // .... function prototypes go here.
            strange(T x,T y);
            friend ostream& operator<< <> (ostream& osObject, const strange<T>& sObject);

    private:
    T a;
    T b;
};
// .... your function definitions go here
template <class T>
        strange<T>::strange(T first, T second){
        a = first;
        b = second;
}

template <class T>
ostream& operator<< (ostream& osObject, const strange<T>& sObject){
        osObject << sObject.a << ", " << sObject.b;
        return osObject;
}

int main()
{
    strange<int> x1(4,6) , x2(12,2) ;
    //strange<char> y1('m','n') , y2('m','n') ;
    cout << "x1 = " << x1 << endl;
    return 0;
} 
```

这在 clang、g++ 和[ideone中编译](http://ideone.com/mCBuC)

为了解释这个问题，编译器正在查看链接时间以获取以下定义：

```
 std::ostream & operator<< <int>(std::ostream &, strange<int>&); 
```

当您只有以下定义时：

```
 std::ostream & operator<< <int>(std::ostream &, strange<int> const &); 
```

这是因为您的原型（显式原型和朋友原型）与您的定义之间的沟通不畅。

# html - tr：引导下拉菜单按钮上的悬停阴影效果叠加

> ID：12332083
> 
> 赞同：0
> 
> 时间：2012-09-08T15:38:32.217
> 
> 标签：html, css, drop-down-menu, twitter-bootstrap, hover

我想将引导按钮放在具有悬停阴影效果的表格行列中。请在此处查看现场演示：http: [//jsfiddle.net/T9QHw/47/](http://jsfiddle.net/T9QHw/47/)

不幸的是，似乎阴影效果与菜单列表冲突。但是，当我将悬停效果不透明度更改为 1.0 时，它似乎运行良好。但我想将不透明度保持在 0.45。

感谢您的提前帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:06:50.593

如果我正确理解您的问题，您希望拥有引导下拉列表或组合框，但是您想将其称为具有悬停阴影效果。我看过你贴的小提琴。据我了解，引导功能内置了阴影效果，但您已经添加了额外的阴影效果：

```
tr:hover{
background:#b1b1b1;
    opacity: 0.45;

}​ 
```

只需删除上面的css，只有下拉列表会有阴影效果

# jquery - SlidesJS - 定义要显示的幻灯片数量？

> ID：12332084
> 
> 赞同：0
> 
> 时间：2012-09-08T15:38:39.377
> 
> 标签：jquery, slider, slideshow

我正在使用[SlidesJS](http://slidesjs.com)，它工作得很好，期待一件事 - 我无法指定一次显示多少张幻灯片。默认为 1，因此只能显示 1 张幻灯片。

是否可以使用此脚本指定幻灯片的数量（例如，我想同时显示 3 张幻灯片）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:43:59.880

从页面上的演示代码看，它看起来像是在滑动*'*`<div>` s 而不是`<img>`'s，这很好。如果是这样，您应该能够执行以下操作：

```
<div id="slides">
    <div class="slides_container">
        <div>
            <img src="http://placehold.it/190x270">
            <img src="http://placehold.it/190x270">
            <img src="http://placehold.it/190x270">
        </div>
        <div>
            <img src="http://placehold.it/190x270">
            <img src="http://placehold.it/190x270">
            <img src="http://placehold.it/190x270">
        </div>
    </div>
</div> 
```

如果图像不太`display:inline`好，您可以随时浮动它们：

```
#slides img{
    float:left;
} 
```

# django - 多个域，多个 django 项目，一台服务器

> ID：12332089
> 
> 赞同：3
> 
> 时间：2012-09-08T15:39:13.383
> 
> 标签：django, apache2, mod-wsgi

嗨，我是 apache 和 mod_wsgi 的新手，正在尝试弄清楚如何配置两者，以便我可以让 www.example1.com 使用 djangoproject1 和 www.example2.com 使用 djangoproject2。

我按照本[教程](http://www.lennu.net/2012/05/14/django-deployement-installation-to-ubuntu-12-dot-04-server/)将 example1.com 连接到 djangoproject1，它运行良好，但本教程并没有准确地解释正在发生的事情以及为什么我需要做某些事情。

到目前为止我所拥有的：

1）example2.com的dns区域指向服务器ip

[2) 安装 python 环境和 django 并按照教程](http://www.lennu.net/2012/05/14/django-deployement-installation-to-ubuntu-12-dot-04-server/)上的说明为 djangoproject2 启动一个新的 django 项目

我很确定我将不得不创建一个新的 wsgi 配置文件并在 /etc/apache2/sites-available/ 中添加一个名为 example2.com 的站点配置，然后启用它，但我不确定是什么否则我需要做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T19:55:02.147

You can have 2 virtual hosts in your apache configuration.

The first virtual host on (default) - port 80 second one on port 81

In the virtual host, you can specify it this way:

```
NameVirtualHost *:80

<VirtualHost *.80>
   DocumentRoot django_project_1_path
   .... other config
   WSGIScriptAlias / path_to_wsgi_config_1
</VirtualHost>

NameVirtualHost *:81

<VirtualHost *.81>
   DocumentRoot django_project_2_path
   .... other config
   WSGIScriptAlias / path_to_wsgi_config_2
</VirtualHost> 
```

# php - 如何编写此自动加载器 PSR-0/1/2 保存？

> ID：12332090
> 
> 赞同：0
> 
> 时间：2012-09-08T15:39:15.177
> 
> 标签：php, syntax, psr-0

[phphint.org](http://phphint.org/analyze)上的 PSR-0/1/2-syntax 检查器给出了这个消息

```
The first parameter of a multi-line function declaration must be on
the line after the opening bracket 
```

在这段代码上：

```
// class autoloader for PHP 5.3+
spl_autoload_register( function ($class) {
    include('classes/' . $class . '.class.php');
}); 
```

我尝试了很多，但从来没有得到这一小段代码 PSR-0/1/2-save。解决方案会是什么样子（或者 phphint 上的分析器是否过于严格？）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:45:04.943

从[手册](http://www.php.net/manual/en/language.types.callable.php)：

*从 PHP 5.3.0 开始，也可以将闭包传递给回调参数。*

所以，你所做的对我来说似乎完全没问题。

你可以看看 phphint.org 是否同意这一点：

```
$lambda = function ($class) { include('classes/' . $class . '.class.php'); };
spl_autoload_register( $lambda ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:49:15.023

我自己解决了这个问题，但解决方案非常难看。

```
spl_autoload_register( function (
    $class
) {
    include('classes/' . $class . '.class.php');
}
); 
```

也许 PSR 人应该考虑一下他们奇怪的语法。正确的解决方案看起来像这样，即使它是倒退了一步。

```
// autoload function (it's NOT "__autoload", __autoload is
// DEPRECATED since PHP 5.4!)
function autoload($class) {
    include('classes/' . $class . '.class.php');
}

// class autoloader for PHP 5.3+, registers the function that's used if a class/file
// is not found (=autoloader)
spl_autoload_register('autoload'); 
```

# javascript - 将两种不同的形式合二为一

> ID：12332092
> 
> 赞同：-2
> 
> 时间：2012-09-08T15:39:34.053
> 
> 标签：javascript, jquery

我一直在搞乱两种形式，并想将它们结合起来。每个表单都有一个单独的 JS。

我希望能够获取 Form#1 中的值并将它们放在 Form#2 的答案中。

有人可以帮忙吗？

**表格 #1**

```
$(window).load(function(){
jQuery(function($) {

    var multiTags = $("#multi");

    function handler(e) {
        var jqEl = $(e.currentTarget);
        var tag = jqEl.parent();
        switch (jqEl.attr("data-action")) {
        case "add":
            tag.after(tag.clone().find("input").val("").end());
            break;
        case "delete":
            tag.remove();
            break;
        }
        return false;
    }

    function save(e) {
        var tags = multiTags.find("input.tag").map(function() {
            return $(this).val();
        }).get().join(',');
        alert(tags);
        return false;
    }

    multiTags.submit(save).find("a").live("click", handler);
});
});

</script> 
```

**表格#2**

```
$(document).ready(function(){

    $('.submit').click(function(){
    var answers = [];
    $.each($('.field'), function() {
        answers.push($(this).val()); 
    });

    if(answers.length == 0) { 
        answers = "none"; 
    }   
    alert(answers);
    return false;                           
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:37:50.220

我会让我的评论成为答案，并详细说明。

我做了一个[简单的小小提琴](http://jsfiddle.net/charlescarver/4AfTR/2/)，你可以用它作为起点。基本上，它将抓取页面上输入的所有值并将它们分配给一个变量。从那里，您的脚本可以将该变量发送到您的邮件脚本，该脚本会处理所有内容......

```
var data = "";
$("input").each(function(index, element) {
    data += $(this).val() + ", ";
});
alert(data);​ 
```

该脚本查找所有`<input>`标签，然后通过`.val()`. 在您的表单中，您将在单击时运行它，`$("input[type=submit]").click(function(){ ... });`其中`...`将是上面的代码。显然，您不想提醒用户在框中输入了什么（毕竟是他们输入的），因此您可以将该变量传递给您的邮件脚本（我会在谷歌上搜索如何做到这一点，因为您的邮件脚本可能是用 PHP 编写的，所以谷歌类似`pass jQuery variable onto PHP`）。

小提琴：http: [//jsfiddle.net/charlescarver/4AfTR/2/](http://jsfiddle.net/charlescarver/4AfTR/2/)

* * *

> 有没有办法对输入进行分组，以便数据仅使用输入框 1、2、3（例如）。

是的，这条线在这里...

```
$("input") 
```

...查找`<input>`页面上的所有标签。如果您只想要`<input>`box并将它们的值分配给变量，那么给它们一个类并`1`更改为. 例如）只会将带有类的框分配给变量（）。`2``3``"input"``".classname"``$(".tag")``<input>``.tag``<input class="tag />`

# c# - 如何向我的引导程序指示从文件夹和内存中加载模块？

> ID：12332093
> 
> 赞同：0
> 
> 时间：2012-09-08T15:39:34.540
> 
> 标签：c#, prism, mef, bootstrapping

在我的 MEF 应用程序中，我计划从两种方式加载模块。

一种方法是这样的。

```
 protected override void ConfigureAggregateCatalog()
    {
        this.AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(PEMDAS.ModuleInit).Assembly));
        this.AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(Bootstrapper).Assembly));
        this.AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(Infrastructure.ObservableCommand).Assembly));
        this.AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(Security.SecurityModule).Assembly));
        this.AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(Tests.ModuleInit).Assembly));
    } 
```

另一个将在文件夹中查找程序集。我想这可以用这两种方式。我计划先加载文件夹，然后加载`ConfigureAggregateCatalog`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:12:03.827

如果我正确理解您的问题，您想知道如何从文件夹中的 .dll 程序集中加载模块。这可以通过[DirectoryCatalog](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.directorycatalog.aspx)来完成。

```
//First create directory catalog and load modules from .dlls.
var dirCatalog = new DirectoryCatalog(folderToSearch, "*.dll");
this.AggregateCatalog.Catalogs.Add(dirCatalog);

//Next load the rest of the modules.
ConfigureAggregateCatalog(); 
```

# macos - 在 Cocoa 中调试哔哔声

> ID：12332095
> 
> 赞同：1
> 
> 时间：2012-09-08T15:39:59.737
> 
> 标签：macos, cocoa

有时当我按下退格键时，我的应用程序...会发出哔哔声。

由于此哔声不是由我的代码引起的（我删除了对 的所有调用`NSBeep`），我怀疑原因是有一个对象响应了不应该的退格键。

如何调试哔声的来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:03:29.460

找到方法了！通过添加一个符号断点，`NSBeep`我设法找到了有问题的响应者。

# iphone - 调试应用启动时的崩溃错误

> ID：12332098
> 
> 赞同：0
> 
> 时间：2012-09-08T15:40:36.497
> 
> 标签：iphone, objective-c, ios, ipad

当我在我的设备上运行该应用程序时，我遇到了以下崩溃，但它在模拟器上运行良好：

![在此处输入图像描述](../Images/f921f9dee98d384fcaa4404802fbb07b.png)

知道我应该从哪里开始寻找吗？这对我来说非常抽象而且似乎每次运行应用程序时，我都会遇到不同的错误。这是一个更大的图像[链接](https://i.imgur.com/aNYFe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:12:55.843

可能是因为丧尸。将异常断点放在xcode中并分析。

如果您不知道如何放置异常断点，请按照以下步骤操作：

1.  按 cmd + 6 打开断点导航器
2.  点击屏幕左下方的“+”，然后选择“添加异常断点...”
3.  按完成。
4.  现在运行程序。

程序在抛出异常的地方停止。分析问题并解决它。

# php - 所有显示为“数组”的 PHP 下拉列表项

> ID：12332099
> 
> 赞同：-1
> 
> 时间：2012-09-08T15:40:45.413
> 
> 标签：php, sql, drop-down-menu

我的代码只是打算用团队名称填充两个下拉列表，并使用用户选择来操纵这些团队的积分值。举个简单的例子，选择 2 支球队并将他们相应的分数相加。

我的主要问题是尝试将用户团队选择和相应点存储在变量中，以便我可以使用它们。我不太熟悉使用数组或如何检索我想要的值。我可以轻松地检索名称，但是当我尝试检索点和名称时，它会在每个位置错误地使用“数组”填充 ddl。（它在这里在线托管：

我的代码在下面，我不确定问题是我如何创建下拉列表或我如何检索数据。

谢谢你的帮助

```
<?
require_once 'login.php';
 $db_server = mysql_connect($db_hostname, $db_user, $db_password);
 if (!$db_server) die("Unable to connect to MySQL: " . mysql_error());
 mysql_select_db($db_database)
 or die("Unable to select database: " . mysql_error());

 $sql="SELECT team, points FROM teams";
 $result=mysql_query($sql);

 $options="";

 while ($row=mysql_fetch_array($result)) {        
$team[$row["team"]]=$row["points"];  
$options.="<OPTION VALUE=\"$team\">".$team. '</OPTION>';        
 }

 if (isset($_POST['teamA'])) $teamA = $_POST['teamA'];
 else $teamA = "(Not entered)";
 if (isset($_POST['teamB'])) $teamB = $_POST['teamB'];
 else $teamB = "(Not entered)";

 $teamA = htmlspecialchars($teamA);
 $teamB = htmlspecialchars($teamB);

 ?>
 <body>
 You picked <?php echo $teamA; ?>(with <?php echo $team[$teamA]; ?> points) 
 and <?php echo $teamB; ?>(with <?php echo $team[$teamB]; ?>) 
 </br>

 <form method="post" action="ddl.php">

 Team A: 
 <SELECT NAME=teamA>
 <OPTION VALUE=0>Choose
 <?=$options?>
 </SELECT>

 Team B:
 <SELECT NAME=teamB>
  <OPTION VALUE=0>Choose
  <?=$options?>
  </SELECT>

  <input type="submit" />

  </form>
   </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:46:38.513

问题是您如何构建 SELECT 列表。正确的代码是这样的：

```
while ($row=mysql_fetch_array($result)) {        
    $options.="<OPTION VALUE=\"{$row['team']}\">".htmlspecialchars($row['team']).'</OPTION>';        
} 
```

您不需要使用`$team`变量。

# iphone - iOS上检测耳机的上下文

> ID：12332100
> 
> 赞同：2
> 
> 时间：2012-09-08T15:40:58.283
> 
> 标签：iphone, ios

我想检测用户何时拔下耳机。看来我们可以通过使用与音频路由相关的函数作为 AudioSessionAddPropertyListener 来做到这一点。

但我有个问题：

*   当应用程序打开或在后台运行时是否可以使用它？
*   如果是，如果用户让应用程序长时间在后台运行会发生什么？当用户摘下耳机时，我还能检测到吗？

# events - CQRS 中改变状态的事件

> ID：12332103
> 
> 赞同：0
> 
> 时间：2012-09-08T15:41:42.370
> 
> 标签：events, cqrs, saga

这应该很容易理解，但经过一些阅读，我仍然可以找到答案。

因此，假设用户需要更改他的手机号码，为了实现这一点，我们可能有一个命令：ChangedUserMobileNumber

持有新号码。负责处理命令的域将在聚合中执行更改并发布事件：UserMobilePhoneChanged

在另一个域中有该事件的订阅者，该用户的手机号码也包含在其聚合中，但根据我们的软件架构师的说法，事件不能旧任何数据，所以我们最终得到的结果至少可以说是相当愚蠢的：

域 1 接收到更新手机号码的命令，号码被更新并发布一个事件，同时，由于事件无法保存数据，域 1 中的命令处理程序发出另一个命令，该命令发送到域 2。该事件的订阅者也位于域 2 中，然后我们有一个 Saga 来处理事件和命令。

在实现方面，我们使用 NServiceBus，所以我们有这个 saga 来处理这些消息，并且在其中我们有这行代码，其中存储在 saga 实体中的 entity.IsMobilePhoneUpdated 字段在处理事件时发生了更改。

bool isReady = (entity.IsMobilePhoneUpdated && entity.MobilePhoneNumber != null);

实际上，Saga 是由 Domain 1 中引发的命令和事件启动的，并且在满足此条件之前，saga 将保持活动状态。

如果由我决定，我会在活动本身发送手机号码，我只是想就此获得一些其他意见。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T19:04:35.607

我不确定 UserMobilePhoneChanged 事件如何以任何方式有用，除非它包含新的电话号码。用户要求更改一个数字，事件射出它有。确实应该很简单。为什么你的架构师说事件不应该包含任何信息？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T18:25:18.677

在我设计的第一个基于事件的系统中，事件也没有数据。我也确实执行了该规则。在当时，这听起来像是一个聪明的决定。过了一会儿，我意识到它很愚蠢，因此我做了很多变通方法。这也导致了来自事件订阅者的大量查询，即使是对于微不足道的数据也是如此。在我意识到我做错了之后，我改变了这个“规则”没有问题。

事件应该具有使它们有意义所需的所有数据。此外，他们应该只拥有对该事件有意义的数据。（在 ChangePhoneNumber 消息中包含用户地址没有意义）

如果您的*架构师*强加了这样的限制，那么开发 CQRS 系统将不是一件容易的事。读取模型如何更新？由于事件没有数据，那么您要么查询某些内容以获取数据（写入端？），然后找到某种方式将命令发送到读取模型（那么发布事件的意义何在？）。要解决您的问题，您应该尝试与该架构师进行**专业**讨论，最好包括其他技术负责人，并且在不冒犯任何人的情况下尝试让他放松这一限制。

您可以使用的论点是事件溯源。事件溯源是对 CQRS 的补充，如果没有具有数据的事件，它就没有意义。甚至在使用事件溯源时，您拥有的唯一数据是存储在事件中的数据。即使您实际上没有实现事件溯源，您也可以将它的存在用作事件具有数据的原因。

找到解决人员问题的技术解决方案毫无意义。

# iphone - 应用内购买交易失败

> ID：12332105
> 
> 赞同：1
> 
> 时间：2012-09-08T15:41:54.320
> 
> 标签：iphone, objective-c, ios, ios4, in-app-purchase

我在我的应用程序中使用应用内购买，完全是消耗品。但是在我测试之前一切都很好。当我输入测试用户 ID 和密码时，它会进入 SKPaymentTransactionStateFailed。
这是我使用的一些代码：

```
- (void) funcPrepareForPurchasing:(NSString *)stringType
{
if([SKPaymentQueue canMakePayments])
{
    NSLog(@"Parental Controls are disabled");

    SKProductsRequest *pr = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject:[NSString stringWithFormat:@"com.Company.AppName.%@", stringType]]];
    pr.delegate = self;
    [pr start];
}
else
{
    UIAlertView *alertviewPR = [[UIAlertView alloc] initWithTitle:@"Parental Controls" message:@"Parental Controls are On" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:NO, nil];
    [alertviewPR show];
}
}

- (void) funcPurchaseBonusScores
{
SKPayment *payment = [SKPayment paymentWithProductIdentifier:@"com.Company.AppName.BonusScores"];
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];
[[SKPaymentQueue defaultQueue] addPayment:payment];
}

- (void) funcPurchaseBonusLife
{
SKPayment *payment = [SKPayment paymentWithProductIdentifier:@"om.Company.AppName.BonusLife"];
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];
[[SKPaymentQueue defaultQueue] addPayment:payment];
}

- (void) funcPurchaseBonusStar
{
SKPayment *payment = [SKPayment paymentWithProductIdentifier:@"com.Company.AppName.BonusStar2"];
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];
[[SKPaymentQueue defaultQueue] addPayment:payment];
}

- (void) productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
SKProduct *vp = nil;
int count = [response.products count];
NSLog(@"%i", count);
if(count)
    vp = [response.products objectAtIndex:0];
else if(!vp)
    NSLog(@"No Prodacts are available");
}

- (void) paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
for(SKPaymentTransaction *transaction in transactions)
{
    switch (transaction.transactionState)
    {
        case SKPaymentTransactionStatePurchasing:

            NSLog(@"yidulobs = purchasing");
            break;

        case SKPaymentTransactionStatePurchased:

            [[SKPaymentQueue defaultQueue] finishTransaction:transaction];

            userDefaultsInApps = [NSUserDefaults standardUserDefaults];
            if( intInApps == 1 )
                [userDefaultsInApps setInteger:5 forKey:@"keyScores"];
            else if( intInApps == 2 )
                [userDefaultsInApps setInteger:5 forKey:@"keyLife"];
            else if( intInApps == 3 )
                [userDefaultsInApps setInteger:5 forKey:@"keyStar"];
            [userDefaultsInApps synchronize];

            NSLog(@"gadaixada");

            break;

        case SKPaymentTransactionStateRestored:

            [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
            break;

        case SKPaymentTransactionStateFailed:

            NSLog(@"Error an Cancelled!!!");
            [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
            break;
    }
    }    
    } 
```

然后我尝试使用此功能购买：

```
- (void) func1
{
    intInApps = 1;
    [self funcPrepareForPurchasing:@"BonusScores"];
    [self funcPurchaseBonusScores];
}
- (void) func2
{
    intInApps = 2;
    [self funcPrepareForPurchasing:@"BonusLife"];
    [self funcPurchaseBonusLife];
}
- (void) func3
{
    intInApps = 3;
    [self funcPrepareForPurchasing:@"BonusStar2"];
    [self funcPurchaseBonusStar];
} 
```

我犯了什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:13:06.753

我在模拟器上测试它。应用程序内不起作用。有必要在设备上对其进行测试。

# django - （如何）Django 通过操作表单来防止数据注入？

> ID：12332107
> 
> 赞同：1
> 
> 时间：2012-09-08T15:41:57.143
> 
> 标签：django, security

我在我的一个项目中使用了 Django 的内置用户模型。当然，用户应该是可编辑的。由于这是最方便的解决方案，我开始使用 Django 自己的 UserChangeForm 提供用户编辑表单。UserChangeForm 基本上是 UserModel 的 ModelForm，因此可以更改 User 模型的所有字段。

我不希望用户能够更改每个字段。所以，我的第一个想法是将整个 UserChangeForm 传递到模板中，但只呈现我需要的字段（比如“用户名”和“电子邮件”）。我还希望只有超级用户能够更改用户名，因此只有在您是超级用户时才会呈现此字段。

基本代码如下所示：

**查看功能**

```
def edit_user(request, pk):
    ...    #code to ensure not everyone can edit every user
    user = User.objects.get(pk=pk)
    if request.method == 'POST':
        form = UserChangeForm(request.POST, instance=user)
        if form.is_valid:
            form.save()
           ...    #redirect
    else:
        form = UserChangeForm(instance=user)
    ...    # render template 
```

**模板中的表格**

```
<form action="{{ request.path }}" method="post">
    {% csrf_token %}
    {% if user.is_superuser %}
        {{ form.username }}
    {% endif %}
    {{ form.email }}
    <button type="submit">Save</button>
</form> 
```

现在，我的问题是：这个解决方案的安全性如何？我没有做任何事情来阻止攻击者添加例如用户名字段，即使他不是超级用户。这样，他将使用附加数据填充 POST 数据，然后将其发送到视图函数并用于更新 User 对象。这可能会变得非常危险，因为原始的 UserChangeForm 还包含一个字段“is_superuser”。

我自己尝试破解表格以测试我的怀疑。我以普通用户身份登录，通过开发者工具添加用户名输入并提交表单。结果是一个例外：

```
Traceback:
File "/Library/Python/2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Library/Python/2.7/site-packages/django/contrib/auth/decorators.py" in _wrapped_view
  20\.                 return view_func(request, *args, **kwargs)
File "/Users/joker/Development/wiki2099/wiki2099/apps/accounts/views.py" in edit_user
  69\.             form.save()
File "/Library/Python/2.7/site-packages/django/forms/models.py" in save
  364\.                              fail_message, commit, construct=False)
File "/Library/Python/2.7/site-packages/django/forms/models.py" in save_instance
  74\.                          " validate." % (opts.object_name, fail_message))

Exception Type: ValueError at /accounts/edit/12/
Exception Value: The User could not be changed because the data didn't validate. 
```

我不确定这是否意味着这种攻击是不可能的，或者我只是没有做对。我认为，CSRF 令牌可以防止此类黑客攻击，但我在文档中没有发现任何关于这件事的信息。谁能启发我？是否有任何机制可以防止攻击者使用未呈现的表单字段，它是如何工作的？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:18:11.097

据我所知，CSRF 令牌只能防止 CSRF 攻击，并且不会对更改数据的权限做任何事情。

虽然不清楚您是否只是在用户不是超级用户的情况下不呈现该字段，或者您根本没有添加它`self.fields`。您应该使用第二种方式，甚至为超级用户提供单独的表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T16:43:45.507

如果您想限制用户可以编辑的字段，那么您需要[定义一个包含模型字段子集的表单](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form)。

如果您没有在模板中呈现表单字段，但用户为其提交了数据，那么 Django 将照常处理它。查看回溯后，我不明白为什么您的尝试失败了，但是使用您描述的方法进行攻击是可能的。

csrf 保护在这里帮不了你。其目的是防止第三方欺骗您的用户向您的网站提交数据，而不是防止带有额外字段的手工制作的 POST 数据。

如果您故意不在模板中呈现字段，还有一个需要注意的问题：如果省略的字段不是必需的，那么缺少的 POST 值将被解释为空字符串，验证，并且您的数据将被擦除。

# haskell - Haskell 中的迷你编程语言

> ID：12332108
> 
> 赞同：1
> 
> 时间：2012-09-08T15:42:07.520
> 
> 标签：haskell, semantics

我正在玩 Haskell，并认为我会尝试用它创建一种简单的编程语言。现在忽略具体的语法；我专注于抽象语法和语义。

当前的语言应该由整数、整数加法、变量名和变量绑定块组成。

如果使用的变量在其使用的范围内不存在，则会引发错误。

以下是我目前的进展：

```
module ProgLang where
import Data.Map as Map

--  Classes
class Runnable d where
  run :: (Runnable a) => d -> Map String a -> Either [String] Integer

--  Data
data Name = Name String
  deriving (Eq, Ord, Show)

data Add a b = Add a b
  deriving (Eq, Ord, Show)

data Block a = Block (Map String a) a
  deriving (Eq, Ord, Show)

--  Instances
--  Integers resolve to Right Integer
instance Runnable Integer where
  run v _ = Right v

--  For Names
--    look up their expression in the scope, then evaluate
--    if name is out of scope, raise an error
instance Runnable Name where
  run (Name n) s = which (Map.lookup n s) where
    which Nothing = Left ["Variable not in scope: " ++ n]
    which (Just v) = run v s

--  For Addition
--    Run a, Run b, Add their results
--    Raise appropriate errors where necessary
instance (Runnable a, Show a, Runnable b, Show b) => Runnable (Add a b) where
  run (Add a b) s = geta (run a s) where
    geta (Left es) = Left (es ++ ["In lhs of expression: " ++ show (Add a b)])
    geta (Right a') = getb a' (run b s)
    getb _ (Left es) = Left (es ++ ["In rhs of expression: " ++ show (Add a b)])
    getb a' (Right b') = Right (a' + b')

--  For Blocks
--    Run the block's expression under a new scope
--      (merging the current with the block's scope definition)
instance Runnable a => Runnable (Block a) where
  run (Block s' e) s = result $ run e (Map.union s' s) where
    result (Left es) = Left (es ++ ["In block: " ++ show (Block s' e)])
    result (Right v) = Right v 
```

我正在`(Runnable a) => Either [String] a`使用`run`. `Left`对于错误和`Right`有效结果。

以下是示例表达式及其预期结果：

```
--  run 5 Map.empty
--  => Right 5

--  run (Name "a") Map.empty
--  => Left ["Variable not in scope: a"]

--  run (Name "a") (fromList [("a", 6)])
--  => Right 6

--  run (Add 6 3) Map.empty
--  => Right 9

--  run (Add (Name "a") 7) (fromList [("a", 10)])
--  => Right 17

--  run (Block (fromList [("a", 10)]) (Name "a")) Map.empty
--  => Right 10 
```

我从 GHCI（版本 7.4.1）收到以下错误：

```
progLang.hs:45:53:
    Could not deduce (a1 ~ a)
    from the context (Runnable a)
      bound by the instance declaration at progLang.hs:44:10-41
    or from (Runnable a1)
      bound by the type signature for
                 run :: Runnable a1 =>
                        Block a -> Map String a1 -> Either [String] Integer
      at progLang.hs:(45,3)-(47,30)
      `a1' is a rigid type variable bound by
           the type signature for
             run :: Runnable a1 =>
                    Block a -> Map String a1 -> Either [String] Integer
           at progLang.hs:45:3
      `a' is a rigid type variable bound by
          the instance declaration at progLang.hs:44:19
    Expected type: Map String a1
      Actual type: Map String a
    In the second argument of `union', namely `s'
    In the second argument of `run', namely `(union s' s)'
Failed, modules loaded: none. 
```

这个错误（据我所知）是由于 Block 的 run 功能造成的。它似乎不喜欢调用`Map.union`.

我不确定我做错了什么。有任何想法吗？我应该尝试对这个项目采用完全不同的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T16:12:05.283

问题是`run`声明的方式。

```
run :: (Runnable a) => d -> Map String a -> Either [String] Integer 
```

您可能想要的是第二个参数是`Map`从`String`到*任何*可运行文件，在同一个地图中混合在一起。但这*实际上*意味着第二个参数是`Map`从`String`到*一种特定*类型的可运行文件（只是不知道它是哪一种）。

不要使用类型类和不同的类型，而是尝试使用单一类型。

```
module ProgLang where
import Data.Map as Map

data Runnable
  = Name String
  | Add Runnable Runnable
  | Block (Map String Runnable) Runnable
  | I Integer
  deriving (Eq, Ord, Show)

run :: Runnable -> Map String Runnable -> Either [String] Integer
--  Instances
--  Integers resolve to Right Integer
run (I v) _ = Right v
--  For Names
--    look up their expression in the scope, then evaluate
--    if name is out of scope, raise an error
run (Name n) s = which (Map.lookup n s) where
  which Nothing = Left ["Variable not in scope: " ++ n]
  which (Just v) = run v s
--  For Addition
--    Run a, Run b, Add their results
--    Raise appropriate errors where necessary
run (Add a b) s = geta (run a s) where
  geta (Left es) = Left (es ++ ["In lhs of expression: " ++ show (Add a b)])
  geta (Right a') = getb a' (run b s)
  getb _ (Left es) = Left (es ++ ["In rhs of expression: " ++ show (Add a b)])
  getb a' (Right b') = Right (a' + b')
--  For Blocks
--    Run the block's expression under a new scope
--      (merging the current with the block's scope definition)
run (Block s' e) s = result $ run e (Map.union s' s) where
  result (Left es) = Left (es ++ ["In block: " ++ show (Block s' e)])
  result (Right v) = Right v 
```

我对这段代码所做的唯一更改是`run`函数的类型声明和重组。

如果您添加一个虚拟`Num`实例，`fromInteger = I`那么您也可以将整数文字用作`Runnable`s。这是您提供的测试用例的测试运行，看起来所有预期的输出都匹配：http: [//ideone.com/9UbC5](http://ideone.com/9UbC5)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T16:15:04.797

我认为问题出在`run`.

```
class Runnable d where
  run :: Runnable a => d -> Map String a -> Either [String] Integer 
```

特别是，`run`有两个*不同的*类型变量`a`和`d`；对它们的唯一限制是它们都在`Runnable`. 这意味着该函数必须适用于*任何*一对可运行类型`a`和`d`. 但是，对于块，这没有意义——`Block a`除了 a 之外，您不能运行 a ，`Map String a`因为您执行联合操作。因此，您的实现`run`并不像类型签名所希望的那样通用——您的实现意味着`a`in与in的*不同*变量`Block a`相同，但类型使您无法强制执行此操作。*`a1``Map String a1``run`*

 *实际上，您可以使用多参数类型类来解决这个问题，并使`a`in`Block a`必须与`Map`显式类型相同。事实上，这可能是理解多参数类型类的一个很好的学习练习（这正是它们听起来的样子，但也很酷）。但是，最好的解决方案是重写您的代码以完全不使用类型类——使用代数 dtta 类型来表示您的抽象语法。这是在 Haskell 中表示抽象语法的最常见和最方便的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T16:01:05.997

你错过了`Show a`约束。如果你把你的`run`外部实例声明（我将它重命名为`xrun`）像这样

```
xrun (Block s' e) s = result $ run e (Map.union s' s) where
    result (Left es) = Left (es ++ ["In block: " ++ show (Block s' e)])
    result (Right v) = Right v 
```

`ghci`说

```
*ProgLang> :t xrun
xrun
  :: (Show a, Runnable a) =>
     Block a -> Map String a -> Either [[Char]] Integer 
```

但仅仅修复约束是不够的。并排放置两种类型（类声明中的一种和实际类型`xrun`：

```
 run ::         (Runnable a) => d       -> Map String a -> Either [String] Integer
xrun :: (Show a, Runnable a) => Block a -> Map String a -> Either [String] Integer 
```

不同之处在于，您的班级承诺`d`您`run`应该为任何可运行的`a`. 但`xrun`不能满足这个要求：如果`d`是`Block Int`，它不能与任意一起使用`a`，而只能与`a :: Int`.

因此，正如其他评论者所说，您可能需要更改您的类声明。一种方法可能是存在类型：

```
data AnyRunnable = forall a . (Runnable a) => AnyRunnable a 

class Runnable d where
    run :: d -> Map String AnyRunnable -> Either [String] Integer 
```

这是一个不同的合约：现在`Map`可以包含不同类型的可运行文件。这是完整的解决方案：

```
{-# LANGUAGE ExistentialQuantification #-}
module ProgLang where
import Data.Map as Map

data AnyRunnable = forall a . (Runnable a) => AnyRunnable a 

instance Show AnyRunnable where
    show (AnyRunnable a) = show a

instance Runnable AnyRunnable where
    run (AnyRunnable a) = run a

--  Classes
class Show d => Runnable d where
   run :: d -> Map String AnyRunnable -> Either [String] Integer

--  Data
data Name = Name String
  deriving (Show)

data Add a b = Add a b
  deriving (Show)

data Block a = Block (Map String AnyRunnable) a
  deriving (Show)

--  Instances
--  Integers resolve to Right Integer
instance Runnable Integer where
  run v _ = Right v

--  For Names
--    look up their expression in the scope, then evaluate
--    if name is out of scope, raise an error
instance Runnable Name where
  run (Name n) s = which (Map.lookup n s) where
    which Nothing = Left ["Variable not in scope: " ++ n]
    which (Just v) = run v s

--  For Addition
--    Run a, Run b, Add their results
--    Raise appropriate errors where necessary
instance (Runnable a, Show a, Runnable b, Show b) => Runnable (Add a b) where
  run (Add a b) s = geta (run a s) where
    geta (Left es) = Left (es ++ ["In lhs of expression: " ++ show (Add a b)])
    geta (Right a') = getb a' (run b s)
    getb _ (Left es) = Left (es ++ ["In rhs of expression: " ++ show (Add a b)])
    getb a' (Right b') = Right (a' + b')

--  For Blocks
--    Run the block's expression under a new scope
--      (merging the current with the block's scope definition)
instance Runnable a => Runnable (Block a) where
  run (Block s' e) s = result $ run e (Map.union s' s) where
    result (Left es) = Left (es ++ ["In block: " ++ show (Block s' e)])
    result (Right v) = Right v 
```

像这样测试：

```
run (Block (fromList [("a", AnyRunnable 10)]) (Name "a")) Map.empty 
```*

# mercurial - Mercurial (TortoiseHG) 在手动删除某些文件后不会提交

> ID：12332114
> 
> 赞同：0
> 
> 时间：2012-09-08T15:42:50.593
> 
> 标签：mercurial, tortoisehg

我使用资源管理器中的搜索功能从我的项目中删除了一些数据库文件。在那之后，Mercurial 抱怨它找不到拒绝提交的文件。我尝试使用搁置工具，但随后在 TortoiseHG 2.5 版的错误报告中运行，指出无法找到保存数据库文件的节点。'我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:04:53.463

您是否可能不仅删除了工作目录中的文件，还删除了数据存储本身中的文件（`.hg/....`）？如果您在资源管理器中进行不恰当的搜索，则可以这样做。这是等效的命令行：

```
ry4an@four:~/projects/unblog$ find . -name '*.xml*'
./static/attachments/2005-09-22-isle-royale.gpx.xml
./.hg/store/data/static/attachments/2005-09-22-isle-royale.gpx.xml.i 
```

删除该 .gpx.xml 文件对我来说是完全安全且可以的，但如果我删除`.gpx.xml`了名称中包含的每个文件，那么我将从商店中删除该文件并损坏我的存储库。

尝试`hg verify`在存储库中运行，看看你得到什么输出。

# android - 在哪里可以找到 Android 的 SMS_RECEIVED 或类似内容的定义/描述？

> ID：12332118
> 
> 赞同：1
> 
> 时间：2012-09-08T15:43:03.570
> 
> 标签：android

我不知道在哪里可以找到 SMS_RECEIVED 的定义或详细描述，可以设置如下：

```
<action android:name="android.provider.Telephony.SMS_RECEIVED"/> 
```

我在网站[http://developer.android.com/reference/packages.html](http://developer.android.com/reference/packages.html)上搜索了它，但没有结果。谢谢！

还有这个：

```
<uses -permission android:name="android.permission.CHANGE_NETWORK_STATE"></uses> 
```

这种用法在`AndroidManifest.xml`文件中。让我困惑的是我怎么知道他们？在哪里可以找到它们？我只能从其他人的项目中找到它们？没有官方文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:16:31.493

我找到的答案如下：现在我在下面的源代码中找到它：

@SdkConstant(SdkConstantType.BROADCAST_INTENT_ACTION) public static final String SMS_RECEIVED_ACTION = "android.provider.Telephony.SMS_RECEIVED";

这是在文件中：`~/android-sdks/sources/android-16/android/provider/Telephony.java`对于整个文件`Telephony.java`，它被标记为`@hide`（如下）。这应该是我无法通过 javadoc 找到 SMS_RECEIVED 的原因。

```
/**
 * The Telephony provider contains data related to phone operation.
 *
 * @hide
 */ 
```

# c# - WPF MVVM Light 单元测试 ViewModels

> ID：12332123
> 
> 赞同：12
> 
> 时间：2012-09-08T15:43:23.000
> 
> 标签：c#, wpf, unit-testing, mvvm, mvvm-light

我不是 MVVM 模式的常客，这基本上是我第一次使用它。

我以前做的（“普通”WPF）是使用业务层和可能的数据层（通常包含由服务或实体框架创建的实体）创建我的视图。

现在经过一番玩弄后，我从 MVVM Light 创建了一个标准模板并执行了以下操作：

定位器：

```
public class ViewModelLocator
{
    static ViewModelLocator()
    {
        ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);

        if (ViewModelBase.IsInDesignModeStatic)
        {
            SimpleIoc.Default.Register<IUserService, DesignUserService>();
        }
        else
        {
            SimpleIoc.Default.Register<IUserService, IUserService>();
        }

        SimpleIoc.Default.Register<LoginViewModel>();
    }

    public LoginViewModel Login
    {
        get
        {
            return ServiceLocator.Current.GetInstance<LoginViewModel>();
        }
    }
} 
```

登录视图模型：

```
public class LoginViewModel : ViewModelBase
{
    private readonly IUserService _userService;

    public RelayCommand<Object> LoginCommand
    {
        get
        {
            return new RelayCommand<Object>(Login);
        }
    }

    private string _userName;
    public String UserName
    {
        get { return _userName; }
        set
        {
            if (value == _userName)
                return;

            _userName = value;
            RaisePropertyChanged("UserName");
        }
    }

    /// <summary>
    /// Initializes a new instance of the LoginViewModel class.
    /// </summary>
    public LoginViewModel(IUserService userService)
    {
        _userService = userService;

        _closing = true;
    }

    private void Login(Object passwordBoxObject)
    {
        PasswordBox passwordBox = passwordBoxObject as PasswordBox;
        if (passwordBox == null)
            throw new Exception("PasswordBox is null");

        _userService.Login(UserName, passwordBox.SecurePassword, result =>
        {
            if (!result)
            {
                MessageBox.Show("Wrong username or password");
            }
        });
    }
} 
```

绑定和命令工作正常，所以没有问题。设计和测试时间的商业模型类：

```
public class DesignUserService : IUserService
{
    private readonly User _testUser;
    private readonly IList<User> _users;

    public void Login(String userName, SecureString password, Action<Boolean> callback)
    {
        var user = _users.FirstOrDefault(u => u.UserName.ToLower() == userName.ToLower());

        if (user == null)
        {
            callback(false);
            return;
        }

        String rawPassword = Security.ComputeHashString(password, user.Salt);
        if (rawPassword != user.Password)
        {
            callback(false);
            return;
        }

        callback(true);
    }

    public DesignUserService()
    {
        _testUser = new User
        {
            UserName = "testuser",
            Password = "123123",
            Salt = "123123"
        };

        _users = new List<User>
        {
            _testUser
        };
    }
} 
```

UserData 是一个调用数据库（实体框架）的静态类。

现在我有我的测试：

```
[TestClass]
public class Login
{
    [TestMethod]
    public void IncorrectUsernameCorrectPassword()
    {
        IUserService userService = new DesignUserService();

        PasswordBox passwordBox = new PasswordBox
        {
            Password = "password"
        };
        userService.Login("nonexistingusername", passwordBox.SecurePassword, b => Assert.AreEqual(b, false));
    }
} 
```

现在我的测试不在 ViewModel 本身上，而是直接在业务层上。

基本上我有2个问题：

*   我是在正确的道路上，还是在我的模式实现中存在根本缺陷？

*   如何测试我的 ViewModel？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-08T23:00:36.613

您的视图模型有一段值得测试的相关代码，即`Login`方法。鉴于它是私有的，应该通过`LoginCommand`.

现在，有人可能会问，当您已经对底层业务逻辑进行了测试时，测试命令的目的是什么？目的是验证是否**调用**了业务逻辑并使用了**正确的参数**。

如何进行这样的测试？通过使用[模拟](http://en.wikipedia.org/wiki/Mock_object). [FakeItEasy](https://github.com/FakeItEasy/FakeItEasy)示例：

```
var userServiceFake = A.Fake<IUserService>();
var testedViewModel = new LoginViewModel(userServiceFake);

// prepare data for test
var passwordBox = new PasswordBox { Password = "password" };
testedViewModel.UserName = "TestUser";

// execute test
testedViewModel.LoginCommand.Execute(passwordBox);

// verify
A.CallTo(() => userServiceFake.Login(
    "TestUser",
    passwordBox.SecurePassword,
    A<Action<bool>>.Ignored)
).MustHaveHappened(); 
```

这样您就可以验证命令是否按预期调用业务层。请注意，`Action<bool>`在匹配参数时会忽略它 - 它很难匹配`Action<T>`并且`Func<T>`通常不值得。

几点注意事项：

*   您可能想重新考虑在视图模型中包含消息框代码（这应该属于视图，视图模型应该*请求*或*通知*视图以显示弹出窗口）。这样做，还可以通过测试视图模型来做更多的事情（例如，不需要忽略那个`Action`论点）
*   有些人会测试`INotifyPropertyChanged`属性（`UserName`在您的情况下） - 当属性值更改时会引发该事件。由于这是大量样板代码，因此强烈建议使用工具/[库](http://blog.ploeh.dk/2009/08/06/AFluentInterfaceForTestingINotifyPropertyChanged.aspx)来自动化此过程。
*   您确实希望有**两组测试**，一组用于视图模型（如上例所示），另一组用于底层业务逻辑（您的原始测试）。在 MVVM 中，VM 是一个额外的层，它可能看起来没什么用——但这就是重点——那里没有业务逻辑，而是专注于视图层的数据重新排列/准备。

# c# - C# Assembly.LoadWithPartialName 非中性文化

> ID：12332126
> 
> 赞同：0
> 
> 时间：2012-09-08T15:43:32.930
> 
> 标签：c#, embedded-resource, .net-assembly

我有两个资源文件：Resource.resx 和 Resource.fr.resx。

我希望能够通过使用以英语和法语加载资源`Assembly.LoadWithPartialName`

我可以`.\fr\Resource.resx`通过使用加载法语资源`Assembly.LoadWithPartialName`吗？

编辑1：

我目前正在使用：

```
var resMgr = new ResourceManager("Currency.Strings", assembly);
result = resMgr.GetString("Romania", CultureInfo.GetCultureInfo("fr")); 
```

除了中性语言翻译，它不会带来任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:02:45.207

按照[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/system.resources.resourcemanager.aspx#retrieving)使用`ResourceManager`.

基本上，通过约定，`Resource.resx Resource.fr.resx`您可以创建一个`ResourceManager`查看资源，当您将当前线程的文化更改为“fr”时，资源管理器开始从第二个资源中提取字符串。

# sql - 使用第三个作为链接表连接两个表，包括空条目

> ID：12332128
> 
> 赞同：5
> 
> 时间：2012-09-08T15:43:55.630
> 
> 标签：sql, oracle, join, ansi-sql

我已经查看了许多类似的问题，但尚未偶然发现/找到以下问题的正确解决方案。

给定以下三个表：

```
account
    profile_id number (nullable)
    bill_acct varchar
    status varchar (nullable)
    remarks varchar (nullable)

stage
    ecpd_profile_id number (nullable)
    bill_account varchar (nullable)
    account_class varchar (nullable)

profile
    ecpd_profile_id number
    reg_prof_id number 
```

我需要创建一个连接来选择以下内容：

```
account.bill_act, account.status, account.remarks, stage.account_class 
```

在哪里

```
profile.ecpd_profile_id = (given number) 
```

`account.profile_id`并且`profile.reg_prof_id`是等价的

`stage.ecpd_profile_id`并且`profile.ecpd_profile_id`是等价的

`stage.bill_acct`并且`account.bill_acct`是等价的

我试过以下...

```
select
    account.bill_acct,
    account.status,
    account.remarks,
    stage.account_class
from
    registration_account account
        join registration_profile profile
            on account.profile_id = profile.reg_prof_id
        join acct_stg stage
            on stage.ecpd_profile_id = profile.ecpd_profile_id
                and stage.bill_acct = account.bill_acct
where
    profile.ecpd_profile_id = ? 
```

这有效，但排除了阶段中不匹配的所有帐户条目。

我需要所有行`account.bill_acct=stage.bill_acct`，为它存在的位置附加一个附加列`stage.account_class`，否则为空。

多个连接总是让我失望。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T15:47:55.813

尝试左连接：

```
select
    account.bill_acct,
    account.status,
    account.remarks,
    stage.account_class
from
    registration_account account
    left join registration_profile profile
            on account.profile_id = profile.reg_prof_id
    left join acct_stg stage
            on stage.ecpd_profile_id = profile.ecpd_profile_id
                and stage.bill_acct = account.bill_acct
where
    profile.ecpd_profile_id = ? 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T15:50:08.987

由于您要提取独立于舞台表的所有信息（舞台表上没有匹配项），因此最适合`LEFT JOIN`以下方式使用：

```
SELECT
    account.bill_acct,
    account.status,
    account.remarks,
    stage.account_class
FROM
    registration_account account
        JOIN registration_profile profile
            ON account.profile_id = profile.reg_prof_id
       LEFT JOIN acct_stg stage
            ON stage.ecpd_profile_id = profile.ecpd_profile_id
                and stage.bill_acct = account.bill_acct
WHERE
    profile.ecpd_profile_id = ? 
```

`LEFT JOIN``LEFT JOIN,`即使右表中没有匹配项，也返回左表中的所有记录或之前的所有记录。

# c++ - 指向指针范围问题的 C++ 指针

> ID：12332132
> 
> 赞同：0
> 
> 时间：2012-09-08T15:44:21.467
> 
> 标签：c++, pointers

我有一个列表，我在其中存储指向对象指针的指针。我有一个函数，在其中创建指向这些对象的指针并将它们的地址存储在列表中（因此指向指针）。然而，一旦这个函数完成，指针不再有效（对象是但不是指针，因为它超出了范围）所以现在我的指针指针不起作用。你如何解决这个问题？

```
list<Actor**> lst;
void CreateEnemy()
{
    Actor* a = new Actor();

    lst.push_back(&a);
}

int _tmain(int argc, _TCHAR* argv[])
{
    CreateEnemy();
    // at this point the pointer to a pointer stored in lst isn't valid anymore because it went out of scope after CreateEnemy() completed.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:25:42.250

这是一个简单的示例，说明您可以根据您的评论做一些事情。

```
list<unique_ptr<Actor>> lst;

void CreateEnemy()
{
    lst.push_back(unique_ptr<Actor>(new Actor));
}

void KillRandomEnemies()
{
    for (auto& i : lst)
    {
        if (rand() % 100)
            i.reset();
    }
}    

class Projectile
{
public:
    Projectile(unique_ptr<Actor> & a)
        :actor(&a)
    {}

    bool IsTargetDead() const { return !(*actor); }

private:
    unique_ptr<Actor> * actor;
};

int main()
{
    CreateEnemy();
    Projectile proj(lst.front());

    while (something())
    {
        KillRandomEnemies();

        if (proj.IsTargetDead())
            whatever();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:47:52.560

只需使用`std::list<Actor*>`并存储指针。或者，甚至更好，`std::list<Actor>`. 这里没有任何迹象表明需要任何指针，更不用说指向指针的指针了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T16:05:22.373

试试这个：在调用 createEnemy 之后：

```
Actor * a = * lst.front();
a -> some function. 
```

这还在做问题吗？

我在自己的课堂上测试了代码，结果很好。

# apache-flex - 将 XML 数据读回弹性组件

> ID：12332133
> 
> 赞同：0
> 
> 时间：2012-09-08T15:44:28.727
> 
> 标签：apache-flex, air, flash-builder

请帮忙

我可以将三个组件中的数据保存为 xml 并且它可以工作，但是现在我正在努力使用代码在用户打开时将该数据读回组件中。这是由用户创建的本地文件。我需要有关打开事件处理程序的帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                       xmlns:s="library://ns.adobe.com/flex/spark"
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       width="734" height="389"
                       creationComplete="init();">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->

    </fx:Declarations>

    <fx:Script>
        <![CDATA[

        [Bindable]
        public var xmlData:XML=<ROOTS></ROOTS>;

        private function fnAddItem():void
        {
        var fr:FileReference = new FileReference(); 

        var ba:ByteArray = new ByteArray();
        var newXmlRow:XML=<ROOTS>
        <TXT>{txt1.text}</TXT>
        <TXTA>{txt2.text}</TXTA>
        <DTF>{txt3.text}</DTF>
        </ROOTS>;
        ba.writeMultiByte(newXmlRow, 'utf-8');
        fr.save(ba);
        }

            protected function oped_clickHandler(event:MouseEvent):void
            {
                var fr:FileReference = new FileReference();
                var ba:ByteArray = new ByteArray();
                var newXmlRow:XML=<ROOTS>
                        <TXT>{txt1.text}</TXT>
                        <TXTA>{txt2.text}</TXTA>
                        <DTF>{txt3.text}</DTF>
                        </ROOTS>;
                ba.readMultiByte(xmlData, 'utf-8');
                fr.load(ba);

            }

        ]]>
    </fx:Script>
    <s:Label x="108" y="80" text="Name"/>
    <s:Label x="91" y="222" text="Remarks"/>
    <s:Label x="108" y="116" text="text"/>
    <s:TextInput id="txt1" x="167" y="78"/>
    <s:TextArea id="txt2" x="167" y="218" height="86"/>
    <s:TextArea id="txt3" x="167" y="108" height="77"/>

    <s:Button x="53" y="242" label="save" width="90" click="fnAddItem()"/>
    <s:Button id="oped" x="73" y="271" label="open" click="oped_clickHandler(event)"/>

</s:WindowedApplication> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:05:53.190

首先，如果你想要一个对话框，你必须等待用户做出选择。选择会引发您可以捕获的事件。在处理程序中，您可以进行文件处理。试试下面的代码是否适合你。

```
 private var openedFile:File;

    private function oped_clickHandler(event:MouseEvent):void {
        openedFile = new File();
        openedFile.addEventListener(Event.SELECT, file_select);
        openedFile.browseForOpen("Please select a file...");
    }

    private function file_select(event:Event):void {
        if(openedFile != null && openedFile.exists){
            var fileStream:FileStream = new FileStream();
            fileStream.open(openedFile, FileMode.READ);
            var readXML:XML = XML(fileStream.readUTFBytes(fileStream.bytesAvailable));
            fileStream.close();
            trace(readXML.toString());
            txt1.text = readXML.TXT;
            txt2.text = readXML.TXTA;
            txt3.text = readXML.DTF;
        }
        trace(event);
    } 
```

干杯，抢劫

# jquery - 为什么 jQuery.fadeTo() 将我的水平页面滚动到顶部（=向左）？

> ID：12332142
> 
> 赞同：0
> 
> 时间：2012-09-08T15:45:42.313
> 
> 标签：jquery, fadein, horizontalscrollview, fadeto, page-jump

我正在运行一个*水平*网站。我有一个只显示一张图片的画廊。为了在更改显示图片时不必刷新整个页面，我使用了 jQuery fadeIn、load 和 fadeOut。这在 Safari 中效果很好，但在 Firefox 中它会跳转到页面的左边缘。所以我用谷歌搜索了这个问题，我试图给父 div 一个固定的宽度和高度以及位置：相对，而交换的 div 也有一个固定的宽度/高度和位置：绝对。这没有用。我发现了一篇博客文章，其中描述了类似的问题，解决方案是使用 fadeTo。现在这是我的代码，它也不起作用：

```
$("#gal").fadeTo(200, 0, function () {
    $("#gal").empty().load(galleryimage,false).fadeTo(200, 1);
}); 
```

我的错在哪里？问候！

# functional-programming - SML 函数参数模式匹配

> ID：12332143
> 
> 赞同：1
> 
> 时间：2012-09-08T15:45:54.407
> 
> 标签：functional-programming, logic, sml, smlnj

我在传递给函数的参数上使用模式匹配。可以说，该方法对于“第一级”匹配效果很好，但是任何更深入的尝试都会给出错误“ **stdIn:282.5-291.77 Error: match冗余**”

例子

```
fun nnf T = T
    | nnf F = F
    | nnf (LETTER(x)) = (LETTER(x))
    | nnf (NEG(x)) = (NEG(nnf x))
    | nnf (AND(x,y)) = (AND(nnf x, nnf y))
    | nnf (OR(x,y)) = (OR(nnf x, nnf y))
    | nnf (IMP(x,y)) = (OR(NEG(nnf x),(nnf y)))
    | nnf (NEG(NEG(LETTER(x)))) = (LETTER(x))
    | nnf (NEG(AND(LETTER(x),LETTER(y)))) = (OR(NEG(LETTER(x)),NEG(LETTER(y))))
    | nnf (NEG(OR(LETTER(x),LETTER(y)))) = (AND(NEG(LETTER(x)),NEG(LETTER(y))));
val nnf = fn : prop -> prop 
```

我得到的错误是

```
stdIn:282.5-291.77 Error: match redundant
          T => ...
          F => ...
          LETTER x => ...
          NEG x => ...
          AND (x,y) => ...
          OR (x,y) => ...
          IMP (x,y) => ...
    -->   NEG (NEG (LETTER x)) => ...
    -->   NEG (AND (LETTER x,LETTER y)) => ...
    -->   NEG (OR (LETTER x,LETTER y)) => ... 
```

所以 SML 说函数定义中的最后 3 个子句是相同的，因为它们都以“（NEG（...”）开头，即使后面的内容不同。

我该如何克服呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T16:41:18.123

该案例`NEG(x)`已经涵盖了任何可能涉及到 outermost 的案例`NEG`，因此永远无法触及其他案例。根据您实际想要实现的目标，要么删除该案例，要么将其移至更具体的案例之后（按顺序尝试案例）。

# python - 用于在 Python 中验证 xsd:ID 字符串的正则表达式？

> ID：12332146
> 
> 赞同：1
> 
> 时间：2012-09-08T15:46:37.687
> 
> 标签：python, regex, xsd

有人可以建议一个正则表达式来验证应该符合 xsd:ID （[链接](http://www.schemacentral.com/sc/xsd/t-xsd_ID.html)）的字符串。

*   xsd:ID 类型用于唯一标识 XML 文档中的元素的属性。

*   xsd:ID 值必须是 xsd:NCName。 **这意味着它必须以字母或下划线开头，并且只能包含字母、数字、下划线、连字符和句点。**

*   xsd:ID 带有几个额外的约束：

    *   它们的值在 XML 实例中必须是唯一的，无论属性的名称或其元素名称如何。

    *   一个复杂类型不能包含多个 xsd:ID 类型的属性，或任何从 xsd:ID 派生的类型。

    *   xsd:ID 属性不能指定默认值或固定值。

* * *

我正在考虑类似的事情：

```
reg=re.compile('^([a-zA-Z]|_)(\d|_|-|\.)*')  
reg.match(mystring) 
```

这看起来对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:48:00.483

最简单的方法是使用两个字符类，后者带有一个`*`乘数：

```
re.compile(r'^[a-zA-Z_][\w.-]*$') 
```

`\w`已经包括`[a-zA-Z0-9_]`. 无需围绕这些设置组，但您确实希望将表达式锚定到开始和结束 ( `^`and `$`) 以确保您正在验证整个字符串，而不仅仅是它的一部分。

# javascript - 没有 jquery ui 的脚本

> ID：12332151
> 
> 赞同：0
> 
> 时间：2012-09-08T15:46:44.383
> 
> 标签：javascript, jquery, wordpress, jquery-ui

我已经制作了一个脚本来使列的高度相同。这是我的脚本：

```
function equalHeight(group) {
   tallest = 0;
   group.each(function() {
      thisHeight = $(this).outerHeight();
      if(thisHeight > tallest) {
         tallest = thisHeight;
      }
   });
   group.outerHeight(tallest);
};

equalHeight($(".list-links li")); 
```

但我有一个问题。在我的网站中，我使用 jquery ui 核心。但我想删除那个 jquery ui。但是如果我删除 jquery ui。然后这个脚本不再工作了。为什么？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:04:33.150

正如您从文档中看到的那样，jQuery[`.outerHeight`](http://api.jquery.com/outerHeight/)不能用作 setter 方法。所以，这行代码

```
group.outerHeight(tallest); 
```

没有 jQuery UI 没有任何效果。

jQuery UI 包装`.inner*`和方法，并使用 setter 方法扩展它们，正如您在[jquery.ui.core.js](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.core.js#L166)`.outer*`下面的摘录中看到的那样。

```
...
$.fn[ "outer" + name] = function( size, margin ) {
  if ( typeof size !== "number" ) {
    return orig[ "outer" + name ].call( this, size );
  }

  return this.each(function() {
    $( this).css( type, reduce( this, size, true, margin ) + "px" );
  });
};
... 
```

例如`.outerHeight`，这些设置器设置元素的高度，没有填充、边框和可选的边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:51:27.583

至少我可以说，脚本片段与 UI 核心（小部件交互）无关。我猜您在某处调用 UI 核心小部件方法，检查错误控制台，可能是未定义的函数或非对象，一旦您删除 UI 核心。

# java - Grails未解决的依赖错误

> ID：12332155
> 
> 赞同：0
> 
> 时间：2012-09-08T15:47:31.577
> 
> 标签：java, eclipse, spring, grails, springsource

我希望有一个人可以帮助我。我试图在我的 Windows 7 Prof. 机器上安装 STS/grails，它有一个 64 位操作系统。我还在同一台机器上安装了 Ubuntu（双启动）并得到同样的错误。当我使用我的应用程序运行 IDE 时，出现错误。谁能告诉我如何让这个工作？该错误与未解决的依赖关系有关。

```
My BuildConfig is as folllows:

grails.servlet.version = "2.5" // Change depending on target container compliance (2.5 or 3.0)
grails.project.class.dir = "target/classes"
grails.project.test.class.dir = "target/test-classes"
grails.project.test.reports.dir = "target/test-reports"
grails.project.target.level = 1.6
grails.project.source.level = 1.6
grails.project.war.file = "target/${appName}-${grails.util.Environment.current.name}-${appVersion}.war"

grails.project.dependency.resolution = {
    // inherit Grails' default dependencies
    inherits("global") {
        // uncomment to disable ehcache
        // excludes 'ehcache'
    }
    log "warn" // log level of Ivy resolver, either 'error', 'warn', 'info', 'debug' or 'verbose'
    checksums true // Whether to verify checksums on resolve

    repositories {
        inherits true // Whether to inherit repository definitions from plugins
        grailsPlugins()
        grailsHome()
        grailsCentral()

        // uncomment these to enable remote dependency resolution from public Maven repositories
        mavenLocal()
        mavenCentral()
        //mavenRepo "http://uk.maven.org/maven2"
        //mavenRepo "http://snapshots.repository.codehaus.org"
        //mavenRepo "http://repository.codehaus.org"
        //mavenRepo "http://download.java.net/maven/2/"
        //mavenRepo "http://repository.jboss.com/maven2/"
    }
    dependencies {      
        compile ('org.apache.tika:tika-core:1.0')
        compile ('org.apache.tika:tika-parsers:1.0') { excludes "xercesImpl", "xmlParserAPIs", "xml-apis", "log4j" }
        runtime ('mysql:mysql-connector-java:5.1.20') { excludes "commons-logging" }
        build ('org.apache.httpcomponents:httpcore:4.1.2')
        build ('org.apache.httpcomponents:httpclient:4.1.2')
        build ('org.apache.httpcomponents:httpmime:4.1.2')
        runtime ('org.apache.httpcomponents:httpcore:4.1.2')
        runtime ('org.apache.httpcomponents:httpclient:4.1.2')
        runtime ('org.apache.httpcomponents:httpmime:4.1.2')
    }

    plugins {
        runtime ":hibernate:$grailsVersion"
        runtime ":jquery:1.7.2"
        runtime ":resources:1.2-RC1"

        test ":spock:0.6"

        build ":tomcat:$grailsVersion"
    }
} 
```

以下是错误：

命令以错误代码终止（请参阅输出的详细信息）

## 系统输出

```
| Loading Grails 2.0.4
| Configuring classpath
:: problems summary ::
:::: WARNINGS
module not found: org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0.9.0

==== grailsPlugins: tried

-- artifact org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0.9.0!com.springsource.org.apache.tomcat .jdbc.jar:

C:\Users\Delerium\Documents\workspace-sts-3.0.0.RELEASE\lmn-foresthills-feature-236/lib/com.springsource.org.apache.tomcat.jdbc-1.0.9.0.jar

==== grailsHome: tried

C:\grails\grails-2.0.4/lib/org.apache.tomcat/com.springsource.org.apache.tomcat.jdbc/ivy-1.0.9.0.xml

-- artifact org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0.9.0!com.springsource.org.apache.tomcat .jdbc.jar:

C:\grails\grails-2.0.4/lib/org.apache.tomcat/com.springsource.org.apache.tomcat.jdbc/jars/com.springsource.org.apache.tomcat.jdbc-1.0.9.0.jar

C:\grails\grails-2.0.4/lib/org.apache.tomcat/com.springsource.org.apache.tomcat.jdbc/bundles/com.springsource.org.apache.tomcat.jdbc-1.0.9.0.jar

==== grailsHome: tried

C:\grails\grails-2.0.4\src\libs/com.springsource.org.apache.tomcat.jdbc-1.0.9.0.xml

-- artifact org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0.9.0!com.springsource.org.apache.tomcat .jdbc.jar:

C:\grails\grails-2.0.4\src\libs/com.springsource.org.apache.tomcat.jdbc-1.0.9.0.jar

==== grailsHome: tried

C:\grails\grails-2.0.4\dist/com.springsource.org.apache.tomcat.jdbc-1.0.9.0.xml

-- artifact org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0.9.0!com.springsource.org.apache.tomcat .jdbc.jar:

C:\grails\grails-2.0.4\dist/com.springsource.org.apache.tomcat.jdbc-1.0.9.0.jar

==== grailsHome: tried

C:\Users\Delerium\.grails\2.0.4\cached-installed-plugins/com.springsource.org.apache.tomcat.jdbc-1.0.9.0.xml

-- artifact org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0.9.0!com.springsource.org.apache.tomcat .jdbc.jar:

C:\Users\Delerium\.grails\2.0.4\cached-installed-plugins/com.springsource.org.apache.tomcat.jdbc-1.0.9.0.jar

==== grailsHome: tried

-- artifact org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0.9.0!com.springsource.org.apache.tomcat .jdbc.jar:

C:\grails\grails-2.0.4/plugins/com.springsource.org.apache.tomcat.jdbc-1.0.9.0.jar

==== grailsCentral: tried

http://plugins.grails.org/grails-com...bc-1.0.9.0.pom

-- artifact org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0.9.0!com.springsource.org.apache.tomcat .jdbc.jar:

http://plugins.grails.org/grails-com...bc-1.0.9.0.jar

==== http://repo.grails.org/grails/plugins: tried

http://repo.grails.org/grails/plugin...bc-1.0.9.0.pom

-- artifact org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0.9.0!com.springsource.org.apache.tomcat .jdbc.jar:

http://repo.grails.org/grails/plugin...bc-1.0.9.0.jar

==== http://repo.grails.org/grails/core: tried

http://repo.grails.org/grails/core/o...bc-1.0.9.0.pom

-- artifact org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0.9.0!com.springsource.org.apache.tomcat .jdbc.jar:

http://repo.grails.org/grails/core/o...bc-1.0.9.0.jar

==== grailsCore: tried

http://svn.codehaus.org/grails/trunk...bc-1.0.9.0.pom

-- artifact org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0.9.0!com.springsource.org.apache.tomcat .jdbc.jar:

http://svn.codehaus.org/grails/trunk...bc-1.0.9.0.jar

==== localMavenResolver: tried

C:\Users\Delerium/.m2/repository/org/apache/tomcat/com.springsource.org.apache.tomcat.jdbc/1.0.9.0/com.springsource.org.apache.tomcat.jdbc-1.0.9.0.pom

-- artifact org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0.9.0!com.springsource.org.apache.tomcat .jdbc.jar:

C:\Users\Delerium/.m2/repository/org/apache/tomcat/com.springsource.org.apache.tomcat.jdbc/1.0.9.0/com.springsource.org.apache.tomcat.jdbc-1.0.9.0.jar

==== mavenCentral: tried

http://repo1.maven.org/maven2/org/ap...bc-1.0.9.0.pom

-- artifact org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0.9.0!com.springsource.org.apache.tomcat .jdbc.jar:

http://repo1.maven.org/maven2/org/ap...bc-1.0.9.0.jar

::::::::::::::::::::::::::::::::::::::::::::::

:: UNRESOLVED DEPENDENCIES ::

::::::::::::::::::::::::::::::::::::::::::::::

:: org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0.9.0: not found

::::::::::::::::::::::::::::::::::::::::::::::
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:27:32.037

它可能是插件的依赖项。发布您的 application.properties。

要解决它，请将这些行添加到您的 BuildConfig.groovy 存储库中：

```
grails.project.dependency.resolution = {
    repositories {
        mavenRepo "http://repository.springsource.com/maven/bundles/release"
        mavenRepo "http://repository.springsource.com/maven/bundles/external"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:46:38.513

org.apache.tomcat#com.springsource.org.apache.tomc at.jdbc;1.0

好像有空位？我猜tomc应该是tomcat？所以修复依赖拼写错误，你应该没问题

org.apache.tomcat#com.springsource.org.apache.tomcat.jdbc;1.0

# jquery - $.ajax 仅在 put alert() 时有效

> ID：12332163
> 
> 赞同：2
> 
> 时间：2012-09-08T15:48:10.830
> 
> 标签：jquery, ajax

我试图在以前用 AJAX 加载的内容中加载内容。我把代码

**与负载（）：**

```
jQuery("#contentpage").on("submit", "#loginform", my = function() {
    $("#contentpage").load("/logincheck.jsp");
    alert("this is required ");
}); 
```

**使用 $.ajax()：**

```
jQuery("#contentpage").on("submit", "#loginform", function() {

    $.ajax({
        url: '/logincheck.jsp',
        success: function(data) {
            $('#contentpage').html(data);
        }
    });

    alert("this is required ");
}); 
```

`#loginform`是一个加载了以前的 AJAX 请求的 HTML 表单，我成功地访问了`.on()`函数。

但问题是当我提交时`#loginform` *没有*放置`alert('this is required')`框然后刷新整个页面。里面`#contentpage`的内容也没有改变。

但是，如果我对 put 做同样的事情，它的工作正常，内容会在不刷新整个页面的情况下`alert("this is required")`加载。`#contentpage`

这是时间问题吗？Ajax 请求需要时间并且是异步的？如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T15:52:10.220

你试过这个吗？

```
 jQuery("#contentpage").on("submit","#loginform",my=function(event){ 
             event.preventDefault();
             $("#contentpage").load("/logincheck.jsp");
             alert("this is required ");
        }); 
```

这至少应该阻止页面刷新，并且还可以解决其他问题。祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-12-16T06:13:53.257

异步键是默认的`true`，应该将其更改为`false`

```
$.ajax({
    async:false,
    url: '/logincheck.jsp',
    success: function(data) {
        $('#contentpage').html(data);
    }
}); 
```

# php - Wordpress 标题和子菜单样式对 IE 的挫败感

> ID：12332165
> 
> 赞同：0
> 
> 时间：2012-09-08T15:48:20.307
> 
> 标签：php, javascript, html, css, wordpress

我正在为 Wordpress 网站开发一个新主题。大部分都完成了（剩下的一些小调整），但我在 IE 顶部的菜单上遇到了重大问题。它不会居中，并且主页上的子菜单堆叠很奇怪。在其他每一页上，它都居中，子菜单向右堆叠，但被推到右侧。这让我很沮丧，因为主页上的菜单和其他所有页面的代码和 CSS 完全相同

当然，它在除 IE 之外的所有其他浏览器中都可以正常工作。

这是网站：[http ://www.xylemwsus.com](http://www.xylemwsus.com)

这是该主题的 github 存储库：[https ://github.com/kilokai/Xy-Microsite-new-theme](https://github.com/kilokai/Xy-Microsite-new-theme)

所有页面调用相同的页眉（副本只是旧页眉）和页脚：header.php 和 footer.php

Homepage 调用 page-home.php 作为其模板页面。在“我们的品牌”下，这 6 家公司都调用 _landing-company.php 作为他们的模板并调用 sidebar.php。产品页面（公司页面侧边栏中的链接）都调用_product.php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:00:55.430

IE 正在进入 Quirks 模式，因为您在 Doctype 声明之前输出了以下代码；

```
<span id="homepage-flag" style="display: none"></span> 
```

摆脱它并从那里拿走它。

# javascript - 判断javascript中的html表对象是否有？

> ID：12332166
> 
> 赞同：0
> 
> 时间：2012-09-08T15:48:39.550
> 
> 标签：javascript, html-table

我想确定网页上的任何 html 表格是否存在标签。如果它不存在，我想在 html 中插入 colgroup 标签。我在 javascript 中有 table 对象，但我没有找到解决这个问题的任何方法。请帮忙 ！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T16:06:55.787

见[http://jsfiddle.net/jv5yQ/](http://jsfiddle.net/jv5yQ/)

只需使用`.getElementsByTagName('colgroup')`：

HTML：

```
<table id="t1">
    <tr>
        <td>1-1</td>
        <td>1-2</td>
    </tr>
    <tr>
        <td>2-1</td>
        <td>2-2</td>
    </tr>
</table>

<table id="t2">
    <colgroup style="background-color:#F00"></colgroup>
    <colgroup style="background-color:#00F"></colgroup>
    <tr>
        <td>1-1</td>
        <td>1-2</td>
    </tr>
    <tr>
        <td>2-1</td>
        <td>2-2</td>
    </tr>
</table> 
```

JavaScript：

```
var ids=['t1','t2'];
for(var i=0;i<ids.length;i++){
    var el=document.getElementById(ids[i]),
        cond=el.getElementsByTagName('colgroup').length===0;
    if(cond){
        var col1=document.createElement('colgroup'),
            col2=col1.cloneNode(false);
        col1.style.background='#0f0';
        col2.style.background='#f0f';
        el.insertBefore(col2,el.firstChild);
        el.insertBefore(col1,el.firstChild);
    }

} 
```

# batch-file - BATCH：如果选择不等于，重新开始

> ID：12332169
> 
> 赞同：1
> 
> 时间：2012-09-08T15:49:14.890
> 
> 标签：batch-file, cmd

尝试在批处理文件中设置一些基本验证，但不断收到语法错误。基本上，3 个选择，如果输入的不是 1、2 或 3，我想从头开始。

```
set input=
set /p input=Choice: 
if %input%==1 goto 1
if %input%==2 goto 2
if %input%==3 goto 3
if not %input%==1
if not %input%==2
if not %input%==3
@echo Not a valid choice
goto Start 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:01:03.073

您根本不需要这三个`if not`语句。

```
:start
set input=
set /p input=Choice: 
if %input%==1 goto 1
if %input%==2 goto 2
if %input%==3 goto 3
@REM If you got here, it wasn't 1, 2, or 3
@echo Not a valid choice
goto start

:1
DoWhatever
goto end

:2
DoSecondWhatever
goto end

:3
DoThirdThing

:end 
```

# function - 传递函数时出现 Fortran 错误

> ID：12332177
> 
> 赞同：0
> 
> 时间：2012-09-08T15:49:55.133
> 
> 标签：function, fortran

我正在尝试编写一个简单的 Fortran 代码来计算 h = g(f(x))。x 是长度=2 的向量。

```
module m1
implicit none
contains

function f(x)
implicit none
real::f(2),x(2)
f(1)=x(1)-x(2)
f(2)=exp(x(1))-x(2)**2
end function f

function g(ff)
implicit none
real::g(2),x1(2),ffreslt(2)
interface
    function ff(x)
    implicit none
    real::x(2),ff(2)
    end function ff
end interface
ffreslt=ff(x1)
g(1)=1-ffreslt(1)
g(2)=2*ffreslt(1)**2-3*ffreslt(2)+4.2
end function g

end module m1

program hgf
use m1
implicit none
real::x1(2),h(2)
x1 = (/0.55,2.47/)
h = g(f(x1))

write(*,*) h

end program hgf 
```

但是，我收到此错误消息：

```
h = g(f(x1))
      1
Error: Actual parameter 'ff' at <1> is not a PROCEDURE 
```

我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T15:55:55.440

在对 g() 的调用中，您没有传递函数 f()，而是使用 x1 的值调用函数 f() 的结果。

请查看[有关从 F77 转换为 F90 的说明](http://www.nccs.nasa.gov/tutorials/f90studentnotes.pdf)并查看第 24 页，第 3.2.7 节。

还要检查 this question on [procedure as arguments](http://objectmix.com/fortran/304367-procedures-arguments-set-dummy-arguments.html)。

# node.js - 启动时的 Linux 启动屏幕

> ID：12332183
> 
> 赞同：0
> 
> 时间：2012-09-08T15:50:14.500
> 
> 标签：node.js, socket.io, gnu-screen, startupscript

我正在尝试在启动时启动屏幕会话，所以我在 rc.local 的末尾添加了我的脚本

```
 screen -S ws sh -x /var/includes/websocket/start.sh; 
```

但这不起作用。我的目标是能够在屏幕会话（名为 ws 的屏幕）中运行 2 个命令：

start.sh 内容：

```
 cd /var/includes/websocket

   node /var/includes/websocket/websocketServer.js 2>&1 >> /var/log/websocket.log' websocket 
```

我也尝试创建一个 cronjob 但仍然无法启动脚本。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:26:45.220

我找到了解决方法！似乎 rc.local 无法识别“节点”，所以我只需要在命令中使用完整目录：

代替

```
node /var/includes/websocket/websocketServer.js 
```

利用

```
/usr/local/bin/node /var/includes/websocket/websocketServer.js 
```

# r - 在 R 中逼近两条不同的曲线

> ID：12332185
> 
> 赞同：0
> 
> 时间：2012-09-08T15:50:51.983
> 
> 标签：r, newtons-method

我在 R 中有两个不同的密度图——其中一个是观察到的数据 (x1)，另一个是从泊松分布中随机生成的具有观察到的平均值 (x2) 的数据。我想近似曲线，即使预期曲线看起来更像观察到的数据，因为它在某些区域被高估和低估。我该怎么做呢？我知道你可以通过使用获得曲线之间的绝对值

```
abs (x1 - x2) 
```

但是我不太确定如何进行。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:10:40.003

我认为如果你想找到一个分析解决方案，你可能只需要玩一会儿这些函数。否则，您似乎可以使用变分法来做到这一点。也就是说，您取两个函数下面积之间的差异，然后将其最小化（取导数）。形式上，您需要采用二阶导数来确定它是最大值、最小值还是拐点。但是，如果函数适合数据，则在这种情况下不需要。我不确定寻找分析解决方案的最佳程序是什么，但也许这会让你走上正确的轨道。只是一个反弹的想法

# javascript - SVG 的渲染可以推迟到我完成操作吗？

> ID：12332186
> 
> 赞同：1
> 
> 时间：2012-09-08T15:50:56.387
> 
> 标签：javascript, svg

我正在使用 SVG 构建一个在浏览器中运行的复杂 GUI。SVG 有许多可以操作的对象。

只要我同时操作一个或几个对象，一切都会顺利进行，但是当我开始移动大组对象时，事情开始变得非常缓慢。

我通过更改每个属性来移动 SVG 元素。我认为这很慢，因为浏览器每次更改其 DOM 时都会渲染 SVG，因此要移动一组元素，SVG 的渲染次数与要移动的元素一样多。这个对吗？

我做了一个实验，我认为证明了我的观点。如果我将要移动的所有元素分组到一个 SVG 组中，然后通过更改其变换属性来移动该组。动作非常顺利。在这种情况下，我只更改 SVG DOM 一次，并且 SVG 只重新渲染一次。

问题是我不能使用这种技术，因为元素并不是一直以相同的方式分组的。每次重新组合元素似乎增加了很多不必要的复杂性。

我想知道是否有办法推迟 SVG 的渲染，直到我移动所有对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:07:25.640

也许您可以尝试简单地将其从 dom 树中删除，然后在更改后将其添加回来，例如：

```
 <!DOCTYPE html>
<html>
    <script type="text/javascript">
        function change () {
            var mySVG = document.getElementById('mySVG'),
                circle = document.getElementById('myCircle'),
                body = document.body;
            body.removeChild(mySVG);
            circle.setAttribute('cx', '150');
            circle.setAttribute('cy', '100');
            circle.setAttribute('r', '80');
            body.appendChild(mySVG);
        }
    </script>
    <body>
        <button onclick="change();">change</button>
        <svg id="mySVG" xmlns="http://www.w3.org/2000/svg" version="1.1">
            <circle id="myCircle" cx="100" cy="50" r="40" stroke="black" stroke-width="2" fill="red" />
        </svg>
    </body>
</html> 
```

问候，

本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T09:42:05.303

浏览器肯定会检测到对 DOM 的更改，但它们不会在每次更改时重新渲染整个 svg，它们都会排队（批处理）渲染操作（通常渲染发生在执行修改的脚本片段完成执行后的某个时间）。如果每次更改都触发了某种布局/重排操作（基本上是树遍历），我不会感到惊讶，以确定要绘制的内容和位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T19:24:39.307

从您的问题描述来看，这听起来像是一个拖放界面，您可以在其中选择多个元素并移动它们。它可能不是拖放，但原理以相同的方式起作用。您有三个事件，开始、移动和结束，在拖放中它看起来像这样：

```
start = function(e) {
  //capture the initial position
}

move = function(e) {
  //change the x and y attributes or transform attr
}

end = function(e) {
  //finish up
}

svg.addEventListener("mousedown", start)
svg.addEventListener("mousemove", move)
svg.addEventListener("mouseup", end) 
```

现在，如果您只想在操作结束时更改属性，您可以：

```
start = function(e) {
  //capture the initial position
}

end = function(e) {
  //change the x and y attributes or transform attr
  //finish up
}

svg.addEventListener("mousedown", start)
svg.addEventListener("mouseup", end) 
```

因此，在这种情况下，事件只会在两次触发时触发，一次是按下鼠标按钮，第二次是释放它。

# asp.net - 在 CSS 中拉伸背景图像

> ID：12332191
> 
> 赞同：4
> 
> 时间：2012-09-08T15:51:33.713
> 
> 标签：asp.net, html, css, image

> **可能重复：**
> [拉伸和缩放 CSS 图像背景 - 仅使用 CSS](https://stackoverflow.com/questions/1150163/stretch-and-scale-a-css-image-background-with-css-only)

初学者问题：这可能是一个基本问题，我可能会遗漏一些基本想法。我已经看到了这个问题，但我认为这与我的问题不相关。我想在 CSS 中拉伸我的背景图像。这是我的 CSS 代码
**CSS：**

```
.BackgroundColor
{
    background-position: center center;
    margin: 0px 0px 0px 0px;
    background-image: url('Content/Tulips.jpg');//this image i want to stretch
    background-repeat: no-repeat;
    width: 1000px;
    height: 1000px;
    padding: 0px 0px 0px 0px;
} 
```

这是我的 HTML 代码
**HTML：**

```
<div class="BackgroundColor">
    <div class="outerMost">
    <div class="heading" id="loginheading">
      Show Login  
    </div>
    <div class="MainSect">
        <div class="Label">
        <asp:Label ID="usernameLabel" runat="server" Text="UserName" ClientIDMode="Static"></asp:Label>
        </div>
        <asp:TextBox ID="UsernameTextBox" runat="server" CssClass="textboxes" ClientIDMode="Static"></asp:TextBox>
        <br />
        <asp:Label ID="PasswordLabel" runat="server" Text="Password" CssClass="Label" ClientIDMode="Static"></asp:Label>
        <asp:TextBox ID="TextBox2" runat="server" CssClass="textboxes"></asp:TextBox>
        <br />
        <asp:Button ID="LoginButton" runat="server" Text="Login"  
            BackColor="#00CCFF" BorderStyle="Solid" CssClass="loginButton" ClientIDMode="Static" />

    </div>
    <br />
    <br />
    <div>
        <asp:Label ID="Label1" runat="server" Text="Date of Birth" CssClass="Label"></asp:Label>
        <asp:TextBox ID="CalenderTextBox" runat="server" ClientIDMode="Static" CssClass="textboxes"></asp:TextBox>
    </div>
    <div id="tabSection">
        <ul>

            <li><a href="#basicInfo">Basic info</a></li>
            <li><a href="#Products">Products</a></li>
            <li><a href="#SavingAccount">Depositer</a></li>
        </ul>
        <div id="basicInfo">
        Basic Info will be mentioned here and bla bla bla
        </div>
        <div id="Products">
        Products and other releases should be mentioned here

        </div>
        <div id="SavingAccount">
        Information about saving account should be mentioned here and bla bla bla
        </div>
    </div>
    </div>
    </div> 
```

所以我想在页面上设置背景图片。忽略内部代码。请帮助我拉伸图像，因为我`Style builder`没有显示任何关于拉伸图像的属性。我提到的上述链接是在 Html 中拉伸图像，但我想在 CSS 中进行。
**编辑：** 请告诉我如何在 Visual Studio 中包含 CSS3，因为我的 CSS 编辑器显示为 CSS2.1
谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T15:55:03.887

在 CSS3 中，您可以简单地使用[这里](http://www.w3.org/TR/css3-background/)`background-size: cover`记录的。

> **cover**：缩放图像，同时保留其固有纵横比（如果有），使其宽度和高度都可以完全覆盖背景定位区域。

否则请参阅此[答案](https://stackoverflow.com/a/1208392/944681)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-08T15:53:27.613

我认为这就是你要找的：

```
background-size: 100%; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-08T15:55:35.953

你可以使用背景尺寸：

[http://www.w3schools.com/cssref/css3_pr_background-size.asp](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

这是它的演示：

[http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_background-size2](http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_background-size2)

```
background-size:100%; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-08T15:55:46.213

采用：

```
 background: url(yourimage.jpg) no-repeat;
  background-size: 100%; 
```

那应该行得通。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-08T15:54:54.663

对于在背景图像上拉伸图像应该是 100%" 在你的 css 我们把 px 更改为 % 还添加背景大小 = 100% 你的 css 变成

```
.BackgroundColor
{
background-position: center center;
margin: 0px 0px 0px 0px;
background-image: url('Content/Tulips.jpg');//this image i want to stretch
background-size: 100%;
background-repeat: no-repeat;
width: 100%;
height: 100%;
padding: 0px 0px 0px 0px; 
```

}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-08T17:09:39.600

只是为了其他人如果遇到同样的问题会发现它。因为 SO 用户没有回答我的部分问题。我已经搜索并找到了答案，所以我正在回答这部分，
这是任何人都可以下载 CSS3 智能感知模式的链接。
[http://visualstudiogallery.msdn.microsoft.com/7211bcac-091b-4a32-be2d-e797be0db210](http://visualstudiogallery.msdn.microsoft.com/7211bcac-091b-4a32-be2d-e797be0db210)
安装后，Visual Studio 将在 CSS 编辑器中显示 CSS3，您可以从那里选择它。然后使用该属性

```
background-size: 100%; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-08T15:58:31.477

我会使用 100% 的宽度和高度。

# python - 在位置参数之前使用默认参数

> ID：12332195
> 
> 赞同：14
> 
> 时间：2012-09-08T15:52:40.207
> 
> 标签：python

我正在学习在 python 中使用位置参数，并尝试了解它们在与默认参数混合时如何工作：-

```
def withPositionalArgs(ae=9,*args):
    print 'ae= ', ae
    print 'args = ', args

a=1
b=2
c=[10,20]

withPositionalArgs(a,b,c) 
```

这给了我输出：

```
ae=  1
args =  (2, [10, 20]) 
```

如您所见，`a`被认为是为 传递的值`ae`，并且`b`被`c`认为是位置参数。

所以，我现在试图`10`在`ae`调用时分配`withPositionalArgs`：

```
withPositionalArgs(ae=10,b,c) 
```

但是，我做不到。我得到错误：

```
SyntaxError: non-keyword arg after keyword arg 
```

**我的问题是：**

我做得对吗？在 python 函数中的位置参数之前是否允许使用默认参数或使用的好习惯？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-08T15:55:53.523

在 Python2 中，不允许将具有默认值的参数放在位置参数之前。

位置参数必须首先出现，然后是具有默认值的参数（或者，在调用函数时，关键字参数），然后`*args`是 ，然后是`**kwargs`。

函数定义和函数调用都需要此顺序。

在 Python3 中，顺序已经放宽了。（例如，`*args`可以出现在函数定义中的关键字参数之前。）[请参阅 PEP3102](http://www.python.org/dev/peps/pep-3102/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T16:47:43.767

我认为我们应该区分默认值与传入任意参数/键值对。没有默认值的行为是相同的：

```
def f(ae,*args, **kwargs):
    print 'ae     = ', ae
    print 'args   = ', args
    print 'kwargs = ', kwargs 
```

我们写这个的方式意味着传入`f`元组的第一个参数`args`，即`f(1,2,3,a=1,b=2)`（序列为显式参数，*args，**kwargs。）这里：`ae = 1, args = (2,3), kwargs = {'a': 1, 'b': 2}`。

如果我们尝试传入，`f(1,2,3,a=1,ae=3)`则会抛出 a `TypeError: f() got multiple values for keyword argument 'ae'`，因为`ae`尝试更改的值两次。

.

解决此问题的一种方法是仅`ae`在明确规定时进行设置，我们可以（在 def 行之后）：

```
def g(*args, **kwargs):
    kwargs, kwargs_temp = {"ae": 9}, kwargs
    kwargs.update(kwargs_temp) #merge kwargs into default dictionary 
```

而这一次`g(1,2,3,a=1,ae=3)`集合`args=(1,2,3), kwargs={a=1,ae=3}`。

*但是，我怀疑这不是最佳实践......*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-27T18:27:27.523

Python3 有宽松的排序。

现在您可以执行以下操作：

```
def withPositionalArgs(*args, ae=9):
    print('ae=', ae)
    print('args =', args)
a=1
b=2
c=[10, 20]
withPositionalArgs(a, b, c, ae=7) 
```

# linux - Subversion svn+ssh 访问和禁止通过SSH从服务器复制文件

> ID：12332199
> 
> 赞同：0
> 
> 时间：2012-09-08T15:53:20.053
> 
> 标签：linux, svn, ssh

系统环境：

服务器：Centos 6.2

客户端：Windows + TortoiseSVN + putty

我在centos中安装了subversion，在服务器上创建了repository，并配置了svn+ssh使用密钥认证的访问方式。一切正常。但是我有一个关于 svn 用户使用 svn+ssh 模式的问题。

svn 用户有一个 ssh 密钥，所以他可以访问 subversion 服务器，当然他也可以使用密钥认证通过 SSH 访问 Centos 服务器。此外，他可以使用基于 SSH 的 WinSCP 工具从 centos 服务器复制 subversion 存储库文件（特别是 /db 文件）。那么，我想知道是否有一种方法可以让 svn 用户只能通过 svn+ssh 访问 svn 存储库，而不能直接通过 ssh 访问从 centos 复制存储库文件？如果他可以通过ssh从centos服务器复制repository文件，我认为conf/authz文件实现的svn访问控制没有任何意义，svn repository也不安全。

我只是学习如何创建一个 svn+ssh 颠覆服务器，所以可能我的知识还不够，请给我一个想法或告诉我是否存在解决方案。如果不能禁止通过 SSH 从 Linux 服务器复制文件，我会使用 svn 或 http(s) 访问模式。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T06:42:38.713

我找到了解决这个问题的方法。

将命令添加到 authorized_keys 文件以禁用 ssh shell 登录和 scp，但启用 svn+ssh，如下所示：

“/usr/bin/svnserve -t -r /svn/test/”，无端口转发，无 pty，无代理转发，无 X11 转发

添加您的 authorized_keys 文件后将如下所示：

command="/usr/bin/svnserve -t -r /svn/test/",no-port-forwarding,no-pty,no-agent-forwarding,no-X11-forwarding ssh-rsa A..... ..................................................... …………………………………………………………………………

我认为这是一种解决方案，您还有其他解决方案吗？请告诉我。

# css - 如何设置橙色 Firefox 按钮上显示的图标大小？

> ID：12332201
> 
> 赞同：2
> 
> 时间：2012-09-08T15:53:27.547
> 
> 标签：css, image, firefox, stylish

```
 #main-window #appmenu-button{
    background:transparent !important;  
    background-color:transparent !important;
    box-shadow: rgb(252,252,252) -0.5px -0.5px 0.5px !important;
            border: 1px solid rgba(245,245,245,0.899) !important;
            border-radius: 0.25em !important;
    outline: 1px solid rgba(222,225,225,0.799) !important;
            -moz-outline-radius: 0.3em !important;
            outline-offset: -1px !important;
    list-style-image:url("chrome://branding/content/icon16.png") !important;
    min-width:78px !important;
    padding-right:56px !important;
    margin-right:-56px !important;
    padding-left:0px !important;
    margin-left:0px !important;
 } 
```

这是用户样式代码的一部分，用于在**橙色 Firefox 按钮**上显示一个图标（一个小 Firefox）和一个名为*FlipClock*的附加组件。

 **我想`chrome://branding/content/icon16.png`用另一个图像替换（小火狐）。但是，我申请的图像太大了。

*   完整的时尚代码：[tny.cz/44499fac](http://tny.cz/44499fac)

*   原来的橙色 Firefox 按钮：
    ![原版btn](../Images/86a48f786692948ce345c20854fac129.png)

*   应用用户样式后：
    ![风格 btn](../Images/9d21c5ed3050434b23f03b2280946455.png)

*   [我要使用的图像（单击以获取正确的图像）：
    ![想要的图像](../Images/eead21352fe2d264808527a42daf52d6.png)](https://i.stack.imgur.com/w059u.png)

*   这就是我的尝试的样子：
    ![我的结果](../Images/46916653cdbae508e57ddcefc4bdfaae.png)

如何设置它的大小？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:56:27.543

似乎没有办法`list-style-image`用 CSS 来缩放 a。
参考：

*   [CSS 规范`list-style-image`](http://www.w3.org/TR/CSS2/generate.html#propdef-list-style-image)
*   [“CSS 列表样式图像大小”](https://stackoverflow.com/q/7775594/331508)

因此，您唯一的办法是调整图像大小——您可以使用许多图像编辑器之一来完成。有关如何做到这一点并保持透明度的信息，请在[superuser.com](https://superuser.com/)和/或[webapps](https://webapps.stackexchange.com/)上搜索和/或询问。

但是，我冒昧地为您缩小了该图像。在这里，大小为 32x32 和 16x16，保留了透明度。
请注意，缩小大图像并不总是一个好的图标。;)

> [16x16：![16 像素徽标](../Images/b495e49883d8373dbfebe49bb8df0cec.png)](https://i.stack.imgur.com/gcuZW.png)
> 
> [32x32：![32 像素徽标](../Images/f5e259992ffde1431bdc48ff68fa693a.png)](https://i.stack.imgur.com/alLgp.png)

（以灰色背景显示以证明保留了透明度。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:01:40.847

使用 Photoshop 或其他软件重新调整图像大小，并制作 alpha 分层 16x16 PNG 图像**

# ruby-on-rails - Rails：如何在创建和更新时设置不同的验证规则

> ID：12332206
> 
> 赞同：1
> 
> 时间：2012-09-08T15:53:42.073
> 
> 标签：ruby-on-rails, validation, dynamic

我有一个文本字段，创建时可以为空，但更新时不能。

**我如何在 rails 中做到这一点：不同的验证规则取决于操作？**

这背后的想法是允许管理员创建一个空白问题单，由用户填写。

这是我的原始模型（issue.rb）：

```
class Issue < ActiveRecord::Base

attr_accessible :content, :status

validates :content, :presence => true, :length => { :maximum => 2048 }
validates :status, :inclusion => { :in => %w(WAITING REJECTED ON OFF) }

belongs_to :user

end 
```

如何只在更新时设置`:presence => true`，`:content`而不是在创建时设置？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T15:56:23.793

您可以`:on => :create`在验证语句中使用。

就像在[这个问题](https://stackoverflow.com/questions/5899116/rails-3-validates-rule-based-on-action)中一样。

# ios - 无需缩放即可绘制 2D 纹理？

> ID：12332208
> 
> 赞同：0
> 
> 时间：2012-09-08T15:54:27.613
> 
> 标签：ios, opengl-es, opengl-es-2.0, textures, projection

我刚刚开始使用 OpenGL ES 2.0，我设法绘制了一个 256x256 的图像并填充了整个视口（大小为 320x460）。图像被缩放，如下图所示，但这不是我们想要的，我想要的是从指定的 2D 坐标以原始大小绘制图像，例如从坐标 (10, 10) 到坐标 (266, 266) ，看起来我需要某种投影，但我对投影知之甚少，也不知道如何开始。

任何建议将不胜感激。

**编辑**

我刚刚找到[了这个](https://stackoverflow.com/a/5879551/668963)，现在我知道这是因为我指定的顶点填充了整个视口。现在我的问题是如何将图像映射到纹理坐标系？如何计算4 个顶点中的每一个的坐标`X`和`Y`坐标，以便图像可以正好适合纹理表面而不被缩放？

**编辑2**

非常感谢@Slartibartfast，就这么简单，我觉得自己很愚蠢，以至于我一开始就没有做对。

如果其他人需要，以下是我指定的顶点，用于从左上角绘制那只可爱的小驴：

```
typedef struct {
    float position[2];
    float textureCoor[2];
} Vertex;

const Vertex vertices[] = {
    {{-1, 1}, {0, 0}},
    {{0.6, 1}, {1, 0}},
    {{0.6, -0.113}, {1, 1}},
    {{-1, -0.113}, {0, 1}},
};

const GLubyte indices[] = {
    0, 1, 2,
    2, 3, 0
}; 
```

![在此处输入图像描述](../Images/e2cdb94dd4434efc05cac3200c0a99bb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:45:44.683

据我所知。如果您想将图像精确地映射到屏幕上，您需要指定的顶点必须进行相应的缩放。

您在 X 和 Y 维度中使用了从 -1 到 1 的坐标。现在，这指定了整个屏幕尺寸，您可以在指定视口时访问这些尺寸。设屏幕尺寸为 sw 和 sh，图像尺寸为 tw 和 th。

由于以顶点坐标表示的屏幕宽度 (sw) 为 2（-1 到 1），因此图像覆盖的宽度将为 2*tw/sw。同样高度是 2*th/sh。

现在您可以指定顶点从 (-1,-1) 到 (-1 + 2*tw/sw, -1 + 2*th/sh)，这将保持图像缩放并绘制在左上角.

# objective-c - 导航控制器跳过视图控制器

> ID：12332214
> 
> 赞同：0
> 
> 时间：2012-09-08T15:55:10.577
> 
> 标签：objective-c, ios5, uinavigationcontroller

我有 3 个视图控制器，其中我必须通过第二个控制器从第一个到第三个，而不查看第二个控制器。第二个控制器有一个按钮，它执行 segue 控制器 2--> 控制器 3。

我试过了

```
[self performSegueWithIdentifier:@"addItem" sender:self ]; 
```

在第二个控制器的 viewDidLoad 中。但是，不是继续到第三个控制器，而是去一个未知的控制器。在终端显示一条消息。嵌套推送动画可能导致导航栏损坏。在意外状态下完成导航转换。导航栏子视图树可能会损坏。当我按下那个未知控制器上的后退按钮时，它会回到我的预期目的地（第三个控制器）并且从那里运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:23:07.973

得到了答案。为此，我们需要将一个动画设置为“否”

```
pushViewController: animated:NO .
This prevents nested push animation 
```

# python - 如何使用动态类型进行保护

> ID：12332215
> 
> 赞同：1
> 
> 时间：2012-09-08T15:55:12.420
> 
> 标签：python, dynamic-typing

我们的项目变得有点大，前几天我遇到了这个问题，当我试图向一个函数添加一个简单的错误消息时：

```
def create_report(id):
    report = new_report(id)
    if not report:
        raise api_error('Could not find report with id %d' % (id,))
    ... 
```

问题？ `id`是一个字符串，当它试图将其格式化为数字时它崩溃了。我不是该函数的原始作者，并错误地认为那`id`将是一个数字。相反，它应该是一个字符串。哎呀。

如果这是一种强类型语言，我会立即从编译器中得到一个错误；处理这类事情的最佳方法是什么？我应该检查每个参数的类型（看起来像很多跑腿），还是应该把所有东西都放在`try:`块中？也许我们应该在每个函数中写一个注释来描述它的参数？或者我只是应该知道更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:02:11.910

该格式字符串应该使用`%s`，不是因为`id`它是一个字符串，而是因为它通常是最佳选择。`%d`需要数字类型，但`%s`如有必要，会将其他类型转换为字符串。`%d`只有在需要更改数字格式时才应使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:08:10.980

如果你真的想确保字符串打印函数不会崩溃，你可能最好使用 %s，它使用 pythons str() 函数将积分值转换为字符串。看看你在说什么是一个 ID，我假设它是 int 类型的——在这种情况下，这个解决方案应该可以正常工作（如果你使用浮点数，我不太确定 str() 有多少位数将继续）。

*编辑* 哦，男孩，我很慢......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T16:18:37.690

甚至比其他答案更好，如果消息是针对开发人员的眼睛`%s`，我发现最好使用。`%r`这将帮助您区分微妙的情况。例如，如果您`'12 '`使用 id 调用此函数，则 %s 消息将不会显示尾随空格。 `%r`使用值的 repr()，因此将包含引号，帮助您查看精确值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T17:42:31.410

我认为这里的问题是您在发生意外情况时应该执行的代码部分中的值断言。如果出现问题，也许更好的方法是更改`new_report(id)`​​以引发异常 - 指定它是值错误还是找不到 id。那么你的代码应该是：

```
def create_report(id):
    report = new_report(id)

...

def new_report(id):
    try:
       # find the report by id
       # if couldn't find raise api_error
    except ValueError:
       # explain that id is the wrong type 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T16:02:21.903

使此类事情在参数类型方面更加健壮的一种可能策略是编写：

```
def create_report(id):
    report = new_report(id)
    if not report:
        raise api_error('Could not find report with id %s' % (id,))
    ... 
```

它并不总是看起来不错，但至少它不会轻易损坏。

但一般来说，为函数制定一些明确的合同总是更好的。文档字符串是正确的地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-08T16:12:39.137

尝试使用 %s，然后使用 str(variable)。这将确保所有内容都转换为字符串（甚至列表和元组）并且不会发生 TypeError

```
def create_report(id):
    report = new_report(id)
    if not report:
        raise api_error('Could not find report with id %s' % (str(id),))
    ... 
```

# c# - 打开窗口（或对话框）以阻止主窗口而不停止进一步的说明

> ID：12332221
> 
> 赞同：3
> 
> 时间：2012-09-08T15:55:56.353
> 
> 标签：c#, wpf, dialog

我有一个`MainWindow`可以通过单击按钮进行一些可能需要几秒钟的计算。在此期间，我想在中间显示一个小对话框（或单独的窗口）说“请稍候......”`MainWindow`将完全阻止它，因此用户在关闭此对话框之前无法执行任何操作。我尝试创建一个窗口并打开它，`window.ShowDialog();`但这当然不会继续说明......

还有其他方法可行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T16:21:43.817

解决方案非常简单 - 您应该在 Show 中将 MainForm 设置为父级（而不是 ShowDialog，正如您所注意到的），然后在您自己的表单上调用 Enabled = false ：

```
 Form2 f = new Form2();
        f.Show(this);
        this.Enabled = false;

        //do your stuff here

        f.Hide();
        this.Enabled = true;
        f.Dispose();
        f = null; 
```

这里唯一的问题是你不能取消你的进程......但是如果你的计算是在另一个线程中，另一个窗体的控件将触发它们的处理程序，你可以取消另一个线程中的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:59:17.237

在打开窗口之前在另一个线程上开始计算怎么样？

您也可以[`DispatcherFrame`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherframe.aspx)为您的计算创建一个新的。

或在靠近根的控件上显示`Popup`并设置.`IsEnabled``false`

或者将您的代码移动到对话框上的事件中，例如`Loaded`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T16:02:12.893

您可以尝试使用此代码

无阻塞

在您的代码中

```
 ....
    Thread newThread = new Thread(new ThreadStart(Create));
    newThread.SetApartmentState(ApartmentState.STA);
    newThread.IsBackground = true;
    newThread.Start();
    ....
}

private void Create()
{
    Window1 tempWindow = new Window1();
    tempWindow.Show();       
    System.Windows.Threading.Dispatcher.Run();
} 
```

阻止你的主窗口

您还可以使用`Prism`框架和`InteractionRequest`类来生成您的窗口

[http://msdn.microsoft.com/en-us/library/gg405494%28v=pandp.40%29.aspx](http://msdn.microsoft.com/en-us/library/gg405494%28v=pandp.40%29.aspx)

# php - Composer 在使用“安装”而不是“更新”时无法解析可安装的软件包集

> ID：12332225
> 
> 赞同：8
> 
> 时间：2012-09-08T15:56:26.770
> 
> 标签：php, silex, composer-php

背景：我在我的台式机上使用 Silex 设置了一个新项目，并使用我需要的依赖项设置了我的 composer.json 文件。我在桌面上成功运行了“composer.phar install”，没有任何问题。

我切换到我的笔记本电脑继续进行该项目，将 git repo 克隆到笔记本电脑，并尝试执行“composer.phar install”但收到以下消息：

```
Your requirements could not be resolved to an installable set of packages. 
```

所以我做了一个“composer.phar update”，它起作用了，但我不想更新我的 composer.lock 文件。

还有其他人有这个问题吗？如果没有，有人可以解释我做错了什么吗？

编辑：我想我可能应该回到这个并更新问题。我已经很久没有遇到这个问题了。我不知道这是否是作曲家的更新修复了它（人们可能不得不发表评论让我知道他们是否仍然遇到这个问题）或者现在我已经了解了更多关于作曲家的知识，我只是以我没有遇到过的方式做事。无论哪种方式，除非我在 composer.json 中的包规范实际上被破坏了，否则我在将近一年半的时间里没有看到这条消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-21T02:43:24.310

嗯，我的猜测是您正在使用一个基于分支（或）的库，`dev-master`维护者`dev-branch-name`最近`branch-name@dev`会强制推送（例如，重新设置分支）。

只要有可能，尽量使用稳定的分支（版本链接到标签的分支（v1.0.0、1.0.* 等）。如果你不知道在哪里看，你应该寻找你的包[Packagist](https://packagist.org)，并使用不以 开头的版本`dev-`，或使用`@dev`修饰符将最小稳定性设置为`dev`.

当然，有时也是不可避免的。但在这种情况下，您可以随时要求库的维护者标记版本。:)

我的第二个猜测是你的机器上有不同的库版本。以`symfony/icu`图书馆为例。根据您机器上的 Icu 版本，以及您启用的事实或您的机器上是否安装了 intl 扩展的事实，您可能会遇到这些问题。由于 composer 将尝试将 composer.lock 与您的旧机器匹配，因此依赖项将无法解决，因为锁定的包将需要您的系统没有的依赖项。解决此问题的一种简单方法是安装所需的扩展程序。

# html5-video - 使用覆盖自定义视频控件而不与本机 textTrack 支持冲突的方法

> ID：12332232
> 
> 赞同：1
> 
> 时间：2012-09-08T15:57:16.547
> 
> 标签：html5-video

如果您使用覆盖在视频上的自定义视频控件以及轨道元素。字幕通常显示在这些控件下方（尤其是在 Safari6 或 Opera.next 中）。

有没有一种好方法（即 CSS 或不太好的 JS）将字幕放置在控件上方。

我知道您可以直接在 WebVTT 文件中更改行位置，但这并不合适，因为 WebVTT 文件中的字幕放置是“语义的”，而我需要的位置定义取决于播放器的布局。（一旦你改变了播放器的皮肤，就改变 WebVTT 文件并没有什么意义）。

目前，所有支持轨道元素的自定义媒体控制脚本，只需删除本机实现并处理显示他们自己的提示，这对我来说并不是 polyfill 的真正意义。

# c++ - 从围绕 xyz 的旋转中找到 xyz 方向

> ID：12332235
> 
> 赞同：2
> 
> 时间：2012-09-08T15:57:47.923
> 
> 标签：c++, math, opengl

我正在开发一种太空射击游戏，您可以在其中围绕 x、y 和 z 轴旋转飞船，从而向任何方向射击。要旋转船（我在 c++ 中使用 openGL），我会围绕 x、y 或 z 轴旋转 0-360 度。相机将始终保持相同的方向（沿 z 轴向下，如“默认”）。你只是看看船在旋转。

示例：glRotatef(-90.0f, 1.0f, 0.0f, 0.0f); 上面的示例将围绕 x 轴旋转船 -90 度。如果飞船在旋转之前像普通的太空射击游戏一样沿着正 y 轴指向上方，那么在旋转之后飞船将沿着负 z 轴指向 inn。

我正在努力弄清楚的是，如何在任何时候都能够计算船的“方向”，并将其转换为 vector3d（在一个名为 vector3d 的类中的 x、y、z）。

我通过将当前位置（xyz）添加到我也存储在vector3d中的速度来计算任何移动对象的位置（另一个vector3d，简单的x，y和z），并将其乘以增量时间（自上一帧/更新以来的时间） ）。当我从宇宙飞船上发射一个弹丸时，我希望得到飞船的方向向量来作为我正在射击的弹丸速度的基础，这样我就可以像计算一样计算弹丸的位置通过简单地将当前弹丸位置添加到速度乘以 deltatime 来确定其他物体的位置。

由于我以围绕 x、y 和 z 的旋转形式获得船的方向，我认为必须有可能以某种方式将其转换为以矢量格式表示相同方向的 vector3d（如果这有意义的话）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T01:02:13.660

取您感兴趣的方向的向量，例如原始未旋转船的*z*轴。这是一个像 的向量`(0,0,1)`。现在将旋转矩阵应用于它，正如您在[`glRotate`文档](http://www.opengl.org/sdk/docs/man/xhtml/glRotate.xml)中找到的那样。您可以放心地忽略此矩阵的最后一行和最后一列，因为您只是围绕原点旋转。这个矩阵×向量乘法的结果将是给定旋转矩阵下向量的图像。

# php - 表结构，每行一个字段 VS all-data-in-one

> ID：12332240
> 
> 赞同：4
> 
> 时间：2012-09-08T15:58:57.620
> 
> 标签：php, sqlite, oop, database-design, orm

关于表结构的问题。

这里有一个小场景来介绍这个问题：假设你想在一个表中存储一个类（let A）的对象。

您有两种可能的表结构来执行此操作：

```
Structure A: "one field per row":
id (int),
name (text),
credit (int),
birthday (date).

Structure B: "all data in one row":
id (int),
data (bigtext). 
```

考虑以下：

*   您将永远不会执行请求过滤/排序字段名称/信用/生日
*   在编辑字段之前，您要加载对象
*   字段名称/信用/生日没有选项/修饰符（键/唯一/...）

**这两个表结构有什么区别？**

.

具体来说，我正在做一个 PHP/SQLITE 应用程序 - 在某一时刻 - 需要将对象存储在数据库中。我希望能够轻松添加 db-stored-class 而不必每次都编辑我的数据库方案。使用“结构 B”可以让我这样做。它可能看起来很脏，是的，你可能已经被教导你需要有很好的类型行..但为什么不呢？

“结构A”的主要优势不只是选择过滤器和更新的有效性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:43:24.370

永远不要用关系数据库对一个字段中的所有数据进行示例二。这是 WAYY 更多的努力和更少的灵活性。

如果在一年后你想创建另一个访问数据库的项目，你将不得不重复大量的验证、提取等工作，而如果一切都在一个单独的列中，那就容易多了。

你说“你永远不会执行请求过滤/排序字段名称/信用/生日”我非常怀疑它会以这种方式工作。您在软件开发中快速学到的一件事是，诸如“哦，那永远不会发生”之类的陈述总是会回来咬你的屁股

如果你真的想采用 b) 的方法，至少看看 nosql。我对此了解不多，但如果这是您想要采取的路线，它将比 RDBM 更适合您的项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T16:24:50.067

您正在谈论在业务层/Web 应用程序中处理所有数据完整性，这在当今是完全可以接受的。

与其完全使用表结构，不如只存储一个 JSON 对象？这样您就不必担心架构更改，您只需序列化/反序列化对象以供前端使用。

也许考虑使用键/值存储（一种 NOSQL 解决方案）来处理类似的事情，尽管任何数据库都足够了。

要回答您的问题 - 不同之处在于能够查询字段、验证数据、维护数据完整性等，而在结构 B 中，您在应用程序的数据库之外处理所有这些。

关于您对无法查询对象的感知限制，MapReduce 将允许您对 JSON 数据运行聚合查询。

如果您需要灵活性并且不需要结构化数据库提供的其他好处，请选择选项 B，如果您想验证数据库中的数据并更轻松地在其上运行查询，请选择选项 A。

结构 A 的优点是接近数据的数据完整性规则，以及以多种不同方式轻松查询数据的能力。

结构 B 的优点是可扩展性和可伸缩性 - 您可以在应用程序中轻松更改数据结构，并且如果您需要扩展，您可以轻松地对数据进行水平分区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T16:16:42.740

不。例如，类型安全呢？在结构 B 中，是什么阻止我将我的生日宣布为“永无的 12 日”、“红色”或“3.1415”？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T16:21:42.253

为什么要使用关系数据库？使用单独字段的优势*通常*超过将所有数据分组到一个字段中的优势。您为什么不希望您的数据已经正确拆分和输入？

无论如何，请参考禁止非原子数据的[第一范式](http://en.wikipedia.org/wiki/First_normal_form)（以及第二和第三范式）。如果您的代码是某些专业工作的一部分，您可能应该遵循它们。

# php - 如何使用 PHP 在 twitter 中获取我所有关注者的屏幕名称

> ID：12332244
> 
> 赞同：-4
> 
> 时间：2012-09-08T15:59:07.840
> 
> 标签：php, twitter

我是使用 Twitter - API 的新手，我如何使用 PHP 来获取我在 twitter 中所有关注者的屏幕名称？我需要使用哪个 API？请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:32:31.370

摘自 Twitter Developers的一篇[非常相似的帖子：](https://dev.twitter.com/discussions/581)

> 如果您只需要您关注的用户或关注您的用户的用户 ID，那么它通常是一个 API 调用。如果您需要 screen_names 和其他传记数据，则需要将 API 请求链接在一起。
> 
> 您正在寻找的方法是：
> 
> *   [GET 朋友/ID](https://dev.twitter.com/docs/api/1/get/friends/ids)和[GET 关注者/ID](https://dev.twitter.com/docs/api/1/get/followers/ids)以获取 ID
> *   [获取用户/查找](https://dev.twitter.com/docs/api/1/get/users/lookup)以将 user_ids “水合”为完整的用户对象

# magento - 如何获得有关 magento 客户导入的更具体的错误报告？

> ID：12332246
> 
> 赞同：0
> 
> 时间：2012-09-08T15:59:25.513
> 
> 标签：magento, import, importerror, magmi

我正在尝试使用内置于 magento 中的数据流导入方法将 80k 客户导入 magento ......这真的很难使用......

*   导入真的很慢
*   我需要将 80k 分成 1k 的文件，以避免导入过程失败
*   当导入失败时，我收到一条神秘的错误消息：此“字段”有错误
*   每次导入都很慢

有没有人有更好的解决方案来处理上述 4 个问题？或者至少 Magento 天才能够提供要报告的行号以及导致错误的字段，以便我可以更立即地识别故障并修复？

我确定我不是唯一遇到此问题的人，因此我非常感谢听到其他人为此遇到的解决方案。

对于名为 Magmi 的产品，有一个很好的解决方案来解决这个问题，不幸的是，在客户导入/导出方面似乎有点黑洞......

干杯，

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:30:54.590

添加更多时间到 php 执行时间并在 php.ini 中添加内存

[增加执行时间和内存限制](http://www.teknobites.com/2007/04/27/how-to-edit-phpini-file-to-increase-memory-limit/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T23:26:26.787

Magento 的客户是 EAV 模型

所以基本上你需要电子邮件/名字/姓氏/密码/客户组/商店ID

您可以正确插入插入的普通 mysql 查询

```
customer_entity_datetime
customer_entity_decimal
customer_entity_int
customer_entity_text
customer_entity_varchar 
```

并从 eav_attribute 获取属性 ID 并使用 last_insert_id() 进行查询；

# tfs - TFS 2012 和 SSMS 2012

> ID：12332248
> 
> 赞同：4
> 
> 时间：2012-09-08T15:59:33.490
> 
> 标签：tfs, ssms-2012

在过去的 12 个小时里，我一直在尝试使用 SSMS 2012 将项目添加到 TFS 团队项目，还有其他人遇到过这个问题吗？

我可以使用 SSMS 2008-R2 添加项目而不会出现任何问题。

在 SSMS 2008-R2 中，当我想创建一个新项目时，我只需选择 File → New → Project。然后我会输入项目的名称，确保选中了“添加到源代码控制”复选框，几秒钟后，“签入 - 源文件”表单神奇地出现了。然后我会检查项目是自动创建的 Check-In 按钮（整洁吧？？）。

但是在 SSMS 2012 中，我遵循相同的步骤，除了将项目神奇地添加到解决方案资源管理器之外，什么也没有发生。现在，我检查以确保 SSMS 2008-R2 和 SSMS 2012 之间的设置相同，并且它们看起来是相同的。这两个应用程序都在访问相同的 TFS 服务器，所以现在我认为它“摆脱了困境”。

请给我您对我应该看什么或在哪里看的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:01:54.130

Stack Exchange 的 DBA 部分的类似线程可能会有所帮助：[https ://dba.stackexchange.com/questions/17850/tfs2010-for-ssms-2012](https://dba.stackexchange.com/questions/17850/tfs2010-for-ssms-2012)

# php - 实例化数据库对象问题

> ID：12332257
> 
> 赞同：-2
> 
> 时间：2012-09-08T16:01:15.740
> 
> 标签：php, autoload

我的数据库类有问题。我正在推送我需要的所有方法，在关闭类之后，我正在创建它的一个实例并将其影响到一个 $database 变量。然后在索引页面上，我不需要明确要求该文件，因为我正在设置一个 __autoload 函数来为我执行此操作。但是，当我尝试使用例如我设置的 $database->isConnected() 方法时，它不起作用。我必须在索引页面上创建另一个 $database 实例，这意味着调用 new dataBase(); 再次，只有这样自动加载才能工作。

在这里我不需要任何代码，只是希望有人给我这样做的逻辑原因。我想比复制粘贴更好地理解事情。因为我找到了一种解决方法，即每次在新页面上创建一个实例，并在课程页面中创建一个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:59:36.143

这是我从您的解释中得到的代码：

**文件：** database.php

```
class Database {
    isConnected() {
        //Some code
    }
}
$database = new Database(); 
```

**文件：** index.php

```
function __autoload ($class) {
     include $class+'.php';  //Note this is highly unsafe
}
$database->isConnected(); 
```

* * *

问题是它`__autoload()`没有做你认为它做的事情。

`__autoload()`加载引用时尚未定义的类。但是 PHP 不知道那`$database`是 class `Database`。就它而言，此时它是一个未定义的变量。

所以如果你这样做了：

**文件：** database.php

```
class Database {
    isConnected() {
        //Some code
    }
} 
```

**文件：** index.php

```
$database = new Database(); 
```

PHP 会意识到未定义数据库并调用`__autoload()`将加载 database.php（假设`__autoload()`定义正确）。然后构造函数将运行并`$database`正确设置。

您应该做的是包含数据库文件 ( `include 'database.php'`) 或使用静态方法 (例如`Database::getDatabase();`) - 引用该类以便 PHP 知道`__autoload()`它。

# c# - 转储协议缓冲区数据/响应

> ID：12332258
> 
> 赞同：6
> 
> 时间：2012-09-08T16:01:31.310
> 
> 标签：c#, protocol-buffers, protobuf-net, fiddler

是否可以在不了解用于写入该数据的类型的情况下转储（查看）以 PB 格式写入的数据？

我发现[https://stackoverflow.com/a/10253515/883738](https://stackoverflow.com/a/10253515/883738)

> 简而言之，在网络上，protobuf 被编码为 3 元组，其中键是分配给 .proto 模式中的字段的字段编号。类型是 之一。它包含足够的信息来解码 3 元组的值，即它告诉您该值有多长。

我的最终目标是为 Fiddler2 编写扩展程序，以查看以 PB 格式发送/接收的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T16:14:45.000

为此有一个wireshark工具，iirc。

这里的问题是，如果您不知道架构，则 protobuf 格式不明确：

*   固定 32 可以是浮点数或有符号或无符号整数（32 位）
*   固定 64 可以是双精度或有符号或无符号整数（64 位）
*   varint 可以是有符号或无符号整数、之字形整数或布尔值
*   字符串可以是 utf-8 字符串、原语的打包数组、子消息或原始字节

事实上，唯一明确的标记是开始/结束组，它们已被半弃用！

所以：这是可行的，但您可能需要对同一数据进行多种解释

您也可以只列出字段编号：没有二进制格式的成员名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-18T01:03:04.930

这里有一个 Fiddler PB 实现（没用过）：[https ://github.com/SecurityInnovation/ProtoMiddler](https://github.com/SecurityInnovation/ProtoMiddler)

# java - 根据类实例行动

> ID：12332275
> 
> 赞同：0
> 
> 时间：2012-09-08T16:03:32.347
> 
> 标签：java, oop, inheritance

我有一个`ClassB`继承自`ClassA`. `ClassA`有一个嵌套`ClassC`的`methodA()`。在此`methodA()`，我需要根据外部类 ClassA 或 ClassB 的条件来做事。构造`if/else`语句的最佳方法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:07:10.623

这不是 OOP 的工作方式——如果有人扩展`ClassB`到`ClassD`并且您想进一步改变行为怎么办？

无论如何，[`instanceof`](http://www.java2s.com/Code/Java/Language-Basics/FindingOutofwhatClassanObjectisInstantiated.htm)在您重构代码时，关键字可能会对您有所帮助。

请记住，继承/接口等的目的之一是防止 if/else 语句的大链 - 将它们隐藏在方法中不会帮助您的代码更流畅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:13:53.710

我最好在ClassA中添加一些虚拟方法B并在ClassB中覆盖它，并在classC的methodA中调用它。

# git - 将新子模块添加到旧子模块的位置

> ID：12332282
> 
> 赞同：2
> 
> 时间：2012-09-08T16:04:37.377
> 
> 标签：git, git-submodules

我在此文件夹中有一个子模块`abc/submodule`，我使用以下命令将其删除：

```
rm -rf abc/submodule
# remove submodule in .gitmodules
# remove submodule in .git/config
git rm --cached abc/submodule
git push origin master 
```

现在我想将新的子模块添加到同一个地方：

```
git submodule add <link> abc/submodule 
```

旧子模块的内容出现，而不是新的。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T20:58:51.507

`git submodule`将 Git 信息存储在`$toplevel/.git/modules/$sm_path`. 要完全删除它，您需要删除该目录。您应该能够执行以下命令：

```
repo="submodule"
rm -rf $(cd $repo && git rev-parse --git-dir)
rm -rf $repo
git rm --cached "$repo"
git config --remove-section submodule."$repo"
git config -f .gitmodules --remove-section submodule."$repo" 
```

这是对 的扩展`git submodule deinit`，仅与 相反`git submodule init`。

请注意，您还需要在推送之前提交（这些更改只是暂存的）。

# windows-services - 从 Windows 服务访问 Google Drive

> ID：12332283
> 
> 赞同：1
> 
> 时间：2012-09-08T16:04:40.237
> 
> 标签：windows-services, oauth-2.0, google-drive-api

我试图了解是否可以在不涉及用户的情况下从传统的 Windows 服务访问 Google Drive。

按照[https://developers.google.com/drive/quickstart](https://developers.google.com/drive/quickstart)上的指南，我已经能够创建一个将文件上传到 Google Drive 的命令行应用程序。但是，此应用程序会启动 Web 浏览器并将我重定向到 Google 的授权服务器页面，该页面为我提供了我必须在命令行应用程序中输入的授权代码。显然，这不适用于作为 Windows 服务运行的应用程序，它将尝试在不同时间将文件上传到 Google Drive。在我的场景中，根本不可能让用户多次参与，而那将是在设置期间。

据我所知，授权码只在短时间内有效。如果我稍后尝试重用它，我会遇到异常。

在[https://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)，有可能的身份验证方案的描述。与我正在尝试做的事情相匹配的唯一场景是“服务帐户”场景。这允许应用程序在不涉及用户的情况下访问 Google 服务。但是，使用服务帐户的同一页面应用程序无法访问数据。

我的印象是，由于这可能导致安全问题，谷歌不想打扰旧式身份验证（用户名/密码）。从安全的角度来看，在配置中存储用户/密码当然不是很好。我是否遗漏了什么，或者我想要做的事情根本不受支持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:18:33.940

快速启动应用程序是一个简化的命令行应用程序，它减少了一些角落以加快入门体验，但它仍然可以用作 Windows 服务的起点。

如果您不想启动浏览器，则必须删除对的调用，`Process.Start(authUri.ToString())`并可能将授权 url 打印到控制台，以便用户可以复制链接。

您只需执行一次此手动步骤，只要应用程序存储刷新令牌和交换访问码时返回的访问令牌即可。访问令牌在一小时后过期，但刷新令牌永不过期（除非用户手动撤销对应用程序的访问权限），后者是用于请求新访问令牌的令牌。

该文档还包括一个完整的 .NET 应用程序，该应用程序展示了如何存储令牌以及如何解决各种授权边缘情况：[https ://developers.google.com/drive/examples/dotnet](https://developers.google.com/drive/examples/dotnet)

# javascript - 具有服务器端呈现的 HTML 片段的主干模型

> ID：12332287
> 
> 赞同：2
> 
> 时间：2012-09-08T16:05:01.827
> 
> 标签：javascript, html, json, backbone.js

我想开始使用 Backbone.js 来更好地构建我的 JavaScript 文件。但是，我不想重做我的应用程序以通过 API 仅输出 JSON。如果我错了，请纠正我，但到目前为止，我的印象是即使没有 JSON API，我仍然可以使用 Backbone.js。现在我遇到了一个问题，我的服务器返回 HTML，而 Backbone 模型不喜欢这样并返回错误。

基本上，我想根据类别加载 HTML 片段：

```
var Filter = Backbone.Model.extend({
    url: '/filters/',
});
var FilterView = Backbone.View.extend({
    initialize: function() {    
        this.model.on('change', this.updateFilter, this);
        this.changeFilter();
    },

    changeFilter: function() {
        this.model.fetch({data: $.param({category: this.options.category})});
    },

    updateFilter: function(filters) {
        console.log(filters);
        this.$el.html(filters);
    },
});

var filter = new Filter();
var filterView = new FilterView({
    el: $( '#filterContainer' ),
    category: $( '#categorySlug' ).data( 'slug' ),
    model: filter,
}); 
```

现在我想我可以使用这个简单的模型通过 Ajax 检索我的 HTML 片段。请求正确触发，但 Backbone 返回错误并且`updateFilter`永远不会被调用。

我没有得到什么吗？我需要进行哪些更改才能使其与 HTML 而不是 JSON 响应一起使用？或者我根本不应该使用模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T01:05:22.557

您需要扩展您的 Backbone 模型以覆盖 fetch 以便与[丢失](https://stackoverflow.com/a/17307199/1675)的答案一样，您需要将数据类型传递给 Backbone.Sync

```
fetch: function(options) {
    return Backbone.Model.prototype.fetch.call(this, _.extend({ dataType: "html"}, options));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T16:12:07.813

这并不是 Backbone 设计的真正操作方式，但您可以通过在模型中`snippet`包含适当的[`parse`](http://documentcloud.github.com/backbone/#Model-parse)函数来将您的内容填充到模型字段（称为它）中：

```
var Filter = Backbone.Model.extend({
  url: '/filters/',
  parse: function (response) {
    return {
      snippet: $(response)
    }
  }
}); 
```

同样，您在这里有点超出 Backbone 的自然顺序，但您现在应该能够使用通常`fetch()`的`get()`、 和`set()`方法来管理模型的内容。例如，

```
// in view:
updateFilter: function (filter) {
    this.$el.html(filter.get('snippet'));
},
// etc.. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-25T20:45:51.013

在我看来，问题在于请求的接受标头`application/json`默认包含触发错误。您可以通过执行来调整接受标头`model.fetch({ dataType : 'html'})`。这个问题的公认答案：[Backbone.js fetch with parameters](https://stackoverflow.com/questions/6659283/backbone-js-fetch-with-parameters)帮助我找到了答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T15:39:40.727

这个问题有点老了，但我在 git 上找到了一个项目，它描述了一种非常好的更新模型的方法，方法是循环遍历项目服务器端并在呈现页面时将它们添加到集合中。

[https://github.com/runemadsen/Backbone-With-Server-Side-Rendering/blob/master/views/modeltest.erb](https://github.com/runemadsen/Backbone-With-Server-Side-Rendering/blob/master/views/modeltest.erb)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T09:55:29.330

我认为这个问题的答案是您需要将骨干模型的同步方法替换为适用于 HTML 的方法。下面的代码使用“snippet”值中的数据生成模型：

```
sync: function (method, model, options) {
    // NOTE: This generic function won't work for pushing changes
    if (method !== 'read') {
        console.log('Cannot update html model');
        return false;
    }

    // As we're only reading default type to GET - see Backbone.sync
    // for a more generic way of doing this.
    var params = _.extend({ type: 'GET',
        contentType: 'application/xml',
        dataType: 'text'
    });

    var urlError = function () {
        throw new Error('A "url" property or function must be specified');
    };

    // ensure that we have a URL
    if (!params.url) {
        params.url = _.result(model, 'url') || urlError();
    }

    // NOTE: If you extend this function to deal with creates you'll need to ensure
    // params.data is set and make sure that the data isn't processed.
    // See the Backbone.sync methods for more info

    // Finally wrap the backbone success callback to plonk the data in snippet field of an object
    var origSuccess = options.success;
    options.success = function (data, textStatus, xhr) {
        origSuccess({ snippet: data }, textStatus, xhr);
    };

    // Make the request, allowing the user to override any Ajax options.
    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));
    model.trigger('request', model, xhr, options);
    // make the request
    return xhr;
} 
```

标准的主干阅读功能应该在此之后工作。写的会失败，但你总是可以扩展函数来处理这些。

# ruby-on-rails - 由于未定义的字段类型，Solr 无法重新索引

> ID：12332292
> 
> 赞同：1
> 
> 时间：2012-09-08T16:05:41.507
> 
> 标签：ruby-on-rails, solr, sunspot

我继承了一个使用 Solr 的 Rails 应用程序，这对我来说是新的。我现在要做的就是让网站在本地运行。我已经安装了太阳能，但是当我尝试让它在应用程序上运行时，我遇到了问题。我可以跑

```
rake sunspot:solr:start 
```

没有收到任何错误，但是当我尝试重新索引所有内容时，如下所示：

```
rake sunspot:solr:reindex 
```

我收到以下错误：

```
Execute sunspot:reindex
rake aborted!
Solr Response: undefined field type 
```

我从[这篇文章](https://stackoverflow.com/questions/7104673/sunspot-solr-undefined-field-type)中得知这是因为 schema.xml 文件。而且我必须复制该文件。

我在应用程序的根目录中有一个 schema.xml，在 /usr/local/Cellar/solr/3.6.1/libexec/ 的示例目录中有另一个。当我做耙子

```
rake sunspot:solr:start 
```

命令，schema.xml 被复制到我的应用程序的 solr 目录中。是否有更多的复制需要发生？我不确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T17:32:45.257

放入Solr`schema.xml`根`conf`目录下的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-04T21:42:05.447

对于 Solr 4.7，将 schema.xml 和 solrconfig.xml 从 your_app/solr/conf 复制到 /opt/solr/solr/collection1（或任何您的 solr 路径），如果仍然无法正常工作，请确保您的 config/sunspot.yml是这样的：

```
production:
  solr:
    hostname: localhost
    port: 8983
    log_level: WARNING
    path: /solr/collection1
    # read_timeout: 2
    # open_timeout: 0.5 
```

建议从 solr Web 界面创建另一个核心 (my_core)，将 schema.xml 和 solrconfig.xml 复制到该文件夹​​并指向 /solr/my_core 的路径

分步指南：[http ://blog.eemglobal.com/2014/07/setup-rails-4-with-sunspot-gem-and-solr-4-7-in-production-environment-on-ubuntu- 14/](http://blog.eemglobal.com/2014/07/setup-rails-4-with-sunspot-gem-and-solr-4-7-in-production-environment-on-ubuntu-14/)

# ruby - 使用 chiliproject 安装 redmine_backlog

> ID：12332293
> 
> 赞同：1
> 
> 时间：2012-09-08T16:05:46.460
> 
> 标签：ruby, redmine, backlog, chiliproject

我安装了 chiliproject 3.3.0。在遇到一些问题后，它工作正常...

但现在我尝试添加 BackLog 插件，我被困在那里......

我从这里做了安装说明：[http](http://www.redminebacklogs.net/en/installation.html) ://www.redminebacklogs.net/en/installation.html 当我调用那个命令时，`"bundle exec rake redmine:backlogs:install"`我总是得到那个错误：

```
root@debian2:~/redmine_backlogs# bundle exec rake redmine:backlogs:install
/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/bundler-1.2.0/lib/bundler/rubygems_integration.rb:147:in `gem': rake is not part of the bundle. Add it to Gemfile. (Gem::LoadError)
        from /opt/ruby-enterprise-1.8.7-2012.02/bin/rake:18 
```

我真的不知道该尝试什么了：S 请告诉我您需要哪些信息来帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:23:29.400

确保在您的 ChiliProject 主目录中执行命令，例如`/path/to/chiliproject`. 任何`rake`或`bundle`调用都必须在该主目录中执行，而不是在单个插件目录中。

# android - 字符串生成器最大长度

> ID：12332295
> 
> 赞同：2
> 
> 时间：2012-09-08T16:06:03.750
> 
> 标签：android

我想知道字符串生成器（或字符串缓冲区）的最大容量是多少

我的 Android 应用程序中有一个静态变量，它应该保存日志字符串。我它所持有的最大值是 130 行和大约 10000 个字符。我如果我追加更多，但它只是不显示（没有错误没有例外）

所以我想知道字符串生成器中是否存在某种限制或android对静态变量长度施加了某种限制？

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:28:17.353

java StringBuilder 的最大容量是巨大的，在 Android 上是 16mbyte。

当您追加到 StringBuilder 时，它应该会自动增加其容量，但您可以使用该`ensureCapacity()`方法强制它分配额外的空间。

```
myStringBuilder.ensureCapacity(int minimumCapacity) 
```

因此，作为测试，您可以将其设置为更大的容量并确定容量是否存在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:30:05.213

这不是 StringBuilder 的限制，而是您显示文本的小部件的限制！例如，如果您在 TextView 上显示长文本，那么您应该考虑使用这一行：

```
textView.setFilters(new InputFilter[] { new InputFilter.LengthFilter(
            263000) }) // or any other large number that is enough for you 
```

我在某处读到此问题仅特定于某些设备。

# r - ggplot2：向 geom_line 添加点

> ID：12332298
> 
> 赞同：13
> 
> 时间：2012-09-08T16:06:47.077
> 
> 标签：r, ggplot2

我在 ggplot2 中有一个线图，我想为每个数据行添加点（=形状）以清楚地识别它。我不需要（！）在每个数据点都需要一个形状/点，而是一些值就足够了。请参见以下示例：

```
library(ggplot2)
library(data.table)
d=data.table(x=seq(0, 100, by=0.1), y=seq(0,1000)))
ggplot(d, aes(x=x, y=y))+geom_line()
ggplot(d, aes(x=x, y=y))+geom_line()+geom_point() 
```

![仅限线路](../Images/afabb7a5e5193b806f166d7faac1048c.png) ![有加分](../Images/7c3e9f8194f5e9b8978ecd858b8bb010.png)

由于样本数量巨大，形状不再可见，而是相互透支。我只需要其中一些，也许等距间距看起来最好，但我对任何其他解决方案持开放态度。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-09T23:34:01.640

您还可以添加一些点，只需使用索引细化数据即可。

```
library(ggplot2)
library(data.table)
d=data.table(x=seq(0, 100, by=0.1), y=seq(0,1000))
ggplot(d, aes(x=x, y=y))+geom_line()
#Change the length parameter for fewer or more points
thinned <- floor(seq(from=1,to=dim(d)[1],length=70))
ggplot(d, aes(x=x, y=y))+geom_line()+geom_point(data=d[thinned,],aes(x=x,y=y)) 
```

![在此处输入图像描述](../Images/a77a34f06111d94ffadda9eb99182666.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-08T16:18:44.690

您可以使用 绘制某些分位数的点`quantile`。例如，以下序列生成十分位数。

```
quantile(rnorm(100), probs = seq(0, 1, .1))
#         0%         10%         20%         30%         40%         50%         60%         70%         80%         90%        100% 
#-2.43934306 -1.17208001 -0.91497203 -0.69489868 -0.46306926 -0.24133438 -0.03434118  0.39989589  0.72331902  1.06402664  2.02892420 

library(ggplot2)
library(data.table)
d <- data.table(x = seq(0, 100, by=0.1), y = seq(0,1000))

ggplot(d, aes(x=x, y=y))+
geom_line()+
geom_point(aes(x = quantile(x, probs = seq(0, 1, .1)),
               y = quantile(y, probs = seq(0, 1, .1)))) 
```

![用十分位数的点绘图](../Images/e38c711b0e2c40e9fd88390ad40df6c2.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-01T11:10:18.187

只是想添加一个`data.table`也可以处理分组数据的解决方案：

```
library(ggplot2)
library(data.table)

# Creates data from the Weibull distribution
weib_dt <- function(x = seq(0, 4.0, 0.01), w_shape = 1, w_scale = 1) {
  y = dweibull(x, shape = w_shape, scale = w_scale)
  data.table("shape" = as.factor(w_shape), "scale" = as.factor(w_scale), "x" = x, "y" = y)
}

dt_a <- weib_dt(w_shape = 0.5)
dt_b <- weib_dt(w_shape = 1.0)
dt_c <- weib_dt(w_shape = 2.0)
# Bind multiple Weibull samples together, created from different parametrizations
dt_merged <- rbindlist(list(dt_a, dt_b, dt_c))

# Create the plot, using all the points for the lines, and only 9 points per group for the points.
ggplot(dt_merged, aes(x, y, group=shape, color=shape)) + 
  coord_cartesian(ylim = c(0, 1.5)) +
  geom_line() +
  geom_point(data=dt_merged[, .SD[floor(seq(1, .N, length=9))], by=shape], 
             aes(x, y, group = shape,  color = shape, shape = shape)) 
```

这里的技巧是使用`seq`as 和上面建议的解决方案，但这次它是在组内完成的（使用`.SD`）。请注意，当前性能可能会很差，如果速度较慢`.SD`，您可以使用更详细的。`dt[dt[, ..., by =shape]$V1]`

这将创建以下输出：

[![威布尔图](../Images/41b510f158529aee53ba16d450963375.png)](https://i.stack.imgur.com/9JnJC.png)

# ruby-on-rails - 在heroku上部署站点时出错

> ID：12332306
> 
> 赞同：1
> 
> 时间：2012-09-08T16:07:51.450
> 
> 标签：ruby-on-rails, ruby, heroku

所以我刚刚将我的网站部署到heroku。在本地，它显示得很好。我创建了一个名为welcome 的新控制器，并具有索引视图。我还更新了我的路线文件夹。现在我在我的网站上收到一条错误 [消息](http://limitless-cove-5100.herokuapp.com)

这是我的heroku日志的片段，我认为问题在于：

```
 less-cov2012-09-08T15:58:07+00:00 app[web.1]:
                    2012-09-08T15:58:07+00:00 app[web.1]: cache: [GET /] miss
                    2012-09-08T15:58:07+00:00 app[web.1]:
                    2012-09-08T15:58:07+00:00 heroku[router]: GET limitless-cove-5100.herokuapp.com/
                     dyno=web.1 queue=0 wait=0ms service=978ms status=500 bytes=643 
```

这是整个日志：

```
 2012-09-08T16:09:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
                    .2.1/lib/rails/rack/log_tailer.rb:14:in `call'
                    2012-09-08T16:09:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1
                    /lib/rack/handler/webrick.rb:59:in `service'
                    2012-09-08T16:09:15+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpse
                    rver.rb:111:in `service'
                    2012-09-08T16:09:15+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpse
                    rver.rb:70:in `run'
                    2012-09-08T16:09:15+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server
                    .rb:183:in `block in start_thread'
                    2012-09-08T16:09:15+00:00 app[web.1]:
                    2012-09-08T16:09:15+00:00 app[web.1]:
                    2012-09-08T16:09:15+00:00 app[web.1]: cache: [GET /] miss
                    2012-09-08T16:09:15+00:00 heroku[router]: GET limitless-cove-5100.herokuapp.com/
                     dyno=web.1 queue=0 wait=0ms service=6ms status=500 bytes=643
                    2012-09-08T16:09:21+00:00 app[web.1]:
                    2012-09-08T16:09:21+00:00 app[web.1]:
                    2012-09-08T16:09:21+00:00 app[web.1]: Started GET "/" for 66.241.75.198 at 2012-
                    09-08 16:09:21 +0000
                    2012-09-08T16:09:21+00:00 app[web.1]:
                    2012-09-08T16:09:21+00:00 app[web.1]: ActiveRecord::ConnectionNotEstablished (Ac
                    tiveRecord::ConnectionNotEstablished):
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
                    rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:374:i
                    n `retrieve_connection'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
                    rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_specification
                    .rb:168:in `retrieve_connection'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
                    rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_specification
                    .rb:142:in `connection'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
                    rd-3.2.1/lib/active_record/query_cache.rb:67:in `rescue in call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
                    rd-3.2.1/lib/active_record/query_cache.rb:61:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
                    rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:i
                    n `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
                    -3.2.1/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
                    ort-3.2.1/lib/active_support/callbacks.rb:405:in `_run__3191546681124262833__cal
                    l__697506052572710704__callbacks'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
                    ort-3.2.1/lib/active_support/callbacks.rb:405:in `__run_callback'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
                    ort-3.2.1/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
                    ort-3.2.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
                    -3.2.1/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
                    -3.2.1/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
                    -3.2.1/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
                    -3.2.1/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
                    .2.1/lib/rails/rack/logger.rb:26:in `call_app'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
                    .2.1/lib/rails/rack/logger.rb:16:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1
                    /lib/rack/runtime.rb:17:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
                    ort-3.2.1/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
                    -3.2.1/lib/action_dispatch/middleware/request_id.rb:22:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
                    -3.2.1/lib/action_dispatch/middleware/static.rb:53:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1
                    /lib/rack/methodoverride.rb:21:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1
                    /lib/rack/lock.rb:15:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
                    -1.2/lib/rack/cache/context.rb:136:in `forward'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
                    -1.2/lib/rack/cache/context.rb:245:in `fetch'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
                    -1.2/lib/rack/cache/context.rb:185:in `lookup'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
                    -1.2/lib/rack/cache/context.rb:66:in `call!'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
                    -1.2/lib/rack/cache/context.rb:51:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
                    .2.1/lib/rails/engine.rb:479:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
                    .2.1/lib/rails/application.rb:220:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1
                    /lib/rack/content_length.rb:14:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
                    .2.1/lib/rails/rack/log_tailer.rb:14:in `call'
                    2012-09-08T16:09:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1
                    /lib/rack/handler/webrick.rb:59:in `service'
                    2012-09-08T16:09:21+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpse
                    rver.rb:111:in `service'
                    2012-09-08T16:09:21+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpse
                    rver.rb:70:in `run'
                    2012-09-08T16:09:21+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server
                    .rb:183:in `block in start_thread'
                    2012-09-08T16:09:21+00:00 app[web.1]:
                    2012-09-08T16:09:21+00:00 app[web.1]:
                    2012-09-08T16:09:21+00:00 app[web.1]: cache: [GET /] miss
                    2012-09-08T16:09:21+00:00 heroku[router]: GET limitless-cove-5100.herokuapp.com/
                     dyno=web.1 queue=0 wait=0ms service=7ms status=500 bytes=643
                    2012-09-08T16:09:22+00:00 app[web.1]: cache: [GET /favicon.ico] miss, store
                    2012-09-08T16:09:22+00:00 heroku[router]: GET limitless-cove-5100.herokuapp.com/
                    favicon.ico dyno=web.1 queue=0 wait=0ms service=31ms status=200 bytes=0
                    2012-09-08T16:09:22+00:00 app[web.1]:
                    2012-09-08T16:09:22+00:00 app[web.1]:
                    2012-09-08T16:09:22+00:00 app[web.1]: Started GET "/apple-touch-icon-precomposed
                    .png" for 66.241.75.198 at 2012-09-08 16:09:22 +0000
                    2012-09-08T16:09:22+00:00 app[web.1]:
                    2012-09-08T16:09:22+00:00 app[web.1]: ActiveRecord::ConnectionNotEstablished (Ac
                    tiveRecord::ConnectionNotEstablished):
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
                    rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:374:i
                    n `retrieve_connection'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
                    rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_specification
                    .rb:168:in `retrieve_connection'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
                    rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_specification
                    .rb:142:in `connection'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
                    rd-3.2.1/lib/active_record/query_cache.rb:67:in `rescue in call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
                    rd-3.2.1/lib/active_record/query_cache.rb:61:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activereco
                    rd-3.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:i
                    n `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
                    -3.2.1/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
                    ort-3.2.1/lib/active_support/callbacks.rb:405:in `_run__3191546681124262833__cal
                    l__697506052572710704__callbacks'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
                    ort-3.2.1/lib/active_support/callbacks.rb:405:in `__run_callback'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
                    ort-3.2.1/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
                    ort-3.2.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
                    -3.2.1/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
                    -3.2.1/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
                    -3.2.1/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
                    -3.2.1/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
                    .2.1/lib/rails/rack/logger.rb:26:in `call_app'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
                    .2.1/lib/rails/rack/logger.rb:16:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
                    -3.2.1/lib/action_dispatch/middleware/request_id.rb:22:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1
                    /lib/rack/methodoverride.rb:21:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1
                    /lib/rack/runtime.rb:17:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupp
                    ort-3.2.1/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1
                    /lib/rack/lock.rb:15:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack
                    -3.2.1/lib/action_dispatch/middleware/static.rb:53:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
                    -1.2/lib/rack/cache/context.rb:136:in `forward'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
                    -1.2/lib/rack/cache/context.rb:245:in `fetch'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
                    -1.2/lib/rack/cache/context.rb:185:in `lookup'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
                    -1.2/lib/rack/cache/context.rb:66:in `call!'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
                    .2.1/lib/rails/engine.rb:479:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache
                    -1.2/lib/rack/cache/context.rb:51:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
                    .2.1/lib/rails/application.rb:220:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1
                    /lib/rack/content_length.rb:14:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3
                    .2.1/lib/rails/rack/log_tailer.rb:14:in `call'
                    2012-09-08T16:09:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1
                    /lib/rack/handler/webrick.rb:59:in `service'
                    2012-09-08T16:09:22+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpse
                    rver.rb:111:in `service'
                    2012-09-08T16:09:22+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpse
                    rver.rb:70:in `run'
                    2012-09-08T16:09:22+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server
                    .rb:183:in `block in start_thread'
                    2012-09-08T16:09:22+00:00 app[web.1]:
                    2012-09-08T16:09:22+00:00 app[web.1]:
                    2012-09-08T16:09:22+00:00 app[web.1]: cache: [GET /apple-touch-icon-precomposed.
                    png] miss
                    2012-09-08T16:09:22+00:00 heroku[router]: GET limitless-cove-5100.herokuapp.com/
                    apple-touch-icon-precomposed.png dyno=web.1 queue=0 wait=0ms service=6ms status=
                    500 bytes=643 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:44:56.907

确保您的[Gemfile](https://devcenter.heroku.com/articles/bundler#using-bundler-with-rails-3)有

```
 gem 'pg', :group => :production 
```

由于 heroku 在 Postgres 上运行，它需要适配器。如果没有添加它并重新捆绑并推送您的 Gemfile 和 Gemfile.lock 并重新部署

# sql - SQL查询以获取最大某些列的行

> ID：12332308
> 
> 赞同：-4
> 
> 时间：2012-09-08T16:08:21.933
> 
> 标签：sql

我有一个 VehicleData 表。需要编写 SQL 查询以获取每辆车的最大速度行。也就是说，我需要一个包含 5 行（比如 5 辆不同的车辆）的结果集，每行对应于相应车辆的最大速度。我知道它很简单，但我无法以某种方式得到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:10:24.260

在没有看到您的表结构的情况下，您将使用`MAX()`聚合函数和一个`GROUP BY`子句来确保您获得每辆车的一条记录：

```
SELECT vehicleName, Max(speed)
FROM yourtable
GROUP BY vehicleName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:10:17.650

尝试：

```
select vehicle, max(speed)
from table
group by vehicle 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T16:10:48.033

您应该能够使用以下使用[max](http://www.w3schools.com/sql/sql_func_max.asp)函数的语法：

```
select vehicleID, max(vehicleSpeed) from vehicleData group by vehicleID 
```

# c# - 使用带有 CefSharp 或 CefGlue 的 JavaScript 的本地或流式音频

> ID：12332309
> 
> 赞同：3
> 
> 时间：2012-09-08T16:08:35.160
> 
> 标签：c#, javascript, html, audio, chromium

我一直在[玩弄 CefSharp](https://github.com/chillitom/CefSharp)和[CefGlue](https://bitbucket.org/xilium/xilium.cefglue/wiki/Home)，并设法让 CefSharp 在 C# 应用程序中运行良好。

使用 CefSharp，我能够执行 JavaScript 并从内存中加载 HTML。例如，要执行一些 JavaScript，可以这样做：

```
view.ExecuteScript("setInterval(function(){alert(\"Hello\")},3000);"); 
```

要加载一些 HTML：

```
model.LoadHtml(string.Format("<html><body><a href='{0}'>CefSharp Home</a></body></html>", home_url)); 
```

我知道我可以`<audio>`加载从某个 Web 服务器加载的一些文件。有没有办法从本地文件或通过 CefGlue/Sharp 的流加载音频？

更好的是，如何使用“动态”JavaScript（例如通过使用`ExecuteScript(...)`上面的）来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:03:41.707

我已经想通了。它是通过模拟 Web 服务器来完成的。困难似乎在于对所请求内容的解释，这似乎是通过解析请求的 URL 来完成的。否则一切都很好。

```
public bool OnBeforeResourceLoad(IWebBrowser browser, 
    IRequestResponse requestResponse)
{
    IRequest request = requestResponse.Request;

    if (request.Url.EndsWith(".gif")) {
        MemoryStream stream = new System.IO.MemoryStream();
        Properties.Resources.FooImage.Save(
            stream, System.Drawing.Imaging.ImageFormat.Bmp);
        requestResponse.RespondWith(stream, "image/gif");
    }
    else {

        Stream resourceStream = new MemoryStream(Encoding.UTF8.GetBytes(
            "<html><body><img src=\"foo.gif\" /></body></html>"));
        requestResponse.RespondWith(resourceStream, "text/html");
    }

    return false;
} 
```

# r - 在 R 中有效地居中一个大矩阵

> ID：12332310
> 
> 赞同：6
> 
> 时间：2012-09-08T16:09:02.477
> 
> 标签：r, center, data-manipulation

我有一个大矩阵，我想居中：

```
X <- matrix(sample(1:10, 5e+08, replace=TRUE), ncol=10000) 
```

使用 colMeans 可以快速有效地找到均值：

```
means <- colMeans(X) 
```

但是从每列中减去各自的平均值有什么好的（快速且内存效率高）的方法？这有效，但感觉不对：

```
for (i in 1:length(means)){
  X[,i] <- X[,i]-means[i] 
} 
```

有没有更好的办法？

/edit：这是 DWin 在更大矩阵上编写的各种基准测试的修改，包括其他发布的建议：

```
require(rbenchmark)
X <- matrix(sample(1:10, 5e+07, replace=TRUE), ncol=10000)
frlp.c <- compiler:::cmpfun(function(mat){
  means <- colMeans(mat)
  for (i in 1:length(means)){
    mat[,i] <- mat[,i]-means[i] 
  }
  return(mat)
})

mat.c <- compiler:::cmpfun(function(mat){
  t(t(X) - colMeans(X))
})

swp.c <- compiler:::cmpfun(function(mat){
  sweep(mat, 2, colMeans(mat), FUN='-')
})

scl.c <- compiler:::cmpfun(function(mat){
  scale(mat, scale=FALSE)
})

matmult.c <- compiler:::cmpfun(function(mat){
  mat-rep(1, nrow(mat)) %*% t(colMeans(mat))
})

benchmark( 
  frlp.c=frlp.c(X),
  mat=mat.c(X),
  swp=swp.c(X),
  scl=scl.c(X), 
  matmult=matmult.c(X),
  replications=10,
  order=c('replications', 'elapsed')) 
```

matmult 函数似乎是新的赢家！我真的很想在 5e+08 元素矩阵上尝试这些，但我一直用完 RAM。

```
 test replications elapsed relative user.self sys.self user.child sys.child
5 matmult           10   11.98    1.000      7.47     4.47         NA        NA
1  frlp.c           10   35.05    2.926     31.66     3.32         NA        NA
2     mat           10   50.56    4.220     44.52     5.67         NA        NA
4     scl           10   58.86    4.913     50.26     8.42         NA        NA
3     swp           10   61.25    5.113     51.98     8.64         NA        NA 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T16:16:26.997

这对你有用吗？

```
sweep(X, 2, colMeans(X)) # this substracts the colMean to each col
scale(X, center=TRUE, scale=FALSE) # the same

sweep(X, 2, colMeans(X), FUN='/') # this makes division 
```

如果您想根据`for`循环加速您的代码，您可以使用`cmpfun`package.json `compiler`。例子

```
X <- matrix(sample(1:10, 500000, replace=TRUE), ncol=100) # some data
means <- colMeans(X) # col means

library(compiler)

# One of your functions to be compiled and tested
Mean <- function(x) {
  for (i in 1:length(means)){
      X[,i] <- X[,i]-means[i] 
  }
  return(X)
}

CMean <- cmpfun(Mean) # compiling the Mean function

system.time(Mean(X))
   user  system elapsed 
  0.028   0.016   0.101 
system.time(CMean(X))
   user  system elapsed 
  0.028   0.012   0.066 
```

也许这个建议可以帮助你。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-08T17:23:02.970

这似乎比`sweep()`.

```
X - rep(1, nrow(X)) %*% t(colMeans(X))

X <- matrix(sample(1:10, 5e+06, replace=TRUE), ncol=10000)
system.time(sweep(X, 2, colMeans(X)))
   user  system elapsed 
   0.33    0.00    0.33 
system.time(X - rep(1, nrow(X)) %*% t(colMeans(X)))
   user  system elapsed 
   0.15    0.03    0.19 
```

DWin 编辑：当我使用比使用的 OP 更小的矩阵（仅 5e+07）执行此操作时，我得到了这些时间，其中 Josh 的为 mat2（较大的矩阵溢出到我的 Mac 上的虚拟内存中 w/32GB 并需要终止） ：

```
 test replications elapsed relative user.self sys.self user.child sys.child
2 mat2            1   0.546 1.000000     0.287    0.262          0         0
3  mat            1   2.372 4.344322     1.569    0.812          0         0
1 frlp            1   2.520 4.615385     1.720    0.809          0         0
4  swp            1   2.990 5.476190     1.959    1.043          0         0
5  scl            1   3.019 5.529304     1.984    1.046          0         0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-08T16:46:03.293

我可以理解为什么 Jilber 不确定你想要什么，因为在某一时刻你要求除法，但在你的代码中你使用减法。他建议的扫描操作在这里是多余的。只需使用 scale 就可以了：

```
 cX <- scale(X, scale=FALSE) # does the centering with subtraction of col-means
 sX <- scale(X, center=FALSE) # does the scaling operation
 csX <- scale(X) # does both 
```

（很难相信它`scale`更慢。看看它的代码。用于`sweep`列）

```
 scale.default # since it's visible. 
```

矩阵方法：

```
t( t(X) / colMeans(X) ) 
```

编辑：一些时间（我错了`scale`等同于sweep-colMeans）：

```
require(rbenchmark)
benchmark(
    mat={sX <- t( t(X) / colMeans(X) ) },
    swp ={swX <- sweep(X, 2, colMeans(X), FUN='/')},
    scl={sX <- scale(X, center=FALSE)}, 
    replications=10^2,
    order=c('replications', 'elapsed'))
#-----------
  test replications elapsed relative user.self sys.self user.child sys.child
1  mat          100   0.015 1.000000     0.015        0          0         0
2  swp          100   0.015 1.000000     0.015        0          0         0
3  scl          100   0.025 1.666667     0.025        0          0         0 
```

当你扩大规模时，会发生一些有趣的事情。上面的 timigns 对小矩阵-X 很生气。以下是更接近您使用的内容：

```
 benchmark( 
        frlp ={means <- colMeans(X)
                       for (i in 1:length(means)){
                              X[,i] <- X[,i]-means[i] 
                                }
                      },
         mat={sX <- t( t(X) - colMeans(X) )    },
         swp ={swX <- sweep(X, 2, colMeans(X), FUN='-')},
         scl={sX <- scale(X, scale=FALSE)}, 
     replications=10^2,
     order=c('replications', 'elapsed'))
#    
  test replications elapsed relative user.self sys.self user.child sys.child
2  mat          100   2.075 1.000000     1.262    0.820          0         0
3  swp          100   2.964 1.428434     1.917    1.058          0         0
4  scl          100   2.981 1.436627     1.935    1.059          0         0
1 frlp          100   3.651 1.759518     2.540    1.128          0         0 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-08T17:22:00.087

也许编译你的`frlp()`函数会加快速度？

```
frlp.c <- compiler:::cmpfun(function(mat){
              means <- colMeans(mat)
              for (i in 1:length(means)){
                mat[,i] <- mat[,i]-means[i] 
              }
              mat
            }
          ) 
```

`X`[编辑]：对我来说，它并没有加快速度，但我必须大大缩小才能在我的电脑上工作。它可能扩展得很好，不知道

您可能还希望与 JIT 进行比较：

```
frlp.JIT <- function(mat){
              means <- colMeans(mat)
              compiler::enableJIT(2)
              for (i in 1:length(means)){
                mat[,i] <- mat[,i]-means[i] 
              }
              mat
            } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-08T19:54:20.717

这里还有一些，没有一个比 Josh 快：

```
X <- matrix(runif(1e6), ncol = 1000)
matmult    <- function(mat) mat - rep(1, nrow(mat)) %*% t(colMeans(mat))
contender1 <- function(mat) mat - colMeans(mat)[col(mat)]
contender2 <- function(mat) t(apply(mat, 1, `-`, colMeans(mat)))
contender3 <- function(mat) mat - rep(colMeans(mat), each = nrow(mat))
contender4 <- function(mat) mat - matrix(colMeans(mat), nrow(mat), ncol(mat),
                                         byrow = TRUE)
benchmark(matmult(X),
          contender1(X),
          contender2(X),
          contender3(X),
          contender4(X),
          replications = 100,
          order=c('replications', 'elapsed'))
#       test replications elapsed relative user.self sys.self
# 1    matmult(X)          100    1.41 1.000000      1.39     0.00
# 5 contender4(X)          100    1.90 1.347518      1.90     0.00
# 4 contender3(X)          100    2.69 1.907801      2.69     0.00
# 2 contender1(X)          100    2.74 1.943262      2.73     0.00
# 3 contender2(X)          100    6.30 4.468085      6.26     0.03 
```

请注意，我正在测试数字矩阵，而不是整数；我认为更多的人会发现这很有用（如果它有什么不同的话。）

# java - 列表java中的任意数量的列表

> ID：12332314
> 
> 赞同：1
> 
> 时间：2012-09-08T16:09:16.207
> 
> 标签：java

有没有办法可以在java中的列表中添加任意数量的列表？

例如：

```
List<List<T>, List<T>, List<T>> 
```

我知道这是不正确的语法，但我想做这样的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T16:11:40.977

`List<List<T>>`将持有任意数量的`List<T>`. 例如：

```
List<List<T>> listOfLists = new ArrayList<List<T>>();

for (int i = 0; i < 10; i++) { // 10 is arbitrary here; just an example
    listOfLists.add(new ArrayList<T>());
} 
```

如果没有关于用例或为什么要这样做的更多信息，我不能更具体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T16:38:21.870

如果您的意思是任意嵌套的列表列表列表列表...您可能希望使用树结构代替，如下所示：

```
class Tree<T> {
    T element;
    List<Tree<T>> children;
} 
```

或者这个，如果你想分离中间层和值：

```
interface Tree<T> { 
}

class TreeNode<T> implements Tree<T> {
    List<Tree<T>> children;
}

class TreeLeaf<T> implements Tree<T> {
    T element;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T16:16:13.183

假设您有列表`list1`, `list2`, ..., `listN`，您可以通过多种方式解决此问题：

**为 n 元组创建自己的类：** 这种方法将允许您将元组限制为特定大小，而无需重新实现`Collection`or`List`类的方法。

```
public class ThreeTuple<A, B, C> {
    private final A first;
    private final B second;
    private final C third;

    public ThreeTuple(A first, B second, C third) {
        this.first = first;
        this.second = second;
        this.third = third;
    }

    public A getFirst() {
        return first;
    }

    public B getSecond() {
        return second;
    }

    public C getThird() {
        return third;
    }
}

public class OtherClass {
    public static void main(String[] args) {
        new ThreeTuple(list1, list2, list3);
    }
} 
```

**将 n 个列表添加到列表中：** 这种方法绝对是最简单的，但不限制列表。

```
List<List<T>> lists = new ArrayList<T>();
lists.add(list1);
lists.add(list2);
lists.add(list3); 
```

# java - MVC - Java Swing 中的观察者/可观察模式

> ID：12332315
> 
> 赞同：1
> 
> 时间：2012-09-08T16:09:30.163
> 
> 标签：java, swing, model-view-controller, observer-pattern

我正在尝试构建一个基于 MVC 的 Swing 用户界面，并且有几个关于该主题的问题。问我问题的最好方法是借助一个简单的例子。

假设我们有一个带有一个 JButton 和 3 个 JTextField 的 JDialog。当按下该按钮时，我希望此 JDialog 关闭并打开另一个需要来自 3 个 JTextField 的数据的按钮。

这样做的简单方法（只需要代码片段，不需要太烦你）是：

```
myButton.addMouseListener(new MouseAdapter(){

    @Override
    public void mouseClicked(MouseEvent evt){
        firstFrame.setVisible(false);
        secondFrame.setData(jTextField1.getText(),jTextField2.getText(),jTextField3.getText());//just sending the data to the new window, would be this or something similar
        secondFrame.setVisible(true);
        }}); 
```

或类似的东西。

第一个问题：如果我不使用匿名内部类，但决定为我的 Listener 使用单独的类，我将如何将数据从 3 个 JTextFields 传递到我的 mouseListener 类？除了在 Listener 类中保留视图的引用之外，还有其他选择吗？

继续，给定 MVC 模式：

第二个问题：我想监听器（根据 MVC 的控制器）在不涉及模型的情况下调用另一个窗口是有意义的，我猜这是工作。但是需要从一个窗口传递到下一个窗口的数据（来自 3JTextFields 的数据）不应该通过模型吗？就像让第一个窗口将数据保存在模型中，然后当第二个窗口需要它们时从模型中请求它们。

第三个问题：我正在考虑使用 Observer/Observable 模式。在此示例中如何使用它来打开最后一个窗口？我的意思是，因为（我认为）Controller 是打开第二个窗口的类，这是否意味着 Listener 必须被 Observed 并且第二个窗口必须是 Observer 以便 Listener 会说

```
 notifyObservers("openSecondWindow"); 
```

然后第二个窗口会看到它并自行打开？

最后：我听说 PropertyChangeListener 也可以工作，而且有时它优于观察者/可观察模式。你对此有何看法，尤其是关于我的例子。

我很困惑..

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:45:50.930

我不确定 Java 的特定方面。但是谈到 OOP，让您的应用程序通过事件驱动设计解耦是非常合理的。因此，您不会直接处理组件，而是触发事件，正如您所写`notifyObservers("openSecondWindow");`：

但是，您不需要通过模型层来执行此操作。相反，您应该有一个`event`代表给定事件的类，并在事件类中设置提到的字段的值。

就像是：

```
exampleEvent.setProperty1('blah').setProperty2('blah2');
notify('openSecondFrame', exampleEvent); 
```

不久前，我发布了一个关于这个事件驱动的东西的问题：

[PHP：我是否将事件驱动编程与信号感知接口（信号和插槽/观察者模式）混为一谈？](https://stackoverflow.com/questions/12232874/php-am-i-mixing-up-event-driven-programming-with-signals-aware-interfaces-sing)

您可能有兴趣阅读几个链接（它是 PHP，但该概念适用于 OOP）。

因此，遵循这个概念，创建一个`EventHandler`组件来管理这些事件和信号是一个好主意。

但同样，考虑到我不精通 Java。这只是关于 OOP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:13:56.910

## 第一个问题

> 如果我不使用匿名内部类但决定为我的 Listener 使用单独的类，我将如何将数据从 3 个 JTextFields 传递到我的 mouseListener 类？

您的单独`MouseAdapter`类将有一个构造函数，您可以在其中将您需要的内容从您的`JPanel`类传递给您的`MouseAdapter`类。

这段代码适用于`ActionListener`，但我认为总体思路将向您展示如何编写一个`MouseAdapter`类。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import com.ggl.project.planner.model.Planner;
import com.ggl.project.planner.model.Project;
import com.ggl.project.planner.view.CreateUpdateProjectDialog;
import com.ggl.project.planner.view.ProjectPlannerFrame;

public class CreateProjectActionListener implements ActionListener {

    protected Planner planner;

    protected Project project;

    protected ProjectPlannerFrame frame;

    public CreateProjectActionListener(ProjectPlannerFrame frame,
            Planner planner, Project project) {
        this.frame = frame;
        this.planner = planner;
        this.project = project;
    }

    @Override
    public void actionPerformed(ActionEvent event) {
        CreateUpdateProjectDialog dialog = 
                new CreateUpdateProjectDialog(frame, project, true);
        if (dialog.isOkPressed()) {
            planner.setProjectOpen(true);
        }
    }

} 
```

## 第二个问题

> 我想监听器（根据 MVC 的控制器）在不涉及模型的情况下调用另一个窗口是有意义的，我猜这是工作。但是需要从一个窗口传递到下一个窗口的数据（来自 3JTextFields 的数据）不应该通过模型吗？就像让第一个窗口将数据保存在模型中，然后当第二个窗口需要它们时从模型中请求它们。

我不确定我是否理解你的问题。当我构建一个 GUI 时，我有一个或多个数据模型来表示来自 GUI 的值。这些数据模型的实例通过构成 GUI 的大多数组件传递。

应用程序的其余部分通过模型访问 GUI 信息。

在`ActionListener`我作为第一个问题答案的一部分发布的课程中，有 2 个数据模型，`Project`并且`Planner`. `Project`特定于特定项目，而`Planner`对 GUI 来说是全局的。

## 第三个问题

> 我正在考虑使用 Observer/Observable 模式。在此示例中如何使用它来打开最后一个窗口？

Swing 已经内置了侦听器模式。您可以将操作侦听器用于您自己的操作。您甚至可以将自己的侦听器类型添加到 Swing，尽管这是一个痛苦的过程。当我扩展 a`JPanel`以制作`JCroppingPanel`.

# c - C中的逻辑运算符

> ID：12332316
> 
> 赞同：2
> 
> 时间：2012-09-08T16:09:43.257
> 
> 标签：c, logical-operators

我很难理解逻辑运算符在 C 中的工作原理。我已经了解位级运算符的工作原理，而且我还知道逻辑运算符将非零参数视为表示 TRUE，将零参数视为表示 FALSE

但是假设我们有 0x65 && 0x55。我不明白这个操作为什么以及如何给出 0x01。

我试图将其转换为二进制，但我无法弄清楚它是如何工作的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:12:29.957

`&&`操作员：

如果左操作数和右操作数都不同于`0`它的求值结果，`1`否则它的求值结果为`0`。

如果左操作数为`0`，则不计算右操作数，结果为`0`。

`0x65 && 0x55`被评估为`1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T16:13:24.173

The`&&`是一个逻辑`AND`（而不是`&`，它是*按位* `AND`的）。它只关心它的操作数是零/非零值。零被认为是`false`，而非零被视为`true`。

在您的情况下，两个操作数都是非零的，因此它们被视为`true`，导致结果也是`true`如此。C 表示`true`为`1`，说明您的操作的总体结果。

如果将操作更改为`&`，您将获得按位操作。`0x65 & 0x55`会给你一个结果`0x45`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T16:39:10.590

C 和 C++ 具有三个[逻辑运算符](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Logical_operators)：逻辑非（`!`）、逻辑与（`&&`）和逻辑或（`||`）。对于逻辑运算符，`0`是 false 并且[任何不为零的都是 true](https://stackoverflow.com/a/5189081)。此[真值表](http://en.wikipedia.org/wiki/Truth_table)说明了每个逻辑运算符的工作原理（将`1`用于 for `true`）：

```
p     q     p && q    p || q
=     =     ======    ======
1     1       1         1
1     0       0         1
0     1       0         1
0     0       0         0 
```

真值表`!`如下：

```
p    !p
=    ===
1     0
0     1 
```

对于您的具体情况：

```
0x65 && 0x55 
```

由于整个表达式的操作数`0x65`和`0x55`求值都求值为并因此[扩展为](https://stackoverflow.com/a/5369783/1708801)，这适用于但链接线程中的其他答案也解释了它之前的应用方式。`true``true`[`1`](https://stackoverflow.com/a/5369783/1708801)`c99``c99`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T16:13:00.917

`&&`是逻辑运算符，而不是位运算符。0x65 和 0x55 都为真，因此结果为真数。0x01 是一个真实的数字。

二进制表示仅对按位运算起作用。表达式`0x65 & 0x55`等于`0x45`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T16:13:48.550

任何计算结果为 0 的表达式都是假的。任何非零的表达式都是真的。所以 0x65 和 0x55 都是真的。

0x65 && 0x55

=> 真 && 真 => 真

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-08T18:32:19.737

> 我试图将其转换为二进制

这可能妨碍了理解。和 的确切位模式`0x65`与`0x55`所需结果完全无关，重要的是它们都是非零的。您可以考虑`a = (0x65 && 0x55)`等效于以下内容：

```
if (0x65 != 0) goto condition_false;
if (0x55 != 0) goto condition_false;
a = 1;
goto condition_end;
condition_false:
a = 0;
condition_end: 
```

给定的实现可能能够发出比这更有效的代码（尽管我已经看到了很多发出的代码，每个代码`if ... goto`都是程序集中的测试和分支）。更高效的代码可能涉及一些位操作以避免分支。就此而言，在这个涉及常量的示例中，编译器可能只会发出`a = 1;`.

不过，运算符的*含义*`&&`是在条件执行方面。例如，如果您编写`f() && g()`，则保证当`f`返回 false 值时，`g`不会调用。如果可以通过位旋转获得相同的结果，那么这可能是性能的奖励。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-08T16:14:15.097

C 将大于零的值定义为“真”。由于 0x65 和 0x55 都符合此条件，因此结果也是 True - 在输出中为 1 - 或者在十六进制表示法中为 0x01。

您的代码的另一种编写方式是：

返回（0x65 为真）和（0x55 为真）；

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-08T16:14:35.950

正如您所说，逻辑运算符将非零参数视为表示

```
 (0x65 && 0x55) is equal as (0x65 > 0) && (0x55 > 0)

 0x65 > 0 get true and 0x55 > 0 get true as well

 So (0x65 && 0x55)  is equal true && true = 1 
```

# magento - Magento 使用 varnish 进行整页缓存

> ID：12332318
> 
> 赞同：2
> 
> 时间：2012-09-08T16:10:18.010
> 
> 标签：magento, caching, varnish

我一直在查看 magento 中的整页缓存，但对此以及动态块的发送方式没有意义。

对于包含动态数据的块，仍需要引导应用程序并且需要构建布局以生成块，例如购物篮内容、最近查看等

服务器现在正在做更多的工作。

这是正确的，如果是这样，如何解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:13:38.180

我的 2 美分：

这取决于你如何做你的FPC......

## “代理缓存”

如果您正在使用其他一些缓存前端/代理，例如 nginx 或 varnish 或 [在此处插入一个]，那么它确实会像您一样减少负载：

1.  一个请求获取页面的“框架”，该页面在缓存后甚至不会触及 php 或 magento 或 mysql，只是提供一个静态文件。因此，一旦它被缓存，它就不需要引导应用程序或加载和解析任何布局/配置/系统 xml。
2.  第二个请求是获取动态内容，并且要轻得多。是的，它仍然必须使用 config/layout/system xml，但这应该已经被缓存并且它不必根据动态需求创建/处理那么多块。

还取决于您的需要，您可以将信息存储在 cookie 中以供 js 在页面加载后使用而不执行第二次请求，这再次取决于动态信息的动态和敏感程度。

所以请求流是：

1.  请求-> nginx/varnish/etc（超快）-> 响应...
2.  ajax 请求 -> Magento 用于动态内容（如果处理整个页面，则处理更轻松） -> 响应 -> js 替换元素。

是的，您确实为额外的往返支付了费用，但是您确实可以立即为客户加载内容，并且在处理 ajax 请求时，浏览器可能会从服务器中提取图像/css/其他 js，这很好。

## “Magento FPC”

老实说，我不知道企业版是如何做到的（只是还没有阅读代码），但在处理大多数（不是全部）事情之前，有一个部分可以附加缓存处理器。在那个环境中，应用程序已经被引导并加载了一些配置，因此您实际上可以从缓存中拉取 FPC，然后用特定信息替换占位符，并在一个请求中将其发送出去。

再次请求流程：

请求-> Magento（在路由等之前）-> 打孔-> 响应。

因此，在动态内容出现之前，事情不会开始加载，但您没有额外的往返行程。

结论：

至于哪个是最好的，这取决于您的需求和设置。这些只是我见过的两种不同的设置，在我的测试中，任何一种方法的表现都完全没有 FPC。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:01:43.187

不确定我是否理解您的问题，但 Magento 和您的服务器将做更少的工作，因为它只会生成和交付您由 XML 定义的打孔的动态块。页面的其余部分是由 varnish 提供的静态 html，它甚至不会将这些请求传递给 magento。

看看 Fabrizio Branca 博客中的这张图表：

![在此处输入图像描述](../Images/5c6c623cbe9791311d518c8423cb193d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T00:49:18.133

是的，第二个请求到达服务器。它还在第 30 行加载布局。这意味着将加载某些句柄 - 默认、customer_logged_out（或 in）和呼叫控制器（我错过了什么吗？）。在此博客[http://www.fabrizio-branca.de/make-your-magento-store-fly-using-varnish.html](http://www.fabrizio-branca.de/make-your-magento-store-fly-using-varnish.html)中，建议您将占位符添加到默认句柄。unsetChild 方法允许您在调用控制器中仍按名称加载块。其原因在一些艾伦风暴博客中有所描述，并且（我认为）他的一个模块处理了一些关于删除而不是未设置块的问题。这个模块并没有真正处理缓存失效。也许你应该查看这篇文章[magento 开源整页缓存](https://stackoverflow.com/questions/13241591/magento-open-source-full-page-cache)

# javascript - 使用 Asset Pipeline 如何在 Javascript 中提供图像？

> ID：12332322
> 
> 赞同：0
> 
> 时间：2012-09-08T16:10:56.590
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, asset-pipeline

我的资产/javascript中有以下js

```
jQuery ->
  if $('.pagination').length
    $(window).scroll ->
      url = $('.pagination .next_page').attr('href')
      if url && $(window).scrollTop() > $(document).height() - $(window).height() - 50
        $('.pagination').html('<img src="images/spinner.gif" />')
        $.getScript(url)
    $(window).scroll() 
```

在这里，我需要一个微调器动画，但不是在 localhost 上获取的。

```
No route matches [GET] "/images/spinner.gif" 
```

我已经跑了

```
rake assets:precompile:all RAILS_ENV=development 
```

并且我的图像被正确放置在资产/图像中（和公共）所以这让我认为我调用这个图像的方式一定是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:32:23.920

首先，阅读并阅读提供资产的[开发](http://guides.rubyonrails.org/asset_pipeline.html#in-development)和[生产](http://guides.rubyonrails.org/asset_pipeline.html#in-production)[`rails asset pipeline`](http://guides.rubyonrails.org/asset_pipeline.html)方式之间的区别，这将帮助您了解如何提供资产

如果您将 erb 扩展添加到 JavaScript 资产，使其类似于 application.js.erb，那么您可以在 JavaScript 代码中使用asset_path 帮助程序：

```
 jQuery ->
  if $('.pagination').length
    $(window).scroll ->
      url = $('.pagination .next_page').attr('href')
      if url && $(window).scrollTop() > $(document).height() - $(window).height() - 50
        $('.pagination').html('<%= asset_path('logo.png') %>')
        $.getScript(url)
    $(window).scroll() 
```

# asp.net - 在 ASP.Net 中动态添加用户控件

> ID：12332324
> 
> 赞同：0
> 
> 时间：2012-09-08T16:11:12.730
> 
> 标签：asp.net

每次在 ASP.Net 页面中单击按钮时，我都会尝试添加一个*MyWUCtr.ascx 。*

**页面加载代码：**

```
if (!Page.IsPostBack)
            {
                Session["ctrid"] = "0";
            }
            if (Session["myctrs"] != null)
            {
                Panel1.Controls.Clear();
                Panel p = ((Panel)Session["myctrs"]);
                foreach (Control c in p.Controls)
                {
                    if (c is UserControl)
                        Panel1.Controls.Add(c);
                }
            } 
```

**按钮点击代码：**

```
int x = Convert.ToInt32(Session["ctrid"].ToString());

MyWUCtr ctr = LoadControl("~/MyWUCtr.ascx") as MyWUCtr;
ctr.ID = "myctr" + x.ToString();

x++;
Panel1.Controls.Add(ctr);
Session["myctrs"] = Panel1;
Session["ctrid"] = x.ToString(); 
```

这个控件只有一个*文本框*和一个*按钮*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:06:38.237

您的问题并不清楚您遇到了什么问题。

但是，如果您在事件处理程序中动态添加控件，则每次页面加载时都需要以相同的顺序和相同的 ID 重新创建和重新添加它们。这将要求您跟踪 - 在某个持久化的地方，例如在 ViewState 中 - 您添加了多少控件，以及（如果它可以变化）您将它们放在哪个控件的 Controls 集合中。

ViewState 可以恢复它们的状态，但它们必须已经存在于页面的控制树中才能实现。因此需要重新创建它们。Microsoft 提供的控件（如 GridView）在内部执行此操作（这就是为什么即使您不重新绑定它们，它们也会引发 DataItemCreated 事件），但如果您是创建和添加它们以响应事件的人，那么您就是负责在回发后重新创建它们。

要记住的是，在页面加载时自动创建的唯一控件是那些声明为标记的控件。其他所有内容，您每次都需要添加。

# service - PowerShell 2 中的 sc start ... 和 Start-Service ... 之间的区别

> ID：12332327
> 
> 赞同：4
> 
> 时间：2012-09-08T16:12:00.643
> 
> 标签：service, powershell-2.0, windows-server-2003

我在同一台机器上安装了一些不同的服务。我正在编写一个 PowerShell 2 脚本来启动和停止它们。

对于某些服务，我可以使用`Start-Service -displayname "the service"`它来成功启动它。在其他情况下，使用`Start-Service`cmdlet 会导致错误，如“无法在计算机 '.' 上启动服务 ...”。

在我使用`Start-Service`cmdlet 出错的情况下，`sc start "the service"`总是成功。

反之亦然（尽管`sc start`不返回任何错误——它根本不启动服务。）

这些命令之间有什么区别吗？我应该使用其他命令吗？最后，我可以从 cmdlet 中“捕获”任何错误，并且只包含两个命令以涵盖所有基础吗？

这个问题对我来说是可重复的，即使我卸载并重新安装该服务。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T08:51:40.330

我不确定 和 之间的区别`sc start`，`start-service`但你可以使用 wmi 来做你想做的事。

启动服务：

```
(get-wmiobject win32_service -filter "name='the service'").startService() 
```

要停止服务：

```
(get-wmiobject win32_service -filter "name='the service'").stopService() 
```

要检查服务的状态，您可以使用：

```
get-wmiobject win32_service -filter "name='the service'" 
```

它将向您显示状态以及启动模式。如果要自动执行此操作，可以使用以下内容。

要停止服务：

```
if ((get-wmiobject win32_service -filter "name='the service'").state -eq "Running") {
    (get-wmiobject win32_service -filter "name='the service'").stopService()
} # Stops the service if it is running 
```

启动服务：

```
if ((get-wmiobject win32_service -filter "name='the service'").state -eq "Stopped") {
    (get-wmiobject win32_service -filter "name='the service'").startService()
} # starts the service if it is stopped 
```

我相信你可以修改这些以满足你的需要。

我喜欢使用 wmi 的原因是能够指定`-computername`和`-credentials`. 它使您可以访问远程系统并在您拥有非域系统时对其进行身份验证。希望有帮助。祝你有美好的一天！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-17T20:24:32.810

在 powershell`sc`中是`Set-Content`. 看，和你跑进来`help sc`的时候不一样。`sc``cmd.exe`

你可能想看看`Start-Service`, `Restart-Service`, `Stop-Service`. 用于`Get-Command`帮助您找到所需的命令行开关：

```
PS C:\> Get-Command | findstr Service
Cmdlet   Get-Service           Microsoft.PowerShell.Management
Cmdlet   New-Service           Microsoft.PowerShell.Management
Cmdlet   New-WebServiceProxy   Microsoft.PowerShell.Management
Cmdlet   Restart-Service       Microsoft.PowerShell.Management
Cmdlet   Resume-Service        Microsoft.PowerShell.Management
Cmdlet   Set-Service           Microsoft.PowerShell.Management
Cmdlet   Start-Service         Microsoft.PowerShell.Management
Cmdlet   Stop-Service          Microsoft.PowerShell.Management
Cmdlet   Suspend-Service       Microsoft.PowerShell.Management 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T20:02:50.010

`sc start`这可能与在某些情况下无法正常工作 的原因有关：http: [//www.windowsitpro.com/article/powershell-faqs/q-do-normal-windows-commands-run-in-powershell](http://www.windowsitpro.com/article/powershell-faqs/q-do-normal-windows-commands-run-in-powershell)

也许我需要这样称呼它： `& "sc start 'the service'"`

# ruby-on-rails-3 - 可安装引擎的脚手架生成的功能测试在命名路由上失败

> ID：12332331
> 
> 赞同：2
> 
> 时间：2012-09-08T16:12:17.107
> 
> 标签：ruby-on-rails-3

环境：

*   红宝石 1.9.3p194
*   导轨 3.2.8

当我创建 rails 的可安装引擎“MyEngine”并在“post”模型上生成脚手架时，即使我通过以下步骤进行了修改，功能测试也会失败：

1.  通过以下方式创建可安装引擎：

    > ```
    > $ rails plugin new my_engine --mountable
    > $ cd my_engine
    > $ rake db:create; rake db:migrate; rake db:setup
    > $ rails g scaffold post name zip
    > $ rake db:migrate 
    > ```

2.  'rake test' 失败如下：

    > ```
    > $ rake test
    > NoMethodError: undefined method `posts' for
    > <MyEngine::PostsControllerTest:0xacd1fa4> 
    > ...my_engine/test/functional/my_engine/posts_controller_test.rb:6:in
    > 'block in <class:PostsControllerTest>'
    > ... 
    > ```

3.  根据[https://github.com/rails/rails/issues/4971](https://github.com/rails/rails/issues/4971)和 [http://edgeguides.rubyonrails.org/engines.html“5.1](http://edgeguides.rubyonrails.org/engines.html)功能测试”，我修改了两处：

    1.  将以下标志附加到 test/test_helper.rb：

        > ```
        > class ActiveSupport::TestCase
        >   fixtures :all
        > end 
        > ```

        由于发生“找不到表'my_engine_posts'”错误，手动重新创建测试数据库如下：

        > $ (export RAILS_ENV=test; rake db:drop; rake db:create; rake db:migrate; rake db:setup)

    2.  修改 test/functional/my_engine/posts_controller_test.rb 为：

        > ```
        >  module MyEngine
        >    class PostsControllerTest < ActionController::TestCase
        >      setup do
        >        @post = my_engine_posts(:one)
        >      end       ^^^^^^^^^^
        >      ...
        >      test "should get index" do
        >        get :index, use_route: :my_engine
        >                  ^^^^^^^^^^^^^^^^^^^^^^^ 
        > ```

但是，在以下步骤中仍然 rake 测试失败：

> test_should_create_post(MyEngine::PostsControllerTest): NoMethodError: undefined method `post_path' for...

其中“post_path”命名路由用于脚手架生成的功能测试。我认为命名路线看起来不错，因为：

> ```
> $ rake app:routes
> my_engine  /my_engine MyEngine::Engine
> 
> Routes for MyEngine::Engine:
>     posts GET    /posts(.:format)          my_engine/posts#index
>           POST   /posts(.:format)          my_engine/posts#create  new_post GET    /posts/new(.:format)      my_engine/posts#new
> edit_post GET    /posts/:id/edit(.:format) my_engine/posts#edit
>      post GET    /posts/:id(.:format)      my_engine/posts#show
>           PUT    /posts/:id(.:format)      my_engine/posts#update
>           DELETE /posts/:id(.:format)      my_engine/posts#destroy 
> ```

有趣的是，rails app（不是插件）脚手架生成功能测试的类似步骤（当然！）如下：

> ```
>  $ rails new my_app
>  $ cd my_app/
>  $ rake db:create; rake db:migrate; rake db:setup
>  $ rails g scaffold post name zip
>  $ rake  db:migrate
>  $ rake test 
> ```

如果有人帮助我如何在可安装引擎上通过脚手架生成的功能测试，我将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:16:40.820

通过将其添加到解决`test/test_helper.rb`：

```
class ActionController::TestCase
  include MyEngine::Engine.routes.url_helpers
end 
```

更改`MyEngine`为您自己的引擎名称。

* * *

最初的想法来自[http://www.matthewratzloff.com/blog/2011/09/21/testing-routes-with-rails-3-1-engines/#comment-1572中概述的 RSpec 解决方案](http://www.matthewratzloff.com/blog/2011/09/21/testing-routes-with-rails-3-1-engines/#comment-1572)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:01:07.360

我此时的结论是不要在功能测试中使用命名路由。例如：

```
assert_redirected_to posts_path
  ↓
assert_redirected_to controller: 'my_engine/posts' 
```

我知道像[http://edgeguides.rubyonrails.org/engines.html](http://edgeguides.rubyonrails.org/engines.html) “6.3 Routes”提到的那样，有像 main_app 和/或 my_engine 这样的路由代理。它适用于控制器和视图，但不适用于功能测试（尽管在*常规应用程序*的功能测试中支持命名路由，而不是可安装引擎）。带有路由代理的命名路由可能可以在测试中使用，但我此时找不到方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T10:57:47.770

尝试将这些添加到生成的 test_helper.rb 中：

```
def post_path(post)
  "/my_engine/posts/#{post.to_param}"
end

def posts_path
  '/my_engine/posts'
end 
```

它对我有用。

# java - 从虚假帐户发送电子邮件

> ID：12332332
> 
> 赞同：2
> 
> 时间：2012-09-08T16:12:19.390
> 
> 标签：java, email, smtp

有没有办法从 Java 中的任何帐户（真实或虚假）发送电子邮件？我需要为我的一个项目执行此操作，其中用户完全了解预期的电子邮件。

如果这不可行，是否有任何其他方法可以在不提示用户创建邮件帐户、注册或使用我自己的邮件帐户作为所有用户的发件人的情况下向有效收件人发送电子邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:36:21.927

是的，但您需要一个 smtp 服务器（如 sendmail）。您可以在您的机器上安装一个 smtp 服务器并使用该服务器发送邮件。但是出于安全原因，流行的邮件服务（如 hotmail），gmail 不允许具有动态 IP 地址的 smtp 服务器向其服务器发送邮件。您需要静态 IP 地址，当然 IP 地址不应该在任何垃圾邮件数据库中。如果是雅虎，他们会检查您的 IP 地址是否在任何垃圾邮件数据库中。如果您使用静态 IP 地址，您可以轻松追踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T16:14:05.983

是的，您可能正在寻找 SMTP 客户端。

以下是如何实现它的示例： [http ://www.roseindia.net/javamail/SMTPClient.shtml](http://www.roseindia.net/javamail/SMTPClient.shtml)

挑战可能是找到一个接受您的邮件并且不将它们作为垃圾邮件过滤掉的 SMTP 服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T19:12:21.977

我不了解 java，但您可以使用 php 邮件从任何邮件 ID 发送邮件。有许多提供 smtp 服务器访问和 php 的免费网络托管站点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T16:15:21.763

您可以选择您喜欢的任何“来自”字段。您可以使用 JavaMail API 简单地设置它。唯一可能的限制是您需要确保您要连接的 SMTP 服务器接受该邮件 - 并且该行中没有其他系统将其作为垃圾邮件等拒绝。

有关详细信息，请参阅[http://docs.oracle.com/javaee/7/api/javax/mail/internet/MimeMessage.html#setFrom()](http://docs.oracle.com/javaee/7/api/javax/mail/internet/MimeMessage.html#setFrom())。

# html - 如何将 HTML 文件中的特定内容提取为 TXT 格式？

> ID：12332335
> 
> 赞同：1
> 
> 时间：2012-09-08T16:12:38.177
> 
> 标签：html, xml, r, text, tm

所以我的问题是我已经将很多论坛帖子提取到单独的 txt 文件中，这些文件现在位于我的硬盘上。每个文件都包含我想要提取的信息，其中一些我已经弄清楚如何提取。我需要提取的信息格式如下：

在同一个“html块”内

1：（x）此线程中
的消息 2：消息是回复（一些 html 代码）A HREF =“链接”（一些 html 代码=

在任务 1 中只需要提取 x
在任务 2 中我需要提取消息回复的链接

我已经查看了不同的 tm 和 XML 包，但还没有真正找到要使用的内容。任何建议表示赞赏。

这是其中一个 txt 文件的样子

```
`<HTML>
<HEAD>
<TITLE>Dear LEGO : 5668 </TITLE>
<META NAME="ROBOTS" CONTENT="ALL, INDEX, FOLLOW">
<META NAME="KEYWORDS" CONTENT="lego, legos, legoland, toy, construction, community, education, technic, mindstorms, toolo, duplo, primo, dacta">
<META NAME="DESCRIPTION" CONTENT="Dear LEGO : 5668 - LUGNET: The international fan-created LEGOÆ Users Group Network. A place for LEGOÆ fans of all ages to find information, meet one another, and share ideas. As an independent site by fans, for fans, it is neither sponsored nor endorsed by the LEGO Company.">
<SCRIPT LANGUAGE="JavaScript" SRC="http://www.lugnet.com/js/common.js"></SCRIPT>
</HEAD>

<BODY
 LEFTMARGIN=0 TOPMARGIN=0 MARGINWIDTH=0 MARGINHEIGHT=0
 BGCOLOR="#FFFFFF" TEXT="#000000" xLINK="#0000FF" xVLINK="#501080" xALINK="#B0C8EC">  <TABLE BORDER=0 CELLPADDING=9 CELLSPACING=0 WIDTH="100%" BGCOLOR="#B0C8EC">
  <TR ALIGN=CENTER VALIGN=BOTTOM>

    <TD ALIGN=LEFT><NOBR><A TARGET="_top" HREF="http://www.lugnet.com/"><IMG BORDER=0 WIDTH=28 HEIGHT=44 HSPACE=10 VSPACE=0 SRC="/news/icon-home.gif" ALT="To LUGNET Homepage"></A><A TARGET="_top" HREF="http://news.lugnet.com/"><IMG BORDER=0 WIDTH=27 HEIGHT=44 HSPACE=10 VSPACE=0 SRC="/news/icon-news.gif" ALT="To LUGNET News Homepage"></A><A TARGET="_top" HREF="http://guide.lugnet.com/"><IMG BORDER=0 WIDTH=37 HEIGHT=44 HSPACE=10 VSPACE=0 SRC="/news/icon-guide.gif" ALT="To LUGNET Guide Homepage"></A></NOBR><BR></TD>       <FORM NAME="search" ACTION="http://www.lugnet.com/search.cgi" METHOD=POST
       onSubmit="return(MetaSearch(document.search))">  <TD>
        <INPUT TYPE=HIDDEN NAME="category" VALUE="/dear-lego/">
        <NOBR><SELECT NAME="scope">
          <OPTION VALUE="SetGuide">Set Reference
          <OPTION VALUE="QuickSet">Set Reference (Popup)
          <OPTION VALUE="PartsRef">Parts Reference  <OPTION VALUE="News">News
          <OPTION VALUE="NewsRel" SELECTED>News (Dear LEGO)         </SELECT>&nbsp;<A HREF="http://www.lugnet.com/help/search/"><IMG BORDER=0 WIDTH=16 HEIGHT=16 HSPACE=0 VSPACE=0 SRC="http://www.lugnet.com/help/help.gif" ALT="Help on Searching"></A></NOBR><BR>  <NOBR><INPUT TYPE=TEXT NAME="query" VALUE="" SIZE=16 MAXLENGTH=200><SMALL>&nbsp;<INPUT TYPE=SUBMIT NAME="SUBMIT" VALUE="Search"></SMALL></NOBR><BR>
      </TD>
      </FORM> 

    <TD ALIGN=RIGHT><NOBR><A HREF="/news/post/?lugnet.dear-lego"><IMG BORDER=0 WIDTH=22 HEIGHT=44 HSPACE=10 VSPACE=0 SRC="/news/icon-post.gif" ALT="Post new message to lugnet.dear-lego"></A><A HREF="news://lugnet.com/lugnet.dear-lego"><IMG BORDER=0 WIDTH=30 HEIGHT=44 HSPACE=10 VSPACE=0 SRC="/news/icon-nntp.gif" ALT="Open lugnet.dear-lego in your NNTP Newsreader"></A><A HREF="http://news.lugnet.com/news/traffic/"><IMG BORDER=0 WIDTH=32 HEIGHT=44 HSPACE=10 VSPACE=0 SRC="/news/icon-traffic.gif" ALT="To LUGNET News Traffic Page"></A><IMG BORDER=0 WIDTH=3 HEIGHT=44 HSPACE=6 VSPACE=0 SRC="/news/icon-sep.gif"><A HREF="http://www.lugnet.com/people/members/sign-in/"><IMG BORDER=0 WIDTH=37 HEIGHT=44 HSPACE=0 VSPACE=0 SRC="/news/icon-signin-key.gif" ALT="Sign In (Members)"></A></NOBR><BR></TD>

  </TR> 
</TABLE>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%" BGCOLOR="#8899BB"><TR><TD><SPACER TYPE=BLOCK WIDTH=1 HEIGHT=1></TD></TR></TABLE>  <TABLE BORDER=0 CELLPADDING=7 CELLSPACING=0 WIDTH="100%" BGCOLOR="#E8F0FF"> <TR ALIGN=CENTER VALIGN=CENTER>
        <TD COLSPAN=2 ALIGN=CENTER VALIGN=CENTER>
<script type="text/javascript"><!--
google_ad_client = "pub-0089902038208374";
//LUGNET 728x15, Erstellt 13.12.07
google_ad_slot = "6645292597";
google_ad_width = 728;
google_ad_height = 15;
//--></script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
        </TD>
      </TR> <TR ALIGN=LEFT VALIGN=CENTER>  <TD>  <BIG><FONT FACE="Geneva,Arial,Helvetica">
        &nbsp;<A HREF="/dear-lego/">Dear&nbsp;LEGO</A>&nbsp;<FONT COLOR="#8899BB">/</FONT>  5668  <BR></FONT></BIG>  </TD>  <TD ALIGN=RIGHT><SMALL><FONT FACE="Geneva,Arial,Helvetica">
        <A HREF="/dear-lego/?n=5667">5667</A>&nbsp;&nbsp;|&nbsp;&nbsp;<A HREF="/dear-lego/?n=5669">5669</A>
      <BR></SMALL></FONT></TD>  </TR>

</TABLE>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%" BGCOLOR="#8899BB"><TR><TD><SPACER TYPE=BLOCK WIDTH=1 HEIGHT=1></TD></TR></TABLE>  <!-- google_ad_section_start --> <CENTER>  <TABLE BORDER=0 CELLPADDING=16 CELLSPACING=0 WIDTH="100%"><TR><TD ALIGN=LEFT>    <TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0><TR ALIGN=LEFT VALIGN=TOP><TD>  <TABLE BORDER=0 CELLPADDING=8 CELLSPACING=0>

      <TR BGCOLOR="#E0E0E0"><TD ALIGN=LEFT> <TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%"><TR ALIGN=CENTER VALIGN=TOP>  <TD ALIGN=LEFT VALIGN=TOP>

    <TABLE BORDER=0 CELLPADDING=2 CELLSPACING=0>  <TR VALIGN=MIDDLE>

            <TD ALIGN=RIGHT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#7070A0" SIZE="-1">Subject:&nbsp;<BR></FONT></TD>

            <TD ALIGN=LEFT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#333366" SIZE="-1"><BIG><BIG><B>Online PAB and Design-by-me needs more parts for Lego Train</B></BIG></BIG><BR></FONT></TD>

          </TR>  <TR VALIGN=MIDDLE>

            <TD ALIGN=RIGHT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#7070A0" SIZE="-1">Author:&nbsp;<BR></FONT></TD>

            <TD ALIGN=LEFT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#333366" SIZE="-1"><B>Benjamin Medinets</B><BR></FONT></TD>

          </TR>  <TR VALIGN=MIDDLE>

            <TD ALIGN=RIGHT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#7070A0" SIZE="-1">Newsgroups:&nbsp;<BR></FONT></TD>

            <TD ALIGN=LEFT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#333366" SIZE="-1"><A HREF="/dear-lego/">lugnet.dear-lego</A>, <A HREF="/trains/">lugnet.trains</A><BR></FONT></TD>

          </TR>  <TR VALIGN=MIDDLE>

            <TD ALIGN=RIGHT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#7070A0" SIZE="-1">Followup-To:&nbsp;<BR></FONT></TD>

            <TD ALIGN=LEFT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#333366" SIZE="-1"><A HREF="/trains/">lugnet.trains</A><BR></FONT></TD>

          </TR>  <TR VALIGN=MIDDLE>

            <TD ALIGN=RIGHT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#7070A0" SIZE="-1">Date:&nbsp;<BR></FONT></TD>

            <TD ALIGN=LEFT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#333366" SIZE="-1">Thu, 6 Oct 2011 03:44:44 GMT<BR></FONT></TD>

          </TR>  <TR VALIGN=MIDDLE>

            <TD ALIGN=RIGHT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#7070A0" SIZE="-1">From:&nbsp;<BR></FONT></TD>

            <TD ALIGN=LEFT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#333366" SIZE="-1"><FONT COLOR="#7070A0">Benjamin Medinets &lt;bmedinets@excite.com+stopspammers+&gt;</FONT><BR></FONT></TD>

          </TR>  <TR VALIGN=MIDDLE>

            <TD ALIGN=RIGHT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#7070A0" SIZE="-1">Highlighted:&nbsp;<BR></FONT></TD>

            <TD ALIGN=LEFT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#333366" SIZE="-1"><FONT COLOR="#D57F7F"><B>!</B></FONT> 

<A HREF="/news/ahh.cgi?lugnet.dear-lego,5668">(details)</A><BR></FONT></TD>

          </TR>  <TR VALIGN=MIDDLE>

            <TD ALIGN=RIGHT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#7070A0" SIZE="-1">Viewed:&nbsp;<BR></FONT></TD>

            <TD ALIGN=LEFT><FONT FACE="Geneva,Arial,Helvetica" COLOR="#333366" SIZE="-1">3013 times<BR></FONT></TD>

          </TR>  </TABLE>

    </TD>  <TD WIDTH=20>&nbsp;&nbsp;</TD>

      <TD ALIGN=CENTER VALIGN=TOP>

      <FONT FACE="Geneva,Arial,Helvetica" SIZE="-2"><A HREF="/news/raw.cgi?lugnet.dear-lego,5668">View Raw<BR>Message</A><BR><BR></FONT>  <A HREF="/news/post/?lugnet.dear-lego,5668"><IMG BORDER=0 WIDTH=30 HEIGHT=44 HSPACE=10 VSPACE=10 SRC="/news/icon-reply.gif" TITLE="Post a public reply to this message"></A><BR>  </TD>  </TR></TABLE> </TD></TR>

      <TR BGCOLOR="#F0F0F0"><TD ALIGN=LEFT NOWRAP><TT>I was using Lego Digital Designer and am disappointed the downhill availabilty<BR>
of certain important parts to build &quot;buyable&quot; models.<BR>
<BR>
I would like to see a return of &quot;warehouse&quot; sliding doors to make<BR>
box cars.<BR>
<BR>
Train-style doors would also be nice as well as train windows (both in<BR>
2x3 and 4x3)... please.<BR>
<BR>
I looked at the instructions to build a mail car from the 7722, and<BR>
found that I really only need 2 red sliding rail doors, the pair of<BR>
&quot;decorated train doors&quot; and a set of two 2x3 thin yellow train<BR>
windows.<BR>
<BR>
Yes, there was a bit of minor substitution but it is mostly distiguishable<BR>
as the model.<BR>
<BR>
Here is what it looks like:<BR>
<BR>
<A HREF="http://www.lugnet.com/jump.cgi?http://www.brickshelf.com/gallery/medib/lego-fun/7722mailvan.jpg">http://www.brickshelf.com/gallery/medib/lego-fun/7722mailvan.jpg</A><BR>
<BR>
Yeah I know... where are the f-in doors???<BR>
<BR>
<BR>
Ben<BR>
</TT>
</TD></TR>

      <TR BGCOLOR="#E0E0E0"><TD ALIGN=LEFT></TD></TR>

    </TABLE> <BR> <BR>  <FONT FACE="Verdana,Geneva,Helvetica" SIZE="-1" COLOR="#990000">

      <B>1 Message in This Thread:</B><BR> <NOBR><IMG WIDTH=9 HEIGHT=11 VSPACE=2 SRC="/news/here.gif" TITLE="You are here"></NOBR><BR><NOBR></NOBR>
 <DL>

      <DT>Entire Thread on One Page:

      <SMALL><FONT COLOR="#000000">

        <DD><B>Nested:&nbsp;</B>

        <A HREF="/dear-lego/?n=5668&t=i&v=a">All</A> | <A HREF="/dear-lego/?n=5668&t=i&v=b">Brief</A> | <A HREF="/dear-lego/?n=5668&t=i&v=c">Compact</A> | <A HREF="/dear-lego/?n=5668&t=i&v=d">Dots</A>

        <BR><B>Linear:&nbsp;</B>

        <A HREF="/dear-lego/?n=5668&t=f&v=a">All</A> | <A HREF="/dear-lego/?n=5668&t=f&v=b">Brief</A> | <A HREF="/dear-lego/?n=5668&t=f&v=c">Compact</A>

      </FONT></SMALL>  </DL>

      </FONT>  </TD>

    <TD WIDTH=20>&nbsp;&nbsp;&nbsp;&nbsp;<BR></TD>

    <TD><FONT FACE="Verdana,Geneva,Arial,Helvetica" SIZE="-1">  
<script type="text/javascript"><!--
google_ad_client = "pub-0089902038208374";
//LUGNET 160x600, Erstellt 14.12.07
google_ad_slot = "5985678701";
google_ad_width = 160;
google_ad_height = 600;
//--></script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<BR>
<style type="text/css"> @import url(http://www.google.com/cse/api/branding.css);
</style>
<div class="cse-branding-bottom" style="background-color:#FFFFFF;color:#000000">
  <div class="cse-branding-form">
    <form action="http://www.google.com/cse" id="cse-search-box">
      <div>
        <input type="hidden" name="cx" value="partner-pub-0089902038208374:9n7bh3k27mb" />
        <input type="hidden" name="ie" value="ISO-8859-1" />
        <input type="text" name="q" size="31" />
        <input type="submit" name="sa" value="Search" />
      </div>
    </form>
  </div>
  <div class="cse-branding-logo">
    <img src="http://www.google.com/images/poweredby_transparent/poweredby_FFFFFF.gif" alt="Google" />
  </div>
  <div class="cse-branding-text">
    Custom Search
  </div>
</div>  </FONT></TD>

    </TR></TABLE>  <TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR VALIGN=TOP>  </TR></TABLE>  </TD></TR></TABLE>
  </CENTER>
<!-- google_ad_section_end -->  <TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 BGCOLOR="#8899BB" WIDTH="100%"><TR>
<TD><SPACER TYPE=BLOCK WIDTH=1 HEIGHT=1></TD></TR></TABLE>

<TABLE BORDER=0 CELLPADDING=4 CELLSPACING=0 BGCOLOR="#E8F0FF" WIDTH="100%">
  <TR VALIGN=TOP>
    <TD ALIGN=LEFT><FONT FACE="Geneva,Arial,Helvetica" SIZE="-2" COLOR="#000033">  <A HREF="/sitemap.cgi">Newsgroup Tree</A> &nbsp;|&nbsp; <A HREF="http://www.lugnet.com/admin/terms/agreement">Terms of Use</A> &nbsp;|&nbsp; <A HREF="http://www.lugnet.com/admin/feedback/">Feedback</A><BR>
    </FONT></TD>
    <TD ALIGN=RIGHT><FONT FACE="Geneva,Arial,Helvetica" SIZE="-2" COLOR="#000033"> &copy;2005 LUGNET. All rights reserved. - hosted by <a href="http://www.steinbruch.info/" target="_blank">steinbruch.info GbR</a><BR>
    </FONT></TD> 
  </TR>
</TABLE>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-3258989-12");
pageTracker._initData();
pageTracker._trackPageview();
</script>
</BODY>
</HTML>  ` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:37:01.997

如果那是您的字符串，那么您可以使用 strsplit 获取由字符串 'A HREF="' 限制的材料

```
txt <- '</TABLE> <BR> <BR>  <FONT FACE="Verdana,Geneva,Helvetica" SIZE="-1" COLOR="#990000"><B>

    Message has 2 Replies: </B></FONT><BR>   <TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%"> <TR VALIGN=TOP BGCOLOR="#E0E0E0"><TD ALIGN=LEFT><A HREF="/dear-lego/?n=14"><IMG BORDER=5 HEIGHT=3 WIDTH=3 SRC="/news/x.gif"></A></TD><TD><FONT SIZE="-2">&nbsp;&nbsp;</FONT></TD><TD ALIGN=LEFT><FONT FACE="Verdana,Geneva,Helvetica" SIZE="-2"><A HREF="/dear-lego/?n=14">Re: Plate Paks</A><BR></FONT></TD><TD ALIGN=RIGHT><FONT FACE="Verdana,Geneva,Helvetica" SIZE="-2">&nbsp;Tom Stangl<BR></FONT></TD></TR><TR BGCOLOR="#F8F8F8"><TD COLSPAN=4 ALIGN=LEFT VALIGN=TOP><FONT FACE="Verdana,Geneva,Helvetica" SIZE="-2" ' 
```

这是第二个片段：

```
> strsplit(txt, split='A HREF="')[[1]][2]
[1] "/dear-lego/?n=14\"><IMG BORDER=5 HEIGHT=3 WIDTH=3 SRC=\"/news/x.gif\"></A></TD><TD><FONT SIZE=\"-2\">&nbsp;&nbsp;</FONT></TD><TD ALIGN=LEFT><FONT FACE=\"Verdana,Geneva,Helvetica\" SIZE=\"-2\"><" 
```

可能有真正的 XML 和 HTML 处理步骤，但它们通常需要一个包含所有标题的示例，而您已经删除了所有这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T14:23:42.250

您可能会看到以下链接：

[R 中是否有一种简单的方法来仅提取 HTML 页面的文本元素？](https://stackoverflow.com/questions/3195522/is-there-a-simple-way-in-r-to-extract-only-the-text-elements-of-an-html-page)

我认为它最符合你的问题

# php - 使正则表达式加粗

> ID：12332336
> 
> 赞同：0
> 
> 时间：2012-09-08T16:12:50.130
> 
> 标签：php, regex

我的网站上有一些坐标，打印为：

```
z:000 
```

我想用粗体打印这个（包括 z）。坐标在文本字符串中，如下所示：

```
$string = 'Lorem ipsum z:000 dolor sit amet'; 
```

我想我必须用正则表达式来做这件事，但我没有让它工作。第一部分是固定的，所以正则表达式的部分是`^z:`和`[0-9]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T16:18:54.707

这应该有帮助

```
preg_replace("/(z:[0-9]{3})/", '<b>${1}</b>', $string); 
```

适用于 z:000 到 z:999

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T16:16:39.190

```
$string = preg_replace("/z:[0-9][0-9][0-9]/", "<b>\\0</b>", $string); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T16:19:10.293

只需使用一些基本的 CSS 即可：

```
$string = 'Lorem ipsum <span class="mark">z:000</span> dolor sit amet'; 
```

在标题中，您将有类似的内容

```
<style type="text/css">
.mark{font-weight:bold;}
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T16:14:30.647

不需要正则表达式，只需要 HTML 格式！

将您的字符串包含在 HTML 粗体标记中：

```
$string = '<b>Lorem ipsum z:000 dolor sit amet</b>'; 
```

# iphone - 如何从我的 iphone 日历中检索事件？

> ID：12332342
> 
> 赞同：-3
> 
> 时间：2012-09-08T16:13:20.033
> 
> 标签：iphone, objective-c, ios, xcode

如果可能的话，我想问一下怎么做。你能给我一些示例代码或代码片段吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:25:06.680

获取所有事件的代码。有关更多信息，您可以使用上面的 Event Kit 苹果文档。

```
NSDate *start = ...
NSDate *finish = ...

// use Dictionary for remove duplicates produced by events covered more one year segment
NSMutableDictionary *eventsDict = [NSMutableDictionary dictionaryWithCapacity:1024];

NSDate* currentStart = [NSDate dateWithTimeInterval:0 sinceDate:start];

int seconds_in_year = 60*60*24*365;

// enumerate events by one year segment because iOS do not support predicate longer than 4 year !
while ([currentStart compare:finish] == NSOrderedAscending) {

    NSDate* currentFinish = [NSDate dateWithTimeInterval:seconds_in_year sinceDate:currentStart];

    if ([currentFinish compare:finish] == NSOrderedDescending) {
        currentFinish = [NSDate dateWithTimeInterval:0 sinceDate:finish];
    }
    NSPredicate *predicate = [eventStore predicateForEventsWithStartDate:currentStart endDate:currentFinish calendars:nil];
    [eventStore enumerateEventsMatchingPredicate:predicate
                                      usingBlock:^(EKEvent *event, BOOL *stop) {

                                          if (event) {
                                              [eventsDict setObject:event forKey:event.eventIdentifier];
                                          }

                                      }];       
    currentStart = [NSDate dateWithTimeInterval:(seconds_in_year + 1) sinceDate:currentStart];

}

NSArray *events = [eventsDict allValues]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T16:16:03.493

您想查看[Event Kit](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/Introduction/Introduction.html)，其中包含示例代码以及有关阅读日历事件的文档。

# php - PHP Autoloader 添加命名空间路径

> ID：12332344
> 
> 赞同：3
> 
> 时间：2012-09-08T16:13:34.497
> 
> 标签：php, namespaces, require-once, autoloader, spl-autoloader

我的 MVC 结构如下：

```
- web
  -- Classes
    --- Loader.php
  -- Core
    --- Controller.php
    --- Model.php
    --- View.php
    --- Bootstrap.php
    --- DB.php
  -- Project
    --- Controllers (folder)
    --- Models (folder)
    --- Views (folder) 
```

现在我为每个指定了命名空间。例如我有

```
 namespace Classes; //for Loader.php
    namespace Core; //For Controller.php, Model.php etc...
    namespace Project\Controllers; //For Controllers inside Controllers folder etc... 
```

我的自动加载器看起来像这样：

```
public static function Autoloader2($className) {
    $className = explode('\\', $className);
    $class = array_pop($className);
    $namespace = implode(DIRECTORY_SEPARATOR, $className);
    $file = $namespace . DIRECTORY_SEPARATOR . str_replace('_', DIRECTORY_SEPARATOR, $class) . '.php';

   require $file;
} 
```

和我的主要 index.php 使用

```
 spl_autoload_register( array('Loader', 'Autoloader2') );
    $app = new Core\Bootstrap(); 
```

当我打开 localhost/web/ 时，出现以下错误：

```
 Warning: require(Core/Project/Controllers/Index.php): failed to open stream: N 
```

它似乎将 Core/ 添加到请求的文件中。Index.php 在 Project/Controllers 中，而不是在 Core/Project/Controllers 中。如果我尝试删除

```
 //namespace Core; from Bootstrap.php i get the following error
  Fatal error: Class 'Core\Bootstrap' not found 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:43:39.503

你应该使用`$app = \Core\Bootstrap();`.

路径前的斜杠很重要，没有它，您的命名空间路径将相互关联。

# phpmyadmin - 在 ubuntu 12.04 上安装 phpmyadmin 时出错

> ID：12332345
> 
> 赞同：0
> 
> 时间：2012-09-08T16:13:36.780
> 
> 标签：phpmyadmin, lamp, ubuntu-12.04

遵循本教程后，在我的 ubuntu 12.04 上安装 phpmyadmin 时出现了一点错误

[http://ubuntulife.net/how-to-install-lamp-in-ubuntu-12-04/](http://ubuntulife.net/how-to-install-lamp-in-ubuntu-12-04/)

这就是错误。

[http://i1193.photobucket.com/albums/aa344/hiatus1/Workspace1_001.png](http://i1193.photobucket.com/albums/aa344/hiatus1/Workspace1_001.png)

任何人都可以解决这个错误？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:50:59.513

确保您的 LAMP 设置工作正常。

然后尝试重新启动 Apache 以继续使用 phpmyadmin。

我也在我的博客上回答了你。

# javascript - 如何让 jQuery 与 Greasemonkey 0.8 脚本（在 Firefox 2 上）一起工作，而 PC 没有互联网？

> ID：12332346
> 
> 赞同：3
> 
> 时间：2012-09-08T16:13:38.577
> 
> 标签：javascript, jquery, userscripts, firefox2

我正在使用**Firefox 2.0.0.11**和**Greasemonkey 0.8.x**以及适用于 Greasemonkey 0.8 的最新**jQuery 版本 (1.3.2)**。
我尝试加载这个用户脚本：

```
// ==UserScript==
// @name        TEST
// @include     *
// @require     jquery.min.js
// @grant       GM_getValue
// ==/UserScript==

$(document).ready(function(){
    alert('jQuery!');
}); 
```

但我收到错误：

```
Error: $ is not defined
Source File: file:///G:/Firefox/Data/profile/gm_scripts/huhu/huhu.user.js
Line: 8 
```

我知道我必须更新这个旧浏览器。但这是不可能的。我必须解决这个问题！

我想在没有互联网连接的本地 PC 上加载 jQuery 代码。我已将 jquery.min.js 复制到用户脚本所在的同一文件夹中。

```
G:/Firefox/Data/profile/gm_scripts/huhu/jquery.min.js 
```

任何想法问题出在哪里？

问候， 伯恩特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T09:40:07.947

有两种方法可以从本地驱动器安装 Greasemonkey 脚本，这样 jQuery 就可以工作。
但是，首先，这里是...

### 两种方法共有的先决条件：

1.  旧版本的 Greasemonkey（和 Firefox）很容易混淆。因此，请使用 Greasemonkey 的*脚本管理器*卸载任何旧版本的脚本。

2.  转到`gm_scripts`您的[Profile Folder](http://kb.mozillazine.org/Profile_folder_-_Firefox)中的文件夹，并实际删除脚本的文件夹（如果存在）。

3.  确保您的脚本源代码位于带有`user.js`扩展名的文件中。例如：`Hello World.user.js`

4.  确保您的脚本源代码位于**不在系统`TMP`或文件夹中的`temp`文件夹**中。例如，将源文件放在`C:\My GM scripts\`.

5.  同样，这不是也不要使用[Firefox 配置文件文件夹](http://kb.mozillazine.org/Profile_folder_-_Firefox)树中的任何文件夹。

6.  如果有疑问，或者如果事情看起来“不稳定”，请重新启动 Firefox。

### 方法一、电脑可以上网：

1.  只需指向`@require`Google 的正确 jQuery 版本的副本。对于 GM 0.8，它应该不迟于 jQuery 1.3.2。

    ```
    // ==UserScript==
    // @name     Hiya Ma
    // @include  http://stackoverflow.com/*
    // @require  http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js
    // ==/UserScript==

    $("body").prepend ('<div>Hello world!</div>'); 
    ```

2.  使用 Firefox，*打开文件*菜单 ( `Ctrl``O`) 打开源文件。`C:\My GM scripts\Hello World.user.js`（例如：）

    **或者：**
    将源文件拖放到任何打开的 Firefox 选项卡中。

3.  Greasemonkey 将提示安装脚本。按照提示进行操作。

### 方法二、电脑无法上网：

1.  下载适当的 jQuery 版本（在本例中为 1.3.2），并将其另存为`jquery.min.js`，与脚本源（在本例中为 ，）在**同一文件夹**`C:\My GM scripts\`中。

2.  不要在`@require`指令中使用任何路径：

    ```
    // ==UserScript==
    // @name     Hiya Ma
    // @include  http://stackoverflow.com/*
    // @require  jquery.min.js
    // ==/UserScript==

    $("body").prepend ('<div>Hello world!</div>'); 
    ```

3.  *按照方法 1*的步骤 2 和 3 安装脚本。您不需要打开或拖动 jQuery 文件。

* * *

### 另请注意：

1.  `G:/Firefox/Data/profile/gm_scripts/huhu/jquery.min.js`看起来像一个 Firefox 配置文件目录。您在这里没有放置任何文件。Greasemonkey 将根据需要复制和重命名文件。

2.  `@grant`在 Greasemonkey 版本 1.0 之前不支持。不要在这里使用它。

3.  `$(document).ready()`这里不需要，大多数 GM 脚本中也不需要。Greasemonkey 默认在正确的时间触发。

4.  这些方法***已***针对 Firefox 2.0.0.20 和 Greasemonkey 0.8.20100408.6 进行了验证，但它们几乎适用于 GM 1.0 之前的所有 FF+GM 版本。

* * *

### 如果收到 `NS_ERROR_FILE_ACCESS_DENIED` 错误怎么办：

此错误在旧版本的 Greasemonkey 中并不少见。两个最常见的原因是文件管理不善`temp`（FF/GM）和 Firefox 配置文件损坏。

在大多数情况下，请执行以下操作来解决此问题：

1.  重复上面列出的先决条件。

2.  清除系统临时文件夹中任何类似于脚本源文件、任何`@require`d 文件或任何`@resource`d 文件的内容。

    在这个例子中，特别是寻找`hiya_ma.user.js`and `jquerymin.js`。

    在 Windows 中，临时文件夹具有地址：`%TMP%`和`%TEMP%`.

3.  在`gm_scripts`文件夹中，确保`config.xml`没有对已删除或丢失的脚本的引用。如果没有（其他）脚本，请删除`config.xml`.

4.  如果一切都失败了，请使用 Firefox 的*配置文件管理器*创建一个新配置文件并在那里重新安装您的脚本。

# apache - 如果“modules/mod_rewrite.so”被注释掉，将显示“Internal Server Error”

> ID：12332347
> 
> 赞同：1
> 
> 时间：2012-09-08T16:13:41.313
> 
> 标签：apache, .htaccess, mod-rewrite

我知道下面的代码是否被注释掉了

```
#LoadModule rewrite_module modules/mod_rewrite.so 
```

mod_rewrite 将不起作用

.

如果存在“.htaccess”并且代码包括以下内容，

```
RewriteEngine On 
```

浏览器将显示“内部服务器错误”

.

但我无法删除或编辑 httpd.conf 或 .htaccess

我可以向 .htaccess 添加一些规则，但不能更改现有规则

.

那么，当“modules/mod_rewrite.so”被注释掉时，我可以让 RewriteEngine “关闭”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:53:33.513

您可以在`<IfModule>`块中添加规则：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    # your rules
</IfModule> 
```

这样，如果未加载 mod_rewrite，则不会应用规则，并且您不会收到任何 500 "Internal Server Error"

# javascript - JavaScript 中的立即调用函数表达式 (IIFE) - 传递 jQuery

> ID：12332353
> 
> 赞同：7
> 
> 时间：2012-09-08T16:14:04.400
> 
> 标签：javascript, jquery, iife

我有以下代码，我知道它是一个 IIFE。但是，我一直无法理解 (jQuery) 和 ($) 是什么。我知道这与将 jQuery 的引用传递给 IIFE 有关，但有人可以清楚地解释我的目的吗？感谢您的帮助和时间:-)

```
(function ($) {
//code
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-08T16:16:19.823

`$`是函数的参数。 `jQuery`是调用函数时作为该参数传递的内容。

可以这样想：

```
function init($) {
   // code can use $ here as a shortcut for jQuery
   // even if $ has a different definition globally or isn't defined globally
}

init(jQuery); 
```

除了这个例子创建了一个全局符号之外`init`，这个和你的 IIFE 的执行是相同的。两者都定义了一个函数并立即调用它。

`$`是函数的参数。 `jQuery`是作为该参数传递的内容。这用于在该函数内部定义`$`为`jQuery`while 的快捷方式，而不影响`$`. 有时也会有轻微的性能优势，因为在本地定义的符号（作为局部变量或命名参数）可以比全局符号稍快访问。

IIFE 的优点是没有定义新的全局符号。除此之外，它的执行与此代码相同。

# .htaccess - Htaccess 和 SEO 友好

> ID：12332358
> 
> 赞同：1
> 
> 时间：2012-09-08T16:14:17.850
> 
> 标签：.htaccess, mod-rewrite, seo, rewrite

现在，我的永久链接看起来像这样；

[http://www.mywebsite.com/readhoroscope?horoscope=gemini](http://www.mywebsite.com/readhoroscope?horoscope=gemini)

我想像这样制作这个永久链接；

[http://www.mywebsite.com/gemini.html](http://www.mywebsite.com/gemini.html)

如何通过在 htaccess 中使用重写来做到这一点？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:27:29.777

检查示例编号 1 和 4 [http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html](http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:21:51.153

尝试

```
RewriteEngine on
RewriteRule ^gemini.html$ readhoroscope?horoscope=gemini 
```

# c# - 在每个页面中使用命名空间是否是一种不好的做法/会降低性能或内存使用量

> ID：12332359
> 
> 赞同：4
> 
> 时间：2012-09-08T16:14:19.710
> 
> 标签：c#, .net

在 C# 中，我们编写`using System.IO`或我们想要使用的任何其他命名空间。

那么这是一个坏习惯，它会影响性能还是记忆？

或者为它们创建包装类并使用它来避免在任何地方使用相同的命名空间是否很好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:23:00.430

您可以`using`在文件顶部添加任意数量的语句，它不会对运行时性能产生一点影响。

然而，为类制作包装器*会*影响性能，使代码稍微慢一些。不是很多，所以如果它使代码更易于管理，那么你可以很好地使用包装器，但是仅仅为了避免`using`语句而使用它并不是一个好的理由。

拥有大量`using`语句可能会在一定程度上影响编译时间，但您必须拥有*大量*语句才能引起注意。

考虑在 Visual Studio 中使用“删除未使用的 usings”命令，该命令将删除`using`实际未使用的命名空间的语句。我经常使用它，但只是为了保持文件精简，而不是为了性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T16:37:51.357

在 .Net 中，命名空间始终是每种类型名称的组成部分。但是，如果每次声明某种类型时都必须指定整个命名空间，则会在代码中造成巨大的重复和噪音。这就是 using 指令的用途，它基本上将所有前缀折叠到一个位置，使您可以指定类型的“最后”部分。只有在没有歧义的情况下才能这样做。

然而，编译器并不关心上述内容。因此存在一个预编译阶段，每个依赖于`using`指令的类型声明都会取回其前缀。

所以当你说：

```
Using System;

void foo()
{
   String s1 = "bla";
   String s2 = "bli";
} 
```

预编译中发生的事情是将`System`命名空间附加到每个`String`声明中，如下所示：

```
void foo()
{
   System.String s1 = "bla";
   System.String s2 = "bli";
} 
```

直到现在编译器才真正起作用。

所以关于性能，从技术上讲，它会影响构建过程的性能。使用的次数越多，预编译阶段需要做的匹配就越多：所以编译器看到`String`. 那是什么`String`？是`System.String`吗`SomeOtherNamespace.String`？真正发生的是编译器将它在 using 中找到的每个命名空间附加到类型声明并检查这种类型是否存在。如果是 - 很好，如果不是 - 它会尝试下一个命名空间。

所以你看，如果你有很多文件没有使用过`using`的声明，编译器必然会做多余的工作。在极端情况下，它会显着降低构建本身的性能。

一般来说，***永远不要犹豫使用你正在使用的东西***（不是双关语）。但是您应该避免声明不必要`using`的指令，这不仅是因为对构建持续时间的潜在（不太可能）性能影响，而且还因为您希望保持代码尽可能干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T16:17:19.427

编译器为我们进行优化以包含相关内容`assemblies of namespaces where required`，因此您不需要包装器进行优化。最好将类所需的所有命名空间包含在`using statement on the top`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T16:17:58.880

您可以使用，不影响您的性能并不重要（您的代码的最佳做法是删除使用未使用的右键单击）

一切都在需要时加载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T16:43:39.587

当您使用 System.IO 时；在文件的开头，您告诉 C# 编译器考虑使用该命名空间进行类名查找。它对程序性能完全没有影响。

但是，如果您在同一个文件中创建包装器，您将为使用的每个类创建额外的（即使是很小的）类副本，并且会降低运行时的性能。

# jquery - 使用 jQuery 模板的动态表

> ID：12332361
> 
> 赞同：0
> 
> 时间：2012-09-08T16:14:30.050
> 
> 标签：jquery, jquery-templates

我正在尝试使用 jQuery 模板插件创建一个动态表。

我的要求是动态创建列，即有一个带有 ColumnNames 的 ListBox ...单击项目时，它应该使用该列创建一个表，当单击另一个项目时，它应该更新现有模板并添加第二列，依此类推...

我正在尝试使用以下代码示例，但没有运气...

谁能告诉我该怎么做？

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
        table
        {
            border-collapse: collapse;
            margin: 8px;
            background-color: #f8f8f8;
            width:600px;
            overflow:scroll;
        }
        table td
        {
            border: 1px solid blue;
            padding: 3px;
        }
    </style>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"
        type="text/javascript"></script>
</head>
<body>
    <button id="showColBtn">
        CreateColumn</button><br />
    <table>
        <thead>
            <tr id="tblOrderReportHeaderRow">
            </tr>
        </thead>
        <tbody id="tblOrderReportBody">
        </tbody>
    </table>
    <script type="text/javascript">

        var markup = "";
        var arrTableHeader = [];

        /* Render the Column Name template */
        $("#showColBtn").click(function () {
            for (var i = 0; i <= 10; i++) {
                markup += createHeaderMarkup();
                arrTableHeader.push(createHeader("Col" + i));
            }
            /* Compile markup string as a named template */
            $.template("tblHeaderTemplate", markup);

            $("#tblOrderReportHeaderRow").empty();
            $.tmpl("tblHeaderTemplate", arrTableHeader).appendTo("#tblOrderReportHeaderRow");
        });

        function createHeaderMarkup() {
            return ("<th colspan='2'>${colName}</th>");

        }

        function createHeader(colName) {

            return ({ 'colName': colName });

        }

    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:32:40.393

我通过删除 **标记解决了这个问题 += createHeaderMarkup();** 从 for 循环

# html - 在表的顶部创建子列

> ID：12332363
> 
> 赞同：1
> 
> 时间：2012-09-08T16:14:38.923
> 
> 标签：html, css

我想知道如何使用 CSS/HTML 来划分表格的第一行，如下所示：

![在此处输入图像描述](../Images/f0f4c766824e03fec01f4fefec528025.png)

我知道，如果我想让它们处于底部，我可以使用类似的东西：

```
.subcol{
width: 180 px;
} 
```

这样做，但我似乎找不到任何方法让子列出现在顶部，而不是底部。现在我正在尝试使用它：

```
.col1{
float: left;
width: 795px;
padding-right:15px; 
```

}

```
.col2{
float: left;
width: 320px;
} 
```

然后，我用 DIV 把它放在一起：

```
<div class="col1">VIDEO></div>
<div class="col2">TEXT BOX</div> 
```

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:21:20.077

恰恰相反：您创建一个跨越 2 列的单元格，而不是将一个单元格一分为二。它是由**`colspan`**属性制成的（与 垂直存在相同`rowspan`）。

见小提琴：http: [//jsfiddle.net/PhilippeVay/nFGYq/](http://jsfiddle.net/PhilippeVay/nFGYq/)

**重要提示：**您为什么首先使用表格布局？你不应该那样做。使用`div`或其他元素并使用 CSS 设置样式。

**HTML**

```
<table>
    <tr>
        <td>Video</td>
        <td>Small text box</td>
    </tr>
    <tr>
        <td colspan="2">Text and pictures</td>
    </tr>
</table> 
```

**CSS**

```
table {
    table-layout: fixed; /* will force browsers to stick to widths you want, not adapt to the content of various cells as usual */
    width: 400px;
}
tr:first-child td {
    width: 120px; /* 120 + 40 + 40 = 200 */
}
td {
    border: 1px solid grey;
    padding: 40px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:20:40.700

你可以使用表

```
<table>
<tr>
<td>video</td>
<td>small text box</td>
</tr>
<tr>
<td colspan=2>text and picture</td>
</tr>
</table> 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T16:21:21.150

如果你把区域划分为div，你只需要改变它们在HTML中的顺序——你可以把两个区域放在上面，然后在它们下面放一个clearing div，这样文字和图片如下所示两者（并清除浮动）。

# c - C99 中有固定大小的 float 和 double 类型吗？

> ID：12332366
> 
> 赞同：6
> 
> 时间：2012-09-08T16:14:59.697
> 
> 标签：c, floating-point, c99

C99 规定了整数类型，如 uint32_t、int16_t 等，很容易看到使用的位数。很高兴知道例如嵌入式编程。

我还没有找到任何类似的浮点值类型。有标准吗？如果不是，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:21:06.063

[我在任何保证的 C 中类型的最小尺寸中](https://stackoverflow.com/questions/1738568/any-guaranteed-minimum-sizes-for-types-in-c)找到了答案 ？

引用 Jed Smith（与 C99 标准的更正链接）：

是的，`float.h`和`limits.h`中的值取决于系统。您永远不应该对类型的宽度做出假设，但标准确实规定了一些最小值。[请参阅C99 标准](http://open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf)中的 §6.2.5 和 §5.2.4.2.1 。

例如，标准只说 a`char`应该足够大以容纳执行字符集中的每个字符。它没有说它有多宽。

对于浮点情况，标准提示给出类型宽度的顺序：

### §6.2.5.10

> 共有三种*真正的浮点类型*，分别指定为**float**、**double**和**long double**。^(32) ) **float类型的值集是****double**类型的值集的子集；**double**类型的值集是**long double**类型的值集的子集。

他们隐含地定义了哪个比另一个更宽，但没有具体定义它们有多宽。“子集”本身是模糊的，因为 a`long double`可以具有完全相同的 a 范围`double`并满足该子句。

这是 C 语言的典型表现，每个单独的环境都留下了很多东西。你不能假设，你必须问编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T03:43:06.843

例如，要回答问题的“为什么”部分，名称`uint32_t`会告诉您需要了解的有关该类型的所有信息：它是无符号的，并且正好是 32 位宽，这意味着范围正好是`0`to `4294967295`。（C 标准要求`uintN_t`类型没有填充位或陷阱表示，并且有符号`intN_t`类型使用二进制补码。）

另一方面，以位为单位指定浮点类型的大小并不能告诉您几乎一样多的信息。假设`float64_t`正好是 64 位，但构成浮点对象的位分为符号位、指数和有效位（尾数）。此外，这些位的含义可能会有所不同。在大多数表示中，指数表示 2 的幂，但也可以是 16 的幂。还有许多特殊表示：次正规、非正规、NaN、无穷大、负零。

浮点表示的变体比类型名称中容易编码的要多。

IEEE 浮点标准（更确切地说是 IEC 60559）定义了所有这些——但如果您的实现支持 IEC 60559，那么 C 标准指定了`float`and的含义`double`（尽管它为 提供了更多的灵活性`long double`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-31T20:01:27.983

虽然绝大多数 C 编译器都包含 32 位整数类型，但也有许多编译器只有 32 位类型，`int`而在其他编译器中只有 32 位类型`long`。具有标准名称`int32_t`意味着“有符号的 32 位类型之一”避免了程序员需要知道*哪个*内置类型是 32 位的，除非编译器使用激进的基于类型的别名。

相比之下，绝大多数可以使用 IEEE 单精度值的编译器都称它为`float`，而那些可以使用 IEEE 双精度值的编译器则称它为`double`。编译器可能会使用这些名称`float`并`double`识别 IEEE 类型以外的其他内容，但将 IEEE 类型包含在其他名称下，这并非不可想象，但这种情况对于标准来说可能太少见而无需担心。

# iphone - 0x8badf00d 在运行 iOS 4.3 的 iPad 上出现异常代码，但在运行 iOS 5.1 的 iPad 或 iPhone 上却没有

> ID：12332370
> 
> 赞同：0
> 
> 时间：2012-09-08T16:15:15.173
> 
> 标签：iphone, exception, ios4

我在我的医疗应用程序中添加了一项新功能，允许用户将电子邮件附件导入应用程序的文档文件夹以供离线查看。将电子邮件附件导入运行 iOS 5.1 的 iPad 2 或运行 iOS 5.1 的 iPhone 4S 上的应用程序可以完美运行。但是，在运行 iOS 4.3 的原始 iPad 上，导入附件无法打开应用程序（它在显示启动屏幕之前挂起）。崩溃日志包含异常代码 0x8badf00d，并显示应用程序在尝试启动 20 秒后退出。虽然保持 iOS 4.x 兼容性并不重要，但如果这个问题可以解决，我想继续支持 4.x。我想知道这个问题是否与 iOS 4 或原始 iPad 的架构有关。任何想法都会非常感激，特别是因为在模拟器上测试这个错误似乎是不可能的。值得注意的是，除了 Apple 的可达性代码之外，应用程序的启动不需要任何网络活动；典型的启动时间几乎是瞬时的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:54:31.800

操作系统说启动时间太长。减少您的启动时间。

假设您的应用程序已挂起，这是杀死您的应用程序的看门狗计时器。现在，为什么最慢的设备最先出现问题也就不足为奇了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:29:49.750

如果导入新数据需要很长时间，则不应在应用程序中导入附件：didFinishLaunching:。您应该立即向用户显示微调器或类似内容，然后在后台线程上完成导入过程。

另一件要检查的事情是确保你没有简单地有一个错误的无限循环，或者其他一些反复调用的东西`directoryContentsAtPath:matchingExtension:options:keepExtension:error`。

# mysql - 使用 unix 和 mysql 创建 wordpress 转储（.wxr）

> ID：12332372
> 
> 赞同：7
> 
> 时间：2012-09-08T16:15:34.213
> 
> 标签：mysql, wordpress, unix

我需要在我的服务器上使用 SSH 创建 wordpress 导出转储 (.WXR)。我无法访问 Wordpress 仪表板。可以使用一些 unix、mysql 脚本来完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T04:57:34.567

正如[在此处所写](http://drincruz.blogspot.com.au/2009/11/wordpress-cli-export.html)的那样，您所需要的只是`export_wp`函数，因此请按照以下方式运行。

```
include 'wp-config.php';
include 'wp-admin/includes/export.php';

ob_start();
export_wp();
$file = ob_get_contents();
ob_end_clean();

$fh = fopen("wordpress-" . date('Y-m-d') . ".xml", 'w');
fwrite($fh, $file);
fclose($fh); 
```

然后只需抓取生成的 .xml 文件！

# javascript - 如何检查 Backbone.View 当前是否在 DOM 中呈现？

> ID：12332373
> 
> 赞同：7
> 
> 时间：2012-09-08T16:15:58.260
> 
> 标签：javascript, dom, view, backbone.js

我想检查 Backbone.View 当前是否在 DOM 中呈现，如果不是，我不必重新呈现它。我可以以某种方式检查吗？

问候

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-08T16:24:14.027

好吧，理论上你可以查询 DOM 来找出答案，但这比仅仅设置一个实例变量并在渲染之前查询它要慢得多。另一方面，渲染方法（假设一切设置正确）只应在模型更改时调用，因此您的问题表明您可能没有按照应该使用的方式使用视图（MVC 风格） . 但是假设您需要这样做，`this.rendered = true`在您的渲染方法中再次渲染之前设置并检查它可能是最快和最简单的。

# java - 匿名内部类必须扩展一些超类？

> ID：12332375
> 
> 赞同：3
> 
> 时间：2012-09-08T16:16:08.853
> 
> 标签：java, inner-classes, anonymous-inner-class

我正在学习 java swing，遇到了匿名内部类的概念。在这个[链接](http://c2.com/cgi/wiki?AnonymousInnerClass)上研究了一下之后，我觉得匿名内部类必须始终扩展一些其他类，因为它作为参数传递的方法是预定义的。最多，如果一个方法接受 Object 实例作为参数，只有这样我们才能创建一个匿名的独立内部类。我只是征求你的意见，我是否正确。如果您能提供一些示例，将会很有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T16:31:25.973

*每个*类都必须扩展一些超类。*唯一*的例外是`java.lang.Object`，它是顶级类，因此*不能*有超类。匿名内部类在这方面没有什么不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T16:24:45.533

内部类的目的是以您可以从其他地方使用的方式“打包”操作的实现。当您将一段代码传递给可以将控制权传回给您的方法时，这使您可以实现*回调的概念。*

基类/接口用于为那段代码提供访问点。您和您调用的方法就回调方法的名称和签名达成一致，方法是就您的内部类（实际上是任何类）必须实现的接口达成一致，目标方法才能回调您。

更具体地说，为了让窗口回调您的窗口侦听器，您必须就`windowClosing`方法的名称和签名达成一致。你通过实现一个接口来做到这一点。

在极少数情况下，当目标方法是由`java.lang.Object`（例如`toString`）实现的方法时，您可以从顶层派生您的命名或匿名内部类`Object`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T16:24:45.887

创建一个匿名内部类而不扩展任何东西基本上意味着你无法与之交谈。

例如，您需要扩展一个类或实现一个接口，以便为您的对象提供可以与之交谈的已知方法；

```
myButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e)
    {
        // do something here.
    }
}); 
```

与该对象的实例对话的唯一方法是通过已知的 ActionListener 方法（恰好是 addActionListener 需要的方法），您添加的任何其他方法只能在对象本身*内部访问。*如果您不必扩展/实现任何东西，那么根本就没有方法可以从外部访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T16:31:45.027

您的陈述是正确的，即通过它使匿名内部类自动继承该类的类，因为在这种情况下匿名类继承类C

```
 class C
{
void one()
{
System.out.println("***************************\n********");

}
}
class three
{
public static void main(String args[])

{
C obj=new C(){
             void one()
             {
             System.out.println("//////////////");
              }
           };
 obj.one();

}

} 
```

# java - Java2D在移动图像后删除旧像素？

> ID：12332377
> 
> 赞同：1
> 
> 时间：2012-09-08T16:16:17.443
> 
> 标签：java, swing, 2d, paint, java-2d

所以我在 Java2D 中移动一个图像，它也会反弹。出于某种原因，它总是会留下旧图像的痕迹。我该如何解决这个问题？

主类：

```
package org.main.graphics;

import java.awt.Graphics;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JFrame;

import org.main.entity.Entity;
import org.main.entity.Loael;

@SuppressWarnings("serial")
public class GameWindow extends JFrame implements Runnable {

        private List<Entity> entities = new ArrayList<Entity>();
        private Thread animator;

        public GameWindow() throws IOException {
                super("Game");
                setSize(640, 480);
                setVisible(true);
                setResizable(false);
                setLocationRelativeTo(null);
                revalidate();

                entities.add(new Loael(500, 400));

                animator = new Thread(this);
                animator.start();
        }

        public void paint(Graphics g) {
                for (Entity entity : entities) {
                        try {
                                g.drawImage(entity.getImage(), entity.getX(), entity.getY(),
                                                this);
                        } catch (IOException e) {
                                e.printStackTrace();
                        }
                }
        }

        @Override
        public void run() {
                while (true) {
                        for (Entity entity : entities) {
                                entity.animate(getBounds());
                                repaint();
                        }
                        try {
                                Thread.sleep(1);
                        } catch (InterruptedException e) {
                        }
                }
        }
} 
```

错误示例：

![在此处输入图像描述](../Images/915bbac7fbeebf108fc6b8416d797b5c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T04:16:51.393

不要直接在`JFrame`. 相反，使用`JPanel`或扩展`JComponent`. 用于绘画覆盖`paintComponent()`而不是`paint()`. 不要忘记调用`super.paintComponent(g);`，否则您将遇到与示例中相同的行为 - 之前的结果`drawImage()`未被清除并且线索仍然存在。

看一下[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)教程，特别是[仔细看看绘画机制](http://docs.oracle.com/javase/tutorial/uiswing/painting/closer.html)部分，了解更多细节。

考虑以下`JPanel`使用 Swing 计时器为图像设置动画的示例：

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.*;

public class AnimateDemo {
    private static void createAndShowUI() {
        try {
            Image image = ImageIO.read(new URL(
                    "http://duke.kenai.com/iconSized/duke.gif"));
            final MyPanel panel = new MyPanel(image);
            JFrame frame = new JFrame("AnimateDemo");
            frame.getContentPane().add(panel);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.pack();
            frame.setLocationByPlatform(true);
            frame.setVisible(true);

            ActionListener timerAction = new ActionListener() {
                public void actionPerformed(ActionEvent evt) {
                    panel.animate();
                }
            };
            Timer timer = new Timer(10, timerAction);
            timer.setRepeats(true);
            timer.start();

        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    static class MyPanel extends JPanel {
        private Image image;
        private int coordinateX = 0;
        private int coordinateY = 0;

        private boolean incrementX = true;
        private boolean incrementY = true;

        public MyPanel(Image image) {
            this.image = image;
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            if (image != null) {
                g.drawImage(image, coordinateX, coordinateY, this);
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(300, 300);
        }

        public void animate() {
            if (image != null) {

                if (image.getWidth(this) + coordinateX > getWidth()) {
                    incrementX = false;
                }
                if (coordinateX < 0) {
                    incrementX = true;
                }

                if (incrementX)
                    coordinateX++;
                else
                    coordinateX--;

                if (image.getHeight(null) + coordinateY > getHeight()) {
                    incrementY = false;
                }
                if (coordinateY < 0) {
                    incrementY = true;
                }

                if (incrementY)
                    coordinateY++;
                else
                    coordinateY--;

                repaint();
            }
        }
    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                createAndShowUI();
            }
        });
    }
} 
```

# java - 从终端构建和运行 lwjgl 程序

> ID：12332381
> 
> 赞同：4
> 
> 时间：2012-09-08T16:16:33.630
> 
> 标签：java, linux, terminal, lwjgl

我正在尝试编译并运行一个使用 LWJGL 的非常基本的程序：

```
import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;

public class HelloWorld {
     public static void main (String args[]) {
         try {
             Display.setTitle("Hello World");
             Display.create();
         } catch (LWJGLException e) {
             e.printStackTrace();
         }

         while (!Display.isCloseRequested()) {
             try {
                 Thread.sleep(100);
             } catch (Exception e) {
                 e.printStackTrace();
             }
         }
    }
} 
```

我设法使用以下方法编译它：

```
javac -classpath ~/Downloads/lwjgl-2.8.3/jar/lwjgl.jar:~/Downloads/lwjgl-2.8.3/jar/lwjgl_util.jar:~/Downloads/lwjgl-2.8.3/jar/jinput.jar HelloWorld.java 
```

但现在我无法运行它......我试过了：

```
java HelloWorld 
```

和：

```
java -Djava.library.path=~/Downloads/lwjgl-2.8.3/native/linux HelloWorld 
```

但这些都不起作用。他们俩都抱怨没有找到 LWJGLException 类定义。

我正在运行 Linux，并且没有使用 Eclipse 或 Netbeans 等 IDE。我不想使用一个，我希望能够从终端运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T18:55:15.357

以下适用于我的 Windows 机器，但我已经为 linux 格式调整了 shell 命令（冒号与分号）：

**设置目录结构如下：**

```
/HelloWorld.java
/lib/jwjgl.jar
/lib/jinput.jar
/lib/jwjgl_util.jar
/native/linux/... (all your native files) 
```

**编译：**

在您的 shell 中，导航到包含 HelloWorld.java 的父目录，然后键入以下内容：

```
javac -cp .:lib/* HelloWorld.java 
```

`-cp`指定用于编译程序的 .java 和 .class文件可以在 `.`（当前目录）和. 请注意，您可以手动指定文件，即等，但（我相信仅限 java 1.6+）是指定目录中所有 jar 的快捷方式。`jar``lib/``.jar``-cp .:lib/lwjgl.jar:lib/jinput.jar``*`

**跑：**

现在从父目录运行以下命令：

```
java -cp .:lib/* -Djava.library.path=native/linux HelloWorld 
```

同样，`-cp`指定您的编译`.class`文件可以在当前目录和该`/lib`目录下的任何 jar 中找到。`-Djava.library.path=`指定可以找到本机文件的位置。请注意，您没有`/`在`native`. 通过省略前导`/`，您告诉 java 该`native`目录是相对于当前工作目录的子目录。如果您不小心包含了`/`，它会将 native 视为绝对目录，这可能不是您想要的。

为当前工作目录之外的本机文件指定一个位置是完全可以接受的。为此，您必须提供绝对位置，例如在 Windows 上：

```
-Djava.library.path=C:\jwjgl-2.8.4\native\windows 
```

这应该是您在没有 IDE 或构建脚本的情况下启动并运行所需的全部内容！

**最后说明**

所写的`HelloWorld.java`，表现不佳（屏幕锁定，您必须强制关闭进程）。尝试使用以下代码（改编自网络上的多个源，稍作修改以适应此示例，但主要*不是*我自己的努力），作为`HelloWorld.java`. 享受！

```
import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;
import org.lwjgl.input.Keyboard;

public class HelloWorld{
    public void start() {
        try {
            Display.setDisplayMode(new DisplayMode(640, 480));
            Display.create();
        } catch (LWJGLException e) {
            e.printStackTrace();
            System.exit(0);
        }

        // Init OpenGL
        GL11.glMatrixMode(GL11.GL_PROJECTION);
        GL11.glLoadIdentity();
        GL11.glOrtho(-3.2, 3.2, -2.4, 2.4, -1, 1);
        GL11.glMatrixMode(GL11.GL_MODELVIEW);

        boolean quit = false;

        while (!quit) {         
            // Clear the screen.
            GL11.glClear(GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT);

            // Begin drawing
            GL11.glBegin(GL11.GL_TRIANGLES);

                // Top & Red
                GL11.glColor3f(1.0f, 0.0f, 0.0f);
                GL11.glVertex2f(0.0f, 1.0f);

                // Right & Green
                GL11.glColor3f(0.0f, 1.0f, 0.0f);
                GL11.glVertex2f(1.0f, 1.0f);

                // Left & Blue
                GL11.glColor3f(0.0f, 0.0f, 1.0f);
                GL11.glVertex2f(1.0f, -1.0f);

            GL11.glEnd();

            Display.update();

            if (Display.isCloseRequested() || Keyboard.isKeyDown(Keyboard.KEY_ESCAPE))
                quit = true;
        }

        Display.destroy();
    }

    public static void main(String args[]) {
        HelloWorld application = new HelloWorld();
        application.start();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:25:36.747

您在类路径中缺少一些 .jar。您可以添加 with`-classpath`但要注意 linux 上的额外标志。很可能您在发布时也需要这些：

```
java -classpath ~/Downloads/lwjgl-2.8.3/jar/lwjgl.jar:~/Do... -Djava.library.path=~/Downloads/lwjgl-2.8.3/native/linux HelloWorld 
```

我不确定这个 `~`标志，试着把绝对路径放在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T16:40:39.980

尝试使用 javac 命令创建一个 complie.sh，在类路径中设置所有你需要的 .jars 并添加你所有需要编译的类。这应该会在输出目录中产生一个或多个 .class 文件。那时你知道你已经编译了你的“项目”。

在此之后您可以使用 java 启动，但使用 java 启动有两种模式：

```
java -jar yourJarName.jar 
```

为此，您需要将所有类 jar 放入 jar 文件中，并在 maifest 文件中添加所有必需的其他 jar，或者您将提取所有必需的 jar 并将它们嵌入到您的 jar 中

另一个就像你尝试过的一样

java -classpath your1.jar your2.jar toon claaspath com 中的类。**yourpackage.MainClass**

有关具体如何进行，请搜索“在命令行 Linux 中编译 java 项目”和“从命令行 linux 运行 java 应用程序”

# c# - 动画 WPF 窗口的宽度和高度

> ID：12332385
> 
> 赞同：5
> 
> 时间：2012-09-08T16:17:04.173
> 
> 标签：c#, wpf, animation

我想为 wpf 窗口的宽度和高度设置动画。我尝试了以下方法，不幸的是它只是为宽度设置动画......窗口的高度永远不会改变。

我确定我错过了一些愚蠢的事情，并希望通过在这里发帖有人会看到我的错误！

这是一个简单窗口背后的代码，我已经连接了一个按钮来调整大小：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        this.AnimateWindowSize(ActualWidth + 200, ActualHeight + 200);
    }
} 
```

这是我作为扩展方法编写的动画代码，因此它可以应用于任何窗口......

```
public static class WindowUtilties
{
    public static void AnimateWindowSize(this Window target, double newWidth, double newHeight)
    {
        var sb = new Storyboard {Duration = new Duration(new TimeSpan(0, 0, 0, 0, 200))};

        var aniWidth = new DoubleAnimationUsingKeyFrames();
        var aniHeight = new DoubleAnimationUsingKeyFrames();

        aniWidth.Duration = new Duration(new TimeSpan(0, 0, 0, 0, 200));
        aniHeight.Duration = new Duration(new TimeSpan(0, 0, 0, 0, 200));

        aniHeight.KeyFrames.Add(new EasingDoubleKeyFrame(target.ActualHeight, KeyTime.FromTimeSpan(new TimeSpan(0, 0, 0, 0, 00))));
        aniHeight.KeyFrames.Add(new EasingDoubleKeyFrame(newHeight, KeyTime.FromTimeSpan(new TimeSpan(0, 0, 0, 0, 200))));
        aniWidth.KeyFrames.Add(new EasingDoubleKeyFrame(target.ActualWidth, KeyTime.FromTimeSpan(new TimeSpan(0, 0, 0, 0, 00))));
        aniWidth.KeyFrames.Add(new EasingDoubleKeyFrame(newWidth, KeyTime.FromTimeSpan(new TimeSpan(0, 0, 0, 0, 200))));

        Storyboard.SetTarget(aniWidth, target);
        Storyboard.SetTargetProperty(aniWidth, new PropertyPath(Window.WidthProperty));

        Storyboard.SetTarget(aniHeight, target);
        Storyboard.SetTargetProperty(aniHeight, new PropertyPath(Window.HeightProperty));

        sb.Children.Add(aniWidth);
        sb.Children.Add(aniHeight);

        sb.Begin();
    }
} 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T21:05:43.860

在 Joe 关于使用 pinvoke 和依赖属性的评论之后，我最终得到了这段代码。如果代码很长，我现在会道歉，我不应该把它都放在这里。数学在尺寸上并不完美。WPF Actual(Height/Width) 与 Rect.Height/Width 之间存在很大差异，可能需要进行一些计算才能获得所需的确切尺寸。

这被添加到 MainWindow 类

```
[StructLayout(LayoutKind.Sequential)]
public struct RECT
{
    public int X;
    public int Y;
    public int Width;
    public int Height;
}

public enum SpecialWindowHandles
{
    HWND_TOP = 0,
    HWND_BOTTOM = 1,
    HWND_TOPMOST = -1,
    HWND_NOTOPMOST = -2
}

[DllImport("user32.dll", SetLastError = true)]
static extern bool GetWindowRect(IntPtr hWnd, ref RECT Rect);

[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int X, int Y, int cx, int cy, uint uFlags);

public static readonly DependencyProperty WindowHeightAnimationProperty = DependencyProperty.Register("WindowHeightAnimation", typeof(double),
                                                                                            typeof(MainWindow), new PropertyMetadata(OnWindowHeightAnimationChanged));

private static void OnWindowHeightAnimationChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    var window = d as Window;

    if (window != null)
    {
        IntPtr handle = new WindowInteropHelper(window).Handle;
        var rect = new RECT();
        if (GetWindowRect(handle, ref rect))
        {
            rect.X = (int)window.Left;
            rect.Y = (int)window.Top;

            rect.Width = (int)window.ActualWidth;
            rect.Height = (int)(double)e.NewValue;  // double casting from object to double to int

            SetWindowPos(handle, new IntPtr((int)SpecialWindowHandles.HWND_TOP), rect.X, rect.Y, rect.Width, rect.Height, (uint)SWP.SHOWWINDOW);
        }
    }
}

public double WindowHeightAnimation
{
    get { return (double)GetValue(WindowHeightAnimationProperty); }
    set { SetValue(WindowHeightAnimationProperty, value); }
}

public static readonly DependencyProperty WindowWidthAnimationProperty = DependencyProperty.Register("WindowWidthAnimation", typeof(double),
                                                                                            typeof(MainWindow), new PropertyMetadata(OnWindowWidthAnimationChanged));

private static void OnWindowWidthAnimationChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    var window = d as Window;

    if (window != null)
    {
        IntPtr handle = new WindowInteropHelper(window).Handle;
        var rect = new RECT();
        if (GetWindowRect(handle, ref rect))
        {
            rect.X = (int)window.Left;
            rect.Y = (int) window.Top;
            var width = (int)(double)e.NewValue;
            rect.Width = width;
            rect.Height = (int) window.ActualHeight;

            SetWindowPos(handle, new IntPtr((int)SpecialWindowHandles.HWND_TOP), rect.X, rect.Y, rect.Width, rect.Height, (uint)SWP.SHOWWINDOW);
        }
    }
}

public double WindowWidthAnimation
{
    get { return (double)GetValue(WindowWidthAnimationProperty); }
    set { SetValue(WindowWidthAnimationProperty, value); }
}

private void GrowClick(object sender, RoutedEventArgs e)
{
    this.AnimateWindowSize(Width+200, Height+200);
}

/// <summary>
/// SetWindowPos Flags
/// </summary>
public static class SWP
{
    public static readonly int
    NOSIZE = 0x0001,
    NOMOVE = 0x0002,
    NOZORDER = 0x0004,
    NOREDRAW = 0x0008,
    NOACTIVATE = 0x0010,
    DRAWFRAME = 0x0020,
    FRAMECHANGED = 0x0020,
    SHOWWINDOW = 0x0040,
    HIDEWINDOW = 0x0080,
    NOCOPYBITS = 0x0100,
    NOOWNERZORDER = 0x0200,
    NOREPOSITION = 0x0200,
    NOSENDCHANGING = 0x0400,
    DEFERERASE = 0x2000,
    ASYNCWINDOWPOS = 0x4000;
} 
```

在 OP 的代码中，我相应地更改了 height 和 width 目标属性

```
Storyboard.SetTargetProperty(aniHeight, new PropertyPath(Window.HeightProperty));
Storyboard.SetTargetProperty(aniWidth, new PropertyPath(Window.WidthProperty)); 
```

至

```
Storyboard.SetTargetProperty(aniHeight, new PropertyPath(MainWindow.WindowHeightAnimationProperty));
Storyboard.SetTargetProperty(aniWidth, new PropertyPath(MainWindow.WindowWidthAnimationProperty)); 
```

原答案：

根据我的发现，您的代码没有问题。当我更改将动画添加到情节提要 (sb.Children.Add) 实例的顺序时，我得到了没有宽度的高度动画。

这让我相信，当第一个动画发生时，另一个动画变得无效。

我所能想到的就是让它们一个接一个地制作动画，方法是让一个动画比另一个稍长。较长的动画将在第一个动画完成后出现。

```
var sb = new Storyboard { Duration = new Duration(new TimeSpan(0, 0, 0, 0, 300)) };

var aniWidth = new DoubleAnimationUsingKeyFrames();
var aniHeight = new DoubleAnimationUsingKeyFrames();

aniWidth.Duration = new Duration(new TimeSpan(0, 0, 0, 0, 300));
aniHeight.Duration = new Duration(new TimeSpan(0, 0, 0, 0, 150));

aniHeight.KeyFrames.Add(new EasingDoubleKeyFrame(target.ActualHeight, KeyTime.FromTimeSpan(new TimeSpan(0, 0, 0, 0, 00))));
aniHeight.KeyFrames.Add(new EasingDoubleKeyFrame(newHeight, KeyTime.FromTimeSpan(new TimeSpan(0, 0, 0, 0, 150))));

aniWidth.KeyFrames.Add(new EasingDoubleKeyFrame(target.ActualWidth, KeyTime.FromTimeSpan(new TimeSpan(0, 0, 0, 0, 150))));
aniWidth.KeyFrames.Add(new EasingDoubleKeyFrame(newWidth, KeyTime.FromTimeSpan(new TimeSpan(0, 0, 0, 0, 300)))); 
```

即使使用 XAML 故事板，我也无法同时调整窗口的高度和宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T06:04:47.467

新 DP 的一个建议对我来说似乎有点矫枉过正，特别是因为该解决方案承认它仍然不会同时调整大小。在我的快速实验中，添加甚至 1ms 的延迟（通过 Task.Run()）实现了最终结果（窗口大小调整）。该解决方案也不会同时调整大小，因此动画并不像它应该的那样优雅，但它最终“有效”。

# javascript - 带有导致 HierarchyRequestError 的按钮的 jQuery UI 对话框错误

> ID：12332387
> 
> 赞同：1
> 
> 时间：2012-09-08T16:17:22.340
> 
> 标签：javascript, jquery, jquery-ui, jquery-templates

我有一段 javascript，我在其他页面中使用得很好，但是在新页面中抛出了 HierarchyRequestError。这让我怀疑这是我页面中的 HTML 的问题。这是代码的一个大大简化的版本（仍然会产生错误）：

```
window.webframe.loginDialog = function () {
    $("body").append('<div id="dialogSpace" />');
    $("#dialogSpace").load("/login/index #loginContainer", function () {
        $("#loginContainer").dialog({
            buttons:
            [
                {
                    text: "Hi",
                    click: function()
                    { alert('Hi');}
                }
            ]
            });
    });
};

$('#lnkLogin').click(function () {
    webframe.loginDialog();
    return false;
}); 
```

如果我运行此代码，我会从 jQuery 收到以下错误：

> HierarchyRequestError：无法在层次结构中的指定点插入节点

如果我删除按钮定义，那么错误就会消失。如果按钮选项本身存在，则没有区别，但是如果我放入任何类型的单个按钮处理程序，则会发生错误。我还尝试了两种在选项中定义按钮的方式。

我正在使用 jQuery 1.7.2 和 jQuery UI 1.8.23，我已经尝试升级到 jQuery 1.8，没有任何变化。

正如我在上面所说的，我强烈怀疑这是 HTML 结构的问题，因为完全相同的代码文件可以在其他地方使用不同的页面很好，我会继续关注它，但这很奇怪，我想看看这是否敲响了警钟与其他任何人。

更新：我浏览了所有其他 js 引用，发现包括 jquery.template ( [https://bitbucket.org/stanlemon/jquery-templates/](https://bitbucket.org/stanlemon/jquery-templates/) ) 是导致它的原因。尝试更新到最新版本，但已经 3 年了，问题仍然存在。必须将我现有的代码移植到最新的模板库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-02T13:50:27.193

这不会是您正在寻找的答案，但我也遇到了同样的问题。升级到 jQuery 2.02 和 jQuery UI 1.10.4 并没有解决这个问题。最后我删除了 jquery.template.js。

# html - 在 css3 中使用 :nth-of-type() 进行样式设置

> ID：12332388
> 
> 赞同：0
> 
> 时间：2012-09-08T16:17:22.433
> 
> 标签：html, css, css-selectors

我必须为要使用 div 和 spans 设计的类似表格的结构设置样式。

```
 <div id="parentdiv">
         <div>
           <span>abc</span>
           <span>bcd</span>
           <span>cde</span>
         </div>
         <div>
           <span>123</span>
           <span>234</span>
           <span>456</span>
         </div>
         <div>
           <span>mno</span>
           <span>nop</span>
           <span>pqr</span>
         </div>
         <div>
           <span>678</span>
           <span>789</span>
           <span>890</span>
         </div> 
```

在这里，我必须用 2 种颜色设置备用 div 的样式。我使用的 CSS 是

```
 #parentdiv div :nth-of-type(2N)
         {
         background-color: #FFF;
         }

        #parentdiv div :nth-of-type(2N+1)
         {
          background-color: #f7f7f7;
         } 
```

在这里，跨度正在变得样式化。请帮我。我只想设置 div 的样式，以便交替行颜色一致。我希望有人能帮助我。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:21:13.307

删除和之间的空间`div`，`nth-of-type`如下所示：

```
 #parentdiv div:nth-of-type(2N)
     {
     background-color: #FFF;
     }

    #parentdiv div:nth-of-type(2N+1)
     {
      background-color: #f7f7f7;
     } 
```

这样，它实际上是指`div`s，而不是`div`s 的孩子。

# javascript - Django的神秘javascript错误

> ID：12332389
> 
> 赞同：0
> 
> 时间：2012-09-08T16:17:30.017
> 
> 标签：javascript, django, debugging

我在我的模板中包含 jquery，如下所示：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

完成此操作后，我将此表单添加到我的页面：

```
<form method="POST">
Quantity: <input type="text" name="quantity" /><br />
<input type="submit" value="Add To Cart"/>
</form> 
```

然后我的控制台输出错误：

```
Uncaught TypeError: Object #<Object> has no method 'canPushDown' 
```

有趣的是，如果我将提交值更改为：

```
value="Add To Car" 
```

错误消失！此外，如果我在值中添加额外的 t ：

```
value="Add To Cartt" 
```

错误返回。

这是我的整个模板：

```
<!DOCTYPE html>
<html>

<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
</head>

<body>

<form method="POST">
Quantity: <input type="text" name="quantity" /><br />
<input type="submit" value="Add To Cart"/>
</form>

</body>

</html> 
```

我已经确认这种行为只发生在 django 模板的上述 html 中。有人对可能发生的事情有预感吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:33:19.747

我可以通过在 Chrome 扩展中禁用 Amazon Universal Wishlist 来解决这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:49:16.637

我遇到了同样的事情，但不是来自我自己的浏览器中捕获的错误（我有一个系统设置来使用 raven-js 和哨兵捕获客户端错误）。

我的理论是 Chrome 浏览器扩展导致它。如果您在 Chrome 配置文件中扫描 canPushDown 的扩展程序，您可能会发现一些东西。如果你这样做，我也很想知道是什么原因造成的。

# database - Cassandra 1.1 中的过滤列 - 重复和澄清

> ID：12332391
> 
> 赞同：0
> 
> 时间：2012-09-08T16:17:42.183
> 
> 标签：database, cassandra, primary-key, filtering

[我以前](https://stackoverflow.com/questions/12297841/cassandra-1-1-composite-keys-columns-and-filtering-in-cql-3)问过这个问题，并且从包括文档在内的各种来源收到了明显相互矛盾的答案。因此，我通过文档链接和 Datastax 的一些人所说的话重复它，希望 Cassandra 的开发人员（或具有真正 Cassandra 1.1 经验的人）可以为我解决这个问题。

我希望按如下方式运行查询，其中 ID 是 PK，Data 是最终的“值”：

```
SELECT Data FROM MyApp.ProductFamilies WHERE ID IN (?, ?, ?) AND PriceLow >= ? 
AND PriceHigh <= ? AND MassLow >= ? AND MassHigh <= ? and MnfGeo >= ? AND 
MnfGeo <= ? 
```

请注意，在底层，CQL 正在过滤列名，即值。我没有过滤最终的“值”，因此不需要二级索引。

[本文档](http://www.datastax.com/docs/1.1/references/cql/SELECT)说明以下内容：

> WHERE 子句可以包括对除第一列之外的列的大于和小于比较。只要所有先前的关键组件列都已经用严格 = 比较标识，最后一个给定的关键组件列可以是任何类型的比较。

根据这一点，上述查询可以正常工作，@jbellis 确认了这一点，但其他人因为 PK 安排而拒绝。

该声明有点模糊，因为第 1 列可能是也可能不是完整的 PK，因此本质上并不重要。我将其解释为：

1.  您可以 <=> 查询所有非 PK 列。
2.  如果您有一个复合键，并且除最后一个之外的每个组件都有一个 =，则可以 <=> 查询最后一个组件。

但是，根据以下内容，不能对不属于 PK 的列应用 WHERE 子句（[请参见此处](http://www.datastax.com/dev/blog/cql3_collections#comment-120658)）。

> 在没有索引的情况下执行 CONTAINS 的问题在于，这通常是非常低效的，并且禁止这种通常低效的查询是我们希望使用 Cassandra/CQL 的事情（很像我们不允许 'WHERE a = 3' 的事实，除非a 是 PK 的一部分或已编入索引）。

根据这一点，我们可以仅将 WHERE 谓词应用于 PK 组件。这意味着我的查询不起作用。

我错过了什么？

# python - Python中的三角波形数组

> ID：12332392
> 
> 赞同：14
> 
> 时间：2012-09-08T16:17:49.207
> 
> 标签：python, arrays, numpy, geometry

产生一个由 100 个数字组成的数组的最有效方法是什么，这些数字形成下面的三角波的形状，最大/最小振幅为 0.5？

记住三角波形：

![在此处输入图像描述](../Images/c8c395cd9b2450d0e11a41645c2e7e27.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-01-18T21:52:10.517

生成三角波的最简单方法是使用 signal.sawtooth。注意 signal.sawtooth(phi, width) 接受两个参数。第一个参数是相位，下一个参数指定对称性。width = 1 给出右侧锯齿，width = 0 给出左侧锯齿，width = 0.5 给出对称三角形。享受！

```
from scipy import signal
import numpy as np
import matplotlib.pyplot as plt
t = np.linspace(0, 1, 500)
triangle = signal.sawtooth(2 * np.pi * 5 * t, 0.5)
plt.plot(t, triangle) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-08T16:33:57.580

使用生成器：

```
def triangle(length, amplitude):
     section = length // 4
     for direction in (1, -1):
         for i in range(section):
             yield i * (amplitude / section) * direction
         for i in range(section):
             yield (amplitude - (i * (amplitude / section))) * direction 
```

这对于可被 4 整除的长度可以正常工作，对于其他长度，您最多可能会错过 3 个值。

```
>>> list(triangle(100, 0.5))
[0.0, 0.02, 0.04, 0.06, 0.08, 0.1, 0.12, 0.14, 0.16, 0.18, 0.2, 0.22, 0.24, 0.26, 0.28, 0.3, 0.32, 0.34, 0.36, 0.38, 0.4, 0.42, 0.44, 0.46, 0.48, 0.5, 0.48, 0.46, 0.44, 0.42, 0.4, 0.38, 0.36, 0.33999999999999997, 0.32, 0.3, 0.28, 0.26, 0.24, 0.21999999999999997, 0.2, 0.18, 0.15999999999999998, 0.14, 0.12, 0.09999999999999998, 0.08000000000000002, 0.06, 0.03999999999999998, 0.020000000000000018, -0.0, -0.02, -0.04, -0.06, -0.08, -0.1, -0.12, -0.14, -0.16, -0.18, -0.2, -0.22, -0.24, -0.26, -0.28, -0.3, -0.32, -0.34, -0.36, -0.38, -0.4, -0.42, -0.44, -0.46, -0.48, -0.5, -0.48, -0.46, -0.44, -0.42, -0.4, -0.38, -0.36, -0.33999999999999997, -0.32, -0.3, -0.28, -0.26, -0.24, -0.21999999999999997, -0.2, -0.18, -0.15999999999999998, -0.14, -0.12, -0.09999999999999998, -0.08000000000000002, -0.06, -0.03999999999999998, -0.020000000000000018] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-10T06:35:34.570

使用 numpy：

```
def triangle2(length, amplitude):
    section = length // 4
    x = np.linspace(0, amplitude, section+1)
    mx = -x
    return np.r_[x, x[-2::-1], mx[1:], mx[-2:0:-1]] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-01-11T23:19:19.040

三角形是锯齿的绝对值。

```
from scipy import signal
time=np.arange(0,1,0.001)
freq=3
tri=np.abs(signal.sawtooth(2 * np.pi * freq * time)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-08T17:01:02.970

您可以将迭代器生成器与 numpy fromiter 方法一起使用。

```
import numpy

def trigen(n, amp):
    y = 0
    x = 0
    s = amp / (n/4)
    while x < n:
        yield y
        y += s
        if abs(y) > amp:
            s *= -1
        x += 1

a = numpy.fromiter(trigen(100, 0.5), "d") 
```

现在你有了一个方波数组。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-22T16:47:50.307

这是一个自制的三角信号python函数

```
import matplotlib.pyplot as plt
import numpy as np
phase=-10
length=30 # should be positive
amplitude=10
x=np.arange(0,100,0.1)
def triang(x,phase,length,amplitude):
    alpha=(amplitude)/(length/2)
    return -amplitude/2+amplitude*((x-phase)%length==length/2) \
            +alpha*((x-phase)%(length/2))*((x-phase)%length<=length/2) \
            +(amplitude-alpha*((x-phase)%(length/2)))*((x-phase)%length>length/2)

tr=triang(x,phase,length,amplitude)
plt.plot(tr) 
```

# sql-server - 如果结果为 0，如何在存储过程上启动 THROW？

> ID：12332395
> 
> 赞同：0
> 
> 时间：2012-09-08T16:17:56.400
> 
> 标签：sql-server, tsql, stored-procedures

我想知道如果有 0 个结果，我必须怎么做才能在以下存储过程中引发异常，以便它可以选择 NULL 行？这是针对 MSSQL 的，非常感谢。

```
...

BEGIN TRY
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    SELECT
        NoteId,
        Url,
        Subject,
        Content,
        ExpiresAt,
        RemindAt
    FROM dbo.browsingnotes_Notes
    WHERE UserId = @UserId
        AND Hash = @Hash
END TRY
BEGIN CATCH
    SELECT
        NULL AS 'NoteId',
        NULL AS 'Url',
        NULL AS 'Subject',
        NULL AS 'Content',
        NULL AS 'ExpiresAt',
        NULL AS 'RemindAt'
END CATCH 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T16:20:54.237

`RAISERROR`行得通吗？或者，正如@Candie 所说，`THROW`在 SQL 2012 中

您可以`@@RowCount`在第一次选择后检查，如果为 0，则选择第二次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:20:24.320

你可以阅读这篇文章

```
THROW [ { error_number | @local_variable },
        { message | @local_variable },
    { state | @local_variable }
] [ ; ] 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/ee677615.aspx](http://msdn.microsoft.com/fr-fr/library/ee677615.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T18:33:19.067

`UNION`如果没有其他行，您可以简单地在结果集中添加一个 NULL 行：

```
SELECT
    NoteId, 
    Url, 
    Subject, 
    Content, 
    ExpiresAt, 
    RemindAt 
FROM dbo.browsingnotes_Notes 
WHERE UserId = @UserId 
    AND Hash = @Hash 
union
select NULL, NULL, NULL, NULL, NULL, NULL
  where not exists ( select 42 from dbo.browsingnotes_Notes where UserId = @UserId and Hash = @Hash ) 
```

# html - HTML5 UL LI 可拖动

> ID：12332403
> 
> 赞同：19
> 
> 时间：2012-09-08T16:19:12.833
> 
> 标签：html, drag-and-drop, html-lists, draggable

我有一个无序列表：

*   清单项目 1
*   清单项目 2
*   清单项目 3
*   清单项目 4
*   清单项目 5

使用此代码实现：

```
<ul>
  <li>List item 1</li>
  <li>List item 2</li>
  <li>List item 3</li>
  <li>List item 4</li>
  <li>List item 5</li>
</ul> 
```

现在，我希望它是可拖动的。例如，如果我向上拖动“List item 5”，我可以将它放在“List item 2”和“List item 3”之间，它会变成第三个。

我想在没有 jQuery 的情况下做到这一点，只需简单的 Javascript。另外，我想使用原生 HTML5 draggable="true"。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-08T17:56:22.587

属性“可拖动”仅启用元素进行拖动。您需要实现 DnD 侦听器并实现 drop 事件以进行所需的更改。

您将在此示例中找到您想要解决的相同问题：http: [//www.html5rocks.com/en/tutorials/dnd/basics/](http://www.html5rocks.com/en/tutorials/dnd/basics/)

在示例中，他们为 A、B 和 C 列实现拖放。用户可以通过 DnD 更改顺序。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-12-30T20:21:52.073

此代码将解决您的问题。[使用MDN](https://developer.mozilla.org/en-US/docs/Web/API/Document/drag_event)重做示例 试试这个[jsfiddle.net](https://jsfiddle.net/mrinex/yLpx7etg/3/)

HTML 5

```
<ul>
  <li class="dropzone" id='0' draggable="true">List item 1</li>
  <li class="dropzone" id='1' draggable="true">List item 2</li>
  <li class="dropzone" id='2' draggable="true">List item 3</li>
  <li class="dropzone" id='3' draggable="true">List item 4</li>
  <li class="dropzone" id='4' draggable="true">List item 5</li>
</ul> 
```

纯JS

```
let dragged;
let id;
let index;
let indexDrop;
let list;

  document.addEventListener("dragstart", ({target}) => {
      dragged = target;
      id = target.id;
      list = target.parentNode.children;
      for(let i = 0; i < list.length; i += 1) {
        if(list[i] === dragged){
          index = i;
        }
      }
  });

  document.addEventListener("dragover", (event) => {
      event.preventDefault();
  });

  document.addEventListener("drop", ({target}) => {
   if(target.className == "dropzone" && target.id !== id) {
       dragged.remove( dragged );
      for(let i = 0; i < list.length; i += 1) {
        if(list[i] === target){
          indexDrop = i;
        }
      }
      console.log(index, indexDrop);
      if(index > indexDrop) {
        target.before( dragged );
      } else {
       target.after( dragged );
      }
    }
  }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-08T16:28:56.667

只需将 draggable="true" 添加到您的 li 元素中。

```
<ol ondragstart="">
<li draggable="true" data-value="data1">List Item 1</li>
<li draggable="true" data-value="data2">List Item 2</li>
<li draggable="true" data-value="data3">List Item 3</li>
</ol> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-24T16:32:40.637

如果您使用 Firefox 进行测试，请注意它还需要在拖动操作中发送一些数据：

```
function handleDragStart(e) {
  e.dataTransfer.effectAllowed = 'move';
  e.dataTransfer.setData('text/html', e.target.innerHTML);
}

myLi.addEventListener('dragstart', handleDragStart, false); 
```

否则，您将看不到被拖动内容的幻影图像......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-06T10:05:28.027

```
<ul id="parent">

    <li class="parent">List item 1</li>

    <li class="parent">List item 2</li>

    <li class="parent">List item 3</li>

    <li class="parent">List item 4</li>

    <li class="parent">List item 5</li>
</ul> 
```

试试这个js

```
 var dragSrcEl = null;

    function handleDragStart(e) {
        // Target (this) element is the source node.
        this.style.opacity = '0.4';

        dragSrcEl = this;

        e.dataTransfer.effectAllowed = 'move';
        e.dataTransfer.setData('text/html', this.innerHTML);
    }

    function handleDragOver(e) {
        if (e.preventDefault) {
            e.preventDefault(); // Necessary. Allows us to drop.
        }

        e.dataTransfer.dropEffect = 'move';  // See the section on the DataTransfer object.

        return false;
    }

    function handleDragEnter(e) {
        // this / e.target is the current hover target.
        this.classList.add('over');
    }

    function handleDragLeave(e) {
        this.classList.remove('over');  // this / e.target is previous target element.
    }

    function handleDrop(e) {
        // this/e.target is current target element.

        if (e.stopPropagation) {
            e.stopPropagation(); // Stops some browsers from redirecting.
        }

        // Don't do anything if dropping the same column we're dragging.
        if (dragSrcEl != this) {
            // Set the source column's HTML to the HTML of the column we dropped on.
            dragSrcEl.innerHTML = this.innerHTML;
            this.innerHTML = e.dataTransfer.getData('text/html');
        }

        return false;
    }

    function handleDragEnd(e) {
        // this/e.target is the source node.

        [].forEach.call(cols, function (col) {
            col.classList.remove('over');
        });
    }

    var cols = document.querySelectorAll('#parent .parent');
    [].forEach.call(cols, function (col) {
        col.addEventListener('dragstart', handleDragStart, false);
        col.addEventListener('dragenter', handleDragEnter, false)
        col.addEventListener('dragover', handleDragOver, false);
        col.addEventListener('dragleave', handleDragLeave, false);
        col.addEventListener('drop', handleDrop, false);
        col.addEventListener('dragend', handleDragEnd, false);
    }); 
```

# ios - UITableView 中的 UIProgressView 更新导致滚动伪影

> ID：12332408
> 
> 赞同：2
> 
> 时间：2012-09-08T16:20:24.753
> 
> 标签：ios, uitableview, uiprogressview

我注意到当一个表格视图单元格包含一个频繁更新的 UIProgressView 时，表格视图的滚动行为会受到很大影响。

更准确地说，由于进度视图的频繁更新，表视图的位置在表视图的“橡皮筋”动画制作动画时略有变化。当表格视图在顶部被拉动时，也会发生同样的事情。解释起来很棘手，但我希望你能明白这个要点。

当然，由于 UIProgressView 在幕后的工作方式，在后台更新进度视图是不可能的。这是一个已知问题吗？这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T19:33:39.217

我不确定这个问题是否可以在没有解决方法的情况下解决。我找到的解决方案使用计时器和进度缓存。我的猜测是苹果使用了类似的方法。

我提出的解决方案涉及创建一个对象、一个数组或字典，以跟踪表格视图中显示的每个项目的进度。管理表格视图的视图控制器不会在表格视图单元格的下载进度更改时更新每个单元格，而是定期更新可见的表格视图单元格，这可以根据您的需要频繁或不频繁。

我认为这就是苹果公司的做法。Podcasts 应用程序的下载视图中的进度视图，例如定期更新，并且进展不顺畅，这支持了我的猜测，即 Apple 使用计时器来更新表格视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:06:43.030

这听起来不像正常的 UITableView 行为。当您说“由于 UIProgressView 在幕后的工作方式而无法在后台更新进度视图”时，我试图理解您的意思。如果您确保所有非 UI 操作都在后台完成，并且只在主线程上执行对 UIProgressView 的更新，那么这些伪影势必会消失。

# php - 为什么我的 INSERT 语句失败且没有错误？

> ID：12332424
> 
> 赞同：-2
> 
> 时间：2012-09-08T16:22:10.993
> 
> 标签：php, mysql, sql

我试图在表中插入一行，但没有插入而没有显示任何错误：

```
$sql="(INSERT INTO as_registration (roll, registrationid, fullname, username, 
       password, dob, courseid, email, gender, phoneno, status) 
       VALUES ('".$roll."','".$regid."','".$name."','".$username."','"
       .$pwd."','".$dob."',".intval($c_id['courseid']).",'".$email."','"
       .$gender."',".$phone.",'".$status."'))"; 
```

该语句的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:29:27.150

您不能在开头和结尾使用括号，请尝试使用此查询：

```
 $sql = "
INSERT INTO 
    as_registration (roll, registrationid, fullname, username, password, dob, courseid, email, gender, phoneno, status ) 
VALUES 
    ('". mysql_real_escape_string($roll) ."','". mysql_real_escape_string($regid) ."','" 
       . mysql_real_escape_string($name) ."','". mysql_real_escape_string($username) ."','"
       . mysql_real_escape_string($pwd) ."','". mysql_real_escape_string($dob) ."',"
       . mysql_real_escape_string(intval($c_id['courseid'])) .",'". mysql_real_escape_string($email) ."','"
       . mysql_real_escape_string($gender) ."','". mysql_real_escape_string($phone) ."','". mysql_real_escape_string($status) ."')"; 
```

如果你像这样使用你的代码，那么它很容易受到 SQL 注入的攻击。我强烈建议您在将数据插入数据库时​​使用[mysql_real_escape_string](http://www.php.net/manual/en/function.mysql-real-escape-string.php)以防止[SQL 注入](https://stackoverflow.com/questions/11939226/sql-injections-and-adodb-library-general-php-website-security-with-examples/11941396)，作为一种快速解决方案或更好地使用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。

此外，如果您用于`mysql_*`连接到数据库，那么我建议您阅读有关`mysql_*`函数的 PHP 手册章节，他们指出，不建议使用此扩展来编写新代码。相反，他们说，您应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL](http://www.php.net/manual/en/ref.pdo-mysql.php)扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:26:09.163

删除第一个和最后一个括号“（”和“）”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T16:31:21.750

以下代码等效于您发布的代码。

```
$sql="INSERT INTO as_registration (roll, registrationid, fullname, username, password, dob, courseid, email, gender, phoneno, status )
      VALUES ('$roll', '$regid', '$name', '$username', '$pwd', '$dob', ".intval($c_id['courseid']).", '$email', '$gender', $phone, '$status')"; 
```

[关于双引号字符串的文档](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T16:34:28.190

尝试;

```
$courceid = intval($c_id['courseid']);
$sql="(INSERT INTO as_registration
(roll, registrationid, fullname, username, password, dob, courseid, email, gender, phoneno, status )
VALUES
('$roll','$regid','$name','$username','$pwd','$dob','$courceid','$email','$gender','$phone','$status'))"; 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-09-08T16:24:30.680

您可以删除`double quotes`和“。” 和 '(' 字符

```
$sql="INSERT INTO as_registration (roll, registrationid, fullname, username, password, dob, courseid, email, gender, phoneno, status ) VALUES ('$roll','$regid','$name','$username','$pwd','$dob',{c_id['courseid']} ,'$email','$gender',$phone,'$status')" 
```

# android - 如何初始化选项菜单复选框

> ID：12332428
> 
> 赞同：3
> 
> 时间：2012-09-08T16:22:29.497
> 
> 标签：android, checkbox, android-optionsmenu

我有一个带有复选框的选项菜单。当用户单击复选框时，我可以选中和取消选中复选框，这很好。但是，我使用 SharedPreferences 来存储此复选框的值，所以我还需要做的是使用 SharedPreferences 首选项值中存储的任何内容来初始化复选框，即如果首选项为真/假，则将复选框设置为选中/未经检查。

我想我需要在我的 onCreateOptionsMenu 中放入一些代码，我显然需要使用 .setChecked(preference) 来设置复选框，但是我如何以编程方式引用复选框本身？

菜单是使用以下方法创建的：

```
public boolean onCreateOptionsMenu(Menu menu) {
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.options_menu, menu);
return true;
} 
```

可以使用以下方法选中/取消选中该复选框：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.two_week:
            if (item.isChecked()) {
                item.setChecked(false);
            }
            else {
                item.setChecked(true);
            }
            return true;
        default:
            return super.onOptionsItemSelected(item);
     }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T16:42:02.120

我认为您缺少的唯一方法是菜单的 findItem()。您可以像这样轻松加载任何 SharedPreferences（`prefs`在此处调用）：

```
SharedPreferences prefs;
...

public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.options_menu, menu);

    boolean checked = prefs.getBoolean("two weeks", false);
    menu.findItem(R.id.two_week).setChecked(checked);
    return true;
} 
```

# javascript - javascript中的时间切片是如何发生的？

> ID：12332429
> 
> 赞同：7
> 
> 时间：2012-09-08T16:22:34.280
> 
> 标签：javascript, ecma262

或 ecmascript 但我想知道它实际上是如何发生的更多地取决于确切的实施。

javascript 在技术上是单线程的。

但如果我做类似的事情

```
$myDIv.animate({
    height:"100px"
}); 
```

如果我这样做有什么不同吗

一种。

```
$myDIv.animate({
    height:"100px"
}, null, my_cpu_heavy_function); 
```

或 B。

```
$myDIv.animate({
    height:"100px"
});
my_cpu_heavy_function(); 
```

因为在第二个中，动画将与 cpu 繁重的功能争夺处理时间，因此动画的外观会受到影响，对吗？

那么 Javascript 是在同步代码块的末尾停止执行，还是在任何随机点切断一个块以允许处理另一个异步运行的块？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T16:38:52.247

javascript中没有时间切片。Javascript 是单线程的（除了我们不在这里讨论的网络工作者）。一个 javascript 执行线程一直运行，直到完成。

在您的第一个代码示例中，动画完成了它的工作，当它完全完成时，它调用您的`my_cpu_heavy_function`.

在您的第二个代码示例中，动画会自行初始化并为其第一个动画步骤设置一个计时器。然后它返回并进入下一行代码。动画才刚刚开始（并在未来设置了一个很短的时间来做更多的工作）——它还没有完成。然后，你的`my_cpu_heavy_function`运行它会占用整个 javascript 执行，直到它完成。动画在运行时根本不`my_cpu_heavy_function`运行。当它完成时，动画设置的定时器事件将触发并且动画将开始运行。

动画可能“看起来”像时间切片，但实际上并非如此。jQuery 动画在动画中移动一步，然后为将来的一小段时间设置一个计时器，然后返回系统。当那个计时器事件触发时，jQuery 会在动画中执行下一步，依此类推。当定时器事件触发时，它会将定时器事件放入 javascript 事件队列。如果当前没有运行 javascript，则立即启动计时器回调。如果 javascript 当前正在运行，则计时器事件仅位于事件队列中，直到当前 javascript 线程完成。当该线程完成时，javascript 会在事件队列中查看是否有任何事件在等待。如果有，则调用事件回调。

因此，对于不同的 javascript 片段确实没有时间切片。两个想要运行的代码并没有给定一些 CPU 周期，就像本机代码中的真实线程会发生的那样。在 javascript 中，一段代码一直运行到完成，然后可以开始下一个事件。在基于 javascript 的动画之类的东西中，时间切片可以通过做少量的工作来模拟，然后为将来的某个时间设置一个计时器并返回到系统。一旦你完成执行，其他一些 javascript 就可以运行，但它也会一直运行直到它完成。如果所有的javascript只做少量的工作，然后为他们的下一个工作设置一个计时器，那么它们都可以合作，看起来就像有时间切片，但它只是因为它们之间的合作才起作用。`my_cpu_heavy_function`出现并占用 CPU 一段时间，在此期间没有其他人运行。`my_cpu_heavy_function`动画将在运行时停止。

浏览器中的某些操作是由浏览器中的本机代码执行的（例如ajax调用、图像加载等）。这些异步任务可以在 javascript 运行时在后台继续执行，但它们不会通知 javascript，直到当前的 javascript 执行线程完成并且可以启动具有通知回调的新线程。

例如，假设我们有一个需要 1 秒加载的图像和一个需要 5 秒运行的 CPU 密集型函数。然后我们有这个代码：

```
var img = new Image();
img.onload = function() {
    alert("image is loaded now");
}
img.src = "xxx.jpg";
longFunctionThatTakesFiveSecondsToRun(); 
```

当我们运行这段代码时，即使图像只需要 1 秒在浏览器内部加载，onload 处理程序也不会被调用，直到`longFunctionThatTakesFiveSecondsToRun()`5 秒后运行完成。它必须等到当前执行线程完成后才能处理 onload 事件。

如果您想了解有关 javascript 事件队列和异步操作的更多信息，请参阅以下相关答案：

[JavaScript 如何在后台处理 AJAX 响应？](https://stackoverflow.com/questions/7575589/how-does-javascript-handle-ajax-responses-in-the-background/7575649#7575649)

[JavaScript 事件处理的竞争条件？](https://stackoverflow.com/questions/8611145/race-conditions-with-javascript-event-handling/8611469#8611469)

[JS 事件处理程序可以中断另一个处理程序的执行吗？](https://stackoverflow.com/questions/8016001/can-js-event-handlers-interrupt-execution-of-another-handler/8016185#8016185)

[我需要关注异步 Javascript 的竞争条件吗？](https://stackoverflow.com/questions/7238586/do-i-need-to-be-concerned-with-race-conditions-with-asynchronous-javascript/7238663#7238663)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T16:27:51.033

> 如果我做A或B有什么不同吗

是的，它会有所作为。

第二个版本并没有为处理时间而争吵。假设它是同步的，它更像是`my_cpu_heavy_function`一旦开始就会占用所有处理时间。

换句话说，一旦同步代码开始，它不会在完成之前结束，而不管任何可能被调度运行的定时异步代码。异步代码将始终被迫等待同步代码完成。

所以将会发生的情况是动画将开始，并执行其初始化，但随后`my_cpu_heavy_function`将立即开始，并阻止动画的其余部分，直到它完成。

# image - 带有伪元素的响应式图像 - 这是个好主意吗？

> ID：12332431
> 
> 赞同：1
> 
> 时间：2012-09-08T16:22:47.090
> 
> 标签：image, css, responsive-design

有许多允许响应式图像的技术，但它们都有一些缺点。

对我来说，最大的缺点是没有解决方案可以控制图像的定位。

例如，桌面布局可能使用两列网格，图像在左列，文本在右列。在移动设备上，将图像显示在文本下方的单列看起来会更好。虽然现有的响应式图像技术允许您缩小移动设备的图像，但它们都没有提供一种无需借助复杂的定位和浮动技术即可更改布局定位的方法。

使用 Psuedo 元素，这种定位相对容易。对于移动样式表，您可以使用`::after`将图像放在文本下方。桌面样式表可用于`::before`将图像置于文本之上。

这种方法还有其他好处：

1.  浏览器仅加载相关设备的图像（因此移动设备不会加载桌面图像）
2.  如果您将图像用作 psudeo 容器的背景，则可以使用属性，例如`background-size: cover;`允许对图像进行（公认受限）程度的艺术方向。

我能想到一些缺点：

1) 无法向屏幕阅读器描述图像。但是，网站上的很多图像都是“大气图像”。例如，联系页面有一个电话图像，以创建联系某人的“气氛”。将这些图像描述给屏幕阅读器可以说会增加浏览体验的混乱度。

2）这种方法混淆了内容和呈现之间的界限。然而，再一次，如果大多数图像是“大气的”，将它们包含在样式表中，这种方式与使用纹理背景没有什么不同。

3) 图像无法在 IE6/IE7 上运行

4) 许多网站必须使用内联样式来显示图像。但是，这只是替换图像元素 ( `<img>`) 的工作，因此似乎没有问题。

简而言之，这种方法有很多优点，没有真正的缺点。我注意到似乎没有网站提倡这种方法，所以我想知道是否有我遗漏的主要缺点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:32:07.803

看看[这个为响应式图像提供解决方案的网站](http://csswizardry.com/2011/07/responsive-images-right-now/)，它应该提供定位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T03:25:13.780

[此解决方案](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)只需要加载 1 个图像，但图像应该是最高质量的。

如果您将页面的大约 2/3 转到标题为“灵活图像”的部分，您会发现一个代码块，它可以使您的图像动态调整大小，这比加载不同的图像和 css-hacking 页面要好。

查看文章，这是他们用于图像的代码：

```
img {
    max-width: 100%;
    height: auto;
    width: auto\9; /* ie8 */
} 
```

这是他们用于视频的代码：

```
.video embed, .video object, .video iframe {
    width: 100%;
    height: auto;
} 
```

我建议您访问[该网站](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)，因为它解释了为什么这些特定规则是必要的，并且可能会为您提供其他有用的信息。

# c# - 如何标记在mssql中读取的记录

> ID：12332434
> 
> 赞同：1
> 
> 时间：2012-09-08T16:23:18.043
> 
> 标签：c#, asp.net, sql-server, tsql

我创建了一个系统，每天通过 SMS 向我们的客户发送一些信息。因为发送 SMS 的过程可能需要一段时间，这是由多个进程完成的，每个进程发送有限数量的 SMS。当一个进程读取许多 pohne nubers 的记录（比如说 1000 个）来发送短信时。我想标记这 1000 条记录，其他进程也不会读取这些记录。

```
Select Top(1000) ID, Number from Phones where isactive = 1 and isverified = 1 
```

我需要一些代码来做这样的事情：

`update Phones, set ReadTime = getdate() where`（以上选择）

现在我想更新`ReadTime`这些记录的列`getdate()`以确保其他调度进程不会再次读取它们（我设置日期时间标志而不是位标志的原因是某些 SMS 发送可能会失败，这样我能看懂哪些是很久以前读过但没有更新发送时间的）

在发送短信后标记它们（无论如何都应该写发送时间）将无济于事，因为将处理发送短信的预定任务将一次读取所有 1000 条记录，并且可能会有其他进程读取的记录但尚未标记（因为尚未发送 SMS）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T16:33:41.593

你应该能够做这样的事情：

```
UPDATE Phones
SET ReadTime = GetDate()
WHERE ID IN (SELECT Top 1000 ID
             FROM Phones
             WHERE IsActive = 1
                 AND IsVerified = 1
                 AND ReadTime Is Null -- you will want to exclude any records already updated
             ORDER BY ID) 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/88bd1/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T16:45:06.667

您可以在表中添加一个额外的列，该列采用进程 ID 的 id。然后你可以在每个进程中调用：

```
UPDATE Phones
SET ReadTime = GetDate(),
ProcessId = "Process0001" --or whatever the process ID is
WHERE ID IN (SELECT Top 1000 ID FROM Phones WHERE IsActive = 1 AND IsVerified = 1
                 AND ProcessId IS NULL AND ReadTime IS NULL) 
```

然后，您使用您的进程 ID 调用所有记录。最后，您从表中删除进程 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T06:29:12.833

您可以一次选择并输出行。这将确保选择的行与更新的行相同，选择的答案会失败。

```
;with a
as
(
select top 1000 readtime, id, number from @phones 
where isactive = 1 and isverified = 1 
and readtime is null
)
update a
set Readtime = getdate()
output deleted.ID, deleted.Number 
```

# iphone - 我在哪里可以获得所有 iOS 元素的列表？

> ID：12332439
> 
> 赞同：7
> 
> 时间：2012-09-08T16:24:11.617
> 
> 标签：iphone, ios, cocoa-touch, ipad

什么是 iOS GUI 元素列表的好资源？

官方文档，如[UIPickerView 文档](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html)不包含图像，虽然有时官方概述文档有图像，但不容易找到。

我发现的最接近的东西是 iOS Photoshop 模板（包括很棒的[Teehan Lax one](http://www.teehanlax.com/downloads/ios-5-gui-psd-iphone-4s/)），但它们没有引用类名，也没有任何常见的第三方控件。

**编辑**：一个基于 Web 的站点会很棒，所以我可以与没有 Xcode 的其他人共享，或者在 iPad 上浏览。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-08T19:07:15.200

Apple Developer 门户有一个[文档](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/ContentViews.html#//apple_ref/doc/uid/TP40006556-CH13-SW1)，列出了 iOS 的所有 UI 元素，还介绍了它们的各种用途。以下是他们如何描述 UITextView 的摘录：

> **文本视图** 文本视图接受并显示多行文本。要了解有关在代码中定义文本视图的更多信息，请参阅[UITextView 类参考](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextView_Class/Reference/UITextView.html#//apple_ref/doc/uid/TP40006898)。
> 
> **外观和行为** 文本视图是任意高度的圆角矩形。当内容太大而无法容纳在其边界内时，文本视图支持滚动。
> 
> 如果文本视图支持用户编辑，当用户在文本视图内点击时会出现一个键盘。键盘的输入法和布局由用户的语言设置决定。当用户点击标有“.?123”的按钮时，键盘会变为显示数字、标点符号和一些常用符号。
> 
> **指导方针** 您可以控制文本视图中文本的字体、颜色和对齐方式，但仅限于它们应用于整个文本时。换句话说，您不能仅更改部分文本的任何这些属性。默认字体是系统字体，默认颜色是黑色，因为这些往往是最易读的。对齐属性的默认值为左（您可以将其更改为居中或右）。
> 
> 如果必须在显示文本的视图中启用可变字体、颜色或对齐方式，则可以使用 Web 视图而不是文本视图，并使用 HTML 设置文本样式。
> 
> 您还可以指定不同的键盘样式，具体取决于您希望用户输入的内容类型。有关您可以使用的样式的说明，请参阅“文本字段”。</p>

如果您只想查看 UI 元素列表而不是描述，请转到左侧的侧边栏，然后单击“iOS UI 元素使用指南”旁边的披露箭头，它会有一个通用类别列表，例如“栏”、“内容视图”、“控件”等。从那里您可以单击类别标题旁边的显示箭头以查看各个 UI 元素。下图说明了我的意思：

![在此处输入图像描述](../Images/46aab99ae0145916017272600bbeea0d.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-05T09:11:28.507

您可以在此文档[链接页面中深入查看 UIElements](https://developer.apple.com/documentation/uikit/views_and_controls/uikit_catalog_creating_and_customizing_views_and_controls)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T16:29:24.590

如果您正在寻找标准框架的 GUI 元素列表，您可以检查它们的 Interface Builder，甚至更改配置以显示创建它们的可能方法。Storyboard 还为您提供了一些向其添加内容的灵活性。

# svg - SVG中的下标和上标

> ID：12332448
> 
> 赞同：7
> 
> 时间：2012-09-08T16:24:50.707
> 
> 标签：svg

我正在尝试使用[本网站的以下代码显示带有 SVG 的子标和上标](http://www.svgbasics.com/font_effects_italic.html)

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
<g>
    <text x = "10" y = "25" font-size = "20">
        <tspan>
            e = mc 
            <tspan baseline-shift = "super">2</tspan>
        </tspan>
        <tspan x = "10" y = "60">
            T 
            <tspan baseline-shift = "sub">i+2</tspan>
            =T 
            <tspan baseline-shift = "sub">i</tspan>
            + T 
            <tspan baseline-shift = "sub">i+1</tspan>
        </tspan>
    </text>
</g> 
```

但子/上标不显示在 IE 或 Firefox 中。这是未实现还是有其他问题？[你能看到正确显示的下标吗？]

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-08T21:36:04.073

IE9、IE10 和 Firefox 不支持 Baseline-shift，请参阅：

[http://msdn.microsoft.com/en-us/library/gg558060(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/gg558060(v=vs.85).aspx) [https://bugzilla.mozilla.org/show_bug.cgi?id=308338](https://bugzilla.mozilla.org/show_bug.cgi?id=308338)

如果您实际尝试显示公式，则更适合嵌入在 SVG 中的 MathML，请参阅：

[http://www.maths-informatique-jeux.com/international/mathml_with_other_standards/index.php](http://www.maths-informatique-jeux.com/international/mathml_with_other_standards/index.php)

如果您想要对您提供的示例进行快速修复，您可以使用`dy`...

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
<g>
    <text x = "10" y = "25" font-size = "20">
        <tspan>
            e = mc 
            <tspan dy ="-10">2</tspan>
        </tspan>
        <tspan x = "10" y = "60">
            T 
            <tspan dy="10">i+2</tspan>
            <tspan dy="-10">=T </tspan>
            <tspan dy="10">i</tspan>
            <tspan dy="-10">+ T</tspan> 
            <tspan dy="10">i+1</tspan>
        </tspan>
    </text>
    </g>
</svg> 
```

​<a href="http://jsfiddle.net/UQ5Dp/" rel="noreferrer">http://jsfiddle.net/UQ5Dp/

# java - 无法集成 NTLM 和 JAVA

> ID：12332449
> 
> 赞同：0
> 
> 时间：2012-09-08T16:24:50.980
> 
> 标签：java, liferay, ntlm, samba

我无法在我的网络应用程序中集成 NTLM 身份验证。我使用[这个](http://ntlmv2auth.sourceforge.net/ntlmv2-filter/)库连接到 Samba 服务器。我不明白某些参数的含义：

```
<init-param>
    <param-name>ntlm-account</param-name>
    <!-- Who is this user; where is it configured? -->
    <param-value>TECHUSER$@ACME.CORP</param-value>
</init-param>
<init-param>
    <param-name>ntlm-password</param-name>
    <param-value>test1234</param-value>
</init-param> 
```

我不明白必须使用 ntlm-account 用户配置什么。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:08:50.743

您需要一个有权在 ldap 目录中进行搜索的帐户，基本上是一个用于登录 NT/AD 域的域控制器的帐户

# android - 使用实时预览拍摄下一张照片

> ID：12332450
> 
> 赞同：0
> 
> 时间：2012-09-08T16:24:54.033
> 
> 标签：android, surfaceview

我正在定制一个相机应用程序，就像[这个链接](http://developer.android.com/guide/topics/media/camera.html#custom-camera)中提供的一样。

我使用surfaceview 和surfaceholder.callback 进行实时预览。实时预览适用于第一张照片，然后停止。它只显示我拍的照片。意味着实时预览不起作用。第二张照片我的相机坏了。所以重新启动我的手机以使用相机。

那么如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T03:40:59.940

如[参考文档中所述](http://developer.android.com/reference/android/hardware/Camera.html)，使用拍照`takePicture()`将停止预览。你需要打电话`startPreview()`让它重新开始。

这是相关部分：

> 拍照后，预览显示将停止。要拍摄更多照片，`startPreview()`请先再次致电。

# c# - 列出一个目录+子目录中的所有文件和目录

> ID：12332451
> 
> 赞同：134
> 
> 时间：2012-09-08T16:24:57.450
> 
> 标签：c#, directory, subdirectory, getdirectories

我想列出目录和该目录的子目录中包含的每个文件和目录。如果我选择 C:\ 作为目录，程序将获取它可以访问的硬盘驱动器上每个文件和文件夹的每个名称。

列表可能看起来像

```
fd\1.txt
fd\2.txt
fd\a\
fd\b\
fd\a\1.txt
fd\a\2.txt
fd\a\a\
fd\a\b\
fd\b\1.txt
fd\b\2.txt
fd\b\a
fd\b\b
fd\a\a\1.txt
fd\a\a\a\
fd\a\b\1.txt
fd\a\b\a
fd\b\a\1.txt
fd\b\a\a\
fd\b\b\1.txt
fd\b\b\a

```

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2012-09-08T16:31:24.037

```
string[] allfiles = Directory.GetFiles("path/to/dir", "*.*", SearchOption.AllDirectories); 
```

`*.*`匹配文件的模式在哪里

如果还需要目录，您可以这样做：

```
 foreach (var file in allfiles){
     FileInfo info = new FileInfo(file);
 // Do something with the Folder or just add them to a list via nameoflist.add();
 } 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-05-09T17:48:49.320

[`Directory.GetFileSystemEntries`](http://msdn.microsoft.com/en-us/library/dd383460%28v=vs.110%29.aspx)存在于 .NET 4.0+ 中并返回文件和目录。像这样称呼它：

```
string[] entries = Directory.GetFileSystemEntries(path, "*", SearchOption.AllDirectories); 
```

请注意，它无法处理列出您无权访问的子目录内容的尝试 (UnauthorizedAccessException)，但它可能足以满足您的需要。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-06-18T12:20:49.617

```
public static void DirectorySearch(string dir)
{
    try
    {
        foreach (string f in Directory.GetFiles(dir))
        {
            Console.WriteLine(Path.GetFileName(f));
        }
        foreach (string d in Directory.GetDirectories(dir))
        {
            Console.WriteLine(Path.GetFileName(d));
            DirectorySearch(d);
        }
    }
    catch (System.Exception ex)
    {
        Console.WriteLine(ex.Message);
    }
} 
```

注意：该函数只显示没有相对路径的名称。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-09-08T16:31:15.230

使用[`GetDirectories`](http://msdn.microsoft.com/en-us/library/ms143314)and[`GetFiles`](http://msdn.microsoft.com/en-us/library/ms143316)方法获取文件夹和文件。

也可以使用获取子文件夹中的文件夹和文件。[`SearchOption`](http://msdn.microsoft.com/en-us/library/ms143448) `AllDirectories`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-21T07:10:34.773

恐怕，该`GetFiles`方法返回文件列表而不是目录。问题中的列表提示我结果也应该包括文件夹。如果您想要更多自定义列表，您可以尝试调用`GetFiles`和`GetDirectories`递归。尝试这个：

```
List<string> AllFiles = new List<string>();
void ParsePath(string path)
{
    string[] SubDirs = Directory.GetDirectories(path);
    AllFiles.AddRange(SubDirs);
    AllFiles.AddRange(Directory.GetFiles(path));
    foreach (string subdir in SubDirs)
        ParsePath(subdir);
} 
```

提示：如果您需要检查任何特定属性，可以使用`FileInfo`和类。`DirectoryInfo`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-04-16T10:20:33.287

您可以使用返回句柄的 FindFirstFile，然后递归地调用调用 FindNextFile 的函数。这是一个很好的方法，因为引用的结构将填充各种数据，例如替代名称、lastTmeCreated、修改、属性等

但是当您使用 .net 框架时，您将不得不进入非托管区域。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-23T09:47:41.230

一些带有 max lvl 的改进版本可以进入目录和排除文件夹的选项：

```
using System;
using System.IO;

class MainClass {
  public static void Main (string[] args) {

    var dir = @"C:\directory\to\print";
    PrintDirectoryTree(dir, 2, new string[] {"folder3"});
  }

  public static void PrintDirectoryTree(string directory, int lvl, string[] excludedFolders = null, string lvlSeperator = "")
  {
    excludedFolders = excludedFolders ?? new string[0];

    foreach (string f in Directory.GetFiles(directory))
    {
        Console.WriteLine(lvlSeperator+Path.GetFileName(f));
    } 

    foreach (string d in Directory.GetDirectories(directory))
    {
        Console.WriteLine(lvlSeperator + "-" + Path.GetFileName(d));

        if(lvl > 0 && Array.IndexOf(excludedFolders, Path.GetFileName(d)) < 0)
        {
          PrintDirectoryTree(d, lvl-1, excludedFolders, lvlSeperator+"  ");
        }
    }
  }
} 
```

输入目录：

```
-folder1
  file1.txt
  -folder2
    file2.txt
    -folder5
      file6.txt
  -folder3
    file3.txt
  -folder4
    file4.txt
    file5.txt 
```

函数的输出（由于 lvl 限制，排除了 folder5 的内容，排除了 folder3 的内容，因为它位于 excludeFolders 数组中）：

```
-folder1
  file1.txt
  -folder2
    file2.txt
    -folder5
  -folder3
  -folder4
    file4.txt
    file5.txt 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-01-12T11:11:14.877

我将以下代码与具有 2 个按钮的表单一起使用，一个用于退出，另一个用于启动。文件夹浏览器对话框和保存文件对话框。下面列出了代码，适用于我的系统 Windows10 (64)：

```
using System;
using System.IO;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Directory_List
{

    public partial class Form1 : Form
    {
        public string MyPath = "";
        public string MyFileName = "";
        public string str = "";

        public Form1()
        {
            InitializeComponent();
        }    
        private void cmdQuit_Click(object sender, EventArgs e)
        {
            Application.Exit();
        }    
        private void cmdGetDirectory_Click(object sender, EventArgs e)
        {
            folderBrowserDialog1.ShowDialog();
            MyPath = folderBrowserDialog1.SelectedPath;    
            saveFileDialog1.ShowDialog();
            MyFileName = saveFileDialog1.FileName;    
            str = "Folder = " + MyPath + "\r\n\r\n\r\n";    
            DirectorySearch(MyPath);    
            var result = MessageBox.Show("Directory saved to Disk!", "", MessageBoxButtons.OK);
                Application.Exit();    
        }    
        public void DirectorySearch(string dir)
        {
                try
            {
                foreach (string f in Directory.GetFiles(dir))
                {
                    str = str + dir + "\\" + (Path.GetFileName(f)) + "\r\n";
                }    
                foreach (string d in Directory.GetDirectories(dir, "*"))
                {

                    DirectorySearch(d);
                }
                        System.IO.File.WriteAllText(MyFileName, str);

            }
            catch (System.Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-09-13T13:08:25.410

一个迟到的答案，但我认为有人可能会从中受益。基于堆栈的迭代版本启动器，支持错误处理和返回相对路径：

```
private static IEnumerable<string> TryEnumerate(Func<IEnumerable<string>> action)
{
    try
    {
        return action.Invoke();
    }
    catch
    {
       //TODO logging
       return Enumerable.Empty<string>();
    }
}

private static IEnumerable<string> FindFilesAndDirectories(string dir, bool returnRelativePaths = false, string filePattern="*.*")
{
    var searchStack = new Stack<string>();
    searchStack.Push(dir);
    var initialDirectory = new DirectoryInfo(dir).FullName;
    var initialDirLength = initialDirectory.Length;

    while (searchStack.Count > 0)
    {
        var currentDirectory = searchStack.Pop();

        yield return (returnRelativePaths && 
                string.Compare(currentDirectory, initialDirectory, StringComparison.OrdinalIgnoreCase) != 0) ? 
                 currentDirectory.Substring(initialDirLength) : currentDirectory;

        foreach (var file in TryEnumerate(() =>
                 Directory.EnumerateFiles(currentDirectory, filePattern)))
        {
            yield return returnRelativePaths ? file.Substring(initialDirLength) : file;
        }

        foreach (var directory in TryEnumerate(() =>
                 Directory.EnumerateDirectories(currentDirectory, filePattern)))
        {
            searchStack.Push(directory);
        }
    }
}

static void Main(string[] args)
{
    foreach (var result in FindFilesAndDirectories(@"c:\", true))
    {
        Console.WriteLine(result);
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-10T07:52:06.327

```
using System.IO;
using System.Text;
string[] filePaths = Directory.GetFiles(@"path", "*.*", SearchOption.AllDirectories); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-26T21:59:03.500

以下示例以**最快**（非并行化）的方式列出目录树中处理异常的文件和子文件夹。使用 SearchOption.AllDirectories 使用 Directory.EnumerateDirectories 枚举所有目录会更快，但如果遇到 UnauthorizedAccessException 或 PathTooLongException，此方法将失败。

使用通用 Stack 集合类型，它是后进先出 (LIFO) 堆栈并且不使用递归。从[https://msdn.microsoft.com/en-us/library/bb513869.aspx](https://msdn.microsoft.com/en-us/library/bb513869.aspx)，您可以枚举所有子目录和文件并有效处理这些异常。

```
 public class StackBasedIteration
{
    static void Main(string[] args)
    {
        // Specify the starting folder on the command line, or in 
        // Visual Studio in the Project > Properties > Debug pane.
        TraverseTree(args[0]);

        Console.WriteLine("Press any key");
        Console.ReadKey();
    }

    public static void TraverseTree(string root)
    {
        // Data structure to hold names of subfolders to be
        // examined for files.
        Stack<string> dirs = new Stack<string>(20);

        if (!System.IO.Directory.Exists(root))
        {
            throw new ArgumentException();
        }
        dirs.Push(root);

        while (dirs.Count > 0)
        {
            string currentDir = dirs.Pop();
            string[] subDirs;
            try
            {
                subDirs = System.IO.Directory.EnumerateDirectories(currentDir); //TopDirectoryOnly
            }
            // An UnauthorizedAccessException exception will be thrown if we do not have
            // discovery permission on a folder or file. It may or may not be acceptable 
            // to ignore the exception and continue enumerating the remaining files and 
            // folders. It is also possible (but unlikely) that a DirectoryNotFound exception 
            // will be raised. This will happen if currentDir has been deleted by
            // another application or thread after our call to Directory.Exists. The 
            // choice of which exceptions to catch depends entirely on the specific task 
            // you are intending to perform and also on how much you know with certainty 
            // about the systems on which this code will run.
            catch (UnauthorizedAccessException e)
            {                    
                Console.WriteLine(e.Message);
                continue;
            }
            catch (System.IO.DirectoryNotFoundException e)
            {
                Console.WriteLine(e.Message);
                continue;
            }

            string[] files = null;
            try
            {
                files = System.IO.Directory.EnumerateFiles(currentDir);
            }

            catch (UnauthorizedAccessException e)
            {

                Console.WriteLine(e.Message);
                continue;
            }

            catch (System.IO.DirectoryNotFoundException e)
            {
                Console.WriteLine(e.Message);
                continue;
            }
            // Perform the required action on each file here.
            // Modify this block to perform your required task.
            foreach (string file in files)
            {
                try
                {
                    // Perform whatever action is required in your scenario.
                    System.IO.FileInfo fi = new System.IO.FileInfo(file);
                    Console.WriteLine("{0}: {1}, {2}", fi.Name, fi.Length, fi.CreationTime);
                }
                catch (System.IO.FileNotFoundException e)
                {
                    // If file was deleted by a separate application
                    //  or thread since the call to TraverseTree()
                    // then just continue.
                    Console.WriteLine(e.Message);
                    continue;
                }
                catch (UnauthorizedAccessException e)
                {                    
                    Console.WriteLine(e.Message);
                    continue;
                }
            }

            // Push the subdirectories onto the stack for traversal.
            // This could also be done before handing the files.
            foreach (string str in subDirs)
                dirs.Push(str);
        }
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-06-11T07:43:29.830

逻辑有序的方式：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Reflection;

namespace DirLister
{
class Program
{
    public static void Main(string[] args)
    {
        //with reflection I get the directory from where this program is running, thus listing all files from there and all subdirectories
        string[] st = FindFileDir(Path.GetDirectoryName(Assembly.GetEntryAssembly().Location));
        using ( StreamWriter sw = new StreamWriter("listing.txt", false ) )
        {
            foreach(string s in st)
            {
                //I write what I found in a text file
                sw.WriteLine(s);
            }
        }
    }

    private static string[] FindFileDir(string beginpath)
    {
        List<string> findlist = new List<string>();

        /* I begin a recursion, following the order:
         * - Insert all the files in the current directory with the recursion
         * - Insert all subdirectories in the list and rebegin the recursion from there until the end
         */
        RecurseFind( beginpath, findlist );

        return findlist.ToArray();
    }

    private static void RecurseFind( string path, List<string> list )
    {
        string[] fl = Directory.GetFiles(path);
        string[] dl = Directory.GetDirectories(path);
        if ( fl.Length>0 || dl.Length>0 )
        {
            //I begin with the files, and store all of them in the list
            foreach(string s in fl)
                list.Add(s);
            //I then add the directory and recurse that directory, the process will repeat until there are no more files and directories to recurse
            foreach(string s in dl)
            {
                list.Add(s);
                RecurseFind(s, list);
            }
        }
    }
}
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-15T16:48:06.637

如果您无权访问目录树中的子文件夹，Directory.GetFiles 将停止并引发异常，从而在接收字符串 [] 中产生空值。

在这里，请参阅此答案 [https://stackoverflow.com/a/38959208/6310707](https://stackoverflow.com/a/38959208/6310707)

它管理循环内的异常并继续工作，直到遍历整个文件夹。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-16T19:14:00.117

请尝试下面的代码来读取所有目录和子目录的文件

```
class Program
{
    static string _rootPath = @"D:\My Project\App_Data";

    static void Main(string[] args)
    {
        ReadDirectories(_rootPath);

        Console.ReadKey();
    }

    public static void ReadDirectories(string path, string directoryName = "")
    {
        if (!string.IsNullOrEmpty(directoryName))
        {
            Console.WriteLine("DIRECTORY NAME - {0}", directoryName);
            path = @$"{path}\{directoryName}";
        }

        DirectoryInfo dir_place = new DirectoryInfo(path);

        FileInfo[] Files = dir_place.GetFiles();
        foreach (FileInfo i in Files)
        {
            Console.WriteLine("{0} - FILE NAME - {1}", directoryName, i.Name);
        }

        DirectoryInfo[] directories = dir_place.GetDirectories();
        foreach (var directory in directories)
        {
            ReadDirectories(path, directory.Name);
        };
    }
} 
```

调用“ReadDirectories”方法，直到扫描到最后一个目录。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-08-13T22:24:31.630

有了这个，您可以在控制台运行时运行它们并选择子文件夹

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Security.Cryptography;
using System.Text;
using data.Patcher; // The patcher XML
namespace PatchBuilder
{
class Program
{
    static void Main(string[] args)
    {
        string patchDir;
        if (args.Length == 0)
        {
            Console.WriteLine("Give the patch directory in argument");
            patchDir = Console.ReadLine();
        }
        else
        {
            patchDir = args[0];
        }

        if (File.Exists(Path.Combine(patchDir, "patch.xml")))
            File.Delete(Path.Combine(patchDir, "patch.xml"));

        var files = Directory.EnumerateFiles(patchDir, "*", SearchOption.AllDirectories).OrderBy(p => p).ToList();

        foreach (var file in files.Where(file => file.StartsWith("patch\\Resources")).ToArray())
        {
            files.Remove(file);
            files.Add(file);
        }

        var tasks = new List<MetaFileEntry>();
        using (var md5Hasher = MD5.Create())
        {
            for (int i = 0; i < files.Count; i++)
            {
                var file = files[i];

                if ((File.GetAttributes(file) & FileAttributes.Hidden) != 0)
                    continue;

                var content = File.ReadAllBytes(file);
                var md5Hasher2 = MD5.Create();

                var task =
                    new MetaFileEntry
                    {
                        LocalURL = GetRelativePath(file, patchDir + "\\"),
                        RelativeURL = GetRelativePath(file, patchDir + "\\"),
                        FileMD5 = Convert.ToBase64String(md5Hasher2.ComputeHash(content)),
                        FileSize = content.Length,
                    };

                md5Hasher2.Dispose();

                var pathBytes = Encoding.UTF8.GetBytes(task.LocalURL.ToLower());
                md5Hasher.TransformBlock(pathBytes, 0, pathBytes.Length, pathBytes, 0);
                if (i == files.Count - 1)
                    md5Hasher.TransformFinalBlock(content, 0, content.Length);
                else
                    md5Hasher.TransformBlock(content, 0, content.Length, content, 0);

                tasks.Add(task);
                Console.WriteLine(@"Add " + task.RelativeURL);
            }

            var patch = new MetaFile
            {
                Tasks = tasks.ToArray(),
                FolderChecksum = BitConverter.ToString(md5Hasher.Hash).Replace("-", "").ToLower(),
            };

            //XmlUtils.Serialize(Path.Combine(patchDir, "patch.xml"), patch);
            Console.WriteLine(@"Created Patch in {0} !", Path.Combine(patchDir, "patch.xml"));
        }

        Console.Read();
    }

    static string GetRelativePath(string fullPath, string relativeTo)
    {
        var foldersSplitted = fullPath.Split(new[] { relativeTo.Replace("/", "\\").Replace("\\\\", "\\") }, StringSplitOptions.RemoveEmptyEntries); // cut the source path and the "rest" of the path

        return foldersSplitted.Length > 0 ? foldersSplitted.Last() : ""; // return the "rest"
    }
}
} 
```

这是用于 XML 导出的补丁程序

```
using System.Xml.Serialization;

namespace data.Patcher
{
    public class MetaFile
    {

        [XmlArray("Tasks")]
        public MetaFileEntry[] Tasks
        {
            get;
            set;
        }

        [XmlAttribute("checksum")]
        public string FolderChecksum
        {
            get;
            set;
        }
    }
} 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2019-09-14T15:23:06.557

创建字符串列表

```
 public static List<string> HTMLFiles = new List<string>();

 private void Form1_Load(object sender, EventArgs e)
        {

     HTMLFiles.AddRange(Directory.GetFiles(@"C:\DataBase", "*.txt"));
            foreach (var item in HTMLFiles)
            {
                MessageBox.Show(item);
            }

} 
```

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2018-06-13T18:36:02.820

**有点简单和缓慢但有效！如果您不提供文件路径，则基本上使用“fixPath”，这只是示例....您可以搜索所需的正确文件类型，当我选择列表名称时我犯了一个错误，因为“temporaryFileList 是搜索的文件列表所以继续……“errorList”不言自明**

```
 static public void Search(string path, string fileType, List<string> temporaryFileList, List<string> errorList)
    {

        List<string> temporaryDirectories = new List<string>();

        //string fix = @"C:\Users\" + Environment.UserName + @"\";
        string fix = @"C:\";
        string folders = "";
        //Alap útvonal megadása 
        if (path.Length != 0)
        { folders = path; }
        else { path = fix; }

        int j = 0;
        int equals = 0;
        bool end = true;

        do
        {

            equals = j;
            int k = 0;

            try
            {

                int foldersNumber = 
                Directory.GetDirectories(folders).Count();
                int fileNumber = Directory.GetFiles(folders).Count();

                if ((foldersNumber != 0 || fileNumber != 0) && equals == j)
                {

                    for (int i = k; k < 
                    Directory.GetDirectories(folders).Length;)
                    {

             temporaryDirectories.Add(Directory.GetDirectories(folders)[k]);
                        k++;
                    }

                    if (temporaryDirectories.Count == j)
                    {
                        end = false;
                        break;
                    }
                    foreach (string files in Directory.GetFiles(folders))
                    {
                        if (files != string.Empty)
                        {
                            if (fileType.Length == 0)
                            {
                                temporaryDirectories.Add(files);
                            }
                            else
                            {

                                if (files.Contains(fileType))
                                {
                                    temporaryDirectories.Add(files);

                                }
                            }
                        }
                        else
                        {
                            break;
                        }
                    }

                }

                equals++;

                for (int i = j; i < temporaryDirectories.Count;)
                {
                    folders = temporaryDirectories[i];
                    j++;
                    break;
                }

            }
            catch (Exception ex)
            {
                errorList.Add(folders);

                for (int i = j; i < temporaryDirectories.Count;)
                {
                    folders = temporaryDirectories[i];
                    j++;
                    break;
                }
            }
        } while (end);
    } 
```

# android - IllegalStateException：尝试使用 ContentProvider 查询数据库时表无效

> ID：12332455
> 
> 赞同：7
> 
> 时间：2012-09-08T16:25:21.897
> 
> 标签：android, database, sqlite, android-contentprovider, android-cursor

尝试使用如下所示的自定义查询我的数据库时出现以下错误`ContentProvider`。

我已确认该表以正确的名称存在，但仍无法正常工作。

我能够让它与原始查询一起工作，但我想给我们`ContentProvider`练习模式。

谢谢，如果您需要更多信息，请告诉我。

* * *

**SQLiteOpenHelper**

```
public class DatabaseHelper extends SQLiteOpenHelper {

    private static final String TAG = DatabaseHelper.class.getSimpleName();

    private static final String DB_PATH = 
            "/data/data/ashton.android.personal.worktc/databases/";

    private static final String DB_NAME = "worktc.db";

    private static final int DB_VERSION = 1;

    private SQLiteDatabase myDatabase;

    private final Context context;

    public DatabaseHelper(Context context) {
        super(context, DB_NAME, null, DB_VERSION);
        this.context = context;
    }

    /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException {

        boolean dbExist = this.checkDataBase();

        if (dbExist) {
            //do nothing - database already exist
        } else {

            Log.e(TAG, "Database does not exist when trying to create it.");

            //By calling this method and empty database will be created into the default system path
            //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();
            this.close();

            try {

                this.copyDataBase();

                Log.e(TAG, "createDatabase database created");

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){

        File dbFile = new File(DB_PATH + DB_NAME);
        return dbFile.exists();

    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = this.context.getAssets().open(DB_NAME);

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(DB_PATH + DB_NAME);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public boolean openDataBase() throws SQLException {

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        this.myDatabase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
        return this.myDatabase != null;
    }

    @Override
    public synchronized void close() {

        if(this.myDatabase != null)
            this.myDatabase.close();

        super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

**内容提供商**

```
public class WorkTCContentProvider extends ContentProvider {

    private static final String TAG = WorkTCContentProvider.class.getSimpleName();

    public static final String AUTHORITY = 
            "ashton.android.personal.worktc.database";

    private static final UriMatcher sURIMatcher = new UriMatcher(UriMatcher.NO_MATCH);
    static {
        sURIMatcher.addURI(
                AUTHORITY, 
                ProfessionTable.TABLE_NAME, 
                ProfessionTable.PROFESSIONS);

        sURIMatcher.addURI(
                AUTHORITY, 
                ProfessionTable.TABLE_NAME + "/#", 
                ProfessionTable.PROFESSIONS_ID);
    }

    private DatabaseHelper database;

    @Override
    public int delete(Uri uri, String selection, String[] selectionArgs) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public String getType(Uri uri) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public Uri insert(Uri uri, ContentValues values) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public boolean onCreate() {

        Log.d(TAG, "before database creation");

        this.database = new DatabaseHelper(getContext());
        try {
            this.database.createDataBase();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        this.database.openDataBase();
        this.database.close();

        Log.d(TAG, "after database creation");

//      this.database.getWritableDatabase().execSQL( "pragma foreign_keys = on;" );

        return false;
    }

    @Override
    public Cursor query(Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) {

        SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

        switch (sURIMatcher.match(uri)) {
        case ProfessionTable.PROFESSIONS:

            /*
             * Dont do anything, just do the normal query.
             */

            break;

        case ProfessionTable.PROFESSIONS_ID:

            queryBuilder.appendWhere(ProfessionTable._ID + "=" + uri.getLastPathSegment());

            break;

        default:
            throw new IllegalArgumentException("Unknown URI: " + uri);
        }

        SQLiteDatabase db = this.database.getReadableDatabase();

        Cursor cursor = queryBuilder.query(
                db, 
                projection, 
                selection, 
                selectionArgs, 
                null, 
                null, 
                sortOrder);

        cursor.setNotificationUri(WorkTCApp.getContext().getContentResolver(), uri);

        return cursor;
    }

    @Override
    public int update(Uri uri, ContentValues values, String selection,
            String[] selectionArgs) {
        // TODO Auto-generated method stub
        return 0;
    }
} 
```

* * *

**职业表**

```
public final class ProfessionTable implements BaseColumns {

    public static final String TABLE_NAME = "Professions";

    public static final Uri URI = 
            Uri.parse("content://" + WorkTCContentProvider.AUTHORITY + "/" + TABLE_NAME);

    public static final int PROFESSIONS = 10;

    public static final int PROFESSIONS_ID = 11;

    public static final String NAME = "name";

    public static final String ICON = "icon";

    private ProfessionTable() {}
} 
```

* * *

**错误**

```
09-08 11:16:18.285: E/AndroidRuntime(11651): FATAL EXCEPTION: main
09-08 11:16:18.285: E/AndroidRuntime(11651): java.lang.RuntimeException: Unable to start activity ComponentInfo{ashton.android.personal.worktc/ashton.android.personal.worktc.controllers.WorkActivity}: java.lang.IllegalStateException: Invalid tables
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.os.Looper.loop(Looper.java:130)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.app.ActivityThread.main(ActivityThread.java:3687)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at java.lang.reflect.Method.invokeNative(Native Method)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at java.lang.reflect.Method.invoke(Method.java:507)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at dalvik.system.NativeStart.main(Native Method)
09-08 11:16:18.285: E/AndroidRuntime(11651): Caused by: java.lang.IllegalStateException: Invalid tables
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.database.sqlite.SQLiteDatabase.findEditTable(SQLiteDatabase.java:1127)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:330)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:280)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at ashton.android.personal.worktc.database.worktcContentProvider.query(worktcContentProvider.java:104)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.content.ContentProvider$Transport.query(ContentProvider.java:187)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.content.ContentResolver.query(ContentResolver.java:267)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at ashton.android.personal.worktc.views.WorkView.onFinishInflate(WorkView.java:96)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:631)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.view.View.inflate(View.java:8884)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at ashton.android.personal.worktc.controllers.WorkActivity.onCreate(WorkActivity.java:30)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-08 11:16:18.285: E/AndroidRuntime(11651):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
09-08 11:16:18.285: E/AndroidRuntime(11651):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-08T16:33:58.367

从错误：

```
Caused by: java.lang.IllegalStateException: Invalid tables 
```

我注意到你没有打电话`setTables()`：

```
SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
queryBuilder.setTables(ProfessionalTable.TABLE_NAME); 
```

在尝试运行您的查询之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T12:01:20.580

```
public static final Uri URI = Uri.parse(
        "content://" + WorkTCContentProvider.AUTHORITY + "/" + TABLE_NAME); 
```

请把上面的条款改为下面的条款。也就是改成单`/`后`content:`

```
public static final Uri URI = Uri.parse(
        "content:/" + WorkTCContentProvider.AUTHORITY + "/" + TABLE_NAME); 
```

# shopify - 安全性如何与应用程序配合使用？

> ID：12332459
> 
> 赞同：2
> 
> 时间：2012-09-08T16:25:41.230
> 
> 标签：shopify

我不明白 shopify 应用程序的安全性如何。假设我有一个运行我的应用程序的网站。我正在使用示例 django 应用程序和 pixelprinter 应用程序作为示例构建我的应用程序。

因此，如果我的网络会话中没有存储令牌，我会重定向到用户必须输入商店名称的登录页面。然后我向商店发送 OAuth2 请求，用户必须输入商店的密码才能安装应用程序。这对我来说很清楚。

假设我的应用程序被安装到商店。现在，如果我在我的登录屏幕中输入相同的商店名称，它会重定向到商店，商店将看到该应用程序已经安装并且不会要求用户输入密码。它是否正确？至少看起来是这样。

因此，除非我为从 shopify 外部访问我的应用程序的用户实施额外的安全措施，否则我有一个安全漏洞。正确的？任何人都可以输入商店名称，如果这家商店恰好安装了我的应用程序，那么他们将能够看到数据。

请澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T17:08:16.077

即使您已授权该应用程序，输入 URL 的任何其他人也必须在继续之前通过 Shopify 进行身份验证。

因为您已经输入了商店名称并登录，所以您的浏览器有一个会话，这使得当您在应用程序上再次输入商店名称时，后续请求似乎不需要登录。如果您要前往 Shopify 并注销（或在其他浏览器中尝试），然后输入商店名称，您将被重定向到登录页面，然后才能继续。

# android - 在android中使用最少两个线程？

> ID：12332464
> 
> 赞同：0
> 
> 时间：2012-09-08T16:26:47.727
> 
> 标签：android

当我在这里阅读一些帖子时，我注意到 android 主线程是 ui 线程，并且任何长操作都应该单独在另一个线程上

所以我想知道，是否总是为任何 Android 应用程序创建两个线程（至少）是一个好的设计习惯？一个是用于更新 UI 的 UI 线程，另一个是用于任何其他事情的线程

或者我应该只坚持一个线程并仅在需要时才产生一个线程（长时间操作）

感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:59:35.403

这在很大程度上取决于您的应用程序。简而言之，如果用户觉得应用程序有任何滞后，那么您可能需要将您的工作转移到另一个线程中。`AsyncTask`使使用线程变得非常容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:05:31.863

这是一个很好的问题，我觉得可以就这个话题进行辩论。

然而，我的观点和对您问题的回答是：

不，您应该只在执行长操作时创建一个额外的线程或 AsyncTask，例如。连接到服务器、从服务器下载数据或做一些繁重的工作。

就滞后而言，较小的事情不会引起注意，例如。简单的数学运算。

我希望这有帮助。

# java - Java 身份验证安全性

> ID：12332467
> 
> 赞同：0
> 
> 时间：2012-09-08T16:27:17.843
> 
> 标签：java, security, authentication

我有一个创建帐户`admin`的应用程序的中心实例。`judge`为了使用此法官帐户，`judge`来自另一台计算机的应用程序实例需要通过中央`admin`. 该应用程序的一个`user`实例会将一些内容发送给`admin`，后者会将其推送给其中一位评委。

我的问题是如何验证法官的身份。如果我只是简单地发送密码，它可以被嗅探（因为所有这些实例都需要在同一个网络上）。

我不确定使用 SSL 是否会有所帮助，但即使有，我也无法使用它（我无法控制它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:08:37.433

你可以在这里使用类似 pgp 的东西。所以你会使用一些公钥的东西。这将完全消除对密码的需要。

通过公钥加密，每个用户都有一个公钥和一个私钥。用一个密钥加密的东西只能用另一个密钥解密。所以你可以分发公共公钥。如果有人想给你发东西，他可以用你的公钥加密消息，只有你可以解密。

因此，发送到服务器的消息将使用用户私钥进行加密。他发送消息和他的公钥。如果您知道此公钥，则可以在服务器端进行数据库查找。如果您可以使用该密钥解密消息，则您知道它是由该用户发送的。

通过一些工作，您可能可以使用它来识别和验证用户。

当他们第一次与服务器交谈时，您只需使用评委来保证任何新用户及其公钥。因此，您可以创建一个信任网络。

# linux - 是否可以将主机作为 ssh 别名中的变量访问以扩展主机名？

> ID：12332469
> 
> 赞同：3
> 
> 时间：2012-09-08T16:27:28.717
> 
> 标签：linux, configuration, ssh, configuration-files, config

我正在尝试在我的`.ssh/config`文件中创建一个 SSH 别名，该别名将匹配任何以 .vpn 结尾的主机并将主机名扩展为`[name].vpn.domainname.com`

我可以通过将主机指定为来匹配任何 .vpn 域，`Host *.vpn`但我无法扩展域。

理想情况下，我想要类似的东西：

```
Host *.vpn
     HostName $HOST.domainname.com 
```

我环顾四周，但找不到任何这样的 SSH 别名示例。

[http://collectiveidea.com/blog/archives/2011/02/04/how-to-ssh-aliases/](http://collectiveidea.com/blog/archives/2011/02/04/how-to-ssh-aliases/) [http://osxdaily.com/2011/04/05/setup-ssh-config-fie/](http://osxdaily.com/2011/04/05/setup-ssh-config-fie/)

这种别名是否可以使用 SSH 别名？如果是这样，怎么办？如果没有，还有其他想法如何实现这个结果？

我真的不想输入完整的域，而且不必为 vpn 上的每台机器添加 50 个左右的别名会很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T17:30:11.067

从`ssh_config(5)`手册页：

> 如果主机名包含字符序列 '%h'，那么它将被替换为命令行中指定的主机名 [...]。

```
Host *.vpn
     HostName %h.domainname.com 
```

# haskell - Haskell 网络“接受”不支持的操作（功能未实现）

> ID：12332471
> 
> 赞同：1
> 
> 时间：2012-09-08T16:27:30.800
> 
> 标签：haskell, network-programming, debian

我使用`Network`,`System.IO`和编写了一个简单的 Web 服务器`Data.Bytestring`。这些组件都在家里运行 Debian 的几台机器上完美地通信。但是，当我尝试在大学服务器（更新频率较低的 Debian）上运行该程序时，出现以下错误：

```
Waiting for connection on <socket: 3>
Broadcaster: accept: unsupported operation (Function not implemented) 
```

相关的代码行是：

```
 sock <- listenOn port
  putStrLn $ "Waiting for connection on " ++ (show sock)
  (handle, host, hostPort) <- accept sock 
```

我已经在它运行的服务器上本地编译了应用程序（ghc 7.4.1 一直使用）。我试过有和没有`withSocketsDo`。

请问有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:43:09.377

该问题是`ghc`为`2.6.32-5-686-bigmem`在`2.6.23.17-general`.

```
<lab machine>% uname -r
2.6.32-5-686-bigmem
<server machine>% uname -r
2.6.23.17-general 
```

# c# - 检查 linq 语句中的空值，以免发生错误

> ID：12332478
> 
> 赞同：0
> 
> 时间：2012-09-08T16:28:18.187
> 
> 标签：c#, linq, c#-4.0

对我来说检查空值的最佳方法是什么，以便在执行此语句时不会出现错误：

```
if (Levels.Count(x => x.Location.ToUpper() == code.ToUpper()) == 1) 
```

我需要确保 Location 不为空，因为它不断抛出对象引用异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:30:44.723

试试这个

`if (Levels.Count(x => x.Location!= null && x.Location.ToUpper() == code.ToUpper()) == 1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T16:29:33.857

你可以试试`Where`运营商

```
if (Levels.Where(x => x.Location != null)
          .Count(x => x.Location.ToUpper() == code.ToUpper()) == 1) 
```

# ruby-on-rails - rails的命令错误

> ID：12332480
> 
> 赞同：0
> 
> 时间：2012-09-08T16:28:43.297
> 
> 标签：ruby-on-rails

当我发出命令`rails s`时，它会出现以下错误消息：

```
 nathan@Nathan-Ubuntu:~/Documents/Aptana Studio 3 Workspace/sample_application/app/controllers$ rails s
=> Booting WEBrick
=> Rails 3.2.8 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/home/nathan/Documents/Aptana Studio 3 Workspace/sample_application/config/routes.rb:1:in `<top (required)>': uninitialized constant SampleApp (Name
Error)
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `each'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `load_paths'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:16:in `reload!'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:26:in `block in updater'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/file_update_checker.rb:78:in `call'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/file_update_checker.rb:78:in `execute'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:27:in `updater'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
        from /home/nathan/Documents/Aptana Studio 3 Workspace/sample_application/config/environment.rb:5:in `<top (required)>'
        from /home/nathan/Documents/Aptana Studio 3 Workspace/sample_application/config.ru:4:in `require'
        from /home/nathan/Documents/Aptana Studio 3 Workspace/sample_application/config.ru:4:in `block in <main>'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
        from /home/nathan/Documents/Aptana Studio 3 Workspace/sample_application/config.ru:1:in `new'
        from /home/nathan/Documents/Aptana Studio 3 Workspace/sample_application/config.ru:1:in `<main>'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
        from /home/nathan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

### 路线.rb

```
SampleApp::Application.routes.draw do
  get "static_pages/home"
  get "static_pages/help"
end 
```

### 配置/应用程序.rb

```
require File.expand_path('../boot', __FILE__)

require 'rails/all'

if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end

module SampleApplication
  class Application < Rails::Application
    # Settings in config/environments/* take precedence over those specified here.
    # Application configuration should go into files in config/initializers
    # -- all .rb files in that directory are automatically loaded.

    # Custom directories with classes and modules you want to be autoloadable.
    # config.autoload_paths += %W(#{config.root}/extras)

    # Only load the plugins named here, in the order given (default is alphabetical).
    # :all can be used as a placeholder for all plugins not explicitly named.
    # config.plugins = [ :exception_notification, :ssl_requirement, :all ]

    # Activate observers that should always be running.
    # config.active_record.observers = :cacher, :garbage_collector, :forum_observer

    # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
    # Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.
    # config.time_zone = 'Central Time (US & Canada)'

    # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
    # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
    # config.i18n.default_locale = :de

    # Configure the default encoding used in templates for Ruby 1.9.
    config.encoding = "utf-8"

    # Configure sensitive parameters which will be filtered from the log file.
    config.filter_parameters += [:password]

    # Enable escaping HTML in JSON.
    config.active_support.escape_html_entities_in_json = true

    # Use SQL instead of Active Record's schema dumper when creating the database.
    # This is necessary if your schema can't be completely dumped by the schema dumper,
    # like if you have constraints or database-specific column types
    # config.active_record.schema_format = :sql

    # Enforce whitelist mode for mass assignment.
    # This will create an empty whitelist of attributes available for mass-assignment for all models
    # in your app. As such, your models will need to explicitly whitelist or blacklist accessible
    # parameters by using an attr_accessible or attr_protected declaration.
    config.active_record.whitelist_attributes = true

    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.0'
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:04:25.250

**更新**：检查您的路线后

更改`SampleApp`为`SampleApplication`

看着你`trace`的`application path`名字，如果应用程序是你的名字

`sample_application`所以应用程序名称应该是`SampleApplication`

但从跟踪看来，您将其作为`SampleApp`.

这可能是因为您稍后重命名了该应用程序

或者

在学习时从一些教程中做了一些复制粘贴。

检查`config/envirnoment.rb`文件最后一行应包含应用程序名称

就像是

```
SampleApplication::Application.initialize 
```

所以示例中的应用程序名称是`SampleApplication`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:07:15.750

你`config/routes.rb`应该从`SampleApplication::Application.routes.draw do`

# jquery - jQuery如何将livequery翻译成on？

> ID：12332482
> 
> 赞同：1
> 
> 时间：2012-09-08T16:29:01.877
> 
> 标签：jquery, jquery-ui, livequery, jquery-on

我有这个代码，但是它使用的是旧的遗留函数“livequery”，它应该真正切换到使用“on”。但是，对于我的生活，我无法让它发挥作用。这是我的代码片段。

```
jQuery('.box').livequery(function(){
     jQuery('a', this).click(function() {
          return false;
     });
     jQuery(this).draggable({
        appendTo: "body",
        helper: 'clone',
        opacity: 0.5,
        zIndex: 900,
        stop: function(event, ui) {
        return true;
        }           
     });
}); 
```

我试过这个......

```
jQuery('.box').on('draggable', function(){
     jQuery('a', this).click(function() {
          return false;
     });
     jQuery(this).draggable({
        appendTo: "body",
        helper: 'clone',
        opacity: 0.5,
        zIndex: 900,
        stop: function(event, ui) {
        return true;
        }           
     });
}); 
```

这不起作用，因为我猜“可拖动”不是事件名称......

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:42:18.250

那里的这个答案[新插入的 dom 节点](https://stackoverflow.com/questions/9691916/does-jquerys-on-support-this-kind-of-livequery-feature)可以帮助您将代码转换为功能而不是实时功能

# facebook-like - 带有 FB 的网站喜欢不显示在用户新闻源中

> ID：12332487
> 
> 赞同：0
> 
> 时间：2012-09-08T16:29:49.450
> 
> 标签：facebook-like, timeline, feed

我有一个像集成/个性化这样的 FB 网站，但是当我“分享到 facebook”时，故事不会出现在我的新闻源中，只有我的时间轴！我真的希望这也能出现在新闻源中。我需要做什么/检查/改变？网站是[曾经在维罗纳](http://www.onceinverona.com)

# algorithm - 点在不规则形状内

> ID：12332489
> 
> 赞同：3
> 
> 时间：2012-09-08T16:30:23.747
> 
> 标签：algorithm, 2d, shape

我绝不是专业的程序员，所以请不要指望这里有复杂的方法或语言。但是，我将感谢您提出的实现算法的建议和建议，在以后的阶段，我可以以编程方式将其添加到我的项目中......这是问题所在：

想象空间中具有以下属性的任意点（点 X）：

*   有坐标
*   位于二维表面上
*   是静止的
*   在任何给定时间属于单个区域（其边界坐标也是已知的）。也就是说，它是其“父”元素的唯一“子”。同样，如果它不在一个区域内，它肯定在另一个区域内！

区域不是简单的正方形、四边形或圆形，而是不规则的形状。

现在，我的问题是：我如何确定：（i）点 X 是否位于该特定区域内而不是相邻区域内；(ii) 该点属于哪个特定区域（在一组区域 A、B 或 C 中）？！？请参阅链接图像以更好地可视化问题：

![](../Images/cd64a0a9592808dcde3b1a751290cfa0.png)

PS：我仔细研究了处理[Point in Polygon](http://en.wikipedia.org/wiki/Point_in_polygon)问题的可能性（特别是“光线投射算法”听起来很聪明！）但这似乎不是一个解决方案，因为（i）区域可能彼此相邻；(ii) 我需要确定一个点所属的区域，而不是它位于它内部/外部的区域。

非常感谢您提前！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:01:22.283

程序员会这样做：

1.  一个函数将一个区域数组和一个点作为参数。

2.  制作一个循环 - 检查您的所有区域和每个区域

    通过射线投射算法检查该点是否属于那里。

    如果没有，继续循环，

    如果是，则完成返回当前区域编号的函数。

3.  如果您不在区域内，则返回 -1。

当然，你可以改进算法，考虑到共同的边界，而不是重复计算它们的角度，但现在这样的算法显然是不可能的。即使是一个优秀的程序员也会*从一些简单但有效的事情开始*。

# c++ - 类型参数为 void 时无法实例化函数模板

> ID：12332490
> 
> 赞同：3
> 
> 时间：2012-09-08T16:30:38.927
> 
> 标签：c++, templates, c++11

我们知道以下代码[编译得很好](http://ideone.com/QLhCJ)：

```
void f() {}
void g(void) {}

f();
g(); 
```

但为什么不如下：

```
template<typename T>
void f() {}

template<typename T>
void g(T) {}

f<void>();  //ok
g<void>();  //error 
```

为什么该行`g<void>()` [给出错误](http://ideone.com/PP5mS)？

> 错误：没有匹配的函数调用“g()”

为什么不能将其实例`void`化为类型参数？为什么函数模板没有实例化为：

```
void g(void) {}  //to be instantiated from the function template 
```

毕竟，这是我要求的。

我正在寻找一个权威的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T16:34:48.500

合法的论点是它`void`是一个不完整的类型，不能完成，所以永远不能用作顶级类型。与 比较`void a;`。这有点令人困惑，因为`void`参数列表中的不是类型，而是表示没有参数的约定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T17:07:39.723

## C 兼容性语法破解

以下：

```
void f() {}
void g(void) {}

f();
g(); 
```

编译只是因为出于 C 兼容性原因而保留的有问题的 C++ 语法符号，即`void`in g：

```
void g(void) {} 
```

这里用来说“无参数”，而不是可以预期的“一个类型的参数`void`”（这没有意义）。

在 C++ 中，我们有时需要包含 C 头文件，因此如果不支持这种表示法，就会出现问题。但这并不意味着您必须在 C++ 代码中使用它。

## C++ 模板

当您声明：

```
template<typename T>
void g(T) {} 
```

您正在声明一个`g`以 type 为模板的函数`T`，该函数有一个类型为 T 的未命名参数。

所以，当`T`是`void`，你仍在处理一个函数`g`，它有一个类型为 的未命名参数`void`。这没有任何意义。这意味着编译器会抱怨。

## 解决方案？

严重地？

根本不要使用`g(void)`符号。这就像 C++ 中的 typedef-ing 结构。它没有用，只会混淆代码。

## 解决方案2？

现在，如果你真的有以下代码：

```
template<typename T>
void g(T) {} 
```

如果你想提供一个`g()`实现，你应该提供一个重载：

```
// Original template
template<typename T>
void g(T) { /* implementation for the generic case */ }

// Code to handle g()
void g()  { /* implementation for the specific "void" case */ } 
```

如果你想提供一个`g<void>()`实现，你应该提供一个模板化的重载，通过特化处理 void 情况：

```
// Original template
template<typename T>
void g(T)      { /* implementation for the generic case for g(T) */ }

// Code to handle g<void>()
template<typename T>
void g()       { /* implementation for the generic case for g() */ }

template<>
void g<void>() { /* implementation for the generic case for g<void>() */ } 
```

# javascript - 将 div 高度设置为另一个 div 高度

> ID：12332492
> 
> 赞同：0
> 
> 时间：2012-09-08T16:30:57.100
> 
> 标签：javascript, dom, html, height

我知道有人问过类似的问题，并且我已经引用了它们，但还没有让它起作用。我有一个旁白，它的内容可能没有它旁边的主要部分那么多。我正在使用加载事件 window.load 来运行我的脚本，名为 asideHeightSet 下面是调用它的代码片段：

```
 <script>
    window.onload=function(){

        asideHeightSet("main_content_aside", "main_content_section");
    }
  </script> 
```

我还有其他可以从那里正常执行的函数，这个片段是在我可以依赖任何 jQuery 库之后。我的 sideHeightSet javascript 是：

```
var $ = function (id) { return document.getElementById(id); }
function asideHeightSet(aside, section){
var sectionHeight = $(section).style.height;
$(aside).style.height= sectionHeight;

} 
```

我在firefox中运行了firebug调试器，它一直显示该部分的高度是空白的，当我通过时它在手表中输出“”。

任何帮助，将不胜感激。

谢谢

* * *

这为我做到了：

函数asideHeightSet(aside, section){ v​​ar sectionHeight = $(section).offsetHeight-22;

$(aside).style.height = sectionHeight+"px";

}

22是要考虑到padding和border。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:33:49.487

运行您提供的代码可以让我得到元素的高度

```
$(section).offsetHeight 
```

style height 返回 none，因为可能没有与元素关联的高度 css 样式。试试看，告诉我结果如何。

# azure - 如何从谷歌 CDN 或本地下载 jQuery 以用于 Windows Azure 应用程序

> ID：12332497
> 
> 赞同：0
> 
> 时间：2012-09-08T16:31:39.757
> 
> 标签：azure

我有一个 Windows Azure 应用程序。当我在本地运行时，我想从本地版本的 jQuery 运行。在 Microsoft 服务器上运行时，我想使用 Google CDN。

根据我的应用程序是在本地运行还是在 Azure 服务器上运行，我的 razor 视图是否有一种在本地和 CDN 版本之间切换的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:11:56.843

内容交付网络 (CDN) 可用于将内容卸载到全球分布式服务器网络，从而确保为最终用户提供更快的吞吐量。

所以 CDN 就是把数据尽可能靠近用户，我不确定 Google CDN 是如何工作的，但如果它像 Azure，那么你需要将你的内容放入 CDN 并获取内容的 URL . 然后，在您的 Web 应用程序中，指向 Google CDN URL 以通过 CDN 在地理上提供上下文。

查看[这篇](http://acloudyplace.com/2012/04/using-the-windows-azure-content-delivery-network/)博客文章，了解 Azure 的“使用 Windows Azure 内容交付网络”是如何工作的。

您应该能够使用相同的方法，但替换为 Google CDN 位置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T18:04:21.283

您可以添加一个新的助手：

```
@helper ScriptPath(string path)
{
    <script src="@fnScriptPath(path)" type="text/javascript"></script>
}

@functions 
{
    static string fnScriptPath(string path)
    {
        if (Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.IsEmulated)
            return "/Scripts/" + path;
        else
            return "http://ajax.aspnetcdn.com/ajax/jQuery" + path;
    }
} 
```

那么您的页面将具有：

```
@ScriptHelper.ScriptPath("jquery-1.7.1.js") 
```

例如。

**重要提示：**为此，您的参考资料中的 Microsoft.WindowsAzure.ServiceRuntime 程序集需要将 Copy Local 设置为 true。我还必须关闭并重新打开解决方案以进行更改（而不仅仅是构建）；否则，Microsoft.WindowsAzure.ServiceRuntime 无法解析。

![在此处输入图像描述](../Images/62d92abcda4eb828a40223cbfcef891b.png)

# c - 从 C 中的字符串加载 openssl RSA 密钥

> ID：12332499
> 
> 赞同：2
> 
> 时间：2012-09-08T16:32:05.727
> 
> 标签：c, openssl, pem

我很难理解使用什么函数将我的密钥加载到 RSA 中。

我从本地数据库中以这样的字符串形式获取密钥：

> -----begin public key----- migfma0gcsqgsib3dqebaquaa4gnadcbiqkbgqdcz4npasjgxrcv8fwqcrdw+cze 76l3inzil3mquizvuyyn5heqqsrvg7/4mu1czc5fghcuk2pbfjgk9ev3xz6soxpk pkhkxot87xgkmi1hulszcyouhvrtgkgcbk/kuktqozklgbolxf+cxigdptpgareg dp+6ieuziwsfpjrkjwidaqab -----end public key-----

然后我尝试这样的事情（在objective-c中）：

```
long len = [key length];
const unsigned char *p = (unsigned char *)[key UTF8String];
RSA *r = d2i_RSA_PUBKEY(NULL, &p, len); 
```

r 总是返回 null 所以我在那里做错了什么。我已经尝试了其他一些东西，但我想我只是想念它。最终目标是从我的公钥创建一个 RSA，然后使用类似的东西

```
RSA_public_encrypt ( 1, hash,    secret,     r, RSA_PKCS1_OAEP_PADDING ); 
```

加密哈希，但我一直在加载我的密钥:) 任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T01:20:47.833

经过一天的头撞墙后，我终于找到了解决方案。我在存放钥匙时不小心把钥匙小写了，这并没有帮助......

无论如何，这就是我所做的，假设您的密钥位于名为 key 的 NSString 中，此代码将为您加载它。

```
const char *p = (char *)[key UTF8String];

BIO *bufio;
RSA *rsa;
NSUInteger byteCount = [key lengthOfBytesUsingEncoding:NSUTF8StringEncoding];

bufio = BIO_new_mem_buf((void*)p, byteCount);
RSA *myRSA = PEM_read_bio_RSA_PUBKEY(bufio, 0, 0, 0); 
```

# python - `x = [lambda: x for x in range(3)]`，`x[0]()` 会返回什么？

> ID：12332500
> 
> 赞同：0
> 
> 时间：2012-09-08T16:32:12.743
> 
> 标签：python, lambda

在此代码`x = [x for x in range(3)]`中，全局 x 等于 [0, 1, 2]。

列表推导中的 x 是一个局部变量。

然后让我们定义`x = [lambda: x for x in range(3)]`，会`x[0]()`返回什么？0? 2？

不，它会返回一个列表，全局 x 本身。

**我想知道为什么内部x指的是全局x，而不是局部x？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T16:40:29.607

这是因为运算符的优先级。你的表达是：

```
x = [lambda: x for x in range(3)] 
```

这相当于：

```
x = [(lambda: x) for x in range(3)] 
```

这是三个函数的列表，每个函数都引用全局 x。lambda 创建了一个作用域，在 Python 2 中，在局部作用域之后检查的下一个作用域是全局作用域，所以这就是 x 所在的位置。

这给了你想要的（我认为这就是你想要的）：

```
>>> x = [(lambda x=x: x) for x in range(3)]
>>> x[0]()
0 
```

在这里，我们利用了这样一个事实，即在定义函数时，在当前范围内对默认值进行一次评估。这会将 x 的值烘焙到列表中的每个 lambda 中。

# c# - 实时下拉列表 SelectedValue

> ID：12332507
> 
> 赞同：0
> 
> 时间：2012-09-08T16:33:34.730
> 
> 标签：c#, asp.net, drop-down-menu, azure

这是我的第一篇文章。我正在使用 Visual Studio 制作 Azure 应用程序。

我想做一个“更新页面”。

这是我要实施的步骤：

1) 用户从 DropDownList 中选择一个 ID

2) 用户按下 HTML 按钮

3）“系统”用 SQL 语句中的信息填充一些文本框：Select...where Id= DropDownList1.SelectedValue.ToString()

4) 用户可以更改文本框上的一些信息并按下 ASP 按钮

5) 系统根据文本框的信息执行 SQL UPDATE 语句

我有**一个下拉列表**，IDPRODUCT

```
<asp:DropDownList ID="DropDownList1" OnSelectedIndexChanged="index_Changed"  runat="server" ></asp:DropDownList> 
```

我从“页面加载”上的 SQL 语句填充它

```
DropDownList1.Items.Clear();
            DropDownList1.Items.Add(" ");

            string consultaComboIdCompra = "SELECT DISTINCT IdCompra FROM Compras";
            SqlCommand sqlCommandComboIdCompra = new SqlCommand(consultaComboIdCompra, sqlConnection);
            sqlConnection.Open();
            SqlDataReader readerComboIdCompra = sqlCommandComboIdCompra.ExecuteReader();

            if (readerComboIdCompra.HasRows)
            {
                while (readerComboIdCompra.Read())
                {
                    DropDownList1.Items.Add(readerComboIdCompra.GetString(0));
                }
            }

            sqlConnection.Close(); 
```

我有一个 HTML 按钮，它的功能**应该是**用 SQL 语句的结果填充一些 TextBox，例如：

```
 string consulta2 = "SELECT Unidades FROM Productos WHERE IdProducto = '" + DropDownList1.SelectedValue.ToString() + "'";
 SqlCommand sqlCommand2 = new SqlCommand(consulta2, sqlConnection);
 sqlConnection.Open();
 SqlDataReader reader2 = sqlCommand2.ExecuteReader();

 if (reader2.HasRows)
 {
   while (reader2.Read())
   {

       TextBox4.Text = reader2.GetString(0);
   }
 }
 sqlConnection.Close(); 
```

最后我已经实现了 UPDATE 语句

```
if (IsPostBack)
            {
string idCompra = DropDownList1.SelectedValue.ToString();

string consulta3 = "UPDATE Compras SET Unidades = '" + TextBox1.Text + "' WHERE IdCompra = '" + idCompra + "'";
                SqlCommand sqlCommand3 = new SqlCommand(consulta3, sqlConnection);
                sqlConnection.Open();
                SqlDataReader reader3 = sqlCommand3.ExecuteReader();
                sqlConnection.Close();

} 
```

我不能“自动回答”，所以我编辑了我的问题由于 nunespascal，最终有效的代码是下一个：

```
 public partial class WebFormProductosOpcion5 : System.Web.UI.Page
        {
            static string strSQLconnection = *********
            static SqlConnection sqlConnection = new SqlConnection(strSQLconnection);
            protected void Page_Load(object sender, EventArgs e)
            {
                if(!IsPostBack)
                {
                DropDownList1.Items.Clear();
                DropDownList1.Items.Add(" ");

                string consultaComboIdProducto = "SELECT DISTINCT IdProducto FROM Productos";
                SqlCommand sqlCommandComboIdProducto = new SqlCommand(consultaComboIdProducto, sqlConnection);
                sqlConnection.Open();
                SqlDataReader readerComboIdProducto = sqlCommandComboIdProducto.ExecuteReader();

                if (readerComboIdProducto.HasRows)
                {
                    while (readerComboIdProducto.Read())
                    {
                        DropDownList1.Items.Add(readerComboIdProducto.GetString(0));
                    }
                }

                sqlConnection.Close();

            }

            }

            protected void html_click(object sender, EventArgs e)
            {
                TextBox2.Text = "HOLA";
                Debug.WriteLine("HOLA");

            }

            protected void HTML_Button_Click(object sender, EventArgs e)
            {
                string idProductoSeleccionado = DropDownList1.SelectedValue.ToString();
                string consultaUltimo = "SELECT * FROM Productos WHERE IdProducto = '" + idProductoSeleccionado + "'";
                SqlCommand sqlCommandUltimo = new SqlCommand(consultaUltimo, sqlConnection);
                sqlConnection.Open();
                SqlDataReader readerUltimo = sqlCommandUltimo.ExecuteReader();

                if (readerUltimo.HasRows)
                {
                    while (readerUltimo.Read())
                    {
                        //Put the name
                        TextBox2.Text = readerUltimo.GetString(1);
                    }
                }

                sqlConnection.Close();
                //Label10.Text = col1;
                sqlConnection.Close();
            }

            protected void Button1_Click(object sender, EventArgs e)
            {

                    //string consulta = "select * from Productos where IdProducto ='";
                    //consulta = consulta + idP + "'";
                    SqlCommand sqlCommand = new SqlCommand(consulta, sqlConnection);
                    sqlConnection.Open();
                    SqlDataReader reader = sqlCommand.ExecuteReader();
                    sqlConnection.Close();
                    //Mensaje Modificación Correcta
                    Response.Write("<script language=javascript>alert('Modificado con éxito');</script>");

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:41:45.520

`DropDownList`您只需要在用户第一次请求页面时绑定 a 。在页面上绑定之前检查用户是否没有回帖`Load`

```
if(!IsPostBack)
{
        DropDownList1.Items.Clear();
        DropDownList1.Items.Add(" ");

        string consultaComboIdCompra = "SELECT DISTINCT IdCompra FROM Compras";
        SqlCommand sqlCommandComboIdCompra = new SqlCommand(consultaComboIdCompra, sqlConnection);
        sqlConnection.Open();
        SqlDataReader readerComboIdCompra = sqlCommandComboIdCompra.ExecuteReader();

        if (readerComboIdCompra.HasRows)
        {
            while (readerComboIdCompra.Read())
            {
                DropDownList1.Items.Add(readerComboIdCompra.GetString(0));
            }
        }

        sqlConnection.Close();
} 
```

由于您正在更新按钮，因此您无需检查`IsPostBack`. 将该代码放在按钮`Click`事件处理程序上。这样它只会在有人点击你的更新按钮时运行

# c++ - c++中的泛型迭代器

> ID：12332511
> 
> 赞同：1
> 
> 时间：2012-09-08T16:33:51.870
> 
> 标签：c++, templates, vector

我正忙于一个项目，想知道什么是数组的通用迭代器类`type T`以及如何编写一个。我在书籍和网站上看过，但我找不到任何东西。请帮忙。但是不要为我写代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:44:21.273

可能是一个具有一元运算符的类`*`，`++`并且可能已`--`定义，其中第一个返回对基础`T`对象的引用，第二个将迭代器推进到容器中的下一个元素，最后一个将迭代器向后推进。

或者，如果您使用一些标准容器，只需返回值`yourContainer.begin()`or `yourContainer.find()`。

如果您详细说明您的问题，您可以获得更好的答案。例如，您使用的是什么容器？什么是通用迭代器？

# ruby - 如何使用保护拷贝（并保留目录结构）

> ID：12332514
> 
> 赞同：1
> 
> 时间：2012-09-08T16:34:02.403
> 
> 标签：ruby, guard

一个快速的问题。我有一个如下的目录结构。

```
    我的根/
      家长/
        一个.png
        二.png

```

我正在尝试将 .png 图像复制到 mydestination/ 同时保留源的父目录结构。

```
    我的目的地/

```

这个 Guardfile 配置不起作用。有没有办法让我完成这项工作？

```
guard :copy, :from => "templ/coffeescript/template/module/", :to => "include", :mkpath => true do
  watch(%r{.+\.png}) do |m| 
    println #{m[0]}
  end 
end 
```

# c - 宏 foo(a,b, ;) 的含义

> ID：12332517
> 
> 赞同：-5
> 
> 时间：2012-09-08T16:34:32.450
> 
> 标签：c, macros

我在公司里浏览了一些旧的 C 代码，这些代码是在没有`gcc -flags`选项的情况下编译的，我遇到了一行奇怪的代码。

```
#define foo(a,b) foonew(a,b, ;) 
```

谁能向我解释这是做什么的？

编辑：因为它是未编译的大型代码库的一部分`gcc -flags`，所以我看不到预处理是否`form.Compilation`成功完成而没有错误或警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:58:26.370

分号用作预处理标记，就像`a`and一样`b`。它可以用作另一个宏的参数。

例如

```
#define foonew(x,y,z)   (x + y) z

#define foo(a,b)    foonew(a,b, ;)

int main()
{
   int one = 1;
   int two = 2;

   int three = foo(one, two)   // no semicolon here!

    return three;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:07:21.907

这将起作用

```
 #define foo(a,b) foonew(a,b) 
```

尝试这个。

宏参数可以为空（由零个预处理标记组成）。例如，

```
 #define SUM(a,b,c) a + b + c
  SUM(1,,3)  /* No error message. 
```

1代替a，3代替c。*/ 如果标识符列表不以省略号结尾，则宏调用中的参数个数必须与相应宏定义中的参数个数相同。在参数替换期间，所有指定参数被替换后剩余的任何参数（包括任何分隔逗号）都组合成一个参数，称为变量参数

# jquery - 将 jQuery 对话框元素恢复到“销毁”时的初始大小/位置？

> ID：12332518
> 
> 赞同：2
> 
> 时间：2012-09-08T16:34:37.437
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

一个例子胜过 1000 字：

[http://jsfiddle.net/GF7KF/4/](http://jsfiddle.net/GF7KF/4/)

有一个蓝色`div`。如果您单击“打开它！” 按钮，`div`在 jquery ui 对话框中打开。`div`当我关闭对话框返回到其初始位置时，我该怎么做？有没有一种简单的方法，或者我必须做一些代码来为每个具体情况手动记住它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:46:37.750

一种解决方案是在 div 中使用占位符元素：

[http://jsfiddle.net/davelnewton/zjMvS/1/](http://jsfiddle.net/davelnewton/zjMvS/1/)

```
<div>
  <p>Hello!</p>
  <span id="dialog"></div>
</div> 
```

```
var d = $('span#dialog');
$('.open-dialog').click(function() {
    d.dialog({ 
```

# c++ - c++ Log 类效率低下？

> ID：12332522
> 
> 赞同：0
> 
> 时间：2012-09-08T16:35:04.317
> 
> 标签：c++, visual-c++

我为我正在编写的游戏编写了一个*非常简单的 Log 类，只是为了在终端中查看一些信息。*但是我这样做的方式让我很烦，因为我觉得它效率太低了。每次我记录一些东西时，它的构造函数和析构函数都会被调用。因此，如果我想打印当前帧速率（例如 60fps），cont/desct 每秒调用 60 次（每秒创建和销毁 60 个日志对象）。每次我想记录一些东西并且我不想使用signleton时，我不想在游戏中传递一个日志对象。有没有更好的解决方案。

```
#include <iostream>
#include <sstream>

class Log
{
public:
    Log() : os()
    {

    }

    ~Log()
    {
        fprintf(stderr, "%s\n", os.str().c_str());
    }

    std::ostringstream &Write()
    {
        os << "from log class: " << 1337 << "\t";

        return os;
    }

private:
    std::ostringstream os;
};

int main(int argc, char *argv[])
{
    Log().Write() << "Hello world " << 45;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:49:03.677

我建议使用一些现有的日志记录框架。人们付出了很多努力来使其尽可能快速和灵活。

以下是对现有日志框架的良好描述：

[https://stackoverflow.com/questions/696321/best-logging-framework-for-native-c](https://stackoverflow.com/questions/696321/best-logging-framework-for-native-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:24:43.270

您假设构造函数和析构函数效率低下。根据我的经验，如果它们是在头文件中声明的（就像你的那样）并且如果它们很简单（就像你的那样），那么你可以相信编译器会内联它们并做得很好。对 printf 的调用将占据主导地位。

# joomla - Joomla v2.5 或 v3（测试版）是否支持自定义用户组和权限？

> ID：12332524
> 
> 赞同：0
> 
> 时间：2012-09-08T16:35:10.827
> 
> 标签：joomla

在 v1.5 期间查看了 Joomla，我放弃了使用它，因为它仅限于预定义的用户组和非粒度权限。

现在 Jooma 的 v2.5 已经发布并且 v3.0 处于测试阶段，我想知道这是否已经改变。较新版本的 Joomla 是否允许更精细的权限和用户定义的组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T19:34:35.380

Joomla 2.5 有 ACL

Joomla 1.6 及更高版本中最强大的新功能之一是访问控制列表 (ACL)。

ACL 代表访问控制列表。它是指谁有权在网站上做什么，包括读取、创建、编辑、删除或登录等权限。

这里有一个有用的链接

[http://www.slideshare.net/jen4web/joomla-25-access-control-lists-acl](http://www.slideshare.net/jen4web/joomla-25-access-control-lists-acl)

# mysql - 一秒钟内选择太多 - Mysql

> ID：12332525
> 
> 赞同：0
> 
> 时间：2012-09-08T16:35:18.300
> 
> 标签：mysql, locking, commit

我有一个系统，每天早上都会为我和我的客户发送电子邮件。这个过程是通过 iframe 访问我的网站自动触发的。

通常，我会收到两次相同的电子邮件。

我在 MySQL 数据库上创建的用于控制这一点的简单过程如下：

**运行此查询：**

选择客户发送我的电子邮件

```
SELECT name, email FROM clients WHERE DATE_FORMAT(lastsend, '%d/%m/%y') <> DATE_FORMAT(now(), '%d/%m/%y') 
```

**发送邮件功能**

我使用 vb.net 发送电子邮件

**发送所有电子邮件后更新表客户端**

```
UPDATE clients SET lastsend = Now(); 
```

我需要一种方法来锁定它，以防止在同一天多次发送相同的电子邮件。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:50:36.717

你所拥有的是一个竞争条件。有很多方法可以解决这个问题，有些方法比其他方法更强大。“稳健”意味着保证永远不会有重复的电子邮件。

这是一个*简单*的方法。在表中添加第二个日期列：SendStart。*在*您尝试发送电子邮件并将 WHERE 子句更改为：

```
WHERE DATE_FORMAT(lastsend, '%d/%m/%y') <> DATE_FORMAT(now(), '%d/%m/%y') and
      DATE_FORMAT(sendstart, '%d/%m/%y') <> DATE_FORMAT(now(), '%d/%m/%y') 
```

您仍然可以在第一个查询和第二个查询之间获得竞争条件。但是，时间跨度要小得多，因此可能性要小得多。

最后，您将同时记录电子邮件的发送时间和是否发送（除非发送成功，否则不要设置 lastsend）。您可以对不成功的电子邮件进行批量报告和错误处理。

# magento - 在 Magento 中更改基本 URL

> ID：12332527
> 
> 赞同：1
> 
> 时间：2012-09-08T16:35:27.317
> 
> 标签：magento, content-management-system, php

我正在将一个 magento 商店从 mydomaintest.com 移动到 mydomain.com。

当我说移动时，在这种情况下，我们只是使用 Cpanel 来修改帐户并将域名从 mydomaintest.com 更改为 mydomain.com。

然后使用在论坛中找到的建议，我使用 PHPMyAdmin 将 Magento Core Config 表更新为 Secure 和 Unsecure url 的新 BaseURL。

完成此操作后，我删除了 /var/cache 中的所有文件。

尝试通过域名或 IP 访问该站点会提供以下错误：

> 致命错误：require_once() [function.require]：无法打开所需的“/home/mydomain/public_html/errors/report.php”（include_path='/home/mydomain/public_html/app/code/local:/home/mydomain /public_html/app/code/community:/home/mydomain/public_html/app/code/core:/home/mydomain/public_html/lib:.:/usr/lib/php:/usr/local/lib/php')在 /home/mydomain/public_html/app/Mage.php 第 847 行

请帮忙，我们今天正在尝试搬家，但似乎无法解决这个问题。

谢谢！约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:48:10.597

转到系统 > 索引管理和重新索引数据，因为它还包含 url 重写。还要确保检查系统 > 缓存管理（某些版本仍然有）并刷新所有缓存，因为 var/cache 不是唯一的缓存位置。Zend 组件将它们的缓存保存在 tmp 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T23:57:50.463

我在 Ubuntu 14.10 上使用 Apache2 运行 Magento 时遇到了这个问题

确保安装了 PHP 的 MySQL 模块：

```
dpkg --list | grep php5-mysql 
```

如果未列出，则需要安装它：

```
sudo apt-get install php5-mysql 
```

然后重启 Apache：

```
sudo service apache2 restart 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-24T05:03:39.630

在我们的例子中，我们收到这条消息是因为有人删除了“错误”文件夹——该站点工作正常，直到发生错误。

一旦我们恢复了文件夹（并确保 PHP 可以访问它），我们就会看到正常的 Magento 错误页面。如果您没有该文件夹，您可以[下载 Magento](https://www.magentocommerce.com/download)并将其从存档中解压缩。

# css - 如何将列表项显示为列？

> ID：12332528
> 
> 赞同：73
> 
> 时间：2012-09-08T16:35:41.587
> 
> 标签：css, list, listview, vertical-alignment

我正在尝试构建我的第一个响应式布局。我想根据宽度在垂直线上显示列表项。

```
<div style="height:800px;">
    <ul>
       <li>1</li>
       <li>2</li>
       <li>3</li>
       <li>4</li>
       <li>5</li>
       <li>6</li>
       <li>7</li>
    </ul>
</div> 
```

```
1 5
2 6
3 7
4

```

如果浏览器被调整大小，我希望它变成

```
1 4 7
2 5
3 6

```

有人能帮我吗？我已经尝试了几个小时，但我什么也得不到。我试过使用表格，但我也不能那样做。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-09-08T16:39:12.893

这可以很容易地使用**CSS3**列来完成。这是一个示例，HTML：

```
#limheight {
    height: 300px; /*your fixed height*/
    -webkit-column-count: 3;
       -moz-column-count: 3;
            column-count: 3; /*3 in those rules is just placeholder -- can be anything*/
}

#limheight li {
    display: inline-block; /*necessary*/
}
```

```
<ul id = "limheight">
 <li><a href="">Glee is awesome 1</a></li>
 <li><a href="">Glee is awesome 2</a></li>
 <li><a href="">Glee is awesome 3</a></li>
 <li><a href="">Glee is awesome 4</a></li>    
 <li><a href="">Glee is awesome 5</a></li>
 <li><a href="">Glee is awesome 6</a></li>
 <li><a href="">Glee is awesome 7</a></li>
 <li><a href="">Glee is awesome 8</a></li>
 <li><a href="">Glee is awesome 9</a></li>
 <li><a href="">Glee is awesome 10</a></li>
 <li><a href="">Glee is awesome 11</a></li>
 <li><a href="">Glee is awesome 12</a></li>    
 <li><a href="">Glee is awesome 13</a></li>
 <li><a href="">Glee is awesome 14</a></li>
 <li><a href="">Glee is awesome 15</a></li>
 <li><a href="">Glee is awesome 16</a></li>
 <li><a href="">Glee is awesome 17</a></li>    
 <li><a href="">Glee is awesome 18</a></li>
 <li><a href="">Glee is awesome 19</a></li>
 <li><a href="">Glee is awesome 20</a></li>
</ul>
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-04-15T13:08:20.133

如果您看一下以下示例 - 它使用固定宽度的列，我认为这是所要求的行为。

[http://www.vanderlee.com/martijn/demo/column/](http://www.vanderlee.com/martijn/demo/column/)

如果底部示例与顶部相同，则不需要 jquery 列插件。

```
ul{margin:0; padding:0;}

#native {
  -webkit-column-width: 150px;
  -moz-column-width: 150px;
  -o-column-width: 150px;
  -ms-column-width: 150px;
  column-width: 150px;

  -webkit-column-rule-style: solid;
  -moz-column-rule-style: solid;
  -o-column-rule-style: solid;
  -ms-column-rule-style: solid;
  column-rule-style: solid;
}
```

```
<div id="native">
  <ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
    <li>7</li>
    <li>8</li>
    <li>9</li>
    <li>10</li>
    <li>11</li>
    <li>12</li>
    <li>13</li>
    <li>14</li>
    <li>15</li>
    <li>16</li>
    <li>17</li>
    <li>18</li>
    <li>19</li>
  </ul>
</div>
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-28T13:10:01.013

谢谢你的这个例子，SPRBRN。它帮助了我。我可以建议使用基于上面给出的代码的 mixin：

```
//multi-column-list( fixed columns width)
  @mixin multi-column-list($column-width, $column-rule-style) {
  -webkit-column-width: $column-width;
  -moz-column-width: $column-width;
  -o-column-width: $column-width;
  -ms-column-width: $column-width;
  column-width: $column-width;

  -webkit-column-rule-style: $column-rule-style;
  -moz-column-rule-style: $column-rule-style;
  -o-column-rule-style: $column-rule-style;
  -ms-column-rule-style: $column-rule-style;
  column-rule-style: $column-rule-style;
 } 
```

使用：

```
 @include multi-column-list(250px, solid); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-03T10:12:48.490

根据需要创建一个包含尽可能多的列表元素的列表。然后将列表包含在一个 div 中，设置 style=column-width 和 style=column-gap，以匹配列表元素中的信息。不要设置样式=列。完全响应的列表，适应屏幕大小。不需要插件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-08T19:09:27.653

**使用 css 的 column-width 属性，如下所示**

```
<ul style="column-width:135px"> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-08T15:09:11.150

您可以按如下方式使用 flex：

```
.parent-container {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    max-height: 100px;
} 
```

根据需要调整 max-height 属性以生成其他列

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-29T04:24:13.697

**CSS：**

```
#cols {
    -moz-column-count: 3;
    -moz-column-gap: 20px;
    -webkit-column-count: 3;
    -webkit-column-gap: 20px;
    column-count: 3;
    column-gap: 20px;
} 
```

**HTML**

```
<div id="cols">
    <ul>
    <li>List item 1</li>
    <li>List item 2</li>
    <li>List item 3</li>
    <li>List item 4</li>
    <li>List item 5</li>
    <li>List item 6</li>
    <li>List item 7</li>
    <li>List item 8</li>
    <li>List item 9</li>
    <li>List item 10</li>
    <li>List item 11</li>
    <li>List item 12</li>
    <li>List item 10</li>
    <li>List item 11</li>
    <li>List item 12</li>

    </ul>
</div> 
```

**检查演示**：[https ://codepen.io/pen/](https://codepen.io/pen/)

# c++ - C++ 静态多数组包装器

> ID：12332529
> 
> 赞同：1
> 
> 时间：2012-09-08T16:35:52.480
> 
> 标签：c++, multidimensional-array, wrapper

旧的 c 风格的静态数组在作为参数传递或作为值返回时会非常麻烦。为此，新的 std::array 非常方便。

但是对于多数组， std:: 中没有任何内容，并且 boost::multi_array 不仅仅是静态分配的。

当然，我可以说，

`std::array<std::array<int,3>,2> my_array;`

但我发现有点长，它对应于倒置的内置声明

`int my_array[2][3];`

我只是想知道是否已经有一些“库”编码这样一个概念（二维或任意维）

（对于后者，如果我是正确的，必须使用一些可变参数模板来输入例如

```
multi_array<int,3,4> A;
multi_array<int,3,5,8> B;
multi_array<int,4,7,8,9,8,3> C; //this one being quite rare though 
```

)

编辑：对第一篇文章感到抱歉，我没有测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:36:07.920

这对您的应用程序来说可能有点矫枉过正，但我​​曾使用[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)库，并认为它的[Matrix 模板类系列](http://eigen.tuxfamily.org/dox/TutorialMatrixClass.html)可能适合您。一个例子：

```
Eigen::Matrix<float, 3, 2> a;
a(1,0) = 1.1;
a(0,1) = 17.5; 
```

**编辑 1：**哎呀，我不确定它是否支持 N 维矩阵。但对于二维的，我知道这很好。

我认为您可以使用 typedef，无论是与 Eigen 还是 with `std::array`，都可以使您的类型更具可读性。

# c# - 如果不活动，更改自定义 UserControl 的背景颜色？

> ID：12332531
> 
> 赞同：0
> 
> 时间：2012-09-08T16:36:26.767
> 
> 标签：c#, wpf, xaml, user-controls

我为我的应用程序创建了一些自定义 UserControl，如果未启用该控件，我想设置背景颜色。我见过几个使用过的线程，`<Style.Trigger>`但这不起作用。

这是我的一个控件的来源：

```
<UserControl
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
x:Class="IFCSControls.SubMenuPrint"
x:Name="SubMenuPrintButton"
d:DesignWidth="640" d:DesignHeight="480" Width="25" Height="25">
<UserControl.Resources>
    <Storyboard x:Key="MouseOver">
        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="path">
            <EasingColorKeyFrame KeyTime="0" Value="#FF929292"/>
            <EasingColorKeyFrame KeyTime="0:0:0.05" Value="#FF7CBDD8"/>
        </ColorAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Key="MouseOut">
        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="path">
            <EasingColorKeyFrame KeyTime="0" Value="#FF7CBDD8"/>
            <EasingColorKeyFrame KeyTime="0:0:0.05" Value="#FF929292"/>
        </ColorAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Key="LMBDown">
        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="path">
            <EasingColorKeyFrame KeyTime="0" Value="#FF7CBDD8"/>
            <EasingColorKeyFrame KeyTime="0:0:0.05" Value="#FF00B5FF"/>
        </ColorAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Key="LMBUp">
        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="path">
            <EasingColorKeyFrame KeyTime="0" Value="#FF00B5FF"/>
            <EasingColorKeyFrame KeyTime="0:0:0.05" Value="#FF7CBDD8"/>
        </ColorAnimationUsingKeyFrames>
    </Storyboard>
</UserControl.Resources>
<UserControl.Triggers>
    <EventTrigger RoutedEvent="Mouse.MouseEnter">
        <BeginStoryboard Storyboard="{StaticResource MouseOver}"/>
    </EventTrigger>
    <EventTrigger RoutedEvent="Mouse.MouseLeave">
        <BeginStoryboard Storyboard="{StaticResource MouseOut}"/>
    </EventTrigger>
    <EventTrigger RoutedEvent="UIElement.MouseLeftButtonDown">
        <BeginStoryboard Storyboard="{StaticResource LMBDown}"/>
    </EventTrigger>
    <EventTrigger RoutedEvent="UIElement.MouseLeftButtonUp">
        <BeginStoryboard Storyboard="{StaticResource LMBUp}"/>
    </EventTrigger>
</UserControl.Triggers>

<Grid x:Name="LayoutRoot">
    <Rectangle Fill="#FF666666" Margin="0,0,0,0.013" Stroke="Black" StrokeThickness="0"/>
    <Path x:Name="path" Data="M40.039037,46.667008 L40.039037,74.28701 C40.039037,74.28701 67.66371,74.28701 71.450127,74.28701 75.23661,74.28701 74.361614,71.375458 74.361614,71.375458 74.361614,71.375458 74.361614,52.938088 74.361614,49.990063 74.361614,47.042042 71.038874,46.667008 71.038874,46.667008 z M9.0112228,46.667008 C9.0112228,46.667008 5.6854935,47.042042 5.6854935,49.990067 5.6854935,52.938091 5.6854935,71.375458 5.6854935,71.375458 5.6854935,71.375458 4.8097115,74.28701 8.5995998,74.28701 12.389425,74.28701 40.038958,74.28701 40.038958,74.28701 L40.038958,46.667008 z M25.307034,30.218752 C26.784927,30.218752 39.628404,30.218752 40.029402,30.218752 L40.038983,30.218752 40.038983,36.531223 24.962935,36.531223 C24.962935,36.531223 24.024576,36.624981 24.024576,35.562477 24.024576,34.499973 24.024576,31.437496 24.024576,31.437496 24.024576,31.437496 23.805683,30.218752 25.307034,30.218752 z M40.039012,30.21875 L40.048584,30.21875 C40.449222,30.21875 53.281151,30.21875 54.757715,30.21875 56.257717,30.21875 56.039021,31.437494 56.039021,31.437494 56.039021,31.437494 56.039021,34.499973 56.039021,35.562477 56.039021,36.624981 55.101504,36.531223 55.101504,36.531223 L40.039012,36.531223 z M40.039012,19.656239 L40.048403,19.656239 C40.441516,19.656239 53.034081,19.656239 54.695231,19.656239 56.38275,19.656239 56.039021,20.937498 56.039021,20.937498 56.039021,20.937498 56.039021,23.999975 56.039021,24.937479 56.039021,25.874983 55.132747,25.999981 55.132746,25.999981 L40.039012,25.999981 z M25.369575,19.656239 C27.032221,19.656239 39.636117,19.656239 40.029583,19.656239 L40.038983,19.656239 40.038983,25.999983 24.931665,25.999983 C24.931665,25.999983 24.024576,25.874985 24.024576,24.937481 24.024576,23.999975 24.024576,20.937498 24.024576,20.937498 24.024576,20.937498 23.680538,19.656239 25.369575,19.656239 z M40.039012,9.4062387 L40.049126,9.4062387 C40.472377,9.4062387 54.024806,9.4062387 55.101504,9.4062387 56.195232,9.4062387 56.179611,10.343743 56.179611,10.343744 56.179611,10.343743 56.179611,13.374995 56.179611,14.359364 56.179611,15.343744 55.226474,15.312488 55.226474,15.312488 L40.039012,15.312488 z M24.962935,9.4062387 C26.040603,9.4062387 39.605228,9.4062387 40.02886,9.4062387 L40.038983,9.4062387 40.038983,15.312488 24.837853,15.312488 C24.837853,15.312488 23.883858,15.343744 23.883858,14.359364 23.883858,13.374996 23.883858,10.343744 23.883858,10.343744 23.883858,10.343744 23.868223,9.4062387 24.962935,9.4062387 z M40.039012,1.1927187E-06 L64.372036,1.1927187E-06 64.382071,0.00045084767 C64.480513,0.005978772 65.26804,0.075826826 65.26804,0.89599533 65.26804,1.7708251 65.26804,39.655991 65.26804,39.655991 65.26804,39.655991 65.268284,41.025982 66.63809,41.025982 68.007895,41.025982 78.133232,41.025982 78.133228,41.025982 78.133232,41.025982 79.810856,41.025742 80.020561,42.598698 L80.038982,42.88749 80.038982,80 40.039012,80 40.039012,40.811985 40.051685,40.811985 C40.581866,40.811985 57.556053,40.811985 58.632753,40.811985 59.72648,40.811985 59.50699,39.999512 59.50699,39.999512 59.50699,39.999512 59.50699,7.9992043 59.50699,6.4999697 59.50699,5.0007197 57.944992,4.9379918 57.944992,4.9379923 L40.039012,4.9687454 40.039012,4.9374997 z M15.684061,1.1927187E-06 L40.038983,1.1927187E-06 40.038983,4.9374997 40.038983,4.9687454 22.11689,4.9379923 C22.11689,4.9379918 20.553484,5.0007197 20.553484,6.4999697 20.553484,7.9992048 20.553484,39.999512 20.553484,39.999512 20.553484,39.999512 20.333797,40.811985 21.428511,40.811985 22.506178,40.811985 39.49564,40.811985 40.026298,40.811985 L40.038983,40.811985 40.038983,80 0.0030136108,80 0.0030136108,42.88749 0.021453857,42.598698 C0.23134613,41.025742 1.9104805,41.025982 1.9104805,41.025982 1.9104805,41.025982 12.044931,41.025982 13.415968,41.025982 14.787006,41.025982 14.787251,39.655991 14.787251,39.655991 14.787251,39.655991 14.787251,1.7708251 14.787251,0.89599533 14.787251,0.075826826 15.575487,0.0059787725 15.674017,0.00045084767 z M64.372009,0 L80.041996,0 C80.041996,1.8865438E-07 80.041996,41.408734 80.041996,42.934731 L80.038982,42.88749 80.038982,1.1927187E-06 z M0,0 L15.684088,0 0.0030136108,1.1927187E-06 0.0030136108,42.88749 0,42.934731 C0,41.408734 0,1.8865438E-07 0,0 z" Fill="#FF929292" Margin="0,0,0,0.013" Stretch="Fill" Stroke="Black" StrokeThickness="0" RenderTransformOrigin="0.5,-3.028"/>
</Grid> 
```

如果有人可以帮助我，那就太好了:)提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:40:02.793

这是我用来在启用或禁用用户控件时更改背景的代码。

我所做的是将样式（RectangleStyle1）和触发器添加到矩形。我从声明中删除了设置矩形的填充，因为这将覆盖样式尝试进行的任何更改。

将此样式添加到 UserControl.Resources

```
<Style x:Key="RectangleStyle1" TargetType="{x:Type Rectangle}">
  <Style.Triggers>
     <Trigger Property="IsEnabled" Value="True">
        <Setter Property="Fill" Value="#FF666666" />
     </Trigger>
     <Trigger Property="IsEnabled" Value="False">
        <Setter Property="Fill" Value="White" />
     </Trigger>
  </Style.Triggers>
</Style> 
```

将您的矩形声明替换为

```
<Rectangle x:Name="rectangle" 
               Margin="0,0,0,0.013"
               Stroke="Black"
               StrokeThickness="0" Style="{DynamicResource RectangleStyle1}" /> 
```

如果矩形仅用于背景，您可以删除矩形并使网格（LayoutRoot）不透明，并使用背景而不是填充来设置它的样式。

# python - 电话簿数据库帮助 - Python

> ID：12332532
> 
> 赞同：0
> 
> 时间：2012-09-08T16:36:53.897
> 
> 标签：python, database, python-2.7

我是编程新手，并且有一项我一直在工作的任务。我了解定义功能和许多基础知识，但此时我有点碰壁了。

我正试图弄清楚这一点，但还不真正理解“类”功能是如何工作的。我将不胜感激这方面的任何帮助；对一些 python 资源的任何帮助也可以降低如何/为什么使用类。

* * *

一段时间以来，您一直在工作中从事数据库项目。你的老板鼓励你用 Python 对数据库进行编程。您不同意，认为 Python 不是数据库语言，但您的老板坚持提供以下示例电话数据库的源代码。

他要求你做两件事：

1.  评估现有的源代码并对其进行扩展，使其对公司的经理有用。（您不需要 GUI 界面，只需处理数据库方面的工作：数据输入和检索 - 当然您必须让程序运行或正常工作

2.  他希望你批判性地评估 Python 作为数据库工具。

* * *

将下面的示例代码导入 Python IDLE 并对其进行增强、运行和调试。通过提供简单的数据输入和检索功能，使其成为更现实的数据库工具。

```
import shelve
import string

UNKNOWN = 0
HOME = 1
WORK = 2
FAX = 3
CELL = 4

class phoneentry:
    def __init__(self, name = 'Unknown', number = 'Unknown',
                    type = UNKNOWN):
            self.name = name
            self.number = number
            self.type = type

    #  create string representation
    def __repr__(self):
            return('%s:%d' % ( self.name, self.type ))

    #  fuzzy compare or two items
    def __cmp__(self, that):
            this = string.lower(str(self))
            that = string.lower(that)

            if string.find(this, that) >= 0:
                    return(0)
            return(cmp(this, that))

    def showtype(self):
            if self.type == UNKNOWN: return('Unknown')
            if self.type == HOME: return('Home')
            if self.type == WORK: return('Work')
            if self.type == FAX: return('Fax')
            if self.type == CELL: return('Cellular')

class phonedb:
    def __init__(self, dbname = 'phonedata'):
        self.dbname = dbname;
        self.shelve = shelve.open(self.dbname);

    def __del__(self):
        self.shelve.close()
        self.shelve = None

    def add(self, name, number, type = HOME):
        e = phoneentry(name, number, type)
    self.shelve[str(e)] = e

def lookup(self, string):
    list = []
    for key in self.shelve.keys():
        e = self.shelve[key]
        if cmp(e, string) == 0:
            list.append(e)

    return(list)

# if not being loaded as a module, run a small test

if __name__ == '__main__':
    foo = phonedb()
    foo.add('Sean Reifschneider', '970-555-1111', HOME)
    foo.add('Sean Reifschneider', '970-555-2222', CELL)
    foo.add('Evelyn Mitchell', '970-555-1111', HOME)

    print 'First lookup:'
    for entry in foo.lookup('reifsch'):
        print '%-40s %s (%s)' % ( entry.name, entry.number, entry.showtype() )
    print

    print 'Second lookup:'
    for entry in foo.lookup('e'):
        print '%-40s %s (%s)' % ( entry.name, entry.number, entry.showtype() ) 
```

我不确定我是否走在正确的轨道上，但这是我目前所拥有的：

```
def openPB():
    foo = phonedb()
    print 'Please select an option:'
    print '1 - Lookup'
    print '2 - Add'
    print '3 - Delete'
    print '4 - Quit'
    entry=int(raw_input('>> '))
    if entry==1:
            namelookup=raw_input('Please enter a name: ')
            for entry in foo.lookup(namelookup):
                    print '%-40s %s (%s)' % (entry.name, entry.number, entry.showtype() )
    elif entry==2:
            name=raw_input('Name: ')
            number=raw_input('Number: ')
            showtype=input('Type (UNKNOWN, HOME, WORK, FAX, CELL): \n>> ')
            for entry in foo.add(name, number, showtype):           #Trying to figure out this part
                    print '%-40s %s (%s)'% (entry.name, entry.number, entry.showtype() )
    elif entry==3:
            delname=raw_input('Please enter a name to delete: ')
            #                                                       #Trying to figure out this part
            print "Contact '%s' has been deleted" (delname)
    elif entry==4:
            print "Phone book is now closed"
            quit
    else:
            print "Your entry was not recognized."
            openPB()

openPB() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:03:23.737

[Learn Python the Hard Way](http://learnpythonthehardway.org/)、[Dive into Python](http://getpython3.com/diveintopython3/)和内置的[Python 教程](http://docs.python.org/tutorial/)对于开始学习 Python 的人来说都是非常好的资源。我开始学习时也使用了[Beginning Python 。](http://hetland.org/writing/beginning-python-2/)

# c# - C#线程的两个参数

> ID：12332534
> 
> 赞同：0
> 
> 时间：2012-09-08T16:37:07.223
> 
> 标签：c#, multithreading

我可以在线程中发送一个参数

```
class myThread
{
    Thread thread;
    public myThread(string name, int st)
    {
        thread = new Thread(this.Get_IP);
        thread.Name = name;
        thread.Start(st);//передача параметра в поток
        thread.Join();
    }
    void Get_IP(object st)
    {
        for (int ii = 0; ii < (int)st; ii++)
        {
            // smth
        }
    }
} 
```

但我需要发送其中两个，例如

```
for (int ii = (int)st; ii < (int)fi; ii++)
{
    // smth
} 
```

有一种方法可以将 2 个参数放在一起

```
void A(int a, int b) { } 
```

和

```
ThreadStart starter = delegate { A(0, 10); }; 
```

但是我怎样才能将它们发送到线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T16:43:40.720

您可以使用 lambda 表达式将更多参数传递给线程。像这样：

```
Thread thread = new Thread(()=>A(5,6)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T16:44:09.913

该`Thread.Start`方法接受一个`object`作为参数。您可以传递一个值数组。

```
thread.Start(new object[] { a, b }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T16:44:33.003

将这两个变量作为类中的成员：

```
class MyThread {

  private Thread _thread;
  private int _start, _finish;

  public MyThread(string name, int start, int finish) {

    _start = start;
    _finish = finish;

    _thread = new Thread(Get_IP);
    _thread.Name = name;
    _thread.Start();
    _thread.Join();
  }

  void Get_IP() {
    for (int ii = _start; ii < _finish; ii++) {
      // smth
    }
  }

} 
```

注意：`Join`在启动线程后立即调用对于使用线程来说毫无意义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T16:42:39.997

创建一个包含您需要传递的所有值的类，并将该类的实例传递给您的线程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-08T16:46:42.223

如果您需要发送 2 个参数，您可以将它们作为您喜欢的任何类型发送，但在启动新线程的方法中，您必须将其拆箱：

```
 void MyMethod()
    {           
        int a = 1;
        int b = 2;
        int[] data = new[] { a, b };
        Thread t = new Thread(new ParameterizedThreadStart(StartThread));
        t.Start(data);
    }

    private void StartThread(object obj)
    {
        int[] data = obj as int[];
        if (data != null)
        {
            int a = data[0];
            int b = data[1];
        }
    } 
```

注意：new Thread 调用的方法只能接受对象参数。这个对象里面的东西不是代码关心的，可以是任何东西，比如我把 2 个整数框起来。然后，您只需将对象拆箱为您的原始数据类型。

# c++ - 创建一个根据用户的时区告诉当前时间的程序（C++）

> ID：12332535
> 
> 赞同：1
> 
> 时间：2012-09-08T16:37:24.523
> 
> 标签：c++, timezone

我想开始自己创建程序，但是我的 c/c++ 技能仍然非常基础。

我真的很想创建一个根据您输入的时区告诉您时间的程序

例如：

> 请输入时区：东部时间
> 您的时区是格林威治标准时间 -5:00
> 您当前的时间是下午 12:19
> 您想试试其他时间吗？(y/n)

类似的东西。最终，我希望能够使用这些知识并将其应用到创建一些基本的免费应用程序，这些应用程序你会乱用并且看起来不错。最终，当我开始开发视频游戏或其他软件时，我希望能够将此（当然还有许多其他重要功能）应用到，

在这种情况下保存文件，他们最有可能通过它使用的机器应用时间戳，但它如何访问它？

我查看了 cplusplus 库中的各种函数，我遇到了一些函数

"localtime" "gmtime" 和 "time" (用于获取当前时间等)

但我想知道这些函数是如何产生的，过程，它们使用的公式。我什至如何去思考创造这样的东西。

我什至查看了时区是如何计算的，我得到了“每条经度线有 15 度的差异，每 15 度有 1 小时的差异” - Wiki Answers。

这只是我这几天的一些思考。

所以我计划使用 C++ 和主要基于 Windows 的机器来做到这一点（不确定它是否会有所不同，无论是 OSX 还是 Unix/Linux 或 Windows）

非常感谢所有帮助，

谢谢！

梅德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:03:08.653

您将需要查看这些功能的官方文档。在我强烈推荐用于开发的 UNIX 环境（例如 Windows 上的 Cygwin）中，您可以通过`man`系统获取任何 C 标准函数的文档，例如通过键入`man 3 time`或`man gmtime`. 在 Windows 上，至少据我所知，没有这样的文档系统，您只需搜索该函数的文档即可。

该`time()`方法在头文件中定义`<ctime>`（或者，对于纯 C，`<time.h>`）。它将返回自 以来经过的秒数`1970-01-01 00:00 UTC (GMT +0)`。这也称为 UNIX 时间。根据该值计算实际日期（年、月、日、小时、分钟、秒）是一项非常简单的任务（您只需要考虑闰年等）。如果您想知道不同时区的时间，例如`GMT +1`，只需添加.`3600 * <your timezone offset here>`返回的值即可`time()`。

该方法`time()`在您的 C 标准库中内部实现，或直接作为操作系统内核中的系统调用，它反过来从主板的实时时钟计算时间，该时钟由 CMOS 电池供电以跟踪时间即使您的 PC 已关闭并与电源断开连接。

您还需要确保始终使用标准 C 方法，而不是仅限 Windows 的方法，以确保代码的可移植性。

**编辑**

该`C++11`标准主要由最新版本的`gcc`和 Microsoft 编译器支持，还提供了一种新的标准获取时间方式：`std::chrono`. `std::chrono`支持微秒精度，而不是`time()`.

# emacs - 从 .Rnw（Sweave）文件中的某一行（向前搜索）打开 pdf 查看器

> ID：12332536
> 
> 赞同：1
> 
> 时间：2012-09-08T16:37:24.987
> 
> 标签：emacs, sweave, auctex

我正在使用 Ubuntu 12.04、Emacs 24 和 (pdf) 查看器 Okular 0.14。我希望能够从`.Rnw`（Sweave）文件中打开 Okular（并跳转到特定行）。通过使用

```
(setq TeX-view-program-list
      '(("Okular" "okular --unique %o#src:%n`pwd`/./%b"))) 
```

在 中`~/.emacs`，这已经适用于文件，即使在由 a和 chapter`.tex`组成的多文件项目中也是如此。通过使用（或）可以跳转到相应的行（此功能也称为前向搜索）。`master.tex``chapter.tex``C-c C-v``C-c C-c View`

我也想从`.Rnw`文件中进行前向搜索，其中`chapter.tex`替换为`chapter.Rnw`（Sweave）。但是，通过上述设置，`C-c C-c View`（从内部执行`chapter.Rnw`）给了我`"Output file "chapter.pdf" does not exist."`. 显然，`master.pdf`应该已经打开了。

我试图设置局部变量`chapter.Rnw`（这适用于纯`.tex`文档 on `C-c C-_`），但它似乎`.Rnw`在两种意义上都被文件忽略了：首先，`C-c C-_`不再插入任何内容，其次，on ，仍然尝试打开`C-c C-c`错误的文件`chapter.pdf`. 在 上，我看到了对 which 、和... 展开`C-c C-c View`的实际调用：`%o``%n``%b`

```
okular --unique chapter.pdf#src:8`pwd`/./chapter.Rnw 
```

如果我手动替换`chapter.pdf`为`master.pdf`，那么我可以跳转`chapter.Rnw`到`master.pdf`. 所以该命令基本上可以工作，但它没有从文件中找到正确的主`.Rnw`文件。

这是一个最小的例子：

章节.Rnw：

```
% patchDVI setup (see vignette)
\SweaveOpts{concordance=TRUE}
<<echo=FALSE>>=
.TexRoot <- "master.tex" 
@

foo bar foo bar
\clearpage
<<hist, echo=TRUE, fig=true>>=
X <- rnorm(50, mean=20, sd = 3)
hist(X)
@
foo bar foo bar

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "master.tex"
%%% End: 
```

master.tex:

```
\documentclass{scrbook}

\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[american]{babel}
\usepackage{blindtext}
\usepackage{amsmath}
\usepackage{hyperref}
\usepackage{fancyvrb}
\usepackage{Sweave}

\fvset{listparameters={\setlength{\topsep}{0pt}}}
\renewenvironment{Schunk}{\vspace{\topsep}}{\vspace{\topsep}}

\begin{document}

\input{chapter}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End: 
```

包装器.Rnw：

```
% patchDVI setup (see vignette)
<<echo=FALSE>>=
.SweaveFiles <- c("chapter.Rnw") 
@ 
```

我使用`Rscript -e "patchDVI::SweavePDF('chapter.Rnw', encoding='utf8')"`（所以使用 Duncan Murdoch 的 R 包 patchDVI 来与`.Rnw`文件同步）编译它。也可以编译整个项目，只需替换`chapter.Rnw`为`wrapper.Rnw`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:58:04.700

问题是文件`TeX-normal-mode`丢失了`.Rnw`，因此文件的前向搜索`.tex`不再起作用。要保留`TeX-normal-mode`，请使用：

```
(add-hook 'noweb-select-doc-mode-hook
      '(lambda ()
         (unless (boundp 'in-noweb-select-doc-mode-hook)
           (let* ((in-noweb-select-doc-mode-hook t)
              (deactivate-mark))
         (TeX-normal-mode t))))) 
```

# css - 文本下的边框但不穿过文本

> ID：12332537
> 
> 赞同：2
> 
> 时间：2012-09-08T16:37:32.600
> 
> 标签：css

我正在为我的杂志制作网页设计。现在，我正在尝试制作类似于 1996 年的标题，您可以在下图中看到。文本下方有边框，但文本周围有白色背景。任何人都可以帮助我做到这一点？:)

![单击此处查看图像。](../Images/a240a3c0172632b1a2141ae9fb17c7e1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T16:42:11.797

当然，试试这个：

**HTML**

```
<div class="heading">
  <h1>Heading Title</h1>
</div>​ 
```

**CSS**

```
.heading {
  text-align:center;
  border-bottom:2px solid #d5d5d5;
}
.heading h1 {
  display:inline-block;
  font-family:Georgia, "Times New Roman", Times, serif;
  font-weight:100;
  font-size:36px;
  position:relative;
  top:18px;
  background:#fff;
  padding:0 12px;
}
div,h1 {
    margin:0;
    padding:0;
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/jkhGx/)**

# php - PHP file_exists 返回 false

> ID：12332540
> 
> 赞同：1
> 
> 时间：2012-09-08T16:38:07.237
> 
> 标签：php, url-routing, file-exists

我正在尝试为我的项目编写自己的小型 MVC 框架，我可以直接加入并快速启动并运行，主要用于学习目的。每个请求都通过`index.php`具有以下代码的路由：

```
<?php

// Run application
require 'application/app.php';
$app = new App();
$app->run(); 
```

这是我的应用程序类：

```
<?php

class App {

    public function run() {
        // Determine request path
        $path = $_SERVER['REQUEST_URI'];

        // Load routes
        require_once 'routes.php';

        // Match this request to a route
        if(isset(Routes::$routes[$path])) {

        } else {
            // Use default route
            $controller = Routes::$routes['/'][0];
            $action = Routes::$routes['/'][1];
        }

        // Check if controller exists
        if(file_exists('controllers/' . $controller . '.php')) {
            // Include and instantiate controller
            require_once 'controllers/' . $controller . '.php';
            $controller = new $controller . 'Controller';

            // Run method for this route
            if(method_exists($controller, $action)) {
                return $controller->$action();
            } else {
                die('Method ' . $action . ' missing in controller ' . $controller);
            }
        } else {
            die('Controller ' . $controller . 'Controller missing');
        }
    }

} 
```

这是我的路线文件：

```
<?php

class Routes {

    public static $routes = array(
        '/' => array('Pages', 'home')
    );

} 
```

当我尝试加载根目录（`/`）时，我得到了这个：

> 控制器页面控制器丢失

由于某种原因，该`file_exists`功能看不到我的控制器。这是我的目录结构：

```
/application
    /controllers
        Pages.php
    /models
    /views
    app.php
    routes.php 
```

所以通过使用`if(file_exists('controllers/' . $controller . '.php'))`from `app.php`，它应该能够找到`controllers/Pages.php`，但它不能。

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:42:42.687

您正在为您的包含使用相对路径。随着您的应用程序的增长，它将成为一场噩梦。

我建议你

*   编写一个处理包含文件的自动加载器类。使用一些将命名空间/类名转换为路径的映射机制。
*   使用绝对路径。请参阅下面的调整代码。

例子：

```
// Run application
define('ROOT', dirname(__FILE__) );
require ROOT . '/application/app.php';
$app = new App();
$app->run(); 
```

然后：

```
// Check if controller exists
if(file_exists(ROOT . '/application/controllers/' . $controller . '.php')) {
    // Include and instantiate controller
    require_once ROOT. '/application/controllers/' . $controller . '.php';
    $controller = new $controller . 'Controller'; 
```

# javascript - 使用 Javascript、Jquery 或 HTML5 Canvas 进行无限缩放

> ID：12332542
> 
> 赞同：7
> 
> 时间：2012-09-08T16:38:12.417
> 
> 标签：javascript, jquery, html, zooming, infinite

我看过这个“ [The Scale of the Universe 2](http://htwins.net/scale2/) ”，我只想知道这是否可以使用 javascript 或 jQuery 或 HTML5 Canvas 来完成。

如果您单击一个项目（例如“人类”），则会在其旁边弹出一个信息。

如果有人有类似的问题，我在这里搜索了 3 天。但我只看到了类似谷歌地图的行为，你可以放大地图光标位置。

实际上，我想制作类似“时间轴”的效果，或者像 Mac OS X 上的“时间机器”恢复。

*   固定缩放位置。不像谷歌地图缩放，您可以在任何地方平移和缩放。
*   我可以将（例如“人类”）图像和文本放在 div 上吗？
*   是否有关于此的可用文章/教程？

选项：

*   Javascript
*   jQuery
*   HTML5 Canvas 和 CSS3 转换并将其滚动到 Z 轴，以便您可以放大/缩小。
*   Flash/Flex（好吧，我不想在 CPU 上使用大量资源，因为我需要它以大分辨率或全屏显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T17:39:13.113

没有无限变焦。但是，您可以在 HTML5 画布中放大/缩小 SVG 图像。

SVG 支持仿射变换。您可以在仿射变换中设置所需的缩放/平移并显示相关区域。行为/监听器可以用 Javascript 实现，SVG 可以在 HTML5 画布上呈现。

作为起点，您可以查看以下示例：[http ://www.html5canvastutorials.com/labs/html5-canvas-scaling-a-drawing-with-plus-and-minus-buttons/](http://www.html5canvastutorials.com/labs/html5-canvas-scaling-a-drawing-with-plus-and-minus-buttons/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-29T08:30:53.400

可以在 HTML 画布中实现无限缩放，这是我实现的概念证明的[源代码](https://github.com/furstenheim/infinite-mosaic)，您可以[在这里进行现场测试。](https://furstenheim.github.io/infinite-mosaic/)

实际上实现起来非常棘手，而且很可能您需要使用大小数。

[我遵循的方法使用与d3-zoom](https://github.com/d3/d3-zoom)相同的坐标空间。基本上，您有三个坐标，x、y 和 k。K 是变焦。如果 k 为 2，则意味着您将所有内容都翻了一番。

现在，如果你想做无限缩放，很容易达到`k = 64`，但这已经超出了 float64 精度，你会有很多伪影，在图像中翻译不流畅，或者你不缩放在你想要的地方。

避免这些伪影的一种方法是使用具有无限长度的坐标，例如 BigIntegers。为了使我的实现简单并与 d3-zoom 兼容，我使用了大小数，但我必须实现自己的[BigDecimals](https://github.com/furstenheim/small-decimal)库，整数部分基本上是无限精度，小数部分是 32 位精度。当然，您还需要调整[缩放库](https://github.com/furstenheim/d3-zoom)以支持 BigDecimals。此外，在 d3-zoom 的情况下，很多计算都是在初始坐标空间中完成的，`(k=1)`但浮点数的划分总是会出现错误，并且一旦你足够深，它也是可以感知的。为避免这种情况，您需要在本地进行所有计算。

坚持使用 d3-zoom 库可能听起来很麻烦，但是缩放 UX 实际上很棘手，特别是如果你将它们组合在不同的位置`k`，你需要考虑滚动、在手机上缩放、双击.. .

如果您想使用 SVG 转换，那么您需要伪造它。您将在它们几乎不可见时引入节点，允许缩放它们。但是，当它们太大而无法避免出现伪影时，很可能您还需要伪造它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T17:10:14.513

这在 HTML5 中是完全可行的。实际上，任何能够显示和缩放图像的系统都应该能够。缩放的不是一张大图像，而是大量图像被缩放（例如，最初的人类是一张图像，当您放大或缩小时，它会被缩放和移出）。这个想法很棒，但我真的看不出它有任何技术性能。只要您正确限制调整大小和位图的图像数量，它就应该保持不错的 FPS 速率。

# php - PHP MVC 不同的样式表，每个页面上的 javascript 文件

> ID：12332553
> 
> 赞同：1
> 
> 时间：2012-09-08T16:39:23.040
> 
> 标签：php, css

我的每个页面都共享 common.css 样式表，但几乎所有其他页面都有自己的自定义样式表，这对于 javascript 文件也是如此。

我的主要模板文件是这种格式（显然真正的模板文件中有更多的html）：

```
<html>
<head>
    <title><?php echo $this->data['title']; ?></title>
</head>
<body>
    <?php echo $this->data['content']; ?>
</body> 
```

我正在考虑这样做：

当我在控制器中创建视图对象时，我可以将所需的文件（在数组中）添加到视图对象中，以便可以在主模板中访问它们`$this->data['css']`，`$this->data['javascript']`并且我可以循环遍历主模板中的数组以输出它们在`<head>`页面中。

这是一种好的方法，还是违反了一些规则或不好的做法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:44:31.620

完全没问题，尽管我建议您自己编写一个`asset()`方法，以便在文件名 [eg `http://yoursite.com/web/`] 之前添加基本路径，以便您的代码更便携，部署更容易。

正如 Fluffeh 所说，考虑将整个样式压缩在一个文件中以获得更好的性能 - 例如检查[YUI 压缩](http://developer.yahoo.com/yui/compressor/)器。

# javascript - Adobe Air HTML/Javascript 在加载时调整窗口大小

> ID：12332556
> 
> 赞同：0
> 
> 时间：2012-09-08T16:39:52.697
> 
> 标签：javascript, html, air

> **可能重复：**
> [Adobe Air SDK 在页面加载时调整窗口大小](https://stackoverflow.com/questions/12378574/adobe-air-sdk-resize-window-on-page-load)

我正在使用 adobe air sdk 制作基于 html 的桌面 adobe air 应用程序。我不太擅长 javascript 和 html，所以有人可以给我一些关于如何在页面加载时将应用程序窗口的大小调整为特定像素高度和宽度的代码吗？我知道尺寸是多少，窗口需要适合 Flash 文件和下面的 html 按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T02:24:10.940

Adobe AIR 应用程序使用一个配置文件（大多数 AIR 开发人员通常将其命名为“application.xml”），其中指定了应用程序设置。您可以在 Adob​​e AIR SDK 文件夹中找到此配置文件的示例：

1.  “samples”文件夹中的“descriptor-sample.xml”，以及
2.  “templates\air”文件夹中的“descriptor-template.xml”

在此文件中，您将找到标签“initialWindow”，其下是标签“width”和“height”。您将使用这些来指定应用程序窗口的初始页面加载大小。

还有其他值得注意的设置，上面的 #2 将为您提供有关用于配置 Adob​​e AIR 应用程序的其他标签的详细信息。

# css - 是否可以将 box-shadow 与渐变相匹配？

> ID：12332560
> 
> 赞同：0
> 
> 时间：2012-09-08T16:40:49.073
> 
> 标签：css

在一个盒子上我有一个阴影：

```
box-shadow: 10px 10px 5px rgba(50, 50, 50, 0.75); 
```

这会在框的右侧产生*渐变。*

我想将该特定渐变匹配为另一个框的背景，但我现在不知道如何将框阴影的渐变模拟为常规阴影。

我能想到的最接近的是

```
-moz-linear-gradient(0deg, rgba(50, 50, 50, 0.75) 50%, transparent 100%) 
```

但它仍然不完全匹配。

# postgresql - 远程连接到 Postgresql 超时

> ID：12332561
> 
> 赞同：1
> 
> 时间：2012-09-08T16:40:52.547
> 
> 标签：postgresql, amazon-ec2

我有两个 EC2 实例，其中一个需要将大量数据插入到另一个存在于另一个上的 Postgresql 数据库中。顺便说一句，它是开放街道地图数据，我正在使用该`osm2pgsql`实用程序插入数据，不确定这是否相关，我不这么认为。

对于较小的插入，一切都很好，但对于非常大的插入，大约 15 分钟后会出现超时，操作失败并显示：

`COPY_END for planet_osm_point failed: SSL SYSCALL error: Connection timed out`

这个超时是由 Postgresql、Ubuntu 还是 AWS 强制执行的？不太确定从哪里开始故障排除。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:04:33.140

可能是重新协商造成的。检查日志，也许调整 `ssl_renegotiation_limit = 512MB`（默认） [将其设置为零将禁用协商](http://www.postgresql.org/docs/9.1/static/runtime-config-connection.html)

# jquery - 延迟一个 jQuery 插件的初始化，直到另一个完成

> ID：12332562
> 
> 赞同：0
> 
> 时间：2012-09-08T16:40:56.427
> 
> 标签：jquery, responsive-design, flexslider

我在一个——你猜对了——响应式项目上使用了[Response JS](http://responsejs.com/)和[Flexslider 。](http://www.woothemes.com/flexslider/)根据视口的大小，该站点的幻灯片分页器将位于 2 个不同的位置，我正在使用 Response JS 填充该代码。但是，问题在于 Flexslider 在 Response JS 填充寻呼机代码之前进行了初始化，因此 Flexslider 无法找到它应该使用的寻呼机。

有没有办法仅在 Response JS 在页面上完成其魔力后才初始化 Flexslider 插件？

我的标记是这样的：

```
<body data-responsejs='{
    "create": [
    { "breakpoints": [0,320,481,641,961], "mode": "markup", "prefix": "r" }
    ]}'
>
    <div data-r961="
        <ul class=&quot;flexslider-pager&quot;>
            <li><img src=&quot;whatever.jpg&quot; alt=&quot;whatever&quot;></li>
            <li><img src=&quot;whatever.jpg&quot; alt=&quot;whatever&quot;></li>
            <li><img src=&quot;whatever.jpg&quot; alt=&quot;whatever&quot;></li>
        </ul>
    "></div>

    <div class="flexslider"><!-- Slideshow Here --></div>

    <div data-r481="
        <ul class=&quot;flexslider-pager&quot;>
            <li><img src=&quot;whatever.jpg&quot; alt=&quot;whatever&quot;></li>
            <li><img src=&quot;whatever.jpg&quot; alt=&quot;whatever&quot;></li>
            <li><img src=&quot;whatever.jpg&quot; alt=&quot;whatever&quot;></li>
        </ul>
    "></div>

    <script src="jquery.js"></script>
    <script src="response.js"></script>
    <script src="flexslider.js"></script>
    <script>
        $('.flexslider').flexslider({
            manualControls: '.flexslider-pager li',
        });
    </script>
</body> 
```

我尝试将 jQuery 和 Response JS 添加到页面的头部，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:35:50.100

所以我想出了一个无疑是极其丑陋的解决方案：

```
function runPlugins(){
    $('.flexslider').flexslider();
};

Response.create({ 
    mode: 'markup', 
    prefix: 'r', 
    breakpoints: [0,600,820,901] 
}); 

jQuery(runPlugins); 
```

我从 body 标记中取出了 Response JS 数据属性，并改用了 Response.create 方法。然后有人建议我让插件调用一个函数，然后在创建响应数据属性后调用该函数。我不知道它为什么会起作用，但确实如此。

# grails - 是否使用 @Transactional 禁用 grails 默认事务管理

> ID：12332568
> 
> 赞同：6
> 
> 时间：2012-09-08T16:41:31.463
> 
> 标签：grails, transactions

根据 grails 文档，服务默认是事务性的。`Transactional`但是，我知道您可以通过使用该属性对事务进行更细粒度的控制。

如果我有一项服务，例如

```
class MyService {

    @Transactional(...config...)
    def method1() { }

    def method2() { }

} 
```

我的理解是，在这种情况下，`method1`将是事务性的，但`method2`不会。

如果我有

```
class MyService {

    def method1() { }
    def method2() { }

} 
```

然后两者都`method1`将`method2`是事务性的。

它是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T16:44:37.063

如果您希望您的服务作为事务性设置为 true 事务性属性（这不是强制性的，但如果您想明确该服务是事务性的）：

```
class MyService {

    static transactional = true

    def method1() { }
    def method2() { }

} 
```

如果您不想：

```
class MyService {

    static transactional = false

    @Transactional(...config...)
    def method1() { }

    def method2() { }

} 
```

另一个例子（设置事务属性不是强制性的，但有助于清楚 - 如果你不是唯一编码这个）：

```
import org.springframework.transaction.annotation.Transactional
class BookService {

    @Transactional(readOnly = true)
    def listBooks() {
        Book.list()
    }

    @Transactional
    def updateBook() {
        // â€¦
    }

    def deleteBook() {
        // â€¦
    }
} 
```

您可以做的另一件事是注释整个类并覆盖您需要不同的方法：

```
import org.springframework.transaction.annotation.Transactional
@Transactional
class BookService {

    @Transactional(readOnly = true)
    def listBooks() {
        Book.list()
    }

    def updateBook() {
        // â€¦
    }

    def deleteBook() {
        // â€¦
    }
} 
```

希望这可以帮助 ;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-11T05:23:33.970

您可以使用关闭域禁用 Grails 默认事务管理来`withTransaction`手动管理您的事务，如下所示：

```
Account.withTransaction { status ->
    try {
        //write your code or business logic here
    } catch (Exception e) {
        status.setRollbackOnly()
    }
} 
```

如果抛出异常，则事务将被回滚。

# mysql - MySQL模式匹配字符异常

> ID：12332569
> 
> 赞同：0
> 
> 时间：2012-09-08T16:41:43.403
> 
> 标签：mysql, pattern-matching

我正在尝试比较两个查询的结果，一个获取从外部向我的 Asterisk 服务器发出的呼叫的呼叫 ID（10 位），另一个获取连接到服务器的呼叫 ID（11 位）。出站呼叫在其号码前附加一个“1”。目前我正在使用如下语句：

```
select data2, from_unixtime(time_id) day from queuemetrics.queue_log
where time_id > '1346475600' and (data2, time_id) in
(select dst, unix_timestamp(calldate) from asteriskcdrdb.cdr
where calldate > '2012-09-01' and lastdata like <blocked for privacy>)
order by day; 
```

`data2`是包含 10 位数字的列，`dst`包含 11 位数字。有没有办法只匹配列的第 2-11 个字符？跳过第一个？显然 a `LIKE`or`RLIKE`会有用，但我确实需要维护嵌套查询才能使其正常工作。任何帮助都会很棒。另外，不要注意我对`from_unixtime`and的奇怪用法`unix_timestamp`。我正在尝试确定是否需要以相同格式的时间来进行搜索。不重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:08:00.430

为什么不从您的 dst 字段中删除前导数字？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:58:39.483

您可以使用[RIGHT](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_right)提取字符串最右边的字符：

```
RIGHT(your_field_here, 10); 
```

如果您想在字符串的开头和结尾忽略一些字符，那么您可以使用[SUBSTR](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substr)：

```
SUBSTR(your_field_here, 2, 10); 
```

您的查询将是：

```
SELECT data2, FROM_UNIXTIME(time_id) day FROM queuemetrics.queue_log
WHERE time_id > '1346475600' AND (data2, time_id) IN
(SELECT SUBSTR(dst, 2, 10), UNIX_TIMESTAMP(calldate) FROM asteriskcdrdb.cdr
WHERE calldate > '2012-09-01' AND lastdata LIKE <blocked for privacy>)
ORDER BY day; 
```

# php - 未实现的抽象方法是设计缺陷吗？

> ID：12332571
> 
> 赞同：1
> 
> 时间：2012-09-08T16:41:52.163
> 
> 标签：php, oop

这是我的数据映射模式（简化）的类结构示例。请注意，save 和 find 方法在技术上是在具体类中实现的，但还没有做任何事情。有什么替代方法可以避免这种情况？我目前使用的一个选项是实现接口的抽象 DataMapperAbstract 类，为每个方法抛出异常，然后所有具体的数据映射器只需要实现它们使用的函数 - 它只是闻起来很糟糕。就个人而言，我曾想过为每个方法（DataMapper_FindInterface、DataMapper_SaveInterface、DataMapper_DeleteInterface 等）创建一个单独的接口，但似乎有点臭。

```
 interface DataMapperInterface
    {
            public function find($params);
            public function save($object);
            public function delete($object);
    }

    class DataMapper_User implements DataMapperInterface
    {                               
            public function find($params)
            {                       
                    //Execute code to retrieve data from data source
                    return someDataRetrievalMethod($params);
            }

            public function save($object)
            {
                    throw new Exception('Method not yet implemented.');
            }

            public function delete($object)
            {
                    throw new Exception('Method not yet implemented.');
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:59:01.840

只要您不在实现所有方法的类中，就可以使类抽象。

抽象类不能被实例化，必须有另一个类通过实现来扩展抽象类。

所以到目前为止你的代码看起来像这样：

```
 interface DataMapperInterface
    {
            public function find($params);
            public function save($object);
            public function delete($object);
    }

    abstract class DataMapper_User implements DataMapperInterface
    {                               
            public function find($params)
            {                       
                    //Execute code to retrieve data from data source
                    return someDataRetrievalMethod($params);
            }

    } 
```

# java - Java如何决定三元条件运算符表达式的类型？

> ID：12332574
> 
> 赞同：3
> 
> 时间：2012-09-08T16:42:03.347
> 
> 标签：java, ternary-operator

谁能解释一下？

```
public class Test {
    public static void main(String[] args) {
        char c = 'A';
        int i = 0;
        boolean b = true;

        System.out.println(b ? c : i);
        System.out.println(b ? c : (char)i);

        System.out.println(b ? c : 0);
        System.out.println(b ? c : (char)0);
    }
} 
```

**输出：**

> 65
> A
> A
> A

从我站的地方看，它确实看起来很奇怪。我本来希望只有`A`s 打印出来。而且：当我替换输出变化时怎么`0`会`i`？对于 的所有值，输出似乎都相同`i`，而不仅仅是`0`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T16:43:56.383

当您要选择苹果和橙子时，您必须宣传其中一个（较小的那个）：

```
public class Test {
  public static void main(String[] args) {
    char c = 'A';
    int i = 0;
    boolean b = true;

    System.out.println(b ? c : i);       // Promoted to int ---> 65
    System.out.println(b ? c : (char)i); // Not promoted ------> A (char vs char)

    System.out.println(b ? c : 0);       // Not promoted vs null/0
    System.out.println(b ? c : (char)0); // Not promoted vs char
  }
} 
```

如果有一个变量类型，`nibble`那么你在选择时不会得到不同的输出。

```
System.out.println(b ? c : (nibble)i); // I know there is no nibble. :)
                                       // nibble promotes to char.
                                       // I know... there is no nibble.
                                       //so, output is A 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T16:47:57.693

来自 Java 语言规范，关于类型转换和提升（参见粗体文本）

> 用 Java 编程语言编写的每个表达式都有一个类型，可以从表达式的结构以及表达式中提到的文字、变量和方法的类型推导出来。但是，可以在表达式类型不合适的上下文中编写表达式。在某些情况下，这会导致编译时出错。在其他情况下，上下文可能能够接受与表达式类型相关的类型；**为方便起见，Java 编程语言不要求程序员显式指示类型转换，而是执行从表达式类型到其周围上下文可接受的类型的隐式转换。**

您在编译时发生的类型转换解释了输出。

`i`在涉及的情况下，`c`已提升为整数。

在涉及的情况下`0`，它被视为性格，因此`c`仍然是性格。

# jquery - Jquery隐藏/显示搞砸了

> ID：12332575
> 
> 赞同：0
> 
> 时间：2012-09-08T16:42:04.413
> 
> 标签：jquery

大家好，我又遇到了脚本问题。我正在为帖子中的成员个人资料数据进行 jQuery 显示/隐藏。请访问[http://www.pimpkings.com/t3-what-up-everyone](http://www.pimpkings.com/t3-what-up-everyone)看看我在说什么，我将代码留在上面，这样你就可以看到它在做什么。

每次我点击一个人显示/隐藏它会打开每个人，我只希望它在用户请求时打开 1 个人。

代码是-

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
$(".slidingDiv").hide();
 $(".show_hide").show();
    $('.show_hide').click(function(){

$(".slidingDiv").slideToggle();

});

});
</script> 
```

那么html编码就是

```
<span class="show_hide" style="cursor:pointer;color:#c0c0c0;">Show/hide</span>
<div class="slidingDiv">
                              <!-- BEGIN profile_field -->
                            <center>    {postrow.displayed.profile_field.LABEL} <center/>
                            <center>  {postrow.displayed.profile_field.CONTENT} <center/>
                            <center>  {postrow.displayed.profile_field.SEPARATOR}<center/>
                            <!-- END profile_field -->
                            <center>{postrow.displayed.profile_field.LABEL}<center/>
                            <center>Online Status<center/><br/>
                            <center>{postrow.displayed.ONLINE_IMG}<center/>
                                        {postrow.displayed.POSTER_RPG} <br />

                            <!-- BEGIN contact_field -->
                             <br/> <br/>
                            {postrow.displayed.PROFILE_IMG} {postrow.displayed.PM_IMG}  
                            {postrow.displayed.EMAIL_IMG} {postrow.displayed.contact_field.CONTENT}
                            <!-- END contact_field -->
                              <span class="show_hide" style="cursor:pointer;color:#c0c0c0;">hide</span></div>
                            </span> 
```

任何人都可以帮助找出另一个选择器，这样它就不会一次全部打开吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:50:21.710

尝试这个：

```
$(document).ready(function() {
    $(".slidingDiv").hide();
    $(".show_hide").show();
    $('.show_hide').click(function() {
        $(this).next(".slidingDiv").slideToggle();
    });
});​ 
```

请注意，您可能应该将配置文件末尾的“隐藏”链接的类更改为其他内容（例如，只是隐藏），以便您可以更轻松地使用 jQuery 定位它来隐藏配置文件。

哦，还有一件事，这个`<center>`标签很久以前就被弃用了。改为使用 CSS 居中。

**[jsFiddle 示例](http://jsfiddle.net/j08691/gswn9/)**

# html - 列表项之间的 DIV

> ID：12332578
> 
> 赞同：1
> 
> 时间：2012-09-08T16:42:25.697
> 
> 标签：html, css

**如何在两个列表项之间放置一个 div，并在两侧添加边距？**

这是我想要实现的布局：[链接到图像](http://grab.by/fWPy)

下面是我试图用来实现这一点的代码。

```
<div id="logo">
  Logo Image
</div>

<div id="navigation">
  <ul>
   <li>Item 1</li>
   <li>Item 2</li>
   <li>Item 3</li>
   <li>Item 4</li>
  </ul>
</div> 
```

有没有办法在不向第二个和第三个列表项添加单个样式的情况下做到这一点？这是我能想到的唯一方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:44:52.310

您可以尝试使用此代码

```
<ul>
        <li>
            <div>test</div>
        </li>
        <li>
            <div>test</div>
        </li>
        <li class="specific">
            <div>test</div>
        </li>
         <li>
            <div>test</div>
        </li>
</ul> 
```

将css调整为div

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T16:52:52.313

摆脱`<div>`，并在其类中提供`<li>`您想要的：`<div>`

[http://jsfiddle.net/charlescarver/jTYnW/](http://jsfiddle.net/charlescarver/jTYnW/)

```
<div id="navigation">
  <ul>
   <li>Item 1</li>
   <li>Item 2</li>
   <li id="logo">
        Logo Image
   </li>
   <li>Item 3</li>
   <li>Item 4</li>
  </ul>
</div>​ 
```

# c++ - 如何从 Windows 中的音频插孔获取输入？

> ID：12332581
> 
> 赞同：1
> 
> 时间：2012-09-08T16:42:43.187
> 
> 标签：c++, c, audio, input

我正在尝试创建一个 Windows 应用程序，该应用程序将允许具有它们的耳塞/耳机（例如[诺基亚 Purity](http://www.puritybymonster.com/en/#page_in-ear)耳塞）上的控件在 Windows 上工作。我认为有两种方法可以做到这一点：

1.  尝试从音频输出插孔获取某种输入
2.  将耳塞插入麦克风插孔，然后尝试通过那里播放音乐（同时观察麦克风的输入以了解按钮的作用）。

所以，我从尝试第一个选项开始，这引出了我的问题。有没有办法从 Windows 中的音频插孔获取任何类型的原始输入？有一个更好的方法吗？我想使用 C#，但如果只能使用 C/C++ 或其他语言，那也可以。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:06:43.923

没有这种可能性。PC 音频插孔只有两个通道（立体声）。带有附加按钮的耳机使用两个以上的通道来处理它们。

# php - 我所有的内容都被渲染/输出

> ID：12332590
> 
> 赞同：5
> 
> 时间：2012-09-08T16:43:49.650
> 
> 标签：php, wordpress

所以这是我的第一篇文章！我刚刚创建了帐户，但我总是在这里查看以解决我的问题。我发现其他人有同样的问题，但解决方案对我不起作用。

因此，我在 .PHP 文件中将所有内容正确放置在 head 标签上，但由于某种原因，它进入了 body 标签，而我的第一个标签为空。它添加了一个奇怪的“

"（文本空间）在正文的开头。它可能是什么？

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title><?php bloginfo('name'); ?> <?php if ( is_single() ) { ?> <?php } ?> <?php wp_title(); ?></title>
<meta name="generator" content="WordPress <?php bloginfo('version'); ?>">
<link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>" type="text/css" media="screen">
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="<?php bloginfo('rss2_url'); ?>">
<link rel="alternate" type="text/xml" title="RSS .92" href="<?php bloginfo('rss_url'); ?>">
<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="<?php bloginfo('atom_url'); ?>">
<link rel="pingback" href="<?php bloginfo('pingback_url'); ?>">
</head>
<body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-25T20:16:15.543

简单的解决方案

1.  使用 Notepad++ 打开包含文件的头部
2.  单击编码，选择在没有BOM的UTF-8中编码它解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T16:50:35.947

这很可能是由于将某些文本内容引入头部区域的错误引起的。

很难确定是在哪里给出了 PHP 而不是生成的 HTML，但[验证器](http://validator.w3.org/)应该会选择它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-15T19:40:07.230

这个问题的简单解决方案是，首先使用（NotePad++ Windows 应用程序或任何用于编程 PHP 文件的软件）打开 header.php，然后移动到菜单（编码器）并设置（编码器 UTF-8（无 BOM）） .

我以前也有同样的问题，但我试图通过删除 JS 和 CSS 文件来解决它，但问题仍然没有解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-25T20:19:03.233

*（代表 OP 发布。）*

固定的。问题是文件带有 BOM（字节顺序标记）。在没有 BOM 的情况下重新保存所有文件解决了它。

# android - android - 具有相同宽度的视图水平放置而不填满整个屏幕

> ID：12332592
> 
> 赞同：1
> 
> 时间：2012-09-08T16:44:01.093
> 
> 标签：android, layout

我正在尝试创建菜单布局，我可以将按钮放置在两个具有相同宽度的列中。
我不想拉伸按钮来填满所有屏幕（除非有长标签）。
我希望所有按钮都具有相同的宽度——标签最长的按钮的宽度。
我正在一个水平线性布局中尝试两个垂直线性布局。
我发现的所有解决方案都建议将相同的 layout_weight 用于垂直线性布局，将 layout_width=fill_parent 用于水平布局，这会迫使按钮占据整个屏幕宽度。
我的问题有什么通用的解决方案吗？

这就是我所期望的 - [https://dl.dropbox.com/u/2751770/android-layout1.PNG](https://dl.dropbox.com/u/2751770/android-layout1.PNG)
这就是常见解决方案的样子 -[https://dl.dropbox.com/u/2751770/android-layout2.PNG](https://dl.dropbox.com/u/2751770/android-layout2.PNG)

这是我用作通用解决方案的代码：

```
<LinearLayout style="@style/menuLayout"
              android:layout_width="match_parent" 
              android:orientation="horizontal"
              android:baselineAligned="false">
    <LinearLayout android:orientation="vertical"
                  android:layout_weight="1"
                  android:layout_width="0dp"
                  android:layout_height="wrap_content">
        <Button style="@style/menuButton"
                android:text="Title 1"/>
        <Button style="@style/menuButton"
                android:text="Title 2"/>
    </LinearLayout>
    <LinearLayout android:orientation="vertical"
                  android:layout_weight="1"
                  android:layout_width="0dp"
                  android:layout_height="wrap_content">
        <Button style="@style/menuButton"
                android:text="Title 3"/>
        <Button style="@style/menuButton"
                android:text="Long title 4"/>
    </LinearLayout>
</LinearLayout> 
```

款式：

```
<style name="menuLayout">
    <item name="android:layout_gravity">center</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_width">wrap_content</item>
</style>
<style name="menuButton">
    <item name="android:layout_width">match_parent</item>
    <item name="android:layout_height">match_parent</item>
    <item name="android:paddingLeft">30dp</item>
    <item name="android:paddingRight">30dp</item>
    <item name="android:layout_margin">5dp</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:37:14.183

您正在设置样式“menu_layout”中的宽度，并且再次在代码的第二行中设置宽度。删除其中一个。并尝试`android:weightSum="1"`在 parent中使用`LinearLayout`，然后`android:layout_weight="0.5"`在 each 中使用`LinearLayout`。

# javascript - IE7/8 Google Maps API V3 中的参数无效

> ID：12332605
> 
> 赞同：1
> 
> 时间：2012-09-08T16:44:55.953
> 
> 标签：javascript, internet-explorer, google-maps, google-maps-api-3

我已经被这个错误消息困扰了几天，我希望我能得到一些评论或帮助。这是错误消息：

> SCRIPT87：参数无效。ViewportInfoService.GetViewportInfo?1m6&1m2&1d77.283613&2d-109.22812899999997&2m2&1d77.283614&2d-109.22812799999997&2u2&4sen-US&5e0&6sm%40184000000&7b0&8e0&9b0&callback= *xdc* ._g999fe&token=82683, line 1 character 18

在 IE7/8 文档模式下进行 javascript 调试时，我可以在文件中看到 eval 代码错误位置：

> SCRIPT87：参数无效。eval 代码 (5)，第 9 行字符 180

并且突出显示了 eval5.js 文件的以下部分：

> 函数 br(a,b){2==Z[tc]?a.nodeValue=b

这仅在页面执行 AJAX 回发以刷新地图时触发，而不是在我最初以 IE7/8 文档模式加载地图时触发。*当我在 FF 或 Chrome 甚至 IE9 上运行页面时，我也没有收到任何错误。*

我已将 AJAX 调用生成的 Java 脚本放在 JSFiddle 上以获得更多见解。（http://jsfiddle.net/SVwr7/）。

我已经调查了代码 js 代码生成和注释并检查了错误，但我无法在错误部分归零。根据其他“IE-7/8 中与谷歌地图相关的无效参数”，我检查了：

1）尾随逗号 2）任何语法错误等。

谢谢。

# javascript - 将“this”传递给 .on 函数似乎不起作用

> ID：12332607
> 
> 赞同：1
> 
> 时间：2012-09-08T16:44:56.437
> 
> 标签：javascript, jquery

我有一个功能：

```
function test(e){
            $('.movie').find('.moreInfo').removeClass('moreInfoShow');
            e.parent().find('.moreInfo').addClass('moreInfoShow');
            $("#movieBox").isotope('reLayout');

            e.parent().find('.moreInfo').css("opacity", "0");
            e.parent().find('.moreInfo').animate({opacity: 1}, 500);
        } 
```

由以下方式调用：

```
$("#movieBox").on('mouseover', '.moviePoster', function(event){test($(this));}); 
```

问题是我希望在页面加载时调用该函数。我需要将“this”传递给函数，但我没有让它工作的运气。

这是我期望的工作：

```
test($(".moviePoster").first()); 
```

（所有代码都在“$(document).ready”函数中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:53:36.560

无小提琴：

改变这个：

```
$("#movieBox").on('mouseover', '.moviePoster', function(event){test($(this));}); 
```

到

```
$("#movieBox").on('mouseover', '.moviePoster', test); 
```

然后测试函数内部的 $(this) 应该指向触发事件的 jQuery 对象。

使用“test($(this))”在回调中调用测试函数将立即执行该函数，而不是在触发事件时。

更新：

完成此操作后，您当然需要在页面加载时触发 mouseover 事件。请参阅 Jashwant 关于如何做到这一点的评论。

更新我错了。

```
function(event){test($(this));} 
```

当然不会立即触发回调函数。只有在这样的情况下才会发生这种情况：

```
$("#movieBox").on('mouseover', '.moviePoster', test($(this))); 
```

对不起！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:52:10.270

`mouseover`如评论中所述，在页面加载时触发事件。

```
$("#movieBox").find('.moviePoster').trigger('mouseover'); 
```

[参考](http://api.jquery.com/trigger/)

# cuda - GPU 与 FPGA 的 OpenCL

> ID：12332609
> 
> 赞同：3
> 
> 时间：2012-09-08T16:45:14.447
> 
> 标签：cuda, opencl, fpga

我最近阅读了有关 FPGA 与 GPU 的 OpenCL/CUDA 据我了解，FPGA 在功率标准方面胜出。我在一些文章中找到了对此的解释：

> 由于只有芯片的配置部分处于活动状态，可重构设备的峰值功耗可以低得多

基于上面所说，我有一个问题 - 这是否意味着，如果某些 CU [Compute Unit] 不执行任何工作项，它仍然会消耗电力？（如果是的话 - 它为什么会消耗电力？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:29:36.797

是的，空闲电路仍然消耗功率。它不会消耗那么多，但它仍然会消耗一些。其原因在于晶体管如何工作，以及 CMOS 逻辑门如何消耗功率。

传统上，CMOS 逻辑（所有现代芯片上的类型）仅在切换状态时才消耗功率。与之前一直消耗功率的技术相比，这具有非常低的功率。即便如此，每次出现时钟边沿时，即使没有工作可做，某些逻辑也会改变状态。时钟频率越高，使用的功率就越多。GPU 往往具有高时钟频率，因此它们可以完成大量工作；FPGA 往往具有低时钟速率。这是第一个影响，但可以通过不对没有工作的电路进行计时来缓解（称为“时钟门控”）

随着晶体管的尺寸越来越小，切换时使用的功率量变得越来越小，但其他影响（称为泄漏）变得更加显着。现在我们处于泄漏功率非常显着的地步，它乘以设计中的门数。复杂的设计具有高泄漏功率；简单的设计具有低泄漏功率（在非常基本的术语中）。这是第二个效果。

因此，对于简单的任务，使用小型专用低速 FPGA 可能比大型复杂但高速/通用 CPU/GPU 更节能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T20:27:24.597

与往常一样，这取决于工作量。对于原生 GPU 硬件（例如浮点、纹理过滤）良好支持的工作负载，我怀疑 FPGA 能否与之竞争。有趣的是，我听说 FPGA 具有竞争力或更好的图像处理工作负载。这是有道理的，因为 GPU 并未针对小整数进行优化。（因此，GPU 通常与运行 SSE2 优化图像处理代码的 CPU 相比没有竞争力。）

至于功耗，对于 GPU 而言，合适的工作负载通常会使所有执行单元保持忙碌状态，因此这是一个全有或全无的命题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-04T03:13:42.507

根据我对 FPGA 及其工作方式的研究，这些设备可以设计为非常节能，并且可以针对一项特殊任务（例如算法）进行微调，并使用尽可能少的资源（因此能耗更低）除 ASIC 之外的所有可能选择中的消耗）

在使用 FPGA 实现车削完成算法时，设计人员可以选择展开他们的算法以使用提供的最大并行度或使用紧凑的顺序设计。每种方法都有其自身的成本效益；前者以更高的资源消耗为代价帮助最大化性能，后者以最小化性能为代价通过重用硬件来帮助最小化面积和资源消耗。

在为 GPU 开发时，不存在对算法实现的这种级别的控制。开发人员可以控制使用最有效的算法，但他们并不是决定算法最终精确硬件实现的人。与 FPGA 设计人员在计算其设计的硬件实现时甚至计算“纳秒”（使用布局后工具）不同，GPU 开发人员依靠可用的框架来自动增强他们的所有实现细节。与 FPGA 设计人员相比，它们的开发水平要高得多。

因此，这里也出现了众所周知的权衡主题；您想以更长的开发时间为代价对硬件实现进行精确控制吗？选择 FPGA。您想要并行性，但已经下定决心放弃对硬件实现的精确控制并希望使用现有的软件技能进行开发？使用 OpenCL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-22T20:10:14.697

感谢@hamzed，但 OpenCL 并没有从 FPGA 上的 OpenCL 设计者手中夺走控制权。它实际上提供了两全其美的优势：FPGA 的完全可编程性与所有自定义并行算法的优势以及比 RTL 更好的设计收敛速度。通过巧妙地处理算法移动和不移动数据，您可以获得接近 FPGA 的理论性能。请参阅本参考资料中的最后一张图表：[https ://www.iwocl.org/wp-content/uploads/iwocl2017-andrew-ling-fpga-sdk.pdf](https://www.iwocl.org/wp-content/uploads/iwocl2017-andrew-ling-fpga-sdk.pdf)

# python - 为什么 enthought mkl 例程比 matlab 慢

> ID：12332611
> 
> 赞同：3
> 
> 时间：2012-09-08T16:45:58.950
> 
> 标签：python, matlab, numpy, scipy

我正在测试python enthought 分布的线性代数runtines 的速度，它声称与windows 平台上的intel MKL 链接。我在 IPython 交互式 shell 中做了以下操作：

```
import scipy.linalg as la
import numpy.random
M = random.rand(1000,1000)
%timeit la.svd(M); 
```

`svd()`通常需要 1.3 秒。但是，如果我使用 matlab R2011a 并做了`M=rand(1000);tic;svd(M);toc`，通常只需要 0.68 秒。

我已经看到了类似的先前问题，将 MKL 和 ATLAS 或其他一些非 MKL 构建的 scipy 与 matlab 使用的 MKL 进行比较。但是我这里的情况应该正是python调用的MKL和matlabR2011a调用的MKL的比较。所以我完全不知道为什么结果如此不同。这对于从 matlab 迁移到 python 来说是如此令人沮丧。

顺便说一句，enthough 使用的 MKL 版本是 10.3.1，而 matlab R2011a 使用的 MKL 版本是 10.2.6。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T17:30:42.340

Numpy`la.svd(M)`计算 U、S 和 V，而 Matlab`svd(M)`仅计算 S。尝试与`la.svd(M, compute_uv=False)`or进行比较`[U,S,V]=svd(M)`。

# php - 运行 php 脚本时，crontab 找不到所需的 php 文件

> ID：12332616
> 
> 赞同：3
> 
> 时间：2012-09-08T16:46:25.067
> 
> 标签：php, linux, cron

我正在尝试让 crontab 运行一个 php 文件，这是 cronjob

```
10 * * * * /usr/bin/php  /var/www/update/ranks.php >> /var/www/update/log/ranks.txt 
```

但是我不断收到错误消息，说所需的文件不存在

```
PHP Warning:  require_once(../mws_products.php): failed to open stream: No such file or directory in /var/www/update/ranks.php on line 2
PHP Fatal error:  require_once(): Failed opening required '../mws_products.php' (include_path='.:/usr/share/php:/usr/share/pear') in /var/www/update/ranks.php on line 2 
```

当我从浏览器运行文件或进入文件目录并执行文件时，我没有遇到这个问题，例如`cd /var/www/update/`

**排名.php**

```
<?php 
require_once('../mws_products.php');

echo "-------------------------------------------------------------\n";
echo date('d-M-Y H:i:s',time())."\n";
echo "Update Ranks\n";
$products->updateRanks();
$database->addUpdate("ranks", time());
echo "\n\n\n";
?> 
```

**文件夹结构**

```
[folder] update
   |____ [file] ranks.php

[file]   mws_products.php 
```

什么可能导致这个问题？（**注意**：我已经尝试重新启动 apache 和服务器）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T16:52:09.430

由于您在根目录的 crontab 中运行 ../mws_pruducts.php 相对于给定的根目录不存在。

有多种解决方案，这是其中之一：

```
define( 'ROOT', dirname(__FILE__) );  
require_once(ROOT . '/../mws_products.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T16:51:49.127

尝试使用文件的绝对路径...

```
require_once('/var/www/mws_products.php'); 
```

# python - 在命名空间声明不一致的文档上使用 iterparse，然后使用 xpath

> ID：12332621
> 
> 赞同：4
> 
> 时间：2012-09-08T16:46:52.653
> 
> 标签：python, xml-parsing, lxml, xml-namespaces, iterparse

我需要整理一段代码，将可能很大的 XML 文件解析为自定义 Python 对象。思路大致如下：

```
from lxml import etree
for e, tag in etree.iterparse(source, tag='Foo'):
    print tag.xpath('bar/baz')[42] # there's actually a function call here 
```

问题是，有些文档有命名空间声明，有些则没有。这意味着在上面的代码中，`tag='Foo'`和`xpath`部分都不起作用。

现在我一直在忍受丑陋的东西

```
for e, tag in etree.iterparse(source):
    if tag.tag.endswith('Foo'):
        print tag.xpath('*[local-name()="bar"]/*[local-name()="baz"]')[42] 
```

但这太糟糕了，即使它工作正常，我也想把它做好。（我想它也应该更慢。）

有没有办法编写理智的代码来解释这两种情况`iterparse`？现在我只能想到捕获`start-ns`和`end-ns`事件并更新“状态保持”变量，我必须将其传递给循环中调用的函数来完成工作。然后该函数将`xpath`相应地构造查询。这是有道理的，但我想知道是否有更简单的方法。

PS我显然已经尝试过四处搜索，但还没有找到一个既可以使用也可以不使用命名空间的解决方案。我也会接受从 XML 中消除名称空间的解决方案，但前提是它不会在进程中将整个树存储在 RAM 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:24:23.320

所有元素都有一个`.nsmap`映射属性；使用它来检测您的命名空间并相应地分支。

# php - PHP没有从文本框中获取文本

> ID：12332623
> 
> 赞同：0
> 
> 时间：2012-09-08T16:46:54.830
> 
> 标签：php, html, variables, textbox

每当我在文本框中输入文本时，它都无法正确传输到 PHP。PHP 将输入读取为 null，而实际上，其中有文本。

PHP 代码。

```
 //Two Email Lines
$email_to = "contact@mywebsite.com";
$email_subject = "AUTO: REQUEST";

//Set equal to email form textbox
$email_form = $_POST['email_text'];

$email_message = "Email: " . $email_form . "";

//Create email headers
@mail($email_to, $email_subject,$email_message,$headers); 
```

表单的 HTML 代码

```
<div id="form">

<form method="post" action="Email_Form_Script.php" enctype="text/plain" onsubmit="window.open('FormPopUp.html','popup','width=500,height=500,scrollbars=no,resizable=no,toolbar=no,directories=no,location=no,menubar=no,status=no,left=0,top=0');" >
    <div>
        <input type="text" class="text" name="e3text" id="emailForm" value="Enter your e-mail address" onfocus="if(this.value=='Enter your e-mail address') { this.value = '' }" onblur="if(this.value=='') { this.value = 'Enter your e-mail address' }" />
        <input type="hidden" value="" name="email2"/>
        <input type="hidden" name="loc" value="en_US"/>
        <input type="submit" class="submit" value=""/></div>
</form>
</div> 
```

真的很困惑为什么它不起作用。我不断收到只写“电子邮件：”（电子邮件后没有文字）的空电子邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:49:24.177

该行：

```
$email_form = $_POST['email_text']; 
```

需要匹配`name`文本的形式，在你的情况下`name="e3text"`，你应该使用：

```
$email_form = $_POST['e3text']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:49:42.233

在你的 php 代码中试试这个

```
$email_form = $_POST['e3text']; 
```

“e3text”是你的文本框的名称，所以在 php 中使用这个名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T16:50:11.257

当您点击表单的提交按钮时，值被传递为：

```
name of the input field = value of the input field 
```

您的字段是名称`e3text`- 请参阅脚本中的此类字段，即`$_POST['e3text']`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T16:50:50.117

这是因为您的表单实际上并不包含`email_text`在您的 PHP 代码中引用的名为的输入元素。您需要将您的 HTML 表单代码构造为至少看起来像这样，或者将您的 PHP 代码更改为 require `$_POST['e3text']`。

```
<div id="form">
    <form method="post" action="Email_Form_Script.php" enctype="text/plain" onsubmit="window.open('FormPopUp.html','popup','width=500,height=500,scrollbars=no,resizable=no,toolbar=no,directories=no,location=no,menubar=no,status=no,left=0,top=0');" >
        <div>
            <input type="text" class="text" name="email_text" id="emailForm" value="Enter your e-mail address" onfocus="if(this.value=='Enter your e-mail address') { this.value = '' }" onblur="if(this.value=='') { this.value = 'Enter your e-mail address' }" />
            <input type="hidden" value="" name="email2"/>
            <input type="hidden" name="loc" value="en_US"/><input type="submit" class="submit" value="" />
        </div>
    </form>
</div> 
```

# f# - 流水线在索引处查找元素

> ID：12332627
> 
> 赞同：1
> 
> 时间：2012-09-08T16:47:46.933
> 
> 标签：f#, functional-programming, sequence, pipelined-function

我想在 F# 中执行以下操作：

```
let index = 5
let sequence = [0..10]
let fifthElement =
    sequence
    |> .[index] 
```

但是，最后一行无效。我想要做的是实际检索 5 中索引处的元素`sequence`。我做错了吗？

据我了解，流水线有助于反转函数调用，但我不确定如何使用流水线检索特定索引处的元素。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-08T16:50:28.603

对于`list`and `seq`，我通常使用

```
let fifthElement = sequence |> Seq.nth index 
```

你也可以写

```
let fifthElement = sequence |> fun sq -> sq.[index] 
```

或更简洁地没有管道  

```
let fifthElement = sequence.[index] 
```

对于任何具有[Indexed Property](http://msdn.microsoft.com/en-us/library/dd233202)的对象。

使用索引属性的优点是它实际上`O(1)`在数组上，而`Seq.nth`在数组上是`O(N)`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-14T16:44:45.453

只是一个更新： `nth`已弃用，您现在可以`item`用于序列和列表

例子：

```
let lst = [0..2..15] 
let result = lst.item 4 
```

结果 = 8

# xml - 总产品 xslt

> ID：12332631
> 
> 赞同：0
> 
> 时间：2012-09-08T16:48:02.227
> 
> 标签：xml, xslt-2.0

我在处理这个 xslt 时遇到了困难，这让我在总结收到的总收据时感到头疼是一张包含 2 个办公室和每个客户 2 种产品总价值的表格。我是 xml 和 xslt 的新手，请帮助

```
<offices>
  <office>
    <customerproduct>
      <Price>10</Price>
       <Stock>20</Stock>
       <Ordered>25</Ordered>
    </customerproduct>
    <customerproduct>
      <Price>10</Price>
       <Stock>2</Stock>
       <Ordered>15</Ordered>
    </customerproduct>
   <receiptno.>1</receiptno.>
  </office>
  <office>
    <customerproduct>
      <Price>14</Price>
       <Stock>20</Stock>
       <Ordered>24</Ordered>
    </customerproduct>
    <customerproduct>
      <Price>100</Price>
       <Stock>2</Stock>
       <Ordered>100</Ordered>
    </customerproduct>
  <receiptno.>2</receiptno.>
 </office>
</offices> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:16:18.360

**这种转变**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <html>
    <table border="1">
     <xsl:apply-templates/>
    </table>
  </html>
 </xsl:template>

 <xsl:template match="office">
  <tr>
    <td><xsl:value-of select="concat('Office',position())"/></td>
    <td><xsl:value-of select="sum(*/(Price*Stock))"/></td>
  </tr>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（提供的文本是在更正几个畸形后提供的）：

```
<offices>
    <office>
        <customerproduct>
            <Price>10</Price>
            <Stock>20</Stock>
            <Ordered>25</Ordered>
        </customerproduct>
        <customerproduct>
            <Price>10</Price>
            <Stock>2</Stock>
            <Ordered>15</Ordered>
        </customerproduct>
        <receiptno.>1</receiptno.>
    </office>
    <office>
        <customerproduct>
            <Price>14</Price>
            <Stock>20</Stock>
            <Ordered>24</Ordered>
        </customerproduct>
        <customerproduct>
            <Price>100</Price>
            <Stock>2</Stock>
            <Ordered>100</Ordered>
        </customerproduct>
        <receiptno.>2</receiptno.>
    </office>
</offices> 
```

**产生（我们可以*猜测*的是）想要的结果：**

```
<html>
   <table border="1">
      <tr>
         <td>Office1</td>
         <td>220</td>
      </tr>
      <tr>
         <td>Office2</td>
         <td>480</td>
      </tr>
   </table>
</html> 
```

# ios - 如何在 UIViewController 中显示标签栏

> ID：12332633
> 
> 赞同：1
> 
> 时间：2012-09-08T16:48:04.403
> 
> 标签：ios, xamarin.ios, uitabbarcontroller, segue

我在 MT 中创建了基于 tabbar 的项目，并且在我的故事板中有以下流程；

```
Tabbarcontroller -> 1) MainViewController -> CustomerViewController;
                    2) SettingViewController 
```

我遇到的问题是，当我使用`PrepareForSegue`函数`CustomerViewController`并将其指向`MainViewController`. 中缺少标签栏 UI `MainViewController`。

我知道如果我指出`TabBarController`它会很好。但我需要将一些数据准确传递给`MainViewController`.

有什么办法可以做到。我是 iOS 和 monotouch 的新手。任何建议表示赞赏。

# javascript - jquery 滑块在 ie 中不起作用

> ID：12332635
> 
> 赞同：0
> 
> 时间：2012-09-08T16:48:22.920
> 
> 标签：javascript, jquery, internet-explorer, slider

我正在开发自己的 jquery 滑块。它在 Chrome 和 FireFox 中可以正常工作，但在 IE 中不能正常工作。这是我的脚本。有人有解决方案吗？

这是我的CSS：

```
<style>
  #rol{
      display: block;
        width:950px;
        height:154px;
        margin:0 auto;
        overflow:hidden;
    }

    #rol .prev-r,.next-r{
        position:absolute;
        margin-top:60px;
        width:11px;
        height:37px;
        cursor:pointer;
    }

    #pos{
        width:1500px;
        float:left;
    }

    .next-r{
        background:url(/themes/classic/images/slider/rol-next.png) no-repeat;
    }
    .prev-r{
        background:url(/themes/classic/images/slider/rol-prev.png) no-repeat;
    }
    .next-r:hover{
        background:url(/themes/classic/images/slider/rol-next.png) no-repeat 0 -50px;
    }
    .prev-r:hover{
        background:url(/themes/classic/images/slider/rol-prev.png) no-repeat 0 -50px;
    }
    .partner-box {
        color: white;
        width: 218px;
        height: 154px;
        border: ridge 1px #666;
        background-color: #16455D;
        float: left;
        margin: 0 10px 0 8px;
    }
</style> 
```

这是我的 html ：

```
<div id="rol">
    <p style="float:left;margin-left:-20px;display:block;" class="prev-r"></p><p style="float:left;margin-left:960px;display:none;" class="next-r"></p>
    <div id="pos">
        <div class="partner-box">
            <img src="partner/5prime.jpg" width="218" height="65" />
            <p>
                Nucleic Acid Purification, PCR and RT PCR, Molecular Biology Reagents, Lab Essentials and Accessories ...
            </p>
            <a class="read-more" href="/partners/view/5prime">Read More</a>
        </div>
        <div class="partner-box">
            <img src="partner/metabion_header.jpg" width="218" height="65" />
            <p>
                Oligonucleotides & Peptides :<br/> DNA, RNA, ZNA, Dual labeled probes, Light Cycler probes, Peptides, Antibodies
            </p>
            <a class="read-more" href="/partners/view/metabion">Read More</a>
        </div>
        <div class="partner-box">
            <img src="partner/54564.jpg" width="218" height="65" />
            <p>
                We supply wide range of Real Time PCR, PCR and FEP kits for molecular diagnostics from InterLab Service Company ...
            </p>
            <a class="read-more" href="/partners/view/interlabservice">Read More</a>
        </div>
        <div class="partner-box">
            <img src="partner/logo_corpo[1].jpg" width="218" height="65" />
            <p>
                IPSOGEN is currently the world leader in blood cancer molecular diagnostics ...
            </p>
            <a class="read-more" href="/partners/view/Ipsogen">Read More</a>
        </div>
        <div class="partner-box">
            <img src="partner/partner_cytocell.gif" width="218" height="65" />
            <p>
                IPSOGEN is currently the world leader in blood cancer molecular diagnostics ...
            </p>
            <a class="read-more" href="/partners/view/cytocell">Read More</a>
        </div>
        <div class="partner-box">
            <img src="partner/aid.jpg" width="218" height="65" />
            <p>
                IPSOGEN is currently the world leader in blood cancer molecular diagnostics ...
            </p>
            <a class="read-more" href="/partners/view/Aid-Diagnostika">Read More</a>
        </div>
    </div>
</div> 
```

最后这是我的 jquery 脚本。我使用 jquery-1.7.1.min.js：

```
<script type="text/javascript">
$(document).ready(function() {
    //img floating
    var lock = true;
    $('.prev-r').click(function() {
        if(lock == true){
            lock = false;
            var mleft = $('#pos').css('marginLeft');
            var mleft = mleft.slice(0,-2);
            var mleft = parseInt(mleft);
            var mleft = Math.abs(mleft);
            var left = 240;
            var next = mleft+left;
            chdis(next);
            $('#pos').animate({
                'marginLeft':'-'+next
                },"slow",function(){
                lock = true
                });
        }
    });
    $('.next-r').click(function() {
        if(lock == true){
            lock = false;
            var mleft = $('#pos').css('marginLeft');
            var mleft = mleft.slice(0,-2);
            var mleft = parseInt(mleft);
            var mleft = Math.abs(mleft);
            var left = 240;
            var next = mleft-left;
            chdis(next);
            $('#pos').animate({
                'marginLeft':'-'+next
                },"slow",function(){
                lock = true
                });
        }
    });
    function chdis(next){
        if(next == 0){
            $('.next-r').css('display','none');
        }else{
            $('.next-r').css('display','block');
        }
        var img = $("#pos img").length;
        var img = img * 240;
        var img = Math.abs(img);
        var img = img - 950;
        if(next == 480){
            $('.prev-r').css('display','none');
        }else{
            $('.prev-r').css('display','block');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:40:00.170

我发现了我的问题。

IE 自动设置`#pos` `left-margin`为`auto`。因此，当我尝试对其进行切片并想从其值中检索数字时（例如，想从 获取`12`）`12px`它给了我 au 代替（因为`margin-left`设置为`auto`）。
通过将`left margin`for设置`#pos`为零，滑块也可以在 IE 中使用。
祝你好运

# cordova - 无法获取 navigator.notification.activityStart(); 在Phonegap工作

> ID：12332640
> 
> 赞同：0
> 
> 时间：2012-09-08T16:48:43.677
> 
> 标签：cordova, dreamweaver

当应用程序从其他站点访问数据时，我试图在 IOS 设备上显示网络繁忙的微调器图标，但是当我在我的 js 文件中使用此代码时程序冻结：

```
navigator.notification.activityStart();
//ajax request...
navigator.notification.activityStop(); 
```

我正在使用带有 Phonegap Build 2.0.0 的 Dreamweaver CS6。config.xml 文件中是否有需要为此设置的首选项？或者是其他东西？？

我发现了一些类似的帖子，但它们引用了一个插件，该插件涉及加载看起来像 xcode 库的内容，我认为无法完成，因为我只使用 html 和 javascript。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-06-09T09:24:31.607

我认为对于 iOS，您需要使用

```
navigator.notification.loadingStart();
navigator.notification.loadingStop(); 
```

# c# - XAML 文件中的不同基类

> ID：12332647
> 
> 赞同：1
> 
> 时间：2012-09-08T16:49:41.850
> 
> 标签：c#, wpf, xaml

我有一个从类`BIFUserControl`继承的`UserControl`类。现在我正在设计一个新的用户控件`BIFText`，它继承自`BIFUserControl`类。因此，我更改了名为`BIFText.xaml`如下的 XAML 文件：

```
<base:BIFUserControl 
              xmlns:base="clr-namespace:BaseInputFramework.BaseWidgets;assembly=BaseInputFramework"
              x:Class="BIFWidgetLibrary.Text.BIFText"
              xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
              xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
              xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"

              xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 

              xmlns:mp="clr-namespace:Microsoft.Multipoint.Sdk.Controls;assembly=Microsoft.Multipoint.Sdk.Controls"
              xmlns:utils="clr-namespace:BaseInputFramework.BaseWidgets.Utils;assembly=BaseInputFramework"

              mc:Ignorable="d" 
              d:DesignHeight="150" d:DesignWidth="150">
     <Grid>

     </Grid> </base:BIFUserControl> 
```

然后我改变了我的`BIFText.xaml.cs`文件如下：

```
 namespace BIFWidgetLibrary.Text {
     public partial class BIFText : BIFUserControl
     {
         public BIFText()
         {
             InitializeComponent();
         }
     } } 
```

但是现在当我尝试构建项目时，我收到以下错误消息： `'BaseInputFramework.BaseWidgets.BIFUserControl' cannot be the root of a XAML file because it was defined using XAML. Line 2 Position 14.`

有人可以帮我解决这个错误。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T17:23:04.887

错误说它本身`BaseInputFramework.BaseWidgets.BIFUserControl`不能是 XAML 文件的根，因为它是使用 XAML 定义的。只有没有使用 XAML 文件定义的元素只能是根元素。请参阅这些链接 -[无法定义根元素](https://stackoverflow.com/questions/10873008/myusercontrol-cannot-be-the-root-of-a-xaml-file-because-it-was-defined-using-xam "无法定义根元素")和[从 UserControl 继承](https://stackoverflow.com/questions/269106/inheriting-from-a-usercontrol-in-wpf "从 UserControl 继承")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:20:06.793

`UserControls`通过将 设置`Content`为您在 XAML 中定义的内容来工作，这可能是您不能这样继承的原因：基类的内容将被覆盖。

如果您不介意完全替换内容，您不妨使用自定义控件并定义 a [`Template`](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.template.aspx)。

# scheme - 设定车的不同行为！在两个看起来相同的列表上

> ID：12332656
> 
> 赞同：4
> 
> 时间：2012-09-08T16:50:43.327
> 
> 标签：scheme

我对`set-car!`两个具有相同结构但构造不同的列表的应用结果感到困惑。

所以这是两个列表`m`和的代码示例`n`：

```
(define m
  (cons
    (cons 'a '())
    (cons
      (cons 'a '())
      '())))
(display m)(newline) ; => ((a) (a))
(set-car! (cadr m) 'b)
(display m)(newline) ; => ((a) (b))

(newline)

(define n (list '(x) '(x)))
(display n)(newline) ; => ((x) (x))
(set-car! (cadr n) 'y)
(display n)(newline) ; => ((y) (y)) 
```

根据 do `display`，两个列表具有相同的结构，但为什么对它们应用相同的过程会导致不同的行为？这与它们的构造方式有关吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-08T17:28:37.133

两个列表的结果*应该*相同。您使用的是什么方案解释器？在我看来，您的解释器重用了该`'(x)`表达式。

在评论之后，似乎实际上这是解释器中的一个错误。修改后两个列表的行为应该相同。

# mysql - 如何向具有空值的现有列添加非空约束？

> ID：12332657
> 
> 赞同：0
> 
> 时间：2012-09-08T16:50:46.500
> 
> 标签：mysql, sql

我在 stackexchange 上看到了一个类似的问题，但它的答案并没有给我正确的结果。

出于演示目的，我有一个`PURCHASES`带有列的简单表`PURCHASE_NUM`, `PURCHASE_DATE`，`CUSTOMER_ID.` 我想对`CUSTOMER_ID`表强制执行非空约束。我尝试了以下方法：

```
ALTER TABLE PURCHASES MODIFY CUSTOMER_ID char NOT NULL; 
```

该语法很好，但随后我插入以下内容：`INSERT INTO PURCHASES VALUES (333, NULL, NULL);`并且添加元组没有问题。为什么没有强制执行约束？在添加约束之前该列中已经存在 NULL 值会影响事物吗？

谢谢

*编辑* `DESCRIBE PURCHASES;`对感兴趣的列说以下内容：

```
Field, Type, Null, Key, Default, Extra
CUSTOMER_ID, char(5), YES, , NULL, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:53:42.573

也许您必须更改为

```
ALTER TABLE PURCHASES MODIFY  CUSTOMER_ID char NOT NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:11:30.347

您的`ALTER`命令不起作用，该`Null`列仍然显示`YES`。您的`ALTER`命令语法看起来很好，它应该可以工作。检查您的输入，然后重试。

您的客户 ID 真的只是一个字符吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T17:17:06.250

根据手册，将数据输入到`NOT NULL`没有显式`DEFAULT`子句的列中会将列设置为`NULL`. 因此，您`ALTER`的列应该包含一个`DEFAULT`. 从 4.0 文档开始：

> 隐式默认值定义如下：
> 
> 对于数字类型，默认值为`0`，但对于使用属性声明的整数或浮点类型`AUTO_INCREMENT`，默认值为序列中的下一个值。
> 
> 对于除 之外的日期和时间类型`TIMESTAMP`，默认值为该类型的相应“零”值。对于`TIMESTAMP`表中的第一列，默认值为当前日期和时间。请参见第 10.3 节“日期和时间类型”。
> 
> 对于 以外的字符串类型`ENUM`，默认值为空字符串。对于 ENUM，默认是第一个枚举值。

# google-maps - 如何在谷歌地图 MapOptions v3 中设置视口属性

> ID：12332659
> 
> 赞同：2
> 
> 时间：2012-09-08T16:50:53.873
> 
> 标签：google-maps, google-maps-api-3

我正在使用[google.maps.Geocoder](https://developers.google.com/maps/documentation/javascript/reference#Geocoder)来获取[viewport](http://google.maps.GeocoderGeometry)。然后我想创建 google.maps.Map 以便地图适合这个视口。有一个方法fitBounds。它完美地工作。但最好在构造函数中指定视口。[我在MapOptions](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)中找不到这个选项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:39:56.537

除了计算精确的地图宽度、高度和缩放级别之外，无法在构造函数中设置它，但缩放级别是离散值，因此它可能不是您想要的精确拟合。

如果您创建地图并在此之后立即应用[map.fitBounds()](https://developers.google.com/maps/documentation/javascript/reference/map#Map.fitBounds)，这一切都发生得如此之快，以至于它对用户完全透明。

# android - 在 Android 中创建问卷

> ID：12332660
> 
> 赞同：2
> 
> 时间：2012-09-08T16:50:56.063
> 
> 标签：android, android-widget, android-sqlite

愿你们所​​有人平安！我必须开发一个像小型 android 应用程序这样的问卷。将有 10 个问题，只有 2 种答案，即“是”或“否”。当用户将回答所有 10 个问题时，将根据他的回答向用户显示一个报告。请告诉我，我应该如何进行？我需要使用数据库（sqlite）还是没有它也可以工作？我应该如何开始开发这个应用程序？我是安卓新手。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:56:41.213

如果您是 Android 新手，请使用 Web 方法：在 webView 中显示 html 页面 1-10 并将其相互链接，最后将第 10 页链接到 url，您将在其中使用收集到的 http POST / GET 10 个参数。就像你在“标准”网络开发中所做的那样。你也可以使用几个应用程序来包装 Android 应用程序：Appcelerator、Phonegap 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:36:10.417

这是一个屏幕类：（Android Activity）

```
public class Help  extends Activity{

    private WebView webViewHelp;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.help);

        webViewHelp = (WebView) findViewById(R.id.webViewHelp);

        webViewHelp.loadUrl("file:///android_asset/ui/help.html");
    }
} 
```

您需要 help.xml 构建并放入 /res/layout/ 文件夹。

还要编写 help.html 并将其放入：**/assets/ui**文件夹，而不是 android_asset 和 at is not `file:///assets/ui/help.html`！

在这种情况下，您已经设置了起点，然后使用 html 链接加载下一个下一个...直到完成，而不是推送 url。

如果你是在做 android ui 开发，而不是 web-like，那就更容易了，但这需要更多的经验

# c++ - QT Phonon Audio 跳线

> ID：12332662
> 
> 赞同：1
> 
> 时间：2012-09-08T16:51:24.313
> 
> 标签：c++, qt, audio, phonon

我只在这里问一个问题。好吧，我在一个应用程序中工作，但我想创建跳杆，随着音乐跳跃。我不知道你是否理解我，这是我想要做的图像： 我不知道如何创建那些酒吧，所以我不知道你是否可以帮助我。非常感谢。

[![例子](../Images/73f1567f6fc65798d1dca942283239da.png)](https://i.stack.imgur.com/WOxQT.png)

* * *

使用 Phonon，我如何处理频率？

# wordpress - wordpress 上传文件和 php 最大文件大小

> ID：12332667
> 
> 赞同：2
> 
> 时间：2012-09-08T16:52:06.570
> 
> 标签：wordpress, php

由于上传者限制了我，我无法将文件上传到超过 1Mb 的 wordpress。

我检查了 phpinfo() 并显示 1000M 但 wordpress 上传器仍显示 1Mb 作为最大上传大小。

奇怪的是，即使我在 php.ini 中更改了一些，我也无法将 max_execution 时间更新为 1000

托管服务提供商是否以某种方式阻止了对 php.ini 文件的某些更改。

信息如下所示：

[http://nvoids.com/test.php](http://nvoids.com/test.php)

[http://nvoids.com/blog/wp-admin/test.php](http://nvoids.com/blog/wp-admin/test.php)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-13T15:49:17.600

我猜你使用多站点wordpress。
在这种情况下，您可以在网络管理 -> 设置 -> 网络设置中设置“最大上传文件大小” 。
php设置由wordpress多站点管理功能改写。我遇到了同样的问题，希望对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:56:45.673

WordPress 使用两个 php.ini 值来确定最大上传大小：`upload_max_filesize`和`post_max_size`. 请参阅[https://github.com/WordPress/WordPress/blob/master/wp-includes/media.php#L1141-L1146](https://github.com/WordPress/WordPress/blob/master/wp-includes/media.php#L1141-L1146)。这是来自 WordPress 源的确定最大上传大小的方法：

```
function wp_max_upload_size() {
    $u_bytes = wp_convert_hr_to_bytes( ini_get( 'upload_max_filesize' ) );
    $p_bytes = wp_convert_hr_to_bytes( ini_get( 'post_max_size' ) );
    $bytes   = apply_filters( 'upload_size_limit', min( $u_bytes, $p_bytes ), $u_bytes, $p_bytes );
    return $bytes;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T17:33:08.403

请将此代码添加到您的 function.php 文件中

```
add_filter('upload_size_limit','ashutosh_increase_upload');
    function ashutosh_increase_upload($bytes){
    return 2650000000; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-16T15:43:26.500

如果您的主机是 GoDaddy cPanel，您可以更轻松地更改设置：

> *   登录到 cPanel Hosting Manager 帐户
> *   搜索“选择 PHP 版本”选项并单击它。
> *   在右上角单击“切换到 PHP 选项”按钮
> *   在这里修改或更改您需要的任何其他设置。

例如：

```
max_file_size 
```

我在这里添加了截图：

![第2步](../Images/8e0d77f39e402cef586d1fc66169485f.png) ![第 3 步](../Images/c3c1125b95f207fe07ec1cec82c40286.png) ![第4步](../Images/c68fc8695a75f6f742d0550bf8c64aff.png)

# php - 使用 PHP 显示来自 MySQL 的图像

> ID：12332669
> 
> 赞同：-1
> 
> 时间：2012-09-08T16:52:32.113
> 
> 标签：php, mysql, image

我有一个包含很多图像的数据库。我想在彼此下方显示所有图像。

数据库的结构如下所示：

```
id – (int10)
name – text
likes – int(3)
url – varchar(16) 
```

在每张图片下方应该显示喜欢的数量，如果我点击图片，我会转到网址。

如果有人能解决这个问题，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:02:40.237

您可以执行以下操作。请注意，强烈建议不要使用这样的 mysql 扩展，因为它已被弃用。您应该考虑改用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)，但我只是为了简化示例而使用它。

```
 mysql_connect('address', 'user', 'password') or die(mysql_error());
    mysql_select_db('databaseName') or die(mysql_error());

    $result = mysql_query("SELECT * FROM MyTable");

    if ($result) {
        if (mysql_num_rows($result) > 0) {
            while ($row = mysql_fetch_object($result)) { ?>
                <a href="http://mydomain.com/images/<?php echo htmlentities($row->url . '/' . $row->name); ?>">
                    <img src="<?php echo htmlentities($row->url . '/' . $row->name) ?>" />
                </a>
                <br />
                Likes: <?php echo htmlentities($row->likes); ?>
                <br />
            <?php }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:07:25.797

```
$db = mysql_connect($IP, $username, $password) or die (mysql_error($db));
mysql_select_db($dbname, $db) or die(mysql_error($db));
$query="SELECT id, likes, url FROM [table name]";
$result=mysql_query($query, $db) or die(mysql_error($db));
$rows=mysql_num_rows($result);
for ($i=0; $i < $rows; $i++) {
echo '<a href="' . mysql_result($result, $i, "url") . '">';
echo '<img src="' . mysql_result($result, $i, "url") . '"></a>';
echo '<br>' . mysql_result($result, $i, "likes") . ' likes';
} 
```

我强烈建议您查看您的 PHP 手册。这是非常基本的编码。另请注意，上述代码在空数据库中不起作用。`$IP`是数据库IP，`$username`是数据库用户名，`$password`是数据库密码。另外，我建议您使用 MySQLi 扩展，因为我使用的扩展已被弃用。

# php - 如果在 iframe 中查看页面，如何在 Wordpress 中添加正文类？

> ID：12332674
> 
> 赞同：0
> 
> 时间：2012-09-08T16:53:04.293
> 
> 标签：php, javascript, facebook, wordpress

来自帖子[如何识别网页是在 iframe 中加载还是直接加载到浏览器窗口中？](https://stackoverflow.com/questions/326069/how-to-identify-if-a-webpage-is-being-loaded-inside-an-iframe-or-directly-into-t)我了解您可以检测您的页面是否正在通过框架查看。

使用 WordPress 网站。我想根据它的视图在我的网站上附加一个 body 类标签。我这样做是为了调整样式。我知道这不能通过 PHP 完成，您需要使用 JavaScript。

有人可以通过一个例子告诉我如何添加我的身体类吗？

```
if (top === self) { not iframe -do nothing } else { in a frame - add body class } 
```

提前感谢您的牵手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:53:13.273

您可以通过将此代码段添加到您的文档中来使用 jQuery 执行此操作`head`。如果通过 iframe 嵌入带有 javascript 代码的页面，这将添加到 body 类属性：

```
<script type="text/javascript">
$(function() {
  var isInIFrame = (window.location != window.parent.location) ? true : false;
  if(isInIFrame) {
    $('body').addClass('iframe');
  }
});
</script> 
```

[您可以在 Github 上](https://github.com/jordanandree/stackoverflow-answers/tree/master/12332674)查看此答案的更多源代码

# javascript - 在 div 中找到第一个有边距的元素？（目的：去除边距）

> ID：12332676
> 
> 赞同：1
> 
> 时间：2012-09-08T16:53:21.503
> 
> 标签：javascript, jquery, html, css, dom

我需要在 div**中找到第一个（也是最后一个）元素，该元素设置了 CSS 边距**（> 0 px）。（重要：这不一定是第一个或最后一个元素！）

基本上，我需要这样做，以便我可以删除第一个元素的 margin-top 和最后一个元素的 margin-bottom。现在我知道你可能会说“为什么不使用“p:last”CSS 语法？”

因为第一个或最后一个元素也可以是其他元素，它可以是列表（UL、OL）、图像、段落等。我不能简单地做，ul:last, ol:last, p:last as这可能导致匹配多个元素（每种类型一个）。

我只想将此应用于单个元素。所以这就是为什么我认为 jquery 是唯一的解决方案。不过，我很乐意在这方面犯错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:22:42.117

因为你只想要第一个/最后**一个有 margin**的孩子，我想你需要使用 jQuery/JavaScript：

```
var isfirst = 1, lastelm;
$("#divid").find("*").each(function() {
    var cur = $(this);
    if(parseInt(cur.css("margin-top")) > 0 && isfirst == 1) {
        cur.css("margin-top", 0);
        isfirst = 0;
    }
    if(parseInt(cur.css("margin-bottom")) > 0) {
        lastelm = cur;
    }
});
lastelm.css("margin-bottom", 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:23:27.137

我建议在 jquery(http://api.jquery.com/filter/) 中使用过滤器方法。

这是我能想到的样本

```
<html>
   <body>
      <p>
        <p>A<p>        
        <p>B<p>        
        <p style="margin: 10px;">C<p>    
        <p style="margin: 10px;">C<p>     
        <p>D<p>        
      </p> 
      <script>
         $(document).ready(function(){
            $('p').filter(function(){
                return this.style.margin != '';
            }).last().css('color','red');             

         });

     </script>    
  <body> 
```

​</p>

您可能希望建立在过滤器逻辑的基础上......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T17:13:14.740

`:last`实际上不是 jQuery 之外的 CSS 选择器。但是您可以使用的`:first-child`还有`:last-child`：

```
#my-element > *:first-child {
    margin-top: 0;
}

#my-element > *:last-child {
    margin-bottom: 0;
} 
```

编辑：太晚了。但是，我肯定会使用`>`选择器，以免为*每个*第一个孩子设置样式`#my-element`（例如 a 中的第`li`一个`ul`或 a`strong`中的 a`p`等）。

# ios5 - UIButtons 的 IBOutletCollection 不会设置为突出显示

> ID：12332677
> 
> 赞同：0
> 
> 时间：2012-09-08T16:53:28.533
> 
> 标签：ios5, uibutton, permanent, iboutletcollection, setstate

我有一个 UIButtons 的 IBOutletCollection：

```
@property (nonatomic, retain) IBOutletCollection(UIButton) NSMutableArray *Buttons; 
```

通过 ibaction，我将在着陆事件后永久更改突出显示的状态。

这个问题与此非常相似： [IBOutletCollection of UIButtons - changed selected state of buttons](https://stackoverflow.com/questions/10888422/iboutletcollection-of-uibuttons-changing-selected-state-of-buttons)

...但是使用 for 循环按钮不会改变。

我还从这里尝试了 perfomselector 方法：[保持 iPhone UIButton 突出显示](https://stackoverflow.com/questions/2290534/keep-iphone-uibutton-highlighted)

但它不起作用。

现在我的代码：

```
-(IBAction)toggleButtons:(id)sender
{
    NSUInteger Index = [button tag];
    [[Buttons objectAtIndex:Index] setHighlighted:YES];
} 
```

如果我将第四行更改为：

```
 [[Buttons objectAtIndex:3] setHighlighted:YES]; 
```

它适用于我集合中的第四个元素......但不适用于索引变量......

问候，菲尔

## 更新

**选择视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface SelectionViewController : UIViewController

@property (nonatomic, retain) IBOutletCollection(UIButton) NSMutableArray *Buttons;

- (IBAction)toggleButtons:(id)sender;

@end 
```

**选择视图控制器.m**

```
#import "SelectionViewController.h"

@interface SelectionViewController ()

@end

@implementation SelectionViewController

@synthesize Buttons;

-(IBAction)toggleButtons:(id)sender
{
    UIButton *button = sender;
    NSUInteger Index = [button tag];
    [self performSelector:@selector(doHighlight:) withObject:sender afterDelay:0];

    [[Buttons objectAtIndex:Index] setHighlighted:YES];
}
- (void)doHighlight:(UIButton *)b {
    [b setHighlighted:YES];
} 
```

![XIB 文件](../Images/85da13f74e12b70e5df3f33ebe79e582.png)

**奥基更新 2：**

现在我已经将我的按钮声明为普通的 IBOutlet 并且这不起作用：

```
-(IBAction)toggleButtons:(id)sender
{
    UIButton *button = sender;

    [button setHighlighted:YES];
} 
```

但是，如果将其更改为：

```
-(IBAction)toggleButtons:(id)sender
{    
    [myOutletButton setHighlighted:YES]; //Normal Outlet 
} 
```

有用....

但是为什么发件人不可能呢？

问候！

**更新 3**

这也有效：

```
for(id button in self.view.subviews)
{
    [button setHighlighted:YES];

} 
```

好的，如果将选择器中的延迟时间更改为1，则状态将突出显示。我正在使用“触地”事件......我想在我触碰按钮后，它会恢复到原来的状态。哪个事件是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:15:58.310

鉴于您的示例使用特定整数，问题可能是您的每个按钮的*标签*属性设置不正确。如果按钮是在界面生成器中创建的，则每个按钮的默认标记值为 0。要检查这一点，请单击按钮，然后在 Attributes Inspector 中向下滚动到 View 并查看*标记*中输入的值场地

# javascript - 在弹出窗口中使用 javascript 预览表单

> ID：12332683
> 
> 赞同：0
> 
> 时间：2012-09-08T14:50:51.103
> 
> 标签：javascript, forms

请在弹出窗口中预览表单时需要一些帮助。我有一个很大的表格，所以我添加了预览选项以显示为弹出窗口。灯箱表单弹出窗口效果很好，但我现在遇到的问题是函数 passform () 将输入（文本字段、选择、复选框、单选）传递到弹出页面以在 Click() 上进行预览。以下是我的 javascript 和 html 代码。我留下了css和一些html，因为我认为它们不是必需的。我会感谢你的帮助。谢谢

Javascript

```
function gradient(id, level)
 {
var box = document.getElementById(id);
box.style.opacity = level;
box.style.MozOpacity = level;
box.style.KhtmlOpacity = level;
box.style.filter = "alpha(opacity=" + level * 100 + ")";
box.style.display="block";
return;
}

function fadein(id) 
 {
var level = 0;
while(level <= 1)
{
    setTimeout( "gradient('" + id + "'," + level + ")", (level* 1000) + 10);
    level += 0.01;
}
   }

     // Open the lightbox

  function openbox(formtitle, fadin)
   {
    var box = document.getElementById('box'); 
    document.getElementById('shadowing').style.display='block';

    var btitle = document.getElementById('boxtitle');
    btitle.innerHTML = formtitle;

    if(fadin)
     {
 gradient("box", 0);
 fadein("box");
     }
    else
     {  
     box.style.display='block';
     }      
     }

      // Close the lightbox

     function closebox()
     {
      document.getElementById('box').style.display='none';
      document.getElementById('shadowing').style.display='none';
     }

     //pass form fields into variables
     var divexugsotherugsexams1 = document.getElementById('divexugsotherugsexams1');
     var exugsotherugsexams1 = document.form4.exugsotherugsexams1.value;

     function passform()
     {
      divexugsotherugsexams1.innerHTML = document.form4.exugsotherugsexams1.value;
     } 
```

HTML（仅尝试一个文本字段）：

```
 <p><input name="submit4" type="submit" class="button2" id="submit4" value="Preview Note" onClick="openbox('Preview Note', 1)"/>
  </p>
  <div id="shadowing"></div>

   <div id="box">
  <span id="boxtitle"></span>
  <div id="divexugsotherugsexams1"></div>

  <script>document.write('<PARAM name="SRC" VALUE="'+exugsotherugsexams1+'">')</script> 
      <a href="#" onClick="closebox()">Close</a>

   </div> 
```

# ajax - jQuery中的AJAX线程管理？

> ID：12332688
> 
> 赞同：0
> 
> 时间：2012-09-08T16:55:09.463
> 
> 标签：ajax, django, jquery

如果这已经被覆盖，请原谅我，但我保证事先已经搜索过。我得到一连串的`AJAX`获取请求，每 30 秒更新一次列。基于这些更新，显示加载新内容的按钮，再次加载新内容并重置相关会话变量。

当然，碰撞也会发生。

ATM，我通过变量单独阻止每一列，这些变量在成功后再次释放`AJAX`，如果变量被阻止，则设置间隔。

现在，有什么优雅的方法可以做到这一点吗？我摆弄了延迟对象，`.ajaxStop`但无济于事。我在某处读到，jQuery 1.5 /`$.done()`等应该为 Ajax 调用引入某种线程管理？我该如何利用这一点？

```
//timed update
function refresh() {

    if (BLOCKED != 1) {
        BLOCKED = 1;
        $.ajax({
            url: 'update',
            success: function(data) {
                 BLOCKED = 0;
            }
         });
     }

//click function
function load() {
    if (BLOCKED != 1) {
        BLOCKED = 1;
        $.ajax({
            url: '/load'
        });
    } else setTimeout("load()", 500);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:27:32.097

我建议这样做可以摆脱计时器轮询。这会在加载挂起时设置一个标志，当更新完成时，它会检查下一个加载是否处于挂起状态，而不是轮询：

```
// global state
var inFlight = false;
var pendingLoad = false;

function checkPendingLoad() {
    if (pendingLoad) {
        pendingLoad = false;
        load();
    }
}

function refresh() {
    if (!inFlight) {
        inflight = true;
        $.ajax({
            url: 'update',
            complete: function(data) {
                 inFlight = false;
                 checkPendingLoad();
            }
         });
     }
}

//click function
function load() {
    if (!inFlight) {
        inFlight = true;
        $.ajax({
            url: '/load',
            complete: function(data) {
                inFlight = false;
                checkPendingLoad();
            }
        });
    } else {
        pendingLoad = true;
    }
} 
```

# c++ - 包括带有“/”字符的库

> ID：12332689
> 
> 赞同：0
> 
> 时间：2012-09-08T16:55:31.623
> 
> 标签：c++, include

在某些代码中，我看到如下内容：

```
#include <SFML/Graphics.hpp>
#include <Qt/qwidget.h> 
```

与包含这样的标题相比，“/”字符有什么区别：

```
#include <iostream> 
```

我尝试使用谷歌搜索，但找不到任何好的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T16:56:45.810

包含指令用于包含单个头文件。它们基本上用相关文件替换指令。头文件本身可能是库的一部分。

之前的部分`/`是放置头文件的目录，相对于用于编译的包含搜索路径中的目录。假设我的编译器知道要搜索`/usr/include`，并且我所有的`boost`头文件都在`/usr/include/boost`. 然后，我可以在我的代码中包含提升标头，例如

```
#include <boost/some_header.hpp> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:56:35.540

它只是说明头文件位于目录中`SFML`或`Qt`.

# javascript - 加载 jQuery 的最佳方式是什么？

> ID：12332697
> 
> 赞同：16
> 
> 时间：2012-09-08T16:56:10.437
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, google-cdn

> **可能重复：**
> [您从哪里包含 jQuery 库？谷歌 JSAPI？CDN？](https://stackoverflow.com/questions/547384/where-do-you-include-the-jquery-library-from-google-jsapi-cdn)

我有一个使用 jQuery 的应用程序。该应用程序可以使用几乎任何最新版本的 jQuery，例如 1.7 或 1.8。

谁能给我一个建议，告诉我如何编码我的应用程序，以最大限度地提高它在用户缓存中找到满足我需求的最新版本的 jQuery 的机会。例如，我应该尝试从 google CDN 中查找一个版本，在哪种情况下我应该尝试查找哪个版本？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-08T17:11:45.430

公共网站使用内容交付网络 (CDN) 非常普遍。要引用一个，您可以像任何其他本地文件一样将它们包含在脚本标记中：

jQuery 示例

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script> 
```

谷歌示例

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

微软示例

```
<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.8.0.min.js" type="text/javascript"></script> 
```

### 我应该总是参考最新版本吗？

这样做存在风险，例如使用 jQuery CDN 始终指向最新版本时。

在最近的几个版本中，一些方法已被弃用，即：`toggle()`- 用于鼠标事件，`live()`等`die()`。

据我从 jQuery 论坛了解，那些不推荐使用的方法将在 1.9 版中永久删除。

此外 jQuery 计划发布 1.9 和 2.0 紧密结合。然而 2.0 不是 1.9 的延续，而是将同时开发。

2.0 将不支持 IE6、IE7 或 IE8。jQuery 1.9 将与所有以前的浏览器版本保持兼容。

[**在这里**](http://blog.jquery.com/2012/07/01/jquery-1-9-and-2-0-tldr-edition/)阅读。

由于这些原因，我不建议自动始终指向最新版本，而是明确引用您支持的特定版本。

### 如果 CDN 出现故障怎么办

这种情况很少发生**，但**可能会发生 CDN 关闭的情况。以防万一，因此您不必承担后果，您可以实施后备计划。

```
// Check if jQuery was initialized and if not (CDN was down for example), then
// load jQuery from a local source.
if(typeof jQuery === 'undefined'){
    document.write(unescape("%3Cscript src='yourlocalpath/jquery.1.x.min.js' type='text/javascript'%3E%3C/script%3E"));
} 
```

### CDN 可用性和性能评估

关于可用 CDN 的质量和性能，我在 royal.pingdom.com 上看到了这篇非常有趣的[**文章。**](http://royal.pingdom.com/2012/07/24/best-cdn-for-jquery-in-2012/)

Pingdom 的报告显示，jQuery 最常用和免费的主机；谷歌、微软和Media Temple；已证明可靠但性能不一致。

为了评估这些网络，Pingdom 在欧洲和北美的多个地点进行了测试，每分钟一次，持续 30 天。

结果发现，这三个都提供了出色的可用性，但性能并非如此。

对于不使用 HTTPS 或安全服务器的网站，Media Temple 是迄今为止最快的，在欧洲仅次于谷歌，但在北美落后。对于 HTTPS 站点，Google 是欧洲最快的，Google 和 Microsoft 在北美的表现相似。

微软在欧洲的表现最差，但在北美总体上与谷歌并驾齐驱。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-08T17:00:08.157

选择满足您需求的最新版本的 jQuery。此时，这将是 1.8。然后在免费且广泛使用的 CDN（可能是 Google 或 Microsoft）上链接到它。

您应该链接到特定版本的 jQuery。尽管有最新版本的 jQuery 的链接，但您不应该链接到该链接，因为当它发生变化时，您的网站可能会在您不知情的情况下崩溃。您应该只链接到特定版本的 jQuery。这是链接到 Google CDN 上的 1.8.1 的代码。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

如果你真的想优化你的浏览器缓存命中，你会选择并使用现在广泛部署的 jQuery 版本进行测试（我相信某个地方有关于每个版本的使用量的网络统计数据），然后你会定期更新它跟踪最常用的版本。我怀疑这是微优化，只需选择您测试过的任何最新版本都是合适的，并且会给您带来使用通用 CDN 的好处。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-08T17:02:58.823

我建议参考来自[Google](https://developers.google.com/speed/libraries/devguide)或[Microsoft](http://www.asp.net/ajaxlibrary/cdn.ashx) CDN 的静态版本号。立即使用最新版本进行开发。如果您进行需要更新功能的更改，只需更改布局中的参考即可。

谷歌 CDN 看起来像：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T16:57:25.677

对于最新版本，您可以直接从 jQuery 加载：

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script> 
```

您还可以从中加载其他[内容交付网络](http://robertgreiner.com/2011/05/using-a-content-delivery-network-to-host-jquery/)。

一些流行的 CDN 是：

*   jQuery (code.jquery.com)
*   微软 (ajax.microsoft.com)
*   谷歌 (ajax.googleapis.com)

# java - java中的大整数乘法（递归）在输入2000位数字的大小时停止而没有错误。为什么？

> ID：12332698
> 
> 赞同：1
> 
> 时间：2012-09-08T16:56:16.297
> 
> 标签：java, recursion, biginteger

我在java中编写了一个递归程序来乘以*两个*大整数。我将输入作为字符串获取并将其存储在一个 int 数组中，该数组将每个数字保存在每个单元格中，并且我的整个程序在两个 int 数组上工作。我的程序适用于大小约为 1000 位的输入。当我输入大约 2000 位数字时，我的程序就会停止（在 eclipse 中）。没有“未响应”状态，没有错误/通知消息，也没有输出。我想知道限制我的程序输入的工作限制大小的问题是什么。是因为我使用递归并且没有足够的内存来存储堆栈帧吗？

这是我的程序的核心

```
private int[] bigInt(int[] a, int[] b, int expo) {
    if(n1==1)
    {
        result=multiply(a[a.length-1],b[a.length-1]);
        if(expo!=0)
            result=exponential(result,expo);
    }
    else
    {
        int A1[]=divideArray(a,0,n1/2);
        int A2[]=divideArray(a,n1/2,n1);
        int B1[]=divideArray(b,0,n2/2);
        int B2[]=divideArray(b,n2/2,n2);
        int tempA[]=bigInt(A1,B1,0);
        int A[]=exponential(tempA, n1);

        int[] addB=addArray(B1,B2);
        int[] addA=addArray(A1,A2);
        int Byet[]=bigInt(addA,addB,0);
        int C[]=bigInt(A2,B2,0);
        int B[]=subArray(Byet,tempA,C,n1/2);

        result=addArray(A,addArray(B,C));
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:11:50.877

我得到了输出，但是由于它非常大，因此无法在控制台中打印。如果我在文件中打印它，我可以看到输出:)

# c# - c# - 如何列出硬盘上的所有文件和文件夹？

> ID：12332703
> 
> 赞同：4
> 
> 时间：2012-09-08T16:56:52.683
> 
> 标签：c#, file, hard-drive

我想列出我的程序可以访问的所有文件和文件夹并将它们写入文本文件。我将如何获得清单？我需要一种在不可访问的文件夹上捕获或不抛出 UnauthorizedAccessExceptions 的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T17:07:49.870

请尝试使用以下代码：

```
private static IEnumerable<string> Traverse(string rootDirectory)
{
    IEnumerable<string> files = Enumerable.Empty<string>();
    IEnumerable<string> directories = Enumerable.Empty<string>();
    try
    {
        // The test for UnauthorizedAccessException.
        var permission = new FileIOPermission(FileIOPermissionAccess.PathDiscovery, rootDirectory);
        permission.Demand();

        files = Directory.GetFiles(rootDirectory);
        directories = Directory.GetDirectories(rootDirectory);
    }
    catch
    {
        // Ignore folder (access denied).
        rootDirectory = null;
    }

    if (rootDirectory != null)
        yield return rootDirectory;

    foreach (var file in files)
    {
        yield return file;
    }

    // Recursive call for SelectMany.
    var subdirectoryItems = directories.SelectMany(Traverse);
    foreach (var result in subdirectoryItems)
    {
        yield return result;
    }
} 
```

客户端代码：

```
var paths = Traverse(@"Directory path");
File.WriteAllLines(@"File path for the list", paths); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-03T15:49:19.633

尝试

```
string[] files = Directory.GetFiles(@"C:\\", "*.*", SearchOption.AllDirectories); 
```

这应该为您提供一个包含硬盘上所有文件的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T16:59:15.597

检查`Directory.GetFiles()`和相关方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T16:59:53.070

你可以试试

```
var files = from file in Directory.EnumerateFiles(@"your Path", "*.*", SearchOption.AllDirectories)
            select file; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T17:34:34.633

使用 Serge 建议的 Traverse 和 DriveInfo 类，您可以访问电脑可用的所有文件。

```
DriveInfo[] allDrives = DriveInfo.GetDrives();

foreach (DriveInfo d in allDrives)
{
   if (d.IsReady == true)
   {
      var paths = Traverse(d.Name);
      File.AppendAllLines(@"File path for the list", paths);
   }
} 
```

# uiview - 如何在 MonoTouch 中使 UIView 可点击？

> ID：12332704
> 
> 赞同：2
> 
> 时间：2012-09-08T16:57:04.983
> 
> 标签：uiview, xamarin.ios, monotouch.dialog

我目前正在尝试创建一个包含一些标签和图像的简单 UIView。如何将 UIView 设置为可点击？

我已经尝试覆盖该`onTouchEnded`方法，但是当我将标签和图像作为子视图添加到视图时，不再调用该方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:17:26.283

> 但是当我将标签和图像作为子视图添加到视图时，不再调用该方法。

因为 UIImageView 和 UILabel 的`userInteractionEnabled`属性`NO`默认设置为。将其设置为`YES`(true) 应该没问题。

# python - 将日期对象放入 MongoDB，使用 pymongo 查询时返回浮点数

> ID：12332705
> 
> 赞同：5
> 
> 时间：2012-09-08T16:57:24.757
> 
> 标签：python, mongodb, pymongo, bson

作为 map-reduce 调用的一部分，我将日期值添加到 MongoDB 集合中：

```
day = Date.UTC(this.time.getFullYear(), this.time.getMonth(), this.time.getDate());
emit({ user : this.user, day : day }, { count : 1 }); 
```

当我稍后在 Mongo shell 中查询这个集合时，我看到：

```
{ "_id" : { "user" : "assaf", "day" : 1331769600000 }, "value" : { "count" : 15 } }
{ "_id" : { "user" : "assaf", "day" : 1331856000000 }, "value" : { "count" : 57 } } 
```

不知何故，日期看起来像一个整数 - 我猜它是一些时间戳表示。如果我这样做：

```
PRIMARY> new Date(db.my_collection.find()[0]["_id"]["day"]) 
```

我找回了正确的日期：

```
ISODate("2012-03-19T00:00:00Z") 
```

我的问题是如何在 pymongo 中做同样的事情。如果我对上述集合运行任何查询，pymongo 会返回文档，其中`day`值作为浮点类型，其值与时间戳相同：

```
dict: {u'_id': {u'user': u'ariel', u'day': 1332115200000.0}, u'value': {u'count': 99.0}} 
```

如何将此时间戳转换为 Python `datetime`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T17:00:16.563

自纪元（1970 年 1 月 1 日）以来的毫秒数：

```
>>> from __future__ import division
>>> dict = {u'_id': {u'user': u'ariel', u'day': 1332115200000.0}, u'value': {u'count': 99.0}}
>>> datetime.datetime.utcfromtimestamp(dict['_id']['day'] / 1000.0)
datetime.datetime(2012, 3, 19, 0, 0)
>>> 
```

*更新：从第一条评论中添加了部门检查。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T19:07:37.273

问题的标题与代码不同。

Date.UTC() 返回一个整数，而不是日期对象。您正在存储整数，而 mongoDB 对此很好。稍后，您将整数取出并在 Date() 构造和 javascript 环境中使用它，这一切都很好。但是在python中，它只看到整数。之前发布的转换似乎是一个很好的转换。

# .net - WCF 错误 MTOM 编码 + 将大数据从客户端发送到服务

> ID：12332708
> 
> 赞同：2
> 
> 时间：2012-09-08T16:57:50.527
> 
> 标签：.net, wcf, mtom

我正在从 MSDN尝试[这个示例。](http://msdn.microsoft.com/en-us/library/aa395209%28VS.100%29.aspx)

我尝试使用 FileStream 和 WCF 发送文件。

当我发送只有几个字节的小文件时，我得到了输出。但是当我尝试发送一个几 MB 的文件时，我得到一个错误：

> System.ServiceModel.CommunicationException：错误（请求被中止：请求被取消）。

我已经更改了绑定中的最大值并将其设置为更大的值。我也改变了超时。我启用了跟踪，但在跟踪中没有发现错误。

我无法弄清楚这个问题。任何人都可以帮忙吗？

这是服务..配置文件

```
<behaviors>
  <serviceBehaviors>
    <behavior name="wsHttpServiceBehavior">
      <serviceDebug includeExceptionDetailInFaults="false"/>
      <serviceMetadata httpGetEnabled="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>

<bindings>
  <wsHttpBinding>
    <binding name="customWsHttpBinding" messageEncoding="Mtom"
             openTimeout="00:10:00"  maxReceivedMessageSize="2147483647"
             closeTimeout="00:10:00"
             receiveTimeout="00:10:00"
             sendTimeout="00:10:00">
      <readerQuotas maxStringContentLength="2147483647" maxArrayLength="2147483647" maxNameTableCharCount="16384"/>
    </binding>       
  </wsHttpBinding>
</bindings>

<services>
  <service name="MTOMUploadService.UploadService" behaviorConfiguration="wsHttpServiceBehavior">
    <endpoint address="mex" contract="IMetadataExchange" binding="wsHttpBinding"/>
    <endpoint contract="MTOMUploadService.IUploadService" binding="wsHttpBinding"  bindingConfiguration="customWsHttpBinding" />
  </service>
</services> 
```

这是客户端配置....

```
<system.serviceModel>

    <bindings>
        <wsHttpBinding>
            <binding name="WSHttpBinding_IUploadService" closeTimeout="00:10:00"
                openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647"
                messageEncoding="Mtom" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="64" maxStringContentLength="2147483647" maxArrayLength="2147483647"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Message">
                    <transport clientCredentialType="Windows" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true"
                        algorithmSuite="Default" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://machinename:4575/MTOMUploadService.svc"
            binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IUploadService"
            contract="IUploadService" name="WSHttpBinding_IUploadService">
            <identity>
                <servicePrincipalName value="machinename" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T12:12:56.793

只需将其放入您的 wcf web.config 中：

```
<system.web>
  <httpRuntime maxRequestLength="2097151" />
</system.web> 
```

# java - C++ TCP Winsock Server多次接收同一个数据包

> ID：12332709
> 
> 赞同：1
> 
> 时间：2012-09-08T16:58:23.663
> 
> 标签：java, c++, sockets, tcp, winsock

我编写了一个非常简单的 C++ 服务器，我从 Java 应用程序连接到它。C++ 服务器使用winsock2。我正在从我的客户端向服务器发送 UTF8 编码的数字，并且在收到这些数字后，我希望服务器执行一个操作。但是，我的服务器似乎正在接收一系列数字。目前，我让服务器每 1 毫秒侦听一次新消息。

这是我接收消息的 C++ 服务器代码：

```
 bool receive()
     {
          char buffer[1024];
          int inDataLength=recv(Socket,buffer,sizeof(buffer),0);
          if(buffer[0] != '\0')
          {
                     std::cout<<"Client: ";
                     std::cout << buffer;
                     sendKey(string(buffer));  
          }
          else if (inDataLength == 0) //Properly closed connection
          {
             std::cout<<"Connection lost..\r\n";
             return false;
          }    
          return true;
     } 
```

这在一个循环中被调用，如下所示：

```
 while ( receive() )
{
      Sleep(1);
} 
```

这是我的 java 客户端代码，用于在 out 处发送消息`OutputStream = socket.getOutputStream():`

```
public void send(String msg)
{
        try {
            out.write( msg.getBytes("UTF8") );
            out.flush();
            Thread.sleep(100);
        } catch (SocketException e) {
            Global.error("Connection error..");
            //e.printStackTrace();
        } catch (UnsupportedEncodingException e) {

        } catch (IOException e) {
            Global.error("Never connected..\r\n");
        } catch (Exception e)
        { Global.error("Sending failed..\r\n"); }
    } 
```

我得到的是服务器接收例如数字 1，然后是 2，然后是 12，然后是 121 等。没有特定的模式，除非服务器一次接收 2 个数字，它永远不会再开始只接收一个。这是我的 java 代码中唯一将任何内容发送到服务器的地方，并且我在每条消息后刷新缓冲区，所以我认为问题出在我的服务器上，但我对这个问题感到茫然。

任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T01:12:41.883

您忘记了最重要的检查：

```
int inDataLength=recv(Socket,buffer,sizeof(buffer),0);
if (inDataLength == -1 ) {
    std::cerr << "receive error: " << GetLastError() << std::endl;
    return false;
}
... 
```

这实际上可能是您的循环占用大量 CPU 时间的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:01:40.660

鉴于睡眠似乎 recv 没有阻塞。看看[Winsock recv() does not block](https://stackoverflow.com/questions/4159158/c-winsock-recv-does-not-block)。您需要检查返回值中的错误。

# html - 官方 Twitter 关注按钮代码未通过验证器

> ID：12332712
> 
> 赞同：0
> 
> 时间：2012-09-08T16:58:40.980
> 
> 标签：html, twitter, validation, twitter-follow

[我通过Validator](http://validator.w3.org)运行我的网站，它返回了两个错误，这两个错误都与官方 Twitter 关注按钮代码有关。

较大按钮的代码是：

```
<a href="https://twitter.com/gary" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @gary</a>

<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

Validator 在将我的网站检查为 XHTML 1.0 过渡时返回了这些错误：

```
there is no attribute "data-show-count" 
```

和

```
there is no attribute "data-size" 
```

**那么这里的交易是什么？**显然这两个属性是存在的。删除数据大小将返回按钮的较小版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:03:28.150

它应该适用于 HTML5 Doctype。

# javascript - 获取表格中行的背景以更改点击？

> ID：12332714
> 
> 赞同：0
> 
> 时间：2012-09-08T16:58:56.837
> 
> 标签：javascript, css, gwt

当用户执行正确单击时，如何获取表格中行的背景以更改颜色？

我通过 :active 伪类尝试了这个，但没有按我的意愿工作。例如，在移动设备的触摸屏上，一旦用户触摸屏幕，相交的行就会改变颜色，即使它不是单击[单击是短 mouseDown+mouseUp 组合]。

这是表格：

```
<table>
  <tbody>
    <tr>
      <td align="left" style="vertical-align: top;">
        <div class="GPBYFDEEB" 
          __gwtcellbasedwidgetimpldispatchingfocus="true" 
          __gwtcellbasedwidgetimpldispatchingblur="true">
          <div>
            <div class="GPBYFDEAB" tabindex="0" style="outline:none;" __idx="0" onclick="">
              <div class="GPBYFDECB" style="outline:none;" __idx="1" onclick="">
                <!-- finally this is me. -->
                <div class="tableRow"> 
```

这是我的CSS：

```
.tableRow {
    background-color: green;
}

.tableRow:active {
    background-color: red;
} 
```

有没有办法做到这一点？（我正在使用 gwt 来生成上面的 html，但在这里并不重要）。

准确地说，我想要的是在点击事件后，行的背景颜色变为红色。一段时间后，将背景恢复为原始颜色。我基本上是在尝试重现单击 iOS 或 android 本机小部件上的列表项的视觉效果。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:03:12.903

JavaScript 让它变得非常简单：

```
var rows = document.getElementsByClassName("tableRow"); //get the rows
var n = rows.length; //get no. of rows
for(var i = 0; i < n; i ++) {
    var cur = rows[i]; //get the current row;
    cur.onmousedown = function() { //when this row is clicked
        this.style.backgroundColor = "red"; //make its background red
    };
    cur.onmouseup = function() {
        this.style.backgroundColor = "green";
    }
} 
```

如果你有 jQuery，那就更简单了：

```
$(".tableRow").mousedown(function() {
     $(this).css("background-color", "red");
});

$(".tableRow").mouseup(function() {
     $(this).css("background-color", "green");
}); 
```

一个使用纯 JavaScript 版本的小演示：[little link](http://jsfiddle.net/glee/sa77V/)。（我冒昧地改变了一点颜色！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:09:41.463

更改点击样式确实需要 javascript，这并不难，正如@Abody97 在他的回答中已经证明的那样。

我认为值得一提的是`:active`伪选择器代表什么，因为您似乎很困惑。Personnaly 我认为它的名字是精心选择的，如果它被称为 :down 或其他东西会更清楚。因为这正是它的本质。它针对按钮或链接的关闭状态。

每个链接或按钮有 3 种状态：
-*默认*：不需要伪选择器。您可以将其称为“向上”状态。
-*悬停*：以`:hover`伪选择器为目标。仅在使用鼠标时有用，并在鼠标悬停在元素上时触发（对于现代浏览器，这是任何元素，而不仅仅是链接或按钮）
-*活动*：这是我之前提到的向下状态。它是`:active`伪选择器的目标。使用鼠标时，它实际上并没有多大用处，因为只要按住鼠标按钮，它就会被触发。在触摸屏上它更有用，因为它表明用户正确点击。

我不确定你的表格的内容是什么（当它变得有趣时你的 html 片段会停止），但我认为`:focus`伪选择器也值得一提。当元素“具有焦点”时会触发该元素。它仅适用于输入元素（输入、文本区域）或链接（通常仅在使用键盘导航时有用）。我相信这是您尝试使用`:active`.

我在这里设置了一个小示例：http `:focus`: [//jsfiddle.net/6tN6B/](http://jsfiddle.net/6tN6B/) 特别是最后一个示例可能对您有用。使用 js 可以更轻松地完成它，但我非常喜欢仅在绝对必要的情况下使用 js，因此非 js 用户在您的网站上获得相同的体验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T18:13:36.250

这就是您在 GWT 中的操作方式：将处理程序附加到您的 CellTable 或 DataGrid。

```
myTable.addCellPreviewHandler(new Handler<myObject>() {

    @Override
    public void onCellPreview(CellPreviewEvent<myObject> event) {
        if ("click".equals(event.getNativeEvent().getType())) {
           myTable.getRowElement(event.getIndex()).getStyle().setBackgroundColor("red");
        }
    });
} 
```

如果您不喜欢它的外观（背景颜色与边框颜色不同），您可以改用它：

```
myTable.getRowElement(event.getIndex()).addClassName("redRow"); 
```

这样，您可以在 redRow CSS 类中指定更多规则，例如：

```
.redRow {
    background: red;
    border: 2px solid red;
} 
```

当您的行不需要此颜色时，您只需删除此类或使用 .getStyle().clearBackgroundColor()，如果您更喜欢前一种解决方案。

# javascript - 如何通过资产管道从 Javascript 中的子文件夹提供图像

> ID：12332721
> 
> 赞同：2
> 
> 时间：2012-09-08T17:00:15.457
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, asset-pipeline

所以我的 assets/javascripts 文件夹中有一个文件夹，它运行一个名为 galleryview 的图像幻灯片。在这个文件夹内是一个主题目录，其中包含我的“下一个”和“上一个”按钮的图像，因此......

资产/javascripts/galleryview/主题/

现在运行这个的javascript，通过这个链接到这些图像......

```
//Determine path between current page and filmstrip images
//Scan script tags and look for path to GalleryView plugin
        $('script').each(function(i){
            var s = $(this);
            if(s.attr('src') && s.attr('src').match(/jquery\.galleryview/)){
                img_path = s.attr('src').split('jquery.galleryview')[0]+'themes/';
            }
        }); 
```

但是，我现在在 Rails 应用程序中使用它，所以我需要将此 img_path 行指向

资产/图像/

那么我的 imag_path 现在应该是什么样子？

```
img_path = ? 
```

* * *

这是 jsfiddle 上的整个 javascript 文件代码....将其复制并粘贴到编辑器中，我感兴趣的区域在第 389 行附近。

[http://jsfiddle.net/thefonso/Sqmxa/](http://jsfiddle.net/thefonso/Sqmxa/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:48:58.207

不确定这段代码是否能正常工作，但我认为你可以使用[帮助`image_path`程序](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_path)让你接近。就像是：

```
img_path = <%= image_path 'images/'%>; 
```

把它放在一个`.js.erb`文件中，上面显示的 ERB 应该被解析并输出字符串`"/assets/images/"`，分配`img_path`给值`"/assets/themes/"`

当然，你也可以这样做：

```
img_path = "/assets/images/"; 
```

...但我猜，使用帮助程序的好处是，如果“资产”路径发生变化，您无需更新硬编码字符串。

# php - 使用变量名来实例化一个类

> ID：12332723
> 
> 赞同：0
> 
> 时间：2012-09-08T17:00:19.083
> 
> 标签：php, oop, class, controllers

我正在尝试做这样的事情：

`$controller = new $controller . 'Controller';`

如果是，这将创建`PagesController`该类的一个新实例。但是，我收到此错误：`$controller``Pages`

```
Fatal error: Class 'Pages' not found in C:\xampp\htdocs\test\application\app.php on line 25 
```

该类名为`PagesController`.

我以前在 PHP 中看到过此操作，但我找不到任何文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T17:02:11.443

做这个

```
$controller = $controller . 'Controller';
$controller = new $controller(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:03:20.103

尝试：

```
$controller .= 'Controller';
$controller = new $controller(); 
```

文档：
[构造函数和析构函数](http://www.php.net/manual/en/language.oop5.decon.php)
[变量](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-29T18:38:14.470

上述答案仅在您指定完整命名空间时才有效，无论您是否使用过`use`或`namespace`之前使用过。

```
use \App\Article\Health as Health;

$article = new Health; // works fine

$classname = "Health";
$article = new $classname(); // Class 'Health' not found.

$c = "\\App\\Article\\$classname";
$article = new $c(); // works fine 
```

# grails - 在运行时更改 hasMany 属性的类型

> ID：12332727
> 
> 赞同：0
> 
> 时间：2012-09-08T17:01:21.100
> 
> 标签：grails, groovy

在以下域类中：

```
class Quest {
    String name
    static hasMany = [ tasks : Task ]
} 
```

是否可以使用 ExpandoMetaClass （或任何其他机制！）来更改`tasks`类型，例如在**运行时**`Set`从to ？`List`

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:06:29.767

否。如果您需要 a或类似内容，请使用 a`List`并将其转换为。由于您无法在没有随机顺序的情况下做出 a ，因此这个想法似乎朝着错误的方向发展。`Collection``Set``List``Set`**

# shell - 命令完成后到 vim 缓冲区的外部输出

> ID：12332732
> 
> 赞同：2
> 
> 时间：2012-09-08T17:02:09.323
> 
> 标签：shell, vim, racket

*我目前在 Windows 7 上使用 gVim*

运行如下命令：

```
:r! racket % 
```

我能够在大约一半的时间内成功读取所需的输出。其余时间，什么也不读。在 shell 执行终止并实际生成一些输出之前，vim 在输出中读取似乎是一个问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:28:39.513

从`:help :r!`

```
:[range]r[ead] !{cmd}   Execute {cmd} and insert its standard output below
            the cursor or the specified line.  A temporary file is
            used to store the output of the command which is then
            read into the buffer.  'shellredir' is used to save
            the output of the command, which can be set to include
            stderr or not.  {cmd} is executed like with ":!{cmd}",
            any '!' is replaced with the previous command |:!|. 
```

可能是您需要设置`:help shellredir`为包含 stderr。

# javascript - 应用程序在呈现 Jquery Mobile 之前显示无样式的 Html

> ID：12332733
> 
> 赞同：5
> 
> 时间：2012-09-08T17:02:10.570
> 
> 标签：javascript, jquery, asp.net, jquery-mobile

我正在向我的应用程序动态添加标记，下面是一个示例代码..

```
$(document).bind("pagechange", function (event, ui) {
  var header = '<h3>' + appNames[i] + '</h3>';

        var ulHeader = '<ul data-role="listview" id="myAppsGridTable" data-inset="true">';

..
   $('.myBodyContent', ui.toPage).append(collapse + header + ulHeader + entire_list + '</ul>' + '</div>');
    $('#NicksPage').trigger('create');

}); 
```

我在我的 Default.aspx 页面中有对这个页面的引用，在母版页中有对 jquery mobile 的引用。当您导航到“默认”时，用户会看到原始的 unstlyed html 添加到页面中，然后闪烁并且 jquery 移动样式进入。无论如何我可以摆脱在添加 jquery 移动样式之前向用户显示 unstlyed html 吗？

这是我的母版页的副本：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="UserMobile.master.cs" Inherits="User.Mobile.UserMobile" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head id="Head1" runat="server">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="Css/jquery.mobile.custom.structure.min.css" rel="stylesheet" type="text/css" />
    <link href="Css/jquery.mobile.custom.theme.min.css" rel="stylesheet" type="text/css" />

    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head>

<body>

<div data-role="page" data-theme="b" id="NicksPage">

    <div data-role="header" data-position="fixed" data-theme="b">

         <asp:ContentPlaceHolder ID="TopHeaderContent" runat="server"></asp:ContentPlaceHolder>

    </div><!-- /header -->

    <div data-role="content" class="myBodyContent"> 

 <asp:ContentPlaceHolder ID="MainContent" runat="server"></asp:ContentPlaceHolder>

    </div><!-- /content -->

    <div data-role="footer" data-position="fixed" data-theme="b">
    <asp:ContentPlaceHolder ID="FooterContent" runat="server"></asp:ContentPlaceHolder>

    <input type="hidden" id="collapse_value" value="false" />
    </div><!-- /footer -->

</div><!-- /page -->

   //Combined jquery 1.8 and jquery mobile files in one
   <script src="Js/JQ_JQM_combined.js" type="text/javascript"></script>

    //Makes ajax calls to get data
    <script src="Js/UserMobile.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(document).ready(function () {

            // disable page transitions
            $.mobile.ajaxEnabled = false;
            $.mobile.defaultPageTransition = 'none';
        });

    </script>
     <asp:ContentPlaceHolder ID="ScriptContent" runat="server"></asp:ContentPlaceHolder>

</body>

</html> 
```

甚至主页也有闪烁问题，它呈现无样式，然后在一段时间后正确设置为 jquery mobile ..

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Mobile/UserMobile.Master" AutoEventWireup="true" CodeBehind="Home.aspx.cs" Inherits="User.Mobile.Home" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="TopHeaderContent" runat="server">
    <h1>
        Applications</h1>
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="MainContent" runat="server">
<div data-role="controlgroup">
<a href="MyStuff.aspx?name=nick&id=1234" data-role="button">My Stuff</a>
<a href="Employees.aspx?name=nick&id=1234" data-role="button">Employees</a>
<a href="list.aspx?name=nick&id=1234" data-role="button">List</a>

</div>

</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="FooterContent" runat="server">
    <div class="lines">
        <div class="footerCopyrightContainer">
            <div class="footerCopyright">
                &copy;2012 NICK ALL RIGHTS RESERVED.</div>
        </div>
    </div>
</asp:Content> 
```

我更改了代码以反映您的小提琴示例，但仍然闪烁。但是“无样式到样式的闪烁时间较短，用户仍然可以在移动浏览器中看到无样式的页面。你能看看我是如何设置它的吗？我错过了什么吗？

```
$(document).bind("pagecreate", function (event, ui) {

    //gets params needed from querystring
    arrQrStr = getQueryStringParams();
    name = arrQrStr["name"];
    id = arrQrStr["id"];

});

$(document).delegate('div[data-role=page]', 'pagebeforeshow', function (e, data) {

    var employees = null;

    //returns string of html needed
    employees = getData(name, id);

    $('.myBodyContent', this).html(employees);

    $(this).trigger('create');

}); 
```

getData ajax 调用..

```
 $.ajax({
        type: "POST",
        url: "MobileService.svc/REST/GetData",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify({ id: id}),
        dataType: "json",
        async: false,
        success: function (msg) { 
```

问题来自于此：

```
 <script type="text/javascript">
      $(document).ready(function () {

          // disable page transitions
          $.mobile.ajaxEnabled = false;
          $.mobile.defaultPageTransition = 'none';

      });

    </script> 
```

如果我把它从母版页中取出，闪烁就会消失，它可以很好地导航一个页面，但数据不会显示。取出这个脚本会破坏 ajax 调用和 jquery 移动事件不参与（我不知道为什么）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:41:48.207

尝试将您的 jquery 移动源脚本放在头部，而不是放在正文的末尾。

这是我可以保证用户永远不会看到无样式的 html 的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:01:46.640

听起来您误解了[启用 ajax 的](http://jquerymobile.com/demos/1.1.1/docs/pages/page-links.html)设置是如何工作的。

默认情况下，启用此设置，当您链接到另一个页面时，JQM 会拉入它`data-role="page"`在链接页面上找到的第一个 JQM 页面 ( )（因此您不能链接到`multipage`文档）并*增强*它（初始化所有 JQM 小部件) 然后将其附加到当前页面的 DOM 中。当 JQM 执行此操作时，它**只会**拉入 JQM 页面，而不会拉入该页面上的*任何其他*内容（因此第二页上的任何脚本和样式[都不会](http://jquerymobile.com/demos/1.1.1/docs/pages/page-scripting.html)产生任何影响）。处理此问题的方法是将所有脚本放在当前*主页*中。如果这样做，您需要注意的一件事是，您最终可能会得到多个相同的页面`id`（实际上使用您当前的设置，您肯定会有重复的`ids`）所以您可能想要选择它们`class`。

另一方面，如果`ajax enabled`设置为`false`，则它的行为类似于常规链接，在这种情况下会加载整个页面，并且如果您的 JQM 脚本位于底部，那么在加载之前它将无法增强 DOM，这就是您的原因看到那闪烁。

作为一个侧面，`page transistions are only available if`ajax 启用了`is set to`true`。

总而言之，除非您有理由不这样做，否则您可能应该`ajax enabled`设置为 true，并在您的主页上包含相关脚本。如果您需要使用`ajax enabled`set 来`false`尝试将 jQuery 脚本放在标头中，以便它们在 DOM 的其余部分之前加载。

或者，您可以做的是隐藏容器元素，您将在其中附加 html，然后在完成后显示它，例如

CSS

```
.displayNone { display: none; } 
```

HTML

```
 <div data-role="content" class="myBodyContent displayNone"> 
      <asp:ContentPlaceHolder ID="MainContent" runat="server"></asp:ContentPlaceHolder>
    </div> 
```

JS

```
 $('.myBodyContent', this).html(employees);
    $(this).trigger('create');
    $('.myBodyContent', this).reomveClass('displayNone'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T19:35:17.327

尝试使用`pagebeforeshow`而不是`pagechange`. 像这样：

```
$(document).delegate('div[data-role=page]', 'pagebeforeshow', function(e, data){
    var toPage = this; // this references the page that is about to be shown
    // Add items to the page
}); 
```

`pagebeforeshow`在实际转换动画开始之前，在转换到的“toPage”上触发该事件。这允许您在向用户显示之前添加元素和样式。

我希望这有帮助！

**编辑**

这是一个实施了建议修复的[JSFiddle](http://jsfiddle.net/Rthpv/5/)。

# c++ - Lua to c++，实体修改的实例化函数

> ID：12332738
> 
> 赞同：1
> 
> 时间：2012-09-08T17:02:45.340
> 
> 标签：c++, lua

我一直在研究一个简单的基于组件的 c++ 和 lua 游戏引擎。目前所有的子系统，如音频和物理，都可以从 lua 调用，并使用`luaL_newlib`.

我遇到的问题是 lua 脚本如何调用函数来修改其实体。Like`SetPosition()`显然需要在实体实例而不是静态函数上调用。那么有没有办法让我拥有这些实例化的功能。

我的一个想法是每个实体都为自己注册函数，并使用它唯一的模块名称。所以它看起来像`entity1.Setposition`和`entity2.Setposition`。是否可以注册，有效地复制这样的功能？

或者是否有另一种方法可以拥有这样的实例化函数，以便组件可以修改它们所属的实体？

如果我对自己的解释很糟糕，请务必说出来，我很乐意提供更多信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T17:08:41.170

Lua 有“实例方法”的语法糖。如果您使用冒号而不是点调用函数，如下所示：

```
entity1:SetPosition(...) 
```

然后 Lua 将其重写为：

```
entity1.SetPosition(entity, ...) 
```

换句话说，它添加了一个隐式的第一个参数，即调用该方法的对象。在 C 方面，您只会看到一个额外的参数。这是创建实例方法的首选方式。

* * *

另外两件值得注意的事情：上面的重写并不是真正发生的事情。如果你做这样的事情：

```
SomeFunctionReturningEntity():SetPosition(...) 
```

它不会将其重写为

```
SomeFunctionReturningEntity().SetPosition(SomeFunctionReturningEntity(), ...) 
```

正如您所期望的那样，它实际上只调用了一次该函数。

此外，如果您是从 Lua 本身而不是 C 编写实例方法，则可以使用语法糖来声明：

```
function entity1:SetPosition(...)
end 
```

这相当于：

```
function entity1.SetPosition(self, ...)
end 
```

即它将隐式的第一个参数添加到函数中，并调用它`self`。

（顺便说一句，这也相当于：

```
entity1.SetPosition = function(self, ...)
end 
```

从技术上讲，即使在表中声明一个函数也是语法糖。）

# php - 在多个相册文件夹中查看的动态图片库

> ID：12332743
> 
> 赞同：1
> 
> 时间：2012-09-08T17:03:14.670
> 
> 标签：php, javascript, jquery, html, flash

任何人都可以就动态的客户端图像库提供建议。

基本上我想要的是在我的网站上的一个画廊，其中包含多个相册和相册中的图像。能够将图像动态添加到文件夹或远程站点（例如 Photobucket 或 Picasa）和网页，以便能够动态显示它们而无需任何进一步的编码，避免每次添加新代码行的麻烦图像被添加。

任何人都在使用这样的东西，或者可以指出我正确的方向吗？

非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:37:05.307

我在 Picasa Webalbum Integrator javascript 库中找到了我想要的东西。

[http://code.google.com/p/pwi/](http://code.google.com/p/pwi/)

# google-maps - 动态调整谷歌地图边界

> ID：12332747
> 
> 赞同：2
> 
> 时间：2012-09-08T17:03:27.903
> 
> 标签：google-maps

好的，情况是这样的：我有一个相对较小的 350px x 350px 的地图。我有某个州所有国会选区的坐标数据。我创建了一个带有控件的谷歌地图，允许我选择一个地区类型（州议会、州参议院、美国议会），然后选择一个特定的地区。这会触发一个事件，该事件依次执行一个函数，该函数检索描述该地区的坐标数据，从数据中创建一个多边形并将其显示在地图上。所有这一切都很好，除了形状和大小的广泛变化有时会导致多边形太小（或太大，取决于缩放级别）这一事实。我反复尝试找到一种方法来动态调整地图的边界但无济于事。这是我最近的尝试。很遗憾，fitBounds 将坚持添加令人愤怒的填充。任何人都可以帮忙吗？也许那里的三角天才有解决方案？我还应该提到，所有用户控件都被禁用，因为这是为了自动生成 PDF。

```
PdfGenerator.data.currentPolygon.setMap(PdfGenerator.data.smallMap);

overlay = new google.maps.OverlayView();
overlay.draw = function() {};
overlay.setMap(PdfGenerator.data.smallMap);

google.maps.event.addListenerOnce(PdfGenerator.data.smallMap, 'idle', function() {
    swCoords = overlay.getProjection().fromDivPixelToLatLng(
        new google.maps.Point(0, 350)
    );
    neCoords = overlay.getProjection().fromDivPixelToLatLng(
        new google.maps.Point(350, 0)
    );

    var bounds = PdfGenerator.data.currentBounds;
    bounds.extend(swCoords);
    bounds.extend(neCoords);

    PdfGenerator.data.smallMap.fitBounds(
        bounds
    );
}); 
```

# hibernate - IUserType 到默认 UTC 时间戳不持久值

> ID：12332748
> 
> 赞同：0
> 
> 时间：2012-09-08T17:03:42.333
> 
> 标签：hibernate, nhibernate, fluent-nhibernate, nhibernate-mapping, iusertype

我构建了一个 IUserType 类来默认记录上的 UTC 创建时间戳。我以为我正确地实现了它，但它对数据库没有任何保留。有人可以告诉我我做错了什么吗？该类类似于：

```
public class UTCTimeStamp : IUserType
{
    public object Assemble(object cached, object owner)
    {
        return DeepCopy(cached);
    }

    public object DeepCopy(object value)
    {
        var orig = value as Nullable<DateTime>;
        if (orig == null) return null;
        var newVal = new DateTime(
            ((DateTime)orig).Ticks);
        return newVal;
    }

    public object Disassemble(object value)
    {
        return DeepCopy(value);
    }

    public bool Equals(object x, object y)
    {
        if (ReferenceEquals(x, y)) return true;
        if (x == null || y == null) return false;
        return x.Equals(y);
    }

    public int GetHashCode(object x)
    {
        if (x == null)
        {
            throw new ArgumentNullException("Argument cannot be null.");
        }
        return x.GetHashCode();
    }

    public bool IsMutable
    {
        get { return false; }
    }

    public object NullSafeGet(System.Data.IDataReader rs, string[] names, object owner)
    {
        var timestamp = NHibernate.NHibernateUtil.DateTime.NullSafeGet(rs, names[0]);
        if (timestamp != null && timestamp is DateTime)
        {
            return (DateTime)timestamp;
        }
        return null;
    }

    public void NullSafeSet(System.Data.IDbCommand cmd, object value, int index)
    {
        if (value == null || !(value is Nullable<DateTime>))
        {
            NHibernate.NHibernateUtil.DateTime.NullSafeSet(cmd, DateTime.UtcNow, index);
            return;
        }
        NHibernate.NHibernateUtil.DateTime.NullSafeSet(
            cmd, value, index);
    }

    public object Replace(object original, object target, object owner)
    {
        return original;
    }

    public Type ReturnedType
    {
        get
        {
            return typeof(Nullable<DateTime>);
        }
    }

    public NHibernate.SqlTypes.SqlType[] SqlTypes
    {
        get
        {
            return new[] { new SqlType(System.Data.DbType.DateTime) };
        }
    }
} 
```

映射如下所示：

```
Map(x => x.CreatedTimestamp)
    .Column("CreatedTimeStamp")
    .CustomType<UTCTimeStamp>()
    .Not.Nullable(); 
```

数据库正在获取`-infinty`记录的价值（PostgreSQL）。我不知道我做错了什么；有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:50:01.713

好的，问题与实现无关`IUserType`；我将我的 POCO 定义为`DateTime`，不是`Nullable<DateTime>`，所以它们默认为`DateTime.MinValue`.

一旦我改变了这一点，一切都完全按照我的意愿工作。

# javascript - 如何从jquery自动完成中获取对象值

> ID：12332769
> 
> 赞同：0
> 
> 时间：2012-09-08T17:07:32.547
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我有一个要搜索的名称列表，其中还包含一个 id 值，我想在选择时使用它来查找更多信息并使用它填充表单。生成的列表如下所示：

```
<script>
$(function() {
    var allplayers = [
    { label: "Name of one", id:"1393" }, 
            { label: "Name of two", id:"325" }, 
            { label: "Name of one", id:"637" }
            ];
    }

    $( "#searchplayers" ).autocomplete({
        source: allplayers
    });

$( "#searchplayers" ).bind( "autocompleteselect", function(event, ui) {
          alert(ui.item.id);  //this is how to get item id
});
</script> 
```

现在它只是将值添加到文本输入中，我如何在调用 select 函数时获取与其关联的 id。如何获取对象的 id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:12:27.777

我认为 ui 对象有一个项目

```
$( "#searchplayers" ).bind( "autocompleteselect", function(event, ui) {
    console.log(ui.item);
}); 
```

# c++ - 为什么容器移动赋值运算符不是 noexcept？

> ID：12332772
> 
> 赞同：42
> 
> 时间：2012-09-08T17:07:39.550
> 
> 标签：c++, c++11

我注意到`std::string`'s (really `std::basic_string`'s) 移动赋值运算符是 `noexcept`. 这对我来说很有意义。但后来我注意到没有一个标准容器（例如 , `std::vector`, `std::deque`, `std::list`）`std::map`声明它的移动赋值运算符`noexcept`。这对我来说意义不大。例如， A`std::vector`通常实现为三个指针，并且指针当然可以移动分配而不会引发异常。然后我认为问题可能在于移动容器的分配器，但是`std::string`' 也有分配器，所以如果这是问题，我希望它会影响`std::string`.

那么为什么是`std::string`移动赋值运算符`noexcept`，而标准容器的移动赋值运算符却不是呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-08T22:15:47.323

我相信我们正在研究标准缺陷。如果将`noexcept`规范应用于移动赋值运算符，则该规范有些复杂。而且我相信这个陈述是真实的，无论我们是在谈论`basic_string`还是`vector`。

基于 [container.requirements.general]/p7 我对容器移动赋值运算符应该做的事情的英文翻译是：

```
C& operator=(C&& c) 
```

> 如果`alloc_traits::propagate_on_container_move_assignment::value`是 `true`，则转储资源，移动分配分配器，并从 转移资源`c`。
> 
> 如果 `alloc_traits::propagate_on_container_move_assignment::value`是`false` and `get_allocator() == c.get_allocator()`，则转储资源，并从 传输资源`c`。
> 
> 如果 `alloc_traits::propagate_on_container_move_assignment::value`是`false` and `get_allocator() != c.get_allocator()`，则移动分配每个`c[i]`。

笔记：

1.  `alloc_traits`指`allocator_traits<allocator_type>`.

2.  何时`alloc_traits::propagate_on_container_move_assignment::value`可以`true`指定移动赋值运算符，`noexcept`因为它要做的只是解除当前资源的分配，然后从源中窃取资源。同样在这种情况下，分配器也必须被移动分配，并且移动分配必须是`noexcept`容器的移动分配`noexcept`。

3.  什么时候`alloc_traits::propagate_on_container_move_assignment::value`是`false`，如果两个分配器相等，那么它将做与#2 相同的事情。但是，直到运行时才知道分配器是否相等，因此您不能`noexcept`基于这种可能性。

4.  什么时候`alloc_traits::propagate_on_container_move_assignment::value`是`false`，并且如果两个分配器**不**相等，则必须移动分配每个单独的元素。这可能涉及向目标添加容量或节点，因此本质上是`noexcept(false)`.

总而言之：

```
C& operator=(C&& c)
        noexcept(
             alloc_traits::propagate_on_container_move_assignment::value &&
             is_nothrow_move_assignable<allocator_type>::value); 
```

而且我认为在上述规范中没有任何依赖性`C::value_type`，因此我相信它应该同样适用于`std::basic_string`尽管 C++11 另有规定。

**更新**

在下面的评论中，哥伦布正确地指出，事情一直在逐渐发生变化。我上面的评论是相对于 C++11 的。

对于 C++17 草案（此时似乎很稳定），情况发生了一些变化：

1.  如果`alloc_traits::propagate_on_container_move_assignment::value`是`true`，则规范现在要求`allocator_type`不抛出异常的移动分配 (17.6.3.5 [allocator.requirements]/p4)。因此不再需要检查`is_nothrow_move_assignable<allocator_type>::value`。

2.  `alloc_traits::is_always_equal`已添加。如果这是真的，那么可以在编译时确定上面的第 3 点不能抛出，因为可以转移资源。

所以`noexcept`容器的新规范可能是：

```
C& operator=(C&& c)
        noexcept(
             alloc_traits::propagate_on_container_move_assignment{} ||
             alloc_traits::is_always_equal{}); 
```

并且，对于`std::allocator<T>`和`alloc_traits::propagate_on_container_move_assignment{}`都是`alloc_traits::is_always_equal{}`真的。

现在在 C++17 草案中，移动赋值`vector`和`string`移动赋值都*完全符合*这个`noexcept`规范。然而，其他容器带有此`noexcept`规范的变体。

如果您关心这个问题，最安全的做法是测试您关心的容器的明确专业化。我在`container<T>`这里为 VS、libstdc++ 和 libc++ 做了这些：

[http://howardhinnant.github.io/container_summary.html](http://howardhinnant.github.io/container_summary.html)

这项调查大约有一年的历史，但据我所知仍然有效。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-08T17:33:33.687

我认为这样做的原因是这样的。

`basic_string`仅适用于非数组 POD 类型。因此，它们的析构函数必须是微不足道的。这意味着如果您执行`swap`for 移动分配，那么移动到的字符串的原始内容还没有被破坏对您来说并不重要。

而容器（`basic_string`在技术上不是 C++ 规范的容器）可以包含任意类型。具有析构函数的类型，或包含具有析构函数的对象的类型。这意味着用户更重要的是保持对对象*何时*被销毁的准确控制。它特别指出：

> **[移动到的对象]的**所有现有元素要么被移动分配到要么被销毁。

所以这个区别是有道理的。`noexcept`一旦开始释放内存（通过分配器），就不能进行移动分配，因为这可能会因异常而失败。因此，一旦您开始要求在移动分配时释放内存，您就放弃了强制执行`noexcept`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-08T02:54:10.217

容器类中的移动赋值运算符被定义为 noexcept，因为许多容器旨在实现强大的异常安全保证。容器实现了强大的异常安全保证，因为在没有移动赋值运算符之前，容器必须被复制。如果副本出现任何问题，则删除新存储并且容器保持不变。现在我们被这种行为困住了。如果移动赋值操作不是 noexcept，则调用较慢的复制赋值运算符。

# java - 如何使用苹果的 handleQuit 方法？

> ID：12332776
> 
> 赞同：2
> 
> 时间：2012-09-08T17:08:09.580
> 
> 标签：java, macos

我制作了一个将数据保存到 .data 文件的 java 应用程序。我有一个窗口监听器，它监听应用程序关闭以触发代码将数据保存到文件中。当按下我拥有的专用退出按钮或按下窗口上的红色“X”时，一切都很好。但是，当用户选择 command + q route 时，事情就变糟了。应用程序已退出，但数据未保存。如何正确实现苹果的 handleQuit(Application Event e) 方法来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T17:15:57.597

在这种情况下，您想要的是一个[关闭挂钩](http://www.developerfeed.com/threads/tutorial/understanding-java-shutdown-hook)。关闭挂钩侦听操作系统信号以关闭应用程序，并在发送此信号时触发。关闭挂钩几乎可以运行任何代码。

您可以连接内置的红色“X”按钮来关闭应用程序（而不是保存文件），关闭挂钩将捕获请求并负责保存文件。

唯一需要注意的是，关闭挂钩应该由执行时间不长的代码组成。因此，文件的保存时间不应超过一两秒，并且您不应使用用户必须在关闭挂钩中确认的确认对话框，因为在用户识别之前可能需要不确定的时间对话框。

关闭挂钩应该是短暂的原因是当应用程序被请求关闭时，操作系统通常希望它在合理的时间内关闭。如果没有，例如在 Windows 中，操作系统可能会显示其中之一，“应用程序没有响应......”消息。

最后，您以后可能会遇到这个问题，您可能想知道如何从任务管理器（或 OS X 上的“强制退出应用程序”对话框）捕获“强制退出”请求。好吧，你抓不到那些，你不应该尝试！虽然[可以禁用诸如在 Force Quit 菜单中列出您的应用程序之类的功能](https://stackoverflow.com/questions/3145677/java-disable-osx-force-quit)，但这是一个完整的 hack，应该不惜一切代价避免。如果您在设计应用程序时试图绕过用户和管理员应该始终可用的选项，那么这强烈表明您的应用程序设计不佳和/或行为不佳。想象一下，如果你安装了一个以这种方式运行的应用程序——你会不会认为程序员在试图赋予他们的应用程序不可杀死的特性时是懒惰或可能是恶意的？

此外，强制退出是一种强制（不正常）关闭，只能在应用程序挂起且无法正常退出时使用。操作系统需要有一种强制退出选项，以便用户或管理员有办法杀死失控或无响应的应用程序。如果您的用户强制退出您的应用程序，他们要么误解了强制退出是不可取的，要么是您的应用程序的设计使强制退出比正常退出您的应用程序更有利。如果是这种情况（例如，您从用户那里听说他们出于某种原因强制退出），这通常表明您的应用程序的某些部分设计不佳，无法满足用户的期望。

# php - 如何通过包含的 php 脚本在导航时获得 CSS 样式？

> ID：12332780
> 
> 赞同：0
> 
> 时间：2012-09-08T17:08:34.360
> 
> 标签：php, html, css, header, navigation

我正在构建一个使用包含 php 脚本的网站。

我有一个 header.php 文件，其中包含徽标和导航，以及一个包含信息的 footer.php 文件。这些是从主要内容文件加载的，例如，从主页，我有一个`<?php include 'header.php'; ?>`脚本。

我遇到的主要问题是导航。因为它包含在标题中，所以没有一种格式可以正常工作，所以当我点击一个页面时，CSS 样式不会改变，因此用户知道他们在哪个页面上。根据我收集的信息，header.php 文件正在刷新信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:12:39.590

包含`header.php`文件不会影响这一点，因为 CSS 是在客户端处理的。

你需要做的是让你的 header.php 文件知道它在哪个页面上，这样它就可以为适合该页面的导航元素分配一个类。然后确保你的 CSS 中有一条规则，明确规定任何具有该类的导航元素都将被适当地突出显示。

一个*粗略*的例子：

**页面.php**

```
$current_page = 'home';
include('header.php'); 
```

**头文件.php**

```
<ul>
  <li<?php if ($current_page === 'home') echo ' class="highlight"'?>><a href="/">Home</a></li>
  <li<?php if ($current_page === 'about') echo ' class="highlight"'?>><a href="/">About</a></li>
</ul> 
```

# java - SMSLib 不接收短信 [java 版]

> ID：12332783
> 
> 赞同：3
> 
> 时间：2012-09-08T17:08:42.740
> 
> 标签：java, sms, nokia, gsm, smslib

我正在尝试将我的手机用作 GSM 调制解调器。我使用 SMSLib 通过此调制解调器发送和接收 SMS。问题是，当我的手机（GSM 调制解调器）收到短信时，我不会通过 SMSLib 通知。但代码整体很好，例如当 GSM 调制解调器接到电话时会通知我。我的代码没有任何错误，因为我只使用 SMSLib 示例代码来接收消息。SMSLib 示例代码是：

```
public class TestSinaRec
{
    public void doIt() throws Exception
    {
        // Define a list which will hold the read messages.
        List<InboundMessage> msgList;
        // Create the notification callback method for inbound & status report
        // messages.
        InboundNotification inboundNotification = new InboundNotification();
        // Create the notification callback method for inbound voice calls.
        CallNotification callNotification = new CallNotification();
        //Create the notification callback method for gateway statuses.
        GatewayStatusNotification statusNotification = new GatewayStatusNotification();
        OrphanedMessageNotification orphanedMessageNotification = new OrphanedMessageNotification();
        try
        {
            System.out.println("Example: Read messages from a serial gsm modem.");
            System.out.println(Library.getLibraryDescription());
            System.out.println("Version: " + Library.getLibraryVersion());
            // Create the Gateway representing the serial GSM modem.
            SerialModemGateway gateway = new SerialModemGateway("modem.com4", "COM4", 115200, "Nokia", " 6303i");
            // Set the modem protocol to PDU (alternative is TEXT). PDU is the default, anyway...
            gateway.setProtocol(Protocols.PDU);
            // Do we want the Gateway to be used for Inbound messages?
            gateway.setInbound(true);
            // Do we want the Gateway to be used for Outbound messages?
            gateway.setOutbound(true);
            // Let SMSLib know which is the SIM PIN.
            gateway.setSimPin("0444");
            // Set up the notification methods.
            Service.getInstance().setInboundMessageNotification(inboundNotification);
            Service.getInstance().setCallNotification(callNotification);
            Service.getInstance().setGatewayStatusNotification(statusNotification);
            Service.getInstance().setOrphanedMessageNotification(orphanedMessageNotification);
            // Add the Gateway to the Service object.
            Service.getInstance().addGateway(gateway);
            // Similarly, you may define as many Gateway objects, representing
            // various GSM modems, add them in the Service object and control all of them.
            // Start! (i.e. connect to all defined Gateways)
            Service.getInstance().startService();
            // Printout some general information about the modem.
            System.out.println();
            System.out.println("Modem Information:");
            System.out.println("  Manufacturer: " + gateway.getManufacturer());
            System.out.println("  Model: " + gateway.getModel());
            System.out.println("  Serial No: " + gateway.getSerialNo());
            System.out.println("  SIM IMSI: " + gateway.getImsi());
            System.out.println("  Signal Level: " + gateway.getSignalLevel() + " dBm");
            System.out.println("  Battery Level: " + gateway.getBatteryLevel() + "%");
            System.out.println();
            // In case you work with encrypted messages, its a good time to declare your keys.
            // Create a new AES Key with a known key value. 
            // Register it in KeyManager in order to keep it active. SMSLib will then automatically
            // encrypt / decrypt all messages send to / received from this number.
            //Service.getInstance().getKeyManager().registerKey("+306948494037", new AESKey(new SecretKeySpec("0011223344556677".getBytes(), "AES")));
            // Read Messages. The reading is done via the Service object and
            // affects all Gateway objects defined. This can also be more directed to a specific
            // Gateway - look the JavaDocs for information on the Service method calls.
            msgList = new ArrayList<InboundMessage>();
            Service.getInstance().readMessages(msgList, MessageClasses.ALL);
            for (InboundMessage msg : msgList)
                System.out.println(msg);
            // Sleep now. Emulate real world situation and give a chance to the notifications
            // methods to be called in the event of message or voice call reception.
            System.out.println("Now Sleeping - Hit <enter> to stop service.");
            System.in.read();
            System.in.read();
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            Service.getInstance().stopService();
        }
    }

    public class InboundNotification implements IInboundMessageNotification
    {
        public void process(AGateway gateway, MessageTypes msgType, InboundMessage msg)
        {
            if (msgType == MessageTypes.INBOUND) System.out.println(">>> New Inbound message detected from Gateway: " + gateway.getGatewayId());
            else if (msgType == MessageTypes.STATUSREPORT) System.out.println(">>> New Inbound Status Report message detected from Gateway: " + gateway.getGatewayId());
            System.out.println(msg);
        }
    }

    public class CallNotification implements ICallNotification
    {
        public void process(AGateway gateway, String callerId)
        {
            System.out.println(">>> New call detected from Gateway: " + gateway.getGatewayId() + " : " + callerId);
        }
    }

    public class GatewayStatusNotification implements IGatewayStatusNotification
    {
        public void process(AGateway gateway, GatewayStatuses oldStatus, GatewayStatuses newStatus)
        {
            System.out.println(">>> Gateway Status change for " + gateway.getGatewayId() + ", OLD: " + oldStatus + " -> NEW: " + newStatus);
        }
    }

    public class OrphanedMessageNotification implements IOrphanedMessageNotification
    {
        public boolean process(AGateway gateway, InboundMessage msg)
        {
            System.out.println(">>> Orphaned message part detected from " + gateway.getGatewayId());
            System.out.println(msg);
            // Since we are just testing, return FALSE and keep the orphaned message part.
            return false;
        }
    }

    public static void main(String args[])
    {
        TestSinaRec app = new TestSinaRec();
        try
        {
            app.doIt();
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

程序输出例如：

> modem.com4 的网关状态更改，旧：已停止 -> 新：正在启动 modem.com4 的网关状态更改，旧：正在启动 -> 新：已启动
> 
> 调制解调器信息： 制造商：Nokia 型号：Nokia 6303i classic 序列号：35538​​2041051833 SIM IMSI：** MASKED ** 信号电平：-57 dBm 电池电量：91%
> 
> Now Sleeping - 点击停止服务。从网关检测到新呼叫：modem.com4：+989111007483 从网关检测到新呼叫：modem.com4：+989111007483

当我搜索这个问题时，我发现了这个：

> 此方法的正确操作取决于主动提供的调制解调器指示和 CNMI 命令的正确操作。如果您发现使用回调方法无法接收消息，则可能是调制解调器指示设置不正确。

所以我用诺基亚 6303i 而不是我首先使用的诺基亚 5200 更换了我的手机（我的 GSM 调制解调器），但问题没有解决。所以现在我真的不知道选择其他手机会解决这个问题吗？！或者我应该寻找更好、更合理的解决方案。

感谢您为解决此问题提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:39:52.917

那么我唯一能想到的就是你正在启动`Service`然后**将**SMS发送到调制解调器。因此，不会调用此行：`Service.getInstance().readMessages(msgList, MessageClasses.ALL);`. 但是，您仍然应该收到新消息已到达调制解调器的通知。

`InboundNotification`当它在调制解调器上检测到任何新消息时，尝试实现以获取消息。通过覆盖该`process()`方法来做到这一点。

但是，这也可能是因为您实际上按`<Enter>`得太早了。正如评论所说；你必须等待去给通知方法一个被调用的机会。

有时它就是这么愚蠢的事情。让我知道它是否有帮助，或者我是否完全误解了您的问题。我自己正在开发一个多调制解调器网关，所以我很乐意提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:16:44.667

我遇到了 GT-I9000 的问题，他收到了入站警报，但无法获取正确的短信对象，我认为这是存储位置的问题，我尝试使用另一部手机（三星 GT-S5670 Android）我的朋友在 SIM 卡内存中存储了一些消息，通知了 smslibrary 并且 ReadMessages 类记录了所有消息。

所以我认为您需要找到某种方式来更改 ReadMessages.java 上的存储位置，或者找到可以将短信存储到 SIM 卡而不是手机内存的兼容手机。

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T17:20:42.220

问题出在我的手机上。Smslib 不适用于各种手机（包括智能手机、大多数诺基亚手机等）的收听短信。我没有检查，但如果你使用专用的可能会解决这个问题GSM调制解调器（如华为GSM调制解调器）

# c# - App.config.exe 连接字符串技巧

> ID：12332787
> 
> 赞同：1
> 
> 时间：2012-09-08T17:09:04.057
> 
> 标签：c#, sql

我正在尝试使用 SQL Server 2008 数据库在 C# 中开发多客户端，在制作安装文件并将其安装到客户端后，我无法访问服务器中的数据库。我使用 LINQ 连接数据库并在我的项目中有 App.config xml 文件，该文件 ConnectionString 在那里声明，我在安装应用程序后将该 XML 文件的 ConnectionString 更改为正确的方式（服务器名称和 sql 实例名称），但此更改没有有什么影响，什么问题可能有我的解决方案？如果有人有开发多客户端应用程序的经验，请与我分享。以及如何将项目属性的范围从应用程序更改为用户，这可能会解决我的问题

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:13:22.237

在这个项目中，我们使用 LINQ 将数据库连接到服务器，我们可以从用户界面动态获取正确的数据库地址，并在 DataContext 的构造函数中使用它：

```
public DataClasses1DataContext(string connection) 
```

然后它不在乎嵌入连接字符串，它仅在其构造函数中使用该连接字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T22:46:16.203

如果错误提到“提供程序：命名管道提供程序”，那么您的应用程序正在尝试通过命名管道连接到您的 SQL Server，这是您想要的吗？您可以在服务器名称前加上 tcp: 以强制使用 TCP/IP，即如果您希望使用 TCP，则 Server=tcp:ServerName。

如果您想使用命名管道，可能会在服务器上关闭对它的支持，我相信默认情况下它是禁用的。您需要通过服务器上的 SQL Server 配置管理器程序在网络配置、协议部分启用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T17:41:31.990

嗯，很难说没有连接字符串或错误消息，但有些想法......

当您更改 app.config 时，重新启动应用程序以验证更改。尝试从安装应用程序的位置 ping 服务器。检查防火墙设置。共享网络。如果在本地，请在同一网络上的开发机器上使用新的连接字符串。

# sql - 将 varchar 的 id 插入 uniqueidentifier

> ID：12332792
> 
> 赞同：1
> 
> 时间：2012-09-08T17:09:28.497
> 
> 标签：sql, sql-server-2008, insert, guid, uniqueidentifier

我正在尝试将数据从一个表插入到另一个表。源表包含一个 GUID，它现在是一个文本字段。我想将它插入到 Uniqueidentifier 字段中。这是查询和错误。

```
insert into Tag 
(
    BusinessId, 
    AdImage, 
    AdSize, 
    DayCycleId, 
    CreatedOn, 
    IsActive, 
    Name, 
    CreatedBy
)
select cast(ID as uniqueidentifier), 
    [IMAGE], 
    '1', 
    cast('71479D27-D7A2-4439-99CB-0B536DCEFB45' as uniqueidentifier), 
    GETDATE(), 
    1, 
    'NA', 
    cast('49493D4F-A0B0-43A5-8B32-45572E4D7E43' as uniqueidentifier) 
from IMPORT 
```

错误：

> 消息 8169，第 16 层，状态 2，第 1 行
> 
> 从字符串转换为唯一标识符时转换失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:15:16.507

将您的房产 ID 类型更改为`nvarchar(36)`

nvarchar(32) 或 < 36 不起作用

# php - PHP+XML改变节点顺序

> ID：12332794
> 
> 赞同：1
> 
> 时间：2012-09-08T17:09:36.323
> 
> 标签：php, xml

我制作了一个简单的新闻脚本，将文章保存到 rss，然后在电视上的 Character Generator Newsticker 上使用，问题是 CG 从 rss 文件的顶部开始播放节点。

现在xml看起来像这样：

```
<?xml version="1.0" ?>
<rss version="2.0">
<channel>
<title>News</title>
<link>website.com</link>
<description>News</description>
<language>ar-sa</language>

<item>
<title>Headline 1</title>
<description>Headline one the news this hour</description>
</item>

<item>
<title>Headline 2</title>
<description>Fire here flooding over there</description>
</item>

<item>
<title>Headline 3</title>
<description>Fire here flooding over there</description>
</item>
</channel>
</rss> 
```

我想做的是有一个选项可以在 xml 文件中上下移动文章，所以我不想在列表中将“标题 3”放在第三个位置，而是将它上移到第一个。

我知道使用 C# 你可以使用：

```
XElement node = ...get the element...

//Move up
if (node.PreviousNode != null) {
node.PreviousNode.AddBeforeSelf(node);
node.Remove();
}

//Move down
if (node.NextNode != null) {
node.NextNode.AddAfterSelf(node);
node.Remove(); 
```

任何人都知道我如何在 PHP 中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:03:31.800

你可以看看这个答案[XML Reforming with DOM](https://stackoverflow.com/questions/5645360/xml-reforming-with-dom) where they use the DOM-parser to rearrange the XML

# bash - Bash - Makefile 中的字符串操作

> ID：12332795
> 
> 赞同：3
> 
> 时间：2012-09-08T17:09:38.210
> 
> 标签：bash, makefile, substring

我已经了解了使用 bash 进行字符串操作，尤其是关于子字符串替换：

```
#! /bin/bash

VAR1="aaaa.bbbb.cccc"
VAR2="bbbb*"
echo ${VAR1%${VAR2}} 
```

此 bash 脚本打印“aaaa.”。我试图将它包含在我的makefile中，但我无法让它工作..

```
SHELL:=/bin/bash

VAR1="aaaa.bbbb.cccc"
VAR2="bbbb*"

all:
    @echo $${VAR1%$${VAR2}} 
```

这个 Makefile 只打印一个空行。我想我误解了一些东西，但无法弄清楚是什么。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T17:40:41.703

无需在 VAR1 和 VAR2 周围加上双引号。`export`如果你想把VAR1和VAR2放在上面，你需要使用`all:`

```
SHELL:=/bin/bash

export VAR1=aaaa.bbbb.cccc
export VAR2=bbbb*

all:
    @echo $${VAR1%$${VAR2}} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T17:27:50.143

问题在于，`VAR1`不是`VAR2`shell 变量，而是 Makefile 变量。更复杂的是，Makefile 配方中的每一行都在单独的 shell 进程中执行，这意味着以下天真的尝试将失败：

```
all:
    VAR1="aaaa.bbbb.cccc"
    VAR2="bbbb*"
    @echo $${VAR1%$${VAR2}} 
```

因为`VAR1`在一个 shell 中定义，`VAR2`在另一个 shell 中定义，而`echo`在第三个 shell 中都没有定义变量。您可以使用以下内容：

```
all:
    @VAR1="aaaa.bbbb.cccc"; \
     VAR2="bbbb*"; \
     echo $${VAR1%$${VAR2}}; 
```

将单个`bash`语句（全部在一个 shell 中执行）拆分为 Makefile 中的多行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T17:26:28.290

B̶a̶s̶h̶̶a̶n̶d̶̶M̶a̶k̶e̶̶d̶o̶̶n̶o̶t̶̶h̶a̶v̶e̶̶t̶h̶e̶̶s̶a̶m̶e̶̶s̶y̶n̶t̶a̶x̶.̶̶̶Y̶o̶u̶̶n̶e̶e̶d̶̶t̶o̶ 您可以使用内置 make 函数，例如（在这种情况下）`$(substr a,b,c)`

[看到这个](http://www.makelinux.net/make3/make3-CHP-4-SECT-2)

# javascript - Enyo.drag 在元素上的实现

> ID：12332797
> 
> 赞同：1
> 
> 时间：2012-09-08T17:09:44.183
> 
> 标签：javascript, drag-and-drop, enyo

有人可以给出一个简单的示例程序，用于在 ENYO 框架中拖动元素。我无法理解 enyo 的拖动库，因为我是这个 enyo 框架的新手。如果只包含一个可拖动的按钮就足够了在一个html页面..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:45:10.253

Enyo 中没有很多用于拖动的示例代码。根据这篇文章：

[http://forums.enyojs.com/discussion/752/enyo-drag-implementation-on-an-element](http://forums.enyojs.com/discussion/752/enyo-drag-implementation-on-an-element)

Ares 2 代码库中有一些示例用法：

[https://github.com/enyojs/ares-project/blob/master/deimos/source/Deimos.js](https://github.com/enyojs/ares-project/blob/master/deimos/source/Deimos.js)

希望能有所帮助。

# java - JUnit3 TestSuite 真的应该这样使用吗？

> ID：12332809
> 
> 赞同：2
> 
> 时间：2012-09-08T17:12:42.270
> 
> 标签：java, junit, junit3

我不记得如何使用 JUnit3`TestSuite`并且在谷歌搜索后发现了这个

```
public class MyTestsuite extends TestSuite {
    public static Test suite() {
        final TestSuite s = new TestSuite();
        s.addTestSuite(Test1.class);
        s.addTestSuite(Test2.class);
        return s;
    }
} 
```

它似乎有效，但对我来说看起来很奇怪：

*   为什么要在合适的班级中创建一个新实例？
*   怎么会有人发现这个？在[javadoc](http://junit.sourceforge.net/junit3.8.1/javadoc/junit/framework/TestSuite.html)中没有像“编写一个名为*套件的**静态*方法”这样的东西。
**   为什么不像这样简单：*

 *```
public class MyTestsuite extends AbstractTestSuite {
    @Override
    public void suite() {
        add(Test1.class);
        add(Test2.class);
    }
} 
```

*基本上，我很好奇是否像我的第一个示例中那样做真的是要走的路。此外，我想知道这样的界面背后可能会做出哪些设计决策。*

* * *

这也有效，可能有点不那么奇怪：

```
public class MyTestsuite extends TestSuite {
    MyTestsuite() {
        super(Test1.class, Test2.class);
    }
    public static Test suite() {
        return new TestSuite();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T17:28:22.503

如果您想编写测试套件并按类引用它们，则使用第一个示例。

您的第二个示例不遵循用于定义套件的 JUnit 3 模式，正如[JUnit 3 食谱](http://junit.sourceforge.net/junit3.8.1/doc/cookbook/cookbook.htm)中讨论的那样，讨论`static suite`了`TestRunner`.

该`TestRunner`课程还[讨论了它在其 Javadocs 中的使用](http://junit.sourceforge.net/junit3.8.1/javadoc/junit/textui/TestRunner.html)：

> 如果这个类 [a `Test`class] 定义了一个静态`suite`方法，它将被调用并运行返回的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-27T09:49:05.940

在第一个示例中，最好返回套件子类`MyTestsuite`，而不是 a `junit.framework.TestSuite`，这样当在 IDE 中单击套件时会看到该类而不是代码`junit.framework.TestSuite`

```
public class MyTestsuite extends TestSuite {
    public static Test suite() {
        final MyTestsuite s = new MyTestsuite();
        s.addTestSuite(Test1.class);
        s.addTestSuite(Test2.class);
        return s;
    }
} 
```

您的第三个示例不起作用，因为返回的套件是空的，这里*必须*返回套件子类。作为旁注，使用中的构造函数仅存在于 Junit`3.8.2`

```
public class MyTestsuite extends TestSuite {
    MyTestsuite() {
        super(new Class[]{Test1.class, Test2.class});
    }
    public static Test suite() {
        return new MyTestsuite();
    }
} 
```*

# process - Applescript：用户界面脚本，当存在两个同名进程时如何“告诉”一个进程？

> ID：12332810
> 
> 赞同：1
> 
> 时间：2012-09-08T17:12:56.320
> 
> 标签：process, applescript

我一直在制作这个 applescript 应用程序来自动化不支持脚本的应用程序 (TimeFactory2) 的行为。所以，我最终用它来编写 UI 脚本。事情是，为了我的使用，我希望应用程序的多个实例同时运行，所以我复制了 .app 并启动​​了每个副本（重点是利用多线程，每个实例都使用我计算机上的一个核心 -该应用程序非常占用 CPU，但不支持多线程）。所以我最初得到了这段代码（对不起法语评论）：

```
tell application "TimeFactory2 Demo"
    activate
end tell

tell application "System Events"
tell process "TimeFactory2 Demo"
    repeat with extension in extensions_list
        -- pomme-O pour sélectionner un fichier à ajouter
        repeat until window "Open" exists
            keystroke "o" using {command down}
        end repeat
        -- pomme-shift-g pour entrer un path de fichier
        keystroke "g" using {shift down, command down}
        -- on copie dans le clipboard le path du fichier à séléctionner
        tell application "Finder" to set the clipboard to (audio_file_path & extension)
        -- on colle dans la box
        keystroke "v" using {command down}
        -- enter enter
        keystroke return
        keystroke return
    end repeat
    -- dans le cas où la dernière selection de fichier n'aurait rien donné, on fait deux fois escape pour sortir des fenêtre de sélection de fichier
    key code 53
    key code 53
end tell
end tell 
```

...当只有一个 TF2 实例正在运行时，它运行良好。但是，当运行 2 个以上的实例时，一切都会中断；经过彻底的测试，我明白出于某种原因，至于这条线：

```
repeat until window "Open" exists 
```

...脚本无法再判断打开的窗口是否存在（即使确实存在），因此会不断模拟 command-o 击键。我假设整个事情都来自这样一个事实，即应用程序的所有实例的进程名称都是相同的，所以代码

```
tell process "TimeFactory2 Demo" 
```

对于系统来说是模棱两可的。然后，我搜索了一种消除歧义的方法，并尝试使用其 unix id 挑选出每个进程（这里是一个实例的示例，其 uid 为 629）：

```
set TF2_process_list to every process whose unix id is 629

set TF2_process to item 1 of TF2_process_list

tell (process TF2_process)
    repeat until window "Open" exists
        keystroke "o" using {command down}
        delay 2
    end repeat
end tell 
```

这给了我以下错误：

```
error "System Events error : impossible to render {} as integer type." number -1700 from {} to integer 
```

...我被困在那里。几乎在互联网上浏览了这个问题的解决方案，但我仍然一无所知。有人看到任何解决方案吗？或者可能对整个脚本采取不同的方法来避免这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:10:29.957

我找到了一种区分进程的方法：使用语法：

```
set processID to id of first process whose name is "Time Factory 2 Demo"

tell process id processID
    etc. 
```

我可以根据他们的 id “告诉”不同的进程，这是独一无二的。

要获取每个进程的 ID，我可以使用进程的“文件”属性，其中包括 .app 包的名称，这取决于我要控制的应用程序的哪个副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:20:42.030

常规应用程序包未设置为像这样运行（例如，它们都将尝试使用相同的首选项文件），因此您可以尝试更改副本的包标识符（例如，添加数字后缀）并使用这些包标识符在您的告诉语句而不是应用程序名称中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T01:25:16.880

不确定它是否会有所作为，但通常是“告诉应用程序进程”而不是“告诉进程”：

告诉应用程序“系统事件”
告诉应用程序进程“TimeFactory2 Demo”

# oracle - 如何将“dbms_output.put_line 内容”从 TimesTen 存储过程重定向到日志文件

> ID：12332816
> 
> 赞同：0
> 
> 时间：2012-09-08T17:13:48.530
> 
> 标签：oracle, plsql, timesten

请参阅下面的示例 Timesten 过程。

```
CREATE OR REPLACE PROCEDURE test_proc(employee_id IN NUMBER) AS
salary NUMBER;
BEGIN
SELECT emp_sal INTO salary FROM employee where emp_id = employee_id;
DBMS_OUTPUT.PUT_LINE('Employee Id:' || employee_id || ' Annual Income:' || salary*12);
END;
/ 
```

如果我从命令行界面（ttisql）调用该过程，则 dbms_output.put_line 日志只会打印在那里。但我想将此类调试日志收集到日志文件中的其他位置。每当执行程序时，它都应将这些内容附加到文件中。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:46:12.177

如果您按照您所说的那样从 ttisql 调用您的过程，您可以使用**spool filepath**和**spool off**来记录屏幕上出现的任何消息。要将新信息附加到已存在的日志文件中，只需在文件**路径后使用****APPEND**选项

 **```
spool c:\logfile.log append 
```**

# c# - 如何获取 MongoDB 集合中的最后一项？

> ID：12332819
> 
> 赞同：5
> 
> 时间：2012-09-08T17:15:05.380
> 
> 标签：c#, mongodb, mongodb-.net-driver

我有时会使用 MongoDB 来执行各种快速插入或作为日志，但我在获得一个**非常简单的查询时遇到了一些麻烦**

在 Mongo 中，我将如何获得与此 T-SQL 类似的内容

```
SELECT TOP 1 [date] FROM [Collection] ORDER BY [date] desc 
```

换句话说，集合中的最后日期是什么。

我正在尝试使用`FindOne`或任何其他可以返回一个文档的文档，但没有一个接受`sortBy`属性...我该怎么做？

```
var query = Query.EQ("status", "pending");
var sortBy = SortBy.Descending("date");

return collectionLog.FindOneAs<BsonDocument>(query, sortBy); 
```

上面的最后一行是完美的，但是这个方法只接受`query`参数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T05:02:50.573

在 C# 驱动程序中没有`.SetSortOrder()`方法。`FindOneAs`这是因为`FindOneAs`返回一个文档，而`.SetSortOrder()`它是 的成员`MongoCursor`。

等效查询类似于：

```
var query = Query.EQ("status", "pending");
var sortBy = SortBy.Descending("date");

return collectionLog.FindAs<BsonDocument>(query).SetSortOrder(sortby).SetLimit(1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T20:11:56.880

根据 1.4 版，C# 驱动程序支持 LINQ。我认为这样的事情可能会有所帮助：

```
using MongoDB.Driver.Linq;

return collectionLog.AsQueryable().Where(l => l.status == "pending").AsQueryable().OrderByDescending(l => l.date); 
```

请注意第一个`AsQueryable()`，这是您将 LINQ 导入 Mongo 集合的必要开始。第二个`AsQueryable()`是必要的，因为 Where 返回 IEnumerable，但`OrderByDescending()`需要 IQueryable。

# mysql - 过程或循环

> ID：12332827
> 
> 赞同：0
> 
> 时间：2012-09-08T17:15:53.897
> 
> 标签：mysql, stored-procedures, lua, luasql, ptokax

我有一个名为`messages`我本地集线器的用户存储他们的消息的表（有点像网络论坛）。目前，大多数用户都参与其中，我每天都会收到近 30 到 50 个新条目。

由于这已经持续了几年，我们已经在表中获得了近 100,000 行数据。表结构有点[像这样](http://www.hastebin.com/xerupepaku.sql)。and和（昵称）`fid`在哪里。`PRIMARY``ip``id``INDEX`

我直到现在都在使用[这种查询](http://www.hastebin.com/cigimaxine.sql)；然后在[luasql 中迭代结果集，如此链接所示](http://math2.org/luasearch/luasql.html#iterator_use)。据我说，这会消耗大量时间和空间（在缓冲区中）。

```
`msg` VARCHAR(280) NOT NULL,
`id` VARCHAR(30) NOT NULL,
`ctg` VARCHAR(10) NOT NULL,
`date` DATE NOT NULL COMMENT 'date_format( %m/%d/%y )',
`time` TIME NOT NULL COMMENT 'date_format( %H:%i:%s )',
`fid` BIGINT(20) NOT NULL AUTO_INCREMENT,
`ip` CHAR(39) NOT NULL DEFAULT '127.0.0.1' 
```

我的问题是，现在，我们已经切换到**PtokaX**的新 API，读写请求的数量急剧增加。因为，我最近阅读了 MySQL 程序，我在想这些程序是否是处理这种情况的*更快* **或** *更安全的方法。*

```
SELECT *
FROM ( SELECT *
    FROM `messages`
    ORDER BY `fid` DESC
    LIMIT 50 ) AS `temp`
ORDER BY `fid` ASC; 
```

# 附言

我们平均每 7 到 10 秒就会收到一个阅读一条消息的请求。在周末，它会上升到大约每 3 秒一次。

如果需要更多信息，请告诉我。

* * *

## 总结一下

他们是我可以调用存储过程并在更短的时间内获得最终结果的一种方式。当前查询（和方法）需要将近 3 秒来获取和组织数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:34:01.213

关于您的查询的几件事：

```
SELECT *
FROM ( SELECT *
    FROM `messages`
    ORDER BY `fid` DESC
    LIMIT 50 ) AS `temp`
ORDER BY `fid` ASC; 
```

1.  从不`SELECT *`（全部）；总是指定一个列列表（你需要什么）
2.  子查询通常成本更高（用于排序和存储）
3.  如果您尝试获取底部的“50”，请尝试使用`BETWEEN`子句

您始终可以使用`EXPLAIN`. 我会尝试以下查询：

```
SELECT `msg`, `id`, `ctg`, `date`, `time`, `fid`, `ip` FROM `messages` 
WHERE `fid` > (SELECT MAX(`fid`)-50 FROM `messages`)
ORDER BY `fid` 
```

# java - 类、子类、抽象类、接口

> ID：12332831
> 
> 赞同：-6
> 
> 时间：2012-09-08T17:16:35.660
> 
> 标签：java

您如何知道是使用/创建类、子类、抽象类还是接口？

我的意思是......像数学这样的类，例如它没有被实例化。这是最后一节课。没有 IS-A 关系。

这就是创建一个类的目的，一个没有子类的类？

子类似乎是/具有其超类的更具体的代码。

抽象类是更通用的东西，它可以有它的子类的实现。

当需要发挥作用时，在抽象类和子类中使用/实现接口。

我对吗？

还..

超类是抽象类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:22:24.890

一般来说

*   接口 - 对可以添加到对象的相关行为进行分组。
*   抽象类 - 当您需要创建具有不应实例化的常见状态和行为的基类时
*   类 - 提出一个实现
*   子类 - 当您需要可扩展类中的一些额外行为时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:23:41.180

尝试制作类的逻辑树结构。那么类将是应该被其他代码直接使用的所有东西，而子类将是父类的更具体的版本。抽象类将是不够具体的父类，无法以任何方式使用，接口将是一类类的抽象，就像一个类，但根本没有实现。或多或少...

这就是快速的解释。显然，通过提出这样的问题，您并不了解 OOP 的基础知识，因此您应该找一本书来阅读它，因为没有人可以在这样的一篇文章中解释所有相关概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T17:59:07.213

`Class:`你用java写的每一段代码都在一个类中，所以你把类看作是一种数据类型，它描述了一个对象是什么以及它做了什么......（即实例变量和方法。）

`Sub-Class:`当我们想要我们自己的类中某个类的所有功能时通常需要。

`Abstact-Class and Interface`：现在我将这两者放在一起的原因是因为在设计模式抽象类或接口中需要展示不断变化的行为......

# codeigniter - 在 codeigniter 文件夹中添加 .htaccess 后，localhost 指向 www.domains.tld

> ID：12332836
> 
> 赞同：2
> 
> 时间：2012-09-08T17:17:59.523
> 
> 标签：codeigniter, mod-rewrite, localhost, mamp

我刚开始使用 Codeigniter 使用本地服务器 (MAMP) 开发一个简单的静态网站。最初，我访问主页的本地地址是`http://localhost/index.php/home`. 即使是简单的 localhost 也会重定向到我的主页。我想从 URL 中删除“index.php”，因此我复制粘贴了我在网上找到的 .htaccess 代码。代码如下所示：

```
<IfModule mod_rewrite.c>

    RewriteEngine On
    RewriteBase /

    ### Canonicalize codeigniter URLs

    # If your default controller is something other than
    # "welcome" you should probably change this
    RewriteRule ^(welcome(/index)?|index(\.php)?)/?$ / [L,R=301]
    RewriteRule ^(.*)/index/?$ $1 [L,R=301]

    # Removes trailing slashes (prevents SEO duplicate content issues)
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.+)/$ $1 [L,R=301]

    # Enforce www
    # If you have subdomains, you can add them to 
    # the list using the "|" (OR) regex operator
    #RewriteCond %{HTTP_HOST} !^(www|subdomain) [NC]
    #RewriteRule ^(.*)$ http://www.domain.tld/$1 [L,R=301]

    # Enforce NO www
    RewriteCond %{HTTP_HOST} ^www [NC]
    RewriteRule ^(.*)$ http://localhost/$1 [L,R=301]

    ###

    # Removes access to the system folder by users.
    # Additionally this will allow you to create a System.php controller,
    # previously this would not have been possible.
    # 'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php/$1 [L]

    # Checks to see if the user is attempting to access a valid file,
    # such as an image or css document, if this isn't true it sends the
    # request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>

    # Without mod_rewrite, route 404's to the front controller
    ErrorDocument 404 /index.php

</IfModule> 
```

最初我复制粘贴代码而根本没有更改它（这对我来说是愚蠢的）所以上面代码中的'localhost'最初是'www.domains.tld'。然后当我在浏览器上运行 localhost 时，它指向 www.domains.tld'。我注意到了错误并将其更改为上面的内容，并且 localhost 仍然指向'www.domains.tld' 我删除了 .htaccess 文件以扭转效果，但它仍然做同样的事情。我还更改了 localhost 的根文件夹，但无论我做什么 localhost 都指向“domains.tld”。当我在浏览器的地址栏上输入 127.0.0.1 时，它会正确定向到我的网站。我花了几个小时阅读这种行为的原因，但未能找到解决方案。

任何帮助将不胜感激。

谢谢，H.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T08:32:31.777

清除 DNS 缓存并重新启动浏览器。某些浏览器使用 DNS 缓存重定向，以便您更快地到达它认为正确的站点。

Firefox 对此特别恼火，因此我每次安装时都禁用其内部 DNS 缓存。在`about:config`中，创建以下两个整数类型设置（注意：您必须创建这些，默认情况下它们不存在）：

*   `network.dnsCacheEntries`调成`0`
*   `network.dnsCacheExpiration`调成`0`

在 Chrome 中，您需要在隐私设置下关闭 DNS 预取。

他们这样做的原因是为了让互联网对普通浏览器来说“看起来”更快。对于开发人员来说，这可能是一个很大的障碍。

# javascript - 滚动固定scrollTop()的跳跃效果

> ID：12332837
> 
> 赞同：0
> 
> 时间：2012-09-08T17:18:04.350
> 
> 标签：javascript, jquery

我指的是以下教程：

[http://www.webdeveloperjuice.com/2011/08/07/how-to-fix-element-position-after-some-scroll-using-jquery/](http://www.webdeveloperjuice.com/2011/08/07/how-to-fix-element-position-after-some-scroll-using-jquery/)

虽然页面中的演示看起来不错，但是当我在我的网站上实现它时，我得到了“跳跃”效果。通常，第一项会被跳过，直接跳到第二项的一半。

我该如何解决？

以下是我的 HTML：

```
<div id="map_container">
  <div id="map" class="well"></div>
</div>

<ul>
  <li>1\. Many contents here...</li>
  <li>2\. Many contents here...</li>
  <li>3\. Many contents here...</li>
  <li>4\. Many contents here...</li>
  <li>5\. Many contents here...</li>
  <li>6\. Many contents here...</li>
  <li>7\. Many contents here...</li>
</ul> 
```

以下是 Javascript：

```
$(document).ready( function(){
  $('#map_container').css("width", $('#map').width());
  $("#map_container").scrollFixed({hideBeforeDiv:'footer'});
});

(function($){
    $.fn.scrollFixed = function(params){
    params = $.extend( {appearAfterDiv: 0, hideBeforeDiv: 0}, params);
    var element = $(this);

    if(params.appearAfterDiv)
        var distanceTop = element.offset().top + $(params.appearAfterDiv).outerHeight(true) + element.outerHeight(true);
    else
        var distanceTop = element.offset().top;

    if(params.hideBeforeDiv)
        var bottom = $(params.hideBeforeDiv).offset().top - element.outerHeight(true) - 10;
    else
        var bottom = 200000;                

        $(window).scroll(function(){    
            if( $(window).scrollTop() > distanceTop && $(window).scrollTop() < bottom )         
                element.css({'position':'fixed', 'top':'0'});
            else
                element.css({'position':'static'});             
        });           
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:26:09.947

当 Javascript 动态添加 a`position: fixed`到 时`#map_container`，只需使用 CSS 将相同的`#map_container`高度应用到`ul`. 以下解决方案是使用 SCSS 完成的：

```
#map_container {
  &.fixed {
    position: fixed;
    top: 0;
    & ~ .ul .li:first-child {
      margin-top: 210px;
    }
  } 
```

# qt - 为什么小部件没有获得 resizeEvent？

> ID：12332838
> 
> 赞同：2
> 
> 时间：2012-09-08T17:18:08.887
> 
> 标签：qt, events, layout

我正在尝试实现一个新的自定义滚动条。为此，我已手动将其放置在父级上`this->setParent(area);`

```
 class QMacScrollBar : public QScrollBar
{
    Q_OBJECT
public:
    QMacScrollBar(QAbstractScrollArea *area, Qt::Orientation orientation, QWidget *parent = 0);

    virtual void paintEvent ( QPaintEvent * );
    QAbstractScrollArea *area;

signals:

public slots:
    virtual void resizeEvent(QResizeEvent *event);
};

QMacScrollBar::QMacScrollBar(QAbstractScrollArea *area, Qt::Orientation orientation, QWidget *parent) :
    QScrollBar(area)
{
    this->setMouseTracking(true);
    this->setOrientation(orientation);
    this->setParent(area);
    this->area = area;
}

void QMacScrollBar::resizeEvent(QResizeEvent *event){
    QRect geometry = QRect(QPoint(0, 0), event->size());
    if (area != NULL){
        geometry.setHeight(area->height());
        geometry.moveRight(area->width());
        geometry.adjust(-5, 0, -5, 0);
        this->setGeometry(geometry);
    }
    QScrollBar::resizeEvent(event);
} 
```

我确实得到了前几个调整大小，但之后没有。到目前为止，我的猜测是，当我调整窗口大小时，QScrollArea 实际上并没有调整大小，它只是隐藏了更多的视口。我需要调整大小事件，因为我需要移动显示栏的位置。我该如何解决？

编辑：我得到的唯一调整是我通过连接到底层滚动条的`setRange`信号产生的那些。

# d - D - 从套接字读取 4 字节大小

> ID：12332839
> 
> 赞同：1
> 
> 时间：2012-09-08T17:18:08.857
> 
> 标签：d

如何直接从连接的套接字读取 uint 而无需进行任何转换。

实际上，什么是 D 等价于`read(sock, &four_byte_var, 4)`。我似乎无法将 a 转换为`uint`D 标准库`socket.receive(void[])`将接受的任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T17:25:54.790

您需要传递一个围绕变量的切片：

```
uint n;
socket.receive((&n)[0..1]); 
```

请注意，这种方法是字节序敏感的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:21:03.267

这很容易[`std.socketstream`](http://dlang.org/phobos/std_socketstream.html)：

```
auto stream = new SocketStream(socket);

uint foo;
stream.read(foo); 
```

**注意：**`std.stream` and模块将`std.socketstream`被一个新接口替换（嗯，这可能需要一段时间）。

# algorithm - Theta符号的简单英语解释？

> ID：12332840
> 
> 赞同：5
> 
> 时间：2012-09-08T17:18:23.910
> 
> 标签：algorithm, computer-science, complexity-theory, notation

Theta 符号的简单英文解释是什么？尽可能少的正式定义和简单的数学。

theta 表示法与 Big O 表示法有何不同？谁能用简单的英语解释一下？

在算法分析中有怎么用？我很困惑？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T17:34:16.643

如果一个算法的运行时间是 Big Theta(f(n))，那么它的上下边界是 f(n)。大 O 是相同的，只是界限只在上面。

直观地说，Big O(f(n)) 表示“我们可以肯定，忽略常数因素和项，运行时间永远不会超过 f(n)。” 粗略地说，如果您认为运行时间“很糟糕”，那么 Big O 就是最坏的情况。Big Theta(f(n)) 说“我们可以肯定，忽略常数因素和项，运行时间总是随着 f(n) 而变化。” 换句话说，Big Theta 是一个已知的紧界：它既是最坏的情况，也是最好的情况。

直觉的最后一次尝试：大 O 是“片面的”。O(n) 运行时间也是 O(n^2) 和 O(2^n)。Big Theta 并非如此。如果您的算法运行时间为 O(n)，那么您已经有证据证明它不是 Big Theta(n^2)。它可能是也可能不是 Big Theta(n)

一个例子是比较排序。信息论告诉我们排序至少需要上限(n log n) 比较，而我们实际上发明了 O(n log n) 算法（其中 n 是比较次数），所以排序比较是 Big Theta(n log n)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-20T00:31:30.340

我一直想用简单的话把它写下来。这是我的尝试。

如果算法的时间或空间复杂度表示为

*   Big O : Ex O(n) - 表示 n 是上限。最终值可能小于或等于 n。

*   Big Omega：Ex Ω(n) - 表示 n 是下限。最终值可以等于或大于 n。

*   Theta : Ex Θ(n) - 表示 n 是唯一可能的值。（上限和下限）

# php - 使用 JSON 解码 PHP 5.3

> ID：12332842
> 
> 赞同：-2
> 
> 时间：2012-09-08T17:18:33.673
> 
> 标签：php, json

我的网络主机运行的是 PHP 5.3，但由于某种原因我不能使用 Json_decode()。这是为什么？我怎样才能让它工作？Json_decode() 有什么替代方案吗？

我这样使用它：

```
$data= json_decode($_POST['moment']);
var_dump($_POST['moment']);
foreach($data as $item) {
echo $item; 
```

它输出： string(22) "[\"36\",\"37\",\"38\"]" 警告：在第 23 行为 foreach() 提供的参数无效

通过执行 var_dump() 我看到创建了字符串，但我无法让 json_decode 工作，创建数组 $data

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T17:26:00.877

`json_decode``NULL`当您要求它解码的字符串无效时返回。您可以使用它`json_last_error`来诊断问题。

当您要循环这样的数组时，您应该确保该值实际上是一个数组。

```
$data= json_decode($_POST['moment'], true);
if (!is_array($data)) {
  echo json_error_string(json_last_error());
} else {
    foreach($data as $item) {
        echo $item;
    }
} 
```

根据手册中的代码：

```
function json_error_string ($json_error_code) {
   switch ($json_error_code) {
        case JSON_ERROR_NONE:
            return ' - No errors';
        break;
        case JSON_ERROR_DEPTH:
            return ' - Maximum stack depth exceeded';
        break;
        case JSON_ERROR_STATE_MISMATCH:
            return ' - Underflow or the modes mismatch';
        break;
        case JSON_ERROR_CTRL_CHAR:
            return ' - Unexpected control character found';
        break;
        case JSON_ERROR_SYNTAX:
            return ' - Syntax error, malformed JSON';
        break;
        case JSON_ERROR_UTF8:
            return ' - Malformed UTF-8 characters, possibly incorrectly encoded';
        break;
        default:
            return ' - Unknown error';
        break;
    }
} 
```

最后，您没有收到任何错误消息表明您已经`error_reporting`关闭或`display_errors`关闭。您需要使用 启用所有错误报告`error_reporting(E_ALL & E_STRICT); ini_set('display_errors', '1');`。从生产代码中删除它，但是当您积极工作时，您需要查看有关您正在创建的代码的所有可能信息。

**文档**

*   `json_decode`- [http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)
*   `json_last_error`- [http://php.net/manual/en/function.json-last-error.php](http://php.net/manual/en/function.json-last-error.php)
*   `is_array`- [http://php.net/manual/en/function.is-array.php](http://php.net/manual/en/function.is-array.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-05T15:37:45.410

使用 stripslashes() 解决它：

```
$objJs = json_decode(stripslashes($_POST['obj'])); 
```

# ajax - 如何在 zend 框架 2 中禁用渲染视图？

> ID：12332843
> 
> 赞同：16
> 
> 时间：2012-09-08T17:18:42.243
> 
> 标签：ajax, zend-framework2

我想使用一些 ajax，但我不知道如何使用与 zend 框架 2 中的 setNoRender() 相同的函数来禁用渲染视图。

如何在 zend 框架 2 中禁用渲染视图？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-25T08:20:46.023

*   要禁用您的视图：

    ```
    public function myactionAction()
    {
        // your code here ...
        return false;
    } 
    ```

“return false”禁用视图而不是布局！为什么？因为接受的类型是：

*   视图模型
*   大批
*   无效的

所以“假”禁用视图。

*   要禁用布局和视图，请返回一个响应对象：

    ```
    public function myactionAction()
    {
        // your code here ...
        return $this->response;
    } 
    ```

*   要禁用布局：

    ```
    public function myactionAction()
    {
        // your code here ...
        $view = new ViewModel();
        $view->setTerminal(true);
        return $view;
    } 
    ```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-08T18:07:59.687

如果您使用的是 JSON，请查看视图并从您的控制器`JsonStrategy`返回一个。`JsonModel`见这篇[文章](http://akrabat.com/zend-framework-2/returning-json-from-a-zf2-controller-action/)。

或者，您可以`Response`从控制器返回一个并跳过整个视图层：

```
public function testAction()
{
    $response = $this->getResponse();
    $response->setStatusCode(200);
    $response->setContent('foo');
    return $response;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-15T21:21:54.450

**正确**和简单的解决方案来做到这一点

```
public function testAction()
{
    $data = array(
        'result' => true,
        'data' => array()
    );
    return $this->getResponse()->setContent(Json::encode($data));
} 
```

详情：[http ://cmyker.blogspot.com/2012/11/zend-framework-2-ajax-return-json.html](http://cmyker.blogspot.com/2012/11/zend-framework-2-ajax-return-json.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-04T21:18:02.553

我找到了一些答案。

虽然`$this->layout()->getLayout()`返回新选择的布局的名称/路径...布局不会因以下任何命令而改变...

在控制器内

```
$this->getLocator()->get('view')->layout()->setLayout('layouts/ajax.phtml');
$this->getLocator()->get('view')->layout()->setLayout('ajax');
$this->getLocator()->get('view')->layout()->disableLayout(); 
```

在视图 PHTML 文件中

```
$this->layout()->setLayout('layouts/ajax.phtml');
$this->layout()->setLayout('ajax');
$this->layout()->disableLayout(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T21:42:12.907

$view = 新的 ViewModel(); $view->setTerminate(true);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-09T06:30:22.213

```
...
use Zend\View\Model\JsonModel;

public function myAction() {
    ...

    $view = new JsonModel($myArray);
    $view->setTerminal(true);
    return $view;
} 
```

# python - 从 Web 中提取数据

> ID：12332847
> 
> 赞同：2
> 
> 时间：2012-09-08T17:19:12.850
> 
> 标签：python, web-scraping, beautifulsoup, collect

一个真正的新手问题。我正在为我的家庭使用一个小的 python 脚本，它将收集特定机票的数据。

我想从 skyscanner 中提取数据（使用 BeautifulSoap 和 urllib）。例子：

[http://www.skyscanner.net/flights/lond/rome/120922/120929/airfares-from-london-to-rome-in-september-2012.html](http://www.skyscanner.net/flights/lond/rome/120922/120929/airfares-from-london-to-rome-in-september-2012.html)

我对存储在这种元素中的所有数据感兴趣，特别是价格：[http ://shrani.si/f/1w/An/1caIzEzT/capture.png](http://shrani.si/f/1w/An/1caIzEzT/capture.png)

因为它们不在 HTML 中，我可以提取它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T17:29:38.367

我认为问题在于这些值是通过您的浏览器运行而`urllib` 不是运行的 javascript 代码呈现的 - 您应该使用可以执行 javascript 代码的库。

我刚刚搜索`crawler python javascript`了一下，我得到了一些建议使用[selenium](http://seleniumhq.org/)或[webkit](http://www.webkit.org/)的 stackoverflow 问题和答案。您可以通过[scrapy](http://scrapy.org/)使用这些库。这里有两个片段：

[使用 gtk/webkit/jswebkit 渲染/交互的 javascript](http://snipplr.com/view/66996/renderedinteractive-javascript-with-gtkwebkitjswebkit/)

[使用 Scrapy 和 Selenium RC 渲染的 Javascript 爬虫](http://snipplr.com/view/66998/rendered-javascript-crawler-with-scrapy-and-selenium-rc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-23T07:52:37.287

我一直在研究同样的问题。我被介绍给 Beautifulsoup，后来了解了 Scrapy。Beautifulsoup 非常易于使用，特别是如果您是新手。Scrapy 显然有更多的“功能”，但我相信你可以用 Beautifulsoup 完成你的需求。

我遇到了同样的问题，无法访问通过 Javascript 加载信息的网站，谢天谢地，Selenium 是救世主。

可以在[这里](http://selenium-python.readthedocs.org/en/latest/installation.html)找到对 Selenium 的精彩介绍。

安装：`pip install selenium`

下面是我整理的一个简单的类。您可以将其保存为 .py 文件并将其导入到您的项目中。如果您调用该方法`retrieve_source_code(self, domain)`并发送您尝试解析的超链接，它将返回完全加载页面的源代码，然后您可以将其放入 Beautifulsoup 并找到您要查找的信息！

前任：

```
airfare_url = 'http://www.skyscanner.net/flights/lond/rome/120922/120929/airfares-from-london-to-rome-in-september-2012.html'

soup = BeautifulSoup(SeleniumWebScraper.retrieve_source_code(airfare_url)) 
```

`soup`现在您可以像往常一样使用 Beautifulsoup进行解析。

希望对你有帮助！

```
from selenium import webdriver
import requests

class SeleniumWebScraper():

    def __init__(self):
        self.source_code = ''
        self.is_page_loaded = 0
        self.driver = webdriver.Firefox()
        self.is_browser_closed = 0
        # To ensure the page has fully loaded we will 'implicitly' wait 
        self.driver.implicitly_wait(10)  # Seconds

    def close(self):
        self.driver.close()
        self.clear_source_code()
        self.is_page_loaded = 0
        self.is_browser_closed = 1

    def clear_source_code(self):
        self.source_code = ''
        self.is_page_loaded = 0

    def retrieve_source_code(self, domain):
        if self.is_browser_closed:
            self.driver = webdriver.Firefox()
        # The driver.get method will navigate to a page given by the URL.
        #  WebDriver will wait until the page has fully loaded (that is, the "onload" event has fired)
        #  before returning control to your test or script.
        # It's worth nothing that if your page uses a lot of AJAX on load then
        #  WebDriver may not know when it has completely loaded.
        self.driver.get(domain)

        self.is_page_loaded = 1
        self.source_code = self.driver.page_source
        return self.source_code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-07T07:46:55.453

你甚至不需要 BeautifulSoup 来提取数据。

只需执行此操作，您的响应就会转换为非常易于处理的字典。

text = json.loads("你的主要响应内容的文本")

您现在可以打印字典中的任何键值对。试试看。这非常容易。

# mysql - MySQL 数据库设计 - 找出表关系的麻烦

> ID：12332848
> 
> 赞同：3
> 
> 时间：2012-09-08T17:19:21.197
> 
> 标签：mysql, sql, database-design, relational-database, innodb

我正在尝试找出为我正在为学校俱乐部制作的网站设计这些表格的最佳方式。我想设置它，以便每个用户可以拥有多个与其帐户相关联的电子邮件、电话号码和地址。为此，我尝试将所有这些内容与联系人表联系起来，并将联系人 ID 作为外键存储在用户表中。联系人 ID 也是电子邮件、电话号码和地址表中的外键。这是关联这些表的可行方法还是我应该去掉中间人（联系人表）并将用户 ID 存储在电子邮件、电话号码和地址表中？

以防我对关系的描述还不够，这里是表格的 ERD：

![ERD](../Images/84a5e5598d889e5dea39a2cb4cbb80b1.png)

对于这样一个“菜鸟”的问题，我很抱歉，因为我不得不构建一个比 2 个表更复杂的数据库已经有一段时间了。任何关于数据库设计的一般技巧都非常受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T17:23:15.123

您需要做的就是删除Contacts 表并将user_id 存储在右侧的表中，而不是contact_id。

也从用户中删除contact_id。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T17:26:16.290

我过去已经处理过这个问题。我们做错了，我们很抱歉。

决定因素应该是这些：

1.  您是否有任何其他类别的人不是用户，您需要为其存储联系信息？

2.  这些人会以某种方式与用户“互换”吗？

如果您*对这两个*问题都回答“是”，请保留您的联系表。否则摆脱它。

我工作的一个团队所犯的错误是我们对第二个问题的回答。我们有医疗患者和医生/护士/等作为我们的人群。我们将他们的联系信息存储在一起。但我们不应该这样做，因为患者的联系信息非常敏感和保密，但医疗保健提供者的信息则要少得多。我们一直希望在系统成功后，我们不会将这两种数据放在一组表中。

我说，除非你能说服自己你需要你的联系表，否则请摆脱它！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T17:35:59.063

是的，我会删掉中间人：

虽然我很想走 'contact_type' 路线，但我发现通常有验证和不同的数据类型，当联系人是通用的时，它们会变得更加复杂。例如，具有地址字段的表格与电话号码不同，并且两者都具有更高的复杂性和更少的可读性。

该模型侧重于简单性，例如，一个用户有很多电子邮件，而一个电子邮件属于一个用户。

![在此处输入图像描述](../Images/5edda21ec7c750f20268773c43099e5f.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T17:34:37.823

根据我的说法，您可以相应地设计数据库

```
Table 1 : Users
UserID //PK
Name

Table 2 : Contacts
ContactID  //PK
UserID  //FK to Users
ContactTypeID   // FK to ContactType
Value

Table 3 : ContactType
ContactTypeID   //PK
ContactTypeName
Description 
```

表 1 非常清楚地存储了用户信息 表 3 包含有关联系人类型的信息，即电子邮件、家庭电话、手机、家庭地址、送货地址等 表 2 包含有关用户、联系人类型及其值的信息，例如 cinatacttypeid 对应于手机而不是值是，等等

# virtual-machine - 无法从另一个 vmware 来宾 ping vmware 来宾

> ID：12332850
> 
> 赞同：35
> 
> 时间：2012-09-08T17:19:51.103
> 
> 标签：virtual-machine, vmware, windows-networking

我想从另一台 ping 一台 vmware 来宾。两者都是 Windows XP 并使用 NAT。我将 VMnet8 的 IP 手动设置为 192.168.18.1。（不使用自动获取 IP 地址）。此外，我无法从主机 ping 来宾 1 和来宾 2。

我正在使用 VMWare Player 5。

主机（Windows 7）：

```
 Ethernet adapter VMware Network Adapter VMnet8:

    Connection-specific DNS Suffix  . :
    Link-local IPv6 Address . . . . . : fe80::dc81:34e2:779d:595d%19
    IPv4 Address. . . . . . . . . . . : 192.168.18.1
    Subnet Mask . . . . . . . . . . . : 255.255.255.0
    Default Gateway . . . . . . . . . : 
```

客人1：

```
 Connection-specific DNS Suffix  . : localdomain
    IP Address. . . . . . . . . . . . : 192.168.18.131
    Subnet Mask . . . . . . . . . . . : 255.255.255.0
    Default Gateway . . . . . . . . . : 192.168.18.2 
```

客人2：

```
 Connection-specific DNS Suffix  . : localdomain
    IP Address. . . . . . . . . . . . : 192.168.18.132
    Subnet Mask . . . . . . . . . . . : 255.255.255.0
    Default Gateway . . . . . . . . . : 192.168.18.2 
```

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-20T03:56:52.513

我在 VMware 工作站 9 中配置我的服务器 2008 和 windows 7 vm 时遇到了完全相同的问题。帮助禁用防火墙并在 windows 命令提示符下运行以下命令

`netsh firewall set icmpsetting 8 enable`

那时，一旦我在两个虚拟机上执行了命令，我就可以 ping 一个虚拟机。我们的场景之间的区别在于我使用桥接连接配置了我的虚拟机

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-06-14T08:55:44.280

我知道这是一个老问题，但我最近遇到了类似的麻烦。在 VMware Workstation 12.+ 上，转到`Edit -> Virtual Network Editor...`选择有问题的 VM 使用的网络，并确保`"Connect a host virtual adapter to this network"`为此网络设置了该复选框。就我而言，事实并非如此。设置后，主机可以ping 客人，客人可以互相交谈。

[![在此处输入图像描述](../Images/8a4e9efb6c51ac02af73a4aba9010969.png)](https://i.stack.imgur.com/cMvid.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-17T11:19:57.177

您可以使用以下步骤从一台虚拟机 ping ip 到另一台机器：

1.  转到菜单 VM -> 设置 -> 选择网络适配器：NAT
2.  转到菜单 VM -> 设置 -> 选择选项选项卡并选择

访客隔离：启用、启用和选择框：启用 VMCI

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-05T19:01:24.713

1.  将网络设置为桥接。
2.  启用 VMCI（这使主机、来宾能够相互通信）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-12T09:43:52.557

1.  检查所有windows系统上的防火墙。如果已启用，请禁用它。
2.  如果您仍然无法 ping，请打开虚拟网络编辑器并检查您是否为两个 VM 使用相同的 VMnet 适配器，该适配器也应该存在于主机的网络适配器中。分享您在虚拟网络编辑器中看到的屏幕截图。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-22T11:32:52.603

1.  尝试在客户机操作系统中安装 VMware 工具。
2.  检查防火墙是否启用
3.  如果 1 和 2 都可以，请尝试使用共享互联网连接

![共享互联网](../Images/9a1f8a6237aa7f4d78e34a01ab3684c6.png)

共享连接后VMnet8 IP地址将更改为`192.168.137.1`，设置IP并重`192.168.18.1`试

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-07T05:42:46.677

在菜单栏中

> 选择主机-> 虚拟网络设置-> 主机虚拟网络映射...

将您的下拉列表设置为您的主机网络适配器...如果您无法 ping 检查您的防火墙状态因为防火墙被阻止了“ping”数据包

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-31T22:39:04.533

通过将 VM 的网络设置设置为“桥接”模式，我已经能够从 VM 和主机 ping 通。简而言之，这将它们都放在同一个物理网络上。这与您的静态 IP 地址相结合应该可以解决问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-11T07:16:32.487

如果我理解你的问题。您现在在同一网段 VMnet8 上拥有两个 VM，

1.  从两个 VM 上的防火墙设置启用文件和打印共享
2.  确保从主机 (Windows 7) 启用 VMnet8 的网络适配器。还要打开网络适配器以检查您是否实际连接到 VMnet8 网络地址。然后尝试 ping 两个地址。
3.  如果这仍然不起作用，请从主机执行 ipconfig/all 并将输出粘贴到此处，以便我可以看到网络地址是如何分布的。

谢谢

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-24T15:40:58.310

如果客户操作系统是 Windows，请按照以下步骤操作 -

对于 Windows 10 -

在 Windows 来宾操作系统中完全关闭防火墙保护

*   打开 Windows 安全应用 > 选择防火墙和网络保护 > 关闭域网络、专用网络和公共网络的防火墙。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-10-01T18:08:07.737

互联网上有几种相关的解决方案，但这一切都取决于机器的配置和防火墙规则。

对我来说，以下解决方案有效：

*   禁用 VMware 网络适配器 VMNet8
*   从 VM 中删除网络
*   启用 VMware 网络适配器 VMNet8
*   将网络重新添加到 VM，并将其设置为 NAT
*   重新启动了机器

[查看此博客文章以获取详细的解决方案。](https://automationbyte.blogspot.com/2020/10/vmware-workstation-host-unable-to-ping.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-01-06T11:25:28.773

在两个操作系统上，必须关闭防火墙。我使用 MS SERVER 2012 R2 和 MS WIN-7 作为客户端。首先调用“运行框”窗口徽标按钮+ R，一旦出现运行框，在窗口防火墙设置中键入“firewall.cpl”，您将看到“打开或关闭窗口防火墙”，点击它并选择“关闭窗口防火墙” “在私人和公共设置上然后确定。在来宾操作系统上再次 Ping。好运昂可可汗

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-02-18T20:21:34.493

我想补充一下，是的。在 Vmware 中使用 NAT 适配器设置并关闭 Windows 防火墙时，我能够在我的测试环境中 ping 其他客户机。

旁注：最佳做法是在较大的环境中实施硬件防火墙并关闭域控制器上的 windows 防火墙。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2016-07-15T09:14:47.863

[![在此处输入图像描述](../Images/f26ee2b36e3c4b58471c4cd8c39149df.png)](https://i.stack.imgur.com/1aRau.png)

我遇到了同样的问题并尝试了互联网上的所有方法，最后偶然解决了。你可以试试这个（见图片）

# java - 如何在 html 页面和 Restful WebResource 方法之间实现 JaxB？

> ID：12332852
> 
> 赞同：0
> 
> 时间：2012-09-08T17:20:01.943
> 
> 标签：java, jaxb, jersey, jax-rs

我是 Jax-rs 的新手。我怀疑将数据从 html 页面传递到 webresource 方法。在 html 页面中包含 fruitid 和fruitname。如何将这两个属性转换为 Java 对象，即 FruitBean。也许我们可以使用 jaxb 实现.但我不知道在html页面和网络资源方法之间实现的进一步步骤。

请检查以下代码片段以获取fruitbean

```
@XmlRootElement(name="fruitbean")
public class FruitBean {
    private long id;
    private String name;
    @XmlAttribute
    public long getId() {
        return id;
    }
    public void setId(long id) {
        this.id = id;
    }
    @XmlAttribute
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

} 
```

并将参数作为 FruitBean 对象传递的 Web 资源方法。检查以下方法。

```
@POST
@Path("loadObject1")
@Consumes(MediaType.APPLICATION_XML)
public void loadObject1(FruitBean bean){
    System.out.println("Fruit ID" + bean.getId() + " Name" + bean.getName());

} 
```

即使我已经尝试搜索这个问题。但我无法理解。请帮助我。

**更新 ：-**

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Test Jax-RS Object</title>
</head>
<body>
<form action="services/fruitstore/loadObject1" method="POST" enctype="application/x-www-form-urlencoded">
<table>
<tr>
    <td>ID:</td>
    <td><input type="text" name="id"></td>
</tr>
<tr>
    <td>Name:</td>
    <td><input type="text" name="name"></td>
</tr>
<tr>
    <td><input type="submit" Value="Submit"></td>
</tr>
</table>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:17:27.190

```
@POST
@Path("loadObject1")
@Consumes(MediaType.APPLICATION_JSON)
public void loadObject1(String bean){  
    FruitBean bean = new com.google.gson.Gson().fromJson(bean, FruitBean.class);
    System.out.println("Fruit ID" + bean.getId() + " Name" + bean.getName());

} 
```

从服务器发送带有数据的 POST 请求，`JSON.stringify(fruitBean)`
例如使用 jQuery/ajax 发送请求

```
var fruitBean  
fruitBean.id = 1  
fruitBean.name = 'name' 
$.ajax({  
  type: 'POST',
  url: 'context-path/loadObject1',  
  data : JSON.stringify(fruitBean)
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:08:35.167

你的问题我没有答案。但正如我发现 JaxB bean 和 HTTP 请求之间的绑定尚未在 Jersey RESTful Web 服务中实现 - 它只是有人[破解](https://wikis.oracle.com/display/Jersey/getting+form+data+as+a+populated+javabean)（但没有 JaxB）

这或多或少是[RESTEasy JAX-RS中的高级相关能力](http://docs.jboss.org/resteasy/docs/2.3.4.Final/userguide/html_single/index.html#_Form)

# jquery - 循环中的Jquery ajax

> ID：12332854
> 
> 赞同：2
> 
> 时间：2012-09-08T17:20:16.143
> 
> 标签：jquery, ajax, loops

我正在编写一个处理 mysql 到 mongodb 的 Sql 转换器。我正在用 ajax 为我的转换器编写一个接口。

Ajax 正在处理巨大的转换。这限制了 mysql 选择代码并一次进行 1000 次转换。

我的代码是：

```
$(document).ready(function()
{
<!--Start JQuery Ajax Requests-->
var pages;
var type;
$("input").click(function(event) {
    pages = $(this).attr("icr");
    type = $(this).attr("id");
    runRequest(0);
});

function runRequest(num){

    if (num > 3){
    $("#console").append("Finish!!!");
    return;
    }

    $.ajax
    ({
    type: "POST",
    url: "#",
    async: false,
    data: "type="+type+"&page="+num*1000,
    success: function(msg){
        $("#console").ajaxComplete(function(event, request, settings)
        {
            $("#console").append(msg);
            runRequest(num+1);
        });
    }
    });
}
}); 
```

此代码必须运行 3 次相同的函数并通过乘以发送限制数。但不知何故，runRequest 的 num 变量永远不会达到 3，firebug 控制台将 num 显示为 1 或有时为 2，并且它会无限重复。如何避免它并使其仅运行 3 个同步调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T23:19:24.637

这是另一种方式：

```
for(i=0; i<5; i++) {
    $.ajax({
        type: "GET",
        url: '/api/foo/?bar=' + i,
        ajaxI: i,
        success: function(widgets) {
            x = this.ajaxI; // now you can use x instead of i

            // ...
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:04:21.533

我相信问题出在您使用`.ajaxComplete()`. 根据[jQuery docs](http://api.jquery.com/ajaxComplete/)，它是一个单独的事件处理程序注册方法。换句话说，您的成功函数正在注册一个事件以在下一次完成时触发。我认为这也会导致您的第一个数据集被丢弃。

附加说明，您正在使用`data`参数来传递数据。这应该是一个对象，而不是查询字符串。如果您使用 GET Ajax 调用，它会被转换为查询字符串。`url: "?type="+type+"&page="+num*1000,`并且`data: { "type": type, "page": num*1000 }`是等价的。

尝试以这种方式重写它：

```
$.ajax({
    type: "POST"
    url: "#",
    async: false,
    data: { "type": type, "page": num*1000 },
    success: function(msg) {
        $("#console").append(msg);
        runRequest(num+1);
    });
} 
```

该`.ajaxComplete()`方法更多是为了将单独的函数调用或行为插入到每个 ajax 成功处理程序中（当您在同一页面上有许多这样的请求并希望每个请求都附加到控制台时，除了执行它们的正常回调之外） . 像这样：

```
$(document).ready(function()
{
    $("#console").ajaxComplete(function(event, request, settings)
    {
        // $(this) is pointing to the #console ID because the function is bound to it
        $(this).append('Triggered ajaxComplete handler. The result is ' +
                 xhr.responseHTML);
        runRequest(num+1);
    });
    // variables

    // document event bindings/handlers

    // Ajax functions (you could move this outside of the .ready function

} 
```

# javascript - 哪个 JavaScript 相等运算符（== 或 ===）更快？

> ID：12332855
> 
> 赞同：1
> 
> 时间：2012-09-08T17:20:17.453
> 
> 标签：javascript

> **可能重复：**
> [JavaScript === vs ==：我使用哪个“相等”运算符有关系吗？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

我一直认为这`==`比`===`操作员快。但是读了一些之后，我很困惑。如果我使用`===`over`==`运算符，在性能水平上有什么好处吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T17:20:58.433

`===`操作员将比`==`操作员更快。这是因为`===`不需要检查多重比较，而需要检查`==`（即`==`执行转换）。

```
return "true" == true; //true 
```

上面将首先测试是否`"true" === true`为假，然后检查`"true" === "true"`（即，它将布尔转换为字符串，然后再次检查）。

阅读下面的评论。您还可以将这两个基准视为指南：

*   [http://jsperf.com/2-vs-3-eq](http://jsperf.com/2-vs-3-eq)
*   [http://jsperf.com/2-vs-3-eq-2](http://jsperf.com/2-vs-3-eq-2)

但是，为了将来参考，它们确实不是一回事，您不应该互换使用它们。实际上，您真正想要使用over 的**案例并不**~~多~~ 。它通常会导致意外或看似随机的结果，而编程的重点是创建一个用户可以在其上旅行的界面。如果条件并不总是评估为您最初测试的内容，程序可能会出现错误、混乱或不可靠。**`==``===`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T17:24:58.203

虽然`===`运算符的执行速度可能比 快`==`，但在大多数情况下很难区分速度差异，因此您可以自由使用这两个选项中的任何一个，使您的代码更清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T17:22:07.287

您可以尝试使用 === 运算符更快**

# php - 在 Yii 控制器中使用外部函数（助手函数）

> ID：12332856
> 
> 赞同：1
> 
> 时间：2012-09-08T17:20:18.763
> 
> 标签：php, codeigniter, function, yii

我用 CodeIgniter 开发了一些网站，它有帮助文件，可以由开发人员编写以在类中使用某些功能。

现在我正在通过 Yii 开发网站，并且我有一个 php 文件，该文件具有应该在 Controller 中使用的功能。如何导入它们并在 Controller 方法中使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:05:20.047

我们这样做的方式是这样的：

我们在 lib 中有一个名为**SharedFunctions.php**的文件，并将 lib.* 导入到 config/main 中，以便 Yii 自动加载 SharedFunctions 文件。

> 在 SharedFunctions.php 文件中

```
Class SharedFunctions{
    public static function lib() {
        return new SharedFunctions();
    }

    public function myfunction($params) {
        ....
    }
} 
```

现在在 Yii 应用程序的任何地方，我们都可以使用 SharedFunctions 文件中定义的任何函数

```
SharedFunctions::lib()->myfunction($params); 
```

# curl - 如何知道主机是否支持 Range 标头？

> ID：12332858
> 
> 赞同：2
> 
> 时间：2012-09-08T17:20:42.207
> 
> 标签：curl, http-headers

当我尝试 `curl -r 0-100`获取文档的一部分时，我总是得到一个完整的 html 页面。是否有一种简单的方法可以知道主机是否支持**范围标头**，所以我可以使用 curl range 选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:28:24.090

服务器在响应标头中表示其对范围的支持。当您向站点发送 HEAD 或 GET 时，在响应中查找“Accept-Ranges: bytes”。

# android - Android AppWidget 奇怪的行为

> ID：12332861
> 
> 赞同：1
> 
> 时间：2012-09-08T17:21:08.590
> 
> 标签：android, memory, widget, reset

我创建了一个小部件，用于检索 html 原始数据并将其解析出来。数据正确显示到小部件，但是当我启动小部件的配置活动并退出时，小部件布局被重置，小部件上没有显示任何内容，所有文本都被删除。该小部件在 android 4.0 上完美运行并且没有此问题，但在 2.3.3 上它具有此行为。关于问题是什么以及如何解决它的任何想法？

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {

       WidgetIds = appWidgetIds;
       try {BUP.backupWidgetIdLength(context,  WidgetIds.length);} catch (Exception e1) {e1.printStackTrace();}
       for(int i = 0; i < WidgetIds.length; i++)
       {
        try {BUP.backupWidgetIds(context, WidgetIds[i], i);
            } catch (Exception e) {e.printStackTrace();}
       }

          super.onUpdate(context, appWidgetManager, appWidgetIds);
          //updateWidget(context,appWidgetIds);
          final int N = appWidgetIds.length;
          for (int i=0; i<N; i++) {
              int appWidgetId = appWidgetIds[i];

              updateWidget(context,appWidgetId);

          }  

static void updateWidget(Context context,int appWidgetIds)
{

    Intent intent = new Intent(context, MySchedule.class);

        RemoteViews updateViews = new RemoteViews(context.getPackageName(),R.layout.main);
        try
        {

            Intent sch = new Intent(context, FullSchedule.class);
            sch.setAction(schedule_Click);
            sch.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
            sch.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            updateViews.setOnClickPendingIntent(R.id.Rlayout4,PendingIntent.getActivity(context.getApplicationContext(),appWidgetIds,sch,PendingIntent.FLAG_UPDATE_CURRENT));   

            Intent f = new Intent(context, MyConfig.class);
            f.setAction(Settings);
            f.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
            f.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            updateViews.setOnClickPendingIntent(R.id.Rlayout2,PendingIntent.getActivity(context.getApplicationContext(),appWidgetIds,f,PendingIntent.FLAG_UPDATE_CURRENT)); 

            Intent s = new Intent(context, MySchedule.class);
            s.setAction(leftSchedule_CLICK);
            s.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
            PendingIntent pis = PendingIntent.getBroadcast(context.getApplicationContext(),appWidgetIds, s,PendingIntent.FLAG_UPDATE_CURRENT);
            updateViews.setOnClickPendingIntent(R.id.Change_Schedule,pis);

            Intent t = new Intent(context, MySchedule.class);
            t.setAction(rightSchedule_CLICK);
            t.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
            PendingIntent pit = PendingIntent.getBroadcast(context.getApplicationContext(),appWidgetIds, t,PendingIntent.FLAG_UPDATE_CURRENT);
            updateViews.setOnClickPendingIntent(R.id.Change_Schedule2,pit);

            Intent u = new Intent(context, MySchedule.class);
            u.setAction(Update_Schedule);
            u.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
            PendingIntent piu = PendingIntent.getBroadcast(context.getApplicationContext(),appWidgetIds, u,PendingIntent.FLAG_UPDATE_CURRENT);
            updateViews.setOnClickPendingIntent(R.id.updateView,piu);

            AppWidgetManager appWidgetMan = AppWidgetManager.getInstance(context);
            ComponentName thisWidget = new ComponentName(context, MySchedule.class);
            appWidgetMan.updateAppWidget(thisWidget, updateViews);

        }catch(Exception e)
        {
            Log.d("Error_OnUpdate",e.getMessage());
        }

}

   } 
```

`

# terminal - 为什么这个预安装脚本只是部分运行？

> ID：12332864
> 
> 赞同：0
> 
> 时间：2012-09-08T17:21:20.840
> 
> 标签：terminal, applescript, packagemaker, osascript

我使用 PackageMaker 创建安装包。以下是我`preinstall script`要被调用的`Installer`：

```
#!/bin/sh
/usr/bin/osascript <<EOF
tell application "System Events"
if exists (application process "Dictionary") then
    tell application "Dictionary" to quit
end if
end tell
set theFolder to (path to library folder as text) & "Dictionaries:"
set fileNames to {"dict1.dictionary", "dict2.dictionary", "dict3.dictionary", "dict_n.dictionary"}
set dict to {}
repeat with aFile in fileNames
tell application "Finder"
    if exists file (theFolder & aFile as text) then set end of dict to aFile & return
end tell
end repeat
try
tell application "System Events"
    if dict ≠ {} then display alert "You have XYZ installed" message "Choose 'Upgrade' to install the new version or 'Cancel' if you want to stay with the current version." & return & dict buttons {"Cancel", "Upgrade"} default button "Upgrade"
    if the button returned of the result is "Cancel" then
        tell current application
            set app_name to "Installer"
            set the_pid to (do shell script "ps ax | grep " & (quoted form of app_name) & " | grep -v grep | awk '{print $1}'")
            if the_pid is not "" then do shell script ("kill -9 " & the_pid)
        end tell
    end if

end tell
end try
EOF 
```

该脚本在 AppleScript 编辑器和终端中运行良好，即如果字典应用程序正在运行，它会关闭它，如果用户选择取消，它会强制退出安装程序。

但是，在安装过程中调用时，它只是部分运行：它关闭 Dictionary 应用程序，但在选择取消按钮时绕过强制退出安装程序。请注意，我已经完成`chmod 755`了`preinstall`文件。

我错过了什么？我做错了什么？你能帮忙吗？

非常感谢。

# c - C中未声明的参数

> ID：12332865
> 
> 赞同：0
> 
> 时间：2012-09-08T17:21:45.750
> 
> 标签：c, arguments, undeclared-identifier

我正在尝试用 C 编译我的程序，这些是我得到的错误：（请注意，我是这种语言的初学者。）

Excer3.c：在函数“addstudent”中：

```
Excer3.c:50: error: `student' undeclared (first use in this function)
Excer3.c:50: error: (Each undeclared identifier is reported only once
Excer3.c:50: error: for each function it appears in.)
Excer3.c:50: error: parse error before "newS"
Excer3.c:50: error: `newS' undeclared (first use in this function)
Excer3.c:50: error: parse error before ')' token
Excer3.c:52: error: `studentName' undeclared (first use in this function)
Excer3.c: At top level:
Excer3.c:59: error: parse error before '*' token
Excer3.c: In function `readdb':
Excer3.c:70: error: `students' undeclared (first use in this function)
Excer3.c:70: warning: passing arg 2 of `addstudent' makes integer from pointer without                 a cast 
```

我的代码看起来像这样。该函数无法识别它给出的参数。：

```
#include <stdio.h>

struct student {
int studentnumber;
char* Name;
struct student* next;
};

struct teacher {
int teachernumber;
char* Name;
struct teacher* next;
};

struct course {
struct teacher teachers[5];
struct student students[50];
int semesternumber;
struct course* next;
};

int readline(char s[],int lim)
{
  int c, i;
  for (i=0; i < lim-1 && (c=getchar())!=EOF && c!='\n'; ++i)
    s[i] = c;
  if (c == '\n') {
    s[i] = c;
    ++i;
  }
  s[i] = '\0';
  return i;
}

int addstudent (struct student* prev, int studentnumber, char* studentname)
{
if (!(prev==NULL))
  student newS = (student*)malloc(sizeof(student));
  newS->studentnumber = studentnumber;
  newS->firstname = strdup(studentName);
  newS->next = NULL;
  prev->next=newS;

  return 1;
}

int readdb(student* students)
{
char line[200];
int* studentnumber,coursenumber,teachernumber,semesternumber;
char studentname[100],teachername[100],coursename[100];

while(readline(line,200) > 0)
{
if(sscanf(line, "S %d %s", &studentnumber, studentname)==2)
{
 printf("Student. \n\tStudent number: %d, \n\tFirst name: %s\n", studentnumber,  
studentname);
 addstudent(students,&studentnumber,studentname);
 }
else if(sscanf(line, "C %d %s %d", &coursenumber, coursename , &semesternumber)==3)
   printf("Course. \n\tCourse number: %d \n\tCourse name: %s \n\tSemester: %d\n",   
coursenumber, coursename, semesternumber);
else if(sscanf(line, "E %d %d", &studentnumber, &coursenumber)==2)
printf("Enrolment. \n\tStudent number: %d, \n\tCourse number: %d\n", studentnumber, 
coursenumber);
else if(sscanf(line, "T %d %s", &teachernumber, teachername)==2)
 printf("Teacher. \n\tTeacher number: %d, \n\tFirst name: %s\n", teachernumber,  
teachername);
else if(sscanf(line, "A %d %s", &teachernumber, &coursenumber)==2)
 printf("Assignment. \n\tTeacher number: %d, \n\tCourse number: %d\n", teachernumber,
coursenumber);
}

}

int main () 
{
struct student* students = NULL;

readdb(&students);
return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T17:24:28.870

你正在使用`student`而不是`struct student`如果你想使用，`student`那么你需要`typedef struct student student;`在你的代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:23:42.977

在`addstudent`中，您声明

```
student newS = (student*)malloc(sizeof(student)); 
```

那应该是`struct student newS`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T17:42:44.263

现有答案是正确的：`student`目前不是您程序中的类型名称，而是`struct student`。你已经正确地使用了它，所以让它保持一致。

冒着偏离代码审查领域的风险，`addstudent`仍然不会做你想做的事。

```
int addstudent (struct student* prev, int studentnumber, char* studentname)
{
    if (!(prev==NULL))
        student newS = (student*)malloc(sizeof(student));
    newS->studentnumber = studentnumber;
    newS->firstname = strdup(studentName);
    newS->next = NULL;
    prev->next=newS;

    return 1;
} 
```

所以这是试图追加到链表的末尾，这很好，但是有一些错误：

*   `newS`声明应该是`struct student *newS = malloc(sizeof(*newS));`

    1.  我们修复了编译器抱怨的结构名称
    2.  malloc 返回一个指针，所以`newS`也必须是一个指针
    3.  `p = malloc(sizeof(*p))`是一种常见的习惯用法，可以避免`p`以后更改类型时出现bug，但忘记编辑sizeof表达式
*   您当前`newS` *仅*在 if 语句的范围内声明 - 这意味着以下引用的`newS`行将无法编译，因为它们看不到该变量。我们可以使用大括号来扩展范围，如下所示：`if (prev) { ... } return 1;`

*   `newS->next`始终设置为 NULL，因此如果已经有值，则将其丢弃*。*`prev->next`这意味着您的链接列表只能是一个学生。如果你想让你的列表链接在一起，它应该是

    ```
    newS->next = prev->next;
    prev->next = newS; 
    ```

*   你正在混淆`struct student **`（这是传入的类型`readdb(&students)`）并且`struct student *`......你需要弄清楚你想要哪个，并坚持下去。当前`addstudent`代码仅在您有一个`struct student`实例（不是指针）且 next 初始化为 NULL 作为列表的头部时才有效。

# android - 如何在 Intellij Idea 中添加库

> ID：12332869
> 
> 赞同：0
> 
> 时间：2012-09-08T17:22:17.963
> 
> 标签：android, intellij-idea, andengine

我最近从 Eclipse 切换到 Intellij。现在我正在尝试使用 andengine 库。

在 Eclipse 中添加库很容易。只需右键单击 > 属性 > 添加库。

在 Intellij 中，右键单击文件夹时没有选项（见图）。如何在 Intellij 中添加项目库（文件夹，而不是 jar 文件）？

![在此处输入图像描述](../Images/8fd30442805103496ab65397f052b1e3.png)

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:26:39.957

导航到`File > Project Structure`，选择`Modules`，然后点击加号按钮添加另一个文件夹（带有源代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T13:38:28.220

直接将游戏引擎添加到项目中（intelliJ IDEA所有版本）；

1.  创建新项目或打开现有项目。
2.  右键单击项目资源管理器中的“Java”文件夹并创建 New -> Package。
3.  输入新的包名：org.andengine
4.  [点击下载AndEngine](https://github.com/nicolasgramlich/AndEngine/archive/GLES2.zip)

5.  解压 zip 文件并打开 AndEngine-GLES2 文件夹。按照路径复制文件夹（src -> org -> 复制和引擎文件夹）。

6.  打开您的项目并按照路径进行操作。你的项目模块名 -> src -> main -> java -> org -> andengine. 贴在这里...

=> 打开并检查 Android Studio。写的时候会出现“import org”。-> 安德金。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-12T07:50:26.443

请按照以下步骤操作：单击菜单中的文件 从下拉列表中选择项目结构（快捷键：Ctrl+Alt+Shift+S） 在模块下，单击 + 按钮并选择 jar 文件。就是这样。

# ant - 蚂蚁秒表任务的替代品

> ID：12332873
> 
> 赞同：1
> 
> 时间：2012-09-08T17:22:46.060
> 
> 标签：ant, time, echo, stopwatch, ant-contrib

我在*ant-contrib中找到了***ant 任务** ，但我在那里丢失了参数。所以我需要**在非安静模式下启动 ant**以获取输出（另外看到不需要的**ant**消息）：`stopwatch`*`echo level``duration format`**`stopwatch elapsed` **`echo`*****

 *****```
<target name="build">
    <stopwatch name="foo"/>

    <sleep milliseconds="50"/>   <!-- do something -->
    <echo level="info" message="message not wanted to see normally"/>

    <stopwatch name="foo" action="elapsed"/>
</target> 
```

或者，我只看到编写自己的目标或宏，例如

```
<macrodef name="echo-with-time">
    <attribute name="message" default="" />
    <attribute name="level" default="warning" />
    <sequential>
        <local name="now"/>
        <tstamp><format property="now" pattern="yyyy-MM-dd HH:mm:ss,SSS"/> </tstamp>
        <echo level="@{level}" message="[${now}] @{message}" />
    </sequential>
</macrodef> 
```

**问题：**有没有办法只**输出持续时间**（比如用所用时间属性计算）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-04T13:55:32.287

`<scriptdef>`您可以在您想要计时的事物的开始和结束处使用自定义的时间读取当前时间戳，然后使用`math`任务计算差异。

像这样的东西：

```
<var name="start" unset="true"/>
<var name="stop" unset="true"/>
<var name="duration" unset="true"/>

<unix-timestamp property="start" />
<!-- Do something to be timed -->
<unix-timestamp property="stop" />
<math result="duration" operand1="${stop}" operation="-" operand2="${start}" datatype="int"/>
<echo message="Task took ${duration} seconds"/> 
```

任何受支持语言`<unix-timestamp>`的 a在哪里`<scriptdef>`

```
<scriptdef name="unix-timestamp" language="javascript">
    <attribute name="property" />
    <![CDATA[
        var property = attributes.get("property");
        var nowSeconds = Math.round(new Date().getTime()/1000);
        project.setProperty(property, nowSeconds);
    ]]>
</scriptdef> 
```*****

# python - 在正文中的代码之前调用上下文管理器出口

> ID：12332881
> 
> 赞同：3
> 
> 时间：2012-09-08T17:23:11.973
> 
> 标签：python, contextmanager

我一直在尝试用 Python 制作自己的上下文管理器。我看到一些奇怪的行为很可能是由于我的实施。

我看到`__exit__`在“with”上下文中的语句之前调用的代码。例如，这里是代码片段：

```
with ProgressBar(10) as p:
  p.update(1) 
```

这是个例外：

```
Traceback (most recent call last):
  File "<stdin>", line 3, in <module>
AttributeError: 'NoneType' object has no attribute 'update' 
```

我将调试放入上下文管理器的所有`__enter__`、`__exit__`和 update 方法中。看起来像是`__exit__`在 update() 之前调用的。这没有任何意义，所以我必须遗漏一些简单的东西。

这是我的简单上下文管理器类：

```
class ProgressBar(object):
    """Progress bar that normalizes progress to [0 - 100] scale"""

    def __init__(self, max_value):
        """Create progress bar with max_value"""

        self._current_value = 0.0
        self._completed_value = 100.0
        self._max_value = float(max_value)
        print 'init', max_value

    def __enter__(self):
        """Start of context manager, 'with' statement"""

        print 'enter'
        self._current_value = 0.0

    def __exit__(self, exc_type, exc_value, traceback):
        """Start of context manager, 'with' statement"""

        print 'exit'
        self._current_value = self._completed_value

        # Not handling any exceptions, so they'll be raised automatically
        # To ignore exceptions return True or inspect arguments to handle

        return False

    def update(self, value):
        """Update progress value"""

        print 'update'
        if value >= self._max_value:
            self._current_value = 100
        else:
            self._current_value = (value / self._max_value) * self._completed_value

        print '\r%s' % (self._current_value), 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T17:28:02.580

从文档中：

> `object.__enter__(self)`
> 
> 输入与此对象相关的运行时上下文。该`with`语句将将此方法的返回值绑定到该`as`语句子句中指定的目标（如果有）。

你没有返回任何东西`__enter__`（因此你一如既往地返回 None ）。如果你`return self`，你会得到

```
init 10
enter
update
10.0 exit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T17:28:50.077

该`with`语句将上下文管理器[方法的](http://docs.python.org/reference/datamodel.html#object.__enter__)*返回值*绑定到变量。在您的情况下，这意味着绑定到（您根本没有 return 语句，默认值也是如此），引发 an 并调用该方法。[`__enter__`](http://docs.python.org/reference/datamodel.html#object.__enter__)`p``None``__enter__``None``AttributeError``__exit__`

解决方案是`self`从`__enter__`方法返回：

```
def __enter__(self):
    """Start of context manager, 'with' statement"""

    print 'enter'
    self._current_value = 0.0
    return self 
```

# macos - 自动使用 git remote 的 -v 选项

> ID：12332885
> 
> 赞同：1
> 
> 时间：2012-09-08T17:23:30.803
> 
> 标签：macos, git, zsh

我想自动使用该`git remote`命令的 -v 选项。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:02:08.860

运行这个：

```
git config --global alias.remotes 'remote -v' 
```

这将在您的 git 配置文件中放置一个 git 命令别名。要使用它，请键入`git remotes`。不幸的是，您不能使用别名覆盖实际的 git 命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T17:26:16.970

为您的 shell 命令添加别名，如下所示：

```
alias grem='git remote -v' 
```

从技术上讲，这应该放在 .bashrc 中，您应该从 .profile（或 .bash_profile）中引用它。

然后你可以使用一个更短的命令，得到你想要的：

```
grem 
```

因此，您的 .bashrc 文件（在您的主目录中）将包含您的所有别名，然后您的 .profile/.bash_profile （无论您拥有哪个）将包含：

```
if [ -f ~/.bashrc ]; then
   . ~/.bashrc
fi 
```

# android - Android：应用程序特定文件下载

> ID：12332888
> 
> 赞同：0
> 
> 时间：2012-09-08T17:23:47.277
> 
> 标签：android, security, download, sandbox

我对 android 应用程序开发很陌生，目前我面临着使用我的应用程序下载 pdf 文件的挑战，这些 pdf 文件只能由我的应用程序访问，没有人/没有其他应用程序可以访问或查看我的 pdfs。

在 iPhone 中，每个应用程序都有自己的沙箱（逻辑），并且属于这些沙箱的资源无法被其他应用程序访问。

如果我打算使这些下载应用程序依赖并使它们无法访问其他应用程序，甚至通过将 android 设备安装到 PC 上，建议使用什么方法。

如果，我的问题没有任何意义，那么请告诉我，我会解释更多，让你清楚我的担忧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:15:33.963

将文件保存在 YourActivity.getContext() 中。[获取文件目录（）](http://developer.android.com/reference/android/content/ContextWrapper.html#getFilesDir%28%29)。或使用[openFileOutput()](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)

# python - 在工厂方法中返回什么？

> ID：12332889
> 
> 赞同：0
> 
> 时间：2012-09-08T17:23:47.983
> 
> 标签：python, oop, class, factory-pattern, named-constructor

我有一个类`Node`，我希望它有多个构造函数。

我在网上阅读有关工厂方法的信息，显然，这是实现构造函数的最简洁的 Pythonic 方式。到目前为止，我的课程如下所示：

```
class Node(object):
  element = None
  left = None
  right = None

  def __init__(self, element):
    self.element = element

  @classmethod
  def tree(cos, element, left, right):
    self.element = element
    self.left = left
    self.right = right
    # return here 
```

我应该回到这里做什么？我在网上看到的所有例子都只有一个作业，他们会返回那个作业。我有三个任务。什么适合返回这里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:27:23.373

在命名构造函数（工厂方法）中，您应该创建一个要返回的对象。例如

```
class Node(object):
    def __init__(self, element):
        self.element = element
        self.left = self.right = None

    @classmethod
    def tree(cls, element, left, right):
        node = cls(element)
        node.left = left
        node.right = right
        return node 
```

请注意，您不需要类成员，并且具有与实例成员同名的类成员是一个坏主意。

# ruby-on-rails - 如何在 gmaps4rails 中居中地图？

> ID：12332891
> 
> 赞同：2
> 
> 时间：2012-09-08T17:23:58.963
> 
> 标签：ruby-on-rails, gmaps4rails

我想显示以特定位置为中心的地图。在我的控制器中，我使用

```
@gmapsoptions = {
     "map_options" => {"center_latitude" => 40, 
                       "center_longitude" => 73,
                       "detect_location" => false,
                       "center_on_user" => false,
                       "auto_adjust" => false,
                       "auto_zoom" => false,
                       "zoom" => 8 }
                 } 
```

在我看来，我使用

```
<%= gmaps(@gmapsoptions) %> 
```

它可以很好地渲染地图，但它不是以上面指定的位置为中心，而是以“0/0”即日期线为中心。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T18:53:39.937

刚刚检查了您的存储库，您应该简单地`auto_zoom`设置为`true`（或删除它，因为它是默认值）。

# javascript - 创建时选择Nav 大写

> ID：12332893
> 
> 赞同：0
> 
> 时间：2012-09-08T17:24:12.880
> 
> 标签：javascript, html, css

我有这个页面：[http ://cirkut.net/sub/avid/](http://cirkut.net/sub/avid/)

在我的 HTML 中，我的菜单项是大写的（Home、About 等），但我将它们文本转换为小写（我的品牌主要使用小写）。

我正在使用`selectnav.js`响应式菜单，我喜欢它的工作原理，但我希望`<option>`选择中的 's 成为原始大写字母。除了更改插件之外，是否有一种简单的方法可以`selectnav`使用实际的 HTML（大写）而不是呈现的文本（小写）？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:53:38.213

您可以定位`.selectnav`元素并使用 CSS 将其大写。

```
.selectnav {
    text-transform: capitalize;
} 
```

# geolocation - Titanium 应用程序开发：从智能手机接收地理位置

> ID：12332897
> 
> 赞同：0
> 
> 时间：2012-09-08T17:24:32.893
> 
> 标签：geolocation, titanium, appcelerator, titanium-mobile, appcelerator-mobile

我正在尝试开发一个移动应用程序，它基本上可以帮助您根据朋友和家人的地理位置信息跟踪他们的位置。所以我知道这将涉及在访问数据之前获得他们的许可。

我对在 Titnaium Appcelerator 中开发应用程序有基本的了解。但我需要帮助来弄清楚如何与第三方设备通信、请求许可并检索其地理位置。

我正在开发的应用程序将与此非常相似：http: [//goo.gl/dvCgP](http://goo.gl/dvCgP)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:27:21.397

您可以做到这一点的唯一方法是设置一个中央网络服务，手机本身无法收集彼此的 GPS 位置，无论如何，您无法将所有其他手机信息存储在您自己的设备上。

设置一个网络服务，当手机发布 GPS 位置时保存它们，然后让该服务返回它们连接的其他手机。设置好该服务后，在 Titanium 中使用它就很简单了：

```
// First lets get our position
Titanium.Geolocation.accuracy = Titanium.Geolocation.ACCURACY_BEST;
Titanium.Geolocation.distanceFilter = 10;
Titanium.Geolocation.getCurrentPosition(function(e) {

    if (e.error) {
        alert('Cannot get your current location');
        return;
    }

    var longitude = e.coords.longitude;
    var latitude = e.coords.latitude;

    // We need to send an object to the web service verifying who we are and holding our GPS location, construct that here
    var senObj = {userid : 'my_user_id', latitude : latitude, longitude : longitude};
    // Now construct the client, and send the object to update where we are on the web server
    var client = Ti.Network.createHTTPClient({
        onload : function(e) {
            // Parse the response text from the webservice
            // This response should have the information of the other users youre connected too
            var rsp = JSON.parse(this.responseText);

            // do something with the response from the server
            var user = rsp.otherUsers[0];
            alert('Tracking other user named '+user.userid+' at coordinates ('+user.longitude+','+user.latitude+')');
        },
        onerror : function(e) {
            Ti.API.info('[ERROR] communicating with webservice.');
        }
    });

}); 
```

# ruby-on-rails - 为什么日期助手在 Rails 控制台中不起作用？

> ID：12332899
> 
> 赞同：30
> 
> 时间：2012-09-08T17:24:44.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在记录上有一个 datetime 属性：

```
 1.9.3p194 :024> f.last_contact
 => Thu, 11 Aug 2011 00:00:00 UTC +00:00 
```

但是当我在控制台上尝试`time_ago_in_words`时，它不起作用：

```
> time_ago_in_words(f.last_contact)
NoMethodError: undefined method `time_ago_in_words' for main:Object 
```

我还尝试`distance_of_time_in_words`了文档所说的应该与[Time, Date & DateTime objects](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words)一起使用。

```
> to_time = Time.now
 => 2012-09-08 12:22:16 -0500 
> distance_of_time_in_words(f.last_contact, to_time)
NoMethodError: undefined method `distance_of_time_in_words' for main:Object 
```

这是什么原因？Rails 控制台不应该加载所有必要的库和依赖项以使所有 Rails 方法工作吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-09-08T17:37:39.317

`helper`您可以通过对象使用所有帮助器（内置的和您自己的）

```
helper.time_ago_in_words(1.hour.ago)
=> "about 1 hour" 
```

或导入所需的助手

```
include ActionView::Helpers::DateHelper
time_ago_in_words(1.hour.ago)
=> "about 1 hour" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-08T17:30:34.603

尝试

```
helper.time_ago_in_words(...)
helper.distance_of_time_in_words(...) 
```

调用`helper.`似乎使您可以访问任何/所有已定义的助手。

此答案中的更多信息：[如何从 Rails 的控制台调用控制器/视图方法？](https://stackoverflow.com/questions/151030/how-do-i-call-controller-view-methods-from-the-console-in-rails)

我认为，您不能直接调用帮助程序的原因是因为它们不在您所在的范围内（在控制台中），而不是在帮助程序在范围内的视图中运行的代码。

# python - Django 扩展不包括子文件

> ID：12332900
> 
> 赞同：0
> 
> 时间：2012-09-08T17:24:46.810
> 
> 标签：python, django, django-templates

我有一个从模板目录返回页面的视图，成功，没问题：

```
def home(request):
    c = {}
    return render_to_response('home.html', c, context_instance=RequestContext(request)) 
```

如果**home.html**是一个没有*extends*的简单网页，它会返回正常。

但是，如果我使用包含，例如 {% extends "base.html" %}，它只会返回 base.html 而不会添加来自子 home.html 的内容。这可能是什么原因造成的？

**主页.html**

```
{% extends "base.html" %}
{% block title %}Home{% endblock %}
{% block content %}
This is the homepage.
{% endblock %} 
```

**base.html**

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>{% block content %}{% endblock %}</title>
</head>
<body>
{% block content %}{% endblock %}
</body>
</html> 
```

目前，这正在返回 base.html 的副本，如下所示：

```
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
</head>

<body>

</body>

</html> 
```

为什么不包括内容或标题栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:28:53.180

在您的*base.html*块中，命名*内容*出现了两次。您可能想将第一个块命名为`title`例如`{% block title %}{% endblock %}`

Django 建议您不要定义多个具有相同名称的模板块。

从[模板继承](https://docs.djangoproject.com/en/dev/topics/templates/#template-inheritance)

*最后，请注意，您不能在同一个模板中定义多个具有相同名称的块标记。存在此限制是因为块标签在“两个”方向上工作。也就是说，块标签不仅提供了一个要填充的洞——它还定义了填充父级洞的内容。如果模板中有两个名称相似的块标记，则该模板的父级将不知道要使用哪个块的内容。*

# c++ - 读取 Wav 文件，输出错误

> ID：12332901
> 
> 赞同：1
> 
> 时间：2012-09-08T17:24:52.223
> 
> 标签：c++, matlab, wav

我之前发布了一个类似的问题（认为最好重新开始，并希望获得更多的意见）。基本上，问题是我试图从 .wav 文件中读取数据，但是，输出与 MatLab 中的输出不同。

在 C++ 中，输出为：

-128

而在 Matlab 中：

0

输出完全不同，不仅仅是细微的差异，而是整个数据集都是错误的，我似乎不知道为什么。我认为这可能与字节顺序有关，但我不确定。以下是有关 .wav 文件的标头信息：

```
**** WAV FILE *****
Chunk IDRIFFN?
Chunk Size: 57934
Format: WAVEfmt 
Format: IDfmt 
FormatSize: 18
Format2: 1
Channel Num: 1
Sample Rate: 22050
Byte Rate: 22050
Align: 1
Bits Per Sample: 8 
```

和代码：

```
file.read(this->chunkId,                                 4);
file.read(reinterpret_cast<char*>(&this->chunkSize),     4);
file.read(this->format,                                  4);

file.read(this->formatId,                                4);
file.read(reinterpret_cast<char*>(&this->formatSize),    4);
file.read(reinterpret_cast<char*>(&this->format2),       2);
file.read(reinterpret_cast<char*>(&this->numChannels),   2);
file.read(reinterpret_cast<char*>(&this->sampleRate),    4);
file.read(reinterpret_cast<char*>(&this->byteRate),      4);
file.read(reinterpret_cast<char*>(&this->align),         2);
file.read(reinterpret_cast<char*>(&this->bitsPerSample), 4);

char testing[4] = {0};
int testingSize = 0;

while(file.read(testing, 4) && (testing[0] != 'd' ||
                                testing[1] != 'a' ||
                                testing[2] != 't' ||
                                testing[3] != 'a'))
{

    file.read(reinterpret_cast<char*>(&testingSize), 4);
    file.seekg(testingSize, std::ios_base::cur);

}

this->dataId[0] = testing[0];
this->dataId[1] = testing[1];
this->dataId[2] = testing[2];
this->dataId[3] = testing[3];

file.read(reinterpret_cast<char*>(&this->dataSize),     4);

this->data = new char[this->dataSize];

file.read(data,this->dataSize);

cout << "**** WAV FILE *****" << endl;
cout << "Chunk ID" << this->chunkId << endl;
cout << "Chunk Size" << this->chunkSize << endl;
cout << "Format: " << this->format << endl;
cout << "Format ID" << this->formatId << endl;
cout << "FormatSize" << this->formatSize << endl;
cout << "Format2 " << this->format2 << endl;
cout << "Channel Num" << this->numChannels << endl;
cout << "Sample Rate" << this->sampleRate << endl;
cout << "Byte Rate" << this->byteRate << endl;
cout << "Align" << this->align << endl;
cout << "Bits Per Sample" << this->bitsPerSample << endl;
cout << "Size" << testingSize << endl;

for(unsigned i=0; (i < 20); i++){
    cout << (float) data[i] << endl;
}

return true; 
```

谁能看到我哪里出错了？我试图调试它，但是没有乐趣（我正在使用 g++ 编译）。任何帮助将不胜感激:)对不起，我一直在问这个，现在真的很烦我！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:52:19.740

我相信 WAV 文件中的块必须与最近的 WORD 边界对齐。如果在您解析的格式部分之后不是在下一个单词边界处，您将不会进入 while 循环，并且您的代码将假定您在数据部分。

同样，如果您的任何块的长度为奇数字节，您可能会遇到麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T19:41:49.703

好的，看看代码，它看起来像一个转换错误。您显然正在尝试输出 20 个浮点数（每个由 4 个字节组成），但您实际输出的只是 20 个字节，每个单个字节都转换为一个浮点数。我想你可能想要这个

```
for(unsigned i=0; (i < 20); i++){
    cout << ((float*) data)[i] << endl;
} 
```

换句话说，您将数据转换为浮点指针，然后应用索引。不要先应用索引，然后再转换为浮点数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T13:54:00.077

我认为在 matlab 中的值在 -1 到 1 之间进行归一化，因此为了在 c++ 中获得类似的输出，您需要对它们进行缩放。示例为 16 位在 -32768 到 32767 范围内的样本，您希​​望它们缩放到 -1.0 到 1.0。这样做的方法是除以 32768.0（-32768/32768.0 == -1，32767/32768.0 略小于 1）。

```
for(unsigned i=0; (i < 20); i++){
    cout << ((float) data[i])/32768.0 << endl;
} 
```

# android - solo.searchButton 始终返回 true（Android 2.3.6 与 robotsium）

> ID：12332902
> 
> 赞同：1
> 
> 时间：2012-09-08T17:24:53.103
> 
> 标签：android, robotium

**哪些步骤将重现该问题？**

1.  我想使用这个“solo.searchButton("Show pictures");”作为当前屏幕上的搜索按钮。如果存在则执行一些操作，如果不存在则执行一些其他操作。

2.  即使此按钮不在当前屏幕中，它也会返回 true。

**什么是预期的输出？你看到了什么呢？**

如果屏幕上存在名称为“显示图片”的按钮，然后“solo.searchButton("显示图片");”返回 true，否则返回 false。

**您使用的是什么版本的产品？在什么操作系统上？**

Samsunt Galaxy Ace，Android 2.3.6 (GB)，库：robotium-solo-3.4.1

Eclipse（使用 Windows 7）

**请在下面提供任何附加信息。**

我在 android 4.0.3 (ICS) 和 4.1.1 上测试它

(JB)solo.searchButton 总是返回 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:26:42.017

请改用：searchButton(String text, boolean onlyVisible)。您遇到的问题是视图在那里，但是它是不可见的，因此您看不到它。希望这可以帮助！

# c++ - gethostbyaddr错误未知主机

> ID：12332906
> 
> 赞同：1
> 
> 时间：2012-09-08T17:25:15.323
> 
> 标签：c++, c, sockets, networking, gethostbyaddr

```
#include <stdio.h>
#include <netdb.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

int main () {
    in_addr ip;
    ip.s_addr = inet_addr("173.194.71.94"); // www.google.fr IP
    hostent* hostnames = gethostbyaddr(&ip, sizeof(ip), AF_INET);
    if (hostnames != NULL && hostnames[0].h_name != NULL) {
        printf("%s\n", hostnames[0].h_name);
        return 0;
    } else {
        herror("gethostbyaddr");
        return 1;
    }
} 
```

它返回“gethostbyaddr：未知主机”。我尝试使用不同的 IP。怎么了 ？

任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:50:43.483

您的代码无法为我编译。我在`in_addr`和上出现错误`hostent`。但是，如果我将它们的声明分别更改为`struct in_addr`和`struct hostent`，它会在没有警告的情况下编译并在运行时发出以下输出：

```
lb-in-f94.1e100.net 
```

这似乎是正确的。

如果它为您按原样编译，那么您可能使用的是不同的操作系统。我尝试了 MacOS 和 Linux，结果相同。

# php - 自动加载打开时 PHP 不能包含文件

> ID：12332907
> 
> 赞同：-1
> 
> 时间：2012-09-08T17:25:20.173
> 
> 标签：php, include, autoloader, spl-autoloader

我有自己的 MVC 和加载类的自动加载器。除了我的基本 View.php 在 Core 文件夹中并且它的渲染函数执行以下操作之外，一切正常：

```
 public function render($file) {
        include('Project/Views/index/header.php');
        include('Project/Views/'.strtolower($file).'.php');
        include('Project/Views/index/footer.php');
   } 
```

View.php 使用命名空间

```
namespace Core; 
```

当我转到我的索引页面时，它给出：

```
Warning: include(Projcet/Views/index/header.php): failed to open stream: No such file ... 
```

我尝试了以下方法：我添加了

```
use Project\Views; 
```

而不是包括我做了：

```
$header = new Views\index\header(); 
```

这显示了页面上的标题，但它也给出了一个错误：

```
'Project\Views\index\header' not found 
```

我知道它是因为 header.php 不是一个类。这是一个视图文件。所以我不知道，当自动加载器为基本控制器加载 View.php 时，如何包含该文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:30:44.530

错误消息（如果您逐字复制粘贴）看起来您包含来自错误文件夹的文件：

警告：包含（**Projcet** /Views/index/header.php）：无法打开流：没有这样的文件...

# mongodb - 我应该如何在不扫描整个数据库的情况下按类别过滤？

> ID：12332908
> 
> 赞同：0
> 
> 时间：2012-09-08T17:25:29.320
> 
> 标签：mongodb, database

我需要建立一个数据库，允许我查询一个类别中的所有条目。我将只过滤一个类别属性，因此似乎应该可以在不搜索整个数据库的情况下进行这些查询。另外，如果可能的话，我想使用 mongodb。

我正在考虑的方法是为每个类别创建一个集合，但我是新手，所以我不确定这可能意味着什么。我希望有大量的类别会经常添加到数据库中。此外，我预计大多数类别中只有 1-10 个条目，其中有一些非常大的类别（即泊松分布）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:24:23.200

请提供有关命名空间限制的文档：

*   [http://docs.mongodb.org/manual/reference/limits/](http://docs.mongodb.org/manual/reference/limits/)

*   [http://www.mongodb.org/display/DOCS/Using+a+Large+Number+of+Collections](http://www.mongodb.org/display/DOCS/Using+a+Large+Number+of+Collections)

为什么要为每个类别创建一个集合？您甚至不会使用 RDBMS 来做到这一点。在 RDBMS 中，您将使用一个带有索引的“类别”列的表。MongoDB 也可以使用相同的方法，并且基本上以完全相同的方式工作。此外，出于可伸缩性原因，您应该能够在必要时对此类集合进行分片。

# facebook - cancel_url URL 格式不正确

> ID：12332909
> 
> 赞同：2
> 
> 时间：2012-09-08T17:25:31.130
> 
> 标签：facebook, facebook-graph-api, authentication, login, user-permissions

Facebook 身份验证在过去 6 周内在 IOS 应用程序中运行良好（不是 SSO），但在过去几天它已经坏了。（无代码，设置已更改）

当新用户登录时，会出现以下错误：

```
API Errorcode:100
API error description: invalid parameter
Error message: cancel_url URL is not correctly formatted 
```

（如果用户已经对应用程序进行了身份验证，那么它可以正常工作）

如果用户取消对话框并再次登录，那么它会立即出现权限对话框，这让我相信登录对话框和权限对话框之间的链接已断开，Facebook 方面，否则一切正常。

没有代码更改，也找不到上述任何报告。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:22:17.023

这是一个 Facebook 错误：

[https://developers.facebook.com/bugs/280811108698311?browse=search_504cdd910488b0450000382](https://developers.facebook.com/bugs/280811108698311?browse=search_504cdd910488b0450000382)

另一种方法是实施似乎不受影响的单点登录。

# javascript - 如何使用按钮在 div 之间切换？

> ID：12332910
> 
> 赞同：1
> 
> 时间：2012-09-08T17:25:48.043
> 
> 标签：javascript, jquery, html

我一直在开发我的第一个实验性网站，首页上有一个图像幻灯片放映 div 部分。我在右上角有一个用于登录的按钮。当用户单击登录按钮时，id 就像要隐藏的图像幻灯片和要在其位置显示的登录表单。

我希望点击这个按钮。（按钮的样式位于连接到 div 的 css 文件中。）

```
<a href="javascript:void(0);" id="signin">
  <div id="logbutton">
    Sign in
  </div>
</a> 
```

我想在这两者之间切换

```
<div id="pic">
  <img src="img/header.jpg" id="imgBanner" />
</div>

<div id="logbox" style="display: none;">
  Login form
</div> 
```

单击按钮时，此 javascript 函数是/应该运行

```
$(function(){
  $('#signin').click(function(){
    $('#pic').toggle();
    $('#logbox').toggle(); 
  });
}); 
```

我觉得我错过了一些东西，或者我可能完全错过了使用这段代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:59:50.520

首先：我会这样做：

```
<script>
 var showLoginForm = false;
 $(function(){
   $('#signin').click(function(){
    $('#pic,#logbox').hide();
    $('#pic').toggle(!showLoginForm);
    $('#logbox').toggle(showLoginForm);
  });
 });
</script> 
```

第二：将块元素（div、table 等）放在内联元素（a、span 等）中是一种糟糕的 HTML 做法。根据您的需要删除 and 样式，这是一个示例：

```
<style>
 .linkButton {
  display: inline-block;
  height: 20px;
  padding: 5px;
 }
</style>
<a href="javascript:void(0);" id="signin" class="linkButton">Sign in</a> 
```

# php - 正则表达式只允许字母数字加上其他特定字符

> ID：12332920
> 
> 赞同：1
> 
> 时间：2012-09-08T17:26:52.890
> 
> 标签：php, regex

使用 PHP 函数，我正在尝试为 preg_replace 创建一个 RegEx 字符串，该字符串仅允许字母数字字符加上`! @ # $ % & . ,`

PHP函数是

```
 function clean($var) {
    $regEx="REGEXSTRING";   
    $var = preg_replace($regEx, "", $var);
    return str_replace(array("&", "'"),
    array("&amp;", "&apos;"), $var);
} 
```

该字符串将与我正在寻找的内容相匹配。

:: 编辑 :: 当我打字时，我想出了什么对我有用。不确定这是否是最好的解决方案，但它确实有效。但我想我会把它贴在这里作为其他初学者的解决方案。

我使用的字符串是...

```
$regEx="/[^a-zA-Z0-9 !@#$%&.,]/"; 
```

希望它可以帮助某人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T17:33:27.223

```
 function clean($var) {
    $regEx="/[^a-zA-Z0-9 !@#$%&.,]/"; 
    $var = preg_replace($regEx, "", $var);
    return str_replace(array("&", "'"),
    array("&amp;", "&apos;"), $var);
} 
```

# javascript - 从 json 对象聚合数据并创建层次结构

> ID：12332928
> 
> 赞同：1
> 
> 时间：2012-09-08T17:27:39.177
> 
> 标签：javascript, jquery, json, html, aggregate

我必须创建一个树结构表，其中包含一些以 json 数组形式给出的数据。

让我们举一个例子数组

```
array :
[
{ "continent": "Asia", "country":"India", "population": 100, "GDP":4},
{ "continent": "Asia", "country":"china", "population": 130, "GDP":20},
{ "continent": "Asia", "country":"Pakistan", "population": 20, "GDP":1},
{ "continent": "Europe", "country":"UK", "population": 2, "GDP":15},
{ "continent": "Europe", "country":"France", "population": 4, "GDP":16},
{ "continent": "Europe", "country":"Germany", "population": 5, "GDP":21}
] 
```

桌子就像一棵可以展开或折叠的树。让树像，

```
 continent          country         population       GDP

    Asia           +                   250               25

    Europe         -                   11                52
                       UK              2                 15
                       France          4                 16
                       Germany         5                 21 
```

在上表中我们扩展了欧洲，在下表中我们扩展了亚洲。

```
 continent           country            population       GDP

    Asia           -                       250              25
                        India              100              4
                        China              130              20
                        Pakisthan          20               1

    Europe       +                         11               52 
```

请帮助我创建具有汇总值的表格。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T18:00:04.343

您在标签中提到`javascript`，所以我假设您需要 JS 中的答案。我给你的关键词是你需要学习的。

首先，声明变量。

```
var regions = [
  { "continent": "Asia", "country":"India", "population": 100, "GDP":4},
  { "continent": "Asia", "country":"china", "population": 130, "GDP":20},
  { "continent": "Asia", "country":"Pakistan", "population": 20, "GDP":1},
  { "continent": "Europe", "country":"UK", "population": 2, "GDP":15},
  { "continent": "Europe", "country":"France", "population": 4, "GDP":16},
  { "continent": "Europe", "country":"Germany", "population": 5, "GDP":21}
]; 
```

然后，您需要一些东西来保存各种答案：

变量结果 = {}; // 注意，这是一个对象。不是数组。

接下来，使用标准循环处理遍历数组。如果`for`您需要支持较旧的浏览器，`.forEach`如果您只能针对较新的浏览器，则为循环。

对于每个循环，查看是否`continent`存在于`results`. 如果不是，则添加`property`值为 0 的 。

`GDP`然后只是积累`results[<continent>]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:40:17.570

```
function showHide(){
  var td = this,
      tr = this.parentElement,
      next = td.nextElementSibling;
  if(tr.className == 'visible'){
    var rowSpan = td.rowSpan;
    td.oldRowSpan = rowSpan;
    td.rowSpan = next.rowSpan = 1;
    tr.className = 'collapsed';
    for(var i=1; i<rowSpan; ++i){
      tr = tr.nextElementSibling;
      tr.className = 'hidden';
    }
  }else{
    td.rowSpan = next.rowSpan = td.oldRowSpan;
    rowSpan = td.oldRowSpan;
    tr.className = 'visible';
    for(var i=1; i<rowSpan; ++i){
      tr = tr.nextElementSibling;
      tr.className = '';
    }
  }
}
var data = [
  { "continent": "Asia", "country":"India", "population": 100, "GDP":4},
  { "continent": "Asia", "country":"china", "population": 130, "GDP":20},
  { "continent": "Asia", "country":"Pakistan", "population": 20, "GDP":1},
  { "continent": "Europe", "country":"UK", "population": 2, "GDP":15},
  { "continent": "Europe", "country":"France", "population": 4, "GDP":16},
  { "continent": "Europe", "country":"Germany", "population": 5, "GDP":21}
], obj = {};
for(var i=0; i<data.length; ++i) {
  var continent = data[i].continent,
      arr = obj[continent] = obj[continent] || [];
  arr.push([data[i].country,data[i].population,data[i].GDP]);   
}
var table = document.createElement('table'),
    thead = document.createElement('thead'),
    tbody = document.createElement('tbody'),
    tr = document.createElement('tr');
var keys = ['','Continent','Country','Population','GDP'];
for(var i=0; i<keys.length; ++i){
  var td = document.createElement('td');
  td.appendChild(document.createTextNode(keys[i]));
  tr.appendChild(td);
}
thead.appendChild(tr);
table.appendChild(thead);
for(var i in obj) {
  var dataArr = [];
  tr = document.createElement('tr'),
    td = document.createElement('td');
  td.rowSpan = obj[i].length + 1;
  td.onclick = showHide;
  tr.appendChild(td);
  td = document.createElement('td');
  td.appendChild(document.createTextNode(i));
  td.rowSpan = obj[i].length + 1;
  tr.appendChild(td);
  tbody.appendChild(tr);
  for(var j=0; j<obj[i].length; ++j){
    var subTr =  document.createElement('tr');
    for(var k=0; k<obj[i][j].length; ++k){
      td = document.createElement('td');
      if(k>0) dataArr[k] = (dataArr[k] || 0) + obj[i][j][k];
      td.appendChild(document.createTextNode(obj[i][j][k]));
      subTr.appendChild(td);
    }
    tbody.appendChild(subTr);
  }
  for(var j=0; j<dataArr.length; ++j){
    td = document.createElement('td')
    td.className = 'data-sum';
    if(dataArr[j]) td.appendChild(document.createTextNode(dataArr[j]));
    tr.appendChild(td);
  }
  tr.className = 'visible';
}
table.appendChild(tbody);
document.body.appendChild(table);
```

```
table {
  border-collapse: collapse;
}
thead {
  font-weight: bold;
  font-size: 120%
}
td {
  border: 2px solid black;
}
.hidden, .visible > .data-sum {
  display: none;
}
.collapsed > :first-child, .visible > :first-child {
  cursor: pointer;
}
.collapsed > :first-child:before {
  content: '[+]';
  font-family: monospace;
}
.visible > :first-child:before {
  content: '[-]';
  font-family: monospace;
}
```

# android - WebView：网页不可用，但我从 html 字符串加载它

> ID：12332929
> 
> 赞同：2
> 
> 时间：2012-09-08T17:27:41.423
> 
> 标签：android, android-webview

我的html字符串是这样的：

```
<meta http-equiv=\"Content-Type\" content=\"text/html\"; charset=\"UTF-8\" />
<p style="text-align: justify;"> paragraph </p>
<p style="text-align: justify;"> another one with <strong> strong attr </p>
<p style="text-align: justify;"> in general p have <strong> strong</strong> and <em> em parts</em></p> 
```

我加载：

```
view.loadData(htmlString, "text/html", "UTF-8"); 
```

我有不同的 html 字符串，其中一些没问题，但其他人给我这个错误......问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T18:47:16.597

解决了，给我很多“帮助”这个答案，因为它真的是一个讨厌的 webview 错误，我认为我的回答会对你们很多人有帮助！

如果您的 html 页面确实包含“%”、“\”或“#”字符之一，则 loadData() 方法将失败！因此，您必须手动替换这些 chr，这是我的课程：

```
public class BuglessWebView extends WebView{

public BuglessWebView(Context context) {
    super(context);
}

public BuglessWebView(Context context,AttributeSet attributes){
    super(context,attributes);
}

public BuglessWebView(Context context,AttributeSet attributes,int defStyles){
    super(context,attributes,defStyles);
}

@Override
public void loadData(String data, String mimeType, String encoding) {

    super.loadData(solveBug(data), mimeType, encoding);
}

private String solveBug(String data){
    StringBuilder sb = new StringBuilder(data.length()+100);
    char[] dataChars = data.toCharArray();

    for(int i=0;i<dataChars.length;i++){
        char ch = data.charAt(i);
        switch(ch){
        case '%':
            sb.append("%25");
            break;
        case '\'':
            sb.append("%27");
            break;
        case '#':
            sb.append("%23");
            break;
        default:
            sb.append(ch);
            break;
        }
    }

    return sb.toString();
}
} 
```

这是关于谷歌代码的讨论链接： [http ://code.google.com/p/android/issues/detail?id=1733](http://code.google.com/p/android/issues/detail?id=1733)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-25T19:38:33.527

请改用 loadDataWithBaseURL。

```
 webView.loadDataWithBaseURL(null, html,"text/html", "UTF-8", null); 
```

这是具有此解决方法的讨论： [http ://code.google.com/p/android/issues/detail?id=1733](http://code.google.com/p/android/issues/detail?id=1733)

评论：#14 和#18

在这里工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-03T16:31:21.130

我刚刚遇到了这个问题，并且有很多相关的错误报告与它有关。我有一个 % 是我的内联 CSS，导致页面没有被渲染。当我在文档中看到时，我认为一切都很好[`WebView.loadData(...)`](http://developer.android.com/reference/android/webkit/WebView.html#loadData%28java.lang.String,%20java.lang.String,%20java.lang.String)

> encoding 参数指定数据是 base64 还是 URL 编码。如果数据是base64编码的，编码参数的值必须是'base64'。对于参数的所有其他值（包括 null），假定数据对安全 URL 字符范围内的八位字节使用 ASCII 编码，并对超出该范围的八位字节使用 URL 的标准 %xx 十六进制编码。例如， '＃'， '％'， '\'， '？' 应分别替换为 %23、%25、%27、%3f。

但唉，`base64`按照指示使用没有任何区别。在我的 4.3 设备上一切都很好，但在 2.3 上什么都不会渲染。查看所有错误报告，每个人都提出了不同的建议，但唯一对我有用的是使用

`webView.loadDataWithBaseURL(null, data.content, "text/html", "UTF-8", null);`

小心不要使用`text/html;`，`text/html`因为它会默默地失败！

# android - Android AsyncTask：在 onPostExecute() 中启动新的 Activity

> ID：12332930
> 
> 赞同：4
> 
> 时间：2012-09-08T17:27:44.173
> 
> 标签：android, android-intent

公共类 HttpHelper 扩展 AsyncTask> { ArrayList list = new ArrayList();

```
@Override
protected ArrayList<String> doInBackground(String... urls) {
    // TODO Auto-generated method stub

    String result="";
    for(String url:urls)
    {
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet(url);
        try
        {
            HttpResponse response = client.execute(request);
            InputStream in = response.getEntity().getContent();
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String line = null;
            StringBuffer sb = new StringBuffer();
            while((line = br.readLine())!=null)
            {
                sb.append(line+"\n");

            }
            in.close();
            result = sb.toString();
            String pageSource = new String(result);
            int startindex = pageSource.indexOf("pdf_doc/");
             String str="";
            String []temp;
             while(startindex !=-1)
             {
                 int endindex = pageSource.indexOf(".pdf",startindex);
                 str = pageSource.substring(startindex+8, endindex);
                 String delimiter = "%20";
                 String value="";
                 temp = str.split(delimiter)  ;
                 for(int i=0;i<temp.length;i++)
                 {
                     value= value+temp[i]+" ";

                 }

                 list.add(value);
                 startindex = pageSource.indexOf("pdf_doc/",endindex);
            }
        }

        catch(Exception ex)
        {
            Log.e("Error in HTML Reading",ex.getMessage());

        }

    }

    return list;

}

@Override
protected void onPostExecute(ArrayList<String> result) {
    // TODO Auto-generated method stub

       // Here  i want to start new UI that use the result of AsyncTask
} 
```

}

在这段代码中，我通过 AsyncTask 从服务器读取数据，结果应该在新的 UI 中。这意味着我想从 onPostExecute() 启动新的 Activity。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-10T07:47:05.957

尝试这个，

```
@Override
protected void onPostExecute(Void result)
{
    super.onPostExecute(result);
    Intent intent = new Intent(MyAsyncTaskActivity.this, NextActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    getApplicationContext().startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T21:13:32.953

`getApplicationContext()`不能从 AsyncTasck 调用。相反，您可以在构造函数中声明一个变量 ctx，即`getApplicationContext()`.

```
@Override
protected void onPostExecute(Void result) 
{
    super.onPostExecute(result);
    Intent intent = new Intent(ctx.this, NextActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
    ctx.startActivity(intent);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-12T12:31:57.193

或者您可以通过调用当前名称来获取当前活动的上下文，如下所示`MyAsyncTaskActivity.this`

```
@Override
protected void onPostExecute(Void result)
{
    super.onPostExecute(result);
    Intent intent = new Intent(MyAsyncTaskActivity.this, NextActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    MyAsyncTaskActivity.this.startActivity(intent);
} 
```

# javascript - 用于用户内容的简单代码编辑器/文本格式化程序（在 Rails 中）

> ID：12332932
> 
> 赞同：0
> 
> 时间：2012-09-08T17:27:54.920
> 
> 标签：javascript, ruby-on-rails, wysiwyg

我想为用户提供为其提交的内容设置样式的能力，但是我不确定我是否需要一个完整的所见即所得编辑器。我的要求是：

*   允许在单词或短语的任一侧使用星号加粗
*   允许在单词或短语的任一侧加下划线
*   最多允许两个换行符
*   自动解析链接
*   自动嵌入来自 youtube 链接（和其他视频主机）的视频
*   自动嵌入任何以有效图像格式结尾的网址中的照片
*   （并包含标签以允许手动执行上述操作）。

实时预览也很方便。

关于我的选择和/或解决此问题的最佳方法的任何想法？也许是一个简化或可定制的降价编辑器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:40:19.730

[BlueCloth](https://github.com/mislav/bluecloth)不是一个糟糕的选择——我使用它取得了一些成功。它是一个降价解析器，您可以对文本字段/文本区域字段进行操作，它提供的语法类似于 StackOverflow 上使用的语法，并且与您的要求相似。

您可以指定哪些类型的输入是 HTML 转义的，哪些被视为原始 HTML，以便链接和`<embed>`标签等可以在您的视图中显示为纯文本，或视为 HTML。

# jquery - 如何为表单中的错误通知创建滑动效果？

> ID：12332936
> 
> 赞同：0
> 
> 时间：2012-09-08T17:28:15.607
> 
> 标签：jquery, jquery-ui, yii, jquery-slide-effects

是否可以为 yii 框架表单中的错误通知创建滑动效果？

要解释我的意思，请访问例如 download.com 并选择右上角的“加入 CNET”菜单项。请将“加入 CNET”表格留空，然后按表格底部的“加入 CNET”按钮。

正如您现在所看到的 - 所有红色通知错误都会以非常漂亮的“滑动”效果优雅地显示在屏幕上。

所以我的问题是 - 如何在 yii 框架表单中为错误通知创建这种滑动效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:38:11.760

1.  好的。一个标准的 Yii (CActiveForm) 表单看起来像这样

    ```
    <div class="row">
    <?php echo $form->labelEx($model,'username'); ?>
    <?php echo $form->textField($model,'username'); ?>
    <?php echo $form->error($model,'username'); ?> 
    ```

2.  使用 CSS，您可以通过 display: none 使错误消失。使用 $htmlOptions 可以（相对）轻松地完成此操作：

    **$htmlOptions = array('style' => 'display:none');
    echo $form->error($model,'username',$htmlOptions);**

3.  现在，如果您运行表单，错误消息将不会出现。那很好。

4.  最后，将一些 javascript 附加到您的提交按钮。选择错误消息并将它们淡入的东西：**$(.errorMessage).fadeIn('slow')** 请注意，Yii 已经将错误消息提供给类**.errorMessage**

应该这样做...

附言

# c# - 如何在 Sukram WPF 图表设计器示例中拥有 PropertyGrid？

> ID：12332946
> 
> 赞同：1
> 
> 时间：2012-09-08T17:29:17.557
> 
> 标签：c#, wpf

我正在尝试在 Sukram WPF 图表设计器示例（WPF 图表设计器 - 第 4 部分）中使用 propertyGrid，我是 wpf 的新手。如何在这个项目中添加正确的 PropertyGrid，我可以在设计器画布中显示每个项目的所有属性，也可以从设计器画布中多选项目以显示公共属性，并且我在设计器中为每个项目都有自定义属性。如果大家有经验或有类似的样品，请与我分享。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:56:01.867

您可以在 WPF 应用程序中使用 windows PropertyGrid。您可以创建一个包含您想在 propertygrid 中显示的所有属性的类，例如：

```
[TypeConverter(typeof(AllItemsTypeConverter))]   
public class AllItems
{

    public string Name
    {
        get { // }
        set { // }
    }

    public String description
    {
        get { // }
        set { // }
    }

} 
```

AllItems 类有一个类型转换器，您可以为您想要的每个对象过滤您的项目，如下所示：

```
 class AllItemsTypeConverter: ExpandableObjectConverter
    {

        public override PropertyDescriptorCollection GetProperties(
            ITypeDescriptorContext context, object value, Attribute[] attributes)
        {

            var originalProperties = base.GetProperties(context, value, attributes);
            var propertyDescriptorList = new List<PropertyDescriptor>(originalProperties.Count);

            foreach (PropertyDescriptor propertyDescriptor in originalProperties)
            {
                bool showPropertyDescriptor = true;
                switch (propertyDescriptor.Name)
                {
                    // this properties belong to Input
                    case "InputPlayInstance": showPropertyDescriptor = designerNode.ShowInput; break;
                    case "InputNodeInputSetup": showPropertyDescriptor = designerNode.ShowInput; break;
                    case "InputGrammerList": showPropertyDescriptor = designerNode.ShowInput; break;

.
.
.
.
                }

                if (showPropertyDescriptor) propertyDescriptorList.Add(propertyDescriptor);
            }

            return new PropertyDescriptorCollection(propertyDescriptorList.ToArray());
        }
    } 
```

该类覆盖“ExpandableObjectConverter”类的“GetProperties”方法，您可以指定该属性是否属于特定对象。

# php - Magento 目录价格折扣规则不适用于产品详细信息页面

> ID：12332955
> 
> 赞同：5
> 
> 时间：2012-09-08T17:30:18.180
> 
> 标签：php, javascript, magento

我需要一些帮助，我有一个使用 Magento 实现的项目。在应用目录折扣的网站上，折扣价格显示在产品列表页面中，但在产品视图或产品详细信息页面中，它仅显示正常价格（非折扣）......

您能指导我如何在产品详细信息页面中显示折扣价吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-01T10:05:34.670

如果其他人遇到这种情况，答案是您需要重新应用规则，然后刷新所有缓存。缓存系统的失败再次抬头。

# javascript - 移动网站重定向问题？

> ID：12332956
> 
> 赞同：0
> 
> 时间：2012-09-08T17:30:18.727
> 
> 标签：javascript, html, redirect

我正在尝试使用此代码重定向到移动网站，但是当我通过手机访问我的网站时，它不会重定向。问题是什么？

```
<script type="text/javascript">

if (screen.width <= 800 && document.referrer.indexOf('http://m.codtelevision.com') != 0) {
    window.location = "http://m.codtelevision.com";
}

</script> 
```

另外，我需要代码，所以如果我在我的移动站点上，然后单击完整站点，它不会重定向回移动站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:33:15.793

移动设备通常很少或没有 Java 脚本支持，您需要检查服务器端脚本中的用户代理并将用户从服务器重定向到移动版本，而不是在 javascript 中执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:32:17.660

尝试

```
window.location.href = "http://m.codtelevision.com"; 
```

~~我很确定 document.referrer 解决了您的移动网站问题，尽管我可能在某处使用了会话变量或 cookie 来指示用户选择查看的网站类型。~~

后一个问题的答案取决于您支持的移动浏览器以及您使用的后端技术。使用纯 html/javascript cookie 可能会起作用。

# java - X 在 Integer.parseInt(..,X) 中做了什么？

> ID：12332965
> 
> 赞同：1
> 
> 时间：2012-09-08T17:31:48.220
> 
> 标签：java, parseint

我正在尝试从十进制和十六进制值中获取字符。

我试过这段代码。

```
(char) Integer.parseInt("AE",16) 
```

它显示一个十六进制字符，即 (R)。

然后我尝试了

```
(char) Integer.parseInt("65283",32) 
```

那显示出东亚人的性格，也许是中国人。

谁能解释一下，这些数字（16,32）代表什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T17:32:51.633

[Integer.parseInt("AE",16)](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)

16, 32 代表基数

> 将字符串参数解析为第二个参数指定的基数中的有符号整数

和

> 字符串中的字符必须都是指定基数的数字

# delphi - 从资源文件中读取字符串列表

> ID：12332967
> 
> 赞同：6
> 
> 时间：2012-09-08T17:32:14.070
> 
> 标签：delphi, delphi-xe

我正在使用 Delphi XE Starter。我创建了一个 CCs.RC 文件并将该文件添加到项目中。我的 CCs.RC 文件中的典型行如下所示：

```
Danish1cc Text Danish1.cc 
```

直接在我添加的实施行之后

```
{$R CCs} 
```

当我尝试将此文件读入现有字符串列表时，我收到一条`[EResNotFound][1]`错误消息。这是我用来尝试读取文件的代码：

```
procedure LoadStringListFromResource(const ResName: string;SL : TStringList);
var
  RS: TResourceStream;
begin
  RS := TResourceStream.Create(HInstance, ResName, RT_RCDATA);
  try
    SL.LoadFromStream(RS);
  finally
    RS.Free;
  end;
end;
///
LoadStringListFromResource('Danish1cc',MySL) 
```

我的目标是将文件嵌入到我的 EXE 中，当然能够读取它:) 谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T18:04:17.260

您的资源类型不匹配。在您使用的 *.RC 文件中，`TEXT`而在您的代码中使用`RCDATA`. 您必须将 *.RC 文件更改为

```
Danish1cc RCDATA Danish1.cc 
```

或者你必须改变

```
RS := TResourceStream.Create(HInstance, ResName, RT_RCDATA); 
```

到

```
RS := TResourceStream.Create(HInstance, ResName, 'Text'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:13:48.023

我认为问题在于这条线 -`{$R CCs}`

你编译了一个资源文件，那个文件不是叫CCs.res吗？

如果是这样，您的代码中的那一行应该是 `{$R CCs.res}`

# selenium-webdriver - 为什么 Assert 不抛出异常

> ID：12332969
> 
> 赞同：0
> 
> 时间：2012-09-08T17:32:35.457
> 
> 标签：selenium-webdriver

以下代码提取并打印站点上的所有菜单选项。选项存储在列表中。那工作正常。

但是，如果列表中包含的选项不包含“Foruma”，我希望它抛出一个断言异常。什么都没有发生，我的选项不包含“Foruma”。这是我的代码的主要部分：

```
WebDriver driver = new FirefoxDriver();
driver.get("http://www.sojicity.com");
WebElement mainMenu = driver.findElement(By.id("main-menu"));

List<WebElement> menuOptions = mainMenu.findElements(By.tagName("a"));

System.out.println(menuOptions.size() + " menu options found!");

String optText;

// this portion just lists off all the found menu options
for (int i = 0; i < menuOptions.size(); i++) {
    optText = menuOptions.get(i).getText();
    System.out.println(optText);
}

String toFind = "Forums";

assert menuOptions.contains(toFind); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:15:04.583

我相信你应该使用 assertTrue 。另外，进行 Assert.assertTrue 的静态导入：

```
import static org.junit.Assert.assertTrue; 

assertTrue(menuOptions.contains(toFind)); 
```

# powershell - 如何使用特定 IP 地址向使用 PowerShell 的网站发送请求

> ID：12332971
> 
> 赞同：2
> 
> 时间：2012-09-08T17:32:46.073
> 
> 标签：powershell

我需要执行一个脚本来访问绑定到特定 IP 地址的网站。我在 C# 中找到了使用 BindIpEndPointDelegate 类来做到这一点的东西。

```
var req = (HttpWebRequest)WebRequest.Create("http://google.com/");
req.ServicePoint.BindIPEndPointDelegate = BindTo;
 using (req.GetResponse());

 static IPEndPoint BindTo(ServicePoint servicepoint, IPEndPoint remoteendpoint, int retrycount)
{
IPAddress ip = IPAddress.Any; //This is where you specify the network adapter's address
int port = 0; //This in most cases should stay 0\. This when 0 will bind to any port     available.
return new IPEndPoint(ip, port);
 } 
```

我不知道如何将该类传递给powershell。

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:25:26.547

试一试（未测试），这是 C# 代码的 PowerShell 等效项：

```
function Bind-IPEndPointCallback([System.Net.IPAddress]$ip,$port)
{
        New-Object -TypeName System.Net.IPEndPoint $ip, $port
}

$request = [System.Net.HttpWebRequest]::Create("http://somewhere.com")
$request.ServicePoint.BindIPEndPointDelegate={ (Bind-IPEndPointCallback -ip 10.10.10.10 -port 80 ) }
$request.GetResponse() 
```

# python - 在代码中安装 python 模块

> ID：12332975
> 
> 赞同：416
> 
> 时间：2012-09-08T17:33:02.567
> 
> 标签：python, pip, python-module, pypi

我需要直接在我的脚本中从 PyPi 安装一个包。也许有一些模块或`distutils`（`distribute`等`pip`）功能允许我执行类似的操作`pypi.install('requests')`，并且请求将安装到我的 virtualenv 中。

* * *

## 回答 #1

> 赞同：447
> 
> 时间：2018-05-09T13:47:15.733

官方推荐的从脚本安装包的方法是通过子进程调用 pip 的命令行界面。[pip 不支持此处提供的大多数其他答案](https://pip.pypa.io/en/latest/user_guide/#using-pip-from-your-program)。此外，自 pip v10 以来，所有代码都已`pip._internal`精确移动，以便向用户明确表示不允许以编程方式使用 pip。

用于`sys.executable`确保您将调用`pip`与当前运行时相同的关联。

```
import subprocess
import sys

def install(package):
    subprocess.check_call([sys.executable, "-m", "pip", "install", package]) 
```

* * *

## 回答 #2

> 赞同：415
> 
> 时间：2013-04-11T13:54:43.213

你也可以使用类似的东西：

```
import pip

def install(package):
    if hasattr(pip, 'main'):
        pip.main(['install', package])
    else:
        pip._internal.main(['install', package])

# Example
if __name__ == '__main__':
    install('argh') 
```

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2014-07-16T06:45:37.380

如果您想使用`pip`安装所需的包并在安装后将其导入，您可以使用以下代码：

```
def install_and_import(package):
    import importlib
    try:
        importlib.import_module(package)
    except ImportError:
        import pip
        pip.main(['install', package])
    finally:
        globals()[package] = importlib.import_module(package)

install_and_import('transliterate') 
```

如果您以用户身份安装包，您可能会遇到无法仅导入包的问题。请参阅[如何刷新 sys.path？](https://stackoverflow.com/questions/25384922)了解更多信息。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2012-09-08T17:52:29.950

这应该有效：

```
import subprocess

def install(name):
    subprocess.call(['pip', 'install', name]) 
```

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2019-09-21T12:58:14.307

我在@Aaron 的回答中添加了一些异常处理。

```
import subprocess
import sys

try:
    import pandas as pd
except ImportError:
    subprocess.check_call([sys.executable, "-m", "pip", "install", 'pandas'])
finally:
    import pandas as pd 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2020-07-26T06:09:57.010

为了安装多个软件包，我使用了一个`setup.py`包含以下代码的文件：

```
import sys
import subprocess
import pkg_resources

required  = {'numpy', 'pandas', '<etc>'} 
installed = {pkg.key for pkg in pkg_resources.working_set}
missing   = required - installed

if missing:
    # implement pip as a subprocess:
    subprocess.check_call([sys.executable, '-m', 'pip', 'install', *missing]) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-09-08T17:38:59.383

您可以使用“install_requires”选项在您自己的包的 setup.py 中定义依赖模块。

如果您的包需要生成一些控制台脚本，那么您可以使用“console_scripts”入口点来生成一个包装脚本，该脚本将放置在“bin”文件夹中（例如，您的 virtualenv 环境）。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-08-08T16:45:39.213

如果您想要一个扩展的更有效的答案`subprocess.check_call`。您可以先使用 . 检查是否已满足要求`pkg_resources`。

这适用于不同的[需求说明符](https://packaging.python.org/glossary/#term-Requirement-Specifier)，这很好。例如`>=`，`==`

```
import sys
import subprocess
import pkg_resources
from pkg_resources import DistributionNotFound, VersionConflict

def should_install_requirement(requirement):
    should_install = False
    try:
        pkg_resources.require(requirement)
    except (DistributionNotFound, VersionConflict):
        should_install = True
    return should_install

def install_packages(requirement_list):
    try:
        requirements = [
            requirement
            for requirement in requirement_list
            if should_install_requirement(requirement)
        ]
        if len(requirements) > 0:
            subprocess.check_call([sys.executable, "-m", "pip", "install", *requirements])
        else:
            print("Requirements already satisfied.")

    except Exception as e:
        print(e) 
```

示例用法：

```
requirement_list = ['requests', 'httpx==0.18.2']
install_packages(requirement_list) 
```

[![演示](../Images/a634be9e89eca35dc7703527d93cf699.png)](https://i.stack.imgur.com/KMDMl.gif)

相关信息[Stackoverflow 问题：58612272](https://stackoverflow.com/questions/58612272/pkg-resources-get-distributionmymodule-version-not-updated-after-reload)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-11-30T15:20:37.023

```
import os
os.system('pip install requests') 
```

我在上面尝试了临时解决方案，而不是更改 docker 文件。希望这些可能对某些人有用

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-05-02T19:59:44.827

> 试试下面的。到目前为止对我最有效的方法先安装 4 个，然后在所需列表中提及新的

```
import pkg_resources
import subprocess
import sys
import os

REQUIRED = {
  'spacy', 'scikit-learn', 'numpy', 'pandas', 'torch', 
  'pyfunctional', 'textblob', 'seaborn', 'matplotlib'
}

installed = {pkg.key for pkg in pkg_resources.working_set}
missing = REQUIRED - installed

if missing:
    python = sys.executable
    subprocess.check_call([python, '-m', 'pip', 'install', *missing], stdout=subprocess.DEVNULL) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-21T16:29:26.663

为了**有条件**地安装**多个具有****确切版本**的软件包，我一直在使用这种模式，基于@Tanmay Shrivastava 的回答：

```
import sys
from subprocess import run, PIPE, STDOUT
import pkg_resources

def run_cmd(cmd):
    ps = run(cmd, stdout=PIPE, stderr=STDOUT, shell=True, text=True)
    print(ps.stdout)

# packages to be conditionally installed with exact version
required = {"click==8.0.1", "semver==3.0.0.dev2"}
installed = {f"{pkg.key}=={pkg.version}" for pkg in pkg_resources.working_set}
missing = required - installed

if missing:
    run_cmd(f'pip install --ignore-installed {" ".join([*missing])}') 
```

# word - 将整数输入转换为单词

> ID：12332979
> 
> 赞同：0
> 
> 时间：2012-09-08T17:33:37.203
> 
> 标签：word

我必须编写一个程序，以便给它一个三位数的输入并将其转换为文字格式。例子：

```
input = 907
output = nine hundred seven 
```

我可以很容易地弄清楚如何给出百位输出。我可以将输入除以 100，然后将结果的整个部分存储到一个新变量中。然后如果变量有值，假设`7`创建另一个字符类型的新变量并`seven`使用 if 条件给它一个值。

但我不知道该怎么做。我的意思是当有一个数字时`907`，我是否写了一些东西，以便它给我正确的输出。PS 我刚开始编程，不知道最好的方法。

处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-06T09:38:01.797

我用这个：

```
// Convert numbers to words
// copyright 25th July 2006, by Stephen Chapman http://javascript.about.com
// permission to use this Javascript on your web page is granted
// provided that all of the code (including this copyright notice) is
// used exactly as shown (you can change the numbering system if you wish)
// American Numbering System
var th = ['', 'thousand', 'million', 'billion', 'trillion'];
// uncomment this line for English Number System
// var th = ['','thousand','million', 'milliard','billion'];

var dg = ['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];
var tn = ['ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];
var tw = ['twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];

function convertNumberToString(s) {
    s = s.toString();
    s = s.replace(/[\, ]/g, '');
    if (s != parseFloat(s)) return 'not a number';
    var x = s.indexOf('.');
    if (x == -1) x = s.length;
    if (x > 15) return 'too big';
    var n = s.split('');
    var str = '';
    var sk = 0;
    for (var i = 0; i < x; i++) {
        if ((x - i) % 3 == 2) {
            if (n[i] == '1') {
                str += tn[Number(n[i + 1])] + ' ';
                i++;
                sk = 1;
            } else if (n[i] != 0) {
                str += tw[n[i] - 2] + ' ';
                sk = 1;
            }
        } else if (n[i] != 0) {
            str += dg[n[i]] + ' ';
            if ((x - i) % 3 == 0) str += 'hundred ';
            sk = 1;
        }
        if ((x - i) % 3 == 1) {
            if (sk) str += th[(x - i - 1) / 3] + ' ';
            sk = 0;
        }
    }
    if (x != s.length) {
        var y = s.length;
        str += 'point ';
        for (var i = x + 1; i < y; i++) str += dg[n[i]] + ' ';
    }
    return str.replace(/\s+/g, ' ');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:56:14.163

有很好的库可以为您执行此类任务。但是，您可以使用以下方法获得结果：

```
int intput = 907;
int hundred = input/100;
int ten = input/10%10;
int one = input%10; 
```

要在循环中使用，您可以使用：

```
int one = input%10;
int ten = input/10%10;
int hundred = input/10/10%10;
int thousand = input/10/10/10%10;
..... 
```

# mcrypt - 使用 mcrypt_create_iv() 和 crypt() 加密我的密码

> ID：12332984
> 
> 赞同：0
> 
> 时间：2012-09-08T17:34:09.610
> 
> 标签：mcrypt, crypt

在阅读了半天关于正确编码密码的方法后，我不知所措，我选择了这种方式。但是我不确定这是否是最好的方法。提前致谢。

```
$password= "abc123";
$salt = mcrypt_create_iv(32, MCRYPT_RAND);
$this_will_be_stored_in_db= crypt($password,$salt);
echo $this_will_be_stored_in_db; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:39:17.993

问题是 crypt() 是单向散列，这与编码不同，因此在通过该代码传递值后，您将无法获得原始值。如果散列是您想要对密码执行的操作，我建议您使用 bcrypt。这是一个如何实现它的示例：

```
$password = 'secretPassword';
$salt = '$2a$13$'.substr(sha1($password),0,22); 
$hashed_value = substr(crypt($pass, $salt), 29); 
```

您可以在此站点上阅读有关 bcrypt 的更多信息：http: [//www.nathandavison.com/posts/view/13/php-bcrypt-hash-a-password-with-a-logical-salt](http://www.nathandavison.com/posts/view/13/php-bcrypt-hash-a-password-with-a-logical-salt)

# c# - 如果所有模块都将使用它，那么在哪里放置一个具体的服务器？

> ID：12332991
> 
> 赞同：0
> 
> 时间：2012-09-08T17:34:40.043
> 
> 标签：c#, prism, mef

一直以来，在我的`INFRASTRUCTURE`模块中设置作为服务工作的接口。每个模块创建该服务的具体类。

但这一次，我需要一个必须使用所有模块的服务

在基础设施方面，我有：

```
public interface IApplicationMenuRegistry
{
    void RegisterMenuItem(string menuItemName, string description, Type viewType);
} 
```

每个moduleInit 接收这个接口，并注册一个菜单项。

我应该在哪里创建具体服务`ApplicationMenuRegistry`？在基础设施中？还是在另一个模块中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:42:58.100

最正确的答案是：“视情况而定”。有时您应该在“基础设施”中创建具体服务，有时在其他地方创建。但我建议您查看[DI 框架](http://en.wikipedia.org/wiki/Dependency_injection)，有[很多不同的 .NET 实现](http://www.hanselman.com/blog/ListOfNETDependencyInjectionContainersIOC.aspx)。让 DI 框架关心为`IApplicationMenuRegistry`目标对象提供实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:31:54.333

作为即。说 - 这取决于。理想情况下 - 我认为它应该在单独的模块中，并且您应该使用[模块依赖项](http://msdn.microsoft.com/en-us/library/ff921124%28v=pandp.20%29.aspx)来指定所有模块都依赖于一个“启动”模块。或者，您可以以某种方式首先在引导程序中初始化您的“共享”模块，然后再初始化所有其他模块。“学术方式”是“模块依赖”，但现实生活总是更复杂；）

# ios - 整个应用程序中的 UIWindow 圆角

> ID：12332992
> 
> 赞同：2
> 
> 时间：2012-09-08T17:34:53.720
> 
> 标签：ios, cocoa, window, rounded-corners, mask

我想在我的应用程序边缘（整个应用程序）周围有小圆角，所以我认为最好的地方是在课堂上`UIWindow`创建的 main 层。`AppDelegate`这是我的代码...

```
[self.window.layer setCornerRadius:30.0f];
[self.window.layer setMasksToBounds:YES]; 
```

这确实绕过了我窗口底部的角落，并且稍微在顶部。但是窗口是屏幕的全尺寸（不是屏幕减去状态栏）所以我最终得到这样的东西.. [http://tfld.me/image/441U0j3w3X3N](http://tfld.me/image/441U0j3w3X3N)

我真的不想在我的应用程序的所有导航控制器/视图的每一层上添加cornerRadius/masksToBounds 选项..或者有一个背景图像（因为那不是很未来的证明）。

我也尝试在 Windows rootViewController 上设置这些选项，但没有成功 - [http://tfld.me/image/0c1m2w36402K](http://tfld.me/image/0c1m2w36402K)

任何建议都非常感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:53:28.120

如果您希望导航栏弯曲，您可以使用适当的图像。如果没有，那么下面的代码应该可以根据您的需要工作：

```
 self.window = [[[UIWindow alloc] init] autorelease];
    //shift the window frame by 20 px so that it goes below status bar
    CGRect sampleRect = [[UIScreen mainScreen] bounds];
    sampleRect.origin.y += 20.0;
    sampleRect.size.height -= 20.0;
    self.window.frame = sampleRect;

    UIViewController *vc = [[UIViewController alloc] init];
    vc.view.frame = [[UIScreen mainScreen] bounds];

    UINavigationController *mRootController = [[UINavigationController alloc] initWithRootViewController:vc];
    CGRect navFrame = mRootController.view.frame;
    navFrame.origin.y -= 20.0; //Shift the navigation frame up by 20 px
    mRootController.view.frame = navFrame;

    [self.window addSubview:mRootController.view];
    [self.window.layer setCornerRadius:20.0f];
    [self.window.layer setMasksToBounds:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-18T03:05:06.687

斯威夫特 4：

```
 func application(_ application: UIApplication,
                 didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {

        window.layer.cornerRadius = 20.0
        window.layer.masksToBounds = true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:22:20.620

为此，我使用了一个小 png 文件，其中包含 1/4 的透明圆（其半径将是窗口的新半径）和朝向角落的黑色（设计师向我提供了图像，您可能必须这样做你自己）。我`imageView`使用这个 png 创建了 4 个，相应地旋转它们并将它们作为子视图添加到`navigationController`.

将以下方法放入您的并在: 初始化后`appDelegate`调用它。`application:didFinishLaunchingWithOptions``navigationController`

```
-(void) insertCornerRadiiOnNavigationController : (UINavigationController *) navController{

CGFloat cornerRadius = 7;

UIImageView *corner1 = [[UIImageView alloc] initWithFrame:CGRectMake(0, 20, cornerRadius, cornerRadius)];
UIImageView *corner2 = [[UIImageView alloc] initWithFrame:CGRectMake([_window bounds].size.width - cornerRadius, 20, cornerRadius, cornerRadius)];
UIImageView *corner3 = [[UIImageView alloc] initWithFrame:CGRectMake(0, [_window bounds].size.height - cornerRadius, cornerRadius, cornerRadius)];
UIImageView *corner4 = [[UIImageView alloc] initWithFrame:CGRectMake([_window bounds].size.width - cornerRadius, [_window bounds].size.height - cornerRadius, cornerRadius, cornerRadius)];

corner2.transform = CGAffineTransformMakeRotation (M_PI_2);
corner3.transform = CGAffineTransformMakeRotation (3 * M_PI_2);
corner4.transform = CGAffineTransformMakeRotation (M_PI);

[corner1 setImage:[UIImage imageNamed:@"corner.png"]];
[corner2 setImage:[UIImage imageNamed:@"corner.png"]];
[corner3 setImage:[UIImage imageNamed:@"corner.png"]];
[corner4 setImage:[UIImage imageNamed:@"corner.png"]];

[navController.navigationBar addSubview:corner1];
[navController.navigationBar addSubview:corner2];
[navController.view addSubview:corner3];
[navController.view addSubview:corner4];

[corner1 release];
[corner2 release];
[corner3 release];
[corner4 release];
} 
```

由于某种原因，我无法`UIWindow`直接将它们添加到，`imageViews`没有出现。

# c# - SelectMany() 在下面是如何工作的，它使用什么算法？

> ID：12332994
> 
> 赞同：0
> 
> 时间：2012-09-08T17:35:10.210
> 
> 标签：c#, .net, linq, entity-framework, collections

所以我有这个不那么特别的方法

```
public void FlagVoyageAsRemoved(int voyageId)
    {
        using (UnitOfWork uw = new UnitOfWork())
        {
            Voyage voyage = uw.VoyageRepository.FindSingle(v => v.VoyageId == voyageId,  
new string[] { "VoyageUsers.Costs" });
            List<Cost> userCosts = voyage.VoyageUsers.SelectMany(vu => vu.Costs).ToList();
//altough i am putting my items in a new list meaning its a new memory adress, the object tracker can still see them as part of the original collection, how come?
            costBl.FlagCostsAsDeleted(userCosts);
// these methods just change a proprety in each element of the collection, nothing more.
            costBl.FlagCostsAsDeleted(voyage.Costs);
            vUserBl.FlagVoyageUsersAsDeleted(voyage.VoyageUsers);
            voyage.HasDeleteFlag = true;
            uw.Commit();
        }
    } 
```

我的问题是，在使用 linq 时，新的列表元素如何仍然可以被识别为原始集合的一部分，或者这只是来自实体框架对象跟踪器的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:13:23.077

实体框架会跟踪它检索到的所有对象和集合，因此当您调用时`context.SaveChanges()`（我认为这就是您的`uow.Commit()`方法中发生的情况），它已经知道要检查什么。

希望能帮助到你。