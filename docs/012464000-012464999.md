# StackOverflow 问答 12464000-12464999

# jquery - 如何使用 Codeigniter 和 Jquery 验证多维数组

> ID：12464001
> 
> 赞同：7
> 
> 时间：2012-09-17T17:04:21.850
> 
> 标签：jquery, arrays, codeigniter, validation, multidimensional-array

嗨，我需要验证这样的多维表单

```
<input type="text" class="input-xlarge span5 req" id="contact_first_name" name="hotel[<?=$id?>][contact_first_name]" value="<?= set_value('hotel[contact_first_name]') ?>">
<input type="text" class="input-xlarge span5 req" id="contact_last_name" name="hotel[<?=$id?>][contact_last_name]" value="<?= set_value('hotel[contact_last_name]') ?>"> 
```

我不知道最终数组的维度，因为输入是通过 jquery 动态添加的。

我在服务器端使用 Codeigniter Form_Validation，在客户端使用 JQuery Validator。

这是我的 form_validation 规则

```
$config['add_hotel'] = array(
array(
    'field' => 'hotel[][hotel_name]', 
    'label' => 'Hotel Name', 
    'rules' => 'required'
    ),    
array(
    'field' => 'hotel[][contact_first_name]', 
    'label' => 'First Name', 
    'rules' => 'trim|required'
    ),
array(
    'field' => 'hotel[][contact_last_name]', 
    'label' => 'Last Name', 
    'rules' => 'trim|required'
    ), 
```

这就是我通过 jquery 验证器执行此操作的方式

```
$("#add_hotel").validate({
rules: {
    "hotel[][hotel_name]": "required"

  /*  errorElement: "div",
    wrapper: "div"*/
},
messages: {
   "hotel[][hotel_name]": "Please enter the Association Name"
},
submitHandler: function(form) {
    form.submit();
} 
```

不知道如何`Hotel[]`使用自己的 id 验证每个输入，或者可能有另一种方法可以更简单地定义输入。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T21:03:41.907

发布数组

```
$hotel = $this->input->post('hotel');
if(!empty($hotel))
{
    // Loop through hotels and add the validation
    foreach($hotel as $id => $data)
    {
        $this->form_validation->set_rules('hotel[' . $id . '][contact_first_name]', 'First name', 'required|trim');
        $this->form_validation->set_rules('hotel[' . $id . '][contact_last_name]', 'Last name', 'required|trim');
    }
} 
```

始终适用的默认规则

```
$this->form_validation->set_rules('username', 'Username', 'required');

if ($this->form_validation->run() == FALSE)
{
    // Errors
}
else
{
    // Success
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:11:19.343

Codeigniter 有一种非常严格的方法来处理命名为数组的输入的验证规则，它只会验证字段名称是否完全相同，所以规则

```
array(
    'field' => 'hotel[][hotel_name]', 
    'label' => 'Hotel Name', 
    'rules' => 'required'
    ), 
```

仅当该字段实际命名为 hotel[][hotel_name] 时才有效。
由于这不是字段的名称（实际名称类似于 hotel[1][hotel_name]），因此 Codeigniter 不会对其进行验证。

您可以动态生成配置数组，但我认为您最好分别为这些字段编写自己的验证规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-12T11:24:45.117

```
 is not working i am trying to like this
     in api data 
     {
      "fullname":"4545",
    "family_detail": [
       {
        "relation_id":""
      },
      {
        "relation_id":"11"
       }]
    }

   in controller 
   $_POST = json_decode(file_get_contents('php://input'),true);

   if ($this->form_validation->run('signup') == FALSE)
    {
     //error
    }else{
      // success
    } 
     in my config file
     $config = array(
   'signup' => array(   
    array(
     'field' => 'fullname',
     'label' => 'Full Name',
    'rules' => 'required'
      ),
     array(
    'field' => 'family_detail[][relation_id]',
    'label' => 'relation_id',
    'rules' => 'required'
     ),
     ) 
```

# perl - 在 Perl 中对嵌套散列进行切片

> ID：12464006
> 
> 赞同：6
> 
> 时间：2012-09-17T17:04:38.027
> 
> 标签：perl, hash, slice

假设我有一个可以索引为的哈希：

```
$hash{$document}{$word} 
```

[根据我在网上阅读的内容（尽管我在perlreftut](http://perldoc.perl.org/perlreftut.html)、[perldsc](http://perldoc.perl.org/perldsc.html#Access-and-Printing-of-a-HASH-OF-ARRAYS)或[perllol](http://perldoc.perl.org/perllol.html#Slices)上找不到此内容），如果我使用`@`哈希上的前缀表示我希望哈希返回一个列表，我可以使用列表对哈希进行切片。但是，如果我尝试使用 list 对哈希进行切片`@list`：

```
@%hash{$document}{@list} 
```

我收到几个`"Scalar values ... better written"` 错误。

如何在 Perl 中删除嵌套哈希？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T17:09:45.213

您的散列符号必须是`@`，如下所示：

```
@{$hash{$document}}{@list} 
```

假设`@list`包含有效的键，`%hash`它将返回相应的值，或者`undef`如果键不存在。

这是基于散列片的一般规则：

```
%foo = ( a => 1, b => 2, c => 3 );
print @foo{'a','b'};               # prints 12
%bar = ( foo => \%foo );           # foo is now a reference in %bar
print @{ $bar{foo} }{'a','b'};     # prints 12, same data as before 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T17:12:53.040

首先，当您希望从哈希切片中获取列表时，请先使用`@`sigil。`%`在这里毫无意义。

其次，您应该了解`$hash{$document}`value 不是散列或数组。这是一个引用 - 对哈希或数组的引用。

说了这么多，你可能会使用这样的东西：

```
@{ $hash{$document} }{ @list }; 
```

...因此您取消引用 的值`$hash{$document}`，然后在其上使用散列片。例如：

```
my %hash = (
    'one' => {
        'first'  => 1,
        'second' => 2,
     },
     'two' => {
        'third'  => 3,
        'fourth' => 4,
     } 
);

my $key  = 'one';
my @list = ('first', 'second');

print $_, "\n" for @{ $hash{$key} }{@list};
# ...gives 1\n2\n 
```

# ada - Ada: gnat gprbuild 如何在库中链接？

> ID：12464007
> 
> 赞同：3
> 
> 时间：2012-09-17T17:04:37.620
> 
> 标签：ada, gnat

在我正在处理的这个多语言 GPRBuild 项目中，我有一些 c++ 库文件 (*.a) 我需要链接到我的可执行文件中。是否有一个 gpr 属性告诉它要链接什么或无论如何将 -l -L 开关传递给链接器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-11T15:32:19.827

甚至更好：

```
Project my_library is
  For externally_built use "true";
  For library_dir use "/where/ever";
  For library_name use "mylibname";
  For source_dirs use (); -- no sources.
  For library_kind use "static";
  -- if it is a static lib .a

  -- for library_kind use "dynamic";
  -- if it is an so.
End my_library; 
```

并在应用项目中。使用“my_library.gpr”；

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-17T23:00:22.317

在主项目文件中，

```
package Linker is
   for Default_Switches ("Ada") use ("-L/where/ever", "-lbar");
end Linker; 
```

# sql-server - 优化表“tblA”内连接与“tblA”的查询和使用

> ID：12464008
> 
> 赞同：2
> 
> 时间：2012-09-17T17:04:57.457
> 
> 标签：sql-server

我见过一个 sql 查询，就像，

```
SELECT B.SubscriptionID
FROM 
 tblA A1
inner JOIN  tblA A2 ON A1.AcctServiceID = A2.AcctServiceID  
INNER JOIN  tblB B ON A2.ServiceID = B.ServiceID
INNER JOIN  tblC C ON B.SubscriptionID = C.SubscriptionID 
WHERE
    A1.ServiceID = 1302
AND (C.Type LIKE '%O%' OR C.Type LIKE '%A%') 
```

谁能解释一下有什么用

```
 tblA A1
    inner JOIN  tblA A2 ON A1.AcctServiceID = A2.AcctServiceID 
```

我们可以优化上面的查询吗？请建议我如何优化上述查询。

请帮助我...谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:12:41.610

有很多充分的理由可以让您将一个表重新加入到自身中......但我在这里看不到它。通常您至少需要两个连接条件，一个查找某种类型的不等式的连接条件，或者一个可以匹配表中零个或多个记录的连接条件（以增加或限制结果的数量）。

我在这里看不到这样的东西。在这种情况下，您似乎可以删除连接，并更新对 A2 的所有引用以改用 A1。这是完整的查询吗？

我在这里能想到的最接近的事情是，他们这样做是为了过滤掉 AcctServiceID 字段中具有 NULL 的记录（因为 NULL 不等于自身），但如果它甚至有效，这将是一种奇怪的尝试方式.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:10:02.033

```
 inner JOIN  tblA A2 ON A1.AcctServiceID = A2.AcctServiceID 
```

此行表示您将 tblA 作为 A1 与 tblA 作为 A2 连接，并且当来自 tblA as A1 的 AcctServiceID 与来自 tblA 作为 A2 的 AcctServiceID 相同时显示行。优化此查询的方法是删除此行，因为不要这样做任何事物。AcctServiceID 与 AcctSerivceID 相同，因为是相同的字段。

# asp.net-mvc - 如何显示自定义 errorPage 并仍然返回 404

> ID：12464009
> 
> 赞同：1
> 
> 时间：2012-09-17T17:05:01.973
> 
> 标签：asp.net-mvc, asp.net-mvc-4, http-error

有一个路由表，其中包括

```
 routes.MapRoute("404-PageNotFound", "{*url}", new { controller = "Error", action = "PageNotFound" }); 
```

web.config 有：

```
<customErrors mode="RemoteOnly">        
   <error statusCode="404" redirect="/Error/PageNotFound" />
</customErrors> 
```

当没有路由匹配和错误视图使用以下方式呈现时，ErrorController 会被命中：

```
public ActionResult PageNotFound(ViewModelBase model)
 {
     return View(model);
} 
```

响应的状态码是 200，但在这种情况下需要 404。有没有办法返回 http 代码 404 和客户错误页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T17:09:23.970

```
public ActionResult PageNotFound(ViewModelBase model)
{
    Response.StatusCode = 404;
    return View(model);
} 
```

# java - ArrayList 数据结构如何同时被索引和动态？它是如何实施的？

> ID：12464011
> 
> 赞同：4
> 
> 时间：2012-09-17T17:05:19.767
> 
> 标签：java, list, heap-memory

我相信 LinkedLists 和 ArrayLists 之间是有区别的。ArrayLists 只不过是动态数组。所以我假设 ArrayLists 存储在连续位置的堆中（这就是它们具有 O(1) get 方法的原因）。问题是，如果堆中存储的另一个对象会阻止 ArrayList 增长怎么办？在这种情况下如何实施？如果 ArrayList 的剩余部分存储在堆的其他非 conrigous 区域中，则 get 方法不会是 O(1)。

例如，假设在内存位置 10 中有一个对象。之后，在内存位置 5 处创建一个 ArrayList。为简单起见，假设数组列表中的每个元素只有一个字节。这意味着 ArrayList 只能增长到 5 个元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T17:10:25.597

`ArrayList`可以通过丢弃其旧数组、分配一个全新的数组并将值从旧数组复制到新数组来增长到受可用内存限制的任何大小。`O(n)`对于任何给定的插入，此操作都可以进行，[摊销成本为`O(1)`](https://stackoverflow.com/q/2182597/335858)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T17:08:43.173

> 所以我假设 ArrayLists 存储在连续位置的堆中

通常是这种情况，但没有什么能阻止 JVM 做一些不同的事情（JVM 规范中没有规定数组必须存储在连续的块中）。

另请参阅[此相关帖子](https://stackoverflow.com/questions/10224888/java-are-1-d-arrays-always-contiguous-in-memory)。

> 如果堆中存储的另一个对象会阻止 ArrayList 增长怎么办？

arraylist 对象将要求 JVM 给它更多空间，JVM 将根据需要分配这些空间（如果不能，则抛出 OutOfMemoryException）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T17:14:17.090

查看源代码（感谢@GilbertoGaxiola），初始 ArrayList 创建了一个大小为 10 的 object[]。由于它需要更多空间，它将大小加倍并将旧数组的内容复制到新数组中。在这个数组变大之前不需要很多次填充，这使得它成为一个很好的实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T17:24:03.413

> 所以我假设 ArrayLists 存储在连续位置的堆中（这就是它们具有 O(1) get 方法的原因）。

所有其他答案都是正确的，但我想解决您在这里所做的错误假设：

`ArrayList.get()`是 O(1) 不是因为数组如何存储在内存中，而是因为元素访问的成本是恒定的，并且与 ArrayList 中的元素数量*不成比例。*

这里的 O(1) 并不意味着可以在单个操作中完成查找 - 这意味着复杂度相对于后备数组的大小是恒定的。

当您调用`ArrayList.get(i)`JVM 时，仍然需要将数组索引转换为虚拟内存地址，这涉及到您的操作系统将地址转换为真实地址 - 但它是 O(1)，因为如果数组有 1 个元素或 5000 个元素，复杂性是相同的.

相比之下，`LinkedList.get(i)`不是 O(1)，因为 LinkedList 类需要遍历每个节点，直到找到节点`i`- 复杂度与列表的整体大小和 的大小成正比`i`。

数组存储在连续位置的假设也是不正确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-08T07:07:35.390

最后的解释是绝对正确的。操作系统必须最终将索引转换为真实地址。因此，所有索引的翻译时间都是恒定的。关于存储，最后一个解释是正确的，如果您必须存储更多元素，则大小只会翻倍。

# android - 在 android 中为 cCURL 添加 ssl 证书有错误

> ID：12464014
> 
> 赞同：3
> 
> 时间：2012-09-17T17:05:49.337
> 
> 标签：android, c++, curl, android-ndk, openssl

[在此链接Using cURL in Android](https://stackoverflow.com/questions/4952169/using-curl-in-android)的帮助下，我已经为 android 交叉构建了 curl 和 openssl .. 我能够成功构建。现在我正在尝试运行我的应用程序，在我的应用程序中我需要添加自己的证书，当我尝试**通过我的本机代码添加存储在 sdcard 中**的证书时，我从 curl 中收到以下错误响应，即 CURLE_SSL_CERTPROBLEM (58)=>本地客户端证书有问题。如果删除以下应用程序中的所有证书，并且如果我使用没有证书的简单 https curl 客户端，则会出现以下错误 CURLE_SSL_CACERT_BADFILE (77) 。

我在这里放了我的代码，我只是想从 sdcard 中读取证书（我已经复制并粘贴在 sdcard 中）。

我是否正确加载证书？

//将接收来自Java的网页的接口功能

```
 {
  pageInfo_t page;
  CURL *curl;
  CURLcode res;
   char *buffer;

 static const char *pCertFile = "/mnt//sdcard/sslcerts/33330001-root.x509";
 static const char *pCACertFile="/mnt//sdcard/sslcerts/root.x509.crt";
 pKeyName  = "/mnt/sdcard/sslcerts/33330001-root-privkey.der"; 

 const char *pKeyName;
 const char *pKeyType;

const char *pEngine;
const jbyte *webpage;

pKeyType  = "DER";
pEngine   = NULL;

webpage = (*env)->GetStringUTFChars(env, webpageJStr, NULL);
if (webpage == NULL) {
  return NULL; /* OutOfMemoryError already thrown */
}

page.data = (char *)malloc(16 * 1024);
page.len = 0;
if (page.data)
 memset(page.data, 32, 16 * 1024);

buffer = (char *)malloc(1024);

 curl = curl_easy_init();
 if(curl) {
 curl_easy_setopt(curl, CURLOPT_URL, webpage);
 curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, HTTPData);
 curl_easy_setopt(curl, CURLOPT_WRITEDATA, &page);
 curl_easy_setopt(curl, CURLOPT_VERBOSE, 1);

  curl_easy_setopt(curl,CURLOPT_SSLCERTTYPE,"DER");

  curl_easy_setopt(curl,CURLOPT_SSLCERT,pCertFile);

  curl_easy_setopt(curl,CURLOPT_SSLKEYTYPE,pKeyType);

  curl_easy_setopt(curl,CURLOPT_SSLKEY,pKeyName);

  curl_easy_setopt(curl,CURLOPT_CAINFO,pCACertFile);

 curl_easy_setopt(curl,CURLOPT_SSL_VERIFYPEER,1L);
 res = curl_easy_perform(curl);
    /* always cleanup */
curl_easy_cleanup(curl);
(*env)->ReleaseStringUTFChars(env, webpageJStr, webpage);
if(res == 0) {
  if (buffer) {
    page.data[page.len < 256 ? page.len : 256] = '\0';
sprintf(buffer, "pagedata(%d): %s. done.\n", page.len, page.data);
    return (*env)->NewStringUTF(env, buffer);
  }
}
sprintf(buffer, "Result %d", res);
return (*env)->NewStringUTF(env, buffer);
} else {
  return (*env)->NewStringUTF(env, "Unable to init cURL");
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:27:08.013

您需要添加此行

```
#define CURL_CA_BUNDLE "/etc/ssl/certs/ca-certificates.crt" 
```

在`curl_config.h`构建 libCurl 时。

# wolfram-mathematica - 方程组的动态生成

> ID：12464019
> 
> 赞同：1
> 
> 时间：2012-09-17T17:06:18.680
> 
> 标签：wolfram-mathematica, ode

我是 Mathematica 的新手，正在尝试弄清楚如何动态生成 ODE 系统。例如，我有一个由 100 个方程组成的系统，其中每 10 个方程基本相同，但可以从向量（长度为 10）中读取的参数略有不同。我想写出 10 个方程，然后遍历一些迭代器以生成所有 100 个方程。有没有标准的方法来做到这一点？

例如，这是一个由 30 个方程组成的系统（对于 i 在 1:10）：

```
 dX_i/dt = -\beta*X_i*Y_i + \delta_{i-1}*X_{i-1} - \delta_i*X_{i}
 dY_i/dt = \beta*X_i*Y_i - \gamma_i*Y_i + \delta_{i-1}*Y_{i-1} - \delta_i*Y_{i} 
 dZ_i/dt = \gamma_i*Y_i + \delta_{i-1}*Z_{i-1} - \delta_i*Z_{i} 
```

如果我将 i 增加到 100（即给我们三百个 ODE），复制粘贴新方程似乎是多余的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:03:08.117

在这里，但可能 Mathematica 无法解决它（取决于你的系数）

```
Table[(delta[i] = i; gamma[i] = -i), {i, 0, 10}];
b = 1;
DSolve[Flatten@Table[{
    x[i]'[t] == -b x[i][t] y[i][t] + delta[i - 1] x[i - 1][t] - delta[i] x[i][t],
    y[i]'[t] == -b x[i][t] y[i][t] - gamma[i] y[i][t] + delta[i - 1] y[i - 1][t] - delta[i] y[i][t],
    z[i]'[t] ==  gamma[i] y[i][t] + delta[i - 1] z[i - 1][t] - delta[i] z[i][t]}, {i, 1, 10}], 
 Flatten[Table[{x[i][t], y[i][t], z[i][t]}, {i, 1, 10}]], t] 
```

# ruby - 如何修复因编码错误而失败的 Ruby 脚本：US-ASCII 上的“\xD8”？

> ID：12464023
> 
> 赞同：4
> 
> 时间：2012-09-17T17:06:51.630
> 
> 标签：ruby, jenkins, character-encoding, cucumber, hudson

运行项目时出现以下错误：

```
cucumber --format junit --guess --out ./ 
```

这是错误：

```
Checkout:workspace / /var/lib/hudson/jobs/PersOC-CucumberTests/workspace -      hudson.remoting.LocalChannel@3b815cce
Using strategy: Default
Last Built Revision: Revision 3dc11ccba9c86308b422d6261ecde95d0a4ae999 (origin/master)
Checkout:workspace / /var/lib/hudson/jobs/CucumberTests/workspace -   hudson.remoting.LocalChannel@3b815cce
Fetching changes from the remote Git repository
Fetching upstream changes from /srv/git/cucumber.git
Commencing build of Revision 14627f9a6682b82a9b4d64172278a646da358c24 (origin/master)
Checking out Revision 14627f9a6682b82a9b4d64172278a646da358c24 (origin/master)
[workspace] $ /bin/sh -xe /tmp/hudson6604637626131848657.sh
+ cucumber --format junit --guess --out ./
/usr/lib64/ruby/gems/1.9.1/gems/json-1.7.5/lib/json/common.rb:155:in `encode': "\xD8"  on US-ASCII (Encoding::InvalidByteSequenceError)
from /usr/lib64/ruby/gems/1.9.1/gems/json-1.7.5/lib/json/common.rb:155:in `initialize'
from /usr/lib64/ruby/gems/1.9.1/gems/json-1.7.5/lib/json/common.rb:155:in `new'
from /usr/lib64/ruby/gems/1.9.1/gems/json-1.7.5/lib/json/common.rb:155:in `parse'
from /usr/lib64/ruby/gems/1.9.1/gems/gherkin-2.11.2/lib/gherkin/i18n.rb:14:in `<class:I18n>'
from /usr/lib64/ruby/gems/1.9.1/gems/gherkin-2.11.2/lib/gherkin/i18n.rb:6:in `<module:Gherkin>'
from /usr/lib64/ruby/gems/1.9.1/gems/gherkin-2.11.2/lib/gherkin/i18n.rb:5:in `<top (required)>'
from /usr/lib64/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'

[DEBUG] Skipping watched dependency update for build: CucumberTests #168 due to result: FAILURE 
Finished: FAILURE 
```

该项目中的每个文件都标有：

```
#!/bin/env ruby
# encoding: utf-8
# -*- coding: utf-8 -*- 
```

我可以尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:22:35.723

您的环境 LC 编码存在问题。

## Linux

```
export LANG=en_US.UTF-8 
```

## OS X (pre Mnt. Lion)

```
export LC_CTYPE=en_US.UTF-8 
```

## OS X（Mnt. Lion 及更高版本）

```
export LC_ALL=en_US.UTF-8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-20T20:07:32.727

通过添加以下代码，也可以在 Ruby 代码本身中修复该问题：

```
Encoding.default_external = Encoding::UTF_8
Encoding.default_internal = Encoding::UTF_8 
```

# assembly - 在汇编语言中更改 CS:IP

> ID：12464026
> 
> 赞同：2
> 
> 时间：2012-09-17T17:06:59.843
> 
> 标签：assembly, x86, memory-segmentation

你怎么能强行改变汇编语言`CS`？`IP`

`ORG`指令可以用来改变数字的`IP`，但是你怎么改变`CS`呢？

基本上我想用汇编来实现多线程。

许多论坛，包括堆栈溢出中的一个问题都说这是不可能的，但是即使 C 是由汇编代码制成的，它又如何具有多线程选项呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T19:11:03.163

要进行更改，只需根据您的需要使用（例如）或长时间（例如）`cs:ip`进行跳远。[link](http://web.itu.edu.tr/kesgin/mul06/intel/instr/jmp.html)和[link](http://web.itu.edu.tr/kesgin/mul06/intel/instr/call.html)有几种不同的寻址模式。实现多线程与简单地改变是完全不同的事情。`jmp``jmp segment:offset``call``call segment:offset``jmp` `call` `cs:ip`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T19:11:09.400

我想你可以只用

```
jmp segment:offset

call segment:offset 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T21:57:09.523

只有远控制传输指令（jmp、call、ret）可以更改 CS 或 EIP 寄存器。我认为 CS 寄存器只能在实模式下更改。

RET 基本上采用 ESP（堆栈指针）的值并将其推送到 IP/EIP。然后 ESP 增加 8 加上立即偏移量（如果存在）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-15T03:49:18.863

要同时更改`cs`和`ip`寄存器，请在 AT&T 语法中使用以下内容：

```
ljmp $segment, $offset 
```

或 Intel 语法中的以下内容：

```
jmp segment:offset 
```

# php - 将字符串拆分为 2 个变量...不工作

> ID：12464035
> 
> 赞同：-3
> 
> 时间：2012-09-17T17:07:46.450
> 
> 标签：php, explode

我正在尝试从数据库中获取事件名称（例如：Manny Pacquiao vs. Juan Manuel Marquez），将事件名称拆分为 2 个名称（Manny Pacquiao、Juan Manuel Marquez）并在页面上使用它们。

这是我的代码不起作用。

```
 if(count($perfarray) == 2 && $page['catnum'] == "1142")
    {

        $input = $event['Event'];
        $params = explode('vs.', $input);
        foreach($params as $param) 
            {
                $kv = explode('vs.', $param);
                $fighterNo1 = $kv[0];
                $fighterNo2 = $kv[1];
            }

        $fulltext = str_replace("\$Fighter1", $fighterNo1, $fulltext);
        $fulltext = str_replace("\$Fighter2", $fighterNo2, $fulltext);

        // $fulltext = str_replace("\$Fighter1", addslashes($perfarray[0]), $fulltext);
        //$fulltext = str_replace("\$Fighter2", addslashes($perfarray[1]), $fulltext);
    }
    elseif(strstr($event['Event']," vs."))
    {
        $input = $event['Event'];
        $params = explode('vs.', $input);
        foreach($params as $param) 
            {
                $kv = explode('vs.', $param);
                $fighterNo1 = $kv[0];
                $fighterNo2 = $kv[1];
            }

        $fulltext = str_replace("\$Fighter1", $fighterNo1, $fulltext);
        $fulltext = str_replace("\$Fighter2", $fighterNo2, $fulltext);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:11:24.247

```
 $input = $event['Event'];
    $params = explode('vs.', $input);
    foreach($params as $param) 
        {
            $kv = explode('vs.', $param);
            $fighterNo1 = $kv[0];
            $fighterNo2 = $kv[1];
        } 
```

在上面的第二行中，您已经正确`explode`了`$params`吗？在第 5 行，你又`explode`ing 了？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:12:08.123

你叫了explode太多次了。

```
$params = explode('vs.', $input);
foreach($params as $param) {
   $kv = explode('vs.', $param); 
```

您正在获取第一个参数，然后`explode`再次尝试。这应该有效，我认为：

```
$input = $event['Event'];
$params = explode('vs.', $input);
$fighterNo1 = $params[0];
$fighterNo2 = $params[1];

$fulltext = str_replace("\$Fighter1", $fighterNo1, $fulltext);
$fulltext = str_replace("\$Fighter2", $fighterNo2, $fulltext); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T17:12:54.813

我不确定您的数据到底是什么样子，但这是您可以做的

```
$text = "Manny Pacquiao vs. Juan Manuel Marquez";

list($fighter1,$fighter2) =explode(" vs. ",$text);

$fulltext = str_replace("\$Fighter1", $fighter1, $fulltext);
$fulltext = str_replace("\$Fighter2", $fighter2, $fulltext); 
```

# sql - 两个 SQL LEFT JOINS 产生不正确的结果

> ID：12464037
> 
> 赞同：35
> 
> 时间：2012-09-17T17:07:51.207
> 
> 标签：sql, postgresql, left-join, aggregate-functions

我有 3 张桌子：

```
users(id, account_balance)
grocery(user_id, date, amount_paid)
fishmarket(user_id, date, amount_paid) 
```

`fishmarket`和表都`grocery`可能多次出现相同的 user_id 具有不同的日期和支付的金额，或者对于任何给定的用户根本没有任何内容。当我尝试以下查询时：

```
SELECT
     t1."id" AS "User ID",
     t1.account_balance AS "Account Balance",
     count(t2.user_id) AS "# of grocery visits",
     count(t3.user_id) AS "# of fishmarket visits"
FROM users t1
LEFT OUTER JOIN grocery t2 ON (t2.user_id=t1."id") 
LEFT OUTER JOIN fishmarket t3 ON (t3.user_id=t1."id") 
GROUP BY t1.account_balance,t1.id
ORDER BY t1.id 
```

它会产生不正确的结果：`"1", "12", "12"`.
但是，当我尝试只使用一个表时，它会为任一或访问`LEFT JOIN`产生正确的结果，即.`grocery``fishmarket``"1", "3", "4"`

我在这里做错了什么？
我正在使用 PostgreSQL 9.1。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-09-17T17:15:43.273

连接从左到右处理（除非括号另有说明）。如果您`LEFT JOIN`（或只是`JOIN`，类似的效果）向一位用户提供三个杂货，您将获得 3 行（**1 x 3**）。如果您随后为同一用户加入 4 个鱼市，您将得到 12 ( **3 x 4** ) 行，将结果中的前一个计数*相乘*，而不是像您希望的那样*添加到它。*
从而增加了杂货店和鱼市等的访问量。

你可以让它像这样工作：

```
SELECT u.id
     , u.account_balance
     , g.grocery_visits
     , f.fishmarket_visits
FROM   users u
LEFT   JOIN (
   SELECT user_id, count(*) AS grocery_visits
   FROM   grocery
   GROUP  BY user_id
   ) g ON g.user_id = u.id
LEFT   JOIN (
   SELECT user_id, count(*) AS fishmarket_visits
   FROM   fishmarket
   GROUP  BY user_id
   ) f ON f.user_id = u.id
ORDER  BY u.id; 
```

要为一个或几个用户获取聚合值，[像 @Vince 提供的](https://stackoverflow.com/a/12464247/939860)*相关子查询* 就可以了。对于整个表或其中的主要部分，聚合 n 表并加入*一次*结果会更有效。这样，我们在外部查询中也不需要另一个。*`GROUP BY`*

 *`grocery_visits`并且`fishmarket_visits`适用**`NULL`**于在相应表中没有任何相关条目的用户。如果您需要**`0`**（或任何任意数字），[**`COALESCE`**](https://www.postgresql.org/docs/current/functions-conditional.html#FUNCTIONS-COALESCE-NVL-IFNULL)请在外部使用`SELECT`：

```
SELECT u.id
     , u.account_balance
     , COALESCE(g.grocery_visits   , 0) AS grocery_visits
     , COALESCE(f.fishmarket_visits, 0) AS fishmarket_visits
FROM   ... 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-17T17:24:06.660

对于您的原始查询，如果您删除分组依据以查看预先分组的结果，您将看到为什么创建了您收到的计数。

也许以下使用子查询的查询会达到您的预期结果：

```
SELECT
 t1."id" AS "User ID",
 t1.account_balance AS "Account Balance",
 (SELECT count(*) FROM grocery     t2 ON (t2.user_id=t1."id")) AS "# of grocery visits",
 (SELECT count(*) FROM fishmarket  t3 ON (t3.user_id=t1."id")) AS "# of fishmarket visits"
FROM users t1
ORDER BY t1.id 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T17:18:21.857

这是因为当用户表连接到杂货店表时，有 3 条记录匹配。然后这三个记录中的每一个都与 fishmarket 中的 4 个记录匹配，产生 12 个记录。您需要子查询来获取您要查找的内容。*

# spring - Spring OAuth (OAuth2)：如何在 Spring MVC 控制器中获取客户端凭据？

> ID：12464042
> 
> 赞同：21
> 
> 时间：2012-09-17T17:08:24.030
> 
> 标签：spring, spring-mvc, spring-security, oauth-2.0, oauth-provider

在这个片段中：

```
@RequestMapping(method = GET)
public List<Place> read(Principal principal) {
  principal.getName(); 
} 
```

`principal.getName()`给了我用户标识，但我需要一种方法来接收客户端凭据（客户端 => 使用我的 API 的应用程序）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-18T12:38:53.440

客户端身份可从`Authentication`您可以将主体投射到的对象中获得，或者直接从线程本地安全上下文中获取。就像是

```
Authentication a = SecurityContextHolder.getContext().getAuthentication();

String clientId = ((OAuth2Authentication) a).getAuthorizationRequest().getClientId(); 
```

如果您不想将该代码直接放入您的控制器中，则可以按照[此答案](https://stackoverflow.com/a/8765597/241990)中的描述实现一个单独的上下文访问器并将其注入其中。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-26T19:12:17.220

我根据@luke-taylor 的回答找到了一个合理的解决方案。

```
@RequestMapping(method = GET)
public List<Place> read(OAuth2Authentication auth) {
  auth.getOAuth2Request().getClientId()
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-02T18:57:26.287

`HandlerMethodArgumentResolver`使选项更加充实。为了支持以下内容：

```
@RequestMapping(
    value = WEB_HOOKS, 
    method = RequestMethod.GET, 
    produces = MediaType.APPLICATION_JSON_VALUE)
@ResponseStatus(HttpStatus.OK)
public List<SomeDTO> getThoseDTOs(@CurrentClientId String clientId) 
{
    // Do something with clientId - it will be null if there was no authentication
} 
```

我们需要在`HandlerMethodArgumentResolver`我们的应用程序上下文中注册（对我来说这是在 a 中`WebMvcConfigurerAdapter`）。我的`HandlerMethodArgumentResolver`样子是这样的：

```
public class OAuth2ClientIdArgumentResolver implements HandlerMethodArgumentResolver {

    @Override
    public boolean supportsParameter(MethodParameter parameter) {
        return parameter.getParameterAnnotation(CurrentClientId.class) != null
                && parameter.getParameterType().equals(String.class);
    }

    @Override
    public Object resolveArgument(
            MethodParameter parameter,
            ModelAndViewContainer mavContainer, 
            NativeWebRequest webRequest,
            WebDataBinderFactory binderFactory) 
        throws Exception 
    {
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        if(authentication == null) {
            return null;
        }
        String clientId = null;

        if (authentication.getClass().isAssignableFrom(OAuth2Authentication.class)) {
            clientId = ((OAuth2Authentication) authentication).getOAuth2Request().getClientId();
        }

        return clientId;
    }

} 
```

以及`@interface`定义：

```
@Target({ElementType.PARAMETER, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface CurrentClientId {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-28T17:40:37.260

一种简单的检索方法`clientId`是加载当前已验证的`principal`. 可以直接定义为方法参数，`principal`它会被框架正确解析。

这是一个例子：

```
 @RequestMapping(method = RequestMethod.GET)
  public Map<String, String> getUserInfo(Principal principal) {
    OAuth2Authentication oauth = (OAuth2Authentication) principal;

    Map<String, String> userInfo = new LinkedHashMap<>();
    userInfo.put("username", principal.getName());
    userInfo.put("clientId", oauth.getOAuth2Request().getClientId());
    return userInfo;
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-04T18:03:10.600

也可以通过注释获得声明`org.springframework.security.oauth2.jwt.Jwt`对象。`org.springframework.security.core.annotation.AuthenticationPrincipal`

```
@GetMapping
public String showClientId(@AuthenticationPrincipal Jwt principal) {
    return principal.getClaimAsString("clientId");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-11T14:18:58.450

随着[spring-oauth 的弃用，](https://github.com/spring-projects/spring-security/wiki/OAuth-2.0-Migration-Guide)其他一些答案不再起作用。我使用以下内容获得了`clientId`spring `AuthenticationSuccessHandler`-security 5：

```
@Autowired
public OAuth2AuthorizedClientRepository oAuth2AuthorizedClientRepository

protected String getClientId(final Authentication authentication, HttpServletRequest request) {
    OAuth2AuthenticationToken auth = (OAuth2AuthenticationToken) authentication;
    OAuth2AuthorizedClient client = oAuth2AuthorizedClientRepository.loadAuthorizedClient(auth.getAuthorizedClientRegistrationId(), auth, request);
    String clientId = client.getClientRegistration().getClientId();
    return clientId;
} 
```

# javascript - 为什么 href 在 javascript 闭包中不起作用

> ID：12464046
> 
> 赞同：0
> 
> 时间：2012-09-17T17:08:56.667
> 
> 标签：javascript, html, href

我遇到了有关此代码的两个问题：

1.  当我调用“window.location.href = 'www.google.com';”时，我无法链接到另一个网站 在 javascript 闭包中。

2.  此代码在 IE 浏览器中不起作用（提交按钮消失）

下面是代码：

HTML 部分：（由“创建文件夹”按钮控制的隐藏表单）

```
<a href="#" class="mylink" title="Create Folder" onClick="modalPopup(0);">Create folder</a>
    <!-- modal content -->
    <div id="modal-content">
        <div id="modal-title"></div>
        <div id="modal-text"></div>
        <form name="input" action="" method="post">
            <div id="modal-field"></div>
            <input type="hidden" name="ID" id="ID">
            <input type="hidden" name="submitButton" id="submitButton">
        </form>
    </div> 
```

Javascript 部分：（显示表单并处理提交事件）

```
function deleteNode( elementId ) 
{
    var label=document.getElementById( elementId ); 
    while ( label.hasChildNodes() ) 
    { 
        label.removeChild( label.lastChild ); 
    }
}

function sendRequest( type, param )
{
    if ( type == "createFolder" )
    { 
        alert('create folder : ' + param ); 
        **window.location.href = "www.google.com";  //  just for test, but not working !**
    }
    return false;
}

function modalPopup( fileID ) 
{
    deleteNode("modal-title");
    deleteNode("modal-text");
    deleteNode("modal-field");

    var titleObj = document.createElement("h3");
    titleObj.innerText = "Create Folder";
    titleObj.textContent = "Create Folder";
    document.getElementById("modal-title").appendChild(titleObj);

    var textObj = document.createElement("a");
    textObj.innerText = "Enter new folder name";
    textObj.textContent = "Enter new folder name";
    document.getElementById("modal-text").appendChild(textObj);

    var fieldObj = document.createElement("input");
    fieldObj.setAttribute("type","input");
    fieldObj.setAttribute("name","createFolder");
    fieldObj.setAttribute("value","New Folder");
    fieldObj.setAttribute("id","modal-field");
    document.getElementById("modal-field").appendChild(fieldObj);

    // assign text field value
    document.getElementsByName('submitButton')[0].type = "submit";
    document.getElementsByName('submitButton')[0].value = "Create";
    **document.getElementsByName('submitButton')[0].onclick = function() { return sendRequest( "createFolder", fieldObj.value ); };**
    document.getElementsByName('ID')[0].value = fileID;             
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:29:04.193

jbaby 是对的：

```
<input type="hidden" name="submitButton" id="submitButton"> 
```

应该：

```
<input type="submit" name="submitButton" id="submitButton"> 
```

放一个

```
return false; 
```

在您绑定到提交按钮的功能结束时

并尝试：

```
window.location.href = "http://www.google.com"; 
```

# iphone - 绘制周长 MapView ios

> ID：12464050
> 
> 赞同：0
> 
> 时间：2012-09-17T17:09:08.970
> 
> 标签：iphone, objective-c, xcode, ios5, mkmapview

我正在尝试实现类似的东西。我将在地图上绘制位置，并为用户提供标记他想要仅在他设计的位置内列出点的区域的选项。

这将类似于所附图像。

[我无法上传图片，我把它贴在这里，](http://i48.tinypic.com/dg79yo.png)
即在他在地图上画了一个区域之后，我显示了他在其中得分的点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:48:36.443

为什么不让用户放大，让他们想看的区域填满屏幕呢？

# mysql - 如何测试两个数据库以找出丢失的记录？

> ID：12464054
> 
> 赞同：0
> 
> 时间：2012-09-17T17:09:23.670
> 
> 标签：mysql, testing

我有两个 MySQL 数据库 DB1 和 DB2。DB1 只有 1 个表，其中没有大量列。所有这些数据都被传输并被拆分并存储在 DB2 中的几个表（比如 2 个）中。

```
For example, DB1 has a table1 which looks like

        Student_Name   Id   Address   Attendance   Marks
        ------------   --   -------   ----------   -----
        John            1   90th st       70         90

The records that are transferred from DB1.table1 are stored in DB2.table and DB2.table2 in the following manner

DB2.table 1: Id   Student_Name   Address   
             --   ------------   -------
             1     John          90th st

DB2.table 2: Id   Attendance   Marks
             --   ----------   -----
             1     70            90 
```

DB2 每天都会使用来自 DB1 的新记录进行更新。现在我想提出一些测试用例来确定是否由于某些原因没有将任何记录从 DB1 复制到 DB2（例如：如果 Id 丢失，则记录不会被复制）。

我从来没有写过这种类型的测试用例。我需要一些帮助，或者任何人都可以提出任何计划，例如如何开始测试。有没有我可以使用的工具来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:13:57.673

这会吃掉资源，但是：

```
SELECT * FROM DB1.table1 WHERE id NOT IN (SELECT id FROM DB2.table1 UNION SELECT id FROM DB2.table2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:45:40.127

如果这是作为转换过程的一部分用于 QA，则以当前格式导出 DB1，然后以与 DB1 相同的格式导出 DB2。使用`diff`.

如果您想在线进行，请在 DB2 中放置一个“conversion_date”列，以限制您需要在@zebediah49 给您的查询中检查的记录数。

或者 DB2 中的触发器如何更新 DB1 以将记录标记为“已接收”？

世界是你的牡蛎。

# jquery - 找到具有特定类的“nextes”div

> ID：12464057
> 
> 赞同：0
> 
> 时间：2012-09-17T17:09:47.163
> 
> 标签：jquery

嗨，我想选择 dom 中具有特定类的下一个 div。

有了这个 ：

```
<div class="comW"></div>
.....
Some divs
.....
<div class="comWF"></div> 
```

我想在 comW div 之后选择 div.comWF 但它可能在 comWF 之前和 comW 之后有一些其他 div

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:13:07.723

您可以使用`nextAll`和`:first`选择器：

```
$('.comW').nextAll('.comWF:first') 
```

[http://jsfiddle.net/zdZmn/](http://jsfiddle.net/zdZmn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:13:53.533

你需要在`jQuery.nextAll()` [这里使用规格](http://api.jquery.com/nextAll/)

```
 $('.comW').nextAll('.comWF'); 
```

如果你有很多`.comWF`div 你也可以使用

```
 $('.comW').nextAll('.comWF:first-child'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T17:19:00.123

嗯.. 长时间使用 jQuery 让我生疏了：P。我找到的解决方案是放置一个父 div 并迭代搜索所需的类

**HTML**

```
<div id="parent">
  <div class="comW"></div>
  <div class="comWF"></div>
</div> 
```

**JS**

```
var parent = document.getElementsById('parent').children,
    e, i, j;

// or get the parent by classname
// document.getElementsByClassName('parent')[0].children,

for (i = 0, j = parent.length; i < j; i += 1) {
    e = parent[i];
    if ('comWF' === e.className) {
        // ... action
        break;
    }
} 
```

# javascript - 更改按钮并在悬停时添加表单

> ID：12464058
> 
> 赞同：4
> 
> 时间：2012-09-17T17:09:50.270
> 
> 标签：javascript, jquery, css

我有一个“待定”按钮。什么都不做。惊人的。但是我想做的是当用户将鼠标悬停在它上面时，`<form>`出现并将“待定”更改为“取消”。

[http://jsfiddle.net/ym4SK/](http://jsfiddle.net/ym4SK/)

无论如何，我都不是 js 专业人士。我不知道我做错了什么。建议？

非常感谢您的帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:13:29.690

猜你错过了`$`？

```
$(function(){
    function revealButton(shown, hidden) {
        $(shown).mouseenter(function(){
            $(this).parent().next().children(hidden).show();
        });

        $(hidden).mouseleave(function(){
            $(this).hide();
        });
    };
    revealButton("button.pending", "button.cancel");
}());​ 
```

[http://jsfiddle.net/ym4SK/1/](http://jsfiddle.net/ym4SK/1/)

### 更新小提琴：http: [//jsfiddle.net/ym4SK/5/](http://jsfiddle.net/ym4SK/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:20:34.290

看看这个：http: [//jsfiddle.net/ym4SK/4/](http://jsfiddle.net/ym4SK/4/)

好吧，最初会显示取消，但您可以在 HTML 中的 button.cancel 上添加 display:none。喜欢[这里](http://jsfiddle.net/ym4SK/7/)

```
(function(){
    function revealButton(shown, hidden) {
        $(shown).mouseenter(function(){
            $(this).parent().next().children(hidden).show();
            $(shown).hide();
        });

        $(hidden).mouseleave(function(){
            $(this).hide();
            $(shown).show();
        });
    };
    revealButton("button.pending", "button.cancel");
}());​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T17:20:34.240

另一种方法是使用`.hover()`jquery 中的函数。

```
$(function(){
    $('button').hover(
        function(){
            $(this).html('Cancel').removeClass("pending").addClass("cancel");
        },
        function(){
            $(this).html('Pending').removeClass("cancel").addClass("pending");
        }
    );
});​ 
```

看看这个[jsfiddle](http://jsfiddle.net/ym4SK/6/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T17:25:04.570

## *[jsFiddle 演示](http://jsfiddle.net/ym4SK/8/)*

更改的 HTML：

```
<div>
    <form method="POST" action="yaddaydahdasda">
        <button class="pending">Pending</button>
        <button type="submit" class="cancel">Cancel</button>

        token here
        <input type="hidden" value="myvalue" />       
    </form>
</div> 
```

添加到CSS：

```
.cancel{
    position:absolute;
    cursor:pointer;
    left:0px;
    top:0px;
    /* ... */
} 
```

固定的jQuery：

```
(function(){

    function revealButton(shown, hidden) {
        $(shown).mouseenter(function(){
            $(this).next( $(hidden) ).show(); // fixed
        });

        $(hidden).mouseleave(function(){
            $(this).hide();
        });
    }
    revealButton(".pending", ".cancel");

}()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T17:21:58.387

目前还不是 100% 清楚你想要做什么，但这是我最好的猜测：

[http://jsfiddle.net/ym4SK/](http://jsfiddle.net/ym4SK/)

```
(function(){
    function revealButton(shown, hidden) {
        $(hidden).hide();
        $(shown).hover(function()
                       {
                           $(hidden).show();
                           $(shown).hide();
                       }, function() {});
        $(hidden).hover(function() {}, function()
                        {
                           $(shown).show();
                           $(hidden).hide();
                        });
    };
    revealButton("button.pending", "button.cancel");
}());​ 
```

注意：最好`hover`用于这样的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T18:35:15.030

继承人的东西，这里的所有代码而不是小提琴。

首先，当您的问题解除时，您希望将待定按钮更改为取消，所以我从 html 中删除了另一个按钮

```
<div>
    <input type='submit' class="pending" value='Pending' />
</div>
<form method="POST" action="yaddaydahdasda" id="form">
    {% csrf_token %}
    <input type="hidden" value="myvalue" />
</form>​ 
```

现在一些 jQuery 动作。

```
<script type='text/javascript'>

    $(document).ready(function() {
        // if jquery dosent load for some reason, form will be visible. Thats why we hide it when on DOM ready
        $("#form").hide();

    });

    $(".pending").on('mouseover',function() {
        $(this).removeClass('pending').addClass('cancel');
        $(this).val('Cancel');
        $("#form").show();
    });

    $(".pending").on('click', function(e) {
        e.preventDefault();
        return false;
    });

    $(".cancel").on('click',function() {
        $(this).removeClass('cancel').addClass('pending');
        $(this).val('Pending');
        $("#form").hide();
    }); 
```

就是这样！奇迹般有效！您可能想在表单中添加一些 CSS，例如。让它漂浮在按钮或其他东西旁边？

# vb.net - Sheridan DBGrid 到 winforms datagridview 控件的转换找不到书签属性的 equalavent

> ID：12464064
> 
> 赞同：0
> 
> 时间：2012-09-17T17:10:18.797
> 
> 标签：vb.net, bookmarks

我试图摆脱我们在 vb6 中使用的 Sheridan DBGrid 控件。我们进行了从 vb6 到 vb.net 的转换，现在只剩下我们必须替换的 ActiveX 控件，因为它们不再受支持并且不是本机 .net 代码。我们现在在 vb.net 中，并且在 .net 中有一个 activex 包装器，它继承自 Sheridan DBGrid。我们正在尝试摆脱所有 ActiveX 控件并替换此 DBGrid。

Sheridan 的 DBGrid 有这个书签功能，我不确定我们是否可以在 .net 3.5 框架中找到它的等价物。有谁知道我可以用 dot net 替换书签功能吗？我正在使用 VB.net。任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:39:20.563

我不熟悉 Sheridan 控件的 .Bookmark 属性，但是如果您想要引用与所选行对应的数据行，您可以使用：

```
Dim drw As DataRow = DirectCast(dgv1.SelectedRows(0).DataBoundItem, DataRowView).Row 
```

这假定网格的 .DataSource 是一个数据表。

# java - PHP - Java 从字符串中读取 int8

> ID：12464067
> 
> 赞同：-1
> 
> 时间：2012-09-17T17:10:32.530
> 
> 标签：java, php, string, numbers, int

我怎么能把这个 PHP 代码翻译成 Java 代码？

```
protected function readInt24()
{
    $ret = 0;
    if (strlen($this->_input) >= 3)
    {
        $ret  = ord(substr($this->_input, 0, 1)) << 16;
        $ret |= ord(substr($this->_input, 1, 1)) << 8;
        $ret |= ord(substr($this->_input, 2, 1)) << 0;
        $this->_input = substr($this->_input, 3);
    }
    return $ret;
} 
```

$input 是一个非常疯狂的字符串，其中包含 utf 字符（afaik）： 8' 左右

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:36:25.157

3`ord(substr($this->_input, ..., ...))`检索字符串的前三个字符的 ASCII 值。对于每个都有一个左移，然后与返回进行或运算。

这将在 Java 中翻译为：

```
public static int readInt24(String input) {
int ret = 0;
if (input.length() >= 3) {
    ret = input.charAt(0) << 16;
    ret |= input.charAt(1) << 8;
    ret |= input.charAt(2) << 0;
}
return ret;
} 
```

请注意，PHP 代码会将实例变量截断`_input`为仅 3 个字符长。

# sql - Microsoft Query 中的子查询语法差异

> ID：12464070
> 
> 赞同：2
> 
> 时间：2012-09-17T17:10:43.650
> 
> 标签：sql, excel, syntax, informix, ms-query

上周我发布了一个关于在 Microsoft Query 中使用子查询的问题，虽然我在那个实例中的问题没有得到解决，但我发现这个问题比以前的情况要基本得多。

我通过 ODBC 连接到 Informix 数据库，尝试在 Microsoft Query（来自 Excel 2010）中执行简单查询，但在尝试正确获取子查询的语法时遇到了很多麻烦。我有一种感觉，MSQuery 被一些与 Informix/ODBC 源相关的特性所困扰。我之所以这么想是因为如果我尝试使用 Excel 电子表格作为我的数据源的非常简单的子查询，则以下语法有效：

```
SELECT * FROM
(
SELECT x0.field1, x0.field2
FROM `C:\USERS\NAME\DIRECTORY\Test.xlsx`.`Sheet1$` x0
) 
```

但是，当我使用 Informix 数据库中的子查询尝试相同的非常简单的查询时，

```
SELECT * FROM
(
SELECT x0.id, x0.creation_date
FROM coastal.waybill x0
) 
```

我收到错误`"Could not add the table '(select'."`我只能推测 MSQuery 中使用的语法必须针对数据源进行定制。然而，当我在 FROM 子句中查找 [Informix 的子查询语法](http://publib.boulder.ibm.com/infocenter/idshelp/v111/index.jsp?topic=/com.ibm.sqlt.doc/sqlt101.htm)时，我更加困惑，因为我似乎遵循了他们的语法，因为他们的例子是：

```
SELECT LIMIT 1 * FROM 
   (SELECT c.customer_num, c.lname, c.company, 
           c.phone, u.call_dtime, u.call_descr
                 FROM customer c, cust_calls u
                 WHERE c.customer_num = u.customer_num
    ORDER BY u.call_dtime DESC); 
```

我彻底迷路了。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:41:38.503

您是否尝试过这样的表别名：

```
SELECT a.* FROM
(
SELECT x0.id, x0.creation_date
FROM coastal.waybill x0
) a 
```

我曾经对 Oracle 数据库使用 MS Query 很多，而子查询不需要别名，然后我转移到确实需要它们的 MS SQL。

# c# - 如何在 C# 位图中替换相同颜色的色调变化？

> ID：12464072
> 
> 赞同：2
> 
> 时间：2012-09-17T17:11:11.240
> 
> 标签：c#, image-processing, aforge

**范围**：

大家好，我正在尝试将此验证码转换为“黑白”（二值化）图像，其中字符为白色，其余部分（背景、线条、随机图片）为黑色。

可以在[此处](http://www.fazenda.rj.gov.br/projetoCPS/codigoImagem)找到验证码的链接。刷新会给你另一个验证码。

**原因：**

我知道大多数人认为弄乱验证码是错误的，所以我在这里为自己辩护。这将仅用于知识/自我挑战。这些图像没有其他用途。

**问题：**

在研究了这些图像一段时间后，我发现一个好的方法是将颜色替换：“白色和黄色”到“Color.Black”，并且所有其他颜色都应该替换为“Color.White”。

在此之后，我将“反转”颜色，将我带到我想要的输出。

**代码示例：**

在这段代码中，我试图将每个图像的颜色“黑色”替换为 SkyBlue 像素。

```
 WebRequests wr = new WebRequests(); // My class to handle WebRequests
        Bitmap bmp;
        string url = "http://www.fazenda.rj.gov.br/projetoCPS/codigoImagem";

        bmp = wr.GetBitmap (url);

        for (int i = 1; i < bmp.Height ; i++)
        {
            for (int j = 1 ; j < bmp.Width ; j++)
            {
                if (bmp.GetPixel(j,i).Equals(Color.Black))
                {
                    bmp.SetPixel(j,i, Color.SkyBlue);
                }
            }
        } 
```

这段代码根本不起作用，我不知道为什么，但在这个例子中没有像素被替换。

**问题：**

我怎样才能使这项工作？我在这里想念什么？

此外，对我来说，理想的情况是将此图像的调色板“减少”为“基本”颜色，这将使我在这里的工作更加轻松。

我已经尝试过[AForge 框架](http://www.aforgenet.com/projects/iplab/)，我用它来减少颜色，但它根本不起作用，结果不是我期望的。

为了正确二值化此图像，我可以在这里做什么？

提前致谢，

马塞洛·林斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:11:46.177

您的算法不起作用的原因是您正在寻找*精确*匹配。但是由于 JPEG 压缩伪影，图像中的黑色并不是真正的黑色。在我加载的三个验证码中，甚至没有一个黑色 (0, 0, 0) 像素。最接近的值是 (0, 0, 4)，它看起来是黑色的，但不是。

一个近似的方法是：

*   用灰色去除通道平均值低于 220 的所有灰色（通道彼此差异小于 5%）。这会消除浅灰色细线以及灰色背景下的许多振铃 (JPEG) 伪影。
*   用灰色替换红色、绿色或蓝色通道高于其他两个通道 25% 以上的*所有像素。*这会处理红色、绿色和蓝色以及它们的大部分振铃伪影。
*   运行一个简单的去斑去除所有被五个灰色包围的非灰色像素，并且在 20% 范围内没有其他相同颜色的像素。

在这个过程结束时，背景全是灰色的，剩下的所有非灰色像素都是字符。

一些有用的功能：

```
// Very basic (and CIE-incorrect) check
public static int isGray(Color c)
{
    if (Math.Abs(c.R - c.G) > 5 * 2.55) return 0; // Not gray. R and G too different
    if (Math.Abs(c.R - c.B) > 5 * 2.55) return 0;
    if (Math.Abs(c.G - c.B) > 5 * 2.55) return 0;
    return 1;
}

// the blind man's test for shading :-)
public static int isShadeOfRed(Color c)
{
    if (4*c.R < 5*c.G) return 0; // Red not strong enough in respect to green
    if (4*c.R < 5*c.B) return 0; // Red not strong enough in respect to blue
    return 1; // Red is stronger enough than green and blue to be called "shade of red"
}

// (shades of green and blue left as an exercise)

// Very basic (and CIE-incorrect) check
public static int areSameColor(Color a, Color b)
{
    if (Math.Abs(a.R - b.R) > 5 * 2.55) return 0;
    if (Math.Abs(a.G - b.G) > 5 * 2.55) return 0; 
    if (Math.Abs(a.B - b.B) > 5 * 2.55) return 0;
    return 1; // "more or less" the same color
}

// This is more or less pseudo code...
public static int isNoise(int x, int y)
{
    if ((x < 1) || (y < 1)) return 0; // or maybe "return 1"
    if ((x+1 >= bmp.Width)||(y+1 >= bmp.Height)) return 0;
    pix = bmp.GetPixel(x,y);
    for (i = -1; i <= 1; i++)
        for (j = -1; j <= 1; j++)
        {
            if ((i == 0) && (j == 0)) continue;
            test = bmp.GetPixel(x+i, y+j);
            if (isGray(test)) grays++;
            if (isSameColor(pix, test)) same++;
        }
    // Pixel surrounded by grays, and has no neighbours of the same colour
    // (who knows, maybe we could skip gray calculation and check altogether?)
    // is noise.
    if ((grays == 5) && (same == 0))
       return 1;
    return 0;
}

// NOTE: do not immediately set to gray pixels found to be noise, for their neighbours
// will be calculated using the new gray pixel. Damage to image might result.
// Use a copy of bmp instead. 
```

# objective-c - 在 objc ARC 下使用 -Os 过度释放，但不使用 -O0

> ID：12464074
> 
> 赞同：10
> 
> 时间：2012-09-17T17:11:19.313
> 
> 标签：objective-c, automatic-ref-counting, llvm

我已经为以下问题提交了一个雷达（rdar://12311693，[http](http://openradar.appspot.com/12311693) ://openradar.appspot.com/12311693 ），但我想我也会在这里发布，看看是否有人能发现错误我的代码可能导致崩溃。

以下代码示例在打开编译器优化 (-Os) 时由于过度释放而导致崩溃，但在关闭编译器优化 (-O0) 时不会崩溃。该项目正在使用 Xcode 4.4.1 (4F1003)、Apple LLVM 编译器 4.0 构建

当 num2 过度释放时，应用程序崩溃。启用 Zombie Objects 以确认是这种情况。

```
// This crashes under -Os, but not under -O0
NSNumber *num1 = @((float)arc4random() / (float)UINT32_MAX);
NSNumber *num2 = @((float)arc4random() / (float)UINT32_MAX);

NSNumber *foo1 = num1;
NSNumber *foo2 = num2;

for (NSUInteger i=0; i<2; i++) {

    NSLog(@"foo1: %p %@", foo1, foo1);
    NSLog(@"foo2: %p %@", foo2, foo2);

    // swap foo1 and foo2
    foo1 = num2;
    foo2 = num1;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T17:20:24.140

编译器错误。感谢您提交它。

`num1`并且`num2`应该保证指向实例的生命周期。我怀疑优化器 [正确] 重用堆栈槽并 [不正确] 发出导致问题的释放/保留序列。

* * *

回应堆栈管理员；这是一个编译器错误。ARC 的全部意义在于将 Objective-C 转换到编译器可以 100% 确定地分析代码以知道在哪里粘贴保留/释放的点，这样开发人员就不必这样做了。总的来说，它完全可以做到这一点，即使面对线程，只要在 MRR 世界中使用对象的所有代码都表现良好并且开发人员不会“逃脱”对象超出 ARC 控制和做一些淘气的事。两个大如果，但对 MRR 有很大的改进。

最后，如果您的代码在优化时不起作用（当没有编译器错误起作用时）**，那是因为您的代码损坏了**。正确编写的优化*器不会破坏正确编写的代码*。

虽然有些编译器出了名的漏洞百出，但 LLVM 并不是其中之一（我不会对 GCC 发表任何声明，因为我已经很多年没有使用过它了，但我敢打赌也可以这么说）。iOS 或 OS X 系统将在每次启动时执行数百万行已**启用优化**的编译代码，并且系统运行良好。

所以，不，“优化器已打开”永远不是崩溃的最终解决方案。

* * *

正如 Catfish_man 所指出的，有一些深奥的优化器选项*会故意产生*技术上不正确的代码。它们不是由 -Os 或其他“标准”优化启用的。它们主要集中在数学运算上，因此通常不会像更快地计算错误那样导致崩溃。

# c++ - 通过传递外部指针或内部调用 new 构造的类，我可以在销毁时天真地删除这个指针吗？

> ID：12464075
> 
> 赞同：1
> 
> 时间：2012-09-17T17:11:19.210
> 
> 标签：c++, memory, dynamic, delete-operator

我有一个 A 类，它有一个指向 B 类的指针作为它的字段之一：

```
class A {
private:
    B *ptr;
public:
    A(B*);
    A();
    ~A();
}

A::A(B *ptr)
{
    this->ptr = ptr;
}

A::A()
{
    this->ptr = new B();
}

A::~A()
{
    delete this->ptr;
} 
```

我希望析构函数仅在由 new 分配的情况下删除 B，我只能通过设置一个存储指针原点的标志来执行此操作（因此，只有在 A 的构造期间分配了 ptr 时才调用 delete），还是有更优雅的解决方案，即，我可以在任何指针上调用 delete （我知道如果传入的指针是使用 new 分配的，它也将被删除，但是如果指针是从范围传入哪个 A 的构造函数被调用，显然删除 this 是未定义的）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:15:10.950

> 还是有更优雅的解决方案

不，不是真的；需要清楚地记录谁拥有这个指针。看起来你的课是这样的，所以你可以自己构建`ptr`吗？

```
#include <memory>

class A {
private:
    std::unique_ptr<B> ptr;
public:
    A(some_data args) 
        : ptr(new B(args)) { };
    A();    
} 
```

如果您的类不拥有也可以的指针，请不要释放它。否则，您将需要在外部设置一个标志（即，`dealloc_on_destruct`）以知道该做什么，这可能会变得混乱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T17:18:34.167

更优雅的解决方案是没有具有不同所有权模型的类，在这种情况下，拥有与不属于你的类。不要在同一个类类型中混合这两个想法，因为它只会让你的用户/客户感到困惑（违反最小意外原则）。

要么创建具有您需要的不同行为的单独类，要么选择所有权模型并强制您的客户坚持使用它（在非默认构造函数中传递和转移所有权，或者不允许自我分配）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T17:49:01.860

除了其他人所说的（避免这种设计）：如果你绝对不能避免这种设计，并且你需要这个有趣的类，有时拥有它`B`，有时不拥有它，它取决于调用哪个构造函数，那么你可以像这样使用`unique_ptr`（或`shared_ptr`）：

```
void delete_it(B*) { std::default_delete<B>()(t); }
void do_nothing(B *t) {}

class A {
    unique_ptr<B, void(*)(B*)> ptr;
  public:
    A(B *ptr) ptr(ptr, do_nothing) {}
    A() ptr(new B(), delete_it) {}
    // no need for destructor
    // hence also no need to worry about copy constructor or assignment
}; 
```

它比“原始指针加标志”更好的原因是您避免了必须实现删除器和复制（并在 C++11 中移动）。就性能而言，它可能比“原始指针加标志”更糟糕，但大多数时候您不必担心这一点。如果有正当理由，你可以回来做额外的工作。您不需要更改要切换的类的源接口，尽管它可能会破坏二进制兼容性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T17:28:30.933

仅使用您提供的代码无法回答该问题。真正的问题是为什么您可以接受或不接受指针，以及如果将指针传递给您，谁拥有内存。

根据您的对象在您的特定域中应该做什么，可以采取不同的替代方案。例如，如果您可以与调用者共享所有权，那么您应该使用 a `shared_ptr`，如果您将保留对象中的所有权，您应该使用 a`unique_ptr`在界面中明确说明您的对象将获取所有权。如果不共享所有权，则考虑传递对对象的引用（即使您在内部存储了一个指针），在这种情况下，您可以将所有权与实际使用分开：

```
// option 1: shared ownwership
class A {
   std::shared_ptr<B> ptr;
public:
   A( std::shared_ptr<B> const & p ) : ptr(p) {}
   A() : ptr( std::make_shared<B>() ) {}
};
// option 2: grab ownership
class A {
   std::unique_ptr<B> ptr;
public:
   A( std::unique_ptr<B> p ) : ptr( std::move(p) ) {}
   A() : ptr( new B(); }
};
// option 3: no ownership (unless we create the object)
// (separating concerns: ref to access the object, ptr to manage it)
class A {
   std::unique_ptr<B> ptr;   // only ownership
   B * ref;
public:
   A( B & b ) : ptr(), ref(&b) {}
   A() : ptr( new B() ), ref(ptr.get()) {}
   // Internally use 'ref' to access the object the destructor will delete it 
   // if needed
}; 
```

# java - Mac OS X 上的 Java 应用程序并不总是从操作系统接收打开文件事件

> ID：12464080
> 
> 赞同：0
> 
> 时间：2012-09-17T17:11:52.593
> 
> 标签：java, macos, event-handling

我的 java 应用程序的主类有一个静态初始化程序，我们在其中设置 ApplicationAdapter 以在调用 main() 之前侦听来自操作系统的通知。到目前为止，这已按预期工作。但是，最近（从 10.7 开始？不确定时间表），有时这不起作用。调试应用程序后，*似乎*操作系统正在事件线程上异步发布文件打开事件，而静态初始化程序仍在运行。所以有时初始化在文件打开事件发布之前完成（并且文件被正确打开），而其他时候，事件在初始化完成之前发布（即在我的应用程序有机会注册 ApplicationListener 之前），所以我的应用程序永远不会获得处理事件的机会，并且请求的文档未打开。

有没有其他人遇到过这个问题？

我尝试过的一种可能的解决方案是在主类的静态初始化程序的开头暂停事件队列，例如：

```
static{
    final Object monitor = new Object();
    SwingUtilities.invokeLater( new Runnable(){
       public void run(){
            synchronized( monitor) {
                try{ monitor.wait(); } catch( Exception e ){ e.printStackTrace(); }
            }
       }
    });

    registerApplicationListener();

    synchronized( monitor) {
        try{ monitor.notifyAll(); }
        catch(Exception e){ e.printStackTrace(); }
    }
} 
```

这会在应用程序初始化设置 ApplicationListener 以接收 OS 事件时阻止事件分派。但是，问题仍然是操作系统仍然可以在初始化完成之前调度事件，据我所知，我对此无能为力。Apple Java 扩展 API 中没有任何内容表明控制事件分派行为的任何方式。我也无法通过 Info.plist 中的配置找到控制事件分派任何方面的任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:19:16.003

确认这是来自 OS X shell 的文件打开事件。Java 应用程序无法可靠地捕获此通知，解决方法是安装启动守护程序来捕获通知并作为启动参数转发给应用程序。

为应用程序注册 URL 方案也可能有效，但我从未在 Java 应用程序中尝试过，希望参数会出现在 main() 参数中

# ios - nt segue 标识符未检测到 segue

> ID：12464081
> 
> 赞同：0
> 
> 时间：2012-09-17T17:12:01.507
> 
> 标签：ios, segue, uistoryboardsegue

我正在尝试使用 segues 切换视图（不是我第一次），segue 活动正在被识别但是没有任何动作发生

这是我的代码：

```
- (void)viewDidLoad
{
...
 [self performSegueWithIdentifier: @"thesegue" sender: self];
...
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    NSString *string=[segue identifier]; //checked if the string is actually equal "thesegue" unsing a breakpoint , and it s actually the case

    if ([[segue identifier] isEqualToString:@"thesegue"]) { 

        int x;
        x=2

    }
} 
```

我在所有行上都插入了断点，它只是跳转到最后一个右括号（即它不识别 [segue identifier] 等于“thesegue”）。

我错过了什么吗？

编辑 ：

我添加了 x=2 现在它进入了 if 语句，现在的问题是，知道它检测到 segue，为什么它不显示新视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:25:04.513

在方法中尝试 performSegue `ViewDidAppear`！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T17:35:11.807

segue 标识符在 storyboard/IB 中设置。将其设置为该值并正确建立连接，它将起作用。

# silverlight - WP 7.1.1 不允许访问数据库文件

> ID：12464082
> 
> 赞同：0
> 
> 时间：2012-09-17T17:12:01.640
> 
> 标签：silverlight, windows-phone-7, sql-server-ce, windows-phone-7.1.1

我的环境 Windows 8 Pro 和安装了 WP 7.1.1 SDK 的 Visual Studio 2010 Ultimate。

我有一个带有 SQL CE 数据库的 WP 7.1.1 应用程序。有 2 个数据库，一个随初始包一起提供，另一个存储在独立存储中。在 Application_Launching 上，代码会比较两个数据库的版本，如果包中的版本更大，它会替换独立存储中的版本。~~在关闭模拟器的情况下首次运行应用程序时，应用程序可以正常启动并复制数据库以隔离存储。在第二次运行~~以下代码：

```
using (SportsDataContext db = new SportsDataContext(DBConnectionString))
{
  var setting = db.Settings.Where(s => s.SettingID == (Int16)Settings.DatabaseVersion).SingleOrDefault();
  if (setting == null)
    return false;
  newVersion = setting.Value;
} 
```

抛出异常：

> 不允许访问数据库文件。[ 1981，文件名 = \Applications\Install\{GUID}\Install\{FileName}.sdf,SeCreateFile]

此外，让模拟器运行并卸载应用程序并重新运行它可以使其工作。

更新它在第一次运行时起作用的原因是因为上面的代码没有被执行（故意）。再次运行它会使上面的代码运行并轰炸。

这曾经在 Windows 7 和没有 VS 2012 的情况下正常工作。可能导致问题的原因是什么？

更新在使用新的 Windows 8 设置进行任何更改之前，我将所有更改都还原了回来，它按预期工作。一旦我使用服务器资源管理器使用 VS 2010 打开 sdf 文件并对其进行修改，我在调试应用程序时就会遇到同样的问题。诡异的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:29:13.317

目前 Mango 支持 3.5 CE，从这里[http://www.microsoft.com/en-us/download/details.aspx?id=12264](http://www.microsoft.com/en-us/download/details.aspx?id=12264)安装 SQL CE 3.5应该可以解决问题

# winforms - 未绑定的 Datagridviewcomboboxcolumn 值是否区分大小写？

> ID：12464083
> 
> 赞同：0
> 
> 时间：2012-09-17T17:12:02.697
> 
> 标签：winforms, datagridview, datagridviewcombobox

`datagridviewcomboboxcolumn`在未绑定的datagridview中使用a时，我遇到了一个奇怪的问题。该列最初填充了有效值，其中一些全为大写，一些混合大小写，但始终是唯一的。例如，“AB”、“AC”、“AiDA”、“AltCurr”、“BE”等。

选择任何大写项目时，一切正常。但是，如果我从单元格的下拉列表中选择一个大小写混合的项目，则会发出“单元格包含无效数据”DataError 事件，并且单元格选择“AB”（即无法找到选择，因此默认为到第一个条目）。

如果我将所有列表项都更改为大写，则不会出现问题（但实际上这不是一个选项！）。

我已经阅读了大量关于 BOUND datagridview 组合列中区分大小写的评论，解决方案是更改底层数据表上的区分大小写选项，但没有什么可以克服我的特定未绑定问题。

有没有其他人遇到过这个问题，如果有，你是如何解决的？

编辑：按要求编写代码示例...

Datagridviewcombobox 列已经在设计器中创建（col #2）。它从对象集合中填充如下：

```
m_subjectList = new SubjectList  
for each sj as Subject in m_subjectlist  
    ctype(dgv.columns(2),datagridviewcomboboxcolumn).items.add(sj.SubjectCode) 'a string value  
next 
```

行是从基础数据表中手动添加的：

```
for each dr as datarow in ds.tables("Mappings").rows
    dim r as integer = dgv.rows.add
    dgv.rows(r).cells(2).value = dr("SubjectCode") 'varchar(10)
next 
```

到目前为止一切正常 - DGV 正确显示，单元格组合中的值全部正确。不再需要代码。

现在，如果我单击任何这些行上的下拉菜单来更改主题，除非我选择“AiDA”或“AltCurr”项目（即混合大小写的项目），否则一切正常。dataerror 上下文是 Formatting | 展示。

如果我选择任何全部大写的列表项，则不会出现问题。在我看来，组合单元格在其 objectcollection 中没有找到混合大小写项目 - 底层组合对象集合的大小写敏感性与 DGV 用于检查集合内有效性的任何大小写敏感性存在差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:13:22.117

我设法回答了我自己的问题。

似乎我关于组合框列的对象集合中区分大小写差异的理论（至少部分）是正确的。不要将字符串值添加到 Items 集合，而是使用包含字符串的原始和大写版本的自定义对象。

这现在有效：

```
Public Class ComboCellItem
    Private m_Value As String
    Private m_Description As String

    Public ReadOnly Property Value() As String
        Get
            Return m_Value
        End Get
    End Property

    Public ReadOnly Property Description() As String
        Get
            Return m_Description
        End Get
    End Property

   Public Sub New(ByVal Value As String, ByVal Description As String)
        m_Value = Value
        m_Description = Description
    End Sub
End Class 
```

现在使用 ComboCellItem 对象创建所有组合框列项。请注意，ComboCellItem 对象的两个属性都是相同的，除了一个以大写形式存储：

```
m_SubjectList = New SubjectList(m_dbc)
For Each sj As Subject In m_SubjectList
    Dim r As Integer = .Rows.Add
    CType(dgvMap.Columns(2), DataGridViewComboBoxColumn).Items.Add _
                (New ComboCellItem(sj.SubjectCode.ToUpper, sj.SubjectCode))
Next 
```

将组合列的 Displaymember 设置为原始（非大写）值，将 Valuemember 设置为大写元素：

```
CType(dgvMap.Columns(2), DataGridViewComboBoxColumn).DisplayMember = "Description"
CType(dgvMap.Columns(2), DataGridViewComboBoxColumn).ValueMember = "Value" 
```

最后，在创建和填充行时，确保将组合单元格值设置为基础数据的大写值：

```
For Each dr As DataRow In ds.tables("Mappings").Rows
    Dim r As Integer = dgvMap.Rows.Add
    dgvMap.Rows(r).Cells(2).Value = dr("SubjectCode").ToString.ToUpper
Next 
```

现在，当您从下拉列表中选择大小写混合项目时，一切都按预期工作。似乎 DatagridviewComboboxColumn 的内部工作方式意味着您根本无法将它与简单字符串值列表一起使用，除非它们都是大写的。与搜索其底层项目集合的方式相比，它处理显示内容的区分大小写的方式存在明显差异。

这几乎浪费了我一天的工作时间，但至少我下次会知道。

多么令人沮丧！

德里克

# c# - 如何避免同时执行后续计划的回调？

> ID：12464088
> 
> 赞同：3
> 
> 时间：2012-09-17T17:12:39.057
> 
> 标签：c#, .net, multithreading, timer

关于[`System.Threading.Timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer%28v=vs.100%29.aspx)类的文档指出：

> *请注意，调用 Dispose() 方法重载后可能会发生回调，因为计时器将回调排队以供线程池线程执行。*

这意味着在调用`Dispose()`方法之前安排的所有回调都必须完成。但是如何安排回调？下一次回调安排在什么时候？

假设我们创建了一个新的`Timer`类实例，其有限周期等于*P*和有限到期时间等于*D*。回调的第一次执行将在*D*毫秒之后发生。随后的回调将在前一个回调开始的*P毫秒后执行。*编写代码示例，您将看到如果回调执行时间大于指定的周期*P*，则计时器将回调排队。

假设回调要备份文件上的一些数据：回调执行时间是备份执行时间，取决于必须写入文件的数据量，所以回调执行时间可能会超过指定的时间。在这种情况下，在当前备份结束时安排下一次备份更合适：为此，禁用周期性行为（通过将 period 设置为`Timeout.Infinite`）并`Change()`在回调结束时调用方法就足够了，如以下示例代码所示。

```
// some private fields
private readonly object syncRootForTimer = new object();
private Timer backupTimer = new Timer(BackupCallback, null, 10000, Timeout.Infinite);
private bool isTimerDisposed = false;

// it performs timer shutdown
public void Shutdown()
{
    WaitHandle disposed = AutoResetEvent(false);
    lock(syncRootForTimer)
    {
        backupTimer.Dispose(disposed);
        isTimerDisposed = true;
    }
    WaitHandle.WaitAll(new WaitHandle[]{ disposed });
    // ...
}

private void BackupCallback(object state)
{
    // It performs the backup procedure...
    // ...

    lock(syncRootForTimer)
    {
        if (!isTimerDisposed)
            backupTimer.Change(10000, Timeout.Infinite);
    }
} 
```

这样，似乎没有回调排队。我还注意到，`Dispose(WaitHandle)`在最后一个计划之后（即在最后一次调用该方法之后`Change()`）立即调用该方法，甚至没有执行最后一个计划，并且立即释放计时器。

我想我可以说禁用周期性行为并在回调执行结束时更改到期时间，计时器排队没有回调。这应该确保在调用`Dispose()`方法后不会发生回调。我的猜测正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:16:22.613

其中一种方法是切换到`System.Timers.Timer`. 我在博客上写过：

[http://netpl.blogspot.com/2010/05/systemwindowsformstimer-vs.html](http://netpl.blogspot.com/2010/05/systemwindowsformstimer-vs.html)

（条目的第二部分）

# php - Symfony 2实体隐藏？

> ID：12464089
> 
> 赞同：1
> 
> 时间：2012-09-17T17:12:40.860
> 
> 标签：php, symfony

假设我有一个实体
`ServiceOffer{id ...}`
并且
`ServiceOfferCapabilities{serviceoffer_id , capability_id,value }`.

ServiceOffer 有一个 ServiceOfferCapabilities (一对多) 的集合。我想要的只是显示一种形式的 ServiceOffer 并让用户为每个功能选择他想要的值。

好吧，无论我做什么，这都是非常困难的。因为我不知道如何为 ServiceOfferCapabilities 创建 formType。例如，我将值添加为文本，但我不知道如何添加功能。
我可以让它工作，但是在提交时会出现问题，因为它不知道哪个是能力并将其设置为空。我尝试隐藏，但无法创建具有所需 ID 的功能对象。有任何解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:20:07.677

看起来你需要像[数据转换器](http://symfony.com/doc/current/cookbook/form/data_transformers.html)这样的东西（来自链接）

> 假设您具有任务与问题的一对一关系，例如，任务可选地具有与其相关联的问题。添加一个包含所有可能问题的列表框最终会导致一个非常长的列表框，在其中无法找到某些内容。您可能想要添加一个文本框，用户可以在其中简单地输入问题编号。
> 
> 您可以尝试在控制器中执行此操作，但这不是最佳解决方案。如果这个问题被自动转换为一个问题对象会更好。这就是数据转换器发挥作用的地方。

# google-app-engine - 在 GAE 上向 jinja2 添加自定义过滤器

> ID：12464095
> 
> 赞同：8
> 
> 时间：2012-09-17T17:12:55.880
> 
> 标签：google-app-engine, jinja2, customization

我需要向 jinja2 添加一个非常简单的过滤器。基本上，它需要一个数字，如果它是正数，则附加一个“+”。我遵循了关于如何添加自定义过滤器的 jinja2 文档，但它似乎不起作用（在 GAE 上）。

Python：

```
def str_votes(votes):
    if votes > 0:
        return '+' + str(votes)
    else:
        return str(votes)

# jinja2 stuff
template_dir = os.path.join(os.path.dirname(__file__), 'templates')
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir),
                               autoescape=True)
jinja_env.globals['str_votes'] = str_votes 
```

HTML（用于渲染页面）：

```
<div>{{ 123|str_votes }}</div> 
```

这给了我一个错误：`TemplateAssertionError: no filter named 'str_votes'`

我该如何解决？（这里有一个[类似的问题](https://stackoverflow.com/questions/8039925/adding-a-custom-jinja2-filter-in-gae-1-6-0)从未得到回答。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T17:31:04.533

您必须注册过滤器。就像是：

```
jinja_env.filters['str_votes'] = str_votes 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T17:42:44.773

我通过在全局变量中注册它做了类似的事情：

```
 def jinja2(self):
       j.environment.globals['humanize_time']= humanize_time
       return j 
```

然后用我们想要在模板中传递的数据调用它，如下所示：

```
{{ humanize_time(f.last_post_time) }} 
```

# image - SVG：拉伸图像

> ID：12464101
> 
> 赞同：43
> 
> 时间：2012-09-17T17:13:44.143
> 
> 标签：image, svg

我正在玩 SVG 教程，我只是加载了这样的图像：

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">

<svg style="stroke-linejoin:round; stroke:black; stroke-width:0.5pt; text-anchor:middle; fill:none" xmlns="http://www.w3.org/2000/svg" font-family="Helvetica, Arial, FreeSans, Sans, sans, sans-serif" height="400px" width="400px" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 250 250">
    <rect y="0" x="0" height="250" width="250" stroke="black"  stroke-width="1" fill="blue" />
    <image y="0" x="0" height="250" width="250" xlink:href="http://www.blueprintmodel.co.uk/images/DSCF1438.jpg" />
</svg> 
```

即使高度和宽度相同，我也会在 viewBox 的中心通过“矩形”获得图像。我的问题是：

*   如何将图像拉伸为矩形大小？
*   为什么“图像”标签中的“高度”不起作用？
*   我可以使用像“拉伸”或“调整大小”这样的转换吗？（我找不到它们）

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-09-17T17:18:39.510

[`preserveAspectRatio="none"`](http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute)在 SVG 元素上设置：

```
<svg viewBox="0 0 500 500" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" > 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-08-06T23:58:45.373

也可以使用纯 CSS 缩放和更改 SVG 的纵横比：

`transform: scale(x, y);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-10-05T11:41:05.220

# c# - 列表未修改但错误：集合已修改；枚举操作可能无法执行

> ID：12464111
> 
> 赞同：0
> 
> 时间：2012-09-17T17:14:10.610
> 
> 标签：c#, c#-3.0

我有以下变量

```
public IEnumerable<SelectListItem> SelectedGroups { get; set; }
Dictionary<string,string> grpsList; 
```

下面是我的迭代

```
if(condition)
 viemodel.SelectedGroups = selectlist1;
else
  viemodel.SelectedGroups = selectlist2;

foreach (var item in viemodel.SelectedGroups) <<--Error message
       grpsList.Remove(item.Value); 
```

我没有修改 selectedgroups 而是将其用作从 grpsList 中删除的参考，但它在 foreach 声明中失败。

* * *

**添加了代码**，selectlist1 包含对 grpsList 的引用，类似这样（删除了附加连接和所有其他代码）

```
from g in grpsList
select g).ToSelectList(g => g.Value, g => g.Key); 
```

selectlist2 是不同的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:22:33.397

最有可能`SelectedGroups`指向一个涉及`grpsList`. 为避免此问题，请`.ToList()`在分配到`SelectedGroups`. （您仍然可以将属性签名保留为`IEnumerable<SelectListItem>`）

使用您添加的代码：

```
from g in grpsList
select g).ToSelectList(g => g.Value, g => g.Key).ToList(); <-- here 
```

请注意，如果您不执行`ToList()`linq 表达式，则每次迭代 Enumerator 时都会评估完整的 linq 语句。这可能会导致许多不必要的性能问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T17:24:16.413

你可以试试

```
foreach (var item in viemodel.SelectedGroups.ToList<SelectListItem>()) 
{
       grpsList.Remove(item.Value);
} 
```

# ajax - Joomla 插件 ajax 连接，数据库错误

> ID：12464113
> 
> 赞同：0
> 
> 时间：2012-09-17T17:14:12.160
> 
> 标签：ajax, plugins, joomla

我正在继续我的插件开发传奇.. 所以我已经纠正了我在 previuos 代码中犯的所有错误 ->[使用 joomla 方法会阻止文件在插件中工作](https://stackoverflow.com/questions/12448245/use-of-joomla-methods-stops-file-to-work-in-plugin#comment16744736_12448245)

现在我认为我做的一切都很好，但是数据库查询不起作用。我不知道这里出了什么问题，数据库查询对我来说看起来不错

```
<?php
// Set flag that this is a parent file
define('_JEXEC', 1);

// No direct access.
defined('_JEXEC') or die;

define( 'DS', DIRECTORY_SEPARATOR );

define('JPATH_BASE', dirname(__FILE__).DS.'..'.DS.'..'.DS.'..'.DS.'..' );

require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
jimport( 'joomla.database.database' );

$db = JFactory::getDbo();

if(JRequest::getInt('id'))
{

$id = JRequest::getInt('id');
$name = JRequest::getVar('name');

$query = "update #__messages set $name=$name+1 where id='$id'";
$db->setQuery( $query );
$db->query( $query ) or die('blogai');

?>
<div style="margin-bottom:10px">
<b>Ratings for this blog</b> ( <?php echo $total; ?> total)
</div>
<table width="700px">

<tr>
<td width="30px"></td>
<td width="60px"><?php echo $up_value; ?></td>
<td width="600px"><div id="greebar" style="width:<?php echo $up_per; ?>%"></div></td>
</tr>

<tr>
<td width="30px"></td>
<td width="60px"><?php echo $down_value; ?></td>
<td width="600px"><div id="redbar" style="width:<?php echo $down_per; ?>%"></div></td>
</tr>

</table>

<?php

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:54:31.837

试试这个..它对我有用

```
define( '_JEXEC', 1 );
chdir("../../");
getcwd();
define('JPATH_BASE', getcwd() );

define( 'DS', DIRECTORY_SEPARATOR );

require_once (JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

global $mainframe;

$mainframe =& JFactory::getApplication('site');
$mainframe->initialise();

$db         =  JFactory::getDBO(); 
```

# javascript - 您如何设置外部 Javascript 代码可配置？

> ID：12464114
> 
> 赞同：1
> 
> 时间：2012-09-17T17:14:13.030
> 
> 标签：javascript

我在一个外部文件中有一些 Javascript 代码，它将供人们在他们自己的网站上使用......所以我想要一些方法让他们能够传递多个选项......我该怎么做？

对不起，更多信息：

我会给他们 html + script + css 来加载：

```
 <div class="mywidget"></div>
    <script src="app.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" /> 
```

在脚本中（一些代码）：

```
 var App = {

            init: function(){

                /* ----------------------------
                    On initialization....
                ---------------------------- */

                    App.doStuff(), App.doMoreStuff();

                },
                doStuff: function(){
                  alert('hi');
                }
            } 
```

所以我基本上希望他们能够自定义我的应用程序的工作方式......所以假设我希望他们自定义警报或任何其他数量的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:21:59.090

像 jQuery 一样做。有一个选项对象的参数，如果没有传递，则默认选项：

```
var yourFunc = function (options) {
    options = $.extend({
        prop1: 'default1',
        prop2: 'default2'
    }, options || {});

    // do stuff with options
}; 
```

如果您不使用 jQuery，您可以`$.extend`通过循环遍历属性并在它们未定义时替换它们来轻松存根。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T17:22:16.113

标准解决方案（例如由 jQuery 使用）是在您的函数（或配置函数）中仅接收一个参数作为参数，作为 map 处理：

```
 func veryFreeFunction(opts) {
      opts = opts || {}; 
      var a = opts.a || "default_a";
      var b = opts.b || "default_b";
      ...
   } 
```

在这种情况下，用户可以调用`veryFreeFunction();`或`veryFreeFunction({b:"test"});`。他只会传递他需要的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T17:23:42.073

我相信这类事情的标准是将 JSON 对象传递给库的静态函数或对象构造函数，然后将输入参数与库的默认参数合并。

例如：

```
// Your library
function myLibObj(options){
    var default_options = {
         opt_1: "abc",
         opt_2: "def"
    };

    // Merge options
    $.extend(default_options, options);
}

var newObj = new myLibObj({opt_1: "ghi"});
// Now in this newObj, the options will look like {opt_1: "ghi", opt_2: "def"} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T17:23:43.467

一种方法是让外部文件查找脚本标记本身中的配置块：

```
 <script type="text/javascript" src="myfile.js">
    var mySettings = {
            instanceName: 'homepage',
            cfg: {
                containerId: 'homepage-slide',
                columnsCount: 6,
                placeholder: true,
            }
    }

    </script> 
```

# php - 安全图像下载

> ID：12464119
> 
> 赞同：2
> 
> 时间：2012-09-17T17:14:25.737
> 
> 标签：php, security, file

我一直在研究如何安全地上传图片，并且很明显，实际提供图片是最有风险的地方，因为恶意 PHP 文件可能会危及服务器。

许多人建议使用图像处理脚本，例如 getimage.php?i=575748，它会在数据库 575748 中查找并实际返回 myphoto.jpg（用户不知道原始图像的位置）更安全。

任何人都可以指出我应该在脚本中实施什么样的事情的正确方向吗？我知道设置内容类型标头是必须的，但这足以阻止代码执行吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:29:45.643

将上传文件夹放在根文件夹之外（即，在 /www/ 或 /htdocs/ 或 /httpdocs/ 文件夹之外）是为了一件事。设置文件夹的权限，以便只有本地用户可以写入。

至于数据库的想法，你绝对可以继续做，结合上面提到的想法，应该会产生一个相当安全的图像上传服务。

唯一涉及的风险是当您没有在要上传到的文件夹上设置正确的权限时，这确实可能会危及服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:30:34.490

啊，我明白了。如果您不想让它们在文件系统中浮动，您也可以将图像存储在数据库中。无论您喜欢哪种方式。使用脚本而不是 Apache 来提供图像的问题是图像必须加载到内存中。因此，请为性能影响做好准备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T17:37:16.637

> 并且很明显，实际提供图像是大部分风险在于可能危及服务器的流氓 PHP 文件

仅当满足两个条件时才会发生这种情况：

*   您允许上传非图像文件
*   下载是通过直接链接完成的

挫败其中之一，危险就消失了。当然关闭两者更好。

数据库解决方案旨在破坏条件＃2，但您也可以在上传图像时检查它是否确实是使用该`getImageSize()`功能的图像。或尝试使用`imageCreateFromJPEG()`或其他适当的功能加载图像。

如果加载的对象不是图像，则只显示“对不起，图像已损坏”。这既可以保护您的用户免于上传损坏的图像，也可以保护您免于有人上传流氓 PHP 文件（或者可能是受版权保护的视频或破解的可执行文件或......）。

**更新**：您还可以混淆已经存在的上传和下载工具：

假设当前您上传用户图像，为其分配唯一 ID，将其另存为，并作为 URL`./images/UNIQUEID.jpg`提供给用户。`http://www.yoursite.com/images/UNIQUEID.jpg`

*   您应用 a`.htaccess`以便将访问`./images/whatever`重定向到`./images/index.php?ID=whatever`
*   您创建一个`index.php`脚本，它接受“任何”、提取图像 ID 并输出图像。

所有旧的 URL 将继续工作，并且*似乎*直接加载图像，但它们实际上正在做的是调用一个 PHP 脚本来检查图像并将其作为字节流发送，而不进行解释。

您需要设置图像文件`ETag`的 ID、`Last-Modified`图像`file_mtime()`文件和`Content-Length`文件大小。此外，您可能需要检查传入的标头`If-Modified-Since`，并且`If-None-Match`：如果文件的日期对应于 IMS 或 IFN 值对应于 ID，则可以发送`HTTP/304 Not Modified`答案而不是图像，从而节省大量带宽。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T17:39:26.270

解决您最初的安全问题，在图像存储之前对图像运行[getimagesize()](http://php.net/manual/en/function.getimagesize.php)`false` - 如果您退出该功能，请将其丢弃。（如果有人知道防止不良“图像”通过的更好解决方案，我全神贯注！）

将图像存储在 Web 可访问目录之外的文件系统上。使用物理位置的密钥表是一个好主意。将`IMAGETYPE_XXX`值与它一起存储（它是由 返回的数组的第二个索引`getimagesize()`）并打开它以使用[imagejpeg()](http://php.net/manual/en/function.imagejpeg.php)、[imagepng()](http://php.net/manual/en/function.imagepng.php)等提供图像。当你这样做时不要忘记设置你的 Content-type 标题.

# twitter - Twitterizer Web 应用程序身份验证

> ID：12464122
> 
> 赞同：1
> 
> 时间：2012-09-17T17:14:34.120
> 
> 标签：twitter, oauth, feed, tweets, twitterizer

我们有一个具有自定义 Twitter 提要页面的 Web 应用程序。我们使用**Twitterizer**来获取基于 Twitter 处理程序集合的所有推文。**这只是来自其他 Twitter 用户的推文的公开列表**。因此，我们**不需要与查看此页面的用户进行交互，例如回复推文、转推或发送推文**。据我们了解，我们需要 OAuth 才能使用 ConsumerKey 和 ConsumerSecret 令牌连接到 twitter。要获取令牌，我们需要在 twitter 中设置一个 Web 应用程序：

[https://dev.twitter.com/apps](https://dev.twitter.com/apps)

所以我们做了一个，我们使用 ConsumerKey 和 ConsumerSecret 来让我们的 web 应用程序进行身份验证。

```
 OAuthTokenResponse requestTokenResponse = OAuthUtility.GetRequestToken(
        ConfigurationManager.AppSettings["Twitter.ConsumerKey"],
        ConfigurationManager.AppSettings["Twitter.ConsumerSecret"],
        callbackUrl);
    string authUrl = OAuthUtility.BuildAuthorizationUri(requestTokenResponse.Token, true).AbsoluteUri;
    Response.Redirect(authUrl); 
```

看来我们目前拥有的这种设置不是我们需要的过程。从外观上看，这就像试图使用另一个 twitter 帐户获得与 twitter 的连接。我们不希望此过程有任何登录。就像我说的，我们只想根据一组推特处理程序生成推文列表。

我们注意到的是，当用户第一次查看这个自定义 twitter 提要页面时，用户会被发送到 twitter 中要求他们登录的另一个页面。我们不希望用户查看我们的自定义 Twitter 提要页面来登录。有没有办法消除这个过程？如果是这样，我们如何使用 Twitterizer 或任何替代方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:39:12.587

在 Twitter API 的 1.0 版中，您无需进行身份验证即可阅读公共推文。例如[，此调用](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)可用于获取特殊用户的公开推文。

对于新版本 1.1，请参见例如[这个问题](https://stackoverflow.com/q/12459344/1467115)。

Twitterizer 目前只实现了 1.0 版本，但由于您不需要通过 OAuth 进行身份验证，您可以直接向 Twitter 发出 GET 请求，无需任何特殊库。

# php - Windows 上的 PHP exec - php cwd 是 Windows 网络共享

> ID：12464124
> 
> 赞同：2
> 
> 时间：2012-09-17T17:14:48.637
> 
> 标签：php, windows, iis, exec, unc

这是我的第一篇文章，如果没有以最佳方式措辞或结构，我想提前道歉。

我正在使用带有 IIS 7.5 和 PHP 5.3 的 Windows7 Home Premium 我正在 php 中执行以下代码，但它不起作用。exec 命令返回 1 和一个空数组。

```
$path = "\\\\somecomputer\\somepath\\afolder";
chdir($path);
$cmd = "pushd $path";
exec("echo off & $cmd & \"c:/bfolder/somexecutable.exe\" -flag1 -flag2 \"$inputfile\" > outputfile.log", $retary, $retval);
print_r($reary);
print $retval; 
```

但是，如果我在 exec 调用之前不 chdir 到网络路径，那么一切正常。似乎当 php cwd 设置为网络路径时，从那时起启动的任何 exec 都会失败。

总而言之，我需要 c:\afolder\win32\pdftotext.exe 使用 exec 从 PHP 运行并从网络共享读取它的输入文件并在 Windows 网络位置上写入其输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:47:12.690

我不确定我是否完全理解您的问题，但有些事情可能会有所帮助。

运行 iis 的帐户（应用程序池身份和/或身份验证）是否有权访问网络共享？尝试使用真实用户而不是系统帐户。

可以在exec调用中直接使用unc路径作为参数吗（是否需要调用chdir()）？

你的 print_r($reary) 应该是 print_r($retary)

将 ." 2>&1" 添加到在 shell 上执行的命令的末尾，通常会返回一些对调试有用的输出。例如，这是我们用于在 windows 命令行上执行的方法：

```
 /**
* Execute the command - remember to provide path to the command if it is not in the system path
* 
* @param string $command The command to execute through the Windows command line
* @param string &$output This is any output returned from the command line
* @return int The return code 0 normally indicates success.
*/
static public function Execute($command, &$output)
{
     $out = array();
     $ret = -1;

     exec($command." 2>&1",$out,$ret);         

     foreach($out as $line)
     {
        $output.= $line;
     } 
     return $ret;            
} 
```

使用如下：

```
$output = '';
if(WindowsUtiliy::Execute('shell command', $output) != 0)
{
    die($output);
} 
```

对不起，如果我错过了重点！

# sqlite - iOS 应用程序和表 ID 中的 SQLite DB

> ID：12464125
> 
> 赞同：1
> 
> 时间：2012-09-17T17:14:56.940
> 
> 标签：sqlite

通过遵循一些教程，我设法在 iOS 应用程序中创建了一个 SQLite 数据库。我最初期望依赖主键。当时我不知道在 SQLite 中删除或重新创建主键是不可能的，现在我的应用程序很大，为了让它工作，我需要主键保持“有序”。

我正在开发一个任务管理器作为练习，我将数据直接从数据库加载到 TableView，当我删除一行时，我需要修复主键索引。

目前，当我删除一行时会发生这种情况：

```
ID TXT STAT
1 some_text 1
2 some_text 1
4 some_text 1 
```

正如您`ID`在删除该行后看到的主键正在跳转一个数字，我怎样才能使其再次变为 1 2 3 等...？

我真的不在乎您提出的解决方案是否浪费了大量资源，这只是一个练习，我需要它工作：D（我不会再犯这个错误了！）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:44:36.617

首先，将所有 ID 增加一个大于任何已使用 ID 的偏移量：

```
UPDATE mytab SET ID = ID + 1000 
```

然后将 ID 设置为最多此一条的记录数：

```
UPDATE mytab SET ID = (SELECT COUNT(*) FROM mytab t2 WHERE t2.ID <= mytab.ID) 
```

（第一个原因`UPDATE`是为了避免一个记录的新 ID 与另一个记录的旧 ID 相同的冲突。）

# xml - xml 中命名空间的替代方案

> ID：12464130
> 
> 赞同：0
> 
> 时间：2012-09-17T17:15:21.640
> 
> 标签：xml, xml-parsing, xml-serialization, xsd

我有一个网络服务，它为我们的许多客户提供 xml 提要，我们的客户在不同类型的设备中使用 xml。在我们的 XML 中，我们也有一些命名空间。但是我们的一个客户由于末端的一些限制而无法检测到命名空间。但我也无法为他提供新的 xml。请给我一些建议，这样我就可以在不使用命名空间的情况下满足命名空间的需求，这样我就可以将我的 xml 更改为可供所有人使用。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T21:36:11.663

```
But one of our clients can't detect namespaces because of some limitation at their end. 
```

在努力解决它之前，需要更多地了解限制是什么。由于命名空间感知的 XML 解析器非常普遍，它们工作的环境一定很奇怪，也许处理命名空间的能力不是它的唯一限制？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:17:30.280

一种可能性是使用样式表 ( [XSLT](http://www.w3.org/TR/xslt) / `xsltproc`) 自动将包含名称空间的 xml 格式转换为另一种格式，从而剥离名称空间。在这种情况下，样式表将非常简单（只有几行）并且易于维护。生成的文档只是没有命名空间的旧文档的*副本*，因此它基本上保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:57:55.203

我只是应用了一个字符串替换机制来替换所有的`:`符号，`_`现在我可以在客户端解析它了。

# c# - restsharp 不成功的帖子

> ID：12464134
> 
> 赞同：4
> 
> 时间：2012-09-17T17:15:35.780
> 
> 标签：c#, rest, restsharp

我正在尝试使用 restsharp 使用休息服务（wcf）

这是我的服务

```
 [ServiceContract]
    public interface IService
    {
        [OperationContract]
        [WebInvoke(Method="POST", UriTemplate = "/PEmploy", ResponseFormat = WebMessageFormat.Xml, RequestFormat = WebMessageFormat.Xml)]
        Employee PostGetEmploy(Employee emp);
    }

    [DataContract]
    public class Employee
    {
        [DataMember]
        public int EmpNo { get; set; }
        [DataMember]
        public string EmpName { get; set; }
        [DataMember]
        public string DeptName { get; set; }
    } 
```

这就是我所说的

```
 var client = new RestClient("http://localhost:14437/Service.svc");
    var request = new RestRequest("XmlService/PEmploy", Method.POST);
    myRef.Employee emp = new myRef.Employee() { EmpNo = 101, EmpName = "Mahesh", DeptName = "CTD" };
    request.AddParameter("Employee", emp);
    RestResponse<myRef.Employee> response = (RestResponse<myRef.Employee>)client.Execute<myRef.Employee>(request); 
```

这是我得到的例外

```
 Exception:Caught: "Data at the root level is invalid. Line 1, position 1." (System.Xml.XmlException)
    A System.Xml.XmlException was caught: "Data at the root level is invalid. Line 1, position 1." 
```

我试过序列化，但仍然有同样的异常。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T19:45:46.933

我添加了

```
request.RequestFormat = DataFormat.Json 
```

这成功了。

**完整代码**

```
var client = new RestClient("http://localhost:14437/Service.svc");
var request = new RestRequest("XmlService/PEmploy", Method.POST);
request.RequestFormat = DataFormat.Json;
myRef.Employee emp = new myRef.Employee() { EmpNo = 101, EmpName = "Mahesh", DeptName = "CTD" };
request.AddParameter("Employee", emp);
RestResponse<myRef.Employee> response = (RestResponse<myRef.Employee>)client.Execute<myRef.Employee>(request); 
```

# cuda - cuda 三重黎曼和

> ID：12464136
> 
> 赞同：1
> 
> 时间：2012-09-17T17:15:48.917
> 
> 标签：cuda

我正在尝试通过 cuda 执行三重黎曼和。我正在尝试将多维网格迭代器用于我的 sum 迭代器以避免嵌套循环。我使用的是 2.0 telsa 卡，因此无法使用嵌套内核。

对于我需要的每个 x,y,z 变量，我似乎没有得到完整的 0 -> N 迭代。

```
__global__ void test(){
uint xIteration = blockDim.x * blockIdx.x + threadIdx.x;
uint yIteration = blockDim.y * blockIdx.y + threadIdx.y;
uint zIteration = blockDim.z * blockIdx.z + threadIdx.z;
printf("x: %d * %d + %d = %d\n y: %d * %d + %d = %d\n z: %d * %d + %d = %d\n", blockDim.x, blockIdx.x, threadIdx.x, xIteration, blockDim.y, blockIdx.y, threadIdx.y, yIteration,  blockDim.z, blockIdx.z, threadIdx.z, zIteration);
} 
```

---- 由 ----- 调用

```
int totalIterations = 128; // N value for single sum (i = 0; i < N)
dim3 threadsPerBlock(8,8,8);
dim3 blocksPerGrid((totalIterations + threadsPerBlock.x - 1) / threadsPerBlock.x, 
                   (totalIterations + threadsPerBlock.y - 1) / threadsPerBlock.y, 
                   (totalIterations + threadsPerBlock.z - 1) / threadsPerBlock.z);
test<<<blocksPerGrid, threadsPerBlock>>>(); 
```

- - 输出 - - -

```
x   y   z
...
7 4 0
7 4 1
7 4 2
7 4 3
7 4 4
7 4 5
7 4 6
7 4 7
7 5 0
7 5 1
7 5 2
7 5 3
7 5 4
7 5 5
7 5 6
7 5 7
7 6 0
7 6 1
7 6 2
7 6 3
7 6 4
7 6 5
7 6 6
7 6 7
7 7 0
7 7 1
7 7 2
7 7 3
7 7 4
7 7 5
7 7 6
7 7 7
... 
```

输出被截断，我现在得到每个排列，对于 0 < x,y,z < 7，但是当 totalIterations 为 128 时我需要 0 < x,y,z < 127。例如，在这个执行中，40 < z < 49 , 它应该是 0 <= z <= 127。我对多重暗淡网格的理解可能是错误的，但是对于黎曼，每个迭代器 x、y 和 z 必须具有 0 到 127 的值。

此外，如果我让 totalIterations > 128，例如 1024，程序以 6 的 cudaError 代码终止，我理解这是启动计时器到期。内核除了打印什么都不做，所以我不明白为什么它会超时。在辅助设备上运行它似乎暂时消除了这个问题。我们正在使用其中一个特斯拉来运行 X，但邮件中的 geforce 将成为新的显示设备，以释放两个特斯拉进行计算。

printf(...) 将被要求和的函数的执行所取代。

这个想法是替换的序列号版本

```
for (int i = 0...)
    for (int j = 0 ..)
       for (int k = 0...) 
```

我也不确定如何存储函数值，因为创建一个潜在的巨大（数百万 x 数百万 x 数百万）3D 数组然后减少它似乎没有内存效率，而是以某种方式将函数值连接到某种共享多变的。

---- 设备信息（我们有 2 个这些卡，两者的输出相同----

```
Device 1: "Tesla C2050"
  CUDA Driver Version / Runtime Version          5.0 / 5.0
  CUDA Capability Major/Minor version number:    2.0
  Total amount of global memory:                 2687 MBytes (2817982464 bytes)
  (14) Multiprocessors x ( 32) CUDA Cores/MP:    448 CUDA Cores
  GPU Clock rate:                                1147 MHz (1.15 GHz)
  Memory Clock rate:                             1500 Mhz
  Memory Bus Width:                              384-bit
  L2 Cache Size:                                 786432 bytes
  Max Texture Dimension Size (x,y,z)             1D=(65536), 2D=(65536,65535), 3D=(2048,2048,2048)
  Max Layered Texture Size (dim) x layers        1D=(16384) x 2048, 2D=(16384,16384) x 2048
  Total amount of constant memory:               65536 bytes
  Total amount of shared memory per block:       49152 bytes
  Total number of registers available per block: 32768
  Warp size:                                     32
  Maximum number of threads per multiprocessor:  1536
  Maximum number of threads per block:           1024
  Maximum sizes of each dimension of a block:    1024 x 1024 x 64
  Maximum sizes of each dimension of a grid:     65535 x 65535 x 65535
  Maximum memory pitch:                          2147483647 bytes
  Texture alignment:                             512 bytes
  Concurrent copy and execution:                 Yes with 2 copy engine(s)
  Run time limit on kernels:                     No
  Integrated GPU sharing Host Memory:            No
  Support host page-locked memory mapping:       Yes
  Concurrent kernel execution:                   Yes
  Alignment requirement for Surfaces:            Yes
  Device has ECC support enabled:                Yes
  Device is using TCC driver mode:               No
  Device supports Unified Addressing (UVA):      Yes
  Device PCI Bus ID / PCI location ID:           132 / 0
  Compute Mode:
     < Default (multiple host threads can use ::cudaSetDevice() with device simultaneously) > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:41:55.217

我认为正如已经提到的那样，在设备代码中使用 printf 来验证 (x,y,z) 数组中的每个元素是否已被线程触及对于较大的 x,y,z 值是不明智的。

我根据您的代码创建了以下内容，以证明每个元素 x,y,z 都被线程触及：

```
#include <stdio.h>
#define DATAVAL 1
#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

__global__ void test(int *data, int dim){
  uint xIteration = blockDim.x * blockIdx.x + threadIdx.x;
  uint yIteration = blockDim.y * blockIdx.y + threadIdx.y;
  uint zIteration = blockDim.z * blockIdx.z + threadIdx.z;

  data[((((zIteration*dim)+yIteration)*dim)+xIteration)]=DATAVAL;
}

int main(){
  int *testdata;
  int *result;
  int totalIterations = 128; // N value for single sum (i = 0; i < N)
  int testsize = totalIterations*totalIterations*totalIterations;
  dim3 threadsPerBlock(8,8,8);
  dim3 blocksPerGrid((totalIterations + threadsPerBlock.x - 1) / threadsPerBlock.x,  (totalIterations + threadsPerBlock.y - 1) / threadsPerBlock.y,  (totalIterations + threadsPerBlock.z - 1) / threadsPerBlock.z);
  cudaMalloc(&testdata, testsize*sizeof(int));
  cudaCheckErrors("cudaMalloc fail");
  cudaMemset(testdata, 0, testsize*sizeof(int));
  cudaCheckErrors("cudaMemset fail");
  result=(int *)malloc(testsize*sizeof(int));
  if (result == 0) {printf("malloc fail \n"); return 1;}
  memset(result, 0, testsize*sizeof(int));
  test<<<blocksPerGrid, threadsPerBlock>>>(testdata, totalIterations);
  cudaDeviceSynchronize();
  cudaCheckErrors("Kernel launch failure");
  cudaMemcpy(result, testdata, testsize*sizeof(int), cudaMemcpyDeviceToHost);
  cudaCheckErrors("cudaMemcpy failure");

  for (unsigned i=0; i<testsize; i++)
    if (result[i] != DATAVAL) {printf("fail! \n"); return 1;}

  printf("Success \n");
  return 0;

} 
```

# javascript - javascript图像滑块

> ID：12464140
> 
> 赞同：0
> 
> 时间：2012-09-17T17:16:14.580
> 
> 标签：javascript, image, slide, effect

大家好，我是新手 JavaScript 编码器。

我试图制作一个 JavaScript 图像滑块，经过很长时间我编写了一些代码，但是在中途我遇到了一个问题，那就是滑块在最后一个滑动元素上中断。

我无法弄清楚问题是什么，也许有人可以帮助我。

[由于某些原因我不能使用 Jquery]

对不起，我的英语不好。

我的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title>Slider</title>
        <script type="text/javascript">
            window.onload = function () {
                var Slider = document.getElementById('Slider');
                var SliderContent = document.getElementById('Slider-Content');
                var Contents = SliderContent.childNodes;
                var Slides = new Array();
                var SlidesP = new Array();
                (function SliderCSS () {
                    Slider.style.width = '500px';
                    Slider.style.height = '200px';
                    Slider.style.backgroundColor = '#F9F9F9';
                    Slider.style.border = '5px solid #F1F1F1';
                    Slider.style.position = 'relative';
                    Slider.style.margin = '0px auto';
                })();
                (function SliderContentCSS () {
                    SliderContent.style.position = 'absolute';
                    SliderContent.style.overflow = 'hidden';
                    SliderContent.style.width = '100%';
                    SliderContent.style.height = '100%';
                })();
                for(var s = 0, e = 0; s < Contents.length; s++) {
                    var _this = Contents[s];
                    if (_this.nodeType === 1) {
                        _this.style.cssText = 'position: absolute;px;width: 100%;height: 100%;';
                        _this.style.left = _this.offsetWidth * e + 'px';
                        e++;
                        Slides[e] = _this;
                    }
                }
                var Length = Slides.length - 1;
                function Position () {
                    for (var i = 1; i < Slides.length; i++) {
                        SlidesP[i] = Slides[i].offsetLeft;
                    }
                }
                function Attr (cslide) {
                    for (var i = 1; i < Slides.length; i++) {
                        Slides[i].removeAttribute('Slide');
                    }
                    Slides[cslide].setAttribute('Slide', cslide);
                }
                var c = 1;
                var Started = false;
                function Slide () {
                    if (Started === true) {
                        console.log('Timeout');
                        return false;
                    };
                    Position();
                    Attr(c);
                    console.log(SlidesP);
                    var A = 0;
                    (function Start() {
                        console.log(A < Slides[c].offsetLeft);
                        console.log(A + '<' + Slides[c].offsetLeft + ':' + c);
                        if (A < Slides[c].offsetLeft) {
                            A = A + 25;
                            for (var i = 1; i < Slides.length; i++) {
                                Slides[i].style.left = SlidesP[i] - A + 'px';
                            }
                            Started = true;
                            setTimeout(Start, 35);
                        } else {
                            Started = false;
                        }
                    })();
                    if (c < Length) {
                        c++;
                    } else {
                        c = 1;
                    }
                };
                setInterval(Slide, 2000);
            }
        </script>
    </head>
    <body>
        <div id='Slider'>
            <div id='Slider-Content'>
                <div>1</div>
                <div>2</div>
                <div>3</div>
                <div>4</div>
            </div>
        </div>
    </body>
</html> 
```

在 jsFiddle [http://jsfiddle.net/WzCNQ/1/](http://jsfiddle.net/WzCNQ/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:29:09.580

您的代码不断将元素向左推，您应该在循环结束时将它们重置为初始位置。

# iphone - 检查 Game Center 成就进度是否正确？

> ID：12464141
> 
> 赞同：0
> 
> 时间：2012-09-17T17:16:18.987
> 
> 标签：iphone, ios, ipad, xcode4, game-center

我希望我的应用程序检查成就是否完成，我写了下一个：

```
-(void)checkAchievements{
    NSString* identifier = NULL;
    double percentComplete = 0;
    if (self.SavedScore >= 100) {
        identifier = kAchivement100Taps;
        percentComplete = 100.0;
    }

    if (self.SavedScore >= 500) {
            identifier = kAchivement500Taps;
            percentComplete = 100.0;
    }

    [...more similar achievements...]

    if(identifier!= NULL){
        [self.gameCenterManager submitAchievement: identifier percentComplete: percentComplete];
    }
} 
```

这种方法正确吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:26:47.533

这是检查成就是否完成的正确方法：

```
- (void) loadAchievements
{
    [GKAchievement loadAchievementsWithCompletionHandler:^(NSArray *achievements, NSError *error)
        {
            if (error == nil)
            {
                for (GKAchievement* achievement in achievements)
                    GKAchievement *gkAchmt = [[[GKAchievement alloc] initWithIdentifier: achievement.achievementId] autorelease];

                    if (gkAchmt.isCompleted) {
                        // This achievement is achieved.
                    }

            }
        }];
} 
```

因此，如果您要在数组中同步您的成就，您可以执行以下操作：

```
for (Achievement *achievement in arrAchievementsToSync) {
    GKAchievement *gkAchmt = [[[GKAchievement alloc] initWithIdentifier: achievement.achievementId] autorelease];

    if (!gkAchmt.isCompleted) {
        [self submitAchievement:gkAchmt percentComplete:100.0f];
    }
} 
```

# unit-testing - 如何使用 phpunit 对无效参数进行单元测试？

> ID：12464145
> 
> 赞同：4
> 
> 时间：2012-09-17T17:16:43.777
> 
> 标签：unit-testing, phpunit

我只是在学习单元测试。这个php代码

```
class Foo {
    public function bar($arg) {
        throw new InvalidArgumentException();
    }
} 
```

...

```
class FooTest extends PHPUnit_Framework_TestCase {
    public function testBar() {
        $this->setExpectedException('InvalidArgumentException');
        $dummy = Foo::bar();
    }
} 
```

`Failed asserting that exception of type "PHPUnit_Framework_Error_Warning" matches expected exception "InvalidArgumentException".`从 phpunit失败。如果在测试中放置了任何值，`Foo::bar()`那么它当然会按预期工作。有没有办法测试空参数？还是我错误地尝试为不应该在单元测试范围内的东西创建测试？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T09:37:54.820

你不应该测试这种情况。单元测试的目的是确保被测类根据其“契约”执行，这是它的公共接口（函数和属性）。你试图做的是打破合同。正如您所说，它超出了单元测试的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T16:58:38.903

我同意合同测试中的“yegor256”。然而，有时我们有可选的参数来使用先前声明的值，但如果它们没有设置，那么我们就会抛出异常。下面显示了您的代码的略微修改版本（简单示例，不好或生产就绪）和测试。

```
class Foo {
    ...
    public function bar($arg = NULL)
    {
        if(is_null($arg)        // Use internal setting, or ...
        {
                  if( ! $this->GetDefault($arg)) // Use Internal argument
                  {
                       throw new InvalidArgumentException();
                  }
        }
        else
        {
            return $arg;
        }
    }
}

...
class FooTest extends PHPUnit_Framework_TestCase {
    /**
     * @expectedException InvalidArgumentException
     */
    public function testBar() {
        $dummy = Foo::bar();
    }

    public function testBarWithArg() {
        $this->assertEquals(1, Foo:bar(1));
    }
} 
```

# python - z3py：在求解器上应用策略

> ID：12464146
> 
> 赞同：1
> 
> 时间：2012-09-17T17:16:46.757
> 
> 标签：python, z3

我需要一个支持`push`和`pop`. `SolverFor()`所以我使用该函数生成一个。由于某些断言只是常量断言，例如`a == 2`，我想`propagate-values`在调用之前使用该策略进行简化`solver.check()`。所以我的问题是：

有没有办法在求解器上应用策略？

我知道我可以为`Goal`. 但在我看来，`Goal`不支持`push`and `pop`。

任何评论表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:51:32.317

战术对象仅支持非增量求解。他们也没有提供`push`和`pop`方法。它们主要用于解决不平凡的问题。为方便起见，我们提供了一个将策略对象包装为求解器对象的 API。wrapping 是非常基础的，wrapper 对象保留了一堆断言，每一个`check`都是使用 Wrapped 策略从头开始解决的。

Z3 中的默认`Solver`对象是通用求解器。默认情况下，它执行常量传播。我们可以控制这个求解器设置参数的行为。在未来的版本中，我们将为求解器对象提供额外的控制。我们将能够使用可用策略的子集来自定义求解器对象。

话虽如此，您是对的，该`Goal`对象不支持`push`and `pop`。在内部，`Goal`对象支持以恒定时间运行的复制操作。在内部，共享数据结构用于节省内存。我将在未来的版本中明确公开此功能。请注意，此功能只是节省空间/内存。解决每个目标的努力不会被节省。我说“显式暴露”是因为可以使用以下技巧来模拟功能：

```
def copy_goal(g):
  return Tactic('skip')(g)[0]

x = Int('x')
g = Goal()
g.add(x < 10)
g.add(x > 0)
g1 = copy_goal(g)
g1.add(x != 5)
print g
print g1 
```

上述示例可在以下网址获得：[http ://rise4fun.com/Z3Py/O3RO](http://rise4fun.com/Z3Py/O3RO)

备注：该策略`smt`实现了我上面提到的通用求解器。

# php - 这个功能是服务定位器/容器吗？

> ID：12464152
> 
> 赞同：1
> 
> 时间：2012-09-17T17:17:15.017
> 
> 标签：php, design-patterns

```
function app($key = null, $value = null)
{
    if (null !== $key && null !== $value) {
        $GLOBALS['__app'][$key] = $value;
    }

    return (object) $GLOBALS['__app'];
} 
```

所以，我通常有一个这样的函数，我存储诸如 Request 和 Session 对象之类的东西，以便在我的应用程序的任何地方使用它们。例如：

```
app('req', new Request); 
```

然后我像这样使用它：

```
app()->req->getMethod(); 
```

我的问题是，这到底是什么？此功能是否充当服务定位器和/或服务容器？我正在尝试记录我的代码，但无法解释此代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:19:40.687

它只是一个创建全局（应用程序）变量的哈希映射。它被转换为一个对象，因此您可以使用`app()->req`而不是访问它的值`$map = app(); $value = $map['req']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:22:26.520

它是一个服务容器，您可以在此处找到更多信息：

*   [如果单例不好，那么为什么服务容器是好的？](https://stackoverflow.com/questions/6034748/if-singletons-are-bad-then-why-is-a-service-container-good)

*   [我应该为我的 User 类的唯一实例使用哪种模式？](https://stackoverflow.com/questions/6078562/which-pattern-should-i-use-for-my-unique-instance-of-the-user-class)

它比单例更好，因为你可以注入模拟对象，所以它更易于单元测试

# winapi - 如何使用 Win32 API 以编程方式使其他应用程序静音

> ID：12464153
> 
> 赞同：5
> 
> 时间：2012-09-17T17:17:14.510
> 
> 标签：winapi, audio, mute

我找不到有关此主题的任何有用信息。如果有人能阐明这一点，我将不胜感激。

我几乎完成了为我们公司开发的商务电话应用程序；它将使用无线/有线耳机或特殊的类似 USB 电话的设备，通过这些设备可以播放和接收电话通信的音频。唯一的问题是，如果我们的员工在工作时有嘈杂的网站或玩 Pandora，我需要在他们与电话中的客户打交道时列举并消除所有其他潜在的噪音，甚至是系统噪音。

用户不会以管理员身份运行该软件。

我在大部分 UI 和网络中都使用了 PureBasic。它具有对 Windows API 的简单、本机支持。如果我需要使用 COM，我会使用 C++ (VS2010) 编写小型“插件”应用程序，这些应用程序通过重定向 stdin/out 使用 XML 与 PureBasic 应用程序进行通信。

我已经看到其他与此主题类似的帖子，人们回答说这个想法是个坏主意……并且谈论每个人的应用程序中会发生的事情都与声音设备等发生了战争。但据我所知，这是解决我们问题的唯一可行方案。当我们的客户服务代表与客户通电话时，我们不希望任何音频干扰。

我一直在看 MSDN 上的混音器...() 函数，但我不能完全确定它们是否会工作。因此，如果有人在这方面有经验，很高兴收到他们的来信！

# usb - 如何为 USB 设备 (Kinect) 手动设置 UsbInterface（等时）

> ID：12464156
> 
> 赞同：1
> 
> 时间：2012-09-17T17:17:51.000
> 
> 标签：usb, kinect, libusb, openni, printer-control-language

> **可能重复：**
> [为设备手动设置 USB 传输类型](https://stackoverflow.com/questions/12467192/set-usb-transfer-type-manually-for-a-device)

我使用 openni 在 ARM-Board (Pandaboard ES) 上与我的 Kinect 进行交互。为了让 openni 在这个平台上运行，它需要一些调整，其中之一是手动设置 UsbInterface（在 openni 驱动程序提供的 GlobalDefaults.ini 中）。

现在我想使用 PCL 抓取一些帧，但 PCL 不起作用。我相信 pcl 尝试自行设置 USB 接口并尝试绕过 GlobalDefaults.ini，分别不使用我手动设置的 USB 接口。

我的问题是我是否可以将设备的 USB 接口选项设置为全局同步？我需要更改驱动程序或内核吗？

很高兴得到你的帮助......谢谢

# actionscript-3 - 如何找出模拟方法的参数是什么？

> ID：12464162
> 
> 赞同：1
> 
> 时间：2012-09-17T17:18:25.337
> 
> 标签：actionscript-3, apache-flex, mockito

如果我写这样的东西：

```
verify().that( mockPromise.handleFault( any() )) 
```

它可以很好地告诉我调用了“handleFault”。

但后来我想调用传入的故障处理函数。处理程序将是一个私有函数，因此没有其他方法可以访问它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:35:33.360

在 Java Mockito 中，您正在寻找的功能称为`[ArgumentCaptor](http://docs.mockito.googlecode.com/hg/org/mockito/ArgumentCaptor.html)`. 简而言之，它是一种特殊的`Matcher`（如`any()`），它匹配任何类型的对象并将它“匹配”的对象保存在变量中。

不幸的是，它似乎还[没有在 Flex 中可用](https://groups.google.com/forum/?fromgroups=#!topic/mockito-flex/OS4YQjmIhAM)。

好消息是，如果您愿意，您可能可以在大约`Matcher`15 分钟内编写一个完全执行此操作的接口实现——保存其最新值并返回 true。:)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:07:13.270

根据杰夫的回答，我这样做了：

```
import org.mockito.api.Matcher;

class ArgumentCaptor implements Matcher
{

    private var _value:*;

    public function ArgumentCaptor()
    {
    }

    public function get value():*
    {
        return _value;
    }

    public function describe():String
    {
        return "";
    }

    public function matches(value:*):Boolean
    {
        _value = value;
        return true;
    }
} 
```

可以像这样使用：

```
var argCaptor:ArgumentCaptor = new ArgumentCaptor();
verify().that( mockPromise.handleFault( argThat(argCaptor) ));

argCaptor.value; // the argument 
```

# objective-c - 使用 Xcode Storyboard 从表格视图单元推送到详细视图

> ID：12464164
> 
> 赞同：11
> 
> 时间：2012-09-17T17:18:31.323
> 
> 标签：objective-c, ios, uiviewcontroller, uistoryboardsegue, uitableview

我在视图控制器中有一个表格视图。我可以在表格视图中填充我的所有信息。但是，我对设置详细视图有点迷失。我相信每个表格单元格都需要对每个细节视图进行 segue，但并不完全确定。

这是我的代码。为了完成从表格视图到详细视图的转换，我缺少什么？代码：

```
.h 

@interface DetailViewController : UIViewController <UITableViewDelegate,UITableViewDataSource>  
{ 
    IBOutlet UITableView *myTable;
    NSMutableArray *contentArray;
}

@property (strong, nonatomic) IBOutlet UITableView *myTable;

.m

- (void)viewDidLoad 
{
    contentArray = [[NSMutableArray alloc]init];
    [contentArray addObject:@"Espresso"];
    [contentArray addObject:@"Latte"];
    [contentArray addObject:@"Capicino"];
    [super viewDidLoad];
     // Do any additional setup after loading the view.
}

//Table Information
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [contentArray count];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath 
{

     [tableView deselectRowAtIndexPath:indexPath animated:YES];

     if([[contentArray objectAtIndex:indexPath.row]isEqualToString:@"EspressoViewController"])
     {
         EspressoViewController *espresso = [[EspressoViewController alloc]initWithNibName:@"EspressoViewController" bundle:nil];  
         [self.navigationController pushViewController:espresso animated:YES];
     }
     else if ([[contentArray objectAtIndex:indexPath.row] isEqualToString:@"Latte"])
     {
         LatteViewController *latte = [[LatteViewController alloc] initWithNibName:@"Latte" bundle:nil];
         [self.navigationController pushViewController:latte animated:YES];
     }

}

- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath 
{
    [self tableView:tableView didSelectRowAtIndexPath:indexPath];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"CellIdentifier"];
    }

    NSString *cellValue = [contentArray objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue;

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    cell.textLabel.font = [UIFont systemFontOfSize:16];
    cell.detailTextLabel.text = @"Hot and ready";

    UIImage *image = [UIImage imageNamed:@"coffeeButton.png"];
    cell.imageView.image = image;

    cell.textLabel.text = [contentArray objectAtIndex:indexPath.row];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-24T04:10:57.700

我认为你让这有点太复杂了。别担心，我经常做同样的事情。

首先，通过`tableView:didSelectRowAtIndexPath:`从内部发送，`tableView:accessoryButtonTappedForRowAtIndexPath:`这两种方法没有区别。点击单元格或其附件按钮执行相同的操作。如果您不需要附件按钮来执行与点击单元格本身不同的操作，请将其移除。

其次，如果您使用故事板，则不需要为您的视图控制器分配/initWithNib。相反，使用segue。如果您通过故事板执行此操作，您也不需要以编程方式将 viewControllers 推送到您的 navigationController

首先构建你的故事板：

1.  拖出一个 UITableViewController。确保使用右侧的检查器窗格将拖出的 UITableViewController 的类设置为您自己的“DetailViewController”。
2.  然后选择这个控制器并使用菜单选择“ **Editor** -> **Embed In** -> **Navigation Controller** ”。
3.  接下来，拖出三个通用的 UIViewController。将一个的类设置为“LatteViewController”，将另一个设置为“EspressoViewController”，将第三个设置为“CapicinoViewController”（再次使用检查器）。
4.  Control+从 UITableViewController 拖动到每个 viewController 并选择**PUSH**。
5.  单击 UITableViewController 和每个视图控制器之间箭头上的小圆圈。在检查器（右侧）中，在**Identifier**字段中为每个 segue 指定一个唯一名称。您需要为您的代码记住此名称。我将它们命名为“EspressoSegue”、“LatteSegue”和“CapicinoSegue”。您将在下面的代码中看到原因。

然后将以下代码放入您的 UITableViewController 中：

```
- (void)tableView:(UITableView *)tableView 
didSelectRowAtIndexPath:(NSIndexPath*)indexPath {

//Build a segue string based on the selected cell
NSString *segueString = [NSString stringWithFormat:@"%@Segue",
                        [contentArray objectAtIndex:indexPath.row]];
//Since contentArray is an array of strings, we can use it to build a unique 
//identifier for each segue.

//Perform a segue.
[self performSegueWithIdentifier:segueString
                          sender:[contentArray objectAtIndex:indexPath.row]];
} 
```

如何实现其余部分取决于您。您可能希望`prepareForSegue:sender:`在您的 UITableViewController 中实现，然后使用该方法将信息发送到`segue.destinationViewController`.

请注意，我将 contentArray 中的字符串作为 segue 的发件人传递。你可以通过任何你喜欢的东西。标识单元格的字符串似乎是要传递的最合乎逻辑的信息，但选择权取决于您。

上面发布的代码应该为您执行导航。

# php - Facebook 应用程序 - 如何在应用程序内分享/点赞页面？

> ID：12464170
> 
> 赞同：0
> 
> 时间：2012-09-17T17:18:42.183
> 
> 标签：php, facebook, facebook-graph-api, facebook-like, facebook-sharer

假设我有 Facebook 开发人员部分教程中所示的应用程序：包含食谱的 Cookbook 应用程序。

如果用户使用这个应用程序并创建了一个食谱，我想让他有可能分享（或“喜欢”）这个食谱 => 这意味着，他的墙上将打印出像**User-ABC 这样的消息Name_of_the_recipe**（或共享此食谱的等效名称）。

怎么做？

# java - 从 Java 中的 MS 交换服务器复制公用文件夹

> ID：12464171
> 
> 赞同：0
> 
> 时间：2012-09-17T17:18:42.903
> 
> 标签：java, imap, jakarta-mail, mapi

我目前正在研究以相同的结构将公共文件夹和包含的电子邮件从 MS Exchange Server 2003 复制到窗口资源管理器中的本地目录，因此我将在我的本地驱动器上拥有目录和 .msg 文件。

我对此进行了研究，但不确定要走哪条路。MAPI、Webdav、IMAP、Javamail 等。

我还将创建一个 Java 应用程序来进行复制。也欢迎任何其他软件开发建议（Perl、C++）

执行此操作的最佳协议是什么，并且任何人都可以获得任何链接，我可以在其中对这个主题进行更多研究？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:12:11.993

JavaMail 不能创建 .msg 文件，这是一种专有的 Microsoft 格式，因此如果这是您要求的关键部分，您将需要查看其他内容。

如果 .eml 文件（实际上是 MIME 格式文件）或 Unix 邮件格式文件就足够了，您可以考虑使用 JavaMail。

JavaMail 包含一个演示程序，该程序将邮箱层次结构从一个存储复制到另一个存储。

有几种用于在本地存储消息的选项。

1.  在本地计算机上运行 IMAP 服务器。这可能是最简单的。
2.  使用本地商店提供程序，例如[JavaMail mbox 提供程序或](http://kenai.com/projects/javamail/pages/MboxStore)[JavaMail 第三方产品页面](http://www.oracle.com/technetwork/java/javamail/third-party-136965.html)中的其他此类提供程序。
3.  [使用MimeMessage.writeTo 方法](http://javamail.kenai.com/nonav/javadocs/javax/mail/internet/MimeMessage.html#writeTo%28java.io.OutputStream%29)编写您自己的代码以将每条消息存储到磁盘。

希望有帮助。

# matlab - Matlab ode45 需要很长的工具并在函数 delete(h) 中执行步骤

> ID：12464172
> 
> 赞同：1
> 
> 时间：2012-09-17T17:18:43.960
> 
> 标签：matlab

我对 ode45 有疑问。我已经定义了一个函数并试图通过 ode 解决它，但是当我运行它时，它需要很长时间。我试图在我的函数中显示“t”输入，它显示时间步长是 10^-8 ！[我没有从 ode45 得到任何错误]
所以我在函数的末尾放了一个断点，在我 Step 一次之后，它转到 sym.m 文件并调用 Function delet(h)

```
function dxr=Dynfun(t,x)
...
dxr=[A;B] 
```

在 Step 之后它转到

```
function delete(h)
    if builtin('numel',h)==1 && inmem('-isloaded','mupadmex') && builtin('numel',h.s)==1 && ~isa(h.s,'maplesym')
        mupadmex(h.s,1);
    end
    end 
```

这就是它太长的原因，因为它在那里循环。有什么问题？！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:41:28.680

听起来对我来说这是一个“僵硬”的问题。我建议使用专为解决棘手问题而设计的求解器。我还建议尝试以小步长 ~ 0.001 的固定步长求解器，看看输出是什么样子的。如果你正在闯入`sym.m`，听起来你在那里有一些象征性的逻辑。有没有办法可以将符号表达式转换为[matlab 脚本](http://www.mathworks.com/help/symbolic/matlabfunction.html)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T04:44:16.213

正如 macduff 所指出的，您的问题可能很棘手。尝试`ode15s`（专为解决棘手问题而设计）并查看步长是否仍会减小到无法接受的低值。

如果确实如此，那么您的问题可能包含您给它的初始值的奇点。如果您的问题的维度小于 3，您可以定义一个小`event`函数来深入了解每一步的值，并绘制它们以查看是否确实存在问题。

那么——你真的需要符号数学吗？其背后的哲学是人类更容易阅读，这使得计算机处理起来很糟糕:)如果你可以将它转换成非符号的东西，请这样做——这将显着提高性能。

另外，多提一句，`delete`也是Matlab内置函数。在 Matlab buitins 之后命名您的函数通常是一个坏主意——这会造成混淆，并且在 Matlab 决定使用哪个函数时会导致大量开销。

# c# - .NET Windows 窗体控件中的 ThreadExceptionEventHandler

> ID：12464177
> 
> 赞同：1
> 
> 时间：2012-09-17T17:19:03.090
> 
> 标签：c#, .net, winforms

在 Windows 窗体控件中，我使用了处理异常的 ThreadExceptionEventHandler。不幸的是，如果应用程序使用我的 Windows 窗体控件，则应用程序的异常似乎被我的 Windows 窗体控件的 ThreadExceptionEventHandler 捕获。是否有另一个我可以使用的事件处理程序将 ThreadExceptionEventHandler 的范围限制为仅在我的 Windows 窗体控件中发生的异常？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:24:25.927

通常，UserControl 不应干扰应用程序异常处理。只需照顾您的本地业务，其余的都在手。

如果您的控件启动线程，它们通常应该处理异常。剩下的任何东西都不是 Controls 的责任。

# java - 合成器外观中的默认按钮输入映射？

> ID：12464180
> 
> 赞同：4
> 
> 时间：2012-09-17T17:19:27.817
> 
> 标签：java, swing, look-and-feel, key-bindings, synth

我正在尝试使用 UIManager 来获取和清除一些默认键绑定，以便空格键不会激活我的 JButton，如此[处](https://stackoverflow.com/questions/12133795/removing-default-jbutton-input-map)所述。问题是，可能由于我的合成器外观和感觉，`(InputMap)UIManager.get("Button.focusInputMap");`返回一个`null`. 有谁知道以其他方式轻松清除组件输入映射的方法，或者为什么 UIManager 在这种情况下返回 null ？任何提示表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T09:12:46.007

首先：我喜欢 @David 在另一个答案中建议的装饰 StyleFactory 的想法 :-) - 所以如果可行的话，建议使用这个方向。

无论如何，忍不住尝试一下：看起来 Nimbus（可能还有其他基于 Synth 的 LAF）在生命周期的早期需要这些默认值覆盖*：*只有在实际创建*任何*组件之前完成它们才会接受它们

```
// setting LAF
InteractiveTestCase.setLAF("Nimbus");
// tweak inputMap, immediately after setting the ui is fine
// uncomment the following line and it doesn't work
// new JPanel();
InputMap inputMap = (InputMap) UIManager.get("Button.focusInputMap");
inputMap.put(KeyStroke.getKeyStroke("SPACE"), "do-nothing"); 
```

如果 UIManager 那时没有返回 inputMap，我会认为这是您的自定义 LAF 的不当行为，并会尝试进一步挖掘为什么会发生这种情况。您可以尝试的另一件事是设置一个全新的 inputMap （这将具有在 LAF 切换中幸存下来的优势，因为它不是 UIResource，例如：

```
// setting LAF
InteractiveTestCase.setLAF("Nimbus");
// tweak inputMap, immediately after setting the ui is fine
InputMap inputMap = (InputMap) UIManager.get("Button.focusInputMap");
InputMap custom = new InputMap();
if (inputMap != null) {
    // copy all bindings to custom
    ...
} else {
    // add the binding we know of (as implementation detail)
    custom.put(KeyStroke.getKeyStroke("released SPACE"), "released");
}
// overwrite the binding you want to change
custom.put(KeyStroke.getKeyStroke("SPACE"), "do-nothing");
// set the custom map
UIManager.put("Button.focusInputMap", custom); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T22:52:24.863

我不在计算机附近尝试此操作，但查看[此处](http://www.docjar.org/html/api/javax/swing/plaf/synth/SynthStyle.java.html)的 openjdk 7 源代码，默认情况下映射看起来是固定的。

一个可能的，但有点 hacky 的解决方案可能是创建并安装一个装饰器[SynthStyleFactory](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/plaf/synth/SynthStyleFactory.html)，它在返回之前修改样式。

编辑：我已经更新了下面的代码示例，因为我有机会对此进行测试。它不能以原始形式工作，但更新后的代码对我有用。

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.HashMap;
import java.util.Map;

import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.UIDefaults;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.plaf.synth.Region;
import javax.swing.plaf.synth.SynthLookAndFeel;
import javax.swing.plaf.synth.SynthStyle;
import javax.swing.plaf.synth.SynthStyleFactory;

import sun.swing.plaf.synth.DefaultSynthStyle;

public class LnFTest {

    public static void main(String[] args) throws UnsupportedLookAndFeelException{

        SynthLookAndFeel laf = new SynthLookAndFeel();
        laf.load(LnFTest.class.getResourceAsStream("laf.xml"), LnFTest.class);
        UIManager.setLookAndFeel(laf);
        SynthLookAndFeel.setStyleFactory(new MyStyleFactory(SynthLookAndFeel.getStyleFactory()));

        JButton button = new JButton("Test");
        button.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e){
                System.out.println("Action Performed");
            }
        });

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new BorderLayout());
        frame.add(button, BorderLayout.CENTER);
        frame.pack();

        frame.setVisible(true);

    }

}

class MyStyleFactory extends SynthStyleFactory {

    private SynthStyleFactory delegate;
    private Map overrides;

     public MyStyleFactory(SynthStyleFactory delegate){
         this.delegate = delegate;

         overrides = new HashMap();
         overrides.put("Button.focusInputMap", new UIDefaults.LazyInputMap(new Object[0]));
     }

     public SynthStyle getStyle(JComponent c, Region id) {
         SynthStyle style = delegate.getStyle(c, id);

         System.out.println("Style is a: " + style);

         if(style instanceof DefaultSynthStyle){
             ((DefaultSynthStyle)style).setData(overrides);
         }

         return style;

     }
} 
```

编辑：我似乎无法在原始帖子中添加评论，所以为了澄清，我已经确认 UIManager.get("Button.focusInputMap") 在创建任何组件之前仅使用普通合成器返回 null。可能 Nimbus 正在覆盖这种行为。

```
 SynthLookAndFeel laf = new SynthLookAndFeel();
 UIManager.setLookAndFeel(laf);
 System.out.println(UIManager.get("Button.focusInputMap") == null); 
```

# java - 如何在 Android 中设置收集位置更新的频率？

> ID：12464181
> 
> 赞同：1
> 
> 时间：2012-09-17T17:19:30.180
> 
> 标签：java, android

我正在尝试将一些位置更新收集到 Android 地图应用程序中的数组列表中。我想将每分钟收集的位置更新保存到我的本地服务器中。我怎样才能做到这一点。Android中是否有执行此操作的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:23:48.527

1.  Use `Service`，它就像一个没有任何 UI 的 Activity。

2.  让我们`Service`每分钟运行一次，并以纬度和经度的形式记录位置更新。

3.  然后使用`Non-UI`线程将位置数据存储在DataBase中，**例如：** `SQLite`

**对于服务**：

[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

**用于创建简单线程：**

```
Thread t = new Thread(new Runnable(){

   public void run(){

           // Here is the code that will do your job every minute.

           // Please use a while loop with a loop control factor,

           // and sleep mechanism to let your thread sleep for a minute.

          // for sleep, instead of using Thread.sleep(timeout) better use     

          //TimeUnit.SECONDS.sleep(timeout);

     }
  });

t.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:06:55.123

我们可以使用**NETWORK_PROVIDER**或**GPS_PROVIDER**对当前位置进行分级。

在这两种情况下，下面列出了一种方法来获取时间戳和应用程序经常更新的基于距离的位置。

位置更改将由在 requestLocationUpdates() 注册的 LocationListener 调用的**OnLocationChange()检测。**

```
public void requestLocationUpdates (String provider, long minTime, float minDistance, LocationListener listener) 
```

如果 minDistance 大于 0，则仅当设备移动 minDistance 米时才会广播位置。要尽可能频繁地获取通知，请将两个参数都设置为 0。

[有关更多详细信息和信息](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)

# c# - Windows 8 - .NET TCP AcceptAsync 回调未触发（被 Console.ReadLine() 阻止）

> ID：12464185
> 
> 赞同：18
> 
> 时间：2012-09-17T17:19:53.483
> 
> 标签：c#, tcp, windows-8, visual-studio-2012

我遇到了特定于 Windows 8 和 VS2012 的问题。

我有一个 TCP 套接字服务器和客户端，并且正在本地网络上进行一些测试。使用 sysinternals TCPView，我可以看到数据包从 TCP 客户端发送并到达 TCP 服务器（我看到数据包计数器增加）。

但是，看起来好像数据没有进入应用程序堆栈？同样的构建在 Windows 7 上运行没有问题。

我关闭了 Windows 8 防火墙，并在关闭 UAC 的域管理员用户上以提升的权限运行这两个进程。

当我将客户端连接到外部服务器（在单独的机器上运行）时，一切正常。Windows 8 中是否还有其他内容可以禁止本地进程之间的 TCP 数据通信？

谢谢，

**编辑**

为了确保我的服务器应用程序中没有任何东西导致此问题，我在控制台应用程序中构建了一个快速 TCP 服务器，并为套接字构造函数使用以下代码：

```
listenerSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp); 
```

并侦听与我的服务器应用程序相同的本地 IP/端口。我遇到了同样的问题，我可以远程登录到端口，但 listenerSocket.AcceptAsync 永远不会被击中。

**编辑 2**

经过进一步测试，我发现我的问题与使用异步套接字调用有关，即如果我使用像 socket.Accept() 这样的同步调用，则测试应用程序运行正常。但是，当我使用异步套接字调用时，即 socket.AcceptAsync()，我遇到了上述问题。到目前为止，在异步套接字调用方面，我找不到任何关于 win7 和 8 之间差异的提及。

这是我的快速示例应用程序，它显示异步回调从未被触发。此代码段在 Windows 7 中运行良好，但在 Windows 8 中无法运行（尝试 telnet 到 127.0.0.1 : 7000）。

```
 class Program
{
    private static SocketAsyncEventArgs socketAsyncEventArgs = new SocketAsyncEventArgs();

    static void Main(string[] args)
    {
        var listenerSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        listenerSocket.Bind(new IPEndPoint(IPAddress.Parse("127.0.0.1"), 7000));
        listenerSocket.Listen(100);

        socketAsyncEventArgs.Completed += AcceptEventArg_Completed;
        listenerSocket.AcceptAsync(socketAsyncEventArgs);

        Console.ReadLine();
    }

    private static void AcceptEventArg_Completed(object sender, SocketAsyncEventArgs e)
    {
        Console.WriteLine("AcceptEventArg_Completed");
    }
} 
```

**编辑 3**

我发现另外 2 个人在 Microsoft Connect 上报告了同样的问题： [https](https://connect.microsoft.com/VisualStudio/feedback/details/759913/socketasynceventargs-completed-doesnt-fire-in-net-framework-4-5) ://connect.microsoft.com/VisualStudio/feedback/details/759913/socketasynceventargs-completed-doesnt-fire-in-net-framework-4-5 和 [http： //connect.microsoft.com/VisualStudio/feedback/details/747218/saea-not-working-in-net-4-5-rp](http://connect.microsoft.com/VisualStudio/feedback/details/747218/saea-not-working-in-net-4-5-rp)

而第二个很有趣，因为它似乎得出结论，在 Console.ReadLine() 调用中有一个 Windows 错误，它导致了问题并阻止了异步回调。如果我将代码段中的 Console.ReadLine() 替换为：

```
 while (true)
        {
            System.Threading.Thread.Sleep(10);
        } 
```

一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T07:47:37.250

看到这个：[GetQueuedCompletionStatus can't dequeue IO from IOCP if the thread that original issue is blocking in ReadFile under windows 8](https://stackoverflow.com/questions/12047960/getqueuedcompletionstatus-cant-dequeue-io-from-iocp-if-the-thread-which-origina)

这是 Windows 8 和 2012 中的一个错误，会影响所有使用 AcceptEx 和 ReadFile 的程序。目前，已知只有这两个功能受到影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:05:55.737

我在使用 SocketAsyncEventArgs 开发 Tcp 服务器和客户端应用程序时遇到了同样的事情

我建议你先试试这个。

1.  打开具有高级安全性的 Windows 防火墙检查入站/出站规则以查看您的应用程序是否被阻止。

2.  打开 AssemblyInfo.cs 并更改

[程序集：Guid("06985fe3-80eb-48b4-940a-fd926e2f2053")]

到任何其他指导值。

通过更改此设置，Windows 会认为这是一个新应用程序，如果对旧应用程序有任何限制，它将不会出现在新应用程序上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:16:49.800

听起来这个 Windows 错误与 Windows 8 上的 IOCP 处理（可能只是 AcceptEx）有关，而其他阻塞 I/O 正在同一线程上进行：

[http://social.technet.microsoft.com/Forums/en-GB/winserver8gen/thread/5764cd0f-fda1-4cfa-ae35-808210bae77e](http://social.technet.microsoft.com/Forums/en-GB/winserver8gen/thread/5764cd0f-fda1-4cfa-ae35-808210bae77e)

所以套接字连接被接受，但你的应用程序永远不会收到它的通知。

也许 Windows 8 做了一些奇怪的、稍微损坏的巫术来将像 Console.Read 这样的同步 IO 在内部转换为异步。

您可以将服务器代码移动到不同的线程中，其他尝试的解决方法可能是同步执行 Accept 或将控制台处理更改为异步（我无法真正尝试，因为我没有 Windows 8）。

# datatable - 在分页 OpenFaces 3 数据表中使用 a4j:jsFunction

> ID：12464187
> 
> 赞同：0
> 
> 时间：2012-09-17T17:20:08.763
> 
> 标签：datatable, ajax4jsf, openfaces

我有一个分页的 OpenFaces 3 数据表（在表下方的一个方面内使用 o:dataTablePaginator），其中有一列包含一个 a4j:jsFunction 标记（使用 RichFaces 4.1），用于在桌子。包含该表的 JSF 2.1 页面正在应用程序中部署到 Glassfish 3.1 上。

当我单击表格的下一页图标时，数据表无法通过 AJAX 更新，并且页面右上角仍显示 OpenFaces AJAX“正在加载...”消息（带有“旋转”菱形）。在 Firebug 中，我可以看到 OpenFaces AJAX Post 的结果是 ajaxUtil.js 受影响的第 344 行出错：

```
TypeError: xml.getElementsByTagName("partial-response")[0] is undefined
var childNodes = xml.getElementsByTagName("partial-response")[0].childNodes; 
```

以及 IE 开发人员工具中的以下错误：

```
SCRIPT5007: Unable to get value of the property 'childNodes'
          : object is null or undefined 
```

我已经能够消除数据表中的所有其他标签作为问题的原因，除了这个：

```
<a4j:jsFunction id="cellUpdateFunction#{rowIndex}"
                name="updateCellStr#{rowIndex}"
                data="#{backingBean.getStrForRow(rowIndex)}" execute="@this"
                oncomplete="setCellText(#{rowIndex}, event.data);"/> 
```

这将在列单元格（针对表格的每一行）中创建一个 JavaScript 函数，该函数在调用时会使用为支持 bean 中的单元格存储的字符串更新单元格中的文本。

有谁知道这是否是一个已知问题并且我找不到解决方法？否则，我将如何使用 OpenFaces AJAX 编写类似的功能，因为我希望仅使用 OpenFaces 组件不会破坏更新 OpenFaces 数据表的 AJAX 调用？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:57:30.877

您可以尝试使用每晚构建并检查吗？你可以在这里找到每晚构建：http: [//openfaces.org/downloads/](http://openfaces.org/downloads/)

# jsf - 以编程方式创建 f:selectItems 并将其添加到 HtmlSelectOneRadio

> ID：12464189
> 
> 赞同：1
> 
> 时间：2012-09-17T17:20:15.070
> 
> 标签：jsf, facelets, dynamic-forms

我正在使用 JSF 创建问卷，因此我需要务实地创建我的整个 xhtml，因为有不同类型的问题并且它们的数量没有预定义。

我所拥有的只是 ah:panelGrid 在我看来，其余的都是在我的支持 bean 中生成的。

创建 HtmlOutputText 和 HtmlInputText 没有问题。为此，我使用 getApplication 创建它们，例如：

```
getApplication().createComponent(HtmlOutputText.COMPONENT_TYPE); 
```

然后像这样将组件添加到我的网格中：

```
grid.getChildren().add(questionnumber); 
```

其中“网格”是我的 panelGrid 元素。所以我把我的问题放在一个循环中，并根据数据库中的问题类型决定要创建什么类型的组件。如果问题是普通文本问题，我可以轻松使用 HtmlInputText。但我也有多项选择题。因此我需要创建 SelectOneRadio 菜单并在其中添加 SelectItems。

我可以`HtmlSelectOneRadio`使用上面提到的相同 createComponent 方法创建一个。但我无法为其添加选项（selectitem 组件）。有没有办法我可以做到这一点？我们有一个我缺少的 UIComponent 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:06:18.120

我自己找到了解决方案。我必须使用 UISelectItems 并将其添加到我的 SelectOneMenu 中，如下所示：

```
final UISelectItem select = (UISelectItem) getApplication().createComponent(UISelectItem.COMPONENT_TYPE);
List<SelectItem> items = new ArrayList<SelectItem>();
for (int k = 0; k < options.length; k++){
items.add(new SelectItem(options[k]));                
}
UISelectItems selectItems = new UISelectItems();
selectItems.setValue(items);
selectOneRadio.getChildren().add(selectItems);
 grid.getChildren().add(selectOneRadio); 
```

# jsf - 如何使用 h:commandLink JSF 调用锚点

> ID：12464190
> 
> 赞同：0
> 
> 时间：2012-09-17T17:20:18.683
> 
> 标签：jsf

我想用调用相同锚的 < h:commandLink > 替换调用锚 < a href="#deleteModal" > 的普通链接。怎么做？

谢谢你的帮助。

```
<p:dataTable 
    id="locationTable"
    var="row"
    value="#{locationListBackingBean.list()}" 
    paginator="true" 
    rows="10"
    lazy="true"
    rowsPerPageTemplate="10,30,50"
    paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">

    <p:column headerText="#">
        <h:outputText styleClass="id" style="" value="#{row.locationId}"/>
    </p:column>

    <p:column headerText="Elminar">
        <a href="#deleteModal" id="remove" data-toggle="modal">
            <h:graphicImage styleClass="icon-remove" />
        </a>

        <!-- Dialog to confirm delete function. -->
        <div class="modal hide fade" id="deleteModal" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3 id="deleteModalLabel">Eliminar</h3>
        </div>
        <div class="modal-body">
            <p>Está seguro que desea eliminar el registro seleccionado?</p>
        </div>
        <div class="modal-footer">
            <h:commandButton styleClass="btn" value="Cancelar" data-dismiss="modal" aria-hidden="true"/>
            <h:commandButton styleClass="btn btn-primary" value="Aceptar" action="#{locationListBackingBean.remove(row.locationId, row.recordVersion)}"/>
        </div>
        </div>
    </p:column>
</p:dataTable> 
```

# c# - 是否有一种“分组”方式来知道 PreviewKeyDown 键是否为 Delete、Home、End、Pg Up 等

> ID：12464191
> 
> 赞同：0
> 
> 时间：2012-09-17T17:20:21.350
> 
> 标签：c#, .net

我有一个 PreviewKeyDown 事件，我用它来过滤我的输入（我需要过滤掉其他东西中的空格，所以使用 PreviewKeyPress 不可用）。

一切正常，除了它吃掉了我的 Delete、Backspace、Home、Arrow、Page Up 等按键。

我可以试着想想我认为应该允许的所有键，并告诉我的事件忽略它们：

```
if ((e.Key == Key.Up) || (e.Key == Key.Down) || (e.Key == Key.Left) 
    || (e.Key == Key.Right) || (e.Key == Key.Delete) || (e.Key == Key.Home) 
    || (e.Key == Key.End) || (e.Key == Key.PageUp) || (e.Key == Key.Insert) 
    || (e.Key == Key.F1)) 
```

但我相信我会错过一些。

**有没有更好的方法来做一个巨大的“或”声明并希望我得到它们？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:30:55.113

我会在`KeyPress`. 那时您将处理字符，而不是键。所以你不需要关心它们中的大多数（AFAIR 有少数例外，例如返回或退格）。

用于[`e.Handled`](http://msdn.microsoft.com/en-us/library/system.windows.forms.keypresseventargs.handled.aspx)抑制字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:56:00.473

我正在使用这个：[你如何获得适合给定 KeyDown 事件的字符？](https://stackoverflow.com/questions/4817528/how-do-you-get-the-character-appropriate-for-the-given-keydown-event/10224883#10224883)将我的键值转换为字符。

我意识到如果密钥不是有效的字符，那么它被设置为 ASCII 32 (SPACE)。

所以我只是要过滤掉那个......

```
// If this was not a true char then it will convert to the ASCII Space (#32).
// If this is not really a char, then we are done.
if ((newChar == (char)32) && (e.Key != Key.Space))
    return; 
```

# php - php print 构造在哪个方向执行

> ID：12464203
> 
> 赞同：2
> 
> 时间：2012-09-17T17:21:31.590
> 
> 标签：php

我在php.net的[打印手册中遇到了一个示例。](http://php.net/manual/en/function.print.php)那个统计。

```
 echo 3 . print(2) . print(4) . 5 . 'c' . 
   print(6) . print(7). 'b' .print(8) . 'a'; 
```

打印`8a7b16145c12131`。但是怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:29:52.147

我认为您只是被连接运算符的存在所愚弄，`.`这使您假设此代码的唯一输出将来自`echo`并且所有其他函数只会“有助于”回声的参数。当然，这是错误的，因为您假设以`print()`某种方式改变了它的行为并在那里**返回**其输出，而不是立即（在调用时）将其**打印到输出流。**您连接的唯一内容是字符串和每个`print()`** 返回值**。而后者，[根据手册](http://php.net/manual/en/function.print.php)**始终**是“1”。Change `print()`, to`sprintf()`和所有的“魔法”都会消失。

顺便说一句，这是个好主意-可以忙一段时间:)

**根据 OP 的要求进行编辑**

这里的“罪魁祸首”是`print`。值得注意的是，它不是一个真正的函数，而是影响评估过程中处理方式的**语言结构。**例如：

```
echo 3 . print(2) . 'c'; 
```

产生：

```
2c31 
```

但如果你`print`进入这样的功能：

```
function x($a) { return print $a; }
echo 3 . x(2) . 'c'; 
```

那么输出看起来会更理智：

```
231c 
```

如果您关心细节，您将需要潜入 Zend Engine 源代码，但一般来说，这种语法可能用于任何有用的东西。记住`print`就够了。

为什么我们仍然看到“231c”？这是因为`echo`首先需要评估参数 - 否则 PHP 并不真正知道要回显什么（或可能**部分**知道）。所以 PHP 多/少这样：

*   将“3”添加到我们的临时字符串
*   调用函数`x(2)`- 因为这个函数`print`，我们的参数（“2”）将**立即打印到输出**。函数返回“1”，因为`print`总是返回“1”（参见手册）所以 PHP 将“1”连接到我们现在有“31”，
*   得到'c'并连接，所以我们现在有“31c”
*   `echo`我们的临时字符串。

请注意，实际上`echo`仅输出“31c”。有前缀“2”是因为它是`print`输出，同时我们没有使用 LF（或者`<br />`如果你没有在控制台中测试它），所以所有输出都放在一行中。如果您将代码更改为使用 LF（或`<br />`）：

```
function x($a) { return print $a; }
$f = 3 . x(2) . 'c';
echo "\n${f}"; 
```

那么输出将是：

```
2
31c 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:24:16.830

它打印'8'与'a'连接，依此类推，如手册所述，从右到左。并且 echo 打印出 '1'

例子

```
<?php
echo print(8) . 'a';
?> 
```

打印 8a1

# java - 在 Webpshere 中的 HMAC_SHA1 上获取 NoClassdef

> ID：12464205
> 
> 赞同：1
> 
> 时间：2012-09-17T17:21:41.480
> 
> 标签：java, security, websphere

我们有 WAS 6.0（我知道）.2.43 ND 在多个地区运行。

我们的 Dev-B 区域运行良好，但是当我们进行 Web 调用时，Dev-C 会抛出 java 异常（至少这是开发人员告诉我的）......两个区域的代码相同，我检查了明显的嫌疑人（全球安全，SSL密码等），它们似乎都匹配。这是 SystemErr 的堆栈跟踪：

```
[8/1/12 4:02:31:758 EDT] 0000005c ServletWrappe E   SRVE0068E: Could not invoke the service() method on servlet action. Exception thrown : java.lang.NoClassDefFoundError
    at javax.crypto.Mac.getInstance(DashoA12275)
    at net.oauth.signature.HMAC_SHA1.computeSignature(HMAC_SHA1.java:73)
    at net.oauth.signature.HMAC_SHA1.getSignature(HMAC_SHA1.java:39)
    at net.oauth.signature.OAuthSignatureMethod.getSignature(OAuthSignatureMethod.java:83)
    at net.oauth.signature.OAuthSignatureMethod.sign(OAuthSignatureMethod.java:54)
    at com.harcourt.hsp.utils.LTIUtil.generateSignature(LTIUtil.java:62)
    at com.harcourt.hsp.web.struts.lti.action.BaseLTIAction.generateSignature(BaseLTIAction.java:238)
    at com.harcourt.hsp.web.struts.lti.action.BaseLTIAction.execute(BaseLTIAction.java:96)
    at org.springframework.web.struts.DelegatingActionProxy.execute(DelegatingActionProxy.java:106)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:419)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:224)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1194)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:743)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1796)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:887)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:90)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:1937)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:130)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:434)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:373)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:253)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminaters(NewConnectionInitialReadCallback.java:207)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:109)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.requestComplete(WorkQueueManager.java:566)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.attemptIO(WorkQueueManager.java:619)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.workerRun(WorkQueueManager.java:952)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager$Worker.run(WorkQueueManager.java:1039)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1498)

    at javax.crypto.Mac.getInstance(DashoA12275)
    at net.oauth.signature.HMAC_SHA1.computeSignature(HMAC_SHA1.java:73)
    at net.oauth.signature.HMAC_SHA1.getSignature(HMAC_SHA1.java:39)
    at net.oauth.signature.OAuthSignatureMethod.getSignature(OAuthSignatureMethod.java:83)
    at net.oauth.signature.OAuthSignatureMethod.sign(OAuthSignatureMethod.java:54)
    at com.harcourt.hsp.utils.LTIUtil.generateSignature(LTIUtil.java:62)
    at com.harcourt.hsp.web.struts.lti.action.BaseLTIAction.generateSignature(BaseLTIAction.java:238)
    at com.harcourt.hsp.web.struts.lti.action.BaseLTIAction.execute(BaseLTIAction.java:96)
    at org.springframework.web.struts.DelegatingActionProxy.execute(DelegatingActionProxy.java:106)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:419)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:224)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1194)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:743)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1796)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:887)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:90)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:1937)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:130)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:434)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:373)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:253)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminaters(NewConnectionInitialReadCallback.java:207)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:109)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.requestComplete(WorkQueueManager.java:566)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.attemptIO(WorkQueueManager.java:619)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.workerRun(WorkQueueManager.java:952)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager$Worker.run(WorkQueueManager.java:1039)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1498) 
```

谢谢你的帮助。我确定这是我缺少的配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:36:46.190

由于某种原因，`javax.crypto.Mac.getInstance`无法解决。如果您想在全面排除故障之前尝试一些容易实现的目标：您是否缺少罐子？该类是否需要添加到您的类路径中？

归根结底，解决问题的最佳方法是逐步进行合乎逻辑的分析。这篇由[3 部分组成的文章](http://javaeesupportpatterns.blogspot.com/2012/06/javalangnoclassdeffounderror-how-to.html)将引导您完成`java.lang.NoClassDefFoundError`. 这是一个相对较短的阅读，我怀疑它可能会回答你的问题。

为了完整起见，我已经包含了简短的版本*（从上面提到的文章中提取）*：

1.  查看 java.lang.NoClassDefFoundError 错误并确定缺少的 Java 类。*（在本例中为 javax.crypto.Mac.getInstance）*

2.  从您的编译/构建环境中验证并找到缺少的 Java 类

3.  确定缺少的 Java 类是来自您的应用程序代码、第三方 API 还是 Java EE 容器本身。验证丢失的 JAR 文件在哪里/应该在哪里找到

4.  找到后，验证您的运行时环境 Java 类路径是否存在任何拼写错误或缺失的 JAR 文件

5.  如果问题是从 Java EE 应用程序触发的，请执行与上述相同的步骤，但要验证 EAR/WAR 文件的打包是否缺少 JAR 和其他库文件依赖项，例如 MANIFEST

6.  执行受影响类的代码演练并确定它是否包含静态初始化程序代码（变量和静态块）

7.  查看您的服务器和应用程序日志并确定是否有任何错误源自静态初始化程序代码

8.  确认后，进一步分析代码并确定初始化程序代码失败的根本原因。您可能需要添加一些额外的日志记录以及适当的错误处理，以防止和更好地处理未来静态初始化代码的失败

# javascript - Jquerymobile使用javascript创建按钮

> ID：12464206
> 
> 赞同：1
> 
> 时间：2012-09-17T17:21:41.413
> 
> 标签：javascript, button, jquery-mobile

我正在尝试使用应该具有 data-role="button" 的 javascript 创建 href。但是按钮没有显示。这是我的代码。

```
var a = document.createElement("A");
a.appendChild(document.createTextNode("Skúsiť Znova"));
a.setAttribute("onClick","checkConnection();");
a.setAttribute("data-role","button");
a.setAttribute("data-inline","true");
a.setAttribute("data-corner","false"); 
```

我将它作为孩子附加到 div 中，我可以看到文本，而且 onClick 参数也很好用。但由于某种原因，它没有显示为按钮，而是显示为 normaln href。关于如何使用 JS 动态创建 jquerymobile 按钮的任何建议？这是完整的代码：

```
$(document).ready(function(){
    var a = document.createElement("A");
    var div = document.createElement("div");
    var span = document.createElement("span");
    var p2 = document.createElement("p");
    var p = document.createElement("p");
    a.appendChild(document.createTextNode("Skúsiť Znova"));
    a.setAttribute("onClick","checkConnection();");
    a.setAttribute("data-role","button");
    a.setAttribute("data-inline","true");
    a.setAttribute("data-corner","false");
    div.setAttribute("id","alertMessage");
    span.appendChild(document.createTextNode("Pripojenie zlyhalo"));
    p2.setAttribute("style","text-align: center;");
    span.setAttribute("class","red");
    p.appendChild(span);
    p.appendChild(document.createTextNode(" (skontrolujte nastavenia siete)."));    
    div.appendChild(p);
    p2.appendChild(a);
    div.appendChild(p2);
    var mainDiv = document.getElementById("alert");
    mainDiv.appendChild(div);
    $('mainDiv').trigger('create');
    var toppos=($(window).height()/2) - ($("#alertMessage").height()/2);
    var leftpos=($(window).width()/2) - ($("#alertMessage").width()/2);
    $("#alertMessage").css("top", toppos).css("left",leftpos);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:24:18.267

您可以使用`trigger('create')`jQuery Mobile 来应用所有格式。完整的工作代码：

**HTML**：

```
<div id="container"></div> 
```

**JavaScript**：

```
var a = document.createElement("A");
a.appendChild(document.createTextNode("Skúsiť Znova"));
a.setAttribute("onClick","checkConnection();");
a.setAttribute("data-role","button");
a.setAttribute("data-inline","true");
a.setAttribute("data-corner","false");

$('#container').append(a).trigger('create'); 
```

这可以在这里看到：http: [//jsfiddle.net/sQ2dA/](http://jsfiddle.net/sQ2dA/)。

* * *

作为对您的编辑的回应：问题是您有`mainDiv`引号，因此您在此行上传递了一个字符串：

```
$('mainDiv').trigger('create'); 
```

但是你应该传递变量`mainDiv`：

```
$(mainDiv).trigger('create'); 
```

请在此处查看工作示例：http: [//jsfiddle.net/P62Cp/](http://jsfiddle.net/P62Cp/)。

# git - 使用 Git 的推荐工作流程是什么？

> ID：12464207
> 
> 赞同：2
> 
> 时间：2012-09-17T17:21:41.853
> 
> 标签：git, version-control

我试图弄清楚使用 Git 同步多个开发人员同时使用的代码库的最佳工作流程是什么。我的团队负责人为我提供了一个脚本，其中添加了我需要同步的几乎所有代码文件，而忽略了批处理文件、编译文件等。

一般来说，我认为我应该做的是在我开始解决问题之前同步，然后在我完成测试时同步。但是，我担心这会在我提取 repo 的代码和发布我的代码之间造成很长的时间间隔。这意味着，例如，我可能会使用一些在我不知情的情况下已被破坏或修复的功能，或者我可能会在此期间无意中破坏了一些其他人正在使用的代码。另外，我认为发布“未完成”的代码可能是一种不好的做法，但我不确定。

如何管理我的同步，以便尽可能少地干扰其他人的代码，并避免较长的周转时间？欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:29:01.353

在这种情况下，我的策略（还有很多其他策略）是：

1.) 在自己的存储库中为自己创建两个分支。一种具有可供发布的工作代码（您的发布分支），另一种用于开发/错误修复（您的开发分支）。

2.) 一般来说：您的开发分支从源代码和发布分支获取最新代码。这样，如果源有任何更改，您可以获取并保持最新。此外，如果您的开发方面有变化，您可以获取它。（例如，您准备发布，但刚刚意识到源 API 已更改。）。你最终会得到一个 devel 分支，其中包含你的（稳定的）更改加上源代码的更改，以及你可以处理的（不稳定的）修复。

3.) 一旦您准备好开发，将您的修复分支合并到您的发布分支中，并提供您的发布分支代码以供审查/集成给领导。如果同时发生了一些变化并且确实需要修复，您将返回到第 2 步。）。

我们的想法是随时都有一个发布，但不断地将更改和修复流入其中，使其保持稳定和最新，同时拥有一个不稳定的开发分支，其中包含来自所有来源的最新代码。

```
(project)           src-branch ----*----*---*-----*----------*------M
                                    \              \               /
(personal) devel/bugfix-branch ------M-*-*--*-------M-M---*--*----/--
                                             \       /         \ /
(personal)      release-branch ---------------M-*---*----*--*---M----

                               ------ time -----> 
```

`Legend: * commit, M merge`

在最后一步中，您实际上会提供一个 git-diff 补丁，或者让负责人从您的发布分支（您的*BARE*存储库）中获取您的贡献，以便审查/集成到项目源中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:36:45.860

如果您正在寻找工作流程信息，请查看此处提供的文章[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)。它描述了一种 Git 工作流程（以及有助于管理存储库分支的优秀 Git 插件）。

# java - 远程调试 Java 应用程序不显示变量值

> ID：12464208
> 
> 赞同：2
> 
> 时间：2012-09-17T17:21:42.243
> 
> 标签：java, eclipse, remote-debugging

我有一个 .java 文件，我将其部署到服务器并通过本地 eclipse 对其进行调试。我已经通过命令启动了应用程序

```
java -Xdebug -Xrunjdwp:transport=dt_socket,address=8998,server=y TestRemoteDebug 
```

我也在 eclipse 中创建了正确的调试配置。

现在，当我启动应用程序时，我可以看到它遇到断点，但我无法在“变量”窗格中看到任何变量值，或者将鼠标悬停在变量上，因为它在本地机器中工作。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:29:30.853

`javac -g` 使用修复的 this 编译 java 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T21:16:37.063

如果你使用 maven，你必须设置 maven-compile-plugin

```
 <!-- Compilation management -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <encoding>${project.build.sourceEncoding}</encoding>
                <source>${jdk.version}</source>
                <target>${jdk.version}</target>
                <debug>true</debug>
                <verbose>true</verbose>
                <optimize>true</optimize>
                <showDeprecation>true</showDeprecation>
                <showWarnings>true</showWarnings>               
            </configuration>            
        </plugin> 
```

# textbox - Silverlight：使所有文本框在一个操作中表现相同

> ID：12464209
> 
> 赞同：0
> 
> 时间：2012-09-17T17:21:45.267
> 
> 标签：textbox, expression-blend, silverlight-5.0

我正在使用 Silverlight，如何强制我的所有文本框在一个地方修剪其 Text 属性中的所有前导和尾随空格，比如 App.xaml 或其他？

我不想每次使用 TextBox 时都为 GotFocus 事件设置事件处理程序。

而且我想保留充分使用 xaml 的能力，例如，如果我创建一个从 TextBox 继承的新控件，那么我将失去 xaml 以声明方式设置事物的能力。

它可能与行为、全局设置器或任何允许我继续使用 xaml 并影响所有文本框的操作有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:45:44.463

你可以创建一个行为，但如果我是你，我会创建一个继承自 TextBox 的新控件。您不会“失去 xaml 能力”。

```
public class DerrivedTextBox : TextBox    
{   
    public DerrivedTextBox() : base()
    {
        this.TextChanged += DerrivedTextBox_TextChanged;
    }

    void DerrivedTextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        //TODO: Edit text here
    }
} 
```

# python-3.x - Python3 tarfile 不适用于 gzipped tarball

> ID：12464213
> 
> 赞同：1
> 
> 时间：2012-09-17T17:21:59.827
> 
> 标签：python-3.x, tar

我在 CentOS 6 上有一个新编译的 python 3.2.3，我无法让 tarfile 模块与 gzip 文件一起工作。

```
Python 3.2.3 (default, Sep 17 2012, 16:49:57) 
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import tarfile
>>> t = tarfile.open("test.tar.gz")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/python3/lib/python3.2/tarfile.py", line 1746, in open
    raise ReadError("file could not be opened successfully")
tarfile.ReadError: file could not be opened successfully 
```

tar 文件使用普通的 tar 实用程序正常解压。我缺少一些依赖项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:28:14.840

原来我需要在盒子上安装 zlib-devel 来编译 python3。不需要包含额外的配置选项，配置脚本在看到开发库时会自动包含 zlib。

# c++ - 从 2D C 列表创建 boost.geometry.model.polygon

> ID：12464214
> 
> 赞同：6
> 
> 时间：2012-09-17T17:22:09.017
> 
> 标签：c++, boost, geometry, boost-geometry

假设我有以下数据集

```
double * data = (double *) malloc(sizeof(double) * 100 * 2);
for (ii = 0; ii < 100; ii++) {
    data[2*ii] = ii;
    data[2*ii + 1] = ii;
} 
```

如何从这些数据中创建增强多边形？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T21:38:24.713

一个完整的例子

```
#include <iostream>
#include <boost/polygon/polygon.hpp>
#include <vector>

// Some typedefs
namespace bpl = boost::polygon;
typedef bpl::polygon_data<double> Polygon;
typedef bpl::polygon_traits<Polygon>::point_type Point;

int main() {

  // Your C-style data (assumed (x,y) pairs)
  double * data = (double *) malloc(sizeof(double) * 100 * 2);
  for (int ii = 0; ii < 100; ii++) {
    data[2*ii] = ii;
    data[2*ii + 1] = ii;
  }

  // Convert to points
  std::vector<Point> points;
  for (int i=0;i<100;++i)
    points.push_back(Point(data[2*i],data[2*i+1]));

  // Create a polygon
  Polygon polygon;
  polygon.set(points.begin(),points.end());

  // Do something with the polygon
  std::cout << "Perimeter : " << bpl::perimeter(polygon) << std::endl;
  std::cout << "Area      : " << bpl::area(polygon) << std::endl;

  return 0;
} 
```

只是为了说明您实际拥有的灵活性：通过一些额外的 typedef 工作，可以定义您自己的双精度点类型，该类型可以别名到您的数据上，从而避免中间复制......

```
#include <iostream>
#include <boost/polygon/polygon.hpp>
#include <vector>

// Define a point type which can be aliased to your 'C' points
struct Pt {
  double x;
  double y;
};

// Some typedefs
namespace bpl = boost::polygon;
typedef bpl::polygon_data<double> Polygon;

// Add the necessary to use Pt
namespace boost { 
  namespace polygon {

    template <> struct geometry_concept<Pt> {typedef point_concept type;};

    template <> struct point_traits<Pt> {
      typedef double coordinate_type;

      static inline coordinate_type get(const Pt& pt,orientation_2d orient) {
    return (orient == HORIZONTAL ? pt.x : pt.y);
      }
    };

    template <> struct point_mutable_traits<Pt> {
      static inline void set(Pt& pt, orientation_2d orient, int value) {
    if(orient == HORIZONTAL)
      pt.x = value;
    else
      pt.y = value;
      }
      static inline Pt construct(double x,double y) {
    Pt r;
    r.x=x;
    r.y=y;
    return r;
      }
    };
  } 
}

int main() {

  // Your C-style data (assumed (x,y) pairs)
  double * data = (double *) malloc(sizeof(double) * 100 * 2);
  for (int ii = 0; ii < 100; ii++) {
    data[2*ii] = ii;
    data[2*ii + 1] = ii;
  }

  // Reinterpret your data as an array of Pt
  const Pt*const pts=reinterpret_cast<const Pt*>(data);

  // Create a polygon
  Polygon polygon;
  polygon.set(pts,pts+100);

  // Do something with the polygon
  std::cout << "Perimeter : " << bpl::perimeter(polygon) << std::endl;
  std::cout << "Area      : " << bpl::area(polygon) << std::endl;

  return 0;
} 
```

而这种趋势可以延续到[自定义多边形类](http://www.boost.org/doc/libs/1_51_0/libs/polygon/doc/gtl_custom_polygon.htm)。

# virtualbox - 当物理计算机处于睡眠状态时，Virtual Box 上的系统时间不准确

> ID：12464218
> 
> 赞同：0
> 
> 时间：2012-09-17T17:22:14.287
> 
> 标签：virtualbox, redmine, turnkeylinux.org

我今天注意到我的虚拟盒子实例上的系统时间不准确。周末，我让我的电脑进入睡眠状态。我注意到我在虚拟盒子上的 Redmine 实例中创建的记录日期不是当前日期/时间。唤醒计算机后，虚拟机上的 sysdate 不能正确更新。有没有人遇到过这个问题，并且知道如何解决它？

似乎没有任何偏好可以解决这个问题，而且我的搜索似乎表明这次应该发生同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T15:09:57.020

这最终成为最初设置时间的某种问题。我似乎无法再次重现该问题，因此考虑到它已回答。

# php - 自定义分类法 - 根据角色或能力设置访问权限

> ID：12464220
> 
> 赞同：1
> 
> 时间：2012-09-17T17:22:22.963
> 
> 标签：php, wordpress, taxonomy, role, capability

我只是在学习 Wordpress 的自定义分类法。如何限制我的用户使用分类法的访问权限。例如，我创建了一个名为的分类法`featured`，我只希望编辑及以上角色能够向该分类法添加帖子。

**如何设置访问级别？**无论是基于用户角色还是能力，都对我有用。

这是我用于分类的代码：

```
function add_custom_taxonomies() {
    // Add new "Featured" taxonomy to Posts
    register_taxonomy('featured', 'post', array(
        // Hierarchical taxonomy (like categories)
        'hierarchical' => true,
        // This array of options controls the labels displayed in the WordPress Admin UI
        'labels' => array(
            'name' => _x( 'Featured', 'taxonomy general name' ),
            'singular_name' => _x( 'Featured', 'taxonomy singular name' ),
            'search_items' =>  __( 'Search Featured' ),
            'all_items' => __( 'All Featured' ),
            'parent_item' => __( 'Parent Featured' ),
            'parent_item_colon' => __( 'Parent Featured:' ),
            'edit_item' => __( 'Edit Featured' ),
            'update_item' => __( 'Update Featured' ),
            'add_new_item' => __( 'Add New Featured' ),
            'new_item_name' => __( 'New Featured Name' ),
            'menu_name' => __( 'Featured' ),
        ),
        // Control the slugs used for this taxonomy
        'rewrite' => array(
            'slug' => 'featured', // This controls the base slug that will display before each term
            'with_front' => false, // Don't display the category base before "/locations/"
            'hierarchical' => true // This will allow URL's like "/locations/boston/cambridge/"
        ),
    ));
}
add_action( 'init', 'add_custom_taxonomies', 0 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:39:30.753

从帖子编辑页面中删除元框就足够了吗？如果是这样，[试一试](http://wordpress.org/support/topic/remove-metabox-for-custom-taxonomy)：

```
function remove_featured_meta() {
   if (!current_user_can('moderate_comments')){
       remove_meta_box( 'featureddiv', 'post', 'side' );
   }
}

add_action( 'admin_menu' , 'remove_featured_meta' ); 
```

您可以使用与您希望限制对分类的访问权限的用户角色相对应的任何[适当能力](http://codex.wordpress.org/Roles_and_Capabilities)填写条件语句。

# mysql - MySQL存储过程中的参数

> ID：12464228
> 
> 赞同：3
> 
> 时间：2012-09-17T17:22:44.117
> 
> 标签：mysql, stored-procedures

我想创建一个带有输入参数的 MySQL 存储过程 (SP)。

但是，在编写 SP 时无法确定参数的数量。（场景是用户将有多个选项可供选择。选择的选项将形成搜索条件：

```
select ... 
where prod_category = option1 && option2 && option3 &&... 
```

因此，如果有人只选择 option1 和 option2，则只会发送 2 个参数。有时可能会选择 50 多个选项，因此必须发送 50 多个参数。）

所以，我有 3 个问题： 1\. 我可以使用 MySQL 存储过程 (SP) 处理这样的场景吗？2\. SP 是处理这种情况的专业方法吗？3.如果SP不是处理这些场景的专业方法，还有什么可以有效处理这些搜索的吗？搜索是我的应用程序的核心功能。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:31:36.917

MySQL 存储过程只接受固定数量的参数。您可以构建以单个字符串参数分隔的参数和值列表，然后在您的过程中处理它们，或者使用您的应用程序语言来构建查询。

来自[http://forums.mysql.com/read.php?98,154749,155001#msg-155001](http://forums.mysql.com/read.php?98,154749,155001#msg-155001)

> 不，MySQL sprocs 只接受固定数量的参数。ISO SQL 在一定程度上针对正确的 RDBMS 逻辑进行了优化（除非您要询问 EF Codd、CJ Date 或 Fabian Pascal），但在许多方面 SQL 是相当字面的，所以如果 SQL 似乎使您尝试做的事情变得非常困难，它可能是您的设计需要重新审视，在这种情况下，需要重复多次临时删除的设计方面。
> 
> 如果这样的删除是不可避免的，这里有三个选项。首先，在应用程序语言中构建删除查询以包含以逗号分隔的 ID 字符串。其次，将这样的字符串传递给使用这样的字符串准备查询的存储过程。第三，使用目标 ID 填充临时表并编写删除连接 ID 的简单连接查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:31:38.093

使用存储过程有很多很好的理由。这是[一篇文章](http://www.techrepublic.com/article/mysql-and-stored-procedures/5178706)，其中列出了一些。希望这将解决“专业”问题。

至于参数的传递，我不相信你可以有一个变量列表。

很久以前，我看到它通过将值写入表并让存储过程将它们读回“完成”。（在表中使用 session_id，然后将其传递给过程）。

至于“效率”，就看你的定义了。存储过程可能对速度有一点好处，但我不担心。你什么意思？

# java - 是否可以反射性地检查 Java 中的内存泄漏？

> ID：12464229
> 
> 赞同：-1
> 
> 时间：2012-09-17T17:22:58.623
> 
> 标签：java, memory-management, reflection, memory-leaks, profiling

所以，我有了这个想法，写一些代码可以自动检测并指出测试中潜在的内存泄漏，我只是想看看我的想法是否合理，然后再去实现它。

本质上，内存泄漏被定义为越来越多的未使用引用。在 Java 中，与 C++ 相比，这种危险显着降低，因为我们没有悬空指针或忘记 delete() 等危险。

所以这限制了我们在 Java 中发生内存泄漏的方式。我们可以有一个对象的静态引用，或者我们可以在当前运行的线程中有本地引用，就是这样，对吧？

我的想法是编写一个例程，查看所有已知的项目类文件，并提取所有静态引用。然后需要向下“递归”引用，并且需要向上计数它所具有的所有实例引用。对象引用占用一定数量的内存，而基元占用一定数量的内存，我们可以统计所有这些。您可以触发该例程一次，以获得基线，然后执行您认为会导致内存泄漏的事情，然后再次运行该例程并比较结果。可以设置一个增量阈值，然后您可以手动确定哪些对象有目的地变大，哪些对象变大了，但不应该有。

当然，这是一个测试工具，但是，在我从事的项目中，通常我只能在生产中重现这些错误，有很多用户，所以使用真正的分析器并不总是一种选择。内置此功能可以避免实际运行分析器，并且在大多数情况下都可以正常运行，除非在生产产品上诊断问题时。

我看到的唯一问题是，当前正在运行的线程中的局部变量无法以这种方式访问​​，但是，知道这一限制，可能需要代码将这些本地（但长期引用）注册到测试类本身，这将在静态变量中保存对这些对象的弱引用，从而允许对引用进行计数。

垃圾收集将是一个问题，所以基本上，我会通过创建一个未引用的对象来“强制”垃圾收集，它会覆盖 finalize 以在收集它时通知我的线程，这将导致我的 GC 检测器停止阻塞，然后运行检漏仪。

所以，我的问题是，这听起来合理吗？你认为这会产生有用的结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:42:25.303

> 所以这限制了我们在 Java 中发生内存泄漏的方式。我们可以有一个对象的静态引用，或者我们可以在当前运行的线程中有本地引用，就是这样，对吧？

否。请查看[使用 Java 创建内存泄漏，以](https://stackoverflow.com/questions/6470651/creating-a-memory-leak-with-java) 获取替代原因的非详尽列表，您的方法无法检测到其中大部分。

> 在我从事的项目中，很多时候我只能在生产中重现这些错误，有很多用户，所以使用真正的分析器并不总是一种选择。内置此功能可以避免实际运行分析器，并且在大多数情况下都可以正常运行，除非在生产产品上诊断问题时。

您始终可以让生产系统写入堆转储（Oracle JVM 甚至可以[设置](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html#DebuggingOptions)在发生 OutOfMemoryError 时写入堆转储。）。然后，您可以分析这些堆转储（有多种工具，其中一些通过应用一些启发式方法自动找到“泄漏嫌疑人”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:39:28.470

从 Java 1.5 开始，您就有了可以打印类直方图的 jmap。

# java - Java 格式缩进 I/O

> ID：12464231
> 
> 赞同：0
> 
> 时间：2012-09-17T17:23:10.153
> 
> 标签：java, io, format

我试图将我的输出向右缩进 2 个空格，是否可以使用 .format 而不是 2 个空格来做到这一点？

```
System.out.format("  %-15s %7.2f %5.0f %-20s\n", getName(), payPerHour, hours, task.getTask());
                   ^ //2 spaces in front 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:26:14.400

是啊，就是

```
System.out.format("%2s%-15s %7.2f %5.0f %-20s\n", " ", getName(), payPerHour, hours, task.getTask()); 
```

# node.js - ThreeNodes.js / NodeJS / CoffeeScript - 构建静态 JS 时出错

> ID：12464232
> 
> 赞同：0
> 
> 时间：2012-09-17T17:23:11.993
> 
> 标签：node.js, coffeescript, webgl

我用 node 运行 server.js，一切运行良好。当我尝试运行构建脚本来创建编译的静态版本时。我还应该提到它确实输出了大部分文件，但在中途抛出了一个错误。

**我跑了：**

```
node server.js build 
```

它似乎工作正常，直到它进入“开始优化 javascripts ......”

**错误输出：**

```
/root/threenodes/ThreeNodes.js/node_modules/requirejs/bin/r.js:14153
                throw new Error(errorMsg);
                      ^
Error: TypeError: Object function () {
            //A version of a require function that passes a moduleName
            //value for items that may need to
            //look up paths relative to the moduleName
            var args = aps.call(arguments, 0), lastArg;
            if (enableBuildCallback &&
                    isFunction((lastArg = args[args.length - 1]))) {
                lastArg.__requireJsBuild = true;
            }
            args.push(relMap);
            return func.apply(null, args);
        } has no method 'nameToUrl'
In module tree:
    threenodes/App
      order

    at Object.load (eval at <anonymous> (/root/threenodes/ThreeNodes.js/node_modules/requirejs/bin/r.js:13687:38)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:22:35.237

我刚刚对threenodes.js 进行了修复，应该可以解决您的问题。这是因为 requirejs 已更新，而 !order 插件现已弃用。所以修复只是在 package.json 中定义更精确的 requirejs 版本。

[https://github.com/idflood/ThreeNodes.js/commit/440757aa579ae3d35354e960a2bd5745bdee6847](https://github.com/idflood/ThreeNodes.js/commit/440757aa579ae3d35354e960a2bd5745bdee6847)

要解决这个问题：

*   git pull 起源大师
*   npm 安装 -d
*   节点 server.js 构建

附带说明一下，dev 分支使用新版本的 requirejs。它仍然没有合并到 master 上，因为我已经开始研究“节点分组”但它还没有完成。除此之外，所有其他功能都应该与 master 分支上的工作方式相同。因此，如果您打算在三个节点之上开发一些东西，我建议您使用 dev 分支；]

# symfony - 在 Symfony2 中创建“同意条款”复选框的好方法是什么？

> ID：12464235
> 
> 赞同：1
> 
> 时间：2012-09-17T17:23:26.797
> 
> 标签：symfony

我有一个表格，上面有“我已阅读并同意服务条款”复选框。必须选中该框才能使表单被视为有效，但当然没有理由将该值保存到数据库中，也没有理由向实体添加属性。

在 Symfony2 中实现这种功能的好方法是什么，除非选中该框，否则表单不会被视为有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-12-12T15:30:17.963

这个问题已经很老了，Symfony 已经更新了很多。对于 Symfony 3.x，您可以执行以下操作：

```
$builder->add('terms', CheckboxType::class, [
    'mapped' => false,
    'constraints' => new IsTrue(),
]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T17:28:05.690

来自[symfony 文档](http://symfony.com/doc/current/book/forms.html#creating-form-classes)：

> 将表单映射到对象时，会映射所有字段。映射对象上不存在的表单上的任何字段都将导致抛出异常。如果您需要表单中的额外字段（例如：“您是否同意这些条款”复选框）不会映射到基础对象，则需要将 property_path 选项设置为 false：

```
use Symfony\Component\Form\FormBuilderInterface;

public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('task');
    $builder->add('dueDate', null, array('property_path' => false));
} 
```

> 可以在控制器中访问字段数据：

```
$form->get('dueDate')->getData(); 
```

# jquery - 多行浮动表头

> ID：12464236
> 
> 赞同：1
> 
> 时间：2012-09-17T17:23:27.623
> 
> 标签：jquery, html, css

我正在使用这个脚本来浮动我的表头： [http ://cmcqueen1975.bitbucket.org/htmlFloatingTableHeader/tables.html](http://cmcqueen1975.bitbucket.org/htmlFloatingTableHeader/tables.html)

它对我的项目非常有用，但是我的一张表有 2 行标题，但它只浮动顶部。有没有一种简单的方法让它浮动所有行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:28:11.353

我想你正在寻找这样的东西：

```
<table style="position:fixed; top:0;">
    <tr>
       <td>Header1</td>
       <td Header2</td>
       .....
    </tr>
</table>

<table>
   <tr>
      <td>Data1</td>
      <td>Data2</td>
      ....
   </tr>
   .... more rows ...
</table> 
```

这样做是将标题锚定到屏幕顶部，但将允许其他表格像往常一样滚动。您可能需要根据页面上的其他内容进行一些 z 索引。

# django - 如何将代理域名代理到 Nginx 中的内部应用服务器 URL？

> ID：12464241
> 
> 赞同：3
> 
> 时间：2012-09-17T17:23:47.237
> 
> 标签：django, nginx, reverse-proxy, appserver

我有一个内部应用程序服务器（Django+gunicorn）在一个私有端口上的 Nginx 反向代理后面运行（例如，侦听端口 5000。）

应用服务器中安装了几个 Django 应用，映射到单独的基本路径。例子：

```
/app1
/app2 
```

Where`/app1`为 提供内容`domain1.com`并`/app2`为 提供内容`domain2.com`。

我想静默地将特定主机名的传入请求反向代理到相关的后端应用程序，同时保留转发到内部应用程序服务器的路径：

```
http://domain1.com/foo --> /app1/foo
http://domain1.com/bar/bletch --> /app1/bar/bletch

http://domain2.com/alpha/bravo --> /app2/alpha/bravo 
```

我想你可以说我正在尝试设置一个简单的“虚拟主机”配置，但我想使用一个共享的后端应用服务器实例。

关键点：我不希望访问者的浏览器看到重定向的 URL 结构。因此，当客户端浏览器点击[http://domain1.com/foo](http://domain1.com/foo)时，会提供正确的内容，但浏览器看不到重定向。

我已经使用 Nginx 完成了一些基本工作（仍在学习），我正在寻找示例 Nginx 配置，以展示实现此目标的安全有效的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:00:02.943

基于[这个答案](https://stackoverflow.com/a/15579696/1309774)，这里的配置似乎可以按需要工作。

对于`app1`运行`http://localhost:8000/app1_path`：

```
upstream app1 {
    server 127.0.0.1:8000 fail_timeout=0;
}
server {
    listen 80;
    server_name example.com
    access_log /var/log/nginx/example.com.access.log;
    error_log /var/log/nginx/example.com.error.log;

    location / {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        rewrite ^(.*)$ /app1_path$1 break;
        proxy_pass http://app1;
    }
} 
```

因此，对于每个主机名->应用程序/路径对，可以根据需要多次重复此模式。

# php - 使用 ORM 导入新表时出错

> ID：12464243
> 
> 赞同：1
> 
> 时间：2012-09-17T17:23:54.880
> 
> 标签：php, symfony, doctrine-orm

我有一个使用 symfony2 和教义 2 编写的现有 php web 应用程序。我在数据库中添加了一个表。现在，我希望 ORM 为我编写 php 类。我试过这样做：

```
php app/console doctrine:mapping:convert xml ./src/Acme/BlogBundle/Resources/config/doctrine/metadata/orm --from-database --force 
```

我也试过这个：

```
php app/console doctrine:mapping:import SomeBundle annotation 
```

他们俩都抛出了这个错误：

```
[ErrorException]

Warning: class_parents(): Class SomeClass does not exist 
and could not be loaded in C:\wamp\www\vac\vendor\
gedmo-doctrine-extensions\lib\Gedmo\Mapping\
ExtensionMetadataFactory.php line 80 
```

关于我需要做什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T05:01:25.427

1.  删除所有实体以及实体文件夹。
2.  使用您的 orm 文件夹删除所有 orm 文件。
3.  然后尝试从具有新表的数据库创建 orm 和实体文件。

    一种。`$ php app/console doctrine:mapping:convert xml ./src/YourDir/YourBundle/Resources/config/doctrine/metadata/orm --from-database --force`

    湾。`$ php app/console doctrine:mapping:import YourDirYourBundle annotation`

    C。`$ php app/console doctrine:generate:entities YourDirYourBundle`

试试这个。

# optimization - 差分进化算法中交叉的重要性是什么？

> ID：12464245
> 
> 赞同：5
> 
> 时间：2012-09-17T17:24:01.450
> 
> 标签：optimization, differential-evolution

在用于优化问题的差分进化算法中。涉及三个进化过程，即突变交叉和选择

我只是一个初学者，但我已经尝试删除交叉过程，并且与原始算法没有显着差异。

那么在差分进化算法中，交叉的重要性是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-21T17:07:05.357

如果您不使用交叉可能是您的算法只是探索问题搜索空间而不是利用它。一般来说，如果进化算法在探索率和开发率之间取得了良好的平衡，那么它就会成功。

例如`DE/rand/1/Either-Or`，DE 的一个变体消除了**交叉算子**，但使用了**有效的变异算子**。根据[差分进化：最新技术的调查](http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&arnumber=5601760&queryText=differential%20evolution%20:survey%20of%20state%20of%20the%20art)，在该算法中，*纯突变体的试验载体有一定概率出现`pF`，而纯重组体的试验载体有一定概率出现`1 − pF`。与经典的 DE 变体 rand/1/bin 和 target-to-best/1/bin 相比，该变体显示出具有竞争力的结果*（[主要参考](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=5089881&url=http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=5089881)）。
![在此处输入图像描述](../Images/b543c0cd0c5d37f869b210b0827b853a.png)

`X(i,G)`是 G 代的第 i 个目标（父）向量，`U(i,G)`是它对应的试验向量，`F`是差向量比例因子和`k = 0.5*(F + 1)[in the original paper]`。
在这个方案中没有使用交叉，但变异足够有效，可以与原始 DE 算法进行比较。

# c# - FileResult 缓冲到内存

> ID：12464252
> 
> 赞同：5
> 
> 时间：2012-09-17T17:24:20.840
> 
> 标签：c#, asp.net-mvc, fileresult

我正在尝试通过控制器 ActionResult 返回大文件，并实现了一个自定义 FileResult 类，如下所示。

```
 public class StreamedFileResult : FileResult
{
    private string _FilePath;

    public StreamedFileResult(string filePath, string contentType)
        : base(contentType)
    {
        _FilePath = filePath;
    }

    protected override void WriteFile(System.Web.HttpResponseBase response)
    {
        using (FileStream fs = new FileStream(_FilePath, FileMode.Open, FileAccess.Read))
        {
            int bufferLength = 65536;
            byte[] buffer = new byte[bufferLength];
            int bytesRead = 0;

            while (true)
            {
                bytesRead = fs.Read(buffer, 0, bufferLength);

                if (bytesRead == 0)
                {
                    break;
                }

                response.OutputStream.Write(buffer, 0, bytesRead);
            }
        }
    }
} 
```

但是我遇到的问题是整个文件似乎被缓冲到内存中。我需要做什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T17:47:42.677

您需要刷新响应以防止缓冲。但是，如果您在不设置内容长度的情况下继续缓冲，用户将看不到任何进度。因此，为了让用户看到正确的进度，IIS 会缓冲整个内容，计算内容长度，应用压缩，然后发送响应。我们采用以下程序以高性能的方式向客户交付文件。

```
FileInfo path = new FileInfo(filePath);

// user will not see a progress if content-length is not specified
response.AddHeader("Content-Length", path.Length.ToString());
response.Flush();// do not add anymore headers after this...

byte[] buffer = new byte[ 4 * 1024 ]; // 4kb is a good for network chunk

using(FileStream fs = path.OpenRead()){
   int count = 0;
   while( (count = fs.Read(buffer,0,buffer.Length)) >0 ){
      if(!response.IsClientConnected) 
      {
          // network connection broke for some reason..
          break;
      }
      response.OutputStream.Write(buffer,0,count);
      response.Flush(); // this will prevent buffering...
   }
} 
```

您可以更改缓冲区大小，但 4kb 是理想的，因为较低级别的文件系统也以 4kb 的块读取缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T18:32:36.177

Akash Kava 部分正确，部分错误。您不需要添加 Content-Length 标头或之后进行刷新。但是你这样做，需要定期冲洗`response.OutputStream`，然后`response`。ASP.NET MVC（至少版本 5）会自动将其转换为“Transfer-Encoding: chunked”响应。

```
byte[] buffer = new byte[ 4 * 1024 ]; // 4kb is a good for network chunk

using(FileStream fs = path.OpenRead()){
   int count = 0;
   while( (count = fs.Read(buffer,0,buffer.Length)) >0 ){
      if(!response.IsClientConnected) 
      {
          // network connection broke for some reason..
          break;
      }
      response.OutputStream.Write(buffer,0,count);
      response.OutputStream.Flush();
      response.Flush(); // this will prevent buffering...
   }
} 
```

我测试了它并且它有效。

# python - 使用python检查列表中是否存在元素

> ID：12464254
> 
> 赞同：2
> 
> 时间：2012-09-17T17:24:36.787
> 
> 标签：python

我是 python 新手，想知道是否有人可以帮助我解决这个问题。我正在尝试查看 b 中的元素是否在 a 中。这是我的尝试。目前我没有得到任何输出。任何帮助将不胜感激，谢谢！

```
a = [1]
b = [1,2,3,4,5,6,7]

for each in b:
    if each not in a == True:
        print(each + "is not in a") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T17:26:20.713

您正在测试两种不同的东西，结果是 False；Python 正在[链接操作符](http://docs.python.org/reference/expressions.html#not-in)，有效地测试是否`(each is in a) and (a == True)`：

```
>>> 'a' in ['a'] == True
False
>>> ('a' in ['a']) and (['a'] == True)
False
>>> ('a' in ['a']) == True
True 
```

无论如何，您永远不需要测试`True`if 语句：

```
if each not in a: 
```

足够。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T17:26:32.070

你应该可以说：

```
if each not in a:
   print ("%d is not in a" % each) 
```

您的实际表达式正在使用运算符链接：

```
if a > b > c: 
```

解析为：

```
if (a > b) and (b > c): 
```

在蟒蛇。这意味着您的表达式实际上被解析为：

```
if (each not in a) and (a == True): 
```

但`a == True`将始终返回`False`，因此该`if`块将永远不会执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T17:28:49.947

```
a = [1,2,3]
b = [1,2,3,4,5,6,7]
c = [7,8,9]

print set(a) <= set(b) #all elements of a are in b
print set(c) <= set(b) #all elements of c are in b 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T17:31:43.227

最好看看B和A的区别

```
 set(b).difference(set(a)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T17:28:02.147

你不需要 ==True。只是：如果每个都不在一个：

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T17:31:05.167

使用[sets](http://docs.python.org/library/stdtypes.html#set)真的很容易：

```
a = [1]
b = [1, 2]

only_in_b = set(b) - set(a)
# set([2]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-17T17:45:59.300

其他方式：

```
for bb in b:
    try:
        a.index(bb)
    except:
        print 'value is not in the list: ' + str(bb) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-17T18:40:46.060

如果这两个列表很大，我想补充一点。这不是最好的方法。你的算法是 O(n^2)。最好的方法是遍历a，将元素作为键添加到字典中。然后，遍历第二个列表，检查元素是否已经在字典中，这是一个 O(n) 算法。

# git - 如何使用 .gitattributes 避免在 git root 中包含文件夹，但在 dist 文件夹中包含同名文件夹以进行 zip

> ID：12464258
> 
> 赞同：4
> 
> 时间：2012-09-17T17:24:46.313
> 
> 标签：git, github

我在存储库的根目录中有一个名为**lib**的文件夹，在 dist 文件夹中有另一个名为**lib的文件夹。**

我正在尝试使用`.gitattributes`文件排除除 dist 以外的所有文件夹和文件，以便任何以 zip 或 tarball 下载的人都只会 git 分发文件

我的麻烦是以下`.gitattributes`文件还删除了 dist 文件夹中的 lib 文件夹

```
.gitattributes export-ignore
.gitignore export-ignore
Cakefile export-ignore
swagger-ui.json export-ignore
bin export-ignore
lib export-ignore
node_modules export-ignore
src export-ignore 
```

我尝试在 lib 之前添加一个斜线，在 lib 之后，似乎没有任何帮助

我如何使它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T17:37:34.680

您应该能够`dist/.gitattributes`使用以下条目创建一个：

```
lib -export-ignore 
```

关闭该特定目录的该属性。还没有真正尝试过，但手册页暗示这就是这样做的方法。目前尚不清楚（无论如何对我来说）模式字段 in`.gitattributes`的解释方式是否与 in 相同`.gitignore`，这可能解释了为什么添加 '/' 没有按您预期的方式工作。

# android - Android AutoCompleteTextView：如何验证用户是否选择了建议值或输入了新值？

> ID：12464260
> 
> 赞同：1
> 
> 时间：2012-09-17T17:24:52.840
> 
> 标签：android, autocompletetextview

如何以编程方式区分用户从 AutoCompleteTextView 选择建议值之一或输入全新值的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:35:50.100

您可以保留一个布尔变量，在`onCommitCompletion`调用时将其设置为 true，并在手动更改值时（`onKeyDown`例如按下时）设置为 false。

# php - drupal 更改默认节点设置

> ID：12464265
> 
> 赞同：0
> 
> 时间：2012-09-17T17:25:19.187
> 
> 标签：php, drupal

我正在学习drupal并做这种教程类型的事情，我只是在这里停留了大约45分钟，这让我发疯......

基本上我正在阅读的教程类型的东西有一个练习，需要默认选中“创建新修订”复选框（http://drupal.org/node/1576500）。我已经在这里待了一个小时，只是想不通。

如果有人可以帮助我解决这个问题，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:30:28.933

创建新节点类型或编辑现有节点类型时，/admin/structure/types/manage/[node_type] 的编辑页面在底部有一个菜单。打开“发布选项”并选中“创建新修订”。现在，在创建该类型的新节点时，默认情况下会选中该复选框。

# ruby-on-rails - 无法显示图像

> ID：12464267
> 
> 赞同：-1
> 
> 时间：2012-09-17T17:25:35.650
> 
> 标签：ruby-on-rails

我正在尝试复制 Agile Web Development with Rails 4th Edition 中解释的项目。

在逐步完成本书的练习时，我无法在我的网站上看到图像。

在`products/index.html.erb`：

```
<td><%= image_tag(product.image_url, :class => 'list_image') %></td> 
```

在`products/show.html.erb`：

```
<p><b>Image url:</b> <%= @product.image_url %></p> 
```

并在`_form.html.erb`：

```
<div class="field"><%= f.label :image_url %><br /> <%= f.text_field :image_url %></div> 
```

当我检查 html 源代码时，它显示的路径`ruby.jpg`为

```
<img alt="Ruby" class="list_image" src="/images/ruby.jpg" /> 
```

该文件位于`depot/app/assets/images/ruby.jpg`

它只显示路径，而不是图像。我重新启动了服务器并清除了缓存，但仍然没有显示图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:32:09.707

正如其他海报所指出的，您需要预先提供更多信息。理想情况下，对于这样的问题，您应该引用应用程序中尝试显示图像的所有位，因此请告诉我们模型字段 (image_url) 中的内容，视图中的内容，呈现的 html 中的内容。

从一种特定的产品及其形象开始。首先找出图像路径，然后检查磁盘是否存在该图像，然后问自己为什么它没有显示，然后也许尝试放入手动图像链接进行测试。

尝试编辑您的问题以填写此处的空白：

您是在本地还是在服务器上尝试此操作（最好详细说明您的设置）？

...

当你把它放在你的视图中时你会看到什么

```
<%= product.image_url %>? 
```

...

相对于公共的磁盘上的图像文件在哪里（即路径是什么），你能找到它吗？

...

尝试手动为磁盘上的图像路径添加图像标记，你看到了什么？（例如用于 public/system/images/4/4.jpg 使用

```
<%= image_tag('/system/images/4/4.jpg') %>) 
```

...

如果所有其他方法都失败了，请尝试在 public/test.jpg 中手动放置图像，并链接到它：

```
<%= image_tag('/public/test.jpg') %> 
```

...

# java - Foursquare API 使用：/venue/stats

> ID：12464268
> 
> 赞同：0
> 
> 时间：2012-09-17T17:25:44.787
> 
> 标签：java, foursquare

我对 /venue/stats Foursquare API 的使用和工作有几个疑问。

Q1。我将使用 /venue/stats 来获取提供场地 ID 的信息。所以我已经注册了我的应用程序并获得了客户端 ID 和秘密值。我去了 Foursquare API 端点并尝试使用 /venue/stats api，我注意到 FSQ 自动生成了一个 oauth_token，所以这个 oauth_token 是我每次使用这个 api 时都需要使用的同一个令牌吗？我需要执行提到的身份验证步骤吗？

Q2。尝试 api 生成一个在 api URL 中有 /simulate 的链接。我认为这是因为我正在测试 API，因此 FSQ 将此类 api 调用归类为模拟调用。请确认我的理解。如果是这样，那么每当我使用提到的 api 即 /v2/venues/venue_id/stats 时，我都会收到一条错误 JSON，说明我无权查看场地统计信息。你能告诉我为什么吗？如果这是由于 access_token 问题，那么模拟呼叫也应该出现同样的问题？

希望尽快得到答复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:26:36.910

在 API Explorer 栏的正下方，它显示“自动添加了 OAuth 令牌”。您不使用此令牌。如果您在使用 API Explorer 时登录，我确信它是临时的或使用您的登录信息创建的。您仍然必须使用身份验证过程来获取有效的访问令牌。但是，您可以保存此访问令牌并再次使用它，从而跳过身份验证过程。访问令牌充当用户和应用程序唯一的密钥。在此处阅读更多信息：[https ://developer.foursquare.com/overview/auth](https://developer.foursquare.com/overview/auth)

模拟功能主要用于 API 调用，通常需要您成为场地管理员。除非应用程序是由作为经理的用户进行的，或者除非您使用经理的访问令牌进行呼叫，否则某些呼叫无法完成。

# c++ - C ++ ifstream指针打开文件失败

> ID：12464273
> 
> 赞同：2
> 
> 时间：2012-09-17T17:26:07.503
> 
> 标签：c++, ifstream

似乎不像`ifstream*->open`我预期的那样工作......这是代码：（`g++ 4.7`使用`-std=c++11`in编译`MAC OSX 10.7`）

```
#include <string>
#include <iostream>
#include <fstream>
#include <vector>
using namespace std;
int main(int argc, char** argv)
{
    string line;
    vector<string> fname = {"a.txt","b.txt"};
    vector<ifstream*> files ( 2, new ifstream );

    files[0]->open( fname[0] );
    getline( *files[0], line,  '\n');
    cerr<<"a.txt: "<<line<<endl; 
    //this one prints the first line of a.txt

    line.clear();

    files[1]->open( fname[1] );
    getline( *files[1], line, '\n'); 

    cerr<<"b.txt: "<<line<<endl;
    //but this one fails to print any from b.txt
    //actually, b.txt is not opened!

    return 0;
} 
```

谁能告诉我这里出了什么问题？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T17:30:25.283

这`new std::ifstream`在使用时执行一次，而不是每个`2`您请求的值执行一次。

创建一个 ifstream 指针，其指针值被构造函数`new std::ifstream`插入两次。`files``std::ifstream`

`std::vector`只处理它包含的对象，在这种情况下是`ifstream*`指针。因此，`2`复制指针值。当`files`超出范围时，会处理指针（以及向量中的支持数据），但不会处理指针指向的值。因此，vector 不会删除您的新`std::ifstream`对象（两次放置在 vector 中）。

`operator delete`不需要你，因为指针可以有很多不容易确定的用途。其中之一是*故意将相同的指针两次放入向量中*。

# ruby-on-rails-3 - 如何使用 RSpec 在 after_save 回调中测试类初始化？

> ID：12464274
> 
> 赞同：1
> 
> 时间：2012-09-17T17:26:07.797
> 
> 标签：ruby-on-rails-3, testing, rspec, callback, initialization

我有以下方法：

```
class Topic
def create_or_rename_folder
  unless self.destroyed?
    bucket = CreateTopicFolder.new(bucket_name)
    bucket.create_or_rename_folder(permalink.split("/").last)
  end
end
... 
```

这被称为：`after_save :create_or_rename_folder, :if => :production_env?`

我想测试一下，在创建一个`Topic`新`CreateTopicFolder`实例时会创建一个新实例，并且*如果*a`Topic`被销毁，`CreateTopicFolder`则*不会*创建一个新实例。

该类看起来像：

```
class CreateTopicFolder

   def initialize(bucket_name)
    s3 = AutoVideoAssociate
    s3.connect
    @bucket = s3.find_bucket(bucket_name)
  end
  ... 
```

测试这个的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:24:08.277

```
context "When creating a Topic" do
  it "creates a CreateTopicFolder" do
    create_topic_folder = mock(CreateTopicFolder)
    CreateTopicFolder.stub(:new) { create_topic_folder }
    create_topic_folder.
      should_receive(:create_or_rename_folder).
      with("Sample Bucket Name")
    topic = Topic.new
    topic.bucket_name = "Sample Bucket Name"
    topic.save!
  end
end

context "When destroying a Topic" do
  it "does not create a CreateTopicFolder" do
    CreateTopicFolder.should_not_receive(:new)
    topic = mock_model(Topic)
    topic.destroy
  end
end 
```

# android-ndk - 加载共享库有错误android

> ID：12464279
> 
> 赞同：-1
> 
> 时间：2012-09-17T17:26:37.017
> 
> 标签：android-ndk, shared-libraries, static-libraries

我构建了一个在本机代码中使用 libcurlstatic.a、libssl.so 和 libcrypto.so 的 android 应用程序，并生成了另一个名为 libcurlapp.so 的共享库，在这里我想知道何时我想加载这个库在我的应用程序中是否有必要加载所有库或只有 libcurlapp.so 就足够了..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:34:55.923

是的，您的 Java 代码负责以正确的顺序加载所有必要的共享库。

这仅涉及您随 APK 安装的库。/system/lib 中设备自带的系统库，系统会根据需要加载。

加载库的顺序很重要：如果 libcurlapp.so 调用 libssl.so 和 libcrypto.so，则应首先加载 libssl.so 和 libcrypto.so。

# javascript - DIV 内文本中的新行

> ID：12464280
> 
> 赞同：0
> 
> 时间：2012-09-17T17:26:42.960
> 
> 标签：javascript, jquery

我有点困惑，因为当我在 div 中插入存储在 mysql 中的文本时，我使用以下句子插入文本：

```
<div class="menssge_holder"><?php echo str_replace("\n", "</p>", $conversation[$i]['message']); ?></div> 
```

这句话工作得很好，但是当用户在文本区域中输入新消息并按下发送按钮时，我将该文本放在 div_holder 中并且 '\n' 不生效。

我应该在 javascript 或 jQuery 中使用什么等价物？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:28:29.090

这将生成不正确的 html。如果您想用新行替换，您将有一堆`</p>`with no ，请尝试而不是按照我的@MarcB 上面的建议，您可能还想尝试 replace 。`<p>``\n``<br />``</p>.``\r\n`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:29:17.763

替换`</p>`为`<p>`or`<br />`就可以了。此外，如果您正在使用`p`，以这种方式提供 CSS`p`将很有帮助：

```
p {margin: 0 0 15px;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T17:30:13.410

```
<div class="menssge_holder"><?php echo str_replace(/\n/ig, "<br />", $conversation[$i]['message']); ?></div> 
```

在你的情况下，你需要这样的东西：

## *[jsBin 演示](http://jsbin.com/ayizof/4/edit)*

```
$('#post').click(function(){

  var copyThis = $('#textarea').val().replace(/\n/ig, '<br />');  
  $('#result').html( copyThis );

}); 
```

# html - 找出我页面中的 z-index

> ID：12464281
> 
> 赞同：0
> 
> 时间：2012-09-17T17:26:46.580
> 
> 标签：html, css, z-index

我的[页面中有三个 z-index 级别](http://jsfiddle.net/A2gZc/)

*   `z-index: 1`用于将`position: fixed`图像定位为背景的 div
*   `z-index: 2``position: absolute`如果单击 producto 链接，将在其中下降的 div 滑动框（在此[示例](http://jsfiddle.net/A2gZc/)中单击 producto 链接两次）
*   `z-index: 3`对于`position: relative`带有我的标题和内容的 div

我想保持 z-index: 2 中的空间与背景中的图像完全相同，直到如果您单击 Producto 链接，我的滑动框掉落的同一点，但是我想再次将我的内容放在 z-index:3 中。为了将 div 保留在 z-index: 1 作为一个小窗口，里面有我的图像。

我正在努力实现这一目标，我认为现阶段这是一个非常愚蠢的想法。

希望解释清楚，否则告诉我不清楚的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:33:53.877

发现了问题，我在 div z-index 3 中应用了两倍的背景颜色，这就是为什么我没有在 z-indez 中看到 div：1

# java - 如何从 JBoss Seam 2.3 Action Bean 注入 Spring 3.0 注释 bean

> ID：12464285
> 
> 赞同：0
> 
> 时间：2012-09-17T17:27:02.273
> 
> 标签：java, jsf-2, richfaces, spring-3, jboss-seam

我想使用以下环境开发一个简单的应用程序。

1.  JBoss 7.1.1
2.  JBoss 缝 2.3
3.  JSF 2.0
4.  Rifaces 4.0
5.  春天 3.0
6.  JPA 2.0
7.  带有 JBoss 工具 3.2 的 Eclipse IDE

大多数配置都能正常工作。但我无法从 Seam Action Bean 注入 Spring Bean。页面加载时没有错误和异常。我的数据表是

在 web.xml 中，

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>jsf-seam</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.seam</url-pattern>
  </servlet-mapping>
  <context-param>
    <param-name>org.richfaces.skin</param-name>
    <param-value>blueSky</param-value>
  </context-param>
  <listener>
    <listener-class>org.jboss.seam.servlet.SeamListener</listener-class>
  </listener>
  <filter>
    <filter-name>Seam Filter</filter-name>
    <filter-class>org.jboss.seam.servlet.SeamFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>Seam Filter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <servlet>
    <servlet-name>Seam Resource Servlet</servlet-name>
    <servlet-class>org.jboss.seam.servlet.SeamResourceServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>Seam Resource Servlet</servlet-name>
    <url-pattern>/seam/resource/*</url-pattern>
  </servlet-mapping>
  <context-param>
    <param-name>facelets.DEVELOPMENT</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.xhtml</param-value>
  </context-param>
  <security-constraint>
    <display-name>Restrict raw XHTML Documents</display-name>
    <web-resource-collection>
      <web-resource-name>XHTML</web-resource-name>
      <url-pattern>*.xhtml</url-pattern>
    </web-resource-collection>
    <auth-constraint/>
  </security-constraint>
</web-app> 
```

在 faces-config.xml 中

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
    <application>
        <locale-config>
            <default-locale>en</default-locale>
        </locale-config>
    </application>
</faces-config> 
```

在component.xml中；

```
<?xml version="1.0" encoding="UTF-8"?>
<components xmlns="http://jboss.org/schema/seam/components"
            xmlns:core="http://jboss.org/schema/seam/core"
            xmlns:persistence="http://jboss.org/schema/seam/persistence"
            xmlns:drools="http://jboss.org/schema/seam/drools"
            xmlns:bpm="http://jboss.org/schema/seam/bpm"
            xmlns:security="http://jboss.org/schema/seam/security"
            xmlns:mail="http://jboss.org/schema/seam/mail"
            xmlns:web="http://jboss.org/schema/seam/web"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:spring="http://jboss.com/products/seam/spring"
            xsi:schemaLocation=
                "http://jboss.org/schema/seam/core http://jboss.org/schema/seam/core-2.3.xsd
                 http://jboss.org/schema/seam/persistence http://jboss.org/schema/seam/persistence-2.3.xsd
                 http://jboss.org/schema/seam/drools http://jboss.org/schema/seam/drools-2.3.xsd
                 http://jboss.org/schema/seam/bpm http://jboss.org/schema/seam/bpm-2.3.xsd
                 http://jboss.org/schema/seam/security http://jboss.org/schema/seam/security-2.3.xsd
                 http://jboss.org/schema/seam/mail http://jboss.org/schema/seam/mail-2.3.xsd
                 http://jboss.org/schema/seam/web http://jboss.org/schema/seam/web-2.3.xsd
                 http://jboss.org/schema/seam/components http://jboss.org/schema/seam/components-2.3.xsd">

   <core:init debug="true" jndi-pattern="@jndiPattern@"/>
   <spring:context-loader config-locations="classpath:spring-bean.xml"/>
   <core:manager concurrent-request-timeout="500"
                 conversation-timeout="120000"
                 conversation-id-parameter="cid"
                 parent-conversation-id-parameter="pid"/>

   <!-- Make sure this URL pattern is the same as that used by the Faces Servlet -->
   <web:hot-deploy-filter url-pattern="*.seam"/>

   <!-- If you are still using JBoss 4, uncomment this to have your PU started -->
<!--   <persistence:entity-manager-factory name="entityManagerFactory"-->
<!--                      persistence-unit-name="jsf-seam"/>-->
   <!-- If you are still using JBoss 4, uncomment this to have the entityManagerFactory ysed -->
<!--   <persistence:managed-persistence-context name="entityManager" auto-create="true"-->
<!--                          entity-manager-factory="#{entityManagerFactory}"/>-->

   <persistence:managed-persistence-context name="entityManager" auto-create="true"
                           persistence-unit-jndi-name="java:/jsf-seamEntityManagerFactory"/>

   <drools:rule-base name="securityRules">
      <drools:rule-files><value>/security.drl</value></drools:rule-files>
   </drools:rule-base>

   <security:rule-based-permission-resolver security-rules="#{securityRules}"/>

   <security:identity authenticate-method="#{authenticator.authenticate}" remember-me="true"/>

   <event type="org.jboss.seam.security.notLoggedIn">
      <action execute="#{redirect.captureCurrentView}"/>
   </event>
   <event type="org.jboss.seam.security.loginSuccessful">
      <action execute="#{redirect.returnToCapturedView}"/>
   </event>

   <mail:mail-session host="localhost" port="25"/>

   <!-- For use with jBPM pageflow or process management -->
   <!--
   <bpm:jbpm>
      <bpm:process-definitions></bpm:process-definitions>
      <bpm:pageflow-definitions></bpm:pageflow-definitions>
   </bpm:jbpm>
   -->

</components> 
```

在我的 Seam Action Bean 中；

```
@Scope(CONVERSATION)
@Name("ManageDepartmentBean")
public class ManageDepartmentBean implements Serializable {
    private static final long serialVersionUID = -4373053763864526454L;

    @Out(value = "departmentList")
    public List<Department> departmentList;

        public List<Department> getDepartmentList() {
            return departmentList;
        }   

    @In("#{DepartmentService}")
    private IDepartmentService departmentService;

    @Begin
    public String begin() {
        departmentList = departmentService.findAllDepartments();
        return "success";
    }

    public String increment() {
        return "success";
    }

    @End
    public String end() {
        return "home";
    }
} 
```

在我的 Spring bean 中；

```
@Service(value = "DepartmentService")
public class DepartmentService implements IDepartmentService{
    @Resource(name = "DepartmentDAO")
    private IDepartmentDAO departmentDAO;

    @Transactional(propagation = Propagation.REQUIRED)
    public List<Department> findAllDepartments() {
        return departmentDAO.findAll();
    }
} 
```

我也尝试在 web.xml 中使用如下，但它不起作用。

```
 <context-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>classpath:spring-beans.xml</param-value>
  </context-param>
  <listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener> 
```

在我的页面中；

```
 <rich:dataTable value="#{ManageDepartmentBean.departmentList}" var="dep" id="departmentTable">
        <rich:column sortBy="#{dep.id}">
            <f:facet name="header">
                <h:outputText value="Department ID"/>
            </f:facet>
            <h:outputText value="#{dep.id}" />
        </rich:column>
        <rich:column sortBy="#{dep.name}">
            <f:facet name="header">
                <h:outputText value="Name"/>
            </f:facet>
            <h:outputText value="#{dep.name}" />
        </rich:column>
        <rich:column sortBy="#{dep.description}">
            <f:facet name="header">
                <h:outputText value="Description"/>
            </f:facet>
            <h:outputText value="#{dep.description}}" />
        </rich:column>
    </rich:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T04:45:50.897

我可以使用 @In 注释从接缝动作 bean 中注入 spring bean。无需将 seam 组件配置到 spring-bean.xml 或 applicationContext.xml 中。

在 web.xml 中

```
 <context-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>classpath:spring-beans.xml</param-value>
  </context-param>
  <listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener> 
```

在 faces-config.xml 中

```
<application>
    <variable-resolver>org.springframework.web.jsf.DelegatingVariableResolver</variable-resolver>   
</application> 
```

# css - simple_form 不能内联对齐 2 个集合选择

> ID：12464296
> 
> 赞同：2
> 
> 时间：2012-09-17T17:28:15.067
> 
> 标签：css, ruby-on-rails, inline, simple-form

**如何在 simple_form 中对齐 2 个集合下拉列表并使它们内联 [drop 1] [drop 2]**

上的例子：

```
http://simple-form-bootstrap.plataformatec.com.br/articles/new 
```

显示如何对齐复选框和单选按钮，但无论我尝试将 2 个集合下拉列表彼此对齐对齐，我都无法做到。

尝试了我可以在这里和在线找到的所有解决方案，包括内联包装、内联类等。没有任何效果:(

```
= f.input :age_from,
            :collection => 18..60,
            :selected => 18,
            :label => 'Age from',
            :style => "width: 85px !important"

  = f.input :age_to,
            :collection => 18..60,
            :selected => 55,
            :label => 'Age to',
            :style => "width: 85px !important" 
```

HTML：

```
 <form accept-charset="UTF-8" action="/sessions" class="simple_form form-horizontal" id="new_session" method="post" novalidate><div style="margin:0;padding:0;display:inline"></div>
          <div class="control-group select required"><div class="controls"></div></div>
          <div class='ruler'></div>
          <div class="control-group select optional"><label class="select optional control-label" for="session_age_from">Age from</label><div class="controls"><select class="select optional" id="session_age_from" name="session[age_from]"><option value="18" selected="selected">18</option>

          <option value="60">60</option></select></div></div>
          <div class="control-group select optional"><label class="select optional control-label" for="session_age_to">Age to</label><div class="controls"><select class="select optional" id="session_age_to" name="session[age_to]"><option value="18">18</option>

          <option value="55" selected="selected">55</option>
          <option value="60">60</option></select></div></div>
          <div class='ruler'></div>
          <div class="control-group string optional"></div>
        </form> 
```

CSS：

```
.form-search input, .form-search textarea, .form-search select, .form-search .help-inline, .form-search .uneditable-input, .form-search .input-prepend, .form-search .input-append, .form-inline input, .form-inline textarea, .form-inline select, .form-inline .help-inline, .form-inline .uneditable-input, .form-inline .input-prepend, .form-inline .input-append, .form-horizontal input, .form-horizontal textarea, .form-horizontal select, .form-horizontal .help-inline, .form-horizontal .uneditable-input, .form-horizontal .input-prepend, .form-horizontal .input-append {
    display: inline-block;
    margin-bottom: 0;
    vertical-align: middle;
}
select {
    background-color: #FFFFFF;
    border-style: solid;
    border-width: 1px;
}
select {
    margin: 0.5em 0;
}
select {
    background-color: #FFFFFF;
    border: 1px solid #BBBBBB;
    width: 220px;
}
select, input[type="file"] {
    height: 30px;
    line-height: 30px;
}
select, textarea, input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input {
    border-radius: 3px 3px 3px 3px;
    color: #555555;
    display: inline-block;
    font-size: 14px;
    height: 20px;
    line-height: 20px;
    margin-bottom: 9px;
    padding: 4px 6px;
}
input, button, select, textarea {
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
}
label, input, button, select, textarea {
    font-size: 14px;
    font-weight: normal;
    line-height: 20px;
}
button, input, select, textarea {
    font-size: 100%;
    margin: 0;
    vertical-align: middle;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T00:17:40.620

一种选择是只使用引导布局 div 标签来对齐它们。我使用 span3 bc 我的总形式是 span6 但您可以根据需要对其进行修改。

```
<div class="row">
    <div class="span3"><%= f.input :age_from, :collection => 18..60, :selected => 18, :label => 'Age from', :style => "width: 85px !important" %></div>
    <div class="span3"><%= f.input :age_to, :collection => 18..60, :selected => 55, :label => 'Age to', :style => "width: 85px !important" %></div>
</div> 
```

# javascript - jQuery input value backup and replace on blur

> ID：12464301
> 
> 赞同：0
> 
> 时间：2012-09-17T17:28:34.800
> 
> 标签：javascript, jquery, focus, onblur

I have a table of inputs that are read only, and these are populated from a DB. A user is going to be able to double-click on a cell and activate it for editing. In order to send the new data to the DB the user must press a button. The user can also double-click another cell after activating one, and that is my problem. I want to be able to replace the original value of the cell if the focus was lost to something else other than the button.

[I have this fiddle that represents my problem.](http://jsfiddle.net/PnSdC/18/)

HTML:

```
<table>
    <tr>
      <td><input id="1" type="text" value="Data 1" readonly="readonly"/></td>
      <td><input id="2" type="text" value="Data 2" readonly="readonly"/></td>
      <td><input id="3" type="text" value="Data 3" readonly="readonly"/></td>
      <td><input id="4" type="text" value="Data 4" readonly="readonly"/></td>
    </tr>
</table>

<button>Send</button> 
```

JavaScript:

```
$(document).ready(function(){ 
                var element = null;
                $('input').dblclick(function(){ 
                    $(this).data("backup",$(this).val())                    
                    if(element == null){   
                        $(this).toggleClass("active");
                        $(this).blur(function(event){
                                        window.setTimeout(function(){
                                            if(!$('button').is(':focus')){ 
                                                $(this).val($(this).data("backup"));
                                                //alert("button has no focus");
                                            }  
                                        },100);  
                                    });                  
                        $(this).attr('readonly',!$(this).attr('readonly'));  
                        element = $(this);                           
                    }
                    else{                            
                        if(element.attr('id') == $(this).attr('id')){
                            $(this).toggleClass("active");
                            $(this).attr('readonly',!$(this).attr('readonly'));                                    
                            element = null;
                        } 
                        else{
                            element.toggleClass("active");
                            element.attr('readonly',!element.attr('readonly'));
                            $(this).toggleClass("active");
                            $(this).blur(function(event){
                                        window.setTimeout(function(){
                                            if(!$('button').is(':focus')){ 
                                                $(this).val($(this).data("backup"));
                                                //alert("button has no focus");
                                            }  
                                        },100);  
                                    });
                            $(this).attr('readonly',!$(this).attr('readonly'));
                            element = $(this); 

                        }                                                                                
                    }                        
                });
    $('button').click(function(){
        var value = $('tr').find('.active');
        var data = value.val();
        alert(data);
    });            
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:45:51.750

Inside your doubleclick you could do this to reset the data:

```
$('input').each(function () {
   if ($(this).data("backup"))
       $(this).val($(this).data("backup"));
}); 
```

Updated fiddle: [http://jsfiddle.net/johnkoer/PnSdC/21/](http://jsfiddle.net/johnkoer/PnSdC/21/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:35:37.887

This will help, but you need add condition for `other than the button`.

```
$('input').focusout(function() {
    element.toggleClass("active");
    element.attr('readonly',!element.attr('readonly')); 
}); 
```

# jms - Hermes JMS 无法连接到 Websphere MQ 7.1（2035 错误）

> ID：12464303
> 
> 赞同：2
> 
> 时间：2012-09-17T17:28:38.763
> 
> 标签：jms, ibm-mq

我正在尝试使用 Hermes JMS 连接到 Websphere MQ 7.1，但我无法连接。我按照他们的指导，毫无问题地加载了所有罐子，设置插件，设置所有变量（主机名、端口、传输类型、队列管理器），选中底部的用户框并输入用户名和密码，然后确认我试图发现但是我收到以下消息：

> com.ibm.mq.MQException：MQJE001：完成代码“2”，原因“2035”。在 com.ibm.mq.MQManagedConnectionJ11.(MQManagedConnectionJ11.java:233) 在 com.ibm.mq.MQClientManagedConnectionFactoryJ11._createManagedConnection(MQClientManagedConnectionFactoryJ11.java:553) 在 com.ibm.mq.MQClientManagedConnectionFactoryJ11.createManagedConnection(MQClientManagedConnectionFactoryJ11.java:593)在 com.ibm.mq.StoredManagedConnection.(StoredManagedConnection.java:95) 在 com.ibm.mq.MQSimpleConnectionManager.allocateConnection(MQSimpleConnectionManager.java:198) 在 com.ibm.mq.MQQueueManagerFactory.obtainBaseMQQueueManager(MQQueueManagerFactory.java:882)在 com.ibm.mq.MQQueueManagerFactory.procure(MQQueueManagerFactory.java:770) 在 com.ibm.mq.MQQueueManagerFactory。

经过几个小时的试验和错误以及在网上的研究，问题似乎是由于授权错误而无法连接但是我能够使用 Java 代码（使用相同的 lib MQQueueConnectionFactory）进行连接，并且我也能够连接将 QueueZee 与完全相同的库一起使用，获取所有队列的列表并浏览它们，因此我知道用户授权问题不应该是问题。

我正在运行 Hermes JMS 1.14，并尝试同时使用 Java 1.6.0_33 和 1.7.0_5。Websphere MQ 在版本 7.1.0.0 上运行，并且这些库是从远程服务器上的此安装中获取的。

我尝试将通道变量设置为 SYSTEM.DEF.SVRCONN，这是我在 QueueZee 中用来让它工作的，但仍然是同样的问题。

有没有人以前见过这个问题，希望能对这种情况有所了解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:49:44.807

在 V7.1 中，新的 CHLAUTH 规则默认关闭对除 SYSTEM.ADMIN.SVRCONN 之外的所有 SYSTEM.* 通道的访问，并且默认情况下不允许对任何 SVRCONN 通道进行任何管理访问。为了诊断这一点，有必要知道使用了什么通道、设置的 CHLAUTH 规则、通道定义（特别是 MCAUSER 值）以及使用的 ID 是否在 mqm 组中。

您没有提到 QueueZee 设置是否也适用于 V7.1 QMgr 或者特别是这个。大胆猜测一下，我会说 CHLAUTH 规则已启用，而 SYSTEM.DEF.SVRCONN 通道此时已禁用。推荐的步骤是定义一个名称不以 SYSTEM 开头的新通道。并确保使用的 ID 不在 mqm 组中，而是被授权为非管理员 ID。

或者，可以使用 mqm 组中的 ID，但您必须定义 CHLAUTH 规则才能使其工作。例如，使用默认 CHLAUTH 规则`CHANNEL(*) BLOCKUSER(*MQADMIN)`，您可以将其更改为`CHANNEL(THE.NEW.CHL.NAME) BLOCKUSER('nobody')`. 新规则将比旧规则更具体，因此在您的频道上具有优先权。它告诉 QMgr 阻止用户 ID 'nobody'，但忽略任何提及 *MQADMIN。由于 'nobody' 无论如何都没有访问权限，但由于没有提及 *MQADMIN（因此没有被 i 规则阻止），因此该规则的效果是允许管理员访问该频道。

作为一种快速、肮脏和临时的措施，您还`ALTER QMGR CHLAUTH(DISABLED)`可以获得与 v7.0 和更早的 QMgrs 相同的行为。请注意，这允许匿名远程管理员和使用 mqm 用户 ID 执行远程代码。这就是更改默认设置的原因。现在，如果需要，您必须明确提供远程管理员访问权限。

有关此主题的更多信息，我推荐 IMPACT 会议上的[Securing Your QMgr](https://t-rob.net/links/)演示文稿。

请注意，QMgr 不会检查应用程序发送的密码。该字段存在以便通道出口可以根据 AD、LDAP 等验证密码。如果没有这样的出口，密码将被忽略。客户端传入的用户 ID 要么按面值接受，要么被通道的 MCAUSER 或 CHLAUTH 规则修改。

最后，当遇到授权问题时，最简单的诊断方法是`ALTER QMGR AUTHOREV(ENABLED)`使用[SupportPac MS0P](http://ibm.co/SupptPacMS0P)在 WMQ Explorer 中解码 PCF 消息。auths 错误最终出现在 QMgr 事件队列中。每条消息都会告诉您身份验证失败的对象、对该对象进行的 API 调用、调用的选项以及进行调用的 ID。我们经常发现拨打电话的 ID 不是我们想要的，或者程序正在使用未经授权的选项，因此这非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:03:05.663

不是真正的答案，只是对这个问题的一点研究。大约一小时前我遇到了同样的问题。我正在传递类似 domain\sortoflongusername 的用户名，而我在 WSMQ 服务器上的系统日志中看到的是我的用户名被截断为 12 个符号。我对hermesJMS 和soapui 一点都不熟悉（只是想把它提供给我们的测试人员以将其作为测试平台进行检查），所以也许这里的任何人都知道这个问题的根源。

# php - 无法按日期排序

> ID：12464304
> 
> 赞同：0
> 
> 时间：2012-09-17T17:28:44.007
> 
> 标签：php, mysql

我试图按日期订购帖子，但每当我尝试这样做时，我都会收到此错误：

警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 58 行的 C:\localhost\bootstrap\category.php 中给出

数据库结构： http: [//puu.sh/1630b](http://puu.sh/1630b)

```
<?php
//category.php
include 'connect.php';

//first select the category based on $_GET['cat_id']
$sql = "SELECT
            cat_id,
            cat_name,
            cat_description
        FROM
            categories
        WHERE
            cat_id = " . mysql_real_escape_string($_GET['id']);

$result = mysql_query($sql);

if(!$result)
{
    echo 'The category could not be displayed, please try again later.' . mysql_error();
}
else
{
    if(mysql_num_rows($result) == 0)
    {
        echo 'This category does not exist.';
    }
    else
    {
        //display category data
        while($row = mysql_fetch_assoc($result))
        {
            echo '<h2>Topics in &prime;' . $row['cat_name'] . '&prime; category</h2><br />';
            $title = $row['cat_name'];
                        include 'header.php';
        }

        //do a query for the topics
        $sql = "SELECT  
                    topic_id,
                    topic_subject,
                    topic_date,
                    topic_cat
                FROM
                    topics
                ORDER BY
                    topic_date DESC
                WHERE
                    topic_cat = " . mysql_real_escape_string($_GET['id']);

        $result = mysql_query($sql);

//      if(!$result)
//      {
//          echo 'The topics could not be displayed, please try again later.';
//      }
//      else
//      { 
            if(mysql_num_rows($result) == 0)
            {
                echo 'There are no topics in this category yet.';
            }
            else
            {
                //prepare the table
                echo '<table border="1" class="table table-bordered table-striped" style="float: right; width: 990px;">
                      <tr>
                        <th>Topic</th>
                        <th>Created at</th>
                      </tr>';   

                while($row = mysql_fetch_assoc($result))
                {               
                    echo '<tr>';
                        echo '<td class="leftpart">';
                            echo '<h3><a href="topic.php?id=' . $row['topic_id'] . '">' . $row['topic_subject'] . '</a><br /><h3>';
                        echo '</td>';
                        echo '<td class="rightpart">';
                            echo date('d-m-Y', strtotime($row['topic_date']));
                        echo '</td>';
                    echo '</tr>';
                    echo '';
                    echo '';
                }
                echo '</table>';
                echo '</div>';
            }
    //  }
    }
}

include('footer.php');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:37:48.623

在这种情况下，问题将出现在注释的第 52 - 57 行中，它们应该检查 mysql_query 是否成功。您的查询失败并返回**false**（布尔值），这是一个有效的返回值。

错误本身取决于您的数据库表结构（不是链接的一部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:36:42.183

您的查询执行失败并返回布尔值而不是资源！

*   在脚本中构建一些错误处理。
*   不要使用 mysql_ 函数，它们已被弃用。

`ORDER BY`现在您已经编辑了您的帖子，很明显`WHERE`.

# c++ - 解码位图时宽度不正确

> ID：12464310
> 
> 赞同：0
> 
> 时间：2012-09-17T17:28:59.407
> 
> 标签：c++, bitmap

我的源代码有一个错误，这基本上会导致位图图像显得太宽。例如，它将打印宽度和高度，高度是完美的（256），宽度也应该是 256，但程序说它是数十亿像素宽，而且每次都不同。这是源代码。

```
#include "glob.h"

/* Image type - contains height, width, and data */
struct Image {
    unsigned long sizeX;
    unsigned long sizeY;
    char *data;
};
typedef struct Image Image;

int ImageLoad(char *filename, Image *image) {
    FILE *file;
    unsigned long size;                 // size of the image in bytes.
    unsigned long i;                    // standard counter.
    unsigned short int planes;          // number of planes in image (must be 1)
    unsigned short int bpp;             // number of bits per pixel (must be 24)
    char temp;                          // temporary color storage for bgr-rgb conversion.

    // make sure the file is there.
    if ((file = fopen(filename, "rb"))==NULL){
        printf("bitmap Not Found : %s\n",filename);
        return 0;
    }

    // seek through the bmp header, up to the width/height:
    fseek(file, 18, SEEK_CUR);

    // read the width
    if ((i = fread(&image->sizeX, 4, 1, file)) != 1) {
        printf("Error reading width from %s.\n", filename);
        return 0;
    }
    printf("Width of %s: %lu\n", filename, image->sizeX);

    // read the height
    if ((i = fread(&image->sizeY, 4, 1, file)) != 1) {
        printf("Error reading height from %s.\n", filename);
        return 0;
    }
    printf("Height of %s: %lu\n", filename, image->sizeY);

    // calculate the size (assuming 24 bits or 3 bytes per pixel).
    size = image->sizeX * image->sizeY * 3;

    // read the planes
    if ((fread(&planes, 2, 1, file)) != 1) {
        printf("Error reading planes from %s.\n", filename);
        return 0;
    }
    if (planes != 1) {
        printf("Planes from %s is not 1: %u\n", filename, planes);
        return 0;
    }

    // read the bpp
    if ((i = fread(&bpp, 2, 1, file)) != 1) {
        printf("Error reading bpp from %s.\n", filename);
        return 0;
    }
    if (bpp != 24) {
        printf("Bpp from %s is not 24: %u\n", filename, bpp);
        return 0;
    }

    // seek past the rest of the bitmap header.
    fseek(file, 24, SEEK_CUR);

    // read the data.
    image->data = (char *) malloc(size);
    if (image->data == NULL) {
        printf("Error allocating memory for color-corrected image data\n");
        return 0;
    }

    if ((i = fread(image->data, size, 1, file)) != 1) {
        printf("Error reading image data from %s.\n", filename);
        return 0;
    }

    for (i=0; i<size; i+=3) { // reverse all of the colors. (bgr -> rgb)
        temp = image->data[i];
        image->data[i] = image->data[i+2];
        image->data[i+2] = temp;
    }

    // we're done.
    return 0;
}

// Load Bitmaps And Convert To Textures
void glob::LoadGLTextures() {
    // Load Texture
    Image *image1;

    // allocate space for texture
    image1 = (Image *) malloc(sizeof(Image));
    if (image1 == NULL) {
        printf("(image1 == NULL)\n");
        exit(0);
    }

    ImageLoad("data/textures/NeHe.bmp", image1);

    // Create Texture
    glGenTextures(1, &texture);
    glBindTexture(GL_TEXTURE_2D, texture);   // 2d texture (x and y size)

    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR); // scale linearly when image bigger than texture
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); // scale linearly when image smalled than texture

    // 2d texture, level of detail 0 (normal), 3 components (red, green, blue), x size from image, y size from image,
    // border 0 (normal), rgb color data, unsigned byte data, and finally the data itself.
    glTexImage2D(GL_TEXTURE_2D, 0, 3, image1->sizeX, image1->sizeY, 0, GL_RGB, GL_UNSIGNED_BYTE, image1->data);
}; 
```

glob.h 是这样的：

```
#ifndef GLOB_H_INCLUDED
#define GLOB_H_INCLUDED

#include <iostream>
#include <stdlib.h>
#include <stdio.h>      // Header file for standard file i/o.

#include <GL/glx.h>    /* this includes the necessary X headers */
#include <GL/gl.h>
//#include <GL/glut.h>    // Header File For The GLUT Library
//#include <GL/glu.h>   // Header File For The GLu32 Library

#include <X11/X.h>    /* X11 constant (e.g. TrueColor) */
#include <X11/keysym.h>

class glob {
    bool Running;
    GLuint texture; //make an array when we start using more then 1
    Display     *dpy;
    Window       win;
    XEvent       event;
    GLboolean    doubleBuffer;
    GLboolean    needRedraw;
    GLfloat      xAngle, yAngle, zAngle;
    float        camera_x, camera_y, camera_z;
public:
    glob();
    int OnExecute();
public:
    int init(int argc, char **argv);
    void LoadGLTextures();
    void OnEvent();
    void redraw(void);
};

#endif // GLOB_H_INCLUDED 
```

任何机构都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:33:35.543

很多事情可能会出错。

如果它是一个非常旧的文件，它可能有一个[`BITMAPCOREHEADER`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183372%28v=vs.85%29.aspx)大小字段，每个字段只有 2 个字节。

你的机器是小端的吗？BMP 文件以小端序存储。

请注意，高度可能是负数（这意味着它是自上而下的位图，而不是自下而上的位图）。如果您将一个小的负数解释为无符号 32 位 int，您将看到数十亿的值。

此外，您对实际像素数据的查找假定它在位图标题之后立即开始。这很常见，但不是必需的。[*文件*头](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183374%28v=vs.85%29.aspx)包含实际像素数据的偏移量。（Microsoft 文档将此称为“位图位”或“颜色数据”。）

我建议对文件的开头进行十六进制转储，并手动逐步检查以确保所有偏移和假设都是正确的。随意将十六进制转储的开头粘贴到您的问题中。

你在 Windows 上吗？你能打电话[`LoadImage`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183372%28v=vs.85%29.aspx)吗？

# c++ - boost 无法使用 gcc 移动 scoped_lock

> ID：12464314
> 
> 赞同：0
> 
> 时间：2012-09-17T17:29:09.577
> 
> 标签：c++, boost, c++11, move-semantics, scoped-lock

以下在 VS2010 (Express) 下编译，但不是 gcc（此处为 4.6.2）。

**可锁定的.h：**

```
#include <boost/thread/mutex.hpp>
#include <boost/interprocess/sync/scoped_lock.hpp>

template<typename T>
class LockedProxy : boost::noncopyable
{
public:
    inline LockedProxy(boost::mutex & m, T * obj)
        :lock(m),
        t(obj)
    {}
    inline LockedProxy(const LockedProxy && other)
        :lock(std::move(other.lock)),
        t(std::move(other.t))
    {}

    inline       T * operator->()       { return t; }
    inline const T * operator->() const { return t; }

    inline const T & operator*() const { return *t; }
    inline       T & operator*()       { return *t; }

private:
    boost::interprocess::scoped_lock<boost::mutex> lock;
    T * t;
};

template<typename T>
class Lockable
{
public:

    // Convenience typefed for subclasses to use
    typedef T LockableObjectType;

    inline Lockable(const T & t)
        :lockableObject(t)
    {}

    inline LockedProxy<LockableObjectType> GetLockedProxy() {
        return LockedProxy<LockableObjectType>(mutex, &lockableObject);
    }

protected:
    LockableObjectType lockableObject;
    boost::mutex mutex;
}; 
```

**主.cpp：**

```
#include <iostream>
#include <string.h>
#include "Lockable.h"    

void f(Lockable<std::string> & str)
{
    auto proxy = str.GetLockedProxy();

    *proxy = "aa";
    proxy->append("bb");

    std::cout << "str = " << *proxy << std::endl;
}

void g(Lockable<int> & i)
{
    { // reduce lock's lifespan
        auto proxy = i.GetLockedProxy();
        *proxy = 321;
    }

    // relock, lock lives for the statement
    std::cout << "i = " << *i.GetLockedProxy() << std::endl;
}

int main()
{
    Lockable<std::string> str("abc");
    //Can't use str here, it is not locked
    f(str);

    Lockable<int> i(123);
    g(i);

    return 0;
} 
```

**错误：**

```
In file included from main.cpp:3:0:
C:/Users/DrGibbs/Documents/code/boost_1_46_0/boost/interprocess/sync/scoped_lock.hpp: In constructor 'LockedProxy<T>::LockedProxy(const LockedProxy<T>&&) [with T = std::basic_string<char>, LockedProxy<T> = LockedProxy<std::basic_string<char> >]':main.cpp:7:37:   instantiated from here
C:/Users/DrGibbs/Documents/code/boost_1_46_0/boost/interprocess/sync/scoped_lock.hpp:56:4: error: 'boost::interprocess::scoped_lock<Mutex>::scoped_lock(const boost::interprocess::scoped_lock<Mutex>&)[with Mutex = boost::mutex, boost::interprocess::scoped_lock<Mutex> = boost::interprocess::scoped_lock<boost::mutex>]' is privateLockable.h:14:29: error: within this context
C:/Users/DrGibbs/Documents/code/boost_1_46_0/boost/interprocess/sync/scoped_lock.hpp: In constructor 'LockedProxy<T>::LockedProxy(const LockedProxy<T>&&) [with T = int, LockedProxy<T> = LockedProxy<int>]':
main.cpp:18:36:   instantiated from here
C:/Users/DrGibbs/Documents/code/boost_1_46_0/boost/interprocess/sync/scoped_lock.hpp:56:4: error: 'boost::interprocess::scoped_lock<Mutex>::scoped_lock(const boost::interprocess::scoped_lock<Mutex>&)[with Mutex = boost::mutex, boost::interprocess::scoped_lock<Mutex> = boost::interprocess::scoped_lock<boost::mutex>]' is private
Lockable.h:14:29: error: within this context 
```

据我了解，在`LockedProxy`'s move-constructor 中， the`scoped_lock`不是移动而是复制构造的，这确实不应该工作。不应该`std::move`保证它的移动建设吗？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:35:20.217

您的移动构造函数声明其参数`const`：

```
inline LockedProxy(const LockedProxy && other) 
```

它应该被声明为非常量：

```
inline LockedProxy(LockedProxy && other) 
```

您`std::move(other.lock)`将`other.lock`其作为 const 引用，因此返回一个 const rvalue 引用`const boost::interprocess::scoped_lock<boost::mutex> &&`，该引用不能传递给`boost::interprocess::scoped_lock<boost::mutex>`.

另请参阅[C++0x const RValue reference as function parameter](https://stackoverflow.com/questions/6307526/c0x-const-rvalue-reference-as-function-parameter)，它解释了 const rvalue 引用几乎完全没用。

# ruby-on-rails-3 - 将变量传递给 Simple_Form 自定义输入

> ID：12464315
> 
> 赞同：2
> 
> 时间：2012-09-17T17:29:15.050
> 
> 标签：ruby-on-rails-3, simple-form, form-for

我正在尝试使用 simple_form 自定义输入来记录多条记录。我的输入是：

```
class InlinedateInput < SimpleForm::Inputs::Base
  def input
    "#{@builder.text_field("startmonth", input_html_options)}".html_safe + "/" +    "#  
    {@builder.text_field("startday", input_html_options)}".html_safe + "/" "# 
    {@builder.text_field("startyear", input_html_options)}".html_safe + "To:    " "#
    {@builder.text_field("endmonth", input_html_options)}".html_safe + "/" + "#
    {@builder.text_field("endday", input_html_options)}".html_safe + "/" "#
    {@builder.text_field("endyear", input_html_options)}".html_safe + "Price:" "#
    {@builder.text_field("price", input_html_options)}".html_safe
  end

  #Makes the label target the day input
  def label_target
    "month"
  end
end 
```

基本上，问题是我在这个输入中定义了一堆不同的输入。因此，如果我尝试在表单中多次使用此方法，它只会提交最后一个。我需要以某种方式从我的表单中传递一个计数器变量，以便我可以拥有 startday_1、startday_2 等。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T13:44:47.940

您可以通过选项哈希将您想要的任何参数传递给自定义输入。

例如，您可以轻松地将自定义参数（计数器）传递给您的输入：

```
= f.input :my_field, :as => :custom_input, :counter => 2 
```

并将其访问到您的自定义输入代码中：

```
class CustomInput < SimpleForm::Inputs::StringInput
  def input
    counter = options[:counter] || -1
    input_html_options[:value] = counter
    super
  end
end 
```

# android - 调用 doBindService 时 UI 卡住

> ID：12464317
> 
> 赞同：1
> 
> 时间：2012-09-17T17:29:19.497
> 
> 标签：android, android-service, android-location

我创建了一个使用`LocationManager`监听器获取位置的服务。

现在我正在用它来等待我的活动​​以获取更新，但我的应用程序第一次运行并调用`doBindService`我的 UI 卡了一段时间。

我试图把它放在里面，`Thread`但这样它就不会更新我的 UI，因为它`doBindService` 可能正在运行不同的线程。

我有一个`IncomingHandler`可以获取消息并更新我的 UI。

我不知道有什么问题？

`doBindService`代码

```
public void doBindService(){

    bindService(
            new Intent(MyActivity.this, 
                     LocationService.class),
            mConnection,
            Context.BIND_AUTO_CREATE
    );
    mIsBound = true;
} 
```

`IncomingHandler`代码

```
class IncomingHandler extends Handler {
         @Override
         public void handleMessage(Message msg) {
             switch (msg.what) {
                 case LocationService.MSG_GET_LOCATION:

                     UserLocation userLoc = (UserLocation)msg.obj;
                     locationTxt.setText(userLoc.getUserLocation().trim());

                     locationTxt.startAnimation(fadeOutLoc);

                     break;

                 default:
                     super.handleMessage(msg);
             }
         }
     } 
```

**更新**

我试图每 10 秒将当前位置信息存储在我的应用程序中。这可能会导致我的 UI 卡住。所以任何人都可以建议我如何将我的位置数据定期存储在数据库中，并且我的 UI 不会卡住。

# php - 在 3 个不均匀的列中显示 UL 数据

> ID：12464321
> 
> 赞同：1
> 
> 时间：2012-09-17T17:29:27.043
> 
> 标签：php, mysql

我有一个 MySQL 查询，我将其保存到一个变量中以在页面上输出。我有一个无序列表中的数据，但我试图使用 3 个向左浮动的无序列表将数据分成三列。这是我当前的代码：

```
 $sqlCommand = 
           "SELECT  list_specialty.id, list_specialty.specialty  FROM list_specialty
            ORDER BY list_specialty.specialty ASC";
        $query = mysqli_query($myConnection,$sqlCommand) or die (mysqli_error($myConnection));

        $specialtyDisplay = '';

        $num = mysqli_num_rows($query);
        $split = intval($num/3); //number of items in every column

        $i = 0;

        while ($row = mysqli_fetch_array($query)) {
            $specialtyid = $row["id"];
            $specialtyname = $row["specialty"];

            $specialtyDisplay .= 
                '<li><a href="doctor.php?specialty=' . $specialtyid . '">' . $specialtyname . '</a></li>';
            $i++;
            if ($i == $split) {
                $specialtyDisplay .= '</ul> <ul>';
                $i = 0;
            }

        } 
```

只要我的数据完全可以被 3 整除（等列），这段代码就可以很好地工作。但是，当我的总行数不能被 3 整除时，上面的代码将不起作用。

我需要一个平衡列的解决方案，所以我可以有 3 个相等的列，第一列中有一个额外的元素，或者第一列和第二列中有一个额外的元素。

我需要在我的代码中更改什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:45:46.260

这将起作用：

1.  设置`$split`为最长列的长度
2.  行有 0、1 或 2 列长一个元素。->`$longcols = $num % 3`
3.  `$split`从打印列号时减去 1 `$longcols`（除非所有列的长度相同）

在代码中实现：

```
$num = mysqli_num_rows($query);
$split = ceil($num/3); // 1.

$i = 0;
$col = 1; //for counting columns
$longcols = $num % 3; // 2.

while ($row = mysqli_fetch_array($query)) {
    $specialtyid = $row["id"];
    $specialtyname = $row["specialty"];

    $specialtyDisplay .= 
        '<li><a href="doctor.php?specialty=' . $specialtyid . '">' . $specialtyname . '</a></li>';
    $i++;
    if ($i == $split) {
        $specialtyDisplay .= '</ul> <ul>';

        if( $longcols != 0 && $longcols == $col ) { $split--; } // 3.
        $i = 0;
        $col++; //increase columns count
    }

} 
```

带有注释的行是我已更改/插入的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:33:55.860

如果要支持更好的浏览器，可以使用[CSS 3 Multicolumns](http://www.quirksmode.org/css/multicolumn.html)。它不需要你分开。只是 CSS 有魔力。

```
div#multicolumn {
    -moz-column-count: 3;
    -moz-column-gap: 20px;
    -webkit-column-count: 3;
    -webkit-column-gap: 20px;
    column-count: 3;
    column-gap: 20px;
} 
```

### 截屏：

[CSS3 多列 http://css.flepstudio.org/images/css3/css3-multi-column.jpg](http://css.flepstudio.org/images/css3/css3-multi-column.jpg)

# firebreath - Firebreath可以在armx86平台上使用吗

> ID：12464322
> 
> 赞同：0
> 
> 时间：2012-09-17T17:29:28.217
> 
> 标签：firebreath

Firebreath 可以在 Windows 和 Ubuntu 等 Linux 上使用，但可以在 armx86 平台上使用。我们可以使用 arm x86 交叉链工具包进行交叉编译吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T22:44:33.107

据我所知，没有人尝试过。您必须尝试一下并找出答案。

我不知道它不可能是技术上的原因。使用 cmake 进行交叉编译。

# java - ELException Error Reading ... 类型

> ID：12464323
> 
> 赞同：9
> 
> 时间：2012-09-17T17:29:30.197
> 
> 标签：java, jsp, el

`getCurrentlocation()`显示尝试调用type中定义的函数的 jsp 页面时出现异常`Person`。`${person.currentlocation}`该函数在 jsp 文件中被调用。

```
type Exception report

message javax.el.ELException: Error reading 'currentlocation' on type **.person.Person

description The server encountered an internal error that prevented it from fulfilling this request.

exception 

org.apache.jasper.JasperException: javax.el.ELException: Error reading 'currentlocation' on type **.person.Person 
```

我对jsp技术很陌生。也许有人可以帮助我！

谢谢，本杰明

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-17T18:54:12.050

这`ELException`是一个包装异常。这通常仅在调用 getter 方法本身引发异常时才会引发。`ELException`当它被抛出时，会在幕后发生类似以下的事情：

```
Object bean;
String property;
Method getter;
// ...

try {
    getter.invoke(bean);
} catch (Exception e) {
    String message = String.format("Error reading '%s' on type %s", property, bean.getClass().getName());
    throw new ELException(message, e);
} 
```

您应该在堆栈跟踪中进一步查看真正的根本原因。完整的堆栈跟踪通常仅在服务器日志中可用。真正的根本原因是堆栈跟踪的最底层异常。例如，下面的一个是由`NullPointerException`在 getter 方法中引发的。

```
javax.el.ELException: Error reading 'currentlocation' on type **.person.Person
    at ...
    at ...
    at ...
Caused by: java.lang.NullPointerException
    at **.person.Person.getCurrentlocation(Person.java:42)
    at ...
    at ... 
```

有关真正根本原因的信息（异常类型和行号）应该为您提供足够的线索来确定问题。

同样，这对于 EL 来说通常不是问题。只是您自己的代码导致了问题。

# java - Web 服务异常

> ID：12464325
> 
> 赞同：4
> 
> 时间：2012-09-17T17:29:41.850
> 
> 标签：java, web-services, exception, fault

我有一个让我发疯的问题。我在 Linux 中使用 Netbeans 开发了一些 Web 服务，它们工作得很好（使用 Tomcat）。我可以用 SOAPUI 调用服务，一切看起来都很好。当我构建 WAR 文件并尝试在 Windows 上的 Tomcat 安装中部署它时，就会出现问题。然后我得到这个：

```
...
INFO: WSSERVLET13: JAX-WS context listener destroyed
Sep 17, 2012 4:28:08 PM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextInitialized
INFO: WSSERVLET12: JAX-WS context listener initializing
Sep 17, 2012 4:28:09 PM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextInitialized
SEVERE: WSSERVLET11: failed to parse runtime descriptor: javax.xml.ws.WebServiceException: Unable to create JAXBContext
javax.xml.ws.WebServiceException: Unable to create JAXBContext
    at com.sun.xml.ws.model.AbstractSEIModelImpl.createJAXBContext(AbstractSEIModelImpl.java:166)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.postProcess(AbstractSEIModelImpl.java:94)
    at com.sun.xml.ws.model.RuntimeModeler.buildRuntimeModel(RuntimeModeler.java:258)
    at com.sun.xml.ws.server.EndpointFactory.createSEIModel(EndpointFactory.java:338)
    at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:201)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:505)
    at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parseAdapters(DeploymentDescriptorParser.java:253)
    at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parse(DeploymentDescriptorParser.java:147)
    at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:124)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1255)
    at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:714)
    at org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:219)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.security.PrivilegedActionException: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
java.lang.StackTraceElement does not have a no-arg default constructor.
    this problem is related to the following location:
        at java.lang.StackTraceElement
        at public java.lang.StackTraceElement[] java.lang.Throwable.getStackTrace()
        at java.lang.Throwable
        at public java.lang.Throwable[] my.org.jaxws.MyExceptionBean.suppressed
        at umy.org.jaxws.MyExceptionBean

    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.createJAXBContext(AbstractSEIModelImpl.java:153)
    ... 38 more
Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
java.lang.StackTraceElement does not have a no-arg default constructor.
    this problem is related to the following location:
        at java.lang.StackTraceElement
        at public java.lang.StackTraceElement[] java.lang.Throwable.getStackTrace()
        at java.lang.Throwable
        at public java.lang.Throwable[] my.org.jaxws.MyExceptionBean.suppressed
        at my.org.jaxws.MyExceptionBean

    at com.sun.xml.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:102)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:472)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:302)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1140)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:154)
    at com.sun.xml.bind.api.JAXBRIContext.newInstance(JAXBRIContext.java:106)
    at com.sun.xml.ws.developer.JAXBContextFactory$1.createJAXBContext(JAXBContextFactory.java:109)
    at com.sun.xml.ws.model.AbstractSEIModelImpl$1.run(AbstractSEIModelImpl.java:161)
    at com.sun.xml.ws.model.AbstractSEIModelImpl$1.run(AbstractSEIModelImpl.java:154)
    ... 40 more 
```

所以我想我在服务中提出的异常存在问题：

```
@WebMethod(...)
public ..... throws Exception {
 if ()...
 else
    throw new MyException(); // extends java.lang.Exception
} 
```

我不明白的第一件事是为什么这在我的 Netbeans Tomcat over Linux 中运行良好，而不是在我安装的 Windows Tomcat 中运行良好。我查了一些资料：

*   [JAX-WS - 将异常映射到故障](https://stackoverflow.com/questions/2064447/jax-ws-map-exceptions-to-faults)
*   [无法创建 JAXBContext 创建我的 wsdl](https://stackoverflow.com/questions/7232331/unable-to-create-jaxbcontext-creating-my-wsdl)
*   [SOAP 错误](http://io.typepad.com/eben_hewitt_on_java/2009/07/using-soap-faults-and-exceptions-in-java-jaxws-web-services.html)
*   [IBM](http://www.ibm.com/developerworks/webservices/library/ws-jaxws-faults/index.html)

并查看更多其他网站。我不清楚该怎么做。一些网络建议使用“解决方法”，包括 @WebFault 并在类和虚拟 POJO 类中创建其他方法。我有很多例外，似乎有很多工作。有些人建议从类路径中删除一个 JAR（我真的没有）。我仍然想知道我的 Netbeans Tomcat 中有什么不在我的 Windows Tomcat 中。我对此很陌生。

有没有简单的方法来解决这个问题？非常感谢。

**==== 编辑 ====**

正如一些答案中所建议的，我没有成功地尝试过：

```
@XmlTransient
    @Override
    public StackTraceElement[] getStackTrace() {
        return super.getStackTrace();
    }

    @XmlTransient
    @Override
    public Throwable getCause() {
        return super.getCause();
    } 
```

另外，如果我使用@WebFault，我会得到另一个异常（这次甚至在 Linux 上）：

```
SEVERE: WSSERVLET11: failed to parse runtime descriptor: java.lang.NoSuchMethodError: javax.xml.ws.WebFault.messageName()Ljava/lang/String;
java.lang.NoSuchMethodError: javax.xml.ws.WebFault.messageName()Ljava/lang/String;
        at com.sun.xml.ws.model.RuntimeModeler.processExceptions(RuntimeModeler.java:1162)
        at com.sun.xml.ws.model.RuntimeModeler.processDocWrappedMethod(RuntimeModeler.java:898)
        at com.sun.xml.ws.model.RuntimeModeler.processMethod(RuntimeModeler.java:666)
        at com.sun.xml.ws.model.RuntimeModeler.processClass(RuntimeModeler.java:420)
        at com.sun.xml.ws.model.RuntimeModeler.buildRuntimeModel(RuntimeModeler.java:254)
        at com.sun.xml.ws.server.EndpointFactory.createSEIModel(EndpointFactory.java:338)
        at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:201)
        at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:505)
        at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parseAdapters(DeploymentDescriptorParser.java:253)
        at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parse(DeploymentDescriptorParser.java:147)
        at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:124)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4135)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4630)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:546)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:637)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:521)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1359)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:857)
        at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:795)
        at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1500)
        at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:849)
        at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:351)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:199)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:636) 
```

我试图实现 messageName() 但没有任何效果。我已按照其他问题的指示进行操作，但不起作用。代码是：

```
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlType;

@XmlType(name = "InputMessageValidationFaultType")
public class FaultBean {

@XmlAttribute
    protected String message;

    public String getMessage(){
        return message;
    }

    public void setMessage(String message){
        this.message = message;
    }

}

import javax.xml.ws.WebFault;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;

@WebFault(faultBean = "FaultBean")
public class MyException extends Exception {

    private static final long serialVersionUID = 1L;

    private FaultBean faultBean;

    public  MyException(){
        super();
    }

    public  MyException( String message , FaultBean faultBean , Throwable cause){
        super(message, cause);
        this.faultBean = faultBean;
    }    

    public  MyException( String message, FaultBean faultBean ){
        super(message);
        this.faultBean = faultBean;
    }    

    public FaultBean getFaultInfo() {
        return faultBean;
    }

} 
```

对我来说仍然很奇怪，在我的 Netbeans/Tomcat/Linux 上一切正常，当我将 WAR 移动到 Tomcat/Windows 时失败了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T13:06:02.277

我得到了同样的例外。就我而言，解决方法是将 Java 从 1.6 升级到 1.7。之后，war 文件正常工作。

# assembly - 是否可以在装配中进行自定义中断？

> ID：12464329
> 
> 赞同：10
> 
> 时间：2012-09-17T17:29:53.183
> 
> 标签：assembly, x86, interrupt

在汇编语言中，我们有 DOS 中断 INT 21h，它不是硬件中断。

我想知道是否可以编写自己的中断并调用它。

如果可能，请建议链接或方法。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-17T17:36:24.173

是的，您可以创建自己的中断处理程序并随时调用它。您需要设置中断向量（从地址 0000:0000 开始）以指向您自己的中断处理程序。

指向每个处理程序的指针占用 4 个字节（偏移量和段），因此，例如，如果您想为 INT 22h 设置中断处理程序，您将更新位置 0000:0088h 处的中断向量以指向您的处理程序。

检查[Ralph Brown 的中断列表](http://www.ctyme.com/rbrown.htm)以检查未使用的中断号（至少一个未被硬件中断使用的中断号）。

下面是一个如何为中断 22h 设置处理程序的示例：

```
INITIALIZE: 
      XOR AX,AX
      MOV ES,AX
      CLI ; Disable interrupts, might not be needed if seting up a software-only interrupt
      MOV WORD PTR ES:[136], OFFSET INT22  ; setups offset of handler 22h
      MOV WORD PTR ES:[138], CS            ; Here I'm assuming segment of handler is current CS
      STI ; Reenable interrupts
      ; End of setup

INT22  PROC FAR
       ; Here goes the body of your handler
       IRET
INT22  ENDP 
```

# java - 阻塞线程上是否有 ExecutorService？

> ID：12464330
> 
> 赞同：2
> 
> 时间：2012-09-17T17:29:57.437
> 
> 标签：java, concurrency, executorservice

是否有`ExecutorService`允许现有线程执行执行而不是产生新线程？如果它是 ScheduledExecutor，则奖励。大多数执行程序会产生工作线程来执行，但我希望工作线程成为我所在的现有线程。这是我想象的API：

```
while (!executor.isTerminated()) {
    Runnable r = executor.take();
    r.run();
} 
```

这类似于 SWT 和 JavaFX 允许主线程分派事件的方式，与 Swing 不同，后者需要产生自己的事件分派线程来处理事件。

动机：我目前有很多地方线程产生一个新的执行程序，然后调用 awaitTermination() 等待它完成。我想节省一些资源并防止堆栈跟踪被一分为二。

请注意，我不想要在`execute(Runnable)`的调用者线程中运行任务的执行程序，这就是[这个答案](https://stackoverflow.com/questions/11941617/executorservice-which-runs-tasks-in-calling-thread)和 Guava[`MoreExecutors.sameThreadExecutor()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/MoreExecutors.html#sameThreadExecutor())所做的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:46:51.040

java.util.concurrent 中的大多数执行程序的行为与您的预期完全相同。当任务太多时，有些会产生额外的线程，但通常可以将它们配置为设置限制。

要利用这种行为，不要每次都启动新的执行程序 - 使用相同的执行程序。要等待一组任务完成，请使用[invokeAll()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)或[submit()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/AbstractExecutorService.html#submit%28java.lang.Runnable%29)然后[future.get()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html#get%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:37:12.630

我假设您想要的是控制新线程的创建，例如名称、守护进程状态等。使用`ThreadFactory`：

```
public class MyThreadFactory implements ThreadFactory {
    public Thread newThread(Runnable runnable) {
        Thread t = new Thread(runnable, "MyThreadName");
        t.setDaemon(true);
        return t;
    }
} 
```

这允许您控制线程的创建，以便执行发生在*您*制造的线程中，而不是默认的某个默认线程中`ThreadFactory`。

然后使用它，所有方法都`Executors`采用`ThreadFactory`：

```
Executors.newExecutorOfSomeKind(new MyThreadFactory()); 
```

**编辑：**我明白你现在的意思了。不幸的是，所有`Executor`实现的行为（据我所知）都是创建新线程来运行任务，除了`sameThreadExecutor`你提到的。如果不通过`Thread`创建执行程序的对象只是为了执行一项任务（这是一个可怕的设计——请参阅评论了解我的意思），没有简单的方法来完成你想要的。我建议将代码更改为使用`Executor`类似 an的单个代码`ExecutorCompletionService`（请参阅[此问题](https://stackoverflow.com/questions/7758020/difference-between-executor-and-executorcompletionservice-in-java)）或使用 fork/join 模式。在 Java 7 中，fork/join 变得更容易（请参阅[此 Java trail](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)）。对于 Java 7 之前的代码，请阅读[`Semaphore`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Semaphore.html)Java 中的计数（以及[一般情况](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)下）。

# python - socket.error: [Errno 111] 连接被拒绝

> ID：12464331
> 
> 赞同：3
> 
> 时间：2012-09-17T17:30:04.377
> 
> 标签：python, openssl, tcpserver, socketserver

我正在尝试准备原型，但无法建立连接。我在客户端和服务器上都使用 OpenSSL。

```
#!/usr/bin/env python

import SocketServer
import json
from OpenSSL import SSL
import os
import socket

TERMINATION_STRING = "Done"

CERTIFICATE_PATH = os.getcwd() + '/CA/certs/01.pem'
KEY_PATH = os.getcwd() + '/CA/private/key.pem'

class SSLThreadingTCPServer(SocketServer.ThreadingTCPServer):
    def __init__(self, address, handler):
        SocketServer.ThreadingTCPServer.__init__(self, address, handler)

        ctx = SSL.Context(SSL.SSLv23_METHOD)

        #ctx.use_privatekey_file(KEY_PATH)
        #ctx.use_certificate_file(CERTIFICATE_PATH)
        self.socket = SSL.Connection(ctx, socket.socket(self.address_family, self.socket_type))

        print "Serving:", address[0], "on port:", address[1]

class MemberUpdateHandler(SocketServer.BaseRequestHandler):
    def setup(self):
        print self.client_address, "connected"

    def handle(self):
        data = ""
        while True:
            data += self.request.recv(1024).encode('utf-8').strip
            if data[-4:] == "Done":
                print "Done"
                break

            dataStrings = data.split(' ')
            for item in dataStrings:
                print item
if __name__ == "__main__":
    ADDRESS = 'localhost'
    PORT = 42424
    HOST = (ADDRESS, PORT)

    s = SSLThreadingTCPServer(HOST, MemberUpdateHandler)
    s.serve_forever() 
```

和客户：

```
#!/usr/bin/env python

from OpenSSL import SSL
import socket
import os

HOST = 'localhost'
PORT = 42424
ADDRESS = (HOST, PORT)

CERTIFICATE_FILE = os.getcwd() + '/CA/certs/02.pem'

sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

ctx = SSL.Context(SSL.SSLv23_METHOD)
sslSock = SSL.Connection(ctx, sock)
sslSock.connect(ADDRESS) #THIS IS WHERE IT FAILS

items = "this is a test Done"

sslSock.sendall(items)

sslSock.close() 
```

最后，错误：

```
File "SSLClient.py", line 19, in <module> sslSock.connect(ADDRESS)
File "<string>", line 1, in connect
socket.error: [Errno 111] Connection refused 
```

任何帮助，将不胜感激。我觉得我错过了一些简单的东西，但我是网络编程的新手。

`netstat -tpn`服务器运行时的输出：

```
(Not all processes could be identified, non-owned process info
will not be shown, you would have to be root to see it all.)

Active Internet connections (w/o servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 198.183.6.199:59724     74.125.227.0:80         ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:49758     74.125.227.16:80        ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:39299     69.30.156.16:443        ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:44128     23.0.38.218:80          TIME_WAIT   -
tcp        0      0 198.183.6.199:41272     64.34.119.101:80        ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:39420     69.30.156.26:443        ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:39418     69.30.156.26:443        ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:41218     64.34.119.101:80        ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:56224     198.183.6.22:22         ESTABLISHED 3156/ssh
tcp        0      0 198.183.6.199:54281     74.125.227.10:443       ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:46349     69.30.156.11:443        ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:54380     74.125.227.62:443       ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:42252     75.126.125.212:80       ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:39300     69.30.156.16:443        ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:53321     74.125.227.15:443       ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:60669     74.125.227.0:80         ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:54285     74.125.227.10:443       ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:37783     74.125.137.125:5222     ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:897       198.183.6.22:2049       ESTABLISHED -
tcp        0      0 198.183.6.199:45040     69.171.248.16:443       ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:54286     74.125.227.10:443       ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:54284     74.125.227.10:443       ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:38499     74.125.227.21:443       ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:54157     173.194.33.47:443       ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:44312     70.84.101.150:6667      ESTABLISHED 5776/xchat
tcp        0      0 198.183.6.199:46074     69.30.156.32:80         ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:39298     69.30.156.16:443        ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:58444     74.125.227.16:443       ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:39056     198.183.6.100:993       ESTABLISHED 3180/thunderbird-bi
tcp        0      0 198.183.6.199:54283     74.125.227.10:443       ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:54910     173.194.64.116:80       ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:10050     198.183.6.231:34955     TIME_WAIT   -
tcp        0      0 198.183.6.199:56503     72.247.172.20:80        ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:52454     173.194.64.95:443       ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:968       198.183.6.11:2049       ESTABLISHED -
tcp        0      0 198.183.6.199:39419     69.30.156.26:443        ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:52088     74.125.227.0:443        ESTABLISHED 2128/google-chrome
tcp        0      0 198.183.6.199:33184     198.183.6.1:6667        ESTABLISHED 5776/xchat
tcp        0      0 198.183.6.199:39417     69.30.156.26:443        ESTABLISHED 2128/google-chrome 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:24:47.207

你打电话时

`SocketServer.ThreadingTCPServer.__init__(self, address, handler)`

在您的子类中，ThreadingTCPServer 将创建一个套接字并执行绑定/侦听。在那条线之后你做

```
self.socket = SSL.Connection(ctx, socket.socket(self.address_family, self.socket_type)) 
```

创建您的 SSL 套接字。但是这个套接字并没有被绑定。您需要做的是以不同的方式调用超类的构造函数：

`SocketServer.ThreadingTCPServer.__init__(self, address, handler, bind_and_activate=False)`

注意最后一个参数。这将阻止超类绑定它创建的套接字。然后，在您创建套接字后，调用`self.server_bind()`and`self.server_activate()`以便正确设置您创建的套接字。

总之，尝试将您的服务器更改为：

```
class SSLThreadingTCPServer(SocketServer.ThreadingTCPServer):
    def __init__(self, address, handler):
        SocketServer.ThreadingTCPServer.__init__(self, address, handler, bind_and_activate=False)

        ctx = SSL.Context(SSL.SSLv23_METHOD)

        #ctx.use_privatekey_file(KEY_PATH)
        #ctx.use_certificate_file(CERTIFICATE_PATH)
        self.socket = SSL.Connection(ctx, socket.socket(self.address_family, self.socket_type))
        self.server_bind()
        self.server_activate()

        print "Serving:", address[0], "on port:", address[1] 
```

# android - 如何处理 Android 中的重复字符串以减少内存使用？

> ID：12464343
> 
> 赞同：4
> 
> 时间：2012-09-17T17:30:49.950
> 
> 标签：android, string, optimization

我刚刚开始使用 Memory Analyzer Tool (MAT) 来查看是否可以优化我的 Android 应用程序。它显示从 Internet 的 XML 文件获得的天气数据。由于某些与天气相关的字符串明显重复（“晴天”、“部分多云”等），我看到了大量重复字符串。

使用此类类似字符串减少内存开销的最有效方法是什么？在 XML 解析操作期间枚举最常见的字符串并匹配它们？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:48:07.427

您可以使用[String.intern()](http://developer.android.com/reference/java/lang/String.html#intern%28%29)。
但我怀疑你可以通过删除重复的字符串来减少内存占用

# visual-studio-2010 - 输出路径和 MSBuild

> ID：12464350
> 
> 赞同：3
> 
> 时间：2012-09-17T17:31:06.093
> 
> 标签：visual-studio-2010, msbuild, msbuild-4.0

我有一个包含 9 个项目的解决方案。每个项目中的所有引用都将其 CopyLocal 属性设置为 False。

当我从 VS 构建它时，这些引用的二进制文件都不会复制到输出构建目录。同样，当我使用 msbuild 构建时，我只看到项目二进制文件而没有引用。

但是，当我在 msbuild 命令中指定输出路径时，会复制一些引用，我不知道为什么？是否有一些我忘记设置的设置？有没有人见过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:09:50.597

当您在不设置属性的情况下构建应用程序时`OutDir`，文件将复制到项目属性中指定的路径（构建\输出路径）。在此之后，还有另一个步骤将引用的项目输出（*.dll 文件）复制到`OutDir`您的应用程序 (*.exe)。但是，如果您设置`CopyLocal`为 false，则不会发生最后一步。像这样：

```
ProjectEXE\OutDir = c:\a\bin
ProjectDLL\OutDir = c:\b\bin 
```

请注意两者`OutDir`不同（并且在您的项目属性中指定的不同）这一事实。

但是当您`OutDir`使用命令提示符设置时，您将两个`OutDir`参数设置为相同的路径。仍然没有 DLL 的最终副本到您的应用程序的同一目录，除了它与您第一次构建 DLL 和 EXE 的位置相同。像这样：

```
msbuild yourSolution.sln /p:OutDir="c:\a\bin\"

ProjectEXE\OutDir = c:\a\bin
ProjectDLL\OutDir = c:\a\bin 
```

# build - 恢复或选择您想要在 TeamCity 构建中进行哪些更改

> ID：12464353
> 
> 赞同：0
> 
> 时间：2012-09-17T17:31:29.040
> 
> 标签：build, tfs, continuous-integration, teamcity

我有几个开发人员更改，它们都已签入源代码控制。由于开发人员的更改之一，团队城市建设失败。由于我已经使用两个开发人员更改运行了构建，我如何恢复到原来的状态（在两次更改状态之前）..我想要做的基本上是，因为它是一个成功的构建直到昨天，我想去回到那个构建，这样至少网站运行正常，然后只运行构建，只有一个开发人员更改，而不是那些搞砸构建的..感谢您的帮助。我可以用teamcity做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:51:25.930

您可以在 TeamCity 中运行“历史”构建，在“自定义运行构建”对话框中选择更改（单击“运行...”按钮的省略号）。如果您想在其他构建中使用工件，您可以使用已完成构建的“构建操作”中的“提升”操作。

或者，您可以使用通常的方法来恢复版本控制中的更改并手动触发 TeamCity 中的新构建。

# php - PHP结合搜索功能和分页

> ID：12464357
> 
> 赞同：0
> 
> 时间：2012-09-17T17:31:42.413
> 
> 标签：php, search, pagination

所以我正在尝试制作一个页面，我可以在其中显示我的数据库表中的结果。您应该能够搜索并且应该有一些分页，因为有成千上万的结果。

我设法制作了一个只有搜索功能的页面，并且效果很好。所以现在我需要知道如何将一些分页整合到其中。

索引.php

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
      <div id="container">
        <form action="" method="get">
        <input type="text" name="search" id="search" placeholder="Search" />
        <input type="submit" />
            </form>
        <?php include 'process.php'; ?>
      </div> <!-- /container -->
    <script src="js/jquery.js"></script>
    <script src="js/script.js"></script>
  </body>
</html> 
```

进程.php

```
<?php include 'dbconfig.php'; ?>
<?php include 'connect.php'; ?>
<?php   
$search = $_GET['search'];
$result = mysql_query("SELECT * FROM oantkb WHERE Name LIKE '%$search%' ORDER BY `INDEX` DESC");

echo '<table class="table">';
echo '<thead>';
echo '<tr>';
echo '<th>#</th>';
echo '<th>Pic</th>';
echo '<th>Name</th>';
echo '</tr>';
echo '</thead>';
echo '<tbody>';

while($row = mysql_fetch_assoc($result)) {

    $pic = $row['Pic'];
    $name = $row['Name'];

    echo '<tr>';
    echo '<td>#</td>';
    echo '<td><img src="'.$pic.'" height="50" width 50"></td>';
    echo '<td>'.$name.'</td>';
    echo '</tr>';
}

echo '</tbody>';
echo '</table>';
?> 
```

现在它像它应该的那样工作。当我搜索时它会说 index.php?search=banana，但我需要添加一些分页，所以它会说例如 index.php?search=banana&?page=2。或类似的规定。希望这是有道理的...我是 php 新手 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:38:44.893

在您的 sql 查询末尾包含以下内容：

```
$resultsPerPage=10;
$page = ($_GET["page"]-1)*$resultsPerPage;
$query = $query." LIMIT $page,$resultsPerPage";
mysql_query($query); 
```

顺便说一句，不推荐使用 mysql_ 库以支持 mysqli。

上面的内容也容易受到 sql 注入攻击，因为 $_GET["page"] 没有首先被清理，但为了简单起见，我这样做了。

这假设一个分页方案从 1 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:34:34.943

我已经使用 Pear Pagination 很长时间了。你可以试试。

这是一个很好的设置教程

[PHP教程中的简单分页](http://www.codediesel.com/php/simple-pagination-in-php/)

添加的一件好事是在您的查询中使用它们之前清理您的变量。

# java - JSP 喜欢简单文本的模板

> ID：12464360
> 
> 赞同：4
> 
> 时间：2012-09-17T17:31:53.007
> 
> 标签：java, jsp, text-files, template-engine

我有一个程序，目前有大量我想设计掉的代码。这段代码需要一些文本文件，并通过一个有趣的解释器将其传递，以生成一个纯文本文件报告，该报告会继续发送到其他系统。从*理论上讲*，这允许非程序员能够修改报告，而无需了解 Java 和解释器的内部工作原理。在实践中，任何微小的更改都可能需要进入解释器并对其进行调整（并且特定领域的语言即使对其他程序员也不完全友好）。

我很想重新设计这段代码。作为一个主要的网络程序员，当想到“非程序员能够修改报告......”时，我首先想到的是用网页替换报告并对自己说“啊哈！Jsp”。这将给我一个很好的你看到的几乎是你得到的方法，以及标记库和 java scriptlet（尽管后者可能不受欢迎），而不是笨拙地编写 DSL 语句。

虽然可以使用`jspc`将 jsp 编译成 java（应用程序的另一部分在 jboss 服务器上运行 ejbs，所以`jspc`距离不太远），它使用的样板代码尝试将输出连接到来自servlet 上下文。这将涉及欺骗代码，使其认为它在 Web 容器中运行（这不是不可能的，而是 kluge），然后删除标头。

java是否有不同的模板方法（或库）可用于打印到文本文件？到目前为止，我所看到的每一个似乎都针对 Web 进行了优化，或者与特定的应用程序服务器紧密耦合（并且专为 Web 工作而设计）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:35:43.223

试试[Apache Velocity](http://velocity.apache.org)。它非常简单，并不假定它在 Web 应用程序的上下文中运行。

这完全是主观的，但我认为它的语法对于非程序员来说比 JSP 和标签库更容易理解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T17:53:41.273

所以你需要一个精简版的JSP。

看看这个（JSTP）是否适合你

[http://jstp.sourceforge.net/manual.html](http://jstp.sourceforge.net/manual.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T22:32:35.323

可能您想检查[**Rythm 模板引擎**](http://rythmengine.com/)，它具有良好的性能（比速度快 2 到 3 倍）和优雅的语法（类似 .net Razor），并且专为 Java 程序员设计。

**模板，从用户列表中生成一串用“，”分隔的用户名**

```
@args List<User> users

@for (User user: users) {
   @user.getName() @user_sep
} 
```

**模板：if-else 演示**

```
@args User user

@if (user.isAdmin()) {
   <div id="admin-panel">...</div>
} else {
   <div id="user-panel">...</div>
} 
```

**使用模板文件调用模板**

```
// pass render args by name
Map<String, Object> renderArgs = ...
String s = Rythm.render("/path/to/my/template.txt", renderArgs);

// or pass render arguments by position
String s = Rythm.render("/path/to/my/template.txt", "arg1", 2, true, ...); 
```

**使用内联文本调用模板**

```
User user = ...;
String s = Rythm.render("@args User user;Hello @user.getName()", user); 
```

**使用字符串插值模式调用模板**

```
User user = ...;
String s = Rythm.render("Hello @name", user.getName()); 
```

**ToString 模式**

```
public class Address {
   public String unitNo;
   public String streetNo;
   ...
   public String toString() {
      return Rythm.toString("@_.unitNo @_.streetNo @_.street, @_.suburb, @_.state, @_.postCode", this);
   }
} 
```

**Auto ToString 模式**（遵循 apache commons lang 的 reflectToStringBuilder，但比它更快）

```
public class Address {
   public String unitNo;
   public String streetNo;
   ...
   public String toString() {
      return Rythm.toString(this);
   }
} 
```

文档可以在[http://www.playframework.org/modules/rythm](http://www.playframework.org/modules/rythm)找到。在 GAE 上运行的完整演示应用程序：http: [//play-rythm-demo.appspot.com](http://play-rythm-demo.appspot.com)。

注意，demo 和 doc 是为 Play!Framework 的 play-rythm 插件创建的，但大部分内容也适用于纯 rythm 模板引擎。

源代码：

*   节奏模板引擎：[https ://github.com/greenlaw110/rythm/](https://github.com/greenlaw110/rythm/)
*   播放节奏插件：[https ://github.com/greenlaw110/play-rythm](https://github.com/greenlaw110/play-rythm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T19:01:00.337

如果您想成为公司中真正的踏面设计者，您可以创建一个 Grails 应用程序并使用 Groovy 模板（可能结合 Quartz 插件进行调度），如果有的话，这可能有点难卖很多现有的代码要替换，但我喜欢它......

[http://groovy.codehaus.org/Groovy+Templates](http://groovy.codehaus.org/Groovy+Templates)

如果您想要安全的赌注，那么（同样出色的）Velocity 必须是：

[http://velocity.apache.org/](http://velocity.apache.org/)

# ruby - 将绝对路径与 Pathname 类连接起来

> ID：12464361
> 
> 赞同：5
> 
> 时间：2012-09-17T17:31:57.813
> 
> 标签：ruby, pathname

我正在做一个项目，我有一个动态确定的挂载点，并提供了一组绝对路径来处理目标卷。由于这些文件还不存在，我使用 Pathname 类来处理文件名操作。然而，在连接具有相同根的路径时，Pathname 似乎做了一些聪明的事情。我观察到以下行为：

```
p1 = Pathname.new('/foo/bar')                         # #<Pathname:/foo/bar>
p2 = Pathname.new('/baz/quux')                        # #<Pathname:/baz/quux>
p3 = p1 + p2                                          # #<Pathname:/baz/quux>
p4 = p1.join p2.relative_path_from(Pathname.new('/')) # #<Pathname:/foo/bar/baz/quux>
p5 = Pathname.new(p1.to_s.concat p2)                  # #<Pathname:/foo/bar/baz/quux> 
```

所以使用 p4 和 p5，我能够得到我想要的行为，但是结构有点做作。有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-24T19:41:06.960

在这里使用字符串操作来解决 Ruby 的奇怪行为相当容易。

借用OP的例子......

```
p1 = Pathname.new('/foo/bar')
p2 = '/baz/quux'
p1 + p2.sub(/\A\//, '')
# => #<Pathname:/foo/bar/baz/quux> 
```

**警告：**第二个`p2`必须是 a`String`才能进行`sub`操作。您可以`Pathname`使用`#to_s`.

```
Pathname.new('/some/path/').to_s
# => "/some/path" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T17:47:14.490

来自[精美手册](http://ruby-doc.org/stdlib-1.9.3/libdoc/pathname/rdoc/Pathname.html#method-i-2B)：

> **+（其他）**
> 
> Pathname#+ 将*路径名片段*附加到此片段以生成新的 Pathname 对象。
> 
> ```
> p1 = Pathname.new("/usr")      # Pathname:/usr
> p2 = p1 + "bin/ruby"           # Pathname:/usr/bin/ruby
> p3 = p1 + "/etc/passwd"        # Pathname:/etc/passwd 
> ```

强调我的。指定路径名的`+`运算符以附加*路径名片段*，但带有前导斜杠的路径名不是片段。如果您尝试添加两个路径名或向路径名添加非片段，文档没有明确指定应该发生什么，但这些示例暗示您正在看到预期的行为。

# mysql - 用于存储城市中不同类型地点的数据库模式

> ID：12464362
> 
> 赞同：-2
> 
> 时间：2012-09-17T17:31:58.297
> 
> 标签：mysql, database, database-design, database-normalization

我必须将城市的所有**地方**存储在数据库中。由于地方不同，如学校、学院、大学、医院、旅馆、酒店、商店、快餐店、汽车站、银行等

我无法将它们存储在一个表中，因为它们具有不同的属性并且类别也是未知的，并且可以稍后在运行时添加类别。所以我们无法修复属性。

如何解决这个问题呢？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:39:44.447

您的要求非常模糊，@Jamie 的悲观态度绝对正确。你应该找一个顾问来帮助你。

那就是说...

您可以为每个实体（*学校*、*学院*等）制作单独的表格。请注意，它们都具有一些基本特征（它们具有“名称”、“地址”等）。您可以将它们放在不同的表中，这应该可以简化事情，所以：

```
 place (id, name, address, city, state, zip)
 school (place_id, principals_name)
 college (place_id, is_accredited) 
```

这使得向任何给定位置添加属性变得更加容易（因为您不会有一张大表来 ALTER）。注意我说的*容易*，不是*容易*。

很多人会添加诸如“data1”、“data2”之类的通用列，但我一直觉得这很混乱且难以维护。

请去找顾问... 免费咨询值得您为此付出的代价...

# java - Java Android Bound 不匹配

> ID：12464363
> 
> 赞同：0
> 
> 时间：2012-09-17T17:32:00.697
> 
> 标签：java, android

我对 Java 还比较陌生，并且正在尝试使用地址处的代码。[http://proyectouvipool.googlecode.com/svn-history/r87/trunk/Android/PFC/src/pablo/developer/BalloonItemizedOverlay.java](http://proyectouvipool.googlecode.com/svn-history/r87/trunk/Android/PFC/src/pablo/developer/BalloonItemizedOverlay.java)

不幸的是，我收到以下错误消息

**Bound mismatch：类型 Item 不是 BalloonOverlayView 类型的有界参数的有效替代品**

在代码

```
protected BalloonOverlayView<Item> createBalloonOverlayView() {
      return new BalloonOverlayView<Item>(getMapView().getContext(), getBalloonBottomOffset());
     } 
```

希望对如何解决此问题提供一些帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:58:23.333

```
public class CustomBalloonItemizedOverlay extends
            BalloonItemizedOverlay<OverlayItem> {

        private ArrayList<OverlayItem> m_overlays = new ArrayList<OverlayItem>();
        private Context c;

        public MyFavoritePlacesItemizedOverlay(Drawable defaultMarker,
                MapView mapView) {
            super(boundCenter(defaultMarker), mapView);
            c = mapView.getContext();
        }

        public void addOverlay(OverlayItem overlay) {
            m_overlays.add(overlay);
            populate();
        }

        @Override
        public void draw(Canvas canvas, MapView mapView, boolean shadow) {
            if (!shadow) {
                super.draw(canvas, mapView, false);
            }
        }

        public void removeOverlay(OverlayItem overlay) {
            m_overlays.remove(overlay);
            populate();
        }

        @Override
        protected OverlayItem createItem(int i) {
            return m_overlays.get(i);
        }

        @Override
        public int size() {
            return m_overlays.size();
        }

        @Override
        protected boolean onBalloonTap(int index, OverlayItem item) {
            // Your code... 
            return true;
        }
    } 
```

下面是如何使用它...

initGeoPoint = new GeoPoint((int) (latitude * 1E6), (int) (longitude * 1E6));

```
 mapOverlays = myMapView.getOverlays();
drawableImage = this.getResources().getDrawable(R.drawable.any_icon);

CustomBalloonItemizedOverlay customItemizedOverlayObject = new public class CustomBalloonItemizedOverlay(
                    drawableImage, myMapView);
            OverlayItem overlayItem = new OverlayItem(initGeoPoint, name,
                    address);

            customItemizedOverlayObject.addOverlay(overlayItem);
            mapOverlays.add(customItemizedOverlayObject);

        } 
```

# php - IIS7 - 让 php 访问命令行

> ID：12464364
> 
> 赞同：1
> 
> 时间：2012-09-17T17:32:15.143
> 
> 标签：php, r, iis-7, windows-server-2003

我正在使用 php5.3 exec 函数从命令行运行一个 cookie-cutter r-script。这个想法是用户选择数据，php运行脚本，用户能够下载高分辨率图形。我已经用 apache 在我的本地测试平台上运行了它，一切正常，但是，生产服务器是带有 IIS7 的 Windows Server 2003（这是我无法控制的）。似乎在 IIS7 中，默认情况下，php 无法访问 cmd.exe。我们尝试使用“calcs”命令更改对 cmd.exe 的权限，但没有成功。

如何通过使用 exec 函数授予 php 访问命令行的权限？

*PS我知道，我知道，我知道。没有使用 exec 函数执行用户输入。我们只想利用 R 的高分辨率图形和数据处理能力。*

相关细节：

*   操作系统是 windows server 2003 64 位
*   IIS7
*   服务器是一个 Amazon EC2 实例
*   （我不认为这是亚马逊的问题，因为我听说有人用 LAMP 堆栈亚马逊实例做类似的事情）

**编辑：**问题最终是由于某种原因IUSR没有权限在命令行中使用“start”命令。

```
REM commands below did not work
start "Path to .exe" "File to process"
start "" "Path to .exe" "File to process"

REM this one did however
"Path to .exe" "File to process" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:54:32.770

我认为这是一个 IIS 问题（您可以在本地安装一个来测试它），但如果您使用匿名身份验证运行，您需要将匿名用户更改为普通用户（将有权启动 cmd.exe）。还要检查应用程序池用户的身份，因为有时它也使用受限帐户运行。

# asp.net-mvc-3 - Windows 身份验证 C# MVC3

> ID：12464365
> 
> 赞同：0
> 
> 时间：2012-09-17T17:32:18.513
> 
> 标签：asp.net-mvc-3, windows-authentication

在没有用户输入用户名/密码的情况下打开 Internet Explorer 时，是否可以从 Active Directory 进行自动用户身份验证。

就像现在一样。我有 Windows 身份验证，用户在打开 Internet Explorer 后，他们必须从 AD 输入他/她的用户名和密码。因此，由于应用程序具有与 PC 相同的凭据。我想知道，当打开 Internet Explorer 以使用 Web 应用程序时，我怎么能这样做用户不必登录。

我正在考虑类似交易类型的单点登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:48:38.327

如果您的用户已经使用他们的 AD 凭据登录，您的问题就基本解决了。您的用户必须在其内部资源管理器配置中将该站点添加到本地 Intranet 区域（因此不会提示他们输入凭据）。还要检查 Internet Explorer 安全区域设置是否启用了以下功能：

用户身份验证 -> 仅在 Intranet 区域中设置自动登录

# html - Webkit 浏览器中的意外行为 - 背景图像右对齐

> ID：12464366
> 
> 赞同：1
> 
> 时间：2012-09-17T17:32:23.063
> 
> 标签：html, css, webkit, background-image, right-align

在为从右到左的读者（例如阿拉伯语和希伯来语语言）调整网站时，在将背景图像分配给右对齐的正文标签时，我在任何 Webkit 浏览器中都遇到了意外行为。

首先，让我包含一个可以看到此行为的示例页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html dir="rtl" xmlns="http://www.w3.org/1999/xhtml" xml:lang="ar" lang="ar">
<head>
<title>Body background image right aligned</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<style type="text/css">
body {
    margin: 0;
    background-image: url(http://static.convertworld.com/images/cols_yb-rtl.png);
    background-position: top right;
    background-repeat: repeat-y;
}
#header {
    height: 100px;
    background-color: blue;
}
#main {
    position: absolute;
    top: 100px;
    right: 150px;
    width: 610px;
    background-color: red;
}
#column {
    position: absolute;
    top: 100px;
    right: 0;
    width: 150px;
}
</style>
</head>
<body>
<div id="header">Header</div>
<div id="main">Main</div>
<div id="column">Column</div>
</body>
</html> 
```

现在，让窗口变小，直到出现水平滚动条。背景图像将不再与文档的右侧对齐，它将位于距左侧**x 个**像素的位置，其中**x**是视口的宽度。

以下浏览器显示了这种意外行为：

*   铬 (Win7 & WinXP)
*   Safari (Win7 & WinXP)
*   Webkit MiniBrowser, nightly build 2012-09-06 (Win7)

虽然 IE、FireFox 和 Opera 显示了预期的结果，其中背景图像与视口的大小无关，**始终**向右对齐。

我是 Webkit 的忠实粉丝，但除了……这是一个错误之外，我没有找到任何解释 :( 如果有人能找到对此行为的另一种解释，那就太好了。基本上：

1.  这也发生在你身上吗？
2.  这是因为我的标记不正确吗？
3.  CSS中有错误吗？
4.  或者......它是一个 Webkit 错误 :(

我应该说我不是在寻找解决方法，只是一个可能的解释。我已经有一个解决方法，我将图像绝对正确：0 和 z-index：-1。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:05:54.317

1.  是的，我可以通过访问您包含的链接来重复此效果，在 Windows 7 x64 上使用 Chrome 21.0.1180.89 m
2.  您关于背景位置的标记不正确
3.  您关于背景放置的 CSS 不正确
4.  我认为这可以松散地定义为“webkit bug”

要纠正此行为并将背景位置保持在右上角，请将您的正文 CSS 更改为：

```
body {
    margin: 0;
    background-image: url(http://static.convertworld.com/images/cols_yb-rtl.png);
    background-position: top right;
    background-repeat: repeat-y;
    background-attachment: fixed;
} 
```

我相信 webkit 浏览器会根据您提到的视口宽度放置背景，但在调整浏览器大小时也会重新定义“右上角”。调整大小后，如果您使用底部滚动条一直滚动到左侧，您可以看到背景再次适合，但是您的元素位于错误的位置。将**背景附件**设置为**固定**将解决您的问题。

# c# - 如何将大数据表复制到 MySql 表？

> ID：12464369
> 
> 赞同：1
> 
> 时间：2012-09-17T17:32:41.073
> 
> 标签：c#, mysql, wpf, datatable

我正在尝试将在应用程序中动态创建的大型数据表（超过 1000 行的列）复制到使用 c#、WPF 的 MySQL 表中。我已经搜索了各种方法来做到这一点，但没有成功实施。我认为 MySqlDataAdapter 类是我应该使用的，但我不能让它工作。这就是我试图做的......

```
 MySqlConnection con = new MySqlConnection(MyConString);
        MySqlCommand comm = new MySqlCommand("Select * From kinectdata", con);
        MySqlDataAdapter test1 = new MySqlDataAdapter(comm);
        test1.Update(skelData); 
```

这种传输的速度也很重要，所以我不想调用插入或更新语句 1000 次。

非常感谢您的反馈！米

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T17:38:06.920

您可以构建一个`INSERT`插入所有 1000 行的语句。

```
INSERT INTO table VALUES (1,2,3), (4,5,6), (7,8,9); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T17:41:26.553

1000 行不算多，用数据库术语来说没什么，使用 insert 应该很快。不超过 2 秒。

在您的示例中，您必须声明命令类型并设置查询和命令文本。

# php - 使用 PHP 将文本行转换为单独的数组

> ID：12464372
> 
> 赞同：-1
> 
> 时间：2012-09-17T17:32:44.260
> 
> 标签：php, arrays, variables, text

我有 txt 文件，其中 30 个值以空格分隔。

```
12.09.11   0:01   16.2   16.2   16.2    72   11.2   3.1    SE   0.19   3.6    SE   15.9   15.9   15.7   761.8  0.00   0.0   0.001   0.000   20.9    46    8.9   19.8   8.65 1.1902     13    1     56.5    1 
12.09.11   0:02   16.2   16.2   16.2    72   11.2   3.1    SE   0.19   4.0    SE   15.9   15.9   15.7   761.8  0.00   0.0   0.001   0.000   20.9    46    8.9   19.8   8.65 1.1903     23    1    100.0    1 
12.09.11   0:03   16.2   16.2   16.2    72   11.1   3.6    SE   0.21   4.9    SE   15.4   15.9   15.2   761.8  0.00   0.0   0.002   0.000   20.9    46    8.8   19.8   8.65 1.1905     23    1    100.0    1 
```

我对 PHP-array 不太好，所以我坚持这样做：

```
<?PHP

$file_handle = fopen("data.txt", "rb");

while (!feof($file_handle) ) {

$textline = fgets($file_handle);

print $textline[0] . $textline[1]. $textline[2] . "<BR>";
}

fclose($file_handle);

?> 
```

它让我在线输出 3 个第一个字符，在这种情况下，它看起来像：

```
12.
12.
12. 
```

但我需要在数组中完全分离数据值，因此输出应如下所示：

```
12.09.11 0:01 16.2
12.09.11 0:02 16.2
12.09.11 0:03 16.2 
```

PS 另外我需要避免阅读前 3 行，它应该总是从第 4 行开始阅读。

任何提示或建议如何正确编写脚本？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:40:16.107

下面的代码逐行读取文本文件。

```
<?php
    $file = "/tmp/file1.txt";
    $f = fopen($file, "r");
    while ( $line = fgets($f, 1000) ) {
        print $line;
    }
?> 
```

所以，同样的，你可以使用：

```
<?php
    $file = "data.txt";
    $f = fopen($file, "r");
    $myArray = array();
    while ( $line = fgets($f) ) {
        $myArray[] = explode("    ", $line);
    }
    print_r($myArray);
?> 
```

# api - WSO2 - 治理注册表 API

> ID：12464374
> 
> 赞同：0
> 
> 时间：2012-09-17T17:32:48.653
> 
> 标签：api, registry, wso2, wso2carbon, wso2-am

我正在尝试使用 WSO2 治理注册表特别是 api 管理器来记录 Web 服务操作。我想为以下字段提供什么 - 提供者、名称、上下文。我在帮助文档的任何地方都找不到这些字段的任何描述。

是否有更合适的选项来记录 Web 服务操作？即休息服务模式、操作名称、描述等？

-ap

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:13:05.907

[http://docs.wso2.org/wiki/display/AM100/Adding+an+API](http://docs.wso2.org/wiki/display/AM100/Adding+an+API)

提供信息供您查询。该链接提供了有关 WSO2 APIM 的综合文档。

问候，/女娲

# c++ - 这些作业是否采用相同的模式？

> ID：12464375
> 
> 赞同：3
> 
> 时间：2012-09-17T17:32:56.013
> 
> 标签：c++, constructor, initialization, default-constructor

> **可能重复：**
> [构造函数的快捷方式](https://stackoverflow.com/questions/12463023/shortcut-for-constructor)

以下代码在 C++ 中是否相同：

件1：

```
MyFunnyClass o = MyFunnyClass(); 
```

片断2：

```
MyFunnyClass o; 
```

我知道以下内容不等效，但我不确定顶部的两个：

```
MyFunnyClass o = MyFunnyClass () ;

MyFunnyClass o;
o = MyFunnyClass(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:42:47.550

```
MyFunnyClass o () ; 
```

这根本没有以任何方式定义对象。这是[最令人头疼的 Parse](http://en.wikipedia.org/wiki/Most_vexing_parse)。`o`是一个不接受任何内容并返回`MyFunnyClass`您已声明的 a 的函数。

真正的语法是

```
MyFunnyClass o; 
```

这将默认构造一个对象。

```
MyFunnyClass o = MyFunnyClass(); 
```

值构造一个对象，然后将其复制或移动到`o`. 在这里期待省略。

# asp.net - 您可以将 HTML 5 与 ASP.NET 4 和 Visual Studio 2010 一起使用吗？

> ID：12464377
> 
> 赞同：3
> 
> 时间：2012-09-17T17:33:07.670
> 
> 标签：asp.net, visual-studio-2010, html

您可以将 HTML 5 与 ASP.NET 4 和 Visual Studio 2010 一起使用吗？

我问这个的原因是我即将从事的一个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:36:24.743

是的。但是您需要安装 SP1 和 Web Standards Update

[http://visualstudiogallery.msdn.microsoft.com/a15c3ce9-f58f-42b7-8668-53f6cdc2cd83](http://visualstudiogallery.msdn.microsoft.com/a15c3ce9-f58f-42b7-8668-53f6cdc2cd83)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:35:48.063

是：http: [//blogs.msdn.com/b/webdev/archive/2011/01/27/html5-amp-css3-in-visual-studio-2010-sp1.aspx](http://blogs.msdn.com/b/webdev/archive/2011/01/27/html5-amp-css3-in-visual-studio-2010-sp1.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T17:36:39.507

是的。

将 HTML5 集成到现有的 ASP.NET Web 窗体和 ASP.NET MVC 应用程序 [http://msdn.microsoft.com/en-us/magazine/jj129609.aspx](http://msdn.microsoft.com/en-us/magazine/jj129609.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T17:37:09.780

是的，您可以下载此扩展程序以支持 Visual Studio 2010 的 html 5 intellisense

[http://visualstudiogallery.msdn.microsoft.com/d771cbc8-d60a-40b0-a1d8-f19fc393127d](http://visualstudiogallery.msdn.microsoft.com/d771cbc8-d60a-40b0-a1d8-f19fc393127d)

[http://visualstudiogallery.msdn.microsoft.com/a15c3ce9-f58f-42b7-8668-53f6cdc2cd83?SRC=VSIDE](http://visualstudiogallery.msdn.microsoft.com/a15c3ce9-f58f-42b7-8668-53f6cdc2cd83?SRC=VSIDE)

# performance - R中的预分配列表

> ID：12464379
> 
> 赞同：51
> 
> 时间：2012-09-17T17:33:27.717
> 
> 标签：performance, r, list, memory

在循环中扩展数据结构在 R 中是低效的。如何预分配`list`一定大小的 a？通过and参数`matrix`使这变得容易。如何在列表中做到这一点？例如：`ncol``nrow`

```
x <- list()
for (i in 1:10) {
    x[[i]] <- i
} 
```

我认为这是低效的。有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-09-17T17:37:00.663

`vector`可以创建所需模式和长度的空向量。

```
x <- vector(mode = "list", length = 10) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-09-17T17:51:45.257

为了扩展@Jilber 所说的内容，`lapply`它是专门为这种类型的操作而构建的。

而不是 for 循环，您可以使用：

```
x <- lapply(1:10, function(i) i) 
```

您可以将其扩展到更复杂的示例。通常，for 循环体中的内容可以直接转换为一个函数，该函数接受单个行，该行看起来像循环的每次迭代中的一行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-17T17:37:43.603

像这样的东西：

```
 x <- vector('list', 10) 
```

但是使用 lapply 是最好的选择

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-05T23:08:19.457

所有 3 个现有答案都很棒。

[JennyBC 的 purrr 教程](https://jennybc.github.io/purrr-tutorial/bk00_vectors-and-lists.html)中解释了该`vector()`函数可以创建*列表*的原因：

> **列表实际上仍然是 R 中的向量，但它不是原子向量。**我们使用 list() 显式构造一个列表，但是，就像原子向量一样，大多数列表在现实生活中都是以其他方式创建的。

### 预分配列表

```
list <- vector(mode = "list", length = 10) 
```

### 预分配[向量](https://stackoverflow.com/a/3414062/5783745)

```
vec <- rep(NA, 10) 
```

# putty - 使用 PLink 时，只有第一个命令正在执行

> ID：12464382
> 
> 赞同：1
> 
> 时间：2012-09-17T17:33:39.430
> 
> 标签：putty, plink

我想使用 plink 连接腻子并想运行文本文件中存在的一些特定命令。但我只能看到第一个命令被执行。我需要给出任何分隔文字的命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:57:35.260

我也遇到了这个问题。我使用的解决方案。

1.  `&&`用or发送一行命令`&`
2.  如果脚本很大，请使用 pscp 发送并使用单个命令在远程主机上运行/

我相信还有第三种方式。只需在`-m`选项下执行脚本:)

# django - Django 模型继承与组合，并同时查询多个模型/表

> ID：12464383
> 
> 赞同：3
> 
> 时间：2012-09-17T17:33:45.217
> 
> 标签：django, inheritance, django-models, composition, schema-design

我有一个 Django 应用程序，它有许多不同的模型，都有一堆公共数据。最终，我认为这个问题归结为继承和组合之间的决定。我目前的实现是这样的：

```
class Thing(models.Model):
    foo = models.FooField()
    bar = models.BarField()
    type = models.CharField()

class A(CommonStuff):
    aFoo = models.FooField()

class B(CommonStuff):
    bFoo = models.FooField() 
```

使用此模型，我可以`Thing`使用 Thing 模型的管理器查询 a。使用 上的类型字段`Thing`，我可以通过查看`type`包含“a”或“b”的字段，然后询问 (ie)来获取子对象数据`thing.a.aFoo`。这是我喜欢的一个功能，因为它是我的应用程序中一个相当常见的操作，用于获取所有`Thing`对象的列表。

我在这里看到几个问题。首先，该`type`字段似乎没有必要。有没有办法在不必先查找类型的情况下获取子数据？似乎我可以使用一个实例方法来解决这个问题，该方法在给定类型值的情况下返回正确的对象，或者如果我真的想摆脱类型字段，我可以遍历每个反向关系字段`Thing`，寻找一个这不会引发`DoesNotExist`异常。不过，这对我来说感觉很脆弱。如果我添加一个新的 'subthing' `C`，我必须更新`Thing`以查找新类型。我可以通过制作`Thing`和抽象模型来解决这个问题。这样，`A`获得`B`所有领域，`Thing`我就不必使用`type`场地。但是，问题是我失去了对所有`Thing`对象执行查询的能力。

我正在考虑的另一种模型通过将数据`Thing`转换为 on`A`和的字段来颠覆这个模型`B`。

```
class Thing(models.Model):
    foo = models.FooField()
    bar = models.BarField()

class A(models.Model):
    aFoo = models.FooField()
    thing = models.OneToOneField(Thing)

class B(models.Model):
    bFoo = models.FooField()
    thing = models.OneToOneField(Thing) 
```

这个版本有一些好处。它摆脱了`type`，`Thing`而且——至少对我来说——看起来和感觉更干净，更不脆弱。但是，这里的问题与`Thing`第一个版本中抽象的问题相同。我失去了同时查询所有“子事物”的能力。我可以查询`A`对象或查询`B`对象，但不能同时查询。可以使用这个版本的模型而不必牺牲查询所有“子事物”的能力吗？一种可能性是编写一个查询两个模型并返回`QuerySet`所有对象的管理器。那样有用吗？

# objective-c - Xcode - 有条件的开发或生产模式

> ID：12464386
> 
> 赞同：6
> 
> 时间：2012-09-17T17:34:03.427
> 
> 标签：objective-c, ios, c

在搜索这个时，我只能找到其他语言的信息。我想知道编写条件语句的最佳实践，例如：

```
if (DEV_MODE){
    //do something
}else{
    //do the real stuff
} 
```

然后在某个全局文件中将 DEV_MODE 设置为打开或关闭，这样我只需将其更改为打开或关闭，而不是在多个位置更改代码。我有一些想法，但正在寻找有关最佳方法的建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-17T17:38:31.823

尝试这个：

```
#ifdef DEBUG
  // do stuff
#endif 
```

当前版本的 Xcode 会自动在新项目中设置此宏。转到您的项目构建设置以确保。如果它不存在，您必须自己添加它：

![在此处输入图像描述](../Images/53e0c273eb08a8e91442cf5c15e67dd0.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-17T17:38:59.653

（这个问题**与 Xcode 无关。**）

也就是说，您可以使用预处理器指令过滤掉调试和发布模式，而不是使用 C 风格的 IF 污染您的代码。据我所知，`DEBUG`在测试模式下将宏定义为 1 是一种常见的做法，如果在发布模式下则不定义它。（另外，Xcode 可能会为你定义这个，我已经看到这种行为被依赖了。）原因是预处理器的使用更具可读性，因为它不会进入缩进，它最好与可视化代码。总结一下，试试

```
#ifdef DEBUG
    // do debug stuff here
#else
    // do release stuff here
#endif 
```

预处理器宏的一个额外参数是您可以对全局命名空间进行条件化，而这在 C 代码中是无法做到的。即，使用预处理器宏，您可以编写

```
#ifdef DEBUG
    int functionOne()
    {
    }
#else
    char *functionTwo(int a)
    {
    }
#endif 
```

如果没有预处理器，您将无法做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T17:37:50.417

预处理器变量是您想要的，在您的构建配置中定义一个变量（`DEV_MODE`例如），然后使用预处理器检查，例如：

```
#if DEV_MODE
    //dev mode code
#else
    //non-dev mode code
#endif 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T17:37:34.490

在您的项目设置中有一个名为“预处理器宏”的部分。在该部分中，您可以为您的调试版本添加一个字符串，例如“DEV_MODE”或您想要的任何内容。然后，您可以执行上面列出的条件，当您的应用程序为“发布”或任何其他不包含宏的设置构建时，您的检查应该失败。

# ckeditor - 如何以编程方式为 CKEditor 设置默认表属性？

> ID：12464395
> 
> 赞同：17
> 
> 时间：2012-09-17T17:34:57.200
> 
> 标签：ckeditor

我正在尝试设置在 CKEditor 中创建的表的默认属性。

例如，有没有办法确保属性边框是 0 而不是 1，或者宽度默认设置为 100%。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-18T12:26:09.063

干得好。`dialogDefinition`事件解决问题：

```
CKEDITOR.on( 'dialogDefinition', function( ev ) {
    var dialogName = ev.data.name;
    var dialogDefinition = ev.data.definition;

    if ( dialogName == 'table' ) {
        var info = dialogDefinition.getContents( 'info' );

        info.get( 'txtWidth' )[ 'default' ] = '100%';       // Set default width to 100%
        info.get( 'txtBorder' )[ 'default' ] = '0';         // Set default border to 0
    }
});

CKEDITOR.replace( 'editor1' ); 
```

更多阅读：

*   [本官方指南](http://docs.ckeditor.com/#!/guide/dev_howtos_dialog_windows)将帮助您使用对话框 API（也使用*devtools*插件）。
*   [](http://ckeditor.com/addon/devtools)*在 CKEditor 对话框中查找 ID 和元素时， [*Devtools*](http://ckeditor.com/addon/devtools)[插件很有帮助。](http://ckeditor.com/addon/devtools)*

 *玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-29T18:55:36.010

如果您需要在第一次创建表格时以及稍后编辑表格属性时更改表格选项，那么除了“table”之外，您还需要定位**“tableProperties”**，如下所示：

```
CKEDITOR.on( 'dialogDefinition', function( ev ) {
var dialogName = ev.data.name;
var dialogDefinition = ev.data.definition;

  if ( dialogName == 'table' || dialogName == 'tableProperties' ) {
      var info = dialogDefinition.getContents( 'info' );

      info.get( 'txtWidth' )[ 'default' ] = '100%';       // Set default width to 100%
      info.get( 'txtBorder' )[ 'default' ] = '0';         // Set default border to 0
  }
});

CKEDITOR.replace( 'editor1' ); 
```

这是来自@oleq 答案的@DanH 评论。但我认为值得投入自己的答案，因为我第一次进行此更改时忽略了这一点。*

# r - 在 ggplot 和 stat_function() 中叠加对数正态密度

> ID：12464396
> 
> 赞同：5
> 
> 时间：2012-09-17T17:35:00.617
> 
> 标签：r, ggplot2

我尝试通过`stat_function()`in叠加一个函数，`ggplot`但无法弄清楚我的错误。这个例子产生了一个漂亮的情节：

```
data <- data.frame(x=rt(10000, df=7))

ggplot(data=data, aes(x=x)) + geom_histogram(aes(y = ..density..)) +
  stat_function(fun =dnorm, size=1, color='gray', args=list()) +
  opts(title="Histogram of interest rate changes") + theme_bw() 
```

![在此处输入图像描述](../Images/b7dd7343ab2cbcb188947e6b7f1128ac.png)

但是当我尝试叠加对数正态密度时，这不能按预期工作（或者我应该按预期说这不起作用；）：

```
data <- data.frame(x=rf(10000, df1=7, df2=120))

ggplot(data=data, aes(x=x)) + geom_histogram(aes(y = ..density..)) +
 stat_function(fun =dnorm, size=1, color='gray', args=list(log=TRUE)) +
 opts(title="Histogram of interest rate changes") + theme_bw() 
```

![在此处输入图像描述](../Images/521247c7cd561556f677457eb0227da7.png)

所以这是我希望简单的问题：我在这里做错了什么？我想这是一个非常简单的问题，我只是没有看到答案 - 抱歉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T18:13:24.720

使用`dlnorm`，对数正态分布的密度函数：

```
ggplot(data=data, aes(x=x)) + geom_histogram(aes(y = ..density..)) +
  stat_function(fun = dlnorm, size=1, color='gray') +
  opts(title="Histogram of interest rate changes") + theme_bw() 
```

![在此处输入图像描述](../Images/c903540291cf2fbe4ad8269b547c495d.png)

# jquery - html 5 重置拖放位置

> ID：12464405
> 
> 赞同：1
> 
> 时间：2012-09-17T17:35:34.273
> 
> 标签：jquery, html, drag-and-drop, reset

我有一个隐藏在某种意义上的 div，然后当您单击一个链接时，它会淡入，而另一个 div 后面的另一个 div 会使网站的其余部分变黑（灯箱效果）。我在这个 div 中有一个拖放方面。如果您移动一个对象，然后关闭 div（基本上再次隐藏它并重新显示站点的其余部分）然后重新打开它，正方形已经移动而不是重置......

是否有“重置”我可以在关闭按钮上调用的移动元素位置的功能或方法？我四处搜索，发现完全没有与重置拖放事件的位置有关。

更新，我让它工作了，虽然这是一种有效的做事方式吗？...：修复：

```
function showpanel(){
    $("#lightbox, #lightbox-panel").fadeIn(300);
}
function hidepanel(){
    $("#lightbox, #lightbox-panel").fadeOut(300);
    $("#lightbox-panel").load("main.php #lightbox-panel");
} 
```

DnD 功能（来自 w3schools）：

```
function allowDrop(ev)
{
ev.preventDefault();
}

function drag(ev)
{
ev.dataTransfer.setData("Text",ev.target.id);
}

function drop(ev)
{
ev.preventDefault();
var data=ev.dataTransfer.getData("Text");
ev.target.appendChild(document.getElementById(data));
var itemVariable = document.getElementById(data).id.split('-');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:52:24.847

您可以将屏幕上的原始位置存储在变量中并手动重置位置。

```
//original position is 0,0
var x-position = '0px'; 
var y-position = '0px'; 
```

然后（我假设您正在使用 JQuery？）在您的重置功能中

```
$('#draggable_object').css('left', x-position).css('top', y-position); 
```

# drupal - 使用 Drupal 7 中的内容类型更改让节点更新

> ID：12464413
> 
> 赞同：0
> 
> 时间：2012-09-17T17:36:01.063
> 
> 标签：drupal, xampp, drush

我在 Windows 上有一个带有 Xampp 的 Drupal 7 本地版本。当我将字段添加到节点的内容类型时，我看到该字段出现在*最后*，无论我将该字段放在 Content types > [myType] > Manage fields 中的顺序如何。我倾向于认为这是一个缓存问题......但我已经尝试过配置 > 性能 > 清除所有缓存，并且字段的顺序不会更新。

例如，我目前有一个图像字段、一个显示标题字段和一个正文字段。在“管理字段”灯箱中，字段的顺序为：

1.  **图片**
2.  **显示标题**（新字段，我没有使用默认标题，因为 Drupal 总是放置在图像上方而不是之后）
3.  **身体**

但是，在页面上的顺序是

1.  **图片**
2.  **身体**
3.  **显示标题**

这不仅仅是由时髦的 CSS 引起的一个技巧——PHP 实际上是以错误的顺序创建 HTML。

我猜当您添加新字段时 Drupal 会更新（创建时默认显示在最后）。当字段在“管理字段”中重新定位时， 它*不会更新，将标题留在页面最后，尽管它在“管理字段”中排在第二位。*

是的，在重新定位管理字段中的字段后，我确实保存了配置。我还清除了浏览器缓存，并重新启动了浏览器。

如何让 Drupal 以字段在管理字段中出现的顺序显示字段？

* * *

PS 我还下载了 Drush 看看它是否可以清除缓存。Drush 命令行有效，但我找到的教程都没有真正解释如何将 Drush 连接到*本地*安装，只有如何通过 SSH 连接到远程服务器……我在我的 drupal 文件夹中输入了“drush cc”，但我没有不知道 Drush 是否真的做了什么，因为我不知道如何让 drush 连接到我的本地主机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T03:13:13.513

不是一个完整的答案，但“管理显示”实际上并不是管理显示。它在编辑内容类型时管理字段的顺序，但不影响它们的显示顺序。

所以，我再次查看它（认为我必须编辑打印内容中的各个字段）......我正在查看“开发”选项卡（开发人员模块），然后单击“渲染”。一些修复/更新页面的方法，标题从底部跳到正文上方。

仍然不确定究竟是什么控制了字段显示的顺序......也许我是一个完整的 n00b，但如果信息在那里，很难找到。

# java - 复制数组 - 初始大小是否重要？

> ID：12464414
> 
> 赞同：1
> 
> 时间：2012-09-17T17:36:06.250
> 
> 标签：java, arrays

所以我是Java新手，所以这个问题可能看起来有点傻，但无论如何......假设我们有这样的代码：

```
int[] oneArray = {1,2,3,4,5,6,7,8,9,10};
int[] anotherOne = new int[150];
anotherOne = Arrays.copyOf(oneArray, oneArray.length); 
```

当我打印 anotherOne 时，无论初始大小是多少，在 copyOf 方法之后，它将是我们所说的该函数的第二个参数。在上面的例子中，数组将缩小到 10 个元素（或者指针将开始指向内存中的另一个位置，我想在那里创建了一个新的 10 元素数组？）。那么我是不是弄错了，或者 anotherOne 的初始大小根本没有意义，如果它被创建为将来某个时候成为副本，那么应该在不指定大小的情况下对其进行初始化（int [] anotherOne;）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T17:38:31.027

改为这样做。这将使您免于创建不需要的中间数组。

```
int[] oneArray = {1,2,3,4,5,6,7,8,9,10};
int[] anotherOne = Arrays.copyOf(oneArray, oneArray.length); 
```

然而，如果你真的需要你的第二个数组是 length `150`，那么你可以这样写：

```
int[] oneArray = {1,2,3,4,5,6,7,8,9,10};
int[] anotherOne = new int[150];
System.arraycopy(oneArray, 0, anotherOne, 0, oneArray.length); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-17T17:38:37.120

`Arrays.copyOf`已经复制了。您不需要`anotherOne`在此之前初始化：

```
int[] oneArray = {1,2,3,4,5,6,7,8,9,10};
int[] anotherOne = Arrays.copyOf(oneArray, oneArray.length); 
```

你的代码会发生什么

*   `oneArray`在内存中创建一个数组
*   `anotherOne`在内存中创建一个 150 个整数的数组
*   该`Arrays.copyOf`方法创建第三个数组，并使变量`anotherOne`指向该数组。这样做的结果是不再引用您的 150 个元素的数组，因此它将被垃圾收集。

这意味着，在实践中，您的代码将完美运行，但您正在使用 CPU 时间（和一小段时间的内存）来创建和擦除 150 个整数的数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T17:38:41.663

`Arrays.copyOf`正在返回一个在该方法中创建的新数组。您将该新数组分配给变量`anotherOne`，失去对您创建的数组的引用，然后该数组将有资格进行垃圾收集。

因此，用于创建数组的大小`int[] anotherOne = new int[150];` *无关紧要*，初始化或使用它创建的数组也无关紧要。

您不妨使用：

```
int[] anotherOne = Arrays.copyOf(oneArray, oneArray.length); 
```

或者：

```
int[] anotherOne;

// ...
anotherOne = Arrays.copyOf(oneArray, oneArray.length); 
```

如果您确实需要结果至少有*150 个*元素，您也可以通过以下方式实现`Array.copyOf`：

```
int[] anotherOne =
    Arrays.copyOf(oneArray, (oneArray.length > 150) ? oneArray.length() : 150); 
```

现在`anotherOne`将至少有*150 个*元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T17:39:27.213

不。

当你做类似的事情时

```
int[] one = initilize...
int[] two = initilize...
two = one; 
```

一个的初始值由`Garbage Collector`

# javascript - 在页面的其他地方使用 javascript 变量

> ID：12464416
> 
> 赞同：0
> 
> 时间：2012-09-17T17:36:16.857
> 
> 标签：javascript, jquery-ui

我有一个页面，其中包含许多滑块，允许用户在两​​个范围之间选择一个值。每当滑块移动时，数字都会更新等，并显示一个新数字。

为了扩展这一点，我想添加一个自由文本字段，用户可以在其中输入然后从总数中减去的数字。

我有以下代码，但不知道如何将变量传递给现有的 javascript，如果我只使用费用金额，则不会显示任何内容。

```
<script type="text/javascript">
$(document).ready(function() {
$("#expense").change(function(){
var expenseamount = $(this).val(); 
});
});
</script> 
```

感谢您到目前为止的帮助，但仍然没有发生任何事情 - 我的完整脚本现在如下：

```
<script> 
$( ".slider" ).slider({
range: "min",
value: 50,
min:10,
max: 100,
step: 10,
slide: function( event, ui ) {
$( "#slider-result" ).html( ui.value );
},
});

var amount= $( ".slider" ).slider( "value" );

var expenseamount;
$(document).ready(function() {
$("#expense").change(function(){
expenseamount = $(this).val(); 
});
});

amount2 = amount - expenseamount;
$("#total" ).text(amount2);

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:41:47.097

`expenseamount`最简单的答案是在使用之前声明为全局变量。然后它将可用于您项目中的所有脚本。在处理程序中声明它`.ready()`使其成为该处理程序函数中的局部变量，因此它在项目的其他地方不可用。以下是您将其声明为全局变量的方式：

```
script type="text/javascript">

var expenseamount;

$(document).ready(function() {
    $("#expense").change(function(){
        expenseamount = $(this).val(); 
    });
});
</script> 
```

通常最好添加尽可能少的全局变量，因为它们可能会相互冲突。如果您只想拥有一个像这样的全局应用程序，或者它是一个非常简单的应用程序，那么上述技术就可以了。

另一方面，如果您的应用程序非常大，并且可能是其他人正在为其贡献代码的更大项目的一部分，那么您可能希望采取措施避免全局变量冲突。在这种情况下，您将创建一个顶级全局变量并在其上添加这样的项目作为属性：

```
script type="text/javascript">

// make sure myAppGlobals is defined as an object
// but if it has already been defined, don't overwrite it
var myAppGlobals = myAppGlobals || {};

$(document).ready(function() {
    $("#expense").change(function(){
        myAppGlobals.expenseamount = $(this).val(); 
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:40:27.797

好吧，你可以取出`var`，它会成为`expenseamount`一个全局变量。但是当涉及到正确的编码实践时，这将是可怕的。

我建议您创建某种对象来保存这样的常见数据并使其成为全局对象。可能还想添加一些简单的命名空间：

```
var AppData = AppData || {};

AppData.expenseAmount = 0;

//...

$(doument).ready(function () {
    $("#expense").change(function(){
        AppData.expenseAmount = $(this).val(); 
    });
});

//...

function someOtherFunction() {
    alert(AppData.expenseAmount); //you get the point.
} 
```

**PS** - 这是一种“应该在任何地方工作”的修复方法。你应该考虑你的具体情况和 JavaScript 的能力来做一些很棒的事情（比如闭包），以将可用性限制在`expenseAmount`需要的地方。所以，澄清一下，这不是*最好*的解决方案，它是*我可以提供的最好的解决方案，而无需更多地了解您的代码结构*。你应该努力改进它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T17:41:44.980

Javascript 具有函数作用域，这意味着函数中定义的变量仅在这些函数中可用。因此，请在您希望它存在的范围内声明变量，即全局范围。

```
var expenseamount;

$(document).ready(function() {
  $("#expense").change(function(){
    expenseamount = $(this).val(); 
  });
});

// expenseamount can now be used from anywhere 
```

# entity-framework - 如何使用 POCO 类在实体框架中触发更改检测/验证

> ID：12464421
> 
> 赞同：1
> 
> 时间：2012-09-17T17:36:29.183
> 
> 标签：entity-framework, ef-code-first, poco

我们正在使用带有 POCO 类（无代理）的 Entity Framework 4.3.1。我们的 User 类存储了一个不应被任何其他用户使用的电子邮件地址。以下测试用于检查此验证：

```
 [TestMethod]
    public void UserEmailNotUniqueTest()
    {
        // arrange
        // - create user one and store in db
        User userOne = TIF.GetUser(model, true);
        // - create user two and store in db
        User userTwo = TIF.GetUserTwo(model, true);

        // act
        // - change user one email to user two email
        userOne.EmailAddress = userTwo.EmailAddress;
        // - save
        model.SaveChanges(); 
```

测试初始化​​创建一个空数据库并将其连接到“模型” DbContext 后代。TIF 类创建用户的测试实例并将它们存储在数据库中。这有效，两个用户都存在于数据库中。此验证要求数据库的状态保持不变，因此我们有一个重写的 SaveChanges 方法，因此我们可以传入可序列化事务：

```
public virtual int SaveChanges(bool commitWhenDone)
    {
            try
            {
                saving = true;
                int result;
                TransactionScope scope;
                using (scope = new TransactionScope( modelTransaction.Get() ))
                {
           //… open connection etc. 
                    ChangeTracker.DetectChanges();
                    IEnumerable<DbEntityValidationResult> validationResults = 
                        GetValidationErrors();
           //… handle the errors
                    result = base.SaveChanges(); 
```

测试失败，因为没有检测到任何变化。不执行验证代码。检查 model.Entity(userOne).State 返回“Unchanged”，但 CurrentValues 包含正确的值，即 userOne 具有 userTwo 的电子邮件地址。

我们缺少什么？

# c# - 首先映射片段 MVC 3 EF 代码中的问题

> ID：12464423
> 
> 赞同：0
> 
> 时间：2012-09-17T17:36:36.880
> 
> 标签：c#, asp.net-mvc, entity-framework, ef-code-first

我最近为我的一个模型添加了一个新属性：

```
public HttpPostedFile AvailabilityImage { get; set; } 
```

但是，这样做后，我现在遇到了这个非常奇怪的错误：

`error 3004: Problem in mapping fragments starting at line 32:No mapping specified for properties FloorModel.AvailabilityImage in Set Floor`

我不知道如何解决这个问题，我以前从未遇到过添加属性的问题？

您认为这与与此属性一起使用的数据类型有关吗？欢迎任何建议

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:42:44.190

HttpPostedFile 是一种复杂类型，它包含许多无法正确序列化的方面。例如，它包含一个引用当前 HttpResponseStream 的属性。每次建立连接时都会有所不同，因此您无法将其序列化。

无论如何，我怀疑您尝试做的事情是否正确。您是否尝试保存上传的文件？如果是这样，那么您需要保存实际的二进制内容..而不是 HttpPostedFile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-10T19:12:02.413

该框架可以自动生成具有复杂数据类型的新 DbSet。当我在模型构造函数下构建模型并传递 DbSet 数据类型时，它发生在我身上。去验证模型并删除任何复杂的数据类型并注释掉与该模型相关的任何 DbSet。

```
public class ApplicationDbContext : IdentityDbContext<ApplicationUser>
{
    .
    .
    .
    public System.Data.Entity.DbSet<Solution.Models.Model1> Model1 { get; set; }

    //Comment out possible Model and try debugging again.
    //public System.Data.Entity.DbSet<Solution.Models.Model2> Model2 { get; set; } 
```

}

# python - 来自 python 的 FQL 多查询因 unicode 查询而失败

> ID：12464426
> 
> 赞同：1
> 
> 时间：2012-09-17T17:36:42.423
> 
> 标签：python, facebook-graph-api, facebook-fql

使用 python 2.6.5 和 facebook-sdk 0.3.2 这个：

```
import facebook
api = facebook.GraphAPI(token)
api.fql({'example':u"SELECT uid2 FROM friend WHERE uid1 = me()"}) 
```

返回一个空列表，但这

```
api.fql({'example':"SELECT uid2 FROM friend WHERE uid1 = me()"}) 
```

作品。如果任何查询是 unicode 字符串，则结果将`[]`没有错误。

Facebook 开发人员支持建议我在 stackoverflow 上询问有什么问题。他们的解释是，由于没有其他人报告过这个错误，这可能是我做错了。所以他们关闭了这个[bug](https://developers.facebook.com/bugs/339250356162899)。

关于如何处理这个问题的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:32:43.773

它基于 facebook.py 库如何处理查询。对 Facebook 的查询最终都需要进行 URL 编码。

因此，挖掘 facebook.py 源代码

```
api.fql({'example':"SELECT uid2 FROM friend WHERE uid1 = me()"}) 
```

最终成为

`queries%3D%7B%27example%27%3A+%27SELECT+uid2+FROM+friend+WHERE+uid1+%3D+me%28%29%27%7D`

哪个匹配正确

```
queries={'example': 'SELECT uid2 FROM friend WHERE uid1 = me()'} 
```

然而

```
api.fql({'example':u"SELECT uid2 FROM friend WHERE uid1 = me()"}) 
```

最终成为

`queries%3D%7B%27example%27%3A+u%27SELECT+uid2+FROM+friend+WHERE+uid1+%3D+me%28%29%27%7D`

`u`请注意，在发送到 facebook.py 库中的 urlencode 之前，未对 unicode 部分进行任何处理。

[https://api.facebook.com](https://api.facebook.com)，对此没有响应，但如果您在 graph.facebook.com 端点上执行相同操作，您会注意到

> (#601) 解析器错误：位置 0 处出现意外的“{”。”

基本上，它会阻塞您的查询。

在发送 URL 编码之前尝试处理您的 Unicode

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:34:00.023

也许问题是您将左侧参数上的 ASCII 字符串与“示例”混合并匹配，并在右侧使用 unicode 作为查询字符串。尝试这个：

```
api.fql({u'example':u"SELECT uid2 FROM friend WHERE uid1 = me()"}) 
```

像这样尝试其他方式：

```
api.fql({u'example':"SELECT uid2 FROM friend WHERE uid1 = me()"}) 
```

我知道要尊重 unicode 的狂野毛茸茸的世界，也许你没有正确编码你的 ascii 字符串？也许尝试使用 unichr(...) 命令逐个字符地组装您的 unicode 字符串。

如果摆弄这些并不能解决问题，那么结论是 fql 函数在传递 unicode 时会呕吐。解决方法是始终使用 ASCII 字符串。

来源： [http ://docs.python.org/howto/unicode.html](http://docs.python.org/howto/unicode.html)

# extjs - 如何使 Extjs Button 看起来像一个链接？

> ID：12464428
> 
> 赞同：2
> 
> 时间：2012-09-17T17:36:50.537
> 
> 标签：extjs, extjs4.1

我想要么在 Extjs 中创建一个链接，要么让一个按钮看起来像一个链接，然后在悬停时你会看到这个按钮。他们在文档中使用代码编辑器按钮和实时预览按钮执行此操作。

![在此处输入图像描述](../Images/50b87b9d70c518bea9559b1ae1cdb0d9.png)

如果他们使用 CSS 执行此操作，我使用什么 CSS 以及何时/如何应用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-09T15:29:01.660

使用 Ext 4.0.7，我设法做到了以下几点：

```
View:
...
{
   xtype: 'button'
   ,text: 'Discard changes'
   ,action: 'cancel'
   ,cls: 'secondary-action-btn'
}

CSS:
....
.secondary-action-btn {
    border: none;
    background: none;
}
.secondary-action-btn span {
    cursor: pointer;
    text-decoration: underline;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-17T04:17:12.117

我最近想要一个 LinkBut​​ton 组件。我试图在没有任何运气的情况下找到一个预先存在的组件，所以我最终从头开始编写了一个。它的实现几乎完全基于 CSS。

```
/******************************************************************************/
/*** LINK BUTTON CSS **********************************************************/
/******************************************************************************/
a.ux-linkbutton {
    background-image: none;
    border: 0px none;
    margin-top: 1px;
}

a.ux-linkbutton.x-btn-default-small-focus {
    background-color: inherit;
}

a.ux-linkbutton * {
    font-size: inherit !important;
}

a.ux-linkbutton:hover {
    text-decoration: underline;
    background-color: inherit;
}

/******************************************************************************/
/*** LINK BUTTON JS ***********************************************************/
/******************************************************************************/
Ext.define( "Ext.ux.button.LinkButton", {
    extend: "Ext.button.Button",
    alias: "widget.linkbutton",

    cls: "ux-linkbutton",

    initComponent: function() {
        this.callParent();
        this.on( "click", this.uxClick, this, { priority: 999 } );
    },

    // This function is going to be used to customize 
    // the behaviour of the button and click event especially as it relates to 
    // its behaviour as a link and as a button and how these aspects of its 
    // functionality can potentially conflict.
    uxClick: function() {
        //Ext.EventObject.preventDefault();
        //Ext.EventObject.stopEvent();
        //Ext.EventObject.stopPropagation();
        //return false;
    }
} ); 
```

点击处理程序是一个正在进行中的工作。

该类确实有一个小问题：单击/聚焦后应用了我无法删除的伪类样式。如果有人在我之前修复它，请发布它的 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T08:44:22.473

我记得有一个名为 linkBut​​ton 的扩展。你可以参考[这里的extjs论坛](http://www.sencha.com/forum/showthread.php?54602-Link-Button-or-Hyper-link/page7)

# javascript - 未显示颜色框的内联内容

> ID：12464429
> 
> 赞同：1
> 
> 时间：2012-09-17T17:36:56.403
> 
> 标签：javascript, css, google-maps, jquery-plugins, google-maps-api-3

我正在尝试通过单击从隐藏的 div 中拉出地图的链接，将谷歌地图显示到颜色框弹出窗口中。我正在使用颜色框[http://www.jacklmoore.com/colorbox/example1/](http://www.jacklmoore.com/colorbox/example1/)`inner html`的概念将地图从隐藏的 div 加载到它的窗口中。`<div id="map_canvas"></div>`

整个代码块如下

```
<link rel="stylesheet" href="colorbox.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="../colorbox/jquery.colorbox.js"></script>
<script type="text/javascript"src="http://maps.googleapis.com/maps/api/js?key=xyxyxyxyxyxyxyxyxyxyxyxyxyx&sensor=false"></script> 
```

```
 <script type="text/javascript" language="javascript">
function initialize() 
{
    var cenLatlng = new google.maps.LatLng(/////////,///////////);
    var myOptions = {
                       zoom: 15,
                       center: cenLatlng,
                       mapTypeId: google.maps.MapTypeId.ROADMAP
                    }

    var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

    var myLatlng = new google.maps.LatLng(/////////,////////////);
    var marker = new google.maps.Marker({
                                          position: myLatlng,
                                          map: map,
                                          title:"XXXXXXXXXXX"
                                       });

    var contentString =  '<div class="info"><img style="float:left;padding-right:10px;" src="/dummy.jpg"><b>YYYYYYYY</b> <br/>' +

             'ZZZZZZZZZZ <br />' +

             'AAAAAAAAA <br />' + 

             'Telephone: BBBBBBBBB</div>';

    var infowindow = new google.maps.InfoWindow({
                                                  content: contentString,
                                                  width:150,
                                                  height:90
                                               });

    infowindow.open(map,marker);

    // Start of newly added code block
    google.maps.event.addListener(marker, 'click', function() {
                                    infowindow.open(map,marker);
                                         });
    // End of newly added code block
}
    google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

```
 <script>
            $(document).ready(function(){
            $(".inline").colorbox({
                                  inline:true,  
                                  scroll:false

                                  });

        });
    </script> 
```

* * *

```
 <div id="map_canvas" style=width:700px; height:500px; display:none;></div> 
```

* * *

```
<p><a class='inline' href="#map_canvas">Display map in colorbox</a></p> 
```

问题是从隐藏的 div 加载地图时根本不显示地图。另一方面，当 div`map_canvas`未隐藏时，地图会完美地加载到隐藏的 div 和颜色框窗口中。

我将不得不为我的应用程序使用所有代码块，但应该从隐藏的 div 正确加载地图。

任何想法？

顺便说一句，我正在使用 google api v-3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:13:20.533

使用内联内容时，您不希望`href`隐藏目标内容（引用的元素）。相反，将内容（未隐藏）包含在另一个隐藏的 div 中，如下所示：

```
<div style="display:none">
    <div id="map_canvas" style="width:700px; height:500px"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:41:45.340

也许您需要在颜色框的 onComplete 上初始化您的地图。

```
 $(".inline").colorbox({
                          inline:true,  
                          scroll:false
                          onComplete: function(){
                              initialize();
                          }

                          }); 
```

并删除脚本中的这一行：

```
google.maps.event.addDomListener(window, 'load', initialize); 
```

但是每次打开颜色框时都会重新加载您的地图

# javascript - Jquery SlickGrid - 为分组行添加区别

> ID：12464431
> 
> 赞同：1
> 
> 时间：2012-09-17T17:37:07.450
> 
> 标签：javascript, jquery, jquery-plugins, slickgrid

所以这对于 SlickGrid 来说是一个非常具体的问题，但我想知道是否有人尝试过改变行分组时的外观？我在想，在分组的行周围添加一个边框以表明它们是该标题的一部分会很酷。

SlickGrid 的工作方式并没有表明行在 DOM 中分组，它们只是出现在标题下。我试图做这样的事情：

```
dataView.getItemMetadata = function(index) {
     return {cssClasses: "myRowCssClass"};                        
} 
```

但不幸的是，这打破了分组方面的其他事情。本机函数中有一些东西`getItemMetadata`需要 groupBy 函数处理。我可以将这些东西复制到这个函数中并为此添加一个条件，但这似乎不对。有没有使用 SlickGrid 经验的人知道如何实现这种效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:02:07.940

我知道这是一个老问题。但我做了一些类似于你所问的事情。

在我的数据中，我有一个组织内多个站点的资产信息。因此，对于每组记录，站点的名称将是相同的。当我读取我的数据（通过 $.ajax 调用获得）时，每当站点名称更改时，我都会在数据数组中插入一个“父”行。

我想以粗体显示这些父行。我通过为父行定义一个 CSS 类并使用 getItemMetadata() 来应用该类来实现这一点。

```
dataView.getItemMetadata = function(row) {
    if (row is a parent) {
        return { 'cssClasses' : 'my-parent-row-class' };
    }
}; 
```

在我的应用程序中，我还使用了 Slickgrid 过滤器和“切换”类（应用在单击处理程序中）来实现向下钻取功能，您可以在其中单击父行并折叠/展开分组在该父行下的行.

我希望这有帮助。

蒂姆

# jquery - jQuery .on keyup 在没有按键时触发

> ID：12464436
> 
> 赞同：1
> 
> 时间：2012-09-17T17:37:31.853
> 
> 标签：jquery

我正在使用`$(function() {});`在页面加载时运行 jQuery 事件。

我有一个数据过滤表单，它使用 3 个输入元素按关键字（年份、品牌、型号）过滤数据。这三个都具有相同的类，我为其分配了一个`.on("keyup")`处理程序，该处理程序将输入的（一个或两个或三个）值提交给 PHP 脚本，该脚本返回 json。

问题：输入输入后，结果按预期过滤，但过了一会儿，结果再次加载，但这一次好像页面刚刚加载（所有结果）。

这是一些代码：

```
function load_vehicle_fitment(args) {
if(args === undefined) {
    args = {};
}

args['func'] = 'print_fitment';

$.get('ajax_get.php', args,
    function(data) {
        $('#fitment_data').html(data.html);
}, "json");
}

$(function() {
// INITIAL
load_vehicle_fitment();

// FILTER YMM COMBOS
$(".filter_input").on("keyup", function(e) {
    var typed_length = $(this).val().length;

    if(typed_length < 1 || typed_length > 2) {
        var args = {};
        var year = $("#year").val();
        var make = $("#make").val();
        var model = $("#model").val();

        if(year.length > 3) {
            args["year"] = year;
        }
        if(make.length > 2) {
            args["make"] = make;
        }
        if(model.length > 2) {
            args["model"] = model;
        }

        load_vehicle_fitment(args);
    }
});

}); 
```

是什么导致这种行为？

* * *

更新：

搜索表格：

```
<form name="vehicle_search" method="get" action="">
<input type="hidden" name="view" value="vehicles">
<input type="text" id="year" name="year" maxlength="4" size="2" class="filter_input" placeholder="Year" value="" style="padding: 3px;" autocomplete="off">
<input type="text" id="make" name="make" class="filter_input" placeholder="Make" value="" style="padding: 3px;">
<input type="text" id="model" name="model" class="filter_input" placeholder="Model" value="" style="padding: 3px;">
<input type="submit" value="Add" id="add_vehicle_button" disabled="disabled">
</form> 
```

* * *

更新：

@Kevin B，@teewuane 我已经将 jQuery 请求包装在一个 setTimeout 中，这基本上使它“等待”，直到它在 keyup 后 n 毫秒，此时它运行。这可以避免发生这种情况的 http 请求：

```
XHR finished loading: ".../ajax_get.php?year=1982&make=F". 
XHR finished loading: ".../ajax_get.php?year=1982&make=Fo". 
XHR finished loading: ".../ajax_get.php?year=1982&make=For". 
XHR finished loading: ".../ajax_get.php?year=1982&make=Ford". 
```

有趣的是，这似乎纠正了我遇到的错误。我不知道为什么会很痛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:41:37.680

我不会放弃 on-keyup 查找，但是您至少应该限制它并在启动新查找时中止现有查找。

# c# - “无可用来源”错误

> ID：12464440
> 
> 赞同：0
> 
> 时间：2012-09-17T17:37:39.370
> 
> 标签：c#, dll

我将我的项目复制到密钥上的 dsik 并尝试在我母亲的家用电脑上运行它。在我使用的代码中`HtmlAgilityPack.HtmlWeb`，我有这一行：

```
private List<string> test(string url, int levels,DoWorkEventArgs eve)
        {
            levels = 0;
            HtmlWeb hw = new HtmlWeb(); 
```

如果我运行我的程序，它不会抛出任何异常，但会继续，只是不会做任何事情。如果我在行上放一个断点：`HtmlWEb hw = new HtmlWeb();` 我正在移动到`No Source Available window`：

```
Locating source for 'D:\Source\htmlagilitypack.new\Trunk\HtmlAgilityPack\HtmlWeb.cs'. Checksum: MD5 {58 c1 63 f6 cd 5 65 de 4c 3c d5 4b b1 b7 7 48}
The file 'D:\Source\htmlagilitypack.new\Trunk\HtmlAgilityPack\HtmlWeb.cs' does not exist.
Looking in script documents for 'D:\Source\htmlagilitypack.new\Trunk\HtmlAgilityPack\HtmlWeb.cs'...
Looking in the projects for 'D:\Source\htmlagilitypack.new\Trunk\HtmlAgilityPack\HtmlWeb.cs'.
The file was not found in a project. 
```

我看到 D:\ 上的某个目录中缺少 HtmlWeb.cs

如果我在我看到的 catch 上放置一个断点，我也会在我的函数测试中尝试并捕获：

捕获到 IO 异常。设备未准备好。

`HtmlWeb.cs`我猜它可能在 D:\ 中寻找文件，而在我母亲的电脑中，我的电脑`D:\`中的 DVD 驱动器是它的硬盘。

完整的例外：

```
System.IO.IOException was caught
  Message=The device is not ready.

  Source=mscorlib
  StackTrace:
       at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
       at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
       at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
       at System.IO.StreamWriter.CreateFile(String path, Boolean append)
       at System.IO.StreamWriter..ctor(String path, Boolean append, Encoding encoding, Int32 bufferSize)
       at System.IO.StreamWriter..ctor(String path)
       at GatherLinks.Form1.removeDuplicates(List`1 a, List`1 b) in F:\GatherLinks\GatherLinks\Form1.cs:line 250
       at GatherLinks.Form1.test(String url, Int32 levels, DoWorkEventArgs eve) in F:\GatherLinks\GatherLinks\Form1.cs:line 111
  InnerException: 
```

我在参考区域中的代码中没有看到任何问题，`HtmlAgilityPack.dll`im 它没有丢失。

所以我想知道为什么它在寻找文件`D:\`？如果在我的电脑上我确实重建/构建解决方案并保存了它，我确信它添加了所有文件并且`dll's`它需要到项目中，所以如果我将它复制到我的磁盘上并在我的母电脑上运行它会工作。

那么我在这里做错了什么？我应该如何修复/修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-14T02:26:44.760

我删除了 HtmlAgilityPack.pdb，它工作得很好。擦除文件，重建，关闭并重新打开，看看它是否有效

# javascript - Chrome 似乎不允许 window.print()

> ID：12464446
> 
> 赞同：4
> 
> 时间：2012-09-17T17:37:51.653
> 
> 标签：javascript, html, google-chrome

我一直试图在我最近的页面上获得一个简单的“打印”链接来工作。我设置了一个简单的小提琴来展示我正在尝试做的事情。

[http://jsfiddle.net/bladnman/4Ux9U/](http://jsfiddle.net/bladnman/4Ux9U/)

出于某种原因，Chrome 抱怨：

```
TypeError: Property 'print' of object [object Window] is not a function 
```

你知道，这种非常非常简单的事情。多年来一直这样做：

```
<a href="#" onclick="window.print(); return false;">Click me to Print</a> 
```

**更新＃1：**

许多用户报告说这对他们在 Chrome 上运行良好。除了报告的错误，我仍然什么也没看到。

我确实想添加我的环境：

**版本**：21.0.1180.89

**操作系统**：OSX 山狮

**更新 #2**：非常感谢 Arjen！事实证明，一个扩展（更好的弹出窗口阻止程序）改变了 DOM，足以使 Window 上的“打印”功能无效。

再次感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:09:57.077

我对此没有任何问题，但是通过为 jsfiddle启用我的弹出窗口阻止程序（我使用[Better Popup Blocker - Chrome Web Store](https://chrome.google.com/webstore/detail/nmpeeekfhbmikbdhlpjbfmnpgcbeggic)`Windows 7` ），我能够重现您在运行时遇到的问题。`Chrome 21.0.1180.89`

如果您使用的是弹出窗口阻止程序，请尝试为 jsfiddle / 您正在使用的站点禁用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-17T14:34:11.147

Mojave 中的 Adblocker chrome 扩展程序也会停止 window.print()。

# hadoop - 具有两个-inputFormat 的 Hadoop 流式传输？

> ID：12464448
> 
> 赞同：2
> 
> 时间：2012-09-17T17:38:03.083
> 
> 标签：hadoop, streaming, mapreduce

假设我有两个文件要以不同的格式映射。一个是序列文件，另一个是纯文本文件。有没有办法`-inputFormat`分别为每个指定一个？或者我还应该做些什么来映射两者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T03:07:24.637

这就是 MultipleInputs 类的用途。对于每个输入，您调用 MultipleInputs：

```
MultipleInputs.addInputPath(job, inputPath, inputFormatClass, mapperClass); 
```

# meteor - 在 Meteor 中，如何在另一个字段更改时更新一个 db 字段？

> ID：12464451
> 
> 赞同：12
> 
> 时间：2012-09-17T17:38:07.940
> 
> 标签：meteor

一般问题：在 Meteor 中，实现在模型更新时触发的业务逻辑的最佳方式是什么——例如，用于更新依赖字段或验证或......

具体示例：我想在[Meteor todos 示例](http://www.meteor.com/examples/todos)中的 Lists 集合中添加一个“slug”字段。每当列表的名称更改时，slug 需要自动更新。

这就是我所拥有的......我正在观察列表的*每一个*变化，看看是否需要创建/更新它的 slug。这是在*共享*的models.js 中（运行服务器和客户端，以获得延迟补偿的好处）：

```
// Lists -- {name: String}
Lists = new Meteor.Collection("lists");

var listsObserver = Lists.find().observe({
    added: updateSlug,
    changed: updateSlug
});

function updateSlug(doc, idx) {
    var slug = (doc.name || '').replace(/\W+/g, '-').toLowerCase();
    if (slug !== doc.slug) {
        console.log("Updating slug for '" + doc.name + "' to " + slug);
        Lists.update(doc._id, {$set: {slug: slug}});
    }
} 
```

（就像在原始的 todos 示例中一样，server/publish.js 将所有内容发布`Lists.find()`为“列表”，而 client/todos.js 订阅该集合。）

上面的代码似乎可以工作，但对我来说似乎不太合适。问题：

1.  像这样观察 Lists 集合是一种合理的方法吗？看起来它可能效率低下——对 Lists 文档的*任何*更改都会触发此代码。
2.  我应该在客户端进行不同的（模拟的）更新，还是让相同的 Mongo/Minimongo 更新在两者上运行？
3.  我是否需要`listsObserver.stop()`在某个时候打电话来处置观察者？如果是这样，什么时候？

（我刚刚开始使用 Meteor，所以也许我对其他环境的偏见正在泄漏。这里隐含的元问题是，我是否以正确的方式思考这个问题？）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-23T06:33:43.017

我建议使用 Collection-Hooks 包。它使用 before 和 after 钩子扩展了收集操作。这比拥有大量的 collection Observes 或 ObserveChanges 要好，尤其是在收集观察的开销会变得非常大的服务器上。

这适用于客户端和服务器。如果您在客户端上实现它，您将获得更新本地集合（延迟补偿）的好处，并且更改将被推送到服务器，因此无需再次执行此操作。

您还可以获得只执行一个 MongoDB 操作而不是像使用观察或观察更改那样执行两个或更多操作的好处。

你可以像这样使用它：

```
var beforeInsertSlug = function(userId, doc) {
    var slug = (doc.name || '').replace(/\W+/g, '-').toLowerCase();
    if (slug !== doc.slug) {
        console.log("Updating slug for '" + doc.name + "' to " + slug);
        doc.slug = slug;
    }
};

var beforeUpdateSlug = function(userId, doc, fieldNames, modifier, options){
    if(modifier && modifier.$set && modifier.$set.doc && _.isString(modifier.$set.doc.name)){
        var slug = (modifier.$set.doc.name || '').replace(/\W+/g, '-').toLowerCase();
        if (slug !== doc.slug) {
            console.log("Updating slug for '" + modifier.$set.doc.name + "' to " + slug);
            modifier.$set.doc.slug = slug;
        }
    }

};

Lists.before.insert(beforeInsertSlug);

Lists.before.update(beforeUpdateSlug); 
```

你可以在这里找到包：[https ://atmospherejs.com/matb33/collection-hooks](https://atmospherejs.com/matb33/collection-hooks)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T18:02:33.743

我在服务器代码中做了类似的事情。基本上将此代码与您想要对 Lists 集合进行的任何其他检查和更新一起放在 Meteor.methods() 中。

虽然下面的代码看起来有点凌乱，而且以 var slug 开头的行肯定很难理解：

```
Meteor.methods({
   myupdate: function (doc) {

     var slug = (doc.name || '').replace(/\W+/g, '-').toLowerCase();

     if (slug !== doc.slug) {
        console.log("Updating slug for '" + doc.name + "' to " + slug);
        Lists.update(doc._id, {$set: {slug: slug}});
     }
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:14:21.700

实现这一点的一种方法是定义自定义模板函数并在正在更改的模板中触发它。例如：

在 client.js 中

```
Template.myTemplate.custom_function_to_update = function() {
    // do my update code.  i.e. MyCollections.Update(...);
} 
```

在带有模板的 html 文件中

```
<template name="myTemplate">
    <!-- Normal template code -->
    {{ custom_function_to_update }}
</template> 
```

每次模板“myTemplate”更新时，它都会调用你的方法。

# php - php循环列表中的随机产品

> ID：12464453
> 
> 赞同：-5
> 
> 时间：2012-09-17T17:38:17.113
> 
> 标签：php, loops

我有产品列表，从女巫那里我需要随机显示四个项目。

```
<?php 

// my product list
function productlistX {
    $array = array( 

        $product {$name = 'product name', $link = 'product link', $img = "product image"};
        $product {$name = 'product name', $link = 'product link', $img = "product image"};
        $product {$name = 'product name', $link = 'product link', $img = "product image"};
        $product {$name = 'product name', $link = 'product link', $img = "product image"};
        $product {$name = 'product name', $link = 'product link', $img = "product image"};
        $product {$name = 'product name', $link = 'product link', $img = "product image"};
        $product {$name = 'product name', $link = 'product link', $img = "product image"};
        $product {$name = 'product name', $link = 'product link', $img = "product image"};
        $product {$name = 'product name', $link = 'product link', $img = "product image"};
        $product {$name = 'product name', $link = 'product link', $img = "product image"};
        $product {$name = 'product name', $link = 'product link', $img = "product image"};
        $product {$name = 'product name', $link = 'product link', $img = "product image"};
        $product {$name = 'product name', $link = 'product link', $img = "product image"};
        $product {$name = 'product name', $link = 'product link', $img = "product image"};
        $product {$name = 'product name', $link = 'product link', $img = "product image"};

    )

    // need to display 4 random products from the array above 
    foreach  {
        echo "<li>".$name . $link . $img . "</li>"
    }
}

// display these random products in my ajax tab (products.php?order=mytab)
$data['mytab'] = $productlistX;

if (isset($data[$_GET['order']])) { 
    echo $data[$_GET['order']];
} 
?> 
```

如您所见，我的列表蚂蚁只需要随机显示列表中的四个项目。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:41:07.323

这可以通过 php[`rand()`](http://php.net/manual/en/function.rand.php)函数来完成，或者您也可以使用[array_rand](http://php.net/manual/en/function.array-rand.php)来使用数组 rand 首先您需要创建数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:40:43.680

不确定我是否知道`text-php`文件类型是什么，但生成四个数字并继续阅读，直到显示所有四个数字。或者阅读整篇文章并从中选择。

# excel - 使用VBA更改Excel中选项卡的颜色？

> ID：12464457
> 
> 赞同：5
> 
> 时间：2012-09-17T17:38:32.943
> 
> 标签：excel, vba

我创建了一个脚本，该脚本创建了一个新工作表，并在所述工作表中创建了一个新选项卡，在更改所述选项卡的名称之前，我想让它使 Sheet1 到 Sheet4 都是红色的。

```
With wbBK2.Sheets(wsWS1).Tab
    .Color = 255
End With 
```

现在上面的代码适用于单个选项卡，但我想知道有没有办法使用 Excel VBA 同时更改所有四个选项卡？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T17:46:20.627

尝试这样的事情：

```
Dim Sht As Worksheet
For Each Sht In Application.Worksheets
    With Sht.Tab
        .Color = 255
    End With
Next Sht 
```

**笔记：**

我认为您可以更改`Application.Worksheets`为`wbBK2.Worksheets`，但我的咖啡因含量太低而无法记住，或者是时候测试一下了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T17:51:01.357

起初我认为使用该`Sheets(Array("Sheet1","Sheet2")).Select`方法会起作用，但在测试（并运行宏记录器）之后，我发现它没有。

**更新**

哦，评论很棒。这是更清洁，更易于阅读的方式：

```
Sub SheetTabColor()

Dim mySheets As Worksheets
Dim mySheet As Worksheet

Set mySheets = Sheets(Array("Sheet1", "Sheet2", "Sheet3", "Sheet4"))

For Each mySheet In mySheets
    mySheet.Tab.Color = 255
Next

End Sub 
```

这是我的原创。相同的想法，略有不同的方法：

```
Sub SheetTabColor()

Dim arrSheets() As String

arrSheets() = Split("Sheet1,Sheet2,Sheet3,Sheet4", ",")

Dim i As Integer
For i = LBound(arrSheets()) To UBound(arrSheets())

    Sheets(arrSheets(i)).Tab.Color = 255

Next

End Sub 
```

# php - If 语句和对象

> ID：12464463
> 
> 赞同：-1
> 
> 时间：2012-09-17T17:39:02.713
> 
> 标签：php, arrays, object, if-statement, scope

这是迄今为止我见过的最奇怪的事情，我完全糊涂了。请有人帮我解决这个问题。

```
 $variable=array();
    $count=0;
    // now im am going to loop through a resource that i made
    while(!feof($job))
    {
      $data=fgets($job);
      // i am search for different things below. search for name, date, employer
      // i am using regex to search btw
      // presume object in class works fine, and they do.
      if(search for eg name in $data, storing in $variable[$count].first($match))

      // the problem is at this point i will have access to 
      // $variable[$count].getFirst(returns value set by first) which was set above;  

      if(search for eg Employer in $data, storing in variable[$count].next($match))

      // i will have access here as well 
      // $variable[$count].getFirst(returns value set by first) which was set above

      if(search for 3rd search in $data, storing in variable[$count].name($match))

      // down here after the second if i am not able to see any of my variables set more than 2 if statements ago????
      // $variable[$count].getFirst(does not returns the value set by first()) which was set                                                          above

      if(search for 4th search in $data, storing in variable[$count].foo($match))
      // check if everything is set then count++;
    } 
```

现在，这些方法中的每一个都完全依赖于下一个但在 2 个 if 语句之后。我只是无法访问 $variable[count]->getfirst() 答案为空；

已编辑

这是实际的代码

```
require "functions/decodeEncodedUrl.php";
require "objects/jobObject.php";
$url=decodeEncodedUrl();
$profile=array();
$companies=0;
$url_search='http://www.jobbank.gc.ca/';
$startReading=0;
$job=fopen($url['url'], 'r')or die("JobBanks is failing to respond.<br>Please Try again Later");
while(!feof($job))
{
  set_time_limit(500);
  $profile[$companies]= new jobProfile();
  $trash=fgets($job);
  if(!$startReading)
  {
    if(preg_match('~RepeaterSearchResults_hypJobItem_[0-9]+~',$trash,$matches))
    {
      $startReading=true;
    }
  }
  if($startReading)
  {
    $data=$trash;
    if(preg_match("~href=\".*\"~",$data,$matches))
    {
      $temp=preg_replace("~href=~",'',$matches[0]);
      $temp=preg_replace("~\"~",'',$temp);
      $profile[$companies]->setLink($url_search.$temp);
      var_dump($profile[$companies]);
      echo "<br>";
      echo "<br>";
    }
    if(preg_match("~>[A-Za-z-, ]+\(~",$data,$matches))
    {
      $temp=preg_replace("~>|\(~",'',$matches[0]);
      $profile[$companies]->setPosition(ucfirst($temp));
      var_dump($profile[$companies]);
      echo "<br>";
      echo "<br>";
    }
    if(preg_match("~# *[0-9]+~",$data,$matches))
    {
      $profile[$companies]->setOrderNum(preg_replace("~#| ~",'',$matches[0]));
      var_dump($profile[$companies]);
      echo "<br>";
      echo "<br>";
    }
    if(preg_match("~Employer:</strong>.*~",$data,$matches))
    {
      $temp=preg_replace("~Employer:</strong>&nbsp;~",'',$matches[0]);
      $temp=preg_replace("~<br.*~",'',$temp);
      $temp=ucfirst($temp);
      $profile[$companies]->setEmployer($temp);
      var_dump($profile[$companies]);
      echo "<br>";
      echo "<br>";
    }
    if(preg_match("~[$][0-9]+.*~",$data,$matches))
    {
      $temp=preg_replace("~/.*~",'',$matches[0]);
      $profile[$companies]->setSalary(preg_replace("~[$]~","$ ",$temp));
      var_dump($profile[$companies]);
      echo "<br>";
      echo "<br>";
    }
    if(preg_match("~[$][0-9]+.*~",$data,$matches))
    {
      $temp=preg_replace('~[$A-Za-z0-9\. ]*[/] ?~','',$matches[0]);
      $profile[$companies]->setRate(preg_replace('~<.*~','',$temp));
      var_dump($profile[$companies]);
      echo "<br>";
      echo "<br>";
    }
    if(preg_match("~Location:.*~",$data,$matches))
    {
      $temp=preg_replace('~.*;~','',$matches[0]);
      $temp=preg_replace('~^ |,~','',$temp); 
      $profile[$companies]->setCity(ucfirst($temp));
      //echo ucfirst($temp)."<br>";
    }
    if(preg_match("~Location[:<>/\,A-Za-z ]*~",$data,$matches))
    {
      $profile[$companies]->setProvince($matches[0]);
      //echo " ".$matches[0]."<br>\n";
      //echo $profile[$companies]->getLocation()."\n<br>";
    }
    if(preg_match("~[0-9]{4}/[0-9]{2}/[0-9]{1,2}~",$data,$matches))
    {
      echo $profile[$companies]->displayHTML();
      $profile[$companies]->setDate($matches[0]);
      if($profile[$companies]->allDataSet())
      {
        //echo "data was set"."<br>";
        $startReading=false;

        $companies++;
      }
      else
      {
        $startReading=false;
        $companies++;
        echo "Data was Not set";
      }
    }
  }
}
fclose($job); 
```

一切正常，除了 $profile[number] 在存储变量时的第三个 if 语句之后根本不存储任何东西。

```
If
{
//Profile[number] info stored
}
if
{
//Profile[number] info available
}
if
{
//profile[number] info available
}
if
{
//profile[number] info is gone
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:07:29.530

`variable[$count].next($match)` .next() 将内部指针移动到数组中的下一个元素。

# django-forms - Django Formset ...使用字段排除保存用户

> ID：12464466
> 
> 赞同：0
> 
> 时间：2012-09-17T17:39:19.247
> 
> 标签：django-forms

所以在这个表单集中，第一个字段保存和更新很好......但是当我想添加一个新对象时，它的效果并不好。

```
#Views.py
def edit_auto(request):
car = Auto.objects.filter(user=request.user)
CarFormSet = modelformset_factory(Auto, form=AutoForm, max_num=3)

if request.method == 'POST':
    formset = CarFormSet(request.POST, request.FILES, queryset=car)
    if formset.is_valid():
        formset.save(commit=False)
        formset.user = request.user
        formset.save()

    return render_to_response('manage_users.html', {'message':'Success! The user has been updated!'}, context_instance=RequestContext(request))
else:
            formset = CarFormSet(queryset=car)
return render_to_response('mycar.html', locals(), context_instance=RequestContext(request))

#forms.py
class AutoForm(forms.ModelForm):
    class Meta:
        model = Auto
        user = Auto.user
        exclude = ('user',) 
```

是模板里的东西吗？如果它是表单的单个实例，`form.user = request.user`通常会保存，但不会。有什么建议么？感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:49:37.440

对于用户分配步骤，只需遍历表单集。

```
...
if request.method == 'POST':
    formset = CarFormSet(request.POST, request.FILES, queryset=car)
    if formset.is_valid():
        formset.save(commit=False)
        for form in formset:
            form.user = request.user
        formset.save()
... 
```

# c# - 我可以在 MVC4 Web Api 中创建动态服务描述页面吗？

> ID：12464467
> 
> 赞同：1
> 
> 时间：2012-09-17T17:39:24.633
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

有没有办法创建一个动态页面来显示 ac#MVC4 web api 的可用 api 方法？我正在寻找类似于旧肥皂 .asmx 页面工作方式的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:50:56.880

您可以使用 ASP.NET Web API 帮助页面 - [http://blogs.msdn.com/b/yaohuang1/archive/2012/08/15/introducing-the-asp-net-web-api-help-page-预览.aspx](http://blogs.msdn.com/b/yaohuang1/archive/2012/08/15/introducing-the-asp-net-web-api-help-page-preview.aspx)

Nuget 包在这里 - [http://nuget.org/packages/Microsoft.AspNet.WebApi.HelpPage](http://nuget.org/packages/Microsoft.AspNet.WebApi.HelpPage)

# c# - 使用对数缩放向图表添加空点

> ID：12464479
> 
> 赞同：8
> 
> 时间：2012-09-17T17:40:09.293
> 
> 标签：c#, mschart

我`C#` `charts`用来显示/比较一些数据。我将图形比例更改为`logarithmic`（因为我的数据点有很大差异），但由于`logarithmic`缩放不支持`zero`值，我只想为这种情况添加一个空点（或跳过一个数据点）。我尝试了以下但不起作用并且所有崩溃：

```
if (/*the point is zero*/)
{
    // myChart.Series["mySeries"].Points.AddY(null);
    // or
    // myChart.Series["mySeries"].Points.AddY();
    // or just skip the point
} 
```

是否可以添加一个空点或只是跳过一个点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-07-19T17:57:06.777

我找到了两种解决问题的方法。

一个正在使用`double.NaN`（突然！）：

```
if (myChart.ChartAreas[0].AxisY.IsLogarithmic && y == 0)
    myChart.Series["mySeries"].Points.AddY(double.NaN);
    // or ...Points.Add(double.NaN) 
```

这看起来像零 [![在此处输入图像描述](../Images/ccc4f16c41fd672566e7fa9221eac9d2.png)](https://i.stack.imgur.com/2SiUV.png)

在我的情况下，它**并没有**因为以下`SeriesChartType`s 而崩溃：

```
Column, Doughnut, FastPoint, Funnel, Kagi, Pie, Point, Polar, Pyramid, Radar, Renko, Spline, SplineArea, StackedBar, StackedColumn, ThreeLineBreak 
```

另一种方式是空点的内置概念：

```
if (myChart.ChartAreas[0].AxisY.IsLogarithmic && y == 0)
    myChart.Series["mySeries"].Points.Add(new DataPoint { IsEmpty = true }); 
```

这看起来像是一个缺失点（一个差距）： [![在此处输入图像描述](../Images/fa5250c95a3ebb6b73dda2c6cb85317a.png)](https://i.stack.imgur.com/v84Nv.png)

在我的情况下，它**并没有**因为以下`SeriesChartType`s 而崩溃：

```
Area, Bar, Column, Doughnut, FastPoint, Funnel, Line, Pie, Point, Polar, Pyramid, Radar, Renko, Spline, SplineArea, StackedArea, StackedArea100, StackedBar, StackedBar100, StackedColumn, StackedColumn100, StepLine, ThreeLineBreak 
```

第二种**方法**感觉像是**正确**的（按设计）。第**一个**看起来像一个**hack**，它意外地似乎起作用了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-04T15:36:34.857

你可以做一个小把戏。你显然必须清除你的系列。当您开始向空点集合添加点时，会从 1 开始自动生成 x 坐标。您可以自己创建代理 x 并跳过一些 x 值。

```
int x = 0;
foreach(var y in yValues)
{
    x++;
    if (myChart.ChartAreas[0].AxisY.IsLogarithmic && y == 0)
        continue;
    myChart.Series["mySeries"].Points.AddXY(x, y);
} 
```

对于条形图类型，它看起来像是一个缺失值。

# ruby - 在 Ruby 中使用字符串作为变量/对象名称

> ID：12464481
> 
> 赞同：1
> 
> 时间：2012-09-17T17:40:16.310
> 
> 标签：ruby

我正在处理分形。您从一个矩形开始，该形状会按给定的衰减率减小。我将它设置为执行给定场景的前 10 次迭代，每个场景如下所示：

```
y_1 = dec_y(y_1)
y_2 = dec_y(y_2)
a_y = [y_1, y_2]
rect_1 = TkcRectangle.new(canvas, [0,0], a_y) 
```

其中`dec_y`定义如下：

```
def dec_y(y)
    to_ret = y / $rate
    return to_ret
end 
```

我想把第一个片段变成一个函数/方法（不完全确定 Ruby 术语是什么......），这样每次迭代都只是引用一个方法的一行，这使得问题更具可扩展性。但是，我需要每个`TkcRectangle`人都有一个不同的名字。我想设置它的方式，每个都`TkcRectangle`将具有相同的名称。但是，如果我可以将对象的名称设置为作为参数传递的字符串，那么我应该没有问题。

如何使用给定的字符串定义对象的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:48:15.027

*编辑：代码尚未经过测试，但会给你的想法。*

您可以使用数组并使用索引来代替命名每个元素，而不是命名每个元素

```
rectangles_array = Array.new
for each loop
  rectangles_array << create_rectangle_object(y_1, y_2, canvas)
end for each loop

def dec_y(y)
  to_ret = y / $rate
  return to_ret
end

def create_rectangle_object(y_1, y_2, canvas)
  return TkcRectangle.new(canvas, [0,0], [dec_y(y_1), dec_y(y_2)])
end 
```

如果您真的想命名它，请阅读有关结构的内容..类似

```
MyRectangleStruct = Struct.new(:obj_name, :x1, :y1, :x2, :y2)
puts MyRectangleStruct.new(:obj_name => 'First_rec', .....) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:04:38.260

```
define_method(method_name, &block) 
```

是`method_name`任何字符串并且`&block`是一块 ruby​​ 代码；通常它看起来像这样：

```
define_method(method_name) do
  your code goes here
end 
```

# php - 如何将多个值传递给jquery中的函数

> ID：12464487
> 
> 赞同：1
> 
> 时间：2012-09-17T17:41:04.530
> 
> 标签：php, jquery

我有这个评论列表，我想使用 AJAX 从数据库中删除，并使用 Javascript 从当前视图中淡出。

我调用此函数`removeComment()`将要删除的 div 的 ID 发送到服务器（ID 也是数据库中的行 ID）

我遇到的问题是，在我第一次运行该功能后，它停止工作。

```
jquery code

function removeComment(PostId) {

    var commentid = 'com' + PostId;

    $(document).ready(function() {
        $(commentid).fadeToggle('slow');

        // send to php script
        $.ajax({
            type: 'POST',
            cache: false,
            url: 'actions/adminProcessor.php',
            data: 'action=removeComment' + '&PostId=' + PostId,
            success: function(done) {
                alert(done);
            }
        });
    }); // <-- Sorry, was missing a '}'
} 
```

以下是评论列表的html以及函数的调用方式

```
 <div class="comments" id="com3">
      <label><admin>UD</admin></label><a href="Javascript:removeComment('1')">Remove</a>
      <span>17/09/12</span>
      <p>adfadfadfadf</p>
      </div>
    <div class="comments" id="com3">
      <label><admin>UD</admin></label><a href="Javascript:removeComment('3')">Remove</a>
      <span>17/09/12</span>
      <p>adfadfadfadf</p>
      </div> 
```

请问我想知道我哪里弄错了

下面是php脚本

```
 if($action == "removeComment"){ 
            extract($_POST) ;
            $query = "DELETE FROM comments WHERE id = '$cId'" ;
            $result = mysql_query($query);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:50:01.390

你不应该将你的行为包装到一个`$(document).ready`函数中。你应该阅读更多关于什么[`$(document).ready`](http://api.jquery.com/ready/)意思。这段代码现在应该可以工作了：

```
function removeComment(PostId) {
    var commentid = 'com' + cid;
    var coms = document.getElementById(commentid);
    $(coms).fadeToggle('slow');
    $.ajax({
        type: 'POST',
        cache: false,
        url: 'actions/adminProcessor.php',
        data: 'action=removeComment' + '&PostId=' + PostId,
        success: function (done) {
            alert(done);
        }
    });
} 
```

# flash - 前贴片广告期间 YouTube 的 PlayerState 是什么？

> ID：12464499
> 
> 赞同：3
> 
> 时间：2012-09-17T17:42:06.543
> 
> 标签：flash, youtube-api

Flash YouTube API getPlayerState() 方法有 6 个可能的值：

*   -1（未开始）
*   0（结束）
*   1（播放中）
*   2（暂停）
*   3（缓冲）
*   5（视频提示）。

手册内容如下：

> 当播放器第一次加载视频时，它将广播一个未启动 (-1) 事件。当视频被提示并准备好播放时，播放器将广播视频提示 (5) 事件。在您的代码中，您可以指定整数值，也可以使用以下命名空间变量之一。

考虑一下：

1.  播放器被 CUED 等待用户交互。
2.  用户点击播放
3.  前贴片视频广告开始播放

**播放器在前贴片广告期间处于什么状态？我如何知道正在播放广告？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T04:12:55.990

我在[https://developers.google.com/youtube/youtube_player_demo为您完成了相关工作](https://developers.google.com/youtube/youtube_player_demo)

使用预卷播放视频，然后单击“播放”会导致：

1.  onStateChange 事件：玩家状态更改为：“-1”（未定义）
2.  cueVideoById(cggNqDAtJYU, parseInt(0), 默认);
3.  onStateChange 事件：播放器状态更改为：“5”（视频提示）
4.  onStateChange 事件：播放器状态更改为：“2”（暂停）

因此，在播放广告时，视频的状态为 PAUSED (2)。此外，在预卷期间调用 playVideo() 或 pauseVideo() 将是无操作的。

# css - CSS选择ul中的所有li

> ID：12464500
> 
> 赞同：10
> 
> 时间：2012-09-17T17:42:16.667
> 
> 标签：css, html-lists

我想编写一个 CSS 选择器来选择文档中 ul 元素中的所有 li 元素，但我不知道该怎么做。你能帮我吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-17T17:43:30.457

```
ul > li {
  /* css styles go here */
} 
```

或者

```
ul li {
  /* css styles go here */
} 
```

第一个只选择直接子项，第二个选择所有`li`嵌套在`ul`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T17:44:14.250

这应该有效：

```
ul li { /*css here */} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T17:44:30.870

您可以使用

```
 ul li {
  /* your code here */
 } 
```

# powershell - 在powershell中使用别名为空参数

> ID：12464504
> 
> 赞同：0
> 
> 时间：2012-09-17T17:42:27.077
> 
> 标签：powershell, alias

我希望在 `-h` 不传递值的情况下像 `-h` 使用参数一样工作：但是，我希望其他人保持原样......也就是说，它们是可选的，除非您为参数设置别名并且您需要提供价值。

```
Param(
$BadParam,
[alias("h")][String]$Help,
[alias("s")][String]$Server,    
[alias("d")][String]$DocRoot,
[alias("c")][String]$Commit,
[alias("b")][String]$Branch
) 
```

例如（因为缺乏更好的）：

```
if(!$Help)
{
Write-Host "Here's the menu for how it works bro."
}

if($Help)
{
Write-Host "Here's more info on that particular thing from the menu."
} 
```

我希望这在 shell 中表现如何：

```
-> script.ps1 -s test -h
-> Here's the menu for how it works bro.

-> script.ps1 -s test -h server
-> Here's more info on that particular thing from the menu.

-> script.ps1 -s -h server
-> You are missing a value for -e. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:20:49.180

Powershell 并不真正支持这样的东西。您可以有一个`[switch]`可以不指定值的参数，也可以有一个`[string]`必须完全不存在或提供值的参数。您不能有一个支持不存在、不指定值和指定值的参数。

一种替代方法是 make it a `[string]`，但让用户通过`$null`，但这很糟糕。

另一个非常 hacky 的替代方法是对参数位置进行一些技巧。 `-Help`可能是 a `[switch]`，那么`-ThingHelp`在它之后可能还有另一个参数是 a `[string]`。然后看起来像的调用`-Help 'foo'`不是设置`$Help`为`'foo'`而是设置`$Help`开关，并且还分配`$ThingHelp = 'foo'`.

```
function ParamTest
{
  param(
     [Parameter(Position = 0)]
     [switch]$Help,

     [Parameter(Position = 1)]
     [string] $ThingHelp

  )

   "Help is [$help]"
   "ThingHelp is [$thingHelp]"
} 
```

这支持以下内容：

```
PS> ParamTest               # $help = $false, $thingHelp = null
PS> ParamTest -Help         # $help = $true, $thingHelp = null
PS> ParamTest -Help 'foo'   # $help = $true, $thingHelp = 'foo' 
```

一般来说，像这样的黑客攻击**并不是**一个好主意，因为它们往往既脆弱又令人困惑。您应该能够将脚本提供给普通的 powershell 用户，他们应该立即了解您的参数的含义和用法。如果您必须解释一堆其他数千个 cmdlet 都没有做的自定义内容，那么您可能是在浪费每个人的时间。

如果您实际上是在实施某种帮助/使用系统，请停止！Powershell 免费提供全面的帮助系统。您可以记录每个参数，提供示例代码等，无需任何额外内容。[有关基于注释的帮助](http://technet.microsoft.com/library/hh847834.aspx)，请参阅文档。

# c - 这个 char 数组如何存储四个单独的字符串？

> ID：12464511
> 
> 赞同：0
> 
> 时间：2012-09-17T17:42:59.810
> 
> 标签：c, string, pointers, char

我对我正在阅读的书中的这个片段感到困惑。文本字符串被放入一个`char`数组中。有四个单词，数组中有四个元素。等等，但这意味着单个`char`元素包含整个文本字符串。我敢肯定`chars`只能处理一个字符。这是代码。

```
const char *words[4] = { "aardvark", "abacus", 
    "allude", "zygote" }; 
```

那么给了什么？作者如何`chars`存储整个字符串？我知道解决方案必须非常明显，但我就是看不到它。另外，`const`关键字是什么？为什么只有当我们计划对这个数组做的只是计算每个单词的长度时才需要读取它`strlen()`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T17:44:31.997

该代码不使用字符来存储字符串，请注意声明是*一个* `char *`.

A`char`可以保存单个字符，a`char *`可以用于指向字符数组的第一个元素，该数组可以保存标准 C 字符串。这是一个重要的 C 基础知识：看到 a `char *`，您应该立即想到以 null 结尾的 C 字符串。

类似地，通过保存数组中*第一个*的地址，`int *`可以使用 an 来引用 的整个数组。可以像使用声明的数组一样下标。`int` *`int``int*``[]`*

 *A`char *`也可以用来简单地保存单个字符的地址——即不是空终止字符串中的第一个字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T17:45:02.970

> 作者如何使用字符来存储整个字符串？

他不能。[你注意到星号，对吧？](http://www.taranets.net/cgi/ts/1.37/ts.ws.pl?w=329;b=280)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T17:50:05.330

您缺少的一点是`*`.

```
char letter = 'a';  //stores a single character
char *word = "bigger"; //stores a string literal 
```

这意味着这个词真的是：

```
word ---> [b][i][g][g][e][r][\0] 
```

指向一堆字符（或字符的“字符串”）。在您的示例中，作者定义：

```
const char *words[4] = { "aardvark", "abacus",      "allude", "zygote" }; 
```

所以你有 4 个字符字符串，它们是恒定的。const 是作者选择在其中添加它的选择......它可以被忽略。这只是一种保护措施，是对编译器（和作者）的说明，这些值不会被修改。*

# php - 如何阻止用户使用他们的 IP 和 MySQL 数据库？

> ID：12464512
> 
> 赞同：-5
> 
> 时间：2012-09-17T17:43:00.217
> 
> 标签：php, mysql, redirect, ip

我是这个网站的新手，我一直在编写一个脚本来阻止来自网站的某些 IP，问题是，它都适用于列中的第一个 IP，例如数据库看起来像这样：

[http://gyazo.com/290bc2b9ef77d5b985ddd675ba0c08d1](http://gyazo.com/290bc2b9ef77d5b985ddd675ba0c08d1)

然后只有第一个 IP，在本例中为 86.70。***。**将被重定向到被禁止的页面，如果有人可以帮助我让我的 php 脚本正常工作：

```
<?php 
mysql_connect("localhost", "root", "password") or die(mysql_error());  
mysql_select_db("bans") or die(mysql_error());  
$query = mysql_query("SELECT * FROM `database`"); 
$row = mysql_fetch_array($query); 
$ip = $_SERVER['REMOTE_ADDR']; //Gets the users IP adress

$deny = array( $row[ip]); 
if (in_array ($_SERVER['REMOTE_ADDR'], $deny)) {
   header("Location: http://gabbo.org.uk/banned.php"); //What page shall the bans be sent to?
   exit(); 
}?> 
```

我会很感激！E.罗西尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:48:05.243

### 逻辑上的微小变化。

```
<?php 
    mysql_connect("localhost", "root", "password") or die(mysql_error());  
    mysql_select_db("bans") or die(mysql_error());
    $ip = $_SERVER['REMOTE_ADDR'];

    # Full Text Attempt
    $query = mysql_query("SELECT `IP` FROM `database` WHERE `IP` = '$ip'");
    # Wild Card Attempt
    $query = mysql_query("SELECT `IP` FROM `database` WHERE `IP` LIKE '%$ip%'");
    # Use any one query from the above!

    if (mysql_num_rows($query) > 0)
    {
        header("Location: http://gabbo.org.uk/banned.php");
        die();
    }
?> 
```

### 在职的

当具有 IP 地址的用户`192.168.1.1`尝试访问您的页面并且您的 MySQL 禁止列表拥有它时，它肯定会返回一些行，这些行大于`1`. 这样，标头`301 Permanent Redirection`就向浏览器提供了被禁止页面的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:47:59.470

第一部分是好的，但是拒绝列表应该计算为

```
$deny = array()
while ($row = mysql_fetch_array($query)) {
 $deny[] = $row['ip'];
} 
```

...比你可以从 if( in_array ) 继续

其他人也是对的，您应该查询数据库是否存在，而不是检索所有内容并在 php.ini 中处理它。

还有一个非常强烈的建议：改用 PDO！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T17:51:07.003

您应该将 IP 查找放在查询中：

```
$ip = $_SERVER['REMOTE_ADDR']; //Gets the users IP adress

mysql_connect("localhost", "root", "password") or die(mysql_error());  
mysql_select_db("bans") or die(mysql_error());  
$query = mysql_query("SELECT * FROM `database` WHERE ip='$ip'"); 
$row = mysql_fetch_array($query); 

if ($row) {
   //What page shall the bans be sent to?
   header("Location: http://gabbo.org.uk/banned.php"); 
   exit(); 
} 
```

# objective-c - OpenGL ES 2 压缩失真滤镜，如 photobooth 应用程序

> ID：12464513
> 
> 赞同：1
> 
> 时间：2012-09-17T17:43:05.053
> 
> 标签：objective-c, opengl-es-2.0

我正在尝试编写类似 photobooth ios 或 osx 应用程序中的挤压效果；我是着色器的新手，但我能够实现 GPUImage 库和一些着色器；然而，我所能获得的只是球面变形，最终结果与我想要实现的有点不同。

这是我从 #import "GPUImageBulgeDistortionFilter.h" 修改的一些代码

特别是我正在使用这段代码

```
 NSString *const kGPUImageBulgeDistortionFragmentShaderString = SHADER_STRING
    (
     varying highp vec2 textureCoordinate;

     uniform sampler2D inputImageTexture;

     uniform highp vec2 center;
     uniform highp float radius;
     uniform highp float scale;

     void main()
     {
         highp vec2 textureCoordinateToUse = textureCoordinate;
         highp float dist = distance(center, textureCoordinate);
         highp float PI = 3.14159265358979323846264;//stone added
         textureCoordinateToUse -= center;
        textureCoordinateToUse.x = 0.5+textureCoordinateToUse.x*cos(textureCoordinateToUse.x*PI/radius)*scale;
         textureCoordinateToUse.y = 0.5 + textureCoordinateToUse.y*cos(textureCoordinateToUse.y*PI/radius)*scale;

         gl_FragColor = texture2D(inputImageTexture, textureCoordinateToUse );

     }
    ); 
```

这段代码使用 cos 和 sin 和 PI，所以它肯定在球面范围内；任何让它更平坦的提示，中间有一个小的未拉伸部分都会有很大的帮助！

# c++ - 如何使 operator++ 继续到链表中的下一个节点指针？

> ID：12464517
> 
> 赞同：2
> 
> 时间：2012-09-17T17:43:26.977
> 
> 标签：c++, struct

我有一个保存数据的链表和一个指向下一个节点的指针`Node<T>* next`，如下所示：

```
template <class T>
struct Node
{
    T data;
    Node<T>* next;
}; 
```

问题是我想在其中放入一个后增量运算符，因此它返回我节点的先前值，但增加引用。所以如果我这样做

```
Node<int>* someNode = someList.SomeNode();
Node<int>* tmp = someNode++; 
```

`tmp`将是原始`someNode`值，但`someNode`会是`someNode->next`.

是否可以在结构中放置运算符？我已经尝试过，并搜索了如何做到这一点，但由于我不与运营商打交道，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T18:21:21.503

您不能将成员函数添加到指针等基本类型。

您要定义的是迭代器。在节点指针上使用包装类来成功：

```
template <class T>
struct NodeIterator
{
  NodeIterator(Node<T>* current) : current(current) {}
  NodeIterator& operator ++() { current = current->next; return *this; }
  NodeIterator operator ++(int) { 
      NodeIterator retVal = *this; 
      ++(*this);
      return retVal;
  }
  T* operator-> () const { return &current->data; }   
  T& operator * () const { return current->data; }   
  Node<T>* current;
}; 
```

请参阅`std::slist<>` [实现](http://www.cs.brown.edu/~jwicks/libstdc++/html_user/stl__list_8h-source.html)以获取参考。看`template<typename _Tp> struct _List_iterator`。阅读 STL 实现胜过许多书籍。

用法：

```
NodeIterator<T> it =  &node;
++it;
T& t = *it; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T17:45:54.337

```
Node<T>& operator++(int) {…} 
```

是您要实现的成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T18:21:43.673

为了使您的代码正常工作，您需要能够`operator++`为您的指针类进行定义。但是，这是不允许的。不过，欢迎您定义其他一些命名函数。例如：

```
template <typename Node>
Node goto_next(Node& node) {
  Node result = node;
  node = node->next;
  return result;
} 
```

然后你可以像这样使用它：

```
Node<int>* tmp = goto_next(someNode); 
```

另一种选择是提供一个真正的迭代器类，而不是仅仅使用一个指针：

```
Node<int>::iterator someNode = someList.begin();
Node<int>::iterator tmp = someNode++; 
```

使您的迭代器保留一个`Node<T>*`成员，并使`++`操作员在返回迭代器对象的副本之前更新该内部指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T18:22:13.007

你真的不想那样做。在指针上使用的想法`++`与常见的迭代器模式非常接近。您应该全力以赴并创建一个真正的迭代器类。想想`std::list<T>::iterator`。

迭代器是非常轻量级的包装器，它为节点指针提供了一个合理的接口，它提供了诸如`operator ++`移动到下一个节点之类的东西，并重载`operator ->`以提供对节点数据的简单访问。将客户端代码从使用指针转换为使用迭代器非常简单，因为语法几乎相同。

# objective-c - 在 iOS 中显示带有斜体字母和上标指数的公式

> ID：12464518
> 
> 赞同：2
> 
> 时间：2012-09-17T17:43:30.020
> 
> 标签：objective-c, ios, xcode

我正在为 iPhone 创建一个计算器（用于练习），我想使用不带 ^ 的符号 x^2，以便 2 直接出现在 x 上方。有没有办法做到这一点？

最好有一个有点“时尚”的 x 符号，就像乳胶中使用的那些（例如[this](http://www.sosmath.com/soe/SE211106/img6.gif)）

我正在使用 iOS 5、XCode 4.2

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T17:50:15.257

我猜你的意思是你想在标签或按钮中显示 x²。

最简单的方法是使用 Unicode 字符 U+00B2，SUPERSCRIPT TWO，这就是我所做的。

`\u`在 Objective-C 中，您可以使用转义符将任何 16 位 Unicode 字符放入字符串中：

```
[self.squareButton setTitle:@"x\u00b2" forState:UIControlStateNormal]; 
```

如果要在 Interface Builder 中设置，可以使用[Character Viewer](http://www.macosxtips.co.uk/index_files/the-input-menu-and-character-viewer.php)插入。

Unicode 也有字符 U+1D465 MATHEMATICAL ITALIC SMALL X。您可以`\U0001D465`在字符串中使用来表示该字符。不幸的是，iOS 似乎不支持显示该字符（在我对 iOS 5.0 模拟器的测试中）。

因此，如果您想`x`使用斜体字体但`2`使用常规字体，则需要为`x`和使用单独的标签`2`，或者使用 Core Text 呈现包含具有适当属性的两个字符的属性字符串。从 iOS 5.1 开始，没有 UIKit 类支持绘制属性字符串。

# python - 从 AppEngine 中的 blob 接收静态 URL

> ID：12464520
> 
> 赞同：1
> 
> 时间：2012-09-17T17:43:37.257
> 
> 标签：python, google-app-engine, blobstore

在我的应用程序中，我正在创建一个在 App Engine 仪表板中正确上传的 blob。但是，这个创建的文件需要通过电子邮件发送给相应的人。为此，我需要文件本身作为附件或此人可以下载的静态 URL。我无法弄清楚如何从 blobkey 获取静态 URL。

这是创建文件的代码，但没什么特别的：

```
 file_name = files.blobstore.create(mime_type='text/csv')
with files.open(file_name, 'a') as f:
  f.write(dataset)
files.finalize(file_name)
blob_key = files.blobstore.get_blob_key(file_name)
blob_info = blobstore.BlobInfo.get(blob_key)

new_url = blob_key.urlsafe() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T17:55:30.460

如果要提供文件，请查看[Blobstore 概述 - 提供 Blob](https://developers.google.com/appengine/docs/python/blobstore/overview#Serving_a_Blob)。

如果您想将其作为附件发送，请参阅[附件文档](https://developers.google.com/appengine/docs/python/mail/attachments)。您将需要[获取 blob 的内容，](https://developers.google.com/appengine/docs/python/blobstore/blobreaderclass)然后将其附加到邮件中。

```
from google.appengine.ext import blobstore

# blob_key = ...

# Instantiate a BlobReader for a given Blobstore value.
blob_reader = blobstore.BlobReader(blob_key)

# Read the entire value into memory. This may take a while depending
# on the size of the value and the size of the read buffer, and is not
# recommended for large values.
blob_contents = blob_reader.read() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:55:43.690

查看[AppEngine Blobstore 文档](https://developers.google.com/appengine/docs/python/blobstore/overview#Serving_a_Blob)，他们很好地解释了如何检索和使用 Blobstore 条目。这是文档中的示例。

```
from google.appengine.ext import blobstore
from google.appengine.ext.webapp import blobstore_handlers
class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
  def get(self, resource):
    resource = str(urllib.unquote(resource))
    blob_info = blobstore.BlobInfo.get(resource)
    self.send_blob(blob_info) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T04:34:19.463

我的用例不同，但我通过查找 url 路径从 blobstore 提供静态内容。这是模型和get函数。

```
class StaticContent(db.Model):
    body = db.BlobProperty()
    content_type = db.StringProperty()
    last_modified = db.DateTimeProperty(required=True, auto_now=True)
    etag = aetycoon.DerivedProperty(lambda x: hashlib.sha1(x.body).hexdigest())

def get(path):  
    return StaticContent.get_by_key_name(path) 
```

[您可以在我的 git hub 存储库中的 master 分支的 step1 标记](https://github.com/jwogrady/sprucepress/blob/step1/static.py)上看到我的 wepapp2 处理程序

有关详细说明，您还可以查看[Nick Johnson 关于通过 blogstore 提供静态内容的博客文章](http://blog.notdot.net/2009/10/Blogging-on-App-Engine-part-1-Static-serving)。

# artificial-intelligence - 解读我的神经网络输出

> ID：12464521
> 
> 赞同：0
> 
> 时间：2012-09-17T17:43:47.213
> 
> 标签：artificial-intelligence, neural-network

我正在使用具有激活功能的 NN：

F = 1 / ( 1 + e^(-4.9*S) )
S 是输入的总和

网络有 1 个输出节点，被解释为电机
的状态 电机有 3 种状态： 1 顺时针运动 2 逆时针运动 3 锁定

问题是我应该如何解释输出？例如这样说是否正确：

*   if ( output > 0.8 ) then 顺时针运动
*   if ( 0.2 > output < 0.8 ) 然后锁定
*   if ( output < 0.2 ) then 逆时针运动

我的意思是解释输出是否正确，因为它有 3 个状态？单个节点是否有权拥有 3 个状态？或者我必须为 3 个州提供 3 个不同的节点？

**另一种方式来问这个问题：** 0.2 和 0.8 之间的值是否意味着什么，或者只是未定？

**另一个相关问题：**单个输出节点可以表示电机的度数吗？例如 0->0 度 0.5->180 度 1->360 度 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:49:15.197

这完全取决于你的神经网络。对于你描述的那个，我会说它*可以*代表中间状态，或者它可以代表“混淆神经网络”。

因此，我建议使用三个输出。如果无论出于何种原因，它们都没有起火，或者不止一个起火，你就知道有什么东西坏了。

是的，你可以让神经网络输出一个连续变量，但它需要稍微仔细调整，并且可能至少在最后一层有一个线性激活函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:59:31.163

我同意（与 zabediah49 一起），三个输出听起来更明智，每个州一个。如果状态是互斥的，而且听起来像，我什至会考虑使用 softmax 输出而不是 sigmoid。

-Ø

# java - 获取 java.lang.IllegalStateException：此调用必须发生在 AWT 事件调度线程中！请参阅

> ID：12464524
> 
> 赞同：2
> 
> 时间：2012-09-17T17:44:01.237
> 
> 标签：java, multithreading, swing

我正在尝试使用 Swing 实现 Web 浏览器。这是下面的代码。

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.Insets;

import javax.swing.JPanel;
import javax.swing.JScrollPane;

import chrriis.dj.nativeswing.swtimpl.NativeInterface;
import chrriis.dj.nativeswing.swtimpl.components.JWebBrowser;

public class WebPageDisplay extends JPanel{

    public WebPageDisplay() {

         super(new BorderLayout());  
         try{
         NativeInterface.open();

        JPanel webBrowserPanel = new JPanel(new BorderLayout());   
        final JWebBrowser webBrowser = new JWebBrowser();
        webBrowser.setBarsVisible(false);   
        webBrowser.setStatusBarVisible(true);   
        webBrowserPanel.add(webBrowser, BorderLayout.CENTER);   
        add(webBrowserPanel, BorderLayout.CENTER);
            webBrowser.navigate("www.google.com);
        JScrollPane scrollPane = new JScrollPane();
            Dimension preferredSize = scrollPane.getPreferredSize();
        preferredSize.height += 20;
        scrollPane.setPreferredSize(preferredSize);
        add(scrollPane,new GridBagConstraints(0, 2, 2, 1, 1.0, 1.0, GridBagConstraints.CENTER,
            GridBagConstraints.BOTH, new Insets(0, 0, 0, 0), 0, 0));
           }catch(Exception e){
        e.printStackTrace();
        }
      }

    public static void main(String[] args){
        WebPageDisplay display = new WebPageDisplay();

    }
} 
```

我越来越低于异常。

```
 On Mac, "NativeInterface.initialize()"/"NativeInterface.open()" should not be called after AWT static initializers have run, otherwise there can be all sorts of side effects (non-functional modal dialogs, etc.). Generally, the problem is when the "main(String[])" method is located inside an AWT component subclass and the fix is to move that main method to a standalone class. The problematic class here is "WebPageDisplay"
    ***WARNING: Display must be created on main thread due to Cocoa restrictions.
    2012-09-17 22:48:04.943 java[248:407] _createMenuRef called with existing principal MenuRef already associated with menu
    2012-09-17 22:48:05.134 java[248:407] (
        0   CoreFoundation                      0x00007fff96568286 __exceptionPreprocess + 198
        1   libobjc.A.dylib                     0x00007fff9244dd5e objc_exception_throw + 43
        2   CoreFoundation                      0x00007fff965680ba +[NSException raise:format:arguments:] + 106
        3   CoreFoundation                      0x00007fff96568044 +[NSException raise:format:] + 116
        4   AppKit                              0x00007fff8fea7597 -[NSCarbonMenuImpl _createMenuRef] + 64
        5   AppKit                              0x00007fff8fea6e82 -[NSCarbonMenuImpl _instantiateCarbonMenu] + 148
        6   AppKit                              0x00007fff8fe7bb43 -[NSApplication finishLaunching] + 878
        7   libawt.jnilib                       0x0000000106a6a157 -[NSApplicationAWT finishLaunching] + 641
        8   libswt-pi-cocoa-3730.jnilib         0x00000001080f9eb2 Java_org_eclipse_swt_internal_cocoa_OS_objc_1msgSendSuper__Lorg_eclipse_swt_internal_cocoa_objc_1super_2J + 89
        9   ???                                 0x0000000102abdd6e 0x0 + 4339785070
    )
    java.lang.IllegalStateException: This call must happen in the AWT Event Dispatch Thread! Please refer to http://java.sun.com/docs/books/tutorial/uiswing/concurrency/index.html and http://java.sun.com/javase/6/docs/api/javax/swing/SwingUtilities.html#invokeLater(java.lang.Runnable)
        at chrriis.dj.nativeswing.swtimpl.core.MessagingInterface.checkUIThread(MessagingInterface.java:161)
        at chrriis.dj.nativeswing.swtimpl.core.SWTNativeInterface.checkUIThread(SWTNativeInterface.java:475)
        at chrriis.dj.nativeswing.swtimpl.core.SWTNativeComponent.runSync(SWTNativeComponent.java:184)
        at chrriis.dj.nativeswing.swtimpl.components.core.NativeWebBrowser.navigate(NativeWebBrowser.java:728)
        at chrriis.dj.nativeswing.swtimpl.components.JWebBrowser.navigate(JWebBrowser.java:315)
        at chrriis.dj.nativeswing.swtimpl.components.JWebBrowser.navigate(JWebBrowser.java:305)
        at WebPageDisplay.<init>(WebPageDisplay.java:31)
        at WebPageDisplay.main(WebPageDisplay.java:54) 
```

我在我的类路径中使用下面的罐子。

```
DJNativeSwing-SWT.jar
DJNativeSwing.jar
swt-3.7M7-cocoa-macosx-x86_64.jar 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T17:52:54.987

您的错误消息告诉您出了什么问题：

> 在 Mac 上，不应在 AWT 静态初始化程序运行后调用“NativeInterface.initialize()”/“NativeInterface.open()”，否则可能会出现各种副作用（非功能性模式对话框等）。通常，问题是当“main(String[])”方法位于 AWT 组件子类中时，解决方法是将该 main 方法移动到独立类中。这里有问题的类是“WebPageDisplay”

您需要在 EDT 事件调度线程上启动您的 GUI。*但是话虽如此，在您的 GUI 在 EDT 上排队之前，需要在主*线程而不是 EDT上启动 NativeInterface 。[根据NativeInterface API](http://djproject.sourceforge.net/ns/documentation/javadoc/chrriis/dj/nativeswing/swtimpl/NativeInterface.html)的`open()`方法部分：

> 如果接口尚未初始化，则进行初始化。如果没有显式执行初始化，则应在程序的早期调用此方法，最好的位置是在 main 方法中的第一次调用。

因此，您的代码可能如下所示：

```
public static void main(String[] args){

    // start your NativeInterface here!
    NativeInterface.open(); // not sure what else may be needed for this

    SwingUtilities.invokeLater(new Runnable() {
      public void run() {
        WebPageDisplay display = new WebPageDisplay();
      }
    });
} 
```

请注意，我没有也没有使用过 NativeInterface 库，因此无法测试此代码。

请注意，我看不到您将 GUI 组件添加到 JFrame 等顶级窗口的位置，因此我不确定您如何显示 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T07:17:05.523

除了“Hover Full Of Eels”所说的之外，这是我在 Mac 上为我工作的解决方案：

1 - 不要使用该`main()`方法，而是在主类的最开始创建一个静态时钟并将该`open()`方法放置在那里。

2 - 在您的主要方法结束时`runEventPump()`，我认为大多数系统都需要该方法。

```
public class Something {
  static {
    NativeInterface.open();
    UIUtils.setPreferredLookAndFeel();
  }

  // ... (etc)

  public static void main(String[] args) {
    // ... (etc)
    NativeInterface.runEventPump();
  }
} 
```

# objective-c - NSData appendBytes 等效

> ID：12464526
> 
> 赞同：0
> 
> 时间：2012-09-17T17:44:18.790
> 
> 标签：objective-c, nsdata

我还没有找到任何等效于 appendBytes 的方法。如果我正确理解了 getBytes，那么该方法总是从缓冲区的*开头返回字节。*它不会增加。

这是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:39:03.870

我不确定你的意思，等价？`appendBytes`在 getBytes 获取时添加，它们是完全相反的。当缓冲区中有不同的数据时，这是我用来获取字节的好方法。它显示了一个很好的使用`getBytes:range:`

```
UInt16 anUInt16;
float aFloat;

int position = 0;

[data getBytes:&anUInt16 range:NSMakeRange(position, sizeof(UInt16))];
position += sizeof(UInt16);

[data getBytes:&aFloat range:NSMakeRange(position, sizeof(float))];
position += sizeof(float); 
```

等等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T18:38:53.753

有几种方法可以让您访问 NSData 对象中的某些数据。例如，您可以使用`-getBytes:range:`将 NSRange 指定的数据复制到缓冲区中。或者，您可以使用`-subdataWithRange:`获取仅包含另一个部分的 NSData。

如果您想按顺序读取 NSData 对象的内容，您可以创建一个 NSInputStream 并使用您的 NSData 对其进行初始化，然后使用`-getBuffer:length:`or从流中读取`-read:maxLength:`。

```
NSInputStream *stream = [[NSInputStream alloc] initWithData:myData];
[stream open];
while ([stream read:&buffer maxLength:bufferLength] > 0) {
    // do something with buffer
} 
```

`while`注意：如果你没有对你读取的每个数据块做同样的事情，你显然不需要上面代码中的循环——我只是包含它，因为它是读取数据的常用方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T18:38:35.607

您可能正在寻找`-[NSData getBytes:range:]`，它可以让您指定要从缓冲区读取的数据范围。另一个选项是`-[NSData subdataWithRange:]`，它实际上返回另一个`NSData`仅包含指定范围内的字节的实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T18:58:32.363

你的问题不清楚。

如果您需要从特定偏移量获取字节，只需使用该`getBytes:range:`方法。

```
- ( void )getBytes: ( void * )buffer range: ( NSRange )range; 
```

例如：

```
char buf[ 4 ];

// Get 4 bytes from offset 2
[ dataObject getBytes: buf range: NSMakeRange( 2, 4 ) ]; 
```

如果您正在寻找`appendBytes`，请使用**[NSMutableData](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableData_Class/Reference/NSMutableData.html)**，它继承自 NSData 并添加可变性选项，就像`NSArray`and一样`NSMutableArray`。

```
- ( void )appendBytes: ( const void * )bytes length: ( NSUInteger )length; 
```

您可以使用该方法`NSMutableData`从 a中获取 a 。请注意，您拥有生成的对象。`NSData``mutableCopy`

```
NSMutableData * mData;

mData = [ dataObject mutableCopy ];

[ mData appendBytes: ( const void * )"abcd" length: 4 ];
[ mData release ] 
```

# sql - db2 日期格式 concat 具体时间

> ID：12464527
> 
> 赞同：1
> 
> 时间：2012-09-17T17:44:22.203
> 
> 标签：sql, date, db2, sql-date-functions

我正在尝试查询昨天早上 6 点到今天早上 6 点之间发生的数据。

我在串联时遇到问题。

这是我尝试过的。

```
Where update_time between date(CURRENT DATE,'mm/dd/yyyy 06:00:00')- 1 DAYS 
                      and date(CURRENT DATE,'mm/dd/yyyy 06:00:00') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:38:38.783

试试这个：

```
WHERE UPDATE_TIME 
BETWEEN TIMESTAMP(CHAR(CURRENT DATE,ISO) || ' 06:00:00') - 1 DAY
AND TIMESTAMP(CHAR(CURRENT DATE,ISO) || ' 06:00:00') 
```

更新以回答 X-Zero 的评论：

DB2 函数`CHAR(CURRENT DATE,ISO)`获取当前日期，并将其转换为格式中的字符串`ISO`。取今天的日期，CHAR 函数将返回“2012-09-18”。

接下来，我们将 (||) 时间字符串连接到日期字符串。时间字符串中的空格以正确的格式创建字符 DB2 时间戳。“2012-09-18 06:00:00”。

最后，DB2 函数`TIMESTAMP`获取字符 DB2 时间戳并将其转换为实际的 DB2 时间戳。

# qt - 如何验证 SVG 文档是否正确？（1.2版）

> ID：12464533
> 
> 赞同：35
> 
> 时间：2012-09-17T17:44:53.490
> 
> 标签：qt, svg

我使用了一个名为[Fritzing](http://fritzing.org/)的程序来绘制一些基本的 Arduino 原理图，然后将输出导出为 SVG。这按预期工作，但后来我注意到 SVG 输出仅在某些浏览器中看起来不错，而在某些版本的 Firefox 中也不错。

由于 Fritzing 是一个开源应用程序，我认为我可以查看代码（也许会有所帮助）。

**但现在回到问题上来，正确的 SVG 应该是什么样子？我可以使用 W3C 的哪个验证器来检查文件？**

我尝试使用此页面上的验证器：http: [//validator.w3.org/dev/tests/](http://validator.w3.org/dev/tests/)

但他们都抱怨了很多，尤其是关于 SVG 版本。验证者似乎喜欢 1.0 版和 1.1 版，但是当我查看此文件的顶部时，似乎使用的是[1.2 版](http://www.w3.org/TR/SVG12/)？

这是有问题的文件的前三行（为了便于阅读而重新格式化）：

```
<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<!-- Created with Fritzing (http://www.fritzing.org/) -->
<svg width="3.50927in"
     x="0in"
     version="1.2"
     y="0in"
     xmlns="http://www.w3.org/2000/svg"
     height="2.81713in"
     viewBox="0 0 252.667 202.833"
     baseProfile="tiny"
     xmlns:svg="http://www.w3.org/2000/svg"> 
```

我可以使用特定的 SVG 1.2 验证程序吗？

或者我应该尝试验证 SVG，就好像它是一个经典的 XML 文件一样？

（附带说明，Fritzing 似乎使用 Qt，所以如果有一些 QTest 我可以使用它可能会很有用。）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-24T08:24:14.557

您可以使用例如[http://validator.nu](http://validator.nu)。由于您的文件是独立的，请选择 xml 解析，将 RNG url 粘贴到架构文本字段中（您正在查找的架构 url 可以在相关[规范](http://www.w3.org/TR/SVGTiny12/schema.html)中找到，在本例中为 SVG 1.2 Tiny：[http ://www.w3.org /TR/SVGTiny12/relaxng/Tiny-1.2.rng](http://www.w3.org/TR/SVGTiny12/relaxng/Tiny-1.2.rng)）。

即使您的三行代码段也不是有效的 SVG 1.2 Tiny 内容（Tiny 中的 <svg> 元素上不允许有 x 和 y 属性）。您应该在某处添加指向文件的链接，否则很难说它应该是什么样子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-09-04T08:00:45.977

[终端svgcheck](https://pypi.org/project/svgcheck/)中有一个 python 实用程序，它声称针对版本 1.2，如 draft-7996-bis 中所定义。一个有前途的实用程序，恕我直言。

SVG 检查程序。

```
pip install svgcheck 
```

```
svgcheck ~/path/to/mysvgfile.svg 
```

具有适当标准的 svg 文件将给出如下内容：

```
$ svgcheck alert-circle.svg
Parsing file alert-circle.svg
INFO: File conforms to SVG requirements. 
```

*   *确保您已`pip`正确安装和配置 python*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-27T12:07:07.143

对于[SVG Tiny 1.2 Portable/Secure](https://en.wikipedia.org/wiki/Scalable_Vector_Graphics#Version_1.x) (SVG P/S) 子集，例如[用于消息识别](https://en.wikipedia.org/wiki/Brand_Indicators_for_Message_Identification)(BIMI) 的品牌指标，请参阅[使用 RNC 模式验证 BIMI SVG 图像](https://bimigroup.org/using-the-rnc-schema-to-validate-bimi-svg-images/)。它展示了如何在命令行上执行[Relax NG Compact](https://en.wikipedia.org/wiki/RELAX_NG#Compact_syntax) (RNC) XML 模式验证。

```
pip3 install jingtrang
wget 'https://bimigroup.org/resources/SVG_PS-latest.rnc.txt'
pyjing -c SVG_PS-latest.rnc.txt my-image.svg 
```

对于我的用例，使用 转换为 SVG Tiny 1.2 的 PNG 标识[`png2svg`](https://github.com/xyproto/png2svg)，这是输出。

```
my-image.svg:1:159: error: value of attribute "baseProfile" is invalid; must be equal to "tiny-ps"
my-image.svg:1:174: error: element "g" not allowed yet; missing required element "title" 
```

通过编辑`baseProfile`值并添加`<title>A very nice image title</title>`.

# android - 通过 RemoteView 设置 GradientDrawable

> ID：12464535
> 
> 赞同：3
> 
> 时间：2012-09-17T17:44:55.440
> 
> 标签：android, drawable

这是我想做的：我有一个小部件，我想根据用户选择的颜色设置它的背景。它必须是一个渐变。背景是通过设置linearLayout的背景来设置的。为了测试，我做了一个虚拟背景：

```
remoteViews.setInt(R.id.layout, "setBackgroundResource", R.drawable.widget_background); 
```

我已经看到了这个问题：[从 RemoteViews 调用 setImageDrawable](https://stackoverflow.com/questions/8113133/call-setimagedrawable-from-remoteviews)但我无法理解如何实现。我什至找不到`setXYZ()`那里提到的。这是我到目前为止所尝试的：

1.  动态绘制渐变。在这种方法中，我无法设置背景，因为 AFAIK 所有方法都采用可绘制对象的 id 并且我有一个可绘制对象。
2.  尝试将 ImageView 作为背景（在 LinearLayout 之前）。它没有为小部件提供适当的边距。由于小部件文本是动态的，有时它会超出我想要的 imageView

3.  制作我拥有的 bg.xml：

    ```
    <shape xmlns:android="http://schemas.android.com/apk/res/android" >
           <padding
                android:bottom="1dp"
                android:left="1dp"
                android:right="1dp"
                android:top="1dp" />
           <corners
                android:bottomLeftRadius="7dp"
                android:bottomRightRadius="7dp"
                android:topLeftRadius="7dp"
                android:topRightRadius="7dp" />
    </shape> 
    ```

现在我完全困惑和卡住了。有人可以尽快提供帮助（**可能更多的代码和更少的链接）吗？**另外，请**不要像已经问过的那样关闭这个问题**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T08:24:48.783

> 尝试将 ImageView 作为背景（在 LinearLayout 之前）。它没有为小部件提供适当的边距。由于小部件文本是动态的，有时它会超出我想要的 imageView

我不完全确定您的意思，但是如果您使用 FrameLayout / RelativeLayout 作为根布局，然后将 ImageView 与填充父级一起放入，您的图像应该与小部件的大小完全相同。

```
<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="6dp" >

    <ImageView
        android:id="@+id/widgetBg"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitXY" />

    // Other views

</FrameLayout> 
```

此外，这就是我正在做的动态更改圆角渐变背景的颜色和 alpha 的方法。然后使用 setImageViewBitmap( ) 应用到 imageview。可能有更好的方法。

```
public static Bitmap getBackground(int bgColor, int width, int height, Context context) {
    try {
        // convert to HSV to lighten and darken
        int alpha = Color.alpha(bgColor);
        float[] hsv = new float[3];
        Color.colorToHSV(bgColor, hsv);
        hsv[2] -= .1;
        int darker = Color.HSVToColor(alpha, hsv);
        hsv[2] += .3;
        int lighter = Color.HSVToColor(alpha, hsv);

        // create gradient useng lighter and darker colors
        GradientDrawable gd = new GradientDrawable(
                GradientDrawable.Orientation.LEFT_RIGHT,new int[] { darker, lighter});
        gd.setGradientType(GradientDrawable.RECTANGLE);
        // set corner size
        gd.setCornerRadii(new float[] {4,4,4,4,4,4,4,4});

        // get density to scale bitmap for device
        float dp = context.getResources().getDisplayMetrics().density;

        // create bitmap based on width and height of widget
        Bitmap bitmap = Bitmap.createBitmap(Math.round(width * dp), Math.round(height * dp),
                Bitmap.Config.ARGB_8888);
        Canvas canvas =  new Canvas(bitmap);
        gd.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());
        gd.draw(canvas);
        return bitmap;
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
} 
```

# php - 如何将 GoogleMap API v2 代码转换为 v3？

> ID：12464536
> 
> 赞同：0
> 
> 时间：2012-09-17T17:44:55.097
> 
> 标签：php, google-maps

> **可能重复：**
> [将 Google map v2 转换为 google map v3](https://stackoverflow.com/questions/12462453/convert-google-map-v2-in-to-google-map-v3)

我的网站目前正在运行 Google 地图 API v2。我想转换为新的 Google 地图 API v3。下面的代码需要做哪些修改？最近我收到一条消息，说 v2 已禁用。所以我需要用当前的功能修改现有的脚本。

```
var maprecent;
function init_maprecent() {
function createMarker(point, myHtml) { var marker = new GMarker(point); GEvent.addListener(marker, "click", function() { maprecent.openInfoWindowHtml(point, myHtml, {maxWidth:200}); }); return marker; }
var markerindex = 0; var markers = new Array();
function animate_marker() {if (markerindex==markers.length) {markerindex=0;} GEvent.trigger(markers[markerindex], "click"); markerindex++; setTimeout(animate_marker, 5000);}
var bottomLeft = new GControlPosition(G_ANCHOR_BOTTOM_LEFT);
maprecent = new google.maps.Map(document.getElementById("smallmaprecent"));
maprecent.addControl(new GSmallZoomControl());
maprecent.addControl(new GMapTypeControl(), bottomLeft);
maprecent.setCenter(new GLatLng(34.051072,-118.259961), 5);

var m0 = createMarker(new GLatLng(34.016919,-118.5010608), '<b>test</b><br>demo<br><a href=http://www.abcd.com/project_47_test.html>View project</a><br>London   ');
maprecent.addOverlay(m0);
markers.push(m0);
maprecent.addOverlay(new GPolygon([new GLatLng(34.016919,-118.5010608), new GLatLng(34.016919,-118.5010608), new GLatLng(34.016919,-118.5010608), new GLatLng(34.016919,-118.5010608), new GLatLng(34.016919,-118.5010608)], "#000000", 1, 0.5, "#444488", 0.1));
animate_marker();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:06:35.507

V2 未被禁用。它已被弃用，这意味着它最早可以在 2013 年 5 月关闭。基本上，您的代码需要重新编写。V2 和 V3 之间没有 1-1 映射，只是代码非常不同。在此处查看文档： [https ://developers.google.com/maps/documentation/javascript/](https://developers.google.com/maps/documentation/javascript/)

# java - 什么是 deep_ping

> ID：12464540
> 
> 赞同：4
> 
> 时间：2012-09-17T17:45:09.750
> 
> 标签：java, web-applications, servlets, ping

我不确定这是否是问这个问题的正确论坛，但我也不确定在哪里问。所以这是我的问题：

“深度ping”是什么意思。我尝试了谷歌，但仍然没有得到任何有关它的信息。还有谁在 web servlet 的上下文中表示深度 ping。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T17:54:36.660

如果有这样的事情，我不确定它是“官方定义”，但我已经使用“深度 ping”来描述允许您（与常规 ping 相比）向通过的服务器发送消息的***功能***在返回“ok”响应之前***通过尽可能多的 webstack 。***

例如，您可以创建一个`ping`从网络直接通过堆栈向下传递到数据库的事务，并执行一个虚拟选择以`ok`从虚拟表中读取并返回该结果。这允许您（与仅测试网络的“正常 ping”相反）确信应用程序中的*所有层*（包括数据库）实际上都处于活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:58:33.873

**-** `Ping`是最基本和最有用的网络命令之一。它向联网计算机发送请求并等待响应。ping 单台 PC 很容易，但要 ping 数十台（甚至数百台）PC 会很痛苦。

**-**`Pinging`可以拥有 N 台 PC的过程`entire Subnet`称为`Deep Ping`. 通常使用网络扫描仪来执行此操作....

# objective-c - 试图将 UIImageView 设置为背景 - 布局菜单项在哪里

> ID：12464541
> 
> 赞同：0
> 
> 时间：2012-09-17T17:45:14.167
> 
> 标签：objective-c, ios, layout, uiimageview, interface-builder

我想将图像设置为设置页面/视图的背景图像。我已经创建了我的设置页面并且我有图像。我应用了 UIImage 视图，但似乎无法将其设置为界面生成器中的背景图像。

像这样的论坛帖子：

[http://forums.macrumors.com/showthread.php?t=715391](http://forums.macrumors.com/showthread.php?t=715391)

似乎暗示我可以在 IB 中选择一个“布局”菜单项，然后从那里选择“发送到后面”。但是我在 Interface Builder 的任何地方都找不到这个。我是疯了还是从最新版本的 Xcode 中删除了它。

如果有，interafce builder中是否有将我的.png图像作为页面的背景图像发送。

谢谢

...戴尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:02:18.820

我希望您使用`UIImageView`背景图像并将其插入到您的视图层次结构中。有两种方法可以做到这一点 -

**1.来自IB** - 忘记“发送到后面”，设置视图层次结构的更简单方法是 -

![在此处输入图像描述](../Images/add83b448dee510db103b4d9a0b84f26.png)

在视图层次结构中，`mapView`位于最顶层，位于最`UIImageView`底层。如果您想更改此层次结构，您需要做的就是拖动视图并向上或向下移动它们。希望这很清楚。

**2.从代码**- 您可以将其插入视图层次结构中的任何位置并将其一直推到后面，`sendSubviewToBack:`或者您可以将 UIImageView 设为父视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T18:12:56.917

尽管需要代码，但可以将图像用作背景的另一种方法是将视图的背景颜色设置为图像。

```
- (void)viewDidLoad {
  [super viewDidLoad];
  UIImage *backgroundImage = [UIImage imageNamed:@"background.png"]
  self.backgroundColor = [UIColor colorWithPatternImage:backgroundImage];
} 
```

我希望有一种方法可以在 Interface Builder 中做到这一点。

# html - 将文本链接转换为 html 超链接

> ID：12464544
> 
> 赞同：0
> 
> 时间：2012-09-17T17:45:24.217
> 
> 标签：html, text

我正在尝试创建一个脚本，其中在搜索中找到的所有文件都将转换为 href 链接并重定向到 html 文件。

假设我正在搜索“单词”，它给出了以下命中：

```
/archive/here/is/the/first/found/file1.txt
/archive/here/is/the/second/found/file2.txt
/archive/here/is/the/third/found/file3.txt 
```

我想重定向这些点击并转换为包含以下内容的文件“hits.html”：

```
<a href="/archive/here/is/the/first/found/file1.txt">file1.txt</a>
<a href="/archive/here/is/the/second/found/file2.txt">file2.txt</a>
<a href="/archive/here/is/the/third/found/file3.txt">file3.txt</a> 
```

可以这样做（以不太复杂的方式）吗？

我试过latex2html，但没能做到。

# iphone - 从iphone中的php url检索响应

> ID：12464547
> 
> 赞同：0
> 
> 时间：2012-09-17T17:45:47.790
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我创建了一个 api。可以说这是我的 php 网址

```
"http://xxxxxxx/game/game.php?validate=yes&email=myEmail@mars.com" 
```

此查询的响应是 1 0r 0。它验证电子邮件是否存在于 db 中。我一直在搜索但直到现在都失败了，我想如何将它发送到服务器。通过 NS URL 或者我必须使用`NSURLConnection`. 我又如何阅读回复。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:49:07.723

```
NSString *response = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://xxxxxxx/game/game.php?validate=yes&email=myEmail@mars.com"]]; 
```

[圣经，旧约。](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

[圣经，新约。](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)

编辑：所以响应是 XML？对。（不，不对，你真的应该考虑使用 JSON，但无论如何......）在这种情况下，你可以使用[NSXMLParserClass](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)来取回响应。尤其是看看它的`- initWithContentsOfURL:`方法。

# android - 三星 Galaxy Nexus 上的 NFC 原始 MifareClassic 身份验证

> ID：12464551
> 
> 赞同：2
> 
> 时间：2012-09-17T17:45:55.493
> 
> 标签：android, nfc

我正在尝试使用 Android 的 NFC API 进行原始身份验证（使用收发方法向 MifareClassic 卡发送命令）。但是我不断收到所有 NfcA 收发器调用的 TagLostException。

这是我的代码：

```
NfcA mfa = NfcA.get(tagFromIntent);          
//MifareClassic mfa = MifareClassic.get(tagFromIntent);
//IsoDep isodep = IsoDep.get(tagFromIntent);

mfa.connect();       
//manual authenticate
byte[] cmd = new byte[] {0x60, 0x04, 0x00, 0x00};               

try { 
    if(mfa.isConnected()) {
         byte[] result = mfa.transceive(cmd);
    }
} catch (TagLostException e) { 
    Log.i("mifaretest", "tag lost again!");
    throw e; 
} catch (IOException e) { 
    Log.i("mifaretest", "IOException!");
    // No need to deal with, will return false anyway 
} 

mfa.close(); 
```

正如 Google 文档指出的那样：应用程序不得将 EoD (CRC) 附加到有效负载，它将自动计算。我将最后两个字节留空。我还尝试了以下命令： `byte[] cmd = new byte[] {0x60, 0x04};` 或 `byte[] cmd = new byte[] {0x60, 0x04, 0xD1, 0x3D};`

它们都抛出 TagLostException。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T19:40:52.187

Android 将 CRC 添加到 transceive 参数的有效负载中，因此当您发送 时`{0x60, 0x04}`，Android 会在发送到卡之前添加相应的 2 个 CRC 字节。然而，这只是故事的一半。Android 还将检查卡的响应。它将检查响应中的 CRC 并将其剥离。如果响应中的 CRC 不正确，则会抛出异常。

现在查看[MIFARE CLassic 数据表](http://www.nxp.com/documents/data_sheet/MF1S50YYX.pdf)的第 11.1 节。可以看到这种情况下卡响应不包含CRC，所以会被Android拒绝并抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:43:07.163

IsoDep 类有其可以读取和更改的超时。

对于要求高的加密操作，您应该明确更改它，因为默认值类似于 300 毫秒。

# tomcat - amazon ec2 service(linux) Tomcat 无法使用端口 80

> ID：12464552
> 
> 赞同：-1
> 
> 时间：2012-09-17T17:45:58.413
> 
> 标签：tomcat, amazon-ec2

实际上，如果我使用端口 8080 或一些大于 1023 的值（我认为这个端口），它就可以工作。但是如果我使用 80 端口它就无法工作，我成功启动了服务，但是没有 80/http 监听。我知道这应该是一些特权问题。但我不知道该怎么做。实际上这不是ec2中的安全组问题，因为我可以设置apache，这是错误的80端口，并且能够通过80端口访问apache网站。有人告诉我只有root才能通过1023下的端口启动服务，所以可能是问题所在。

不重复，好吗？他们和我有不同的问题。我在 ec2 中设置了安全组，这对我来说应该是特权问题，比如如何通过 root 运行服务。那家伙在窗户里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:05:07.780

您应该创建ROOT，并在其中放入一些文件。我认为这是问题，为什么您的网站无法访问。我以前遇到过你的问题，那就是解决方案。

# php - 用php加载外部div

> ID：12464554
> 
> 赞同：0
> 
> 时间：2012-09-17T17:46:01.293
> 
> 标签：php

我试图从 H&M 加载一个页面（用于学习目的），当我注意到一个 div 的内容没有加载时，但是如果我从浏览器保存页面，则 div 被正确保存。谁能解释我为什么会这样？
我正在寻找的 div（最重要的是 ist 的内容）是：
body> *div* main> *div* content> *div* **relatedInformationContainer**
（里面有很多内容：*div* relatedInformation>etc...）
这是我使用的代码：

```
<?php
$url = "http://www.hm.com/gb/product/05427";
libxml_use_internal_errors(true);
$html = file_get_contents($url);  
$dom = new DomDocument();  
$dom->loadHTML($html);  
$xp = new domxpath($dom);

$contentDivs = $xp->query('//div[@id="content"]')->item(0);
$numContentDivs = $xp->evaluate('count(div)', $contentDivs);
// echo $numContentDivs; // output:3 (correct)
$relatedDiv = $xp->query('//div[@id="content"]/div[2]')->item(0)->getAttribute("id");
echo $relatedDiv; // output:relatedInformationContainer (correct)
$relatedDivContent = $xp->query('//div[@id="content"]/div[2]')->item(0);
$numRelatedDivContent = $xp->evaluate('count(div)', $relatedDivContent);
echo $numRelatedDivContent; // output:0 (incorrect!!! it should output 1)
?> 
```

我使用了更简单的方法，结果相同：

```
<?php
$url = "http://www.hm.com/gb/product/05427";
$doc = new DOMDocument();
$load = @$doc->loadHTMLFile($url);
echo $doc->saveHTML();
?> 
```

如果有人可以解释为什么会发生这种情况，以及是否有解决方案，我会很感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:54:08.547

DIV 是从 Javascript 加载的。您需要检索 Javascript 调用是什么，并在 PHP 中复制它。

将 Firefox 与 Firebug 一起使用，我看到该页面发出了对

```
http://www.hm.com/gb/product/05427/05427-A/related 
```

它返回 DIV*及其*所有内容（我猜它替换了 DIV）。你必须抓住它。

此外，一些服务器会检查谁在问什么以及代表谁。因此，如果其 HTTP_REFERER 字段未设置为正确的原始页面、正确的用户代理和会话 cookie 等，则上面的查询可能不起作用（通常；这里似乎不是这种情况 - 即使我可能是错的）。

# php - 解析 Json 文件

> ID：12464556
> 
> 赞同：0
> 
> 时间：2012-09-17T17:46:03.007
> 
> 标签：php, json

用 php 解析这个 json 提要时遇到问题，只返回一个字符串而不是一个对象。需要返回每个项目的标题和 url 字段。

```
function get_data($url) {
    $ch = curl_init();
    $timeout = 5;
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}

$feed = json_decode(get_data('http://xxxx/?json=1&post_type=logos&count=5', TRUE));
var_dump($feed);
?>
<div class="content-box-right">
    <h1>LOGO &amp; GRAPHIC STANDARDS</h1>

    <div class="content-sep"></div>
    <?php foreach ($feed as $item) {  
           var_dump($item);?>
         } 
     ?>

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:50:44.643

根据我在该 URL 看到的 JSON 的结构，如果您正在寻找该`posts`项目，那么您需要像这样访问：

```
<?php foreach ($feed->posts as $item) { ?> 
```

# ruby - 是否可以从代码中使用“捆绑执行”功能？

> ID：12464558
> 
> 赞同：2
> 
> 时间：2012-09-17T17:46:17.160
> 
> 标签：ruby, rspec, bundler

我正在为一些工具构建一个 Web 界面，并且我希望能够在 Bundler 上下文中运行命令或 gem，就像“bundle exec”命令一样，除了在我的代码中。

所以通常，我会在命令行上写：

```
bundle exec rspec 
```

有没有办法我可以实现同样的事情，但以编程方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:15:18.383

如果你想用捆绑的 gem 运行一些 ruby​​，你可以只需要“bundler/setup”：

```
require 'bundler/setup'
require 'rspec' # loads the version specified in Gemfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:05:13.177

您可以在 Ruby 中将 shell 命令包装在反引号 (`) 中。

```
def run_specs
    `bundle exec rspec | grep foo`
end 
```

# objective-c - 弹出到 UIViewController 导致崩溃 - 消息发送到解除分配的实例

> ID：12464560
> 
> 赞同：0
> 
> 时间：2012-09-17T17:46:22.203
> 
> 标签：objective-c, ipad

我有一个`UIViewController`我正在显示为模态弹出框。使用完该视图后，我将弹出到我的特定位置`UINavigationBar`：

```
[[appDelegate.homeViewController navigationController] popToViewController:[[appDelegate.homeViewController navigationController ].viewControllers objectAtIndex:2] animated:YES]; 
```

`UIViewController`下面的崩溃中提到了呈现模式的视图控制器：

```
*** -[ClientDetailsViewController respondsToSelector:]: message sent to deallocated instance 0x8c17650 
```

我怎样才能找到它，看看是什么导致了我的崩溃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:55:37.533

> 我怎样才能找到它，看看是什么导致了我的崩溃？

只需激活**僵尸**。

*   在 Xcode4 中，按住该`alt`键的同时从菜单中选择“ **Product** ”>“ **Run** ”以显示 Schemes 对话框（或选择 Edit Schemes 以显示它）。
*   然后在“**诊断**”选项卡中，选中“**启用僵尸对象**”复选框

![诊断对话框](../Images/e66575ea8cd07a95cb52daca6a9e6445.png) 现在，当一个对象在被释放后被使用时，您将能够看到所关注的对象以及它何时被过度释放。

* * *

此外，不要犹豫使用“**产品**”->“**分析”菜单中****的静态分析器**，这样 Xcode 会告诉您他可以在您的代码中找到的每个内存管理错误（和其他错误）。

 ****![静态分析器示例](../Images/0a88c4a67f823897e061b85f5963b1fb.png)

您应该经常运行这个“分析”工具并修复它显示的所有警告，因为它是一个非常好的工具，可以告诉您代码中可能出现的问题并且是非常好的建议。

当你运行这个工具时没有任何警告并不能保证你的代码不会崩溃，但是当你运行这个工具时有警告可以保证你的代码中有一些需要修复的东西。****

# python - 带有 PIP 的 UnicodeDecodeError？

> ID：12464561
> 
> 赞同：7
> 
> 时间：2012-09-17T17:46:33.963
> 
> 标签：python, pip, pypi

我正在尝试分发我的开源项目[Melopy](http://github.com/prezjordan/Melopy)，但自从我开始以来，包管理一直给我带来问题。今天，我注册了 PyPI，但运行`python setup.py sdist upload`时遇到以下错误。

```
running sdist
running check
reading manifest template 'MANIFEST.in'
not writing to manually maintained manifest file 'MANIFEST'
making hard links in Melopy-0.1.0...
Creating tar archive
Traceback (most recent call last):
  File "setup.py", line 19, in <module>
    setup(**config)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/command/sdist.py", line 168, in run
    self.make_distribution()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/command/sdist.py", line 448, in make_distribution
    owner=self.owner, group=self.group)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/cmd.py", line 392, in make_archive
    owner=owner, group=group)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/archive_util.py", line 237, in make_archive
    filename = func(base_name, base_dir, **kwargs)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/archive_util.py", line 101, in make_tarball
    tar = tarfile.open(archive_name, 'w|%s' % tar_compression[compress])
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/tarfile.py", line 1687, in open
    _Stream(name, filemode, comptype, fileobj, bufsize),
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/tarfile.py", line 431, in __init__
    self._init_write_gz()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/tarfile.py", line 459, in _init_write_gz
    self.__write(self.name + NUL)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/tarfile.py", line 475, in __write
    self.buf += s
UnicodeDecodeError: 'ascii' codec can't decode byte 0x8b in position 1: ordinal not in range(128) 
```

setup.py 的内容如下。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

from distutils.core import setup

config = {
    'name': u'Melopy',
    'author': u'Jordan Scales',
    'author_email': u'scalesjordan@gmail.com',
    'description': u'Python music library',
    'long_description': open(u'README.txt').read(),
    'packages': ['melopy'],
    'version': u'0.1.0',
    'url': u'https://github.com/prezjordan/Melopy',
    'license': 'LICENSE.txt',
    'classifiers': []
}

setup(**config)

# Licensed under The MIT License (MIT)
# See LICENSE file for more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T18:53:51.817

看来你被[这个错误](http://bugs.python.org/issue11638)击中了。从理论上讲，应该通过将版本作为常规字符串传递来解决问题。

# c# - 以编程方式为 Windows 搜索服务创建目录

> ID：12464568
> 
> 赞同：3
> 
> 时间：2012-09-17T17:47:16.273
> 
> 标签：c#, windows-search, indexing-service

一天多来，我一直在阅读 Windows Search Service 文档和示例，虽然我学到了很多东西，但我仍然觉得离我正在寻找的答案还差得远。

上下文是我有一个使用索引服务进行全文搜索的网络应用程序。因为这不再受支持并且存在大量错误，所以我想从索引服务迁移到 Windows 搜索服务。

在索引服务解决方案中，我为要索引的文档创建了一个目录（而不是使用默认的系统索引）。具体来说，我使用 CIODMLib.AdminIndexServer 对象根据需要以编程方式创建目录。

在我需要迁移到 WSS 之前，这一切都很花哨。最多我只能在 WSS 文档中找到偶尔提到的目录，而没有关于用 C# 来创建它们的 API。那么，第一个问题：**有没有办法以编程方式创建 WSS 目录？**

作为后续问题，**是否甚至需要创建多个目录？我可以在 SystemIndex 上安全地使用 SCOPE()（如 SQL 语法）来高效地进行全文查询吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-29T14:56:08.653

我对全文查询有同样的问题。但是，我可以回答说，SCOPE 可以用来限制查询，消除对多个目录的需要。

```
objRecordSet.Open "SELECT System.ItemName, System.ItemTypeText, System.Size FROM SystemIndex WHERE SCOPE='file:c:/users'", objConnection 
```

这几乎是从 TechNet 上的 vbscript 示例中逐字逐句获取的。

# android - 带有 SDK 的 WebView 中的 Facebook 按钮

> ID：12464570
> 
> 赞同：8
> 
> 时间：2012-09-17T17:47:32.920
> 
> 标签：android, facebook, facebook-like

我正在尝试使用 WebView 实现不属于 Android Facebook SDK 的 Facebook Like 按钮。这个想法很简单。我使用 SDK 使用 SSO 登录用户帐户，因此如果用户已经登录 android FB 应用程序，则用户无需再次输入登录名/密码。然后我想使用 WebView 插入标准的 Like Button。
我已经拥有用户身份验证令牌、在墙上发送状态的权限等。问题是如何告诉 WebView 用户已经登录。我试图通过FB生成的这个URL（webview.loadURL（））使用WebView（启用JS）：

```
http://www.facebook.com/plugins/like.php?href=myurl&send=false&layout=button_count&width=450&show_faces=true&action=like&colorscheme=light&font&height=21&appId=myId"
            + "&token=" + mFacebook.getAccessToken()+"&expires="+mFacebook.getAccessExpires(); //(or auth_token instead)<br> 
```

显然，这是错误的/或不足以以这种方式发送自动化，因为在单击“赞”按钮后，用户将被重定向到 Web 浏览器中的登录页面。
所以问题是如何编辑此 URL 或如何在 WebView 中设置 cookie（在 CookieManager 中设置什么 URL 以及哪些 cookie）以登录用户。
感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:08:02.653

我不太确定 FB 应用程序访问令牌对于使用 Web api 是否有效，但让我们尝试一下。

首先，确保您实际上是在为您的 WebView 实例使用 cookie：

```
CookieManager.getInstance().setAcceptCookies(true); 
```

我不确定 facebook 重定向页面是否会尝试设置 cookie，所以试试这个，看看它是否有效：

```
webview.setWebViewClient(new WebViewClient() {  
  @Override  
  public boolean shouldOverrideUrlLoading(WebView view, String url)  
  {  
    view.loadUrl(url);  
    return true;
  }  
}); 
```

这将强制您的 WebView 在其内部打开链接，因此 cookie（如果有）不会丢失，以防类似页面发出重定向。

如果问题仍然存在，您还可以尝试在 WebView 中加载 url 之前手动设置 cookie：

```
// This just initializes the sync manager, do it once
CookieSyncManager.createInstance(this);

CookieManager.getInstance().setCookie("facebook.com", "token="
        + mFacebook.getAccessToken() + "; domain=facebook.com");
CookieSyncManager.getInstance().sync(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:11:14.257

我认为这就是你要找的东西： [https ://developers.facebook.com/docs/authentication/server-side/](https://developers.facebook.com/docs/authentication/server-side/)

如果我没看错的话，一旦你实现了 OAuth，你就可以使用 Graph API 来实现你正在寻找的“Like”按钮，因为你可以验证设备——而不仅仅是用户。

# jquery - 使用 jQuery 输入值后，如何通过其值选择输入？

> ID：12464572
> 
> 赞同：1
> 
> 时间：2012-09-17T17:47:48.927
> 
> 标签：jquery

请参阅下面的示例。我正在尝试将 Mike 输入到输入中，然后点击“删除输入”以从页面中删除输入。当用户键入值时，DOM 中的值似乎没有更新。我怎样才能解决这个问题？

示例：http: [//jsfiddle.net/ZMSaD/](http://jsfiddle.net/ZMSaD/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:51:32.013

试试这个：

```
$("#remove").click(function() {
    $("input").filter(function(){
       return this.value === "Mike"
    }).remove()
}); 
```

[http://jsfiddle.net/N6pw6/](http://jsfiddle.net/N6pw6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:29:39.990

该值在 DOM 中更新，您可以使用`alert($('#testing').val());`(`#testing`作为您希望删除的输入进行检查。)

但是`$("input[value='Mike']").remove();`，似乎检查了源 HTML 中编写的 HTML 属性的值。奇怪的是，HTML*属性*在这种情况下没有更新。

试试这个反直觉的例子。设置`value="foo"`您的`#testing`输入并在运行时在控件中键入“Mike”，然后：

```
alert($('#testing').attr('value'));    // Mike
alert($('input[value="foo"]').val());  // Mike 
```

但是，您可以通过显式分配更改属性来强制它更新：

```
$('input').bind('change',function() {
    $(this).attr('value',this.value)
}); 
```

然后您的原始代码将起作用。

# javascript - Javascript 模拟输入 contenteditable

> ID：12464578
> 
> 赞同：1
> 
> 时间：2012-09-17T17:48:09.300
> 
> 标签：javascript, html, contenteditable

我有一个内容可编辑的 div，我想在用户键入后查看其内容。对于某些键（如换行符和退格键），这在不同浏览器中有所不同。

为了测试，我想用 javascript 模拟这种类型。有没有办法做到这一点？

我需要的不仅仅是触发事件（关于 SO on javascript key triggering 的大多数问题都是关于）；我需要浏览器看到'enter'键被按下并做它的事情来修改contenteditable div。我对浏览器最终会做什么很感兴趣，因此只听某些击键并自己修改 HTML 会破坏目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:52:17.093

此答案不会为您提供通过 JavaScript 执行此操作的方法，但我建议您使用浏览器自动化测试工具[Selenium](http://seleniumhq.org/)进行此类测试。它将允许您在用户与其交互时测试 div。

# java - 将 JSON 发送到 Spring MVC 控制器

> ID：12464586
> 
> 赞同：2
> 
> 时间：2012-09-17T17:48:41.983
> 
> 标签：java, jquery, json, jsp, spring-mvc

我正在尝试将 JSON 发送到 Spring MVC 控制器。在 Spring MVC 方面，一切都配置正确。

下面是代码，但似乎没有运行：

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>  
<script type="text/javascript">
  $('#myForm').on('submit', function(e) { 
    e.preventDefault(); 
    var frm = $("#myForm"); 
    var dat = frm.serialize(); 
    $.ajax({ 
    type: 'POST', 
    url: $('#myForm').attr('action'), 
    data: dat, 
    contentType: 'application/json' 
    success: function(hxr) { 
        alert("Success: " + xhr); 
    } 
}); 
});   
 </script>   
</head>
<body>
<h2>Application</h2>
<form id="myForm" action="/application/save" method="POST" accept="application/json" onclick="i()">
                <input type="text" name="name" value="myName">
    <input type="submit" value="Submit">
</form> 
```

在Tomcat中，我收到以下错误：

> org.springframework.web.servlet.mvc.support.DefaultHandlerE xceptionResolver handleNoSuchRequestHandlingMethod 警告：没有为 servlet 请求找到匹配的处理程序方法：路径 '/application/save'，方法 'POST'，参数 map['name' -> array['我的名字']]

有什么想法我哪里出错了吗？我是 JSON 新手。我正在尝试将 JSON 发送到 Spring MVC 控制器。

```
@Controller
@RequestMapping("/run/*")
public class HistoryController {

    @RequestMapping(value = "save", method = RequestMethod.POST, headers = {"content-type=application/json"})
public @ResponseBody Response save(@RequestBody User user) throws Exception {
    Response userResponse = new Response();
    System.out.println("UserId :" + " " + user.getName());
    return userResponse;
}
}

@RequestMapping(value = "find", method = RequestMethod.GET)
public @ResponseBody Response find() {
    System.out.println("Run");
    Response userResponse = new Response();
    userResponse.setVersionNumber("1.0");
    return userResponse;
} 
```

调用 /application/run/save 时，我得到一个 JSON 响应。但是 @RequestBody 不起作用。

* * *

我仍然没有运气。已经阅读了许多类似的问题。要求是服务器只接受 application/json 类型。我正在使用 Spring MVC 控制器。如前所述，代码通过@ResponseBody 将响应以 JSON 形式发回。我想通过我的 Spring MVC 控制器中的 @RequestBody 获取信息。我正在使用 JSP 将 JSON 发送到 Spring MVC 控制器。我的代码和 Spring MVC 如下所示：

我是 JSON 和 Javascript 的新手。

JSP - index.jsp

```
<%@page language="java" contentType="text/html"%>
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>  
<script type="text/javascript">
    $('#myForm').on('submit', function(e) { 
    var frm = $("#myForm");
   var dat = JSON.stringify(frm.serializeArray()); 

$.ajax({ 
     type: 'POST', 
     url: $('#myForm').attr('action'), 
     data: dat,
     contentType: 'application/json',
     dataType: 'json',
     error: function() {
        alert('failure');
     }
     success: function(hxr) { 
         alert("Success: " + xhr); 
     }
  }); 
); 
}; 
</script> 
</head>
<body>
<h2>Application</h2>
<form id="myForm" action="/application/save" method="POST" accept="application/json" onclick="i()">
    <input type="text" name="userId" value="User">
    <input type="submit" value="Submit">
</form>
</body>
</html> 
```

运行此程序时，我没有得到任何输出。在 Chrome 中我得到 404 Not found 错误，在 Tomcat 中我得到以下错误：

```
org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver     handleNoSuchRequestHandlingMethod
WARNING: No matching handler method found for servlet request: path '/application/sa
 ve', method 'POST', parameters map['userId' -> array<String>['User']] 
```

JSP 部分有问题吗？

web.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd"
     version="2.5">

     <display-name>WebApp</display-name>

     <context-param>
        <!-- Specifies the list of Spring Configuration files in comma separated format.-->
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/service.xml</param-value>
     </context-param>

     <listener>
        <!-- Loads your Configuration Files-->
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
     </listener>

     <servlet>
        <servlet-name>application</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
     </servlet>

     <servlet-mapping>
        <servlet-name>application</servlet-name>
        <url-pattern>/</url-pattern>
     </servlet-mapping>

     <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
     </welcome-file-list>    
</web-app> 
```

服务.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:util="http://www.springframework.org/schema/util"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

    <context:component-scan base-package="com.web"/>

    <mvc:annotation-driven/>

    <context:annotation-config/>

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>

    <bean id="jacksonMessageChanger" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
        <property name="supportedMediaTypes" value="application/json"/>
    </bean>

    <!-- <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="messageConverters">
            <list>
                <ref bean="jacksonMessageChanger"/>
            </list>
        </property>
    </bean>-->

    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="messageConverters">
            <util:list id="beanList">
                <ref bean="jacksonMessageChanger"/>
            </util:list>
        </property>
    </bean>

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/"/>
        <property name="suffix" value=".jsp"/>
    </bean>

    <!-- <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="mediaTypes">
            <map>
                <entry key="json" value="application/json"/>
            </map>
        </property>
    </bean>-->  
</beans> 
```

控制器

```
package com.web;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.bind.annotation.RequestBody;
import com.webchannel.domain.User;
import com.webchannel.domain.UserResponse;

@Controller
@RequestMapping("/application/*")
public class SaveController {

@RequestMapping(value = "save", method = RequestMethod.POST, headers = {"content-type=application/json"})
public @ResponseBody UserResponse save(@RequestBody User user) throws Exception {
    UserResponse userResponse = new UserResponse();
    System.out.println("UserId :" + " " + user.getUserId());
    return userResponse;
}

@RequestMapping(value = "delete", method = RequestMethod.GET)
public @ResponseBody UserResponse delete() {
    System.out.println("Delete");
    UserResponse userResponse = new UserResponse();
    userResponse.setSuccess(true);
    userResponse.setVersionNumber("1.0");
    return userResponse;
}
} 
```

调用 /application/delete 时，我会返回 JSON。所以我知道我的 JacksonProcessor 配置正确。问题出在@RequestBody 中。

我哪里错了？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:19:54.350

我认为您可能需要进行一些更改

1.  由于您的控制器有`@RequestMapping("/run/*")`，您可能需要将其更改为您可能需要更改`@RequestMapping("/run/")`的 jsp 表单操作`<form id="myForm" action="/application/run/save" method="POST" accept="application/json" onclick="i()">`，因为您已经`@RequestMapping(value = "save", method = RequestMethod.POST, headers = {"content-type=application/json"})`在控制器中定义了“保存”方法。

2.  您可能需要在控制器的保存方法中定义@RequestParam，例如`public @ResponseBody Response save(@RequestParam(required=true, value="name") String name, @RequestBody User user) throws Exception {...}`

因为它清楚地表明您提交的请求没有附加处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T19:15:41.800

这个问题有点难以理解，因为似乎有几个不同的问题。

但只看这个问题：

> 在Tomcat中，我收到以下错误：
> 
> > org.springframework.web.servlet.mvc.support.DefaultHandlerE xceptionResolver handleNoSuchRequestHandlingMethod 警告：没有为 servlet 请求找到匹配的处理程序方法：路径 '/application/run'，方法 'POST'，参数 map['name' -> array['我的名字']]

在您发布的 HTML 中，您有一个`<form>`设置`POST`为`/application/run`.

但是，在您的`@Controller`课程中，您没有绑定到此 URL 的任何方法。

因为您已经用 注释了类`@RequestMapping("/run/*")`并且用 注释了方法`@RequestMapping("save")`，所以该`save()`方法实际上绑定到 URL `/run/save`- 这既不是您发送数据`$.ajax()`的 URL，也不是表单指向的 URL。

我建议打开记录器的日志`org.springframework.web`记录`DEBUG`- 当您的应用程序启动时，Spring 将记录每个方法映射到的每个 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T21:39:01.257

控制器中没有方法映射到您的`/application/run`. 我不确定你想打电话给哪个，但`url`你必须添加`find`or `save`。或者创建一个映射到`/application/run`. 干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T18:37:25.883

尝试以下

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>  
<script type="text/javascript">
$('#myForm').on('submit', function(e) {
    e.preventDefault();
    var frm = $("#myForm");
    var dat = frm.serialize();
    $.ajax({
        type: 'POST',
        url: $('#myForm').attr('action'),
        data: dat,
        contentType: 'application/json'
        success: function(hxr) {
            alert("Success: " + hxr);
        }
    });
});    
</script>   
</head>
<body>
<h2>Application</h2>
<form id="myForm" action="/application/run" method="POST">
    <input type="text" name="name" value="myName">
    <input type="submit" value="Submit">
</form>​ 
```

`dataType:'json'`指定您对服务器的期望格式，

如果您发布处理程序代码，最好提供帮助。

# c# - 为什么我不能删除我在 Metro 风格应用程序中的代码中创建的文件？

> ID：12464588
> 
> 赞同：0
> 
> 时间：2012-09-17T17:48:50.237
> 
> 标签：c#, .net, c#-4.0, io, microsoft-metro

我可以在我的 Metro 风格应用程序中创建、读取和编辑由我的应用程序创建的文件，但它不允许我删除（是的，我确实设置了必要的声明和文件类型关联）它们！

对于 Windows 8 Metro File Access 示例中使用（和工作）的相同代码，我收到`Access is denied.`消息：

```
private async void RemoveNote_Click(object sender, RoutedEventArgs e)
{
    try
    {
        StorageFile file = await KnownFolders.DocumentsLibrary.GetFileAsync(NotesList.SelectedItem.ToString());
        if (file != null)
        {
            await file.DeleteAsync();
            file = null;
        }

        notes.RemoveAt(NotesList.Items.IndexOf(NotesList.SelectedItem));
    }
    catch (Exception exception)
    {
        throw new Exception(exception.Message);
    }
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:53:20.323

您是否忘记在某处关闭文件流？

# c# - 是否可以将参数（绑定）传递给 WPF 样式

> ID：12464589
> 
> 赞同：2
> 
> 时间：2012-09-17T17:49:00.767
> 
> 标签：c#, wpf, xaml, styles, controltemplate

我有一个应用于列表框项目的 WPF 样式。目前，每个项目都绑定到一个 KeyValuePair。我在 ListBoxItem 内的 TextBlock 中显示 Key：

```
<TextBlock Name="Label" Text="{Binding Key}" /> 
```

我想要做的是使样式通用，以便如果数据不是 KeyValuePair（可能只是一个字符串），我可以将数据正确绑定到 TextBlock。

**有没有办法将参数传递给 Style 或 DataTemplate 或使数据绑定通用？**

我的风格：

```
<Style x:Key="ListBoxItemStyle" TargetType="ListBoxItem">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="ListBoxItem">
        <Border x:Name="Border" Padding="2" SnapsToDevicePixels="true" CornerRadius="4" BorderThickness="1">
          <TextBlock Name="Label" Text="{Binding Key}" />
        </Border>
        <ControlTemplate.Triggers>
          <MultiTrigger>
            <MultiTrigger.Conditions>
              <Condition Property="IsSelected" Value="True"/>
            </MultiTrigger.Conditions>
            <Setter TargetName="Border" Property="Background" Value="{StaticResource SelectionGradient}" />
          </MultiTrigger>
        <ControlTemplate.Triggers>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:55:42.723

让我给你一个简单的例子。假设您`TextBox`包含一个数字，如果数字为负数，您希望它具有红色背景，或者如果 >= 0 则具有绿色背景

这是您要编写的样式：

```
<TextBlock Text="{Binding Key}" >
  <TextBlock.Style>
    <Style TargetType="TextBox">
      <Setter Property="Background" Value="{Binding Key, Converter={StaticResource MyConverterResource}" />
    </Style>
  </TextBlock.Style>
</TextBlock> 
```

这是您要编写的转换器：

```
public class MyConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        double source = (double)value;
        return source < 0 ? Brushes.Red : Brushes.Green;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        // We don't care about this one here
        throw new NotImplementedException();
    }
} 
```

而且，要访问您的 xaml 中的转换器，您只需执行以下操作，假设您的转换器位于命名空间中`MyNamespace`：

```
<Window xmlns:my="clr-namespace:MyNamespace">
  <Window.Resources>
    <my:MyConverter x:Key="MyConverterResource">
  </Window.Resources?
  <!-- Your XAML here -->
</Window> 
```

（当然你可以把它放在任何一个`Resources`，可能是 a`UserControl`或其他）这将允许你通过写来调用你的转换器`{StaticResource MyConverterResource}`

在这里，你有一个条件样式，转换器根据一个参数决定将哪种颜色设置为背景，在我的例子中，值本身（但它可以是你想要的任何东西）

# vim - vim-7.3.tar.bz2 中的 vim 可执行文件在哪里

> ID：12464592
> 
> 赞同：-1
> 
> 时间：2012-09-17T17:49:05.790
> 
> 标签：vim

我下载了vim-7.3.tar.bz2，据说包含源码和运行时。我解压了它，但我找不到 vim 程序的可执行文件。它在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:07:26.123

开源软件包很少同时包含源代码和二进制文件，特别是因为 Vim 运行在许多不同的平台上。

二进制下载列在[http://www.vim.org/download.php](http://www.vim.org/download.php)

您没有告诉您正在使用的操作系统；对于 Windows，Cream 项目 ( [http://cream.sourceforge.net/](http://cream.sourceforge.net/) ) 提供了最新的包和安装程序；对于 Linux，最好依靠发行版的包管理。

要安装本地用户（与系统/根用户相比），您要么必须破解包管理（cp. [https://serverfault.com/questions/23734/is-there-any-way-to-get -apt-to-install-packages-to-my-home-directory](https://serverfault.com/questions/23734/is-there-any-way-to-get-apt-to-install-packages-to-my-home-directory)），或从源代码（您已经下载！）编译（使用自定义安装前缀）

如果您想关注最新最好的 Vim 并不断更新，请查看其 Mercurial 存储库并从那里编译 Vim。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:12:02.617

通常的步骤是：

```
$ ./configure --prefix=/home/username
$ make
$ make install 
```

有很多方法可以定制整个过程，你应该先做`$ ./configure --help`任何事情来了解你可以做什么。

1.  第一步是定义用于构建的所有选项。`$ ./configure`没有选项只使用默认设置。

2.  第二步是建筑本身。

3.  `/home/username/bin/vim`在我的示例中，最后一步是将可执行文件移动到配置时给出的路径。

另一种解决方案是简单地做`$ make`，将可执行文件移动到您想要的位置并确保该位置属于您的路径`or`创建别名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T22:59:25.900

打开旧版本的 vim，然后输入：

```
:help install 
```

你会在那里找到你需要的一切。甚至还有一个关于在家中安装的部分：

```
:help install-home 
```

# database - 在 ERD 中绘制多对多关系

> ID：12464603
> 
> 赞同：3
> 
> 时间：2012-09-17T17:49:58.923
> 
> 标签：database, database-design, data-modeling, erd

![在此处输入图像描述](../Images/bf33b4b34208e26f6dc341bc6fd7bf17.png)

多对多关系应该有一条实线，牢固的关系。在给定的图表中，右边的样本肯定是不正确的，关系线显示是实心的。但是，**左侧图的适当关系是什么，应该是虚线（弱关系）还是实线？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:01:47.007

> 多对多关系应该有一条实线，牢固的关系。

你用的是什么符号？看起来像是 IE（信息工程）的变体。

无论如何，我想这取决于所使用的符号/约定，在这种特殊情况下，逻辑模型似乎与物理模型一致，除了项目必须连接到至少一名员工的要求，这不容易¹映射到物理数据库。

> 在给定的图表中，右边的样本肯定是不正确的，关系线显示是实心的。

不必要。没有什么可以阻止您将父 PK 迁移到联结表中的**备用**键并使用代理 PK。这将使关系“无法识别”，保证使用虚线。

* * *

¹它需要[循环延迟 FK](https://stackoverflow.com/a/12387403/533120)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-21T02:18:36.727

[https://help.drawerd.com/relationship/many-many](https://help.drawerd.com/relationship/many-many)

使用[DrawERD](https://drawerd.com)：简单的 web ui 就可以做到。 [![在此处输入图像描述](../Images/b45fd65b120e5181ded5b00d3a51a59e.png)](https://i.stack.imgur.com/l6hbh.png)

# java - Java/Spring 中的调度任务

> ID：12464608
> 
> 赞同：4
> 
> 时间：2012-09-17T17:50:23.567
> 
> 标签：java, spring, scheduled-tasks

项目中有一个要求，它将有一个计划任务来完成一些工作。

该项目是基于 Spring 的，计划的工作将成为应用程序战争的一部分。我以前从未实现过这种功能。

我听说过石英。另外，我在某处读到 Spring 提供了一些功能来安排任务。所以，我在想如果我已经在使用 Spring，那么为什么要使用其他 API（Quartz）。

我不确定该使用哪一个？一个比另一个的优点/缺点是什么？

请建议什么是满足我的要求的最佳方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T17:57:25.970

我使用了 Spring 的任务执行和调度 - [http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)

# c# - 将泛型转换为接口类型 - 无法将“System.RuntimeType”类型的对象转换为类型

> ID：12464611
> 
> 赞同：9
> 
> 时间：2012-09-17T17:50:25.930
> 
> 标签：c#, reflection

我有一些这样的课程：

```
public class Customer
{ }

public interface IRepository 
{ }

public class Repository<T> : IRepository
{ }

public class CustomerRepository<Customer>
{ } 
```

然后，根据[这个问题的答案，](https://stackoverflow.com/questions/12462900/identifying-generic-type-of-class-using-reflection)我可以使用反射来获取我的每个 *Repository 的泛型引用的类型列表：

我想要结束的是`Dictionary<Type, IRepository>`

到目前为止，我有这个：

```
Dictionary<Type, IRepository> myRepositories = Assembly.GetAssembly(typeof(Repository<>))
.GetTypes()
.Where(typeof(IImporter).IsAssignableFrom)
.Where(x => x.BaseType != null && x.BaseType.GetGenericArguments().FirstOrDefault() != null)
.Select(
    x =>
    new { Key = x.BaseType != null ? x.BaseType.GetGenericArguments().FirstOrDefault() : null, Type = (IRepository)x })
.ToDictionary(x => x.Key, x => x.Type); 
```

但是，它不喜欢我的演员`(IRepository)x`
表，我收到以下错误：

> 无法将“System.RuntimeType”类型的对象转换为“My.Namespace.IRepository”类型。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T18:21:09.540

您不能`(IRepository) type`使用 type is `Type`class 进行强制转换，

可以使用`Activator.CreateInstance`创建对象`CustomerRepository`，也不需要使用`Select`，`ToDictionary`直接使用，代码如下：

```
var myRepositories = Assembly.GetAssembly(typeof(Repository<>))
       .GetTypes()
       .Where(x => x.BaseType != null && 
                   x.BaseType.GetGenericArguments().FirstOrDefault() != null)

       .ToDictionary(x => x.BaseType.GetGenericArguments().FirstOrDefault(), 
                            x => Activator.CreateInstance(x) as IRepository ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T18:21:16.907

If`x`是一个`System.Type`对象，就像 if `x`is一样`typeof(Repository<>)`，你不能像那样投射它。`Type`不是实例化。

如果`x`没有“自由”类型参数，即`x`非泛型或*封闭*泛型，那么`(IRepository)Activator.CreateInstance(x)`可能会为您创建一个类型为 的对象`x`。但我不确定这就是你需要的。会有无参数的实例构造函数吗？

# c# - 基于数据库值的动画地图

> ID：12464612
> 
> 赞同：0
> 
> 时间：2012-09-17T17:50:29.097
> 
> 标签：c#, java, .net, flash, animation

## [GUI 要求的图片链接 http://imageshack.us/a/img39/8062/requirement1.jpg](http://imageshack.us/a/img39/8062/requirement1.jpg)

1.  应从数据库加载图像映射
2.  在搜索框中输入值时，它应该查询数据库并缩放到该坐标，并在左侧填写结果
3.  查询状态时，地图上应显示属于该状态的村庄总数
4.  单击地图上村庄的坐标时，应显示左侧结果。
5.  我们应该能够更新所选村庄的状态、名称、坐标。
6.  我们还应该能够添加新村庄。
7.  这应该是一个桌面应用程序（如果可能）

* * *

我有设计，但不知道要使用什么软件、语言、框架？我一直在寻找正确的解决方案，但无法得到我想要的。非常感谢任何想法/建议。

问候， 万拉尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:21:09.383

如果您使用的是 java，我会推荐 GeoTools 和 Java Topology Suite。 [http://www.vividsolutions.com/jts/jtshome.htm](http://www.vividsolutions.com/jts/jtshome.htm) http://www.geotools.org/

# c++ - 无法将 Arudino 的串行监视器中编写的内容保存为字符串/字符

> ID：12464613
> 
> 赞同：0
> 
> 时间：2012-09-17T17:50:30.280
> 
> 标签：c++, string, char, arduino

当我在第一行输入单词时，第一个字母被保存到第二行，而没有任何内容被保存到第一行。我该如何解决这个问题？

这是代码： http: [//pastebin.com/sXLjAvns](http://pastebin.com/sXLjAvns)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:05:01.373

Serial.read() 只返回一个字符，所以如下：

```
while (Serial.available() == 0);
firstLine[16] = Serial.read();
Serial.println(firstLine); 
```

需要更改为类似于：

```
#define LEN   16
#define CR    13

int i=0;
char incoming;

while ((incoming!= CR) & (i<LEN-1))
{
   if (Serial.available())
   {
       incoming = Serial.read();
       firstline[i]=incoming;
       i++;
   }
}
firstline[i]=0;
Serial.println(firstLine); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T02:27:44.633

我实际上是和朋友一起想出来的。这是新的来源：`http://pastebin.com/GDxJwXxd`

我用一个`for`循环修复了它，该循环重复保存下一个字符并将其保存到字符串中。然后它使用另一个`for`循环并打印出字符串的每个字符。

# javascript - 加载页面时/之后给出不同结果的宽度

> ID：12464614
> 
> 赞同：0
> 
> 时间：2012-09-17T17:50:34.980
> 
> 标签：javascript

我正在尝试将特定 div（我们称之为：div1）的 margin-left 设置为：

```
-1 * $('.div2 canvas').width()/2 
```

所以我使用以下代码行来做到这一点：

```
$('#div1').css('margin-left', -1 * $('.div2 canvas').width()/2); 
```

加载页面后，它给我的结果是-150。但是，如果我在 Chrome 控制台中运行完全相同的代码行，它会给出正确的结果：-360，因为 div2 的总宽度是 720。

我尝试添加：

```
$(window).load(function () { }); 
```

或者

```
$('#div1').load(function () { }); 
```

或者

```
$('.div2 canvas').load(function () { }); 
```

但这并没有帮助。

我的假设是 div2 的宽度会根据正在注入的某种信息而发生变化，并且一旦页面准备好，div 的总宽度为 720px（在本例中），但我不完全确定如何运行这一行加载整个页面并注入所有内容后的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:02:43.027

您需要将此代码包装在文档就绪回调中。

```
$(document).ready(function () {
    // Your code
} 
```

这可以确保加载 html，但它不关心加载的图像，这是 .load 的来源。如果您的 div 包含图像标签，您将需要两个回调。

```
$(document).ready(function () { // Ensures that your document is loaded
    $('.div2 canvas').load(function () { // Ensures that the images within our tag are loaded
        // Your code
    }
} 
```

如果我们不将第二个回调定义包含在 document ready 中，我们引用的标签 $('.div2 canvas') 将不存在，因此不会绑定任何加载回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:59:26.047

```
$(window).load(function () { }); 
```

应该有帮助的。你也可以试试

```
$(document).ready(function () { }); 
```

但如果这没有帮助，您需要向我们展示您的页面（或包含问题的演示）以及之后注入内容的代码。

# c# - 使用 ODP.NET 的 Oracle 批量更新

> ID：12464616
> 
> 赞同：2
> 
> 时间：2012-09-17T17:50:46.640
> 
> 标签：c#, .net, oracle, odp.net

看[这个例子](http://dotnetslackers.com/articles/ado_net/BulkOperationsUsingOracleDataProviderForNETODPNET.aspx)来做批量插入，我假设使用相同的逻辑将适用于更新。我尝试了以下操作以查看它是否有效，但它没有：

```
string sql = "update TEST set NAME=:newName where NAME=:name";

connection.Open();
OracleCommand command = connection.CreateCommand();
command.CommandText = sql;
command.CommandType = System.Data.CommandType.Text;
command.BindByName = true;

command.ArrayBindCount = 5;

string[] originalName = { "Test1", "Test2", "Test3", "Test4", "Test5" };
string[] newName = { "New Test1", "New Test2", "New Test3", "New Test4", "New Test5" };

command.Parameters.Add(":newName", OracleDbType.Varchar2, originalName, System.Data.ParameterDirection.Input);
command.Parameters.Add(":name", OracleDbType.Varchar2, newName, System.Data.ParameterDirection.Input);

command.ExecuteNonQuery();
connection.Close(); 
```

这不适用于更新吗？有没有办法像我链接的示例中的批量插入一样轻松地进行批量更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:24:44.820

事实证明我的参数名称被翻转了。我花了很长时间才找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:30:02.170

您不能将数组作为参数传递。

您可以做的是遍历您的数组并为数组的每个位置调用更新（实际上不会是“批量”插入），或者您可以使用类似的东西：

```
WHERE NAME in ("Test1", "Test2", "Test3", "Test4", "Test5") 
```

等等

# c# - ProgressBar Indeterminate AutoReverse 代码示例

> ID：12464618
> 
> 赞同：0
> 
> 时间：2012-09-17T17:50:47.990
> 
> 标签：c#, wpf, progress-bar

有没有人有 IsIndeterminate = True 进度条的一个很好的例子，它具有以下行为。我们希望条具有特定的长度，例如 300 像素。然后在条内，我们想要一个大约 30 像素宽的小条来回滑动。酒吧应该从左向右移动，从右端“反弹”，然后从右向左，重复。我假设我们需要将 RepeatBehavior 设置为 Forever 并将 AutoReverse 设置为 True，但不确定如何设置此小部件的样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:24:25.963

进度条用于传达任务的状态。

我认为您正在寻找 StoryBoard。

[故事板类](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.storyboard.aspx)

# c# - 遍历树初始化变量

> ID：12464621
> 
> 赞同：3
> 
> 时间：2012-09-17T17:50:53.647
> 
> 标签：c#, recursion, tree

*如果您发现命名此问题标题的更合适的方式，请随时更新它。*

我有节点

```
public Class Node
{
    public List<Node> Children = new List<Node>();
    public Node Parent;
    public FileSystemInfo Value;
} 
```

表示树中的文件。

现在我想将该节点类更改为：

```
class ScanItem
{
    public List<ScanItem> Children; 
    public ScanItem Parent;

    public long Size;
    public string Name;    
    public string FullPath;
    public bool IsDirectory;
    // etc....    

} 
```

**所以我的问题是**如何将一个`Node`类对象转换为`ScanItem`. **我想存储文件和目录的大小而不仅仅是文件。**（节点类只存储文件的大小而不是目录）因此，我将不得不以某种方式递归地跟踪子项大小的总和，以实现我想要的。

到目前为止，我已将此构造函数放在 ScanItem 上：

```
 public ScanItem(Node node)
    {                        
        this.Name = node.Name;
        this.FullPath = node.Value.FullName;

        foreach(var child in node.Children)
        {
             this.Children.add(new ScanItem(child));
        }
    } 
```

这将使我能够执行演员，但我缺少分配目录的大小......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:24:43.200

要获取目录的大小，您可以使用此扩展方法

```
public static class DirectoryInfoEx
{
    public static long GetDirectorySize(this DirectoryInfo di)
    {
        long size = 0;

        var fileInfos = di.GetFiles();
        foreach (var fi in fileInfos)
        {
            size += fi.Length;
        }

        var subDirInfos = di.GetDirectories();
        foreach (var subDir in subDirInfos)
        {
            size += GetDirectorySize(subDir);
        }

        return size;
    }
} 
```

如果我理解正确，您只需要在`ScanItem`类的构造函数中添加两行代码

```
public ScanItem(Node node)
{                        
    this.Name = node.Name;
    this.FullPath = node.Value.FullName;
    DirectoryInfo di = new DirectoryInfo(this.FullPath);  //<<<<<<<
    this.Size = di.GetDirectorySize();                    //<<<<<<<

    foreach(var child in node.Children)
    {
         this.Children.add(new ScanItem(child));
    }
} 
```

您可能需要处理一些特殊情况，例如`UnauthorizedAccessException`. 您还可以通过摆脱*公共字段*来改进您的风格，例如将它们转换为*公共自动属性* `public long Size{get;set;}`。

# c++ - 返回传递引用参数的引用

> ID：12464627
> 
> 赞同：0
> 
> 时间：2012-09-17T17:51:16.873
> 
> 标签：c++, thread-safety, scope, secure-coding

在线程安全和一般安全方面，下面的代码会有什么问题吗？

```
std::string & toHexString( const uint8_t *buf, uint32_t size, std::string &out ) 
{ 
  // modify 'out'
  return out; 
}

#ifndef TOHEXSTR
    #define TOHEXSTR( x, y, ) ( toHexString( x, y, std::string() ) ).c_str()
#endif 
```

这将使用的方式是打印调试语句：

```
printf( "Byte buffer contents: [%s].", TOHEXSTR( buf, buf_size ) ); 
```

如果这个实现有问题，应该改变什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:57:19.247

不要使用引用参数来存储输出。

只需在函数内部创建一个本地 std::string 并按值返回它。

```
std::string  toHexString( const uint8_t *buf, uint32_t size ) 
{ 
  std::string out;
  // modify 'out'
  return out; 
} 
```

由于[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)等编译器技术，这应该具有相似的性能，但语义要好得多（不需要虚拟的额外参数）。

就线程安全而言，该功能可能很好。你只需要在线程之间共享数据时担心线程安全，这个函数不应该共享任何数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:07:48.760

从我们可以看到，该函数本身没有特别的线程安全问题——所以只要`out`和`buf`参数的内容在它运行时没有被另一个线程修改，你就可以了。如果您通过该宏或类似方式使用它，那么您不必担心`out`- 尽管正如 Ethan 的回答所指出的那样，您最好编写一个更干净的函数并只返回字符串，而不是使用宏。

# c++ - 从具有非虚拟析构函数的类中私有继承是否安全？

> ID：12464633
> 
> 赞同：15
> 
> 时间：2012-09-17T17:51:40.467
> 
> 标签：c++, inheritance, destructor

我知道使用公共继承通常是*不安全*的，因为当`delete`使用基类指针时，编译器只会生成代码来调用基类的析构函数，而不会调用派生类的析构函数。

但是对于私有继承，客户端不能将派生类指针强制转换为基类指针（因为私有继承不模拟*is-a*关系），所以`delete`总是在派生类的指针上使用，编译器应该能够看到那里也是一个基类并调用它的析构函数。

我做了这个测试：

```
#include <iostream>

struct BaseVirtual
{
    virtual ~BaseVirtual()
    {
        std::cout << "BaseVirtual's dtor" << '\n';
    }
};

struct BaseNonVirtual
{
    ~BaseNonVirtual()
    {
        std::cout << "BaseNonVirtual's dtor" << '\n';
    }
};

struct DerivedPrivVirtual: private BaseVirtual
{
    static void f()
    {
        BaseVirtual * p = new DerivedPrivVirtual;
        delete p;
    }

    ~DerivedPrivVirtual()
    {
        std::cout << "DerivedPrivVirtual's dtor" << '\n';
    }
};

struct DerivedPrivNonVirtual: private BaseNonVirtual
{
    static void f()
    {
        BaseNonVirtual * p = new DerivedPrivNonVirtual;
        delete p;
    }

    ~DerivedPrivNonVirtual()
    {
        std::cout << "DerivedPrivNonVirtual's dtor" << '\n';
    }
};

int main()
{
    std::cout << "With explicit derived pointer type:" << '\n';
    {
        DerivedPrivVirtual * derivedPrivVirtual = new DerivedPrivVirtual;
        DerivedPrivNonVirtual * derivedPrivNonVirtual = new DerivedPrivNonVirtual;

        delete derivedPrivVirtual;
        delete derivedPrivNonVirtual;
    }
    std::cout << '\n';

    std::cout << "With base pointer type:" << '\n';
    {
        // Client code can't cast Derived to Base when inherit privately.
        //BaseVirtual * derivedPrivVirtual = new DerivedPrivVirtual;
        //BaseNonVirtual * derivedPrivNonVirtual = new DerivedPrivNonVirtual;

        //delete derivedPrivVirtual;
        //delete derivedPrivNonVirtual;
    }
    std::cout << '\n';

    std::cout << "Inside derived class itself:" << '\n';
    {
        DerivedPrivVirtual::f();
        DerivedPrivNonVirtual::f();
    }
    std::cout << '\n';

    std::cout << "With non-dynamic variables:" << '\n';
    {
        DerivedPrivVirtual derivedPrivVirtual;
        DerivedPrivNonVirtual derivedPrivNonVirtual;
    }
    std::cout << '\n';
} 
```

GCC 4.7.1 和 CLang 3.1 都给出相同的输出。派生类构造函数被调用，除非派生类本身将派生类指针强制转换为基类并传递`delete`它。

除了这种看起来很不常见且很容易避免的情况（类的作者是唯一可以造成伤害的人，但它确实知道它是从哪个类派生的），我可以断定它是安全的吗？

```
With explicit derived pointer type:
DerivedPrivVirtual's dtor
BaseVirtual's dtor
DerivedPrivNonVirtual's dtor
BaseNonVirtual's dtor

With base pointer type:

Inside derived class itself:
DerivedPrivVirtual's dtor
BaseVirtual's dtor
BaseNonVirtual's dtor  <-- Only a problem inside the class itself

With non-dynamic variables:
DerivedPrivNonVirtual's dtor
BaseNonVirtual's dtor
DerivedPrivVirtual's dtor
BaseVirtual's dtor 
```

* * *

额外的问题：受保护的继承呢？我认为造成伤害的能力不再是直接派生类的作者的特权，而是层次结构中任何类的作者的特权。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T18:01:12.133

继承是公有的还是私有的都不会影响代码的安全性，它只是限制了它可以安全/不安全地使用的范围。你有同样的基本问题：如果你的类或你的类的朋友将你的类型的对象传递给一个接口，该接口接受一个指向没有虚拟析构函数的基的指针，并且如果该接口获得你的对象的所有权，那么你正在创建 undefined行为。

设计中的问题是，根据您的问题，`BaseNonVirtual`不是为了扩展而设计的。如果是，它应该有一个公共的虚拟析构函数，或者一个受保护的非虚拟析构函数，确保没有代码能够通过指向基的指针对派生对象调用 delete。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-02T03:46:45.803

有一种情况，尽管私有继承，客户端代码仍*可以*将 Derived 强制转换为 Base：

`delete reinterpret_cast<BaseNonVirtual*>(new DerivedPrivNonVirtual);`

从而跳过`~DerivedPrivNonVirtual()`.

但是，鉴于`reinterpret_cast`不鼓励使用的程度，您可能会得出结论，它对于您的目的“足够安全”。

# hive - 如何在 HIVE 脚本中设置变量

> ID：12464636
> 
> 赞同：110
> 
> 时间：2012-09-17T17:51:52.287
> 
> 标签：hive, hiveql

我正在寻找`SET varname = value`Hive QL中的 SQL 等价物

我知道我可以做这样的事情：

```
SET CURRENT_DATE = '2012-09-16';
SELECT * FROM foo WHERE day >= @CURRENT_DATE 
```

但后来我得到这个错误：

> 此处不支持字符“@”

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2012-09-18T22:03:29.833

您需要使用特殊的**hiveconf**进行变量替换。例如

```
hive> set CURRENT_DATE='2012-09-16';
hive> select * from foo where day >= ${hiveconf:CURRENT_DATE} 
```

同样，您可以传递命令行：

```
% hive -hiveconf CURRENT_DATE='2012-09-16' -f test.hql 
```

请注意，还有**env**和**system**变量，因此您可以参考`${env:USER}`例如。

要查看所有可用变量，请从命令行运行

```
% hive -e 'set;' 
```

或从 hive 提示符下，运行

```
hive> set; 
```

**更新：** 我也开始使用*hivevar*变量，将它们放入 hql 片段中，我可以使用`source`命令从 hive CLI 中包含（或从命令行作为 -i 选项传递）。这里的好处是该变量可以在有或没有 hivevar 前缀的情况下使用，并允许类似于全局与本地使用的东西。

因此，假设有一些*setup.hql*设置了一个表名变量：

```
set hivevar:tablename=mytable; 
```

然后，我可以带入蜂巢：

```
hive> source /path/to/setup.hql; 
```

并在查询中使用：

```
hive> select * from ${tablename} 
```

或者

```
hive> select * from ${hivevar:tablename} 
```

我还可以设置一个“本地”表名，这会影响 ${tablename} 的使用，但不会影响 ${hivevar:tablename}

```
hive> set tablename=newtable;
hive> select * from ${tablename} -- uses 'newtable' 
```

对比

```
hive> select * from ${hivevar:tablename} -- still uses the original 'mytable' 
```

可能对 CLI 的意义不大，但可以在使用*source*的文件中包含 hql ，但“本地”设置一些变量以在脚本的其余部分中使用。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2019-01-04T02:26:29.180

这里的大多数答案都建议使用`hiveconf`或`hivevar`命名空间来存储变量。所有这些答案都是正确的。但是，还有一个命名空间。

**共有三个`namespaces`可用于保存变量。**

1.  **hiveconf** - hive 以此开始，所有的 hive 配置都存储为此 conf 的一部分。最初，变量替换不是 hive 的一部分，当它被引入时，所有用户定义的变量也作为它的一部分存储。这绝对不是一个好主意。于是又创建了两个命名空间。
2.  **hivevar** : 存储用户变量
3.  **system**：存储系统变量。

因此，如果您将变量存储为查询的一部分（即日期或产品编号），您应该使用`hivevar`命名空间而不是`hiveconf`命名空间。

**这就是它的工作原理。**

**hiveconf**仍然是**默认命名空间**，因此如果您不提供任何命名空间，它会将您的变量存储在 hiveconf 命名空间中。

然而，当涉及到一个变量时，这是不正确的。默认情况下，它指的是**hivevar**命名空间。令人困惑，对吧？下面的例子可以变得更清楚。

如果您**不提供**如下所述的命名空间，则变量`var`将存储在`hiveconf`命名空间中。

```
set var="default_namespace"; 
```

因此，要访问它，您**需要指定** `hiveconf`命名空间

```
select ${hiveconf:var}; 
```

如果你**不提供命名空间**，它会给你一个错误，如下所述，原因是默认情况下，如果你尝试访问它只在`hivevar`命名空间中检查的变量。并且`hivevar`没有变量命名`var`

```
select ${var}; 
```

我们已经明确提供了`hivevar`命名空间

```
set hivevar:var="hivevar_namespace"; 
```

当我们提供命名空间时，这将起作用。

```
select ${hivevar:var}; 
```

默认情况下，引用变量时使用的工作区是`hivevar`，以下也可以。

```
select ${var}; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-17T18:41:11.473

您是否尝试过像这样使用**美元符号**和**括号**：

```
SELECT * 
FROM foo 
WHERE day >= '${CURRENT_DATE}'; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-10T13:16:01.223

以防万一有人需要通过 cli 参数化配置单元查询。

例如：

hive_query.sql

```
SELECT * FROM foo WHERE day >= '${hivevar:CURRENT_DATE}' 
```

现在从cli执行上面的sql文件：

```
hive --hivevar CURRENT_DATE="2012-09-16" -f hive_query.sql 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-23T18:35:07.917

两种简单的方法：

**使用配置单元配置**

```
hive> set USER_NAME='FOO';
hive> select * from foobar where NAME = '${hiveconf:USER_NAME}'; 
```

**使用配置单元变量**

在您的 CLI 设置变量，然后在配置单元中使用它们

```
set hivevar:USER_NAME='FOO';

hive> select * from foobar where NAME = '${USER_NAME}';
hive> select * from foobar where NAME = '${hivevar:USER_NAME}'; 
```

**文档：** [https ://cwiki.apache.org/confluence/display/Hive/LanguageManual+VariableSubstitution](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+VariableSubstitution)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-24T18:22:11.107

需要注意的一件事是设置字符串，然后再引用它们。您必须确保引号没有冲突。

```
 set start_date = '2019-01-21';
 select ${hiveconf:start_date}; 
```

设置日期时，然后在代码中引用它们，因为字符串可能会发生冲突。这不适用于上面设置的 start_date。

```
 '${hiveconf:start_date}' 
```

在查询中引用字符串时，我们必须注意不要为字符串设置两次单引号或双引号。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-23T16:05:40.187

在 Hive 中有多个设置变量的选项。

如果您希望从 Hive shell 内部设置 Hive 变量，您可以使用`hivevar`. 您可以设置字符串或整数数据类型。他们没有问题。

```
SET hivevar:which_date=20200808;
select ${which_date}; 
```

如果您打算从 shell 脚本设置变量并希望将这些变量传递到您的 Hive 脚本 (HQL) 文件中，则可以`--hivevar`在调用 hive 或 beeline 命令时使用选项。

```
# shell script will invoke script like this
beeline --hivevar tablename=testtable -f select.hql 
```

```
-- select.hql file
select * from <dbname>.${tablename}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-08T06:36:56.343

试试这个方法：

```
set t=20;
select *
from myTable
where age > '${hiveconf:t}'; 
```

它在我的平台上运行良好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-10T10:47:41.930

您可以在 shell 脚本 export CURRENT_DATE="2012-09-16" 中导出变量

然后在 hiveql 你喜欢 SELECT * FROM foo WHERE day >= '${env:CURRENT_DATE}'

* * *

## 回答 #10

> 赞同：-7
> 
> 时间：2016-05-07T00:01:34.320

您可以将另一个查询的输出存储在一个变量中，然后您可以在代码中使用它：

```
set var=select count(*) from My_table;
${hiveconf:var}; 
```

# java - 为什么我的课不被接受

> ID：12464637
> 
> 赞同：24
> 
> 时间：2012-09-17T17:52:03.743
> 
> 标签：java, intellij-idea

这是我第一次涉足 Java，我正在尝试使用 Intellij IDEA 了解“Hello World”。

与其说是我遇到问题的语法，不如说是 IDE 本身。

首先，我已经下载并安装了 IntelliJ IDEA，以及 32 位和 64 位版本的 Java JDK。IDEA 可以轻松找到我的 Java JDK 安装，并为我提供智能感知。我创建了一个名为 的测试解决方案`Test`，以及一个`src`用于放置源文件的目录。我的解决方案资源管理器如下所示：

![解决方案资源管理器](../Images/f37de962f507f4b1ae966d075ee7713b.png)

我的 Java 类在下面，它编译成功：

```
public class HelloWorld {

    static void main(String[] args){
        System.out.println("Hello World");
    }

} 
```

我已将 Java JDK 添加到计算机上的环境变量中，并且能够导航到已编译的类，并在命令行中运行它。它运行良好。

每当我出于调试目的尝试从 IDEA 内部运行该类时，就会出现我的问题。当我点击 时`Run`，它要求我编辑我的环境变量。在出现的对话框中，我选择`Application`了`Defaults`，然后尝试选择`HelloWorld`作为我的主类。我收到一条错误消息，告诉我这`HelloWorld`是不可接受的，如下所示：

![错误](../Images/9c951fad52d5724272a43316eb249275.png)

我的问题是，如何在 IDEA 中运行我的 Java 控制台应用程序以进行调试？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-17T17:52:48.157

`main`方法应该带有`public`修饰符

```
public static void main(String[] args) 
```

甚至更好

```
public static void main( final String[] args ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-20T22:02:52.873

我敢承认吗？

我忽略了`main()`参数！
`main(String[] args)`当然是正确的签名。

...我很确定那是在 Java 101 中。

# jquery - 这对浏览器有多大影响？

> ID：12464638
> 
> 赞同：3
> 
> 时间：2012-09-17T17:52:06.770
> 
> 标签：jquery

我的一个朋友最近和我分享了这个：

```
$("*").append($("*")); // watch your browser eat itself 
```

这个 jQuery 到底想做什么？它会导致无限循环，还是只是通过迭代地将每个元素附加到每个其他元素来破坏 DOM？我知道将一个元素附加到另一个元素基本上将它从其当前父级移到那里。但是当它试图将一个元素附加到自身时会发生什么？它只是简单地出错并死掉，还是跳过这一步继续前进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:58:54.670

在 Chrome 和 FFX 中（没有在 IE 中测试，因为我很害怕）我得到一个层次结构请求错误，当您尝试将节点附加到自身或附加到空节点或一堆其他类似原因时会发生这种错误。

这意味着从逻辑上讲，它实际上确实会遍历 DOM 树并首先尝试附加其他节点。选择器选择两次相同的节点并尝试将其附加到自身，这会导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:00:03.020

从它的外观来看，它会出错（并且什么都不做），因为您正在尝试绝对附加所有内容，`html / head / script / body`标签。我假设这是因为在特定标签内添加其中一些标签会触发错误。`<html/head/etc>`（即：在标签内添加所有这些标签`<script>`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T18:01:18.807

`*`是所有标签的 CSS 选择器。所以基本上“将所有标签附加到所有标签”。

# svn - 根据提交从 svn 获取代码

> ID：12464641
> 
> 赞同：0
> 
> 时间：2012-09-17T17:52:38.443
> 
> 标签：svn, revision, changeset

以下是我想要的场景：

*   我有一个功能列表，其中包含要修复的不同行项目。我们可以将这些像 line item1,line item2,line item3 编号到 line itemn
*   一个由 3 名开发人员组成的团队正在研究此功能列表。开发人员 A 正在处理 line item1，开发人员 B 正在处理 line item2，开发人员 C 正在处理 line item3
*   他们按以下顺序在 SVN 上提交代码：
    *   开发人员 B 正在提交订单项 2
    *   开发人员 C 正在提交订单项 3
    *   开发人员 A 正在提交订单项 1

现在我只想从 SVN 获取 line item1 的更新。

如果对所有 3 个行项目的公共文件进行更改，我们如何实现这一点？修订号和变更集对此有帮助吗？如果是，我们如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:06:14.727

这不是持续集成的设计目的。

我对持续集成的理解是集成/构建任何更改，以确保项目尽可能最新并识别任何破坏代码。

因此，您希望依次构建每个更改。

如果您想确保一个更改在另一个更改之前集成/构建，听起来您应该考虑按该顺序将工作发布给开发人员？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:47:56.957

我怀疑这根本不可能。据我了解 SVN 的工作方式，它会保存每个修订版的整个文件。因此，对于每个修订版，都将整个文件存储在其当前状态。但是，如果您将它与以前的版本进行比较（假设开发人员 A 提交了最后一行并且没有更多提交），它将向您显示您需要的更改。

但这可能不是你想要的。开发人员会一个接一个地提交，我不知道如何获取仅来自开发人员 A 的更改的文件。

# php - 选项应该在 MySQL 数据库中存储为文本还是整数？

> ID：12464644
> 
> 赞同：2
> 
> 时间：2012-09-17T17:52:40.440
> 
> 标签：php, mysql

我正在创建一个包含三列名称的小型数据库：ID、名称、状态

“状态”可以是以下三项之一：等待、已批准、其他

我的问题是，将“状态”存储在数据库中的最佳/最正确方法是什么？它应该存储为 varchar 字符串还是 1、2 或 3 整数，然后在从数据库读取时将其转换为等待/批准/其他？我希望这是有道理的，感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T17:55:39.337

`tinyint`您应该有一个使用数据类型来引用该状态的状态表（称为字典或查找表） 。您将使用外键约束。这样您就可以保持关系和域的完整性。它将允许您在不更改表结构的情况下添加/更改/删除状态值。

```
地位
==============
标识值
1 等待
2 批准
3 其他
```

```
用户
=====================
id 名称 status_id
1 鲍比 3
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:58:20.487

创建另一个名为

具有 2 个字段 id INT Primary Auto Increment name varchar(30) 的状态。

通过整数在用户表中添加您的状态并使用 JOIN 引用它们。

您还可以将 users 表中的状态更改为 status_id，这样会更有意义。

IMO这是最合适的方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T17:55:24.123

整数更小。您的应用程序可以将整数翻译成多种语言等。

整数好。

查看[ENUM](http://dev.mysql.com/doc/refman/5.0/en/enum.html)。如果没有，请确保您使用的是[正确大小的 integer](http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html#integer-types)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T17:55:35.983

一般来说，将这些项目存储为文本，除非：

*   您将搜索它们：字符搜索比数字（整数）搜索花费的时间更长且成本更高
*   您将需要对它们进行“数学运算”（求和、平均值、标准偏差等）：转换/转换为数字，执行计算，然后对结果进行处理非常耗时）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T17:55:47.337

使用带有单独查找表的数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T17:56:16.533

整数字段比 varchar 字段使用更少的内存空间，因此将“状态”选项存储为数字将略微减少内存使用量。

我建议将“状态”存储在一个整数中，并在必要时将其转换为外部的相应值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-17T17:56:47.683

我认为它们应该按原样存储：**枚举**！

例子：

```
status ENUM('waiting', 'approved', 'other') DEFAULT 'other' 
```

# javascript - jQuery AnythingSlider - 初始设置后更改属性

> ID：12464645
> 
> 赞同：3
> 
> 时间：2012-09-17T17:52:46.280
> 
> 标签：javascript, jquery, anythingslider

如果您在类似这样的页面上设置了任何滑块

```
$('.anythingSlider').anythingSlider({
  easing: "easeInOutExpo",
  autoPlay: true,
  delay: 5000,
  startStopped: false,
  animationTime: 600,
  hashTags: true,
  buildNavigation: true,
  pauseOnHover: true,
  navigationFormatter: formatText
}); 
```

你以后怎么能改变一个单独的属性——比如说`delay=10000`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T23:42:50.533

您可以使用 API 访问这些选项。在最新版本`.anythingSlider`中，它不是初始化 AnySlider 的元素，它最终被命名为`.anythingBase`.

```
$('#slider').data('AnythingSlider').options.delay = 10000; 
```

我将更新[使用 wiki 页面](https://github.com/CSS-Tricks/AnythingSlider/wiki/Usage)以更明确地显示这一点。

# java - 通过 LIKE 在 MySQL 数据库中搜索资源的 Restful 架构

> ID：12464652
> 
> 赞同：0
> 
> 时间：2012-09-17T17:53:22.547
> 
> 标签：java, rest, jersey

基本上我有一个 /orders 资源，我希望用户能够根据不同的条件搜索订单。

假设订单有三列：orderNum、orderDate 和 customerName

现在，如果用户想要查找所有订单号为“手动”的订单，我会执行如下查询

`SELECT * FROM orders WHERE orderNum LIKE '%manual%';`

别担心我使用了参数化语句。我想如果我在正文中接受 x-www-form-urlencoded 指示用户是否要按 orderNum、orderDAte 或 customerName 搜索，我可以添加一个表单参数，但这开始感觉像 REST-RPC。我宁愿以更 RESTful 的方式来做。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:40:15.760

发现这个相关的问题。基本上是同一个问题。如果请求基于不存在的属性搜索对象，我将依赖 SQL 错误，然后通知客户端，提供可能的可搜索属性列表。

[用于搜索的 RESTful URL 设计](https://stackoverflow.com/questions/207477/restful-url-design-for-search)

# arrays - as3 将字符串从数组传递给函数

> ID：12464653
> 
> 赞同：0
> 
> 时间：2012-09-17T17:53:23.097
> 
> 标签：arrays, string, actionscript-3

我有一个空数组，它收集一个从函数中的另一个数组中随机选择的十六进制值。我正在尝试从填充的数组中提取十六进制值并将其传递给另一个函数以随机更改粒子系统的颜色值...

```
private var ca:Array = new Array();
private var rc:String = ca; // pseudo...this is the string that needs to get passed

    public function addCursor(cursor:Cursor):void {

    var cc:Array = new Array("0xFFFF33", "0xFFFFFF", "0x79DCF4", "0xFF3333", "0xFFCC33", "0x99CC33");
    var rcc:String = cc[Math.floor(Math.random() * (cc.length))];
    ca.push(rcc); // 

    trace(rcc + ' 1st array');
    trace(ca + ' 2nd array');
    trace(rc + ' string to pass');

// unrelated stuff happens down here... 
```

第一个和第二个数组都跟踪相同的十六进制值，但我找不到捕获该字符串的正确方法......我尝试了几种不同的方法，它们都返回“null”......这让我觉得这个值可能正在离开阵列之前我试图抓住它？

我删除`ca.pop()`了在稍后的函数中调用的函数，只是为了看看是否`rc`仍会返回 null 并且确实如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:19:57.247

rcc 是一个字符串，而不是一个数组。

所以

```
trace(rcc + ' chosen hex as a string'); 
```

但我不明白为什么你需要一个数组（ca）来保存一个字符串。

这会起作用：

```
private var rc:String;
private var cc:Array = new Array("0xFFFF33", "0xFFFFFF", "0x79DCF4", "0xFF3333", "0xFFCC33", "0x99CC33");

public function addCursor(cursor:Cursor):void {

rc = cc[Math.floor(Math.random() * (cc.length))];

trace(rc + ' the chosen hex');

} 
```

# ruby - 使用 Liquid 标记在 Jekyll 中获取今天的日期

> ID：12464656
> 
> 赞同：71
> 
> 时间：2012-09-17T17:53:46.780
> 
> 标签：ruby, datetime, jekyll, liquid

我认为这（应该）很容易，但我无法使用 Liquid 标记在 Jekyll 页面中显示今天的日期。根据[文档](https://github.com/Shopify/liquid/wiki/Liquid-for-Designers)，我应该能够这样做以获得这个日期的年份：

```
{{ 'now' | date: "%Y" }} 
```

但呈现的只是字符串`now`，而不是任何格式化的日期。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-09-17T20:05:48.657

它也对我不起作用。看来您遇到了 Ruby 1.9.3 支持中的一个当前错误。有一个修复错误的[拉取请求](https://github.com/Shopify/liquid/pull/117)，但尚未合并。列出了一种解决方法，也许它对您有用：

```
{{ site.time | date: '%y' }} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-03T15:50:13.113

要从 获取全年，例如**"2015"**，`site.time`您可以使用：

```
{{ site.time | date: '%Y' }}
# OR
20{{ site.time | date: '%y' }} 
```

要获取 2015 年的最后 2 位数字，这将仅输出**"15"**：

```
{{ site.time | date: '%y' }} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-04T14:43:58.137

也许问题标题具有误导性，但我实际上想要的是今天的日期而不是年份。这对我有用：

```
{{ site.time | date: '%B %d, %Y' }} 
```

今日制作：2019 年 1 月 4 日

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-20T12:21:33.437

`{{ site.time }}`表示网站确实更新的时间，它是固定日期而不是动态日期。

此类请求需要 Javascript`Date.getTime()`或`Date.now()`示例：

```
<script>document.write(Math.round(Date.now() / (365 * 24 * 60 * 60 * 1000) + 1970 - 1));</script> 
```

# math - 为大型系统生成唯一编号

> ID：12464658
> 
> 赞同：0
> 
> 时间：2012-09-17T17:53:48.677
> 
> 标签：math, random, e-commerce, id-generation, purchase-order

我们大多数人都看到，当我们从类似亚马逊的网站上进行购买时，我们会得到一个订单号或购买号（10-12 位数字），它看起来像一些随机数。同样，我想为大型系统生成唯一 ID。生成它的最佳算法是什么？

一些我认为效率不高或不适用于大规模系统的方法

```
1) Generating string using rand function ( Array.new(12){rand(10)}.join) and checking 
   whole table whether it is exists. It is time consuming, inefficient and may struck 
   in infinite loop.
2) Using time-stamp - I think this cannot be used for large scale system because large
   no. user can excess system at same time.
3) Combination of 1) & 2) also creates issue as second when it generates same 1)   
Auto increment : I don't want to use. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:15:23.787

[正常的UUID](http://en.wikipedia.org/wiki/Universally_unique_identifier)不起作用是有原因的吗？它会产生更长的 id，但它很简单，它可以工作，而且大多数语言都内置了生成代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:04:55.267

在这个大型系统中一定有某种数据库，所以在你的数据库中添加一个自动递增的整数。如果某些从未使用过，则无需担心这些唯一整数。

# java - Java 终结器方法和 GC

> ID：12464659
> 
> 赞同：2
> 
> 时间：2012-09-17T17:54:00.960
> 
> 标签：java, garbage-collection, weak-references, finalize

我创建了一个对象，该对象的 finalize 方法已被覆盖，以使用一些信息保存和关闭文件。该对象被另一个对象弱引用。我想在 GC 发生时保存对对象的一些更改。这就是为什么我覆盖了 finalize 的代码。

但是，当对象即将被垃圾回收时，会调用 finalize 方法。这可以在它有资格进行垃圾收集之后的任何时间。

我不想要这个，我想在 GC 发生后立即调用 finalize 方法，并且不应该有任何延迟。我可以设置任何 jvm 选项来实现这一点吗？我只能看到另一种方式是“System.runFinalization()”，但这似乎很俗气？？有没有更优雅的方式？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T18:05:20.870

> 我想在 GC 发生后立即调用 finalize 方法，

你不能不使用我不建议你使用的内部 API。

> 不应该有任何滞后。

总是有滞后。仅关闭文件将花费数毫秒。发生这种情况时应用程序冻结是否可以（因为在 GC 运行时应用程序可能会冻结）

> 有没有更优雅的方式？

如果您想确定性地发生，请在完成资源后关闭它。

# sql - SQL - 聚合分组

> ID：12464663
> 
> 赞同：0
> 
> 时间：2012-09-17T17:54:16.080
> 
> 标签：sql, sql-server-2008, tsql, group-by

我有一个表（TABLE1），列出了所有员工及其部门 ID、他们开始的日期和终止的日期（NULL 表示他们是当前员工）。

我想要一个结果集 (TABLE2) ，其中每一行代表自第一位员工开始工作以来的一天（在下面的示例表中，该日期是 20090101 ），直到今天。（日期字段）。我想按 DeptID 对员工进行分组，并计算 TABLE2 每一行的员工总数。

我该如何查询？感谢您的帮助，提前。

表格1

```
DeptID     EmployeeID   StartDate   EndDate
--------------------------------------------
001        123           20100101   20120101   
001        124           20090101   NULL
001        234           20110101   20120101 
```

表2

```
DeptID       Date      EmployeeCount
-----------------------------------
001          20090101     1
001          20090102     1
...          ...          1
001          20100101     2
001          20100102     2
...          ...          2
001          20110101     3
001          20110102     3
...          ...          3
001          20120101     1
001          20120102     1
001          20120103     1
...          ...          1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:47:59.720

如果您有`date`查找表，这将起作用。您将需要指定部门 ID。看到它在[行动](http://sqlfiddle.com/#!3/91a0a/2)。

**询问**

```
SELECT d.dt, SUM(e.ecount) AS RunningTotal 
FROM dates d
INNER JOIN
  (SELECT b.dt, 
    CASE
      WHEN c.ecount IS NULL THEN 0
      ELSE c.ecount
    END AS ecount
  FROM dates b 
  LEFT JOIN
    (SELECT a.DeptID, a.dt, SUM([count]) AS ecount
    FROM
       (SELECT DeptID, EmployeeID, 1 AS [count], StartDate AS dt FROM TABLE1
        UNION ALL
        SELECT DeptID, EmployeeID, 
          CASE
            WHEN EndDate IS NOT NULL THEN -1
            ELSE 0
          END AS [count], EndDate AS dt FROM TABLE1) a
    WHERE a.dt IS NOT NULL AND DeptID = 1
    GROUP BY a.DeptID, a.dt) c ON c.dt = b.dt) e ON e.dt <= d.dt
GROUP BY d.dt 
```

**结果**

```
| DT | 运行总计 |
-----------------------------------------
| 2009-01-01 | 1 |
| 2009-02-01 | 1 |
| 2009-03-01 | 1 |
| 2009-04-01 | 1 |
| 2009-05-01 | 1 |
| 2009-06-01 | 1 |
| 2009-07-01 | 1 |
| 2009-08-01 | 1 |
| 2009-09-01 | 1 |
| 2009-10-01 | 1 |
| 2009-11-01 | 1 |
| 2009-12-01 | 1 |
| 2010-01-01 | 2 |
| 2010-02-01 | 2 |
| 2010-03-01 | 2 |
| 2010-04-01 | 2 |
| 2010-05-01 | 2 |
| 2010-06-01 | 2 |
| 2010-07-01 | 2 |
| 2010-08-01 | 2 |
| 2010-09-01 | 2 |
| 2010-10-01 | 2 |
| 2010-11-01 | 2 |
| 2010-12-01 | 2 |
| 2011-01-01 | 3 |
| 2011-02-01 | 3 |
| 2011-03-01 | 3 |
| 2011-04-01 | 3 |
| 2011-05-01 | 3 |
| 2011-06-01 | 3 |
| 2011-07-01 | 3 |
| 2011-08-01 | 3 |
| 2011-09-01 | 3 |
| 2011-10-01 | 3 |
| 2011-11-01 | 3 |
| 2011-12-01 | 3 |
| 2012-01-01 | 1 |
```

**架构**

```
CREATE TABLE TABLE1 (
  DeptID tinyint,
  EmployeeID tinyint,
  StartDate date,
  EndDate date)

INSERT INTO TABLE1 VALUES 
(1, 123, '2010-01-01', '2012-01-01'),
(1, 124, '2009-01-01', NULL),
(1, 234, '2011-01-01', '2012-01-01')

CREATE TABLE dates (
  dt date)

INSERT INTO dates VALUES 
('2009-01-01'), ('2009-02-01'), ('2009-03-01'), ('2009-04-01'), ('2009-05-01'), 
('2009-06-01'), ('2009-07-01'), ('2009-08-01'), ('2009-09-01'), ('2009-10-01'), 
('2009-11-01'), ('2009-12-01'), ('2010-01-01'), ('2010-02-01'), ('2010-03-01'), 
('2010-04-01'), ('2010-05-01'), ('2010-06-01'), ('2010-07-01'), ('2010-08-01'), 
('2010-09-01'), ('2010-10-01'), ('2010-11-01'), ('2010-12-01'), ('2011-01-01'), 
('2011-02-01'), ('2011-03-01'), ('2011-04-01'), ('2011-05-01'), ('2011-06-01'), 
('2011-07-01'), ('2011-08-01'), ('2011-09-01'), ('2011-10-01'), ('2011-11-01'), 
('2011-12-01'), ('2012-01-01') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:39:07.077

你需要这些方面的东西。

```
SELECT  *
      , ( SELECT    COUNT(EmployeeID) AS EmployeeCount 
          FROM      TABLE1 AS f
          WHERE     t.[Date] BETWEEN f.BeginDate AND f.EndDate
        )
FROM    ( SELECT    DeptID
                  , BeginDate AS [Date]
          FROM      TABLE1
          UNION
          SELECT    DeptID
                  , EndDate AS [Date]
          FROM      TABLE1
        ) AS t 
```

**编辑**，因为 OP 澄清说他希望这里的所有日期都是更新的解决方案，如果他的工作在那个日期结束，我已经从计数中排除了一个员工。但是如果你想在下面的解决方案中包含`t.[Date] < f.EndDate` 更改`t.[Date] <= f.EndDate`。另外，我假设`NULL`EndDate 中的值意味着员工仍然为部门工作。

```
DECLARE @StartDate DATE = (SELECT MIN(StartDate) FROM Table1)
       ,@EndDate DATE = (SELECT MAX(EndDate) FROM Table1)

;WITH CTE AS 
(
SELECT DISTINCT DeptID,@StartDate AS [Date] FROM Table1
UNION ALL
SELECT c.DeptID, DATEADD(dd,1,c.[Date]) AS [Date] FROM CTE AS c
WHERE c.[Date]<=@EndDate
)
SELECT  * ,
        EmployeeCount=( SELECT    COUNT(EmployeeID) 
          FROM      TABLE1 AS f
          WHERE     f.DeptID=t.DeptID AND  t.[Date] >= f.StartDate
                    AND ( t.[Date] < f.EndDate OR f.EndDate IS NULL )
        )
FROM    CTE AS t
ORDER BY 1
OPTION  ( MAXRECURSION 0 ) 
```

这是 SQL Fiddler 演示。我添加了另一个部门并添加了一个员工。

[http://sqlfiddle.com/#!3/5c4ec/1](http://sqlfiddle.com/#!3/5c4ec/1)

# c# - box-api文件上传超时

> ID：12464666
> 
> 赞同：0
> 
> 时间：2012-09-17T17:54:26.920
> 
> 标签：c#, asp.net, .net, box-api

几天来我一直在与这个上传问题作斗争，并在论坛上搜索了一个好的答案，但还没有看到。我正在使用 asp.net，当我尝试发布要上传的文件时，我目前收到超时。我从 V1 C# Api 中获取了 MultipartWebRequest 类并对其进行了更改（我相信是正确的，但它可能是我的问题）以使用我的程序。

```
public sealed class MultipartWebRequest
{
    public string AcceptCharset { get; set; }
    public string AcceptEncoding { get; set; }
    public string Url { get; set; }
    public string Boundary { get; set; }
    public string ApiKey { get; private set; }
    public string Token { get; private set; }

    public MultipartWebRequest(string apiKey, string token, string submitUrl,string acceptCharset = "ISO-8859-1", string acceptEncoding = "gzip,deflate" )
    {
        Boundary = "----------------" + DateTime.Now.Ticks;
        ApiKey = apiKey;
        Token = token;
        Url = submitUrl;
        AcceptCharset = acceptCharset;
        AcceptEncoding = acceptEncoding;
    }

    public string SubmitFiles(
                    //string[] filePaths,
                    UploadableFile[] files,
                    bool isShared,
                    string message,
                    string[] emailsToNotify,
                    string folderId)
    {
        byte[] buffer;

        using (MemoryStream resultStream = new MemoryStream())
        {
            if (files != null)
            {
                buffer = AssembleFilesBlock(files, folderId);
                resultStream.Write(buffer, 0, buffer.Length);
            }

            if (!string.IsNullOrEmpty(message))
            {
                buffer = AssembleMessageBlock(message);
                resultStream.Write(buffer, 0, buffer.Length);
            }

            //buffer = AssembleSharedBlock(isShared);
            //resultStream.Write(buffer, 0, buffer.Length);

            if (emailsToNotify != null)
            {
                buffer = AssembleEmailsBlock(emailsToNotify);
                resultStream.Write(buffer, 0, buffer.Length);
            }

            buffer = GetFormattedBoundary(true);
            resultStream.Write(buffer, 0, buffer.Length);

            resultStream.Flush();
            buffer = resultStream.ToArray();
        }

        HttpWebRequest myRequest = CreateRequest(buffer.Length);

        using (Stream stream = myRequest.GetRequestStream())
        {
            stream.Write(buffer, 0, buffer.Length);
            stream.Close();
        }

        string response;

        using (HttpWebResponse myHttpWebResponse = (HttpWebResponse)myRequest.GetResponse())
        using (Stream responseStream = myHttpWebResponse.GetResponseStream())
        {
            StreamReader reader = new StreamReader(responseStream);
            response = reader.ReadToEnd();
            responseStream.Close();
        }
        myHttpWebResponse.Close();
        return response;
    }

    private byte[] GetFormattedBoundary(bool isEndBoundary)
    {
        string template = isEndBoundary ? "--{0}--{1}" : "--{0}{1}";
        return Encoding.ASCII.GetBytes(string.Format(template, Boundary, Environment.NewLine));
    }

    private byte[] AssembleEmailsBlock(string[] emailsToNotify)
    {
        return new byte[1];
    }

    private byte[] AssembleSharedBlock(bool isShared)
    {
        byte[] boundaryContent = GetFormattedBoundary(false);
        return new byte[1];
    }

    private byte[] AssembleMessageBlock(string message)
    {
        return new byte[1];
    }

    private byte[] AssembleFilesBlock(UploadableFile[] files, string folderId)
    {
        byte[] buffer = null;

        using (MemoryStream resultStream = new MemoryStream())
        {
            for (int i = 0; i < files.Length ; i++)
            {
                buffer = GetFormattedBoundary(false);
                resultStream.Write(buffer, 0, buffer.Length);

                buffer = AssembleFile(files[i]);
                resultStream.Write(buffer, 0, buffer.Length);
            }

            buffer = GetFormattedBoundary(false);
            resultStream.Write(buffer, 0, buffer.Length);

            buffer = AssembleStringValue("folder_id", folderId);
            resultStream.Write(buffer, 0, buffer.Length);

            resultStream.Flush();
            buffer = resultStream.ToArray();
        }
        return buffer;
    }

    private byte[] AssembleStringValue(string paramName, string paramValue)
    {
        StringBuilder result = new StringBuilder();

        result.AppendFormat("Content-Disposition: form-data; name=\"{0}\"{1}", paramName, Environment.NewLine);
        result.AppendLine();
        result.AppendLine(paramValue);

        return Encoding.ASCII.GetBytes(result.ToString());
    }

    private byte[] AssembleFile(UploadableFile file)
    {
        byte[] buffer;
        using (MemoryStream resultStream = new MemoryStream())
        {
            buffer = Encoding.ASCII.GetBytes(string.Format("Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"{2}", Guid.NewGuid(), file.FileName, Environment.NewLine));

            resultStream.Write(buffer, 0, buffer.Length);

            buffer = Encoding.ASCII.GetBytes("Content-Type: application/octet-stream" + Environment.NewLine + Environment.NewLine);
            resultStream.Write(buffer, 0, buffer.Length);

            buffer = Encoding.ASCII.GetBytes(file.FileContents);
            //buffer = File.ReadAllBytes(filePath);

            resultStream.Write(buffer, 0, buffer.Length);

            buffer = Encoding.ASCII.GetBytes(Environment.NewLine);
            resultStream.Write(buffer, 0, buffer.Length);

            resultStream.Flush();
            buffer = resultStream.ToArray();
        }
        return buffer;
    }

    private HttpWebRequest CreateRequest(long contentLength)
    {
        HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(Url);
        webRequest.Method = "POST";
        //webRequest.AllowWriteStreamBuffering = true;
        webRequest.ContentType = string.Concat("multipart/form-data;boundary=", Boundary);
        webRequest.Headers.Add("Authorization", "BoxAuth api_key=" + ApiKey + "&auth_token=" + Token);
        webRequest.Headers.Add("Accept-Encoding", AcceptEncoding);
        webRequest.Headers.Add("Accept-Charset", AcceptCharset);
        webRequest.ContentLength = contentLength;
        webRequest.ServicePoint.ConnectionLeaseTimeout = 0;

        return webRequest;
    }
} 
```

这是我的默认asp.net页面...这主要只是一个测试页面。我可以获取请求并登录并获取令牌和文件夹以及其他所有内容。

```
public partial class _Default : System.Web.UI.Page
{
    public const string APIKEY = "{APIKEY}";
    public const string AUTH_STRING = "https://www.box.com/api/1.0/auth/";
    public const string GET_TOKEN_STRING = "https://www.box.com/api/1.0/rest?action=get_auth_token&api_key={0}&ticket={1}";
    public const string BASE_URL = "https://api.box.com/2.0/";

    public string ticket = "";
    public string token = "";
    public string login = "";

    public BoxUser boxUser;

    HttpContext http;

    protected void Page_Load(object sender, EventArgs e)
    {
        http = HttpContext.Current;
        ticket = http.Request["ticket"];
        token = http.Request["auth_token"];
        login = http.Request["login"];
    }

    protected void btnBoxLogin_Click(object sender, EventArgs e)
    {
        string bURL = "https://www.box.com/api/1.0/rest?action=get_ticket&api_key=" + APIKEY;
        HttpWebRequest wGetUrl = (HttpWebRequest)WebRequest.Create(bURL);
        wGetUrl.ServicePoint.ConnectionLeaseTimeout = 0;

        WebResponse response = wGetUrl.GetResponse();
        Stream stream = response.GetResponseStream();

        StreamReader reader = new StreamReader(stream);

        if (reader != null)
        {
            string xmlString = "";
            string tmpString = reader.ReadLine();
            while (tmpString != null)
            {
                xmlString += tmpString;
                tmpString = reader.ReadLine();
            }

            //txtResponse.Text = xmlString;
            GetResponseTicket(xmlString);
        }

        if(ticket != "")
            txtResponse.Text = "\nThe Ticket returned is: " + ticket;
        response.Close();
        stream.Close();
        Response.Redirect(AUTH_STRING + ticket, false);
    }

    protected void btnGetAuthToken_Click(object sender, EventArgs e)
    {
        string bURL = "https://www.box.com/api/1.0/rest?action=get_auth_token&api_key="+APIKEY+"&ticket=" + ticket;
        HttpWebRequest wGetUrl = (HttpWebRequest)WebRequest.Create(bURL);
        wGetUrl.ServicePoint.ConnectionLeaseTimeout = 0;

        WebResponse response = wGetUrl.GetResponse();

        Stream stream = response.GetResponseStream();

        StreamReader reader = new StreamReader(stream);
        if (reader != null)
        {
            string xmlString = "";
            string tmpString = reader.ReadLine();
            while (tmpString != null)
            {
                xmlString += tmpString;
                tmpString = reader.ReadLine();
            }

            //txtResponse.Text = xmlString;
            GetResponseUser(xmlString);
        }
        //txtResponse.Text += token + "\n";
        //txtResponse.Text += login;
        response.Close();
        reader.Close();
        stream.Close();
    }

    protected void btnGetUserFolderInfo_Click(object sender, EventArgs e)
    {
        string usersUrl = "folders/0/items";
        string url = BASE_URL + usersUrl;
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.Headers.Add("Authorization", "BoxAuth api_key=" + APIKEY + "&auth_token=" + token);
        request.ServicePoint.ConnectionLeaseTimeout = 0;

        WebResponse response = request.GetResponse();

        Stream stream = response.GetResponseStream();
        StreamReader reader = new StreamReader(stream);

        JavaScriptSerializer js = new JavaScriptSerializer();
        object o = js.DeserializeObject(reader.ReadLine());

        if (reader != null)
        {
            string txt = reader.ReadLine();
            txtResponse.Text += "\n" + txt;
            while (!reader.EndOfStream)
            {
                txt = reader.ReadToEnd();
                txtResponse.Text += "\n" + txt;
            }
        }
        stream.Close();
        response.Close();
        reader.Close();
    }

    private void GetResponseTicket(string xmlString)
    {
        using (XmlReader reader = XmlReader.Create(new StringReader(xmlString)))
        {
            reader.ReadToFollowing("status");
            string status = reader.ReadElementContentAsString();

            if (status != null && status == "get_ticket_ok")
            {
                ticket = reader.ReadElementContentAsString();
                if (String.IsNullOrEmpty(ticket))
                    throw new Exception("Ticket was empty");
            }
            else
                throw new Exception("For some reason Status was null or not right");
        }
    }

    private void GetResponseUser(string xmlString)
    {
        XmlDocument doc = new XmlDocument();
        doc.LoadXml(xmlString);
        XmlNode root = doc.DocumentElement;
        XmlNode user = root.LastChild;
        //XmlNamespaceManager xmlns = new XmlNamespaceManager(doc.NameTable);

        //XmlNode node = root.SelectSingleNode(login).InnerText

        string login = user.SelectSingleNode("login").InnerText;
        string email = user.SelectSingleNode("email").InnerText;
        string access_id = user.SelectSingleNode("access_id").InnerText;
        string user_id = user.SelectSingleNode("user_id").InnerText;
        long space_amount = long.Parse(user.SelectSingleNode("space_amount").InnerText);
        long space_used = long.Parse(user.SelectSingleNode("space_used").InnerText);
        long max_upload_size = long.Parse(user.SelectSingleNode("max_upload_size").InnerText);

        boxUser = new BoxUser(login, email, access_id, user_id, space_amount, space_used, max_upload_size);
    }

    protected void CreateNewFolder_Click(object sender, EventArgs e)
    {
        string url = BASE_URL + "folders/389813359";

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.Headers.Add("Authorization", "BoxAuth api_key=" + APIKEY + "&auth_token=" + token);
        request.Method = "POST";
        request.ServicePoint.ConnectionLeaseTimeout = 0;

        ASCIIEncoding encoding = new ASCIIEncoding();
        string postData = "{\"name\":\"" + txtNewFolderName.Text+"\"}";
        byte[] data = encoding.GetBytes(postData);

        using (Stream datastream = request.GetRequestStream())
        {
            datastream.Write(data, 0, data.Length);
            datastream.Close();
        }

        WebResponse response = request.GetResponse();
        Console.WriteLine(((HttpWebResponse)response).StatusDescription);

        Stream stream = response.GetResponseStream();

        StreamReader reader = new StreamReader(stream);
        string responseFromServer = reader.ReadToEnd();
        lblResult.Text = responseFromServer;
        reader.Close();
        stream.Close();
        response.Close();
    }

    protected void UploadNewFile_Click(object sender, EventArgs e)
    {
        //string url = BASE_URL + "files/data";
        string url = "https://upload.box.com/api/2.0/" + "files/data";
        //string url = "https://upload.box.com/api/1.0/upload" + token + "/0";
        /*string boundary = "----------------------" + DateTime.Now.Ticks;
        var newLine = Environment.NewLine;
        string propFormat = "--" + boundary + newLine + "Content-Disposition: form-data; {0}={1}" + newLine;

        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
        request.Headers.Add("Authorization", "BoxAuth api_key=" + APIKEY + "&auth_token=" + token);
        request.Method = WebRequestMethods.Http.Post;
        request.ContentType = "multipart/form-data; boundary=" + boundary;

        string fileName = fileUpload.FileName;
        byte[] file = fileUpload.FileBytes;

        using (Stream stream = request.GetRequestStream())
        {
            StreamWriter writer = new StreamWriter(stream);
            string tmp = String.Format(propFormat, fileName, file);

            writer.Write(tmp);
            tmp = String.Format(propFormat, "folder_id", "389813359");
            writer.Write(tmp);
            writer.Write("--" + boundary + "--");
            writer.Flush();
        }

        WebResponse response = request.GetResponse();
        using (Stream resStream = response.GetResponseStream())
        {
            StreamReader reader = new StreamReader(resStream);
            lblResult.Text = reader.ReadToEnd();
        }*/

        Stream stream = fileUpload.PostedFile.InputStream;
        StreamReader reader = new StreamReader(stream);
        string text = reader.ReadToEnd();

        UploadableFile file = new UploadableFile(fileUpload.FileName, text, ".txt");

        UploadableFile[] files = new UploadableFile[1];
        files[0] = new UploadableFile(fileUpload.FileName, text, ".txt"); ;
        MultipartWebRequest myRequest = new MultipartWebRequest(APIKEY,token,url);
        string response = myRequest.SubmitFiles(files, false, null, new string[] { }, "0");
        txtResponse.Text = response;
    }
} 
```

如您所见，我已经尝试了在网站上找到的所有不同的上传网址。对于所有不同的，不确定到底要使用哪一个，但[doc](https://upload.box.com/api/2.0/)似乎是最新的“最”正确的一个？对此的任何帮助将不胜感激，因为我是相当新的（但理解）在 C# 中发布请求，但非常新（从未做过）到 C# 中的多部分表单（或实际上在任何地方）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:40:43.380

API（包括文件上传）的当前推荐 URL 现在似乎是[https://api.box.com/2.0](https://api.box.com/2.0)。您是否尝试过使用该基本 URL？

# android - 你能帮我处理这段代码吗

> ID：12464667
> 
> 赞同：-3
> 
> 时间：2012-09-17T17:54:27.173
> 
> 标签：android, json

我总是对 item.add 和方法设置列表有问题

```
public class WeatherMainActivity extends ListActivity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.weather_main);

        ListView List = (ListView)findViewById(R.id.listView1);
        InputStream is = null;
        String result="";
        //http post
        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://192.168.1.4/www/base_de_donnee_stage/script.php");
            List<NameValuePair> nameValue= new ArrayList<NameValuePair>();
            httppost.setEntity(new UrlEncodedFormEntity(nameValue));

            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        }
        catch(Exception e){
            Log.e("log_tag", "Error in http connection"+e.toString());
        }

        //convert response to string
        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");
            String line="0";

            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
                }

            is.close();
            result=sb.toString();

            }
        catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
        }

        //paring data
        int fd_temp;
        String fd_name;
        String fd_desc;
        try{
            JSONArray jArray = new JSONArray(result);
            JSONObject json_data=null;

        for(int i=0;i<jArray.length();i++){
                json_data = jArray.getJSONObject(i);
                fd_name=json_data.getString("nom_ville");
                fd_temp=json_data.getInt("temperature");
                fd_desc=json_data.getString("description");
                List<NameValuePair> items;
                items.add("la ville:"+fd_name+"la tempurature"+fd_temp+"le climat"+fd_desc);
        }

        }
        catch(JSONException e1){
            Toast.makeText(getBaseContext(), ",hdsjh", Toast.LENGTH_LONG).show();
        }catch (ParseException e1){
            e1.printStackTrace();
        }
    }
private void setuplist(){
        list.setAdapter(new ArrayAdapter<string>(this,android.R.layout.simple_list_item_1,items));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:03:10.407

每当您的应用程序崩溃时，您应该在问题中发布错误，否则我们必须猜测......这些是我看到的问题。（可能还有更多。）

*   `list`不是类变量，所以`setupList()`看不到它。
*   你从不初始化`items`
*   您正在尝试将 a 分配`String`给`NameValuePair`对象
*   A`String`与a有很大不同`string`

更改您的课程以匹配此：

```
public class WeatherMainActivity extends ListActivity {
    // Declare list out here
    ListView list;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.weather_main);

        list = (ListView)findViewById(R.id.listView1);
        // Declare and initialize items here
        List<String> items = new ArrayList<String>();
        ...
    }

    private void setuplist(){
        // String is not string, notice the change I made
        list.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,items));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:04:37.917

看起来您正在尝试将字符串添加到 NameValuePair 变量列表中。

您需要将您的 "la ville:"+fd_name+"la tempurature"+fd_temp+"le climat"+fd_desc 字符串转换为 NameValuePair 变量。

在不知道如何实施的情况下，我无法提供如何做到这一点的建议。

# sql - 特定 id 的最大日期返回值

> ID：12464669
> 
> 赞同：8
> 
> 时间：2012-09-17T17:54:32.213
> 
> 标签：sql, date, max

这是我的 sql server 表

```
ID       Date       Value 
___      ____       _____
3241     9/17/12    5
3241     9/16/12    100
3241     9/15/12    20
4355     9/16/12    12
4355     9/15/12    132
4355     9/14/12    4
1234     9/16/12    45
2236     9/15/12    128
2236     9/14/12    323
2002     9/17/12    45 
```

这似乎应该很容易做到，但我不知道为什么我被卡住了。我只想为每个 id 选择 max(date) 和该 max(date) 处的值。我想忽略所有其他不是每个 id 的 max(date) 的日期。

这是我希望表格看起来的样子：

```
ID       Date       Value 
___      ____       _____
3241     9/17/12    5
4355     9/16/12    12
1234     9/16/12    45
2236     9/15/12    128
2002     9/17/12    45 
```

我尝试使用 max(date) 进行分组，但它没有对任何内容进行分组。我不确定我做错了什么。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-17T17:58:11.423

您可以使用以下内容：

```
select t1.id, t2.mxdate, t1.value
from yourtable t1
inner join
(
  select max(date) mxdate, id
  from yourtable
  group by id
) t2
  on t1.id = t2.id
  and t1.date = t2.mxdate 
```

看[演示](http://rextester.com/AZG53634)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T17:58:37.320

这会给你你需要的东西：

```
SELECT 
    m.ID,
    m.Date,
    m.Value
FROM 
    myTable m
    JOIN (SELECT ID, max(Date) as Date FROM myTable GROUP BY ID) as a
    ON m.ID = a.ID and m.Date = a.Date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-12T23:36:55.383

你还没有指定你的 SQL 实现，但是这样的事情应该可以工作：

请注意，操作并没有特别要求使用 max()，只是为了获取 id，在 max[imum] 日期的值。

TSQL：

```
select top 1 ID, Date, Value from yourtable order by Date DESC; 
```

不是 TSQL，必须支持限制：（未测试。）

```
select ID, Date, Value from yourtable order by Date DESC limit 1,1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-25T17:20:22.740

我用它来避免加入语句

```
WITH table1 
AS (SELECT
  id,
  Date,
  Value,
  ROW_NUMBER() OVER (PARTITION BY id ORDER BY Date DESC) AS rn
FROM yourtable)
SELECT
  *
FROM table1
WHERE rn = 1 
```

# android - 为什么 html5 功能在我的 android 应用程序中不起作用？

> ID：12464670
> 
> 赞同：2
> 
> 时间：2012-09-17T17:54:34.597
> 
> 标签：android, html

我想使用 html 文件，我在部署时就这样做了，它不会锻炼（需要显示输入 html 页面，但在部署时显示网页不可用）！错误消息也不在日志中！请帮助。我在哪里做错了？

```
 public class TestActivity extends Activity {
    /** Called when the activity is first created. */
    WebView webView =null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        webView =(WebView)findViewById(R.id.web);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setWebChromeClient(new WebChromeClient());
        webView.loadUrl("file:///android-assets/www/index.html");

    }
} 
```

这是我的javascript。

```
function sayhello(){
alert("hi", document.getElementById('name'),value);
} 
```

和 html 文件在这里

```
<!DOCTYPE html>
<html>
<head>
<script src="index.js"></script>
</head>
<body>
What is ur name  ?
<input id="name" value="">
<button onclick="sayhello()">say hello</button>
</body>
</head>
</html> 
```

和布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <WebView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/web"
        android:text="@string/hello" 
        />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:35:04.463

你需要使用：

```
file:///android-asset/www/index.html 
```

只要去掉's'

**更新：**

您还可以通过以下方式加载页面：

```
webView.loadDataWithBaseURL(null, html, "text/html", "utf-8",null); 
```

第二个参数是您要加载的页面。

# android - 在 asyncTask 类中实现部分唤醒锁

> ID：12464676
> 
> 赞同：0
> 
> 时间：2012-09-17T17:54:55.227
> 
> 标签：android, android-asynctask, android-wake-lock

我有一个运行很长时间的应用程序。我正在使用 AsyncTask 类来实现它。但是当手机休眠时，异步任务会自动停止。为了停止这种行为，我想在 doInBackgound 启动时实现部分唤醒锁，并在它结束时释放它。

但是，当我在 doInBackground 方法中粘贴以下代码时，getSystemService 会给出错误，即它对于 myclass 类型未定义。

```
 PowerManager pm = (PowerManager)getSystemService(Context.POWER_SERVICE); 
```

你能给我一个解决方法吗..

我想做的是..

```
class doit extends AsyncTask<String, String , Void>
{
@Override
protected Void doInBackground(String... params) 
{
//Achieve Partial Wakelock
//Do long Work
//Release Lock
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:03:38.777

添加一个构造函数并从 Activity 传递 Context 对象

```
Context context;
doit(Context mContext){
    super();
    context = mContext;
} 
```

然后使用

```
 PowerManager pm = (PowerManager)context.getSystemService(Context.POWER_SERVICE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:04:24.147

```
PowerManager pm = (PowerManager)getSystemService(Context.POWER_SERVICE); 
```

行不通，因为`getSystemService()`不是`AsyncTask`. 您需要将您的应用程序`Context`对象传递给您`AsyncTask`，然后执行以下操作，因为`getSystemService()`它是`Context`.

```
PowerManager pm = (PowerManager)mContext.getSystemService(Context.POWER_SERVICE); 
```

# node.js - 从 Geany 运行 node.js 服务器

> ID：12464679
> 
> 赞同：9
> 
> 时间：2012-09-17T17:55:02.730
> 
> 标签：node.js, geany

一个简单的问题：是否可以配置 Geany IDE 以便可以使用“运行”按钮直接从 Geany 运行 Node.js 服务器？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T19:23:02.110

在 JS 文件中，转到`Build > Set Build Commands`，应该有一个 section title `Execute commands`。要用于`node`执行您的文件，请`node "%f"`在“执行”命令文本框中输入：

当您更改此设置时，`.js`您正在编辑的任何文件都将在您点击时在虚拟终端中运行节点`F5`。

如果您想设置整个项目以在给定目录结构中的某处工作时运行服务器，则必须弄乱项目级配置。（我通常不关心的事情）我在这里的解决方案只是为您提供了一种快速执行单个 JS 文件的方法，而无需使用外部终端。

更新：`node "%f"`似乎是遗产，但`nodejs "%f"`有效

# jquery - 来自http的jquery链接或包含在文件夹中？

> ID：12464685
> 
> 赞同：1
> 
> 时间：2012-09-17T17:55:33.473
> 
> 标签：jquery, html, pagespeed

我想问对于像[http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js这样的javascript，哪种做法更好/更快（在加载时间方面）](http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js)

我的网页中有上述脚本，如下所示：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> 
```

将它下载到我的网络文件夹并在本地链接它会更好吗？

```
 <script type="text/javascript" src="jquery.min.js"></script> 
```

此举会影响加载时间吗？这样的 html 编码更好吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:58:04.647

除非你正在做一个离线应用程序，否则从谷歌链接通常会加速你的应用程序，因为它很有可能被缓存在某人的浏览器上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:58:35.053

您可以同时尝试并检查网络检查器工具中网络选项卡下的加载时间。这将告诉您加载某些内容需要多长时间。在我看来，虽然我更愿意不依赖别人的资源。

# php - 在内存中使用 sqlite 进行功能测试

> ID：12464690
> 
> 赞同：2
> 
> 时间：2012-09-17T17:55:41.340
> 
> 标签：php, sqlite, symfony1, doctrine, phpunit

我知道已经存在一些关于此的主题，但我无法得到任何具体答案。

我已经在单元测试中的内存数据库中有：

```
Doctrine_Core::createTablesFromModels(sfConfig::get('sf_lib_dir').'/model');
Doctrine_Core::loadData(sfConfig::get('sf_test_dir').'/phpunit/fixtures'); 
```

但这不适用于功能测试。总是说：`no such table: user.`

但是，如果使用此 StepUp 运行测试：

```
 Doctrine_Core::createTablesFromModels(sfConfig::get('sf_lib_dir').'/model');
    Doctrine_Core::loadData(sfConfig::get('sf_test_dir').'/phpunit/fixtures');
    Doctrine_Core::loadData(sfConfig::get('sf_test_dir').'/phpunit/fixtures'); 
```

将给出一个异常：“Doctrine_Connection_Sqlite_Exception：完整性约束违规：19 列用户名不是唯一的”，这是有道理的，因为用户名必须是唯一的，并且是将数据加载到内存中的 sqlite 数据库中的证明。

我怀疑当浏览器发出请求时，它会在内存中为 SQLite 数据库创建一个新连接，而不是使用 CLI 当前打开的连接。

# javascript - 未知的文本节点

> ID：12464693
> 
> 赞同：3
> 
> 时间：2012-09-17T17:55:50.477
> 
> 标签：javascript, jquery, dom

当我对附加到父 div 的元素执行 console.log 时，怎么会出现一堆回车节点。有没有办法删除它，因为当我尝试向它们添加一些 css 时，它们会破坏应用程序。

这是我的设置。我正在使用下划线模板来创建我的 html。tmpl 一切正常。

```
 var tmpl = $( template({items : list}) );

    var items = $(_.filter(tmpl, function(item){ 
        return ! $item.hasClass('pin'); 
    }));

    var domItems = items.appendTo($('.container')); 
```

这是日志

```
domItems = 

[<TextNode textContent="\n          \n              ">, div.item, <TextNode textContent="\n         \n              ">, div.item, <TextNode textContent="\n         \n              ">, div.item, <TextNode textContent="\n         \n              ">, div.item, <TextNode textContent="\n         \n              ">, div.item, <TextNode textContent="\n         \n              ">, div.item, <TextNode textContent="\n         \n              ">, div.item, <TextNode textContent="\n         \n              ">, div.item, <TextNode textContent="\n         \n              ">, <TextNode textContent="\n           \n              ">, div.item, <TextNode textContent="\n         \n              ">, div.item, <TextNode textContent="\n         \n              ">, div.item, <TextNode textContent="\n         \n              ">, div.item, <TextNode textContent="\n         \n              ">, div.item, <TextNode textContent="\n         \n              ">, div.item, <TextNode textContent="\n         \n              ">, div.item, <TextNode textContent="\n         \n              ">, div.item] 
```

我只希望它返回 div.item 元素

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:14:29.210

一些浏览器将空格视为文本节点。要过滤它们，只需排除所有`nodeType`等于`3`( [`Node.TEXT_NODE == 3`](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType)) 的 s：

```
var items = $(_.filter(tmpl, function(item){ 
    return ! $item.hasClass('pin') && this.nodeType !== 3;
})); 
```

# java - 写入随机访问文件

> ID：12464694
> 
> 赞同：1
> 
> 时间：2012-09-17T17:55:53.707
> 
> 标签：java, file, streamwriter

我有一个项目，我必须在其中写入随机访问文件。

我正在阅读一个包含一些信息的国家/地区，包括：身份证、姓名、独立年份等。这些信息是我必须写入文件的内容。

我的问题是：

*   如何测量我在随机访问文件上写入的记录的大小？我知道如何通过：`filewrite.int(variable)`。但是该项目要求我以某种方式对每个字符的书写位置保持恒定的大小。

*   我知道 2 个字节是一个字符，但我怎么能说“我想写这一行（每行是一个带有其信息的国家）所以写从字节 1 到字节 15 的行并具有恒定的大小”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:26:51.667

您可以为每个字段定义固定长度。然后在写出之前格式化您的值。由于每行是固定数量的字符，您可以根据行数确定字节数。

您可以使用 Formatter 类来提供帮助。 [http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html)

具体看一下文档的宽度和精度部分。

看看这样的输出：

```
public static void main(String [] args) {
    Formatter formatter = new Formatter(System.out);
    formatter.format("%5.5s %3.3s %3.3s %3.3s", "012345678901", "b", "c", "d");
} 
```

请记住，如果值大于字段会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:17:46.850

您不必测量记录的大小。在这种情况下，我会说您应该为记录的每个字段定义一个固定长度。这样，您将始终知道记录将持续多长时间。您应该能够使用[RandomAccessFile](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html)。通读该类的文档。如果您想让您的生活更轻松，请为您的特定文件编写一个服务类来包装 RandomAccessFile 方法。

服务类的方法签名示例如下：

```
void writeCountry(int recordNumber, String country) throws IllegalArgumentException; 
```

然后，当您实现此功能时，您将进行一些数学运算来确定要查找的位置以及写入文件的内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-30T04:33:56.603

[阅读更多 Ankit.co](http://ankit.co/tutorials/java-tutorials/input-output/random-access-file-java)

```
import java.io.IOException;
import java.io.RandomAccessFile;

public class RandomAccessDemo 
{
  public static void main(String[] args) 
  {
    try
    {       
      RandomAccessFile raf = new RandomAccessFile("test.txt", "rw");
      raf.writeInt(10);
      raf.writeInt(20);
      raf.writeInt(30);
      raf.writeInt(400);

      raf.seek((3 - 1) * 4);  // For 3rd integer, We are doing 2 * size of Int(4).

      raf.writeInt(99);

      raf.seek(0);   // Going back to start point

      int i = 0;
      while(raf.length()>raf.getFilePointer()) 
      {
        i = raf.readInt();
        System.out.println(i);
      }
      raf.close();
    } 
    catch (Exception e) 
    {
        System.out.println(e);
    }
  }
} 
```

[在ankit.co](http://ankit.co)上查看我关于 Java 中的随机访问文件的帖子

# javascript - 说分配给变量时我的函数未定义

> ID：12464696
> 
> 赞同：2
> 
> 时间：2012-09-17T17:56:05.310
> 
> 标签：javascript, asp.net, html, css

我有个问题。我正在尝试将函数返回值添加到变量中，但它说该函数未定义。这是我的代码。：

```
var selectedExpenseList = getSelectedExpenseIDs(); 
```

这是我的功能：

```
 function getSelectedExpenseIDs() {
            var selectedExpensesList = new Array;
            var i = 0;
            $('.expenseCheckBox:checked').each(function () {
                if ($(this)[0].id !== "checkAllExpenses") {
                    selectedExpensesList[i] = $(this)[0].id.split('_')[1];
                    ++i;
                }
            });
            return selectedExpensesList;
        } 
```

编辑：这是我的全部功能：如果有人检查过，我会尝试从列表中删除某些内容。

```
 var selectedExpenseList;
 function actuallyDeleteTheExpense(canDeleteExpenses) 
 {
     selectedTasksList = getSelectedTaskIDs();
     var deleteTrackers = false, deleteExpenses = false;

     if (canDeleteExpenses && !canDeleteTrackers) 
     {
         $.Zebra_Dialog('Do you wish to remove Expenses?', 
         {
             'type': 'question',
             'title': 'Confirmation',
             'buttons': [
                        {
                            caption: 'Yes', callback: function () {
                                deleteTrackers = false;
                                deleteExpenses = true;
                                doTheDelete(deleteExpenses);
                            }
                        },

                        {
                            caption: 'No',
                            callback: function () {
                                doTheDelete(deleteExpenses);
                            }
                        }
                    ]
         });
     }
            }
            function doTheDelete(doIDeleteExpenses) 
            {
                if (selectedTasksList.length > 0) 
                {
                    $.ajax({
                        type: "POST",
                        //url: "/Tasks/ViewTasks.aspx/deleteTasksAndLinkedItems",
                        url: '<%=ResolveUrl("~/Expenses/ViewExpenses.aspx/deleteSelectedExpense")%>',
                        data: "{ 'TaskIDs': [" + selectedTasksList.join(',') + "], DeleteTrackers : " + doIDeleteTrackers + ", DeleteExpenses : " + doIDeleteExpenses + " }",
                        //fix data
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (data) {
                            var ss = data.d;
                            if (ss.length > 0) {
                                for (var i = 0; i < ss.length; ++i) {
                                    $.noty.consumeAlert({ layout: 'center', type: 'error', dismissQueue: true });
                                    alert(ss[i]);

                                }
                            }
                            $("#viewTasksGrid").flexReload();
                        },
                        error: function (data) {
                            $.noty.consumeAlert({ layout: 'center', type: 'error', dismissQueue: true, modal: true });
                            alert('Error Deleting Tasks');
                            if (window.console) {
                                console.log(data);
                            }
                        }
                    });
                } else {
                    showMessage('No tasks are selected.');
                }
            }
//end delete expense

        function getSelectedExpenseIDs() {
            var selectedExpensesList = new Array;
            var i = 0;
            $('.expenseCheckBox:checked').each(function () {
                if ($(this)[0].id !== "checkAllExpenses") {
                    selectedExpensesList[i] = $(this)[0].id.split('_')[1];
                    ++i;
                }
            });
            return selectedExpensesList;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:03:13.253

我注意到你的函数代码比你调用它的代码多了一个选项卡。您的函数的范围可能不正确（例如，它在另一个函数内声明，而您从该函数外部调用它）。

如果您的函数以未定义的形式返回，则几乎可以肯定这是一个范围问题。我认为函数本身没有任何问题。

例如：

```
$(document).ready(function () {
    function myFunction() { 
        return 3;
    } 
});

var bob = myFunction(); //Error: myFunction is not defined. 
```

# authentication - 导致重复页面呈现的身份验证

> ID：12464698
> 
> 赞同：0
> 
> 时间：2012-09-17T17:56:25.310
> 
> 标签：authentication, forms-authentication, asp.net-mvc-4

让我试着用英语解释这个:)。

我在 Mvc 中的身份验证遇到问题。我使用我的布局页面登录并显示其他部分视图的内容。我装饰了登录方法，`<AllowAnonymous()> _`让人们登录到页面，在我的 webConfig 中我有以下条目：

```
<authentication mode="Forms">
  <forms loginUrl="~/" timeout="2880" />
</authentication> 
```

发生的事情是当会话到期时，部分视图再次呈现整个页面，我两次获得整个页面（内容内的一个）。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:01:15.013

您可以查看 Phil Haack 的[以下文章](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx) ，该文章说明了一种很好的技术，可让您阻止表单身份验证模块自动重定向到登录页面但返回 401 状态代码。这只能针对 AJAX 请求有条件地完成。由于服务器现在返回 401 状态代码，您可以在客户端 AJAX 调用中检测到它并采取相应措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:38:24.023

感谢答案，但我通过以下帖子解决了我的问题： [C#MVC：如何覆盖配置的身份验证重定向？](https://stackoverflow.com/questions/5519393/c-sharp-mvc-how-to-override-configured-authentication-redirect)

# php - 如何将 php preg_split 与 html 字符串一起使用

> ID：12464699
> 
> 赞同：0
> 
> 时间：2012-09-17T17:56:24.687
> 
> 标签：php, html, regex

我正在尝试解析格式错误的 html 表：

其中有几行是：

```
 Food:</b> Yes<b><br>
  Pool: </b>Beach<b></b><b><br>
  Centre:</b> Yes<b><br> 
```

在使用 Xpath 花了很多时间之后，我认为将上面的文本拆分为行使用`preg_split`并从那里解析可能会更好。

我认为可行的模式使用：

```
<\b><\br>*: <\b> 
```

我的代码如下：

```
$pattern='</b></br>*:</b>';           
$pattern=preg_quote($pattern,'#');
$chars = preg_split($pattern, $output);
print_r($chars); 
```

我收到以下错误：

> 分隔符不能是字母数字或反斜杠

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:01:10.230

尝试这个：

```
$pattern='</b></br>*:</b>';           
$pattern=preg_quote($pattern,'#');
$chars = preg_split('#'.$pattern.'#', $output);
print_r($chars); 
```

该`preg_quote`函数只是使它安全地转义，它实际上并没有为您添加分隔符。

正如其他人肯定会指出的那样，使用正则表达式不是解析 HTML 的好方法 :)

您的正则表达式也不会与您希望的匹配。这是一个可能适用于您输入的版本：

```
$in = " Pool: </b>Beach<b></b><b><br>";
$out = explode(':', strip_tags($in));
$key = trim($out[0]);
$value = trim($out[1]);
echo "$key = $value\n"; 
```

这将删除所有 HTML，然后在冒号上拆分，然后删除任何周围的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:02:22.740

您的模式需要以分隔符开始和结束；`#`如果我没看错的话，看起来你正在使用，所以你应该有`$pattern = '#</b></br>.*:</b>#';`.

另外，你把事情搞混了；`*`不是正则表达式中的简单通配符。如果您的意思是“任意数量的任意字符”，您需要的模式是`.*`. 我已经在上面包含了这个。

# sql - 是否可以防止触发器在事务中运行？

> ID：12464704
> 
> 赞同：5
> 
> 时间：2012-09-17T17:56:56.223
> 
> 标签：sql, sql-server, sql-server-2008

根据几个资源，例如[this](http://support.microsoft.com/kb/274348)，

> 在触发器上下文中执行的查询会自动包装在事务中。如果触发代码中有任何分布式查询，事务会自动提升为分布式事务。

简单的问题 - 有没有办法防止这种行为？我正在寻找一种方法来显式阻止触发器中的代码在事务上下文中运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:07:19.057

如果您尝试执行异步操作以便调用事务不必等待，您可以考虑[Service Broker](http://msdn.microsoft.com/en-us/library/bb522893%28v=sql.100%29.aspx)，它的设计目的就是为了做到这一点 - 触发一些异步任务，并将控制权返回给调用者，而不管交易范围。

另一个想法是不让触发器执行工作，而是将工作项弹出到队列表中，并让后台进程连续运行来处理队列。`inserted`如果您的工作项对/中的数据集进行操作，这不一定很容易做到，`deleted`但如果没有更多上下文，这似乎是一个可行的选择。

我不知道有什么方法可以防止触发器成为调用事务的一部分——事实上这就是重点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:48:02.783

这称为“自治事务”，最简单的实现方式是创建链接服务器以指向原始数据库。

有关可能的解决方案，请参阅[此 MSDN 博客](http://blogs.msdn.com/b/sqlprogrammability/archive/2008/08/22/how-to-create-an-autonomous-transaction-in-sql-server-2008.aspx)。

# javascript - 一键替换两张图片的SRC

> ID：12464708
> 
> 赞同：0
> 
> 时间：2012-09-17T17:57:17.243
> 
> 标签：javascript, image, replace, src

我正在尝试做一些比我习惯的稍微复杂一些的事情，我希望你们能帮我解决这个问题......我正在开发的网站需要这种类型的 Psudo

```
<script>
function FirstPic(){
        document.titlepic.src = document.rep1.src
        return
    }

function SecPic(){
        document.submitpic.src = document.rep2.src
        return
    }
</script>

// Calling Image Replacements
<img style="visibility:hidden;width:0px;height:0px;" name="rep1" src="title2.gif>
<img style="visibility:hidden;width:0px;height:0px;" name="rep2" src="submit2.gif>
// End of Calling Image Replacements

// Output Area
<img src="title.gif" name="titlepic">

<input type="radio" onclick="FirstPic();SecPic();updateProductPrice(this);parent.specs.location='<?php echo $options_item['base_var'] ?>.htm';">

<img src="submit.gif" name="submitpic">
// End of Output Area 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:49:56.947

您只需单击一下即可替换任意数量的图像来源。而一个单一的功能，你不需要每个图像的功能。

# [演示](http://codepen.io/thebabydino/pen/HdfAg)

**HTML**：

```
<img src='source-img-1.jpg' class='s'>
<!-- as many source images as you would like -->
<button id='replace'>Replace</button>
<img src='destination-img-1.jpg' class='d'>
<!-- as many destination images as you have source images --> 
```

**JavaScript**：

```
var r = document.getElementById('replace');

r.addEventListener('click', function(){
  var s = document.querySelectorAll('.s'),
      d = document.querySelectorAll('.d'), 
      l = s.length;
  if(d.length != l) return;
  for(var i = 0; i < l; i++) d[i].src = s[i].src;
}, false); 
```

另外，使用 CSS 样式表，不要使用内联样式。

# c# - SQL Server Compact (WebMatrix) 的 Web 界面添加数据库条目不起作用

> ID：12464713
> 
> 赞同：0
> 
> 时间：2012-09-17T17:57:36.403
> 
> 标签：c#, sql, database, razor, interface

我试图弄清楚我的代码做错了什么（位于下面）。我尝试了几种不同的方法并在线搜索了几种方法，但我似乎无法找出为什么此代码不会将条目添加到我的数据库中。我将 WebMatrix（用于 Web 界面的 cshtml，使用 C#）与 SQL Server Compact 数据库一起使用。我对使用带有数据库的 Web 界面非常陌生。任何帮助深表感谢！

```
@{
    var errorMessage = "";
    var POIName = "";
    var DateLastModified = "";
    var Height = "";
    var Weight = "";
    var HairColor = "";
    var EyeColor = "";
    var DOB = "";
    var SS = "";
    var insertQueryString = "";

if(IsPost)
{
    POIName=Request.Form["POIName"];
    DateLastModified=Request.Form["DateLastModified"];
    Height=Request.Form["Height"];
    Weight=Request.Form["Weight"];
    HairColor=Request.Form["HairColor"];
    EyeColor=Request.Form["EyeColor"];
    DOB=Request.Form["DOB"];
    SS=Request.Form["SS"];

    insertQueryString = "INSERT INTO POITable " + 
    "(POIName, DateLastModified, Height, Weight, HairColor, EyeColor, DOB, SS) " +
    "VALUES (@0, @1, @2, @3, @4, @5, @6, @7)";

    var db = Database.Open("PersonsOfInterest");
    db.Execute(insertQueryString, POIName, DateLastModified, Height, Weight, HairColor, EyeColor, DOB, SS);
    Response.Redirect("~/");
}
}

@RenderPage("~/Shared/HeaderLayout.cshtml")

        <div id="FormHolder">
            <form action="" method="post">
                <table class="formTable">
                    <tr>
                        <td class="upperTable">
                            <span class="oneLine"><label class="upperLabel" for="POIName">POI Name: </label><input type="text" id="POIName" name="POIName" maxlength="50" value=""/></span></br>
                            <span class="oneLine"><label class="upperLabel" for="DateLastModified">Date Last Modified: </label><input type="text" id="DateLastModified" name="DateLastModified" maxlength="10" value="" /></span></br>
                            <span class="oneLine"><label class="upperLabel" for="Height">Height: </label><input type="text" id="Height" name="Height" maxlength="5" value="" /></span></br>
                            <span class="oneLine"><label class="upperLabel" for="Weight">Weight: </label><input type="text" id="Weight" name="Weight" value="" /></span></br>
                            <span class="oneLine"><label class="upperLabel" for="HairColor">Hair Color: </label><input type="text" id="HairColor" name="EyeColor" maxlength="10" value="" /></span></br>
                            <span class="oneLine"><label class="upperLabel" for="EyeColor">Eye Color: </label><input type="text" id="EyeColor" name="EyeColor" maxlength="10" value="" /></span></br>
                            <span class="oneLine"><label class="upperLabel" for="DOB">DOB: </label><input type="text" id="DOB" name="DOB" maxlength="10" value="" /></span></br>
                            <span class="oneLine"><label class="upperLabel" for="SS">SS#: </label><input type="text" id="SS" name="SS" maxlength="11" value="" /></span></br>
                            <span class="oneLine"><label class="upperLabel" for="DL">DL#: </label><input type="text" id="DL" name="DL" maxlength="10" value="" /></span></br>
                            <span class="oneLine"><label class="upperLabel" for="DOC">DOC#: </label><input type="text" id="DOC" name="DOC" maxlength="10" value="" /></span></br>
                            <span class="oneLine"><label class="upperLabel" for="VehicleTag">Vehicle Tag #: </label><input type="text" id="VehicleTag" name="VehicleTag" maxlength="10" value="" /></span></br>
                            <span class="oneLine"><label class="upperLabel" for="FBI">FBI#: </label><input type="text" id="FBI" name="FBI" maxlength="10" value="" /></span></br>
                            <span class="oneLine"><label class="upperLabel" for="Officer">Officer: </label><input type="text" id="Officer" name="Officer" maxlength="50" value="" /></span></br>
                            <span class="threeLine" style="padding-left: 2px;"><label class="upperLabel" for="AdditionalDescriptors">Additional</br>Descriptors: </label><textarea cols="16" rows="5" id="AdditionalDescriptors" name="AdditionalDescriptors" maxlength="500"></textarea></span></br>
                            <span class="oneLine"><label class="upperLabel" for="HomePhone">Home Phone</br>Number: </label><input type="text" id="HomePhone" name="HomePhone" maxlength="14" value="" /></span></br>
                        </td>
                        <td class="upperTable">
                            <span class="twoLine" style="padding-left: 2px;"><label class="upperLabel" for="Aliases">Aliases: </label><textarea cols="16" rows="3" id="Aliases" name="Aliases" maxlength="500"></textarea></span></br>
                            <span class="threeLine" style="padding-left: 2px;"><label class="upperLabel" for="SourceOfInformation">Source of</br>Information: </label><textarea cols="16" rows="5" id="SourceOfInformation" name="SourceOfInformation" maxlength="500"></textarea></span></br>
                            <span class="threeLine" style="padding-left: 2px;"><label class="upperLabel" for="Address">Address: </label><textarea cols="16" rows="5" id="Address" name="Address" maxlength="500"></textarea></span></br>
                            <span class="threeLine" style="padding-left: 2px;"><label class="upperLabel" for="AddressInformation">Additional</br>Address</br>Information: </label><textarea cols="16" rows="5" id="AddressInformation" name="AddressInformation" maxlength="500"></textarea></span></br>
                            <span class="twoLine" style="padding-left: 2px;"><label class="upperLabel" for="KnownAssociates">Known</br>Associates: </label><textarea cols="16" rows="3" id="KnownAssociates" name="KnownAssociates" maxlength="500"></textarea></span></br>
                            <span class="threeLine" style="padding-left: 2px;"><label class="upperLabel" for="VehicleDescription">Vehicle</br>Description: </label><textarea cols="16" rows="5" id="VehicleDescription" name="VehicleDescription" maxlength="500"></textarea></span></br>
                            <span class="oneLine"><label class="upperLabel" for="CellPhone">Cell Phone</br>Number: </label><input type="text" id="CellPhone" name="CellPhone" maxlength="14" value="" /></span></br>
                        </td>
                        <td class="upperTable">
                            <span class="mugshot"><label class="upperLabel" for="Mugshot">Mugshot: </label><input type="text" id="Mugshot" name="Mugshot" value="" /></span></br>
                            <span class="threeLine" style="padding-left: 2px;"><label class="upperLabel" for="Comments">Comments: </label><textarea cols="16" rows="5" id="Comments" name="Comments" maxlength="500"></textarea></span></br>
                            <span class="oneLine"><label class="upperLabel" for="WorkPhone">Work Phone</br>Number: </label><input type="text" id="WorkPhone" name="WorkPhone" maxlength="14" value="" /></span></br>
                        </td>
                    </tr>
                </table></br></br>
                <span style="font-size: 3em;">________________________________________________</span></br></br>
                <span class="oneLine" style="padding-left: 450px;"><label for="WeightedAggregate">Weighted Aggregate: </label><input type="text" id="WeightedAggregate" name="WeightedAggregate" readonly="true" value="0" /></span></br></br>
                <table class="formTable">
                    <tr>
                        <td>
                            <ul style="margin-left: -60px;">
                                <li><span class="oneLineBottom" style="color: #f00"><input type="checkbox" id="WAM1" name="WAM" value="1"/><label for="WAM1"> Admits Membership</label></span></li>
                                <li><span class="oneLineBottom" style="color: #f00"><input type="checkbox" id="WAM2" name="WAM" value="2"/><label for="WAM2"> Admits Association</label></span></li>
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM3" name="WAM" value="3"/><label for="WAM3"> Admits Set Affiliation</label></span></li>
                                <li><span class="oneLineBottom" style="color: #f00"><input type="checkbox" id="WAM4" name="WAM" value="4"/><label for="WAM4"> Gang Tattoos or Branded</label></span></li>
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM5" name="WAM" value="5"/><label for="WAM5"> Gang Clothing or Colors</label></span></li>
                            </ul>
                        </td>
                        <td>
                            <ul style="margin-left: -215px;">
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM6" name="WAM" value="6"/><label for="WAM6"> Hand Signs</label></span></li>
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM7" name="WAM" value="7"/><label for="WAM7"> Gang Paraphernalia</label></span></li>
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM8" name="WAM" value="8"/><label for="WAM8"> Consistently Observed/FIR's</label></span></li>
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM9" name="WAM" value="9"/><label for="WAM9"> Observed with Known Members</label></span></li>
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM10" name="WAM" value="10"/><label for="WAM10"> Gang Involved Incidents</label></span></li>
                            </ul>
                        </td>
                        <td>
                            <ul style="margin-left: -175px;">
                                <li><span class="oneLineBottom" style="color: #f00"><input type="checkbox" id="WAM11" name="WAM" value="11"/><label for="WAM11"> Identified by Member as a Gang Member</label></span></li>
                                <li><span class="oneLineBottom" style="color: #f00"><input type="checkbox" id="WAM12" name="WAM" value="12"/><label for="WAM12"> Identified as a Gang Member by Two or More Sources</label></span></li>
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM13" name="WAM" value="13"/><label for="WAM13"> In Photo with Confirmed Gang Member</label></span></li>
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM14" name="WAM" value="14"/><label for="WAM14"> Named as a Gang Member in Gang Correspondence</label></span></li>
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM15" name="WAM" value="15"/><label for="WAM15"> Targeted by Rivals</label></span></li>
                            </ul>
                        </td>
                        <td>
                            <ul style="margin-left: -40px;">
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM16" name="WAM" value="16"/><label for="WAM16"> FIR while Involved in Gang Activity</label></span></li>
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM17" name="WAM" value="17"/><label for="WAM17"> Date Arrested for Violent or Weapon Offense</label></span></li>
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM18" name="WAM" value="18"/><label for="WAM18"> Felony Criminal History</label></span></li>
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM19" name="WAM" value="19"/><label for="WAM19"> Confirmed by Outside Agency</label></span></li>
                                <li><span class="oneLineBottom"><input type="checkbox" id="WAM20" name="WAM" value="20"/><label for="WAM20"> On Roster Produced by Gang Associates</label></span></li>
                            </ul>
                        </td>
                    </tr>
                </table></br></br>
                <table class="formTable">
                    <tr>
                        <td style="vertical-align: middle; color: #0094ff; padding-left: 20px; padding-right: 70px; width: 500px;">
                            <span>An individual should be considered for confirmation as a criminal street gang
                            member when the individual meets the weighted aggregate of at least 20
                            points and is associated with at least one of the above criteria labeled in red.</span>
                        </td>
                        <td style="text-align: center; padding-left: 70px;">
                            <span style="float: left; height: 120px;"><label>Summarized Incidents Supporting Gang Member Criteria: </label></br>
                            <textarea style="width: 500px; height: 90px;" id="SummarizedIncidents" name="SummarizedIncidents" maxlength="1000"></textarea></span></br>
                        </td>
                    </tr>
                </table>
                <span style="font-size: 3em;">________________________________________________</span></br></br>
                <button type="button" class="btn" onclick="location.href='/IntroPage.cshtml'">Dismiss Entry</button>
                <button type="button" class="btn" onclick="location.href=''">Save Entry</button>
            </form>
        </div>
@RenderPage("~/Shared/FooterLayout.cshtml") 
```

我认为您不需要渲染页面中的代码，但如果需要，我会提供它们（它们只是链接、头部部分和一些常见的结束标签，用于为页面制作未来的页脚）。

当我提交表单时，似乎什么都没有发生（除了重新加载页面），但数据库中没有添加条目。再说一次，你必须原谅我，我是新手，所以如果我遗漏了一些非常明显的东西，我很抱歉，但我根本无法找到解决方案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:42:25.170

好的，请允许我回答我自己的问题，因为这可能是我弥补自己因疏忽而陷入此错误并希望为任何可能受益的人提供教训的唯一方法。

我不敢相信我忽略了这一点，但我在表单末尾应用了一个简单的“按钮”元素，而不是明显需要的输入 type="submit" 按钮。这当然不允许实际提交表单。

教训：无论我们编写多少次代码，无论我们完成了一百次的任务是多么一年级，总是有可能出现简单的疏忽，无论是由于疲劳、截止日期还是单纯的疏忽自满。

当所有其他方法都失败时，请再次阅读您的代码，如果必须的话，逐行阅读，因为我们都犯过那些花费我们大量时间的简单错误，并且简单地重新阅读所有代码有时可以导致最快的修复.

感谢任何试图提供帮助的人！

# javascript - 以任一方式包装元素

> ID：12464716
> 
> 赞同：1
> 
> 时间：2012-09-17T17:57:56.760
> 
> 标签：javascript, jquery

```
$('.single-post .post-content').not(':contains(.gallery)').find('.lightbox').wrapAll('<ul class="gallery"><li class="gallery-item">'); 
```

我希望它仅在找不到“画廊”的情况下包装，但无论哪种方式都会包装，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:59:36.627

`contains`选择包含特定文本的元素而不是具有特定元素的元素，您可以改用`:has`选择器：

```
$('.single-post .post-content:not(:has(.gallery)) .lightbox').wrapAll('<ul class="gallery"><li class="gallery-item">'); 
```

# .net - 如何轻松确定引用此对象的内容？

> ID：12464725
> 
> 赞同：0
> 
> 时间：2012-09-17T17:58:27.710
> 
> 标签：.net, serialization, reference

我正在尝试实现一种在我的应用程序中克隆元素的方法。这些元素是我定制和设计的（到目前为止，它们并没有那么复杂）。每个项目都被称为属性`Children`，其中列出了更多实例（将其想象为具有多个子分支的树视图）。

我有一个名为“环境”的对象，其中包含对所有这些孩子的引用。把它想象成一个拥有我所有树木的果园。当我想复制所有内容时，我希望能够在我的“环境”类上调用“克隆”并让它给我所有内容的副本。

这一切都工作了一段时间，但经过一些更改和代码重构后，它似乎不再工作了，我不知道为什么。我可以很好地跟踪堆栈跟踪，但在这种情况下这是不可能的。这是我的错误的屏幕截图。

![在此处输入图像描述](../Images/36267a3535069a8bc5cbb8c764004fdf.png)

我还将使用序列化将我的“环境”实际保存到文件中。然而，在我能做到这一点之前，我必须让序列化工作。

无论如何，我已经分别检查了我的单个树/分支/肢体对象，它们都成功克隆。我似乎唯一无法克隆的是“环境”类（我的果园）。这是我的“环境”类的来源：

```
Imports gE.gEngine
Imports LuaInterface
Imports gE.gEngine.Generic
Imports Microsoft.Xna.Framework
Imports System.Runtime.Serialization
Imports System.IO
Imports System.Runtime.Serialization.Formatters.Binary
Imports gE.gEngine.WorldObjects
Imports System.Windows.Forms
Imports Microsoft.Xna.Framework.Input
Imports System.Threading.Tasks
Imports System.Threading

<Serializable()> _
Public Class Environment

    Public World As WorldServices.World
    Public Players As WorldServices.Players
    Public Lighting As WorldServices.Lighting
    Public Environment As WorldServices.Environment
    Public GenericsLibrary As WorldServices.GenericsLibrary

    <NonSerialized()> _
    Public Lua As New LuaInterface.Lua
    <NonSerialized()> _
    Public SafetyContext As CommonEnum.SafetyContext = CommonEnum.SafetyContext.Safe

    Public Event EnvironmentChanged(ByVal sender As Object, ByVal e As GenericEventArgument)

    Public Sub call_EnvironmentChanged(ByVal sender As Object, ByVal e As GenericEventArgument)
        RaiseEvent EnvironmentChanged(sender, e)
    End Sub

    Public Sub New()
        GlobalShare.Environment = Me
        InitializeLua()

        Lighting = New WorldServices.Lighting()
        World = New WorldServices.World()
        Players = New WorldServices.Players()
        Environment = New WorldServices.Environment()
        GenericsLibrary = New WorldServices.GenericsLibrary()

        Dim ConstraintesGroup As New WorldObjects.Group With {
            .Name = "Constraintes",
            .Parent = GenericsLibrary
        }

        Dim ordsc As List(Of gEngine.WorldObjects.Lua) = Environment.GetScripts()
        ordsc.Sort(Function(x, y) x.RunIndex.CompareTo(y.RunIndex))
        For Each script As gEngine.WorldObjects.Lua In ordsc
            GlobalShare.Environment.RunScript(script.Source, script.Name)
        Next
    End Sub

    Public Sub SetSafetyContext(ByVal e As CommonEnum.SafetyContext)
        If e <> CommonEnum.SafetyContext.Unlocked Then
            SafetyContext = e
            Exit Sub
        End If
        Throw New Exception("Attempt to unlock safety context from unsafe Lua script!")
    End Sub

    Public Sub InitializeLua()
        Lua("Game") = GlobalShare.Game
        Lua("__Environment") = Me
        Lua("gel") = New gELua(Me)
        Lua.RegisterFunction("Print", Lua("gel"), Lua("gel").GetType().GetMethod("Print"))
        Lua.RegisterFunction("print", Lua("gel"), Lua("gel").GetType().GetMethod("Print"))
        Lua.RegisterFunction("SetSafetyContext", Lua("gel"), Me.GetType().GetMethod("SetSafetyContext"))

        Lua("Vector2") = New Lua_.Lua_Vector2
        Lua("Vector3") = New Lua_.Lua_Vector3
        Lua("Mouse") = New Lua_.Lua_Mouse

        Lua.NewTable("Helpers")
        Lua("Helpers.EnumHelper") = New Helpers.EnumHelper

        Dim GameTimer As New Stopwatch
        Lua("Time") = GameTimer
        GameTimer.Start()

        Lua.NewTable("__X")
    End Sub

    Public Function Clone() As Environment
        If [Object].ReferenceEquals(Me, Nothing) Then
            Return Nothing
        End If

        Dim formatter As IFormatter = New BinaryFormatter()
        Dim stream As IO.Stream = New MemoryStream()
        Using stream
            formatter.Serialize(stream, Me)
            stream.Seek(0, SeekOrigin.Begin)
            Return DirectCast(formatter.Deserialize(stream), [Environment])
        End Using
    End Function

    Public Sub RunScript(ByVal scr As String, ByVal name As String)
        Try
            Lua.DoString(scr, name)
        Catch ex As Exception
            Game.CallLogEvent(Me, New GenericEventArgument("LogEvent", "Error", ex.Message))
        End Try
    End Sub

End Class 
```

代码有点乱，因为我并没有因为这个特定问题而对这个特定的类感到非常困惑（我想知道为什么在我继续改变它之前它不会序列化 - 我不想造成任何同时还有更多问题）。

根据错误，它似乎正在尝试序列化我的应用程序窗口（StudioWindow），但是，我在我的应用程序中找不到对它的任何引用。

所以我并不是真的要求你们为我找到参考（据我所知，它可能隐藏在我项目的其他部分深处），但我很想找到一种方法来缩小问题的范围。我一直在评论部分并试图消除我项目的某些部分作为问题，但这有点困难，因为如果没有其他部分运行，我的应用程序的某些方面将无法运行。

任何帮助表示赞赏。如果您想了解更多信息，请询问。我可能会得到你想要的任何信息。我的代码主要是 VB.NET（尽管它是一个混合项目，所以许多其他部分都在 C# 中），因此非常感谢任何 .NET 示例/解决方案/帮助并且同样有帮助（我可以阅读两者，所以不要犹豫）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:51:05.937

您有不同的选项来防止订阅者的序列化。他们每个人都有优点或缺点。根据您的架构和需求：

1.  使用事件的属性。对于事件，需要一个额外的 **“字段”**。在 C# 中：[字段：NonSerialized]。

2.  将事件设置为 null，以在序列化之前删除所有订阅。

3.  有时将所有数据保存在自己的元素中是一个很好的解决方案。保持这个数据对象本身非常简单且易于序列化。如果您采用这种方式，则不必关心您不想序列化的所有字段和委托

4.  实现 ISerializable

# r - 检索R中特定单元格的行名和列名

> ID：12464731
> 
> 赞同：7
> 
> 时间：2012-09-17T17:58:48.663
> 
> 标签：r, dataframe

因此，如果我有一个看起来像这样的数据框：

```
 A     B      C  
  rowname1   4.5   4      3.2
  rowname2   3     23     9 
```

如何让 R 给我包含特定数字的行/列的名称？

即，如果我给出值 3，它会返回

```
 rowname2,A 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-17T18:08:55.227

假设没有重复，您可以`which`与`arr.ind`参数结合使用：

```
df <- data.frame(matrix(sample(1:100,12), ncol=3))
#    X1 X2 X3
# 1  84 58 36
# 2   9 40 92
# 3 100 28 78
# 4  15 98 29

index <- which(df==36, arr.ind=TRUE)
#      row col
# [1,]   1   3 
```

如果您必须拥有该位置的实际行名和列名，则只需适当地对它们进行索引：

```
paste(rownames(df)[index[1]], colnames(df)[index[2]], sep=", ")
# [1] "1, X3" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T18:49:25.543

可能正在编写一个简单的函数可以帮助你：

```
Which.names <- function(DF, value){
   ind <- which(DF==value, arr.ind=TRUE)
   paste(rownames(DF)[ind[1:nrow(ind)]],  colnames(DF)[ind[2]], sep=', ')
}

  DF <- read.table(text="A     B      C  
  rowname1   4.5   4      3.2
  rowname2   3     23     9", header=TRUE)

  Which.names(DF, value=3)
[1] "rowname2, A"

  Which.names(DF, value=4.5)
[1] "rowname1, A"

  Which.names(DF, value=9.0)
[1] "rowname2, C" 
```

它还允许您使用重复值。

```
 DF[1,1] <-3.0 
 Which.names(DF, value=3)
[1] "rowname1, B" "rowname2, B" 

 DF[1,2] <- 3
 Which.names(DF, value=3)
[1] "rowname1, B" "rowname2, B" "rowname1, B" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-29T21:00:26.337

Jilber的回答中的代码有一些问题，需要稍微改动一下，应该是这样的（R版本3.1.2）：

# 两者都有效（注意这两个函数的首字母“W”和“w”之间的区别）

# 第一

```
Which.names <- function(DF, value){
   ind <- which(DF==value, arr.ind=TRUE)
   for (i in 1:nrow(ind)) print(paste(rownames(DF)[ind[i,"row"]],  colnames(DF)[ind[i,"col"]], sep=', '))
} 
```

# 第二个（更好的一个）

```
which.names <- function(DF, value){
   ind <- which(DF==value, arr.ind=TRUE)
   print(paste(rownames(DF)[ind[,"row"]],  colnames(DF)[ind[,"col"]], sep=', '))
} 
```

# 结果在下面

```
> DF <- read.table(text="A     B      C  
+   rowname1   4.5   4      3.2
+   rowname2   3     23     9", header=TRUE)
> DF
           A  B   C
rowname1 4.5  4 3.2
rowname2 3.0 23 9.0
> Which.names(DF,3)
[1] "rowname2, A"
> which.names(DF,3)
[1] "rowname2, A"
> Which.names(DF,4)
[1] "rowname1, B"
> which.names(DF,4)
[1] "rowname1, B"
> Which.names(DF,9)
[1] "rowname2, C"
> which.names(DF,9)
[1] "rowname2, C"
> DF[1,1] <-3.0
> DF
         A  B   C
rowname1 3  4 3.2
rowname2 3 23 9.0
> Which.names(DF,3)
[1] "rowname1, A"
[1] "rowname2, A"
> which.names(DF,3)
[1] "rowname1, A" "rowname2, A"
> DF[1,2] <- 3
> DF
         A  B   C
rowname1 3  3 3.2
rowname2 3 23 9.0
> Which.names(DF,3)
[1] "rowname1, A"
[1] "rowname2, A"
[1] "rowname1, B"
> which.names(DF,3)
[1] "rowname1, A" "rowname2, A" "rowname1, B" 
```

# php - 我的 Firefox 扩展程序未在浏览器上加载

> ID：12464736
> 
> 赞同：0
> 
> 时间：2012-09-17T17:59:01.273
> 
> 标签：php, firefox, firefox-addon

我的 Firefox 扩展程序未在浏览器上加载。

我将它上传到我的服务器，但是当我单击该链接时，它没有加载我的浏览器。我只见过内容代码。

如何将内容类型更改为 application/x-xpinstall ？

[http://www.alisverisbook.com/zamantunelikaldirma/install.php?type=firefox](http://www.alisverisbook.com/zamantunelikaldirma/install.php?type=firefox)

图片：

![](../Images/f8d66f0cd66c2f6829cd1a9b319f83f0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:01:05.907

`Content-type`在将文件内容读取到浏览器之前，在“install.php”中输出一个标题。

```
header("Content-type: application/x-xpinstall"); 
```

# jsp - 当我的本地主机使用 glassfish 时，Netbeans 可以部署到远程 tomcat 服务器吗？

> ID：12464742
> 
> 赞同：3
> 
> 时间：2012-09-17T17:59:36.623
> 
> 标签：jsp, tomcat, netbeans, deployment, glassfish

我正在使用 NetBeans 创建和测试 Web 应用程序，主要是 servlet 和 JSP。虽然目前这只是随机修补或声称不喜欢网络开发的人，但我一直在寻找一些托管选项，以防它变成值得推出的东西（总是很高兴在简历中添加一些东西）。

我在想，当我陷入困境时，Arvixe 看起来很理想（便宜，对开发人员友好，支持 JSP）。

阅读完[这个问题](https://stackoverflow.com/questions/11094125/glassfish-and-tomcat)后，我应该提到我目前使用的唯一东西是标准 servlet、JSP 和 EL。

目前我的项目在 localhost 测试期间使用 Glassfish 作为服务器，但大多数主机（包括 Arvixe）都使用 Apache Tomcat，所以我的问题是：

将使用 Glassfish 开发和测试的应用程序部署（移植？）到运行 Tomcat 的远程计算机上会有多困难？
我应该在尝试之前安装 Tomcat 并交换（在 netbeans 中），还是非常容易？

请原谅我缺乏这方面的知识，我对 Web 开发不是很有经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:30:56.053

不，它不能。它不仅需要与 netbeans 在同一台机器上运行，而且还需要能够启动-停止-重新启动它。

对此我也感到非常抱歉。

# c# - DLL 参考位置

> ID：12464743
> 
> 赞同：4
> 
> 时间：2012-09-17T17:59:40.270
> 
> 标签：c#, dll

好的，我前几天问了[这个问题](https://stackoverflow.com/questions/12431267/where-do-dlls-need-to-be)，由于我的含糊，它被关闭了。我会尝试更具体。在一个项目中，比如 C#（使用 Visual Studio），我添加了对 dll 的引用（右键单击 References->Add Reference），并且所述 dll 的位置在 C:\Blah\Foo 中。现在，如果我将构建的 exe 移动到另一台机器上，dll 的位置是否需要与 exe 一起使用，还是需要在 C:\Blah\Foo 中？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T18:04:47.733

当您以您描述的方式添加引用时，它将被复制到输出文件夹（与 exe 文件相同）。查看引用的属性 (F4)，您将看到一个名为“Copy Local”的选项，如果将其设置为 true，则 DLL 将被复制到与 EXE 文件相同的输出文件夹中。

![复制本地设置](../Images/f6c74ff7865edd51e88f32ccb88d9225.png)

因此，当您将应用程序部署到另一台计算机时，您需要将 exe 及其引用的所有 DLL 复制到部署位置。Windows 将在多个位置搜索 DLL，其中第一个位置与 EXE 文件位于同一文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T18:04:03.677

通常，您只需将程序集放在与应用程序相同的文件夹中，这会导致它位于默认探测路径中，并被找到（对于大多数应用程序），但根据应用程序的类型，还有许多其他选项。当您定义参考时，可以选择“复制本地” - 这会导致程序集被复制到应用程序的输出文件夹。如果将此设置保留为`True`，则程序集 (DLL) 将与 .exe 一起使用，并且通常“正常工作”。

运行时使用的完整过程在 MSDN[如何运行时定位](http://msdn.microsoft.com/en-us/library/aa720133.aspx)程序集中进行了介绍。特别是，标题为“[通过代码库定位程序集”或“探测](http://msdn.microsoft.com/en-us/library/aa720659.aspx)”的主题涵盖了如何详细定位程序集，这取决于很多因素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T18:03:27.123

DLL 应该带有 exe 文件。查看此链接以查看 DLL 的 .NET 搜索[位置 搜索位置以加载引用的 DLL 的顺序是什么？](https://stackoverflow.com/questions/49972/in-what-order-are-locations-searched-to-load-referenced-dlls)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T18:03:55.610

dll 可以安装在 GAC 中，也可以与 EXE 位于同一目录中。

编辑：上面提到的只是解决引用的几个位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T18:04:20.810

添加引用时，您在此程序集上的 csproj 上添加路径，您不必确保您可以引用此 dll。

当您部署时，这是另一个问题，因为您的 dll 被复制到您的`Bin`目录中。

如果部署，请检查 csproj 中的程序集路径，并确保部署程序集

注意：检查`CopyLocal`您的参考属性

2 其他解决方案：

您可以使用`GAC Global Assembly Cache`以共享您的程序集

工具：`Gacutil.exe`为了设置组件

# javascript - 为什么使用jQuery时不能通过window对象访问对象？

> ID：12464749
> 
> 赞同：2
> 
> 时间：2012-09-17T17:59:58.780
> 
> 标签：javascript, jquery, window-object

我正在尝试通过 window 对象访问一个函数。在我的代码中，我的函数被一个字符串引用，所以我必须使用窗口对象（或 eval）来获取它。我用纯 JavaScript 测试了我的代码，它运行良好。但是当使用 jQuery 时它会失败。这是我的测试代码：

```
function speak(words, callback){
  for(var i=0;i<10000;i++){
      console.log(words);
  }
  if(callback)
    callback.call();
}

console.log(window['speak']);​ 
```

[这是一个可以工作的纯 JavaScript 版本的链接。](http://jsfiddle.net/X9YQz/)
[这是一个无法使用的 jQuery 版本的链接。](http://jsfiddle.net/qCnjB/)

**我需要做什么才能在 jQuery 中完成这项工作？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T18:03:37.437

您没有声明`speak`为 的成员`window`，而 JSFiddle 实际上将其包装在`document.ready`回调中。[如果您希望它在object上可用，则](http://jsfiddle.net/qCnjB/1/)[需要将其显式设置`window.speak = speak`为代码的一部分`window`](http://jsfiddle.net/qCnjB/1/)。

或者，您需要将小提琴配置为[在没有包装器的情况下执行，而不是`onDomReady`](http://jsfiddle.net/qCnjB/2/)

# php - 阻止用户在 URL 中输入值

> ID：12464750
> 
> 赞同：0
> 
> 时间：2012-09-17T17:59:59.323
> 
> 标签：php

我有一个基于 codeigniter 的 PHP 网站。它使用模式视图控制器并有文章。每篇文章都有 id 并由 Articles 控制器显示。显示文章后，URL 看起来像**http://localhost/ci/articles/show_article/245**。现在的问题是任何人都可以输入像246 123 222这样的数字并随机查看文章。我对此感到不舒服。我希望读者按照网站中的组织方式进行操作，并希望阻止他们直接从 URL 访问文章。这如何在 PHP / codeigniter 中实现。？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:01:28.923

这是无法做到的。您无法控制用户在 Web 浏览器中键入的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:02:24.400

这样做是不可能的，而且你也没有理由*对此*感到不舒服。您无法阻止客户端请求。我认为任何试图正确使用您的网站（假设设置正确）的人都不会尝试无序浏览文章。

如果你绝对必须这样做，你可以做的就是`_SESSION`为他们访问过的文章设置一个标志，如果他们试图找到一个乱序的文章，则重定向它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T18:07:39.167

您无法控制浏览器区域之外的用户，如果可以的话。你不应该。

或者，您可以通过自己的模式使用编码的文章 ID 来使其不可预测。当收到这些编码的文章 ID 时，将它们解码并相应地显示文章。

# sql - 使用二元列处理 SQL Server 中的缺失值

> ID：12464753
> 
> 赞同：0
> 
> 时间：2012-09-17T18:00:03.397
> 
> 标签：sql, sql-server

我正在使用 构建一个文件，该文件`SSMS`将作为机器学习程序的输入。输出文件将是`SQL Server 2008 R2 Express`数据库中多个表的查询结果。

查询会产生`NULL`一些单元格的值。目前我正在使用该`ISNULL()`函数`'0.00'`在有`NULL`值时插入，但这只是一个临时措施，因为某些值实际上是`'0.00'`这样，这会使计算产生偏差。

原始数据会是什么样子：

```
 id        surveyResponseRate      personResponseRate
 001            .068                      .15
 002            0.00                     NULL
 003            .014                      .03
 004            NULL                      .20
 005            .068                     0.00
 ...             ...                      ... 
```

当前流程创建的内容：

```
 id        surveyResponseRate      personResponseRate
 001            .068                      .15
 002            0.00                     0.00
 003            .014                      .03
 004            0.00                      .20
 005            .068                     0.00
 ...             ...                      ... 
```

我很好奇是否有一种方法可以创建一个二进制列，即`0`该值是否实际`0.00`以及`1`它是否实际上是`0.00`应得的`NULL`值。

我想看到的：

```
 id        surveyResponseRate      personResponseRate  survRRNA      perRRNA
 001            .068                      .15              0            0
 002            0.00                     0.00              0            1
 003            .014                      .03              0            0
 004            0.00                      .20              1            0
 005            .068                     0.00              0            0
 ...             ...                      ...             ...          ... 
```

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:07:23.317

只需将新列的表达式添加到 SELECT 子句中，如下所示：

```
SELECT
  id,
  ISNULL(surveyResponseRate, 0) AS surveyResponseRate,
  ISNULL(personResponseRate, 0) AS personResponseRate,
  **CASE WHEN surveyResponseRate IS NULL THEN 1 ELSE 0 END AS survRRNA,
  CASE WHEN personResponseRate IS NULL THEN 1 ELSE 0 END AS perRRNA**
FROM ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:04:45.343

您可以添加一个存储过程以根据另一个行值分配一个值。但这是在数据库方面，不知道这是不是你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T18:05:20.663

列应该是三态的：NULL、0.00、其他`survRRNA`。`perRRNA`

您可以在这些新列中使用`CASE`语句`SELECT`来实现此目的：

```
CASE 
    WHEN surveyResponseRate IS NULL then 1
    WHEN surveyResponseRate = 0.00 then 0
    ELSE -1
END as 'survRRNA' 
```

# google-maps-api-3 - 当以特定角度给定时，围绕多边形绘制一个矩形

> ID：12464754
> 
> 赞同：0
> 
> 时间：2012-09-17T18:00:07.767
> 
> 标签：google-maps-api-3, geometry, polygon

使用谷歌地图 V3 API

如何在多边形周围绘制一个矩形（它不再是谷歌地图矩形，而是一个矩形多边形）。然而重要的是矩形已围绕某个给定角度旋转。我并不是要先计算多边形坐标的最小值和最大值来绘制一个矩形，然后再旋转它；
![在此处输入图像描述](../Images/6feed0495bc5f36db2845e26276ceac3.png)

这张图片可能是我想要完成的更好的描述。

**我想要完成的是使多边形的边界矩形成一个角度。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:33:30.210

这与寻找一个未旋转的边界框非常相似。

如果您的旋转角度为 alpha，则沿 Ox 和 Oy 获取单位向量，并将它们旋转该角度 alpha 以获得单位向量 X 和 Y。现在您正在寻找关于 X，Y 的边界框。

对于集合中的每个点（由向量表示）P，您可以通过采用点积来获得定向投影：Px = PX 和 Py = PY

如果

```
Mx is the max Px, mx is the min Px.

My is the max Py, my is the min Py. 
```

那么这是你的边界矩形。

我不确定你需要什么表示形式，但说它的顶点是：

```
mx * X + my * Y
mx * X + My * Y
Mx * X + my * Y
Mx * X + My * Y 
```

# sqlite - sqlite vs 共享内存应用程序 vs ipc vs？

> ID：12464755
> 
> 赞同：2
> 
> 时间：2012-09-17T18:00:12.833
> 
> 标签：sqlite, ipc, shared-memory, named-pipes

我什至不确定正确的术语，所以让我从我的目标开始：拥有一个简单的应用程序（“Data Doler”），它只会将大量数据从文件读取到内存中，然后提供服务将该数据切片到名为“Data Lapper”的单个多线程应用程序，或多个 Data Lapper 实例。

Data Doler 只需要启动并读取一次数据块，因此我希望它至少在世界末日之前一直存在。Data Doler 应该坐在那里闲置，等待 Data Lapper(s) 连接并开始请求数据。Data Doler 将始终在具有 > 50 GB 内存的多核计算机上运行。

数据是静态的和只读的，并且它被索引，因此 Data Lapper 需要做的就是给 Data Doler 一个内存地址，它会立即取回所请求的确切数据片段。

Data Doler 可以用任何语言（C、C++、AtariBasic 等）编写。

我有 Data Lapper 的 C 源代码，所以我连接到 Data Doler 的方式是完全开放的。

我已经开始自学 SqlLite、共享内存应用程序、命名管道、ipc 等。但我希望有人可以告诉我应该叫哪棵树，或者我是否如此无能，从而节省我一些时间关于这些东西，我最好呆在门廊上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:15:11.163

可能有一些比自己滚动更简单的解决方案，具体取决于吞吐量和数据保留多长时间。

如果符合您的要求，像[memcached这样的东西会非常好。](http://memcached.org/)它在整个网络上都在使用。

如果您正在手工制作代码解决方案，您可能会考虑[boost interprocess](http://www.boost.org/doc/libs/1_51_0/doc/html/interprocess/sharedmemorybetweenprocesses.html)。对于IPC来说是相当合理的。

# qtp - QTP：使用 ChildItem 方法在 WebTable 中设置 WebEdits 不适用于第一行以外的行

> ID：12464757
> 
> 赞同：0
> 
> 时间：2012-09-17T18:00:23.550
> 
> 标签：qtp

我在 QTP 中使用 Webtable ChildItem 方法来设置 WebEdit 和 WebCheckbox 并且有以下问题

1.  在第一行中，它正确设置了第二列（WebEdit）和第四列（WebCheckbox）的值，但是对于第三列（WebEdit），它设置了值，并且一旦移动到第四列，就会将其重置为旧值。

2.  同样对于第二行开始，它会给出错误

    > 所需对象：'WebTable(...).ChildItem(...)'

请在这件事上指导我。
这是我正在使用的代码：

```
Set objFrame = Browser("Browser").Page("Page").Frame("Frame")
If objFrame.WebTable("WebTable").Exist(0) Then
    rowct = objFrame.WebTable("WebTable").RowCount
isFound = 0

 For i= 2 To rowct
    strText = objFrame.WebTable("WebTable").GetCellData(i,1)
    index = i-2
    If Instr(strText,strType) > 0 Then
        objFrame.WebTable("WebTable").ChildItem(i,2,"WebEdit",index).Set strNumber
    objFrame.WebTable("WebTable").ChildItem(i,3,"WebEdit",index).Set strNumber2
    objFrame.WebTable("WebTable").ChildItem(i,4,"WebCheckBox",index).Set strPreferred

       isFound = 1
   Exit For
 End If
   Next

   If isFound = 0 Then
       rowct = objFrame.WebTable("WebTable").RowCount
   row= rowct + 1
   index = row - 2
   objFrame.WebButton("Button").Click

       objFrame.WebTable("WebTable").ChildItem(row,1,"WebList",index).Select strType
       objFrame.WebTable("WebTable").ChildItem(row,2,"WebEdit",index).Set strNumber
       objFrame.WebTable("WebTable").ChildItem(row,3,"WebEdit",index).Set strNumber2
       objFrame.WebTable("WebTable").ChildItem(row,4,"WebCheckBox",index).Set strPreferred

End If
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:13:35.907

这是您收到错误的原因：

```
For i= 2 To rowct
    strText = objFrame.WebTable("WebTable").GetCellData(i,1)
    index = i-2
    If Instr(strText,strType) > 0 Then
        objFrame.WebTable("WebTable").ChildItem(i,2,"WebEdit",index).Set strNumber
    ... 
```

WebTable 上 ChildItem 方法的第四个参数是该行/列组合上返回的子项（在本例中为 WebEdit）的索引。
那么，发生了什么：在找到的第一个包含内容的行（nr.2）上，索引变为 0，但在 for 循环的第二次迭代中，索引变为 1。QTP 在该行上找不到第二个 WebEdit 对象/列，并将返回错误。

所以，`index = 0`用来解决那个。

对于您的第一个问题，如果您更改顺序会发生什么：首先设置 WebCheckBox，然后设置第二个 WebEdit：

```
objFrame.WebTable("WebTable").ChildItem(i,2,"WebEdit",index).Set strNumber
objFrame.WebTable("WebTable").ChildItem(i,4,"WebCheckBox",index).Set strPreferred
objFrame.WebTable("WebTable").ChildItem(i,3,"WebEdit",index).Set strNumber2 
```

你能告诉现在发生了什么吗？

# ruby - 在 Ruby 中恢复文件下载，范围标头问题

> ID：12464761
> 
> 赞同：0
> 
> 时间：2012-09-17T18:00:35.870
> 
> 标签：ruby, http-headers

在 Ruby 1.8.7 中设置范围标头时，会添加一个额外的“X-REMOVED: Range”标头，这（似乎）会阻止下载恢复工作。

```
size = File.size(local_file)
Net::HTTP.start(domain) do |http|
  headers = { 
    'Range' => "bytes=#{size}-"
  }
  resp = http.get(remote_file, headers)
  open(local_file, "wb") do |file|
    file.write(resp.body)
  end
end 
```

发送的标头：

```
GET /test.zip HTTP/1.1..Host: 192.168.50.1..Accept: */*..X-REMOVED: Range..Range: bytes=481-.... 
```

我也尝试过使用 set_range 得到相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:51:25.440

好吧，这很尴尬。简历不起作用与范围标题无关。只是我用“wb”而不是“ab”打开文件。

# javascript - 依赖于 DOM 的对象内动态变化的变量

> ID：12464763
> 
> 赞同：0
> 
> 时间：2012-09-17T18:00:51.463
> 
> 标签：javascript, dom, object, memory

我想要一个`status`基于 DOM 中存在的元素返回 true/false 的对象。我无法让变量实际保持加载页面状态以外的状态。我的最后一次尝试相当愚蠢，结果是`Maximum call stack size exceeded`，这是意料之中的。有什么方法可以让这些变量随 DOM 改变？

```
var navigation = function runNav(){
  runNav();
  var navigation = {
    globe : {
      element : $("#icons .globe"),
      status : (function(){
        return ($(".window_stable.globe").length == 1) ? true : false;
      })()
    },
    cart : {
      element : $("#icons .cart"),
      status : (function(){
        return ($(".window_stable.cart").length == 1) ? true : false
      })()
    },
    phone : {
      element : $("#icons .phone"),
      status : (function(){
        return ($(".window_stable.phone").length == 1) ? true : false
      })()
    }
  }
  return navigation;
}(); 
```

例子

```
navigation.cart.status
false
-- Enabled the element
navigation.cart.status
false
($(".window_stable.cart").length == 1) ? true : false
true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:12:06.700

`runNav()`您应该在代码开头删除对的调用。它导致无限递归循环。除此之外，您的代码看起来不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:31:13.713

我想我明白你想要做什么。我认为您希望`status`每次访问该`status`属性时都运行您定义的功能。

据我所知，我认为你不能仅仅通过将其作为财产来做到这一点。我认为你需要使它成为一个功能。

像这样：（[jsFiddle](http://jsfiddle.net/bFyaB/)）

```
var navigation = {
    globe: {
        element: $("#icons .globe"),
        getStatus: function() { return ($(".window_stable.globe").length > 0); }
    },
    cart: {
        element: $("#icons .cart"),
        getStatus: function() { return ($(".window_stable.cart").length > 0); }
    },
    phone: {
        element: $("#icons .phone"),
        getStatus: function() { return ($(".window_stable.phone").length > 0); }
    }
};

alert("status = "+ navigation.cart.getStatus()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T18:50:27.563

您看到的问题是因为正在立即设置“状态”属性。因此，如果导航对象在这些元素添加到 DOM 之前被初始化，“状态”将始终为 false。

如果您像访问属性一样无法访问“状态”，则可以使用以下`Object.defineProperty`模式：http: [//jsfiddle.net/TFVFS/](http://jsfiddle.net/TFVFS/)

```
var navigation = (function runNav(){
    var navigation = {
        globe : {
            element : $("#icons .globe")
        },
        cart : {
            element : $("#icons .cart")
        },
        phone : {
            element : $("#icons .phone")
        }
    };

    Object.defineProperty(navigation.globe, "status", {
        get:function(){return $(".window_stable.globe").length == 1 ? true : false;}   
    });
    Object.defineProperty(navigation.cart, "status", {
        get:function(){return $(".window_stable.cart").length == 1 ? true : false;}   
    });
    Object.defineProperty(navigation.phone, "status", {
        get:function(){return $(".window_stable.phone").length == 1 ? true : false;}   
    });
    return navigation;
})();

console.log(navigation.cart.status);
console.log(navigation.globe.status); 
console.log(navigation.phone.status); 
```

这不完全向后兼容，并且在 IE 9 之前的版本中不完全支持。

@Travesty3 的答案将向后兼容，但需要更改语法。就个人而言，如果您需要支持 9 之前的 IE 版本，我会推荐他的答案。

# android - 我的模拟器无法连接到互联网

> ID：12464764
> 
> 赞同：0
> 
> 时间：2012-09-17T18:00:52.590
> 
> 标签：android, android-emulator

我启动了我的模拟器并尝试打开一个网站但我没有连接所以我检查了它的 Wi-Fi 选项并且它已关闭所以我尝试打开它但它没有打开它只是说 ERROR 并且没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:03:23.540

这是模拟器的常见问题。有时，它会以奇怪的状态启动。这只是一个 Android adb 问题。这可能需要几次尝试，但请执行以下操作。

```
Exit the emulator
From the command line execute: adb kill-server
Wait 5 - 10 seconds then execute: adb start-server 
```

您应该看到 adb 服务正在启动的消息。如果没有，请重复 2-3。在一些非常罕见的情况下，我一年只发生两次，你只需要重启你的机器。

# css - 按比例减小 twitter bootstrap 标题大小

> ID：12464773
> 
> 赞同：10
> 
> 时间：2012-09-17T18:01:20.090
> 
> 标签：css, twitter-bootstrap

不确定这是否可能。我认为 Twitter Bootstrap 标题太大了。`h1`是`36px`；`h2`是`30px`，以此类推。

有没有办法按比例减小标题大小？假设我只想要每个标题的 90%。我不想一一声明每个标题的字体大小。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-25T13:31:20.657

我意识到这个线程现在已经超过 18 个月了，但如果有人再次遇到这个问题，最新版本的 Bootstrap (v3.1.1) 在 中设置了所有标题字体大小`less/variables.less`，如下所示：

```
@font-size-h1: floor((@font-size-base * 2.6)); // ~36px
@font-size-h2: floor((@font-size-base * 2.15)); // ~30px
@font-size-h3: ceil((@font-size-base * 1.7)); // ~24px
@font-size-h4: ceil((@font-size-base * 1.25)); // ~18px
@font-size-h5: @font-size-base;
@font-size-h6: ceil((@font-size-base * 0.85)); // ~12px 
```

因此，这只是调整每个乘数以产生影响的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T18:11:19.383

如果可以通过调整 LESS 中的变量来实现，那就太好了，但我不这么认为。

从[variables.less](https://raw.github.com/twitter/bootstrap/master/less/variables.less)：

```
// Typography
// -------------------------
@sansFontFamily:        "Helvetica Neue", Helvetica, Arial, sans-serif;
@serifFontFamily:       Georgia, "Times New Roman", Times, serif;
@monoFontFamily:        Monaco, Menlo, Consolas, "Courier New", monospace;

@baseFontSize:          14px;
@baseFontFamily:        @sansFontFamily;
@baseLineHeight:        20px;
@altFontFamily:         @serifFontFamily;

@headingsFontFamily:    inherit; // empty to use BS default, @baseFontFamily
@headingsFontWeight:    bold;    // instead of browser default, bold
@headingsColor:         inherit; // empty to use BS default, @textColor 
```

因此，您可以通过更改来缩放*所有*`@baseFontSize`文本，但不幸的是没有单独的`@baseHeaderFontSize`. 不过，您总是可以分叉该项目！

**编辑2：**正如@merv 指出的那样，标题大小将基于`@baseFontSize` [2.1.2](http://gist.github.com/3773239)。

**原始编辑：**实际上看起来标题大小是硬编码的：[type.less](https://github.com/twitter/bootstrap/blob/master/less/type.less)：

```
h1 { font-size: 36px; line-height: 40px; }
h2 { font-size: 30px; line-height: 40px; }
h3 { font-size: 24px; line-height: 40px; }
h4 { font-size: 18px; line-height: 20px; }
h5 { font-size: 14px; line-height: 20px; }
h6 { font-size: 12px; line-height: 20px; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T18:03:21.057

给 the 一个类`body`并给出这个 CSS：

```
body.myClass h1,
body.myClass h2,
body.myClass h3,
body.myClass h4,
body.myClass h5,
body.myClass h6 {font-size: 0.9em;} 
```

这为您提供了原始尺寸的 90%。您也可以将其作为`90%`. :)

# asp.net-mvc - 测试 AccountController 的受保护方法

> ID：12464775
> 
> 赞同：1
> 
> 时间：2012-09-17T18:01:21.500
> 
> 标签：asp.net-mvc, unit-testing, tdd, nunit

我正在 asp.net mvc 项目中测试帐户控制器。我测试了所有方法并查看了代码覆盖率结果，我注意到 Initialize 方法没有被覆盖。

我该如何测试这种方法？

```
public class AccountController : Controller
{

    public IFormsAuthenticationService FormsService { get; set; }
    public IMembershipService MembershipService { get; set; }

    protected override void Initialize(RequestContext requestContext)
    {
        if (FormsService == null) { FormsService = new FormsAuthenticationService(); }
        if (MembershipService == null) { MembershipService = new AccountMembershipService(); }

        base.Initialize(requestContext);
    } 
```

我尝试了这种测试方法，但发生了错误。

```
 [TestMethod]
        public void Constructor_ReturnsController()
        {
            RequestContext requestContext = new RequestContext(new MockHttpContext(), new RouteData());
            AccountController controller = new AccountController
            {
                FormsService = null,
                MembershipService = null,
                Url = new UrlHelper(requestContext),
            };

            IController cont = controller;
            cont.Execute(requestContext);
        } 
```

错误信息：

测试方法 MVC3Project.Tests.Controllers.AccountControllerTests+AccountControllerTest.Constructor_ReturnsController 抛出异常：System.NotImplementedException：方法或操作未实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:04:46.433

您需要在单元测试中显式调用它：

```
[TestMethod]
public void AccountController_Initialize_Method_Should_WireUp_Dependencies()
{
    // arrange
    AccountController controller = new AccountController();

    // act
    controller.Initialize(null);

    // assert
    Assert.IsNotNull(controller.FormsService);
    Assert.IsNotNull(controller.MembershipService);
} 
```

请注意，使用该`Initialize`方法设置依赖项是不好的做法。我建议您使用依赖注入：

```
public class AccountController : Controller
{

    public IFormsAuthenticationService FormsService { get; private set; }
    public IMembershipService MembershipService { get; private set; }

    public AccountController(IFormsAuthenticationService formsService, IMembershipService membershipService)
    {
        FormsService = formsService;
        MembershipService = membershipService;
    }

    ... actions
} 
```

现在你可以设置你最喜欢的依赖注入框架来将这些依赖注入到你的控制器中。例如，使用 Ninject 非常简单。安装`Ninject.MVC3`NuGet，然后在生成的`~/App_Start/NinjectWebCommon.cs`文件中配置内核：

```
/// <summary>
/// Load your modules or register your services here!
/// </summary>
/// <param name="kernel">The kernel.</param>
private static void RegisterServices(IKernel kernel)
{
    kernel.Bind<IFormsAuthenticationService>().To<FormsAuthenticationService>();
    kernel.Bind<IMembershipService>().To<AccountMembershipService>();
} 
```

最后，您可以将这些依赖项模拟到您的单元测试中，然后定义对它们的期望。

# c# - 感知图像散列

> ID：12464781
> 
> 赞同：0
> 
> 时间：2012-09-17T18:01:51.930
> 
> 标签：c#, image, hash, ocr

好的。这是（非英语）OCR 项目的一部分。我已经完成了诸如去歪斜、灰度化、字形分割等预处理步骤，现在正停留在最重要的一步：通过将字形与字形图像数据库进行比较来识别字形，因此需要设计一个强大且高效的感知图像哈希算法。

由于许多原因，我需要的函数不会像通用图像比较问题所要求的那样复杂。一方面，我的图像始终是灰度的（如果这使识别任务更容易，甚至是黑白的）。另一方面，这些字形比照片更“以笔划为导向”，结构更简单。

我已经尝试了一些我自己的和一些借来的想法来定义一个好的相似性度量。一种方法是将图像划分为 M x N 单元格的网格，并取每个单元格的平均“黑度”来为该图像创建一个散列，然后取散列的欧几里德距离来比较图像。另一个是在每个字形中找到“角落”，然后比较它们的空间位置。它们都没有被证明是非常强大的。

我知道那里有像 SIFT 和 SURF 这样更强大的候选者，但我有 3 个充分的理由不使用它们。一是我猜它们是专有的（或以某种方式获得专利）并且不能用于商业应用程序。其次，它们是非常通用的，对于我比较简单的图像领域来说可能是一种矫枉过正。第三是没有可用的实现（我使用的是 C#）。我什至尝试将 pHash 库转换为 C#，但仍未成功。

所以我终于来了。有谁知道代码（C# 或 C++ 或 Java 或 VB.NET，但不应该需要任何不能在 .NET 世界中使用的依赖项）、库、算法、方法或想法来创建一个健壮且高效的散列算法，可以经受住轻微的视觉缺陷，如平移、旋转、缩放、模糊、斑点等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:07:54.680

看起来您已经尝试过与此类似的方法，但它可能仍有一些用处：

[https://www.memonic.com/user/aengus/folder/coding/id/1qVeq](https://www.memonic.com/user/aengus/folder/coding/id/1qVeq)

# visual-studio-2010 - VS2010、MSBuild 和环境变量

> ID：12464782
> 
> 赞同：3
> 
> 时间：2012-09-17T18:02:07.743
> 
> 标签：visual-studio-2010, msbuild, environment-variables

我对 MSBuild.exe 和环境变量有疑问。一、开发环境：

代码主要是 C++ 和一些 C#。有超过 5,000 个类、340 个项目和 200 个解决方案排列在一个深度源代码树中。在树的根部和树中的各个其他点都有一个解决方案。我们使用 TFS 并为一系列未来版本维护多个活动分支。每个开发人员都使用本地视图来修改和测试代码。一些开发人员同时在多个分支上工作。有时开发人员会同时从不同的 TFS 分支构建解决方案。

我们使用大约 70 个环境变量来定位共享头文件、库等。在 VS2008 中，我们使用与解决方案文件具有相同基本名称的文件和 .slnenv 的扩展名来定义环境变量。所有变量都是相对于源树的基础定义的。这个 .slnenv 文件由自定义的 VS2008 AddIn 读取，该插件在 VS2008 进程空间中创建环境变量，即

```
 MyProjectDir=$(SolutionDir)\..\..
  MyRoot=$(MyProjectDir)\..\..
  MyInstallDir=$(MyRoot)\Install
  MySourceDir=$(MyRoot)\Source
  MyUnmanagedSourceDir=$(MySourceDir)\My\Unmanaged
  MyIncludeDirs=$(MyProjectDir);$(MyUnmanagedSourceDir) 
```

此插件无法与 VS2010 一起正常工作，因为 MSBuild 不继承加载解决方案后创建的环境变量。

我的问题是如何将这些环境变量添加到 MSBuild？我发现了两种可行的方法，但不如我们一直使用的 AddIn 方便。

VS2010 可以通过命令脚本启动，该脚本首先在进程空间中设置环境变量，然后启动 VS2010。MSBuild 确实继承了这些环境变量。这是不能令人满意的，因为脚本需要针对可以加载解决方案的各个点进行定制。

我尝试的第二种方法是将环境变量定义为属性表和 .vcxproj 文件中的属性。我们有一个所有 .vcxproj 文件都加载的基本属性表。在该属性表中：

```
 <PropertyGroup>
    <MyRoot>$(MyProjectDir)\..\..</MyRoot>
    <MyInstallDir>$(MyRoot)\Install</MyInstallDir>
    <MySourceDir>$(MyRoot)\Source</MySourceDir>
    <MyUnmanagedSourceDir>$(MySourceDir)\My\Unmanaged</MyUnmanagedSourceDir>
    <MyIncludeDirs>$(MyProjectDir);$(MyUnmanagedSourceDir)</MyIncludeDirs>
  </PropertyGroup> 
```

然后我可以在每个 .vcxproj 文件中定义基本目录：

```
 <PropertyGroup>
    <MyProjectDir>..\..</MyProjectDir>
  </PropertyGroup> 
```

此方法使用相对路径名，其中 AddIn 将所有环境变量解析为绝对路径名。我宁愿不必编辑 340 个 .vcxproj 文件，其中“MyProjectDir”的定义会根据项目文件离源根目录的距离而有所不同。到目前为止，我只在一个项目中尝试过这种方法。

我试图修改插件以创建属性而不是环境变量。我尝试使用 ENV2.get_Properties()，但这似乎只适用于 VS2010 中定义的属性，不适用于我定义的属性。

谢谢你，丹·卡里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:23:20.837

在通过电子邮件讨论后，我们知道 Dan​​ 需要什么，下面的消息可以帮助他解决问题。他同意这可能对其他 SO 成员有所帮助：

啊哈，我现在明白了。

正如我从该主题中所理解的那样 - 您确实只需要构建步骤的所有内容（包含子句的路径，用于解决 dll\exe 依赖关系的构建工具的路径），并且没有常规的开发人员活动依赖于它。这很好，因为我们不需要在第一次加载后与 VStudio 争论不重新初始化环境变量。我们只需要以某种方式为大量 proj 文件编辑和实施您的解决方案；）任务变得更加容易：D

小免责声明 - 我正在路上写这篇文章，并且无法访问完全成熟的开发环境来检查和防弹所有进一步的建议，所以请提前为我将犯的任何错误道歉；）

我想提请您注意一些 msbuild 功能：http: [//msdn.microsoft.com/en-us/library/ms164309.aspx](http://msdn.microsoft.com/en-us/library/ms164309.aspx)

您有预定义的属性，可用于所有脚本和项目，看起来这将帮助您解决第一个问题 - 绝对路径而不是相对路径。这是链接的一小部分摘录，以供进一步参考

```
$(MSBuildProjectDirectory) - 
The absolute path of the directory where the project file is located, for example, C:\MyCompany\MyProduct.

$(MSBuildProjectFile) - 
The complete file name of the project file, including the file name extension, for example, 
MyApp.proj.

$(MSBuildProjectExtension)
The file name extension of the project file, including the period, for example, .proj.

$(MSBuildProjectFullPath)
The absolute path and complete file name of the project file, for example, C:\MyCompany\MyProduct\MyApp.proj.

$(MSBuildProjectName)
The file name of the project file without the file name extension, for example, MyApp. 
```

所以你应该能够在你的属性表中使用这个定义的属性。现在，使用 msbuild 4.0 工具集（由根脚本元素上的属性**ToolsVersion=""**定义的工具集）有一个有趣的技巧 **Microsoft.Common.Targets**定义了 2 个变量以在其之前或之后有条件地导入自定义 msbuild 脚本 **CustomBeforeMicrosoftCommonTargets**和**CustomAfterMicrosoftCommonTargets** 你可以使用它以下方式（我认为这可能会帮助您避免编辑所有 proj 文件或至少 - 将编辑减少到非常简化的复制粘贴部分）使用相对路径定义它以包含您的属性表文件

```
<CustomBeforeMicrosoftCommonTargets>$(MSBuildProjectFile)\ConcreteProjectCustomProperties.propz</CustomBeforeMicrosoftCommonTargets> 
```

请注意，**CustomBeforeMicrosoftCommonTargets**应该是全局范围的属性，由所有辅助对象继承

如果你正确定义你的**ConcreteProjectCustomProperties.propz**我认为你可以实现你所需要的。“正确”是您将在其中包含您的全局属性文件（具有相对或绝对路径），然后定义所有项目级属性。

注意：还请注意，稍后定义的属性不可用于参考早期定义您的示例定义**$(MyIncludeDirs)**参考**$(MyProjectDir)**，但**$(MyProjectDir)**稍后声明和定义。这可能是由于“示例”和快速搅动该代码，但如果您在生产中以相同的方式定义您的变量 - 它可能会导致细微的错误。

我希望我能正确解决您的问题，并且我的解释将帮助您快速将所有属性从自定义加载项移动到更简单的原生 msbuild 脚本；）

# php - 在 MVC 中触发事件（特别是在 PHP 中，如果需要）

> ID：12464783
> 
> 赞同：1
> 
> 时间：2012-09-17T18:02:11.923
> 
> 标签：php, python, model-view-controller

   我已经在 SO 上搜索过这个问题，但我基本上没有找到关于这个特定场景的问题；因此，我问的理由。
    我对 MVC 模式有一个基本的、抽象的理解：控制器根据需要的操作调用正确的模型；模型包含实际的业务/数据逻辑，视图显示结果。我无法理解的是实际的实现。
   最初，我的假设是：控制器调用模型；Model处理信息，并将数据**返回**给Controller；控制器调用视图，将此数据传递给视图，视图只是显示它。在阅读了更多关于 MVC 的文章后，我发现 Model 并没有真正将数据传递回 Controller；相反，它**会触发**一个事件，它允许控制器调用正确的视图。
我的问题集中在这个**事件触发**部分：

   Q.1：必须真的触发一个事件吗？一旦Model完成处理，将控制权交还给Controller，Controller就不能简单的调用View吗？
   Q.2：在实际实现中，Model对象被注入到Controller类中。所以，模型对象基本上不知道控制器叫什么。它如何知道向哪个控制器触发事件​​？我们怎么知道 Controller 期待那个通知？
   Q.3：Controller调用View，将当前的Model对象注入到View中，View可以使用它来获取需要的数据。这是正确的还是错误的？如果错了，为什么错了，正确的方法是什么？
   我已经在这里和其他网站上阅读了关于 MVC 的问题，查看了 MVC 图表，但我无法真正按照应该连接的方式连接这些点。
   谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:39:43.073

关于如何将 MVC 上的不同组件链接在一起有很多方法。我认为没有“黄金法则”。

我按照这张图片所示的方式使用它：

![在此处输入图像描述](../Images/2463fab90d1a8d01baea07b50741eaef.png)

对象的创建是这样的：

1.  app 对象根据路由创建一个控制器。路由器被注入到控制器中。
2.  控制器根据路由创建模型。该模型由 IoC 容器创建。
3.  控制器创建一个视图，并将模型注入到视图中。

在我的情况下，我可以这样回答你的问题：

Q1：不，我不使用事件。没有必要。控制器调用模型，完成后模型具有状态，并且可以被视图使用。

Q2：我用另一种方式做，控制器创建模型。该模型不了解控制器或视图。

Q3：这是我实现它的方式。

# caching - 如果一台机器始终处于其物理内存的 85%，是否可以？

> ID：12464786
> 
> 赞同：0
> 
> 时间：2012-09-17T18:02:17.873
> 
> 标签：caching, memory, ram

我不确定这是否是询问硬件的正确地方，但我找不到仅用于监控硬件的子论坛。如果你知道一个，请指导我，我会在那里问。

我正在查看一些前端机器上的物理内存图表，我想知道这是否令人担忧。

![在此处输入图像描述](../Images/f71a89cd8e8f1fb0b2dbb7bce48db51d.png)

物理内存始终超过 80%，可用内存始终很低。缓存的内存也相当高，在任何给定时间只有 40% 可用。没有关于可用内存afaik的信息。

我试过访问前端站点，页面加载时间没有明显的缓慢。登录等大多数操作也不需要很长时间，但最近出现了一些问题。

从谷歌我了解到缓存内存是可以比 RAM 更快使用的内存，看起来还有一点可用内存。因此，我想知道当前的负载是否令人担忧。另外，我不确定为什么内存负载从 29 日到 31 日这一周下降，或者这是否令人担忧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:07:17.200

1.  您需要与了解那里运行的任何应用程序的人交谈，或者（如果它不是专有的）询问有关该应用程序的问题。也许它是故意管理大多数系统内存本身？
2.  这里提到的缓存*是*RAM，它缓存对较慢设备（通常是磁盘）的访问。您的谷歌搜索通过谈论 CPU 缓存使您感到困惑，该缓存内置于处理器中，不会显示在此图表上

如果您没有一些特定的性能问题（观察到的缓慢），这*可能*不是问题。或者这可能意味着您已经满负荷，并且再添加一个用户/客户/小部件/任何会导致完全崩溃的东西。没有更多信息就无法判断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T07:13:22.063

另一种可能性是您在 Windows 中关闭了页面交换，因此正在使用更多的物理内存。

# javascript - 简单的任务（SVG 与 Canvas）

> ID：12464788
> 
> 赞同：0
> 
> 时间：2012-09-17T18:02:19.667
> 
> 标签：javascript, canvas, svg, d3.js, kineticjs

我只想制作 200 个通过线连接的可点击节点（捕获鼠标事件）。每个节点都有一些以实时数据流的形式与它们关联的数据（为简单起见，假设为 CSV），单击节点会显示在图表中绘制的值。

*   所有这些节点和线所在的区域应该是可缩放的。

即使在谷歌上搜索了很多之后，我还是对像这个 SVG 更适合或 Canvas 这样简单的东西感到困惑。此外，什么图书馆最适合这个目的。对于 Canvas，我们有 KineticJS（使用 HTML5），对于 SVG，我们有 d3 等等。

高手，请指教。提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:04:23.070

SVG 在这方面要好得多。Canvas 没有鼠标事件，您将使用拾取技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:33:11.287

这取决于。如果您有与每个节点相关联的复杂视觉效果，如果您将节点光栅化一次，然后克隆并在画布上绘制而不是使用 SVG，它会工作得更快。例如，它可以使用[Paper.js](http://paperjs.org "Paper.js")来完成（并且它对鼠标事件有一些支持）。如果你的节点很简单，比如简单的矩形或其他东西，你可以使用 SVG。有些浏览器使用 SVG 比其他浏览器更高效。例如，IE9 有非常高效的 SVG 支持，所以如果您针对特定浏览器，请先检查它的 SVG 绘制速度。
顺便说一句，如果你想旋转、缩放、移动对象和对象组等，Paper.js 特别有用。它对此有很好的支持。

# javascript - 向 Javascript 函数添加功能

> ID：12464789
> 
> 赞同：0
> 
> 时间：2012-09-17T18:02:19.553
> 
> 标签：javascript

我正在尝试将下拉选择和代码按钮添加到 Javascript 中的 Wordpress 编辑器。

我发现这个网站已经完成了我只是想稍微修改一下代码。您可以在这里看到我在说什么，您可以从下拉列表中选择一种语言，然后单击该站点上的代码按钮。

[http://bililite.com/blog/blogfiles/customeditor.html](http://bililite.com/blog/blogfiles/customeditor.html)

```
jQuery(function ($) {
  edButtons.forEach(function (button, index) {
    if (button.display == 'code') {

      // add language pull down menu
      edButtons[index + 1] = { // insert right after the code button
        html: function (idPrefix) {
          return '<select id="' + idPrefix + 'code_language" data-code-target="' + index + '">' + '<option></option>' + // include a blank option
          '<option>' + languages.join('</option><option>') + '</option>' + '</select>';
        }
      };
    }
  });

  var languages = ['html', 'javascript', 'lisp', 'pdf', 'php', 'vb'];
  $('body').on('change', 'select[data-code-target]', function () {
    var lang = $(this).val();
   // edButtons[$(this).data('code-target')].tagStart = lang ? '<code class="language-' + lang + '" >' : '<code>';
    edButtons[$(this).data('code-target')].tagStart = lang ? '<pre><code data-language="' + lang + '">' : '<pre><code>';
  });
}); 
```

此代码当前插入的代码是这样的，没有从 dropdwon 中选择语言...

```
<code></code> 
```

这是当一种语言被定向的时候...

```
<code data-language="php"></code> 
```

我需要做的就是将其包装在`<pre> the above code here </pre>`标签中。我可以很容易地在上面的代码中添加开始的前置标记，但我无法添加结束标记，我真的可以从更了解 Javascript 的人那里获得一些帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:50:29.647

您应该能够添加与开始标签非常相似的结束标签。尝试这个：

```
edButtons[$(this).data('code-target')].tagEnd = lang ? '</pre></code>' : '</code>'; 
```

# css - 将多个 Div 保持在容器的中心位置。页脚也卡在中间

> ID：12464790
> 
> 赞同：2
> 
> 时间：2012-09-17T18:02:19.873
> 
> 标签：css, image, positioning, html, sticky-footer

我意识到这个问题在这里出现了几次，但我似乎无法找到解决我的具体问题的方法。我目前正在建立一个摄影网站，虽然花了我很长时间，但进展顺利。我通常不会问太多问题，而是寻找答案，但这让我发疯。我对网络建设非常陌生，并认为自己是一个完全的新手。

现在我有一个主要的“照片”页面，它将链接到画廊，在这个页面中，我将有一些带有一些精美 CSS3 效果的大缩略图。

在这个页面中，我创建了 6 个包含这些大缩略图的 div，我需要它们做的是在屏幕缩小时重新定位（或显示在较小的分辨率显示器上等）现在 img 容器实际上在显示在较小的分辨率时重新定位设备，但我正在努力实现的是将 6 个 div 保持在屏幕中间。

我尝试的最后一个解决方案是“display: inline-block” 而且包含的 div 的高度似乎没有随着内容而扩展。我想这里有一点遗漏，所以会很感激任何建议和帮助。

我还没有深入研究页脚问题，但对此的任何帮助也会很棒。问题是它只是位于页面的底部（我虽然很粘）但是现在页面有足够的内容来滚动它只是停留在原处。

非常欢迎对整个网站的任何其他帮助和评论 :o) 非常感谢！

有问题的页面[russfrancis.co.uk/photo](http://www.russfrancis.co.uk/photo)

请参阅以下标记和 CSS：

照片标记：

```
<div class="photomain">
  <div class="containerwrapper">
    <div class="photoimgcontainer">
      <div class="view view-second">
        <img src="images/photo/tn/asialg.jpg" />
      <div class="mask"></div>
      <div class="content">
        <h2>Asia</h2>
        <p>In 2008 I spent 6 months backpacking around Asia.</p>
        <a href="asia.htm" class="info">View The Galleries</a>
      </div> <!-- Content Close -->
      </div> <!-- View-second close -->
    </div> <!-- Img Container Close -->
      <div class="photoimgcontainer">
      </div>
      <div class="photoimgcontainer">
      </div>
      <div class="photoimgcontainer">
      </div>
      <div class="photoimgcontainer">
      </div>
      <div class="photoimgcontainer">
      </div>
    </div> <!-- Container Wrapper Close -->
  </div> 
```

CSS：

```
.photomain{
width: 90%;
height:auto;
margin: 130px auto 0;}

.containerwrapper{
display:inline-block;
height:auto;}

.photoimgcontainer{
background-color:rgba(19,19,19,1);
width: 535px;
height: 360px;
float:left;
margin: 5px 5px;} 
```

页脚标记：

```
<footer>
  <div class="footdiv">
    <p align="center">Follow Me</p> 
    <div class="footimg">
     <a href="https://www.facebook.com/RussFrancisPhotography" target="_blank"><img src="images/facebook.png" width="40" height="40" border="0" alt="RFP Facebook Page"></a>
     <a href="http://www.flickr.com/photos/russfrancisphotography/" target="_blank"><img src="images/flickr.png" width="40" height="40" border="0" alt="Russ Francis Flickr"></a>
     <a href="http://vimeo.com/lucidskies" target="_blank"><img src="images/vimeo.png" width="40" height="40" border="0" alt="Vimeo - Lucid Skies"></a>
     <a href="https://twitter.com/R_F_Photo" target="_blank"><img src="images/twitter.png" width="40" height="40" border="0" alt="Russ Francis - Twitter"></a>
    </div> 
 </div>
 <p class="pleft">&copy; Russ Francis Photography 2012</p>
 <div class="pright"><a href="#">Contact Me</a></div>
</footer> 
```

页脚 CSS：

```
footer {
font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
color:#FFF;
position:absolute;
left: 0;
bottom: 0;
height: 115px;
width: 100%;}

.footdiv p {
padding-bottom: 10px;
border-bottom: 1px solid rgba(153,0,0,1);}

.footdiv {
margin: 0 auto 0;   
width:200px;
height:60px;}

.footimg {
padding-left: 14px;}

.pleft {
padding-left: 10px;
color:#999;
font-size:12px;
float:left;}

.pright {
font-size:15px;
padding-right: 20px;
float:right;}

.pright a {
color:#FFF;
text-decoration:none;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:08:29.087

从页脚中删除`bottom: 0;`将在底部

```
footer {
    color: #FFFFFF;
    font-family: "Trebuchet MS",Arial,Helvetica,sans-serif;
    height: 115px;
    left: 0;
    position: absolute;
    width: 100%;
} 
```

和

```
.containerwrapper {

    height: auto;
    margin: 0 auto;
    max-width: 1100px;
} 
```

并在`<div style="clear:both;"></div>`之前添加`<footer >`

输出不考虑白线，因为有拖曳图像

![在此处输入图像描述](../Images/f897b93d82ae39dfec907ef2d645b242.png) ![在此处输入图像描述](../Images/cb206095ce242221b67676f138d93eb0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:13:14.190

尝试在您的网站上使用此处的 css，看看它是否适合您：[http](http://dabblet.com/gist/3739171) ://dabblet.com/gist/3739171 。

# vba - 运行时错误“1006”：未知

> ID：12464791
> 
> 赞同：1
> 
> 时间：2012-09-17T18:02:20.407
> 
> 标签：vba, ms-access

我在 Microsoft Access 2007 中有一个列表表单，我正在尝试制作一个按钮，该按钮将在其中一个字段中搜索给定的短语。问题是我要搜索的字段是备注字段，我通常希望保持记录排序（按计数字段）。这会将我的备注字段截断为 255 个字符，并使该字段的其余部分无法搜索。因此，在搜索表单的 Form_Open 事件期间，我一直在关闭我正在搜索的表单的“OrderByOn”属性（或将“OrderBy”设置为“”），这似乎正确地取消了我的数据排序并使备忘录字段完全可见。但是，当我尝试搜索时，有时会在到达 FindNext 行时收到错误“Microsoft Visual Basic 运行时错误'1006'：未知”。如果在当前记录和记录集末尾之间的记录的前 255 个字符中找不到搜索词，我想我会收到错误消息。这是搜索表单的代码：

```
 Private Sub Form_Open(Cancel As Integer)
        [Forms]![MyForm]![MySubform].[Form].OrderBy = ""
        '[Forms]![MyForm]![MySubform].[Form].OrderByOn = False
    End Sub

    Private Sub Search_Click()
        Dim vDescription As String
        Dim r As Recordset

        vDescription = ""

        If Me![Description] <> "" Then vDescription = "[MyFieldName] LIKE('*' + '" & Me![Description] & "' + '*')"

        If Not (vDescription = "") Then
            Set r = [Forms]![MyForm]![MySubform].[Form].Recordset
    >       r.FindNext (vDescription)
            If r.NoMatch Then
                r.MoveFirst
                r.FindNext (vDescription)
                If r.NoMatch Then
                    MsgBox ("No match found.")
                    r.MoveFirst
                End If
            End If
        End If
    End Sub 
```

我找不到此错误消息的任何搜索结果，这似乎很奇怪。为什么我会收到错误消息？我是否正确使用了记录集？我应该以不同的方式处理 OrderBy/OrderByOn 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:33:34.540

我不明白你的代码发生了什么。测试这个版本，看看它是否能解决问题。

```
Private Sub Search_Click()
    Dim vDescription As String
    Dim r As DAO.Recordset

    vDescription = vbNullString ' not actually required '

    If Len(Me![Description] & vbNullString) > 0 Then
        vDescription = "[MyFieldName] LIKE '*" & _
            Me![Description] & "*'"
        Debug.Print "vDescription: " & vDescription
        Set r = [Forms]![MyForm]![MySubform].[Form].RecordsetClone
        r.FindNext vDescription
        If r.NoMatch Then
            r.MoveFirst
            r.FindNext vDescription
            If r.NoMatch Then
                MsgBox "No match found."
                r.MoveFirst
            End If
        End If
        Set r = Nothing
    End If 
```

结束子

# ruby-on-rails - 我可以使用相同的 s3 存储桶进行暂存和生产吗？

> ID：12464797
> 
> 赞同：3
> 
> 时间：2012-09-17T18:02:38.710
> 
> 标签：ruby-on-rails, heroku, amazon-s3

利用 s3 的最佳实践是什么

我有一个托管在 Heroku 上的 Rails 应用程序。它通过 Paperclip 在 S3 上存储一些徽标和其他图像。我正在尝试设置暂存环境。我希望分期尽可能接近生产。为此，我计划让登台和生产查看同一个 s3 存储桶。

我在想：

1.  如果这是一个好的做法，或者我是否应该为暂存应用程序复制生产 s3 存储桶。
2.  如果有可能从同一个 s3 存储桶中进行生产和登台。（我只是问，因为我尝试过并且它一直在出错。我不确定它是否与这个或单独的问题有关。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T19:12:53.267

是的，你想要不同的桶。原因很简单，一个资产被上传到 staging 并且数据库中的新 ID 是 10，你的生产应用程序已经有一个 ID 10 的资产......uggh，你可以看到它很快就会变得混乱。

无论是在初始化程序中还是在相关环境文件中，carrierwave 和 paperclick 都支持不同的存储桶名称。

# python - 如何将代理添加到 BeautifulSoup 爬虫

> ID：12464799
> 
> 赞同：4
> 
> 时间：2012-09-17T18:02:49.073
> 
> 标签：python, beautifulsoup, proxy, web-crawler

这些是python爬虫中的定义：

```
from __future__ import with_statement

from eventlet.green import urllib2
import eventlet
import re
import urlparse
from bs4 import BeautifulSoup, SoupStrainer
import sqlite3
import datetime 
```

如何将旋转代理（每个打开线程一个代理）添加到在 BeautifulSoup 上工作的递归 cralwer？

如果我使用 Mechanise 的浏览器，我知道如何添加代理：

```
br = Browser()
br.set_proxies({'http':'http://username:password@proxy:port',
'https':'https://username:password@proxy:port'}) 
```

但我想具体了解 BeautifulSoup 需要什么样的解决方案。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-01-01T16:47:46.753

请注意，现在有一个不太复杂的解决方案可用，[在这里](https://stackoverflow.com/questions/22967084/urllib-request-urlretrieve-with-proxy)共享：

```
import requests

proxies = {"http": "http://10.10.1.10:3128",
           "https": "http://10.10.1.10:1080"}

requests.get("http://example.org", proxies=proxies) 
```

然后从请求响应中照常做你的beautifulsoup。

因此，如果您想要具有不同代理的单独线程，您只需为每个请求调用不同的字典条目（例如，从字典列表中）。

当您现有的包使用已经是 requests / bs4 时，这似乎更直接实施，因为它只是`**kwargs`您现有`requests.get()`调用的额外添加。您不必为每个线程初始化/安装/打开单独的 urllib 处理程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T08:22:54.167

看看 BeautifulSoup 使用 HTTP 代理的例子

[http://monzool.net/blog/2007/10/15/html-parsing-with-beautiful-soup/](http://monzool.net/blog/2007/10/15/html-parsing-with-beautiful-soup/)

# c# - 上传记事本数据并插入SQL数据库

> ID：12464805
> 
> 赞同：0
> 
> 时间：2012-09-17T18:03:18.233
> 
> 标签：c#, notepad

我有近距离阅读器，它给了我这样的数据。这是我公司员工的进出数据。

010：0007739166：20120908：071009：空白!!：11 010：0013646521：20120908：073125：空白！ ：11 010：0013656129：20120908：073136：空白!!：11 010：0010827749：20120908：073222：空白！ ！ ：空白！：11 010：0002760233：20120908：073652：空白!!：11 010：0007740048：20120908：073703：空白！ :073727:BLANK !!:11 010:0005545384:20120908:073742:BLANK !!:11 010:0010848020:20120908:073824:BLANK !!:11 010:0002008128:20120908:073857:BLANK !!:11 010:0010826526 :20120908:073903:空白!!:11 010：0007707930：20120908：073923：空白!!：11 010：0010844804：20120908：073927：空白！ ！：11 010：0009293595：20120908：073958：空白!!：11 010：0013653569：20120908：074001：空白！ BLANK !!:11 010:0010820791:20120908:074013:BLANK !!:11 010:0009667635:20120908:074015:BLANK !!:11 010:0010834564:20120908:074018:BLANK !!:11 010:0009680581:20120908: 074023:空白!!:1111 010：0010820791：20120908：074013：空白!!：11 010：0009667635：20120908：074015：空白！ !:1111 010：0010820791：20120908：074013：空白!!：11 010：0009667635：20120908：074015：空白！ !:11

之前的第一件事：我不知道它是什么。第二件事是员工卡号。第三件事是日期，第四件事是时间。

我需要用这种类型的数据插入我的 SQL 数据库表。我不知道如何插入它们。请帮我。:)。提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:10:16.573

您可以使用`SqlBulkInsert`, 来插入您的数据

```
BULK INSERT 
   [ database_name . [ schema_name ] . | schema_name . ] [ table_name | view_name ] 
      FROM 'data_file' 
     [ WITH 
    ( 
   [ [ , ] BATCHSIZE = batch_size ] 
   [ [ , ] CHECK_CONSTRAINTS ] 
   [ [ , ] CODEPAGE = { 'ACP' | 'OEM' | 'RAW' | 'code_page' } ] 
   [ [ , ] DATAFILETYPE = 
      { 'char' | 'native'| 'widechar' | 'widenative' } ] 
   [ [ , ] FIELDTERMINATOR = 'field_terminator' ] 
   [ [ , ] FIRSTROW = first_row ] 
   [ [ , ] FIRE_TRIGGERS ] 
   [ [ , ] FORMATFILE = 'format_file_path' ] 
   [ [ , ] KEEPIDENTITY ] 
   [ [ , ] KEEPNULLS ] 
   [ [ , ] KILOBYTES_PER_BATCH = kilobytes_per_batch ] 
   [ [ , ] LASTROW = last_row ] 
   [ [ , ] MAXERRORS = max_errors ] 
   [ [ , ] ORDER ( { column [ ASC | DESC ] } [ ,...n ] ) ] 
   [ [ , ] ROWS_PER_BATCH = rows_per_batch ] 
   [ [ , ] ROWTERMINATOR = 'row_terminator' ] 
   [ [ , ] TABLOCK ] 
   [ [ , ] ERRORFILE = 'file_name' ] 
    )] 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/ms188365.aspx](http://msdn.microsoft.com/fr-fr/library/ms188365.aspx)

# ios - iOS 中带有圆角矩形笔划、图标和标签的自定义按钮

> ID：12464806
> 
> 赞同：0
> 
> 时间：2012-09-17T18:03:18.590
> 
> 标签：ios, button

![按钮示例](../Images/c14df8118b8706501e7be89388af4271.png)

我想使用代码重新创建此按钮，使其成为可重复使用的对象，您可以设置最小宽度、高度或拉伸以适合图标和标签。在整个应用程序中，我们将在多个区域重复使用该按钮，它将包括一个细圆角矩形描边、一个背景颜色、一个图标（trans PNG）和一个标签。我们想让背景颜色和笔触颜色可配置，以便我们可以打开/关闭按钮。

![具有背景图案的视图区域上的示例布局](../Images/04a4d7908d9ddd5451ee071a97e62e9d.png)

* * *

编辑：几乎可以工作的代码，但文本标签块是白色的，需要调整图像大小以适合框架并且两者都要居中。

自定义按钮代码：

```
#import "CustomButton.h"

@implementation CustomButton

- (id)initWithFrame:(CGRect)frame image:(NSString *)image title:(NSString *)title background:(UIColor *)background border:(UIColor *)border 
{
    self = [super initWithFrame:frame];
    if (self)
    {
        self = [UIButton buttonWithType:UIButtonTypeCustom];
        CALayer *layer = [self layer];

        self.contentVerticalAlignment = UIControlContentVerticalAlignmentBottom;
        self.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;

        // background
        if (background) {
            layer.backgroundColor = (__bridge CGColorRef)(background);
        } else {
            layer.backgroundColor = [[UIColor darkGrayColor] CGColor];
        }

        // border
        if (border) {
            layer.borderColor = (__bridge CGColorRef) (border);
        } else {
            layer.borderColor = [[UIColor lightGrayColor] CGColor];
        }
        layer.cornerRadius = 2.0f;
        layer.borderWidth = 0.5f;

        // icon
        UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:image]];
                                  [self addSubview:imageView];

        // text label
        UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 25, 55, 15)];
        titleLabel.font = [[UIFont alloc] fontWithSize:7.00];
                                titleLabel.text = title;
                                [self addSubview:titleLabel];

        [self setFrame:frame];
    }
    return self;
}

@end 
```

* * *

编辑：更新了上面的代码块，并在 viewController 的相应视图中使用以下代码显示按钮：

```
CGRect buttonFrame = CGRectMake(125, 3, 52, 37);
CustomButton *btnNearby = [[CustomButton alloc] initWithFrame:buttonFrame image:@"map.png" title:@"NEARBY" background:nil border:nil];
[myCustomView addSubview:btnNearby]; 
```

自定义按钮出现，但格式仍然不正确。

![在此处输入图像描述](../Images/d283b5a84145b1bac6a4cba489bfe123.png)

* * *

这是一个应该出现在按钮中心的示例图标（白色 PNG 带反式）。

![显示在按钮中的示例地图图钉图标](../Images/5bd0905634a6c4feb6215c61e675b342.png)

* * *

所需功能的摘要：

1) 可重复使用的按钮 2) 可以具有最小宽度/高度或覆盖以匹配标签的宽度和图像的高度 + 标签 3) 具有可配置的笔划颜色 4) 匹配上面的按钮图标与笔划 + 图标 + 标签 + 背景颜色 5) 可以改变打开/关闭的边框颜色

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:11:12.640

你可以尝试这样的事情：

```
#import <QuartzCore/QuartzCore.h>

@implementation CustomButton

- (id)initWithFrame:(CGRect)frame andImageName:(NSString*)filename ofType:(NSString*)type
{
    self = [super initWithFrame:frame];
    if (self) 
    {
        self = [UIButton buttonWithType:UIButtonTypeCustom];
        CALayer *layer = [self layer];
        layer.borderColor = [[UIColor blueColor] CGColor];
        layer.cornerRadius = 4.0f;
        layer.borderWidth = 2.0f;

        UIImage* img = [[UIImage alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:filename ofType:type]];
        UIImageView* imgView = [[UIImageView alloc] initWithImage:img];
        [imgView setFrame:CGRectMake(0, 0, img.size.width, img.size.height)];
        [self addSubview:imgView];

        [self setFrame:frame];
    }
    return self;
}

- (void)switchColor
{
    CALayer *layer = [self layer];

    if(buttonIsOn)
        layer.borderColor = [[UIColor blueColor] CGColor];
    else
        layer.borderColor = [[UIColor grayColor] CGColor];
}

@end 
```

每次使用此按钮时，只需使用：

`CustomButton* cusButton = [[CustomButton alloc] initWithFrame:someFrame];`

为了交替描边颜色，只需调用目标方法`switchColor`的第一行就`cusButton`可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T23:52:58.490

我能够解决这个问题，我相信它可以进一步完善，但现在按钮出现在问题中。请参阅最终结果的快照，以及下面的工作代码，希望能对其他人有所帮助。

工作截图： ![在此处输入图像描述](../Images/75bc2b4dd7022da9ae2c18ead83f8f5c.png)

工作代码：

自定义按钮.h

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface CustomButton : UIButton
- (id)initWithFrame:(CGRect)frame image:(NSString *)image title:(NSString *)title background:(UIColor *)background border:(UIColor *)border;
@end 
```

自定义按钮.m

```
#import "CustomButton.h"

@implementation CustomButton

- (id)initWithFrame:(CGRect)frame image:(NSString *)image title:(NSString *)title background:(UIColor *)background border:(UIColor *)border 
{
    self = [super initWithFrame:frame];
    if (self)
    {
        self = [UIButton buttonWithType:UIButtonTypeCustom];
        CALayer *layer = [self layer];

        // background
        if (background) {
            layer.backgroundColor = (__bridge CGColorRef)(background);
        } else {
            layer.backgroundColor = [[UIColor darkGrayColor] CGColor];
        }

        // border
        if (border) {
            layer.borderColor = (__bridge CGColorRef)(border);
        } else {
            layer.borderColor = [[UIColor lightGrayColor] CGColor];
        }
        layer.cornerRadius = 2.0f;
        layer.borderWidth = 0.5f;

        // icon
        UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(14,3,20,19)];
        imageView.image = [UIImage imageNamed:image];
        imageView.contentMode  = UIViewContentModeScaleAspectFit;
        [self addSubview:imageView];

        // text label
        UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 20, 50, 14)];
        titleLabel.opaque = NO;
        titleLabel.numberOfLines = 1;
        titleLabel.textAlignment = UITextAlignmentCenter;
        titleLabel.font = [UIFont systemFontOfSize:7.00];
        titleLabel.textColor = [UIColor whiteColor];
        titleLabel.backgroundColor = [UIColor clearColor];
        titleLabel.text = title;
        [self addSubview:titleLabel];

        [self setFrame:frame];
    }
    return self;
}

@end 
```

实例化 UIImage 层上的按钮，该按钮与 View Controller 有 segue：

```
// Add custom button to image view background layer
CGRect buttonFrame = CGRectMake(125, 3, 50, 35);
CustomButton *btnNearby = [[CustomButton alloc] initWithFrame:buttonFrame image:@"map.png" title:@"NEARBY" background:nil border:nil];
[myCustomView addSubview:btnNearby]; 
```

# asp.net-mvc - VSS 签入整个站点？

> ID：12464822
> 
> 赞同：0
> 
> 时间：2012-09-17T18:04:08.200
> 
> 标签：asp.net-mvc, asp.net-mvc-3, version-control, visual-sourcesafe

在 Visual Studio Web Developer Express 中开发 ASP.NET MVC 3 站点时，我正在尝试使用 Visual Source Safe。VS 和 VSS 之间似乎没有任何集成，所以我必须手动签入和签出。

在一天中，我创建和修改了许多文件，因此每次都必须进行 VSS 签入/签出很烦人。无论如何，是否可以在一天结束时检查整个站点？

这样，我将拥有该网站的 [周一] 版本的工作副本，而在周二结束时，我将拥有该网站周二版本的工作版本。那么，这些可以随着时间的推移而被删除吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T05:11:27.913

Visual Studio 的快捷版不提供与 VSS 的任何集成。如果您想直接在 Visual Studio 中进行签入/签出，我建议您升级 VS。

此外，您还可以利用 VSS 命令行。您可以在一天结束时执行命令签入整个站点，并在第二天执行签出。 [http://msdn.microsoft.com/en-us/library/asxkfzy4(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/asxkfzy4(v=vs.80).aspx)

虽然命令行可能会简化流程，但我仍然建议您及时检查修改。

# mongodb - MongoDB 存储 ObjectId 的数组

> ID：12464823
> 
> 赞同：18
> 
> 时间：2012-09-17T18:04:18.547
> 
> 标签：mongodb, foreign-keys, objectid

在我的数据库中，我必须存储一组对象 ID。我应该使用什么？像这样的东西：

```
[ObjectId("50350e12a36feb1be6000364"), ObjectId("57350e12a37fef1be6000922"), ObjectId("10350e17d34ffb1be6200925")] 
```

或类似的东西：

```
["50350e12a36feb1be6000364", "57350e12a37fef1be6000922", "10350e17d34ffb1be6200925"] 
```

我可以用第二个来节省空间，然后投射到`ObjectId`，但是使用这种方法我会失去什么吗？`ObjectId`s 的行为类似于关系数据库中的外键吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-17T18:20:06.617

我肯定会采用第一种方法，`ObjectId`直接存储 s 。这节省了空间，因为[`ObjectId`是 12 个字节](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-TheBSONObjectIdDatatype)，而第二种方法字符串是 24 个字节。

此外，如果`ObjectId`s 用于稍后获取对象，存储 as`ObjectId`可以节省一些麻烦。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-17T18:14:47.010

除非您有充分的理由不这样做，否则将它们存储为 ObjectId 数组。它更紧凑（12 字节与 24 字节），并且更准确地反映了存储的内容。它还可以启用对以下 ObjectId 引用的驱动程序级支持。

# jquery - Fancybox 2 - 按钮助手库“长度”太大

> ID：12464827
> 
> 赞同：0
> 
> 时间：2012-09-17T18:04:24.987
> 
> 标签：jquery, fancybox, fancybox-2

Fancybox 2 错误的“this.group.length”值

我的画廊显示 N+1 或 N+2 张图片（两张图片共 3 张，十张图片共 12 张中的 12 张），最后一张图片重复。变量“长度”太大。当我“在浏览器中测试”（Firefox）时发生在网络（Opera）和内部

参见[http://www.pinacate.org/index.html](http://www.pinacate.org/index.html)点击“单成火山 (2)”和“图片库 (10)”

示例代码：描述段落

标签后附加的页面上的图像链接

```
<div style="display:none"><!-- gallery of photos -->
    <a class="fancybox-buttons" 
    href="image.jpg" 
    data-fancybox-group="mono" 
    title="title."> 

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:08:51.910

这是一个无辜的遗漏（当您不是编码人员时可以理解；）

您需要正确关闭锚点（`<a>`标签），以便 fancybox 可以正确计算每个画廊有多少元素......所以这段代码

```
<div style="display:none"><!-- gallery of photos -->
    <a class="fancybox-buttons" 
    href="image.jpg" 
    data-fancybox-group="mono" 
    title="title."> 

</div> 
```

应该 ：

```
<div style="display:none"><!-- gallery of photos -->
    <a class="fancybox-buttons" 
    href="image.jpg" 
    data-fancybox-group="mono" 
    title="title."></a>

</div> 
```

**请注意**，我在锚点的末尾添加了结束标记`</a>`以正确关闭它。对他们每个人都做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:19:39.870

假设 fancybox 2.1.0 修改 jquery.fancybox.js 行，读取

```
D.undelegate(selector, 'click.fb-start').delegate(selector + ":not('.fancybox-item, .fancybox-nav')", 'click.fb-start', run); 
```

包括您的自定义类以进行排除或将已排除的类之一添加到您要忽略的额外链接。

# java - 错误：无法找到或加载主类测试

> ID：12464836
> 
> 赞同：3
> 
> 时间：2012-09-17T18:05:12.350
> 
> 标签：java, command-line, antlr

我目前正在自学 ANTLR，在阅读“The Definitive ANTLR Reference”一书时，我遇到了一个问题。我正在做第一个示例并创建了语法文件，获取了 Lexer 和 Parser Java 文件，创建了以下 Java 程序来测试它：

```
import org.antlr.runtime.*;

public class Test 
{
    public static void main(String[] args) throws Exception
    {
        ANTLRInputStream input = new ANTLRInputStream(System.in);

        TLexer lexer = new TLexer(input);

        CommonTokenStream tokens = new CommonTokenStream(lexer);

        TParser parser = new TParser(tokens);

        parser.r();
    }
} 
```

然后我使用命令行进行编译，它工作正常，然后我尝试运行 Java 类，但它失败了，整个命令行如下所示：

```
C:\Users\Dan\workspace\Test\src>dir
 Volume in drive C is Acer
 Volume Serial Number is ECB2-5E39

 Directory of C:\Users\Dan\workspace\Test\src

17/09/2012  18:15    <DIR>          .
17/09/2012  18:15    <DIR>          ..
17/09/2012  18:32               723 Test.class
16/09/2012  20:51               353 Test.java
17/09/2012  18:32             3,641 TLexer.class
15/09/2012  21:35             7,625 TLexer.java
17/09/2012  18:32             2,425 TParser.class
15/09/2012  21:35             2,115 TParser.java
               6 File(s)         16,882 bytes
               2 Dir(s)  235,276,161,024 bytes free

C:\Users\Dan\workspace\Test\src>javac -cp C:\antlr-3.4.jar TLexer.java TParser.j
ava Test.java

C:\Users\Dan\workspace\Test\src>java -cp C:\antlr-3.4.jar Test
Error: Could not find or load main class Test

C:\Users\Dan\workspace\Test\src> 
```

我看过很多解决方案，但似乎没有一个对我有用。以下是好的：

*   JDK 和 JRE 完全更新
*   PATH 已设置

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T18:08:01.853

将当前位置添加到类路径：

```
java -cp C:\antlr-3.4.jar;. Test 
```

# asp.net - 当我将数据源应用到 DropDownList 时选择 System.Data.DataRowView .....如何获取应用数据源的数据？

> ID：12464840
> 
> 赞同：1
> 
> 时间：2012-09-17T18:05:47.200
> 
> 标签：asp.net, vb.net

'System.Data.DataRowView' 被添加到下拉列表中。如果应用的数据包含 5 条记录，那么它在列表帮助中出现 5 次......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:07:58.000

将数据源的列名分配给下拉列表的 DataTextField 和 DataValueField。

例如

```
ddl.DataTextField = "TextColumnName";
ddl.DataValueField = "ValueColumnName";
ddl.DataSource = dt;
ddl.DataBind(); 
```

# c# - 使用 C# .net 加入多个表并绑定到单个 Listview

> ID：12464844
> 
> 赞同：0
> 
> 时间：2012-09-17T18:06:14.830
> 
> 标签：c#, .net, linq, xaml, dynamic-linq

我有三个表加入名为 Books、Borrowers 和 Transactions 的表。数据库方案如下：

1.  书籍（BookID、BookName、ISBN）；
2.  借款人（BorrowerID、BorrowerName、BorrowerLevel）；
3.  交易（TransactionID、BorrowerID、BookID、BorrowDate、ReturnDate）；

对应的类分别是 Book、Borrower 和 Transaction。现在我想从这三个表中选择 BookID、BookName、BorrowerID、BorrowerName、BorrowDate 和 ReturnDate 并显示在具有 gridview 控件的列表视图中。XAML 代码：

```
<Grid>
        <ListView Margin="15,57,58,57" Name="borrowedBookList" IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding }" KeyDown="borrowedBookList_KeyDown">
            <ListView.View>
                <GridView>
                    <GridView.Columns>
                        <GridViewColumn Width="80" Header="Borrower ID" DisplayMemberBinding="{Binding Path=BorrowerID}"/>
                        <GridViewColumn Width="220" Header="Borrower Name" DisplayMemberBinding="{Binding Path=BorrowerName}"/>
                        <GridViewColumn Width="220" Header="Book Name" DisplayMemberBinding="{Binding Path=BookName}"/>
                        <GridViewColumn Width="100" Header="Date" DisplayMemberBinding="{Binding Path=BorrowDate}"/>
                        <GridViewColumn Width="100" Header="Return Date" DisplayMemberBinding="{Binding Path=ReturnDate}"/>
                       </GridView.Columns>
                </GridView>
            </ListView.View>
        </ListView>
    </Grid> 
```

现在我如何加入这些表并将结果数据上下文分配到borededBookList？

谢谢

阿雷芬·萨米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:40:34.860

```
borrowedBookList.DataSource =
    from borrower in Borrowers
    join transaction in Transactions
        on borrower.BorrowerID equals transaction.BorrowerID
    join book in Books
        on transaction.BookID equals book.BookID
    select new
    {
        borrower.BorrowerID,
        borrower.BorrowerName,
        book.BookName,
        transaction.BorrowDate,
        transaction.ReturnDate,
    }

borrowedBookList.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:31:45.967

你看过分层数据模板类吗？

您的模型或视图模型需要包含各自的关系。从那里，适当的数据模板应该可以很好地工作。

# javascript - TinyMCE 保持隐藏状态（uvw-dialog-open）

> ID：12464847
> 
> 赞同：1
> 
> 时间：2012-09-17T18:06:33.970
> 
> 标签：javascript, css, tinymce

好的，我开发了一个不错的 tinymce 解决方案，我通过 js 以编程方式创建和销毁所有 tinymce 实例 - 所以，我知道这可能不是 tinymce 实现的日常使用 - 但基本上它就像一个魅力。

现在，在我给你具体的示例代码之前 - 我将解释我的奇怪问题：我的一个朋友是我制作的在线工具的超级用户，他在白天创建/销毁数百个 tinymce 实例。 ..

有时，在工作数小时后，他的行为是，当他点击“编辑”按钮时，tinymce 不会出现。我从来没有成功过，我自己重现了它 - 但是有一天，在一个团队查看器会话中，当错误已经发生时，我能够查看他的屏幕和页面（使用萤火虫）。

所以，很糟糕，我无法通过 javascript 代码进行完整的调试（因为在这种情况下，当你按一次 f5 时，错误就会消失，并且需要几个小时才能再次得到它）-> 我意识到， ，当错误发生时-> tinyMCE-object 本身的一切似乎都正常-> DOM 渲染中的一切似乎都还好-> 但是，从一些奇怪的 css-import-file 中，突然出现了这样的定义：

```
html.uvw-dialog-open object, html.uvw-dialog-open iframe, html.uvw-dialog-open embed {
    visibility: hidden;
} 
```

这导致tinymce的主面板不会显示，并且tinymce的任何内容都不再可见.. 杀死和重新创建实例此时不会修复该错误，您必须按 f5 并在重新加载后，您甚至再次找不到这个 css 定义（或者，至少，我无法通过 teamviewer 和他那破烂的小型笔记本电脑）

所以，唯一想到的是我自己的 css 中的一个丑陋的 hack，告诉这个：

```
html.uvw-dialog-open object, html.uvw-dialog-open iframe, html.uvw-dialog-open embed {
    visibility: visible !important;
} 
```

而且，从那以后……已经好几个星期了->但是今天，我的朋友再次打电话给我，告诉我，他再也看不到tinymce了……我几乎要流泪了，您可以想象：D

好的..在编写和重新阅读所有这些行之后->我意识到我的修复不起作用...两者都是相同的定义，如果它们出现在同一级别（文件，而不是内联）..可能最后- match-wins 我猜，什么是新的、延迟加载的 tinymce 文件。所以它肯定会更好，使内联可见性：可见；在tinymce的init_instance_callback ...

但是，在我绝望的情况下，我想我会在 stackoverflow 上写下所有内容 -> 也许有人知道这个问题的真正原因，而且.. 你们是我所知道的最棒的开发人员：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:28:26.970

杰比，

想法不仅仅是一个明确的答案......

由于长寿命页面中存在大量 javascript/DOM 活动，这听起来像是内存泄漏问题。

您可能没有做错任何事，也不太可能追查真正的原因，但是您可以采取某些措施：

*   尝试使您的 tinymce 实例可重用，而不是每次都破坏和创建新实例。
*   定期请求重新提供页面 - 在重新提供的页面中重现整个文档状态 - DOM 和 javascript 环境可能是一个挑战。

大量的工作，并不能保证我很害怕。

# macos - PDFViewAnnotationHitNotification 未交付

> ID：12464848
> 
> 赞同：0
> 
> 时间：2012-09-17T18:06:36.950
> 
> 标签：macos, appkit, pdfkit

我正在 Mac 上实现 PDF 查看器，我想让用户添加注释。

我在页面中添加了一个 PDFAnnotationText，它看起来很好，但是当用户单击它时，整个文档会缩小，并且左侧会出现一个注释列表。

我想自定义它以将注释显示为弹出窗口，类似于 Preview 所做的。PDFAnnotationText 类参考说我可以这样做：

> 每个 PDFAnnotationText 对象都有一个与之关联的 PDFAnnotationPopup 对象。在关闭状态下，注释显示为图标。在打开状态下，它显示为一个包含注释文本的弹出窗口。请注意，您的应用程序必须完成工作以建立一个包含文本的窗口以响应 PDFViewAnnotationHitNotification。

但是，当我为 PDFViewAnnotationHitNotification 添加观察者时，单击注释时不会发送通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:06:51.680

我已经就此事联系了 Apple，我收到的答复是这是一个错误。一种解决方法是自己处理鼠标单击，遍历注释并寻找命中。

像这样的东西（在 PDFView 子类的 mouseDown 处理程序中运行的代码）：

```
NSPoint windowPoint = [self.window convertScreenToBase:[NSEvent mouseLocation]];
NSPoint viewPoint = [self convertPoint:windowPoint fromView:nil];
PDFPage *page = [self pageForPoint:viewPoint nearest:NO];

if (page != nil) {
    NSPoint pointOnPage = [self convertPoint:viewPoint toPage:page];

    for (PDFAnnotation *annotation in page.annotations) {
        NSRect      annotationBounds;

        // Hit test annotation.
        annotationBounds = [annotation bounds];
        if (NSPointInRect(pointOnPage, annotationBounds))
        {
            NSLog(@"Annotation hit: %@", annotation);
        }
    }
} 
```

# php - 系统调用中断时无法连接到 MongoDB 服务器

> ID：12464850
> 
> 赞同：0
> 
> 时间：2012-09-17T18:06:45.110
> 
> 标签：php, mongodb, centos, kohana, task-queue

我正在运行一个 Rackspace 云服务器 CentOs + apache2 + php 5.4 + pcntl 模块，它带有一个基本的 Kohana php 框架和一个用于分叉子进程的 mongoDb 任务模块。如果我尝试同时运行超过 1 个子任务进程，则会收到以下错误：

`Unable to connect to MongoDB server at Interrupted system call`

根据 mongoDb 任务模块作者的说法，该问题与代码无关，而可能与 mongoDb 驱动程序或服务器有关。

有谁知道错误的含义和/或可能是什么原因？

完整的错误输出：

> 0 /var/www/.../modules/mangodb/classes/mangodb.php(370): MangoDB->connect()
> 
> 1 /var/www/.../modules/mangodb/classes/mangodb.php(173): MangoDB->_call('command', Array, Array)
> 
> 2 /var/www/.../modules/mangotask/classes/model/queue/task.php(33): MangoDB->command(Array)
> 
> 3 /var/www/.../modules/mangoQueue/classes/controller/daemon.php(232): Model_Queue_Task->get_next()
> 
> 4 /var/www/.../modules/mangoQueue/classes/controller/daemon.php(111): Controller_Daemon->daemon()
> 
> 5【内部函数】：Controller_Daemon->action_index()
> 
> 6 /var/www/.../system/classes/kohana/request/client/internal.php(118):reflectionMethod->invoke(Object(Controller_Daemon))
> 
> 7 /var/www/.../system/classes/kohana/request/client.php(64): Kohana_Request_Client_Internal->execute_request(对象(请求))
> 
> 8 /var/www/.../system/classes/kohana/request.php(1138): Kohana_Request_Client->execute(Object(Request))
> 
> 9 /var/www/.../index.php(109): Kohana_Request->execute()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:58:10.277

驱动程序版本 1.2.12 肯定存在分叉问题，但这应该在即将发布的 1.3.0 版本中解决。特别是，[PHP-426](https://jira.mongodb.org/browse/PHP-426)是解决此问题的较晚问题之一，因为它将连接选择从 重新定位`MongoCursor`到`MongoCursor::doQuery()`，允许驱动程序在分叉后正确运行。我会留意下一个 1.3.0 预发布版（beta3 或 rc1），当然，当最终的 1.3.0 版本通过[http://pecl.php.net/package/mongo](http://pecl.php.net/package/mongo)发布时。

# c# - 如何在两个字符串中找到唯一的单词？

> ID：12464851
> 
> 赞同：-11
> 
> 时间：2012-09-17T18:06:47.793
> 
> 标签：c#, data-structures

我有两个单独的字符串：

```
string s1 = "Hello welcome to the world of C sharp";

String s2 = "Hello world welcome to the world of C"; 
```

现在我想获取两个字符串中的唯一单词，例如`{sharp}`.

我也想在同一个程序中找到相似的词，比如`{Hello, welcome, to, the , world of, C}`.

我无法继续。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T18:19:43.840

在 C# 中，您可以使用：

```
string[] words1 = s1.Split(" ", StringSplitOptions.RemoveEmptyEntries);
string[] words2 = s2.Split(" ", StringSplitOptions.RemoveEmptyEntries);

// Retrieve words that only exist in one list
var unique = words1.Except(words2).Concat(words2.Except(words1)); 

// Retrieve all "similar words" - exist in either list
var matches = words1.Intersect(words2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:19:22.053

我建议使用`Split()`and `Except()`：

```
 string s1 = "Hello welcome to the world of C sharp";

        string s2 = "Hello world welcome to the world of C";

        var s1Words = s1.Split(' ', StringSplitOptions.RemoveEmptyEntries);
        var s2Words = s2.Split(' ', StringSplitOptions.RemoveEmptyEntries);

        var s1Only = s1Words.Except(s2Words);
        var s2Only = s2Words.Except(s1Words);

        Console.WriteLine("The unique words in S1 are: " + string.Join(",", s1Only));
        Console.WriteLine("The unique words in S2 are: " + string.Join(",", s2Only)); 
```

如果您需要它们在同一个列表中，您可以使用`Concat()`：

```
var allUniqueWords = s1Only.Concat(s2Only); 
```

您还可以使用以下方法找到相同的单词`Intersect()`：

```
var sameWords = s1Words.Intersect(s2Words); 
```

LINQ 中的集合操作非常适合这类事情。还有一个`Union()`可以为您提供两者中所有单词的不同列表，例如：

```
var allWords = s1Words.Union(s2Words); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T18:20:27.480

老实说，我不确定您要做什么，但这里有一些可能的答案：

获取仅存在于一个字符串或另一个字符串中的单词：

```
using System.Linq;
...
string s1 ="Hello welcome to the world of C sharp";
string s2 = "Hello world welcome to the world of C"; 
List<string> s1List = (s1 + " " + s2)
            .Split(' ')
            .Where(s=> (!s2.Split(' ').Contains(s) || !s1.Split(' ').Contains(s)))
            .Distinct()
            .ToList(); 
```

获取所有独特的单词：

```
using System.Linq;
...
string s1 ="Hello welcome to the world of C sharp";
string s2 = "Hello world welcome to the world of C"; 

 List<string> s1List = (s1 + " " + s2).Split(' ').Distinct().ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T18:20:43.387

使用框架提供的一些不错的集合操作：

```
string s1 ="Hello welcome to the world of C sharp";
string s2 = "Hello world welcome to the world of C";

string[] words1 = s1.Split(' ');
string[] words2 = s2.Split(' ');

var s1UniqueWords = words1.Except(words2);
var s2UniqueWords = words2.Except(words1);

var sharedWords = words1.Intersect(words2); 
```

有关各种集合操作的更多信息：http: [//msdn.microsoft.com/en-us/library/bb546153.aspx](http://msdn.microsoft.com/en-us/library/bb546153.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T18:29:05.520

```
public List<string> UniqueWords(string[] setsOfWords)
{
    List<string> words = new List<string>();
    foreach (var setOfWords in setsOfWords)
    {
        words.AddRange(setOfWords.Split(new char[] { ' ' }));
    }
    return words.Distinct().ToList();            
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T19:14:55.667

在 C++ 中。假设您有某种拆分字符串的 StringTokenizer 类：

```
string s1 ="Hello welcome to the world of C sharp";

string s2 = "Hello world welcome to the world of C";

int main( int argc, char* argv[] )
{
    stringTokenizer lStrToken1(s1);
    stringTokenizer lStrToken2(s2);

    vector<string> lVS1 = lStrToken1.getTokens();
    vector<string> lVS2 = lStrToken2.getTokens();

sort( lVS1.begin(), lVS1.end() );
sort( lVS2.begin(), lVS2.end() );
vector<string> lDiff;

set_difference( lVS1.begin(), lVS1.end(), lVS2.begin(), lVS2.end(), 
        inserter( lDiff, lDiff.end() ) );

vector<string>::iterator lIter = lDiff.begin();
for ( ; lIter != lDiff.end(); ++lIter ) {
cout << *lIter << endl;
}

cout << endl; 
```

}

# c# - winforms中的问题线程

> ID：12464852
> 
> 赞同：1
> 
> 时间：2012-09-17T18:06:50.210
> 
> 标签：c#, winforms, multithreading

我需要同时计算文本框中元素的总和和元素的数量。所以我决定创建两个线程——一个用于数字的长度，一个用于元素的总和。但是当我只启动一个线程时 - 它工作正常。但是当我启动第二个线程时 - 表单开始工作缓慢或根本停止工作。我创建了两个线程

```
thrd = new Thread(GetLength);
thrd.Start();
thrd1 = new Thread(SetSum);
thrd1.Start(); 
```

这些是线程的函数，用于计算文本框中数字的长度和计算其元素的总和。

```
private void SetSum()
{
    while (true)
    {
       if (this.label3.InvokeRequired)
           this.Invoke(new Action(() => label3.Text = this.GetSum().ToString()));
    }
}

private int GetSum()
{
    string n = textBox1.Text;
    int sum = 0;
    for (int i = 0; i < n.Length; i++)
     {
            try
            {
                sum += int.Parse(n[i].ToString());
            }
            catch (FormatException) { };
        }
        return sum;
     }

private void GetLength()
{
    while (true)
     {
            if (this.label2.InvokeRequired)
                this.Invoke(new Action(() => label2.Text = " |  Length = " + textBox1.Text.Length.ToString()));
     }
} 
```

哪里有问题？同步？

我找到了一个解决方案 - 我`Thread.Sleep(1)`在 GetLength 方法中添加了 while 循环

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:10:58.947

这里有几个问题。

1.  手头的任务对于（完整的）线程来说太小了。创建线程的成本很高。
2.  通过调用主操作，所有工作都在主线程上完成。你的解决方案毕竟不是多线程的。
3.  计数很容易作为 Summing 的副产品完成（反之亦然），因此 2 个线程/任务是多余的。
4.  循环会拖累你的`while(true) ...`进程，消耗过多的 CPU 时间

这里的简单答案是不使用任何线程，只需在`textBox1.TextChanged`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:10:51.957

是的，问题实际上是同步：太多了。

您正在生成仅执行`Invoke`s 的线程，这意味着 UI 线程正在执行所有工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T18:12:13.093

这部分代码是一个无限循环，没有任何 Thread.Sleep 或任何其他等待。这将使 CPU 达到 100%。您应该将其与某些事件或任何其他将触发 GetLength 的活动联系起来

```
private void GetLength() 
{ 
    while (true) 
     { 
            if (this.label2.InvokeRequired) 
                this.Invoke(new Action(() => label2.Text = " |  Length = " + textBox1.Text.Length.ToString())); 
     } 
} 
```

# c# - 数据验证 ASP MVC OnActionExecuting

> ID：12464856
> 
> 赞同：2
> 
> 时间：2012-09-17T18:07:03.783
> 
> 标签：c#, asp.net-mvc

我创建了一个基本控制器，我的每个控制器都继承了它。在这个控制器中，我有 OnActionExecuting 方法。我用它来检查一些参数的 url。我遇到的问题是，每当我发布 html 数据时都会出现异常。我已经使用 [AllowHTML] 标签设置了模型，它适用于所有其他操作。

如何让 OnActionExecuting 方法关注模型验证？

这就是我的基本控制器中的内容

```
public abstract class BaseController : Controller
{
    [ValidateInput(false)]
    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if ((Request.Params["api"] == null || string.IsNullOrEmpty(Request.Params["api"])))
            return;

        if ((Request.Params["api"] != null && !string.IsNullOrEmpty(Request.Params["api"])))
        {
            if (Session["api"] == null)
            {
                Session["api"] = Request.Params["api"];
            }
        }
    } 
```

以下是我的模型的摘录

```
[MetadataType(typeof (MessagingMetaData))]
public partial class Message
{

}

public class MessagingMetaData
{
    [Required]
    [Display(Name = "Message")]
    [DataType(DataType.Html)]
    [AllowHtml]
    public string Body { get; set; }
} 
```

这是堆栈跟踪

```
[System.Web.HttpRequestValidationException]

Exception Message: A potentially dangerous Request.Form value was detected from the client (Content="

sdafdsafdsafdsac__DisplayClass12.b__d(String value, String key) at     Microsoft.Web.Infrastructure.DynamicValidationHelper.LazilyEvaluatedNameObjectEntry.ValidateObject() at Microsoft.Web.Infrastructure.DynamicValidationHelper.LazilyEvaluatedNameObjectEntry.GetValidatedObject() at Microsoft.Web.Infrastructure.DynamicValidationHelper.LazilyValidatingArrayList.get_Item(Int32 index) at System.Collections.Specialized.NameObjectCollectionBase.BaseGetKey(Int32 index) at System.Collections.Specialized.NameValueCollection.GetKey(Int32 index) at System.Collections.Specialized.NameValueCollection.Add(NameValueCollection c) at System.Web.HttpRequest.FillInParamsCollection() at System.Web.HttpRequest.GetParams() at System.Web.HttpRequest.get_Params() at System.Web.HttpRequestWrapper.get_Params() at ProjectX.BaseController.OnActionExecuting(ActionExecutingContext filterContext) at System.Web.Mvc.Controller.System.Web.Mvc.IActionFilter.OnActionExecuting(ActionExecutingContext filterContext) at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.b__14() at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) at System.Web.Mvc.Controller.ExecuteCore() at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.b__5() at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.b__0() at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.b__7(IAsyncResult _) at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End() at System.Web.Mvc.Async.AsyncResultWrapper.End[TResult](IAsyncResult asyncResult, Object tag) at System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.b__d() at System.Web.Mvc.SecurityUtil.b__0(Action f) at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

抱歉，由于某种原因，布局不会复制新行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:17:13.607

我相信您应该能够使用`Unvalidated()`扩展方法。例如，更改`Request.Params["api"]`为`Request.Unvalidated().Params["api"]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-25T16:07:00.967

我知道这已经晚了 4 年，但我正在为未来的搜索者添加这个答案。

您可以只使用 Request.Unvalidated["api"]

```
public abstract class BaseController : Controller
{
    [ValidateInput(false)]
    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if ((Request.Unvalidated["api"] == null || string.IsNullOrEmpty(Request.Unvalidated["api"])))
            return;

        if ((Request.Unvalidated["api"] != null && !string.IsNullOrEmpty(Request.Unvalidated["api"])))
        {
            if (Session["api"] == null)
            {
                Session["api"] = Request.Unvalidated["api"];
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T23:14:15.593

不确定这是否是问题的解决方案，但可以解决这个问题。

通过将 Request.Params 更改为 Request.QueryString 我猜验证不会被调用

```
public abstract class BaseController : Controller
{
[ValidateInput(false)]
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
    if ((Request.QueryString["api"] == null || string.IsNullOrEmpty(Request.QueryString["api"])))
        return;

    if ((Request.QueryString["api"] != null && !string.IsNullOrEmpty(Request.QueryString["api"])))
    {
        if (Session["api"] == null)
        {
            Session["api"] = Request.Params["api"];
        }
    }
} 
```

# java - setonclicklistener on another activity

> ID：12464857
> 
> 赞同：2
> 
> 时间：2012-09-17T18:07:07.577
> 
> 标签：java, android, android-activity, listener

假设我有两个活动：“A”和“B”。

活动 A 在其布局中有一个按钮。我想在活动 B 上设置它的单击侦听器实现。所以我们说这里是活动 A：

```
Button button = (Button)findViewById(R.id.button);
button.setOnClickListener(B.this); 
```

在活动 B 中，我正在尝试实现该功能：

```
public void OnClick(View v)
{
//DO SOMETHING
} 
```

我收到以下错误：

> View 类型中的方法 setOnClickListener(View.OnClickListener) 不适用于参数（A）
> 
> *   范围内无法访问类型 A 的封闭实例

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:19:34.947

GUI 组件的处理必须伴随在实例化它的同一 UI 线程中。

**因此，您所需的视图不正确**，还请确保仅当视图设置有该组件并且当前可见（在前台）以供用户进行交互时，您才能使单击和其他侦听器工作。

如果你真的想要，那么你可以通过以下方式覆盖不同活动中点击监听器的默认实现：

1)**静态引用**：在活动 A 中将按钮设为公共静态，并在活动 B 中按 A 类的名称使用。

2）**接口**：在活动A上实现OnClickListener，但在B中不可访问

3)所有活动的**自定义 MyClickListener**。

```
public class MyClickListener implements OnClickListener {
    @Override
    public void onClick(View v) {
        mContext = v.getContext();

        switch (v.getId()) {
case R.id.button:
// Your click even code for all activities
break;
default:
break; }}
} 
```

使用它的类 A 和 B 都如下所示： Button button = (Button)findViewById(R.id.button); button.setOnClickListener(new MyClickListener());

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:13:21.563

您必须将 OnClickListener 的实例传递给`button.setOnClickListener(..)`. A 类没有实现 OnClickListener，因此您必须实现它才能使其成为 OnClickListener 的实例。

```
class A extends Activity implements OnClickListener {
    // instance variable, constructors, etc
    @Override
    public void onClick(View v) { // note onClick begins with lowercase
        // DO SOMETHING
    }
} 
```

# php - chrome.extension 和 $.post()

> ID：12464862
> 
> 赞同：2
> 
> 时间：2012-09-17T18:07:20.227
> 
> 标签：php, javascript, jquery, google-chrome-extension

我对 chrome.extension 和 jQuery Post 有疑问。`script.js`我想`name.php`在单击图标时发布一些数据（获取标题和 url 当前页面并将其发送到我的数据库） 。

*   [清单.json](http://przeklej.net/file_details/15360.html)
*   [脚本.js](http://przeklej.net/file_details/15361.html)

在这一刻我有一个大问题，taburl 和 tabtitle 不发送，`name.php`但我不知道为什么，所以如果有人可以帮助我，我会很高兴。

顺便说一句：对于任何错误的语言，抱歉，`script.js`在其他文件上工作，但不是 chrome.extension 而是简单的代码 js/php。如果我更改`$.post`为`$.ajax`问题不会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:49:11.227

`script.js`是一个内容脚本。这些脚本不能使用`chorme.*`API ( [source](http://developer.chrome.com/extensions/content_scripts.html) )。您的代码永远不会执行，因为它包含错误（未知变量“chrome.browserAction”）。尝试`script.js`用作背景页面脚本。

# c++ - 用于日志系统的具有多类示例的附加程序

> ID：12464866
> 
> 赞同：1
> 
> 时间：2012-09-17T18:07:29.103
> 
> 标签：c++, logging, append, log4cplus

我是使用日志系统的新手，但添加到您的程序中非常有用。

总结我的问题。我使用日志库**log4cplus**

我用两个简单的类和主程序做一个简单的例子。

这是我的错误日志：

*   log4cplus：错误找不到记录器（主）的附加程序。
*   log4cplus:ERROR 请正确初始化 log4cplus 系统。
*   分段错误：11

问题是我不知道如何用 appender 解决问题。

这是我的示例的基本代码。 **Class1.h**

```
#include <iostream>

#include <log4cplus/configurator.h>
#include <log4cplus/logger.h>

using namespace std;
// Use the log4cplus namespace
using namespace log4cplus;

class one
{
    private:
        // Create the logger
        Logger logger;

    public:
        bool flag;
        int valor;

        one();  
        int multiplica(int a);  
}; 
```

**Class1.cpp**

```
one::one()
{
    logger.getInstance(LOG4CPLUS_TEXT("Clase One - constructor.")); 
}

int one::multiplica(int a)
{
    int sol = 0;

    sol = valor * a;

    // Imprimo un mesaje en el log.
    LOG4CPLUS_INFO(logger, "El resultado de la multiplicación es: xx");

    return sol;
} 
```

**类2.h**

```
#include <iostream>

#include <log4cplus/configurator.h>
#include <log4cplus/logger.h>

using namespace std;
// Use the log4cplus namespace
using namespace log4cplus;

class two
{
    private:
        // Create the logger
        Logger logger;

    public:
        bool flag;
        int valor;

        two();
        int suma(int a);    
}; 
```

**类.cpp**

```
two::two()
{
    logger.getInstance(LOG4CPLUS_TEXT("Clase Two - DEconstructor.")); 
}

int two::suma(int a)
{
    int sol = 0;

    sol = valor + a;

    // Imprimo un mesaje en el log.
    LOG4CPLUS_INFO(logger, "El resultado de la suma es: YY ");

    return sol;
} 
```

**主文件**

```
int main(int argc, char** argv)
{
    // Load the properties
    PropertyConfigurator::doConfigure("logClase.properties");
    Logger logger = Logger::getInstance(LOG4CPLUS_TEXT("main"));

    // Log with INFO level
    if (logger.isEnabledFor(INFO_LOG_LEVEL))
    {
        LOG4CPLUS_INFO(logger, "Application startup");
    }

        one uno;
        two dos;

        uno.valor = dos.valor = 4;
        uno.multiplica(7);
        dos.suma(7);

    // Log with INFO level
    if (logger.isEnabledFor(INFO_LOG_LEVEL))
    {
        LOG4CPLUS_INFO(logger, "Application shutdown");
    }

    return 0;
} 
```

我做错了什么？？？这是使用日志系统的正确方法？？

我使用一个简单的属性文件将所有日志消息保存在一个文件中。

那是我配置 de logger的**logClase.properties文件。**

```
log4cplus.rootLogger=INFO, STDOUT, FILEAPPENDER
log4cplus.logger.main=INFO
log4cplus.logger.utils=FILEAPPENDER

log4cplus.appender.STDOUT=log4cplus::ConsoleAppender
log4cplus.appender.STDOUT.layout=log4cplus::PatternLayout
log4cplus.appender.STDOUT.layout.ConversionPattern=%d{%m/%d/%y %H:%M:%S} [%t] %-5p %c{2} %%%x%% - %m [%l]%n

log4cplus.appender.FILEAPPENDER=log4cplus::RollingFileAppender
log4cplus.appender.FILEAPPENDER.File=KlasseEx.log
log4cplus.appender.FILEAPPENDER.MaxFileSize=5MB
#log4cplus.appender.FILEAPPENDER.MaxFileSize=500KB
log4cplus.appender.FILEAPPENDER.MaxBackupIndex=1
log4cplus.appender.FILEAPPENDER.layout=log4cplus::PatternLayout
log4cplus.appender.FILEAPPENDER.layout.ConversionPattern=%d{%m/%d/%y %H:%M:%S} [%t] %-5p %c{2} %%%x%% - %m [%l]%n 
```

我想使用 FILEAPPENDER 和控制台附加程序将消息扔到文件中并进入控制台。我觉得做起来不一定那么难，做起来一定很容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:46:33.580

请参阅 log4cplus 文档中的附加程序。你可能错过了这个记录器的一些初始化步骤——我的意思是你没有添加附加程序。

请参阅[http://www.codeproject.com/Articles/15955/logging-made-easy-in-your-c-applications](http://www.codeproject.com/Articles/15955/logging-made-easy-in-your-c-applications)

后：

```
Logger logger = Logger::getInstance(LOG4CPLUS_TEXT("main")); 
```

失踪：

```
SharedAppenderPtr consoleAppender(new ConsoleAppender());
consoleAppender->setName("myAppenderName");
consoleAppender->setLayout(new log4cplus::TTCCLayout());
logger.addAppender(consoleAppender); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-17T17:41:08.960

PiotrNycz 提到您确实需要为 log4cplus 日志记录执行更多初始化步骤，尤其是添加附加程序。我想详细说明这一点。

[文档](https://sourceforge.net/p/log4cplus/wiki/CodeExamples/#initialization)指出，在 2.0 版之前的初始化将通过以下方式完成：

`log4cplus::initialize();`

和去初始化，通过调用这样`shutdown()`的：`Logger`

`log4cplus::Logger::getRoot().shutdown();`

，而在 2.0 版之后，初始化应该发生在实例化 RAII 类`log4cplus::Initializer initializer;`并在该实例被破坏时取消初始化。

**但是**我有 2.0.0 版本，而之前的方法实际上对我有用。使用第二种方法，我得到了与您完全相同的错误。

然后一个类的日志记录的最小实现可能是这样的：

```
const wchar_t* PATTERN = LOG_PATTERN; // optional - create an initial log status message
log4cplus::SharedAppenderPtr consoleApp(new log4cplus::ConsoleAppender());  // for console output
consoleApp->setLayout(std::unique_ptr<log4cplus::Layout>(new log4cplus::PatternLayout(PATTERN))); // again optional
log4cplus::Logger m_logger = log4cplus::Logger::getRoot();  // get root logger
m_logger.setLogLevel(log4cplus::ALL_LOG_LEVEL);     // set root logger log level

// finally add appenders
this->m_logger.addAppender(consoleApp); // at least one appender must be set in order for you to be able to actually log to the console or file or to an output device (multiple appender types exist). 
```

现在，一个自定义`MyLogger`类应该至少包含一个`log4cplus::Logger`日志函数——如下所示`logError`——以及上面提到的在其构造函数中完成的初始化步骤。此外，它需要`GetLogger`这样定义的成员函数：`log4cplus::Logger* GetLogger(const char* logger = DEFAULT_LOGGER);`获取 MyLogger 实例并将其用作要为其提供日志记录工具的类的成员。

要记录特定消息，您还需要这样的函数`MyLogger`：

```
template<typename... Args>
inline void logError(const char* stringOptionallyFormatted, Args&&... args)
{
    LOG4CPLUS_ERROR_FMT(m_logger, fmt, std::forward<Args>(args)...);
} 
```

（对于其他日志级别也是如此。）

现在在某个类的构造函数（或 ）中实例化一个记录器实例`main`：

```
MyLogger myLoggerInstance;
myLoggerInstance.GetLogger(L"File System Logger"); 
```

并登录：

`myLoggerInstance.logError|Info|Debug("like today is %s No%d", "Sunday", 7 );`

或者：

`logger.logDebug(L"no formatted string");`

* * *

补充说明：

*   我发现 log4cplus 的文档相对较差。[这个](https://logging.apache.org/log4j/1.2/manual.html)（适用于 log4j！- java 原版）教程是我找到的最好的教程。它很好地解释了基础知识。然后我上面链接的页面也是如此。
*   确保在 main 中调用`log4cplus::initialize()`第一件事以防止 SIOF。
*   通常，您希望`Logger`每个感兴趣的类都有一个成员对象。
*   如果您*在*`log4cplus::threadCleanup();`调用.*`shutdown`*
**   只有一个微不足道的 hello world 应用程序[链接](https://sourceforge.net/p/log4cplus/wiki/CodeExamples/#hello-world)不需要附加程序。*

# asp.net-mvc-3 - 以什么方式通过键和值存储数据？

> ID：12464868
> 
> 赞同：0
> 
> 时间：2012-09-17T18:07:47.247
> 
> 标签：asp.net-mvc-3

我将数据存储在

```
 HttpContext.Current.Application.Add(appKey, value); 
```

并通过这个读取数据：

```
 HttpContext.Current.Application[appKey]; 
```

这对我来说有一个好处，就是使用一个键作为一个值，但是在很短的时间（大约 20 分钟）之后它就不起作用了，而且我找不到 [appKey]，因为 iis 数据中的应用程序生命周期会丢失。我想知道这是另一种按键和值存储数据的方法吗？我不想要 sql server,file,... 并且想要将数据存储在服务器上而不是客户端上

我在其中存储用户一些数据。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:13:27.557

由于 IIS 可能随时回收并丢弃任何缓存/内存内容，因此持久化数据的唯一方法是将其存储在 IIS 之外。一些例子是; （是的，我包括了你说你不想让列表更完整的那些，随意跳过它们）

*   一个 SQL 数据库（如果价格过高，有很多免费的）
*   一个 NoSQL 数据库（同样的东西，很多免费的，通常更容易用于键/值）
*   文件（你也说过你不想要）
*   某种外部内存缓存，a'la AppFabric 缓存或 memcached。
*   Cookies（大小有限，默认情况下不安全）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:15:54.343

您正在谈论在会话范围之外持久化数据。因此，您将不得不使用某种形式的持久存储（数据库、文件、缓存服务器）。

您是否考虑过使用 AppFabric。它实际上很容易实现。您可以使用 nuget 包直接从代码中访问它，也可以将其配置为会话存储。（我认为）做后者意味着你将摆脱会话超时问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T18:11:36.467

您可以在用户的​​机器上创建一个持久性 cookie，以便会话不会过期，或者将会话超时增加到一个更适合您的情况/用户的值

[如何在 asp.net 中创建持久性 cookie？](https://stackoverflow.com/questions/3140341/how-to-create-persistent-cookies-in-asp-net)

[ASP.NET 中的会话超时](https://stackoverflow.com/questions/648992/session-timeout-in-asp-net)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T20:30:32.453

您是否了解您决定存储在应用程序中的任何内容都将可供应用程序中的所有用户使用？

现在关于您的实际问题，您打算存储什么样的数据？如果它的用户敏感数据，那么将它存储在会话中可能是有意义的。如果它是特定于客户端的并且不包含任何敏感信息，那么 cookie 可能是一种合理的前进方式。

如果它确实是应用程序范围的数据并且对于应用程序的每个用户都必须相同，那么您可以进行配置更改以确保它不会在 20 分钟后过期。

# iphone - iAd 不会为广告外观设置动画

> ID：12464871
> 
> 赞同：0
> 
> 时间：2012-09-17T18:08:07.980
> 
> 标签：iphone, ios, iad

我正在我的应用程序中使用苹果在其示例代码中演示的多 VC 应用程序的范例（例如 TabbedBanner 和 NavigationBanner）在我的应用程序中实现 iAd。如果您不熟悉它，该范例本质上是让主应用程序委托充当主要的 AdBannerViewDelegate，并在各自的视图控制器之间共享横幅视图。

我的广告在整个应用程序中显示良好，没有任何警告。问题是，由于某种原因，当我单击广告横幅时，它不会导航广告的外观（应该从底部向上滑动）。只是有一个延迟，然后广告出现。但是当我关闭广告时，它的动画效果很好。

苹果的示例代码中的外观动画效果很好，所以问题出在我的代码中。我只是不确定在哪里，因为我在 iAd 实施方面没有太大变化。我`bannerViewActionShouldBegin`的只是

```
- (BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave
{
    [[NSNotificationCenter defaultCenter] postNotificationName:BannerViewActionWillBegin object:self];
    return YES;
} 
```

但我认为问题不在于通知中心，因为如果我注释掉那一点然后做

```
- (BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave
{
    return YES;
} 
```

问题依然存在。

有任何想法吗？我可以发布更多代码，但我在文档中的挖掘并没有发现任何可以翻转`animated`BOOL 以进行广告演示的内容。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:53:15.230

FWIW，我能想到的最好的是这似乎只是一个 iOS 版本问题。在 4.0 中，它无法制作动画。在 5.0 中，它具有动画效果。

# css - 不同浏览器中块（div）的不同高度（和宽度？）

> ID：12464873
> 
> 赞同：1
> 
> 时间：2012-09-17T18:08:16.013
> 
> 标签：css

我的问题照片：

> ![在此处输入图像描述](../Images/09fb2cf123c95ab8ba360e3fb46c343d.png)

首先（从左到右）是谷歌浏览器。其次是歌剧。在所有其他浏览器中，尺寸与 Opera 相同。其他网站同样显示。

[来自“雅虎”的“重置 CSS”](http://developer.yahoo.com/yui/reset/)。我的其他网站也一样。它们似乎在除 Google Chrome 之外的其他浏览器中按比例减少（但问题不在 Chrome 中，因为其他网站（不是我的）在所有这些浏览器中看起来完全相同）。

如果我的问题很愚蠢，我很抱歉，但我真的不明白如何解决这个问题。

```
.wrapper {
  width: 960px;
  margin: 0 auto;
}

.header {
  width: 100%;
  min-width: 960px;
  height: 300px;
  background: #fff;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:22:07.223

这可能存在一些问题，坦率地说，您在这里没有足够的资源让我们为您提供这么多的帮助。以下是一些需要检查的一般事项：

1.  **确保 Chrome 没有放大。**如果您仔细观察，您会发现 Chrome 中的所有内容都稍大一些。Ctrl+0 应该确保它不会被意外放大。

2.  **确保它不是 Chrome 的已知事物。**我看到有人提到 Chrome 会渲染一些更大的东西，这可能是一个不错的起点。不排除 Chrome 不傻的可能性，只是因为你在其他网站上看不到它。它们在 IE 6-8 中也可能看起来相同，但是如果您不费吹灰之力就能以这种方式获取这些站点，您可能会发现体验非常糟糕。没有人说不需要任何箍来让 Chrome 按预期运行。

3.  **使用 Chrome 的开发人员工具确保您期望的值是*实际*使用的值。**仅仅因为你认为它应该是 300px 高，而文本是 20px，这并不意味着它实际上*是*并且没有一些奇怪的继承故障（或者 CSS 没有正确加载）。

此外，*浏览器略有不同也没关系。*我明白，如果你有一个老板在你的脖子上喘不过气来，你无能为力。但是，在尝试对此类问题进行故障排除时，甚至在做出设计决策时，请牢记这一事实。有时，这比花费无数小时（在商业环境中等同于大量金钱）而没有真正的回报要好。想一想 - 有多少用户*实际上*并排拥有两个浏览器并进行逐个像素的比较，或者以其他方式注意到这种差异（地狱，就此而言，您的用户中有多少甚至知道浏览器*是*什么）？

# android - 调用了 showDialog()，但屏幕上没有对话框

> ID：12464874
> 
> 赞同：1
> 
> 时间：2012-09-17T18:08:19.743
> 
> 标签：android, android-activity, android-dialog

直到最近，我一直在使用 showDialog() 和 hideDialog() 没有任何问题。我刚刚在我的项目中添加了一个新的 Activity，现在由于某种原因我无法在新的 Activity 中生成一个对话框。

调用非常简单：

```
showDialog(DIALOG_ID);

// do some work off the main thread

hideDialog(DIALOG_ID); 
```

使用这样的对话管理：

```
protected Dialog onCreateDialog(int id) {
    ProgressDialog dialog = null;

    switch (id) {       
    case DIALOG_ID:
        dialog = new ProgressDialog(this);
        dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        dialog.setMessage("LOADING ...");
        break;

    default:
        dialog = null;
    }

    return dialog;
} 
```

在调试器中，我可以看到 onCreateDialog() 正在使用正确的 ID 调用，并且正在其中执行正确的案例……但对话框从未出现在屏幕上。我也尝试显式调用 dialog.show() ，但这没有帮助。

这应该很简单：是什么阻止了对话框出现？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:33:32.817

显示消息的代码：

```
 ShowMessage("Title","Message goes here"); 
```

和“ShowMessage”无效：

```
 public void ShowMessage(String titulo,String msg){
        AlertDialog.Builder dialogo = new AlertDialog.Builder(this);        
        dialogo.setMessage(msg);        
        dialogo.setTitle(titulo);       
        dialogo.setNeutralButton("OK", null);       
        dialogo.show();
    } 
```

# java - 需要将一个4字节的数组转换成一个int

> ID：12464878
> 
> 赞同：3
> 
> 时间：2012-09-17T18:08:53.783
> 
> 标签：java, int, bytearray, type-conversion

我正在尝试制作一个可靠的 UDP 系统，我需要将 byte[] 转换为 int 并返回（JCreator 5.0 LE）

DatagramPacket 需要其数据为 byte[] 形式，所以我必须将 int 信息转换为 byte[] 以便发送：

```
byte[] data = new byte[48];

System.arraycopy(task.getProtocol().byteValue(), 0, data, 0, task.getProtocol().byteValue().length);
System.arraycopy(task.getMessage().byteValue(), 0, data, 4, task.getMessage().byteValue().length);
System.arraycopy(task.getSequence().byteValue(), 0, data, 8, task.getSequence().byteValue().length);
System.arraycopy(task.getAcknowledge().byteValue(), 0, data, 12, task.getAcknowledge().byteValue().length);

for (int i = task.getAcknowledge(); i >= 0 && i > task.getAcknowledge() - 33; i--) {

    for (Packet j: tasks) {

        if (j.getSequence() == i) {

            data[i] = 1;
            break;

        }

    }

}

out = new DatagramPacket(data, data.length, ds.getInetAddress(), portNum);
ds.send(out); 
```

协议是协议ID

消息是正在发送的“信息”

Sequence 是数据包的序列号；发送的第一个数据包的序列为 0，下一个为 1，依此类推

确认是对发送回的数据包的确认

下一部分是其他 32 个确认。为了节省内存，它们被压缩为每个 1 个字节而不是 4 个字节（int）

现在，当我收到数据包时，我需要将其拆包。首先我需要检查前 4 个字节（协议），看看我是否会忽略数据包，但我不知道如何将字节数组转换为 int。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:04:21.793

您可以使用

```
ByteBuffer bb = ByteBuffer.wrap(bytes).order(ByteOrder.LITTLE_ENDIAN or BIG_ENDIAN);
bb.position(pos);
int n = bb.getInt(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:16:25.260

```
byte array - > String -> Integer 
```

1.  字节数组 - 4 个字节；
2.  字符串 - 新字符串（字节数组）；
3.  整数 - Integer.parseInt(String);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T18:24:57.727

好吧，这是一种通用的方法；它是一个 32 位 Big-Endian（通常的“网络顺序”），从数组中的“pos”位置开始：

> ```
> int out = 0;
> out += 0xFF & data[pos++];
> out <<= 8;
> out += 0xFF & data[pos++];
> out <<= 8;
> out += 0xFF & data[pos++];
> out <<= 8;
> out += 0xFF & data[pos++]; 
> ```

但这可以适应用于整数的字节数。我会制定方法来调用，返回'out'。注意由于签名引起的错误。“0xFF &”是为了避免这些。另外，不确定我的 <<= 事情是否正确。

如果它们是 little-endian，那就更难了：

> ```
> int out = 0;
> pos += 4;
> out += 0xFF & data[--pos];
> out <<= 8;
> out += 0xFF & data[--pos];
> out <<= 8;
> out += 0xFF & data[--pos];
> out <<= 8;
> out += 0xFF & data[--pos]; 
> ```

这些只是一种方法。（再次免责声明：未经测试。）

# ios - 图片作为来自 URL 的 rightBarButtonItem

> ID：12464885
> 
> 赞同：0
> 
> 时间：2012-09-17T18:10:14.033
> 
> 标签：ios, iphone, uiimage, uinavigationbar, uibarbuttonitem

我尝试分配通过加载的图像

```
[UIImage imageWithData: [NSData dataWithContentsOfURL:imageUrl]]; 
```

到我的导航栏。这是我所拥有的：

```
 //Loading Image from Url and adding it to navigationbar
    NSString *urlString = [NSString stringWithFormat:@"http://someurl.com/%@.gif",imageId];
    NSURL *imageUrl = [NSURL URLWithString:urlString];
    UIImage *myImage = [UIImage imageWithData: [NSData dataWithContentsOfURL:imageUrl]];
    UIButton* button = (UIButton *) myImage;
    UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc] initWithCustomView:button];
    self.navigationItem.rightBarButtonItem = buttonItem; 
```

只要我拍摄本地图像并像这样分配图像视图，这就会起作用：

```
UIButton* button = (UIButton *) [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"myLocalImage.png"]]; 
```

我得到的错误是：*** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIImage _setAppearanceIsInvalid:]：无法识别的选择器发送到实例 0x6876df0”

有人可以帮忙吗？（或者这是否太讨厌了？）非常感谢！

Ps：这里是添加图像到导航栏的原始问题：[如何在iPhone应用程序的导航栏中显示图像？](https://stackoverflow.com/questions/844416/how-to-display-an-image-in-the-navigation-bar-of-an-iphone-application)

**编辑：** 代码中有一个错误：我猜应该是这样的：

```
UIButton* button = (UIButton *) [[UIImageview alloc] initWithImage:myImage]; 
```

无论如何，我现在不再收到错误，但图像没有出现......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:36:56.570

这应该异步工作

```
UIButton *button = [UIButton alloc] init];
UIBarButtonItem *barButtonItem = [[UIBarButtonItem alloc] initWithCustomView:button]; 
self.navigationItem.rightBarButtonItem = barButtonItem;

__block UIImage *image;
// create a dispatch queue to download your image asynchronously
dispatch_queue_t downloadQueue = dispatch_queue_create("image downloader", NULL);
// show network activity indicator
[UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
 dispatch_async(downloadQueue, ^{
        image = [UIImage imageWithData:[NSData dataWithContentsOfURL:imageUrl]];
        // dispatch to the main queue
        dispatch_sync(dispatch_get_main_queue(), ^{
                // set your button's image
                [button setImage:image forState:UIControlStateNormal];
            });
        }
});
    dispatch_release(downloadQueue);
// hide network activity indicator
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:20:06.743

知道了。有这个代码在一个单独的线程中，我想这在视图已经加载后不起作用。如果我对 vieDidLoad 说得很清楚，那么它可以工作......

只要你在这里发帖，你就会得到启发...... ^^

# delphi - 如何在单个函数类型中允许不同的子范围类型

> ID：12464887
> 
> 赞同：2
> 
> 时间：2012-09-17T18:10:22.147
> 
> 标签：delphi, delphi-2007

我有一组使用子范围类型作为输入参数的函数。

```
const
  ImprovementNodeCount = 20;
  SaleAllocationNodeCount = 10;

type   
  TImprovementNodePrintOrders = 0..ImprovementNodeCount;
  TSaleAllocationNodePrintOrders = 0..SaleAllocationNodeCount;

  function SaleImprovementType(PrintOrder: TImprovementNodePrintOrders): TSaleReferenceRecord;

  function SaleAllocationType(PrintOrder: TSaleAllocationNodePrintOrders): TSaleReferenceRecord;
  function SaleAllocationAcres(PrintOrder: TSaleAllocationNodePrintOrders): TSaleReferenceRecord;
  // many more functions with different SubTypes 
```

这对我来说效果很好。我有一种新情况，可以方便地将其中一个函数作为参数传递。我的子范围现在引起了问题，因为它们是不同的类型。

除了子类型之外，所有功能看起来都相同。我试图添加一个像这样的新函数类型

```
 TGetReferenceFunction = function (Index: cardinal): TSaleReferenceRecord; 
```

现在编译器抱怨当我尝试将函数参数作为 TGetReferenceFunction 传递时类型不同。有什么方法可以创建一个函数类型，其中包含所有这些具有不同子类型参数的函数？

```
[DCC 错误] SaleNameMap.pas(295)：E2010 不兼容的类型：“Cardinal”和“TImprovementNodePrintOrders”

```

我真正需要的是一种全是数字子类型的类型。我知道我可以为我拥有的每个子类型创建不同的函数类型，但这仍然不允许我将这些函数作为参数传递给一个通用函数。

我猜这是不可能的。如果是这样，我还有其他选择，但如果我遗漏了什么，我想我会先在这里尝试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T22:19:35.550

如果您真的希望一个函数接受所有这些不同的函数类型，那么您将不得不牺牲类型安全。你可以通过演员来做到这一点：

```
TGetReferenceFunction(@SaleAllocationAcres) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T22:28:54.303

你需要模拟一种*匿名方法*系统。

例如：

```
// existing typed proc
function SaleAllocationType(PrintOrder: TSaleAllocationNodePrintOrders): TSaleReferenceRecord;
function SaleAllocationAcres(PrintOrder: TSaleAllocationNodePrintOrders): TSaleReferenceRecord

Type
  // the prototype
  SaleAllocProto = function(PrintOrder: TSaleAllocationNodePrintOrders): TSaleReferenceRecord;

 // enumeration for all the existing typed procs
 TSelAllocRef = (saType,saAcres);

Const
  // array which references all your typed procs.
  SelAllocProvider = Array[TSelAllocRef] Of TSelAllocRef = (SaleAllocationType,SaleAllocationAcres); 
```

然后你可以打电话

```
ASaleReferenceRecord := SelAllocProvider[saType](Myargument);
AnotherSaleReferenceRecord := SelAllocProvider[saAcres](Myargument) 
```

# prestashop - Prestashop - 使用 01\. 02\. 03 对产品功能进行分类

> ID：12464889
> 
> 赞同：0
> 
> 时间：2012-09-17T18:10:37.557
> 
> 标签：prestashop

我在前面用 01\. 02\. 03\. 对产品功能进行了排序，现在我不知道如何从块分层模块中隐藏这些不必要的字符。

我关注了这个话题：st_20_ *p* _504198#entry504198">http://www.prestashop.com/forums/topic/9709-edit-features-order-list/page_st_20_ *p* *_504198* # entry504198

 *从产品中隐藏数字并比较页面。但是块分层没有成功。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:29:49.063

用 jquery 删除数字。向 blocklayered.js 文件添加功能。*

# php - 使用 imagepng 时，它显示符号和随机字符，但没有图像

> ID：12464890
> 
> 赞同：0
> 
> 时间：2012-09-17T18:10:43.123
> 
> 标签：php, image, oop, gd

如果图像部分中的图像太大，我正在尝试调整图像大小。我已经编写了代码并且一切正常，除了当我使用 imagepng 时，它只会显示随机字符和符号。我不完全明白为什么它会导致问题。我记得过去有这个问题，但从来没有解决过。

调整大小图像类：

```
 class ResizeImage{
        private $image;
        private $imageResized;
        private $width;
        private $height;
        private $imageSupport;
        private $imageType;

        public function __construct($image){
            $this->imageSupport = array("jpg", "jpeg", "png", "gif");
            $this->image = $this->openImage($image);
            $this->width = imagesx($this->image);
            $this->height = imagesy($this->image);
        }

        private function openImage($file){
            $fileTypeSize = explode(".", $file);
            $this->imageType = $fileTypeSize[count($fileTypeSize) - 1];
            switch($this->imageType){
                case 'jpg':
                case 'jpeg':
                    $image = imagecreatefromjpeg($file);
                    break;
                case 'gif':
                    $image = imagecreatefromgif($file);
                    break;
                case 'png':
                    $image = imagecreatefrompng($file);
                    break;
                default:
                    $image = false;
                    break;
            }
            return $image;
        }

        public function resizeImage($newWidth, $newHeight, $option="auto"){
            //Get optimal size based on $option
            $optionArray = $this->getDimensions($newWidth, $newHeight, strtolower($option));

            $optimalWidth = $optionArray['optimalWidth'];
            $optimalHeight = $optionArray['optimalHeight'];

            $this->imageResized = imagecreatetruecolor($optimalWidth, $optimalHeight);
            imagecopyresampled($this->imageResized, $this->image, 0, 0, 0, 0, $optimalWidth, $optimalHeight, $this->width, $this->height);

            if($option == 'crop'){
                $this->crop($optimalWidth, $optimalHeight, $newWidth, $newHeight);
            }
        }

        private function getDimensions($newWidth, $newHeight, $option){
           switch ($option)  
            {  
                case 'exact':  
                    $optimalWidth = $newWidth;  
                    $optimalHeight = $newHeight;  
                    break;  
                case 'portrait':  
                    $optimalWidth = $this->getSizeByFixedHeight($newHeight);  
                    $optimalHeight = $newHeight;  
                    break;  
                case 'landscape':  
                    $optimalWidth = $newWidth;  
                    $optimalHeight = $this->getSizeByFixedWidth($newWidth);  
                    break;  
                case 'auto':  
                    $optionArray = $this->getSizeByAuto($newWidth, $newHeight);  
                    $optimalWidth = $optionArray['optimalWidth'];  
                    $optimalHeight = $optionArray['optimalHeight'];  
                    break;  
                case 'crop':  
                    $optionArray = $this->getOptimalCrop($newWidth, $newHeight);  
                    $optimalWidth = $optionArray['optimalWidth'];  
                    $optimalHeight = $optionArray['optimalHeight'];  
                    break;  
            }  
            return array('optimalWidth' => $optimalWidth, 'optimalHeight' => $optimalHeight);  
        } 

        private function getSizeByFixedHeight($newHeight)  
        {  
            $ratio = $this->width / $this->height;  
            $newWidth = $newHeight * $ratio;  
            return $newWidth;  
        }  

        private function getSizeByFixedWidth($newWidth)  
        {  
            $ratio = $this->height / $this->width;  
            $newHeight = $newWidth * $ratio;  
            return $newHeight;  
        }  

        private function getSizeByAuto($newWidth, $newHeight)  
        {  
            if ($this->height < $this->width)  
            // *** Image to be resized is wider (landscape)  
            {  
                $optimalWidth = $newWidth;  
                $optimalHeight= $this->getSizeByFixedWidth($newWidth);  
            }  
            elseif ($this->height > $this->width)  
            // *** Image to be resized is taller (portrait)  
            {  
                $optimalWidth = $this->getSizeByFixedHeight($newHeight);  
                $optimalHeight= $newHeight;  
            }  
            else  
            // *** Image to be resizerd is a square  
            {  
                if ($newHeight < $newWidth) {  
                    $optimalWidth = $newWidth;  
                    $optimalHeight= $this->getSizeByFixedWidth($newWidth);  
                } else if ($newHeight > $newWidth) {  
                    $optimalWidth = $this->getSizeByFixedHeight($newHeight);  
                    $optimalHeight= $newHeight;  
                } else {  
                    // *** Sqaure being resized to a square  
                    $optimalWidth = $newWidth;  
                    $optimalHeight= $newHeight;  
                }  
            }  

            return array('optimalWidth' => $optimalWidth, 'optimalHeight' => $optimalHeight);  
        }  

        private function getOptimalCrop($newWidth, $newHeight){
            $heightRatio = $this->height / $newHeight;  
            $widthRatio  = $this->width /  $newWidth;  

            if ($heightRatio < $widthRatio) {  
                $optimalRatio = $heightRatio;  
            } else {  
                $optimalRatio = $widthRatio;  
            }  

            $optimalHeight = $this->height / $optimalRatio;  
            $optimalWidth  = $this->width  / $optimalRatio;  

            return array('optimalWidth' => $optimalWidth, 'optimalHeight' => $optimalHeight);  
        }  

        private function crop($optimalWidth, $optimalHeight, $newWidth, $newHeight)  
        {  
            // *** Find center - this will be used for the crop  
            $cropStartX = ( $optimalWidth / 2) - ( $newWidth /2 );  
            $cropStartY = ( $optimalHeight/ 2) - ( $newHeight/2 );  

            $crop = $this->imageResized;  
            //imagedestroy($this->imageResized);  

            // *** Now crop from center to exact requested size  
            $this->imageResized = imagecreatetruecolor($newWidth , $newHeight);  
            imagecopyresampled($this->imageResized, $crop , 0, 0, $cropStartX, $cropStartY, $newWidth, $newHeight , $newWidth, $newHeight);  
        }  

        public function saveImage($savePath, $imageQuality="100"){
            $fileType = $this->imageType;
            switch($fileType)  
            {  
                case '.jpg':  
                case '.jpeg':  
                    if (imagetypes() & IMG_JPG) {  
                        imagejpeg($this->imageResized, $savePath, $imageQuality);  
                    }  
                    break;  

                case '.gif':  
                    if (imagetypes() & IMG_GIF) {  
                        imagegif($this->imageResized, $savePath);  
                    }  
                    break;  

                case '.png':  
                    // *** Scale quality from 0-100 to 0-9  
                    $scaleQuality = round(($imageQuality/100) * 9);  

                    // *** Invert quality setting as 0 is best, not 9  
                    $invertScaleQuality = 9 - $scaleQuality;  

                    if (imagetypes() & IMG_PNG) {  
                        imagepng($this->imageResized, $savePath, $invertScaleQuality);  
                    }  
                    break;  

                // ... etc  

                default:  
                    // *** No extension - No save.  
                    break;  
            }  

            imagedestroy($this->imageResized);  
        }  

        public function loadImage(){
            $image;
            switch($this->imageType){
                case 'jpeg':
                case 'jpg':
                    $image = imagejpeg($this->imageResized);
                    break;
                case 'png':
                    $image = imagepng($this->imageResized);
                    break;
                case 'gif':
                    $image = imagegif($this->imageResized);
                    break;
                default:
                    $image = false;
            }

            return $image;
        }
    } 
```

我在我的代码中调用 loadImage() 。现在我得到的输出是。

```
 ‰PNG  IHDR–ps~* IDATxœí}ypÇyï×=ÇÞXìâ¾II¼‰4)ò‰:-+:[–”&lt;Ù)Ee=;©g§Ê±c;ò{%_e»R±¥ø%O±ägË§$G’Y’©H"­ƒ¤xAI‰Å]ì½;WïÙ=È"ªÐ5µ˜éùMwOýõïûº{‘¦PS&,pá³`~¼Lj‹\ ©Ç#"5¢ qzŒ!ãòá=€çÞ³ü.sÖ—\FÒF<-zÛxòeƒˆf!ž_\ê·hj"Š5¬+lQ\0`a¡™c,-¢°\\¦õýR€K•|q‚KÅä%²Ä…‹¼Ä…—/ë%.\âÂ%.¼Bèm‰ç'½Í¼Ä…—/ë%.\âÂ%.¼Bèm‰ç'½Í¼Ä…—/ë…âBR¦ÒÍÏ2‡ dŽàR¿¥R˜…ÓçgggSƒXio­s¯«´·‹¦lÜK™/3¸¨8K¾ŒØ cÁ—e/ žUBÞúƒ/ ü«¤Æ A@xÎ¾¹ñþ55·éÕ\¶¹¤¼ààR1@.DÄsÁß¿qþ{ˆ€A@i°¡æþ-Ëî.¬ÁÂD`‰Š“JðHàß˜.?@zAPŽ~b|f hït™Ë9_ð\¸ðâŽ„ßL)@=SÐ3ÎDôýFUU£HEÓ,l….Õyš¿0’A$Æ#-Dmthìäììl™’MyÁÁ¥bÌ‰ðæX³i`yr.ü'‚õ2 0U““JPÖ’€(pv‡P%p´0Aa2$T§vù1Þ7Fü~?Çq¥ P¾r%úRÃTDDÞ[4é9šïl)¨¬Å/„ßê¾Lô),ÉPB8ŽÚ|ö¶öªkÛý{‚¯hún±‰þö"BÒIuvŒDÂÆÏ[ðy•ó2ƒçÂ…åÞÇ¬—†ýùíÅr~QpÑ_6zõèèÑô˜‘9d’Ò4-1•8=ï=øé†¦O¬©ý3³[²®wmÒ$;'ÊÀP7Fum¤dàdŒE;DQ,UCt²¼h™/¸Œkž–z}è{ÿ5ðHzLW$$€ÑêôÒ,òvà_ÿãØ¢‰iú\Muì†T\£ É¤À‹d*9æj®_Q__oô¢$.¤–ØËÉ… ©±—ú¾Ú7ý¢©YS2ã€¹Q!Bœï}êèßÎDæVI)·©ý6epÓX¿ŒõÆ‰ž=yû)¬uvoÙ²µ¡¡¡|«Z´\!O›‹",IÌ½—ŸXcê«ƒßî¾’y"kˆ¦jˆ€¥`“–ß±é».‡×hÚ²,Ÿ>‹Åxž¯­­­¯¯w8fI}AËë—ºu™Á¥‚YÆ6Fzbü©7ÏÿŸl)JK,/Þ¸  )ho¹ïÆoXüÝœcŒ€n¿”±ë,.BðEufaÆHXð5ÌJ1cÅ`±Ã4l–#'áC£cç-™B(¥<ÏuçÞÎ¸Œ¤s¦\ùç!_6z·æÖãÒÌLb€dD€u§Îz0Ô‘&amp;°>CírïàaMÓ,éù6¬BØb[·¨tÆ/%‡MÊƒä;9!eü0K”˜ÎlN~hôt2™,ßÖà•.cNdaüÂ„b,Û7Z£«R=A¤3¡‰x<^ªåëkñƒ/-‰àB‘jLÕ†PÞð„ˆ±y!Éd2•J]4GK9¯ðâåBŽØš¸­¬¶!˜4òâe…)SÅÈkî$TJ½Ô|Áó*Fyð\¸paÖÎ¸ÄUE^„rö+f5/siUVŒ)¥ cÉMž™¤ÆÂÉ‘hz4©Î0”9bwru[ƒ×Ñd·¹_DV“3‰sãÑwRJˆ§Îgw{½Ó^QØ÷Ì½s—Š1WìÂÌú-<ºÒ9ÙdDfˆÊèî‹ù…ˆ@( OI~¾ZŸ‚(Z€¢ .%ÏöN=Ûz1©N› E¤±Õ~ãê†ë+½Uæ¡8Æ´ÓSÏû±Ê¤lÜÓu¶«w´þmeEÇñ—š‹&gt;bèîÂø….»¯’v2 éîæü ýÒ8!²ü» K,E£Ãá˜K¦zñÂ©‘ÿzøÄä“qe:?;–`ÓÉÇ=215¢è55zíÑWXÖ„@À éÍ7/|jfLÓ´R–àE«k.^¤\H ]S»/•Ò,NBés‚˜ÂÓ’:ãojlr¹\–ô‹ò "FÓc¯}s,~‚fÄ°Iíàþelb„1†ˆ*“NNüŠ@ÀŽ€ éPïÀ¡D"Qø‚—“l¾p}û^.ÞÀ˜© Ìç˜WÁ/‚¦âðÉD­sUkk«>zQ^Q™t8ðøT²Ï¢å†®#f=HÞ9<ðëÙð,(Z"”B H H‚„ aç'{"‘Hù:±Ü*ß©–¹µ¸üB°Ûì»Úþ*<Î€äk^NpKè%íÇúª×¬ZÛÒÒbH+Å+ˆ8;=>XÒËDÂÐðDq’8sî„,Ë’¤™úOë‰„‰Da»¿œ~á‚­#¥”®]±m9cxZ&”ähÉÌ…ÅÎ GB“éþ×`EÓ†Í›7WUUÍÉEe t@e*CÂ€èË?ôôI $†¦„#aï¬[Œ"šÆˆ’p†ÏÌ…†«ÄIZ"œ›IOÆû'cç¦C³©Ñ”e¨™=*½dn·ûÚMw¹f¶ÌÒ”£$w É»Ì”£3Ô‰çÓµB÷Î;Vv¶Šª&©š¬1•!³ømFá5M™Nô!Ú¢DÔá`0( ¶ÎÊÐÂñ‡xÀW_¹ÒårYªÈòÅÚ÷bñ€1MÒ’ƒ¡·G"'¦q9”CˆºÍ€ê|nÑWãZÑ\Ñ½¢êj;ï¡„JiccÓ‡¯úÔ³¯pCÓo4¯ur|ìøøï†ÃÇ4Ì¼±¶UÌJ#S7á[*Öoh¸y™«w€,Ë}}}¯¼þâÉÀœË"Õ­vÁ®O°gê–i(KlúBrøp*8¬ØÜjK·¸bc¥¯ÖFùìÒ(@d¨*È4´“ê•U{7¶|¤ª¢‘çýåSrä×ï~.,](Ue…!u¾öê†vìØ)B$>Õÿö@ð`$5.%"u­U7mÜÜÜÜl³Ùô¾´|uAæ.…Dc¢ø¢ìU˜„¢¥OMí{ä©P*`jµ˜ù¤HzH¼¶úí-í®ßgãÜŠ¢£Gß9zòÐ…P/ºÃœC¦ &£§‰I.6-ÉtÖßÄ-ëö6u¸]^’i2$—6 †RZã5ï†ú;¶,»Õ[á'„¤åÄóg‹ŸÈ´§L%!b&Ì9Óâ$Î4ïí¼Û¶í¢("b*• …B¡Ù ,)n·»ªªª²²’ç‹øõEëæÃPLeKç½væBøä+CÿwËÜS5­ŽÚV§·Ú&Ø¨þŽŒ¡ª0MEdH)áxÂ ”RšÊRq­NÜxÃÚÏ6Ö,GÀ7†|tê—s©D½à©#ëoýo÷uuué}²…e­˜œZ,Úµ3ÕWtdô75ýQ€ìw|ÆàÌ,¥ÎÈ2#M’—xNI PàÖ×Þ´·í¯v'c,™L†B¡p8œL&c)5òÖ…Ÿ†µ_t¸yN¤™&amp;ÂÊäùDx*N¨ˆèàœ^Þ[c÷×ÛnAoR©¸jK7Þºî‹í-]£ÁsÏ}IfIsÅXú#$'ÄšàÍùðíæ~²°~ÊÜúÓÁ¥‚YÆsåÂHzú7§¾ˆžÐ#Íïž{ £šh–qOsÕ«Ò!T‹+îìþRmE[¦¹0€²–úmï·gßäø<ƒPSÙh_ì|o”)è©=~Ñá(ŠÌä”ªš¾:;¡Rq…7|lë?6Öµ½Ö÷Ä©Ø³ùÂ*˜ á·V\Õ]Û·ow:¥¨à=ÒÛ¼ÀïÎ¦ÆÑóÁäùòHsJ!HFg2:È Ãœmc!à"uíúJkÍj=†1íàÐOÞ¸ðSš]­ÿ ÆO„‡{ÂÞj[ý OeMtpO !Œ¡*kÉ˜Ÿ•+ªlÞZ»þî‰°â“×b÷?ÕþpîÑqí h.‚Ù F ‚ïTwUßpýu7444”Zzúžém^à÷ œžüÉñ¿ŸMÍBï;ó¡yn¥DSYd*žJKqUS¡D´sž*›¯Ñasò¨™]¤¬tØ˜ÿ®îÿÕZ³ FÂ§~~üï‘6ÕÿŒõÇÎ¼1]ÕälíòzªD‹‚"È)5’^ÁåôÏcfÇ¤íUyÓÎ{‚áÉ×~:o!U_Y‰sÑwk;|»®Ù½gùòå‚ \"z»|\—g?úw¡T€,Òb Éý„€*³Ñ³Ñ#Áè´¤iú€"J(%œ@í.¾¡ÓÓ¶¾Òå39›zYBÀ¦UßÝýp}UÓ¯O~m(|˜rúÈd&ÏTLéyu’¬ÜRå­±QÎPË[€”TÓ Õíy‘Uf±ó¶ûv~kUÇšé™©£g_ˆ¿žÆÀ–&amp;”1…(QAžª°GÚ»VnÞ´qSss³ ¥*ÝRW‹—Múéñ/ŸŸÈÔ_¦º³D‡³6uõ#$zöON Çç­µWÔØ^9Ê¦¡*iÉˆŸ•‘aû&ËZ/åL_fRD/¶ïYq÷o¾TƒZ Âø¹èàÑÐ²u¾ºnAä t`Ó (qx½ø¡±äZñŽ^wEEE"‘½ž˜Å£LE—Ó]S]×ÚÒÖÔÔäõz +ôRÐÛ¼ÀïñåþÇ^øyNJ¥—¸p¡göØïÇ™Êª[]u+=þF§£BàEª3""0 U™¥¢òìX*Húêí+·U 6ÎRMe˜°{Jpp`"ND<÷öL<(w\UåñÛò^Ìl`eS“Óš¦1»[W&SZj°ò¯¯ÿzÇÊNJ©¦i²,§Óiýnžçm6›ÍfÓ…wQÞZ<\XüûBD¼9ýÆÈÓ:ñ@ù"\x7|ôw£¢ƒoÞäo\Uá©¶ñ"gùÞ–@°svà®¶W6:'ú£ƒÇfWl©¢|ž7Iy*I9¦¹yJ8b$€J ÍáD'„äoCh@€ò”!‚@Åñ¡@_kK›Ãáàyžã¸¢ÓÅsa,ÃS¼¤à2ŠkŠÏj¨þgß¿ªLÖ'É”&lt;™OõìŸ°»…WU/ßì÷68ucÎtoã*müHÉx(1&ä á<’L¨™9 DCÂDO9j™‡ÊNîƒ1í‡HÊ0 )¡?mLÒÒ"Ù¦æ_(ÑRÂ¾tàR1æDŠÌ"bÏÄë#‘Ó˜7SdšT¯2Uf§^›D€¶MUk*í"£Þ‹Ìè‘@‰Ã+6tzS 56#ÆÌb&‚ƒKÅUYf cúl%€£RT¦ªXªI™MË—+Nä"‰Ù´”.¬”¢aŽìuéÀe¸Ðˆ/Ò‘OL'.fÅ8 wŽY±cpáä¬»ÊV×Qa¯€@~Çe;a@Bœ•"'R)©B~Û‡GHFUIb ‘qUÙƒT<ÛÁ³ÁÆ¹•!Ð0w%’")²‚ïë¬Þ¥—ê&lt;Í€"CoŽ<€y“¬‡^ûbA)’«ZÝî;¡Ôè{MÚ–SDfUD‚Hˆ«Ê–Š«ŒäÍÇ2ÑÅ3†©¸jÐ›½Btøl± ¤(¨O¯#è&²“ïj$CÆp.ÔUE¦ïšŒpÅsaBŽ„Nd;Ÿ‹p!žJó"õ6:;o_ÆŠëEÉvÒœSUDfMìn!’•1 à¨·ÑÉb!I_üÇ¬ƒèòS4`œ.Wd,C´RJå‰Í²iÂŠ±/x4­& >IÁâdF SlÁáµéÓh^ ÌÓKB'R¦ç’×^!HIMJjú¥Æ€wð .Yb±$ËšÆòxQc¨j¨¨˜UPSûcˆ¨n›Ï¼t¸|¸"¸0Ï/T˜|vúÔG @f")7&šõÜ2usÔæx‡æ;^v6ÛR·áižë™ó ¥$U—ywŽÊ %Uy 6J9 P·zG3£~y˜Éu5Í†/¸ ®Þ¼ÀsñóD˜”##‘³@rÕ[â$—åoçOÐ>1·8ž2†„fg ²2&„Øœ\",»j”Ëíš@EÎ&PMaŒ¡¬hLŸZ"Ñ‡UÑÒ˜IS£´­{…Ûížc˜—Š1÷®yßTDÒ¡™ÄDf#HsÆâ9ÁÉ«šæ±’œ •Œ)¼J@fÿ-fºM€·QiFÖT”ËÇ„òœŽÌ%ÉŒ¢˜[ÈDªŠ¶´µ,7ïž`®šEË…E1ìØ¼E´¡ä”¬I”+X¡PG…Œ*Œ+x 0‰’—™Õ+…· áDN•4EF"˜ b.‘ÑÚÍËý"š¤‡^¾£±±QŸ‚˜K¸"¸0Ï©´CfrŠ{óˆ™x¡ÓoBT…•sá/z%EóÂMaŠ¤å;yæRÖÚ“A”‰Ö?çÇàpÜ§4oîÞæóùÌMØø5*åŠóó¸PcjÎ*ÈëÎò[€@»G°{%­Ù2ËUÞc új´‚ÞX/¦¦¡,ivD4ç‘Ó6ƒ#Íº˜]ßŸNÏö§ïÚrËÊ•v»½¼\Ù\¨ÛA¬ó ŒAeƒ36+;üH©ÉÉõe¹ò»9SáëbÌN'3 4Š~õôŒ©ˆ2q*ruóõ;·ïÒ÷€Êá&gt;x\@L-=WÛÅÖf2‡Ï–J¨JZ|Ö Ñ B½Õr$ÑÏ³@ Æ&^–’0JZe"f÷M/RŽbm0”Æ{f»œÛnÙsûòìBŠ¢/R4,8xÞ\H€3¾ÃB!GÖ*j©ˆ¬i`|b¢£Ì#™ºËæÁD¤Ùý*ÍÄ‹FLeRLM†$MCÓ8‘Ù£7> ÍEj*› $ï×¹¯¾ë†¿\»vm©Ï?P\(P²Ìv>yÄ”¿Þ)_M€p"õT;aÉá³e|;0™Ž38Ñô$Ñ‹˜Ý&gt;² ¯3YfCXM…îºmqÎŽÄœUvÑ)óÀÆ[ë?>U1“gÏÇäQ¼~Õ7ï¹µ£££¢¢Bw„«Æ®l.¬´WQªùÔo—È*k×ð"uûmÉ˜"º³Zayå $cˆÏ++{5+k:oýðm‡G^ÿ}ÏsÛ½¢àÇe‚&amp;krR•ãj|2™žR:}Ý·Ü|ÇÆõ›šššJ™0@.ôˆ~7õÇØTÞÚIÓòlk0–ú""¥ÄY!¨ "…ðL hþ²ïR1P¢àõT6Ô5|rÍƒ×oøÈï=÷öðÁÐÌ”d—'Ï "j2“¢²Q…´½Óµášë¯ë^½®¹¹Ùãñ˜÷S‡² ¿0,8x.\˜×‘ºm Îöpb’ˆ¤P‡ ~ëM}0•çuæC,0Rôîý„…,Zx=¦1¼Í•v»]Å¶¦åá»ÿÚ‰›ûÏŸš˜K¦’ªª n»§¶¹®©®¹­yYkK«ÏçÓ¿Y)Ú¨ßß‘ÌK¶tž…—V.tˆÎÕÕß¾ÁYû6K-¸ f[‘B2³½÷Òx ¢a u=ô¹cŠÌÄd…ßï·ÙlzÚn—»½mEc]ÓUÒY–UUeŒB(¥‚ Ø²Aÿ¾-“ïb¢·KË…”ÒÍí;~ÝûohG‹ÍÞ\a¶ygøÖ…°¬ê«Ò²&amp;‘Ù/0Ù<± ©Vh¨­©5/Ìçy·Û}Ñ—_„ôö¾sažŸK©®¨mu­bÌ2´–gsäßÊUxÖé(b @þ³Y4g¸˜-4Å¤.@}uCmmm!¥• %rÎ«¯9†Ïß/$„Rº·ó–tBE‹¨ò\ÁÂ±SC~¤4Øò)‘T¶ÑH„e1\ÙÖ²Ìçó¯d9aŒišfìß³x\=}{?1åR=ŠPd)ð–e;~v¸Ýq“kaq ¹‹˜ºÉRà"ŒW¬WÎ€)GBç’ËÝkÚÛÛu¯<ï6!011qàÀH$"Š¢ËåZ¹råúõë‹¤uyé %-=:»ºzG¬ÿ_è}çÂ"ëHçMKE ±Ì†VÍ\ìÒâ!‰Œx:–¯jmm5Æ,/öæ›o>ýôÓ¡Phzzº§§çë_ÿúÁƒuë¦ðUË3Ê\Àæxã‘D"‡-*rfúÝ_ŸúIRI”IYeêd|Ü0G‹C¿DÄ©ø„¢)…‰X¹0#UJ÷®½Ñ#×2MO1¯»ë/Ð‡Wr\XÎÇøk|ßW\·™†ÁS©Û²®®®êêj(qùòåŸýìg?ÿùÏéK_ºçž{¾ÿýï÷õõ•ÂC¾lc½½½Ð·†..c¯¼òÊË/¿l3Ô^xe tæää;eŠ—¢?>ö/q9†ˆ)%ñòÀóS‰‰Â$„0ÔþãôÏÏ‡Š6…"‹ !Þ ïíkÿ21%g-ÈÜŠD,ñ›Å¢`4OòAÙ‘XÄ¼¢ãi~´²kÕÚÎÎN›Ífi§æÆ˜®v¢(Þxã/¾øbQ^ADUUÍyË²|ðàÁ—_~9šÁš¦éÛèY”COÁÂR½½½ƒƒƒfØx|ìôôÉUÕÝû§2ÕR£üj}Á^•)0™ÿå»OŒD†-àÌ9@_ðÔl*h‘.åB]ì”Òk¯y«ïõ¾è»GÈ×lj¸¥­Ì#™:¶>Oä”&gt;ª­ñwlÙ²¥®®®¨*íè8Ž«©©‰Åbú&³”Ò`0èóùDQœššzã7fff ³³sçÎú§L·Ýv[4­¬¬Ô :¹º\®îîîõë×ëãŒ±£GöôôÈ²\SS³aÃ†öövÆØÌÌÇqápxzzÚçóéþ‰ñÃ±âÞõýðk_D‡—û:ôÄ“JÂÆÛr8ÊÏ$§(áB©;ïhp7nÇW;«»tÌ¦ƒÁät«·ÝÆÛ$5J5dQ9IÏzí¹)k=p_ûÚ×ÌÂ3z|AÚ*W¼qì êH®ØÇÊEÍ”òÁÄÇ@Œ¡ó¼çâø›ÑÚØ²=»÷îØ±£¢¢².D¡äÎœ9öìÙ#Š"(Š²ÿ~¿ß/ŠâáÃ‡Ÿ}öÙ“'OnÜ¸qttô¡‡r¹\³³³Ï=÷ÜèèèæÍ›9Ž;räHooïºuë!§Nzè¡‡fgg=Ïèèè/~ñ—ËÕÞÞNùÝï~÷è£Š¢ÈóüÑ£GûÛß¶´´x½ÞÿøÇï¾ûîÖ­[ÝnwJIþìä¿ïhÙ»¾~KïôI ÙêênP™úÄ±GÇb_½ûD…­r&9ùÿŽÿ0"Ížš:ÑVÙî+^8÷L“§ÕcóŽD†þéÍ‡_8÷›ÉøØÚÚõc±ÀÞúÆTrr tFCÖYÝÅQÎ¨ ,³77¥´¹±å“Wö‘×¿áhGÊÃÇ|4O£Š]1AÌ[Úˆ,<uŒÕlÜ²yûöí~¿Ž~cL–åcÇŽõöö>üðÃÇüñÇ;::|ðAY–¿óïttt<ðÀ~¿_UÕ¾¾¾oûÛÏ<óÌ]wÝ5<<<88¨iÚøøø÷¾÷½Ý»wßsÏ=çøñãýýý>ŸRúÇ?þñ‰'žøô§?½{÷n›Í‹Å^xá…M›6ÝqÇ±X,Nßÿýú6PÃ³ýS‰‰UÕkqCý–cã‡®_ñ·èÑP÷¿x}_û-ëë· ²wò±wþù/6<Ðæm—4éÐèwµ]WÇŸ=óK·èþï»þ÷3½?JÑOó'7æßŽüÓõ+nÝÚ¸Ã0qš)÷ÿAØÔµåžÙOÿää£î<á²ËÔ0o[NCP–îÖ0W²Ã4YPVù0¿- Àô»QÚëí^µþšk®ikk+Ü-Ä°È3<ÏX<ÿÃþ@éëë;xðàwÞ¹bÅŠ£GÖÖÖ~á_hnn~ì±ÇEyàªªª€çù®®®@ŽÑ¿IDATüã=öØÞ½{u¢€W_}ÕívßÿýÇõôôüð‡?üÔ§>õ¡}H’¤ýû÷_{íµûöí£”"bEEÅÇ>ö1I’Ahmm­««…BíííÀ˜v6xJÒÒ¼ý-%5“#ã±@guÂn_û-w­û”È‰ˆØQµ†§|»¯ÃcóÊÉ)†ŒPB4¦ÊšìÝŸßùvÞÉQnuu·@Åzwc»Ñl‹êÓEö`s¹\×lß›L&~uúGžN(U+ËØZÑ[P0š='áÔ‰öxº—wï»v_WW—Q¹Eƒ~KUÕ‰‰‰W_}U—ÍßüÍßìÝ»W|}}½ßï€`0ØÝÝír¹ÌãÈ«W¯ý_`Œ555ñ<âÄ‰G}ôŸø„žT"‘Ð%d.¥ÔápèŽ¾ó¬—cÏïßÝºoUM7ÂSþ7§vzúä 'RBÖ×o¨­*¤„ËYæÈ€î¾MÿãGGùÆëÿð‰uuMÛ¾L¥fø/Sƒ%ÇH¨(¥•••×ï¾‰ ýå±Çm+U{¥h]ph EmëÝlç ”ÈImòpÄvÞß½bÝM7Ý¤“Š¥$E¹Ðf³­Zµê+_ùŠùc]D”$ÉPV›Í6::jišú¾DúÿÒ4ât:'&&z{{yä‘{î¹G—"òÖ}Ÿ×ž±bRäÙ³¿Ü³üïT™Š˜ï¡Cžq«ÿñÚ*ÿçŽ¯8¿ÿç=¹×Ö¦@ Õ0Wï¤Ô©¥¶Z«ªªºîš>uÕgù³¾Ù¡8c™i†÷rd\‚QËèXrì¥¨w´ik÷ö[n¹eëÖ­Ç\˜2º¨[ž…^,ËÆ˜êž={Î;÷öÛo°T*õÂ/´µµÕÖÖêA)Ý½{wOOÏw¿ûÝ{ï½wÏž=”Òd2yîÜ9»Ý¾yóæ—^ziddD3ÆÂáp.?ÐPÝ?øŸ]5ë=¶ ãÎÕ-×T8;sŠ9QCÕüR˜'JI(ñW‡_b¨]³lßr_GèÃÌ.áEÛ4ÌñùêR¼f×oEåž?ùÎ!W;ç¨²QJ³ÛVÎ% dg G1‘gÏ$XŸ½ÅÝ¹eç–]»v­^½ZßÞ³ÿŠr!¥Tï ½–AÐã !ëÖ­»ûî»ðƒŒŽŽÖ××SJ_zé¥@ ðå/Ùn·ëòCÄÕ«Wß~ûíÏ>û¬$I===étúÅ_ŒÇã_ýêWo¾ùæÞÞÞo~ó›þçîñx¦§§Ÿyæ™mÛ¶­\¹RÏW¯å`ræôôÉ¿½úäJëÜkjÖ¿ÔÿÜÆúmáM6J«k`v½+hLcŒiL{¦÷IDyÛ`¨oWë>JË@ŠKg®û‘B*++·mÝVå¯zëÐê×Þ}yB<ï^ns×:)OL#º%e§·B "$‚éð@Bä|jÃ²¶åÛ·o¿êª«ššštßJt›æ ßjoo×§ -àµk×666ê>swçw:Î§žzJÓ4žç×­[÷àƒ¶´´èdF)¥”rw÷Ýws÷ôÓO' AÚÚÚ>ó™Ïx<øÜç>÷ä“O>ùä“©TÊëõîØ±ãÞ{ïÕÅõÕWëÛs+LÞÝv]GÕs9)¡7wÜþÊà„ÐÍW×»¶óŽëVÜbç`çí7®¼Íï¬öØ<íº÷™Ó?£„Þ°òÏ¶5í$@ °mMjp7æCÞ0y¼£¨ð,u§ªj0ŸÏçó¹Ýnc3dKÑZªs[0¥n-fp©`–ñ¼¹°TŠˆ¨(Š¾É<®ºw¥¯y¹¨©R˜ø{îf›s™Ô'¸òOâÂ÷|Â"¤·yç¢Žó?› ‹¦ö'‚¡Àb¼âÀÅS0ö?› CaÑ/¸TÉ'¸TL^"ï.pá³°øèm^à‹rá‚ýÏ¦¹ÀÞx³¾à2’6â—¸pQƒ—¸°¸TÉ'¸TÌ.qa±°Ä…K\¸Ä…K\x…ÐÛÎ/,Nz›x‰/_ÖK\¸Ä…K\x…ÐÛûÎ…ÿˆC³Öü($IEND®B`‚ 
```

有任何想法吗？感谢您的时间。=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:12:54.777

您必须将`Content-Type`标头发送到浏览器才能将其呈现为图像。在输出任何内容之前尝试添加以下内容：

```
header('Content-Type: image/png'); 
```

您还可以在[`imagepng`文档](http://php.net/manual/en/function.imagepng.php)中的示例代码中查看它的用法，以获得更好的参考。

# .net - WF4状态机+书签

> ID：12464894
> 
> 赞同：1
> 
> 时间：2012-09-17T18:11:11.517
> 
> 标签：.net, workflow-foundation-4, sample

我`ve been searching a good simple sample for WF4 (or higher) state machine with resume (possibly BookMarks from the docs I`读过）。我想看看如何实现一个能够在 WF 内的任何给定状态下恢复的状态机。由于我对 WF 一无所知，我希望看到一个简单的状态机，我可以在其中恢复上次状态的执行，并且很高兴看到如何“强制”WF 跳转到一个状态并从那里重新开始（如果可能的话）。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-29T16:58:31.540

您需要实现这样的自定义活动：

```
public sealed class WaitForBookmark : NativeActivity
{
    [RequiredArgument]
    public InArgument<String> BookmarkName { get; set; }

    protected override void Execute(NativeActivityContext context)
    {
        context.CreateBookmark(BookmarkName.Get(context));
    }

    protected override bool CanInduceIdle
    {
        get { return true; }
    }
} 
```

将此活动放入一个状态中。在您需要恢复每个书签之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:30:01.950

试试 Pro WF 4.5 书的章节。4 个状态机示例。即使您没有这本书，也可以从[Apress 的图书网站](http://www.apress.com/9781430243830)下载示例源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-15T16:59:07.613

在恢复书签时根据传入的数据跳转/跳过某些状态的状态机听起来就像它实际上只是一个具有条件转换的状态机。

您的转换可以像您想要的一样复杂，如果您愿意，它们可以是一个完全连接的图（听起来像您要求的那样）。但是，如果您有许多状态，这可能会很快成为您可能需要的所有转换和转换条件的噩梦。

在您执行此类操作之前，您可能需要查看 Microsoft 的[如何在 WF 中选择您的工作流模型，](https://msdn.microsoft.com/en-us/library/cc768563.aspx)并可能仔细考虑您应该将什么建模为状态以及哪些可能适合作为变量。

* * *

要回答您有关**如何**执行此操作的问题：

根据[MSDN 示例构建书签活动](https://msdn.microsoft.com/en-us/library/dd489442.aspx)，您可以接受 Resume 参数作为字符串或对象，其中包含您需要决定在转换中去哪里的信息。

```
public sealed class StateSelectorActivity : NativeActivity
{
    // Define an activity input argument of type string
    [RequiredArgument]
    public InArgument<string> BookmarkName { get; set; }
    public OutArgument<string> NextState { get; set; }

    protected override void Execute(NativeActivityContext context)
    {
        context.CreateBookmark(BookmarkName.Get(context), new BookmarkCallback(OnResumeBookmark));
    }

    protected override bool CanInduceIdle { get { return true; } }

    public void OnResumeBookmark(NativeActivityContext context, Bookmark bookmark, object obj)
    {
        StateSelectorArguments args = obj as StateSelectorArguments;
        if (args != null)
        {
            this.NextState.Set(context, args.NextState);
        }
    }
}

public class StateSelectorArguments
{
    public string NextState { get; set; }
    // ... Whatever else you want to pass in
} 
```

因此，可以随时进入任何状态的 StateMachine 工作流可能有一个 InitialState，它使用输入参数告诉它要转到哪个“StartState”。

然后每个中间状态可以有一个单一的转换，触发器作为上述活动，设置一个“NextState”局部变量，转换条件可以使用该变量来确定下一个进入哪个状态。

以这种方式使用 StateMachine 的一个极端示例可能是：如果您有一个 StateMachine“ChessBoard”和一个名为“White Queen”的实例，其当前状态为“e4”，则您的 Resume Bookmark 调用可能需要一个参数“e5”和接受将“白皇后”移动到状态“e5”。

# php - 任何 在 php 中使用 self 关键字而不是 static 关键字的原因或用例？

> ID：12464895
> 
> 赞同：3
> 
> 时间：2012-09-17T18:11:11.813
> 
> 标签：php, oop

从 php 5.3 开始，该`static`关键字解决了后期静态绑定问题，并且可以像大多数其他 OO 语言一样使用`self`. 在 PHP`self`中仍然存在。

我知道这两个关键字在功能上是如何分开的，正如前面在这个问题中指出的那样：[是否有任何理由使用 self 关键字？](https://stackoverflow.com/questions/9457550/is-there-any-reason-to-use-the-self-keyword).

但是，我的问题是：任何人都可以说明您为什么要`self`在仅与 5.3 或更高版本的 PHP 一起运行的代码中使用的原因吗？`self`有更好的表现吗？我还没有找到任何令人信服的用例来使用该`self`关键字。我的理解是只允许旧图书馆以预期的方式继续工作。

问题的关键是任何人都可以提出一个好的理由，任何好的理由，只有一个，微小的，对于一个称职的 PHP 开发人员来说有意义的理由说“天啊，我真的应该使用 'self' 而不是 'static ’。”

因为您可能想在脚上开枪，这是使用它的一个理由，而不是一个好的理由。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:51:01.813

啊! 找到我的一个很好的理由。目前在 php 5.3 中，您无法使用`static`.

下面的代码会抛出错误

```
 class Foo{
      const BAR = "FREE BEER";

      public static function whatDoWeLove(){
          return static::BAR;
      }
 }

 echo Foo::whatDoWeLove(); 
```

我得到的错误是：

```
PHP Fatal error:  "static::" is not allowed in compile-time constants in.... 
```

所以，我想现在 `self`一直跛行，直到发生变化或 PHP 添加了将`final`关键字与静态属性一起使用的能力。德拉斯。

# javascript - 纠正验证错误后，jquery验证提交按钮不起作用

> ID：12464896
> 
> 赞同：0
> 
> 时间：2012-09-17T18:11:11.393
> 
> 标签：javascript, jquery, jquery-validate

使用 jQuery 验证插件 (http://docs.jquery.com/Plugins/Validation/validate) 时：

我想要以下行为：用户按下提交后立即验证（而不是实际提交，我使用的是 ajax 发布请求）。

但是会发生以下情况：一旦按下提交，验证就会运行，如果适用，我会收到验证错误，然后当我更正错误并按下提交时，表单会重新验证，但是当没有验证错误时，没有制作ajax帖子，只有表单得到验证。

当第一次没有验证错误时，会立即发布帖子，就像它应该的那样。

我有以下内容：

```
 <script type="text/javascript">
        $(document).ready(function(){ 
            $("#form").validate({
                onkeyup: false,
                onclick: false,
                onsubmit: true,
                rules: {
                    telNR: {
                        required: true,
                        digits: true,
                        minlength: 10
                    }
                },
                messages: {
                    telNR: {
                        required: "Fill in a valid telephone NR",
                        minlength: "A telephoneNR is 10 characters long",
                        digits: "Use only numerics"
                    }
                },
                submitHandler: function(form) {
                    var jqxhr = $.post("sendMail.php", { telNR: $("#telNR").val() },
                    function(data) {
                        alert("Done");
                    })
                    .error(function(jqXHR){
                        alert("Error");
                    });
                }    
            });
        })
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:33:42.887

您可能遇到了一些幽灵验证错误。尝试将以下内容添加到您的选项中以清除表单焦点上的错误：

```
focusCleanup: true 
```

# c# - 将 GetBytes C# 行转换为 VB.Net

> ID：12464898
> 
> 赞同：4
> 
> 时间：2012-09-17T18:11:13.670
> 
> 标签：c#, .net, vb.net

我有一行用 C# 编写的代码，需要转换为 Vb.Net。

在 C# 中

我有这个块...

```
// Calculate number of 64K blocks
  uint          rowsPerBlock = _MAXBLOCK/widthLength;
  uint          blockSize = rowsPerBlock*widthLength;
  uint          blockCount;
  ushort        length;
  uint          remainder=dcSize; 
```

后来长度变量被赋值并用于其他计算

```
length = (ushort)((remainder < blockSize) ? remainder : blockSize);

    if (length == remainder)
    {
      comp.WriteByte(0x01);
    }
    else
    {
      comp.WriteByte(0x00);
    }

    comp.Write(BitConverter.GetBytes(length), 0, 2);

    // Write one's compliment of LEN 
```

以上所有内容我都已转换，但以下行除外。

```
comp.Write(BitConverter.GetBytes((ushort)~length), 0, 2); 
```

这条线的正确转换是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T18:14:59.333

这将[`Not`](http://msdn.microsoft.com/en-us/library/2cwcswt4%28v=vs.80%29.aspx)在 VB.Net 中用于执行按位求反：

```
comp.Write(BitConverter.GetBytes(CUShort(Not length)), 0, 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:15:17.410

您可以尝试使用此代码

```
Dim byteArray As Byte( ) = BitConverter.GetBytes( (CUShort)Not length)
comp.Write(byteArray , 0, 2); 
```

链接 BitConverter.GetBytes：http: [//msdn.microsoft.com/fr-fr/library/vstudio/fk3sts66.aspx#Y0](http://msdn.microsoft.com/fr-fr/library/vstudio/fk3sts66.aspx#Y0)

链接不：http: [//msdn.microsoft.com/fr-fr/library/2cwcswt4%28v=vs.80%29.aspx](http://msdn.microsoft.com/fr-fr/library/2cwcswt4%28v=vs.80%29.aspx)

# search - Lucene 中的组和术语查询组合

> ID：12464904
> 
> 赞同：1
> 
> 时间：2012-09-17T18:11:43.543
> 
> 标签：search, lucene

我是 Lucene 的新手，我想根据 3 个标准过滤我的搜索结果：

1.  字段的值`document_type`应该是`Product`
2.  字段值`brand_id`应为 4
3.  字段`family_id`的值应该是 (121, 232, 343) 中的所有值

所以我基本上想要的是在搜索结果中有如下组合：

1.  `document_type:Product AND brand_id:4 AND family_id:121`
2.  `document_type:Product AND brand_id:4 AND family_id:232`
3.  `document_type:Product AND brand_id:4 AND family_id:343`

我认为`document_type:Product AND brand_id:4 AND family_id:(121 232 343)`应该做到这一点，但是在解析此查询标准分析器`Product`时，即使`document_type`将值`Product`的索引字段设置为`Field.Index.NOT_ANALYZED`and `Field.Store.YES`。

我想知道是否可以通过为给定的 3 个案例组合 3 个可能的查询来创建布尔查询。

我对 Lucene 很陌生，有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T22:11:56.463

```
Query.combine(Query[]) worked like a charm for the given situation. 
```

[此处](http://lucene.apache.org/core/3_6_1/api/core/index.html)提供了给定方法的文档。

应用组合后，查询结果如下所示：

```
(+document_type:Product +brand_id:4 +family_id:121) (+document_type:Product +brand_id:4 +family_id:232) (+document_type:Product +brand_id:4 +family_id:343) 
```

谢谢。

# php - 如何设置用 curl 编写的 cookie jar 的权限？

> ID：12464909
> 
> 赞同：1
> 
> 时间：2012-09-17T18:12:16.840
> 
> 标签：php, curl

我怎么能，或者甚至可以改变 curl 写入它的 cookie jar 文件的权限？我正在尝试检索会话 cookie [for an sso plugin] 并且可以写入 cookie 文件，但是当我去读取文件时，权限是 600 并且我无法打开文件来解析内容....基本上我需要将权限设置为644。

```
<?php

$username = 'xxxxxxxxxxx';
$password = 'xxxxxxxxxxxxxxx';

$ckfile = tempnam("./", "MOODCOOKIE_");

//set POST variables
$url = 'http://domain.com/login/index.php';
$fields_string = 'username='.$username.'&password='.$password.'&rememberusername=1&Login';
rtrim($fields_string, '&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, 1);
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);
curl_setopt($ch,CURLOPT_COOKIEJAR, $ckfile);
curl_setopt($ch,CURLOPT_RETURNTRANSFER, true);

//curl_setopt($ch,CURLOPT_FOLLOWLOCATION, true );
curl_setopt($ch,CURLOPT_AUTOREFERER, true );

//execute post
$content = curl_exec($ch);
$response = curl_getinfo( $ch );

echo '<br /><pre>';
print_r($response);
echo '<br /></pre>';

$file_handle = fopen($ckfile, "r");

while (!feof($file_handle)) {
   $line = fgets($file_handle);
   echo $line.'<br />';
}
fclose($file_handle);

//close connection
curl_close($ch);

return $yourcookie;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:21:35.547

chmod 不起作用？

```
chmod($ckfile,0644); 
```

[http://ar2.php.net/manual/es/function.chmod.php](http://ar2.php.net/manual/es/function.chmod.php)

# android - Android中ws调用的通用异步任务

> ID：12464910
> 
> 赞同：1
> 
> 时间：2012-09-17T18:12:20.537
> 
> 标签：android, android-asynctask

我正在使用 AsyncTask 类来执行 WS 方法。我想要一个通用的异步任务类来调用 WS 中的任何方法。

我创建了一组可以正常工作的类，但问题是当我必须更新 UI 时。我知道我可以使用对 Activity 类的引用创建异步任务，然后执行所需的方法，但我想要的是执行的方法也是一个参数。

否则，我必须为与 UI 交互的每个方法实现一个新类，因为每个操作因方法而异。

可证明的解决方案是使用结合参数的监听器，但我没有找到如何使用它的完整示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:42:30.633

在 Java 中，不能将方法作为参数传递，但可以传递扩展或实现祖先并覆盖该方法的对象。命令模式使用这个概念 (http://en.wikipedia.org/wiki/Command_pattern)。

这是该方法的一个想法：

```
private static interface Command {
    public void execute();
}

public static final class MyWsCommand1 implements Command {
    @Override
    public void execute() {
        // TODO your WS code 1
    }
}

public static final class MyWsCommand2 implements Command {
    @Override
    public void execute() {
        // TODO your WS code 2
    }
}

private static class GenericAsyncTask<Params, Progress, Result> extends AsyncTask<Params, Progress, Result> {

    private Command command;

    public GenericAsyncTask(Command command) {
        super();
        this.command = command;
    }

    @Override
    protected Result doInBackground(Params... params) {
        // TODO your code
        command.execute();
        // TODO your code
        return null;
    }

}

private GenericAsyncTask<Object, Object, Object> myAsyncTask1;
private GenericAsyncTask<Object, Object, Object> myAsyncTask2; 
```

并在您的代码中使用它们：

```
myAsyncTask1 = new GenericAsyncTask<Object, Object, Object>(new MyWsCommand1());
    myAsyncTask1.execute(); 
```

...

```
 myAsyncTask2 = new GenericAsyncTask<Object, Object, Object>(new MyWsCommand2());
    myAsyncTask2.execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T19:42:28.647

通过 WS ，您的意思是 web 服务？

asyncTask 不适合用于如此长的任务。他们应该做一些小任务。需要（大约）不到 5 秒的事情。

如果您希望执行很长的任务，请使用简单的线程并考虑将其放入服务中。

此外，为了与之通信，您可以与服务通信，当您需要向 UI 线程发布某些内容时，请使用处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:54:46.870

最接近的答案是[这个](http://geekjamboree.wordpress.com/2011/11/22/asynctask-call-web-services-in-android/)

您可以在同一 UI 中选择等待后台进程结束的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-28T19:05:45.263

我会使用异步，并且我在生产实现中使用过。您将遇到的问题是在 doInBackground 中执行更多逻辑，因为如果您在看到调试构建时看到它说“跳过 X 帧”，您可能仍希望在 doInBackground 中进行大量后期处理。

使用接口是最好的方法，这就是我实现 Async 类的方式。full.stack.ex 用这个答案一针见血。该答案显示了一种清晰、简单、强大的方式来扩展 Async 并将其用于您的目的。

# python - python 在进行运算符重载时是否强制类型？

> ID：12464913
> 
> 赞同：6
> 
> 时间：2012-09-17T18:12:45.190
> 
> 标签：python

我有以下代码：

```
a = str('5')
b = int(5)
a == b
# False 
```

但是，如果我创建 , 的子类`int`并重新实现`__cmp__`：

```
class A(int):
    def __cmp__(self, other):
        return super(A, self).__cmp__(other)
a = str('5')
b = A(5)
a == b
# TypeError: A.__cmp__(x,y) requires y to be a 'A', not a 'str' 
```

为什么这两个不同？python 运行时是否捕获了由 抛出的 TypeError`int.__cmp__()`并将其解释为一个`False`值？有人可以指出我在 2.x cpython 源代码中显示它是如何工作的位吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T18:40:20.803

该文档在这一点上并不完全明确，但请参见[此处](http://docs.python.org/reference/expressions.html#not-in)：

> 如果两者都是数字，则将它们转换为通用类型。否则，不同类型的对象总是比较不相等，并且顺序一致但任意。`__cmp__`您可以通过定义方法或丰富的比较方法来控制非内置类型对象的比较行为`__gt__`，如特殊方法名称部分所述。

这（特别是“不同类型的对象”和“非内置类型的对象”之间的隐含对比）表明，对于内置类型，实际调用比较方法的正常过程被跳过：如果你尝试比较两种不同的（和非数字的）内置类型，它只是短路到自动 False。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T18:49:14.123

比较决策树`a == b`看起来像：

*   蟒蛇调用`a.__cmp__(b)`
    *   `a`检查是否`b`是适当的类型
    *   如果`b`是适当的类型，则返回`-1`, `0`, 或`+1`
    *   如果`b`不是，则返回`NotImplented`
*   如果`-1`，，`0`或`+1`返回，python 完成；除此以外
*   如果 NotImplented 返回，请尝试
*   `b.__cmp__(a)`
    *   `b`检查是否`a`是适当的类型
    *   如果`a`是适当的类型，则返回`-1`, `0`, 或`+1`
    *   如果`a`不是，则返回`NotImplemented`
*   如果`-1`，，`0`或`+1`返回，python 完成；除此以外
*   如果 NotImplented 再次返回，答案是`False`

不是一个确切的答案，但希望它有所帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-17T18:17:57.407

如果我理解你的问题是正确的，你需要这样的东西：

```
>>> class A(int):
...     def __cmp__(self, other):
...         return super(A, self).__cmp__(A(other)) # <--- A(other) instead of other
... 
>>> a = str('5')
>>> b = A(5)
>>> a == b
True 
```

**更新**

关于 2.x cpython 源代码，您可以在实际检查两件事`typeobject.c`的函数中找到导致此结果的原因：给定的比较函数是 a并且是.`wrap_cmpfunc``func``other``self`

```
if (Py_TYPE(other)->tp_compare != func &&
    !PyType_IsSubtype(Py_TYPE(other), Py_TYPE(self))) {
// ....
} 
```

# jquery - Backbone js bindAll/bind 与 jQuery on

> ID：12464922
> 
> 赞同：3
> 
> 时间：2012-09-17T18:13:30.397
> 
> 标签：jquery, binding, backbone.js

我正在尝试学习 Backbone js，并且无法理解使用下划线库提供的 bindAll/bind 函数和函数上提供的 jQuery 的事件绑定之间的区别。这是 Coffeescript 中的一个示例：

```
class Raffler.Views.Entry extends Backbone.View
  template: JST['entries/entry']
  tagName: 'li'

  events:
    'click': 'showEntry'

  initialize: ->
    @model.on('change',@render,this)
    @model.on('highlight',@highlightWinner,this)

  showEntry: ->
    Backbone.history.navigate("entries/#{@model.get('id')}", true)

  highlightWinner: ->
    $('.winner').removeClass('highlight')
    @$('.winner').addClass('highlight')

  render: ->
    $(@el).html(@template(entry: @model))
    this

This is a snippet of code from Ryan Bate's RailsCasts' on Backbone.js

Seems to me that the same code can be written using the underscore bindAll and bind functions as follows:

class Raffler....
  ...
  initialize: ->
    _bindAll @, 'render', 'highlightWinner'
    @model.bind 'change',@render
    @model.bind 'highlight',@highlightWinner
  ... 
```

问题：

1.  这两个在功能上是等价的吗？
2.  如果是，那么 jQuery 代码似乎更清晰、更明确。这只是个人喜好问题吗？

在此先感谢您的时间。

巴拉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:27:28.147

jQuery 的“on”用于与 Backbone 的“bind/bindAll”完全不同的目的。jQuery 的“on”的目的是在事件发生时调用一个函数。Underscore 的bind 或bindAll 的目的是将一个函数绑定到一个对象上，这意味着无论何时调用该函数，*this*的值都会是你调用bind 时传递的对象。Underscore 的 bindAll 与 bind 做的事情完全相同，除了一次有多个函数。

您会发现在使用 Backbone 构建时，它们会一起使用。假设您有一个模型设置了一个函数，您可以在内部调用该函数来修改模型。如果您使用 jQuery 或 Backbone 的“on”函数将该函数绑定到一个事件，当它触发的事件时，*这*将是触发事件的 DOM 元素，这意味着该函数中对*this*的任何引用都将不再起作用，因为*this*不是不再是模型，它是 dom 元素。但是，如果我们在模型的构造函数中调用 _.bind(this, callback)，它将确保*this*始终是模型。

Backbone 还实现了一个“on”函数，它更类似于 jQuery 的“on”，但用于 Backbone 事件。可以[在主干文档上阅读](http://backbonejs.org/)

# android - Activity 不会启动服务

> ID：12464923
> 
> 赞同：0
> 
> 时间：2012-09-17T18:13:47.183
> 
> 标签：android, service, android-activity

我正在尝试从 y 应用程序的主要活动启动 IntentService，但它不会启动。我在清单文件中有服务。这是代码：

主要活动

```
public class Home extends Activity {
    private LinearLayout kontejner;
    IntentFilter intentFilter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);
        kontejner = (LinearLayout) findViewById(R.id.kontejner);
        intentFilter = new IntentFilter();

        startService(new Intent(getBaseContext(), HomeService.class));
    }
} 
```

服务：

```
public class HomeService extends IntentService {

    public HomeService() {
        super("HomeService");
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        Toast.makeText(getBaseContext(), "TEST", Toast.LENGTH_LONG).show();
        }
} 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.salefinder"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Home"
            android:label="@string/title_activity_home" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <service android:name=".HomeService" />
    </application>
<uses-permission android:name="android.permission.INTERNET"/>
</manifest> 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:21:00.340

`onHandleIntent`从后台线程调用。您不能修改 UI，或者在这种情况下，从 UI 线程外部制作 Toast。因此，我不希望您的服务会发生任何事情。

只需尝试写一些东西，`Log.d()`看看您的服务是否被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:59:33.670

似乎android缓存了应用程序的错误版本-我强行关闭它并重新启动它，并且它起作用了...

# blogger - Blogger SyntaxHighlighter 根本不起作用

> ID：12464924
> 
> 赞同：18
> 
> 时间：2012-09-17T18:13:49.647
> 
> 标签：blogger, syntaxhighlighter, blogger-dynamic-views

我已经尝试在 Blogger 上安装 SyntaxHighlighter 3.0.83 几个小时了。我已经尝试了很多教程，但它仍然不起作用。我的意思是它看起来就像插入到 pre 标签中的普通文本一样。

我创建了一个新博客并粘贴：

```
<link href='http://alexgorbatchev.com/pub/sh/current/styles/shCore.css'     rel='stylesheet' type='text/css'/>
<link href='http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css' rel='stylesheet' type='text/css'/>
<script src='http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js' type='text/javascript'></script>
<script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js'     type='text/javascript'></script>
<script language="javascript" type="text/javascript">
SyntaxHighlighter.config.bloggerMode = true;
SyntaxHighlighter.all();
</script> 
```

...就在关闭 head 标签之前。上面粘贴的代码是在这里生成的：[generator](http://www.way2blogging.org/widget-generators/syntax-highlighter-scripts-generator)

奇怪的是它可以在我自己的 html 文档中使用。举个例子：

```
<html>
<head>
<link href='http://alexgorbatchev.com/pub/sh/current/styles/shCore.css' rel='stylesheet' type='text/css'/>
<link href='http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css' rel='stylesheet' type='text/css'/>
<script src='http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js' type='text/javascript'></script>
<script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js' type='text/javascript'></script>
<script language="javascript" type="text/javascript">
    SyntaxHighlighter.config.bloggerMode = true;
    SyntaxHighlighter.all();
</script>
</head>
<body>
<pre class='brush:java;'>import gt.memorize;
public class Test
{
    private static final String test = "test";
}</pre>
</body>

</html> 
```

但是相同的 pre 标签在博客上不起作用。

我也试过粘贴

```
<script language="javascript" type="text/javascript">
    SyntaxHighlighter.config.bloggerMode = true;
    SyntaxHighlighter.all();
</script> 
```

在 b:skin 标签末尾的 body 和粘贴样式的末尾。两者都不起作用。而且我不会将代码粘贴到撰写部分:) 我很困惑，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-12T08:11:17.517

对于动态视图，帖子的内容似乎是在引导语法高亮过程的脚本之后加载的。您可以解决它：

```
<pre class="brush: js" title="test" id="sh3-123">
var f = function () {
    return 1;
};
</pre>

<script type="text/javascript">
// code snippet is loaded here, use SH3 API to highlight it
var element = document.getElementById('sh3-123');
SyntaxHighlighter.highlight(undefined, element);
</script> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-30T20:53:53.820

我有同样的问题。设置 SyntaxHighlighter 的说明看起来很简单。所有教程或多或少都具有可比性，包括评论“在我的博客上它有效，如果它对你不起作用，那么你一定做错了什么”。没有什么对我有用，我没有突出显示。

**解决方案是切换到另一个 Blogger 模板**。它只是不适用于我选择的动态模板。切换到一个简单的模板就可以了。突出显示现在有效。

顺便说一句：在寻找错误的同时，我还尝试了[Prettify](https://code.google.com/p/google-code-prettify/)作为替代方案。它也没有工作。似乎动态模板做了一些导致两个语法荧光笔都失败的事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-04T16:33:33.540

[在 gisthub 上](https://gist.github.com)发布您的片段并像 youtube 视频一样嵌入（复制 HTML 嵌入代码

![在此处输入图像描述](../Images/bb33511de4a824346cdcb4240d15b699.png)

并粘贴到您的帖子中）。瞧！（图片由[http://www.restlessprogrammer.com/2013/02/adding-code-snippets-to-your-blog.html](http://www.restlessprogrammer.com/2013/02/adding-code-snippets-to-your-blog.html)提供）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-26T05:24:46.677

与 Stefan 的回答类似，我能够在使用简单模板的博客帐户中使其工作。

我是这样做的：

1.将标签`<link>`和`<script>`用于导入CSS和JS文件的`<head>`

2.然后将初始化或调用荧光笔的JS脚本放在`<body>`：

```
<script language="javascript">     
            SyntaxHighlighter.config.bloggerMode = true;
            SyntaxHighlighter.config.clipboardSwf = 'http://alexgorbatchev.com/pub/sh/current/scripts/clipboard.swf';
            SyntaxHighlighter.all(); 
</script> 
```

这是我能够使其工作的唯一方法，其中 Stefan 提到的 #2 可能是由于引导问题，因此需要将其放入体内。这是[我的博客文章，它使用它并成功显示了 Javascript](http://javanojutsu.blogspot.com.au/2014/11/global-exception-handling-ajax-calls-in_25.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-13T04:14:42.663

如果您已经登陆这里，这个详细的答案可能会对您有所帮助： [https ://stackoverflow.com/a/14659603](https://stackoverflow.com/a/14659603)

* * *

## TL;DR – 监听`viewitem`事件

问题是 Blogger“动态视图”主题在页面准备好后加载博客文章内容。幸运的是，您可以在内容加载事件上注册一个回调。

从 Blogger 控制台 → `Theme`→ `Edit HTML`→ 就在 之前`</head>`，插入以下行：

```
<script>$(blogger.ui()).on({ viewitem: SyntaxHighlighter.all });</script> 
```

单击`Save theme`，现在将在加载博客文章内容***后运行荧光笔。***

* * *

## 可自定义回调的替代方案

如果您需要更大的灵活性，请创建自己的函数：

```
<script>
   const onArticleLoad = (event, post, elem) => {
      const title = $('h1.entry-title').text().trim();
      console.log('Article: %c' + title, 'color: purple;');
      console.log(event, post, elem);
      };
   $(window.blogger.ui()).on({ viewitem: onArticleLoad });
</script> 
```

然后，每当您查看博客文章时，js 控制台都会显示如下内容： ![js控制台](../Images/11a27f1ebab195fb95e3ec21bb2e456a.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-27T14:22:51.717

虽然最初的问题得到了回答，但我偶然发现了一个导致语法突出显示失败的不同问题，并认为在这里提及解决方案可能会有所帮助。

我发现博主预览默认用https://打开帖子，这会强制所有页面链接到https。当使用来自 alexgorbatchev 主机的样式表时，会导致加载失败，因此突出显示将不起作用。这些错误显示在开发人员工具控制台中。

目前，该问题只能出现在 blogger domen 下的博客中，因为自定义 domen 不支持 https。此外，默认情况下禁用使用 https 的公共访问，因此这主要是发布预览的问题，可以轻松解决。但是，如果启用了 https 的公共访问，则突出显示将不起作用。

# tomcat - EC2（亚马逊）中的 Linux 无法为 tomcat 使用端口 80

> ID：12464926
> 
> 赞同：12
> 
> 时间：2012-09-17T18:13:50.880
> 
> 标签：tomcat, amazon-s3, amazon-ec2

首先，我只想看看它不是 ec2 控制台中的安全组设置。因为我可以设置apache，这是错误的80端口，并且能够通过80端口访问apache网站。但是对于 tomcat，如果我使用端口 8080（默认）或大于 1023 的一些值（我认为这个端口），它就可以工作。但是当我更改 server.xml（将 8080 更改为 80）时，如果我使用 80 端口，它无法工作，我成功启动服务，但没有 80/http 监听。我知道这应该是一些权限问题（只有root可以在1023端口以下启动服务）。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-18T09:52:03.600

对于这个问题，我个人的选择是使用`iptables`将所有流量从端口 80 重定向到运行 Tomcat 的上端口（例如 8080）。

```
/sbin/iptables -A INPUT -i eth0 -p tcp --dport 80 -j ACCEPT
/sbin/iptables -A INPUT -i eth0 -p tcp --dport 8080 -j ACCEPT
/sbin/iptables -A PREROUTING -t nat -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 8080 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T11:48:07.223

我以前这样做的方法是使用 Apache2 作为使用虚拟主机的代理，并代理到 Tomcat。这将处理请求，如果将来您决定使用多个 Tomcat 进行负载平衡，也可以用作负载平衡器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T20:32:49.937

将 Tomcat 配置为在 Linux 上的特权端口上运行的一种常见方法是使用[authbind](http://en.wikipedia.org/wiki/Authbind)。

以下是 Ubuntu 16.04 上 Tomcat 7 的设置步骤。

首先确保已安装 authbind：

```
sudo apt-get install authbind 
```

编辑`/etc/default/tomcat7`并取消注释这一行：

```
AUTHBIND=yes 
```

为端口 80 创建绑定权限文件：

```
sudo touch /etc/authbind/byport/80
sudo chmod 500 /etc/authbind/byport/80
sudo chown tomcat7 /etc/authbind/byport/80 
```

如果您还使用 https，请对端口 443 执行与上述相同的操作。

# objective-c - 在不使用浏览器扩展的情况下控制下载

> ID：12464929
> 
> 赞同：0
> 
> 时间：2012-09-17T18:14:07.320
> 
> 标签：objective-c, macos, cocoa, download-manager

我见过包括 IDM 在内的下载管理器程序在没有扩展的情况下控制浏览器中的下载，他们称之为（高级浏览器集成）。我想知道是否有人可以针对类似情况提出一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:45:40.127

IDM 仅在 Windows 上工作，并且使用它是一个特定于 Windows 的服务来执行他的*高级浏览器集成*技巧。`Windows Filtering Platform`

如果你想在 Windows 上做类似的事情，你应该研究那个平台。

据我所知，在 unix 系统上，没有像 Windows 过滤平台这样的东西。包过滤和其他类似防火墙的功能发生在内核中，并且有多种实现：哪个正在运行（如果有）取决于用户决定如何配置系统（即使`ipf`几乎可以保证是在 BSD 和BSD 派生系统）。

特别是在 Mac Os X 上，您可能想要检查`Network Kernel Extensions`. 我不确定它们是否足以做你想做的事，但我怀疑它们是。

# android - 如何使用早期 SDK 的选项卡导航创建 Android 活动？

> ID：12464930
> 
> 赞同：1
> 
> 时间：2012-09-17T18:14:25.543
> 
> 标签：android, android-2.2-froyo, android-tabs

我想支持 Android SDK 8，并且能够使用标签导航。当我尝试通过 GUI 向导使用选项卡创建活动时，我收到以下错误：

![在此处输入图像描述](../Images/04e376807d2f719284ab10d1ddc0ede1.png)

实现选项卡并仍支持这些旧版本 SDK 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:18:16.260

在 navigationType 中选择 none 即在 navigationType 下拉列表中的第一个选项

# objective-c - 雪豹下不显示核心动画层

> ID：12464932
> 
> 赞同：4
> 
> 时间：2012-09-17T18:14:33.780
> 
> 标签：objective-c, macos, osx-snow-leopard, calayer

我最近将我的 OS X 应用程序中的一个视图转换为层托管，并且在 Mountain Lion 下一切正常，但是我的一位测试人员抱怨在 Snow Leopard 下没有显示这些层。我编写了一个小型测试应用程序来执行进一步的测试（源代码[在这里](http://dl.dropbox.com/u/18450868/LayerTest.zip)），并且这个测试应用程序在 10.6 下也不起作用。

这是设置层的主要代码主体：

```
- (id)initWithFrame:(NSRect)frameRect
{
    NSLog(@"initWithFrame");
    self = [super initWithFrame:frameRect];
    if (self != nil)
    {
        srand((unsigned)time(NULL));

        _rootLayer = [[CALayer alloc] init];
        _rootLayer.delegate = self;
        _rootLayer.anchorPoint = CGPointMake(0.0, 0.0);
        _rootLayer.frame = NSRectToCGRect([self bounds]);
        _rootLayer.needsDisplayOnBoundsChange = NO;
        _rootLayer.masksToBounds = YES;

        self.layer = _rootLayer;
        self.wantsLayer = YES;

        _backgroundLayer = [[CALayer alloc] init];
        _backgroundLayer.delegate = self;
        _backgroundLayer.anchorPoint = CGPointMake(0.5, 0.5);
        _backgroundLayer.frame = CGRectInset(NSRectToCGRect([self bounds]), BACKGROUND_INSET, BACKGROUND_INSET);
        _backgroundLayer.cornerRadius = 5.0;
        _backgroundLayer.needsDisplayOnBoundsChange = NO;
        _backgroundLayer.masksToBounds = YES;
        [_rootLayer addSublayer:_backgroundLayer];

        _mouseLayer = [self _createOtherLayer];
        _mouseLayer.opacity = 0.5;
        for (unsigned i = 0; i < NUM_OTHER_LAYERS; i++)
            _otherLayers[i] = [self _createOtherLayer];

        [_backgroundLayer addSublayer:_mouseLayer];

        [_rootLayer setNeedsDisplay];
        [_backgroundLayer setNeedsDisplay];

        [self _positionOtherLayersInRect:frameRect];

        _trackingArea = nil;
        [self updateTrackingAreas];
    }

    return self;
} 
```

这是创建其他层的方法：

```
- (CALayer *)_createOtherLayer
{
    CALayer *layer = [[CALayer alloc] init];
    layer.delegate = self;
    layer.anchorPoint = CGPointMake(0.5, 0.5);
    layer.bounds = CGRectMake(0.0, 0.0, 64.0, 64.0);
    layer.position = CGPointMake(0.0, 0.0);
    layer.needsDisplayOnBoundsChange = NO;
    layer.masksToBounds = YES;
    layer.shadowColor = CGColorGetConstantColor(kCGColorBlack);
    layer.shadowOffset = CGSizeMake(2.0, -2.0);
    layer.shadowRadius = 2.0;
    layer.shadowOpacity = 1.0;
    [_backgroundLayer addSublayer:layer];
    [layer setNeedsDisplay];
    return layer;
} 
```

谁能建议为什么这些层在 10.6 下不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:31:02.180

您是否尝试过将 initWithFrame: 中的代码移动到 awakeFromNib 中？这似乎是一个很常见的错误，导致层被搞砸了。在[这个问题](https://stackoverflow.com/questions/6723161/simple-example-of-calayers-in-an-nsview)中，问题在于层是在 initWithFrame 中设置的，但由于 nib 默认标记为不需要层，因此它们在之后立即被清除。将代码移动到 awakeFromNib，而不是使用传递的帧使用 self.frame 并查看是否可以解决问题。至少它应该不会更糟（在将代码移动到 awakeFromNib 之后在运行 Lion 的 Mac 上运行它仍然可以正常工作，所以它没有破坏任何东西），它可能只是你正在寻找的解决方案为了。

希望这可行，或者您很快就会找到另一个解决方案。祝你有美好的一天。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:59:13.520

如果你改变会发生什么：

```
CALayer *layer = [[CALayer alloc] init]; 
```

至：

```
CALayer *layer = [CALayer layer]; 
```

不知道为什么它会有所作为，但也许值得一试。您是否也尝试过使用 insertSubLayer:atIndex: 而不是 addSubLayer？

# javascript - 使用 javascript 从输入中验证字符数量、文本长度和小数位

> ID：12464934
> 
> 赞同：2
> 
> 时间：2012-09-17T18:14:49.117
> 
> 标签：javascript, asp.net, validation

我正在使用 javascript 来验证来自 ASPxGridView 控件（DevExpress 组件）内的文本框的输入。

我正在使用这个 javascript 代码来验证它（通过 OnKeyPress 事件）：

```
function CheckKey(s, e) {
    var key = ASPxClientUtils.GetKeyCode(e.htmlEvent);
    var char = String.fromCharCode(key);
    if (e.htmlEvent.shiftKey) {
        if (!IsAvailableChar(char))
            ASPxClientUtils.PreventEvent(e.htmlEvent);
    } else
        if (!(IsAvailableChar(char) || IsAvailableKey(key))) ASPxClientUtils.PreventEvent(e.htmlEvent);

    return;
}

function IsAvailableChar(char) {
    var AvailableChars = "0123456789,";
    return AvailableChars.indexOf(char) != -1;
}

function IsAvailableKey(key) {

    switch (key) {
        case 46: //delete
            return true;
            break;
        case 37: //left arrow
            return true;
            break;
        case 39: //right arrow
            return true;
            break;
        case 16: //shift
            return true;
            break;
        case 188: //comma
            return true;
            break;
        default:
            return false;
            break;
    } 
```

我用它来“阻止”一些字符，它工作正常。但现在我想做一些更复杂的事情：我不希望用户在文本框中输入多个逗号。

比这更复杂一点：这个文本框的最大长度是 6。我希望它只允许两个小数位，并且在小数点前最多三个数字。例如：我希望它允许这些字符串：“123,12”、“45,32”、“7,65”、“9,6”、“85,32”、“94,1”、“310”、 2"。我不希望它允许这些字符串：“1,123”、“125,789”、“1234,2”

关于我如何做到这一点的任何想法？

谢谢！

**编辑：**

我尝试使用你们告诉我喜欢的两个正则表达式：

```
function CheckKey(s, e) {
    var key = ASPxClientUtils.GetKeyCode(e.htmlEvent);
    var char = String.fromCharCode(key);

    var text = document.getElementsByName(s.uniqueID)[0].value + char;

    var regEx = new RegExp("/^\d{0,3}(,\d{0,2})?$/");

    if(regEx.test(text))
        return;
    else
        ASPxClientUtils.PreventEvent(e.htmlEvent);

    return;
} 
```

但是，`regEx.test(text)`即使输入与正则表达式匹配，它也总是返回 false。

**另一个编辑：**

我在上面的代码中更改了 RegExp 对象的实例化：

```
var regEx = new RegExp("/^\d{0,3}(,\d{0,2})?$/"); 
```

对此：

```
var regEx = /^\d{0,3}(,\d{0,2})?$/ 
```

现在它起作用了，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:40:08.333

```
/^\d{0,3}(,\d{0,2})?$/.test(textbox.value + char); 
```

这将匹配具有多达三个小数点前位置的任何数字。可选地，它允许小数点和最多 2 个小数位。也匹配空字符串，方便使用。所以这将检查以确保结果框匹配。

正则表达式的解释：

```
^ 
```

字符串的开始

```
\d{0,3} 
```

0 到 3 位（含）

```
(...)? 
```

可选组

```
,\d{0,2} 
```

逗号后跟 0 到 2 位数字（含）

```
$ 
```

字符串结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:48:28.367

```
var regex_test = /^[1-9][0-9]{0,2},[0-9][0-9]{0,1}$/;
var string = '766,99';

if(regex_test.test(string)){
    console.log('good');
} 
```

# xcode - 创建自动添加 git-submodules 等的“模板”XCode 项目？

> ID：12464935
> 
> 赞同：1
> 
> 时间：2012-09-17T18:14:56.883
> 
> 标签：xcode, macos, git, git-submodules

我有一些 xcode 项目（静态库），我通过使用 git-submodules 将它们包含在其他几个项目中。这很好用，我喜欢这种在项目之间共享代码的方式。但是，由于我将其中一些库添加到我创建的几乎每个新项目中，我想以某种方式简化这个过程。创建某种“模板”，我可以将其作为所有项目的基础。

我想要一些方法来自动完成这些步骤：

1.  创建一个名为 X 的新项目
2.  添加子模块的固定（或动态）列表
3.  将添加的子模块自动添加到 Xcode 项目中

是否可以为此创建一个脚本？使用如下语法：

fooproj -n "酒吧" -s "基础，核心数据，uikit"

（其中 Bar 是新项目和基础的名称，coredata 和 uikit 是要添加的子模块）

还是有其他方法可以简化这个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T09:43:53.173

你看过 Xcode 模板吗？它们非常强大，是 Xcode 当前设置新项目的基础。以下是有关如何创建 Xcode 模板的一些链接：

[NSScreencast](http://nsscreencast.com/episodes/68-xcode-project-templates)，[bob Mccune 的博客](http://www.bobmccune.com/2012/03/04/creating-custom-xcode-4-file-templates/)，[meandmark.com](http://meandmark.com/blog/2011/11/creating-custom-xcode-4-file-templates/)

还有一些示例资源可以帮助您入门：

[Xcode 5 项目模板](https://github.com/reidmain/Xcode-5-Project-Templates)和[最小模板](https://github.com/borealkiss/Minimal-Template)

起初他们很困惑，现在我不能没有他们。Xcode 模板可以节省大量时间。

# c# - Windows 8 URI Launcher 不会启动图像和文档路径

> ID：12464944
> 
> 赞同：0
> 
> 时间：2012-09-17T18:15:25.687
> 
> 标签：c#, windows, windows-runtime

我正在尝试使用 Launcher API 从我的 Windows 8 应用程序中启动一个文件（文档、图片等），但该文件不会使用与其关联的默认程序打开。

单击文件时会运行以下代码：

`AttachedFile file = e.ClickedItem as AttachedFile;`

`bool isLaunched = await Launcher.LaunchUriAsync(new Uri(file.Path, UriKind.Absolute)); //isLaunched is false`

指定的路径是在将其粘贴到文件资源管理器时有效的绝对路径。(C:\用户...\file.txt)

使用带有 StorageFile 的启动器会返回错误，因为应用程序没有编辑文件的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:29:39.207

您是否需要以编程方式访问本地文件夹或库之外的文件？抱歉，没有用于此的 API。

```
 var fold = Windows.Storage.KnownFolders.DocumentsLibrary; 

   var f1 = await fold.GetFileAsync("hi.txt");       
   var options = new Windows.System.LauncherOptions();
   options.DisplayApplicationPicker = true;
   bool success = await Windows.System.Launcher.LaunchFileAsync(f1, options); 
```

应添加“清单中的功能”，以使用 DocumentLibrary、PictureLibrary、MusicLibrary 等 KnownFolders...

来源：http://lunarfrog.com/blog/2011/10/03/winrt-storage-overview

# c# - 解析 XML 时出错

> ID：12464945
> 
> 赞同：0
> 
> 时间：2012-09-17T18:15:34.053
> 
> 标签：c#, xml, utf-16

当我不断收到以下错误时，我正在尝试将包含特殊字符的 XML 文件的字符串内容解析到 XDocument 中以进行进一步处理：

> 名称不能以“.”开头 字符，十六进制值 0x00。第 1 行，第 8 位。

我无法控制此文件。我所能做的就是从我有权读取的网络共享中解析它。文件内容如下：

```
<?xml version="1.0" encoding="utf-16"?>
<ns0:SAEErr xmlns:ns0="http://xyz">
<ErrorInformation>olsfdhfaskldhfksajdfkajsf</ErrorInformation>
<OriginalMessage>慐浹湥䥴Ɽ慐浹湥却慴畴䍳摯ⱥ慐&lt;/OriginalMessage>
</ns0:SAEErr> 
```

上面解析文件的代码如下：

```
StringBuilder sb = new StringBuilder();
        sb.Append("<root>");
        sb.Append(FileUtil.ReadFileContent(fileName));
        sb.Append("</root>");

        return XDocument.Parse(sb.ToString()); 
```

我在这里想念什么？

提前致谢！

更新：以下代码更新做到了：

```
 XElement body = XElement.Load(fileName);

 return new XDocument(new XDeclaration("1.0", "utf-16", "no"), body); 
```

谢谢亨克！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:31:02.180

读取文件时，`XElement.Load()`我只能在更改`utf-16`为`utf-8`处理行后重现您的错误。所以这确实是一个编码错误。

编辑：

你的代码：

```
 StringBuilder sb = new StringBuilder();
  sb.Append("<root>");
  sb.Append(FileUtil.ReadFileContent(fileName));  // Encoding ??
  sb.Append("</root>");
  return XDocument.Parse(sb.ToString()); 
```

尝试：

```
 XElement body = XElement.Load(fileName); 
  XDocument doc = new XDocument(new XElement( "root", body)); 
```

# php - 从 php 的缓存中清除刚刚显示的图像

> ID：12464949
> 
> 赞同：2
> 
> 时间：2012-09-17T18:16:01.817
> 
> 标签：php, ajax, jquery, browser-cache

我想清除或不写入缓存 url 图像，代码是在 ajax 上创建的。现在我想显示图像并且不保存在缓存中

索引.php

```
<html>
<head>
    <meta charset="utf-8">
    <LINK href="style.css" rel="stylesheet" type="text/css">
    <script  src="jquery.js"></script>
    <script  src="script.js"></script>        
</head>
<body> 

<form id="target" method="get" ENCTYPE="multipart/form-data">
Выберете файл: 
<INPUT NAME="myfile" id="myfile" TYPE="file">
<br/>
Time:
<INPUT NAME="time" id="time" TYPE="text" value="10"><br/>
<INPUT TYPE="button" VALUE="Загрузить" onclick="show_info()">

</form>
<div id="result">

</div>
</body> 
```

js

```
 function getPath(path) {

        var finalPath = path.substr(12);

        return finalPath; // returns just file name and you can print/put in some input
}
 function parse(){
var url = document.getElementById("myfile").value;
var time = document.getElementById("time").value;
url = getPath(url);
$.ajaxSetup({cache: false});
$.get('xml_parsing.php',{url:url,nextelement:k}, function(data) {
$('#result').html(data);

   });
 }
function show_info(){

setInterval("nextElement()", 5000);

}
 function nextElement(){
   k++;
  parse();
 } 
```

和ajax文件

```
<?php

$doc = new DOMDocument();
$doc->load($_GET['url'] );  
$products = $doc->getElementsByTagName( "offer" );
$id = $_GET['nextelement'];
$offers = $doc->getElementsByTagName( "offers" );
if($id<$products->length){
$price = $products->item($id)->getElementsByTagName( "price" );
$name = $products->item($id)->getElementsByTagName( "name" );
$currency = $products->item($id)->getElementsByTagName( "currencyId" );
$img = $products->item($id)->getElementsByTagName( "picture" );
$price_show = $price->item(0)->nodeValue; 
$name_show = $name->item(0)->nodeValue;
$img_show = $img->item(0)->nodeValue."?anti_cache=" . rand(0,200);
$currency_show = $currency->item(0)->nodeValue;

echo "<div id='name'>".$name_show."</div>";
echo "<div id='image'><img src=".$img_show." ></div>";
echo "<div id='price'>".$price_show." ".$currency_show."</div>";

} 
```

我怎样才能做到这一点？我有 3 个文件。一个 index.php，第二个 js 和 ajax 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:21:12.777

在这条线上：

```
$.get('xml_parsing.php',{url:url,nextelement:k}, function(data) { 
```

将其更改为：

```
$.get('xml_parsing.php?anti_cache='+Math.floor(Math.random()*1000),{url:url,nextelement:k}, function(data) { 
```

这将确保所请求的页面不会轻易被缓存。

希望有帮助:-)。

# ios - 如何在 safari 上制作直播 swf 广播

> ID：12464953
> 
> 赞同：0
> 
> 时间：2012-09-17T18:16:15.297
> 
> 标签：ios, xcode, cordova, jquery-mobile, safari

在 iphone safari 上从 Works制作直播`embed` `SWF Player` 电台的最佳方式是什么`http://streamcyclone.com/`

在所有谈论本地转换并上传到服务器的地方都找不到任何帮助主题

```
<embed type="application/x-shockwave-flash" 
 src="http://manage.streamcyclone.com/player/player.swf" width="260" height="80" 
 style="undefined" id="mpl" name="mpl" quality="high" allowfullscreen="true" 
   allowscriptaccess="always" wmode="opaque" flashvars="****************"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:29:07.583

这很简单，您可以使用 [https://github.com/devgeeks/phonegap-plugins/tree/AudioStreamer/iPhone/AudioStream](https://github.com/devgeeks/phonegap-plugins/tree/AudioStreamer/iPhone/AudioStream)

它是一个 phonegap 插件（官方），仅用于流式传输音频文件。就像在 read.me 中所说的那样使用它。

# sql - 奇怪的 SQL 查询

> ID：12464956
> 
> 赞同：0
> 
> 时间：2012-09-17T18:16:38.717
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在做一个项目，我有一个奇怪的要求。

我有一个`A`带字段的表`(TechID(Primary Key), Orders (INTEGER NUMBER),Name (Varchar))`。

的值`Orders`可以是`0, 1, 2, 3, .......`我的任务是显示按`Orders`字段排序的表的内容。`Orders`首先显示字段值为 的行`1`，然后依次显示其余行。值为 的行`0`必须显示在末尾。如果所有`Orders`字段的值都是 0，我需要按`TechID`字段对表格进行排序。

关于实现这一目标的任何想法？这可以通过 SQL 查询来实现，还是我应该为此编写一个 T-Sql 脚本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T18:25:01.817

这是一个简单的：

```
select *
from A
order by case Orders     -- 1\. Orders values
           when 0 then 2 --    of zero collate after
           else        1 --    non-zero Orders values
         end ,           --
         Orders ,        -- 2\. Then collate by Orders value proper
         TechID          -- 3\. Then by TechID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T18:23:11.753

没有实际测试它，但这个一般的想法应该有效：

```
SELECT * FROM A
ORDER BY
    CASE Orders WHEN 0 THEN 2147483647 ELSE Orders END,
    TechID 
```

注意：这假设`Orders`是一个`int`. 如果它`bigint`使用 9,223,372,036,854,775,807 代替。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T18:21:57.493

在 ORDER BY 子句中使用[case](http://msdn.microsoft.com/en-us/library/ms181765.aspx)语句。当所有 Orders 值为 0 时，按 TechID 的二级排序将满足您按 TechID 排序的要求。

```
SELECT *
FROM A
ORDER BY
   Case
      When (Orders = 0) Then 9999
      Else   Orders
   End,
   TechID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T18:50:26.697

不知道它是否适用于oracle以外的数据库

SELECT * FROM T ORDER BY 订单空值最后

# android - Android应用内结算取消支付，应用未激活

> ID：12464960
> 
> 赞同：1
> 
> 时间：2012-09-17T18:16:52.370
> 
> 标签：android

当应用程序未运行时，我无法弄清楚应用内计费流程应该如何处理广播事件。我有一个托管产品设置，据我所知，运行良好。使用测试帐户，我可以购买我发布的组件，我的测试应用程序会处理它，并保留它的状态。然后我通过我的商家帐户取消此订单，应用程序再次收到该事件并删除该项目。

当应用程序处于活动状态而不是取消订单时，就会出现问题。我退出了它（不是用家，有多个后退按钮）。如果我现在取消该项目，我的“*设备*”会收到“购买失败”通知，但是当我启动我的应用程序时，似乎什么都没有发生，因此该项目的状态仍然是购买的。

我不确定计费服务是否仍在运行。鉴于[文档](http://developer.android.com/guide/google/play/billing/billing_overview.html#billing-action-notify)说我的应用程序必须发回一个 CONFIRM_NOTIFICATIONS 或者它继续发送它，我只能假设它是。但是，如果应用程序处于活动状态，为什么它无法与我的数据库交互并像正确那样删除项目？

我希望 tihs 很清楚，如果之前已经讨论过，我很抱歉，我在搜索中找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:24:49.863

很抱歉回答我自己的问题，但希望我的发现能帮助那些像我一样困惑的人。

我的问题是认为示例中提供的 Dungeons.java 类具有修改所需的所有代码。示例设计将其数据库实现嵌套在观察者类中，该类在用户与商店交互时处于活动状态。它在我的问题中概述了它为我创建的问题，如果在此观察者未注册或应用程序未运行之后取消事务会发生什么。

通过反复试验，我的解决方案是将数据库交互从观察者中取出并将其放入

```
private void purchaseStateChanged(int startId, String signedData, String signature) { 
```

BillingService 类的。

放在这里，当我的广播接收器触发时，我会执行取消操作并相应地更新我的数据库，无论我的应用程序是否启动，更不用说我的观察者注册了。

# asp.net-mvc - 从 asp.net mvc 中的 global.resx 文件读取和存储资源键/值对

> ID：12464964
> 
> 赞同：0
> 
> 时间：2012-09-17T18:17:22.393
> 
> 标签：asp.net-mvc, globalization

我正在 asp.net mvc 中实现全球化，并且我将资源键/值存储在 Global.resx 文件中。现在，我需要从 global.resx 文件中读取所有这些资源值并将它们存储在 ViewBag 中，以便我可以在 mvc 视图中访问 ViewBag 值。我不想使用 Resource.getValue(key,culture) 选项读取值，因为这将使我对代码中的所有键进行硬编码，但是我想在不指定键的情况下读取所有值并将它们全部存储在 ViewBag 中。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:42:51.410

Resources.AppResource 在我的案例类中包含资源。请参见下面的代码：

```
 System.Resources.ResourceSet resourceSet = Resources.AppResource.ResourceManager.GetResourceSet(System.Globalization.CultureInfo.CurrentUICulture, true, true);
        foreach (System.Collections.DictionaryEntry item in resourceSet)
        {
            object key = item.Key;
            object value = item.Value;
        } 
```

# c - 检测换行符

> ID：12464966
> 
> 赞同：2
> 
> 时间：2012-09-17T18:17:32.687
> 
> 标签：c

我正在阅读结构数组中的标准输入学生。在为一个学生介绍了详细信息后，我询问了另一个学生的详细信息。如果选择是Y，我会添加新学生，如果选择是N，break。但是，如果选择只是 ENTER 怎么办？如何检测换行符？我尝试使用 getchar()，但它跳过了 stdin 的第一次读取。当我调试时，它不会停止到第一行 test=getchar()，而是停止到第二行。

```
#include <stdio.h>
#include <conio.h>
#include <ctype.h>
#include <stdlib.h>

struct student
{
char name[20];
int age;
};

int main()
{
struct student NewStud[5];
char test;
int count=0;
for(count=0;count<5;count++)
{
    printf("Enter the details for %s student: ",count>0?"another":"a");
    printf("\nName : ");
    scanf("%s",NewStud[count].name);
    printf("\nAge : ");
    scanf("%d",&NewStud[count].age);
    printf("Would you like to continue? (Y/N)");
    test=getchar();
    if(test=='\n')
    {
        printf("Invalid input. Would you like to continue? (Y/N)");
        test=getchar();
    }
    while(tolower(test) !='n' && tolower(test) != 'y')
    {
        printf("Invalid input.Would you like to continue? (Y/N)");
        test=getchar();
    }
    if(tolower(test) == 'n')
    {
        break;
    }
    if(tolower(test) == 'y')
    {
        continue;
    }
}

getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:03:56.303

问题是`scanf()`在输入流中留下换行符，您必须先使用它，然后才能在`getchar()`.

前任：

```
scanf("\n%s",NewStud[count].name);
getchar();
printf("\nAge : ");     
scanf("%d",&NewStud[count].age);
getchar();
printf("Would you like to continue? (Y/N)");
test=getchar();   // Now this will work 
```

查看此[链接](https://stackoverflow.com/questions/5918079/fgets-doesnt-work-after-scanf)了解更多信息。它适用于 fgets，但与`getchar()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:35:43.813

将`test`值与 '\n' 进行比较，如以下示例：

```
int main() {
    int test;
    test = getchar();
    printf("[%d]\n", test);
    if(test == '\n') printf("Enter pressed.\n");
    return(0);
} 
```

ps：你`test`一定是`int`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T18:35:55.303

当然它会跳过第一次阅读，你把它放在一个 if 语句中，如下所示：`if(test=='\n')`

你得到了那个学生的所有信息，然后用户按下了回车键，所以你返回`for(count=0;count<5;count++)`并要求新学生的新输入。我认为您想要做的是改用 while 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T18:44:49.987

你可以更换

```
> test=getchar();
>     if(test=='\n')
>     {
>         printf("Invalid input. Would you like to continue? (Y/N)");
>         test=getchar();
>     } 
```

和

```
while((test=getchar()) == '\n')
{
  printf("Invalid input. Would you like to continue? (Y/N)");
} 
```

# ios - 当视图向上移动键盘时，UINavigationBar BarButtonItems 不响应点击

> ID：12464969
> 
> 赞同：3
> 
> 时间：2012-09-17T18:17:40.777
> 
> 标签：ios, cocoa-touch, uiview, uinavigationbar, uikeyboard

当显示键盘时，我将模式视图向上移动，以防止界面的某些部分被键盘隐藏。

当视图移动时，工具栏取消/保存按钮不会响应点击。检测到模态内的点击并响应良好。

![在此处输入图像描述](../Images/0617b0b66139fd76f5858e1795162482.png)

我已将其设置为在文本字段外点击时键盘应该关闭，但是在点击导航栏时这也不起作用。

**当视图偏移时，如何适当地响应对 barbuttonitems 的点击？**

这是我在显示键盘时向上移动模式的方式：

```
- (void) animateTextField: (UITextField*) textField up: (BOOL) up
{
    int movementDistance;
    float movementDuration;

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {

        if(
           UIInterfaceOrientationIsLandscape(self.interfaceOrientation)
          )
        { 
            //code for landscape shift - not relevant because you can't see the toolbar
       else{
            NSLog(@"Portrait for animation");
            movementDistance = IPAD_PORTRAIT_KEYBOARD_HEIGHT; 
            movementDuration = KEYBOARD_ANIMATION_DURATION; 

            if(up){
                keyboardAppearedInLandscape = false;   
            }else{
                //the keyboard is going down
                NSLog(@"Keyboard going down");
                //is the iPad in the same orientation now that it was when it came up?
                if ([[UIDevice currentDevice] orientation] == UIInterfaceOrientationPortrait || [[UIDevice currentDevice] orientation] == UIInterfaceOrientationPortraitUpsideDown) 
                {
                    if (!keyboardAppearedInLandscape) {
                        //don't do anything - the keyboard is being dismissed in the same way it was called. It's much the same in any case.
                    }else{
                        movementDistance = IPAD_LANDSCAPE_KEYBOARD_HEIGHT;
                    }
                }
            }
        }

    } 
    int movement = (up ? -movementDistance : movementDistance);

    [UIView beginAnimations: @"anim" context: nil];
    [UIView setAnimationBeginsFromCurrentState: YES];
    [UIView setAnimationDuration: movementDuration];
    self.view.frame = CGRectOffset(self.view.frame, 0, movement);
    [UIView commitAnimations];
}
//end text field movy-ness 
```

以下是我如何检测文本字段外的点击以关闭键盘：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {      
        //keyboard goes away if you tap somewhere else on screen
        NSLog(@"resignFirstResponder");
        [self.view endEditing:YES];

    }

    [super touchesBegan:touches withEvent:event];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T22:13:12.843

**您将不会收到原始矩形边界之外的触摸事件，因为...**

*   `SuperView`认为视图没有改变位置
*   视图在自身内部而不是从外部向上移动
*   屏幕上的视觉元素正在发生变化但未被识别

## 相反，要正确移动子视图：

1.  `SuperView`应该回应`UIKeyboard`
    *   利用`UIKeyboardWillHideNotification`&&`UIKeyboardWillShowNotification`
2.  放`ClipsToBounds to YES`
    *   现在您将看不到视图范围之外的内容。
    *   使调试更有效

* * *

查看：

*   [将完成按钮添加到 UINavigationBar](https://stackoverflow.com/questions/6131660/add-a-done-button-in-a-uinavigationbar) @StackOverflow

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T23:47:41.740

我认为您的问题是您将视图从内部向上移动，而不是从外部移动。因此，屏幕上的视觉元素正在发生变化，但根据您的 SuperView，视图位于同一位置，因此您只会在原始矩形内获得触摸事件（这个矩形称为“边界”）。

相反，您的 SuperView 应该响应`UIKeyboardWillShowNotification`并将`UIKeyboardWillHideNotification`子视图移动到适当的位置。

`ClipsToBounds`如果你设置为.你可以更容易地调试这种东西`YES`。这将使您看不到视图“边界”（可以接收触摸事件的区域）之外的东西。

# tk - 寻找一个健壮和完整的基于 fltk 和 tk 的窗口管理器和文件管理器

> ID：12464970
> 
> 赞同：0
> 
> 时间：2012-09-17T18:17:42.680
> 
> 标签：tk, fltk

我遇到了两个最不为人知的窗口管理器和文件管理器，它们更适合freebsd，并且基于完全不同的api，即fltk和tk：

1）flwm（fltk窗口管理器）和whim（tkwm，tk窗口管理器）。

2) flfm/mfm 文件管理器和 tkDesk 文件管理器。

发现它们是最少被提及的。

有没有用 fltk 和 tk 创建的更强大、更完整的桌面和文件管理器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:30:46.277

有 EDE，又名 Equinox 桌面环境 - [http://www.equinox-project.org](http://www.equinox-project.org)。这是一个相当活跃的项目，并且包含在许多 Linux/BSD 发行版中。

# c# - 如何创建按钮矩阵

> ID：12464973
> 
> 赞同：1
> 
> 时间：2012-09-17T18:17:52.920
> 
> 标签：c#, wpf, datagrid, matrix

我需要创建一个 10*10 的静态矩阵（需要是数据网格），每个单元格中都包含按钮。
任何人都知道如何做到这一点？

谢谢你们。

圣诞节：

```
<Grid>
    <DataGrid ItemsSource="{Binding Arr}">  
        <DataGrid.ItemTemplate>  
            <DataTemplate>  
                <Button />  
            </DataTemplate>  
        </DataGrid.ItemTemplate>  
    </DataGrid>  
</Grid> 
```

代码：

```
namespace WpfApplication4  
{
    /// <summary>  
    /// Interaction logic for MainWindow.xaml  
    /// </summary>  
    public partial class MainWindow : Window  
    {  
       private List<string> m_Arr;  

        public MainWindow()  
        {  
             InitializeComponent();  
             DataContext = this;  

            m_Arr = new List<string>();  
            for (int i = 0; i < 10; i++)  
            {  
                m_Arr.Add(i.ToString());  
            }  
         }  

        public List<string> Arr  
        {
            get { return m_Arr; }  
            set { m_Arr = value; }  
        }  
    }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:29:48.930

您可能不想将按钮数组绑定到数据网格。

相反，您应该构建一个命令数组，将 itemscontrol 的 itemssource 绑定到命令列表，并将这些命令数据模板化为绑定回命令的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:30:24.727

正如您在评论中所说，您可以创建一个二维数组。但是，默认 WPF`DataGrid`不支持 2D`ItemsSource`

例如，您可以使用`DataGrid2D`此处介绍的控件：

[如何基于二维数组填充 WPF 网格](https://stackoverflow.com/questions/276808/how-to-populate-a-wpf-grid-based-on-a-2-dimensional-array)

我个人使用它并且......它工作正常！

底部注释：不要创建数组`Buttons`以用作 ItemsSource。您应该执行以下操作，例如：

```
<DataGrid ItemsSource="{Binding MyList}">
  <DataGrid.ItemTemplate>
     <DataTemplate>
        <Button Content="{Binding}" />
     </DataTemplate>
  </DataGrid.ItemTemplate>
</DataGrid> 
```

哪里`MyList`是`IList<string>`

把它作为一个测试。然后你可以使用更复杂`ItemsSource`的，包括内容字符串+`Command`点击按钮时调用的。方式更清洁，符合 MVVM =)

# php - 以给定格式打印 JSON

> ID：12464975
> 
> 赞同：2
> 
> 时间：2012-09-17T18:18:00.713
> 
> 标签：php, json, format

我有一个记录用户视图的网站统计数据库。我想阅读并导出为 JSON。我可以做到，但我想将它们重新写入给定的格式。我该怎么办？

预期的 JSON 代码：//源自[http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=](http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=) ?

```
callback(/* AAPL historical OHLC data from the Google Finance API */
[
/* Sep 2005 */
[1127088000000,52.64],
[1127174400000,53.19],
[1127260800000,52.11],
[1127347200000,51.90],
[1127433600000,53.20],
[1127692800000,53.84],
[1127779200000,53.44],
[1127865600000,51.08],
[1127952000000,52.34],
[1128038400000,53.61],
...
]); 
```

这是我的代码：

```
$sql_viewer="select sum(vwr_id) as num,vwr_date from car_viewer where vwr_tid='$_tid' group by year(vwr_date) desc, month(vwr_date) desc";
$result_viewer=mysql_db_query($dbname,$sql_viewer);
while($rec_viewer=mysql_fetch_array($result_viewer)){
    $_viewerDate=$rec_viewer['vwr_date'];
    $_viewerNum=$rec_viewer['num'];
    foreach($rec_viewer as $key=>$val){
        $arr[$key]=$val;
    }
    $main_arr[]=$arr;
}
echo json_encode($main_arr); 
```

结果 JSON：

```
[{"0":"221944676","num":"221944676","1":"2012-09-01 00:20:08","vwr_date":"2012-09-01 00:20:08"},{"0":"66772926","num":"66772926","1":"2012-08-09 23:35:04","vwr_date":"2012-08-09 23:35:04"},{"0":"609","num":"609","1":"2012-02-20 22:40:29","vwr_date":"2012-02-20 22:40:29"}] 
```

问题是如何将结果 JSON 重写为上述预期格式？问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:20:54.417

### 更新：更新的答案没有尾随逗号和新行。

只需使用您自己的`echo`而不是`json_encode`：

代替：

```
echo json_encode($main_arr); 
```

和：

```
$final = "";
foreach ($main_arr as $key => $value)
    $final .= "[$key, $value],\n";
echo substr($final, 0, -3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:40:20.803

您的代码的问题是内部数组同时具有数字和整数索引。

```
$sql_viewer="select sum(vwr_id) as num,vwr_date from car_viewer where vwr_tid='$_tid' group by year(vwr_date) desc, month(vwr_date) desc";
$result_viewer=mysql_db_query($dbname,$sql_viewer);
while($rec_viewer=mysql_fetch_array($result_viewer)){
    $_viewerDate=$rec_viewer['vwr_date'];
    $_viewerNum= intval ( $rec_viewer['num'] );
    // Create an array with just integer indexes
    $main_arr[]=array(strtotime($_viewerDate) * 1000, $_viewerNum);
}

echo 'callback(' . json_encode($main_arr) . ');'; 
```

，上面的代码使内部数组只有整数索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T04:43:58.450

最后我发现了问题 - 无法显示图表。因为我做错了mySQL。所以结果没有正确呈现。下面是工作的。感谢@Juan Mendes。任何帮助。

```
$sql_vwr="select vwr_date from car_viewer where vwr_tid='$_tid' group by date(vwr_date) order by date(vwr_date) asc";
$result_vwr=mysql_db_query($dbname,$sql_vwr);
while($rec_vwr=mysql_fetch_array($result_vwr)){
    $_vwrDate=date("Y-m-d",strtotime($rec_vwr['vwr_date']));
    $_vwrDateTime=date("Y-m-d H:i:s",strtotime($rec_vwr['vwr_date']));

    //get num by date
    $sql_nVwr="select vwr_id from car_viewer where vwr_date like '$_vwrDate%' and vwr_tid='$_tid'";
    $result_nVwr=mysql_db_query($dbname,$sql_nVwr);
    $_nVwr=mysql_num_rows($result_nVwr);

    // Create an array with just integer indexes
    $main_arr[]=array(strtotime($_vwrDateTime) *1000, (int)$_nVwr);
}   
echo $_c .'(' . json_encode($main_arr) . ');'; 
```

# asp.net - 在 ASP.NET WebService 中启动线程

> ID：12464976
> 
> 赞同：3
> 
> 时间：2012-09-17T18:18:05.493
> 
> 标签：asp.net, multithreading, wcf, asynchronous

我有一个 IIS 托管的 WCF 网络服务。

它上面有一个方法（我们称之为“ConfirmOrder”）。调用此方法时，我想 1\. 对数据库执行一些快速操作，从而生成 OrderId 2\. 启动一个新线程，该线程将执行一些缓慢的工作（例如生成一封电子邮件并发送它） 3\. 从1\. 同步到客户端。4\. 最终，当它完成时，在 2\. 中创建的新线程将完成所有其余的处理并发送电子邮件。

问题：

(1) 我确实有如下代码：

```
// do printing and other tasks 
OrderConfirmedThreadHelper helper = new OrderConfirmedThreadHelper(userSession, result);
// some things first (like generating barcodes) in this thread 
Logger.Write(basket.SessionId, String.Format("Before ConfirmOrderSync"), LogCategoryEnum.Sales, System.Diagnostics.TraceEventType.Verbose);
helper.ConfirmOrderSync();
Logger.Write(basket.SessionId, String.Format("After ConfirmOrderSync"), LogCategoryEnum.Sales, System.Diagnostics.TraceEventType.Verbose);
// slower things (like rendering, sending email) in a separate thread
Thread helperThread = new Thread(new ThreadStart(helper.ConfirmOrderAsync));
helperThread.Start();
return result; 
```

但这似乎引起了问题；至少，该服务一直处于锁定状态。这是一件坏事吗？

（2）我尝试将其更改为

```
// slower things (like rendering, sending email) in a separate thread            
ThreadPool.QueueUserWorkItem(new WaitCallback(helper.ConfirmOrderAsync)); 
```

但是一旦主线程完成，ThreadPool 线程似乎就被杀死了，因为它是一个后台线程。

有没有更好的方法来做到这一点 - 没有编写一个全新的 Windows 服务来与之通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:57:14.533

如果第二个线程在请求​​线程（来自浏览器的线程）之后完成，那么您就有问题了，因为它会被运行时回收并终止。如果您可以等待（如果它只是要发送一封电子邮件，我将等待几秒钟）您可以使用 ManualResetEvent 同步一个线程以等待另一个线程完成并优雅地清理。

如果您等不及了，那么在这种情况下，邮件处理的最佳选择是以下之一

1.  Windows 服务。
2.  您可以使用 jquery ajax 调用从客户端代码调用一个 .ashx，传递必要的数据以发送邮件。
3.  一个批处理作业（计划任务、sql server 作业等），它读取要从数据库发送的待处理邮件并发送它们。它会每 X 分钟运行一次，因此您不必担心

希望有帮助！

# c# - 如何解析人为输入的逻辑属性，例如这个和（那个或另一个）？

> ID：12464977
> 
> 赞同：6
> 
> 时间：2012-09-17T18:18:07.743
> 
> 标签：c#, .net, parsing

作为即将到来的项目的一部分，我想对其进行设置，以便某个域对象可以应用于标签或标签组合。

我希望能够让用户以人类可读的方式输入这些组合，类似于：

*   tag-a and (tag-b or tag-c) --> 适用于 tag-a+tag-b 或 tag-a+tag-c
*   tag-d or (tag-e and tag-f) --> 适用于 tag-d 或 tag-e+tag-f

是否存在从输入的文本字符串进行这种逻辑解析的工具集？我可以在幕后定义具有一定区别的标签（{}、[] 等），这样它们也可以更容易地被解析出来。

只是想知道最好的方法是将人类可读的文本解析为那些不同的组合集合，而无需用户输入每个特定的组合。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T18:58:04.423

通常这涉及两个步骤：*词法*分析（*词法分析*的缩写）和*解析*。

在第一步中，输入字符串被转换为一系列词汇项，称为*标记*。为此，您可以为不同类型的令牌声明一个枚举类型，例如：

```
public enum TokenType
{
    OpenParenthesis,
    CloseParenthesis,
    And,
    Or,
    Tag
} 
```

和一个令牌类：

```
sealed class Token
{
    public TokenType Type { get; private set; }
    public string Item { get; private set; }
    public Token(TokenType type, string item) { Type = type; Item = item; }
} 
```

现在您编写一个算法，将输入字符串（例如`tag-a and (tag-b or tag-c)`）转换为一系列`Token`实例。您可以使用正则表达式来识别各种项目，例如`@"\s*\(\s*"`正则表达式来识别左括号。完成的序列将如下所示：

*   `new Token(TokenType.Tag, "tag-a")`
*   `new Token(TokenType.And, null)`
*   `new Token(TokenType.OpenParenthesis, null)`
*   `new Token(TokenType.Tag, "tag-b")`
*   `new Token(TokenType.Or, null)`
*   `new Token(TokenType.Tag, "tag-c")`
*   `new Token(TokenType.CloseParenthesis, null)`

一旦你有了这个序列，你需要在它上面运行一个*解析器*。解析这样的表达式有很多策略；首先，我向您推荐[递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)。

当然，您将需要一些类来包含解析树：

```
abstract class Node { }
enum BooleanOperator { And, Or }
sealed class BooleanNode : Node
{
    public BooleanOperator Operator { get; private set; }
    public Node Left { get; private set; }
    public Node Right { get; private set; }
    public BooleanNode(BooleanOperator op, Node left, Node right)
    {
        Operator = op;
        Left = left;
        Right = right;
    }
}
sealed class TagNode : Node
{
    public string Tag { get; private set; }
    public TagNode(string tag) { Tag = tag; }
} 
```

然后递归下降解析器可能看起来像这样：

```
public static Node ParseExpression(Token[] tok)
{
    int i = 0;
    return parseExpressionBoolOr(tok, ref i);
}
private static Node parseExpressionBoolOr(Token[] tok, ref int i)
{
    var left = parseExpressionBoolAnd(tok, ref i);
    while (tok[i].Type == TokenType.Or)
    {
        i++;
        var right = parseExpressionBoolAnd(tok, ref i);
        left = new BooleanNode(BooleanOperator.Or, left, right);
    }
    return left;
}
private static Node parseExpressionBoolAnd(Token[] tok, ref int i)
{
    var left = parseExpressionPrimary(tok, ref i);
    while (tok[i].Type == TokenType.And)
    {
        i++;
        var right = parseExpressionPrimary(tok, ref i);
        left = new BooleanNode(BooleanOperator.And, left, right);
    }
    return left;
}
private static Node parseExpressionPrimary(Token[] tok, ref int i)
{
    if (tok[i].Type == TokenType.OpenParenthesis)
    {
        i++;
        var node = parseExpressionBoolOr(tok, ref i);
        if (tok[i].Type != TokenType.CloseParenthesis)
            throw new InvalidOperationException();  // or customised parse exception
        return node;
    }
    else if (tok[i].Type == TokenType.Tag)
    {
        var node = new TagNode(tok[i].Item);
        i++;
        return node;
    }
    else
        throw new InvalidOperationException();  // or customised parse exception
} 
```

请注意，这是一个大大简化的示例。但是，它具有最大的灵活性：您可以扩展此算法以绝对解析您想要的任何语言。

# git - 您如何处理提交中的非编译代码状态？

> ID：12464978
> 
> 赞同：2
> 
> 时间：2012-09-17T18:18:13.793
> 
> 标签：git, version-control, commit

我目前正在将一个更大的项目（游戏）迁移到不同的游戏引擎。很多东西需要调整，但大部分代码本身可以保持原样。

迁移包括多个不同的步骤，例如扩展不同的基类或用新引擎中的方法调用替换方法调用。事情，我通常会放入多个提交中。

我知道提交一些东西是不好的做法，它不会编译到 VCS 中（因为你创建了一个你以后不能安全返回的点，因为它已经坏了），但我也想保留所有这些“迁移步骤”分开（而不是做出*一个*非常大的提交，包含所有内容）。

你会如何处理这种情况？

# perl - 为什么函数调用作为推送的参数会导致 Perl 中的“不是数组引用”？

> ID：12464984
> 
> 赞同：0
> 
> 时间：2012-09-17T18:18:48.823
> 
> 标签：perl, perl-data-structures

有人会这么愉快地解释为什么接下来会发生吗？这是代码：

```
#!/usr/bin/perl
use v5.14;
use warnings;

my @arr = (1, 2, 3);

sub func
{
    return @arr;
}

push(&func(), 4);

say @arr; 
```

当我尝试运行它时，输出为`Not an ARRAY reference at ...`.

我想这是因为不是对. 而是对一个普通列表进行`&func()`评估，并被视为. 有人可以解释为什么会发生这种情况，因为在文档中我没有发现任何与此相关的内容。`@arr``1, 2, 3``1``ARRAY``push``push`

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T18:27:01.840

sub 不可能返回数组。您正在返回在列表上下文中评估数组的结果，也就是说您正在返回其内容的列表。显然，这不是你想要的。

[`push`](http://perldoc.perl.org/functions/push.html)现在将接受对数组的引用，因此您可以使用

```
sub func {
   return \@arr;
}

push(func(), 4); 
```

请注意，`push`直到最近才需要一个数组文字，因此如果您想要向后兼容，必须使用以下内容：

```
sub func {
   return \@arr;
}

push(@{ func() }, 4); 
```

* * *

PS — 请注意，我删除了`&`. 你为什么要告诉 Perl 忽略没有原型的 sub 的原型？

# iphone - 应用内购买不起作用

> ID：12464985
> 
> 赞同：0
> 
> 时间：2012-09-17T18:18:52.343
> 
> 标签：iphone, in-app-purchase, mkstorekit

我想将应用内购买添加到我的应用中，但我无法让它工作。我正在使用 MKStoreKit 4.2。

下面是购买代码：

```
- (IBAction)onPayButtonPressed:(id)sender {
    [[MKStoreManager sharedManager] buyFeature:@"com.flowrower.TestApp.0.99.item"
     onComplete:^(NSString* purchasedFeature, NSData* receiptData)
     {
         NSLog(@"Purchased: %@", purchasedFeature);
     }
     onCancelled:^
     {
        NSLog(@"Cancelled");
     }];

    NSLog (@"END");
} 
```

在输出中，我总是只得到“END”。所以 buyFeature 根本不起作用。

*   在装有 iOS 6.0 的 iPhone 4S 上进行测试。
*   将供应配置文件与应用内购买支持一起使用。
*   iTunes Connect 中有产品 ID“com.flowrower.TestApp.0.99.item”，状态为“准备提交”
*   该产品是消耗品，我已将其添加到 MKSoreKitConfigs.plist
*   iTunes Connect 中的通讯录、银行和税费一切正常
*   在我的设备上从 iTunes 和 App Store 注销。
*   在应用程序启动时收到此消息：“NSUbiquitousKeyValueStore 错误：user.TestApp 没有有效的 com.apple.developer.ubiquity-kvstore-identifier 权利”。我不知道它是否相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:08:17.653

The problem was with iOS 6\. 12 days ago new version of MKStoreKit released and it work like a charm in iOS 6\. Thanks guys.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:57:10.350

如果未通过，则需要在沙箱中进行测试。我不知道 MKStoreKit 但我认为您需要临时证书！？

# java - 使用 PATTERN MATCHER 解析 NMEA 数据

> ID：12464986
> 
> 赞同：1
> 
> 时间：2012-09-17T18:18:55.347
> 
> 标签：java, android, parsing, pattern-matching, nmea

使用模式/匹配器方法对 ANDROID 的正则表达式感到疯狂。我已经好几天没有成功了。是的，在寻求直接帮助之前，我一直在寻求帮助。好的，这是交易：我的传入流看起来像这样

UTC 时间（HhMmSs）：154653
状态（A=OK，V=KO）：V
纬度：4428.2011
方向（N/S）：N
经度：00440.5161
方向（E/W）：W
速度（节）：000.5
方向（度） : 342.8
UTC 日期 (DdMmAa): 050407
磁变化:
变化 (E/W):
模式: A

我现在想要的只是纬度和经度值。

我的代码如下所示：

```
public class NmeaParser {
/**
 * Tag used for log messages
 */
public String nmeaData;
public String lat; //latitude
public String lon; //longitude

private static final String LOG_TAG = "NPGPS";

public String longitude, latitude;
//find the text pattern
public static final Pattern NMEA_PATTERN = Pattern.
            compile(
                    "\\d{6}" +
                    ":\\s\\D" +
                    "\\w+\\S\\s\\d{4}.\\d+" +
                    ":\\s\\D" +
                    "\\w+\\S\\s\\d{5}.\\d+" +
                    ":\\s\\D" +
                    "\\d{3}.\\d{1}" +
                    "\\d{3}.\\d{1}" +
                    "\\d{6}" +
                    ":\\s\\D" +
                    ":\\s\\D"
                    //".*" //this works as a test
                    );

public String parseNmeaSentence(String gpsSentence) {
        Matcher rmcMatcher = NMEA_PATTERN.matcher(gpsSentence);
        //Log.i(LOG_TAG, "dataNP: "+ rmcMatcher);
        if (rmcMatcher.find()) {
                //Log.d("Matcher", "PATTERN MATCHES!");
            //else
                //Log.d("MATCHER", "PATTERN DOES NOT MATCH!");
            //String time = rmcMatcher.group(1);
          latitude = rmcMatcher.group(3);
          nmeaData = latitude;

        }
            return nmeaData;
  }
} 
```

我不断收到这些错误：

```
09-17 11:37:36.936: E/AndroidRuntime(8756): FATAL EXCEPTION: main
09-17 11:37:36.936: E/AndroidRuntime(8756): java.lang.NullPointerException
09-17 11:37:36.936: E/AndroidRuntime(8756):     at                 android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.widget.AbsListView.obtainView(AbsListView.java:2058)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.widget.ListView.onMeasure(ListView.java:1155)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.view.View.measure(View.java:12723)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.view.View.measure(View.java:12723)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.view.View.measure(View.java:12723)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.view.View.measure(View.java:12723)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.view.View.measure(View.java:12723)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.os.Looper.loop(Looper.java:137)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at android.app.ActivityThread.main(ActivityThread.java:4575)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at java.lang.reflect.Method.invokeNative(Native Method)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at java.lang.reflect.Method.invoke(Method.java:511)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-17 11:37:36.936: E/AndroidRuntime(8756):     at dalvik.system.NativeStart.main(Native Method) 
```

显然，我在模式/匹配器方法中搞砸了我的正则表达式语法。任何帮助都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:03:21.750

从您的跟踪来看，您的代码中似乎`android.widget.ArrayAdapter`缺少资源，因此这是您无法继续的真正问题。

对于您的正则表达式，您的正则表达式中没有任何[捕获组](http://docs.oracle.com/javase/tutorial/essential/regex/groups.html)，并且您的模式与您的输入字符串不匹配。

使用多个表达式时，最好的方法是一次匹配 1 或 2 个表达式，以使它们首先工作。

因为您只想要纬度和经度，所以这里是让您（重新）开始的正则表达式代码：

```
Pattern NMEA_PATTERN = Pattern.compile(
                ".*Latitude: (\\d{4}.\\d+).*" + 
                "Longitude: (\\d{5}.\\d+).*");
Matcher m = NMEA_PATTERN.matcher(gpsSentence);

if (m.matches()) {
    String latitude = m.group(1);
    String longitude = m.group(2);
    ...
} 
```

# android - “Viewpager”返回第一页/视图

> ID：12464997
> 
> 赞同：1
> 
> 时间：2012-09-17T18:19:43.357
> 
> 标签：android, android-viewpager

如果我有 3 个视图要通过 ViewPager 显示，它应该在第三个视图之后返回到第一个视图，而不是在第三个视图处停止。我希望它在用户在最后一页上向前翻时返回到第一页/视图。

谢谢，

我的页面适配器；

```
package com.example.pictures;

import android.content.Context;
import android.media.AudioManager;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;

public class MyPagerAdapter extends  PagerAdapter{

public int getCount() {
    return 6;
}

public Object instantiateItem(View collection, int position) {

    View view=null;

    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    switch (position) {
    case 0:
        resId = R.layout.picture1;
        view = inflater.inflate(resId, null);         
        break;
    case 1:
        resId = R.layout.picture2;   
        view = inflater.inflate(resId, null);
        break;
    case 2:
        resId = R.layout.picture3;
        view = inflater.inflate(resId, null);
        break;
    case 3:
        resId = R.layout.picture4;
        view = inflater.inflate(resId, null);
        break;
    case 4:
        resId = R.layout.picture5;
        view = inflater.inflate(resId, null);   
        break;
    case 5:
        resId = R.layout.picture6;
        view = inflater.inflate(resId, null);
        break;
    }

    ((ViewPager) collection).addView(view, 0);

    return view;
}

@SuppressWarnings("unused")
private Context getApplicationContext() {
    // TODO Auto-generated method stub
    return null;
}

private void setVolumeControlStream(int streamMusic) {
    // TODO Auto-generated method stub

}

@SuppressWarnings("unused")
private Context getBaseContext() {
    // TODO Auto-generated method stub
    return null;
}

@SuppressWarnings("unused")
private PagerAdapter findViewById(int myfivepanelpager) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);
}

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);

}

@Override
public Parcelable saveState() {
    return null;
}

public static Integer getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

OnPageChangeListener;

```
package com.example.pictures;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.view.ViewPager;
import android.support.v4.view.ViewPager.OnPageChangeListener;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class Pictures extends Activity implements OnPageChangeListener{
SoundManager snd; 
int sound1,sound2,sound3;
View view=null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.picturespage);

 MyPagerAdapter adapter = new MyPagerAdapter();
 ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
 myPager.setAdapter(adapter);
 myPager.setCurrentItem(0); 
 myPager.setOnPageChangeListener(this);
snd = new SoundManager(this);
 sound1 = snd.load(R.raw.sound1);
 sound2 = snd.load(R.raw.sound2);
 sound3 = snd.load(R.raw.sound3);

}
public void onPageScrollStateChanged(int arg0) {
    // TODO Auto-generated method stub

}

public void onPageScrolled(int arg0, float arg1, int arg2) {
    // TODO Auto-generated method stub

}

public void onPageSelected(int position) {
    // TODO Auto-generated method stub

    switch (position) {
    case 0:
            snd.play(sound1);
        break;
    case 1:
        snd.play(sound2);
        break;
    case 2:
            snd.play(sound3);
        break;
    case 3:
      Toast.makeText(this, "1", Toast.LENGTH_SHORT).show();
        break;
    case 4:
       Toast.makeText(this, "2", Toast.LENGTH_SHORT).show();
        break;
    case 5:
        Toast.makeText(this, "3", Toast.LENGTH_SHORT).show();
        break;
    }
}
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T05:25:51.887

您可以在以下位置查看无限 viewpager：[https ://github.com/antonyt/InfiniteViewPager](https://github.com/antonyt/InfiniteViewPager)

或者，您可以创建一个缓冲区 viewpager（即 page3）并将 onPageChangeListener（[http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)）添加到您的适配器并覆盖 onPageSelected( int pos) 方法。

```
 if(pos == 3){
     myPager.setCurrentItem(0);
 } 
```

希望这有帮助。

# c# - 在 C# 中创建时间事件

> ID：12464999
> 
> 赞同：2
> 
> 时间：2012-09-17T18:19:51.063
> 
> 标签：c#, events, timer

我正在尝试创建一个在一定时间更改时执行函数的事件。计时器由另一个代码完成，它应该调用 Plus(1)，但这会改变所有计时器（如果我创建多个）吗？而这段代码实际上并没有工作。

```
namespace @event
{
    class Program
    {
        static void Main(string[] args)
        {
            Tick tijd = new Tick();
            tijd.interval = 10;
            tijd.TijdVeranderd += new EventHandler(Uitvoeren);
            dynamic func = new Tick();

            for (int i = 0; i < 100; i++)
            {
                func.Plus(1);
            }

            Console.ReadLine();
        }

        static void Uitvoeren(object sender, EventArgs e)
        {
            Console.WriteLine("Uitgevoerd!");
        }
    }

    public class Tick
    {
        public event EventHandler TijdVeranderd;

        public int interval;

        private int tijd;

        public void Plus(int i)
        {
            tijd += 1;
        }

        public int Verander
        {
            get { return this.tijd; }
            set
            {
                this.tijd = value;

                if (tijd == interval)
                {
                    if (this.TijdVeranderd != null)
                        this.TijdVeranderd(this, new EventArgs());

                    tijd = 0;
                }
            }
        }

        public Tick() { }
    }
} 
```

编辑：我不想使用.net 计时器，我想创建自己的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:25:34.340

只需像这样使用 .net 计时器：

```
 System.Timers.Timer aTimer = new System.Timers.Timer();
        aTimer.Elapsed += new System.Timers.ElapsedEventHandler(aTimer_Elapsed);
        aTimer.Interval = 1000;   //here you can set your interval
        aTimer.Start(); 
```

在这里您可以捕获事件并调用其他方法：

```
 void aTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        //TODO: call your method like "Plus"
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:26:38.800

您可以尝试使用此代码

```
private static System.Timers.Timer aTimer;

public static void Main()
    {

        // Create a timer with a ten second interval.
        aTimer = new System.Timers.Timer(10000);

        // Hook up the Elapsed event for the timer.
        aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

        // Set the Interval to 2 seconds (2000 milliseconds).
        aTimer.Interval = 2000;
        aTimer.Enabled = true;

        Console.WriteLine("Press the Enter key to exit the program.");
        Console.ReadLine();

        // If the timer is declared in a long-running method, use
        // KeepAlive to prevent garbage collection from occurring
        // before the method ends.
        //GC.KeepAlive(aTimer);
    }

    // Specify what you want to happen when the Elapsed event is 
    // raised.
    private static void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        Console.WriteLine("The Elapsed event was raised at {0}", e.SignalTime);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T18:33:00.880

您的代码中似乎有几个错误：

首先，在 中`Main`，您调用`Plus()`的实例与`Tick`您配置的实例不同。尝试使用`tijd.Plus(1)`而不是`func.Plus(1)`.

此外，在 的实现中`Plus`，当您增加私有变量`tijd`时，与该属性关联的代码`Verander`不会被执行，因此不会触发任何事件。要快速修复，请递增`Verander`而不是`tijd`.

```
namespace @event
{
    class Program
    {
        static void Main(string[] args)
        {
            Tick tijd = new Tick();
            tijd.interval = 10;
            tijd.TijdVeranderd += new EventHandler(Uitvoeren);

            for (int i = 0; i < 100; i++)
            {
                tijd.Plus(1);
            }

            Console.ReadLine();
        }

        static void Uitvoeren(object sender, EventArgs e)
        {
            Console.WriteLine("Uitgevoerd!");
        }
    }

    public class Tick
    {
        public event EventHandler TijdVeranderd;

        public int interval;

        private int tijd;

        public void Plus(int i)
        {
            Verander += 1;
        }

        public int Verander
        {
            get { return this.tijd; }
            set
            {
                this.tijd = value;

                if (tijd == interval)
                {
                    if (this.TijdVeranderd != null)
                        this.TijdVeranderd(this, new EventArgs());

                    tijd = 0;
                }
            }
        }

        public Tick() { }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T19:30:03.703

我不知道您为什么不使用系统计时器，但这里有一个 [未经测试] 的计时器实现，它应该可以解决问题：

```
class MyCrudeTimer : IDisposable
{
    public event EventHandler Alarm ;

    public TimeSpan Duration           { get ; private set ; }
    public bool     AutomaticallyReset { get ; private set ; }
    public bool     IsRunning          { get ; private set ; }

    private Thread           timerThread ;
    private ManualResetEvent start       ;

    private void TimerCore()
    {
        try
        {
            while ( start.WaitOne() )
            {
                System.Threading.Thread.Sleep( Duration ) ;
                Alarm( this , new EventArgs() ) ;
            }
        }
        catch ( ThreadAbortException )
        {
        }
        catch ( ThreadInterruptedException )
        {
        }
        return ;
    }

    public MyCrudeTimer( TimeSpan duration , bool autoReset )
    {
        if ( duration <= TimeSpan.Zero ) throw new ArgumentOutOfRangeException("duration must be positive","duration") ;

        this.Duration            = duration  ;
        this.AutomaticallyReset  = autoReset ;
        this.start               = new ManualResetEvent(false) ;

        this.timerThread         = new Thread( TimerCore ) ;
        this.timerThread.Start() ;

        return ;
    }

    public void Start()
    {
        if ( IsRunning ) throw new InvalidOperationException() ;
        IsRunning = true ;
        start.Set() ;
        return ;
    }

    public void Stop()
    {
        if ( !IsRunning ) throw new InvalidOperationException() ;
        IsRunning = false ;
        start.Reset() ;
        return ;
    }

    public void Dispose()
    {
        try
        {
            if ( this.timerThread != null )
            {
                this.timerThread.Abort() ;
                this.timerThread = null ;
            }
        }
        catch
        {
        }
        return ;
    }
} 
```