# StackOverflow 问答 11246000-11246999

# php - 如何获取 26 行 MySQL 数据，但只显示前 25 行

> ID：11246005
> 
> 赞同：0
> 
> 时间：2012-06-28T13:42:01.097
> 
> 标签：php, mysql, pagination

我有一个使用 PHP 处理分页的简单任务。这个想法很简单，我想做我的 SQL 查询的 mysql_fetch_array ：

```
SELECT Name, Email, CellPhone FROM Users WHERE Username = '$Username' LIMIT $x, 26; 
```

如果该查询有 26 行，则意味着我必须显示“下一页”按钮。但是，我只想向用户显示它的前 25 行。

第 26 行仅用于指示是否应显示“下一页”按钮。

目前，我正在使用 WHILE 来显示行，但是如何在 25 次循环后“停止”WHILE？

```
while($rowSQL = mysql_fetch_array($sql))
{
echo "bla-bla-blah";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:43:36.593

这应该可以解决问题：

```
$count = 1;

while($rowSQL = mysql_fetch_array($sql)) {
    if ($count == 25) {
        last;
    }

    echo "bla-bla-blah";
    $count++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:47:42.220

您应该只检索您将要使用的那些。

您应该进行另一个查询，纯粹是为了查找数据库中有多少总行，并通过一些数学计算您是否需要另一个页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:49:35.510

```
<?php
$i= 0;
while($row= mysql_fetch_array($result)){
    $i++;
    print '<pre>'.$i.'</pre>';
    if($i== 25){
        break;
    }
} 
```

# php - PDO MSSQL 服务器 - 未找到驱动程序

> ID：11246007
> 
> 赞同：5
> 
> 时间：2012-06-28T13:42:04.107
> 
> 标签：php, sql-server, pdo, driver

我目前正在尝试在 MSSQL 2012 Express 上连接到我的 localdb。

我已经从[http://www.microsoft.com/en-us/download/details.aspx?id=20098下载并安装了官方的 microsoft 驱动程序](http://www.microsoft.com/en-us/download/details.aspx?id=20098)

我在我的 phpinfo() 中得到了某种 SQLSRV 部分。但是当我尝试创建一个新的 PDO 对象时，它说它没有驱动程序。我可以理解，因为 phpinfo() PDO 部分没有提到它，但它有自己的部分 + get_loaded_extensions 也显示 sqlsrv。我想那是来自官方的 MS 驱动程序？我在 Zend Server CE 5.6 和 PHP 5.3.9 中使用 php_sqlsrv_53_nts.dll

现在据我了解，我下载了错误的驱动程序，应该尝试 PECL 管理器带来的驱动程序吗？只有可用的源代码，显然我在 Windows 机器上，所以我可以忘记我需要自己编译的所有内容 - 在使用 powershell 和我的 pecl / pear 安装时，我实际上遇到了后缀错误。

有没有人解决这个问题？非常感谢任何帮助

一切顺利，理查德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:06:34.650

PDO 扩展与 Microsoft 提供的本机驱动程序不同。对于 PDO，您必须启用

```
extension=php_pdo_mssql.dll 
```

在你的 php.ini 中。

通常这个文件 (php_pdo_mssql.dll) 应该在你的 PHP 扩展目录 (C:...\php\ext) 中。如果它不在那里，您可以从[http://windows.php.net/download/](http://windows.php.net/download/)下载 PHP，然后从那里的一个包中获取扩展名（当然，取一个与您的 PHP 版本相对应的）。

//编辑：刚刚阅读你的最新评论。这个扩展现在可以使用很长时间了，可以被认为是有效的。如果不允许使用它，则必须重写代码以使用原生驱动程序为 PHP 提供的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-29T08:06:21.570

另一种可能性是使用默认包含在 php 扩展中的 odbc 驱动程序，但您仍然可能需要取消注释它们`php.ini`。

```
extension=php_pdo_odbc.dll 
```

之后不要忘记重新启动服务器;-)

**然后像这样使用它：**

```
$db = new PDO('odbc:Driver={SQL Server};Server=192.168.x.x;Database=DatabaseName; Uid=User;Pwd=Password');
$stmt = $db->query("SELECT the_usual FROM aTable WHERE all='well'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:07:41.703

好的。我想这只是这些日子之一。

我从 MS 提供的扩展名中加载了错误的扩展名。我需要使用`php_pdo_sqlsrv_53_nts` 而不是 `php_sqlsrv_53_nts`

感谢所有的帮助

# liquibase - 使用例如序列时如何区分数据库

> ID：11246009
> 
> 赞同：2
> 
> 时间：2012-06-28T13:42:10.443
> 
> 标签：liquibase

我刚开始使用[Liquibase](http://www.liquibase.org)并偶然发现了区分不同数据库功能的问题。

我们希望支持多个数据库（Oracle、MySQL、Derby - 仅举三例）。

都有不同的能力。在特定的 Oracle 支持`sequences`，而 MySQL 和 Derby 不支持。

当我让 hibernate 生成 DDL 时，我可以选择不同的方言，它会考虑这些不同的功能并`Sequencer`在使用 Oracle 时生成一个，在使用 Derby 或 MySQL 时使用一个普通表（用于 ID 生成）。

`oracle`现在，我知道我可以通过在`dbms`属性中指定 ' ' 来约束变更集。但是，我怎样才能为其他数据库做简单的表解决方案呢？似乎没有 'not oracle' 属性`dbms`。

其他人如何处理这个？（我在 liquibase 页面和论坛上都找不到任何关于它的信息。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:58:56.980

尝试在变更集上使用[先决条件](http://www.liquibase.org/documentation/preconditions.html)。支持布尔运算。

例如

```
 <preConditions onFail="CONTINUE">
     <or>
         <dbms type="oracle" />
         <dbms type="mysql" />
     </or>
 </preConditions> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T11:07:21.210

另一种方法是将所有序列放入`include`主更改日志中的 changlog 文件中，然后执行以下操作：

```
<changeSet
    dbms="oracle,db2,db2i"
    author="mccallim (generated)"
    id="1419011907193-1"
>
    <createSequence
        schemaName="${main.schema}"
... 
```

该变更集仅对列出的 DBMS 执行。

# ios - NSMutableArray 最后一个对象

> ID：11246010
> 
> 赞同：0
> 
> 时间：2012-06-28T13:42:11.273
> 
> 标签：ios, nsmutablearray, icarousel

我正在尝试 iCarousel，有一个函数可以删除视图的索引和数组的索引，

```
NSInteger index = carousel.currentItemIndex;
[carousel removeItemAtIndex:index animated:YES];
[imagesArray removeObjectAtIndex:index]; 
```

我正在删除它，直到剩下一项，然后如果剩下一项，我想插入它的副本。我试过这个：

`insertItemAtindex:carousel.currentItemIndex`但它正在插入最后一个视图。

但我想要的是在我的视图中插入 carousel's/imagesArray 最后一个对象/索引。如何实现它，或者如何确定 NSMutableArray 留在视图中的最后一个对象？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T14:22:02.537

`carousel.lastObject`！！！！！！！！！！！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T13:58:45.297

You can check for last object using -

```
int count = [yourArray count];
[yourArray objectAtIndex:count - 1]; //this will always return you last object 
```

# c - 我如何在血腥/DevC++ 编译器中使用有向图和三元组

> ID：11246011
> 
> 赞同：0
> 
> 时间：2012-06-28T13:42:14.083
> 
> 标签：c, c-preprocessor, digraphs, trigraphs

在编译器中，trigraphs 和 digraphs 不会被相应的单个字符替换。而是发出类似这样的警告，

```
12:26 G:\BIN\cLang\macro2.cpp [Warning] trigraph ??= ignored, use -trigraphs to enable 
```

我想知道为什么会出现这种类型的警告，以及如何解决这个问题以使用三合字母和二合字母。他们在语言中的目的是什么？？？

注意 - 我想看看二合字母和三合字母是如何工作的，所以不要告诉我不要使用它们，因为它们已经过时了......谢谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:49:24.037

当您调用编译器添加选项 -trigraphs 时，该消息会告诉您要做什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:59:30.003

看起来类似于我使用 gcc 收到的警告。

编译时没有任何标志：

```
$ gcc trigraphs.c 
trigraphs.c:5:10: warning: trigraph ??= ignored, use -trigraphs to enable 
```

所以我添加了编译器建议的标志：

```
$ gcc -trigraphs trigraphs.c 
$ ./a.out 
a test: #
$ 
```

这是我存储在文件 trigraphs.c 中的代码：

```
#include <stdio.h>

int main(void){
        printf("a test: ??=\n");
        return 0;
} 
```

# python - 如何将其他参数传递给事件回调？

> ID：11246013
> 
> 赞同：6
> 
> 时间：2012-06-28T13:42:21.667
> 
> 标签：python, wxpython

是否可以将其他参数传递给事件回调？

例如，如果我的事件绑定看起来像这样；

```
self.Bind(wx.EVT_BUTTON, self.do_something, self.button) 
```

我怎样才能将参数传递给我的方法？

```
self.do_something(self,event,arguments):
    """do something with arguments"""
    pass 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T13:46:27.603

使用[`functools.partial`](http://docs.python.org/library/functools.html#functools.partial)，或在一般情况下使用[`lambda`表达式](http://docs.python.org/reference/expressions.html#lambda)。

部分形式是

```
functools.partial(self.do_something, args) 
```

请注意，在这种情况下，`event`参数将在参数列表的末尾传递。等效的 lambda 形式是：

```
lambda event: self.do_something(args, event) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T13:46:21.100

使用 lambda：

```
self.Bind(wx.EVT_BUTTON, lambda event, args=args: self.do_something(event, args), self.button) 

self.do_something(self,event,arguments):
    """do something with arguments"""
    pass 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T13:47:10.753

目前尚不清楚您何时要提供这些参数，但如果您想及时提供它们`Bind`（这样您可以拥有一个`do_something`支持多种用途的），您可以使用`functools.partial`：

```
def do_something(self, arg, event):
  pass

self.Bind(wx.EVT_BUTTON, functools.partial(self.do_something, arg), self.button) 
```

然后当`do_something`被调用时，它会被`arg`你传入的`partial`，以及回调传递的事件调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T13:49:54.373

使用 lambda 函数。[wxPython wiki](http://wiki.wxpython.org/Passing%20Arguments%20to%20Callbacks)上有一些关于此的文档。[我还在我的lambda 教程](http://www.blog.pythonlibrary.org/2010/07/19/the-python-lambda/)中写过它。这是我在写它时创建的蹩脚示例（也在文章中）：

```
import wx

########################################################################
class DemoFrame(wx.Frame):
    """
    Frame that holds all other widgets
    """

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""        
        wx.Frame.__init__(self, None, wx.ID_ANY, 
                          "wx lambda tutorial",
                          size=(600,400)
                          )
        panel = wx.Panel(self)

        button8 = wx.Button(panel, label="8")
        button8.Bind(wx.EVT_BUTTON, lambda evt, name=button8.GetLabel(): self.onButton(evt, name))
        button10 = wx.Button(panel, label="10")
        button10.Bind(wx.EVT_BUTTON, lambda evt, name=button10.GetLabel(): self.onButton(evt, name))

        sizer = wx.BoxSizer(wx.HORIZONTAL)
        sizer.Add(button8, 0, wx.ALL, 5)
        sizer.Add(button10, 0, wx.ALL, 5)
        panel.SetSizer(sizer)

    #----------------------------------------------------------------------
    def onButton(self, event, buttonLabel):
        """"""
        print "You pressed the %s button!" % buttonLabel

# Run the program
if __name__ == "__main__":
    app = wx.App(False)
    frame = DemoFrame().Show()
    app.MainLoop() 
```

# ios - 在导航栏中自定义 UIBarButtonItem

> ID：11246014
> 
> 赞同：1
> 
> 时间：2012-06-28T13:42:22.070
> 
> 标签：ios, ios5, ios4

我试图自定义导航栏中的 UIBarButtonItem
我发现 UIBarButtonItem 中有一个属性：“tintColor”，我将它设置为这样

```
self.navigationItem.leftBarButtonItem.tintColor = [UIColor redColor]; 
```

它运作良好，但如果我尝试这个：

```
self.navigationItem.leftBarButtonItem.tintColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"imageName"]]; 
```

*1* . 它没有按预期工作，但是，leftBarButtonItem 显示**黑色**外观，为什么？

如果我尝试**clearColor**：

```
self.navigationItem.leftBarButtonItem.tintColor = [UIColor clearColor]; 
```

*2* . leftBarButtonItem 仍然显示**黑色**外观，为什么？

*3* . 我想用上面的图案图像自定义它，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:50:02.283

您可以查看此示例代码以自定义导航栏和后退按钮 [https://github.com/boctor/idev-recipes/tree/master/CustomBackButton](https://github.com/boctor/idev-recipes/tree/master/CustomBackButton)

# qt - 如何从 Qt 中的 QListView 中获取 QString？

> ID：11246022
> 
> 赞同：21
> 
> 时间：2012-06-28T13:42:49.277
> 
> 标签：qt, qstring, qlistview

我需要将选定的项目名称`QListView`作为`QString`. 我试过谷歌，但我没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-28T17:12:27.897

这取决于 selectionMode 可以说你有`ExtendedSelection`这意味着你可以选择任意数量的项目（包括 0）。

```
ui->listView->setSelectionMode(QAbstractItemView::ExtendedSelection); 
```

您应该遍历`ui->listView->selectionModel()->selectedIndexes()`以查找所选项目的索引，然后调用`text()`方法来获取项目文本：

```
QStringList list;
foreach(const QModelIndex &index, 
        ui->listView->selectionModel()->selectedIndexes())
    list.append(model->itemFromIndex(index)->text());
qDebug() << list.join(","); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-08-04T16:03:20.850

如果 if`QAbstractItemView::ExtendedSelection`被禁用（一次只能选择一项），这就是您可以在没有任何循环的情况下执行此操作的方法：

```
QModelIndex index = ui->listView->currentIndex();
QString itemText = index.data(Qt::DisplayRole).toString(); 
```

# c# - 当 Oracle 查询可以到达相同所有权的其他表时，为什么找不到表？

> ID：11246026
> 
> 赞同：1
> 
> 时间：2012-06-28T13:43:05.823
> 
> 标签：c#, linq, oracle, entity-framework

我有两个相同的查询（但查看不同的表），使用 Entity-Framework，调用 Oracle 数据库，一个能够找到表，但另一个不能。

```
using(CarContainer Cars = new CarContainer()) {
    var carModel = from c in temp.Cars.OfType<BMW>() orderby c.ID select c.MODEL;
}

using(CarContainer Cars = new CarContainer()) {
    var carModel = from c in temp.Cars.OfType<BENTLEY>() orderby c.ID select c.MODEL;
} 
```

当我运行第二个查询时，它给了我“Oracle.DataAccess.Client.OracleException：ORA-00942：表或视图不存在”

我使用相同的凭据打开了 SQL Plus，然后做了 a `select * from BENTLEY`，它给了我表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:35:41.707

当我使用我的*grants.sql*文件时，其中一个授权命令没有成功传递到 Oracle 数据库。

我添加了`GRANT ALL ON CHOWNER.BENTLEY TO ADMINROLE;`它，它再次起作用了！

# regex - 用于在 Apache 的访问日志文件中隔离 Comcast IP 地址的正则表达式

> ID：11246027
> 
> 赞同：0
> 
> 时间：2012-06-28T13:43:06.190
> 
> 标签：regex

实际上，我想将它用于我的 Apache 访问日志文件的事实是任意且无关紧要的，但它为这种情况提供了上下文。

我需要过滤掉与 Comcast IP 地址相关的记录。这是 Comcast 分配[的动态 IP 地址范围的列表。](http://postmaster.comcast.net/dynamic-IP-ranges.html)我需要一个可以匹配所有这些的正则表达式，并且只匹配那些。与此同时，我会自己解决这个问题，但我认为 SO 上会有一些 RegEx 专家会喜欢这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:57:24.737

正则表达式解决方案是可能的，但非常麻烦，因为子网掩码不是 8 的倍数。您需要编写一个函数来处理列表并转换为正则表达式。

最好使用正则表达式来获取 IP 地址并根据 Comcast 的 IP 地址列表测试 IP 地址。简单的实现将是一个允许您搜索小于参数的最近数字的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:04:55.660

那是很多IP地址。

例如，`24.0.0.0/12`定义 IP 范围`24.0.0.1`- `24.15.255.255`。要将[这些数字范围](http://www.regular-expressions.info/numericranges.html)与正则表达式匹配：

```
24:    24
0-15:  [0-9]|1[0-5]
0-255: [0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5] 
```

这使

```
(24)\.([0-9]|1[0-5])\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]) 
```

这只是为了`24.0.0.0/12`, 293 去。

如果你真的想这样做，你应该编写一个小脚本来自动将每个 IP 范围转换为正则表达式。

另一种方法是匹配任何 IP 地址并将其提供给使用适当模块/框架/API 进行匹配的回调。

# asp.net - asp.net中的并发逻辑

> ID：11246029
> 
> 赞同：2
> 
> 时间：2012-06-28T13:43:10.197
> 
> 标签：asp.net, sql, sql-server-2008, concurrency

我有一个在 SQL Server 2008 表中插入一行的 Web 表单。表有一个必须唯一的字段，但由于某些原因，我们不允许使用自动增量实用程序。取而代之的是，我选择了该字段的最大值并从代码中增加它并插入具有该 ID 的行。

问题是，如果多人同时使用此表单，则会出现并发问题，并且会将相同的 id 插入到表中。我不知道如何在 asp.net web 项目中解决这个问题，因为所有用户都有自己的会话和线程。

关于如何在 asp.net 项目中管理并发问题的任何想法都将非常有用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:47:29.007

如果您在存储过程中或在代码中的事务中执行插入操作，我看不出存在并发问题的原因。就像是：

```
BEGIN TRAN
DECLARE @MAX int
SELECT @MAX = MAX(ID) FROM MyTable
INSERT INTO MyTable (@MAX, VAlue, Value2..)
COMMIT TRAN 
```

或者

```
SqlCommand command = connection.CreateCommand();
SqlTransaction transaction;
transaction = connection.BeginTransaction("InsertRow");

... perform insert using command object ...

transaction.Commit(); 
```

# sql - INSERT 查询错误：不允许从数据类型 varchar 到 varbinary 的隐式转换。使用 CONVERT 函数运行此查询。

> ID：11246032
> 
> 赞同：4
> 
> 时间：2012-06-28T13:43:15.920
> 
> 标签：sql, sql-server, coldfusion

我正在尝试运行插入查询，但出现以下错误。如何将值传递到我的插入语句中？该值来自一个数组，`[cNotes]`列类型为`varchar NULL`.

提前致谢。

**错误：**

```
 Error Executing Database Query.  
        [Macromedia][SQLServer JDBC Driver][SQLServer]Implicit conversion from data type varchar    to varbinary is not allowed. Use the CONVERT function to run this query.  

         The error occurred in C:\Inetpub\wwwroot\Components\Assessment.cfc: line 510
       Called from C:\Inetpub\wwwroot\Components\Assessment.cfc: line 440

          508 :                      ,NULL
          509 :                  </cfif>
          510 :                   ,'#arguments.notes#') 
           511 :        </cfquery>
          512 :     </cffunction> 

           --------------------------------------------------------------------------------

            SQL    INSERT INTO AssessmentToolDetail(iAssessmentToolMaster_ID ,iServiceList_ID   ,cRowStartUser_ID ,Service_text ,cNotes) Values(251069 ,3592 ,NULL ,'y ' ,'')   
           DATASOURCE   TIPS4 
             VENDORERRORCODE   257 
            SQLSTATE   HY000 ' 
```

**氟氯化碳功能：**

```
<cffunction name="AddService" access="public" returntype="void" output="false">
    <cfargument name="ServiceList" type="Components.ServiceList"  required="true">
    <cfargument name="notes" type="string" required="false" default="">
    <cfargument name="serviceText" type="string" required="false" default="">       

    <cfquery name="AddServiceListQuery" datasource="#variables.dsn#">
        INSERT INTO AssessmentToolDetail (
                iAssessmentToolMaster_ID
                , iServiceList_ID
                , cRowStartUser_ID
                , Service_text
                , cNotes )
        VALUES (
               #variables.id#
                ,#ServiceList.GetId()#              
                <cfif variables.rowStartUserId neq "">
                    , '#variables.rowStartUserId#'
                <cfelse>
                    , NULL
                </cfif>
                <cfif ListFirst( Arguments.serviceText,'_' ) EQ ServiceList.GetId() >
                    , '#Left(ListLast( Arguments.serviceText,'_'),1)# '
                <cfelse>
                    , NULL
                </cfif>
                ,  '#arguments.notes#'
              ) 
    </cfquery>
</cffunction> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T13:52:56.523

错误是说您正在尝试将字符串插入具有二进制存储格式的列中，并且它无法隐式进行转换。

检查表中的`cNotes`列`AssessmentToolDetail`是否具有`varchar(n)`or`nvarchar(n)`和 not的数据类型`varbinary(n)`。

# vb.net - 试图在图片框上绘图，但没有出现

> ID：11246033
> 
> 赞同：2
> 
> 时间：2012-06-28T13:43:17.107
> 
> 标签：vb.net, picturebox

我正在将一个 VB6 应用程序转换为在图片框上绘制的 VB.Net。[自然地，我阅读了精美的手册并在此处](http://msdn.microsoft.com/en-us/library/9dtfzwyx(v=vs.71).aspx)打开了此示例。因此，我制作了一个仅包含图片框的表单的小项目，并尝试了以下操作：-

```
Private Sub Picture1_paint(ByVal sender As System.Object, _
                           ByVal e As System.EventArgs) _
            Handles PictureBox1.Paint
    Dim mygraphics As Graphics
    mygraphics = PictureBox1.CreateGraphics
    Dim pen As New Drawing.Pen(System.Drawing.Color.Red, 1)
    mygraphics.DrawEllipse(pen, 0, 0, 100, 100)
    pen.Dispose
End Sub 
```

就像它说的那样。但是在运行应用程序时，该框变为空白。[在这里](https://web.archive.org/web/20131226033137/http://bobpowell.net/picturebox.aspx)寻求帮助提出了一个建议，我应该使用 a`Frame`来代替，但结果是一样的。我已经检查过我没有在背景颜色中绘制，并且该函数实际上被调用了。

我忽略了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:45:15.687

绘制处理程序的类型无效`EventArgs`。它应该是`System.Windows.Forms.PaintEventArgs`

使用`e.Graphics`属性获取图形实例。

```
 mygraphics = e.Graphics 
```

参考链接[MSDN - Control.Paint 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint.aspx#Y444)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:48:38.770

我认为`e`是`PainEventArgs`类型，已经包含一个图形对象`e.Graphics`。改用那个。

```
Public Class Form1

    Private Sub PictureBox1_Paint(ByVal sender As System.Object, _
                ByVal e As System.Windows.Forms.PaintEventArgs) Handles PictureBox1.Paint

        Dim pen As New Pen(Color.Red, 1)
        e.Graphics.DrawEllipse(pen, 0, 0, 100, 100)
        pen.Dispose()

    End Sub

End Class 
```

![截屏](../Images/27c0c4eb141b105313228012981d683e.png)

# xml - 用于编写 .ruleML 文件的 XML 编辑器

> ID：11246034
> 
> 赞同：1
> 
> 时间：2012-06-28T13:43:18.700
> 
> 标签：xml, open-source, rule

如果某处已经对此进行了讨论，我会将链接作为可接受的答案，但我找不到。

基本上，我正在使用读取 .ruleML 中的规则文件的规则引擎。我的问题是，如果有人有使用 xml 编辑器编写这些文件的经验，他们发现哪些文件最适合这项任务？我可能会补充一点，我正在寻找开源软件的答案。

编辑：实际上，即使您没有使用 .ruleML 的经验，任何关于开源 xml 编辑器的意见都可能足以让我推断出什么是最有帮助的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:47:25.747

有[S2REd](http://sourceforge.net/projects/s2red/)，即“句法语义 RuleML 编辑器”。编辑 XML 从来都不是很好，但无论如何，这个工具试图提供帮助。

# clojure - 是否有与 Python 的 lxml 等效的 Clojure 模块？

> ID：11246035
> 
> 赞同：3
> 
> 时间：2012-06-28T13:43:21.367
> 
> 标签：clojure, lxml

对于同一主题的第二个问题，我深表歉意，但我很困惑。是否有遵循 lxml 的 Clojure 模块，甚至是松散的，或者关于如何使用 Clojure 遍历 XML 文件的操作文档？

[在 Python 中，我可以使用lxml](http://lxml.de/)模块打开一个 XML 文件；通过数据解析我的方式；查找类似的标签`<DeviceID>, <TamperName>, <SecheduledDateTime>`，然后根据其中一个标签的值执行操作。

在 Clojure 中，我得到了关于如何使用 data.xml 进行解析的出色答案，然后通过提取 :content 标记的 val 并将信息放入树序列中来进一步减少 data.xml 解析的信息。

然而，即使是结果数据也嵌入了其他地图标签，这些标签显然不响应键和值函数。

我可以获取这些数据并使用正则表达式搜索，但我觉得我错过了一些更简单的东西。

data.xml/parse（调用`ret-xml-data`）的数据看起来像这样，在 REPL 中使用各种（第一个解析的 xml）和其他命令：

```
[:tag :TamperExport]
[:attrs {}]
:content
#clojure.data.xml.Element{:tag :Header, :attrs {}, :content 
(#clojure.data.xml.Element{:tag :ExportType, :attrs {}, 
:content ("Tamper Export")} 
#clojure.data.xml.Element{:tag :CurrentDateTime, 
:attrs {}, 
:content ("2012-06-26T15:40:22.063")} :attrs {}, 
:content ("{06643D9B-DCD3-459B-86A6-D21B20A03576}")} 
```

这是我到目前为止的 Clojure 代码：

```
(defn ret-xml-data
    "Returns a map of the supplied xml file, as parsed by data.xml/parse."
    [xml-fnam]

    (let [input-xml (try
                        (java.io.FileInputStream. xml-fnam)
                        (catch Exception e))]

        (if-not (nil? input-xml)
            (xmld/parse input-xml)
            nil)))

(defn gen-xml-content-tree
    "Returns a tree-seq with :content extracted."

    [parsed-xml]
    (map :content (first (tree-seq :content :content (:content parsed-xml))))) 
```

我想我可能已经找到了一种可重复的数据模式，可以让我在不创建大杂烩的情况下解析它：

```
xml-lib.core=> (first (second cl1))
#clojure.data.xml.Element{:tag :DeviceId, :attrs {}, :content ("80580608")}
xml-lib.core=> (keys (first (second cl1)))
(:tag :attrs :content)
xml-lib.core=> (vals (first (second cl1)))
(:DeviceId {} ("80580608")) 
```

一如既往地感谢你。

编辑：添加更多测试。

如果我使用类似 doseq 的函数遍历树序列结构，得到的数据现在可能可以通过所采取的操作进行解析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:21:38.007

首先，很难准确地说出你想要做什么。在解决编程问题时，它可以帮助您和其他人帮助您拥有一个“小案例”，您可以在解决更大的问题之前提出和解决。

听起来，您正试图从某些元素中提取内容并根据该内容执行操作。

我将一个包含一些简单内容的小型 XML 文件放在一起进行尝试：

```
<root>
    <someele>
        <item1>data</item1>
        <deeper>
            <item2>else</item2>
        </deeper>
    </someele>
</root> 
```

我将它设计成我认为代表手头问题的一些核心挑战 - 特别是能够在 XML 中的任意嵌套级别上做一些事情。

看着精彩的[Clojure Cheatsheet](http://clojure.org/cheatsheet)，我发现`xml-seq`并尝试在`clojure.data.xml/parse`d xml 上运行它。该序列遍历每个元素，然后遍历它们的子元素，从而可以轻松地遍历 XML。

要挑选并处理序列中的特定项目，我喜欢使用`for`带有`:when`. :when 可以在某些条件为真时轻松进入循环体。我还使用了“set as a function”语义，它检查集合中是否有东西。

```
(for [ele (xml-seq (load-xml))
      :when (#{:item1 :item2} (:tag ele))]
  [(:tag ele) (first (:content ele))]) 
```

这将返回一系列 ([:item1 "data"] [:item2 "else"]) ，然后可以轻松地以其他方式对其进行操作。

关于 Clojure 需要尝试并牢记的关键事项之一是，您往往不需要任何特殊的 API 来做事——核心语言使您可以轻松地完成大部分（如果不是全部）您需要做的事情。例如，记录（即您看到的返回内容）也是映射，因此 assoc、dissoc 等在它们上工作，这就是它们的预期使用方式。

如果这不能帮助您获得所需的内容，那么您能否提供一个小样本输出和您想要的样本结果？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T04:22:43.103

经过（非常）简短的了解后，我能想到的最接近 lxml 的 Clojure 库称为[Enlive](https://github.com/cgrand/enlive/)。它被列为 HTML 模板工具，但我很确定它用于挑选 HTML 元素的技术也可以应用于 XML。

# c# - DataCache.Increment 是否可用于 WindowsAzure 共享缓存？

> ID：11246043
> 
> 赞同：1
> 
> 时间：2012-06-28T13:43:46.970
> 
> 标签：c#, azure, azure-caching, shared-cache

我正在尝试使用 WindowsAzure 共享缓存和此处记录的 DataCache 类的增量运算符：http: [//msdn.microsoft.com/en-us/library/windowsazure/jj160018.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj160018.aspx)。

我正在使用的 Microsoft.ApplicationServer.Caching.Client.dll 来自用于缓存[http://nuget.org/packages/WindowsAzure.Caching](http://nuget.org/packages/WindowsAzure.Caching)的 1.7 nuget 包，但我在该程序集中找不到增量方法。

Azure 中是否提供 Increment 方法，如果它是我应该引用什么 dll 来访问它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:02:45.797

我刚刚对其进行了测试，发现此功能已添加到 Windows Azure 缓存（预览版）中 - 具有专用或位于同一位置。因此，如果您决定将 Windows Azure Cache Preview 与您的 Web 或 Worker 角色一起使用在专用或共存模式下，您肯定可以使用此功能。如果您想了解 Windows Azure 共享缓存和 Windows Azure 缓存（预览版）之间的区别，请查看我的博客：[Windows Azure 缓存（预览版）和 Windows Azure 共享缓存之间的区别](http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/18/difference-between-windows-azure-cache-preview-and-windows-azure-share-cache.aspx)

此功能不适用于 WindowsAzure 共享缓存。

# php - 为什么 PHP AWS API 找不到缓存文件夹？

> ID：11246046
> 
> 赞同：0
> 
> 时间：2012-06-28T13:43:56.700
> 
> 标签：php, api, caching, amazon-web-services

```
<b>Fatal error</b>:  Uncaught exception 'CacheFile_Exception' with message 'The file  
system location '/awscache'; does not exist. Create the directory, or double-
check any relative paths that may have been set.' in /home/content/15/5299015/html/sdk-
1.5.7/lib/cachecore/cachefile.class.php:61 
```

我在尝试实现某个`dynamodb`功能时收到此响应。这是在我的 config.inc

```
'default_cache_config' => '/awscache', 
```

和 /awscache 肯定存在。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:31:27.710

`/awscache`存在于文件系统的根目录，并且具有服务器可写权限，对吧？

然而，使用 APC 或 XCache 是绝对首选的，因为它们速度更快，而且您不必处理不可靠的文件系统。:)

# windows - gcc 和 lccwin32：不同的结果

> ID：11246047
> 
> 赞同：0
> 
> 时间：2012-06-28T13:44:08.273
> 
> 标签：windows, linux, gcc, lcc-win32

我尝试编译这段代码：

```
#include <stdio.h>

void print(FILE *a)
{
int main();
int count=20;
int c;
int stop=0;
char answer;

while(!stop){
    while((c=getc(a))!=EOF){
            fprintf(stdout,"%c",c);
            if(c=='\n'){
                    count--;
                    if(!count){
                        printf("do you want continue:y=for continue/q=for quit");
                        fflush(stdin);
                        answer=getchar();
                        if(answer=='y' || answer=='Y')
                            count=20;
                        else if(answer=='Q' || answer=='q'){
                            printf("you quit this program,press any key and hit the enter to close");
                            stop=1;
                            break;
                            }
                        else{
                            printf("argument is unacceptable,rolling back action");
                            main();
                            }
                        }
                }
        }
    if(c==EOF)
        stop=1;
    }
}
void halt()/*do nothing just for halt and waiting for input*/
{
int a;

scanf("%d",&a);
}
int main()
{
FILE *in,*fopen();
char name1[25];
int a;

printf("enter the name of the file you want to show:");
scanf("%24s",name1);
in=fopen(name1,"r");
if(in==NULL){
    printf("the files doesnt exist or it is in another directory, try to enter again\n");
    main();
        }
else
    print(in);

fclose(in);
halt();

return 0;
} 
```

该程序的目的是显示一个文件的 20 行内容。我用 lccwin32 在 windows xp 中编译它，它按预期工作。但是当我将我的操作系统更改为 linux ( `Ubuntu:pricise pangolin 12.04 LTS Desktop`) 并使用 gcc.first 编译它时出现问题，它似乎工作正常，但直到第 20 行和提示出来，当我输入参数（`y`继续，`q`退出）并按回车时，但什么也没发生。它只是滑到了`else`重新启动程序的部分。所以是我有错误的 gcc 还是我的代码不适合 gcc 或者我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:57:10.470

除了@Foon 报告的问题之外，您还遇到了这些问题：

1.  [fflush(stdin) 没有](https://stackoverflow.com/q/2187474/230886)像你想象的那样工作。
2.  [scanf() 将换行符留在输入缓冲区](https://stackoverflow.com/q/5240789/230886)中。

您的问题是，当您调用 getchar() 时，输入缓冲区中仍有换行符 ( `\n`)，因此您的 y/q 答案甚至没有被读取。

替换`fflush(stdin)`为 1\. 中的解决方案，或替换`fflush()+getchar()`为`scanf("\n%c",&answer);`应该可以解决该特定问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:03:48.267

我讨厌scanf。我建议将 scanf("%24s",name1) 替换为 fgets(s,24,stdin); （然后不幸的是， if (s[strlen(s)-1] == '\n') s[strlen(s)-1] = '\0' 最终摆脱了 \n 。

我还建议：

1.  不在 main 上使用递归
2.  使用 int main(int argc, char *argv[]) ，然后将文件名作为参数传递（因此您将检查 argc > 1 然后使用 argv[1] 作为文件名，然后在运行程序时做 ./programname 文件名）
3.  仍然没有使用 scanf

# multithreading - 在 C++/CLI 中使用 _beginthread 进行多线程

> ID：11246052
> 
> 赞同：0
> 
> 时间：2012-06-28T13:44:48.827
> 
> 标签：multithreading, winapi, c++-cli, beginthread

我在 microsoft visual studio c++ 10 express 中遇到 _beginthread 问题：我的代码：

```
void __cdecl DashThread( void * Args ) // function without any class refs
{
    while(1){
        MessageBox::Show("work");
        Sleep(5000);
    }
    _endthread();
}

private:
    System::Void button8_Click_1(System::Object^  sender, System::EventArgs^  e) {
        HANDLE HDash = ( HANDLE ) _beginthread(DashThread, 0, NULL );
    } 
```

和错误：

> 错误 C3641：“DashThread”：使用 /clr:pure 或 /clr:safe 编译的函数的调用约定“__cdecl”无效
> 
> 错误 C2664：“ *beginthread”：无法将参数 1 从“void (* _cdecl *)(void *)”转换为“void (__cdecl *)(void *)”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:55:47.483

尝试使用 /clr 而不是 /clr:pure 来构建您的程序。

请参阅[http://msdn.microsoft.com/en-us/library/k8d11d4s.aspx](http://msdn.microsoft.com/en-us/library/k8d11d4s.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:57:40.473

从[编译器错误](http://msdn.microsoft.com/en-us/library/wfd44574.aspx)看来，您正在使用`/clr:pure`or编译项目`/clr:safe`（在这种情况下，您不是在 C++ 中编程，而是在 C++/CLI 中编程），因此无法使用`__cdecl`调用约定，而`_beginthread`.

如果您无论如何都使用 C++/CLI（以及 .NET）进行编程，那么为什么不直接使用 .NET 的线程工具而不是奇怪的伪标准 Win32-wrapper`_beginthread`呢？

如果你想使用 C++/CLI，但仍然可以使用 good old `_beginthread`，那么尝试用 just `/clr`instead of编译它`/clr:pure`，它允许非托管函数可以有`__cdecl`调用约定。

# android - 对于 API > 2.3，Android MediaPlayer.prepare() 需要很长时间（是因为 StageFright 吗？）

> ID：11246053
> 
> 赞同：2
> 
> 时间：2012-06-28T13:44:49.863
> 
> 标签：android, audio-streaming, stagefright

（这个问题部分与[为什么Android的MediaPlayer准备一些直播流播放需要这么长时间有关？](https://stackoverflow.com/questions/6582908/why-does-it-take-so-long-for-androids-mediaplayer-to-prepare-some-live-streams)）

我尝试使用 android MediaPlayer 在不同设备上播放以下音频流：http: [//newsstream1.publicradio.org](http://newsstream1.publicradio.org)。

我终于注意到设备 <= 2.2（不到 1 秒）和设备 > 2.2（最多可能需要 30 秒...）之间的 prepare() 方法的持续时间存在巨大差异

它与底层音频框架有关吗？（OpenCore VS StageFright）

有人已经经历过吗？您知道使用 StageFright 媒体播放器读取 mp3 流的更好解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:41:10.653

好吧，在四处挖掘之后，我得出结论，加载时间取决于 MediaPlayer 的缓冲区大小（在固件中以某种方式硬编码）并且没有什么可以改变它的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:51:56.950

看起来它正在缓冲固定数量的数据，而不是固定的时间。对于任何不知道各种类型 NPR 流的比特率的人来说，数据如下所示：

MPR 新闻流：27 秒（[http://newsstream1.publicradio.org:80/），64](http://newsstream1.publicradio.org:80/) kbps MPR 古典音乐流：15 秒（[http://classicalstream1.publicradio.org:80/），128](http://classicalstream1.publicradio.org:80/) kbps MPR The Current流：7 秒（[http://currentstream1.publicradio.org:80/），128](http://currentstream1.publicradio.org:80/) kbps PRI 流：52 秒（[http://pri-ice.streamguys.biz/pri1），32](http://pri-ice.streamguys.biz/pri1) kbps两个 128 kbps 流，比特率和缓冲持续时间之间有很好的相关性。

无论如何，Android 是开源的，所以你可以随时查看它在做什么。不幸的是，`prepareAsync()`and`prepare()`是本机方法，并且似乎与缓冲区相关的事件也是从本机进程分派的。

您是否尝试将 an 附加`OnBufferingUpdateListener`到`MediaPlayer`以获取有关缓冲区状态的更细粒度的更新？比较事件传递的速率以及缓冲区在不同流中每个事件的填充百分比可能会很有趣。您可以将其与流比特率交叉引用，如果 4 秒的 32 kbps 缓冲填充缓冲区的百分比与 1 秒 128 kbps 的缓冲相同，那么我认为您会找到答案。

源自[这里。](https://stackoverflow.com/questions/6582908/why-does-it-take-so-long-for-androids-mediaplayer-to-prepare-some-live-streams)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:49:26.440

应该不会花那么长时间，但 MediaPlayer API 有一种`asyncPrepare()`方法，他们建议您使用该方法来保持应用程序平稳运行。

# c# - 反射调用2个方法

> ID：11246054
> 
> 赞同：0
> 
> 时间：2012-06-28T13:44:56.310
> 
> 标签：c#, visual-studio-2010, silverlight, reflection

我正在尝试做这样的事情，但要进行反思：

```
var ss1= method1(param).method2(); 
```

我知道如何调用第一种方法，但我不知道如何调用第二种方法。

方法1返回一个对象

方法 2 是 GetAwaiter 方法（在我的特殊情况下）

```
 MethodInfo mi = typeof(type).GetMethod("method1");
        Type tt = typeof(type);
        ParameterInfo[] param = mi.GetParameters();

        object[] param = new object[] { //some code  };
        object mm= mi.Invoke(this, param);
        MethodInfo mi2 = typeof(type).GetMethod("GetAwaiter");
        var ss1= mi2.Invoke(mm,null); 
```

在最后一行我得到一个错误：“对象与目标类型不匹配”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:59:46.147

您的代码或多或少是正确的，但该异常告诉您 mm 不是您认为的那样。您的 method1 返回的类型与您在 .GetMethod("GetAwaiter") 行中指定的类型不同。

更安全的选择是将 typeof(type) 替换为 mm.GetType().GetMethod("GetAwaiter")。我怀疑这实际上会返回 null，因为 mm.GetType() 似乎不是您所期望的，但没有看到更多代码（特别是“类型”是什么以及“method1”和“GetAwaiter”方法在哪里实际声明）很难给你更多的指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:18:02.927

此行有错误

```
MethodInfo mi2 = typeof(type).GetMethod("GetAwaiter"); 
```

mm 对象具有不同的类型，因此您会遇到异常。将行更改为

```
MethodInfo mi2 = mm.GetType().GetMethod("GetAwaiter"); 
```

正如蒂姆建议的那样。

最好使用 Type.InvokeMember 方法，因为它更短并且有助于避免此类错误。例如：

```
object mResult = this.GetType ().InvokeMember ("method1", 
    BindingFlags.InvokeMethod | BindingFlags.Instance, null, this, 
    new object[] { /* parameters here */ });
object awaiter = mResult.GetType ().InvokeMember ("GetAwaiter",
    BindingFlags.InvokeMethod | BindingFlags.Instance, null, mResult, null); 
```

# ios - 如何使用自定义动画将一个 UI 元素替换为另一个？

> ID：11246060
> 
> 赞同：0
> 
> 时间：2012-06-28T13:45:10.090
> 
> 标签：ios, animation, core-animation, quartz-graphics

我想在我自己的文档查看器中实现嵌套评论（如贴纸）。一开始应该是`UITextView`，但`resignFirstResponder`执行时，应该只是一个小按钮。主要问题是：如何制作动画？我已经阅读了 Apple 的 Quartz 2d 编程指南，但它没有给我任何想法。我不要求准确或现成的解决方案：关键字、文章或文档的链接就足够了。感谢您未来的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:14:34.937

你可以使用这个方法

```
[UIView animateWithDuration: delay: options: animations: completion:]; 
```

因此，如果您想淡入按钮并淡出文本字段，那就是

```
//Starting properties
myButton.alpha = 0;
myTextField.alpha = 1;

//Do the animation
[UIView animateWithDuration:0.3 delay:0 options:UIViewAnimationCurveEaseInOut animations:^{
    myButton.alpha = 1;
    myTextField.alpha = 0;   
} completion:^(BOOL finished) {
    if (finished) {
        NSLog(@"finished animating");
    }
}]; 
```

这将在 300 毫秒内将 2 个对象的不透明度从 0 - 1 / 1 - 0 更改

您可以通过这种方式为许多属性设置动画，例如大小、位置、不透明度等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:00:48.420

您可以像 Apple 在 QuickLook 中的两个不同元素之间淡入淡出一样执行此操作。您可以通过在 Finder 中选择项目按`shift`+来查看自己的慢动作效果 。`space`

动画基本上是在帧变化的同时交叉淡入淡出。您可能应该将按钮和文本视图都渲染为图像，并使用两个图像视图（仅在动画期间存在）进行动画处理，以便能够在帧更改时随着纵横比的变化拉伸图像。

您将需要 Core Animation 将视图渲染为图像，但其余图像只是帧和 alpha/opacity 动画，因此您应该能够使用 UIView 动画来完成它们（如果 Core Animation 对您来说似乎很复杂）。虽然 Core Animation 在调整动画时会给你一些更细粒度的控制。

# javascript - 如何检查页面的哪一部分是文章？

> ID：11246062
> 
> 赞同：-5
> 
> 时间：2012-06-28T13:45:18.197
> 
> 标签：javascript, ruby, web-scraping

我想创建一个与 Instapaper 或 Readability 类似的工具，我想知道从网页中查找和获取文本的最佳方法是什么。你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:11:21.900

这个问题太宽泛，无法给出具体答案，但您可以将这个问题分为三个问题：

1.  一种获取网络资源的方法。`libcurl`例如，或者几乎任何能够说话的东西`HTTP`。

2.  一个`DOM`解析器。`xml.dom.minidom`例如，Python 有。

3.  一种遍历`DOM`树并提取文本的算法。无论是扫描元素`class=article`，还是`<div>`超过 1024 个字符的 s 等，完全取决于您。您需要进行实验才能做到这一点。

我建议针对这些问题分别提出不同的问题。当然，在对每个进行研究之后。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:17:12.053

这是一个让你开始使用 Ruby 的想法。刚刚测试了下面的代码，它对我来说工作正常。看看它可能对你有帮助。

```
require 'open-uri'    
require 'cgi'    
require 'nokogiri'

$url='http://www.stackoverflow.com'

$txt_file = open($url)   

$raw_contents = $txt_file.read

$html = Nokogiri::HTML(CGI.unescapeHTML($raw_contents)).content
#strip the web page fetched out of all hmtl tags and encoded chars

$txt_file = File.new('c:\ruby193\bin\web-content\stack.txt', "w")
#stack.txt now contains a stripped, pure txt file which you can manipulate further

$txt_file.write($html)    
$txt_file.close

puts 'Here is the stripped text of your webpage\n'+$html 
```

# c++ - 运行 setValue 时 QTProgressBar 不更新

> ID：11246066
> 
> 赞同：0
> 
> 时间：2012-06-28T13:45:29.120
> 
> 标签：c++, qt

我有一个 for 循环，它在每次迭代时设置进度条的值。for 循环执行此处描述的 setProgress 方法：

```
void setProgress(int progStep){
    progressBar->setValue(progStep);
    progStep++;
    QTextStream(stdout) << progStep << " " << progSum << endl;
} 
```

我可以打印出最后一行，因此该方法已执行，但进度条的 GUI 并非每次都更新。

当我的最大值为 25（和最小值为 0）时，该方法会打印 0-25 之间的每个数字。我的目标是让进度条在此执行期间显示 25 个不同的百分比值。

结构：

```
 for(.....) {
     .....
     .....
     setProgress(progStep);
 } 
```

实际发生的是它用百分比值更新进度条大约 2-3 次。for 循环大约需要 30 秒，所以它肯定能够进行 25% 的更新。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:03:16.227

您必须在调用`QApplication::processEvents()`后调用`setProgress(progStep)`，以让 GUI 线程更新进度条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:04:05.870

似乎您只是在`setProgress()`不运行事件循环的情况下调用了几次，因此 GUI 没有更新。

`QApplication::processEvents()`之后调用`setProgress()`以更新 GUI。

如果您想`setProgress()`在任何情况下更新 GUI，您可以在进度条更新部分之后的 ,`QApplication::processEvents()`正文中调用。`setProgress()`

# powershell - 为什么 PowerShell 中的 .NET 对象不使用当前目录？

> ID：11246068
> 
> 赞同：22
> 
> 时间：2012-06-28T13:45:33.530
> 
> 标签：powershell

当您使用 PowerShell 中的 .NET 对象并且它采用文件名时，它似乎总是相对于`C:\Windows\System32`.

例如：

```
[IO.File]::WriteAllText('hello.txt', 'Hello World') 
```

...会写`C:\Windows\System32\hello.txt`，而不是`C:\Current\Directory\hello.txt`

为什么 PowerShell 会这样做？这种行为可以改变吗？如果无法更改，我该如何解决？

我试过`Resolve-Path`了，但这只适用于已经存在的文件，而且它太冗长而不能一直这样做。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-30T16:59:07.890

您可以将 .net 工作目录更改为 powershell 工作目录：
`[Environment]::CurrentDirectory = (Get-Location -PSProvider FileSystem).ProviderPath`
在此行之后，所有 .net 方法`[io.path]::GetFullPath`都`[IO.File]::WriteAllText`可以正常工作

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-28T15:41:03.637

PowerShell 不保持当前工作目录的 .NET 概念与 PowerShell 的工作目录概念同步的原因是：

1.  PowerShell 工作目录可以位于甚至不是基于文件系统的提供程序中，例如 HKLM:\Software
2.  单个 PowerShell 进程可以有多个运行空间。每个运行空间都可以 cd`d 进入不同的文件系统位置。但是，.NET/process“工作目录”本质上是进程的全局，不适用于可能有多个工作目录（每个运行空间一个）的场景。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-05-14T19:20:20.017

为方便起见，我在`prompt`函数中添加了以下内容，以便在命令完成时运行：

```
# Make .NET's current directory follow PowerShell's
# current directory, if possible.
if ($PWD.Provider.Name -eq 'FileSystem') {
    [System.IO.Directory]::SetCurrentDirectory($PWD)
} 
```

这不一定是个*好*主意，因为这意味着某些脚本（假设 Win32 工作目录跟踪 PowerShell 工作目录）将在我的机器上运行，但不一定在其他机器上运行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-28T13:56:49.147

在 .Net 方法中使用文件名时，最佳做法是使用完全限定的路径名​​。或使用

```
$pwd\foo.cer 
```

如果您在 powershell 控制台中执行以下操作：

```
C:\> [Environment]::CurrentDirectory

C:\WINDOWS\system32\WindowsPowerShell\v1.0 
```

您可以查看 .net 使用的文件夹。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T13:50:42.580

这可能是因为 PowerShell 在 System32 中运行。当您 cd 到 PowerShell 中的目录时，它实际上并没有更改 powershell.exe 的工作目录。

看：

[关于同步两个目录的 PowerTip 文章](http://s1403.t.en25.com/e/es.aspx?s=1403&e=55258&elq=1d6dca6847e7403c9f132b50b599cb89)

[Channel9 论坛主题](http://channel9.msdn.com/forums/TechOff/249957-PowerShell-and-the-current-directory/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T14:50:55.480

很久以前我遇到了同样的问题，现在我将以下内容添加到我的个人资料的开头：

```
# Setup user environment when running session under alternate credentials and
# logged in as a normal user.
if ((Get-PSProvider FileSystem).Home -eq "")
{
    Set-Variable HOME $env:USERPROFILE -Force
    $env:HOMEDRIVE = Split-Path $HOME -Qualifier
    $env:HOMEPATH = Split-Path $HOME -NoQualifier
    (Get-PSProvider FileSystem).Home = $HOME
    Set-Location $HOME
} 
```

# macos - mac 上的 cp --parents 选项

> ID：11246070
> 
> 赞同：58
> 
> 时间：2012-06-28T13:45:36.883
> 
> 标签：macos, command-line, command-line-arguments

在 Linux 上，我有一个可用于 cp 命令的 --parents 选项，所以我可以这样做

```
cp --parents test/withintest/go.rb test2 
```

[http://www.gnu.org/software/coreutils/manual/html_node/cp-invocation.html](http://www.gnu.org/software/coreutils/manual/html_node/cp-invocation.html)

在 Mac 上，我没有此选项可用。有没有办法在 Mac 上做到这一点？为什么这个选项不可用？

PS。--parents 的目的如下：

> '--parents' 通过将斜杠和源文件的指定名称附加到目标目录来形成每个目标文件的名称。
> 
> 给 cp 的最后一个参数必须是现有目录的名称。
> 
> 例如，命令：
> 
> ```
>  cp --parents a/b/c existing_dir 
> ```
> 
> 将文件 a/b/c 复制到 existing_dir/a/b/c，创建任何缺少的中间目录。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-12-13T07:49:48.437

这也让我很困扰。解决方法可能是使用 rsync。

```
rsync -R test/withintest/go.rb test2 
```

`cp --parents`与 OS X 标准的 rsync具有相同的效果。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-05-21T13:54:15.187

您可以`ditto`在 Mac OS X 上使用以下命令：

基本形式

```
ditto <src-path> <dst-path> 
```

做你想做的事。还有更多选择 - 查看[手册页](https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/ditto.1.html)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-04T20:26:36.210

`cp`您可以使用[MacPorts](https://guide.macports.org/chunked/installing.macports.html)安装 GNU 版本。

安装 MacPorts 后，您可以安装 coreutils 软件包：

```
sudo port install coreutils 
```

然后，您将能够使用 GNU 版本`cp`和其他核心实用程序（`ls`、`date`、`cat`等），方法是在命令前加上`g`：

```
gcp --parents test/withintest/go.rb test2 
```

如果您希望默认使用这些 GNU 版本，您可以添加 GNU bin 更新您的路径。将以下内容添加到您的`~/.bash_profile`:

```
export PATH="/opt/local/libexec/gnubin:$PATH" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-11-09T10:22:52.780

我使用了 rsync，我所做的是：

`rsync -R dir/**/file.json destination`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-02-20T13:28:15.383

自制方式：

安装`coreutils`

```
brew install coreutils 
```

使用`GNU`g 前缀命令

```
gcp --parents test/withintest/go.rb test2 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-09-02T05:39:08.117

尝试

```
mkdir -p `dirname "$file_path"` && cp "$old_dir/$file_path" "$file_path" 
```

这首先会在相对文件路径中创建包含所有迭代的目录。然后它将文件复制到新创建的目录中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-20T19:53:03.390

我不会用 GNU cp 替换 mac cp。我也不会使用同上，因为它不是跨平台的。而是使用跨平台工具，例如 rsync：

```
rsync <srcDir/srcFile> <dst> 
```

结果：dst/srcDir/srcFile

# jetty - 如何启动 Jetty8 以仅提供静态内容？

> ID：11246073
> 
> 赞同：8
> 
> 时间：2012-06-28T13:45:48.527
> 
> 标签：jetty

出于测试目的，我想使用 Jetty 8 仅提供静态内容。我知道如何从命令行启动网络服务器：

> java -jar start.jar jetty.port=8082

我希望能够使用香草码头，最好是 8 或 7，并使用类似的东西启动它：

> java -jar start.jar OPTIONS=resources resources.root=../foo jetty.port=8082

然后应该可以从服务器的根目录访问这些文件。一个名为的文件`../foo/x.html`应该可以通过`http://localhost:8082/x.html`.

我不想创建 WAR 文件或任何花哨的东西。最好不要在服务器端做任何缓存，让文件在 Windows 机器上解锁。此外，我只想提供文件，即使位于子目录中，也没有花哨的文件浏览器或从客户端修改它们的方法。

这可能吗？如果不是，完成这种行为所需的最低配置是什么？

**附加信息**

我试过以下命令。我希望能够使用 Jetty 8 浏览附带的 javadoc `http://localhost:8080/javadoc/`，但它总是给我一个 404

> java -jar start.jar --ini OPTIONS=服务器、资源等/jetty.xml 上下文/javadoc.xml

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T13:18:42.777

启动 Jetty 并让它提供静态内容的最简单方法是使用以下 xml 文件：

**静态内容.xml：**

```
<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure.dtd">

<Configure id="FileServer" class="org.eclipse.jetty.server.Server">
    <Call name="addConnector">
      <Arg>
          <New class="org.eclipse.jetty.server.nio.SelectChannelConnector">
            <Set name="host"><Property name="jetty.host" /></Set>
            <Set name="port"><Property name="jetty.port" default="8080"/></Set>
          </New>
      </Arg>
    </Call>

    <Set name="handler">
      <New class="org.eclipse.jetty.server.handler.ResourceHandler">
        <Set name="resourceBase"><Property name="files.base" default="./"/></Set>
      </New>
    </Set>
</Configure> 
```

你可以使用以下方法启动 Jetty：

```
java -jar start.jar --ini static-content.xml files.base=./foo jetty.port=8082 
```

如果省略files.base，将使用当前目录；如果省略 jetty.port，将使用端口 8080。

这`--ini`将禁用 start.ini 中的设置，因此还要确保不会激活其他处理程序等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T14:19:32.223

有点离题，但使用 maven 的人可能希望这样（假设静态资源已复制到`target/web`）：

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.1.9.v20130131</version>
    <executions>
        <execution>
            <id>start-jetty</id>
            <phase>install</phase>
            <goals>
                <goal>start</goal>
            </goals>
            <configuration>
                <webAppConfig>
                    <resourceBases>
                        <contextPath>/</contextPath>
                        <resourceBase>${project.build.directory}/web</resourceBase>
                    </resourceBases>
                </webAppConfig>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:48:04.227

在您的发行版中，contexts 目录下有一个 javadoc.xml，您可以将其用作如何轻松完成此操作的示例。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-distribution/src/main/resources/contexts/javadoc.xml](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-distribution/src/main/resources/contexts/javadoc.xml)

这就是它的实际样子

您正在寻找更改上下文路径和资源库

还建议仅从 start.ini 文件中的启动中删除 jetty-webapps.xml 并删除您不想部署的上下文文件

如果您愿意，您也可以查看在 start.ini 文件中设置一些其他选项

[http://wiki.eclipse.org/Jetty/Feature/Start.jar](http://wiki.eclipse.org/Jetty/Feature/Start.jar)

去那里获取信息 开始过程

干杯

# c# - 检查 C# CSV 文件是否为 DOS-CSV

> ID：11246075
> 
> 赞同：2
> 
> 时间：2012-06-28T13:45:54.013
> 
> 标签：c#, encoding, csv

如何在**C# 程序**中检查CSV 文件是“DOS-CSV”文件还是“普通”CSV 文件？换句话说，是否将 Excel 工作表导出为“DOS-CSV”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:52:55.443

[见这里](https://stackoverflow.com/questions/4098568/csv-and-ms-dos-csv-formats)。启发式方法可以是检查`"\r\n"`文件中是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:55:09.217

我想你的意思是你想知道行尾是 cr lf （回车符和换行符）作为 windows 还是 lf 作为 unix。我建议你下载notepad++ [http://notepad-plus-plus.org/](http://notepad-plus-plus.org/)，它是免费的、开源的，并且有很多好东西，比如（编辑中）行转换（灰色的选项是当前检测到的格式）。

# iphone - insertSublayer: below: 停止加载 tableview 数据

> ID：11246078
> 
> 赞同：1
> 
> 时间：2012-06-28T13:45:58.773
> 
> 标签：iphone, ios5

这是一个非常奇怪的问题，但我正在遍历一小部分按钮并设置渐变，就像你通常会做的那样：

```
 UIButton *currentButton = [buttons objectAtIndex:forAct];
    [currentButton.layer insertSublayer:layer atIndex:0]; 
```

我显然已经预先制作了图层，并且一切正常。除了我需要我的应用程序定期更改图层，所以我尝试将底线更改为：

```
 [currentButton.layer insertSublayer:layer below:currentButton.titleLabel.layer]; 
```

除了一行阻止我的 UITableView 数据在整个视图的其余部分加载之外，它的工作方式是我想要的。按钮没有以任何方式阻止或覆盖任何表格视图，我有点困惑。有任何想法吗？谢谢。

# html - 将两个 div 居中在一个内

> ID：11246079
> 
> 赞同：1
> 
> 时间：2012-06-28T13:46:07.700
> 
> 标签：html, css

我正在为一个完全用 div 构建的表构建一个排序标题（即没有表标签）。在排序标题内，我有两个 div，排序标题和排序方向。我想让标题水平居中。我有一个看起来像这样的**[jsfiddle](http://jsfiddle.net/7R9WW/4/)**：

```
 <div class="SomeHeader">
       <div class="HeaderTitle">sort1</div>
       <div class="HeaderSort">&nbsp;▾&lt;/div>
    </div>

    <div class="SomeOtherHeader">
       <div class="HeaderTitle">sort2</div>
       <div class="HeaderSort">&nbsp;▾&lt;/div>
    </div>​

.SomeHeader{
    width:90px;
    float:left;
    background:red;
    color:white;
    line-height:20px;}

.SomeOtherHeader{
     width:120px;
     float:left;
     background:black;
     color:white;
     line-height:20px;}

.HeaderTitle{float:left;}

.HeaderSort{float:left;} 
```

有什么方法可以干净地做到这一点？我知道我可以指定每个元素的边距和宽度以获得所需的效果，但是当这些标题的值发生变化时，对齐将不会居中。我知道我也可以使用 jQuery 来执行此操作，方法是遍历标题并计算标题和标题的宽度，并以编程方式设置每个标题的边距。我正在寻找是否有更通用的基于 CSS 的方法，它将 HeaderTitle 和 HeaderSort 集中在 SomeHeader 类中。

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:05:57.233

`HeaderSort` `div`似乎没有必要。难道它看起来不像这样[http://jsfiddle.net/7R9WW/7/](http://jsfiddle.net/7R9WW/7/)

更新答案：http: [//jsfiddle.net/7R9WW/14/](http://jsfiddle.net/7R9WW/14/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:10:10.743

[http://jsfiddle.net/7R9WW/13/](http://jsfiddle.net/7R9WW/13/)

相同的标记，但`display: inline-block`在内部 div 和`text-align: center`字段容器上。

```
.SomeHeader{
    width:90px;
    float:left;
    background:red;
    color:white;
    line-height:20px;
     text-align:center;}

.SomeOtherHeader{
     width:120px;
     float:left;
     background:black;
     color:white;
     line-height:20px;
     text-align:center;}

.HeaderTitle{display:inline-block;}

.HeaderSort{display:inline-block;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:04:06.857

用另一个 div 包装这两个标题 div，然后给那个 div 一个 margin:0 auto。

```
<div class="SomeHeader">
<div id="wrapper">
   <div class="HeaderTitle">sort1</div>
   <div class="HeaderSort">&nbsp;▾&lt;/div>
</div>
</div>

<div class="SomeOtherHeader">
<div id="wrapper">
   <div class="HeaderTitle">sort2</div>
   <div class="HeaderSort">&nbsp;▾&lt;/div>
</div>​
</div> 
```

CSS：

```
#wrapper{
width: 100px;
margin: 0 auto;
overflow: hidden;
} 
```

宽度应该是两个包含的 div 的宽度之和，因此您需要为它们定义一个宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T14:09:44.243

使用包装！

```
<div class="wrap">
    <div class="SomeHeader">
        <div class="HeaderTitle">sort1</div>
        <div class="HeaderSort">&nbsp;▾&lt;/div>
    </div>
    <div class="SomeOtherHeader">
        <div class="HeaderTitle">sort2</div>
        <div class="HeaderSort">&nbsp;▾&lt;/div>
    </div>​
</div> 
```

和CSS：

```
.wrap {width: 220px; margin: auto;} 
```

# asp.net - 使用代码块添加用户控件而不是隐藏代码

> ID：11246088
> 
> 赞同：0
> 
> 时间：2012-06-28T13:46:33.047
> 
> 标签：asp.net

我的项目目前通过后面的代码将用户控件添加到 Web 表单中，例如

```
For Each p In userlist
            Dim uc1 As New TimeSelector

            panel.Controls.Add(New LiteralControl("<asp:panel1 runat=" & "server" & ">"))
            panel.Controls.Add(New LiteralControl(p.ToString))
            panel.Controls.Add(New LiteralControl("<asp:Updatepanel1 runat=" & "server" & ">"))
            uc1 = DirectCast(Page.LoadControl("~/UserControls/StaffScheduling/TimeSelector.ascx"), UserControl)
            uc1.ID = "UC" & j
            panel.Controls.Add(uc1)
            panel.Controls.Add(New LiteralControl("</asp:Updatepanel1>"))
            panel.Controls.Add(New LiteralControl("</asp:panel1>"))
            panel.Controls.Add(New LiteralControl("<p></p>"))
            j += 1
        Next 
```

除了隐藏代码之外，还有更好的方法将用户控件添加到 Web 表单吗？我是否采取了最好的方法？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:59:04.253

If there is maximum no of User Controls that you need to add, why not add then in the markup?

Why you ask?

1.  People often run into problems with there usercontrols not showing.
2.  Usercontrols events not getting fired, because the usercontrols do not exist in the markup instead are dynamically generated.
3.  There is no difference in the speed(page-size). You can toggle there visibility according to your needs.
4.  Much cleaner, elegant solution.

Frankly, you should use this approach to save yourself from numerous hassles arising from your approach.

# php - 如何动态填充 Google 图表 API

> ID：11246094
> 
> 赞同：4
> 
> 时间：2012-06-28T13:47:07.950
> 
> 标签：php, json, api

我正在尝试使用他们的 API 和 JSON 创建一个谷歌折线图。

硬编码，此图表有效：

```
<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);

  function drawChart() {

    var data = google.visualization.arrayToDataTable([
      ['Date', 'Sales'],
      ['Jun 25',  12.25],
      ['Jun 26',  8.00],
      ['Jun 27',  20.50]
      ['Jun 28',  12.75]
    ]);

    var options = {

    };

    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }

</script> 
```

但是，尝试使用 JSON 填充它，我无法让它工作：

```
<?php

$data = array();
$data["Date"] = "Sales";
$data["Jun 25"] = "12.25";
$data["Jun 26"] = "8.00";
$data["Jun 27"] = "20.50";
$data["Jun 28"] = "12.75";
$data = json_encode($data);

?>

<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);

  function drawChart() {

    var data = google.visualization.arrayToDataTable(<?php echo $data; ?>);

    var options = {

    };

    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }

</script> 
```

我显然没有正确编码数组。谷歌在这里有一个关于如何用 JSON 数据填充图表的示例页面：[https ://developers.google.com/chart/interactive/docs/php_example](https://developers.google.com/chart/interactive/docs/php_example)

但是，我找不到任何示例来说明如何使用这样的简单折线图设置 JSON 数据。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-28T13:52:03.897

你很近。

```
$data = array( 
             array('Date', 'Sales'),  
             array('June 25', 12.25),  
             array('June 26', 8.00) 
);

json_encode($data); 
```

**输出**

```
[["Date","Sales"],["June 25",12.25],["June 26",8]] 
```

[在行动中看到它。](http://codepad.org/z4gQuGpp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-28T07:21:15.423

乔希已经提供了正确的答案。但是如果你想使用`google.visualization.DataTable`而不是`google.visualization.arrayToDataTable`，首先你可以单独添加列，然后添加 json 编码的 php 数组：

```
var data = new google.visualization.DataTable();
    data.addColumn('string', 'Date');
    data.addColumn('string', 'Sales');
    data.addRows(<?php echo $data; ?>); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T05:39:42.820

```
while($fetch = sqlsrv_fetch_array( $result, SQLSRV_FETCH_BOTH))
{
$grid[$count]= $fetch['Hour'];
$grid1[$count]=$fetch['Revenue'];
$data[$count]=array($fetch['Hour'],$fetch['Revenue']);
$count++;   
}
$num=$count;
    $data[0] = array('Hours','Revenue');        
    for ($i=0; $i<($num+1); $i++)
    {

        $data[$i]=(array('c' => array(array('v' => (string)$grid[$i]), array('v' =>(int)($grid1[$i]) ), ) ));
    }   

$sample=array(array('type' => 'string', 'label' => 'date'),array('type' => 'number', 'label' => 'Amount'));
$table['cols'] = $sample;
$table['rows'] = $data;
echo (json_encode($table )); 
```

这对我有用，如果你像这样格式化你的 json 它肯定会工作

# java - 用java查找多个文本文件的共同元素的最佳方法是什么？

> ID：11246097
> 
> 赞同：1
> 
> 时间：2012-06-28T13:47:18.513
> 
> 标签：java, rdf, file-comparison, allegrograph

我有一个程序可以创建多个 rdf 三元组的文本文件。我需要比较三元组并快速完成，最好的方法是什么？我曾想过将三元组放入一个数组并进行比较，但每个文件可能有数十万个三元组，这将花费很长时间。我需要它尽可能接近实时，因为三元组将在文件中不断进行分类。任何帮助都会很棒。这些文件也在 AllegroGraph 存储库中，如果以某种方式比较它们更容易的话。

一个想法：如果我将三元组存储在 excel 中（每行一个三元组）并且每个存储库一张表，

A：我怎样才能在表格中找到重复项。B：会不会很快。和 C：我怎样才能从 Java 自动化呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:05:51.860

您需要建立一个主索引，该索引将存储每个三元组以及它出现在多少个文件中，以及每个文件中三元组的确切文件名和位置。您可以搜索主索引以实时回答查询。

当您更新、删除或创建新的 rdf 文件时，您需要更新主索引。

您需要存储主索引，以便可以有效地对其进行更新和搜索。

简单的选择可能是使用关系数据库（如 MySql）来存储主索引。它可以回答您的查询，例如使用简单的 select 语句查找常见的三元组`select * from rdfindex where triplecount > 2.`

**编辑：**您不能使用 HashMap 或类似的数据结构在内存中存储数十万个三元组。这就是为什么我建议使用数据库，它可以存储数据并有效地响应您的查询。您可以查看像 SQLite 这样的嵌入式数据库来存储数据。

阅读这些主题

[如何创建 SQLite 数据库并创建表、访问表等，](https://stackoverflow.com/questions/8907645/beginner-in-sqlite)创建一个简单的表来存储三重、三重计数、文件名。

将所有 Excel 文件转换为 CSV 文件。您可以使用[opencsv](http://opencsv.sourceforge.net/)在 Java 中解析文件（查看 opencsv 附带的示例）。

解析 CSV 文件并将数据加载到 SQLite。如果三元组已经在数据库中，则只需更新计数，如果不插入三元组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:59:30.783

据我所知，AllegroGraph 中有一个删除重复条目的功能，如果所有三元组都来自那里，这可能是一个选项。

# validation - 如何设置此序列表的序列号（Inno Setup）

> ID：11246105
> 
> 赞同：2
> 
> 时间：2012-06-28T13:47:35.327
> 
> 标签：validation, inno-setup, serial-number, custom-pages

我正在寻找一个串行脚本，我在这里找到了一个：

[Inno 设置中序列号的自定义页面](https://stackoverflow.com/questions/10385319/custompage-for-serial-number-in-inno-setup/11232626#11232626)

但是如何设置序列号，因为所有序列号现在都有效。

感谢您的回答！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T13:25:08.120

扩展我的代码[`previous post`](https://stackoverflow.com/a/10392094/960757)，如果你想将序列号与一个常数值进行比较，你可以这样修改脚本。允许用户继续的唯一有效序列号是`62FFU-GA4N8-T8N6W-WLQJW-N6WLQ-AJKD6`：

```
procedure OnSerialEditChange(Sender: TObject);
var
  CanContinue: Boolean;
begin
  // the GetSerialNumber defined there returns you the serial number string
  // built from each edit box delimited by the char passed as a parameter
  CanContinue := GetSerialNumber('-') = '62FFU-GA4N8-T8N6W-WLQJW-N6WLQ-AJKD6';
  WizardForm.NextButton.Enabled := CanContinue;
end; 
```

但请注意，将序列号存储为常量并不是一个好习惯。您应该考虑使用另一种方式来验证您的产品。

# c# - TreeView - 如何从数据绑定中设置父节点

> ID：11246116
> 
> 赞同：0
> 
> 时间：2012-06-28T13:48:25.993
> 
> 标签：c#, wpf, data-binding, parent, treelist

我使用数据集从数据库中填充树列表。

```
tree.ItemsSource = new _e_shopping24CategoriesParentTableAdapters.CategoriesTableAdapter().GetData(); 
```

数据集中有3个表：

1.  ID类别
2.  姓名
3.  家长

我将**DisplayMemberPath**设置为**Name**。但我找不到任何将父节点设置为树的参数。

所以我的 TreeView 看起来像这样：

*   饮料
*   百事可乐
*   可口可乐
*   汽车
*   斯巴鲁
*   梅赛德斯

但我想要：

1.  饮料
    1.  百事可乐
    2.  可口可乐
2.  汽车
    1.  斯巴鲁
    2.  梅赛德斯

谁能告诉我如何解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:33:14.560

我相信您将需要创建和填充数据结构，其中每个类别都包含一个项目列表：

```
public class Category
{
    private readonly IList<Item> _items;

    public Category()
    {
        _items = new List<Item>();
    }

    public int id { get; set; }
    public string Name { get; set; }
    public IList<Item> Items { get { return _items; } }
}

public class Item
{
    public int id { get; set; }
    public string Name { get; set; }
} 
```

然后，您将需要`HierarchicalDataTemplate`为您的`TreeView`. 有关如何创建一个的很好的示例，请参阅[MSDN 。](http://msdn.microsoft.com/en-us/library/ms742521.aspx#DataTemplating_HeirarchicalDataTemplate)

# sql - Postgresql 函数中的“稳定或易失函数被用作不可变函数”警告

> ID：11246123
> 
> 赞同：0
> 
> 时间：2012-06-28T13:48:47.463
> 
> 标签：sql, postgresql

我有一个 Postgresql 函数，其中只有一个 SELECT 语句：

```
CREATE OR REPLACE FUNCTION fun_test()
RETURNS INTEGER AS $$
DECLARE size INTEGER;
BEGIN
    SELECT COUNT(*) INTO size FROM tab;
    RETURN size;
END;
$$ LANGUAGE plpgsql STABLE; 
```

当我调用函数时：

```
SELECT fun_test() 
```

虽然结果是正确的，但也会有警告：

```
WARNING:  A stable or volatile function is used as if it is immutable
HINT:  The function should be declared as stable or volatile in create function statement. 
```

I found in Postgresql document that STABLE is a appropriate selection for functions whose results depend on database lookups, parameter variables (such as the current time zone), etc. [http://www.postgresql.org/docs/8.2/static/sql -createfunction.html](http://www.postgresql.org/docs/8.2/static/sql-createfunction.html)

我的问题是警告来自哪里？看来我正在做文件要求做的事情。任何帮助表示赞赏。

**编辑：**
我正在使用 postgresql 服务器 8.2.15
整个故事：

```
CREATE TABLE algo.chengb_tmp
(
userid INT,
username varchar(100)
)

CREATE OR REPLACE FUNCTION algo.chengb_fun_test()
RETURNS INTEGER AS $$
DECLARE size INTEGER;
BEGIN
    SELECT COUNT(*) INTO size FROM algo.chengb_tmp;
    RETURN size;
END;
$$ LANGUAGE plpgsql STABLE;

SELECT algo.chengb_fun_test() 
```

程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:03:36.010

显然，你的问题并没有显示整个故事。我在 PostgreSQL 9.1 中测试了你的函数，它对我有用，正如预期的那样。没有警告。

可能的解释包括：

*   `tab`调用另一个函数的相关表上的 SELECT 规则。（SELECT 没有触发器）

*   过时的 PostgreSQL 版本 8.2.15 中的错误，升级后可能会消失。

*   您过度简化了问题并抽象出问题的实际原因。

在问题中添加更多详细信息：您的 PostgreSQL 版本、 table 的完整定义`tab`、完整的错误消息及其上下文。

* * *

顺便说一句，可以简化：

```
CREATE OR REPLACE FUNCTION fun_test()
RETURNS INTEGER AS
$$
BEGIN
   RETURN
   (SELECT COUNT(*) FROM tab);
END;
$$ LANGUAGE plpgsql STABLE; 
```

甚至：

```
CREATE OR REPLACE FUNCTION fun_test()
RETURNS INTEGER AS
$$
   SELECT count(*) FROM tab;
$$ LANGUAGE sql STABLE; 
```

但这可能不是重点。

# wpf - Silverlight：使用 TextBox 复制/粘贴上下文菜单（文本突出显示问题）

> ID：11246125
> 
> 赞同：2
> 
> 时间：2012-06-28T13:49:00.647
> 
> 标签：wpf, silverlight, silverlight-4.0, silverlight-5.0

我创建了一个`TextBox`控件：

```
public class MyTextbox : TextBox 
```

这只是一个正常`TextBox`的，我已经添加了一个我写过的行为：

```
 public class TextBoxCutCopyPasteBehavior : Behavior<TextBox> 
```

一切正常，花花公子：右键单击将显示一个`ContextMenu`带有剪切、复制、粘贴选项的选项。 **但是**，此时`TextBox`文本不再突出显示，因为`TextBox`失去了焦点。

*`ContextMenu`即使在出现并且`TextBox`失去焦点之后，使所选文本保持突出显示的最佳方法是什么？*

非常感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:03:49.837

您应该仍然可以访问TextBox的[SelectedText属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.selectedtext%28v=vs.95%29.aspx)

```
private void CopyMenuItem_Click(object sender, RoutedEventArgs e)
{
    string textToCopy = MyTextBox.SelectedText;
    // do something
} 
```

# visual-studio-2010 - 有没有办法从我在 C# 中的 XML 文档注释中为 github 生成文档 wiki？

> ID：11246126
> 
> 赞同：22
> 
> 时间：2012-06-28T13:49:01.927
> 
> 标签：visual-studio-2010, github, documentation, markdown, wiki

我想在 Github 上为我的开源项目生成 API 文档。我想从我的 C# 项目中的 XML 文档注释中自动创建它们。我微弱的谷歌搜索出现了 bubkiss。有没有办法做到这一点？

我更喜欢它是 Github 风格的[Markdown](http://github.github.com/github-flavored-markdown/)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-05-25T17:10:41.207

这是一个*在线*C# XML 文档到 Markdown 转换器：http: [//varus.io/vsdoc-2-md/](http://varus.io/vsdoc-2-md/)

它基于@formixian 的算法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-11T06:40:01.877

在搜索了一下之后，我发现了这个要点：

[从 VS XML 文档文件生成 Markdown](https://gist.github.com/lontivero/593fc51f1208555112e0)

它打印到 C# XML -> markdown 到控制台。我相信它可以进一步完善，但这是一个非常好的开始。我已经测试过了，它完全可以工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-13T20:17:13.097

我最终使用[Sandcastle](http://sandcastle.codeplex.com/)生成纯 HTML 并使用它。不可避免地，我只会为 Sandcastle 编写自己的解析器或自定义模板。

我不喜欢 Doxygen 或 QDoc 的学习曲线。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-13T08:27:33.867

我会推荐 Doxygen。通过使用配置文件和 XSLT 配置 Doxygen，您几乎可以用它做任何事情。[http://www.doxygen.nl/](http://www.doxygen.nl/)

在配置文件中设置源文件和输出，然后使用 XSLT 自定义输出。

对于 Doxygen，有一个解析器工具 ( [http://code.google.com/p/doxygenxmlparser/](http://code.google.com/p/doxygenxmlparser/) ) 已经准备好使用 C# 完成大部分工作

if(youDoNotLikeThisIdea == true) 另一个高度可配置的工具是 QDoc（Qt API 的一部分）@ [http://qt-project.org](http://qt-project.org)。当然，使用 QDoc 将需要您特别构建 Qt 和 QDoc。

祝你好运！

# php - 折叠唯一值，将二维数组中的第二个加起来

> ID：11246134
> 
> 赞同：1
> 
> 时间：2012-06-28T13:49:37.383
> 
> 标签：php, arrays

我有一个循环将两个值的数组添加到主数组。

如何合并主数组中具有相同第一个值的所有数组，同时将第二个值相加？

```
$mainData = array() ;
//Loop...

$cRes = $dbh->query("SELECT overdue FROM _credit_control_overdue WHERE entityID = $entityId") ;
        $currentOwed = $cRes->fetchColumn() ;
        $dbh->exec("REPLACE INTO _credit_control_overdue (entityID, overdue) VALUES ('$entityId', '$remaining')") ;
        $totalRemaining += $remaining ;

        array_push($mainData, array($entityId, $remaining)) ;
//End of loop 
```

在许多情况下，$entityId 将是相同的，而 $remaining 将是不同的。

现在我需要一个类似于array_unique 的函数，它会给我一个唯一的$entityId，但所有的$remaining 值都加起来，所以我只剩下例如2339、83572.60。

希望我已经解释清楚了！

* * *

这是我想要的输出：

数组 ( [0] => 数组 ( [0] => 2499 [1] => 5314.50 ) [1] => 数组 ( [0] => 639 [1] => 75.00 ))

即数组（[0] => UNIQUEID [1] => SUM）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:23:31.127

最好的方法可能是首先使用 $entityId 作为键（这将为您提供每个条目的唯一条目）和 $remaining 的累积总数作为值来构建关联数组（哈希）：

```
// Initialise the hash before looping
$perEntityTotals = array();

/* Loop ... */

// Add the $remaining value to the appropriate entity's total
// If the key doesn't yet exist, it will be created with the value $remaining
$perEntityTotals[$entityId] += $remaining;

/* End Loop */ 
```

要按照您最初的要求重新格式化，您需要操作哈希：

```
$mainData = array();
foreach ( $perEntityTotals as $entityId => $total )
{
    $mainData[] = array($entityId, $total);
} 
```

以下是等效的，但有点难以阅读：

```
$mainData = array_map(
    NULL,             // see Example #4 on http://php.net/array_merge
    array_keys($perEntityTotals),
    array_values($perEntityTotals) 
); 
```

# javascript - 如何从 jQuery 验证插件功能中删除 AJAX

> ID：11246135
> 
> 赞同：1
> 
> 时间：2012-06-28T13:49:50.737
> 
> 标签：javascript, jquery, jquery-validate

这将是一个愚蠢的问题，但我已经花费了大量时间试图从下面的 jQuery 验证插件函数中删除 AJAX 部分，但仍然可以进行验证。可以说我没有成功。

```
$(document).ready(function(){
$("#myform").validate({
    debug: false,
    rules: {
        group: {required: true}, 
    },
    messages: {
        group: {required: " Choose a group."},
    },
    submitHandler: function(form) {
        $('#results').html('Loading...');
        $.post('', $("#myform").serialize(), function(data) {
            $('#results').html(data);
        });
    }
});
}); 
```

所以，是的，我很笨。谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:06:13.903

当您发回对象时，将其作为 JSON 对象发送。

这是一个示例，我们将使用序列化的元素，对一些数据进行条件化，然后用我们的新页面发回一些东西。

```
<?php
  $name = $_POST['name'];
  $email = $_POST['email'];
  $phone = $_POST['phone'];
  if(isset($name) && isset($email) && isset($phone)){
    return json_encode(array('filled' => 'yes', 'loc' => 'newpage.php'));
  }

?> 
```

然后在验证器中，我们可以解析`data.loc`到`window.location`模拟重定向。

```
$(document).ready(function(){
  $("#myform").validate({
    debug: false,
    rules: {
      group: {required: true}, 
    },
    messages: {
      group: {required: " Choose a group."},
    },
    submitHandler: function(form) {
      $('#results').html('Loading...');
      $.post('', $("#myform").serialize(), function(data) {
        if(data.filled == 'yes'){
          window.location = data.loc;
        }

      });
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:57:46.267

你只需要更换`submitHandler`功能！

```
submitHandler: function(form) {
    $('#results').html('Loading...');
    // $.post('', $("#myform").serialize(), function(data) {
    //     $('#results').html(data);
    // });
} 
```

并在调用之后，以这种方式`.validate()`调用`.valid()`函数：`#myform`

```
$('#myform').valid(); 
```

只需确保您通过添加以下内容来删除表单上的默认提交操作：

```
<form onsubmit="if (!$(this).valid()) return false;"> 
```

**说明：**`form`当它无效并显示错误时，它不会提交。如果表单有效，则此函数作为普通表单提交提交。

但你为什么要这么做？你还想做什么？

# asp.net-mvc - ASP.net MVC 记录页面视图

> ID：11246137
> 
> 赞同：3
> 
> 时间：2012-06-28T13:50:01.613
> 
> 标签：asp.net-mvc, logging

是否有一种简单的方法可以记录任何用户点击的每个页面。我认为这将位于 global.asax.cs 文件中，以便我可以将被点击页面的 URL 写入 db 表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T13:26:44.807

我找到了一种方法来完成这个问题，这似乎符合我的目的。

我使用 PostAuthenticateRequestHandler 方法，因为它会在每个页面点击时调用。我忽略任何空路径，只忽略“/”，因为这些不是实际命中的页面。

```
//in global.asax.cs file

private void PostAuthenticateRequestHandler(object sender, EventArgs e)
{
   ///...///

   string extension = this.Context.Request.CurrentExecutionFilePathExtension;
   string path = this.Context.Request.CurrentExecutionFilePath;

   if (extension == string.Empty && path != "/")
   {
   PageVisitedLogModel pageVisitedLogModel = new PageVisitedLogModel
   {
       DateVisited = DateTime.Now,
       IPAddress = this.Context.Request.UserHostAddress,
       PageURL = this.Context.Request.RawUrl,
       Username = this.Context.User.Identity.Name
   };

   //then writes to log
   DataHelper.UpdatePageVisitedLog(pageVisitedLogModel);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:55:48.263

一种方法是使用全局操作过滤器，如[本例所示](http://weblogs.asp.net/gunnarpeipman/archive/2010/08/15/asp-net-mvc-3-global-action-filters.aspx)。这允许您为解决方案中的任何操作运行一些代码。

# asp.net - 可变数量的类别/复选框

> ID：11246140
> 
> 赞同：1
> 
> 时间：2012-06-28T13:50:08.113
> 
> 标签：asp.net, gridview, checkbox, webforms

我正在为家长建立一个表格，以便为他们的学生输入健康信息。我们的护士希望建立类似于您在看新医生时填写的内容，他们有类别，然后是类别中的条件，您将检查它们是否适用于您。他们希望类别和条件的数量是可变的，因此他们可以根据需要随意更改它们。

我需要一些关于如何处理 UI 方面的想法。我最初的想法是一个父gridview，每个类别都有一行，然后在里面，每个条件都有一个带有自己复选框的子gridview。我已经对 gridviews 做了一些工作，并且知道如何访问嵌套对象，所以我并不十分担心如何取回数据。

我的问题是：有没有更好的方法以及社区提出的哪些建议可能与使用嵌套网格视图不同或更有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:20:48.117

+1 询问*有没有更好的方法？*

我要建议的内容一开始可能会稍微复杂一些，但请放心，最终它会是值得的。

有一个名为的 JavaScript 框架`Knockout.js`非常适合此类情况。Knockout 极大地简化了需要大量 UI 控件的情况。

[http://knockoutjs.com/](http://knockoutjs.com/)

这是网站上与您的情况相似的教程： [http ://learn.knockoutjs.com/#/?tutorial=collections](http://learn.knockoutjs.com/#/?tutorial=collections)

# spring - Spring MVC：如何从数据库下载 Excel

> ID：11246142
> 
> 赞同：1
> 
> 时间：2012-06-28T13:50:19.387
> 
> 标签：spring, model-view-controller

我对 Spring MVC 和 Excel 有疑问。我将excel文件作为lob存储在数据库中。就像我的实体数据库的这一部分是PostgreSQL

```
 @Lob
    @Column(name = "Exel")
    private String exel; 
```

接下来我想从数据库中获取它，用户可以从网页下载它这是控制器

```
@RequestMapping(value = "/downloadExelTemplate.xls", method = RequestMethod.GET)
    public void downloadExelTemplate(HttpServletResponse response)
            throws IOException {
        response.setContentType("application/x-msexcel");
        ExelDTO exel = service.getExel(new Long(1));
        InputStream is = new ByteArrayInputStream(exel.getExel().getBytes());
        BufferedWriter outex = new BufferedWriter(new FileWriter("out.xls"));
        outex.write(exel.getExel());
        outex.close();
        ServletOutputStream out = response.getOutputStream();
        out.write(exel.getExel().getBytes());
        is.close();
        out.close();
    } 
```

而且我得到的错误 xls 文件不正确。请帮我。怎么了？当我从流中获取文件时，效果是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:36:18.010

所以我解决了我的问题，我将休眠实体中的数据类型更改为

```
@Lob
byte[] exelData; 
```

一切正常。当只有文本文件时，将@lob 映射到字符串没有问题，但与 ms office 格式连接时会失败。所以我学会了如何正确保存数据文件。

# c# - 如何使用 for 循环扫描 ASP .NET 页面中的所有控件？

> ID：11246143
> 
> 赞同：1
> 
> 时间：2012-06-28T13:50:30.987
> 
> 标签：c#, asp.net, servercontrols

```
foreach (Control ctrl in Page.Controls) 
    {
        if (ctrl is TextBox)
        {
            if (((TextBox)(ctrl)).Text == "")
            {  
               helpCalss.MessageBox("Please fill the empty fields", this);
                    return;  
            }  
        }  
    } 
```

我正在使用 asp.net，我有一个带有 texboxes 的插入页面，我需要检查页面中的 texboxes 是否为空，如果是，我需要显示一个带有空文本框的消息框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:18:31.117

正如人们所指出的那样，您的方法是错误的-除非您向页面动态添加控件，否则您应该通过验证器执行验证。

下面是如何做到这一点的片段：

```
private void SearchControls(Control controlSearch)
{
    foreach (Control control in controlSearch.Controls)
    {
        if (control != null)
        {
            if (control.Controls != null & control.Controls.Count > 0)
            {
                SearchControls(control, form);
            }

            TextBox textbox = control as TextBox;
            if (textbox != null && string.IsNullOrEmpty(textbox.Text))
            {

            }
        }
    }
} 
```

在页面中使用`SearchControls(this)`开始搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:57:41.727

这是[一篇很好的文章](http://dotnetguts.blogspot.com/2008/11/finding-all-controls-on-page-in-aspnet.html)，但下面是一个修改版本，它**通过给定属性收集控件**

```
public List<Control> ListControlCollections(Page page, string propertyName)
{
    List<Control> controlList = new List<Control>();
    AddControls(page.Form.Controls, controlList, propertyName);
    return controlList;
}

private void AddControls(ControlCollection controlCollection, List<Control> controlList, string propertyName)
{
    foreach (Control c in controlCollection) {
        PropertyInfo propertyToFind = c.GetType().GetProperty(propertyName);

        if (propertyToFind != null) {
            controlList.Add(c);
        }

        if (c.HasControls()) {
            AddControls(c.Controls, controlList, propertyName);
        }
    }
} 
```

要使用它：

```
List<Control> controlList = ListControlCollections("Text");
for (i=0; i < controlList.length; i++)
{
   if (controlList[i].Text == string.empty)
   {
      // Do your logic here
   }
   else  
   {
      // Do your logic here
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:16:21.257

我想你可以试试这个递归函数来获取页面上的所有文本框。

```
 /// <summary>
    /// Find TextBoxes Recursively in the User control's control collection
    /// </summary>
    /// <param name="controls"></param>
    /// <param name="type"></param>
    /// <returns></returns>
    private void FindControlRecursiveByType(ControlCollection controls, ref List<TextBox> OutputList)
    {
        foreach (WebControl control in controls.OfType<WebControl>())
        {
            if (control is TextBox)
                OutputList.Add(control as TextBox);
            if (control.Controls.Count > 0)
                FindControlRecursiveByType(control.Controls, ref OutputList);
        }
    } 
```

OutputList 将包含所有文本框，然后您可以检查它们是否为空条件

# sql - SQL 用 sum 函数除以零

> ID：11246146
> 
> 赞同：6
> 
> 时间：2012-06-28T13:50:40.723
> 
> 标签：sql, sql-server-2008

我在除以零时遇到问题。如果分母为零，我希望该值为零。当我尝试使用`nullif`时，我最终得到一个零或一作为计算值。

这是SQL：

```
Select 
    StateCode, Month1Date,(Sum(Order)/Sum(Value)) as myValue    
from tblOrders    
     inner join tblStates on OrderStateCode = StateCode    
group by StateCode, Month1Date 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T13:52:49.420

```
Select
  StateCode,
  Month1Date,
  ISNULL(Sum(Order) / NULLIF(Sum(Value), 0), 0) AS myValue
from
  tblOrders
inner join
  tblStates
    on OrderStateCode = StateCode
group by
  StateCode,
  Month1Date 
```

`0`分母更改为`NULL`，这将导致`result`为`NULL`。然后整个结果必须`ISNULL()`将任何 NULL 变为 0。

就我个人而言，我*不会*包含`ISNULL()`并将结果保留为`NULL`. 但这实际上取决于用例。

**编辑：**删除了 CASE WHEN 版本，因为另一个答案就在我之前。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T13:52:41.730

你需要一个案例陈述：

```
Select StateCode, Month1Date,
        (case when sum(value) = 0 then 0 else Sum(Order)/Sum(Value)
         end) as myValue
from tblOrders inner join
     tblStates
     on OrderStateCode = StateCode
group by StateCode, Month1Date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:11:33.930

试试这个。

```
SELECT StateCode, Month1Date,
        CASE WHEN SUM(Value) <> 0 THEN(SUM(Order)/SUM(Value))
        ELSE 0 END as myValue
    FROM tblOrders 
    INNER JOIN tblStates ON OrderStateCode = StateCode 
    GROUP BY StateCode, Month1Date 
```

# javascript - javascript替换正则表达式不是全局的

> ID：11246148
> 
> 赞同：1
> 
> 时间：2012-06-28T13:50:44.037
> 
> 标签：javascript, regex, replace

```
//Get width and resize another element
$(document).ready(function() {
  function ResizeSearch(GridID, SearchID) {
    var eleWidth = $("#" + GridID).width();
    $("#" + SearchID).width(eleWidth);
  }
  $("#getp").click(function() {
    ResizeSearch("<%= gvValidStatus.ClientID %>", "ValidStatusSearch");
  });
}); 
```

对于很多stackoverflow人来说，这是一个简单的问题。我有一些看起来像这样的代码：

```
var www = '?points=City%20Chairman%20Brutas&another=test';
var name = 'points';
var match = RegExp(RegExp('[?&]' + name + '=([^&]*)').exec(www)[1]);
match = decodeURIComponent(match); 
match = match.replace('\/','');
document.write(match); 
```

代码非常简单，出于 jsfiddle 的目的，我做了 a`var`而不是使用`window.location.search`. 我知道我需要制作`match.replace`GLOBAL 才能正常工作。它当前输出：

```
City Chairman Brutas/ 
```

如果我改成`match.replace`它`match.replace('\//g','');`不起作用。

以上输出：`/City Chairman Brutas/`

我知道我很接近，如果有人能指出我正确的方向，那就太棒了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:53:24.157

您需要删除引号并改用`/.../`正则表达式文字语法：

```
match.replace(/\//g,''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:53:10.840

```
match = match.replace(/\//g,''); 
```

应该管用。您需要一个正则表达式分隔符 / 在您的正则表达式的开头和结尾。然后，您的标志会出现在结束分隔符之后。此外，如下所述，您不应该在您的正则表达式周围加上引号..！

# c - 将主/从模型与 MPI 同步

> ID：11246150
> 
> 赞同：4
> 
> 时间：2012-06-28T13:50:45.777
> 
> 标签：c, synchronization, mpi, master-slave

我在使用 MPI 同步主/从进程时遇到问题。我希望主人控制奴隶的执行顺序。每个奴隶必须做：1-读取2-进程。这是我的代码：

```
int main(int argc, char* argv []){

int rank,numprocess;

MPI_Init( &argc, &argv );
MPI_Comm_rank( MPI_COMM_WORLD, &rank );
MPI_Comm_size( MPI_COMM_WORLD, &numprocess );

if(rank==0){ //master

    MPI_Status s;int Sstate=1;int Rstate;

    int p;
    for(p=1;p<numprocess;p++){

        fflush(stdout);printf("master : order P%d to start reading\n",p);
        MPI_Send(&Sstate, sizeof(int), MPI_INT, p, 20, MPI_COMM_WORLD);

        MPI_Recv(&Rstate,sizeof(int),MPI_INT,p,21,MPI_COMM_WORLD,&s);
        fflush(stdout);printf("master : P%d finished reading\n",p);
    }

}
else{ //workers

    int state; MPI_Status s;
    MPI_Recv(&state,sizeof(int),MPI_INT,0,20,MPI_COMM_WORLD,&s);

    //read here
    Sleep(1000);

    //send to master : finish reading
    state=2;
    MPI_Send(&state, sizeof(int), MPI_INT, 0, 21, MPI_COMM_WORLD);

    //processing
    Sleep(3000);
    fflush(stdout);printf("worker %d ended processing\n",rank);
}

MPI_Finalize();
return 0;
} 
```

我的问题是最后一个过程。事实上，它并没有像其他人那样行事。这是我的输出：

```
mpiexec -n 4 master.exe
master : order P1 to start reading 
master : p1 finished reading
master : order P2 to start reading 
master : p2 finished reading
master : order P3 to start reading 
worker 1 ended processing 
worker 2 ended processing 
master : p3 finished reading
worker 3 ended processing 
```

为什么第三个进程不同步？感谢您的宝贵帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T14:09:32.430

您所展示的是多线程或多进程架构的*Normal 。*基本上，在您的进程调用`MPI_Send`主进程之后，它们将被释放以自行运行，因为它们不再有阻塞 MPI 调用。因此，在他们睡觉后，他们打印出他们的结束语句，*彼此独立，也独立于主人本身！*

下面我有一个图表，我希望它能说明你所看到的：

![打印独立发生](../Images/2bc3473615c584789e40581ee8fb48b6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:03:21.347

您的输出是可以预期的。您已经同步了从属进程的读取部分，但没有做任何事情来同步从属进程的处理部分。您的奴隶将按顺序读取（P1，然后是 P2，然后是 P3），但没有任何限制处理完成的顺序。此外，一个进程可以在下一个进程完成读取之前开始处理。

# iphone - 验证 NSMutableData 中的 resetBytesInRange

> ID：11246151
> 
> 赞同：0
> 
> 时间：2012-06-28T13:50:46.560
> 
> 标签：iphone, objective-c, nsmutabledata

我在内存中有一个巨大的 NSMutableData 对象（大小约为 1 MB），现在我想将对象中的所有字节替换为 0（而不是释放内存）。resetBytesInRange 方法让我可以做到这一点。但是，如何验证/检查字节是否实际设置为 0。我想查看内存地址并确认这一点。这可能吗？

我有以下代码

```
NSMutableData *imgData = [NSMutableData dataWithCapacity:50000000];
imgData = (NSMutableData*)UIImageJPEGRepresentation(img, 1.0);
[imgData resetBytesInRange:NSMakeRange(0, [imgData length]) ]; 
```

现在，当我查看 imgData 指向的地址（以及以下几个位置）时，在 resetBytes 之前和之后，我看不到从 imgData 指向的地址开始的内存位置中的值有任何变化（我希望见分配的零）。我假设内存分配从 imgData 指向的地址开始是连续的（直到 [imgData 长度]）。这个假设是否正确（似乎不是）？如果不是 NSMutableData 对象中的字节存储在哪里？我可以单独访问它们吗？

谢谢

维韦克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:31:27.977

问题不在于`-resetBytesInRange:`它不起作用。问题是您将该消息发送到*错误的对象*。

`imgData = (NSMutableData*)UIImageJPEGRepresentation(img, 1.0);`不会将 JPEG 字节分配给您在第一行中创建的可变数据。它将您对该对象的引用替换为对新对象的引用，并使用强制转换来禁止编译器对无效存储的警告。有几种方法可以正确地做到这一点：

```
NSMutableData *imgData = [NSMutableData data]; /* note, we do not specify a capacity--it's pointless for this use case */
[imgData setData: UIImageJPEGRepresentation(img, 1.0)];
[imgData resetBytesInRange: NSMakeRange(0, [imgData length])]; 
```

或者：

```
NSMutableData *imgData = [[UIImageJPEGRepresentation(img, 1.0) mutableCopy] autorelease];
[imgData resetBytesInRange: NSMakeRange(0, [imgData length])]; 
```

但两者都忽略了显而易见的事实：如果您立即将数据清零，为什么还要费心创建 JPEG 数据？你到底*想*在这里做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:04:32.733

`imgData`是一个指针（如`*`符号所示）。所以它指向一个内存位置，分配只会改变它指向的位置。大多数编程语言的真正意图并不是让您对实际内存位置进行逐字节操作。

阅读：[http ://www.cplusplus.com/forum/general/3644/](http://www.cplusplus.com/forum/general/3644/)

# asp.net - 我在 ascx 中收到“'Eval' 未声明。由于其保护级别，它可能无法访问”

> ID：11246155
> 
> 赞同：2
> 
> 时间：2012-06-28T13:51:10.803
> 
> 标签：asp.net, .net, vb.net, .net-4.0, webforms

我有一个 ascx 在这样的转发器中使用 Eval：

```
<%@ Control Language="VB" AutoEventWireup="false" CodeFile="Similar.ascx.vb" Inherits="x.y.z.Similar" %>
<asp:repeater runat="server" id="rptAlternatives" visible="false" Enableviewstate="false">
    <HeaderTemplate>
        <section id="similar" class="sidelist sideModule">
            <h3>Possible Alternatives:</h3> 
            <ul class="sideborder">
    </HeaderTemplate>
    <ItemTemplate>
        <li>
            <a href="/bar/<%# Eval("URL")%>" class="box">foo</a>
        </li>
    </ItemTemplate>
    <FooterTemplate>
            </ul>
        </section>
    </FooterTemplate>
</asp:repeater> 
```

这在我的开发 PC 上运行良好，但是当我将它部署到我们的实时服务器时它失败了：`Compiler Error Message: BC30451: 'Eval' is not declared. It may be inaccessible due to its protection level.`真正奇怪的是，有时重新启动应用程序池会使其消失，然后有时又会再次出现。此外，它不会在使用`Eval`.

本地环境是 IIS 7.5.7600.16385，应用程序池运行 ASP.NET v4.0 Classic。服务器环境是一样的。我在我的机器上从 VS 发布并将其复制到实时服务器上进行部署。

在此部署之前，现场站点使用的是 v2.0。将站点升级到 v4.0 是我们尝试发布的更改的一部分。作为此版本的一部分，此代码没有更改。它一直使用 Eval，这一直很好。

我已经安装了 Visual Studio 11 beta，但我在这个项目中使用的是 2010。

有什么想法可能导致这种情况吗？

**编辑：**

[这个专家交流帖子](http://www.experts-exchange.com/Software/Server_Software/Web_Servers/Q_23321972.html)似乎描述了完全相同的行为。他们通过在 ascx 和 ascx.vb 文件中更改其类的名称来“修复”它。它们在更改之前匹配，并且在更改之后匹配，但是更改显然在编译器中慢跑了一些东西。我可能会试一试，但特定的 ascx 会停止工作似乎并不令人满意。

我还发现很多帖子建议将其更改为`DataBinder.Eval(Container.DataItem, "URL")`. 但是，当代码之前工作并且突然停止时，我再次不愿意这样做。这是我不愿意使用的神奇而随机的“修复”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:35:08.807

事实证明，重要的细节是我们正在从 v2.0 更新到 v4.0，并且我们正在将文件复制到先前部署的顶部。

先前部署的服务器上的 bin 目录中仍有 v2.0 预编译的网站 DLL。由于预编译的 DLL 名称在版本之间发生变化，旧的并没有被替换。不知何故，在同一目录中有 v2.0 和 v4.0 DLL 会使服务器感到困惑。因为我的开发机器上没有这些旧的 DLL，所以我没有看到同样的问题。

删除旧的 DLL 已解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-24T21:01:34.287

这发生在 VS2017 中，在我的情况下，当从其他或更旧的项目（添加->现有项目）添加类时，或者当您添加控件/WebForm，而不是从其他或更旧的项目中剪切和粘贴代码时。

解决方法如下：

1.  不要使用 Add->Existing Item
2.  添加新的 EMPTY 控件/WebForm（保留默认名称）
3.  打开后面的代码并在空的默认文件上运行编译
4.  在 .aspx 中添加一些代码，例如 DIV 标记
5.  再次编译
6.  从文件后面的代码中引用 DIV 标记（即 DivId.Visible = False）
7.  再次编译
8.  现在程序集/编译器已连接到新文件/类
9.  现在将其他项目中的代码剪切并粘贴到编辑器中
    10.  再次编译
    11.  没有更多的错误！

享受！

# java - 我想扩展枚举和对象（通用）

> ID：11246157
> 
> 赞同：0
> 
> 时间：2012-06-28T13:51:42.383
> 
> 标签：java, generics, object, enums, classcastexception

`Enum`是在`java.lang.Enum`，并且`Object`是在`java.lang.Object`。那么，为什么`Enum`不是一个`Object`？（我得到一个`java.lang.ClassCastException`）

我想做一个可以接受两者的课程`Object`，`Enum`就像这样......

```
public class MyType<T extends Enum<T>, Object> { 
```

但这会产生编译错误。我怎样才能让我`MyType`接受所有（或两种）类型的课程？（`Enum`或`Object`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:55:57.280

由于每个 Java 对象都是`instanceof Object`，没有什么比`MyType<?>`无边界声明更好的了。这将捕获任何类型，包括枚举类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:55:17.470

枚举是一个对象。见[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Enum.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Enum.html) 所以

```
MyType<Object> { 
```

应该管用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:56:12.640

您可以在[文档](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)中看到：

> 除了没有超类的 Object 之外，每个类都有一个且只有一个直接超类（单继承）。在没有任何其他显式超类的情况下，每个类都隐含地是 Object 的子类。

你可以得出结论：

1.  即使不明确，您的课程也将从`Object`;
2.  如果`Object`是一种表示其他类的计算方式，那么您将无法做到，因为 java 不支持多重继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T14:00:47.710

只需查看类对象的 API，您就可以阅读：

```
Class Object is the root of the class hierarchy. Every class has Object as a superclass. 
All objects, including arrays, implement the methods of this class. 
```

这意味着这`Enum`是一个对象（您也可以通过查看[Enum](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html)的 JavaDocs 来验证这一点）。因此，如果您只是告诉`MyType`包含 Object( `MyType<Object>`)，它将接受您最初发布的 Object 和 Enum。

尽管请注意这可能会导致不需要的行为并且被认为是不安全的，因为所有类都是对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T01:00:27.300

我不认为你已经正确地陈述了你的问题。我想你希望你的班级接受`Enum` *或* `Object`。当你这样说时，你会发现这是唯一可能的选择。

如果你想让它接受`Enum` *and* `Object`，那相当于说“接受`Enum`”。在这种情况下 > 就是答案。

# typo3 - TYPO3 - 如何在扩展中检索/更新自己的表？

> ID：11246158
> 
> 赞同：1
> 
> 时间：2012-06-28T13:51:44.513
> 
> 标签：typo3, typoscript, typo3-tca

我想创建一个像**tt_news**这样的扩展，所以我需要连接我自己的表。那么如何将数据提取和插入写入自定义表

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:14:45.813

一般来说，从头开始创建扩展是没有意义的，尤其是在你学习的时候。

### 老套

[对于“老派”扩展，这是安装Extension Kickstarter](http://typo3.org/extensions/repository/view/kickstarter)的最佳方式。

它将帮助您创建表、所有必需的结构等。还允许您扩展现有表（即，您可以使用它来修改 tt_news 表并添加自定义字段，而无需接触 tt_news 的源）

您应该选择这种方式，尤其是当您想影响一些以相同方式编写的*知名扩展时。*

所有使用 DB 的方法都可以在[API中找到](http://typo3.org/api/typo3/classt3lib___d_b.html)

### MVC-Extbase

如果您更熟悉 MVC，最好使用[Extension Builder](http://typo3.org/extensions/repository/view/extension_builder)

这是一种更有趣的方式，可以更快地创建扩展，但它的文档较少且更抽象。

它还具有用于创建数据库表（模型）的内置建模器，并`actions`为列表、显示、修改和删除表中的记录创建一组默认值。（有一点经验，可以在几个小时内创建 tt_news 的简化版本）

对于我的新分机，我通常更喜欢[extbase](/questions/tagged/extbase "显示标记为“extbase”的问题")和[流体](/questions/tagged/fluid "显示标记为“流体”的问题") ，特别是因为它是在未来使用[flow3](/questions/tagged/flow3 "显示标记为“flow3”的问题")的某种准备，但您需要考虑哪些点对您更重要。

# php - Selenium：表达式不是合法表达式/Xpath

> ID：11246160
> 
> 赞同：0
> 
> 时间：2012-06-28T13:51:49.990
> 
> 标签：php, xpath, selenium, selenium-webdriver, behat

我正在玩 Behat 和 Selenium 服务器。我正在尝试根据其在文档中的位置来定位特定标签。

我使用 AquaPath，一个 GUI 来玩 XPath 并且工作正常。我的问题是，当我在 Behat/Selenium 中尝试相同的表达式时，出现“表达式不是合法表达式”错误消息。

这是我的 Xpath：

```
(//label)[5]/@for 
```

我正在寻找具有此属性的第五个标签元素的“for”属性。看起来很简单，但不起作用，我真的不知道为什么......

这是完整的日志（注意 //html 是自动添加的）：

```
The given selector //html//(label)[1] is either invalid or does not result in a WebElement. The following error occurred:
[InvalidSelectorError] Unable to locate an element with the xpath expression //html//(label)[1] because of the following error:
[Exception... "The expression is not a legal expression."  code: "51" nsresult: "0x805b0033 (NS_ERROR_DOM_INVALID_EXPRESSION_ERR)"  location: "file:///var/folders/66/bv_nvdt97f33pm2qn78v_8qc0000gn/T/anonymous5419845357799771264webdriver-profile/extensions/fxdriver@googlecode.com/components/driver_component.js Line: 2621"]
Command duration or timeout: 6 milliseconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/invalid_selector_exception.html
Build info: version: '2.23.1', revision: '17143', time: '2012-06-08 18:59:04'
System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.7.4', java.version: '1.6.0_33'
Driver info: driver.version: EventFiringWebDriver
Session ID: c3bdf2e6-5042-ac4a-95c5-4735f4318899 
```

任何的想法 ？

这是 HTML（标签并不总是处于相同的深度）：

```
<!DOCTYPE html>
<html>
  <head></head>
  <body>
    <form action="" method="get" accept-charset="utf-8">
      <label for="label1"></label>
      <label for="label2"></label>
      <div>
        <label for="label3"></label>        
      </div>
      <fieldset>
        <div>
          <label for="label4"></label>
        </div>        
      </fieldset>
      <label for="label5"></label>
      <label for="label6"></label>
      <label for="label7"></label>
      <label for="label8"></label>
      <label for="label9"></label>
      <p><input type="submit" value="Continue &rarr;"></p>
    </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:56:42.210

尝试`(//fieldset/label)[5]/@for`代替`(//fieldset//label)[5]/@for`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:01:19.230

我的观点是带有“xpath”选择器的“find()”方法不能获取属性，只能获取元素。必须通过“getAttribute()”来获取属性。

# c# - VS 2005在构建项目解决方案时重新启动？如何解决？

> ID：11246163
> 
> 赞同：0
> 
> 时间：2012-06-28T13:52:06.307
> 
> 标签：c#, build, visual-studio-2005, application-restart

我在 vs2005 网站项目解决方案中遇到了一个问题。
当我开始构建我的 vs2005 项目时，vs2005 显示错误：-
**“Microsoft Visual Studio 遇到问题，需要关闭”**。

每次我开始构建解决方案时都重新启动 Visual Studio。

我怎样才能从这个错误中获得游乐设施？

任何解决方案。

**来自事件查看器的错误消息：**
*为了隐私，我用 dummy 更改了我的项目名称*

```
它显示消息：Windows 无法访问文件 D:\MyProject\Bin\MyLib.pdb，原因之一是：网络连接、存储文件的磁盘或安装的存储驱动程序有问题这台电脑；或者磁盘丢失。由于此错误，Windows 关闭了 Microsoft Visual Studio 2005 程序。

程序：Microsoft Visual Studio 2005
文件：D:\MyProject\Bin\MyLib.pdb

错误值列在附加数据部分。
用户操作
1\. 再次打开文件。这种情况可能是一个临时问题，当程序再次运行时会自行纠正。
2\. 如果文件仍然无法访问并且
    - 它在网络上，您的网络管理员应该验证网络没有问题并且可以联系服务器。
    - 它位于可移动磁盘上，例如软盘或 CD-ROM，确认磁盘已完全插入计算机。
3\. 通过运行 CHKDSK 检查和修复文件系统。若要运行 CHKDSK，请单击“开始”，单击“运行”，键入 CMD，然后单击“确定”。在命令提示符下，键入 CHKDSK /F，然后按 Enter。
4\. 如果问题仍然存在，请从备份副本中恢复文件。
5、判断同一个磁盘上的其他文件是否可以打开。否则，磁盘可能已损坏。如果是硬盘，请联系您的管理员或计算机硬件供应商以获得进一步帮助。

附加数据
错误值：C000009C
磁盘类型：3

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:19:02.257

由于**.pdb**文件而出现问题。它让我遇到了问题。

当我删除并重新插入 (D:\MyProject\Bin\MyLib.pdb) 类库文件(.pdb) 到我的 Web 解决方案中时，
它就起作用了。

我解决了从类库中删除和重新插入文件到 Web 应用程序然后构建/重新构建解决方案发出的问题...

它解决了我的问题。

谢谢

# c++ - 创建一个 char 数组，其大小由参数给定 - C++

> ID：11246170
> 
> 赞同：0
> 
> 时间：2012-06-28T13:52:27.730
> 
> 标签：c++, static-array

我有一个带有静态字符数组的类。数组的大小在`argv`.

我想做这样的事情：

```
class ABC {

public:
  static char *buffer;
  ABC(int size) {
    ABC::buffer = new char[size];
  }

}

// in other file:

ABC tempVar(atoi(argv[1])); 
```

但这似乎不起作用。我收到如下错误：

> 错误 2 错误 LNK2001: 无法解析的外部符号 "public: static char * ABC::buffer" (?buffer@ABC@@2PADA) gpslib.lib

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:54:34.720

您只需要定义`static buffer`一次，它只被声明过。将以下内容添加到一个`.cpp`文件中：

```
char* ABC::buffer; 
```

请注意，每次`ABC`创建实例时，先前分配的`buffer`将丢失（内存泄漏），这不是您想要的。

一个更强大的解决方案将`buffer`作为实例（非静态）成员。一个更强大的解决方案将使用`std::string`而不是 a`char*`并为您管理动态内存分配。

# c++ - C++ 嵌套类正在产生对外部类的未定义引用

> ID：11246171
> 
> 赞同：1
> 
> 时间：2012-06-28T13:52:31.320
> 
> 标签：c++, nested, nested-class

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:57:26.320

A few things to consider:

1.  `Connector* Connector();` - what are you trying to do here? If you're trying to declare a pointer to a connector, do `Connector* ptr_connector;` or something. You're basically invoking a constructor, declaring a pointer, and giving neither a variable name - it's crazy!

2.  Did you actually implement the functions were seeing in the nested class, if not that's where your problem is! Also, did you implement them correctly for a nested class? The syntax is a little different if you're not implementing them inline in the class.

3.  `ClientConnection::Connector* connector = client.Connector();` - This doesn't work either. you declared an explicit constructor in your class requiring a client connection object. But here, you're trying to create a connector without passing any client object. You don't have a constructor for Connector taking no parameters.

# mysql - mysql - 如何使用 sql 计算一小时（日期时间）内的记录数

> ID：11246182
> 
> 赞同：4
> 
> 时间：2012-06-28T13:53:07.410
> 
> 标签：mysql, sql

> **可能重复：**
> [按时间分组记录](https://stackoverflow.com/questions/10110341/group-records-by-time)

我有一个记录网页请求的 mysql 表。

我想写一个输出每小时请求数的sql。

```
INPUT:
timestamp              browser
-------------------    -------
2012-06-28 15:06:14    chrome
2012-06-28 15:12:15    IE6
2012-06-28 16:32:16    IE7

OUTPUT:
timestamp              count
-------------------    -------
2012-06-28 15:00:00    2
2012-06-28 16:00:00    1 
```

我猜我的第一步是“截断”日期时间字段，以便我可以进行分组。搜索，我发现了一些四舍五入的例子，但没有一个可以截断。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:55:54.153

```
select count(no_of_requests) from table group by date(datetime_field) , hour(datetime_field) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T13:57:29.863

尝试格式化日期

```
DATE_FORMAT(timestamp, '%Y-%m-%d %H') as formatted_timestamp 
```

然后对该 formatted_timestamp 进行分组

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T14:49:05.760

假设`ts_table`您的表名和`ts`时间戳列名，

```
mysql> select
    ->     addtime( date_format( ts, '%Y-%m-%d %H' ), '00:00:00' ) as 'during'
    ->     , count( date_format( ts, '%Y-%m-%d %H' ) ) as 'visit_count'
    -> from ts_table
    -> group by 'during'
    -> ;
+---------------------+-------------+
| during              | visit_count |
+---------------------+-------------+
| 2012-06-28 15:00:00 |           2 |
| 2012-06-28 16:00:00 |           1 |
+---------------------+-------------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T13:56:56.733

您应该能够按 DATE() 和 HOUR() 函数进行分组以获取输出。

# html - html5：如何标记专有名称和常用名称？

> ID：11246185
> 
> 赞同：3
> 
> 时间：2012-06-28T13:53:13.260
> 
> 标签：html, accessibility, semantic-markup

```
<p>...the favourite color of Purple is purple...</p> 
```

第一个“紫色”是公司名称，第二个是颜色名称，

我应该如何根据 html5 规范标记它？

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T01:22:35.473

您有多种选择：

1.  保持原样，HTML 并不真正关心与描述文档结构（段落、标题、列表等）无关的语义。如果您确实想表达更详细的文档或应用程序语义，请查看[WAI-ARIA](http://www.w3.org/TR/wai-aria/)。
2.  如果区分紫色这个词作为网站或应用程序的一部分的两种用法对您很重要，那么请使用一个`class`或多个[`data-*`属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)
3.  如果单词具有规范的机器可读形式，并且您希望计算机以某种方式解析这些值，请[使用`data`元素](http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-data-element).
4.  如果区分这两种用途对于使用您网站内容的用户或系统很重要，请使用 HTML5 的语义可扩展性功能：[微数据](http://www.whatwg.org/specs/web-apps/current-work/multipage/microdata.html#microdata)。（如果您使用 HTML 的 XML 方言，另请参阅：[RDFa](http://www.w3.org/TR/rdfa-syntax/)）
5.  根据您的迫切需要结合上述任何一种方法。

要在这些方法之间做出决定，您应该问自己：

*   为了什么目的我需要扩展 HTML 的语义词汇？
*   是供我自己使用，还是我试图发布信息供他人使用？
*   如果我为他人出版，我将使用什么共享词汇？

代码示例：

**类属性**

它们的目的是为您的标记添加附加信息，请记住该`class`属性在 HTML 规范中，*而不是*CSS 规范中：

```
<p>...the favourite color of <span class="company">Purple</span>
  is <span class="color">purple</span>...</p> 
```

话虽如此，当然，一旦您以这种方式标记了内容，显而易见的事情就是提供页面工具来执行诸如“突出显示所有公司”之类的操作。人们已经使用`class`属性作为通用语义扩展机制的基础，但是对于这种极端的方法，请参见[微格式](http://microformats.org/)。

**数据属性**

这些`data-*`属性允许您将自定义属性添加到标记中，以便使用脚本进行处理，以确保您不会意外使用自定义属性，然后在未来版本的 HTML 中使用该属性：

```
<p>...the favourite color of <span data-typeofthing="company">Purple</span>
  is <span data-typeofthing="color">purple</span>...</p> 
```

取决于您页面上的脚本对`data-*`属性做一些有用的事情，浏览器和其他 Web 客户端将忽略它们。

**自定义数据元素**

数据元素用于具有不精确的自然语言表达但也具有精确的机器可读表达的事物。假设公司可以通过股票代码唯一标识，RGB 将用于颜色：

```
<p>...the favourite color of <data value="purp">Purple</data>
  is <data value="rgb(128,0,128)">purple</data>...</p> 
```

浏览器可能不会对`data`元素做任何特别的事情。您很可能会将`data`元素与微格式、RDFa 或微数据一起使用。

**微数据**

使用[组织架构](http://schema.org/Organization)：

```
<p>...the favourite color of 
  <span itemscope itemtype="http://schema.org/Organization">
    <span itemprop="name">Purple</span>
  </span>
is purple...</p> 
```

我所知道的颜色没有任何东西，但如果它对你很重要，你总是可以为此发布自己的模式。这种方法只有在有某种共享词汇时才能真正使任何人受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:07:33.090

## 哪个元素？

第一项任务是决定应该使用哪个元素来包含“实体”（公司名称和颜色名称）。很可能你想在`span`这里使用。如有疑问，请使用`span`. 在某些情况下（取决于内容）可以使用其他元素：

*   如果实体是某种关键字，则可以使用该**[`b`元素（“为了实用目的而引起注意的一段文本，但没有传达任何额外的重要性，也没有暗示替代的声音或情绪”）](http://www.w3.org/TR/html5/the-b-element.html#the-b-element)**
*   如果实体是作品的标题（书籍、电影、歌曲等），则应使用该**[`cite`元素。](http://www.w3.org/TR/html5/the-cite-element.html#the-cite-element)**
*   如果实体在同一段落或最近的祖先分段元素中定义，则可能使用该**[`dfn`元素](http://www.w3.org/TR/html5/the-dfn-element.html#the-dfn-element)**
*   在某些情况下，该**[`i`元素](http://www.w3.org/TR/html5/the-i-element.html#the-i-element)**可能是合适的

如果该术语是缩写/首字母缩略词，请使用元素 (*除了*/ /之外，请使用**[`abbr`元素](http://www.w3.org/TR/html5/the-abbr-element.html#the-abbr-element)**(*而不是*resp `span`. )。 *`b``dfn``i`*

 *一个好主意可能是使用该**[`a`元素](http://www.w3.org/TR/html5/the-a-element.html#the-a-element)**将实体名称链接到相关网页。该`rel`属性可能会提供额外的元数据（您可以使用[`rel`HTML5 规范中列出的值](http://www.w3.org/TR/html5/links.html#linkTypes)，或[微格式 wiki 中的](http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions)[注册`rel`](http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions)值），具体取决于内容/上下文。

## 哪些属性？

看看[全局属性](http://www.w3.org/TR/html5/global-attributes.html#global-attributes)。

`class`如果您想使用[microformats](http://microformats.org/) ，将使用该属性。您当然可以使用其他`class`名称，但它们只对您自己（文档、CSS、JS）或其他阅读您的标记（文档、抓取）的人有用。

对于像个人/公司名称这样的实体名称，您可能希望将`translate`属性与`no`关键字一起使用，因为不应翻译此类名称。

`title`可能会提供附加信息（请注意，它具有`dfn`/的特殊语义`abbr`），但不要依赖它来获取重要信息。

如果`lang`实体名称是外语，则使用。

## 如何对内容进行有意义的注释？

有三种流行的选择，也可以一起使用（请参阅[此答案（“第三步”）](https://stackoverflow.com/a/12869163/1591669)以获得差异的简短摘要）：

*   微格式
*   RDFa
*   微数据

您可能需要其他元素；如果是这样，请使用`span`.*

# unix - 如何在 Unix 中将相对路径转换为绝对路径

> ID：11246189
> 
> 赞同：33
> 
> 时间：2012-06-28T13:53:27.297
> 
> 标签：unix

我想转换

相对路径 -`/home/stevin/data/APP_SERVICE/../datafile.txt`

至

绝对路径 -`/home/stevin/data/datafile.txt`

Unix中是否有内置工具可以执行此操作，或者关于如何实现此操作的任何好主意？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-28T13:59:40.150

`readlink -f /home/stevin/data/APP_SERVICE/../datafile.txt`假设你的 Unix/Linux 有`readlink`.

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-28T14:00:46.163

像这样的东西可以帮助目录：（对于文件，附加`basename`）

```
echo $(cd ../dir1/dir2/; pwd) 
```

对于文件，

```
filepath=../dir1/dir2/file3
echo $(cd $(dirname $filepath); pwd)/$(basename $filepath) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-04-09T14:21:25.990

我很惊讶还没有人提到`realpath`。将您的路径传递给`realpath`它，它将规范化它们。

```
$ ls
Changes
dist.ini

$ ls | xargs realpath
/home/steven/repos/perl-Alt-Module-Path-SHARYANTO/Changes
/home/steven/repos/perl-Alt-Module-Path-SHARYANTO/dist.ini 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-25T16:26:09.687

基于[Thrustmaster 的回答](https://stackoverflow.com/a/11246338/321973)，但使用纯 bash：

```
THING="/home/stevin/data/APP_SERVICE/../datafile.txt"
echo "$(cd ${THING%/*}; pwd)/${THING##*/}" 
```

当然，这`cd`需要实际存在的路径，但情况可能并非总是如此 - 在这种情况下，您可能会通过编写一个小的 Python 脚本来过上更简单的生活......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-26T06:22:03.090

这是我的辅助功能

```
# get a real path from a relative path.
function realPath() {
  if [[ -d "$1" ]]; then
    currentPath="$(pwd)" # save current path
    cd "$1" || exit 1 # cd to the checking dir
    pwd
    cd "$currentPath" || exit 1 # restore to original path
  else
    echo "$(cd "$(dirname "$1")" && pwd -P)/$(basename "$1")"
  fi
} 
```

# c# - System.MissingMethodException: No parameterless constructor defined for this object. MVC4

> ID：11246197
> 
> 赞同：9
> 
> 时间：2012-06-28T13:54:02.090
> 
> 标签：c#, .net, razor, asp.net-mvc-4

I am creating a MVC4 application and I have got some troubles when I try to get back a form from my view to my controller.

I read several SO post on the topic but unfortunately, I did not managed to find which object does not have a parameterless constructor. All my model classes have a no parameter constructor. And in debug the error stack is just in Internet Explorer but nothing happen in visual studio.

This is the error stack :

Exception Details: System.MissingMethodException: No parameterless constructor defined for this object.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

```
[MissingMethodException: No parameterless constructor defined for this object.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +117
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +247
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +106
   System.Web.Mvc.DefaultModelBinder.CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType) +243
   System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +151
   System.Web.Mvc.DefaultModelBinder.UpdateCollection(ControllerContext controllerContext, ModelBindingContext bindingContext, Type elementType) +545
   System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +609
   System.Web.Mvc.DefaultModelBinder.GetPropertyValue(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor, IModelBinder propertyBinder) +33
   System.Web.Mvc.DefaultModelBinder.BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor) +497
   System.Web.Mvc.DefaultModelBinder.BindProperties(ControllerContext controllerContext, ModelBindingContext bindingContext) +283
   System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +677
   System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) +489
   System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) +153
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState) +883059
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +137
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +167
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag) +27
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__17(AsyncCallback asyncCallback, Object asyncState) +50
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +137
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +167
   System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state) +869289
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +137
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +167
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag) +27
   System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +391
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__3(AsyncCallback asyncCallback, Object asyncState) +827094
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +137
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +167
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag) +27
   System.Web.Mvc.<>c__DisplayClass6.<BeginProcessRequest>b__2() +283
   System.Web.Mvc.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a() +19
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func`1 func) +161
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +405
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375 
```

My Model classes :

```
 public class Form
    {
        public Form()
        {
            this.Rows = new List<Row>();
        }

        public List<Row> Rows { get; set; }
    }

    public class Row
    {
        protected Row()
        {
            this.Label = string.Empty;
            this.Type = string.Empty;
        }

        public string Label { get; set; }

        public string Type { get; set; }
    }

    public class SimpleRow : Row
    {
        public SimpleRow()
        {
            this.Value = string.Empty;
        }

        public string Value { get; set; }
    }

    public class DropDownRow : Row
    {
        public DropDownRow()
        {
            this.Content = new List<ContentDropDown>();
        }

        public List<ContentDropDown> Content { get; set; }
    }

    public class ContentDropDown
    {
        public ContentDropDown()
        {
            this.Title = string.Empty;
            this.Selected = false;
        }

        public string Title { get; set; }

        public bool Selected { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T15:32:27.387

This can also happen if your underlying class is defined to accept parameter. Since MVC is unable to pass the right value it fails. Try declare a parameter-less class as well. This solved my problem during button click postback.

Eg:

```
public class Employee
{

   public int EmployeeID {get;set;}
   public string EmployeeName {get;set;}
   public int CostCenter {get;set;}
   public DateTime StartDate {get;set;}

   public Employee(int employeeID)
   {
       //Initialize values
   }

   //Also include a parameter-less construct like below
   public Employee()
   {
   }

} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-28T15:08:59.393

The default constructor on your `Row` class is `protected`. Try changing it to `public`.

# vb.net - 如何只允许文本框中的数字和点？

> ID：11246198
> 
> 赞同：3
> 
> 时间：2012-06-28T13:54:05.310
> 
> 标签：vb.net, textbox

我想知道如何让我的文本框只接受数字和点，例如：

123.45 或 115 或 218.16978

等等

我已经有以下代码：

```
Private Sub TxtHStof_KeyPress(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TxtHStof.KeyPress
    e.Handled = Not Char.IsDigit(e.KeyChar)

End Sub 
```

但这只允许没有点的数字。

我怎样才能更改代码，使它也允许点，但没有别的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T13:58:54.900

```
e.Handled = Not (Char.IsDigit(e.KeyChar) OR e.KeyChar=".") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-07-20T05:54:58.563

接受的解决方案不适合

1.  多个小数项，例如“12....1234”
2.  操作系统特定的小数分隔符

这对我有用

```
Private Sub TextBox1_KeyPress(sender As Object, e As KeyPressEventArgs) Handles TextBox1.KeyPress
    Dim DecimalSeparator As String = Application.CurrentCulture.NumberFormat.NumberDecimalSeparator
    e.Handled = Not (Char.IsDigit(e.KeyChar) Or
                     Asc(e.KeyChar) = 8 Or
                     (e.KeyChar = DecimalSeparator And sender.Text.IndexOf(DecimalSeparator) = -1))
End Sub 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T13:58:33.623

您应该使用`MaskedTextBox`- 请参阅此处了解如何设置格式字符串（它允许您仅限制为数字和小数点）

[http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.mask.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.mask.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-18T21:45:37.250

使用此代码，您可以使用“，”（欧洲）和“。” （美国）小数。

```
Private Sub TGewicht_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TGewicht.KeyPress
    e.Handled = Not (Char.IsDigit(e.KeyChar) Or Asc(e.KeyChar) = 8 Or ((e.KeyChar = "." Or e.KeyChar = ",") And (sender.Text.IndexOf(".") = -1 And sender.Text.IndexOf(",") = -1)))
End Sub 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-04T05:32:37.363

```
 '****To Allow only Numbers with Decimal and BACKSPACE enabled****
    If Not (Char.IsDigit(e.KeyChar) Or e.KeyChar = ".") And Not Char.IsControl(e.KeyChar) Then
        e.Handled = True
    End If 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-28T13:59:03.263

来自 C# 而不是 VB，我对此进行了尝试，但这是否可行：

```
e.Handled = Not (Char.IsDigit(e.KeyChar) AndAlso e.KeyChar.Equals('.')) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-24T13:28:50.330

在 MODULE o FORM 中插入函数

```
Public Sub OnlyNumber(Ct As TextBox, MaxLength As Integer)
    Ct.MaxLength = MaxLength
    AddHandler Ct.KeyPress, AddressOf ValidarTeclaNumeros
End Sub

Private Sub ValidarTeclaNumeros(sender As Object, e As KeyPressEventArgs)
    Dim Ct As TextBox
    Ct = sender
    If [Char].IsDigit(e.KeyChar) OrElse [Char].IsControl(e.KeyChar) Then
        'ok 
        'e.Handled = True
    ElseIf [Char].IsPunctuation(e.KeyChar) Then
        If (Ct.Text.Contains(",") OrElse Ct.Text.Contains(".")) Then
            e.Handled = True
        End If

    Else
        e.Handled = True
    End If

End Sub 
```

在加载表单中为您的控件添加此代码仅数字（并且只有一个逗号或文档）

```
OnlyNumber(txtControl, 10) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-31T22:17:48.083

我从几乎相同的问题开始，但我确实关心能够粘贴。在网上搜索如何做到这一点时，我发现我真的应该处理：

1.  句点或逗号作为十进制指示符，具体取决于您的操作系统的设置方式。
2.  只允许符合模式的按键，同时仍然允许光标控制字符，如箭头和退格。
3.  只允许粘贴到符合模式的 TextBox 中。我选择了这样一种方式，在粘贴时，代码将粘贴的文本视为正在键入文本，因此将“a1b.c2d,e3f.g4h,i5j”粘贴到 TextBox 将显示为“1.2345”如果句点是您的十进制指示符，如果逗号是您的十进制指示符，则为“12,345”。

我尝试了 MaskedTextBox 并且真的不喜欢它，因为它强制执行小数点位置，我真的只是希望能够自由填写任何数字。我使用 RegEx 进行模式匹配可能有点过火了，但现在我应该能够在几乎任何地方重用这段代码。

```
Public Class frmMain

    Dim RegexValidator As System.Text.RegularExpressions.Regex
    Dim FormLoaded As Boolean = False

    Private Sub frmMain_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim RegexDecimalPattern As String = Globalization.CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator
        RegexDecimalPattern = IIf(RegexDecimalPattern = ".", "\.", RegexDecimalPattern)
        RegexValidator = New System.Text.RegularExpressions.Regex("^\d*" & RegexDecimalPattern & "?\d*$", System.Text.RegularExpressions.RegexOptions.IgnoreCase)
        FormLoaded = True
    End Sub

    Private Sub TextBox1_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox1.KeyPress
        ' Code below is based on
        ' http://www.vbforums.com/showthread.php?626378-how-to-validate-textbox-allows-only-numeric-and-decimal-in-vb-net
        ' but was modified to be based on Regex patterns.
        '
        ' Note that:
        ' KeyPress event validation covers data entry as it is being typed.
        ' TextChanged event validation covers data entry by cut/pasting.
        If Char.IsControl(e.KeyChar) Then
            'Allow all control characters.
        Else
            Dim Text = Me.TextBox1.Text
            Dim SelectionStart = Me.TextBox1.SelectionStart
            Dim SelectionLength = Me.TextBox1.SelectionLength
            Text = Text.Substring(0, SelectionStart) & e.KeyChar & Text.Substring(SelectionStart + SelectionLength)
            If Not RegexValidator.IsMatch(Text) Then e.Handled = True
        End If
    End Sub

    Private Sub TextBox1_TextChanged(sender As Object, e As EventArgs) Handles TextBox1.TextChanged
        ' If default text is used in a textbox, a TextChanged event occurs before 
        ' RegexValidator is initialized during the Form Load, so we need to check. 
        If FormLoaded Then
            ' Note that:
            ' KeyPress event validation covers data entry as it is being typed.
            ' TextChanged event validation covers data entry by cut/pasting.
            Dim Text = Me.TextBox1.Text
            Dim ValidatedText As String = ""
            Dim KeyChar As Char
            For Each KeyChar In Text
                If RegexValidator.IsMatch(ValidatedText + KeyChar) Then ValidatedText += KeyChar
            Next
            If (ValidatedText.Length > 0) And (TextBox1.Text <> ValidatedText) Then
                Me.TextBox1.Text = ValidatedText
                Me.TextBox1.SelectionStart += ValidatedText.Length
            End If
        End If
    End Sub
End Class 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-11-18T23:25:14.953

我迟到了，但这是我的代码

```
 Private Sub LoanFeeTextBox_KeyPress(sender As Object, e As KeyPressEventArgs) Handles LoanFeeTextBox.KeyPress
        If Char.IsControl(e.KeyChar) Then
        ElseIf Char.IsDigit(e.KeyChar) OrElse e.KeyChar = "."c Then
            If LoanFeeTextBox.TextLength = 12 And LoanFeeTextBox.Text.Contains(".") = False Then
                LoanFeeTextBox.AppendText(".")
            ElseIf e.KeyChar = "." And LoanFeeTextBox.Text.IndexOf(".") <> -1 Then
                e.Handled = True
            ElseIf Char.IsDigit(e.KeyChar) Then
                If LoanFeeTextBox.Text.IndexOf(".") <> -1 Then
                    If LoanFeeTextBox.Text.Length >= LoanFeeTextBox.Text.IndexOf(".") + 3 Then
                        e.Handled = True
                    End If
                End If
            End If

        Else
            e.Handled = True
        End If
    End Sub 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-28T13:26:28.413

```
Private Sub TextBox2_KeyPress(
   ByVal sender As Object,
   ByVal e As System.Windows.Forms.KeyPressEventArgs
) Handles TextBox2.KeyPress

    e.Handled = Not (Char.IsDigit(e.KeyChar) Or e.KeyChar = "." Or Asc(e.KeyChar) = 8)
End Sub 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-26T02:04:11.853

只需添加另一个解决方案。此代码限制用户只能输入一个“。” 小数点，只有小数点后两位，可以设置你想使用多少位数（目前我将它设置为只允许小数点前最多 5 个整数。还允许使用退格和删除。这样他们不能让手指多加一个“。”并以“45.5.5”之类的结尾。

```
If Char.IsControl(e.KeyChar) Then
        ElseIf Char.IsDigit(e.keyChar) OrElse e.keyChar = "."c Then

            If Amount_FundedTextBox.TextLength = 5 And Amount_FundedTextBox.Text.Contains(".") = False Then
                Amount_FundedTextBox.AppendText(".")
            ElseIf e.KeyChar = "." And Amount_FundedTextBox.Text.IndexOf(".") <> -1 Then
                e.Handled = True
            ElseIf Char.IsDigit(e.KeyChar) Then
                If Amount_FundedTextBox.Text.IndexOf(".") <> -1 Then
                        If Amount_FundedTextBox.Text.Length >= Amount_FundedTextBox.Text.IndexOf(".") + 3 Then
                            e.Handled = True
                        End If
                    End If
                End If

            Else
                e.Handled = True
        End If 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-18T15:20:23.820

您可以通过添加“KeyPress”处理程序（来自 TextBox 属性）并指定允许的字符来限制文本框中的字符条目。如果字符是“处理的”，那么它是不允许的。

```
Private Sub TextBox_KeyPress(sender As Object, e As KeyPressEventArgs) Handles TextBox.KeyPress
    Dim txt As TextBox = CType(sender, TextBox)

    If Not ((Char.IsDigit(e.KeyChar)) Or (e.KeyChar = "E") Or (e.KeyChar = "e") Or (e.KeyChar = "-")) Then e.Handled = True
    If e.KeyChar = Chr(8) Then e.Handled = False 'allow Backspace
    If e.KeyChar = "." And txt.Text.IndexOf(".") = -1 Then e.Handled = False 'allow single decimal point
    If e.KeyChar = Chr(13) Then GetNextControl(txt, True).Focus() 'Enter key moves to next control
End Sub 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-21T08:33:13.763

```
Private Sub TextBox4_KeyPress(sender As Object, e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox4.KeyPress

        ' its worked for only number with point and worked backspace 
        If Not Char.IsDigit(e.KeyChar) And Not e.KeyChar = "." Then
            e.Handled = True
        End If
        If e.KeyChar = "." And TextBox4.Text.IndexOf(".") <> -1 Then
            e.Handled = True
        End If
        If e.KeyChar = "." Then
            e.Handled = False
        End If
        If e.KeyChar = Chr(Keys.Back) Then
            e.Handled = False
        End If
        If Char.IsDigit(e.KeyChar) Then
            If TextBox4.Text.IndexOf(".") <> -1 Then
                If TextBox4.Text.Length >= TextBox4.Text.IndexOf(".") + 3 Then  'replace 2 for greater numbers after decimal point
                    e.Handled = True
                    TextBox4.Focus()
                End If
            End If
        End If
        ' is for only digit with back space 
        e.Handled = Not Char.IsDigit(e.KeyChar)

        If e.KeyChar = Chr(Keys.Back) Then
            e.Handled = False
        End If
        If Char.IsDigit(e.KeyChar) Then
            If TextBox4.Text.IndexOf(".") <> -1 Then
                If TextBox4.Text.Length >= TextBox4.Text.IndexOf(".") + 3 Then  'replace 2 for greater numbers after decimal point
                    e.Handled = True
                    TextBox4.Focus()
                End If
            End If
        End If
    End Sub 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-11-14T06:06:38.423

```
Dim e As System.Windows.Forms.KeyPressEventArgs

    If Asc(e.KeyChar) < 48 Or Asc(e.KeyChar) > 57 Then
        e.Handled = True
    Else
        e.Handled = False
    End If 
```

# .net - 当客户端是同一服务器中的服务时，对服务的请求会排队

> ID：11246207
> 
> 赞同：1
> 
> 时间：2012-06-28T13:54:21.430
> 
> 标签：.net, multithreading, wcf, performance

我有这个奇怪的问题。我在服务器上有 3 个 WCF 服务。管理服务是外部请求的主要入口点。另一个服务是应用程序的逻辑。第三个服务是一个数据库连接服务，这两个服务都在做大部分工作（数据库做）。

当我对管理器的请求运行负载测试并运行性能测试时，我有 90 个不同的线程同时运行，第二个服务大约有 50 个，而数据库连接只有大约 12 个。

我觉得这是应用程序中的主要性能问题。当我对这两个服务进行分析时，我发现它们确实在等待来自数据库服务的响应。

我尝试直接对数据库服务进行测试。在打开通道之后和发送请求之前，我运行了 80 个线程并使用 ManualEventHandler 停止了它们。然后当一切准备就绪时，我设置了处理程序，它在 DB 连接服务中运行了大约 25 个线程。

因此它能够处理超过 12 个线程。

有什么想法吗？

为什么请求会排队？

一些附加信息：

绑定是基本的httpbinding，但我尝试了net pipe ipc，结果相同。我已经将上下文模式和并发设置为每个调用或每个会话多个具有相同的结果。

此外，这些服务是自托管的。这种架构的原因是为了允许多个其他服务或应用程序直接向这些服务发送请求。在这个特定的事件中，我按照描述对其进行测试，在其他事件中，流程可能会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:17:39.200

这意味着这些请求正在排队。如果您的所有服务都托管在 IIS 上，您可以使用 ASP.NET 性能计数器来查看每个服务级别上的挂起请求的数量（据我所知，WCF 不提供此类性能计数器）。正如@the coon 所暗示的，这肯定是错误的架构方法。与在不同层上由同一服务执行的业务逻辑和数据访问操作相比，每个服务调用都可以被认为是昂贵的。老实说，我看不出使用这种方法的理由。

# jquery - 伪元素用什么代替 css() ？

> ID：11246208
> 
> 赞同：1
> 
> 时间：2012-06-28T13:54:28.833
> 
> 标签：jquery

伙计们。我今天有一个小问题......代码如下：

```
var ttw = 10;
$('.insttip:after').css('left',(ttw/2-8)+'px'); 
```

当然，它不起作用。原因是**css() 函数**使用元素的 ' *style* ' 属性添加 css 属性。**$('.insttip:after')**是一个伪元素，所以它没有' *style* '属性。

我应该怎么做才能解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-25T03:07:06.920

您不能在 JavaScript 中使用伪元素。但是，如果您正在寻找一种解决方法，这里有一个。但是请注意，这是在您尝试选择文本节点时：

```
var ttw = 10;
$($(".insttip")[0].nextSibling).appendTo($("<span/>")).css("left",(ttw/2-8) + "px"); 
```

但是，这会将文本包装在`<span>`标签中。

# android - Google 帐户登录错误（双重身份验证）

> ID：11246210
> 
> 赞同：7
> 
> 时间：2012-06-28T13:54:32.157
> 
> 标签：android, authentication, two-factor-authentication

我在 Galaxy 10.1 选项卡上使用 Google 双重身份验证，并收到我的 Google 帐户“登录错误”的通知。

gmail 和其他 Google 应用程序似乎工作正常，但我在另一台计算机上转到我的帐户的安全设置（“两步验证”）并撤销了平板电脑的应用程序专用密码。然后我创建了一个新的。

新密码适用于平板电脑上的 gmail、gtalk 和其他 Google 应用程序，但我仍然收到登录错误的通知。

我认为这可能是平板电脑上的应用程序之一，我允许访问我的 Google 帐户，但找不到罪魁祸首。（http://stackoverflow.com/questions/2882253/how-do-i-get-the-logfile-from-an-android-device 查看日志文件，与“连接的站点、应用程序和服务”进行比较）

有人可以指出我可以在平板电脑上找到哪个应用程序有问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-21T07:33:07.403

单击下面的此链接，然后登录您的 gmail 帐户。[https://accounts.google.com/b/0/IssuedAuthSubTokens?hl=en&hide_authsub=1](https://accounts.google.com/b/0/IssuedAuthSubTokens?hl=en&hide_authsub=1)

为你的android配置“应用程序专用密码”，写一个像“我的安卓”这样的名字，然后按下“生成器密码”按钮。你会看到一个随机密码。

使用随机密码登录您的 android gmail。然后一切正常。

参考： [http ://www.techworld.com.au/article/407756/how_fix_two-factor_authentication_log-in_error_gmail_android/](http://www.techworld.com.au/article/407756/how_fix_two-factor_authentication_log-in_error_gmail_android/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T06:02:52.777

我无法回答您有关查找应用程序的问题，但就其价值而言，问题似乎是由 Google 最近的更新引起的，所以我最好的选择是等待他们修复它。我也在我的手机上得到它，还有许多其他人报告了同样的问题： http: [//forum.xda-developers.com/showthread.php?p=28013031](http://forum.xda-developers.com/showthread.php?p=28013031)

# c# - 动态选择列表 C#

> ID：11246211
> 
> 赞同：0
> 
> 时间：2012-06-28T13:54:32.267
> 
> 标签：c#, selectlist

我在 windowsform 应用程序中有三个列表框。我想在各自的三个列表框中显示国家、州、城市。但应根据所选国家和城市类似地显示州。

现在代码对于两个三个国家来说似乎不是问题，但是如果我考虑一个实际情况，记住世界上所有国家及其相应的州和城市会怎样。

实现这一点的最佳方法是什么？

**更新**---我实际上想问什么数据结构最适合这个？
一个 3d 锯齿状阵列可以正常工作 .nO 吗？还是有更好的方法来做到这一点？我不知道该怎么做。任何人都可以编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:41:58.957

Generally a top down hierarchy is applied.

1.  Bind the countries list (nothing else)
2.  On country selection, bind/rebind the states list filtered for the country & clear the city list.
3.  Finally on a state selection, bind/rebind the city dropdown.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:21:46.260

将所有国家加载到第一个列表中。当用户选择一个国家时，清除州/普罗维登斯和城市列表框。加载所选州/普罗维登斯的城市。when a state/providence is selected load the cities.

附加选项：

1.  让用户输入他们的邮政编码（假设有国际代码）并根据代码查找城市。
2.  允许用户将其输入到自由格式的文本框中，而不是预定义的列表中。
3.  要求用户在使用匹配选项填充列表之前输入前 N 个字符。

# java - 硬编码与文件输入的效率

> ID：11246219
> 
> 赞同：2
> 
> 时间：2012-06-28T13:54:56.033
> 
> 标签：java, file-io, machine-learning

我正在使用 Java 开发一个机器学习项目，该项目将涉及一个非常大的模型（支持向量机的输出，对于那些熟悉它的人来说），需要相当频繁地检索该模型以供最终用户使用。模型的主体由相当小的对象组成的大型二维数组。

不幸的是，我不知道模型到底有多大（到目前为止我一直在使用基准数据，而我实际要使用的数据还没有准备好），我也不知道它将运行的机器的规格，因为这也是悬而未决的。

我已经有一种将模型作为字符串写入文件的方法，但是写入过程需要大量时间，而读取过程需要一分钟的大部分时间。我想减少那段时间，所以我有一个聪明或疯狂的想法，将模型写入 .java 文件，这样它可以被编译然后运行以生成一个完整的模型。

我的问题是，假设模型大小约为 1 MB，在 Java 中存储和编译模型会比从文件中读取模型快得多吗？有什么原因我还没有看到，这可能是一个非常愚蠢的想法，我在任何情况下都不应该追求？

谢谢你能给我的任何想法。

编辑：显然试图自动将几千个值写入代码中，使得方法比编译器可以处理的大约大两个数量级。嗯，生活和学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:57:19.683

您可以考虑为数据创建紧凑的二进制格式，而不是写入字符串或 java 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:10:24.657

恕我直言，问题是文件的读取是否由于 IO 或计算时间（=> CPU）而需要很长时间。如果是后者，那么运气不好。如果您的 IO（例如硬盘）是原因，那么您可以压缩文件并在读取后/读取时提取它。Java 中（当然）有 ZIP 支持（即使是 Streams）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:16:30.307

> 在 Java 中存储和编译模型会比从文件中读取模型快得多吗？

这取决于您塑造自定义数据结构以包含模型的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T14:10:16.997

我同意上面给出的使用二进制输入格式的答案。让我们先尝试优化它。你能提供一些信息吗？...或者你用谷歌搜索过二进制数据吗？...缓冲它？ETC。？

编写一个 .java 文件并编译它会很有趣......但它一定会在某些时候给您带来问题。但是，我想您会发现它会比优化的二进制格式稍慢，但比基于文本的输入要快。

此外，要非常小心进行早期优化。通常，“高度可配置”和“快速致盲”是相互排斥的。相反，首先让一切正常工作，然后使用分析器优化应用程序中真正缓慢的部分。

# jquery - mvc3 actionresult 代码重复自身

> ID：11246220
> 
> 赞同：1
> 
> 时间：2012-06-28T13:54:58.203
> 
> 标签：jquery, asp.net-mvc-3, entity-framework

这是一个奇怪的问题。我在视图上从 jQuery 调用控制器中的 ActionResult。

这是 jQuery

```
$(document).ready(function () {
    $('.addNoteLink').button();

    $('.addNoteLink').click(function () {
        var cid = $('#CaseID').val();
        var notetext = $('#NoteText').val();
        var url = "/Cases/AddNoteText";
        $.ajax({
        type: "POST",
        url: url,
        data: { id: cid, note: $('#NoteText').val() }
            });
    });
}); 
```

这是控制器方法：

```
public ActionResult AddNoteText(int id, string note)
        {
        try
            {
            if (ModelState.IsValid)
                {
                CaseNotes notes = new CaseNotes
                {
                    CasesID = id,
                    NoteDate = DateTime.Now,
                    NoteText = note
                };
                db.CaseNotes.Add(notes);
                db.SaveChanges();
                }

            }
        catch 
            {

            }
        return RedirectToAction("Edit", id);
        } 
```

这是与jQuery相关的html：

```
<div class="editor-label">
                    @Html.Label("Enter notes here and click Add Note Text")
                </div>
                <div class="textarea-field">
                    <input id = "NoteText" type="text" />
                </div>        
                @Html.ActionLink("Add Note Text", "AddNoteText", new { id = Model.CasesID }, new { @class = "addNoteLink" }) 
```

当 jQuery 调用此方法时，如果我跟随断点，则参数正确传递，ModelState 有效，它进入注释实体并分配值等。当断点命中 db.CasesNotes.Add(notes) 断点返回到函数的顶部并再次下降，直到它击中注释实体然后跳转到 db.SaveChanges() 然后再次返回顶部，通过该方法并出错，因为此时参数已被清除。原始记录被插入。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:19:50.487

如果您使用 jQuery click 订阅锚点，当您点击链接时，浏览器仍将执行默认操作（例如，点击链接）。这就是为什么你的行动跟注了两次。

您需要调用事件对象上的[preventDefault()](http://api.jquery.com/event.preventDefault/)来取消浏览器默认行为：

```
$('.addNoteLink').click(function (event) {
    event.preventDefault();

    var cid = $('#CaseID').val();
    var notetext = $('#NoteText').val();
    var url = "/Cases/AddNoteText";
    $.ajax({
    type: "POST",
    url: url,
    data: { id: cid, note: $('#NoteText').val() }
        });
}); 
```

# eclipse - Eclipse javadoc：已经定义了 package-info 类型

> ID：11246223
> 
> 赞同：22
> 
> 时间：2012-06-28T13:55:07.937
> 
> 标签：eclipse, javadoc, m2eclipse

操作系统：Windows 7 x64

Eclipse 平台：3.7.2.M20120208

平方米：1.0.200.20111228-1245

有与此[错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=252555)类似的问题。和文件夹中有一堆`package-info.java`文件，所以它们有相同的包。Eclipse 显示错误：`/src``/test`

```
"The type **package-info** is already defined" 
```

我可以删除`package-info.java`文件`/test`或`/src`避免问题指示。但是这种解决方法不是很舒服，因为我使用的是 SCM 并且需要在更新后一直删除这些文件。**Eclipse 平台 4.2.0.I20120608-1400**相同

 *** * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-11-05T14:27:00.900

你可以这样做 -->

转到构建路径->配置构建路径->

在源选项卡中 -->

选择包（其中有这些有问题的 package-info.java 文件），例如。项目名称/src/test/java

单击排除 - >并在排除模式中添加“**/package-info.java”

这应该可以解决问题，因为显然您是在要求 eclipse 排除这些文件，因此您不必删除这些文件并解决与 SCM 相关的问题

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-08T02:14:26.423

有几个选项可以解决这个问题：

1.  远离 package-info.java 文件，并用 package.html 文件替换它们。
2.  在 src/ 树中只有 package-info.java 文件，因为 test/ 树中的同名包将“重叠” src/ 树。
3.  为 src/ 和 test/ 树分别生成 javadoc，因为它们可能针对不同的受众。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-30T12:05:33.183

如果你使用 maven 和 m2e 进行 eclipse 和 maven 之间的交互。有一个非常干净的解决方案：向 pom.xml 添加一个配置文件，该配置文件仅由 m2e 激活，并防止在测​​试编译阶段编译 package-info.java。这是一个示例：

```
 <profile>
       <id>m2e</id><!--This profile is activated when eclipse interacts with maven (using m2e).-->
           <activation>
                <property>
                    <name>m2e.version</name>
                </property>
            </activation>
           <build>
                <plugins>
                    <plugin>
                        <!--eclipse do not support duplicated package-info.java, in both src and test.-->
                        <artifactId>maven-compiler-plugin</artifactId>
                        <executions>
                            <execution>
                              <id>default-testCompile</id>
                              <phase>test-compile</phase>
                              <configuration>
                                <testExcludes>
                                  <exclude>**/package-info.java</exclude>
                                </testExcludes>
                              </configuration> 
                              <goals>
                                <goal>testCompile</goal>
                              </goals>
                            </execution>                  
                        </executions>
                    </plugin>
                </plugins>
        </build>
</profile> 
```**

# jsf - f:setPropertyActionListener 无法设置属性

> ID：11246225
> 
> 赞同：1
> 
> 时间：2012-06-28T13:55:15.633
> 
> 标签：jsf, primefaces

我正在尝试通过设置我的 backingbeans 属性的值

```
 <f:setPropertyActionListener value="#{customer}"
                            target="#{customersViewBean.selectedCustomer}" /> 
```

但它没有设置值。令人惊讶的是，我已经在类中初始化了这个属性，但是当我推送命令链接时，它被设置为 null 并给出空指针异常。你知道出了什么问题吗？

```
 <p:dataList id="datalist5"
                value="#{customersViewBean.filteredPositionCustomer}"
                rendered="#{customersViewBean.positionaGoreListe}"
                var="customer">
                <p:column style="padding-bottom:1px!important;">
                    <p:commandLink id="commandLink"

                        action="#{customersViewBean.getCustomerDetail}">
                        <f:setPropertyActionListener value="#{customer}"
                            target="#{customersViewBean.selectedCustomer}" />
                        <f:setPropertyActionListener value="false"
                            target="#{customersViewBean.comingFromOpportunityDetailToAddressList}" />

                        <h3>#{customer.name}</h3>

                    </p:commandLink>

                </p:column>
            </p:dataList> 
```

# iphone - drawRect的性能

> ID：11246228
> 
> 赞同：1
> 
> 时间：2012-06-28T13:55:25.423
> 
> 标签：iphone, ios, drawrect

嘿伙计们只是一个关于性能的快速问题，`drawRect:`因为我注意到很多人抱怨性能问题的话题。

在我的应用程序中，我需要在一些底层视图上方绘制约 150 个正方形。显然，这么多电话不会产生明显的用户差异，但我只是想知道未来的利弊。目前我正在讨论两种方式：

1）在顶部添加一个透明的UIView子类，自定义`drawRect:`方便绘图

2）只需添加普通方形子视图

正如我所说，使用 CADisplayLink 对用户没有任何区别，我只是好奇什么会更有效？(2) 是一种荒谬的做法，添加具有无用功能的实例只是为了外观，但所有这些帖子只是吓到我使用`drawRect`. 真的`drawRect`那么低效吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:03:54.640

也许不直观，`drawRect:`并不是每一帧都调用它。事实上，如果你在视图中没有做任何特别的事情并且你的视图本身没有改变，它就会被调用一次。

您可以通过调用来强制调用它`[myView setNeedsDisplay]`，但通常没有理由这样做。

如果您有一个具有重叠子视图的视图，那么对于每个视图，包括父视图，`drawRect:`仍然只调用一次。然后，GPU 进行合成（混合）。

`drawRect:`如果 UIKit 已经提供了您想要做的事情，那么自定义几乎总是比按预期方式使用 UIKit 更慢（更难）。

也不要落入软件开发中最大的陷阱之一，*过早优化*。编写最幼稚的版本，对其进行基准测试，如果它足够快，它就足够好，您可以将精力集中在其他地方。只有在您知道*某些*东西实际上很慢，以及它*在哪里*以及*为什么*慢时才开始优化。

# objective-c - “alloc”方法是否产生实例？

> ID：11246231
> 
> 赞同：0
> 
> 时间：2012-06-28T13:55:43.513
> 
> 标签：objective-c

当我写：

```
MyClass *obj = [[MyClass alloc]init]; 
```

我可以分成两部分：

*   `[MyClass alloc]`--->> 生产一些东西

*   `[theProduct init];`

所以 alloc 是一个 Class 方法并且正在初始化一个实例方法我想它必须在一个实例上调用......在这种情况下是`[MyClass alloc]`. 我真的很困惑。

我的猜想正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T13:57:38.130

`+alloc`为类的实例分配内存并将其归零。这个实例是*未初始化*`-init`的——在你初始化它或与之相关之前，它还没有准备好用作一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:57:54.830

# visual-studio-2010 - 用于 Visual Studio 的 Intellisense 对定义为“var”且是集合的变量

> ID：11246236
> 
> 赞同：0
> 
> 时间：2012-06-28T13:56:03.187
> 
> 标签：visual-studio-2010, intellisense

我刚刚在一台新计算机上安装了 Visual Studio 2010，但遇到了智能感知问题。似乎我所有的“var”变量都不适用于智能感知，但如果我真正定义它们是什么（字符串、int、ObjectName 或其他），一切正常。

当我将鼠标悬停在定义的变量上时，工具提示说：

```
var user = DataAccess.User.Get(UserID);

mouseover tooltip =>  (local variable) var user 
```

同样，如果我明确定义它是什么，那很好。

```
DataAccess.User user = DataAccess.User.Get(UserID);

mouseover tooltip =>  (local variable) DataAccess.User user 
```

我真的不知道该怎么办。

**注意**DataAccess 是它自己的项目，因此这可能是一个跨项目问题。

**注意**它似乎也只是集合（IQueryables 等）的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:04:48.053

这只发生在变量上吗？并且仅在您的项目中？..不确定，但如果您想尝试安装“resharper”，它是一个可以帮助您检测代码错误并管理个性化智能感知的程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:26:27.383

呃......我在不知不觉中引入了一个破坏智能感知的构建错误，但它是在网络项目中，所以我通常不会明确地构建它。好吧，也许其他人会犯同样的错误并找到这个答案。

# codeigniter - 如何从远程 sftp 文件服务器读取图像

> ID：11246239
> 
> 赞同：2
> 
> 时间：2012-06-28T13:56:20.230
> 
> 标签：codeigniter, file-upload, sftp

所以我在一个网站上使用 CodeIgniter PHP 框架。我们有几台服务器，一台实时服务器、一台开发服务器和一台文件服务器。我们已经成功地将文件上传到我们的开发服务器，然后将它们安全地复制到我们的文件服务器进行存储。我们现在的问题是一种从文件服务器读取/显示我们开发网站上的图像的方法。我们的文件服务器使用 sftp 来保证它的安全性。我们一直在寻找不同的方法来从文件服务器传回图像对象，而不是实际的文件。关于如何做到这一点的任何建议？谢谢。

CodeIgniter PHP Framework Linux Servers 文件服务器上的 SFTP

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:03:42.217

好吧，我没有过多地处理 sftp，但至少我会尝试给你一些开始的步骤。

1.  您需要安装一些 apache/php 模块，如[ssh2](http://php.net/manual/en/ssh2.installation.php)并使用`extension=php_ssh2.dll`.

2.  您可以制作自己的 sftp 库，如下所示：

    类 FTP{

    ```
    protected $connection;

    public function __construct($params)
        {

        }

        public function connect()
        {
        $server = "you-server.com";
        $port = "1234";
        $username = "admin";
        $password = "blabla";

        //connect
        $ssh2 = ssh2_connect($server, $port);

        if(ssh2_auth_password($ssh2, $username, $password))
        {
            //sftp session
            $this->connection = ssh2_sftp($resConnection);
        }
        else
        {
            echo "Unable to connect to server";
        }
        }

    public function download($image_name)
    {
        $image = fopen("ssh2.sftp://{$this->connection}/path/to/{$image_name}", 'r');
        fclose($image);
    }

    } 
    ```

然后尝试像这样使用它：
$this->sftp->connect(); $image = $this->sftp->download('image-name');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:49:20.303

我在 Github 上找到了这个 Codeigniter 库。我还没有使用它，但似乎您需要执行几个步骤才能使用 Codeigniter 加载库。否则这看起来很有希望。

[https://github.com/ipolar/CodeIgniter-sFTP-Library](https://github.com/ipolar/CodeIgniter-sFTP-Library)

# html - 难以保持特定于一个类/ id 的超链接样式

> ID：11246247
> 
> 赞同：0
> 
> 时间：2012-06-28T13:56:41.010
> 
> 标签：html, css

我想对以下两件事应用不同的超链接样式：

*   我的div id中`<p>`标签内的任何链接。`#currentpage_content`
*   任何带有类`<h3>`标签的链接`.profile`。

这听起来很简单，但我看不到它是正确的..

我试过这样的事情：

```
#currentpage_content a:hover{...} 
```

和

```
#currentpage_content p a:hover{...} 
```

但出于某种原因，即使它们在#currentpage_content 的 div 之外，也适用于我的导航栏链接！

我最终也发现你可以做这样的事情（我认为）..

```
#currentpage_content a.p:hover{...} 
```

但是现在链接样式根本没有被应用。

有人可以看看上面的要点并告诉我实现这两个要点所需的确切语法/单词顺序吗？

为了使响应更容易，这是我尝试应用的样式：

```
a:link, a:visited, a:hover, a:active
{
font: inherit;
color: Grey;
text-decoration: none;
border-bottom: 2px solid #d4ffaa;
}
a:hover, a:active
{background-color: #d4ffaa;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:00:41.540

```
#currentpage_content p a:hover, #currentpage_content h3 a:hover {
  //put your CSS in here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:03:37.883

[这](http://jsfiddle.net/oswaldoacauan/j2dkm/5)是解决您麻烦的方法。

# c - 编译执行Redis ziplist.c

> ID：11246248
> 
> 赞同：1
> 
> 时间：2012-06-28T13:56:41.820
> 
> 标签：c, redis

如何编译和执行[Redis ziplist.c](https://github.com/antirez/redis/blob/2.6/src/ziplist.c)作为单独的可执行文件？

我只想执行 ziplist.c 主要功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:58:07.073

您可以使用以下命令：

```
gcc -std=c99 -O2 -DZIPLIST_TEST_MAIN ziplist.c zmalloc.c util.c sds.c adlist.c 
```

注意：它将使用默认的系统分配器。

# c# - C#进程无法访问该文件，因为它正被另一个进程使用（文件对话框）

> ID：11246250
> 
> 赞同：1
> 
> 时间：2012-06-28T13:56:44.420
> 
> 标签：c#, windows, winforms, visual-studio-2008

我有一个使用日志信息更新的富文本框。有一个按钮可以将日志输出保存到文件中。当我使用下面的代码尝试将输出保存到文件时，我收到“该进程无法访问该文件，因为它正被另一个进程使用”异常。我不确定为什么会收到此异常。它发生在我在对话框中创建的新文件上。它发生在我尝试将信息保存到的任何文件上。

```
private void saveLog_Click(object sender, EventArgs e)
{
            OnFileDialogOpen(this, new EventArgs());
            // Displays a SaveFileDialog so the user can save the Image
            // assigned to Button2.
            SaveFileDialog saveFileDialog1 = new SaveFileDialog();
            saveFileDialog1.Filter = "Text File|*.txt|Log File|*.log";
            saveFileDialog1.Title = "Save Log File";
            saveFileDialog1.ShowDialog();

            // If the file name is not an empty string open it for saving.
            if (saveFileDialog1.FileName != "")
            {
                // Saves the Image via a FileStream created by the OpenFile method.
                System.IO.FileStream fs =
                   (System.IO.FileStream)saveFileDialog1.OpenFile();
                // Saves the Image in the appropriate ImageFormat based upon the
                // File type selected in the dialog box.
                // NOTE that the FilterIndex property is one-based.
                switch (saveFileDialog1.FilterIndex)
                {
                    case 1:

                        try
                        {
                            this.logWindow.SaveFile(saveFileDialog1.FileName, RichTextBoxStreamType.PlainText);
                        }
                        catch (Exception ex)
                        {
                            MessageBox.Show(ex.ToString());
                        }

                        break;
                    case 2:

                        try
                        {
                            this.logWindow.SaveFile(saveFileDialog1.FileName, RichTextBoxStreamType.PlainText);
                        }
                        catch (Exception ex)
                        {
                            MessageBox.Show(ex.ToString());
                        }

                        break;
                }

                fs.Close();
                OnFileDialogClose(this, new EventArgs());
            }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:02:44.400

似乎同一个文件被打开了两次。首先，您使用以下方法创建它：

```
System.IO.FileStream fs =
                   (System.IO.FileStream)saveFileDialog1.OpenFile(); 
```

然后将相同的文件名传递给`this.logWindow.SaveFile`，这可能会打开具有给定名称的文件并将数据保存到其中。

我想第一个电话是不必要的。

# c# - 调用函数时出错

> ID：11246255
> 
> 赞同：0
> 
> 时间：2012-06-28T13:56:59.683
> 
> 标签：c#, asp.net, visual-studio-2010

我正在尝试调用一个函数，但我得到的错误是**“xxxx 的最佳重载方法匹配有一些无效参数”**。当我将鼠标悬停在它上面时，我可以选择“生成方法存根...”

导致错误的代码是：

> ```
> if (oCustomerDAL.VerifyCustomerLoginID(ref oSubscriber))    { } 
> ```

相关函数为：

```
public bool VerifyCustomerLoginID(ref IAuthenticate oSystemUser) 
```

如何解决错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:58:09.010

```
if (oCustomerDAL.VerifyCustomerLoginID(ref oSubscriber))    { } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:58:34.917

as the method uses the `ref` keyword, you need to also provide it when calling the method:

```
if (oCustomerDAL.VerifyCustomerLoginID(ref oSubscriber))    { } 
```

(OP omited the `ref` before edit)

* * *

**Edit**. You should also check what type `oSubscriber` is. Ensure that it implements interface `IAuthenticate` as this is the interface that the method you're trying to call requires.

To do this find the definition of the class for which `oSubscriber` is an instance and ensure that it looks something like this (C#)

```
public class Subscriber : IAuthenticate
{
   ...
} 
```

# cocoa - NSCoding 和 NSKeyedArchiving - “无法加载文档”

> ID：11246258
> 
> 赞同：1
> 
> 时间：2012-06-28T13:57:13.170
> 
> 标签：cocoa, nskeyedarchiver, nsdocument, nscoding

我已经`NSCoding`为我的类实现了协议，并且在我的`NSDocument`子类中使用以下代码来保存和加载：

```
- (NSData *)dataOfType:(NSString *)typeName error:(NSError **)outError {
[[record window] endEditingFor:nil];
return [NSKeyedArchiver archivedDataWithRootObject:self]; 
```

}

```
- (BOOL)readFromData:(NSData *)data ofType:(NSString *)typeName error:(NSError **)outError{
@try {
    NSLog(@"Loading...");
    self = [NSKeyedUnarchiver unarchiveObjectWithData:data];
}
@catch (NSException *exception) {
    if (outError) {
        NSDictionary *d = [NSDictionary dictionaryWithObject:@"The data is corrupted" forKey:NSLocalizedFailureReasonErrorKey];
        *outError = [NSError errorWithDomain:NSOSStatusErrorDomain code:unimpErr userInfo:d];
    }
}
NSLog(@"whiteMoves count: %ld",[whiteMoves count]); 
```

}

一切似乎都运行良好。我可以保存一个文件，当我打开它并单步执行代码时，它似乎都可以解压和解码。但是，在“加载事件”完成后，我的应用程序总是会弹出一个错误窗口，上面写着“无法加载文档“xxx.xxx”。” 我找不到触发此错误的位置，也找不到任何文档。

有谁知道它来自哪里或知道它可能记录在哪里？

谢谢

李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:12:07.420

您似乎没有返回`YES`或`NO`来自`readFromData`：

```
- (BOOL)readFromData:(NSData *)data
              ofType:(NSString *)typeName
               error:(NSError **)outError
{
    BOOL retval = YES;
    @try
    {
        NSLog(@"Loading...");
        self = [NSKeyedUnarchiver unarchiveObjectWithData:data];
        NSLog(@"whiteMoves count: %ld",[whiteMoves count]);
    }
    @catch (NSException *exception)
    {
        if (outError != nil)
        {
            NSDictionary *d = [NSDictionary dictionaryWithObject:@"The data is corrupted" forKey:NSLocalizedFailureReasonErrorKey];
            *outError = [NSError errorWithDomain:NSOSStatusErrorDomain code:unimpErr userInfo:d];
        }
        retval = NO;
    }

    return retval;
} 
```

这看起来与国际象棋有关；我可以问你在写什么吗？

# c# - 使用 WCF 数据服务中的上下文类为本地数据库创建上下文

> ID：11246282
> 
> 赞同：1
> 
> 时间：2012-06-28T13:57:54.637
> 
> 标签：c#, .net, wcf, entity-framework, windows-phone-7

我创建了一个 helloworld 应用程序。在服务器端，有一个由实体框架和 WCF 数据服务生成的模型类。在我的 WP7 应用程序中，我添加了对该服务的引用。它允许我做这样的事情：

```
DataServiceCollection<Blogs> blogs;
BlogContext svc; // this class was generated with the model class by EF
Uri uri = new Uri("http://localhost:9430/BlogService.svc/");
svc = new BlogContext(uri);
blogs = new DataServiceCollection<Blogs>(svc); 
```

这只是抓取博客。现在我想使用我上面使用的相同类（博客、博客上下文）将这些博客放入本地数据库。如果模型发生变化，它可以帮助我修复 2 个不同的类。我怎样才能做到这一点？请准确地说，我是WP7的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:29:43.563

首先，我建议不要尝试保留从 WCF 服务接收到的相同类，而是将它们映射到手机上的模型。

如果您计划使用[SQLCE](http://windowsphonegeek.com/tips/Windows-Phone-Mango-Local-Database%28SQL-CE%29-Introduction)，则需要创建模型并标记它们以告诉 EF 它们如何映射到您的数据库。尝试使用部分类对 WCF 创建的东西执行此操作是可能的，但听起来会很痛苦。

[SQL Compact Toolbox](http://sqlcetoolbox.codeplex.com/)非常出色，一旦您的数据库模型完成，它就可以为您完成所有工作。在手机上使用 SQL CE 时，我通常结合使用 Server Explorer 和 SQL Compact Toolbox。

更新：使用可移植类库，您可以在项目之间共享 WCF DTO 库，但我仍然不会尝试使用 EF 属性标记它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:45:26.363

*   在服务器上有一个模型
*   在客户端有另一个模型
*   尝试将一个模型的对象映射到另一个模式的对象，例如使用[AutoMapper](http://automapper.codeplex.com/)

IE：

```
void Save(ServerBlog sb)
{
    using (var db = new LocalContext())
    {
        var clientBlog = new ClientBlog
        {
            Text = db.Text
            // or the same using AutoMapper
        };
        db.Blogs.Add(clientBlog):
    }
} 
```

# performance - 在 LINQ 中优化 IEnumerable 到 HashSet 的转换

> ID：11246285
> 
> 赞同：10
> 
> 时间：2012-06-28T13:58:02.677
> 
> 标签：performance, linq, ienumerable, hashset

```
public HashSet<Student> GetStudents(int studentId)
{
    IEnumerable<Student> studentTypes = this.studentTypes .Where(x => (x.studentID== studentId));
    if (studentTypes .FirstOrDefault() != null)
    {

        //return new HashSet<Student>(studentTypes);
        return studentTypes.ToHashSet();
    }
    else
    {
        return new HashSet<Student>();
    }
}

public static class LinqUtilities
{
    public static HashSet<T> ToHashSet<T>(this IEnumerable<T> enumerable)
    {
        HashSet<T> hashSet = new HashSet<T>();

        foreach (var en in enumerable)
        {
            hashSet.Add(en);
        }

        return hashSet;
    }
} 
```

这个函数被调用了很多次，比如 1000 次，结果集中有 5000 名学生。如何优化此功能...我知道从`IEnumerable`to的转换`HashSet`会导致大量开销。 `ToHashSet`是我的扩展方法。这个功能是为了减慢和吃很多时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T14:11:18.293

首先，您不需要在实用程序函数中枚举 hashset 值，您可以通过使用 @Jon 编写的漂亮静态扩展类来提高效率

[将 linq 结果转换为哈希集](https://stackoverflow.com/questions/3471899/how-to-convert-linq-results-to-hashset-or-hashedset)

而且我认为您不需要检查 FirstOrDefault 因为扩展将处理给定 T 的新学生对象，因此您可以更改为更干净整洁的方式。

```
IEnumerable<Student> studentTypes = this.studentTypes.Where(x => (x.studentID== studentId));
return studentTypes.toHashSet(); 
```

另一个选项是您可以将 IEnumerable 传递给 HashSet 的构造函数，例如

```
HashSet<Student> studentTypes = new HashSet<Student>(this.studentTypes.Where(x => (x.studentID== studentId))); 
```

所以你的 GetStudents 函数中只有一行代码

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T15:12:23.737

不要每次调用两次运行查询。

```
 //sets up a deferred query.  This query will be "executed" when enumerated.
IEnumerable<Student> studentTypes = this.studentTypes
  .Where(x => (x.studentID== studentId));

 //enumeration #1 (stops on first hit)
if (studentTypes .FirstOrDefault() != null)
{
   //enumeration #2
   return studentTypes.ToHashSet(); 
```

你的条件是不必要的：

```
 //sets up a deferred query.  This query will be "executed" when enumerated.
IEnumerable<Student> studentTypes = this.studentTypes
  .Where(x => (x.studentID== studentId));

 //enumeration #1
 return studentTypes.ToHashSet(); 
```

* * *

> 我知道从 Ienumerable 到 Hasset 的转换会导致很多开销

那是牛。你没有测量任何东西，并且误导自己优化代码的错误部分。

# android - Android WebView inside ViewPager displays only after click

> ID：11246286
> 
> 赞同：0
> 
> 时间：2012-06-28T13:58:05.813
> 
> 标签：android, webview, android-viewpager

I've stumbled upon another tricky error...

I'm using basic ViewPager, which consists of several pages, which are basically consisted of HTML, displayed by a WebView.

I use the method:

```
mWebView.loadDataWithBaseURL(null, html, "text/html", "utf-8", "about:blank") 
```

for showing the contents. HTML is a String variable. Everything work fine, but I would expect all the views to be preloaded (I've set offscreenpage limit of the viewpager and even instantiate item is called right with the right data), but it isn't.

The webview is loaded, but displayed only after the click. It doesn't occur to me first, because I clicked everytime I wanted to show another page, but if you move to quickly, clicks get a bit delayed and no page is displayed. Only after I click again. Or, if I drag one page and move slightly right, I can see that the another view is not loaded yet... it displays only after one second.

Has anybody encountered something similar?

Any help is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:40:46.373

我也有同样的问题，也在寻求帮助。似乎整个 ViewPager 直到点击后才显示出来，但是 requestFocus() 和 requestChildFocus() 都没有工作。有一点不同，这个问题只发生在我初始化 ViewPager 时。当我移动到另一个页面时，webview 内容显示良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:32:49.233

我已经找到了解决方案：只需简单地使用`ViewPager.setCurrentItem(position)`来显示您想要的默认页面（在我的情况下通常是第一页）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T03:12:12.300

您需要`setPageTransformer`在寻呼机中删除。我有同样的问题，我修复了它。

# php - How to convert only letters to uppercase from string php?

> ID：11246287
> 
> 赞同：0
> 
> 时间：2012-06-28T13:58:05.610
> 
> 标签：php

I want to convert from :

`a12b89` to `A12B89`.

I tried with strtoupper but it's not working. Is that function only if I have letters without numbers? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:11:06.950

```
$a = "a12b89";
echo strtoupper($a); 
```

# visual-studio - 如何在 Visual Studio 中编辑存储的连接？

> ID：11246289
> 
> 赞同：0
> 
> 时间：2012-06-28T13:58:14.903
> 
> 标签：visual-studio

当我为 LINQ to SQL 数据上下文设置连接字符串时，我会在下拉列表中看到已建立/已设置连接的列表。如何更改这些连接的名称？是否有用于管理已建立连接的菜单？我如何到达那里？我敢肯定这很容易，我只是不知道在哪里点击或在谷歌上搜索什么。

![在此处输入图像描述](../Images/16016bf5b7593ea6d8359339a5027faf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:00:10.740

查看 Properties 文件夹和文件 Settings.settings

# html - 如何在html和css中垂直对齐div？

> ID：11246291
> 
> 赞同：2
> 
> 时间：2012-06-28T13:58:16.103
> 
> 标签：html, css

我有以下 html div：

```
...
<body>
<div id="barChart_div" style="width: 600px; height: 250px;float:left; "></div>
<div id="stats_div" style="width: 350px; height: 250px; float:left;"></div>
<div id="lineChart_div" style="width: 600px; height: 250px; "></div>
<div id="cdfChart_div" style="width: 600px; height: 250px;"></div>
</body>
... 
```

我要做的是显示第一个 div（包含条形图）和第二个 div（包含图表中的一些文本），然后在它们下面显示另外两个 div（包含其他图表）一个之后另一个垂直，即我希望它看起来像：

![想要的](../Images/5f19762c025f115689f6f01849fad73c.png)

我目前得到的是：

![实际的](../Images/2380d058ecf26efd6dd7e9bb538b0890.png)

cdfChart_div (div4) 显示在 lineChart_div(div3) 的顶部。我需要使用什么 CSS 样式来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T14:04:55.527

在*浮动*`div`之后立即出现： *`stats_div`*

 *`style="clear:left;"`

*   [jsFiddle 演示](http://jsfiddle.net/CBu2f/1/)

完整代码：

```
...
<body>
<div id="barChart_div" style="width: 600px; height: 250px;float:left; "></div>
<div id="stats_div" style="width: 350px; height: 250px; float:left;"></div>
<div id="lineChart_div" style="clear:left; width: 600px; height: 250px; "></div>
<div id="cdfChart_div" style="width: 600px; height: 250px;"></div>
</body>
... 
```

由于`stats_div`是浮动的，它的内容被从正常流中取出。因此，作为`div`正常流程一部分的下一个内容不会为 的内容腾出空间`stats_div`。如果你希望它的内容在前一个 float 的内容之后，你必须`clear`在下一个的一侧。您经常会看到，它适用于正常流程的任一边缘。`div``div``clear: both``div`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:03:22.797

尝试

```
<body>
<div style="overflow:auto">
  <div id="barChart_div" style="width: 600px; height: 250px;float:left; "></div>
  <div id="stats_div" style="width: 350px; height: 250px; float:left;"></div>
</div>
<div id="lineChart_div" style="width: 600px; height: 250px; "></div>
<div id="cdfChart_div" style="width: 600px; height: 250px;"></div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T14:09:21.577

看看我的例子[here](http://jsfiddle.net/XeNA3/4/)

**HTML**

```
<body>
<div id="barChart_div" style="width: 145px; height: 250px;">aa</div>
<div id="stats_div" style="width: 350px; height: 250px;">bb</div>
<div id="lineChart_div" style="width: 600px; height: 250px;">cc</div>
<div id="cdfChart_div" style="width: 600px; height: 250px;">dd</div>
</body> 
```

**CSS**

```
#barChart_div, #stats_div { float:left; }
#lineChart_div { clear:left; } 
```

**解释**

首先请记住，拥有“内联”CSS 不是一个好习惯。您必须更喜欢外部 CSS 或内部（即标题）CSS。

但是，让我们看看这个例子：[jsFiddle](http://jsfiddle.net/yWcDh/)。
如您所见，如果您没有指定不同的内容，所有 div 都会生成“理想列”。那是因为“html 解析器”的正常流程会将它们放在那个位置。

相反，如果您使用 span 元素执行此操作，您将获得同一“行”上的所有元素（如果它们可以站立并且不会溢出，显然）。[你可以在这里](http://jsfiddle.net/PnuqV/)看到。

当您告诉`float:left`您“强制”将 div 浮动在前一个元素的“右边距”时。

现在，由于第二个元素浮动，第三个元素将以相同的方式运行。
为了充当“标准”，您必须使用`clear:left`它将恢复“正常”行为

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T14:01:31.607

如果可以的话，改变你的源顺序，让 stats_div 先出现，然后使用 float:right 就*可以*了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T14:11:17.660

```
<div id="stats_div" style="width: 350px; height: 250px; float:right; background-color:#0099CC; border:1px solid black">custom</div>
<div id="barChart_div" style="width: 600px; height: 250px;float:left; background-color:#0099CC; border:1px solid black">1</div>
<div id="lineChart_div" style="width: 600px; height: 250px; float:left;background-color:#0099CC; border:1px solid black">2</div>
<div id="cdfChart_div" style="width: 600px; height: 250px;float:left; background-color:#0099CC; border:1px solid black">3</div> 
```

将其粘贴到您的 html 中，效果将可见*

# objective-c - How to set the encoded string data to MFMessageComposeViewController

> ID：11246293
> 
> 赞同：-1
> 
> 时间：2012-06-28T13:58:17.817
> 
> 标签：objective-c, image, sms, mfmessagecomposeview

I have to set the following string data to body of (SMS) MFMessageComposeViewController, can any one help me to get the solution ?

```
NSData *imageData = UIImagePNGRepresentation(image1);
NSString* str = [[NSString alloc] initWithData:imageData encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:04:36.880

据我了解问题是如何填写短信正文。有一个很好的解决方案：[点击这里！](http://mobiledevelopertips.com/core-services/how-to-send-an-sms-progammatically.html)

当然还有[Apple 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)

# delphi - 将 ALT-S 发送到窗口

> ID：11246297
> 
> 赞同：3
> 
> 时间：2012-06-28T13:58:28.350
> 
> 标签：delphi, keyboard-events

我正在尝试将 ALT-S 发送到对话框提示，以使用 PostMessage 保存文件：

```
PostMessage(h, WM_KEYDOWN, VK_MENU, 0);
PostMessage(h, WM_KEYDOWN, ord('S'), 0);
PostMessage(h, WM_KEYUP, ord('S'), 0);
PostMessage(h, WM_KEYUP, VK_MENU, 0);
```

但它不起作用。它发送了两个键，但好像对话框无法识别 ALT 条件，并作为正常的 S 字符处理。

我做了很多阅读，包括[这个](http://www.delphitricks.com/source-code/windows/simulate_the_pressing_of_keyboard_keys.html)（这会产生错误），看来我需要在 lparam 中做一些事情来表明 ALT 被抑制了。一些消息来源说 0x20000000 但这也不起作用。

SendInput、keybd_event 等对我不起作用，因为对话框不会成为焦点。

我很困惑会很感激一些见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:58:56.960

试试这个：

```
PostMessage(h, WM_SYSKEYDOWN, VK_MENU, 0);
PostMessage(h, WM_KEYDOWN, ord('S'), 0);
PostMessage(h, WM_KEYUP, ord('S'), 0);
PostMessage(h, WM_SYSKEYUP, VK_MENU, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:05:07.477

到目前为止，在另一个表单上按下按钮的最简单方法是发送`WM_COMMAND`消息而不是伪造输入。伪造输入是一项棘手的工作，并且经常无法按照您的意愿行事。

发送`WM_COMMAND`到顶层窗口。将通知代码传递`BN_CLICKED`为`wParam`并将按钮 ID 传递为`lParam`。

您可以使用`FindWindow`或`EnumWindows`来获取顶级窗口的句柄。像 Spy++ 这样的程序可以让您找出目标按钮的 ID。

# javascript - require js paths not being recognised

> ID：11246298
> 
> 赞同：0
> 
> 时间：2012-06-28T13:58:31.407
> 
> 标签：javascript, requirejs, amd

**I am using RequireJS 2.0.2**

I have the following in a file used as the entry point.

```
require({

    "packages"  : ['bi/charts'],
    baseurl     : '/js/',
    paths       : {
        handlebars  : "lib/handlebars-1.0.0.beta.6",
        jquery      : "lib/jquery-1.7.2.min",
        underscore  : "lib/underscore-1.3.3.min",
        modernizr   : "lib/modernizr-custom.2.5.3.min",
        BI          : "bi/BIf"
    }
}); 
```

however it only recognises 'jquery' and none of the other paths, it comes back with the following error:

```
NetworkError: 404 Not Found - [link]http://localhost:62033/js/handlebars.js"
handlebars.js
Script error http://requirejs.org/docs/errors.html#scripterror
[Break On This Error]   

var e = new Error(msg + '\nhttp://requirejs.org/docs/errors.html#' + id); 
```

....thoughts?

Many thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:09:54.083

您可能需要在要求之前调用配置。还要注意在路径中添加斜线。利用：

```
"handlebars" : "/lib/handlebars" 
```

不是

```
"handlebars" : "lib/handlebars"

  require.config({
    baseUrl: "/js/",
    paths: {
        "handlebars": "/lib/handlebars"
    },
  });
  require( ["handlebars"],
    function(handlebars, myModule) {
    }
  ); 
```

另请参阅[配置路径](http://requirejs.org/docs/api.html#config-paths)

# ruby - 这种红宝石方法有类似物吗？

> ID：11246299
> 
> 赞同：1
> 
> 时间：2012-06-28T13:58:32.127
> 
> 标签：ruby, enumerable

最近我想出了这个方法：

```
module Enumerable
  def transform
    yield self
  end
end 
```

方法的目的类似于`tap`方法，但具有修改对象的能力。

例如，使用这种方法，我可以更改链式数组中的顺序：

```
array.do_something.transform{ |a| [a[3],a[0],a[1],a[2]] }.do_something_else 
```

而不是这样做：

```
a0,a1,a2,a3 = array.do_something
result = [a3, a0, a1, a2].do_something_else 
```

使用此方法时还有其他便利，但是...

该方法非常简单，所以我想某处应该是具有相同目的的已构建方法。

这种红宝石方法有类似物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:24:20.220

我现在无法对此进行测试，但您应该可以执行以下操作：

```
array= [1,2,3]
array.tap{ |a| a.clear } 
```

Tap 运行块然后返回 self 因此如果您可以在块中修改 self ，它将传回更新的数组。在我的示例中， clear 修改块中的 self ，因此返回修改后的 self 。

如果您想要此功能，我建议您添加类似 do_something_else 的方法！修改 self 然后在你的点击块中运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:29:51.197

你可以这样做[`instance_eval`](http://ruby-doc.org/core-1.9.3/BasicObject.html#method-i-instance_eval)：

> 在接收者的上下文中评估（...）给定的块

例子：

```
%w(a b c d).instance_eval{|a| [a[3], a[0], a[1], a[2]] }
# => ["d", "a", "b", "c"] 
```

或使用`self`：

```
%w(a b c d).instance_eval{ [self[3], self[0], self[1], self[2]] }
# => ["d", "a", "b", "c"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:21:38.117

那么问题在哪里？这完全取决于您想进入函数式编程领域多远。只是阅读`Learn You a Haskell for Great Good!`，你将永远不会一样。一旦你打开这个 Pandora 盒子，就真的很难停下来，经过一些实验后，我想知道我是否还在编写 Ruby 代码。比较（使用您`transform`为 定义的方法`Object`）

```
h = {}
{:a => :a_method, :b => :b_method}.each do |k, m|
  h[k] = some_object.__send__(m)
end
h.some_other_method 
```

和

```
some_object.transform(&THash[:a => :a_method, :b => :b_method]).some_other_method 
```

在哪里

```
THash = 
  lambda do |t| 
    h = {}
    kms = t.map { |k, v| [k, v.to_proc] }
    lambda do |x| 
      kms.each { |k, m| h[k] = m[x] }
    end
  end 
```

因此，如果您想从转换的角度来考虑您的对象，它非常有意义并且确实使代码更具可读性，但它不仅仅是`transform`方法，您需要定义您经常使用的通用转换。

基本上它被称为`point-free`编程，尽管有些人称之为`pointless`。取决于你的心态。

# c# - 我应该在 LMS 和 Scorm Player 之间使用网络服务连接吗？

> ID：11246303
> 
> 赞同：0
> 
> 时间：2012-06-28T13:58:46.853
> 
> 标签：c#, asp.net, sharepoint, scorm, compliant

我有一个用 sharepoint 和 c# 编码的 LMS。我想让我的 LMS scorm 兼容。我在这个范围内几乎是新手。我尝试使用 Sharepoint 学习工具包，但它对我没有用，因为据我所知，它不能完全编辑。在尝试使用 SLK 之后，我决定在 SCO 和 LMS 之间编写 api 适配器，因为我意识到我需要一个 api 适配器并且我没有找到一个 Api 适配器来集成我的 LMS。

我应该在使用 Webservice 连接到 LMS 的 javascript 中编写 Api 适配器吗？

请不要推荐去scorm.com，scorm解释了bla bla bla ..什么都没有..

此外，我在 google 中进行了大量搜索，只有一个用 c# 编码的项目名为“DotNetScorm”，但我无法使其正常工作。

谁能给我一些关于我的情况的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:13:30.080

这个工具听起来正是您正在寻找的：http: [//jcasolutions.com/simple-scorm-lms-adapter](http://jcasolutions.com/simple-scorm-lms-adapter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:57:18.957

基本上，是的，您必须在 javascript 中实现 API，并使用 XMLHttpRequest 将信息发送到服务器。

您的 API 必须实现以下方法：GetLastError、GetErrorString、GetDiagnostic、SetValue、GetValue、Initialize、Terminate

困难的部分是 SetValue，我认为 Commit（SetValue 必须验证 SCO 发送给您的信息）。

很抱歉，我看到您不想要这些链接，但要知道这应该如何工作，您需要阅读 ADL 中的文档：http: [//www.adlnet.gov/capabilities/scorm/scorm -2004-4 日#tab-resources](http://www.adlnet.gov/capabilities/scorm/scorm-2004-4th#tab-resources)

下载 SCORM 2004 第 4 版规范，然后阅读其中的三个文档：

SCORM_2004_4ED_v1_1_RTE_20090814- 这个解释了 SCO 的播放方式（你真正想要的）以及 SCO 和 LMS 之间的通信是如何发生的

在我看来，要实现 API 是不够的，因为您需要上传 SCORM 包（基本上解释 imsmanifest.xml 文件），为此，您需要阅读以下内容：

SCORM_2004_4ED_v1_1_CAM_20090814- 了解 SCO 是如何打包的 SCORM_2004_4ED_v1_1_SN_20090814- 如何链接内容

祝你好运

# ruby-on-rails-3 - In Rails 3 data save with out p()

> ID：11246312
> 
> 赞同：0
> 
> 时间：2012-06-28T13:59:09.927
> 
> 标签：ruby-on-rails-3

In the below code retrive data from database arrange those & delete from database again insert

```
page_nos = [10,11,12,13,14,20,21,22,23,24,30,31,32,33,34,40,41,42,43,44]

page_nos.each do |page|
  @page_data = HomePageSetting.where("page_no = '#{page}'").order("score desc")
  p(@page_data)
  HomePageSetting.where("page_no = #{page}").delete_all
  @page_data.each do |data|
    @home_page = HomePageSetting.new
    @home_page.subject_id = data.subject_id
        @home_page.subject_type = data.subject_type
        @home_page.score = data.score
        @home_page.flag = data.flag
        @home_page.flag_detail = data.flag_detail
        @home_page.page_no = data.page_no
        @home_page.release_date = data.release_date
        @home_page.item_created_at = data.item_created_at
        @home_page.save
      end
    end 
```

that is not working if i remove p(@page_data) line

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:26:34.493

看起来至少有一个问题是您在块`.save`内调用`.new`- 您应该*在*.

这是更改后的代码：

```
page_nos = [10,11,12,13,14,20,21,22,23,24,30,31,32,33,34,40,41,42,43,44]

page_nos.each do |page|
  @page_data = HomePageSetting.where("page_no = '#{page}'").order("score desc")
  p(@page_data)
  HomePageSetting.where("page_no = #{page}").delete_all
  @page_data.each do |data|
    @home_page = HomePageSetting.new
    @home_page.subject_id = data.subject_id
        @home_page.subject_type = data.subject_type
        @home_page.score = data.score
        @home_page.flag = data.flag
        @home_page.flag_detail = data.flag_detail
        @home_page.page_no = data.page_no
        @home_page.release_date = data.release_date
        @home_page.item_created_at = data.item_created_at
      end
      @home_page.save
    end 
```

当我遇到这样的问题时，我有时也会使用`.save!`——如果数据没有正确保存，它将停止处理并抛出异常。`.save`可以默默地失败并简单地返回`false`。改为尝试使用`@home_page.save!`。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:18:14.283

我不太明白您要做什么，但我怀疑我确实知道输出`@page_data`变量会产生影响的原因。

`@page_data`是一个 ActiveRecord::Relation 对象 - 即存储的 SQL 查询。因为执行查询并将结果对象加载到内存中需要时间，Rails 直到必须执行时才会真正执行查询。当您输出时`@page_data`，它必须实例化这些对象以打印输出。然后它们存在于内存中，即使在下一行从数据库中删除它们的行后也可以引用它们。

如果您*不*打印该数据，它将在下一行保持未实例化，您将在其中删除所有这些行。然后，你调用`.each`它，它*在那个时候*被实例化，并且没有要获取的对象，因为你刚刚删除了它们。

您可以在第一次定义时`@page_data`通过调用`.all`, 强制 Rails 实例化关系，因此：

```
@page_data = HomePageSetting.where("page_no = '#{page}'").order("score desc").all 
```

# c++ - C++ DLL only reading first char of a string contained in a safearray

> ID：11246313
> 
> 赞同：3
> 
> 时间：2012-06-28T13:59:09.853
> 
> 标签：c++, string, dll, vb6, safearray

I'm trying to figure out how to pass a user defined structure from a VB6 application to a C++ DLL.

Here's a sample of my VB6 code :

```
Private Type ObjetVB  
    Rank As Integer
    Id As String
End Type  

Private Declare Sub testLObj Lib "D:\TestDLL.dll" (Tab_Obj() As ObjetVB)
Private Declare Sub testObj Lib "D:\TestDLL.dll" (ByRef Obj As ObjetVB)

Private Sub Command1_Click()
    Dim elements(1 To 4) As ObjetVB, i As Long

    For i = 1 To 4
        elements(i).Rank = i
        elements(i).Id = "Pouet"
    Next

    testLObj elements()
End Sub

Private Sub Command2_Click()
    Dim ObjCrash As ObjetVB

    ObjCrash.Rank = 1
    ObjCrash.Id = "Pouet"

    testObj ObjCrash

End Sub 
```

And a sample of my C++ code :

```
struct ObjetVB
{
    short Rank;
    char* Id;
};

void videFichier()
{
    ofstream fichier("../../../log.txt", ios::out | ios::trunc);
    if(fichier)
    {    
        fichier.close();
    }
}    

int Log(ObjetVB ObjInput)  
{
    ofstream fichier("../../../log.txt", ios::out | ios::app);
    if(fichier)
    {
        fichier << ObjInput.Rank << endl << "Id : " << ObjInput.Id << endl << endl;
        fichier.close();
    }
    return 0;
}

void __stdcall testObj (ObjetVB* ObjInput)  
{
    videFichier();
    log(*ObjInput);
}

void __stdcall testLObj (SAFEARRAY **Tab_Obj)
{
    ObjetVB *elt;
    HRESULT ret;
    unsigned long i;
    videFichier();

    if ((ret = SafeArrayAccessData(*Tab_Obj,(void **) &elt))==S_OK)
    {
        for (i = 0; i < (*Tab_Obj)->rgsabound->cElements; i++)
        {
            Log(elt[i]);
        } 
        SafeArrayUnaccessData(*Tab_Obj);
    }
} 
```

My Issue is, when I click "Command2", my log file looks like this :

```
1  
Id : Pouet 
```

Whereas, when I click "Command1", it looks like this :

```
1
Id : P

2
Id : P

3
Id : P

4
Id : P 
```

Why does my C++ DLL recognize "char* Id" as a chain of characters when I pass a single item whereas when I use an array of items it looks like it recognizes it as a pointer to the first character?

And, most notably, how could I fix it? I tried using LBSTR instead of char* in my c++ struct, it didn't fix it, I also tried to add "elements(i).Id = String (255, vbNullChar)" berfore initializing the VB6 strings, but it didn't prove to be helpful either.

As usual, I'd like to thank all of you for the time you put into reading and trying to help.

On a side note : English is a foreign langage to me, so I hope I'm almost understandable and, of course, I apologize if it's not the case.

**Edit :**

I don't know if it could help, but after trying what Mark Bertenshaw suggested, I also tried this : in VB6 :

```
Id As String * 10 
```

in C++ :

```
char Id[10]; 
```

Which gave this weird result :

```
Objet : 
32
Id : P

Objet : 
1
Id :  

Objet : 
32
Id : P

Objet : 
2
Id : 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:23:41.957

这里发生的事情是 VB 正在“提供帮助”，并自动为您将 ID 中的 2 字节 Unicode 字符串 (BSTR) 转换为 1 字节 ANSI 字符串 (char*)。但是，当您将 VB 类型放入数组时，我不完全确定它对字符串做了什么。

一种可能性是 ObjetVB 结构的打包给您带来了问题。尝试像这样定义它：

```
Private Type ObjetVB
   Id As String        ' 4 bytes
   Rank As Integer     ' 2 bytes
End Type   

struct ObjetVB
{
    char* Id;          // 4 bytes
    short Rank;        // 2 bytes
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:13:47.343

VB6 返回一个 BSTR 而不是 char 数组。一个 BSTR 将充满宽字符，例如。对于标准罗马字母，我相信 2 字节编码与 ASCII 相同，但第二个字节为 0，因此您的字符串的长度似乎为零。

您可以使用 wchar_t* 而不是 char*，您会发现一切似乎都正常。这不是最好的方法，因为您不能保证 wchar_t 和 BSTR 的大小相同。

最好的办法是使用[ConvertBSTRToString](http://msdn.microsoft.com/en-us/library/ewezf1f6%28v=vs.80%29.aspx)函数。

# android - win 32 操作系统上的 Maven 构建错误

> ID：11246315
> 
> 赞同：2
> 
> 时间：2012-06-28T13:59:28.287
> 
> 标签：android

我正在尝试在 maven 上使用 ndk 构建源代码，但无法构建源代码。它在 windows OS-32 上的错误日志下方显示。我不明白我在这里做错了什么。我是使用 maven 构建应用程序的新手。任何帮助。

```
> [INFO] Error installing artifact's metadata: Error installing
> metadata: Error up dating group repository metadata
> 
> expected START_TAG or END_TAG not TEXT (position: TEXT seen
> ...<extension>pom</. .. @13:25) [INFO]
> ------------------------------------------------------------------------ [INFO] Trace org.apache.maven.lifecycle.LifecycleExecutionException:
> Error installing artifac t's metadata: Error installing metadata:
> Error updating group repository metadat a
>         at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defa
> ultLifecycleExecutor.java:583)
>         at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLi
> fecycle(DefaultLifecycleExecutor.java:499)
>         at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(Defau
> ltLifecycleExecutor.java:478)
>         at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHan
> dleFailures(DefaultLifecycleExecutor.java:330)
>         at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegmen
> ts(DefaultLifecycleExecutor.java:291)
>         at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLi
> fecycleExecutor.java:142)
>         at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:336)
>         at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:129)
>         at org.apache.maven.cli.MavenCli.main(MavenCli.java:287)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
> java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
> sorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:597)
>         at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
>         at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
>         at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
> 
>         at org.codehaus.classworlds.Launcher.main(Launcher.java:375) Caused by: org.apache.maven.plugin.MojoExecutionException: Error
> installing arti fact's metadata: Error installing metadata: Error
> updating group repository meta data
>         at org.apache.maven.plugin.install.InstallMojo.execute(InstallMojo.java:
> 143)
>         at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPlugi
> nManager.java:451)
>         at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defa
> ultLifecycleExecutor.java:558)
>         ... 16 more Caused by: org.apache.maven.artifact.installer.ArtifactInstallationException: Er
> ror installing artifact's metadata: Error installing metadata: Error
> updating gr oup repository metadata
>         at org.apache.maven.artifact.installer.DefaultArtifactInstaller.install(
> DefaultArtifactInstaller.java:91)
>         at org.apache.maven.plugin.install.InstallMojo.execute(InstallMojo.java:
> 92)
>         ... 18 more Caused by: org.apache.maven.artifact.repository.metadata.RepositoryMetadataInsta
> llationException: Error installing metadata: Error updating group
> repository met adata
>         at org.apache.maven.artifact.repository.metadata.DefaultRepositoryMetada
> taManager.install(DefaultRepositoryMetadataManager.java:463)
>         at org.apache.maven.artifact.installer.DefaultArtifactInstaller.install(
> DefaultArtifactInstaller.java:79)
>         ... 19 more Caused by: org.apache.maven.artifact.repository.metadata.RepositoryMetadataStore
> Exception: Error updating group repository metadata
>         at org.apache.maven.artifact.repository.metadata.AbstractRepositoryMetad
> ata.storeInLocalRepository(AbstractRepositoryMetadata.java:76)
>         at org.apache.maven.artifact.repository.metadata.DefaultRepositoryMetada
> taManager.install(DefaultRepositoryMetadataManager.java:459)
>         ... 20 more Caused by: org.codehaus.plexus.util.xml.pull.XmlPullParserException: expected ST
> ART_TAG or END_TAG not TEXT (position: TEXT seen
> ...<extension>pom</... @13:25)
> 
>         at org.codehaus.plexus.util.xml.pull.MXParser.nextTag(MXParser.java:1083
> )
>         at org.apache.maven.artifact.repository.metadata.io.xpp3.MetadataXpp3Rea
> der.parseVersioning(MetadataXpp3Reader.java:513)
>         at org.apache.maven.artifact.repository.metadata.io.xpp3.MetadataXpp3Rea
> der.parseMetadata(MetadataXpp3Reader.java:352)
>         at org.apache.maven.artifact.repository.metadata.io.xpp3.MetadataXpp3Rea
> der.read(MetadataXpp3Reader.java:866)
>         at org.apache.maven.artifact.repository.metadata.AbstractRepositoryMetad
> ata.updateRepositoryMetadata(AbstractRepositoryMetadata.java:98)
>         at org.apache.maven.artifact.repository.metadata.AbstractRepositoryMetad
> ata.storeInLocalRepository(AbstractRepositoryMetadata.java:68)
>         ... 21 more [INFO] ------------------------------------------------------------------------ [INFO] Total time: 3 seconds [INFO] Finished at: Thu Jun 28 19:21:01
> IST 2012 [INFO] Final Memory: 13M/32M [INFO]
> ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T16:43:47.537

从本地存储库中删除当前安装的工件。

# javascript - Ajax 没有收到 onError 消息

> ID：11246319
> 
> 赞同：0
> 
> 时间：2012-06-28T13:59:39.550
> 
> 标签：javascript, jquery, asp.net, vb.net, jquery-mobile

在我的 aspx 登录脚本中，我没有通过 Javascript 获得服务器错误消息。我不明白问题出在哪里或出了什么问题。

该脚本向该 URL 发送 Ajax 响应：`login.aspx?ajax=true`出错时它会收到带有错误消息的 403 错误代码。但是在数据值中找不到错误消息。VB中还有其他一些我必须发送的参数吗？还是我在Javascript中犯了一个错误？

在 Firebug 中，我可以看到错误消息。

HTML

> 登录失败。还剩 3 次尝试。

**登录.aspx**

```
function onError(data) {
  $('#errormessage').text(this);
  $.mobile.changePage("#loginError", {
    transition: "pop",
    reverse: false,
    changeHash: false
  });
  $("#Submit1").click(function() {
    var formData = $("#loginform").serialize();
    $.ajax({
      type: "POST",
      url: "login.aspx",
      cache: false,
      data: formData,
      success: onSuccess,
      error: onError
    });
    return false;
  }); 
```

**aspx.vb**

```
Catch ex As AccessDeniedException
  Response.StatusCode = 403
  Response.Write(ex.Message)
    'Response.AppendHeader("XML", "<xml><error>" + ex.Message + "</error></xml>")
    'Response.StatusDescription = "<xml><error>" + ex.Message + "</error></xml>"
    'Response.Status = ex.Message
  Response.End() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:12:25.550

来自 jQuery [ajax](http://api.jquery.com/jQuery.ajax/)文档

> **错误（jqXHR，textStatus，errorThrown）函数**
> 
> 请求失败时调用的函数。该函数接收三个参数：jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象，一个描述发生的错误类型的字符串和一个可选的异常对象（如果发生）。第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。从 jQuery 1.5 开始，错误设置可以接受一个函数数组。每个函数都会被依次调用。注意：跨域脚本和 JSONP 请求不调用此处理程序。这是一个 Ajax 事件。

因此，如果您想要 HTTP 状态，请将其放入 html 中，或者从您的变量当前代表`errorThrown`的变量中挖掘出来。`jqXHR``data`

# asp.net-mvc - 使用 string[] 进行良好的 LINQ 查询

> ID：11246321
> 
> 赞同：0
> 
> 时间：2012-06-28T13:59:40.627
> 
> 标签：asp.net-mvc, asp.net-mvc-3, linq, entity-framework, authentication

我对 LINQ 有一些问题，也许有人得到了答案

```
string[] roleNames = Roles.GetRolesForUser(currentUserName);

result = context.MenuRoles.Select(mr => new MenuGenerateViewModel
{
    MenuID = mr.MenuID,
    MenuNazwa = mr.Menu.MenuNazwa,
    MenuKolejnosc = mr.Menu.MenuKolejnosc,
    MenuStyl = mr.Menu.MenuStyl,
    MenuParentID = mr.Menu.MenuParentID,
    MenuActive = mr.Menu.MenuActive,
    MenuActionName = mr.Menu.MenuAction.MenuActionName,
    MenuControlName = mr.Menu.MenuControl.MenuControlName,
    RoleName = mr.Role.RoleName,
    RoleID = mr.RoleID,
    MenuID = mr.MenuID
})
.Where(mr => mr.MenuActive == true)
.ToList(); 
```

如何仅比较**string[] roleNames**并仅在匹配时返回。问题总是出现在用户担任 2 个或更多角色时。

发送答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:06:58.970

如果我理解您的要求，请在您的`Where`条款中添加第二个条件：

```
 .Where(mr => mr.MenuActive && roleNames.Contains(mr.Role.RoleName)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:15:02.430

您最好切换您的`Where`子句，`Select`原因很简单，您将不会从不需要的数据库记录中检索。

```
result = context.MenuRoles.Where(mr => mr.MenuActive 
                    && roleNames.Contains(mr.Role.RoleName))
                .Select(mr => ... )
                .ToList(); 
```

这将生成一个只选择必要记录的 sql，而不是选择整个批次*然后*过滤它。尝试并观察 SQL 分析器以查看差异（在任何情况下使用 EF 的有用技能）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:12:30.703

在这里有才华的人的帮助下，达到了目标。

```
string[] roleNames = Roles.GetRolesForUser(currentUserName);

result = context.MenuRoles
    .Where(mr => mr.Menu.MenuActive && roleNames.Contains(mr.Role.RoleName))
    .Select(mr => new MenuGenerateViewModel
    {
        MenuID = mr.MenuID,
        MenuNazwa = mr.Menu.MenuNazwa,
        MenuKolejnosc = mr.Menu.MenuKolejnosc,
        MenuStyl = mr.Menu.MenuStyl,
        MenuParentID = mr.Menu.MenuParentID,
        MenuActive = mr.Menu.MenuActive,
        MenuActionName = mr.Menu.MenuAction.MenuActionName,
        MenuControlName = mr.Menu.MenuControl.MenuControlName,
        RoleName = mr.Role.RoleName
    })
    .ToList();

var userresult = context.MenuUsers
    .Where(mr => mr.Menu.MenuActive && mr.User.Username == currentUserName)
    .Select(mr => new MenuGenerateViewModel
    {
        MenuID = mr.MenuID,
        MenuNazwa = mr.Menu.MenuNazwa,
        MenuKolejnosc = mr.Menu.MenuKolejnosc,
        MenuStyl = mr.Menu.MenuStyl,
        MenuParentID = mr.Menu.MenuParentID,
        MenuActive = mr.Menu.MenuActive,
        MenuActionName = mr.Menu.MenuAction.MenuActionName,
        MenuControlName = mr.Menu.MenuControl.MenuControlName,
        Username = mr.User.Username
    })
    .ToList(); 
```

在这里，通过组成员资格和直接分配给菜单本身，获取您有权访问的所有菜单。

```
// Kick all duplicates
var noduplicates = result.Concat(userresult)
                          .Distinct(new RoleMenuGenerateComparer()); 
```

因为通常我们不希望菜单中有重复项，所以我们将其删除。为了让它正常工作，我们需要实现 IEqualityComparer （你可以阅读这一点）

```
public class RoleMenuGenerateComparer : IEqualityComparer<MenuGenerateViewModel>
{

    public bool Equals(MenuGenerateViewModel x, MenuGenerateViewModel y)
    {
        //Check whether the compared objects reference the same data.
        if (Object.ReferenceEquals(x, y)) return true;

        //Check whether any of the compared objects is null.
        if (Object.ReferenceEquals(x, null) || Object.ReferenceEquals(y, null))
            return false;

        //Check whether the products' properties are equal.
        return x.MenuNazwa == y.MenuNazwa && x.MenuID == y.MenuID;
    }

    public int GetHashCode(MenuGenerateViewModel menuGenerateViewModel)
    {
        if (Object.ReferenceEquals(menuGenerateViewModel, null)) return 0;

        int hashMenuName = menuGenerateViewModel.MenuNazwa == null ? 0 : menuGenerateViewModel.MenuNazwa.GetHashCode();

        int hashMenuID = menuGenerateViewModel.MenuID == null ? 0 : menuGenerateViewModel.MenuID.GetHashCode();

        return hashMenuName ^ hashMenuID;

    }

} 
```

当然我相信你可以优化这段代码，但目前我有这样的东西。

全部发送以寻求帮助。

# c# - 不会更改文件哈希的文件副本

> ID：11246322
> 
> 赞同：0
> 
> 时间：2012-06-28T13:59:43.247
> 
> 标签：c#, file, hash, copy

我无法复制文件，然后验证文件的完整性。我已经尝试了所有我能想到的文件复制方法（File.Copy、filestreams、尝试进行二进制复制），但文件哈希在复制后总是不同的。我一直在四处寻找，我注意到很多人说从网络共享复制文件会导致这种情况，但我从共享中得到的结果与直接从硬盘驱动器中得到的结果相同。

```
//File hashing method:
private byte[] hashFile(string file)
{
    try
    {
        byte[] sourceFile = ASCIIEncoding.ASCII.GetBytes(file);
        byte[] hash = new MD5CryptoServiceProvider().ComputeHash(sourceFile);
        return hash;
... 
```

使用这种方法，原始文件和复制的文件在每次运行时总是（单独）产生相同的哈希值，但两个哈希值不相同。有谁知道在不更改文件哈希的情况下复制文件的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:04:40.190

我认为您正在散列**FileName** .. 而不是 Content ！

所以肯定它不会计算一样！

检查文件和 byte[] sourceFile 的值和长度

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T14:06:02.933

您似乎将文件名而不是文件内容传递给哈希函数。

使用这样的东西：

```
byte[] hash = md5.ComputeHash(File.ReadAllBytes(filename)); 
```

或这个：

```
using (var stream = File.Open(filename)) {
    byte[] hash = md5.ComputeHash(stream);
} 
```

# firefox-addon - 按下“关闭”按钮后 XUL 对话框未关闭

> ID：11246325
> 
> 赞同：0
> 
> 时间：2012-06-28T13:59:55.387
> 
> 标签：firefox-addon, xul

我的插件中有一个对话框，当某些删除过程完成时会打开。我对所有此类消息使用 XUL 对话框，如下所示：

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://myaddon/skin/Style.css" type="text/css"?>
<!DOCTYPE overlay SYSTEM "chrome://myaddon/locale/mydtd.dtd">

<dialog xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
        class="dialog" ondialogcancel="return true;">
    <dialogheader id="dlgHdr"/>
    <vbox flex="1" id="content" pack="center">
    </vbox>
    <script
        type="application/x-javascript"
        src="chrome://myaddon/content/mainScript.js"
    />
    <script
        type="application/x-javascript"
        src="chrome://myaddon/content/dialogInit.js"
    />
    <tfs_string id="new-profile-success" value="&newProfileSuccess.Text;"
                style="overflow: hidden" />
    <tfs_string id="delete-profile-success" value="&deleteProfileSuccess.Text;"
                style="overflow: hidden" />
</dialog> 
```

它有取消按钮，*ondialogcancel*处理程序返回 true。但它不会在按下按钮后立即关闭。我必须稍微拖动此对话框以使其消失。此外，只有在重新安装插件后重新启动浏览器时才会出现此问题。在我按下取消后立即关闭另一个重新启动对话框。我将此对话框用于其他一些消息，它们没有这样的问题。

如果我关闭窗口并使用 Chromebug 调试器再次打开它而不是使用弹出窗口重新启动，我无法重现此错误。但是，如果我发布另一个 FF 版本，然后再次发布第一个版本（使用调试器），我会设法重现它。但是当我在 dialogcancel 处理程序上使用逐步执行时，Chromebug 的界面变得无响应（脚本内容区域除外）并且在我在调试器中看到 window.close() 执行后对话框没有关闭，所以我必须拖动对话框窗口再绕一圈使其消失。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:39:33.027

我终于找到了原因。问题确实是由 dialogInit.js 脚本引起的。

```
window.addEventListener('load', function () { myext.simpleDialogInitialize(); }, false);
window.addEventListener("MozAfterPaint", function () { window.sizeToContent(); }, false);
window.addEventListener('unload', function () { myext.simpleDialogFinalize(); }, false); 
```

它甚至包含“加载”和“卸载”事件的处理程序。第一个调用在打开此窗口的方法中指定的初始化程序。但我猜还有一个名为 window.sizeToContent 的“MozAfterPaint”事件处理程序，因此触发了无限循环。扩展不是从头开始创建的，所以我有一段时间没有注意到这个错误。在调用该初始化程序后，我将调整大小移动到“加载”事件处理程序，工作正常。

# android - 如何在安装或删除其他应用程序时让我的应用程序接收广播

> ID：11246326
> 
> 赞同：22
> 
> 时间：2012-06-28T13:59:57.927
> 
> 标签：android, permissions, broadcastreceiver

我想制作一个可以在设备上安装或删除其他应用程序时接收广播的应用程序。

我的代码

在清单中：

```
<receiver android:name=".apps.AppListener">
    <intent-filter android:priority="100">
         <action android:name="android.intent.action.PACKAGE_INSTALL"/>
         <action android:name="android.intent.action.PACKAGE_ADDED"/>  
         <action android:name="android.intent.action.PACKAGE_REMOVED"/>
    </intent-filter>
</receiver> 
```

在 AppListener 中：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class AppListener extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent arg1) {
    // TODO Auto-generated method stub
    Log.v(TAG, "there is a broadcast");
    }
} 
```

但我无法接收任何广播。我认为这个问题是由于应用程序权限，知道吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-28T14:08:28.027

在您的清单中：

```
<receiver android:name=".apps.AppListener">
    <intent-filter android:priority="100">
         <action android:name="android.intent.action.PACKAGE_INSTALL"/>
         <action android:name="android.intent.action.PACKAGE_ADDED"/>  
         <action android:name="android.intent.action.PACKAGE_REMOVED"/>
    </intent-filter>
</receiver> 
```

在 intent-filter 标签之前添加一行

```
<data android:scheme="package"/> 
```

所以你的清单应该是这样的：

```
<receiver android:name=".apps.AppListener">
    <intent-filter android:priority="100">
         <action android:name="android.intent.action.PACKAGE_INSTALL"/>
         <action android:name="android.intent.action.PACKAGE_ADDED"/>  
         <action android:name="android.intent.action.PACKAGE_REMOVED"/>
         <data android:scheme="package"/> 
    </intent-filter>
</receiver> 
```

我不确定 PACKAGE_REMOVED 的意图是否真的可用。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-22T07:21:27.520

您必须消除**android.intent.action.PACKAGE_INSTALL**因为它已被弃用且不再推荐，因为它仅适用于系统。其他一切都很完美，我建议不要使用 100，而是使用 999，文档没有给出使用的最大或最小数量，数字越大，接收器的优先级就越高。对不起翻译。我用西班牙语说话和写作。 [信息](http://developer.android.com/intl/es/reference/android/content/Intent.html#ACTION_PACKAGE_INSTALL)

```
<receiver android:name=".apps.AppListener">
<intent-filter android:priority="999">
     <action android:name="android.intent.action.PACKAGE_ADDED"/>  
     <action android:name="android.intent.action.PACKAGE_REMOVED"/>
     <data android:scheme="package"/> 
</intent-filter> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-13T18:34:49.373

很好的答案，只剩下一件小事：

在每次应用更新时，首先会调用 ACTION_PACKAGE_REMOVED，然后调用 ACTION_PACKAGE_ADDED——如果您希望忽略这些事件，只需将其添加到您的 onReceive() 中即可：

```
if(!(intent.getExtras() != null &&
    intent.getExtras().containsKey(Intent.EXTRA_REPLACING) &&
    intent.getExtras().getBoolean(Intent.EXTRA_REPLACING, false))) {

    //DO YOUR THING
} 
```

这是来自文档：

> EXTRA_REPLACING 在 API 级别 3 中添加 字符串 EXTRA_REPLACING 用作 ACTION_PACKAGE_REMOVED 意图中的布尔额外字段，以指示这是对包的替换，因此此广播之后将立即为同一包的不同版本添加广播。常量值：“android.intent.extra.REPLACING”

# sql-server-2008 - 如何在VBScript中获取时差

> ID：11246330
> 
> 赞同：0
> 
> 时间：2012-06-28T14:00:14.183
> 
> 标签：sql-server-2008, tsql, vbscript

我有与我的数据库（SQL Server 2008）连接的 VB 脚本，这个脚本查询包含`getdate()`函数，现在我想减去 2 个时间值，假设 SQL1-SQL2 并且只想要时间差，而不是日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:01:54.940

```
SELECT DATEDIFF(MINUTE, SQL2, SQL1) FROM dbo.table; 
```

如果您想在 VBScript 中执行此操作，则类似于：

```
x = datediff("n", rs("SQL2"), rs("SQL1")) 
```

[datediff 的 T-SQL 文档 datediff 的](http://msdn.microsoft.com/en-us/library/ms189794%28v=sql.100%29.aspx)
[VBScript 文档](http://msdn.microsoft.com/en-us/library/xhtyw595%28v=vs.84%29.aspx)

# php - 向 Facebook 用户发送应用请求

> ID：11246331
> 
> 赞同：-1
> 
> 时间：2012-06-28T14:00:15.953
> 
> 标签：php, facebook, facebook-graph-api

在网上搜索时，我发现了这段代码：

```
$apprequest_url ="https://graph.facebook.com/" .
        "/apprequests?ids=USERID_1,USERID_2,USERID_3" .
        "&message='INSERT_UT8_STRING_MSG'" . 
        "&data='INSERT_STRING_DATA'&"  .   
        $app_access_token . "&method=post"; 
```

谁能向我解释这如何发送应用请求？它应该如何工作？您是否将其添加到按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:15:30.410

URL 是一个 Graph API 端点，以及通过查询字符串提供的必要选项。

它通过对该 URL 发出请求来工作，Facebook 将通过 HTTP 响应返回该 Graph API 调用的结果。

有关更多信息，您应该对 REST API 进行一些研究。;-)

附带说明一下，ASHUTOSH 响应中的代码会弹出一个对话框，从该对话框中通过 FB javascript SDK 发送应用程序请求，但无论如何，SDK 在幕后只是包装了对 Graph API 的调用/响应。您可以使用 Firebug for FF 或 Chrome、IE 等中的其他浏览器开发工具进行检查。只需进入“网络”选项卡并查看浏览器发出的 HTTP 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:23:43.257

您可以使用 javascript sdk 发送应用请求。

```
<html>
<head>
<script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script>
     <script type="text/javascript">
       FB.init({
         appId  :<?php echo $facebook_appid;?>,
         status : true, // check login status
         cookie : true, // enable cookies to allow the server to access the session
         xfbml  : true  // parse XFBML   
       });

function newInvite(){
                 var receiverUserIds = FB.ui({ 
                        method : 'apprequests',
                        message: 'Invite your Friends for Your App',

                 },
                 function(receiverUserIds) {
                          console.log("IDS : " + receiverUserIds.request_ids);
                        }
                 );
                 //http://developers.facebook.com/docs/reference/dialogs/requests/
            }
     </script>
</head>
<body>
<?php
//---your app code here-----
//to call the function,
echo "<script type='text/javascript'>newInvite();</script>"
?>
</body>
</html> 
```

将文件另存为 .php 并运行。这应该工作！如果是，则接受答案。快乐编码！

# android - Android 手机和平板电脑兼容性

> ID：11246332
> 
> 赞同：1
> 
> 时间：2012-06-28T14:00:21.130
> 
> 标签：android, compatibility, tablet

简单的问题，我为我的手机（android froyo）做了一个应用程序。它会在 android froyo 平板电脑上运行吗？或者我必须进行一些修改以使其在平板电脑上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:03:05.733

简单的回答：它可以在平板电脑上运行 - 试试看。

不是那么简单的答案：这取决于您是否使用手机的某些功能以及这些功能是否在您的平板电脑中可用。例如，如果您的平板电脑没有 GPS，而您正在开发位置感知应用程序，那显然是行不通的。另一件需要注意的事情是应用程序的可用性。您的 UI 很可能会在设计时考虑到手机的外形尺寸。在像平板电脑这样的大屏幕设备上，这可能看起来不太吸引人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:04:52.950

只要您[`<supports-screen>`](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)在 Manifest.xml 文件中使用适当的标签，就可以。但是，我强烈建议您制作平板 UI，因为用户不喜欢在平板屏幕上拉伸的手机 UI。[本文档](http://developer.android.com/guide/practices/screens_support.html)可能会帮助您。

# php - PHP PDF 使用 blob 数据即时压缩

> ID：11246334
> 
> 赞同：2
> 
> 时间：2012-06-28T14:00:22.850
> 
> 标签：php, pdf, zip, blob

我想使用下面的脚本将存储为 blob 数据的 pdf 文件添加到 ZIP。

我收到两个我不明白的错误

> 警告：file_put_contents（ATPstatement201203.pdf）[function.file-put-contents]：无法打开流：权限被拒绝

和

> 注意：ZipArchive::addFile() [ziparchive.addfile]: 空字符串作为文件名

我不知道我做错了什么？

```
$TP_Month  =''.$_POST["tp_year"].''.$_POST["tp_month"].'';
$TP_format =$TP_Month;

echo $_POST["ids"];

$zip = new ZipArchive;
$zip->open('file.zip', ZipArchive::CREATE);
foreach( explode( ',', $_POST["ids"]) as $Client_ID)
{
  $sql_qry="select *
            from   ca_client_statement
            where  client_id='".$Client_ID."' and trading_period_month like '".$TP_Month."'";
  $sql_err_no=sql_select($sql_qry,$sql_res,$sql_row_count,$sql_err,$sql_uerr);

  $row = mysql_fetch_assoc($sql_res);
  $file_content = $row['pdf_statement'];
  $file_name = ''.$Client_ID.'statement'.$TP_format.'.pdf';
  $file=file_put_contents($file_name, $file_content);
  $zip->addFile($file);
}
$zip->close();

header('Content-Type: application/zip');
header('Content-disposition: attachment; filename=filename.zip');
header('Content-Length: ' . filesize($zipfilename));
readfile($zipname); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:02:32.293

“权限被拒绝”表示 Web 服务器无权写入您尝试将文件保存到的位置。`chmod`您必须从命令行更改您尝试写入的目录的权限（如果您在 linux 上）。

作为错误的证明，您可以这样做`chmod 777 /path/to/your/save/location`，但是保持权限开放不是一个好主意，您应该将其拨回`644`左右。

你得到“作为文件名的空字符串”，因为`file_get_contents()`失败（出现上述错误），当它失败时，它返回布尔值`false`（根据[文档](http://php.net/file_put_contents)），它（显然）被解释为空字符串文件名。

# java - 将 MySQL“SET”列与 Ebean ORM 一起使用

> ID：11246336
> 
> 赞同：0
> 
> 时间：2012-06-28T14:00:38.613
> 
> 标签：java, mysql, orm, playframework-2.0, ebean

我正在尝试使用带有 Ebean 的 Play 2.0 重新创建我们的一个 Web 应用程序，但遇到了障碍。我不知道如何将 MySQL 的`SET`类型映射到模型中的字段。我已经`ENUM`使用注释使列工作，`@Enumerated(EnumType.STRING)`但我似乎找不到有关`SET`列的任何信息。

该表模仿 crontab：

```
CREATE TABLE IF NOT EXISTS `schedule` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `task_id` mediumint(8) unsigned NOT NULL default '0',
  `month` set('January','February','March','April','May','June','July','August','September','October','November','December') default NULL,
  `mday` set('1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','-1','-2','-3','-4','-5','-6','-7','-8','-9','-10') default NULL,
  `wday` set('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday') default NULL,
  `hour` set('0','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23') default NULL,
  `minute` set('00','01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59') default NULL,
  `updated` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  PRIMARY KEY  (`id`),
  KEY `event` (`task_id`)
) 
```

我现在按照 MvG 的建议创建了一个 UserType 和相关注释：

```
@Entity
public class Schedule extends Model {

    public enum Month { JANUARY, FEBRUARY, MARCH, APRIL, MAY, JUNE, JULY, AUGUST, SEPTEMBER, OCTOBER, NOVEMBER, DECEMBER };
    public enum Weekday { SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY };

    @Id
    public Long id;

    @ManyToOne(cascade = CascadeType.MERGE)
    public Task task;
    @Version
    public Timestamp updated;

    @Type(type="models.EnumSetUserType",parameters=@Parameter(name="enumType",value="models.Schedule$Month"))
    @Column(name="month", columnDefinition="SET('JANUARY','FEBRUARY','MARCH','APRIL','MAY','JUNE','JULY','AUGUST','SEPTEMBER','OCTOBER','NOVEMBER','DECEMBER')")
    @MonthEnum
    public EnumSet<Month> months;

    @Type(type="models.IntegerSetUserType")
    @IntegerSet(min=-30,max=30)
    @Column(name="mday",columnDefinition="SET('1','2','3','4','5','6','7','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','-1','-2','-3','-4','-5','-6','-7','-8','-9')")
    public Set<Integer> mdays;

    @Type(type="models.EnumSetUserType", parameters = @Parameter(name="enumType", value="models.Schedule$Weekday"))
    @Column(name="wday", columnDefinition="SET('MONDAY','TUESDAY','WEDNESDAY','THURSDAY','FRIDAY','SATURDAY')")
    @WeekdayEnum
    public EnumSet<Weekday> weekdays;

    @Type(type="models.IntegerSetUserType")
    @IntegerSet(min=0,max=23)
    @Column(name="hour",columnDefinition="SET('0','1','2','3','4','5','6','7','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23')")
    public Set<Integer> hours;

    @Type(type="models.IntegerSetUserType")
    @IntegerSet(min=0,max=59)
    @Column(name="minute",columnDefinition="SET('00','01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59')")
    public Set<Integer> minutes;

    public static Finder<Long,Schedule> find = new Finder<Long,Schedule>(Long.class, Schedule.class);

} 
```

`EnumSetUserType`：

```
public class EnumSetUserType<E extends Enum<E>> implements UserType, ParameterizedType, Serializable {
    private Class<? extends EnumSet> clazz = null;
    private Class<E> enum_type = null;

    @Override
    public void setParameterValues(Properties parameters) {
        String enum_class_name = parameters.getProperty("enumType");
        try {
            enum_type = ReflectHelper.classForName(parameters.getProperty("enumType"), this.getClass()).asSubclass(Enum.class);
            //enum_type = (Class<E>) Class.forName(enum_class_name);
            //enum_type = (Class<E>) Play.application().classloader().loadClass(enum_class_name);
        }
        catch (ClassNotFoundException e) {
            throw new HibernateException("enum class " + enum_class_name + " not found", e);
        }
    }

    @Override
    public Object nullSafeGet(ResultSet rs, String[] column_names, SessionImplementor session, Object owner) throws HibernateException, SQLException {
        String value_str = rs.getString(column_names[0]);
        System.out.println("getting " + column_names[0] + " using " + getClass());
        if (rs.wasNull())
            return null;

        List<E> enum_values = new ArrayList<E>();
        for (String value : value_str.split(","))
            enum_values.add(Enum.valueOf(enum_type, value));

        return EnumSet.copyOf(enum_values);
    }

    @Override
    public void nullSafeSet(PreparedStatement statement, Object object, int index, SessionImplementor session) throws HibernateException, SQLException {
        System.out.println("Setting " + index + " to " + object + " using " + getClass());
        if (object == null) {
            statement.setNull(index, Types.VARCHAR);
            return;
        }

        Set<E> values = (Set<E>) object;
        StringBuilder sb = new StringBuilder();
        for (E value : values)
            sb.append(value.name()).append(",");

        System.out.println("Setting " + index + " to " + sb.length() + " using " + getClass());
        statement.setString(index, sb.substring(0, sb.length() - 1));
    }

    @Override
    public int[] sqlTypes() {
        return new int[] { Types.VARCHAR };
    }

    @Override
    public Class returnedClass() {
        return clazz;
    }

    @Override
    public Object deepCopy(Object value) throws HibernateException {
        return value;
    }

    @Override
    public boolean isMutable() {
        return false;
    }

    @Override
    public Object replace(Object original, Object target, Object owner) throws HibernateException {
        return original;
    }

    @Override
    public Object assemble(Serializable cached, Object owner) throws HibernateException {
        return cached;
    }

    @Override
    public Serializable disassemble(Object value) throws HibernateException {
        return (Serializable) value;
    }

    @Override
    public boolean equals(Object x, Object y) throws HibernateException {
        if (x == y)
            return true;

        if (x == null || y == null)
            return false;

        return x.equals(y);
    }

    @Override
    public int hashCode(Object x) throws HibernateException {
        return x.hashCode();
    }

} 
```

它不再报告任何错误，但即使我手动填充并保存`Schedule`在控制器操作中，`Set`字段也不会保存在数据库中。我怎样才能让 Play+Ebean 与这张桌子一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:28:10.580

如果将`ENUM`列映射到 Java 枚举，则可能应该将`SET`列映射到 Java [`EnumSet`](http://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html)。SF上至少有[一个](https://stackoverflow.com/q/2402869/1468366)关于 mapping的问题`EnumSet`，但那里的解决方案似乎是一个单独的表，而不是 mysql`SET`类型。

hybernate 似乎也不支持 mysql`SET`类型。因此，您必须编写自己的[`UserType`](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/usertype/UserType.html). 我不确定有什么区别，但是您似乎可以轻松地将其设为[`EnhancedUserType`](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/usertype/EnhancedUserType.html)，这可能会使您的实现更加通用。如果您的项目允许使用 LGPL 许可的源代码，您可以使用[的实现](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/type/EnumType.java)作为[`EnumType`](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/type/EnumType.html)您自己的模板`EnumSetType`。调整它应该很容易，尤其是当您可以丢弃代码的所有“另存为序数”部分时。

一旦有了自己的`UserType`for `EnumSet`，就可以用它来注释相应的字段[`@Type`](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/annotations/Type.html)。或者在休眠配置中，如果您的设置中有这样的事情。甚至可能有办法在某处注册类型，自动映射`EnumSet`使用该类型的所有实例，但我对整个休眠的东西知之甚少，无法决定这是否可取甚至可能。我什至还没有弄清楚[`@Enumerated`](http://docs.oracle.com/javaee/6/api/javax/persistence/Enumerated.html)注释如何映射到`EnumType`实现。

使用正确的关键字 ( `UserType EnumSet split`)，可以在网络上[找到](http://www.google.com/search?q=UserType%20EnumSet%20split)一些实现。因此，您甚至不必编写自己的代码，而只需包含这些解决方案之一即可。有些附有关于如何使用它们的简短说明。

# c - Valgrind，“未初始化的值”错误

> ID：11246344
> 
> 赞同：5
> 
> 时间：2012-06-28T14:01:06.083
> 
> 标签：c, linux, memory-management, initialization, valgrind

在我的 C 程序中，我使用`malloc()`which 分配内存，与 相比`calloc()`，*不*初始化内存并且它可能仍然包含垃圾。大多数情况下，在分配的上下文中，我不会对`malloc()`. （例如，在初始化包含缓冲区的结构的函数中，我不会更改缓冲区的内存，但稍后会更改）。

Valgrind 给了我很多这些错误：

*   *条件跳转或移动取决于未初始化的值*
*   *使用大小为 4 的未初始化值*

在这些情况下，我*确信*永远不会从未初始化的内存中读取。

我应该忽略它们还是在分配时初始化内存更好？如果我应该忽略它们，如何在 Valgrind 中停用此错误消息？

* * *

**示例 1**：

```
==4253== Conditional jump or move depends on uninitialised value(s)
==4253==    at 0x408EB8E: vfprintf (vfprintf.c:1624)
==4253==    by 0x4093C2E: printf (printf.c:35)
==4253==    by 0x40624D2: (below main) (libc-start.c:226)
==4253==  Uninitialised value was created by a heap allocation
==4253==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==4253==    by 0x8048938: gk_StreamBufferNode_init (stream.c:101)
==4253==    by 0x8048D0D: gk_Stream_bufferWriteProc (stream.c:252)
==4253==    by 0x8048665: main (main.c:21) 
```

*代码*：

```
int gk_StreamBufferNode_init(gk_StreamBufferNode* node, int buffer_size,
                             gk_AllocProc malloc) {
    node->buffer = malloc(buffer_size);     // line 101
    if (node->buffer == NULL) {
        return GKIT_FAILEDALLOC;
    }
    node->next = NULL;
    return GKIT_NOERR;
} 
```

* * *

**示例 2**：

```
==4253== Conditional jump or move depends on uninitialised value(s)
==4253==    at 0x402DA39: memcpy (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==4253==    by 0x8048C6E: gk_Stream_bufferWriteProc (stream.c:230)
==4253==    by 0x8048665: main (main.c:21)
==4253==  Uninitialised value was created by a heap allocation
==4253==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==4253==    by 0x8048CE0: gk_Stream_bufferWriteProc (stream.c:248)
==4253==    by 0x8048665: main (main.c:21) 
```

*代码*：

```
 /* ... */
    int available_bytes = binfo->buffer_size - bnode->filled;
    int bytes_to_go = size * count;
    int offset = 0;
    int node_offset = 0;
    gk_StreamBufferNode* new_node;
    void* destination = NULL;
    void* source = NULL;

    while (bytes_to_go > 0) {
        destination = bnode->buffer + bnode->filled + node_offset;
        source = buffer + offset;
        if (available_bytes > bytes_to_go) {
            memcpy(destination, source, bytes_to_go);    // line 230
            bnode->filled += bytes_to_go;
            offset += bytes_to_go;
            node_offset = bytes_to_go;
            bytes_to_go = 0;
        }
        else {
            memcpy(destination, source, available_bytes);
            offset += available_bytes;
            node_offset = 0;
            bytes_to_go -= available_bytes;
            bnode->filled += available_bytes;

            #ifdef DEBUG
                assert(bnode->filled == bnode->buffer_size);
            #endif // DEBUG

            // Allocate a new buffer node.
            new_node = (gk_StreamBufferNode*) malloc(sizeof(gk_StreamBufferNode));    // line 248
            if (new_node == NULL) {
                return GKIT_FAILEDALLOC;
            }
            int success = gk_StreamBufferNode_init(new_node, binfo->buffer_size,
                                                   malloc);
            if (success <= GKIT_ERROR) {
                free(new_node);
                return GKIT_FAILEDALLOC;
            }
            bnode->next = new_node;
            bnode = new_node;
            available_bytes = binfo->buffer_size;
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T14:22:38.697

在这两种情况下，您只需分配内存而不对其进行初始化。最简单的方法是使用`calloc`而不是将`malloc`其归零。对于简单的情况，这*可能*是一个很好的策略，例如，如果您稍后使用 a`buffer`作为要打印的字符串。对于更复杂的用例，将值分配给各个字段，或者如果您使用 C99 从复合文字分配整个结构，则更好：

```
toto * t = malloc(sizeof(*t));    
*t = (toto){ 0 }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T14:07:59.043

您的代码不应期望未初始化的内存包含任何值，因此依赖于这些值的条件跳转会显示严重问题。

您应该初始化内存（到某个已知值，例如`0`），或者不引用它的内容，除非它们已经被初始化。

# php - 通过服务器下载文件给用户

> ID：11246345
> 
> 赞同：0
> 
> 时间：2012-06-28T14:01:07.420
> 
> 标签：php, curl, download

有一个文件位于服务器上。姑且称之为“电影”吧。

我网站的用户需要下载这部电影，但电影只能通过我网站的IP下载。

有没有办法将电影下载到我的服务器并从那里下载给用户？

我可以通过“put_content”来做到这一点，但我需要客户端在我的服务器下载文件时下载文件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:13:13.397

您可以使用[PHP 提供的标准包装器](http://php.net/manual/wrappers.php)*Docs[^(*并将其与*)](http://php.net/manual/wrappers.php)[`stream_copy_to_stream`^(*Docs 结合使用*)](http://php.net/stream_copy_to_stream)：*

 *示例/[演示](http://codepad.viper-7.com/JdkGAY)：

```
<?php
$url = 'http://example.com/some.url';
$src = fopen($url, 'r');
$dest = fopen('php://output', 'w');
$bytesCopied = stream_copy_to_stream($src, $dest); 
```

相关（到目前为止找不到更好的副本）：

*   [从外部链接远程下载文件到我的服务器 - 下载过早停止](https://stackoverflow.com/q/9730285/367456)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:04:23.457

看一下`readfile`功能。

[http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)*

# c# - 在静态函数中调用 Asp.net Application 对象

> ID：11246348
> 
> 赞同：0
> 
> 时间：2012-06-28T14:01:24.887
> 
> 标签：c#, asp.net

我有一个应用程序对象。

在 Global.asax 文件中我使用这个：

```
Application["obj"] = "test"; 
```

我如何在静态函数中调用它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T14:03:44.303

您可以使用[HttpContext.Current](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.current.aspx)属性。

```
HttpContext.Current.Application["obj"] = "test"; 
```

# git - 当我们重新定位时，git中的文件重命名检测

> ID：11246352
> 
> 赞同：1
> 
> 时间：2012-06-28T14:01:40.920
> 
> 标签：git, file-rename

让我们假设我有一个遥控器、一个 developer1 和一个 developer2。Developer1 将他的项目推送到远程。Developer2 从远程克隆项目，他重命名一个文件，并将其放在另一个文件夹中。然后他将项目推送到远程。然后 developer1 从远程获取项目。

在那种情况下，git的重命名机制会识别出我重命名的文件在另一个文件夹中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T20:53:59.020

Git 有一个非常好的机制来检测文件重命名/移动。如果文件的内容没有太大变化（我认为 90% 的内容需要相同），git 会将其检测为移动/重命名。这将在提交消息中显示如下：

```
file.txt -> folder/file.txt 
```

如果 git 没有检测到文件移动（因为大部分文件已更改），您可以通过执行以下操作告诉 git：

```
git mv file.txt folder/file.txt 
```

这样，您可以确保检测到移动文件。

无论哪种方式，当您拉入更改时，developer2 的每个操作都将对您的本地代码副本进行，包括重命名。

# ruby-on-rails - nil:NilClass 的未定义方法“<<”在合并实例变量时出现此错误

> ID：11246356
> 
> 赞同：1
> 
> 时间：2012-06-28T14:01:56.750
> 
> 标签：ruby-on-rails, ruby

在我的控制器中，我将两个不同实例变量的结果合并到一个实例变量中，但出现以下错误：

```
undefined method `<<' for nil:NilClass 
```

这是我的控制器代码

```
 @conversational = InterestType.where("institution_id = ? or global = ? and category_id = ?", current_user.profile.institution_id, true, 1).first

    @commercial = InterestType.where("institution_id = ? or global = ? and category_id = ?", current_user.profile.institution_id, true, 2).limit(17)

    @user_interest_types << @conversational

    @user_interest_types << @commercial 
```

我怎样才能克服这个错误或者什么是获得以下结果的好方法。

1.  我想先显示对话兴趣类型，然后再显示其他 17 种商业兴趣类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:07:19.923

如果你想追加到一个数组，你有两个选择，在这里你必须注意你要添加的内容：

```
# Define an empty array
@user_interest_types = [ ]

# Add a single element to an array
@user_interest_types << @conversational

# Append an array to an array
@user_interest_types += @commercial 
```

如果您同时使用`<<`这两种操作，您最终会将一个数组推*入*一个数组，并且生成的结构具有多个层。如果您调用`inspect`结果，您可以看到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:13:17.000

如果你想要一个嵌套数组：

```
@user_interest_types = [@conversational, @commercial]

# gives [it1, [it2, it3, it4]] 
```

或者，如果您更喜欢平面阵列：

```
@user_interest_types = [@conversational, *@commercial]

# gives [it1, it2, it3, it4] 
```

假设`@conversational = it1`和`@commercial = [it2, it3, it4]`

# colors - 如何在 ImageMagick 中更改亮度色调并部分去饱和图像？

> ID：11246363
> 
> 赞同：0
> 
> 时间：2012-06-28T14:02:37.457
> 
> 标签：colors, imagemagick, gimp, hsv

我有一个PNG（除了背景中的白点和透明度）是非常直的蓝色。

我想使用 ImageMagick 的转换来对其进行部分去饱和，这样我就可以在一个极端的情况下创建原始蓝色的图像，并定期去饱和（我知道颜色理论允许很多去饱和，但我只是在寻找 GIMP式去饱和。）

我还想使图像的颜色变亮或变暗。

最后，我想将大部分图像的色调更改为色调范围内的任何内容。（图像是饱和的蓝色。）

我可以在 GIMP 中完成所有这些工作，但我正在寻找一种方法来自动化该过程。我也想缩小尺寸，但是从文档中可以清楚地看到这一点。

我该如何进行这些调整？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-19T17:15:19.170

这可能会有所帮助。它使用这张图片作为输入——我不是很艺术，是对你的泪珠图片描述的一个相当字面解释......

![在此处输入图像描述](../Images/82b564d21206f5b8552c6029d24900ef.png)

```
#!/bin/bash
for hue in $(seq 0 40 160); do
   for sat in $(seq 20 40 100); do
      convert -label "Sat:$sat,Hue:$hue" input.png -modulate 100,$sat,$hue  miff:-
   done
done | montage - -frame 5 -tile 3x m.png 
```

![在此处输入图像描述](../Images/8395acbf34d52c484cbb2bdbc1059e7b.png)

# c# - C# 中 TripleDES CFB 上的 16 位块大小

> ID：11246364
> 
> 赞同：0
> 
> 时间：2012-06-28T14:02:44.197
> 
> 标签：c#, encryption, tripledes

我正在用 C# 编写一个应用程序，它需要解密一些由一些旧软件加密的数据。遗留代码以 8 个为一组循环遍历未加密的字节，并在 CBC 模式下通过 TripleDES 对它们进行加密。然后，它使用 TripleDES CFB 处理剩余字节，使用剩余量的块大小（在此特定情况下为 2）。

我可以使用 System.Security.Cryptography.TripleDES 在 C# 中对第一阶段的数据进行解密，因为它允许块大小为 64 位（8 字节）。然而，TripleDES 类*不允许*16 位的块大小。以下代码会引发错误，提示“指定的块大小对此算法无效”：

```
TripleDES provider = TripleDESCryptoServiceProvider.Create();
provider.Mode = CipherMode.CFB;
provider.BlockSize = 16; // exception thrown here 
```

我假设这是由于小块大小的弱性质而存在的。不幸的是，这就是我所坚持的。是否有任何免费的第三方库可能支持 TripleDES/CFB 的 16 位块大小？或者我可以在这个数据集上使用什么技巧来完成这项工作？我检查了 DES 类，看它是否支持 16 位块大小，但没有骰子......

我不是密码学专家，所以如果我最终不得不为 TripleDES 编写自己的代码（超过 2 个字节......grrr），任何关于算法细节的直截了当的文章都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T23:38:47.440

一种可能性是明文的最后两个字节与最终加密密码块的两个字节简单地异或，其余部分被丢弃。使用 .NET 类来获得这种行为应该足够简单。

1.  将块大小设置为 64 位。
2.  将模式设置为 CFB。
3.  将反馈大小设置为 64 位
4.  将输入填充为 8 个字节的倍数。使用什么填充并不重要，因为您将丢弃额外的数据。
5.  变换方块。
6.  扔掉残留物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:14:33.597

虽然 MSDN 说您可以通过该属性设置块大小，但我认为不可能为 3DES 设置 16 位块大小，因为创建 DES（和 3DES）仅使用 64 位块。

我猜想遗留软件使用一些填充方案来加密最后一个块。通常它用随机值填充剩余的字节，并将这些不需要的字节数保存到最后一个字节。

# c# - CustomTaskPane 不会完全关闭

> ID：11246367
> 
> 赞同：0
> 
> 时间：2012-06-28T14:02:49.907
> 
> 标签：c#, vsto, customtaskpane

当我关闭 CustomTaskPane 并更改工作表时，似乎没有完全删除窗格。并且 CustomTaskPane 大小的 Worksheet 区域变为非活动状态。

这是我在代码中的表现：

```
ctp.Visible = false; 
```

并在`PaneVisibleChanged event`：

```
 private void PaneVisibleChanged(object sender, EventArgs e)
    {
        CustomTaskPane pane = (CustomTaskPane)sender;
        if (!pane.Visible)
        {
            pane.Control.Dispose();
            CustomTaskPanes.Remove(pane);
        }
    } 
```

观察：当我有两个并排的 CustomTaskPanes 并且我正在关闭一个时，就会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:26:06.543

我在 VSTO Excel 2010 中遇到了一个自定义任务窗格未正确处理的类似问题。我正在使用的尝试解决该问题的代码很简单：

```
var taskbar = Globals.ThisWorkbook.Application.CommandBars["Task Pane"];
taskbar.Reset(); 
```

侧面板的可见事件似乎对我不起作用。我通常像这样显示或隐藏任务窗格：

```
Globals.ThisWorkbook.Application.CommandBars["Task Pane"].Visible = false; 
```

# qt - 无法安装 QtMobility [Windows 64 位]

> ID：11246368
> 
> 赞同：1
> 
> 时间：2012-06-28T14:02:53.153
> 
> 标签：qt, installation, nokia, qt-mobility

我已经下载并安装了 QT SDK 并下载了 QT Mobility 源代码。

按照提供的说明，我通过 Visual Studio 命令提示符 (2010) 导航到我的 QtMobility 目录...注意，这是带有 bin、插件、示例等文件夹的 QtMobility 目录。

```
D:\
cd D:\Files\Downloads\QtMobility
configure 
```

不管我是否给了 configure 一个 -prefix 参数，都会显示以下输出：

```
Checking available Qt
4.8.2
Checking make
... Unknown target environment .
Cannot find 'nmake', 'mingw32-make' or 'make' in your PATH
Aborting. 
```

当然，我后来去看看我的电脑PATH里有没有nmake：目录添加如下：

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin 
```

我去 CMD 并输入“nmake /？” 接收正确的输出。

我究竟做错了什么？当我尝试在 QTMobility 目录中简单地运行 nmake 时，它​​显示：

```
NMAKE : fatal error U1064: MAKEFILE not found and no target specified
Stop. 
```

请帮忙！谢谢你。:) 我将继续尝试自己调试...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T21:24:33.043

我想这已经很晚了，但是您可以简单地运行 Visual Studio 命令提示符，因为它具有特定的环境。预设变量以查找 nmake 等。

# java - DAOFactory 自动类型铸造。爪哇

> ID：11246370
> 
> 赞同：2
> 
> 时间：2012-06-28T14:03:03.900
> 
> 标签：java

我有一个 DAOFactory，它返回给我一个特定的 dao

```
public class DAOFactory {

public static final int DAO1 = 1;
public static final int DAO2 = 2;

public static Object getDao(int dao) {
        switch (dao) {
            case DAO1:
                return new Dao1();
            case DAO2:
                return new Dao2();
        }
        return null;
    }
} 
```

道是子

```
abstract class GenericDao<E, ID extends Serializable> implements
        GenericDaoInterface<E, ID> 
```

所以它看起来像：

```
public class Dao1 extends GenericDao<Dao1, Integer>{
....
} 
```

如果我创造新的道。我必须进行类型转换。

```
Dao1 dao = (Dao1) DAOFactory.getDao(DAOFactory.DAO1); 
```

是否可以进行自动类型转换，或者最好在 DAOFactory 中创建方法来调用特定的 dao ？例如。`public static Dao1 getDao1()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:27:58.313

创建一个接口 IGenericDao 并在 GenericDao 上实现它，工厂必须返回 IGenericDao 接口，通过这种方式，您可以使用所有 Dao 的泛型行为或在需要时强制转换为特定类型，使用 Class 而不是工厂参数的 int方法。

*公共静态 IGenericDao getDao(Class)*

只使用一种方法的另一个原因是，在未来的实现中，您可以使用反射来实现工厂并返回正确的类型，并且您不需要更改工厂的所有客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:18:02.707

您可以将“int”参数更改为“Class”参数，然后使用泛型返回该类的某些内容。
但这仅在有时您的代码不知道它将使用哪个 DAO 类时才有用，例如一些需要从工厂获取任意 DAO 子类型的通用代码。

如果您的代码非常具体，那么您可以创建您提到的那些特定方法。

恕我直言，人们对仿制药很感兴趣。
有时泛型代码看起来很糟糕，一两个类型转换很好，而且通常更可取。正如我所说，恕我直言。

# xtend - 访问类类型

> ID：11246374
> 
> 赞同：3
> 
> 时间：2012-06-28T14:03:20.100
> 
> 标签：xtend

我正在尝试将以下 java 代码段转换为 Xtend，但我无法做到。我无法访问静态属性“类”。

```
public class SyncService{
  private static final String LOGT = SyncService.class.getSimpleName();
} 
```

我尝试了以下方法，

```
class SyncService {
    val LOGT = SyncService.class.getSimpleName();
}
class SyncService {
    val LOGT = SyncService::class.getSimpleName();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:07:37.153

根据[文档](http://www.eclipse.org/xtend/documentation.html#typeLiteral)，它是

```
SyncService.simpleName 
```

或使用旧语法：

```
typeof(SyncService).simpleName 
```

# android - CursorAdapter 在初始化时使用光标后是否会将光标重置到第一个位置？

> ID：11246388
> 
> 赞同：0
> 
> 时间：2012-06-28T14:03:54.623
> 
> 标签：android, cursor, android-cursoradapter

基本上我没想到这会起作用，但它确实可以正常工作：

```
 list.setAdapter(new MyCursorAdapter(this, cursor));     
    setItemsOnTheMap(cursor); 
```

小部件 Map 和 List 都正确地填充了项目。我认为我的 setItemsOnTheMap 私有方法会收到一个指向结果集最后一项的光标。

# tomcat - 必须定期清除Tomcat工作目录

> ID：11246392
> 
> 赞同：1
> 
> 时间：2012-06-28T14:04:09.580
> 
> 标签：tomcat, tomcat7

我们的 Tomcat 有一个问题，我的同事都无法真正解释。我们在 linux 计算机上有一个 tomcat *（版本 7.0.26） 。*部署是通过**爆炸式的战争**完成的——我们的类是 jar 打包的，其余的直接进入 WEB-INF 和 META-INF）。

此外，还有一个**CMS 服务器**可以生成 JSP 文件，这些文件会**定期部署**到 tomcat Web 应用程序中。

经过一段时间的热交换、创建和删除 JSP 文件后，tomcat 做了一些奇怪的事情。随机发出404错误或发布旧版本，有时是最新版本等等。

为了解决这个问题，我们必须不时**清除 $CATALINA_HOME/work 。**tomcat 在开发模式下运行，这意味着它会经常查找 JSP 文件修改，afaik。但这在这里似乎效果不佳。删除工作目录后，一切正常，立即。

有谁知道，如何摆脱这种行为？是否需要设置任何标志以避免这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T20:25:58.027

作为一种解决方法，我会使用 Cronjob 为我清除它，并将错误发布到 apache

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:09:11.747

查看[Jasper JSP Howto](http://tomcat.apache.org/tomcat-7.0-doc/jasper-howto.html)`development`上的设置和其他相关设置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-08T09:33:07.863

仅供参考，我遇到了同样的问题，在这里发布了我的答案 在[带有 java.lang.NoClassDefFoundError 的 servlet 上出现严重异常](https://stackoverflow.com/questions/42653714/severe-exception-on-servlet-with-java-lang-noclassdeffounderror)

在您的情况下，只需编写一个脚本，每次热交换新文件时删除工作目录。在 tomcat 配置参考中，它写成黑白[tomcat8 配置参考](https://tomcat.apache.org/tomcat-8.0-doc/config/host.html)

# c++ - 获取指向 boost::any 内容的 void* 指针

> ID：11246394
> 
> 赞同：7
> 
> 时间：2012-06-28T14:04:14.167
> 
> 标签：c++, boost, boost-any

我正在使用一个外部库，它有一个接受 void* 的方法

我希望这个 void* 指向一个包含在 boost::any 对象中的对象。

**是否可以获取 boost::any 对象的内容地址？**

我正在尝试玩 myAny.content 但到目前为止还没有运气！我希望 dynamic_cast 或 unsafe_any_cast 的某种组合能给我我需要的东西。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T14:09:13.677

您可以使用`boost::any_cast`来获取指向基础类型的指针（前提是您在编译时知道它）。

```
boost::any any_i(5);

int* pi = boost::any_cast<int>(&any_i);
*pi = 6;

void* vpi = pi; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T14:44:53.873

不幸的是，这是不可能的；`boost::any_cast`如果类型与包含的类型不同，将拒绝强制转换。

如果您愿意使用不受支持的内部 hack，则[当前版本的标头](http://www.boost.org/doc/libs/1_55_0/boost/any.hpp)有一个未记录且不受支持的函数`boost::unsafe_any_cast`（顾名思义），它绕过了以下执行的类型检查`boost::any_cast`：

```
boost::any any_value(value);
void *content = boost::unsafe_any_cast<void *>(&any_value); 
```

标题有这样的说法`unsafe_any_cast`：

```
// Note: The "unsafe" versions of any_cast are not part of the
// public interface and may be removed at any time. They are
// required where we know what type is stored in the any and can't
// use typeid() comparison, e.g., when our types may travel across
// different shared libraries. 
```

# ios - 如果弹出框作为模型呈现，UITableViewController 将失去滚动功能

> ID：11246395
> 
> 赞同：2
> 
> 时间：2012-06-28T14:04:16.873
> 
> 标签：ios, cocoa-touch, scroll, uitableview, popover

仅当弹出框控制器出现键盘时，模型表视图（UITableViewController）不滚动表的任何原因？

我基本上有一个带有按钮的弹出菜单，该按钮可以全屏打开模型 Tableview，点击时，表格底部行内的文本字段会被键盘隐藏。

这与您必须手动管理滚动的 UIView 或 Scrollview 不同。UITableViewController 内置了这个功能，如果在层次结构的某个地方有一个弹出控制器，它就不起作用。

示例项目：www.geoffcoope.co.uk/ios/testTVCScrolling.zip

谢谢杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:35:47.497

您的 UITableView 正在将其委托方法请求发送到弹出框的视图控制器而不是您的 UITableView 控制器，或者您的 UITableView 的委托设置为 nil。查看您在哪里实例化 TableView 并确保您正确设置了委托属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T21:22:11.380

我想您的问题在于情节提要的 segue 显示弹出框控制器的方式。看起来这是一个普遍的问题。

因此，解决它的最简单方法是将模态窗口的创建移动到代码中。像这样的东西：

在你的`ViewController.h`写作中

```
@property (strong) UIPopoverController * popoverController;
- (void) showNavigationController; 
```

在你的`ViewController.m`写作中

```
@synthesize popoverController;

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    [super prepareForSegue:segue sender:sender];
    if ([segue isKindOfClass:[UIStoryboardPopoverSegue class]]){
        if (popoverController) [popoverController dismissPopoverAnimated:NO];
        UIStoryboardPopoverSegue * popoverSegue = (UIStoryboardPopoverSegue *) segue;
        popoverController = popoverSegue.popoverController;
    }
}

- (void) showNavigationController
{
    [popoverController dismissPopoverAnimated:NO];
    popoverController = nil;

    UIStoryboard *ub = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

    UIViewController *controller = [ub instantiateViewControllerWithIdentifier:@"navigationController"];
    [self presentModalViewController:controller animated:YES];
} 
```

然后在您的 MainStoryboard 中`navigationController`为您的导航控制器设置标识符，而不是在“显示表”按钮上设置一个“内部修饰”代表。该委托将执行您的`showNavigationController`方法`ViewController`（使用 a `NSNotificationCenter`，例如）

# asp.net-mvc - 基于会话变量和自定义安全逻辑的MVC缓存

> ID：11246396
> 
> 赞同：1
> 
> 时间：2012-06-28T14:04:20.260
> 
> 标签：asp.net-mvc, model-view-controller, caching

我有一个使用 JQuery 显示许多图表和表格的应用程序。其中一些图表基于会话中保存的变量（例如，用户在另一个页面中添加了一个值，而在下一页我正在生成一个图表，因此用户请求不发送任何参数）

我在网上环顾四周，大多数解决方案都基于

```
 [OutputCache(Duration=60, VaryByParam="someParm")] 
```

问题是我的大部分请求都不发送参数，它们只是使用会话中的值。

有没有办法为这些类型的请求启用缓存？

**编辑：**我们有一个复杂的安全要求，我们不能使用 MVC 的默认授权属性。我们必须根据当前用户 + 发送给动作的参数来编写逻辑，因此动作内部的方法决定要么继续请求，要么不返回任何内容。这使得缓存变得非常困难，因为在执行 OutputCache 时我们只有参数，但上下文中的标识对象是空的。结果，如果一个具有管理员权限的用户发送一个请求 a 和 b，然后一个具有最低权限的用户发送请求 a 和 b，第二个人将看到结果，因为操作没有运行，但是值来自缓存被使用！

为了解决这个问题，我使用了 getvarybyCustome。这个函数所做的只是返回用户的组名，这有助于创建一个更复杂的密钥。上一个示例中具有最低权限的人将具有与管理员的请求缓存键 (a,b,group_admin) 不同的缓存键 (a,b,group_less)。但是，为每个请求获取组名也很昂贵，因此我使用 Cache 对象来缓存用户组，因此在会话开始时，会从 AD 查询用户组并保存到缓存中，因此对于他/她以后的请求，他的组名是从缓存中检索的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:09:54.557

如果你不能实现的东西，`VaryByParam`那么你可以尝试`VaryByCustom`。[在此处](http://visitmix.com/writings/using-varybycustom-with-outputcache-in-asp-net-mvc-to-support-caching-for-logged-in-users)查看示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:14:45.507

您可以对此请求进行重定向并将其发送到发送会话参数的新控制器方法，通过这种方式，在未来的实现中，您可能使用查询字符串参数而不是会话，并且您的代码也可以工作。

您可以在所有控制器的基类上创建一个转换此会话参数的方法，以便编写一次转换。

# fonts - 用于将 postscript 字体转换为 opentype/truetype 字体的 Java 库

> ID：11246399
> 
> 赞同：2
> 
> 时间：2012-06-28T14:04:23.737
> 
> 标签：fonts, converter, java

我正在寻找一个基于 java 的开源库，它可以将 postscript 字体转换为 opentype 和/或 truetype 字体。我用谷歌做了很多搜索，但还没有找到解决方案。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T02:31:00.520

你可以看看 sfntly ( [http://code.google.com/p/sfntly/](http://code.google.com/p/sfntly/) ):

来自该站点：sfntly 是一个 Java 和 C++ 库，用于使用、编辑和创建基于 sfnt 容器的字体（例如 OpenType、TrueType）。[...] sfntly 的基本功能是读取、编辑和写入 sfnt 容器字体。使用 sfnt 容器的字体包括 OpenType、TrueType、AAT/GX 和 Graphite。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-27T19:27:59.807

sfntly（现在在[https://github.com/googlei18n/sfntly](https://github.com/googlei18n/sfntly)）*不会*将 Postscript 格式的字体文件转换为 TrueType/OpenType 格式的字体。（可以使用内部 Postscript CFF 曲线处理一些 OpenType 字体 - 但这些字体已经是 OpenType 文件格式......）

FontForge 是一个开源字体编辑器，可以加载 PostScript Type-1 或 CFF 字体文件，并将编写 TrueType 或 OpenType 格式的字体文件。定义每个字形的曲线可以（或多或少）从 Postscript 格式（三次贝塞尔曲线）转换为 TrueType 格式（二次贝塞尔曲线）。

然而，用于以中小磅值渲染字体的“提示”数据则完全不同。True/OpenType 和 PostScript 字形格式使用完全不同的提示数据系统，并且 (AFAIK) 没有在格式之间转换提示数据的好方法。因此，典型的 PS -> TTF 字体转换将转换曲线，然后运行自动提示生成过程（我相信，这是 FontForge 中的一个功能）为 TTF 字形创建新提示。

# c# - 循环内的返回值未显示

> ID：11246402
> 
> 赞同：0
> 
> 时间：2012-06-28T14:04:30.057
> 
> 标签：c#, loops, if-statement, return

早上好，简单的愚蠢问题。我发现有类似问题的帖子，但通读后并没有解决我的错误。

[For 循环的返回值](https://stackoverflow.com/questions/7560505/return-value-from-for-loop)

[无法从方法内的 foreach 循环中获取返回值](https://stackoverflow.com/questions/3044833/cant-get-a-return-value-from-a-foreach-loop-inside-a-method)

方法：meth1 meth2 ect....都返回一个值，但目前我收到错误

“错误 1 ​​'Proj5.Program.meth1(int)': 并非所有代码路径都返回一个值”对于每个 meth 方法。

我的逻辑猜测是它没有看到循环中的值？？...

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Proj5
{
class Program
{
    static void Main()
    {
        for (int i = 1; i < 101; i++)
        {
            if (i == 3 || 0 == (i % 3) || 0 == (i % 5) || i == 5)
            {
                Console.Write(meth1(i));
                Console.Write(meth2(i));
                Console.Write(meth3(i));
                Console.Write(meth4(i));
            }
            else
            {
                Console.Write(TheInt(i));
            }
        }
        Console.ReadLine();
    }

    static string meth1(int i)
    {
        string f = "fuzz";

        if (i == 3)
        {
            return f;
        }
    }
    static string meth2(int i)
    {
        string f = "fuzz";

        if (0 == (i % 3))
        {
            return f;
        }
    }
    static string meth3(int i)
    {
        string b = "buzz";

        if (i == 5)
        {
            return b;
        }

    }
    static string meth4(int i)
    {
        string b = "buzz";

        if (0 == (i % 5))
        {
            return b;
        }
    }
    static int TheInt(int i)
    {
        return i;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:05:55.350

你说你的方法应该返回一个字符串，但是如果 i<>3，你没有说应该返回什么。顺便说一下，方法 2 和 3 也有同样的问题（还有 4 ）。我不会谈论 TheInt 方法，这很有趣；）

更正

```
static string meth1(int i)
    {
        string f = "fuzz";

        if (i == 3)
        {
            return f;
        }
        return null;//add a "default" return, null or string.Empty
    } 
```

或更短

```
static string meth1(int i) {
    return (i == 3) ? "fuzz" : null/*or string.Empty*/;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:06:35.633

只有当 if 被评估为 true 时，您的函数才会返回。在 if 之外添加 return 语句，或添加 else 语句，您的代码将编译并工作。

```
static string meth2(int i)
{
    string f = "fuzz";

    if (0 == (i % 3))
    {
        return f;
    }
    else
      return "";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:07:41.213

当您将方法声明为返回值时（如 meth1 等），您应该遵守此声明。

如果不满足内部条件，您的方法不会返回任何内容。编译器注意到这一点并向您抱怨

您应该确保每个可能的执行路径都会从被调用的方法中返回一些内容给调用者。

例如

```
static string meth3(int i)     
{         
    string b = "buzz";          
    if (i == 5)         
    {             
        return b;         
    }      
    // What if the code reaches this point?
    // What do you return to the caller?
    return string.Empty; // or whatever you decide as correct default for this method
} 
```

# c# - asp.net 自定义模块没有被加载？

> ID：11246407
> 
> 赞同：1
> 
> 时间：2012-06-28T14:04:47.883
> 
> 标签：c#, asp.net, asp.net-mvc, module, httpmodule

我根据两篇文章创建了一个自定义模块：

[http://community.devexpress.com/blogs/paulk/archive/2009/03/30/implementing-an-ihttpmodule.aspx](http://community.devexpress.com/blogs/paulk/archive/2009/03/30/implementing-an-ihttpmodule.aspx)

该模块基于：

[如何在页脚中显示生成页面所需的持续时间？](https://stackoverflow.com/questions/3035584/how-do-i-display-the-duration-it-took-to-generate-a-page-in-a-pages-footer)

我添加了以下类：

```
public class PerformanceMonitorModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.PreRequestHandlerExecute += delegate(object sender, EventArgs e)
        {
            //Set Page Timer Star
            HttpContext requestContext = ((HttpApplication)sender).Context;
            Stopwatch timer = new Stopwatch();
            requestContext.Items["Timer"] = timer;
            timer.Start();
        };
        context.PostRequestHandlerExecute += delegate(object sender, EventArgs e)
        {

            HttpContext httpContext = ((HttpApplication)sender).Context;
            HttpResponse response = httpContext.Response;
            Stopwatch timer = (Stopwatch)httpContext.Items["Timer"];
            timer.Stop();

            // Don't interfere with non-HTML responses
            if (response.ContentType == "text/html")
            {
                double seconds = (double)timer.ElapsedTicks / Stopwatch.Frequency;
                string result_time = string.Format("{0:F4} sec ", seconds);
                RenderQueriesToResponse(response, result_time);
            }
        };
    }
    void RenderQueriesToResponse(HttpResponse response, string result_time)
    {
        response.Write("<div style=\"margin: 5px; background-color: #FFFF00\"");
        response.Write(string.Format("<b>Page Generated in " + result_time));
        response.Write("</div>");
    }
    public void Dispose() { /* Not needed */ }
} // End of PerformanceMonitorModule 
```

以下是我的 web.config：

```
<system.web>
  ...
  <httpModules>
    <add name="PerformanceMonitorModule" type="PerformanceMonitorModule"/>
  </httpModules>
</system.web> 
```

我在`PerformanceMonitorModule`类 init 方法中设置了断点，它永远不会被调用。

几点注意事项：

*   该网站在 HTTPS 上运行。我不认为这会有所作为吗？
*   该网站在 Azure 计算机模拟器中运行。不确定这是否会导致任何问题。
*   我尝试将程序集限定名称（MySite.Website.Business.Modules.PerformanceMonitorModule、MySite.Website、Version=1.0.0.0、Culture=neutral、PublicKeyToken=null）。

我不确定还有什么方法可以让这个模块加载？

# iphone - 从视图控制器类中的某些类调用方法

> ID：11246416
> 
> 赞同：1
> 
> 时间：2012-06-28T14:04:56.383
> 
> 标签：iphone, objective-c, ios, c, cocoa-touch

好吧，假设我有A类...

**CLASS A**有一个方法，一旦用户进行应用内购买，就会调用该方法。

```
-(void) didMakePurchase { ...  } 
```

**(视图控制器) CLASS B**是当前场景的视图控制器。BI 类内部有一个创建 UIAlertView 的函数，该函数基本上感谢用户进行购买。

```
-(void) createAlertViewAfterSuccessfulPurchase {  ...create UIAlertView... } 
```

**目标/问题：**我希望能够在 B 类中的 didMakePuchase 方法中调用 createAlertViewAfterSuccessfulPurchase 方法。

**我尝试过什么：**我尝试导入 A 类并在 A 类中创建 B 类的对象，这样我就可以调用该方法，但它不起作用（我的猜测是因为 B 类是一个视图控制器）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:06:17.893

在 A 类中发布一个`NSNotification`，在 B 类中添加一个观察者到这个通知

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:07:23.810

解决方案：使 B 类成为 A 类的代表，然后执行以下操作：

```
[myDelegate createAlertViewAfterSuccessfulPurchase:myParams] 
```

声明委托：

```
In class A:

.h

@protocol myProtocol;

@interface ClassA : UIView
{

}

@property (nonatomic, assign) id<myProtocol> delegate;

@protocol myProtocol <NSObject>

- (void)createAlertViewAfterSuccessfulPurchase;

@end

.m

self.delegate = classBInstance.

to call:

[delegate createAlertViewAfterSuccessfulPurchase]

in Class B:

.h

@interface ClassB : NSObject <myProtocol>

.m

implementation of:

-(void) createAlertViewAfterSuccessfulPurchase {  ...create UIAlertView... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:05:33.793

检查此解决方案，因为最简单的方法是使用`NSNotificationCenter`.

当前的示例在这里*（不要让标题让您感到困惑，这与代表无关）*

[代表 - 如何使用？](https://stackoverflow.com/questions/11229830/delegate-how-to-use/11230990#11230990)

但是如果两个类之间有联系，我的意思是，你的**Class B**创建了**Class A**，还有另一种方法，因为你也可以像这样使用这种情况下的块：

在您的**ClassB.m**文件中：

```
- (void)startPurchase {
    [classAinstance didMakePurchaseWithFinishedBlock:^{
        UIAlertView *_alertView = [[UIAlertView alloc] initWithTitle:@"Title" message:@"Message" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
        [_alertView show];
    }];
} 
```

在您的**ClassA.m**文件中：

```
-(void) didMakePurchaseWithFinishedBlock:(void (^)())finishedBlock { 
    ...

    finishedBlock();
} 
```

# c - 是否可以制作一个停靠在屏幕顶部的应用程序？

> ID：11246417
> 
> 赞同：1
> 
> 时间：2012-06-28T14:04:58.707
> 
> 标签：c, vb.net, visual-studio

使用（我认为）Visual Basic / Studio 我想在我的屏幕顶部制作一个显示网页的栏。

在我开始尝试编写代码之前，这个概念是否可行（栏会停靠在屏幕顶部，其他窗口会改变以适应它。）

谢谢 - 瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:13:36.467

当然，您可能需要将其创建为 Windows Shell 插件。

# c++ - 兰德生成相同的数字

> ID：11246423
> 
> 赞同：2
> 
> 时间：2012-06-28T14:05:25.917
> 
> 标签：c++, random

我制作的小游戏有问题。

```
#include "stdafx.h"
#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

int main()
{
int span = 100;
srand(time(0));
int TheNumber = static_cast<double> (rand()) /RAND_MAX * (span -1) +1;
cout << "You need to guess the number between 1 and " << span << endl;
int mynumber;
int numberofAttempts = 0;

do {
    cout << ++numberofAttempts <<" Attempt: ";
    cin >> mynumber;
    if (mynumber > TheNumber)
        cout <<"Lower!" << endl;
    else if (mynumber < TheNumber)
        cout <<"Higher!" << endl;
} while (mynumber != TheNumber);

cout << "SUCESS!!!" << endl;
return 0;
} 
```

游戏应该生成一个介于 0-100 之间的随机数，你应该猜到它。在运行此代码 15-20 次后，相同的数字甚至产生了 8 次（在我的情况下为 2）。

我知道没有绝对的随机数，它使用一些数学公式或其他东西来获得一个。我知道使用`srand(time(0))`使它依赖于当前时间。但是我如何让它“更”随机，因为我不希望发生我上面提到的事情。

我第一次运行它的结果是 11，再次运行后（猜对了数字之后），它仍然是 11，即使时间改变了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:15:33.193

**[补充1]**

如果您确实希望研究更好的随机数生成，那么这是一个很好的算法：

[http://en.wikipedia.org/wiki/Mersenne_twister](http://en.wikipedia.org/wiki/Mersenne_twister)

请记住，任何“计算机生成”（即数学生成）随机数都只是伪随机数。伪随机意味着虽然算法的输出看起来具有正态分布，但如果知道输入种子，它们是真正确定的。真正的随机数是完全不确定的。

**[ORIGINAL]** 只需尝试以下行之一：

```
rand() % (span + 1);  // This will give 0 - 100
rand() % span;        // this will give 0 - 99
rand() % span + 1;    // This will give 1 - 100 
```

代替：

```
(rand()) /RAND_MAX * (span -1) +1 
```

另外，不要将结果转换为双精度，然后放入 int。

也看这里：

[http://www.cplusplus.com/reference/clibrary/cstdlib/rand/](http://www.cplusplus.com/reference/clibrary/cstdlib/rand/)

回应评论！！！如果您使用：

```
rand() / (span + 1); 
```

那么为了获得 0 到 100 之间的值，rand 的输出值确实必须在 0 到 (100 * 100) 之间，并且必须保证这种性质。这是因为简单的划分。当 rand() 产生 101 - 201 时，值 1 将基本上弹出，当 rand() 输出 202 - 302 的值时，2 将从除法中弹出，等等......

在这种情况下，您可能能够在 100 * 100 仅 10000 处侥幸逃脱，并且在 32 位空间中肯定有比这更大的整数，但通常进行除法不会让您利用提供完整的数字空间！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:38:10.240

有很多问题`rand()`。您遇到了其中一个，即前几个值不是“随机的”。如果必须使用`rand()`，最好丢弃前四个或结果`rand()`。

```
srand (time(0));
rand();
rand();
rand();
rand(); 
```

另一个问题`rand()`是，众所周知，低位是非随机的，即使在上述破解之后也是如此。在某些系统上，最低位交替 0,1,0,1,0,1,... 使用高位总是更好，例如使用商而不是余数。

其他问题：非随机性（大多数实现都`rand()`没有通过随机性测试）和短周期。对于所有这些问题，最好的建议是使用除`rand()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:11:38.920

首先，`rand() / RAND_MAX`不给出 0 和 1 之间的数字，它返回 0。这是因为 RAND_MAX 在 rand() 的结果中适合 0 次。两者都是整数，因此整数除法不会返回浮点数。

其次，RAND_MAX 可能与 INT 大小相同。将 RAND_MAX 乘以任何东西都会产生溢出。

# php - 记录未按升序插入

> ID：11246424
> 
> 赞同：1
> 
> 时间：2012-06-28T14:05:27.143
> 
> 标签：php, mysql

我有一个奇怪的问题。我有一个带有 PHP 代码的 HTML 页面，可将数据插入 MySQL 数据库。数据被保存到数据库中，没有任何错误，但顺序不正确。

这是一个屏幕截图。右侧的表格显示现有记录。前 2 条记录显示正确。 ![在此处输入图像描述](../Images/a933df3cd33beecf26fc1963bf94eecb.png) 但是当我保存更多记录时，它会显示为这样。 ![在此处输入图像描述](../Images/0f9325194af16675f32f5e0d12338127.png) ![在此处输入图像描述](../Images/21c4cceb8ba392ba18f1c9bc8b4281e2.png)

即使在 MySQL 表中，记录也是以这种方式插入的。

![在此处输入图像描述](../Images/20ffd4d89faaeaf286f8955bdbfe16b6.png)

我不确定问题到底出在哪里，所以我展示了下面页面的整个代码。我已经评论了每个代码块的作用。如果您需要我澄清一些事情，请发表评论。

**位置 ID**是自动生成的代码。

```
<html>
<head>
<script language="javascript">
function SelectAll(source)
{   //The code for the 'Select All' checkbox
    checkboxes = document.getElementsByTagName("input");
    for(var i in checkboxes)
    {
        if(checkboxes[i].type == 'checkbox')
        {
            checkboxes[i].checked = source.checked;
        }
    }
}
</script>
</head>
<body>

<?php
//Database connection initialization
require_once("db_handler.php");

$conn = iniCon();
$db = selectDB($conn);

/* Generating the new Location ID */
$query = "SELECT LID FROM locations ORDER BY LID DESC LIMIT 1";
$result = mysql_query($query, $conn);
$row = mysql_fetch_array($result);
$last_id = $row['LID'];

$id_letter = substr($last_id, 0, 1);
$id_num = substr($last_id, 1) + 1;
$id_num = str_pad($id_num, 3, "0", STR_PAD_LEFT);
//$id_num = sprintf("%03d", $id_num);
$new_id = $id_letter . $id_num;

/* Displaying the exsisting locations */        
$query = "SELECT * FROM locations";
$result = mysql_query($query, $conn);

$count = mysql_num_rows($result);

?>

<! The table which displays the existing records >
<div id="display">
<b>Locations</b><br/><br/>
<form name="displayLocs" action="<?php echo $PHP_SELF; ?>" method="post" >
<table border="1">
    <tr>
        <th>Location ID</th>
        <th>Code</th>
        <th>Location</th>
        <th><i>Delete</i></th>
    </tr>
    <?php
    while($row = mysql_fetch_array($result))
    { 
    ?>
    <tr>
        <td align="center"><? echo $row["LID"]; ?></td>
        <td align="center"><? echo $row["Code"]; ?></td>
        <td><? echo $row["Location"]; ?></td>
        <td align="center"><input type="checkbox" name="checkbox[]" value="<? echo $row["LID"]; ?>" /></td>
    </tr>
    <?php
    }
    ?>
</table>

<br/>
    <div id="buttons2">
          <input type="checkbox" onclick="SelectAll(this)" />Select All <input type="reset" value="Clear" /> <input type="submit" value="Delete" name="deletebtn" />
    </div>
</form>
</div>

<! New record saving area >
<b id="loc_caption_1">Enter a new location</b>
<div id="loca">
    <form name="locForm" action="<?php echo $PHP_SELF; ?>" method="post" >
        <table width="300" border="0">
          <tr>
            <td>Location ID</td>
            <td><input type="text" name="lid" readonly="readonly" value="<?php echo $new_id; ?>" style="text-align:right" /></td>
          </tr>
          <tr>
            <td>Code</td>
            <td><input type="text" name="code" style="text-align:right" /></td>
          </tr>
          <tr>
            <td>Location</td>
            <td><input type="text" name="loc" style="text-align:right" /></td>
          </tr>
        </table>
</div>
<br/>
<div id="buttons">
    <input type="reset" value="Clear" /> <input type="submit" value="Save" name="savebtn" />
</div>
    </form>

<?php
//Saving record
if(isset($_POST["savebtn"]))
{
    $id = $_POST["lid"];
    $code = $_POST["code"];
    $location = $_POST["loc"];

    $query = "INSERT INTO locations(LID, Code, Location) VALUES('$id', '$code', '$location')";
    $result = mysql_query($query, $conn);

    if (!$result)
    {
        die("Error " . mysql_error());
    }
    else
    {
        echo "<br/><br/>";
        echo "<strong>1 record added successfully!</strong>";
        echo "<meta http-equiv=\"refresh\" content=\"3;URL=locations.php\">";
    }

    mysql_close($conn);
}

//Deleting selected records
if(isset($_POST["deletebtn"]))
{
    for($i = 0; $i < $count; $i++)
    {
        $del_id = $_POST["checkbox"][$i];
        $query = "DELETE FROM locations WHERE LID = '$del_id' ";
        $result = mysql_query($query, $conn);
    }

    if (!$result)
    {
        die("Error " . mysql_error());
    }
    else
    {
        echo "<meta http-equiv=\"refresh\" content=\"0;URL=locations.php\">";
    }

    mysql_close($conn);
}

?>

</body>
</html> 
```

谁能告诉我是什么原因造成的以及如何纠正它。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T14:09:11.763

数据库中的记录以没有特定顺序存储在数据库中（嗯，它有一些顺序，但由引擎决定）。如果要按特定顺序获取结果，则需要在查询数据时明确指定。在您的情况下，请进行以下更改：

```
/* Displaying the exsisting locations */        
$query = "SELECT * FROM locations ORDER BY lid";
$result = mysql_query($query, $conn); 
```

# mysql - perl DBI 中的占位符使用

> ID：11246427
> 
> 赞同：3
> 
> 时间：2012-06-28T14:05:36.477
> 
> 标签：mysql, perl, dbi

我有 perl 脚本如下

`my $tb = 'rajeev';
$query = 'select * from table where name = ?'
$sth = $dbh->prepare($query);
$sth->execute($tb);`

执行查询时，$tb 是否被 rajeev 或 'rajeev' 取代？表示查询执行为
`select * from table where name = rajeev`
或
`select * from table where name = 'rajeev'`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T14:33:16.257

DBI 为您处理所有转义。在字符串的情况下，它将是`'rajeev'`. 调用`select * from table where name = rajeev`会给你一个错误。

如果您提供一个数字，它不会添加引号，因为它们不是必需的。

请参阅[DBI 文档](http://search.cpan.org/~timb/DBI/DBI.pm#Placeholders_and_Bind_Values)。它还说：

> quote() 方法不应与“占位符和绑定值”一起使用。

使用占位符有时会为您处理报价，具体取决于您使用的 DBD。在您的情况下，文档中提到的[DBD::mysql](http://search.cpan.org/~capttofu/DBD-mysql/lib/DBD/mysql.pm#DESCRIPTION)调用：`$dbh->quote()`

> 另一种方法是
> 
> ```
> $dbh->do("INSERT INTO foo VALUES (?, ?)", undef, $number, $name); 
> ```
> 
> 在这种情况下，quote 方法会自动执行。

如果您有权访问[查询日志](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)，则可以检查查询的外观。如果您有需要很长时间的查询，您还可以打开一个 mysql 控制台并说[`SHOW FULL PROCESSLIST;`](http://dev.mysql.com/doc/refman/5.1/en/show-processlist.html)查看正在运行的查询列表。这也将包含完整的 SQL 语句供您查看。在 Windows 上，您可以使用[HeidiSQL](http://www.heidisql.com/screenshots.php?which=host_processlist)来执行此操作。

# java - 如何使用流将存储在网站上的图像、swf、视频和其他任何内容写入计算机上的文件

> ID：11246429
> 
> 赞同：0
> 
> 时间：2012-06-28T14:05:47.130
> 
> 标签：java, stream, web

我正在尝试编写一个将网站复制到我的硬盘的程序。这很容易复制源代码并将其保存为 html 文件，但这样做您无法离线访问任何图片、视频等。我想知道是否有一种方法可以使用输入/输出流来做到这一点，如果有的话，该怎么做......

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:19:04.297

如果您有`URL`要下载的文件，那么您可以简单地使用`apache commons-io`

```
org.apache.commons.io.FileUtils.copyURLToFile(URL, File); 
```

**编辑：** 此代码将在您的桌面上下载一个 zip 文件。

```
import static org.apache.commons.io.FileUtils.copyURLToFile;
public static void Download() {

        URL dl = null;
        File fl = null;
        try {
            fl = new File(System.getProperty("user.home").replace("\\", "/") + "/Desktop/Screenshots.zip");
            dl = new URL("http://example.com/uploads/Screenshots.zip");
            copyURLToFile(dl, fl);
        } catch (Exception e) {
            System.out.println(e);
        }
    } 
```

# wpf - 列表框未检测到所选项目

> ID：11246430
> 
> 赞同：1
> 
> 时间：2012-06-28T14:05:49.720
> 
> 标签：wpf

我有以下列表框：

```
<ListBox ItemsSource="{Binding AvailableTemplates}" Style="{DynamicResource SearchListBoxStyle}" SelectedItem="{Binding SelectedTemplate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
  <ListBox.ItemTemplate>
    <DataTemplate>
      <RadioButton Content="{Binding}" GroupName="group" />
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

如果我在单选按钮上选择，这不会检测到所选项目已更改。它只检测我是否单击列表框行上的单选按钮。单击单选按钮时如何修改以检测所选项目已更改的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T14:19:56.497

如果只想同步`RadioButton.IsChecked`with `ListBoxItem.IsSelected`，可以使用绑定

```
<RadioButton Content="{Binding}" GroupName="group"
             IsChecked="{Binding Path=IsSelected, RelativeSource={
                 RelativeSource AncestorType={x:Type ListBoxItem}},Mode=TwoWay}"/> 
```

如果您不希望您的项目同步，您可以在项目获得键盘焦点时使用`Trigger`设置`IsSelected`，尽管这只会在项目具有键盘焦点时保持选中状态

```
<Style TargetType="ListBoxItem">
  <Style.Triggers>
    <Trigger Property="IsKeyboardFocusWithin" Value="True">
      <Setter Property="IsSelected" Value="True" />
    </Trigger>
  </Style.Triggers>
</Style> 
```

而且，如果无论元素是否仍然具有键盘焦点，都希望它被选中，则必须在后面使用一些代码

```
<Style TargetType="{x:Type ListBoxItem}">
    <EventSetter Event="PreviewGotKeyboardFocus" Handler="SelectCurrentItem"/>
</Style> 
```

```
protected void SelectCurrentItem(object sender, KeyboardFocusChangedEventArgs e)
{
    ListBoxItem item = (ListBoxItem)sender;
    item.IsSelected = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:11:55.943

你不能弄错：listBox.SelectedItem 和 radioButton.IsChecked

它们是完全不同的东西，SelectedItem 被称为 ListBoxItem，你的单选按钮在一个 listboxitem 中。

您必须对属性 IsChecked (RadioButton) 进行绑定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T08:27:22.147

尝试设置`ListBoxItem.IsHitTestVisible`为 false（您可以在 xaml 中执行此操作）。它基本解决了我的选择问题。我的问题是，只有当我单击 ListBox 行中的空白而不是自定义内容时，选择才有效。

# javascript - 我们可以用 Html5 和 Phonegap 做的事情

> ID：11246435
> 
> 赞同：-4
> 
> 时间：2012-06-28T14:06:00.080
> 
> 标签：javascript, android, html, cordova, sencha-touch

我是 phonegap 和 html5 应用程序开发的新手，我开始学习 html5 以从这里开发 phonegap 应用程序[http://www.w3.org/html/logo/](http://www.w3.org/html/logo/)我知道我们可以用 html5 做什么，但仍然我心中有些困惑。我的问题可能很笼统，但我想知道为什么我们将 html5 与 phonegap 一起使用？我们可以用 html5 来做移动应用程序开发吗？如果有人对此有很好的链接或指导如果有人对此有所了解，请告诉我，我会很高兴。在此先感谢 Aamirkhan I。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:15:55.317

使用Phonegap，您可以访问大量的移动功能，例如相机、加速度计和几乎所有其他功能。但是在使用 HTML5 功能时应该小心，因为它们可能不兼容所有移动系统，因为 Phonegap 在本机应用程序中使用本机浏览器（例如，Android Phonegap 应用程序将使用本机 Android 浏览器）。但是完全有可能创建几乎所有不依赖于 HTML5 专有功能的应用程序

我正在使用它来创建*简单的** 应用程序，例如问答游戏、基于表单的应用程序等。我很喜欢它，因为我已经是一名 Web 开发人员，只是将我的 HTML/CSS/JS 技能用于移动设备。

[在这里](http://phonegap.com/apps/)你可以看到很多现实世界的项目。

[我所说的“简单”的意思是，我**不**推荐 Phonegap 来创建一个包含大量移动元素（使用画布、JavaScript 或其他）的快节奏游戏。为此，我推荐 Adob​​e Air(Flash) 或原生 Java。]

# android - 关闭应用程序后 GPS 更新不会关闭

> ID：11246448
> 
> 赞同：4
> 
> 时间：2012-06-28T14:06:45.477
> 
> 标签：android, gps, updates, geo

我创建了一个具有“地理定位”功能的应用程序，该功能负责像许多其他应用程序一样在 Google 地图上发现用户。我使用“LocationManager.NETWORK_PROVIDER”来定位用户，同时实例化并启动“MyLocationOverlay”（在`onLocationChanged()`方法中）以获取位置。由于第二个，GPS 开启（顶部闪烁），这没问题。

问题是，在应用程序关闭后（返回按钮或通过任务管理器），GPS 功能仍然挂在那里，试图获取更新。

用户离开活动后如何关闭它？我尝试了来自此处和其他论坛的建议，例如将方法放入`locationManager.removeUpdates(this);`和放入`locationManager.removeUpdates(mMyLocationOverlay);`方法`onPause()`中`onStop()`，，，`onDestroy()`。该方法`OnPause`如下所示：

```
@Override
protected void onPause() { 
  super.onPause(); 
  locationManager.removeUpdates(this);
  locationManager.removeUpdates(mMyLocationOverlay);
} 
```

（'this' 引用了我的实现 LocationListener 的类）

拜托，有人可以帮我在离开活动后关闭 GPS 更新（这是一个扩展 MapActivity 的类），但不关闭手机本身的 GPS 功能吗？

有趣的是，当我使用 MyLocationOverlay 移除部分时，GPS 当然不会启动，因此没有问题。所以我很确定那`mMyLocationOverlay`是“不会停止”并产生问题的听众。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-16T11:07:59.847

**googleMap.setMyLocationEnabled(false);** 在 onPause() 中解决了我的问题。我在 OnCreate() 中将其设置为**true 。**希望这可以帮助其他人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:38:24.763

设置`LocationListener`等于`null`并重新实例化`onResume()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:42:14.340

如果您想关闭（或结束）您可以使用的应用程序

System.exit(0);

所以当应用程序关闭时，您使用的所有服务都会关闭。

# ruby-on-rails - 简单搜索和 Rails

> ID：11246449
> 
> 赞同：0
> 
> 时间：2012-06-28T14:06:49.453
> 
> 标签：ruby-on-rails, search, if-statement

我在 Rails 中有一个简单的搜索：

```
def self.search(search)
# if search is not empty
if search
find(:all, :conditions => ["name LIKE ?", "%#{search}%"])
# if search is empty return all
else
find(:all)
end 
```

风景：

```
<% if @registries.empty? %>
Can't find the registry. Please try a differnet name.
<% else %>
<% @registries.each do |registry| %>
 ......etc. 
```

如果找不到查询，我如何对其进行编码以显示“Nothing Found”而不是 find(:all)？

我尝试了一些东西，但没有任何效果。即使我取出 else 它仍然会显示所有查询，如果它找不到要搜索的那个。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:09:51.577

当您的意思是“不为空”时，您必须专门针对它进行测试。请记住，在 Ruby 中只有两个值为 false 的值：`false`和`nil`.

您可能打算：

```
if (search.present?)
  where("name like ?", "%#{search}%").all
else
  all
end 
```

使用 Rails 3 样式`where`子句使您的方法更容易理解。使用`find`with`:conditions`是旧的 Rails 1 和 2 风格。

# iphone - 改进/优化 CAEmitterLayer 动画的性能（沿路径发射？）

> ID：11246453
> 
> 赞同：3
> 
> 时间：2012-06-28T14:07:03.527
> 
> 标签：iphone, animation, core-animation, caemitterlayer

这是我到目前为止所获得的视频。恕我直言，我的 MBP + QuickTime + Xcode 不是最好的。

[http://www.youtube.com/watch?v=DGRwz7n3kNA](http://www.youtube.com/watch?v=DGRwz7n3kNA)

这是我想要的一个非常粗略的草稿，但你可以得到这个想法。性能是最大的问题，但除了性能之外，我还在浪费 CPU/GPU 时间渲染/计算UIImageView*背后*的粒子（看起来像恶魔的符文）。

有谁知道如何沿着路径发射粒子或更好的方法来获得视图后面的发光动画？这是设置动画的发射器视图的片段：

```
emitter = (CAEmitterLayer*)self.layer;
CGSize size = self.frame.size;
[emitter setEmitterPosition:CGPointMake(size.width / 2.0f, size.height / 2.0f)];
[emitter setEmitterSize:CGSizeMake(size.width, size.height)];
[emitter setEmitterShape:kCAEmitterLayerCircle];
[emitter setRenderMode:kCAEmitterLayerAdditive];

CAEmitterCell *runeGlow = [CAEmitterCell emitterCell];
[runeGlow setColor:[[UIColor whiteColor] CGColor]];
[runeGlow setName:@"runeGlow"];
[runeGlow setBirthRate:4000.0f];
[runeGlow setVelocity:30.0f];
[runeGlow setLifetime:0.6f];
[runeGlow setEmissionRange:M_PI * 2.0f];
[runeGlow setContents:(id)[[UIImage imageNamed:@"burn.png"] CGImage]];

[emitter setEmitterCells:[NSArray arrayWithObject:runeGlow]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:59:44.847

您可以将发射器模式设置为仅在形状轮廓上发射粒子，如下所示

```
[emitter setEmitterMode:kCAEmitterLayerOutline]; 
```

（您可能已经注意到“音量”是默认值）

这可能会让你降低粒子的数量，从而提高性能（因为你不必创建很多出现在圆圈后面的粒子）。

# javascript - 将 XML 多边形转换为 Google 地图

> ID：11246457
> 
> 赞同：0
> 
> 时间：2012-06-28T14:07:28.693
> 
> 标签：javascript, xml, oracle, polygons, kmz

我有一个 XML (KMZ) 文件，其中包含指向地理区域（如县和州）的多边形，并且我希望能够将这些数据读入 googlemaps。

我认为它可以通过两种方式更方便地完成：

a) 将 xml 文件解析为插入到 Oracle 数据库中 b) 使用 Javascript 直接从我的谷歌地图页面读取 xml。（我想数据将被放置在数组中）。

无论哪种方式，是否有人对如何有效地做到这一点有一些提示？也许有人已经编写了执行此操作所需的大部分代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:53:05.417

也许尝试谷歌地图 API v3，[https://developers.google.com/maps/documentation/javascript/layers#KMLLayers](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)

问候，莉亚。

# delphi - 在 Delphi 中使用 UTF8 生成动态 HTML 页面

> ID：11246463
> 
> 赞同：2
> 
> 时间：2012-06-28T14:07:34.473
> 
> 标签：delphi, delphi-xe

我正在使用 Delphi 字符串（Delphi XE）动态生成 HTML。将重音字符编码到我的 HTML 中的正确方法是什么？

```
var
 s : string;
 myHTML : string;

(...)
s:= 'programação';
 myHTML:= 
'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">'+#10+
'<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">'+#10+
(...)
'<title>OmneeK Server - Intraweb</title>'+#10+
'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />'+#10+
(...)

myHTML:= myHTML + '<font color="red">' + s + '</font>';

(...) 
```

使用上面的代码我得到（从浏览器）：

```
"programa��o" 
```

我试过 HTMLEncode 但结果是一样的。我正在使用 ICS 组件来处理 HTTP 请求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:39:44.367

看来您没有以 UTF-8 编码保存页面

试试这个样本

```
Var
  Page :  TStrings;
begin
  Page:=TStringList.Create;
  try
    Page.Add('<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">');
    Page.Add('<meta http-equiv="Content-Type" content="text/html; charset="UTF-8" />');
    Page.Add('<title>Test</title>');
    Page.Add('<p>programação</p>');
    Page.Add('</html>');
    Page.SaveToFile(ChangeFileExt(ParamStr(0),'.html'), TEncoding.UTF8);
  finally
    Page.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-01T21:10:58.257

@米格尔·E

我在 Delphi XE4 / Indy 10 中发现了一些有趣的东西（可能也适用于早期版本）。这可能是您问题的根源吗？

如果您在写入 TIdHTTPResponseInfo.CharSet 之后写入 TIdHTTPResponseInfo.ContentType，那么您将丢失写入 TIdHTTPResponseInfo.CharSet 的内容！

换句话说：（给定信息：TIdHTTPResponseInfo）

```
 Info.ContentType := 'text/html';   // Warning!  Setting this AFTER setting CharSet changes CharSet back to ISO8859-1.
  Info.CharSet := 'UTF-8';           // So we MUST set CharSet last! 
```

In fact, there is NOTHING else you have to do (other than write to Info.ContentText) in order to make UTF-8 encoding of (say) Chinese characters work. You actually do not need to resort to using a stream. Any Chinese (or other Unicode-dependent languages) written to an ordinary Delphi string will work when assigned to TIdHTTPResponseInfo.ContentText if the CharSet property has not been accidentally undone.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:31:21.843

请务必**使用 UTF8**编码保存您的文件。例如，使用 MyHTML 变量作为 TStringList

```
MyHTML.SaveToFile(HTMLFileName, TEncoding.UTF8); 
```

它适用于我的应用程序，只不过是一个 TStringList 和这行代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T21:24:45.770

> 我正在生成一个运行时字符串并将该字符串作为对 HTTP 服务器组件 (ICS) 的响应返回。是否可以将 TEncoding 应用于字符串？

是的。Delphi`String`是`UnicodeString`XE 中的一个。自 D2009 以来，Delphi 就对 UTF-8 编码字符串提供了原生支持。

您可以做的一件事是将原始数据分配`UnicodeString`给一个`UTF8String`变量，然后让 RTL 为您将 Unicode 数据编码为 UTF-8，然后您可以将原始字节发送`UTF8String`给客户端：

```
var 
  myHTML: string;  
  myHTMLUtf8: UTF8String; 

myHTML := ...
myHTMLUtf8 := myHTML;
// send myHTMLUtf8 as-is... 
```

另一种选择是将 UTF-8 数据作为`TStream`. 您可以将 a`UTF8String`放入 a `TMemoryStream`：

```
var 
  myHTML: string;  
  myHTMLUtf8: UTF8String;
  strm: TMemoryStream;

myHTML := ...
myHTMLUtf8 := myHTML;

strm := TMemoryStream.Create;
strm.WriteBuffer(PAnsiChar(myHTMLUtf8)^, Length(myHTMLUtf8) * SizeOf(AnsiChar));
strm.Position := 0;
// send strm as-is...
strm.Free; 
```

或者将原件`UnicodeString`放入一个`TStringStream`应用`TEncoding.UTF8`到它的地方：

```
var 
  myHTML: string;  
  strm: TStringStream;

myHTML := ...

strm := TStringStream.Create(myHTML, TEncoding.UTF8);
// send strm as-is...
strm.Free; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T17:40:29.337

在发布这个问题后，我发现 HTMLEncode 函数（在 HTTPApp 单元中找到）存在一些问题，而 HTMLEscape 函数（在 HTTPUtil 单元中找到）也有同样的问题。文档没有说太多，但在使用 HTMEscape 功能重试后，浏览器显示了正确的重音。

我不知道是否有更好的方法来解决这个问题。

# c - Linux内核源代码中的“>>=”是什么意思？

> ID：11246466
> 
> 赞同：3
> 
> 时间：2012-06-28T14:07:40.793
> 
> 标签：c, linux, kernel

在 Linux 内核源代码中，我找到以下代码：

```
 h++;
    pending >>= 1; 
```

它是`__do_softirq(void)`. 但是“>>=”是什么意思？为什么不是我记得的“>>”？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-28T14:09:23.533

它只是做

```
pending = pending >>1; 
```

简而言之，它将无符号整数除以 2。

这与 , 等具有相同的`+=`构造`/=`。

这不仅仅是`pending >>1`你记得的那样，因为它不会将移位操作的结果存储在变量中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:17:17.823

相当于

```
pending = pending >> 1; 
```

哪个位移正确的位在`pending`. 这将产生将无符号整数除以 2 的效果。>> 和 << 是位移运算符，与 = 的组合的行为方式与 += 和 /= 的方式相同。

# html - 底部横幅向上移动到内容区域

> ID：11246467
> 
> 赞同：0
> 
> 时间：2012-06-28T14:07:40.913
> 
> 标签：html, css, internet-explorer, screen-resolution

我现在已经使用 w3 验证了 html 和 css，但是当我尝试在不同的屏幕分辨率下测试它时，底部横幅总是向上移动到内容区域。当我在 Internet Explorer 8 中打开所有工具栏时也会发生这种情况。使用我的 1280x1024 显示器在 Firefox 中似乎效果更好。我知道这是一个 CSS 问题，但无法纠正。在这件事上得到一些帮助会很好。

html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>My Test Site</title>
<meta content="" name="description">
<meta content="," name="keywords">
<meta content="index, nofollow" name="robots">
<meta content="" name="google-site-verification">
<link href="css/layout.css" rel="stylesheet" type="text/css">
<link href="favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="favicon.png" rel="icon" type="image/png"><!--[if gt IE 7]>
<link rel="stylesheet" type="text/css" href="css/ie8.css" />
<![endif]-->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"      
<type="text/javascript">
</script>
<script src="js/jquery.scrollTo-1.4.2.js" type="text/javascript">
</script>
<script type="text/javascript">
$(document).ready(function() {

    $('a.panel').click(function () {

            $('a.panel').removeClass('selected');
            $(this).addClass('selected');

            current = $(this);

            $('#wrapper').scrollTo($(this).attr('href'), 50);              

            return false;
    });

    $(window).resize(function () {
            resizePanel();
    });

});

function resizePanel() {

    width = $(window).width();
    height = $(window).height();

    mask_width = width * $('.item').length;

    $('#debug').html(width  + ' ' + height + ' ' + mask_width);

    $('#wrapper, .item').css({width: width, height: height});
    $('#mask').css({width: mask_width, height: height});
    $('#wrapper').scrollTo($('a.selected').attr('href'), 0);
    }        
</script>
</head>
<body>
<div id="wrapper">
<div id="mask">
<div class="item" id="item1"><a class="img" href="/"><img alt=""   
id="logo" name="logo" src="http://i50.tinypic.com/nghgg.png"></a>
<div id="top_banner"><script type="text/javascript">
                pb_cid='BAYBANNER468X60_1';
                pb_type='banner_468x60';
</script> <script src="http://clkads.com/banners/script/include_img_banner.js"    
type="text/javascript">
</script></div>
<div id="navwrapper">
<ul class="floatleft" id="nav">
<li><a href="#">Home</a></li>
</ul>
<br class="clear"></div>
<div id="left_banner"><script type="text/javascript">
                pb_cid='BAYBANNER120X600_1';
                pb_type='banner_120x600';
</script> <script src="http://clkads.com/banners/script/include_img_banner.js"  
type="text/javascript">
</script></div>
<div class="content">
<div id="right_banner"><script type="text/javascript">
                    pb_cid='BAYBANNER120X600_1';
                    pb_type='banner_120x600';
</script> <script src="http://clkads.com/banners/script/include_img_banner.js"   
type="text/javascript">
</script></div>
<div id="bottom_banner"><script type="text/javascript">
                    pb_cid='BAYBANNER728X90_2';
                    pb_type='banner_728x90';
</script><script src="http://clkads.com/banners/script/include_img_banner.js" 
type="text/javascript">
</script></div>
<div class="right_arrow"><a class="panel" href="#item2"><img alt="arrow" height="24"   
src="http://i48.tinypic.com/2rcy1zp.png" width="24"></a></div>
<div id="footer">Copyright 2012 All Rights Reserved | <a href="">Privacy Policy</a> | 
<a href="">Terms of Use</a></div>
</div>
</div>
<div class="item" id="item2">
<div class="content">
<div class="left_arrow"><a class="panel" href="#item1"><img alt="arrow" 
height="24"     
src="http://i49.tinypic.com/2i7obnq.png" width="24"></a></div>
<div class="right_arrow"><a class="panel" href="#item3"><img alt="arrow"    
height="24"     
src="http://i48.tinypic.com/2rcy1zp.png" width="24"></a></div>
</div>
</div>
<div class="item" id="item3">
<div class="content">
<div class="left_arrow"><a class="panel" href="#item2"><img alt="arrow" height="24"    
src="http://i49.tinypic.com/2i7obnq.png" width="24"></a></div>
<div class="right_arrow"><a class="panel" href="#item4"><img alt="arrow"   
height="24"     
src="http://i48.tinypic.com/2rcy1zp.png" width="24"></a></div>
</div>
</div>
</div>
</div>
</body>
</html> 
```

css

```
body {
height : 100%;
width : 100%;
margin : 0;
padding : 0;
overflow : hidden;
}
#wrapper {
width : 100%;
height : 100%;
position : absolute;
top : 0;
left : 0;
background-color : #ffffff;
overflow : hidden;
}
#mask {
width : 500%;
height : 100%;
background-color : #ffffff;
}
.item {
width : 20%;
height : 100%;
float : left;
background-color : #b4d8e7;
}
.content {
width : 969px;
height : 590px;
margin : 0 auto;
background-color : #000000;
position : relative;
top : 125px;
}
.selected {
background : #fff;
font-weight : 700;
}
.clear {
clear : both;
}
a img {
border : none;
display : block;
}
a {
outline : 0;
}
html {
overflow : auto;
}

#navwrapper {
background-color:#000;
left:0;
top:80px;
width:100%;
position:fixed;
}

#nav {
font-family:Arial, Helvetica, sans-serif;
font-size:12px;
padding-top:4px;
}

#nav,#nav ul {
list-style:none;
font-family:Arial, Helvetica, sans-serif;
margin:0;
padding:0;
}

#nav a {
display:block;
color:#ccc;
text-decoration:none;
padding:7px;
}

#nav a.dmenu:hover {
color:#36C !important;
background-color:#fff !important;
}

#nav li {
float:left;
position:static;
width:auto;
}

#nav li ul {
position:absolute;
display:none;
margin-left:-1px;
padding-bottom:10px;
background-color:#FFF;
border:1px solid #bbb;
border-top:none;
box-shadow:0 0 5px #ddd;
z-index:5000;
}

#nav li:hover a,#nav a:focus,#nav a:active {
color:#fff;
background:#444;
text-decoration:none;
padding:7px;
}

#nav li ul,#nav ul li {
width:10em;
}

#nav ul li a {
color:#36C !important;
border-right:0;
}

#nav ul li a:hover {
color:#36C !important;
background-color:#eef3fb !important;
border-right:0;
}

#nav li:hover ul {
display:block;
}

#nav li:hover ul a {
color:#000;
background-color:transparent;
}

#nav ul a:hover {
background-color:#606060 !important;
color:#FFF !important;
}

.menuseprator {
border-bottom:1px solid #ddd;
margin:10px 0;
}

.arrowdown {
font-size:0.5em;
}

.floatleft {
float:left;
}

.floatright {
float:right;
}

.clear {
clear:both;
}

#top_banner {
width : 468px;
height : 60px;
right : 1px;
position : fixed;
overflow : hidden;
padding : 10px;
}
#left_banner {
width : 120px;
height : 600px;
left : 1px;
top : 110px;
position : fixed;
overflow : hidden;
padding : 10px;
}
#right_banner {
width : 120px;
height : 600px;
right : 1px;
top : 110px;
position : fixed;
overflow : hidden;
padding : 10px;
}
#bottom_banner {
bottom : 50px;
right : 260px;
height : 90px;
width : 728px;
position : fixed;
z-index : 999;
margin : 0;
}
.right_arrow {
height : 24px;
width : 24px;
right : 0;
bottom : -30px;
border : none;
position : absolute;
padding : 0;
}
.left_arrow {
height : 24px;
width : 24px;
left : 0;
bottom : -30px;
border : none;
position : absolute;
padding : 0;
}
#logo {
left : 10px;
top : 8px;
border : 0;
height : 64px;
width : 64px;
position : fixed;
}
#footer {
bottom : 5px;
left : 476px;
font-family : Arial, Helvetica, sans-serif;
font-size : 11px;
text-align : center;
color : #6e6e6e;
position : fixed;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:19:35.950

问题是您（过度）使用`position: fixed`. 固定位置不应用于一般场地布局。它不适用于不同分辨率的浏览器，通常会导致问题。最多应该用于在屏幕的顶部或底部附加一个栏。

您的问题是一个潜在的问题，需要对您的 CSS 进行一些重新设计。

# ruby-on-rails - 使用带有步骤的数字范围的导轨生成选择标签

> ID：11246471
> 
> 赞同：6
> 
> 时间：2012-06-28T14:07:49.393
> 
> 标签：ruby-on-rails, forms, select

编写rails select标签的最简单方法是什么，它将为数字1-15以0.5增量生成选择？

我知道这必须很简单，但我在语法上苦苦挣扎，我知道必须有一种比我更优雅的方式来编写它。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T14:15:35.440

```
select_tag "sizes", options_for_select((4..15).step(0.5)) 
```

这就是我写它的方式......但这是最好的方法吗？

另外，如果我希望 4.0/5.0/6.0 等将 4/5/6 读取为整数，有没有办法在一行中执行/包含这个？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:00:32.640

```
select_tag "sizes", options_for_select( (4..15).step(0.5).map{|n| n%1 == 0 ? n.to_i : n} ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:13:27.923

该`options_for_select`方法可以满足您的要求，但前提是您可以使用正确的数据对其进行播种。这意味着您需要一个包含适当值的数组。例如：

```
options_for_select((0..28).to_a.collect { |v| v.to_f / 2 + 1 }) 
```

# jquery - jQuery Masonry 插件垂直间隙

> ID：11246472
> 
> 赞同：0
> 
> 时间：2012-06-28T14:07:51.583
> 
> 标签：jquery, jquery-masonry

我正在一个试图实现 Masonry jQuery 插件的网站上工作。从砖石广告中看，不应该有，或者至少是最小的垂直间隙；但是我似乎无法摆脱我正在处理的网站上的空白。

我完全按照砌体的说明进行操作，所有 .js 文件都已正确链接，据我所知，砌体正在工作，尽管很奇怪。

我已经尝试了[Vertical Gaps Appearing - jQuery Masonry - (seamless photo grid)](https://stackoverflow.com/questions/9579017/vertical-gaps-appearing-jquery-masonry-seamless-photo-grid)的解决方案并添加了 display: block; CSS到站点绝对没有效果，我也尝试重新排列图像的顺序，但出现同样的问题。我正在开发的网站可以在这里看到：[http ://www.zinestudio.co.uk/penarthphysio/gallery.html](http://www.zinestudio.co.uk/penarthphysio/gallery.html)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:49:16.150

对此深表歉意，需要解决此问题的客户继续进行并更改了所有内容，因此不再需要它。感谢克里斯的兴趣！

# php - 打算编写一个我的世界服务器状态检查程序

> ID：11246473
> 
> 赞同：1
> 
> 时间：2012-06-28T14:07:55.867
> 
> 标签：php, python, sql-server, minecraft

我想做一个程序，让我可以检查 Minecraft 服务器的状态，无论它们是在线、离线还是已满。我该怎么做呢？我在想 PHP 服务器端、Python 客户端和 SQL 作为服务器？

我需要一些关于完成这样一项任务需要做什么的重要建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T14:10:38.653

您不需要数据库。ping 服务器。如果它有响应，它就启动了……显示一个大的绿色复选标记。如果它没有响应……它就挂了。显示一个大的红色 x。您可以在任何地方在 FB API 或纯 PHP 中执行此操作。

请参阅[这个问题](https://stackoverflow.com/questions/1239068/ping-site-and-return-result-in-php)，它提供了以下代码：

```
function ping($host, $port, $timeout)
{ 
  $tB = microtime(true); 
  $fP = fSockOpen($host, $port, $errno, $errstr, $timeout); 
  if (!$fP) { return "down"; } 
  $tA = microtime(true); 
  return round((($tA - $tB) * 1000), 0)." ms"; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:17:41.147

值得注意的是，如果您想要的不仅仅是服务器启动/关闭状态的更多信息，您可以使用大多数服务器已启用的 MineQuery 协议。

更多信息@ [DinnerBone 的工具](http://dinnerbone.com/minecraft/tools/status/)。

如果服务器使用 CraftBukkit，这将允许您获取当前/最大玩家、MOTD、游戏版本和一些其他详细信息。

这个版本也是[用 PHP 编写的](https://github.com/vexsoftware/minequery-php/blob/master/minequery.class.php)。

# spring - 在 onSubmit() 中获取模型

> ID：11246477
> 
> 赞同：0
> 
> 时间：2012-06-28T14:08:23.247
> 
> 标签：spring, spring-mvc

是否可以在 onSubmit() 方法中获取当前视图用于渲染的模型？

我想以某种方式“重定向模型”，该模型通过返回从另一个控制器提供给当前视图

```
new ModelAndView("searchResults", "model", myModel) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:14:36.860

您可以使用以下方式使表单引用任何属性并提交给任何 servlet/控制器：

包括标签

```
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
```

创建网址变量

```
<c:url var="myURL" value="/ANywhere/whatever" /> 
```

定义类似的形式

```
<form:form name="myForm" id="myForm" action="${myUrl}" method="POST" modelAttribute="yourAttribue">
<form:input path="firstname" /> 
```

# asp.net - 如何从经纬度点获取最近的X点？

> ID：11246478
> 
> 赞同：1
> 
> 时间：2012-06-28T14:08:26.940
> 
> 标签：asp.net, google-maps, c#-4.0, maps

我有一个带有纬度和经度坐标的点列表，我想从中输入一个点，比如 X。我需要帮助提出一种算法来确定最接近该点 x 的 3 个列表成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:39:18.460

您可能必须使用[Haversine Formula](http://en.wikipedia.org/wiki/Great_circle_distance)。它计算地球表面上两点之间的大圆距离。 [这是](http://introcs.cs.princeton.edu/java/12types/GreatCircle.java.html)一篇很好的文章来解释这一点，[这是](https://stackoverflow.com/a/837957/1345119)对与您的问题类似的问题的答案。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:26:57.753

请参阅 google.maps.geometry.spherical 命名空间中的方法 computeDistanceBetween()：

[https://developers.google.com/maps/documentation/javascript/reference#spherical](https://developers.google.com/maps/documentation/javascript/reference#spherical)

然后，这是一个使用 Array.sort() 的旧 V2 演示：

[http://maps.forum.nu/gm_array_sort.html](http://maps.forum.nu/gm_array_sort.html)

您可以将两者结合起来，实现 computeDistanceBetween() 而不是 compareDistance() 作为排序函数。请注意，这都是在客户端完成的。

# c# - XAML 中的触发器属性

> ID：11246480
> 
> 赞同：3
> 
> 时间：2012-06-28T14:08:37.997
> 
> 标签：c#, wpf, xaml, triggers, intellisense

我开始学习 XAML，并且正在学习 MCTS 自定进度培训书。我来到了关于触发器（更具体地说是属性触发器）的部分，我偶然发现了一些相当烦人的东西。

这是我的代码：

```
<Style TargetType="Button">
            <Style.Triggers>
                <Trigger Property=""
            </Style.Triggers>
        </Style> 
```

现在，当我想获取 Trigger 指向的属性时，我希望 Intellisense 列出所有可用的属性，但它没有。这是我正在做的事情，VS 的问题，还是在那种情况下不支持。除此之外，当我为触发器设置 Setter 时它也有效。例如：

`<Setter Property="INTELLISENSE WORKS" Value="Something" />`

我真的很希望 Button 的属性显示为`IsMouseOver`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:36:29.600

检查您的 Visual Studio 版本并升级到 Visual Studio 2010 Service Pack 1，确保一切正常 (Y)。Visual Studio 2010（没有服务包）没有用于触发器的智能感知。

# javascript - 更新 Knockout.js 可观察数组元素值

> ID：11246494
> 
> 赞同：23
> 
> 时间：2012-06-28T14:09:17.403
> 
> 标签：javascript, knockout.js

我需要更新一个可观察的数组元素值。可观察数组是类对象的集合。首先，我需要通过 id 找出匹配的对象并更新对象的一些其他属性值。

```
var Seat = function(no, booked) {
    var self = this;
    self.No = ko.observable(no);
    self.Booked = ko.observable(!!booked);

    // Subscribe to the "Booked" property
    self.Booked.subscribe(function() {
        alert( self.No() );
    });
};

var viewModel = {
    seats: ko.observableArray( [
        new Seat(1, false), new Seat(2, true), new Seat(3, true),
        new Seat(4, false), new Seat(5, true), new Seat(6, true),
        new Seat(7, false), new Seat(8, true), new Seat(9, true)
    ] )
}; 
```

任何人都可以建议更新视图模型的方法吗？假设我想将 2 号座位的预订价值更新为“false”。

[http://jsfiddle.net/2NMJX/3/](http://jsfiddle.net/2NMJX/3/)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-28T14:25:15.307

淘汰赛非常简单：

```
// We're looking for the Seat with this No 
var targetNo = 2;

// Search for the seat -> arrayFirst iterates over the array and returns the
// first item that is a match (= callback returns "true")!
var seat = ko.utils.arrayFirst(this.seats(), function(currentSeat) {
    return currentSeat.No() == targetNo; // <-- is this the desired seat?
});

// Seat found?
if (seat) {
    // Update the "Booked" property of this seat!
    seat.Booked(true);
} 
```

[http://jsfiddle.net/2NMJX/4/](http://jsfiddle.net/2NMJX/4/)

* * *

## 回答 #2

> 赞同：-9
> 
> 时间：2013-03-17T09:56:32.167

```
viewModel.seats()[self.No()].Booked(true); 
```

# hibernate - Struts2 与 Hibernate 3 集成失败

> ID：11246495
> 
> 赞同：0
> 
> 时间：2012-06-28T14:09:20.827
> 
> 标签：hibernate, struts2, struts2-s2hibernate

我想在 Struts2 中使用 Hibernate。加载 SessionFactory 时发生以下错误。

```
Initial SessionFactory creation failed.java.lang.NoClassDefFoundError: javax/persistence/JoinTable 
```

当我在 psvm 的普通类中获取会话工厂时，没有给出错误，但是当只运行 jsp 页面或 Tomcat 时，会抛出上述错误。

我在网上搜了一下。据说是因为有些库不匹配。。

[这](https://forum.hibernate.org/viewtopic.php?f=1&t=1014321)表示要添加该页面中列出的一些罐子。要找到它们，还提供了一个[链接](http://www.dzone.com/tutorials/java/struts-2/struts-2-example/struts-2-hibernate-integration-1.html)。但是没有找到罐子。
还有另一个[页面](http://code.google.com/p/full-hibernate-plugin-for-struts2/)说*full-hibernate-plugin-for-struts2*但我找不到任何有用的库。它只有war文件（普通类）和一些没有struts或hibernate库的web项目。

我用

*   NetBeansIDE 7.0.1

*   雄猫 7

请任何人知道如何解决这个问题或任何工作库集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:41:17.363

如果有人遇到这个问题，

我的解决方案是使用新的 Hibernate 版本 4.1.4 。然后一切正常。
我的 Struts 版本是 2.2.3 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:39:32.127

看一下这个：

![图书馆](../Images/c24eb2e0df1d3ad57859285a7913a1aa.png)

或者你可以使用 Maven：

![maven依赖](../Images/522390fd019ddbf9d64eb2b15998a016.png)

# android - Android Camera Preview 在相机之间切换

> ID：11246497
> 
> 赞同：4
> 
> 时间：2012-06-28T14:09:22.747
> 
> 标签：android, camera, preview

我试图在显示相机预览时在设备的前置和后置摄像头之间切换。我正在关注普通商品提供的样本。下面是我正在使用的代码。每当我单击翻转按钮时，表面视图都会变黑，我不知道我哪里出错了。我试图重新开始当前的活动，但我不想那样。

```
package com.commonsware.android.camera;
import android.app.Activity;
import android.hardware.Camera;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.Toast;
import android.widget.ToggleButton;
public class PreviewDemo extends Activity {
    private SurfaceView preview = null;
    private SurfaceHolder previewHolder = null;
    private Camera camera = null;
    private boolean inPreview = false;
    private boolean cameraConfigured = false;
    private ToggleButton flipCamera;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    flipCamera = (ToggleButton) findViewById(R.id.flip);
    preview = (SurfaceView) findViewById(R.id.preview);
    previewHolder = preview.getHolder();
    previewHolder.addCallback(surfaceCallback);
    previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    flipCamera.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            // TODO Auto-generated method stub
            restartPreview(isChecked);
        }
    });

}

@Override
public void onResume() {
    super.onResume();

    // camera=Camera.open();
    int camId = Camera.CameraInfo.CAMERA_FACING_BACK;
    if (Camera.getNumberOfCameras() > 1
            && camId < Camera.getNumberOfCameras() - 1) {
        // startCamera(camId + 1);
        camera = Camera.open(camId + 1);
    } else {
        // startCamera(Camera.CameraInfo.CAMERA_FACING_BACK);
        camera = Camera.open(camId);
    }
    startPreview();
}

void restartPreview(boolean isFront) {
    if (inPreview) {
        camera.stopPreview();
    }
    //
    camera.release();

    // camera=null;
    // inPreview=false;
    // /*int camId = Camera.CameraInfo.CAMERA_FACING_BACK;
    // if (Camera.getNumberOfCameras() > 1 && camId <
    // Camera.getNumberOfCameras() - 1) {
    // //startCamera(camId + 1);
    // camera = Camera.open(camId + 1);
    // } else {
    // //startCamera(Camera.CameraInfo.CAMERA_FACING_BACK);
    // camera = Camera.open(camId);
    // }*/
    int camId = Camera.CameraInfo.CAMERA_FACING_BACK;
    if (isFront) {
        camera = Camera.open(camId);
        camera.startPreview();

    } else {
        camera = Camera.open(camId + 1);
        camera.startPreview();

    }
    // startPreview();
}

@Override
public void onPause() {
    if (inPreview) {
        camera.stopPreview();
    }

    camera.release();
    camera = null;
    inPreview = false;

    super.onPause();
}

private Camera.Size getBestPreviewSize(int width, int height,
        Camera.Parameters parameters) {
    Camera.Size result = null;

    for (Camera.Size size : parameters.getSupportedPreviewSizes()) {
        if (size.width <= width && size.height <= height) {
            if (result == null) {
                result = size;
            } else {
                int resultArea = result.width * result.height;
                int newArea = size.width * size.height;

                if (newArea > resultArea) {
                    result = size;
                }
            }
        }
    }

    return (result);
}

private void initPreview(int width, int height) {
    if (camera != null && previewHolder.getSurface() != null) {
        try {
            camera.setPreviewDisplay(previewHolder);
        } catch (Throwable t) {
            Log.e("PreviewDemo-surfaceCallback",
                    "Exception in setPreviewDisplay()", t);
            Toast.makeText(PreviewDemo.this, t.getMessage(),
                    Toast.LENGTH_LONG).show();
        }

        if (!cameraConfigured) {
            Camera.Parameters parameters = camera.getParameters();
            Camera.Size size = getBestPreviewSize(width, height, parameters);

            if (size != null) {
                parameters.setPreviewSize(size.width, size.height);
                camera.setParameters(parameters);
                cameraConfigured = true;
            }
        }
    }
}

private void startPreview() {
    if (cameraConfigured && camera != null) {

        camera.startPreview();
        inPreview = true;
    }
}

SurfaceHolder.Callback surfaceCallback = new SurfaceHolder.Callback() {
    public void surfaceCreated(SurfaceHolder holder) {
        // no-op -- wait until surfaceChanged()
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        initPreview(width, height);
        startPreview();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // no-op
        if (camera != null) {
            /*
             * Call stopPreview() to stop updating the preview surface.
             */
            camera.stopPreview();

            /*
             * Important: Call release() to release the camera for use by
             * other applications. Applications should release the camera
             * immediately in onPause() (and re-open() it in onResume()).
             */
            camera.release();

            camera = null;
        }
    }
};
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T14:23:40.443

在从您的方法调用之前，您似乎忘记了调用`setPreviewDisplay()`（或者，在您的情况下，`initPreview()`） 。实际上，您正在尝试在没有指定要渲染预览的表面的情况下开始预览。`startPreview()``restartPreviev()`

# c# - SelectedItem 更改详细信息，然后绑定到先前选定的项目

> ID：11246508
> 
> 赞同：0
> 
> 时间：2012-06-28T14:09:52.037
> 
> 标签：c#, wpf, data-binding, binding

我有一些**区域**形式的分层数据，其中包含包含**入口的****系统** 我的 WPF 应用程序有一个以**入口**作为属性的**行程列表。**UI 是一个拆分窗口，其中包含一个 ListControl 和一个绑定到 ListView.SelectedItem 属性的“详细信息”控件，如下所示：（为简洁而编辑的代码，仅显示相关部分）

 ******```
<local:ListView x:Name="listView"/>
<local:DetailsView DataContext="{Binding ElementName=listView, Path=SelectedItem}"/> 
```

详细信息视图由属性的 ComboBox 组成，其中包括：

```
<ComboBox Name="comboRegion" SelectionChanged="Region_Changed"
    ItemsSource="{Binding ElementName=main, Path=Regions, Mode=OneWay}" DisplayMemberPath="Name"
    SelectedItem="{Binding Region, Mode=OneWay}"/>
<ComboBox Name="comboSystem" SelectionChanged="System_Changed"
    ItemsSource="{Binding ElementName=main, Path=Systems, Mode=OneWay}" DisplayMemberPath="Name"
    SelectedItem="{Binding System, Mode=OneWay}"/>
<ComboBox ItemsSource="{Binding ElementName=main, Path=Entrances, Mode=OneWay}" DisplayMemberPath="Name"
    SelectedItem="{Binding Enter}"/> 
```

Trip.Enter 是我要编辑的属性，Trip.Region 和 Trip.System 是只读的，是从 Trip.Enter 计算的。main.Regions、main、systems 和 main.Entrances 是控件的本地列表，具有以下代码：

```
 public IEnumerable<Region> Regions { get; private set; }
    public IEnumerable<CaveSystem> Systems { get; private set; }
    public IEnumerable<Entrance> Entrances { get; private set; }

    private void Region_Changed(object sender, SelectionChangedEventArgs e)
    {
        Region = comboRegion.SelectedItem as Region;
        Systems = (region != null ? region.Systems : null);
        NotifyPropertyChanged("Systems");
    }

    private void System_Changed(object sender, SelectionChangedEventArgs e)
    {
        ... Equivalent to Region_Changed except updates Entrances ...
    } 
```

Regions 列表是静态的，因此只填充一次。选择新区域后，系统列表将重新填充新列表。选择新系统（也作为更改区域的级联）时，将重新填充入口列表。

到现在为止还挺好。这按预期工作，在列表视图中选择行程会将其详细信息绑定到组合框。更改组合框中的值，使用新列表更新相应的“较低级别”框。最后，选择一个入口会更新记录本身（列表视图会相应更新）

问题是：当我在列表视图中选择一条新记录时，新记录中的值出现在组合框中，但也被复制到最后选择的记录中。

我认为问题在于，更改详细信息视图的数据上下文会导致绑定全部更新。我认为这会依次发生，但更改所选区域会在较低级别的组合框中产生连锁反应，这也会发生变化。我认为，在那个时候，他们仍然受制于旧唱片。

任何人都可以提出解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:47:54.740

您可以尝试使用策略模式。不要更改您的数据上下文，而是在您的数据上下文中更改类。在这个内部类中，您可以拥有工作逻辑，但您的数据上下文将是相同的。例子：

```
public interface InnerDataContext
{
   public CaveSystem System{get;}
}

public class DataContext
{
   private InnerDataContext dc;

   public CaveSystem
   { get{ return dc.System; }}
} 
```

您可以根据需要更改内部数据上下文，并且它不会抛出更新值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:00:52.177

好的，找到了解决办法！我将绑定更改为

UpdateSourceTrigger=LostFocus

这意味着仅当用户在组合框中选择新值时才更新对象，而不是在由于更改数据上下文而更新组合框时。******

# mysql - 2 个不同数据库中的 2 个表，具有不同的结构，需要同步的数据类型相同

> ID：11246512
> 
> 赞同：0
> 
> 时间：2012-06-28T14:09:56.987
> 
> 标签：mysql, replication

我的问题是我有一个客户可以在上面下订单的网站。该信息进入订单、订单产品、...等表。我在不同的服务器上有一个报告数据库，我的员工将从那里处理订单。此服务器上的表将需要订单信息和其他列，以便他们可以添加额外信息并更新当前信息

在没有数据丢失风险的情况下，从一台服务器（订单网站）到另一台（报告网站）有效获取信息的最佳方式是什么？此外，我不希望报告数据库连接到网站以获取信息。我想在订单网站上实施一个解决方案来推送数据。

**想法**

1.  **mySQL 复制**-**问题**- 复制的表严格用于报告而不是操作。例如，如果客户地址发生变化怎么办？需要将产品添加到订单中？这会弄乱复制的表。

2.  **双插入**- 插入本地表，然后插入报告数据库。 **问题**- 如果由于某种原因报告数据库出现故障，我可能会丢失数据，因为 mySQL 连接将无法推送数据。实现某种查询日志？

**两个服务器都使用 mySQL 和 PHP**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:18:46.250

Mysql 复制听起来与您正在寻找的完全一样，我不太确定我是否理解您在那里列出的缺点。

对我来说，解决方案听起来像是只读从属的主从，其中从属是报告数据库。如果您关心的是对主服务器的更改然后使从服务器不同步，那么这应该不是太大的问题，所有更改都将被同步。在连接丢失的情况下，slave 将跟踪它落后于 master 的秒数并执行更改，直到两者重新同步。

# javascript - jquery mobile XMLHttpRequest 无法加载

> ID：11246514
> 
> 赞同：0
> 
> 时间：2012-06-28T14:10:03.353
> 
> 标签：javascript, jquery, jquery-mobile

所以问题是我没有进行任何ajax调用。当我包含 jquery.mobile-1.1.0 时，我的所有脚本文件都会生成此错误。更奇怪的是，一切正常。所以例如我有

```
<script src="myScripts.js"  type="text/javascript"></script> 
<script src="jquery.js"  type="text/javascript"></script>
<script src="jquery.mobile-1.1.0.js"  type="text/javascript"></script> 
```

之后我收到 XMLHttpRequest 错误......但是所有这些 js 文件都加载了......关于为什么会发生这种情况的任何想法？顺便说一句，我不能让应用程序在 localhost 上运行，我需要它作为独立文件运行。

# java - Hibernate：拆分查询

> ID：11246516
> 
> 赞同：1
> 
> 时间：2012-06-28T14:10:12.277
> 
> 标签：java, hibernate, optimization, jpa, hql

（JPA/Hibernate 问题）我有一个对一个表的查询，我们称之为“Release”，我想从中检索 ONE 行，以映射到一个实体。然后这个实体有五个一对多的关联，这些关联在不久的将来都会用到，所以我想急切地获取它们。现在，这些一对多关联中的每一个都具有介于 3 到 300 之间的行数。如果实际执行，查询总共会加载大约 100 万行。

因此，对广义 HQL 查询进行一些预览（括号中的一些注释）：

```
select rv, al, ... (blabla) from 
from Release rv 
left outer join fetch App app (on releaseId)
left outer join fetch Appconfig ac (on appId)
left outer join fetch Appbind ab (on appId)
left outer join fetch Releaseconfig rc (on releaseId)
left outer join fetch Somestuff st (on releaseId)
left outer join fetch Points p (on releaseId)
left outer join fetch Pointconfig pc (on pointId)
left outer join fetch Pointstuff ps (on pointId)
where rv.releaseId = :id 
```

现在，比如说，App 有 100 行，而 Appconfig 和 Appbind 对于每个 appId 各有 20 行；Releasconfig 大约 15，Somestuff 大约 20，Points 另一个 130，Pointconfig 每个 Point 大约 30，Pointstuff 每个 Point 大约 50。这将导致一个 MASSIVE 查询！

有没有办法让我拆分查询并让 Hibernate 映射它们？说，我首先要求 App、Appconfig 和 Appbind，然后是 Releaseconfig 本身和 Somestuff，然后是 Points、Pointconfig 和 Poinstuff……

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:35:21.897

您可以通过使用查询预先加载所需的数据来实现这一点，如您所展示的，例如 App、Appconfig 和 Appbind。您没有强制 Hibernate 加载的所有其他集合将由代理表示。

然后，当您需要下一个集合时，您可以使用`Hibernate.initialize()`传递代理来强制 Hibernate 加载它。这将需要单独的查询。

# objective-c - iOS 正面朝上方向问题

> ID：11246519
> 
> 赞同：2
> 
> 时间：2012-06-28T14:10:18.417
> 
> 标签：objective-c, ios, xcode, orientation

当设备坐在桌子上时，有什么方法可以区分横向和纵向，即 UIDeviceOrientationFaceUp？我有两个不同的 xib 文件，我根据用户持有设备的方式在它们之间切换。但是当我将设备横向放置时，问题就出现了，然后将设备放下。设备保持横向，但将加载纵向 xib 文件。如果在我的编码中我将 UIDeviceOrientationFaceUp 与横向方向结合起来，问题将是相反的：然后我的横向视图将显示设备仍处于纵向状态时。

有什么方法可以确定设备是否仍然显示横向或纵向？我试过检查框架宽度，但它声称它是 768，即使设备平放在风景中也是如此。而且当设备变平时我无法强制定向，我听说那是 App Store 拒绝的道路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:12:50.527

你不能那样做。当手机放在桌子上时，加速度计无法判断用户坐在手机的哪一侧。您可以使用陀螺仪（和指南针）测量绕其轴的旋转，但这仍然不能告诉您用户在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-12T09:06:36.293

有一种方法可以检查它。

`UIDeviceOrientation deviceOrientation = [[UIDevice currentDevice] orientation]; UIInterfaceOrientation statusBarOrientation =[UIApplication sharedApplication].statusBarOrientation;` 使用第一个检查设备是否正面朝上，第二个将告诉您设备是纵向还是横向。

# javascript - *在*找到用户的位置后让谷歌地图加载？

> ID：11246521
> 
> 赞同：1
> 
> 时间：2012-06-28T14:10:26.397
> 
> 标签：javascript, html, maps

我正在解析 XML 以直接从数据库中获取多个标记，因此为此使用了 Google 示例。我现在需要在地图上显示用户的位置（作为中心点）。我发现要么创建一个函数来在地理定位棘手之后加载地图，这就是我出错的地方。

如您所见，我可以提醒纬度和经度，但由于地图首先加载，它不会将地图置于这些坐标的中心。之后我尝试创建一个函数来运行地图，但我一定遗漏了一些东西。如果有人可以帮助我，那就太好了 - 甚至可以将加载功能移动到哪里。

我正在使用的测试页面位于此处： http: [//www.musecosystems.com/app/event_map2.html](http://www.musecosystems.com/app/event_map2.html)

```
if (navigator.geolocation) 
{
    navigator.geolocation.getCurrentPosition( 

        function (position) {  
    var current_latitude = position.coords.latitude;
    var current_longitude = position.coords.longitude;
    alert ("Latitude"+current_latitude+"Longitude"+current_longitude);mapServiceProvider(position.coords.latitude,position.coords.longitude);
    }   
        );
    } 
 </script><script>

function load() {
      var map = new google.maps.Map(document.getElementById("map"), {

        center: new google.maps.LatLng(54.046575, -2.8007399),
        zoom: 16,
        mapTypeId: 'roadmap'
      });

    var infoWindow = new google.maps.InfoWindow;
          document.getElementById("map").style.width=screen.width+"px";
          document.getElementById("map").style.height=screen.height+"px";
          document.getElementById("map").style.padding="0px";
          document.getElementById("map").style.margin="0px";

      // Change this depending on the name of your PHP file
      downloadUrl("http://www.musecosystems.com/app/server/venue_output.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("name");
          var event_name = markers[i].getAttribute("event_name");
          var event_start = markers[i].getAttribute("event_start");
          var event_link = markers[i].getAttribute("event_link");    
          var type = markers[i].getAttribute("location_status");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("latitude")),
              parseFloat(markers[i].getAttribute("longitude")));
          var html = "<b>" + name + "</b>" + "<br/>" +("<a href='" + event_link + "'>" + event_name + "</a>");;
          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          bindInfoWindow(marker, map, infoWindow, html);
        }
      });
    }

    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}

  </script>

  </head>

  <body onload="load()">
    <div id="map" ></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:36:11.253

我会尝试以下方法：

...

```
<script>
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {  
            var current_latitude = position.coords.latitude;
            var current_longitude = position.coords.longitude;
            load(current_latitude, current_longitude);
        });
    } else {
        load(54.046575, -2.8007399);
    }
</script> 
```

...

```
function load(center_lat,center_lng) {
    var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(center_lat, center_lng),
        zoom: 16,
        mapTypeId: 'roadmap'
}); 
```

...

```
<body><div id="map"></div></body> 
```

顺便说一句：有一个很好的[Firefox 扩展名为 Geolocater](https://addons.mozilla.org/en-US/firefox/addon/geolocater/)来测试地理定位是否按预期工作。

# c++ - 从 lambda 访问 for_each 迭代器

> ID：11246525
> 
> 赞同：5
> 
> 时间：2012-06-28T14:10:42.073
> 
> 标签：c++, stl, lambda, c++11, erase-remove-idiom

是否可以访问 std::for_each 迭代器，所以我可以使用 lambda 从 std::list 中擦除当前元素（如下所示）

```
typedef std::shared_ptr<IEvent>    EventPtr;
std::list<EventPtr> EventQueue;
EventType evt;
...

std::for_each( 
    EventQueue.begin(), EventQueue.end(),

    [&]( EventPtr pEvent )
    {
        if( pEvent->EventType() == evt.EventType() )
            EventQueue.erase( ???Iterator??? );
    }
); 
```

我读过关于使用 [](typename T::value_type x){ delete x; } 这里关于 SO，但 VS2010 似乎不喜欢这个声明（下划线 T 作为错误源）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T14:29:51.793

您使用了错误的算法。使用`remove_if`：

```
EventQueue.remove_if([&](EventPtr const& pEvent)
{
    return pEvent->EventType() == evt.EventType();
}); 
```

STL 算法不允许您访问用于迭代的迭代器。在大多数情况下，这是一件好事。

（此外，请考虑您是否真的想使用`std::list`；它不太可能是您的用例的正确容器。考虑`std::vector`，您将使用[擦除/删除习惯用法](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Erase-Remove)来删除满足特定谓词的元素。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:26:16.167

不，请使用常规 for 代替。

```
for( auto it = EventQueue.begin(); it != EventQueue.end(); ++it )
{
  auto pEvent = *it;
  if( pEvent->EventType() == evt.EventType() )
      it = EventQueue.erase( it );
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-13T14:59:47.340

擦除不是您可能需要了解 lambda 中的迭代器的唯一时间。为了以更一般的方式执行此操作，我使用 & 运算符（隐式转换为迭代器），如下所示：

```
int main (int argc, char* argv []) {
  size_t tmp [6] = {0, 1, 2, 3, 4, 5};
  std::list<size_t> ls ((size_t*)tmp, (size_t*) &tmp [6]);
  //printing next element
  std::for_each ((const size_t*)tmp, (const size_t*) &tmp [5], [] (const size_t& s) {
    std::cout << s << "->";
    std::cout << *(&s +1) << "   ";
  });
  std::cout << std::endl;
} 
```

# javascript - ExtJS v3 - 从表单面板内的网格面板访问数据

> ID：11246527
> 
> 赞同：1
> 
> 时间：2012-06-28T14:10:48.910
> 
> 标签：javascript, extjs, extjs3, formpanel

我有一个在表单中使用的 GridPanel。

当我提交表单时，我可以毫无问题地从表单元素中获取数据，但无法读取/查看放置在网格内的数据。

（基本上，我给他们一个区域来在网格中添加电子邮件地址）。

我在想我可以将网格面板数据设置为表单中的隐藏值，但这并没有像我想的那样工作。

我应该在这里采取什么方向，所以当有人提交表单时，我可以看到主要的“原因”字段（我现在可以看到）以及他们输入的每个电子邮件地址。

（我通过使用 POST 的按钮提交表单）。

```
var projection_record = Ext.data.Record.create([
    { name: 'Email'}
]);

var projections_store = new Ext.data.Store({
    reader: new Ext.data.ArrayReader({
        idIndex: 0
    }, projection_record)
});

var projections_grid = new Ext.grid.EditorGridPanel({
    store: projections_store,
    columns: [
    {
        xtype: 'gridcolumn',
        dataIndex: 'Email',
        header: 'Approval Email',
        sortable: false,
        width: 250,
        editor: new Ext.form.TextField({
            valueField: 'displayText',
            displayField: 'displayText'
        })
    },
    {
        xtype: 'actioncolumn',
        header: "Delete",
        width: 150,
        items: [{
          icon: 'images/delete.png',
          handler: function(grid, rowIndex, colIndex) {
                    var rec = store.getAt(rowIndex);
                    alert("Delete " + rec.get('Email') + " ?");
                }
          //handler: function(grid, rowIndex, colindex) {
              //var record = grid.getStore().getAt(rowIndex);
              //var id = record.get("Email");
              //window.location = '<% $base %>storage_approval_delete/' + id;
          //}
       }]
     }
    ],
    tbar: [{
        text: 'Approvers',
        icon: 'images/Add.png',
        handler: function(){
            var projection = projections_grid.getStore().recordType;
            var p = new projection({
                Email: ''
            });
            projections_grid.stopEditing();
            projections_store.insert(0,p);
            projections_grid.startEditing(0,0);
        }
    }],
    autoHeight: true,
    autoWidth: true,
    trackMouseOver: true,
    stripeRows: true
});

var simpleForm = new Ext.FormPanel ({
    labelWidth: 175,
    id: 'simpleForm',
    url:'./manager_approvals',
    method: 'POST',
    frame:true,
    title: 'Ada a New Project',
    bodyStyle:'padding:5px 5px 0',
    width: 850,
    defaultType: 'textfield',

    items: [
        {
            fieldLabel: 'Request Information',
            name: 'Description',
            xtype: 'textarea',
            allowBlank: true,
            anchor:'100%'
        },
        {
            xtype: 'fieldset',
            title: 'Approving Managers',
            autoHeight: true,
            autoWidth: true,
            collapsible: false,
            collapsed: false,
            items: [projections_grid]
        },
        {
            xtype: 'hidden',
            name: 'hidden1',
            value: projections_store
        }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:50:38.910

嗯....我会认真考虑为电子邮件列表添加逗号分隔字段....

如果您一心想让他们同时提交表单和编辑网格（祝您的用户了解他们需要做什么，祝您好运），您需要做的是提交：查找支持您的网格的商店，获取存储记录中的数据值（迭代），提取您需要的值，用逗号连接，最后设置隐藏字段或仅作为参数包含。

祝你好运。

# c# - 是否可以将 Packaging.package 写入流而不必先将其保存到文件中？

> ID：11246536
> 
> 赞同：4
> 
> 时间：2012-06-28T14:11:24.817
> 
> 标签：c#, .net

我在内存中有一个 System.IO.Packaging.Package（它是一个 WordprocessingDocument），并希望将其流式传输到浏览器以保存它。word 文档已被基于 MVC 的应用程序修改，并且生成的文件已针对当前请求进行了修改。

我知道这个包代表一个包含许多部分的“zip”文件。这些部分包括页眉、页脚和正文文档。我已经单独修改了每个，现在想将包流回给用户。

我可以获得各个部分流... package.GetPart(new Uri("/word/document.xml", UriKind.Relative)).GetStream()

但是我错过了如何在整个文档（包）上获取输出流 - 而无需写入文件系统。

提前致谢

不-我认为我需要的是这样的...我已经阅读了模板文档并在内存中进行了修改。现在我想将修改后的文档（保持模板不变）流回给用户。

```
 MemoryStream stream = new MemoryStream();
        WordprocessingDocument docOut =
            WordprocessingDocument.Create( stream, WordprocessingDocumentType.Document);

        foreach (var part in package.GetParts())
        {
            using (StreamReader streamReader = new StreamReader(part.GetStream()))
            {
                PackagePart newPart = docOut.Package.CreatePart(
                    part.Uri, part.ContentType );
                using (StreamWriter streamWriter = new StreamWriter(newPart.GetStream(FileMode.Create)))
                {
                    streamWriter.Write(streamReader.ReadToEnd());
                }
            }
        } 
```

不幸的是 - 这会产生一个“腐败”的word文档......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:58:40.520

[**OpenXmlPackage.Close 方法**](http://msdn.microsoft.com/en-us/library/documentformat.openxml.packaging.openxmlpackage.close.aspx)将所有部分中的所有更改保存到底层存储。如果您从流中打开包，只需使用该流：

```
public Stream packageStream() {
    var ms = new MemoryStream();
    var wrdPk = WordprocessingDocument.Create(ms, WordprocessingDocumentType.Document);
    // Build the package ...
    var docPart = wrdPk.AddMainDocumentPart();
    docPart.Document = new Document(
        new Body(new Paragraph(new Run(new Text("Hello world.")))));
    // Flush all changes
    wrdPk.Close();
    return ms;
} 
```

# c# - 在 VS 中无法在服务器上解析远程名称

> ID：11246541
> 
> 赞同：1
> 
> 时间：2012-06-28T14:11:41.460
> 
> 标签：c#, asp.net, smtpclient

我使用此代码从我的 webapp 发送电子邮件：

```
 SmtpClient s = new SmtpClient("smtp.gmail.com", 587);

            s.EnableSsl = true;
            s.DeliveryMethod = SmtpDeliveryMethod.Network;
            NetworkCredential myCreds = new NetworkCredential("xxx@gmail.com", "xxxxxxx");

            s.Credentials = myCreds;

            s.Send(m); 
```

在我的机器上测试它运行良好，但它停止在我的服务器上工作。它工作了6个月。服务器与我的机器在同一个网络上，它们共享相同的公共 IP。

# sdl - SDL_SetVideoMode 与 SDL_CreateRGBSurface

> ID：11246543
> 
> 赞同：2
> 
> 时间：2012-06-28T14:11:42.997
> 
> 标签：sdl, sdl-1.2

对于 SDL 专家来说应该是一个简单的问题。我对以下两个看似等效的功能感到困惑，想知道何时使用哪个

```
SDL_Surface * SDL_SetVideoMode (int width, int height, int bpp, Uint32 flags);
SDL_Surface * SDL_CreateRGBSurface (Uint32 flags,
        int width, int height, int depth,
        Uint32 Rmask, Uint32 Gmask, Uint32 Bmask, Uint32 Amask); 
```

以上两者的根本区别是什么？

[这里](http://sdl.beuc.net/sdl.wiki/SDL_CreateRGBSurface)提到SDL_CreateRGBSurface 必须在 SDL_SetVideoMode*之后*调用。为什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T15:48:37.453

它们是完全不同的功能。

`SDL_SetVideoMode`创建视频表面（又名应用程序屏幕）并将其显示给用户。

`SDL_CreateRGBSurface`创建一个空的表面。

调用后`SDL_SetVideoMode`，如果成功，将向用户显示一个屏幕，并且您将拥有（由函数或调用返回`SDL_GetVideoSurface`）视频表面，屏幕表面。

`SDL_CreateRGBSurface`只需创建一个可以玩的空表面。

一些使用示例是：您的应用程序启动并初始化视频，然后创建一个空表面并以某种方式对其进行操作，最后将其blit到视频表面，用户将看到您操作的表面（记得翻转屏幕表面，`SDL_Flip`)。

重要的是要知道 a`SDL_Surface`是什么。既然你不问，我假设你知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:25:48.163

`SDL_SetVideoMode`创建一个窗口。该表面将在屏幕上可见。

`SDL_CreateRGBSurface`创建离屏图像。`SDL_CreateRGBSurface`例如，当您从磁盘加载图像时使用。您需要将其粘贴到屏幕上才能看到它们。

# mysql - 异构数据库连接

> ID：11246548
> 
> 赞同：6
> 
> 时间：2012-06-28T14:11:54.563
> 
> 标签：mysql, sql-server, oracle, postgresql

我是一名学生，主修数据库管理。在我的第五学期，我们需要创建一个使用异构数据库的系统。我们必须使用至少 4 个不同的数据库。我的选择是 MySQL、MS SQL Server、Oracle 和 PostgreSQL，因为这些是最流行和最成熟的数据库。

问题是到目前为止，还没有任何组能够连接到 4 个不同的数据库。我听说使用 Java hibernate spring 可以连接到不同的数据库，但我试图在数据库级别连接到不同的数据库，而不是在应用程序级别。使用像 Oracle 的数据库链接之类的东西。但据我所知，MySQL 没有这个特性。

如果在业界，处理异构数据库的常用方法有哪些？或者是否有任何标准库供我执行此操作？我希望得到一些关于如何使用行业标准处理异构数据库的指南

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:41:01.733

异构数据库是一个艰难的领域，并且正在进行大量研究。您不能指望开箱即用的解决方案。它在很大程度上取决于所涉及的数据库、模式、数据和安全问题。为了帮助您，请阅读本文：[作为 4 层客户端-服务器分布式异构数据库系统的多数据库系统](http://arxiv.org/pdf/0912.0579v1.pdf)

如果您可以自由选择场景，那么让您的生活尽可能轻松：

*   在所有数据库上使用相同的模式
*   对每个数据库使用普通的 JDBC 访问（您将通过这种方式了解更多信息，并且您不必处理 ORM 框架膨胀）
*   一开始只使用一个简单的表格
*   为分布式场景构建所需的组件（查看链接的论文并在互联网上搜索详细信息）
*   把所有东西放在一起
*   请享用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:54:06.027

您可能想查看 Foreign Data Wrapper 功能。它是 SQL 标准的一部分，旨在允许不同数据库产品之间的访问。 [PostgreSQL 可以选择连接到您提到的所有其他人。](http://wiki.postgresql.org/wiki/Foreign_data_wrappers)

我想象其他产品具有类似的功能。

# wpf - How to set autofocus only in xaml?

> ID：11246554
> 
> 赞同：31
> 
> 时间：2012-06-28T14:12:05.377
> 
> 标签：wpf, xaml, textbox, autofocus

Is it possible, to set the autofocus to the textbox in my xaml file?

```
<Window x:Class="WpfApplication1.Views.Test1"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Height="100"
            Width="210"
            WindowStartupLocation="CenterOwner"
            ShowInTaskbar="False"
            Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
            ResizeMode="CanResizeWithGrip">
    <TextBox HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Visible" TextWrapping="Wrap" AcceptsReturn="True" Text="{Binding Path=Text, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
</Window> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-28T16:16:45.557

```
<TextBox FocusManager.FocusedElement="{Binding RelativeSource={RelativeSource Self}}" /> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-28T14:16:44.867

yes you can use **FocusManager.FocusedElement** attached property.

```
FocusManager.FocusedElement="{Binding ElementName=textBox1}" 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-28T14:17:06.360

try somethind like this

```
<Window x:Class="WpfApplication18.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="500" Width="525" FocusManager.FocusedElement="textcontrol">
    <Grid>
       <TextBox Name="textcontrol" />
    </Grid>
</Window> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-04-28T06:33:03.737

I think binding is an overkill, Reference is more lightweight:

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        FocusManager.FocusedElement="{x:Reference textBox1}">
    <StackPanel>
        <TextBox x:Name="textBox1" />
    </StackPanel>
</Window> 
```

* * *

## 回答 #5

> 赞同：-9
> 
> 时间：2013-02-05T22:53:19.843

I usually resolve this with C#

```
textBox1.Focus(); 
```

I think it is the best way how to do this.

# python - 使用python将整数转换/连接为字符串

> ID：11246555
> 
> 赞同：0
> 
> 时间：2012-06-28T14:12:06.507
> 
> 标签：python, file-io

我正在尝试从文本文件中读取最后一行。每一行都以一个数字开头，因此下次插入某些内容时，新数字将增加 1。

例如，这将是一个典型的文件

```
1\. Something here          date
2\. Something else here     date
#next entry would be  "3\.   something    date" 
```

如果文件为空白，我可以毫无问题地输入条目。但是，当已经有条目时，我收到以下错误

```
LastItemNum = lineList[-1][0:1] +1 #finds the last item's number
TypeError: cannon concatenate 'str' and 'int objects 
```

这是我的函数代码

```
 def AddToDo(self): 
    FILE = open(ToDo.filename,"a+") #open file for appending and reading
    FileLines = FILE.readlines() #read the lines in the file
    if os.path.getsize("EnteredInfo.dat") == 0: #if there is nothing, set the number to 1
        LastItemNum = "1"
    else:
        LastItemNum = FileLines[-1][0:1] + 1 #finds the last items number
    FILE.writelines(LastItemNum + ". " + self.Info + "       " + str(datetime.datetime.now()) + '\n')
    FILE.close() 
```

我试图将 LastItemNum 转换为字符串，但我得到相同的“无法连接”错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T14:14:55.673

```
LastItemNum = int(lineList[-1][0:1]) +1 
```

然后你必须`LastItemNum`在写入文件之前转换回字符串，使用：

`LastItemNum=str(LastItemNum)`或者您可以使用字符串格式来代替它。

# c++ - 不使用指针进行微调

> ID：11246558
> 
> 赞同：0
> 
> 时间：2012-06-28T14:12:11.230
> 
> 标签：c++

** 打印用户定义数组中的重复元素

```
//print repeated elements from an array

#include<iostream>
using namespace std;

int main()
  {
   int p,n;

   cout<<"enter no. of elements in array: "<<endl;
   cin>>n;
   int a[n],b[n];
   int z=0;
   cout<<"enter elements of array:"<<endl;
   for(int i=0;i<n;i++)
    {
        cin>>a[i];
    }
    for(int j=0;j<n;j++)
    {
        for(int k=j;k<=n;k++)
        {
            if(j==k)
            {
                continue;
            }
            else if(a[j]==a[k])
            {
                b[z]=a[j];
                ++z;
                a[k]=a[k+1];        //deleting the array element which repeats
                a[n-1]=0;           //settng last element as 0
                --n;                //reducing the size of array
                break;
            }
            int d=z;
            if(b[j]==b[k])
            {
                b[j]=b[j+1];
                b[n-1]=0;
                n--;
            }
        }
    }
    if(z==0)
    {
        cout<<"No Elemnts in the array is repeated"<<endl;
    }
    else
    {
        cout<<"repeated elements are: "<<endl;
        for(p=0;p<z;p++)
            {
                cout<<b[p]<<" ";
            }
    }

return 0;
} 
```

如何微调该程序以显示正确的输出？当我们输入 3 个相似的元素时，它会重复两次，并且在读取最后一个元素时也有问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:37:30.283

你应该重写你的算法。像这样的东西应该工作：

```
 std::vector<int> a;

  /* fill a */

  std::sort(a.begin(), a.end());
  std::vector<int> unique_elements;
  std::unique_copy(a.begin(), a.end(), std::back_inserter(unique_elements));

  std::vector<int> b;
  std::copy_if(unique_elements.begin(), unique_elements.end(), std::back_inserter(b), [&](int n)
  {
    return std::count(a.begin(), a.end(), n) >= 2;
  }); 
```

# linux - Linux 如何在 x86-64 中支持超过 512GB 的虚拟地址范围？

> ID：11246559
> 
> 赞同：6
> 
> 时间：2012-06-28T14:12:12.900
> 
> 标签：linux, linux-kernel, x86-64, mmu

x86-64 与 Linux 的用户虚拟地址空间是 47 位长。这实质上意味着 Linux 可以映射一个具有大约 128 TB 虚拟地址范围的进程。

然而，令我困惑的是 x86-64 架构支持 ISA 为每个进程定义的 4 级分层页表（排列为基数树）。页表的根最多只能映射 512 GB 的连续虚拟地址空间。那么Linux如何能够支持超过512GB的虚拟地址范围呢？它是否为每个进程使用多个页表？如果是，那么对于一个进程，对于任何给定进程，CR3（x86-64 的包含页表基地址的寄存器）应该包含什么？我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T14:55:32.130

> 页表的根最多只能映射 512 GB 的连续虚拟地址空间。那么Linux如何能够支持超过512GB的虚拟地址范围呢？它是否为每个进程使用多个页表？如果是，那么对于一个进程，对于任何给定进程，CR3（x86-64 的包含页表基地址的寄存器）应该包含什么？我错过了什么吗？

我不知道“页表的根”是什么意思，但是 x86-64 上的分页看起来像这样：

*   页表 - 最低级别的分页结构。每个都有 512 个 8 字节条目 (PTE) 描述一个 4 KiB 页面，因此 PT 描述`512 * 4 KiB = 2 MiB`了内存（它也可以用作 2 MiB 页面，但我们现在暂且不谈）。
*   页面目录 - 类似于 PT 的表，包含 512 个指向 PT 的 8 字节条目 (PDE)；因此，PD 描述`512 * 2 MiB = 1 GiB`了内存（它也可以作为 1 GiB 页工作，类似于 PT）。
*   页面目录页表——类似于 PD，但包含 512 个指向 PD 的 8 字节条目（PDPTE）；因此，PDPTE 描述`512 * 1 Gib = 512 GiB`了内存。
*   PML4 是最高级别的分页结构，是包含 512 个 8 字节条目 (PML4E) 的表，指向 PDPT；因此，PML4 描述`512 * 512 GiB = 256 TiB`了内存。

我不知道 Linux 的确切内存映射，但可能上半部分（从 -128 TiB 到 0 - from `0xFFFF800000000000`to `0xFFFFFFFFFFFFFFFF`）保留给内核，下半部分（从 0 到 128 TiB - from `0x0000000000000000`to `0x00007FFFFFFFFFFF`）用于用户空间应用程序。因此，Linux 支持的虚拟地址范围是您所要求的 512 GiB 的 512 倍；甚至 Torvalds 也不会说“我们不会支持 PML4”。我不知道是什么让你感到困惑 - 是不是你错过了说页表映射 2 MiB 的部分，而你把它当作它映射一页 - 4 KiB - 但如果有什么我可以澄清的，请询问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:28:32.113

通常进程地址空间不共享，这意味着所涉及的页表也不在不同进程之间共享。这意味着在所有 4 个表级别。

当然，公共（内核）部分始终存在于所有地址空间中，因此，实际上存在一些共享，但那里的内存只能由内核本身访问。

除此之外，实际上，每个进程都有自己的页表，并且在其中任何一个中使用所有 2 ^(48 个)地址都没有任何问题。至少，在 CPU 方面没有特别的限制，虽然在操作系统方面可以有。

# operating-system - 一个简单的解释在哪里以及如何使用条件变量？

> ID：11246561
> 
> 赞同：0
> 
> 时间：2012-06-28T14:12:23.020
> 
> 标签：operating-system, condition-variable, nachos

google 了将近 2 个小时，想知道使用条件变量的情况有哪些。但我只发现了一堆难以实现的恼人的代码片段。所以我需要对此有一个清晰的概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:37:47.277

我找到了下面的链接，它就像一个伪代码，是使用条件变量的指南。我希望它能极大地帮助从事 nachos 项目或学习 pthreads 的学生。

[https://computing.llnl.gov/tutorials/pthreads/#ConVarOverview](https://computing.llnl.gov/tutorials/pthreads/#ConVarOverview)

# iphone - 通过在 tableview iPhone 错误中选择 tableview 行来添加动态子行？

> ID：11246562
> 
> 赞同：1
> 
> 时间：2012-06-28T14:12:23.303
> 
> 标签：iphone, objective-c, uitableview

我想动态添加行。我有建筑物名称的表格视图列表。如果有人选择建筑物（didSelectRowAtIndexPath），那么建筑物的各个楼层应作为子行动态添加。就像在各自的建筑列表选择中最大化和最小化子行一样。我该怎么做呢。提前致谢...

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
// There is only one section.
if (tableView == indoortable || tableView == indoortable_iPad)
{
    return 1;
}
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section    {
// Return the number of time zone names.
if (tableView == indoortable || tableView == indoortable_iPad)
{
    return [indoorZones count];

}

} 
```

cellForRowAtIndexPath 方法：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

if (tableView == indoortable || tableView == indoortable_iPad)
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView  dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc]  initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

        cell.selectionStyle = UITableViewCellSelectionStyleGray;             //cell bg
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }       
    // Set up the cell.
    //cell.textLabel.text = [copyListOfItems objectAtIndex:indexPath.row];

    cell.textLabel.text =[indoorZones objectAtIndex: indexPath.row];
    //[cell setIndentationLevel:[[self.indoorZones objectAtIndex:indexPath.row] intValue]];
    return cell;
}
} 
```

didSlectRowAtIndexPath 方法：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath   *)indexPath 
 {
zonesFloor = [[NSMutableArray alloc]init];
zonesFloorA = [[NSArray alloc] initWithObjects:@"Gr fl",@"1st fl",@"2nd fl",nil];

[zonesFloor addObject:zonesFloorA]; 
if (tableView == indoortable )
{

    NSUInteger i=indexPath.row+1;
    for (NSArray *count in self.indoorZones)  //app is crashing here giving  error.......Collection <__NSArrayM: 0x4b1d550> was mutated while being enumerated.
 {

        [zonesFloor addObject:[NSIndexPath indexPathForRow:i inSection:0]];
        [self.indoorZones insertObject:zonesFloor atIndex:i++];

    }

    [[self indoortable] beginUpdates];
    [[self indoortable] insertRowsAtIndexPaths:(NSArray *)zonesFloor  withRowAnimation:UITableViewRowAnimationNone];
    [[self indoortable] endUpdates];

    }

if (tableView == indoortable_iPad )
{

    //some logic
}

[tableView deselectRowAtIndexPath:selectedIndexPath animated:NO];
} 
```

它给出以下错误 [__NSArrayI compare:]: Or [NSIndexPath _fastCStringContents:]: unrecognized selector sent to instance。我尝试了很多方法，但可能是我缺少某个地方。请建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:26:35.923

好吧，这听起来并不刻薄，但这里几乎有太多问题无法计算。

让我们从 tableView 的工作原理的基本解释开始，以便您可以开始解决这个问题：

***首先，tableView 通过调用来询问表格中有多少个部分：***

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

} 
```

在您的代码中，您只需告诉它它有一个部分。但是，在您以后的代码中，当您尝试向表中添加行时，您告诉它您要将行添加到第二个部分（索引为 1）。因此，您要么需要将这些行添加到第 0 部分，要么更新上述方法以告诉它，有时有两个部分。

***其次，tableView 通过调用来询问表格的每个部分中有多少行：***

```
- (NSInteger)tableView:(UITableView *)tableView 
             numberOfRowsInSection:(NSInteger)section {

} 
```

在您的代码中，您只是返回区域的数量。但是，像上面一样，您需要包含已添加到表中的行。如果要将它们添加到不同的部分，则需要返回不同的值，具体取决于该部分中有多少行以及`section`变量中要求的索引。如果它们都在同一个部分，那么您需要将它们相加并返回正确的值。

***第三，tableView 通过调用为该行请求一个实际的单元格：***

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
                     cellForRowAtIndexPath:(NSIndexPath *)indexPath {

} 
```

在您的代码中，您只返回一个单元格，该单元格的数据由indoorZones 数组填充，但您还需要提供为特定区域/楼层正确配置的单元格。同样，您需要根据需要通过节号或行号来确定这一点。

***最后，当你点击一行时，tableview 会通过调用以下方法告诉你：***

```
- (void)tableView:(UITableView *)tableView 
        didSelectRowAtIndexPath:(NSIndexPath   *)indexPath {

} 
```

在此方法中，**您**需要更新先前函数使用的数据源，以便在再次调用它们时，它们将提供正确的数据。您的数据源必须反映您希望表格视图的外观。在您的情况下，您有一个名为indoorZones 的数组。如果您只想显示一个区域列表，这很好，这就是您开始做的事情。但是，当您想添加更多行时，您需要先将更多行添加到您的数据源，这样当 tableView 重新开始这个过程时，它就已经存在了。

如果您希望所有内容都保留在一个部分中，那么我会提出一个可以包含两种类型的行的数据源，并且能够区分它们，以便`cellForRowAtIndexPath`可以创建正确类型的单元格并返回它。

如果您想要两个部分，那么我将为第二部分添加第二个数组（因为它不是同一类型的数据）并根据您需要用于该部分的数组在每个方法中返回适当的值.

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:22:43.687

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath   *)indexPath 
{
    //NSIndexPath *selectedIndexPath = [self.indoortable indexPathForSelectedRow];
zonesFloorA = [[NSArray alloc] initWithObjects:@"Gr fl",@"1st fl",@"2nd fl",nil];

if (tableView == indoortable )
{
    for (NSString *str in zonesFloorA) {
        [indoorZones addObject:str];
   }
   //[[self indoortable] beginUpdates];
   //[[self indoortable] insertRowsAtIndexPaths:(NSArray *)zonesFloor  withRowAnimation:UITableViewRowAnimationNone];
   //[[self indoortable] endUpdates];
}
if (tableView == indoortable_iPad )
{

//some logic
 }

  [tableView reloadData];

} 
```

这可以满足你的要求吗

# asp.net-mvc-3 - 年、月和日参数描述了无法表示的 DateTime 异常

> ID：11246563
> 
> 赞同：12
> 
> 时间：2012-06-28T14:12:23.793
> 
> 标签：asp.net-mvc-3, c#-4.0

我正在使用以下代码将对象添加到 ASP.NET MVC 3 应用程序中的列表中，但该对象的属性之一给我带来了困难。

```
ls.Add(new UserRoleModel { UserRoleId = 1, UserName = "Paul", InsertDate = new DateTime(05, 24, 2012),InsertProgram="sqlplus",InsertUser="sp22",Role="Implementation Co-corindator"}); 
```

这会构建，但是当我转到相关页面时，我会收到以下类型的异常：

```
Exception Details: System.ArgumentOutOfRangeException: Year, Month, and Day parameters describe an un-representable DateTime. 
```

我曾尝试在本月删除 0 但我得到了同样的例外。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-28T14:13:45.647

`DateTime` [您正在调用](http://msdn.microsoft.com/en-us/library/xcfzdy4x.aspx)的构造函数接受按年、月、日顺序排列的参数。

您按月、日、年的顺序提供它们——最终试图分配无意义的值。该文档非常清楚允许的值是什么以及如果您将 2012 年作为“日”值会发生什么。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-20T16:26:31.707

我刚刚遇到了这个问题，我的问题是我在二月份创建了一个日期。我尝试执行以下操作...

```
new Date(2013, 2, 30) 
```

由于没有 2 月 30 日，因此无法创建日期。当我改为

```
new Date(2013, 2, 28) 
```

它工作得很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T14:19:50.490

如果`InsertDate`意味着创建日期/时间，您可以使用以下内容

```
DateTime InsertDate  = DateTime.Now; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-24T13:27:51.147

您正在使用无效的日期时间，例如一个月，您可能会比 31 天多 13,14 天

或类似导致问题的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-31T06:36:20.100

我遇到了同样的问题，因为我试图创建一个日期设置为 4 月 31 日的 DateTime 对象，即使 4 月只有 30 天。任何有同样问题的人，确保你没有犯这个错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-02T06:16:18.177

我解决的相同异常为：

```
DateTimePicker1.Value = DateSerial(Year(Now), Month(Now) + 1, 1) 
```

# c# - Web 服务重定向到登录页面

> ID：11246568
> 
> 赞同：0
> 
> 时间：2012-06-28T14:12:38.530
> 
> 标签：c#, restsharp

我正在使用 restsharp 从 Web 服务获取内容。当我执行 restsharp 请求时，它会将我重定向到登录页面。处理此问题的最佳方法是什么。

这是我使用的代码

```
var client = new RestClient("url");
var request = new RestRequest(Method.POST);
var response = client.Execute(request);
var content = response.Content; // raw content as string            
System.Console.Write(content);
var t = System.Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:18:07.827

听起来 WebService 托管在使用表单身份验证的网站中。您可以更改身份验证类型，或实现登录服务方法吗？这可能是最简单、最正确的方法。

另一种选择是在网络浏览器中访问该页面，然后重定向到登录页面。然后，您可以在提供凭据时检查 POSTed 表单的页面和内容，以便在您的代码中模拟登录。

# yii - 如何在 yii 框架中显示对数据库的所有查询

> ID：11246570
> 
> 赞同：5
> 
> 时间：2012-06-28T14:12:46.140
> 
> 标签：yii

在 CodeIgniter 中，我会这样做：

```
print_r ($this->db->queries); 
```

在 Yii 我试过：

```
 print_r (Yii::app()->db) 
```

但这没有显示任何查询。

更新：我理解我的问题：当我想在一个`POST`动作上显示数据库查询时，我不显示它。使用时`GET`，没问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T06:33:03.237

正如@bool.dev 所说，您可以使用`CWebLogRoute`或在我的情况下使用`CFileLogRoute`将这些查询存储在文件中。

```
array (
    'class'      => 'CFileLogRoute',
    'categories' => 'system.db.*',
    'logFile'    => 'sql.log',
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T13:47:20.297

为了补充@snippLeaf-com 的答案，您可以通过您想要的关键字跟踪此文件过滤，如下所示：

```
// filter by "INSERT" or "UPDATE"
$ tail -f /path_to/protected/runtime/sql.log |grep 'INSERT\|UPDATE'

// filter (case insensitive) by "SELECT" in table "x2_users"
$ tail -f /path_to/protected/runtime/sql.log |grep -i SELECT.*x2_users 
```

OBS：要获取新数据，您可能需要刷新数据库缓存：

```
rm -f protected/runtime/cache/*.bin 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-09T11:09:25.913

如果你真的想在**yii**中记录每个查询，请使用[**yii db profiler**](https://github.com/samdark/yii-db-profiler)扩展。

**步骤 1**。[从 -->链接](https://github.com/samdark/yii-db-profiler)下载扩展

**步骤 2**。解压到`protected/extensions/`

**步骤 3**。将文件夹名称重命名`yii-db-profiler-master`为`db_profiler`

**第四步**。将以下内容更新为您的`protected/config/main.php`：

```
<?php
return array(
    // …
    'components' => array(
        // …
        'db' => array(
            // …
            'enableProfiling'=>true,
            'enableParamLogging' => true,
        ),
        'log'=>array(
            'class'=>'CLogRouter',
            'routes'=>array(
                    // …
                    array(
                        'class'=>'ext.db_profiler.DbProfileLogRoute',
                        'countLimit' => 1, // How many times the same query should be executed to be considered inefficient
                        'slowQueryMin' => 0.01, // Minimum time for the query to be slow
                    ),
            ),
        ),
    ),
); 
```

# c# - 在 Resharper 中创建自己的警告？

> ID：11246574
> 
> 赞同：0
> 
> 时间：2012-06-28T14:13:03.177
> 
> 标签：c#, visual-studio-2010, unit-testing, resharper, warnings

我正在尝试编写一些单元测试，我想知道是否有办法发出 Resharper 警告，它会说“嘿，你需要手动运行这个测试！打开 somefile.txt 来阅读如何”。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:06:46.193

您可以编写一个[插件](http://www.jetbrains.com/resharper/features/open_api.html)- 阅读链接中的 Jetbrain 文档页面。
您还可以从可读（和记录）的示例插件 - [Agent Johnson](http://code.google.com/p/agentjohnsonplugin/)中学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T11:11:24.743

另一种方法是使用结构搜索并在目录中保存模式。[http://blogs.jetbrains.com/dotnet/tag/structural-search-and-replace/](http://blogs.jetbrains.com/dotnet/tag/structural-search-and-replace/) [http://www.jetbrains.com/resharper/webhelp/Navigation_and_Search__SSR__Searching_for_Code_with_Pattern.html](http://www.jetbrains.com/resharper/webhelp/Navigation_and_Search__SSR__Searching_for_Code_with_Pattern.html)

# c# - C# FatClient Facebook 身份验证失败：返回 URI 不包含令牌

> ID：11246578
> 
> 赞同：2
> 
> 时间：2012-06-28T14:13:18.263
> 
> 标签：c#, .net, facebook, oauth, authorization

在接收用于身份验证的 Facebook oauth 响应字符串时，我遇到了一个奇怪的问题`System.Windows.Controls.Webbrowser`。发送以下请求 URI：

```
https://www.facebook.com/dialog/oauth?client_id=[APPID]&redirect_uri=https://www.facebook.com/connect/login_success.html&scope=publish_stream,read_friendlists,email&response_type=token 
```

但我收到的只是`[https://www.facebook.com/connect/login_success.html](https://www.facebook.com/connect/login_success.html)`，即没有access_token。

![FBLoginWindow失败](../Images/ca0e36b135b3b49ccaae03b176c5a944.png)

奇怪的是，将请求 URI 复制并粘贴到浏览器（例如 IE8）中会正确返回 auth-uri

```
https://www.facebook.com/connect/login_success.html#access_token=[PROPERTOKEN]&expires_in=[PROPERNUMBER] 
```

这是我一直在尝试的：（完整的 C# 类： http: [//pastebin.com/GePLHXnD](http://pastebin.com/GePLHXnD)）

首先，发送请求 URI：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        StringBuilder authReqUri = new StringBuilder("https://www.facebook.com/dialog/oauth?client_id=");
        authReqUri.Append(Properties.Settings.Default.FBAppID);
        authReqUri.Append(   "&redirect_uri=https://www.facebook.com/connect/login_success.html&scope=");
        authReqUri.Append(Properties.Settings.Default.FBScope);
        authReqUri.Append("&response_type=token");
        Properties.Settings.Default.FBReqString = authReqUri.ToString();
        return;
    } 
```

并 onWindowClose 执行解析令牌：

```
 /// <summary>
    /// Property to indicate if authentication with facebook was a success
    /// </summary>
    public bool AuthenticatedSuccessfully
    {
        get
        {
            // Cast to a browser control to get at the current source 
            if (uiFrameLogin.Content.GetType() == typeof(WebBrowser))
            {
                WebBrowser webBrowser = (WebBrowser)uiFrameLogin.Content;
                if (webBrowser.Source != null && webBrowser.Source.ToString().Contains("&error"))
                    return false; // look for an error 
                else
                    if (
                        webBrowser.Source != null &&
                        webBrowser.Source.AbsolutePath.Contains("login_success")
                       )
                    {
                        string temp;
                        temp = Regex.Replace(webBrowser.Source.Fragment, "^.*access_token=", "");
                        Properties.Settings.Default.FBAccessToken = System.Text.RegularExpressions.Regex.Replace(temp, "&.*", "");

                        temp = Regex.Replace(webBrowser.Source.Fragment, "^.*access_token=.*&", "");
                        Properties.Settings.Default.FBExpiresIn = System.Text.RegularExpressions.Regex.Replace(temp, "expires_in=", "");

                        return true; // if its at this page, we've auth'd successfully
                    }
            }

            return false; // cant find the success page, cant indicate a successful auth - no return false.
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:59:05.537

此代码有效....

```
private void button1_Click(object sender, EventArgs e)
{
  webBrowser1.Navigated += new WebBrowserNavigatedEventHandler(webBrowser1_Navigated);
  webBrowser1.Navigate("https://www.facebook.com/dialog/oauth?client_id=[AppId]&redirect_uri=https://www.facebook.com/connect/login_success.html&scope=publish_stream,read_friendlists,email&response_type=token");
}

void webBrowser1_Navigated(object sender, WebBrowserNavigatedEventArgs e)
{
  Console.WriteLine(webBrowser1.Url);
} 
```

# jquery - Jquery+XML+Google Maps 适用于 FF/IE 但不适用于 Chrome/Opera

> ID：11246582
> 
> 赞同：2
> 
> 时间：2012-06-28T14:13:35.780
> 
> 标签：jquery, xml, google-maps-api-3

几天来我一直在与这个问题作斗争：我正在使用 Jquery 从 XML 中提取数据并将其作为标记放置在 Google Maps V3 上，但它没有在 Chrome 和 Opera 上放置任何标记，经过一些调试后我发现问题出在这几行：

```
 var lat = $(this).find("geo\\:lat").text();      
  var lng = $(this).find("geo\\:long").text(); 
```

在 XML 中，我需要删除“：”。

虽然在 FF 和 IE 中，删除“：”的“\”可以完美运行，但在 Chrome 和 Opera 上不起作用..但是如果我转到 XML 并从该字段中删除“：”并使用此行运行代码，它完美运行。

```
 var lat = $(this).find("geolat").text();      
  var lng = $(this).find("geolong").text(); 
```

这是在 Chrome 和 Opera 上复制错误的简化版本 [http://dl.dropbox.com/u/15802004/teste.zip](http://dl.dropbox.com/u/15802004/teste.zip) 要复制错误，这是注释/取消注释行。

```
//url: "teste1.xml",     
  url: "teste2.xml",

(and...)        

    //var lat = $(this).find("geo\\:lat").text();            
   //var lng = $(this).find("geo\\:long").text();             
      var lat = $(this).find("geolat").text();      
      var lng = $(this).find("geolong").text(); 
```

我很感激任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T23:24:06.033

这是一个已知但仍未修复的错误。

您可以`getElementsByTagNameNS()`改用（适用于 FF、Chrome 和 Opera）并`$.find()`作为 IE 的后备。

示例`geo:lat`：

```
var lat =(( $.browser.msie )
           ? $(this).find('geo\\:lat')
           : $(this.getElementsByTagNameNS('http://www.w3.org/2003/01/geo/wgs84_pos#','lat'))
         ).text(); 
```

# netbeans - 如何在Netbeans中编码模板变量转换大写|小写|大写？

> ID：11246583
> 
> 赞同：11
> 
> 时间：2012-06-28T14:13:36.233
> 
> 标签：netbeans

我需要将相同的变量转换为大写|小写|大写。

```
/**
 * @package     ${1 default="Hello"}
 * @subpackage  ${com}_${1 capitalize=false}
 * @copyright   Copyright (C) 2012 ${AtomTech}, Inc. All rights reserved.
 * @license     GNU General Public License version 2 or later; see LICENSE.txt
 */

// No direct access
defined('_JEXEC') or die; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-29T06:30:38.000

大写

```
${name?upper_case} 
```

小写

```
${name?lower_case} 
```

大写

```
${name?capitalize} 
```

Netbeans 使用[FreeMarker](http://freemarker.org/)作为其模板语言。特定于您的请求的文档[位于关于 strings 的页面上](http://freemarker.org/docs/ref_builtins_string.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T20:29:10.250

很容易解决，见：

`${1/(.+)/\L\1/g}`

`${var_name/regex/format_string/options}`

`var_name = 1`

`regex = (.+)`

`format_string = \L\1 (can use l|L|u|U)`

`options = g`

[在http://sublimetext.info/docs/en/reference/snippets.html](http://sublimetext.info/docs/en/reference/snippets.html)中查看更多信息

# database - 为 PHPMyadmin DB 自动生成数据库图？

> ID：11246593
> 
> 赞同：29
> 
> 时间：2012-06-28T14:13:54.613
> 
> 标签：database, phpmyadmin, diagram

我想要生成下面的数据库图的工具，我需要生成特定的数据库表结构，如下所示，

![在此处输入图像描述](../Images/9bcf415ad239e265702566afce61ae84.png)

我该怎么做？...是否有任何免费工具或应用程序可用。我已经尝试过 navicat8lite_ora_en 和 HeidiSQL。但我不能让它工作。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-03-05T10:37:52.760

是的，您可以使用 PHPMyAdmin 生成 ERD。PHPMyadmin 从 3.4 版添加了此功能

生成 ERD 的详细步骤：http: [//sforsuresh.in/generating-erd-using-phpmyadmin/](http://sforsuresh.in/generating-erd-using-phpmyadmin/)

您可以参考 PHPMyAdmin 文档了解更多信息：[http ://www.phpmyadmin.net/documentation/#pmadb](http://www.phpmyadmin.net/documentation/#pmadb)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-28T15:12:11.543

[MySQL Workbench](http://www.mysql.com/products/workbench/)将为您进行逆向工程和工程脚本。输出将与您上面的类似，但不完全相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-12T16:29:55.310

试试[Vertabelo](http://www.vertabelo.com/)。它是一个在 Chrome 下工作的在线数据库建模器。这是：

*   免费使用，
*   独立于操作系统，
*   允许版本控制，
*   支持模型验证，
*   为特定数据库生成 SQL 脚本：
*   允许与团队的其他成员共享您的数据库模型，
*   [允许逆向工程](http://www.vertabelo.com/blog/reverse-engineering)-因此您可以轻松地将数据库迁移到[Vertabelo](http://www.vertabelo.com/)，
*   支持以下数据库：
    *   PostgreSQL,
    *   mysql,
    *   甲骨文，
    *   IBM DB2,
    *   数据库，
    *   微软 SQL 服务器。

# c++ - C++ 前向声明（指针） - 访问成员

> ID：11246594
> 
> 赞同：0
> 
> 时间：2012-06-28T14:13:54.893
> 
> 标签：c++, class, pointers, member, forward-declaration

我正在使用 OpenGL 和 DirectX，并且我已经开始开发面向对象游戏类的基础知识。当前类的结构如下：

对象
---|---Actor
---------|---Pawn
---------|---Controller

所以我有继承哪个继承的`Pawn`和`Controller`类。`Actor``Object`

问题是我需要在 pawn 类中有一个引用，在控制器类中有`Controller`一个实例。 因此，我提前声明并在：`Pawn`
`Pawn``Controller``Actor.h`

```
// Actor.h

// (...) Actor Declaration (...)

class Pawn;
class Controller; 
```

然后在`Pawn.h`：

```
// Pawn.h

class Pawn : public Actor
{
private:
    Controller* controller;
public:
    void DoSomethingWithController(void);
} 
```

这一切都很好，没有错误。问题是当我想访问该类中的成员时：

```
void Pawn::DoSomethingWithController(void)
{
    // this->controller-> can't access members like this (members not found)
} 
```

那么，我应该怎么做才能在 Pawn 中有一个 Controller 的指针，在我的 Controller 中有一个指向 Pawn 的指针，将它们保存在不同的文件（.h 和 .cpp）中，同时能够访问它的成员？

感谢您的时间。:D

[如果需要更多信息，我会提供]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T14:24:47.600

前向声明告诉编译器将进一步提供给定的类型。编译器不知道该类型的字段或成员。因此，您需要在 .cpp 文件（访问“控制器”类成员的地方）中包含相应的 .h 文件。

# html - 如何使用 jquerymobile 制作粘性页脚？

> ID：11246596
> 
> 赞同：0
> 
> 时间：2012-06-28T14:13:55.707
> 
> 标签：html, mobile, css, jquery-mobile

我希望我的页脚始终贴在屏幕底部，除非有足够的页面内容填满屏幕在这种情况下，内容应该优先并将页脚推离底部（这样你就有了滚动查看）。

以下是所需行为的示例： [http ://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

需要明确的是，我知道[JQM 中的固定工具栏](http://jquerymobile.com/test/docs/toolbars/bars-fixed.html)，它们不是我想要的，因为当有很多内容时它们会占用宝贵的屏幕空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:13:56.300

我最接近的是以下CSS规则：

```
[data-role=footer] {
    bottom: 0;
    position: absolute;
    width: 100%;
} 
```

如果您知道更好的方法，请发布答案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:27:17.977

可能您应该尝试在 JqMobile 中**固定全屏或非全屏但固定页眉和页脚...**

在 jqMobile 中，添加了此功能，对于 webapp 开发人员来说，这是其中**最有活力的功能**。

看看吧。。

[固定工具栏：JqMobile](http://jquerymobile.com/demos/1.1.0/docs/toolbars/bars-fixed.html)

您还可以通过添加类来为空间问题应用自定义 css ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:11:51.630

我最好的解决方案：

```
$(document).ready(function(){
    $("html, body, .ui-page").height($(window).height());
} 
```

希望这可以帮助。

# tomcat - 如何使 Tomcat 与 META-INF/context.xml 中定义的 TomcatInstrumentableClassLoader 以及 WEB-INF/lib/spring-instrument-tomcat.jar 一起工作

> ID：11246598
> 
> 赞同：5
> 
> 时间：2012-06-28T14:14:00.197
> 
> 标签：tomcat, classloader, spring-data, load-time-weaving, context.xml

我构建了一个简单的应用程序，它在服务器端使用 Spring Data 3.1.0.RELEASE 和 Eclipselink 2.4 - 它托管在 Tomcat 7.0.27 中。在 mywebapp/META-INF/context.xml 我有 Spring 类加载器

```
<Loader loaderClass="org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader"/> 
```

如果我放入`spring-instrument-tomcat.jar`，`$TOMCAT_HOME/lib`则 Tomcat 运行 mywebapp 很好，但如果我放入`spring-instrument-tomcat.jar`- `$TOMCAT_HOME/webapps/mywebapp/WEB-INF/lib`Tomcat 异常死亡

```
java.lang.IllegalStateException: ClassLoader [org.apache.catalina.loader.WebappClassLoader] does NOT provide an 'addTransformer(ClassFileTransformer)' method. Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring's agent: -javaagent:org.springframework.instrument.jar 
```

上下文加载器参数`useSystemClassLoaderAsParent`设置为`false`也无济于事。

我不想在 Tomcat 中有任何（自定义）全局库（在我们的现实生产系统中拥有全局库并不容易），因此我试图简单地本地化所有需要的东西（但很大）战争文件。关于如何实现这种封装的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T23:10:07.850

好吧，如果您不想在 Tomcat 的 lib 文件夹中添加额外的 jar，唯一的选择（仍然让 Spring / AspectJ LTW 工作）是编辑 tomcat 的运行脚本以将 -javaagent:...instrument.jar 添加到其 JAVA_OPTS 或 CATALINA_OPTS ，并删除 context.xml 文件（您将不再需要 TomcatInstrumentableClassLoad‌​er）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T03:02:05.357

可能是你`context.xml`的不对。试试这个：

```
<?xml version="1.0" encoding="UTF-8" ?>
<Context>
  <Loader
    loaderClass="org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader"
    useSystemClassLoaderAsParent="false" />
</Context> 
```

# jquery - POST 方法看不到 append() 元素（jQuery）

> ID：11246603
> 
> 赞同：0
> 
> 时间：2012-06-28T14:14:13.213
> 
> 标签：jquery, post, append

jQuery 代码将新的虚拟对象“.add”添加到对象“.main”

```
$(document).ready(function(){
    $('.main').on('click', '.add', function (){
    $('.main').append('<div class="add">Next element</div><input type="hidden" name="param[]" value="Next element"/>');
});
});

</script> 
```

表单“main”的 HTML 代码：

```
<form action="" method="post" class="main">
    <div class="add">First element</div>
    <input type="hidden" name="param[]" value="First element"/>
    <input type="submit" name="submit" value="go"/>
</form> 
```

PHP迭代“参数”数组：

```
if (isset($_POST['submit']))
{
    foreach ($_POST['param'] as $element) 
    {
        echo '<br/>'.$element;
    }
} 
```

在 $_POST 中不会有 jquery 附加的元素。怎么修？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:16:45.530

正因为如此：

```
 <input type="hidden" name="param[]" value="Next element"/> 
```

我也尝试过一次，这样做`[]`不起作用，您必须在其中放置一个实际索引，例如：

```
<input type="hidden" name="param[1]" value="Next element"/> 
```

最好的方法是计算你已经拥有的项目的长度并制作元素的索引。

所以你的代码看起来像：

```
$(document).ready(function(){
    $('.main').on('click', '.add', function (){
        var i = $('.my_input').length-1; // Because its an array
        $('.main').append('<div class="add">Next element</div><input class="my_input" type="hidden" name="param['+i+']" value="Next element"/>');
    });
}); 
```

请注意我是如何将类添加到输入中的？

### 编辑

这是一个绝对适用于您当前 HTML 的

```
$(document).ready(function(){
    $('.main').on('click', '.add', function (){
        var i = $('input[name*="param"]').length-1; // Because its an array
        $('.main').append('<div class="add">Next element</div><input type="hidden" name="param['+i+']" value="Next element"/>');
    });
}); 
```

仍然可以更好地优化，但嗯......

# java - 设计多模块 Java EE 应用程序

> ID：11246604
> 
> 赞同：1
> 
> 时间：2012-06-28T14:14:18.857
> 
> 标签：java, jakarta-ee, architecture, application-design

可能是我的问题是抽象的或断章取义的，但我在这里问是因为我不知道这是怎么发生的。

我想知道有多大的应用程序/平台将应用程序分解为多个模块，以及它们如何管理模块依赖项。

例如，在一些电子商务应用程序中，他们倾向于将其分解为各种模块，如定价、促销、shipping.import/export 等等。当我们开发这些应用程序时，我们几乎不会考虑底层模块以及它们是如何设计为提供功能主义者的。

这些模块中的大多数不是 Web 应用程序，而是独立模块，并且没有作为 jar 文件部署在 Web 应用程序中。

任何人都可以帮助我了解他们是如何分解事物的，或者是否有任何标准方法可以做到这一点。任何获得洞察力的帮助/资源都会很有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:34:27.283

> 电子商务应用程序 [...] 倾向于将 [应用程序] 分解为各种模块，如定价、促销、shipping.import/export 等等。[...] 任何人都可以帮助我了解他们是如何分解事物的，或者是否有任何标准方法可以做到这一点。

从技术的角度来看，有多种方法可以将应用程序模块化。大型系统被分割成必须相互通信的模块，并且有多种技术可以做到这一点：EJB、Web 服务、库、数据库、文件系统、消息队列等。这是一种模糊的回答方式。

在实际应用中，十个要根据公司的社会结构进行模块化。这是[康威定律](http://en.wikipedia.org/wiki/Conway%27s_law)。由于定价、促销、运输通常是组织内的不同团队，因此每个团队都有可能拥有一个工程组，并且系统将根据组织团队进行模块化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:12:01.507

尝试查看可用的各种 Maven 原型。

例如：[http ://appfuse.org/display/APF/Home](http://appfuse.org/display/APF/Home)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T09:13:00.843

您可以将许多 EJB jar 归档打包到一个 EAR 归档中。

# scroll - Sencha Touch 2：滚动后列表中的自动居中项目

> ID：11246605
> 
> 赞同：0
> 
> 时间：2012-06-28T14:14:21.053
> 
> 标签：scroll, sencha-touch-2

[我正在尝试以与http://zite.com/](http://zite.com/)应用程序类似的方式实现轮播（或带有 srcoll 的标签） 。主要目标是在滚动结束后实现最接近中心项目的自动居中滚动。

你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:09:39.747

当然，如果您想将 a 居中`Ext.Carousel`到 main中，请`Ext.Panel`编写类似这样的内容，

```
new Ext.Panel({
    fullscreen: true,
    ...
    layout: {
       type: 'vbox', 
       align: 'center', 
       pack: 'center'
    },
    items: [
       new Ext.Carousel({
          ...
       })
    ]
}) 
```

并以乐趣`Carousel`为中心。我希望这有帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:43:26.767

除了在滚动结束事件中手动计算中心并滚动到它之外，没有找到任何其他方法。

# c++ - 使用在地图上查找

> ID：11246606
> 
> 赞同：7
> 
> 时间：2012-06-28T14:14:22.443
> 
> 标签：c++, dictionary

`const_iterator`如果您将地图定义为，您如何使用 find 和 a

```
typedef std::pair<int, int> MyPair;
map<MyPair, int> MyMap; 
```

以`pair`定义为键。

如果只是`map<int, int>`，我知道如何使用`const_iterator`like

```
typedef map<int, int> MyMap;
MyMap::const_iterator it = 
      MyMap.find(0);

// etc.. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T14:17:36.423

**如果您不使用 C++11**，最方便的是也`typedef`为 map 类型做一个：

```
typedef std::map<MyPair, int> map_type; 
```

接着

```
map_type::const_iterator it = MyMap.find(make_pair(0, 0)); 
```

（我也改变了传递给的参数`find`，因为一个bare`int`与你的地图不兼容）。

**如果您使用的是 C++11**，您也可以简单地做

```
auto it = MyMap.find(make_pair(0, 0)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T14:18:15.937

Find 采用地图的键类型，因此在这种情况下，您需要创建`std::pair`要在查找中使用的键类型。这是一个简短的示例：

```
#include <map>
#include <string>
#include <iostream>
using namespace std;

int main()
{
   std::map<std::pair<int, int>, std::string> m;

   m.insert(make_pair(make_pair(0, 0), "Hello"));
   m.insert(make_pair(make_pair(1, 0), "There"));

   auto res = m.find(make_pair(0,0));

   if(res != m.end())
   {
      cout << res->second << "\n";
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T12:50:29.360

上述代码中存在编译问题。请找到正确的如下：

```
#include <map>
#include <string>
#include <iostream>

using namespace std;

int main()
{
   std::map<std::pair<int, int>, std::string> m;
   std::map<std::pair<int, int>, std::string>::iterator res;

   m.insert(std::make_pair(make_pair(0, 0), "Hello"));
   m.insert(std::make_pair(make_pair(1, 0), "There"));

   res = m.find(make_pair(0,0));

   if(res != m.end())
   {
      cout << res->second << "\n";
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-24T14:19:38.023

认为你可以使用

```
std::map<std::pair<int, int>, std::string> m = {
    {{ 0, 0 }, "Hello" },
    {{ 1, 0 }, "There" },
 }; 
```

代替

```
m.insert(std::make_pair(make_pair(0, 0), "Hello"));
m.insert(std::make_pair(make_pair(1, 0), "There")); 
```

# c++ - 将 dll 导入另一个 dll C++

> ID：11246617
> 
> 赞同：1
> 
> 时间：2012-06-28T14:14:45.613
> 
> 标签：c++, dll, c-preprocessor, dllimport, dllexport

我在多个 dll 中有多个类，每个 dll 可能包含其他类。

我使用以下宏来`__declspec`为我的 dll 的所有标头指定参数：

```
#ifdef DLL_UTIL_A
#define DLLEXPORT __declspec(dllexport)
#else
#define DLLEXPORT __declspec(dllimport)
#endif 
```

假设 dllA 包括 dllB。问题是，当我在 dllA 中包含 dllB 的头文件时，宏`DLLEXPORT`被重新定义以从 dllB 的头文件中导入类。当预处理器返回到 dllA 以继续解析时，它会使用更新`DLLEXPORT`后的不需要的值进行更新。

我应该为每个 dll 使用不同的定义（例如，替换`DLLEXPORT`为`DLLEXPORT_DLL_A`），还是有一种干净的方法可以`DLLEXPORT`在返回 dllA 时恢复旧值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:16:27.293

您需要为两个 DLL 的 DLLEXPORT 使用不同的宏名称。

# c# - 如何在 MSI 安装程序上部署具有不同名称的相同 Web 服务的多个实例

> ID：11246623
> 
> 赞同：0
> 
> 时间：2012-06-28T14:15:15.163
> 
> 标签：c#, .net, wcf, windows-installer

我希望使用 MSI 安装程序部署 wcf webservice 的多个实例。当我尝试部署相同的 web 服务时，我收到错误消息，说当存在同名的现有应用程序时我无法安装。

仅供参考，我之所以尝试安装相同的 Web 服务两次，是因为我有多个使用此 Web 服务的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:03:42.487

我认为这是一种多次部署相同 Web 服务的方法。您可以创建多个具有不同名称的设置项目。同样，您可以使用单独的设置项目设置现有的 wcf 服务。

# ruby-on-rails - cloudfoundry rails 3.2.3 ruby 1.9 部署错误

> ID：11246624
> 
> 赞同：1
> 
> 时间：2012-06-28T14:15:24.533
> 
> 标签：ruby-on-rails, cloud-foundry

我是 cloudfoundry 和 rails 的新手，我正在尝试将新应用程序部署到 cloudfoundry，但出现此错误：

```
====> /logs/migration.log <====

←[31mYou have requested:
  mysql2 ~> 0.3.11

The bundle currently has mysql2 locked at 0.3.11.
Try running `bundle update mysql2`←[0m 
```

我从这里下载了一些 Rails 示例： [https](https://github.com/cloudfoundry-samples) ://github.com/cloudfoundry-samples ，结果相同。

我已经尝试过“捆绑更新 mysql2”

如果我推送一个需要 gem mysql2 的简单 ruby​​ 应用程序，它可以正常工作。

我正在使用 Windows 7 x64。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T23:18:15.777

将 Windows 上捆绑的 ruby​​ 应用程序部署到 CloudFoundry.com（基于 Linux）时存在问题。解决方法是修改您的 Gemfile.lock 并删除出现的字符串`-x86-mingw32`。然后将应用程序重新推送到 Cloud Foundry。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:03:22.443

你能确认你已经跑了吗？

```
bundle update
bundle package 
```

在使用 VMC 推送应用程序之前。

# javascript - 从一个视图触发事件到另一个视图

> ID：11246625
> 
> 赞同：1
> 
> 时间：2012-06-28T14:15:26.237
> 
> 标签：javascript, backbone.js

我有两种不同的方式在我的网站上显示我的模型，当然我会用不同的视图来处理它们。

但是，我希望能够以某种方式连接这些视图，这样当特定模型的一个视图上发生事件时，它也可以触发另一个视图上的事件。

为简单起见，假设我有一个集合，并且我用两个生成相同`ul`列表的视图来表示该集合。（实际上，观点当然不同）。

HTML

```
<ul class="view-a">
    <li class="subview-a">Model 1</li>
    <li class="subview-a">Model 2</li>
</ul>

<ul class="view-b">
    <li class="subview-b">Model 1</li>
    <li class="subview-b">Model 2</li>
</ul> 
```

骨干

```
viewA = Backbone.View.extend({
    tagName: 'ul',
    className: 'view-a',
});

viewB = Backbone.View.extend({
    tagName: 'ul',
    className: 'view-b',
});

subViewA = Backbone.View.extend({
    tagName: 'li',
    className: 'subview-a',
    events: {
         'mouseover':'over',
    },
    over: function() {
        console.log('mouse over on A');
    }
});

subViewB = Backbone.View.extend({
    tagName: 'li',
    className: 'subview-b',
    events: {
        'mouseover':'over',
    },
    over: function() {
         console.log('mouse over on B');
    },
}); 
```

你可能会问：为什么没有相同的子视图？在此示例中，两个子视图都是`li`，但在实际实现中不是。

那么如何在鼠标悬停`subview B`时触发 mouseover 事件`subview A`，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:47:01.937

与 Backbone 的事件模型通信。当我这么说的时候相信我，但是在使用 Backbone 时，请尝试选择模块化方法。换句话说，每个视图，即使可能相关，也不应该依赖于另一个视图。它不仅使测试变得极其困难，而且还使调试成为一场噩梦，并导致意大利面条式代码。看看[这篇文章](http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/)。它解释了视图如何使用 Backbone 的事件模型相互通信。您应该熟悉 PubSub 模式。[这个问题](https://stackoverflow.com/questions/9984859/backbone-js-can-one-view-trigger-updates-in-other-views)也有关系。

更新！所以如果我以你为例

```
var vent = _.extend({}, Backbone.Events);

subViewA = Backbone.View.extend({
    tagName: 'li',
    className: 'subview-a',
    initialize: function () {
        vent.on('my-event', this.over, this);
    },
    events: {
         'mouseover':'over',
    },
    over: function(dataRecieved) {
        console.log('mouse over on A');
    }
});

subViewB = Backbone.View.extend({
    tagName: 'li',
    className: 'subview-b',
    events: {
        'mouseover':'over',
    },
    over: function() {
         vent.trigger('my-event', "data you would like to pass");
    },
}); 
```

# ifstream - ifstream 在声明时设置故障位

> ID：11246627
> 
> 赞同：0
> 
> 时间：2012-06-28T14:15:28.607
> 
> 标签：ifstream

我完全不明白为什么会这样。我正在尝试打开一个文件以将一些数据读入我的程序，但 failbit 立即被设置，在它周围移动错误消息似乎在我尝试 input.open() 之前实际上已经设置了 failbit。代码中未声明的变量是存在于其他地方的全局变量（混乱但稍后会改进）这是一个更大项目的违规函数：

```
int read_input()
{
ifstream input;
string value;
int file_complete=0;
int count=0;

if(input.failbit)
    printf("Really?\n");

input.clear();

input.open("Input.txt");

while(!file_complete)
{
    if(input.failbit)
    {
        printf("Reading in set-up value number %d failed.", count+1);
        getchar();
        return 1;
    }
    else if(input.eofbit)
    {
        file_complete=1;
    }

    if(input.get()=='=')
    {
        getline(input, value);

        switch(count)
        {
            case 0:
                n_loci=atoi(value.c_str());
                count++;
                break;
            case 1:
                n_founders=atoi(value.c_str());
                count++;
                break;
            case 2:
                n_self=atoi(value.c_str());
                count++;
                break;
            // Add more cases later
        }
    }
}

input.close();

return 0;
} 
```

这个程序对我来说是：

真的吗？读取 1 号设置值失败。

我假设我做了一些非常愚蠢的事情，但现在已经有一段时间了。

PS我正在Windows 7之上的cygwin上使用最新版本的g ++进行编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:09:31.023

好的，现在我自己解决了这个问题：

*   在某些实现中，Failbit 似乎是由 EOF 设置的，所以我改用 input.good() ，因此一切都很好。
*   我的程序中也存在一些逻辑错误，检查“=”部分也是因为 ifstream.get() 将其值作为整数返回，因此我需要将它们转换回字符以进行比较。

# linux - 用于构建系统的 SVN 预提交

> ID：11246630
> 
> 赞同：2
> 
> 时间：2012-06-28T14:15:33.847
> 
> 标签：linux, svn

什么是 SVN 预提交的最佳脚本只允许包含以下字符串的提交

第 1234 期

这是为了帮助我们的构建系统在与 svn 存储库交谈时标记我们的错误系统中的票证

就像是

* * *

如果评论包括

第 1234 期

然后提交

否则

失败“请输入问题”

* * *

这是一个 SVN linux 配置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T21:05:14.367

[在http://blog.grimsy.net/2008/07/a-few-svn-pre-commit-hooks/](http://blog.grimsy.net/2008/07/a-few-svn-pre-commit-hooks/)中有一个很棒的预提交日志条目查询示例

# java - Java中日期的转换

> ID：11246633
> 
> 赞同：0
> 
> 时间：2012-06-28T14:15:36.500
> 
> 标签：java, date, date-format

为什么如果我将日期从毫秒转换为天，然后再从天转换为毫秒，此日期会更改？

例如：

```
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd");
Date date = format.parse("2012-06-02");
System.out.println(date);
Long dateAsDays = TimeUnit.MILLISECONDS.toDays(date.getTime());

System.out.println(
    new Date(
        TimeUnit.DAYS.toMillis(dateAsDays)
    ) ); 
```

将打印：

> 2012 年 6 月 2 日星期六 00:00:00 GMT+03:00
> 
> 2012 年 6 月 1 日星期五 03:00:00 GMT+03:00

如何在此转换中保存月份中的某一天？为什么这段代码不能正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:18:51.333

当您在几天内获得日期时，日期变得不那么准确。您在 GMT+3，因此 12:00 GMT 对您来说是 3:00。从[TimeUnit 类参考](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html#convert%28long,%20java.util.concurrent.TimeUnit%29)：

> 兑换
> 
> public long convert(long sourceDuration, TimeUnit sourceUnit)
> 
> 将给定单位中的给定持续时间转换为此单位。**从更细粒度到更粗粒度的转换会截断，因此会丢失精度**。例如，将 999 毫秒转换为秒的结果为 0。从粗粒度到细粒度的转换，如果参数为负数，则会在数值上溢出饱和到 Long.MIN_VALUE，如果为正数，则为 Long.MAX_VALUE。例如，要将 10 分钟转换为毫秒，请使用：TimeUnit.MILLISECONDS.convert(10L, TimeUnit.MINUTES)

# firefox - Firefox 插件无法识别 Update.rdf 文件中的新版本

> ID：11246635
> 
> 赞同：0
> 
> 时间：2012-06-28T14:15:46.813
> 
> 标签：firefox, firefox-addon, rdf, add-on

我使用[McCoy 工具](https://developer.mozilla.org/en/McCoy)“安装”了我的 install.rdf 文件并签署了我的 update.rdf 文件。

在我的`Install.rdf`文件中，我有：

```
<?xml version="1.0"?>
<RDF:RDF xmlns:em="http://www.mozilla.org/2004/em-rdf#"
         xmlns:NC="http://home.netscape.com/NC-rdf#"
         xmlns:RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  <RDF:Description RDF:about="rdf:#$e2DK."
                   em:id="{ec8030f7-c20a-464f-9b0e-13a3a9e97384}"
                   em:minVersion="4.0"
                   em:maxVersion="15.*" />
  <RDF:Description RDF:about="urn:mozilla:install-manifest"
                   em:id="{ext-id}"
                   em:type="2"
                   em:name="Ext X"
                   em:version="1.0.4"
                   em:description="..."
                   em:creator="Bruno Leonardo Michels"
                   em:updateURL="http://www.example.com/dl/update.rdf"
                   em:bootstrap="false"
                   em:updateKey="xxx">
    <em:targetApplication RDF:resource="rdf:#$e2DK."/>
  </RDF:Description>
</RDF:RDF> 
```

在我的`Update.rdf`文件中，我有：

```
<?xml version="1.0"?>
<RDF:RDF xmlns:em="http://www.mozilla.org/2004/em-rdf#"
         xmlns:NC="http://home.netscape.com/NC-rdf#"
         xmlns:RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  <RDF:Description RDF:about="rdf:#$D1abg"
                   em:version="1.0.4">
    <em:targetApplication RDF:resource="rdf:#$G1abg"/>
  </RDF:Description>
  <RDF:Description RDF:about="rdf:#$G1abg"
                   em:id="{ec8030f7-c20a-464f-9b0e-13a3a9e97384}"
                   em:minVersion="4.0"
                   em:maxVersion="15.*"
                   em:updateLink="http://www.example.com/dl/ext.xpi"
                   em:updateInfoURL="http://www.example.com/dl/ext.txt" />
  <RDF:Description RDF:about="rdf:#$M1abg"
                   em:version="1.0.3">
    <em:targetApplication RDF:resource="rdf:#$P1abg"/>
  </RDF:Description>
  <RDF:Description RDF:about="urn:mozilla:extension:{ext-id}"
                   em:signature="xxx">
    <em:updates RDF:resource="rdf:#$C1abg"/>
  </RDF:Description>
  <RDF:Seq RDF:about="rdf:#$C1abg">
    <RDF:li RDF:resource="rdf:#$D1abg"/>
    <RDF:li RDF:resource="rdf:#$M1abg"/>
  </RDF:Seq>
  <RDF:Description RDF:about="rdf:#$P1abg"
                   em:id="{ec8030f7-c20a-464f-9b0e-13a3a9e97384}"
                   em:minVersion="4.0"
                   em:maxVersion="15.*"
                   em:updateLink="http://www.example.com/dl/ext103.xpi"
                   em:updateInfoURL="http://www.example.com/dl/ext.txt" />
</RDF:RDF> 
```

当我单击“查找更新”时，Firefox 请求 update.rdf url 并检索具有正确版本 (1.0.4) 的正确文件。但它什么也没做，不显示任何更新，不更新......它只是保留在版本 1.0.3 中......

不是`em:version`什么决定了插件版本吗？我在这里想念什么？

为了测试我安装并签署了一个版本`1.0.4`并将版本更改为`1.0.3`已安装并签署，所以我有两个版本不同的数字。我安装了该版本`1.0.3`，我正在尝试`1.0.4`通过更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:44:39.873

由于我没有使用`https`，我必须在文件中包含`em:updateHash`下面`em:updateLink`的`update.rdf`内容。我使用了从[Hashtab](http://www.implbits.com/HashTab/HashTabWindows.aspx)生成的 SHA1 。

```
em:updateHash="sha1:<hash>" 
```

添加哈希后，您必须再次签署文件。

# nsdate - NSDateFormatter 将字符串转换为日期总是军用时间

> ID：11246636
> 
> 赞同：0
> 
> 时间：2012-06-28T14:15:48.457
> 
> 标签：nsdate, nsdateformatter

我有一个字符串，它表示存储在军事时间的日期。我想在 12 小时内将这个字符串显示在标签中。这是我的代码片段：

```
NSTimeZone *timeZone = [NSTimeZone localTimeZone];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setTimeZone:timeZone];  
[dateFormat setDateFormat:@"MM/dd/yyyy hh:mm:ss"];
NSLog(@"Current Date: %@", [dateFormat stringFromDate:[NSDate date]]);
NSLog(@"Sent date: %@",[myPlanData valueForKey:@"planDate"]);
NSDate *aDate =[dateFormat dateFromString:[myPlanData valueForKey:@"planDate"]];
NSLog(@"Converted date is: %@",aDate);
NSString *planDateString = [dateFormat stringFromDate:aDate];
NSLog(@"The converted date string is: %@",planDateString);
planDateLabel.text=planDateString; 
```

输出是：

当前日期：2012 年 6 月 28 日 10:08:48 -（所以我的日期格式化程序看起来正确？）

发送日期：06/30/2012 20:47:34 -（这是发送的值）

转换后的日期是：（null）-（这里是中断的地方！）

转换后的日期字符串为：(null)

* * *

如果我将日期格式更改为

[dateFormat setDateFormat:@"MM/dd/yyyy HH:mm:ss"];

一切都很顺利，但我最终会显示军用时间。我只是想将其转换为 12 小时时间并显示在标签中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T01:33:57.127

好吧，这就是我最终修复它的方式

```
NSTimeZone *timeZone = [NSTimeZone localTimeZone];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setTimeZone:timeZone];  
[dateFormat setDateFormat:@"MM/dd/yyyy HH:mm:ss"];

NSDateFormatter *dateFormatback = [[NSDateFormatter alloc] init];
[dateFormatback setTimeZone:timeZone];
[dateFormatback setDateFormat:@"MM/dd/yyyy hh:mm:ss a"];

NSLog(@"Current Date: %@", [dateFormat stringFromDate:[NSDate date]]);
NSLog(@"Sent date: %@",[myPlanData valueForKey:@"planDate"]);
NSDate *aDate =[dateFormat dateFromString:[myPlanData valueForKey:@"planDate"]];
NSLog(@"Converted date is: %@",aDate);
NSString *planDateString = [dateFormatback stringFromDate:aDate];
NSLog(@"The converted date string is: %@",planDateString);

planDateLabel.text=planDateString; 
```

不确定这是否是最好或正确的方法，但它有效！

# c++ - 使用 Sphinx-apidoc 从 C++ 代码生成文档

> ID：11246637
> 
> 赞同：25
> 
> 时间：2012-06-28T14:15:48.510
> 
> 标签：c++, python-sphinx, documentation-generation, sphinx-apidoc

过去有几个关于这个主题的线程声称 Sphinx 根本不支持这个。我有我的疑虑，但要么它已经更新，要么它的文档被很好地隐藏了，因为这是网站上的一个链接，另有说明： [http ://www.sphinx-doc.org/en/master/usage/重组文本/domains.html#cpp-domain](http://www.sphinx-doc.org/en/master/usage/restructuredtext/domains.html#cpp-domain)

无论如何，我是 Sphinx 的新手，但我正在尝试使用它（最终）使用来自某些源 C++ 代码的一些文本来自动化文档。`sphinx-apidoc -o ...`到目前为止，使用该命令时我无法到达任何地方。创建了一个几乎空白的文档。我可能没有使用正确的指令，因为我不知道如何 - 支持文档无法帮助我。

任何人都可以就使其工作所需的基本步骤提供一些帮助吗？如果无法从 C++ 自动生成文档，C++ 域的用途是什么以及如何使用它们？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-28T17:16:07.253

## 关于自动生成 C++ 文档：

在完全阅读了[如何使用 sphinx](https://www.sphinx-doc.org/en/master/usage/quickstart.html)之后，您应该看看[呼吸](http://michaeljones.github.com/breathe/index.html)：

> Breathe 在 Sphinx 和 Doxygen 文档系统之间架起了一座桥梁。
> 
> 在 Sphinx 生成的一组文档中包含 Doxygen 信息是一种简单的方法。目的是为喜欢使用 Sphinx 但使用 Python 以外的其他语言的人提供类似自动文档的支持。该系统依赖于 Doxygen 的 xml 输出。

所以另外，你需要遵循[Doxygen](http://www.doxygen.nl/)的评论风格，甚至设置一个 doxygen 项目。但我试过了，它在初始设置后运行得非常好。这是[我们`CMakeLists.txt`](https://github.com/pyuniverse/pyuniverse/blob/cpp-cleanup/CMakeLists.txt)的摘录，它可能会让您了解 sphinx 和 doxygen 如何协同工作：

```
macro(add_sphinx_target TARGET_NAME BUILDER COMMENT_STR)
    add_custom_target(${TARGET_NAME}
    COMMAND sphinx-build -b ${BUILDER} . sphinx/build/${BUILDER}
        WORKING_DIRECTORY docs
        DEPENDS doxygen
        COMMENT ${COMMENT_STR}
    )

endmacro(add_sphinx_target)

add_custom_target(doxygen
    COMMAND doxygen docs/doxygen.conf
    COMMENT "Build doxygen xml files used by sphinx/breathe."
)

add_sphinx_target(docs-html
    html
    "Build html documentation"
) 
```

因此，在初始设置之后，基本上可以归结为：

1.  构建 doxygen 文档`doxygen path/to/config`
2.  `cd`进入 sphinx 配置所在的目录。
3.  建立狮身人面像文档`sphinx-build . path/to/output`

## 在 c++ 域上：

Sphinx 不仅仅是一个自动生成文档的系统。我建议您看一下[示例](https://www.sphinx-doc.org/en/master/usage/extensions/example_google.html)（并考虑 sphinx 网站本身是用 sphinx reST 代码编写的）。`Show Source`特别是在许多 sphinx 生成的页面上单击链接。

因此，如果您无法为项目自动生成文档，则必须自己完成。基本上 sphinx 是对任何（LaTeX、HTML、...）编译器的一个 reST。所以你可以写任意文本，但优点是它有很多用于记录不同语言源代码的命令。每种语言都有自己的域（前缀或名称空间）来分隔不同语言的名称空间。因此，例如，我可以使用以下方法记录一个 python 函数：

```
.. py:function:: Timer.repeat([repeat=3[, number=1000000]])
    Does something nasty with timers in repetition 
```

（[来源](https://www.sphinx-doc.org/en/master/usage/restructuredtext/domains.html#the-python-domain)）

我可以使用 cpp 域做同样的事情：

```
.. cpp:function:: bool namespaced::theclass::method(int arg1, std::string arg2)

   Describes a method with parameters and types. 
```

（[来源](https://www.sphinx-doc.org/en/master/usage/restructuredtext/domains.html)）

因此，如果您想在没有 doxygen+breath 而使用 sphinx 的情况下记录您的 c++ 项目，您必须自己编写重组后的文本文件。这也意味着您将文档与源代码分开，这可能是不可取的。

我希望这能把事情弄清楚一点。为了进一步阅读，我*强烈*建议您仔细阅读[sphinx 教程](https://www.sphinx-doc.org/en/master/usage/quickstart.html)和[文档](https://www.sphinx-doc.org/en/master/contents.html)，直到您了解它的实际作用。

# c# - mysql vs ms-access DB上的sql查询左连接

> ID：11246638
> 
> 赞同：1
> 
> 时间：2012-06-28T14:15:49.540
> 
> 标签：c#, .net, mysql, ms-access, oledbcommand

这个查询

```
SELECT * 
FROM tblContracts 
LEFT JOIN tblPartys ON tblContracts.id = tblPartys.Contract_id 
INNER JOIN tblAdministrators 
        ON tblContracts.AdministratorID = tblAdministrators.ID 
```

适用于 mysql 数据库，但不适用于 Access DB ！！！

我收到这个错误打击：

> System.Data.OleDb.OleDbException：查询表达式“tblContracts.id = tblPartys.Contract_id INNER JOIN tblAdministrators ON tblContracts.AdministratorID = tblAdministrators.I”中的语法错误（缺少运算符）。在 System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr) 在 System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult) 在 System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult) 在 System.Data。 System.Data.OleDb.OleDbCommand.ExecuteReaderInternal（CommandBehavior 行为，String 方法）处 System.Data.OleDb.OleDbCommand.ExecuteReader（CommandBehavior 行为）处的 OleDb.OleDbCommand.ExecuteCommand（CommandBehavior 行为，Object& executeResult）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:21:52.720

尝试在第一个连接周围添加几个括号

```
SELECT * 
FROM (tblContracts 
LEFT JOIN tblPartys ON tblContracts.id = tblPartys.Contract_id) 
INNER JOIN tblAdministrators 
        ON tblContracts.AdministratorID = tblAdministrators.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:54:26.623

尝试这个：

```
 SELECT *  FROM ((tblContracts 
   LEFT JOIN tblPartys ON tblContracts.id = tblPartys.Contract_id ) 
     INNER JOIN tblAdministrators ON tblContracts.AdministratorID = tblAdministrators.ID ) 
```

以我的经验，Access 喜欢括号……有点太多了，如果你问我的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:21:21.817

根据您发布的错误，您误`ON tblContracts.AdministratorID = tblAdministrators.ID`写成`ON tblContracts.AdministratorID = tblAdministrators.I`解释：

> 查询表达式“tblContracts.id = tblPartys.Contract_id INNER JOIN tblAdministrators ON tblContracts.AdministratorID = tblAdministrators.I”中的语法错误（缺少运算符）。在 ...

所以确保它写成`ON tblContracts.AdministratorID = tblAdministrators.ID`

# php - 如何使用 PHP 将文本附加到特定标签内的外部 html 文件？

> ID：11246644
> 
> 赞同：4
> 
> 时间：2012-06-28T14:16:11.447
> 
> 标签：php, html, string, append

假设我有一个外部 html 页面，我想在我的 php 管理页面的特定标签内附加文本，例如在这个 span 标签内放置杂项文本。

例如：

```
<html>
<body>
<span class="text"></span>
</body>
</html> 
```

我将如何用 PHP 做到这一点？我正在尝试为这个网站制作一个管理页面，我需要在某些标签内附加文本。我什至不知道从哪里开始，请指出正确的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:27:36.710

您可以使用 PHP 的 DOMDocument 来执行此操作，如下所示：

```
// Load the HTML document
$doc = new DOMDocument;
$doc->loadHtmlFile( 'htmlpage.html');

// Get the parent node where you want the insertion to occur
$parent = $doc->getElementsByTagName('body')->item( 0);

// Create the child element 
$child = $doc->createElement( 'span');
$child->setAttribute( 'class', 'text');

// Append (insert) the child to the parent node
$parent->appendChild( $child);

// Save the resulting HTML
echo $doc->saveHTML(); 
```

所以，给定这个 HTML：

```
<html>
<body>
</body>
</html> 
```

生成的[HTML 将是](http://viper-7.com/uLo4bJ)：

```
<html>
<body>
<span class="text"></span>
</body>
</html> 
```

（忽略 DOMDocument 添加的 DOCTYPE 声明，如果它不存在）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:42:27.040

Depending on what exactly you need this for, you may be able to do this another way -- make that target .HTML file into a .PHP file instead, with it filling in the appropriate content itself using, let's say, a function called `get_span_contents()`, like so:

```
<html>
<body>
  <span class="text">
    <?PHP get_span_contents(); ?>
  </span>
</body>
</html> 
```

One downside is that this will be generated for every request of the document (potentially, depending on caching schemes), whereas if you separated it into two steps (1\. Write out the HTML, 2\. Serve the HTML separately) you would only ever be doing the generation once. Depending on how dynamic the content is, or how minor the computation cost, that might not be a problem.

# api - chrome.extension.onMessage 未定义

> ID：11246646
> 
> 赞同：7
> 
> 时间：2012-06-28T14:16:14.910
> 
> 标签：api, google-chrome, google-chrome-extension

我有一个简单的插件，它只是做这样的事情：

```
chrome.extension.onMessage.addListener(function(msg, _, sendResponse) {
    log("Got message from background page: " + msg);
}); 
```

不幸的是，当我的面板被加载时，会显示以下错误：

```
TypeError: Cannot call method 'addListener' of undefined 
```

根据我的测试`chrome.extension.onMessage`是`undefined`

根据这个页面[http://code.google.com/chrome/extensions/messaging.html](http://code.google.com/chrome/extensions/messaging.html)我应该能够从我的页面访问这个 chrome API，所以它必须是我在这里缺少的一些小东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:07:32.933

**请注意方法`chrome.extension.onRequest`和`chrome.extension.sendRequest`，正如最初在此答案中建议的那样，自 Chrome 33 起已弃用。**

* * *

你应该使用

```
chrome.extension.onRequest 
```

代替

```
chrome.extension.onMessage 
```

在后台页面或任何其他扩展脚本中：

```
chrome.tabs.sendRequest 
```

代替

```
chrome.tabs.sendMessage 
```

（文档已过时......提醒谷歌团队;））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:05:20.700

确保您使用的是最新的 Google Chrome 版本。旧版本没有 chrome.extension.onMessage API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:12:46.710

附带说明：同样基于 Chromium 的 Yandex 浏览器（主要面向俄罗斯人）（截至 2012 年 11 月 10 日，版本 1.0）具有 .*Request 方法而不是 .*Message。非常感谢 Ciprian Amariei 的提示，它为我节省了很多时间！

PS：这实际上应该是对 Ciprian Amariei 的回答的评论，但不幸的是我还不能发表评论，尽管这些信息可能对那些为 Yandex 浏览器开发扩展的人非常有帮助。

# c# - 投射一个可能为空的对象

> ID：11246647
> 
> 赞同：3
> 
> 时间：2012-06-28T14:16:16.023
> 
> 标签：c#, datetime, casting, null

```
DateTime? testDate = (DateTime?)arrayOfObjects[dateObject]; 
```

那个代码看起来没问题吗？我尝试使用该`as`运算符，但出现“不可为空”错误。我想说的是，我从数组中选择的对象是`DateTime`或者是，`null DateTime`但要么可以分配给 testDate。

这样做感觉不对，我想我错过了一些明显的东西。

编辑：我想这与我可以`as`通过以下方式调整的方式相同：

```
DateTime? testDate = arrayOfObjects[dateObject] as DateTime?; 
```

任何一行代码都是处理潜在空值的最佳方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:24:56.607

> 任何一行代码都是处理潜在空值的最佳方式吗？

`null`当数组包含 DateTime 以外的内容时，第二种形式将静默产生。这似乎是使用第一个的好理由。

对于基本问题：

> 我错过了什么还是这是典型的（或至少是可接受的）方法

这是可以接受的，但可能有点模糊，因为它“隐藏”了一个拆箱操作。
你可以使用：

```
DateTime? testDate = null;
if (arrayOfObjects[dateObject] != null)  
   testDate = (DateTime) arrayOfObjects[dateObject];  // no '?' 
```

但这很冗长。而这个特殊问题并不适合条件运算符 ( `?:`)

所以我会坚持你的第一个版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:31:14.740

约会时间？是另一个结构的较短形式

```
Nullable<DateTime> {
    bool HasValue;
    DateTime Value;
} 
```

你永远不会从你的数据库中得到这种类型，所以第一行永远不会正确转换。数据库将为您提供存储在对象变量中的 DateTime 值。或 null（无类型）。

DateTime 是一个结构，因此“as”运算符不适用于它。因此，只需按如下方式检查 null：

```
DateTime? testDate = arrayOfObjects[dateObject] == null ? (DateTime?) null : (DateTime)arrayOfObjects[dateObject]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:22:00.677

更好的方法是执行以下操作：

```
if(arrayOfObjects[dateObject] != null && arrayOfObjects[dateObject] is DateTime)
{
  DateTime testDate = (DateTime)arrayOfObjects[dateObject];
  // logic here
} 
```

或类似的东西：

```
DateTime? testDate = null;
if(arrayOfObjects[dateObject] is DateTime)
{
    testDate = (DateTime)arrayOfObjects[dateObject];
} 
else if (arrayOfObjects[dateObject] is Nullable<DateTime>) 
{
    testDate = (Nullable<DateTime>)arrayOfObjects[dateObject];
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-28T14:29:42.487

尝试使用 Array.ConvertAll 方法。以下是它的大致实现方式：

```
DateTime?[] dates = Array.ConvertAll<object, DateTime?>arrayOfObjects,DateTime); 
```

注意：这只是一个粗略的想法。你可以更正它以适合你自己。

# algorithm - 每前三位数字拆分

> ID：11246650
> 
> 赞同：0
> 
> 时间：2012-06-28T14:16:25.300
> 
> 标签：algorithm

我有这样的代码“010200345”

我想每前三位分开

请帮助解决这个问题

谢谢卡皮尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:21:13.610

从我的一个项目中：

```
String.prototype.chunk = function(n) {
    if(this.length > 0) {
        n = typeof n == 'undefined' ? 2 : n;
        return this.match(new RegExp('.{1,'+n+'}','g'));
    } else return [];
}; 
```

然后你可以使用这样的东西：

```
var parts = String(num).chunk(3); // parts as array 
```

# asp.net - 如何在单击“赞”按钮时在新选项卡中打开 Facebook 登录窗口

> ID：11246655
> 
> 赞同：4
> 
> 时间：2012-06-28T14:16:45.550
> 
> 标签：asp.net, facebook, facebook-like

我们如何`Facebook`在新窗口中打开`Tab`而不是在新窗口中打开`window`？

## 我的 HTML 如下

```
<div style="position: relative; top: 3px;" id="likeButton">
        <iframe frameborder="0" scrolling="no" allowtransparency="true" style="border: none;
            overflow: hidden; width: 260px; height: 35px;" src="http://www.facebook.com/plugins/like.php?href=http:\\localhost\login.aspx|@&amp;send=false&amp;layout=button_count&amp;width=100&amp;
          show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=arial&amp;height=35">
        </iframe>
    </div> 
```

**问题是**- 单击 时`Like Button`，会在新窗口中打开`Facebook`登录窗口。我怎样才能在新版本中打开它`Tab`

我的 JSFiddle 在**[这里](http://jsfiddle.net/QDxdQ/)**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T03:20:05.520

试试这个代码，它对我有用。

```
<a style="position: absolute; top:0px; left: 0px; width:100px; height:40px; cursor:pointer;" href="https://www.facebook.com/login.php?skip_api_login=1&display=popup&social_plugin=like&external_page_url=http%3A%2F%2Finvalid.invalid%2F&next=http%3A%2F%2Fwww.facebook.com%2Fconnect%2Fuiserver.php%3Fmethod%3Dopt.inlike%26app_id%3D127760087237610%26display%3Dpopup%26social_plugin%3Dlike%26secure%3Dfalse%26protocol%3Dhttp%253A%26external_page_url%3Dhttp%253A%252F%252Finvalid.invalid%252F%26from_login%3D1%26client_id%3D127760087237610&rcount=1" target="_blank"></a>

<div style="position: ansolute; top: 0px;z-index:0; cursor:pointer;" id="likeButton">
        <iframe frameborder="0" scrolling="no" allowtransparency="true" style="border: none; overflow: hidden; width: 260px; height: 35px;z-index: 0;" src="http://www.facebook.com/plugins/like.php?href=http:\\localhost\login.aspx|@&amp;send=false&amp;layout=button_count&amp;width=100&amp; show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=arial&amp;height=35"></iframe>

</div>​ 
```

工作示例：http: [//jsfiddle.net/JpWCf/](http://jsfiddle.net/JpWCf/)

从 href更改**external_page_url**参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T10:09:23.870

恐怕我必须同意其他评论者的观点。您无法控制浏览器如何处理 Facebook 以特定大小打开新窗口的请求。但是，默认情况下，它通常会以小弹出窗口的形式打开，以响应窗口大小请求。

不过，我确实要做的是：[劫持单击“赞”按钮并打开其他内容的示例-在新选项卡](http://jsfiddle.net/UUdt7/)中。这还不是您想要的，但可能有助于您朝着正确的方向开始。

您现在需要想办法打开一个尝试喜欢您的页面的页面。

它真的被归结为你需要在新标签而不是弹出窗口中发生这种情况有多糟糕。也许导致您达到该要求的决定需要重新考虑？

# php - 用 pchart 绘制日期

> ID：11246671
> 
> 赞同：1
> 
> 时间：2012-06-28T14:17:15.623
> 
> 标签：php, graph, pchart

我正在尝试为 xaxis 使用日期值，但找不到任何有关如何执行此操作的文档。

我在旧版本的 pchart 中找到了这个，但在新版本的 pchart 中函数调用不一样。 [http://pchart.sourceforge.net/documentation.php?topic=advexemple20](http://pchart.sourceforge.net/documentation.php?topic=advexemple20)

例如，我的 Y 值是`10, 20, 30`，我的 X 值是`2012-03-31, 2012-04-20, 2012-05-25`。我无法弄清楚如何使用添加点添加日期。

我已经读到您将使用 unix 时间戳，但后来我迷失了如何在 pcharts 中格式化 xaxis。

# .net - EF Code First：可以转换为 SQL 的方法

> ID：11246677
> 
> 赞同：6
> 
> 时间：2012-06-28T14:17:42.130
> 
> 标签：.net, linq, entity-framework, ef-code-first, expression-trees

我正在寻找一种方法来创建一个可以在我的 Linq 查询中使用的函数，该函数将转换为 SQL。当我们使用 Linq-to-SQL 时，我提出了一个类似的[问题](https://stackoverflow.com/questions/3790744/creating-methods-that-do-translate-to-sql)。答案是映射到数据库中的 UDF。由于模型定义的简洁性，我们使用代码优先模型，但不幸的是，据我所知，没有办法[定义函数](http://msdn.microsoft.com/en-us/library/dd456812.aspx)、映射到函数和映射到存储的过程（我猜这个想法是代码首先应该生成数据库，我不应该向它添加东西）。对我来说似乎不是很有可扩展性，因为它没有简单的方法来处理可能随着时间而演变的低效率，但这既不是这里也不是那里......

无论如何，我知道我可以定义谓词表达式，这些表达式将转换为我可以在查询中使用的 SQL，如下所示：

```
public static Expression<Func<MyEntity, bool>> FilterMe(int comparisonNumber)
{
    return x => x.SomeProperty == comparisonNumber;
}

var query = MyEntities.Where(FilterMe(1)); 
```

这是否仅适用于返回的表达式`bool`？我正在寻找类似的东西：

```
var query = from m in MyEntities
            let endDate = GetEndDate(m.Start, m.Duration)
            where endDate <= DateTime.Now
            select m; 
```

有什么方法可以构建`GetEndDate`表达式函数吗？当我在查询中长期编写代码时，其中的代码`GetEndDate`可以很好地转换为 SQL，但它很长而且阅读起来很混乱。

编辑 - 哦，在有人回答“使用 SQLFunctions for DateAdd”之前，我的例子就是这样......一个例子。还有无数其他我想使用它的方法。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:41:30.423

您可以尝试使用带有 .AsExpandable() 和 .Compile() 的 LinqKit：[http](http://www.albahari.com/nutshell/linqkit.aspx) : //www.albahari.com/nutshell/linqkit.aspx，它允许在 Linq 查询中使用表达式。

# node.js - Node.js - 连接版本不兼容

> ID：11246678
> 
> 赞同：1
> 
> 时间：2012-06-28T14:17:46.373
> 
> 标签：node.js

我在机器上安装的连接版本是 2.3.4。当我安装 node-inspector、mongoose 等软件包时，它说我的连接版本应该在 1.8 到 1.9 之间并中止。

我应该卸载我的连接并安装旧版本吗？

错误日志：

```
npm ERR! message No compatible version found: connect@'>=1.8.5- <1.9.0-'
npm ERR! message Valid install targets:
npm ERR! message ["0.0.1","0.0.2","0.0.3","0.0.4","0.0.5","0.0.6","0.1.0","0.2.0","0.2.1","0.2.2","0.2.3","0.2.4","0.2.5","0.2.6","0.2.7","0.3.0","0.4.0","0.5.0","0.5.1","0.5.2","0.5.3","0.5.4","0.5.5","0.5.6","0.5.7","0.5.8","0.5.9","0.5.10","1.0.0","1.0.1","2.2.2","2.3.0","2.3.1","2.3.2","2.3.3","1.9.1","2.3.4"] 
```

完整日志：

```
npm http GET https://registry.npmjs.org/node-inspector
npm http 200 https://registry.npmjs.org/node-inspector
npm http GET https://registry.npmjs.org/socket.io
npm http GET https://registry.npmjs.org/connect
npm http GET https://registry.npmjs.org/async
npm http 304 https://registry.npmjs.org/connect
npm ERR! Error: No compatible version found: connect@'>=1.8.5- <1.9.0-'
npm ERR! Valid install targets:
npm ERR! ["0.0.1","0.0.2","0.0.3","0.0.4","0.0.5","0.0.6","0.1.0","0.2.0","0.2.1","0.2.2","0.2.3","0.2.4","0.2.5","0.2.6","0.2.7","0.3.0","0.4.0","0.5.0","0.5.1","0.5.2","0.5.3","0.5.4","0.5.5","0.5.6","0.5.7","0.5.8","0.5.9","0.5.10","1.0.0","1.0.1","2.2.2","2.3.0","2.3.1","2.3.2","2.3.3","1.9.1","2.3.4","2.3.5"]
npm ERR!     at installTargetsError (/usr/local/lib/node_modules/npm/lib/cache.js:506:10)
npm ERR!     at next_ (/usr/local/lib/node_modules/npm/lib/cache.js:452:17)
npm ERR!     at next (/usr/local/lib/node_modules/npm/lib/cache.js:427:44)
npm ERR!     at /usr/local/lib/node_modules/npm/lib/cache.js:419:5
npm ERR!     at saved (/usr/local/lib/node_modules/npm/node_modules/npm-registry-client/lib/get.js:136:7)
npm ERR!     at /usr/local/lib/node_modules/npm/node_modules/graceful-fs/graceful-fs.js:230:7
npm ERR!     at Object.oncomplete (fs.js:297:15)
npm ERR!  [Error: No compatible version found: connect@'>=1.8.5- <1.9.0-'
npm ERR! Valid install targets:
npm ERR! ["0.0.1","0.0.2","0.0.3","0.0.4","0.0.5","0.0.6","0.1.0","0.2.0","0.2.1","0.2.2","0.2.3","0.2.4","0.2.5","0.2.6","0.2.7","0.3.0","0.4.0","0.5.0","0.5.1","0.5.2","0.5.3","0.5.4","0.5.5","0.5.6","0.5.7","0.5.8","0.5.9","0.5.10","1.0.0","1.0.1","2.2.2","2.3.0","2.3.1","2.3.2","2.3.3","1.9.1","2.3.4","2.3.5"]]
npm ERR! You may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Linux 3.0.0-17-generic-pae
npm ERR! command "/usr/local/bin/node" "/usr/local/bin/npm" "install" "node-inspector" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:14:33.313

在 Win7 中使用 nodejsV0.8.0 时出现同样的错误。

**我在使用 V0.8.1 时修复了它，你可以试试：** [http ://nodejs.org/dist/v0.8.1/](http://nodejs.org/dist/v0.8.1/)

# visual-studio-2010 - 多个非连续变更集的无基础合并

> ID：11246679
> 
> 赞同：4
> 
> 时间：2012-06-28T14:17:56.560
> 
> 标签：visual-studio-2010, tfs, branching-and-merging, baseless-merge

我向 TFS 发出以下命令：

```
>tf merge /baseless c:\ws\source c:\ws\target /recursive /version:C100~C100 
```

但是我有大量需要合并的变更集。是否有为此的快捷方式，或者以某种方式指定列表，例如：

```
>tf merge /baseless c:\ws\source c:\ws\target /recursive /version:C100,C108,C110,C800,C1001,etc... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:23:24.513

从另一个帖子中抓取了这个，你可能已经看到了，但由于我没有遇到这个，我只是想伸出援助之手。

你有几个选择：

*   如果您知道要合并的变更集（或要避免合并的变更集），则可以从要合并的文件中选择结构上的文件夹，然后通过选择所需的特定变更集进行合并。如果您有变更集 2000,2001,2004,2010 并且您想要 2001 和 2010，这有点复杂。每次合并只能合并列表中的连续变更集，因此您必须合并 2001 和 2010。这仍然比合并好如果您有更多文件，则有很多文件，然后是变更集组。
*   如果您想将该文件夹下的所有内容合并到一个特定的变更集或最近的变更集，您可以在一次批量合并中完成。

在这两种情况下，您仍然必须解决对源分支和目标分支中同一文件中的同一行进行不同更改的问题。

OP：[在 TFS 中合并多个文件](https://stackoverflow.com/questions/5858859/merge-multiple-files-in-tfs)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T00:58:25.503

如果 powershell 是一个选项，下面的脚本应该会有所帮助（未经测试！）：

```
$cslist = 1,23,45,456,568 #list of all changesets
foreach ($cs in $cslist) { & 'C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\tf.exe' merge /baseless c:\ws\source c:\ws\target /recursive /version:C$cs } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-29T10:37:54.920

以下扩展声称可以做到这一点：

[TFS 生产力工具 - 扩展合并 2012](https://github.com/mirik123/tfsprod)

> ExtendedMerge 扩展为 TFS 未实现的几个合并功能提供了解决方法：
> 
> 1.  TFS 合并导致批量签入操作，将所有先前变更集中的文件放入一个大的合并变更集中。
> 2.  **TFS 仅允许通过合并操作对连续的变更集进行偷窥。**
> 3.  TFS 不允许通过选择工作项来为cherry-peek 合并选择变更集。
> 4.  TFS 合并对话框没有“强制”和“无根据”选项。

您可能还想在[Visual Studio User Voice](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2638075-tfs-to-merge-multiple-non-continuous-changesets)中支持此功能。

# c# - XML 元素没有正确嵌套在 foreach 中

> ID：11246682
> 
> 赞同：1
> 
> 时间：2012-06-28T14:18:05.827
> 
> 标签：c#, xml

刚刚编写了一个 Web 服务并尝试将共享点列表的列返回为 xml。但是项目没有正确嵌套

```
 System.Xml.XmlNode node = doc.AppendChild(doc.CreateElement("Inventories"));
            foreach (ListItem item in items)
            {
                node = node.AppendChild(doc.CreateElement("Inventory"));
                node.AppendChild(doc.CreateElement("ID")).InnerText = Convert.ToString(item["ID"]);
                node.AppendChild(doc.CreateElement("Name")).InnerText = Convert.ToString(item["Server_Name"]) + " >> " + Convert.ToString(item["Computer_Name"]) + " >> " + Convert.ToString(item["IP"]);
            }
        }
            return doc.InnerXml; 
```

这个返回

```
<inventories>
  <inventory>
    <ID></ID>
    <Name></Name>
    <ID></ID>
    <Name></Name>
    <ID></ID>
    <Name></Name>
  </inventory></inventory></inventory>
</inventories> 
```

所以 foreach 循环中的库存项目有点奇怪，我只是希望它成为每个 ID 和 Name 属性的父级，但没有弄清楚我做错了什么。

必须是那样的

```
<inventories>
  <inventory>
    <ID></ID>
    <Name></Name>
  </inventory>
  <inventory>
    <ID></ID>
    <Name></Name>
  </inventory>
  <inventory>
    <ID></ID>
    <Name></Name>
  </inventory>
</inventories> 
```

所有的帮助都将不胜感激，感谢大家的阅读

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:23:32.753

您正在重用名称“节点”尝试：

```
System.Xml.XmlNode rootNode = doc.AppendChild(doc.CreateElement("Inventories"));
System.Xml.XmlNode childNode;
            foreach (ListItem item in items)
            {
                childNode =doc.CreateElement("Inventory");
                childNode .AppendChild(doc.CreateElement("ID")).InnerText = Convert.ToString(item["ID"]);
                childNode .AppendChild(doc.CreateElement("Name")).InnerText = Convert.ToString(item["Server_Name"]) + " >> " + Convert.ToString(item["Computer_Name"]) + " >> " + Convert.ToString(item["IP"]);
                rootNode.AppendChild(childNode);
            }
        }
        return doc.InnerXml; 
```

# javascript - 带有 MooTools 的 Jsonp

> ID：11246683
> 
> 赞同：1
> 
> 时间：2012-06-28T14:18:06.407
> 
> 标签：javascript, arrays, json, mootools

我正在学习 javascript，现在我正在尝试使用 mootools。我想在远程使用 json 文件，所以我正在尝试使用 jsonp。现在我有一个文本框，当我单击一个按钮时，我想请求一个 json 文件。json 文件的 url 类似于 www.mysite.com/json/sometext 其中 sometext 是文本框的内容。问题是我不太了解请求和 mootools 是如何工作的。

现在我没有代码，因为我不知道如何开始（我是初学者），但我想在[http://m.airpim.com/json/public/search获取 json 文件?q=daniele&k=&e=1](http://m.airpim.com/json/public/search?q=daniele&k=&e=1)如果在文本框中我写了“daniele”并且我想将 json 保存在一个数组中。

我该怎么做？

# android - onActivityResult 数据传输

> ID：11246690
> 
> 赞同：0
> 
> 时间：2012-06-28T14:18:27.200
> 
> 标签：android, android-intent, android-activity

我正在关注本教程[http://www.vogella.com/articles/AndroidIntent/article.html](http://www.vogella.com/articles/AndroidIntent/article.html)通过使用 startActivityForResult 调用活动来将一些数据传输到父活动。

基本上我正在尝试完成父活动，单击某些按钮但不是 onBackPressed。我不知道是否有更简单的方法。像这样：

```
MainPage to NewTarget
            NewTarget to Target

// onBackPressed
            Target to NewTarget

// onButtonClick on TargetActivity
            Target to MainPage 
```

当我单击 NewTarget 活动上的按钮时，问题是 onActivityResult 调用，而不是目标活动完成？不应该是相反的吗？

在“NewTarget”类中，我有一个按钮需要调用一个活动 onClick。而且我还需要一些关于活动的反馈，名为“目标”，就像它已通过后退按钮或其他方式完成（我需要在某个点点击完成该活动，我称之为“完成（）”）

来自 NewTarget 活动：

```
public void savingClick(View v) {
    Intent targetIntent = new Intent(this, Target.class);
    targetIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivityForResult(targetIntent, 5);
} 
```

关于目标活动：

```
@Override
public void finish() {
if(ClickCheck) {
    Log.d("Target","ClickCheck");
    // Prepare data intent 
    Intent data = new Intent();
    data.putExtra("returnKey", "click");
    // Activity finished ok, return the data
    setResult(RESULT_OK, data);
}
super.finish(); 
```

}

最后是 NewTarget 活动：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.d("NewTarget","requestCode: " + requestCode);
    Log.d("NewTarget","resultCode: " + resultCode);
    if(requestCode == 5 && resultCode == RESULT_OK) {
        Log.d("NewTarget","data: " + data.hasExtra("returnKey"));
        if(data.hasExtra("returnKey"))
            this.finish();
    }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

我检查了这些值：

```
// these lines have appeared when i clicked on button to startActivityForResult
requestCode: 5
resultCode: 5
// ClickCheck line has appeared on Target activity finished.
// data: data.hasExtra("returnKey")); line has never been appeared. 
```

那么有什么关系呢？我在俯瞰什么？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:04:13.870

去做这个：

```
MainPage to NewTarget
        NewTarget to Target

// onBackPressed
        Target to NewTarget

// onButtonClick on TargetActivity
        Target to MainPage 
```

除非您需要从to`startActivityForResult()`返回一些数据，否则您不需要使用。正常的行为是按下“返回”只会调用Target 并返回（这似乎是你想要的）。要获得最后一个行为，您应该只使用以下代码：`Target``NewTarget``Target``finish()``NewTarget``Target.onButtonClick()`

```
Intent intent = new Intent(this, MainPage.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent);
finish(); 
```

这将完成两者`NewTarget`，`Target`然后它将完成当前`MainPage`活动并创建活动的新实例`MainPage`（如果 launchMode`MainPage`为“标准”）。

试试这个。

# python - 如何从列表中打印出特定值

> ID：11246693
> 
> 赞同：0
> 
> 时间：2012-06-28T14:18:31.320
> 
> 标签：python, string, list, printing, parentheses

嘿，这可能是一个简单的问题，但我已经被它难住了一段时间=/

我有一个字符串 A：

```
A = ('A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5') 
```

以及相应的列表 B，它显示字符串 A 的内括号内每个值的确切位置：

```
B = [12 13 14 15 16 17 18 19 20 21 22 23] 
```

我想创建一个新列表，列表 C，它打印字符串 A 括号内的值，字符串 A 由列表 B 中的数字定义。

谢谢您的帮助！

编辑：我的目标是创建一个仅打印内括号内内容的列表，如下所示：

```
C = ('C:0.3,D:0.4') 
```

然后我将在逗号处拆分，并将相应的 2 个字符串输入到我定义的另一个函数中，但现在，我只需要列表 C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:22:03.547

```
>>> A = ('A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5')
>>> B = [12 ,13, 14 ,15, 16, 17, 18, 19 ,20 ,21, 22, 23]
>>> C=[A[x] for x in B]
>>> C
['(', 'C', ':', '0', '.', '3', ',', 'D', ':', '0', '.', '4'] 
```

**编辑：**

```
>>> A = ('A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5')
>>> C=A[A.find('('):A.find(')')+1]
>>> C
'(C:0.3,D:0.4)' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:22:32.877

假设这`B`确实是一个列表，

看来你真的只需要`B[0]`和`B[-1]`为此：

```
print A[B[0]:B[-1]+1] 
```

或作为列表：

```
list_of_chars=list(A[B[0]:B[-1]+1]) 
```

如果在任何时候，`B`都不是顺序的（如果`B`也是顺序的也可以）：

```
list_of_chars=[A[i] for i in B] 
```

会给你字符列表...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:26:07.897

一个简单的列表推导可以解决这个问题：

```
C = [A[i] for i in B] 
```

# javascript - 悬停在动态列表上时，在单独的 div 中显示适当的文本

> ID：11246696
> 
> 赞同：0
> 
> 时间：2012-06-28T14:18:36.060
> 
> 标签：javascript, jquery, css

所以，我会给你的代码很糟糕......我试图弄清楚，但 javascript 对我来说似乎是无法学习的。

我有一个动态生成的无序列表。当用户将鼠标悬停在每个列表项上时，我想在单独的 div 中显示更多信息。

继承人我有 html/php 明智的：

```
<div id="inv">
<ul>
<?php 
$i = 1;
foreach ($inv as $item) {
    echo "<li class='inventory' id='$i'>";
    echo $item['name'] . "<input type=button value='destroy'></input> ";
    echo "</li>";
    $i ++;
}
?>
</ul>
</div>
<?php 
$i = 1;
foreach ($inv as $item) {
echo "<div class='inventory_display' id='$i'>".$item['name']."</div>";
$i ++;
} 
```

CSS：

```
#inventory ul {
    list-style: none;
}
#inventory li {
    background-color: #B3B4BD;
    color: white;
}

#inventory li:hover {
    background-color: #9bc2d0;
    color: black;
    cursor: pointer;
}

#inventory {
    float:left;
    width: 500px;
}

#inventory_display {
    display: none;
    margin-left: 420px;
    position: absolute;
    width: 300px;
    height: 300px;
    background-color: #97cae6;
} 
```

我假设我需要 javascript，但真的不知道从哪里开始。粘贴我所拥有的可能只会引起更多的混乱。

我会很高兴出现一个简单的悬停显示，但可能会寻求使其悬停显示，单击使其成为静态。

谢谢。如果需要更多信息，请告诉我！如果一个完整的答案太麻烦，任何开始的地方，如链接等也会有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:44:52.763

移入`$item['name']`的`rel`属性`li`。

```
echo "<li class='inventory' id='$i' rel="$item['name']">"; 
```

现在，我们可以使用 jQuery 向其附加一个元素，并在该 div 中显示 rel。

CSS也需要改变

```
#inventory li{
  background-color: #B3B4BD;
  color: white;
  /* Add this */
  position:relative;
} 
```

新班级。

```
.li-tooltip{
  position:absolute;
  top:0;
  /* other css stuff, we'll do the width and height later. */
} 
```

现在让我们使用 jQuery 来做一些漂亮的事情。

```
$('#inventory li').hover(function(){
  //this is the "mouse in"
  // find the width of the LI, so we can use that to decide positioning.
   var liW = $(this).width();
  $('<div class="li-tooltip">'+$(this).attr('rel')+'</div>').css('left', liW).appendTo($(this));
}, function(){
  //this is the "mouseout"
  $('.li-tooltip').remove();
}); 
```

**[这是工作的jsFiddle](http://jsfiddle.net/ad2Lr/)**

# php - 用 PHP 或 Java 渲染 HTML 页面

> ID：11246700
> 
> 赞同：0
> 
> 时间：2012-06-28T14:18:46.297
> 
> 标签：php, javascript, rendering

例如，我正在尝试获取网页中 HTML 标记的一些属性

```
<html>
<head>
    <title>test page</title>
</head>
<body>
    <div id="header" class="clearit" role="banner">
            <div id="headerWrapper">
                <ul id="primaryNav" role="navigation">
                    <li id="musicNav" class="navItem">
                        <a href="/music" class="nav-link">Music</a>
                    </li>
                    <li id="listenNav" class="navItem">
                        <a href="/listen" class="nav-link">Radio</a>
                    </li>
                    <li id="eventsNav" class="navItem">
                        <a href="/events" class="nav-link">Events</a>
                    </li>
                    <li id="chartsNav" class="navItem">
                        <a href="/charts" class="nav-link">Charts</a>
                    </li>
                    <li id="communityNav" class="navItem">
                        <a href="/community" class="nav-link">Community</a>
                    </li>
                    <li id="originalsNav" class="navItem">
                        <a href="http://originals.last.fm" class="nav-link">Originals</a>
                    </li>
                </ul>
          </div>
    </div>
</body>
</html> 
```

例如，我需要 #headerWrapper 的实际高度和宽度，并将其与我的 PHP 程序中的 #musicNav 进行比较，因为 php 是服务器端，所以我无法获取这些属性，所以我正在考虑附加 javascript 代码来计算这些属性并存储它在 json 文件中，就像这段代码

```
<script type="text/javascript">
document.ready(function() {
              var JSONObject= {
                                 "tagname":"headerWrapper",
                                 "height":$("#headerWrapper").height(),
                                 "width":$("#headerWrapper").width()
                              },
                              {
                                 "tagname":"musicNav",
                                 "height":$("#musicNav").height(),
                                 "width":$("#musicNav").width()
                              }
        });
    });  

</script> 
```

然后通过 php 文件读取它，其中包含我的算法，从网页中提取视觉特征。

但我的问题是我需要使用一些浏览器或 PHP 或 java 中的渲染引擎来渲染带有附加 javascript 的网页……所以有人有类似的东西吗？我的方法是正确的还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:42:47.510

如果你想渲染一个给定 url 的网页，并且需要一个 api 来遍历渲染的 dom [Phantomjs](http://phantomjs.org/)，它的[api](http://code.google.com/p/phantomjs/wiki/Interface)和[示例](http://code.google.com/p/phantomjs/wiki/QuickStart)将帮助你。查看`open` `render`

> PhantomJS 是一个带有 JavaScript API 的无头 WebKit。它具有对各种 Web 标准的快速和原生支持：DOM 处理、CSS 选择器、JSON、Canvas 和 SVG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:29:48.080

如果我理解正确，您需要一种从 Java 应用程序控制浏览器的方法。 [这](http://www.javaworld.com/javaworld/javatips/jw-javatip66.html) 似乎是相关的。你可能还想考虑的事情——

1.  让应用了解您的浏览器（二进制或其他）。
2.  从主机上的多个可用浏览器中进行选择。
3.  考虑跨平台支持。

# yuv - YUVY 格式表示 - v4l2 规范？

> ID：11246702
> 
> 赞同：1
> 
> 时间：2012-06-28T14:18:56.777
> 
> 标签：yuv, color-space, v4l2

这是著名的 V4l2 Api 规范的摘录。但我无法理解**YUYV** 也称为 YUV422 格式表示。有人可以在这里解释一下吗。

这是摘录：

```
Example 2-1\. V4L2_PIX_FMT_YUYV 4 × 4 pixel image

Byte Order. Each cell is one byte.

start + 0:  Y’00   Cb00   Y’01   Cr00   Y’02   Cb01   Y’03   Cr01
start + 8:  Y’10   Cb10   Y’11   Cr10   Y’12   Cb11   Y’13   Cr11
start + 16: Y’20   Cb20   Y’21   Cr20   Y’22   Cb21   Y’23   Cr21
start + 24: Y’30   Cb30   Y’31   Cr30   Y’32   Cb31   Y’33   Cr31 
```

每个 Y 都属于其中一个像素，而 Cb 和 Cr 属于两个像素。这里的 Cell 和 Pixel 的表示是什么。这里的像素是如何表示的。我们如何以编程方式表示它。

请解释一下。Rgds，软软的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:54:15.253

YUV422 是一种交错格式，它以比 U&V (Cb&Cr) 通道更高（双倍）的分辨率存储 Y 信息。每个单元由 4 个字节组成，存储 2 个像素的 Y/U/V 值：

```
unsigned char*cell={127, 52, 139, 170};
unsigned char pixel0[3], pixel1[3];

pixel0[0]=cell[0]; // Y0
pixel0[1]=cell[1]; // U
pixel0[2]=cell[3]; // V

pixel1[0]=cell[2]; // Y1
pixel1[1]=cell[1]; // U
pixel1[2]=cell[3]; // V 
```

如您所见，没有单个像素的直接表示。

# android - 获取当前正在运行的应用程序

> ID：11246703
> 
> 赞同：3
> 
> 时间：2012-06-28T14:18:56.940
> 
> 标签：android, detect, foreground

如何获取当前正在运行的应用程序？

我想检查应用程序是否正在运行或不在服务中。我为此使用了以下代码。

```
 ActivityManager activityManager =
       (ActivityManager)
       this.getSystemService(ACTIVITY_SERVICE );

   PackageManager pm =getPackageManager();
   procInfos = activityManager.getRunningAppProcesses(); 
```

但它返回给我几个应用程序的列表，即使我在他们的主屏幕上按下了返回按钮。正在运行的应用程序列表仍在列表中显示它们。但我希望该列表仅显示前台的应用程序。

那么，如何区分前台和后台运行的应用程序呢？

或者换句话说，如何检测当前前台运行的应用程序，或者哪些没有被销毁。我不想让后台运行的应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T14:34:25.843

你可以试试这个代码，它给出了当前活动屏幕的包：

```
ActivityManager am = (ActivityManager) this
                .getSystemService(ACTIVITY_SERVICE);

// get the info from the currently running task
List<ActivityManager.RunningTaskInfo> taskInfo = am.getRunningTasks(1);

ComponentName componentInfo = taskInfo.get(0).topActivity;
if(!componentInfo.getPackageName().equals("your.package.name"))
{
    //Do your stuff
} 
```

您可能需要权限

```
<uses-permission android:name="android.permission.GET_TASKS" /> 
```

# ios - iOS Game Center TURN-BASED App 中如何排除掉输的玩家

> ID：11246706
> 
> 赞同：1
> 
> 时间：2012-06-28T14:19:21.503
> 
> 标签：ios, game-center

我在iOS游戏中心创建了一个回合制游戏，游戏运行良好，数据在玩家之间正确传递。

我想知道：

你怎么能排除一个在另一个之前输掉的球员？

我在任何地方都找不到参考 我该怎么走？

提前感谢，对不起我的英语

安杰洛

编辑：

好的，我试过了，它成功了（被排除的玩家也可以查看比赛）

```
 //When current player is excluded

GKTurnBasedMatch *currentMatch = [[GCTurnBasedMatchHelper sharedInstance] currentMatch];
currentMatch.currentParticipant.matchOutcome == GKTurnBasedMatchOutcomeQuit

//FOR SEND TURN : 

    NSUInteger currentIndex = [currentMatch.participants indexOfObject:currentMatch.currentParticipant];

    GKTurnBasedParticipant *nextParticipant;

    NSUInteger nextIndex = (currentIndex + 1) % [currentMatch.participants count];

    nextParticipant = [currentMatch.participants objectAtIndex:nextIndex];

    for (int i = 0; i < [currentMatch.participants count]; i++) {

        nextParticipant = [currentMatch.participants objectAtIndex:((currentIndex + 1 + i) % [currentMatch.participants count ])];

        if (nextParticipant.matchOutcome != GKTurnBasedMatchOutcomeQuit) {
            ///prossimo giocatore che NON è stato escluso
            break;
        } else {
            /////Prossimo giocatore perché questo è stato escluso
        }
    }

 [currentMatch endTurnWithNextParticipant:nextParticipant matchData:data completionHandler:^(NSError *error) {

            […]

        }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T22:39:36.043

我不是 Game Center 专家，但根据记忆，你的代码可以选择下一个回合。因此，您可以计算出谁将接下一个回合，并简单地跳过任何已经输掉的玩家。不过，您可能应该更新他们的游戏数据，以便他们可以跟随游戏进行到底。

Ray Wenderlich 有几个关于 Game Center 回合制游戏的示例教程：[使用 iOS 5 开始回合制游戏](http://www.raywenderlich.com/5480/beginning-turn-based-gaming-with-ios-5-part-1)

没有可分享的示例代码 - 抱歉。

# wpf - 从 Viewmodel 访问视图

> ID：11246715
> 
> 赞同：3
> 
> 时间：2012-06-28T14:19:55.780
> 
> 标签：wpf, xaml, data-binding, mvvm

我知道这是不好的设计，但我需要从我的视图模型访问视图。这是因为我有一些旧控件，例如 Winforms 控件，它们不支持绑定，需要由代码填充。

我正在使用 AvalonDock 2.0 的 MVVM 模型，并且有类似的东西：

```
 <ad:DockingManager x:Name="dockManager" 
                  DocumentsSource="{Binding Files}"
                  AnchorablesSource="{Binding Tools}"
        ActiveContent="{Binding ActiveDocument, Mode=TwoWay, Converter={StaticResource ActiveDocumentConverter}}">
        <ad:DockingManager.LayoutItemTemplateSelector>
            <local:PanesTemplateSelector>
                <local:PanesTemplateSelector.NavigationViewTemplate>
                    <DataTemplate>
                        <tvext:TreeViewExtended />
                    </DataTemplate>
                </local:PanesTemplateSelector.NavigationViewTemplate>
            </local:PanesTemplateSelector>
        </ad:DockingManager.LayoutItemTemplateSelector> 
```

所以模板 NavigationViewTemplate 绑定到集合 Tools 中的一项，这是我的 NavigationViewModel 类型的 ViewModel。

我将文本框绑定到我的视图模型的属性没有问题。但我不知道如何从我的 NavigationViewModel 访问模板内的 tvext:TreeViewExtended 控件以填充它。

TIA 迈克尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T15:33:20.367

是的，我不是让 ViewModel 知道视图的忠实粉丝，但是既然你问了，这里有一个想法：

```
 1\. Create an interface for your View (if you haven't already) and add whatever functionality to that interface that you need access to from the ViewModel. Lets call it ISomeView
 2\. add/implement the interface on the View
 3\. add property to the ViewModel ISomeView View {get;set;} 
 4\. in the view depending where the ViewModel is being injected assign populate the ViewModel's property, for example you can do it on DataContextChanged:

    private void OnDataContextChanged (object sender, ...EventArgs e)
    {
         // making up your ViewModel's name as ISomeViewModel
         ((ISomeViewModel)sender).View = this;
     } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T05:47:48.250

在您的视图模型中创建事件并在您的视图中订阅这些事件，因此视图和视图模型仍然不是强耦合并且您得到您想要的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T14:41:06.473

I suggest that you do not access the Winforms control from your ViewModel. Keep everything that relates to the view in the view. You can do this as follows:

1.  Create a WPF custom control, e.g. named `TreeViewExtendedWrapper`. (See [this article](http://wpftutorial.net/HowToCreateACustomControl.html) for a short tutorial how to create custom WPF controls).

2.  Inside the control template of the custom control (in the Themes\Generic.xaml file), place your Winforms control:

    ```
    <ControlTemplate TargetType="{x:Type local:TreeViewExtendedWrapper}">
        <Border Background="{TemplateBinding Background}"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}">
            <tvext:TreeViewExtended />
        </Border>
    </ControlTemplate> 
    ```

3.  Add dependency properties to your custom control for all Winforms control properties that you need to bind to the ViewModel.

4.  Also add dependency properties to your custom control for all commands that you need to bind to the view model.

5.  Write C# code inside the code-behind of the custom control to connect the dependency properties of your custom control to the properties, events, and methods of the Winforms control.

6.  Inside your data template, place your custom control with any necessary data bindings:

    ```
    <DataTemplate>
        <local:TreeViewExtendedWrapper MyProperty={Binding MyProperty}/> 
    </DataTemplate> 
    ```

With this approach, you can use data binding to connect ViewModel and Winforms control, i.e. you do not violate MVVM principles.

# vba - 类型不匹配 VBA

> ID：11246717
> 
> 赞同：0
> 
> 时间：2012-06-28T14:20:02.083
> 
> 标签：vba, excel, type-mismatch, mismatch

这有效 Lastrow = 8，但不是 9（类型不匹配）

如果我删除`If Not (myarray = Empty) Then`它不适用于 8

解决这个问题的最简单方法是什么？

```
Public Function GetRowToWriteOn(ByVal SheetName As String, ByVal idnr As Integer) As Integer
    LastRow = (Sheets(SheetName).UsedRange.Rows.Count) + 1
    MsgBox (LastRow)
    myarray = Sheets(SheetName).Range("d8:d" & LastRow).Value
    If Not (myarray = Empty) Then
        For row = 1 To UBound(myarray, 1)
            If (myarray(row, 1) = idnr) Then
                GetRowToWriteOn = row
                Exit Function
            End If
        Next
    End If
    GetRowToWriteOn = LastRow
    Exit Function
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:02:06.763

MyArray 采用 2 种不同的类型，具体取决于给定的范围。
如果您正在查看 1 个单元格，那么它是一个变体（如果它是空的则可以测试）
如果您正在查看 2 个或更多单元格，那么它会变成一个变体数组，因此您必须测试每个单元格.

`myarray = Sheets(SheetName).Range("d8:d8").Value`- myarray 获取 d8 中的值
`myarray = Sheets(SheetName).Range("d8:d9").Value`- myarray(1,1) 获取 d8 中的值，myarray(2,1) 获取 d9 中的值

测试，使用：

```
if vartype(myarray)=vbArray then
    ' run through the array
else
    ' do single value stuff
endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:31:53.083

我觉得你的代码应该更像这样

```
Option Explicit

Public Function GetRowToWriteOn(ByVal SheetName As String, ByVal idnr As Integer) As Integer
Dim lastrow As Long, row As Long
    lastrow = (Sheets(SheetName).UsedRange.Rows.Count) + 1
    MsgBox (lastrow)
    Dim myarray() As Variant
    myarray = Sheets(SheetName).Range("d8:d" & lastrow).Value
    If Not (IsEmpty(myarray)) Then
        For row = 1 To UBound(myarray, 1)
            If (myarray(row, 1) = idnr) Then
                GetRowToWriteOn = row
                Exit Function
            End If
        Next
    End If
    GetRowToWriteOn = lastrow
    Exit Function
End Function 
```

但我也认为还有另一种方法可以做你想做的事。稍微简单一点，并使用内置函数。我想我在这里抓住了你的意图：

```
Dim RowToWriteOn As Long, SheetName As String, lastRow As Long

Dim rng As Range

SheetName = "Sheet1"
lastRow = (Sheets(SheetName).UsedRange.Rows.Count) + 1
Set rng = Sheets(SheetName).Range("d" & lastRow)
RowToWriteOn = rng.End(xlUp).row 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T17:54:46.707

```
Public Function GetRowToWriteOn(ByVal SheetName As String, _
                                ByVal idnr As Integer) As Long    
    Dim lastRow As Long, f As Range
    lastRow = Sheets(SheetName).Cells(Rows.Count, 4).End(xlUp).Row

    Set f = Sheets(SheetName).Range("D8:D" & lastRow).Find(what:=idnr, _
                                                      lookat:=xlWhole)
    If Not f Is Nothing Then
        GetRowToWriteOn = f.Row
    Else
        GetRowToWriteOn = lastRow + 1
    End If

End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T15:17:52.993

```
myarray = Sheets(SheetName).Range("d8:d" & LastRow) 
```

（没有价值）......你可以使用：`if ubound(myArray) > 1 then ;..`

我想它可以像这样简单，不......？

# jsf - JSF -- 过滤 javax.faces.resource 文本替换

> ID：11246718
> 
> 赞同：3
> 
> 时间：2012-06-28T14:20:04.343
> 
> 标签：jsf, servlets, jsf-2, rewrite, servlet-filters

我在 JSF 2.17 Mojarra 上使用 Tomcat7。我想在 /javax.faces.resource/* 的 CSS 和 Javascript 请求前面放置一个 servlet 过滤器，以重写我们的开发和 rc 环境中的某些文本引用。我似乎无法使用传统的 servlet 过滤器更改这些 CSS 和 Javascript 文件。有没有其他方法可以做到这一点？

例如，我希望替换对 CSS 文件中的 url 的引用：prod.ourdomain.com 到 dev.ourdomain.com

类似的东西。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:02:22.730

您基本上需要使用写入本地缓冲区`HttpServletResponse#getOutputStream()`的自定义进行覆盖，然后在其中进行字符串替换，最后将修改后的字符串写入响应。`ServletOutputStream`这是相当多的代码，所以这里有一些有用的类可以进一步帮助您：

*   [`HttpServletResponseOutputWrapper`](https://github.com/omnifaces/omnifaces/blob/master/src/main/java/org/omnifaces/servlet/HttpServletResponseOutputWrapper.java)
*   [`BufferedHttpServletResponse`](https://github.com/omnifaces/omnifaces/blob/master/src/main/java/org/omnifaces/servlet/BufferedHttpServletResponse.java)

然后你基本上可以实现过滤器如下：

```
@Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {
    if (((HttpServletRequest) request).getRequestURI().endsWith(".css.xhtml")) { // If you use *.xhtml as JSF mapping.
        BufferedHttpServletResponse bufferedResponse = new BufferedHttpServletResponse(((HttpServletResponse) response);
        chain.doFilter(request, bufferedResponse);
        String string = new String(bufferedResponse.getBuffer(), response.getCharacterEncoding());
        string = string.replace("http://prod.ourdomain.com", "http://dev.ourdomain.com");
        response.getWriter().write(string);
    }
    else {
        chain.doFilter(request, response);
    }
} 
```

然而，这对于进一步优化是开放的。除了缓冲*整个*响应之外，您还可以在自定义输出流中执行该作业并仅缓冲以 开头的字符`http://prod.ourdomain.com`，然后丢弃它并改为写入新字符串，然后继续。

* * *

**更新**：一个完全不同的选择，毕竟实际上更好，是直接在 CSS 文件中使用 EL。由 JSF 执行的 CSS 资源请求，`<h:outputStylesheet>`即默认情况下支持 CSS 文件中的 EL。例如，

```
someSelector {
    background: url("http://#{staging.dev ? 'dev' : 'prod'}.ourdomain.com/image.png");
} 
```

# javascript - 如何像visualwebsiteoptimizer.com一样在浏览器中实时编辑网页？

> ID：11246719
> 
> 赞同：5
> 
> 时间：2012-06-28T14:20:08.573
> 
> 标签：javascript, html

有没有办法启用网页的浏览器内编辑，如以下视频（visualwebsiteoptimizer.com 的演示）中所做的那样？

（参见 0:15 的视频）

[http://www.youtube.com/watch?v=oy89HnIJsE4&feature=plcp](http://www.youtube.com/watch?v=oy89HnIJsE4&feature=plcp)

基本上，我希望能够：

*   复制一个网页，（那部分没问题），
*   以某种方式启用编辑模式（就像在任何文本编辑器中所做的那样），
*   单击我要编辑的元素，并能够修改选定的元素

* * *

编辑：对不起，我不够清楚：我的最终目标是让我的用户能够以视觉方式在线进行实时编辑（由 visualwebsiteoptimizer.com 完成）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:21:24.970

1 - 使用谷歌浏览器。

2 - 点击 ctrl + shift + i

3 - 转到元素选项卡

4 - 右键单击​​要编辑的 html 并选择“编辑为 html”或双击要在该选项卡中更改的文本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:36:02.350

您可以在文档上使用 designMode=on，或在特定元素上使用 contentEditable=true。请参阅[http://html5demos.com/contenteditable/](http://html5demos.com/contenteditable/)的小演示。此外，您还可以使用 jQuery 捕捉鼠标点击和 keydowns 并检查目标元素以显示 CSS 等选项！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T08:43:24.833

您可以尝试使用**Jelliphy**。Jelliphy 是一个工具，它允许任何用户编辑网页的任何文本、移动页面中的元素并调整其大小、在页面上绘图、编辑图像等等。

[Jelliphy Lite](http://www.dispage.com/?show_bookmarklet)和[Jelliphy Extended](http://www.dispage.com/?show_bookmarklet=ext)是可以在任何浏览器上免费使用的书签：只需转到要更改的页面并单击收藏夹中的 Jelliphy 链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-29T07:42:42.787

这是你需要的，享受吧：http: [//myedit.io](http://myedit.io/)

# c++ - 如何优化因 CPU 分支未命中而减慢的跳转指令？

> ID：11246720
> 
> 赞同：3
> 
> 时间：2012-06-28T14:20:11.537
> 
> 标签：c++, compiler-construction, programming-languages, cpu, cpu-architecture

# 背景

众所周知，随机分支会花费大量开销。 [SO中有一个帖子回答了这样的问题。](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)

在许多 CPU 架构中，跳转指令可以看到类似的性能影响。[在 SO 中也有针对此类主题的帖子](https://stackoverflow.com/questions/7241922/how-has-cpu-architecture-evolution-affected-virtual-function-call-performance)

因此，如果您使用诸如函数指针之类的编程模式或只是基于普通可继承 C++ 类的函数调用，我们必须付出分支未命中的代价。

即使对于最先进的硬件分支预测算法也只能进行基于全局共享地址历史的分支预测，并且可能会推测性地获取分支目标地址代码等。

但根据定义，它不适用于第一次执行。

许多嵌入式设备、智能手机等都需要在

*   开机时间
*   第一次执行像浏览器这样的应用程序

它调用了数百万个函数调用，并且可能不想显着改变软件架构，比如将所有间接跳转转换为直接跳转......

如果条件如下，

# 条件：

*   必须以最高速度运行
    *   在第一次运行
        或
    *   跳跃对 cpu 来说看起来完全随机

以下是最好的结果吗？

而且我想知道任何将动态/静态代码重写为间接跳转到直接跳转的示例。

# 如何获得最佳性能：

*   总是使用可能或不可能的分支
*   使用预链接
*   使用 mlock 或 readahead，cacheflush(ICACHE) 函数调用
*   将间接跳转动态或静态地重写为直接跳转
    （[发现 Bradley M Kuhn 在 1996 年写的一篇论文，](http://dl.acm.org/citation.cfm?id=331419)用于某些情况下的静态重写）

我发现的论文是在源代码级别将虚拟函数调用转换为静态函数调用，但从软件开发人员的角度来看，二进制链接时间优化似乎更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:42:18.510

你是说你可以几乎确定地预测分支会去哪里，但 CPU 不能？当分支预测失败时，会产生巨大的成本；如果您的分支预测表很热并且每次都在同一条路径上，我认为分支预测可能会成功。（如果不一致，那么显然预测无法 100% 成功。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T20:23:48.680

对于函数指针和虚函数，您需要预测分支的目标，因为在编译时您无法知道接下来需要执行哪些代码。

[http://en.wikipedia.org/wiki/Branch_target_predictor](http://en.wikipedia.org/wiki/Branch_target_predictor)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T18:44:13.690

CPU 已经在为您执行此操作，请参阅[分支预测](http://en.wikipedia.org/wiki/Branch_predictor)。

# javascript - JS 幻灯片适用于 Firefox 和 chrome，但不适用于 Internet Explorer？

> ID：11246722
> 
> 赞同：0
> 
> 时间：2012-06-28T14:20:17.090
> 
> 标签：javascript, slideshow

我的客户画廊的幻灯片可以在 Firefox 和 chrome 上运行，但由于某种原因不能在 Internet Explorer 上运行。我的网站上有一些此类幻灯片，它们的行为方式都相同。它最近发生了变化，因此它不会与下拉菜单冲突，我认为这可能是导致它的原因......

[http://www.macgregorandmacduff.co.uk/kilts-social](http://www.macgregorandmacduff.co.uk/kilts-social)

这是与幻灯片相关的代码部分...

```
<script type="text/javascript" src="sshow/js/prototype.js"></script>
<script type="text/javascript" src="sshow/jsscriptaculous.js?load=effects,builder">     
</script>
<script type="text/javascript" src="sshow/js/lightbox.js"></script>

<link rel="stylesheet" href="sshow/css/lightbox.css" type="text/css" media="screen" />

<script src="sshow/Scripts/AC_RunActiveContent.js" type="text/javascript"></script>
<link href="sshow/css/lightbox.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-25993448-1']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); 
```

})();

```
</script>

<h3>Customer Gallery</h3> 
```

任何帮助，将不胜感激。

谢谢

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:37:31.927

即控制台 说：

对象为 NULL 或未定义的 lightbox.js，第 226 行符号 20

# iphone - 如何正确定位从 AVCaptureVideoDataOutputSampleBufferDelegate 生成的图像

> ID：11246726
> 
> 赞同：3
> 
> 时间：2012-06-28T14:20:30.600
> 
> 标签：iphone, ios, avfoundation, core-video

我正在使用`AVCaptureVideoDataOutputSampleBufferDelegate`，我收到一个`CMSampleBufferRef`我转换为的至极`UIImage`- 但生成的图像方向不正确。

```
// Get a CMSampleBuffer's Core Video image buffer for the media data
CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
// Lock the base address of the pixel buffer
CVPixelBufferLockBaseAddress(imageBuffer, 0); 

// Get the number of bytes per row for the pixel buffer
void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer); 

// Get the number of bytes per row for the pixel buffer
size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
// Get the pixel buffer width and height
size_t width = CVPixelBufferGetWidth(imageBuffer); 
size_t height = CVPixelBufferGetHeight(imageBuffer); 

// Create a device-dependent RGB color space
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 

// Create a bitmap graphics context with the sample buffer data
CGContextRef context = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
// Create a Quartz image from the pixel data in the bitmap graphics context
CGImageRef quartzImage = CGBitmapContextCreateImage(context); 
// Unlock the pixel buffer
CVPixelBufferUnlockBaseAddress(imageBuffer,0);

// Free up the context and color space
CGContextRelease(context); 
CGColorSpaceRelease(colorSpace);

// Create an image object from the Quartz image
UIImage *img = [UIImage imageWithCGImage:quartzImage];

// Release the Quartz image
CGImageRelease(quartzImage); 
```

如果我以纵向模式握住 iPhone，则生成的图像会旋转 90 度（逆时针）。如果我以横向左方（主页按钮在左侧）握住 iPhone，则生成的图像向上。如果我将 iPhone 放在横向右侧（主页按钮在右侧），则生成的图像是颠倒的。

我正在使用设备的前置摄像头 - 但我也将使用前置摄像头，因此生成的图像应该始终具有正确的方向。

# actionscript-3 - 错误 1009：无法访问属性...空对象引用

> ID：11246732
> 
> 赞同：0
> 
> 时间：2012-06-28T14:20:52.970
> 
> 标签：actionscript-3, flash, flash-cs5

我有一个 .fla 文件，它根据用户选择在其上运行 .swf 电影。我有几个简单的 .swf 电影，它们没有任何类文件，只是时间轴上的代码，还有一个 .swf 电影，它有一个大的类文件和时间轴上的一些代码。

简单的 .swf 电影可以加载并正常工作，但带有类的电影无法加载并出现错误 1009:...... 在它的构造函数中。

当我自己运行这部电影时，它运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:02:05.150

可能加载的电影的阶段为空。检查您是否尝试在 Loaded Movie Constructor 中使用舞台。

# jquery - jquery datepicker解析日期通配符

> ID：11246733
> 
> 赞同：1
> 
> 时间：2012-06-28T14:20:53.923
> 
> 标签：jquery, jquery-ui, parsing, datepicker, wildcard

我正在寻找与 jquery.datepicker.parseDate() 一起使用的正确通配符，它​​在[文档](http://docs.jquery.com/UI/Datepicker/parseDate) 中说要使用“...”作为文字文本以及“其他任何内容 - 文字文本”。当它遇到天数之后的“th”、“rd”、“nd”或“st”时，就会出现问题。

我试过了

```
$.datepicker.parseDate('M d... 2012', 'Jun 28th, 2012'); 
```

它没有用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:38:41.267

目前你不能这样做`parseDate`，请参阅[将“st，nd，rd，th”添加到 jquery datepicker](https://stackoverflow.com/questions/8199204/adding-st-nd-rd-th-to-jquery-datepicker)和以下拉取请求以添加此类功能 - [https://github.com/jquery/jquery-ui/pull/438](https://github.com/jquery/jquery-ui/pull/438) .

我建议在调用之前从一天结束时删除“st”、“rd”、“nd”和“th”，`parseDate`然后使用它。

```
$.datepicker.parseDate('M dd yy', 'Jun 28th 2012'); 
```

虽然不理想，但这也可以。

```
var myDate;

try {
    myDate = $.datepicker.parseDate('M ddth yy', 'Jun 28th 2012');
} catch (e) {}
try {
    myDate = $.datepicker.parseDate('M ddst yy', 'Jun 28th 2012');
} catch (e) {}
try {
    myDate = $.datepicker.parseDate('M ddrd yy', 'Jun 28th 2012');
} catch (e) {}
try {
    myDate = $.datepicker.parseDate('M ddnd yy', 'Jun 28th 2012');
} catch (e) {} 
```

# git - 在 git push heroku 之后 - Heroku 上上传的文件丢失了

> ID：11246736
> 
> 赞同：13
> 
> 时间：2012-06-28T14:21:05.967
> 
> 标签：git, heroku

我相当基本的应用程序允许用户上传头像。

应用程序部署到 Heroku

```
$ git add .
$ git commit -m "description"
$ git checkout master
$ git merge my-cool-new-feature
$ git push heroku 
```

问题是，每次我将更改推送到 Heroku 时，上传到 Heroku 的所有文件都会丢失。我想，问题是文件夹/文件受版本控制，所以我将文件夹添加到 .gitignore

```
# Ignore User generated files
/public/system/* 
```

并从存储库中删除文件。

```
$ git rm -rf --cached public/system 
```

但问题仍然存在。你能为我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-28T14:29:28.847

原因是 Heroku 限制了您在其服务器上存储数据的方式。回到`bamboo`堆栈时代，如果不使用外部服务，[根本不可能存储任何数据。](https://devcenter.heroku.com/articles/read-only-filesystem)自从他们引入`Cedar`堆栈以来，[情况发生了一些变化](https://devcenter.heroku.com/articles/dynos#isolation-and-security)，但仍然无法存储持久数据。

正如您所发现的，每次您将新更改推送到 Heroku 应用程序时（或每次应用程序在不活动 x 分钟后关闭并重新启动时），您的应用程序都会重新创建，并且所有存储的数据都会丢失。

您最好的选择是根本不使用 /public 目录，并开始使用外部服务，如[Amazon S3](http://aws.amazon.com/s3/)、[Rackspace Cloud Files](http://www.rackspace.com/cloud/cloud_hosting_products/files/)或[Spideroak](https://spideroak.com/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-06T08:04:15.760

如果您的应用程序需要接收用户上传的文件，您需要确保将这些上传文件存储在一个集中且持久的位置。

使用 Heroku 的临时文件系统，任何写入 dyno 文件系统的信息都会在 dyno 重新启动时丢失。相反，Heroku 建议支持服务。对于文件和媒体存储，[亚马逊的简单存储服务 (S3)](http://aws.amazon.com/s3/)是一个很好的解决方案。

您可能想在 Heroku 网站上阅读这篇文章：[Uploading Files to S3 in Ruby with Paperclip](https://devcenter.heroku.com/articles/paperclip-s3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-04T15:27:29.597

每次部署都会丢失您的文件。我首选的解决方案是使用 Paperclip 和 Amazon 存储桶。Paperclip 会将您的图像存储在存储桶中，以便应用程序随意引用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-17T20:38:55.313

只需将您的 mongodb 网络访问更改为“任何人访问”即可解决问题。

以上所有步骤我都做了但不起作用然后最后我改变了monodb访问并且它起作用了

# java - 使用内在锁（好或坏）内置于 Java 中的同步决策

> ID：11246738
> 
> 赞同：0
> 
> 时间：2012-06-28T14:21:12.113
> 
> 标签：java, multithreading, asynchronous, synchronization, thread-safety

在 Java 中，一个 Object 本身可以作为一个锁来保护它自己的状态。此约定用于许多内置类，如 Vector 和其他同步集合，其中每个方法都是同步的，因此受到对象本身的内在锁的保护。这是好事还是坏事？也请给出理由。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:34:31.697

优点

*   这很简单。
*   您可以从外部控制锁。

缺点

*   它打破了封装。
*   你不能改变它的锁定行为而不改变它的隐含契约。

在大多数情况下，除非您正在开发一个将被广泛使用的 API，否则这并不重要。所以虽然使用`synchronised(this)`不理想，但很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:58:22.587

嗯`Vector`，`Hashtable`等等在内部是这样同步的，我们都知道他们发生了什么......

老实说，我找不到像这样进行同步的任何充分理由。以下是我看到的缺点：

1.  几乎总是有一种更有效的方法来确保线程安全，而不是仅仅锁定整个方法。
2.  它会减慢单线程环境中的代码速度，因为您在实际上不需要锁的情况下支付了锁定和解锁的开销。
3.  它给人一种错误的安全感，因为尽管每个操作都是同步的，但操作序列却不是同步的，而且您仍然可能不小心创建数据竞争。想象一个在每个方法上同步的集合和以下代码：

> ```
> if(collection.isEmpty()) {
>     collection.add(...);
> } 
> ```

假设目标是只添加一个项目，上面的代码不是线程安全的，因为在`if`检查和实际调用之间可能会中断一个线程`add`，即使两个操作是单独同步的，所以实际上有可能得到两个集合中的项目。

# c# - 如何在不刷新页面的情况下上传文件？

> ID：11246742
> 
> 赞同：-1
> 
> 时间：2012-06-28T14:21:21.147
> 
> 标签：c#, asp.net

我想在服务器文件夹中上传文件，但在上传时我不想刷新 aspx 页面。我的意思是说我不想在点击上传按钮时刷新页面。那我该怎么办？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:28:42.520

看看[jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/)，它完全符合您的要求。

# spring - Spring MVC Servlet 映射导致 URL 被调用两次

> ID：11246744
> 
> 赞同：1
> 
> 时间：2012-06-28T14:21:24.610
> 
> 标签：spring, jakarta-ee, spring-mvc

我有以下 web.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee  http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<display-name>cheapig</display-name>

<!--Definição do Contexto Global do Container do Spring com recursos (beans) que são compartilhados com
TODOS os Servlets e Filtros -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Cria o container do Spring compartilhado com todos os Servlets e Filtros -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<listener>
    <display-name>sessionListener</display-name>
    <listener-class>br.com.cheapig.util.SessionListener</listener-class>
</listener>

<!-- Filtro para controlar acesso -->
<filter>
 <filter-name>cheapigFilter</filter-name>
 <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>      
</filter>

<filter-mapping>
  <filter-name>cheapigFilter</filter-name>
  <url-pattern>/*</url-pattern>

</filter-mapping>

<!-- Definição do Servlet que processa todos os requests da aplicação. Como se está utilizando
o Framework Spring, o servlet é o DispatcherServlet. -->
<servlet>
    <servlet-name>cheapig</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/cheapig/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<!-- Mapeamento dos Servlets e URLs -->     
<servlet-mapping>
    <servlet-name>cheapig</servlet-name>
    <url-pattern>/cheapig/*</url-pattern>
</servlet-mapping>

<error-page>
    <error-code>404</error-code>
    <location>/WEB-INF/view/util/layout_404.jsp</location>
</error-page>

<error-page>
    <error-code>405</error-code>
    <location>/WEB-INF/view/util/layout_405.jsp</location>
</error-page>

<error-page>
    <error-code>500</error-code>
    <location>/WEB-INF/view/util/layout_500.jsp</location>
</error-page>

<session-config>
    <session-timeout>30</session-timeout>
</session-config> 
```

但是，当我尝试调用例如：“http://localhost:9191/cheapig/urlMappedToAControllerMethod/”时，“urlMappedToAControllerMethod”被调用了两次。我想问题出在映射上，因为在转发到“urlMappedToAControllerMethod”之前，cheapigFilter 也会被调用两次。

怎么了？我该如何解决？

提前致谢！

# wordpress - Gettext 无法翻译帖子类型格式永久链接 slug

> ID：11246746
> 
> 赞同：0
> 
> 时间：2012-06-28T14:21:29.883
> 
> 标签：wordpress, gettext, slug

到目前为止，我对 PHP 还不是很熟悉，但已经成功注册了自定义帖子类型。现在我想让它的永久链接块可翻译。我的主题已经有正确工作的本地化文件（基于 20 个），并且我看到其中有很多工作字符串。所以我想我可以使用看到的语法，但它不会翻译（尽管已经准备好所有的 gettext 文件并重新启动 MAMP）。

```
add_action('init', 'create_post_type'); 
function create_post_type() {  
    register_post_type(
        'new_magazine_issue', 
        array(
            'labels' => array(
                     'name' => __('Magazine issue overviews', 'verwaltungsrundschau'),  
                 'singular_name' => __('Magazine issue overview', 'verwaltungsrundschau')
                 ),
        'public' => true,  
        'show_ui' => true,  
        'supports' => array( 'title', 'editor', 'post-thumbnails', 'custom-fields', 'revisions'),
        'rewrite' => array( 'slug' => __('magazine-issue-overviews', 'verwaltungsrundschau') )
        )  

    );  

} 
```

不能这么简单吗？'name' 和 'singular_name' 翻译和所有其他翻译一样有效，但这个没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:39:42.480

好的，终于发现了！它必须是这样的：

```
'rewrite' => array( 'slug' => __('magazine-issue-overviews', 'verwaltungsrundschau'), 'with_front' => FALSE), 
```

# asp.net - 如何为 SqlDataSource UpdateCommand 设置参数

> ID：11246747
> 
> 赞同：0
> 
> 时间：2012-06-28T14:21:33.410
> 
> 标签：asp.net, gridview, parameters, sqldatasource, updatecommand

对于网格视图：

我第一次尝试在 SQLDataSource 中为 UpdateCommand 使用存储过程：

```
<asp:SqlDataSource ID="TECT_DataSource" runat="server"
    ConnectionString="<%$ ConnectionStrings:OracleConnectionString %>" 
    ProviderName="<%$ ConnectionStrings:OracleConnectionString.ProviderName %>"
    SelectCommand="SELECT MPID, User_Id, Last_Name, First_Name
                   FROM Scripts.vw_Tect_Exam"
    UpdateCommand="P_TECT_UPD_EXAM_ID" UpdateCommandType="StoredProcedure">  
    <UpdateParameters>                    
        <asp:Parameter Name="MPID" Type="Int32"  />  
        <asp:Parameter Name="User_Id" Type="String" />   
    </UpdateParameters> 
</asp:SqlDataSource> 
```

我想知道 UpdateParameters 如何设置它们的值，因为我只指定了一个名称？
该过程`P_TECT_UPD_EXAM_ID`需要两个参数作为输入： 我还想知道如何将这些值映射到过程的输入参数，因为名称不同`"in_MPID"`？`"in_UserId"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:29:29.093

您可以像这样设置它们：

示例：在示例中 MPID 是 sql 参数名称 @MPID

```
<UpdateParameters>                    
    <asp:ControlParameter Name="MPID" ControlID="MPID_TextBox" PropertyName="Text  />  
    <asp:ControlParameter Name="User_Id" ControlID="User_Id_TextBox" PropertyName="Text  />  
</UpdateParameters> 
```

**更正：刚刚发现您的 proc 参数名称，所以它必须是**

```
<asp:ControlParameter Name="in_MPID" ...............
<asp:ControlParameter Name="in_User_Id" ............... 
```

希望这可以帮助....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:29:50.123

我真的不会使用`SqlDataSource`. 如果您在代码隐藏中（或者在数据访问层中更好）调用数据库，将会容易得多。

如果您使用`SqlDataSource`存储过程调用将仅在该页面上可用。每次您想拨打相同的电话时，您都必须复制并粘贴`SqlDataSource`或制作`UserControl`它。

以下示例使用实体框架连接到数据库并检索记录：

```
public List<Record> GetAllRecordsByUserName(string credentials)
{
    List<Record> recordList;
    using (CustomEntities context = new CustomEntities())
    {

        IQueryable<Section> recordQuery = from records in context.Records
                                              where records.UserName == credentials
                                              select records; 
        recordList = recordQuery.ToList<Record>();
    }
    return recordList;
} 
```

# java - 使用 Jackson 反序列化非字符串映射键

> ID：11246748
> 
> 赞同：25
> 
> 时间：2012-06-28T14:21:36.420
> 
> 标签：java, jackson

我有一张看起来像这样的地图：

```
public class VerbResult {
    @JsonProperty("similarVerbs")
    private Map<Verb, List<Verb>> similarVerbs;
} 
```

我的动词类如下所示：

```
public class Verb extends Word {
    @JsonCreator
    public Verb(@JsonProperty("start") int start, @JsonProperty("length") int length,
            @JsonProperty("type") String type, @JsonProperty("value") VerbInfo value) {
        super(length, length, type, value);
    }
    //...
} 
```

我想序列化和反序列化我的 VerbResult 类的实例，但是当我这样做时，我得到了这个错误：`Can not find a (Map) Key deserializer for type [simple type, class my.package.Verb]`

我在网上读到你需要告诉杰克逊如何反序列化映射键，但我没有找到任何解释如何去做的信息。动词类也需要在地图之外进行序列化和反序列化，因此任何解决方案都应保留此功能。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2016-07-07T11:47:42.720

经过一天的搜索，我发现了一种基于[此问题](https://stackoverflow.com/q/33724568/3836923)的更简单的方法。解决方案是将`@JsonDeserialize(keyUsing = YourCustomDeserializer.class)`注释添加到地图中。然后通过扩展`KeyDeserializer`和覆盖该`deserializeKey`方法来实现您的自定义反序列化器。该方法将使用字符串键调用，您可以使用该字符串构建真实对象，甚至从数据库中获取现有对象。

所以首先在地图声明中：

```
@JsonDeserialize(keyUsing = MyCustomDeserializer.class)
private Map<Verb, List<Verb>> similarVerbs; 
```

然后创建将使用字符串键调用的反序列化器。

```
public class MyCustomDeserializer extends KeyDeserializer {
    @Override
    public MyMapKey deserializeKey(String key, DeserializationContext ctxt) throws IOException, JsonProcessingException {
        //Use the string key here to return a real map key object
        return mapKey;
    }
} 
```

适用于 Jersey 和 Jackson 2.x

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-11-17T21:17:49.113

如上所述，诀窍是您需要一个**密钥**反序列化器（这也让我感到困惑）。在我的情况下，在我的类上配置了一个非字符串映射键，但它不在我解析的 JSON 中，所以一个非常简单的解决方案对我有用（只需在键解串器中返回 null）。

```
public class ExampleClassKeyDeserializer extends KeyDeserializer
{
    @Override
    public Object deserializeKey( final String key,
                                  final DeserializationContext ctxt )
       throws IOException, JsonProcessingException
    {
        return null;
    }
}

public class ExampleJacksonModule extends SimpleModule
{
    public ExampleJacksonModule()
    {
        addKeyDeserializer(
            ExampleClass.class,
            new ExampleClassKeyDeserializer() );
    }
}

final ObjectMapper mapper = new ObjectMapper();
mapper.registerModule( new ExampleJacksonModule() ); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-28T14:41:57.620

基于[此处给出的答案](https://stackoverflow.com/questions/6371092/can-not-find-a-map-key-deserializer-for-type-simple-type-class-com-comcast-i)，建议使用反序列化器实现模块。JodaTime[模块](https://github.com/FasterXML/jackson-datatype-joda)是一个易于理解的包含序列化器和反序列化器的模块的完整示例。

请注意，模块功能是在 Jackson 1.7 版中引入的，因此您可能需要升级。

所以一步一步：

1.  根据 Joda 示例为您的类创建一个包含（反）序列化器的模块
2.  注册该模块`mapper.registerModule(module);`

你会准备好的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-08T18:16:49.547

在网上搜索之后，我认为我对如何处理 POJO 样式的键有一个不错的解决方案（尽管一如既往，最好不要使用完整的对象作为映射键）。

序列化器（注册为 Jackson 模块，在 Spring Boot 内部）：

```
@Bean
fun addKeySerializer(): Module =
    SimpleModule().addKeySerializer(YourClass::class.java, YourClassSerializer())

class YourClassSerializer() : JsonSerializer<YourClass>() {
    override fun serialize(value: DataElement, gen: JsonGenerator, serializers: SerializerProvider) {
        gen.writeFieldName(jacksonObjectMapper().writeValueAsString(value))
    }
} 
```

（请注意，在标准 Java 环境中，您必须在`objectMapper`此处实例化您自己的实例）

解串器：

```
@Bean
fun addKeyDeserializer(): Module =
    SimpleModule().addKeyDeserializer(YourClass::class.java, YourClassDeserializer())

class YourClassDeserializer() : KeyDeserializer() {
    override fun deserializeKey(key: String, ctxt: DeserializationContext): YourClass? {
        return ctxt.parser.readValueAs(YourClass::class.java)
    }
} 
```

# javascript - 如何获取数组中的唯一值

> ID：11246758
> 
> 赞同：239
> 
> 时间：2012-06-28T14:22:05.247
> 
> 标签：javascript, jquery

如何获取数组中唯一值的列表？我总是必须使用第二个数组还是在 JavaScript 中有类似于 java 的 hashmap 的东西？

我将只使用**JavaScript**和**jQuery**。不能使用其他库。

* * *

## 回答 #1

> 赞同：300
> 
> 时间：2017-02-08T21:30:24.663

这是一个更清洁的 ES6 解决方案，我看到这里不包括在内。它使用[Set](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Set)和[扩展运算符](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator)：`...`

```
var a = [1, 1, 2];

[... new Set(a)] 
```

哪个返回`[1, 2]`

* * *

## 回答 #2

> 赞同：276
> 
> 时间：2014-04-25T00:13:30.877

**或者对于那些寻找与当前浏览器兼容**的单行（简单且实用）的人：

```
let a = ["1", "1", "2", "3", "3", "1"];
let unique = a.filter((item, i, ar) => ar.indexOf(item) === i);
console.log(unique);
```

**2021 年更新** 我建议查看[Charles Clayton 的答案](https://stackoverflow.com/a/42123984/685404)，因为最近对 JS 的更改有更简洁的方法可以做到这一点。

**2017 年 4 月 18 日更新**

似乎 'Array.prototype.includes' 现在在最新版本的主流浏览器中得到了广泛支持（[兼容性](http://kangax.github.io/compat-table/es2016plus/#test-Array.prototype.includes)）

**2015 年 7 月 29 日更新：**

有计划让浏览器支持标准化的 'Array.prototype.includes' 方法，虽然没有直接回答这个问题；往往是相关的。

用法：

```
["1", "1", "2", "3", "3", "1"].includes("2");     // true 
```

Pollyfill（[浏览器支持](http://kangax.github.io/compat-table/es2016plus/#test-Array.prototype.includes)，[来自 mozilla](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)）：

```
// https://tc39.github.io/ecma262/#sec-array.prototype.includes
if (!Array.prototype.includes) {
  Object.defineProperty(Array.prototype, 'includes', {
    value: function(searchElement, fromIndex) {

      // 1\. Let O be ? ToObject(this value).
      if (this == null) {
        throw new TypeError('"this" is null or not defined');
      }

      var o = Object(this);

      // 2\. Let len be ? ToLength(? Get(O, "length")).
      var len = o.length >>> 0;

      // 3\. If len is 0, return false.
      if (len === 0) {
        return false;
      }

      // 4\. Let n be ? ToInteger(fromIndex).
      //    (If fromIndex is undefined, this step produces the value 0.)
      var n = fromIndex | 0;

      // 5\. If n ≥ 0, then
      //  a. Let k be n.
      // 6\. Else n < 0,
      //  a. Let k be len + n.
      //  b. If k < 0, let k be 0.
      var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);

      // 7\. Repeat, while k < len
      while (k < len) {
        // a. Let elementK be the result of ? Get(O, ! ToString(k)).
        // b. If SameValueZero(searchElement, elementK) is true, return true.
        // c. Increase k by 1.
        // NOTE: === provides the correct "SameValueZero" comparison needed here.
        if (o[k] === searchElement) {
          return true;
        }
        k++;
      }

      // 8\. Return false
      return false;
    }
  });
} 
```

* * *

## 回答 #3

> 赞同：134
> 
> 时间：2012-06-28T14:58:50.147

由于我在@Rocket 答案的评论中继续讨论它，我不妨提供一个不使用库的示例。这需要两个新的原型函数，`contains`并且`unique`

```
Array.prototype.contains = function(v) {
  for (var i = 0; i < this.length; i++) {
    if (this[i] === v) return true;
  }
  return false;
};

Array.prototype.unique = function() {
  var arr = [];
  for (var i = 0; i < this.length; i++) {
    if (!arr.contains(this[i])) {
      arr.push(this[i]);
    }
  }
  return arr;
}

var duplicates = [1, 3, 4, 2, 1, 2, 3, 8];
var uniques = duplicates.unique(); // result = [1,3,4,2,8]

console.log(uniques);
```

为了获得更高的可靠性，您可以`contains`用 MDN 的`indexOf`shim 替换并检查每个元素`indexOf`是否等于 -1：[文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)

* * *

## 回答 #4

> 赞同：103
> 
> 时间：2016-09-01T13:23:59.263

# 一个班轮，纯 JavaScript

**使用 ES6 语法**

`list = list.filter((x, i, a) => a.indexOf(x) === i)`

```
x --> item in array
i --> index of item
a --> array reference, (in this case "list") 
```

[![在此处输入图像描述](../Images/f0360ba4363fc173fb565112cffa9c84.png)](https://i.stack.imgur.com/TfGaP.png)

**使用 ES5 语法**

```
list = list.filter(function (x, i, a) { 
    return a.indexOf(x) === i; 
}); 
```

**浏览器兼容性**：IE9+

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2017-12-25T19:32:41.053

使用 EcmaScript 2016，您可以简单地这样做。

```
 var arr = ["a", "a", "b"];
 var uniqueArray = Array.from(new Set(arr)); // Unique Array ['a', 'b']; 
```

集合始终是唯一的，使用`Array.from()`您可以将集合转换为数组。作为参考，请查看文档。

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from) [来自 https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects /放](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2016-03-07T19:58:33.583

现在，您可以使用 ES6 的 Set 数据类型将您的数组转换为唯一的 Set。然后，如果你需要使用数组方法，你可以把它转回一个数组：

```
var arr = ["a", "a", "b"];
var uniqueSet = new Set(arr); // {"a", "b"}
var uniqueArr = Array.from(uniqueSet); // ["a", "b"]
//Then continue to use array methods:
uniqueArr.join(", "); // "a, b" 
```

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2012-06-28T14:48:26.907

如果您想保持原始数组不变，

你需要第二个数组来包含第一个的唯一元素-

大多数浏览器都有`Array.prototype.filter`：

```
var unique= array1.filter(function(itm, i){
    return array1.indexOf(itm)== i; 
    // returns true for only the first instance of itm
});

//if you need a 'shim':
Array.prototype.filter= Array.prototype.filter || function(fun, scope){
    var T= this, A= [], i= 0, itm, L= T.length;
    if(typeof fun== 'function'){
        while(i<L){
            if(i in T){
                itm= T[i];
                if(fun.call(scope, itm, i, T)) A[A.length]= itm;
            }
            ++i;
        }
    }
    return A;
}
 Array.prototype.indexOf= Array.prototype.indexOf || function(what, i){
        if(!i || typeof i!= 'number') i= 0;
        var L= this.length;
        while(i<L){
            if(this[i]=== what) return i;
            ++i;
        }
        return -1;
    } 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2012-06-28T14:29:52.620

在 Javascript 中不是原生的，但很多库都有这种方法。

Underscore.js 的`_.uniq(array)`（[链接](https://underscorejs.org/#uniq)）工作得很好（[源](https://github.com/jashkenas/underscore/blob/3d2f17a62b2987c2b7f93880edb0d4e48ce61f10/underscore.js#L1717-L1747)）。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2017-12-04T22:18:23.363

快速，紧凑，无嵌套循环，可用于任何对象，而不仅仅是字符串和数字，采用谓词，并且只需 5 行代码！！

```
function findUnique(arr, predicate) {
  var found = {};
  arr.forEach(d => {
    found[predicate(d)] = d;
  });
  return Object.keys(found).map(key => found[key]); 
} 
```

示例：按类型查找唯一项目：

```
var things = [
  { name: 'charm', type: 'quark'},
  { name: 'strange', type: 'quark'},
  { name: 'proton', type: 'boson'},
];

var result = findUnique(things, d => d.type);
//  [
//    { name: 'charm', type: 'quark'},
//    { name: 'proton', type: 'boson'}
//  ] 
```

如果您希望它找到第一个唯一项目而不是最后一个，请在此处添加 found.hasOwnPropery() 签入。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-06-28T14:33:03.130

使用 jQuery，这是我制作的 Array 唯一函数：

```
Array.prototype.unique = function () {
    var arr = this;
    return $.grep(arr, function (v, i) {
        return $.inArray(v, arr) === i;
    });
}

console.log([1,2,3,1,2,3].unique()); // [1,2,3] 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2015-04-16T04:28:28.360

使用第二个数组的简短而甜蜜的解决方案；

```
var axes2=[1,4,5,2,3,1,2,3,4,5,1,3,4];

    var distinct_axes2=[];

    for(var i=0;i<axes2.length;i++)
        {
        var str=axes2[i];
        if(distinct_axes2.indexOf(str)==-1)
            {
            distinct_axes2.push(str);
            }
        }
    console.log("distinct_axes2 : "+distinct_axes2); // distinct_axes2 : 1,4,5,2,3 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2017-10-21T08:45:24.690

上述大多数解决方案的运行时间复杂度都很高。

这是使用`reduce`并可以在**O(n) 时间内完成工作的解决方案。**

```
Array.prototype.unique = Array.prototype.unique || function() {
        var arr = [];
	this.reduce(function (hash, num) {
		if(typeof hash[num] === 'undefined') {
			hash[num] = 1; 
			arr.push(num);
		}
		return hash;
	}, {});
	return arr;
}

var myArr = [3,1,2,3,3,3];
console.log(myArr.unique()); //[3,1,2];
```

**笔记：**

该解决方案不依赖于reduce。这个想法是创建一个对象映射并将唯一的对象推送到数组中。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-12-06T00:36:47.093

您只需要 vanilla JS 即可使用 Array.some 和 Array.reduce 查找唯一性。使用 ES2015 语法，它只有 62 个字符。

```
a.reduce((c, v) => b.some(w => w === v) ? c : c.concat(v)), b) 
```

IE9+ 和其他浏览器支持 Array.some 和 Array.reduce。只需将常规函数的粗箭头函数更改为支持不支持 ES2015 语法的浏览器。

```
var a = [1,2,3];
var b = [4,5,6];
// .reduce can return a subset or superset
var uniques = a.reduce(function(c, v){
    // .some stops on the first time the function returns true                
    return (b.some(function(w){ return w === v; }) ?  
      // if there's a match, return the array "c"
      c :     
      // if there's no match, then add to the end and return the entire array                                        
      c.concat(v)}),                                  
  // the second param in .reduce is the starting variable. This is will be "c" the first time it runs.
  b); 
```

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some) [一些 https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects /数组/减少](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-01-04T08:26:58.190

又想到了这个问题。这是我用更少的代码实现这一目标的方法。

```
var distinctMap = {};
var testArray = ['John', 'John', 'Jason', 'Jason'];
for (var i = 0; i < testArray.length; i++) {
  var value = testArray[i];
  distinctMap[value] = '';
};
var unique_values = Object.keys(distinctMap);

console.log(unique_values);
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-11-09T11:43:39.420

如果您不需要太担心旧版浏览器，这正是 Sets 的设计目的。

> Set 对象允许您存储任何类型的唯一值，无论是原始值还是对象引用。

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)

```
const set1 = new Set([1, 2, 3, 4, 5, 1]);
// returns Set(5) {1, 2, 3, 4, 5} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-04-01T11:49:42.757

我已经在纯 JS 中尝试过这个问题。我已按照以下步骤进行操作：1\. 对给定数组进行排序，2\. 遍历排序后的数组，3\. 使用当前值验证前一个值和下一个值

```
// JS
var inpArr = [1, 5, 5, 4, 3, 3, 2, 2, 2,2, 100, 100, -1];

//sort the given array
inpArr.sort(function(a, b){
    return a-b;
});

var finalArr = [];
//loop through the inpArr
for(var i=0; i<inpArr.length; i++){
    //check previous and next value 
  if(inpArr[i-1]!=inpArr[i] && inpArr[i] != inpArr[i+1]){
        finalArr.push(inpArr[i]);
  }
}
console.log(finalArr); 
```

[演示](https://jsfiddle.net/sanketh/7j1aubre/2/)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-10-23T11:17:52.480

您可以输入具有重复项的数组，下面的方法将返回具有唯一元素的数组。

```
function getUniqueArray(array){
    var uniqueArray = [];
    if (array.length > 0) {
       uniqueArray[0] = array[0];
    }
    for(var i = 0; i < array.length; i++){
        var isExist = false;
        for(var j = 0; j < uniqueArray.length; j++){
            if(array[i] == uniqueArray[j]){
                isExist = true;
                break;
            }
            else{
                isExist = false;
            }
        }
        if(isExist == false){
            uniqueArray[uniqueArray.length] = array[i];
        }
    }
    return uniqueArray;
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-01-22T14:33:39.437

```
Array.prototype.unique = function () {
    var dictionary = {};
    var uniqueValues = [];
    for (var i = 0; i < this.length; i++) {
        if (dictionary[this[i]] == undefined){
            dictionary[this[i]] = i;
            uniqueValues.push(this[i]);
        }
    }
    return uniqueValues; 
} 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2019-10-29T14:03:40.660

这是一种具有可定制`equals`功能的方法，可用于原语和自定义对象：

```
Array.prototype.pushUnique = function(element, equalsPredicate = (l, r) => l == r) {
    let res = !this.find(item => equalsPredicate(item, element))
    if(res){
        this.push(element)
    }
    return res
} 
```

用法：

```
//with custom equals for objects
myArrayWithObjects.pushUnique(myObject, (left, right) => left.id == right.id)

//with default equals for primitives
myArrayWithPrimitives.pushUnique(somePrimitive) 
```

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2013-08-12T10:28:47.490

我只是在想我们是否可以使用线性搜索来消除重复项：

```
JavaScript:
function getUniqueRadios() {

var x=document.getElementById("QnA");
var ansArray = new Array();
var prev;

for (var i=0;i<x.length;i++)
  {
    // Check for unique radio button group
    if (x.elements[i].type == "radio")
    {
            // For the first element prev will be null, hence push it into array and set the prev var.
            if (prev == null)
            {
                prev = x.elements[i].name;
                ansArray.push(x.elements[i].name);
            } else {
                   // We will only push the next radio element if its not identical to previous.
                   if (prev != x.elements[i].name)
                   {
                       prev = x.elements[i].name;
                       ansArray.push(x.elements[i].name);
                   }
            }
    }

  }

   alert(ansArray); 
```

}

HTML：

```
<body>

<form name="QnA" action="" method='post' ">

<input type="radio"  name="g1" value="ANSTYPE1"> good </input>
<input type="radio" name="g1" value="ANSTYPE2"> avg </input>

<input type="radio"  name="g2" value="ANSTYPE3"> Type1 </input>
<input type="radio" name="g2" value="ANSTYPE2"> Type2 </input>

<input type="submit" value='SUBMIT' onClick="javascript:getUniqueRadios()"></input>

</form>
</body> 
```

# javascript - D3.js 中的堆积区域

> ID：11246759
> 
> 赞同：7
> 
> 时间：2012-06-28T14:22:07.230
> 
> 标签：javascript, object, d3.js, charts

我正在使用 D3.js，但在为具有多个系列的面积图设置堆叠布局时遇到问题。我的数据有两种可能的结构（如果有帮助的话）。一个是提供给脚本的原始数据，结构如下：

```
var data = [{key: 'Group1', value: 37, date: '04/23/12'},
           {key: 'Group2', value: 12, date: '04/23/12'},
           {key: 'Group3', value: 46, date: '04/23/12'},
           {key: 'Group1', value: 32, date: '04/24/12'},
           {key: 'Group2', value: 19, date: '04/24/12'},
           {key: 'Group3', value: 42, date: '04/24/12'},
           {key: 'Group1', value: 45, date: '04/25/12'},
           {key: 'Group2', value: 16, date: '04/25/12'},
           {key: 'Group3', value: 44, date: '04/25/12'},
           {key: 'Group1', value: 24, date: '04/26/12'},
           {key: 'Group2', value: 52, date: '04/26/12'},
           {key: 'Group3', value: 64, date: '04/26/12'}] 
```

第二个是嵌套结构，使用以下代码创建：

```
 pData = d3.nest()
            .key(function(d) { return d.key; })
            .map(data); 
```

导致这种结构：

```
pData = {Group1: [{date: 04/23/12, key: "Group1", value: 37}, 
                  {date: 04/24/12, key: "Group1", value: 32}, 
                  {date: 04/25/12, key: "Group1", value: 45},
                  ...],
         Group2: [{date: 04/23/12, key: "Group2", value: 12},
                  {etc, etc, etc}],
         GroupX: [...] } 
```

**我的问题是**：如何`d3.layout.stack()`使用上述数据结构之一（或某些变体）设置生成器，为我的数据创建堆叠结构，以便可以将其传递给类似于以下的区域生成器：

```
var areaGenerator = d3.svg.area()
    .interpolate('monotone')
    .x(function(d) { return x(d.date); })
    .y0(h)
    .y1(function(d) { return y(d.value); }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T21:15:00.943

您必须将一组图层提供给堆栈布局，因此首先要更改的是使用[nest.entries](https://github.com/mbostock/d3/wiki/Arrays#wiki-nest_entries)而不是[nest.map](https://github.com/mbostock/d3/wiki/Arrays#wiki-nest_map)。这将返回一个对象数组，其中包含一个`key`字段（例如“Group1”）和一个`values`包含相关记录的数组。然后，您将指定一个[stack.values](https://github.com/mbostock/d3/wiki/Stack-Layout#wiki-values)访问器，以便堆栈布局可以访问`values`每个层的数组。

您还需要为堆栈布局定义合适的*x*和*y*访问器，以便它可以理解您的输入数据：*x* -accessor 应该 return `d.date`，*y* -accessor 应该 return `d.value`。您还需要将日期字符串转换为日期；您可以使用[d3.time.format](https://github.com/mbostock/d3/wiki/Time-Formatting)来帮助解决这个问题。例如：

```
var format = d3.time.format("%m/%d/%y");
data.forEach(function(d) { d.date = format.parse(d.date); }); 
```

最后，更改您的区域定义，以便基线 y0 定义为`y(d.y0)`，顶线 y1 定义为`y(d.y0 + d.y)`。

这是一个工作示例：

*   [http://bl.ocks.org/3020685](http://bl.ocks.org/3020685)

# javascript - 谷歌地图自动完成国家限制IE8错误

> ID：11246762
> 
> 赞同：1
> 
> 时间：2012-06-28T14:22:26.607
> 
> 标签：javascript, google-maps

我有一个问题，当我尝试将自动完成限制为仅限美国时，它在 IE8 上失败。到目前为止找不到任何帮助，所以我很感激。错误和成功函数的执行取决于用户是否允许我们跟踪他们的位置。如果我不允许，在 IE9 上它根本不起作用，在 IE8 上它无论如何都会失败。使用最新代码更新（DNRY ...）

```
 function setupPlacesAutocomplete() {
       if (navigator.geolocation != undefined)
           navigator.geolocation.getCurrentPosition(successFunctionAC, errorFunctionAC);
       else
           errorFunctionAC();
   }
   //refactor this method
   function getFudgedBounds(lat, lng, fudge) {
       return new google.maps.LatLngBounds(new google.maps.LatLng(lat - fudge, lng - fudge), new google.maps.LatLng(lat + fudge, lng + fudge));
   }
   function successFunctionAC(position) {
       var defaultBounds = getFudgedBounds(position.coords.latitude, position.coords.longitude, .2);
       var options = {
           bounds: defaultBounds,
           componentRestrictions: { country: 'us' }
       };
       setAutoComplete(options);
   }
   function errorFunctionAC() {
       var defaultBounds = getFudgedBounds(parseFloat(geoip_latitude()), parseFloat(geoip_longitude()), .2);
       var options = {
           bounds: defaultBounds,
           componentRestrictions: { country: 'us' }
       };
       setAutoComplete(options);
   }
   function setAutoComplete(options) {
       var input1 = document.getElementById('StartSearchTerm');
       var autocomplete1 = new google.maps.places.Autocomplete(input1, options);
       var input2 = document.getElementById('EndSearchTerm');
       var autocomplete2 = new google.maps.places.Autocomplete(input2, options);
       $('.pac-container').css('z-index', 9999);
   } 
```

# asp.net - 如果用户在 STS 登录，我如何从 federatedpassivesignin 控件中检测联合身份

> ID：11246766
> 
> 赞同：0
> 
> 时间：2012-06-28T14:22:38.507
> 
> 标签：asp.net, forms-authentication, wif, federated-identity

嗨，我在我的 asp.net 站点（称为 ChildSite）上使用 FederatedPassiveSignInControl 从另一个 asp.net 站点（称为 ParentSite）上设置的 STS 获取用户身份。我的站点 (ChildSite) 的身份验证设置为 FormsAuthentication，因此 FederatedPassiveSignInControl 位于 ChildSite 的表单身份验证登录页面上。

我有2个场景。首先，用户登录到 ParentSite 并通过 ParentSite 中的链接继续访问 ChildSite。在第二个用户直接进入 ChildSite 并登录到 ChildSite：

场景一：

1.  用户在浏览器中打开*ParentSite*
2.  用户登录到 ParentSite
3.  ParentSite 在浏览器中显示指向 ChildSite 的链接
4.  用户点击指向 ChildSite 的链接
5.  用户转到子站点

在这里，用户来到登录页面。想要的行为是用户已在 ParentSite 登录，因此被无缝重定向到 ChildSite 上请求的 URL。

而是显示登录页面，用户必须单击 FedratedPassiveSigninControl 按钮来检索他的身份，然后被重定向。我无法设置 FedratedPassiveSigninControl 属性 autosignin="true"。它总是在未登录时将用户重定向到 ParentSite，这会破坏场景 2。

我想知道我如何检测，或者我如何让 FederatedPassiveSignin Control（或其他 WIF 组件）检测到用户已经登录，不显示 FedratedPassiveSigninControl 并且只是将用户转发到他请求的页面。

场景二：

1.  用户在浏览器中打开*ChildSite*
2.  用户在 ChildSite 的文本输入中输入凭据并单击登录。
3.  显示 ChildSite 请求的页面。

我在这里错过了什么吗？

干杯，死

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:43:23.950

最简单的方法是在场景 1 的第 4 步中添加一个额外的查询字符串参数，这样当您最终到达登录页面时，您就会有一个“if”：“如果存在查询字符串参数，则 AutoSignIn = true”。

这被称为“家庭领域发现”，尽管您的情况并不典型，因为 hrd 通常涉及两个或多个 stses，在这里您必须区分 sts 和 forms 身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:36:06.470

这看起来像一个经典的 SSO 场景。ParentSite 和 ChildSite 应该是 2 个不同的依赖方。如果用户访问 ParentSite，那么每当他们访问受保护的资源（任何需要用户进行身份验证的资源）时，他们就会被重定向到 STS 进行身份验证。在 STS 和用户浏览器之间建立会话，然后用户使用有效令牌返回到 ParentSite（假设“快乐路径”）。

当他们点击 ChildSite 上的受保护资源（例如，通过 ParentSite 上的链接）时，他们将再次被重定向到 STS（例如，他们将请求专门用于 ChildSite 的令牌，第二个依赖方）。这一次，因为已经有一个与 STS 的会话，所以认证步骤已经完成，并且颁发了第二个令牌。所有这些都为用户无缝工作。

“索赔指南”的这一章涵盖了这种情况：http: [//msdn.microsoft.com/en-us/library/ff359102](http://msdn.microsoft.com/en-us/library/ff359102)

附加说明：不应在任何站点中输入凭据，而应在 STS 中输入凭据。

# curl - Tor & cURL：无法完成 SOCKS5 与 0.0.0.0:0 的连接

> ID：11246770
> 
> 赞同：8
> 
> 时间：2012-06-28T14:22:54.063
> 
> 标签：curl, centos, tor

正在使用 tor 在一台服务器上运行抓取脚本，一切正常。将其移至生产服务器，脚本停止工作。尝试手动运行 cURL，得到以下输出：

```
curl http://www.google.com --socks5 '127.0.0.1:9050'
curl: (7) Can't complete SOCKS5 connection to 0.0.0.0:0\. (6) 
```

相关信息：Tor 版本 0.2.2.35 | CentOS 6.2 i686

```
curl --version
curl 7.19.7 (i686-pc-linux-gnu) libcurl/7.19.7 NSS/3.12.7.0 zlib/1.2.3 libidn/1.18 libssh2/1.2.2
Protocols: tftp ftp telnet dict ldap ldaps http file https ftps scp sftp 
Features: GSS-Negotiate IDN IPv6 Largefile NTLM SSL libz 
```

在我的搜索中似乎没有太多关于这个特定错误消息的信息，只是一般的错误配置或 tor 没有运行。我在生产服务器上使用与它工作的开发服务器相同的配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:00:35.180

我服务器上的时间晚了 10 个小时。修复后（已经安装了 ntpd，我只运行命令*/usr/sbin/ntpdate 0.rhel.pool.ntp.org europe.pool.ntp.org*）并重新启动 Tor，一切正常。

# java - 无法投射 HashMap 到扩展地图的接口

> ID：11246771
> 
> 赞同：5
> 
> 时间：2012-06-28T14:22:54.700
> 
> 标签：java, generics, map, hashmap, extends

这可能是我的一个简单的误解。

有一个简单的界面：

```
public interface IParams extends Map<String,String> {
} 
```

然后我尝试使用：

```
IParams params = (IParams) new HashMap<String,String>(); 
```

通过语法和编译，但在运行时我得到：

```
java.lang.ClassCastException: java.util.HashMap cannot be cast to com.foobar.IParams 
```

在这种情况下，我对泛型的误解在哪里有任何见解吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T14:25:08.630

`HashMap`不实现您的接口`IParams`，因此您不能将 a`HashMap`转换为`IParams`. 这与泛型无关。

`IParams`并且`HashMap`是“兄弟姐妹”，从实现或扩展的意义上说`Map`。但这并不意味着您可以将 a`HashMap`视为一个`IParams`。假设您要向`IParams`界面添加一个方法。

```
public interface IParams extends Map<String, String> {
    void someMethod();
} 
```

当然，`someMethod`不存在于`HashMap`. 如果强制转换 a `HashMap`to`IParams`可行，那么如果您尝试调用该方法，您会期望发生什么？

```
IParams params = (IParams) new HashMap<String,String>();

// What's supposed to happen here? HashMap doesn't have someMethod.
params.someMethod(); 
```

关于您的评论：

> 目的是创建一个隐藏泛型的接口，并保存（未在示例中显示）映射键字符串定义

您可以做的是创建一个实现`IParams`和扩展的类`HashMap`：

```
public class Params extends HashMap<String, String> implements IParams {
    // ...
}

IParams params = new Params(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T14:26:02.293

`HashMap`已实现`Map`接口但未实现您的接口`IParams`即使您的接口派生自`Map`，您也不能将其转换`IParams`为，因为它不是`IParams`

# php - Symfony2：在 FormBuilder 中获取用户角色列表

> ID：11246774
> 
> 赞同：18
> 
> 时间：2012-06-28T14:23:06.030
> 
> 标签：php, symfony, fosuserbundle

我正在制作一个用于创建用户的表单，并且我想在创建用户时为他分配一个或多个角色。

如何获取定义的角色列表`security.yml`？

这是我目前的表单构建器：

```
public function buildForm(FormBuilder $builder, array $options)
{
    parent::buildForm($builder, $options);

    // add your custom fields
    $user = new User();
    $builder->add('regionUser');
    $builder->add('roles' ,'choice' ,array('choices' => $user->getRolesNames(),
            'required'  => true,
    ));

} 
```

并在 User.php

```
public function getRolesNames(){
    return array(
        "ADMIN" => "Administrateur",
        "ANIMATOR" => "Animateur",
        "USER" => "Utilisateur",        
    );
} 
```

当然，这个解决方案是行不通的，因为`roles`在数据库中定义为位图，所以`choices`无法创建列表。

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-28T17:18:32.553

`security.role_hierarchy.roles`container 参数将角色层次结构保存为一个数组。您可以对其进行概括以获取定义的角色列表。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-28T15:27:56.347

You can get a list of reachable roles from this method:

```
Symfony\Component\Security\Core\Role\RoleHierarchy::getReachableRoles(array $roles) 
```

It seems to return all roles reachable from roles in array `$roles` parameter. It's an internal service of Symfony, whose ID is `security.role_hierarchy` and is not public (you must explicitely pass it as parameters, it's not acessible from Service Container).

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-07-24T06:05:39.190

您可以为此提供服务并注入“security.role_hierarchy.roles”参数。

服务定义：

```
acme.user.roles:
   class: Acme\DemoBundle\Model\RolesHelper
   arguments: ['%security.role_hierarchy.roles%'] 
```

服务等级：

```
class RolesHelper
{
    private $rolesHierarchy;

    private $roles;

    public function __construct($rolesHierarchy)
    {
        $this->rolesHierarchy = $rolesHierarchy;
    }

    public function getRoles()
    {
        if($this->roles) {
            return $this->roles;
        }

        $roles = array();
        array_walk_recursive($this->rolesHierarchy, function($val) use (&$roles) {
            $roles[] = $val;
        });

        return $this->roles = array_unique($roles);
    }
} 
```

您可以像这样在控制器中获取角色：

```
$roles = $this->get('acme.user.roles')->getRoles(); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-04-27T21:01:08.917

为了正确表示您的角色，您需要递归。角色可以扩展其他角色。

我在 security.yml 中使用以下角色作为示例：

```
ROLE_SUPER_ADMIN: ROLE_ADMIN
ROLE_ADMIN:       ROLE_USER
ROLE_TEST:        ROLE_USER 
```

您可以通过以下方式获得此角色：

```
$originalRoles = $this->getParameter('security.role_hierarchy.roles'); 
```

递归示例：

```
private function getRoles($originalRoles)
{
    $roles = array();

    /**
     * Get all unique roles
     */
    foreach ($originalRoles as $originalRole => $inheritedRoles) {
        foreach ($inheritedRoles as $inheritedRole) {
            $roles[$inheritedRole] = array();
        }

        $roles[$originalRole] = array();
    }

    /**
     * Get all inherited roles from the unique roles
     */
    foreach ($roles as $key => $role) {
        $roles[$key] = $this->getInheritedRoles($key, $originalRoles);
    }

    return $roles;
}

private function getInheritedRoles($role, $originalRoles, $roles = array())
{
    /**
     * If the role is not in the originalRoles array,
     * the role inherit no other roles.
     */
    if (!array_key_exists($role, $originalRoles)) {
        return $roles;
    }

    /**
     * Add all inherited roles to the roles array
     */
    foreach ($originalRoles[$role] as $inheritedRole) {
        $roles[$inheritedRole] = $inheritedRole;
    }

    /**
     * Check for each inhered role for other inherited roles
     */
    foreach ($originalRoles[$role] as $inheritedRole) {
        return $this->getInheritedRoles($inheritedRole, $originalRoles, $roles);
    }
} 
```

输出：

```
array (
  'ROLE_USER' => array(),
  'ROLE_TEST' => array(
                        'ROLE_USER' => 'ROLE_USER',
  ),
  'ROLE_ADMIN' => array(
                        'ROLE_USER' => 'ROLE_USER',
  ),
  'ROLE_SUPER_ADMIN' => array(
                        'ROLE_ADMIN' => 'ROLE_ADMIN',
                        'ROLE_USER' => 'ROLE_USER',
  ),
) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-10-25T00:17:52.863

在 Symfony 3.3 中，您可以创建一个 RolesType.php，如下所示：

```
<?php

namespace AppBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\OptionsResolver\OptionsResolver;
use Symfony\Component\Form\Extension\Core\Type\ChoiceType;
use Symfony\Component\Security\Core\Role\RoleHierarchyInterface;

/**
 * @author Echarbeto
 */
class RolesType extends AbstractType {

  private $roles = [];

  public function __construct(RoleHierarchyInterface $rolehierarchy) {
    $roles = array();
    array_walk_recursive($rolehierarchy, function($val) use (&$roles) {
      $roles[$val] = $val;
    });
    ksort($roles);
    $this->roles = array_unique($roles);
  }

  public function configureOptions(OptionsResolver $resolver) {
    $resolver->setDefaults(array(
        'choices' => $this->roles,
        'attr' => array(
            'class' => 'form-control',
            'aria-hidden' => 'true',
            'ref' => 'input',
            'multiple' => '',
            'tabindex' => '-1'
        ),
        'required' => true,
        'multiple' => true,
        'empty_data' => null,
        'label_attr' => array(
            'class' => 'control-label'
        )
    ));
  }

  public function getParent() {
    return ChoiceType::class;
  }

} 
```

然后将其添加到表单中，如下所示：

```
$builder->add('roles', RolesType::class,array(
          'label' => 'Roles'
      )); 
```

**重要的是还必须包含每个角色，例如： ROLE_ADMIN: [ROLE_ADMIN, ROLE_USER]**

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-12-21T10:24:12.760

如果您需要获取某个角色的所有继承角色：

```
use Symfony\Component\Security\Core\Role\Role;
use Symfony\Component\Security\Core\Role\RoleHierarchy;

private function getRoles($role)
{
    $hierarchy = $this->container->getParameter('security.role_hierarchy.roles');
    $roleHierarchy = new RoleHierarchy($hierarchy);
    $roles = $roleHierarchy->getReachableRoles([new Role($role)]);
    return array_map(function(Role $role) { return $role->getRole(); }, $roles);
} 
```

然后调用这个函数：`$this->getRoles('ROLE_ADMIN');`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-28T14:42:44.407

This is not exactly what you want but it makes your example working:

```
use Vendor\myBundle\Entity\User;

public function buildForm(FormBuilder $builder, array $options)
{
    parent::buildForm($builder, $options);

    // add your custom fields
    $user = new User();
    $builder->add('regionUser');
    $builder->add('roles' ,'choice' ,array('choices' => User::getRolesNames(),
            'required'  => true,
    ));
} 
```

But regarding getting your Roles from an entity, maybe you can use entity repository stuff to query the database.

Here is a good example to get what to want using the **queryBuilder** into the entity repository:

```
public function buildForm(FormBuilder $builder, array $options)
{
    parent::buildForm($builder, $options);

    // add your custom fields
    $user = new User();
    $builder->add('regionUser');
    $builder->add('roles' ,'entity' array(
                 'class'=>'Vendor\MyBundle\Entity\User',
                 'property'=>'roles',
                 'query_builder' => function (\Vendor\MyBundle\Entity\UserRepository $repository)
                 {
                     return $repository->createQueryBuilder('s')
                            ->add('orderBy', 's.sort_order ASC');
                 }
                )
          );
} 
```

[http://inchoo.net/tools-frameworks/symfony2-entity-field-type/](http://inchoo.net/tools-frameworks/symfony2-entity-field-type/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-20T11:01:05.517

在 Symfony 2.7 中，在控制器中你必须使用 $this->getParameters() 来获取角色：

```
$roles = array();
foreach ($this->getParameter('security.role_hierarchy.roles') as $key => $value) {
    $roles[] = $key;

    foreach ($value as $value2) {
        $roles[] = $value2;
    }
}
$roles = array_unique($roles); 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-01-22T01:23:42.257

这是我所做的：

表格类型：

```
use FTW\GuildBundle\Entity\User;

class UserType extends AbstractType
{

public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('username')
        ->add('email')
        ->add('enabled', null, array('required' => false))
        ->add('roles', 'choice', array(
        'choices' => User::getRoleNames(),
        'required' => false,'label'=>'Roles','multiple'=>true
    ))
        ->add('disableNotificationEmails', null, array('required' => false));
} 
```

在实体中：

```
use Symfony\Component\Yaml\Parser; ...

static function getRoleNames()
{
    $pathToSecurity = __DIR__ . '/../../../..' . '/app/config/security.yml';
    $yaml = new Parser();
    $rolesArray = $yaml->parse(file_get_contents($pathToSecurity));
    $arrayKeys = array();
    foreach ($rolesArray['security']['role_hierarchy'] as $key => $value)
    {
        //never allow assigning super admin
        if ($key != 'ROLE_SUPER_ADMIN')
            $arrayKeys[$key] = User::convertRoleToLabel($key);
        //skip values that are arrays --- roles with multiple sub-roles
        if (!is_array($value))
            if ($value != 'ROLE_SUPER_ADMIN')
                $arrayKeys[$value] = User::convertRoleToLabel($value);
    }
    //sort for display purposes
    asort($arrayKeys);
    return $arrayKeys;
}

static private function convertRoleToLabel($role)
{
    $roleDisplay = str_replace('ROLE_', '', $role);
    $roleDisplay = str_replace('_', ' ', $roleDisplay);
    return ucwords(strtolower($roleDisplay));
} 
```

请提供反馈...我使用了其他答案的一些建议，但我仍然觉得这不是最好的解决方案！

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-06-28T15:22:07.407

```
//FormType
use Symfony\Component\Yaml\Parser;

function getRolesNames(){
        $pathToSecurity = /var/mydirectory/app/config/security.yml
        $yaml = new Parser();
        $rolesArray = $yaml->parse(file_get_contents($pathToSecurity ));

        return $rolesArray['security']['role_hierarchy']['ROLE_USER'];
} 
```

这是迄今为止我发现从配置文件中获取或设置我想要的内容的最佳方式。

好勇气

# vba - 无法找到“如果...”

> ID：11246778
> 
> 赞同：0
> 
> 时间：2012-06-28T14:23:11.487
> 
> 标签：vba, ms-word

我无法在 VBA 中执行查找以查找“如果...” Word 似乎不喜欢查找“如果”。部分。有任何想法吗？

```
 Sub Macro2()
 Selection.Find.ClearFormatting
Selection.Find.Highlight = False
Selection.Find.Replacement.ClearFormatting
With Selection.Find
    .Text = "If..."
    .Replacement.Text = "If..."
    .Forward = True
    .Wrap = wdFindContinue
    .Format = True
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With
Selection.Find.Execute Replace:=wdReplaceAll
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:05:00.987

Word 有可能将三个句点替换为单个字符省略号。

作为奖励，省略号之前和之后应该有一个空格，它可以是一个半空格或细空格，但肯定是一个非中断空格，因此它不会被强制到新行上。

# c++ - 矢量 push_back 在类对象中不起作用

> ID：11246779
> 
> 赞同：1
> 
> 时间：2012-06-28T14:23:12.487
> 
> 标签：c++, vector, push-back

我正在制作各种层次结构，并且无法将元素添加到向量中。我简化了代码，但仍然无法按预期向向量添加元素。层次结构如下所示：

Pdb > 链 > 字符串

Pdb 和 Chain 是类名，strings 是属于 Chain 的向量的名称。我无法 push_back 将字符串添加到字符串。查看我的代码，您可能会更好地了解：

链类：

```
class Chain {
  string chain_id;
  vector<string> strings;

public:
  Chain(string id_) { chain_id = id_; }
  vector<string> GetStrings() { return strings; }
  void AddString(string s) { 
    cout << "Size of strings BEFORE push_back in AddString: " << strings.size() << endl;
    strings.push_back(s); 
    cout << "Size of strings AFTER push_back in AddString: " << strings.size() << endl;
  }
  string GetChainId() { return chain_id; }
}; 
```

pdb类：

```
class Pdb {
  string pdb_id;
  vector<Chain> chains;

public:
  Pdb(string id_) { pdb_id = id_; }
  vector<Chain> GetChains() { return chains; }
  void AddChain(Chain c) { chains.push_back(c); }
  string GetPdbId() { return pdb_id; }
}; 
```

主要的：

```
int main () {

  vector<Pdb> pdbs;
  pdbs.push_back(Pdb("1ubq"));
  cout << "\n\t1\. " << pdbs[0].GetPdbId() << endl;
  pdbs[0].AddChain(Chain("A"));
  cout << "\n\t2\. " << pdbs[0].GetChains()[0].GetChainId() << endl;
  pdbs[0].GetChains()[0].AddString("Whateva");
  cout << "\n\t3\. Size of strings after AddString in main: " << pdbs[0].GetChains()[0].GetStrings().size() << endl;
  return 0;
} 
```

这输出：

```
1\. 1ubq

2\. A
Size of strings BEFORE push_back in AddString: 0
Size of strings AFTER push_back in AddString: 1

3\. Size of strings after AddString in main: 0 
```

正如您所看到的，AddString 函数正在向 AddString 函数本身内的 stings 添加一个元素，但是当我在 main 中返回 GetStrings 时，在执行 AddString 之后，字符串为空。我不明白为什么会这样。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:25:22.220

问题是您返回成员的副本，而不是成员本身：

```
vector<Chain> GetChains() 
```

应该

```
vector<Chain>& GetChains() 
```

为此工作。

我必须指出，您严重违反了单一责任原则。您直接对成员进行操作，这不是一个好主意。考虑更换：

```
pdbs[0].GetChains()[0].AddString("Whateva"); 
```

有类似的东西

```
pdbs[0].AddStringToChain(0,"Whateva"); 
```

# jquery - jsonp调用WCF返回错误

> ID：11246781
> 
> 赞同：1
> 
> 时间：2012-06-28T14:23:17.793
> 
> 标签：jquery, wcf, jsonp

背景：

我创建了一个运行良好的 WCF 服务（.NET 3.5），需要使用 JavaScript 使用该服务，并且由于跨域限制（该服务与包含 javascript 的网页位于不同的服务器上） ，标准的肥皂帖不起作用。我更改了一些配置，根据 Microsoft 博客文章向该方法添加了 WebInvoke 属性，并让服务与 GET 一起工作，并通过使用 soapUI 测试确认该方法正在工作。我试图在 JSFiddle 上设置一个示例，但因为这是一个 Intranet 服务，我显然无法让它工作。

这是我的 SVC.cs 文件中的方法：（我在尝试解决这个问题时对配置文件进行了一些代码更改和更改）

```
 // On the interface that defines the contract
    [OperationContract]
    [WebGet]
    string Post(string questionid, string answervalue);

    // In my actual service file code behine.
    public string Post(string questionid, string answervalue)
    {

        Guid dataid = _dataProvider.Post(questionid, answervalue);
        _dataProvider.Log(retval.ToString());
        return dataid.ToString();
    } 
```

现在，如果我只输入 URL，我会得到一个表示该值的 GUID 的字符串表示形式。

```
 http://localhost/WebPostSvc.svc/json/Post?questionid=207&answervalue=207009
   returns: "<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">04bb6445-b1af-4214-8f8b-cf66bb15467f</string>" 
```

这是我要开始工作的javascript：

```
<script type="text/javascript">

    // string functions to allow formatted output
    String.prototype.format = function() {
      var args = arguments;
      return this.replace(/{(\d+)}/g, function(match, number) { 
        return typeof args[number] != 'undefined'
          ? args[number]
          : match
        ;
      });
    };

    $(function() 
    {

        $('.testpostbtn').click(function() {
            $.jsonp({
                url: "ttp://localhost/WebPostSvc.svc/json/Post?questionid=207&answervalue=207009",
                callbackParameter: "callback",
                "success" : function(data) {
                   alert(data);

                },
                "error" : function(d, msg) {
                        alert(
                            "Could not post the data\ncallback={0}\ncallbackParameter={1}\nurl={2}\n{3}\n"
                               .format(d.callback, d.callbackParameter, d.url, msg)
                        );
                    }
            });
            alert('request sent!');

        });
    });

</script> 
```

$.jsonp 方法来自：

```
// jquery.jsonp 2.3.1 (c)2012 Julian Aubourg | MIT License
// https://github.com/jaubourg/jquery-jsonp 
```

我所要做的就是从方法返回的错误，我将其发送到警报框：

```
Could not post the data
callback=_jqjsp
callbackParameter=callback
url=http://localhost/WebPostSvc.svc/json/Post?questionid=207&answervalue=207009
error 
```

返回的唯一错误消息是“错误”，它不是很有帮助。

我确定我只是错误地使用了该方法，我需要知道：

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:13:14.940

1) 要使跨域与 WCF 一起工作，您可能需要配置绑定。

我从[http://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/](http://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/)复制的示例参见 crossDomainAccessEnabled 属性。

```
<system.serviceModel>
  <behaviors>
    <endpointBehaviors>
      <behavior name="webHttpBehavior">
        <webHttp />
      </behavior>
    </endpointBehaviors>
  </behaviors>
  <bindings>
    <webHttpBinding>
      <binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" />
    </webHttpBinding>
  </bindings>
  <services>
    <service name="ServiceSite.CustomersService">
      <endpoint address="" binding="webHttpBinding"
                bindingConfiguration="webHttpBindingWithJsonP"
                contract="ServiceSite.CustomersService"
                behaviorConfiguration="webHttpBehavior"/>
    </service>
  </services>
</system.serviceModel> 
```

2) 使用可用的调试工具。Chrome 内置了很好的开发者工具，在 Firefox 中你可以安装 firebug。这两个工具都可以捕获网络请求并为您提供一些信息。

通常，如果请求从未被触发并且您仍然收到错误，则函数调用有问题，如果请求失败，则服务器上的某些内容正在阻塞。通常您可以查看响应并获取更多信息。如果响应返回正常，但在此之后数据格式有问题则失败。

# c++ - CPPUnit - 全局变量

> ID：11246791
> 
> 赞同：0
> 
> 时间：2012-06-28T14:23:45.043
> 
> 标签：c++, visual-c++, cppunit

之后如何在 CPPUNIT_TEST 中访问我在第一个 CPPUNIT_TEST 中设置的变量？

对于 EX。

```
CPPUNIT_TEST_SUITE(TestingEx);
CPPUNIT_TEST(ex1);
CPPUNIT_TEST(ex2);
CPPUNIT_TEST_SUITE_END();

public:
int x=0;
void ex1()
{ 
do some testing and logic would set x to someother value ...
    x=4;
}
void ex2()
{
use x to do some testing // x should be 4, but I get 0??
} 
```

有人可以解释一下我出了什么问题，我该如何让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T22:16:13.190

Cppunit 遵循每个测试相互分离的概念。这对所有单元测试框架来说都是一个有用的假设，更糟糕的是，它不能保证测试以特定的顺序执行。

您有解决问题的方法：

*   在你的类中使用静态变量，这很难看，在编写测试时很少使用，几乎从不用于单元测试。
*   在执行每个测试之前使用 setUp 初始化您的测试环境
*   以其他方式初始化您的数据，例如构造函数，在测试方法中，......在每次测试之前

# php - 将文件放在子域上

> ID：11246793
> 
> 赞同：0
> 
> 时间：2012-06-28T14:23:49.850
> 
> 标签：php, .htaccess, mod-rewrite

我使用 DNS 在我的服务器上注册了一个子域：client.henrybuilt.com

如果我希望在我的 ftp 服务器上将 client.henrybuilt.com 的默认目录设为 /client/，我会怎么做？

基本上，当您访问 client.henrybuilt.com 时，我希望它像一个单独的站点

显然我应该使用 .htaccess -> mod_rewrite 但我会更具体地做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:28:19.897

如果您使用 apache，您需要添加一个新的虚拟主机，那么您只需将虚拟主机中的文档根目录更改为文件的位置，然后在 Web 根目录中创建该文件夹

```
<VirtualHost *>
ServerName client.henrybuilt.com
DocumentRoot "/var/www/html/client/"
<Directory "/var/www/html/client/">
allow from all
Options +Indexes
</Directory>
</VirtualHost> 
```

把你的文件放在这里 -`/var/www/html/client/`

# wpf - WPF - 绑定到 Oracle 数据库

> ID：11246796
> 
> 赞同：3
> 
> 时间：2012-06-28T14:23:58.913
> 
> 标签：wpf, data-binding, database-connection

在 WPF 中，如何实现与 Oracle 数据库的绑定？

### 现有解决方案

1.  *Linq*（全部 3 个）
    *   [使用 LINQ-SQL 在 WPF 中绑定到数据库的简单演示](http://www.codeproject.com/Articles/24192/Simple-Demo-of-Binding-to-a-Database-in-WPF-using)
    *   [将 LINQ to SQL 与 Oracle 一起使用](https://stackoverflow.com/questions/4276495/using-linq-to-sql-with-oracle)
    *   [构建 LINQ 提供程序](http://msdn.microsoft.com/en-us/vstudio//ee672195.aspx)
2.  *ADO.net*
    *   [http://erkapeblog.blogspot.com/2010/05/data-binding-and-adonet-in-wpf.html](http://erkapeblog.blogspot.com/2010/05/data-binding-and-adonet-in-wpf.html)
3.  *ODAC*
    *   不知道如何

如果您尝试过上述任何一种方法并拥有它们的链接，它也会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:03:43.390

我尝试了我在问题中列出的第二个解决方案**（ADO.net）**并且它有效！

### 要遵循的步骤

1.  安装*Oracle 客户端*（我使用的是 Oracle 11g）。显然，也可以使用[即时客户端。](https://stackoverflow.com/questions/1272998/do-i-still-need-to-install-oracle-client-if-using-microsoft-odbc-for-oracle-to-c)
2.  按照[本文](http://erkapeblog.blogspot.com/2010/05/data-binding-and-adonet-in-wpf.html)中的步骤操作。
3.  文章中的小**错字**：ListBox 的名称在代码中被错误地称为 listBox 而不是 listID。
4.  **对我有用的连接字符串**（[来源](http://www.connectionstrings.com/oracle#p19)）：

> SERVER=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=MyHost)(PORT=MyPort))(CONNECT_DATA=(SERVICE_NAME=MyOracleSID)));uid=myUsername;pwd=myPassword;

# ruby-on-rails - Rails：.create 使 :id 的自定义值无效

> ID：11246797
> 
> 赞同：1
> 
> 时间：2012-06-28T14:24:08.353
> 
> 标签：ruby-on-rails, ruby, activerecord, activemodel, seed

当我执行 Model.create 方法时，如果我为 :id 指定一个值，它稍后会被取消。例子：

```
Model.create (
  :id => 50,
  :name => Joe,
  :enabled => yes
) 
```

相反，我要做的是使用 .new 并将其存储在类变量中，通过类变量存储我的 id 值，然后最后调用保存：

```
m = Model.new (
  :name => Joe,
  :enabled => yes
)

m.id = 50
m.save 
```

我正在尝试在seeds.rb 中执行此代码，这不是很干的代码。我怎样才能更好地做到这一点并取得相同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:34:31.313

id 只是 attr_protected。为防止这种情况，您可以覆盖默认受保护属性的列表。在属性信息可能来自外部的任何地方都要小心。id 字段默认受保护是有原因的。

```
class Model < ActiveRecord::Base
   private
   def attributes_protected_by_default
      []
   end
end 
```

或与@Leo 一起回答

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:28:58.337

这可能是你的答案。Model.create 基本上是 Model.new 后跟 Model.save ，因为您正在更改 id 并再次保存，您不妨这样做

```
m = Model.new { 
  :name => Joe,
  :enabled => yes
}
m.id = 50
m.save! 
```

这将使您免于进行两次保存。

# outlook - 如何使用菜单获取弹出窗口？

> ID：11246803
> 
> 赞同：2
> 
> 时间：2012-06-28T14:24:30.410
> 
> 标签：outlook, dynamics-crm, dynamics-crm-2011

我正在从 CRM 2011 for Outlook 中打开一个弹出窗口。问题是我需要用户能够打印。如果您从 IE 执行此操作，则浏览器打印菜单可用，但从 Outlook 则不可用。你只是得到一个普通的窗口。当从 Outlook 打开弹出窗口时，按 Alt 键没有任何作用。openStdWin() 选项似乎都不适用于 Outlook。

仅供参考，我正在尝试打印仪表板（为什么 MS 将其排除在我之外）。我们提出的解决方案是将以下代码连接到功能区按钮。然后用户使用内置的浏览器打印功能，可以打印仪表板。但似乎不是来自 Outlook。有什么建议么？（在任何人建议之前，我们的客户认为打印屏幕是不可接受的）

```
function printCurrentDashboard() {    
    if (Xrm.Page.context.isOutlookClient()) {
        var pTarget = document.getElementById('dashboardFrame').src;
        openStdWin(window.location.protocol + '//' + window.location.host + pTarget, 'test', 800, 600, 'menubar=yes,toolbar=yes,channelmode=no,directories=yes,fullscreen=no,location=yes,status=yes,titlebar=yes'); 
    }
    else {
        var pTarget = parent.document.getElementById('dashboardFrame').src;
        window.open(window.location.protocol + '//' + window.location.host + pTarget);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:58:32.737

尝试使用`openStdWinWithFeatures`vs `openStdWin`。

# android - 使用 OpenGL 更快的相机预览？

> ID：11246805
> 
> 赞同：4
> 
> 时间：2012-06-28T14:24:33.080
> 
> 标签：android, opengl-es, android-camera

编写一个从相机获取预览帧的应用程序对其进行一些转换，然后将其显示在屏幕上。

在

```
public void onPreviewFrame(byte[] data, Camera camera) {} 
```

我将数据在另一个线程中的 JNI 中进行 yuv2rgb 和一些像素操作。然后我从 RGB int 数组创建位图并使用

```
canvas.drawBitmap(bmp, 0, 0, null); 
```

我在 HTC Nexus One 上以 640x480 获得大约 15-20FPS，在三星 Galaxy S II 上获得 30+ FPS

我想知道是否可以通过使用 Android OpenGL ES 进行绘图来加快速度？我会遵循本指南： http: [//obviam.net/index.php/texture-mapping-opengl-android-displaying-images-using-opengl-and-squares/](http://obviam.net/index.php/texture-mapping-opengl-android-displaying-images-using-opengl-and-squares/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T06:41:18.060

您是否将 SurfaceView 用于您的相机应用程序？您获得的预览帧是屏幕上显示的实际帧的副本。我猜你添加了另一个视图来显示回调预览帧。

我不是图形专家，但你为什么不试试[SurfaceTexture](http://developer.android.com/reference/android/graphics/SurfaceTexture.html)。您可以使用 setpreviewtexture() 代替 setpreviewwindow()。这样，Camera Service 将直接将缓冲区发送到应用程序，而不是制作副本并将其排队到 AndroidNativeWindow。这可能会提高你的表现。

这就是安卓相机应用全景的工作方式。[你可以在这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.1_r1/com/android/camera/panorama/PanoramaActivity.java)找到源代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T07:19:21.327

实现了 OpenGL ES，它确实有助于提高性能

# c# - C# TopMost 和托盘

> ID：11246810
> 
> 赞同：0
> 
> 时间：2012-06-28T14:25:02.907
> 
> 标签：c#, .net, winforms

我有一个 WinForms 应用程序，它`TopMost`在按下热键时显示一个新的小表单（设置为 true）。

但是，当我将主表单发送到托盘时，第二个表单仍显示在桌面上。

如何将我的表单设置为始终显示在所有应用程序之上，或者仅显示在当前关注的应用程序之上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:32:35.863

参考：[Form.TopMost](https://stackoverflow.com/a/683346/1004522)。

除非其他程序正在创建最顶层的窗口，否则 Form.TopMost 将起作用。无法创建未被另一个进程的新顶层窗口覆盖的窗口。

***“我如何创建一个永远不会被任何其他窗口覆盖的窗口，甚至不会被其他最顶层的窗口覆盖？”*** *想象一下安。如果这是可能的，想象一下如果两个程序做到了这一点。程序 A 创建了一个“超级顶层”窗口，程序 B 也是如此。现在用户拖动两个窗口，使它们重叠。怎么了？你给自己创造了一个逻辑上的不可能性。这两个窗口中的一个必须在另一个之上，这与想象中的“超级顶层”功能相矛盾。*

# jquery - 我怎样才能得到“this”下面的元素

> ID：11246813
> 
> 赞同：1
> 
> 时间：2012-06-28T14:25:10.023
> 
> 标签：jquery, dom-traversal

你如何到达下面的下一个节点`this`

例如

```
<ul id="secondary-nav">
    <li id="isOpen" class="expandable">
        <p>
            <ul style="display: none;">
    </li>
    <li id="isClosed" class="expandable expanded">
        <p>
            <ul style="display: none;">
    </li>
</ul> 
```

下面是运行代码：

```
$('#secondary-nav li').click(function() {
    var fstname = $(this).attr('class');
    alert(fstname);
    if (fstname == 'expandable') {
        if ($('#secondary-nav li').hasClass('expandable expanded')) {
            $('#secondary-nav li').removeClass('expanded');
            $('#secondary-nav li ul').css('display', 'none');
        }
    }
    $(this).addClass('expanded');
    //******************************//
    $(this).next('ul').css('')
});​ 
```

我将如何访问`<ul>`下面的元素`this`来`//*********//`更改该元素的样式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T14:26:01.083

使用`find`：

```
$(this).find('ul'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:58:28.150

```
$("ul", this) 
```

只要它还是个孩子，这应该可以解决问题。

# asp.net-mvc - 具有存储库的静态实用程序类的依赖性问题（.NET MVC 项目）

> ID：11246814
> 
> 赞同：0
> 
> 时间：2012-06-28T14:25:13.560
> 
> 标签：asp.net-mvc, testing, dependencies, static-methods

我有一个带有标准 IoC 设置的 MVC 项目，它使用 StructureMap 将存储库注入控制器构造函数。

我还决定我想要一个静态“实用程序”类，我可以在其中拥有可由不同控制器调用的通用方法。例如，我有：

```
public static IEnumerable<CountryCode> GetCountryList()
{
    ICountryCodeRepository repo = ObjectFactory.GetInstance<ICountryCodeRepository>();
    IEnumerable<CountryCode> countries = repo.GetAll();
    return countries;
} 
```

如您所见，这直接从 ObjectFactory 创建了一个 repo 对象。现在的问题是，当我想对控制器进行单元测试时，我可以模拟控制器的存储库，但不能模拟实用程序类中的存储库（控制器最终调用它）我确信还有其他原因我的实用程序类是错误的，但这是我目前看到的。我也读过一些[东西](https://stackoverflow.com/questions/888639/should-static-classes-be-avoided-because-it-makes-dependency-injection-difficult)说我的[设计很糟糕](https://stackoverflow.com/questions/205689/class-with-single-method-best-approach#206481)，我只是不知道如何解决它。

我正在考虑让 GetCountryList() 函数接受一个 repo 对象

```
GetCountryList(ICountryCodeRepository _repo) 
```

并且调用控制器会将其传入，但这不只是创建另一个依赖关系问题，因为所有控制器都必须知道实用程序函数需要什么？

或者是否有可能以某种方式使用 StructureMap 来注入这些实用程序方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:38:54.920

至少你知道你在做的是糟糕的设计是可以的。没关系，阅读这篇文章的人也会知道这一点，并避免和你犯同样的错误。

但现在，您可以在静态类中使用提供程序：

```
public static class Foo
{
    public static Func<ICountryCodeRepository> CountryRepoProvider = 
        () => ObjectFactory.GetInstance<ICountryCodeRepository>();

    public static IEnumerable<CountryCode> GetCountryList()
    {
        return CountryRepoProvider().GetAll();
    }
} 
```

现在在你的单元测试中你可以模拟它：

```
Foo.CountryRepoProvider = () => mocha; 
```

或者，如果您使用的是 ASP.NET MVC 3 并且您的 DI 框架使用[依赖解析器](http://bradwilson.typepad.com/blog/2010/10/service-location-pt5-idependencyresolver.html)，您可以通过至少使其与 DI 框架无关来改进此代码：

```
public static IEnumerable<CountryCode> GetCountryList()
{
    var repo = DependencyResolver.Current.GetService<ICountryCodeRepository>();
    return repo.GetAll();
} 
```

现在在您的单元测试中，您当然可以编写一个自定义依赖解析器，它将吐出您的服务的模拟实例。

现在，当您查看这段代码时，您可能真的会对自己说：*我在做什么*？*我正在编写一个静态类，其中一个班轮方法委托给我从 DI 获取的存储库。当我可以从我的 DI 框架中受益，在我需要的地方直接注入这个存储库的实例，然后简单地调用我需要的方法时，这有什么意义呢？我在那些单行静态方法中进行什么单元测试？我为什么要浪费时间*。

当然，如果您有更复杂的逻辑要处理，您只需编写一个服务层，它将必要的存储库作为构造函数依赖项并对其执行复杂的业务操作。然后，您将简单地配置您的 DI 框架，将那些准备好使用的服务实例注入您的控制器或您需要的任何地方。看？不需要任何静态类。弱耦合和单元测试友好的代码。

# vim - vim：为什么块模式选择变成正常的移动鼠标选择

> ID：11246817
> 
> 赞同：-5
> 
> 时间：2012-06-28T14:25:20.410
> 
> 标签：vim

观测到的：

首先，'ctrl+v'+selection 对我来说总是有效的。但这一次，我得到了正常的移动鼠标选择，而不是列选择。如：

![在此处输入图像描述](../Images/1dff74f2a4eb93c9e7e6111630a0d438.png)

为什么？

问题原因：正如**Peter van der Heijden**的评论所建议的那样，也许我错过了将“v”键入为“ctrl-v”。抱歉，我不能接受您的评论作为解决方案，因为我不能这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:11:09.470

您可能已经按下`v`而不是`CTRL+V`。即您在`CTRL`按下 之前松开了按钮`v`。

# c# - 如何将对象转换为传递给函数的类型？

> ID：11246820
> 
> 赞同：5
> 
> 时间：2012-06-28T14:25:48.667
> 
> 标签：c#, object, types, casting

这不会编译，但我想要做的只是将对象转换为传递给函数的“t”？

```
public void My_Func(Object input, Type t)
{
   (t)object ab = TypeDescriptor.GetConverter(t).ConvertFromString(input.ToString());
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T14:34:40.567

您可以执行以下操作：

```
object ab = Convert.Changetype(input, t); 
```

但是，您似乎想以`ab`强类型的方式使用，您只能通过使用泛型来做到这一点：

```
public void My_Func<T>(Object input)
{
   T ab = (T)Convert.ChangeType(input, typeof(T));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:36:36.060

```
public void My_Func(Object input, Type t)
{
    object test = new object();
    test = Convert.ChangeType(test, t);
    test = TypeDescriptor.GetConverter(t).ConvertFromString(input.ToString());
} 
```

# java - IndexOutOfBoundsException 在搜索

> ID：11246822
> 
> 赞同：0
> 
> 时间：2012-06-28T14:25:50.207
> 
> 标签：java

我有一个问题让我返回跟随错误

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 2, Size: 1
at java.util.ArrayList.RangeCheck(ArrayList.java:547)
at java.util.ArrayList.get(ArrayList.java:322)
at graphsshahar.TestDijkstra.main(TestDijkstra.java:38) 
```

我的程序得到一个对象列表，我需要在列表中找到等于一然后打印它，这是代码

```
 public static void main (String [] args){
    System.out.println("begin");

    int one = 2;
    int two = 10;
    List<Conniction> tempDeal = ConnictionDAO.getInstance().findPath(one, two);

    List<String> oneid = new ArrayList<String>();
    List<String> twoid = new ArrayList<String>();

    for (int j = 1; j <= tempDeal.size(); j++) {
     System.out.println("get");
        if( Integer.parseInt(tempDeal.get(j).getOneid()) == one ) 
        {
            oneid.add(tempDeal.get(j).getOneid());
            System.out.println(oneid.get(j));

        }

    }
    System.out.println("end"); 
```

我应该解决什么问题？我不知道 if 语句有什么问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T14:27:54.463

只需使用此`j < tempDeal.size()`编号更改您的编号从 0 开始而不是从 1。

```
for (int j = 0; j < tempDeal.size(); j++) { ... } 
```

如果您使用`j = 1`，您将无法在 0 位置获取项目。

**更新：** 您也可以像@AVD 一样使用迭代器。

```
for(Conniction member: tempDeal) {
   // do work
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T14:27:29.630

```
for (int j = 1; j < tempDeal.size(); j++) 
```

如果不是故意的，'j'应该从'0'开始

```
for (int j = 0; j < tempDeal.size(); j++) 
```

列表索引以“0”开头

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T14:35:05.217

如果*索引*无关紧要，那么您可以使用迭代器`for`循环。

```
for(Conniction obj: tempDeal){
    if(obj!=null) {
       if(Integer.parseInt(obj.getOneid())==one){
            oneid.add(obj.getOneid());
        }
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T14:30:03.733

改变这个：

```
for (int j = 0; j < tempDeal.size(); j++) { 
```

列出索引从 0 开始到 size() - 1 结束

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T14:43:37.930

你需要为`oneid`数组使用不同的计数器。如果 if 语句返回 false 一次，那么下次您在此处输入时，您将获得 IndexOutOfBounds。

```
int oneIdCount = 0; 
```

并在里面增加它`if`

```
if( Integer.parseInt(tempDeal.get(j).getOneid()) == one ) 
    {
        oneid.add(tempDeal.get(j).getOneid());
        System.out.println(oneid.get(oneIdCount));
        oneIdCount++;
    } 
```

并作为上述答案 - 从`int j=0`

如果你只想打印最后一个元素，你可以使用`oneid.size()-1`而不是变量。

# c# - 是否有直接使用 UTF-8 的 .NET StringBuilder？

> ID：11246832
> 
> 赞同：5
> 
> 时间：2012-06-28T14:26:29.063
> 
> 标签：c#, .net

我有一个性能敏感的场景，我想将 UTF-8 写入字节数组。

对 .NET StringBuilder 类的快速浏览让我相信它仅在本机构建 UTF-16。Encoding.UTF8.GetBytes(str) 意味着我不愿意花费额外的分配和额外的时钟周期。

有本地 UTF-8 作家吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:28:14.297

[MemoryStream](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)就像字节的StringBuilder；您可以通过重复向其附加字节序列来使用它来有效地创建字节序列。但它没有附加字符串的方法。为了避免首先将每个字符串转换为字节数组，您可以将流包装在负责转换的[StreamWriter中。](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)

# mysql - 一次将 3 次 2 列合并为一个命令

> ID：11246833
> 
> 赞同：2
> 
> 时间：2012-06-28T14:26:29.860
> 
> 标签：mysql, merge

我有一个小问题，我还没有找到解决方案。

语言：MySQL。

我有一个表格，其中一行包含 3 个不同人的姓名和姓氏，当然他们在 6 列中

例子 ：

```
Name1  |  Surname1  |  Name2  |  Surname2  |  Name3  |  Surname3  |
a      |  a         |  b      |  b         |  c      |  c         |
d      |  d         |  e      |  e         |  f      |  f         | 
```

等等...

现在我希望这些名称在选择中显示为全名，例如：

```
Name1         |  Name2          |  Name3         |
a,a           |  b,b            |  c,c           | 
```

我怎样才能做到这一点？我试过了：

```
SELECT (name1, surname1) as name1, (name2, surname2) as name2, (name3, surname3) as name3 from Table; 
```

而`+ ' ' +`不是逗号也是如此，我不确定如何解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:28:00.207

```
SELECT CONCAT(name1, ', ', surname1) as name1, CONCAT(name2, ', ', surname2) as name2, CONCAT(name3, ', ', surname3) as name3 from Table; 
```

# redirect - 对 SEO 有内部重定向链接不好吗？

> ID：11246834
> 
> 赞同：0
> 
> 时间：2012-06-28T14:26:35.127
> 
> 标签：redirect, seo, duplicate-content

我有大量具有相似但不相同内容的页面。示例：site.com/dream_dictionary_flying 和 site.com/dream_interpretation_flying。

问题在于，尽管它们并不相同，但它们有时处于重复内容的边缘。通过 htaccess 中的重定向 301 的解决方案很简单，可以在一分钟内完成，但是，将整个站点上的所有现有链接从“/something”更改为“/something_else”将需要很长时间，这将是数千次手动更改需要 x数百小时。

我的问题是这个；对 SEO 来说，有被重定向的内部链接是不是很糟糕，或者更确切地说，它有多糟糕？对于人类用户来说，这根本不重要，但根据我的经验，搜索引擎不喜欢它。这里有什么经验法则吗？请回来谈谈您对此的想法和经验。

* * *

感谢您的回答！但正如我上面提到的，我的经验是它可能会受到惩罚：当我错误地在 htaccess 中创建了一条规则，导致导航中的一个或多个链接被重定向时——来自搜索引擎的流量急剧下降（大约 - 10-15%）在几小时内。当我说它在导航中时，我的意思是它是整个网站上每个页面上的重定向。

如果上面的观察是正确的，这可能意味着两件事之一

1.  是的，当然，如果你那么鲁莽和愚蠢，整个网站都会受到惩罚！

2.  不，受到惩罚的不是整个站点——而是每个单独的页面都有一个被轻微惩罚的重定向。仅在仅 0.01% 的页面上进行重定向时，您不会注意到它，但当它出现在所有页面上时，它会变得很明显。

这是否正确，每个具有内部重定向链接的页面都会受到如此轻微的惩罚？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:31:35.550

这不是坏事，也不会伤害你。从技术上讲，少量的 PageRank 不会随重定向转移，但数量很小且无关紧要。您可以毫无顾虑地做到这一点。

另一种解决方案是使用[规范 URL](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)。它告诉谷歌这些页面本质上是相同的，并让他们知道将哪个页面视为“主”页面并将其包含在其搜索结果中。

# forms - html 表单：用于漂亮 url 查询的复选框组

> ID：11246835
> 
> 赞同：1
> 
> 时间：2012-06-28T14:26:36.587
> 
> 标签：forms, http, url, checkbox, query-string

我有以下搜索表单：
每个字段都是一个复选框，因此每个组都是多选的

```
<form action="search">

    <fieldset id="type">
        <legend>Offer type:</legend>
        <input type="checkbox" name="full" id="checkbox-01" /> <label for="checkbox-01">Full Time</label>
        <input type="checkbox" name="part" id="checkbox-02" /> <label for="checkbox-02">Part time</label>
        <input type="checkbox" name="internship" id="checkbox-03" /> <label for="checkbox-03">Internship</label>
        <input type="checkbox" name="other" id="checkbox-04" /> <label for="checkbox-04">Other</label>

    </fieldset>

    <fieldset id="jobs">
        <legend>Jobs:</legend>
        <input type="checkbox" name="plumber" id="checkbox-1" /> <label for="checkbox-1">Plumber</label>
        <input type="checkbox" name="baker" id="checkbox-2" /> <label for="checkbox-2">Baker</label>
        <input type="checkbox" name="tester" id="checkbox-3" /> <label for="checkbox-3">Tester</label>
        <input type="checkbox" name="engineer" id="checkbox-4" /> <label for="checkbox-4">Engineer</label>

    </fieldset>

    <input type="submit" value="Search" />
</form> 
```

但不是有

```
http://...../search?full=on&other=on&tester=on&engineer=on 
```

作为 url 查询字符串

我想拥有：

```
http://...../search?type=full+other&jobs=tester+engineer 
```

这对于解析服务器端更具可读性和有用性

当然，我不能为复选框设置相同的名称属性，有没有我可以做的技巧，或者唯一的解决方案是在按钮单击时执行 javascript？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:25:54.000

使用了以下技巧：

```
<input type="checkbox" name="cat[]" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:41:51.190

您可以使用 onSubmit() 方法解析表单属性，然后更改文档上的位置。

但是如果可以的话，考虑使用 post submit 类型来隐藏查询字符串而不是 get，如果这是一个美学问题。

# iphone - 必须更改语言后刷新导航返回按钮的标题

> ID：11246839
> 
> 赞同：2
> 
> 时间：2012-06-28T14:26:47.817
> 
> 标签：iphone, objective-c, ios, xcode, uinavigationitem

在我的应用程序中，用户可以按下打开模态视图控制器的工具栏上的参数按钮。他更改语言，保存并关闭此视图控制器。当他在以前的视图控制器中返回时，所有标签、图像视图等......都有变化（[这里怎么做，请参阅 Mauro Delrio](https://stackoverflow.com/questions/1669645/how-to-force-nslocalizedstring-to-use-a-specific-language/11246674#11246674)）答案但不是导航后退按钮标题。我开始相信无法更改此按钮的标题，因为它之前还在视图控制器中初始化。

有人回答这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:25:22.087

制作另一个后退按钮，然后将其分配给 UINavigationItem 的 backBarButtonItem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:28:30.010

`-(void) viewWillAppear:(BOOL)animated` 如果我没记错的话，您可以在关闭模态视图控制器时调用此方法中的标题。

# wpf - 向实体框架类添加属性

> ID：11246840
> 
> 赞同：0
> 
> 时间：2012-06-28T14:26:49.477
> 
> 标签：wpf, database, entity-framework

对于使用实体框架的 wpf 应用程序，我需要将实体属性添加到实体类之一。例如：有一个多对多关系，有两个表和一个连接表。

客户：ID、姓名、地址。产品：ID、名称

客户产品：客户 ID、产品 ID

我正在尝试将属性 colProducts 添加到我的自动生成的实体数据类 Cutomer 中，如下所示：

```
 public partial class Customer
{
    public Products  colProducts;
    public Products ColProducts
    {
        get { return colProducts; }
        set 
        {
            colProducts = ???? 
        }
    }

} 
```

但我发现关系缺失。这里有什么问题？？我怎样才能获得与客户相关的产品。我这样做是为了方便 wpf 数据绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:14:45.597

如果 CustomerID 和 ProductID 形成表 CustomerProduct 的复合主键，EF 应该生成正确的多对多关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:37:25.587

首先，如果它们存在于数据库中（外键或多对多表），实体将创建这些关联。如果您可以控制数据库，则应该这样做。它比手动实体方法更简单，并有助于数据库保持有效。

如果您不能或不想这样做，您可以手动创建实体关联。这些步骤[从这里采取](http://www.overroot.com/blog/2011/04/10/how-to-manually-add-association-in-entity-framework/)

1.  在 EF 设计器中选择两个实体中的任何一个，然后在右键菜单中选择“添加关联”选项。
2.  适当地指定每一边的多重性并创建关联
3.  选择关联并选择“表映射”选项
4.  现在选择包含外键列的表，即消息
5.  在列列表中，它将在旁边显示引用表的主键选择相应的外键，即我们的例子中的 ConversationId
6.  从引用实体中删除外键属性，即消息实体中的 ConversationId 属性

# codeigniter - codeigntier 中的默认控制器值/设置

> ID：11246841
> 
> 赞同：0
> 
> 时间：2012-06-28T14:26:55.047
> 
> 标签：codeigniter, controller, default

对于我的 codeigniter 应用程序，我的 routes.php 中有以下设置：

```
 $route['default_controller'] = 'Welcome'; 
```

在我的配置文件中，我有以下内容：

```
 $config['base_url'] = 'http://myserver/gpohelp/' 
```

当我尝试导航到

```
 http://myserver/gpohelp/

     http://myserver/gpohelp/index.php 
```

我收到 404 错误。

但如果我执行以下操作，页面会正确加载：

```
 http://myserver/gpohelp/index.php/Welcome 
```

你能告诉我我做错了什么吗？我确信这很简单，因为代码在我的开发环境中可以正常工作。我只是将应用程序移动到新服务器......它并不高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:51:45.360

我的猜测是，您的服务器可能未配置为`index.php`首先查找，它可能正在查找`index.html`404 中的哪个结果。

检查您的 Apache 日志以查看，它们应该会告诉您找不到 404 文件。因为如果你这样做`http://myserver/gpohelp/index.php/Welcome`并且它有效，那意味着它应该适用于：

```
http://myserver/gpohelp/index.php 
```

那么如果你在没有 的情况下尝试上述方法会发生什么`/Welcome`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:39:46.787

哟需要编辑 .htaccess 文件：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

如[用户指南中所述](http://codeigniter.com/user_guide/general/urls.html)

# java - 在 Android 中使用 ProGuard

> ID：11246842
> 
> 赞同：23
> 
> 时间：2012-06-28T14:26:55.850
> 
> 标签：java, android, eclipse, obfuscation, proguard

我在处理 ProGuard 和 Android 时遇到问题。

我在网上搜索了几个小时，发现了多种混淆 Android 应用程序的方法。现在我正在尝试一种看起来最简单的方法，所以：

> *   我在`config.cfg`项目的根目录中创建了一个文件
> *   我`proguard.config=config.cfg`在我的`project.properties`
> *   我使用 Eclipse 导出向导导出并签署 .apk 文件

我`Proguard returned with error code 1\. See console`在控制台中收到一条消息：

```
Proguard returned with error code 1\. See console
Note: there were 3847 duplicate class definitions.
Warning: com.fasterxml.jackson.databind.ext.DOMSerializer: can't find referenced class org.w3c.dom.bootstrap.DOMImplementationRegistry
Warning: com.fasterxml.jackson.databind.ext.DOMSerializer: can't find referenced class org.w3c.dom.bootstrap.DOMImplementationRegistry
Warning: com.fasterxml.jackson.databind.ext.DOMSerializer: can't find referenced class org.w3c.dom.bootstrap.DOMImplementationRegistry
Warning: com.fasterxml.jackson.databind.ext.DOMSerializer: can't find referenced class org.w3c.dom.bootstrap.DOMImplementationRegistry
      You should check if you need to specify additional program jars.
Warning: there were 4 unresolved references to classes or interfaces.
         You may need to specify additional library jars (using '-libraryjars').
Error: Please correct the above warnings first. 
```

即使我使用 Proguard 官方网站提供的配置或默认配置，我也会有错误。
这是我的自定义配置（myProject/config.cfg）：

```
-injars      bin/classes
-injars      libs
-libraryjars "C:\Program Files\Android\android-sdk\platforms\android-13\android.jar"

-dontskipnonpubliclibraryclasses
-optimizationpasses 5
-printmapping map.txt
-flattenpackagehierarchy
-dontpreverify
-repackageclasses ''
-allowaccessmodification
-optimizations !code/simplification/arithmetic
-keepattributes *Annotation*

-keep public class * extends android.app.Application
-keep public class * extends android.app.Activity
-keep public class * extends android.app.PreferenceActivity
-keep public class * extends android.view.View
-keep public class * extends android.widget.BaseAdapter
-keep public class * implements android.view.View.OnTouchListener

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.content.Context {
   public void *(android.view.View);
   public void *(android.view.MenuItem);
}

-keepclassmembers class * implements android.os.Parcelable {
    static android.os.Parcelable$Creator CREATOR;
}

-keepclassmembers class **.R$* {
    public static <fields>;
} 
```

我无法让它工作......任何想法将不胜感激！

**注意：**`libs`我使用存储在我的项目文件夹中的 Jackson JSON 库

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-28T17:18:29.173

1）[ProGuard手册>疑难解答>注意：程序/库类的重复定义](http://proguard.sourceforge.net/manual/troubleshooting.html#duplicateclass)

Android Ant/Eclipse 版本已经为您指定了 -injars/-libraryjars。如果您在配置中再次指定它们，ProGuard 会指出它们是重复的。所以不要指定-injars/-libraryjars。

2) [ProGuard 手册 > 故障排除 > 警告：找不到引用的类](http://proguard.sourceforge.net/manual/troubleshooting.html#unresolvedclass)

org.w3c.dom.bootstrap.DOMImplementationRegistry 不存在于输入代码中，但 com.fasterxml.jackson.databind.ext.DOMSerializer 正在使用它。如果您的应用程序仍然有效，您可以让 ProGuard 接受它：

```
-dontwarn org.w3c.dom.bootstrap.DOMImplementationRegistry 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T12:43:09.763

此处提供的 ProGuard 配置文件：

[https://groups.google.com/forum/#!msg/robospice/xGLRbGkLwQU/cAkaUQF34RsJ](https://groups.google.com/forum/#!msg/robospice/xGLRbGkLwQU/cAkaUQF34RsJ)

解决我的问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T17:08:07.747

我刚刚遇到了同样的问题，我通过引用 JRE rt.jar 文件解决了这个问题：

-libraryjars /lib/rt.jar

我希望它有帮助

# php - Ajaxplorer 文件权限问题

> ID：11246845
> 
> 赞同：1
> 
> 时间：2012-06-28T14:27:06.993
> 
> 标签：php, ajax, pydio

我已经在本地安装了 ajaxplorer。

当我将它上传到实时服务器时，我收到以下错误。我已经设置了数据文件夹 777 权限。

```
fopen(/kcfinder/upload/cache/plugins_requires.ser): failed to open stream: No such file or directory 
```

任何人都可以请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T06:18:22.710

最后我通过删除 2 个缓存文件解决了这个问题。如果有人遇到同样的问题，请检查以下 4 种情况：

1) 在 ajaxplorer/conf/bootstrap_context.php 调试 AJXP_DATA_PATH 值，检查它是否有效。

2) 将其上传到实时删除位于数据/缓存下的 plugins_cache.ser 和 plugins_requires.ser 文件。

3）对数据文件夹应用777递归权限。

4) 清除浏览器缓存并再次运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T16:48:01.247

很好的答案，但不仅如此！我已经尝试过同样的问题。它似乎发生在一个用户身上，而不是其他用户身上，即使在同一个存储库上也是如此。

在服务器端，转到 .../data/plugins/auth.serial/[username] 并删除 tmp_upload.ser 文件。

此外，Charles du Jeu 解释说，更新后，必须手动更新 conf 文件。在 conf 目录中，您将找到新文件。做必要的mv。

问候

# javascript - 如何让原生 WebSockets 在 Android 4.03 及更高版本中工作？

> ID：11246846
> 
> 赞同：2
> 
> 时间：2012-06-28T14:27:08.863
> 
> 标签：javascript, android, html, mobile, websocket

我一直在使用 web-socket-js 来支持跨设备的 websocket。在所有 IOS 设备上运行良好，因为它们具有本地 web-socket 支持，并且在安装了 flash 时在 android 设备中运行相当一致。现在，Android ICS 4.03 及更高版本声称支持原生网络套接字。Window.WebSocket 已定义，但我没有打开套接字。有谁知道为什么？ICS 原生 websocket 有什么问题？他们使用什么协议？有没有人提出更好的解决方案？

=更新=

有一种 hacky 方法可以确定 websocket 是否真的有效，然后回退到 flash。为此，您必须更改 web-socket-js 代码以检查它是否是 android 客户端。然后，在使用 web-socket 之前，尝试连接到本地机器上的一个端口。然后检查 websocket 的协议属性。如果已定义，那么您最好使用本机，否则回退到 Flash。仍在寻找更好的方法，但这是我现在使用的 hack：

例如：

```
 var isAndroid = navigator.userAgent.match(/Android/i) != null;
   var isChrome = navigator.userAgent.match(/Chrome/i) != null;

   // assume if its safari, that they use normal websockets.
   if ( isChrome || (!isAndroid && window.WebSocket)) {
          logger.log("Will attempt to use Websockets natively. 1");
          return;
   }

   // check if we need a websocket fallback
   //if (window.WebSocket && !window.WEB_SOCKET_FORCE_FLASH) {
   if ( isAndroid ) {
          try {
                 var testSock = new window.WebSocket("ws://localhost:1474");
                 if (testSock.protocol != undefined) {
                       testSock.close();
                       logger.log("Will attempt to use Websockets natively. 2");
                       return;
                 } else {
                       // use flash
                 }
          } catch (e) {
                 // if there was an error we need to use the flash fallback.
          }
   }

   logger.log("Native Websockets unavailable, trying Flash fallback..."); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T14:31:47.987

因此，事实证明，我的问题中提到的黑客实际上并不总是有效。一些 4.0.3 的 android 设备似乎支持本机 web-sockets，而其他设备不支持。我正在尝试确定这种差异是否存在于 4.0.3 附带的设备和升级的设备之间。我现在先检查是否支持 Flash 播放器，如果支持则使用它。如果没有，那么我检查android版本。如果它大于 4.0，我建议用户尝试在 chrome 中加载网站。否则，如果定义了 window.WebSocket，我会尝试使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T09:48:16.823

Chrome for Android 支持 WS (RFC6455) - 它在 ICS 及更高版本上可用，但不是标准浏览器。

至少 ARMv7 的 Android 设备上的 Firefox Mobile 支持 WS (RFC6455)。

大多数 Android 设备上的 Opera Mobile 都支持 WS (Hixie76)。

推动谷歌：

*   使 Chrome for Android 在子 ICS 设备上可用
*   将 Android 版 Chrome 设为默认浏览器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T12:05:28.050

伙计们，不要忘记在模拟设备时，避免在 android 项目的 config.xml 中定义“localhost”来访问本地运行的 WS-Server。使用转换为 127.0.0.1 的定义的 10.0.2.2 地址（并​​确保您的 WS-Server 响应它）。[http://developer.android.com/tools/devices/emulator.html#emulatornetworking](http://developer.android.com/tools/devices/emulator.html#emulatornetworking)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T20:32:25.883

通过 4.X 的 Android 版本仅通过像[web-socket-js](https://github.com/gimite/web-socket-js)这样的 Flash 模拟器支持 WebSockets希望 4.1 (ICS) 将引入本机 WebSocket 支持。

也许**window.WebSocket**正在定义，因为您正在加载模拟器？

# excel - Excel 2003：最大长度下拉列表

> ID：11246849
> 
> 赞同：0
> 
> 时间：2012-06-28T14:27:19.430
> 
> 标签：excel

我有一个简单的问题，但在互联网上搜索并没有帮助我（也许我的大脑没有按应有的方式工作......：S）。我在 Excel 2003 中有一个下拉列表，我通过 VBA 脚本填写。现在我得到错误，当列表的大小很大时。知道列表中的字符数是有限制的。

起初我在 Excel 2007 中工作时没有出现错误。但我需要更改为 2003。在进一步定义功能解决方案之前，我想知道限制是什么，**最大字符数**，**Excel 2003**中的**下拉列表**？

 **注意：如果找到[这个](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx)MS 网站，但我没有看到我在寻找什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:47:28.890

对于 excel 2003，我可以找到每个[Microsoft](https://office.microsoft.com/en-us/excel-help/create-or-remove-a-drop-down-list-HP005202215.aspx)的限制：下拉列表中的最大条目数是 32,767。
每个项目似乎也有 256 个字符的限制。**

# .htaccess - www 子域是好的做法吗？

> ID：11246853
> 
> 赞同：6
> 
> 时间：2012-06-28T14:27:41.637
> 
> 标签：.htaccess, no-www

我知道将您的网站完全保留为“http://www”或 http:// 是一种很好的做法，而且我也知道 www 只是一个子域。

我的主要问题是**其中哪一个是最佳选择**？我现在正在为我的一台服务器配置 htaccess，并且无法决定将所有流量重定向到 www 子域。（顺便说一句，我知道该怎么做。）

这只是一个最佳实践问题。我看到像谷歌和亚马逊这样的大公司都转发到 www 子域，但对我来说这听起来没有必要——我不想错过任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T14:35:18.617

有趣的是，我去年花了太多时间为我的一个公司网站研究这个。我得出的结论是，只要您将一个重定向到另一个（用户可以在任一版本中找到您）都没有关系。在过去的 10 年里，我一直使用 www 子域。从去年开始，我所有的新项目都没有它，因为它是不必要的——也可以保存 4 个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T05:26:31.790

My vote clearly goes for No WWW. Besides the fact that those four bytes (www.) are passed back and forth with each request/answer (every byte counts, right?). My clients are happy with this!

When one asks about printing on their business card or letterhead: "Will people know it is an Internet address, if it does not start with www?" I tell them to go ahead and print the www, just leave off the first dot!

On Printed Paper, I have seen my clients write all of these. However, most clients now prefer the first format to imitate CNN.COM:

1.  www example.com
2.  www: example.com
3.  web: example.com
4.  Internet: example.com

Then if people use the dot, or not, it ends up at the right address (without all those extra bytes!)

Clearly, more people are following CNN.COM and moving away from www for most sites.

The easy solution I use from [No WWW, Better SEO](http://alantait.net/2012/07/21/no-www-better-seo/ "No WWW, Better SEO") is to start each .htaccess with the following:

```
RewriteEngine On
RewriteBase /

# FROM www. --TO-- NO www.
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

This is just a cut and paste no-brainer. It is the first thing on each .htaccess I have on hundreds of sites and domains.

**EDIT 2014/04/22**

**Reason to use a Subdomain: Cookies**

There is one consideration for using a subdomain (like www, but not always www) and that is cookies.

If you assign a cookie for a domain it may be available to all subdomains (at least if not done very carefully!).

For example:

*   example.com cookies would be available for
*   philippines.example.com

Whereas:

*   www.example.com cookies or
*   earth.example.com would *not* be available for
*   philippines.example.com

A better plan would be to have everything on a logical subdomain and direct the bare domain to one of them...

For example:

*   earth.example.com
*   canada.example.com
*   philippines.example.com
*   usa.example.com

You would remove all www. from domains like www.usa.example.com and redirect *example.com* to earth.example.com (or web.example.com, or main.example.com or w.example.com!).

This way each subdomain could share the *cookies of example.com* and could have there own cookies too!

Of course, most websites do not use multiple subdomains, and therefore have no conflicts with cookies, and no reason at all to use the www.

**EDIT 2017/12/12 - Static Content**

**Reason to *NOT* use a Subdomain: Static Content**

One thing I didn't mention was Cookieless Static Content. Like many big sites, I use a separate domain for this.

Cookied Website Domain

*   example-1.com

Cookieless Static Content.

*   static-example.com -

If you have many sites, you can set up one for Static Content.

Cookied Sites:

1.  plant-only.org
2.  vekind.org
3.  fyuel.org
4.  tait.asia

Domain for Cookieless Static Content.

*   my-static-content.info
    1.  plant-only.my-static-content.info - for plant-only.org
    2.  vekind.my-static-content.info - for vekind.org
    3.  fyuel.my-static-content.info - for fyuel.org
    4.  tait.my-static-content.info - for tait.asia

**Reason to *NOT* use a Subdomain: Green Website**

Another reason to NOT use the www. is the "green" reason or the carbon footprint. With all things being equal... - www.example.com has a bigger carbon footprint than - w.example.com which is still bigger than - example.com

If one cares about their carbon footprint, or if a website claims to be "green", then they should not employ the "www." in their website address as these four characters would add to their carbon footprint in transmitting their domain name (howbeit a very small amount!).

Let a website prove they are really green by getting rid of the "www." in their domain!

**Reason to *NOT* use a Subdomain: Psychological**

Another reason to *NOT* use the "www." is the "psychological" aspects of writing code. Most programmers think in terms of the bare website. For example, I am working on SEO for a website called AngBarato.Com (it means "the cheap dot com" in Filipino. and is a buy and sell site). About half the links are to www.angbarato.com pages, and a half to angbarato.com pages. It was the coder's intention to use "www.", yet half the time he wrote the domain without the "www."

I convinced him these errors were very hard to find and deal with. For example, using the text editor Geany, we did a search for angbarato.com. Of course, all links appeared (some with and some without the "www."). On the other hand, doing a replace "www." for "" fixed all the links (and SEO) immediately!

Looking for "www.", and removing it, is a lot easier to debug than to look for where "www." ***does not exist***, and quickly adding "www." to each missing link! Even worse if there are subdomains like www.usa.angbarato.com.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:36:33.207

除非您打算将您的网站放在证书后面，否则我建议您让两个主机都可以访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T16:07:49.997

底线；这并不重要，只要两者仍然可以访问。

我倾向于删除www。大多数时候，因为从技术上讲它不再需要。

但是，对于较短的域名，请添加 www。有时使它在视觉上看起来更好。有点像室内设计，你需要有奇数个项目。eg`www.xyzjk.com`看起来很对称，有3对字符（奇数）。我想这就是谷歌使用`www.google.com`而不是`google.com`.

另一件事是，在某些 CMS 或论坛中，url 必须以其中之一开头`http://`或`www.`转换为可点击的超链接。因此，为了可能获得一些额外的传入链接，您可能更喜欢 www。

# .net - 我应该如何处理 app.config 中缺少的字段？

> ID：11246855
> 
> 赞同：2
> 
> 时间：2012-06-28T14:27:52.190
> 
> 标签：.net, app-config

在读取我们的配置和资源文件时，我们的 .Net 系统当前只是执行`ConfigurationManager.AppSettings["keyToFind"]`或类似操作，并且假设它找到了它正在寻找的内容，并且愉快地继续前进。当我们添加新配置时，我们需要记住手动将其添加到配置文件中，如果（何时！）我们忘记了，运行时问题并不总是很容易追踪。

所以我想添加一个小类作为读取我们的 app.config 和 .resx 文件的单一网关。我的第一次尝试只是做同样的事情，然后检查空值并抛出异常，记录错误或在适当的情况下设置默认值，如果找不到的话。它工作正常，但我想知道我是否在重新发明轮子。另外，据我所知，我不能让 app.config 只能通过这个类使用，对吗？所以未来的开发者可以随意忽略我的解决方案！

是否有更好的（即内置或公认的标准）处理配置文件中缺失字段的方法？我也在考虑使用 T4 模板化配置文件以保持一致性，但我也想要运行时检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:02:16.230

我认为这肯定已经被许多其他人（[包括我](https://bitbucket.org/pabdulin/gorgon/src/576c90c142c6/Gorgon.Configuration/AppConfigUtility.cs)）的工作完成了，但这并没有那么麻烦。只需按照您的情况进行操作即可，然后忘记。

# arrays - VBA UDF Variant/Integer 和 Variant/String Arrays 仅打印第一个值以输出单元格

> ID：11246857
> 
> 赞同：0
> 
> 时间：2012-06-28T14:27:58.033
> 
> 标签：arrays, excel, vba, range, variant

以下效果很好（感谢这个社区的慷慨帮助！）

```
 Function RangeToArrayToRange(inputRange as Range) As Variant
            Dim inputArray As Variant
            inputArray = inputRange
            RangeToArrayToRange = inputArray
    End Function 
```

此功能将完美地将输入范围复制到输出。但是，当我对 inputArray 进行一些操作时，数组看起来很完美，但在 Excel 中，只有数组的第一个值会打印到所有单元格。在这个例子中，我从一些输入字符串中解析出一个数字。

输入范围：

```
ABC=1X:2Y 
ABCD=10X:20Y
ABCDE=100X:200Y 
```

代码：

```
 Function RangeToArrayToRange(inputRange As Range) As Variant

        Dim inputHeight As Integer
        inputHeight = inputRange.Count

        Dim inputArray As Variant
        inputArray = inputRange

        Dim strippedArray() As Variant
        ReDim strippedArray(1 To inputHeight)

        Dim currentInput As String
        Dim currentInputAsInt As Integer
        Dim i As Integer

        For i = 1 To inputHeight

            currentInput = inputArray(i, 1)
            currentInput = Right(currentInput, (Len(currentInput) - Application.WorksheetFunction.Find("=", currentInput))) 
            'splits out everything left of the "="
            currentInput = Right(currentInput, (Len(currentInput) - Application.WorksheetFunction.Find(":", currentInput)))
            'splits out everything to the right of the ":"
            currentInput = Left(currentInput, Len(currentInput) - 1) 
            'split out the letter to allow int casting
            currentInputAsInt = CInt(currentInput)
            'cast to int
            strippedArray(i) = currentInputAsInt
            'saved

        Next i

        RangeToArrayToRange = strippedArray
    End Function 
```

预期输出：

```
1
10
100 
```

实际输出：

```
1
1
1 
```

通过调试器运行，strippedArray 分别在 strippedArray(1)/(2)/(3) 位置包含 Variant/Integer 值 1,10,100。问题是，据我所知，我在 Excel 中输入的数组范围仅包含 strippedArray(1)。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:46:44.437

如果您要输出回 Excel 工作表/范围，则您`strippedArray`的数组需要是二维的（我假设您将其作为数组公式运行）。进行以下更改：

```
ReDim strippedArray(1 To inputHeight, 1 To 1)
...
strippedArray(i, 1) = currentInputAsInt 
```

# c# - 无法加载文件或程序集“System.Web.WebPages”

> ID：11246861
> 
> 赞同：36
> 
> 时间：2012-06-28T14:28:03.063
> 
> 标签：c#, asp.net-mvc-3

我以前遇到过这个问题，但是我需要做的就是清理和重建项目。现在这似乎不再起作用了。当我启动我的 Asp.Net MVC3 项目调试器时，该站点在我的浏览器中打开。我没有在浏览器中显示第一页，而是收到此错误：

```
Parser Error Message: Could not load file or assembly 'System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.

Source Error: 
Line 31:         <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
Line 32:         <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
Line 33:         <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
Line 34:       </assemblies>
Line 35:     </compilation> 
```

我似乎无法弄清楚如何解决这个问题。任何想法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-01-05T18:57:22.460

我的解决方案是转到我的服务器并在服务器上安装 Web Pages Version 2。

转到[http://www.microsoft.com/en-us/download/details.aspx?id=34600](http://www.microsoft.com/en-us/download/details.aspx?id=34600)

并下载软件包并运行它。

就这么简单。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-28T01:20:17.290

我有这个问题。也许它发生在我在 MVC v3 之上安装 .NET MVC v4 时，不确定。

无论如何，我`System.Web.WebPages`从我的项目中删除了引用。然后在 Add Reference 对话框 .NET 选项卡中列出了两个 System.Web.WebPages 引用，一个版本 1.0.0.0 和一个 2.0.0.0。我确保添加 1.0.0.0 版本，因为那是缺少的版本。

![在此处输入图像描述](../Images/e6dfadef9fc98efd7274091a71bc6b02.png)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-10-19T10:44:21.397

为我工作：

1.  工具 -> NuGet 包管理器 -> 管理解决方案的 NuGet 包

2.  浏览

3.  搜索“Microsoft.AspNet.WebPages”

4.  确保解决方案中的所有项目都具有最新版本。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-10T10:58:37.470

当我遇到这个问题时，我挠了挠头。最终，我注意到我的 web.config 的“运行时”部分中有以下部分。

```
<runtime>
 . . .
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
. . .
</runtime> 
```

如您所见，这指的是程序集的版本 2，它与您在 web.config 的 system.web/compilation/assemblies 部分中的以下代码不匹配。

```
<add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

该项目的参考资料中引用的实际程序集确实是 v1.0.0.0，因此我将上面的第一段代码更改为以下代码，从而立即解决了问题。我不确定这个错误最初是如何出现的。

```
<runtime>
 . . .
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-1.0.0.0" newVersion="1.0.0.0" />
      </dependentAssembly>
. . .
</runtime> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-03-21T06:52:07.263

转到菜单：“工具/Nuget 包管理器/包管理器控制台”

运行命令`install-package Microsoft.AspNet.WebPages`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-18T09:46:30.740

我遇到了这个问题，我所要做的就是更改外部引用的属性：从**True**到**False的特定版本**

之后，项目再次构建。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-30T11:01:53.840

我为 MVC5 获取了同样的问题。

首先从项目的参考中检查您的**System.Web.WebPages程序集。**

1.  如果未找到，则通过从项目参考中选择**添加参考来添加。**
2.  如果找到，则该引用的**属性**中的任何检查版本。然后检查您的项目**web.config**文件。可能是这两个版本不匹配。

对我来说，我添加了 2.0.0.0 版本的参考。但我的 web.config 文件从

`<bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" />`

我把它改成

`<bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />`

它在 MVC5 中对我有用。

请检查我附件中突出显示的部分以获得更多许可。

[![System.Web.WebPages](../Images/336d759d19d10b52a53294023400f982.png)](https://i.stack.imgur.com/4MBCR.png)

# php - 在下载时保留 xattr

> ID：11246862
> 
> 赞同：1
> 
> 时间：2012-06-28T14:28:05.820
> 
> 标签：php, linux

我正在尝试在网站上使用 xattr 将一些元数据存储在 .txt 文件中，然后下载它。如果我在本地运行网站时在临时文件上使用 PHP 的 xattr_set，PHP 中的 xattr_list 和命令行中的 python-xattr 都会向我显示我设置的属性。但是，当我使用 readfile 下载文件时，属性不再显示。有没有办法在下载时保留这些属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:33:21.040

不是直接的。HTTP 无法指定文件系统扩展属性，因此您需要将它们打包为适当的存档格式，以便在元数据中指定它们，例如 GNU tar 和`--xattrs`.

# c# - 我如何定位元素取决于它的值？

> ID：11246871
> 
> 赞同：0
> 
> 时间：2012-06-28T14:28:38.753
> 
> 标签：c#, selenium, webdriver, specflow

我有一些表：

```
 Title 1        | Title 2        | Title 3        |
    --------------------------------------------------
    string value 1 | string value 2 | string value 3 |
    --------------------------------------------------
    string value 4 | string value 5 | string value 6 | 
```

和一些步骤：
“然后单击它的 <name>”，其中 <name> 可以是第一列中的任何内容。

那么，我怎样才能找到需要的元素并点击它呢？

表代码

```
<div id="grid" class="k-grid k-widget" data-role="grid" tabindex="0" style="">
<div class="k-grid-header" style="padding-right: 17px;">
<div class="k-grid-header-wrap">
<table cellspacing="0">
<colgroup>
<col style="width: 30px;">
<col style="width: 300px;">
<col>
<col style="width: 200px;">
</colgroup>
<thead>
<tr>
<th class="k-header" data-title="ID" data-field="id">ID</th>
<th class="k-header" data-title="Наименование" data-field="name" data-role="sortable" data-dir="asc">
<a class="k-link" href="#"> 
```

第二部分

```
Наименование
<span class="k-icon k-arrow-up"></span>
</a>
</th>
<th class="k-header" data-title="Описание" data-field="description">Описание</th>
<th class="k-header" data-field="undefined" data-role="sortable">
</tr>
</thead>
</table>
</div>
</div> 
```

第三部分

```
 <div class="k-grid-content">
<table class="k-focusable k-selectable" cellspacing="0" data-role="selectable">
<colgroup>
<col style="width: 30px;">
<col style="width: 300px;">
<col>
<col style="width: 200px;">
</colgroup>
<tbody>
<tr data-uid="72c59bdf-8622-43c6-91bf-7a2a05ca59b1">
<td>5</td>
<td>1</td>
<td>1</td>
<td>
</tr> 
```

第四部分

```
<tr class="k-alt" data-uid="f8d1ef8c-07b0-4e79-9c42-4c6db2d943d0">
<td>6</td>
<td>1</td>
<td>1</td>
<td>
</tr>
<tr data-uid="241a4a4b-7147-46fe-ad55-f865de4a8285">
<td>8</td>
<td>789</td>
<td>987</td>
<td>
</tr>
<tr class="k-alt" data-uid="73bf8ea7-c4f0-49f9-8e8b-41d88b13212d">
<td>7</td>
<td>test</td>
<td>test</td>
<td>
</tr> 
```

第 5 名

```
<tr data-uid="63db0ec1-5a5a-40be-9fa0-b467ff2b43d3">
<td>4</td>
<td>Второй процесс</td>
<td>null</td>
<td>
</tr>
<tr class="k-alt" data-uid="68fe2d62-5ccb-472b-b7b9-8ee95159deff">
<td>1</td>
<td>Заявление1</td>
<td>управление заявлениями</td>
<td>
</tr>
</tbody>
</table>
</div> 
```

6日

```
<div class="k-pager-wrap k-grid-pager" data-role="pager">
<ul class="k-pager k-reset k-numeric">
<li>
<span class="k-state-active">1</span>
</li>
</ul>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:00:01.300

我部分理解了你想要做什么。您想根据文本值单击页面上的元素。为此，您必须在页面上找到带有您要单击的文本的元素。例如-如果您想单击带有 text = "Mike" 的元素，请使用以下代码-

```
WebElement ele = driver.FindElement(By.Name("Mike")); 
```

现在您将获得一个带有文本“Mike”的 WebElement 以单击。

所以现在——`ele.click();`

我要提到的另一件事是您的 HTML 代码格式不正确（即没有正确的开始和结束标记）。使用 selenium 时，拥有格式良好的 HTML 将使与网页上的元素交互更容易。

# jquery - 如何在 ipad 应用程序中添加滚动

> ID：11246878
> 
> 赞同：-1
> 
> 时间：2012-06-28T14:28:58.353
> 
> 标签：jquery, ipad, iscroll4

我在我的应用程序中使用 IScroll4 在 ipad 的特定 div 中添加滚动，但我无法添加我使用的滚动

```
function loaded(){

    scroll = new iScroll('wrapper');
      }
     document.addEventListener('load', loaded, false); 
```

以上是我的 div 结构

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:08:08.313

您定义的功能不是您的`div`结构。它是`iscroll`用 id 为定义的 div进行初始化`wrapper`。您可以显示您`html`的 div 结构。此外，您必须`var scroll;`在编写之前定义`scroll = ...;`. 此外，如果您只有文本并且所有图像都有固定尺寸（即：明确的宽度/高度），您可以使用该`DOMContentLoaded`事件。一般来说`iscroll4`，在 ipad 中没有工作问题。可能是你有你错过了什么。检查来自[http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)的文档，如果您发现问题，请指定您正在尝试做什么以及卡在哪里。你的问题没有解释太多。

# sockets - accept() 和 TCP 数据包传递的行为

> ID：11246879
> 
> 赞同：3
> 
> 时间：2012-06-28T14:29:10.003
> 
> 标签：sockets, tcp, port

Java 文档说，`ServerSocket`监听`x`端口的 , 会从它的方法`5555`返回一个新的`Socket`, ，这样：`y``accept()`

1.  的本地端口`y`设置为`5555`；和

2.  `x`继续在端口上侦听`5555`新`accept()`连接。

我已经验证了上述情况确实如此。

然而，这个关于[港口](http://en.wikipedia.org/wiki/Port_%28computer_networking%29)的维基百科条目有这样的说法：

> 此过程称为*侦听*，涉及在知名端口上接收请求并在**另一个私有端口上****重新建立**一对一的服务器-客户端通信，以便其他客户端也可以联系知名服务端口。

 **对我来说，上面的维基百科摘录往往更有意义......因为根据我对 TCP/IP 的阅读和理解，

1.  目标 IP 地址有助于将数据包传递到正确的主机；和

2.  目标端口有助于将数据包传递到目标主机上的正确进程

因此，鉴于`accept()`Java 中的文档和行为，我想知道如果多线程客户端尝试与多线程服务器通信（通过打开两个通信通道，每个线程中一个），如何实现数据包传递？在这种情况下，当所有数据包都设置了相同的目标 IP 地址和端口值时，Java（或底层 TCP/IP 堆栈）如何知道哪个数据包属于哪个通道？

**编辑**：请参阅 EJP 的回复以及 Nikolai 在下面的评论。据他们说，上述维基百科的说法是错误的。EJP 继续并修复了维基百科条目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:41:30.787

监听套接字是特殊的。内核只向它传递属于[三向握手](http://en.wikipedia.org/wiki/Three_way_handshake#Connection_establishment)的 TCP 段，这些段在标头中有明确的标志。完成后，您将*建立*一个由完整元组标识的 TCP 连接`(src addr, src port, dst addr, dst port)`。

因此，网络堆栈内部在侦听和连接到同一本地端口的套接字之间没有歧义。

[研究TCP 状态图](http://en.wikipedia.org/wiki/File%3aTcp_state_diagram_fixed.svg)也可能有助于更好地了解所有这些是如何结合在一起的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T21:56:10.720

维基百科的文章是错误的。*错*了：我修好了。现在再看看。接受的连接使用与侦听端口相同的本地端口号。**

# ios - Twitter 未授权我的 iOS 应用

> ID：11246880
> 
> 赞同：0
> 
> 时间：2012-06-28T14:29:11.997
> 
> 标签：ios, twitter, twitter-oauth

我刚刚在 Twitter 开发者网站上注册了我的应用程序，并获得了我的 OAuth 消费者密钥、密钥和所有凭据。我正在使用 MGTwitterEngine 和 SAOAuthTwitterEngine 进行开发。当我单击 Twitter 共享时，我可以登录但无法授权我的应用程序 - 它只是关闭了`UIViewController`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:29:37.377

这不是直接回答您的问题，但您可能需要考虑使用内置的 iOS5 Twitter 框架。它使 Twitter 集成变得非常简单。

唯一需要注意的是，如果您需要代表用户访问服务器上的 Twitter API，那么您需要 ReverseAuth，您必须通过联系 Twitter 并请求 ReverseAuth 访问来批准您使用它。

# jquery - 在 Twitter Bootstrap 嵌套选项卡中重置活动子项

> ID：11246882
> 
> 赞同：2
> 
> 时间：2012-06-28T14:29:19.443
> 
> 标签：jquery, tabs, twitter-bootstrap, jquery-tabs

该项目需要 3 个父选项卡 (P)，每个包含一组 3 个子选项卡 (c)。

问题：当用户在 P1c3 退出时，导航到另一个父集，然后返回 P1，c3 仍然处于活动状态。有谁知道打开 P1 时如何将默认活动子级重置为 c1 ？

基本结构，没什么特别的。

```
<div class="tabbable">
  <ul class="nav nav-tabs">
    <li><a href="#P1" data-toggle="tab">P1</a></li>
    <li><a href="#P2" data-toggle="tab">P2</a></li>
    <li><a href="#P3" data-toggle="tab">P3</a></li>
  </ul>

<div class="tab-content tab-container">

  <div class="tab-pane" id="P1">
      <div class="tabbable tabs-left"> 
          <ul class="nav nav-tabs">
              <li class="active"><a href="#c1" data-toggle="tab">c1</a></li>
              <li><a href="#c2" data-toggle="tab">c2</a></li>
              <li><a href="#c3" data-toggle="tab">c3</a></li>
          </ul>
          <div class="tab-content tab-info">
              <div class="tab-pane active" id="c1">
                P1 child 1                                       
              </div>
              <div class="tab-pane" id="c2">
                P1 child 2
              </div>
              <div class="tab-pane" id="c3">
                P1 child 3
              </div>
          </div>
      </div>
  </div>

etc... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:25:34.737

当您单击父项时，在第一个子选项卡上调用 $.trigger 以将其重置回第一个选项卡。非常粗糙，但希望你能有所了解。

```
<ul class="nav parent nav-tabs">
   <li><a href="#P1" data-toggle="tab">P1</a></li>
   <li><a href="#P2" data-toggle="tab">P2</a></li>
   <li><a href="#P3" data-toggle="tab">P3</a></li>
</ul>

<ul class="nav child nav-tabs">
   <li class="active"><a href="#c1" data-toggle="tab">c1</a></li>
   <li><a href="#c2" data-toggle="tab">c2</a></li>
   <li><a href="#c3" data-toggle="tab">c3</a></li>
</ul> 
```

$(".parent li a").on("click", function () { $(".child li a").first().trigger("click"); });

# mysql - 如果 table1 的值为 X，SQL 更新 table2？

> ID：11246885
> 
> 赞同：3
> 
> 时间：2012-06-28T14:29:29.677
> 
> 标签：mysql, sql, phpmyadmin

```
IF EXISTS (SELECT * FROM table1 WHERE group_id='8')
UPDATE table2 SET (...) 
WHERE usertype='numbereight' 
```

我究竟做错了什么？我需要根据 group_id 更新用户类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:31:39.530

试试这个：

```
UPDATE table2 
SET someColumn = 'somevalue'
WHERE EXISTS(SELECT * FROM table1 WHERE group_id='8')
AND usertype='numbereight' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:36:21.000

你可以尝试这样的事情：

```
UPDATE table2
SET (...) 
WHERE usertype='number eight' AND EXIST(SELECT * FROM table1 WHERE group_id='8'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:37:22.987

尝试

```
UPDATE table2 
SET (...) 
WHERE usertype = 'numbereight'
AND exists (select * from table1 where group_id = '8') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T14:49:05.963

您可以加入表格并更新您需要的任何字段

```
UPDATE t1 JOIN t2 ON t1.id = t2.id
SET
  t2.field = 'whatever'
WHERE
  t1.group_id= '8' AND
  t2.usertype = 'numbereight' 
```

# python - Python正则表达式解析文本文件，获取列表中的项目并计算列表

> ID：11246888
> 
> 赞同：0
> 
> 时间：2012-06-28T14:29:45.537
> 
> 标签：python, python-3.x, python-2.7

我有一个包含一些数据的文本文件。

我对查找 v_dims 中的项目数特别感兴趣

我的文本文件中的 v_dims 模式如下所示：

```
v_dims={
"Sales",
"Product Family",
"Sales Organization",
"Region",
"Sales Area",
"Sales office",
"Sales Division",
"Sales Person",
"Sales Channel",
"Sales Order Type",
"Sales Number",
"Sales Person",
"Sales Quantity",
"Sales Amount"
} 
```

所以我正在考虑获取**v_dims**中的所有元素并将它们转储到 Python 列表中。然后计算 len(mylist) 以获得项目的计数。

挑战在于从我的文本文件中获取**v_dims**的所有元素并将它们放入一个空列表中。

我对文本文件中**v_dims**中的项目特别感兴趣。文本文件具有我在原始帖子中显示的 v_dims 模式形式的数据。一些数据具有嵌套的 v_dims 模式。谢谢。

这是我尝试过但失败的方法。任何帮助表示赞赏。TIA。

```
import re

fname = "C:\Users\XXXX\Test.mrk"
with open(fname, "r") as fo: 
    content_as_string = fo.read()
    match = re.findall(r'v_dims={\"(.+?)\"}',content_as_string) 
```

虽然我有一个大文本文件，但这是我的文本文件结构的片段

```
version "1";
// Computer generated object language file
object 'MRKR' "Main" {
    Data_Type=2,
    HeaderBlock={
    Version_String="6.3 (25)"
},
    Printer_Info={
    Orientation=0,
    Page_Width=8.50000000,
    Page_Height=11.00000000,
    Page_Header="",
    Page_Footer="",
    Margin_type=0,
    Top_Margin=0.50000000,
    Left_Margin=0.50000000,
    Bottom_Margin=0.50000000,
    Right_Margin=0.50000000
},
    Marker_Options={
    Close_All="TRUE",
    Hide_Console="FALSE",
    Console_Left="FALSE",
    Console_Width=217,
    Main_Style="Maximized",
    MDI_Rect={
    0,
    0,
    892,
    1063
    }
},
    Dives={
    {
    Dive="A",
    Windows={
    {
    View_Index=0,
    Window_Info={
    Window_Rect={
    0,
    -288,
    400,
    1008
    },
    Window_Style="Maximized Front",
    Window_Name="Theater [Previous Qtr Diveplan-Dive A]"
},
    Dependent_bool="FALSE",
    Colset={
    Dive_Type="Normal",
    Dimension_Name="Theater",
    Action_List={
    Actions={
    {
    Action_Type="Select",
    select_type=5
},
    {
    Action_Type="Select",
    select_type=0,
    Key_Names={
    "Theater"
    },
    Key_Indexes={
    {
    "AMERICAS"
    }
    }
},
    {
    Action_Type="Focus",
    Focus_Rows="True"
},
    {
    Action_Type="Dimensions",
    v_dims={
    "Theater",
    "Product Family",
    "Division",
    "Region",
    "Install at Country Name",
    "Connect Home Type",
    "Connect In Type",
    "SymmConnect Enabled",
    "Connect Home Refusal Reason",
    "Sales Order Channel Type",
    "Maintained By Group",
    "PS Flag",
    "Avalanche Flag",
    "Product Item Family"
    },
    Xtab_Bool="False",
    Xtab_Flip="False"
},
    {
    Action_Type="Select",
    select_type=5
},
    {
    Action_Type="Select",
    select_type=0,
    Key_Names={
    "Theater",
    "Product Family",
    "Division",
    "Region",
    "Install at Country Name",
    "Connect Home Type",
    "Connect In Type",
    "SymmConnect Enabled",
    "Connect Home Refusal Reason",
    "Sales Order Channel Type",
    "Maintained By Group",
    "PS Flag",
    "Avalanche Flag"
    },
    Key_Indexes={
    {
    "AMERICAS",
    "ATMOS",
    "Latin America CS Division",
    "37000 CS Region",
    "Mexico",
    "",
    "",
    "",
    "",
    "DIRECT",
    "EMC",
    "N",
    "0"
    }
    }
}
    }
},
    Num_Palette_cols=0,
    Num_Palette_rows=0
},
    Format={
    Window_Type="Tabular",
    Tabular={
    Num_row_labels=8
}
}
}
    }
}
    },
    Widget_Set={
    Widget_Layout="Vertical",
    Go_Button=1,
    Picklist_Width=0,
    Sort_Subset_Dimensions="TRUE",
    Order={

    }
},
    Views={
    {
    Data_Type=1,
    dbname="Previous Qtr Diveplan",
    diveline_dbname="Current Qtr Diveplan",
    logical_name="Current Qtr Diveplan",
    cols={
    {
    name="Total TSS installs",
    column_type="Calc[Total TSS installs]",
    output_type="Number",
    format_string="."
},
    {
    name="TSS Valid Connectivity Records",
    column_type="Calc[TSS Valid Connectivity Records]",
    output_type="Number",
    format_string="."
},
    {
    name="% TSS Connectivity Record",
    column_type="Calc[% TSS Connectivity Record]",
    output_type="Number"
},
    {
    name="TSS Not Applicable",
    column_type="Calc[TSS Not Applicable]",
    output_type="Number",
    format_string="."
},
    {
    name="TSS Customer Refusals",
    column_type="Calc[TSS Customer Refusals]",
    output_type="Number",
    format_string="."
},
    {
    name="% TSS Refusals",
    column_type="Calc[% TSS Refusals]",
    output_type="Number"
},
    {
    name="TSS Eligible for Physical Connectivity",
    column_type="Calc[TSS Eligible for Physical Connectivity]",
    output_type="Number",
    format_string="."
},
    {
    name="TSS Boxes with Physical Connectivty",
    column_type="Calc[TSS Boxes with Physical Connectivty]",
    output_type="Number",
    format_string="."
},
    {
    name="% TSS Physical Connectivity",
    column_type="Calc[% TSS Physical Connectivity]",
    output_type="Number"
}
    },
    dim_cols={
    {
    name="Model",
    column_type="Dimension[Model]",
    output_type="None"
},
    {
    name="Model",
    column_type="Dimension[Model]",
    output_type="None"
},
    {
    name="Connect In Type",
    column_type="Dimension[Connect In Type]",
    output_type="None"
},
    {
    name="Connect Home Type",
    column_type="Dimension[Connect Home Type]",
    output_type="None"
},
    {
    name="SymmConnect Enabled",
    column_type="Dimension[SymmConnect Enabled]",
    output_type="None"
},
    {
    name="Theater",
    column_type="Dimension[Theater]",
    output_type="None"
},
    {
    name="Division",
    column_type="Dimension[Division]",
    output_type="None"
},
    {
    name="Region",
    column_type="Dimension[Region]",
    output_type="None"
},
    {
    name="Sales Order Number",
    column_type="Dimension[Sales Order Number]",
    output_type="None"
},
    {
    name="Product Item Family",
    column_type="Dimension[Product Item Family]",
    output_type="None"
},
    {
    name="Item Serial Number",
    column_type="Dimension[Item Serial Number]",
    output_type="None"
},
    {
    name="Sales Order Deal Number",
    column_type="Dimension[Sales Order Deal Number]",
    output_type="None"
},
    {
    name="Item Install Date",
    column_type="Dimension[Item Install Date]",
    output_type="None"
},
    {
    name="SYR Last Dial Home Date",
    column_type="Dimension[SYR Last Dial Home Date]",
    output_type="None"
},
    {
    name="Maintained By Group",
    column_type="Dimension[Maintained By Group]",
    output_type="None"
},
    {
    name="PS Flag",
    column_type="Dimension[PS Flag]",
    output_type="None"
},
    {
    name="Connect Home Refusal Reason",
    column_type="Dimension[Connect Home Refusal Reason]",
    output_type="None",
    col_width=177
},
    {
    name="Cust Name",
    column_type="Dimension[Cust Name]",
    output_type="None"
},
    {
    name="Sales Order Channel Type",
    column_type="Dimension[Sales Order Channel Type]",
    output_type="None"
},
    {
    name="Sales Order Type",
    column_type="Dimension[Sales Order Type]",
    output_type="None"
},
    {
    name="Part Model Key",
    column_type="Dimension[Part Model Key]",
    output_type="None"
},
    {
    name="Ship Date",
    column_type="Dimension[Ship Date]",
    output_type="None"
},
    {
    name="Model Number",
    column_type="Dimension[Model Number]",
    output_type="None"
},
    {
    name="Item Description",
    column_type="Dimension[Item Description]",
    output_type="None"
},
    {
    name="Customer Classification",
    column_type="Dimension[Customer Classification]",
    output_type="None"
},
    {
    name="CS Customer Name",
    column_type="Dimension[CS Customer Name]",
    output_type="None"
},
    {
    name="Install At Customer Number",
    column_type="Dimension[Install At Customer Number]",
    output_type="None"
},
    {
    name="Install at Country Name",
    column_type="Dimension[Install at Country Name]",
    output_type="None"
},
    {
    name="TLA Serial Number",
    column_type="Dimension[TLA Serial Number]",
    output_type="None"
},
    {
    name="Product Version",
    column_type="Dimension[Product Version]",
    output_type="None"
},
    {
    name="Avalanche Flag",
    column_type="Dimension[Avalanche Flag]",
    output_type="None"
},
    {
    name="Product Family",
    column_type="Dimension[Product Family]",
    output_type="None"
},
    {
    name="Project Number",
    column_type="Dimension[Project Number]",
    output_type="None"
},
    {
    name="PROJECT_STATUS",
    column_type="Dimension[PROJECT_STATUS]",
    output_type="None"
}
    },
    Available_Columns={
    "Total TSS installs",
    "TSS Valid Connectivity Records",
    "% TSS Connectivity Record",
    "TSS Not Applicable",
    "TSS Customer Refusals",
    "% TSS Refusals",
    "TSS Eligible for Physical Connectivity",
    "TSS Boxes with Physical Connectivty",
    "% TSS Physical Connectivity",
    "Total Installs",
    "All Boxes with Valid Connectivty Record",
    "% All Connectivity Record",
    "Overall Refusals",
    "Overall Refusals %",
    "All Eligible for Physical Connectivty",
    "Boxes with Physical Connectivity",
    "% All with Physical Conectivity"
    },
    Remaining_columns={
    {
    name="Total Installs",
    column_type="Calc[Total Installs]",
    output_type="Number",
    format_string="."
},
    {
    name="All Boxes with Valid Connectivty Record",
    column_type="Calc[All Boxes with Valid Connectivty Record]",
    output_type="Number",
    format_string="."
},
    {
    name="% All Connectivity Record",
    column_type="Calc[% All Connectivity Record]",
    output_type="Number"
},
    {
    name="Overall Refusals",
    column_type="Calc[Overall Refusals]",
    output_type="Number",
    format_string="."
},
    {
    name="Overall Refusals %",
    column_type="Calc[Overall Refusals %]",
    output_type="Number"
},
    {
    name="All Eligible for Physical Connectivty",
    column_type="Calc[All Eligible for Physical Connectivty]",
    output_type="Number"
},
    {
    name="Boxes with Physical Connectivity",
    column_type="Calc[Boxes with Physical Connectivity]",
    output_type="Number"
},
    {
    name="% All with Physical Conectivity",
    column_type="Calc[% All with Physical Conectivity]",
    output_type="Number"
}
    },
    calcs={
    {
    name="Total TSS installs",
    definition="Total[Total TSS installs]",
    ts_flag="Not TS Calc"
},
    {
    name="TSS Valid Connectivity Records",
    definition="Total[PS Boxes w/ valid connectivity record (1=yes)]",
    ts_flag="Not TS Calc"
},
    {
    name="% TSS Connectivity Record",
    definition="Total[PS Boxes w/ valid connectivity record (1=yes)] /Total[Total TSS installs]",
    ts_flag="Not TS Calc"
},
    {
    name="TSS Not Applicable",
    definition="Total[Bozes w/ valid connectivity record (1=yes)]-Total[Boxes Eligible (1=yes)]-Total[TSS Refusals]",
    ts_flag="Not TS Calc"
},
    {
    name="TSS Customer Refusals",
    definition="Total[TSS Refusals]",
    ts_flag="Not TS Calc"
},
    {
    name="% TSS Refusals",
    definition="Total[TSS Refusals]/Total[PS Boxes w/ valid connectivity record (1=yes)]",
    ts_flag="Not TS Calc"
},
    {
    name="TSS Eligible for Physical Connectivity",
    definition="Total[TSS Eligible]-Total[Exception]",
    ts_flag="Not TS Calc"
},
    {
    name="TSS Boxes with Physical Connectivty",
    definition="Total[PS Physical Connectivity] - Total[PS Physical Connectivity, SymmConnect Enabled=\"Capable not enabled\"]",
    ts_flag="Not TS Calc"
},
    {
    name="% TSS Physical Connectivity",
    definition="Total[Boxes w/ phys conn]/Total[Boxes Eligible (1=yes)]",
    ts_flag="Not TS Calc"
},
    {
    name="Total Installs",
    definition="Total[Total Installs]",
    ts_flag="Not TS Calc"
},
    {
    name="All Boxes with Valid Connectivty Record",
    definition="Total[Bozes w/ valid connectivity record (1=yes)]",
    ts_flag="Not TS Calc"
},
    {
    name="% All Connectivity Record",
    definition="Total[Bozes w/ valid connectivity record (1=yes)]/Total[Total Installs]",
    ts_flag="Not TS Calc"
},
    {
    name="Overall Refusals",
    definition="Total[Overall Refusals]",
    ts_flag="Not TS Calc"
},
    {
    name="Overall Refusals %",
    definition="Total[Overall Refusals]/Total[Bozes w/ valid connectivity record (1=yes)]",
    ts_flag="Not TS Calc"
},
    {
    name="All Eligible for Physical Connectivty",
    definition="Total[Boxes Eligible (1=yes)]-Total[Exception]",
    ts_flag="Not TS Calc"
},
    {
    name="Boxes with Physical Connectivity",
    definition="Total[Boxes w/ phys conn]-Total[Boxes w/ phys conn,SymmConnect Enabled=\"Capable not enabled\"]",
    ts_flag="Not TS Calc"
},
    {
    name="% All with Physical Conectivity",
    definition="Total[Boxes w/ phys conn]/Total[Boxes Eligible (1=yes)]",
    ts_flag="Not TS Calc"
}
    },
    merge_type="consolidate",
    merge_dbs={
    {
    dbname="connectivityallproducts.mdl",
    diveline_dbname="/DI_PSREPORTING/connectivityallproducts.mdl"
}
    },
    skip_constant_columns="FALSE",
    categories={
    {
    name="Geography",
    dimensions={
    "Theater",
    "Division",
    "Region",
    "Install at Country Name"
    }
},
    {
    name="Mappings and Flags",
    dimensions={
    "Connect Home Type",
    "Connect In Type",
    "SymmConnect Enabled",
    "Connect Home Refusal Reason",
    "Sales Order Channel Type",
    "Maintained By Group",
    "Customer Installable",
    "PS Flag",
    "Top Level Flag",
    "Avalanche Flag"
    }
},
    {
    name="Product Information",
    dimensions={
    "Product Family",
    "Product Item Family",
    "Product Version",
    "Item Description"
    }
},
    {
    name="Sales Order Info",
    dimensions={
    "Sales Order Deal Number",
    "Sales Order Number",
    "Sales Order Type"
    }
},
    {
    name="Dates",
    dimensions={
    "Item Install Date",
    "Ship Date",
    "SYR Last Dial Home Date"
    }
},
    {
    name="Details",
    dimensions={
    "Item Serial Number",
    "TLA Serial Number",
    "Part Model Key",
    "Model Number"
    }
},
    {
    name="Customer Infor",
    dimensions={
    "CS Customer Name",
    "Install At Customer Number",
    "Customer Classification",
    "Cust Name"
    }
},
    {
    name="Other Dimensions",
    dimensions={
    "Model"
    }
}
    },
    Maintain_Category_Order="FALSE",
    popup_info="false"
}
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:39:33.803

这回答了您关于如何使用正则表达式匹配的问题。但是，正如 Mark 所指出的，可能有更聪明的方法。

```
>>> import re
>>> f = open("/tmp/a")
>>> lines = f.readlines()
>>> f.close()
>>> items = []
>>> for line in lines:
...     m = re.search("\"(.+)\",$", line)
...     if m:
...             items.append(m.group(1))
>>> items
['Sales', 'Product Family', 'Sales Organization', 'Region', 'Sales Area', 'Sales office', 'Sales Division', 'Sales Person', 'Sales Channel', 'Sales Order Type', 'Sales Number', 'Sales Person', 'Sales Quantity'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-12T06:42:42.947

*   在这里，我们从文本文件中找到 v_dims 元素。
    *   从数据中删除空格。
    *   转换列表中的数据。
    *   计算列表的长度。

* * *

```
import re
with open(fname, "r") as fp: 
    data = fp.read()
rx_blanks=re.compile(r"\s+")
v_dims_list = eval("["+rx_blanks.sub("",data[re.search(r'v_dims={',data).end():][:re.search(r'},',data[re.search(r'v_dims={',data).end():]).start()])+']')
or
v_dims_list = list(eval(rx_blanks.sub('',data[re.search(r'v_dims={',data).end():][:re.search(r'},',data[re.search(r'v_dims={',data).end():]).start()]))) 
```

> 如果你想要长度
> 
> len(v_dims_list)

# google-apps-script - 谷歌应用脚 本getFolder（路径）

> ID：11246899
> 
> 赞同：0
> 
> 时间：2012-06-28T14:30:03.093
> 
> 标签：google-apps-script

因为有些日子之前运行良好的脚本无法运行。getFolder(path) 不起作用。路径是 "top_folder_in_drive/next_level_folder" 。根文件夹不是此路径字符串的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:21:41.737

您能否提供更多详细信息 - 也许是一些代码？尝试将代码包装在 try-catch 块中，看看有什么异常。在大多数情况下，这将回答您的问题。如果您仍然认为没有任何改变并且您仍然遇到问题，请在问题跟踪器中打开一个问题

# c++ - OpenCV：“cvCreateGLCM”方法的分配错误

> ID：11246902
> 
> 赞同：1
> 
> 时间：2012-06-28T14:30:06.940
> 
> 标签：c++, opencv, computer-vision, glcm

我正在尝试为输入图像计算 GLCM。我加载图像，将其转换为灰度，然后`cvCreateGLCM`在灰度图像上调用方法。OpenCV 版本：2.4.1，vc10，x64。

```
const char* filePath = "C:\\input.jpg";
IplImage* inputIm = cvLoadImage(filePath);

IplImage* grayIm = cvCreateImage(cvSize(width, height), IPL_DEPTH_8U, 1);
cvCvtColor(inputIm, grayIm, CV_RGB2GRAY);

CvGLCM* glcm = cvCreateGLCM(resizedGray, 0);  // ERROR 
```

我收到以下错误消息：

[![在此处输入图像描述](../Images/b0fe25ce5b7104fa2c269f4b8a5ae102.png)](https://i.stack.imgur.com/dNa7p.png)

当我按下“Break”时，它会显示错误发生的位置：

```
__forceinline void * __cdecl _heap_alloc (size_t size)

{

    if (_crtheap == 0) {
        _FF_MSGBANNER();    /* write run-time error banner */
        _NMSG_WRITE(_RT_CRT_NOTINIT);  /* write message */
        __crtExitProcess(255);  /* normally _exit(255) */
    }

    return HeapAlloc(_crtheap, 0, size ? size : 1);  // <<< The error
} 
```

请问有什么想法吗？

# jquery - 在 jquery 中使用 XML 实体表示

> ID：11246903
> 
> 赞同：0
> 
> 时间：2012-06-28T14:30:06.987
> 
> 标签：jquery

我想知道如何使用实体表示来填写此代码中的 id

```
var ID = $(this).attr("id");
var dataString = 'msg_id='+ ID; 
//alert(ID);
var mssg = $('#'+&quot;ID&quot;').html();
$('#content').val(mssg); 
```

我的尝试`var mssg = $('#'+&quot;ID&quot;).html();`是错误的，因为脚本现在不起作用。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:38:19.890

```
var mssg = $('#'+ID).html(); 
```

如果我理解你的问题，应该是正确的方法。

# c# - 强制转换类型列表<> 为 DataAdapter 更新做准备

> ID：11246905
> 
> 赞同：0
> 
> 时间：2012-06-28T14:30:13.483
> 
> 标签：c#, linq, dataset, generic-list

我们有这个：

```
List<Person> listPerson ; 
```

想在一个中使用listPerson**的数据**`SqlDataAdapter`

类似于：

```
adapter.Update(listPerson); 
```

*可能性可能**会将 listPerson**转换为`List<DataRow>`或 A DataTable 或适配器的 Update 方法可接受的任何其他内容......*

赞赏 LinQ 或任何更强大的代码，

你建议哪种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:52:22.453

我能想到的最接近的：

[DataTableExtensions.CopyToDataTable](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.copytodatatable.aspx)

您可能需要一个 lambda 来将 Person 转换为 PersonRow

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:00:09.007

SqlDataAdapter.Update 方法可以采用类型参数

> 1) 更新(DataRow[]) 2) 更新(DataSet) 3) 更新(DataTable) 4) 更新(DataRow[], DataTableMapping) 5) 更新(DataSet, 字符串)

因此，由于您已经拥有人员列表，因此最简单的方法是：

```
 DataRow[] personRows= Persons.Cast<DataRow>().ToArray();
        sqlDataAdapter.Update(personRows); 
```

希望这可以帮助 ....

# ruby-on-rails - 为列表框映射 youtube_search 哈希结果

> ID：11246906
> 
> 赞同：0
> 
> 时间：2012-06-28T14:30:13.730
> 
> 标签：ruby-on-rails

我正在使用[这个](https://github.com/grosser/youtube_search)gem 搜索 youtube 视频并在列表框中使用 ajax 显示。我想从哈希结果中获取标题和 video_id 但不知道该怎么做。我已经尝试了下面的代码，但它显示`undefined method title for #<Hash:0x0000000582b270>`

这是我的代码，我想要 [:title, :video_id] 的数组，以便它可以显示在列表框中。谢谢。

```
search_result = YoutubeSearch.search(params[:query])
render :json => search_result.map{|k,v| [k.title, v.video_id] } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:45:00.500

search 方法显然返回了一组视频数据的哈希值，而不仅仅是一个。
从哈希中获取值的方式是这样的：

```
results = {}
search_result.each do |s|
  results[s['id']] = s['title']
end

puts results 
```

# c# - 数据绑定到可观察集合的属性总是显示 15

> ID：11246910
> 
> 赞同：1
> 
> 时间：2012-06-28T14:30:33.700
> 
> 标签：c#, wpf, xaml, data-binding

我的 MainWindow 类中有以下依赖项属性（从 WPF 的 Window 继承）

```
public ObservableCollection<ComputerListItem> ActiveComputers 
        {
            get { return (ObservableCollection<ComputerListItem>)this.GetValue(ActiveComputersProperty); }
            set { this.SetValue(ActiveComputersProperty, value); }
        }

        public static readonly DependencyProperty ActiveComputersProperty = DependencyProperty.Register(
            "ActiveComputers", typeof(ObservableCollection<ComputerListItem>), typeof(MainWindow), new PropertyMetadata(new ObservableCollection<ComputerListItem>())); 
```

现在我试图`ActiveComputers.Count`在我的 XAML 中给一个标签值所以我有这个：

```
<Window x:Class="ComputerManagerV3.MainWindow"        
        <!-- SNIP -->
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        >
    <Grid>
       <!--SNIP -->
        <Label Name="labelActive" Content="{Binding Source=ActiveComputers, Path=Count}" ></Label> 
```

即使在设计器中，标签现在显示的值也是 15，这很奇怪，因为列表最初填充了 13 个元素。所以我添加了一些测试，无论可观察集合中有多少项目，标签总是显示值 15:/。输出窗口中也没有显示绑定错误，所以我不知道该怎么做。

我的问题：

*   为什么绑定表达式的值总是15？
*   如何编写正确的绑定，以便它始终显示列表中的项目数
*   是否可以在不自己编写值转换器的情况下添加一些文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:36:49.003

您的绑定源是文字`string`“ActiveComputers”，其中包含 15 个字符。因此，您正在显示字符串中的字符数，并且根本没有连接到集合。

尝试这个：

```
Content="{Binding ActiveComputers.Count}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:37:27.340

您正在将您的`Source`属性设置为字符串，并且`String.Count`是 15。

要正确绑定到属性，请改用：

```
<Label Name="labelActive" Content="{Binding ActiveComputers.Count, 
     RelativeSource={RelativeSource AncestorType={x:Type Window}}" /> 
```

至于关于文本格式的第三个问题，您可以使用[ContentStringFormat](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.contentstringformat.aspx)属性来格式化`Label`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:45:58.960

这里有不止一个问题：

1）在依赖属性注册中，您将相同的列表实例传递给类的所有实例的属性。

```
public static readonly DependencyProperty ActiveComputersProperty =
    DependencyProperty.Register(
        "ActiveComputers",
         typeof(ObservableCollection<ComputerListItem>),
         typeof(MainWindow),
         new PropertyMetadata(new ObservableCollection<ComputerListItem>())) 
```

而是使用默认值 null 注册并在类的构造函数中设置属性。

2）绑定路径错误。Source 应该是一条路径。ElementName 用于从 XAML 中的给定名称开始路径。尝试使用[Rachel 的建议](https://stackoverflow.com/a/11247035/38368)...

使用RelativeSource 在窗口而不是DataSource 开始路径，然后使用ActiveComputers.Count 作为路径。

# javascript - 在 firefox 插件中处理右键单击，仅适用于文档

> ID：11246911
> 
> 赞同：0
> 
> 时间：2012-06-28T14:30:34.423
> 
> 标签：javascript, firefox, firefox-addon, xul

我正在编写一个相当简单的 Firefox 插件，当用户在网页上的任何位置用鼠标右键单击时，我想做一些事情。我让它工作了，但奇怪的是，我也从 Firefox UI 中获得了所有的右键单击（比如在工具栏、选项卡、urlbar 等上）。我当然对这些不感兴趣。

```
document.addEventListener("contextmenu", function(e) {
    // do stuff here
}, true); 
```

我最初在窗口上有这个监听器，但它并没有改变任何事情。

关于如何仅在网站中发生右键单击时触发事件的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:32:57.000

我猜您正在从浏览器窗口覆盖层运行您的代码 - 所以`document`您将事件侦听器附加到浏览器窗口的 XUL 文档。如果您只需要来自浏览器的事件，那么您应该将事件侦听器附加到浏览器。这仍然不能完全满足您的需求，因为浏览器也有一些用户界面（通知栏），但很容易检测事件目标是否在内容文档中：

```
gBrowser.addEventListener("contextmenu", function(e) {
    if (e.target.ownerDocument.defaultView.top == window)
      return;

    // do stuff here
}, true); 
```

这使用了浏览器内窗口的顶部内容窗口这一事实`window.top`——它们不能越过 XUL 代码的边界。对于浏览器 UI 元素，您将获得真正的顶部窗口，但这是您运行的窗口。

# ruby-on-rails - 即使在嵌套路线内也找不到父模型的名称？

> ID：11246912
> 
> 赞同：1
> 
> 时间：2012-06-28T14:30:37.033
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在通过嵌套形式创建一个孩子，并且我知道这些路线有效，因为我在上面。

```
resources :surveys do
  resources :questions
end 
```

我也选择了第一个调查来添加问题，然后我想在页面上显示调查的名称：

```
class QuestionsController < ApplicationController

  def new
    @Survey = Survey.find(params[:id])
    @question = Question.new
  end
end 
```

**http://localhost:3000/surveys/1/questions/new**

```
<div><%= @survey.name %></div> # show this

<div>
 <%= simple_form_for(@question do |f| %>
  <%= f.button :submit, "Done" %>
 <% end %>
</div> 
```

这给了我错误：

```
ActiveRecord::RecordNotFound in SurveysController#new

Couldn't find Survey without an ID

app/controllers/questions_controller.rb:7:in `new'

{"survey_id"=>"1"} 
```

为什么？这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:33:22.143

正是错误告诉您的内容。如果你想通过 id 找到“父”模型，你需要使用`*parent*_id`，所以在这种情况下是：

```
@Survey = Survey.find(params[:survey_id]) 
```

该参数是为*当前*`id`控制器保留的，在这种情况下是指*问题*的 id ，而不是*调查*。

# c++ - 无法在 Windows 中以编程方式 (C++) 从其他用户帐户读取文件

> ID：11246913
> 
> 赞同：0
> 
> 时间：2012-06-28T14:30:42.853
> 
> 标签：c++, windows, file, winapi, visual-c++

我使用以下功能在 Windows 的一个用户帐户中创建了一个包含一些日志的文本文件：

```
WORD wBOM = 0xFEFF;

    HANDLE hFile = ::CreateFileW(filePath, GENERIC_WRITE, 0, NULL,CREATE_NEW,FILE_ATTRIBUTE_NORMAL, NULL);

            ::WriteFile(hFile, &wBOM, sizeof(WORD), &NumberOfBytesWritten, NULL);
            ::CloseHandle(hFile); 
```

现在，当我以编程方式从其他用户帐户读取此文件时，我无法打开文件并读取其内容。

我正在使用以下功能从其他用户帐户中读取。

```
CFile file;
        CFileException *exp = NULL;
        if(!file.Open( logAppExecPath,CFile::modeReadWrite | CFile::shareDenyNone,exp))
        {

        if(exp != NULL)
        {
            TCHAR ErrorMsg[MAX_PATH];
            exp->GetErrorMessage(ErrorMsg,MAX_PATH);
            AfxMessageBox(L"XML Creation while AppExecLogs : "+ CString(ErrorMsg));
            exp->Delete();

        }
        } 
```

但是，每当我从同一个用户帐户读取时，上述功能都可以正常工作并正确打开和读取文件。

两个用户帐户都是管理员帐户。

总之，以编程方式在一个用户帐户中写入文件并从其他用户帐户读取会出现“文件不存在”的异常......但事实是文件存在，我可以使用单击手动打开该文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:30:58.570

默认情况下，用户的配置文件只能由该用户访问。此外，Windows 没有标准的方式来访问任何其他用户的配置文件。

您最好的选择是使用公共/共享位置，在`C:\ProgramData\`（根据需要设置权限）或公共文档文件夹中。在哪里取决于文件是什么。

# cytoscape-web - 有没有直接的方法来获取节点的邻居？

> ID：11246915
> 
> 赞同：1
> 
> 时间：2012-06-28T14:30:57.377
> 
> 标签：cytoscape-web

`n0`有没有直接的方法来获取Cytoscape.js 中节点的所有网络邻居？

到目前为止，我想到的最佳解决方案是获取所有边在哪里`n0`是源和所有边在哪里`n0`是目标——然后分别查看这些边的目标和源。

有没有更方便的方法，比如函数`cy.nodes("#n0").neighbors()`？

我需要这个的原因是我想实现一个删除节点的函数，但也应该删除删除`n0`后没有边的其他节点。`n0`对此的想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:10:45.660

`node.neighborhood()`还包括边缘，因此`node.neighborhood('node')`如果您想过滤邻域，您可以使用或任何其他选择器。

编辑：您也可以使用学位来做您想做的事。

`var otherNodesToDelete = node.neighborhood('node{degree = 1}');`

或者你可以做`node.remove()`然后做`cy.$('node{degree = 0}')`寻找断开的节点。

# javascript - 从我的网站查询第三方网站的数据库

> ID：11246917
> 
> 赞同：0
> 
> 时间：2012-06-28T14:30:58.737
> 
> 标签：javascript, asp.net, ajaxcontroltoolkit

# 目标：

根据我的 ASP.NET 网站上的用户查询从第 3 方数据库中检索信息

# 细节：

我需要能够搜索第三方网站以获取与药物相关的信息。基本上，这就是我的任务：用户开始输入他们在实验中使用的药物的名称，并且在他们输入第 3 方网站（例如，[here](http://www.drugbank.ca/)或[here](http://www.pharmgkb.org/index.jsp)）时，会询问并提出建议根据他们输入的内容制作。一旦他们做出选择，就会从第三方数据库中检索某些特性（分子量、化学结构等）并存储在我们的数据库中。`PharmaGKB.org`的搜索栏几乎是我需要实现的，但我需要访问第 3 方数据库。我正在处理的网站是 ASP.NET/C#。

# 问题：

我真的不知道从哪里开始。[此处](http://www.pharmgkb.org/downloads.jsp)页面底部有一个可下载的 Perl 示例，但它并没有对我有太大帮助。我不知道如何实现这一点，甚至找不到有关如何做到这一点的信息。有人建议使用 AJAX 工具包，但我不确定这是否能解决问题。JavaScript 也在考虑之中，但同样，我也不确定这是否足够。

# Perl 示例连接

如前所述，这是`Pharmgkb.org`网站上给出的 Perl 示例的片段：

```
my $call = SOAP::Lite
-> readable (1)
-> uri('SearchService')
-> proxy('http://www.pharmgkb.org/services/SearchService')
-> search ($ARGV[0]); 
```

但是，我不确定如何实现这是 C#/ASP.NET/JavaScript。Stack Overflow 上有一个关于在 C# 中嵌入 Perl 的问题，但它也需要一个 C 包装器，而且我认为解决这个问题不需要或明智地使用三种语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T21:13:49.823

继续从评论到您的帖子，这就是我认为您可以做的事情：

1.  将服务引用添加到您的 Web 项目。在地址中，使用这个：[http](http://www.pharmgkb.org/services/SearchService?wsdl) ://www.pharmgkb.org/services/SearchService?wsdl 。
2.  单击“前往”。该向导会将服务识别为 SearchServiceService。在下面的命名空间文本框中，命名为“SearchServiceReference”。
3.  您的服务方法和数据对象将被创建（连同所有其他必要的位来运行您的服务）。
4.  然后，您可以使用服务参考，例如：

    > 公共静态对象[]搜索（字符串搜索字符串）{
    > 
    > ```
    >  using (var searchSeviceClient = new SearchServiceReference.SearchServiceClient())
    >         {
    >             return searchSeviceClient.search(searchString);
    >         }
    >     } 
    > ```

此外，考虑到您的问题的整个场景，您可能希望此服务在 javascript/jQuery 的文本更改事件上运行。您可以在本文中学习如何使用 ajax 从 jQuery 调用代码隐藏方法：[jquery ajax calling Wcf service or some method in Code behind from Client Side](http://blogs.effectlabs.com/post/2012/02/24/jquery-ajax-calling-Wcf-service-or-some-method-in-Code-behind-from-Client-Side.aspx)

# facebook-graph-api - Facebook 应用程序 - 向朋友发布动态消息

> ID：11246919
> 
> 赞同：1
> 
> 时间：2012-06-28T14:31:02.760
> 
> 标签：facebook-graph-api, facebook-php-sdk

我正在构建 Facebook 应用程序，我希望该应用程序将预定义的消息发布到：

1) 用户的新闻提要（即任何使用过该应用程序的用户）

2）如果可能的话，用户的朋友的新闻提要甚至他们的墙。

目前，我只使用以下代码将其发布到用户的墙上：

```
if(isset($_POST['mapp_message'])){
        try {
            $facebook->api('/me/feed', 'POST', array(
                'access_token' => $facebook->getAccessToken(),              
                'message' => $_POST['mapp_message'],
                'name' => "This is the title of my post",
                'description' => "This is the body of the post with lots of text in it",
                'link' => 'http://www.mysite.com',
                'picture'=>"http://lipsum.com/images/lipsum07.gif",
                'privacy' => array('value' => 'EVERYONE')               
            ));
            $sent = true;
        } catch (FacebookApiException $e) {
            //do something about it
        }
    } 
```

注意：我刚刚发现它们是用户墙和新闻提要之间的区别。

我已经在谷歌上搜索了几个小时，但我无法弄清楚。所以任何帮助表示赞赏。

问候

*更新*

好的，我取得了一些进展。我设法让它张贴在用户朋友的墙上（即使用过该应用程序的人的朋友）。代码如下：

```
try {
        $userData = $facebook->api('/me');

    } catch (FacebookApiException $e) {
        //do something about it
    }    

try {
            $friendsTmp = $facebook->api('/' . $userData['id'] . '/friends');
            shuffle($friendsTmp['data']);
            array_splice($friendsTmp['data'], 5);
            $friends = $friendsTmp['data'];
        } catch (FacebookApiException $e) {
            //do something about it
        } 
```

这段代码随机选择用户的5个使用过该应用的朋友贴在他们的墙上，代码如下：

```
foreach($friends as $k => $i){                                      
                $facebook->api('/'.$i['id'].'/feed', 'POST', array(
                    'access_token' => $facebook->getAccessToken(),              
                    'message' => $_POST['mapp_message'],
                    'name' => "This is the title of my post",
                    'description' => "This is the body of the post with lots of text in it",
                    'link' => 'http://www.mysite.com',
                    'picture'=>"http://lipsum.com/images/lipsum07.gif"
                    //'privacy' => array('value' => 'EVERYONE')             
                ));                                     
            } 
```

但是，如果我可以将其发布到新闻源中，我仍然更愿意。

# java - 在 Maven 项目中使用 OSGi 包的 ClassCastException

> ID：11246920
> 
> 赞同：1
> 
> 时间：2012-06-28T14:31:07.767
> 
> 标签：java, maven, osgi, apache-felix, maven-bundle-plugin

我是 OSGi 的新手，并且正在努力将捆绑包包含到我的 Maven 项目中。

我使用mave-bundle-plugin 创建了一个API 包和一个实现包。在我的主要项目（一个 Maven 项目）中，我尝试使用 Felix 框架从 ServiceTracker 获取已实施捆绑包的服务。当我最终尝试将获得的服务转换为正确的类型时，我收到了 ClassCastException。

API Maven 项目：

```
public interface ParserTestService {
    String validForStage();
} 
```

API POM：

```
<artifactId>ParserTest</artifactId>
<version>0.0.2-SNAPSHOT</version>
<packaging>bundle</packaging>

<build>
    <plugins>
        <plugin> 
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <extensions>true</extensions>
            <configuration>
                <instructions>
                    <Bundle-SymbolicName>${pom.groupId}.${pom.artifactId}</Bundle-SymbolicName>
                    <Bundle-Vendor>Apache-Felix</Bundle-Vendor>
                    <Bundle-Version>0.0.1</Bundle-Version>
                    <Export-Service>de.ParserTestService</Export-Service>    
                </instructions>
            </configuration>
        </plugin>
    </plugins>
</build>

<dependencies>
    <dependency>
        <groupId>org.apache.felix</groupId>
        <artifactId>org.apache.felix.framework</artifactId>
        <version>2.0.4</version>
    </dependency>
</dependencies> 
```

实现 Maven 项目：

```
public class ParserImplService implements ParserTestService {
    public String validForStage() {
        return "S";
    }
} 
```

实现 POM：

```
<artifactId>ParserTestVersion1</artifactId>
<version>0.0.2-SNAPSHOT</version>
<packaging>bundle</packaging>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <extensions>true</extensions>
            <configuration>
                <instructions>
                    <Bundle-SymbolicName>${pom.groupId}.${pom.artifactId}</Bundle-SymbolicName>
                    <Bundle-Vendor>Apache-Felix</Bundle-Vendor>
                    <Bundle-Version>0.0.1</Bundle-Version>
                    <Bundle-Activator>de.Activator</Bundle-Activator>
                    <Export-Package>de</Export-Package>
                    <Export-Service>de.ParserImplService</Export-Service>
                    <Import-Package>org.osgi.framework</Import-Package>
                </instructions>
            </configuration>
        </plugin>
    </plugins>
</build>

<dependencies>
    <dependency>
        <groupId>org.apache.felix</groupId>
        <artifactId>org.apache.felix.framework</artifactId>
        <version>2.0.4</version>
        <type>bundle</type>
    </dependency>
    <dependency>
        <groupId>de</groupId>
        <artifactId>ParserTest</artifactId>
        <version>0.0.2-SNAPSHOT</version>
        <type>bundle</type>
    </dependency>
</dependencies> 
```

Maven 使用以下清单文件创建了两个 jar 文件：

```
Manifest-Version: 1.0
Bnd-LastModified: 1340890655296
Build-Jdk: 1.6.0_24
Built-By: br_s1
Bundle-ManifestVersion: 2
Bundle-Name: Parser Test Interface
Bundle-SymbolicName: de.ParserTest
Bundle-Vendor: Apache-Felix
Bundle-Version: 0.0.1
Created-By: Apache Maven Bundle Plugin
Export-Package: de;version="0.0.1"
Export-Service: de.ParserTestService
Tool: Bnd-1.50.0

Manifest-Version: 1.0
Bnd-LastModified: 1340890661890
Build-Jdk: 1.6.0_24
Built-By: br_s1
Bundle-Activator: de.Activator
Bundle-ManifestVersion: 2
Bundle-Name: Parser Test
Bundle-SymbolicName: de.ParserTestVersion1
Bundle-Vendor: Apache-Felix
Bundle-Version: 0.0.1
Created-By: Apache Maven Bundle Plugin
Export-Package: de;version="0.0.1"
Export-Service: de.ParserImplService
Import-Package: org.osgi.framework;version="[1.5,2)"
Tool: Bnd-1.50.0 
```

在我的 Major Maven 项目中，我设置并启动了一个 Felix 框架。在子文件夹“bundles”中，我复制了上面 Maven 部署过程创建的 jar 文件。在安装例程中，我尝试安装这些包并启动它们：

```
public class HostActivator implements BundleActivator {
...
    public BundleContext getContext()
    {
        return m_context;
    }
...
}

public class HostApplication
{
    private HostActivator m_activator = null;
    private Felix m_felix = null;
    private ServiceTracker m_tracker = null;

    public HostApplication()
    {
        Map<String, Object> configMap = new HashMap<String, Object>();
        configMap.put(Constants.FRAMEWORK_SYSTEMPACKAGES_EXTRA, "de.test; version=1.0.0");
        m_activator = new HostActivator();
        List<BundleActivator> list = new ArrayList<BundleActivator>();
        list.add(m_activator);
        configMap.put(FelixConstants.SYSTEMBUNDLE_ACTIVATORS_PROP, list);

        m_felix = new Felix(configMap);
        m_felix.start();

        m_tracker = new ServiceTracker(m_activator.getContext(), ParserTestService.class.getName(), null);
        m_tracker.open();
    }

    public void installBundlesFromDir() {

        File dir = new File("bundles");
        for (File f : dir.listFiles()) {
            try {
                Bundle b = m_felix.getBundleContext().installBundle("file:"+f.getAbsolutePath());
                b.start();

                ServiceReference sr = m_felix.getBundleContext().getServiceReference(ParserTestService.class.getName());

                ParserTestService service = (ParserTestService) m_felix.getBundleContext().getService(sr);

            } catch (BundleException e) {
                System.err.println("could not load bundle "+f.getAbsolutePath());
            }
        }        

    }
} 
```

对应的POM：

```
<artifactId>parserUse</artifactId>
<version>0.0.1-SNAPSHOT</version>

<dependencies>
    <dependency>
        <groupId>org.apache.felix</groupId>
        <artifactId>org.apache.felix.framework</artifactId>
        <version>2.0.4</version>
    </dependency>            
    <dependency>
        <groupId>de</groupId>
        <artifactId>ParserTestVersion1</artifactId>
        <version>0.0.2-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>de</groupId>
        <artifactId>ParserTest</artifactId>
        <version>0.0.2-SNAPSHOT</version>
    </dependency>
</dependencies> 
```

但是，当我尝试调用安装例程时，我收到了 ClassCastException：

```
java.lang.ClassCastException: de.ParserImplService cannot be cast to de.ParserTestService 
```

我已经检查了类加载器

```
ParserTestService.class.getClassLoader() 
```

和

```
(m_felix.getBundleContext().getService(sr)).getClass().getClassLoader() 
```

它们彼此不同。

我一直认为 OSGi 会为我处理类加载。

有谁知道我做错了什么？任何帮助表示赞赏！

在此先感谢，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:53:39.100

我终于找到了解决这个问题的方法，但只能避免使用 Felix 并改用 Equinox。

1.) API 只导出包`<Export-Package>de</Export-Package>`

2.) Impl 什么都不出口。它只定义了激活器及其导入

```
<Bundle-Activator>de.Activator</Bundle-Activator>
<Import-Package>org.osgi.framework;de</Import-Package> 
```

3.) 我用 Equinox 替换了整个 HostApplication：

```
public class HostApplication {
    private BundleContext bundleContext;

    public HostApplication(String profileName) {
        BundleContext bc = null;
        Properties frameworkProperties = readCustomProfile(profileName);

        frameworkProperties.put("osgi.clean", "true");
        frameworkProperties.put("osgi.console", "true");

        Map<String, String> frameworkPropertiesMap = new HashMap<String, String>();
        for (Object o : frameworkProperties.keySet()) {
            frameworkPropertiesMap.put((String) o,
                    (String) frameworkProperties.getProperty((String) o));
        }

        EclipseStarter.setInitialProperties(frameworkPropertiesMap);
        bc = EclipseStarter.startup(new String[] { "-console", "-dev", "bin" },    null);
    }

   public boolean containsIegm(String stage, byte[] msg) {

        try {
            ServiceReference serviceReference = bundleContext.getServiceReference(ParserTest.class.getName());
            return ((ParserImplService) bundleContext.getService(serviceReference)).containsIegm(msg);

        } catch (Exception ex) {
            ex.printStackTrace();
        }

        return false;
    }

    public void installBundlesFromDir() {

        File dir = new File("bundles");
        int i = 0;
        for (File f : dir.listFiles()) {
            try {
                Bundle b = bundleContext.installBundle("file:"+ f.getAbsolutePath());
                b.start();
            } catch (BundleException e) {
                System.err.println("could not load bundle "    + f.getAbsolutePath());
            }
        }

    }
} 
```

我通过使用 m_felix 的 BundleContext（参见问题）对 Felix 进行了完全相同的尝试，并完全删除了 HostActivator（我知道在我的应用程序中没有必要这样做）。但是，我无法让它工作。

无论如何，使用 Equinox，在非 OGSi/非捆绑应用程序中嵌入 OSGi 框架同样容易。

感谢大家的帮助！塞巴斯蒂安

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:03:57.933

两个捆绑包都在导出“de”。这意味着将有两个名为“de”的名称空间。
捆绑包 Bundle-SymbolicName: de.ParserTestVersion1 应该**导入**“de”并从另一个捆绑包中获取它

# visual-studio-2010 - 如何在 Visual Studio 2010 中管理加载项？

> ID：11246922
> 
> 赞同：2
> 
> 时间：2012-06-28T14:31:16.403
> 
> 标签：visual-studio-2010, add-in

我在 Visual Studio（2010（专业版））中安装了（至少）两个插件。我想暂时禁用它们。

如何在 Visual Studio 2010 中管理插件？

* * *

我尝试使用插件**管理器**（工具 -> 插件管理器...）：

![在此处输入图像描述](../Images/7c0ef54ebaaf7287427a749a5680fe32.png)

但是我的（至少）两个插件都没有出现。

如何在 Visual Studio 2010 中管理插件？

* * *

查看 MSDN：

> ## [如何：停用和删除加载项](http://msdn.microsoft.com/en-us/library/ms228765.aspx)
> 
> 使用完加载项后，可以通过在加载项管理器中清除其名称旁边的复选框，从 Visual Studio 中卸载它。
> 
> 按照本主题中的步骤，您可以永久删除加载项，使其不再出现在加载项管理器中，并且其命令不再出现在“工具”菜单或 Visual Studio 工具栏上。
> 
> 加载项管理器位于工具菜单上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:01:36.760

在 Visual Studio 2010 中，Microsoft 添加了另一种形式的“插件”（我们过去如何称呼它们）。
现在，我们有了`Visual Studio Integration Package`不基于 COM 的插件。
这促使您创建一个不同的菜单来处理这些类型的扩展。主菜单仍然存在，但添加`Tools`了一个名为的特定子菜单`Extension Manager`

可以在此处找到有关此论点的更多信息

[“Visual Studio 集成包”与“Visual Studio 插件”：有什么区别？](https://stackoverflow.com/questions/1139294/visual-studio-integration-package-vs-visual-studio-add-in-what-is-the-diffe)

和这里

[Visual Studio 2010 加载项管理器和扩展管理器之间的差异](https://stackoverflow.com/questions/2758244/differences-between-visual-studio-2010-add-in-manager-and-extension-manager)

# c# - 在 MVC3 中确定 RenderView 的上下文

> ID：11246923
> 
> 赞同：0
> 
> 时间：2012-06-28T14:31:17.963
> 
> 标签：c#, .net, asp.net-mvc-3

我想使用这样的自定义视图引擎来操作 HTML：

```
protected override void RenderView(ViewContext viewContext, TextWriter writer, object instance)
{
    if (viewContext.Controller is MyController)
    {
       .. alter the html then write to writer
    } else {
        base.RenderView(viewContext, writer, instance);
    }
} 
```

`RenderView`被调用视图和每个部分视图，但我无法找到一种可靠的方法来确定它是渲染外部视图还是部分视图。

`writer`对象的类型是`HttpWriter`局部视图和`StringWriter`外部视图。这似乎是一种不好的测试方法，但到目前为止，这是我能找到的唯一具体的东西

告诉我`instance`视图或局部视图名称，但检查字符串以查看我是否正在渲染局部视图似乎很脆弱。

有没有更直接的方法来确定它是否是部分视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:03:18.290

您可以从自定义视图引擎将布尔参数传递给自定义视图：

```
public class MyRazorView : RazorView
{
    private readonly bool _isPartial;

    public MyRazorView(ControllerContext controllerContext, string viewPath, string layoutPath, bool runViewStartPages, IEnumerable<string> viewStartFileExtensions, IViewPageActivator viewPageActivator, bool isPartial)
        : base(controllerContext, viewPath, layoutPath, runViewStartPages, viewStartFileExtensions, viewPageActivator)
    {
        _isPartial = isPartial;
    }

    protected override void RenderView(ViewContext viewContext, TextWriter writer, object instance)
    {
        if (viewContext.Controller is MyController)
        {
            if (_isPartial)
            {
                // it's a partial
            }
            else
            {
                // it's the main view
            }
        } 
        base.RenderView(viewContext, writer, instance);
    }
}

public class MyRazorViewEngine : RazorViewEngine
{
    protected override IView CreatePartialView(ControllerContext controllerContext, string partialPath)
    {
        return new MyRazorView(
            controllerContext, 
            partialPath, 
            null, 
            false, 
            base.FileExtensions, 
            base.ViewPageActivator, 
            true
        );
    }

    protected override IView CreateView(ControllerContext controllerContext, string viewPath, string masterPath)
    {
        return new MyRazorView(
            controllerContext, 
            viewPath, 
            masterPath, 
            true, 
            base.FileExtensions, 
            base.ViewPageActivator, 
            false
        );
    }
} 
```

# php - 如何在 PHP 中提交多个选项和多个表单

> ID：11246932
> 
> 赞同：0
> 
> 时间：2012-06-28T14:31:39.990
> 
> 标签：php, mysql, html, forms

我有一个 html/php 表单，如下所示：

表格一：

```
Apple
 options:
   -big
   -medium
   -small
Submit button 
```

表格 2：

```
Orange
 options:
   -big
   -medium
   -small
Submit button 
```

桌子：

```
Items
 id
 user_id
 fruit_type
 size 
```

问题：

目前，用户必须在他们想要调整大小的每个水果上单击“提交”。有什么方法可以将其组合成一个表单，以便用户在完成选择后单击提交所有尺寸选项？我不知道如何编写可以处理此问题的 Mysql 查询，因为两种形式的 fruit_type 都不同。

其次，如何让表单“记住”用户当前的大小设置并默认为该选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:44:36.787

您的 html 表单可能是这样的：

```
Apple :
    <input type="radio" name="apple" value="big">
    <input type="radio" name="apple" value="medium">
    <input type="radio" name="apple" value="small">

    Orange :
    <input type="radio" name="orange" value="big">
    <input type="radio" name="orange" value="medium">
    <input type="radio" name="orange" value="small"> 
```

然后在您获取值的 php 中，您将拥有 $_POST['apple'] 和 $_POST['orange'] 以及每个值的选定值。

使用 2 个值，只需编写 2 个 INSERT 查询。

# ios - Facebook iOS 应用程序在 fbauth// 之后未重定向到移动 Safari

> ID：11246933
> 
> 赞同：6
> 
> 时间：2012-06-28T14:31:41.610
> 
> 标签：ios, facebook, oauth-2.0

有谁知道如何修改 fbauth:// 参数以实现重定向回移动 Safari？

细节：

我们有一个集成了 Facebook 的移动优化网站。当使用 Facebook 的客户端身份验证时，用户将被重定向到 m.facebook.com，以便 Facebook 应用程序请求权限。我们更希望打开原生 iOS Facebook 应用程序，并在用户在 Facebook 应用程序中授予权限后，将其重定向回移动 Safari。

为了完成这项工作的前半部分，我们查看了 Facebook iOS SDK 并找到了这个 URL 方案来触发本机 iOS 应用程序进行应用程序授权：

```
fbauth://authorize?redirect_uri=http%3A%2F%2Fwww.ourcompany.com%2F&client_id=126187084187632&response_type=token 
```

然而，一旦我们的 Facebook 应用程序被用户授予访问权限，重定向就不会发生。

有没有一种已知的方法来调整请求参数以导致重定向发生？

如果没有，是否可以设置一个参数，以便在授权应用后将用户定向到应用标签页或画布页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:35:26.590

这是不可能的; 我认为这是因为 Facebook 的本机应用程序在登录到请求发起的同一个 safari 选项卡后无法将用户发回，它可能也无法以其他方式与身份验证流一起使用，我不确定

无论如何，不​​可能去 Safari webapp -> Facebook native app -> Safari Webapp

如果您的应用程序也是本机的并且存在 iOS 详细信息，您可以转到 safari webapp -> facebook 本机应用程序 -> 您的本机应用程序/应用商店

# python - 将 Python 脚本作为新贵服务运行显示不同的时间输出

> ID：11246941
> 
> 赞同：3
> 
> 时间：2012-06-28T14:32:16.720
> 
> 标签：python, upstart

我有一个 python 脚本，它本质上是一个小型套接字服务器，它为我执行一些简单的网络任务，我开始将它作为一个新贵服务运行以跟踪它并管理它是否正在运行。为了记录信息，我使用 Python 内置的日志记录模块。当作为 Upstart 服务运行时，我注意到一个小问题：所有时间调用都在 GMT 中出现。当它自己运行（`./scriptname.py`或者`python scriptname.py`）时，它使用本地时间，并且 Python 知道本地时间。系统时间设置正确，我只在作为新贵服务运行时看到此行为。有谁知道为什么会发生这种情况以及我该如何解决？

编辑：相关代码：我有一个助手类，方便地称为助手，它包含一些经常使用的功能（我知道它需要更好地组织，但它很快就被组合在一起了）。最值得注意的是我用来设置记录器的这个函数：

```
class helper:
    log_format = '%(asctime)-25s %(name)-25s %(levelname)-12s %(message)s'

    @staticmethod
    def createLogger(name):
        rotatingFile = logging.handlers.RotatingFileHandler('/var/log/myLog.log', maxBytes=1048576, backupCount=5)
        rotatingFile.setLevel(logging.DEBUG)
        formatter = logging.Formatter(helper.log_format)
        formatter.time = localtime()
        rotatingFile.setFormatter(formatter)
        log = logging.getLogger(name)
        log.setLevel(logging.DEBUG)
        logging.basicConfig(format=helper.log_format, level=logging.DEBUG)
        if not log.handlers:
            log.addHandler(rotatingFile)
        return log 
```

它在我的一个课程中被这样使用：

```
class MyClass:

    def __init__(self):
        self._log = helper.createLogger('LogName')
        self._log.info('Some relevant info')

    _log = None 
```

这一切都非常简单地使用了 python 内部日志工具。在我开始注意到这个问题之后，我添加了`formatter.time = localtime()`，但在我意识到它只在作为服务运行时才发生。它没有帮助。

这是我从教程中获得的（非常基本的）新贵配置：

```
description "Blah blah"
author  "My Name <My Email>"

start on runlevel [234]
stop on runlevel [0156]

exec /path/to/script.py

respawn 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:31:39.947

在 upstart 下检查你的脚本环境。`localtime()`从`TZ`//获取`TZDIR`时区信息`/etc/localtime`，“GMT”是硬编码的默认值（参见`time/tzset.c`源`glibc`代码）。环境可能是 chrooted 或以其他方式受到限制，并且您的 TZ 规范可能不起作用。

作为快速检查，您可以使用`strace -o <outfile> -ff start <jobname>`来查看 python 在启动时是否读取了正确的时区文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:10:17.503

所以，我想我终于发现了这个问题。我需要设置 TZ env var，但我之前没有这样做。添加`env TZ=/usr/share/zoneinfo/US/Central`到我的新贵配置中更正了它。感谢大家的帮助！

# java - 如何使用 Spring security 2 和 Apache Tomcat 7 设置将 JSESSIONID cookie 设置为安全

> ID：11246944
> 
> 赞同：3
> 
> 时间：2012-06-28T14:32:33.757
> 
> 标签：java, spring, tomcat

如何使用 Spring security 2 和 Apache Tomcat 7 设置将 JSESSIONID cookie 设置为安全的。

已将以下代码放入 web.xml 中，但它似乎无法正常工作。

```
<cookie-config>
   <secure>true</secure>
</cookie-config> 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T12:06:01.063

使用以下内容：

```
<session-config>
  <cookie-config>
    <secure>true</secure>
    <http-only>true</http-only>
  </cookie-config>
</session-config> 
```

# java - 文件上的多次写入怎么会比一次写入快

> ID：11246946
> 
> 赞同：2
> 
> 时间：2012-06-28T14:32:40.527
> 
> 标签：java, file-io

第一段代码：

```
// code is a private "global variable" for the class
// SourceCodeBuilder is a class that uses StringBuilder()
// basically it is based on String(s), formatted and with many appends depending on the "loc()" calls (see below)
private SourceCodeBuilder code = new SourceCodeBuilder();

[...]

    // create "file.txt" and call algorithm
    fileOut = new FileWriter("file.txt");

    for (int i=0; i<x; i++) {
        algorithm();
    } 
```

其中*algorithm()*是这样的方法：

```
private void algorithm () {
    for (int i=0; i<y; i++) {
        code.loc("some text");
        code.loc("other text");
        ...
    }

    // after "building" the code value I wrote it on the file
    fileOut.write(code.toString());
    fileOut.flush();
    code.free(); // this call "empties" the code variable (so the next time algorithm() is called it has the code var sets to "" - it frees a lot of memory)
                 // basically it calls "setLength(0)" method of StringBuilder
} 
```

当我在大型文本文件上执行所有这些操作时，执行大约需要 4500 毫秒，并且内存不到 60MB。

然后我尝试使用其他代码。第二段代码：

```
private SourceCodeBuilder code = new SourceCodeBuilder();

[...]

    // create "file.txt" and call algorithm
    fileOut = new FileWriter("file.txt");

    for (int i=0; i<x; i++) {
        algorithm();
    }

    fileOut.write(code.toString());
    fileOut.flush();
    fileOut.close(); 
```

这个 time *algorithm()*是这样的方法：

```
private void algorithm () {
    for (int i=0; i<y; i++) {
        code.loc("some text");
        code.loc("other text");
        ...
    }
} 
```

它需要超过 250MB 的内存（这没关系，因为我没有在代码变量上调用“free()”方法，所以它是对同一变量的“连续”附加），但令人惊讶的是它需要超过 5300 毫秒执行。这比第一个代码慢了大约 16%，我无法向自己解释原因。

在第一个代码中，我在“file.txt”上**多次**写入小段文本。在第二个代码中，我在“file.txt”上写了一大段文本，**但只写了一次**，并且使用了更多内存。对于第二个代码，我期望更多的内存消耗，但甚至不会消耗更多的 CPU（只是因为有更多的 I/O 操作）。

结论：第一段代码比第二段代码快，即使第一段代码比第二段代码执行更多的 I/O 操作。为什么？我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:38:23.260

每个系统调用都有开销，您可以通过使用 BufferedWriter 或读取器或流来避免。（这就是为什么你会使用缓冲）

在第一种情况下，您在写入之前缓冲整个内容。在第二种情况下，您一次写入一点文件，这将导致更多的系统调用，从而导致更多的开销。

如果您要更快地生成文件，您可能会发现几乎所有时间都花在了系统调用上。

您在块中流式传输数据（使用缓冲）的原因是您不使用太多内存。即有一个点，较大的缓冲区会减慢您的速度而不是帮助您。

在您的情况下，我怀疑您正在写入 StringBuilder 或 StringWriter（使用 StringBuffer），并且必须复制它，因为它被调整为您最终需要的大小。这会产生一些 GC 开销，从而导致更多的复制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T14:38:36.183

当您慢慢填充大内存缓冲区时，所需的时间会非线性增长，因为您需要多次重新分配缓冲区，每次都将整个内容复制到内存中的新位置。这需要时间，尤其是当缓冲区为 200MB+ 时。如果您预先分配缓冲区，您的过程可能会更快。

然而，以上所有只是我的猜测。您应该分析您的应用程序以查看额外时间的真正用途。

# html - 客户端可以修改localStorage吗？

> ID：11246947
> 
> 赞同：16
> 
> 时间：2012-06-28T14:32:48.810
> 
> 标签：html, local-storage

我正在尝试使用 localStorage 作为 cookie 替代品（讨厌 cookie），以便用户可以在我运营的网站上保持登录状态。

到目前为止，我的计划是将用户的用户名保存在 localStorage 中，并让站点检查 localStorage 中是否有任何内容，如果 localStorage 中有任何内容*，*它将通过 POST 将 localStorage 数据推送到 PHP 文件并将用户推送到启动一个新的 PHP 会话并将它们返回到原来的位置。

尽管我有顾虑，但我知道可以查看 localStorage，在这种情况下，可能对数据服务器端进行加密是有意义的。

但是LocalStorage数据可以修改吗？如果没有，即使没有加密也可以这样做，但显然如果用户可以修改 localStorage 数据，他们将可以访问其他人的帐户，正如您可以想象的那样，这不是一件好事。

我有疑问，因为 JavaScript 可以由客户端在浏览器中执行，即：

```
javascript:alert("hello"); 
```

难道不可能找出localStorage的var名称并像这样重置它的值吗？

```
javascript:localStorage.setItem('sessionusername','superadmin'); 
```

基本上，我问：可以在客户端修改 HTML5 本地存储数据吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-28T14:38:45.193

本地存储绑定到域，因此在通常情况下，用户无法在任何其他域或本地主机上更改它。

它还受每个用户/浏览器的约束，即没有第三方可以访问本地存储。

然而，本地存储最终是用户文件系统上的一个文件，可能会被黑客入侵。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-08-08T14:02:25.477

有一些插件，例如用于 Firefox 的[Foundstone HTML5 Local Storage Explorer](https://addons.mozilla.org/de/firefox/addon/foundstone-html5-local-storage/)，它允许用户不仅可以`localStorage`全局浏览，还可以修改其内容：

[![本地存储资源管理器](../Images/5f1372bcd27cbbc9d030a7c98a4aceee.png)](https://addons.cdn.mozilla.net/img/uploads/previews/full/65/65132.png?modified=1322159811)

所以我不相信没有人可以访问它或没有人可以改变它。至少从客户端来说，这很容易。从另一个网站来看，它可能更棘手，并且肯定会涉及“安全漏洞”，因为它不是预期的用途。

**更新：**与此同时，至少在 Firefox 中，您甚至不需要任何插件。只需按`Ctrl`+ `Shift`+ `I`，选择*存储*选项卡，然后在最左侧的列中选择*本地存储*- 您可以在其中查看甚至编辑您在前台选项卡中拥有的站点的本地存储：

[![本地存储浏览器](../Images/7b5509238d7e803c4ebd91e2bd34c42e.png)](https://i.stack.imgur.com/SBZ9q.png)
^(Firefox 内置的本地存储浏览器（单击图片查看更大的变体）)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-15T16:43:03.473

是的，它可以...

1.  转到您要修改其本地存储的网站。
2.  输入您的控制台（我在 Chrome 或 Edge 中按 F12）。
3.  按顶部的“应用程序”选项卡。
4.  选择菜单上的 localstorage，然后选择下面的网站地址。
5.  现在，您面前有一个键和值列表。
6.  按它们下方的第一个空白行，然后在左侧输入任何键，在右侧输入您希望的任何值。

# c# - 在后面的代码中单击按钮执行 JavaScript

> ID：11246948
> 
> 赞同：3
> 
> 时间：2012-06-28T14:32:50.463
> 
> 标签：c#, asp.net

> **可能重复：**
> [如何从 c# 调用 javascript 函数](https://stackoverflow.com/questions/2693601/how-to-call-javascript-function-from-c-sharp)

有没有办法通过单击 C# 后面代码中的按钮来调用 javascript 函数？所以基本上我有一个注册表单，当您单击按钮时，所有数据都在后面的代码中处理并提交表单。但我需要执行一些 javascript，并且我需要在按钮单击和后面的代码中执行它。

所以像：

```
 protected void btnDoRegister_Click(object sender, System.Web.UI.ImageClickEventArgs e)
    {
         C# code is here doing form processing
         // Now I need to Execute javascript here.
    } 
```

这可能吗？如果可以，我将如何去做？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:37:31.013

```
protected void btnDoRegister_Click(object sender, System.Web.UI.ImageClickEventArgs e)
{
     C# code is here doing form processing
     // Now I need to Execute javascript here.
     string script = "<script type=\"text/javascript\"> functionToExecute(); </script>";
     ClientScript.RegisterClientScriptBlock(this.GetType(), "myscript", script);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:36:39.750

我有两种方法可以看到我的头顶：

首先是在 javascript 端做一些 AJAX 轮询。它可以通过 rest api 或其他方式轮询需要进行的更改，并且您的 c# 代码可以更新该更改列表。

第二种是使用 javascript socket io 实现并保持持久连接。

我强烈推荐第一个，但第二个是一个选项，具体取决于您的环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:45:05.693

由于 javascript 在客户端（浏览器）上执行，因此无法在服务器上执行 javascript。您可以在回发后执行 javascript，但很少需要。通常Javascript在客户端执行并在服务器接收请求并在服务器上执行之前执行。**这样，您就有了两个与 btnDoRegister 绑定的事件，一个在客户端执行，另一个在服务器上执行。**

在 Page_Load 上使用按钮绑定 javascript 事件。

**在代码后面**

```
btnDoRegister.Attributes.Add("onclick", "funForButton();"); 
```

在 aspx HTML 中

```
<script language="javascript" type="text/javascript">     
function funForButton()
{
   alert("About to send request to server");
}

</script> 
```

**您已经拥有的服务器事件**

```
protected void btnDoRegister_Click(object sender, System.Web.UI.ImageClickEventArgs e)
{
     C# code is here doing form processing
     // Now I need to Execute javascript here.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T14:49:05.940

如果我理解正确，您想单击按钮，让一些 javascript 执行它的操作，然后返回服务器端，执行 C# 代码并通过执行一些 javascript（再次在客户端上）完成它。

假设我做对了，那么您将不得不做 3 件事。

首先，添加 OnClientClick="return yourfunction();" 到您的 aspx 页面中的按钮。根据您是否希望执行服务器端代码，请确保 javascript 中的 yourfunction() 返回 false 或 true。

然后在 btnDoRegister_Click 中编写您的 c# 代码。最后，添加一个对会话变量的 javascript 调用，并在您的 aspx 代码中使用它。

示例：c#

```
String newScript = ""

If (Session("yourscript") = Nothing) { Session("yourscript") = "" }

newScript = String.Format("<script type=text/javascript>")

newScript = String.Format("{0}yoursecondscript()", newScript)

newScript = String.Format("{0}</script>", newScript)

Session("yourscript") = newScript 
```

然后在您的 aspx 页面中添加页面中的某处：

```
<%=Session("yourscript")%> 
```

如果您使用 Ajax，请记住放置它的位置，因为不会刷新整个页面。在这种情况下，将其放在更新框架内。

现在的顺序是： - click -> yourfunction() -> C# code -> yoursecondscript

希望这可以帮助....

# machine-learning - XOR 的最小迭代神经网络需要

> ID：11246949
> 
> 赞同：0
> 
> 时间：2012-06-28T14:32:55.517
> 
> 标签：machine-learning, artificial-intelligence, neural-network

标准反向传播解决异或问题所需的训练集的最小曝光次数是多少？另一种类型的神经网络会更快地解决它吗？

什么是最好的设置（隐藏层节点的数量，学习率）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:35:34.503

如果使用它们，它取决于网络布局、学习率和正则化参数。

你也可能对网络的初始权重感到幸运或不幸，因为在反向传播网络中它们应该被随机初始化。然而，意外开始接近局部最小值的可能性很小。

对于 XOR 函数，具有 2 个节点的单个隐藏层就足够了。

应该不需要偏置节点。也不需要正则化，因为过拟合通常不是 XOR 函数的问题。
关于学习率，我认为 0.05 是好的，但我没有确凿的证据。尝试一下，看看你是否能找到更好的价值。

Coursera“机器学习”课程中非常直观地讨论了该主题。您可能想在他们的[预览](https://class.coursera.org/ml/lecture/preview)网站上查看视频。在该页面上查找“神经网络：学习（第 5 周）”部分。

# jquery - 执行一次 keyup

> ID：11246952
> 
> 赞同：4
> 
> 时间：2012-06-28T14:33:09.520
> 
> 标签：jquery, onkeyup

当我开始输入文本框时，我正在尝试加载 gif 加载器。我将它附加到包含 keyup 上的文本框的 div 中。我遇到的问题是每次我输入一个字母时都会附加加载器，而我只想在输入第一个字母时附加一次。

```
function loader(){

    $('#contrib_search').bind('keyup', function(){
        $('#contrib_text').append('<div id="loader"></div>');
    });
} 
```

知道怎么做吗？
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-14T06:21:21.333

使用“**一个**”可以帮助：

```
function loader() {
  $('#contrib_search').one('keyup', function () {
    $('#contrib_text').append('<div id="loader"></div>');
  });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T14:38:15.327

添加加载程序后，您可以取消绑定keyup

```
function loader(){

    $('#contrib_search').bind('keyup', function(){
        $('#contrib_text').append('<div id="loader"></div>');
        $('#contrib_search').unbind('keyup');  //or $(this).unbind probably a tad faster
    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T14:36:32.160

我的建议是将加载程序硬编码到您的 HTML 代码中，然后`.show()`在`.keyup()`事件处理程序上。

然后例如在`.blur()`事件`.hide()`它并且问题消失了。

编辑：

```
var $contrib = $('#contrib_text');

$contrib.bind({
    keyup: function(){
       $contrib.find("#loader").show();
    },
    blur: function(){
       $contrib.find("#loader").hide();
    }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T14:39:18.747

也许这可以工作：

```
var pressed = false;
    function loader(){

        $('#contrib_search').bind('keyup', function(){
            if (pressed == false ){
                $('#contrib_text').append('<div id="loader"></div>');
                pressed = true;
            }
        });
    } 
```

或者不使用这个布尔值，只需调用 unbind 而不是我的行，说 press = true;

# c# - 如何从对象上下文中返回特定的 DataRow 对象？

> ID：11246953
> 
> 赞同：1
> 
> 时间：2012-06-28T14:33:09.550
> 
> 标签：c#, entity-framework, lambda, wcf-ria-services

我正在使用 Entity Framework 和 Silverlight (RIA)，并正在考虑创建一个函数来扩展 CRUD，以允许用户指定特定的列名，然后指定一个匹配的值来查明准确的记录......代码看起来像这样......

```
public IQueryable<Category> GetCategory(string theColumn, string theCriteria)
{
      return this.ObjectContext.Categories
                .Where(c => c.theColumn = theCriteria);
} 
```

获取所有类别的类似工作功能......（通过关联数据模型后构建创建）

```
 public IQueryable<Category> GetCategories()
    {
        return this.ObjectContext.Categories;
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:44:04.710

我不知道这是否解决了您的问题或仅移动了它，但您可以将谓词委托给这样的方法的客户端

```
public IQueryable<Category> GetCategory(Func<Category, IQueryable<Category>> predicate)
{
      return this.ObjectContext.Categories.Where(predicate);
} 
```

那么你可以通过这种方式调用这个方法

```
GetCategory(c => c.column=criteria)
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:12:49.600

我已经构建了类似于您要构建的东西。我使用 System.Linq.Expressions 中的表达式树进行构建。因此，我建议您使用表达式树构建您的 where 谓词，其中谓词的签名为 `Expression<Func<T,bool>>`.

下面的一些伪代码，其中 T 是 WCF RIA 实体：

```
public static class QueryHelper
{
  public static Expression<Func<T, bool>> ToPredicate<T> ( string propertyName, dynamic criteria )
    {
        ParameterExpression pe = Expression.Parameter( typeof( T ), "t" );
        Expression np = Expression.Property( pe, propertyName );
        ConstantExpression value = Expression.Constant( criteria );

        Expression e1 = Expression.Equal( np, value );

        var filter = Expression.Lambda<Func<T, bool>>( e1, pe );

        return filter;
    }
} 
```

然后可以像这样使用：

```
var selector = QueryHelper.ToPredicate<Category>("theColumn", "hello");
return this.ObjectContext.Categories.Where(selector);     

LoadOperation<Employee> loader = context.Load( context.GetEmployeesQuery()
                                        .Where( selector ) );
loader.Completed += (op) =>
  {
    if ( !op.HasErrors)
    {
    }
  }; 
```

或者

```
var selector = QueryHelper.ToPredicate<Category>("theColumn", true);
return this.ObjectContext.Categories.Where(selector); 
```

需要注意的一点是表达式 e1 = 表达式。**相等**（np，值）；在函数中。您可以将此函数扩展为 >、<、=> 等，但您需要检查您使用的属性类型是否支持该运算符。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T14:21:46.217

我像这样初始化我的上下文......

```
 NorthwindDomainContext context = new NorthwindDomainContext(); 
```

我这样称呼你的方法......

```
var selector = QueryHelper.ToPredicate<Employee>("theColumn", "hello");
        return this.context.Employees.Where(selector); 
```

另外，正如我所指出的，我实际上使用的是 Employee 而不是 Category。想法？

错误 1 ​​参数 2：无法从 'System.Linq.Expressions.Expression>' 转换为 'System.Func' C:\Code\NorthwindRIA\NorthwindRIA\Views\Employee.xaml.cs 22 49 NorthwindRIA

错误 2 'System.ServiceModel.DomainServices.Client.EntitySet' 不包含 'Where' 的定义和最佳扩展方法重载 'System.Linq.Queryable.Where(System.Linq.IQueryable, System.Linq.Expressions.Expression >)' 有一些无效参数 C:\Code\NorthwindRIA\NorthwindRIA\Views\Employee.xaml.cs 22 20 NorthwindRIA

错误 3 实例参数：无法从 'System.ServiceModel.DomainServices.Client.EntitySet' 转换为 'System.Linq.IQueryable' C:\Code\NorthwindRIA\NorthwindRIA\Views\Employee.xaml.cs 22 20 NorthwindRIA

# mysql - 在 JBoss 4.2.3 上运行时擦除 MySQL 数据库

> ID：11246954
> 
> 赞同：0
> 
> 时间：2012-06-28T14:33:11.853
> 
> 标签：mysql, jboss, ejb-3.0

我将 MySql 与 MySql Workbench 和 JBoss 4.2.3 一起使用。当 JBoss 服务器加载或停止时，整个数据库将被完全擦除。但是如果我在服务器加载后插入数据，一切正常......你知道为什么 JBoss 会有这种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:37:16.510

这可能是因为您的持久性设置，例如部署后的 create-drop，当 Jboss 启动时，它会部署您的应用程序并删除数据库并创建新的

# c++ - 重置流的状态

> ID：11246960
> 
> 赞同：9
> 
> 时间：2012-06-28T14:33:28.167
> 
> 标签：c++, state, iostream, conditional-statements

[我有一个与stackoverflow std::cin.clear() failed to restore input stream in a good state](https://stackoverflow.com/questions/4960399/stdcin-clear-fails-to-restore-input-stream-in-a-good-state)上的这个问题有点相似的问题，但是那里提供的答案对我不起作用。

问题是：如何再次将流的状态重置为“好”？

这是我的代码我如何尝试它，但状态永远不会再次设置为好。我分别使用了两条线忽略。

```
int _tmain(int argc, _TCHAR* argv[])
{
    int result;
    while ( std::cin.good() )
    {
        std::cout << "Choose a number: ";
        std::cin >> result;

        // Check if input is valid
        if (std::cin.bad())
        {
            throw std::runtime_error("IO stream corrupted");
        }
        else if (std::cin.fail())
        {
            std::cerr << "Invalid input: input must be a number." << std::endl;
            std::cin.clear(std::istream::failbit);
            std::cin.ignore();
            std::cin.ignore(INT_MAX,'\n');
            continue;
        }
        else
        {
            std::cout << "You input the number: " << result << std::endl;
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T15:05:44.927

这里的代码

```
std::cin.clear(std::istream::failbit); 
```

实际上并没有清除故障位，而是将流的当前状态*替换*`failbit`为.

要清除所有位，只需调用`clear()`.

* * *

标准中的描述有点复杂，是其他功能的结果

> `void clear(iostate state = goodbit);`
> 
> *后置条件：*如果`rdbuf()!=0`则`state == rdstate();`否则`rdstate()==(state | ios_base::badbit)`。

这基本上意味着下一次调用`rdstate()`将返回传递给`clear()`. 除非有其他问题，在这种情况下，您也可能会遇到问题`badbit`。

此外，`goodbit`实际上根本不是一点点，而是具有零值以清除所有其他位。

要*仅*清除一个特定位，您可以使用此调用

```
cin.clear(cin.rdstate() & ~ios::failbit); 
```

但是，如果您清除一个标志而保留其他标志，您仍然无法从流中读取。所以这种用途是相当有限的。

# jquery - jquery ajax() 异步错误

> ID：11246961
> 
> 赞同：13
> 
> 时间：2012-06-28T14:33:34.577
> 
> 标签：jquery, ajax, asynchronous

我有问题..

```
for(a=1;a<10;a++){
    $(".div").append("<div id="+a+"></div>")
        $.ajax({
              url: "file.php",
              data: "a="+a,
              type: "POST",
              async: false,
              success: function(data) {
                $("#"+a).html(data);
              }
        });

}
 $("div").click(function(){
        alert("it works");
 }); 
```

问题是：我没有把`async: false`来自*file.php*的数据放在最后一个 div 中，所以 id 为 9 但现在有`async: false`- 所以数据在每个 div 中，所以这很好

但如果我想在通过 ajax 加载时单击它不起作用（仅在完成所有 ajax-es 后）

如何解决这个问题？（也许错误的是我在使用 ajax。我可以使用 getJSON 等。）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-28T14:38:47.150

如果您希望用户能够在 ajax 调用运行时使用该界面，您应该将您`async`的`true`. James Allardice 还指出，在这种情况下`id`，当返回 ajax 调用时，您需要使用 javascript 闭包来保留原始值。有关 javascript 闭包的更多信息，请查看[how-do-javascript-closures-work](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)，这是在 stackoverflow 上找到的一个非常好的问题。

```
for(id = 1; id < 10; id++){
    $(".div").append("<div id='" + id + "'></div>");

    (function(id) {
        $.ajax({
            url: "file.php",
            data: "a=" + id,
            type: "POST",
            async: true,
            success: function(data) {
                $("#"+ id).html(data);
            }
        });
     }(id));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T09:42:59.093

一个很好的解决方案是使用递归函数。

```
function appendDivs(limit, count) {
    count = count || 1;
    if (count <= limit) {
        $(".div").append("<div id=" + count + "></div>");
        $.ajax({
            url: "file.php",
            data: "a=" + count,
            type: "POST",
            async: true,
            success: function(data) {
                $("#" + count).html(data);
                appendDivs(limit, count + 1);
            },
            error: function(e) {
                alert('Error - ' + e.statusText);
                appendDivs(limit, count + 1);
            }
        });
    } else {
        return false;
    }
}
appendDivs(10); 
```

# python - 如何指定方法参数必须属于某个类

> ID：11246964
> 
> 赞同：0
> 
> 时间：2012-06-28T14:33:58.200
> 
> 标签：python

所以我有这样的课：

```
 class Encoder(object):

     movie = None

     def __init__(self, movie_instance):
         self.movie = movie_instance

     def encode_profile_hd(self):
         print "profile 1"

     def encode_profile_sd(self):
         print "profile 2" 
```

如何指定传递给构造函数的 movie_instance 参数必须是 Movie 类？

我试过了：

```
def __init__(self, Movie movie_instance): 
```

但这不起作用。对不起，如果这很明显。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:41:12.050

Python usually relies on [duck-typing](http://docs.python.org//glossary.html#term-duck-typing), and it is considered bad style to artificially restrict the input parameters of your functions as this makes the code less flexible as it could be. Simply document the requirements clearly, and if the parameters do not conform to the requirements, the code will fail anyway.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T14:35:26.073

你可以使用`isinstance`它。

```
def __init__(self,movie_instance):
    if(not isinstance(movie_instance, Movie)):
         raise ValueError("movie_instance must be an instance of class Movie") 
```

这将适用于`Movie`实例以及任何继承自`Movie`.

值得注意的是，很多人会说，在 Python 中，这个习语不应该经常使用。如果某些东西看起来像电影，闻起来像电影（电影有气味吗？）并且像电影一样播放，为什么不把它当作电影呢？（换句话说，尝试像电影一样使用该对象，并处理如果它不起作用而引发的异常）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:38:05.717

Python 是一种动态类型语言，您不能像在静态类型语言中那样预先声明变量的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T14:46:35.537

构造函数不是`__init__`it's `__new__`。进一步注意，`__del__`它不是析构函数。

Python 的哲学是鸭子类型（除非使用 ABC），这意味着所有可以表现得像鸭子和像鸭子一样嘎嘎叫的东西都可能是鸭子。

*显式类型检查违反数据对象模型，除非*您有特定情况，否则应避免。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T14:49:14.287

你不想那样做。您应该做的是记录您的功能的要求。这样，只要实现了所需的属性，某人就可以构建一个不同的类并将其用作函数的参数。

一个例子是[迭代器](http://docs.python.org/library/stdtypes.html#iterator-types)。任何具有`__iter__()`or`next()`函数的对象都可以用作迭代器。另一个例子是[文件对象](http://docs.python.org/library/stdtypes.html#bltin-file-objects)。任何具有文件属性的对象都可以用作函数参数中的文件。[StringIO](http://docs.python.org/library/stringio.html)是此类对象的一个​​示例。

# c# - 奇怪的 Linq 问题

> ID：11246967
> 
> 赞同：0
> 
> 时间：2012-06-28T14:34:10.227
> 
> 标签：c#, .net, linq

以下两者有什么区别？第一个有效，但第二个错误指​​出找不到“选择”。我不明白为什么。

第一个：

```
Office Office = 
    cHelper.Offices
           .Where(o => o.IP3rdOctet  == OSHelper.Get3rdOctetOfMyIP())
           .FirstOrDefault(); 
```

第二：

```
Office Office = 
    from o in cHelper.Offices
                     .Where(o => o.IP3rdOctet == OSHelper.Get3rdOctetOfMyIP())
                     .FirstOrDefault()
    select o; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:37:32.660

这**不是**`IEnumerable`or ，它是 的一个`IQueryable`实例`Office`：

```
cHelper.Offices.Where(o => o.IP3rdOctet 
                == OSHelper.Get3rdOctetOfMyIP()).FirstOrDefault() 
```

你不能要求`select`那个。删除对 的调用`FirstOrDefault()`，然后您将能够选择结果（如果没有项目符合您的条件，则该结果将为空）。

如果您仍然需要该`FirstOrDefault`项目，则将查询放在括号中并附加`FirstOrDefault()`如下：

```
Office Office = (from o in cHelper.Offices
                 where o.IP3rdOctet == OSHelper.Get3rdOctetOfMyIP()
                 select o).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:37:08.040

`select`与 a 一起使用`IEnumerable`，您尝试在之后使用 select`FirstOrDefault`

像这样重写：

```
Office Office = (from o in cHelper.Offices
                where o.IP3rdOctet == OSHelper.Get3rdOctetOfMyIP()
                select o).FirstOrDefault(); 
```

# android - 使用 Robotium 测试 PreferenceActivity

> ID：11246968
> 
> 赞同：2
> 
> 时间：2012-06-28T14:34:18.840
> 
> 标签：android, unit-testing, robotium

我是使用 Robotium 的新手，似乎在任何地方的论坛上都找不到任何答案。我有一个要测试的 PreferenceActivity。问题是每当我需要单击首选项时，我的单元测试都会失败。

更具体地说，我有一个 CheckBoxPreference 我正在运行一些测试。我想验证当 CheckBoxPreference 被选中时，屏幕上有某些首选项已启用（未变灰），反之亦然。截至目前，我什至无法使用`searchText()`/`waitForText()`方法找到首选项（这是屏幕上的第一个首选项）。在`clickOnView()`从`getView()`.

看来我现在能做的最好的事情就是使用 Android 的`setChecked()`方法来操纵 CheckBoxPreference 的状态。我假设以这种方式进行测试*是*可能的，但是我正在研究一些基本的东西。由于 PreferenceActivity 也是 ListActivity，因此我也尝试搜索有关测试 ListActivity 的相关问题，但无济于事。

以下几个链接为我使用 PreferenceActivities 和 Robotium 提供了一个良好的开端。

*   [http://fyrecloud.com/index.php?topic=5.0](http://fyrecloud.com/index.php?topic=5.0)
*   [http://code.google.com/p/robotium/issues/detail?id=250](http://code.google.com/p/robotium/issues/detail?id=250)

这是我正在使用的代码：

```
public void testEnabledChecked() throws Exception {
    CheckBoxPreference enabled = PrefTestingUtils.getCheckBoxPreference(mSolo, mActivity, 
            (String) getVal("KEY_ENABLED"));
    EditTextPreference recipient = PrefTestingUtils.getEditTextPreference(mSolo, mActivity, 
            (String) getVal("KEY_RECIPIENT"));
    EditTextPreference title = PrefTestingUtils.getEditTextPreference(mSolo, mActivity, 
            (String) getVal("KEY_TITLE"));
    ListPreference interval = PrefTestingUtils.getListPreference(mSolo, mActivity, 
            (String) getVal("KEY_INTERVAL"));

    // ensures that the preference is unchecked
    if (!enabled.isChecked()) {
        Log.d(TAG, "Enabled preference unchecked, clicking on it");

        // mSolo.clickOnView(enabled.getView(null, null)); // Attempt #1
        // mSolo.clickOnText("Enabled"); // Attempt #2
        // mSolo.clickOnCheckBox(0); // Attempt #3
        // mSolo.searchText("Enabled"); // cannot find view
    }

    assertTrue(enabled.isChecked()); // AssertionFailedError here
    assertTrue(recipient.isEnabled());
    assertTrue(title.isEnabled());
    assertTrue(interval.isEnabled());
} 
```

我已经验证 PrefTestingUtils 函数确实返回了对首选项的有效引用。所有 PrefTestingUtils 函数都与此类似：

```
public static CheckBoxPreference getCheckBoxPreference(Solo solo, 
        PreferenceActivity activity, String key) {
    if (solo == null || activity == null || key == null) {
        Log.d(TAG, "getCheckBoxPreference::Null parameter");
        return null;
    }

    Preference p = activity.findPreference(key);
    if (p instanceof CheckBoxPreference) {
        return (CheckBoxPreference) p;
    }
    return null;
} 
```

任何人都可以提供的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:52:57.450

所以这就是我想出的似乎有效的方法。

首先，您需要获得对 CheckBoxPreference 的引用：

```
private CheckBoxPreference getCheckBoxPref(String key) {
    ArrayList<ListView> currentListViews = mSolo.getCurrentListViews();
    // get the lone ListAdapter for the PreferenceActivity
    ListAdapter listAdapter = currentListViews.get(0).getAdapter();

    int cnt = listAdapter.getCount();
    for (int i = 0; i < cnt; i++) {
        Object o = listAdapter.getItem(i);
        if (o instanceof CheckBoxPreference) {
            CheckBoxPreference pref = (CheckBoxPreference) o;
            if (pref.getTitle().equals(key)) {
                return pref;
            }
        }
    }
    return null;
} 
```

接下来，您可以使用带有首选项标题的 clickOnText() 方法单击首选项。最后，我发现你点击后要睡一段时间。我已`MINI_SLEEP`定义为 250 毫秒。

```
public void testCheckBoxEnabled() {
    CheckBoxPreference pref = getCheckBoxPref("Enabled");
    assertNotNull(pref);
    assertFalse(pref.isChecked());
    mSolo.clickOnText("Enabled");
    mSolo.sleep(MINI_SLEEP);
    assertTrue(pref.isChecked());
} 
```

希望这对任何需要它的人有所帮助。

# ios - 以编程方式将 UIBarButtonItem 设置为 UIBarButtonSystemItem

> ID：11246969
> 
> 赞同：4
> 
> 时间：2012-06-28T14:34:19.320
> 
> 标签：ios, uibarbuttonitem

我可以将系统项分配给 a`UIBarButtonItem`而无需重新创建它吗？仅在现有按钮上调用[initWithBarButtonSystemItem](http://developer.apple.com/library/ios/documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html#//apple_ref/occ/instm/UIBarButtonItem/initWithBarButtonSystemItem%3atarget%3aaction%3a)似乎对我不起作用。

[这](https://github.com/zSprawl/NativeControls/blob/044a147e2469212a3524c897e5fd634bf5a129ed/Cordova/Plugins/NativeControls.m#L473)是我尝试使其工作的代码。我正在尝试使用 PhoneGap 改进对 iOS 的本机控件支持。该插件允许毫无问题地更改标题/图像，但我必须弄清楚如何将系统提供的图标分配给现有按钮。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T14:41:21.393

I took a look at your code, didn't find your use of `initWithBarButtonSystemItem`. However, this is what I'm doing in a similar case with native iOS programming:

```
UIBarButtonItem *myButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(done)];

self.navigationItem.rightBarButtonItem = myButton;
[myButton release]; 
```

This works correctly for me. I'm not familiar with PhoneGap and it may or may not change things however.

# algorithm - 在线段之间放置一个点 - 一种算法

> ID：11246975
> 
> 赞同：1
> 
> 时间：2012-06-28T14:34:40.473
> 
> 标签：algorithm, math

我正在尝试解决一个问题，在给定大量线段的情况下，我必须尝试以最佳方式放置一个点，以使每条线到该点的总距离最小（即找到最佳位置）。点线距离可以从一条线上的任何位置到该点，也可以通过其他线段计算距离（比如有两条线，（0,0）到（0,1）和（1,0）到（1,1）我的观点是（2,0.5），我可以计算到第一行“通过”第二行的距离，我希望我足够清楚）。这些线都具有整数坐标作为端点，但该点可以位于平面上的任何位置。

我对此进行了很多思考，但无法提出一般策略。有人可以指点我一些阅读材料或为此解释算法吗？我在其他地方看到过类似的事情，所以这是某种一般性的问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:57:58.170

根据您的描述，最短线距离需要根据线段定义的*区域*单独讨论。例如，如果线段是 (0,0) 到 (0,1)，那么我们必须将空间分割成三个子空间（d 表示最小距离函数）：

*   y < 0: d = sqrt(x^2 + y^2)
*   0 < y < 1：d = |x| （由该线段定义的*区域）*
*   1 < y: d = sqrt(x^2 + (y-1)^2)

函数 d 具有[凸属性](http://en.wikipedia.org/wiki/Convex_function)，因此您可以通过运行一些标准的凸优化软件来解决优化问题，[cvx 软件包](http://cvxr.com/cvx/download/)是一个不错的选择。有关凸优化理论的更多信息，[凸优化](http://www.stanford.edu/~boyd/cvxbook/)是一本值得参考的好书。

* * *

如果您不费心通过一些优化求解器来获得结果，那么基于启发式求解替代版本可能会简单得多。

请注意，如果线段在两端无限延伸，问题将是微不足道的。所以我能想到的是将线段*视为*线，但在端点处添加惩罚距离。话虽如此，以下指标满足需求：

L = [(ax + by - c)^2] + [(x-x1)^2 + (x-y1)^2] + [(x-x2)^2 + (y-y2)^2]

这里 (x, y) 是你需要决定的点，ax* + by* = c 定义线，(x1,y1), (x2,y2) 是两个端点。因此，第一项 [...] 是到线的平方距离；第二和第三 [...] 项是到两个端点的平方距离。

最小化 L 意味着：

*   更喜欢依赖或靠近线；
*   更喜欢驻留在*段*定义的区域中；

它属于*最小二乘距离*问题，因此您可以通过简单地求解一组线性方程来获得解决方案。这也是我在 L 中坚持二次形式的原因。

当然，这只是一种启发式方法，可以导致更简单的解决方案。就视觉认知而言，术语 L 的其他表述可能会导致更好的结果。您可以考虑使用不同的 L，然后根据视觉结果选择最佳的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T00:38:44.380

我有一个有效的算法，（我在谷歌上找到了它），它似乎很疯狂。有人可以解释一下为什么会这样吗？谢谢..

```
 To solve this, we start by placing the point at any random location and moving 
 it around in various directions, decreasing the amount that we move it by.To begin
 place the point at any location. Next move it in large increments (20) about
 10 times.Now we decrease the amount by which we move by an amount to 1/10;Running 
 the whole placement process about 5   times, decreasing the amount by
 which we move the power source each time, will give us the best location 
 for the point. 
```

# php - 无法连接到本地 joomla 数据库

> ID：11246979
> 
> 赞同：2
> 
> 时间：2012-06-28T14:34:50.907
> 
> 标签：php, mysql, joomla

我正在尝试`introtext`从 mysql 显示到一个模块中，但我无法连接到本地数据库...有什么建议吗？

```
$db =& JFactory::getDBO(); 
$query = "SELECT introtext FROM jmo_content WHERE Id=127";
mysql_query($query); 
```

输出：

> 警告：mysql_query() [function.mysql-query]：无法连接到本地 MySQL 服务器

有什么帮助吗？主题越基本，我们找到的信息就越少！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:44:57.713

尝试使用 joomla 方法而不是`mysql_query()`

```
$db =& JFactory::getDBO(); 
$query = "SELECT introtext FROM #__content WHERE Id=127";
$db->setQuery($query);
$text= $db->loadResult(); 
```

一般来说，[Joomla 文档](http://docs.joomla.org/Accessing_the_database_using_JDatabase#loadResult.28.29)是你的朋友

# c++ - 如何捕获 Eigen 的 MatrixXd::resize() 函数引发的异常？

> ID：11246980
> 
> 赞同：-5
> 
> 时间：2012-06-28T14:34:54.983
> 
> 标签：c++, exception-handling, eigen

为什么我不能捕捉到这个异常？

我的（客户）代码：

```
Eigen::MatrixXd FFs ;
try
{
  FFs.resize( NUMPATCHES, NUMPATCHES ) ;
}
catch( int e )
{
  error( "Not enough memory :(" ) ;
  return ;
} 
```

引发异常的特征代码低了几级..

```
    EIGEN_STRONG_INLINE void resize（索引行，索引列）
    {
        内部::check_rows_cols_for_overflow(rows, cols);
        m_storage.resize(rows*cols, rows, cols);
    }

```

哪个电话

```
    void resize(DenseIndex size, DenseIndex rows, DenseIndex cols)
    {
      如果（大小！= m_rows*m_cols）
      {
        内部::conditional_aligned_delete_auto(m_data, m_rows*m_cols);
        如果（大小）
          m_data = internal::conditional_aligned_new_auto(size);
        别的
          m_data = 0;
        EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN
      }
      m_rows = 行；
      m_cols = 列；
    }

```

粗体线是在该行之前被击中的行：

```
throw std::bad_alloc(); 
```

被击中，这发生在`internal::conditional_aligned_delete_auto(m_data, m_rows*m_cols);`函数调用内部的某个地方。

为什么我不能从我的客户端代码中捕捉到这个异常？是因为 Eigen 库没有用 标记`resize`函数`throws`吗？如何使用 Eigen 库使此代码`malloc`顺利地从此类错误中恢复？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T14:38:56.543

您必须捕获正确的异常类型。采用：

```
catch( std::exception &e ) 
```

代替：

```
catch( int e ) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-28T14:37:13.167

```
catch( std::bad_alloc& e) {
} 
```

应该有帮助

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-28T14:38:27.270

您正在捕获 type 的异常`int`，而实际抛出的异常是 type `std::bad_alloc()`。

```
catch (std::bad_alloc& e)
{
    exit(1); // or some other appropriate behavior
} 
```

可能是你想要的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T16:16:52.153

问题是被抛出的异常`resize()`是`std::exception`。但是，问题中的代码明确尝试捕获 type 的异常`int`。这将不起作用，并且该`catch`块将被传递。

解决此问题的一种方法是使用通用的“catch all”块：

```
try
{
  FFs.resize( NUMPATCHES, NUMPATCHES ) ;
}
catch(...) // catch all exceptions, no type declaration required
{
  error( "Not enough memory :(" ) ;
  return ;
} 
```

语句中的省略号`catch(...)`意味着您不必解析异常类型。无论类型如何，都会捕获所有异常。

但是，这似乎不推荐。 [这可能类似于`catch( Exception e )`Java 和 C# 中的通用语句，由于](https://stackoverflow.com/questions/426346/is-this-a-bad-practice-to-catch-a-non-specific-exception-such-as-system-exceptio)[此处](https://stackoverflow.com/a/426356/)所述的原因，它们在这些语言中不受欢迎。

# xcode - Xcode 4.3.3 和 Lion 10.7.4 让操作系统陷入停顿

> ID：11246983
> 
> 赞同：1
> 
> 时间：2012-06-28T14:35:08.900
> 
> 标签：xcode, macos, osx-lion, xcode4.3

我有**1.6 GHz Intel Core 2 Duo**和**2GB 667 MHz DDR2 SDRAM**的相对论旧 Macbook Air 。最近升级到**Lion 10.7.4**和**Xcode 4.3.3**。不确定 %100，但经验证据似乎表明，当我开始使用 Xcode 时，我的操作系统变得如此缓慢以至于无法使用，即刷新率非常糟糕，我可以看到光标的关键帧在屏幕上移动。

我已经完成了磁盘实用程序的修复工作但无济于事（不是我认为它会有所帮助）。关于如何治愈这种疾病的任何想法？

* * *

编辑

只是在看内存升级选项。下面的图片是否意味着我没有任何东西？

![在此处输入图像描述](../Images/379b6375e71c974addc7e94eb1656e05.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:44:12.570

2 Gb 和 2 个内核根本不足以运行 Lion，更不用说进行任何合理密集的开发工作了。

# objective-c - Objective Cconvert id(type) to NSNumber:Error

> ID：11246984
> 
> 赞同：0
> 
> 时间：2012-06-28T14:35:13.333
> 
> 标签：objective-c, casting

我想将 id* 转换为 NSNumber *

试试这个 `unsigned int ShortValue = [(NSNumber *)idObject unsignedShortValue];`

但这不是编译

`Cast of an indirect pointer to an Objective-C pointer to 'NSNumber *' is disallowed with ARC`

任何想法如何做到这一点。基本上 id* 对象将是我的方法的参数，第二个参数将是这个 id* 对象的类型信息，然后在这个方法中，我正在对它执行类型特定的方法，就像上面的一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:38:15.317

`id`是一种半原始类型，因为它在 objc.h 中声明为

```
typedef struct objc_object {
    Class isa;
} *id; 
```

创建 id 对象时，不要使用“*”，因为那是指向对象的指针，所以基本上不要这样做：

```
id *someObject; 
```

正确的语法是这样的：

```
id someObject; 
```

希望这可以帮助！

--------编辑------我尝试了您使用的代码：

```
unsigned int ShortValue = [(NSNumber *)idObject unsignedShortValue]; 
```

它编译得很好。我认为错误是您如何创建`idObject`.

- - - - -编辑 - - - - -

这是一个苹果文档：http `id`: [//developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html)`isa` ，这里有两个关于指针 的好资源： [isa在objective-中是什么意思- C？](https://stackoverflow.com/questions/3405224/what-does-isa-mean-in-objective-c)，[http://cocoasamurai.blogspot.com/2010/01/understanding-objective-c-runtime.html](http://cocoasamurai.blogspot.com/2010/01/understanding-objective-c-runtime.html)。在第二个链接中，滚动到文章的前三分之一以查找关于 的信息`isa*`。希望这可以帮助！

# javascript - 在字符串的开头和结尾添加一个字符

> ID：11246991
> 
> 赞同：37
> 
> 时间：2012-06-28T14:35:37.057
> 
> 标签：javascript, regex

我正在使用一个平台，它使用类似 JavaScript 的语法并允许使用正则表达式转换我的值。

我需要在字符串的开头和结尾添加一个单引号，该字符串将始终包含 9 个字符。

IE：

`123456789`应转换为`'123456789'`

我应该使用什么表达方式？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-28T14:37:22.637

您不需要正则表达式。

```
str = "123456789";

str = "'" + str + "'"; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-09-22T18:17:39.370

尽管这个问题被问得有点早，但是新定义的 ES6 中`backticks`称为[*Template Literals*](https://www.ecma-international.org/ecma-262/6.0/#sec-template-literals)的标准为使用更简单的语法解决这个问题提供了新的可能性：

```
const str = '123456789';
const wrapped = `'${str}'`; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-28T14:37:14.760

如果它像Javascript，你可以做类似的事情......

```
var myString = "'" + oldString + "'"; 
```

oldString 是你的 123456789

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-01T09:02:33.157

```
str = "123456789";
str = str.replace(/^/,"'").replace(/$/,"'")
console.log(str)
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T14:38:19.343

您可以使用文字`\`\'123456789\'。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-10T03:10:14.903

为什么不强制转换为 String 类型：

```
var strValue = String(123456789); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-29T08:47:09.960

或者使用 lodash [`_.pad`](https://lodash.com/docs/4.17.11#pad)。

```
var str = '123456789';
console.log(_.pad(str, 11, '\''));
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.js"></script>
```

# sql-server - SQL Server - 查询执行索引扫描而不是查找

> ID：11246994
> 
> 赞同：1
> 
> 时间：2012-06-28T14:35:42.893
> 
> 标签：sql-server, indexing

我正在使用 Lucene 对 CMS 的内容进行索引，因此我扩展了 SQL Server 数据库模式以添加“IsIndexed”位列，因此 Lucene 索引器可以找到一段尚未出现的内容索引。

我在表中添加了一个索引，`Content`因此对列的查找`IsIndexed`应该更快。这是数据库的样子：

```
CREATE TABLE Content (
    DocumentId bigint,
    CategoryId bigint,
    Title nvarchar(255),
    AuthorUserId bigint,
    Body nvarchar(MAX),
    IsIndexed bit
)
CREATE TABLE Users (
    UserId bigint,
    UserName nvarchar(20)
) 
```

存在以下索引：

```
Content (
    PK_Content (Clustered) : DocumentId ASC
    IX_CategoryId (Non-Unique, Non-Clustered) : CategoryId ASC
    IX_AuthorUserId (Non-Unique, Non-Clustered) : AuthorUserId ASC
    IX_Indexed_ASC (Non-Unique, Non-Clustered) : IsIndexed ASC, DocumentId ASC
    IX_Indexed_DESC (Non-Unique, Non-Clustered) : IsIndexed DESC, DocumentId ASC
)

Users (
    PK_Users (Clustered) : UserId
) 
```

这是用于查找非索引内容的查询：

```
SELECT
    TOP 1
    Content.DocumentId,
    Content.CategoryId,
    Content.Title,
    Content.AuthorUserId,
    Content.Body
    Users.UserName
FROM
    Content
    INNER JOIN Users ON Content.AuthorUserId = Users.UserId
WHERE
    IsIndexed = 0 
```

但是，当我运行它时，实际执行计划会报告 PK_Content 的聚集索引扫描以及 PK_Users 的聚集索引搜索。查询执行大约需要 300 毫秒。

当我修改查询以删除 Users.UserName 字段和用户内部联接时，查询需要大约 60 毫秒才能运行，并且没有针对 PK_Content 的聚集索引扫描，只有针对 PK_Content 的聚集索引搜索。

我在为列添加降序索引之前和之后都尝试了这个`Content.IsIndexed`，我还添加`Content.DocumentId`了 IX_Indexed 索引，但没有任何区别。

我究竟做错了什么？我已经制作了所有必要的索引（然后是一些）。Content 表有数十万行，Users 表也是如此，所以我不明白为什么优化器会选择扫描。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:42:53.147

`IsIndexed`使用字段和字段向 Content 添加索引，`AuthorUserId`然后它应该进行查找。根据您的 SQL Server 版本，您可以添加一条`INCLUDE`语句，其中包含您在 select 中使用的字段，以获得更快的速度。

> IX_Indexed_AuthorUserId（非唯一、非集群）：IsIndexed、AuthorUserId

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:48:13.127

如此低选择性列上的索引（只有两个值 0 和 1）总是会被忽略，请参阅[临界点](http://www.sqlskills.com/BLOGS/KIMBERLY/category/The-Tipping-Point.aspx)。一种选择是将它作为聚集索引中最左边的键移动，并使 DocumentId 上的主键约束成为非聚集索引：

```
CREATE TABLE Content (
    DocumentId bigint,
    CategoryId bigint,
    Title nvarchar(255),
    AuthorUserId bigint,
    Body nvarchar(MAX),
    IsIndexed bit,
    constraint pk_DocumentId primary key nonclustered (DocumentId)
)

create unique clustered index cdxContent on Content (IsIndexed, DocumentId); 
```

另一种选择是创建过滤覆盖索引：

```
create unique index nonIndexedContent on Content (DocumentId)
  include (CategoryId, Title, AuthorUserId, Body)
  where IsIndexed = 0; 
```

第二个选项可能会复制很多内容。就个人而言，我会选择第一个选项。

# ruby - 带有持续时间的重复计划的宝石

> ID：11246995
> 
> 赞同：0
> 
> 时间：2012-06-28T14:35:46.463
> 
> 标签：ruby, gem, recurring, recurring-events

我正在构建一个资产跟踪器。在我的应用程序中，我有“资产”，用户在周三上午 8 点到周五上午 8 点签出一段时间现在我希望这也能重复出现。因此，在接下来的 5 周内，每周从 8 日星期三到 8 日星期五进行定期预订应该是可行的。我稍后会询问我想检查预订是否与另一个此类定期预订或非定期预订。

我发现 ice_cube 对于重复事件非常棒，但没有持续时间的概念。处理持续时间的最干净的方法是什么？当然，我说的不是最终结束持续时间，而是循环持续时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:27:53.163

'ice_cube' 允许您在初始化方法中以秒为单位指定一个 :duration 参数，以使计划具有重复的持续时间。

我之前错过了。这应该可以解决问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T15:28:58.497

您可以使用 cron 作业来处理重复性任务。查看[每当](https://github.com/javan/whenever)宝石。还可以看看这个使用 When 的[Railscast](http://railscasts.com/episodes/164-cron-in-ruby/)。

从何时开始：

```
every 3.hours do
  runner "MyModel.some_process"
  rake "my:rake:task"
  command "/usr/bin/my_great_command"
end

every 1.day, :at => '4:30 am' do
  runner "MyModel.task_to_run_at_four_thirty_in_the_morning"
end

every :hour do # Many shortcuts available: :hour, :day, :month, :year, :reboot
  runner "SomeModel.ladeeda"
end 
```

# android - 视图未附加到窗口管理器（解决方案是什么？）

> ID：11246996
> 
> 赞同：8
> 
> 时间：2012-06-28T14:35:48.507
> 
> 标签：android, android-view, android-dialog, illegalargumentexception

我从我的应用程序中收到了数百个错误报告，所有这些报告都是一样的。这真的很烦人，因为在我的测试设备（HTC Wildfire、Galaxy S I-II-III、Galaxy Mini、Galaxy Tab 10）中，这个错误从未发生过，无论是对我还是我的测试伙伴来说，看起来用户所做的事情与我们不同。

正因为如此，我不能给你太多关于这种情况的信息，我看到一件事，它是一个对话框的关闭，我实际上从不通过代码调用。

这是错误：

```
java.lang.IllegalArgumentException: View not attached to window manager
at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:587)
at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:324)
at android.view.WindowManagerImpl$CompatModeWrapper.removeView(WindowManagerImpl.java:151)
at android.app.Dialog.dismissDialog(Dialog.java:328)
at android.app.Dialog$1.run(Dialog.java:119)
at android.app.Dialog.dismiss(Dialog.java:313)
at android.app.Dialog.cancel(Dialog.java:1113)
at hu.kulcssoft.ingyenkonyv.reader.Reader$JavaScriptInterface$1.run(Reader.java:199)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

有人可以帮助我吗？由于这个问题，我每周收到 30-40 份错误报告，我真的无法弄清楚为什么会发生这种情况。

所有建议将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-28T14:58:07.033

关闭您的`onFinish`或`onDestroy`启动活动中的对话框。

或/和

不要让您的活动处理方向更改。

您可能会在这些答案中找到一些帮助： [java.lang.IllegalArgumentException: View not attach to window manager](https://stackoverflow.com/questions/2745061/java-lang-illegalargumentexception-view-not-attached-to-window-manager)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-16T12:11:35.787

```
 @Override
            public void onConfigurationChanged(Configuration newConfig) {
                // TODO Auto-generated method stub
                super.onConfigurationChanged(newConfig);
                YourProgressDialog.dismiss();
            } 
```

同样，您可以在活动的 onFinsh() 和 OnDestroy() 或 OnBackPressed() 上使用它，具体**取决于错误的上下文。**

# c++ - 自定义系统对话框 - Windows Mobile 6.5

> ID：11246998
> 
> 赞同：0
> 
> 时间：2012-06-28T14:35:56.530
> 
> 标签：c++, windows, qt4, windows-mobile-6.5

我试图通过关闭该通知并显示我的来覆盖系统对话框（系统声音）。问题： 1-如何从系统关闭通知对话框 2-如何获取启动通知的密钥（音量键） 3-显示我的 好吧，我已经在谷歌上搜索了这个问题，但我无法获得任何进展：我的应用程序是基于 Qt 的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:17:20.443

首先我需要一个挂钩键盘。这个链接是我现在正在尝试的：http: [//www.codeproject.com/Articles/12154/Keyboard-hooks-in-WinCE](http://www.codeproject.com/Articles/12154/Keyboard-hooks-in-WinCE) 我正在研究并根据我的需要调整这篇文章。第二：我需要自定义系统通知（音量控制）：我将应用这种方法。那么我会通知结果