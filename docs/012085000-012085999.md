# StackOverflow 问答 12085000-12085999

# asp.net-mvc-3 - 在 IIS V6 上部署 ASP.NET MVC3 应用程序未指向所需的控制器操作

> ID：12085005
> 
> 赞同：0
> 
> 时间：2012-08-23T05:01:49.730
> 
> 标签：asp.net-mvc-3, iis-6

在 VS2010 中，我将我的 asp.net mvc3 Web 应用程序发布为文件系统，在 IIS 管理器上，我创建了一个新的虚拟目录（文件系统）并创建了一个新网站。但是浏览网站并没有将我重定向到所需的控制器操作。谁能建议我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:00:59.210

默认情况下，IIS6 不支持无扩展名 url。如果要使用此类 url，则必须配置通配符映射。否则，您将需要修改您的路由，以便在与 IIS 中的 aspnet_isapi 过滤器关联的所有 url 中附加一个扩展名。

这是您可以查看的指南：[IIS 6 上的 ASP.NET MVC 3 Extensionless URLs](http://haacked.com/archive/2010/12/22/asp-net-mvc-3-extensionless-urls-on-iis-6.aspx)

# android - android 模拟器是否总是在 APKExpansionPolicy 检查中为 URL 返回 null？

> ID：12085008
> 
> 赞同：0
> 
> 时间：2012-08-23T05:02:18.707
> 
> 标签：android, android-lvl

我正在尝试执行`APKExpansionPolicy`检查，以便获取要下载的文件的 URL 以进行自定义下载。我放了我的APK，让它处于未发布状态，上传了一个扩展文件，然后用模拟器测试做LVL调用。它返回（无错误），当我将 google play 测试部分中的选项更改为始终返回有效或错误时，我会看到预期的结果。但是每次，无论我做什么，额外的字符串（url，文件名）都没有填写（null）。

我想知道我是否正在尝试在模拟器中做一些它不做的事情。我还尝试了不同版本的模拟器 2.3.3、4.0，结果相同。

```
private class MyLicenseCheckerCallback implements LicenseCheckerCallback {
    public void allow(int reason) {
        if (isFinishing()) {
           // Don't update UI if Activity is finishing.
           return;
        }
        // Should allow user access.
        String url = policy.getExpansionURL(APKExpansionPolicy.MAIN_FILE_URL_INDEX);
        String expansionFileName = policy.getExpansionFileName( APKExpansionPolicy.MAIN_FILE_URL_INDEX );
        long expansionFileSize = policy.getExpansionFileSize( APKExpansionPolicy.MAIN_FILE_URL_INDEX );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:40:10.110

凌晨 2 点 30 分，我找到了答案……

我基本上遵循 Android 许可教程，但我使用的是 APKExpansionPolicy。
这没有用：

```
policy = new APKExpansionPolicy(this, new AESObfuscator(SALT, getPackageName(), deviceId)); 
```

这确实：

```
policy = new APKExpansionPolicy(getApplicationContext(), new AESObfuscator(SALT, getPackageName(), deviceId)); 
```

Google Play 现在传回我的扩展的 URL、大小和文件名。这是上下文中的代码：

```
String deviceId = Secure.getString(getContentResolver(), Secure.ANDROID_ID);

// Library calls this when it's done.
mLicenseCheckerCallback = new MyLicenseCheckerCallback();

policy = new APKExpansionPolicy(getApplicationContext(), new AESObfuscator(SALT, getPackageName(), deviceId));

// Construct the LicenseChecker with a policy.
mChecker = new LicenseChecker(this, policy,base64key);

mChecker.checkAccess(mLicenseCheckerCallback); 
```

# c# - 包含在实体框架 4.1 中

> ID：12085010
> 
> 赞同：0
> 
> 时间：2012-08-23T05:02:27.880
> 
> 标签：c#, entity-framework-4.1

假设我有 3 个实体 Country 、 State 和 City 。关系是 City->State->Country。现在我有搜索查询

```
 return container.Countries.Include("States.Cities")
.Where(c=>c.States.Sum(s.Population)>10000)
.Search(filter)        
.Skip(startIndex)    
.Take(itemCount)
.ToList(); 
```

我在上述查询中包含所有州的城市，但我想在查询的末尾包含它，即在**Take**方法之后和**ToList**方法之前。意味着假设查询返回 50 条记录，我只想为这 50 条记录包含城市到州并非针对上述查询中的所有国家。有人可以帮助我如何做到这一点吗？任何帮助都会非常明显。这只是虚拟查询，我想从性能的角度这样做。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:23:03.150

您是否忘记`System.Data.Entity`为您的代码导入命名空间？看看这个

[如何在 OfType() 之后使用 Include()？](https://stackoverflow.com/questions/12085353/how-to-use-include-after-oftype)

无论如何，我认为您的代码没问题。之前的所有方法`ToList`都将返回`IQueryable`或类似的东西。这意味着它是惰性评估。因此，无论方法的调用顺序如何，您都将获得相同的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:29:04.520

`Include`您输入查询的位置没有区别。它只是一个行为修饰符，在你看到它的那一刻它不会被执行。只要你在任何地方操作`IQueryable` `Include`都会有同样的效果。

# java - how can we store file with same name in capital and small letters in java

> ID：12085017
> 
> 赞同：0
> 
> 时间：2012-08-23T05:03:02.773
> 
> 标签：java, file, jaxb

I am creating a xml file using jaxb JAVA and xml file name given by user input using Jtextfield.when user is giving same name 2 times one in capital letters and another one in small letters its overidden the existing file how can we store file with same name in capital and small letters in java?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T05:05:58.450

Generally speaking, you can't.

File names are OS dependent.

The best you can do is provide a warning to the user that they are overwriting the same file. See [File.exists](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#exists%28%29)

The other solution is to always capitalise (or not) the first character

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T05:06:00.370

This isn't a Java issue, but a question for the underlying Operating System. Some allow you to create two files that only differ in capitalization (for example Linux), and some don't (Windows, for example).

There is nothing Java can do about it.

# android - 膨胀视图时的Android ListView NullPointerException

> ID：12085018
> 
> 赞同：2
> 
> 时间：2012-08-23T05:03:07.353
> 
> 标签：android, listview, view, nullpointerexception, inflate-exception

我有一个带有自定义行的 ListView： **detail_row1.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:orientation="horizontal" 
    android:layout_height="wrap_content"
    android:padding="6dip"
    **android:background="@drawable/item_background_selector"**  ---> line 7
    android:id="@+id/detail_linearLayout"
  >

<TextView 
    android:id="@+id/propName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"   
    android:layout_weight="1"    
    android:textSize="16sp"
    android:textStyle="bold" 
    android:textColor="#000000"
    android:gravity="center_vertical|left"
    android:paddingTop="10sp"
    android:paddingBottom="10sp"
    android:paddingLeft="4sp"

/>

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    android:id="@+id/propValue"       
    android:textColor="#000000"
    android:textSize="16sp"
    android:textStyle="bold"
    android:paddingTop="10sp"
    android:paddingBottom="10sp"
    android:paddingRight="4sp"
    android:gravity="center_vertical|right"
    />  

</LinearLayout> 
```

我的**/drawable/item_background_selector.xml** （如果我将它放在**/color/item_background_selector.xml**下并在 detail_row1.xml 中正确引用它，则相同）

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="false" android:color="#ACD52B">
    </item>
    <item android:state_selected="true" android:color="#0094CE">
    </item>
</selector> 
```

当我尝试在我的 ListAdapter 中扩展此视图时：

```
public View getView(int position, View convertView, ViewGroup parent) {
    View v=convertView;
    if(v==null) {
    LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v=vi.inflate(R.layout.detail_row1, null); **--> NullPointerException**
   }
    .
    . 
```

它抛出一个 NullPointerException。

如果我只是从 detail_row1.xml 中删除第 7 行（android/background），情况并非如此

关于为什么会发生这种情况的任何线索/帮助（对android来说相当新）

提前致谢！

（编辑）Logcat：

```
**08-24 00:27:53.637: E/AndroidRuntime(15295): FATAL EXCEPTION: main**
08-24 00:27:53.637: E/AndroidRuntime(15295): android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
08-24 00:27:53.637: E/AndroidRuntime(15295):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
08-24 00:27:53.637: E/AndroidRuntime(15295):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
08-24 00:27:53.637: E/AndroidRuntime(15295):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
08-24 00:27:53.637: E/AndroidRuntime(15295):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
08-24 00:27:53.637: E/AndroidRuntime(15295):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
08-24 00:27:53.637: E/AndroidRuntime(15295):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
08-24 00:27:53.637: E/AndroidRuntime(15295):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
08-24 00:27:53.637: E/AndroidRuntime(15295):    at **com.dhomes.steel.DetailActivity$1.getView(DetailActivity.java:101)** 
```

**（第二次编辑）**

我的列表适配器：

```
lvProperties.setAdapter(new ListAdapter() {
//Section section=new Section();

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v=convertView;

   if(v==null) {
   //LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   LayoutInflater vi =(LayoutInflater)DetailActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   v=vi.inflate(R.layout.detail_row1, null);
   }

   TextView name=(TextView)v.findViewById(R.id.propName);
   TextView value=(TextView)v.findViewById(R.id.propValue);

   if(name!=null) {
       name.setText(section.propNames.get(position));
   }
   if(value!=null) {
       value.setText(section.propValues.get(position));
   }        
   return v;
}
.
.
.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:13:43.917

```
LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
v=vi.inflate(R.layout.detail_row1, null); 
```

从，以上行。您`customadapter`似乎只是在课堂上夸大了这个。因此，您可以更好地使用`context`对象`Constructor`，如下所示 -

```
...
LayoutInflater vi = (LayoutInflater)context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
v=vi.inflate(R.layout.detail_row1, null);
... 
```

并且，不要从您的 xml 文件中删除背景。只需尝试清理您的项目并在完成此更改后运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:42:31.517

我的评论似乎被隐藏了。所以张贴作为答案。

不幸的是，选择器不能用于颜色。请参阅：[TextView 背景颜色上的选择器](https://stackoverflow.com/questions/3592780/selector-on-background-color-of-textview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:17:51.030

我不确定，但你可以试试这个。而不是在 getview 中调用 inflater 在适配器类的构造函数中调用它：

```
LayoutInflater vi =(LayoutInflater)DetailActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

然后在 getView 中调用 layout id 为：

```
if (convertView == null) {

            convertView = inflater.inflate(R.layout.cat_content, null);

            holder.name = (TextView) convertView.findViewById(R.id.name);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        } 
```

# php - get a column data into a text file one by one?

> ID：12085019
> 
> 赞同：0
> 
> 时间：2012-08-23T05:03:10.340
> 
> 标签：php

the csv data as the following:

```
 (first line)   price   url

  (second line)    $10   src="http://www.test.com/1455/"||src="http://www.test.com/image/1456/"||

  (third line)    $20  src="http://www.test.com/2260/"||src="http://www.test.com/2261/"||

      ....   ........ 
```

now i want to put all the data from the url column into a text file. and shows the data one by one. namely:

```
http://www.test.com/1455/
http://www.test.com/image/1456/
http://www.test.com/2260/
http://www.test.com/2261/
.... 
```

now,i am stucked.

a, i don't know how to prevent outputting the first line. b,i don't know how to get the url, and put them i a text file one by one.

first i using the following code to output the data to the screen.

```
$row = 1;
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);

        $row++;

       echo $data[1] . "<br />\n";

    }
    fclose($handle);
} 
```

the above code also output the first line (url). i don't want to output it. how should i do. thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:10:08.917

你很亲近！我已经稍微修改了你的代码来做你想做的事情。本质上，您需要第二个文件处理程序来处理输出。您可以将其作为附加模式打开，以便将写入附加到文件末尾。至于不回显标题，您只需确保该行大于第一行。希望能帮助到你！

```
 $row = 1;
    if (($handle = fopen("test.csv", "r")) !== FALSE && ($handle2 = fopen("output.txt", 'a')) !== FALSE) {
        while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
            if($row > 1) {
                fwrite($handle2, "{$data[1]}\n");
            }
            $row++;
        }
        fclose($handle);
        fclose($handle2);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:30:38.700

// 跳过 CSV 的第一行 - 输出数据的第二“列”。

```
$row = 0;
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        if ($row > 0 ) {
          echo $data[1] . "<br />\n";
        }
        $row++;
    }
    fclose($handle);
} 
```

# mysql - 是的，另一个MySql：错误1045（28000）：用户'root'@'localhost'的访问被拒绝（使用密码：是）

> ID：12085022
> 
> 赞同：2
> 
> 时间：2012-08-23T05:03:35.690
> 
> 标签：mysql, ruby-on-rails, ruby

所以我不确定是什么导致我的 MySql 密码被打乱（升级到 Mountain Lion，重新安装 ruby​​/rails（其他问题），或者只是运气不好），但我们在这里：

登录mysql没问题，但是root登录不进去

```
Ayman$ mysql
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 96
Server version: 5.5.25 MySQL Community Server (GPL)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement. 
```

当我尝试登录到 root 时：

```
Ayman$ mysql -u root -p
Enter password: 
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES) 
```

看了用户：

```
mysql> CREATE USER root@localhost IDENTIFIED BY 'out22out';
ERROR 1227 (42000): Access denied; you need (at least one of) the CREATE USER privilege(s)     for this operation
mysql> SELECT USER(),CURRENT_USER();
+-----------------+----------------+
| USER()          | CURRENT_USER() |
+-----------------+----------------+
| Ayman@localhost | @localhost     |
+-----------------+----------------+
1 row in set (0.00 sec)

mysql> SELECT USER, HOST FROM mysql.user;
ERROR 1142 (42000): SELECT command denied to user ''@'localhost' for table 'user'
mysql> select user, host from mysql.user;
ERROR 1142 (42000): SELECT command denied to user ''@'localhost' for table 'user'
mysql> grant all on *.* to Ayman@'%';
ERROR 1045 (28000): Access denied for user ''@'localhost' (using password: NO)
mysql> 
```

我尝试过重新安装 MySql（不知道如何卸载它），停止服务器实例并重新启动它，以及关于右侧无数类似问题的所有其他建议。我已经坚持了 3 天了，这让我很生气。

有什么线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T05:07:02.773

您可以使用[启动 MySQL](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)（服务器，而不是命令行监视器）`--skip-grant-tables`，这会暂时关闭权限系统。这将让您进入，更新您的帐户/密码，而不会妨碍那些搞砸的权限。一旦事情得到解决，您就`flush privileges;`可以重新启用权限系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:52:31.167

[好的，我使用本网站上](http://www.thegeekstuff.com/2009/07/how-to-reset-forgot-mysql-root-password-on-unix-linux-windows/)的教程弄清楚了：

我不知道如何运行跳过授权表，如下所示：

```
Last login: Wed Aug 22 23:10:42 on console
Ayman$ --skip-grant-tables
-bash: --skip-grant-tables: command not found
Ayman$ mysql
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock'    (2)
Ayman$ --skip-grant-tables
-bash: --skip-grant-tables: command not found 
```

这是我在 Google 上搜索 Skip Grant Tables 并找到上面列出的教程的地方：

不要认为本教程的任何初始部分都有效：

```
Ayman$ # vi /etc/rc.d/init.d/mysql
Ayman$ $bindir/mysqld_safe --datadir=$datadir --pid-file=$server_pid_file $other_args     >/dev/null 2>&1 &
[1] 302
Ayman$ $bindir/mysqld_safe --skip-grant-tables --datadir=$datadir --pid-  file=$server_pid_file $other_args >/dev/null 2>&1 &
[2] 303
[1]   Exit 127                $bindir/mysqld_safe --datadir=$datadir --pid-   file=$server_pid_file $other_args > /dev/null 2>&1
Ayman$ mysql start
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock'   (2)
[2]+  Exit 127                $bindir/mysqld_safe --skip-grant-tables --datadir=$datadir -  -pid-file=$server_pid_file $other_args > /dev/null 2>&1
Ayman$ # service mysql start
Ayman$ mysql -u root mysql
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)
Ayman$ mysql 
```

ERROR 2002 (HY000): 无法通过套接字 '/tmp/mysql.sock' 连接到本地 MySQL 服务器 (2)

这是魔法！：

```
Ayman$ mysql -u root mysql
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 9
Server version: 5.5.27 MySQL Community Server (GPL)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> UPDATE user SET password=PASSWORD('newpassword') WHERE user='root';
Query OK, 4 rows affected (0.11 sec)
Rows matched: 4  Changed: 4  Warnings: 0

mysql> flush privileges
-> ;
Query OK, 0 rows affected (0.00 sec) 
```

上面链接中的更多内容不起作用：

```
mysql> service mysql stop
-> ;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that   corresponds to your MySQL server version for the right syntax to use near 'service mysql stop'    at line 1
mysql> # service mysql stop
mysql> # vi /etc/rc.d/init.d/mysql
mysql> $bindir/mysqld_safe --datadir=$datadir --pid-file=$server_pid_file $other_args   >/dev/null 2>&1 &
    -> 
    -> ;
ERROR 2006 (HY000): MySQL server has gone away
No connection. Trying to reconnect...
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock'   (2)
ERROR: 
Can't connect to the server

mysql> $bindir/mysqld_safe --skip-grant-tables --datadir=$datadir --pid-  file=$server_pid_file $other_args >/dev/null 2>&1 &;
No connection. Trying to reconnect...
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock'   (2)
ERROR: 
Can't connect to the server

mysql> $bindir/mysqld_safe --skip-grant-tables --datadir=$datadir --pid-  file=$server_pid_file $other_args >/dev/null 2>&1 &;
No connection. Trying to reconnect...
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
ERROR: 
Can't connect to the server

mysql> $bindir/mysqld_safe --datadir=$datadir --pid-file=$server_pid_file $other_args   >/dev/null 2>&1 &;
No connection. Trying to reconnect...
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
ERROR: 
Can't connect to the server 
```

它还活着！！！！：

```
mysql> quit
Bye
Ayman$ mysql -u root -p
Enter password: newpassword 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 25
Server version: 5.5.27 MySQL Community Server (GPL)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement. 
```

感谢 MARC B 和 StackOverflow 社区为我指明了正确的方向并让这个新手重返游戏！！

# java - Memory Leaks In audio?

> ID：12085025
> 
> 赞同：2
> 
> 时间：2012-08-23T05:04:10.473
> 
> 标签：java, android, media-player

I can Create a simple application on android,and use sound effects form 5 audios file, but i cannot release memory for object.

```
mBackground = MediaPlayer.create(context, R.raw.intro);
        mRiver  = MediaPlayer.create(context, R.raw.river);
        mClapping = MediaPlayer.create(context, R.raw.ap);
        mTap = MediaPlayer.create(context, R.raw.tap);
        mError = MediaPlayer.create(context, R.raw.error);
        mWonder = MediaPlayer.create(context, R.raw.ap2);
        if(GameDashBoard.soundInGame) {mBackground.start(); mBackground.setLooping(true); 
```

And can Release memory but this code not working.

```
mRiver.release();
mClapping.release();
mTap.release();
mWonder.release(); 
```

**Problem is print on log cat** ---- Audio cache heap overflow.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:06:05.497

soundpool 会将所有声音保存在内存中。您可能只需要[在此处查看](http://www.stealthcopter.com/blog/2010/08/android-soundpool-vs-mediaplayer-focus-on-soundboards-and-memory-problems/)一个媒体播放器实例。您应该这样做，您的记忆问题应该会消失，而无需采取任何极端措施。

# javascript - Heroku kind of hosting for simple HTML/JS applications

> ID：12085026
> 
> 赞同：16
> 
> 时间：2012-08-23T05:04:15.600
> 
> 标签：javascript, html, heroku, hosting

I love using **Heroku**. I love the simplicity of doing `git push` into the server and have the Ruby on Rails app up and running.

I am doing a simple HTML/JS application and I am wondering if there is any **free** hosting that allows this simplicity of pushing the app just by doing `git push`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T05:18:16.587

这些应该回答你的问题：

1.  [Heroku Cedar 上的静态站点](http://www.kennethreitz.org/essays/static-sites-on-heroku-cedar)

    > 首先，让我们将您的网站变成一个 PHP“应用程序”：
    > 
    > `$ touch index.php`
    > 
    > 接下来，我们可以完全禁用 Apache 的 PHP 引擎：
    > 
    > `$ echo 'php_flag engine off' > .htaccess`
    > 
    > 当您将其推送时，您将拥有一个裸露的 Apache 实例，将您的站点内容提供给全世界。最好的是，您可以在任何传统的共享托管平台上执行所有愚蠢的 .htaccess 技巧。

2.  [heroku-静态站点](https://github.com/jamiew/heroku-static-site)

    > 一个简单的 ruby​​ + rack 应用程序，用于为基本的静态网站提供服务

您可能还想查看[github 页面](http://pages.github.com)，该页面提供免费的静态托管，只需`git push`. github 页面相对于 Heroku 的优势在于不会有任何[Dyno Idling](https://devcenter.heroku.com/articles/dynos#dyno-idling)。

# mysql - mysql CURRENT_TIMESTAMP 都给我 0

> ID：12085030
> 
> 赞同：1
> 
> 时间：2012-08-23T05:05:01.220
> 
> 标签：mysql, sql, timestamp, utc

如果我运行以下查询：

```
ALTER TABLE `price_s` ADD COLUMN `ts` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP  AFTER `price_s_id` ; 
```

新列将填充`0000-00-00 00:00:00`. 在我修改该列之前，该列中的值不会更新为当前时间戳，即`ON UPDATE CURRENT_TIMESTAMP`似乎工作正常。

如果我运行：

```
SELECT version( ) , @@time_zone , @@system_time_zone , NOW( ) , UTC_TIMESTAMP( ) 
```

我有：

```
'5.5.15', '+10:00', 'EST', '2012-08-23 14:56:59', '2012-08-23 04:56:59' 
```

我想将 UTC 时间存储在列`ts`中，我该怎么做？

不确定这是否相关，我试图生成`mysql.time_zone*`表格：

```
Miranda-Macbook: ./mysql_tzinfo_to_sql /usr/share/zoneinfo | ./mysql -p -u root mysql
Enter password: Warning: Unable to load '/usr/share/zoneinfo/+VERSION' as time zone. Skipping it.

Warning: Unable to load '/usr/share/zoneinfo/Asia/Riyadh87' as time zone. Skipping it.
Warning: Unable to load '/usr/share/zoneinfo/Asia/Riyadh88' as time zone. Skipping it.
Warning: Unable to load '/usr/share/zoneinfo/Asia/Riyadh89' as time zone. Skipping it.
Warning: Unable to load '/usr/share/zoneinfo/Mideast/Riyadh87' as time zone. Skipping it.
Warning: Unable to load '/usr/share/zoneinfo/Mideast/Riyadh88' as time zone. Skipping it.
Warning: Unable to load '/usr/share/zoneinfo/Mideast/Riyadh89' as time zone. Skipping it.
Warning: Unable to load '/usr/share/zoneinfo/iso3166.tab' as time zone. Skipping it.
Warning: Unable to load '/usr/share/zoneinfo/zone.tab' as time zone. Skipping it. 
```

感谢@Sameer 和@Marc B。现在我更了解时间戳了。（在[本文](http://developerinsight.wordpress.com/2007/11/25/mysql-datetime-vs-timestamp/)的帮助下）它已经存储在UTC 中，所以我实际上需要的是：

```
SET time_zone = 'SYSTEM';
UPDATE tablename SET ts=now() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:08:43.423

```
INSERT INTO yourtable (ts) VALUES (now())
UPDATE yourtable SET ts=now() 
```

As long as whatever you're stuffing into the ts field is a valid mysql timestamp string (`yyyy-mm-dd hh:mm:ss`) it doesn't matter WHAT the timezone is. That only becomes relevant upon conversion or retrieval - mysql datefields themselves have no concept of timezones, they're just repositories of some date/time data.

# ruby-on-rails - 在 Rails 3.1 中为特定的资产路径设置不同的资产主机

> ID：12085039
> 
> 赞同：2
> 
> 时间：2012-08-23T05:06:00.697
> 
> 标签：ruby-on-rails

有谁知道是否有可能以某种方式为使用asset_path 或asset_url 辅助方法寻址的资产设置不同的asset_host？

像这样的东西：

```
asset_path 'path/to/asset.html', :host => nil #this will same sure the asset is on the same domain
asset_path 'path/to/asset.jpg', :host => 'http://staticserver.com' #static server 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-29T14:59:16.740

这可以通过执行以下操作来实现：

```
def custom_asset_path(asset)
  config = MyApp::Application.config.action_controller
  asset_host = config.asset_host
  config.asset_host = "http://custom-asset-server.com"
  path = asset_path(asset)
  config.asset_host = asset_host
  path
end 
```

# google-app-engine - 在 Google App-Engine for java 上使用 iText 从 HTML（具有良好的 CSS）创建 PDF

> ID：12085042
> 
> 赞同：2
> 
> 时间：2012-08-23T05:06:27.577
> 
> 标签：google-app-engine, pdf-generation, itext, flying-saucer

我们可以在 Google App-Engine for java 上使用 iText 库从 HTML（具有良好的 CSS）创建 PDF。当我们使用这个 iText 库时，是否有必要使用飞碟？

欢迎任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:15:45.667

您可以使用 XMLWorker ( [link](http://sourceforge.net/projects/xmlworker/) )，它是 iText 开发人员的一个副项目。在 GAE 上尝试之前，请务必先试用您的 HTML 代码，它不支持过于复杂的 HTML。

# android - 之前执行的线程

> ID：12085046
> 
> 赞同：0
> 
> 时间：2012-08-23T05:06:57.940
> 
> 标签：android, android-widget, android-2.2-froyo

调用新线程时，我在这里遇到了一点问题。

我正在制作一个录音应用程序，我在单独的线程中调用录音/播放。

有一个按钮可以开始录制。我正在尝试通过 handler.post 对象和方法用新文本更新按钮。

问题是更新时间太长。直到线程运行 +5 秒后，文本才会更新。

有人能帮我吗？请？

```
 package com.EJH.Industries.microkr;

import android.media.AudioFormat;
import android.media.AudioManager;
import android.media.AudioRecord;
import android.media.AudioTrack;
import android.media.MediaRecorder;
import android.media.MediaSyncEvent;
import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {
//CLASS VARIABLES
    //CHAR SEQUENCE
    CharSequence easyChar = "PLAYING";
    public Handler textViewHandler = new Handler();

    //CREATE THE RECORDING OBJECT
    int audioSrc = MediaRecorder.AudioSource.MIC;
    int sampleRate = 44100;
    int chanConfig = AudioFormat.CHANNEL_IN_MONO;
    int audioFormat = AudioFormat.ENCODING_PCM_16BIT;
    int getMinBuffSize = 200*AudioRecord.getMinBufferSize(sampleRate, chanConfig, audioFormat);
    int minBuffSize = (int) getMinBuffSize;
    short audioBuff[] = new short[minBuffSize];
    public AudioRecord micRecorder = new AudioRecord(audioSrc, 22050, chanConfig, audioFormat, minBuffSize);

    //CREATE THE PLAYBACK OBJECT
    int streamType = AudioManager.STREAM_MUSIC;
    int playMode = AudioTrack.MODE_STREAM;
    int playChanConfig = AudioFormat. CHANNEL_OUT_MONO;
    public AudioTrack speakerPlay = new AudioTrack(streamType, sampleRate, playChanConfig, audioFormat, 8192, playMode);

    public void startRec(){
        micRecorder.startRecording();
        micRecorder.read(audioBuff, 0, minBuffSize);
        micRecorder.stop();
        micRecorder.release();
    }

    public void startPlayback(){

        speakerPlay.play();
        speakerPlay.write(audioBuff, 0, minBuffSize);
        speakerPlay.stop();

    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final Button startBtn = (Button) findViewById(R.id.startButton);
        startBtn.setOnClickListener(new OnClickListener(){

            public void onClick(View v) {
                // TODO Auto-generated method stub

                Thread recThread = new Thread( new Runnable(){

                    public void run() {
                        // TODO Auto-generated method stub

                        textViewHandler.post(new Runnable () {
                            public void run(){
                                startBtn.setText("Recording!");
                            }

                        });

                        startRec();
                    }

                });

                // RUN RECORDING FUNCTION
                recThread.run();
                try {
                    recThread.join();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                Thread playThread = new Thread( new Runnable(){

                    public void run() {
                        // TODO Auto-generated method stub

                        startPlayback();
                    }

                });

                playThread.run();
                try {
                    playThread.join();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

        });

    ///////END onCreate//////////    
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:20:44.460

我认为是因为您首先调用 startRec() 然后运行 ​​recThread..尝试修改您的代码如下..即从 recThread.run() 行上方删除您的 startRec() 函数并在尝试后添加它抓住..希望它对你有帮助..

```
Thread recThread = new Thread( new Runnable(){

                    public void run() {
                        // TODO Auto-generated method stub

                        textViewHandler.post(new Runnable () {
                            public void run(){
                                startBtn.setText("Recording!");
                            }

                        });

                  //remove it from here..
                       // startRec();
                    }

                });

     // RUN RECORDING FUNCTION
                recThread.run();
                try {
                    recThread.join();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
    //add here..
                startRec(); 
```

# iphone - 滚动视图导航错误

> ID：12085052
> 
> 赞同：-2
> 
> 时间：2012-08-23T05:07:21.663
> 
> 标签：iphone, ios, uinavigationcontroller, uiscrollview

当我试图将导航和工具栏放在滚动条 xib 中时，在上下移动滚动视图时两者都在移动？如何使导航栏和工具栏视图保持不变并且滚动视图可移动？请帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:33:34.750

您正在滚动视图上添加导航和工具栏，这就是他们移动滚动滚动视图的原因。在视图上添加导航和工具栏而不是在滚动视图上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:38:35.050

1.  在 xib 文件上放一个 UIView
2.  将 UINavigationBar 放在 UIView 之上
3.  将 UIToolBar 放在 UIView 的底部
4.  将 UIScrollView 放在 UIView 顶部导航栏和底部工具栏中间。

请注意 UIScrollView 正好在导航栏之后开始，并且应该在工具栏之前结束。

# php - 如何在表单类型类中使用 Doctrine Create 查询

> ID：12085058
> 
> 赞同：0
> 
> 时间：2012-08-23T05:08:18.060
> 
> 标签：php, symfony, doctrine-orm

如果我使用此代码，那么我可以毫无问题地创建新对象：

```
 ->add('user', 'entity', array(
                 'class' => 'Acme\Entity\User',
                 'query_builder' => function(EntityRepository $er) use ($options){
                    return $er->createQueryBuilder('u')->orderBy('u.name', 'ASC');}
                )) 
```

但是如果我设置一些这样的参数：

```
'query_builder' => function(EntityRepository $er) use ($options) {
                            return $er->createQueryBuilder('u') 
->where('u.id = :id')
->setParameter('id',$options['id'])
->orderBy('u.name', 'ASC');}
                )) 
```

然后我可以在选择框中正确看到选项，但是当我提交表单时，我得到用户对象的 NULL 值。错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:57:46.733

`$options['id']`可能是一个字符串。试试这个：

```
->setParameter('id',intval($options['id'])) 
```

# java - 如何在数组列表中查找不同项目的总数。

> ID：12085062
> 
> 赞同：1
> 
> 时间：2012-08-23T05:08:58.260
> 
> 标签：java, arraylist, duplicates, loops

我已经进行了一些搜索，但找不到有效的解决方案。我有一个存储字符串的数组列表，例如口香糖、袜子、OJ、狗粮……

我无法迭代列表以确定不同类型项目的总数。

IE。

```
ArrayList<String> Store = new ArrayList<String>();
    this.Store.add("Gum");
    this.Store.add("Gum");
    this.Store.add("Socks");
    this.Store.add("Candy"); 
```

该列表共有 4 个项目，但只有三种不同的项目（口香糖、吸吮、糖果）。

我将如何设计一种计算 3 的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T05:11:20.837

Bhesh [Gurung 所说](https://stackoverflow.com/a/12085073/276052)的，但在代码中：

```
int numUnique = new HashSet<String>(Store).size(); 
```

如果您实际拥有`StoreItems`并且需要经历，`getName()`那么我会做

```
Set<String> itemNames = new HashSet<String>();
for (StoreItem item : Store)
    itemNames.add(item.getName());
int numUnique = itemNames.size(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T05:10:22.553

使用`Set`( [`HashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html#HashSet%28java.util.Collection%29)) ，其大小将为您提供所需的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T05:16:04.280

这看起来像一个家庭作业......所以，如果你不理解上面提出的 HashSet 解决方案（或者对 HashMap 做同样的事情），考虑做这样的事情：

创建一个新的数组列表

取一个元素并检查它是否存在于新的 ArrayList 中

如果它存在于新的 ArrayList 中，则什么也不做。否则添加它。

执行此操作，直到您检查了 ArrayList 的最后一个元素。

然后，新数组列表的大小应该是您要查找的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T21:55:35.347

您可以使用*lastIndexOf*方法并循环遍历数组列表。

```
char count=0;

    for(char i=0; i<araylist.size(); i++){
        if(i == araylist.lastIndexOf(araylist.get(i))){
            count++;
        }
    } 
```

经测试。

# php - Mysql & PHP 正确的查询语法

> ID：12085063
> 
> 赞同：0
> 
> 时间：2012-08-23T05:09:06.670
> 
> 标签：php, mysql

我试图让这个查询在这个例子中只显示 1 个结果（不是 LIMIT）：

```
SELECT company_id  FROM `location` WHERE `state` = 'XX' 
```

结果与此类似：

`16 9 9 9 9 30 30 30 45 50 50 50 50 57 7 79 80 80 80 80 120 120 120 120 120 128 131 120 265 265`

我的目标是这些结果：

`16 9 30 45 50 57 7 79 80 120 128 131 120 265`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T05:10:21.500

[`DISTINCT`](http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html)只需在列名之前添加关键字

```
SELECT DISTINCT company_id FROM `location` WHERE `state` = 'XX' 
```

语句中的`DISTINCT`关键字`SELECT`删除查询返回的重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:22:44.120

使用`DISTINCT`关键字

```
SELECT DISTINCT company_id  FROM `location` WHERE `state` = 'XX' 
```

它将给出预期的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:12:10.163

`DISTINCT`当您想要检索不同的结果集时只需使用......

```
SELECT DISTINCT company_id  FROM `location` WHERE `state` = 'XX' 
```

您可以通过`Group By`以下方式用作 DISTINCT 的替代方法：

```
 SELECT company_id  FROM `location` WHERE `state` = 'XX' GROUP BY company_id 
```

`DISTINCT`和`GROUP BY`生成与性能相同的执行计划，尽管我强烈建议您`DISTINCT`在您的场景中使用......

# spring - 在 Spring 中不使用注解的 Restful 服务

> ID：12085067
> 
> 赞同：2
> 
> 时间：2012-08-23T05:10:05.110
> 
> 标签：spring

我正在尝试使用 Spring 调用 Restful Web 服务。我进行了很多搜索，并且能够使用不同的注释来提供宁静的服务。

这是一段代码： -

```
@Controller @RequestMapping("/service/")
public class RestService {
   long currentId = 123;

   public RestService() {  
   }

   @ResponseBody    
   @RequestMapping(value="/get/{id}")    
   public Rest getRest(@PathVariable("id") String id) {
      System.out.println("----invoking getRest, Rest id is: " + id);    
      Rest c = new Rest();    
      long idNumber = Long.parseLong(id);    
      c.setId(idNumber);    
      c.setName("John");    
      c.setAge("12.6");    
      return c;    
   } 
```

*   我有一个 web.xml + (name)-servlet.xml

上面的示例只有一个方法，并且该方法映射到一个 url。

现在我想要的是在 java 类中根本不使用注释。那么，有没有办法不用注解就可以做rest服务呢？如何配置 XML 文件中的所有注释及其（java 类中的所有方法）对应的 URL？

# macos - Mac OS X Opengl 输出意外颜色。glClearColor(1, 0, 0, 0.5) 使 0xff000088 而不是 0xff00007f

> ID：12085070
> 
> 赞同：1
> 
> 时间：2012-08-23T05:10:10.853
> 
> 标签：macos, opengl, colors

我正在使用屏幕外帧缓冲区对 Mac OS X 上的 OpenGL 进行单元测试。当我表演

```
 glClearColor(1, 0, 0.5, 0.5);
        glReadPixels(0, 0, w, h, GL_RGBA, GL_UNSIGNED_BYTE, buffer); 
```

，它给了我`0xFF008080`而不是`0xFF007F7F`每个像素。为什么会出现这个结果令人困惑。我唯一能弄清楚的是颜色校准，但在那种情况下，我不知道如何处理这个以期望得到正确的结果。（甚至，*正确*的结果是什么？校正颜色？还是原始颜色？）

这是我的问题。

1.  使用 OpenGL 时我应该期待什么。修正颜色？还是原色？
2.  什么时候进行校正传递？在片段着色器之后？颜色写入帧缓冲区后？
3.  有没有办法测试原始颜色？
4.  我可以访问色彩校正功能来重现结果吗？

这是完整的源代码供参考。

```
- (void)test_1000_createContext
{
    NSOpenGLPixelFormatAttribute    pfa[1]  =   { 0 };
    NSOpenGLPixelFormat*    pixelFormat     =   [[NSOpenGLPixelFormat alloc] initWithAttributes:pfa];

    @autoreleasepool
    {
        NSOpenGLContext*        GL              =   [[NSOpenGLContext alloc] initWithFormat:pixelFormat shareContext:nil];
        [GL makeCurrentContext];
        {
            ASS (GL != nil);

            GLuint  fb;
            GLuint  rbc;
            glGenFramebuffers(1, &fb);
            glGenRenderbuffers(1, &rbc);
            ASS (fb !=0 );
            ASS (rbc != 0);

            GLint w, h;
            w = 2;
            h = 2;

            glBindRenderbuffer(GL_RENDERBUFFER, rbc);
            glBindFramebuffer(GL_FRAMEBUFFER, fb);
            glRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA8, w, h);
            glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, rbc);
            glClearColor(1, 0, 0.5, 0.5);
            glClear(GL_COLOR_BUFFER_BIT);
            glFinish();

            uint8_t*    buffer      =   malloc(4*w*h);
            glReadPixels(0, 0, w, h, GL_RGBA, GL_UNSIGNED_BYTE, buffer);
            NSData* bdat    =   [[NSData alloc] initWithBytesNoCopy:buffer length:4*w*h freeWhenDone:YES];
            NSLog(@"%@", bdat);

            uint8_t     answer[]    =
            {
                0xFF, 0x00, 0x7F, 0x7F,
                0xFF, 0x00, 0x7F, 0x7F,
                0xFF, 0x00, 0x7F, 0x7F,
                0xFF, 0x00, 0x7F, 0x7F,
            };
            ASS (memcmp(answer, buffer, 4*4) == 0 );
        }
        [NSOpenGLContext clearCurrentContext];
    }

} 
```

# openxml - 如何根据给定的 xml 数据计算 MS Office Powerpoint Shapes 的旋转值

> ID：12085076
> 
> 赞同：4
> 
> 时间：2012-08-23T05:10:52.430
> 
> 标签：openxml

我想从给定的 OOXML 数据中获取正确的旋转值来绘制 MS office Powerpoint 2007 文件的形状，如下所示：

```
<p:sp>
            <p:nvSpPr>
                <p:cNvPr id="3" name="Rectangle 66" />
                <p:cNvSpPr>
                    <a:spLocks noChangeArrowheads="1" />
                </p:cNvSpPr>
                <p:nvPr />
            </p:nvSpPr>
            <p:spPr bwMode="auto">
                ***<a:xfrm rot="5400000">***
                    <a:off x="2443049" y="-1042472" />
                    <a:ext cx="304800" cy="4419600" />
                </a:xfrm>
                <a:prstGeom prst="rect">
                    <a:avLst />
                </a:prstGeom>
                <a:ln>
                    <a:headEnd />
                    <a:tailEnd />
                </a:ln>
            </p:spPr> 
```

旋转值给出为“xfrm rot = 5400000”。考虑到这一点，必须计算其适当的值，因此必须处理形状的高度和宽度以绘制形状。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:39:25.060

除以 60000 得到旋转角度。在这种情况下，5400000/60000=90 度。它是就地旋转，这意味着它在中心 X 和中心 Y 上旋转。

# amazon-web-services - AWS java项目创建错误

> ID：12085077
> 
> 赞同：2
> 
> 时间：2012-08-23T05:10:56.970
> 
> 标签：amazon-web-services

我已经从[http://aws.amazon.com/eclipse](http://aws.amazon.com/eclipse)安装了 aws 插件。创建 aws java 项目时，未启用下一步和完成按钮。在打开 Eclipse 时，我遇到了以下错误。无法读取区域文件、无法缓存区域文件、无法检查 AWS SDK for Java 下载的状态以及无法刷新安全组：无法执行 HTTP 请求：对等方未通过身份验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-02T11:48:47.120

问题是，您的 AWS 开发工具包没有正确安装和更新。只需单击 >Help in eclipse ，然后单击 >Installation Details 并从中重新安装 AWS Eclipse 插件。

请确保插件的 url 适用于您的 eclipse 版本。

它会解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-23T08:00:52.837

尝试使用新的工作区，你会很高兴的。让知道问题是否仍然存在。

# ruby-on-rails - $.post 在点击 ROR 时将内容发送到数据库

> ID：12085079
> 
> 赞同：1
> 
> 时间：2012-08-23T05:11:00.370
> 
> 标签：ruby-on-rails, ruby, post

我的页面上有一个 5 星评级的 jQuery 小部件（我创建的）。它需要一个函数来处理其点击值。以前这是我做的：

```
$('.fivestar').each(function() {
    $(this).ratings(5, $js_tile_data[$posValue][6]).bind('ratingchanged', function(event, data) {
        $.post('jRating/send_rating.php?whichpage='+$page+'&id='+$js_tile_data[$posValue][0]+'&rating='+data.rating);
        $(this).clickable(false);
    });
}); 
```

现在我正在使用 ruby​​ on rails 并希望达到相同的效果，将评级值存储到我的数据库中而不加载新页面或任何东西。另外，如果可能的话，我不想点击按钮或链接或类似的东西。我发现试图弄清楚如何做到这一点的一切都需要一个链接、表单或按钮。

任何帮助或寻找的方向将不胜感激。谢谢！

好吧，这就是我的函数调用中的内容：

```
$.post('/send_rating?whichpage=eat&id='+$js_tile["id"]+'&rating='+data.rating); 
```

然后 send_raing_controller.rb：

```
class SendRatingController < ApplicationController
  def create
    @page = params[:whichPage]
    @id = params[:id]
    @rating = params[:rating]

    if (@page = "eat")
      @tile = EatTile.find(@id)
      @newVotes = @tile.num_votes + 1
      @newRating = (($tile.rating *@tile.num_votes) + @rating) / @newVotes
      @tile.num_votes = @newVotes
      @tile.rating = @newRating
    end
  end
end 
```

我使用 create 是因为当我 rake 路由时，post 函数会创建。它不能正常工作，是因为我找到 EatPage 的方式吗？或者它没有被正确调用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:43:13.727

您可能已经拥有以下内容，但我只是重新说明您需要的内容

我假设您已经知道 rails 如何与控制器、模型、视图 (MVC) 一起工作

首先，您将需要一个控制器来处理请求（无论是 post 或 get 或 put 或其他）

其次，在您的控制器中，您可以通过 params[:xxx] 获取您在 url 中传递的内容

在您的情况下， params[:whichpage], params[:id] ...

之后，使用文本或 javascript 或任何你想要的响应我通常使用 js.erb 来响应 javascript 以更新视图或只是提醒消息

甚至只是调用预定义的 javascript 回调

# php - 返回数组对象时出错

> ID：12085089
> 
> 赞同：1
> 
> 时间：2012-08-23T05:11:48.250
> 
> 标签：php, ajax, arrays

我在返回一个数组对象然后显示给用户时出现问题，请看演示代码。一个基本的片段，但它有相同的想法，我只是不能在这里发布很长的代码。

```
Class foobar{
   public function foo()
   {
     return array( 'bar' => 'value' );
   }
} 
```

这个 php 代码被另一个类使用

```
Class foobar_fetcher{
   public function getFoo()
   {
     $fb = new foobar();
     $result = $fb->foo();
     return $result;
   }
} 
```

foob​​ar_fetcher 再次由主执行器文件（ ajaxdispatcher.php ）调用 - 带有 json 标头。

```
if( isset( $_POST['fetch'] ) ){
   $httpresponse = new stdClass();
   $fb_fetch = new foobar_fetcher();
   $httpresponse->data = $fb_fetch->getFoo();
}

echo json_encode( $httpresponse ); 
```

最后，这个 ajaxdispatcher 被一个 jquery ajax 调用。

```
$.ajax({
  url: 'ajaxdispatcher.php',
  type: 'post',
  data: {fetch:'fetch'},
  success: function( data ){
      if( data ) console.log( data );
  }
}); 
```

现在，当我尝试打印数据时，它没有来自服务器的响应。但是当我将 foobar 类下的 foo() 的返回值更改为整数或字符串时。一切都会好起来的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:23:43.220

您应该尝试将您的 ajaxdispatcher 更改为接受 GET 请求并从浏览器导航到那里以查看返回的内容。

```
if( isset( $_GET['fetch'] ) ){
   $httpresponse = new stdClass();
   $fb_fetch = new foobar_fetcher();
   $httpresponse->data = $fb_fetch->getFoo();
}

echo json_encode( $httpresponse ); 
```

导航到 /ajaxdispatcher.php?fetch=fetch

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:51:06.277

我会做的一些事情可能会提高你成功的机会

1.  `exit`在发送 JSON 代码后立即设置适当的 HTTP 标头

    ```
    header('Content-type: application/json');
    echo json_encode($httpresponse);
    exit; 
    ```

    还要确保在此之前您没有向输出缓冲区发送任何数据。

2.  告诉 jQuery 期望的数据类型

    ```
    $.ajax({
        dataType: 'json',
        // and the rest 
    ```

3.  添加`error`回调

    ```
    $.ajax({
        // snip
        error: function(jqXHR, textStatus, errorThrown) {
            console.log(jqXHR, textStatus, errorThrown);
        }
    }); 
    ```

# php - mysql_connect 总是允许访问

> ID：12085090
> 
> 赞同：0
> 
> 时间：2012-08-23T05:12:02.867
> 
> 标签：php, mysql, xampp, mysql-connect

我正在尝试使用使用 XAMPP 设置的本地测试服务器连接到在我的本地计算机上运行的 mySQL 数据库。我只是使用没有分配密码的root帐户。我尝试如下，一切似乎都正常。我的信息得到了回应，说我已成功连接。然后我尝试通过在主机、用户名或密码中输入其他任何内容来强制出错，但它仍然显示“连接成功”。

这是我用来连接的代码：

```
<?php
$db_host = "localhost";
$db_username = "root";
$db_password = "";

$myConn = mysql_connect($db_host, $db_username, $db_password) or die('Connection error: '.mysql_error());
echo 'connection successful';
?> 
```

我想知道是我还是我正在使用的 apache/mySQL 的安装导致了这种荒谬。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:16:47.550

您的安装必须搞砸一些事情：

```
marc@panic:~$ php -a
php > $x = mysql_connect('bleargh', 'foo', 'bar') or die(mysql_error());
PHP Warning:  mysql_connect(): Unknown MySQL server host 'bleargh' (2) in php shell code on line 1
Unknown MySQL server host 'bleargh' (2)marc@panic:~$ 
```

我能想到的大概是你有一个 DNS 服务器，它为**所有**查找返回一个有效地址，导致所有主机名都得到解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:17:14.483

它总是会回`'connection successful'`显，因为您没有检查连接的状态。

```
if (!$myConn) {
   echo 'Sorry, there was an error '.mysql_error();
} else {
   echo 'connection successful';
} 
```

根据您执行代码的方式，您可能会遇到以下情况：

> 如果使用相同的参数对 mysql_connect() 进行第二次调用，则不会建立新链接，而是返回已打开链接的链接标识符。new_link 参数修改了这种行为并使 mysql_connect() 始终打开一个新链接，即使之前使用相同的参数调用了 mysql_connect() 也是如此。在 SQL 安全模式下，此参数被忽略。

因此，要么进行明确的检查，要么：

`$myConn = mysql_connect($db_host, $db_username, $db_password, true) or die('Connection error: '.mysql_error());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:19:18.490

试试这个

```
$db_host = "localhost";
$db_username = "root";
$db_password = "";
$con = mysql_connect($db_host,$db_username,$db_passwd);
if (!$con)
 {
 die('Could not connect: ' . mysql_error());
 }
else
  echo 'connection successful';
  mysql_close($con);
?> 
```

# java - Miglayout：无法与 JPanel 一起使用

> ID：12085093
> 
> 赞同：3
> 
> 时间：2012-08-23T05:12:39.920
> 
> 标签：java, swing, jpanel, layout-manager, miglayout

```
JPanel panel = new JPanel();
panel.setLayout(new MigLayout()); 
```

这是我的代码。我收到编译器错误

org.eclipse.swt.widgets.Layout 类型无法解析。它是从所需的 .class 文件中间接引用的，并且`setLayout(LayoutManager)`类型 Container 中的方法不适用于参数（MigLayout）

我已经在构建路径中配置了 Miglayout.jar。我可以在 -preferences>javabuildpath>libraries 下看到它

谁能帮我这个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T05:25:23.557

对于 Swing，您可能想要导入`net.miginfocom.swing.MigLayout`，而不是`net.miginfocom.swt.MigLayout`.

# r - 如何根据中心和半径在 R 中绘制三维球体？

> ID：12085095
> 
> 赞同：3
> 
> 时间：2012-08-23T05:12:52.597
> 
> 标签：r, 3d, rgl

**如何通过提供中心点和半径在 R 中绘制球体？**

例如，像这样：

```
sphere_3d(center=c(1,1,1), r=2)) 
```

该图将出现在三维坐标系上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T05:22:21.320

尝试`spheres3d`在`rgl`包中进行交互式绘图：

```
library(rgl)
spheres3d(x = 1, y = 1, z = 1, radius = 1) 
```

还有很多其他的方法，所以有用的东西需要更多的输入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T06:00:01.557

改编自[@mdsummer](https://stackoverflow.com/a/12085187/180892)的答案，这也增加了轴。

```
library(rgl)
open3d()                                   # create new plot
spheres3d(x = 1, y = 1, z = 1, radius = 1) # produce sphere
axes3d()                                   # add x, y, and z axes 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T05:20:37.503

查看[`rgl`](http://www.stattler.com/article/three-dimensional-plots-using-rgl-package)用于制作 3D 绘图的包。

# android - 如何将图像制作成超链接？

> ID：12085096
> 
> 赞同：0
> 
> 时间：2012-08-23T05:12:55.957
> 
> 标签：android, image, canvas, hyperlink, bitmap

通过Android API，我遇到了我认为我需要的位图。我有一个 JPG，我想在屏幕上显示它，点击它会打开一个浏览器到某个网页。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:17:59.780

```
imageObject.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

          WebView myWebView = (WebView) findViewById(R.id.webview);
          myWebView.loadUrl("http://www.example.com");
        }
    }); 
```

还要编辑 android-manifest.xml 并设置 USER-PERMISSIONS 以便您的应用可以使用互联网。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:19:50.633

使用点击[`Event Listeners`](http://developer.android.com/guide/topics/ui/ui-events.html)。

```
image.setOnClickListener(new Button.OnClickListener() {  
    public void onClick(View v)
        {
            //perform action
        }
     }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T05:25:07.763

```
Imageview.setOnClickListener(new OnClickListener()
        {

            public void onClick(View arg0) 
            {
                startActivity(new Intent(Intent.ACTION_VIEW,Uri.parse("www.google.com")));
            }
        }); 
```

并且不要忘记添加 Internet 权限..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T05:16:24.553

您可以`setonclicklistner`为此使用方法...

```
image.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                // ur code to open the browser
            }
        }); 
```

# bash - Why commands in .bashrc are not executed?

> ID：12085101
> 
> 赞同：0
> 
> 时间：2012-08-23T05:13:59.937
> 
> 标签：bash, unix, redhat, csh

I have the following lines in my .bashrc which I would like to get executed upon logging in through ssh.

```
csh
source /x/y/.cshrc
source /x/y/z/sourceme 
```

But the problem is that only the first command is being executed correctly. (csh prompt is coming up) The following source command is not effected. I noticed that there are some errors which are thrown from bash (not csh) for the 'source' command

I read somewhere that this may be due to .bashrc getting executed multiple times. And source commands trying to get executed in bash itself rather than csh.

I want all the three commands to be executed one after other upon log-in. how can I do that? I tried .bash_profile .bash_login etc. Also I don't have write access to /etc/profile

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T05:16:51.690

“命令”由 bash shell 解释。它们不是要馈送到终端的字节。发生的情况是 csh 以交互方式运行，一旦退出，bash 将获取两个（可能是 csh）脚本文件。

看起来您只是想将您的外壳更改为 csh （为什么，我不知道）。您是否尝试过使用`chsh`它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:57:41.760

如果您想在 中运行这些命令`csh`，请将它们移动到您的`.cshrc`.

不过要注意一点；绝对使用`csh`任何东西都会引发问题，你真的认为你知道你在做什么吗？为什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:01:18.157

`source`是一个[“bashism”](http://lintian.debian.org/tags/possible-bashism-in-maintainer-script.html)，也就是说它在其他shell中不起作用。改为使用`.`。

# actionscript-3 - 将数据网格导出到 Excel

> ID：12085107
> 
> 赞同：0
> 
> 时间：2012-08-23T05:14:13.247
> 
> 标签：actionscript-3, apache-flex, flex4.5, export-to-excel

我创建了一个数据网格，还在数据网格之外创建了一些文本框和一个提交按钮。如果我们在文本框中输入了一些数据，然后单击提交按钮，则数据将存储到数据网格中。我想从中导出这些数据数据网格导出到 excel。它是如何可能的？我如何创建一个 excel 表以及它如何与我的数据网格连接？我的代码如下

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" creationComplete="application1_creationCompleteHandler(event)">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import com.as3xls.xls.Sheet;

            import mx.collections.ArrayCollection;
            import mx.controls.Alert;
            import mx.effects.easing.Exponential;
            import mx.events.FlexEvent;

            [Bindable]
            public var dgItems_client:ArrayCollection = new ArrayCollection();
            public var dgItems_admin:ArrayCollection = new ArrayCollection();
            public var temp_client:Object = new Object();
            public var temp_admin:Object = new Object();
            private var fileRef:FileReference=new FileReference;
            private var sheet:Sheet;
            //          public var imagegrid:Image;
            private function tabChange():void
            {
                errorAdmin.visible=false;
                errorClient.visible=false;
                if(gh.selectedChild.name=='clientTab')
                {
                    details.dataProvider=dgItems_client;
                    arrayName.headerText="Client_Name";
                }
                else
                {
                    details.dataProvider=dgItems_admin;
                    arrayName.headerText="Admin_Name";
                }
            }
            private function submitClick():void
            {
                if(name_client.text!="" && address_client.text!="" && phone_client.text!="")
                {

                    temp_client = ({Name:name_client.text, Address:address_client.text,Phone_Number:phone_client.text});
                    dgItems_client.addItem(temp_client);
                    name_client.text="";
                    address_client.text="";
                    phone_client.text="";
                    clientClick();
                    errorClient.visible=false;
                }
                else
                {
                    errorClient.visible=true;
                }
                if(name_admin.text!=""&&address_admin.text!=""&&phone_admin.text!="")
                {
                    temp_admin = ({Name:name_admin.text, Address:address_admin.text,Phone_Number:phone_admin.text});
                    dgItems_admin.addItem(temp_admin);
                    name_admin.text="";
                    address_admin.text="";
                    phone_admin.text="";
                    errorAdmin.visible=false;
                }
                else
                {
                    errorAdmin.visible=true;
                }

            }
            private function clientClick():void
            {

                details.dataProvider=dgItems_client;
                arrayName.headerText="Client_Name";
            }
            private function adminClick():void
            {

                details.dataProvider=dgItems_admin;
                arrayName.headerText="Admin_Name";
            }
            protected function application1_creationCompleteHandler(event:FlexEvent):void
            {
                fileRef.addEventListener(Event.SELECT,fileSelected);

            }
            private function fileSelected():void
            {

            }
            private function executeExport():void
            {
                 sheet=new Sheet;
//               var dataProviderCollection:ArrayCollection;
                var rowCount:int=details.columnsLength;
                Alert.show(rowCount.toString());
            }

        ]]>
    </fx:Script>
    <mx:TabNavigator x="27" y="11" width="455" height="376" id="gh" change="tabChange()" backgroundColor="#A4B6E9">
        <s:NavigatorContent width="100%" height="100%" label="Client" id="clientTab">
            <s:Label x="10" y="30" width="52" height="25" text="Name:"/>
            <s:Label x="10" y="127" width="52" height="28" text="Address:"/>
            <s:TextInput id="name_client" x="69" y="18" width="188" height="37" restrict="a-zA-Z"/>
            <s:TextArea id="address_client" x="70" y="70" height="126"/>
            <s:Label x="10" y="230" width="84" height="32" text="Phone:"/>
            <s:TextInput id="phone_client" x="70" y="218" width="188" height="30" restrict="0-9" maxChars="10"/>
            <s:Button x="100" y="291" height="28" label="Submit"  click="submitClick()"/>           
            <s:Label id="errorClient" x="59" y="270" width="171" height="27" text="please fill the blank fields" color="red" visible="false"/>
        </s:NavigatorContent>
        <s:NavigatorContent width="100%" height="100%" label="Admin" id="adminTab" >
            <s:Label x="23" y="48" width="52" height="25" text="Name:"/>
            <s:Label x="26" y="148" width="52" height="28" text="Address:"/>
            <s:TextInput id="name_admin" x="105" y="33" width="188" height="37"/>
            <s:TextArea id="address_admin" x="105" y="93" height="126"/>
            <s:Label x="26" y="257" width="84" height="32" text="Phone:"/>
            <s:TextInput id="phone_admin" x="104" y="246" width="188" height="30" restrict="0-9" maxChars="10"/>
            <s:Button x="137" y="305" height="28" label="Submit" click="submitClick()"/>
            <s:Label id="errorAdmin" x="100" y="286" width="171" height="17" color="red" fontSize="14"
                     text="please fill the blank fields" visible="false"/>
            <s:Button x="335" y="60" height="34" label="Admin Details" click="adminClick()"/>
            <s:Button x="335" y="180" height="34" label="Client Details" click="clientClick()"/>

        </s:NavigatorContent>
    </mx:TabNavigator>
    <s:TitleWindow x="521" y="84" width="377" height="234">
        <s:DataGrid x="0" y="0" width="375" height="163" borderVisible="true" id="details">
            <s:columns>
                <s:ArrayList>
                    <s:GridColumn dataField="Name" id="arrayName"></s:GridColumn>
                    <s:GridColumn dataField="Address" headerText="Address"></s:GridColumn>
                    <s:GridColumn dataField="Phone_Number" headerText="Phone_Number"></s:GridColumn>
                </s:ArrayList>
            </s:columns>
        </s:DataGrid>
        <s:Button x="139" y="167" height="28" label="Export" click="executeExport()"/>
    </s:TitleWindow>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:36:47.750

好的...您可以尝试以下代码：-

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" 
               >
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import com.as3xls.xls.Sheet;

            import mx.collections.ArrayCollection;
            import mx.controls.Alert;
            import mx.effects.easing.Exponential;
            import mx.events.FlexEvent;

            [Bindable]
            public var dgItems_client:ArrayCollection = new ArrayCollection();
            public var dgItems_admin:ArrayCollection = new ArrayCollection();
            public var temp_client:Object = new Object();
            public var temp_admin:Object = new Object();

            private function tabChange():void
            {
                errorAdmin.visible=false;
                errorClient.visible=false;
                if(gh.selectedChild.name=='clientTab')
                {
                    details.dataProvider=dgItems_client;
                    arrayName.headerText="Client_Name";
                }
                else
                {
                    details.dataProvider=dgItems_admin;
                    arrayName.headerText="Admin_Name";
                }
            }
            private function submitClick():void
            {
                if(gh.selectedIndex == 0)
                {
                    if(name_client.text!="" && address_client.text!="" && phone_client.text!="")
                    {

                        temp_client = ({Name:name_client.text, Address:address_client.text,Phone_Number:phone_client.text});
                        dgItems_client.addItem(temp_client);
                        name_client.text="";
                        address_client.text="";
                        phone_client.text="";
                        clientClick();
                        errorClient.visible=false;
                    }
                    else
                    {
                        errorClient.visible=true;
                    }
                }else
                {
                    if(name_admin.text!="" && address_admin.text!="" && phone_admin.text!="")
                    {
                        temp_admin = ({Name:name_admin.text, Address:address_admin.text,Phone_Number:phone_admin.text});
                        dgItems_admin.addItem(temp_admin);
                        name_admin.text="";
                        address_admin.text="";
                        phone_admin.text="";
                        errorAdmin.visible=false;
                    }
                    else
                    {
                        errorAdmin.visible=true;
                    }
                }
            }

            private function clientClick():void
            {

                details.dataProvider=dgItems_client;
                arrayName.headerText="Client_Name";
            }
            private function adminClick():void
            {

                details.dataProvider=dgItems_admin;
                arrayName.headerText="Admin_Name";
            }

            private function executeExport():void
            {
                ExcelExporterUtil.dataGridExporter(this.details, "prueba_excel.xls");
            }

        ]]>
    </fx:Script>
    <mx:TabNavigator x="27" y="11" width="455" height="376" id="gh" change="tabChange()" backgroundColor="#A4B6E9">
        <s:NavigatorContent width="100%" height="100%" label="Client" id="clientTab">
            <s:Label x="10" y="30" width="52" height="25" text="Name:"/>
            <s:Label x="10" y="127" width="52" height="28" text="Address:"/>
            <s:TextInput id="name_client" x="69" y="18" width="188" height="37" restrict="a-zA-Z"/>
            <s:TextArea id="address_client" x="70" y="70" height="126"/>
            <s:Label x="10" y="230" width="84" height="32" text="Phone:"/>
            <s:TextInput id="phone_client" x="70" y="218" width="188" height="30" restrict="0-9" maxChars="10"/>
            <s:Button x="100" y="291" height="28" label="Submit"  click="submitClick()"/>           
            <s:Label id="errorClient" x="59" y="270" width="171" height="27" text="please fill the blank fields" color="red" visible="false"/>
        </s:NavigatorContent>
        <s:NavigatorContent width="100%" height="100%" label="Admin" id="adminTab" >
            <s:Label x="23" y="48" width="52" height="25" text="Name:"/>
            <s:Label x="26" y="148" width="52" height="28" text="Address:"/>
            <s:TextInput id="name_admin" x="105" y="33" width="188" height="37"/>
            <s:TextArea id="address_admin" x="105" y="93" height="126"/>
            <s:Label x="26" y="257" width="84" height="32" text="Phone:"/>
            <s:TextInput id="phone_admin" x="104" y="246" width="188" height="30" restrict="0-9" maxChars="10"/>
            <s:Button x="137" y="305" height="28" label="Submit" click="submitClick()"/>
            <s:Label id="errorAdmin" x="100" y="286" width="171" height="17" color="red" fontSize="14"
                     text="please fill the blank fields" visible="false"/>
            <s:Button x="335" y="60" height="34" label="Admin Details" click="adminClick()"/>
            <s:Button x="335" y="180" height="34" label="Client Details" click="clientClick()"/>

        </s:NavigatorContent>
    </mx:TabNavigator>
    <s:TitleWindow x="521" y="84" width="377" height="234">
        <mx:DataGrid x="0" y="0" width="375" height="163" borderVisible="true" id="details">
            <mx:columns>
                <mx:DataGridColumn dataField="Name" id="arrayName"></mx:DataGridColumn>
                <mx:DataGridColumn dataField="Address" headerText="Address"></mx:DataGridColumn>
                <mx:DataGridColumn dataField="Phone_Number" headerText="Phone_Number"></mx:DataGridColumn>
            </mx:columns>
        </mx:DataGrid>
        <s:Button x="139" y="167" height="28" label="Export" click="executeExport()"/>
    </s:TitleWindow>
</s:Application> 
```

**ExcelExporterUtil.as**

```
package 
{
    import com.as3xls.xls.ExcelFile;
    import com.as3xls.xls.Sheet;

    import flash.errors.IllegalOperationError;
    import flash.net.FileReference;
    import flash.utils.ByteArray;

    import mx.collections.ArrayCollection;
    import mx.collections.ICollectionView;
    import mx.collections.IViewCursor;
    import mx.collections.XMLListCollection;
    import mx.controls.DataGrid;

    public class ExcelExporterUtil
    {
        public function ExcelExporterUtil()
        {
            throw new IllegalOperationError("Class \"ExcelExporterUtil\" is static. You can't instance this");
        }

        static public function dataGridExporter(dg:DataGrid, defaultName:String):void
        {
            if (dg == null || dg.dataProvider == null || defaultName == null || defaultName == "")
                return;

            var cols:Number = 0;
            var colsValues:Array = [];
            var cantCols:Number = dg.columnCount;
            var fieldT:String;
            var headerT:String;

            // armo el listado de headers y variables para cada columna
            for ( ; cols < cantCols; cols++)
            {
                headerT = (dg.columns[cols] as Object).headerText
                fieldT = (dg.columns[cols] as Object).dataField;
                if ( fieldT == null || fieldT == "" || headerT == null || headerT == "")
                    continue; 
                colsValues.push({
                    header:headerT,
                    value:fieldT
                });
            }

            if ( colsValues.length == 0 )
                return;

            ExcelExporterUtil.export(dg.dataProvider, colsValues, defaultName);
        }

        static public function chartExporter(chart:ByteArray, defautlName:String):void
        {
            if(chart)
            {
                var sheet:Sheet = new Sheet();
                sheet.resize(1, 1);
                sheet.setCell(0, 0, "Chart Data");

                sheet.setCell(0,0,chart);

                var xls:ExcelFile = new ExcelFile();
                xls.sheets.addItem(sheet);
                var bytes:ByteArray = xls.saveToByteArray();

                var fr:FileReference = new FileReference();
                fr.save(bytes, defautlName);    
            }
        }

        static public function export(obj:Object, colsValues:Array, defautlName:String):void
        {
            var _dp:ICollectionView = ExcelExporterUtil.getDataProviderCollection(obj);
            if ( _dp == null )
                return;

            var rows:Number = 0;
            var cols:Number = 0;
            var cantCols:Number = colsValues.length;
            var sheet:Sheet = new Sheet();
            sheet.resize(_dp.length, colsValues.length);

            for ( ; cols < cantCols; cols++)
            {
                sheet.setCell(rows, cols, colsValues[cols].header);
            }

            cols = 0;
            rows++;
            var cursor:IViewCursor = _dp.createCursor();
            while ( !cursor.afterLast )
            {
                for (cols = 0 ; cols < cantCols; cols++)
                {
                    if ( (cursor.current as Object).hasOwnProperty(colsValues[cols].value) )
                        sheet.setCell(rows, cols, (cursor.current as Object));
                }

                rows++;
                cursor.moveNext();
            }

            var xls:ExcelFile = new ExcelFile();
            xls.sheets.addItem(sheet);
            var bytes:ByteArray = xls.saveToByteArray();

            var fr:FileReference = new FileReference();
            fr.save(bytes, defautlName);
        }

        static private function getDataProviderCollection(obj:Object):ICollectionView
        {
            if ( (obj is Number && isNaN(obj as Number)) || (!(obj is Number) && obj == null))
            {
                return null;
            }
            else if ( obj is ICollectionView )
            {
                return obj as ICollectionView;
            }
            else if ( obj is Array )
            {
                return new ArrayCollection(obj as Array);
            }
            else if ( obj is XMLList )
            {
                return new XMLListCollection(obj as XMLList);
            }
            else if ( obj is XML )
            {
                var col:XMLListCollection = new XMLListCollection();
                col.addItem(obj);
                return col;
            }
            else if ( obj is Object )
            {
                return new ArrayCollection([obj]);
            }
            else
            {
                return null;
            }
        }
    }
} 
```

希望可以帮助你..注意： - 我正在使用其中一篇文章中的 ExcelExporterUtil.as .. 不是我创建的..

或其他方式，可以参考下面的帖子： - [http://cookbooks.adobe.com/post_Import_Export_data_in_out_of_a_Datagrid_in_Flex-17223.html](http://cookbooks.adobe.com/post_Import_Export_data_in_out_of_a_Datagrid_in_Flex-17223.html)

# c++ - glm::rotate() 调用无法编译？

> ID：12085109
> 
> 赞同：4
> 
> 时间：2012-08-23T05:14:50.547
> 
> 标签：c++, opengl, glfw, glm-math

我无法调用 glm::rotate(mat4, int, vec3(x,y,z)); 去工作。VS 2010 告诉我

```
Intellisense: no instance of function template "glm::gtc::matrix_transform::rotate" matches the argument 
```

我正在使用 glm-0.9.1

我见过这个堆栈溢出问题，但解决方案仍然会触发智能感知错误：[glm rotate usage in Opengl](https://stackoverflow.com/questions/8844585/glm-rotate-usage-in-opengl)

我真的不能让它接受任何重载方法。不过，我可能只是遗漏了一些明显的东西。

我试图在代码中使旋转调用明显，它有点落后。

这是一些代码：

```
#include <GL/glew.h>
#include <GL/glfw.h>
#include <GL/glut.h>
#include <glm/glm.hpp>
#include <glm/gtc/matrix_transform.hpp>

#include "loadShader.h"

#include <stdio.h>
#include <stdlib.h>

glm::mat4 Projection;
glm::mat4 View;
glm::mat4 Model;
glm::mat4 MVP;

glm::mat4 t;
glm::mat4 s;
glm::mat4 r;

GLuint programID;

int main()
{

    // Initialise GLFW
    if( !glfwInit() )
    {
        fprintf( stderr, "Failed to initialize GLFW\n" );
        return -1;
    }

    glfwOpenWindowHint(GLFW_FSAA_SAMPLES, 4);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 3);
    glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

    // Open a window and create its OpenGL context
    if( !glfwOpenWindow( 1024, 768, 0,0,0,0, 32,0, GLFW_WINDOW ) )
    {
        fprintf( stderr, "Failed to open GLFW window. If you have an Intel GPU, they are not 3.3 compatible. Try the 2.1 version of the tutorials.\n" );
        glfwTerminate();
        return -1;
    }

    // Initialize GLEW
    if (glewInit() != GLEW_OK) {
        fprintf(stderr, "Failed to initialize GLEW\n");
        return -1;
    }

    glfwSetWindowTitle( "Tutorial 02" );

    // Ensure we can capture the escape key being pressed below
    glfwEnable( GLFW_STICKY_KEYS );

    glewExperimental = GL_TRUE;
    glewInit();

    // Dark blue background
    glClearColor(0.0f, 0.0f, 0.3f, 0.0f);

    GLuint VertexArrayID;

    glGenVertexArrays(1, &VertexArrayID);

    glBindVertexArray(VertexArrayID);

    // Create and compile our GLSL program from the shaders
    programID = LoadShaders( "vertexShader.glsl", "fragmentShader.glsl" );

        //Pojectio matrix : 45 degree Field of view, 4:3 ratio, display range : 0.1 unit <-> 100 units
    Projection = glm::perspective( 45.0f, 4.0f / 3.0f, 0.1f, 100.0f );
    // Camera matrix
    View = glm::lookAt(
        glm::vec3(4,3,3), // Camera is at (4,3,3), in World Space
        glm::vec3(0,0,0), // and looks at the origin
        glm::vec3(0,1,0) // Head is up (set to 0, -1,0 to look upside down)
        );
    // Model matrix : an identity matrix (model will be at the origin)

    Model = glm::mat4(1.0f); // Changes for each Model !

    //INTELLISENSE ERROR ==================================================================>>>>
    r = glm::rotate(Model, 45, glm::vec3(1,0,0));

    // Our ModelViewProjection : multiplication of our 3 matrices
    MVP = Projection * View * Model; // Remember matrix multiplication is the other way around

        // Get a handle for our "MVP" uniform.
    // Only at initialisation time.
    GLuint MatrixID = glGetUniformLocation(programID, "MVP");

    // Send our transformation to the currently bound shader,
    // in the "MVP" uniform
    // For each model you fender, since the MVP will be different (at least the M part)

    static const GLfloat g_vertex_buffer_data[] = { 
        -1.0f, -1.0f, 0.0f,
         1.0f, -1.0f, 0.0f,
         0.0f,  1.0f, 0.0f,
    };

    GLuint vertexbuffer;
    glGenBuffers(1, &vertexbuffer);
    glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);

    do{

        // Clear the screen
        glClear( GL_COLOR_BUFFER_BIT );

        // Use our shader
        glUseProgram(programID);

        glUniformMatrix4fv(MatrixID, 1, GL_FALSE, &MVP[0][0]);

        // 1rst attribute buffer : vertices
        glEnableVertexAttribArray(0);
        glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
        glVertexAttribPointer(
            0,                  // attribute 0\. No particular reason for 0, but must match the layout in the shader.
            3,                  // size
            GL_FLOAT,           // type
            GL_FALSE,           // normalized?
            0,                  // stride
            (void*)0            // array buffer offset
        );

        // Draw the triangle !
        glDrawArrays(GL_TRIANGLES, 0, 3); // From index 0 to 3 -> 1 triangle

        glDisableVertexAttribArray(0);

        // Swap buffers
        glfwSwapBuffers();

    } // Check if the ESC key was pressed or the window was closed
    while( glfwGetKey( GLFW_KEY_ESC ) != GLFW_PRESS &&
           glfwGetWindowParam( GLFW_OPENED ) );

    // Close OpenGL window and terminate GLFW
    glfwTerminate();

    // Cleanup VBO
    glDeleteBuffers(1, &vertexbuffer);
    glDeleteVertexArrays(1, &VertexArrayID);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-23T05:30:27.423

我对模板的了解不够多，无法给你一个很好的答案，但我相信根据我对 GLM 的记忆，它对类型非常挑剔。

您可以尝试显式更改`45`以`45.f`查看它是否接受吗？我认为你需要有一致的参数（浮点矩阵、浮点数、浮点向量）。我认为 int 以某种方式混淆了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:32:29.430

```
glm::rotate(Model, (glm::mediump_float)45, glm::vec3(1,0,0)); 
```

我发现这个演员表很有帮助，因为`glm::vec3`用作模板的类型。

这个函数是这样定义的：

```
glm::detail::tmat4x4<glm::lowp_float> glm::rotate<glm::lowp_float> ( const glm::detail::tmat4x4<glm::lowp_float> &m, const glm::lowp_float &angle, const glm::detail::tvec3<glm::mediump_float> &axis) 
```

因此，您必须在角度值中使用适当的类型。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2021-03-05T04:15:32.457

我认为实际上在“glm.h”文件中存在问题。老实说，我不太了解技术知识来解释原因，但是当我尝试修复此错误时，它奏效了。所以我只想把我的经验分享给有需要的人。

如您所知，我们定义 our-self 的库文件应该（或需要）放在双引号（“”）而不是尖括号（< >）之间。

因此，当我右键单击#include“glm.h”（转到文档“glm.h”）以查看发生了什么时，它会将我引导至该文件。在里面，我可以看到另外 3 行：

```
#include <glm/glm.hpp>
#include <glm/gtc/matrix_transform.hpp>
#include <glm/gtc/type_ptr.hpp> 
```

然后我将 <> 更改为“”，正如我之前所说：

```
#include "glm/glm.hpp"
#include "glm/gtc/matrix_transform.hpp"
#include "glm/gtc/type_ptr.hpp" 
```

我的 glm::rotate() 函数现在可以工作了！！！

# python - Accessing array items

> ID：12085110
> 
> 赞同：0
> 
> 时间：2012-08-23T05:14:57.090
> 
> 标签：python, spyder

I've got a list that is one dimensional that I need separated by spaces. I am running this script in spyder for ubuntu running on parallels on Mac OS 10.8.

what I'm getting is this:

```
print poly    
Output: [array([ 0.01322341,  0.07460202,  0.00832512])]

print poly[0]    
Output: [array([ 0.01322341,  0.07460202,  0.00832512])]

print poly[1]    
Output:
Traceback (most recent call last):

  File "/home/parallels/.../RampEst.py", line 38, in <module>

    print poly[1]

IndexError: list index out of range 
```

The "..." is the rest of the file directory.

What I need is:

```
print poly[0]    
Output: 0.01322341

print poly[1]    
Output: 0.07460202

print poly[2]    
Output: 0.00832512 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T05:27:06.693

您正在`list`以错误的方式构建对象。如果您发布您正在执行的操作，则可能会清楚实际问题。

您会注意到以下内容：

```
mylist = [ 0.01322341,  0.07460202,  0.00832512]
mylist[0] # 0.01322341 
mylist[1] # 0.07460202 
mylist[2] # 0.00832512 
```

工作正常。从您发布的内容来看，您有一种`list`类型`array`。当您访问该`0`元素时，您将检索`array`列表中的唯一对象。如果您无法更改列表的结构，这将正常工作。

```
poly[0][0] # 0.01322341 
poly[0][1] # 0.07460202 
poly[0][2] # 0.00832512 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:19:53.327

你如何首先初始化多边形？该数组似乎在一个列表中，这将使其成为列表的第零个元素。因此，当您请求 poly[1] 时，它会失败。要检查我所说的是否正确，请执行 poly[0][0]、poly[0][1] 和 poly[0][2]。如果这些返回您想要的数字，那么您的 poly 在列表中。

# jboss - What's the solution to the JBoss AS 7.1 dom4j Exception?

> ID：12085114
> 
> 赞同：2
> 
> 时间：2012-08-23T05:15:26.427
> 
> 标签：jboss, jpa-2.0, dom4j

I've got RESTful web services that I deploy in a .war file in JBoss AS 7.1\. So far so good. Now I'm adding a .jar file with JPA 2.0 Entities. When I deploy the .war with the .jar file with the JPA Entities included I get this Exception at deploy time:

```
org.dom4j.DocumentFactory cannot be cast to org.dom4j.DocumentFactory 
```

This problem is posted numerous times all over the web and there are about half as many suggested solutions but none of them work.

There is no dom4j.jar in my archive. My Hibernate 4.0 dependencies are all `<scope>provided</scope>`. None of the .jar files included in my .war file have any dom4j classes in them.

Does anyone know what causes this with JBoss 7.1 and what the solution is?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:06:17.607

dom4j 异常是由于standalone.xml 中的端口号不正确引起的。JBoss 没有抛出有意义的异常，而是抛出了关于 dom4j 的无意义异常。

更正端口号后，我尝试通过取消部署存档、关闭 JBoss 并将端口号设置回不正确的端口号来重现错误。这次我部署并启用存档时，JBoss 显示了一个异常，它无法获得数据源的托管连接。在第一次成功部署具有正确 .

关于这个过程的更长的线程是[here](https://community.jboss.org/thread/204417)。

# git - Git：如何生成树对象的 SHA1 值？

> ID：12085116
> 
> 赞同：0
> 
> 时间：2012-08-23T05:15:42.747
> 
> 标签：git, sha

如标题所示，该值是否基于内部所有树对象（递归）的内容？

即，如果两个树对象具有相同的哈希值，我可以将它们视为完全相同的文件树（包括所有子目录和文件）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:20:43.783

[您可以在此处](http://git-scm.com/book/en/Git-Internals-Git-Objects#Tree-Objects)查看有关用于计算树 SHA 的一些粗略细节。

可以在[此处](http://smalltalkthoughts.blogspot.com.au/2010/03/git-tree-objects-how-are-they-stored.html)找到有关存储树的二进制格式的更多信息。

使用的实际 SHA 只是该详细版本中描述的缓冲区的 SHA。

要带回家的关键点是 SHA 依赖于所有包含的对象或树的文件名、它们的 SHA 和它们的权限。更改其中任何一个，您都会更改 SHA。如果两棵树具有相同的 SHA，那么所有这些组件都必须匹配（排除冲突的可能性，因为它们几乎是不可能的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T02:32:07.367

我认为不可能有两个具有相同哈希的树对象，因为对象文件由存储库中的哈希命名。此外，为了使两个树对象相同，它要求提交的状态在两种情况下都相同，直到所有暂存文件的内容，因为树对象保留对暂存文件的 SHA-1 引用。

这篇[文章](http://gnuromancer.org/2013/01/14/git-guts/)可能有助于澄清这一点。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-26T01:25:45.650

为了扩展[迈克尔安德森的答案](https://stackoverflow.com/a/12085160/1256452)，树对象的哈希计算方式与任何其他对象的哈希相同：它是 H(object-content-including-header)，其中 H 是哈希函数（SHA-1 或者，现在， SHA-256)。包含标题的内容具有链接中描述的形式：

*   对象的类型：文字文本“blob”、“tree”、“commit”或“tag”（后跟空格）。它们采用 ASCII 或 UTF-8 格式（因为它们仅包含 ASCII 字节，所以无论哪种方式都只是一个字节串）。

*   对象大小的 ASCII 表示，以十进制表示。例如，如果剩余的数据是 16 字节长，我们会得到 ASCII 字符`1`和`6`.

*   一个 ASCII NUL（零字节）。

*   对象的原始数据。

对于*树*对象，原始数据是三元组重复出现的次数：模式、名称、哈希。模式是一个没有前导零的八进制数，以 ASCII 表示。它与名称用空格隔开（字节值 32 十进制）。该名称通常被假定为 UTF-8 字节，尽管很少或根本没有检查它是否是有效的 UTF-8；它不能包含 ASCII`/`或 NUL 字符。它由 ASCII NUL 终止。使用 SHA-1 时，哈希是原始的 20 字节哈希 ID，使用 SHA-256 时是 32 字节哈希 ID。

这三个元组是由 Git 的索引生成的，Git 的索引是按排序顺序保存的。这意味着如果您想生成与*Git**相同*的树对象数据，则必须以*相同的顺序*生成条目。[我有示例 Python 代码，它将读取一个目录并在此处](https://github.com/chris3torek/scripts/blob/master/githash.py)收集将进入树对象的数据。

# c++ - 指针的深拷贝向量

> ID：12085121
> 
> 赞同：4
> 
> 时间：2012-08-23T05:16:03.323
> 
> 标签：c++, class, pointers, deep-copy

我是一个非常新的程序员和一个超级初学者，所以我对 c++ 了解不多。我特别有一个关于制作指针的深层副本的问题。我所拥有的是一个充满 POD 的 A 类和一个指向该类的指针 (A *P)。我有第二个 B 类，它包含一些其他 POD 和一个指向 A 类的指针向量。我想填充 A *P 的深拷贝向量，因为在循环中我将动态分配和释放它。以下不起作用。我相信它是我的复制构造函数和 = 运算符的重载。这是我为了乐趣和学习而做的事情。

```
class A
{
   public:  
   .....
   .....
   .....
};

class B
{
   public:  
   B();
  ~B();
   B(const B &Copier);
   B& B::operator=(const B &Overloading);
   vector<A*> My_Container;
   A* Points_a_lot;
   int counter;
 };
B::B()
{
  counter=0;
  Points_a_lot=NULL;
}
B::~B()
{
   for(size_t i=0; i<My_Container.size(); i++)
   {
      delete My_Container[i];
    }
 }
 B::B(const B &Overloading)
 {
     My_Container[counter]=new A(*Overloading.Points_a_lot);
 }
 B& B::operator=(const B &Overloading)
 {
     if(!Overloading.My_Container.empty()) 
     {
         Overloading.My_Container[counter]=new B(*Overloading.Points_a_lot);
      }
      return *this; 
  } 
 int main()
 {  A* p=NULL;
    B Alphabet;
    for(....)
    {
        p=new A;
        //some stuff example p->Member_of_A=3; etc..
        Alphabet.My_Container[Alphabet.counter]=p;
        Alphabet.counter++;
       delete p;
     }
    return 0;
   } 
```

任何帮助都会很棒。我感谢你的时间。假设包括所需的库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T05:31:33.163

好的，在我看来，您对 operator= 应该做什么感到非常困惑。看看这个关于[操作符重载](http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html)的页面。这应该让您开始为该功能走上正确的道路。

其次，与您的问题无关，请查看有关为什么您的字段（成员变量、您拥有什么）应该是私有的[这个问题。](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T05:30:06.430

您的代码中有很多错误。主要的是，您的赋值运算符和复制构造函数根本没有深度复制 a`vector`的指针`A`，而是试图将 a`B*`放在向量的位置。您的赋值运算符应该做的是删除向量指向的元素，并在检查自赋值后用源对象向量指向的元素的深层副本填充它。您的复制构造函数应该填充源对象元素的深层副本。

其次，您应该提供一种将元素添加到类向量的方法，并让它在内部设置计数器变量。必须在外部协调向量和计数器是容易出错的，OOP 的优点之一是避免这种错误。但更好的是，`counter`完全删除变量。你不需要它。然后您`main`的将被简化为：

```
int main()
{
  B Alphabet;
  for(....)
  {
    A* p = new A;
    //some stuff example p->Member_of_A=3; etc..
    Alphabet.appendElement(p); // B takes ownership, no need to delete in main
  }
} 
```

并且`appendElement`可能是

```
class B
{
 public:
  void appendElement(A* element) { myContainer_.push_back(element); }
  // other public methods
 private:
   std::vector<A*> myContainer_;
}; 
```

您可以通过存储某种单一所有权智能指针而不是原始指针来进一步改进所有这些。这意味着您不必担心自己进行删除。但这可能超出了这个问题的范围。

现在，您应该考虑完全避免使用指针。在这种情况下，您必须不提供复制构造函数、赋值运算符或析构函数。编译器合成的就可以了。你的 B 类减少到

```
class B
{
 public:
  void appendElement(const A& element) { myContainer_.push_back(element); }
  // other public methods
 private:
   std::vector<A> myContainer_;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T05:57:48.223

我不完全了解您的要求，因此我尝试修复代码并进行深层复制，`B`因为这似乎是您所要求的。

```
#include <vector>
using namespace std;

class A
{
public:
    A() : m_someInt(0), m_someFloat(0.0f) {}

    // Redundant but putting it here for you to see when it is called (put break-point)
    A(const A& a_other)
    {
        m_someInt = a_other.m_someInt;
        m_someFloat = a_other.m_someFloat;
    }

    int   m_someInt;
    float m_someFloat;
};

class B
{
public:  
    B();
    ~B();
    B(const B &Copier);
    B& B::operator=(const B &Overloading);
    void Cleanup();
    void AddA(const A* a);

private:

    vector<A*> My_Container;
    A* Points_a_lot;
};

B::B()
{
    Points_a_lot=NULL;
}

B::~B()
{
    Cleanup();
}

B::B(const B &Overloading)
{
    // Deep copy B
    operator=(Overloading);
}

B& B::operator=(const B &Overloading)
{
    // Delete old A's
    Cleanup();

    // Not using iterators to keep it simple for a beginner
    for (size_t i = 0; i < Overloading.My_Container.size(); ++i)
    {
        // We need new A's which will then copy from the A's in Overloading's container
        A* newA = new A( *(Overloading.My_Container[i]) );
        // Done with allocation and copy, push_back to our container
        My_Container.push_back(newA);
    }

    return *this; 
}

void B::Cleanup()
{
    // Assuming B is not responsible for cleaning up Points_a_lot
    Points_a_lot = NULL;

    for (size_t i = 0; i < My_Container.size(); ++i)
    {
        delete My_Container[i];
    }

    // Automatically called when My_Container is destroyed, but here we 
    // are open to the possibiliy of Cleanup() being called by the client
    My_Container.clear(); 
}

void B::AddA(const A* a)
{
    // We are adding a new A. In your code, the incoming A is going to 
    // be destroyed, therefore, we need to allocate a new A and copy 
    // the incoming A
    A* newA = new A(*a);
    My_Container.push_back(newA);
}

int main()
{  
    A* p=NULL;
    B Alphabet;
    for(int i = 0; i < 10; ++i)
    {
        p = new A();
        //some stuff example p->Member_of_A=3; etc..
        Alphabet.AddA(p);
        delete p;
    }

    // If you put a breakpoint here and step through your code, you will see
    // `B` deep-copied
    B NewAlphabet = Alphabet;

    return 0;
} 
```

几点注意事项：

*   `New`循环中的ing 和`delete`ing`A`是一个坏主意。我意识到你这样做只是为了学习，这很好，但你可能要记住这一点。与其破坏`A`，`p`不如让`B`自己拥有新的东西`A`
*   使用调试器单步执行代码以查看其工作原理
*   当询问“为什么这不起作用/编译”时，尝试发布尽可能接近原始代码的代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T05:47:59.053

看起来你应该让你的 My_Container 由 unique_ptrs 组成，这样当你分配时，向量就会接管 A 实例的所有权

```
for(....)
{
    p=new A;
    //some stuff example p->Member_of_A=3; etc..
    Alphabet.My_Container[Alphabet.counter]=p;
    Alphabet.counter++;
   delete p;
 } 
```

所以改为将 My_Container 声明为

```
vector<std::unique_ptr<A*> > My_Container; 
```

那么代码将是

```
for(....)
{
    p=new A;
    //some stuff example p->Member_of_A=3; etc..
    Alphabet.My_Container[Alphabet.counter]=p;
    Alphabet.counter++;
 } 
```

然后，如果您需要进行“深度复制”，请在 A 中创建一个名为 clone() 的成员并将 a 返回`unique_ptr`给实例，在需要创建副本时使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T06:40:43.343

你可能想看看`boost::ptr_vector`。它的接口与 a 的接口非常相似，`std::vector`但它是为指针量身定制的，因此：

*   拥有资源（所以没有内存泄漏）
*   允许多态存储（派生类）
*   是 const 正确且复制正确的

为了使副本起作用，您必须提供一个`A* new_clone(A const*)`实现。

# asp.net - Ajax CalendarExtender 在谷歌浏览器中显示在错误的位置

> ID：12085123
> 
> 赞同：0
> 
> 时间：2012-08-23T05:16:16.680
> 
> 标签：asp.net, css, asp.net-ajax, ajaxcontroltoolkit

我正在使用 CalendarExtender 控件，它是分配文本框，CalendarExtender 在文本框下方很好，但我的问题是我在页面底部有一个文本框，所以需要向下滚动并选择文本框。这是我滚动并选择文本框时的问题，我的日历显示在屏幕上方的某个位置，而不是完全正确的位置。我更改分辨率以避免滚动，这很好。但我的页面需要强制滚动。

请任何人给我解决方案

这只发生在谷歌浏览器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T13:50:20.047

我找到了这个解决方案：

创建一个新的 Div，其位置设置为 relative (style="position:relative;")

Div 必须包含文本框和扩展器

希望这对你有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-02T10:33:47.147

我做了一个函数来避免这种情况，只需添加：

```
<script type="text/javascript" language="javascript">
    function onCalendarShown(calendar) {
        var top = $("#" + calendar._element.id).offset().top + $("#" + calendar._element.id).height() + 5;
        $("#" + calendar._container.id).css({ 'top': (top + 'px') });
    }
</script> 
```

并在 CalendarExtender 中添加属性 OnClientShown="onCalendarShown"。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-04T07:22:52.503

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T12:15:26.827

原始海报可能有点晚了，但以下有两个建议，后者对我有用：

[日历扩展器问题](https://stackoverflow.com/questions/958555/calendarextender-positioning-problem)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T05:20:10.410

有一个`PopupPosition`属性指示日历弹出窗口应出现在`BottomLeft(default), BottomRight, TopLeft, TopRight, Left or Right of the TextBox`. 分配您的文本框 TopLeft 或 TopRight 位置。

```
<ajaxToolkit:Calendar runat="server"
    TargetControlID="Date1"
    CssClass="ClassName"
    Format="MMMM d, yyyy"
     PopupButtonID="Image1" PopupPosition="Give your desired position"  /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-08T09:27:36.470

由于这是一篇旧帖子，我认为我对同一问题的解决方案可能与其他人相关。

*   我们在哪里使用**过时的版本**：3.0.xxx
*   我们必须**升级到最新版本**：4.1.xxx

以上版本是 AjaxControlToolkit dll 版本 - 不是您在 NuGet 上看到的版本，今天 NuGet 包（“Ajax Control Toolkit”）将类似于 7.xxx。

**仅供参考 - 我的研究：**我一直在使用最新 AjaxControlToolkit 版本的示例来验证如果我升级了我的错误是否得到解决（因为我确切地知道如何重现我的位置问题）。以下两个站点中的至少一个应该可以工作：

*   [http://www.asp.net/ajaxlibrary/ajaxcontroltoolkitsamplesite/](http://www.asp.net/ajaxlibrary/ajaxcontroltoolkitsamplesite/)（官方 - 较慢）
*   [http://www.ajaxcontroltoolkit.com/](http://www.ajaxcontroltoolkit.com/)（独立 - 更快）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-11T13:02:32.113

只需将以下代码放入您的页面

```
<style type="text/css" rel="stylesheet">
.ajax__calendar {
 position : absolute;
 }
</style> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-14T06:20:10.350

解决此问题的最佳方法是在页面顶部添加一个 ajax 程序集：

```
<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="ajaxToolkit" %> 
```

并且不要忘记将日历扩展器上的标记前缀添加为“ajaxToolkit”。如果是别的东西：

前任：

```
<ajaxToolkit:CalendarExtender ID="txtPostingDate_CalendarExtender"
runat="server" Enabled="True" TargetControlID="txtPostingDate"
Format="MM/dd/yyyy">
                                            </ajaxToolkit:CalendarExtender> 
```

# android - 如何使用我的应用程序在 Android 4.0 设备上启用 USB 网络共享？

> ID：12085130
> 
> 赞同：3
> 
> 时间：2012-08-23T05:16:55.793
> 
> 标签：android

> **可能重复：**
> [如何在 4.0 上以编程方式启用 USB 网络共享？](https://stackoverflow.com/questions/12049547/how-i-can-enable-usb-tethering-programatically-on-4-0)

如何使用我的应用程序在 Android 4.0 设备上启用 USB 网络共享？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:35:42.877

您可以根据您的要求调用意图... startActivity(new Intent(android.provider.Settings.ACTION_APPLICATION_DEVELOPMENT_SETTINGS));... 这会将您带到 USB 设置页面

# c# - C# .net 程序集在 VB.NET 中使用时会导致模棱两可的错误

> ID：12085131
> 
> 赞同：1
> 
> 时间：2012-08-23T05:16:56.677
> 
> 标签：c#, vb.net, .net-assembly

我有一个 C# .NET 程序集，它实现了一个返回 int 的函数和一个返回 Int32 的重载。

```
public int GetAudioInputLevel()
public Int32 GetAudioInputlevel() 
```

如果我使用 C# .NET 应用程序中的程序集并调用该函数，它可以正常工作。

如果我从 vb.NET 应用程序调用程序集的函数，我会收到以下错误：

> 错误 [myfunctionname] 不明确，因为类 '[myassemblysclass] ... 中存在多种具有此名称的成员

有人可以建议一种解决方法，在 vb.net 中使用该函数，而无需在我的 c# .net 程序集中更改该函数的签名吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T05:29:18.580

VB.NET 不区分大小写，因此就语言而言，这些是相同的方法。您需要更改其中一个的名称或添加一个参数，这将充分改变方法签名，使其与众不同。但是，不要添加参数只是为了添加一个。

但是，这*很*令人困惑，因为 int 和 Int32 是同一个东西，尽管它们看起来并不相同。A`long`也是 Int64 的别名，`float`对于 Single，C# 的列表[可以在这里找到](http://msdn.microsoft.com/en-us/library/ya5y69ds.aspx)。

还值得注意的是，即使您有一个方法返回的不是 int，比如 long，两个方法的签名也不能*仅*在返回值上有所不同。

# javascript - jQuery 宽度、outerWidth()、innerWidth() 返回不正确的数据

> ID：12085132
> 
> 赞同：5
> 
> 时间：2012-08-23T05:16:57.330
> 
> 标签：javascript, jquery, width, element

出于某种原因，我无法让 jQuery 为我提供各种元素的可靠宽度数据。这是一个演示问题的小提琴链接：http: [//jsfiddle.net/snoopydaniels/ZDbaa/1/](http://jsfiddle.net/snoopydaniels/ZDbaa/1/)

我正在尝试创建一个多维下拉菜单。正如您在 jsfiddle 中看到的，第二个嵌套菜单的位置不正确。我用来定位它的 jQuery 查询兄弟锚元素`outerWidth()`用来发现它的宽度，然后根据返回的宽度设置嵌套列表的左侧位置。当我在 CSS 中为同级锚元素设置宽度时，我得到的值接近正确值，但没有该静态宽度，则`outerWidth()`返回“2”。

但即使我给锚元素一个设定的宽度，`outerWidth(true)`仍然没有正确地合并元素的边框。

我正要拔头发。为什么像这样的废话不能像宣传的那样工作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-23T05:25:14.737

各种宽度命令不适用于隐藏元素 ( `display: none`)。

如果您使用 css 设置宽度，jquery 将返回该宽度。否则，您将得不到或毫无意义的结果。

经典的解决方案是将元素放置在屏幕外，检查宽度，然后将其隐藏并放回原处。（您可能会找到一个 jquery 插件，它可以在一个命令中执行此操作。）

有时有一些方法可以重组 html 和/或 css，这样你就可以避免这种情况。

有时您可以在显示元素后立即修复大小。

您也可以尝试将 设置`visibility`为`hidden`，以便元素获得大小，但不可见。根据您的设计，这可能会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-18T17:27:33.947

在调用 jQuery 宽度函数时，我在接收看似随机的结果时遇到了类似的问题。刷新浏览器后，我会在大约 50% 的时间内得到正确答案。

我犯了一个错误，即立即检查 $(document).ready() 函数中 div 的宽度。当我改为在 $(window).load() 中调用 outerWidth() 时，总是返回正确的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-23T00:27:26.693

您需要调用`$(window).trigger('resize')`which 将触发一个虚假的窗口调整大小事件。之后，`outerWidth`应该有适当的价值。

确保在填充数据后触发虚假窗口调整大小事件。

换句话说，例如，如果您正在检查 a`<td>`内部的宽度，请`<th>`确保在触发假的 resize 事件并检查`outerWidth`.

[由于 Ariel 在https://stackoverflow.com/a/12085210/774630](https://stackoverflow.com/a/12085210/774630)中提到的限制，这是一种解决方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-09T22:18:00.960

如果元素本身的边距为负，则 outherWidth() 可以返回无效数据

# jquery-mobile - 如何使用 Phonegap + JQuery Mobile 启用动画页面转换？

> ID：12085137
> 
> 赞同：2
> 
> 时间：2012-08-23T05:17:29.177
> 
> 标签：jquery-mobile, cordova

根据 JQuery Mobile 文档...

> 要启用动画页面转换，所有指向外部页面（例如 products.html）的链接都将通过 Ajax 加载

如果可能的话，如何在构建所有页面都在本地而不是位于 Web 服务器上的 Phonegap 应用程序时启用页面转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:02:25.603

如果 AJAX 是从本地文件或 Web 加载的，则没有区别（除非 Web 您需要将域列入白名单）。

默认情况下，适用于 iOS 的 Phonegap/Cordova 从 www/index.html 加载。

这是一个包含 2 个页面的示例，其中包含转换的内联数据属性。

第一页，`page1.html`

```
<!-- page1.html -->
...
<div id="page1" data-role="page">
    Local on same page<br/>
    <a href="#samePage" data-transition="pop">same page</a>

    Local in another page<br/>
    <a href="page2.html" data-transition="fade">new page</a>

</div>

<div id="samePage" data-role="page">
    Same Page
</div>
... 
```

一个单独的文件`page2.html`。

```
<!-- page2.html -->
<div id="page2" data-role="page">
    Page 2
</div> 
```

# extjs - 调整 ExtJS Grid Panel 行的高度

> ID：12085139
> 
> 赞同：0
> 
> 时间：2012-08-23T05:17:45.997
> 
> 标签：extjs, height, row, gridpanel

我正在使用 ExtJS 在选项卡面板中创建一个网格，该网格在每个单元格中都有链接。如果有多个链接，则该行应展开，以便行在需要时变宽。

我正在处理`4.1.1`示例 ( `var-height-row.js`) 中的“具有可变高度行的缓冲滚动”示例。我似乎无法让它与我的数据一起使用。网格正在显示，但没有任何行可见。如果有人能告诉我我做错了什么，将不胜感激！

我收到的错误消息`records`是`undefined`并且在我的代码末尾附近被调用。

**代码片段**

```
 var detailStore;
 var detailGrid;
 var MON = 'Monday';
 var TUE = 'Tuesday';
 var WED = 'Wednesday';
 var THU = 'Thursday';
 var FRI = 'Friday';
 var SHIFT = 'shift';

 Ext.define('Location', {
     extend: 'Ext.data.Model',
     fields: [{
             name: SHIFT
         }, {
             name: MON
         }, {
             name: TUE
         }, {
             name: WED
         }, {
             name: THU
         }, {
             name: FRI
         },
         'rowHeight'
     ]
 });

 function LoadDetailsGrid() {
     // create the Data Store
     detailStore = Ext.create('Ext.data.Store', {
         id: 'detailStore',
         pageSize: 50000,
         // allow the grid to interact with the paging scroller by buffering
         buffered: true,
         // never purge any data, we prefetch all up front
         purgePageCount: 0,
         model: 'Location',
         proxy: {
             type: 'memory'
         }
     });

     detailGrid = Ext.create('Ext.grid.Panel', {
         width: 700,
         height: 500,
         title: 'Weekly Detail',
         store: detailStore,
         verticalScroller: {
             variableRowHeight: true
         },
         loadMask: true,
         selModel: {
             pruneRemoved: false,
             selectionMode: 'MULTI'
         },
         viewConfig: {
             trackOver: false
         },
         // grid columns
         columns: [{
             flex: 1,
             sortable: true,
             width: 300,
             dataIndex: SHIFT
         }, {
             text: MON,
             width: 125,
             sortable: false,
             dataIndex: MON
         }, {
             text: TUE,
             width: 125,
             sortable: false,
             dataIndex: TUE
         }, {
             text: WED,
             width: 125,
             sortable: false,
             dataIndex: WED
         }, {
             text: THU,
             width: 125,
             sortable: false,
             dataIndex: THU
         }, {
             text: FRI,
             width: 125,
             sortable: false,
             dataIndex: FRI
         }],
         renderTo: detailGridDiv
     });

     var data = createData(),
         ln = data.length,
         records = [],
         i = 0;

     for (; i < ln; i++) {
         records.push(Ext.create('Location', data[i]));
     }
 }

 Ext.onReady(function() {

     LoadDetailsGrid();

     var tabControl = new Ext.TabPanel({
         renderTo: 'tabs',
         activeItem: 0,
         width: 600,
         height: 250,
         plain: true,
         defaults: {
             autoScroll: true,
             bodyPadding: 10
         },
         items: [
             detailGrid
         ] // THIS IS WHERE THE ERROR HITS
     });

     detailStore.cachePage(records, 1);
     detailStore.guaranteeRange(0, 5);
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:43:41.913

如果您的代码示例是准确的，您甚至永远不会将记录加载到存储中。根据你所拥有的，试试这个：

```
var data = createData();
detailStore.add(data); 
```

该`Ext.data.Store#add`方法将使用表示数据的对象创建模型实例。您不需要手动实例化每条记录。`renderTo`附带说明：当组件将成为容器的子项时，您不要在组件上使用配置。

# javascript - 如何在不使用 DOM 的情况下更改 Class

> ID：12085140
> 
> 赞同：-2
> 
> 时间：2012-08-23T05:17:54.840
> 
> 标签：javascript, jquery, html, css, dom

我有如下的 Div 列表。当单击每个 Div 的 Click Me 时，我想更改标题的颜色，即 Heading1、Heading2、Heading3。我编写了与下面相同的 JQuery

```
 <pre>
     <div>
       <div>
          <span class="Heading">Heading1</span>
          <div>Content1</div>
          <a class="ClickMe">Click Me</a>
        </div> 
      </div>
      <div>
          <div>
            <span class="Heading">Heading2 </span>
            <div>Content2</div>
               <a class="ClickMe">Click Me</a>
           </div> 
      </div>
      <div>
          <div>
            <span class="Heading">Heading3 </span>
            <div>Content3</div>
               <a class="ClickMe">Click Me</a>
           </div> 
      </div>
      <div>
           <div>
            <span class="Heading">Heading3 </span>
            <div>Content3</div>
               <a class="ClickMe">Click Me</a>
           </div> 
      </div>    

  <script>
    $('document').ready(function(){
         $(".ClickMe").click(function(){
       $(this).parent().children(0).toggleClass('red');
     });
    });
  <script>

<style>
  .red
  {
    color : red;
  }
</style> 
```

1.现在，当我单击 Click Me 时，红色将应用于整个 Div。

2.除了使用DOM之外，还有其他方法可以单独将红色应用于标题吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T05:21:44.203

```
$(document).ready(function(){
    $(".ClickMe").click(function(){
        $(this).siblings('.Heading').toggleClass('red');
    });
}); 
```

[http://api.jquery.com/siblings/](http://api.jquery.com/siblings/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:20:44.373

```
$(this).closest('.Heading').toggleClass('red'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T05:21:19.093

```
$('document').ready(function(){
  $(".ClickMe").click(function(){
    $(this).closest('.Heading').toggleClass('red');
  });
}); 
```

# c - 如何在命令行中的某个字符串之后捕获参数？

> ID：12085142
> 
> 赞同：0
> 
> 时间：2012-08-23T05:17:58.827
> 
> 标签：c, unix

如何在命令行中的某个字符串之后捕获参数？

```
./executable.out -apps path_to_out 
```

在上面的代码中，我想将 path_to_out 存储在一个字符串变量中。这样做的有效方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T05:25:09.017

It kind of depends what kind of options you want. If you are willing to have only single-letter options, you can use the C library function `getopt` to parse the command line. If you would like long options (e.g., `--apps`), you can use `getopt_long`, but this is a GNU extension that will not port well. If you want really, really fancy option parsing, you can use something like GLib.

Of course, you can just roll your own, iterating over the arguments from 1 to `argc` and, when you encounter `-apps`, check that `i+1 < argc` and grab the next argument.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:22:41.547

`argv[argc-1]` already has the value for you if your path is the last argument in the command line.

if your main is like :

```
int main(int argc,char **argv) 
```

all the command line arguments are in `char **argv`. in your case: `argv[2]` is path_to_out. if you want to copy it in a `string`,you can anyhow do this below thing:

```
string path(argv[2]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:26:43.480

看来，通过询问“在命令行上的某个字符串之后”，您指的是命令行参数`-apps`以破折号开头的事实，这使其成为“选项”。

这样做的首选方法是使用预定义的库来处理选项，例如GNU 系统上的[getopt](http://www.gnu.org/software/libc/manual/html_node/Getopt.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T05:26:51.747

当您以这种方式运行参数存储时..

示例：---> ./executable.out -apps path_to_out

```
argv[0] will be "./executable.out"
argv[1] will be "-apps"
and argv[2] will be "path_to_out". 
```

# php - PHP中的对象切片

> ID：12085151
> 
> 赞同：1
> 
> 时间：2012-08-23T05:19:20.567
> 
> 标签：php

是否可以从 php 中的派生对象中获取基础对象

像这样的东西

```
class base {}
class derived extends base{
public function getBase()
{
         return (base)$this;
} 
```

上面的代码，抛出一个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:20:44.290

您可以使用它`parent::`来解析为父方法、属性或常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:23:57.597

If you're trying to get the *name* of the base class, here's a way to do that:

```
class base {
  public function getClassName() {
    return "base";
  }
}
class derived extends base{
  public function getBaseClassName() {
    return parent::getClassName();
  }
  public function getClassName() {
    return "derived";
  }
}

$d = new derived();
echo $d->getBaseClassName(); 
```

* * *

**Edit**: When you use inheritance to extend a class (eg: `derived extends base`), you are saying that `derived` *is a kind of* `base`, and all instances of `derived` *are also* instances of `base`. In most OO languages, the two instances, `base` and `derived` are not separate entities, and they can not be treated separately. (C++ is an exception to the rule in this regard).

If you need to treat the instances separately, then inheritance is the wrong tool for the job. Use extension by *containment*, rather than inheritance. This will look something like the following:

```
class base {

  public someBaseFunction() { 
    // ...
  }
}

class derived {

  /**
   * each instance of `derived` *contains* an in instance of `base`
   * that instance will be stored in this protected property
   */
  protected $base;

  /**
   * constructor
   */
  function __construct() {

    // remember to call base's constructor
    // passing along whatever parameters (if any) are needed
    $this->base = new base();

    // ... now do your constructor logic, if any ...

  }

  /**
   * Here's the method that fetches the contained
   * instance of `base`
   */
  public function getBase() {
    return $this->base;
  }

  /**
   * If needed, `derived` can implement public elements
   * from `base`'s interface. The logic can either delegate
   * directly to the contained instance of base, or it can
   * do something specific to `derived`, thus "overriding" 
   * `base`'s implementation.
   */
  public function someBaseFunction() {
    return $this->base->someBaseFunction();
  }

  /**
   * of course, `derived` can implement its own public
   * interface as well...
   */
  public function someOtherFunction() {
  }
} 
```

# objective-c - 使用可达性通知用户互联网连接

> ID：12085165
> 
> 赞同：0
> 
> 时间：2012-08-23T05:20:53.317
> 
> 标签：objective-c, ios, reachability, xcode4.4

我正在尝试使用 Xcode 4.4 中的可达性来提醒用户，如果他/她没有连接到互联网。我的初始视图控制器有一个加载表格的按钮（从 plist 在线填充）。我遵循了 Stack Overflow 中的一些示例，但无法使其正常工作。这是我的 .h 文件的片段：

```
#import <UIKit/UIKit.h>
#import "Reachability.h"

@interface MainPageViewController : UIViewController
{
  Reachability *internetReachable;
  Reachability *hostReachable;
}

-(void) checkNetworkStatus: (NSNotification *)notice;
@property BOOL internetActive;
@property BOOL hostActive;

@end 
```

这是我的 .m 文件：

```
#import "MainPageViewController.h"
#import "Reachability.h"

@implementation MainPageViewController
@synthesize internetActive;
@synthesize hostActive;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
  self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
  if (self) {
    // Custom initialization
  }
 return self;
}

- (void) viewWillAppear:(BOOL)animated
  {
    [[NSNotificationCenter defaultCenter] addObserver: self selector:
    @selector(checkNetworkStatus:) name: kReachabilityChangedNotification object: nil];

    internetReachable = [Reachability reachabilityForInternetConnection];
    [internetReachable startNotifier];

    hostReachable = [Reachability reachabilityWithHostname: @"sites.google.com"];
    [hostReachable startNotifier];
  }

- (void) checkNetworkStatus:(NSNotification *)notice
  {
    NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];
    NetworkStatus hostStatus = [hostReachable currentReachabilityStatus];

    if((internetStatus == NotReachable) && (hostStatus == NotReachable))
    {
       UIAlertView *internetAlert = [[UIAlertView alloc] initWithTitle:@"Network Error!"
       message: @"You are not connected to the internet!" delegate: self
       cancelButtonTitle: @"Ok" otherButtonTitles: nil];
       [internetAlert show];
       self.internetActive = NO;
       self.hostActive = NO;
    }
  }

-(void) dealloc
  {
    [[NSNotificationCenter defaultCenter] removeObserver: self];
  }

- (void)viewDidLoad
  {
    [super viewDidLoad];
// Do any additional setup after loading the view.
  }

- (void)viewDidUnload
  {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
  }

- (BOOL)shouldAutorotateToInterfaceOrientation(UIInterfaceOrientation)interfaceOrientation
   {
   return YES;
   }

@end 
```

由于我使用的是按钮，在导航到下一页之前是否应该使用 IBAction 来检查互联网？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:36:28.403

您可以在任何方便的地方检查互联网。考虑在 viewDidLoad 或 didFinishLaunching 方法中检查它，或者在您需要互联网连接之前检查它。“互联网可用吗？”可能不太方便。按钮，无需任何额外操作。

这是一个返回您是否已连接的函数。我通常在应用程序的过程中经常运行它（或者如果我偏执，在每次请求之前）。

```
- (BOOL) connectedToNetwork
{
    Reachability *r = [Reachability reachabilityWithHostName:@"www.google.com"];
    NetworkStatus internetStatus = [r currentReachabilityStatus];
    BOOL internet;
    if ((internetStatus != ReachableViaWiFi) && (internetStatus != ReachableViaWWAN)) {
        internet = NO;
    } else {
        internet = YES;
    }
    return internet;
} 
```

然后您可以像这样使用它（假设您从当前对象引用它）：

```
if(![self connectedToNetwork]) {
    //Do whatever you need to if you're not connected
} else {
    // You're connected so let the games begin
} 
```

# facebook - 敏捷工具包 oAuth facebook autentication enable

> ID：12085166
> 
> 赞同：0
> 
> 时间：2012-08-23T05:20:55.790
> 
> 标签：facebook, oauth, atk4

我已经使用 facebook 配置了 atk-addons oauth 登录。输入用户创建的 facebook 重定向到我的应用程序后导致服务器错误

The website encountered an error while retrieving =">http://demo.test.com/admin/?page=index&auth=admin_controller_oauth_facebook&callback=1&code=AQA-7FlLE8Z-JRZFkOzYasQC88Erpz7D2NsdGcw-yw122UW_3DeEC18JnuhZQcLuW3vWP18eYDkThwxq5G2jNO-Blkv69YO3IrZx9PD3Py_G4H6Qr8BX_16UsrM7fFDbjBaQDenCuerER_6XRsVqoBwaBK40GNeLnqPxIY6qbYIy0Pm4GsYIvMuJX4s_VDGgXNY# *=* . It may be down for maintenance or配置不正确。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:45:07.953

## 从我在 2012 年 5 月 25 日发给群组的电子邮件中：

将 oauth、sni 移至 misc 中的专用命名空间。它们已更新并解决了一些问题（尤其是 Facebook）。**`misc/lib/Controller/OAuth.php`**不**鼓励和不推荐**使用 of 。进行调整。

Facebook oAuth 的新语法：

```
 $f = $this->add("oauth/Controller_OAuth_Facebook");
 $c = $this->add("sni/Controller_SNI_Facebook"); 
```

请记住，要重用 Facebook 令牌来执行额外请求，请使用以下语法：

```
 $f->setSignatureInfo();
 $f->setAuthToken($fbtoken["access_token"], $fbtoken["expires"]);

 $c = $this->add("sni/Controller_SNI_Facebook");
 $c->setOAuth($f); 
```

给定，您已经存储了 $fbtoken，通常通过以下方式检索：

```
 if ($fbtoken = $f->check()){} 
```

其余代码保持不变。

# android - 如何使用 achartengine 在 android 中创建动态条形图？

> ID：12085169
> 
> 赞同：1
> 
> 时间：2012-08-23T05:21:10.670
> 
> 标签：android, charts

谁能告诉我如何使用 achartengine 在 android 中创建动态条形图。我在 Google 上进行了一些搜索，但它们都没有让我清楚。如果可能的话，请给我一个示例程序代码，以使用 achartengine 在 android 中创建动态条形图。

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:09:22.097

该方法非常简单：您只需要更新数据集，然后`repaint()`在`mChartView`. 图表显示将使用新数据进行更新。

请参阅[此](http://www.youtube.com/watch?v=E9fozQ5NlSo)视频演示文稿，了解具体操作方法。

# eclipse - 使用 Eclipse IDE 使用 sencha touch 2 创建移动应用程序

> ID：12085172
> 
> 赞同：0
> 
> 时间：2012-08-23T05:21:25.480
> 
> 标签：eclipse, sencha-touch-2

我是煎茶触摸的新手。我想在 Eclipse IDE 中创建一个移动应用程序。谁能告诉我该怎么做？我有很多用于创建网络应用程序的链接，但没有用于移动应用程序的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:39:11.020

我推荐的第一件事是您开始使用 sencha 命令，这将有助于您构建应用程序以进行原生打包，更不用说为您创建具有基本要素的初始应用程序：http: [//docs.sencha.com /touch/2-0/#!/guide/command](http://docs.sencha.com/touch/2-0/#!/guide/command)

Android 包装：[http](http://docs.sencha.com/touch/2-0/#!/guide/native_android) ://docs.sencha.com/touch/2-0/#!/guide/native_android iOS 包装：[http ://docs.sencha.com/touch/2-0/#!/guide/native_packaging](http://docs.sencha.com/touch/2-0/#!/guide/native_packaging)

下一篇讨论 phonegap 和使用 eclipse ......因为 sencha 命令可用，第 3 方 sdk 之类的 phonegap 将是在 eclipse 中编译的唯一 rrason，否则 sencha 命令可以处理它...... [http://andidog .de/blog/2012/06/packaging-a-sencha-touch-2-application-with-phonegap-for-android/](http://andidog.de/blog/2012/06/packaging-a-sencha-touch-2-application-with-phonegap-for-android/)

# iphone - set width of UITableViewCell text

> ID：12085174
> 
> 赞同：0
> 
> 时间：2012-08-23T05:21:32.280
> 
> 标签：iphone, ios, uitableview

I have a uitableview with uitableviewcells however some of my text is so long its going right to the edge of the cell, where my accessory tick view is going to be when selected..

I am currently wrapping the text if it extends beyond the width and it goes onto the second line.. However I was hoping there is a nice way to restrict the width of this UITableViewCell label.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:42:22.853

在`cellForRowAtIndexPath`设置宽度`textLabel`

```
cell.textLabel.frame = CGRectMake(cell.textLabel.frame.origin.x, cell.textLabel.frame.origin.y, 280, cell.textLabel.frame.size.height); 
```

就这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:38:10.840

在你的 cellForRowAtIndexPath: 函数中。第一次创建单元格时：

```
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
 if (cell == nil)
 {
   cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
   cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
   cell.textLabel.numberOfLines = 0;
   cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:17.0];
 } 
```

现在指定你的 UITableViewCell 有多大，所以在你的 heightForRowAtIndexPath 函数中这样做：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
  NSString *str = [[arrTexts objectAtIndex:indexPath.row]; // filling text in label  
  CGSize maximumSize = CGSizeMake(300, 100); // change width and height to your requirement
 CGSize strSize = [str sizeWithFont:[UIFont fontWithName:@"Helvetica" size:17] constrainedToSize:maximumSize lineBreakMode:UILineBreakModeWordWrap] //dynamic height of string depending on given width to fit

 return (10+strSize.height+10) // caculate on your bases as u have string height
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:27:53.113

我认为您需要子类`UITableViewCell`来覆盖`-layoutSubviews`... call `super`，然后适当地构建您的标签。约束我会有所帮助，但我还没有在 iOS 上使用它们。（假设问题是内置布局功能使标签尽可能宽以容纳您的文本）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T05:28:15.647

有两种方法可以做到这一点。

1）创建一个自定义的 UITableViewCell 类，添加你的 UILabels 任何你想要的位置和大小。然后在 cellForRowAtIndexPath 方法中使用它。

2）否则，不要使用 UITableViewCell 的默认 UILabel 即。textLabel 和 detailTextLabel，在单元格中添加您自己的 UILabel，无论您想要什么位置和大小。

# php - 如何在没有功能的情况下以 Html 形式存储 IP 地址？

> ID：12085176
> 
> 赞同：-2
> 
> 时间：2012-08-23T05:21:46.727
> 
> 标签：php, html, forms, ip, ip-address

所以当我在谷歌浏览器中打开它时，我继续收到以下错误：

此页面包含以下错误：

第 60 行第 28 列的错误：属性值中不允许未转义的 '<' 下面是第一个错误之前的页面呈现。

但是我看到很多人以这种方式获取 IP 地址的例子。我究竟做错了什么？

```
 <?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>GradeYourTeacher.Com</title>
<style type="text/css">
p{
    color:black;
    f ont-size:14pt;
    font-family: "Comic Sans MS", cursive, sans-serif;
}
h1 {
    color:purple;
    text-align:center;
    font-size:36pt;
    font-family: "Trebuchet MS", Helvetica, sans-serif;
}
</style>
</head>
<!--This Website is made by Francisco Sanchez-->
<!--Try to get IP Address echo $_SERVER['REMOTE_ADDR'];  -->
<body>
<h1>Grade Your Teacher</h1>
<p>
<form id="myform" action="http://learncompsci.com/web/examples/forms/formReader.php" method="get">
To Grade Your Teacher Please Enter The Following Information:
<br/>
<br/>
Display Name: &nbsp; <input name="loginName" type="text" id="loginName" size="14" maxlength="32"/> (For others to view)
<br/>
Email: &nbsp; <input name="email" type="text" id="email" size="20" maxlength="64"/>
<br/>
Email: &nbsp; <input name="password" type="password" id="password" size="14" maxlength="32"/>
<br/>
Confirm Password: &nbsp; <input name="passwordConfirm" type="password" id="passwordConfirm" size="10" maxlength="20" /><br />
First Name:: &nbsp; <input name="firstName" type="text" id="firstName" size="20" maxlength="40" /><br />
Grad Year:: &nbsp; <select name="gradYear" id="gradYear">
      <option value="08">2008</option>
      <option value="09">2009</option>
      <option value="10">2010</option>
      <option value="11">2011</option>
    </select><br />
Gender:: &nbsp; <input name="gender" type="radio" value="male" checked="checked" />
      male &nbsp; &nbsp; 
      <input type="radio" name="gender" value="female" />
      female<br />
Sports: &nbsp; <input type="checkbox" name="sports" value="track" />
      track &nbsp; &nbsp; 
      <input type="checkbox" name="sports" value="baseball" />
      baseball &nbsp; &nbsp; 
      <input type="checkbox" name="sports" value="lacrosse" />      
      lacrosse &nbsp; &nbsp; 
      <input type="checkbox" name="sports" value="paintball" />
paintball
<br />
    Banter: &nbsp; <textarea name="banter" cols="30" rows="5" id="banter"></textarea><br />
    <input type="submit" name="Submit" value="Enter" />
    <input type="hidden" id="IP" name="IP" value= "<?php echo $_SERVER['REMOTE_ADDR']; ?>" />

<br/>
</form>
</p>    
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:56:48.250

您需要让 PHP 引擎解析脚本/页面，才能使 PHP 代码正常工作。

或者用更简单的方式说；你需要把它放在你的网络服务器上。

通常，PHP 初学者从便宜的托管解决方案开始，*或者*- 为了节省费用 - 安装 WAMP，一个简单的安装包，其中包含在本地解析 PHP 的必需品 - Apache（网络服务器），MySQL（数据库），当然还有 PHP 以允许Apache 来解析你的脚本。

尝试使用一些主机或在本地安装一些东西。

# clojure - Clojure error when calling swap! on atom, trying 'conj this-number'

> ID：12085179
> 
> 赞同：5
> 
> 时间：2012-08-23T05:21:55.770
> 
> 标签：clojure

I want a map in an atom that can keep track of times as Unix time stamps.

So, in my main function I have:

```
(defn -main [& args]
(println "Server is starting")
(def port (Integer/parseInt (first args)))
(def registry (atom {}))
(run-server port who-is-here registry)) 
```

And inside of run-server I have a call to add-to-logged-in-registry:

```
(defn add-to-logged-in-registry
[registry]
(let [moments (Date.)
    right-now (.getTime moments)]
(swap! registry conj right-now))) 
```

This last line gives me this error:

Exception in thread "main" java.lang.IllegalArgumentException: Don't know how to create ISeq from: java.lang.Long at clojure.lang.RT.seqFrom(RT.java:487) at clojure.lang.RT.seq(RT.java:468) at clojure.lang.APersistentMap.cons(APersistentMap.java:39) at clojure.lang.RT.conj(RT.java:544) at clojure.core$conj.invoke(core.clj:83) at clojure.lang.Atom.swap(Atom.java:51) at clojure.core$swap_BANG_.invoke(core.clj:2107) at who_is_logged_in.core$add_to_logged_in_registry.invoke(core.clj:39) at who_is_logged_in.core$listen_and_respond.invoke(core.clj:42) at who_is_logged_in.core$run_server.invoke(core.clj:52) at who_is_logged_in.core$_main.doInvoke(core.clj:76) at clojure.lang.RestFn.applyTo(RestFn.java:137) at who_is_logged_in.core.main(Unknown Source)

What does this mean?

When I try this at the REPL in emacs, this works perfectly:

```
user>  (def registry (atom []))
#'user/registry

user>   (let [moments (Date.)
    right-now (.getTime moments)]
(swap! registry conj right-now))

[1345698128988]

user>   (let [moments (Date.)
    right-now (.getTime moments)]
(swap! registry conj right-now))

[1345698128988 1345698132472] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T05:36:26.580

conj 的行为会根据它添加元素的集合类型而有所不同。在您的第一个示例中，它正在向地图添加元素，并且需要集合中的键和值。在您的 REPL 示例中，它正在向向量添加元素，并且只需要一个值。

`swap!`进入地图：

```
(def registry (atom{}))
(let [moments (java.util.Date.)
  right-now (.getTime moments)]                                                 
  (swap! registry conj [:time right-now]))
{:time 1345700872898} 
```

# javascript - 使用javascript读取xml文件

> ID：12085181
> 
> 赞同：2
> 
> 时间：2012-08-23T05:22:04.290
> 
> 标签：javascript, xml

我正在使用下面的代码来读取一个位于本地的 xml 文件。但它没有显示 xmldoc 的对象。我的代码是

```
function loadXMLDoc(XMLname)
{
  var xmlDoc;
  if (window.XMLHttpRequest)
    {
    xmlDoc=new window.XMLHttpRequest();
    xmlDoc.open("GET",XMLname,false);
     xmlDoc.send("");
     return xmlDoc.responseXML;
   }

   else if (ActiveXObject("Microsoft.XMLDOM"))
   {
   xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
    xmlDoc.async=false;
   xmlDoc.load(XMLname);
   return xmlDoc;
   }
   alert("Error loading document!");
   return null;
   }

   function f1()
   {
   var xmlDoc=loadXMLDoc(“test.xml”)
   var M = xmlDoc.getElementsByTagName(“article”);
   alert(M);
     } 
```

如果我调用函数 f1，它不会显示警报。提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T06:51:56.760

更好地使用 Jquery 功能。它对我来说工作正常。

```
<script src="jquery.js" type="text/javascript"></script>
<script>
$(document).ready(function(){
$.ajax({
    type: "GET",
    url: "read2.xml",
    dataType: "xml",
    success: function(xml) {
        $(xml).find('site').each(function(){

            var id = $(this).attr('id');
            var title = $(this).find('title').text();
            var url = $(this).find('url').text();
            $(this).find('desc').each(function()
            {
                var brief = $(this).find('brief').text();
                var long = $(this).find('long').text();
                alert("my "+brief );
                alert("my "+long );

            });
        });
    }
});
}); 
```

XML 文件格式将是

我的title1 url1

brf 1 长 1

brf 2 长 2

# php - 根据它们在 php 中的出现 desc 对数组项进行排序

> ID：12085184
> 
> 赞同：0
> 
> 时间：2012-08-23T05:22:15.023
> 
> 标签：php, arrays

我在**$allrecords**变量中有一个 mysql 记录数组。

每条记录有多个键，其中一个键称为**type**。

一些变量具有相同的类型。

例如，它看起来像这样：

```
Seat
Mercedes
BMW
BMW
Mercedes
Audi
Mercedes
Fiat
Mercedes
Audi
Fiat
Mercedes 
```

该数组现在是无序的（只是从数据库中获取的），现在我需要从出现次数最多的一个到最少对数组项进行排序。

比如像这样

```
Mercedes (5)
Audi (3)
BMW (2)
Fiat (2)
Seat (1) 
```

我不需要数字（我使用另一个 foreach 循环），所以我需要它，就像这样：

```
Mercedes
Audi
BMW
Fiat
Seat 
```

如何在 PHP 中做到这一点？是否可以？我需要根据类型对项目进行分组，然后将它们从出现次数最多到最少排序。

提前致谢。

**编辑：我的数组看起来像这样：**

```
Array
(
    [0] => stdClass Object
        (
            [id] => 125
            [user_id] => 29
            [show] => 1
            [state] => 1
            [type] => 23
            [subcat_id] => 11
            [category_id] => 2
            [name] => SLK 350

        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:41:19.430

```
<?php

$groups = array();
foreach($allrecords as $record){
    $type = $record->type;
    if(empty($groups[$type]))
        $groups[$type] = 1;
    else
        $groups[$type]++;
}

asort ($groups);
$cars = array_keys($groups);
print_r($cars); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:25:29.517

```
usort($allrecords, function($a, $b){ return $a->count >= $b->count; }); 
```

其中“count”是属性的名称...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:29:47.067

```
var_dump(str_word_count(implode(" ", $all_records))); // Returns array( "Mercedes" => 5 ... ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T05:36:21.477

啊啊啊没看懂！！！

你应该使用 SQL 来实现这一点！！！

```
SELECT type, COUNT(1) FROM cars GROUP BY type; 
```

# php - 仅获取不包括 .com www 和子域的域名

> ID：12085193
> 
> 赞同：0
> 
> 时间：2012-08-23T05:22:59.880
> 
> 标签：php

我只需要从给我的一些网站列表中获取域名。我必须只取商店名称，不包括 .com、www 和子域。同样，我只需要取一个店名并插入数据库

例如。清单是

```
shopping.indiatimes.com
shopping.indiatimes.com
shopping.indiatimes.com
www.infibeam.com
adexmart.com
deals.sulekha.com    
deals.sulekha.com
www.ebay.in
deals.ebay.in
shop.seventymm.com
www.homeshop18.com
www.buytheprice.com
www.snapdeal.com
www.aircel.com
www.tradus.com
www.infibeam.com
www.futurebazaar.com
www.tradus.com
www.shoppingmantra.com
camera.zoomin.com
www.homeshop18.com 
```

所以在这里我只想要域名，如，indiatimes，ebay，tradus，zoomin..等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:29:06.193

```
foreach($domains as $domain)
   echo implode('', array_slice(explode('.', $domain), -2, 1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:31:26.860

这可以通过执行字符串爆炸然后取倒数第二个数组元素来完成。

```
$array = explode(".", "www.snapdeal.com");

$count = count($array);
$value = $array[$count - 2] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:32:48.727

```
$url_to_check = "http://www.shopping.indiatimes.com";
$url1 = preg_replace('#^https?://#', '', $url_to_check);
$domain = implode('', array_slice(explode('.', $url1), -2, 1));
echo $domain; //this will echo indiatimes 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T06:13:58.183

```
$domain = parse_url("www.domainnames.com");
    $host = $domain['host'];       
     $exp  = explode('.' , $host);        
                if(isset($exp[2])){        
                $domainname = ($exp[1]);
                }else {           
                    $domainname = ($exp[0]);
                }
                $a []= $domainname;  

      $uniquenames = (array_unique($a));    
      print_r($uniquenames); 
```

# eclipse - 如何在 Eclipse 4 RCP 应用程序中添加弯曲选项卡

> ID：12085194
> 
> 赞同：3
> 
> 时间：2012-08-23T05:23:20.477
> 
> 标签：eclipse, eclipse-rcp

eclipse 4 RCP 应用程序中的弯曲选项卡。即使我将 SHOW_TRADITIONAL_STYLE_TABS=false 添加到我的 plugin_customization.ini 文件中。我 aqm 无法找出选项卡显示的任何变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T09:33:52.817

这应该通过[E4 CSS 引擎](http://wiki.eclipse.org/E4/CSS)进行管理，并且您[的 RCP 应用程序的关联 CSS 样式表](http://wiki.eclipse.org/Eclipse4/RCP/CSS)应该包含以下内容：

```
.MPartStack {
  swt-tab-renderer: null;
  swt-selected-tabs-background: #FFFFFF #ECE9D8 100%;
  swt-simple: true;
  swt-mru-visible: true;
} 
```

（来自“ [Eclipse4 CSS](http://wiki.eclipse.org/Eclipse4/CSS) ”页面，因此它适用于 Eclipse4 本身，但也适用于您的 RCP）

如果你有**`swt-simple: false;`**，你应该看到弯曲的标签。

# windows - How an app can find out that windows startup is complete

> ID：12085195
> 
> 赞同：0
> 
> 时间：2012-08-23T05:23:22.230
> 
> 标签：windows

I have a windows application which gets launched at windows startup. In the application i dont want to do anything until windows start up is complete.

So is there any way i can register for any event which indicates that windows start is complete. My main aim is to find out through my app when the windows start up is complete.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:50:53.340

> 基本上我必须找出在 Windows 启动期间是否启动了另一个程序。如果不是这样，那么我必须通过我的应用程序启动该程序。
> 
> ...
> 
> 第三方程序是 Microsoft Lync 2010

在这种情况下，您的程序可以只启动 Lync。

* * *

细节

如果您在 Lync 已经运行时运行它，则第一个 Lync 将出现在前台。（第二个 Lync 退出）。

因此，如果您的程序正在自动启动，那么它是在 Lync 自动启动之前还是之后运行都没有关系。Lync 是否未配置为自动启动并不重要。

情景一：

1.  Lync 配置为自动启动
2.  自动启动运行 Lync
3.  您的程序尝试运行 Lync，但自动启动程序将继续

场景 B：

1.  Lync 配置为自动启动
2.  您的程序运行 Lync
3.  自动启动尝试运行 Lync，但您的程序一将继续

场景 C：

1.  Lync 未配置为自动启动
2.  您的程序运行 Lync

最后，如果 Lync 启动然后退出，第二次调用将再次简单地启动 Lync，这也满足您的要求。

# java - Android: How to upload photo on flickr using flickrj-android-2.0.0 android library

> ID：12085201
> 
> 赞同：5
> 
> 时间：2012-08-23T05:24:28.893
> 
> 标签：java, android, flickrj

I an using flickrj-android-2.0.0 and follow the OAuth flow. I am getting the access-token and secret also but when I try to upload the photo on flickr I am getting the this error:

**com.googlecode.flickrjandroid.FlickrException: 99: Insufficient permissions. Method requires write privileges; read granted**.

Even I have changed the permission to write when I am creating my api-key and secret, but still getting the same error.

For uploading photo I am using the below code please help me to solve this out I am really stuck at this part.

```
public void uploadPhoto(OAuth... params)
            throws ParserConfigurationException {
        OAuth oauth = params[0];
        OAuthToken token = oauth.getToken();
        RequestContext requestContext = RequestContext.getRequestContext();
        OAuth auth = new OAuth();
        auth.setToken(new OAuthToken(token.getOauthToken(), token
                .getOauthTokenSecret()));
        requestContext.setOAuth(auth);
        Uploader up = new Uploader(FlickrHelper.API_KEY, FlickrHelper.API_SEC);
        UploadMetaData uploadMetaData = new UploadMetaData();
        uploadMetaData.setTitle("hello world");
        try {
            Drawable d = getResources().getDrawable(R.drawable.icon);
            // the drawable (Captain Obvious, to the rescue!!!)
            Bitmap bitmap = ((BitmapDrawable) d).getBitmap();
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);
            byte[] bitmapdata = stream.toByteArray();
            System.out.println("Bitmap value= " + bitmapdata);
            userIcon.setImageBitmap(bitmap);
            up.upload("Hello From Emulator", bitmapdata, uploadMetaData);

        } catch (FlickrException e) {

            e.printStackTrace();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

Thanks...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T04:51:37.213

我已经通过改变`OAuthTask`班级来解决......问题只是权限......把`Permission.WRITE`而不是`Permission.READ`

```
public class OAuthTask extends AsyncTask<Void, Integer, String> {

// private static final Logger logger = LoggerFactory
// .getLogger(OAuthTask.class);
private static final Uri OAUTH_CALLBACK_URI = Uri
        .parse(FlickrjAndroidSampleActivity.CALLBACK_SCHEME + "://oauth"); //$NON-NLS-1$

/**
 * The context.
 */
private Context mContext;

/**
 * The progress dialog before going to the browser.
 */
private ProgressDialog mProgressDialog;

/**
 * Constructor.
 * 
 * @param context
 */
public OAuthTask(Context context) {
    super();
    this.mContext = context;
}

@Override
protected void onPreExecute() {
    super.onPreExecute();
    mProgressDialog = ProgressDialog.show(mContext,
            "", "Generating the authorization request..."); //$NON-NLS-1$ //$NON-NLS-2$
    mProgressDialog.setCanceledOnTouchOutside(true);
    mProgressDialog.setCancelable(true);
    mProgressDialog.setOnCancelListener(new OnCancelListener() {
        @Override
        public void onCancel(DialogInterface dlg) {
            OAuthTask.this.cancel(true);
        }
    });
}

/*
 * (non-Javadoc)
 * 
 * @see android.os.AsyncTask#doInBackground(Params[])
 */
@Override
protected String doInBackground(Void... params) {
    try {
        Flickr f = FlickrHelper.getInstance().getFlickr();
        OAuthToken oauthToken = f.getOAuthInterface().getRequestToken(
                OAUTH_CALLBACK_URI.toString());
        saveTokenSecrent(oauthToken.getOauthTokenSecret());
        URL oauthUrl = f.getOAuthInterface().buildAuthenticationUrl(
                Permission.WRITE, oauthToken);
        return oauthUrl.toString();
    } catch (Exception e) {
        //          logger.error("Error to oauth", e); //$NON-NLS-1$
        return "error:" + e.getMessage(); //$NON-NLS-1$
    }
}

/**
 * Saves the oauth token secrent.
 * 
 * @param tokenSecret
 */
private void saveTokenSecrent(String tokenSecret) {
    //      logger.debug("request token: " + tokenSecret); //$NON-NLS-1$
    FlickrjAndroidSampleActivity act = (FlickrjAndroidSampleActivity) mContext;
    act.saveOAuthToken(null, null, null, tokenSecret);
    //      logger.debug("oauth token secret saved: {}", tokenSecret); //$NON-NLS-1$
}

@Override
protected void onPostExecute(String result) {
    if (mProgressDialog != null) {
        mProgressDialog.dismiss();
    }
    if (result != null && !result.startsWith("error")) { //$NON-NLS-1$
        mContext.startActivity(new Intent(Intent.ACTION_VIEW, Uri
                .parse(result)));
    } else {
        Toast.makeText(mContext, result, Toast.LENGTH_LONG).show();
    }
}

} 
```

查看[**完整演示**](https://github.com/luminousman/Flickr)

![在此处输入图像描述](../Images/edd42f69d1d385430169042369a1a0ee.png)

# python - Disabling cached results in mysql (using python)

> ID：12085204
> 
> 赞同：1
> 
> 时间：2012-08-23T05:24:39.043
> 
> 标签：python, mysql, pyodbc

I am using python 2.7, pyodbc and mysql 5.5\. I am on windows

I have query which returns millions of rows and I would like to process it in chunks. using the fetchmany function.

He a portion of the code

```
import pyodbc
connection = pyodbc.connect('Driver={MySQL ODBC 5.1 Driver};Server=127.0.0.1;Port=3306;Database=XXXX;User=root; Password='';Option=3;')

cursor_1 = connection.cursor()
strSQLStatement = 'SELECT x1, x2 from X'

cursor_1.execute(strSQLStatement)
# the error occurs here  

x1 = cursor_1.fetchmany(10)
print x1
connection.close() 
```

My problem:

1.  I get the error **MySQL client ran out of memory**

2.  I guess that this is because the `cursor_1.execute` tries to read everything into memory and tried the following (one by one) but to no avail

    1.  In user interface (ODBC – admin tools) I ticked the “Don't cache results of forwarding-only cursors”</li>
    2.  **connection.query("SET GLOBAL query_cache_size = 40000")**

My question:

1.  Does pyodbc has the possibility to run the query and serve the results only on demand ?

2.  The MySQL manual suggests to [**invoke mysql with the --quick option**](http://dev.mysql.com/doc/refman/5.5/en/out-of-memory.html). Can this be done also when not using the command line?

Thanks for your help.

P.S: suggestions for an alternative MySQL module are also welcome, but I use portable python so my choice is limited.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:48:29.333

在查询字符串上使用 LIMIT 子句。

[http://dev.mysql.com/doc/refman/5.5/en/select.html](http://dev.mysql.com/doc/refman/5.5/en/select.html)

通过使用

```
SELECT x1, x2 from X LIMIT 0,1000 
```

您只会获得第一条 1k 记录，然后执行以下操作：

```
SELECT x1, x2 from X LIMIT 1000,2000 
```

您将获得接下来的 1k 条记录。

适当循环以获取所有记录。（我不知道python所以在这里帮不上忙:(）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:45:35.933

将 MySQLdb 与[SSCursor](http://mysql-python.sourceforge.net/MySQLdb-1.2.2/public/MySQLdb.cursors.SSCursor-class.html)一起使用将解决您的问题。

不幸的是，文档不是很好，但在[用户指南中提到了，你可以](http://mysql-python.sourceforge.net/MySQLdb.html#using-and-extending)[在这个 stackoverflow question](https://stackoverflow.com/questions/1808150/how-to-efficiently-use-mysqldb-sscursor)中找到一个例子。

# ant - 在批处理文件中设置蚂蚁路径

> ID：12085206
> 
> 赞同：0
> 
> 时间：2012-08-23T05:24:54.017
> 
> 标签：ant, batch-file

我有一个批处理文件，我在其中设置了硬编码的 ant 路径和 junit 路径值，它执行我的`build.xml`并且一切正常。

`set Path=%CURRENT DIRECTORY%\bin`
当我用类似它不起作用 的东西替换路径的硬编码值时。

如何使这项工作。

这是我的批处理文件

```
set CURRENT_DIRECTORY=%~dp0

set ANT_HOME=c:\ant\apache-ant-1.8.3
ECHO current directory is %CURRENT_DIRECTORY%
ECHO %ANT_HOME%
set Path=%ANT_HOME%\bin
set ADAPTER_LIBRAY_PATH=%1
set USER_JAR_PATH=%2
set CLASS_NAME=%3
set RESULTS_PATH=%4
set JUNIT_PATH=C:\ANT\test\junit-4.1.jar
set LIBRAIES_TO_INCLUDE="%JUNIT_PATH%";"%ADAPTER_LIBRAY_PATH%";"%USER_JAR_PATH%"
ECHO %LIBRAIES_TO_INCLUDE%
ECHO %ADAPTER_LIBRAY_PATH%
ECHO %JUNIT_PATH%
ECHO %USER_JAR_PATH%
ECHO %CLASS_NAME%
ECHO %RESULTS_PATH% 

ant -lib "%LIBRAIES_TO_INCLUDE%" -Dlibraries="%ADAPTER_LIBRAY_PATH%" -Djunitlibrary="%JUNIT_PATH%" -Djartobeexec="%USER_JAR_PATH%" -Duserclass=%CLASS_NAME% -Dresultspath=%RESULTS_PATH% -buildfile build.xml test-html 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:22:02.197

试试这个：

SET ANT_HOME = ant_directory "%JAVA_HOME%\bin\java" -Xmx512M -XX:MaxPermSize=256M -cp %ANT_HOME%/lib/ant-launcher.jar -Dant.home="%ANT_HOME%" -Dant.library.dir ="%ANT_HOME%/lib" org.apache.tools.ant.launch.Launcher -f build.xml %*

# javascript - 使用jquery的浮动表单

> ID：12085224
> 
> 赞同：0
> 
> 时间：2012-08-23T05:26:43.090
> 
> 标签：javascript, jquery, html, css

嗨，我已经使用 html 创建了一个常规表单。现在我需要使用带有浮动窗口的链接来显示该表单。（例如：浮动反馈表单）。在网站的右侧会出现一个按钮，在该按钮上移动光标时，它将导致表单从**右侧**浮动。我搜索了很多网站，但他们只有左侧选项。请分享正确的教程链接或编码链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:00:26.960

这是一个可能有帮助的教程：[http ://www.building58.com/examples/tabSlideOut.html](http://www.building58.com/examples/tabSlideOut.html)

只是改变

```
tabLocation: 'left', 
```

至

```
tabLocation: 'right', 
```

和

```
action: 'click', 
```

至

```
action: 'hover', 
```

# c - 如何验证校验和而不将其值设置为零

> ID：12085228
> 
> 赞同：1
> 
> 时间：2012-08-23T05:26:54.820
> 
> 标签：c, networking, network-programming

我有一个数据包和一个校验和功能。在发送数据包之前，校验和字段为 0。我计算校验和并将值添加到校验和字段。在接收端，当我使用相同的校验和函数时，我得到一个不匹配的结果，因为在发送端计算时，校验和最初为 0，但在接收端校验和是一个不同的非零值。

解决方法是在接收端，使校验和字段等于 0 并计算校验和，但这不是很优雅。

我一直在为此寻找解决方案，但无济于事。校验和功能是非常标准的功能，对我来说是一个黑匣子。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:30:13.273

您不应在校验和计算中包含校验和数字。计算*除*校验和字节之外的所有字节的校验和。

通过在校验和计算中包含为保存校验和而保留的字节，您将消耗一些额外的 CPU 周期而一无所获。

# xml - awk，提取不同分隔符之间的字符串

> ID：12085230
> 
> 赞同：1
> 
> 时间：2012-08-23T05:27:07.473
> 
> 标签：xml, awk, extract

我有如下的xml文件：

```
<Name ns1:translate="yes">Overview</Name>     
<TextValue>Start</TextValue>
<Title ns1:translate="yes">This is a "book"</Title>
<Title>BOOK</Title>
<Description ns1:translate="yes"/>
<TextValue ns1:translate="yes">End</TextValue> 
```

如果标签包含 translate="yes"，我想提取字符串。输出应如下所示：

```
Overview = Overview
This is a "book" = This is a "book"
   = 
End = End 
```

我需要使用 shell 脚本进行上述提取。我尝试使用：

```
awk awk -F '["<>]' '{if (/.*translate="yes".*/) {print ((NF>6?OFS $(NF-2):x))}
```

但这并没有给我想要的结果，因为输出中的“书”没有被打印出来。请让我知道上面的 awk 有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:47:05.577

就像tripleee 建议的那样，您应该使用xml 解析器。对于使用的肮脏解决方案`awk`，您可以执行以下操作：

```
awk -F '[<>]' '{ for (i=1; i<=NF; i++) if ($i ~ /translate="yes"/) print $(i+1), "=", $(i+1) }' file.txt 
```

结果：

```
Overview = Overview
This is a "book" = This is a "book"
 = 
End = End 
```

此解决方案将仅在 find 后打印下一个元素`translate="yes"`。YMMV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:10:06.703

```
>awk 'BEGIN{FS="<|>"}/translate="yes"/{split($2,a,">");print a[2]"="a[2]}' temp
Overview=Overview
This is a "book"=This is a "book"
=
End=End 
```

# sql - 具有关系的同一列中的多个条件

> ID：12085231
> 
> 赞同：0
> 
> 时间：2012-08-23T05:27:18.700
> 
> 标签：sql, ruby

情况如下：

有一个用户表

```
id     email      orders_counter
=================================
1      a@a.com    5
2      b@b.com    3
3      c@c.com    0 
```

以及用户其他数据的用户数据表

```
id     user_id      title      value
=======================================
1      1            Name       Peter Johnson
2      1            Tel        31546988
3      2            Name       Alan Johnson
4      2            Tel        56984887 
```

如果我想获取所有用户

```
1, orders_counter greater then 3
2, Name contain 'Johnson'
3, Tel contain '88' 
```

同时

什么是我的 sql，如果我想用 ruby​​onrails 方式做，我知道 ActiveRecord 代码是什么，我可以一个一个然后将它们全部连接在一起，但是在条件建立时浪费了太多资源

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:32:59.213

试试这个，

```
SELECT   a.*, b.*
FROM     user a
            INNER JOIN data b
                ON a.id = b.user_ID
WHERE   a.orders_counter > 3 AND
        (b.title = 'NAME' AND b.value like '%johnson%') AND
        (b.title = 'TEL' AND b.tel like '%88%') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:33:30.713

试试这个：

```
select *
from  user U  join user_data D
on    U.id=D.user_id
where U.orders_counter>3
and   D.title='Name' and value like '%Johnson%'
and   D.title='Tel' and value like '%88%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:34:20.400

```
Select * From `user` u
inner join `userdata` d on d.user_id=u.id and d.title='Name' and d.value like '%Johnson%'
inner join `userdata` c on c.user_id=u.id and c.title='Tel' and c.value like '%88%'
where orders_counter > 3 
```

按照您构建用户数据表的方式，您几乎总是必须多次加入该表才能将这些值“透视”到列中。我建议只创建一个以 name 和 tel 作为列的表。然后查询变得更加简单

```
select * from `user` u
inner join `user_data` d on d.Tel like '%88%' and d.Name like '%johnson%'
where u.orders_counter > 3 
```

# android - 文件名结果未从 android 中的远程服务器下载图像

> ID：12085234
> 
> 赞同：1
> 
> 时间：2012-08-23T05:27:37.637
> 
> 标签：android, imagedownload

我在我的 android 应用程序中从服务器下载图像时遇到问题。
如果我尝试从[https://www.morroccommethod.com/components/com_virtuemart/shop_image/category/resized/Trial_Sizes_4e4ac3b0d3491_175x175.jpg](https://www.morroccomethod.com/components/com_virtuemart/shop_image/category/resized/Trial_Sizes_4e4ac3b0d3491_175x175.jpg)**下载图片**

它返回**null**表示图像未下载。现在，当我在服务器上替换文件名并将其复制到其他文件夹（[https://www.morroccommethod.com/mm/12.jpg](https://www.morroccomethod.com/mm/12.jpg)）只是为了测试然后图像**下载成功**时，我感到很惊讶。
这意味着文件名导致不下载图像。

现在我希望任何人都可以帮助和指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:34:11.103

也许您没有使用正确的方法来下载图像。我不完全知道其中的问题。但我一直使用一门课，每次都对我有用。

> **ImageLoading.java**

```
public class ImageLoading {

public enum BitmapManager {  
    INSTANCE;  

    private final Map<String, SoftReference<Bitmap>> cache;  
    private final ExecutorService pool;  
    private Map<ImageView, String> imageViews = Collections  
            .synchronizedMap(new WeakHashMap<ImageView, String>());  
    private Bitmap placeholder;  

    BitmapManager() {  
        cache = new HashMap<String, SoftReference<Bitmap>>();  
        pool = Executors.newFixedThreadPool(5);  
    }  

    public void setPlaceholder(Bitmap bmp) {  
        placeholder = bmp;  
    }  

    public Bitmap getBitmapFromCache(String url) {  
        if (cache.containsKey(url)) {  
            return cache.get(url).get();  
        }  

        return null;  
    }  

    public void queueJob(final String url, final ImageView imageView,  
            final int width, final int height) {  
        /* Create handler in UI thread. */  
        final Handler handler = new Handler() {  
            @Override  
            public void handleMessage(Message msg) {  
                String tag = imageViews.get(imageView);  
                if (tag != null && tag.equals(url)) {  
                    if (msg.obj != null) {  
                        imageView.setImageBitmap((Bitmap) msg.obj);  
                    } else {  
                        imageView.setImageBitmap(placeholder);  
                        Log.d(null, "fail " + url);  
                    }  
                }  
            }  
        };  

        pool.submit(new Runnable() {  
            @Override  
            public void run() {  
                final Bitmap bmp = downloadBitmap(url, width, height);  
                Message message = Message.obtain();  
                message.obj = bmp;  
                Log.d(null, "Item downloaded: " + url);  

                handler.sendMessage(message);  
            }  
        });  
    }  

    public void loadBitmap(final String url, final ImageView imageView,  
            final int width, final int height) {  
        imageViews.put(imageView, url);  
        Bitmap bitmap = getBitmapFromCache(url);  

        // check in UI thread, so no concurrency issues  
        if (bitmap != null) {  
            Log.d(null, "Item loaded from cache: " + url);  
            imageView.setImageBitmap(bitmap);  
        } else {  
            imageView.setImageBitmap(placeholder);  
            queueJob(url, imageView, width, height);  
        }  
    }  

    private Bitmap downloadBitmap(String url, int width, int height) {  
        try {  
            Bitmap bitmap = BitmapFactory.decodeStream((InputStream) new URL(  
                    url).getContent());  
            bitmap = Bitmap.createScaledBitmap(bitmap, width, height, true);  
            cache.put(url, new SoftReference<Bitmap>(bitmap));  
            return bitmap;  
        } catch (MalformedURLException e) {  
            e.printStackTrace();  
        } catch (IOException e) {  
            e.printStackTrace();  
        }  

        return null;  
    }  
} 
```

}

并像这样在任何你想要的地方实现它-->

```
ImageLoading.BitmapManager.INSTANCE.loadBitmap("image_url", your_bitmapImage, width,height); 
```

# java - Servlet-3 Async Context，如何进行异步写入？

> ID：12085235
> 
> 赞同：50
> 
> 时间：2012-08-23T05:27:46.327
> 
> 标签：java, comet, servlet-3.0

## 问题描述

Servlet-3.0 API 允许分离请求/响应上下文并在稍后回复它。

但是，如果我尝试编写大量数据，例如：

```
AsyncContext ac = getWaitingContext() ;
ServletOutputStream out = ac.getResponse().getOutputStream();
out.print(some_big_data);
out.flush() 
```

对于 Tomcat 7 和 Jetty 8，它实际上可能会阻塞——而且它确实会阻塞在琐碎的测试用例中。教程建议创建一个可以处理这种设置的线程池——这通常与传统的 10K 架构相反。

但是，如果我有 10,000 个打开的连接和一个线程池，比如说 10 个线程，那么即使 1% 的客户端具有低速连接或只是阻塞连接，也足以阻塞线程池并完全阻塞彗星响应或减慢它显著地。

预期的做法是获得“写就绪”通知或 I/O 完成通知，然后继续推送数据。

如何使用 Servlet-3.0 API 来完成，即我如何获得：

*   I/O 操作的异步完成通知。
*   通过写就绪通知获取非阻塞 I/O。

如果 Servlet-3.0 API 不支持，是否有任何 Web 服务器特定的 API（如 Jetty Continuation 或 Tomcat CometEvent）允许真正异步处理此类事件，而无需使用线程池伪造异步 I/O。

有人知道吗？

如果这不可能，您可以参考文档来确认吗？

## 示例代码中的问题演示

我附上了下面模拟事件流的代码。

笔记：

*   它使用`ServletOutputStream`该 throws`IOException`来检测断开连接的客户端
*   它发送`keep-alive`消息以确保客户端仍然存在
*   我创建了一个线程池来“模拟”异步操作。

在这样的示例中，我明确定义了大小为 1 的线程池来显示问题：

*   启动应用程序
*   从两个终端运行`curl http://localhost:8080/path/to/app`（两次）
*   现在发送数据`curd -d m=message http://localhost:8080/path/to/app`
*   两个客户端都收到了数据
*   现在暂停其中一个客户端 (Ctrl+Z) 并再次发送消息`curd -d m=message http://localhost:8080/path/to/app`
*   观察到另一个未挂起的客户端要么什么也没收到，要么在传输消息后停止接收保持活动的请求，因为其他线程被阻塞了。

我想在不使用线程池的情况下解决这样的问题，因为使用 1000-5000 个打开的连接我可以非常快地耗尽线程池。

下面的示例代码。

* * *

```
import java.io.IOException;
import java.util.HashSet;
import java.util.Iterator;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.LinkedBlockingQueue;

import javax.servlet.AsyncContext;
import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.ServletOutputStream;

@WebServlet(urlPatterns = "", asyncSupported = true)
public class HugeStreamWithThreads extends HttpServlet {

    private long id = 0;
    private String message = "";
    private final ThreadPoolExecutor pool = 
        new ThreadPoolExecutor(1, 1, 50000L,TimeUnit.MILLISECONDS,new LinkedBlockingQueue<Runnable>());
        // it is explicitly small for demonstration purpose

    private final Thread timer = new Thread(new Runnable() {
        public void run()
        {
            try {
                while(true) {
                    Thread.sleep(1000);
                    sendKeepAlive();
                }
            }
            catch(InterruptedException e) {
                // exit
            }
        }
    });

    class RunJob implements Runnable {
        volatile long lastUpdate = System.nanoTime();
        long id = 0;
        AsyncContext ac;
        RunJob(AsyncContext ac) 
        {
            this.ac = ac;
        }
        public void keepAlive()
        {
            if(System.nanoTime() - lastUpdate > 1000000000L)
                pool.submit(this);
        }
        String formatMessage(String msg)
        {
            StringBuilder sb = new StringBuilder();
            sb.append("id");
            sb.append(id);
            for(int i=0;i<100000;i++) {
                sb.append("data:");
                sb.append(msg);
                sb.append("\n");
            }
            sb.append("\n");
            return sb.toString();
        }
        public void run()
        {
            String message = null;
            synchronized(HugeStreamWithThreads.this) {
                if(this.id != HugeStreamWithThreads.this.id) {
                    this.id = HugeStreamWithThreads.this.id;
                    message = HugeStreamWithThreads.this.message;
                }
            }
            if(message == null)
                message = ":keep-alive\n\n";
            else
                message = formatMessage(message);

            if(!sendMessage(message))
                return;

            boolean once_again = false;
            synchronized(HugeStreamWithThreads.this) {
                if(this.id != HugeStreamWithThreads.this.id)
                    once_again = true;
            }
            if(once_again)
                pool.submit(this);

        }
        boolean sendMessage(String message) 
        {
            try {
                ServletOutputStream out = ac.getResponse().getOutputStream();
                out.print(message);
                out.flush();
                lastUpdate = System.nanoTime();
                return true;
            }
            catch(IOException e) {
                ac.complete();
                removeContext(this);
                return false;
            }
        }
    };

    private HashSet<RunJob> asyncContexts = new HashSet<RunJob>();

    @Override
    public void init(ServletConfig config) throws ServletException
    {
        super.init(config);
        timer.start();
    }
    @Override
    public void destroy()
    {
        for(;;){
            try {
                timer.interrupt();
                timer.join();
                break;
            }
            catch(InterruptedException e) {
                continue;
            }
        }
        pool.shutdown();
        super.destroy();
    }

    protected synchronized void removeContext(RunJob ac)
    {
        asyncContexts.remove(ac);
    }

    // GET method is used to establish a stream connection
    @Override
    protected synchronized void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        // Content-Type header
        response.setContentType("text/event-stream");
        response.setCharacterEncoding("utf-8");

        // Access-Control-Allow-Origin header
        response.setHeader("Access-Control-Allow-Origin", "*");

        final AsyncContext ac = request.startAsync();

        ac.setTimeout(0);
        RunJob job = new RunJob(ac);
        asyncContexts.add(job);
        if(id!=0) {
            pool.submit(job);
        }
    }

    private synchronized void sendKeepAlive()
    {
        for(RunJob job : asyncContexts) {
            job.keepAlive();
        }
    }

    // POST method is used to communicate with the server
    @Override
    protected synchronized void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException 
    {
        request.setCharacterEncoding("utf-8");
        id++;
        message = request.getParameter("m");        
        for(RunJob job : asyncContexts) {
            pool.submit(job);
        }
    }

} 
```

上面的示例使用线程来防止阻塞......但是，如果阻塞客户端的数量大于线程池的大小，它将阻塞。

如何在没有阻塞的情况下实现它？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-28T11:17:05.310

我发现`Servlet 3.0` `Asynchronous`API 很难正确实现，有用的文档很少。经过大量试验和错误并尝试了许多不同的方法，我能够找到一个我非常满意的强大解决方案。当我查看我的代码并将其与您的代码进行比较时，我注意到一个可能会帮助您解决特定问题的主要区别。我使用 a`ServletResponse`来写入数据，而不是 a `ServletOutputStream`。

在这里，我的首选异步 Servlet 类针对您的`some_big_data`情况稍作调整：

```
import java.io.IOException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

import javax.servlet.AsyncContext;
import javax.servlet.AsyncEvent;
import javax.servlet.AsyncListener;
import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebInitParam;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.apache.log4j.Logger;

@javax.servlet.annotation.WebServlet(urlPatterns = { "/async" }, asyncSupported = true, initParams = { @WebInitParam(name = "threadpoolsize", value = "100") })
public class AsyncServlet extends HttpServlet {

  private static final Logger logger = Logger.getLogger(AsyncServlet.class);

  public static final int CALLBACK_TIMEOUT = 10000; // ms

  /** executor service */
  private ExecutorService exec;

  @Override
  public void init(ServletConfig config) throws ServletException {

    super.init(config);
    int size = Integer.parseInt(getInitParameter("threadpoolsize"));
    exec = Executors.newFixedThreadPool(size);
  }

  @Override
  public void service(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {

    final AsyncContext ctx = req.startAsync();
    final HttpSession session = req.getSession();

    // set the timeout
    ctx.setTimeout(CALLBACK_TIMEOUT);

    // attach listener to respond to lifecycle events of this AsyncContext
    ctx.addListener(new AsyncListener() {

      @Override
      public void onComplete(AsyncEvent event) throws IOException {

        logger.info("onComplete called");
      }

      @Override
      public void onTimeout(AsyncEvent event) throws IOException {

        logger.info("onTimeout called");
      }

      @Override
      public void onError(AsyncEvent event) throws IOException {

        logger.info("onError called: " + event.toString());
      }

      @Override
      public void onStartAsync(AsyncEvent event) throws IOException {

        logger.info("onStartAsync called");
      }
    });

    enqueLongRunningTask(ctx, session);
  }

  /**
   * if something goes wrong in the task, it simply causes timeout condition that causes the async context listener to be invoked (after the fact)
   * <p/>
   * if the {@link AsyncContext#getResponse()} is null, that means this context has already timed out (and context listener has been invoked).
   */
  private void enqueLongRunningTask(final AsyncContext ctx, final HttpSession session) {

    exec.execute(new Runnable() {

      @Override
      public void run() {

        String some_big_data = getSomeBigData();

        try {

          ServletResponse response = ctx.getResponse();
          if (response != null) {
            response.getWriter().write(some_big_data);
            ctx.complete();
          } else {
            throw new IllegalStateException(); // this is caught below
          }
        } catch (IllegalStateException ex) {
          logger.error("Request object from context is null! (nothing to worry about.)"); // just means the context was already timeout, timeout listener already called.
        } catch (Exception e) {
          logger.error("ERROR IN AsyncServlet", e);
        }
      }
    });
  }

  /** destroy the executor */
  @Override
  public void destroy() {

    exec.shutdown();
  }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-07T11:13:33.537

在我研究这个主题的过程中，这个线程不断弹出，所以我想在这里提到它：

`ServletInputStream`Servlet 3.1 在和上引入了异步操作`ServletOutputStream`。见[`ServletOutputStream.setWriteListener`](http://javaee-spec.java.net/nonav/javadocs/javax/servlet/ServletOutputStream.html#setWriteListener(javax.servlet.WriteListener))。

可以在[http://docs.oracle.com/javaee/7/tutorial/servlets013.htm找到一个示例](http://docs.oracle.com/javaee/7/tutorial/servlets013.htm)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T23:18:15.207

这可能会有所帮助

[http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/async-servlet/async-servlets.html](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/async-servlet/async-servlets.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-30T23:49:32.820

我们不能完全导致写入是异步的。实际上，我们必须忍受这样的限制，即当我们向客户写出一些东西时，我们希望能够迅速这样做，并且如果我们不这样做，就能够将其视为错误。也就是说，如果我们的目标是尽可能快地将数据流式传输到客户端，并使用通道的阻塞/非阻塞状态作为控制流量的一种方式，那么我们就不走运了。但是，如果我们以客户端应该能够处理的低速率发送数据，我们至少能够及时断开读取速度不够快的客户端。

例如，在您的应用程序中，我们以较慢的速度（每隔几秒）发送 keepalive，并希望客户端能够跟上他们正在发送的所有事件。我们将数据挥霍给客户端，如果跟不上，我们可以及时干净地断开连接。这比真正的异步 I/O 更受限制，但它应该满足您的需要（顺便说一下，我的）。

诀窍是，所有用于写出输出的方法，这些方法只是抛出 IOExceptions 实际上比这多一点：在实现中，所有对可以被中断（）的东西的调用都将用这样的东西包装（取自码头 9):

```
catch (InterruptedException x)
    throw (IOException)new InterruptedIOException().initCause(x); 
```

（我还注意到这在 Jetty 8*中不会*发生，其中记录了 InterruptedException 并立即重试阻塞循环。大概您确保您的 servlet 容器表现良好以使用此技巧。）

也就是说，当慢速客户端导致写入线程阻塞时，我们只需通过在线程上调用 interrupt() 来强制将写入作为 IOException 抛出。想一想：非阻塞代码无论如何都会在我们的一个处理线程上消耗一个时间单位来执行，因此使用刚刚中止的阻塞写入（比如说一毫秒之后）在原则上实际上是相同的。我们仍然只是在线程上消耗很短的时间，只是效率稍低。

我已经修改了您的代码，以便主计时器线程在我们开始写入之前运行一个作业以限制每次写入的时间，并且如果写入快速完成，则该作业将被取消，这是应该的。

最后一点：在一个实现良好的 servlet 容器中，导致 I/O 被抛出*应该*是安全的。如果我们能捕获 InterruptedIOException 并稍后再次尝试写入，那就太好了。如果慢速客户端跟不上完整的流，我们可能想给他们事件的一个子集。据我所知，在 Jetty 中这并不完全安全。如果写入抛出，HttpResponse 对象的内部状态可能不够一致，无法处理以后安全地重新进入写入。我认为尝试以这种方式推送 servlet 容器是不明智的，除非我错过了提供此保证的特定文档。我认为这个想法是，如果发生 IOException，连接被设计为关闭。

下面是代码，修改了 RunJob::run() 版本，使用了一个非常简单的说明（实际上，我们希望在这里使用主计时器线程，而不是每次写入都启动一个，这很愚蠢）。

```
public void run()
{
    String message = null;
    synchronized(HugeStreamWithThreads.this) {
        if(this.id != HugeStreamWithThreads.this.id) {
            this.id = HugeStreamWithThreads.this.id;
            message = HugeStreamWithThreads.this.message;
        }
    }
    if(message == null)
        message = ":keep-alive\n\n";
    else
        message = formatMessage(message);

    final Thread curr = Thread.currentThread();
    Thread canceller = new Thread(new Runnable() {
        public void run()
        {
            try {
                Thread.sleep(2000);
                curr.interrupt();
            }
            catch(InterruptedException e) {
                // exit
            }
        }
    });
    canceller.start();

    try {
        if(!sendMessage(message))
            return;
    } finally {
        canceller.interrupt();
        while (true) {
            try { canceller.join(); break; }
            catch (InterruptedException e) { }
        }
    }

    boolean once_again = false;
    synchronized(HugeStreamWithThreads.this) {
        if(this.id != HugeStreamWithThreads.this.id)
            once_again = true;
    }
    if(once_again)
        pool.submit(this);

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-30T16:32:10.083

春天适合你吗？Spring-MVC 3.2 有一个名为 的类`DeferredResult`，它将优雅地处理您的“10,000 个打开连接/10 个服务器池线程”场景。

示例：http: [//blog.springsource.org/2012/05/06/spring-mvc-3-2-preview-introducing-servlet-3-async-support/](http://blog.springsource.org/2012/05/06/spring-mvc-3-2-preview-introducing-servlet-3-async-support/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-28T22:23:45.057

我快速浏览了您的列表，所以我可能遗漏了一些要点。池线程的优点是随着时间的推移在多个任务之间共享线程资源。也许您可以通过间隔不同http连接的keepAlive响应来解决您的问题，而不是同时将所有这些响应分组。

# php - 使用“记住我”的用户身份验证

> ID：12085237
> 
> 赞同：0
> 
> 时间：2012-08-23T05:27:53.760
> 
> 标签：php, javascript, jquery, cookies, local-storage

这是一个**多部分的问题**，因此请随时就任何一个部分提供意见，但由于我只能接受一个答案，因此我将接受与所提出的所有问题相关的最完整的答案。如果它们相关且有用，我将支持部分答案。

首先，有一点背景知识，不用 TL；DR 关于这个问题：我正在为这个项目使用[Quake 框架](https://github.com/clowerweb/Quake-Framework)（是的，它是我的）——为了快速描述它，它主要使用**CodeIgniter**和**jQuery 1.8.0**（除其他外，但它们与问题无关。）它还包括 Total Storage jQuery 插件（用于本地存储）和 jQuery Cookies 作为不支持本地存储的浏览器的后备。

**第1部分：**

我已经建立了一个用户认证系统。登录具有“记住我”功能（目前还没有功能）——存储用户数据的最佳方式是什么？一些想法：

*   将用户名和 sha1 密码存储在本地存储/cookie 中。在我看来，这可能是一个不安全的选择，但我不确定。
*   `com_create_guid()`在 localstorage/cookie 以及数据库中存储某种散列（可能是 PHP 的？）（可能还有到期日期？）

**第2部分：**

实施“记住我”功能后，完成实施的最佳方式是什么？我是否应该让每个页面都检查 cookie（因为用户最初可能会点击任何页面并且需要重新记录？）虽然每个页面当然都需要检查会话，并且一旦它们被 cookie/本地存储重新记录，他们将获得一个常规会话，在每个页面上检查会话和 cookie 似乎非常多余（我们当然会首先检查会话，这样我们就不会重复检查登录用户的 cookie，如果没有会话，然后检查 cookie，但仍然存在。）有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:34:33.180

第1部分

最好在服务器中生成一个随机令牌（您提到的哈希），并将其保存在数据库和 cookie 中。使其随机化将防止其他人“猜测”或生成您的令牌。使用 GUID 将是您的最佳选择。

第2部分

在每个页面中，您可以检查是否存在会话。如果没有可用的会话，请检查您的身份验证 cookie。如果 auth cookie 可用，请触发您的 auth-check 代码。这样，您只需要在用户尚未登录时检查 auth cookie。

# android - 我可以在卸载时删除特定于应用程序的 SD 卡数据吗？

> ID：12085243
> 
> 赞同：0
> 
> 时间：2012-08-23T05:28:35.353
> 
> 标签：android

我可以在以编程方式卸载应用程序时删除特定于应用程序的 SD 卡数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:50:38.913

用这个

```
@Override
    protected void onDestroy()
    {
        super.onDestroy();
        File checkFile = new File("/sdcard/Accentra/");//getting the control of sdcard files
        deleteDir(checkFile);
    }

    //Deleting the temperary folder and the file created in the sdcard
    public static boolean deleteDir(File dir) 
    {
        if (dir.isDirectory()) 
        {
            String[] children = dir.list();
            for (int i=0; i<children.length; i++) 
            {
                boolean success = deleteDir(new File(dir, children[i]));
                if (!success) 
                {
                    return false;
                }
            }
        }
        // The directory is now empty so delete it
        return dir.delete();
    } 
```

# iphone - 如何在 RSA 中提取私钥指数

> ID：12085247
> 
> 赞同：1
> 
> 时间：2012-08-23T05:29:07.937
> 
> 标签：iphone, objective-c, rsa, private-key

当我使用时`- (void)generateKeyPairRSA`，我得到公钥和私钥的这些值**Public key SecKeyRef: 0x7131000 Private key SecKeyRef: 0x790b000**。

如何从私钥和公钥中提取 n,e,d 值？

# contextmenu - 上下文菜单演示应用程序无法正常工作

> ID：12085248
> 
> 赞同：0
> 
> 时间：2012-08-23T05:29:12.760
> 
> 标签：contextmenu, crossrider

当用户选择一些文本并右键单击它时，我正在生成上下文菜单。我尝试实现它，问题是甚至示例应用程序都无法正常工作。

[http://crossrider.com/apps/10565/ide](http://crossrider.com/apps/10565/ide)

```
appAPI.contextMenu.add("key1", "Display data object", function (data) {
   var sAlertText = 'pageUrl: ' + data.pageUrl + '\r\n' +
                 'linkUrl: ' + data.linkUrl + '\r\n' +
                 'selectedText:' + data.selectedText + '\r\n' +
                 'srcUrl:' + data.srcUrl;
   alert(sAlertText);
}, ["all"]); 
```

只有`data.pageUrl`可用，其余的都是“未定义的”。我想要选定的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:18:01.787

免责声明：我在 Crossrider 工作。

由于 Chrome API 的变化，contextMenu 确实存在问题。我们已经解决了这个问题，现在演示应用程序可以工作了。

感谢您报告此问题，如果您遇到任何问题，请随时告诉我们！

阿米尔

# ruby - Nokogiri 在heroku 上产生不同的结果？

> ID：12085250
> 
> 赞同：2
> 
> 时间：2012-08-23T05:29:26.147
> 
> 标签：ruby, heroku, nokogiri

我有一个非常奇怪的问题，我很感激帮助追踪它。

我正在使用 nokogiri gem 来解析一些 html，并且我正在解析一个包含奇怪字符的文件。不完全确定这个字符是什么，在 vim 中显示为 ^Q。

在我自己的计算机上，一切正常，但是在 heroku 上，它`</body></html><html>`在命中字符时插入 a ，并且选择器仅返回奇怪字符之前的元素。

为了说明： `Nokogiri::HTML( open("http://thoms.net.nz/e2.html")).css("body div").count`在heroku上是1，在我的电脑上是2。- 包含此字符的文件可以从[http://thoms.net.nz/e2.html](http://thoms.net.nz/e2.html)下载。

我的电脑和 heroku 都在运行 nokogiri 1.5.5 和 ruby​​ 1.9.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:04:00.710

这`^Q`是一个软件控制字符 (XON)，它不应该出现在 HTML 中。我怀疑它的意外出现让 Nokogiri 和 Heroku 都感到困惑，但方式不同。

来自 Internet 的 HTML 文档可能会以多种方式被破坏。我已经在其中看到了各种各样的垃圾，如果我无法使用 iconv 或 Unicode 音译来理解它，我会求助于快速全局搜索并替换以删除任何不在正常 ASCII 范围内的内容，然后再进一步加工。

* * *

在 Ruby 中，全局搜索和替换使用`String#gsub`.

```
doc = Nokogiri::HTML(html.gsub("\u0011", '')) 
```

# c - 如何用 C 编写 Hello World

> ID：12085251
> 
> 赞同：-5
> 
> 时间：2012-08-23T05:29:29.917
> 
> 标签：c, compiler-errors

我用 C 写了一个小程序来打印“Hello world”。我不是 C 程序员，但我喜欢尝试一下。在我的程序中有一个错误。请告诉我它是什么？这是我的程序：

```
int main(){
    printf("Hello World");
} 
```

我用我的 Java 经验写了这个。我找不到问题所在。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T05:50:40.093

您不能像在 Java 中那样直接使用 printf() 函数。您应该告诉编译器您将使用输入/输出流。你可以在这一行告诉它：

```
#include <stdio.h> 
```

您还应该在源代码的末尾输入这一行：

```
return 0; 
```

这将告诉编译器：

> “如果程序成功，它将返回 0，否则它将返回任何其他数字”

这意味着如果您的程序成功 main() 函数将返回 0。然后编译知道程序是好的。

最后你的完整代码是：

```
#include <stdio.h>

int main() {
    printf("Hello world");
    return 0;
} 
```

要编译它并查看单词“Hello World”，只需将此文件保存为 .c 文件并在程序目录中打开 cmd 并键入

```
gcc hello.c -o hello && hello 
```

（将 'hello.c' 替换为您的文件名，将 'hello' 替换为您要与 .exe 文件一起使用的名称）

记住我的电脑是 Windows。这个编译代码适用于windows。如果您的操作系统是类似 UNIX 的操作系统。然后使用此代码进行编译：

```
gcc hello.c -o hello
./hello 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-23T05:34:01.490

一个完整的 C 语言 hello world 程序：

```
#include <stdio.h>

int main(void) {
    printf("Hello World\n");
    return 0;
} 
```

然后编译（假设 gcc）并执行它：

```
gcc -o test test.c
./test 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-09T16:30:22.850

首先，您必须使用头文件。

```
#include <stdio.h> 
```

这样做是调出一个包含一堆命令的头文件。这将使它识别“printf”代码段。接下来，您必须关闭程序。由于没有结束语句，程序将无法编译，因为它不知道这是否是代码的结尾。在程序结束时使用它...

```
return 0; 
```

这将关闭程序，这意味着编译器可以停止寻找其他代码。您可能还想查看一些编程手册（有许多免费的在线手册）以了解语法。

最后一件事：大多数 C 代码的末尾都需要一个分号。这不适用于“int main”语句，也不适用于我上面定义的头文件。然而，关闭程序的“return”函数确实需要一个分号。

希望这有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T05:47:56.870

最后还应该包括一个暂停：

```
#include <stdio.h>

int main(void) {
    printf("Hello World\n");

    //Read a character from the console
    getchar();

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-23T05:54:57.100

就像在 Java 程序中导入一样，在这里您必须导入`include`您在程序中使用的库。您使用了库函数`printf`，但未包含在内`stdio.h`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-23T12:21:54.843

我同意有很多方法可以编写最简单的方法之一是

```
#include<stdio.h>

int main(void){
  printf("Hello World\n");
  return 0;
} 
```

您甚至可以使用上面建议的不同方式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-23T12:01:21.903

你应该先看看“main”的结构。尝试理解上述答案中已经很好地解释的各个部分。

> "#include" ：要包含在程序中的预处理指令。但为什么？因为您正在尝试使用其中定义的函数。
> 
> int ：“主”程序的返回类型。但为什么？因为调用“main”的函数需要知道“main”程序是否正常运行。
> 
> main ：代码的入口点。不要在这里问为什么:-)
> 
> main( void ) ：告诉编译器我们没有将任何参数传递给程序“main”
> 
> return 0 ：因为您向“main”承诺，如果“main”功能正常，您将返回一些东西。

最后是代码：

```
#include <stdio.h>
int main( void )
{
    printf( "Hello World\n" ) ; //Notice the '\n' here. Good coding practice.
    return 0 ;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-06T20:42:24.247

```
 #include <stdio.h>                   //Pre-processor commands<br/>
 void main()                          //Starting point of the program<br/>{ //Opening Braces            
     printf("Hello World\n");         //Print Hello World on the screen<br/> 
     return 0;
 }                                    //Ending Braces 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-06T11:25:00.517

您不能像在 Java 中那样使用 printf() 函数。你必须告诉编译器你要使用什么。你可以这样说：-

```
#include <stdio.h> 
```

您必须在最后输入此行：-

```
return 0; 
```

那么你的完整代码是： -

```
#include <stdio.h>
int main(){
    printf("Hello World");
return 0;
} 
```

要编译它并查看“Hello World”一词，只需将此文件保存为 .c 文件并在程序目录中打开 cmd 并键入：-

```
gcc hello.c -o hello && hello 
```

（将 'hello.c' 替换为您的文件名，将 'hello' 替换为您要与 .exe 文件一起使用的名称）

记住我的电脑是 Windows。所以我只能为 Windows 操作系统编译。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-01-06T19:38:22.917

一旦它可以工作，请检查它，我已经写了评论：

```
#include<stdio.h>               //Pre-processor commands

void main() {
    printf("Hello World\n");    //Print Hello World on the screen
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-20T20:58:31.157

一个完整的 C 语言 hello world 程序：

```
#include <stdio.h>

int main(void) {
    printf("Hello World\n");
    return 0;
}
Then compile (assuming gcc) and execute it:

gcc -o test test.c
./test 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-12-07T18:45:50.283

```
#include <stdio.h>
int main() {

    // printf, used to print (display) Hello World
    printf("Hello World ! ");

    // return 0, as the main function is of type int so it must return an integer value
    return 0;
} 
```

# magento - 获取magento中的父类别ID

> ID：12085258
> 
> 赞同：0
> 
> 时间：2012-08-23T05:29:57.660
> 
> 标签：magento

我将以下代码放入 magento 基本模板文件`view.phtml`中。

$categories = $_product->getCategoryIds(); print_r($类别)

使用示例数据，当在`Ottoman`产品页面上时，哪个面包屑是

```
 Home / Furniture / Living Room / Ottoman 
```

输出是`Array ( [0] => 22 )` 22 是`Living Room`id。如何获得`Furniture and Living Room` 身份证。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:46:40.507

```
$categories=$_product->getCategoryIds();
foreach ($categories as $category)
{
    $info = Mage::getModel('catalog/category')
            ->load($category)
            ->getParentCategory();
    echo $info->getId(); //display category ID
    //var_dump($info->debug());  # display model contents
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T06:38:06.433

以下是获取所有类别 ID 的方法：

```
//load root category 
$rootCategoryId = Mage::app()->getStore()->getRootCategoryId();
$rootCategory = Mage::getModel('catalog/category')
                ->load($rootCategoryId);

//load all children categories of the root category
$childrenCategories = $rootCategory->getChildrenCategories(); 
```

现在您可以像这样访问他们的 ID：

```
foreach ($childrenCategories as $category) {
        var_dump($category->getId());
} 
```

# haskell - 递归类型族

> ID：12085260
> 
> 赞同：7
> 
> 时间：2012-08-23T05:30:12.277
> 
> 标签：haskell, type-families

我正在尝试一个`mtl`-style 类，它允许我将`Pipe`组合提升到外部 monad 上。为此，我必须定义类型的哪两个变量是`Pipe`组合的域和共域。

我尝试使用关联类型族方法，但无济于事：

```
{-# LANGUAGE TypeFamilies #-}

import Control.Monad.Trans.Free
import Control.Monad.Trans.State
import Control.Pipe hiding (Pipe)

data Pipe a b m r = Pipe { unPipe :: FreeT (PipeF a b) m r }

class MonadPipe m where
    type C a b (m :: * -> *) :: * -> *
    idT :: C a a m r
    (<-<) :: C b c m r -> C a b m r -> C a c m r

instance (Monad m) => MonadPipe (Pipe i o m) where
    type C a b (Pipe i o m) = Pipe a b m
    idT = Pipe idP
    (Pipe p1) <-< (Pipe p2) = Pipe (p1 <+< p2)

instance (MonadPipe m) => MonadPipe (StateT s m) where
    type C a b (StateT s m) = StateT s (C a b m)
    idT = StateT $ \s -> idT
    (StateT f1) <-< (StateT f2) = StateT $ \s -> f1 s <-< f2 s 
```

但是，上面的代码不进行类型检查。GHC 给出以下错误：

```
family.hs:23:15:
    Could not deduce (C a a m ~ C a0 a0 m0)
    from the context (MonadPipe m)
      bound by the instance declaration at family.hs:21:14-52
    NB: `C' is a type function, and may not be injective
    Expected type: C a a (StateT s m) r
      Actual type: StateT s (C a0 a0 m0) r
    In the expression: StateT $ \ s -> idT
    In an equation for `idT': idT = StateT $ \ s -> idT
    In the instance declaration for `MonadPipe (StateT s m)'

family.hs:24:10:
    Could not deduce (C b c m ~ C b0 c0 m1)
    from the context (MonadPipe m)
      bound by the instance declaration at family.hs:21:14-52
    NB: `C' is a type function, and may not be injective
    Expected type: C b c (StateT s m) r
      Actual type: StateT s (C b0 c0 m1) r
    In the pattern: StateT f1
    In an equation for `<-<':
        (StateT f1) <-< (StateT f2) = StateT $ \ s -> f1 s <-< f2 s
    In the instance declaration for `MonadPipe (StateT s m)'

<<Two other errors for 'C a b m' and 'C a c m'>> 
```

我很难理解为什么类型不会统一，特别是对于`idT`定义，因为我希望内部`idT`被普遍量化，`a`所以它会匹配外部。

所以我的问题是这是否可以用类型族来实现，如果不能用类型族来实现，它怎么能实现？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T08:15:05.950

默认情况下，类型推断是一种猜谜游戏。Haskell 的表面语法使得明确哪些类型应该实例化 a 变得相当尴尬`forall`，即使您知道自己想要什么。这是 Damas-Milner 完整性的美好旧时光的遗产，当时有趣到需要显式键入的想法被简单地禁止了。

假设我们可以使用 Agda 样式的符号在模式和表达式中显式地显示类型应用程序，`f {a = x}`选择性地访问. 您的`a``f`

```
idT = StateT $ \ s -> idT 
```

应该是指

```
idT {a = a}{m = m} = StateT $ \ s -> idT {a = a}{m = m} 
```

所以左边有类型`C a a (StateT s m) r`，右边有类型`StateT s (C a a m) r`，在类型家族的定义上是相等的，欢乐辐射世界。但这不是你写的意思。调用多态事物的“变量规则”要求每个`forall`都用一个新的存在类型变量实例化，然后通过统一解决。所以你的代码意味着什么

```
idT {a = a}{m = m} = StateT $ \ s -> idT {a = a'}{m = m'}
  -- for a suitably chosen a', m' 
```

在计算类型族之后，可用的约束是

```
C a a m ~ C a' a' m' 
```

但这并没有简化，也不应该简化，因为没有理由假设`C`是单射的。令人抓狂的是，机器比你更关心找到最通用解决方案的可能性。您已经想到了一个合适的解决方案，但问题是在默认假设是*猜测时实现**通信*。

 *有许多策略可以帮助您摆脱困境。一种是改用数据族。Pro：内射性没问题。缺点：构造函数。（警告，以下未经检验的猜测。）

```
class MonadPipe m where
  data C a b (m :: * -> *) r
  idT :: C a a m r
  (<-<) :: C b c m r -> C a b m r -> C a c m r

instance (MonadPipe m) => MonadPipe (StateT s m) where
  data C a b (StateT s m) r = StateTPipe (StateT s (C a b m) r)
  idT = StateTPipe . StateT $ \ s -> idT
  StateTPipe (StateT f) <-< StateTPipe (StateT g) =
    StateTPipe . StateT $ \ s - f s <-< g s 
```

另一个缺点是生成的数据系列不是自动单子的，也不是很容易解包或以统一的方式使其成为单子。

我正在考虑为这些东西尝试一种模式，让你保留你的类型系列，但为它定义一个新类型包装器

```
newtype WrapC a b m r = WrapC {unwrapC :: C a b m r} 
```

然后`WrapC`在操作的类型中使用以使类型检查器保持在正确的轨道上。我不知道这是否是一个好策略，但我计划在这些日子里找出答案。

更直接的策略是使用代理、幻象类型和作用域类型变量（尽管本示例不需要它们）。（再次，猜测警告。）

```
data Proxy (a :: *) = Poxy
data ProxyF (a :: * -> *) = PoxyF

class MonadPipe m where
  data C a b (m :: * -> *) r
  idT :: (Proxy a, ProxyF m) -> C a a m r
  ...

instance (MonadPipe m) => MonadPipe (StateT s m) where
  data C a b (StateT s m) r = StateTPipe (StateT s (C a b m) r)
  idT pp = StateTPipe . StateT $ \ s -> idT pp 
```

这只是使类型应用程序显式化的一种糟糕方式。请注意，有些人使用`a`它自己而不是作为参数`Proxy a`传递`undefined`，因此无法在类型中将代理标记为这样，并且依赖于不会意外评估它。最近的进展`PolyKinds`可能至少意味着我们只能拥有一种多态幻象代理类型。至关重要的是，`Proxy`类型构造函数是单射的，所以我的代码实际上是在说“这里和那里的参数相同”。

但有时我希望我可以在源代码中降到 System FC 级别，或者以其他方式表达明确的手动覆盖以进行类型推断。这样的事情在依赖类型社区中是相当标准的，没有人会想象机器可以在没有任何推动的情况下解决所有问题，或者隐藏的参数没有任何值得检查的信息。一个函数的隐藏参数可以在使用站点被抑制，但需要在定义中明确表示，这是很常见的。Haskell 的现状是基于一种文化假设，即“类型推断就足够了”，这种假设已经偏离了一代人的轨道，但仍然以某种方式持续存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T08:15:35.580

编辑了三遍：数据系列版本见底部。并将 GADT 版本更改为删除 m。

让我猜猜：剩菜？

让我先介绍一下类型错误，即解决方案。

```
The class defines :
type C a0 b0 m  where a0 and b0 are fresh.
idT :: C a a m r, where a and r are fresh. 

The idT in the (Pipe i o m0) instance is okay by what I think is the logic:
LHS is idT :: C a0 a0 (Pipe i o m0) r0 which becomes Pipe a0 a0 m0 r0
RHS is Pipe idP :: Pipe a1 a1 m1 r1 starts fresh
And then these unify
because Pipe is a data constructor.

The idT in the MonadPipe m0 => (StateT s0 m0) instance:
LHS is idT :: C a0 a0 (StateT s0 m0) which becomes StateT s0 (C a0 a0 m0)
RHS is StateT (\s -> idT) :: StateT s1 m1 r1
Some unification seems to happen...
RHS is StateT (\s -> idT) :: StateT s1 (C a0 a0 m0) r1
  where expression idT :: MonadPipe m1 => (C a2 a2 m2) r2 starts fresh
        context of idT :: (C a0 a0 m0) (a1, s1)
And then (C a0 a0 m0) does not unify with (C a1 a2 m2)
because C is a type constructor. 
```

`newtype`如果类型族成为数据族，您之前制作 Category 实例的方法可能在这里有效。

编辑：您更改参数的顺序和 newtype StateT 来解决它：

```
{-# LANGUAGE TypeFamilies, MultiParamTypeClasses #-}

import Control.Monad.Trans.Free
import Control.Monad.Trans.State
import Control.Pipe hiding (Pipe)

data Pipe m a b r = Pipe { unPipe :: FreeT (PipeF a b) m r }

newtype StatePipe s mp a b r = SP (StateT s (mp a b) r)

class MonadPipe mp where
    idT :: mp a a r
    (<-<) :: mp b c r -> mp a b r -> mp a c r

instance (Monad m) => MonadPipe (Pipe m) where
    idT = Pipe idP
    (Pipe p1) <-< (Pipe p2) = Pipe (p1 <+< p2)

instance (MonadPipe mp) => MonadPipe (StatePipe s mp) where
     idT = SP . StateT $ \s -> idT
     (SP (StateT f1)) <-< (SP (StateT f2)) = SP . StateT $ \s -> f1 s <-< f2 s 
```

虽然 MonadTrans 现在可能很伤心。另一种方法通过使用 GADT 来保持参数顺序，也许可以更清楚地表达您要构建的内容：

```
{-# LANGUAGE MultiParamTypeClasses, GADTs, FlexibleInstances #-}
import Control.Monad.Trans.Free
import Control.Monad.Trans.State
import Control.Pipe hiding (Pipe)

data Pipe s a b m r where
  FPipe :: { unPipe :: FreeT (PipeF a b) m r } -> Pipe () a b m r
  LPipe :: StateT s1 (Pipe s2 a b m) r -> Pipe (s1,s2) a b m r

class MonadPipe s where
    idT :: Monad m => Pipe s a a m r
    (<-<) :: Monad m => Pipe s b c m r -> Pipe s a b m r -> Pipe s a c m r

instance MonadPipe () where
    idT  = FPipe idP
    (FPipe p1) <-< (FPipe p2) = FPipe (p1 <+< p2)

instance MonadPipe s2 => MonadPipe (s1,s2) where
    idT  = LPipe (StateT $ \s -> idT)
    (LPipe (StateT f1)) <-< (LPipe (StateT f2)) = 
       LPipe (StateT $ \s1 -> (f1 s1 <-< f2 s1)) 
```

我可以把它翻译成一个更好的数据系列吗？

```
{-# LANGUAGE TypeFamilies #-}
import Control.Monad.Trans.Free
import Control.Monad.Trans.State
import Control.Pipe hiding (Pipe)

data family GPipe s :: * -> * -> (* -> *) -> * -> *
newtype instance GPipe () a b m r = Pipe { unPipe :: FreeT (PipeF a b) m r }
newtype instance GPipe (s1,s2) a b m r = LPipe ( StateT s1 (GPipe s2 a b m) r )

class MonadPipe s where
  idT :: Monad m => GPipe s a a m r
  (<-<) :: Monad m => GPipe s b c m r -> GPipe s a b m r -> GPipe s a c m r

instance MonadPipe () where
  idT = Pipe idP
  (Pipe p1) <-< (Pipe p2) = Pipe (p1 <+< p2)

instance MonadPipe s2 => MonadPipe (s1,s2) where
  idT = LPipe (StateT (\s -> idT))
  (LPipe (StateT f1)) <-< (LPipe (StateT f2)) = LPipe (StateT (\s -> f1 s <-< f2 s)) 
```*

# jquery - Jquery：我如何将已 .load() 的页面元素访问到新页面中

> ID：12085262
> 
> 赞同：0
> 
> 时间：2012-08-23T05:30:19.250
> 
> 标签：jquery

我是 jquery 的新手，但已经喜欢它了（我是一名 php 程序员）。

我刚刚使用 .load() 函数将内容从另一个页面加载到新页面。我能够加载内容。

但是，我现在希望访问新加载内容的某些元素，但我无法做到这一点。

```
 $(document).ready(function() {

      $('#signin a').click(function() {
     var url=$(this).attr('href');
      $('#loginpostion').load(url + ' #loginform');
      return false;

       $('#closebox a').click(function() {

        $('#loginpostion').removeClass()

      return false;

      }); //end click 
```

我现在希望从新加载的页面访问以下 A 标记：#closebox a

我需要做些什么来让 Jquery 知道“新加载的内容”现在将成为当前页面 DOM 的一部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:40:48.530

[您可以在load](http://api.jquery.com/load/)方法上使用完整的回调方法，例如：

```
$(document).ready(function() {
    $('#signin a').click(function() {
        var url=$(this).attr('href');
        $('#loginpostion').load(url + ' #loginform', function() {
            $('#closebox a').click(function() {
                $('#loginpostion').removeClass()
                return false;
            }); //end click  
        });
    });
}); 
```

或者您可以使用委托/实时（如果您不使用 jquery 1.7+），如果您希望所有 #closebox 元素现在或将来存在于页面上（使用 jquery 和 ofcouse 那么您不能拥有和 id #closebox) 然后你可以使用：

```
$(document).ready(function() {
    $(document).on('click', '#closebox a', click() {
        $('#loginpostion').removeClass();
        return false;
    });

    $('#signin a').click(function() {
        var url=$(this).attr('href');
        $('#loginpostion').load(url + ' #loginform');
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:34:47.703

您需要将该函数委托给页面加载时存在的静态父元素。我们将此称为“冒泡”或“事件传播”。在 jQuery 的最新版本中，我们使用该`.on()`函数来执行这些操作。

```
$(document).on('click', '#closebox a', function(){

    $('#loginpostion').removeClass()

     return false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T05:34:55.383

`load()`使用 ajax，它是异步的，因此它会在您的脚本继续运行时在后台加载。这意味着当您尝试访问`#closebox`脚本的下一行时，它还不存在，因为它还没有被插入到 DOM 中。你必须等到`load()`函数完成，幸运的是`load()`有一个回调函数。此外，每当您使用 return 时，脚本都会结束并返回，因此您必须这样做：

```
$(document).ready(function() {
    $('#signin a').click(function(e) {
        e.preventDefault();
        var url=$(this).attr('href');
        $('#loginpostion').load(url + ' #loginform', function() {
             $('#closebox a').click(function(e) {
                 e.preventDefault();
                 $('#loginpostion').removeClass();
             });
        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T05:32:51.047

从处理程序函数中删除第一`return false;`行。`$('#signin a').click()`它导致执行在第二个点击处理程序 (to `#closebox a`) 被绑定之前返回。

# ruby-on-rails - Rails 停止记录

> ID：12085264
> 
> 赞同：2
> 
> 时间：2012-08-23T05:30:28.050
> 
> 标签：ruby-on-rails, logging

我在开发环境中运行的 Rails 应用程序突然停止记录，我不知道为什么。

我尝试通过执行登录到一个新文件

```
config.logger = Logger.new('log/temp.log')
config.log_level = :debug 
```

但仍然没有运气。新文件 temp.log 已创建，但文件中未记录任何内容。问题是这发生在我运行 nginx 的开发服务器上（我在这个服务器上使用“rails s -d”运行我的 rails 应用程序）。完全相同的文件，当我在本地机器（我自己的计算机）上运行时，日志记录工作正常。

所以我觉得日志记录不起作用的原因是服务器特有的东西，但是我没有在服务器上做太多事情（例如我没有安装新的 gem 等）。日志一直工作正常，直到很少几天前。

当我去 Rails 控制台时

```
rails c
> Rails.logger.debug "hello"
=> true 
```

我确实将“hello”登录到上面在配置文件中指定的“log/temp.log”中。

我认为对日志目录或文件的权限是可以的。还有什么可能是错的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:04:45.863

我相信这是一个锁定问题，您可以在删除导致此问题的记录器的调用后解决该问题。

我在 Redmine 1.x 中遇到了这个问题，我在 production.log 中找到了 newrelic_rpm 条目，说它没有运行，并且有 1 行 Redmine 插件初始化。

从 environment.rb（config.gem 行）中删除 newrelic_rpm 和插件记录器初始化消息后，日志记录工具似乎已恢复并且日志条目再次出现。

# c# - 当 WP7 中的 FG 和 BG 同步发生冲突时会发生什么？

> ID：12085266
> 
> 赞同：1
> 
> 时间：2012-08-23T05:30:43.397
> 
> 标签：c#, windows-phone-7, tombstoning

我有一个应用程序，它有一个 BG 模块，它强制每 4 分钟运行一次以进行测试，它工作正常。一旦我启动应用程序（首次启动）并在服务器上注册，就会显示内容并退出应用程序。应用程序进入 Application_Closing() 状态。我等了一会儿（说大约 15 分钟）并尝试启动应用程序，有时会发生这样的情况，在 MainPage() 构造函数执行后，应用程序被停用，在调试时，从日志中我观察到应用程序运行到 Application_Deactivated() 状态。基本上，应用程序启动，它仍然显示启动画面（自定义）并且它突然终止。所以，在我浏览了日志之后，有一个问题困扰着我，即，如果一个应用程序在 BG 任务仍在执行其工作的情况下启动，FG和BG任务之间存在冲突会导致应用程序停用吗？我也怀疑我必须在 APp.xaml.cs 类的 Application_Deactivated() 方法中做更多的事情。这是代码。

```
 private void Application_Deactivated(object sender, DeactivatedEventArgs e)
    {
        Logger.log(TAG, "Application deactivated");
    }
    // Code to execute when the application is closing (eg, user hit Back)
    // This code will not execute when the application is deactivated
    private void Application_Closing(object sender, ClosingEventArgs e)
    {
       if (appSession != null)
        {
            appSession.close();
        }
       Logger.log(TAG, "Application closed");
    } 
```

//日志：-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:53:21.650

根据我从您的查询中了解到的情况，我可以得出结论，由于应用程序在启动之前在 BG 线程中运行，因此它无法分配需要它在 FG 上的 UI 资源（由于跨线程而没有发生问题）。我想你需要在继续之前解决这个冲突。

注意：我不确定这一点。它只是一个观察。希望我的回答对你有所帮助。

# javascript - 如何在 html5、Android、Phonegap 中添加 Scroller

> ID：12085267
> 
> 赞同：1
> 
> 时间：2012-08-23T05:30:47.980
> 
> 标签：javascript, android, html, cordova

我的 html 页面中有几个部分，其中一些部分是由 JS 动态生成的。在某些部分我需要滚动，以便其他部分不会滚动，但只有点击的部分应该滚动。目前所有部分/页面都在滚动。

我尝试了 iScroll ，但不适用于 Android、Phonegap

任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T21:52:47.930

尝试这个：

1.) 将您的 DIV 溢出设置为自动.. 例如

```
 <div id="wrapper" style="overflow:auto; height: 200px">...content...</div> 
```

2.）添加这个javascript：

```
<script>
function isTouchDevice(){
    try{
        document.createEvent("TouchEvent");
        return true;
    }catch(e){
        return false;
    }
}

function touchScroll(id){
    if(isTouchDevice()){ //if touch events exist...
        var el=document.getElementById(id);
        var scrollStartPos=0;

        document.getElementById(id).addEventListener("touchstart", function(event) {
            scrollStartPos=this.scrollTop+event.touches[0].pageY;
            event.preventDefault();
        },false);

        document.getElementById(id).addEventListener("touchmove", function(event) {
            this.scrollTop=scrollStartPos-event.touches[0].pageY;
            event.preventDefault();
        },false);
}
} 
</script> 
```

3.) 在页面加载时调用它.. 如果你使用 jQuery：

```
$(document).ready(function() { 
   touchScroll("wrapper");
}); 
```

4.) 如果您希望滚动条可见，只需定义以下 CSS 规则：

```
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  border-radius: 10px;
  background-color: #000;
} 
```

这是经过测试的，应该可以在任何 Android 或 iOS 设备上运行。您可以将其与 position:fixed 和/或 position:absolute css 规则结合使用

# java - 无法为“.class”字符串模式创建 SimpleName

> ID：12085268
> 
> 赞同：1
> 
> 时间：2012-08-23T05:30:48.967
> 
> 标签：java, abstract-syntax-tree, eclipse-jdt

ast.newSimpleName() 方法有问题。

我无法创建“SomeJava.class”类型的 SimpleName。但该方法适用于“SWT.None”或“SomeJava.None”等名称。

这是代码：

```
MethodInvocation loggerInstance = ast.newMethodInvocation();

loggerInstance.setExpression(ast.newSimpleName("Logger"));
loggerInstance.setName(ast.newSimpleName("getLogger"));

String[] name1 = {className.replace(".java", ""),"None"};
String[] name2 = {className.replace(".java", ""), "class"};

loggerInstance.arguments().add(ast.newName(name1)); // This works
loggerInstance.arguments().add(ast.newName(name2)); // This doesn't 
```

我是否应该为此使用除 SimpleName 之外的任何其他东西。提前致谢。

* * *

***编辑***：这是我要构造的语句：

```
 Logger.getLogger(ClientTest.class); 
```

在我的分析过程中，我发现使用“类”字面量时会出现问题。不知道如何克服这一点。

```
 ast.newName("class");
    ast.newSimpleName("class"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:11:10.420

使用 ASTView 插件 (http://www.eclipse.org/jdt/ui/astview/index.php) 查看“ClientTest.class”的节点类型是什么，然后构造该类型的节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:23:48.470

从 ASTView 得到它。终于下载安装了。:)

它应该是作为 TypeLiteral 生成的，而不是作为 SimpleName/Name 生成的。

```
TypeLiteral typeLiteral = ast.newTypeLiteral();
typeLiteral.setType(ast.newSimpleType(ast.newSimpleName(className))); 
```

# web-services - Cxf Webservice 的 WSDL 中的自定义字段

> ID：12085273
> 
> 赞同：0
> 
> 时间：2012-08-23T05:31:19.637
> 
> 标签：web-services, wsdl, conditional, cxf

我需要从我的 java 工件生成自定义 wsdl。我使用 cxf apis 来生成服务。

让我详细描述一下场景，我想从同一组 Java 工件生成不同的 WSDL。这种要求背后的想法是向客户提供基于许可证的操作/消息。我们有一组定义为消息和服务接口/实现的 java 对象。使用 Cxf API (ServerFactoryBean) 我按需生成服务/WSDL（纯运行时操作）。

为了清楚起见，我给出了示例场景

```
public class InputBean {

    private XYZ xyz;
    private ABC abc;
    private PQR pqr; 
```

其中 XYZ、ABC、PQR 是一些 java 对象，而 InputBean 在我的服务实现类中使用。

要求是根据许可证有条件地拥有这些字段

```
 if(XYZ Licensed){
   Include XYZ in bean
 }

 if(PQR Licensed){ 
     Include PQR in bean
  }
 if(XYZ and PQR licensed){  
   Inlcude XYZ and PQR
 } 
```

我知道这是一个奇怪的要求，不确定我是否清楚地解释了我的问题。我会尝试使用继承（动态方法调度），但我想要随机组合。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:48:46.107

我通过创建一个模板文件（免费标记模板）解决了这个问题，其中包含所需类的占位符。这将在运行时替换为所需的类名，使用免费标记 api 创建 java 源文件，然后通过 java 编译器 api 创建 java 类。还开发了自定义类加载器以在运行时加载类。所有操作都将在运行时在后台执行。我找不到更好的解决方案来满足我的要求，但我对此感到满意，因为它提供了预期的完美结果。

# qt - Qt IDE c/c++Debugger模式很慢？

> ID：12085276
> 
> 赞同：4
> 
> 时间：2012-08-23T05:31:39.137
> 
> 标签：qt

我正在使用 Qt 来开发 c/c++ 应用程序，而我尝试使用静态库调试应用程序时它非常慢并且需要很多时间步长 (r) in..

任何人都可以建议我让调试器像 vs2008 一样快速。

关于VS

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T06:13:19.620

您可能会遇到这种行为，因为调试器每次都从 Internet 检索系统库所需的调试信息 - 或者根本找不到请求的信息。如果是这样，它将在调试窗口中显示类似的内容。

按照以下步骤设置允许缓存调试符号的符号缓存：

[http://doc.qt.io/qtcreator/creator-debugger-engines.html#setting-cdb-paths-on-windows](http://doc.qt.io/qtcreator/creator-debugger-engines.html#setting-cdb-paths-on-windows)

下次调试时，这可能仍然会使其变慢，但从第二次开始它应该会变得非常快。

但是，如果您无法访问 Internet，则需要从此处手动下载这些符号：

[http://msdn.microsoft.com/en-us/windows/hardware/gg463028.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463028.aspx)

并将它们放在您指定的符号缓存文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-22T23:38:27.433

它与 Windows 和调试符号服务器无关，当 libqt 具有调试符号并且它甚至（直接）在 gdb/cgdb 中发生时就会发生这种情况！它与 Windows (8)、ubuntu (13.04)、fedora (19-rc) & mac (10.8.5 & 10.9) 上的 dwarf (仍在研究这个) 有关 -> 显然与 os 或图书馆

# solr - 启动 solr 时加载类 org.apache.solr.handler.component.CollapseComponent 时出错

> ID：12085278
> 
> 赞同：0
> 
> 时间：2012-08-23T05:31:50.757
> 
> 标签：solr

使用Tomcat 6.0

我在 solrconfig.xml 中配置了 CollapseComponent，但加载类时出错：

```
<searchComponent name="collapse" class="org.apache.solr.handler.component.CollapseComponent" /> 
```

Solr 版本 3.6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:27:55.043

[Solr 字段折叠](https://issues.apache.org/jira/browse/SOLR-236)是作为稳定版本 3.3 的一部分发布的，不需要特殊配置。
同样，它不需要包含任何特殊组件。所以你可以删除它。
传递 group=true&group.field=some_field 应该让它在没有任何变化的情况下工作。

# ios - iOS UIView drawRect 调整大小动画

> ID：12085282
> 
> 赞同：3
> 
> 时间：2012-08-23T05:32:28.110
> 
> 标签：ios, uiview, core-animation, drawrect

我试图在一个简单的 UIView 扩展中覆盖 drawRect 方法，以绘制一个带有圆角的矩形并用黑色填充它，并为视图设置动画以在触摸时调整大小。问题是，调整大小会使绘图完全变形，就好像上下文始终保持不变一样。在动画期间从不调用drawRect。但是，如果我告诉视图在动画之后绘制自己，它会被正确绘制。

如何在不变形的情况下为调整大小设置动画？

```
- (void)drawRect:(CGRect)rect {
  CGContextRef context = UIGraphicsGetCurrentContext();  
  CGFloat radius = rect.size.height * 0.5f;  

  CGMutablePathRef path = CGPathCreateMutable();

  CGPathMoveToPoint(path, NULL, CGRectGetMidX(rect), CGRectGetMinY(rect));
  CGPathAddArcToPoint(path, NULL, CGRectGetMaxX(rect), CGRectGetMinY(rect), 
                  CGRectGetMaxX(rect), CGRectGetMaxY(rect), radius);
  CGPathAddArcToPoint(path, NULL, CGRectGetMaxX(rect), CGRectGetMaxY(rect), 
                  CGRectGetMinX(rect), CGRectGetMaxY(rect), radius);
  CGPathAddArcToPoint(path, NULL, CGRectGetMinX(rect), CGRectGetMaxY(rect), 
                  CGRectGetMinX(rect), CGRectGetMinY(rect), radius);
  CGPathAddArcToPoint(path, NULL, CGRectGetMinX(rect), CGRectGetMinY(rect), 
                  CGRectGetMaxX(rect), CGRectGetMinY(rect), radius);
  CGPathCloseSubpath(path);

  CGContextSaveGState(context);
  CGContextSetFillColorWithColor(context, [UIColor blackColor].CGColor);
  CGContextAddPath(context, path);
  CGContextFillPath(context);
  CGContextRestoreGState(context);
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
  [UIView animateWithDuration:1.f animations:^{
    self.frame = CGRectInset(self.frame, 0.f, -100.f);
  }];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
  [UIView animateWithDuration:1.f animations:^{
    self.frame = CGRectInset(self.frame, 0.f, +100.f);
  }];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:38:10.257

如果您想要 UIView 的圆角边缘，则无需显式重新定义 drawRect。有一种更简单的方法是更改​​ UIView 的 layer 属性。您的视图及其边框将在动画期间正确绘制。

```
// Make your view background color black
myView.backgroundColor = [UIColor blackColor];

// The following will allow you to change the color/border width/ corner radius of your UIView
myView.layer.borderColor  = [UIColor whiteColor].CGColor;
myView.layer.borderWidth  = kDefaultBorderWidth;
myView.layer.cornerRadius = kDefaultBorderRadius; 
```

确保您已`#import <QuartzCore/QuartzCore.h>`在 .m 文件中包含 并且已导入`QuartzCore.framework`

# css - 如何使用“float:right;”防止 100% 宽度 IE6 和 7 中的内容？

> ID：12085284
> 
> 赞同：0
> 
> 时间：2012-08-23T05:32:31.707
> 
> 标签：css, internet-explorer-7, internet-explorer-6

我有一个动态生成的表单，可以在除 IE6 和 7 之外的所有我测试过的浏览器中正常显示。我的标题应该能够放置在表单输入的上方或侧面。对于单选按钮和复选框，我希望控件位于标签的左侧，对于所有其他输入，我希望控件位于右侧。两者的 HTML 应该相同，只有 CSS 应该改变。

```
() 收音机 1 () 收音机 2
[] 复选框 1 [] 复选框 2
正文 |____________|
等等

```

或者

```
收音机 1 收音机 2
() ()
复选框 1 复选框 2
[] []
文本
|____________|
等等

```

到目前为止我有

```
<span class="control">
  <label for="a1" class="forbutton">A1</label>
  <input type="checkbox" id="a1" class="form-input-checkbox" name="a" value="1"/>
</span> 
```

或每个输入的类似内容。CSS是

```
.forbutton {
  margin-bottom: 0.20em;
  float: right;
}
.control {
  display: inline-block;
  vertical-align: text-top;
  position: relative;
}

/* Only if you want labels above inputs */
.form-input-checkbox,
.form-input-radio {
  display: block;
  clear: both;
} 
```

在 IE6 和 7 中，<span> 最终是 100% 宽度，而不是采用其内容的宽度（与其他浏览器一样，包括 IE8）。我怎样才能轻松解决这个问题？但是，如果我给跨度一个宽度，它确实可以修复它，但是我不知道它应该有多宽，因为标签是动态生成的。

目标： 在 HTML 代码中输入之前的
有效 HTML
有效 CSS标签 上面的标签和侧面的标签相同的 HTML 代码

任何达到相同结果的解决方案都将被欣然接受！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:42:51.753

我建议在那个跨度上去掉“display:inline-block”。IE7及更早的版本看不懂。此外，在此示例中，您在该元素上拥有的其他样式并不真正保证使用 inline-block。Span 默认情况下是内联的，我会保持这种状态。

# c++ - IVdsPack::CreateVolume

> ID：12085288
> 
> 赞同：0
> 
> 时间：2012-08-23T05:32:51.593
> 
> 标签：c++, c, windows

```
HRESULT CreatePartitionEx(ULONGLONG ullOffset, ULONGLONG ullSize, ULONG ulAlign,  [in]   CREATE_PARTITION_PARAMETERS *para, IVdsAsync **ppAsync
) 
```

当我传递参数时`ppAsync = NULL`，特定调用失败并返回 INVALIED 参数。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:55:13.947

我对 Createvolume() 做同样的事情，但它返回 hResult= E_InvalidArg 。第四个参数是条带大小。如果类型为 VDS_VT_STRIPE 或 VDS_VT_PaARITY，Windows 实现要求条带大小为 65536。其他卷类型没有条带化，条带大小为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:44:38.903

根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381746%28v=vs.85%29.aspx)，关于最后一个参数 - `ppAsync`：

> IVdsAsync 接口指针的地址，VDS 在返回时对其进行初始化。调用者必须释放接口。使用此指针取消、等待或查询操作的状态。

这意味着您应该在调用函数时提供一个实际指针作为最后一个参数。由于您提供 NULL，因此可能是导致问题的原因。

**编辑**：

像这样使用：

```
IVdsAsync *pAsync;    // Declare a pointer
// Then use it like this (take a look at the last parameter)
CreatePartitionEx(
    ullOffset,
    ullSize,
    ulAlign,
    para,
    &pAsync);    // You pass it with a leading &, which gives you the address of the pointer 
```

那应该这样做。

请记住`pAsync`，如文档所述，您应该在完成后释放它。

# java - Java - 调用公共方法（不是公共无效）

> ID：12085293
> 
> 赞同：0
> 
> 时间：2012-08-23T05:33:01.847
> 
> 标签：java, class, methods

我有这段代码，但我不确定如何使用不同类中`create()`的方法调用公共方法。`public static void main(String[] args)`我在网上搜索过，但在公共方法上一无所获，只是公共无效方法。

这是代码

主类.java：

```
public class Mainclass {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    create createObject = new create();
    createObject.create();
    System.out.println("dammit");

    }

} 
```

创建.java

```
public class Create extends javax.swing.JPanel {

    public create() {
            initComponents();
            setDate();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T05:35:24.037

那实际上是一个构造函数。你用`new`.

```
 create panel = new create(); 
```

使用小写名称的类是非常不正统的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T05:35:43.710

那是一个构造函数，而不是一个普通的方法。你可以看到它和它所在的类同名。这里调用它：

```
create createObject = new create(); 
```

顺便说一句，打电话`create`让我成为一只悲伤的熊猫。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T05:41:09.850

```
public create() {
            initComponents();
            setDate();
    } 
```

`create()`是一个构造函数，所以当你说`Create createObject = new Create();`没有参数化的构造函数时会自动调用。

在这里阅读[构造函数](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)

请遵循 java 命名约定类名始终以大写字母开头。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T05:51:38.833

*从一些题外话开始，但*您可能想阅读[Java 命名约定](http://www.cwu.edu/~gellenbe/javastyle/naming.html)以了解如何在 Java 中命名您的类/方法/变量。

正如我们所知，构造函数的声明看起来像方法声明——除了它们使用类的名称并且没有返回类型。所以你可以有这样的东西：

```
public class create extends javax.swing.JPanel {
    /** Normal Constructor */
    public create() {
    }

    /**
    * Normal method for initialization.
    */
    public void create(){
        initComponents();
        setDate();
    }
} 
```

我倾向于使用特定的方法来处理我的类的对象初始化（*或设置，如果可能*的话），即使所有业务逻辑与对象创建机制分开。所以，如果我是你，我会将我的方法重命名为`public void doCreate()`并初始化那里的所有内容。（*这是主观的和偏好问题*）。在这种情况下，我`MainClass`会改变这样的事情：

```
public class MainClass {
    /**
     * @param args
     */
    public static void main(String[] args) {
        create createObject = new create();
        createObject.doCreate();
        System.out.println("dammit");
    }
} 
```

# oracle - java.sql.SQLException：IBatis 2.3.4 已关闭错误

> ID：12085296
> 
> 赞同：0
> 
> 时间：2012-08-23T05:33:14.333
> 
> 标签：oracle, ibatis, weblogic-10.x

我在代码中看到了一个奇怪的行为。我正在使用 Spring DI 来获取连接。以下是我的 ibatis-context.xml

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">  
<property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />                       <property name="url" value="jdbc:oracle:thin:@hostname:port:dbname" />
<property name="username" value="$usrname" />
<property name="password" value="$pwd" />
<property name="initialSize" value="1"/>
<property name="maxActive" value="1"/>
<property name="maxIdle" value="1"/>
<property name="testWhileIdle" value="true"/>
<property name="minEvictableIdleTimeMillis" value="500"/>
<property name="timeBetweenEvictionRunsMillis" value="500"/>
<property name="validationQuery" value="select 1 from dual"/>
</bean> 
```

当我执行第一个查询时，它会返回结果集。但是当我使用相同的连接执行第二个查询时，它会抛出错误（java.sql.SQLException：已经关闭）。
`code`

```
 try {
        // First Query
        personList = sqlMap.queryForList("getPersonList", parameterMap);
    } catch (Exception e) {
        e.printStackTrace();            
    }

    try {
        // Second Query
        firstNameList = sqlMap.queryForList("getfirstNameList", parameterMap);
    } catch (Exception e) {
        e.printStackTrace();            
    } 
```

几天前相同的代码和配置工作正常，但现在我收到错误。
问题的堆栈跟踪。

```
java.sql.SQLException: Already closed.
    at org.apache.commons.dbcp.PoolableConnection.close(PoolableConnection.java:114)
    at org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.close(PoolingDataSource.java:191)
    at org.springframework.jdbc.datasource.DataSourceUtils.doReleaseConnection(DataSourceUtils.java:278)
    at org.springframework.jdbc.datasource.TransactionAwareDataSourceProxy$TransactionAwareInvocationHandler.invoke(TransactionAwareDataSourceProxy.java:160)
    at $Proxy10.close(Unknown Source)
    at com.ibatis.sqlmap.engine.transaction.external.ExternalTransaction.close(ExternalTransaction.java:82)
    at com.ibatis.sqlmap.engine.transaction.TransactionManager.end(TransactionManager.java:93)
    at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.endTransaction(SqlMapExecutorDelegate.java:734)
    at com.ibatis.sqlmap.engine.impl.SqlMapSessionImpl.endTransaction(SqlMapSessionImpl.java:176)
    at com.ibatis.sqlmap.engine.impl.SqlMapClientImpl.endTransaction(SqlMapClientImpl.java:153)
    at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.autoEndTransaction(SqlMapExecutorDelegate.java:835)
    at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryForList(SqlMapExecutorDelegate.java:574)
    at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryForList(SqlMapExecutorDelegate.java:541)
    at com.ibatis.sqlmap.engine.impl.SqlMapSessionImpl.queryForList(SqlMapSessionImpl.java:118)
    at com.ibatis.sqlmap.engine.impl.SqlMapClientImpl.queryForList(SqlMapClientImpl.java:94)
    at      org.junit.internal.runners.TestMethodRunner.executeMethodBody(TestMethodRunner.java:99)
    at org.junit.internal.runners.TestMethodRunner.runUnprotected(TestMethodRunner.java:81)
    at org.junit.internal.runners.BeforeAndAfterRunner.runProtected(BeforeAndAfterRunner.java:34)
    at org.junit.internal.runners.TestMethodRunner.runMethod(TestMethodRunner.java:75)
    at org.junit.internal.runners.TestMethodRunner.run(TestMethodRunner.java:45)
    at org.junit.internal.runners.TestClassMethodsRunner.invokeTestMethod(TestClassMethodsRunner.java:71)
    at org.junit.internal.runners.TestClassMethodsRunner.run(TestClassMethodsRunner.java:35)
    at org.junit.internal.runners.TestClassRunner$1.runUnprotected(TestClassRunner.java:42)
    at org.junit.internal.runners.BeforeAndAfterRunner.runProtected(BeforeAndAfterRunner.java:34)
    at org.junit.internal.runners.TestClassRunner.run(TestClassRunner.java:52)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

是代码问题还是数据库问题？
有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:09:17.970

我找到了问题的根本原因。
上面给出的配置没有问题。
问题出在第二个查询上（这是一个带有不适当连接的无效查询），oracle 抛出内部错误并且连接被关闭。
当我在 SQLDeveloper（UI 查询工具）中执行查询时，oracle 抛出以下错误并关闭会话。

```
ORA-00600: internal error code, arguments: [kkqcscpopn_Int: 0], [], [], [], [], [], [], [], [], [], [], []
00600\. 00000 -  "internal error code, arguments: [%s], [%s], [%s], [%s], [%s], [%s], [%s], [%s]"
*Cause:    This is the generic internal error number for Oracle program
           exceptions.  This indicates that a process has encountered an
           exceptional condition.
*Action:   Report as a bug - the first argument is the internal error number 
```

有关该错误的更多信息在以下链接中。 [http://www.orafaq.com/wiki/ORA-00600](http://www.orafaq.com/wiki/ORA-00600)

总而言之，查询中的不适当连接可能是导致此错误的原因之一（java.sql.SQLException：已关闭）。
因此，最好仔细检查查询并继续进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T14:03:25.673

TL;博士; 如果您看到此异常，则意味着您的数据库驱动程序关闭了连接，通常是由于 IOException 级别的故障。检查您的日志；IBatis 可能已经为您记录了异常。如果没有在没有池的情况下运行相同的命令，您将看到真正的异常。

这里的问题是公共池实现在 finally 子句期间抛出了“已经关闭”的异常，并隐藏了真正的异常。在解决 JTDS 驱动程序的问题时，我遇到了同样的问题。我相信最直接的解决方法是在 finally 块中的 connection.close 周围添加一个 try/catch。由于 iBatis 2.3.x 流基本上已经死了，除了尝试其他池实现之外，我没有很好的解决方案来解决这个问题。

# mysql - PostgreSQL 中的 sec_to_time() 函数？

> ID：12085307
> 
> 赞同：1
> 
> 时间：2012-08-23T05:34:05.050
> 
> 标签：mysql, database, postgresql, postgresql-9.1, postgresql-9.0

MySQL 有一个很酷的函数[`sec_to_time()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_sec-to-time)，可以将你的秒数转换为 hh:mm:ss

我已经阅读了邮件列表，基本上是在尝试实现以下内容：

```
MySQL:
select sec_to_time(sum(unix_timestamp(enddate) - unix_timestamp(startdate))) from foo;

PostgreSQL:
select XXX(sum(date_part('epoch',enddate) - date_part('epoch',startdate))) from foo; 
```

我只需要知道 XXX 是/可以是什么。我已经尝试了很多记录功能的组合。

请让如何在 PostgreSQL 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:23:59.303

使用[`to_char`](http://www.postgresql.org/docs/9.1/static/functions-formatting.html)：

```
regress=# SELECT to_char( (9999999 ||' seconds')::interval, 'HH24:MM:SS' );
  to_char   
------------
 2777:00:39
(1 row) 
```

这是一个产生`text`格式化值的函数：

```
CREATE OR REPLACE FUNCTION sec_to_time(bigint) RETURNS text AS $$
SELECT to_char( ($1|| ' seconds')::interval, 'HH24:MI:SS');
$$ LANGUAGE 'SQL' IMMUTABLE; 
```

例如：

```
regress=# SELECT sec_to_time(9999999);
 sec_to_time 
-------------
 2777:00:39
(1 row) 
```

如果您更喜欢`INTERVAL`结果，请使用：

```
CREATE OR REPLACE FUNCTION sec_to_time(bigint) RETURNS interval AS $$
SELECT justify_interval( ($1|| ' seconds')::interval);
$$ LANGUAGE 'SQL' IMMUTABLE; 
```

...这将产生如下结果：

```
SELECT sec_to_time(9999999);
       sec_to_time       
-------------------------
 3 mons 25 days 17:46:39
(1 row) 
```

但是不要`INTERVAL`投到`TIME`；它会丢弃天数部分。用于`to_char(theinterval, 'HH24:MI:SS)`将其转换为`text`不截断。

# textures - Cocos2d-x 反复替换Texture

> ID：12085308
> 
> 赞同：1
> 
> 时间：2012-08-23T05:34:07.890
> 
> 标签：textures, cocos2d-x

在 Cocos2d-x 中，我想反复交换精灵的纹理。

我的交换功能如下...

```
void GameScene::swapSpriteTexture(CCSprite *a, CCTexture2D *b)
{
    CCTexture2D *tmp = a->getTexture();
    a->setTexture(b);
    b = tmp;
} 
```

我把这个函数称为这样的，

```
this->swapSpriteTexture(aSprite, m_TextureSlot); 
```

当我第一次调用交换函数时，它运行良好。
精灵的纹理变化很好。
但是当我再次调用该函数时，它不会改变。

m_TextureSlot 是

```
m_TextureSlot=(CCTexture2D *)CCTextureCache::sharedTextureCache()->addImage("smile.png"); 
```

这是缓存问题吗？任何想法请...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:00:29.370

我的错...

我改变这样的功能，

```
void GameScene::swapSpriteTexture(CCSprite *a, CCTexture2D **b)
{
    CCTexture2D *tmp = a->getTexture();
    a->setTexture(*b);
    *b = tmp;
} 
```

我调用了交换函数。

```
this->swapSpriteTexture(aSprite, &m_TextureSlot); 
```

然后，它的效果非常好。:)

# java - 闹钟管理器或闹钟

> ID：12085312
> 
> 赞同：1
> 
> 时间：2012-08-23T05:34:21.913
> 
> 标签：java, android, alarmmanager

我想编写一个有两个独立的重复警报的应用程序。似乎有两个类可以做到这一点：`AlarmManager`和`AlarmClock`. 我已经测试过`AlarmManager`，但是当 Android 重新启动时，所有警报都会被清除。

我应该使用哪个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:40:55.020

使用 BroadcastReceiver 处理 Android 操作系统启动广播并重新安排您的警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:47:27.667

[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)服务允许您安排您的应用程序在未来某个时间点运行。当警报响起时，系统会广播已为其注册的 Intent，如果目标应用程序尚未运行，则会自动启动它。

您可能会发现 SO 帖子很有帮助[Android AlarmManager](https://stackoverflow.com/a/1082836/432903)

```
AlarmManager mgr=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE); 
Intent i=new Intent(context, OnAlarmReceiver.class); 
PendingIntent pi=PendingIntent.getBroadcast(context, 0, i, 0);
mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(), PERIOD, pi); 
```

而[AlarmClock](http://developer.android.com/reference/android/provider/AlarmClock.html)提供程序包含一个 Intent 操作和附加功能，可用于启动 Activity 以在闹钟应用程序中设置新闹钟。

# java - 将 JFace TableViewer 添加到 SWT 表

> ID：12085318
> 
> 赞同：0
> 
> 时间：2012-08-23T05:34:49.393
> 
> 标签：java, swt, jface, tableviewer

在一个工具中，我正在研究，我有一个表，我添加如下：

```
public void addTable() {

    table = new Table(this, SWT.BORDER | SWT.MULTI | SWT.FULL_SELECTION);

    griddata = new GridData(GridData.FILL_BOTH);
    griddata.horizontalSpan = 2;

    table.setLayoutData(griddata);
    table.setHeaderVisible(true);

    final TableColumn tc1 = new TableColumn(table, SWT.LEFT);
    final TableColumn tc2 = new TableColumn(table, SWT.CENTER);
    final TableColumn tc3 = new TableColumn(table, SWT.CENTER);

    tc1.setText("ID");
    tc2.setText("Firstname");
    tc3.setText("Lastname");

    tc1.setWidth(30);
    tc2.setWidth(100);
    tc3.setWidth(100);

    final TableItem item1 = new TableItem(table, SWT.NONE);
    item1.setText(new String[] { "ABC", "Hatton", "Kentucky" });
    final TableItem item2 = new TableItem(table, SWT.NONE);
    item2.setText(new String[] { "DEF", "Warner", "Ohio" });
} 
```

效果很好，但是现在，我想添加一个 JFace 表格查看器，但是关于它的文档似乎只涉及 TableLayouts，而不涉及表格。我想，TableViewer 会被添加到桌子上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:48:14.450

期间想通了。这只是第一行的变化，如下所示：

```
 TableViewer viewer = new TableViewer(this, SWT.BORDER | SWT.MULTI | SWT.FULL_SELECTION); 
    table = viewer.getTable(); 
```

这样，您可以像以前一样收缩桌子。

# javascript - 循环遍历 js 数组并暂停

> ID：12085320
> 
> 赞同：0
> 
> 时间：2012-08-23T05:34:54.890
> 
> 标签：javascript, jquery, foreach

我想在点击时连续循环一个数组。如果您可以在班级切换之间延迟工作，则可以提供额外的道具:-)

我做到了这一点：

```
// Define word
var text = "textthing";

// Define canvas
var canvas = 'section';

// Split word into parts
text.split();

// Loop over text
$(canvas).click(function() {

    $.each(text, function(key, val) {
        $(canvas).removeAttr('class').addClass(val);
    });

}); 
```

这一点也不远:-)

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:49:54.173

以下将等到您单击 var 中的选定元素`el`。在此示例中，将选择文档中的`var el = $('section')`所有元素。`<section>...</section>`

然后它将开始循环遍历 中的值`cssClassNames`，依次使用每个值作为选定元素上的 css 类名称。`delayInMillis`在每个班级更改之间将使用延迟。

```
var cssClassNames = ['c1', 'c2', 'c3'];
var el = $('section');
var delayInMillis = 1000;

// Loop over text
el.click(function() {
  var i = 0;
  function f() {
    if( i >= cssClassNames.length ) {
      i = 0;
    }
    var currentClass = cssClassNames[i];
    i += 1;

    el.removeClass().addClass(currentClass);
    setTimeout(f, delayInMillis);
  }
  f();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:47:56.823

“连续循环遍历一个数组”这听起来像是一个无限循环，我不认为你想要那样。关于暂停循环，这个是可以的，可以用[这个](https://stackoverflow.com/questions/4288759/asynchronous-for-cycle-in-javascript/11195609#11195609)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:38:52.593

我相信您希望在删除类和添加类之间延迟 X 毫秒。我不确定您是否必须将这些行标记为 // ？甚至他们做这项工作，但你必须拥有的是一种将价值纳入函数的方法。此外，setTimeout anon 函数可能实际上不需要参数，但它应该给你一个想法。

```
$(canvas).click(function() {

    $.each(text, function(key, val) {
        $(canvas).removeAttr('class')
        var $canvas = $(canvas) //?
        var class_val = val  //?
        setTimeout(function ($canvas, class_val) {
            $canvas.addClass(class_val);
        }, 2000);

   });

}); 
```

编辑：我会这样做 function modify_element($element, class_name){ $element.removeClass('class'); setTimeout(function ($element) { $element.addClass(class_name); }, 1000); // 删除类后 1 秒添加 }

```
$(canvas).click(function() {

    $.each(text, function(key, val) {
        setTimeout(modify_element($(canvas), val),2000);
        //this will loop over the elements with 2 seconds between elements
    });

}); 
```

# iphone - 为什么我的 iPhone 应用程序无法调用委托方法

> ID：12085323
> 
> 赞同：1
> 
> 时间：2012-08-23T05:35:22.690
> 
> 标签：iphone, ios, navigationbar, titleview

我正在开发 iPhone 应用程序。我自定义了导航栏的标题视图。标题视图包含一个按钮，我还定义了委托方法来支持按钮单击事件。但是当点击按钮时，委托不能被执行。我不知道为什么？下面是我的代码：UPDelegate.h

```
@protocol UPDelegate <NSObject>
@optional
-(void)buttonClick;
@end 
```

标题视图.h

```
#import <UIKit/UIKit.h>
#import "UPDelegate.h"
@interface TitleView :UIView
@property (nonatomic, unsafe_unretained) id<UPDelegate> delegate;
-(id)initWithCustomTitleView;
@end 
```

标题视图.m

```
@synthesize delegate;
-(id)initWithCustomTitleView
{
    self = [super init];
    if (self) {
        UIButton *titleButton = [UIButton buttonWithType:UIBUttonTypeCustom];
        titleButton.frame = CGRectMake(0, 0, 20, 44);
        [titleButton setTitle:@"ABC" forState:UIControlStateNormal];

        // add action
        [titleButton addTarget:delegate action:@selector(buttonClick) forControlEvents:UIControlEventTouchUpInside];
        [self addSubview:titleButton];
    }
    return self;
} 
```

在我的 ViewController 中，我实现了如下协议：

MyViewController.h

```
@interface MyViewController : UIViewController<UPDelegate> 
```

在 .m 文件中，我编写了委托方法，但无法执行。我的视图控制器.m

```
-(void)buttonClick{
    NSLog("click title button");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:47:57.213

您必须从您在班级`delegate`中创建的代码示例中设置您的 , 。`id<UPDelegate> delegate;``titleView`

因此，在`MyViewController`您添加的地方`<UPDelegate>`，创建一个实例`TitleView`并将委托设置为 self.

所以在你的`MyViewController`使用中：

```
 TitleView*titleView=[[TitleView alloc]init];
 titleView.delegate=self; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:44:16.717

听起来您还没有设置 titleView 的委托属性的值，因此发送到委托属性的任何消息都将被忽略，因为委托为零。

您应该确保将 titleView 的委托设置为您的 MyViewController。执行此操作的最佳位置很可能在 MyViewController 的`viewDidLoad:`方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:46:29.367

您是否将委托设置在任何地方？因为您必须将 TitleView 的委托设置为 MyViewController：

```
titleView.delegate = self; 
```

# string - MS SQL - 如何从大字符串中获取以逗号/分号分隔的电子邮件地址列表

> ID：12085326
> 
> 赞同：2
> 
> 时间：2012-08-23T05:35:30.153
> 
> 标签：string, sql-server-2008, email, search, substring

如何提取字符串中所有可用电子邮件地址的列表，作为逗号/分号分隔的列表

```
SELECT dbo.getEmailAddresses('this is misc andrew@g.com')

--output andrew@g.com

SELECT dbo.getEmailAddresses('this is misc andrew@g.com and a medium text returning %John@acme.com')
--output andrew@g.com; John@acme.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:30:54.197

这是一个UDF。`SET @MailTempl='[A-Za-z0-9_.-]`如果您需要其他信息（例如电子邮件地址中的非英文符号），请更正此行。[这是允许的字符的完整列表](http://en.wikipedia.org/wiki/Email_address)

```
CREATE FUNCTION [dbo].[getEmailAddresses] (@Str varchar(8000))  
RETURNS varchar(8000) AS  
BEGIN 

declare @i int, @StartPos int,@AtPos int,@EndPos int;
declare @MailList varchar(8000);
declare @MailTempl varchar(100);

SET @MailList=NULL;
SET @MailTempl='[A-Za-z0-9_.-]'; --allowing symbols in e-mail not including @

SET @AtPos=PATINDEX('%'+@MailTempl+'@'+@MailTempl+'%',@Str)+1;
While @AtPos>1
begin
  --go left
  SET @i=@AtPos-1;
  while (substring(@Str,@i,1) like @MailTempl) SET @i=@i-1;
  SET @StartPos=@i+1;

  --go right
  SET @i=@AtPos+1;
  while (substring(@Str,@i,1) like @MailTempl) SET @i=@i+1;
  SET @EndPos=@i-1;

  SET @MailList=isnull(@MailList+';','')+Substring(@Str,@StartPos,@EndPos-@StartPos+1);

  --prepare for the next round
  SET @Str=substring(@Str,@EndPos+1,LEn(@Str));
  SET @AtPos=PATINDEX('%'+@MailTempl+'@'+@MailTempl+'%',@Str)+1;

end;

RETURN @MailList;

END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:22:27.920

尝试这个：

```
create function getEmailAddresses
(
@test varchar(max)
)
returns varchar(max)
As
BEGIN
declare @emaillist varchar(max)
--SET @test=' this is it by it a@b.com dsdkjl dsaldkj a@b.com dasdlk c@bn.com dsafhjkf anand@p.com d fdajf s@s.com .'

;WITH CTE as(
select reverse(left(reverse(left(@test,CHARINDEX('.com',@test)+3)),charindex(' ',reverse(left(@test,CHARINDEX('.com',@test)+3))))) as emailids,
right(@test,len(@test)-(CHARINDEX('.com',@test)+3)) rem
union all
select CASE WHEN len(rem)>2 then reverse(left(reverse(left(rem,CHARINDEX('.com',rem)+3)),charindex(' ',reverse(left(rem,CHARINDEX('.com',rem)+3))))) else 'a' end as emailids ,
CASE WHEN len(rem) > 2 then right(rem,len(rem)-(CHARINDEX('.com',rem)+3)) else 'a' end rem
from CTE where LEN(rem)>2
)
select @emaillist =STUFF((select ','+emailids  from CTE for XML PATH('')),1,1,'')
return @emaillist
END

select dbo.getEmailAddresses('this is it by it a@b.com dsdkjl dsaldkj a@b.com dasdlk c@bn.com dsafhjkf anand@p.com d fdajf s@s.com .') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T09:06:15.623

尝试这个

```
Declare @str varchar(max) = 'this is misc andrew@g.com and a medium text returning John@acme.com'

    ;With Cte AS(
    SELECT
        Items = Split.a.value('.', 'VARCHAR(100)')
    FROM
            (
                SELECT 
                    CAST('<X>' + REPLACE(@str,  ' '  , '</X><X>') + '</X>' AS XML) AS Splitdata  

            ) X  

        CROSS APPLY Splitdata.nodes('/X') Split(a) )

SELECT Email = STUFF((
                SELECT ';'+ Items
                FROM Cte
                Where Items
                LIKE '[A-Z0-9]%[@][A-Z]%[.][A-Z]%'
                FOR XML PATH('')),1,1,'') 
```

*结果*

**电子邮件地址**

```
andrew@g.com;John@acme.com 
```

NB~你可能需要做以下

a）根据您的要求，您需要制作一个 TVF（表值函数）。[您可以参考使用 Set base 方法在 Sql Server 中拆分函数](http://www.dotnetfunda.com/codes/code1797-split-function-in-sql-server-using-set-base-approach.aspx)的文章

b) Email validation like 子句可以使用，但对于更复杂的要求，您可能需要对其进行增强。

c) 如果需要，您可能必须在应用过滤子句之前清理数据。例如 %John@acme.com 是无效的电子邮件。因此请删除“%”符号，然后应用过滤子句。

但是正如有人提到的那样，最好不要在 Sql Server 端进行太多的字符串拆分/操作，我同意他的观点，所以这里有一个 C# 代码来实现相同的

```
static void Main(string[] args)
        {
            string str = "this is misc andrew@g.com and a medium text returning John@acme.com";

            var result = GetValidEmails(str).Aggregate((a,b)=>a+";" + b);
            Console.WriteLine(result);
            Console.ReadKey();
        }

        private static List<string> GetValidEmails(string input)
        {
            List<string> lstValidEmails = new List<string>();
            string regexPattern = @"^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$";
            foreach (string email in input.Split(' '))
            {
                if (new Regex(regexPattern, RegexOptions.IgnoreCase).IsMatch(email))
                {
                    lstValidEmails.Add(email);
                }
            }
            return lstValidEmails;
        } 
```

希望这会有所帮助。

# objective-c - 移除 xml webservice 中的 HTML 标签

> ID：12085329
> 
> 赞同：0
> 
> 时间：2012-08-23T05:35:53.413
> 
> 标签：objective-c, xml

我在给定的xml webservice中的这个&标签有问题，

```
 <description>I am trying to find in a timely manner: 1) 2 ea. fast unload solenoid 
    valves/Coils 2) 2 ea. Load Solenoid Valves &amp; Coils 3) 2 ea. Unload Normal
     Solenoid Valves/Coils for the following: Model # SSCA075AN Serial #0277468</description> 
```

在使用 nsxmlparser 解析上面的 xml 之后，我得到它如下所示：

```
 I am trying to find in a timely manner: 1) 2 ea. fast unload solenoid valves/Coils   2) 2 ea. Load Solenoid Valves 
      &
      amp; Coils 3) 2 ea. Unload Normal Solenoid Valves/Coils for the following: Model # SSCA075AN Serial # 0277468 
```

我必须以组合字符串的形式显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:49:20.343

使用以下方法删除 html 标签：

```
- (NSString *)removeHTMLTags:(NSString *)str
{
   NSMutableString *htmlStr = [NSMutableString stringWithCapacity:[str length]];

   NSScanner *scanner = [NSScanner scannerWithString:str];
   NSString *tempText = nil;

   while (![scanner isAtEnd])
   {
    [scanner scanUpToString:@"<" intoString:&tempText];

    if (tempText != nil)
        [htmlStr appendString:tempText];

    [scanner scanUpToString:@">" intoString:NULL];

    if (![scanner isAtEnd])
        [scanner setScanLocation:[scanner scanLocation] + 1];

    tempText = nil;
  }
  return htmlStr;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T13:11:31.780

```
-(NSString *) stringByStrippingHTML :(NSString*)targetStr
{
   NSRange r;
   NSString *finalStr = [targetStr copy];
   while ((r = [finalStr rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound) {
      finalStr = [finalStr stringByReplacingCharactersInRange:r withString:@""];
   }
   return finalStr;
} 
```

参考这里 m.kocikowski 的回答 [Remove HTML Tags from an NSString on the iPhone](https://stackoverflow.com/questions/277055/remove-html-tags-from-an-nsstring-on-the-iphone)

# javascript - jQuery else if 语句

> ID：12085336
> 
> 赞同：1
> 
> 时间：2012-08-23T05:37:16.743
> 
> 标签：javascript, jquery, if-statement

我想出了一些来自外部页面的 jquery，并在另一个页面上显示隐藏的 div (#section2)。问题是我似乎无法让#section3 与#section2 一样工作。这是代码。

```
jQuery(document).ready(function() {
    var hash = window.location.hash.substring(0);
    jQuery(hash).css({
        "display": "block"
    });
    if (hash != '#section2') {
        jQuery('#section1').css({
            "display": "block"
        });
    }
    else {
        jQuery('#section1').css({
            "display": "none"
        });
    }
});​ 
```

`if(hash != '#section3'){ jQuery('#section1').css({"display":"block"}); }` 如果我似乎只能让 #section2 或 #section3 在输入带有哈希的各自 url 时隐藏 section1 出现，我尝试了其他 方法。我似乎无法让它们同时正常运行。基本上我需要一些会产生的东西 `if(hash != '#section2' or '#section3')`。我正在学习，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:42:56.863

```
jQuery(document).ready(function() {
    var hash = window.location.hash.substring(0);
    jQuery(hash).css({
        "display": "block"
    });
    if (hash != '#section2' && hash != '#section3') {
        jQuery('#section1').css({
            "display": "block"
        });
    }
    else {
        jQuery('#section1').css({
            "display": "none"
        });
    }
});​ 
```

另外，请考虑使用 jQuery[`.show()`](http://api.jquery.com/show)来[`.hide()`](http://api.jquery.com/hide)代替那些 css 更改（效果相同，但不那么冗长，并且它会记住以前的状态）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:44:42.747

尝试;

```
$(document).ready(function(){
  var sectionhash = window.location.hash.substring(0);
  $(hash).css({"display":"block"});
  if(hash != '#section2' || hash != '#section3'){
    $('#section1').css({"display":"block"});
  }else {
    $('#section1').css({"display":"none"});
  }
}); 
```

或者

```
$(document).ready(function(){
  var sectionhash = window.location.hash.substring(0);
  $(hash).css({"display":"block"});
  if(hash != '#section2'){
    $('#section1').css({"display":"block"});
  }else if(hash != '#section3'){
    $('#section1').css({"display":"block"});
  }else {
    $('#section1').css({"display":"none"});
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:50:45.483

```
(function($) {
    var hash = window.location.hash;
    $(hash).css('display', 'block');
    $("#section1").toggle(!(hash=='#section2'||hash=='#section3'));
})(jQuery);​ 
```

# c# - 使用 itextsharp 在 PDF GridView 中应用样式

> ID：12085337
> 
> 赞同：0
> 
> 时间：2012-08-23T05:37:18.607
> 
> 标签：c#, asp.net, .net, pdf-generation, itextsharp

我正在尝试在我的网页中使用**itextsharp**将包含标签和 GridView 等数据的面板打印到 PDF 。但如果我无法将样式应用于 GridView。

你能帮助我吗？？

我同时使用 css 和 html 样式来设置 GridView 的样式。

```
Response.ContentType = "application/pdf";
Response.AddHeader("content-disposition", "inline;filename=" + filename + ".pdf");
Response.Cache.SetCacheability(HttpCacheability.NoCache);
StringWriter sw = new StringWriter();
HtmlTextWriter hw = new HtmlTextWriter(sw);
pnl_print.RenderControl(hw);

StringReader sr = new StringReader(sw.ToString());
Document pdfDoc = new Document(PageSize.A4, 10f, 10f, 100f, 0f);
HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
pdfDoc.Open();
htmlparser.Parse(sr);
pdfDoc.Close();
Response.Write(pdfDoc);
Response.End();

sr.Close();
hw.Close();
sw.Close(); 
```

如何在 Panel 中向 Gridview 添加样式？

面板 ID 为 pnl_print

GridView ID 为 gv1

你能帮我吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:47:41.177

我不确定是否可以使用 itextsharp 向 pdf 添加外部 css，但是您始终可以使用类似的东西创建一个带有 itextsharp 提供的函数的 css，重写 itextsharp css 类中的样式。

```
StyleSheet styles = new StyleSheet();
styles.LoadTagStyle("p", "size", "10pt");
styles.LoadTagStyle("p", "color", "#0000ff"); 
```

# php - 如何强制换行？

> ID：12085338
> 
> 赞同：3
> 
> 时间：2012-08-23T05:37:23.420
> 
> 标签：php, html, text

有时我页面上的文字看起来很奇怪，真实的例子：

```
trained&nbsp;professionals&nbsp;and&nbsp;paraprofessionals&nbsp;coming together 
```

...虽然父 div 很窄，所以文本只是伸出它。

它看起来很奇怪，因为`&nbsp;`实际上代表了一个空间。

所以，我想知道是否可以让浏览器将这些字符视为实际空格并在必要时换行而不实际替换它们？

**编辑**

为什么盲目更换是个问题？

因为`&nbsp;`有时可能需要。

考虑以下示例：

```
Ranks:<br>
&nbsp;Marshall<br>
&nbsp;&nbsp;Leutenant<br>
&nbsp;&nbsp;&nbsp;Sergeant 
```

如果我只是`preg_replace`在它们上使用 a ，它最终看起来会有所不同。

（如果您对巧妙地替换它们有任何想法（对于 php 平台）如果您能想到一些不会影响格式的算法，我也会考虑一些建议。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T05:40:00.767

[根据定义](http://en.wikipedia.org/wiki/Non-breaking_space)，`&nbsp;`是一个不可破坏的空间。它的含义是不要跨越行尾。如果这不是您想要的，那么我建议修复 HTML，而不是试图强制浏览器进入非标准行为。

# java - 使用 Ajax 响应更新文本框

> ID：12085343
> 
> 赞同：0
> 
> 时间：2012-08-23T05:37:51.197
> 
> 标签：java, javascript, ajax, jsp

我只想用 ajax 调用的响应来更新文本框。我得到了响应，并使用它分配给了文本框

```
document.getElementById("testPad").value = xmlHttpRequest.responseText; 
```

它使用恰好是整个 HTML 页面的整个响应文本进行更新。

在服务器操作上，我发送响应如下：

```
response.setContentType("text/plain");
response.getWriter().write(output); 
```

虽然这听起来微不足道，但我正面临着一个地狱般的时间，请大家帮忙。TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:57:28.293

尝试刷新/关闭流。

```
response.setContentType("text/plain");
response.getWriter().write(output);
response.getWriter().close(); 
```

我建议[jQuery.ajax()](http://jquery.com/download/)。下载 jQuery.js 或只使用 CDN url。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">
    $(function () {
        $("#btnSubmit").click(function () {
            $.ajax({
                url: "serverAction",
                success: function (data) {
                    $("#resultText").val(data);
                },
                error: function (xhr, status, errorDesc) {
                    alert(errorDesc);
                }
            });
        });
    });
</script>

<div>
  <input type="text" id="resultText" />
  <input type="button" id="btnSubmit" value="Show" />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:59:06.277

假设您有一个文本框和一个按钮单击按钮，您必须更新您的文本框

```
 <input id="txtClicked" type="text" runat="server" />
 <input id="buttClicked" type="button" runat="server" />

  $("#buttClicked").click(function(){
  $.ajax({
  type: "POST",
  url: "Dashboard.aspx/GetTreeNodesByText", // that's your server side page and the function
  data: "{}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function (data) {
  $("#txtClicked").val(data.d); //data.d is the response from the server
  }
  });
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:06:50.253

您需要将 responseText 字符串解析为 HTML DOM，您可以从中轻松检索所需的信息。

这个链接应该让你开始：

[https://developer.mozilla.org/en-US/docs/Code_snippets/HTML_to_DOM?redirectlocale=en-US&redirectslug=Code_snippets%3AHTML_to_DOM](https://developer.mozilla.org/en-US/docs/Code_snippets/HTML_to_DOM?redirectlocale=en-US&redirectslug=Code_snippets%3aHTML_to_DOM)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T04:21:08.690

我通过设置 header 属性让它工作

```
response.setHeader("Cache-Control", "no-cache"); 
```

这是一个反复试验，仍然不知道它起作用的确切原因。

感谢您的所有投入。

# visual-studio-2010 - 是否可以使用 VS2010 类图以图形方式创建接口和类？

> ID：12085346
> 
> 赞同：0
> 
> 时间：2012-08-23T05:38:26.967
> 
> 标签：visual-studio-2010

VS2010的类图很能说明问题。我可以以图形方式向它添加类或接口。并且代码是自动生成的。但是如何让一个类以**图形方式**从一个界面派生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:49:59.360

从工具箱中选择继承，单击类，然后拖动到要派生的接口。 ![在此处输入图像描述](../Images/a4dd8865eafedd2edd241b2446f2aa2e.png)

# c# - 获取任务的方法名

> ID：12085347
> 
> 赞同：4
> 
> 时间：2012-08-23T05:38:28.227
> 
> 标签：c#, task, task-parallel-library

我希望从 C# 中的任务中获取方法/操作名称。具体来说，我正在实现一个自定义任务调度程序，并希望生成有关任务运行持续时间的统计信息，然后我将通过任务内部运行的方法对其进行汇总。在 Visual Studio 调试器中，您可以访问它并查看 m_action 私有变量，以及调试器显示注释，将其显示为 Method={0}。有没有办法从任务本身访问这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T06:22:59.183

您可以从 Task 继承以使这变得非常容易......我将在这里实现第一个构造函数作为示例：

```
public class NamedTask : Task {
    public string MethodName { get; set; }
    public NamedTask(Action action) : base(action) {
        MethodName = action.Method.Name;
    }
    public NamedTask(Action action, CancellationToken cancellationToken) : base(action, cancellationToken) {}
    public NamedTask(Action action, TaskCreationOptions creationOptions) : base(action, creationOptions) {}
    public NamedTask(Action action, CancellationToken cancellationToken, TaskCreationOptions creationOptions) : base(action, cancellationToken, creationOptions) {}
    public NamedTask(Action<object> action, object state) : base(action, state) {}
    public NamedTask(Action<object> action, object state, CancellationToken cancellationToken) : base(action, state, cancellationToken) {}
    public NamedTask(Action<object> action, object state, TaskCreationOptions creationOptions) : base(action, state, creationOptions) {}
    public NamedTask(Action<object> action, object state, CancellationToken cancellationToken, TaskCreationOptions creationOptions) : base(action, state, cancellationToken, creationOptions) {}
} 
```

在那之后...

```
NamedTask task = new NamedTask(() => AsyncMethod(arg1, arg2, argN));
string methodName = task.MethodName; // there's the name! 
```

更多示例。继承自`Task<T>`：

```
public class NamedTask<T> : Task<T> {
    public string MethodName { get; set; }
    public NamedTask(Func<T> function) : base(function) {
        MethodName = function.Method.Name;
    }
    public NamedTask(Func<T> function, string methodName) : base(function) {
        MethodName = methodName;
    }
    ...
} 
```

处理匿名方法：

```
NamedTask<bool> task2 = new NamedTask<bool>(() => {
                // some arbitrary code
                return true;
    });

NamedTask<bool> task3 = new NamedTask<bool>(() => {
                // some arbitrary code
                return true;
    }, "ReturnTrueMethod");

string methodName2 = task2.MethodName; // returns "<LongRunning_Async>b__19"
string methodName3 = task3.MethodName; // returns "ReturnTrueMethod" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T19:25:46.740

好吧，给定一个变量，您可以使用反射来获取私有`m_action`字段：`Task``task`

```
 var fieldInfo = typeof(Task).GetField("m_action", BindingFlags.Instance | BindingFlags.NonPublic);
    Delegate action = fieldInfo.GetValue(task) as Delegate; 
```

然后获取`Name`方法和`DeclaringType`：

```
 var name = action.Method.Name;
    var type = action.Method.DeclaringType.FullName; 
```

要获得完全限定的方法 ( `type + "." + name`)...

但是，一旦任务执行完成，`m_action`就是`null`. 我不确定这将如何适用于 TaskFactory.StartNew ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:01:35.043

1.  尝试反射以获取 m_action 变量。
2.  尝试从`Envorinment.StackTrace`任务内部获取信息或直接调用它的方法。

# java - 为什么连接字符会打印数字？

> ID：12085351
> 
> 赞同：7
> 
> 时间：2012-08-23T05:38:40.190
> 
> 标签：java

我有以下课程：

```
 public class Go {
     public static void main(String args[]) {
      System.out.println("G" + "o");
      System.out.println('G' + 'o');
     }
   } 
```

这是编译结果；

```
 Go
  182 
```

为什么我的输出包含一个数字？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T05:41:33.507

在第二种情况下，它将两个字符（G - 71 和 o - 111）的[unicode代码相加并打印总和。](http://www.utf8-chartable.de/)这是因为`char`被认为是数字类型，所以`+`在这种情况下，运算符是通常的求和。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T05:41:34.590

`+`带有字符常量的运算符`'G' + 'o'`打印 charCode 的加法和带有will 打印的[字符串连接运算符](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)。`"G" + "o"``Go`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T05:42:49.133

Java 中的加号将两个数字相加，除非其中一个和数是字符串，在这种情况下，它会进行字符串连接。

在第二种情况下，您没有字符串（您有`char`，并且将添加它们的Unicode代码点）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T05:41:46.760

```
System.out.println("G" + "o");
  System.out.println('G' + 'o'); 
```

第一个 + 充当连接运算符并连接两个字符串。但在第二种情况下，它充当加法运算符并添加这两个字符的 ASCII（或者你可以说 UNICODE）值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T05:46:01.253

[这个](https://stackoverflow.com/questions/7931862/java-int-and-char)先前的SO问题应该对这个主题有所了解，在你的情况下，你基本上最终会添加它们的ASCII值（G的71）+（o的111）= 182，你可以在[这里](http://www.asciitable.com/)检查值）。

您必须使用 将该[`String.valueOf(char c)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#valueOf%28char%29)字符转换回字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T06:02:32.973

**+**总是用于`sum`（添加两个数字的目的），如果它是数字除外`String`，如果它`String`用于连接两个`String`.

**我们知道 java 中的 char 总是代表一个 numeric**。

这就是为什么在您的情况下，它实际上将两个数字的总和计算为`(71+111)=182`而不是字符的串联作为`g`+ `o`=`go`

如果您更改其中一个，`String`那么它将连接这两个，例如 它会按您的预期`System.out.println('G' + "o")` 打印。`Go`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-23T06:08:54.313

"+" 运算符是为`int`和定义的`String`：

```
int + int = int

String + String = String 
```

添加 char + char 时，最佳匹配将是：

```
(char->int) + (char->int) = int 
```

但`""+'a'+'b'`会给你`ab`：

```
( (String) + (char->String) ) + (char->String) = String 
```

# excel - AND() 和 OR() 的 Excel 惰性求值

> ID：12085352
> 
> 赞同：2
> 
> 时间：2012-08-23T05:38:45.533
> 
> 标签：excel, lazy-evaluation

Excel 似乎不对 AND() 和 OR() 函数使用惰性求值。例如：

```
=AND(A1<>0, B1/A1>.5) 
```

将产生 #DIV/0! 的值。一种替代方法是使用 if 语句：

```
=IF(A1<>0, B1/A1>.5, FALSE) 
```

但是，如果计划在 IF 函数（或可能的一些嵌套 IF）中使用 AND 函数，这将变得混乱。有没有更好（即更具可读性）的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:58:06.723

不要认为你可以做得比你所拥有的更好。这里有一些其他的选择：

```
=IF(A1,B1/A1>.5) 
=IFERROR(B1/A1>.5,FALSE)
=COUNT(N(A1<>0),N(B1/A1>.5))=2 
```

虽然更长，但最后一个可以扩展到更多的条件，并且很容易修改为 OR 通过更改`=2`为`>0`.

# c# - 如何在 OfType() 之后使用 Include()？

> ID：12085353
> 
> 赞同：7
> 
> 时间：2012-08-23T05:38:45.760
> 
> 标签：c#, .net, entity-framework, entity-framework-5

我正在尝试在实体框架模型中急切加载派生类的属性。

[我到处](https://stackoverflow.com/questions/5189268)读到我必须先用 OfType() 过滤集合，然后再用 Include() 包含[属性](https://stackoverflow.com/a/6263369) [：](https://stackoverflow.com/a/2083758)

```
var persons = Context.Persons
                     .OfType<Employee>()
                     .Include("Compensation") 
```

我不知道如何让 Include() 工作，因为在我的情况下，Persons 是一个 DbSet，OfType() 返回一个 IQueryable，而 IQueryable 没有定义 Include() 方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-23T05:52:08.787

放置这个：

```
using System.Data.Entity; 
```

进入您的使用列表，之后您将能够使用类中的`Include`扩展方法系列[`DbExtensions`](http://msdn.microsoft.com/en-us/library/system.data.entity.dbextensions%28v=vs.103%29.aspx)：

```
 public static IQueryable<T> Include<T, TProperty>(this IQueryable<T> source, Expression<Func<T, TProperty>> path) where T : class;
    public static IQueryable<T> Include<T>(this IQueryable<T> source, string path) where T : class;
    public static IQueryable Include(this IQueryable source, string path); 
```

他们接受 IQueryable 作为第一个参数，也有强类型的，那就更好了`Include(String)`。

# android - android中的单点触摸移动和缩放图像

> ID：12085355
> 
> 赞同：-1
> 
> 时间：2012-08-23T05:38:48.757
> 
> 标签：android, android-canvas

我正在开发一个带有绘图的应用程序，我面临的一个问题是我想要**单点触摸缩放图像**。我已经通过多点触控完成了图像缩放，但我非常坚持单点触控。

示例：-
我在画布上有一个矩形。现在我想用一根手指缩放和旋转一个角的矩形。我在谷歌上找到了这个，但没有得到完美的材料或演示等等。

请帮我找到这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:31:37.640

对于单点触摸缩放，这将帮助您

[http://developer.sonymobile.com/wp/2010/05/18/android-one-finger-zoom-tutorial-part-1/](http://developer.sonymobile.com/wp/2010/05/18/android-one-finger-zoom-tutorial-part-1/)

# c# - 当我尝试关闭响应时抛出 C# FTPWebReponse 异常

> ID：12085360
> 
> 赞同：2
> 
> 时间：2012-08-23T05:39:27.337
> 
> 标签：c#, ftpwebrequest

在包含该行的 finally 块中引发异常`response.Close();`

```
try
{
    response = (FtpWebResponse)request.GetResponse();
}
catch (System.Net.WebException webEx)
{
    FtpWebResponse ftpResponse = (FtpWebResponse)webEx.Response;

    if (ftpResponse.StatusCode == FtpStatusCode.ActionNotTakenFileUnavailable)
    {
        return false;
    }

    throw;
}
finally
{
    if (response != null)
    {
        response.Close();
    }
} 
```

这是堆栈跟踪：

```
 at System.Net.FtpWebRequest.SyncRequestCallback(Object obj)
   at System.Net.FtpWebRequest.RequestCallback(Object obj)
   at System.Net.CommandStream.Dispose(Boolean disposing)
   at System.IO.Stream.Close()
   at System.IO.Stream.Dispose()
   at System.Net.ConnectionPool.Destroy(PooledStream pooledStream)
   at System.Net.ConnectionPool.PutConnection(PooledStream pooledStream, Object owningObject, Int32 creationTimeout, Boolean canReuse)
   at System.Net.FtpWebRequest.FinishRequestStage(RequestStage stage)
   at System.Net.FtpWebRequest.SyncRequestCallback(Object obj)
   at System.Net.FtpWebRequest.RequestCallback(Object obj)
   at System.Net.CommandStream.Abort(Exception e)
   at System.Net.CommandStream.CheckContinuePipeline()
   at System.Net.FtpWebRequest.DataStreamClosed(CloseExState closeState)
   at System.Net.FtpDataStream.System.Net.ICloseEx.CloseEx(CloseExState closeState)
   at System.Net.FtpDataStream.Dispose(Boolean disposing)
   at System.IO.Stream.Close()
   at System.Net.FtpWebResponse.Close()
   at FVC.RequestForStock.Application.RequestForStockDataImportProvider.VerifyDirectoryExist(String serverAddress, String userName, SecureString password) in C:\CoName.RFS.Application\RFSDataImportProvider.cs:line 122 
```

最后调试检查器显示的内容

![在此处输入图像描述](../Images/26d763e1f75838712933b1c87118a77c.png)

（如果您无法辨认出文字，请放大图片，例如在 Firefox 中按住 ctrl 并向上滚动鼠标滚轮） 有人可以协助确定异常发生的原因以及如何防止异常发生。 **编辑：**使用 Microsoft.NET 框架的 v4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:57:57.090

我还会检查流是否仍然可读。

```
 finally
        {
            if (response != null && 
                 response.GetResponseStream()!=null && 
                 response.GetResponseStream().CanRead)
                {
                    response.Close();
                }
            } 
```

# asp.net-mvc - 优化包和 Umbraco 4

> ID：12085361
> 
> 赞同：2
> 
> 时间：2012-08-23T05:39:32.017
> 
> 标签：asp.net-mvc, umbraco

我最近设置了一个混合 Umbraco 4.8 webforms + mvc 应用程序（请参阅 aaron powell 的帖子：[http](http://www.aaron-powell.com/umbraco/using-mvc-in-umbraco-4) ://www.aaron-powell.com/umbraco/using-mvc-in-umbraco-4 ）

我的一切都很好。我什至配置了 ninject 并且我正在使用 MVC4 优化包。问题是当我尝试启用优化时，动态路由被 umbraco url 重写器拾取，我无法在发布配置中呈现 CSS 或 JS 文件。

这很好（因为它是静态路由）： `http://myserverUrl/Scripts/jQuery/jquery.js`

这不会：`http://myserverUrl/js/combined?v=J_D8qmUMMTWvtIuuef2sskA8d2JCiGB9kNZMq_nNKpw1`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T08:43:00.983

Umbraco 处理所有不是静态文件的请求，因此您需要配置 Umbraco 以跳过这些路径

在 web.config 中将“~/js”作为保留的 url，就像你对你所做的路由所做的那样。

```
<add key="umbracoReservedPaths" value="~/umbraco,~/install/,~/js" /> 
```

# ruby-on-rails-3 - 如何在后台作业 Rails 3.2 中添加特定任务？

> ID：12085370
> 
> 赞同：0
> 
> 时间：2012-08-23T05:40:12.583
> 
> 标签：ruby-on-rails-3, delayed-job

这是我的 Rails 控制器#action

```
Class ReportController < ApplicationController

  def monthly_report

   end

end 
```

我需要在后台作业中添加这个特定的操作（monthly_report）。我不知道如何使用delayed_job gem 做到这一点？

请帮助我摆脱困境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:15:14.830

有很多选择。

也许您可以在这里找到详细信息 => [Rails 的 cron 工作：最佳实践？](https://stackoverflow.com/questions/285717/a-cron-job-for-rails-best-practices)

也试试看`whenever`。[http://railscasts.com/episodes/164-cron-in-ruby](http://railscasts.com/episodes/164-cron-in-ruby)

# batch-file - 批量替代代码

> ID：12085377
> 
> 赞同：0
> 
> 时间：2012-08-23T05:40:58.637
> 
> 标签：batch-file

我想批量创建一个好的界面，而替代代码不能批量工作。有解决方法吗？

我想批量使用 alt 代码，但它只返回其他纯文本字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:43:02.613

转到控制台窗口的属性并设置 TrueType 字体，例如 Consolas 或 Lucida Console，而不是 Raster Fonts。

否则，您会被 OEM 字符集困住，它会将其中不存在的所有内容转换为最接近的等价物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-24T18:17:59.853

将其粘贴到 .cmd 或 .bat 文件中并运行它您会看到每个代码，它们将使用 alt-code

在 CMD / Batch 中，某些代码的翻译方式不同，因此您需要验证代码是否可以正常工作

```
echo off
:loop
cls
echo.  1 2 3 4 5 6 7 8 9 10
echo. 0 ? ? ? ? ? ? • ? ? ?
echo. 1 ? ? ? ? ¤ ? ? ? ? ¶
echo. 2 § ? ? ? ? ? ? ? ? ?
echo. 3 ?   ! " # $ %% & ' (
echo. 4 ) * + , - . / 0 1 2
echo. 5 3 4 5 6 7 8 9 : ; -
echo. 6 ^= ^> ? @ A B C D E F
echo. 7 G H I J K L M N O P
echo. 8 Q R S T U V W X Y Z
echo. 9 [ ? \ ] _ ` a b c d
echo 10 e f g h i j k l m n
echo 11 o p q r s t u v w x
echo 12 y z ^{ ^| ^} ~ ^¦ Ç ü é
echo 13 â ä à å ç ê ë è ï î
echo 14 ì Ä Å É æ Æ ô ö ò û
echo 15 ù ÿ Ö Ü ¢ £ ¥ P ƒ á
echo 16 í ó ú ñ Ñ ª º ¿ ¬ ¬
echo 17 ½ ¼ ¡ « » ¦ ¦ ¦ ¦ ¦
echo 18 ¦ ¦ + + ¦ ¦ + + + +
echo 19 + + - - + - + ¦ ¦ +
echo 20 + - - ¦ - + - - - +
echo 21 + + + + + + + + ¦ _
echo 22 ¦ ¦ ¯ a ß G p S s µ
echo 23 t F T O d 8 f e n =
echo 24 ± = = ( ) ÷ ˜ ° · ·
echo 25 v n ² ¦  
Pause >nul
goto :loop 
```

**这是结果的图片**

[![在此处输入图像描述](../Images/c4f6f62409eca26bcd9275a37e501a1f.png)](https://i.stack.imgur.com/Zz4sD.png)

# function - 什么是后处理和后挂钩？

> ID：12085380
> 
> 赞同：2
> 
> 时间：2012-08-23T05:41:18.323
> 
> 标签：function, hook, post-processing

我看到了一些处理这些问题的问题。[这里](https://stackoverflow.com/questions/12083085/lua-post-hooking-a-function)和[这里](https://stackoverflow.com/questions/11961442/post-hook-a-function-post-process-and-pass-through-all-returns)。什么是后处理和后挂钩？它们是用来做什么的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:48:35.403

处理 - 对数据进行一些操作。后处理只是意味着在执行了一些其他处理之后进行额外的处理。例如，面包店会将小麦加工成面包。然后，您将面包加工成三明治。

后挂钩 - 挂钩是一种表示您将一些代码插入处理序列或在处理序列中的某个点拦截执行的一种方式。post-hook 只是意味着您插入代码以在某个操作之后运行。预挂钩将在操作之前执行您的代码。例如，防病毒扫描程序会预先和后挂钩各种文件系统操作，在将坏内容写入磁盘之前缓存坏内容，并捕获诸如“下载完成”之类的事件，以便它可以开始扫描下载的文件。

# sql - 如何获取匹配的数据库记录

> ID：12085382
> 
> 赞同：1
> 
> 时间：2012-08-23T05:41:23.643
> 
> 标签：sql, database, logic

涉及3个数据库表。

**球员**

```
P1
P2
P3
P4
P5
..... 
```

**团队**

```
T1
T2
T3
T4
T5
.... 
```

**Player_Team**

```
T1     P1
T1     P2
T1     P3
T1     P4
T2     P1
T2     P2
T2     P3
...... 
```

考虑到 no 的多种组合。的玩家。此外，一名球员可以在多个球队

```
Ex. (P1 P2 P3 P4), (P1 P2 P3), (P1 P2), (P1 P3), (P2 P3) .. so on 
```

在我的应用程序中，我让一组球员作为一个团队参加特定比赛。鉴于这一套，我想找到他们所属的共同团队。即使他们在多个团队中，仅包含这组玩家的团队也将是唯一的。所以在上面的例子中，只有一个球队有球员 P1 P2 P3 和 P4。但是如果团队只有 3 个玩家 P1 P2 P3，那么我们就有不止一个共同的团队。因为，我们可能有组合 T1(P1 P2 P3 P4) T2(P1 P2 P3)。当然，我们不应该计算 T1，因为它有 P4，但是我们应该怎么做呢？

那么您能否提出一种方法（SQL 查询或程序逻辑）来轻松高效地完成此任务？是否有任何 sql 函数来获取通用团队名称（即 T2）？

任何帮助是极大的赞赏 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:53:47.723

您应该使用此查询，其中本示例中的 4 是集合 (P1,P2,P3,P4) 中的玩家计数。如果此团队中的所有玩家，那么对于此 TeamId 计数（玩家 ID）= 集合中所有玩家的计数：

```
select teamId 
from Player_Team 
where PlayerId in (P1_Id,P2_ID,P3_ID,P4_ID)
group by  teamId
having count(PlayerId) = 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T23:11:30.450

我正在尝试实现非常相似的东西，我认为上述解决方案的问题是，如果你有
T3 P1
T3 P2
T3 P3
T3 P5
它仍然会出现在结果集中。

# html - HTML 文件上传是如何工作的？

> ID：12085392
> 
> 赞同：3
> 
> 时间：2012-08-23T05:42:10.487
> 
> 标签：html, forms, file-upload

HTML 使用*表单*将数据发送到 Web 服务器。数据可以包含在 url 参数中或嵌入 HTML 请求正文中。但是对于一个文件，我不知道它是如何工作的。我想知道这一点，因为我发现在 Web 和桌面应用程序上上传文件之间存在一些差异。

桌面应用程序通常提供一个文本框以允许用户输入文件的区域设置路径。但是对于 Web 应用程序，文本框通常是只读的。当使用*浏览*按钮选择文件时，它会显示文件路径。这只是桌面和网络之间的设计问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T05:46:51.520

问题有点不清楚，但关于 Web 应用程序（或 HTML 表单）的一个重要方面是它们是沙盒化的，不能直接访问本地文件。所以文件上传选择器不允许直接输入文件名（可能是脚本），但只能通过操作系统（或浏览器）提供的文件选择 UI（应用程序或页面不能乱用）。

一旦用户选择了文件，页面就可以访问它，但它不能自己（或偷偷地）进行选择。

最近的趋势是以相同的方式锁定桌面应用程序。例如，请参阅 Apple 的沙盒限制，该限制也不允许应用在没有用户干预的情况下打开随机文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:47:02.237

> 这只是桌面和网络之间的设计问题吗？

文件上传表单的实现，无论是桌面还是网络，对于最终结果来说在很大程度上并不重要。桌面和 Web 控件都可以使用路径字符串或完整的文件导航器，尽管桌面应用程序的实现可能会有所不同。唯一的另一个区别是目的地：桌面应用程序倾向于解析内存中的文件并以某种方式呈现它，而 Web 应用程序几乎总是将其上传到服务器（尽管这可能会发生变化：参见[HTML5 文件 API](http://www.w3.org/TR/FileAPI/)），然后进一步对其进行操作。

# python - 使用 read_csv 将大文件转换为面板的问题到 python pandas

> ID：12085393
> 
> 赞同：0
> 
> 时间：2012-08-23T05:42:14.523
> 
> 标签：python, large-files, pandas

我一直在尝试`(~480MB, 5,250,000 records, stock price daily data -dt, o, h, l, c, v, val , adj, fv, sym, code - for about 4,500 instruments)`使用`read_csv`. 它运行良好，并创建了 DataFrame。但是，在转换为面板时，几只股票的值与原始 csv 文件中的值相差甚远。

然后我尝试在 中使用*chunksize*参数`read_csv`，并使用 for 循环：

```
reader = read_csv("bigfile.csv",index_col=[0,9],parse_dates=True,names=['n1','n2',...,'nn'], chunksize=100000)

new_df = DataFrame(reader.get_chunk(1))

for chunk in reader:
    new_df = concat(new_df, chunk) 
```

这会读入数据，但是：

1.  转换为面板时我得到相同的错误值（编辑:)
2.  它比普通的需要更长的时间`read_csv`（没有迭代器）

任何想法如何解决这个问题？

编辑：更改了问题以反映问题 - 数据框很好，转换为面板是问题。发现即使在拆分输入 csv 文件、合并然后转换为面板后仍出现错误。如果我维护一个多索引 DataFrame，则没有问题，并且值表示正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:16:54.667

DataFrame to Panel 代码中的一些错误已得到修复。请尝试使用最新的 pandas 版本（最好是即将推出的 0.10），如果您仍有问题，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:53:27.337

如果您知道一些特定的值是关闭的，您可能只需在 csv 文件中专门检查这些行。您还应该查看有关的[文档`csv`](http://docs.python.org/library/csv.html)，特别是在[方言](http://docs.python.org/library/csv.html#dialects-and-formatting-parameters)和[Sniffer 类](http://docs.python.org/library/csv.html#csv.Sniffer)方面。您可能能够找到一些设置来正确检测文件的分隔方式。

如果您发现当您只查看特定行时错误消失了，那可能意味着某处存在错误/缺失的换行符，导致事情出错。

最后，如果您似乎无法找到正确/错误行的模式，您可以尝试（随机或以其他方式）选择 csv 文件中的行子集，并查看是否由于文件大小而发生错误（我猜这不太可能，但我不确定）。

# android - 如何在android中开始制作像倾角仪这样的应用程序

> ID：12085396
> 
> 赞同：2
> 
> 时间：2012-08-23T05:42:17.730
> 
> 标签：android, accelerometer, tilt-sensor

我想根据用户旋转来获取和移动坐标上的针，或者像指南针一样移动设备，因为这个应用程序已经在做。你可以在这个链接上看到我想说的[https://play.google.com/ store/apps/details?id=com.plaincode.clinometer&hl=en](https://play.google.com/store/apps/details?id=com.plaincode.clinometer&hl=en)但现在我无法理解这种情况。我无法找到如何开始的提示..他们是否有任何 api 来获取并使其工作，或者需要在非常广泛的层面上实现加速度计才能完成它。如果您有任何关于此的代码或链接，请指导我..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T06:05:47.170

一年多前，我一直在寻找这个解决方案，为此我设法以类似的方式做到了这一点。我设法做的事情的来源是——[链接到来源](https://drive.google.com/file/d/0B6C9Pqrvc_CWZVNPdENvWm9nSXM/edit?usp=sharing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-31T12:05:08.813

您应该开始创建一个实现 SensorEventListener 的活动，包括以下两个方法：

```
public void onSensorChanged(SensorEvent event) {
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
        // add your code
        // event.values[] contains the 3 accelerometer values
    }
}

@Override
public void onAccuracyChanged(Sensor sensor, int i) {
    // add your code
} 
```

作为第二步，从在 Activity 中实现加速度计开始：

```
private SensorManager mSensorManager;
private Sensor mRotationSensor;
mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER); 
```

然后在上面注册一个传感器监听器（你可以在 onResume 中做）：

```
mSensorManager.registerListener(this, mRotationSensor, 16000);
// 16000 microseconds 
```

并取消注册（在 onPause 中）：

```
mSensorManager.unregisterListener(this); 
```

请注意，如果您想要非常准确地测量 3 维的角度和斜率，您应该执行板载加速度计的校准程序，通常需要对**增益**、**偏移**和**角度**进行少量补偿。

您可以在免费和开源的 BasicAirData Clinometer 上阅读 Accelerometers 的简单但完整的用法：[https ://github.com/BasicAirData/Clinometer](https://github.com/BasicAirData/Clinometer)

该应用程序还包括一个校准程序。

# android - 创建新的android项目时，出现错误“必须指定活动名称”

> ID：12085398
> 
> 赞同：4
> 
> 时间：2012-08-23T05:42:31.130
> 
> 标签：android, eclipse, eclipse-indigo

当我尝试在如下所示的步骤中创建新的 Android 应用程序项目时，出现错误“必须指定活动名称”。当我尝试创建新活动时也会发生同样的情况。我对分层父类有点困惑。它有什么用？为什么 Eclipse 不允许我在不指定的情况下创建活动？（它应该是可选的）如何在不指定 Hierarchical 父级的情况下创建 Activity？

非常感谢你。

![在此处输入图像描述](../Images/dce1846a44d48228ab48c6e68009e86b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T09:19:27.373

在 Eclipse 中转到 Window==>preferences=>Install/update 然后单击卸载或更新 =>单击 Installed Software 并更新您的 Android 开发工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:31:28.410

这是动作栏的特点。我认为当用户单击操作栏的后退按钮时会启动分层父活动。我在这里给出了启动器活动的名称，它工作正常......至于启动器活动，没有分层父级。:)

# glsl - 在 GLSL 中确定最小/最大向量的逻辑是什么？

> ID：12085403
> 
> 赞同：23
> 
> 时间：2012-08-23T05:42:55.437
> 
> 标签：glsl

我有点惊讶我还不知道这一点，但承认你还在学习从来没有什么坏处:)

根据他们的[文档](http://www.opengl.org/sdk/docs/manglsl/xhtml/min.xml)`min`，在 GLSL 中有一些功能： `max`

> 返回两个值中的较小者/较大者

但是，当值是向量时，如何确定呢？显然`(1, 1)`会小于`(2, 2)`，但是 和 的最小值或最大值是`(1, 3)`多少`(4, -2)`？该逻辑在哪里正式描述？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-23T05:47:58.803

引用[我能找到的第一个来源](http://www.opengl.org/registry/doc/GLSLangSpec.4.30.6.pdf)(PDF)，在第 8.3 节通用功能的顶部，第 132 页：

> 这些都是按组件操作的。描述是针对每个组件的。

几乎所有在向量上操作但实际上只对标量有意义的函数都以组件方式操作。（这包括`abs`, `sign`, `floor`, `trunc`, `round`, `roundEven`, `ceil`, `fract`, `mod`, `modf`, `min`, `max`, `clamp`, `mix`, `step`, `smoothstep`, 等等。）

因此，例如， 和 的`(1, 3)`最小值`(4, -2)`是`(1, -2)`。

# android - 从内部存储加载图像时 ListView 滚动缓慢

> ID：12085405
> 
> 赞同：1
> 
> 时间：2012-08-23T05:43:04.983
> 
> 标签：android, android-listview

我创建了一个自定义`ListView`，其中我将图像显示为列表项。我显示为列表项的图像存储在我`InternalStorage`的设备中，我注意到当项目数超过 7 时，列表视图滚动变慢，并且`ListView`滚动时出现混蛋。我的代码有什么问题，或者错过了我的代码中要做的事情。请帮我解决这个问题。

**显示列表视图项的代码**

```
public class ListViewAdapter extends BaseAdapter 
    {
        private Activity activity;
        private ArrayList<String> fileNameArray;
        private LayoutInflater inflater=null;
        public  ImageLoader imageLoader; 

        public ListViewAdapter(Activity a,  ArrayList<String> d) 
        {
            activity = a;
            fileNameArray = d;
            inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            imageLoader = new ImageLoader(activity.getApplicationContext());
        }

        public int getCount() 
        {
            return fileNameArray.size();
        }

        public Object getItem(int position) 
        {
            return position;
        }

        public long getItemId(int position) 
        {
            return position;
        }

        public class ViewHolder
        {
            ImageView image;
        }               

        public View getView(final int position, View convertView, ViewGroup parent) 
        {
            ViewHolder holder;

            if(convertView == null)
            {
                holder = new ViewHolder();
                convertView = inflater.inflate(R.layout.page_list_item, null);

                holder.image = (ImageView)convertView.findViewById(R.id.image); 

                convertView.setTag(holder);
            }
            else
            {
                holder = (ViewHolder)convertView.getTag();
            }           

            // Load image from internalstoarage and display in image view   

            imageLoader.DisplayImage(m_DirectoryPath.getPath() + "/" + fileNameArray.get(position), holder.image, true);

            return convertView;
        }
} 
```

**图像加载器类的代码**

```
public class ImageLoader 
{
    MemoryCache memoryCache = new MemoryCache();
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
    ExecutorService executorService; 
    Context m_context;
    public ImageLoader(Context context)
    {
        m_context = context;
        executorService = Executors.newFixedThreadPool(5);
    }

    public void DisplayImage(String url, ImageView imageView, boolean useCachedImage)
    {
        imageViews.put(imageView, url);
        Bitmap bitmap = memoryCache.get(url);

        if(bitmap!=null && useCachedImage)
        {
            imageView.setImageBitmap(bitmap);
        }
        else
        {
            queuePhoto(url, imageView);
        }
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        PhotoToLoad p = new PhotoToLoad(url, imageView);
        executorService.submit(new PhotosLoader(p));
    }

    private Bitmap getBitmap(String url) 
    {
        File filePath = new File(url);

        // from internal storage cache
        Bitmap b = decodeFile(filePath);
        if (b != null)
        {
            return b;
        }
        return null;
    }

    // decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File filePath)
    {
        try 
        {
            // decode image size
             int Required_Height = 0;

             BitmapFactory.Options option = new BitmapFactory.Options();            
             Bitmap bitmap = BitmapFactory.decodeStream(new FileInputStream(filePath), null, option);

             WindowManager wm = (WindowManager) m_context.getSystemService(Context.WINDOW_SERVICE);
             Display display = wm.getDefaultDisplay();

             if(display.getWidth() == 480)
             {
                 Required_Height = 150;
             }
             else if(display.getWidth() == 800)
             {
                 Required_Height = 200;
             }

             bitmap = Bitmap.createBitmap(bitmap, 0, 0, option.outWidth, Required_Height);

             return bitmap;
        } 
        catch (FileNotFoundException e){            
        }
        return null;
    }

    // Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i)
        {
            url = u; 
            imageView=i;
        }
    }

    class PhotosLoader implements Runnable 
    {
        PhotoToLoad photoToLoad;
        PhotosLoader(PhotoToLoad photoToLoad)
        {
            this.photoToLoad = photoToLoad;
        }

        @Override
        public void run() 
        {
            if(imageViewReused(photoToLoad))
                return;

            Bitmap bmp = getBitmap(photoToLoad.url);
            memoryCache.put(photoToLoad.url, bmp);

            if(imageViewReused(photoToLoad))
                return;

            BitmapDisplayer bd = new BitmapDisplayer(bmp, photoToLoad);
            Activity a = (Activity)photoToLoad.imageView.getContext();
            a.runOnUiThread(bd);
        }
    }

    boolean imageViewReused(PhotoToLoad photoToLoad)
    {
        String tag = imageViews.get(photoToLoad.imageView);

        if(tag == null || !tag.equals(photoToLoad.url))         
            return true;

        return false;
    }

    // Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;
        public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
        public void run()
        {
            if(imageViewReused(photoToLoad))
                return;

            if(bitmap != null)
                photoToLoad.imageView.setImageBitmap(bitmap);
        }
    }

    public void clearCache() 
    {
        memoryCache.clear();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:43:32.123

您必须为**PhotosLoader**线程对象设置优先级。我在这样的构造函数中这样做。

```
// Make the background thread low priority. This way it will not affect the UI performance
mImageRequstController.setPriority(Thread.NORM_PRIORITY - 1); 
```

通过将优先级设置为低于 normal ，它不会影响 UI 并将继续在后台工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:43:59.900

发生的情况是，出于速度原因，在需要时才加载视图之外的列表项。当用户将列表项滚动到视图中时，它会被加载。但是，从 SD 卡加载图像是一项耗时的操作，足以让用户看到延迟。

您的代码在 UI 线程上加载图像，阻止它更新和平滑滚动列表。相反，您应该在另一个线程上加载图像，而 UI 线程上的列表项应该只显示进度微调器或其他加载指示器，直到图像被加载。而且，就像列表一样，线程应该只在列表项出现时才启动，而不是一次全部启动。

# cocos2d-iphone - CCMask 和线程

> ID：12085408
> 
> 赞同：2
> 
> 时间：2012-08-23T05:43:14.087
> 
> 标签：cocos2d-iphone, nsthread, kobold2d

我在我的 Kobold2d 2.0.3（cocos2d-iphone v2.0 和 OpenGL ES 2.0）游戏中使用[Gilles Lesire 的 CCMask 类](http://www.cocos2d-iphone.org/forum/topic/15890)，但调用“createMaskForObject:withMask:”时出现以下错误：

-[CCRenderTexture initWithWidth:height:pixelFormat:depthStencilFormat:] : cocos2d: 警告。CCRenderTexture 在它自己的线程上运行。确保在这个线程上使用了 OpenGL 上下文！

我不太了解如何使用线程/opengl，但我希望有人知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:26:38.733

对于 cocos2d 2.0，我也看到了这一点。我不认为有什么可以解决的。如果您查看 CCRenderTexture.m 的第 81 行，您将看到：

```
if( [director runningThread] != [NSThread currentThread] ) 
```

如果这是错误的，则会发出警告。

但是，如果您在游戏/应用程序运行之前创建纹理，CVDisplayLink 的后台线程看起来还没有创建。[director runningThread]（CVDisplayLink 的线程）返回 nil。因此，“如果”陈述将永远是错误的。

# javascript - Jquery 选择器不起作用

> ID：12085409
> 
> 赞同：3
> 
> 时间：2012-08-23T05:43:18.407
> 
> 标签：javascript, jquery

编码

```
<script type="text/javascript" src="jquery/jquery-1.8.0.js"></script>  
<script type="text/javascript">  
$(document).ready(function() {  
    alert("Hello!");  
});  
$(".demo").click(function() {  
    alert("I am demo");  
});  
</script>  
<body>  
    <button class="demo">click me</button>  
</body> 
```

第一个你好！可以，但是我demo不行？怎么回事？

类似的问题 [jquery each selector doesn't work](https://stackoverflow.com/questions/8490290/jquery-each-selector-doesnt-work)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T05:44:37.537

您的 click 事件处理程序试图`demo`在 HTML 正文呈现之前绑定到按钮。您需要在函数内分配事件处理程序`$(document).ready`：

改变这个：

```
$(document).ready(function() {  
    alert("Hello!");  
});  
$(".demo").click(function() {  
    alert("I am demo");  
}); 
```

对此：

```
$(document).ready(function() {  
    alert("Hello!");  
    $(".demo").click(function() {  
        alert("I am demo");  
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:44:57.650

在里面绑定点击事件`ready()`

```
$(document).ready(function() {  
    alert("Hello!"); 
    $(".demo").click(function() {  
        alert("I am demo");  
    });  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:09:52.493

看[这个演示](http://jsfiddle.net/DFdXz/)

```
 $(".demo").live('click',function() {  
        alert("I am demo");  
    });​ 
```

# cakephp - 过滤功能前Cake PHP常用代码

> ID：12085411
> 
> 赞同：2
> 
> 时间：2012-08-23T05:43:25.100
> 
> 标签：cakephp, cakephp-1.3

我正在使用 Cakephp 1.3 因为我有多个控制器

比如，得分，Stuundets等。

在得分中我有多个具有不同条件的函数现在我需要在过滤函数之前添加一些逻辑以仅显示字段 is_deleted =0

我正在尝试这段代码

```
$this->Score->Student->conditions='Student.is_deleted=>0'; 
```

由于也通过了所有条件，所以所有功能都太耗时了

上面的代码不起作用。我想添加过滤器所以我将在整个项目中工作

任何人都有一个想法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:47:53.593

您应该在模型中使用[beforeFind() 方法](http://book.cakephp.org/1.3/view/1049/beforeFind)`Student`，而不是将条件逻辑放入`beforeFilter()`方法中。

将此代码写入`Student Model`：

```
function beforeFind($queryData)
{
    if (!isset($queryData['conditions'])) {
        $queryData['conditions'] = array();
    }       
    $queryData['conditions'][$this->alias.'.is_deleted'] = '0';       
    return $queryData;
} 
```

[这篇文章](https://stackoverflow.com/questions/3138389/fetch-only-enabled-records-from-the-database-in-cakephp-v1-3)也可能会帮助您实现同样的目标。

您还可以使用[行为回调](http://book.cakephp.org/1.3/en/view/1641/Creating-a-behavior-callback)。

希望它对你有用。

# ios - 当您有多个支持相同外部附件协议的应用程序时会发生什么？

> ID：12085414
> 
> 赞同：1
> 
> 时间：2012-08-23T05:43:37.877
> 
> 标签：ios, external-accessory

当您有多个支持相同外部附件协议的应用程序时会发生什么？iOS 将推出哪个应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:11:24.547

来自 Apple 的文档：

```
 Note: If more than one third-party app registers to handle the same URL scheme, there is currently no process for determining which app will be given that scheme. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-14T03:44:37.730

因为我们知道app bundle ID是唯一的，所以iPhone一次只能在前台打开一个APP

# android - 在异步任务中添加一个可运行线程以延迟启动画面

> ID：12085420
> 
> 赞同：0
> 
> 时间：2012-08-23T05:44:16.933
> 
> 标签：android

嗨，我想使用异步任务在启动屏幕上添加延迟，但我不知道该怎么做。到目前为止，这是我的 DoInBackground 代码：

```
@Override
        protected Integer doInBackground(String... params) {

            Thread SplashThread = new Thread() {
                    @Override
                    public void run() {
                        try {
                            int waited = 0;
                            while(running && (waited < delayTime)) {
                                sleep(100);
                                if(running) {
                                    waited += 100;
                                }
                            }
                        } catch(InterruptedException e) {
                            // do nothing
                        } finally {
                            finish();
                            stop();
                        }
                    }
                };
                SplashThread.start();

            return null;
        } 
```

我认为返回 null 的部分是问题的主要原因，因为它结束了我的 Async 任务，即使我的 SplashThread 仍在后台运行，在薄部分上留下泄漏导致错误。我也尝试使用 counDownTimer 作为替代品，但这会导致同样的问题。有什么方法可以正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:09:10.537

您不需要`doInBackground`在`AsyncTask`. 它`AsyncTask`本身在另一个线程中运行该`doInBackground`方法，也因为这个`while`循环它很可能是不必要的。在方法中做你想做的工作`doInBackground`，然后简单地返回。如果您想要/需要一些额外的延迟（尽管您应该不惜一切代价避免这种情况），您可以使用该`Thread.sleep`方法在返回之前暂停线程。

# java - Java读取文件并将字符串存储到数组中

> ID：12085421
> 
> 赞同：1
> 
> 时间：2012-08-23T05:44:25.200
> 
> 标签：java, arrays, file, input

> **可能重复：**
> [将文件内容存储到数组中](https://stackoverflow.com/questions/12113490/storing-file-content-into-an-array)

我正在编写一个简单的刽子手程序。我无法打开文件，然后将数据存储到数组中。我似乎无法弄清楚该怎么做。这是一个学校项目，所以如果逻辑似乎没有必要，那就怪罪那个人吧:)

我有一个包含十个单词的文本文件（words.txt）。它们在文件中，每个文件之间都有一行。它们需要导入到数组中。有人愿意帮助一个有抱负的年轻程序员吗？谢谢你提供的所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:46:42.643

我建议您使用 a `List<String>`（例如[`ArrayList<String>`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)）和 a （使用, 并使用/`Scanner`构造它）来阅读单词。[`new Scanner(new File("wordfile.txt"))`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#Scanner%28java.io.File%29)[`scanner.hasNextLine()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNextLine%28%29)[`scanner.nextLine()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine%28%29)

如果您确实需要它是一个数组，请通过[`list.toArray`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray%28T%5b%5d%29)最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:50:53.150

脚步：

在文件上打开扫描仪。

计算文件中的所有行。

将数组初始化为大小等于文件中行数的数组。

关闭扫描仪。

在文件上打开扫描仪。

从 0 到 yourArray.length - 1，将数组的第 i 个索引分配给扫描仪中的当前行。

关闭扫描仪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:52:41.177

要阅读文件，您可以查看[`Scanner Class`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)，这将允许您遍历文本文件的内容。

尽管您可以使用数组数据结构来实现您想要做的事情，但这是不可取的，使用诸如 an 之类的东西[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)将允许您拥有一个动态数据结构，然后，如果您愿意，可以使用[`toArray()`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#toArray%28%29)方法。

# android - 布局中图像的 x 和 y 坐标

> ID：12085423
> 
> 赞同：0
> 
> 时间：2012-08-23T05:44:25.823
> 
> 标签：android, android-layout, coordinates, android-image

如何在 Android 的 Layout 中获取图像的 X 和 y 坐标？
以及如何在Android的Layout中获取图像的顶部、底部、左侧和右侧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:55:20.593

通过使用`Touch listeners`，您可以获得 X 和 Y 值`view`

```
layout.setOnTouchListener(new OnTouchListener() {           
        @Override
        public boolean onTouch(View v, MotionEvent event) { 
            float x = event.getX();
            float y = event.getY();
            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:55:43.050

对于任何视图与其父视图相比的 x 和 y 坐标，请使用 : `getLeft()`, `getTop()`, `getRight()`, and `getBottom()`.

对于与屏幕/窗口相比的任何视图的原始 x 和 y 坐标，请使用： `getLocationInWindow(int[] location)`，`getLocationOnScreen(int[] location)`

请注意，在视图定位和布局过程完成之前，所有这些方法都不起作用。

更多的方法写在 API [here](http://developer.android.com/reference/android/view/View.html)上。

# javascript - 浏览器关闭事件

> ID：12085426
> 
> 赞同：0
> 
> 时间：2012-08-23T05:44:33.057
> 
> 标签：javascript, jquery, browser

我在我的项目中使用 jQuery 通知。

当我关闭浏览器时，我正在使用并向`onbeforeunload`用户显示一个确认框。

但是客户端对默认的消息框不满意，

在技​​术上是否可以显示我的通知而不是默认通知。

jQuery 通知带有一个问题`Do you want to close ?`和两个按钮`YES`和`No`.

当用户点击`YES`它会返回`true`，否则`False`

有什么方法可以实现？或一些评论/意见？

请帮我 。

谢谢你。

**更新 ：**

```
window.onbeforeunload = ShowModel;

function ShowModel()
{
    return show_pop_up();
}

show_pop_up()
{

return TRUE or FALSE ; 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:56:30.133

> 在技​​术上是否可以显示我的通知而不是默认通知。

不可以。您可以指定消息的文本。您无法控制按钮，无法控制外观，也无法将 UI 替换为从头开始构建的 HTML/CSS/JS。

当用户试图离开页面时，你可以做什么有很大的限制。浏览器旨在保护用户免受试图诱捕他们的网站的侵害（*您正试图离开该网站？不！在您查看更多色情广告并向我们提供您的信用卡详细信息之前，您不得离开！*）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:19:23.733

可以显示您的通知而不是默认通知。尝试这个：

```
$(window).on('beforeunload', function() {
 return 'Do you really want to close this window? Some your text...';
}); 
```

但这是真的，你不能用浏览器的窗口来限制用户的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:08:46.277

从技术上讲，它不可能覆盖默认 UI。

有两种页面离开事件可以发生。

一种是通过单击链接在同一网站内导航。对于这种页面卸载，您可以为所有菜单链接编写 onclick，以使用 UI 样式显示您希望的警告消息。但是当你点击链接时，你必须停止调用 beforeunload 事件。

第二个是使用浏览器按钮/地址栏在网站外导航。在这里，您不能覆盖默认 UI。

最好的例子是脸书。当您输入状态并在提交之前，如果您尝试在 FB 中导航，您将收到一条不错的 UI 警告消息。但是当你关闭窗口时，你会得到默认的。

希望这可以帮助。

# oracle - 由于缺少依赖项，使用 impdp 在 Oracle 中导入数据失败

> ID：12085431
> 
> 赞同：0
> 
> 时间：2012-08-23T05:44:43.653
> 
> 标签：oracle, import, dependencies, export, impdp

我需要导出 Oracle 表的子集并将其导入另一个 Oracle 实例。使用 expdp 的导出效果很好，但是当我尝试使用 impdp 工具在另一个实例中导入数据时，它失败了，因为缺少依赖项（外键）。是否有任何选项可以强制 expdp 工具也导出所有必需的依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:32:24.783

不。

你应该确保你的转储集是完整的。您可以尝试使用 impdp 生成 sql 文件，将生成的 sql 应用于其他数据库以仅创建表 [s]。为此，您可能需要对生成的 sql 进行一些编辑工作，直到它适合您的任务。

接下来使用impdp with contents=data_only 导入预创建表中的行[s]

# memcached - java.lang.Thread.State：等待

> ID：12085433
> 
> 赞同：2
> 
> 时间：2012-08-23T05:45:13.107
> 
> 标签：memcached, spymemcached

看起来很多超时或等待连接。任何人都可以帮助解决它吗？

```
"DefaultMessageListenerContainer-1@1359" prio=5 tid=0x1fb nid=NA waiting
  java.lang.Thread.State: WAITING
      at sun.misc.Unsafe.park(Unsafe.java:-1)
      at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)
      at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1011)
      at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1303)
      at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:253)
      at net.spy.memcached.internal.OperationFuture.get(OperationFuture.java:59)
      at net.spy.memcached.internal.GetFuture.get(GetFuture.java:37)
      at net.spy.memcached.MemcachedClient.get(MemcachedClient.java:1135) 
```

# css - 与下拉菜单重叠的文本

> ID：12085437
> 
> 赞同：0
> 
> 时间：2012-08-23T05:46:07.090
> 
> 标签：css, drop-down-menu

我有来自客户想要使用的模板设计的 CSS 代码。我遇到的一个问题是，一旦选择了文本选项（那些具有宽长度的选项），就会在下拉箭头上书写。

[看图片](http://s15.postimage.org/6n96cm10b/overlapping.png)

我尝试使用 z-index 并在适当的地方放置溢出：隐藏。这是CSS代码：

```
/* search drop-down values */
select option {}
option.level-0{padding:0 3px;}
option.level-1,option.level-2,option.level-3,
option.level-4,option.level-5,option.level-6,
option.level-7{}
.selectBox-dropdown{ height: 34px; min-width:190px; max-width: 320px;                     position:relative; border:solid 1px #BBB; line-height:1; text-decoration:none; color:#666; outline:none; vertical-align:middle; background:#FFF; -webkit-border-radius:6px; -moz-border-radius:6px; border-radius:6px; display:inline-block; cursor:default; margin-top: 1px\9; height: 33px\9;}
.content_right .selectBox-dropdown {width:303px;}
.content_right a.selectBox-dropdown:hover {text-decoration:none;}
.selectBox-dropdown:focus,
.selectBox-dropdown:focus .selectBox-arrow{border-color:#BBB}
.selectBox-dropdown.selectBox-menuShowing{-moz-border-radius-bottomleft:0; -moz-  border-radius-bottomright:0; -webkit-border-bottom-left-radius:0; -webkit-border-bottom-right-radius:0; border-bottom-left-radius:0; border-bottom-right-radius:0}
.selectBox-dropdown .selectBox-label{width:100%; padding:0 .7em; line-height:2.4em; display:inline-block; white-space:nowrap; overflow:hidden; font-size:14px}
.selectBox-dropdown .selectBox-arrow{position:absolute; top:0; right:0; width:23px; height:100%; background:url(images/sb-arrow.png) 50% center no-repeat; border-left:solid 1px #BBB;  }
.selectBox-dropdown-menu{position:absolute; z-index:99999; max-height:200px; border:solid 1px #BBB; background:#FFF; -moz-box-shadow:0 2px 6px rgba(0,0,0,.2); -webkit-box-shadow:0 2px 6px rgba(0,0,0,.2); box-shadow:0 2px 6px rgba(0,0,0,.2); overflow:auto}
.selectBox-inline{width:250px; outline:none; border:solid 1px #BBB; background:#FFF; display:inline-block; -webkit-border-radius:4px; -moz-border-radius:4px; border-radius:4px; overflow:hidden;} 
.selectBox-inline:focus{border-color:#666}
.selectBox-options,
.selectBox-options li,
.selectBox-options li a{list-style:none; display:block; cursor:default; padding:0; margin:0}
.selectBox-options li a{color:#666; padding:1px .7em; white-space:nowrap; overflow:hidden; background:6px center no-repeat; text-decoration:none; font:14px/1.5em Arial,Helvetica,sans-serif;}
.selectBox-options li.selectBox-hover a{background-color:#EEE}
.selectBox-options li.selectBox-disabled a{color:#888; background-color:transparent}
.selectBox-options .selectBox-optgroup{color:#666; background:#EEE; font-weight:bold; line-height:1.5; padding:0 .3em; white-space:nowrap;}
.selectBox.selectBox-disabled{color:#888 !important}
.selectBox-dropdown.selectBox-disabled .selectBox-arrow{opacity:.5; filter:alpha(opacity=50); border-color:#666;}
.selectBox-inline.selectBox-disabled{color:#888 !important}
.selectBox-inline.selectBox-disabled .selectBox-options a{background-color:transparent !important} 
```

下拉代码：

```
<div class="state-dropdown"><?php wp_state_dropdown() ?></div>

<span id="campus_dropdown"><?php if (empty($_GET['cp_state'])){ wp_campus_dropdown();} ?></span>
<?php if (!empty($_GET['cp_state'])){?>
<script type="text/javascript" >loadXMLDoc('<?php echo $_GET['cp_state'];?>','<?php echo $_GET['cp_your_college'];?>')</script>
 <?php }?> 
```

任何建议或帮助将不胜感激。我知道这有点过多的 CSS，但它再次来自模板，我已经把头发拉了好几个星期了！

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:14:42.103

首先没有示例 HTML，我们只能猜测 css 是如何使用的。在分析了您提供的 css 之后，我尝试了一下我认为它可能会被使用的方式，[这里是 jsFiddle](http://jsfiddle.net/ewCtG/)。基于这个假设，有两种选择：

*   为包含菜单选项的元素设置右填充。这可能会导致下拉列表变宽，但应该更好，因为它允许用户查看选项的整个文本。
*   将下拉箭头元素 ('.selectBox-arrow') 的背景设置为纯色并匹配包含元素的边框半径。请注意，背景颜色默认为透明。

如果出于某种原因这些选项都不适用于您的情况，请记住，Firebug（或其他浏览器的开发工具）是您的朋友。这些工具可以帮助您快速解决此类问题。

# android - 在android中设置更大的背景图像时如何设置ImageButton的宽度？

> ID：12085438
> 
> 赞同：0
> 
> 时间：2012-08-23T05:46:12.503
> 
> 标签：android, width, imagebutton

我想以编程方式将较大的图像设置为 Android 中 ImageButton 的背景，并将其高度和宽度设置为固定。我可以按如下方式创建图像按钮。但是图像的大小越大。如何根据按钮的大小固定其大小。

```
ImageButton b0=new ImageButton(this);
b0.setMaxWidth(100);
b0.setMinimumWidth(100);
b0.setMaxHeight(80);
b0.setBackgroundResource(R.drawable.tattoo0);
tattooListView.addView(b0); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:48:47.603

你可以试试：

```
b0.setScaleType(ScaleType.FIT_XY); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:11:53.890

ScaleType 不适用于背景，它将适用于源图像。您可以通过 xml 中的 src 属性设置源图像，或者通过 setImage() 方法以编程方式设置，如下所示：

[公共无效 setImageBitmap (位图 bm)](http://developer.android.com/reference/android/widget/ImageView.html#setImageBitmap%28android.graphics.Bitmap%29)

[public void setImageDrawable (Drawable drawable)](http://developer.android.com/reference/android/widget/ImageView.html#setImageDrawable%28android.graphics.drawable.Drawable%29)

[公共无效 setImageResource (int resId)](http://developer.android.com/reference/android/widget/ImageView.html#setImageResource%28int%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:43:12.463

这段代码帮助我实现了我的目标。

```
 ImageButton btn = new ImageButton(getApplicationContext());
     String str=String.format("drawable/theimage");
    int imageResource = getResources().getIdentifier(str, null, getPackageName());

    BitmapDrawable drawable = (BitmapDrawable)getApplicationContext().getResources().getDrawable(imageResource);
            Bitmap bitmap = drawable.getBitmap();
            bitmap = Bitmap.createScaledBitmap(bitmap, 100, 80, true); 

            btn.setBackgroundColor(80000000);
            btn.setImageBitmap(bitmap);

            btn.setTag(1);

            linearlayoutview.addView(btn); 
```

# jquery - 奇怪的行为 - jQuery .html() 导致换行符丢失 IE8 中的元素

> ID：12085439
> 
> 赞同：3
> 
> 时间：2012-08-23T05:46:19.050
> 
> 标签：jquery, html, internet-explorer, pre

我有一些`pre`用换行符格式化的元素，如下所示：

```
<pre id="code1">Some
formatted
code</pre>

<pre id="code2">Some more
formatted
code</pre> 
```

如果我将以下内容应用于第一个`pre`元素：

```
$('#code1').html($('#code1').html()); 
```

在 IE8 中，这会导致换行符丢失，结果如下：

```
Some formatted code

Some more
formatted
code 
```

在 Chrome 中，上面的 jQuery 没有你所期望的效果。

示例：http: [//jsfiddle.net/6mkAa/](http://jsfiddle.net/6mkAa/)

有谁知道是什么导致了 IE 中这种奇怪的行为？我想编辑我的`pre`元素的内容，而不会在此过程中丢失格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:16:11.477

IE8 出现此问题，因为
Jquery html() 方法使用浏览器的 innerHTML 属性。某些浏览器可能不会返回与原始文档中的 HTML 源完全相同的 HTML。例如，如果属性值仅包含字母数字字符，Internet Explorer 有时会省略属性值的引号。

你可以这样使用

```
$("#code1").innerHTML($("#code1").html()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:04:39.320

你可以试试`.text()`：

[http://jsfiddle.net/6mkAa/6/](http://jsfiddle.net/6mkAa/6/)

```
$('#code1').text($('#code1').text()); 
```

# java - AndEngine Touch ThreadPool 错误

> ID：12085448
> 
> 赞同：3
> 
> 时间：2012-08-23T05:47:01.733
> 
> 标签：java, android, andengine

我在我的项目中使用了和引擎，我得到了下面的错误，我`OnAreaTouch`在多个精灵上使用了该事件。

```
VERBOSE/AndEngine(1685):org.andengine.util.adt.pool.PoolUpdateHandler$1<TouchEventRunnablePoolItem> was exhausted, with 0 item not yet recycled.Allocated 1 more. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:55:57.400

Michael-F Portzert 上面的人在评论中说得对。这不是错误，只是一条消息。Andengine 创建一个初始大小为 0 的更新处理程序池。当请求一个新的时，它会给出一条消息，它必须创建一个新的。

如果您创建的条件以某种方式导致您的项目无法回收到池中，您会一遍又一遍地看到此消息，直到内存不足。

一般情况下Andengine会在下次需要一个TouchEventRunnablePoolItem的时候回收这些item重新使用。除了确保不保留对 Pool 项目的任何引用之外，您不需要做任何特别的事情。你不太可能这样做。

# r - R：使用自定义内核（用户定义内核）的 SVM 性能在 kernlab 中不起作用

> ID：12085454
> 
> 赞同：5
> 
> 时间：2012-08-23T05:47:26.223
> 
> 标签：r, machine-learning, svm, kernlab

我正在尝试使用用户定义的内核。我知道 kernlab 在 R 中提供用户定义的内核（自定义内核函数）。我使用了数据垃圾邮件，包括包 kernlab。（变量数=57 示例数=4061）

我定义了内核的形式，

```
kp=function(d,e){

as=v*d
bs=v*e
cs=as-bs
cs=as.matrix(cs)

exp(-(norm(cs,"F")^2)/2)
}

class(kp)="kernel" 
```

它是高斯核的变换核，其中`v`是与每个变量的标准差向量相反的连续变化值，例如：

```
v=(0.1666667,........0.1666667) 
```

训练集定义了 60% 的垃圾邮件数据（保留不同类别的比例）。

如果数据的类型是垃圾邮件，那么对于火车 svm，数据的类型 = 1

```
m=ksvm(xtrain,ytrain,type="C-svc",kernel=kp,C=10) 
```

但这一步不起作用。它总是在等待回应。

所以，我问你这个问题，为什么？是不是因为例子太多了？是否有任何其他 R 包可以为用户定义的内核训练 SVM？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-01T05:10:21.293

首先，你的内核看起来像一个经典的 RBF 内核，带有`v = 1/sigma`，那么你为什么要使用它呢？您可以使用内置的 RBF 内核并简单地设置`sigma`参数。特别是 - 您可以在矢量化矩阵上使用经典欧几里得，而不是在矩阵上使用 frobenius 范数。

第二 - 这工作得很好。

```
> xtrain = as.matrix( c(1,2,3,4) )
> ytrain = as.factor( c(0,0,1,1) )
> v= 0.01
> m=ksvm(xtrain,ytrain,type="C-svc",kernel=kp,C=10)
> m
Support Vector Machine object of class "ksvm" 

SV type: C-svc  (classification) 
 parameter : cost C = 10 

Number of Support Vectors : 4 

Objective Function Value : -39.952 
Training error : 0 
```

至少有两个原因让你还在等待结果：

*   RBF 内核引发了最难优化 SVM（尤其是大型`C`）的问题
*   用户定义内核的效率远低于内置内核

由于我不确定，是否`ksvm`实际上优化了用户定义的内核计算（实际上我很确定它**没有**），您可以尝试构建内核矩阵（训练向量`K[i,j] = K(x_i,x_j)`在哪里`x_i`）并提供它。你可以通过`i'th``ksvm`

```
K <- kernelMatrix(kp,xtrain)
m <- ksvm(K,ytrain,type="C-svc",kernel='matrix',C=10) 
```

预先计算内核矩阵可能是一个相当长的过程，但优化本身会快得多，所以如果你想测试许多不同的`C`值（你肯定应该这样做），这是一个好方法。不幸的是，这需要`O(n^2)`内存，因此如果您使用超过 100 000 个向量，您将需要非常大量的 RAM。

# c# - 在不使用 Web 服务的情况下，从 SSRS 输出的 Windows 服务中创建 pdf

> ID：12085456
> 
> 赞同：0
> 
> 时间：2012-08-23T05:47:30.920
> 
> 标签：c#, reporting-services, reporting

我有一个 Windows 服务，可以根据一些数据库查询创建每小时 PDF 报告。

目前，我正在使用`reportViewer`控件 ( `Microsoft.Reporting.WinForms.ReportViewer`) 执行此操作，并从中将我的报告呈现为 PDF。这种方法有效，但我认为必须有一种更简单的方法来做到这一点（因为它是一个 Windows 服务，所以我实际上并没有使用 reportviewer 进行查看——而且似乎有点奇怪，没有任何东西可以在没有 GUI 的情况下提供此功能部分）。

问题是：如何在不创建 GUI 控件或访问 Web 服务的情况下使用 SSRS 功能创建 PDF。

提前致谢，

什穆尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:02:00.577

您可以尝试 IText 组件来创建 pdf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:08:18.430

我使用 Telerik Report 控件来执行此操作。但如果你也使用 VS 2010 报告，我想它也是一样的。

1.  在您的解决方案中创建一个单独的报告项目，然后拖放（或通过代码）创建您想要生成的任何报告。

2.  公开一个生成 PDF 方法（公共成员），您可以在其中将报告转换为 PDF

3.  在您的 Windows 服务解决方案中使用此 dll/项目
4.  使用公开的方法为您创建 PDF。

我已经为我们的 Windows 服务做到了这一点。

# svn - 如何将项目同时提交到 TFS 和 SVN？

> ID：12085467
> 
> 赞同：1
> 
> 时间：2012-08-23T05:48:22.767
> 
> 标签：svn, tfs

你可能会问为什么我需要同时提交一个项目？

在我们公司，我们建立了一个系统来备份所有项目。为此，我们使用了 SVN。现在我们有一个客户端，他正在使用 TFS，并且项目已提交到他们的服务器。我们也想在我们的系统中保留代码的备份，我们想为此使用 SVN 服务器。我们不想使用迁移工具。

所以我计划将 TFS 与 Visual Studio 项目一起使用，并开发一个 AddIn/Plugin 来提交到 SVN 服务器。但是，这一步并没有取得成果。无法从*AddIn*调用可以提交到 SVN的*DLL*（我使用过*SharpSVN*）。现在我正在尝试使用*System.Diagnostics.Process*通过代码本身调用 SVN 命令。它也遇到了一些问题。

 ***我想得到一些关于如何进行的建议。我应该使用*AddIn*还是可以通过任何其他方式获得所需的结果？还是我们应该手动执行此操作，例如复制代码并在一天结束时将其提交到 TFS 和 SVN？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:04:40.910

当您在所有其他项目中使用 SVN 时，我个人也会在这个项目中坚持使用它。

当您的客户端使用 TFS 时，您可以在 SVN 服务器上使用提交后挂钩脚本，该脚本会将对该特定项目的更改复制到他们的 TFS 服务器。

您甚至可以在代码的“*内部*”SVN 分支中工作，并仅复制合并到“*已发布*”分支（例如，可能是主干）的更改。***

# sql - 尽可能多地从 CLOB 到 VARCHAR2 中选择数据，数据中包含多字节字符

> ID：12085471
> 
> 赞同：7
> 
> 时间：2012-08-23T05:48:31.720
> 
> 标签：sql, oracle, substr, clob, multibyte

多字节字符给我带来了很大的痛苦。

对这个问题有什么建议吗？

我有一个*可能*包含一些多字节字符的 CLOB 字段，我需要在 SQL 中选择并将该字段转换为下游进程的字符串，目前我正在使用：

```
SELECT DBMS_LOB.SUBSTR( description, 4000, 1 ) FROM table 
```

但是上面命令中的 4000 是字符长度，而不是字节。所以我不得不更改为 3000 来处理任何可能潜入数据中的多字节字符，否则会发生缓冲区大小错误。

问题在于不包含多字节字符的记录，它可能会不必要地截断比它需要的更多的数据。（4000 是字符串限制，我们可以/必须忍受它。）

有没有办法做一些相当于：

```
SELECT DBMS_LOB.SUBSTR( description, 4000bytes, 1 ) FROM table 
```

这样我就可以得到尽可能多的数据。

注意：我不能创建临时表/视图，不能使用 PL/SQL，只能使用 SQL SELECT...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T08:50:20.903

Jeffrey 的思维过程还可以，但是 alchn 也是对的。刚刚遇到同样的问题，这是我的解决方案。不过，您必须能够创建一个函数：

```
Create Or Replace Function clob_substr(p_clob   In Clob
                                      ,p_offset In Pls_Integer
                                      ,p_length In Pls_Integer) Return Varchar2 Is
Begin
  Return substrb(dbms_lob.substr(p_clob
                                ,p_length
                                ,p_offset)
                ,1
                ,p_length);
End;
/ 
```

这是它的使用演示：

```
Select c
      ,clob_substr(c
                  ,1
                  ,4000)
  From (

        Select xmlelement("t", rpad('é', 4000, 'é'), rpad('é', 4000, 'é')).extract('//text()').getclobval() c
          From dual

        ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T06:06:52.583

也许用 SUBSTR 截断生成的 varchar2：

```
SELECT SUBSTRB( DBMS_LOB.SUBSTR( description, 4000, 1 ), 1, 4000) FROM table 
```

# c# - 部分 xml 消息未正确反序列化

> ID：12085476
> 
> 赞同：1
> 
> 时间：2012-08-23T05:49:15.340
> 
> 标签：c#, .net, xml, serialization, xml-serialization

您好我有以下反序列化代码

```
 public static T DeserializeXML<T>(String xml) where T : class
        {
            T newObject = null;
            XmlSerializer s = new XmlSerializer(typeof(T));
            using (StringReader sw = new StringReader(xml))
            {
                newObject = (T)s.Deserialize(sw);
            }
            return newObject;
        } 
```

我尝试反序列化的消息

```
<Data>
<ItemIn date="2012-08-09T10:25:54.06+01:00" itemId="000007721" Id="1">   <Extensions><Info Id="parts" order="issue"/></Extensions></ItemIn>
</Data> 
```

但我只是从来没有被`Extensions`部分地渴望回到我总是去`null`那里的原始班级。其余的课程还可以。

有什么建议要检查什么？

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
public partial class ItemTransferIn {

    private Extensions extensions;

    private System.DateTime date;

    private string itemId;

    private string Id;

    /// <remarks/>
    public ItemTransferInExtensions Extensions {
        get {
            return this.extensions;
        }
        set {
            this.extensions = value;
        }
    }

[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
public partial class Extensions {

    private RecipeInfo recipeInfoField;

    /// <remarks/>
    public RecipeInfo RecipeInfo {
        get {
            return this.recipeInfoField;
        }
        set {
            this.recipeInfoField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
public partial class RecipeInfo {

    private string recipeIdField;

    private string orderIdField;

    private string itemBarcodeIdField;

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string Id {
        get {
            return this.recipeIdField;
        }
        set {
            this.recipeIdField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string order {
        get {
            return this.orderIdField;
        }
        set {
            this.orderIdField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string itemBarcodeId {
        get {
            return this.itemBarcodeIdField;
        }
        set {
            this.itemBarcodeIdField = value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:00:50.393

对于扩展......看起来你已经编辑了代码；有

```
private Extensions extensions;

...

/// <remarks/>
public ItemTransferInExtensions Extensions {
    get {
        return this.extensions;
    }
    set {
        this.extensions = value;
    }
} 
```

坦率地说，这甚至不应该编译；**我们**没有课`ItemTransferInExtensions`。

此外，`Info`不会工作：

```
/// <remarks/>
public RecipeInfo RecipeInfo {...blah...} 
```

不匹配`<Info ..../>`。所以要么更正xsd并重新生成cs，要么更正xml；但此刻*他们不匹配*。

`RecipeInfo`将属性重命名为`Info`（您也可以只添加一个属性）并修复 Extensions / ItemTransferInExtensions （和缺失的`}`），并添加一个根类以匹配 xml：

```
public class Data
{
    public ItemTransferIn ItemIn { get; set; }
} 
```

...一切正常：

```
static void Main()
{
    string msg = @"<Data>
<ItemIn date=""2012-08-09T10:25:54.06+01:00"" itemId=""000007721"" Id=""1"">   <Extensions><Info Id=""parts"" order=""issue""/></Extensions></ItemIn>
</Data>";
    var obj = DeserializeXML<Data>(msg);

    Console.WriteLine(obj.ItemIn.Extensions.Info.order); // issue
} 
```

不过，坦率地说，手动操作更容易：

```
public class Data
{
    public ItemTransferIn ItemIn { get; set; }
}
public class ItemTransferIn
{
    [XmlAttribute("date")]
    public DateTime Date { get; set; }

    [XmlAttribute("itemId")]
    public string Itemid { get; set; }

    [XmlAttribute]
    public int Id { get; set; }

    public Extensions Extensions { get; set; }
}
public class Extensions
{
    public ExtensionsInfo Info { get; set; }
}
public class ExtensionsInfo
{
    public int Id { get; set; }
    [XmlAttribute("order")]
    public string Order { get; set; }
} 
```

# php - PHP 在 cli 和浏览器中产生不同的结果

> ID：12085479
> 
> 赞同：0
> 
> 时间：2012-08-23T05:49:29.163
> 
> 标签：php, browser, command-line-interface

这部分 PHP 代码通过浏览器和命令行 php 产生了截然不同的结果。

```
for($i=0;$i<=35;$i++)
{
    echo $grid_array[$i];
    if ($grid_array[$i] == 0){
        echo "<img onclick=(document.cookie='click_id=$i') src='./white.png'></img>";
    }
    if ($grid_array[$i] == 1){
        echo "<img onclick=(document.cookie='click_id=$i') src='./black.png'></img>";
    }
} 
```

通过命令行，一切都按预期工作。输出是“白色”和“黑色”图像的混合，标签前面有 0 或 1。

通过浏览器，发生了一些奇怪的事情：

> `<img onclick=(document.cookie='click_id=0') src='./white.png'></img><img onclick=(document.cookie='click_id=1') src='./white.png'></img><img onclick=(document.cookie='click_id=2') src='./white.png'></img><img onclick=(document.cookie='click_id=3') src='./white.png'></img><img onclick=(document.cookie='click_id=4') src='./white.png'></img><img onclick=(document.cookie='click_id=5') src='./white.png'></img><img onclick=(document.cookie='click_id=6') src='./white.png'></img><img onclick=(document.cookie='click_id=7') src='./white.png'></img><img onclick=(document.cookie='click_id=8') src='./white.png'></img><img onclick=(document.cookie='click_id=9') src='./white.png'></img><img onclick=(document.cookie='click_id=10') src='./white.png'></img><img onclick=(document.cookie='click_id=11') src='./white.png'></img><img onclick=(document.cookie='click_id=12') src='./white.png'></img><img onclick=(document.cookie='click_id=13') src='./white.png'></img><img onclick=(document.cookie='click_id=14') src='./white.png'></img><img onclick=(document.cookie='click_id=15') src='./white.png'></img><img onclick=(document.cookie='click_id=16') src='./white.png'></img><img onclick=(document.cookie='click_id=17') src='./white.png'></img><img onclick=(document.cookie='click_id=18') src='./white.png'></img><img onclick=(document.cookie='click_id=19') src='./white.png'></img><img onclick=(document.cookie='click_id=20') src='./white.png'></img><img onclick=(document.cookie='click_id=21') src='./white.png'></img><img onclick=(document.cookie='click_id=22') src='./white.png'></img><img onclick=(document.cookie='click_id=23') src='./white.png'></img><img onclick=(document.cookie='click_id=24') src='./white.png'></img><img onclick=(document.cookie='click_id=25') src='./white.png'></img><img onclick=(document.cookie='click_id=26') src='./white.png'></img><img onclick=(document.cookie='click_id=27') src='./white.png'></img><img onclick=(document.cookie='click_id=28') src='./white.png'></img><img onclick=(document.cookie='click_id=29') src='./white.png'></img><img onclick=(document.cookie='click_id=30') src='./white.png'></img><img onclick=(document.cookie='click_id=31') src='./white.png'></img><img onclick=(document.cookie='click_id=32') src='./white.png'></img><img onclick=(document.cookie='click_id=33') src='./white.png'></img><img onclick=(document.cookie='click_id=34') src='./white.png'></img><img onclick=(document.cookie='click_id=35') src='./white.png'></img></p></body>`

每个值都设置为白色图片。我无法弄清楚为什么会这样。grid_array 是一个等于 0 或 1 的值数组。通过浏览器，php 似乎也忽略了 echo 命令。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:53:30.507

您没有显示您是如何初始化`$grid_array`的 - 如果它是一个空白/不存在的数组，那么该数组的所有索引将比较等于`0`.

同样，您的 HTML 无效。`<img>`标签没有关闭`</img>`。img 标签不是容器。他们是单身人士。

# jbpm - JBPM 5.3 服务任务

> ID：12085480
> 
> 赞同：2
> 
> 时间：2012-08-23T05:49:43.977
> 
> 标签：jbpm

我在 jbpm eclipse tooling 5.3 中创建了自己的服务任务。我想导出以便其他人可以使用它。任何人都可以帮助我解决这个问题。

在 jBPM 中，我们有两个服务任务日志和电子邮件，我在我的系统中开发了自己的服务任务，我想导出以便其他人可以在他们的系统中使用它。如果解决方案是创建自己的服务存储库，如何创建自己的服务存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-21T16:06:12.197

jBPM 提供了一个公共服务存储库，其中包含贡献的可重用服务。您可以提供自己的服务任务实现作为拉请求：[https ://github.com/kiegroup/jbpm-work-items](https://github.com/kiegroup/jbpm-work-items)

# ipython - 如何在 ipython 中重新加载类定义

> ID：12085483
> 
> 赞同：7
> 
> 时间：2012-08-23T05:50:07.050
> 
> 标签：ipython

由于我通常使用 ipython 来处理正在开发的代码，因此我遇到了将类的代码导入 ipython 后更改其代码的情况。我想在不重新启动 ipython 的情况下重新加载新的类定义。问题是 ipython 中的 reload 函数仅适用于模块。

我搜索了这个问题的解决方案，发现了一个之前的帖子： [如何在python shell中重新加载一个类？](https://stackoverflow.com/questions/6946376/how-to-reload-a-class-in-python-shell)

但是，我遵循了那里的方法，但没有奏效。我认为它在该线程中起作用的原因是类名恰好与模块名相同，因此可以在 sys.modules 中找到它，因此可以将其删除。当类名与模块名不同时，该方法不起作用。

我想知道这个问题是否有解决方案。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T12:25:03.840

是的，有一个名为“autoreload”的 IPython 扩展正是针对这类事情的。[这是](http://ipython.org/ipython-doc/stable/config/extensions/autoreload.html)有关如何使用它的文档。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-07T10:44:54.607

您还可以重新加载单个模块

例如：

```
#reload every time  
import my_module
reload(my_module)

#reload a module recursively      
import deep_reload_my_module
dreload(deep_reload_my_module) 
```

# objective-c - “Web 线程上的多个锁定”错误不一致地引发

> ID：12085484
> 
> 赞同：2
> 
> 时间：2012-08-23T05:50:11.827
> 
> 标签：objective-c, ios, web, exc-bad-access

我的 iOS 应用程序出现一个奇怪的错误。错误信息如下：

```
bool _WebTryThreadLock(bool), 0x22c820: Multiple locks on web thread not allowed! Please file a bug. Crashing now... 
```

奇怪的是它发生的不一致——有时单击某个按钮或 textField 会导致崩溃，而其他时候相同的步骤不会导致崩溃。我最初在一个 viewController 中有几个 UIWebView，但我已经注释掉了与它们相关的所有内容，据我所知，我根本没有访问网络线程。即使我的项目中确实有这些 UIWebViews，错误也经常发生在与 webView 无关的 viewControllers 中。当我的应用在设备上打开并收到一封电子邮件时，我也收到了错误消息。来自电子邮件的推送通知似乎相关。有什么想法可能导致这种情况吗？

我怀疑这可能与我们当前在视图控制器之间进行切换的方式有关。我们正在使用模态序列并在加载另一个视图控制器时手动关闭一个视图控制器。这是个坏主意吗？

任何投入将不胜感激。

# php - Smarty.tpl 中的递归函数

> ID：12085486
> 
> 赞同：2
> 
> 时间：2012-08-23T05:50:19.957
> 
> 标签：php, smarty

有人可以帮我把这段代码翻译成智能友好，取自[这里](https://stackoverflow.com/a/6140182/1047304)

```
function outputCategories($categories, $startingLevel = 0)  
{

    foreach ($categories as $key => $category)
    { 
        if (count($category['children']) > 0)
        {
            echo '<li><a title="'.$category['name'].'" href="'.$category['url'].'">'.$category['name'].'</a><ul>';
            outputCategories($category['children'], $startingLevel+1);
            echo "</li>";
        }
        else
        {
            echo '<li><a title="'.$category['name'].'" href="'.$category['url'].'">'.$category['name'].'</a></li>';
        }
    }
    echo "</ul>";
    return self;
} 
```

我可以使用以下行生成单级类别：

```
{foreach from=$hsitemap item=c name=hsitemap}
 {if $c.parent_id ==0 }
<li><h2><a title="{$c.site_name}" href="{$c.site_url}">{$c.site_name}</a></h2><ul>
    {foreach item=d from=$c.children name=sitemap} 
<li><a title="{$d.site_name}" href="{$d.site_url}">{$d.site_name}</a></li>
    {/foreach}
{else}  
<li><h2><a title="{$c.site_name}" href="{$c.site_url}">{$c.site_name}</a></h2><ul>
{/if}
</ul>
</li>
{/foreach}  
</ul> 
```

但现在我有一个多层次的要求，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:52:03.687

您应该创建一个包含每个新级别的包含文件...将循环嵌套到一个新文件或创建一个 smarty 函数，然后包含它或调用 smarty 函数，然后在 IT 中调用自身（或调用功能）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:16:17.250

您可以创建可以调用自身的函数，参见[示例 7.43。](http://www.smarty.net/docs/en/language.function.function.tpl#id361851)在文档中。

# java - 为 Servlet 设置 SimpleJdbcTemplate

> ID：12085490
> 
> 赞同：1
> 
> 时间：2012-08-23T05:50:38.630
> 
> 标签：java, spring, servlets, jdbc, spring-jdbc

我是 Spring 新手，我正在研究 CAS。我需要查询数据库以进行用户身份验证，但我使用 servlet 作为控制器。因此，我需要知道是否有任何方法可以在该 servlet 中设置 SimpleJdbcTemplate 并使用它来查询数据库。如果有如何配置 web.xml 文件或任何其他文件。

已经谢谢你了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:56:21.740

`JdbcTemplate`直接注入或访问 a`Servlet`或 a不是一个好主意`Controller`。
您可以`DAO`在两者之间设置一个层，然后将您的 DAO 注入您`JdbcTemplate`的 DAO 将是一种更好的方法。
为了使用 a`JdbcTemplate`您需要`DataSource`在配置中的某处定义（通过 xml 或注释的 Spring 上下文）。
如果你有一个`UserDao`，那么你的弹簧配置如下

```
<bean class="com.xxx.dao.UserDAOImpl" id="userDAO">
   <property name="jdbcTemplate" ref="jdbcTemplate"/>
</bean>
<bean class="org.springframework.jdbc.core.JdbcTemplate" id="jdbcTemplate">
   <constructor-arg ref="dataSource"/>
</bean>
and here you need to difine your "dataSource" there are multiple ways to configure it, You may get better help from google. 
```

现在，你`UserDaoImpl`看起来像

```
public class UserDAOImpl implements UserDAO {
   private JdbcTemplate jdbcTemplate;
   //setter and getter for jdbcTemplate

   public List<Map<String, Object>> getUsers() {
       String query = "select * from user";
       return jdbcTemplate.queryForList(query, new HashMap<String, String>());
   }
} 
```

在您的 Servlet 中，您需要使用`ServiceLocator`

在 servlet 类中

```
...
public UserDAO getUserDao() {
   return ServiceLocator.getBean(UserDAO.class);
}
... 
```

同样有多种设计方法`ServiceLocator`，这里是简单的实现。

```
public class ServiceLocator implements ApplicationContextAware {

    private static ApplicationContext applicationContext;

    /**
     * @return Returns the applicationContext.
     */
    public static ApplicationContext getApplicationContext() {
        return applicationContext;
    }

    public static <T> T getBean(Class<T> requiredType) throws BeansException {
        return getApplicationContext().getBean(requiredType);
    }

    /**
     * @param applicationContext The applicationContext to set.
     */
    public void setApplicationContext(ApplicationContext applicationContext) {
        ServiceLocator.applicationContext = applicationContext;
    }

} 
```

最后，所有这些都是独立的，您需要单独阅读，您将在 google 或 Spring 论坛上获得大量准确的帮助。

# macos - 无法为 Mac OS X 构建应用程序，出现错误

> ID：12085493
> 
> 赞同：0
> 
> 时间：2012-08-23T05:50:47.087
> 
> 标签：macos, ant, applescript, dmg

我正在使用 ant 脚本构建 .dmg 文件，而它又使用 applescript 将在下面显示。

下面是我得到的错误。

```
installer.mac:
    [mkdir] Created dir: /Users/damuammu/Desktop/spark-Mac/target/installer
    [mkdir] Created dir:
/Users/damuammu/Desktop/spark-Mac/target/MixTalx_app/.background
     [copy] Copying 1 file to
/Users/damuammu/Desktop/spark-Mac/target/MixTalx_app/.background
  [symlink] ln -s /Applications
/Users/damuammu/Desktop/spark-Mac/target/MixTalx_app/Applications
     [echo] Create tmp.dmg
     [exec] created: /Users/damuammu/Desktop/spark-Mac/target/tmp.dmg
     [echo] Attach tmp.dmg
     [exec] /dev/disk2                  Apple_partition_scheme
     [exec] /dev/disk2s1                Apple_partition_map
     [exec] /dev/disk2s2                Apple_HFS
        /Users/damuammu/Desktop/spark-Mac/target/tmp
     [exec] cp:
/Users/damuammu/Desktop/spark-Mac/build/installer/mac/RightDSStore: No
such file or directory
     [exec] Result: 1
     [exec] mac/dmg_spark.scpt: execution error: Finder got an error:
Can’t set item "Spark.app" of disk "MixTalx_2.6.3" to {140, 250}.
(-10006)

BUILD FAILED
/Users/damuammu/Desktop/spark-Mac/build/build.xml:775: exec returned: 1 
```

下面是小程序

```
on run {volumeName, artPath, theHeight, theWidth, x1, y1, x2, y2, iconSize}
    tell application "Finder"
        tell disk (volumeName as string)
            open

            delay 2

            set dsStore to "\"" & "/Volumes/" & volumeName & "/" & ".DS_STORE\""

            tell container window
                set current view to icon view
                set toolbar visible to false
                set statusbar visible to false
                set the bounds to {10, 10, 658, 482}
                set statusbar visible to false
            end tell

            set opts to the icon view options of container window
            set the arrangement of opts to not arranged
            set the icon size of opts to 128
            --iconSize
            set background picture of opts to file ".background:dmgBackground.png"

            -- Icon positions
            delay 2
            set position of item "Spark.app" to {140, 250}
            set position of item "Applications" to {395, 250}
            delay 2

            update without registering applications
        end tell

        delay 10
    end tell
end run 
```

请任何人都可以就这个问题提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:22:45.490

在运行 AppleScript 之前，错误发生在您的 ant 脚本中。错误在这里：

```
 [exec] cp:
/Users/damuammu/Desktop/spark-Mac/build/installer/mac/RightDSStore: No
such file or directory 
```

AppleScript 所做的是使您安装的 DMG 卷看起来很漂亮。由于并非所有内容都正确放入 DMG，Applescript 后来失败了：

```
 [exec] mac/dmg_spark.scpt: execution error: Finder got an error:
Can’t set item "Spark.app" of disk "MixTalx_2.6.3" to {140, 250}.
(-10006) 
```

但是，您需要做的是修复因第一个错误而失败的 ant 脚本。

# android - 基于 2 个字段通过 contentProvider 批量插入/更新

> ID：12085503
> 
> 赞同：2
> 
> 时间：2012-08-23T05:52:20.973
> 
> 标签：android, sqlite, android-contentprovider, batch-insert, batch-updates

我正在创建一个 contentProvider ，并且我希望能够使用单个批处理操作向它发送多个数据库记录（contentValues）以插入或更新到单个表中。

我怎么做？

batchInsert 仅用于插入，但这是否意味着插入已经存在的东西不会做任何事情？

另外，更新操作有没有办法使用特殊约束？例如，我需要忽略主键并根据另外两个唯一的字段进行更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T12:32:57.133

“batchInsert 仅用于插入”：这是真的，但您可以在 ContentProvider 中覆盖它以执行 UPSERT（插入/更新），具体取决于传递给 batchInsert 的 URI。

以下是我目前用于对时间序列数据执行批量插入的一些工作代码（诚然，我只是删除了任何阻碍而不是更新的内容，但您可以轻松地将其更改为您自己的目的。）。

还要注意sql事务的使用；这极大地加快了这个过程。

```
 @Override
public int bulkInsert(Uri uri, ContentValues[] values) {
    SQLiteDatabase sqlDB = database.getWritableDatabase();
    switch (match(uri)) {
    case ONEPROGRAMME:
        String cid = uri.getLastPathSegment();
        int insertCount = 0;
        int len = values.length;
        if (len > 0) {
            long start = values[0].getAsLong(Programme.COLUMN_START);
            long end = values[len - 1].getAsLong(Programme.COLUMN_END);
            String where = Programme.COLUMN_CHANNEL + "=? AND " + Programme.COLUMN_START + ">=? AND "
                    + Programme.COLUMN_END + "<=?";
            String[] args = { cid, Long.toString(start), Long.toString(end) };
            //TODO use a compiled statement ?
            //SQLiteStatement stmt = sqlDB.compileStatement(INSERT)
            sqlDB.beginTransaction();
            try {
                sqlDB.delete(tableName(PROGRAMME_TABLE), where, args);
                for (ContentValues row : values) {
                    if (sqlDB.insert(tableName(PROGRAMME_TABLE), null, row) != -1L) {
                        insertCount++;
                    }
                }
                sqlDB.setTransactionSuccessful();
            } finally {
                sqlDB.endTransaction();
            }
        }
        if (insertCount > 0)
            getContext().getContentResolver().notifyChange(Resolver.PROGRAMME.uri, null);
        return insertCount;

    default:
        throw new UnsupportedOperationException("Unsupported URI: " + uri);
    }
} 
```

# android - Nexus 7 退格键未进入 GLSurfaceView

> ID：12085505
> 
> 赞同：0
> 
> 时间：2012-08-23T05:52:36.603
> 
> 标签：android, glsurfaceview, onkeypress, backspace, nexus-7

我有一个扩展 GLSurfaceView 的类。我已经处理了这个表面视图的关键事件。除 Nexus 7 之外的所有其他设备上的所有键都可以正常工作 在 Nexus 7 内置键盘上的退格键没有给出事件。但是如果使用第三方键盘，那么退格键事件绝对没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:08:00.197

找到解决方案 从使用 android:targetSdkVersion="16" 移回 android:targetSdkVersion="15"

# android - 如何在 android 设备中获取网络适配器的名称

> ID：12085507
> 
> 赞同：1
> 
> 时间：2012-08-23T05:52:38.510
> 
> 标签：android, networking

我想在 android 设备中检索网络适配器的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:02:56.003

列出 android 设备中所有网络接口的最简单方法是执行以下命令：

```
adb shell ls /sys/class/net 
```

# javascript - 从另一个页面显示隐藏的 div onclick

> ID：12085511
> 
> 赞同：3
> 
> 时间：2012-08-23T05:53:05.150
> 
> 标签：javascript, html

我有两页。一个是

```
<html>
<head>
<script language="javascript">
  function toggleDiv(divid){
   if(document.getElementById(divid).style.display == 'none'){
  document.getElementById(divid).style.display = 'block';
}else{
  document.getElementById(divid).style.display = 'none';
 }
}
</script>
</head>
<body>

<a name="div1" href="javascript:;" onmousedown="toggleDiv('div1');"><p><b>Section 1</b>      </p></a>
<div id="div1" style="display:none">
Content for section 1.
</div>
<a name="div2" href="javascript:;" onmousedown="toggleDiv('div2');"><p><b>Section 2</b></p></a>
<div id="div2" style="display:none">
Content for section 2.
</div>
</body>
</html> 
```

在其他页面上，我有：

```
<html>
<head>
<title>Test</title>    
</script>
</head>
<body>
<a href="main.html#iv2">Section 2</a>
</div>

<script type="text/javascript">
if ( location.hash.length > 1 )
{
    toggleDiv( location.hash.substring(1) );
}
</script>
</body>
</html> 
```

我想在这里实现的是，当我点击第二页上的“Section 2”时，主页面将打开并显示“div2”内容。上面的代码对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:59:54.907

id 中缺少 d

```
<a href="main.html#div2">Section 2</a> 
```

这个脚本应该在第 1 页

```
<script type="text/javascript">
if ( location.hash.length > 1 )
{
    toggleDiv( location.hash.substring(1) );
}
</script> 
```

希望这会有所帮助

这是您的第 1 页（main.html）的完整代码

```
<html>
<head>

</head>
<body>

<a name="div1" href="javascript:;" onmousedown="toggleDiv('div1');"><p><b>Section 1</b>      </p></a>
<div id="div1" style="display:none">
Content for section 1.
</div>
<a name="div2" href="javascript:;" onmousedown="toggleDiv('div2');"><p><b>Section 2</b></p></a>
<div id="div2" style="display:none">
Content for section 2.
</div>
</body>

<script type="text/javascript">
if ( location.hash.length > 1 )
{
    toggleDiv( location.hash.substring(1));
}
 function toggleDiv(divid){
  alert(divid);
   if(document.getElementById(divid).style.display == 'none'){
  document.getElementById(divid).style.display = 'block';
}else{
  document.getElementById(divid).style.display = 'none';
 }
}
</script>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:09:46.463

你不能像那样调用Javascript函数……那不行……你需要在页面的onLoad事件中调用函数……就像

```
<body onload="toggleDiv('div2')"> 
</body> 
```

**别的**

打开弹出窗口并使用“Window opener”属性。请参阅此链接[http://www.w3schools.com/jsref/prop_win_opener.asp](http://www.w3schools.com/jsref/prop_win_opener.asp)

# jquery - jquery mobile listview忽略父div css规则

> ID：12085515
> 
> 赞同：0
> 
> 时间：2012-08-23T05:53:28.353
> 
> 标签：jquery, css, listview, jquery-mobile

我正在尝试将 jquery mobile listview 放在父 div 中，但 listview 忽略任何父 css 规则。

```
<div data-role="page" id="profile">
    <div data-role="content">
     <div class="content_white">
        <ul data-role="listview" data-theme="c"  class="custom-list">
            <li>test</li>
            <li>one</li>
        </ul>
     </div>
   </div>
 </div> 
```

父 div 具有以下 CSS 规则

```
.content_white{
position:relative;
margin-bottom:5% !important;
background-color:#ffffff;
border:1px solid #cccccc;
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px; 
```

}

基本上我希望列表视图嵌套在父 div 中

[JS小提琴答案](http://jsfiddle.net/e9Anb/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:29:22.890

将列表中的边距居中似乎可以解决问题

```
.custom-list{
margin: 0 auto !important;
padding-bottom:1%;
 } 
```

# ruby - 远程方法理解？

> ID：12085517
> 
> 赞同：0
> 
> 时间：2012-08-23T05:53:38.207
> 
> 标签：ruby, ruby-on-rails-3

在轨道 3

使用`remote`方法表单提交时，它会以相同的表单值影响数据库两次。

控制器文件：

```
 @user_message = UserMessage.new(params[:user_message])
 if  @user_message.save
   render :update
 else
   render :nothing => true
 end 
```

查看文件：

```
<%= form_tag ('/feedback/user_message'), :method =>'post',  :remote=> true, :id=>'user_message' do%>
      <%= hidden_field_tag 'user_message[user_id]', @user.user_id %>
      <h2><%= @question %></h2>
      <%= text_area_tag 'user_message[msg]',"",  :size=>"40x5" %>
      <%= submit_tag  "Submit"%>
  <% end %> 
```

当我点击提交按钮时，它会在表上创建两条记录。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:11:31.113

最有可能与资产管道有关的问题

您应该在之前预编译资产管道。

这将创建两个 rails.js 副本，一个在您的资产中，一个在 application.js 中

这是 Rails 3 中的错误或陷阱，请参见此处[http://www.ruby.code-experiments.com/blog/2011/10/another-gotcha-with-the-rails-31-asset-pipeline-or-why -are-my-jquery-ujs-ajax-requests-triggered-twi.html](http://www.ruby.code-experiments.com/blog/2011/10/another-gotcha-with-the-rails-31-asset-pipeline-or-why-are-my-jquery-ujs-ajax-requests-triggered-twi.html)

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:22:51.500

可能有几件事可能导致这种情况

可能是 ujs 文件被包含两次 可能就像

```
//= require jquery_ujs // expected to load from the rails-jquery gem
//= require_tree .     // if any file is present in assets directory hierarchy it will be loaded 
```

或者只是一个让你睡不着觉的虫子

[https://github.com/rails/jquery-ujs/issues/208](https://github.com/rails/jquery-ujs/issues/208)

查看更多解决方案

[Jquery Rails 3 ...表单提交两次...删除两次...帮助](https://stackoverflow.com/questions/6747236/jquery-rails-3-form-submits-twice-deletes-twice-help)

[Rails 3.1远程请求提交两次](https://stackoverflow.com/questions/7721502/rails-3-1-remote-requests-submitting-twice)

这也可能与对资产管道何时以及如何使用 pecompiled 资产的理解有关。

我总是在开发模式下使用这个配置

`config.server_static_assets = false`

这会强制应用从应用资产中调用资产

并在生产模式下使用来自公共的预编译资产

# objective-c - NSScrollView 中的 NSOpenGLView？

> ID：12085523
> 
> 赞同：2
> 
> 时间：2012-08-23T05:54:27.850
> 
> 标签：objective-c, opengl, scroll, nsscrollview, nsopenglview

我的 NSOpenGLView 有缩放方法。如果图像被放大，则 NSOpenGLView 帧大小、视口等正在增加。如果 NSOpenGLView 被缩小（帧大小、视口等正在减少），也会发生同样的事情。所以我需要，如果图像被放大，NSOpenGLView 比我的窗口大，滚动条应该出现。所以我认为将 NSOpenGLView 放到 NSScrollView 将是我的解决方案。但事实并非如此。它不起作用。那我怎么能做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T10:14:56.030

在 Interface Builder 中将 NSOpenGLView 放入 NSScrollView 时，必须重新定义自定义视图的方法：

*   `- (void)awakeFromNib` - 这里是 OpenGL 和其他初始化。
*   `- (void)drawRect: (NSRect) dirtyRect`- 这里是渲染。
*   `- (void)setFrame:(NSRect)frame`- 这是对改变框架大小的反应。

作为视口使用 visibleRect 的大小：

```
glViewport(0,
           0,
           self.visibleRect.size.width,
           self.visibleRect.size.height); 
```

如果您的视图正在闪烁，请重新定义方法`resizeWithOldSuperviewSize`：

```
- (void)resizeWithOldSuperviewSize:(NSSize)oldSize {
}; 
```

但它是hack，如果使用它，最好自定义实现剪辑视图。

如果要缩放 OpenGL 视图，只需更改其帧大小。

# c# - 如何在 ContentPart 视图中显示和编辑合并字段？

> ID：12085525
> 
> 赞同：0
> 
> 时间：2012-08-23T05:54:30.283
> 
> 标签：c#, .net, asp.net-mvc, razor, orchardcms

我`ContentPart`在一个模块中创建了一个，并在`Migration`我使用`.WithField`方法将一个添加`EnumerationField`到我的`ContentPart`：

```
contentPartDefinitionBuilder.WithField(
                "DealType",
                fieldBuilder =>
                {
                    fieldBuilder.OfType(typeof(EnumerationField).Name);
                    fieldBuilder.WithSetting("Options", "Op1" + Environment.NewLine +
                                                        "Op2" );
                    fieldBuilder.WithSetting("ListMode", "Radiobutton");
                }); 
```

我的问题是如何在文件中创建显示以及在文件中为字段创建`Views/MyPart_Display.cshtml`编辑器？`Views/MyPart_Edit.cshtml``DealType`

**编辑：**正是我想要的只是一种`Html.EditorFor(m = > m.DealType)`为 DealType 字段生成默认编辑器（枚举）的方法。通过这种方式，我可以用自定义 wapper 包装它`<div class="dealtype-field-wrapper" />`。如果我们可以通过`Placement.info`机制做到这一点，它可以解决我的问题。当然我知道我们可以`ContentPart`通过放置来扭曲任何东西：

```
<Match ContentType="Widget">
    <Place Parts_Common_Body="Content:5;Wrapper=Wrapper_DealTypeContent" />
</Match> 
```

但是经过大量搜索后，我没有找到包装字段的解决方案。

# iphone - 将 UIImage 从一个类传递到另一个类

> ID：12085526
> 
> 赞同：0
> 
> 时间：2012-08-23T05:54:37.147
> 
> 标签：iphone, ios, uiimage, avfoundation

我正在使用[本教程](http://www.musicalgeometry.com/?p=1297)使用 AVFoundation 捕获图像。我正在尝试将捕获的图像从 CaptureSessionManager（一个 NSObject 类）返回到 AROverlayViewController。我该怎么做呢？

我尝试放入`@property (nonatomic, retain) UIImage *finalImage;`AROverlayViewController.h，然后在 CaptureSessionManager.m 中进行设置`arController.finalImage = image;`，但日志显示 finalImage 为`null`.

关于如何最好地做到这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:20:48.767

**CaptureManager**类上有一个属性

 **```
@property (nonatomic, retain) UIImage *stillImage; 
```

您可以通过此代码获得

```
UIImage *final = [captureManager stillImage]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:17:06.670

我终于明白了 - 添加`UIImage *test = [captureManager stillImage];`AROverlayViewController.m。上帝，这让我永远。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:17:59.963

```
NSData *imageData;

- (void) imagePickerController: (UIImagePickerController*) reader
 didFinishPickingMediaWithInfo: (NSDictionary*) info
{
        [self performSelectorInBackground:@selector(showLoading) withObject:nil];

        UIImage *capturedImage = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
       imageData = [[NSData alloc]init]; 
       imageData = UIImagePNGRepresentation(capturedImage);
       [imageData retain];

       [reader dismissModalViewControllerAnimated: YES];

} 
```

您可以将此 NSData 传递给您可以访问此图像的其他视图。**

# android - 服务器多次尝试接收数据包

> ID：12085527
> 
> 赞同：0
> 
> 时间：2012-08-23T05:54:42.653
> 
> 标签：android, google-tv

这一直困扰着我一段时间，我不太确定如何解决这个问题。

我遇到的问题是在服务器实际接收数据包之前需要多次尝试推送数据包

这是我在客户端上的代码（服务器是相同的，但发送/接收是相反的），服务器从数据包中获取客户端 IP 以发送返回数据包

```
class MainTask extends AsyncTask<Void, Void, Void> {
ProgressDialog progress = null;
Context context = null;
  public MainTask(ProgressDialog progress, Context context) {
    this.progress = progress;
    this.context = context;
  }

public void onPreExecute() {        
    progress.show();
  }

  public Void doInBackground(Void... unused) {
      // Send UDP Packet
        String messageStr="Hello Android!";
        int server_port = 12441;
        DatagramSocket s = null;
        DatagramPacket p = null;
        InetAddress local = null;
        Log.i("EyeceBoxService", "Sending packet");
        try {
            s = new DatagramSocket();
            local = InetAddress.getByName("192.168.0.4");
            int msg_length=messageStr.length();
            byte[] message = messageStr.getBytes();
            p = new DatagramPacket(message, msg_length,local,server_port);
            s.send(p);
            Log.i("EyeceBoxService", "Packet Sent!");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
          // Receive UDP Packet
        byte[] message = new byte[1500];
        try {
            //progress.setMessage("Retrieving Discovery Information...");
            p = new DatagramPacket(message, message.length);
            s = new DatagramSocket(server_port);
            Log.i("EyeceBoxService", "Waiting for packet");
            s.receive(p);
            String address = p.getAddress().toString();
            Log.i("EyeceBoxService", "Server IP address" + address);
            //progress.setMessage("Done...");
            //MainActivity.buildNotification(context, address);
            progress.dismiss();
            s.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;      
        }

  public void onPostExecute(Void unused) {
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:31:53.897

尝试确定问题出在服务器硬件、客户端硬件、Android 框架、网络、路由器配置还是您的代码中。尝试使用一些调试工具，如wireshark、netcat、ipsend，看看实际发送、接收了哪些数据包，是否通过命令行发送数据包等。

# performance - Spring Batch - 性能调优

> ID：12085529
> 
> 赞同：1
> 
> 时间：2012-08-23T05:54:51.790
> 
> 标签：performance, spring, spring-batch

我们开发了一个 spring 批处理应用程序，其中有两个流程。1\. 前进 2\. 后退。我们只使用文件读/写不涉及数据库。

1.  Forward Scenario : 输入文件将有 22 个字段的记录。通过进行序列号生成和添加少量填充字段等操作，将 22 个字段转换为 32 个字段。根据国家代码，输出将被分成最多 3 个。每个块将有 250K 记录。（如果记录以百万为单位，将为同一国家/地区生成多个文件）。

    800 万条记录耗时 36 分钟。

    800 万条记录将在一个文件中。

    我们正在使用我们正在使用的弹簧批处理线程 1000 个线程。

2.  后向流：输入文件的每条记录将有 82 个字段。这82个字段要转换成86条记录。这两个字段将被添加在这两个字段之间，这两个字段取自正向流输入文件。其他字段只是简单地复制和粘贴。错误记录也要写入错误文件。错误记录只不过是前向流的实际输入记录。为了跟踪，我们将序列号和实际记录保存在一个文件中，这是在前向流本身中完成的。我们正在反向流中获取持久文件并比较序列号，如果缺少任何内容，那么我们将通过键值对写入错误记录。这个过程是在回流完成后完成的。

    输入文件的最大大小为 250K。

    800 万条记录需要 1 小时 8 分钟，这太糟糕了。在此流程中将有 32 个文件（每个 250K）供输入。向后没有使用线程。我不知道线程使用情况如何。我试过了，但这个过程挂了。

服务器配置：

*   12 个 CPU 和 64 GB Linux 服务器。

    由于我们有 12 个 CPU/64GB RAM，你们能否在这方面帮助提高性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:07:34.240

您已经在使用 1000 个线程，这是一个非常高的数字。我已经对 spring 批处理作业进行了微调，这就是我所做的 1\. 减少网络流量 - 尝试减少每个进程中对数据库或文件系统的调用次数。您能否一次获得所有可能的信息并将其保存在内存中以供线程使用？我使用 org.apache.commons.collections.map.MultiKeyMap 来存储和检索数据。例如，在您的情况下，您需要序列号比较。因此，在开始该过程之前，将所有序列号放入一张地图中。您可以将 ID（如果不是太多）存储到步骤执行上下文中。

1.  写得少——把你需要写的所有信息保存一段时间，然后在最后写。

2.  将进程结束时未使用的对象设置为 null 以加快 GC

3.  通过 VisualVm 或 Jconsole 检查您的 GC 频率。当您的进程正在运行时，您应该会看到频繁的 GC 发生，这意味着正在创建对象并收集垃圾。如果您的内存图不断增加，则说明有问题。

# ms-solver-foundation - 将二维双精度数组绑定到 MS Solver Foundation 中的参数

> ID：12085530
> 
> 赞同：1
> 
> 时间：2012-08-23T05:54:55.253
> 
> 标签：ms-solver-foundation

如何将二维数组绑定到 Solver Foundation 中的参数？尝试将数组定义为 double(,); 作为 double()() 和元组列表 (double, i, j)。

我也尝试实现 SetBinding 的扩展方法，这里建议；[http://blogs.msdn.com/b/solverfoundation/archive/2010/06/28/simpler-data-binding-using-linq-and-extension-methods.aspx](http://blogs.msdn.com/b/solverfoundation/archive/2010/06/28/simpler-data-binding-using-linq-and-extension-methods.aspx)

目前在倒数第三行失败；m_cov.SetBinding(CovMatrix)，出现错误“此方法仅在对具有 0 索引的参数调用时有效”

我正在使用最新版本并在 vb.net 中工作。任何帮助表示赞赏。

谢谢，尤格

```
Public Sub ERC()

        Dim m_i = New [Set](Domain.Any, "I")
        Dim m_j = New [Set](Domain.Any, "J")
        'Dim m_allocation As Decision
        Dim CovMatrix As Double()() = {New Double() {0.1, 0.15, 0.4}, New Double() {0.3, 0.5, 0.8}, New Double() {0, 0.33, 0.05}}

        Dim m_context As SolverContext = SolverContext.GetContext()
        Dim m_model As Model = m_context.CreateModel()
        m_model.Name = "ERC"

        ' Create a Parameter for Cov
        Dim m_cov = New Parameter(Domain.Real, "Cov", m_i, m_j)
        m_model.AddParameter(m_cov)
            ' Create a Decision for Allocation
        Dim m_allocation As Decision = New Decision(Domain.RealRange(-1.0, 1.0), "Allocation", m_i)
        m_model.AddDecision(m_allocation)
        ' Add Constraint for SumWts
        m_model.AddConstraint("SumWts", (Model.Sum(Model.ForEach(m_i, Function(i_1) Model.Abs(Model.Sum(m_allocation(i_1)))))) = 1.0)
        ' Add Goal for Variance
        m_model.AddGoal("Variance", GoalKind.Minimize, Model.Sum(Model.ForEach(m_i, Function(i_2) Model.ForEach(m_j, Function(j_3) Model.Power((Model.Abs(Model.Sum(Model.ForEach(m_j, Function(j_4) Model.Product(m_cov(i_2, j_4), m_allocation(j_4), m_allocation(i_2))))) - Model.Abs(Model.Sum(Model.ForEach(m_j, Function(j_6) Model.Product(m_cov(j_3, j_6), m_allocation(j_6), m_allocation(j_3)))))), 2.0)))))

        m_cov.SetBinding(CovMatrix)
        m_context.Solve()
        Debug.Print(m_allocation.GetValuesByIndex().ToString)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T12:32:54.223

[Nathan Brixius 提供的帮助器类](http://blogs.msdn.com/b/solverfoundation/archive/2010/06/28/simpler-data-binding-using-linq-and-extension-methods.aspx)使 SetBinding 更容易。他的助手类在 C# 中，所以我继续将您需要的特定助手函数转换为 VB（见下文）。

例外是告诉您该`SetBinding`函数需要知道传入数据的索引。MSF 是为处理通用域而构建的，这意味着它不遵守普通数组索引。您必须明确指出索引信息。

您的代码的问题是您试图在没有任何额外索引数据的情况下传入原始数组。要在正常的一维数组上解决此问题，您可以使用`KeyValuePair(Of Integer, Double)`. 在这种情况下，对于矩阵，您需要一个`Tuple (index1, index2, Double)`. 本质上，您需要将 3x3 矩阵展平为 9 个三元组，根据一对索引指定每个值。

这是将矩阵转换为列表的VB函数：

```
Private Function ToIEnumerable(Of T)(matrix As IEnumerable(Of IEnumerable(Of T))) As IEnumerable(Of Tuple(Of Integer, Integer, T))
    Dim m = matrix.[Select](Function(row, i) row.[Select](Function(cell, j) New Tuple(Of Integer, Integer, T)(i, j, cell)))
    Dim cells = From cell In m.SelectMany(Function(c) c)
    Return cells
End Function 
```

将此函数包含在您的类中，然后像这样更改 SetBinding 代码行：

```
m_cov.SetBinding(ToIEnumerable(CovMatrix), "Item3", "Item1", "Item2") 
```

`Tuple`注意物品的顺序！按照 MSF 约定，值字段位于索引之前。解决方案输出中返回相同的顺序（当您希望迭代结果集上的决策时，请务必注意）。

`ToIEnumerable(data)`如果您转换 Nathan 的辅助类的其余部分，他会通过重载 SetBinding 函数本身以抽象出调用以及键/值标识符排序，从而使其变得更加容易。然后你就可以简单地调用`model.SetBinding(rawMatrix)`.

很光滑，嗯？;)

# xamarin.ios - 是否有用于 Xamarin Stack 的跨平台库来跟踪 Google Analytics 的使用情况？

> ID：12085533
> 
> 赞同：4
> 
> 时间：2012-08-23T05:55:03.527
> 
> 标签：xamarin.ios, google-analytics, xamarin.android, tracking, xamarin

我想使用 Google Analytics 跟踪使用 Xamarin 工具（MonoTouch、MonoDroid、Windows Phone）开发的跨平台应用程序的使用情况。虽然有一个[MonoTouch](https://github.com/mono/monodroid-bindings)绑定，但似乎我需要自己创建 MonoDroid 绑定（请参阅[此提示](https://bugzilla.xamarin.com/show_bug.cgi?id=4892)）。我没有喷气调查WP。

因为我的一些跟踪发生在平台之间的共享代码中——并且为了一般的易用性，我正在寻找一个可以在所有三个项目中使用的通用库。周围有这样的东西吗？如果没有，是否存在一些隐藏的问题，为什么不能轻易创建这样的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T15:58:24.013

我知道这是一个较旧的线程，但我想我会补充一点，现在有一个用于 Google Analytics 的组件： http: [//components.xamarin.com/view/googleanalytics](http://components.xamarin.com/view/googleanalytics)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T20:55:09.447

您应该能够使用 C# 中的 Google API 自己发出 Google Analytics 请求。

这将适用于所有三个平台，但我还没有找到一个开源项目。网上有几个代码示例，但是[这里有一个链接](http://www.jphellemons.nl/post/Working-with-the-Google-Analytics-API-with-C.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T05:16:09.010

我发现了一个本机 C# 实现，它自己生成跟踪请求，而不是将来自 Google 的平台特定跟踪库包装到一个通用 API 中：[https ://github.com/maartenba/GoogleAnalyticsTracker](https://github.com/maartenba/GoogleAnalyticsTracker)

不幸的是，代码不会累积跟踪请求以间隔发送它们，但就我的目的而言，它就足够了。

还有另一种实现，其中跟踪方法和请求调度是分开的（但不会自动执行）：[http ://www.diaryofaninja.com/projects/details/ga-dot-net](http://www.diaryofaninja.com/projects/details/ga-dot-net)

# php - 会话值不会传递到下一页

> ID：12085536
> 
> 赞同：1
> 
> 时间：2012-08-23T05:55:12.093
> 
> 标签：php

基本上我想通过 url 获取一个 id 发送（例如 www.website.com/?id=432432）并将它带到我的网站上，直到用户点击联系页面。我创建了一个变量和一个会话变量

```
session_start();
$getId = $_GET["id"];
$_SESSION['session_browser_test'] = $getId;
$adv_id = $_SESSION['session_browser_test']; 
```

并使用

```
echo $adv_id; 
```

在我的 index.php Joomla 模板上，因此它适用于所有页面。

但问题是当我访问 www.website.com/?id=432432 时，它会在我的网页上回显 id，但是如果我单击下一个链接转到另一个页面（例如 www.website.com/nextPage ) 它不保存上一页的会话值。这是为什么？以及如何将 ID 携带到整个站点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:01:46.380

您可能不会从下一页的 URL 中获得 id

```
echo $getId; 
```

相反，您需要使用会话中的 id，例如，

```
$_SESSION['session_browser_test']; // your id stored in session 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:58:50.653

在每个页面中启动会话

```
 session_start(); 
```

为了在会话中访问变量，您必须调用 $_SESSION 变量。

```
echo $_SESSION['session_browser_test']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:07:15.623

HTTP 是无状态的，因此您必须做一些事情来记住整个网站的变量。确保正确使用 session ，例如 session_start(); 当您通过 get 方法发送您的 id 时，它可以工作，但是当您转到任何其他页面时，记住这一点没有任何意义。使用它通过页面发送 id：

```
<?php echo get_permalink(910); ?>?userid=<?php echo $value['userId'];?> 
```

在 url 中发送并在下一页上使用：

```
$sql = "select * from `wp_pelleresuser` where userId =".$_GET['userid']; 
```

使用这种方法，您可以在您想要的每个页面上使用单个变量，而无需使用会话。尝试 google 到 wordpress 如何在不使用会话的情况下通过所有页面管理变量。它会帮助你。快乐编码！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T06:20:00.700

开始

```
session_start(); 
```

（如果未启动）在应用程序根目录中的 index.php 中（会话可能会在每个页面上启动），然后调用（如果需要）：

```
$_SESSION['session_browser_test']; 
```

而不是将此 sess var 分配给您自己的变量，然后在不同的地方调用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T03:18:43.413

```
if(isset($_GET["adv_id"])){ 
  $_SESSION['session_browser_test2'] = $_GET["adv_id"];
  $adv_id = $_SESSION['session_browser_test2'];
}
else {
  $adv_id = $_SESSION['session_browser_test2'];
} 
```

# c++ - 从 C++ 中的类构造函数调用头文件中定义的函数

> ID：12085539
> 
> 赞同：0
> 
> 时间：2012-08-23T05:55:27.170
> 
> 标签：c++, header, lnk2019

我有一个头文件，我们`header1.h`用函数的定义来调用它，比如说`myFunc()`在里面。我的 C++ 项目有一个源文件，我们称之为`main.cpp`头文件`main.h`。我已经包含`header1.h`在了`main.h`，然后又包含`main.h`在了`main.cpp`。

在`main.cpp`我有一个类构造函数让我们调用它`MyClass`，我有这个代码：

```
MyClass:MyClass(...)
.
.
{
  .
  .
  f = myFunc(...);
  .
} 
```

当我编译代码时，我得到这个错误：

```
error LNK2019: unresolved external symbol _myFunc referenced in function 
```

这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:57:37.280

那是一个*链接器*错误。包含定义的文件`myFunc`没有被编译，或者您没有链接到导出它的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:57:44.810

你有实现`myFunc`吗？您是否只在标题中**声明而没有定义它？** `myFunc()`

**您可以通过定义**函数来解决此问题。

```
void myFunc(); // Declaration
void myFunc() {} // Definition 
```

导致此错误的原因是符号**没有**`myFunc`定义**，**因此链接器无法**解析**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T06:00:12.517

您可能会错过向`myFunc`链接器提供库/目标文件。

# java - 使用嵌入数据解析 XML

> ID：12085543
> 
> 赞同：0
> 
> 时间：2012-08-23T05:56:09.113
> 
> 标签：java, android, xml-parsing

我正在尝试使用 android 解析 XML。我的问题是 XML 的格式很奇怪。我试图解析的全部数据都位于一个元素内。

这是一个例子：

```
<a name="3"></a>
<div class="series_alpha">
<h2 class="series_alpha"><a href="#top">3</a></h2>
<ul class="series_alpha"><li><a href="/3-banme-no-kareshi">3 Banme no        Kareshi</a><span class="mangacompleted">[Completed]</span></li>
<li><a href="/1074/3-gatsu-no-lion.html">3 Gatsu no Lion</a></li>
<li><a href="/990/337-byooshi.html">337 Byooshi</a></li>
<li><a href="/360-degrees-material">360 Degrees Material</a></li>
<li><a href="/37-degrees-kiss">37 Degrees Kiss</a><span class="mangacompleted">[Completed]</span></li>
<li><a href="/184/3x3-eyes.html">3x3 Eyes</a></li>
</ul>
<div class="clear"></div>
</div> 
```

XML 是[该](http://www.mangapanda.com/alphabetical)网页的一部分源代码。我试图检索的数据位于`<li>`标签中，特别是链接引用和漫画名称。但我不知道如何将链接与标题分开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:44:31.273

查找后，我发现标签内的信息被称为“属性”（我知道我是菜鸟），并且通过一些谷歌搜索发现该`attributes.getvalue("name of attribute here")`方法是我正在寻找的。

来源：[XML Parsing to get Attribute Value](https://stackoverflow.com/questions/6594184/xml-parsing-to-get-attribute-value)

# ios - 音频 (AVAudioPlayer) 在 iPhone 4 上停止视频循环 (MPMoviePlayerController)

> ID：12085550
> 
> 赞同：2
> 
> 时间：2012-08-23T05:56:36.217
> 
> 标签：ios, audio, video, iphone-4

我开发了一个播放音频和视频的体育锻炼应用程序。由于音频和视频来自不同的文件（音频取决于语言，视频不是），我使用 AVAudioPlayer 播放音频，使用 MPMoviePlayerController 播放视频（没有音轨）。视频必须循环播放 (moviePlayer.repeatMode = MPMovieRepeatModeOne)。

通常首先播放音频（练习的口头解释），几秒钟后开始播放视频（显示练习）​​。这就像 iPhone 4S 上的魅力（当然，在模拟器中），音频播放并并行视频循环，直到它停止。

但是，在 iPhone 4（和 iPad 1）上，如果视频启动时音频播放器仍在播放，则视频**不会**进入循环，即在第一次运行后停止。（如果在音频停止播放**后**开始播放视频，则循环在 iPhone 4 上也可以正常工作）。

如何让 MPMoviePlayerController 在 iPhone 4 上也执行循环？

# php - CakePHP 2.2.1 (stable) 中的 $this->auth->authorize (cakephp 1.3) 发生了什么变化？

> ID：12085556
> 
> 赞同：1
> 
> 时间：2012-08-23T05:57:00.563
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-2.0, cakephp-2.1

我正在将应用程序从 CakePHP 1.3 升级到 CakePHP 2.2.1 。

我们正在实现 ACL，在 AppController 中我看到了

```
if (isset($this->Auth)) {
            if ($this->use_acl) {
                $this->Auth->authorize = 'actions';
            } 
```

作为变量声明，我已经对以下内容进行了更改：

```
var $components = array(
        'Auth' => array(
            'authenticate' => array(
                'Form' => array(
                'fields' => array('username' => 'email', 'password' => 'password')
                )
            ),
            'loginAction' => array(
                'admin' => false, 'prefix' => false, 'controller' => 'users', 
                'action' => 'login')
        ),
        'Session', 'Facebook.Connect'); 
```

是否还需要我保留：

```
$this->Auth->loginAction = array('admin' => false, 'prefix' => false, 'controller' => 'users', 'action' => 'login'); 
```

代码工作可能听起来很难看，但升级就是这样！;)

另外，我可以像在 1.3 中那样在 2.2.1 中使用 $this->Auth-> 'auth properties' 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:23:51.060

像往常一样，开始处理此类问题的最佳位置是[手册](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)。然后，发布您的测试结果，而不是您的代码和一个广泛的问题。

也就是说，您发布的第一个代码块看起来像您 end 的自定义变量`$this->use_acl`。我从未见过在 CakePHP 中使用过它，所以在你的应用程序中有一些标记你的设置以使用“动作”。

第二个代码块看起来很标准。它应该工作。是的，您仍然需要指定登录操作，以便当用户尝试导航到受保护的页面时，他/她将被重定向到登录。也就是说，登录过程存在差异，如上面的手动链接中所述。您应该看看密码何时散列和 login() 函数本身的差异，因为它们都已更改。就两个版本之间的身份验证差异而言，您使用 ACL 的事实并不重要。

你的最后一个问题`Also, can I use the $this->Auth-> 'auth properties' in 2.2.1 as it was possible in 1.3 ?`，答案是肯定的。您应该查看`AuthComponent.php`lib/Cake 文件夹中的文件。它对您在此处询问的信息进行了大量评论。甚至还有例子。

# html - 行高文本区域

> ID：12085557
> 
> 赞同：7
> 
> 时间：2012-08-23T05:57:02.510
> 
> 标签：html, textarea

目前，我的文本区域是这样显示的： [点击这里查看图片](https://www.dropbox.com/s/ws2g64ee2pmbgbq/textarea.PNG)。

我希望每条线之间的高度不那么重要。

**更新：**

我在css文件中尝试了行高：

```
textarea{ line-height: 120%; } 
```

但它不起作用，只是降低了 textarea 的高度，并没有降低行之间的高度。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:05:50.693

您可以尝试`percentage`,`em`等`px`并为您选择一个。某些浏览器（例如 firefox）对此有一些错误。

***[这](http://jsfiddle.net/blasteralfred/WSAdq/)***是一个工作现场演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-04T14:02:49.060

将 padding-top 设置为 0px 应该重置 textarea 的行高

# jquery - 图像未在 HTML 页面的 jQuery load() 中加载

> ID：12085559
> 
> 赞同：3
> 
> 时间：2012-08-23T05:57:06.787
> 
> 标签：jquery, html, ajax, load

我正在使用以下代码在 div 中加载 html 页面，

```
$("#htmlViewer").load("conversion_test/to_convert_3264/"+getPageName(pageCount)+".htm", function(response, status, xhr) {
                   if (status == "error") {
                     /* var msg = "Sorry but there was an error: ";
                     $("#error").html(msg + xhr.status + " " + xhr.statusText); */
                     jAlert('Unexpected Error : Please try again later', 'Alert');
                     pageCount--;
                   }
                 }); 
```

在上面的代码中，我只得到 HTML 文本，但没有得到 CSS 和该页面中的图像。为了获得 CSS，我添加了另一个 Ajax 请求。如果没有这个，在 ajax 调用中加载的页面将不会应用 css 样式。

```
$.ajax({
            url:"conversion_test/to_convert_3264/style.css",
            success:function(data){
                 $("<style></style>").appendTo("head").html(data);
            }
        }) 
```

我不确定这是正确的方法。问题是我在 ajax 调用期间没有得到图像。图片来自`conversion_test/to_convert_3264/images`文件夹。任何帮助是极大的赞赏。如果我需要提供更多详细信息，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:30:37.067

我终于根据@MiikaL 的建议进行了修复。以下是我解决问题的代码。

```
function replaceImageSource() {
       $("img").each( function(){
              $(this).attr({
                 src: 'conversion_test/to_convert_3264/' + $(this).attr('src')
              });
            });
    } 
```

希望这对某人有所帮助。感谢你的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T07:36:36.260

将其写为答案，因此它比评论线程更明显：

问题是调用页面与被调用页面不在同一个文件夹中。目标页面引用具有相对路径的图像，因此当其插入调用页面时，这些引用不再匹配。换句话说，页面的上下文发生了变化。

有两种可能的解决方案：

1.  使用图像的绝对路径，以便上下文无关紧要。
2.  [使用 jQuery 修复接收到的 html 中的路径（Dilip 在他的回答](https://stackoverflow.com/a/12086783/1025176)中自己提出了这个代码）。

# ruby - 用于测试数组无的 RSpec 魔法？方法？

> ID：12085569
> 
> 赞同：2
> 
> 时间：2012-08-23T05:57:55.907
> 
> 标签：ruby, rspec, rspec2

我有一个`Array`/`Enumerable`每个实体都是一个`Hash`. 使用 RSpec 测试“可枚举中的所有条目都不应该有一个名为”的键的最惯用方法是什么`'body'`？

我可以做类似的事情：

```
array.none? {|thing| thing.key? 'body'}.should be_true 
```

或者

```
array.should be_none {|thing| thing.key? 'body'} 
```

...但是必须有更多的 RSpec 方式来执行此操作，对吗？

我似乎找不到合适的[内置 matcher](https://www.relishapp.com/rspec/rspec-expectations/v/2-11/docs/built-in-matchers)。答案是自定义匹配器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:47:36.837

我会用 `responses.should be_none { |response| response.key? 'body' }`

在你给的两个之间。这对于像这样的错误会更有帮助

“预期没有？返回 true”

正如你的第一个例子所说的那样

“预期 False:false 类为真”

我可以看到的第三个选项类似于

```
 keys = responses.map { |response| response.keys }.flatten.uniq
 keys.should_not include "body" 
```

这会给出一个错误，例如

预期 ["foo", "bar", "body"] 不包括 "body"

除此之外，请查看[https://www.relishapp.com/rspec/rspec-expectations/v/2-11/docs/built-in-matchers/satisfy-matcher](https://www.relishapp.com/rspec/rspec-expectations/v/2-11/docs/built-in-matchers/satisfy-matcher)

你可以试试

`responses.should satisfy { |response| not response.keys.include? "body" }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T17:35:15.757

另一种选择是用以下方式改变`be_none`声明`be_any`：

```
responses.should_not be_any { |response| response.key? 'body' } 
```

我会假设结果与`any?`的否定是等价的`none?`。

这主要是一个问题，您认为哪个选项最易于阅读，并且正如 EnabrenTane 所提到的，如果您认为错误消息足够有用。

# php - PHP preg_replace 仅链接

> ID：12085584
> 
> 赞同：0
> 
> 时间：2012-08-23T05:59:31.657
> 
> 标签：php

我正在尝试 preg_replace 来检测字符串中的链接。下面的例子

```
$descriptionlink = "This is a test www.google.com";
$descriptionlink = preg_replace('/.*?\b((?:(?:https?|ftp|file):\/\/|www\.|ftp\.)?[-A-Z0-9+&@#\/%=~_|$?!:,.]*[A-Z0-9+&@#\/%=~_|$]\.[-A-Z0-9+&@#\/%=~_|$?!:,.]*[A-Z0-9+&@#\/%=~_|$]).*?/i', '$1', $descriptionlink); 
```

如果字符串中有一个链接并且只像我想要的那样回显链接，它会很好用。现在，如果字符串只是文本，它将回显文本。如果它没有链接，我不想看到字符串中的文本。

我想要的输出示例

```
input - This is a test www.google.com
output - www.google.com 
```

上面的效果很好，但如果没有链接，它会这样做并回显下面的文本

```
input - This is a test
output - This is a test 
```

如果只是文本，我希望输出为空白。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:12:11.773

这...将替换除链接之外的所有内容...

```
$descriptionlink = preg_replace('/.*?\b((?:(?:https?|ftp|file):\/\/|www\.|ftp\.)?[-A-Z0-9+&@#\/%=~_|$?!:,.]*[A-Z0-9+&@#\/%=~_|$]\.[-A-Z0-9+&@#\/%=~_|$?!:,.]*[A-Z0-9+&@#\/%=~_|$]).*?/i', '$1', $descriptionlink); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:41:39.917

```
$descriptionlink = preg_replace('/.*?((?:(?:https?):\/\/|www\.)[-A-Z0-9+&@#\/%=~_|$?!:,.]*[A-Z0-9+&@#\/%=~_|$]).*?|.*/i', '$1', $descriptionlink); 
```

# html - 以绝对定位框为中心的固定背景图像

> ID：12085586
> 
> 赞同：0
> 
> 时间：2012-08-23T05:59:48.123
> 
> 标签：html, css, background-image, css-position, fluid-layout

有人会帮忙吗？我在 stackoverflow.com 和 Google 上搜索了一周，但没有找到解决问题的方法。你可以猜到我不是 CSS 专家，我承认我可能做错了什么，这就是我愿意同时更改 html 文件和 css 文件的原因。

* * *

我有一个带有固定（绝对定位）页眉、页脚和侧边栏的流畅布局。内容位于带有垂直滚动条的灵活 div 中。我想在包含可滚动内容的 div 和主要内容末尾的静态 div 上固定并居中放置背景图像。不幸的是，无论我为背景图像使用什么 div，背景图像都以视口而不是包含框为中心。

这是代码：

# HTML

```
<body>
  <div class="container">
    <div class="sus">
<!--Header-->
    </div>
    <div class="totul">
      <div class="coloana">
            <!--Sidebar-->
      </div> 
      <div class="dreapta">     <!--Here I want the fixed centered background image-->
      <div class="continut">ContentRight asdf asdfa dasf asdf asdfd asfasd fdasfasdf dasfsad fdasfds<br /><br />
        asdfsad ff asdf asdfasd
<p>Lorem ipsum dolor sit amet, ullamco laboris nisi duis aute irure dolor. Ut aliquip ex ea commodo consequat. Ut enim ad minim veniam, quis nostrud exercitation lorem ipsum dolor sit amet. Sed do eiusmod tempor incididunt ullamco laboris nisi consectetur adipisicing elit. Sunt in culpa duis aute irure dolor quis nostrud exercitation. Eu fugiat nulla pariatur. Cupidatat non proident, velit esse cillum dolore ut labore et dolore magna aliqua. Quis nostrud exercitation ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, sed do eiusmod tempor incididunt ullamco laboris nisi. Ut labore et dolore magna aliqua. Velit esse cillum dolore ut aliquip ex ea commodo consequat. Quis nostrud exercitation eu fugiat nulla pariatur. Mollit anim id est laborum. Duis aute irure dolor velit esse cillum dolore consectetur adipisicing elit. Qui officia deserunt quis nostrud exercitation sed do eiusmod tempor incididunt. Ut enim ad minim veniam, consectetur adipisicing elit, excepteur sint occaecat. Cupidatat non proident, lorem ipsum dolor sit amet, mollit anim id est laborum. Sunt in culpa in reprehenderit in voluptate duis aute irure dolor. Ullamco laboris nisi eu fugiat nulla pariatur. Ut enim ad minim veniam, velit esse cillum dolore excepteur sint occaecat. Duis aute irure dolor ut aliquip ex ea commodo consequat. Qui officia deserunt. Consectetur adipisicing elit, ut aliquip ex ea commodo consequat. Ullamco laboris nisi excepteur sint occaecat ut labore et dolore magna aliqua. Cupidatat non proident, mollit anim id est laborum. Velit esse cillum dolore lorem ipsum dolor sit amet, ut enim ad minim veniam. Ullamco laboris nisi eu fugiat nulla pariatur. Sed do eiusmod tempor incididunt ut aliquip ex ea commodo consequat. Mollit anim id est laborum. Duis aute irure dolor consectetur adipisicing elit. Eu fugiat nulla pariatur. Sed do eiusmod tempor incididunt velit esse cillum dolore in reprehenderit in voluptate. Ut labore et dolore magna aliqua. Excepteur sint occaecat eu fugiat nulla pariatur. Ut aliquip ex ea commodo consequat. Sed do eiusmod tempor incididunt mollit anim id est laborum. Ut enim ad minim veniam, velit esse cillum dolore lorem ipsum dolor sit amet. Ut aliquip ex ea commodo consequat. Qui officia deserunt ut labore et dolore magna aliqua. Ullamco laboris nisi. Ut labore et dolore magna aliqua. Ut aliquip ex ea commodo consequat. Quis nostrud exercitation lorem ipsum dolor sit amet, eu fugiat nulla pariatur. Consectetur adipisicing elit, in reprehenderit in voluptate cupidatat non proident. Duis aute irure dolor ut labore et dolore magna aliqua. Sed do eiusmod tempor incididunt qui officia deserunt ut enim ad minim veniam. Lorem ipsum dolor sit amet, ut aliquip ex ea commodo consequat. Velit esse cillum dolore excepteur sint occaecat. Ullamco laboris nisi ut aliquip ex ea commodo consequat. Quis nostrud exercitation in reprehenderit in voluptate ut enim ad minim veniam. Mollit anim id est laborum. Lorem ipsum dolor sit amet, sunt in culpa cupidatat non proident. Ut aliquip ex ea commodo consequat. Ullamco laboris nisi consectetur adipisicing elit, lorem ipsum dolor sit amet. Quis nostrud exercitation ut enim ad minim veniam, in reprehenderit in voluptate. Duis aute irure dolor.</p>
    </div> 
<!--Next block appear only when all the content above was scrolled down--> 
      <div class="parteneri">End of the main content</div> 
      </div> 
    </div> 
  <div class="subsol">Footer</div>
</div>
</body> 
```

# CSS

```
@charset "utf-8";
body {
background-color:#CCC;
margin:0px;
padding:0px;
color: #006;
text-align: center;
font-family: "Times New Roman", Times, serif;
font-size: 100%;
background-attachment: fixed;
background-image: url(imagini/fundal.jpg);
background-repeat: no-repeat;
background-position: center center;
}
.container {
min-width:800px;
max-width: 1600px;
min-height: 300px;
text-align: justify;
height: 100%;
width: 100%;
overflow: hidden;
margin: 0px auto;
padding: 0px;
}
.sus {
background-color:#CCC;
background-attachment: fixed;
background-image: url(mici/antet-fundal.jpg);
background-repeat: no-repeat;
background-position: center top;
overflow: hidden;
text-align: center;
margin: 0px;
padding: 0px;
height: 200px;
width: 100%;
position: absolute;
top: 0px;
}
.totul {
overflow: hidden;
padding: 0px;
width: 100%;
margin: 0px;
position: absolute;
top: 200px;
bottom: 10px;
}
.coloana {
background-image: url(col/umplere.png);
background-repeat: repeat-y;
background-position: center top;
text-align: center;
overflow: hidden;
height: 100%;
width: 250px;
margin: 0px;
padding: 0px;
position: absolute;
left: 0px;
}
.dreapta {
margin: 0px;
overflow:auto;
overflow-x:hidden;
height: 100%;
padding: 0px;
text-align: center;
position: absolute;
right: 1px;
left: 250px;
vertical-align: middle;
border-right: 1px solid #999;
background-color: #09F;
background-attachment: fixed;
background-image: url(imagini/sigla_map.jpg);
background-repeat: no-repeat;
background-position: center center;
z-index: 0;
}
.continut {
padding: 15px;
margin: auto;
width: 97%;
text-align: justify;
z-index: 10;
}
.parteneri {
background-color: #999;
height: 70px;
width: 100%;
margin: 0px;
padding: 0px;
overflow: hidden;
text-align: left;
}
.subsol {
width:100%;
height:10px;
background-color:#CC8C60;
overflow: hidden;
margin: 0px;
padding: 0px;
position: absolute;
bottom: 0px;
text-align: center;
font-family: Verdana, Geneva, sans-serif;
font-size: 9px;
color: #F1DFD1;
} 
```

* * *

在我解开这个谜之前，我无法入睡。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:26:40.990

为了使背景图像在可滚动内容区域内居中，使内容区域的背景透明。`position:absolute` *然后在内容区域后面*堆叠一个div ，并确保它与内容可见视口的大小和位置相同。然后只需设置`background: center no-repeat url('your/url')`背景div。

~~[这是一个示例](http://jsfiddle.net/K6RQk/1/)~~[该示例中使用的图像具有误导性，因为它的底部包含一个白条，因此它*看起来*比实际短。这使它看起来好像不是垂直居中的，实际上，它是]

[这是一个更好的例子](http://jsfiddle.net/coltrane/K6RQk/10/)来演示这种技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:34:38.917

[w3school 对背景附件的定义](http://www.w3schools.com/cssref/pr_background-attachment.asp)

“背景附件：固定”意味着您的背景图像永远不会滚动。它将相对于您的视口定位。即使它是页面上一个小元素的背景图像，它也会粘在视口上。

您希望您的背景图像附加到“.sus”，然后我建议您简单地删除背景附件。

您的背景图像是否随滚动条滚动？然后我的建议是将您的滚动元素包装在包含 div ".sus_wrap" 中，然后将背景应用到其中。在这种情况下，让“.sus”保持透明。

但是，背景附件不是你要找的。

# android - Android，如何在 WebView 中获取重定向事件？

> ID：12085588
> 
> 赞同：3
> 
> 时间：2012-08-23T05:59:55.347
> 
> 标签：android, url, redirect, webview

在我的应用程序中，我有一个包含 Web 视图的活动。当我请求打开连接时，服务器会重定向我，但我的 Web 视图从未得到它并显示找不到页面消息。当我在 PC 的浏览器中测试 URL 时，它会将我定向到下一页。但是，在 webView 中，我从未定向到第二页。我的流程应该是这样的： 1- 打开一个 URL 2- 服务器指向下一个 URL 3- 通过应用程序在该页面中填写登录表单 4- 获取服务器响应

我的代码是这样的：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_loginweb);

    Log.i(TAG, "Try to create activity...");

    final String userId = PropertyManager.getUserId();
    final String password = PropertyManager.getPassword();
    Log.i(TAG, "Id: " + userId + ", Password: " + password);

    final WebView webView = (WebView) findViewById(R.id.webView);
    WebSettings webSettings = webView.getSettings();
    webSettings.setJavaScriptEnabled(true);
    webView.addJavascriptInterface(new JavaScriptInterface(this), "JsInterface");
    webView.setWebViewClient(new WebViewClient() {  
        @Override  
        public void onPageFinished(WebView view, String url) {  
            webView.loadUrl("javascript:document.LoginForm.tempusername.value = '" + userId + "';");
            webView.loadUrl("javascript:document.LoginForm.password.value = '" + password + "';"); 
            webView.loadUrl("javascript:document.LoginForm.Submit.click();");

            webView.loadUrl("javascript:window.JsInterface.processHTML(document.getElementsByTagName('html')[0].innerHTML);");

            String currentUrl = webView.getUrl();
            Log.i(TAG, "current Url is: " + currentUrl);
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            super.shouldOverrideUrlLoading(view, url);

            Log.i(TAG, "redirect to: " + url);
            view.loadUrl(url);
            return false;
        }

        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            super.onReceivedError(view, errorCode, description, failingUrl);

            Log.i(TAG, "error code is:" + errorCode);
        }
    });  

    webView.loadUrl(PropertyManager.getLoginPageURL());
}

/*
 * To bind a new interface between our JavaScript and Android code, call addJavascriptInterface(), 
 * passing it a class instance to bind to JavaScript of login page and an interface name that 
 * JavaScript can call to access the class.
 */
public class JavaScriptInterface {
    Context mContext;

    /** Instantiate the interface and set the context */
    JavaScriptInterface(Context c) {
        mContext = c;
    }

    /** process the html as needed by the app */
    public void processHTML(String html) {
        Log.i(TAG, "Processing HTML...");
        Log.i(TAG, "content of page: " + html);
    }

    /** Show a toast from the web page */
    public void showToast(String toast) {
        Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
    }
} 
```

我的问题是`shouldOverrideUrlLoading()`方法在重定向期间从不调用。任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T07:54:23.933

问题是因为证书过期。通过添加以下方法很容易绕过`webView.setWebViewClient(new WebViewClient() { });`

```
@Override
            public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {
//              super.onReceivedSslError(view, handler, error);

                Log.e(TAG, "onReceivedSslError...");
                Log.e(TAG, "Error: " + error);
                handler.proceed();
            } 
```

此外，为了使用此方法，您的 API 级别应为 8 或更高。

# ruby-on-rails - 如何通过rails中的关联定义has_many

> ID：12085593
> 
> 赞同：0
> 
> 时间：2012-08-23T06:00:19.057
> 
> 标签：ruby-on-rails, associations, model-associations

考虑我有名为 A、B、C、D 的导轨模型，具有以下关系。

```
A has_many B
B belongs_to C
A has_many C via B
C belongs_to D 
```

现在，定义以下关联的 rails 方式应该是什么？

```
A has_many D via C 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:58:31.367

```
A has_many Bs
A has_many Cs, :through => Bs
(i.e B has_many Cs)
C belongs_to :D

A has_many Ds :through => Bs

SELECT COUNT(*) FROM `Ds` INNER JOIN `Cs` ON `Ds`.`id` = `Cs`.`D_id` INNER JOIN `Bs` ON `Cs`.`B_id` = `Bs`.`id` WHERE `Bs`.`A_i 
```

# jquery - Mozilla 的 pdf.js 可以修改 PDF 吗？

> ID：12085597
> 
> 赞同：2
> 
> 时间：2012-08-23T06:00:41.943
> 
> 标签：jquery, html, pdf

我只是想知道 Mozilla 的 pdf.js 是否可以修改 PDF，或者它只是严格用于查看 PDF。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T06:06:09.880

不。 pdf.js 目前只是一个 PDF 阅读器（渲染器），如其自述文件所述。如果您想使用 Javascript 生成 PDF，请查看[使用 Javascript 生成 PDF 文件。](https://stackoverflow.com/questions/742271/generating-pdf-files-with-javascript)

# ios - 加密解密文本，兼容所有移动平台和wcf服务

> ID：12085600
> 
> 赞同：0
> 
> 时间：2012-08-23T06:01:00.913
> 
> 标签：ios, wcf, security, windows-phone-7, encryption

我想在使用 SHA1 算法发送到服务器（WCF 服务）时加密一个参数（由敏感数据组成），在服务器端我将解密字符串并使用它。

> 这样我可以确保任何第三方都不会轻易读取我的敏感数据。

如何使用 SHA1 算法在 windows phone 7 中加密字符串并在我的 WCF 服务中解密。

> 加密字符串可能来自 iPhone、android 或 WP7 的服务器；如何确保每个客户端都会在服务器中产生相同的结果。

## 更新：

我可以使用 AES 算法来满足上述要求吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:05:59.460

> 如何使用 SHA1 算法加密 windows phone 7 中的字符串并解密

你没有。SHA-1 是一种[*散列*算法](http://en.wikipedia.org/wiki/Cryptographic_hash_function)。这是一种方式——你不能“解密”它。您应该根据您的要求选择对称或公钥/私钥算法。阅读 .NET[加密服务](http://msdn.microsoft.com/en-us/library/92f9ye3s.aspx)文档作为起点 - 我希望 .NET 支持的几乎所有算法也能在其他平台上得到支持。

或者，只需使用 HTTPS 而不是 HTTP... 这将满足您最初突出显示的要求，而您根本不需要做很多工作（除了适当的 HTTPS 证书的服务器端部署之外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:39:38.243

同意乔恩的帖子，但有其他想法。

我还不能发表评论（需要更多的街头信誉）所以我会在这里发布。

您的问题没有说明您是从本机应用程序还是浏览器（使用 Ajaxian 机制）传输此信息。但我会假设是本地人。确实，尽管答案是相同的，但区别在于实施。

IMO 最简单的方法是使用工具和 API 作为 HTTPS (SSL/TLS) 客户端，这将为您提供网络机密性。SSL 连接提供的服务质量的详细信息是供您从可用的“密码套件”中配置的。AES 可用。

# c# - ORA-01013: 用户请求取消当前操作

> ID：12085602
> 
> 赞同：3
> 
> 时间：2012-08-23T06:01:02.893
> 
> 标签：c#, oracle11g

当我执行删除存储过程时，我收到“ORA-01013：用户请求取消当前操作”。

而且从应用程序中抛出异常也需要时间（大约超过 10 秒）

当我在 Toad 中执行此查询时，它需要 30 多秒，当我取消它时，在输出窗口中，它显示上述错误。

我认为，数据访问博客在超时时会自动取消。

我想知道为什么需要30秒。当我单独运行选择查询时，没有记录。

当我只调用删除时，它需要时间。

```
DELETE FROM ( SELECT *
       FROM VoyageVesselBunkers a
       JOIN VoyageVessel b
       ON  a.VoyageVesselId = b.Id
       WHERE a.Id    = NVL(null,a.Id)
       AND  b.VoyageId   = NVL('5dd6a8fbb69d4969b27d01e6c6245094',b.VoyageId)
       AND  a.VoyageVesselId = NVL(null,a.VoyageVesselId) ); 
```

任何建议。阿南德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-01T16:06:08.157

如果您对位于 SQL 编辑器（例如 SQL Developer、Oracle 等）中的数据行进行了*未提交*的更改，并且您尝试通过另一个程序（可能是在诸如 Visual Studio 等 IDE 中运行的程序）更新同一行)，你也会得到这个错误。要纠正这种可能的症状，只需在 SQL 编辑器中提交更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T06:18:06.740

您的代码正在设置超时 ( `storedProcCommand.CommandTimeout`)。该错误表明存储过程调用所用的时间超过了允许的超时时间，因此将其取消。您要么需要增加（或删除）超时，要么需要解决导致过程调用超过允许超时的任何性能问题。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-23T06:24:20.543

ORA-01013 用户请求取消当前操作

原因：用户通过输入 CTRL-C、Control-C 或其他
取消操作中断了 Oracle 操作。这会强制结束当前操作。这只是一条信息性
消息。

行动：继续下一个操作。

# c++ - Windows 键盘记录。WM_CHAR 消息在各种应用程序中的一个特征

> ID：12085603
> 
> 赞同：0
> 
> 时间：2012-08-23T06:01:06.453
> 
> 标签：c++, windows, hook, keyboard-hook

再会。需要监控键入的文本，即无击键，但即派生字符。

一开始我使用原始输入法获取按键的虚拟键码，但由于未能正确将虚拟键码转换为字符而不得不放弃这个决定。

MapVirtualKeyEx + LoadKeyboardLayout - 没有达到预期的效果，即如果通过调用 LoadKeyboardLayout 加载俄语布局，那么 MapVirtualKeyEx 仍然返回拉丁语 A 代码 0x41。

于是我开始使用钩子 WM_GETMESSAGE。

```
if (nCode < 0)
    return CallNextHookEx(NULL, nCode, wParam, lParam);

// WH_GETMESSAGE
if (nCode == HC_ACTION)
{
    PMSG pMsg = (PMSG)lParam;
    if (pMsg != NULL)
    {
        if ((pMsg->message == WM_CHAR)||(pMsg->message == WM_UNICHAR))
        {
            keyEntry.character = pMsg->wParam;
            ipc->SendData(&keyEntry, sizeof(CHARENTRY));
        };
    };
};

return CallNextHookEx(NULL, nCode, wParam, lParam); 
```

一切正常，包括带有死键的角色。

但是当我尝试在visual studio的编辑器中输入文本时，出现了问题：

*   一键按下两个相同的消息 WM_CHAR；
*   对于西里尔字符，值 WM_CHAR-> wParam 与键入的字符不匹配，对于拉丁语 - 好的。

考虑到文本输入过程的输入语言+能够招募复合字符（例如：ô），如何将虚拟键码转换为字符。或者告诉我如何用钩子解决版本中的问题。

提前致谢 ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:35:19.713

当用户键入一个键时，键盘会生成两个扫描码——一个在用户按下键时生成，另一个在用户释放键时生成。

来源：关于键盘输入 - [http://msdn.microsoft.com/en-us/library/windows/desktop/ms646267(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646267(v=vs.85).aspx)

如果应用程序被编译为 Unicode 作为字符编码（即 MBCS 和 UNICODE 之间的区别），WM_CHAR 将仅是 UTF-16。如果您的应用程序是使用 MBCS（多字节字符集）构建的，那么系统将使用当前系统代码页将 Unicode 字符转换为“Ansi”（带引号）并发送。

因此，请检查您的构建设置，以便为您的应用配置的字符编码。

来源：Unicode 和多字节字符集 (MBCS) 支持： http: [//msdn.microsoft.com/en-us/library/ey142t48 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ey142t48(v=vs.80).aspx)

# css - CSS背景网址未显示

> ID：12085604
> 
> 赞同：0
> 
> 时间：2012-08-23T06:01:08.893
> 
> 标签：css, image, background

我刚刚完成了我的代码，突然之间徽标不再显示了。（它在我的浏览器刺激器上运行良好。）如果有人知道我做错了什么，请告诉我，如果没有显示徽标，网站就没有多大用处！

CSS：

```
#header {
height: 150px;
margin-left: 15px;
background-image: url('../images/headings/header.gif');
background-repeat: no-repeat;
text-align: right;
padding-top: 10px;
padding-right: 50px;
} 
```

HTML

```
<div id="header">
<a href="realtors.htm">Realtors Click Here</a><br /><br /><br /><br />
<p><a href="http://www.facebook.com/PrimaResidential"><img src="images/headings/facebook.png" alt="Facebook" width="100" height="70" /></a></p>
<p><a href="https://twitter.com/Prima_Updates"><img src="images/headings/twitter.png" alt="Twitter" width="100" height="70" /></a></p>
<p><a href="http://www.flickr.com/photos/prima_residential"><img src="images/headings/flickr.png" alt="Flickr" width="100" height="70" /></a></p>
</div> 
```

标题中的其他所有内容都可以正常工作，我只是不知道为什么图像不起作用！徽标是 CSS 中的背景图像，以防有人在寻找它！

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:06:50.697

你确定你的路径是对的吗？我看到您的其他图像正在从图像/标题/加载。尝试在 CSS 中将 ../images/ 更改为 images/。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:11:19.163

检查图像文件夹的路径。正如您所说，它在您的本地机器上工作，所以我猜您的 css 类的父文件夹中有图像文件夹。检查部署后是否同样适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-30T12:08:27.983

尝试这个 **

> 背景图片: url('/images/headings/header.gif');

* * *

**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T06:08:46.637

确保图像位于**正确的文件夹**或目录中。您也可以尝试使用浏览器直接从服务器打开图像，并可以将该 URL 用于您的 CSS，例如；

```
background-image: url('http://yourserver.com/dir1/dir2/header.gif'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T16:22:15.143

我想到了！！由于某种原因，当我下载压缩文件时，有一些项目没有完全加载，而 header.gif 恰好是其中之一。我刚刚重新下载了 .gif，它现在可以完美运行了！感谢大家的建议！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-02T08:25:41.920

尝试这个

```
background-image: url('../../images/headings/header.gif');
```

# cocoa - 可可：NSView 触摸事件

> ID：12085606
> 
> 赞同：2
> 
> 时间：2012-08-23T06:01:20.620
> 
> 标签：cocoa, touch, nsview

我创建了一个简单的可可项目，并`NSButton`在窗口中添加了一个。然后我`NSScrollView`在窗口中添加了一个并隐藏了`NSButton`. `NSButton`但是，当我单击滚动视图时，动作响应很奇怪！

我想触摸事件链有些东西，但我没找到。例如，我尝试使用：

```
 - [NSView becomeFirstResponder];
- [NSView setAcceptsTouchEvents:]; 
```

所以我想要的是成为第一响应者的唯一最前面的视图，并且触摸事件不会被发送到它的超级视图左右。

谢谢。这是视图层次结构：

![在此处输入图像描述](../Images/209e855c3ef38a0fc9a1e51f3399a8ec.png)

滚动视图和按钮都添加到窗口视图中，并且滚动视图的框架包括按钮的框架。换句话说，按钮被滚动视图隐藏，但仍然接收点击事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:08:22.023

您需要在or的视图中添加`mouseDown:`事件。像这样：`NSScrollView``NSCrollView`

```
-(void)mouseDown:(NSEvent *)theEvent {
    NSLog(@"MouseDown in NSView");
} 
```

# silverlight - 使用 Silverlight 中的对话框从文本框中搜索文本

> ID：12085607
> 
> 赞同：1
> 
> 时间：2012-08-23T06:01:21.650
> 
> 标签：silverlight, silverlight-4.0, silverlight-5.0

我有reachtextbox，并想在单独的对话框中搜索silverlight中的记事本等文本。查找文本并在richtextbox中输入的大文本中搜索该文本。如何使用单独的对话框（如记事本）和搜索文本并在richtextbox 中编辑和突出显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:20:26.167

我会使用调解器在搜索表单和文本表单之间发送消息。您可以在搜索表单中声明类似“OnSearch”的事件并从文本表单中订阅它。当事件引发时，您应该发送一个带有要搜索的字符串的 eventarg。

文本表单应使用字符串参数订阅“searchMessage”。文本表单的业务层应该实现一个“搜索”方法，根据您的搜索选项查找每个字符串/子字符串。然后更改每个巧合的文本颜色。

搜索字符串： http: [//msdn.microsoft.com/en-us/library/ms228630 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms228630(v=vs.80).aspx)

您还可以使用 RichTextBox 中的 Find 方法。

要更改该文本的颜色，您必须将文本设置为选中，然后更改该选择的颜色：SelectionStart、SelectionLenght、SelectionColor。

# vba - 如何为范围定义 OnKey 事件？

> ID：12085609
> 
> 赞同：0
> 
> 时间：2012-08-23T06:01:35.080
> 
> 标签：vba, excel

我想为特定单元格上的转义按钮定义 OnKey 事件

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
If ActiveCell.Value = "a" Or ActiveCell.Value = "b" Then
Application.OnKey "{ESC}", "unit" 
```

并得到错误弹出窗口 - 宏不可用或被禁用...
Sub unit() 作为独立程序工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:24:11.333

显式引用适用于我，尝试使用 sheetname.subname，如 Sheet6.unit：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    Debug.Print ActiveCell.Value
    If ActiveCell.Value = "d" Or ActiveCell.Value = "e" Then
        Application.OnKey "{ESC}", "Sheet6.unit"
        Else
        Application.OnKey "{ESC}", ""
    End If
End Sub

Public Sub unit()
    Debug.Print "Unit!"
End Sub 
```

# git - ReviewBoard 更改 Heroku Git repo URL，克隆失败

> ID：12085611
> 
> 赞同：1
> 
> 时间：2012-08-23T06:01:43.840
> 
> 标签：git, heroku

在 Heroku 托管的 ReviewBoard 中创建 Git 存储库时，我输入 Heroku Git URL：

```
git@heroku.com:appname.git 
```

ReviewBoard 将其更改为：

```
ssh://git@heroku.com/appname.git 
```

Heroku 不喜欢这样并拒绝克隆尝试：

```
2012-08-22 22:26:39,267 - ERROR - Git: Failed to find valid repository ssh://git@heroku.com/appname.git: 
 !  Invalid path.
 !  Syntax is: git@heroku.com:<app>.git where <app> is your app's name.

fatal: Could not read from remote repository. 
```

**如何让 ReviewBoard 不重写 Git 存储库 URL？**

为什么 Heroku 不接受以下形式的 URL `ssh://git@heroku.com/appname.git`：？
我在哪里可以将此报告为 Heroku 中的错误？我搜索了他们的网站，但看不到在哪里打开支持票。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T03:46:08.170

正如我在评论中提到的，一个缺失的元素是：

在 Review Board 中本地克隆声明的镜像路径中输入正确的地址（`git@heroku...`）。

请参阅“ [ReviewBoard 的本地克隆部分](http://www.reviewboard.org/docs/manual/dev/admin/configuration/repositories/#local-clone)”。

> 为了与 Review Board 合作，本地克隆需要定期保持同步。
> 它应该可以直接访问中央 Git 服务器，或者需要在每次提交到中央 Git 服务器时进行更新。
> 
> Path 字段应该是`.git`此结帐中目录的完整路径。
> 例如：

```
/var/git/projectname/.git 
```

> path``Mirror`字段应包含存储库 URL。
> 通过运行以下命令从 git checkout 中找到您应该使用的 URL：

```
$ git remote show origin 
```

> 显示为 URL: 的值应作为镜像路径输入。例如：

```
git@git.example.com:projectname.git 
```

> 和字段应为空白`Username`。`Password`

# php - PHP REST 放置/删除选项

> ID：12085619
> 
> 赞同：6
> 
> 时间：2012-08-23T06:02:18.870
> 
> 标签：php, rest

试图了解`REST`在`PHP`.

我在理解如何从 php 脚本发送`put`/时遇到问题。`delete`

在互联网上我只能找到如何确定已发送的 php 方法。

```
if($_SERVER['REQUEST_METHOD'] == 'DELETE') 
```

但是如何发送这个`DELETE`方法呢？

通常，当我想从`DB`我的普通 html 表单中删除一些记录时，我会做什么，方法设置为`post`/`get` 并记录 db id，然后我按下提交按钮发送`post`/`get`表单。

如何创建这个提交发送`delete`/`put`方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T18:11:54.040

从 HTML 页面发送请求有两种常用方法，使用 GET 或 POST 之外的 http 方法。

**#1**：使用 html 表单发送 POST 请求，但包含一个隐藏的表单字段，告诉服务器将请求视为使用*不同*的方法。这是[@xdazz 概述的](https://stackoverflow.com/a/12085776/416630)方法。

```
<form method="post" action="my_resource.php">
  ...
  <input type="hidden" name="REQUEST_METHOD" value="PUT" />
<form> 
```

在您的 PHP 脚本中`"my_resource.php"`，您必须同时查看*真正*的请求方法*和*提交的表单字段，以确定调用哪个逻辑：

```
/* my_resource.php */

$method = strtolower($_SERVER['REQUEST_METHOD']);
if( $method === 'post' && isset($_REQUEST['REQUEST_METHOD'])) {
    $tmp = strtolower((string)$_REQUEST['REQUEST_METHOD']);
    if( in_array( $tmp, array( 'put', 'delete', 'head', 'options' ))) {
        $method = $tmp;
    }
    unset($tmp);
}

// now, just run the logic that's appropriate for the requested method
switch( $method ) {
    case "get":
        // logic for GET here
        break;

    case "put":
        // logic for PUT here
        break;        

    case "post":
        // logic for POST here
        break;

    case "delete":
        // logic for DELETE here
        break;

    case "head":
        // logic for DELETE here
        break;

    case "options":
        // logic for DELETE here
        break;

    default:
        header('HTTP/1.0 501 Not Implemented');
        die();
} 
```

注意：您可以将上述逻辑放入每个页面（或从每个页面调用）。另一种方法是构建代理脚本（例如`"rest-form-proxy.php"`）。然后，您站点中的所有表单都将提交给代理，包括 request_method*和*目标 url。代理将提取提供的信息，并使用正确请求的 http 方法将请求转发到所需的 url。

代理方法是在每个脚本中嵌入逻辑的绝佳替代方案。但是，如果您确实构建了代理，请务必检查请求的 URL，并禁止任何不指向您自己站点的 url。不进行此项检查将允许他人使用您的代理对其他网站发起恶意攻击；它还可能危及您网站上的安全和/或隐私。

--

**#2**：在您的 HTML 页面中使用 Javascript 来启动[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest?redirectlocale=en-US&redirectslug=XMLHttpRequest)。这是一种更复杂的方法，需要一点 javascript，但在某些情况下它可以更灵活。它允许您在不重新加载页面的情况下向服务器发送请求。它还允许您以多种不同格式发送数据（您不仅限于从 html 表单发送数据）。例如：

```
<button onclick="doSave()">Save</button>

<script>
    var myObject = {
       // ... some object properties that 
       // that you'll eventually want to save ...
    };

    function doSave() {
        var xhr = createxmlhttprequest();

        // initialize the request by specifying the method 
        // (ie: "get", "put", "post", "delete", etc.), and the
        // url (in this case, "my_resource.php").  The last param
        // should always be `true`.

        xhr.open("put", "my_resource.php", true);
        xhr.setRequestHeader('Content-Type', 'application/json');

        xhr.onreadystatechange = function() {
           if (xhr.readystate != 4) { return; }
           var serverresponse = xhr.responsetext;

           // ... this code runs when the response comes back
           // from the server.  you'll have to check for success
           // and handle the response document (if any).
        };

        // this initiates the request, sending the contents
        // of `myObject` as a JSON string.  

        xhr.send(JSON.stringify(myObject));

        // The request runs in the background
        // The `onreadystatechange` function above
        // detects and handles the completed response.
    }
</script> 
```

XMLHttpRequest 比我在上面的基本示例中展示的要多得多。如果您选择此路线，请仔细研究。除其他事项外，请确保正确处理各种错误情况。跨浏览器兼容性也存在许多问题，其中许多问题可以通过使用中介来解决，例如[jQuery 的 $.ajax() 函数](http://api.jquery.com/jQuery.ajax/)。

最后，我应该注意，上述两种方法并不相互排斥。很可能对某些请求使用表单，对其他请求使用 XMLHttpRequest，只要您构建服务器以便它可以处理任何一种请求（如上面的 #1 所示）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T06:16:15.930

HTML 表单只支持 GET 和 POST，因此在普通的 Web 应用程序中，您需要使用隐藏字段来指定请求方法，这是大多数框架所做的。

```
<form method="post" action="...">
  ...
  <input type="hidden" name="REQUEST_METHOD" value="PUT" />
<form> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T06:12:57.377

如果您使用的是 Chrome，则可以使用[Postman](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm)来测试您的 REST 服务。它允许发送任何类型的命令 - DELETE、PUT，还有 OPTIONS、PATCH 等。

在 Firefox 上，您可以使用[RESTClient](https://addons.mozilla.org/en-US/firefox/addon/restclient/)等。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-23T06:16:20.430

通常的方法是使用`cURL`

```
$ch = curl_init('YOUR_URL');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'DELETE'); // curl_setopt($ch, CURLOPT_PUT, true); - for PUT
curl_setopt($ch, CURLOPT_POSTFIELDS, 'some_data');
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);  // DO NOT RETURN HTTP HEADERS
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  // RETURN THE CONTENTS OF THE CALL
$result = curl_exec($ch); 
```

# php - 在后台运行 php 脚本

> ID：12085623
> 
> 赞同：0
> 
> 时间：2012-08-23T06:02:58.570
> 
> 标签：php, symfony

我有一个 php 脚本，我在其中编写了以下代码

```
$client = new \Predis\Client();
$client->select(4);
$client->lpush('emailid',$x['to']);

$command = "/usr/bin/php5 -f /var/www/Symfony/src/Ens/NewBundle/Controller/cron.php";

exec( "$command > /dev/null &", $arrOutput );

return $this->render('EnsNewBundle:Email:header.html.twig'); 
```

在这我写了另一个名为 .php 的 php 脚本`cron.php`。我想在后台运行该脚本。我想检查一下这是否在后台运行。我该如何检查

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:11:10.937

也许你可以看看[Symfony2 Process 组件](http://symfony.com/doc/current/components/process.html)。

它对于从 PHP 运行命令非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:09:26.137

您可以在文件中获取 cron 的输出 `> filename`并检查它是否真的运行。

或者，如果有一个新的 php 进程说明你运行这个进程时，请检查进程列表。

您还应该在[此处查看 Codememe 捆绑包](https://github.com/CodeMeme/CodeMemeDaemonBundle)

一定要检查开源排队系统，它们很多时候很有帮助。像[Beanstalkd](http://kr.github.com/beanstalkd/)或 RabbitMQ

您可以将数据推送到这些队列，它们可以说是“文件名”，其他工作人员从队列的“管”中获取数据并应用说“php 文件名”，然后从队列中获取下一个数据。

# android - Android 布局设计器在 Eclipse 4.2 中不可用

> ID：12085627
> 
> 赞同：1
> 
> 时间：2012-08-23T06:03:32.267
> 
> 标签：android, eclipse, android-layout, eclipse-juno

首先让我说我已经检查了其他可以被视为“重复”的问题，但没有一个问题为我解决了问题。

当我在 Eclipse 4.2 中打开一个 Android 布局文件时，我无法在布局设计器中打开它，只能在 XML 文本编辑器中打开。

已经解决了几个类似的问题，接受的解决方案是使用 Open With 或重新启动 eclipse。这两种方法我都尝试了好几次，但 Android 布局设计器不在我的“打开方式”对话框中。有一个旧版 Android 布局编辑器，但它也不显示布局设计器。

如果我有足够的声誉，我会发布一张图片。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:29:34.920

Eclipse 4.2 没问题。在 Project Explorer 中，转到您的项目并从 res >> layout 目录打开 activity_main.xml。一旦它在右侧打开，看看它的底部。将有两个选项卡，单击图形布局选项卡，您将获得图形布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:07:21.487

可能 Android ADT 插件尚未为 Eclipse 4.2 正确开发，您可以使用 ADT-19 或 ADT-20 插件切换回 Eclipse Helios。

# asp.net-mvc - MVC 部分验证（ModelState.IsValid 与 ModelState.IsValidField）

> ID：12085628
> 
> 赞同：0
> 
> 时间：2012-08-23T06:03:36.943
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation

在一个 MVC 项目中，我有一个具有（比方说）10 个属性的类，都是必需的。在用户选择的情况下，我必须验证一次只有 3 个属性，其他时间验证所有属性。

这些是我的 Patient 类的属性：

```
 [Required(ErrorMessage = "Last Name is required")]
    [StringLength(50)]
    public string responsibleLastName;

    [Required(ErrorMessage = "First Name is required")]
    [StringLength(50)]
    public string responsibleFirstName;

    [Required(ErrorMessage = "Address is required")]
    [StringLength(50)]
    public string responsibleAddressLine1;

    [Required(ErrorMessage = "City is required")]
    [StringLength(50)]
    public string responsibleCityName;

    [Required(ErrorMessage = "State is required")]
    [StringLength(2)]
    public string responsibleStateCode;

    [Required(ErrorMessage = "Zip Code is required")]
    [StringLength(10)]
    public string responsiblePostalZoneOrZIPCode;

    [Required(ErrorMessage = "Birth Date is required")]
    public DateTime responsibleBirthDate;

    [Required(ErrorMessage = "Gender is required")]
    public string responsibleGenderCode;

    [Required(ErrorMessage = "Home Phone is required")]
    [StringLength(10)]
    public string responsibleHomePhone; 
```

在保存之前，在控制器中我正在进行验证：

```
 if (firstCondition)  //partial validation
        {      if (!ModelState.IsValidField("responsibleLastName"))
            {
                ModelState.AddModelError("responsibleLastName", "Last Name is required");
            isOK = false;
             }
              //... and 2 more validation

              //finally I check the isOK value

               if (!isOK)
                  return PartialView("firstCondition", model);
               else
                  // do something

        }
else {   //validate all the properties from the model
    if (!ModelState.IsValid)
            return PartialView("secondCondition", model);   
    else
           //do something
} 
```

在第一种情况下，我的消息对于这 3 个属性 + 类的所有错误消息都是重复的。

ModelState.IsValidField 正在调用 Model.IsValid 并获取每个属性的 ModelValidationResult 列表，然后检查我想要的字段的结果？为什么消息重复？

我想使用模型验证工具，所以我不想手动验证值

```
//NOT
 if (!model.responsibleLastName == "")
            {
                ModelState.AddModelError("responsibleLastName", "Last Name is required");
            isOK = false;
             } 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:16:48.240

您可以使用此博客[文章](http://blogs.msdn.com/b/simonince/archive/2011/02/04/conditional-validation-in-asp-net-mvc-3.aspx)`RequiredIf`中指定的自定义验证属性。

# c# - 无法使用 C# 中的计时器写入文本文件

> ID：12085629
> 
> 赞同：0
> 
> 时间：2012-08-23T06:04:07.693
> 
> 标签：c#, timer, filestream, streamwriter

我仍然是 C# 的新手，我正在制作一个测试程序，每秒编写 DateTime.Now。我尝试使用它并且它有效：

```
StreamWriter sw = new StreamWriter("D:\Hello.txt", true);
sw.WriteLine(DateTime.Now);
sw.Close(); 
```

但是，当我尝试包含 FileStream 时，它不起作用。似乎是什么问题？这是我的代码：

```
FileStream fs = new FileStream(@"D:\Hello.txt", FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite);
StreamWriter sw = new StreamWriter(fs);
sw.WriteLine(DateTime.Now);
sw.Close();
fs.Close(); 
```

注意：我使用的是计时器，它每秒执行一次代码..

更新：我尝试将代码（具有文件流的代码）放在一个按钮内（不带计时器）。每当我单击该按钮时，它只会替换文本文件中的行。这是一个将文本附加到文本文件的代码： StreamWriter sw = new StreamWriter("D:\Hello.txt", true);

我将如何在文件流中执行此操作？我不能在 FileStream 中使用 FileMode.Append，因为它要求 FileAccess 是只写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:32:12.133

由于您每秒都在执行代码，因此每次都创建`FileStream`和`StreamWriter`对象不是一个好主意，因为有时文件将保持在锁定状态并且文件流将错过获取句柄。

当您写入单个文件时，最好在构造函数中初始化 a`FileStream`和后续`StreamWriter`，同时将引用留给它们在类范围内；然后在线程上每秒调用它一次`sw.WriteLine(DateTime.Now);`应该会有所帮助。

并且永远不会错过`try catch`文件流。它们对找出差异有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:46:18.007

我已经解决了.. :) 我只需要使用 FileMode.Append、FileAccess.Write 作为文件流中的参数。之前不做 FileMode.Append 的原因是因为它需要 FileAccess 是只写的。我认为将 FileAcess 切换为只写会阻止用户读取文件。我真愚蠢..这是我的代码：

```
private void timer1_Tick(object sender, EventArgs e)
    {

        FileStream fs = new FileStream(@"D:\Hello.txt", FileMode.Append, FileAccess.Write, FileShare.ReadWrite);
        StreamWriter sw = new StreamWriter(fs);
        sw.WriteLine(DateTime.Now);
        lbTimer.Items.Add(DateTime.Now);
        sw.Close();
        fs.Close();

    } 
```

最后一个问题，什么是将 FileAccess 设置为仅在您仍然可以读取时才写入？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:26:15.677

尝试调用`StreamWriter.Flush()`之前`StreamWriter.Close()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T06:26:25.457

可以尝试使用文件吗？

```
File.AppendAllText(@"D:\Hello.txt", DateTime.Now.ToString()); 
```

或者

```
File.WriteAllText(@"D:\Hello.txt", DateTime.Now.ToString()); 
```

覆盖

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T06:32:52.167

你应该使用这样的东西，因为它对我来说很好用。如果它不适合您，您必须添加更多详细信息

```
 using (var fs = new FileStream("path", FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite))
        {
            fs.Seek(0, SeekOrigin.End);
            using (StreamWriter sw = new StreamWriter(fs) { AutoFlush = true })
            {
                sw.WriteLine("my text");
            }
        } 
```

但请记住，我不会每秒钟都创建它。为什么在调用 Timer.Start 时不将 Streamwriter 对象存储为字段？因此，您不必每秒钟都创建它。（请记住在您停止计时器时将其丢弃）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T06:35:34.257

应该管用：

```
FileStream fs = new FileStream(@"D:\Hello.txt", FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite);
StreamWriter sw = new StreamWriter(fs);
sw.WriteLine(DateTime.Now);
sw.Flush();
sw.Close();
fs.Close(); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-23T06:08:24.337

你可能想看看这里

**如何：写入文本文件（C# 编程指南）**

[http://msdn.microsoft.com/en-us/library/8bh11f1k.aspx](http://msdn.microsoft.com/en-us/library/8bh11f1k.aspx)

# c# - 在wix中开始安装之前复制文件

> ID：12085632
> 
> 赞同：1
> 
> 时间：2012-08-23T06:04:39.197
> 
> 标签：c#, wix, installation, wix3.5

> **可能重复：**
> [CopyFiles 太晚了](https://stackoverflow.com/questions/12053404/copyfiles-too-late)

我在 wix 目录结构中遇到问题。

实际上，我想在实际安装开始之前复制临时文件夹中的一些文件并在我的自定义操作中使用这些文件。我的问题是有一种方法可以在安装开始之前复制文件。

我认为 wix 在安装过程中复制文件。

我是 wix 新手，网上没有好的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:12:02.497

> 因为我想用我的自定义操作而不是用 wix 来复制文件。

这是您在安装项目中可能犯的最大错误之一。Windows Installer（所有安装背后的底层技术）可以很好地完成几件事，将文件复制到目标系统就是其中之一。

如果您更详细地查看自己的问题，您会注意到差异：您希望**在安装开始之前复制文件（即在其他所有内容中复制文件的过程）**。

如果您想迁移到 WiX，但要随身携带所有自定义操作并重用它们，那么我认为这种迁移没有任何意义。为了充分利用 WiX，您可以在任何地方使用 WiX 方式。

所以，如果有一天我得到这样的任务，我会这样做：

*   坐下来浏览您当前的安装项目并记下它实际执行的每个操作
*   当这个列表完成时，过滤它留下它实际***应该***做的那些动作
*   找出该列表中的哪些操作可以使用 WiX 的标准工具完成（Windows Installer 自然支持）
    *   顺便说一句，文件复制就是其中之一
*   找出可以使用标准 WiX 扩展（如 IIsExtension 或 UtilExtension）完成的操作
*   如果还剩下一些动作（我希望这个列表非常小），请为这些动作编写自定义动作
    *   确保您的[自定义操作是数据驱动的](http://robmensching.com/blog/posts/2007/9/13/Zataoca-Custom-actions-should-be-data-driven)

希望这能给你一些进一步调查的提示。

# java - HBase 客户端程序无法识别/读取现有表

> ID：12085637
> 
> 赞同：1
> 
> 时间：2012-08-23T06:05:06.560
> 
> 标签：java, hbase

当我收到此错误时，我正在尝试从我的客户端 Java 程序本地连接到 HBase：

`Encountered problems when prefetch META table: org.apache.hadoop.hbase.TableNotFoundException: Cannot find row in .META. for table: "XYZ", row="XYZ",,99999999999999`

HBase 版本：`hbase-0.94.0`

我已经尝试过的：

1.  仔细检查配置
2.  确保表存在（是的，它可以从 shell 中看到）
3.  删除`.META.`hbase 数据源目录中的文件夹
4.  删除本地数据源文件夹
5.  尝试运行`hbck -repair`显然显示 0 个不一致

我已经尝试了以上所有方法，但仍然没有成功。

我尝试对这个错误消息进行一些谷歌搜索，发现这是一个 HBase 错误，据说在 HBase-0.94.0 版本中已解决。但我不知道为什么我仍然面临这个问题。

有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T07:37:13.073

这里的问题是我的表名中有一个无法解析的非法字符，因此引发了异常。尽管如此，我还是很惊讶为什么它必须抛出这样的异常，而不是仅仅通知该表不可用。

# .htaccess - 301重定向代码

> ID：12085640
> 
> 赞同：0
> 
> 时间：2012-08-23T06:05:30.760
> 
> 标签：.htaccess, url-redirection

我为我的网站创建了 301 重定向代码。以下是我所有类别的代码以重定向到新网址

```
Options +FollowSymlinks
RewriteEngine on
rewritecond %{http_host} ^testsite.com/categories/city/$1 [nc]
rewriterule ^(.*)$ http://www.testsite.com/$1 [r=301,nc] 
```

我想将[http://www.testsite.com/categories/city/pune](http://www.testsite.com/categories/city/pune)重定向到[http://www.testsite.com/Pune](http://www.testsite.com/Pune)

让我知道我的代码是否正确？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:23:03.527

这是不正确的。是请求标头中提供的`%{HTTP_HOST}`唯一主机`Host:`。它不会包含任何路径信息。您可以将该条件分为两件事：

```
RewriteCond %{HTTP_HOST} ^testsite.com$ [NC]
RewriteRule ^/?categories/city/(.*)$ /$1 [R=301,L,NC] 
```

# jquery - jquery parsejson 未定义

> ID：12085645
> 
> 赞同：0
> 
> 时间：2012-08-23T06:06:08.470
> 
> 标签：jquery, json

我目前在我的 JavaScript 中有以下未定义的错误。我对 jQuery 和 js 很陌生，所以任何帮助都会很棒。

JSON

```
"{"jsonrpc" : "2.0", "result" : "p17591307kboph5f57q13bg1iu44.jpeg", "id" : "id"}" 
```

查询：

```
var uploader = $('#uploader').pluploadQueue();
    uploader.bind('FileUploaded', function(up, file, res) {
        var obj = $.parseJSON(res.response);
        alert( obj.id );
        $('#showfilelist').append("<div id=" + file.id + "><img src='/media/images/galleries/" + _id +"/" + obj.id + "' width='100' height='100' /><br>" + file.name + "<br>(" + plupload.formatSize(file.size) + ") <span></span></div>");
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:31:47.613

根据您的评论：

> 实际上是这样的： "{\"jsonrpc\" : \"2.0\", \"result\" : \"p17591307kboph5f57q13bg1iu44.jpeg\", \"id\" : \"id\"}"

我开始相信问题出在发送“JSON”字符串的文件中。它不应包含那些反斜杠 ( `\`)。

如果您使用的是 PHP ，请考虑使用数组和下一个函数来制作良好的格式化 json 数据。

`json_encode`

# html - 使用 AJAX 修改 HTML-select 元素的值

> ID：12085650
> 
> 赞同：1
> 
> 时间：2012-08-23T06:06:37.520
> 
> 标签：html, jquery, html-select

在我的页面中会有 2 个选择框 [item, and sub-item]

```
<select id="item" name="item">
 <option value="1">Desktop</option>
 <option value="2">Laptop</option>
</select>

<select id="sub_item" name="sub_item">
</select> 
```

当用户更改项目选择控件时，事件将使用 jQuery 将选定值发送到服务器，服务器页面将输出类似这样的内容

> 戴尔,39000
> 惠普,32000

并且 jQuery 应该将这些值添加到子项选择框，以便它更改为

```
<select id="sub_item" name="sub_item">
 <option value="39000">Dell</option>
 <option value="32000">HP</option>
</select> 
```

**问题：我无法编写如何添加/重置子项的选择控件的代码**

*我没有任何代码可以分享。如果你想要我的 SQL 或 JAVA 代码我可以发布它，但我认为后端与 jQuery 修改子项的值无关*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:15:46.827

假设这是输入，只是一个普通的字符串

您的服务器将响应字符串`DELL,39000 # HP,32000`（这里 # 代表第二项。）

将其分配给javascript中的变量

```
var data = response.split( "#"); // Splits the items

for( i=0; i < data.length; i++){
  $('#sub_item').append( '<option value='+data[i].split(",")[0]+'>'+data[i].split(",")[1]+'</option>');
} 
```

这会将数据与来自服务器的响应一起附加到 sub_item 选择框

清除下拉菜单

```
$'#sub_item').html(''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:19:28.143

```
$.get('URL',function(data){
  //data should be DELL,39000 osv
  var items = data.split("\n");
  items.forEach(function(item){
    item = item.split(',');
    var option = $("<option></option>").text(item[0]).val(item[1]);
    $("sub_item").append(option);
  });
}); 
```

将“网址”更改为您的网址。

未经测试，但应该可以工作。

# java - Mac：IntelliJ IDEA 中的菜单栏不响应点击

> ID：12085657
> 
> 赞同：1
> 
> 时间：2012-08-23T06:07:19.320
> 
> 标签：java, macos, intellij-idea

在阅读了来自不同地方的热情洋溢的评论后，我决定尝试一下 IDEA。问题是，虽然它有焦点，但 IDEA 根本不允许我点击菜单栏上的任何内容，甚至苹果菜单也不行。切换到另一个应用程序并单击那里的菜单栏可以正常工作。IDEA 窗口内的所有界面元素都是可点击的。尝试将焦点移到菜单上`Ctrl+Fn+F2`也不起作用。

我安装的唯一插件是 IdeaVim 插件，但即使禁用它并将键盘映射切换到“Mac OS X 10.5+”，问题仍然存在。

我正在 IDEA 11.1 CE、OS X Lion 和 JDK 1.6 上尝试这个。快速的谷歌没有发现任何问题。有没有其他人遇到过这个问题，或者我只是很愚蠢，没有看到我面前的东西？

编辑：我已经尝试了切换到另一个程序并返回 IDEA 的常用技巧，然后关闭并重新启动它，这两者都没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-08-05T21:32:02.640

我在 IntelliJ 2019.1.1 中遇到了这个问题。对于其他面临相同问题的人，请确保将 IDE 引导 jdk 设置为捆绑版本。要找到它，请导航到操作菜单 (Cmd + Shift + A)，然后查找`Switch Boot JDK`. 所选选项应类似于“ `<VERSION> boot bundled`”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:58:01.650

确保您已安装 Apple 提供的所有最新 Java 更新，**Look&Feel** in `Preferences`| `Appearance`应该是**Mac OS X**。

还可以尝试重命名 IDEA [config/plugins/system](http://devnet.jetbrains.net/docs/DOC-181)文件夹以使用所有默认设置开始，看看是否仍然可以重现它。

# android - 复选框无法与 ListView 一起正常工作

> ID：12085661
> 
> 赞同：1
> 
> 时间：2012-08-23T06:07:41.440
> 
> 标签：android, listview, checkbox

我正在为 listview 的每个 Iten 实现带有 listview 的复选框。我遇到的问题是，当我单击任何单个复选框时，其他一些未单击的复选框也被随机单击。

```
public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub

            View vi = convertView;
            final int as=position;
            if (convertView == null) { // if it's not recycled, initialize some
                // attributes
                LayoutInflater  inflater = (LayoutInflater) activity
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                vi = inflater.inflate(R.layout.grid_item, null);
                holder = new ViewHolder();

                holder.textheader = (TextView) vi.findViewById(R.id.item1);
                holder.textcpu = (TextView) vi.findViewById(R.id.item2);
                holder.text_modified_date = (TextView) vi.findViewById(R.id.item4);
                holder.text_cpu = (TextView) vi.findViewById(R.id.item3);
                holder.text_checkbox=(CheckBox)vi.findViewById(R.id.checkBox1);
                vi.setTag(holder);

                holder.text_checkbox.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        if (holder.text_checkbox.isClickable()) {
                            itemChecked.set(as, true);
                            packages=as;
                        } else if (!holder.text_checkbox.isClickable()) {
                            itemChecked.set(as, false);
                        }
                        String packag=app_package.get(as);
                        Log.d("package listttttttttt", packag);
                    }
                });

            } else {
                holder = (ViewHolder) vi.getTag();

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:27:46.080

试试下面的代码

```
public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        View vi = convertView;
        final int as=position;
        if (convertView == null) { // if it's not recycled, initialize some
            // attributes
            LayoutInflater  inflater = (LayoutInflater) activity
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            vi = inflater.inflate(R.layout.grid_item, null);
            holder = new ViewHolder();

            holder.textheader = (TextView) vi.findViewById(R.id.item1);
            holder.textcpu = (TextView) vi.findViewById(R.id.item2);
            holder.text_modified_date = (TextView) vi.findViewById(R.id.item4);
            holder.text_cpu = (TextView) vi.findViewById(R.id.item3);
            holder.text_checkbox=(CheckBox)vi.findViewById(R.id.checkBox1);
            vi.setTag(holder);

        } else {
            holder = (ViewHolder) vi.getTag();
        }          

             holder.text_checkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() 
             {          
              public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)      
                {                                  
                if(isChecked)
                {
                      // do your stuff
                      itemChecked.set(as, true);
                        packages=as;
                }
                else
                {
                      // do your stuff
                      itemChecked.set(as, false);
                }       

        }
    });

if(itemChecked.size() != 0 && itemChecked.get(position))
        holder.text_checkbox.setChecked(true);
    else
        holder.text_checkbox.setChecked(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:31:00.580

问题是您的`getView()`方法不能正确处理视图。您必须设置新视图的状态并更新回收视图的状态。此外，您必须定义视图的行为。SO上有很多类似问题的线程。我认为[这个](https://stackoverflow.com/questions/11832907/gridview-with-custom-imageadapter-doesnt-update-after-dataset-changes)可以帮助你（它包含工作代码）。

您的代码应类似于以下框架：

```
public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    final int as=position;
    if (convertView == null) { // no view passed, create one
        LayoutInflater  inflater = (LayoutInflater) activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        vi = inflater.inflate(R.layout.grid_item, null);
        // Setup the View content
        holder = new ViewHolder();
        holder.textheader = (TextView) vi.findViewById(R.id.item1);
        holder.textcpu = (TextView) vi.findViewById(R.id.item2);
        holder.text_modified_date = (TextView) vi.findViewById(R.id.item4);
        holder.text_cpu = (TextView) vi.findViewById(R.id.item3);
        holder.text_checkbox=(CheckBox)vi.findViewById(R.id.checkBox1);
        // Do your checkbox initial setup here. 
        holder.text_checkbox.setChecked(getBooleanFromPosition(position));
        vi.setTag(holder);
        // Setup the View behavior
         holder.text_checkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() 
         {          
              // Do your stuff here
    });
    } else {
        // Update your View state
        holder = (ViewHolder) vi.getTag();
        holder.text_checkbox.setChecked(getBooleanFromPosition(position));
    } 
```

显然，您必须将复选框的状态存储在某些数据结构中，例如布尔数组并读取该数据结构，以便知道给定位置的复选框是否被选中/未选中（读取访问权限`getBooleanFromPosition`是应该的做）。并且应该在控制`View`行为的部分中更新该数据结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T07:21:04.463

问题是您不允许将焦点项目与列表视图结合使用，但有一种解决方法：

如果您使用 XML 布局作为列表项，请将复选框可聚焦属性设置为 false：

```
android:focusable="false" 
```

这应该会导致列表项也可以单击。

我希望这能解决你的问题。请让我知道情况如何。

# android - Android Map 在 ListView 中显示方向图

> ID：12085663
> 
> 赞同：1
> 
> 时间：2012-08-23T06:08:08.800
> 
> 标签：android, google-maps

我的 android 应用程序使用 android mapView。它在像谷歌地图这样的列表视图中显示位置地图和行车方向。现在我想在 lisview 中显示与方向相对应的图像。即，如果**方向是向左**，那么我想 s**如何在列表视图中指示向左转的图像**。我该如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:15:23.550

我使用字符串操作做到了这一点，但它不稳定，准确率高达 90%。请看下面的代码：

```
 Drawable draw;
        if(direction.contains("Slight right"))
        {
            draw=getResources().getDrawable(R.drawable.slightright);
        }
        else if(direction.contains("Slight left"))
        {
            draw=getResources().getDrawable(R.drawable.slightleft);
        }
        else if(direction.contains("right"))
        {
            if(direction.contains("left"))
            {
                int index = direction.indexOf("right");
                int index2 = direction.indexOf("left");
                if(index<index2)
                {
                    draw=getResources().getDrawable(R.drawable.turnright);
                }
                else
                {
                    draw=getResources().getDrawable(R.drawable.turnleft);
                }
            }
            else
            {
                draw=getResources().getDrawable(R.drawable.turnright);
            }
        }
        else if(direction.contains("left"))
        {
            draw=getResources().getDrawable(R.drawable.turnleft);
        }
        else if(direction.contains("roundabout") && direction.contains("exit"))
        {
            draw=getResources().getDrawable(R.drawable.roundabout);
        }
        else if(direction.contains("Continue"))
        {
            draw=getResources().getDrawable(R.drawable.straight);
        }
        else if(direction.contains("U-turn"))
        {
            draw=getResources().getDrawable(R.drawable.uturn);
        }
        else
        {
            draw=null;
        }

        //then set the drawable to your ImageView 
```

如果您发现缺少某些内容或有更多图像，则可以使用代码。

这些是我使用的图像：

![微左](../Images/2dfc194242dfd78605cbc7e8a23e0d1b.png)![轻微的权利](../Images/7453d2e55a58937e785b927c110dc468.png)

![左转](../Images/45073f89f84e5a1350dda7a18462e172.png)![右转](../Images/158e81ede380ed805affef4220895909.png)

![迂回](../Images/12eb96ec3ce2f1c5d4a3991176fbcc8f.png)![直的](../Images/f8396f669147ac50fc8c2dbe95dc32c1.png)![掉头](../Images/56cbd1a80af395cc2d7692269c28b805.png)

# php - 如何获取 url 并将它们逐行放入文本文件中？

> ID：12085666
> 
> 赞同：1
> 
> 时间：2012-08-23T06:08:27.817
> 
> 标签：php

假设有一个名为：

```
src="http://www.test.com/1455/"||src="http://www.test.com/image/1456/"|| 
```

现在我想获取 url 部分`http://www.test.com/1455/`。

以下是我的代码。但它不起作用。

```
$url = 'src="http://www.test.com/1455/"||src="http://www.test.com/image/1456/"||';

$a = explode("src=\"",$url); 
$b = explode("||",$a); 
$handle = fopen("output.txt", 'a')) !== FALSE
fwrite($handle2, "{$b[0]}\n"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:15:41.380

使用与此类似的正则表达式，当然您可以根据需要进行修改。这只是一个例子，但它会为你工作

```
$url = 'src="http://www.test.com/1455/"||src="http://www.test.com/image/1456/"||';
preg_match_all('/\b(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)[-A-Z0-9+&@#\/%=~_|$?!:,.]*[A-Z0-9+&@#\/%=~_|$]/i', $url, $result, PREG_PATTERN_ORDER);
print_R($result); 
```

它会打印

```
Array
(
    [0] => Array
        (
            [0] => http://www.test.com/1455/
            [1] => http://www.test.com/image/1456/
        )

) 
```

并将其写入文本文件：

```
$handle = fopen("output.txt", 'a');
foreach($result[0] as $url){
    fwrite($handle, $url."\n");     
}
fclose($handle); 
```

有关正则表达式的更多详细信息，请访问[http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:52:29.090

更一般情况的解决方案。此代码将您的字符串转换为 URL 查询格式并通过[`parse_str`](http://www.php.net/manual/en/function.parse-str.php)函数解析它

```
$url = 'src="http://www.test.com/1455/"||src="http://www.test.com/image/1456/"||var1=aaa||var2=bbb||var2=bbb';
$url = str_replace('||', '&', $url);
$url = preg_replace('/([^\]])=/', '$1[]=', $url);

$params = array();
parse_str($url, $params);

print_r($params); 
```

输出：

```
Array
(
    [src] => Array
        (
            [0] => "http://www.test.com/1455/"
            [1] => "http://www.test.com/image/1456/"
        )

    [var1] => Array
        (
            [0] => aaa
        )

    [var2] => Array
        (
            [0] => bbb
            [1] => bbb
        )

) 
```

然后你可以用这个数组做你想做的一切

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:15:29.400

```
$url = 'src="http://www.test.com/1455/"||src="http://www.test.com/image/1456/"||';

$a = explode("||",$url); 

$handle = fopen("output.txt", 'a');
foreach($a as &$val)
{
   $val = str_replace("src=\"","",$val);
   $val  = str_replace("\"","",$val);
   fwrite($handle, "{$val}\r\n");
} 
```

# jquery - 使用 jQuery 解析 JSON 时出现异常

> ID：12085668
> 
> 赞同：0
> 
> 时间：2012-08-23T06:08:38.607
> 
> 标签：jquery, json

当我使用 jquery 的 $.getJSON 方法加载以下 JSON 时，我收到以下错误 **Uncaught SyntaxError: Unexpected token :** JSON 是使用 Java 的 Simple JSON 库在 servlet 中以编程方式创建的，所以我认为 json 中存在结构错误的可能性很小是加载的 JSON

```
{"links":[{"link":"http:\/\/projects-sushilkumar.rhcloud.com\/YTDownload?url=http:\/\/o-o---preferred---iad09s20---v17---lscache7.c.youtube.com\/videoplayback?upn=OE7v3mttmjE!sparams=cp%2Cgcr%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire!fexp=922401%2C920704%2C912806%2C911406%2C912706!key=yt1!itag=37!ipbits=8!signature=3E14ACACF3CD2F3DB18C6D0D54C00A49E6CAA2BE.B6CD8982AAD85086CC1CCA42F9207FF9AF6DBC84!mv=m!sver=3!mt=1345701731!ratebypass=yes!source=youtube!ms=au!gcr=us!expire=1345726167!ip=50.19.68.176!cp=U0hTSldNVF9LUUNOM19PR1hCOjAzTWtjV2V2eTRu!id=9d8c9310d90eae67!quality=hd1080!fallback_host=tc.v17.cache7.c.youtube.com!type=video\/mp4&title=Tujhe Bhula Diya \/ Hello - Gaurav (Synchronicity)\n      - YouTube.mp4","type":"mp4"},{"link":"http:\/\/projects-sushilkumar.rhcloud.com\/YTDownload?url=http:\/\/o-o---preferred---iad09s20---v16---lscache6.c.youtube.com\/videoplayback?ip=50.19.68.176!upn=OE7v3mttmjE!sparams=algorithm%2Cburst%2Ccp%2Cfactor%2Cgcr%2Cid%2Cip%2Cipbits%2Citag%2Csource%2Cupn%2Cexpire!fexp=922401%2C920704%2C912806%2C911406%2C912706!mt=1345701731!key=yt1!algorithm=throttle-factor!burst=40!ipbits=8!itag=17!sver=3!signature=1C4B63A105890A1B7C63563C1CCDB2187F7FCF74.64100D94E68D0327F78C1BCD89ECB77E1D2D83A3!mv=m!source=youtube!ms=au!gcr=us!expire=1345726167!factor=1.25!cp=U0hTSldNVF9LUUNOM19PR1hCOjAzTWtjV2V2eTRu!id=9d8c9310d90eae67!quality=small!fallback_host=tc.v16.cache6.c.youtube.com!type=video\/3gpp&title=Tujhe Bhula Diya \/ Hello - Gaurav (Synchronicity)\n      - YouTube.3gpp","type":"3gpp"}]} 
```

这是执行以下操作的代码`$.getJSON()`：

```
$('button').click(function() {
    $.getJSON('http://projects-sushilkumar.rhcloud.com/YTGrabber?url=http://you‌​tube.com/watch?v=nYyTENkOrmc&feature=g-all-lik&callback=?',
         function(data) { alert('loaded'); });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:13:55.210

JSON 中的换行符 ( `\n`) 导致它失败。先尝试删除它们。

或者，尝试使用附加的 ie来转义`\`（反斜杠）。您可以在服务器（可能是最好的）或客户端上执行此操作。`\n``\``\\n`

# phpexcel - 在 PhpExcel 库中，当我将值分配给 IW4 时，分配的值不会在那里生成

> ID：12085676
> 
> 赞同：1
> 
> 时间：2012-08-23T06:09:11.983
> 
> 标签：phpexcel

在 PhpExcel 库中，当我将值分配给 IW4 时，分配的值不会在那里生成

脚步：

```
 We are using The code to generate the Value to cell in PHPExcel
      **$objPHPExcel->getActiveSheet()->setCellValue('A1', 'cell value here');**

 When i am using it to generate value to IW4 cell the value not getting generatted

       **$objPHPExcel->getActiveSheet()->setCellValue('IW4', 'cell value here');** 
```

请帮我找到解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:46:48.177

BIFF 格式的 Excel 文件只允许 256 列（最多 IV），OfficeOpenXML 允许更多。如果您在列中设置的值超出限制，PHPExcel 只知道它在您保存时无效（当它知道您是保存为 Excel5 还是 Excel2007 文件时），而不是在该点触发异常（如果它是一个长时间运行的脚本会更令人沮丧），它会默默地丢弃无效的列或行。

如果您在早期版本的 Excel 中打开不支持那么多行和列的 xlsx 文件，这与 Excel 本身的行为类似。

# limejs - 在 LimeJS 中移动精灵时，精灵周围有黑色边框

> ID：12085678
> 
> 赞同：0
> 
> 时间：2012-08-23T06:09:17.823
> 
> 标签：limejs

每当我使用以下代码移动精灵时，黑色边框会出现在它不应该出现的地方。

```
var navigate1 = new lime.animation.Sequence(
 new lime.animation.MoveTo(675,230).setDuration(1),
 new lime.animation.MoveTo(725,200).setDuration(1),
 new lime.animation.MoveTo(735,180).setDuration(1)); 
```

它与代码或精灵图像有关吗？

无论如何刷新屏幕（例如调整浏览器大小）都会使黑色边框消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:27:57.330

我自己不太确定，但我相信你需要做的是创建两个带填充的圆角矩形，使内部的一个小于外部的，然后将内容放在内部矩形内，基本上将元素分层互相顶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:11:39.277

我不记得我从哪里得到这个答案（它应该是 LimeJS 的邮件列表）。这个问题只发生在 LimeJS 中，似乎与场景的自动调整大小有关。将 LimeJS 场景放入一个设置了高度和宽度的场景可以解决这个问题。

# c# - C# 中的异步函数使用

> ID：12085679
> 
> 赞同：7
> 
> 时间：2012-08-23T06:09:18.017
> 
> 标签：c#

我正在尝试在 VS C# 2010 Express 中使用“async”和“await”关键字，但我似乎无法使用此关键字。但是，当我在 VS C# 2012 Professional 中使用这个关键字时，它可以使用。有什么特别的东西必须下载才能使用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T06:11:41.080

[`async`/`await`功能](http://msdn.microsoft.com/en-us/vstudio/async.aspx)是在 C# 5 中引入的，VS 2010 不支持该功能。虽然社区技术预览扩展了 VS2010，但我*强烈*建议您使用 VS 2012 的发布版本而不是预发布版本。CTP 有一些错误，通常在 RTM 版本可用时使用预发布功能不是一个好主意。

请注意，这*不是*Express 与 Professional 的问题——如果您从 VS C# 2010 Express 升级到[VS C# 2012 Express](http://www.microsoft.com/visualstudio/11/en-us/products/express)，它会正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:11:51.350

是的; 对于“Express”，您需要的是“Visual Studio Express 2012”系列中的产品之一；其中，“... for Web”和“... for Windows 8”可供下载，但“Visual Studio Express 2012 for Windows Desktop”尚不可用。

该关键字仅存在于 C# 5 编译器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T06:13:10.303

它是 2012 年的新功能，你不能在 vs 2010 中使用它。

[http://msdn.microsoft.com/en-us/library/hh156513%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/hh156513%28v=vs.110%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T06:11:59.573

你安装了吗

**Visual Studio 异步 CTP（版本 3）**

[http://www.microsoft.com/en-us/download/details.aspx?id=9983](http://www.microsoft.com/en-us/download/details.aspx?id=9983)

并了解更多信息 [http://www.codeproject.com/Articles/127291/C-5-0-vNext-New-Asynchronous-Pattern](http://www.codeproject.com/Articles/127291/C-5-0-vNext-New-Asynchronous-Pattern)

# c++ - C++——使用嵌套类中的类元素？

> ID：12085683
> 
> 赞同：0
> 
> 时间：2012-08-23T06:09:29.323
> 
> 标签：c++, visibility, nested-class

好的，所以我有一个类 LinkedList，它有一个嵌套类 LinkedListIterator。在 LinkedListIterator 的方法中，我引用了 LinkedList 的私有字段。我认为这是合法的。但我得到了错误：

```
from this location 
```

每次我参考他们。

我在封闭类中的字段上收到相应的错误消息：

```
invalid use of non-static data member 'LinkedList<int>::tail' 
```

知道为什么吗？相关代码如下：

```
template<class T>
class LinkedList {

    private:
        //Data Fields-----------------//
        /*
         * The head of the list, sentinel node, empty.
         */
        Node<T>* head;
        /*
         * The tail end of the list, sentinel node, empty.
         */
        Node<T>* tail;
        /*
         * Number of elements in the LinkedList.
         */
        int size;

    class LinkedListIterator: public Iterator<T> {

            bool add(T element) {

                //If the iterator is not pointing at the tail node.
                if(current != tail) {

                    Node<T>* newNode = new Node<T>(element);
                    current->join(newNode->join(current->split()));

                    //Move current to the newly inserted node so that
                        //on the next call to next() the node after the
                        //newly inserted one becomes the current target of
                        //the iterator.
                    current = current->next;

                    size++;

                    return true;
                }

                return false;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:13:12.100

你不能`static`像那样使用非成员。我认为以下示例将清除问题：

```
LinkedList<int>::LinkedListIterator it;
it.add(1); 
```

`current`方法内部会`tail`是什么？没有实例`LinkedList`可言，所以这些成员甚至还不存在。

我不是说让成员`static`，那是错误的，但请重新考虑您的方法。

看看`std`迭代器是怎样的。

# html - 为什么tinymce在复制粘贴html时插入？

> ID：12085685
> 
> 赞同：1
> 
> 时间：2012-08-23T06:09:34.437
> 
> 标签：html, tinymce, wysiwyg

我正在使用最新版本的 TinyMce，

当我从 wikipedia 复制粘贴一些 html 内容时，它实际上插入了许多`&nbsp;`源代码中不存在的内容。

例如，我从 wikipedia 中选择以下字符串：

```
trained professionals and paraprofessionals coming 
```

从这个页面：[http ://en.wikipedia.org/wiki/Health_care](http://en.wikipedia.org/wiki/Health_care)

它具有以下源代码：

```
trained <a href="/wiki/Professional" title="Professional">professionals</a> and <a href="/wiki/Paraprofessional" title="Paraprofessional">paraprofessionals</a> coming 
```

注意：正如我们所见，没有 noob-spaces ( `&nbsp;`)。

然后，当我将它粘贴到 tinymce 时，它​​会生成以下 html：

```
<h3 style="background-image: none; margin: 0px 0px 0.3em; overflow: hidden; padding-top: 0.5em; padding-bottom: 0.17em; border-bottom-style: none; font-size: 17px; font-family: sans-serif; line-height: 19.200000762939453px;"><span style="font-size: 13px; font-weight: normal;">trained&nbsp;</span><a style="text-decoration: none; color: #0b0080; background-image: none; font-size: 13px; font-weight: normal;" title="Professional" href="http://en.wikipedia.org/wiki/Professional">professionals</a><span style="font-size: 13px; font-weight: normal;">&nbsp;and&nbsp;</span><a style="text-decoration: none; color: #0b0080; background-image: none; font-size: 13px; font-weight: normal;" title="Paraprofessional" href="http://en.wikipedia.org/wiki/Paraprofessional">paraprofessionals</a><span style="font-size: 13px; font-weight: normal;">&nbsp;coming</span></h3> 
```

或者，作为纯文本，它看起来像这样：

```
trained&nbsp;professionals&nbsp;and&nbsp;paraprofessionals&nbsp;coming together 
```

这实际上破坏了我的布局，因为它全部放在一行中（作为一个单词）。

任何想法为什么它会这样做以及如何防止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:14:06.770

每当您从网站复制某些内容时，它也会复制文本的样式。因此，您需要做的就是先将复制的内容粘贴到记事本中，然后从那里您可以再次复制相同的内容，然后粘贴到 tinymce 中。

```
(Notepad gives you the plain content without any inline style) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:17:34.540

首先将内容复制到任何地方（维基百科、谷歌等）。过去**记事本**文件中的所有内容。将记事本内容复制到**Tiny MCE 编辑器**后，将删除总的反向链接和空格。这是使用这种类型的更好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:59:13.687

从网页复制内容时，在浏览器中使用查看源代码并从源代码中复制相关部分，然后以“原始模式”（源代码模式、HTML 模式，不管它叫什么——我想 TinyMce 有这样一个模式；如果没有，请使用更好的工具）。为了使这更容易，在 Firefox 中，您可以绘制一个区域，然后右键单击并选择查看选择源的选项。（嗯，这可能需要像 DOM Inspector 这样的附加组件，我不确定。）

即使在“原始”模式下，TinyMce 也有可能将空格转换为其他内容。我在 CMS 中看到过这样的事情（将正常空间虚假地更改为不间断空间），但没有找到任何解释，我希望我不再需要使用这样的 CMS。

# android - 实现垂直进度条时出现错误

> ID：12085686
> 
> 赞同：0
> 
> 时间：2012-08-23T06:09:38.553
> 
> 标签：android, progress-bar

我通过扩展 ProgressBar 类实现了一个垂直进度条。一切都很好，除了它清除了我不打算的大矩形区域。

我的主布局xml中进度条的定义是：

```
<info.realjin.someapp.view.VerticalProgressBar
    android:id="@+id/progressbar1" android:layout_width="wrap_content"
    android:layout_height="fill_parent" android:layout_marginTop="50dip"
    style="@style/Widget.ProgressBar.RegularProgressBar" /> 
```

样式xml是：

```
<style name="Widget"></style>

<style name="Widget.ProgressBar">
    <item name="android:indeterminateOnly">true</item>
    <item name="android:indeterminateBehavior">repeat</item>
    <item name="android:indeterminateDuration">3500</item>
    <item name="android:minWidth">4dip</item>
    <item name="android:maxWidth">40dip</item>
    <item name="android:minHeight">4dip</item>
    <item name="android:maxHeight">400dip</item>
</style>

<style name="Widget.ProgressBar.RegularProgressBar">
    <item name="android:indeterminateOnly">false</item>
    <item name="android:progressDrawable">@drawable/newsprogressbar</item>
    <item name="android:indeterminateDrawable">@android:drawable/progress_indeterminate_horizontal</item>
    <item name="android:minHeight">1dip</item>
    <item name="android:maxHeight">400dip</item>
</style> 
```

据我所知，在水平进度条（官方进度条）定义中，“android:layout_width”属性应该是“fill_parent”，“android:layout_height”属性应该是“wrap_content”。在我的垂直进度条定义中，我必须将这两个属性与上面相反地定义，才能很好地获得进度条功能。但是如果我这样做，进度条顶部和底部之间的所有视图都将被清除，正如我在开头提到的那样。我怎么能避免呢？

顺便说一下，我做过一个实验——即使垂直进度条类扩展了官方进度条类，没有重写任何方法，该区域也会被清除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:31:27.780

前段时间我写了一篇关于这个的教程。[http://www.androidenea.com/2011/10/creating-custom-view-part-1-graphics.html](http://www.androidenea.com/2011/10/creating-custom-view-part-1-graphics.html) 随意使用它作为您自己代码的灵感。

无需进一步查看，我怀疑您的视图在 onMeasure 中报告了错误的测量值。

# backbone.js - 如何创建可重用的主干/主干.marionette 组件，例如数据网格？

> ID：12085693
> 
> 赞同：4
> 
> 时间：2012-08-23T06:10:14.237
> 
> 标签：backbone.js, marionette

我对 Backbone 和 Backbone.Marionette 很陌生。我成功地创建了一个带有数据网格的简单页面，它允许我分页（第一页、上一页、下一页、最后一页）、快速搜索（每次按下键时触发）、选择页面上显示的项目数（5 , 10, 所有, ...)

现在我有了一些工作，我试图改进它并将这些功能作为一种可重用的组件，但我不知道确切的方法。我不知道如何开始细化已经完成的工作。

例如，我希望能够更改由数据网格管理的集合/模型，而无需重写所有内容。这是我不确定如何做到这一点的地方，这可能是由于缺乏知识。因此，您的意见和建议将不胜感激和欢迎。

```
// JST and HAML Assets is used for the templating pre-compilation
Backbone.Marionette.Renderer.render = function(template, data) {
  if (!JST[template]) {
    throw "Template '" + template + "' not found!";
  }
  return JST[template](data);
};

window.MyApp = new Backbone.Marionette.Application();

MyApp.addRegions({
  content: ".content-box"
});

MyApp.Datagrid = (function() {
  var Datagrid, ItemPerPageView, Layout, PagerView, QuickSearchView, Theme, ThemeView, Themes, ThemesView;

  Datagrid = {};

  Layout = Backbone.Marionette.Layout.extend({
    template: "layouts/grid",
    regions: {
      grid: "#grid",
      quickSearch: "#quickSearch",
      itemPerPage: "#itemPerPage",
      pager: ".pager"
    }
  });

  Theme = Backbone.Model.extend();

  Themes = Backbone.ExtendedCollection.paginatedCollection.extend({
    url: "/themes",
    model: Theme,

    initialize: function() {
      var _this = this;

      MyApp.vent.on("quickSearch:term", function(term) {
        _this.quickSearch(term);
      });

      MyApp.vent.on("itemPerPage:count", function(count) {
        _this.perPage(count);
      });

      MyApp.vent.on("pager:previous", function() {
        _this.previous();
      });

      MyApp.vent.on("pager:next", function() {
        _this.next();
      });

      MyApp.vent.on("pager:first", function() {
        _this.first();
      });

      MyApp.vent.on("pager:last", function() {
        _this.last();
      });
    }
  });

  ThemeView = Backbone.Marionette.ItemView.extend({
    tagName: "tr",
    template: "theme",
    model: Theme,

    events: {
      "click span": "edit",
      "blur input": "save"
    },

    edit: function(event) {
      var id, span;
      id = this.model.get("id");
      span = $("span", this.el).hide();
      $("input", this.el).show().focus().val(span.text());
    },

    save: function(event) {
      var id, input, span;
      id = this.model.get("id");
      span = $("span", this.el).show();
      input = $("input", this.el).hide();
      if (this.model.get("name") !== input.val()) {
        this.model.set("name", input.val());
        this.model.save();
      }
      span.text(this.model.get("name"));
    }
  });

  ThemesView = Backbone.Marionette.CompositeView.extend({
    template: "index",
    model: Theme,
    itemView: ThemeView,
    collection: Themes,
    itemViewContainer: "#themes",

    serializeData: function() {
      return this.data;
    }
  });

  QuickSearchView = Backbone.Marionette.View.extend({
    el: "#quickSearch",

    events: {
      "keyup input": "search"
    },

    search: function(event) {
      var searchTerm;
      searchTerm = this.$("input").val().trim();
      MyApp.vent.trigger("quickSearch:term", searchTerm);
    }
  });

  ItemPerPageView = Backbone.Marionette.View.extend({
    el: "#itemPerPage",

    events: {
      "change select": "count"
    },

    count: function(event) {
      var count;
      count = this.$("select").val();
      MyApp.vent.trigger("itemPerPage:count", count);
    }
  });

  PagerView = Backbone.Marionette.View.extend({
    el: ".pager",

    events: {
      "click #next": "next",
      "click #previous": "previous",
      "click #first": "first",
      "click #last": "last"
    },

    first: function(event) {
      MyApp.vent.trigger("pager:first");
    },

    last: function(event) {
      MyApp.vent.trigger("pager:last");
    },

    next: function(event) {
      MyApp.vent.trigger("pager:next");
    },

    previous: function(event) {
      MyApp.vent.trigger("pager:previous");
    }
  });

  Datagrid.initializeLayout = function() {
    var collection;

    Datagrid.layout = new Layout();

    Datagrid.layout.on("show", function() {
      MyApp.vent.trigger("layout:rendered");
    });

    MyApp.content.show(Datagrid.layout);

    collection = new Themes();
    collection.fetch();

    collection.on("reset", function() {
      return Datagrid.layout.grid.show(new ThemesView({
        collection: collection
      }));
    });
  };

  MyApp.vent.on("layout:rendered", function() {
    var itemPerPageView, pagerView, quickSearchView;

    quickSearchView = new QuickSearchView();
    Datagrid.layout.quickSearch.attachView(quickSearchView);

    itemPerPageView = new ItemPerPageView();
    Datagrid.layout.itemPerPage.attachView(itemPerPageView);

    pagerView = new PagerView();
    Datagrid.layout.pager.attachView(pagerView);
  });

  return Datagrid;
})();

MyApp.addInitializer(function() {
  MyApp.Datagrid.initializeLayout();
});

$(document).ready(function() {
  return MyApp.start();
}); 
```

**编辑1：**

根据给出的答案和我自己的想法，我写了一个解决方案的初稿。我没有成功编写一个真正的可重用组件，但我有一个整合我的代码的解决方案。有些部分需要重构和改进。还有一些问题我想在以后的重构中解决。

为了添加一些上下文，应用程序是用 Rails 作为后端编写的。所以有我的javascript文件夹结构

```
assets
|--javascripts
   |--application.js
   |--admin
      |--admin.js
      |--admin.layout.js
      |--subthemes
         |--admin.subtheme.controller.js
         |--admin.subtheme.view.js
      |--themes
         |--admin.theme.controller.js
         |--admin.theme.view.js
|--templates
   |--admin
      |--subthemes
         |--index.hamlc
         |--subtheme.hamlc
      |--themes
         |--index.hamlc
         |--theme.hamlc
   |--layouts
      |--grid.hamlc 
```

首先，application.js 启动。Rails 3.2 中的资产管道将按预期准备依赖项：

```
//= require underscore
//= require backbone
//= require backbone.marionette
//= require_tree ./lib/backbone
//= require hamlcoffee
//= require i18n
//= require i18n/translations
//= require_tree ../templates/
//= require_tree ./admin
//= require_tree ./admin/theme
//= require_tree ./admin/subtheme

I18n.defaultLocale = "en";

Backbone.Marionette.Renderer.render = function(template, data) {
  if (!JST[template]) {
    throw "Template '" + template + "' not found!";
  }
  return JST[template](data);
};

$(document).ready(function() {
  return MyApp.start();
}); 
```

现在，我们可以准备开始管理部分：

```
var AdminRouter, TempView;

// Create the application for admin part
MyApp.Admin = new Backbone.Marionette.Application();

// Define a router to handle the grid collection type change
AdminRouter = Backbone.Marionette.AppRouter.extend({
  initialize: function() {
    var _this = this;

    // Route quite generic to easily change the data in the grid
    this.route(/^admin\/(.*?)$/, "changeCollection");

    // Manage event to handle the navigation on client side
    MyApp.Admin.vent.on("admin:navigate", function(link) {
      _this.navigate(link, {
        trigger: true
      });
    });
  },

  // Trigger an event to change the collection if one exist for the URL
  changeCollection: function(collectionName) {
    MyApp.Admin.vent.trigger("grid:collection:change", collectionName);
  }
});

// Side menu that allows changing the collection in the data grid
SideMenuView = Backbone.Marionette.View.extend({
  el: ".side-menu",

  events: {
    "click a": "handleClick"
  },

  // Prevent the normal behavior on the link click
  handleClick: function(event) {
    event.preventDefault();
    MyApp.Admin.vent.trigger("admin:navigate", $(event.target).attr("href"));
  }
});

// Add the initializer to the main application to prepare the admin part (grid)
MyApp.addInitializer(function() {
  new SideMenuView();
  new AdminRouter();
  Backbone.history.start({
    pushState: true
  });
  MyApp.Admin.start();
}); 
```

然后我们可以定义datagrid部分：

```
// This the grid layout module in the admin namespace
MyApp.Admin.module("GridLayout", function(GridLayout, Admin, Backbone, Marionette, $, _) {
  var ItemPageSelectorView, Layout, PagerView, QuickSearchView;

  // The quick search view handle the related fields to do the quick search
  QuickSearchView = Backbone.Marionette.View.extend({
    el: ".gridQuickSearch",

    events: {
      "keyup input": "search"
    },

    // Get the field content and trigger an event with it
    search: function(event) {
      var searchTerm;
      searchTerm = $(event.target).val().trim();
      $("input", this.$el).val(searchTerm);
      Admin.vent.trigger("grid:quickSearch:term", searchTerm);
    }
  });

  // The item page selecto handle the choice of how many rows should be displayed per page
  ItemPageSelectorView = Backbone.Marionette.View.extend({
    el: ".gridItemPageSelector",

    events: {
      "change select": "count"
    },

    // Get the number of items per page that should be displayed
    count: function(event) {
      var count;
      count = $(event.target).val();
      $("select", this.$el).val(count);
      Admin.vent.trigger("grid:itemPageSelector:count", count);
    }
  });

  // The pager view manage the view components to change the page shown in the data grid
  PagerView = Backbone.Marionette.View.extend({
    el: ".gridPager",

    events: {
      "click #next": "next",
      "click #previous": "previous",
      "click #first": "first",
      "click #last": "last",
      "click #page": "page"
    },

    //
    // The following functions triggers events to go to the right pages
    //
    first: function(event) {
      Admin.vent.trigger("grid:pager:first");
    },

    previous: function(event) {
      Admin.vent.trigger("grid:pager:previous");
    },

    page: function(event) {
      Admin.vent.trigger("grid:pager:page");
    },

    next: function(event) {
      Admin.vent.trigger("grid:pager:next");
    },

    last: function(event) {
      Admin.vent.trigger("grid:pager:last");
    }
  });

  // The grid layout with the regions to display the different part of the data grid
  Layout = Backbone.Marionette.Layout.extend({
    template: "layouts/grid",

    regions: {
      gridTable: "#gridTable",
      gridQuickSearch: ".gridQuickSearch",
      gridItemPageSelector: ".gridItemPageSelector",
      gridPager: ".gridPager"
    }
  });

  // Once the layout is rendered, the different views are attached to the right regions
  Admin.vent.on("grid:layout:rendered", function() {
    var itemPageSelectorView, pagerView, quickSearchView;

    quickSearchView = new QuickSearchView();
    Admin.gridLayout.gridQuickSearch.attachView(quickSearchView);

    itemPageSelectorView = new ItemPageSelectorView();
    Admin.gridLayout.gridItemPageSelector.attachView(itemPageSelectorView);

    pagerView = new PagerView();
    Admin.gridLayout.gridPager.attachView(pagerView);
  });

  // Initializer to do at the application start
  GridLayout.addInitializer(function() {
    Admin.addRegions({
      content: ".content-box"
    });

    Admin.gridLayout = new Layout();

    // Trigger the rendered event when the grid layout is shown
    Admin.gridLayout.on("show", function() {
      Admin.vent.trigger("grid:layout:rendered");
    });

    // Manage the collection data change
    Admin.vent.on("grid:collection:change", function(collectionName) {
      // Close the previous view in the grid table region
      Admin.gridLayout.gridTable.close();

      // Trigger an event to fetch the collection
      Admin.vent.trigger("" + collectionName + ":collection:fetch");

      // Show the grid layout if not already done
      if (!this.shown) {
        this.shown = true;
        Admin.content.show(Admin.gridLayout);
      }
    });
  });

  return GridLayout;
}); 
```

我们完成了结构代码。现在我们可以转到其中一个控制器。例如，主题控制器：

```
MyApp.Admin.module("ThemeController", function(ThemeController, Admin, Backbone, Marionette, $, _) {
  // Define the model to use in the collection
  ThemeController.Theme = Backbone.Model.extend();

  // Define the collection with the related url on the server. The collection extends a paginated collection that has the methods to manage the quick search and the pagination
  ThemeController.Themes = Backbone.ExtendedCollection.paginatedCollection.extend({
    url: "/admin/themes",

    model: ThemeController.Theme,

    initialize: function() {
      var _this = this;

      //
      // The following functions handle the events for the quick search and pagination
      //

      Admin.vent.on("grid:quickSearch:term", function(term) {
        _this.quickSearch(term);
      });

      Admin.vent.on("grid:itemPageSelector:count", function(count) {
        _this.perPage(count);
      });

      Admin.vent.on("grid:pager:previous", function() {
        _this.previous();
      });

      Admin.vent.on("grid:pager:next", function() {
        _this.next();
      });

      Admin.vent.on("grid:pager:first", function() {
        _this.first();
      });

      return MyApp.Admin.vent.on("grid:collection:fetched", function() {
        Admin.gridLayout.gridTable.show(new Admin.ThemeView.Table({
          collection: _this
        }));
      });
    }
  });

  // At the application initilization, we need to be sure this controller can 
  // handle the event to fetch the data from the server
  Admin.addInitializer(function() {
    Admin.vent.on("themes:collection:fetch", function() {
      ThemeController.themes = new ThemeController.Themes();

      // Once the data are fetched from the server, trigger an event to display them
      ThemeController.themes.fetch({
        success: function() {
          Admin.vent.trigger("grid:collection:fetched");
        }
      });
    });
  });
}); 
```

最后是前一个控制器的视图：

```
MyApp.Admin.module("ThemeView", function(ThemeView, Admin, Backbone, Marionette, $, _) {
  // The view to show one item in a row of the data grid
  ThemeView.Item = Backbone.Marionette.ItemView.extend({
    tagName: "tr",
    template: "admin/themes/theme",
    model: Admin.ThemeController.Theme
  });

  // The view to show the collection of item
  ThemeView.Table = Backbone.Marionette.CompositeView.extend({
    template: "admin/themes/index",
    model: Admin.ThemeController.Theme,
    itemView: ThemeView.Item,
    collection: Admin.ThemeController.Themes,
    itemViewContainer: "#themes",

    // ! I was force to add this to have data in the original format that is used by my templates !
    serializeData: function() {
      return this.data;
    }
  });
}); 
```

**备注：**子主题控制器和视图文件包含完全相同的代码。只有模板和东西的种类不同。

通过 Rails 资产管道编译的 HAML 中的网格布局如下所示：

```
.gridPager
  %button#first= "<<"
  %button#previous= "<"
  %button#next= ">"
  %button#last= ">>"

%span.gridItemPageSelector= "Item per page"
  %select
    %option= 5
    %option= 10
    %option{"value" => -1}= "All"

%span.gridQuickSearch= "Quick search:"
  %input#gridSearchTerm{"type" => "text"}

#gridTable

%span.gridItemPageSelector= "Item per page"
  %select
    %option= 5
    %option= 10
    %option{"value" => -1}= "All"

%span.gridQuickSearch= "Quick search:"
  %input#gridSearchTerm{"type" => "text"}

.gridPager
  %button#first= "<<"
  %button#previous= "<"
  %button#next= ">"
  %button#last= ">>" 
```

如您所见，有很多重复。我想在网格的顶部和底部进行快速搜索和分页。目前，最简单的方法是复制代码。当我找到如何做到这一点时，我会改变它。

显示主题的表格模板：

```
%table.table.table-striped
  %thead
    %tr
      %th= "Id"
      %th= "Name"
  %tbody#themes 
```

很简单，没什么特别可说的。此时，标题是硬编码的！

最后，显示主题的项目视图模板：

```
%td= this.id
%td= this.name 
```

这个模板非常简单。

我的情况很好。例如，当我单击其他链接以更改显示的集合时，快速搜索字段和类似的东西不会重新初始化。为此，我想添加一种状态管理来跟踪集合状态，当回到已经显示的集合时，我想像以前一样显示它。

我确信我的解决方案并不完美，可以进行很多重构。我也可能犯了很多“新手”错误。所以请随意挑战我的提议。我尝试学习和改进我的解决方案，并希望它能帮助某人做类似的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T23:51:00.587

好吧，我不是一个大专家，但我就是这样做的，使用 Marionette 和 Requirejs：

a）我创建了一个通用的网格布局视图，它由我的 approuter 调用，其中包含一些参数，如集合、cols 配置（我使用每个循环渲染表头）和行视图：

```
showUsers: function(){

    require(['views/GridGen','collections/user_collection'], function(Grid, UserCollection){

        var Users = new UserCollection();

        App.grid = new Grid({collection: Users ,
                             rowView: 'rowUser',
                             cols_config: App.tables.users});

        App.page.show(App.grid);

    });
}, 
```

b）在我的网格布局中，我渲染等待 onShow 事件的各个部分：

```
var Grid = Backbone.Marionette.Layout.extend({

regions: {
            top_controls: "#top_controls",
            table_view: "#table_view",
            pagination_controls: "#pagination_controls",
            bottom_controls: "#bottom_controls",
         },

onShow: function(){              
    this.renderTable(this.collection);
},

renderTable: function(collection){

    collection.fetch({success:function(){

          require(['views/'+self.options.rowView+'.js'],function(iView){

                   var vista = new View({collection: collection, itemView: iView, thead: self.options.cols_config});

                   App.grid.table_view.show(vista);

                   self.renderPagination(collection);

                   collection.pager();
               });
          }});
} 
```

c）我的通用表视图将 cols 和 itemView 呈现为如下参数：

```
var View = Backbone.Marionette.CompositeView.extend({

initialize: function(){
        this.itemView = this.options.itemView;           
},
serializeData: function(){
        var data = Backbone.Marionette.ItemView.prototype.serializeData.apply(this, arguments);
        data.thead = this.options.thead;
        return data;
},
appendHtml: function(collectionView, itemView, index){
        collectionView.$("tbody").append(itemView.el);
}, 
```

这只是一个一般的想法，我认为这不是最好的方法，但我还没有找到更好的解决方案，希望至少能给你一些提示:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T19:55:12.913

我强烈推荐开箱即用可扩展和可重用的[backgrid 组件。](https://github.com/wyuenho/backgrid)

仅在 0.2.6 版 - 但有很好的追随性，而且非常漂亮

# c# - Windows Phone 模拟器无法启动

> ID：12085696
> 
> 赞同：1
> 
> 时间：2012-08-23T06:10:29.213
> 
> 标签：c#, windows-phone-7, blend, microsoft-expression

我正在安装我的 pc windows phone 7.1 sdk 和 Microsoft Expression Blender 4，在运行我的项目 windows phone 模拟器后没有启动它的显示消息总是像“ **Windows Phone Emulator is doing a complete OS boot ...** ”。我正在等待很多小时显示超时异常。

我的模拟器总是显示如下图：

![在此处输入图像描述](../Images/7b1c02618a69858d1a0790554f2c85d9.png)

帮我解决这个问题！感谢您阅读我的帖子并花费您宝贵的时间！

# java - 一旦您通过蓝牙连接到设备，就会自动下载一些文件

> ID：12085698
> 
> 赞同：0
> 
> 时间：2012-08-23T06:10:45.077
> 
> 标签：java, android, bluetooth, download

我正在创建一个应用程序，该应用程序将`Bluetooth`根据特定的情况连接到设备`UUID`，并且我在这方面取得了成功。

现在我的下一个任务是，一旦我连接到该设备，它应该会在我与该设备配对后自动下载文件。另一台设备只需接受我的连接即可。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:23:29.183

FTP 或 GOEP（通过 OBEX）配置文件？

从您的帖子中不清楚，但我假设您可以控制这两种设备。

让一台设备充当 FTP 服务器，并将要下载的文件放在该设备上指定的 FTP 目录中。

然后，另一台设备可以使用 FTP 配置文件通过蓝牙连接并下载该文件。

# oracle - 清除和删除文件的区别？

> ID：12085699
> 
> 赞同：2
> 
> 时间：2012-08-23T06:11:02.937
> 
> 标签：oracle, file, unix, purge

我已经查过了，但无法找到清除和删除一组文件之间的许多区别。除了简单的备份和删除之外，还有更多需要清除的内容吗？

编辑：具体来说，这是关于 Oracle 中的跟踪文件和日志文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T22:02:02.247

Purge runs on a regular basis. It delete things that marked as delete. You can set up criteria. For example, you can set criteria that to remove all the rows have a flag as delete, and remove those rows from a table.

Delete removes the rows on going. For example, if you have a work queue, and the tasks will be finished after the queue, you can delete those rows since they are not needed anymore.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-14T15:41:20.787

清除过程

清除是释放数据库空间或删除系统不需要的过时数据的过程。清除过程可以基于数据的年龄或数据的类型。

存档过程

存档是备份将在清除过程中删除的过时数据的过程。在归档过程中，数据将从主要事务表移动到备份表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-31T17:17:00.557

--某些情况只允许软删除，表示记录不会被永久删除，以后可以恢复。

-- PURGE 用于永久删除，以后无法恢复。

# java - 销毁和释放回池的 jdbc 连接数之间有什么区别吗？

> ID：12085701
> 
> 赞同：0
> 
> 时间：2012-08-23T06:11:08.617
> 
> 标签：java, glassfish, connection, pool

我在 glassfish 应用程序服务器中部署了一个 Web 应用程序。我在 glassfish 中创建了一个连接池并`DataSource`用于从中获取连接。

在我的连接池中我有设置：
初始池大小：25
最大池大小：500
池调整数量：2

目前客户正在使用我的应用程序，在 glassfish**资源监视器**中，我看到以下详细信息：

NumConnUsed：118
NumConnDestroyed：3664
NumConnReleased：391
NumConnFree：1
NumConnCreated：3784
NumConnAcquired：509

如果有人可以请用数学向我解释上述统计数据。

我的问题是 - 当我们使用`.close()`java 关闭连接时，连接会被发送回池。那么**NumConnReleased**和**NumConnDestroyed**有什么区别呢？

**谢谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:06:47.053

来自[glassfish 文档](http://docs.oracle.com/cd/E19575-01/821-0185/ablvh/index.html)

> numconndestroyed --> 自上次重置以来被破坏的物理连接数。numconnreleased --> 释放到池的逻辑连接数。

物理连接 --> 实际的数据库连接。

逻辑连接 --> 由连接池管理器维护的池连接

上次重置 --> 当连接池被刷新/重置时，这通常会在您重新部署应用程序时发生。

所以你可以看到不同之处在于，一个代表物理连接，而另一个代表逻辑连接。另一个区别是，一个显示自上次重置以来的计数，而另一个显示总计数。

# c# - 如何编写dll文件来访问pdf

> ID：12085702
> 
> 赞同：0
> 
> 时间：2012-08-23T06:11:10.850
> 
> 标签：c#

嗨，我是新编程人员，我编写了一些应用程序来使用一些 dll 文件访问 pdf 内容，但现在我的问题是我们如何编写自己的 dll 来访问 pdf 文件。我知道这是一个很大的过程，但我非常有兴趣了解这一点。任何人请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T06:22:16.083

您可以先阅读[PDF 规范](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_reference_1-7.pdf)（警告此链接后面有 32MB），以了解 PDF 文件格式是如何实现的。如果您希望能够解析它并提取您感兴趣的信息，这是必要的。

同时（因为这个阅读可能会占用你一定的时间）如果你有紧迫的项目截止日期，你可能想要使用现有的库，比如[iTextSharp](http://itextpdf.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:22:26.427

> 我知道这是一个很大的过程，但我非常有兴趣了解这一点。

确实如此。我想建议学习一些开源 API ( [iTextSharp](http://sourceforge.net/projects/itextsharp/files/) ) 和[PDF SDK](http://www.adobe.com/devnet/pdf/library.html)。

# coronasdk - CORONA：如何在触摸或点击时消失对象？

> ID：12085706
> 
> 赞同：1
> 
> 时间：2012-08-23T06:11:22.943
> 
> 标签：coronasdk

我有像石头和苹果这样的物体不断下落，现在我需要在触摸时消失苹果并计算我触摸的苹果数量......请帮助......我对 CORONA 完全陌生......这是我的代码：

```
function newApples()    
rand = math.random( 100 )

if (rand < 60) then
    j = display.newImage("s1.png");
    j.x = 60 + math.random( 160 )
    j.y = -100
    physics.addBody( j, { density=0.9, friction=0.3, bounce=0.3} )
elseif (rand < 80) then
    j = display.newImage("s2.png");
    j.x = 60 + math.random( 160 )
    j.y = -100
    physics.addBody( j, { density=1.4, friction=0.3, bounce=0.2} )
else
    apple = display.newImage("apple1.png");
    apple.x = 60 + math.random( 160 )
    apple.y = -100
    physics.addBody( apple, { density=0.3, friction=0.2, bounce=0.5} )
    apple.name = "apple"
end 
end
local dropApples = timer.performWithDelay( 500, newApples, -1 )

function onTouch(event)

  print("this")
  event:removeSelf()

end

apple:addEventListener("tap",onTouch) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T07:00:12.953

我认为这段代码可以帮助你：

```
local physics = require("physics")
physics.start()
local appletouchcount=0
function newApples()    
rand = math.random( 100 )

if (rand < 60) then
j = display.newImage("s1.png");
j.x = 60 + math.random( 160 )
j.y = -100

elseif (rand < 80) then
j = display.newImage("s2.png");
j.x = 60 + math.random( 160 )
j.y = -100
physics.addBody( j, { density=1.4, friction=0.3, bounce=0.2} )
else
apple = display.newImage("apple1.png");
apple.x = 60 + math.random( 160 )
apple.y = -100
physics.addBody( apple, { density=0.3, friction=0.2, bounce=0.5} )
apple.name = "apple"

function onTouch(event)
appletouchcount= appletouchcount+1
 print("this")
event.target:removeSelf()
print("total"..appletouchcount)
end

apple:addEventListener("touch",onTouch)
end 
end

local dropApples = timer.performWithDelay( 500, newApples, -1 ) 
```

appletouchcount 是您触摸的苹果的计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T10:27:18.567

使用 new-text 在你想要的地方显示你的计数：

```
local physics = require("physics")
physics.start()
local appletouchcount=0
local text = display.newText("Total ", 0, 0, native.systemFont, 16)
text.x=150;text.y=50
function newApples()    
rand = math.random( 100 )

if (rand < 60) then
    j = display.newImage("s1.png");
    j.x = 60 + math.random( 160 )
    j.y = -100

elseif (rand < 80) then
    j = display.newImage("s2.png");
    j.x = 60 + math.random( 160 )
    j.y = -100
    physics.addBody( j, { density=1.4, friction=0.3, bounce=0.2} )
else
    apple = display.newImage("apple1.png");
    apple.x = 60 + math.random( 160 )
    apple.y = -100
    physics.addBody( apple, { density=0.3, friction=0.2, bounce=0.5} )
    apple.name = "apple"

function onTouch(event)
if event.phase=="ended" then
text.text="Total "..appletouchcount
    appletouchcount= appletouchcount+1
  print("this")
  event.target:removeSelf()
print("total"..appletouchcount)

end
print(appletouchcount)
end
apple:addEventListener("touch",onTouch)
end 

end

local dropApples = timer.performWithDelay( 500, newApples, -1 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T10:36:25.170

在我想说一件事之前，即删除不必要的对象它会导致内存问题使应用程序变慢。但即使 lua 语言有内存管理。我认为下面的代码可以达到您的例外

```
local physics = require("physics")
physics.start()
local appletouchcount=0;local count={total1=0,total=0,touch=0,loss=0}
local total=display.newText("Total:0 \n AppleTotal:0 \n AppleGot:0 \n AppleLoss:0",display.contentCenterX*0.25, 60, native.systemFont, 26)

    local collisionListener=function(self,event)
print(event.other.type)
if(event.phase=="began")then
    if(event.other.type=="apple")then
        count.loss=count.loss+1
        event.other:removeSelf();event.other=nil
    else
        event.other:removeSelf();event.other=nil
    end
end
    end

    function newApples(event)    
     count.total1=event.count
   total.text="Total:"..count.total1.." \n AppleTotal:"..count.total.." \n AppleGot:"..count.touch.." \n AppleLoss:"..count.loss
   rand = math.random( 100 )

   if (rand < 60) then
   j = display.newCircle(0,0,40)--display.newImage("s1.png");
   j.x = 60 + math.random( 160 )
   j.y = -100
   j.type="other"
   physics.addBody( j, { density=1.4, friction=0.3, bounce=0.2} )
   elseif (rand < 80) then
   j = display.newCircle(0,0,40)--display.newImage("s2.png");
  j.x = 60 + math.random( 160 )
  j.y = -100
  j.type="other"
  physics.addBody( j, { density=1.4, friction=0.3, bounce=0.2} )
 else
 apple =display.newCircle(0,0,70) --display.newImage("apple1.png");
  apple.x = 60 + math.random( 160 )
 apple.y = -100
apple.type="apple"
apple:setFillColor(255,0,0)
 count.total= count.total+1
 physics.addBody( apple, { density=0.3, friction=0.2, bounce=0.5} )
 apple.name = "apple"

function onTouch(event)
count.touch=count.touch+1
total.text="Total:"..count.total1.." \n AppleTotal:"..count.total.." \n AppleGot:"..count.touch.." \n AppleLoss:"..count.loss

 event.target:removeSelf()
 print("total"..appletouchcount)
 end

 apple:addEventListener("touch",onTouch)
 end 
 end

 botwall=display.newRect(0,display.contentHeight,display.contentWidth,10)
 botwall:setFillColor(22,125,185,255)
 botwall.type="botwall"
 botwall.collision=collisionListener
 physics.addBody(botwall,"static",{ density=100.0, friction=0.0, bounce=0.0} )
 botwall:addEventListener("collision",botwall)

  local dropApples = timer.performWithDelay( 500, newApples, -1 ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-29T07:28:33.383

要使某些东西不可见，只需将其 alpha 设置为 0。这使其 100% 透明。 `apple.alpha = 0;`

文档：[http ://docs.coronalabs.com/api/type/DisplayObject/alpha.html](http://docs.coronalabs.com/api/type/DisplayObject/alpha.html)

# mysql - SQL中组合键索引的内部结构

> ID：12085712
> 
> 赞同：1
> 
> 时间：2012-08-23T06:11:47.960
> 
> 标签：mysql, database, indexing

在阅读了关于表格索引的[这个答案之后，出现了一个疑问。](https://stackoverflow.com/questions/1108/how-does-database-indexing-work)认为我们有一个包含两列的表，两者都不是唯一的，而是组合。所以如果我像这样添加一个唯一键，`UNIQUE KEY (col1,col2)`那么内部索引文件会是什么样子？我的意思是它会保留两棵单独的 b-tree 还是一棵单独的 B-tree，如果只制作一棵 B-tree，那么结构会是什么？

如果我的查询只在**col1**上，那么这个索引会有用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:25:51.823

[http://use-the-index-luke.com/sql/where-clause/the-equals-operator/concatenated-keys](http://use-the-index-luke.com/sql/where-clause/the-equals-operator/concatenated-keys)

这应该回答这两个问题。

# php - 为什么我在 php 中得到这个结果？

> ID：12085717
> 
> 赞同：0
> 
> 时间：2012-08-23T06:11:55.907
> 
> 标签：php

```
 if(NULL ==0){
             echo "test". NULL;//output is test
             echo "<br>";
             echo "test". 0;//output is test0

             } 
```

如果条件说 null 和 0 都相等。但是为什么我得到这个结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:14:26.950

您使用了**松散比较** `==`。如果您使用**严格比较** `===`，那么您会发现差异。

阅读更多 ：

[`type comparison table`](http://www.php.net/manual/en/types.comparisons.php)

[`NULL in PHP`](http://www.php.net/manual/en/language.types.null.php#language.types.null.syntax)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:21:54.533

正如尼克已经说过的那样：在这种情况下，您正在将值添加`0`到一个字符串，使其也成为一个字符串。这就是你获得价值的原因`test0`。

此外，在您的 中`if`，您正在检查零值，而不是严格的真假陈述：

```
<?php

if( NULL == 0 ) {
    echo "test" . NULL;
    echo "<br>";
    echo "test" . 0;
}

?> 
```

输出：

```
test
test0 
```

现在试试这样：

```
<?php

if( NULL === 0 ) {
    echo "test" . NULL;
    echo "<br>";
    echo "test" . 0;
}

?> 
```

您将看到，您没有得到任何输出，因为现在该`if`语句是错误的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T06:13:56.453

因为这取决于您将 0 视为数字零（如无）或字符串（如字符'0'）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T06:15:49.330

PHP 中的 NULL 具有以下属性：
NULL == NULL 为真，
NULL == FALSE 为真。
并且符合关系模型，NULL == TRUE 失败

在这里，您将 NULL 与在 PHP 中输​​出为 true 的 false 进行比较

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T06:14:15.910

`NULL`没有价值，在您的比较中，它的评估结果为 False，并且`0`也被评估为 False（因此 False == False，即为 True），这就是循环体执行的原因。

`NULL`明确表示***“没有价值”***。请参阅[文档](http://www.php.net/manual/en/language.types.null.php)以了解究竟`NULL`是什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T06:15:36.247

因为如果你用NOTHING（null）连接一个字符串，字符串将保持原样，如果你用整数“0”连接，它将被转换为字符串（自动装箱）并连接到原始字符串......

正常行为？

和“null == 0”-> true，但是“null === 0”-> false...

您不仅要检查 VALUE （对于两个 itc 都将是“零”），您还必须使用“===”检查 TYPE 相等性

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-23T06:15:43.837

因为，NULL 字符串不会被打印。因此，第一个 echo 语句连接起来：

```
"test" . NULL => "test" Then Nothing 
```

虽然 0 是逻辑 NULL，但在 String 的情况下它打印为 0。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-23T06:19:03.613

在 PHP 中，如果您将任何值与数字进行比较，则该值将被类型转换为 Int 或 Float，然后进行比较。在您的情况下，首先将 NULL 类型转换为 Int，这会产生 0，然后进行比较，得到 TRUE。检查[PHP 类型比较](http://php.net/manual/en/types.comparisons.php)和[类型杂耍](http://php.net/manual/en/language.types.type-juggling.php)。

# javascript - Magento - 无法在管理员中上传产品图片

> ID：12085722
> 
> 赞同：2
> 
> 时间：2012-08-23T06:12:10.817
> 
> 标签：javascript, flash, .htaccess, magento

我最近从 Magento 1.5 升级到 1.7。从那以后，我无法上传产品图片。出现“浏览”和“上传”按钮，但在达到 100% 后会消失并且不会添加图像。

图片正在上传到 /media/tmp 文件夹，但没有上传到 /media/catalog。此外，我收到 2 个 javascript 错误：

1.  未捕获的类型错误：无法设置未定义的属性“已检查”（prototype.js）
2.  #media_gallery_content-image-0 .cell-每个输入（product.js）

该站点目前也在开发中的子域下，因此 magento 安装不是直接在根目录下。

这是我到目前为止所尝试的：

*   添加 php.ini 文件
*   从媒体文件夹中删除 htaccess 文件
*   以递归方式向 Media 文件夹授予 777 权限
*   禁用最近添加的扩展
*   使用枯燥的上传器（没有 Flash 上传器）
*   使用不同的浏览器（IE、Chrome、FF）
*   用不同的版本替换prototype.js和product.js

我已经为此工作了一段时间，我开始用头撞墙。任何帮助是极大的赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-04T06:38:27.223

我认为你需要解决这个问题：修复与 SUPEE-8788 的兼容性 [https://github.com/adampmoss/CreareSEO/pull/78/files#diff-0496ceab82e51dcadccb8a23074fbe17L97](https://github.com/adampmoss/CreareSEO/pull/78/files#diff-0496ceab82e51dcadccb8a23074fbe17L97)

我希望这有帮助！

# c# - 我无法获取 Dns 区域的所有 ARecord

> ID：12085723
> 
> 赞同：0
> 
> 时间：2012-08-23T06:12:10.867
> 
> 标签：c#, dns

我编写了一个项目来管理 Dns。我可以为创建和删除区域、NsRecord 和 ARecord 编写代码，但我无法获得区域的 ARecords。谁能指导我？

这是我的代码示例：

```
private void CreateZone(string domainName)
{
    wmiScope = new ManagementScope("\\\\" + System.Environment.MachineName + "\\ROOT\\MicrosoftDNs");
    wmiScope.Connect();
    var zonePath = new ManagementPath("MicrosoftDNs_Zone");
    var zone = new ManagementClass(wmiScope, zonePath, null);
    var inParams = zone.GetMethodParameters("CreateZone");

    inParams.Properties["ZoneName"].Value = domainName;
    inParams.Properties["ZoneType"].Value = 0;

    zone.InvokeMethod("CreateZone", inParams, null);

    var query = new ObjectQuery("SELECT * FROM MicrosoftDNs_SOAType WHERE OwnerName = '" + domainName + "'");
    var searcher = new ManagementObjectSearcher(wmiScope, query);
    var zoneRecordes = searcher.Get();

    foreach (ManagementObject zoneRecorde in zoneRecordes)
    {
        var soaParams = zoneRecorde.GetMethodParameters("Modify");
        soaParams.Properties["PrimaryServer"].Value = "ns1.domain.com";
        soaParams.Properties["ResponsibleParty"].Value = "contact@domain.com";
        zoneRecorde.InvokeMethod("Modify", soaParams, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:24:08.277

# jbpm - 设置子执行变量将父执行设置为 null

> ID：12085727
> 
> 赞同：0
> 
> 时间：2012-08-23T06:12:42.347
> 
> 标签：jbpm

如果我在 child 中设置一个执行变量，它也会在 parent 中。[这与这里的变量范围文档一致](http://docs.jboss.com/jbpm/v4/userguide/html_single/#d0e5153)。

但是对于子执行，该值是我设置的实际值，而对于父级，变量的值为空。

我无法解释这种行为。为什么在父执行中只设置键而不设置值？

在儿童处决中

```
child.setVariable("somekey", "somevalue"); 
```

在儿童处决中

```
child.getVariable("somekey"); 
```

返回“某个值”

在父母

```
parent.getVariable("somekey"); 
```

返回空值。

我本来希望变量范围文档的值相同。

4.4版

# java - 以最有效的方式从数据库中获取大量数据

> ID：12085730
> 
> 赞同：2
> 
> 时间：2012-08-23T06:13:03.717
> 
> 标签：java, database, multithreading, performance

在我的应用程序中，我必须读取大量数据。获得所有数据后，我将其放入列表中并对其进行处理并相应地工作。

现在我想知道我是否可以做任何事情来加快从数据库过程中获取数据的速度？我的数据库位于不同的服务器上，我正在使用 java 与数据库进行交互。

我没有确定的数据大小，即我需要处理的特定行数。另外我听说我可以使用多线程，但那该怎么做呢？因为我不知道如何对我的数据进行分区，因为它是不确定的。即如果要应用以下伪代码

```
for(i=0 to number of partition) // Not certain on the number of partitions
    create new thread and get data. 
```

或者，也许我可以根据某些属性散列数据，然后告诉每个线程获取映射的特定索引，但是在获取数据之前如何映射它？

我可以研究哪些所有可能的解决方案，我该怎么做？如果您需要更多信息，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T06:18:42.923

> 我听说我可以使用多线程，但那该怎么做呢？

这绝对是加快从远程服务器查询信息的好选择。
通常在这些任务中 - 与服务器的 IO 是主要瓶颈，并且通过多线程 - 可以同时“请求”多行 - 有效地减少 IO 等待时间。

> 但那怎么办呢？

这个想法是将工作分成更小的任务。查看 java[高级并发 API](http://docs.oracle.com/javase/tutorial/essential/concurrency/highlevel.html)了解更多详细信息。
一种解决方案是让每个线程从服务器读取一块大小`M`，并在每个线程（服务器）中仍有数据时重复该过程。类似的东西（对于每个线程）：

```
data = "start";
int chunk = threadNumber;
while (data != null) {
  requestChunk(chunk);
  chunk += numberOfThreads;
} 
```

我在这里假设一旦您“越界”，服务器就会返回`null`（或`requestChunk()`处理它并返回 null）。

> 或者，也许我可以根据某些属性散列数据，然后告诉每个线程获取地图的特定索引

如果您需要迭代数据并检索所有数据 - 散列通常是一个糟糕的解决方案。它的缓存效率非常低，对于这种情况来说开销太大了。

# install4j - 如何添加应用程序快捷方式但不显示在开始菜单上

> ID：12085732
> 
> 赞同：1
> 
> 时间：2012-08-23T06:13:09.643
> 
> 标签：install4j

我需要为我的应用程序提供一个预先配置了命令行选项的快捷方式。这仅用于故障排除，因此我不希望用户“轻易”找到它。我的想法是在安装过程中在程序目录中创建一个快捷方式。此快捷方式不会出现在开始菜单上。在故障排除期间，用户将导航到程序目录并双击快捷方式，从而调用带有调试选项的程序。

有没有办法使用 Install4j 操作来创建不在开始菜单上的应用程序快捷方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:12:39.463

您可以通过将“条目名称”属性设置为绝对路径名来执行“创建开始菜单条目”操作，例如：

```
${installer:sys.installationDir}/Debug Launcher link 
```

您可以将“调试启动器链接”替换为安装目录中的路径。

# apache - 如何在 Apache Solr 中获取汇总内容？

> ID：12085737
> 
> 赞同：1
> 
> 时间：2012-08-23T06:13:23.753
> 
> 标签：apache, solr, search-engine

我在 apache solr 上运行以下查询：

```
http://localhost:8983/solr/select?indent=on&q=content%3Abook&fl=content 
```

问题是 solr 返回整个内容。我想要的是内容的缩写或摘要，而不是全部内容。我希望 solr 在您搜索某些内容时返回类似于 Google 返回的内容。（两三行）。

我应该编辑查询并添加其他参数还是我应该做的其他事情？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:39:59.717

您可以通过设置[hl.maxAlternateFieldLength](http://wiki.apache.org/solr/HighlightingParameters#hl.maxAlternateFieldLength)参数来使用[Solr 突出显示。](http://wiki.apache.org/solr/HighlightingParameters)它指定要返回的最大字符数。默认情况下它是无限的，因此它会返回所有内容。

# objective-c - 通知知道 nstableview 列开始调整大小

> ID：12085739
> 
> 赞同：1
> 
> 时间：2012-08-23T06:13:28.793
> 
> 标签：objective-c

我正在开发一个 MAC 应用程序，我需要在其中获取用户开始调整 nstableview 列大小的事件。我知道有一个通知 columnDidResize。但是当我们结束调整列大小时它会被调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T21:31:47.123

使用 KVO 通知解决了同样的问题。

将您的表委托设置为 NSTableColumn 宽度的观察者：

```
[column addObserver:self forKeyPath:@"width" options:0 context:nil]; 
```

可以调整选项参数以在实际更改发生之前获取通知。

然后在宽度发生变化时得到通知：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    NSInteger resizedColumn = tableView.headerView.resizedColumn;
    if (resizedColumn != -1)
    {
        if (object == column && 
            object == [tableView.tableColumns objectAtIndex:resizedColumn])
        {
            // User is resizing column
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T00:25:31.867

如@pointum 所示，使用KVO 可以工作。如果您遇到与注销观察者相关的麻烦，您可以执行我实际上最终要做的事情：子类 NSTableColumn 并覆盖 Width 参数的设置器并从那里发送通知。

# android - 在 onReceive() 监听之前取消注册广播调用

> ID：12085740
> 
> 赞同：4
> 
> 时间：2012-08-23T06:13:33.557
> 
> 标签：android, broadcastreceiver, android-contentprovider

我正在开发一个 android 短信应用程序。我用来发送短信的以下代码。

```
 public void sendsms(){
 sendBroadcastReceiver=new BroadcastReceiver() {
       @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            switch (getResultCode()) {

                case Activity.RESULT_OK:
                    System.out.println("hereeeeeeeeeeeeeeeeeeeeeeeeeeeeee8888888888888888");
                    System.out.println("1111111111111111111111111111111111");
                    Toast.makeText(getBaseContext(), "SMS sent",
                        Toast.LENGTH_SHORT).show();
                    ContentValues values = new ContentValues();
                    values.put("address", phoneNumber);
                    values.put("body", message);
                    getContentResolver().insert(Uri.parse("content://sms/sent"), values);
                    afterSend();
                    break;

                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure",
                        Toast.LENGTH_SHORT).show();
                    System.out.println("222222222222222222222222222");
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service",
                        Toast.LENGTH_SHORT).show();
                    System.out.println("333333333333333333333333333333333");
                    ContentValues values1 = new ContentValues();

                    values1.put("address", phoneNumber);
                    values1.put("body", message);
                    getContentResolver().insert(Uri.parse("content://sms/queued"), values1);
                    afterSend();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    System.out.println("44444444444444444444444444");
                    Toast.makeText(getBaseContext(), "Null PDU",
                        Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    System.out.println("4444444444444444444444444444444444");
                    Toast.makeText(getBaseContext(), "Radio off",
                        Toast.LENGTH_SHORT).show();
                    break;

                default:
                    break;
            }               
        }
    };     

    registerReceiver(sendBroadcastReceiver , new IntentFilter(SENT));

    //--- when the SMS hasbeen delivered---

    deliveryBroadcastReciever=new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub

            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    System.out.println("okkkkkkkkkkkkkkkkkkkkkkkkkkk");
                    Toast.makeText(getBaseContext(), "SMS delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    System.out.println("cancellllllllllllllllllll");
                    Toast.makeText(getBaseContext(), "SMS not delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
            }               
        }
    };

    registerReceiver(deliveryBroadcastReciever, new IntentFilter(DELIVERED));

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);

    unregisterReceiver(sendBroadcastReceiver);
    unregisterReceiver(deliveryBroadcastReciever);
} 
```

现在我的问题是，如果我发送一条短信，在`sentsms`到达`onreceive()`.So onReceive() 开关 block() 之前未注册的广播在大多数情况下是无法访问的。如果我不写 unregister 调用，那么在发送第二个 sms 时`onreceive()`。将同时监听第一个和第二个 sms 。

因此，请在完成后通过取消注册呼叫来帮助解决此问题`onreceive()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:35:52.287

我部分解决了这个问题。我从 sms 方法的末尾删除了 unregister(broadcast) 并将其放入 onreceive() 方法中。所以 unregister() 只会在到达 onreceive() 之后发生。我的工作代码粘贴在下面。

```
 public void sendsms(){
 sendBroadcastReceiver=new BroadcastReceiver() {
       @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            switch (getResultCode()) {

                case Activity.RESULT_OK:
                    System.out.println("hereeeeeeeeeeeeeeeeeeeeeeeeeeeeee8888888888888888");
                    System.out.println("1111111111111111111111111111111111");
                    Toast.makeText(getBaseContext(), "SMS sent",
                        Toast.LENGTH_SHORT).show();
                    ContentValues values = new ContentValues();
                    values.put("address", phoneNumber);
                    values.put("body", message);
                    getContentResolver().insert(Uri.parse("content://sms/sent"), values);
                    afterSend();
                    break;

                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure",
                        Toast.LENGTH_SHORT).show();
                    System.out.println("222222222222222222222222222");
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service",
                        Toast.LENGTH_SHORT).show();
                    System.out.println("333333333333333333333333333333333");
                    ContentValues values1 = new ContentValues();

                    values1.put("address", phoneNumber);
                    values1.put("body", message);
                    getContentResolver().insert(Uri.parse("content://sms/queued"), values1);
                    afterSend();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    System.out.println("44444444444444444444444444");
                    Toast.makeText(getBaseContext(), "Null PDU",
                        Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    System.out.println("4444444444444444444444444444444444");
                    Toast.makeText(getBaseContext(), "Radio off",
                        Toast.LENGTH_SHORT).show();
                    break;

                default:
                    break;
            }
                            context.unregister(this);               
        }
    };     

    registerReceiver(sendBroadcastReceiver , new IntentFilter(SENT));

    //--- when the SMS hasbeen delivered---

    deliveryBroadcastReciever=new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub

            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    System.out.println("okkkkkkkkkkkkkkkkkkkkkkkkkkk");
                    Toast.makeText(getBaseContext(), "SMS delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    System.out.println("cancellllllllllllllllllll");
                    Toast.makeText(getBaseContext(), "SMS not delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
            }   
            context.unregister(this)            
        }
    };

    registerReceiver(deliveryBroadcastReciever, new IntentFilter(DELIVERED));

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);

} 
```

现在我的代码在 sendBroadcastReceiver 上运行良好。

但是在deliveryBroadcastReciever 的情况下，receiver() 永远不会收听任何交付。所以deliveryBroadcastReciever 正在注册每个发送短信。

所以我尝试了 onstop()

```
@Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
             unregister(deliveryBroadcastReceiver);
             } 
```

但是 onStop() 仅取消注册最后注册的deliveryBroadcastReceiver 对象。如果我发送两次短信，将有两个deliveryBroadcastReceiver 对象，onstop() 将仅取消注册最后一个对象。请朋友们帮帮我。

# javascript - 使用 Jquery 添加 XML 元素

> ID：12085744
> 
> 赞同：0
> 
> 时间：2012-08-23T06:13:58.510
> 
> 标签：javascript, jquery, xml, xml-parsing

我一直在努力将 XML 元素添加到 XML 结构中，但没有成功，这是我的代码。

```
var parseXml;
        if (window.DOMParser) {
            parseXml = function(xmlStr) {
            return ( new window.DOMParser() ).parseFromString(xmlStr, "text/xml");
            };
        }
        else if (typeof window.ActiveXObject != "undefined" && new window.ActiveXObject("Microsoft.XMLDOM")) {
            parseXml = function(xmlStr) {
                var xmlDoc = new window.ActiveXObject("Microsoft.XMLDOM");
                xmlDoc.async = "false";
                xmlDoc.loadXML(xmlStr);
                return xmlDoc;
            };
        }
        else {
            parseXml = function() { return null; }
        }
        var xmlTree = parseXml("<root></root>");

        function add_children(child_name,parent_name)
        {
            str = '<'+child_name+'></'+child_name+'>';
            //strXML = parseXml(str);
            $(xmlTree).find(parent_name).append(str);
            var xmlString = (new XMLSerializer()).serializeToString(xmlTree);
            console.log(xmlString);
        }
        add_children("apple","root");
        add_children("orange","root");
        add_children("lychee","root"); 
```

但控制台显示`<root/>`所有三次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:41:41.603

问题是您在 Html 中创建节点`document`，而不是在 XML 中创建节点，因此您无法附加它。更改此行：

```
str = '<'+child_name+'></'+child_name+'>'; 
```

对于这个：

```
str = xmlTree.createElement(child_name); 
```

[请参阅http://jsfiddle.net/W9Wpb/](http://jsfiddle.net/W9Wpb/)中的工作代码

# unit-testing - Meck 和测试驱动开发工作流程？

> ID：12085746
> 
> 赞同：2
> 
> 时间：2012-08-23T06:14:07.050
> 
> 标签：unit-testing, testing, erlang, mocking, tdd

据我所知，TDD的典型工作流程（W1）如下：

1.  开发功能测试；
2.  运行测试并观察它是否失败；
3.  开发功能；
4.  再次运行测试并观察它通过；
5.  重复 1。

但是使用 Meck 和其他模拟框架，工作流（W2）可能如下：

1.  为所有功能编写测试并观察它们是否失败；
2.  借助模拟对象开发完整的系统原型（所有功能及其交互）；
3.  再次运行测试并观察它们通过；
4.  逐步将每个模拟函数更改为真正的模拟函数。

我倾向于认为W2比W1有一些优势：

*   写得更快；
*   更容易集成，因为所有测试（单元测试和集成测试）都将提前编写；他们也会从一开始就过去；

所以，问题是：

W2真的具备上述优势吗？如果不是，我如何将 Meck 纳入我的日常开发作为一个既定的例程，即使用它的工作流程是什么？还是我应该在没有任何指导的情况下随机使用 Meck？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:15:33.430

您不能专门使用模拟来使测试通过。如果可能的话，要么你的测试不值得他们的名字，要么你不需要用“真实”代码替换模拟，因为模拟已经做了你想让代码做的事情。

模拟通常用于将被测系统 (SUT)，即您要测试的类与其依赖项隔离开来。依赖项是模拟的，SUT 不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T00:44:52.387

W2 假设您在开始之前已经完成了系统的正确设计——我很少进入这个位置。您必须预先进行大设计；IME 这意味着您已经转移了开发过程中昂贵的部分，而不是消除了它。而且，如果您的初始设计碰巧有缺陷（而且确实会存在），那么恢复将是昂贵的。

从一开始就通过的测试是错误，而不是功能。编写专门失败的测试是一个关键步骤——你将如何证明你编写的代码确实有效？

我不能专门与 Meck 交谈，但我可以谈论一般的 TDD 工作流程，它自然地结合了各种风格的模拟对象。模拟对象的存在是为了让单元测试通过，而不管系统的其余部分是否正常工作。它们还为您接下来需要做的事情提供自然的路标。为了使单元测试 A 通过，您必须模拟一个 B 类。显然，接下来要做的是实现一个 B 类，它的行为方式与它的模拟所描述的方式相同。

您的 W1 省略了一些关键步骤，其中包含可能会阐明模拟对象在 TDD 中所扮演的角色。以伪 Perl 为例，TDD 看起来更像这样：

```
while (not $project->is_feature_complete()) {
  my $feature_test = write_feature_test();
  die "You screwed up" if $feature_test->does_pass();
  $feature_test_suite->add($feature_test);
  while (not $feature_test_suite->does_pass()) {
    my $test = write_unit_test();
    die "You screwed up" if $test->does_pass();
    $unit_test_suite->add($test);
    while (not $unit_test_suite->does_pass()) {
      write_exactly_enough_code_to_pass_unit_test();
      while ($project->has_duplication()) {
        $project->eliminate_duplication();
      }
    }
  }
} 
```

与 W1 的主要区别在于：

*   围绕单元测试循环的是另一个功能测试循环。
*   功能测试可能会持续失败一段时间；在其所有依赖项的集成完成之前，它不能通过。
*   我们为通过单元测试而编写的代码非常节俭。而且由于模拟对象比真正的工作类更容易编写，这意味着我们在尝试这样做时会模拟出我们发现的每个依赖项。
*   消除重复是至关重要的，也是我们经常用真实实现替换模拟对象的步骤。

最后一点可能需要更多的放大（最好不要通过示例[1](http://en.wikipedia.org/wiki/Test-Driven_Development_by_Example)重复*整个**测试驱动开发*）。发生的情况是，使第二次测试通过的最短方法通常是使用模拟对象的副本，该模拟对象使第一次测试通过并调整了一些参数。在“消除重复”步骤中，我们将这两个模拟对象组合成一个参数化对象。一旦我们重复这个循环几次，我们构建的模拟对象与我们需要的真实对象几乎完全相同，因此我们可以使用它的代码开始实现它迄今为止隐藏的依赖关系。

在所有这些中，模拟对象的作用几乎总是相同的：允许您通过单元测试，而不必一次实现整个系统。在我看来，使用它们预先实现整个系统似乎浪费了它们的大部分效用，同时也让您面临大型预先设计的常见风险。我不认为你会得到你认为你会得到的好处；充其量，您更改会计以减少“编码”所花费的时间。

# ruby-on-rails - 使用 Ruby aws-sdk 跟踪文件到 S3 的上传进度

> ID：12085751
> 
> 赞同：8
> 
> 时间：2012-08-23T06:14:30.057
> 
> 标签：ruby-on-rails, file-upload, amazon-s3, progress-bar

首先，我知道在 SO 中有很多类似于这个问题的问题。在过去的一周里，我读了大部分，如果不是全部的话。但我仍然无法为我完成这项工作。

我正在开发一个 Ruby on Rails 应用程序，它允许用户将 mp3 文件上传到 Amazon S3。上传本身可以完美运行，但进度条会大大改善网站上的用户体验。

我正在使用亚马逊官方提供的 aws-sdk gem。在上传过程中，我在其文档中到处寻找回调，但我找不到任何东西。

这些文件一次一个地直接上传到 S3，因此不需要将其加载到内存中。也不需要上传多个文件。

我想我可能需要使用 JQuery 来完成这项工作，我对此很好。我发现这看起来很有希望：[https](https://github.com/blueimp/jQuery-File-Upload) ://github.com/blueimp/jQuery-File-Upload 我什至尝试按照这里的示例进行操作：[https ://github.com/ncri/s3_uploader_example](https://github.com/ncri/s3_uploader_example)

但我就是无法让它为我工作。

aws-sdk 的文档还简要描述了带有块的流式上传：

```
 obj.write do |buffer, bytes|
     # writing fewer than the requested number of bytes to the buffer
     # will cause write to stop yielding to the block
  end 
```

但这几乎没有帮助。如何“写入缓冲区”？我尝试了一些总是会导致超时的直观选项。我什至如何根据缓冲更新浏览器？

有没有更好或更简单的解决方案？

先感谢您。我将不胜感激有关此主题的任何帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T18:45:42.150

将块传递给#write 时产生的“缓冲区”对象是 StringIO 的一个实例。您可以使用#write 或#<< 写入缓冲区。这是一个使用块形式上传文件的示例。

```
file = File.open('/path/to/file', 'r')

obj = s3.buckets['my-bucket'].objects['object-key']
obj.write(:content_length => file.size) do |buffer, bytes|
  buffer.write(file.read(bytes))
  # you could do some interesting things here to track progress
end

file.close 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-25T23:00:34.030

在阅读了[AWS gem](https://github.com/aws/aws-sdk-ruby)的源代码之后，我已经调整（或主要复制）分段上传方法以根据已上传的块数产生当前进度

```
s3 = AWS::S3.new.buckets['your_bucket']

file = File.open(filepath, 'r', encoding: 'BINARY')
file_to_upload = "#{s3_dir}/#{filename}"
upload_progress = 0

opts = {
  content_type: mime_type,
  cache_control: 'max-age=31536000',
  estimated_content_length: file.size,
}

part_size = self.compute_part_size(opts)

parts_number = (file.size.to_f / part_size).ceil.to_i
obj          = s3.objects[file_to_upload]

begin
    obj.multipart_upload(opts) do |upload|
      until file.eof? do
        break if (abort_upload = upload.aborted?)

        upload.add_part(file.read(part_size))
        upload_progress += 1.0/parts_number

        # Yields the Float progress and the String filepath from the
        # current file that's being uploaded
        yield(upload_progress, upload) if block_given?
      end
    end
end 
```

compute_part_size 方法[在此处](https://github.com/aws/aws-sdk-ruby/blob/5a0181a93abe2a6bd5ebdfccf7a81a69c66c4893/lib/aws/s3/s3_object.rb#L1351)定义，我已将其修改为：

```
def compute_part_size options

  max_parts = 10000
  min_size  = 5242880 #5 MB
  estimated_size = options[:estimated_content_length]

  [(estimated_size.to_f / max_parts).ceil, min_size].max.to_i

end 
```

此代码在 Ruby 2.0.0p0 上进行了测试

# php - PHP：编写严格的代码有什么好处吗？

> ID：12085755
> 
> 赞同：2
> 
> 时间：2012-08-23T06:14:51.350
> 
> 标签：php, error-reporting, strict

当我设置`error_reporting(E_ALL | E_STRICT);`时，我的代码会产生`Undefined variable`错误。我可以解决它们，但我想知道编写通过严格检查的代码和`E_STRICT`关闭代码之间在速度或内存使用方面是否有任何差异？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T06:17:46.327

没有机械效益。但是，您可以避免做一些非常常见、非常愚蠢的事情，比如在使用变量之前并不总是初始化它——因为使用`E_STRICT`on，PHP 将产生错误，而不是允许函数以潜在的灾难性和可能不可见的方式中断。

例如，完全可以想象一个数据库支持的应用程序使用一个没有被所有可能的执行路径初始化的变量：

```
// Adds an allergy to the user's records
public function Add($AllergyID) {
    $Patient = $this->Patient->Load();

    if ($Patient->Insurance->StartDate < now()) {
          $Allergies = $Patient->Allergies->Get();
          $Allergies[] = $AllergyID;
    }

    $Patient->Allergies->Set($Allergies);
} 
```

最终它没有被初始化，并且某人的病历表被静默截断。

简而言之，您应该始终带着所有警告进行开发：这是您的第一道防线。但是，当需要将代码投入生产时，您绝对希望**关闭错误报告。**您不希望恶意用户深入了解您的应用程序的内部运作，或者*更糟*的是您的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:34:53.083

没有速度优势，但在使用 PHP 5.2.0 时。或在您应该使用 E_ALL | 之前 E_STRICT 用于开发目的。

但是对于 PHP 5.2.0 以上的 E_STRICT 是包含在 E_ALL 本身中的。

或者你可以使用 error_reporting(-1); 这将始终包括所有内容，即使它们存在于 E_ALL 中。

使用下面的 stackoverflow 问题以供进一步参考 [什么是推荐的 error_reporting() 开发设置？E_STRICT 呢？](https://stackoverflow.com/questions/74847/what-is-the-recommended-error-reporting-setting-for-development-what-about-e)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:21:26.933

错误越少，速度越快；可维护性将增加；内存增强也可能，因为日志不会是flus

# asp.net - c# linq 按两周或 x 天分组？

> ID：12085756
> 
> 赞同：0
> 
> 时间：2012-08-23T06:15:12.760
> 
> 标签：asp.net, linq, linq-to-sql

嗨，我正在尝试找出给定年份和月份的每个月的上半月和下半月如何将项目分组？

IE

比如说我必须在每个月的 6 号和每个月的 15 号列出项目的名称。

比如说我有

```
Flight Name           Flight Date

Flight 1               01/07/2012

Flight 2               12/07/2012

Flight 3               18/07/2012

Flight 4               28/07/2012 
```

我将如何拆分它，所以我想在一年/一个月内将航班按两周分组

IE

2012 年 7 月第 1 周和第 2 周的航班

2012 年 7 月第 3 周和第 4 周的航班

所以这就是我到目前为止所拥有的......最终它必须是某种使用自动映射器的视图模型等我还不确定它是如何将它巧妙地融入某种 ViewModel 形式......

```
var flightEntities = from f in flightsAsViewModels
                             select new
                             {
                                YearGroups = from flightYearGroup in context.Flights
                                group flightYearGroup by flightYearGroup.FlightDateTime.Year
                                into yearGroup
                                orderby yearGroup.Key descending
                                select new
                                {
                                     Year = yearGroup.Key,
                                     MonthGroups = from flightMonthGroup in yearGroup
                                                   group flightMonthGroup by flightMonthGroup.FlightDateTime.Month
                                                   into monthGroup
                                                   orderby monthGroup.Key ascending
                                                   select new {
                                                       Month = monthGroup.Key, 
                                                       HalfMonthGroups = from months in monthGroup
                                                                         group months by (months.FlightDateTime.Day <= 15 ? 1 : 2) into splitMonthFlights
                                                                         orderby splitMonthFlights.Key
                                                                         select new { WhichHalfOfMonth = splitMonthFlights.Key, Flights = splitMonthFlights }
                                                  } 

                                 }
                            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:55:27.090

我特此粘贴 Linq 代码以满足要求。但不确定，这仍然可以以最短的方式实现。如果是这样，请告诉我。

```
 var monthGroupedDates = from d in dates
                            group d by d.Month into fd
                            select new { Month = fd.Key, Dates = fd };

        foreach (var g in monthGroupedDates)
        {
            var groupByHalf = from n in g.Dates
                              group n by (n.Day <= 15 ? 1 : 2) into gd
                              orderby gd.Key 
                              select new { WhichHalf = gd.Key, Dates = gd };
            foreach (var gh in groupByHalf)
            {
                string printString = (gh.WhichHalf == 1 ? "First" : "Second") + " week dates are:";
                foreach (var h in gh.Dates)
                {
                    printString += h.ToString("dd/MM/yyyy") + ";";
                }
                Console.WriteLine(printString);
            }

        } 
```

请注意，日期是您的要求中提到的日期。如果它的 Linq with SQL，这可能需要稍作改动。

拉吉

# c# - 正则表达式接受数字+“：”或“。” + 数字

> ID：12085757
> 
> 赞同：2
> 
> 时间：2012-08-23T06:15:13.793
> 
> 标签：c#, regex

我知道这可能是一个关于正则表达式的新手问题，但我希望有人能提供帮助。我需要一个接受 0-3 位数字 + 零或 1 个字符“：”或“。”的 reg 表达式。+ 0-2 位数字。也不应该有其他字符允许

然后，用户可以输入有效数字，例如

```
100:,
:0,
:,
1、
10.6,
111:11
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:19:14.420

你可以使用

```
^\d{0,3}([:\.]\d{0,2})?$ 
```

该部分`\d{0,3}`匹配零到三位数字，该部分`[:\.]\d{0,2}`匹配 a`:`或`.`，后跟最多两位数，大括号`?`使该部分成为可选。`^`并将`$`表达式锚定在字符串的开头和结尾。

[在http://regexr.com?31tqd](http://regexr.com?31tqd)上查看它的实际应用

# c# - 编写C#程序时无法调用COM接口

> ID：12085760
> 
> 赞同：-1
> 
> 时间：2012-08-23T06:15:21.323
> 
> 标签：c#, com, interface

有人在 C# 中使用过 COM 接口吗？我添加了一个引用，发现它包含接口。不知道怎么调用指定接口的方法。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:23:21.783

当然，当人们必须访问不是用 .NET 编写的或没有现有 .NET 包装器但通过 COM 公开的功能时，他们就会调用 COM 接口。

[这称为 COM 互操作](http://en.wikipedia.org/wiki/COM_Interop)。

一个常见的例子是使用 COM 互操作来处理 Word 和 Excel。

完整的解释超出了典型的 Stack Overflow 答案的范围。[MSDN 上](http://msdn.microsoft.com/en-us/library/aa645712%28v=vs.71%29.aspx)有一个教程可以帮助您入门。

如果您在开始这条道路时有具体问题，只需在此处发布新问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:26:47.360

必须有一个可以调用的函数或类似的东西，并将实例返回到接口。例如 DirectSound 使用 CreateDirectSound 创建 IDirectSound 接口实例。使用该实例，您可以创建 IDirectSoundBuffer 实例等等 :)

# c - Windows 中的 lstat() 替代方法是什么？

> ID：12085761
> 
> 赞同：7
> 
> 时间：2012-08-23T06:15:24.087
> 
> 标签：c, stat

在 linux 中，当`stat()`与断开的链接文件一起使用时，它会以`-1`. 所以我用`lstat()`了哪个成功了。

对于 windows 中的相同情况，`_stat()`由于快捷方式损坏而失败，但`_lstat()`windows 中没有。请帮助`lstat()`在 Windows 中找到替代方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-30T18:14:51.967

接受的答案没有提供完整的`stat`等价物。`stat`结构定义为

```
struct stat {
               dev_t     st_dev;     /* ID of device containing file */
               ino_t     st_ino;     /* inode number */
               mode_t    st_mode;    /* protection */
               nlink_t   st_nlink;   /* number of hard links */
               uid_t     st_uid;     /* user ID of owner */
               gid_t     st_gid;     /* group ID of owner */
               dev_t     st_rdev;    /* device ID (if special file) */
               off_t     st_size;    /* total size, in bytes */
               blksize_t st_blksize; /* blocksize for filesystem I/O */
               blkcnt_t  st_blocks;  /* number of 512B blocks allocated */
               time_t    st_atime;   /* time of last access */
               time_t    st_mtime;   /* time of last modification */
               time_t    st_ctime;   /* time of last status change */
           }; 
```

但`GetFileAttributes..`不提供任何所有者信息（它在 WIN32_FIND_DATA 对象中返回数据）。如果您需要该所有者信息，您可以使用`GetSecurityInfo`[1]。

[1] [https://msdn.microsoft.com/en-us/library/windows/desktop/aa446629%28v=vs.85%29.aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/aa446629%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-23T06:40:13.220

[GetFileAttributes](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364944%28v=vs.85%29.aspx)或[GetFileAttributesEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364946%28v=vs.85%29.aspx)可能（如果我理解正确`stat`的话`lstat`）。引用文档：

> 符号链接行为 - 如果路径指向符号链接，则函数返回符号链接的属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T10:46:39.590

嘿 _stat() 或 stat() 在损坏的快捷方式上也能正常工作。这就是原因，在 Windows 中没有像 lstat(UNIX) 这样的替代方法。

在 Unix 中，stat() 因链接断开而失败，因此提供了 lstat 来解决问题。

感谢大家的帮助。

# android - 无法使用 achartengine 在 android 中显示条形图

> ID：12085764
> 
> 赞同：0
> 
> 时间：2012-08-23T06:15:30.233
> 
> 标签：android, eclipse, bar-chart

现在我正在尝试使用 achartengine 在 android 中创建条形图。但是当我尝试运行我的应用程序时，它只是提示这样**“抱歉您的应用程序意外关闭！..再试一次。强制关闭”**

任何人都可以让我清楚这个概念吗？

*请找到我的来源和 logcat 以供参考*

**LOGCAT**

```
08-23 11:22:01.892: D/AndroidRuntime(451): Shutting down VM
08-23 11:22:01.922: W/dalvikvm(451): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-23 11:22:02.002: E/AndroidRuntime(451): FATAL EXCEPTION: main
08-23 11:22:02.002: E/AndroidRuntime(451): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.barchart/com.example.barchart.BarActivity}: java.lang.ClassCastException: com.example.barchart.BarActivity
08-23 11:22:02.002: E/AndroidRuntime(451):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
08-23 11:22:02.002: E/AndroidRuntime(451):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-23 11:22:02.002: E/AndroidRuntime(451):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-23 11:22:02.002: E/AndroidRuntime(451):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-23 11:22:02.002: E/AndroidRuntime(451):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-23 11:22:02.002: E/AndroidRuntime(451):  at android.os.Looper.loop(Looper.java:123)
08-23 11:22:02.002: E/AndroidRuntime(451):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-23 11:22:02.002: E/AndroidRuntime(451):  at java.lang.reflect.Method.invokeNative(Native Method)
08-23 11:22:02.002: E/AndroidRuntime(451):  at java.lang.reflect.Method.invoke(Method.java:521)
08-23 11:22:02.002: E/AndroidRuntime(451):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-23 11:22:02.002: E/AndroidRuntime(451):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-23 11:22:02.002: E/AndroidRuntime(451):  at dalvik.system.NativeStart.main(Native Method)
08-23 11:22:02.002: E/AndroidRuntime(451): Caused by: java.lang.ClassCastException: com.example.barchart.BarActivity
08-23 11:22:02.002: E/AndroidRuntime(451):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-23 11:22:02.002: E/AndroidRuntime(451):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
08-23 11:22:02.002: E/AndroidRuntime(451):  ... 11 more 
```

**BarActivity.java**

```
 public class BarActivity{
   public Intent getIntent(Context context)
   { 
     XYMultipleSeriesRenderer mrenderer = new XYMultipleSeriesRenderer();
     double[] range = {0,5,0,5};

    int[] y = {24,30,12};
    CategorySeries series1 = new CategorySeries("Today");
    CategorySeries series2 = new CategorySeries("Next day");
    CategorySeries series3 = new CategorySeries("2 days later");

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

 for (int i=0;i<3;i++){
     switch(i){
     case 0:
            series1.add(y[0]);
            dataset.addSeries(series1.toXYSeries());
            break;
     case 1:
            series2.add(y[1]);
            dataset.addSeries(series2.toXYSeries());
            break;
     case 2:
            series3.add(y[2]);
            dataset.addSeries(series3.toXYSeries());
            break;
     }
 }

XYSeriesRenderer renderer1 = new XYSeriesRenderer();
renderer1.setColor(Color.GREEN);
XYSeriesRenderer renderer2 = new XYSeriesRenderer();
renderer2.setColor(Color.BLUE);
XYSeriesRenderer renderer3 = new XYSeriesRenderer();
renderer3.setColor(Color.RED);
    mrenderer.setAxisTitleTextSize(16);
    mrenderer.setChartTitleTextSize(20);
    mrenderer.setLabelsTextSize(15);
    mrenderer.setLegendTextSize(15);
    mrenderer.setBarSpacing(0);
    mrenderer.setXLabels(1);
    mrenderer.addXTextLabel(2.5, "Outstanding jobs");
    mrenderer.setMargins(new int[] {20, 30, 15, 0});
    mrenderer.setAxesColor(Color.WHITE);
    mrenderer.setChartTitle("Work per day");
    mrenderer.setXTitle("Days");
    mrenderer.setInitialRange(range, 1);
    mrenderer.setBarSpacing(1);
    mrenderer.setXAxisMin(0);
    mrenderer.setXAxisMax(5);
    mrenderer.setYAxisMin(0);
    mrenderer.setPanEnabled(false, false);
    mrenderer.setZoomEnabled(false, false);
    mrenderer.addSeriesRenderer(renderer1);
    mrenderer.addSeriesRenderer(renderer2);
    mrenderer.addSeriesRenderer(renderer3);
Intent intent = ChartFactory.getBarChartIntent(context, dataset, mrenderer, Type.DEFAULT);
return intent;  
}
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
</LinearLayout> 
```

**清单.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.barchart"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity android:name="org.achartengine.GraphicalActivity" />
    <activity
        android:name=".BarActivity"
        android:label="@string/title_activity_bar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:14:21.570

这不是 AChartEngine 问题。

您`BarActivity`必须扩展`Activity`该类或其子类之一。

# c# - 使用带有格式的excel包编写excel

> ID：12085767
> 
> 赞同：7
> 
> 时间：2012-08-23T06:15:38.870
> 
> 标签：c#, excel, datatable, excelpackage

我想使用来自的 excel 包编写 excel 文件`System.Data.DataTable`

并且需要在excel文件中格式化一些单元格，比如背景颜色。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T06:44:54.033

虽然您可以使用**互操作**调用来创建一个 excel 文件，但我**更喜欢没有**它的解决方案。根据您提供的详细信息，我找到了一个基于**OpenXML**的解决方案。不需要 Interop，但您*必须从 openXML 学习相应*的 objectModel。在开始之前您需要什么：

1.  **下载 OpenXML SDK**并从[microsoft安装](http://www.microsoft.com/en-us/download/details.aspx?id=5124)
2.  前往[openXmlDeveloper.org](http://openxmldeveloper.org/)学习**如何使用 openXml**创建 excelFiles
3.  查看网络上有关如何使用 openXml 访问/读取/写入 excelFiles 的几个资源（例如[SO_Question1](https://stackoverflow.com/questions/9117013/adding-multiple-cells-to-a-single-row)、[social.msdn.microsoft.com_example](http://social.msdn.microsoft.com/Forums/en-US/oxmlsdk/thread/a973335c-9f9b-4e70-883a-02a0bcff43d2)、[Blog1](http://www.mikesknowledgebase.com/pages/CSharp/ExportToExcel.htm)和[SO_Question2](https://stackoverflow.com/questions/1012547/creating-excel-document-with-openxml-sdk-2-0)）

然后在你的项目中......

4.  添加对*DocumentFormat.OpenXML*库的引用（搜索您的计算机，有点像*C:\Program Files (x86)\Open XML SDK\V2.0\lib\DocumentFormat.OpenXml.dll*）
5.  添加对*WindowBase的引用*

并且您已准备好使用这段代码：

```
// important namespaces
using System.IO.Packaging;
using DocumentFormat.OpenXml.Packaging;
using DocumentFormat.OpenXml;
using DocumentFormat.OpenXml.Spreadsheet;
using Excel = DocumentFormat.OpenXml.Office2010.Excel;

static void Main(string[] args)
{
    // created a demoTable with id column and five string columns with arbitrary values
    DataTable demoTable = CreateDemoTable();
    CreateWorkbook(@"c:\ExcelAndStyles.xlsx", demoTable);
}
private static void CreateWorkbook(string fileName, DataTable table)
{            
    try
    {
        if (File.Exists(fileName))
            File.Delete(fileName);

        using (SpreadsheetDocument xl = SpreadsheetDocument.Create(fileName, SpreadsheetDocumentType.Workbook))
        {
            WorkbookPart wbp = xl.AddWorkbookPart();
            WorksheetPart wsp = wbp.AddNewPart<WorksheetPart>();
            Workbook wb = new Workbook();
            FileVersion fv = new FileVersion();
            fv.ApplicationName = "Microsoft Office Excel";

            Worksheet ws = new Worksheet();
            WorkbookStylesPart wbsp = wbp.AddNewPart<WorkbookStylesPart>();
            // add styles to sheet
            wbsp.Stylesheet = CreateStylesheet();
            wbsp.Stylesheet.Save();

            // generate data (row&cells) and add it to workbook
            SheetData sd = CreateSheetData(table);
            ws.Append(sd);
            wsp.Worksheet = ws;
            wsp.Worksheet.Save();

            Sheets sheets = new Sheets();
            Sheet sheet = new Sheet();
            sheet.Name = table.TableName;
            sheet.SheetId = 1;
            sheet.Id = wbp.GetIdOfPart(wsp);
            sheets.Append(sheet);
            wb.Append(fv);
            wb.Append(sheets);

            xl.WorkbookPart.Workbook = wb;
            xl.WorkbookPart.Workbook.Save();
            xl.Close();
        }
    }
    catch (Exception e)
    { // do some errorHandling here  }
}
private static Stylesheet CreateStylesheet()
{
    // add namespace info
    Stylesheet stylesheet1 = new Stylesheet() { MCAttributes = new MarkupCompatibilityAttributes() { Ignorable = "x14ac" } };
    stylesheet1.AddNamespaceDeclaration("mc", "http://schemas.openxmlformats.org/markup-compatibility/2006");
    stylesheet1.AddNamespaceDeclaration("x14ac", "http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac");

    // fonts
    Fonts fonts1 = new Fonts() { Count = (UInt32Value)1U, KnownFonts = true };

    Font font1 = new Font();
    FontSize fontSize1 = new FontSize() { Val = 11D };
    Color color1 = new Color() { Theme = (UInt32Value)1U };
    FontName fontName1 = new FontName() { Val = "Calibri" };
    FontFamilyNumbering fontFamilyNumbering1 = new FontFamilyNumbering() { Val = 2 };
    FontScheme fontScheme1 = new FontScheme() { Val = FontSchemeValues.Minor };

    font1.Append(fontSize1);
    font1.Append(color1);
    font1.Append(fontName1);
    font1.Append(fontFamilyNumbering1);
    font1.Append(fontScheme1);

    fonts1.Append(font1);

    // fillColor 
    Fills fills1 = new Fills() { Count = (UInt32Value)5U };

    // FillId = 0
    Fill fill1 = new Fill();
    PatternFill patternFill1 = new PatternFill() { PatternType = PatternValues.None };
    fill1.Append(patternFill1);

    // FillId = 1
    Fill fill2 = new Fill();
    PatternFill patternFill2 = new PatternFill() { PatternType = PatternValues.Gray125 };
    fill2.Append(patternFill2);

    // FillId = 2,RED
    Fill fill3 = new Fill();
    PatternFill patternFill3 = new PatternFill() { PatternType = PatternValues.Solid };
    ForegroundColor foregroundColor1 = new ForegroundColor() { Rgb = "FFFF0000" };
    BackgroundColor backgroundColor1 = new BackgroundColor() { Indexed = (UInt32Value)64U };
    patternFill3.Append(foregroundColor1);
    patternFill3.Append(backgroundColor1);
    fill3.Append(patternFill3);

    // FillId = 3,BLUE
    Fill fill4 = new Fill();
    PatternFill patternFill4 = new PatternFill() { PatternType = PatternValues.Solid };
    ForegroundColor foregroundColor2 = new ForegroundColor() { Rgb = "FF0070C0" };
    BackgroundColor backgroundColor2 = new BackgroundColor() { Indexed = (UInt32Value)64U };
    patternFill4.Append(foregroundColor2);
    patternFill4.Append(backgroundColor2);
    fill4.Append(patternFill4);

    // FillId = 4,YELLO
    Fill fill5 = new Fill();
    PatternFill patternFill5 = new PatternFill() { PatternType = PatternValues.Solid };
    ForegroundColor foregroundColor3 = new ForegroundColor() { Rgb = "FFFFFF00" };
    BackgroundColor backgroundColor3 = new BackgroundColor() { Indexed = (UInt32Value)64U };
    patternFill5.Append(foregroundColor3);
    patternFill5.Append(backgroundColor3);
    fill5.Append(patternFill5);

    fills1.Append(fill1); // 0U
    fills1.Append(fill2); // 1U
    fills1.Append(fill3); // 2U
    fills1.Append(fill4); // 3U
    fills1.Append(fill5); // 4U

    // border styles
    Borders borders1 = new Borders() { Count = (UInt32Value)1U };

    Border border1 = new Border();
    LeftBorder leftBorder1 = new LeftBorder();
    RightBorder rightBorder1 = new RightBorder();
    TopBorder topBorder1 = new TopBorder();
    BottomBorder bottomBorder1 = new BottomBorder();
    DiagonalBorder diagonalBorder1 = new DiagonalBorder();

    border1.Append(leftBorder1);
    border1.Append(rightBorder1);
    border1.Append(topBorder1);
    border1.Append(bottomBorder1);
    border1.Append(diagonalBorder1);

    borders1.Append(border1);

    // cellFormats
    CellStyleFormats cellStyleFormats1 = new CellStyleFormats() { Count = (UInt32Value)1U };
    CellFormat cellFormat1 = new CellFormat() { NumberFormatId = (UInt32Value)0U, FontId = (UInt32Value)0U, FillId = (UInt32Value)0U, BorderId = (UInt32Value)0U };
    cellStyleFormats1.Append(cellFormat1);

    CellFormats cellFormats1 = new CellFormats() { Count = (UInt32Value)4U };
    // see a few lines above - refer to: fills1.Append(XXXX);
    // see also ApplyFill = true!!
    CellFormat cellFormat2 = new CellFormat() { NumberFormatId = (UInt32Value)0U, FontId = (UInt32Value)0U, FillId = (UInt32Value)0U, BorderId = (UInt32Value)0U, FormatId = (UInt32Value)0U };
    CellFormat cellFormat3 = new CellFormat() { NumberFormatId = (UInt32Value)0U, FontId = (UInt32Value)0U, FillId = (UInt32Value)2U, BorderId = (UInt32Value)0U, FormatId = (UInt32Value)0U, ApplyFill = true };
    CellFormat cellFormat4 = new CellFormat() { NumberFormatId = (UInt32Value)0U, FontId = (UInt32Value)0U, FillId = (UInt32Value)3U, BorderId = (UInt32Value)0U, FormatId = (UInt32Value)0U, ApplyFill = true };
    CellFormat cellFormat5 = new CellFormat() { NumberFormatId = (UInt32Value)0U, FontId = (UInt32Value)0U, FillId = (UInt32Value)4U, BorderId = (UInt32Value)0U, FormatId = (UInt32Value)0U, ApplyFill = true };

    cellFormats1.Append(cellFormat2); // fillId 0U    ---  cellFormat Index 0
    cellFormats1.Append(cellFormat3); // fillId 2U    ---  cellFormat Index 1
    cellFormats1.Append(cellFormat4); // fillId 3U    ---  cellFormat Index 2
    cellFormats1.Append(cellFormat5); // fillId 4U    ---  cellFormat Index 3

    // cellStyles
    CellStyles cellStyles1 = new CellStyles() { Count = (UInt32Value)1U };
    CellStyle cellStyle1 = new CellStyle() { Name = "Normal", FormatId = (UInt32Value)0U, BuiltinId = (UInt32Value)0U };
    cellStyles1.Append(cellStyle1);

    DifferentialFormats differentialFormats1 = new DifferentialFormats() { Count = (UInt32Value)0U };
    TableStyles tableStyles1 = new TableStyles() { Count = (UInt32Value)0U, DefaultTableStyle = "TableStyleMedium2", DefaultPivotStyle = "PivotStyleMedium9" };

    // extensions
    StylesheetExtensionList stylesheetExtensionList1 = new StylesheetExtensionList();

    StylesheetExtension stylesheetExtension1 = new StylesheetExtension() { Uri = "{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" };
    stylesheetExtension1.AddNamespaceDeclaration("x14", "http://schemas.microsoft.com/office/spreadsheetml/2009/9/main");
    Excel.SlicerStyles slicerStyles1 = new Excel.SlicerStyles() { DefaultSlicerStyle = "SlicerStyleLight1" };
    stylesheetExtension1.Append(slicerStyles1);

    stylesheetExtensionList1.Append(stylesheetExtension1);

    // add all formats/styles to stylesheet
    stylesheet1.Append(fonts1);
    stylesheet1.Append(fills1);
    stylesheet1.Append(borders1);
    stylesheet1.Append(cellStyleFormats1);
    stylesheet1.Append(cellFormats1);
    stylesheet1.Append(cellStyles1);
    stylesheet1.Append(differentialFormats1);
    stylesheet1.Append(tableStyles1);
    stylesheet1.Append(stylesheetExtensionList1);
    return stylesheet1;
}
private static SheetData CreateSheetData(DataTable table)
{
    SheetData sheetData = new SheetData();            
    for (int rowIndex = 0; rowIndex < table.Rows.Count; rowIndex++)
    {
        DataRow dataRow = table.Rows[rowIndex];
        Row row = new Row() { RowIndex = new UInt32Value((uint)(rowIndex + 1)) };
        for (int colIndex = 0; colIndex < dataRow.ItemArray.Length; colIndex++)
        {
            object value = dataRow[colIndex].ToString();

            Cell cell = new Cell();
            cell.CellReference = ((char)(colIndex + 65)).ToString() + (rowIndex+1).ToString();
            // assigned simple red background style
            // have a deeper look in CreateStylesheet for details what 1U contains
            // for demo purposes may choose 2U and 3U too
            cell.StyleIndex = (UInt32Value)1U;
            // for demo purposes, treat all values as string  
            cell.DataType = CellValues.String;
            cell.CellValue = new CellValue(table.Rows[rowIndex][colIndex].ToString());
            row.Append(cell);
        }
        sheetData.Append(row);
    }
    return sheetData;
} 
```

大部分代码已从上面列出**的几个站点中取出**！我采用了它并对其进行了更改以适合您的问题。此示例代码为我创建了一个*excelFile*，其中包含具有*不同值和样式的**多行和多列*。

 *希望有帮助！*

# php - 带有 MySQL INSERT 的脚本在我直接运行时有效，但不是作为函数

> ID：12085770
> 
> 赞同：0
> 
> 时间：2012-08-23T06:15:44.440
> 
> 标签：php, mysql

我有一个脚本可以进行 2-3 次数据库查询、2 次插入和 1 次更新。我遇到的问题是，当我通过访问 Web 服务器页面手动测试脚本时`www.domain.com/handler.php?a=1&b=2&c=3`，我完美地获得了 3 个更新。但是当我使用这个功能时，它不起作用......更具体地说，INSERT INTO 不起作用。我在数据库中得到了很好的更新！但是没有新的条目。

```
while (($data = fgetcsv(STDIN)) !== false){
    $url='http://domain.com';
    $date = date('Y-m-d');
    $type = trim($data[0]);
    if ($type != ''){
        $send_date = $data[2];
        $email = $data[4];
        $status = $data[7];
        $error = $data[8];
        $bounce = $data[10];
        $ip = $data[14];
        $job_id = $data[19];
        $params = 'pmta_token='.$pmta_token.'&type='.$type.'&send_date='.$send_date.'&email='.$email.'&status='.$status.'&error='.$error.'&bounce='.$bounce.'&ip='.$ip.'&job_id='.$job_id;
        $params= array('server'=>$_SERVER['SERVER_NAME'],'type'=>$data[0],'time'=>$data[1],'message'=>$data[8],'bouncecat'=>$data[10],'jobid'=>$data[19],'domip'=>$data[21]);
        $line = $type.','.$email.','.$ip.','.$status.','.$error.','.$bounce.','.$job_id.','.date('c')."\n";

        curl_post_async($url, $params);
    }
}
    function curl_post_async($url, $params){
        foreach($params as $key => $val){
          if (is_array($val)) $val = implode(',', $val);
        $post_params[] = $key.'='.urlencode($val);
    }
    $post_string = implode('&', $post_params);

    $parts=parse_url($url);

    $fp = fsockopen($parts['host'],
        isset($parts['port'])?$parts['port']:80,
        $errno, $errstr, 30);

    $out = "POST ".$parts['path']." HTTP/1.1\r\n";
    $out.= "Host: ".$parts['host']."\r\n";
    $out.= "Content-Type: application/x-www-form-urlencoded\r\n";
    $out.= "Content-Length: ".strlen($post_string)."\r\n";
    $out.= "Connection: Close\r\n\r\n";
    if (isset($post_string)) $out.= $post_string;

    fwrite($fp, $out);
    fclose($fp);
} 
```

我肯定错过了什么！我使用这个函数而不是 curl 的原因是因为 curl 需要花费时间连接和等待响应......这个脚本每分钟处理大约 2,000 个请求。

这是handler.php

这是失败并且没有在数据库中输入任何内容的那个，当我手动执行时没有错误，它就像一个魅力，但使用套接字失败，仅在插入时，更新通过套接字连接工作。？ ?.?

```
mysql_connect('localhost','root','');
mysql_select_db('analyzer');
date_default_timezone_set('America/Los_Angeles');

if(isset($_POST['type'])){
    $domip = @explode('/',$_POST['domip']);
    $server = @strtolower($_POST['server']);
    $type = @$_POST['type'];
    $time = @$_POST['time'];
    $message = @$_POST['message'];
    $bouncecat = @$_POST['bouncecat'];
    $jobid = @$_POST['jobid'];
    $domain = @$domip[0];
    $md5 = @$_POST['md5'];
    $ip = @$domip[1];
    if(isset($_POST['ip'])){$ip=$_POST['ip'];}
}else{
    $domip = @explode('/',$_REQUEST['domip']);
    $server = @strtolower($_REQUEST['server']);
    $type = @$_REQUEST['type'];
    $time = @$_REQUEST['time'];
    $message = @$_REQUEST['message'];
    $bouncecat = @$_REQUEST['bouncecat'];
    $jobid = @$_REQUEST['jobid'];
    $domain = @$domip[0];
    $md5 = @$_REQUEST['md5'];
    $ip = @$domip[1];
}
$now=date('Y-m-d H:i');
@mysql_query("INSERT INTO `log` (`type`,`time`,`message`,`cat`,`jobid`,`domain`,`ip`,`server`) VALUES('$type','$time','$message','$bouncecat','$jobid','$domain','$ip','$server')");
if(strpos($message,'ALERT'!==false)){
    @mysql_query("INSERT INTO `alerts` (`type`,`time`,`message`,`level`,`value`,`page`) VALUES('error','$now','$message','5','$ip','apps/loganalyzer/incl/datatracker.php')");
}
if($type=='d'){
    @mysql_query("UPDATE `$server` SET `delivered`=`delivered`+1 WHERE `time`='$now'");
}elseif(($type=='b')&&($bouncecat!='bad')){
    @mysql_query("UPDATE `$server` SET `errored`=`errored`+1 WHERE `time`='$now'");
}elseif(($type=='b')&&($bouncecat=='bad')){
    @mysql_query("UPDATE `$server` SET `bounced`=`bounced`+1 WHERE `time`='$now'");
}elseif($type=='c'){
    @mysql_query("UPDATE `$server` SET `unsubscribed`=`unsubscribed`+1 WHERE `time`='$now'");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T22:10:25.073

虽然我不知道到底是什么问题，但我有 2 条建议供您调试：

1.  删除函数前的 @ 符号 - 这隐藏了您需要修复的错误。
2.  制作一个小脚本来测试系统中的 curl 功能，这样您就可以真正了解 INSERT 查询出了什么问题。

# ruby-on-rails - 找不到 Shell 脚本命令

> ID：12085779
> 
> 赞同：0
> 
> 时间：2012-08-23T06:16:30.047
> 
> 标签：ruby-on-rails, bash, shell, unicorn

我正在研究一个应该启动/停止/重启独角兽的独角兽外壳脚本。我在让它实际工作时遇到了一些麻烦。

对此的任何帮助将不胜感激。

当我运行 shell 脚本 (sh unicorn_init.sh) 时，我得到以下输出。

```
 kill: 72: No such process

    unicorn_init.sh: 72: cd /data/appname/staging/releases/20120823055753; bundle exec unicorn_rails -D -c /data/appname/staging/releases/20120823055753/config/unicorn.rb -E staging: not found 
```

这是我的 shell 脚本的当前版本：

```
#!/bin/sh
set -e
# Example init script, this can be used with nginx, too,
# since nginx and unicorn accept the same signals

# Feel free to change any of the following variables for your app:
TIMEOUT=${TIMEOUT-60}
APP_ROOT=/data/appname/staging/releases/20120823055753
SHARED_ROOT=/data/appname/staging/shared
PID=$SHARED_ROOT/pids/unicorn-staging.pid
CMD="cd $APP_ROOT; bundle exec unicorn_rails -D -c $APP_ROOT/config/unicorn.rb -E staging"
action="$1"
set -u

old_pid="$PID.oldbin"

cd $APP_ROOT || exit 1

sig () {
        test -s "$PID" && kill -$1 `cat $PID`
}

oldsig () {
        test -s $old_pid && kill -$1 `cat $old_pid`
}

case $action in
start)
        sig 0 && echo >&2 "Already running" && exit 0
        "$CMD"
        ;;
stop)
        sig QUIT && exit 0
        echo >&2 "Not running"
        ;;
force-stop)
        sig TERM && exit 0
        echo >&2 "Not running"
        ;;
restart|reload)
        sig HUP && echo reloaded OK && exit 0
        echo >&2 "Couldn't reload, starting '$CMD' instead"
        "$CMD"
        ;;
upgrade)
        if sig USR2 && sleep 2 && sig 0 && oldsig QUIT
        then
                n=$TIMEOUT
                while test -s $old_pid && test $n -ge 0
                do
                        printf '.' && sleep 1 && n=$(( $n - 1 ))
                done
                echo

                if test $n -lt 0 && test -s $old_pid
                then
                        echo >&2 "$old_pid still exists after $TIMEOUT seconds"
                        exit 1
                fi
                exit 0
        fi
        echo >&2 "Couldn't upgrade, starting '$CMD' instead"
        "$CMD"
        ;;
reopen-logs)
        sig USR1
        ;;
*)
        echo >&2 "Usage: $0 <start|stop|restart|upgrade|force-stop|reopen-logs>"
        exit 1
        ;;
esac 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:04:34.813

周围的引号`$CMD`表示整个变量值是一个命令，包括嵌入的空格。下面是一个简单的例子来说明：

```
/home/user1> CMD='echo hello'
/home/user1> $CMD
hello
/home/user1> "$CMD"
-bash: echo hello: command not found
/home/user1> 
```

# android - 安卓 2.3.3 及以上安卓版本无法下载图片

> ID：12085784
> 
> 赞同：1
> 
> 时间：2012-08-23T06:17:16.523
> 
> 标签：android, imagedownload

我在我的 android 应用程序中从服务器下载图像时遇到问题。如果我尝试从[https://www.morroccommethod.com/components/com_virtuemart/shop_image/category/resized/Trial_Sizes_4e4ac3b0d3491_175x175.jpg 下载图片](https://www.morroccomethod.com/components/com_virtuemart/shop_image/category/resized/Trial_Sizes_4e4ac3b0d3491_175x175.jpg)

我的代码 -

```
bitmap = BitmapFactory.decodeStream((InputStream) new URL(url)
                .getContent()); 
```

它返回 null 表示图像未在 4.0.3 上下载但图像在 2.2 上成功下载 我认为操作系统版本可能有问题。

现在我希望任何人都可以帮助和指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:22:14.970

在 2.2 和 4.0.0 之间，您可以在 UI 线程上执行的操作发生了一些变化。

从您的代码片段中，我无法判断您在哪个线程上执行此操作，但我希望这是同一个问题。

尝试使用 AsyncTask 加载图像，因为您无法在 UI 线程上执行此 http 操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:25:32.370

请确认有关 UI 线程异常的网络并确保您使用的是 AsyncTask。使用 AsyncTask 尝试相同的代码，这将对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T06:41:50.333

试试这个代码。

```
try
        {
            imageView.setImageDrawable(grabImageFromUrl(imageUrl));
        }
        catch (Exception e)
        {
            Log.i("CATCH", "ImageDrawable");
            e.printStackTrace();
        } 
```

和方法代码是::

```
private Drawable grabImageFromUrl(String imageUrlInput) throws MalformedURLException, IOException, Exception
    {
        return Drawable.createFromStream((InputStream)new URL(imageUrlInput).getContent(), "src");
    } 
```

我已经为您创建了此代码，请尝试它在我的最后工作......

```
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.widget.ImageView;

public class image extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Bitmap bitmap = DownloadImage("https://www.morroccomethod.com/components/com_virtuemart/shop_image/category/resized/Trial_Sizes_4e4ac3b0d3491_175x175.jpg");
        ImageView img = (ImageView) findViewById(R.id.img);
        img.setImageBitmap(bitmap);
    }

    private InputStream OpenHttpConnection(String urlString) throws IOException {
        InputStream in = null;
        int response = -1;

        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();

        if (!(conn instanceof HttpURLConnection))
            throw new IOException("Not an HTTP connection");

        try {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();
            response = httpConn.getResponseCode();
            if (response == HttpURLConnection.HTTP_OK) {
                in = httpConn.getInputStream();
            }
        } catch (Exception ex) {
            throw new IOException("Error connecting");
        }
        return in;
    }

    private Bitmap DownloadImage(String URL) {
        Bitmap bitmap = null;
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in);
            in.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        return bitmap;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T07:01:37.437

在 setcontentview() 之后将以下代码写入您的 activity.java 文件的 onCreate 方法。

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

# asp.net - 服务器能够解密在我的本地系统上生成的表单身份验证密钥

> ID：12085786
> 
> 赞同：0
> 
> 时间：2012-08-23T06:17:42.340
> 
> 标签：asp.net, security, forms-authentication

我在 .NET 4.0 范式中，我注意到了一个场景。我的 API 使用`FormsAuthentication.Encrypt`方法为用户创建令牌。问题是，如果我在 localhost 上运行 API，调用 api 来获取密钥，我可以在对服务器的后续请求中使用相同的密钥。为什么会这样？这是期望的行为吗？不是有安全隐患吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:07:23.513

问题是我们覆盖`machineKey`了应用程序 web.config 中的值。因此，两个应用程序（在本地机器和服务器上运行）都使用相同的密钥来加密和解密。因此，服务器可以解密本地机器加密的密钥，反之亦然。

# iphone - 发送到 iPhone 中已释放实例的消息

> ID：12085795
> 
> 赞同：0
> 
> 时间：2012-08-23T06:18:31.357
> 
> 标签：iphone, ipad, nsurlconnection, release, exc-bad-access

我是 iPhone 新手，

我正在按照苹果的建议创建 NSURLConnection[但是](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html) 当我关闭我的视图时我的应用程序崩溃了，我尝试了`NSZombieEnabled`向我展示的概念`-[CALayer release]: message sent to deallocated instance 0x68b8f40`

我正在显示一个网页`Webview`，当用户单击 webview 中的下载链接时，`shouldStartLoadWithRequest`将在我正在创建的此方法中调用方法`NSURLConnection`。

这是我的代码片段，

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data1
{
    [receivedData appendData:data1];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"Succeeded! Received %d bytes of data",[receivedData length]);

    DirPath=[self applicationDocumentsDirectory];

     NSLog(@"DirPath=%@",DirPath);
    [receivedData writeToFile:DirPath atomically:YES];

    UIAlertView* Alert = [[UIAlertView alloc] initWithTitle:@"Download Complete !"
                                                         message:nil delegate:nil 
                                               cancelButtonTitle:@"OK"
                                               otherButtonTitles:nil];
    [Alert show];
    [Alert release];

    // release the connection, and the data object
    [connection release];
    [receivedData release];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error1
{
    [connection release];
    [receivedData release];

    // inform the user
    NSLog(@"Connection failed! Error - %@ %@",
          [error1 localizedDescription],
          [[error1 userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

    //CAPTURE USER LINK-CLICK.

            Durl=[[url absoluteString]copy];

            //Checking for Duplicate .FILE at downloaded path....

            BOOL success =[[NSFileManager defaultManager] fileExistsAtPath:path];
            lastPath=[[url lastPathComponent] copy];

            if (success) //if duplicate file found...
            {
                UIAlertView* Alert = [[UIAlertView alloc] initWithTitle:@"This FILE is already present in Library."
                                                                     message:@"Do you want to Downlaod again ?" delegate:self 
                                                           cancelButtonTitle:nil
                                                           otherButtonTitles:@"Yes",@"No",nil];
                [Alert show];
                [Alert release];

            }
            else  //if duplicate file not found directly start download...
            {
                // Create the request.
                NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:Durl]
                                                          cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                      timeoutInterval:60.0];

                // create the connection with the request and start loading the data
                NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
                if (theConnection) {
                    // Create the NSMutableData to hold the received data.
                    receivedData = [[NSMutableData data] retain];
                } else {
                    NSLog(@"Inform the user that the connection failed."); 
                }

    return YES;   
} 
```

**任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:19:11.657

我认为这个问题 `NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];`

当您关闭视图时，您正在创建一个`NSURLConnection`具有委托自我的实例，该视图`deallocated`上的所有内容。但是当`NSURLConnection`尝试调用它的委托方法时会发生崩溃。

因此，您需要将委托设置`NSURLConnection`为 nil 以`viewWillDisappear`执行此操作，您需要`NSURLConnection`在接口中创建对象。

```
@interface yourClass
{
   NSURLConnection *theConnection;
}
@end 
```

米

```
theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

- (void)viewWillDisappaer:(BOOL)animated
{
    [super viewWillDisappaer:animated];
    theConnection.delegate = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:30:35.987

确保在您的 dealloc 实现中您正在重置`delegate`to `nil`。这样做的另一个地方是`viewWillDisappear:`.

您的应用程序崩溃/访问僵尸的原因是该`UIWebView`实例可能会尝试回调 viewController，即使它已经被释放。为了防止这种情况，您必须在 viewController 超出范围之前将`delegate`其设置`UIWebView`回。`nil`在 iOS5 的 ARC 实现之前使用委托时，这是一个普遍的问题。iOS5 最终提供了弱引用，这些实际上是`nil`它们自己的实例被释放后。

示例 A：

```
- (void)dealloc
{
    [...]
    _webView.delegate = nil;
} 
```

示例 B：

```
- (void)viewWillDisappaer:(BOOL)animated
{
    [super viewWillDisappaer:animated];
    _webView.delegate = nil;
} 
```

* * *

编辑：再次阅读您的问题后，我意识到僵尸是 UIView 或 UIControl，因为消息已发送到 CALayer。通过暂时删除所有与 webView 相关的代码，确保您的问题实际上与 web 视图有关。

# c# - 设置现有线的Zedgraph线宽

> ID：12085798
> 
> 赞同：2
> 
> 时间：2012-08-23T06:18:44.323
> 
> 标签：c#, charts, zedgraph

是否可以设置现有 Zedgraph 线的宽度？我看到的大多数示例都演示了以下方法：

```
LineItem myCurve1 = myPane.AddCurve("Sine Wave", spl1, Color.Blue, SymbolType.None);
myCurve1.Line.Width = 3.0F; 
```

但正如我所见，它只能在添加新曲线的时刻完成。最明显的解决方案是创建**列表**并在那里添加所有曲线以便稍后访问它们。我想知道这是正确的方式还是我走错了路？

**更新**
我的情况如下。*我在listBox*有几条线曲线和它们的列表。我想让当前选择的曲线加粗。这就是我需要访问现有曲线的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T07:12:00.510

`LineItem`具有支持设置线宽的构造函数，因此您可以先创建曲线，然后将其添加到您的`GraphPane`中，如下所示：

```
LineItem myCurve1 = 
    new LineItem("Sine Wave", spl1, Color.Blue, SymbolType.None, 3.0f);
myPane.CurveList.Add(myCurve1); 
```

我认为，推荐哪种方法更多的是个人喜好问题，但我个人更喜欢在将对象添加到任何集合之前尽可能多地初始化它。

**更新**如果您以后想访问您的特定曲线项目，只需从`myPane.CurveList`. 中的对象`CurveList`是`CurveItem`:s，因此您可能需要强制转换`LineItem`以修改行特定的属性。

**例子**

```
((LineItem)zedGraphControl1.GraphPane.CurveList[1]).Line.Width = 3.0F; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:08:17.453

ZedGraph 中的窗格已经有曲线列表。也许您需要在更改曲线后重新绘制窗格？

# java - java的特定提示命令

> ID：12085799
> 
> 赞同：2
> 
> 时间：2012-08-23T06:18:45.390
> 
> 标签：java, windows, command, prompt

我想在 java 下执行以下 windows 命令：

> rmdir /s C:\Main\Second\Third
> 
> 是

问题是要运行**2 个命令**，一个用于删除，一个用于确认（如您所见，一个简单的“Y”）。

我知道这是可行的，但我没有成功。

```
 String rmCommand = "cmd.exe /c rmdir /s /q C:\\Main\\Second\\Third";

        Runtime runt = Runtime.getRuntime();
        Process process = runt.exec(rmCommand); 
```

所以我的问题是：感谢 JAVA 代码，如何在提示符下运行上述两个命令。

编辑：我根据一些建议修改了一些初始代码，但它仍然不起作用......我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:21:42.433

`rmdir`不是程序 - 它是命令外壳的一部分。所以你需要运行类似的东西：

```
"cmd.exe /c rmdir /s C:\\Main\\Second\\Third" 
```

（当然，对于生产版本，您需要确保获得正确的 cmd.exe。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:37:06.210

为避免被要求确认，请将 /Q 添加到您的 rmdir 命令： http: [//www.computerhope.com/rmdirhlp.htm](http://www.computerhope.com/rmdirhlp.htm)

但是用 rmdir 来做这件事是一个非常糟糕的做法。如果您不想自己进行递归删除，请使用[Apache Commons FileUtils](http://commons.apache.org/io/api-1.4/org/apache/commons/io/FileUtils.html#deleteDirectory%28java.io.File%29)。这不是 rmdir 是否足够的问题，而是使用正确方法的工具的问题。如果我理解正确，您遇到的问题是 java 无法删除打开的文件，但 rmdir 可以。看起来更像是您的代码打开文件的问题，不是吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T13:56:25.623

抛开它是否良好做法的问题，您的问题的答案如下：创建一个包含单个字符的文件`Y`. 假设它被称为`y.txt`.

那么你的命令将是：

```
cmd.exe /c rmdir /s C:\\Main\\Second\\Third < y.txt 
```

# java - Android使用arraylist在ImageView上加载图像

> ID：12085800
> 
> 赞同：2
> 
> 时间：2012-08-23T06:18:49.337
> 
> 标签：java, android

这可能是我可能会再次忽略的问题，但如果您能帮助我解决它，我将非常感激。使用此代码从 drawable 获取图像并将其发送到 Imageview.setImageResource （其中我的 Imageview 在 gridview 中）；一切正常

```
private   Integer[] imageIDs = {
            //R.drawable.image1,
            R.drawable.image2,
            R.drawable.image3,
            R.drawable.image4,
            R.drawable.image5,
            R.drawable.image6,
            R.drawable.Image7,
};

//Here is my another code to call imageIDs as ImageResource
ImageView iv = (ImageView)v.findViewById(R.id.grid_item_picture);
iv.setImageResource(imageIDs[position]);
//position is a default value of gridview starting from 0 
```

现在我想要完成的是删除该数组并将其转换为 ArrayList 仅仅是因为需要这些内部数据是动态的。所以我创建了这个新代码

```
ArrayList<String> array_image = new ArrayList<String>();
        array_image.add("R.drawable.image6");
        array_image.add("R.drawable.image1"); 
```

并将 ImageView ImageResource 设置为此代码

```
iv.setImageResource(array_image .get(position)); 
```

我收到一条错误消息：

> ImageView 类型中的方法 setImageResource(int) 不适用于参数（对象）你能帮我解决/弄清楚吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T06:21:04.660

您正在为字符串定义一个 ArrayList。但是，您需要整数作为资源标识符。

改为这样；

```
ArrayList<Integer> array_image = new ArrayList<Integer>();
array_image.add(R.drawable.image6);
array_image.add(R.drawable.image1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:53:32.433

嘿@Janwel 尝试使用这个。这很可能会奏效。

```
List<Integer> mL = new ArrayList<Integer>();
mL.add(R.drawable.image2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:24:00.593

请尝试

```
ArrayList<int> array_image = new ArrayList<int>();
array_image.add(R.drawable.image6);
array_image.add(R.drawable.image1); 
```

接着

```
iv.setImageResource(array_image .get(position)); 
```

# python - 接受任何属性的类

> ID：12085808
> 
> 赞同：0
> 
> 时间：2012-08-23T06:19:31.737
> 
> 标签：python

如果一个属性被调用但在类实例中不存在，是否可以定义一个不返回 AttributeError 异常的python类？像

```
class A():
    pass

a = A()
a.tutu <==not raising AttributeError 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:20:32.783

你可以在你的类上定义一个`__getattr__`方法。请参阅[文档](http://docs.python.org/reference/datamodel.html#object.__getattr__)。

这是一个简单的示例，它为所有缺失的属性赋予值“默认”：

```
>>> class Foo(object):
...     def __getattr__(self, attr):
...         return "Default"
>>> f = Foo()
>>> f.someJunk
'Default' 
```

# oracle - 产品的诊断和故障排除 -Oracle R12

> ID：12085809
> 
> 赞同：0
> 
> 时间：2012-08-23T06:19:33.057
> 
> 标签：oracle, plsql, oracle-apps, oracleapplications

如何在 Oracle iStore 第 12 版中对产品进行诊断和故障排除？有什么查询可以检查吗？我的意思是查询目录，定价错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T21:18:44.853

这取决于您要监控的错误类型。根据您的错误定义，您可以查看表格，例如`MTL_ITEM_CATALOG_GROUPS`，定价相关信息查看表格，例如，`ASO_PRICE_ADJUSTMENTS`等。`ASO_PRICE_ADJ_RELATIONSHIPS``ASO_PRICE_ATTRIBUTES`

# javascript - JavaScript：将变量插入数组

> ID：12085814
> 
> 赞同：0
> 
> 时间：2012-08-23T06:20:17.690
> 
> 标签：javascript, jquery, arrays, variables

我正在自定义一个插件，该插件具有包含配置项的数组（如果是这样的话）：

```
 var config = {
            width:  "100%",
            height: "100%",
            source: 'js/timeline/test.json',                
            css:    'js/timeline/compiled/css/timeline.css',    
            js:     'js/timeline/compiled/js/timeline-min.js'   
        } 
```

我想要做的是获取`source:`数据并将其替换为变量，例如：

```
var mysource = 'path/to/source.json';

var config = {
                width:  "100%",
                height: "100%",
                source: mysource ,              
                css:    'js/timeline/compiled/css/timeline.css',    
                js:     'js/timeline/compiled/js/timeline-min.js'   
            } 
```

但由于它上面它不起作用。谁能指出我正确的方向？谢谢

编辑：按要求添加完整代码

```
$(function() {

    $.getJSON('http://www.mysite.com/json.php',

    function(data) {

        jsonObject = eval(data);
        var eventdata = jsonObject.tlall;

    });

}); //END ON LOAD

var config = {
    width: "100%",
    height: "100%",
    source: eventdata,
    //source: 'js/timeline/test.json',
    //start_at_end: true,   //OPTIONAL              
    //hash_bookmark: true,  //OPTIONAL              
    css: 'js/timeline/compiled/css/timeline.css',
    js: 'js/timeline/compiled/js/timeline-min.js'
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:38:32.913

更改此行：

```
var eventdata = jsonObject.tlall; 
```

对此：

```
config.source = jsonObject.tlall; 
```

并从您的配置定义中删除这一行：

```
source: eventdata, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:39:36.427

我不知道您打算如何使用`config`，但您肯定需要它在同一范围内才能访问`eventdata`。我会说完全摆脱它，只需将它作为对象的属性添加到 ajax 回调中（如下面的代码所示）。

`config`这里的困难在于，在您可以在脚本中使用之前，您必须等待 AJAX 回调触发；这就是为什么 ajax 被设计用于在特定事件之后执行的回调而不是线性的；我建议您`config`仅在该成功回调中使用，或添加检查以查看是否`getJSON`已完成执行。

```
$(function() {

    var config = {
        width: "100%",
        height: "100%",            
        css: 'js/timeline/compiled/css/timeline.css',
        js: 'js/timeline/compiled/js/timeline-min.js'
    };

    $.getJSON('http://www.mysite.com/json.php', function(data) {
        jsonObject = eval(data);
        config.source = jsonObject.tlall;
    });

}); //END ON LOAD​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T06:38:00.380

范围问题，请尝试：

```
$(function() {
    $.getJSON('http://www.mysite.com/json.php', function(data) {
        config.source = data.tlall;
    });

    var config = {
        width: "100%",
        height: "100%",
        css: 'js/timeline/compiled/css/timeline.css',
        js: 'js/timeline/compiled/js/timeline-min.js'
    }
});​
​ 
```

# c# - 使用 Mpdreamz/NEST 循环通过 elasticsearch queryresult

> ID：12085815
> 
> 赞同：1
> 
> 时间：2012-08-23T06:20:18.173
> 
> 标签：c#, elasticsearch, nest

我使用 Mpdreamz/NEST 作为 .net 客户端来搜索弹性搜索。

我正在使用`result.Hits.Total`. 但我想知道如何从结果中显示字段的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:52:48.723

查看 NEST 源代码，您似乎可以执行以下操作：

```
foreach (var item in result.Documents.ToList())
{
    string msg = "Name: " + item.Name + " | Value: " + item.Text;
    alert(msg);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:31:22.910

`var result = client.Search(....)`

`QueryResult<dynamic>`将返回带有`Documents`类型属性的aa`IEnumerable<dynamic>`您可以像这样循环：

```
foreach(var d in result.Documents)
{
    Console.WriteLine(d.title);
} 
```

这里的大小写问题`d.Title`将导致 RuntimeBinderException。除非您的弹性搜索字段实际上完全匹配“标题”

您还可以映射到 POCO 的

```
public class MyResult
{
    public string Title { get; set; }
} 
```

...

`var result = client.Search<MyResult>(....)`

现在`Documents`是一个`IEnumerable<MyResult>`将为您提供编译时间保证属性存在的方法。

`.Fields["field"]`除非您正在处理用户输入，否则您不必访问。

`result.Total`也优于`result.Hits.Total`

# asp.net - 在 Coolgridview 中保持滚动位置

> ID：12085816
> 
> 赞同：0
> 
> 时间：2012-08-23T06:20:27.287
> 
> 标签：asp.net, gridview, scrollbar

我有一个与 Oacle DB 通信的 asp 3.5 站点。我在它上面放了一个 CoolGridView，它绑定了一些对象，当用户单击 CheckBox 时，我在该行上的一个文本框中填充了一些数据。但是，滚动条的行为很奇怪，有时它会跳到顶部，有时会在我选择任何内容并创建回发时跳到底部。有没有一种简单的方法可以避免这种情况？一些我从未注意到的隐藏财产？是的，我设置了maintainScrollPositionOnPostBack，我在某处读到需要将CoolGridView 放在UpdatePanel 中。好吧，我没有，从来没有使用过它们，如果我改变它，我似乎需要重写整个网格？但也许我必须这样做？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:01:40.680

我想我得到了它的工作，只将 GridView 包装在更新面板中并投入 ScriptManager sem 来解决它..

# sql - SQL 特殊从表中选择

> ID：12085817
> 
> 赞同：2
> 
> 时间：2012-08-23T06:20:26.780
> 
> 标签：sql

我有一个大约 20 列和 2000 行的表。例子：

```
Col1 Col2 Col3 Col4 ...
A01 22 AB 11
A01 22 斧头 112
A01 23 A5 11
A02 20 AB AA
A04 21 AB 11
A04 21 非盟 11
A04 29 AB 巴
A05 21 AB 11
AAA 111 XX 18
AAA 222 GT 1O
...

```

我需要一个选择，它根据以下内容显示满足两列（Col1 和 Col2）要求的所有行和所有列：

如果 Col1 是唯一的 - 显示行，或者如果 Col1 不是唯一的，则仅在 Col1 和 Col2 相同时显示所有行。从 previos 表中选择结果后：

```
Col1 Col2 Col3 Col4 ...
A01 22 AB 11
A01 22 斧头 112
A02 20 AB AA
A04 21 AB 11
A04 21 非盟 11
A05 21 AB 11
AAA 111 XX 18
...

```

新表（您的解决方案）包含数据： Col1 Col2 Col3 Col4 ...

A01 22 AB 11

A01 22 斧头 112

A02 20 AB AA

A04 21 AB 11

A04 21 非盟 11

A05 21 AB 11

AAA 111 XX 18

...

我不会从中看到的是：

Col1 Col2 Col3 Col4 ...

A01 2 AB 11

A02 1 AB AA

A04 2 AB 11

A05 1 AB 11

AAA 1 XX 18

...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:25:18.767

在 Oracle 和 MS SQL 中，我会使用分析函数：

```
select * from
(
    select
        t.* ,
        count(Col1) over (partition by Col1) as count_col1,
        count(Col2) over (partition by Col1, Col2) as count_col2
    from yourTable t
) t
where count_col1 = 1 or count_col2 > 1; 
```

请参阅[this fiddle (Oracle)](http://www.sqlfiddle.com/#!4/5502b/1)和[this fiddle (MSSQL)](http://www.sqlfiddle.com/#!3/233d7/11)作为证明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T06:32:10.523

```
select * 
from table t1
join (select col1
      from table
      group by col1
      having avg(col2)=max(col2)) t2
     on t1.col1=t2.col1 
```

看到我没有查看您的示例..并且您的请求与示例略有不同，因为我的查询检查 col1 的所有 col2 都应该相同。它不会显示相同的。

在这种情况下，答案将是

```
select * 
from table1 t1
join (select col1,col2
      from table1
      group by col1,col2
      having count(*)>1
      union
      select col1,cast(null as varchar)
      from table1 group by col1
      having count(*)=1) t2
     on t1.col1=t2.col1 and t1.col2=isnull(t2.col2,t1.col2) 
```

这是更新后的查询，它的小提琴[http://sqlfiddle.com/#!3/e944b/2/0](http://sqlfiddle.com/#!3/e944b/2/0)

好的..再更新一次：

```
select * 
from table1 t1
join (select col1,col2
     from table1
     group by col1,col2
     having count(*)>1
     union
     select col1,min(col2)
     from table1 group by col1
     having count(*)=1 or count(*)=count(distinct col2)) t2
     on t1.col1=t2.col1 and t1.col2=t2.col2 
```

和小提琴[http://sqlfiddle.com/#!3/d5437/12/0](http://sqlfiddle.com/#!3/d5437/12/0)

这应该足以解决第二个问题：

```
select t3.* 
    from (select distinct col1 from table1)t1
    cross apply (select top 1 * from table1 t2 where t1.col1=t2.col1) t3 
```

和小提琴：[http ://sqlfiddle.com/#!3/e944b/4/0](http://sqlfiddle.com/#!3/e944b/4/0)

# c# - 如何将字符串解析为日期时间？

> ID：12085821
> 
> 赞同：1
> 
> 时间：2012-08-23T06:20:35.727
> 
> 标签：c#, string, parsing, datetime

我有产品列表，每个产品都有 DateTime 类型的创建日期。我想拿一些在我输入时间后创建的字符串类型的产品。

我以字符串类型输入**EnteredDate**，如下**格式： 05/16/2012**

```
1\.    var dates = from d in Products
2\.                where d.CreateDate >= DateTime.ParseExact( EnteredDate, "mm/dd/yy", null )
3\.                select d; 
```

在第二行中，我收到错误，因为***字符串未被识别***为“mm/dd/yy”的有效日期时间。我还尝试了 DateTime.Parse()、Convert.ToDateTime() 并得到了同样的错误。如何按创建日期过滤此产品列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T06:22:44.803

“mm”是分钟，而您的年份是 4 位数字，而不是 2。如果您的格式*真的*总是那样，您想要“MM/dd/yyyy”。你在这方面有多自信？（特别是，如果它是由*用户*输入的，你可能应该让你的代码对文化敏感......）

我建议将解析部分从查询中拉出来，如果你真的有一个固定的格式，也可能使用不变的文化进行解析：

```
DateTime date = DateTime.ParseExact(EnteredDate, "MM/dd/yyyy",
                                    CultureInfo.InvariantCulture);

var dates = Products.Where(d => d.CreateDate >= date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:25:13.180

称呼

```
DateTime.ParseExact(EnteredDate, "MM/dd/yyyy", CultureInfo.InvariantCulture); 
```

# javascript - 使用 html / javascript 启动小部件

> ID：12085826
> 
> 赞同：0
> 
> 时间：2012-08-23T06:21:19.440
> 
> 标签：javascript, html, widget

我创建了一个简单的网页，在按下按钮后启动一个小部件。按下按钮会向 DOM 树中添加一个元素：

```
var div = document.getElementById("loginWidget");
var loginWidget = document.createElement('script');
loginWidget.setAttribute("type", "text/javascript");
loginWidget.setAttribute("src", "http://widgetstore.etc.etc");

div.appendChild(loginWidget); 
```

这将在网页中启动登录小部件。如何让它在新窗口中打开（最好调整为小部件的大小？如果我这样做，我的原始窗口将能够访问登录小部件中的值吗？如果这是一个坏主意，那么最好的方法是什么？设置小部件样式的方法，使其与原始尺寸相比更加突出。

原谅我的n00bness。通常会自己研究这个，但有点着急！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:30:46.157

看看`window.open`。它将返回一个指向新打开的窗口的指针。您可以指定该窗口的宽度和高度。但请注意，您必须在 onclick 处理程序中调用 window.open。否则，如果您在脚本块中调用它，它将被浏览器阻止。此外，您可以从小部件窗口使用`window.parent`.

# shell - 具有 Maven 依赖解析的基于 JVM 的脚本语言

> ID：12085830
> 
> 赞同：1
> 
> 时间：2012-08-23T06:21:36.167
> 
> 标签：shell, maven, scripting, classpath, dependency-management

我正在寻找一种简单的方法来编写调用 jar 文件的简短 shell 脚本。必须为运行时类路径跟踪（并安装）所有这些 jar 文件，这在一定程度上违背了使用脚本的目的（与在 Eclipse 中构建可运行的 jar 文件相反）。我希望 Maven（或类似的东西）来管理这个。

图片：

```
 #!/usr/bin/the-cool-shell

 use org.apache.commons/lang/3.0.0
 use org.json/json

 import org.json.*;

 new JSONObject("{}"); 
```

这应该会自动从 Maven 获取所需的工件（第一次下载后开销基本上为零）。

我有哪些选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:27:26.860

如果您使用的是 Groovy 和 Groovy Shell，那么您可能正在使用[Grape](http://groovy.codehaus.org/Grape)基础架构。

```
#!/usr/bin/env groovy

@Grab( 'log4j:log4j:1.2.14' )
import org.apache.log4j.Level
import org.apache.log4j.Logger

def logger = Logger.getLogger(GroovyShell.class)
Logger.rootLogger.level = Level.INFO

logger.info 'I am using the Log4j library by using Grape' 
```

至于您的确切示例，这将起作用：

```
#!/usr/bin/env groovy

@Grapes([
    @Grab('org.apache.commons:commons-lang3:3.0'),
    @Grab('org.json:json:20090211')
    ])
import org.json.*

new JSONObject('{}') 
```

在这种情况下，我使用的是 Groovy 语法，但普通的 Java 语法也可以。

* * *

取自`@Grapes`注解的Javadoc：

> 有时每个类需要多个抓取，但我们只能为每个可注释节点添加一种注释类型。此类允许添加多个抓取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:06:30.983

你可以试试[Gradle](http://www.gradle.org/overview "摇篮")，它是一个构建管理工具，但它使用 Groovy 构建脚本，并且使用 Maven 依赖模型。所以你的脚本可能是一个 Gradle 'build' 脚本，它只是做了一些与构建软件不同的事情。

# javascript - 暂停所有 javascript

> ID：12085835
> 
> 赞同：0
> 
> 时间：2012-08-23T06:22:03.760
> 
> 标签：javascript

我一直在为我未来的项目编写代码库。我一直在研究的功能之一是暂停功能。到目前为止，我对报告脚本运行时间很长的错误没有任何问题，即使暂停时间长达 10 秒。这主要是为了让**恶意用户**保持忙碌，当您设置很长时间时它会很好地工作。我想知道是否有任何我应该注意的错误，我可能会遇到？这是代码...

```
pause = function(a) {
    var b = new Date().getTime();
    e = false;
    function wait() {
    d=10;
    for(i=0;i<d;i++) {
        d++;
        var c = new Date().getTime();
        if(c-b>=a) {
            e = true;
            break;
        }
        if(d>1000000) {
            break;
        }
    }
}
wait();
if(e==false) {
    pause(a-(new Date().getTime()-b));
}}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T06:25:50.060

你永远*不想*在 Javascript 中做这种事情。正如您所注意到的，浏览器会抱怨您的脚本耗时过长。此外，这将消耗比所需更多的能量，这对于电池容量有限的移动设备很重要。

相反，[`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)稍后使用标准函数运行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:28:11.540

Javascript 已经有办法做到这一点。使用 setTimeout() 并在您的操作继续时将其传递给匿名函数。第二个参数是以毫秒为单位的延迟。

例子：

setTimeout(function(){ alert('hello'); }, 2000);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:01:17.023

正如我到目前为止在评论中所说的那样，尝试在 javascript 中运行半无限循环绝不是一个好主意。

以下是一些需要注意的问题：

1.  如果您在一段时间后没有通过完成 javascript 线程执行返回浏览器事件循环，浏览器将停止并提示用户终止该浏览器窗口中的 javascript。
2.  您的代码使用了一堆未声明的变量，这使它们成为隐式全局变量。由于它们具有通用名称，因此它们很容易干扰其他代码。
3.  因为 javascript 是单线程的，所以当您的循环运行时，该窗口的其他浏览器事件无法运行，从而使浏览器窗口基本上冻结。用户会认为它已挂起。患者用户可能会等待更长时间以查看它是否完成。不耐烦的用户会杀死浏览器窗口。

本质上，您尝试做的是对用户浏览器的拒绝服务攻击。您可能不喜欢他们对您的网页所做的事情，但回击他们似乎并不合适。以适合浏览器的方式而不是攻击浏览器的方式阻止对您的页面的访问要好得多。

建议：

如果您真正想做的只是在某些情况下使您的页面无用（您仍然没有解释为什么要尝试这样做或什么条件会触发您这样做的愿望），那么最好只需使页面无用或提供信息，而无需尝试杀死浏览器。你可以这样做：

1.  只是将所有内容隐藏在 DOM 中，因此窗口变为空白。
2.  删除所有 DOM 元素，使窗口变为空白。
3.  在整个窗口上放置一个透明层，这样没有输入事件可以到达页面元素，但视觉效果仍然存在。您可以向该窗口添加一条消息。
4.  用适当的消息替换页面内容。

# objective-c - 如何使用 FBFriendPicker 从 Facebook iOS api 获取用户 ID

> ID：12085836
> 
> 赞同：0
> 
> 时间：2012-08-23T06:22:04.277
> 
> 标签：objective-c, ios, facebook, api

我目前正在使用 iOS 的 facebook api 中的 FBFriendPicker 来获取选定朋友的姓名。我怎样才能同时获得朋友的用户ID。下面的函数用于名称。

```
// Facebook integration
- (void)facebookViewControllerDoneWasPressed:(id)sender {
    NSString *text;

    // we pick up the users from the selection, and create a string that we use to update the text view
    // at the bottom of the display; note that self.selection is a property inherited from our base class
    for (id<FBGraphUser> user in self.friendPickerController.selection) {
        self.name.text = user.name;
    }

    [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:02:08.873

```
for (id<FBGraphUser> user in self.friendPickerController.selection) {
    NSLog(@"Name: %@ ID: %@", user.name, user.id);
} 
```

我知道选择的朋友的姓名和 ID 会以这种方式显示在日志中..

所以不要使用“name”，只需使用“id”，如果你想将它用作字符串.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:15:50.333

您可以获得所有选定朋友的 id 并可以添加到数组中，如下所示：

///获取选择的好友ID////////

*   (void)facebookViewControllerDoneWasPressed:(id)sender {

    NSMutableString *text = [[NSMutableString alloc] init]; selectIDs=[[NSMutableArray alloc] 初始化];

    // 我们从选择中挑选用户，并在显示的底部创建一个用于更新文本视图的字符串；请注意 self.selection 是从我们的基类继承的属性 for (id user in self.friendPickerController.selection) {

    ```
    if ([text length]) {
        [text appendString:@", "];
    }
    [text appendString:user.name];
    [selectIDs addObject:user.id]; 
    ```

    } [自我dismissModalViewControllerAnimated：是]; }

# c++ - 继承受保护函数和公共变量 C++ 的多重继承编译错误

> ID：12085837
> 
> 赞同：0
> 
> 时间：2012-08-23T06:22:08.637
> 
> 标签：c++, inheritance, protected

我目前正在学习多重继承，并在创建一个继承其先前祖先变量和函数的函数时遇到了问题。问题出现在我进行多重继承的 showRoomServiceMeal() 函数中。当我编译时，我得到错误，指出相应的继承变量不能被继承，因为它们受到保护，并且继承的函数在没有对象的情况下使用。

我认为受保护的评估器允许其子级使用变量并访问相应的函数和受保护的变量，范围解析运算符 (::) 将被使用？谁能帮助解释为什么我会收到这些错误？

```
#include<iostream>
#include<string>
using namespace std;

class RestaurantMeal
{
protected:
    string entree;
    int price;
public:
    RestaurantMeal(string , int );
    void showRestaurantMeal();
};

RestaurantMeal::RestaurantMeal(string meal, int pr)
{
    entree = meal;
    price = pr;
}

void RestaurantMeal::showRestaurantMeal()
{
    cout<<entree<<" $"<<price<<endl;
}

class HotelService
{
protected:
    string service;
    double serviceFee;
    int roomNumber;
public:
    HotelService(string, double, int);
    void showHotelService();
};

HotelService::HotelService(string serv, double fee, int rm) 
{
    service = serv;
    serviceFee = fee;
    roomNumber = rm;
}

void HotelService::showHotelService()
{
    cout<<service<<" service fee $"<<serviceFee<<
    " to room #"<<roomNumber<<endl;
}

class RoomServiceMeal : public RestaurantMeal, public HotelService
{
public:
    RoomServiceMeal(string , double , int );
    void showRoomServiceMeal();
};

RoomServiceMeal::RoomServiceMeal(string entree, double price, int roomNum) : 
RestaurantMeal(entree, price), HotelService("room service", 4.00, roomNum)
{
}

void showRoomServiceMeal()
{
    double total = RestaurantMeal::price + HotelService::serviceFee;
    RestaurantMeal::showRestaurantMeal();
    HotelService::showHotelService();
    cout<<"Total is $"<<total<<endl;
}

int main()
{
    RoomServiceMeal rs("steak dinner",199.99, 1202);
    cout<<"Room service ordering now:"<<endl;
    rs.showRoomServiceMeal();
    return 0;
} 
```

使用 g++ 我得到这个错误：

```
RoomService.cpp: In function ‘void showRoomServiceMeal()’:
RoomService.cpp:18: error: ‘int RestaurantMeal::price’ is protected
RoomService.cpp:73: error: within this context
RoomService.cpp:18: error: invalid use of non-static data member ‘RestaurantMeal::price’
RoomService.cpp:73: error: from this location
RoomService.cpp:39: error: ‘double HotelService::serviceFee’ is protected
RoomService.cpp:73: error: within this context
RoomService.cpp:39: error: invalid use of non-static data member ‘HotelService::serviceFee’
RoomService.cpp:73: error: from this location
RoomService.cpp:74: error: cannot call member function ‘void RestaurantMeal::showRestaurantMeal()’ without object
RoomService.cpp:75: error: cannot call member function ‘void HotelService::showHotelService()’ without object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:35:07.240

您没有将函数定义`showRoomServiceMeal`为类的一部分`RoomServiceMeal`：

```
void showRoomServiceMeal()
{
    ...
} 
```

改成

```
void RoomServiceMeal::showRoomServiceMeal()
{
    ...
} 
```

此外，在该`showRoomServiceMeal`方法中，您不必在访问父类成员时使用类前缀。而不是使用例如`RestaurantMeal::price`，您可以只使用`price`. 这是因为变量和函数在每个类中都是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:34:03.863

你忘记了 RoomServiceMeal:: 在 showRoomServiceMeal() 之前（让你的编译器认为这个函数是静态的而不是类相关的）

# asp.net-mvc - 字符文字编译错误中的字符过多

> ID：12085841
> 
> 赞同：0
> 
> 时间：2012-08-23T06:22:20.000
> 
> 标签：asp.net-mvc

我有这个

```
$('#someId').html(<% Response.Write("'"+HttpUtility.HtmlEncode(_.T(data.notice.split(';')[1]))+"'"); %>); 
```

我得到编译错误字符文字中的字符太多

在另一个地方我有：

```
$('#someOtherId').html(<% Response.Write("'"+HttpUtility.HtmlEncode(_.T("Something"))+"'"); %>); 
```

它工作正常。为什么会有不同的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:30:44.630

该行中唯一的字符文字是`';'`. 看起来没有多个字符，但是您可能在其中有一个不可见的字符以及分号，或者在该位置恰好很窄的制表符。尝试重新输入那部分代码。

还要看看附近的线路。报告的行号可能略有偏差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:47:21.497

尝试移动 `data.notice.split(';')[1]`到单独的行。

```
string [] plainTextArray = data.notice.split(';');
string plainTexttoEncode;

//check plainTextArray has something that can be used
...

plainTexttoEncode = plainTextArray[1];
$('#someId').html(<%Response.Write("'"+HttpUtility.HtmlEncode(_.T(plainTexttoEncode)+"'"); %>); 
```

内联`split(';')`可能会使编译器感到困惑。

# android - 在所有安卓设备中打开前置摄像头

> ID：12085844
> 
> 赞同：1
> 
> 时间：2012-08-23T06:22:44.337
> 
> 标签：android, camera

我无法获得在每个 android 设备中默认使用前置摄像头的逻辑。在我的应用程序中。我需要在捕获图像按钮上自动打开前置摄像头，并且在图像捕获后它应该直接存储到我的应用程序的本地数据库而不是 SD 卡。任何想法 ？？

# android - 将 FrameLayout 高度与其中的 ImageView 匹配

> ID：12085848
> 
> 赞同：3
> 
> 时间：2012-08-23T06:22:55.767
> 
> 标签：android, height, imageview, android-framelayout

在我的布局中，我有一个 FrameLayout，其中包含 2 个 ImageView。一次显示一个 ImageView，ImageView 之间的变化是通过 3D Rotation 动画完成的。

```
<FrameLayout
            android:id="@+id/animContainer"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp" >

            <ImageView
                android:id="@+id/picture1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:clickable="true"
                android:focusable="true"
                android:src="@drawable/malware" />

            <ImageView
                android:id="@+id/picture2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:clickable="true"
                android:focusable="true"
                android:src="@drawable/browsing"
                android:visibility="gone" />
        </FrameLayout> 
```

我的 xml 的问题是它在 FrameLayout 中的 ImageView 上方和下方留下了一些空白空间，即使我没有为其指定任何顶部或底部边距/填充。我在 FrameLayout 中使用的 ImageViews 具有相同的高度。我希望 FrameLayout 的高度与其中的 ImageViews 的高度完全相同。我如何实现这一目标？谢谢你。

编辑：我观察到的另一件事是，在横向模式下，空白空间被添加到 ImageViews 的左侧和右侧，并且 FrameLayout 的宽度与 ImageViews 的宽度不匹配。FrameLayout 的宽度和高度如何与 ImageView 的相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:28:31.167

我认为您需要在 ImageView 中使用 android:adjustViewBounds="true" -> ...这会将 imageview 的大小调整为内部图像，并希望能解决您的问题。

[http://developer.android.com/reference/android/widget/ImageView.html#attr_android:adjustViewBounds](http://developer.android.com/reference/android/widget/ImageView.html#attr_android:adjustViewBounds)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-23T19:53:49.953

我想我找到了一个解决方案，在我的解决方案中，我必须在右上角放置一个图像作为删除图标，但必须跳过箍以使 X 的边缘与照片的顶部对齐。fitCenter 将在顶部和底部创建空白。fitStart 就像一个魅力。

```
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <ImageView
        android:id="@+id/front_right"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="top"
        android:scaleType="fitStart"
        android:adjustViewBounds="true"
        android:onClick="imageEditClicked"
        android:src="@drawable/myimage"/>

    <ImageView
        android:id="@+id/front_right_x"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="10dp"
        android:background="@color/white"
        android:layout_gravity="end|top"
        android:clickable="true"
        android:focusable="true"
        app:srcCompat="@drawable/com_facebook_tooltip_black_xout" />

</FrameLayout> 
```

# php - 如何启用 MediaWiki 的新可视化编辑器？

> ID：12085857
> 
> 赞同：6
> 
> 时间：2012-08-23T06:23:22.950
> 
> 标签：php, mediawiki

我一直在使用默认的 MediaWiki 的内置 WikiEditor，但我发现了这一点：[http ://www.mediawiki.org/wiki/VisualEditor:Test](http://www.mediawiki.org/wiki/VisualEditor:Test)

我找不到它在哪里说我需要做什么才能让它运行。我的`LocalSettings.php`文件需要一些配置属性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:27:11.787

以下是一些说明：[http](http://www.mediawiki.org/wiki/Extension:VisualEditor) ://www.mediawiki.org/wiki/Extension:VisualEditor 。

您还需要安装 Parsoid 服务器。以下是相关说明：[http](http://www.mediawiki.org/wiki/Parsoid#Getting_started) ://www.mediawiki.org/wiki/Parsoid#Getting_started 。

# angularjs - 如何在 AngularJS 中加载特定于语言的模板？

> ID：12085862
> 
> 赞同：1
> 
> 时间：2012-08-23T06:24:09.937
> 
> 标签：angularjs

我有一条路线定义为

$routeProvider.when('/:culture/:gameKey/:gameId/closed', { templateUrl: '/templates/tradingclosed', 控制器: TradingClosedCtrl });

我希望在以某种方式请求模板时包含“文化”参数，这样我就可以提供翻译后的模板。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:16:07.697

如果我没看错，您想以某种方式使用`culture`url 路由中的参数来确定检索模板的位置。

可能有更好的方法，但[这篇文章](https://stackoverflow.com/a/11535887/1207991)描述了检索`$routeParams`中央控制器内部`ng-include`以动态加载视图。

与此类似的东西：

```
angular.module('myApp', []).
    config(function ($routeProvider) {
        $routeProvider.when('/:culture/:gameKey/:gameId/closed', {
            templateUrl: '/templates/nav/urlRouter.html',
            controller: 'RouteController'
        });
    });

function RouteController($scope, $routeParams) {
        $scope.templateUrl = 'templates/tradingclosed/' + $routeParams.culture + '_template.html';
    } 
```

将此作为您的**urlRouter.html**：

```
<div ng-include src="templateUrl"></div> 
```

您可以使用 ng-controller 定义要在视图中加载的控制器并访问`$routeParams`附加路由参数：

```
<div ng-controller="TradingClosedCtrl">
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:54:58.927

我已经用@Gloopy 建议的解决方案的工作[Plnkr 示例发布了](http://plnkr.co/edit/3oCumxsJPld4XTE4ZpAQ?p=preview)[类似的问题](https://stackoverflow.com/questions/14053939/how-to-get-localized-templates-templateurl-in-routing-with-angularjs)。

没有 ng-include 无法实现的原因是路由是在“配置”块中完成的，您不能在其中注入任何值（您可以在[模块文档中阅读这些块，](http://docs.angularjs.org/guide/module)**模块加载和依赖项**部分

 **如果你不想引入新的范围，你可以用我的 ng-include 指令的剥离版本替换 ng-include，它与 ng-include 完全一样，但不要创建新的范围：[rawInclude 指令的来源](https://gist.github.com/4387706)

希望该解决方案能够满足您的用例。**

# ubuntu - 信号：Ubuntu 中 PETSc 中的分段错误 (11)

> ID：12085864
> 
> 赞同：0
> 
> 时间：2012-08-23T06:24:18.893
> 
> 标签：ubuntu, segmentation-fault, mpi, petsc

我是 MPI 和 PETSc 的新手。我在我的系统中安装了 PETSc 和 MPICH2 并尝试运行最简单的 Hello World。但是代替预期的输出，出现了很多乱码。

我的制作文件是：

```
ALL:exam_petsc1

CFLAGS          =
FFLAGS          =
CPPFLAGS        =
FPPFLAGS        =
CLEANFILES      = exam_petsc1

include ${PETSC_DIR}/conf/variables
include ${PETSC_DIR}/conf/rules

exam_petsc1: exam_petsc1.o chkopts
    ${CLINKER} -o exam_petsc1 exam_petsc1.o  ${PETSC_LIB}
    ${RM} exam_petsc1.o 
```

我的程序是：

```
#include <petscksp.h>

int main(int argc, char *argv[])
{
PetscInitialize(&argc,&argv,PETSC_NULL,PETSC_NULL);
PetscPrintf(PETSC_COMM_WORLD,"Hi\n");
PetscFinalize();
return 0;
} 
```

终端中的“make”没有给出，但以下

```
/usr/bin/mpicc -o exam_petsc1.o -c -fPIC -Wall -Wwrite-strings -Wno-strict-aliasing -Wno-unknown-pragmas -g3 -fno-inline -O0 -I/home/soumyadipta/PETSC/petsc-3.3-p1/include -I/home/soumyadipta/PETSC/petsc-3.3-p1/arch-linux2-c-debug/include -I/usr/lib/openmpi/include -I/usr/lib/openmpi/include/openmpi -D__INSDIR__= exam_petsc1.cpp

/usr/bin/mpicc -fPIC -Wall -Wwrite-strings -Wno-strict-aliasing -Wno-unknown-pragmas -g3 -fno-inline -O0  -o exam_petsc1 exam_petsc1.o  -Wl,-rpath,/home/soumyadipta/PETSC/petsc-3.3-p1/arch-linux2-c-debug/lib -L/home/soumyadipta/PETSC/petsc-3.3-p1/arch-linux2-c-debug/lib  -lpetsc -lpthread -llapack -lblas -Wl,-rpath,/usr/lib/openmpi/lib -L/usr/lib/openmpi/lib -Wl,-rpath,/usr/lib/gcc/x86_64-linux-gnu/4.6.1 -L/usr/lib/gcc/x86_64-linux-gnu/4.6.1 -Wl,-rpath,/usr/lib/x86_64-linux-gnu -L/usr/lib/x86_64-linux-gnu -Wl,-rpath,/lib/x86_64-linux-gnu -L/lib/x86_64-linux-gnu -lmpi_f90 -lmpi_f77 -lgfortran -lm -lgfortran -lm -lgfortran -lm -lm -lquadmath -lm -ldl -lmpi -lopen-rte -lopen-pal -lnsl -lutil -lgcc_s -lpthread -ldl 
/bin/rm -f exam_petsc1.o 
```

“mpiexec -np 4 Exam_petsc1”给出了一长串错误，如下所示....

```
[SoumyadiptaS:13130] *** Process received signal ***
[SoumyadiptaS:13130] Signal: Segmentation fault (11)
[SoumyadiptaS:13130] Signal code: Address not mapped (1)
[SoumyadiptaS:13130] Failing at address: 0x44000098
[SoumyadiptaS:13128] *** Process received signal ***
[SoumyadiptaS:13128] Signal: Segmentation fault (11)
[SoumyadiptaS:13128] Signal code: Address not mapped (1)
[SoumyadiptaS:13128] Failing at address: 0x44000098
[SoumyadiptaS:13130] [ 0] /lib/x86_64-linux-gnu/libpthread.so.0(+0x10060) [0x7f50398e9060]
[SoumyadiptaS:13130] [ 1] /usr/lib/libmpi.so.0(PMPI_Comm_set_errhandler+0x60) [0x7f50391efc80]
[SoumyadiptaS:13130] [ 2] exam_petsc1(PetscInitialize+0x515) [0x41cec9]
[SoumyadiptaS:13130] [ 3] exam_petsc1(main+0x29) [0x40d89d]
[SoumyadiptaS:13130] [ 4] /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7f5038e2030d]
[SoumyadiptaS:13130] [ 5] exam_petsc1() [0x40d7b9]
[SoumyadiptaS:13130] *** End of error message ***
[SoumyadiptaS:13129] *** Process received signal ***
[SoumyadiptaS:13129] Signal: Segmentation fault (11)
[SoumyadiptaS:13129] Signal code: Address not mapped (1)
[SoumyadiptaS:13129] Failing at address: 0x44000098
[SoumyadiptaS:13128] [ 0] /lib/x86_64-linux-gnu/libpthread.so.0(+0x10060) [0x7f5e8c830060]
[SoumyadiptaS:13128] [ 1] /usr/lib/libmpi.so.0(PMPI_Comm_set_errhandler+0x60) [0x7f5e8c136c80]
[SoumyadiptaS:13128] [ 2] exam_petsc1(PetscInitialize+0x515) [0x41cec9]
[SoumyadiptaS:13128] [ 3] exam_petsc1(main+0x29) [0x40d89d]
[SoumyadiptaS:13128] [ 4] /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7f5e8bd6730d]
[SoumyadiptaS:13128] [ 5] exam_petsc1() [0x40d7b9]
[SoumyadiptaS:13128] *** End of error message ***
[SoumyadiptaS:13131] *** Process received signal ***
[SoumyadiptaS:13131] Signal: Segmentation fault (11)
[SoumyadiptaS:13131] Signal code: Address not mapped (1)
[SoumyadiptaS:13131] Failing at address: 0x44000098
[SoumyadiptaS:13131] [ 0] /lib/x86_64-linux-gnu/libpthread.so.0(+0x10060) [0x7f9e7c261060]
[SoumyadiptaS:13131] [ 1] /usr/lib/libmpi.so.0(PMPI_Comm_set_errhandler+0x60) [0x7f9e7bb67c80]
[SoumyadiptaS:13131] [ 2] exam_petsc1(PetscInitialize+0x515) [0x41cec9]
[SoumyadiptaS:13131] [ 3] exam_petsc1(main+0x29) [0x40d89d]
[SoumyadiptaS:13131] [ 4] /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7f9e7b79830d]
[SoumyadiptaS:13131] [ 5] exam_petsc1() [0x40d7b9]
[SoumyadiptaS:13131] *** End of error message ***
--------------------------------------------------------------------------
mpiexec noticed that process rank 2 with PID 13130 on node SoumyadiptaS exited on signal 11 (Segmentation fault).
--------------------------------------------------------------------------
[SoumyadiptaS:13129] [ 0] /lib/x86_64-linux-gnu/libpthread.so.0(+0x10060) [0x7f73a8ac2060]
[SoumyadiptaS:13129] [ 1] /usr/lib/libmpi.so.0(PMPI_Comm_set_errhandler+0x60) [0x7f73a83c8c80]
[SoumyadiptaS:13129] [ 2] exam_petsc1(PetscInitialize+0x515) [0x41cec9]
[SoumyadiptaS:13129] [ 3] exam_petsc1(main+0x29) [0x40d89d]
[SoumyadiptaS:13129] [ 4] /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7f73a7ff930d]
[SoumyadiptaS:13129] [ 5] exam_petsc1() [0x40d7b9]
[SoumyadiptaS:13129] *** End of error message *** 
```

我的程序有什么问题？？？

# sql - ORACLE 中的最大函数

> ID：12085866
> 
> 赞同：1
> 
> 时间：2012-08-23T06:24:37.677
> 
> 标签：sql, oracle

我有一个具有以下结构的表`DEMOTABLE(COL_ID INT,COL_DATE DATE).`
为什么以下查询给我一个错误

> 错误代码 936，SQL 状态 42000：ORA-00936：缺少表达式

```
SELECT MAX(
SELECT TO_CHAR(COL_DATE,'YYYY-MM-DD HH24:MI:SS') 
FROM DEMOTABLE WHERE COL_ID IN(1,2,3))
FROM DUAL 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T06:26:29.270

听起来你想要

```
SELECT to_char( max( col_date ),
                'yyyy-mm-dd hh24:mi:ss' )
  FROM demotable
 WHERE col_id IN (1,2,3) 
```

通常，您需要先执行`MAX`然后才将最大日期转换为字符串。这既是因为您想使用日期比较语义，又因为进行比较更便宜，并且只对您感兴趣的一行进行数据类型转换。您还想`SELECT`从您感兴趣的表中，而不是来自`DUAL`。

# c# - 用表达式解释使用泛型方法

> ID：12085868
> 
> 赞同：1
> 
> 时间：2012-08-23T06:24:46.317
> 
> 标签：c#, generics, expression, func

我想将一个强类型属性传递给一个方法，并将这个属性名用作 mhy 集合的字符串，所以我找到了一些代码，我可以在其中传递我的强类型属性：

```
public static void Add<TObject, TProperty>(this NameValueCollection collection, Expression<Func<TObject, TProperty>> expression, string value)
{
    var member = expression.Body as MemberExpression;

    collection.Add(member.Member.Name, value);
} 
```

这可以工作并且可以满足我的要求，但我想知道这到底是如何工作的。我感兴趣的部分是方法 ( `Add<Tobject, TProperty>`) 的通用参数与`Func`表达式的结合。有人可以向我解释这是如何工作的吗？为什么我可以像这样调用这个方法`collection.Add((MyObject m) => m.FullName, "Martijn")`？为什么不需要使用它`Add<MyObject, ???>(m => m.FullName, "Martijn")`？

更新：我现在将我的方法重构为：

```
public static void Add<TObject>(this NameValueCollection collection, Expression<Func<TObject, string>> expression, string value)
{
    var member = expression.Body as MemberExpression;

    collection.Add(member.Member.Name, value);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:32:38.633

`Expression<T>`是具有 delegate-type 签名的*表达式树*`T`。表达式树很复杂，但基本上：它不是作为操作的委托*，而是**描述*操作的对象模型，并且可以检查它以查看它是如何组成的。

因此，an`Expression<Func<TObject,TProperty>>`是一个表达式树，表示接受`TObject`参数并返回`TProperty`结果的东西。

至于为什么不需要`<MyObject, ???>`手动告诉它：那是泛型类型推断，是正常的。给定一个通用方法，说：

```
void Foo<T>(T bar); 
```

您*可以*将其称为：

```
Foo<string>("abc"); 
```

但您也可以使用：

```
Foo("abc"); 
```

然后编译器将检查参数以查看它是否可以解析所有泛型类型参数 - 在这种情况下，`"abc"`is a`string`和 pin `T`to be a `string`。如果它可以解决***所有***这些问题，则无需指定它们。

在您的示例中， the`TObject`被固定，因为您的 lambda 显式采用 a `MyObject`， via `(MyObject) m`，并且 the`TProperty`被固定到（大概） a `string`，因为`m.FullName`（大概）返回 a `string`。由于所有泛型类型参数都已自动解析，因此您无需`<...>`手动指定。

请注意，泛型类型推断仅适用于泛型*方法*（通过参数），不适用于泛型*类型*。

# java - 二叉树问题的LCA

> ID：12085869
> 
> 赞同：0
> 
> 时间：2012-08-23T06:24:46.493
> 
> 标签：java, algorithm, tree, binary-tree

我已经编写了一个代码来查找二叉树中节点的最小共同祖先，但它似乎返回`null`而不是 LCA。

我的算法如下。

1.  在树的左右分支中递归查找祖先
2.  左树和右树在 LCA 中具有匹配元素的节点。

    ```
    public class LCA {
      public static BinaryTreeNode findLCA( BinaryTreeNode root, BinaryTreeNode node1 , BinaryTreeNode node2) {     

    if (root == null) {
        return null;
    }       

    BinaryTreeNode left = root.getLeft();
    BinaryTreeNode right = root.getRight(); 

    if (left != null && (left == node1 || left == node2)) {
        return root;                
    }

    if (right != null && (right == node1 || right == node2)) {
        return root;                
    }

    if (( findLCA(left, node1, node2) != null) && (findLCA(right, node1, node2) != null)) {         
        return root;
    }

    return null; }} 
    ```

这段代码可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:35:19.343

我想我能够修复它。我添加了另一个条件来查看我的递归 findLCA 是否正在返回一些东西。如果是这样，我会进一步返回相同的值来解决问题。如果这个设计是好的，请提供您的意见。

```
public static BinaryTreeNode findLCA( BinaryTreeNode root, BinaryTreeNode node1 , BinaryTreeNode node2) {       

    if (root == null) {
        return null;
    }       

    BinaryTreeNode left = root.getLeft();
    BinaryTreeNode right = root.getRight();
    BinaryTreeNode lcaNode1;
    BinaryTreeNode lcaNode2;

    if (left != null && (left == node1 || left == node2)) {
        return root;                
    }

    if (right != null && (right == node1 || right == node2)) {
        return root;                
    }
    lcaNode1 =  findLCA(left, node1, node2);
    lcaNode2 =  findLCA(right, node1, node2);

    if (( lcaNode1 != null) && lcaNode2 != null) {          
        return root;
    }

    if (lcaNode1 != null) {
        return lcaNode1;
    }

    if (lcaNode2 != null) {
        return lcaNode2;
    }       

    return null;        
} 
```

# php - 点击立即付款按钮后，贝宝会生成任何事件吗？

> ID：12085871
> 
> 赞同：1
> 
> 时间：2012-08-23T06:25:03.600
> 
> 标签：php, events, paypal, shopping-cart

我有一个用 PHP 实现的购物车，结帐过程由 PayPal 处理。当客户按下 PayPal 中的“立即付款”按钮时，它是否会生成任何事件以便我可以处理该信息并根据我数据库中的库存水平决定是否接受付款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:29:49.947

不，但是您可以在使用[PayPal IPN](https://www.paypal.com/ipn)付款后执行此操作，它会将有关购买的所有数据发送回来..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:31:09.917

您可以使用 javascript 来查询您的服务器关于单击时的库存水平，如果一切正常，请提交表单。

# css - CSS：100% 宽度和背景？

> ID：12085881
> 
> 赞同：13
> 
> 时间：2012-08-23T06:25:38.597
> 
> 标签：css, background, width

在我的页面中有 2-3 个部分具有 100% 的宽度和背景。当我全屏打开它时一切正常，但是当屏幕小于 960 像素（本节内容的宽度）时，背景图像不是整个页面。右边的 whis 隐藏在第一刻没有背景 - 它是白色的。你可以在这里看到我的意思：http: [//micobg.net/10th/](http://micobg.net/10th/)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-24T12:33:17.400

只需将`background-size:100%`样式添加到您应用的元素`background-image`。适用于 Firefox、Safari 和 Opera。例如：

```
<style>
.divWithBgImage {
  width: 100%;
  height: 600px;
  background-image: url(image.jpg);
  background-repeat: no-repeat;
  background-size: 100%; //propotional resize
/*
  background-size: 100% 100%; //stretch resize
*/
}
</style>
<div class="divWithBgImage">
  some contents
</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-17T19:15:04.993

关于[这篇](https://css-tricks.com/perfect-full-page-background-image/)文章，你也应该使用`cover`：

```
html { 
  background: url(PATH_TO_IMAGE) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T14:08:59.270

使用背景最小宽度：960px；而不是宽度：100%；干杯

# asp.net - 在 iis 上部署时指定域

> ID：12085882
> 
> 赞同：0
> 
> 时间：2012-08-23T06:25:46.160
> 
> 标签：asp.net, deployment, iis-7, windows-server-2008-r2

我正在使用 IIS7 将 Web 应用程序部署到名为 jonny521 的 Windows Server 2008。此服务器上大多数应用程序的域是 jonny521，但是应用程序的域之一是 jonny521.development.local，我不确定应用程序是如何获得该域的。我想将另一个应用程序部署到域 jonny521.development.local 以便它可以访问相同的 cookie。

有谁知道如何将我的 Web 应用程序放在域 jonny521.development.local 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:35:14.750

您可以将应用程序放在您的 Iis 上的任意域上。只需创建一个新网站并在网站属性中，将域设置为主机名。

剩下的部分是通过你的操作系统解析主机名，这样当你导航时，你就可以到达正确的服务器。您可以使用 dns 服务器，但也可以修改本地主机文件（system32/drivers/etc/hosts）。

# c# - 如果确认消息触发点击事件

> ID：12085885
> 
> 赞同：0
> 
> 时间：2012-08-23T06:25:50.573
> 
> 标签：c#, javascript, jquery

这是我的代码：

```
<script type="text/javascript">
$(document).ready(function () {
    $(window).bind('beforeunload', function () {
        alert("unload");
        if (closeIt())
            $("#<%=Button1.ClientID %>").trigger('click');

    });
    function closeIt() {
        var ans = confirm("save current layout ?");
        if (ans) return true;

    }
});
</script> 
<asp:Button ID="Button1" runat="server" OnClick="btnSaveState_Click" style="display:none;" /> 
```

新问题是确认消息在 Firefox 和非 chrome 上显示两次

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:39:45.033

处理`beforeunload`程序真正应该做的就是返回一个字符串，然后浏览器将其显示在“你确定你想离开”对话框中。如果用户单击确定，则将发生任何导航；如果他们单击取消，则不会。在[这里](http://msdn.microsoft.com/en-us/library/ie/ms536907.aspx)查看更多详细信息。

这里通常要做的事情是显示一条消息（通过返回一个字符串，而不是调用`confirm`你自己）沿着“你即将失去对当前布局所做的更改；你确定要离开？” 然后让用户*自己*单击取消，然后单击保存，如果他们不关心，则单击确定。

我预计您遇到了问题，因为您正在尝试在处理程序中执行回发，而回发*本身*会导致卸载。如果浏览器故意在处理程序中停止这种行为，我不会感到惊讶，因为恶意网站可以使用它来阻止您离开。

根据您的更新：只有某些浏览器甚至*允许* `beforeunoad`行为。从外观上看，Firefox 确实如此，因此您会看到两个对话框 - 您的对话框`confirm`，然后是浏览器的默认对话框。从外观上看，Chrome 没有，因此您的活动永远不会被调用。（或者如果 Chrome 做了一些意想不到的事情，比如回发，它可能会忽略该事件。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T06:44:53.810

尝试这个：

```
<asp:Button ID="Button1" runat="server" Text="Button"  CausesValidation="False" onclick="btnSaveState_Click"  onclientclick="return confirm('Are you sure you want to delete?')" /> 
```

或者，您可以查看 ASP.Net Ajax`<ajaxToolkit:ConfirmButtonExtender>`

# sql - 我需要登录表吗？

> ID：12085891
> 
> 赞同：0
> 
> 时间：2012-08-23T06:26:35.660
> 
> 标签：sql, database

嘿伙计们，我有一个简单的数据库问题。假设我正在模拟大学登录系统。

如果我有学生表和教员表，我可以直接将密码存储在相应的表中吗？例如学生表具有（student_ID - 主键）、First_name、Last_name、Classification 等属性，现在我将添加一个密码字段。

如果我创建一个登录表，我只是有效地复制了数千条潜在记录。使用say（主键STUDENT_ID，FACULTY_ID）和密码字段创建登录表以进行身份​​验证有什么好处吗？

我可以只增加一张桌子的安全性吗？更好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:34:56.410

由于一个学生只包含一个密码，`one to one relationship`因此无需为一对一的关系拆分表。

如果存在一对多的关系，打破表格会很好，例如存储多个电话号码或用户的多个地址......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:46:10.820

您需要决定是否只允许学生登录您的系统。管理员用户、教师等呢？

即使非学生登录系统的可能性很小，建议创建一个登录表，其中用户 ID 和密码存储在 MD5 加密中

# android - Android R.java - “重载”值

> ID：12085894
> 
> 赞同：1
> 
> 时间：2012-08-23T06:26:50.433
> 
> 标签：android, overloading, r.java-file

我已经搜索过有关此的信息，但是当我真的不知道要搜索什么时，这很难。

我正在开发一些共享共同基础的 android 项目（我放入了一些库）。这些库适用于类和 xml 文件，以及其他一些资源。最常见的是我有一个可绘制的 xml，它从一个定义要使用的颜色的 xml 文件中获取颜色信息，称为“foobar_colors.xml”之类的东西。库本身中的“foobar_colors.xml”定义了默认颜色。

当我在项目中使用库时，这些颜色需要更改（使用客户公司的颜色左右），而且我不确定最好的方法是如何实现这一点......这些库使用了他们自己的资源分配xml-layouts 之类的，所以我真的不能总是“声明可以样式化的东西”。

我现在的做法是在我的项目中包含“foobar”库，将“foobar_colors.xml”复制到我的项目资源中并在那里更改它们的值。这是有效的，因为 R.java 似乎“重载”了像 lib 本身将“foobar_color1”设置为黑色并且项目将其再次设置为红色（并且项目定义具有更高优先级）的值。

现在我只是想知道，这样安全吗？有没有更好的方法呢？未来可能出现的问题？

# ruby-on-rails - jasmine 无法测试 ror 中 app/assets/javascripts 中存在的 javascript 代码。$rake jasmine 期间发生参考错误

> ID：12085896
> 
> 赞同：1
> 
> 时间：2012-08-23T06:27:16.503
> 
> 标签：ruby-on-rails, jasmine

**问题描述：**

> 我为 ROR 设置了 jasmine，当我编写 jasmine 测试用例（即“helloworld.js”）来测试 app/assets/javascripts 中存在的 javascript 代码（即“hello.js”）时。当我执行它时，它给出了 ReferenceError: helloWorld is not defined。当我将“hello.js”文件放入 spec/javascript/helper/ 中时，测试用例得到执行而没有任何错误。

**ROR项目说明：**

> 我为 ROR（ruby on rails）项目设置了 jasmine 以下是项目的版本信息： Rails -v 3.2 jasmine 1.2.1 require.js 2.0.6

**ROR项目目录结构：**

> blog/ app/ assets/ javascripts/ hello.js application.coffee spec/ javascripts/ helpers/ support/ jasmine.yml helloworld.js spec_helper.rb
> /config requirejs.yml Gemfile

```
**Gemfile:**

    group :development, :test do
  gem 'rspec-rails'
  gem "capybara"
  gem "launchy"
  gem 'jasmine'
end 
```

**你好.js：**

```
function helloWorld() {
    return "Hello world!";
} 
```

**helloworld.js**

```
 describe("Hello world", function() {
    it("says hello", function() {
        expect(helloWorld()).toEqual("Hello world!");
    });
}); 
```

**需要js.yml：**

> deps：[jquery，主干，下划线] 导出：Backbone.Paginator 路径：spin：spin-1.2.5 jquery.spin：jquery.spin-0.0.1 jed：jed-0.5.0beta 文本：text-2.0.1 玉：翡翠0.27.0翡翠运行时：翡翠运行时0.27.0降价：markdown-0.4.0主干分页器：主干分页器-0.1.54.8fcc333d18 fs：compat/fs路径：compat/path po：plugins/po j: plugins/j stubModules: - text - po - j excludeShallow: - utils/po2json # find vendor/assets/javascripts/jade-0.27.0 -name '*.js' | grep -v 运行时 | sed -E's/. 5 jquery.spin：jquery.spin-0.0.1 jed：jed-0.5.0beta 文本：text-2.0.1 玉：jade-0.27.0 jam.runtime：jade.runtime-0.27.0 markdown：markdown-0.4。 0 骨干网.paginator:骨干网.paginator-0.1.54.8fcc333d18 fs:compat/fs 路径:compat/path po:plugins/po j:plugins/j stubModules:-text -po -j excludeShallow:-utils/po2json #查找供应商/assets/javascripts/jade-0.27.0 -name '*.js' | grep -v 运行时 | sed -E's/. 5 jquery.spin：jquery.spin-0.0.1 jed：jed-0.5.0beta 文本：text-2.0.1 玉：jade-0.27.0 jam.runtime：jade.runtime-0.27.0 markdown：markdown-0.4。 0 骨干网.paginator:骨干网.paginator-0.1.54.8fcc333d18 fs:compat/fs 路径:compat/path po:plugins/po j:plugins/j stubModules:-text -po -j excludeShallow:-utils/po2json #查找供应商/assets/javascripts/jade-0.27.0 -name '*.js' | grep -v 运行时 | sed -E's/. 8fcc333d18 fs: compat/fs path: compat/path po: plugins/po j: plugins/j stubModules: - text - po - j excludeShallow: - utils/po2json # find vendor/assets/javascripts/jade-0.27.0 -name '*.js' | grep -v 运行时 | sed -E's/. 8fcc333d18 fs: compat/fs path: compat/path po: plugins/po j: plugins/j stubModules: - text - po - j excludeShallow: - utils/po2json # find vendor/assets/javascripts/jade-0.27.0 -name '*.js' | grep -v 运行时 | sed -E's/.*玉[^/]+/(.*).js$/ -jade/\1/' -jade/编译器 -jade/doctypes -jade/filters -jade/inline-tags -jade/jade -jade/lexer -jade/nodes/attrs -jade/nodes/block -comment -jade/nodes/block -jade/nodes/case -jade/nodes/code -jade/nodes/comment -jade/nodes/doctype -jade/nodes/each -jade/nodes/filter -jade/nodes/index -jade/nodes/literal -jade/nodes/mixin -jade/nodes/node -jade/nodes/tag -jade/nodes/text -jade/parser -jade/自关闭 -jade/utils include: # 强制包含这个用于运行已编译的 Jade 模板 - 玉/运行时模块： - 名称：应用程序 - 名称：locale/application_es 语言环境：es - 名称：locale/application_en 语言环境：en wrap：true 地图：markdown：util：compat/noop 玉：sass：compat/noop 手写笔：compat/noop 折扣：compat/noop markdown- js：compat/noop 标记：compat/noop less：compat/noop utils/jade.trans：jade/jade：jade/runtimecompat/noop 标记：compat/noop less：compat/noop utils/jade.trans：jade/jade：jade/runtimecompat/noop 标记：compat/noop less：compat/noop utils/jade.trans：jade/jade：jade/runtime

**茉莉花.yml**

> ```
> > 
> # src_files
> #
> # Return an array of filepaths relative to src_dir to include before jasmine specs.
> # Default: []
> #
> # EXAMPLE:
> #
> # src_files:
> #   - lib/source1.js
> #   - lib/source2.js
> #   - dist/**/*.js
> #
> src_files:
>   - public/javascripts/prototype.js
>   - public/javascripts/effects.js
>   - public/javascripts/controls.js
>   - public/javascripts/dragdrop.js
>   - public/javascripts/application.js
>   - public/javascripts/**/*.js
>   - app/assets/javascripts/*.js
> 
> # stylesheets
> #
> # Return an array of stylesheet filepaths relative to src_dir to include before jasmine specs.
> # Default: []
> #
> # EXAMPLE:
> #
> # stylesheets:
> #   - css/style.css
> #   - stylesheets/*.css
> #
> stylesheets:
>   - stylesheets/**/*.css
> 
> # helpers
> #
> # Return an array of filepaths relative to spec_dir to include before jasmine specs.
> # Default: ["helpers/**/*.js"]
> #
> # EXAMPLE:
> #
> # helpers:
> #   - helpers/**/*.js
> #
> helpers:
>   - helpers/**/*.js
> 
> # spec_files
> #
> # Return an array of filepaths relative to spec_dir to include.
> # Default: ["**/*[sS]pec.js"]
> #
> # EXAMPLE:
> #
> # spec_files:
> #   - **/*[sS]pec.js
> #
> spec_files:
>   - '**/*[sS]pec.js'
> 
> # src_dir
> #
> # Source directory path. Your src_files must be returned relative to this path. Will use root if left blank.
> # Default: project root
> #
> # EXAMPLE:
> #
> # src_dir: public
> #
> src_dir: 
> 
> # spec_dir
> #
> # Spec directory path. Your spec_files must be returned relative to this path.
> # Default: spec/javascripts
> #
> # EXAMPLE:
> #
> # spec_dir: spec/javascripts
> #
> spec_dir: spec/javascripts 
> ```

**我使用以下命令在 ROR 上设置和运行 jasmine**

> > ```
> > $rails g jasmine:install
> > $rake jasmine
> > your tests are here: 
> > ```
> > 
> > [2012-08-22 21:35:44] 信息 WEBrick 1.3.1 [2012-08-22 21:35:44] 信息 ruby​​ 1.9.2 (2012-04-20) [i686-linux] [2012-08 -22 21:35:44] WARN TCPServer 错误：地址已在使用中-bind(2) [2012-08-22 21:35:44] INFO WEBrick::HTTPServer#start: pid=3210 port=8888

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:48:02.050

尝试在 jasmine.yml 文件的 src_dir 中提供 app/assets/javascript。

# python - django Models.py 的问题

> ID：12085897
> 
> 赞同：0
> 
> 时间：2012-08-23T06:27:25.307
> 
> 标签：python, mysql, django

> 我在使用**model.py**文件时遇到了一些问题

model.py 的代码是：

```
from django.db import models

import datetime
from django.utils import timezone

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')
 def __unicode__(self):
        return self.question
 def was_published_recently(self):
        return self.pub_date >= timezone.now() - datetime.timedelta(days=1)

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes = models.IntegerField()
 def __unicode__(self):
        return self.choice 
```

当我运行这个命令**python manage.py shell**时出现以下错误

```
File "/home/ghrix/testing/demo/polls/models.py", line 9
    def __unicode__(self):
                         ^
IndentationError: unindent does not match any outer indentation level 
```

在我的 model.py 文件中添加一些代码行后发生此错误

> 从 django.utils 导入日期时间

**在投票类**

```
def __unicode__(self):
        return self.question
 def was_published_recently(self):
        return self.pub_date >= timezone.now() - datetime.timedelta(days=1) 
```

**在选择课**

```
def __unicode__(self):
        return self.choice 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:30:52.973

Python 对缩进非常敏感。您的特定代码应如下所示：

```
from django.db import models

import datetime
from django.utils import timezone

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

    def __unicode__(self):
        return self.question

    def was_published_recently(self):
        return self.pub_date >= timezone.now() - datetime.timedelta(days=1)

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes = models.IntegerField()

    def __unicode__(self):
        return self.choice 
```

请记住，建议的缩进是每个级别 4 个空格。您遇到的问题是您的属性如 say`Poll.question`应该定义在与 method 相同的级别`__unicode__`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:30:36.843

看起来您的代码有缩进错误。试试这个：

```
class Choice(models.Model):
  poll = models.ForeignKey(Poll)
  choice = models.CharField(max_length=200)
  votes = models.IntegerField()

  def __unicode__(self):
      return self.choice 
```

类也是一样`Pool`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:31:19.667

似乎您可能将空格与制表符混合在一起，请尝试运行：

```
python -m tabnanny models.py 
```

并修复制表符/空格缩进错误。[根据PEP8 ，](http://www.python.org/dev/peps/pep-0008/#tabs-or-spaces)*始终*使用空格而不是制表符是个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T06:34:08.217

请改用以下文件。你有缩进问题。请记住，同一级别的所有代码都应正确对齐。

您还应该确保不要在编辑器中混用空格和制表符。一般来说，最好坚持使用空格。关键是确保你不要混搭——否则你会得到类似的错误。

```
import datetime

from django.db import models
from django.utils import timezone

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

    def __unicode__(self):
        return unicode(self.question)

    def was_published_recently(self):
        return self.pub_date >= timezone.now() - datetime.timedelta(days=1)

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes = models.IntegerField()

    def __unicode__(self):
        return unicode(self.choice) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T06:34:14.597

你`def __unicode__(self):`的**缩进小于**and`question =`行`pub_date =`。如果它是类的`def`一部分，则应该与类中它上面的其余代码具有相同的缩进。

```
class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')
    # the def should start at this indent level like the lines above
    # <<<<<<<<
    def __unicode__(self):
        return self.question 
```

# asp.net-mvc-3 - asp.net mvc 3：web.config 没有被读取？

> ID：12085903
> 
> 赞同：0
> 
> 时间：2012-08-23T06:27:50.417
> 
> 标签：asp.net-mvc-3, entity-framework-4, configuration-files

我创建了一个指向我的 web.config 的链接，该链接被定义为在解决方案级别定义的中央配置文件。所以我遇到麻烦的项目包含对此配置文件的引用：

网络配置：

```
 <configuration>
      <connectionStrings>

        <add name="NorthwindEntities" connectionString="metadata=res://*/NWind.csdl|res://*/NWind.ssdl|res://*/NWind.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS;initial catalog=Northwind;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
      </connectionStrings>
    </configuration

Also I created a .edmx file and the connectionstring is  like:

<configuration>
  <connectionStrings>
    <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
    <add name="NorthwindEntities" connectionString="metadata=res://*/NWind.csdl|res://*/NWind.ssdl|res://*/NWind.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS;initial catalog=Northwind;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

问题是我的 .edmx 文件不会读取连接字符串：

我收到一个错误：对象引用未设置为对象的实例？

```
 string constrng = ConfigurationManager.ConnectionStrings["NorthwindEntities"].ToString(); 
```

# c# - ReportViewer 在 GetDefaultPageSettings() 上锁定了很长一段时间

> ID：12085904
> 
> 赞同：2
> 
> 时间：2012-08-23T06:27:52.273
> 
> 标签：c#, .net, ironpython, reportviewer, deadlock

我最近在报表查看器（Windows 窗体）中遇到了一个非常奇怪的问题。通常，reportviewer 表现得非常好，加载速度很快，并且很好地显示了报告。但是，我们遇到了一种需要很长时间才能显示报告的*情况。*我无法发布整个代码，因为不清楚导致问题的原因。

### 问题

以下方法调用会导致问题（同样，仅在非常特定的情况下）：

```
reportViewer.LocalReport.GetDefaultPageSettings() 
```

应用程序可能需要长达 10 分钟才能通过此行，事实上，如果将此行注释掉，那么一切都会开始正常运行。

### `special`场景_

导致问题的特殊情况的唯一区别是，在显示报告之前，一些 python 代码在报告显示之前被执行（通过 IronPython 和在同一个 AppDomain 中，python 代码不引用任何接近报告的内容）。

### 探查器，有人吗？

好的，所以我使用分析器 (Xte) 运行此场景，并注意到该方法`IronPython.Runtime.PythonContext.LoadAssemblyFromFile`是冻结的方法。我们正在运行的 python 代码中没有显式的程序集加载，因此这是一个自动程序集加载。

### 奇怪的部分

所以，我无法理解的奇怪部分是这两件事是如何联系起来的？我查看了`GetDefaultPageSettings()`ILSpy 并看到了这个：

```
public override ReportPageSettings GetDefaultPageSettings()
{
    object syncObject;
    Monitor.Enter(syncObject = this.m_syncObject);
    ReportPageSettings pageProperties;
    try
    {
        this.EnsureExecutionSession();
        pageProperties = this.m_pageProperties;
    }
    finally
    {
        Monitor.Exit(syncObject);
    }
    return pageProperties;
} 
```

而且我只能猜测它是导致这个方法挂起的锁，但我无法理解执行 python 是如何影响这个锁的。我的意思是，很明显，如果我不运行 python 代码，那么这个方法执行得非常好，没有延迟。

顺便说一句 - 大约之后。10分钟东西显示报告。它只是锁定10分钟，然后正常继续。

### 关于从这里去哪里的建议？

所以，如果有人能给我任何关于我应该去那里的信息，我将不胜感激。目前，我正在尝试将案例隔离在一个单独的干净项目中，一旦成功，我将在此处发布。

谢谢！

### 更新 1：Python 脚本示例

到目前为止，我只得到了一条附加信息——即使你运行一个最小的脚本也会出现这个问题。因此，即使执行脚本`0`（仅返回 0）也会出现问题。

### 更新 2：在单独的域中运行

在单独的域中运行 python 没有帮助。问题仍然存在。

### 更新 3：涉及 CurrentUICulture！

在我的调试会话期间，我注意到在有问题的场景中 AppDomain 尝试并未能解决以下资源程序集：

```
mscorlib.resources, Version=4.0.0.0, Culture=fi, PublicKeyToken=b77a5c561934e089
mscorlib.resources, Version=4.0.0.0, Culture=fi-FI, PublicKeyToken=b77a5c561934e089 
```

这就是延迟 10 分钟的原因——它只是试图一遍又一遍地加载该程序集（两者都设置为`CurrentCulture`和）。但是，如果我将其更改为，那么问题就会消失（因为它不再需要该程序集。`CurrentUICulture``fi-FI``CurrentUICulture``en-US`

But again - the mystery still remains - if the `CurrentUICulture` is set to `fi-FI` and I execute any script via IronPython it will desperately try to load this resources file and fail all the time. If anyone is able to explain this to me - please do :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:09:47.913

The text in `Update 3` actually contains the resolution. At the moment the only solution I know is to change the `CurrentUICulture` to `en-US` for the moment when the report control is loading and rendering. This effectively eliminates the 10 minute delay.

# iphone - 绘制一个类似于 iPhone 的主屏幕图标的项目

> ID：12085908
> 
> 赞同：1
> 
> 时间：2012-08-23T06:28:04.380
> 
> 标签：iphone, ios

我想画一个类似于 iPhone 的项目。我也像这样用 UIView 画画![在此处输入图像描述](../Images/93202a1d88d899cf4c9970c7f813b49c.png)

但我想要的项目是这样的： ![在此处输入图像描述](../Images/ddf5d47980b6dd31b48d1d6c7bc311f7.png)

我怎样才能画出圆形按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:35:50.920

使用此代码

```
 UIButton *bt = [UIButton buttonWithType:UIButtonTypeCustom];
  [bt setFrame:CGRectMake(10, 10, 50, 50)];
  [bt setImage:[UIImage imageNamed:@"abc.png" ] forState:UIControlStateNormal];

  // Get the Layer of any view
  CALayer * l = [bt layer];
  [l setMasksToBounds:YES];
  [l setCornerRadius:10.0];

  // You can even add a border
  [l setBorderWidth:4.0];
  [l setBorderColor:[[UIColor blueColor] CGColor]];
  [self.view addSubview:bt]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:32:21.807

设置视图的角半径并在其下方插入标签。

iPhone 支持 CALayer 类的cornerRadius 属性。每个视图都有一个您可以操作的 CALayer 实例。

首先，`#import <QuartzCore/QuartzCore.h>`链接到`QuartzCore framework`CALayer 的标题和属性。然后，

```
yourView.layer.cornerRadius = 8; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T06:33:20.137

您可以通过以下方式制作圆边

```
 yourview.layer.cornerRadius = 8.0; // or other value 
```

# delphi - 创建复选框

> ID：12085909
> 
> 赞同：1
> 
> 时间：2012-08-23T06:28:06.250
> 
> 标签：delphi

我正在尝试创建几个复选框，多少由查询的记录数决定。我还需要从上一个位置设置复选框 +38 的位置。有人给我一些帮助吗？不知道如何创建复选框，其余的我应该能够做......无论如何他是我到目前为止所拥有的。

```
var
  i, top,left : integer;
begin
......
    left := 81;
    top := 119;
    while i < qry.RecordCount do
                  begin
                    // create check box
                    // set caption of checkbox to i
                    // set checkbox loction to left + 38, top
                    // left = left+38??
                  end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T06:41:57.390

在澄清您的需求后，我建议您将其[`TObjectList`](http://docwiki.embarcadero.com/Libraries/en/System.Contnrs.TObjectList)用作复选框的容器。该列表可以拥有对象，这允许您通过简单地从列表中删除项目来释放它们 by[`Clear`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.TList.Clear)或 by [`Delete`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.TList.Delete)。它还通过将获得的索引项对象类型转换为您已知的类类型来提供对每个元素的简单访问。以下未经测试的伪代码中的更多内容：

```
uses
  Contnrs;

type
  TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
  private
    CheckList: TObjectList;
  public
    { Public declarations }
  end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  CheckList := TObjectList.Create;
  // setting OwnsObjects to True will ensure you, that the objects
  // stored in a list will be freed when you delete them from list
  CheckList.OwnsObjects := True;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  // this will also release all check boxes thanks to OwnsObjects
  CheckList.Free;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
  CheckBox: TCheckBox;
begin
  ...
  CheckList.Clear;                      // this will free all check boxes    
  for I := 0 to RecordCount - 1 do      // iterate over your recordset
  begin
    CheckBox := TCheckBox.Create(nil);  // be sure to use nil as an owner
    CheckBox.Parent := Self;            // where will be laying (Self = Form)
    CheckBox.Caption := IntToStr(I);    // caption by the iterator value
    CheckBox.Top := 8;                  // fixed top position
    CheckBox.Left := (I * 38) + 8;      // iterator value * 38 shifted by 8
    CheckBox.Width := 30;               // fixed width
    CheckList.Add(CheckBox);            // add the check box to the list
  end;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  // this will check the first check box from the list (be careful to indexes)
  TCheckBox(CheckList.Items[0]).Checked := True;
  // this will delete 3rd check box from the list (using Clear will delete all)
  CheckList.Delete(2);
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T06:39:29.677

尽管最好在`for`此处使用循环，但您的伪代码几乎可以直接翻译成 Delphi 代码：

```
for I := 0 to qry.RecordCount-1 do
  begin
  CheckBox := TCheckBox.Create (Self);            // the form owns the checkbox
  CheckBox.Parent := Self;                        // checkbox is displayed on the form
  CheckBox.Caption := IntToStr (I);
  CheckBox.Top := Top;
  CheckBox.Left := 81 + I*38;
  end; 
```

顺便说一句，由于 VCL 中内置的所有权机制，您不必释放创建的复选框。

# php - 未销毁/未设置的会话会发生什么？

> ID：12085913
> 
> 赞同：0
> 
> 时间：2012-08-23T06:28:22.717
> 
> 标签：php

这可能看起来微不足道。

从未销毁/取消设置/write_close-d 的会话会发生什么？可以说我已将会话设置为永不超时。如果用户在登录页面上发现自己并使用不同的凭据登录，会话会发生什么情况。同样仅出于测试目的，如果设置了会话，则登录页面没有重定向。

它会被覆盖和销毁还是永远不会被销毁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:30:15.113

会话将在超时后被隐式销毁。超时秒数可以在 php.ini 中指定。默认值为 1440 秒或 24 分钟。

您必须为[session.gc-maxlifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)设置一些任意大的值，以使其看起来永远不会超时。

如果您让其他人完成登录过程，它必须覆盖现有会话。但这一切最终取决于您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:30:30.437

如果他在已启动的会话中使用不同的凭据登录，该会话将被简单地覆盖...... -file 或 DB...（取决于 php 设置）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:33:40.933

如果您的登录设置了所有会话变量，则会话将被新值有效地破坏。

*如果会话中存在未被*登录名覆盖的变量，那么它将持续存在。会话被覆盖而不是被销毁并再次设置。

# xcode - 你可以通过 Interface Builder 设置 UIEdgeInsets 吗？

> ID：12085915
> 
> 赞同：9
> 
> 时间：2012-08-23T06:28:27.427
> 
> 标签：xcode, cocoa-touch, interface-builder

我想制作一个圆角不倾斜的可拉伸按钮。目前我正在以编程方式这样做：

```
[self.myButton setImage:[[UIImage imageNamed:@"my-button"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 4, 0, 4)] forState:UIControlStateNormal]; 
```

有什么方法可以在 IB 中做到这一点，并且让我不必为所有按钮创建插座并`viewDidLoad`用上面的调用乱扔我的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:20:10.743

No. There isn't currently a way to achieve that.

You can however subclass UIButton and override `drawRect:`

```
- (void)drawRect:(CGRect)rect
{
    UIImage *textFieldBackground = [[UIImage imageNamed:@"my-button.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 4, 0, 4)];
    [textFieldBackground drawInRect:[self bounds]];
} 
```

# android - 在 Android 中访问其他几个 UI 组件（ExpandableListView - GridView）中的 UI 组件（按钮）

> ID：12085916
> 
> 赞同：0
> 
> 时间：2012-08-23T06:28:29.543
> 
> 标签：android, button, gridview, expandablelistview, layout-inflater

在 xml 中，我有`LinearLayout`. 在里面我正在使用一个`ExpandableListView`. 每个展开项仅包含一个视图，即`GridView`. 一个`GridView cell`包含三个 UI 组件的组合，它们`ImageView`是`TextView`和`Button`。我如何控制这三个 UI 组件如下，

```
public View getView(final int position, View convertView, ViewGroup parent) {

    LayoutInflater layoutInflater = (LayoutInflater) imageAdapterContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    if (convertView == null) {
        convertView = layoutInflater.inflate(R.layout.single_grid_item, null);
        viewHolder = new ViewHolder();
        viewHolder.singleImageView = (ImageView) convertView.findViewById(R.id.singleGridItem_imageView);
        viewHolder.singleTextView = (TextView) convertView.findViewById(R.id.singleGridItem_textView);
        viewHolder.singleDownloadButton = (Button) convertView.findViewById(R.id.singleGridItem_download_button);
    }
}

// ViewHolder is a static nested inner class 
```

一切都很好。这意味着每个单元格都标识为不同的单元格。他们有不同的图像，适当的`TextView`标签，`Button`点击事件也可以正常工作。对于按钮单击，我使用了带有`ProgressDialog`. 那也工作正常。我想要的是`Button`在下载过程中禁用。下载发生在单独的`AsyncTask`班级中。请告诉我如何禁用用户单击下载的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:38:12.187

大多数时候，我必须为自己的问题写下答案。这个也一样。我已经想办法了。我在`getView()`方法中覆盖了按钮单击事件，如下所示。

```
viewHolder.singleDownloadButton.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {

        // Some code goes here...

        new DownloadZipAsyncTask(imageAdapterContext, view).execute(zipFileUrl);

    }
}); 
```

当我单击“下载”按钮时，我正在将按钮**视图**传递给*DownloadZipAsyncTask*类。在该类中，我再次创建 Button 实例并将视图设置为不可见，如下所示`onProgressUpdate()`

```
Button mybutton = (Button) view.findViewById(R.id.singleGridItem_download_button);
mybutton.setVisibility(View.INVISIBLE); 
```

对于按钮，它正在工作。但我不能改变`ImageView`或`TextView`类似的。因为在 click 事件中，我们只传递了 Button 视图而已。因此，我再次遇到了如何更新这样的进度条的问题。同样，`ProgressDialog`不是问题，只是`ProgressBar`UI 组件给出了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:33:13.053

在 on click 方法中将按钮的可点击属性设置为 false 并在执行后启用它——（查看 v）然后设置 v 的属性

# vba - 调试 VBA 时将剪贴板放入 Watch 窗口

> ID：12085918
> 
> 赞同：2
> 
> 时间：2012-08-23T06:28:35.770
> 
> 标签：vba, ms-word, clipboard

我在 word 文档上运行宏。

在做 a`Selection.Copy`并运行后，在调试时，我希望能够查看实际复制的内容，以及是否被错误替换。

有没有办法“观看”Windows 的剪贴板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:12:21.943

我找到了一个方法。在我的代码开头：

```
Dim obj As New DataObject
obj.GetFromClipboard 
```

我需要参考 Microsoft Forms 2.0 Object Library 才能拥有“DataObject”。起初我在列表中找不到它 - 不得不浏览 FM20.dll。

第二行可以根据需要在即时窗口中键入，而不是在代码中编写。我发现这样更容易。

然后，在监视窗口中，我输入`obj.GetText`了监视表达式，瞧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:42:50.343

`clipbrd.exe`是 Windows 剪贴板查看器。

# jquery - jQuery .load cached page

> ID：12085920
> 
> 赞同：0
> 
> 时间：2012-08-23T06:28:56.517
> 
> 标签：jquery

I have the below code which loads the #special from my root page. This all works fine however I am concerned that I am having to load all the css/js/images etc again each time someone loads this page.

```
<div id="test-one"></div>
<script>
  $("#test-one").load("/ #special");
</script> 
```

Is there a way to cache this? I see that [jQuery.ajax](http://api.jquery.com/jQuery.ajax/) refers to cache but it doesn't look as though you can load a specific selector with jQuery.ajax?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:37:18.330

The browser will automatically use the cache for the new web page that the ajax call loads unless the server behind that web page prevents caching. You don't need to do anything special in your ajax call for browser caching to be used automatically.

Keep in mind that when you load a document fragment like you are doing, jQuery will fetch the whole document, let the browser parse it all into a document fragment and then jQuery will extract the portion you asked for and insert that where you asked.

# java - 如何使用struts 2将url重定向到特定页面

> ID：12085921
> 
> 赞同：0
> 
> 时间：2012-08-23T06:28:58.170
> 
> 标签：java, jsp, redirect, struts2

我有很多目的地（比如 150 多个），每个目的地都有 2 个不同的变体：

*   一个
*   乙

我为这些变体中的每一个生成了一个 html。例如：

*   纽约-A.html
*   纽约-B.html
*   旧金山-A.html
*   旧金山-B.html
*   拉斯维加斯-A.html
*   拉斯维加斯-B.html ...

通用格式为：

*   目的地-A.html
*   目的地-B.html

这些文件中的每一个都被写入`/seo/Destination/`

如何将给定的 URL 映射到 struts 2 中的这些文件：

`www.mysite.com/NewYork-Tourism`=> **www.mysite.com/seo/Destinations/NewYork-A.html**和 `www.mysite.com/NewYork-Travel`=> **www.mysite.com/seo/Destinations/NewYork-B.html**

通用的：

`www.mysite.com/Destination-Tourism`=> **www.mysite.com/seo/Destinations/Destination-A.html**

和

`www.mysite.com/Destination-Travel`=> **www.mysite.com/seo/Destinations/Destination-B.html**

* * *

我能想到的一种方法是生成与 (destination * variant_types) 一样多的操作，然后将每个操作的结果映射到正确的 html 文件。像这样的东西：

```
<action name="NewYork-Tourism">
    <result name="success">/seo//Destination/NewYork-A.html</result>
</action>
<action name="NewYork-Travel">
    <result name="success">/seo//Destination/NewYork-B.html</result>
</action> 
```

.. 等等

有没有其他（更好的）方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:39:26.933

在我看来，一种快速的方法是使用通配符映射，Struts2 有一种方法，即通配符，它​​似乎更适合您。

> 随着应用程序规模的增长，动作映射的数量也会增加。通配符可用于将相似的映射组合成一个更通用的映射。

就像是

```
<action name="List*s" class="actions.List{1}s">
  <result>list{1}s.jsp</result>
</action> 
```

有关详细信息，请参阅文档

*   [通配符映射](http://struts.apache.org/2.2.3/docs/wildcard-mappings.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:47:52.840

它也可以用另一种方式，在你的动作类的方法 public String execute() 上，你将嵌套 if else。例如，第一个 if 语句是针对 New York 并且用户选择了 Tourism ，您将返回一个值“New-York-Tourism”

在我们的 struts.xml 中

```
<action name="Destinations" method="execute" class="Your Class Location">
<result name="New-York-Tourism">/seo//Destination/NewYork-Tourism.html</result>
<result name="New-York-Travel">/seo//Destination/NewYork-Travel.html</result>
. . . . . . 
```

# java - 在使用替代方案的 Linux 系统上，JAVA_HOME 的正确路径是什么？

> ID：12085922
> 
> 赞同：12
> 
> 时间：2012-08-23T06:29:03.433
> 
> 标签：java, java-home

**在Ubuntu**系统上确定正确的路径`JAVA_HOME`有点复杂，因为它使用替代方法。在我的机器上，这就是替代方案在到达实际的 java 或 javac 之前创建至少两个间接级别的方式。

 **```
usr/bin/javac -> /etc/alternatives/

/etc/alternatives/java -> /usr/lib/jvm/jdk1.7/bin/javac 
```

如果我设置`JAVA_HOME`为`/usr/lib/jvm/jdk1.7`，那么我的系统 java 可能会与 指向的 java 不一致`JAVA_HOME`，如果我更新替代项以使用另一个 java。

我的问题是，`JAVA_HOME`在使用替代品的系统上，正确的价值是什么。我倾向于认为`JAVA_HOME`应该设置为`/usr`

这样，**TOMCAT**或任何其他使用它的软件都会将“bin”附加到`JAVA_HOME`并找到它需要的所有可执行文件。

`JAVA_HOME`在使用替代品的系统上，这是正确的值吗？大多数软件是否`JAVA_HOME`仅用于定位可执行文件，还是会使用该值来定位与 JDK 捆绑在一起的其他工件（例如安全策略文件等）？如果前者是真的，那么我觉得我们可以使用`/usr`for `JAVA_HOME`，但如果后者是真的，那么我认为`JAVA_HOME`正确使用的唯一方法是牺牲替代功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T06:38:46.777

好问题——我在 Linux 上使用“替代品”，一切都“正常工作”——我从来没有真正考虑过。

我相信这是答案：

*   `JAVA_HOME=/usr/lib/jvm/default-java`

*   [基于 Linux OpenJDK Debian 的发行版的 JAVA_HOME 环境变量的正确目标是什么？](https://stackoverflow.com/questions/663658/what-is-the-correct-target-for-the-java-home-envrionment-variable-for-a-linux-op)

1）“alternatives”将符号链接设置为您当前配置的“真实”Java

2）您需要做的就是将 $JAVA_HOME 设置为符号链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-08T18:00:19.933

我没有找到适合该问题的直接解决方案，所以这是我的解决方法，将以下内容添加到 bachrc

```
javapath=$( readlink --canonicalize /usr/bin/java)
removebin="/bin/java"
removejre="/jre"
javapath2=${javapath/$removebin/}
export JAVA_HOME=${javapath2/$removejre/} 
```

然后在使用替代方法更改 java 版本时执行源以重新加载 JAVA_HOME

```
source ~/.bashrc 
```

说明：我所做的是从 update-alternatives app 设置的变量中获取 java 类路径，然后从中删除 bin/java 部分，然后将其分配给 JAVA_HOME。此过程发生在登录系统时。如果您在会话中间更改 java 版本，您将不得不重新加载配置文件。**

# visual-c++ - 在 C++ 中使用宏的问题

> ID：12085929
> 
> 赞同：0
> 
> 时间：2012-08-23T06:29:27.157
> 
> 标签：visual-c++

我正在使用 MS-Windows XP SP3 和 Visual C++ 编译器。现在，当我将一个宏定义为-

```
#define APPVERSION(n) ((int32)0 + n) 
```

并将其用作-

```
if(APPVERSION(2)>= APPVERSION(1)) it is giving me an error as 
```

致命错误 C1012：括号不匹配：缺少 ')'

但是当我将该宏用作-

```
#define APPVERSION(n) (0L + n) 
```

它可以正常工作，没有任何错误。

什么是确切的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:13:17.027

**如果您不提供完整**的错误消息，您的问题很难回答，但我猜它在错误消息的*第一*行中包含类似这样的内容：

```
错误 C2065：“int32”：未声明的标识符

```

您必须确保类型别名`int32`存在，方法是在定义它的地方包含正确的标头，或者自己定义它。通过“定义”，我的意思是应该有一个预处理器`#define`指令或一个`typedef`.

# css - 文本装饰在 Opera 中不起作用

> ID：12085932
> 
> 赞同：2
> 
> 时间：2012-08-23T06:29:41.727
> 
> 标签：css, opera

给定以下代码：

HTML：

```
<input id="myButton" type="button" value="Click me" /> 
```

CSS：

```
#myButton{
    text-decoration: underline;
    padding: 10px;
} 
```

您可以将其视为[jsfiddle](http://jsfiddle.net/5ffWq/)上的实时示例。

我想实现按钮内的文本带有下划线。它在 IE9、Chrome 21、Firefox 14 和 Safari 5.1.5 中运行良好，但在当前的 Opera 12 中无法运行。

我尝试了[这个问题](https://stackoverflow.com/questions/8809790/css-text-decoration-underline-not-working-when-applied-to-the-text-of-an-input-b)的建议，但 Opera 的按钮内仍然没有带下划线的文本。如何在该浏览器中实现这一点？

**编辑：**

我想使用纯 CSS 解决方案。我有很多表单，其中一些是由 Javascript 生成的，因此为了解决 Opera 上的这个问题而更改所有这些的 HTML/Javascript 将花费太多精力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:44:55.043

你可以试试这个：

```
<button id="test"><span>Test</span></button> 
```

使用以下 CSS 样式：

```
#test{ padding: 10px; }
#test span{ text-decoration: underline; } 
```

在最新的 Opera 中为我工作。

问候索伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:06:37.810

您不能将文本装饰和换行应用于 xhtml 严格下的输入 type="button"。它适用于 html 4.01 过渡，但不适用于 xhtml 严格。

# unit-testing - Mage_Core_Model_Config 不在单元测试中获取值

> ID：12085944
> 
> 赞同：1
> 
> 时间：2012-08-23T06:30:27.810
> 
> 标签：unit-testing, magento, config

我在 Magento 上进行单元测试时发现了一个奇怪的问题。

我有一个测试函数，可以测试`core_config_data`表中的值。因此，为了访问该值进行测试，在 setUp() 函数中，我将配置值保存在数据库中：

```
public function setUp()
{
    parent::setUp();
    $systemConfig = new Mage_Core_Model_Config();
    $systemConfig->saveConfig(
        'my/custom/path/config',
        12
    );
} 
```

在我的测试方法中，我从数据库中获取了该值，如下所示：

```
$productsNo = Mage::getStoreConfig(my/custom/path/config); 
```

但它的值为空，而不是预期的字符串。

这很奇怪，因为如果我在运行测试后刷新数据库，它在数据库中存在的值。如果我再次运行测试，测试将起作用并且它的值不再为空。

我究竟做错了什么？我没有正确保存值，或者我没有以一种好的方式获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:04:14.123

您仅将配置值保存到数据库，但不刷新配置缓存，由`Mage::getStoreConfig()`.

要同时实现保存和刷新，您可以使用：

```
Mage::app()->getConfig()
    ->saveConfig('my/custom/path/config', 12)
    ->reinit(); 
```

这样配置值将在当前和后续请求中可用。

如果您真的不需要持久性，也就是说，如果您只需要*当前*请求的此配置值，那么我宁愿推荐使用：

```
Mage:app()->getStore()
    ->setConfig('my/custom/path/config', 12); 
```

# android - 使用调用 startActivity() 重新启动应用程序但获得“使用完整操作”

> ID：12085951
> 
> 赞同：0
> 
> 时间：2012-08-23T06:30:49.690
> 
> 标签：android, android-activity, android-alertdialog

我希望我的应用程序在警报对话框中按“确定”时重新启动。但是当我按下按钮时，我得到“使用完成操作”屏幕，我如何启动我的应用程序而不必去“完成操作..”？

这是重新启动应用程序的正确方法吗？

PS我需要重新启动应用程序，因为最初当应用程序启动时列表是从本地数据库显示的，然后在从服务器获取新数据并更新本地数据库后，我无法显示更新的列表。它在重新启动应用程序后工作。

调用startActivity的代码：

```
Toast.makeText(mContext, "Reading complete", Toast.LENGTH_SHORT).show();

        AlertDialog.Builder clickAlert = new AlertDialog.Builder(mContext);
        clickAlert.setMessage("Database has been updated, please restart application to load new data. ");
        clickAlert.setPositiveButton("Restart", new OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                Intent i = new Intent("android.intent.action.MAIN");
                mContext.startActivity(i);

            }
        });
        clickAlert.create().show(); 
```

我有一个从字符串适配器填充的 listFragment，这个字符串是从从服务器返回数据的方法填充的。我需要重新填充此列表。代码：

```
// Get a cursor containing storelist

        Cursor curStoreList = mDbHelper.getStoreList();
        String[] StoreList = new String[curStoreList.getCount()];
        int i = 0;

        // Store returned items in StoreList[]
        while (curStoreList.moveToNext()) {
            String storeName = curStoreList.getString(0);
            StoreList[i] = storeName;
            i++;
        }

        // Create an adapter with list of stores and populate the list with
        // values
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, StoreList);
        setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:36:56.637

```
 Intent i = new Intent("android.intent.action.MAIN");
            mContext.startActivity(i); 
```

改变意图

```
 Intent mainIntent = new Intent(your currentactivity.this, theclassyouwanttogo.class); 
```

像这样设置类而不是使用显式意图的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:36:07.270

为什么要经历重新启动应用程序的所有麻烦。如果您使用 notifyDataChanged 您可以更新您的列表（如果您正在谈论列表视图）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:36:14.533

比懒惰的忍者是对的。尝试以下操作：

```
//1\. Add a new Runnable
private Runnable updateAdapter = new Runnable() {
  public void run() {
      adapter.notifyDataSetChanged();         
}
}; 
//2\. Change your onClick to this:

@Override             
public void onClick(DialogInterface dialog, int which) {      
   runOnUiThread(updateAdapter);             
}
//3\. Dont forget to set the adapter into your listcomponent:

setAdapter(adapter); 
setNotifyOnChange(true); 
```

# qt - 带有 OpenGL 扩展和 OpenCL 的 Qt

> ID：12085953
> 
> 赞同：2
> 
> 时间：2012-08-23T06:30:57.823
> 
> 标签：qt, opengl, opencl

使用 Qt 作为我的 GUI 库。

现在我需要将 OpenGL 与扩展一起使用，也许与 OpenCL 一起使用。首先，我需要加载 OpenGL 扩展。

在 glextensions.cpp/glextensions.h (c:\QtSDK\Demos\4.7\boxes) 中它是这样完成的：

```
#define RESOLVE_GL_FUNC(f) ok &= bool((f = (_gl##f) context->getProcAddress(QLatin1String("gl" #f))));  

RESOLVE_GL_FUNC(GenFramebuffersEXT); 
```

你能解释一下它是如何工作的吗？

我还需要创建特殊类型的上下文以将 OpenGL 与 OpenCL 结合使用。

我可以用 QGLContext 做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T16:36:51.797

Qt 中的 QGLWidget 类包含了您可能需要的所有 OpenGL 扩展。检查这些包装相关扩展的类：

*   帧缓冲区：[QGLFramebufferObject](http://qt-project.org/doc/qt-4.8/qglframebufferobject.html)
*   像素缓冲区：[QGLPixelBuffer](http://qt-project.org/doc/qt-4.8/qglpixelbuffer.html)
*   GLSL 着色器：[QGLShaderProgram](http://qt-project.org/doc/qt-4.8/qglshaderprogram.html)

从这里的 Qt 的[OpenGL 示例开始](http://qt-project.org/doc/qt-4.8/examples-opengl.html)。

要在这种情况下使用 OpenCL，请查看[Qt 团队的博客文章](http://blog.qt.digia.com/blog/2010/04/07/using-opencl-with-qt/)并按照[此处的这些安装说明](http://doc.qt.digia.com/opencl-snapshot/)进行操作。与 Ubuntu 12.04（64 位）上的 Qt 4.8 完美配合。

# java - Eclipse 代码模板自动生成对字符串设置方法参数的 trim() 调用

> ID：12085961
> 
> 赞同：0
> 
> 时间：2012-08-23T06:31:32.880
> 
> 标签：java, eclipse, templates

有谁知道如何告诉 Eclipse 为在分配参数之前调用 trim() 的字符串生成 setter 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:49:50.443

一个丑陋（！）的方法是在 Workspace -> Preferences -> Java -> Code Style -> Code Templates -> Code -> Setter Body -> Edit 中编写以下内容

```
if (${param} instanceof String)
{
    ${field} = ${param}.trim();
}
else 
{
    ${field} = ${param};
} 
```

# c# - 在另一个查询中使用一个查询值

> ID：12085963
> 
> 赞同：0
> 
> 时间：2012-08-23T06:31:39.413
> 
> 标签：c#, visual-studio-2010, linq

```
// To get current user id
var currentUsrId = Convert.ToInt16(Membership.GetUser().ProviderUserKey); 

var IDquery = My_usr_contacts_requests.Where(i => i.requests_to_usr_id == currentUsrId)
                                      .Select(i => new { i.from_usr_id })
                                      .ToArray();

var mainquery = My_usr_biographic_details
                   .Join(
                       My_usr_profiles_companies, i => i.usr_id, j => j.company_usr_id,
                       (i, j) => new
                                 {
                                     usr_id = j.company_usr_id,
                                 })
                   .Where(i =>IDquery.contains(i.usr_id))
                   .ToArray(); 
```

当我执行时，我在 中获取值数组`IDquery`，并且我想在 mainquery 的 where 条件中使用这些值，如上所示，但是当我这样给出时，它在 mainquery where 条件下显示错误。你能告诉我如何使用从`IDquery`in检索到的值数组`mainquery`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:04:51.740

你写了：

```
var IDquery = dbContext.My_usr_contacts_requests.Where(i => 
    i.Usr_contacts_requests_to_usr_id==currentUsrId).Select(i => new { 
    i.Usr_contacts_requests_from_usr_id }).ToArray(); 
```

最后一个新的是不必要的。它创建一个数组数组。您需要将其更改为：

```
var IDquery = dbContext.My_usr_contacts_requests.Where(i => 
    i.Usr_contacts_requests_to_usr_id==currentUsrId).Select(i => 
    i.Usr_contacts_requests_from_usr_id).ToArray(); 
```

# ios - iOS Mapkit - SetRegion 错误

> ID：12085964
> 
> 赞同：0
> 
> 时间：2012-08-23T06:31:43.847
> 
> 标签：ios, mkmapview, mapkit

你能指出我这段代码有什么问题吗？

```
-(void) showStoreRegion:(NSInteger)idx
{

    //StoreLocation* store = [self.listStore objectAtIndex:idx];

    //self.coordinate = CLLocationCoordinate2DMake(store.latitude,store.longitude);

    self.coordinate = CLLocationCoordinate2DMake(10.7500,106.6667);

    MKCoordinateRegion region;
    MKCoordinateSpan span;
    span.latitudeDelta  = 0.001;
    span.longitudeDelta = 0.001;

    region.span = span;
    region.center = self.coordinate;

    [theMapView setRegion:region animated:TRUE];
    [theMapView regionThatFits:region];

    [self addAnns];

} 
```

运行此代码/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:05:22.677

您尚未正确初始化您的区域。尝试这个

```
MKCoordinateSpan span = MKCoordinateSpanMake(0.001,0.001);
MKCoordinateRegion region = MKCoordinateRegionMake(self.coordinate, span) 
```

# joomla2.5 - 使用 Joomla 开始 Web 服务

> ID：12085967
> 
> 赞同：0
> 
> 时间：2012-08-23T06:31:51.507
> 
> 标签：joomla2.5

我是 joomla 2.5 的新手。我需要设计供机顶盒（机顶盒）或电视应用程序使用的应用程序。Joomla 2.5 是否可以使用以下功能？

1.  通过 POST 方法从 STB 或 TV 传递凭据的用户身份验证。
2.  认证后调用 Webservices，需要返回自定义字符串格式，而不是 JSON 或 XML。
3.  是否可以通过开发的管理员组件加密托管文件？

有任何想法吗？Joomla 2.5 有什么好的初学者书籍吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:40:30.430

1.  是的，如果您之前下载了登录页面并获取了令牌，这是一项动态安全功能
2.  没问题，只要确保你结束你的控制器方法

    出口

所以模板不会被输出。

1.  我不明白你的意思。Joomla 扩展目录不接受加密文件，但您可以在自定义组件中使用它们。

初学者书籍：真的要看你的php和整体开发经验。参考资料和大量指南在 docs.joomla.org（部分开发人员）上，但如果有任何问题，请先在这里查看，Joomla 上有很多答案！

# java - ViewPager Fragments 修改 UI

> ID：12085969
> 
> 赞同：2
> 
> 时间：2012-08-23T06:32:06.853
> 
> 标签：java, android, android-viewpager

嘿，我正在使用带有片段的 ViewPager。

我正在尝试在片段不可见时修改片段的 UI（例如删除图像视图中的图像以释放内存），并在再次可见时重新添加图像。

我无法找到正确的方法，因为我不确定如何从 setUserVisibleHint 访问我的片段视图。

我尝试在 onCreateView 期间将视图放入变量中，但由于某些奇怪的原因，我得到了 nullpointerexceptions。

这样做的正确方法是什么？或者无论如何我可以在碎片不在视野中时销毁它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T07:12:28.797

您可以为 View pager 使用 2 个不同的适配器：

*   **FragmentPagerAdapter**
*   **FragmentStatePagerAdapter**

他们都以类似的方式工作。视图寻呼机仅在内存中保存当前视图和相邻视图。当您在第 5 页时 - 将为 4、5、6 个片段分配内存。当您移至第 6 页时：删除 4 并添加 7。

两个适配器之间的主要区别在于**FragmentPagerAdapter**只破坏片段的视图，并且在您下次返回片段时启动 OnCreateView 方法。 **FragmentStatePagerAdapter**对内存更友好，但性能较差。它破坏了整个片段，当你回到它时 - 视图寻呼机将调用 OnCreate 和 OnCreateView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:48:54.720

您不必自己删除视图，每个片段视图都会在不再可见时的`onDestroyView()`方法中自动销毁`Fragment`（难怪如果您尝试在不可见时访问视图，则会收到 NullPointerException）。然后`onCreateView()`当片段返回并可见时，它会在方法内部再次创建。

您可能需要阅读[Fragment 生命周期](http://developer.android.com/reference/android/app/Fragment.html#Lifecycle) 以获取更多信息

无论如何，如果您仍然想访问片段以对他们的视图做任何您想做的事情，我建议在您的内部实现这种代码（我从[这里](http://tamsler.blogspot.fr/2011/11/android-viewpager-and-fragments-part-ii.html)获取）`FragmentPagerAdapter`：

```
private Map<Integer, Fragment> mPageFragments = new HashMap<Integer, MyFragment>();

@Override
public Fragment getItem(int index) {
    Fragment myFragment = MyFragment.newInstance();
    mPageFragments.put(index, myFragment);
    return myFragment;
}

@Override
public void destroyItem(View container, int position, Object object) {
    super.destroyItem(container, position, object);
    mPageFragments.remove(position);
}

public MyFragment getFragment(int key) {
    return mPageFragments.get(key);
} 
```

然后，`OnPageChangeListener`在您的`ViewPager`（例如）内，您可以使用以下方法取回片段和视图：

```
MyFragment fragment = adapter.getFragment(position);
if (fragment.getView() != null) {
   // ...
} 
```

# java - Android专辑封面路径重新加载

> ID：12085975
> 
> 赞同：0
> 
> 时间：2012-08-23T06:32:19.107
> 
> 标签：java, android

我正在将专辑封面显示到 ImageView 中，它工作正常。如果我从**data/com.android.providers.media/albumthumbs**中删除专辑封面文件。如何通过代码刷新此文件夹。任何人请让我知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:23:39.353

尝试这个

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                           Uri.parse("file://"+ Environment.getExternalStorageDirectory()))); 
```

# javascript - 沿时间线绘制数据

> ID：12085976
> 
> 赞同：0
> 
> 时间：2012-08-23T06:32:20.303
> 
> 标签：javascript

我需要创建如下界面：

![时间线图](../Images/b858a76dc3ce5b53e2d194603947f8b3.png)

每个块代表一个客户的项目，每个位置由项目的开始日期决定，宽度由持续时间决定，以天为单位。该数据以数据属性的形式附加到每个块。

有没有一些图书馆可以让我更容易做到这一点？当它们重叠日期时，我无法让块垂直堆叠。基本上，如果有前一个块占据相同的左侧位置，我需要向下移动一个块，但我没有想出一个合理的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:50:20.080

我相信你想要一个甘特图库。

谷歌很快就提出了这两个：

[http://dhtmlx.com/docs/products/dhtmlxGantt/index.shtml](http://dhtmlx.com/docs/products/dhtmlxGantt/index.shtml)

[http://jsgantt.com/](http://jsgantt.com/)

此外，如果你在谷歌上搜索“javascript 图表库”，你会发现很多其他的，其中一些有某种甘特图支持。

# iphone - 当应用程序在 iPhone 设备上运行时，如何在 firefox 插件中查看 sqlite 数据库文件的结果

> ID：12085981
> 
> 赞同：1
> 
> 时间：2012-08-23T06:32:50.027
> 
> 标签：iphone, objective-c, ios, xcode, sqlite

我在我的应用程序中使用 sqlite 数据库。当我从模拟器运行应用程序时，我可以在我的 .sqlite 文件中看到 firefox sqlite 插件的结果。但是当我在真实设备上运行时，我无法看到结果，所以你能告诉我如何查看结果以及从哪里可以获得该 sqlite 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T19:47:34.413

1)在 Xcode 中编辑*info.plist文件时***启用应用程序支持 iTunes 文件共享**

 *2）**将您的设备连接**到系统然后**打开iTunes**然后单击**设备**（例如iPad）然后单击**应用程序**，您可以看到文件共享从中选择您的**应用程序**，现在您可以看到您的sqlite文件*下载*并*使用firefox打开*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T15:25:04.723

如果您使用的是 Xcode 6.1 版，则设备列表已移出管理器。我可以通过以下方式查看我的应用程序的文件：

1.  单击 Window->Devices 并在左侧选择我连接的设备。
2.  突出显示我想查看的应用程序。
3.  单击列表下方的设置齿轮图标，然后选择下载容器。
4.  系统会询问您要将容器存档保存在哪里。
5.  在 Finder 中，左键单击容器存档并选择查看显示包内容。
6.  导航到要查看的文件/文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:58:21.173

简短的回答是“**你不能**”

当您在模拟器上运行时，可以在库中访问生成的应用程序和文档文件，因此您可以轻松检查 sqlite 文件但是当您在真实设备上运行时，sqlite 文件位于设备内的文档目录中。[苹果](http://en.wikipedia.org/wiki/Apple_Inc.)不允许直接从设备访问目录。*

# html - 在尊重浏览器字体设置的同时格式化 html 和 css

> ID：12085984
> 
> 赞同：0
> 
> 时间：2012-08-23T06:33:07.427
> 
> 标签：html, css, browser

我有 2 个使用通用 CSS 文件（test.css）的 html 文件 test.html 和 test1.html。

```
<html>
<head><link type="text/css" href="test.css" rel="stylesheet" /></head>
   <body>
  <p>Ta da Ta da</p>
  <a href="test1.html">test1</a>
   <body>
 </html> 
```

**测试.html**

```
<html>
  <head><link type="text/css" href="test.css" rel="stylesheet" /></head>
     <body>
     <p>Blah Blah</p>
     <a href="test.html">test</a>
     <body>   
</html> 
```

**test1.html**

1.  我在 Firefox 中打开 test.html。我使用 ctrl++ 来放大和放大字体。
2.  然后我单击 test1 链接并导航到 test1.html。该页面以浏览器中的默认字体大小打开。它不记得我在浏览器中设置的最后一页字体缩放比例。我不知道如何在 CSS 中做到这一点。我看到每个其他站点都有这个设施。我缺少一些基本的东西。有人可以建议我应该填写我的 CSS 以获得跨页面传播的浏览器缩放比例吗？

/苏雷什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:59:34.060

这是浏览器 ctr++ 的缩放功能，您不能在项目中使用它。

如果要增加正文字体的大小，请使用

```
 body 
{
  font-size: 100%; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:09:17.810

**总结：**别担心！如果您将这两个文件部署到*同一个站点*，所有浏览器都会在导航时记住缩放级别。

* * *

**长版：**
我冒昧地猜测这是特定于浏览器的，并且超出了您的控制范围。但是，如果您要将这两个文件部署到一个站点，则可能不是问题（见下文）。

如果我在我的 PC 上运行一些测试，我会注意到：

*   **IE9**将在单个浏览器选项卡中保持 UA 缩放级别不变，无论您在何处以何种方式浏览
*   **FF 13**和**Chrome 21**仅在您在同一个网站（例如 Stack Overflow）上导航时保持 UA 缩放级别不变，**但当**您导航到新站点时它们将重置为 100% 缩放（“您的两个 html 文件pc”问题中的示例行为相同）

我认为您将无法使用 CSS 来控制它。但你可能不需要。如果您要将 html 文件部署到单个网站（因此不仅仅是 PC 上的松散文件），这也不成问题，因为导航时缩放级别不会重置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:53:14.183

提供字体大小功能的站点不使用浏览器上的缩放功能——您的代码无法控制它。

相反，他们使用基线字体大小，并以此为基础，通过指定相对大小而不是绝对大小。例如，你可以写

```
p {
   font-size: 120%;
} 
```

# iphone - 立即检测 iOS 方向变化

> ID：12085990
> 
> 赞同：54
> 
> 时间：2012-08-23T06:33:31.633
> 
> 标签：iphone, objective-c, ios, orientation, gyroscope

我有一个游戏，其中设备的方向会影响游戏的状态。用户必须在横向、纵向和反向横向方向之间快速切换。到目前为止，我一直在通过以下方式注册游戏以获取方向通知：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

但它太慢了——在转动手机和实际触发通知之间似乎有大约一秒钟的延迟。我需要一种方法来立即检测设备方向的变化。我尝试过使用陀螺仪进行试验，但对它还不够熟悉，无法知道它是否是我正在寻找的解决方案。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-08-23T07:09:31.070

`viewWillAppear`在函数中添加通知器

```
-(void)viewWillAppear:(BOOL)animated{
  [super viewWillAppear:animated];
  [[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(orientationChanged:)    name:UIDeviceOrientationDidChangeNotification  object:nil];
} 
```

* * *

方向变化通知此功能

```
- (void)orientationChanged:(NSNotification *)notification{
   [self adjustViewsForOrientation:[[UIApplication sharedApplication] statusBarOrientation]];
} 
```

* * *

依次调用此函数，其中处理moviePlayerController框架的方向

```
- (void) adjustViewsForOrientation:(UIInterfaceOrientation) orientation {

    switch (orientation)
    {
        case UIInterfaceOrientationPortrait:
        case UIInterfaceOrientationPortraitUpsideDown:
        { 
        //load the portrait view    
        }

            break;
        case UIInterfaceOrientationLandscapeLeft:
        case UIInterfaceOrientationLandscapeRight:
        {
        //load the landscape view 
        }
            break;
        case UIInterfaceOrientationUnknown:break;
    }
} 
```

* * *

在`viewDidDisappear`删除通知

```
-(void)viewDidDisappear:(BOOL)animated{
   [super viewDidDisappear:animated];
   [[NSNotificationCenter defaultCenter]removeObserver:self name:UIDeviceOrientationDidChangeNotification object:nil];
} 
```

* * *

我想这是*你可以根据方向改变视图的最快速度*

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-23T07:06:47.247

您所说的*延迟*实际上是防止错误（不需要的）方向更改通知的过滤器。

为了**即时**识别设备方向变化，您只需要自己监控加速度计。

加速度计测量所有 3 个轴的加速度（包括重力），因此您在确定实际方向时应该没有任何问题。

可以在此处找到一些开始使用加速度计的代码：

[如何制作 iPhone 应用程序 - 第 5 部分：加速度计](http://mobileorchard.com/how-to-make-an-iphone-app-part-5-the-accelerometer/)

这个不错的博客涵盖了数学部分：

[使用加速度计](https://www.safaribooksonline.com/library/view/basic-sensors-in/9781449309480/ch04.html)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-08-23T06:53:20.707

为什么你不使用

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

?

或者你可以使用这个

```
-(void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
```

或这个

```
-(void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation 
```

希望猫头鹰有用）

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-12-23T08:26:52.450

对于我的案件处理`UIDeviceOrientationDidChangeNotification`不是很好的解决方案，因为它被称为更频繁并且`UIDeviceOrientation`并不总是等于`UIInterfaceOrientation`因为（FaceDown，FaceUp）。

我处理它使用`UIApplicationDidChangeStatusBarOrientationNotification`：

```
//To add the notification
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didChangeOrientation:)

//to remove the
[[NSNotificationCenter defaultCenter]removeObserver:self name:UIDeviceOrientationDidChangeNotification object:nil];

 ...

- (void)didChangeOrientation:(NSNotification *)notification
{
    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;

    if (UIInterfaceOrientationIsLandscape(orientation)) {
        NSLog(@"Landscape");
    }
    else {
        NSLog(@"Portrait");
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-25T19:36:56.033

尝试在以下方面进行更改：

`- (void) viewWillLayoutSubviews {}`

随着子视图再次布局，代码将在每次方向更改时运行。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-02-10T09:57:06.553

@vimal 答案没有为我提供解决方案。似乎方向不是当前方向，而是来自先前的方向。为了修复它，我使用`[[UIDevice currentDevice] orientation]`

```
- (void)orientationChanged:(NSNotification *)notification{
    [self adjustViewsForOrientation:[[UIDevice currentDevice] orientation]];
} 
```

然后

```
- (void) adjustViewsForOrientation:(UIDeviceOrientation) orientation { ... } 
```

使用此代码，我得到当前的方向位置。

# php - 将变量放入已包含在数组中的图像 url

> ID：12085993
> 
> 赞同：0
> 
> 时间：2012-08-23T06:33:57.823
> 
> 标签：php, wordpress

我有代码

```
array( "name" => "Services Widget Description",
       "desc" => "Max 500 character(Use new line for new Point)",
       "std"=>"<ul>
                  <li>
             Rebum corrumliit neglegentur sit at,
           <img class='line22' width='243' height='2' alt='text line' src='images/text-line.jpg'>
        </li>
               </ul>"
), 
```

URL是一个包含的变量`http://localhost/Junk`，我想在src中使用这个变量，我试过这样

```
array( "name" => "Services Widget Description",
       "desc" => "Max 500 character(Use new line for new Point)",
       "std"=>"<ul>
                  <li>
             Rebum corrumliit neglegentur sit at,
           <img class='line22' width='243' height='2' alt='text line' src=URL.'images/text-line.jpg'>
        </li>
               </ul>"
), 
```

但是没用，请指导如何使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:36:19.173

`URL`是一个`CONSTANT`非变量。

`URL`在代码中集成`".URL."`

```
array( "name" => "Services Widget Description",
       "desc" => "Max 500 character(Use new line for new Point)",
       "std"=>"<ul>
                  <li>
                      Rebum corrumliit neglegentur sit at,
                      <img class='line22' width='243' height='2' alt='text line' src='".URL."images/text-line.jpg'>
                  </li>
               </ul>"
), 
```