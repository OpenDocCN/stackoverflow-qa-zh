# StackOverflow 问答 11147000-11147999

# awk - 用于在 awk 中计算唯一 ID 的正则表达式

> ID：11147007
> 
> 赞同：0
> 
> 时间：2012-06-21T21:25:54.647
> 
> 标签：awk

我的要求是获取唯一项目的数量。我有一个像下面的文件

输入文件

```
ID1=7
ID1=5 
ID1=5 
ID1=6
ID1=6 
```

基本上我将使用 reg ex 来搜索单词 ID，我会给出“ID = *”......

我的输出应该是

```
Count of unique  ID1=2 
```

你能帮帮我吗...谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:43:29.087

尝试这个：

```
awk -F= '{if (!($1 SUBSEP $2 in a)) {ids[$1]++; a[$1, $2]}} END {for (id in ids) {print "Count of unique", id, " " ids[id]}}' 
```

使用此输入：

```
ID1=7
ID1=5
ID1=5
ID1=6
ID1=6
ID2=4
ID2=3
ID1=5
ID3=4
ID2=3 
```

这是输出：

```
Count of unique ID1  3
Count of unique ID2  2
Count of unique ID3  1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:46:01.253

```
 { ++counts[$0];  }

END { 
    for (i in counts)
        printf("Count of unique %s = %d\n", i, counts[i]); 
} 
```

# c# - iPhone 类型 WPF 的背景控制

> ID：11147016
> 
> 赞同：0
> 
> 时间：2012-06-21T21:26:53.410
> 
> 标签：c#, iphone, .net, wpf

我想创建一个有点像 iPhone 模拟器的应用程序（我所说的模拟器是指用户控件，它看起来像 iPhone 的图片，但它仍然只是引擎盖下的所有 .NET）。

我只是想用它来演示/原型一些想法，看看它在手机上的外观，并可以向其他人展示它的功能。为什么是 WPF？因为我是一名 .NET 开发人员，我不想花太多时间来学习我可能永远不会使用的东西。

有谁知道这样的控件是否存在？还是预制样式？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:56:37.660

如果您只想要一张 iphone 图片，然后能够在其中放置任意控件，请在您的 XAML 中执行以下操作：

```
<Grid>
    <Grid.Background>
        <ImageBrush ImageSource="iphone.png" />
    </Grid.Background>
    <Frame Name="sourceFrame" Source="springboard.xaml" Margin="left,top,right,bottom" />
</Grid> 
```

iPhone.png 需要是 iphone 的图片。您可以在互联网上找到这些现成的。在图片编辑器中打开图像，找到实际屏幕左侧的距离，并将其放在左侧的边距中。对顶部、右侧和底部执行相同操作。然后只需创建 springboard.xaml，就可以了。

# c# - 任务工厂是顺序的而不是并行的？

> ID：11147017
> 
> 赞同：1
> 
> 时间：2012-06-21T21:26:58.650
> 
> 标签：c#, multithreading, .net-4.0, task, taskfactory

我不是线程专家，但我想一次并行运行一个函数 N 次，如果需要，可以使用多个内核。

我目前有以下代码：

```
tasks = new List<Task>();
for (int i = 0; i < _runThreads; i++)
{
    tasks.Add(Task.Factory.StartNew(() =>
    {
        GetRSS();
    }, stopAllTasks.Token));
} 
```

获取RSS 示例：

```
private void GetRSS()
{
    while (!queue.IsEmpty)
    {
        int total = 0;
        // dequeue, get url bla bla
        using (WebClient client = new WebClient())
        {
            //some code here get html content
        }
        // parse the rss bla bla
        // get the count of total items found 
        // update total variable with the total

        Interlocked.Add(ref counter, total);
    }
} 
```

如您所见，在 GetRSS 代码中，我正在`counter`使用它获得的每页总条目数进行更新，因为我的计时器滴答作响，它将计数器的值更新为标签，以便我可以看到进度。

由此，我注意到这些任务并没有同时工作，但实际上它们是一个一个地工作，因为计数器只更新 X 数量，这相当于运行一个函数。

所以从那里我相信上面的代码实际上并没有并行运行任务，但它们似乎是按顺序运行的。

*   是对的吗 ？

*   如果是这样，我如何转换我的代码以便它实际并行运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:45:48.370

您的代码绝对应该并行运行。[在这里](https://stackoverflow.com/q/7878603/166584)查看类似的问题。

此外，您可能会面临连接限制，这就是为什么您可以认为它是按顺序运行的。您可以使用配置来覆盖它：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.net>
        <connectionManagement>
            <add address="*" maxconnection="<some reasonable number here>" />
        </connectionManagement>
    </system.net>
</configuration> 
```

# ruby-on-rails - 如何在我的网站上提供内容以换取 Facebook 的“赞”

> ID：11147026
> 
> 赞同：0
> 
> 时间：2012-06-21T21:27:32.013
> 
> 标签：ruby-on-rails, facebook

我有一个包含大量购买内容的网站。我也有一些“免费”的采样器内容。

很多人下载了这个示例内容，我现在只想在用户愿意在 facebook 上“喜欢我们”的情况下才允许访问免费内容。

我该如何实施？我是一名 Rails 开发人员，但应用程序是什么可能并不重要。

我怎样才能让用户喜欢我们，然后验证他们喜欢我们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:45:26.877

这个答案可能是您想要开始的地方：[当某人按下我网站上的“喜欢”按钮时，如何确保他们成功“喜欢”了我的网站？](https://stackoverflow.com/questions/4587675/how-can-i-make-sure-that-someone-has-successfully-liked-my-site-when-they-pres)

```
FB.Event.subscribe('edge.create', function(response) {
  // fire an ajax call to store that the user has liked you
}); 
```

因此，您将使用 javascript 处理他们喜欢您的内容，并且您可以将内容解锁给您的新朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:41:53.083

最好的选择是使用来自 facebook 的 Javascript SDK。您可以阅读用户的所有喜欢或要求特定页面：

```
FB.api("/me/likes/" + PAGE_ID, function(response) {
    // Do some staff here with page data
 })

FB.api("/me/likes/", function(response) {
    // Do some staff here with all pages data
 }) 
```

您可以使用[Graph API 资源管理](http://developers.facebook.com/tools/explorer?method=GET&path=me/likes)器进行测试：

# json - 使用 Jerkson 反序列化 Json 时缺少字段的默认值

> ID：11147029
> 
> 赞同：1
> 
> 时间：2012-06-21T21:27:51.553
> 
> 标签：json, scala, jackson

按照文档中的示例使用 Jerkson 库解析 Json 时：

```
case class Person(id: Long, name: String)
parse[Person]("""{"id":1,"name":"Coda"}""") //=> Person(1,"Coda") 
```

如果我尝试反序列化不包含 id 和 name 字段的 Json，则会引发错误，说明需要它们。有没有一种方法可以设置它，以便在解析 Person 的以下 Json 时：

```
{"id":2} 
```

名称字段可以默认为“John”。（我认为这可能通过在案例类的参数中设置默认值来实现，但没有运气）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:39:45.690

查看我为 Jerkson 库所做的[拉取请求。](https://github.com/codahale/jerkson/pull/42)它增加了对案例类默认参数的支持。

不过，请注意用户 ksvladimir 的评论，我没有时间将其添加到拉取请求中。（当我这样做时，我会更新这个答案）

# sql - 如何使用字符串格式的 where 子句将日期格式 103 分组（varchar（103），...，10）

> ID：11147030
> 
> 赞同：1
> 
> 时间：2012-06-21T21:27:53.473
> 
> 标签：sql, sql-server, datetime, varchar

我在使用日期时间字段进行查询时遇到问题。

这是因为我将 datetime 字段转换为 -varchar(10),..,103- 所以我可以在 103 格式上应用带有日期字段的 where 子句而不是 datetime 但是当我使用 where 子句时它不显示结果或分组我需要的方式，因为日期时间字段已转换为字符串。

以下是该示例的简化查询：

```
select ddate,SUM(ntotal) as Income from Inc_orders    
where nbranch=2 
and convert(varchar(10),ddate,103)                                   
between '01/06/2010' and '31/06/2010'   
group by convert(varchar(10),ddate,103)  
order by ddfecha desc 
```

ddate 是日期时间字段
ntotal 是整数
nbranch 是外键

**然后发生的是我从另一个 103 日期范围获得结果**

```
01/10/2009  4447.0000    
02/01/2010  26267.8000    
02/02/2010  20498.0000    
02/04/2010  22565.1000   
02/05/2010  20539.0000    
02/11/2010  33934.3000     
02/12/2009  33587.4000 
```

**我假装的样子是：**

```
01/06/2010  29327.7000       
02/06/2010  31170.4000     
03/06/2010  37737.7000     
04/06/2010  25109.6000     
06/06/2010  20819.7000     
10/06/2010  44703.9000     
14/06/2010  21755.1000     
15/06/2010  39369.3000    
05/06/2010  29552.2000    
07/06/2010  35305.9000    
08/06/2010  30628.6000    
..........     
31/06/2010  18677.6000 
```

解决方案不使用 datepart、month 或 year 函数，因为我需要该参数看起来像日历才能在其上应用 datetimepicker calentad 组合对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:14:06.413

不要使用`CONVERT(VARCHAR, DateField, 103)`从中删除时间`DATETIME`效率低下并且在排序时也会导致问题。

根据您使用的 SQL-Server 版本，有 2 个选项通常被认为是最好的。对于 SQL-Server 2008 及更高版本，请使用`CAST(DateField AS DATE)`，对于以前的版本，请使用`DATEADD(DAY, 0, DATEDIFF(DAY, 0, DateField))`

因为您在这一行中将 Ddate 转换为 VARCHAR：

```
convert(varchar(10),ddate,103) between '01/06/2010' and '31/06/2010' 
```

您正在删除 '01/06/2010' 和 '31/06/2010' 到日期的隐式转换。这意味着 '02/01/2000' 大于 '01/01/2012' 因为您比较的是字符串而不是日期。如果您从 Ddate 中删除时间并将表达式保持为日期（时间）格式，则“01/06/2010”和“31/06/2010”将隐式转换为日期。

为了简单地说明这一点，您可以运行这个简单的查询：

```
SELECT  CASE WHEN '02/06/2000' BETWEEN '01/06/2012' AND '03/06/2012' THEN 1 ELSE 0 END [String Comparison],
        CASE WHEN CONVERT(DATETIME, '02/06/2000') BETWEEN '01/06/2012' AND '03/06/2012' THEN 1 ELSE 0 END [Date Comparison] 
```

所以你的查询最终会是这样的：

```
SET DATEFORMAT DMY

SELECT  CAST(DDate AS DATE) Ddate,
        SUM(ntotal) as Income 
FROM    Inc_orders    
WHERE   nbranch=2 
AND     CAST(DDate AS DATE) BETWEEN '01/06/2010' AND '31/06/2010'   
GROUP BY CAST(DDate AS DATE)
ORDER BY DDate 
```

或者

```
SELECT  DATEADD(DAY, 0, DATEDIFF(DAY, 0, DDate)) Ddate,
        SUM(ntotal) as Income 
FROM    Inc_orders    
WHERE   nbranch=2 
AND     DATEADD(DAY, 0, DATEDIFF(DAY, 0, DDate)) BETWEEN '01/06/2010' AND '31/06/2010'   
GROUP BY DATEADD(DAY, 0, DATEDIFF(DAY, 0, DDate))
ORDER BY DDate 
```

**附录**

我不确定是否`Ddate`包含时间，因此使用上述内容删除时间可能不相关，但 where 子句中比较字符串的部分仍然相关。此外，很少有需要以字符串格式向应用程序显示日期的情况。最好将日期保留为日期并在您的应用程序层中对其进行格式化（无论这可能是什么）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:31:22.030

不要在 GROUP BY 和 WHERE 中使用 CONVERT。在 SELECT 字段列表上使用转换

**更新：**请参阅Microsoft的[DATE CONSTANTS](http://msdn.microsoft.com/en-us/library/ms180878%28v=sql.105%29.aspx#StringLiteralDateandTimeFormats)
的 有效和推荐格式。请选择带有“DATEFORMATdependent: NO”和“Multilanguage: YES”的任何格式，以免在任何语言/设置中出现任何问题

**更新：**
当我看到时，我正在编写相同的查询@Blorgbeard：它不起作用，因为您不能仅按 nbranch 分组并且在选择列表中有 ddate，分组时的 nbranch 也没有意义，因为只有有效值是 2。你需要重新定义您的查询/需求

我想，您的查询可能是：

```
select ddate,SUM(ntotal) as Income from Inc_orders    
where nbranch=2 
and ddate  between '20100601' and '20100631'   
group by ddate   
order by ddate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:32:51.760

不要将日期转换为字符串，只需将其保留为日期：

```
select ddate,SUM(ntotal) as Income from Inc_orders    
where nbranch=2 
and ddate between '2010-06-01' and '2010-06-31'
group by nbranch   
order by ddate 
```

`ddate`如果您希望它以特定方式显示，您可以在选择列表中进行转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T03:07:12.657

您可以通过以下方式转换文档日期：

```
ISNULL(CONVERT(varchar(12),tranInwardHeader.DocumentDate,103),'') AS DocumentDate 
```

# xml - 不要进入 xpath 中的元素树

> ID：11147033
> 
> 赞同：0
> 
> 时间：2012-06-21T21:28:07.583
> 
> 标签：xml, xpath, nokogiri

我有一些看起来像的 XML

```
<page id="1">
  <subpages>
   <page id="2">
    <subpages>
      <page id="3">
    </subpages>
   </page>
   <page id="4"></page>
   <page id="5"></page>
  </subpages>
</page> 
```

我要做的是拉出`<page>`顶部`<subpages>`标签中的顶层，这意味着我正在尝试拉出第 2、4 和 5 页，而不是第 3 页。

现在我正在做`//subpages[1]/page`，但这会获取第一个子页面标签内的所有页面。有没有办法做到这一点？

我可以在jQuery中做到这一点

```
var c = $(data).find("subpages").first();
$(c).children("page").each(function() {}); 
```

如果我不能让正确的 xpath 工作，有没有办法让 Nokogiri 表现得像 jQuery 一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:12:22.720

最简单的方法是：

```
/*/*/page 
```

更明确地说：

```
/page/subpages/page 
```

此外，你可以这样做（但我尽量避免`//`）：

```
(//subpages)[1]/page 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:27:30.203

相当于您的 jQuery 将是：

```
doc.at('subpages').xpath('page').each do |page|
    puts page.attr('id')
end 
```

结果：

```
2
4
5 
```

# mongodb - 如何查询具有包含在给定数组中的数组属性的文档

> ID：11147036
> 
> 赞同：0
> 
> 时间：2012-06-21T21:28:26.590
> 
> 标签：mongodb

我想在 mongodb 中查询包含数组的文档，这样它的所有元素都是给定用户提供的数组的成员。换句话说，我需要选择其数组是给定数组子集的文档。例如，如果我有这个集合：

```
> db.foos.find()
{ "_id" : ObjectId("4fe3901d0add2727c3adc7ca"), "tags" : [ "a", "b", "c" ] }
{ "_id" : ObjectId("4fe390220add2727c3adc7cb"), "tags" : [ "a", "b" ] }
{ "_id" : ObjectId("4fe390250add2727c3adc7cc"), "tags" : [ "a" ] }
{ "_id" : ObjectId("4fe390250add2727c3adc7cd"), "tags" : [ "c" ] } 
```

我的代码被赋予了数组`["a", "b", "z"]`，我想要一个产生以下结果的查询：

```
> db.foos.find( THE_QUERY! )
{ "_id" : ObjectId("4fe390220add2727c3adc7cb"), "tags" : [ "a", "b" ] }
{ "_id" : ObjectId("4fe390250add2727c3adc7cc"), "tags" : [ "a" ] } 
```

之所以选择这些文档，是因为`["a", "b"]`和`["a"]`都是`["a", "b", "z"]`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:45:06.037

*这个答案不能解决 OPs 问题。根据评论，MongoDB 中目前不存在所需的功能。我将其留作评论历史*

您想使用[$in 高级查询](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in)：

> $in 运算符类似于 SQL IN 修饰符，允许您指定可能匹配的数组。

这会说：“在这个给定数组中有标签值的任何 foos 文档”

```
db.foos.find({tags: {$in: ["a", "b", "z"]}}) 
```

如果您想查找任何特定将所有元素与给定数组相交的文档，您可以使用[$all](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24all)：

> $all 运算符类似于 $in，但不是匹配指定数组中的任何值，而是必须匹配数组中的所有值。

这会说：“任何具有包含所有这些元素的标签数组的 foos 文档”

```
db.foos.find({tags: {$all: ["a", "b", "z"]}}) 
```

# java - 使用 p:calendar 在 jsf h:datatable 中进行跨字段验证

> ID：11147037
> 
> 赞同：11
> 
> 时间：2012-06-21T21:28:34.130
> 
> 标签：java, jsf, jsf-2, primefaces

我注意到有人问了这个问题，但没有正确回答。

我有一个数据表，它有两列**start date**和**end date**。两者都包含 primefaces p:calendar 控件。我需要确保对于每一行，column1 中的日期不在 column2 中的日期之后。我想将此绑定到 JSF 验证框架中，但我遇到了麻烦。

我已经尝试标记数据表 rowStatePreserved="true" ，这允许我获取值，但是当它失败时仍然有问题，第一行中的所有值都会覆盖所有其他值。我做错了什么，还是应该使用完全不同的策略？

xhtml代码

```
 <h:form>
 <f:event type="postValidate" listener="#{bean.doCrossFieldValidation}"/>
       <p:dataTable id="eventDaysTable" value="#{course.courseSchedules}" var="_eventDay" styleClass="compactDataTable"
                                 >
                        <p:column id="eventDayStartColumn">
                            <f:facet name="header">
                                Start
                            </f:facet>
                            <p:calendar id="startDate" required="true"  value="#{_eventDay.startTime}" pattern="MM/dd/yyyy hh:mm a"/>
                        </p:column>
                        <p:column id="eventDayEndColumn">
                            <f:facet name="header">
                                End
                            </f:facet>
                            <p:calendar id="endDate" required="true"  value="#{_eventDay.endTime}" pattern="MM/dd/yyyy hh:mm a"/>
                        </p:column>                                        
                    </p:dataTable>
        </h:form> 
```

验证码

```
 public void doCrossFieldValidation(ComponentSystemEvent cse) {

        UIData eventsDaysStable = (UIData) cse.getComponent().findComponent("eventDaysTable");

        if (null != eventsDaysStable && eventsDaysStable.isRendered()) {

            Iterator<UIComponent> startDateCalendarIterator = eventsDaysStable.findComponent("eventDayStartColumn").getChildren().iterator();
            Iterator<UIComponent> endDateCalendarIterator = eventsDaysStable.findComponent("eventDayEndColumn").getChildren().iterator();

            while (startDateCalendarIterator.hasNext() && endDateCalendarIterator.hasNext()) {
                org.primefaces.component.calendar.Calendar startDateComponent = (org.primefaces.component.calendar.Calendar) startDateCalendarIterator.next();
                org.primefaces.component.calendar.Calendar endDateComponent = (org.primefaces.component.calendar.Calendar) endDateCalendarIterator.next();

                Date startDate = (Date) startDateComponent.getValue();
                Date endDate = (Date) endDateComponent.getValue();

                if (null != startDate && null != endDate && startDate.after(endDate)) {
                    eventScheduleChronologyOk = false;
                    startDateComponent.setValid(false);
                    endDateComponent.setValid(false);
                }

            }

            if (!eventScheduleChronologyOk) {
                showErrorMessage(ProductManagementMessage.PRODUCT_SCHEDULE_OUT_OF_ORDER);
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-25T16:11:13.360

> *我究竟做错了什么*

以非标准的 JSF 方式在数据表的上下文之外执行验证。行数据仅**在**您（或 JSF 正在）迭代数据表时可用。`<p:calendar>`根据当前的数据表迭代轮次，每一列实际上只有一个组件具有多种不同的状态。当您不迭代数据表时，这些状态不可用。那时你只会得到`null`价值。

从技术上讲，到目前为止，使用不同的验证方法，您应该在组件上调用[`visitTree()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#visitTree%28javax.faces.component.visit.VisitContext,%20javax.faces.component.visit.VisitCallback%29)方法并在实现中执行工作。这将遍历数据表。`UIData``VisitCallback`

例如，

```
dataTable.visitTree(VisitContext.createVisitContext(), new VisitCallback() {
    @Override
    public VisitResult visit(VisitContext context, UIComponent component) {
        // Check if component is instance of <p:calendar> and collect its value by its ID.

        return VisitResult.ACCEPT;
    }
}); 
```

这只是笨拙的。这为您提供了每一行，您需要自己维护和检查行索引并收集值。请注意，调用`UIInput#setValid()`也应该在实现内部完成`VisitCallback`。

* * *

> *还是我应该使用完全不同的策略？*

是的，使用正常`Validator`的标准 JSF 方式。您可以将一个组件作为另一个组件的属性传递。

例如

```
<p:column>
    <p:calendar binding="#{startDateComponent}" id="startDate" required="true"  value="#{item.start}" pattern="MM/dd/yyyy hh:mm a"/>
</p:column>
<p:column >
    <p:calendar id="endDate" required="true"  value="#{item.end}" pattern="MM/dd/yyyy hh:mm a">
        <f:validator validatorId="dateRangeValidator" />
        <f:attribute name="startDateComponent" value="#{startDateComponent}" />
    </p:calendar>
</p:column> 
```

和

```
@FacesValidator("dateRangeValidator")
public class DateRangeValidator implements Validator {

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        if (value == null) {
            return; // Let required="true" handle.
        }

        UIInput startDateComponent = (UIInput) component.getAttributes().get("startDateComponent");

        if (!startDateComponent.isValid()) {
            return; // Already invalidated. Don't care about it then.
        }

        Date startDate = (Date) startDateComponent.getValue();

        if (startDate == null) {
            return; // Let required="true" handle.
        }

        Date endDate = (Date) value;

        if (startDate.after(endDate)) {
            startDateComponent.setValid(false);
            throw new ValidatorException(new FacesMessage(
                FacesMessage.SEVERITY_ERROR, "Start date may not be after end date.", null));
        }
    }

} 
```

由于两个组件在同一行中，因此每次调用此验证器`startDateComponent`时都会“自动”返回正确的值。`getValue()`请注意，此验证器也可以在数据表之外重用，而您的初始方法不是。

或者，您可以将[OmniFaces](http://omnifaces.org) `<o:validateOrder>`用作完整的解决方案。它的[展示](http://showcase.omnifaces.org/validators/validateOrder)示例甚至展示`<p:calendar>`了`<p:dataTable>`.

# rest - 我可以使用 ASP Classic 构建 REST 应用程序吗？

> ID：11147040
> 
> 赞同：7
> 
> 时间：2012-06-21T21:28:55.570
> 
> 标签：rest, asp-classic

如果我有 ASP Classic，是否可以构建一个 REST 样式的应用程序编程接口 (API)，它接受输入并以 JSON 格式返回输出，甚至可以进行内容协商并以 JSON 或 XML 或其他格式提供响应？

例如，可以将 ASP-Classic 用作发送 GET 请求并期望 JSON 响应的 jQuery 自动完成小部件的支持吗？

如何？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T21:37:34.640

当然，为什么不呢？

首先，您可以用 Javascript 编写 ASP-classic。而且，这意味着您可以利用许多 Javascript 扩展库。特别是，在构建 REST 应用程序时，您可能希望使用[json2.js](https://github.com/douglascrockford/JSON-js)。

这是一个使用 ASP 经典的 REST 程序，使用参数化查询查询 SQLExpress 数据库，并依靠 json2.js 进行编码，返回一个 JSON 编码的数组。

```
<%@ language="Javascript" %>

<script language="javascript" runat="server" src='json2.js'></script>
<script language="javascript" runat="server">

if (typeof String.prototype.trim != 'function') {
    String.prototype.trim = function() {
        return this.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
    };
}

(function() {

    // http://msdn.microsoft.com/en-us/library/windows/desktop/ms675318(v=vs.85).aspx
    // http://msdn.microsoft.com/en-us/library/windows/desktop/ms678273(v=vs.85).aspx
    // http://msdn.microsoft.com/en-us/library/windows/desktop/ms675946(v=vs.85).aspx
    ado = {
        // data types
        variant          : 12,
        char             : 129,
        varChar          : 200,
        single           : 4,   // DBTYPE_R4
        date             : 133, // DBTYPE_DBDATE
        time             : 134, // DBTYPE_DBTIME

        // parameter directions
        input            : 1,
        output           : 2,
        inputOutput      : 3,
        returnVal        : 4,
        directionUnknown : 0,

        // command types
        cmdUnspecified   : -1,
        cmdText          : 1,
        cmdTable         : 2,
        cmdStoredProc    : 4,
        cmdUnknown       : 8,
        cmdFile          : 256,
        cmdTableDirect   : 512
    };

    queryDb = function(like) {
        var rs, result = [], cmd, query, param,
            conn = new ActiveXObject("ADODB.Connection");

        conn.ConnectionString =
            'Provider=SQLOLEDB.1;' +
            'Integrated Security=SSPI;' +
            'Persist Security Info=False;' +
            'Initial Catalog=AVWKS2008LT;' +
            'Data Source=.\\SQLEXPRESS';

        conn.Open();
        cmd = new ActiveXObject("ADODB.Command");
        cmd.ActiveConnection = conn;
        cmd.CommandType = ado.cmdText;
        query = 'SELECT distinct Lastname as lname ' +
            'FROM SalesLT.Customer ';
        if (like !== null) {
            query += 'WHERE LastName like ? ';
            like += '%';
            param = cmd.CreateParameter("", ado.varChar, ado.input, like.length, like);
            cmd.Parameters.Append(param);
        }
        query += 'ORDER BY lname ';
        cmd.CommandText = query;

        rs = cmd.Execute(); // typeof ADODB.Recordset
        while(!rs.EOF) {
            // retrieve the 0th field
            result.push(rs.Fields(0).Value.trim());
            rs.MoveNext();
        }
        conn.Close();
        return result;
    };

}());

try {
    // jquery UI autocomplete requires the search term to be 'term'
    var t = Request.QueryString('term') + '',
        token = (t == 'undefined') ? null:t,
        r = queryDb(token);
    Response.Write(JSON.stringify(r));
}
catch(e) {
    var error = {error: e.message};
    Response.Write(JSON.stringify(error));
}

</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-15T20:08:28.440

你也可以使用我的 aspJSON 类：[https ://github.com/rcdmk/aspJSON](https://github.com/rcdmk/aspJSON)

```
' instantiate the class
Dim oJSON = New JSON

' add properties
oJSON.Add "prop1", "someString"
oJSON.Add "prop2", 12.3
oJSON.Add "prop3", Array(1, 2, "three")

' get the JSON formatted output
Dim jsonSting
jsonString = oJSON.Serialize() ' this will contain the string representation of the JSON object 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:39:00.070

ASP 只是一个非常轻微的增强脚本引擎。如果你可以编码，它就可以做到。您可以通过`Response.Write`或编写您喜欢的任何内容`Response.BinaryWrite`。所以答案必须是肯定的。

如果你打算做 JSON，你最好在 JScript 服务器端工作。然后，您可以使用标准 JSON stringyfiers 生成 JSON 结果。

# python - 查找列表的模态值的最有效方法是什么？

> ID：11147041
> 
> 赞同：2
> 
> 时间：2012-06-21T21:29:01.537
> 
> 标签：python, algorithm

能够使用双峰列表等。

到目前为止我的尝试：

```
testlist = [1,2,3,3,2,1,4,2,2,3,4,3,3,4,5,3,2,4,55,6,7,4,3,45,543,4,53,4,53,234] 
```

.

```
from collections import Counter

def modal_1(xs):
    cntr = Counter(xs).most_common()
    val,count = cntr[0]
    return (v for v,c in cntr if c is count)

print(list(modal_1(testlist)))
>>> [3, 4] 
```

——或者类似的东西——

```
def modal_2(xs):
       cntr = Counter(xs).most_common()
       val,count = cntr[0]
       return takewhile(lambda x: x[1] is count, cntr)

print(list(modal_2(testlist)))
>>> [(3, 7), (4, 7)] 
```

请不要回答 - 使用 numpy 等。

笔记 ：

`Counter(xs).most_common(1)`

返回 n 个模态值的第一个“模态”。如果有两个。它只会返回第一个。真可惜……因为这会使这一切变得容易得多。

* * *

好的，所以我很惊讶我原来的一个选项实际上是一个很好的方法。对于现在想要在列表中查找 n 模态数字的任何人，我会建议以下选项。这两个函数都适用于超过 1000 个值的列表

所有这些 (number,count) 的返回列表，其中所有元组的 count 都是相同的。我认为最好有这个，然后将其解析为您心中的愿望。

使用takewhile：

```
from collections import Counter
from itertools import takewhile

def modal_3(xs):
    counter = Counter(xs).most_common()
    mx = counter[0][1]
    return takewhile(lambda x: x[1] == mx, counter)

print(list(modal_3(testlist)))
>>> [(3, 7), (4, 7)] 
```

使用 groupby：

```
from collections import Counter
from itertools import groupby
from operator import itemgetter

def modal_4(xs):    
    container = Counter(xs)
    return next(groupby(container.most_common(), key=itemgetter(1)))[1]

print(list(modal_4(testlist)))
>>> [(3, 7), (4, 7)] 
```

以及最终的、pythonic 和最快的方式：

```
def modal_5(xs):

    def _mode(xs):
        for x in xs:
            if x[1] != xs[0][1]:
                break
            yield x

    counter = collections.Counter(xs).most_common()

    return [ x for x in _mode(counter) ] 
```

感谢大家的帮助和信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:34:33.740

我认为你的第二个例子是最好的，有一些小的修改：

```
from itertools import takewhile
from collections import Counter

def modal(xs):
       counter = Counter(xs).most_common()
       _, count = counter[0]
       return takewhile(lambda x: x[1] == count, counter) 
```

这里的改变是使用`==`而不是`is`-`is`检查身份，虽然对于某些值来说是真的，因为 Python`int`在后台用 s 做了一些魔法来缓存它们，但不会一直都是真的，也不应该依赖在这种情况下。

```
>>> a = 1
>>> a is 1
True
>>> a = 300
>>> a is 300
False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T21:36:36.857

```
>>> testlist = [1,2,3,3,2,1,4,2,2,3,4,3,3,4,5,3,2,4,55,6,7,4,3,45,543,4,53,4,53,234]
>>> dic={x:testlist.count(x) for x in set(testlist)}

>>> [x for x in dic if dic[x]==max(dic.values())]

[3, 4] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T22:59:20.467

什么？`takewhile`但是没有`groupby`？

```
>>> from collections import Counter
>>> testlist = [1,2,3,3,2,1,4,2,2,3,4,3,3,4,5,3,2,4,55,6,7,4,3,45,543,4,53,4,53,234]
>>> cntr = Counter(testlist)
>>> from itertools import groupby
>>> list(x[0] for x in next(groupby(cntr.most_common(), key=lambda x:x[1]))[1])
[3, 4] 
```

# python - /dev/urandom 范围

> ID：11147044
> 
> 赞同：1
> 
> 时间：2012-06-21T21:29:24.960
> 
> 标签：python, linux, random, cryptography

我需要生成一些只能包含一系列字符的令牌，`[a-zA-Z0-9_]`

我正在尝试使用`binascii.b2a_base64(os.urandom(64))`，它具有其他字符，例如 + 并且正在引起问题。

`/dev/urandom`（我在 linux 上）的范围是多少，这样我就可以自己将输出整数统一映射到一个值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T21:31:17.580

它生成字节，因此包括 0x00 到 0xFF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:36:05.707

`/dev/urandom`只是提供随机字节。您读取的每个字节都在 to 范围内`0`，`255`希望是均匀分布的。

处理当前问题的一种简单方法是过滤掉`+`and`=`字符。在外壳中它会是`... | tr -d += | ...`. 我不知道最 Pythonic 的方法，但这似乎有效：

```
>>> import re
>>> re.sub(r'\+|=', '', "abcdef+=")
'abcdef' 
```

# javascript - 如何在忽略与文本相邻的标签内的某些文本时访问元素内的文本？

> ID：11147045
> 
> 赞同：9
> 
> 时间：2012-06-21T21:29:25.150
> 
> 标签：javascript, jquery

当文本本身与另一个包含文本的元素相邻时，从 jQuery 元素中获取文本的好方法是什么？

在此示例中，我想获取文本：“我想要的文本”，同时忽略相邻子元素中的文本：

```
<span>
   <a>Text I want to ignore</a> 
   Text I want
</span> 
```

我的解决方案是获取标签中的所有文本`<span>`，然后删除标签中的所有文本`<a>`。这感觉有点尴尬，所以我想知道是否有更好的方法：

```
var all_the_text = $('span').text();
var the_text_i_dont_want = $('span').find('a').text();
var text_i_want = all_the_text.replace(the_text_i_dont_want, ''); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T21:33:43.317

为此，您必须转到文本节点：

```
var text_i_want = $("span").contents().filter(function(){
    return this.nodeType === 3;
}).text();​ 
```

[http://jsfiddle.net/UeBZq/](http://jsfiddle.net/UeBZq/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T21:35:24.083

```
$("span")
    .clone()
    .children()
    .remove()
    .end()
    .text(); 
```

应该这样做

给予适当的信任:) [http://viralpatel.net/blogs/jquery-get-text-element-without-child-element/](http://viralpatel.net/blogs/jquery-get-text-element-without-child-element/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T21:44:23.047

删除标签并获取跨度内容。[工作演示](http://jsfiddle.net/epinapala/Gnwgb/)

```
<span>
   <a>Text I want to ignore</a> 
   Text I want
</span>​

var all_the_text = $('span').find('a').remove();
alert($('span').text()); 
```

# c# - 在表单上显示数据并异步更新表单

> ID：11147046
> 
> 赞同：0
> 
> 时间：2012-06-21T21:29:33.033
> 
> 标签：c#, html, asp.net-mvc, jquery, asp.net-ajax

解决这个问题的最佳方法是什么？我有一个文本框，教师在其中输入学生 ID，我想根据输入的 ID 显示学生信息。显示学生信息后，我有一个下拉列表，其中填充了一个列表，其中列出了学生注册的所有课程。从该下拉列表中选择一门课程后，我想在表格上显示学生的进度表格上的特定部分。我该如何处理？这是我到目前为止所拥有的：

控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Student.Models;

namespace Student.Controllers
{
    public class StudentFormController : Controller
    {
        //
        // GET: /StudentForm/

        public ActionResult Index()
        {
            return View("StudentForm");
        }

        public ActionResult DisplayStudentDetails(string StudentId)
        {
            StudentDataContext db = new StudentDataContext();
            var StudentName = (from p in db.vwStudent.Where(a => a.StudentID == StudentId)
                             group p by p.StudentName into g
                             select g.Key).FirstOrDefault();

            var StudentClassList = (from p in db.vwStudent.Where(a => a.StudentID ==          StudentId)
                             group p by p.ClassID into g
                             select g.Key).ToList();

            ViewData["StudentName"] = StudentName;
            ViewData["StudentClassList "] = StudentClassList ;

            return View("StudentForm");

        }

        public ActionResult DisplayClassDetails(string StudentId, string ClassId)
        {
            StudentDataContext db = new StudentDataContext();
            ViewData.Model = (from p in db.vwStudentProgress.Where(a => a.StudentID == StudentId && a.ClassID == ClassId);

            return View("LPForm");

        }

    }
} 
```

视图（表格）：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<asp:Content ID="Content3" ContentPlaceHolderID="TitleContent" runat="server">
    Student Form
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="MainContent" runat="server">
<form id="form2" method="get" action="/StudentForm/DisplayStudentDetails/" runat="server">
    <div style="text-align: left; height: 202px;">
<asp:ScriptManager ID="ScriptManager2" runat="server">
</asp:ScriptManager>                
<asp:UpdatePanel ID="UpdatePanel2" runat="server">
    <ContentTemplate>
        Student Id:<input type="text" name="id" value="<%=HttpContext.Current.Request.QueryString["StudentId"]%>" /><br />                    
        Student Name:<input type="text" name="StudentName" value="<%=ViewData["ShortName"]%>" /><br />
        Classes Enrolled in:
        <select name="Classes">
            <%if (ViewData["Classes"] != null)
            {%>               
            <% foreach (int? Classes in (List<int?>)ViewData["Classes"])
            {%>                                
            <option><%=Classes%></option>                                
            <%}%>               
            <%}%>                   
    </ContentTemplate>
</asp:UpdatePanel>
    <input type="submit" value="Display Student Details"/>
</div>
</form>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:53:42.453

> 解决这个问题的最佳方法是什么？

简单的答案是 AJAX。不要尝试在 ASP.NET MVC 应用程序中使用更新面板。使用 jquery 进行男性 ajax 调用并更新页面的某些部分。

> 从该下拉列表中选择课程后，我想在表格的特定部分中显示学生在表格上的进度。我该如何处理？

基本上，您应该通过 jquery 绑定到下拉列表的更改事件并调用返回部分视图的操作。

使用 html 助手来创建文本框、表单和其他东西，避免直接使用 html 元素。

# entity-framework - EntityFramework 填充值为“00000000-0000-0000-0000-000000000000”的唯一标识符

> ID：11147049
> 
> 赞同：5
> 
> 时间：2012-06-21T21:29:44.063
> 
> 标签：entity-framework, uniqueidentifier

在我的 WCF 服务中，我使用的是 Entity Framework .NET 4.0，在我的数据库中，我有这个表：

```
CREATE TABLE [dbo].[Tracking](
    [TrackingID] [uniqueidentifier] ROWGUIDCOL  NOT NULL,   
    ...
 CONSTRAINT [PK_Tracking] PRIMARY KEY CLUSTERED 
(
    [TrackingID] ASC
)
) ON [DATA]
ALTER TABLE [dbo].[Tracking] ADD  CONSTRAINT [DF_Tracking_TrackingID]  DEFAULT (newid()) FOR [TrackingID]
GO 
```

当我插入记录时，实体框架已将 TrackingID 预填充为“00000000-0000-0000-0000-000000000000”。我已将字段属性设置为 Computed 和 Identity，但没有任何想法：这是我的代码片段：

```
using (var context = new DB.PTLEntities())
{
     var tracking = new DB.Tracking();       
     context.Trackings.AddObject(tracking);
     context.SaveChanges();
     trackingID = tracking.TrackingID;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T21:41:51.800

看起来 EF 不认为该列是标识列，因此将其放入默认值（Guid）。在这里查看有关使 guid 成为身份列的一些详细信息（它实际上通过您的确切示例）[http://leedumond.com/blog/using-a-guid-as-an-entitykey-in-entity-framework -4/](http://leedumond.com/blog/using-a-guid-as-an-entitykey-in-entity-framework-4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-29T06:46:42.870

我有同样的问题。以下解决方案对我有用。

需要`StoreGeneratedPattern`在 EF 设计器中更改属性的值。将其设置为`Identity`。这将导致 EF 避免在插入上设置值，然后在插入完成后捕获它。

如果您的 EF 版本是 4，那么仅使用设计器可能会遇到问题。您可能必须`.edmx`手动编辑并`StoreGeneratedPattern`在存储模型本身中设置。

例子：

```
< Property Name="EmpId" Type="uniqueidentifier" Nullable="false" StoreGeneratedPattern="Identity" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T03:56:31.733

就我而言（EF >= 4.1），我需要为表本身添加一个默认值：

```
ALTER TABLE MyTable ADD  DEFAULT (newid()) FOR [Id] 
```

此外，如果您使用自己的上下文，您应该告诉 EF 该列是标识列：

```
public class ShedContext : DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<DraftFromWebOneOff>()
            .Property(d => d.Id)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        base.OnModelCreating(modelBuilder);
    }
} 
```

# c# - 在 C# 中为 GridView 赋值

> ID：11147050
> 
> 赞同：0
> 
> 时间：2012-06-21T21:29:44.553
> 
> 标签：c#, c#-4.0, gridview, arraylist

假设我们有一个列表

```
public class MyItem
{
    public string id{ get; set; }
    public string displayName { get; set; }
} 
```

我们可以很容易地`<asp:BoundField DataField="id " />`在代码隐藏文件中分配和调用数据源..这没关系，但如果我们的列表是这样的

```
public class Entity

    {
        public string id { get; set; }
        public Payload payload { get; set; }
    }

public class Payload
{
    public string kloutId { get; set; }
    public string nick { get; set; }

} 
```

您将实体包装在一个中，`List<Entity> l=new List<Entity>();` 但是现在我们将在其中写什么`<asp:BoundField DataField="?" />` 我尝试使用 kloutid，Entity.Payload.Kloutid，但这没有成功。任何可以帮助我的人都非常感谢 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:37:22.913

在上创建以下只读属性`Entity`

```
public string PayloadKloutId
{ 
    get { return payload.kloutId; }
} 
```

您将能够像这样绑定它

```
<asp:BoundField DataField="PayloadKloutId" /> 
```

# google-app-engine - Google app engine error, don't know where to start looking

> ID：11147053
> 
> 赞同：0
> 
> 时间：2012-06-21T21:30:06.840
> 
> 标签：google-app-engine

I'm receiving this error when I attempt to start an app using google app engine :

```
Loading modules
   com.bookmark.Mobile_bookmark
      [ERROR] Unable to find 'com/bookmark/Mobile_bookmark.gwt.xml' on your classpath; could be a typo, or maybe you forgot to include a classpath entry for source?
[ERROR] shell failed in doStartup method 
```

I don't have a file called `Mobile_bookmark.gwt.xml`. My project name is mobile-bookmark

Why is this error occuring ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:22:41.743

If it's looking for Mobile_bookmark.gwt.xml (the wrong file), I'd check how you are starting the server.

For example, under Eclipse, I'd check run configurations --> arguments to see if "Mobile_bookmark" got into there. (you can get to run configurations by selecting the little triangle next to either the green debug or run button you use to start it --- or RUN (menu in eclipse) -- run configurations -- select your project)

Change the file name to whatever *.gwt.xml file you do have. I suspect it's mobile-bookmark.gwt.xml.

Look under /src/yourpath/yourproject/

Your layout is probably like:

```
/src/yourpath/yourproject/*.gwt.xml
/src/yourpath/yourproject/client
/src/yourpath/yourproject/server 
```

# jquery - Jquery移动按钮不显示“按下按钮”动画

> ID：11147056
> 
> 赞同：1
> 
> 时间：2012-06-21T21:30:11.707
> 
> 标签：jquery, asp.net-mvc, jquery-mobile

所以在我的电脑上测试它工作得很好，但是我在手机上测试它就坏了......

```
<%: Html.ActionLink("About", "About", "Home", null, new { data_role = "button", data_iconpos = "right", data_icon = "arrow-r", data_shadow = "false", @class = "arrowButton" })%> 
```

这成功地呈现了一个像按钮一样样式的超链接，并且当在我的手机上按下时会给出适当的反馈，让我知道我按下了它。然而这个按钮在这里

```
<a id="submitBtn" href="" data-role="button" data-theme="b" onclick="$('#formControl').submit();" >Sign In</a> 
```

并且网站上的每个其他按钮（这最初是一个带有 type="submit" 的输​​入，但我将其更改为在 2 之间尽可能地相同）当您按下它们时不会显示任何反馈电话。任何想法为什么会发生这种情况？

tl:dr 超链接直观地显示我手机上的点击，但按钮不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:26:13.167

根据声明

> 超链接直观地显示我手机上的点击，但按钮不显示。

我想我知道你的问题。看到这个小提琴[http://jsfiddle.net/nachiket/wBe9M/](http://jsfiddle.net/nachiket/wBe9M/)

```
<button data-role="button">Button with data role</button>            
<button>Button without data role</button> 
```

当您为**按钮指定****数据角色**时，它不会显示按钮突出显示或按下动画，因为按钮不需要数据角色。

# for-loop - 无法在 for-loop in 子句中执行 exe

> ID：11147057
> 
> 赞同：3
> 
> 时间：2012-06-21T21:30:20.087
> 
> 标签：for-loop, batch-file, windows-7-x64

我在一个名为 find_java.bat 的批处理文件中有这个：

```
@echo off
for /f "delims=" %%a in ('C:\Programming\Android\android-sdk\tools\lib\find_java.exe') do (set java_exe=%%a) 
```

问题是当我运行这个批处理文件时，我得到：

```
'C:\Programming\Android\android-sdk\tools\lib\find_java.exe' is not recognized as an internal or external command, operable program or batch file. 
```

但是，当批处理文件仅包含：

```
@echo off
C:\Programming\Android\android-sdk\tools\lib\find_java.exe 
```

它执行命令就好了。

我是编写批处理文件的新手，但是查看在线示例应该可以...

**编辑：抱歉这么晚才重温。**

我找到了解决方案。由于我仍然不太了解的原因，它与 ComSpec 有关。我的 ComSpec 是

```
%SystemRoot%\system32\cmd.exe; 
```

我进入注册表并更改

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment\ComSpec 
```

从

```
%SystemRoot%\system32\cmd.exe; 
```

至

```
C:\Windows\system32\cmd.exe 
```

然后注销并重新登录，它神奇地工作了。%SystemRoot% 是 C:\Windows，所有其他系统变量都使用它，并且

```
@echo off
for /f "delims=" %%a in ('"C:\Programming\Android\android-sdk\tools\lib\find_java.exe"') do (set java_exe=%%a) 
```

工作得很好，所以老实说我不明白，但看到[Command Line FOR /F Fails](https://stackoverflow.com/questions/9668011/command-line-for-f-fails)可能比我更能理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:45:52.097

通常，这些问题可以通过将命令括在双引号中来解决。

```
@echo off
for /f "delims=" %%a in ('"C:\Programming\Android\android-sdk\tools\lib\find_java.exe"') do (set java_exe=%%a) 
```

但是我在您的命令中看不到任何需要引号的内容。

我不知道为什么它不起作用，但是 FOR /F 语句正在尝试在新的 CMD shell 中执行该命令。

尝试运行以下批处理，看看它是否运行命令 OK。这是 FOR 语句实际尝试运行的命令：

```
@echo off
%comspec% /c C:\Programming\Android\android-sdk\tools\lib\find_java.exe 
```

如果运行正常，那么我完全被难住了。如果它失败了，那么找出原因也应该有助于诊断 FOR /F 命令失败的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:44:49.473

我不知道这是否有帮助，但我只是尝试了您的示例代码。它在 WinXP SP3 机器上完美运行。您是否尝试过以管理员权限运行批处理文件？

# mysql - Spring 3 - Hibernate 3 - 查询多个 MySQL 数据库

> ID：11147058
> 
> 赞同：1
> 
> 时间：2012-06-21T21:30:26.663
> 
> 标签：mysql, spring, hibernate, spring-3, atomikos

我正在尝试开发一个小程序，对存储在单个服务器上的多个 MySQL 数据库执行查询。例如，考虑使用一个 select 语句从数据库 D1 中的表 X1 中的字段和数据库 D2 中的表 X2 中的字段中检索值。

除了 Hibernate 3.5，我们还使用 Spring 3 作为我们的框架。我将如何设置一个 spring/hibernate 项目来实现这一目标？

我已经看到许多源状态需要为每个数据库单独的休眠配置/会话工厂，并使用诸如 Atomikos 之类的事务管理器。但我一直找不到任何明确的方向/说明。

感谢您提供的任何帮助！（如果需要，我可以提供更多信息）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:39:31.533

如果您不仅要在多个数据库上执行更新查询，您将需要 atomikos。对于只读用法，假设您不使用 hibernate。那么您的 x dbs 将需要 x db 连接。与休眠相同，它将需要 x 个连接，因此您将为每个 db 配置 x 个会话工厂。如果您使用 spring Cause，则可以将 atomikos 添加为事务管理器，然后如果您将服务方法注释为事务性只读，则在事务的末尾 x 连接被连接到连接池......

# c# - 更改网格内容取决于下拉值

> ID：11147061
> 
> 赞同：0
> 
> 时间：2012-06-21T21:30:40.450
> 
> 标签：c#, asp.net-mvc-3

当用户使用 ajax 更改下拉值时，我想更改网格日期。这是我的 C# 代码：

```
public ActionResult Index(string name)
    {
        ViewBag.Drop = db.Students.Select(r => r.Fname);
        var model = from r in db.Students
                    where r.Fname == name
                    select r;

        return View(model);
    } 
```

这是`cshtml`文件：

```
 @using (Ajax.BeginForm("Index", new AjaxOptions
    {
        UpdateTargetId = "grid",

        HttpMethod = "GET"
    }
        ))
    {

         @Html.DropDownList("name", new SelectList(ViewBag.Drop));
         <input type = "submit" value = "submit" />
    }
    <div id= "grid">

    </div> 
```

我的问题是，当我更改下拉值时，所有视图都会再次显示。我不想看到新视图，只想更改网格数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:42:55.827

您是否有仅返回 Grid 数据的操作方法？如果没有，创建一个

```
public ActionResult GridData(string name)
{
   var gridItems=repo.GetCustomers(name).ToList();   
   //the above method can be replaced by your 
   // actual method which returns the data for grid

    return View(model);
} 
```

我只是假设您有一个带有属性的客户模型，`FirstName`并且`LastName`您想在网格中显示客户列表。您可以用您的实际类名和属性替换它们。

确保您有一个名为的视图`GridData.cshtml`，它将为您的 Grid 呈现 HTML 标记

```
@model IEnumerable<YourNameSpace.Customer>
@{
  Layout=null;
}
<table>
@foreach(var item in Model)
{
  <tr><td>item.FirstName</td><td>item.LastName</td></td>
} 
```

我会编写如下所示的简单**（和干净**）代码，而不是使用 `Ajax.BeginForm`

```
@Html.DropDownList("name", new SelectList(ViewBag.Drop));
<div id= "grid"></grid>

<script type="text/javascript">
 $(function(){

   $("select[name='name']").change(function(){
      var url="@Url.Action("GridData","YourControllerName")"+"?name="+$(this).val();
      $("#grid").load(url);
   });   

 });    
</script> 
```

# c++ - 网格三角剖分：分离与嵌套循环复杂性

> ID：11147062
> 
> 赞同：0
> 
> 时间：2012-06-21T21:30:43.653
> 
> 标签：c++, graphics, 3d, directx

我为我的模型查看器编写了一个 collada 加载程序。

现在写它循环遍历所有顶点和索引并创建索引和顶点缓冲区，以便我可以渲染网格。

如果模型不是三角化的，我有两个选择。我可以在将索引写入缓冲区时对其进行训练（即计算并添加更多索引以创建三角形）。

或者，我可以在编写缓冲区之前对整个网格进行三角化，并保持缓冲区系统不变（它将假定事先对网格进行了三角剖分）。

为了事先对模型进行分割，我需要通过列表将整个事物加载到链表循环中，并插入新索引以将 4 个以上的多边形分解为 tirangles。

如果我在编写网格时进行三角剖分，我需要延迟写入 4 个以上的多边形，将它们放入一个单独的缓冲区中，然后当该缓冲区包含整个 4 个以上的多边形时，对其进行三角剖分并写入新的索引。

这实际上会添加另一个 for 循环，该循环只会在每次遇到 4+ 三角形时触发。

这是迄今为止我写过的最复杂的东西，我很难弄清楚哪个方向会更有效。

一个涉及通过复制整个网格使我使用的内存量增加一倍，以便我可以对其进行处理，另一个涉及嵌套的 for 循环，该循环仅在遇到 4 个以上的多边形时触发。

任何人都可以就如何在不实际编写和测试这两个选项的情况下衡量这两个选项的复杂性提供任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T00:59:43.953

添加一个内部循环来处理偶尔的情况很好。如果我正确理解您的问题，您将需要测试多边形并根据需要以一种或另一种方式对它们进行三角测量；有条件执行的内部循环是对此的适当反映。

如果您认为内部循环会使您的函数太长/丑陋/难以阅读，您可以编写一个单独的包含内部循环的“triangulate_polygon()”函数，并有条件地调用它。

# rdlc - rdlc：在饼图上显示百分比

> ID：11147063
> 
> 赞同：0
> 
> 时间：2012-06-21T21:30:46.013
> 
> 标签：rdlc

我正在使用 Visual Studio 2010 报告来生成包含表格和饼图的报告。两者都工作得很好，除了饼图，我要把 % 值放在每个饼图切片上。1\. 这甚至可能吗？2\. 如果是，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:23:57.997

要将 % 值放在每个饼图切片上，请执行以下操作（如此处所示[）](http://technet.microsoft.com/en-us/library/dd239373%28v=sql.105%29.aspx)：

1.  在设计图面上，右键单击饼图并选择显示数据标签。数据标签应出现在饼图的每个切片中。
2.  在设计图面上，右键单击标签并选择系列标签属性。出现系列标签属性对话框。
3.  为标签数据选项键入#PERCENT。

当心：如果您使用这样的多个数据字段：![在此处输入图像描述](../Images/9a7b4eac9322aa327e3c049d20b6d51b.png) 您需要将每个字段移动到第一个位置并执行上述步骤，如此处所示[，](http://www.morrenth.com/report-designer-rdlc-pie-chart-data-labels-for-multiple-data-fields.aspx)否则您最终只有一个饼图切片显示百分比，其他为空白...

# rabbitmq - RabbitMQ 创建连接是一项昂贵的操作

> ID：11147065
> 
> 赞同：2
> 
> 时间：2012-06-21T21:30:55.167
> 
> 标签：rabbitmq

在 RabbtiMQ .net 客户端中创建连接是一项昂贵的操作吗？

我们有一个将消息发布到 RMQ 的 Web 应用程序，目前我们在每次发布时创建并关闭连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T04:11:19.300

是的，创建连接很昂贵。为什么在发布后仍然要创建和关闭与兔子的连接？

我建议创建一次兔子连接，然后在需要时关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T05:34:01.513

如果您保持单个连接，则发送消息会更快，因为您只需要一次操作即可发送消息。每次打开连接都会使用io资源，所以肯定会慢一些。

# android - 从崩溃报告中获取设备类型和 Android SDK

> ID：11147066
> 
> 赞同：0
> 
> 时间：2012-06-21T21:31:05.770
> 
> 标签：android

市场崩溃报告没有提供足够的信息来说明我正在使用哪个版本的 android 来复制错误。我如何要求提供有关崩溃报告的更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:40:10.443

你不能。最好使用[ACRA](http://acra.ch/)之类的第三方解决方案。它可以为您提供非常详细的报告。

# css - IE中的css固定位置

> ID：11147070
> 
> 赞同：0
> 
> 时间：2012-06-21T21:31:20.257
> 
> 标签：css, css-position

我试图自己解决这个问题，但没有成功。我正在尝试将 flash 元素放置在底部的固定位置。

```
#ticker{ position: fixed; bottom: 0; right: 12%; z-index: 6000 !important;} 
```

它适用于 FF 和 chrome，但不适用于 IE。我尝试更改文档类型

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

但它没有用。我读过一些关于放置假元素的文章，但我不太明白..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T10:29:39.153

让你的小提琴工作，你不需要改变你的 DOCTYPE。

这是[http://jsfiddle.net/xpjyY/1/](http://jsfiddle.net/xpjyY/1/)

您忘记了 css 中“对象”的右括号。

```
object[width=150]{z-index: -5 !important;}//Forgot the closing bracket 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:30:50.187

尝试使用此文档类型：

```
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

不知何故，微软的某个人[认为](http://msdn.microsoft.com/en-us/library/ms531140%28v=vs.85%29.aspx)，如果他们希望使用`position:fixed`. 这很酷什么的。

更新：[本文](http://techblog.tonycollings.com/?p=516)描述了其他几种解决方案，可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:14:45.997

您更正的代码：

```
object[width=150]{z-index: -5 !important;}
#ticker,  #main_Ticker{ position: fixed; bottom: 0px; right: 12%; z-index: 6000 !important;} 
```

您无需更改 HTML 中的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T16:27:34.810

只用这个替换你的**CSS**代码

```
object[width=150]{z-index: -5 !important;}
#ticker,  #main_Ticker{ position: fixed; bottom: 0px; right: 12%; z-index: 6000 !important;} 
```

你需要关闭

`object[width=150]{z-index: -5 !important;`这条线

**演示** [http://jsfiddle.net/xpjyY/2/](http://jsfiddle.net/xpjyY/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T06:27:25.597

可以在 IE 中使用表达式来实现与其他浏览器中的 position:fixed 相同的效果。（所以你需要两个不同的 CSS 文件`<!--[If IE]><![endif]-->`）

只需将位置设置为绝对并添加表达式：

```
#fixeddiv{  
    position: absolute;
    top: expression(0+((e=document.documentElement.scrollTop)?e:document.body.scrollTop)+'px');
    left: expression(0+((e=document.documentElement.scrollLeft)?e:document.body.scrollLeft)+'px');}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T21:40:14.120

[http://www.howtocreate.co.uk/fixedPosition.html](http://www.howtocreate.co.uk/fixedPosition.html)

这应该让您对固定定位的工作原理有所了解，这是一本无聊但必要的阅读。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-24T21:14:11.497

据我所知，它确实适用于 IE9（适用于我的桌面）。看到这个[jsfiddle](http://jsfiddle.net/MBacn/)。我没有 IE8，所以我不知道它是否会在其中运行..（我的猜测是它不会..因为微软......o，o）

无论如何..希望它有帮助.. =)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-29T13:37:22.640

**参考：**

[**带有 Active Ticker 演示的 jsFiddle**](http://jsfiddle.net/s3YTX/)

**解决方案：**
需要 SWF 选项`allowscriptaccess`才能正确操作您的 SWF 代码文件。flash 代码的水平居中是使用纯 CSS 包裹在几个 div 中完成的，`position:fixed`因此它总是固定在底部。

**兼容性：**
这个 jsFiddle 是在**HTML5**中完成的，不使用 DOCTYPE Scrict 并且可以在 IE8 中正常工作。
对于 IE7，使用单独的样式表并更改`bottom:0;`为`bottom:5px;`正确操作。

**截屏：** ![在此处输入图像描述](../Images/c57823bc58359abbf07f0fe89b45da20.png)

**状态：**
由于**jsFiddle.net**在过去 2 天出现[**间歇性中断，因此提供了屏幕截图。**](https://twitter.com/#!/js_fiddle/)

# google-maps - 如何模拟谷歌地图的setPanel？

> ID：11147071
> 
> 赞同：0
> 
> 时间：2012-06-21T21:31:21.397
> 
> 标签：google-maps, google-maps-api-3

如何在不使用 setPanel() 方法的情况下创建包含 2 个点之间的路线的表格？我想只显示路线名称并在用户单击路线名称后在地图中显示路线。

请参阅我的代码：[https ://github.com/lusabo/xerekr](https://github.com/lusabo/xerekr)

非常感谢，卢西亚诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:37:20.937

我正在使用 gmap3 并这样做：

```
function showQuadro(results){
  var link;
  $("#rotas").html("");
  $.each(r.routes, function(key, value){
    link = "<a href='#' par='" + key + "'>" + value.summary + " - " + value.legs[0].distance.text + " - " + value.legs[0].duration.text +  "</a>";
    $("#rotas").append(link);
    $("#rotas").append("<br/>");
    $("[par=" + key + "]").live("click", function(){
                $("#map").gmap3(
                    {action:'clear'},
                    { action:'addDirectionsRenderer',
                        options:{
                            preserveViewport: true,
                            draggable: false,
                            directions: r,
                            routeIndex: key
                        }
                    }
                );
            });
        });
    } 
```

# mobile - Trigger.io 获取 GPS 坐标

> ID：11147073
> 
> 赞同：1
> 
> 时间：2012-06-21T21:31:41.370
> 
> 标签：mobile, gps, trigger.io

我需要找到运行我的 Trigger 应用程序的设备的 GPS 坐标。我需要这些坐标尽可能准确。如果这是本机应用程序，我可以选择指定位置提供程序（在这种情况下，我会指定 gps）。如何在触发器中执行此操作？geolocation 的文档提到 getCurrentPosition 有一个选项参数，但没有解释如何与我需要的提供者进行通信。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T17:23:16.690

如果可用的话，forge.geolocation.getCurrentPosition 会使用辅助 GPS。

因此它将提供我们所能提供的最准确的位置位置——显然，如果用户手动禁用了 gps，那么它将使用不太准确的网络位置。

# mysql - 数据库图库：多个相册中的一张图片或一个相册中的一张图片

> ID：11147076
> 
> 赞同：0
> 
> 时间：2012-06-21T21:32:01.913
> 
> 标签：mysql, database, image

我正在创建一个图片库。我计划构建的模型非常简单：我有一些类别，其中包含带有标签的图像的专辑。

当谈到允许一张图片出现在超过 1 张专辑中时，我不确定那里的标准是什么，或者最好的画廊软件是如何做到的......

是否允许在多个相册中使用相同的图像？或者图像只在一个相册中，我应该使用标签？

任何人都有想法或可以指导我..这是核心模型的重要组成部分，我希望它从一开始就完美。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:57:24.033

[DBGallery](http://dbgallery.com)允许将图像存储在文件夹中并具有“虚拟集”。因此，虚拟集中的图像不会复制图像，而是简单地指向文件夹中的图像。一个图像可以属于任意数量的虚拟集。如果源图像使用 Photoshop 更新或它的数据标签被编辑，它会反映在所有虚拟场景中。YouTube 上有一个视频在这里介绍它们（尽管它们在视频中被称为 Handy Collections ......同样的东西）。所以这里的投票是做一个混合。这也是优秀的[“The DAM Book”](http://www.thedambook.com/)中推荐的内容，这是一本关于 DAM 软件的书，自 2006 年左右开始被广泛阅读。

# wcf - 如何确定 WCF 服务的期望？

> ID：11147077
> 
> 赞同：1
> 
> 时间：2012-06-21T21:32:23.787
> 
> 标签：wcf, node.js, soap

我正在使用 Node.js 和 wcf.js 模块（npm install wcf.js） 我尝试使用的服务是[https://webservice.kareo.com/services/soap/2.1/](https://webservice.kareo.com/services/soap/2.1/)

我已经弄清楚这个[https://webservice.kareo.com/services/soap/2.1/KareoServices.svc?xsd=xsd0](https://webservice.kareo.com/services/soap/2.1/KareoServices.svc?xsd=xsd0)包含服务希望接收的内容以及这些[https://webservice.kareo.com/ services/soap/2.1/KareoServices.svc?wsdl=wsdl0](https://webservice.kareo.com/services/soap/2.1/KareoServices.svc?wsdl=wsdl0)是将它们提交到的 uri。

我到底如何弄清楚我应该如何构建请求？这是 wcf.js 给我的例子

```
var BasicHttpBinding = require('wcf.js').BasicHttpBinding
  , Proxy = require('wcf.js').Proxy
  , binding = new BasicHttpBinding()
  , proxy = new Proxy(binding, " https://webservice.kareo.com/services/soap/2.1/")
  , message = '<Envelope xmlns=' +
            '"http://schemas.xmlsoap.org/soap/envelope/">' +
                 '<Header />' +
                   '<Body>' +
                     '<GetData xmlns="http://tempuri.org/">' +
                       '<value>GetAppointments</value>' +
                     '</GetData>' +
                    '</Body>' +
               '</Envelope>'

proxy.send(message, "http://www.kareo.com/api/schemas/KareoServices/GetAppointments", function(response, ctx) {
  console.log(response)
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:10:29.657

根据 wsdl，此服务使用 BasicHttpBinding，这意味着不使用 ws-secrutiy 或寻址。[在这种情况下，除了使用请求](https://github.com/mikeal/request)之外，wcf.js 并没有给您带来太多附加值，但是您仍然可以使用 wcf.js。您需要正确设置 3 个值 - url、soapaction（代理 ctor 中的第二个参数）和 soap。我建议通过为该服务生成 ac# 客户端来获取所有 3 个值，验证客户端是否正常工作，然后设置 fiddler 并将客户端指向“http://localhost:8888”，这样您将在 fiddler 中看到所有 3 个值并且可以配置它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:10:50.877

我对 wcf.js 没有任何经验，但是，如果您只需要了解应该如何构建肥皂信封来发出请求，我建议您启动[wcftestclient](http://msdn.microsoft.com/en-us/library/bb552364.aspx)并连接到该服务。连接后，您可以调用任何操作并查看肥皂消息。这是对 GetAppointments 操作的空请求。

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
      <s:Header>
        <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://www.kareo.com/api/schemas/KareoServices/GetAppointments</Action>
      </s:Header>
      <s:Body>
        <GetAppointments xmlns="http://www.kareo.com/api/schemas/">
          <request xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
            <RequestHeader i:nil="true" />
            <Fields i:nil="true" />
            <Filter i:nil="true" />
          </request>
        </GetAppointments>
      </s:Body>
    </s:Envelope> 
```

# ios - 内部应用程序的 APNS - 仅沙盒？

> ID：11147078
> 
> 赞同：0
> 
> 时间：2012-06-21T21:32:24.623
> 
> 标签：ios, apple-push-notifications, sandbox, mdm, in-house-distribution

我们的应用程序通过 MDM（在本例中为 AirWatch）作为 InHouse 应用程序分发。

我们可以将 APNS 消息发送到应用程序并找到所有作品，但前提是我们使用 APNS 沙箱。

当我们使用 Apple 的生产 APNS 服务器和生产证书时，Apple 拒绝了该消息。

与 MDM 一起分发的 InHouse 应用程序是否不适用于 Apple 的生产 APN 服务器？

当使用生产 APNS 服务器时，我们得到的错误是“Apple 错误代码：无效令牌”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:03:10.243

您用于测试的设备似乎没有与服务器的令牌绑定或绑定了一些错误。我不确定，但这可能是您的服务器逻辑错误或使用的证书无效。相反，这是证书的问题。您在服务器上使用什么样的提供商？

# tfs - 使用 TFS 和 Odata

> ID：11147080
> 
> 赞同：0
> 
> 时间：2012-06-21T21:32:26.463
> 
> 标签：tfs, odata

我正在使用 Odata 和 TFS。我能够下载并运行 OdataTFS 文件。我正在尝试编写一个将访问 TFS 的客户端控制台应用程序，以便我可以针对它运行查询。我想弄清楚这条线

```
 var tfsData = new TFSData.TFSData(new Uri("https://codeplexodata.cloudapp.net"); 
```

我通常访问 TFS 信息的方式是进入 Visual Studio 2010，单击连接到 TFS 服务器，输入服务器名称就可以了。但是在这里我不确定该怎么做。我还没有找到任何关于如何连接到服务器而不是 codeplex 的材料。我在哪里可以找到这个的uri？任何帮助都会很棒，我已经阅读了关于 odata 的前 15 个谷歌搜索，但仍然有点迷失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:36:46.540

TFS 没有包含在安装中的任何 OData 服务。

您需要在本地 TFS 服务器上安装[Team Foundation Server 的 OData 服务，以便针对本地 TFS 使用 OData。](http://blogs.msdn.com/b/briankel/archive/2011/10/26/odata-service-for-team-foundation-server-2010-v1.aspx)

# asp.net-mvc - 类似于控制器中的包罗万象的动作

> ID：11147084
> 
> 赞同：1
> 
> 时间：2012-06-21T21:32:38.750
> 
> 标签：asp.net-mvc, controller, routes, action

我有一个名为 ProfileController 的控制器，我想做的是制作它，以便我可以根据用户名重定向或搜索用户。像 www.site.com/Profile/MyUsername 这样的东西，然后它会显示一个具有该特定用户模型的视图。我似乎可以这样做的唯一方法是将 int Id 作为参数传递，但即使这样，当我真的想完全摆脱 Index 部分时，它也会以 www.site.com/Profile/Index/1 的形式出现并将 1 替换为实际用户名...以前有人这样做过吗？

# winforms - 如何在单独的线程上使用 AnimateWindow 函数？

> ID：11147086
> 
> 赞同：0
> 
> 时间：2012-06-21T21:32:48.810
> 
> 标签：winforms, multithreading, winapi, animatewindow

如何同时为两个窗口设置动画？我试过了：

```
[DllImport("user32.dll", CharSet = CharSet.Auto)]
static extern bool AnimateWindow(IntPtr hwnd, int time, int flags);
...

AnimateWindow(panel1.Handle, speed, AW_SLIDE | AW_HOR_Top);
AnimateWindow(panel2.Handle, speed, AW_SLIDE | AW_HOR_Top); 
```

但是在 panel1 完成动画之前， panel2 不会动画。

我必须使用线程..但即使我使用了调用我也不能..它也在第一个动画之后运行第二个动画

那我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:39:50.787

如果两个窗口都是由同一个线程创建的，那么该`AnimateWindow`函数将在该线程上运行。根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632669.aspx)：

> 该函数在以下情况下会失败：
> 
> *   如果线程不拥有窗口。请注意，在这种情况下，`AnimateWindow`失败但[`GetLastError`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360.aspx)返回`ERROR_SUCCESS`。

除了在单独的线程上创建第二个窗口之外，没有其他办法。此外，您必须`AnimateWindow`从创建每个窗口的线程中调用该函数。

# javascript - 在 rails 的 form_for 方法中渲染不同的表单

> ID：11147092
> 
> 赞同：0
> 
> 时间：2012-06-21T21:33:18.047
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, partial-views, form-for

我的 rails 应用程序的页面上有一个 form_for。我希望用户能够从下拉菜单中选择他们想要输入的交易阶段，并让页面以相应的表单（在相应的部分中）进行响应。下面是 form_for 的简化版本。我也有 javascript 在页面加载时隐藏 4 个部分，然后当从选择菜单中选择一个时，显示该部分。

```
= form_for @activity do |f|
  .field
    = f.label :select_deal_stage
    = f.select(:deal_stage, DEAL_STAGE_ARRAY[], {:selected => nil, :prompt => 'Select Stage'})
  = render "deal_stage_1_partial", :f => f
  = render "deal_stage_2_partial", :f => f
  = render "deal_stage_3_partial", :f => f
  = render "deal_stage_4_partial", :f => f 
```

这里的问题似乎是，当我填写并提交表单时，参数是空白的，大概是因为在 form_for 中重复了这些字段，并且它正在从最后一个字段提交值，或者以某种方式从实际上不是的字段提交值那些被填写的。当从下拉菜单中选择的 deal_stage 成为与表单一起提交的参数之一时，我怎样才能让它工作？

附加信息：部分都不同，但有一些共享字段。参数最终成为所有表单中所有字段的完整列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:13:00.843

我认为你有两个选择：

1.  以不同的方式命名四组重复字段，例如。如果您有 item_no 字段，请将其命名为 item_no_1、item_no_2、item_no_3 和 item_no_4。然后处理将正确的移动到 item_no。

2.  一次只渲染四个视图/部分之一。这意味着用户必须在渲染之前选择选项。

祝你好运！

# android - 画布绘制精度问题

> ID：11147097
> 
> 赞同：0
> 
> 时间：2012-06-21T21:33:34.427
> 
> 标签：android, android-canvas

有人帮我理解 Android 中疯狂的 Canvas 类。它似乎不准确，我不太确定为什么参数是浮点值。例如，这是我要绘制的多边形，具有绝对点值：

```
 mPaint.setStyle(Paint.Style.STROKE);
       mPaint.setColor(Color.RED);
       mPaint.setAntiAlias(false);
       mPaint.setDither(false);
       mPaint.setFilterBitmap(false);

       Path path1 = new Path();
       path1.moveTo(151, 100);
       path1.lineTo(200, 200);
       path1.lineTo(100, 151);
       path1.lineTo(200, 151);
       path1.lineTo(100, 201);
       path1.lineTo(151, 100);
       //   So that these points constitute a closed polygon  
       path1.setFillType(Path.FillType.EVEN_ODD);
       mPaint.setStyle(Paint.Style.FILL);
       mPaint.setColor(Color.GRAY);
       //   Draw the polygon  
       mCanvas.drawPath(path1, mPaint); 
```

当我使用 Windows GDI 在 Windows 中运行类似的代码时，它准确地指出了要点。然而，在android中，有两个问题：

1）即使我关闭了抗锯齿，这条线似乎也有抗锯齿（灰线周围有黑色像素）。2）它并不总是达到指定的点。有时会，有时不会

为了更接近我想要的点，我必须这样做：

```
 Path path1 = new Path();
       path1.moveTo(151, 100-1);
       path1.lineTo(200+1, 200+1);
       path1.lineTo(100-1, 151);
       path1.lineTo(200+2, 151);
       path1.lineTo(100, 201);
       path1.lineTo(151+1, 100); 
```

我无法弄清楚这里的规则，也不知道它在做什么，这太奇怪了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T00:30:29.080

这不像你所说的 Path 类而不是 Canvas。现在我建议你将 dither 设置为 true `mPaint.setDither(true)`，请允许我引用 dither 方法：

> setFlags() 的助手，设置或清除 DITHER_FLAG 位抖动会影响比设备精度更高的颜色如何被下采样。没有抖动通常更快，但精度更高的颜色会被截断（例如 8888 -> 565）。抖动尝试分配此过程中固有的错误，以减少视觉伪影。

换句话说，它告诉您解析颜色可能存在问题。因此，这可能是导致您出现问题的原因。

# asp.net - 错误 BC30456：'[Method]' 不是 'ASP.[CodeBehind]_aspx' 的成员

> ID：11147100
> 
> 赞同：6
> 
> 时间：2012-06-21T21:33:43.350
> 
> 标签：asp.net, vb.net, visual-studio-2010, web-applications

很简单的问题。我很确定我已经正确链接了类、方法、代码隐藏等。网上很多帖子说这与编译和/或 dll/bin 文件有关，但他们的帮助都没有对我有用。

```
Compiler Error Message: BC30456: 'gvLegs_PageIndexChanging' is not a member of 'ASP.nestedgridview_aspx'.

Source Error:

Line 43:    <asp:Label ID="lblEmpName" runat="server" Text='<%# Eval("Location")%>'></asp:Label>
Line 44:    <asp:Literal runat="server" ID="lit1" Text="</td><tr id='trCollapseGrid' style='display:none' ><td colspan='5'>" />
Line 45:    <asp:GridView ID="gvLegs" AutoGenerateColumns="False" runat="server" EnableViewState="False"
Line 46:    DataKeyNames="EmployeeId" ForeColor="#333333" PageSize="4" AllowPaging="True"
Line 47:    OnPageIndexChanging="gvLegs_PageIndexChanging">
Source File: C:\Users\tstanley\Desktop\NestedVB\NestedVB\NestedGridView.aspx    Line: 45 
```

嵌套网格视图.aspx

```
<%@ Page Language="vb" AutoEventWireup="false" codebehind="NestedGridView.aspx.vb" Inherits="NestedVB.NestedGridViewPaging2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

NetedGridView.aspx.vb [后面的代码] ...

```
 Private Sub gvLegs_PageIndexChanging(sender As Object, e As GridViewPageEventArgs) 
```

如果有人对此有解决方案，它将对我有很大帮助，因此我可以继续....调试实际代码大声笑。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T21:35:03.133

`gvLegs_PageIndexChanging`是私有的，但需要保护或公开。

由于您使用的是 VB.NET，因此您还可以使用[handle 子句](http://msdn.microsoft.com/en-us/library/6k46st1y%28v=vs.80%29.aspx)：

```
Private Sub gvLegs_PageIndexChanging(sender As Object, e As GridViewPageEventArgs) _
    Handles gvLegs.PageIndexChanging
End Sub 
```

**编辑**：为了清楚起见，您在 ASP.NET 和 VB.NET 中有三个选项来创建事件处理程序：

1.  以声明方式在 aspx 上
2.  在带有[句柄子句的代码中](http://msdn.microsoft.com/en-us/library/6k46st1y%28v=vs.80%29.aspx)
3.  使用[AddHandler](http://msdn.microsoft.com/en-us/library/6yyk8z93%28v=vs.71%29.aspx)（主要用于 VB.NET 中的动态控件）

如果您使用选项 1，则事件处理程序必须至少受到保护，因为 aspx 页面继承自代码隐藏类。

如果您使用选项 2，则该方法可以是私有的，但您需要删除 aspx 上的声明性事件处理程序。

# iphone - 更改 UIViewTable 的大小以适应 AdWhirl 广告

> ID：11147103
> 
> 赞同：0
> 
> 时间：2012-06-21T21:33:57.433
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

我正在尝试更改 UITableView 的大小。我的视图底部有一个广告，当我滚动时，广告会随之滚动。我想知道如何更改 UITableView 的大小，以便无论 UITableView 是否正在滚动，广告都将始终保留在视图的底部。我曾尝试更改 TableView 框架的大小，但这不起作用。

```
- (void)viewDidAppear:(BOOL)animated
{
 tableView.frame = CGRectMake()...
} 
```

我也尝试在 scrollViewDidScroll: 选择器中更改它，但没有运气。无论如何我可以改变高度，这样它就不会与底部的广告冲突？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:50:35.713

解决此问题的简单方法是为您的 UITableView 使用 .XIB 文件，然后使用 Interface Builder 轻松更改高度。

如果您没有 IB 文件，请阅读这篇文章：[如何动态调整 UITableView 的高度？](https://stackoverflow.com/questions/1318030/how-do-i-resize-the-uitableviews-height-dynamically)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:56:04.920

使用 UITableViewControllers `self.view == self.tableView`。在您的情况下这是一个问题，因为您想要的所需效果需要同级视图（两个视图添加到一个公共超级视图）但 self.tableView 没有“超级视图”。

您必须创建一个新的 UIViewController 子类，其中包含一个 UITableView 和您的广告视图作为两个子视图。您将需要处理诸如设置表格视图的数据源和委托，以及在控制器出现时取消选择表格视图单元格之类的事情。这是一个多一点的工作，需要一些小心，但绝对是可行的。

我在下面汇总了一个快速示例，可以帮助您入门：

```
// Header
@interface CustomTableViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
- (id)initWithStyle:(UITableViewStyle)tableViewStyle;

@property (nonatomic, readwrite, retain) UITableView* tableView;
@end

// Source
@interface CustomTableViewController()
@property (nonatomic, readwrite, assign) UITableViewStyle tableViewStyle;
@end

@implementation CustomTableViewController

@synthesize tableView;
@synthesize tableViewStyle = _tableViewStyle;

- (id)initWithStyle:(UITableViewStyle)tableViewStyle {
  if ((self = [super initWithNibName:nil bundle:nil])) {
    _tableViewStyle = tableViewStyle;
  }
  return self;
}

- (void)loadView {
  [super loadView];

  self.tableView = [[UITableView alloc] initWithStyle:self.tableViewStyle];
  self.tableView.autoresizingMask = (UIViewAutoresizingMaskFlexibleWidth
                                     | UIViewAutoresizingMaskFlexibleHeight);
  self.tableView.delegate = self;
  self.tableView.dataSource = self;
  [self.view addSubview:self.tableView];

  // Create your ad view.
  ...

  adView.autoresizingMask = (UIViewAutoresizingMaskFlexibleWidth
                             | UIViewAutoresizingMaskFlexibleTopMargin);
  [self.view addSubview:adView];

  [adView sizeToFit];
  self.tableView.frame = CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height - adView.frame.size.height);
  adView.frame = CGRectMake(0, self.view.bounds.size.height - adView.frame.size.height, self.view.bounds.size.width, adView.frame.size.height);

  [self.tableView reloadData];
}

- (void)viewDidUnload {
  self.tableView = nil;

  [super viewDidUnload];
}

- (void)viewWillAppear:(BOOL)animated {
  [super viewWillAppear:animated];
  NSIndexPath* selectedIndexPath = [self.tableView indexPathForSelectedRow];
  if (nil != selectedIndexPath) {
    [self.tableView deselectRowAtIndexPath:selectedIndexPath animated:animated];
  }
}

@end 
```

# c# - 在 MVC webAPI 解决方案中无法访问 ADO.NET 实体数据模型

> ID：11147104
> 
> 赞同：0
> 
> 时间：2012-06-21T21:34:04.410
> 
> 标签：c#, asp.net-mvc, ado.net

我的项目包括：MVC、WEB API 解决方案。

我从我的数据库模式生成了一个 ADO.NET 实体数据模型，它位于 app_code 文件夹中。

我试图从模型文件夹和控制器文件夹访问 ADO.NET 实体数据模型，但我无法访问它。

我应该在 App_Code 文件夹中有 ADO.NET 实体数据模型吗？

我们如何从 mvc 应用程序访问数据模型？

通常它就像 MydatabaseNameModel db = new MydatabaseNameModel(); 但是，这种方式是不可见的。

我是否需要在 webAPI 中导入某些内容以便 MydatabaseNameModel 变得可实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:51:08.067

检查您是否有一个 using 语句指向 EDMX 正在使用的命名空间。

或者

添加一个新的空项目，将模型添加到该项目，然后从 MVC 站点引用该项目（另外，不要忘记命名空间）

# sql-server - 存储过程不会触发最后一个命令

> ID：11147107
> 
> 赞同：1
> 
> 时间：2012-06-21T21:34:12.477
> 
> 标签：sql-server, tsql

在我们的 SQL Server（版本 10.0.1600）上，我编写了一个存储过程。

它没有抛出任何错误，并且在数据库中插入后返回**正确的值。**

但是，最后一个命令`spSendEventNotificationEmail`（发送电子邮件通知）没有运行。

我可以`spSendEventNotificationEmail`使用相同的数据手动运行脚本，并显示通知，所以我知道它有效。

我在存储过程中的调用方式有问题吗？

```
[dbo].[spUpdateRequest](@packetID int, @statusID int output, @empID int, @mtf nVarChar(50)) AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;
    DECLARE @id int
    SET @id=-1
    -- Insert statements for procedure here
    SELECT A.ID, PacketID, StatusID
    INTO #act FROM Action A JOIN Request R ON (R.ID=A.RequestID)
    WHERE (PacketID=@packetID) AND (StatusID=@statusID)

    IF ((SELECT COUNT(ID) FROM #act)=0) BEGIN -- this statusID has not been entered. Continue

        SELECT ID, MTF
        INTO #req FROM Request
        WHERE PacketID=@packetID

        WHILE (0 < (SELECT COUNT(ID) FROM #req)) BEGIN
            SELECT TOP 1 @id=ID FROM #req
            INSERT INTO Action (RequestID, StatusID, EmpID, DateStamp)
            VALUES (@id, @statusID, @empID, GETDATE())
            IF ((@mtf IS NOT NULL) AND (0 < LEN(RTRIM(@mtf)))) BEGIN
                UPDATE Request SET MTF=@mtf WHERE ID=@id
            END
            DELETE #req WHERE ID=@id
        END
        DROP TABLE #req

        SELECT @id=@@IDENTITY, @statusID=StatusID FROM Action

        SELECT TOP 1 @statusID=ID FROM Status
        WHERE (@statusID<ID) AND (-1 < Sequence)

        EXEC spSendEventNotificationEmail @packetID, @statusID, 'http:\\cpweb:8100\NextStep.aspx'

    END ELSE BEGIN

        SET @statusID = -1

    END

    DROP TABLE #act

END 
```

数据表如何连接的想法：

![我的数据库](../Images/f418468df55898aa6ab65cf43c619656.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:57:14.467

从您的评论中，我了解到您主要从事 C# 开发。一个基本测试是确保使用您期望的完全相同的参数调用 sproc

```
PRINT '@packetID: ' + @packetID
PRINT '@statusID: ' + @statusID
EXEC spSendEventNotificationEmail @packetID, @statusID, 'http:\\cpweb:8100\NextStep.aspx' 
```

这样你 1\. 知道 exec 语句已经到达 2\. 确切的值

如果这一切都有效，那么我非常好的候选人是您有权运行存储过程和调用它的（C#？）代码没有。我希望会抛出一个错误。

查看 EXEC 是否正常执行的快速测试是在它之后在虚拟表中进行插入。

**更新 1**

我建议添加 PRINT 语句，但实际上正如您所说，您不能（轻松）从 C# 中捕获它们。您可以做的是在您新创建的日志表中插入 2 个变量。这样您就可以知道从 C# 执行中流出的确切值。

至于如果您添加权限，为什么它现在可以工作，我无法给您一个现成的答案。SQL 安全性对我来说也不透明。但最好还是进一步研究一下自己。您必须同时添加访客**和**公众吗？它还有助于查看 spSendEventNotificationEmail 内部发生的情况。sproc 很有可能正在使用以前没有权限的资源。这可能是一个像表格这样的对象，也可能是另一个存储过程。安全性在很大程度上取决于上下文/设置，而不是像 SO 这样的 Q/A 网站解决的简单问题。

# .net - WF4 - Rehosted Workflow Designer - Host 可以在 DESIGN 时向活动公开服务/数据吗？

> ID：11147108
> 
> 赞同：4
> 
> 时间：2012-06-21T21:34:25.933
> 
> 标签：.net, workflow, workflow-foundation-4, designer, workflow-rehosting

我编写了一个重新托管 Workflow 4 Designer (System.Activities.Presentation.WorkflowDesigner) 的应用程序。发现活动并将其动态加载到工具箱中，以便将它们添加到图表中。我知道如何在执行时向活动公开服务，但我想知道在设计时是否有可能发生类似的事情。我的一些活动具有复杂的属性值编辑器，可以启动对话框以及加载数据库。我希望我的主机应用程序为我的活动提供信息，例如他们应该使用的连接字符串等。

有人知道这是否可能吗？我无法找到有关如何实现此目的的任何信息。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:29:47.083

您完全可以通过[WorkflowDesigner.Context](http://msdn.microsoft.com/en-us/library/system.activities.presentation.workflowdesigner.context.aspx)属性做到这一点。

此属性公开了可供您的 ActivityDesigners（以及任何其他可以获取 ModelItem 的人）使用的[EditorContext 。](http://msdn.microsoft.com/en-us/library/system.activities.presentation.editingcontext.aspx)您可以使用[Services](http://msdn.microsoft.com/en-us/library/system.activities.presentation.editingcontext.services.aspx)属性[发布您的自定义服务](http://msdn.microsoft.com/en-us/library/ee407838.aspx)以供在设计时使用。

# scala - 如何初始化具有多个操作的字段？

> ID：11147109
> 
> 赞同：2
> 
> 时间：2012-06-21T21:34:32.830
> 
> 标签：scala, constructor

```
class A (names: String*) {
  val namesBuffer: ListBuffer[String] = new ListBuffer[String]
} 
```

我想知道，如何在创建对象时将 names 数组的名称从主构造函数参数添加到 namesBuffer 字段？我是否必须创建一个辅助构造器才能这样做，还是有另一种方法告诉 Scala 在主构造器中执行操作？

注意：上面的例子是虚构的，我只是想知道，我怎样才能告诉主构造函数做一些比分配字段更多的操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:41:54.127

类定义主体中的每个语句都成为默认构造函数主体的一部分。

在您的示例中，您可以这样做：

```
class A (names: String*) {
  val namesBuffer: ListBuffer[String] = new ListBuffer[String]
  namesBuffer ++= names
} 
```

或更短：

```
class A (names: String*) {
  val namesBuffer: ListBuffer[String] = new ListBuffer[String] ++= names
} 
```

或者：

```
class A (names: String*) {
  val namesBuffer: ListBuffer[String] = ListBuffer[String](names: _*)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T22:14:40.323

正如 axel22 的回答所示，您可以在类主体的任何位置执行这些操作。

但是，使用单个表达式完全初始化该字段是 IMO 的好习惯。

当需要副作用时，您可以使用花括号制作一个块来实现此目的，这是一个具有最后一行值的表达式：

```
class A(names: String*) {
  val namesBuffer: ListBuffer[String] = {
    val buffer = new ListBuffer[String]
    buffer ++= names
    buffer
  }
} 
```

使用这种技术，您可以确保`namesBuffer`在完成初始化之前没有其他初始化逻辑访问该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:38:49.937

在 Scala 中，如果有意义的话，整个类定义实际上是默认构造函数。

你可以这样做：

```
class A (names: String*) {
  val namesBuffer: ListBuffer[String] = new ListBuffer[String]
  namesBuffer.add(names)
} 
```

如果它采用字符串数组，您还可以初始化名称缓冲区：

```
class A (names: String*) {
  val namesBuffer: ListBuffer[String] = new ListBuffer[String](names)
} 
```

# firefox - 无法在 Firefox 13.0.1 中安装 Firefox 扩展

> ID：11147120
> 
> 赞同：2
> 
> 时间：2012-06-21T21:35:16.390
> 
> 标签：firefox, firefox-addon, rdf

我正在开发一个 Firefox 扩展，它在 Firefox 版本 12.* 中一直运行没有任何问题。

今天我将 FF 更新到 13.0.1 版本并相应地更改了 install.rdf 文件：

```
<em:targetApplication>
    <RDF:Description>
        <em:id>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</em:id>
        <em:minVersion>1.0</em:minVersion>
        <em:maxVersion>13.0.*</em:maxVersion>
    </RDF:Description>
</em:targetApplication> 
```

但从那时起，将不会安装扩展程序。显示消息“-Extension name- cannot be installed because it is not compatible with Firefox 13.0.1”。我使用 Netbeans 的 foxbeans 插件创建了我的扩展的第一个虚拟版本（我曾经是 - 现在仍然是 Firefox 扩展开发的初学者），因此 install.rdf 和 install.js 文件会自动生成。如果您认为有帮助，请随时索取更多代码。

还有其他人有同样的问题吗？有什么可能的解释吗？

**解决了：**

这似乎是一个相当奇怪的 Firefox 错误。我发现问题是由我在扩展描述中放置的 & 号引起的：

```
<em:description>Demokritos Labeling & Filtering Client's Firefox Extension</em:description> 
```

如果我将以上内容更改为：

```
<em:description>Demokritos Labeling and Filtering Client's Firefox Extension</em:description> 
```

扩展安装正常。

这是一个小但相当奇怪的错误，我可能应该报告它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:00:12.293

你的扩展中有 updateURL 吗？

有一个开放的错误，如果您的 updateURL 不正确，您将收到版本错误：

[https://bugzilla.mozilla.org/show_bug.cgi?id=740378](https://bugzilla.mozilla.org/show_bug.cgi?id=740378)

# ruby-on-rails - Memcached Rails 集群配置

> ID：11147121
> 
> 赞同：1
> 
> 时间：2012-06-21T21:35:20.650
> 
> 标签：ruby-on-rails, ruby, memcached, cluster-computing

我在网上搜索过，但我找到的所有答案都很原始。假设我想在 3 个不同集群上的 Rails 应用程序中设置 memchached。我该如何配置这个？最好的方法是什么？提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:49:13.743

在您的`config/environments/production.rb`设置中，您的缓存存储具有多个服务器，如下所示：

```
config.cache_store = :mem_cache_store,
                     "memcached1:11211",
                     "memcached2:11211",
                     "memcached3:11211" 
```

这将设置单个 memcache 服务器集群。如果每个大小为 1GB，那么您将拥有 3GB 的总缓存空间。

有关更多信息，请参阅[使用 Rails 进行缓存。](http://guides.rubyonrails.org/caching_with_rails.html#activesupport-cache-memcachestore)

* * *

相反，如果您想在不与 Rails.cache 集成的情况下访问 3 个单独的 memcache 服务器，只需创建新`MemCache`连接。有关更多信息，请参阅[memcache-client 的自述](https://github.com/mperham/memcache-client)文件。

# php - 锂添加外部js文件查看

> ID：11147123
> 
> 赞同：0
> 
> 时间：2012-06-21T21:35:27.030
> 
> 标签：php, html-helper, lithium

在我们使用的蛋糕中

$this->html->script('jsfilenamewithdotjs');

将外部 js 文件添加到视图中我们如何使用锂做到这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T00:18:32.693

`echo $this->html->script('jquery.js');`返回一个`<script />`标签。如果文件名带有前缀`"/"`，则路径将相对于应用程序的基本路径。否则，路径将相对于您的 JavaScript 路径，通常是`webroot/js`.

对于外部脚本`$this->html->script('http://foo.com/bar.js');`

文档：[http://li3.me/docs/lithium/template/helper/Html::script()](http://li3.me/docs/lithium/template/helper/Html::script())

# jquery - 使用 jQuery 打印组合的 HTML

> ID：11147124
> 
> 赞同：1
> 
> 时间：2012-06-21T21:35:36.097
> 
> 标签：jquery, json, for-loop

我已经坐了很长时间来完成转换 javascript 对象并将其打印在页面上的相对简单的任务。然而，什么也没有出现。任何人都可以看到任何明显的缺陷吗？

```
<script>
$(document).ready(function() {
    $('#some_div').html(render_lists());
});

    function render_lists(){
var data = {
    "1": {
        "title": "Top 10",
        "0": "Number one",
        "1": "Number two"
    }
};
            var result_html = '';
            result_html+='<div class="row">';
            var i = 1;
            for(entry in data){
                result_html+='<div class="four columns" id="pane"'+i+'" style="display:none;"><div class="panel">';
                result_html+='<p>'+data[entry].title+'</p>';
                result_html+='</div><div class="box"><table width="100%">';
                delete data[entry].title;
                for(key in data[entry]){
                    result_html+='<tr><td>'+data[entry][key]+'</td></tr>';
                }
                result_html+='</table></div></div></div>';
                i++;
            }
            return result_html;
    }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:40:32.473

您的代码有效，只是您隐藏了 div。

[http://jsfiddle.net/5AyAd/](http://jsfiddle.net/5AyAd/)

```
for(entry in data){
    result_html+='<div class="four columns" id="pane"'+i+'" style="display:none;"><div class="panel">'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:38:49.120

将您的 .html(render_lists()) 更改为 .append(render_lists())

# android - 将上下文传递给助手类以在 Try/Catch 处显示 Toast

> ID：11147128
> 
> 赞同：1
> 
> 时间：2012-06-21T21:36:09.510
> 
> 标签：android, android-layout

我有一个 JSON 助手类。如果出现错误，我一直在尝试显示 Toast 消息，而不是强制关闭它。问题是，由于这是一个辅助类，它没有上下文并且无法显示 Toast。任何人都可以帮助我在如何传递上下文方面朝着正确的方向前进吗？

```
 public class JSONfunction {

public static JSONObject getJSONfromURL(String url) {
    InputStream is = null;
    String result = "";
    JSONObject json = null;

    // HTTP Post
    try {

        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch (Exception e) {

        Log.e("JSONfunction", "Error converting internet " + e.toString());
    }

    // Convert Response to String
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    } catch (Exception e) {
        Log.e("JSONfunction", "Error converting result " + e.toString());
    }

    try {
        json = new JSONObject(result);

    } catch (JSONException e) {
        Log.e("JSONfunction", "Error parsing data " + e.toString());
    }

    return json;
}

public static JSONArray getJSONArray(String string) {
    // TODO Auto-generated method stub
    return null;
}

public static String getString(String string) {
    // TODO Auto-generated method stub
    return null;
}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:41:12.177

刚刚在你的方法中添加了一个上下文......`public static JSONObject getJSONfromURL(String url, Context context) { Toast.makeText(context...);}`然后从一个活动或其他上下文中调用它......从一个活动：`getJSONfromURL(url, this);`因为这可能不会在 UIThread 中完成，那么它将在一个线程或 AsyncTask 中，如果那样的话在 Activity 中，您可以这样做：`getJSONfromURL(url, MyHappyActivity.this);`另外，考虑使用 Application 而不是 Activity... getApplicationContext() 从 Activity 将为您提供该上下文：`getJSONfromURL(url, getApplicationContext());`如果从 Activity 中调用。

# google-apps-script - 你如何“使用”库版本号

> ID：11147134
> 
> 赞同：0
> 
> 时间：2012-06-21T21:36:26.223
> 
> 标签：google-apps-script

我正在玩 Google Apps 脚本“库”的概念。

我创建了一个库。我设置了它的初始版本（它分配了版本#1）。我在库中添加了一些附加功能，并将版本号更新为#2。

然后我访问了我的测试电子表格。我希望看到可供选择的“版本#2”。但我能看到的只是版本#1。所以我删除了资源，认为电子表格无法访问新版本。我获得了项目的“钥匙”并在钥匙上做了“选择”。包括同一行。当我去查看下拉列表中的版本时，只出现了第一个版本（#1）。我选择了那个版本（我别无选择）。我运行了访问新添加功能的测试并且它们工作（即使在版本＃1下）。

设置新版本有影响吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T00:21:08.750

我认为你图书馆的更新需要一些时间才能出现在其他地方。等待 5-10 分钟后，您是否再次尝试过？

# javascript - Backbone.js 路由器回调在除 1 个特定 url 段之外的所有 URL 段上触发

> ID：11147147
> 
> 赞同：0
> 
> 时间：2012-06-21T21:37:47.217
> 
> 标签：javascript, backbone.js, url-routing, pushstate

我正在创建我的第一个使用 Backbonejs 路由器的应用程序。

> [http://backbonejs.org/#Router](http://backbonejs.org/#Router)

我很好奇，是否可以定义一个为除一个之外的每个 url 段触发的路由？

就我而言，如果 url 为 ，我不希望触发此回调`http://www.example.com/login`，但我确实希望它触发

*   [http://www.example.com/](http://www.example.com/)
*   [http://www.example.com/foo](http://www.example.com/foo)
*   [http://www.example.com/bar](http://www.example.com/bar)
*   等等

我的路由器是这样的：

```
var SuiteRouter = Backbone.Router.extend({
    // ################################ Defined Routes ################################
    routes: {
        "":      "landing",     //Suite primary page, initiates menus and other suite-wide items, initiated everywhere except login
        "login": "login"
    },

    // ########################### Route Callbacks ################################
    landing: function() {
        console.log(arguments);
        console.log('landing');
    },
    login: function() {
        console.log(arguments); //<--- nothing useful, empty array
        console.log('login');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T21:14:45.630

Yes you can.

```
var SuiteRouter = Backbone.Router.extend({
    // ################################ Defined Routes ################################
    routes: {
        "":      "landing",     //Suite primary page, initiates menus and other suite-wide items, initiated everywhere except login
        "login": "login"
    },

    // ########################### Route Callbacks ################################
    landing: function() {
        console.log(arguments);
        console.log('landing');
    },
    login: function() {
        console.log(arguments); //<--- nothing useful, empty array
        console.log('login');
    }
});

var router = new Router();
router.on("route", function(route, params) {
console.log(route); //will be called every route change in addition to the appropriate other callbacks.
if(route!=="login") {
//do something
}
}); 
```

# android - 定期重复 android 唤醒警报的影响？

> ID：11147149
> 
> 赞同：2
> 
> 时间：2012-06-21T21:37:55.930
> 
> 标签：android, alarmmanager, wakeup

我有一个带有以下警报设置的 android 应用程序：警报 A 的类型为 RTC_WAKEUP，使用[commonsguy 唤醒](https://github.com/commonsguy/cwac-wakeful)模式启动服务并以 1 分钟的间隔重复。警报 B 属于 RTC 类型，启动服务并以 10 秒的间隔重复。

我的问题如下：

1.  当手机进入睡眠状态时，例如它在整夜未使用的情况下关闭屏幕，是否保证警报 B 会在整个晚上每分钟触发一次，因为警报 A 每分钟都会唤醒设备？（忽略警报 B 可能无法完全执行到完成的事实，因为它缺少唤醒锁）
2.  警报 A 是否会因为如此频繁地醒来并导致触发其他 RTC 警报的冲击而导致严重的电池消耗？我猜它依赖于具有 RTC 类型警报的其他应用程序，但是您有很多其他具有 RTC 警报的应用程序的可能性有多大？
3.  我一直在尝试通过使用[Battery Monitor Widget](https://play.google.com/store/apps/details?id=ccc71.bmw&hl=en)监控设备来调查此设置对电池消耗的影响。我首先在未安装应用程序的情况下监控设备一段时间，并记录该期间的平均毫安电流。然后我在安装应用程序的情况下运行相同的测试并比较结果。但我怀疑消耗量取决于安装的其他应用程序，并且这些应用程序利用警报 A 定期唤醒设备。这个对吗？关于更好的测试方法有什么建议吗？

希望这些都是简单的问题，并提前感谢！

多姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:05:32.667

> 警报 A 属于 RTC_WAKEUP 类型，使用 commonsguy 唤醒模式启动服务并以 1 分钟的间隔重复。

呸。

> 警报 B 属于 RTC 类型，启动服务并以 10 秒的间隔重复。

更恶心。

> 当手机进入睡眠状态时，例如它在整夜未使用的情况下关闭屏幕，是否保证警报 B 会在整个晚上每分钟触发一次，因为警报 A 每分钟都会唤醒设备？（忽略警报 B 可能无法完全执行到完成的事实，因为它缺少唤醒锁）

我不会指望它。由于事件的频率和 A 运行的时间窗口可能很短，我会将这种行为定义为有点不确定。

> 警报 A 是否会因为如此频繁地醒来并导致触发其他 RTC 警报的冲击而导致严重的电池消耗？

我怀疑这是否会令人愉快，尽管（如上所述）我不知道 RTC 警报的影响。你正在做的工作的影响可能会使事情变得更糟。

> 但我怀疑消耗量取决于安装的其他应用程序，并且这些应用程序利用警报 A 定期唤醒设备。这个对吗？

它肯定不会有帮助。

> 关于更好的测试方法有什么建议吗？

让它运行一天，看看设置的电池部分告诉你什么。

# c# - 在这种情况下正确的 SQL 语法

> ID：11147155
> 
> 赞同：1
> 
> 时间：2012-06-21T21:38:31.713
> 
> 标签：c#, sql

我有这个表主要：

```
"Record ID",Status,Placement,Private,Category,Note,Description,"Due Date",Completed,Priority,Blob,"Repeat On Complete Date","Complete Date","Alarm Set","Alarm Time","Alarm Advance","Repeat Start Date","Repeat Info" 
```

示例条目

```
14340973,132,2147483647,False,3,Any note,Any Description,1956556799,False,1,System.Byte[],False,1956556799,False,1956470400,0,0, 
```

在 SQL 中插入的正确语法是什么？

这就是我所做的：

```
string strSQL = "INSERT INTO Main ( Record ID , Status , Placement , Private , Category , Note , Description , Due Date , Completed , Priority , Blob , Repeat On Complete Date , Complete Date , Alarm Set , Alarm Time , Alarm Advance , Repeat Start Date , Repeat Info ) VALUES (@Rid,132, 2147483647, False,, @Kat, @Not, @Bes, 1956556799, False, @Pri, '', 1956556799, False, 1956470400, 0, 0, '', '')"; 
        MessageBox.Show(strSQL);
        OleDbCommand cmd = null;
        try
        {
            cmd = new OleDbCommand(strSQL, AufgabenVerbindung);
        }
        catch (Exception vvxc)
        {
            Console.WriteLine(vvxc.Message);
        }
        OleDbParameter Kat, Not, Bes, Pri, Rid;
        Rid = cmd.Parameters.Add("@Rid", OleDbType.BigInt);
        Kat = cmd.Parameters.Add("@Kat", OleDbType.TinyInt);
        Not = cmd.Parameters.Add("@Not", OleDbType.VarChar);
        Bes = cmd.Parameters.Add("@Bes", OleDbType.VarChar);
        Pri = cmd.Parameters.Add("@Pri", OleDbType.TinyInt);
        Rid.Value = Record_ID + 1;
        Kat.Value = 5;
        Not.Value = txtNotiz.Text;
        Bes.Value = txtBeschreibung.Text;
        Pri.Value = pri;
        cmd.ExecuteNonQuery(); 
```

cmd.ExecuteNonQuery() 抛出异常

当前代码： http: [//pastebin.com/16FwUhLr](http://pastebin.com/16FwUhLr)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T21:43:44.280

我看到两个问题。首先，您有带空格的列名，如果这是针对 SQL Server 的，请尝试将它们包装`[]`如下：

```
string strSQL = "INSERT INTO Main ( [Record ID] , Status , Placement , Private , Category , Note , Description , [Due Date] , Completed , Priority , Blob , [Repeat On Complete Date] , [Complete Date] , [Alarm Set] , [Alarm Time] , [Alarm Advance] , [Repeat Start Date] , [Repeat Info] ) VALUES (@Rid,132, 2147483647, False,, @Kat, @Not, @Bes, 1956556799, False, @Pri, '', 1956556799, False, 1956470400, 0, 0, '', '')"; 
```

如果这是 MySQL，我相信您需要用 ` 包装列名

**这**部分：`False,, @Kat,` 也是无效的。尝试删除多余的逗号或在其中输入一个值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T21:42:51.400

`[]`用那些包含空格的字段包装

例如

`[Record ID]`和`[Due Date]`

# vim - vim：在插入模式下更改状态行颜色

> ID：11147157
> 
> 赞同：4
> 
> 时间：2012-06-21T21:38:40.507
> 
> 标签：vim

当我进入插入模式时，我发现这个片段可以改变状态行的颜色：

```
" first, enable status line always
set laststatus=2

" now set it up to change the status line based on mode
if version >= 700
  au InsertEnter * hi StatusLine term=reverse ctermbg=5 gui=undercurl guisp=Magenta
  au InsertLeave * hi StatusLine term=reverse ctermfg=0 ctermbg=2 gui=bold,reverse
endif 
```

现在，当我进入插入模式时，状态行变为紫色，但我想将其更改为红色。我用红色换了洋红色，但它不起作用..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T21:46:44.217

如果您使用`:help`，您可以找出每个属性的含义。

`guisp`用于突出显示的“特殊”颜色。在这种情况下，它是底卷曲效果的颜色。听起来您想更改实际的突出显示颜色，所以试试这个：

```
au InsertEnter * hi StatusLine term=reverse ctermbg=5 gui=undercurl guisp=Magenta guibg=Red 
```

事实上，如果你只使用 GUI Vim，你不需要任何终端选项：

```
au InsertEnter * hi StatusLine guibg=Red
au InsertLeave * hi StatusLine guibg=#ccdc90 
```

对于`InsertLeave`，我只是以我的正常`StatusLine`颜色为例。您应该能够在您的配色方案文件中找到它。

顺便说一句，`guibg`实际上影响文字颜色，而`guifg`影响线条颜色......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T23:33:10.203

我没有看到任何提及您是使用 gui 版本的 Vim，还是仅在终端中使用 Vim。

如果您在终端中，则需要更改`"ctermbg=5"`为`"ctermbg=red"`。在这种情况下`"5"`转换为`"DarkMagenta"`. Vim 将接受这些属性的数字或颜色名称。

更多信息可以在Vim 语法文档的[Highlight 命令下的第 2 节和第 3 节中找到。](http://vimdoc.sourceforge.net/htmldoc/syntax.html#%3ahighlight)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T19:26:49.767

很好的解决方案：[电力线插件](https://github.com/Lokaltog/vim-powerline)

![正常模式](../Images/239448f6af82e592ca35c391013295e5.png) ![插入模式](../Images/9408ecaa53dc6f81b3150bf20da4cdf9.png)

# c++ - 如何使用 Direct3D 设备管理器？

> ID：11147160
> 
> 赞同：6
> 
> 时间：2012-06-21T21:38:49.883
> 
> 标签：c++, direct3d, ms-media-foundation, direct3d9, dxva

我想在我的 Direct3D 应用程序中的多个线程和对象之间共享一个 Direct3D 设备。我遇到了 Direct3D 设备管理器，它看起来像我想要的，虽然我没有做任何视频处理或视频加速：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa965267( v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965267(v=vs.85).aspx)

在我的代码中，我正在执行以下操作：

```
 // Create the device manager
  UINT resetToken = 0;
  IDirect3DDeviceManager9* deviceManager = NULL;
  if (FAILED(DXVA2CreateDirect3DDeviceManager9(&resetToken, &deviceManager)))
    return false;

  // Add the device to the device manager
  if (FAILED(deviceManager->ResetDevice(device, resetToken)))
    return false;

  deviceManager->AddRef(); 
```

我的问题是，一旦我创建了 Direct3D 设备管理器，如何在不传递指向设备管理器的指针的情况下与其他对象共享 direct3d 设备管理器？微软明确表示要执行以下操作，但我不知道以下内容的真正含义是什么：

> 设备所有者必须为其他对象提供一种方法来获取指向 IDirect3DDeviceManager9 接口的指针。标准机制是实现 IMFGetService 接口。服务 GUID 是 MR_VIDEO_ACCELERATION_SERVICE。

有人可以告诉我如何使用 IMFGetService 接口共享设备管理器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T03:37:50.030

如果您不进行任何视频处理，那么我认为实现和/或使用该`IDirect3DDeviceManager9`界面毫无意义。

只需实现您自己的方式来管理 Direct3D 设备的生命周期，使接口指针可用于您的对象/线程并进行同步。Direct3D 设备不是任何一种只能通过`IDirect3DDeviceManager9`. 它就像任何其他资源一样。如果你正确地初始化它，你甚至可以从不同的线程同时调用某些方法（即几乎所有不依赖可能被另一个线程改变的设备状态的东西）。

使接口指针可用就像拥有一个保存指针的单例一样简单。或者，如果您的对象/线程已经以某种方式协作，那么它们必须已经具有某种交换信息的方式。所以我想你应该能够扩展你已经拥有的东西，让对象/线程访问 Direct3D 设备。并且可以通过使用`CRITICAL_SECTION`.

如果你真的想使用`IDirect3DDeviceManager9`，那么——据我所知——你必须`IMFGetService`在所有你想访问`IDirect3DDeviceManager9`. 实现该`GetService`函数，以便在请求`MR_VIDEO_ACCELERATION_SERVICE`/`IDirect3DDeviceManager9`时返回一个指向管理您的 Direct3D 设备的对象的接口指针。

* * *

**编辑：**关于代码示例：我希望这里给出的解释就足够了。在多个线程之间共享东西是我不敢尝试用简短的代码示例来解释的。如果您知道如何编写多线程应用程序，那么使用 Direct3D 设备与使用其他资源的方式没有什么不同。而且，如果您不知道如何编写多线程应用程序，那么该主题对于单个 stackoverflow 答案来说太复杂了。

关于为什么MS建议使用`IDirect3DDeviceManager9`...的问题，我不知道这样的一般性建议。仅在进行视频处理时推荐使用（使用 DXVA、EVR 等）。或者更像是强制性的；我不确定您是否可以在不使用 D3D 设备管理器的情况下与增强型视频渲染器共享 D3D 设备。毕竟，这就是 D3D 设备管理器的用途。使用 VMR9 与渲染器共享设备只能通过两种方式实现：

*记录的方式：*仅从 VMR9 的“当前”回调访问设备。这是相当有限的 - 例如，您受限于视频的帧速率。

*未记录的方式：*不要调用`IVMRFilterConfig9::SetNumberOfStreams`并且只连接一个输入流。这样 VMR9 不会切换到“混音器模式”，并且当不在“混音器模式”时，VMR9 不会改变任何设备状态。因此，如果 D3D 设备是多线程初始化的，那么您可以在 VMR9 使用同一设备时自由使用 D3D 设备。

此外，对于 VMR9，根本不可能在另一个 DirectShow 过滤器中使用 D3D 设备。D3D 设备管理器对此进行了改进，使过滤器和您自己的应用程序代码能够使用 D3D 设备 - 包括更改状态。但是，如果您自己实现将使用 D3D 设备的每个组件，那么使用 D3D 设备管理器实际上没有任何意义。即使您使用需要 D3D 设备的第三方组件，您也只能在这些组件支持的情况下使用 D3D 设备管理器。除非这些组件碰巧是 DirectShow 或 MediaFoundation 过滤器/组件，否则情况可能并非如此。

# opengl - glDrawElements 中如何处理索引数据？

> ID：11147166
> 
> 赞同：1
> 
> 时间：2012-06-21T21:39:19.087
> 
> 标签：opengl, vertex-array, vertex-attributes

我知道当 glDrawElements 被调用时，它使用索引缓冲区来确定以什么顺序绘制哪些顶点。我的问题是这些索引如何应用于纹理、法线和颜色属性。是否可以为每个顶点应该使用的纹理坐标和法线设置另一个索引数组。或者我是否必须创建法线和纹理坐标缓冲区，以便它们与正在绘制的顶点对齐？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T21:43:44.453

> 是否可以为每个顶点应该使用的纹理坐标和法线设置另一个索引数组。

不，有一个很好的理由：

> 或者我是否必须创建法线和纹理坐标缓冲区，以便它们与正在绘制的顶点对齐？

不要试图将顶点、法线、纹理坐标等视为分配给顶点（-位置）的不同向量。顶点实际上是一个复合向量，它涵盖了所有这些属性。旧术语源于固定功能管道。现代 OpenGL 只知道通用顶点属性。

所以每个索引都指向一个特定的顶点向量。如果任何属性存在差异，则它是不同的顶点，因此将被赋予不同的索引。

# powershell - 使用 Powershell 编辑 WMI 注册表

> ID：11147175
> 
> 赞同：1
> 
> 时间：2012-06-21T21:40:22.530
> 
> 标签：powershell

我正在尝试使用 powershell 清空注册表项。当我运行以下代码时，一切似乎都很好，没有错误，但是在检查注册表时，键的内容仍然存在。

我还想将目标计算机添加到脚本中以从目标计算机中删除失效的密钥。

知道我做错了什么吗？多谢你们。

```
$hklm = 2147483650
$key = "SOFTWARE\Microsoft\MSLicensing"
$wmi = [wmiclass]"root\default:stdRegProv"
$wmi.DeleteKey($hklm,$key) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:11:38.373

```
$hklm = 2147483650
$rootKey = "SOFTWARE\Microsoft\MSLicensing"
$wmi = [wmiclass]"root\default:stdRegProv"
#$wmi.DeleteKey($hklm,$key)

[string[]]$subkeys = $wmi.EnumKey($hklm, $key).sNames

foreach( $subkey in $subkeys ) {

    $key = $rootKey + "\$subkey"

    $wmi.DeleteKey($hklm, $key)
}

$wmi.DeleteKey($hklm, $rootKey) 
```

您的代码失败的原因是您尝试删除的键下方有键。

上面的代码应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:59:31.363

cd hklm:\SOFTWARE\Microsoft\MSLicensing remove-item 2147483650 -whatif

# html - 在 div 内垂直对齐图像和文本

> ID：11147177
> 
> 赞同：0
> 
> 时间：2012-06-21T21:40:37.713
> 
> 标签：html, css, positioning, vertical-alignment

是否可以通过绝对/相对定位在 div 内垂直对齐图像和文本的唯一方法？

我需要这样做，并且我正在尝试使用尽可能少的类/hacks。

是唯一的其他方法，例如 display:table-cell; 垂直对齐：中间；？

示例代码：

[http://jsfiddle.net/ndreckshage/UYxXG/](http://jsfiddle.net/ndreckshage/UYxXG/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:57:34.057

一种方法是使用**display: table-cell** 和**vertical-align: middle**。

看一个例子：

[http://jsfiddle.net/UYxXG/3/](http://jsfiddle.net/UYxXG/3/)

这种方法的一个问题是，IE7 不支持属性“table-cell”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T12:57:05.877

上面发表在评论中，但此代码适用于任何有兴趣的人--->

[http://jsfiddle.net/ndreckshage/7SV9f/](http://jsfiddle.net/ndreckshage/7SV9f/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T00:23:35.803

Chris Coyier 有一篇关于 CSS 技巧的精彩文章，展示了如何使用 CSS 垂直居中单行和多行文本。[http://css-tricks.com/vertically-center-multi-lined-text/](http://css-tricks.com/vertically-center-multi-lined-text/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T21:46:00.823

垂直对齐是一种方式，绝对/相对定位是另一种方式，但也有 html align 属性。[http://www.w3schools.com/html/tryit.asp?filename=tryhtml_image_align](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_image_align)

在我看来，使用vertical-align 添加到你的css 是最聪明的方法。

```
.test
vertical-align: middle; 
```

# powershell - 输出中每个其他字符之间的 NUL 字节

> ID：11147179
> 
> 赞同：14
> 
> 时间：2012-06-21T21:40:57.463
> 
> 标签：powershell, encoding

我正在使用 Ruby 读取文件并将其打印到标准输出，将输出重定向到 Windows PowerShell 中的文件。

但是，当我检查文件时，我得到这个作为输入：

```
PS D:> head -n 1 .\inputfile
<text id="http://observer.guardian.co.uk/osm/story/0,,1009777,00.html">         <s>             Hooligans       NNS     hooligan
                ,       ,       ,               unbridled       JJ      unbridled               passion NN      passion
-       :       -               and     CC      and             no      DT      no              executive       JJ      executiv
e               boxes   NNS     box             .       SENT    .               </s> 
```

...然而这对于输出：

```
PS D:> head -n 1 .\outputfile
ÿ_< t e x t   i d = " h t t p : / / o b s e r v e r . g u a r d i a n . c o . u k / o s m / s t o r y / 0 , , 1 0 0 9 7 7 7 , 0
0 . h t m l " >                  < s >           H o o l i g a n s       N N S   h o o l i g a n                 ,       ,
 ,               u n b r i d l e d       J J     u n b r i d l e d               p a s s i o n   N N     p a s s i o n
 -       :       -               a n d   C C     a n d           n o     D T     n o             e x e c u t i v e       J J
 e x e c u t i v e               b o x e s       N N S   b o x           .       S E N T         .               < / s > 
```

这怎么可能发生？

* * *

**编辑**：因为我的问题与 Ruby 没有任何关系，所以我删除了 Ruby 代码，并包括了我对 Windows shell 的使用。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-22T00:22:44.200

在 PowerShell`>`中实际上与 Out-File 相同，`| Out-File`并且 Out-File 默认为 Unicode 编码。试试这个而不是使用`>`：

```
... | Out-File outputfile -encoding ASCII 
```

# css - 当窗口缩小时CSS向右填充

> ID：11147185
> 
> 赞同：1
> 
> 时间：2012-06-21T21:41:38.523
> 
> 标签：css, whitespace

我的档案和搜索页面右侧有填充，我相信它与我的 body 元素有关，但是我不太确定这些页面与网站上的其他页面有什么不同，这些页面都很好风格明智，因为它们都使用相同的格式。[这是一个wordpress网站。](http://www.averylawoffice.ca/2012/04)正如我所说，它只发生在这个页面和搜索页面以及所有其他页面都很好，所以我对它在做什么感到困惑。

```
html { font-size: 100%; overflow-y: scroll; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; background: url(img/BG.jpg) repeat; min-width:1024px; }

body { margin: 0px; padding 0px; font-size: 13px; line-height: 1.231; background: url(img/NAV-bg.jpg) top repeat-x;}

header { width: 960px; height: auto; margin: 0 auto; display: block;}

#container { width: 960px; margin: 20px auto; padding: 0 1.5em;}

aside { width: 260px; height: auto; float: left; position: relative;}

#main { width: 650px; height: auto; float: right; position: relative;}

#footer { width: 100%; min-width:1024px; display: block; height: 503px; background: url(img/FOOTER-bg.jpg) repeat-x; background-color: #821d20; position: relative; top: 100px; } 
```

如果您减小窗口的大小，您会注意到页面底部的滚动条出现，然后右侧的填充开始形成。如果你让你的窗口更大，那么填充空间就会消失，底部的滚动条也会消失。我是否以任何方式限制了我的身体标签以使这种情况发生？

我已经查看了这个，但我已经定义了最小宽度。 [当浏览器调整为较小的窗口时，网站的页面右侧有奇怪的空白](https://stackoverflow.com/questions/4612307/website-has-strange-whitespace-on-right-side-of-the-page-when-the-browser-is-res)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:17:28.160

在`style.css`第 108 行的文件中，`width`从标题标记中删除该属性以修复水平滚动条问题。

**固定的CSS：**

```
header { height: auto; margin: 0 auto; display: block;} 
```

为了[**查看，Firefox 浏览器中的 3D 视图**](http://blog.mozilla.org/blog/2012/03/13/firefox-adds-new-developer-tools-and-add-on-sync/)将标题显示为灰色条，这是您问题的根源。创建文本的其他样式不受影响。 ![在此处输入图像描述](../Images/48f0d00bba83353a64ac63e96c91d3de.png)

**提示：**右键单击上面的图像并在新选项卡中查看以查看原始大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:52:08.833

啊，如果我正确理解您的问题，似乎是 tag `header`，特别是它的 style `width: 960px`，是造成这种特殊情况的原因。标题周围的包含 div `#main`，只有`width: 650px`. 结果，标题的多余宽度会导致它超出 div 的边缘。

它似乎只在较小的屏幕宽度上显示为填充的原因是因为包含所有内容的 div`#container`以它的边距为中心 - 所以在浏览器变薄之前，超宽标题的效果不会变得明显足以使其右边缘开始与标题的右侧重叠。

我建议不要通过仅从`width: 960px`标题样式中删除标题来解决此问题（这可能会弄乱实际需要标题标签宽度的网站），而是建议为所有有问题的标签添加一个覆盖类，可能在`.archive-header { width: auto; }`. 但我想解决方案取决于您，因为您可能比我更了解该网站。

我希望这有帮助！（我真的这样做了，否则你会白白读完这一切！对不起，如果你读了......）对于未来，尝试下载[Firebug for Mozilla Firefox](http://getfirebug.com/)，它有一个方便的元素检查器，可以让你玩转样式元素，看看什么有效。它应该可以帮助您自己发现这些类型的问题，以便您可以更快地解决它们。

# c# - 我是否可以忽略此异步调用缺少等待的编译器警告？

> ID：11147187
> 
> 赞同：30
> 
> 时间：2012-06-21T21:41:49.537
> 
> 标签：c#, windows-runtime, windows-store-apps, async-await

当我的 Metro 应用程序的一部分发生异常时，我会触发以下方法

```
void Model_ExceptionOccured(Exception ex)
{
    var dlg = new Windows.UI.Popups.MessageDialog("An exception occured during verification: " + ex.Message, "Exception");
    dlg.ShowAsync();
} 
```

'dlg.ShowAsync()' 调用是异步的，但我不想等待结果。编译器会为它生成一个警告：

`Because this call is not awaited, execution of the current method continues before the call is completed. Consider applying the 'await' operator to the result of the call.`

我应该关心吗？除了摆脱警告之外，还有什么理由我应该添加 await 关键字？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-27T15:36:16.530

根据下面的链接，alexm 给出的答案是不正确的。在未等待的异步调用期间抛出的异常将丢失。要消除此警告，您应该将异步调用的 Task 返回值分配给一个变量。这确保您可以访问任何抛出的异常，这些异常将在返回值中指示。

[http://msdn.microsoft.com/en-us/library/hh965065(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/hh965065(v=vs.110).aspx) (VB.NET)

[http://msdn.microsoft.com/en-us/library/hh873131.aspx](http://msdn.microsoft.com/en-us/library/hh873131.aspx) (C#)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T21:58:00.550

这样做的问题是，如果代码中的`dlg.ShowAsync();`抛出异常，它将未被处理，并且稍后将由 Finalizer 线程重新抛出，这*可能会*导致您的程序终止。

实际发生的情况取决于**.NET 异常策略**

[MSDN上的这篇文章](http://msdn.microsoft.com/en-us/library/dd997415.aspx)提到了这一点：

> 如果您不等待传播异常的任务或访问其 Exception 属性，则在对任务进行垃圾收集时，将根据 .NET 异常策略升级异常。

当 VS 2012 最终发布时，未处理任务异常的默认策略从终止进程更改为忽略异常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-26T20:29:11.030

我遇到了同样的问题，这是我的解决方案：

我创建了一个 Task 对象，将异步函数的输出分配给 Task 对象，并使用 Timer 定期检查任务的状态。

这是一个简短的示例：（在我的 Update_Click 事件处理程序中）

```
StatusLabel.Text = "Preparing " + feedArticleList1.Feed.Title;
UpdateCheck.Enabled = true;
UpdateTask = feedArticleList1.Feed.UpdateFeedAsync(); 
```

稍后，在我的计时器的事件处理程序中，我检查了 UpdateTask.Status：

```
switch (UpdateTask.Status)
{
    case TaskStatus.Canceled:
    case TaskStatus.Created:
    case TaskStatus.Running:
    case TaskStatus.WaitingForActivation:
    case TaskStatus.WaitingForChildrenToComplete:
    case TaskStatus.WaitingToRun:
        StatusLabel.Text = UpdateTask.Status.ToString();
        break;
    case TaskStatus.RanToCompletion:
        StatusLabel.Text = "Update Complete " + DateTime.Now.ToShortTimeString();
        UpdateCheck.Enabled = false;
        break;
    case TaskStatus.Faulted:
        throw (UpdateTask.Exception);
    default:
        break;
} 
```

# android - 在身体（Android AndEngine）对精灵进行操作后，如何获取精灵的坐标？

> ID：11147190
> 
> 赞同：0
> 
> 时间：2012-06-21T21:41:56.027
> 
> 标签：android, sprite, center, andengine

我正在使用 AndEngine 制作游戏。用户在触摸屏幕并可以拖动它时创建一个精灵。一旦他抬起手指，精灵就会与一个物理实体相连，这样它就会落到屏幕底部并与其他已创建的精灵发生反应。但是，我需要弄清楚创建的精灵何时击中另一个精灵。由于它们是圆圈，我不能使用collideswith()。我试图只使用 distnace 公式来查看它们何时接触，但我需要获取已经创建的精灵的中心坐标。例如，如果我使用 mySprite[0].getX()，（0 是一个已经创建的精灵），它会在身体附加到它之前返回精灵的 X 值。当精灵最终落在地上并相互反弹时，我如何找到中心的坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:08:42.830

我认为你必须设置接触监听器来检测你的枢轴体与其他身体以及地面身体的碰撞。您必须使用 mBody.getPosition() 方法获取身体位置，并使用 PhysicsConstant.PIXEL_TO_METER_RATIO 将其转换为屏幕坐标。

# gcc - 哪个是最优化的 C/C++ 编译器？

> ID：11147195
> 
> 赞同：1
> 
> 时间：2012-06-21T21:42:12.040
> 
> 标签：gcc, llvm, gpl, clang

我一直在用 gcc 编译我的 C/C++ 代码，但是我最近才意识到它不是唯一的免费编译器。

我一直在玩切换，因为其中一些其他编译器，尤其是 clang，似乎显示出很多希望。我对我的编译器的标准是立即符合 C99 标准，随着标准变得越来越普遍，标准也越来越多，而且它是免费和开源的，并且尽可能优化地编译我的代码。快速编译对我来说不是那么重要，但总是一个很好的加分项。也就是说，如果有任何编译器似乎很快就会超过 gcc，我想知道现在是否值得为了学习而切换。

我将主要使用它来编译 C++ 代码，所以这对我来说优先于 C。我将在 linux 上为 linux 构建，所以一个好的 CLI 是必须的。只要二进制文件质量好，我不介意某种程度的不稳定性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T09:00:34.043

没有适合所有项目、目的和期望的最佳编译器。

*   每个项目（包括像`gcc`or之类的编译器项目`llvm`）都有略微不同的优先级（例如，支持最新的语言标准、标准纯度与性能、编译性能与运行时性能等）。
*   有许多基准和方法来比较它们。然而，通常，如果一个人在编译一个程序时获胜（对于胜利的任意定义），通常存在另一个程序，而另一个编译器获胜（对于胜利的相同定义）。
*   当与不同的优化选项一起使用时，前一点也适用于相同的编译器。一些优化有时（希望更频繁:-）会有所帮助，但有时（对于其他代码）它们实际上会损害性能。
*   由于没有使用相同级别的优化等，编译器基准也**总是**受到批评，因为比较文章的某些读者实际上总是希望其他方面成为基准。这是因为每个编译器都有不同的默认优化级别，在不同的优化级别上使用不同的优化，相同的优化在不同的编译器中实现不同，并且某些优化完全只在某些编译器中支持。
*   结果在不同的平台或 CPU 型号上也可能不同。
*   两者`gcc`和`llvm`都非常活跃，因此它们之间的任何比较在发布时都已经过时了。

这一切也导致开发人员也将他们的个人（不）喜欢投射到一个或其他编译器上，有时会导致激烈的战争。所以你能得到的唯一答案是：“这取决于。”

# iphone - 动画 UIViews 以获得交叉淡入淡出效果不能很好地工作

> ID：11147200
> 
> 赞同：4
> 
> 时间：2012-06-21T21:42:43.610
> 
> 标签：iphone, ios, animation, uiview, uideviceorientation

我已经成功创建了一个从 tabBar 选择中显示的图标菜单。您可以纵向或横向查看此菜单。

由于屏幕上的空间，我已经制作了它，以便在纵向中您可以查看 4x4 图标..但是由于在横向查看时的大小，这不能很好地工作..所以我做了它以便您可以查看 2 行6 和 1 行 4。因此，我决定为菜单创建两个 UIView，当设备旋转时，我在两个视图之间切换。

即如果纵向当前和设备旋转加载横向和卸载纵向，反之亦然。

这是我用来更改设备旋转视图的代码，它工作得非常好（可能不是最好的代码，但它是我能做的最好的）

```
if  ([[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationPortrait)
        {
            if([jumpBarContainerLandscape superview])
            {
            // Device is changing from landscape to protrait change views to fit
            // load landscape view
            jumpBarContainerPortrait = [[UIView alloc] initWithFrame:CGRectMake(0.0, (367 - jumpBarHeightPortrait), 320.0, (jumpBarHeightPortrait + 49.0))];
            jumpBarContainerPortrait.backgroundColor = [UIColor scrollViewTexturedBackgroundColor];
            jumpBarContainerPortrait.alpha = 0.0;

            // add jumpbar container to view
            [self.view insertSubview:jumpBarContainerPortrait belowSubview:actionTabBar];

            [UIView animateWithDuration:0.2
                                  delay:0.0f
                                options:UIViewAnimationCurveEaseIn 
                             animations:^{

                                 jumpBarContainerLandscape.alpha = 0.0;

                             } completion:^(BOOL finished) {
                                 if (finished) {

                                 }
                             }];

            [UIView animateWithDuration:0.2
                                  delay:0.0f
                                options:UIViewAnimationCurveEaseIn 
                             animations:^{

                                 jumpBarContainerPortrait.alpha = 1.0;

                             } completion:^(BOOL finished) {
                                 if (finished) {

                                     // remove subView for superView
                                     [jumpBarContainerLandscape removeFromSuperview];
                                 }
                             }];

            }
        }
        else if ([[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationLandscapeLeft || [[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationLandscapeRight)
        {
            if ([jumpBarContainerPortrait superview])
            {
            // Device is changing from portrait to landscape change views to fit
            // load landscape view
            jumpBarContainerLandscape = [[UIView alloc] initWithFrame:CGRectMake(0.0, (207 - jumpBarHeightLandscape), 480.0,  (jumpBarHeightLandscape + 49.0))];
            jumpBarContainerLandscape.backgroundColor = [UIColor scrollViewTexturedBackgroundColor];
            jumpBarContainerLandscape.alpha = 0.0;

            // add jumpbar container to view
            [self.view insertSubview:jumpBarContainerLandscape belowSubview:actionTabBar];

                // fade out
            [UIView animateWithDuration:0.2
                                  delay:0.0f
                                options:UIViewAnimationCurveEaseIn 
                             animations:^{

                                 jumpBarContainerPortrait.alpha = 0.0;

                             } completion:^(BOOL finished) {
                                 if (finished) {

                                 }
                             }];

               // fade in
            [UIView animateWithDuration:0.2
                                  delay:0.0f
                                options:UIViewAnimationCurveEaseIn 
                             animations:^{

                                 jumpBarContainerLandscape.alpha = 1.0;

                             } completion:^(BOOL finished) {
                                 if (finished) {

                                     // remove subView for superView
                                     [jumpBarContainerPortrait removeFromSuperview];
                                 }
                             }];
            }
        } 
```

现在我遇到的问题是两个 UIView 之间的动画非常难看，它不是很流畅，您可以在动画等上看到两个不同的视图，这是不可取的。我想知道是否有人能想到一个好的方法两者之间的交叉淡入淡出使它看起来更平滑等......

任何帮助将不胜感激。

**编辑：**

所以我刚刚尝试创建一个 CATransaction，但是我在一行上有一个错误，给了我这个错误**没有可见的 @interface for 'UIView' 声明了选择器'jumpBarContainerPortrait'** 我已经在下面出现此错误的行中添加了注释.. 任何帮助，将不胜感激

```
[CATransaction begin];
            CATransition *animation = [CATransition animation];
            animation.type = kCATransitionFade;
            animation.duration = 3.50;

            [self.view insertSubview:jumpBarContainerPortrait belowSubview:actionTabBar];

            [[self.view jumpBarContainerPortrait] addAnimation:animation forKey:@"Fade"]; // Error is happening here!
            [CATransaction commit]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T00:50:11.497

使用 UIView 方法“transitionFromView”，而不是单独的淡入和淡出动画。这是一个例子：

```
 [UIView transitionFromView:jumpBarContainerLandscape
                            toView:jumpBarContainerPortrait
                          duration:crossDissolveTime 
                           options:UIViewAnimationOptionTransitionCrossDissolve 
                        completion:NULL]; 
```

# symfony1 - Stof 学说扩展包

> ID：11147203
> 
> 赞同：1
> 
> 时间：2012-06-21T21:42:55.317
> 
> 标签：symfony1, doctrine-orm, vendor

当我尝试设置 Doctrine Extensions 和 Stof Doctrine Extensions 捆绑包时，发生了一些奇怪的事情。在我按照 Stof 的教程进行操作后，我收到一个错误，他不知道 config.yml 中的 stof_doctrine_extensions。同样在名称空间列表中，他不存在（终端显示这种错误）。

有人有同样的问题吗？我需要一个特定的分支吗？我正在使用 Symfony 2.0.x 和 Doctrine 2.1.6。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T03:37:19.650

您需要升级到 Symfony 2.1.* 才能使此捆绑包正常工作。

[https://github.com/stof/StofDoctrineExtensionsBundle/blob/master/Resources/doc/index.rst#bring-in-the-vendor-libraries](https://github.com/stof/StofDoctrineExtensionsBundle/blob/master/Resources/doc/index.rst#bring-in-the-vendor-libraries)

# zend-framework - Zend setRawHeader

> ID：11147204
> 
> 赞同：1
> 
> 时间：2012-06-21T21:42:55.263
> 
> 标签：zend-framework, http-headers

我有索引控制器。我需要在 indexAction 中设置原始标题。我试着做

```
function indexAction(){
    $this->getResponse()->setRawHeader('HTTP/1.1 404 Not Found');
} 
```

但我在 Google chrome 中看到状态 200 OK。

如何设置原始标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:38:17.040

要设置 404，请使用：

```
$this->getResponse()->setHttpResponseCode(404)
                    ->setRawHeader('HTTP/1.1 404 Not Found'); // optional 
```

如果您没有明确设置 HTTP 响应代码，ZF 将自动发送 200 响应（如果它没有被`setHttpResponseCode`. 一旦它发送了所有的标头，它就会检查是否发送了响应代码，如果没有，无论您的 rawHeader 是什么，都会发送 200。

# multithreading - WAIT_ABANDONED_0 何时返回

> ID：11147208
> 
> 赞同：2
> 
> 时间：2012-06-21T21:43:11.270
> 
> 标签：multithreading, winapi, wait

我有如下代码...

```
 HANDLE event = CreateEvent(NULL, false, false, NULL);
 // pass event to thread which will SetEvent(event);
 DWORD dwResult = MsgWaitForMultipleObjectsEx(1, &event, 3 * 1000, QS_ALLEVENTS, 0); 
```

在这种情况下，MsgWaitForMultipleObjectsEx 甚至有可能返回 WAIT_ABANDONED_0 吗？哪些类型的物品可以被“遗弃”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T21:53:28.323

它在[WaitForSingleObject()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)的 MSDN 文档中进行了描述。

只有互斥锁会导致这种错误情况。它表示获取互斥锁的线程在没有通过调用 ReleaseMutex() 显式释放的情况下终止。这是一个非常严重的错误情况，有些东西非常糟糕，发生这种情况时你应该点击大红色紧急停止按钮。几乎永远不会*只有*互斥锁处于错误状态，该线程触及的任何其他共享程序状态也很可能是不一致的。

# asp.net-mvc - 在域模型中动态分配域模型

> ID：11147212
> 
> 赞同：0
> 
> 时间：2012-06-21T21:43:29.133
> 
> 标签：asp.net-mvc, dependency-injection, ninject, abstract-factory

这是我的第一个问题，在我试图解决这个问题的过程中，我已经为写什么而苦恼了几天。

我购买了 Mark Seeman 的 .NET 中的依赖注入一书，并一直在尝试遵循该书和 Ninject 网站上的示例来创建抽象工厂类。一般的想法是我有一个包含问题答案列表的表格。答案可以有多种类型，所以我使用工厂来创建相关的答案类型。

我收到错误：

```
Error activating IAnswerValue
No matching bindings are available, and the type is not self-bindable.
Activation path:
 1) Request for IAnswerValue

Suggestions:
 1) Ensure that you have defined a binding for IAnswerValue.
 2) If the binding was defined in a module, ensure that the module has been loaded into the kernel.
 3) Ensure you have not accidentally created more than one kernel.
 4) If you are using constructor arguments, ensure that the parameter name matches the constructors parameter name.
 5) If you are using automatic module loading, ensure the search path and filters are correct. 
```

我最初尝试使用一个参数，但为了简化这个例子，我把它全部去掉了。错误消息中给出的建议似乎都不适用，工厂类型是绑定的，表单服务也是如此，但 answervalue 显然不是。

这是我的 NinjectWebCommon.cs 中的代码

```
kernel.Bind<DomainModel.IAnswerValue>().To<DomainModel.AnswerValue>();
kernel.Bind<DomainModel.IAnswerValue>().To<DomainModel.StringAnswerValue>(); 
kernel.Bind<DomainModel.IAnswerValue>().To<DomainModel.DateTimeAnswerValue>();     

kernel.Bind<IAnswerValueFactory>().ToFactory(); 
```

这是答案类定义：

```
public class Answer
{
    readonly IAnswerValueFactory answerValueFactory;

    public int Id { get; set; }
    public Question Question { get; set; }
    public string Type { get; set; }

    public Answer(IAnswerValueFactory answerValueFactory)
    {
        this.answerValueFactory = answerValueFactory;
    }

     public void GetAnswerValue()
    {
        var answer = this.answerValueFactory.GetAnswerValue();     
    }

    public List<AnswerItem> PotentialAnswers { get; set; }

} 
```

和答案值：

```
public interface IAnswerValue 
{

    AnswerValue GetAnswerValue();
}

public class AnswerValue : IAnswerValue
{
    readonly IAnswerValue answerValue;

    public AnswerValue() { }
    public AnswerValue(IAnswerValue answerValue)
    {
        this.answerValue = answerValue;
    }

    public AnswerValue GetAnswerValue()
    {
        // this will contain a switch statement to 
        // determine the type returned but I have
        // omitted for this example

        return new StringAnswerValue();
    }
}

public class StringAnswerValue : AnswerValue
{
    public string StringAnswer { get; set; }
} 
```

和工厂：

```
public class AnswerValueFactory : IAnswerValueFactory
{      
    readonly IAnswerValue answerValue;

    public AnswerValueFactory(IAnswerValue answerValue)
    {
        this.answerValue = answerValue;
    }

    public IAnswerValue GetAnswerValue()    
    {
        return (IAnswerValue)this.answerValue.GetAnswerValue();
    }

} 
```

我觉得我已经用尽了我的知识，我只是绕着圈子一遍又一遍地尝试同样的事情。一定有一些很简单的东西我错过了，但我就是看不到它是什么。

# c# - IF EXISTS 创建表查询时

> ID：11147221
> 
> 赞同：0
> 
> 时间：2012-06-21T21:43:54.723
> 
> 标签：c#, sqlite

我需要编写 q 查询来检查表是否存在，如果存在，我需要在其中插入值。我总是遇到编译错误，因为我的语法错误。驾驶室有人请指出正确的代码吗？感谢它

```
namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{

    public Form1()
    {
        InitializeComponent();
        createDataBase();
        createDataTable();
    }

    private void createDataBase()
    {
       SQLiteDataAdapter  dataBase = new SQLiteDataAdapter();
    }

    private SQLiteConnection getConnection() 
    { 
        return new SQLiteConnection("Data Source=file1.db"); 
    }

    private void ExecuteQuery(string txtQuery)
    {            
     using (SQLiteConnection sqlcon =  getConnection())
     {
            using (SQLiteCommand sqlcmd = sqlcon.CreateCommand())
            {
                sqlcmd.CommandText = txtQuery;
                sqlcon.Open();
                sqlcmd.ExecuteNonQuery();
            }
        }
    }

    private void createDataTable()
    {
        //ExecuteQuery("DROP TABLE IF EXISTS 'RECORDS'");
        //ExecuteQuery("CREATE TABLE RECORDS ( ID varchar(255))");
        //ExecuteQuery("CREATE TABLE (IF NOT EXISTS) 'RECORDS'");
        //("IF (EXISTS (SELECT ID FROM sqlite_master WHERE NAME = 'RECORDS'))");
    }

    private void button1_Click(object sender, EventArgs e)
    {
          AddValue(textBox1.Text);  
        ////ExecuteQuery("IF (EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA <> NULL AND TABLE_NAME = 'RECORDS')) BEGIN INSERT INTO RECORDS (ID) VALUES ('" + textBox1.Text + "')");    
    }

    private void AddValue(string value)
    {
      ExecuteQuery("INSERT INTO RECORDS (ID) VALUES ('" + value + "')");
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:51:19.950

```
IF (EXISTS (SELECT * 
                 FROM INFORMATION_SCHEMA.TABLES 
                 WHERE TABLE_SCHEMA = 'TheSchema' 
                 AND  TABLE_NAME = 'TheTable'))
BEGIN
    --your insert logic
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:08:33.973

这是一个例子

```
 SQLiteCommand cmd = new SQLiteCommand();
  cmd.Connection = con;
  cmd.Connection.Open();
  cmd.CommandText = "SELECT name FROM sqlite_master WHERE name='MAIN'";
  SQLiteDataReader rdr = cmd.ExecuteReader();
  if (rdr.HasRows)
  {
        cmd.CommandText = "DROP TABLE 'MAIN'";
        cmd.ExecuteNonQuery();
  } 
```

但这直接来自[SQLite 站点](http://www.sqlite.org/lang_droptable.html)

```
 SQLiteCommand cmd = new SQLiteCommand();
  cmd.Connection = con;
  cmd.CommandText = "DROP TABLE IF EXIST 'MAIN'";
  cmd.Connection.Open();
  cmd.ExecuteNonQuery(); 
```

# selenium - 编写经过多页的 Selenium 脚本时如何处理时间问题？

> ID：11147223
> 
> 赞同：0
> 
> 时间：2012-06-21T21:44:02.463
> 
> 标签：selenium, selenium-webdriver, web-testing

我希望这个问题不是太笼统。好吧，情况是我正在测试一个网络应用程序，我最终不得不将这些延迟放在`setSpeed`命令中。但我宁愿对它说“等待页面完成加载”，除非我不能完全这样做......因为它会被重定向到具有随机 URL 的页面。

这是它的一个示例（抱歉，它看起来有点难看）：

```
setSpeed    7000    

open    router2/default.aspx?SID=9795d782-07d9-4fcc-a896-f79e30b2b800&FIRID=10DULKAR&SUMSTAT=1&PID=     

setSpeed    700     

click   xpath=(//input[@name='radio_43'])[2]    

setSpeed    4000    

clickAndWait    id=ctl00_Content_btnContinue    

setSpeed    7000    

verifyTextPresent   Post Qualification Logic    

clickAndWait    id=ctl00_Content_btnContinue    

type    name=numeric_42     19

clickAndWait    id=ctl00_Content_btnContinue    

click   xpath=(//input[@name='radio_51'])[5]    

clickAndWait    id=ctl00_Content_btnContinue    

click   xpath=(//input[@name='radio_2180'])[4]  

clickAndWait    id=ctl00_Content_btnContinue    

verifyTextPresent   Client Survey Entry 
```

这就是为什么我把 7 秒的延迟放在里面。但它似乎很慢/效率低下。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:35:27.700

这取决于您使用的是标准 HTTP 重定向，还是 javascript/ajax 执行。对于标准重定向，“clickAndWait”命令应该足够了，无需设置任何延迟。对于 ajax 执行，使用 wait_for_ajax 技巧，如此[处所示](http://agilesoftwaretesting.com/selenium-wait-for-ajax-the-right-way/)

# jquery - 回发时在多选中仅选择了 1 个项目

> ID：11147224
> 
> 赞同：0
> 
> 时间：2012-06-21T21:44:12.007
> 
> 标签：jquery, asp.net, drop-down-menu, multi-select

我在asp.net webforms 页面上使用这个[jquery 多选控件。](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)这是代码：

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".multiselect").multiselect();
    });
</script>

<asp:listbox runat="server" CssClass="multiselect">
    <asp:ListItem Value="1">foo</asp:ListItem>
    <asp:ListItem Value="2">bar</asp:ListItem>
</asp:listbox>

<asp:Button runat="server" Text="save" OnClick="SaveClick"/> 
```

我的`SaveClick`活动是空的，所以只执行回发。如果我在多选下拉列表中同时选择这两个项目，然后单击提交，则仅选择最后一个项目。[我在这里](https://github.com/ehynds/jquery-ui-multiselect-widget/pull/186)发现了一个类似的问题，但它似乎不适用于 asp.net。有人想出这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:41:59.863

我忘了设置 SelectionMode="Multiple"

# css - CSS 问题：如何防止 div 在滚动时移出位置

> ID：11147227
> 
> 赞同：2
> 
> 时间：2012-06-21T21:44:24.733
> 
> 标签：css, html, positioning

CSS新手在这里。我正在修改博客模板的 CSS，但我遇到了一个问题，即包含博客标题/评论/标签的 div 在向下滚动页面时将移出其原始位置。我已经尝试了很多尝试，以使他们始终保持原来的位置，但我还没有成功。任何输入/建议将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:18:30.077

我同意@John B。将位置更改为固定的脚本在 template.js 中的第 105 行附近

```
 $(activeProject+ " .project_rail").css({"position":"fixed","top":feedHeaderHeight}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T23:24:39.203

您是否尝试过使用 css 属性

```
position:fixed; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:03:36.010

您的页面上有一些脚本正在应用位置：已修复；滚动时到其父 div(.project-rail)。如果您更改将停止脚本操作的类名。或者您可以删除脚本。如果您更改类名，则必须将样式规则重新应用于新类。

# cocoa - 如何禁用 NSView NSViewDidUpdateTrackingAreasNotification 通知？

> ID：11147228
> 
> 赞同：2
> 
> 时间：2012-06-21T21:44:26.330
> 
> 标签：cocoa, nsview

我有很多嵌套的 NSView，这些通知确实减慢了应用程序的速度。

NSView 有这些控制通知的方法：

*   setPostsFrameChangedNotifications：
*   postsFrameChangedNotifications
*   setPostsBoundsChangedNotifications：
*   postsBoundsChangedNotifications

但是，我看不到关于控制 NSViewDidUpdateTrackingAreasNotification 的任何信息。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:15:43.500

这种解决方法对我有用。但不建议覆盖内部方法。

```
- (void)_updateTrackingAreas 
{
    //NSLog(@"currentEvent: %@", [NSApp currentEvent].description);

    // Is it currently visible?
    if (NSEqualRects(self.visibleRect, NSZeroRect)) { 
         // No, don't update its tracking area.
        return;
    }

    [super _updateTrackingAreas];
} 
```

# javascript - 在 Javascript 中使用 Regex 解析 XHTML 字符串并将其转换为 DOM

> ID：11147229
> 
> 赞同：2
> 
> 时间：2012-06-21T21:44:26.440
> 
> 标签：javascript, regex, dom, xhtml, html-parsing

**免责声明：** *在 you-can't-parse-html-with-regex 盲目咒语开始之前 - 请给我怀疑的好处并将这个问题读到最后（+假设我已经知道[那个 RegEx-ing HTML 将让你发疯](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/)并[解析 Html The Cthulhu Way](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html) )*

* * *

大多数对正则表达式匹配 HTML 的抱怨来自这样一个事实，即 HTML 格式松散，正则表达式难以匹配不同的问题和用户错误 + 递归等其他一些事情。

但是 - 如果 HTML 实际上是有效的 XHTML（或更类似于 XML），它源自受控环境（不是一般的用户生成的 HTML 文档，而是例如您将在客户端模板引擎中使用的 HTML 片段模板）怎么办？ ) 并且已经手动检查错误并多次验证？

* * *

**让我解释一下我为什么感兴趣。**我正在对 Javascript 中的不同 String2DOM 技术进行速度基准测试，并且测试了从 innerHTML、outerHTML、insertAdjacentHTML、createRange、DOMParser、doc.write（通过 iFrame）甚至是 John Riesigs HTMLtoDOM JS 库的所有内容。

我很好奇是否有更快的方法。

createElement/appendChild（+setAttribute 和 createTextNode）是在 Javascript 中创建 DOM 元素的最快方法。正则表达式是遍历大字符串的最快方法。难道这两种方法不能仍然结合起来，以可能创建一种更快的方法来将 DOMString 片段解析为 DOM 吗？

一个示例 HTML 字符串：

```
<div class="root fragment news">

    <div class="whitebg" data-name='Freddie Mercury'>
        <div id='myID' class="column c2">
            <h1>This is my title</h1>
            <p>Vivamus urna <em>sed urna ultricies</em> ac<br/>tempor d </p>
            <p>Mauris vel neque sit amet Quisque eget odio</p>
        </div>      

        <div class="nfo hide">Lorem <a href='http://google.com/'>ipsum</a></div>
    </div>

</div> 
```

因此，理想情况下，代码将返回一个带有正则表达式的 documentFragment，解析 XHTML 汤并使用 createElement/appendChild (+setAttribute/createTextNode) 来填充元素。（一个类似但还不完全的例子是[HTML2DOM](http://www.html2dom.com/)）

我（和世界其他地方）非常非常感兴趣，如果这样的东西可以在 JS 中从 DOMString 生成 DOM 中击败好的旧的 innerHTML。可以吗？

谁愿意尝试他们的知识来制作这样的东西？并在 Stackoverflow 的编年史中占据一席之地？:)

* * *

***EDIT2：****谁曾经盲目地对此投票 - 至少解释一下你觉得这个问题有什么问题？我对这个主题非常熟悉，提供了它背后的逻辑，并解释了这个场景的不同之处+甚至发布了一些提供类似解决方案的链接。那你呢？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T08:46:32.803

首先，所有以性能为导向的问题的答案都是“仅进行基准测试”。如果您想编写代码，您可以编写代码，它的性能将不言而喻。

也就是说，我将尝试根据我对 Web 浏览器行为的了解来回答您的问题，并可能为您节省一些工时。

不，自定义的 Javascript 驱动的 HTML 解析器无法“在 JS 中从 DOMString 生成 DOM 中击败旧的 innerHTML”。从理论上讲，它可能能够获得同样出色的性能，但这种结果不太可能。

原因是因为 Javascript 是一种解释性语言。一个**理想**的JS 解释器会将 JS 代码优化到其原生等效的浏览器 API 调用序列。因此，在最好的情况下，编写与平台原生代码等效的 JS 代码将获得相同的性能：JS 代码无法超越其原生等效代码，因为在底层，它仍然必须进行原生调用。

这里手头的任务是创建一个 DOM 树。`innerHTML`以下是设置元素的 时发生的情况：

> JS：浏览器，给我渲染一些 HTML！这是一个 Javascript 字符串对象。
> 
> 浏览器：parse_html_and_create_dom_objects()
> 
> 浏览器：notify_javascript_of_dom_creation()

现在，如果您使用 Javascript 驱动解析器，会发生以下情况：

> JS：scan_string_for_next_token()
> 
> JS：浏览器，在这里添加一个DOM元素！
> 
> 浏览器：create_dom_object()
> 
> JS：scan_string_for_next_token()
> 
> JS：浏览器，在这里添加一个DOM元素！
> 
> 浏览器：create_dom_object()
> 
> JS：浏览器，将您创建的 DOM 树附加到这个屏幕上可见的 DOM 树！
> 
> 浏览器：refresh_page_view_and_notify_js()

在本机版本中，返回浏览器的一系列 JS 调用可以全部批处理并在纯预优化 C 中执行。

我认为您认为在 JS 中进行解析可能比在浏览器内部进行解析更快的原因是因为您发现某些 Web 浏览器`createElement`重复调用所花费的时间比设置`innerHTML`为块所需的时间更少。**这是因为这两个调用执行的工作量不同**。当您调用 时`createElement`，您没有进行字符串处理（没有标记化，没有词法分析）。当你打电话时`innerHTML = <string>`，你就是。所以是否`innerHTML`比一系列`createElement`调用快，取决于从 JS 中逐个获取元素的累积开销是否超过解析 HTML 字符串的成本。换句话说，你作弊了：你的基准测试没有测量相同数量的工作，因为调用的代码`createElement`必须事先知道要创建哪些元素。

解析 HTML 字符串**和**从 JS 单独创建元素不太可能比在浏览器中同时执行这两者更快**。**如果您确实设法编写了优于浏览器内部的 JS 代码，请将其提交给浏览器作者上游：Web 浏览器性能改进对每个人都有帮助，我相信开发人员会欣赏从嵌套解释器中获得卓越性能的讽刺意味比他们在翻译之外所能达到的最好水平。

# jquery - Rails：jQuery 验证插件不起作用？

> ID：11147233
> 
> 赞同：0
> 
> 时间：2012-06-21T21:44:46.583
> 
> 标签：jquery, ruby-on-rails, jquery-plugins

我是 Ruby 的初学者编码器，目前我正在尝试使用这个插件：

但是，目前，我编写的用于验证简单 rails 表单中的姓名、电子邮件和电话号码字段的 JavaScript 验证代码不起作用。我可以在任何这些字段中输入任何内容或不输入任何内容，它会提交（这不是我想要发生的）。

这是我的 /app/assets/javascripts/user.js.coffee 文件中的代码：

```
$("#theform").validate({
rules: {
    name: {
        required:true,
        minlength:2,
        maxlength:50
    },
    email: {
        required: true,
        email: true
        minlength:2,
        maxlength:50
    },
    phone_number: {
        required: true,
        phoneUS: true,
        minlength:9,
        maxlength:20
    }
}
messages: {
    name: {
        required: "Please provide your name",
        minlength: jquery.format("At least {0} characters required!"),
        maxlength: "Too many characters!"
    },
    email: {
        required: "Please provide your email",
        email: "Your email address must be in the format of name@domain.com",
        minlength: jquery.format("At least {0} characters required!"),
        maxlength: "Too many characters!"
    },
    phone_number: {
        required: "Please provide your phone number",
        phoneUS: "Please provide a valid US phone number",
        minlength: jquery.format("At least {0} characters required!"),
        maxlength: "Too many characters!"
    }
}
}); 
```

这是我的 /app/views/layouts/_form.html.erb 部分中的代码（呈现此部分的实际 html 文件中没有太多内容，因为它是一个简单的 ajax 提交表单）：

```
<div id="theform">
<%= form_for(@user, :remote => true) do |f| %>

    Name: <div id='name'><%= f.text_field :name %></div><br/>
    Email: <div id='email'><%= f.text_field :email %></div><br/>
    Phone Number: <div id='phone_number'><%= f.text_field :phone_number%></div><br/>
    <%= f.submit "Submit" %>

<% end %>
</div> 
```

这是此表单的 application.html.erb 布局文件：

```
<!DOCTYPE html>
<html>
<head>
  <title>IntroProject</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= javascript_include_tag "jquery-1.7.2.min" %>
  <%= javascript_include_tag "jquery-validation-1.9.0" %>
  <%= csrf_meta_tags %>
</head>
<body>
<h1><%= image_tag("leaf_logo.png", alt:"Leaf") %> Sample Form </h1>
<div class="container">
    <%= yield %>
</div>
<br/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:09:27.747

试试这个：

```
<%= form_for(@user, :remote => true, :form_to_validate => 'user') do |f| %> 
```

和

```
$('form[form_to_validate=user]').validate({
  ...
}) 
```

# javascript - 是否可以将 jquery 选择器命名为变量的值

> ID：11147234
> 
> 赞同：2
> 
> 时间：2012-06-21T21:44:49.227
> 
> 标签：javascript, jquery

例如，如果我在 javascript 中有一个变量

```
 var nombre;
 onclick="nombre='someValue'" 
```

并且在我的代码中的某个地方，这个 javascript 变量的值像上面一样发生了变化，我可以将该变量的值设置为 jquery 选择器中的类名，这样就可以了

```
$('.someValue').show() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T21:46:20.600

是的你可以：

```
$('.' + nombre).show(); 
```

这假定您的变量`nombre`具有在您的 jQuery 代码中也可用的范围。

# iphone - Xcode“AppDelegate *const __strong'到不兼容类型的参数”错误

> ID：11147239
> 
> 赞同：5
> 
> 时间：2012-06-21T21:45:11.720
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nsxmlparser

当我`appDelegate`如下声明接口以设置`NSXMLParserDelegate`时，我收到来自使用 [[UIApplication sharedApplication] delegate] 的其他视图的一些警告；

```
@interface AppDelegate : UIResponder <UIApplicationDelegate, NSXMLParserDelegate> 
```

> 警告：使用不兼容类型“id”的表达式初始化“AppDelegate *__strong”

但是，如果我删除它，由于 xmlParser 的自我设置，会出现另一个警告，

```
@interface AppDelegate : UIResponder <UIApplicationDelegate> 
```

> 警告：将“AppDelegate *const __strong”发送到不兼容类型“id”的参数

上

```
 xmlParser = [[NSXMLParser alloc] initWithData:receivedData];
    [xmlParser setDelegate:self]; 
```

如何删除两者？谢谢你

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-21T21:59:50.130

你真的不应该让你的 AppDelegate 公开暴露接口。它在所有代码之间创建了非常紧密的耦合。如果其他代码（在您的 AppDelegate 之外）需要 NSXMLParserDelegate，您应该为它创建一个不同的类。

看起来您的 AppDelegate 需要成为其自身目的的代表。您可以通过在 AppDelegate.m 文件中创建类扩展来“私下”实现接口。

```
@interface AppDelegate() <NSXMLParserDelegate>
@end 
```

执行上述操作将删除您在此处收到的警告：

```
[xmlParser setDelegate:self]; 
```

# excel - 如何根据 Excel 2007 中不同列中的第二个值标记列中的重复值？

> ID：11147241
> 
> 赞同：0
> 
> 时间：2012-06-21T21:45:14.440
> 
> 标签：excel, duplicates, excel-2007, vba

我一直在尝试根据不同列中的标准在同一 excel 列中标记重复项，我很想得到一些帮助。参考下面的示例，我想突出显示与另一行红色重复值的所有行，并将 Y 放在第三列中（在下面的示例中为“删除”）。当 Name 列中的值与另一个值重复时，忽略大小写敏感，我想根据 Status 列中的层次结构标记除一个值之外的所有值，即优秀、好和坏。

![在此处输入图像描述](../Images/8da50fadf4379b133157a9fca58d22ff.png)

每个唯一值中只有一个可以不标记，如果两个共享相同的状态且没有更高状态的重复值，则可以标记任何一个（如果更容易指定，则列表更靠后的那个）。

我一直在环顾该网站，发现很多关于删除重复项的类似条目，但完全不同。我需要突出显示而不是删除重复的行，并且我无法找到任何可以让我根据第二列中的层次结构进行排序的内容。我只需要执行一次命令，而不是重复执行，所以它所花费的时间对我来说不是问题。你们可以为我提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:10:52.043

看看下面的表格和步骤是否能解决您的问题。

1.  Status_order 公式：Range("E2") =VLOOKUP(D2,$I$2:$J$4,2,FALSE)
2.  按名称排序 A1:E15，然后按 Status_Order 从小到大
3.  删除公式 =IF(A2=A3,"删除","")
4.  填写所有公式
5.  如果列 C =“删除”，则在所有列上添加条件格式为红色

![在此处输入图像描述](../Images/74dc8feca9794426e2984a6466f6bffe.png)

# bash - 在 bash 脚本中传递参数

> ID：11147245
> 
> 赞同：0
> 
> 时间：2012-06-21T21:45:39.303
> 
> 标签：bash, arguments, shift

我有以下 bash 脚本来为脚本的每个参数做一些事情

```
#! /bin/sh

while (($#)); do
 echo $1
 shift
done 
```

但不知何故，如果我用命令启动它，`sudo ./test.sh foo1 foo2`它将不起作用。真正奇怪的是，如果我输入`sudo bash test.sh foo1 foo2`它就可以了。有谁知道是什么导致了这种奇怪的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:05:38.897

您已将 /bin/sh 指定为您的解释器，它可能不是 bash。即使是 bash，当调用 /bin/sh 时，bash 也会以 POSIX 模式运行。

该`(( ))`命令是特定于 bash 的功能。以下内容适用于任何符合 POSIX 的 shell：

```
while [ $# -gt 0 ]; do
   echo $1
   shift
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T21:53:20.733

您是否尝试过 #!/bin/bash 而不是 sh？

这是一个解释差异的链接： [http ://www.linuxquestions.org/questions/programming-9/difference-between-bin-bash-and-bin-sh-693231/](http://www.linuxquestions.org/questions/programming-9/difference-between-bin-bash-and-bin-sh-693231/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T22:09:04.857

这将适用于`sh`或`bash`：

```
for arg
do
    echo "$arg"
done 
```

它的作用与您的脚本的作用相同，但不会破坏参数列表。

# box-api - 如何将标签作为网络链接 box.net

> ID：11147249
> 
> 赞同：0
> 
> 时间：2012-06-21T21:45:59.437
> 
> 标签：box-api

我在 salesforce box.net 应用程序中看到了这一点，通过按下 box.net 上的标签将用户重定向到 salesforce 记录。但是，如果我将链接添加到标签，这将不起作用。有谁知道我怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:58:47.460

Salesforce 标签是一种特殊类型的标签，尚不可供其他开发人员使用。您可以通过我们的标记 API 标记文件，但 Salesforce 的参考标记目前还不能扩展。

# python - Python：如何从 __getattribute__ 方法访问属性

> ID：11147252
> 
> 赞同：4
> 
> 时间：2012-06-21T21:46:03.927
> 
> 标签：python, infinite-loop, getattribute

我有以下课程：

```
class StrLogger(str):
    def __init__(self, *args):
        self._log_ = []
        str.__init__(self, *args)
    def __getattribute__(self, attr):
        self._log_.append((self.__name__, attr))
        return str.__getattribute__(self, attr) 
```

我可以初始化一个`StrLogger`with`slog = StrLogger('foo')`并且我可以访问它的所有继承方法`str`并且它运行没有问题。问题是，当我尝试使用`slog._log_`or检索日志时`slog.__dict__['_log_']`，该`__getattribute__`方法陷入无限递归。我理解为什么会发生这种情况，但我的问题是，如何访问日志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:57:58.433

我可以想到一种方法。`object.__getattribute__`每当您需要绕过自定义属性访问时使用（或任何您的超类）。

```
class C(object):
    def __init__(self):
        self._log = []
    def __getattribute__(self, attr):
        _log = object.__getattribute__(self, '_log')
        _log.append(attr)
        return object.__getattribute__(self, attr)

>>> a = C()
>>> a.x = 1
>>> a.x
1
>>> a._log
['x', '_log'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T22:05:58.440

以下稍作修改的类有效：

```
class StrLogger(str):
    def __init__(self, *args):
        self._log_ = []
        str.__init__(self, *args)

    def __getattribute__(self, attr):
        log = str.__getattribute__(self, '_log_')
        cls = str.__getattribute__(self, '__class__')
        name = cls.__name__
        log.append((name, attr))
        return str.__getattribute__(self, attr)

s = StrLogger('abc')
print(s.title())
print(s.lower())
print(s.upper())
print(s.__dict__) 
```

运行它会导致

```
Abc
abc
ABC
{'_log_': [('StrLogger', 'title'), ('StrLogger', 'lower'), ('StrLogger', 'upper'), ('StrLogger', '__dict__')]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T21:57:30.210

你`__getattribute__`应该排除`__dict__`，也许也可以`_log_`从记录中排除。或者，你可以做类似的事情

```
slog = StrLogger('foo')
thelog = slog._log_
do_stuff_with(slog)
print thelog 
```

（未经测试！）

# windows - 我的 .bat 脚本有什么问题？

> ID：11147254
> 
> 赞同：4
> 
> 时间：2012-06-21T21:46:07.363
> 
> 标签：windows, batch-file, 7zip

因此，我正在尝试编写一个脚本，该脚本使用 7-zip 将*包含另一个 .zip 文件*的 .zip 文件提取到当前目录中并将其删除。

当我在命令提示符中键入它时，一切正常：

```
set 7ZIP="C:\Program Files\7-Zip\7zG.exe"
for %X in (*.zip) do start "Extracting..." /WAIT %7ZIP% x "%X" && del "%X" 
```

但是，当我尝试在 .bat 文件中执行此操作时（注意 %%），我收到一个奇怪的错误

```
set 7ZIP="C:\Program Files\7-Zip\7zG.exe"
for %%X in (*.zip) do start "Extracting..." /WAIT %7ZIP% x "%%X" && del "%%X" 
```

![失败的](../Images/ad9ee86b852ad3e1a46b0e23a5aafeef.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T21:48:34.423

好的，我刚刚了解到您显然不能在 .bat 脚本（或 start 命令？？）中使用以数字开头的变量，因为这有效：

```
set ZIP7="C:\Program Files\7-Zip\7zG.exe"
for %%X in (*.zip) do start "Extracting..." /WAIT %ZIP7% x "%%X" && del "%%X" 
```

# jquery - 使用 jquery 将下拉菜单链接到锚文本

> ID：11147258
> 
> 赞同：3
> 
> 时间：2012-06-21T21:46:27.827
> 
> 标签：jquery, html

我在我的页面上选择下拉菜单

```
<select id="select1" size="1" style="background-color:#FFFFD7">
<option>Choose a Position</option>
<option value="1">Job!</option>
<option value="2">Job!</option>
<option value="3">Job!</option>
<option value="4">Job!</option>
<option value="5">Job!</option>
<option value="6">Job!</option>
<option value="7">Job!</option>
<option value="8">Job!</option>
<option value="9">Job!</option>
</select> 
```

我有一个我试图一起破解的 jquery 脚本。

```
 <script type="text/javascript">
    jQuery(document).ready(function() {
        jQuery("#select1").change(function(){
            var jump = jQuery("#select1").val();
            var new_position = jQuery('#job'+jump).offset();
            window.scrollTo(new_position.left,new_position.top);
            return false;
        });​
    }
    </script> 
```

目标是一旦有人选择了工作，它就会选择一个值，它会转到页面下方的锚链接

```
<a href="job1"></a> 
```

希望没有刷新。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:51:39.867

您可以`animate`像这样使用以**动画**方式滚动到选定的元素：

```
<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery("#select1").change(function(){
        var jump = jQuery("#select1").val();
        var new_position = jQuery('#job'+jump).offset();
        $('body, html').animate({scrollTop, jQuery('#job'+jump).offset().top})
        return false;
    });​
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:52:16.760

采用：

```
window.location.hash="someAnchor"; 
```

跳到锚点`<a id="someAnchor" />`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T15:38:50.183

这个简单的对我有用：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>  
<script type="text/javascript">
    function scrollTo(target){
        var targetPosition = $(target).offset().top;
        $('html,body').animate({ scrollTop: targetPosition}, 'slow');
    }
</script> 
```

现在您可以使用 onChange 事件来执行该函数：

```
<select name="dropdpown" size="1" onChange="scrollTo(this.value)">
    <option value="#link">text</option>
</select> 
```

如果您提供这样的正确链接，一切正常

```
<div id="link"> ... 
```

我花了一段时间，因为我不习惯 javascript，但终于找到了一个简单易用的解决方案。

问候mz

# .htaccess - .htaccess 重定向问题

> ID：11147261
> 
> 赞同：0
> 
> 时间：2012-06-21T21:47:11.470
> 
> 标签：.htaccess, redirect

我刚刚设置了一个从源代码控制站点克隆的新本地站点 (localhost/pfb.net/)。

在它上面完成的编码非常糟糕，所以所有 css/js 都指向 /inc/js 或 /inc/css 但我需要做的是：/pfb.net/inc/js 或 /pfb.net/inc /css

所以我想在不弄乱代码的情况下最简单的方法是.htaccess。

有人知道怎么做吗？

设置它我真的很糟糕。

谢谢！

**编辑**

抱歉，我确实忘记提及 .htaccess 将位于 /pfb.net/ 而不是目录的根目录中。不确定这是否会有所作为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:58:28.650

我认为规则相当简单：

```
RewriteEngine On
RewriteRule ^inc/js/(.+)  /pfb.net/inc/js/$1
RewriteRule ^inc/css/(.+) /pfb.net/inc/css/$1 
```

# html - 使用不带 CSS3 的 HTML 或 CSS 将任意长度的 div 系列拆分为列

> ID：11147263
> 
> 赞同：1
> 
> 时间：2012-06-21T21:47:14.937
> 
> 标签：html, css

我想垂直拆分一系列 div：

我的 HTML 可能如下所示：

```
<div>A</div>
<div>B</div>
...
<div>G</div> 
```

我希望他们看起来像这样

```
A D G
B E
C F 
```

元素的数量是任意的，如果可能的话，我想避免在某些 div 上添加额外的属性，因为这会大大增加复杂性。

我已经查看了 CSS3 列选项，但是没有 CSS3 有没有办法做到这一点？我也希望避免使用 Javascript 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T00:56:30.407

假设您希望它是动态的，那么在不依赖[CSS3 Columns](https://developer.mozilla.org/en/CSS3_Columns)或 JS（插件或其他）的情况下，没有明智的方法来复制这样的布局。

tbowman 的使用浮点数和指定宽度的建议会导致项目的不同顺序：

```
A B C
D E F
G 
```

但是，如果您可以使用 jquery~~重新排列项目~~根据需要将项目包装到列中（逻辑可以在 vanilla javascript 中复制）。如果您使用 AJAX 检索此内容并在将内容添加到 DOM*之前*将其包装到列中，则可以加分，这样就不会出现烦人的闪烁。

```
var $container = $('#container'); //assuming this is the parent
var $content = $container.children();
var itemsPerColumn = (Math.ceil($content.length / 3));
for (var i = 0; i < 3; i++) {
    $content.slice(i * itemsPerColumn, (i + 1) * itemsPerColumn)
    .wrapAll('<div class="column" />');
} 
```

[摆弄](http://jsfiddle.net/ovfiddle/Y88Vs/)延迟渲染以进行比较。如果 js 由于某种原因失败，页面仍可用于“正常”布局。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T23:37:09.403

如果没有 CSS3，最好的办法是在所有 div 上指定一个宽度，并且无论何时你想要换行符都包含一个类“.clear”：

```
.clear { clear:both; display:block; height:0; } 
```

然后，您可以说 Athis 在下一行对于宽度，如果您不想要 CSS3，您可以使用具有预定义宽度的 css 类

# scala - 对象中的Scala变量范围

> ID：11147264
> 
> 赞同：1
> 
> 时间：2012-06-21T21:47:38.307
> 
> 标签：scala

我正在查看[http://hseeberger.wordpress.com/2010/11/25/introduction-to-category-theory-in-scala/](http://hseeberger.wordpress.com/2010/11/25/introduction-to-category-theory-in-scala/)并且有一些代码我无法理解它是如何工作的：

```
object Functor {

  def fmap[A, B, F[_]](as: F[A])(f: A => B)(implicit functor: Functor[F]): F[B] =
    functor.fmap(as)(f)

  implicit object ListFunctor extends Functor[List] {
    def fmap[A, B](f: A => B): List[A] => List[B] =
      as => as map f
  }
} 
```

具体来说，当 的定义在范围内并且（据我所知）无法 访问时，如何`ListFunctor.fmap`访问？`as``as``Functor.fmap``ListFunctor.fmap`

（与扭曲有关）上面定义的代码有一个先前的迭代：

```
trait Functor[F[_]] extends GenericFunctor[Function, Function, F] {
  final def fmap[A, B](as: F[A])(f: A => B): F[B] =
    fmap(f)(as)
}

object ListFunctor extends Functor[List] {
  def fmap[A, B](f: A => B): List[A] => List[B] = as => as map f
} 
```

但同样，`as`似乎可以神奇地访问`ListFunctor`. 我想如果我理解其中一个，我就会理解另一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:52:46.340

它不一样`as`，只是在两个地方意外使用了相同的名称（可能不完全是）。`as => as map f`是一个函数定义，箭头之前是这个`as`函数的参数声明。

如果写成 ，那将是完全等价的`x => x map f`。

# javascript - JavaScript onresize 事件多次触发

> ID：11147266
> 
> 赞同：2
> 
> 时间：2012-06-21T21:48:00.960
> 
> 标签：javascript

当 onresize 事件被触发时，我在尝试只运行一次函数时遇到了一些麻烦，我已经查看了这个问题[DOM onresize event](https://stackoverflow.com/questions/1500312/javascript-onresize-event)但我没有使用 jQuery，并且没有该函数就无法工作。有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T21:57:30.553

在调整大小操作期间，每帧都会调用一次调整大小事件。如果您想在调整大小完成后调用它，只需使用回调函数设置计时器即可。

```
var timeOut = null;

window.onresize = function(){
    if (timeOut != null)
        clearTimeout(timeOut);

    timeOut = setTimeout(function(){
        // YOUR RESIZE CODE HERE
    }, 500);
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T21:56:25.843

您可以使用[下划线](http://documentcloud.github.com/underscore/docs/underscore.html#section-58)`debounce`的实现：

```
 function debounce(func, wait, immediate) {
    var timeout;
    return function() {
      var context = this, args = arguments;
      var later = function() {
        timeout = null;
        if (!immediate) func.apply(context, args);
      };
      if (immediate && !timeout) func.apply(context, args);
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  }
  window.onresize = debounce(function() {
      // Your code here
  }, 500); 
```

或使用[链接问题中的库](http://benalman.com/projects/jquery-throttle-debounce-plugin/)。没有 jQuery，它是`Cowboy.debounce(...)`.

# asp.net - 循环内的 DataTable 循环 C#

> ID：11147268
> 
> 赞同：-2
> 
> 时间：2012-06-21T21:48:16.737
> 
> 标签：asp.net, list, datatable

我有一个很好的数据集循环工作，但我需要根据父循环中的 ID 运行另一个循环。

我在一个单独的类中设置了一个通用列表，但我完全不知道如何实际调用它。我用谷歌搜索了它，但找不到我理解的例子。

编辑：

列出代码...

```
public class BinList
{
    public static List<Bin> GetById(int binOrderSiteID)
    {
        List<Bin> bins = new List<Bin>();

        SqlConnection conn;
        SqlCommand comm;
        SqlDataReader reader;

        using (conn = new SqlConnection(myConnectionHere))
        {
            comm = new SqlCommand("dbo.sl_BinsBySite", conn);
            comm.CommandType = CommandType.StoredProcedure;
            comm.Parameters.Add(new SqlParameter("@binOrderSiteID", SqlDbType.Int));
            comm.Parameters["@binOrderSiteID"].Value = binOrderSiteID;

            try
            {
                conn.Open();
                reader = comm.ExecuteReader();
                if (reader.HasRows)
                {
                    while (reader.Read())
                    {
                        Bin b = new Bin();
                        b.BinQty = reader["binQty"].ToString();
                        b.BinType = reader["binType"].ToString();
                        b.BinWasteGroupName = reader["binWasteGroupName"].ToString();
                        b.BinCollectionFrequencyType = reader["binCollectionFrequencyType"].ToString();
                        b.BinDeliveryStartDate = reader["binDeliveryStartDate"].ToString();
                        b.BinEmptyCharge = reader["binEmptyCharge"].ToString();
                        b.BinRentalCharge = reader["binRentalCharge"].ToString();
                        b.BinDutyOfCareCharge = reader["binDutyOfCareCharge"].ToString();
                        b.BinDeliveryCharge = reader["binDeliveryCharge"].ToString();
                        bins.Add(b);
                    }
                }
            }

            finally
            {
                conn.Close();
            }
        }

        return bins;
    }
} 
```

这是每个字段的存储库

```
public class Bin
    {
        public string BinQty { get; set; }
        public string BinType { get; set; }
        public string BinWasteGroupName { get; set; }
        public string BinCollectionFrequencyType { get; set; }
        public string BinDeliveryStartDate { get; set; }
        public string BinEmptyCharge { get; set; }
        public string BinRentalCharge { get; set; }
        public string BinDutyOfCareCharge { get; set; }
        public string BinDeliveryCharge { get; set; }
    } 
```

调用循环的代码

```
public class PDFCreator
{
    public static int BinOrderID { get; set; }

    private int binOrderID = 0;

    public PDFCreator(int intBinOrderID)
    {

    //Lots of code here

    //Data conenection/datatable code here

    foreach (DataRow row in dt.Rows)
            {
                //lots of code here

                //dont know how to connect up or call the List

                something?? = BinList.GetById(Convert.ToInt32(row["binOrderSiteID"].ToString()));

                foreach (//somnething here)
            }   
    }
} 
```

对不起，我最初没有添加我的代码。我不想展示它，因为我认为它是裤子。

有任何想法吗？

干杯，麻木

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:15:52.150

调用 BinList GetById

```
var binList = BinList.GetById((int)row["binOrderSiteID"]);

foreach (var bin in binList)
{  
    // do what you need to do with bin variable
} 
```

# c# - 未找到互操作 DLL 返回成员

> ID：11147271
> 
> 赞同：1
> 
> 时间：2012-06-21T21:48:41.260
> 
> 标签：c#, vb.net, dll, interop

好的，这是在黑暗中拍摄的，因为我已经束手无策了。我有两个在 VB6 中运行良好的第三方 DLL，但在 VB.NET 或 C# 中却没有那么多。

在 VB6 中，以下工作正常：

```
Dim oApplication As Object
Dim oSession As Object
Dim vRetCode As Variant

Set oApplication = CreateObject("OAPPLICA.OAPPLICA")
Set oSession = CreateObject("OSESSION.OSESSION")

oApplication.PROGRAMDRIVE = "\\dev\data\"
oApplication.WORKAREADRIVE = "\\dev\data\workarea\"
oApplication.DATADRIVE = "\\dev\data\"
oApplication.IMAGEDRIVE = "\\dev\data\image\"

oSession.MYAPPLICATION = oApplication
vRetCode = oSession.LOGIN("USER1", "PASSWORD1") 'Returns zero if successful

MsgBox (vRetCode) 
```

当我在 VB.NET 中运行这组完全相同的代码时，我在“oSession.MYAPPLICATION = oApplication”行上得到“未找到成员。（来自 HRESULT 的异常：0x80020003（DISP_E_MEMBERNOTFOUND））”。

我也尝试在 VB.NET 和 C# 中进行早期绑定，但最终在不同的行上出现相同的错误。我在“oApplication.set_PROGRAMDRIVE("\\dev\lifepro\data\");”上得到了相同的错误 线。

```
private OAPPLICA.OAPPLICA oApplication = new OAPPLICA.OAPPLICA();
private OSESSION.OSESSION oSession = new OSESSION.OSESSION();
Int64 iReturnCode;

oApplication.set_PROGRAMDRIVE("\\\\dev\\data\\");
oApplication.set_WORKAREADRIVE("\\\\dev\\data\\workarea\\");
oApplication.set_DATADRIVE("\\\\dev\\data\\");
oApplication.set_IMAGEDRIVE("\\\\dev\\data\\image");

m_oSession.set_MYAPPLICATION(m_oApplication);
iReturnCode = Convert.ToInt64(m_oSession.LOGIN("USER1", "PASSWORD1")); 
```

如前所述，这两个 DLL（OAPPLICA.dll 和 OSESSION.dll）是第三方的，并允许进入第三方遗留系统的入口点。由于它是遗留的，我无法再访问第三方，我的任务是尝试将现有的 Windows VB6 应用程序原型转换为 .NET Web 应用程序。我的预感是 .NET 在解释两个 COM 对象的互操作 DLL 时遇到问题，但我一直无法找到任何可以为我指明方向的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:50:31.427

我的猜测是这段代码在 WinForms 应用程序中运行良好，你试过吗？

VB6 和大多数设计用于 VB6 的 COM 组件将要求您在 STA 线程上运行才能正常工作。您的 Web 代码可能在 MTA 线程上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T13:16:00.990

终于明白了。出于某种原因，.NET 在运行时将属性解释为只读（对于 C# 和 VB.NET 以及对于 web 和 windows），即使在设计时有 get 和 set 选项。VB6 在运行时和设计时都将属性解释为 get 和 set，所以你可以想象我的困惑。我以前从未遇到过这样的事情。无论如何，我开始在第三方 DLL 周围放置一个 VB6 包装器，然后让 .NET 引用 VB6 包装器 DLL。工作得很好，让我可以继续开发，但仍然想消除额外的 VB6 层。我们的一位 COBOL 开发人员最终能够模仿/重写旧版 DLL。我讨厌在这样的废话上浪费时间，但我很高兴它已经完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:16:50.850

如果@tcarvin 是正确的，而且他可能是正确的，您可以使用“AspCompat=true”页面指令强制 ASP.net 应用程序成为 STA - [msdn.microsoft.com/en-us/library/zwk9h2kb.aspx](http://msdn.microsoft.com/en-us/library/zwk9h2kb.aspx)

# mocking - TDD - 如何定义具有独立单元测试的集成测试范围？

> ID：11147273
> 
> 赞同：0
> 
> 时间：2012-06-21T21:48:49.403
> 
> 标签：mocking, tdd, integration-testing

假设我正在使用现有代码库中的一些代码开发新功能。我正在测试我的设计，所以我对我的功能部件进行了独立的测试，其中包括 stubbed/mocked 的合作者。现在我想测试他们是否很好地一起玩。

我是否应该编写一个庞大的测试，将所有真正的依赖关系连接在一起（除了一些外部系统等）？换句话说，我应该为整个故事编写集成测试，还是将它分成几个较小的部分，测试让我们说 3-4 个对象一起玩只是这个故事的一部分？然后我最终会从头到尾为整个功能编写测试。但是我应该在一个测试用例中执行多少个对象的协作？

如果是后者，我需要准备设置（连接依赖关系，其中一些存根），为每个测试准备测试数据和预期条件。现在往上走（在更高级别上对越来越多的模块进行分组）我仍然需要以某种方式“复制”这个准备步骤。这种“重复”不好吗？

我说的是“测试级别”，如下所示：

```
---------------------------------------------------------------
| ------------------------------------
|| ------  ------                    |
|| |unit|  |unit|  units integration |
|| ------  ------                    | 
|-------------------------------------     integration of some
|                                          already integrated
|-------------------------------------     units, etc
|| ------  ------                    |
|| |unit|  |unit|  units integration |
|| ------  ------                    | 
|-------------------------------------
|--------------------------------------------------------------- 
```

正如“经典”（而不是“嘲笑者”）TDD 从业者所说，我应该尽可能多地使用真正的实现。但是然后测试具有 3 级依赖关系并最终具有数据库或外部系统的对象意味着我仍然必须存根/模拟某些东西。那么我应该在最后只模拟这个繁重的/外部服务吗？

问这个问题的触发因素是保持我所有的测试都变得越来越困难，我认为我在某个地方失败了。代码中的每一次中等更改都会导致大量测试失败。我想知道我做错了什么。

提前感谢所有提示和答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:14:26.773

反思为什么你的测试如此脆弱。（[我的一些想法](http://madcoderspeak.blogspot.com/2011/07/a-team.html)..虽然针对端到端测试）。我需要有关您的情况的更多信息来提出补救措施。

如果功能被破坏，测试应该会失败——如果你重构你的代码，即通过行为保持转换来改变结构，那么你的测试不应该被破坏。

我目前的方法是

*   有很多微小的、集中的、超快速的单元测试（如果你将每个类与其依赖项隔离开来，则进行微测试）。这应该构成您的大部分测试
*   集成测试：参考端口和适配器（六边形）架构。您的应用程序与外部子系统（例如数据库或 Web）接口。明确定义您的应用程序和子系统之间的端口（接口）。接下来编写集成测试，验证插入端口的任何实现是否符合您的合同（例如，您将测试 MySqlDataRepository 是否可以通过针对真实数据库进行测试来实际保存信息）。通过这样做，您可以验证 MySqlDataRepository 是否有效。现在你所有的单元测试都不需要很慢..你可以使用 mockDatabase 而不会失去任何信心
*   最后，您需要进行一些端到端测试，以验证所有部件是否连接正确。正如你所说，这些将是最慢和最痛苦的维护。但是它们有价值；您可以通过选择正确的端到端运行测试来最大程度地减少维护麻烦。

更多信息：

*   [http://www.mountaingoatsoftware.com/blog/the-forgotten-layer-of-the-test-automation-pyramid](http://www.mountaingoatsoftware.com/blog/the-forgotten-layer-of-the-test-automation-pyramid)
*   [https://stackoverflow.com/a/3382235/1695](https://stackoverflow.com/a/3382235/1695)

# eclipse - Eclipse：没有鼠标的文本编辑

> ID：11147274
> 
> 赞同：6
> 
> 时间：2012-06-21T21:48:54.457
> 
> 标签：eclipse, keyboard-shortcuts

由于第五掌骨损伤，我有绷带。打字根本不是问题，我做了几个小时，这很好。使用鼠标......不可能。这并不是要成为一个生产力忍者，而不是浪费时间去接触触控板或鼠标……它实际上是暂时能够做一些事情或根本不能做一些事情。无论如何，这是一个问题，简单明了：

*   在 Eclipse 编辑器中，我可以只使用键盘移动吗？

我希望在不使用鼠标的情况下能够做的实际事情的例子：

*   将光标移动到行尾
*   将光标移动到行首
*   将光标下移一行
*   将光标向上移动一行
*   将光标向左移动一列
*   将光标向右移动一列
*   将光标向左移动一个单词
*   将光标向右移动一项
*   将光标移动到单词的末尾
*   将光标移动到单词的开头
*   删除光标左侧的字符
*   删除光标右侧的字符
*   等等

我意识到其中一些已经可以使用 END、HOME、CTRL/ALT + ARROW_KEY 等的混合来实现。但它不像 E-Macs 或 Vim 那样全面。

就如此容易。

在 Vim 中，我使用 j,k,h,l... 在 Xcode 中我使用 Emacs 绑定（CTRL-N、CTRL-P、CTRL-H）...如何以类似的方式使用 Eclipse？我听说过一个“vim”插件，但我真的只需要移动光标，就是这样。没有其他的。

我应该为每个动作创建自定义快捷方式吗？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:10:40.120

*   走到行尾：结束键
*   转到行首：Home 键
*   向下一行：向下箭头键
*   将光标向上移动一行：向上箭头键
*   将光标向左移动一列：不知道您所说的列是什么意思
*   将光标向右移动一列：同上
*   将光标向左移动一个单词： ctrl - 左箭头键
*   将光标向右移动一个单词： ctrl - 右箭头键
*   将光标移到词尾：不知道
*   将光标移动到单词的开头： ctrl - 左箭头键
*   删除光标左边的字符：退格
*   删除光标右边的字符：delete

这是在 Windows 上。所有快捷键都可以在 Window (Alt W) - Preferences (P) - General - Keys 中找到（在过滤器文本框中输入“Keys”）。上面的大多数快捷方式都是标准快捷方式，在每个 Windows 编辑器中都会用到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T22:34:30.050

我找到了 ：（

首选项 > 常规 > 按键 > Emacs

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-10T17:56:36.463

您几乎可以使用键盘完成所有操作：

在此处查看快捷方式的详细列表：

[http://www.shortcutworld.com/en/win/Eclipse.html](http://www.shortcutworld.com/en/win/Eclipse.html)

# opengl - OpenGL - 相机移动或旋转时物体抖动

> ID：11147275
> 
> 赞同：0
> 
> 时间：2012-06-21T21:48:59.567
> 
> 标签：opengl, camera, simulation, transformation, visual-glitch

我已将相机对象附加到场景中的移动对象（汽车）。摄像头显示物体所在的区域（汽车前窗）。

我的问题是，当我的对象（带相机）移动或旋转时，屏幕上的对象（路灯，其他平行移动的汽车）似乎在晃动。即，我在原始对象附近看到了同一对象的实体对象和一些小的透明版本。相机改变方向时比直线移动时更容易观察到。直线移动时，灯离观察者较远时会晃动，在一定范围内会停止晃动，当靠近观察者时又会开始晃动。

我不认为 OpenGL 自己会在背景上产生运动模糊。但是我也找不到这个问题的名字，所以我找不到起点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:22:28.513

当程序处于全屏模式时，绘制完整场景所需的时间低于 16 毫秒（对于 60 fps），那么我可以在没有物体摆动的情况下进行流畅的运动。

当绘制时间振荡太多或当我将 Vega 设置为通过算法限制 fps 时，场景会振荡。

当我将交换间隔设置为 1 时，即让底层绘制线程与屏幕刷新匹配，那么它又可以了。

# validation - CakePHP 使用 uploadit 验证时，保存失败

> ID：11147276
> 
> 赞同：0
> 
> 时间：2012-06-21T21:49:00.740
> 
> 标签：validation, cakephp, upload

好的，所以当用户在我的网站上注册时，我正在上传文档，我收集了一些个人信息并保存了它。现在我遇到了一个问题，我将主注册表单分成了几个视图，用户一旦登录就可以在其中编辑某些信息，例如一个名为personal_introduction的字段。出于某种原因，即使现场没有验证错误，这也不会保存。在模型中搞砸了，试图找出问题并发现这会导致问题：

```
 'document_file' => array(
        'checkuploadedit' =>array(
            'rule' => array('checkUpload', false),
            'message' => 'Please select your document.',            
        ),
        'checkuploadedit' => array(
            'rule' => array('extension', array('doc', 'docx', 'txt', 'rtf')),
            'message' => 'File extentions allowed: .doc .docx .txt .rtf - we do NOT accept pdf format.'
        )
    ), 
```

一旦我从我的模型中删除它，它就会保存数据。现在对我来说奇怪的是，主注册表单没有问题，而且这个甚至不包含名为“document_file”的表单输入的视图无法保存。

任何想法......拜托！显然我需要验证上传。

我试过这个：[对 cakephp 中的输入文件进行验证](https://stackoverflow.com/questions/3185603/validation-on-a-input-file-in-cakephp)，认为上面的代码可能不正确，仍然没有运气。

提前感谢您的回答。

干杯路易斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:56:50.920

我继续进一步调查该问题，发现以下问题，我仍然无法解释。在同一模型上提交不包含上传表单的视图时，它仍然会尝试验证上传表单，我实际上可以看到一个的值，就像提交一样，即使它不是。所以我得到的唯一解决方案是对没有文档上传表单字段的操作使用 unset($this->data['user']['document']) 。希望这是有道理的。

# objective-c - 等到后台选择器完成调用新方法

> ID：11147279
> 
> 赞同：2
> 
> 时间：2012-06-21T21:49:11.700
> 
> 标签：objective-c, ios, cocoa-touch, background-process

我正在尝试在加载视图时从 Internet 获取数据。为了不滞后 UI，我正在执行 HTML 下载和解析，方法是使用

```
[self performSelectorInBackground:@selector(alertThreadMethod) withObject:nil]; 
```

它检查是否有在线警报。然而，为了在视图上显示信息，iOS 说我需要使用主线程。所以我在之后立即调用显示代码：

```
[self performSelectorInBackground:@selector(alertThreadMethod) withObject:nil];
[self loadAlert]; 
```

在这样做时，`[self loadAlert];`实际上在后台的选择器之前运行（它更快）。因此，它没有后台选择器应该提供的信息。

我怎样才能确保`[self loadAlert];`运行后？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T22:02:53.017

您可以将 loadAlert 调用移动到 alertThreadMethod 或使用[Grand Central Dispatch](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)串行队列，例如，

```
dispatch_queue_t queue = dispatch_queue_create("com.example.MyQueue", NULL);
dispatch_async(queue, ^{
    [self alertThreadMethod];
    [self loadAlert];
});
dispatch_release(queue); 
```

或者，如果 loadAlert 正在更新 UI，因为您在主队列中进行 UI 更新，您将执行以下操作：

```
dispatch_queue_t queue = dispatch_queue_create("com.example.MyQueue", NULL);
dispatch_async(queue, ^{
    [self alertThreadMethod];
    dispatch_async(dispatch_get_main_queue(), ^{
        [self loadAlert];
    });
});
dispatch_release(queue); 
```

顺便说一句，如果您只是在后台执行这项任务，而不是创建自己的串行队列，您可能只使用现有的后台队列之一。如果您需要串行性质，您只需要创建一个队列（即您将有大量的 dispatch_async 调用并且您不能让它们同时运行）。但在这个简单的例子中，这可能会更高效一些，绕过串行队列的创建和释放：

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^{
    [self alertThreadMethod];
    dispatch_async(dispatch_get_main_queue(), ^{
        [self loadAlert];
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:11:34.560

在您的 alertThreadMethod 中，获得信息后，调用方法 performSelectorOnMainThread:withObject:waitUntilDone: 并将选择器传递给您的 loadAlert 方法。

```
-(void)alertThreadMethod
{
   // get your information here

   performSelectorOnMainThread:@selector(loadAlert) withObject:nil waitUntilDone:NO
} 
```

# xslt - 为什么我的 XSLT 密钥没有按预期工作？

> ID：11147284
> 
> 赞同：1
> 
> 时间：2012-06-21T21:49:37.187
> 
> 标签：xslt, xslt-1.0, symphony-cms

我觉得我遗漏了一些明显的东西，但我无法弄清楚为什么我的 XSLT 1.0 密钥对我不起作用。

我想要的输出是“Sample Brand”（请参阅​​下面 XSLT 中的评论），但根本没有输出。

我所做的测试似乎表明没有生成密钥，因为当我`for-each`使用`key()`带有一些虚拟输出的函数时，也没有任何输出（似乎有 0 个关键项）。但我不确定这一点。

XML:

```
<data>
    <products-by-instances>
        <entry id="1975">
            <name>Sample Name</name>
            <brand>
                <item id="1970">Sample Brand</item>
            </brand>
            <instances>
                <item id="1972">MILT501</item>
                <item id="1974">MILT502</item>
            </instances>
        </entry>
    </products-by-instances>
    <shopping-cart items="2" total="35">
        <item id="1972" num="1" sum="5" />
        <item id="1974" num="3" sum="30" />
    </shopping-cart>
</data> 
```

XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:key name="products-by-instance-id" match="/data/products-by-instances/entry" use="instances/item/@id"/>

<!-- other templates redacted for brevity; the below template is being applied -->

<xsl:template match="/data/shopping-cart/item">
    <xsl:value-of select="key(products-by-instance-id, @id)/brand/item"/>
    <!-- desired output is "Sample Brand" -->
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:21:44.300

现在有人向我指出，我忽略了将键名放在引号中：

```
<xsl:value-of select="key('products-by-instance-id', @id)/brand/item"/> 
```

密钥现在按预期工作。

# ios - ios 了解我的块中的 SIGABRT

> ID：11147286
> 
> 赞同：0
> 
> 时间：2012-06-21T21:49:58.717
> 
> 标签：ios, sigabrt

我的图像下载后会触发一个块。从`data`块进来的是图像。不过，我不确定为什么要获得 SIGABRT。这在第一次加载时效果很好，但是当我回到同一个地方时，我总是第二次崩溃。

您想看到的所有内容都应该在左下角，并按以下顺序打印在右下角：`data`, `ptr`, `ptr`->`imageImg`

![在此处输入图像描述](../Images/57b0eaeee59ddf4b5404b16b9f446e47.png)

** 编辑 **

我也忘了添加堆栈转储

```
2012-06-21 15:52:59.119 iPhone App[25327:16a03] -[UIImage length]: unrecognized selector sent to instance 0x10e41b80
2012-06-21 15:52:59.120 iPhone App[25327:16a03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIImage length]: unrecognized selector sent to instance 0x10e41b80'
*** First throw call stack:
(0x1c35022 0x37dccd6 0x1c36cbd 0x1b9bed0 0x1b9bcb2 0x68e97a 0x5612c8 0x56102b 0x1be82 0x2afbc 0x46ad330 0x46af509 0x1b6c803 0x1b6bd84 0x1b6bc9b 0x1dc77d8 0x1dc788a 0x546626 0x28704 0x20d5)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:55:36.090

您正在调用`length`，`UIImage`但`UIImage`没有调用方法`length`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:12:37.597

经过几个小时试图不把我的头发拉出来，我终于弄明白了。

# 情况

我有一个缓存系统来缓存下载的文件，然后将存储的版本发送回我的回调。出于某种原因，我试图保存到其中有问号（和其他符号）的文件路径，这显然不会让 ios 将文件保存到设备 *note xcode 也没有设备警告我该文件不是也得救了。然而，记录保存系统显示一切正常，这意味着发回的数据是空的 NSData。

# 解决方案

保存离线数据和中提琴时，我确保我的文件路径中没有符号。

# javascript - 想要在加载时显示或隐藏 html 页面的部分，默认基于页面顶部的文本框检查选项

> ID：11147288
> 
> 赞同：0
> 
> 时间：2012-06-21T21:50:07.283
> 
> 标签：javascript, html

我有一个 html，其中有一堆由显示隐藏按钮控制的文本（比如说这个代码片段是 para）。现在我想在此之上添加额外的控制层。我希望在加载时在 html 页面顶部有一个文本框，以便在默认情况下根据选中取消选中文本框来选择隐藏或显示 para。

这是我的代码段

```
print $indexfd
qq~<div id="div_$var3">\n~, # Add a div around the $key-elements
qq~<input onclick="showit('$var3')" type="button" id="btn_show_$var3" value="showit">\n~,
qq~<input onclick="hideit('$var3')" type="button" id="btn_show_$var3" value="hideit"><br/>\n~,
qq~<ol id="$var3" style="display: none"><li><b>$var3->{name} \: $var3->{value}</b></li></ol>\n~,
qq~</div>\n~; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:20:42.187

这不是 Perl 可以为您做的事情。您将需要在 JavaScript 中执行此操作。看看[jQuery](http://docs.jquery.com/Downloading_jQuery) lib 的函数[`toggle()`](http://api.jquery.com/toggle/)。那应该做你想做的事。添加您的段落并添加某种按钮或其他任何东西。然后在该段落的那个按钮上添加一个`click`-handler `toggle`。

这是文档的摘录：

> 我们可以为任何元素设置动画，例如简单的图像：
> 
> ```
> <div id="clickme">
>   Click here
> </div>
> <img id="book" src="book.png" alt="" width="100" height="123" /> 
> ```
> 
> 当单击另一个元素时，我们将调用 .toggle() ：
> 
> ```
> $('#clickme').click(function() {
>   $('#book').toggle('slow', function() {
>     // Animation complete.
>   });
> }); 
> ```

不要忘记在 HTML 文档的部分中[加载 jQuery 文件。](http://docs.jquery.com/How_jQuery_Works)`<head>`

# excel - 在Excel中从下到上选择一个范围？

> ID：11147291
> 
> 赞同：0
> 
> 时间：2012-06-21T21:50:26.687
> 
> 标签：excel

假设我需要在 Excel 中选择一个从 A2 到 A1 的范围，（如果我要插入一些东西，它需要先插入到 a2）。

无论我选择哪个方向，Excel 都会自动选择`Sheet1!$A$1:$A$2`. 我什至尝试手动将其更改为，`Sheet1!$A$2:$A$1`但没有奏效。

如何禁用此自动选择或如何从下到上选择范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T15:56:46.280

真正的替代方案似乎不是在插入 A1 之前插入 A2，而是先插入 A2，然后继续插入 A2，Shift 单元格向下。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-08-25T05:57:09.950

从下到上，您必须从底部选择范围，就像我在`countif`公式中所做的那样：

```
=COUNTIF($AA$8:AA8,AA8) 
```

我锁定了 AA8 单元格并使其范围与同一单元格相同，因为当前行上方没有其他行。标准又是这个单元格，所以我得到了我的结果。

# powershell - 将参数传递给用于 Test-Path -include 选项的powershell脚本？

> ID：11147293
> 
> 赞同：0
> 
> 时间：2012-06-21T21:50:30.573
> 
> 标签：powershell

这是我第一次提出问题，所以请多多包涵。我通过编写一些基本的维护脚本来自学powershell。我的问题是关于我正在编写的清理脚本，它接受参数来确定要删除的目标目录和文件。

问题：

该脚本接受一个可选参数，用于处理文件删除时要查找的文件扩展名列表。我正在尝试在实际运行删除之前测试文件是否存在。我使用带有 –include 参数的 test-path 在 ValidateScript 块中运行检查。如果我传入一个文件扩展名或没有文件扩展名，它会起作用，但是当我尝试传入多个文件扩展名时，它会失败。

我尝试在脚本内的代码上使用以下变体：

```
[ValidateScript({ Test-Path $targetDirChk  -include $_ })]

[ValidateScript({ Test-Path $targetDirChk  -include "$_" })]

[ValidateScript({ Test-Path $targetDirChk  -include ‘$_’ })] 
```

对于上述每种可能性，我已经使用以下变体从命令行运行了多扩展名文件列表的脚本：

```
& G:\batch\DeleteFilesByDate.ps1 30 G:\log  *.log,*.ext

& G:\batch\DeleteFilesByDate.ps1 30 G:\log  “*.log, *.ext”

& G:\batch\DeleteFilesByDate.ps1 30 G:\log  ‘*.log, *.ext’ 
```

错误信息示例：

```
chkParams : Cannot validate argument on parameter 'includeList'. The " Test-Path $targetDirChk -include "$_" " validation script for the argument with value "*.log, *.ext" did not return true. Determine why the validation script failed and then try the command again.
At G:\batch\DeleteFilesByDate.ps1:81 char:10
+ chkParams <<<<  @args
    + CategoryInfo          : InvalidData: (:) [chkParams], ParameterBindingValidationException
    + FullyQualifiedErrorId : ParameterArgumentValidationError,chkParams 
```

完整的脚本如下。我还没有添加删除文件的实际代码，因为我仍在努力接受和验证传入的参数。

我已经搜索了 google 和 stackoverflow，但我还没有找到解决这个特定问题的方法。我假设我的代码有问题，或者有更好的方法来完成我想做的事情。

注意：我应该提到，我还尝试在脚本之外运行具有多个文件扩展名的测试路径，没有任何问题：

```
PS G:\batch\powershell> test-path G:\log\* -include *.log

True

PS G:\batch\powershell> test-path G:\log\* -include *.log, *.ext

True 
```

脚本：

```
# Check that the proper number of arguments have been supplied and if not provide usage statement.
# The first two arguments are required and the third is optional.
if ($args.Length -lt 2 -or $args.Length -gt 3 ){
    #Get the name of the script currently executing.
    $ScriptName = $MyInvocation.MyCommand.Name
    $ScriptInstruction = @"

    usage: $ScriptName <Number of Days> <Directory> [File Extensions]

    This script deletes files from a given directory based on the file date.

    Required Paramaters:

    <Number of Days>:   
    This is an integer representing the number of days worth of files 
    that should be kept. Anything older than <Number of Days> will be deleted.

    <Directory>:        
    This is the full path to the target folder.

    Optional Paramaters:

    [File Extensions]   
    This is the set of file extensions that will be targeted for processing. 
    If nothing is passed all files will be processed.
"@  
    write-output $ScriptInstruction
    break
}
#Function to validate arguments passed in.
function chkParams()
{
    Param(
    [Parameter(Mandatory=$true,
        HelpMessage="Enter a valid number of days between 1 and 999")]

    #Ensure the value passed is between 1 and 999.
    #[ValidatePattern({^[1-9][0-9]{0,2}$})]
    [ValidateRange(1,999)]
    [Int]
    $numberOfDays,

    [Parameter(Mandatory=$true,
        HelpMessage="Enter a valid target directory.")]
    #Check that the target directory exists.
    [ValidateScript({Test-Path $_ -PathType 'Container'})] 
    [String]
    $targetDirectory,   

    [Parameter(Mandatory=$false,
        HelpMessage="Enter the list of file extensions.")]  
    #If the parameter is passed, check that files with the passed extension(s) exist.   
    [ValidateScript({ Test-Path $targetDirChk -include "$_" })]
    [String]
    $includeList
    )
    #If no extensions are passed check to see if any files exist in the directory.
    if (! $includeList ){
        $testResult = Test-path $targetDirChk
        if (! $testResult ){
            write-output "No files found in $targetDirectory"
            exit
        }
    } 
}
#
if ($args[1].EndsWith('\')){
    $targetDirChk = $args[1] + '*'
} else {
    $targetDirChk = $args[1] + '\*'
}       
chkParams @args 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:59:01.070

`-Include`on`Test-Path`是一个`string[]`。您可能想反映该定义：

```
[ValidateScript({ Test-Path $targetDirChk -include $_ })]
[String[]]
$includeList 
```

并从那里删除，`""`因为它们将强制参数为字符串，从而尝试匹配看起来像``foo.log blah.ext`.

您还必须在调用函数时在该参数周围放置括号或删除空格。

# asp.net - 将模块添加到我的系统

> ID：11147295
> 
> 赞同：0
> 
> 时间：2012-06-21T21:50:35.763
> 
> 标签：asp.net, dll, module

我正在设计一个信息系统（在 asp.net 中），一旦完成，它将处理不同的模块。
而且我没有足够的时间和金钱一次制作所有模块，所以我决定先做几个模块，然后当我有时间或金钱时继续重置它们。现在的问题是：是否有从列表中调用模块的通用方法，例如：我会创建一个包含模块的目录，我打算在其中删除模块的 .dll，所以当我创建一个新的时，我会将新的 .dll 放在那里。另一方面，我想构建类似骨架的东西，我将通过代码一般调用我创建的目录中的所有模块，而无需在将新模块放入目录时重新编写骨架的代码。最后我' 我计划每个模块应该有三层，一层用于数据库访问另一层用于逻辑，最后一层用于界面绘图，因此每个模块应该相互独立。是否可以？我应该怎么做我一直在寻找但找不到任何东西。你有更好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:09:44.647

您肯定需要创建模块实现的通用接口和通用数据协定。如果您需要动态加载 dll - 可以，但您需要使用反射。看这里：

[http://dranaxum.wordpress.com/2008/02/25/dynamic-load-net-dll-files-creating-a-plug-in-system-c/](http://dranaxum.wordpress.com/2008/02/25/dynamic-load-net-dll-files-creating-a-plug-in-system-c/)

# ruby - 学习 Ruby the Hardway ex。42\. 2 个文件中的 2 个类

> ID：11147296
> 
> 赞同：2
> 
> 时间：2012-06-21T21:50:42.157
> 
> 标签：ruby, class, learn-ruby-the-hard-way

我了解类是如何工作的以及如何制作它们，但是练习的第二个额外学分说要在 2 个不同的文件中创建一个两个类的版本。

我尝试了不同的东西，但我不知道如何使它工作......

我不知道我是否没有在正确的地方搜索，但我找不到任何帮助，也找不到任何解决方案......

如果有人可以帮助我，将不胜感激:)

这是练习：[http ://ruby.learncodethehardway.org/book/ex42.html](http://ruby.learncodethehardway.org/book/ex42.html)

到目前为止我所尝试的：

```
map.rb
class Map

with all the methods in here (death(), central_corridor(), etc.) 
```

然后

```
engine.rb
class Engine
require './map.rb'

  def initialize(start)
    @quips = [
      "You died. You kinda suck at this.",
      "Nice job, you died... jackass.",
      "Suck a luser."
    ]

    @start = start
    puts "in init @start = " + @start.inspect
  end

  def prompt()
    print "> "
  end

  def play()
    puts "@start => " + @start.inspect
    @next_room = @start

    while true
      puts "\n--------"
      room = method(@next_room)
      @next_room = room.call()
    end
  end

end

a_game = Engine.new(:central_corridor)
a_game.play() 
```

所以基本上我所做的是获取用于游戏中“动作”的方法（房间、死亡等）并将它们放在 map.rb 中的类 Map 中，然后在我有我的类的 engine.rb 中调用具有“通用”方法/变量（如提示、播放、启动）的引擎。

我得到的错误是

```
engine.rb:24:in `method': undefined method `central_corridor' for class `Engine' 
```

我理解这意味着 ruby​​ 试图在类引擎中找到一个方法“central_corridor”，但它在 map.rb 的类映射中，我不知道该怎么做，要么是一些变量修改，要么只是一些要添加的东西... :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:47:04.323

问题是您没有 class 的实例`Map`，这是您需要能够调用`central_corridor`的。将此添加到`initialize`：

```
@map=Map.new 
```

并更改`room = method(@next_room)`为`room=@map.method(@next_room)`.

* * *

尽管这不是您的问题，但我有一种感觉，如果`Map`永远不会改变（您对地图中的所有内容都有方法），那么您将所有方法都设为类方法，然后将类`Map`用于您的地图。但是根据良好的设计原则，您可能应该使地图具有`Hash`代表区域的 lambda。这样，您可以拥有多个地图

# c# - 分组行并从每个组中获取最大值。

> ID：11147303
> 
> 赞同：1
> 
> 时间：2012-06-21T21:51:08.790
> 
> 标签：c#, linq, entity-framework-4

下面我有表 - 公司

```
 id name value year
    1  IBM   10   2011
    2  IBM   30   2012
    3  IBM   10   2012
    4  C     10   2010 
```

我想按*名称*对记录进行分组，并且从每个组中只返回一条具有最大*id*的记录。所有结果都合并到使用 linq 的公司列表中，其中年份大于 2011 年。对于我的示例输出应该是 - “3 IBM 10 2012”

我确实写了一些东西，但没有用。

```
var a = from x in companies where x.year > 2011
                  group x by new {x.name, x.value, x.ID, x.year } into g
                  select new {
                                  g.Key.name,
                                  g.Key.value,
                                  g.Max(a=>a.ID),
                                  g.Key.value
                              };
 return a.ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:55:14.243

不要在分组中包含 ID。事实上，如果您只想将它​​们按公司名称分组，也不要包含任何其他属性：

```
// set up for testing
var companies =
    from c in new[]{"1,IBM,10,2011", "2,IBM,30,2012", "3,IBM,10,2012", "4,C,10,2010"}
    let cp = c.Split(',')
    select new {id=int.Parse(cp[0]), name=cp[1], value=int.Parse(cp[2]), year=int.Parse(cp[3])};

// query
var q = from x in companies where x.year > 2011
        group x by x.name into g
        let top = g.OrderByDescending(x => x.id).FirstOrDefault()
        select new {
                        top.name,
                        top.value,
                        top.id,
                        top.year
                    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:13:31.847

试试这个：

```
 var a = from x in companies
                where x.Year > 2011
                group x by new { x.Name } into g
                from x1 in companies
                where x1.ID == (from x2 in g select x2.ID).Max()
                select x1; 
```

或者更有效的东西：

```
var a = from x in companies
                    where x.Year > 2011
                    group x by new { x.Name } into g
                    join x2 in companies on (from x3 in g select x3.ID).Max() equals x2.ID
                    select x2; 
```

# qt - 可排序的 QBoxLayout

> ID：11147304
> 
> 赞同：2
> 
> 时间：2012-06-21T21:51:08.930
> 
> 标签：qt, drag-and-drop, jquery-ui-sortable

我有一个 QGroupBoxes 列表，我希望它们像拖放到另一个订单一样“可排序”。非常像 QListView 用 InternalMove 做的。

是否有可能在*不*重新发明轮子的情况下做到这一点？我确实知道我可以自己通过拖放来完成，但是在拖动等时有很好的位置指示器，这不是一个没有太多 qt 经验的人可以在几个小时内完成的事情。我已经看过 QListView 是如何做到的，但它似乎是完全从头开始实现的，或者有一种简单的方法可以让我使用它吗？

我的另一个想法是实际使用 QListView 但将 QGroupBoxes 放在那里似乎并不那么简单。我尝试对 QStyledItemDelegate 进行子类化，虽然绘画效果很好，但我在编辑器上遇到了麻烦——我想我最好在 createEditor 中返回我的 groupbox 的副本？但是自从我有了这个想法已经过去了两个小时，而且还远未奏效。

顺便说一句，这不是[Sortable QHBoxLayout](https://stackoverflow.com/questions/4672522/sortable-qhboxlayout)的副本- 完全不同的问题

# android - 与本机短信应用程序 Android 中的名称和号码自动完成

> ID：11147311
> 
> 赞同：4
> 
> 时间：2012-06-21T21:51:53.343
> 
> 标签：android, android-contacts, autocompletetextview

我想`AutoCompleteTextView`在我的应用程序中添加一个并按名称和号码搜索联系人，就像在带有 android 的本机 SMS 应用程序中所做的那样。我已经在互联网上查看并尝试了很多东西，但我希望我的应用程序将其完全显示为 android SMS 应用程序。这是我正在尝试仅搜索的代码`Display_Name`。

```
public class MakePayment extends Activity {
    private AutoCompleteTextView mAuto;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.makepayment);

        mAuto = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextViewTest);
        ContentResolver content = getContentResolver();
        Cursor cursor = content.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                PEOPLE_PROJECTION, null, null, null);

        ContactListAdapter adapter = new ContactListAdapter(this, cursor);
        mAuto.setAdapter(adapter);
    }

     public static class ContactListAdapter extends CursorAdapter implements Filterable {
            public ContactListAdapter(Context context, Cursor c) {
                super(context, c);
                mContent = context.getContentResolver();
            }

            @Override
            public View newView(Context context, Cursor cursor, ViewGroup parent) {
                 final LayoutInflater inflater = LayoutInflater.from(context);
                    final TextView view = (TextView) inflater.inflate(
                            android.R.layout.simple_expandable_list_item_1, parent, false);
                    view.setText(cursor.getString(2));
                    return view;
            }        

            @Override
            public void bindView(View view, Context context, Cursor cursor) {
                ((TextView) view).setText(cursor.getString(2));

            }

            @Override
            public String convertToString(Cursor cursor) {
                return cursor.getString(2);
            }

            @Override
            public Cursor runQueryOnBackgroundThread(CharSequence constraint) {
                if (getFilterQueryProvider() != null) {
                    return getFilterQueryProvider().runQuery(constraint);
                }

                StringBuilder buffer = null;
                String[] args = null;
                if (constraint != null) {
                    buffer = new StringBuilder();
                buffer.append("UPPER(");
                buffer.append(ContactsContract.Contacts.DISPLAY_NAME);
                buffer.append(") GLOB ?");
                    args = new String[] { constraint.toString().toUpperCase() + "*" };
                }

                return mContent.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, PEOPLE_PROJECTION,
                        buffer == null ? null : buffer.toString(), args,
                        null);
            }

            private ContentResolver mContent;           
        }

     private static final String[] PEOPLE_PROJECTION = new String[] {
            ContactsContract.Contacts._ID,
            ContactsContract.CommonDataKinds.Phone.NUMBER,
            ContactsContract.Contacts.DISPLAY_NAME,
        };

} 
```

我如何也可以通过电话号码进行搜索？然后像这样显示它： ![在此处输入图像描述](../Images/b206231c9393c8d0b00169ceab4a3ded.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T23:06:34.430

我过去已经做过类似的事情，这就是我所做的：

**注意：**录制两个字符后，您将获得自动完成

布局文件使用 AutoCompleteView，它基本上是一个带有下拉列表的 EditText，在您输入时会出现。youe 示例中的 .xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:orientation="vertical"

android:layout_width="fill_parent"

android:layout_height="fill_parent"

>

<AutoCompleteTextView

android:id="@+id/mmWhoNo"

android:layout_width="fill_parent"

android:layout_height="wrap_content"

android:hint="To...."

>

</AutoCompleteTextView>

</LinearLayout> 
```

要创建 AutoCompleteView 中使用的自定义视图，您必须声明另一个名为 custcontview.xml 的 .xml 文件，它看起来像这样：

```
<TextView
    android:id="@+id/ccontName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textColor="#A5000000"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/ccontNo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/ccontName"
    android:text="Medium Text"
    android:textColor="#A5000000"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/ccontType"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@id/ccontNo"
    android:layout_alignParentRight="true"
    android:layout_marginRight="14dp"
    android:text="Small Text"
    android:textColor="#A5000000"
    android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

现在在您的活动中：

```
public class ContactActivity extends Activity {

    private ArrayList<Map<String, String>> mPeopleList;

    private SimpleAdapter mAdapter;
    private AutoCompleteTextView mTxtPhoneNo;

/** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mPeopleList = new ArrayList<Map<String, String>>();
        PopulatePeopleList();
        mTxtPhoneNo = (AutoCompleteTextView) findViewById(R.id.mmWhoNo);

        mAdapter = new SimpleAdapter(this, mPeopleList, R.layout.custcontview ,new String[] { "Name", "Phone" , "Type" }, new int[] { R.id.ccontName, R.id.ccontNo, R.id.ccontType });

        mTxtPhoneNo.setAdapter(mAdapter);

        }

    public void PopulatePeopleList()
    {

    mPeopleList.clear();

    Cursor people = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);

    while (people.moveToNext())
    {
    String contactName = people.getString(people.getColumnIndex(
    ContactsContract.Contacts.DISPLAY_NAME));

    String contactId = people.getString(people.getColumnIndex(
    ContactsContract.Contacts._ID));
    String hasPhone = people.getString(people.getColumnIndex(
    ContactsContract.Contacts.HAS_PHONE_NUMBER));

    if ((Integer.parseInt(hasPhone) > 0))
    {

    // You know have the number so now query it like this
    Cursor phones = getContentResolver().query(
    ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
    null,
    ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ contactId,
    null, null);
    while (phones.moveToNext()) {

    //store numbers and display a dialog letting the user select which.
    String phoneNumber = phones.getString(
    phones.getColumnIndex(
    ContactsContract.CommonDataKinds.Phone.NUMBER));

    String numberType = phones.getString(phones.getColumnIndex(
    ContactsContract.CommonDataKinds.Phone.TYPE));

    Map<String, String> NamePhoneType = new HashMap<String, String>();

    NamePhoneType.put("Name", contactName);
    NamePhoneType.put("Phone", phoneNumber);

    if(numberType.equals("0"))
    NamePhoneType.put("Type", "Work");
    else
    if(numberType.equals("1"))
    NamePhoneType.put("Type", "Home");
    else if(numberType.equals("2"))
    NamePhoneType.put("Type",  "Mobile");
    else
    NamePhoneType.put("Type", "Other");

    //Then add this map to the list.
    mPeopleList.add(NamePhoneType);
    }
    phones.close();
    }
    }
    people.close();

    startManagingCursor(people);
    }
    } 
```

不要忘记添加

```
<uses-permission android:name="android.permission.READ_CONTACTS"></uses-permission> 
```

在你的清单中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:46:04.053

AutoCompleteTextView 是使用@K_Anas 的代码完成的。由于它返回一个 (key, value) 对，我使用以下内容仅显示所选项目的编号：

```
@Override
public void onItemClick(AdapterView<?> av, View v, int index, long arg) {
    Map<String, String> map = (Map<String, String>) av.getItemAtPosition(index);
    Iterator<String> myVeryOwnIterator = map.keySet().iterator();
          while(myVeryOwnIterator.hasNext()) {
            String key=(String)myVeryOwnIterator.next();
            String value=(String)map.get(key);
            mTxtPhoneNo.setText(value);
        }               
    }
}); 
```

在这个问题中取得的成就：

*   AutoCompleteTextView 以与上面问题中的图片一样的格式加载联系人。
*   将文本设置为所选值的电话号码。

# sql - SQL SELECT 和 SUM 从三个

> ID：11147312
> 
> 赞同：3
> 
> 时间：2012-06-21T21:51:58.110
> 
> 标签：sql, vb.net

几个小时以来，我一直在思考我认为简单的 SQL SELECT 命令。我搜索了所有地方并阅读了所有与我相关的问题。我尝试了一个 SQL 命令生成器，甚至阅读并应用了完整系列的 SQL 教程和手册，试图从头开始理解它来构建它（这对我来说非常重要，关于我最终必须构建的下一个命令......） .

但是现在我只是坚持我想要的结果，但是在分离 SELECT 命令时，我似乎无法聚集在一起！

这是我的情况：3个表，第一个链接到第二个有一个公共ID，第二个链接到第三个有另一个公共ID，但从第一个到第三个没有公共ID。比方说：

```
Table A : id, name
Table B : id, idA, amount
Table C : id, idB, amount 
```

表 A 中的几个名称。表 B 中的几个数量。表 C 中的几个数量。所需的结果：每个 A.id 和 A.name，具有 B.amount 的相应 SUM，以及 C.amount 的相应 SUM。比方说：

```
A.id
A.name
SUM(B.amount) WHERE B.idA = A.id
SUM(C.amount) WHERE C.idB = B.id for each B which B.idA = A.id 
```

“前三列”和“前两列和第四列”都可以，都带有 WHERE 子句和/或 LEFT JOIN。但是我不能在不弄乱所有东西的情况下将所有第四列累积在一起！

有人会说“很简单，只需在表 C 中放一个 idA 列”！应该更容易，当然。但真的有必要吗？我不这么认为，但我可能是错的！所以，我只是取悦任何有 SQL 技能的人（我会给他们一个永恒的“SQL 上帝”装饰）笑着回答“这太简单了！只要这样做，你就走了！愚蠢的小新手......”；）

运行 VB 2010 和 MS SQL Server

谢谢阅读 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T21:55:24.383

试试这个：

```
SELECT A.Id, A.Name, ISNULL(SUM(B.amount), 0) as bSum, ISNULL(SUM(C2.Amount), 0) as cSum
FROM A 
LEFT OUTER JOIN B ON A.Id = B.idA
LEFT OUTER JOIN (SELECT C.idB, SUM(C.AMOUNT) AS Amount FROM C GROUP BY C.idB) AS C2 ON C2.idB = B.Id
GROUP BY A.Id, A.Name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T22:20:22.380

试试这个：

```
SELECT 
    a.id, 
    a.name, 
    sum(x.amount) as amountb, 
    sum(x.amountc) as amountc 
from a 
    left join (
        select
            b.id, 
            b.ida, 
            b.amount, 
            SUM(c.amount) as amountc
        from b 
        left join c 
            on b.id = c.idb
        group by 
            b.id, 
            b.amount, 
            b.ida
    ) x 
        on a.id = x.ida
group by 
    a.id, 
    a.name 
```

这应该为您提供您正在寻找的结果集。它将每个 B.id 的所有 C.Amount 相加，然后将它们全部添加到一个结果集中。我用 MSSQL 中的一些示例数据对其进行了测试，它按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:55:23.350

```
Select a.id, a.name, sum(b.amount), sum(c.amount)
from a inner join b on a.id = b.idA
inner join c on b.id = c.idB
group by a.id, a.name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T21:55:36.280

您需要单独添加它们：

```
select a.id, a.name, (coalesce(b.amount, 0.0) + coalesce(c.amount, 0.0))
from a left outer join
     (select b.ida, sum(amount) as amount
      from b
      group by b.ida
     ) b
     on a.id = b.ida left outer join
     (select b.ida, sum(amount) as amount
      from c join
           b
           on c.idb = b.id
      group by b.ida
     ) c
     on a.id = c.ida 
```

当给定 id 的 b 和 c 记录都不存在时，要考虑外部连接。

# javascript - 如何将函数推迟到元素可用？

> ID：11147315
> 
> 赞同：1
> 
> 时间：2012-06-21T21:52:29.143
> 
> 标签：javascript, jquery, html, dom, javascript-events

我有动态生成的内容。如何“监听”选择器并在可用时触发功能，然后停止监听。jQuery 1.7 中有这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:01:42.553

**编辑**：对不起，没有真正阅读你的问题！:)

你可以做到，但有点痛苦。jQuery 中没有对它的原生支持，但浏览器会触发您可以挂钩的事件。查看可用的[突变事件](http://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-MutationEvent)以及如何实现它们，特别是[DOMNodeInserted 事件](http://help.dottoro.com/ljmcxjla.php)。[这里](http://www.bennadel.com/blog/1623-Ask-Ben-Detecting-When-DOM-Elements-Have-Been-Removed-With-jQuery.htm)还有一些关于如何处理元素删除的信息（使用 jQuery 挂钩到 DOMNodeRemoved 事件）。希望这可以帮助！

*我原来的错误答案：*

您应该能够使用 jQuery`on()`方法将事件绑定到给定元素。如果在呈现页面时元素不存在，您可以将事件绑定到确实存在的父元素，并让 jQuery 通过 DOM 将事件“冒泡”到您附加的处理程序。

这是取自[文档](http://api.jquery.com/on/)的示例。该事件绑定到`tbody`元素，但它处理后代`tr`元素上的点击事件，该事件绑定时可能存在也可能不存在。

```
$("#dataTable tbody").on("click", "tr", function(event){
    alert($(this).text());
}); 
```

# vb.net - 为什么调用 SmtpClient.Dispose 时出现错误 BC30456？

> ID：11147318
> 
> 赞同：0
> 
> 时间：2012-06-21T21:52:36.357
> 
> 标签：vb.net, idisposable

我在 Visual Studio 2012 中遇到的确切错误是：

> 错误 BC30456：“Dispose”不是“System.Net.Mail.SmtpClient”的成员。

```
 Dim SmtpServer As New SmtpClient()
    Dim mail As New MailMessage()
    SmtpServer.Port = 25
    SmtpServer.Host = MYHOST.com"
    mail = New MailMessage()
    mail.From = New MailAddress("MYADDRESS@DOMAIN.com")
    mail.To.Add("RECIPIENT@DOMAIN.com")
    mail.Subject = "Test Mail"
    mail.Body = "This is for testing SMTP mail"
    SmtpServer.Send(mail)
    SmtpServer.Dispose() 
```

这应该是一个明显的错误。您可能会认为我使用的是 .net framework 3.5 或更低版本，因为 `Dispose()`它只是在 .net 4.0 中作为成员添加到 SmtpClient 中。但是，我使用的是 4.0！

在网站属性页面中，它声明 4.0。还有其他地方我需要设置为 4.0 吗？编译器设置可能在某处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:59:56.013

正如您所观察到的，您确实使用的是 System.Net.Mail.SmtpClient 的 3.5 版本。

为确保您使用的是版本 4：

*   在 Visual Studio 中导航到项目的引用目录
*   删除对 System.Net 的引用
*   右键，添加引用
*   在列表中找到程序集，如下所示

![在此处输入图像描述](../Images/369aedd189dde5b04fc840288f180345.png)

![在此处输入图像描述](../Images/5d797d12dd4b2dfe076a4c426f9c67d3.png)

另外，考虑重构你的代码以拥有一个`Using`块。

```
Using smtp As New SmtpClient()    
   smtp.Port = 25
   'etc etc
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:30:41.960

我现在已经解决了这个问题。不太确定实际上是什么原因造成的，但对于遇到类似问题的其他人来说，这是我修复它的方法。

转到您的属性页面。（右键单击项目 --> 属性页）（或者只是 Shift+F4）

在左侧框中选择“构建”。（[图片](https://dl.dropbox.com/u/55017434/Capture3.PNG)）

将“目标框架”更改为“.NET Framework 3.5”

完成后，关闭您的项目/解决方案。

重新打开您的项目并重复该过程，这次选择“.NET Framework 4.0”。

完成后关闭并重新打开您的项目。

我猜这会将所有必需的引用重置为 4.0。也许VS甚至缓存引用？这会清除缓存吗？不确定，但它对我有用，如果你有同样的问题，值得一试。

# java - Ajax 在带有 jquery 幻灯片的 JSF 中无法正常工作

> ID：11147320
> 
> 赞同：1
> 
> 时间：2012-06-21T21:52:52.403
> 
> 标签：java, jquery, ajax, jsf, facelets

我有这个用**JSF 2.0 facelets**编写的应用程序，它有以下代码，应该在**jQuery 幻灯片控制**的区域中显示一些内容，这意味着你按下一个显示该区域的按钮，然后再次按下它来隐藏它

```
<f:ajax render="messageID">
      <h:form id="myform" styleClass="form1" >
          <h:message id="messageID" for="signinemail" class="messageforlogin"/>
          <h:panelGrid styleClass="loginpanel" columns="2" cellspacing="4">

          <h:outputText value="Email: "/>
          <h:inputText class="textboxes"  size="20" id="signinemail" 
                      value="#{signinBean.email}" 
                      validatorMessage="Invalid Email, Try Again">
              <f:validateRegex pattern="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"/>

          </h:inputText> 
```

如您所见，如果未正确键入电子邮件，则应显示一条**错误消息**，并且正如我之前所说，该区域由 jquery.slidetoggle 功能和按钮控制，使其成为幻灯片以输入内容，

问题是当用户按下提交按钮（此处未显示）时，幻灯片冻结并且不显示错误消息，当我删除“ajax”时，显示消息但幻灯片消失，您必须再次按下切换按钮才能查看带有错误消息的幻灯片，我在同一页面中完成了此操作，但没有幻灯片，它非常好。

是否可以显示幻灯片和上面的错误消息？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:24:19.640

当 JSF ajax 请求完成时，应该重新执行负责设置幻灯片的 jQuery 脚本，这仅仅是因为 ajax 响应用从服务器检索到的新元素更改/替换了 HTML DOM 树中的元素，而这些新元素当然不会不再包含那些 jQuery 初始化的事件处理程序。每次 ajax 请求完成时，jQuery 脚本都不会自动执行，而只会在您刷新页面时自动执行。

您只需要在 JSF ajax 事件回调处理程序中重新调用您的 jQuery 函数，如下所示：

```
jsf.ajax.addOnEvent(function(data) {
    if (data.status == "success") {
        yourjQueryFunctionWhichAddsTheSlideEvents();
    }
}); 
```

另一种方法是使用 OmniFaces' [`<o:onloadScript>`](http://showcase.omnifaces.org/components/onloadScript)。

```
<o:onloadScript>yourjQueryFunctionWhichAddsTheSlideEvents();</o:onloadScript> 
```

这样你也不再需要`$(document).ready()`了。

# matlab - matlab - cellfun 对每个单元格的所有元素求和

> ID：11147322
> 
> 赞同：0
> 
> 时间：2012-06-21T21:52:55.060
> 
> 标签：matlab

嗨，我使用以下方法填充了一个单元格数组：

```
D(i) = {dist};

D = reshape(D, w, h) 
```

所以如果我有：

```
 pix1 = D{1,1};   
 pix2 = D{2,2}; 
```

我明白了

```
pix1 = 
    1 2 3

pix2 =
    4 5 6 
```

我想要做的是将每个像素中的所有元素相加，然后将这些结果形成一个矩阵，即

```
sum(pix1) = 6
sum(pix2) = 15

matrix = 
    6 15 
```

在这种情况下，矩阵是一个 1X2 矩阵（我的要大得多）。

我正在尝试使用：

```
field = cellfun(@(dist) sum(dist(:)), D,'UniformOutput', false); 
```

但这只是给了我一个充满 NaN 的矩阵。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:13:16.693

```
A = {[1 2 4], [4 5 6]};
B = cellfun(@sum, A) 
```

结果是

~~B = [6 15]~~

```
B = [7 15] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T05:59:04.603

如果您`NaN`的单元格中有 s 并且您希望忽略它们，您可以使用[`nansum`](http://www.mathworks.com/help/stats/nansum.html)：

```
A = {[1, 2, NaN], [3, NaN, 4, 5]; [6, NaN], [10, -3, NaN, 4]};
B = cellfun( @nansum, A ) 
```

结果与

```
B =

    3    12
    6    11 
```

# bash - sed，引号中的正斜杠

> ID：11147323
> 
> 赞同：2
> 
> 时间：2012-06-21T21:53:08.587
> 
> 标签：bash, sed, escaping, quotes

我正在尝试做一些事情`bash`，`sed`这被证明是非常困难的。

我有一个`bash`脚本，它的第一个参数是日期。

该代码想要更改文本文件中的一行以包含传递的日期。这是代码

```
#!/bin/bash

cq_fname="%let outputfile="/user/cq_"$1".csv";"

sed "29s/.*/\"$ct_fname\"/" file1.sas > file2.sas 
```

该脚本在第三行失败，我得到了一些关于乱码命令的信息。有人知道一个聪明的方法来让它工作吗？如何在引号中获得正斜杠`sed`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T21:58:51.877

您可以使用任何字符代替`/`，因此只需选择一个不在 中的字符`$ct_fname`：

```
sed "29s|.*|\"$ct_fname\"|" file1.sas > file2.sas 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T21:57:33.563

此处突出显示的语法应该是您的问题所在的一个很好的指标——您已经将几个字符串与不在字符串中的内容粉碎在一起。尝试替换这个：

```
cq_fname="%let outputfile="/user/cq_"$1".csv";" 
```

有了这个：

```
cq_fname="%let outputfile=\"/user/cq_$1.csv\";" 
```

我用字符转义了`"`字符串内部，`\`并删除了`"`感觉文件名中可能不存在的字符。

[Alok 建议对替换命令使用不同的字符](https://stackoverflow.com/a/11147402/377270)——这是必要的。

此外，您需要在赋值*和*字符串中使用相同的变量名。（哦！）

最后的脚本是：

```
#!/bin/bash
cq_fname="%let outputfile=\"/user/cq_$1.csv\";"
sed "29s|.*|$cq_fname|" file1.sas > file2.sas 
```

`set -x`我通过添加到脚本的顶部找到了不匹配的变量名；它显示了脚本的执行输出。

破碎的：

```
$ ./replace 
+ cq_fname='%let outputfile="/user/cq_.csv";'
+ sed '29s|.*||' file1.sas 
```

固定的：

```
$ ./replace 
+ cq_fname='%let outputfile="/user/cq_.csv";'
+ sed '29s|.*|%let outputfile="/user/cq_.csv";|' file1.sas 
```

`set -x`是一个极好的小调试工具，当你需要它的时候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:56:53.823

在每组其他引号中，使用 '（单引号）而不是 "（双引号）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T05:24:18.050

这可能对您有用：

```
cq_fname='%let outputfile="/user/cq_.csv";'
sed '29c\'"$cq_fname" file1.sas > file2.sas 
```

# php - Ember.js 与 PHP

> ID：11147325
> 
> 赞同：5
> 
> 时间：2012-06-21T21:53:16.077
> 
> 标签：php, javascript, web, ember.js

我在任何地方都找不到这个问题的明确答案，所以就在这里。查看[Ember.js](http://emberjs.com)，您似乎可以仅使用 JavaScript、HTML 和 CSS 构建一个成熟的应用程序。我的问题是，这样做是否可取？我没有看到将 PHP 集成到 JavaScript 框架中的示例，所以对我来说，这似乎是一个非此即彼的交易。是对的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T08:03:37.547

> …PHP 集成到 JavaScript 框架中…</p>

我不知道您在这里期待什么样的答案...由于 PHP 是一种服务器端语言，我所做的就是用 PHP 在服务器端编写我的 REST API，我所有的应用程序逻辑都是在 Ember 上编写的。 js，并在客户端执行。另一方面，服务器会生成一些所需的车把模板，并在第一次加载应用程序时将它们提供给客户端。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-22T15:14:30.557

如果要从 PHP 调用数据并将其发送到 Emberjs，则可能需要使用 JQuery Ajax 函数。

例如。

```
$.ajax ({
  type: "POST",
  url: "../model/my_model.php",
  data:{choosen_id: choosen_id,contact_age: contact_age },
    //data:"contact_id_choosen="+ choosen_id,
  }).done(function(data) {

  data_formated = '<div class="formated_data">'+data+'</div>';
  $(".dialog-window").html(data_formated);
    //return result
  }).fail(function(x,s,e) {
    alert(s+": "+e);
    alert('detail button failed!');
    //alert(result);
  });//$.ajax END 
```

上面的 Ajax 代码示例可以将格式正确的 PHP 数据数组插入到 EmberJS 中。希望它可以帮助您找到解决方法。

# c# - WPFDataGrid，如何将所有单行单元格切换到编辑模式

> ID：11147328
> 
> 赞同：0
> 
> 时间：2012-06-21T21:53:22.743
> 
> 标签：c#, wpf, wpf-controls, usability

我正在使用标准的 WPF DataGrid。当用户双击（或 F2）某个单元格时，该单元格将切换到编辑模式 - 显示输入字段。

当用户开始编辑其中一个单元格时，有没有办法将当前行中的所有单元格切换到编辑模式？

如果这是不可能的，是否有一些解决方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:31:59.877

似乎这就是您要查找的内容：[DataGrid 提示和技巧：单击编辑](http://wpf.codeplex.com/wikipage?title=Single-Click%20Editing)

# java - HttpURLConnection 不允许我设置“Via”标头

> ID：11147330
> 
> 赞同：6
> 
> 时间：2012-06-21T21:53:29.517
> 
> 标签：java, httpurlconnection

我正在尝试使用 java.net.HttpURLConnection 向服务器发出 HTTP 请求。我需要发送的 HTTP 标头之一是“Via”。在我的代码中有这样的东西：

```
connection.addRequestProperty("X-test", "test_header_contents"); // just a sanity test
connection.addRequestProperty("Via", "via_header_contents"); 
```

当我使用数据包嗅探器时，我可以看到测试标头正在通过，但通过标头没有。我知道 Via 是一个“受限”标题，所以我添加了这一行：

```
System.setProperty("sun.net.http.allowRestrictedHeaders", "true"); 
```

当我过去遇到同样的问题时，这条线有效，但现在不起作用。我知道系统属性已设置，因为我在尝试添加 HTTP 标头之前调用了 System.getProperty，它返回 true。我还应该做些什么才能发送 via 标头吗？就像我说的，这以前有效，但现在无效。我认为唯一改变的是我从 Java 6 迁移到 7。感谢您给我的任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T15:32:42.273

回答我自己的问题。

问题是我在程序中设置系统属性 sun.net.http.allowRestrictedHeaders 太晚了。我在尝试发送标头之前立即设置它，这为时已晚，显然是因为 HttpURLConnection 对属性进行了某种缓存。通过在程序开始时设置属性，我能够使其全部工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-11T00:10:59.713

OpenJDK 7 (build 43)的[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7u40-b43/sun/net/www/protocol/http/HttpURLConnection.java#235)显示他们使用静态初始化块来设置此属性，然后缓存该值。所以你需要在设置之前设置属性。这意味着它需要在首次加载 HttpURLConnection 类之前进行设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T12:20:16.590

我对“预告片”标题有同样的问题

我也使用：

```
 System.setProperty("sun.net.http.allowRestrictedHeaders", "true"); 
```

我在主类的静态构造函数中执行它并使用 JVM 参数传递

```
<PARAM name="java_arguments" value="-Dsun.net.http.allowRestrictedHeaders=true"> 
```

如果我从 Eclipse 运行小程序，它可以工作，但从浏览器运行时不起作用

# triggers - Unity 激活触发器未触发

> ID：11147331
> 
> 赞同：0
> 
> 时间：2012-06-21T21:53:36.237
> 
> 标签：triggers, unity3d

由于某种原因，使用标准 ActivateTrigger 脚本的简单触发器不起作用。

我有一个标记为 Is Trigger 的框，并具有 Activate Trigger 脚本组件。它应该打开（激活）这个“房间”中的点灯，称为点灯 1。

如下图所示，一切看起来都应该正确设置。然而，当玩家控制器击中盒子时，灯并没有被激活。

![在此处输入图像描述](../Images/64f38a321ef6e76336579e5fb7ddba40.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:16:26.927

我认为这是因为您的 Component Box Collider 已禁用。只需单击 Box Collider 名称附近的复选框。

# python - 接收：“UnboundLocalError：分配前引用的局部变量”

> ID：11147335
> 
> 赞同：1
> 
> 时间：2012-06-21T21:53:41.830
> 
> 标签：python, python-2.7, variable-assignment

我见过多个线程有相同问题的人，但由于问题的独特性，似乎已根据具体情况提供了解决方案

这是我的代码：

```
loga = [(912, "Message A1") , (1000, "Message A2") , (988, "Message A3") , (1012, "Message A4") , (1002, "Message A5")]
logb = [(926, "Message B1") , (1008, "Message B2") , (996, "Message B3") , (1019, "Message B4") , (1100, "Message B5")]
logc = [(1056,"Message C1") , (1033, "Message C2") , (999, "Message C3") , (1054, "Message C4") , (1086, "Message C5")]
logs = [loga, logb, logc]
out = []

def find_lowest_i(lst):
    for i in range(len(lst)):
        log = lst[i]
        if log:
            t = log[0][0]
            if i==0 or t < lowest_t:
                lowest_i = i
                lowest_t = t
    return lowest_i

while True:
    i = find_lowest_i(logs)
    print "i=", i
    tpl = logs[i].pop(0)
    print tpl
    out.append(tpl)
    print out 
```

我的确切错误：

“消息文件名行位置追溯 19 find_lowest_i 13
UnboundLocalError：分配前引用了局部变量‘lowest_t’”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:12:44.963

由于不断`pop`ing，其中一个日志（有这个数据，第一个日志）最终会是空的：

```
logs = [[],
       [(1019, 'Message B4'), (1100, 'Message B5')],
       [(1056, 'Message C1'), (1033, 'Message C2'), (999, 'Message C3'),
        (1054, 'Message C4'), (1086, 'Message C5')]] 
```

在这种情况下，`if log`i=0 将失败，并且`lowest_t`未初始化。在下一次迭代中，i=1，有 a`log`但没有`lowest_t`。例外！

# jquery - 删除 img 的父标签，仍然保留 img

> ID：11147337
> 
> 赞同：0
> 
> 时间：2012-06-21T21:53:48.020
> 
> 标签：jquery, html, css

目前我有

```
<p>
  <img src="" />
</p> 
```

如何删除包装 img 标签的 p 标签？

所以我可以得到只是..

```
<img src="" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T21:55:15.933

采用

```
$('p > img').unwrap('<p />'); 
```

这将删除 img 周围的所有 p。您应该使用 a`class or id`对特定图像执行此操作。

更多关于[`.unwrap()`](http://api.jquery.com/unwrap/)

**演示：http:** [//jsfiddle.net/joycse06/AhHQz/](http://jsfiddle.net/joycse06/AhHQz/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T21:57:47.013

尝试：

```
$('#id_of_image').unwrap('<p />'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:58:25.027

```
$(function () {
  var $img = $('img'),
        $p = $('p');

  $p.after($img).remove()
}); 
```

或者像上面那样使用 unwrap()

# java - Android 应用程序在单击按钮时崩溃

> ID：11147338
> 
> 赞同：-1
> 
> 时间：2012-06-21T21:54:12.100
> 
> 标签：java, android, eclipse

我的愚蠢再次袭来。我要感谢所有在我之前的问题上帮助过我的人。我现在要编辑的最后一件事。对于那些不知道的人，我正在使用 Java 在 Eclipse 中编写一个 Android 应用程序。在这个活动上，当我点击计算按钮时，它崩溃了，我不知道为什么。我有一个类似的问题，即在类似的应用程序中缺少括号，但我对此一无所知。我发誓我查看了单词的拼写和大小写，没有看到任何东西。然而，了解我，这可能是出了什么问题。谢谢！！！

附言。我的 logcat 没有错误，所以我真的不知道从哪里开始。如果有人可以为我指出一个可能会给他们更多东西的方向，那么我很乐意提供帮助。

小猪.Java

```
package net.finalexam;

import java.text.DecimalFormat;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioButton;
import android.widget.TextView;
import android.widget.Toast;

public class Piggy extends Activity {
    double quartersValue = .25;
    double dimesValue   = .10;
    double nicklesValue  = .05;
    double penniesValue = .01 ;
    double dollarsValue = 1;
    double quartersMoney;
    double dollarsMoney;
    double dimesMoney;
    double nicklesMoney;
    double penniesMoney;
    double totalMoney;
    double newTotalMoney;
    double oldTotalMoney=0;
    int numberOfQuarters;
    int numberOfDimes;
    int numberOfNickles;
    int numberOfPennies;
    int numberOfDollars;

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView (R.layout.piggybank);
            final EditText quarters =(EditText)findViewById(R.id.txtQuarters);
            final EditText dimes = (EditText)findViewById(R.id.txtDimes);
            final EditText nickles =(EditText)findViewById(R.id.txtNickles);
            final EditText pennies = (EditText)findViewById(R.id.txtPennies);
            final EditText dollars = (EditText)findViewById(R.id.txtDollars);
            Button calculate =(Button)findViewById(R.id.btnCalculate);
            final TextView results = ((TextView)findViewById(R.id.txtResults));
            final RadioButton add =(RadioButton)findViewById(R.id.radAdd);
            final RadioButton subtract =(RadioButton)findViewById(R.id.radSubtract);

                calculate.setOnClickListener(new OnClickListener(){

                    public void onClick(View v) {
                    numberOfQuarters = Integer.parseInt(quarters.getText().toString());
                    numberOfDimes = Integer.parseInt(dimes.getText().toString());
                    numberOfNickles = Integer.parseInt(nickles.getText().toString());
                    numberOfPennies = Integer.parseInt(pennies.getText().toString());
                    numberOfDollars = Integer.parseInt(dollars.getText().toString());
                    quartersMoney = numberOfQuarters * quartersValue;
                    dimesMoney = numberOfDimes * dimesValue;
                    nicklesMoney = numberOfNickles * nicklesValue;
                    penniesMoney = numberOfPennies * penniesValue;
                    dollarsMoney = numberOfDollars;
                    totalMoney= quartersMoney + dimesMoney + nicklesMoney + penniesMoney+dollarsMoney;
                    DecimalFormat currency = new DecimalFormat("$###,###.##");

                    if (add.isChecked()){
                        if(totalMoney>0){
                            newTotalMoney =oldTotalMoney +totalMoney;
                            oldTotalMoney = newTotalMoney;
                            results.setText(currency.format("newTotalMoney"));
                        }else{
                            Toast.makeText(Piggy.this, "You need to do more chores!!",Toast.LENGTH_LONG).show();

                        }
                    }
                    if (subtract.isChecked()){
                        newTotalMoney =oldTotalMoney +totalMoney;
                    }
                        if(newTotalMoney>0){

                            oldTotalMoney = newTotalMoney;
                            results.setText(currency.format("newTotalMoney"));
                        }else{
                            Toast.makeText(Piggy.this, "Save more money kido!!",Toast.LENGTH_LONG).show();
                        }
                        ;
                    }
            });
        }

} 
```

这是与文件一起使用的 Piggy XML。如果有人能看到任何东西，我将不胜感激您的帮助。我也想不出最好的命名方式。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/piggy" >

    <EditText
        android:id="@+id/txtQuarters"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="27dp"
        android:ems="10"
        android:hint="Number of quarters"
        android:inputType="number" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/txtDimes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtQuarters"
        android:layout_centerHorizontal="true"
        android:ems="10"
        android:hint="Number of dimes"
        android:inputType="number" />

    <EditText
        android:id="@+id/txtNickles"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtDimes"
        android:layout_centerHorizontal="true"
        android:ems="10"
        android:hint="Number of nickles"
        android:inputType="number" />

    <EditText
        android:id="@+id/txtPennies"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtNickles"
        android:layout_centerHorizontal="true"
        android:ems="10"
        android:hint="Number of pennies"
        android:inputType="number" />

    <TextView
        android:id="@+id/txtResults"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="38dp" />

    <EditText
        android:id="@+id/txtDollars"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtPennies"
        android:layout_centerHorizontal="true"
        android:ems="10"
        android:hint="Number of Dollars"
        android:inputType="number" />

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtDollars"
        android:layout_centerHorizontal="true" >

        <RadioButton
            android:id="@+id/radAdd"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:text="Add" />

        <RadioButton
            android:id="@+id/radSubtract"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Subtract" />
    </RadioGroup>

    <Button
        android:id="@+id/btnCalculate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/radioGroup1"
        android:layout_centerHorizontal="true"
        android:text="Calculate" />

</RelativeLayout> 
```

编辑。多谢你们。这个网站对我来说真的是一个很大的帮助，也是一个很好的资源。话虽如此，我找到了错误日志。

06-21 18:06:25.619: E/AndroidRuntime(26042): java.lang.NumberFormatException: 无法将“”解析为整数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:12:01.443

如果您没有填写其中一个 EditText，这将返回一个空字符串`""`，尝试从空字符串中解析整数会给您一个数字格式异常

你应该先检查：

```
if(!"".equals(yourString){
   int i = Integer.parseInt(yourString);
} 
```

*编辑*

您还尝试这样做：

```
 currency.format("newTotalMoney") 
```

当你打算这样做时：

```
 currency.format(newTotalMoney) 
```

*编辑 2*

为了节省一些时间，您应该编写如下方法：

```
private Integer getNumber(EditText editText){
     int num = 0;
     if(editText == null) {
       Log.e("YouApp", "Didnt find view");
       return num;
     }
     String input = editText.getText().toString();
     if(!"".equals(input)) {
        try{
           num = Integer.parseInt(input);
        } catch(NumberFormatException e){
          Log.("YouApp", "Invalid input: "+input, e);
        }
     }
     return num;
} 
```

然后在您的应用程序中像这样使用它：

```
 numberOfNickles = getNumber(nickles);
 numberOfPennies = getNumber(pennies);
 // etc 
```

# .net - 编写高并发应用程序的好方法

> ID：11147344
> 
> 赞同：1
> 
> 时间：2012-06-21T21:54:44.877
> 
> 标签：.net, concurrency, nosql, social-gaming

我正在设计一个 Web 应用程序（一个游戏）并计划使用 C#/.Net 来实现。考虑到我想要实现的目标，我对可扩展性和性能感到担忧。这里是应用程序。有一个由许多王国组成的虚拟世界。这些王国之间发生了争夺霸权的战争。随着游戏的进行，我想实时显示世界的确切人口，即当人们出生时人口增加，而当他们死于战争（或其他）时，人口减少。因此，我的问题归结为一个可能由成千上万的游戏玩家更新并显示在网页上的数字。你如何实时管理这个。将数字存储在数据库中可能不起作用，因为它需要同时更新很多次。还可以使用哪些其他技术？这是 No-SQL 数据库 memcached 的候选者吗？Hadoop？有什么建议么？
非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:14:07.547

将更新“推送”到客户端可能不是一个好主意，因为这会在流量变高时阻塞网络。相反，您应该每秒钟左右查询一次人口，因此这会将任何瓶颈转移到服务器的 CPU 上，这通常比网络连接更快。

您可能需要某种数据库来存储人口数据，因为您需要在查询之间跟踪人口。

这种方法还可以防止客户端的数据被破坏，因为每次都替换数据而不是递增/递减。

# php - 使用无限循环运行 php 文件

> ID：11147345
> 
> 赞同：0
> 
> 时间：2012-06-21T21:54:47.827
> 
> 标签：php, linux, perl

我正在尝试在我的基于 linux 的服务器中运行这个 php 脚本。

```
$today      = strtotime("today");
$tommorow   = date("Y-m-d", strtotime("+1day",$today));
$today      = date("Y-m-d");

//Endless loop because the data here updates around the clock 
while(1){

    while (time() <= strtotime("$tommorw 8:00PM")){

            sleep(30);
            flush();
        }

    }//end 24 h loop
    //save the file as a date file and delete it's content

    //move on to the next day   
    $today      = strtotime("today");
    $tommorow   = date("Y-m-d", strtotime("+1day",$today)); 

}//end of endless loop 
```

如果我从一个简单的浏览器运行它，它就可以正常工作（当然，当我关闭它时它会停止工作）。

我正在尝试通过 perl 脚本运行它

```
chdir("mydir");
exec('indices.php');  #tryed also system("php indices.php"); 
```

并像这样运行 perl 脚本

```
./PROMadadim.pl >> ./PROMadadim.log & 
```

但是当我尝试从服务器运行它时它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:10:19.963

通过查看代码，您可能会更好地设置 CRON 作业。如果您的服务器不支持 CRON，那么您可以尝试添加...

```
set_time_limit(0); 
```

或尝试将 -q 添加到 php 命令中，如下所示：

```
php -q /home/user/example.php 
```

# c# - AutoMapper 使用了错误的构造函数

> ID：11147347
> 
> 赞同：28
> 
> 时间：2012-06-21T21:54:51.957
> 
> 标签：c#, automapper, automapper-2

今天，我使用 AutoMapper v1.1 升级了一个功能齐全的应用程序，现在使用 AutoMapper v2.1，我遇到了一些使用以前版本从未遇到过的问题。

这是我的代码从**Dto**映射回**域**对象的示例

```
public class TypeOne
{
   public TypeOne()
   {
   }

   public TypeOne(TypeTwo two)
   {
      //throw ex if two is null
   }

   public TypeOne(TypeTwo two, TypeThree three)
   {
      //throw ex if two or three are null
   }

   public TypeTwo Two {get; private set;}

   public TypeThree Three {get; private set;}
}

public class TypeOneDto
{
   public TypeOneDto()
   {
   }

   public TypeTwoDto Two {get; set;}

   public TypeThreeDto Three {get; set;}
} 
```

...

```
Mapper.CreateMap<TypeThreeDto, TypeThree>();
Mapper.CreateMap<TypeTwoDto, TypeTwo>();
Mapper.CreateMap<TypeOneDto, TypeOne>();

var typeOne = Mapper.Map<TypeOne>(typeOneDto); 
```

然而，我在 v2.1 中遇到的第一个问题是 AutoMapper 尝试使用带有 2 个 args 的构造函数，而其中一个 args 为 null 并且应该使用 1 个 arg 构造函数。

然后我尝试使用

```
Mapper.CreateMap<TypeOneDto, TypeOne>().ConstructUsing(x => new TypeOne()); 
```

但是我不断收到无法解决的“模糊调用”错误。

然后我尝试了

```
Mapper.CreateMap<TypeOneDto, TypeOne>().ConvertUsing(x => new TypeOne()); 
```

并且确实使用无参数构造函数成功创建了 TypeOne 对象，但随后它未能设置私有 setter 属性。

我已经在 AutoMapper 网站上寻求帮助并下载了源代码以进行查看，但没有得到太多关于 ConstructUsing 的小文档并且没有太多单元测试。

有什么明显的我遗漏的东西我应该用 v2.1 改变吗？我很惊讶它与 v1.1 相比发生了如此大的变化。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-27T12:04:40.493

你只需要添加明确的 [演员表](https://stackoverflow.com/questions/2057146/compiler-ambiguous-invocation-error-anonymous-method-and-method-group-with-fun)

```
Func<ResolutionContext, TypeOne> 
```

这是代码：

```
Mapper.CreateMap<TypeOneDto, TypeOne>().ConstructUsing(
            (Func<ResolutionContext, TypeOne>) (r => new TypeOne())); 
```

当前版本的 AutoMapper 的工作方式如下所述：

1.  按参数计数对目标类型构造函数进行排序

    ```
    destTypeInfo.GetConstructors().OrderByDescending(ci => ci.GetParameters().Length); 
    ```

2.  采用参数匹配源属性的第一个构造函数（不检查空值）。在您的情况下，它是具有两个参数的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-26T17:45:07.267

这是一个扩展方法...

```
 public static void CreateMapWithDefaultConstructor<T, TU>(this Profile profile)
        where TU : class, new()
    {
        profile.CreateMap<T, TU>().ConstructUsing(source => new TU());
    } 
```

# javascript - remove 和 addClass 只工作一次

> ID：11147351
> 
> 赞同：0
> 
> 时间：2012-06-21T21:55:13.860
> 
> 标签：javascript, jquery, html, css

我正在开发一个具有两种模式的菜单，当用户单击其中一个模式时，列表项的类会发生变化，我可以让它在第一次模式更改时工作，但是当我尝试改回它时它不起作用。

这是我的代码

```
$('#menu ul.mode li.edit').click(function() {
    $('#menu').css('background-image', 'url(images/edit-menu/fundo.png)');
    });
    $('#menu ul.icons li.ummix').removeClass('ummix').addClass('um');

$('#menu ul.mode li.mix').click(function() {
    $('#menu').css('background-image', 'url(images/edit-menu/fundo-mix.gif)');
    $('li.um').removeClass('um').addClass('ummix');

}); 
```

不起作用的部分是

```
$('#menu ul.icons li.ummix').removeClass('ummix').addClass('um'); 
```

我的 HTML 是这样的

```
<div id="menu">
<ul class="mode">
    <li class="edit"><a href="#edit"><img src="images/edit-menu/selected/edit.gif" /></a></li>
    <li class="mix"><a href="#mix"><img src="images/edit-menu/icons/mix.png" /></a></li>
</ul>

<ul class="icons"> 
    <li class="um"></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:57:08.247

添加和删​​除相反的类变得笨拙。

*假设*`unmix`和`um`彼此相反，我会鼓励你只使用一个类。然后检查它的存在或不存在。那时你可以简单地使用类似`toggleClass()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:57:27.627

删除`ummix`类后，选择器不再适用于这些元素。`um`在删除类之前尝试添加类`ummix`。

# python - Python GTK 不显示菜单栏

> ID：11147354
> 
> 赞同：2
> 
> 时间：2012-06-21T21:55:15.950
> 
> 标签：python, gtk, menubar

我是一名 PHP 程序员，想在 Linux 下编写 Python GUI 应用程序。

在我的 Ubuntu 12.04 计算机上，任何版本的 PyGtk 都不会显示 MenuBar。在我工作的 Ubuntu 10.04 计算机上，使用完全相同的代码，MenuBar 始终显示。

我正在尝试学习最新的做事方式，所以一直在使用本页底部的示例：http: [//python-gtk-3-tutorial.readthedocs.org/en/latest/menus.html](http://python-gtk-3-tutorial.readthedocs.org/en/latest/menus.html)

我想你们中的一个人会立即知道这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T22:12:27.897

嗬！

Ubuntu 12.04 使用 Unity，Unity 在桌面顶部显示菜单。

又来了！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T16:10:17.203

[您可以在这里](http://ubuntuforums.org/showthread.php?t=1935380)找到以下答案：

> 在 Unity 中，您可以通过将环境变量 $UBUNTU_MENUPROXY 设置为 0（或任何其他不是“libappmenu.so”的值）来禁用程序的全局菜单。因此，如果出于某种原因您想确保即使在 Unity 中您的应用程序也会在应用程序窗口内显示菜单，只需创建一个小的包装器 shell 脚本来取消设置 $UBUNTU_MENUPROXY 并启动您的程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-13T01:23:37.427

我遇到了同样的问题，但在 Ubuntu 上的 C++ 项目中。我设法通过将 gtk-shell-shows-menubar 属性设置为 FALSE 来解决，如下所示：

g_object_set(gtk_settings_get_default(), "gtk-shell-shows-menubar", FALSE, NULL);

如果你愿意，你可以把它翻译成 python。

# python - 如何在 Tkinter 中编写类似 HTML 的文件名字段？

> ID：11147360
> 
> 赞同：0
> 
> 时间：2012-06-21T21:55:55.170
> 
> 标签：python, tkinter, ttk, getopenfilename

我正在制作一个自动生成的 Tkinter GUI（如 HTML 表单），并且我正在尝试制作一个类似于 HTML 使用的文件名字段。这是我的代码：

```
e = ttk.Entry(master)
e.grid(row=ROW, column=1)
b = ttk.Button(master, text="...")
b.grid(row=ROW, column=2, sticky=tkinter.E) 
```

我希望这样当用户单击`...`按钮时，会弹出一个文件名对话框（我知道如何执行该部分），并且当用户选择一个文件时，它会反映在条目中（这是我拥有的部分麻烦了）。我在那部分遇到麻烦的原因是 E 和 B 不断变化，因为这是循环运行的，所以我认为使这项工作的唯一方法是使用行检测器，并以某种方式更改 Entry 框的值. 我该怎么做？

提前致谢！如果这有任何不清楚的地方，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:17:50.973

最好的解决方案之一是将您自己的小部件创建为一个类。像这样的东西：

```
class MyWidget(self, tkinter.Frame):
    def __init__(self, *args, **kwargs):
        tkinter.Frame.__init__(self, *args, **kwargs)
        self.entry = tkinter.Entry(self)
        self.button = tkinter.Button(self, text="...",
                                     command=self._on_button)
        self.button.pack(side="right")
        self.entry.poack(side="left", fill="both", expand=True)

    def _on_button(self):
        s = <call whatever dialog you want...>
        if s != "":
            self.entry.delete(0, "end")
            self.entry.insert(0, s)

...
entry = MyWidget(master)
entry.grid(...)
... 
```

# c# - C ++中的函数SIGN（双x，双y）

> ID：11147362
> 
> 赞同：-5
> 
> 时间：2012-06-21T21:56:04.597
> 
> 标签：c#, c++, sign

函数 SIGN(double x,double y) 在 C++ 语言中的作用以及如何将其翻译成 c#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:04:06.927

[Fortan http://gcc.gnu.org/onlinedocs/gfortran/SIGN.html](http://gcc.gnu.org/onlinedocs/gfortran/SIGN.html)中存在这样的功能

```
SIGN(A,B) returns the value of A with the sign of B.

If B >= 0 then the result is ABS(A), else it is -ABS(A). 
```

可能有人在 C++ 中实现了相同的功能（但是是自定义的，不是 C++ 或标准库的标准部分）。

一个 c# 版本将是

```
 A = Math.Abs(A);
  if (B<0.0) A = -A; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:02:15.467

在要转换为 C# 的 C++ 代码中，查找`SIGN`. 该定义应准确说明您应如何在 C# 中实现它。

如果我必须从名称中猜测，如果和具有相同的符号`SIGN(x,y)`则返回 true ，否则返回 false。`x``y`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:06:51.357

C++ 标准库没有任何`SIGN()`功能。您的问题没有提供足够的信息让我确切地告诉您这`SIGN()`是什么，但是 C++ 继承了旧的编程语言 C，我有见地的预感是这`SIGN()`是一个以旧 C 风格定义的*预处理器宏。*

在代码中搜索以 开头的行，在和`#define SIGN`之间可能有多个空格。如果你找到这条线，它很可能会告诉你你是什么，做什么。`#define``SIGN``SIGN()`

# javascript - Javascript库强制HTML元素的纵横比？

> ID：11147364
> 
> 赞同：1
> 
> 时间：2012-06-21T21:56:18.337
> 
> 标签：javascript, jquery, css, aspect-ratio

是否有任何 Javascript 库可以强制 HTML 节点（主要是图像和 div）在调整大小时保持其纵横比？

当元素的宽度受窗口大小限制时，这对于调整元素的高度特别有用。

**注意**：如果这可以用纯 CSS 完成，我买它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:10:14.690

你的意思是这样吗？

[http://jsfiddle.net/DerekL/J2s3C/](http://jsfiddle.net/DerekL/J2s3C/)

这是代码：

```
img{
    width: 100%;
    height: auto;
} 
```

对于其他元素，它会更复杂*一些。*

这是第二个演示： http: [//jsfiddle.net/DerekL/5BgXk/](http://jsfiddle.net/DerekL/5BgXk/)：

```
<div id="wrapper"><div id="content"></div></div>

#wrapper {
    position: relative;
    padding-bottom: 33.33%; /* Set ratio here */
    height: 0;
}
#content {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: green;    
} 
```

# android - Android AlarmManager 从 BOOT_COMPLETED 开始，然后通过应用程序进行交互

> ID：11147365
> 
> 赞同：3
> 
> 时间：2012-06-21T21:56:23.237
> 
> 标签：android, alarmmanager, boot, android-context

我有一个应用程序，它注册了一个警报（AlarmManager），当手机使用清单中的 BOOT_COMPLETED 启动时启动。但是当用户启动应用程序时，我想让用户看到它正在运行，并允许用户有选择地手动关闭和打开警报。

我正在考虑存储警报状态的共享首选项，例如“正在运行”或“暂停”。我正在努力理解的是在启动时启动 AlarmManager 的上下文的互操作性，以及用户运行应用程序时存在的更普通的上下文。关于处理系统启用警报与用户启用警报之间的交互，是否有任何最佳实践？？？

还有一种方法可以查看给定应用程序的正在运行的警报吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:56:07.257

当前没有列出已注册警报的 API。您使用的上下文无关紧要。取消警报所需要做的就是创建一个与`PendingIntent`您用来注册警报的等效项——使用相同的请求代码、标志和 Intent。

# .net - Monodroid 混淆

> ID：11147367
> 
> 赞同：1
> 
> 时间：2012-06-21T21:56:26.810
> 
> 标签：.net, dll, xamarin.android, obfuscation

我开发了一个 monodroid 应用程序，我想知道混淆应用程序的最佳方法。我尝试使用 dotfuscator 和 xenocode 等网络混淆器来混淆 Dll 文件，但没有成功。
我将我的 dll 文件放在 apk 包中，但我们得到执行错误或直接得到错误混淆。

任何人都可以帮助我吗？不幸的是，没有关于 monodroid 的文档。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:20:35.017

邮件列表上的这篇文章说 Xenocode 在禁用元数据减少时工作：http: [//mono-for-android.1047100.n5.nabble.com/Any-obfuscator-working-with-Mono-for-Android-td5050825。 html](http://mono-for-android.1047100.n5.nabble.com/Any-obfuscator-working-with-Mono-for-Android-td5050825.html)

这个也应该工作： [http ://www.ssware.com/cryptoobfuscator/obfuscator-net.htm](http://www.ssware.com/cryptoobfuscator/obfuscator-net.htm)

# javascript - JavaScript 单击图像按钮

> ID：11147370
> 
> 赞同：1
> 
> 时间：2012-06-21T21:56:38.773
> 
> 标签：javascript, image, button, click, submit

这是我关于单击 JavaScript 中的按钮的第二个问题，但这个问题我真的很困惑：我正在尝试使用 javascript 单击图像按钮，但是没有什么可做的，因为源仅提供有关图像按钮的信息

```
<div id="claimBtnDv" style="bottom:-30px; position:absolute; right:0; margin-top:0;">
    <input type="image" class="btnClaim" src="websitebuttonimage" onclick="alert('buttonclicked');">
</div> 
```

我尝试做`document.getElementById('claimBtnDv').click()`但没有成功，还有其他方法可以使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:27:14.917

如果您无法更改 HTML 并且需要使用 javascript 单击图像，则可以进入子节点查找图像。这很容易，因为提供了类名。

```
var nodes = document.getElementById('claimBtnDv').childNodes;

for ( i = 0; i < nodes.length; i++ ) {
    if ( nodes[i].className === "btnClaim" ) {
        console.log("clicking!");
        nodes[i].click();
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:12:33.740

您的代码几乎可以工作 - 只需将您更改`class="btnClaim"`为`id="btnClaim"`- 并且`getElementById`将工作 - [http://jsfiddle.net/wMRbn/1/](http://jsfiddle.net/wMRbn/1/)

```
document.getElementById('btnClaim').onclick = function () {
    alert ( "click" );
}​ 
```

**更新** 要获取没有元素的元素，`id`您可以这样做-通过获取父元素`id`并将事件侦听器附加到其`input`子元素-http: [//jsfiddle.net/wMRbn/3/](http://jsfiddle.net/wMRbn/3/)

```
var img = document.getElementById("claimBtnDv").getElementsByTagName("input")[0];
img.onclick = function () {
    alert ( "click" );
}​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T22:06:36.500

看起来它在这种情况下有效。您是否尝试为其分配不同的点击事件或其他内容？

jquery 将允许您执行以下操作：

```
$("input.btnClaim").click(function(){
  //in here can go a lot more functions, etc.
}); 
```

javascript 会做（在你给它一个 'btnClaim' 的 id 之后）：

```
var X = document.getElementById("btnClaim");
x.onclick = "JAVASCRIPT GOES HERE";  
//from what the wc3 doc looks like, you need to have it in quotes, 
//   but i may be mistaken. 
```

也许这有帮助？

# javascript - 仅使用 Mustache 显示列表中的第一项

> ID：11147373
> 
> 赞同：23
> 
> 时间：2012-06-21T21:56:55.913
> 
> 标签：javascript, mustache

我正在使用 mustache 模板引擎，我只想显示长列表中的第一项，但似乎找不到这样做的文档？

如果我使用：

```
{{# links}}<a href="{{& url}}">{{& title }}</a>{{/ links}} 
```

我得到了所有的链接，但是我只希望显示第一个链接，听起来很简单，但我找不到任何关于此的文档。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-07-30T15:17:32.673

此解决方案适用于新版本的 Mustache.js（**仅限**）：

```
mustache.render("{{a.0}}", {a: ['hi','world']})
=> 'hi' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-24T23:12:21.747

@Millad 提出的解决方案几乎对我有用。使用 handlebars.js 虽然我不得不用括号来使用它。

```
{{ a.[0] }} 
```

=> 你好

```
res.render('view', { a: ['hello', 'world'] }) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T22:07:11.697

Mustache has 没有逻辑，来自[文档](http://mustache.github.com/mustache.5.html)：

> 我们称其为“无逻辑”，因为没有 if 语句、else 子句或 for 循环。相反，只有标签。一些标签被替换为一个值，一些什么都没有，而另一些则是一系列值。本文档解释了不同类型的 Mustache 标签。

所以你本质上想要的是一种机制来做`if link is the first`- 所以你可以在数据方面处理这个问题，只在你的数据中放置一个元素，或者通过添加一块数据，比如当你将数据放入时添加一个像这样的值`display`并将其设置为“内联”或“无”，然后在您的模板中执行以下操作：

```
{{# links}}<a href="{{& url}}" style="display: {{display}};">{{& title }}</a>{{/ links}} 
```

然后，稍后，您可以在页面中调用脚本来更改`style.display`对某些用户或应用程序的操作。

`data = data[0]`这些是我的第一个，尽管为这个特定模板设置可能更容易。问题是您可能想在某个时候使用整个列表，以评论我需要查看更多您的使用情况以及数据的填充位置。

# django - 在 Django 中，如何在调用 user_save 信号时将请求参数传递给保存用户配置文件的 signal_handler？

> ID：11147392
> 
> 赞同：0
> 
> 时间：2012-06-21T21:58:07.623
> 
> 标签：django

当新用户注册时，我无法自动保存有关每个用户的附加信息。我为用户模型扩展创建了一个配置文件，以保存有关我的用户的其他数据。但是，当在 post_save 调用信号处理程序时，存储在请求中的数据不会传递给 signal_handler。

以下是我创建的配置文件。

```
class StudentProfile(models.Model):

    user = models.ForeignKey(User, unique=True)

    # Other information about the Student
    city = models.CharField(max_length=25)
    country = models.CharField(max_length=25)
    student_age = models.IntegerField(max_length=3) 
```

在我的注册视图中，我调用 form.save() 函数，在该函数中创建用户对象并在数据库中添加一个新行。

```
def save(self, new_data):
    u = User.objects.create_user( new_data['username'],
                                new_data['email'],
                                new_data['password'])
    return u 
```

之后，调用 post_save 信号并且信号处理程序尝试创建一个新配置文件：

```
def create_student_profile(sender, instance, created, **kwargs):
    if created:
        StudentProfile.objects.create(user=instance)

post_save.connect(create_student_profile, sender=User) 
```

此时，我在浏览器中收到以下错误：

**/signup/ 处的 IntegrityError（1048，“列 'student_age' 不能为空”）**

我查看了调用堆栈，发现正在执行的 SQL 查询对 Student_age 没有任何值，而对国家和城市没有任何值。

sql u'INSERT INTO `student_studentprofile`( `user_id`, `city`, `country`, `student_age`) VALUES (17, , , None)'

如何将 student_age、国家和城市等请求参数传递给这个信号处理程序？我必须手动保存这些信息吗？

我已经在 stackOverflow 和 Google 上彻底搜索了这个问题的答案，但结果却是空手而归。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:22:38.457

我认为您无权访问`request`post_save。信号用于通知其他人模型已创建。他们假设您已经创建了模型，并在其中存储了您需要的数据。如果适合您，请使用 django-registration。django-registration 发送一个信号，并在用户注册时`user_registered`传递。`request`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:31:28.770

是的，不幸的是，您需要将这些字段设为可空。然后在保存用户后将它们设置在您的视图中。

# php - 获得 youtube 标题的最佳方式？

> ID：11147395
> 
> 赞同：2
> 
> 时间：2012-06-21T21:58:25.720
> 
> 标签：php, youtube-api

我找到了这个代码片段来从 YouTube 视频中检索标题并且它有效，

```
<?php
$video_id = 'y8Kyi0WNg40';
$content = file_get_contents("http://youtube.com/get_video_info?video_id=" . $video_id);
parse_str($content, $ytarr);
echo $ytarr['title'];
?> 
```

但是很多人说这种方法由于某种原因不安全，他们应该在 YouTube 的 API 中使用 cURL，您能否解释一下为什么这种方法（`file_get_contents`）不安全。

如果是这样，我将不胜感激有关使用 cURL 获得与上述代码相同结果的教程或示例的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:03:47.467

由于是 XML 格式，因此您可以使用它`file_get_contents("http://gdata.youtube.com/feeds/api/videos/".$video_id);`来更轻松地解析

如果你想使用 cURL 试试这个[教程](http://snipd.net/php-get-all-information-from-a-youtube-video)

# python - 在for循环中获取下一个变量

> ID：11147399
> 
> 赞同：4
> 
> 时间：2012-06-21T21:58:46.260
> 
> 标签：python, for-loop

我对 Python 很陌生，我确信有一种更简单的方法来完成我需要的东西，但这里就可以了。

我正在尝试创建一个程序，该程序对调用的字母列表执行频率分析，`inputList`并检索这两个字母对并将它们添加到另一个字典中。所以我需要它来填充所有 2 个字母对的第二个字典。

我有一个粗略的想法，我该如何做到这一点，但我有点坚持使用语法来使它工作。

```
for bigram in inputList:
    bigramDict[str(bigram + bigram+1)] =  1 
```

其中 bigram+1 是下一次迭代中的字母

例如，如果我要在其中包含文本“stackoverflow”，`inputList`我需要首先将字母“st”作为键，将 1 作为值。在第二次迭代中，“ta”作为键，以此类推。我遇到的问题是检索变量将在下一次迭代中的值而不移动到下一次迭代。

我希望我能清楚地解释自己。谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T22:02:33.560

获得序列的 n-gram 的一种直接方法是切片：

```
def ngrams(seq, n=2):
    return [seq[i:i+n] for i in range(len(seq) - n + 1)] 
```

结合这个，[`collections.Counter`](http://docs.python.org/library/collections.html#counter-objects)你就准备好了：

```
from collections import Counter
print Counter(ngrams("abbabcbabbabr")) 
```

如果你需要`ngrams()`偷懒：

```
from collections import deque

def ngrams(it, n=2):
    it = iter(it)
    deq = deque(it, maxlen=n)
    yield tuple(deq)
    for p in it:
        deq.append(p)
        yield tuple(deq) 
```

（有关后者的更优雅的代码， 请参见[下文）。](https://stackoverflow.com/a/11147665/989121)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T22:16:21.447

使用 zip 压缩字符串以复制自身偏移 1

得到这样的bigraph：

```
s = "stackoverflow"
zip(s,s[1:]) 
```

给出：

```
[('s', 't'), ('t', 'a'), ('a', 'c'), ('c', 'k'), ('k', 'o'), ('o', 'v'), ('v', 'e'), ('e', 'r'), ('r', 'f'), ('f', 'l'), ('l', 'o'), ('o', 'w')] 
```

三元组也很简单：

```
zip(s,s[1:],s[2:]) 
```

给出：

```
[('s', 't', 'a'), ('t', 'a', 'c'), ('a', 'c', 'k'), ('c', 'k', 'o'), ('k', 'o', 'v'), ('o', 'v', 'e'), ('v', 'e', 'r'), ('e', 'r', 'f'), ('r', 'f', 'l'), ('f', 'l', 'o'), ('l', 'o', 'w')] 
```

您可以将元组用作字典的键......或者更好地使用 Counter 或 default_dict 对象进行计数。祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T22:22:56.323

```
from collections import Counter
from itertools import islice, izip, tee

def pairs(iterable):
    a, b = tee(iterable)
    for pair in izip(a, islice(b, 1, None)):
        yield pair

print Counter(pairs("stackoverflow")) 
```

或者更简单的版本：

```
def pairs(iterable):
    it = iter(iterable)
    last = next(it)
    for c in it:
        yield last, c
        last = c 
```

任意的通用版本`n`：

```
def ngrams(iterable, n=2):
    return izip(*[islice(it, i, None) for i, it in enumerate(tee(iterable, n))]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T22:01:52.903

保留前一个字母的变量？第一次迭代你只取第一个字母，什么都不做。

附录：这种方法至少不需要浪费更多的内存，而不是一个简单的变量来存储一个字母，没有多余的元组或任何东西。

# c# - 抽象工厂模式——具体工厂点

> ID：11147401
> 
> 赞同：6
> 
> 时间：2012-06-21T21:58:51.723
> 
> 标签：c#, factory, abstract, factory-pattern

这是我通常看到的抽象工厂模式的方式：

```
public abstract class Factory 
{ 
    public abstract Product GetProduct(); 
}

public class ConcreteFactory1 : Factory 
{ 
    public override Product GetProduct() {  return new Product1();  } 
}

class ConcreteFactory2 : Factory 
{
    public override Product GetProduct() { return new Product2(); } 
}

interface Product 
{ 
    void SomeMethod(); 
}

class Product1 : Product 
{ 
    public void SomeMethod() { Console.WriteLine("1"); } 
} 

class Product2 : Product 
{ 
    public void SomeMethod() { Console.WriteLine("2"); } 
}

class Program
{
    static void Main(string[] args)
    {
        Factory f = null;
        Product p = null;
        switch (args[0])
        {
            case "1":
                f = new ConcreteFactory1();
                p = f.GetProduct();
                break;
            case "2":
                f = new ConcreteFactory2();
                p = f.GetProduct();
                break;
        }
        p.SomeMethod();
    }
} 
```

我通常这样写，这不是真正的模式：

```
interface Product 
{ 
    void SomeMethod(); 
}
class Product1 : Product 
{ 
    public void SomeMethod() { Console.WriteLine("1"); } 
} 
class Product2 : Product 
{ 
    public void SomeMethod() { Console.WriteLine("2"); } 
}
public static class Factory 
{ 
    public static Product GetProduct(prodType) 
    {
        Product p = null;
        switch (prodType)
        {
            case "1":
                p = new Product1();
                break;
            case "2":
                p = new Product2();
                break;
        }
        return p;
    }
}

class Program
{
    static void Main(string[] args)
    {
        Product p = Factory.GetProduct(args[0]);
        p.SomeMethod();
    }
} 
```

我的问题是——混凝土工厂的优势是什么？我从来不明白这一点——它似乎只是增加了另一个不必要的层。第二个例子看起来更加简洁明了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T22:16:12.703

由于 Odrade 同意我的观点（我想我还没有完全脱离我的摇滚乐），我会发布这个作为答案：

我认为，如果我弄错了，请纠正我，通常你的基本代码没有使用的具体工厂的概念。它也不关心通过 prodType 指定（在您的情况下）产品类型。相反，具体工厂实现通过某种形式的依赖注入提供给您的抽象工厂，并且您的代码继续其愉快的方式，而没有任何关于正在使用的工厂或所需的具体类型的概念。特别是如果这些具体的工厂实现是由 API 的第 3 方消费者提供的。

关于它的 Wikipedia 文章提供了一个关于操作系统 GUI 构建的体面示例：[http ://en.wikipedia.org/wiki/Abstract_factory_pattern#C.23](http://en.wikipedia.org/wiki/Abstract_factory_pattern#C.23)

本质上，您的库中的代码可以正常运行，而无需了解任何实现细节或对所用操作系统的依赖关系。当您（或您的 API 的使用者）然后迁移到 Linux（在此 Wikipedia 示例中）时，您只需实现 a`LinuxFactory`并将`LinuxButton`其提供给您的 API。相反，就像在您的典型示例中那样，您通过输入（例如枚举）来控制它，那么您的工厂需要了解 Linux：

```
public static class Factory 
{ 
    public static Button GetButton(operatingSystem) 
    {
        switch (operatingSystem)
        {
            case "windows":
                return new WindowsButton();
            case "macintosh":
                return new MacButton();
        }
    }
} 
```

Linux现在是如何被考虑在内的？*好吧，除非您*添加支持，否则它不能。此外，现在您的 API 的所有使用者都间接依赖于所有操作系统实现。

编辑：请注意，`Factory Pattern`和`Abstract Factory Pattern`是两个完全不同的概念。关于您首先提出问题的原因，抽象工厂模式并不总是必要的。如果你不需要一个，那么不要增加一个的复杂性。如果您只需要一个简单的工厂（您的第二个示例是其变体），请使用它。适合工作的正确工具等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T22:17:05.650

我将您的方法称为工厂模式，它与抽象工厂不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T04:16:31.443

> 混凝土工厂的优势是什么？我一直不明白这一点 - 它似乎只是添加了另一个不必要的层

工厂（通常 - 工厂方法、抽象工厂等）用于解析创建复杂类型的对象，如果您`Product1`需要`Product2`不同类型的初始化，那么在您的具体工厂上硬编码它不是一个好主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T04:46:40.807

“抽象工厂”对于这种模式来说确实是个坏名字。一个更好的名称是 GoF 也使用的“Kit”模式。我同意，在你给出的例子中，它是过度设计的。当您的工厂负责创建许多协同工作的对象时，这更有意义。然后，在给定的一组运行时或设计时条件下，不同的工厂创建不同的组（套件，如果你愿意的话）。

[这是一篇关于它的非常好的文章。](http://www.netobjectivestest.com/PatternRepository/index.php?title=TheAbstractFactoryPattern) 公制与英制插座组的非软件类比是完美的。

# c# - 在 WP7 中以较低质量加载图像？

> ID：11147403
> 
> 赞同：0
> 
> 时间：2012-06-21T21:58:52.000
> 
> 标签：c#, performance, image, windows-phone-7

从独立存储加载图像时是否可以以较低质量的格式加载它？我正在遍历指向独立存储中图像的文件路径列表。

例如，这是我现在的代码：

```
myObjectsList[i].ImageSrc = PictureDecoder.DecodeJpeg(imageStream); 
```

最终代码运行良好，但仅加载 6 张图像需要很长时间，而且我达到了 250mb 左右（这超出了低端设备的限制）。所以我想弄清楚是否可以以较低质量的格式加载图像。或者当然，如果有人有任何其他建议，我将不胜感激您的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:02:35.103

当您保存图像时，创建图像的缩略图并加载它们以供预览。这是此类问题的标准解决方案。

我不知道是否可以加载质量较低的图像，但它不会帮助您解决内存问题。

# ruby - 一起添加多个 .length 调用

> ID：11147406
> 
> 赞同：2
> 
> 时间：2012-06-21T21:59:01.460
> 
> 标签：ruby, string, integer

我正在使用 Learn to Program 这本书，它教新手如何从 Ruby 开始编程。那家伙说要尝试创建一个程序，询问我的个人姓名（第一个中间名和最后一个），然后使用`length`相加得到我的名字中有多少个字符的总和。我做到了这一点而没有搞砸：

```
puts 'enter your first name'
first = gets.chomp
puts 'first name is ' + first + '.'
puts 'enter your middle name.'
middle = gets.chomp
puts 'middle name is ' + middle + '.'
puts 'enter your last name.'
last = gets.chomp
puts 'last name is ' + last + '.'
puts 'Full name is ' + first + ' ' + middle + ' ' + last + '.' 
```

所以我尝试了一些东西，例如

```
puts 'there are ' + first.length + middle.length + last.length.to_s + 'characters in your name!' 
```

似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:13:56.943

尝试使用双引号字符串并让 ruby​​ 使用 #{} 符号为您评估代码

```
puts "there are #{first.length + middle.length + last.length} characters in your name!" 
```

**更新回应评论**

真的很简单。在 ruby​​ 中，单引号字符串被视为文本，无论您在其中输入什么内容，而双引号字符串由 Ruby 解释器解析。因此，如果您使用带有 #{} 表示法的双引号字符串，那么大括号内的所有内容都将被视为 ruby​​ 代码。

要使您的原始方式起作用，请尝试将这些值相加并将它们分配给另一个变量，然后输出该变量

例如

```
total_length = first.length + middle.length + last.length
puts 'there are ' + total_length.to_s + ' characters in your name!" 
```

您的方法的问题是您将三个值加在一起，但是 3 值上有一个 to_s ，所以 ruby​​ 会混淆最后一个数字是应该是字符串还是数字，而前两个加法不是因此，字符串不应包含在 puts 语句中。

希望这是有道理的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:18:44.427

你很近！

```
puts 'there are ' + (first.length + middle.length + last.length).to_s + 'characters in your name!' 
```

您将 last.length 转换为字符串，然后尝试将其添加到整数，但这是行不通的。括号告诉 Ruby 进行数学运算，然后将结果转换为字符串。

# jquery - 如何在悬停时获得文本气泡的效果

> ID：11147407
> 
> 赞同：-4
> 
> 时间：2012-06-21T21:59:25.647
> 
> 标签：jquery, html, css

我想在悬停时在我的社交媒体图标上产生文本气泡的效果。如果您想要一个示例，我希望它看起来类似于此页面[http://easysite.by/?theme=teardrop](http://easysite.by/?theme=teardrop)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:18:51.613

在社交按钮上查看这个小提琴实现的 qtip：http: [//jsfiddle.net/YYwmw/](http://jsfiddle.net/YYwmw/)

# xquery - 使用 XQuery 进行查询

> ID：11147409
> 
> 赞同：0
> 
> 时间：2012-06-21T21:59:40.857
> 
> 标签：xquery

XML数据以这种格式存储在sql server中

```
 <Fields>
     <Field id="1" name="aa" value="00"/>
     <Field id="2" name="bb" value="11"/>
     <Field id="3" name="cc" value="22"/>
     <Field id="4" name="dd" value="33"/>
  </Fields> 
```

我想返回所有满足条件但以不同格式返回每个 xml 的行：

```
 <Fields aa="00" bb="11" cc="22" dd="33">
   </Fields> 
```

换句话说，我希望存储格式中的每个字段标记都作为返回的 xml 中的属性返回。

预期格式为 `<Fields aa="00" bb="11" cc="22" dd="33"> </Fields>`

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:46:46.323

下面是一个可以实现您的目标的查询。我假设您知道如何从服务器检索 XML 数据；在这里，我将其与变量内联`$fields`：

```
xquery version "1.0";

let $fields :=
    <Fields>
        <Field id="1" name="aa" value="00"/>
        <Field id="2" name="bb" value="11"/>
        <Field id="3" name="cc" value="22"/>
        <Field id="4" name="dd" value="33"/>
    </Fields>
return
    <Fields>{
        for $field in $fields/Field
        let $name := $field/@name
        let $value := $field/@value
        return 
            attribute { $name } { $value }
    }</Fields> 
```

# c# - 带前缀的远程属性

> ID：11147410
> 
> 赞同：0
> 
> 时间：2012-06-21T21:59:47.873
> 
> 标签：c#, asp.net-mvc-3

我有一个容器和嵌套的视图模型，并使用 EditorFor 来呈现嵌套的视图模型，我想将 remoteAttribute 添加到一个视图模型（ConcreteViewModelA :: prop3）中的一个属性中以进行验证。但是，在验证控制器操作方法上，我得到的只是空值。

我尝试使用 Validate([Bind(Prefix="item")]string prop3)，但仍然返回为 NULL。有任何想法吗？

```
public class SomeContainer
{
    public List<ISomethingViewModel> SomeViewModels { get; set; }
}

public class ConcreteViewmodelA : ISomethingViewModel
{
    public int prop1 { get; set; }
    public int prop2 { get; set; }
    [Remote("Validate", "RemoteValidation")]
    public string prop3 { get; set; }
}

public class ConcreteViewModelB : ISomethingViewModel
{
    public int prop1 { get; set; }
    public int prop2 { get; set; }
}

public interface ISomethingViewModel
{
    int prop1 { get; set; }
    int prop2 { get; set; }
} 
```

看法：

```
@model test.Models.SomeContainer

@using (Html.BeginForm())
{
    @Html.ValidationSummary()
    <p>Begin here</p> 
    foreach (var item in Model.SomeViewModels)
    {
        @Html.EditorFor(x => item)
    }        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:27:42.063

尝试定义一个视图模型：

```
public class MyViewModel
{
    public string Prop3 { get; set; }
} 
```

进而：

```
public ActionResult Validate([Bind(Prefix = "item")] MyViewModel model)
{
    return Json(
        !string.IsNullOrEmpty(model.Prop3), 
        JsonRequestBehavior.AllowGet
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:28:13.463

检查萤火虫。您的 url 请求如下所示`Validate?item.prop3=`

所以你可以做这样的事情来读取值

```
 public ActionResult Validate(string prop3)
    {
        string prop3Val = Request.QueryString["item.prop3"].ToString();

        //your operations with prop3Val
        return Json(prop3Val, JsonRequestBehavior.AllowGet);
    } 
```

![在此处输入图像描述](../Images/a20e0ea8b0e414244c47aac483a961a0.png)

# wpf - WPF 标签通过标签绑定到多个组合框

> ID：11147412
> 
> 赞同：1
> 
> 时间：2012-06-21T21:59:52.470
> 
> 标签：wpf, xaml, label

通常我将标签与文本框/组合框一对一地关联起来，这样我就可以在组合框有焦点时装饰标签......像这样

```
<Label
    Grid.Row="1"
    Grid.Column="1"
    Style="{StaticResource styleLabelTextBlockLeft}"
    Tag="{Binding ElementName=cboColor, Path=(IsFocused)}"
>
    <TextBlock
        TextWrapping="Wrap">What is your favorite color? 
    </TextBlock>
</Label>
<ComboBox
    x:Name="cboColor"
    Grid.Row="1"
    Grid.Column="3"
    ...
/> 
```

*如果标签右侧的 ComboBox 具有焦点或*第一个 ComboBox 右侧的第二个 ComboBox 具有焦点（都在同一行），我想做的是突出显示标签。伪代码如下：

```
<Label
    Grid.Row="1"
    Grid.Column="1"
    Style="{StaticResource styleLabelTextBlockLeft}"
    Tag="{Binding ElementName=cboColorOne, Path=(IsFocused)}"
    Tag="{Binding ElementName=cboColorTwo, Path=(IsFocused)}"
>
    <TextBlock
        TextWrapping="Wrap">What is your favorite color? 
    </TextBlock>
</Label>
<ComboBox
    x:Name="cboColorOne"
    Grid.Row="1"
    Grid.Column="3"
    ...
/>
<ComboBox
    x:Name="cboColorTwo"
    Grid.Row="1"
    Grid.Column="5"
    ...
/> 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:25:47.110

如果您想要一个纯 xaml 解决方案，您可以使用样式数据触发器。在样式中将标签默认为 false，然后为每个组合框编写一个触发器，当聚焦时将标签设置为 true。

```
<Label.Style>
   <Style TargetType="Label" BasedOn="{StaticResource styleLabelTextBlockLeft}">
     <Setter Property="Tag" Value="False" />
     <Style.Triggers>
       <DataTrigger Binding="{Binding ElementName=cboColor, Path=(IsFocused)}" Value="True">
         <Setter Property="Tag" Value="True" />
       </DataTrigger>
       <DataTrigger Binding="{Binding ElementName=cboColor2, Path=(IsFocused)}" Value="True">
         <Setter Property="Tag" Value="True" />
       </DataTrigger>
 </Style.Triggers>
   </Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:23:56.997

您可以使用 MultiBinding/MultiValueConverter。只需从 IMultiValeConverter 派生一个类，如下所示：

```
public class ComboBoxFocusedConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        return (bool)values[0] || (bool)values[1];
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        return new object[0]
    }
} 
```

然后在您的资源中引用它：

```
<....Resources>
    <yournamespace:ComboBoxFocusedConverter x:Key="ComboBoxFocusedConverter" />
</....Resources> 
```

并像这样使用它：

```
<Label
    Grid.Row="1"
     Grid.Column="1"
    Style="{StaticResource styleLabelTextBlockLeft}"
>
    <Label.Tag>
        <MultiBinding Converter="{StaticResource ComboBoxFocusedConverter}">
            <Binding ElementName="cboColorOne" Path="IsFocused" />
            <Binding ElementName="cboColorTwo" Path="IsFocused" />
        </MultiBinding>
    </Label.Tag>
    <TextBlock
        TextWrapping="Wrap">What is your favorite color? 
    </TextBlock>
</Label> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T22:11:05.500

您可以编写一个具有实现所需逻辑的属性的类，然后将包含相关标签的控件的 DataContext 绑定到该类。接下来，将此标签的标签绑定到类的属性。

# perl - Perl 浏览页面，替代 Win32::Ole

> ID：11147414
> 
> 赞同：2
> 
> 时间：2012-06-21T21:59:57.883
> 
> 标签：perl

我已经成功地使用 Win32::Ole 模块来浏览页面并提交表单。这次我尝试不同的东西。我想打开浏览器，填写表格，点击提交，它会显示来自该页面的图像，然后将该图像保存在文件夹中。这个有用的模块是什么？因为我不知道如何使用 Win32::Ole 从页面获取图像（如果我导航到该页面，我可以获得内容，而不是当我提交表单并进入该页面时。）

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:26:36.850

使用 WWW::Mechanize

从[常见问题解答](http://search.cpan.org/dist/WWW-Mechanize/lib/WWW/Mechanize/FAQ.pod#How_do_I_save_an_image?_How_do_I_save_a_large_tarball?)：

```
$mech->get( 'photo.jpg' );
$mech->save_content( '/path/to/my/directory/photo.jpg' ); 
```

这是一个从网站检索和图像 (cats.gif) 并将其保存到本地目录的示例：

```
use WWW::Mechanize;

my $mech = WWW::Mechanize->new(autocheck =>1);
$mech->get( 'http://www.neurophys.wisc.edu/comp/cats.gif' );
$mech->save_content( 'c:/cats.gif' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:29:11.290

为此，CPAN 上有几个库。

万维网::机械化

万维网::机器人

CGI::Carp（有一些诡计）

万维网::硒

# php - 在 WordPress 小部件中显示自定义字段

> ID：11147415
> 
> 赞同：1
> 
> 时间：2012-06-21T21:59:59.937
> 
> 标签：php, wordpress, widget

如何从小部件中的当前帖子中调出多个字段？我已经调整了我的functions.php 以允许PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:11:08.603

```
 <?php global $wp_query;
if(is_object($wp_query->queried_object) && $wp_query->queried_object->ID)
{
    echo get_post_meta($wp_query->queried_object->ID, 'customfieldname', true);
}
?> 
```

# php - 从 php 最快的解决方案中的字符串中获取所有可能的子字符串？

> ID：11147417
> 
> 赞同：0
> 
> 时间：2012-06-21T22:00:09.987
> 
> 标签：php, foreach, increment, substr

试图获取当前所有子字符串的列表我有一个函数，但它并不完全完整。我使用的最小字符为 4。什么是补充这一点的好方法：

**我还需要找到像“预测”这样的词，如何做到最好最快？**

输出

```
Word:      predictions
Substring: predictions
Substring: redictions
Substring: edictions
Substring: dictions
Substring: ictions
Substring: ctions
Substring: tions
Substring: ions 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:08:26.197

下面将在同一个循环中创建一个从*单词*的右侧和左侧修剪到长度为 4 的子字符串。那是我理解的规范。

```
$length = strlen($word) - 4;
for ($i = 1; $i <= $length; ++$i) {
    echo "left = ", substr($word, $i), PHP_EOL;
    echo "right = ", substr($word, 0, -$i), PHP_EOL;
} 
```

**假设**：你的意思是*子**字符串*。

**注意：**我还添加了最小长度为 4 个字符的逻辑以及微优化的`for`循环（静态*限制*和预增量*计数器*）。

# html - 当浏览器改变大小时停止图像调整 div

> ID：11147422
> 
> 赞同：-2
> 
> 时间：2012-06-21T22:00:36.187
> 
> 标签：html, css, image, header, image-size

我已将我的网站放在保管箱中，因此您可以看到它 [http://dl.dropbox.com/u/13722201/Dorset%20Designs/home.html](http://dl.dropbox.com/u/13722201/Dorset%20Designs/home.html)

当我调整浏览器的大小时，顶部 div #header 在导航栏下方展开，我希望它保持齐平，但我仍然希望图像调整大小

对混乱的代码感到抱歉

提前致谢

阿伦，16

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:11:53.557

这是一个超级简单的修复，您只需要在 css 中定义 div 的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:06:56.873

从图像中删除 width: 100% 和 height: auto 并给它们一个固定的高度，相当于框架顶部和导航栏顶部之间的距离。

例如，更改`#webdesign`为仅`height:95px`修复图像的尺寸。

# iphone - 同一个frame和superview的两个view上不同的地方显示一个subview

> ID：11147428
> 
> 赞同：0
> 
> 时间：2012-06-21T22:01:06.767
> 
> 标签：iphone, objective-c, ios, uiscrollview, uilabel

我正在尝试将子视图添加到某个视图（坏视图），它总是出现在我想要的位置的右​​侧（屏幕上的 x 值不同）。

但是，我注意到当我将此子视图添加到不同的视图（好视图）时，它被放置在正确的位置。

坏视图和好视图是同一个视图的子视图，并且具有相同的框架（好视图是滚动视图中的可缩放视图，而坏视图是不缩放的覆盖视图）。

我运行以下代码：

```
view.frame = [[self tiledScrollView] tileContainerView].frame;

if ([[[self tiledScrollView] tileContainerView] superview] == [view superview])
{
    NSLog(@"SAME SUPERVIEWS");
}

[[self tiledScrollView] tileContainerView].frame = view.frame;

NSLog(@"FRAME FOR VIEW THAT DISPLAYS INCORRECTLY: %f, %f, %f, %f, \n FRAME FOR VIEW THAT DISPLAYS CORRECTLY: %f, %f, %f, %f", view.frame.origin.x, view.frame.origin.y, view.frame.size.width, view.frame.size.height, [[self tiledScrollView] tileContainerView].frame.origin.x, [[self tiledScrollView] tileContainerView].frame.origin.y, [[self tiledScrollView] tileContainerView].frame.size.width, [[self tiledScrollView] tileContainerView].frame.size.height); 
```

之后，我立即将子视图添加到 [[self tiledScrollView] tileContainerView]（好视图）或视图（坏视图）。

在 Good View 中，标签出现在我想要的位置。在 Bad View 中，标签显示在右侧一点。

上述代码的输出是：

相同的观点

显示不正确的视图框架：0.000275、0.000000、983.999451、648.282349、正确显示的视图框架：0.000293、-0.000003、983.999390、648.282349

所以它们实际上没有完全相同的帧（即使我之前将它们设置为相等），但它们非常接近，唯一可能发生舍入差异的地方是 origin.y 值，但应用程序时的差异运行在 origin.x 值中。

我已经浪费了很多时间来解决这个问题，所以非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T00:56:33.537

尝试代替

```
[[self tiledScrollView] tileContainerView].frame = view.frame; 
```

这

```
[[self tiledScrollView] tileContainerView].frame.origin.x    = view.frame.origin.x;
[[self tiledScrollView] tileContainerView].frame.origin.y    = view.frame.origin.y;
[[self tiledScrollView] tileContainerView].frame.size.width  = view.frame.size.width;
[[self tiledScrollView] tileContainerView].frame.size.height = view.frame.size.height; 
```

或反转，因为我从您的输出中看到，输出显示 view.frame 是错误的：

```
view.frame.origin.x    = [[self tiledScrollView] tileContainerView].frame.origin.x;
view.frame.origin.y    = [[self tiledScrollView] tileContainerView].frame.origin.y;
view.frame.size.width  = [[self tiledScrollView] tileContainerView].frame.size.width;
view.frame.size.height = [[self tiledScrollView] tileContainerView].frame.size.height; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T02:49:59.453

视图`frame`是其在其父视图坐标系中的边界矩形。*可能*发生的一件事是坏视图和好视图在它们自己的坐标系中不同。这很容易解释为什么您的子视图会出现在屏幕上的不同位置。一个简单的检查方法是记录`bounds`每个视图的`frame`. `bounds`在其自己的坐标系中为您提供视图的边界矩形 - 如果它们不一样，您已经找到了问题的原因。

# ruby-on-rails - 在 form_for 循环外提交按钮

> ID：11147435
> 
> 赞同：1
> 
> 时间：2012-06-21T22:01:44.210
> 
> 标签：ruby-on-rails, forms, tabs, twitter-bootstrap, form-for

我已经使用 twitter bootstrap 设置了一些水平选项卡，并且在每个选项卡中呈现了一个表单：

```
<div class="tab-content">
  <div id="tab1" class="tab-pane active">
      <%= render :partial => "shipdr/websites/form", locals: {:@shipdr_website => shipdr_website} %>
  </div>
  <div id="tab2" class="tab-pane">
    Another form (not yet implemented)
  </div>
  <div id="tab3" class="tab-pane">
    Another form (not yet implemented).
  </div>
</div> 
```

然后在 shipdr/websites/form 我有：

```
<%= simple_form_for(@shipdr_website) do |f| %>
  <% if @shipdr_website.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@shipdr_website.errors.count, "error") %> prohibited this shipdr_website from being saved:</h2>

      <ul>
      <% @shipdr_website.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.input :name %>
  </div>
  <div class="field">
    <%= f.input :url %>
  </div>
  <div class="field">
    <%= f.input :api_key %>
  </div>
  <div class="actions">
    <%= f.submit nil, :class => "btn btn-primary" %>
  </div>
<% end %> 
```

我想将提交按钮移到“选项卡内容”区域之外，因此当用户单击提交按钮时，所有三个表单区域都已提交。所有表单都将使用相同的模型和相同的操作，但具有不同的字段。这个想法类似于向导，只是我使用的是选项卡。

有谁知道如何将提交按钮移到 form_for 循环之外，以及如何使用一个按钮提交三个表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:41:22.613

我不知道你是否可以一次提交3个表格。但是你可以这样做：

```
<div class="tab-content">
  <%= simple_form_for(@shipdr_website) do |f| %>
    <div id="tab1" class="tab-pane active">
      <%= render :partial => "shipdr/websites/form", locals => {:f => f, :shipdr_website => @shipdr_website} %>
    </div>
    <div id="tab2" class="tab-pane">
      Another form (not yet implemented)
    </div>
    <div id="tab3" class="tab-pane">
      Another form (not yet implemented).
    </div>
  <% end %>
</div> 
```

并从您的部分中删除它，只留下输入。

```
<%= simple_form_for(@shipdr_website) do |f| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:30:55.380

我认为最好的方法是使用 Javascript：您可以移动按钮并通过 Ajax 一次发送 3 个表单。如果你使用 Jquery，你可以使用[http://jquery.malsup.com/form](http://jquery.malsup.com/form)

# qt - 用鼠标旋转 QGraphicsPixmapItem

> ID：11147443
> 
> 赞同：4
> 
> 时间：2012-06-21T22:02:34.277
> 
> 标签：qt, rotation, pyqt, qgraphicsscene

我正在用 PyQt 编写一个应用程序，它允许用户选择放置在 a 上的图像`QGraphicsScene`（使用 custom `QGraphicsPixmapItem`）。选择后，我希望图像上出现一个旋转手柄，用户可以用鼠标“抓取”并旋转，从而旋转`QGraphicsPixmapItem`. 基本上，我正在寻找您在选择形状时在 PowerPoint 中获得的旋转手柄功能。这似乎是许多人会实现的一个非常基本的功能，但我在网上找不到任何好的例子。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-08T13:54:34.327

让我们先把问题分成更小的问题，然后再把所有的东西组装起来。我在这个解决方案中使用 PyQt5。

**1\. 旋转一个 QGraphicsItem**

为此，您需要`setRotation`在项目上使用以度数为单位的旋转角度。旋转将围绕 指定的点`setTransformOriginPoint`。通常一个人会采取一个形状的中心。如果您不指定此点，通常会采用形状的左上角。

**2.拖一个QGraphicsItem**

出于性能原因，QGraphicsItems 不可移动，也不会将位置更改发送到事件框架。通过设置适当的标志`QtWidgets.QGraphicsItem.ItemIsMovable | QtWidgets.QGraphicsItem.ItemSendsScenePositionChanges`，您可以改变它。另外`QGraphicsItem`不继承自`QObject`，因此对于使用信号，我通常有一个从 QObject 继承的附加对象。

**3\. 绘制一个手柄项，并确定要旋转的旋转角度**

在下面的示例中，我有一个非常小的矩形作为句柄，您当然可以使用任何您喜欢的 QGraphicsItem。我的方法`make_GraphicsItem_draggable`采用任何 QGraphicsItem 派生类并使其可拖动。在给定可拖动手柄项目的当前位置和要旋转的项目的变换原点的情况下，确定旋转角度，以及这些位置`math.atan2`的差异`x`和`y`坐标。

**例子**

```
import math
from PyQt5 import QtCore, QtWidgets

class DraggableGraphicsItemSignaller(QtCore.QObject):

    positionChanged = QtCore.pyqtSignal(QtCore.QPointF)

    def __init__(self):
        super().__init__()

def make_GraphicsItem_draggable(parent):

    class DraggableGraphicsItem(parent):

        def __init__(self, *args, **kwargs):
            """
            By default QGraphicsItems are not movable and also do not emit signals when the position is changed for
            performance reasons. We need to turn this on.
            """
            parent.__init__(self, *args, **kwargs)
            self.parent = parent
            self.setFlags(QtWidgets.QGraphicsItem.ItemIsMovable | QtWidgets.QGraphicsItem.ItemSendsScenePositionChanges)
            self.signaller = DraggableGraphicsItemSignaller()

        def itemChange(self, change, value):
            if change == QtWidgets.QGraphicsItem.ItemPositionChange:
                self.signaller.positionChanged.emit(value)

            return parent.itemChange(self, change, value)

    return DraggableGraphicsItem

def rotate_item(position):
    item_position = item.transformOriginPoint()
    angle = math.atan2(item_position.y() - position.y(), item_position.x() - position.x()) / math.pi * 180 - 45 # -45 because handle item is at upper left border, adjust to your needs
    print(angle)
    item.setRotation(angle)

DraggableRectItem = make_GraphicsItem_draggable(QtWidgets.QGraphicsRectItem)

app = QtWidgets.QApplication([])

scene = QtWidgets.QGraphicsScene()
item = scene.addRect(0, 0, 100, 100)
item.setTransformOriginPoint(50, 50)

handle_item = DraggableRectItem()
handle_item.signaller.positionChanged.connect(rotate_item)
handle_item.setRect(-40, -40, 20, 20)
scene.addItem(handle_item)

view = QtWidgets.QGraphicsView(scene)
view.setFixedSize(300, 200)
view.show()

app.exec_() 
```

开始（项目 = 大矩形和句柄 = 小矩形）

[![开始](../Images/ab809f0993bd1a2807e18bfa9fc31ad3.png)](https://i.stack.imgur.com/wqRYz.jpg)

拖动手柄后旋转（小矩形）

[![旋转](../Images/981565c4becbc5e736ce4b7d7052807c.png)](https://i.stack.imgur.com/9E3LP.jpg)

缺少的一件事：手柄与项目位置没有固定距离（即，您可以将其拖得更远或更近，而不是在一个圆圈中移动）。虽然这不会改变旋转角度，但它看起来并不完美。但这里涵盖了要点，应该让你走上正确的道路。

# c++ - 位图到电影？

> ID：11147445
> 
> 赞同：0
> 
> 时间：2012-06-21T22:02:40.570
> 
> 标签：c++, windows, performance, bitmap, gdi

我想做一点高性能的录音应用程序。对于捕获，我将使用[GDI 方式。](http://www.codeproject.com/Articles/5051/Various-methods-for-capturing-the-screen) 但是，我不确定使用哪种方法[将](http://www.codeproject.com/Articles/5051/Various-methods-for-capturing-the-screen)位图转换为电影。我想使用不需要在录制电影的 PC 上安装任何其他编解码器或库的方法。

另外，我想知道哪种方法可以更快地处理从位图到电影的转换。捕获位图然后从同一个线程将其添加到电影中更快，还是让一个线程捕获位图而另一个线程将它们添加到电影中更快？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:30:33.533

编写自己的视频编码器需要做很多工作。为什么不能使用开源解决方案进行编码，例如 ffmpeg 或 mencoder？

# php - MySQL / PHP 具有特定参数的平均列值

> ID：11147451
> 
> 赞同：1
> 
> 时间：2012-06-21T22:02:55.277
> 
> 标签：php, mysql, sql, average

我有一个令人惊讶的基本问题；我认为关于平均列的答案会更直接。这是我的带有示例值的表：

**表：评级**

```
id, rating, item_id 
```

**样本数据**

```
1, 5, 3
2, 1, 2
3, 2, 3
4, 4, 4 
5, 1, 2 
```

如果我想获得 item_id 标记为“3”的平均评分怎么办

真正的答案是 2.5，因为 3 和 a1，另一个是 5。

这是我相信的查询：

```
 SELECT avg(rating) as average FROM ratings; 
```

如何仅指定 item_id 为 3 的评级？我使用 WHERE 吗？通过...分组？别的东西？

问题的第二部分：如何将其输出到单个变量中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T22:18:46.963

您只需要指定一个`WHERE`子句：

```
SELECT AVG(rating) AS average
FROM ratings
WHERE item_id = 3
-- returns 1 row 
```

如果要获取按 item_id 分组的整个数据的平均值，可以使用`GROUP BY`：

```
SELECT item_id, AVG(rating) AS average
FROM ratings
GROUP BY item_id
-- returns as many rows as the number of distinct item_ids 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T22:19:02.950

嗯……你试过吗？

```
SELECT AVG(rating) FROM ratings WHERE item_id = 3; 
```

如果您`rating`的列是整数类型，那么您可能希望这样做：

```
SELECT AVG( CAST(rating AS FLOAT) ) FROM ratings WHERE item_id = 3; 
```

如果要将结果保存在变量中：

```
SELECT AVG( CAST(rating AS FLOAT) ) INTO @var FROM ratings WHERE item_id = 3;
SELECT @var; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:08:35.840

您可能想检查我在大多数项目中使用的算法。它不需要任何复杂的 MySQL 语句和函数，同时平均评分值的检索和更新都只影响一行，即使您正在处理数百万个评分。一切都基于纯数学:)

检查一下，希望它有用：[使用 PHP 和 MySQL 以正确的方式计算平均评分](http://www.marinbezhanov.com/web-development/18/calculating-average-rating-the-right-way-using-php-and-mysql/ "使用 PHP 和 MySQL 以正确的方式计算平均评分")

# meteor - 流星中会有一些简单的 CMS 功能吗？

> ID：11147455
> 
> 赞同：0
> 
> 时间：2012-06-21T22:03:23.360
> 
> 标签：meteor

是否会有一些流星包用于在 webapp 本身周围的（非反应性）网站上填充内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:35:48.497

> [http://meteor.com/faq/can-meteor-serve-static-html](http://meteor.com/faq/can-meteor-serve-static-html)

## Meteor 可以提供静态 HTML 吗？Meteor 是否可以在客户端禁用 JavaScript 的情况下工作？流星网站可以被谷歌索引吗？

Meteor 经过精心设计以支持这个重要的用例，但它不在当前的 Meteor 版本中。它将成为我们即将发布的路由版本的一部分，这将使构建知道当前 URL 的 Meteor 站点变得容易。

简而言之，服务器端渲染的工作方式是 Meteor 应用程序在服务器上启动并允许渲染页面。然后会话状态被序列化（使用与热代码推送相同的迁移技术），应用程序被冻结并推送到浏览器，如果浏览器支持 JavaScript，则可以选择重新启动它。由于 Meteor 模板基于 HTML 字符串，而不是 DOM 操作，因此无需在服务器上运行 DOM 仿真包。

# macos - OS X 可以从 CALayer 显示弹出菜单吗？

> ID：11147456
> 
> 赞同：0
> 
> 时间：2012-06-21T22:03:33.730
> 
> 标签：macos, user-interface, core-animation, calayer

有没有办法从核心动画层显示弹出菜单，例如 NSMenu 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:49:20.947

不。图层是比 NSView 对象低级别的对象。您不能将视图放在图层中。

在 OS X 中，层是视图的可选部分。（在 iOS 中，**每个**视图都由一个层支持）

但是，您可以采用另一种方式，并要求一个视图作为图层支持，然后将其他图层添加到视图中。

# ruby-on-rails-3 - Rails 3 通过另一个父母找到孩子的祖父母

> ID：11147458
> 
> 赞同：1
> 
> 时间：2012-06-21T22:03:44.193
> 
> 标签：ruby-on-rails-3, activerecord, polymorphic-associations

如何在 Ruby on Rails 中查询侧祖父母？

例如，我有以下模型设置：

**用户**

```
class User < ActiveRecord::Base
   has_many :registrations
end 
```

**登记**

```
class Registration < ActiveRecord::Base
   belongs_to :user
   belongs_to :competition
end 
```

**竞赛**

```
class Competition < ActiveRecord::Base
  has_many :registrations
  belongs_to :tournament
end 
```

**比赛**

```
class Tournament < ActiveRecord::Base
  has_many :competitions
end 
```

所以我想做的是找到所有拥有属于特定**Tournament的****注册的****用户**。我知道的唯一方法是找到所有用户，遍历每个用户，然后像这样查询每个用户的个人注册......

 ****```
<% @users.each do |user| %>
    <% if user.registrations..joins(:competition).where("competitions.tournament_id = #{params[:tournament]}").count > 0 %>
        print out user information...
    <% end %>
<% end %> 
```

这似乎是一种真正的半知半解的做事方式，因为我正在选择我不需要的记录，任何人都可以建议一种更好的更 Railsy 方式来实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:59:40.637

创建更“Railsy”解决方案的第一步是将查询逻辑移出视图并移入模型层。您可以将这两个查询添加到您的锦标赛模型中：

```
class Tournament < ActiveRecord::Base
  has_many :competitions

  def registrations
    regs = []
    self.competitions.each do |competition|
      competition.registrations.each do |registration|
        regs << registration
      end
    end
    regs
  end

  def users
    usrs = []
    self.registrations.each do |registration|
      usrs << registration.user
    end
    usrs
  end

end 
```

现在，您可以在视图中：

```
<% @tournament.users.each do |user| %>
  User: <%= user.name %><br />
<% end %> 
```

如果您需要，您还有一个方法可以返回锦标赛中的所有注册。希望这可以帮助您了解另一种方法。****

# c# - 将 PDF 文档转换为 XML 文件，最好使用 ITextSharp

> ID：11147466
> 
> 赞同：3
> 
> 时间：2012-06-21T22:04:12.747
> 
> 标签：c#, xml, pdf, itext

我有一个需要从中读取数据的 PDF 文档。我发现，当我将所述 PDF 转换为 XML 文档时，我可以从中读取方便的标签，因此我需要一种在代码中将文件转换为 xml 的方法，这样我就可以使用映射器文件读取数据内容到数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:44:45.503

使用[PDFMiner](http://www.unixuser.org/~euske/python/pdfminer/index.html)

PDFMiner 是一个从 PDF 文档中提取信息的工具。它包括一个 PDF 转换器，可以将 PDF 文件转换为其他文本格式（例如 XML/HTML）。

与其他 PDF 相关工具不同，它完全专注于获取和分析文本数据。PDFMiner 允许获取页面中文本的确切位置，以及字体或线条等其他信息。

它有一个可扩展的 PDF 解析器，可用于文本分析以外的其他目的。

# jquery - Node.js JSON.stringify() 在输出中导致“。无法使用 Jquery 解析

> ID：11147468
> 
> 赞同：26
> 
> 时间：2012-06-21T22:04:19.590
> 
> 标签：jquery, json, node.js, express, pug

我正在使用 Node.js（使用 Express.js）将 JSON 数据对象从服务器传递到客户端视图。

当我将 JSON 对象直接呈现到视图时，我得到了页面上显示的 JSON 对象，如预期的那样（这个 WORKS）：

```
pageprovider.findAllTag( function(error, pages){
    res.send(pages);
}) 
```

我的输出看起来像这样（更大，许多嵌套的obj）

```
{"green":{"title":"green","pagesContaining": ""}} 
```

当我尝试像这样将它传递给我的 Jade View 时：

```
pageprovider.findAllTag( function(error, tagsJSONObj){
        //res.send(pages);

    pageprovider.findAll( function(error, pages){
        res.render('search_tags.jade', { locals: {
            title: 'Search by Tags',
            'pages': pages,
            tagsJSON: JSON.stringify(tagsJSONObj) //pass the tags data as a JSON obj
            }
        });
    }) //pageprovider.findAll
}) //pageprovider.findAllTag 
```

* * *

**问题**
当我将“tagsJSON”传递给视图时，输出包括 html 实体：

```
var obj = jQuery.parseJSON( "{&quot;name&quot;: 'value'}"); 
```

JQuery 抛出一个错误，因为它不喜欢 '"'。我怎样才能让 Node 给我正确的报价，或者让 jQuery 接受这种格式？

有什么想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-21T22:13:44.907

这是因为当你打电话

```
 res.render('search_tags.jade', { locals: {
        title: 'Search by Tags',
        'pages': pages,
        tagsJSON: JSON.stringify(tagsJSONObj) //pass the tags data as a JSON obj
        }
    }); 
```

`search_tags.jade`旨在输出 HTML，因此它对您的引号进行编码。您应该使用不会 HTML 转义的渲染器，或者至少更改您的视图，以便您的参数不是 HTML 编码的

如果您不希望输出中的某些内容转义，`!{tagsJSON}`请在视图中使用。但是，在输出 JSON 时，不需要视图。你可以拿你的对象，打电话`JSON.stringify`。我不使用 JADE，所以我不确定是否有一种方法可以创建可以调用的视图`JSON.stringify()`，但这就是我在 JSP、velocity、ASP、PHP 和 Code Igniter 中所做的（不使用`JSON.stringify`，而是使用给定语言的 JSON 工具）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-17T09:01:36.403

在 ejs 中，它的`<%- tagsJSON %>`

```
 ^ <---- Note the "-" 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-03-07T18:33:48.530

使用 Swig.js 时更好的解决方案

`{{ data|json|raw }}`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-17T16:37:31.677

## Swig 模板引擎方法：

由于没有提到 Swig，我将添加我的版本。

我今天遇到了这个问题，花了好几个小时试图让它工作，这样我就可以将数据发送到 Chart.js： http: [//www.chartjs.org/docs/](http://www.chartjs.org/docs/)

就我而言，我使用的是 Geddy.js 而不是 Express.js。像原始海报一样，我也遇到了 html 转义 JSON 字符串问题。

我正在使用 Swig 模板引擎。

感谢 Juan Mendes 提到**html escaping**，我发现了 Swig 的开发者的这个讨论：

[https://github.com/jnordberg/wintersmith-swig/pull/1](https://github.com/jnordberg/wintersmith-swig/pull/1)

这导致我搜索禁用自动转义的选项。

我第一次尝试：

```
{{ data|raw }} // didn't work 
```

正如github页面中提到的那样，但这不起作用，所以我去文档并找到了这个：

[http://paularmstrong.github.io/swig/docs/tags/](http://paularmstrong.github.io/swig/docs/tags/)

金子！:D

所以**最终解决方案**：

```
{% autoescape false %}
var data = {{ data }}
{% endautoescape %} 
```

# c# - 如何将 json 结果（部分视图）显示为模式弹出窗口？

> ID：11147471
> 
> 赞同：-1
> 
> 时间：2012-06-21T22:05:23.780
> 
> 标签：c#, javascript, jquery, asp.net-mvc, json

我试图通过从我的javascript中进行这样的getjson调用来显示一个模式弹出窗口：

```
 $.getJSON('/Home/somefunction', function(result) {
       var toto = $(result);
       alert(toto);
       });

      public ActionResult somefunction()
      {
         return new JsonResult { Data = PartialView("modal pop up partial view") };
      } 
```

我的模态弹出视图是局部视图。

1.  我不知道这是否是在我的控制器函数中将部分视图转换为 jsonresult 的正确方法。
2.  我不知道，如何使用 getjson 中的结果来显示是否弹出（我需要分配给任何 div）吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:08:49.707

更好的方法是从控制器返回一个 PartialView。使用`$.get`或`$.ajax`向服务器发出 GET 请求（或 POST 如果需要），回调将包含 HTML。然后，您可以将 HTML 注入父视图（在模式内）。

HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:27:23.720

您可能想看看[FancyBox](http://fancybox.net/)库，它非常适合您的情况使用。

# spotify - libspotify API：搜索结果和艺术家肖像

> ID：11147472
> 
> 赞同：0
> 
> 时间：2012-06-21T22:05:30.473
> 
> 标签：spotify

根据 API 文档，如果我搜索艺术家并调用搜索完成回调，则会加载 sp_artist 对象。由于 sp_artist 对象已加载，我假设可以检索艺术家的肖像 URI，而无需等待任何其他回调。但结果是，有时可以检索到肖像 URI，有时则不能。为什么？我正在使用 libspotify 版本 12 并使用**sp_link_create_from_artist_portrait(artist, SP_IMAGE_SIZE_LARGE)**来获取肖像链接。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T07:02:31.527

这是同一位艺术家，有时工作，有时不工作？否则，很多艺术家没有肖像图像。在这种情况下，您可以使用他们专辑的封面之一。

# google-chrome-extension - 我的第一个 Chrome 扩展程序找不到 default_popup 页面

> ID：11147480
> 
> 赞同：0
> 
> 时间：2012-06-21T22:06:11.130
> 
> 标签：google-chrome-extension

我正在按照本教程为 Chrome 创建一个简单的 Hello World 扩展： [http](http://code.google.com/chrome/extensions/getstarted.html) ://code.google.com/chrome/extensions/getstarted.html 我已按照该教程中的所有步骤进行操作，尽管我看到了工具栏按钮中的图标，当我单击该按钮时，我看到一个带有此错误的弹出文档：

> **此网页未找到 未找到**该网址的网页：chrome-extension://mblkllehamdcncminlelggjfcbmkflbj/popup.html 错误 6 (net::ERR_FILE_NOT_FOUND)：找不到文件或目录。

我的 popup.html 和 popup.js 文件与图标位于同一文件夹中这是我的 manifest.json 内容：

```
{
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension that I made.",
   "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [
    "http://api.flickr.com/"
  ]
} 
```

知道有什么问题吗？（我已经用谷歌搜索了很长一段时间没有成功，看起来我被困在的地方对其他人来说没问题......）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:15:28.190

哎呀...

忘记这个蹩脚的问题。

由于复制粘贴，我的*popup.html文件在文件名（* *“popup.html”* ）的开头有一个空格。我删除了它，它工作得很好。

# ios - 在 cocos3d 中加载 3d 模型

> ID：11147481
> 
> 赞同：1
> 
> 时间：2012-06-21T22:06:17.157
> 
> 标签：ios, cocos3d, 3d-model

我是 cocos3d 的新手，我已经阅读了一些关于将 3d 模型加载到 cocos3d 中的信息。据我了解，在 cocos3d 中添加 3d 模型的原生方式是通过转换器将来自 Blender 或 3DsMax 的模型转换为 POD 格式。是不是好像有点难？在我的应用程序中，我可以轻松做到这一点，因为我只有几个模型，但假设我正在编写一个包含数百或数千个模型的大型游戏，我应该这样做吗？转换我拥有的每个模型？这是一个好习惯吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:45:21.783

好的，也许这个答案对某人有用。我编写了一些脚本来自动从我的 3d 设计师那里获取 3d 模型（他们正在使用 Blender）。第一个是将 .blend 文件导出为 .dae，它是用 Python 编写的，文件应该存在于一个目录中（参见下一个脚本中的参数列表）：

```
import os
import sys
import glob
import bpy

if len(sys.argv) != 7:
    print("Must provide input and output path")
else:
    for infile in glob.glob(os.path.join(sys.argv[5], '*.blend')):
        bpy.ops.object.select_all(action='SELECT')
        bpy.ops.object.delete()
        bpy.ops.wm.open_mainfile(filepath=infile)
        bpy.ops.object.select_all(action='SELECT')
        bpy.ops.object.transform_apply(location=True,rotation=True,scale=True)
        outfilename = os.path.splitext(os.path.split(infile)[1])[0] + ".dae"
        bpy.ops.wm.collada_export(filepath=os.path.join(sys.argv[6], outfilename),apply_modifiers=True,include_armatures=True,deform_bones_only=True,include_uv_textures=True,include_material_textures=True,active_uv_only=True) 
```

第二个是使用 Collada2Pod 将这些 .dae 文件导出到 .pod，这是 Perl：

```
#!/usr/bin/perl

my $dir = '/Users/nikita/Develop/model_convertor/dae_models/';
my $out_dir = '/Users/nikita/Develop/model_convertor/pod_models/';
my $collada = '/Users/nikita/Develop/model_convertor/Collada2POD/MacOS_x86_32/Collada2POD';

opendir(DIR, $dir) or die $!;

while (my $file = readdir(DIR)) {

    next if ($file !~ m/\.dae/);

    $out_file = $file;
    $out_file =~ s/dae/pod/g;

    $command = "$collada -i=$dir$file -o=$out_dir$out_file";
    system($command);
} 
```

用法示例：

```
/Applications/blender.app/Contents/MacOS/blender --background --python /Users/nikita/Develop/model_convertor/exporter.py -- /Users/nikita/Develop/model_convertor/catalog /Users/nikita/Develop/model_convertor/dae_models

perl /Users/nikita/Develop/model_convertor/convertor.pl 
```

其中第一个命令是“/path/to/blender --background --python /path/to/first/script -- /path/to/blend/files /path/to/dae/files”。第二个命令只是执行 perl 脚本。很抱歉在第二个脚本中对常量变量进行硬编码:) 希望这对某人有用。

更新：我在`transform_apply`第一个脚本中添加了函数，因为没有应用转换的模型存在问题，导致输出错误

# scala - 如何转换播放！2.0 Scala 文件转换成CSVReader 的格式？

> ID：11147489
> 
> 赞同：3
> 
> 时间：2012-06-21T22:07:43.493
> 
> 标签：scala, playframework-2.0

我在使文件上传正常工作时遇到一些问题，并且以下代码无法编译。

**错误**：`overloaded method constructor File with alternatives: (java.net.URI)java.io.File <and> (java.lang.String)java.io.File cannot be applied to (play.api.mvc.MultipartFormData.FilePart[play.api.libs.Files.TemporaryFile])`

**代码**：

```
def csvimport = Action(parse.multipartFormData) { request =>
      request.body.file("files[]").map { rawfile =>

        val filename = rawfile.filename 
        val contentType = rawfile.contentType
        val tmpFile = new File(rawfile)

        val reader = new CSVReader(new FileReader(tmpFile))

        Ok
      }
      .getOrElse {
        Logger.debug(request.body.toString)
        BadRequest
      }
    } 
```

在运行 CSVReader 之前，是否需要将文件临时存储到磁盘？有没有办法将原始文件上传转换为`File`内存中的新类？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:56:26.127

这是我猜你想要达到的目标

[https://stackoverflow.com/a/11059295/317452](https://stackoverflow.com/a/11059295/317452)

[https://gist.github.com/2939230](https://gist.github.com/2939230)

这会逐步解析文件的块，而不会将整个原始文件放入内存或磁盘中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-11T23:07:00.510

有同样的问题：

尝试：

```
request.body.file("Image").ref.file // Java.io.File 
```

request.body 是 play.api.mvc.MultipartFormData

request.body.file("Image").ref 是 play.api.libs.Files.TemporaryFile 这里：[https](https://www.playframework.com/documentation/2.0/api/scala/play/api/libs/Files) ://www.playframework.com/documentation/2.0/api/scala/play/api/libs/Files $ $临时文件.html

# sql - SQL Azure：更多间歇性超时

> ID：11147490
> 
> 赞同：5
> 
> 时间：2012-06-21T22:08:08.843
> 
> 标签：sql, asp.net-mvc, entity-framework, azure, structuremap

我们有一套 5 个在 Windows Azure 和 SQL Azure 上运行的在线拍卖系统。每个系统由一个 Web Worker 和一个或多个 Web 角色组成。每个系统都使用 ASP.NET MVC 3 和 Entity Framework、Repository Pattern 和 StructureMap。

worker 角色负责内务管理并运行两组进程。一组每十秒运行一次，另一组每秒运行一次。每个进程都可能运行数据库查询或存储过程。这些是用 Quartz.net 安排的

Web 角色服务于公共界面和后台。在其他基本的 crud 功能中，这两个都提供屏幕，当打开时，将重复调用控制器方法，这将导致执行存储过程只读查询。重复频率约为每位客户 2-3 秒。一个典型的用例是打开 5 个后台办公室窗口，并打开 25 个最终用户窗口——所有这些窗口都在重复访问系统。

很长一段时间以来，我们一直在遇到间歇性 SQL 超时错误。最常见的三个是：

> System.Data.SqlClient.SqlException：从服务器接收结果时发生传输级错误。（提供者：TCP 提供者，错误：0 - 现有连接被远程主机强行关闭。）
> 
> System.Data.SqlClient.SqlException：从服务器接收结果时发生传输级错误。（提供者：TCP 提供者，错误：0 - 信号量超时期限已过。）
> 
> System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。

唯一可预测的情况是在拍卖期间，特定控制器 -> sproc 在事件期间开始超时（可能是由于负载）。在所有其他时间，即使在用户不活动期间，错误似乎都是完全随机的，并且出现单次、两次和三次等错误。例如，系统将运行 18 个小时而没有错误，然后可能会出现 5 到 10 个来自不同内务管理方法的错误，或者可能是用户登录并查看了他们的帐户。

其他信息：

我尝试使用本地 SSMS 和 Azure 基于 Web 的查询工具在 SQL Azure 上运行受影响的查询/存储过程——所有这些似乎都执行得很快，最多 1 秒。尽管我绝不是 SQL 查询性能专家，也不是任何其他类型的专家，但查询计划并没有显示任何太可疑的东西 J

我们已经在 Azure SQL 瞬态故障处理块中包装了所有受影响的区域——但正如这里所讨论的那样[http://social.msdn.microsoft.com/Forums/en-US/ssdsgetstarted/thread/7a50985d-92c2-472f-9464-a6591efec4b3](http://social.msdn.microsoft.com/Forums/en-US/ssdsgetstarted/thread/7a50985d-92c2-472f-9464-a6591efec4b3)，他们没有捕捉到超时，根据“Valery M”的说法，这是有充分理由的。

我们没有在数据库中存储任何会话信息，尽管 asp.net 成员信息存储在数据库中。

我们使用 1 个“SQL Azure 服务器实例”托管所有 5 个数据库，两个用于暂存，三个用于生产。所有 5 个系统通常同时处于活动状态，尽管在任何给定时间不太可能有超过一个系统处于活载使用状态。所有 Web 角色、辅助角色和 SQL Azure 服务器都位于同一个 Azure 地理区域。

关于我们应该在哪里寻找的任何想法？为每个系统提供自己的 SQL Azure 服务器会有所帮助吗？......我们自己的解决方案失败 - 是否有可能让微软打开支持票并查看我们的应用程序发生了什么 - 一个人如何解决这个问题？

提前致谢。

宜兰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T22:32:26.710

SQL Azure 是一个多租户系统，您可能会受到来自其他租户的潜在过度使用的影响。微软通过限制其他租户做得很好，但偶尔 SQL Azure 查询会超时。

要打开 Microsoft 支持，请访问此页面：[https ://support.microsoft.com/oas/default.aspx?gprid=14919&st=1&wfxredirect=1&sd=gn](https://support.microsoft.com/oas/default.aspx?gprid=14919&st=1&wfxredirect=1&sd=gn)

# c# - StreamWriter 写入 MemoryStream

> ID：11147491
> 
> 赞同：23
> 
> 时间：2012-06-21T22:08:13.307
> 
> 标签：c#, .net, stream, memorystream

我的印象是，当您调用`Flush()`StreamWriter 对象时，它会写入底层流，但显然我的代码并非如此。

它不会写入我的文件，而是什么都不写。有什么想法我哪里出错了吗？

```
 public FileResult DownloadEntries(int id)
    {
        Competition competition = dataService.GetCompetition(id);
        IQueryable<CompetitionEntry> entries = dataService.GetAllCompetitionEntries().Where(e => e.CompetitionId == competition.CompetitionId);

        MemoryStream stream = new MemoryStream();
        StreamWriter csvWriter = new StreamWriter(stream, Encoding.UTF8);

        csvWriter.WriteLine("First name,Second name,E-mail address,Preferred contact number,UserId\r\n");

        foreach (CompetitionEntry entry in entries)
        {
            csvWriter.WriteLine(String.Format("{0},{1},{2},{3},{4}",
                entry.User.FirstName,
                entry.User.LastName,
                entry.User.Email,
                entry.User.PreferredContactNumber,
                entry.User.Id));
        }

        csvWriter.Flush();

        return File(stream, "text/plain", "CompetitionEntries.csv");
    } 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-21T22:14:44.920

我相信你需要设置`Stream.Position = 0`. 当您写入时，它会将位置推进到流的末尾。当你将它传递给`File()`它时，它从它所在的位置开始 - 结束。

我认为以下将起作用（没有尝试编译）：

```
stream.Position = 0;
return File(stream, "text/plain", "CompetitionEntries.csv"); 
```

这样您就不会创建任何新对象或复制底层数组。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-21T22:13:59.673

您的 MemoryStream 位于最后。更好的代码是使用[MemoryStream(Byte[], Int32, Int32, Boolean)](http://msdn.microsoft.com/en-us/library/ezk6t72e)构造函数在同一个缓冲区上创建新的 R/o 内存流。

修剪缓冲区上最简单的读/写：

```
 return File(new MemoryStream(stream.ToArray()); 
```

不复制内部缓冲区的 R/o：

```
 return File(new MemoryStream(stream.GetBuffer(), 0, (int)stream.Length, false); 
```

注意：注意不要处理通过 File(Stream) 返回的流。否则你会得到某种“ObjectDisposedException”。即，如果您只是将原始流的位置设置为 0 并将 StreamWriter 包装到使用中，您将返回已处理的流。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T22:27:31.240

在玩这个的过程中，我得到了以下原型：

```
using System.Web.Mvc;
using NUnit.Framework;

namespace StackOverflowSandbox
{
[TestFixture]
public class FileStreamResultTest
{
    public FileStreamResult DownloadEntries(int id)
    {
        // fake data
        var entries = new[] {new CompetitionEntry { User = new Competitor { FirstName = "Joe", LastName = "Smith", Email = "jsmith@example.com", Id=id.ToString(), PreferredContactNumber = "555-1212"}}};

        using (var stream = new MemoryStream())
        {
            using (var csvWriter = new StreamWriter(stream, Encoding.UTF8))
            {
                csvWriter.WriteLine("First name,Second name,E-mail address,Preferred contact number,UserId\r\n");

                foreach (CompetitionEntry entry in entries)
                {
                    csvWriter.WriteLine(String.Format("{0},{1},{2},{3},{4}",
                                                      entry.User.FirstName,
                                                      entry.User.LastName,
                                                      entry.User.Email,
                                                      entry.User.PreferredContactNumber,
                                                      entry.User.Id));
                }

                csvWriter.Flush();
            }

            return new FileStreamResult(new MemoryStream(stream.ToArray()), "text/plain");
        }
    }

    [Test]
    public void CanRenderTest()
    {
        var fileStreamResult = DownloadEntries(1);
        string results;
        using (var stream = new StreamReader(fileStreamResult.FileStream))
        {
            results = stream.ReadToEnd();
        }
        Assert.IsNotEmpty(results);
    }
}

public class CompetitionEntry
{
    public Competitor User { get; set; }
}

public class Competitor
{
    public string FirstName;
    public string LastName;
    public string Email;
    public string PreferredContactNumber;
    public string Id;
}
} 
```

# android - Android - ListView 项目不会显示对象数据

> ID：11147492
> 
> 赞同：0
> 
> 时间：2012-06-21T22:08:13.780
> 
> 标签：android, android-listview, baseadapter

我使用 BaseAdapter 并向其传递具有自己数据集的对象列表。在列表视图的每一行中，ID 都像图像、描述等。每个对象的。当我按照我现在设置的方式使用 BaseAdapter 时，我没有收到任何错误，并且我在调试器和 logcat 中反复检查我的对象列表有效且不为空。但由于某种原因，该列表使用正确数量的对象构建，但不是 ImageViews、TextViews 或其他任何东西之一接受任何数据。每行中唯一的东西是我在列表行的 xml 布局中使用的相同默认数据。就像对每个视图的 set 方法的调用要么由于某种原因被忽略，要么视图的内容被传递到屏幕上的另一个上下文或一些古怪的东西。无论如何继承我的 BaseAdapter 类：

```
 class MaItemAdapter extends BaseAdapter{
        List<Ma> mas = null;
        Context cntx = null;
        //LayoutInflater myInflater;
        int itemPosition =0;
        ViewHolder holder;

        public MarkItemAdapter(Activity cntx,List<Ma> mas){
            super();
            this.mas = mas;
            this.cntx = cntx;
            //myInflater = LayoutInflater.from(cntx);

        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return mas.size();
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return mas.get(position);
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            itemPosition = position;
            RelativeLayout rl = null;
            Mark ma = mas.get(itemPosition);
            if (convertView==null) {
                rl = (RelativeLayout) LayoutInflater.from(cntx).inflate(
                        R.layout.ma_row_item, parent, false);
                holder = new ViewHolder();
                try{
                holder.description = (TextView) rl.findViewById(R.id.ma_description);
                holder.distance = (TextView) rl.findViewById(R.id.ma_distance);
                holder.ma_image = (ImageView) rl.findViewById(R.id.ma_image);
                holder.view_ma = (ImageButton) rl.findViewById(R.id.view_ma);
                holder.rate_ma = (RatingBar) rl.findViewById(R.id.rate_ma);
                holder.description.setText(ma.title);
                holder.distance.setText(ma.getDistanceString());
                holder.view_ma.setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View arg0) {
                    //dostuff
                }

            });
            if(ma.textImg!=null &&
                    !ma.textImg.isRecycled()){
            holder.ma_image.setImageBitmap(ma.textImg);
            }else{
                holder.ma_image.setImageResource(R.raw.skyma);
            }}catch(NullPointerException e){}
            }else{
                rl = (RelativeLayout) convertView;
            }

        //add logic for rating bar

            return rl;
        }

    }

//convenience class to create views 
    private class ViewHolder{
        ImageView ma_image;
        TextView description;
        TextView distance;
        ImageButton view_ma;
        RatingBar rate_ma;

        public ViewHolder(){
            ma_image = new ImageView(getApplicationContext());
            description = new TextView(getApplicationContext());
            distance = new TextView(getApplicationContext());
            view_ma = new ImageButton(getApplicationContext());
            rate_ma = new RatingBar(getApplicationContext());
        }
    }

} 
```

我已经浏览了一些教程，它们工作正常，但是当我在自己的应用程序中使用这个设置时，它就不行了。在正确的方向上提供一些帮助会很棒。我应该提到的另一件事是，如果我按下评级栏，我会看到每四五行弹出相同的评级。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:57:36.140

在您的 getView 方法中尝试此操作...这就是我的自定义适配器的设置方式。

```
itemPosition = position;
View v = convertView;
Mark ma = mas.get(itemPosition);

if (v == null) {
    LayoutInflater inflater = (LayoutInflater) cntx
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    v = inflater.inflate(R.layout.ma_row_item, null);
    holder = new ViewHolder();
}

holder.description = (TextView) v.findViewById(R.id.ma_description);
holder.distance = (TextView) v.findViewById(R.id.ma_distance);
holder.ma_image = (ImageView) v.findViewById(R.id.ma_image);
holder.view_ma = (ImageButton) v.findViewById(R.id.view_ma);
holder.rate_ma = (RatingBar) v.findViewById(R.id.rate_ma);
holder.description.setText(ma.title);
holder.distance.setText(ma.getDistanceString());
holder.view_ma.setOnClickListener(new OnClickListener(){

    @Override
    public void onClick(View arg0) {
        //dostuff
    }

});

if(ma.textImg!=null && !ma.textImg.isRecycled()) {
    holder.ma_image.setImageBitmap(ma.textImg);
} else {
    holder.ma_image.setImageResource(R.raw.skyma);
} 
```

如果这不起作用，我还建议您从 getView 方法主体中而不是在 ViewHolder 中初始化您的各个视图。就像是：

```
TextView description = (TextView) v.findViewById(R.id.ma_description);
description.setText(ma.title); 
```

# cakephp - 使用验证防止更新

> ID：11147494
> 
> 赞同：0
> 
> 时间：2012-06-21T22:08:26.880
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我有`User`包含字段`type`的模型`enum ('client','agent')`。在我注册用户后，我不希望这个字段被更新——我在模型中寻找一些总是返回 false 的验证方法——然后我可以在更新时添加规则，这总是会在这个字段上失败。

我知道我可以添加自定义验证规则，但也许 Cake 有更好的（核心/内置）方法？

事实上，有很多字段我不想更新，例如用户名 - 我如何在 Cake 中处理这个？因为我担心有些人会构建他自己的表单，他会在其中发布例如“用户名”并且它会被更新......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:45:00.763

如果您担心有人通过批量分配或 CSRF 发帖，您可以启用[安全组件](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html)。如果您使用 FormHelper 构建表单，您将受到保护。

# c# - 注销时使用 CreateProcessWithLogonW 创建的退出进程

> ID：11147496
> 
> 赞同：0
> 
> 时间：2012-06-21T22:08:36.703
> 
> 标签：c#, logout

在用户登录时，我在 C# 中使用 CreateProcessWithLogonW 以管理员身份启动进程。

当用户现在注销时，程序并没有关闭。

我希望它在使用 CreateProcessWithLogonW 启动它的用户注销时关闭。我怎么做？

我无法让执行 CreateProcessWithLogonW 的进程保持运行，因此以管理员身份启动的程序必须杀死自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:54:40.410

如果发出 CreateProcessWithLogonW 的应用程序仍在运行，您可以检测 Windows 何时开始注销并关闭子应用程序。例如使用[SystemEvents.SessionEnding 事件](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.sessionending.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:23:10.770

我通过使用[http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.aspx](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.aspx)示例 2中描述的 HiddenForm 解决了这个问题。
这最初用于 Windows 服务，但也适用于 Windows-Forms 应用程序没有图形用户界面。在没有 GUI 的应用程序（还有控制台应用程序、Windows 服务）中没有收到 SessionEnding 事件的原因是它是通过仅分配给每个打开的窗口（基本上）的 Windows 消息泵发送的。

有关 Windows 消息的更多信息，请阅读本文：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms644927%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644927%28v=vs.85%29.aspx)

要使这个示例真正不可见（在 xp 中），您还需要

```
this.ShowInTaskbar = false;
this.WindowState = FormWindowState.Minimized;
this.Visible = false; 
```

在 HiddenForm.InitializeComponent() 中。

# sql - 使用 SQL 查询 XML

> ID：11147497
> 
> 赞同：2
> 
> 时间：2012-06-21T22:08:37.653
> 
> 标签：sql, xml, oracle

我试图在 oracle 表中查询 xml 文件以创建视图。我无法使用多个命名空间来查询数据。例如 planStructures 是 prd: 命名空间的一部分，而 externalProductIdentifiers 中的标识符是 util: 命名空间的一部分。以下是用于查询的sql和xml文件的片段

```
 XMLTABLE (XMLNameSpaces( DEFAULT 'http://www.cigna.com/ifp/domains/product/2012/06'),'/planStructure'
                    PASSING root_planStructures.planStructure
                        COLUMNS
                            plnStrctExtPrdId           XMLTYPE         PATH  'externalProductIdentifiers',
                            plnStrctInfo                       XMLTYPE         PATH  'planStructureInformation',
                            clientInfo                 XMLTYPE         PATH  'clientInformation',
                            financialStruct            XMLTYPE         PATH  'financialStructure'
                            ) root_planStructure,

                            XMLTABLE (XMLNameSpaces( DEFAULT 'http://www.cigna.com/ifp/domains/product/2012/06'),'/externalProductIdentifiers'
                        PASSING root_planStructure.plnStrctExtPrdId
                        COLUMNS
                            ExtPrdIdUtilID              XMLTYPE         PATH    'identifier'
                            ) plnStrctPlnStrctExtPrdId

XMLTABLE (DEFAULT 'http://www.cigna.com/ifp/domains/utility/2012/06'), '/identifier'
                        PASSING plnStrctPlnStrctExtPrdId.ExtPrdIdUtilID
                        COLUMNS
                            idType                  VARCHAR2 (100)      PATH    '@type',
                            idDate                  VARCHAR2 (100)      PATH    '@date',
                            singleValueType         VARCHAR2 (100)          PATH    'singleValueID/@type',
                            singleValueDate         VARCHAR2 (100)          PATH    'singleValueID/@date',
                            singleValueID           VARCHAR2 (100)      PATH    'singleValueID'
                            ) externalProductIdentifiersID 
```

示例 xml 片段：

```
<planStructures>
        <planStructure>
            <externalProductIdentifiers>
                <util:identifier type="HPS">
                    <util:singleValueID type="HPSPlanID">PPO50SC</util:singleValueID>
                </util:identifier>
                <util:identifier type="Colibrium">
                    <util:singleValueID type="ColibriumPlanID">PPO50SC</util:singleValueID>
                </util:identifier>
                <util:identifier type="Salesforce">
                    <util:singleValueID type="SalesforcePlanID">a0kV0000000SnSiIAK</util:singleValueID>
                </util:identifier>
            </externalProductIdentifiers> 
```

# asp.net - 如何在创建实体实例时设置实体的属性

> ID：11147498
> 
> 赞同：0
> 
> 时间：2012-06-21T22:08:39.840
> 
> 标签：asp.net, entity-framework-4

这是我的代码。

```
 modelBuilder.Entity<ProductType>()
           .HasRequired(x => x.Product)
           .WithMany(x => x.ProductTypes)
           .HasForeignKey(x => x.ProductId); 
```

如果 Product 的 IsDiscount 属性为真，我想设置 ProductType 的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:14:35.613

你的意思是这样的吗

```
Product product = new Product 
{
    Name = "test",
    Price = 34.5,
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:05:45.163

我创建代理类并将它们用于处理属性值。

# android - 具有许多图像的自定义 ListView 出现内存不足异常

> ID：11147501
> 
> 赞同：4
> 
> 时间：2012-06-21T22:09:02.257
> 
> 标签：android, listview, out-of-memory, android-image

我正在尝试创建一个看起来像 Instagram 图片提要或 Facebook 的 Android ListView。加载一些图像（只有少数）后，我的 Galaxy Nexus 出现内存不足异常。我对它们进行了缩放，但是图像的数量不是固定的，理论上可以是无限的。在 Facebook 和 Instagram 上，他们加载了大量图像和其他数据，而且效果很好。

你怎么看？我可以使用原生 Android 编码实现这些性能吗？如果我要创建 HTML5 提要（如 Facebook 和 Instagram），我会避免内存问题吗？

我感觉很奇怪，我需要做很多工作来处理来自服务器的图像内存。如果这是唯一的解决方案，那么在原生 ListView 中管理数百张图片的方法是什么？

我将不胜感激任何意见！谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T22:22:43.570

不要一次将它们全部加载到内存中，只将需要显示的图像加载到`Bitmap`对象中；并确保您加载的图像仅是您需要显示的尺寸（不要完全加载 1900x1200 图像以显示 300x200 缩略图）。您的应用程序的堆大小约为 30MB（取决于设备，但这是一个很好的经验法则），一旦加载，a`Bitmap`将占用内存中的**Width*Height*4**字节。

一种方法是在下载图像时将它们缓存到磁盘上，这样它们就不必在内存中，并且在下载图像之前始终检查缓存中的图像。您还可以使用缓存将少量图像加载到内存中，这些图像当时需要在列表中显示。

您还可以使用`BitmapFactory.Options.inSampleSize`选项在加载图像时减小图像的大小，而不是加载整个图像然后创建一个小副本，这会浪费时间和内存。

高温高压

看看： http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)寻求帮助

# ruby-on-rails - 为什么 Gemfile 用于 gem

> ID：11147503
> 
> 赞同：1
> 
> 时间：2012-06-21T22:09:06.090
> 
> 标签：ruby-on-rails, ruby

这是[rspec-expectations](https://github.com/rspec/rspec-expectations/blob/master/Gemfile)的 Gemfile 。

```
source "http://rubygems.org"

gemspec

%w[rspec rspec-core rspec-expectations rspec-mocks].each do |lib|
  library_path = File.expand_path("../../#{lib}", __FILE__)
  if File.exist?(library_path)
    gem lib, :path => library_path
  else
    gem lib, :git => "git://github.com/rspec/#{lib}.git"
  end
end

### deps for rdoc.info
gem 'yard',          '0.8.0', :require => false
gem 'redcarpet',     '2.1.1'
gem 'github-markup', '0.7.2'

platforms :jruby do
  gem "jruby-openssl"
end

eval File.read('Gemfile-custom') if File.exist?('Gemfile-custom') 
```

[这是 .gemspec](https://github.com/rspec/rspec-expectations/blob/master/rspec-expectations.gemspec)

如您所见，.gemspec 仅定义了对`diff-lcs`. [rubygems page](http://rubygems.org/gems/rspec-expectations/versions/2.10.0)进一步验证了这一点。

我的问题是 Gemfile 有什么用。我知道捆绑器使用它。但是为了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T23:04:32.137

Gemfile 用于 rspec 贡献者的开发依赖项。它不随 gem 一起提供，但它获取 gemspec 的 deps，因此我们不必在 Gemfile 中重复 deps。说得通？

# iphone - 在应用内购买需要上传二进制

> ID：11147506
> 
> 赞同：0
> 
> 时间：2012-06-21T22:09:24.873
> 
> 标签：iphone, ios, in-app-purchase

对于 ios 中的应用内购买，是否有任何方法可以在不提交审核申请的情况下测试集成？我阅读的每个教程都要求我上传一个二进制文件供苹果审查。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:15:46.310

是的，有一个沙盒，请参阅[测试商店](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/DevelopingwithStoreKit/DevelopingwithStoreKit.html#//apple_ref/doc/uid/TP40008267-CH103-SW1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-12T18:01:13.493

是的。现在可以创建一个`.storekit`配置文件，它将用于“获取”您的产品。转到`File`-> `New`-> `File`-> `StoreKit Configuration File`。打开它并在左下角点击`+`按钮并添加您在 AppStore Connect 中设置的产品：

[![添加新产品](../Images/9431b26f58ac6fc37fb2a27bca80ee3c.png)](https://i.stack.imgur.com/ieRmA.png)

* * *

然后，在填写信息时，请确保您`Product ID`的信息与 AppStore Connect 中的信息相符：

[![填写数据](../Images/0cdaa447843b3f06079392e4d727ea30.png)](https://i.stack.imgur.com/B9gr3.png)

* * *

最后一件事是让你的方案知道这个配置。点击左上角的架构并转到`Edit scheme...`。在`Options`选项卡下，您将找到此屏幕。在这里你选择你的配置文件：

[![启用配置](../Images/06f7f0c862edb6719d36aa44ba345010.png)](https://i.stack.imgur.com/FaPgc.png)

# colors - 如何计算 CIELAB L*a*b* 模型中定义的 4 种颜色的混合？

> ID：11147507
> 
> 赞同：6
> 
> 时间：2012-06-21T22:09:25.747
> 
> 标签：colors, color-space, weighted-average

我有 4 种颜色从 RGB 转换为 CIELAB **L*a*b***模型。

1.  `(L,a,b)`当我有每种颜色时，如何计算这四种颜色的混合？

2.  `(w1, w2, w3, w4)`如果我想在这 4 种颜色上加上 1 个最大和 0 个最小（无）权重，我该如何计算相同的混合？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T22:14:57.597

假设你有这样的结构：

```
typedef struct LabColor {
    uint8_t L;
    uint8_t a;
    uint8_t b;
} LabColor; 
```

以及其中 4 个的数组：

```
LabColor colors[4];
getMeSomeColors (colors); 
```

和重量：

```
float weights[4];
getMeSomeWeights (weights); 
```

一种可能的混合方法是：

```
float LSum = 0.0;
float aSum = 0.0;
float bSum = 0.0;
float weightSum = 0.0;
for (int i = 0; i < 4; i++)
{
    LSum += ((float)colors [ i ].L * weights [ i ]);
    aSum += ((float)colors [ i ].a * weights [ i ]);
    bSum += ((float)colors [ i ].b * weights [ i ]);
    weightSum += weights[i];
}
LabColor result;
result.L = (uint8_t)(LSum / weightSum);
result.a = (uint8_t)((aSum / weightSum) + 127);
result.b = (uint8_t)((bSum / weightSum) + 127); 
```

这假设权重都在 0 和 1 之间。如果不是，那么你将不得不做一些夹紧。如果权重总和为 1，则可以跳过除法步骤。

有无数种其他方法可以混合颜色。如果这个不符合您的要求，您需要提供更多关于您想要的细节。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T17:48:51.803

最现实的结果将来自将您的`L*a*b*`值转换为线性（未经过伽马校正）`RGB`空间，对这些值求和，然后再转换回来。这就是物理光源相互作用的方式。

颜色空间不是为颜色处理而`L*a*b*`发明的，因为它本质上是非线性的。

# jquery - JQuery simplemodal对话框未在IE中关闭

> ID：11147508
> 
> 赞同：0
> 
> 时间：2012-06-21T22:09:26.027
> 
> 标签：jquery, internet-explorer, simplemodal

我正在使用 SimpleModal 1.4.2。在 FF 和 Safari 中，可以单击角落的“X”关闭对话框，但在 IE 7、8 和 9 中，“X”无效。令人沮丧的是，我在另一个网站上使用了 SimpleModal，它在所有浏览器上都能完美运行，这让我相信我的 css 中有一些东西把它搞砸了。

我尝试在代码中消除不同的 .div 以查看是否可以缩小问题的原因，但无济于事。另一双眼睛和专业知识将不胜感激！这是我的 CSS 代码：

```
* {
margin: 0;
}

html  {
width: 100%;
background-image:url(../images/bg-pixel.jpg);
background-repeat: repeat;
height: 100%;
z-index: -5;
}

body  {
background-image:url(../images/vert-gradient.jpg);
background-repeat: repeat-x;
min-width: 900px;
min-height: 775px;
width: 100%;
height: 100%;
z-index: -4;
position: relative;
}   

#DDLogo  {
padding-top: 104px;
height:530px;
margin-left: 25px;
position: relative;
}

#headWrapper {
height:86px;
width:100%;
margin: 0 auto;
position: absolute;
}

.pageTitle {
padding-top: 48px;
height: 38px;
position: absolute;
float: right;
display: inline;
right: 30px;
width: 400px;
}

.logo {
padding-top: 0px;
width: 252px;
float: left;
height: 86px;
position: absolute;
}

.wrapper {
min-height: 100%;
height: auto !important;
height: 100%;
margin: 0 auto -1.7em;
position: relative;
overflow-y: hidden;
}

.DDrawing {
width:100%;
height: auto !important;
height: 100%;
background-image: url(../images/davinci-drawing.jpg);
background-repeat:repeat-x;
filter: alpha(opacity=5);
-moz-opacity: 0.05;
-khtml-opacity: 0.05;
opacity: 0.05;
z-index: -1;
position:absolute;
overflow:hidden;
}

img  {
border: none;
}

/* Content Pages */

#ContentArea  {
width: 1200px;
height: 405px;
margin-top: 87px;
position: absolute;
}

.nonHeaderPadding {
float: left;
padding-top: 35px;
width: 1000px;
height: 2px;
clear: both;
}

.oneColumn  {
padding-left: 65px;
padding-right: 30px;
float: left;
width: 600px;
}

.SideImage {
margin-left: 775px;
padding-top: 125px;
position: absolute;
z-index: 3;
filter: alpha(opacity=75);
-moz-opacity: 0.75;
-khtml-opacity: 0.75;
opacity: 0.75;
}

/* Text */

p  {
font-family: Arial, Helvetica, sans-serif;
font-size: 0.750em;
line-height: 125%;
color: #333333;
letter-spacing: 1px;
}

a:link {
font-family: Arial, Helvetica, sans-serif;
font-size: 0.750em;
color: #000;
text-decoration:underline;
letter-spacing: 1px;
line-height: 125%;
}
a:visited {
font-family: Arial, Helvetica, sans-serif;
font-size: 0.750em;
color: #333333;
text-decoration: underline;
letter-spacing: 1px;
line-height: 125%;
}
a:hover {
font-family: Arial, Helvetica, sans-serif;
font-size: 0.750em;
color: #000;
text-decoration: underline;
letter-spacing: 1px;
line-height: 125%;
}
a:active {
font-family: Arial, Helvetica, sans-serif;
font-size: 0.750em;
color: #000;
text-decoration: underline;
letter-spacing: 1px;
line-height: 125%;
}

/* Menu */

div#NavContainer ul  {
margin-top: 493px;
margin-left: -50px;
height: 36px;
width: 1000px;
text-align: left;
position:absolute;
}

div#NavContainer ul li  {
display: inline;
list-style-type: none;
}

div#NavContainer ul li a  {
text-decoration: none;
padding: 0;
border: none;
}

div#NavContainer ul li a:hover  {
text-decoration: none;
padding: 0;
border: none;
}

img.nav  {
border: none;
}

/* Footer */

#Footer, .push  {
height: 1.7em;
clear:both;
}

p.Footer  {
font-family: Arial, Helvetica, sans-serif;
font-size: 8.5px;
color: #999999;
padding-left: 10px;
} 
```

我已经修改了 SimpleModal 附带的 basic.css 文件，如下所示：

```
/* Overlay */
#simplemodal-overlay {background-color:#333333; cursor:wait;}

/* Container */
#simplemodal-container {height:35%; width:40%; color:#fff; overflow:auto; background-color:#fff;     border:#333333 thin inset;}
#simplemodal-container .simplemodal-data {padding:50px;}
#simplemodal-container a {color:#000000;}
#simplemodal-container a.modalCloseImg {background:url(../images/x.png) no-repeat; width:18px;  height:18px; display:inline; z-index:3200; position:absolute; top:25px; right:25px; cursor:pointer;}
<!--[if lt IE 7]>
    #simplemodal-container a.modalCloseImg {
        background:none;
        right:-14px;
        width:22px;
        height:26px;
        filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
            src='../images/x.png', sizingMethod='scale'
        );
    }
<!--[endif]-->

#simplemodal-container h2 {color:#333333;} 
```

这是我的html代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="css/davincid2.css" type="text/css" media="all" />
        <link type="text/css" href="css/basic2.css" rel="stylesheet" media="screen" />
        <!-- IE6 "fix" for the close png image -->
        <!--[if lt IE 7]>
        <link type="text/css" href="css/basic_ie.css" rel="stylesheet" media="screen" />
        <![endif]-->
        <script type="text/javascript" src="js/rollover.js"></script>
        <link rel="icon" href="/favicon.ico" type="image/x-icon" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
        <title>DaVinci Digital | Innovative, Complete IT Solutions</title>
    </head>
    <body id="ourclients">
        <div class="wrapper">
            <div id="DDLogo"> 
                <div id="headWrapper"> 
                        <div class="logo">
                        <a href="index.html"><img src="images/Davincid-logo.gif" align="left" alt="DaVinci Digital" /></a>
                    </div>
                    <div class="pageTitle">
                        <img src="images/titles/ourclients.jpg" alt="Your Team" height="38" align="right"/>
                    </div>
                </div>
                <div id="NavContainer" align="left">
                    <ul>
                        <li><a href="who-we-are.html"><img class="nav" src="images/menu/whoweare_up.jpg" alt="Who We Are" /></a></li>
                        <li><a href="what-we-do.html"><img class="nav" src="images/menu/whatwedo_up.jpg" alt="What We do" /></a></li>
                        <li><a href="your-team.html"><img class="nav" src="images/menu/yourteam_up.jpg" alt="Your Team" /></a></li>
                        <li><a href="our-clients.html"><img class="nav" src="images/menu/ourclients_down.jpg" alt="Our Clients" /></a></li>
                        <li><a href="helpdesk.html"><img class="nav" src="images/menu/davincihelpdesk_up.jpg" alt="DaVinci Helpdesk" /></a></li>
                        <li><a href="contact.html"><img class="nav" src="images/menu/contact_up.jpg" alt="Contact" /></a></li>
                    </ul>
                </div>
                <div class="SideImage"><img src="images/ourclients-image.gif" alt="Our Clients"  />
                </div>
                <div id="ContentArea">
                    <div class="nonHeaderPadding">
                        <div class="oneColumn">
                            <a href="#" onclick="$('<div></div>').load('testimonial-greenhammer.html').modal();" class="basic">Green Hammer testimonial</a>
                                <p>&nbsp;</p>
                            <a href="#" onclick="$('<div></div>').load('testimonial-agi.html').modal();" class="basic">Advanced Gastroenterology, PLLC / Advanced Endoscopy Center, PLLC testimonial</a>
                            <p>&nbsp;</p>
                            <a href="#" onclick="$('<div></div>').load('testimonial-camphoward.html').modal();" class="basic">Camp Howard testimonial</a>
                            <p>&nbsp;</p>
                            <a href="#" onclick="$('<div></div>').load('testimonial-strait.html').modal();" class="basic">Strait Orthopedic Specialists, PS testimonial</a>
                            <p>&nbsp;</p>
                        </div>
                    </div>
                </div> 
            </div>
            <div class="DDrawing">
                <img src="images/davinci-drawing.jpg" alt="DaVinci" />
            </div>
        </div>
        <div id="Footer">
            <p class="Footer">©2012 DaVinci Digital  All Rights Reserved.</p>
            <p class="Footer">&nbsp;</p>
        </div>
        <script type='text/javascript' src='js/jquery.js'></script>
        <script type='text/javascript' src='js/jquery.simplemodal.js'></script>
        <script type='text/javascript' src='js/basic3.js'></script>
    </body>
</html> 
```

我真的被困在这里了！任何见解将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:24:38.093

万一其他人有这个问题，我意识到问题是我的 css 中的身体信息中有一个 z-index。如果 IE，这不允许模式框在所有版本中关闭。

# iphone - 是否可以按顺序组合着色器？

> ID：11147515
> 
> 赞同：0
> 
> 时间：2012-06-21T22:09:53.970
> 
> 标签：iphone, glsl

是否可以在 GLSL ES 下按顺序组合多个片段着色器？我想使用两个着色器 S1 和 S2，其中 S2 使用 S1 输出的几个片段。例如，我想按顺序应用两个卷积，在这种情况下，第二个卷积需要在一堆像素位置访问第一个卷积的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:27:58.510

是的，但是这需要使用两种技术之一。第一个最简单的方法称为多通道渲染。在其中，您将 S1 的结果渲染到纹理，然后渲染 S2 从保存 S1 结果的纹理中读取。然而，这有点低效，因为它消除了 GPU 可能实现的一些并行性。所以通常建议你使用一种叫做管道的东西。这有点复杂。

1.  创建 2*N 个纹理，其中 N 是着色器的数量。这样每个着色器都可以具有读取和写入纹理。
2.  一次渲染每个着色器，从它之前的着色器的读取纹理中读取，并写入写入纹理。
3.  在每一帧结束时，交换读取和写入纹理。

这导致同时计算多个迭代。然而，每次迭代在 N 次迭代后完成。

# android - Android ratingbar - 如何预设星级

> ID：11147522
> 
> 赞同：0
> 
> 时间：2012-06-21T22:10:31.737
> 
> 标签：android, mysql, variables

我正在从包含许多条目的 MySQL 表中汇总数字评级（1-5 星）。它将取列中评分的平均值并将其作为变量返回到 Android。

让我们称变量为 $foo。

如何使用 $foo 预设 Android RatingBar，以便它以编程方式根据数据库值更改星数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:15:38.250

使用[`RatingBar.setRating`](http://developer.android.com/reference/android/widget/RatingBar.html#setRating%28float%29).

```
float foo = 3.5;
RatingBar bar = (RatingBar) findViewById(R.id.rating_bar);
bar.setRating(foo); 
```

# java - 如何从 Grails 项目中使用或引用 Java 项目？

> ID：11147530
> 
> 赞同：0
> 
> 时间：2012-06-21T22:11:01.190
> 
> 标签：java, grails, compilation

我有一个正常工作的 grails 项目。最近，我们的团队决定在我们自己的 Java 独立应用程序中已经实现的应用程序中添加一个额外的功能。“所以”，我想，“我只需要在我的工作区中引用独立的 Java 项目”。所以我这样做了——从 Grails 中引用了我的 Java 项目，并从位于 src/groovy 中的 Groovy 类中调用了该服务。当我尝试运行 Web 项目时，出现编译错误：

```
Error Compilation error: startup failed: 
unable to resolve class com.CycleManager 
```

它说错误是 CycleManager 类的导入行。

为什么groovy找不到引用的项目？我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:27:53.223

发生这种情况是因为 grails 看不到暴露服务的 jar/类。您需要在您的 grails 类路径（不在您的工作区中）中包含这些 jar。这可以通过在依赖项部分中提及 grails 应用程序的**BuildConfig.groovy文件中的 jar 来完成。**

```
dependencies {
             // your jar name
    compile ("com.CycleManager")
} 
```

这是在应用程序中包含 jar 的正确方法。

PS：Grails 期望你的 jar 在它的 ivy-cache 中。如果它不在常春藤缓存中，它将从您的快照文件夹中提取。

# iphone - NSDictionary 中的错误

> ID：11147542
> 
> 赞同：1
> 
> 时间：2012-06-21T22:12:29.513
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在使用以下代码行创建一个字典，该字典存储一个 url 和访问它的时间::

```
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys: urlString, [formatter stringFromDate:[NSDate date]], nil]; 
```

但是，我收到以下错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[NSDictionary dictionaryWithObjectsAndKeys:]: second object of each pair must be non-nil.  Or, did you forget to nil-terminate your parameter list?' 
```

有人可以帮我整理一下吗？？我被这个错误困住了。谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:15:01.583

`NSDateFormatter`大概是回来了`nil`。检查返回值，将其存储在局部变量中，然后将该变量添加到字典中。

```
NSString *dateString = [formatter stringFromDate:[NSDate date]];
NSLog(@"dateString: %@", dateString); //will let you know if it's nil or not
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys: urlString, dateString, nil]; 
```

`nil` [您可以在此处](https://stackoverflow.com/questions/4258266/nsdateformatter-datefromstring-returns-nil)查看它可能返回的原因。

# javascript - Javascript展开/折叠div加载为展开而不是折叠

> ID：11147544
> 
> 赞同：2
> 
> 时间：2012-06-21T22:12:38.983
> 
> 标签：javascript, html

希望对 javascript 有更好了解的人可以提供帮助，我想使用以下内容在我们的网站上创建展开/折叠 div，但是这会在展开时自动加载，因为它最初需要在折叠时加载。

这是代码：

```
<script type="text/javascript">
 // toggle specific
 function toggleDiv(id1,id2) {
  var tag = document.getElementById(id1).style;
  var tagicon = document.getElementById(id2);

  if(tag.display == "none") {
   tag.display = "block";
   tagicon.innerHTML = "&nbsp;-&nbsp;";
  } else {
   tag.display = "none";
   tagicon.innerHTML = "&nbsp;+&nbsp;";
  }
 }

 function expandAll(cnt) {
  for(var x=1; x<=cnt; x++) {
    document.getElementById('content'+x).style.display="block";
    document.getElementById('icon'+x).innerHTML="&nbsp;-&nbsp;";  
  }
 }

 function collapseAll(cnt) {
  for(var x=1; x<=cnt; x++) {
    document.getElementById('content'+x).style.display="none";
    document.getElementById('icon'+x).innerHTML="&nbsp;+&nbsp;";  
  }
 }

</script>

<style type="text/css">
 .title {
  padding:5px; 
  border:1px solid #CCCCCC;
  font:15px arial; 
  width:300px; 
  cursor:pointer;
  height:20px;
 }

 .item {
  padding:5px; 
  border:1px solid #CCCCCC; 
  font:12px verdana; 
  width:300px;
 }

 .item div {
  border-bottom:1px dashed #CCCCCC;
  padding:5px;
 }

 .button {
  border:1px solid #CCCCCC; 
  padding:5px;
  cursor:pointer;
 }

</style>

</head>
<body>

 </div>
 <div class="title" onClick="javascript:toggleDiv('content1','icon1');">
  <span style="float:left">Sample Title 1</span>
  <span id="icon1" style="float:right">&nbsp;-&nbsp;</span> 
 </div>
 <div id="content1" class="item">
  <div>Item 1</div>
  <div>Item 2</div>
  <div>Item 3</div>
 </div>
 <div class="title" onClick="javascript:toggleDiv('content2','icon2');">
  <span style="float:left">Sample Title 2</span>
  <span id="icon2" style="float:right">&nbsp;-&nbsp;</span> 
 </div>
 <div id="content2" class="item">
  <div>Item 1</div>
  <div>Item 2</div>
  <div>Item 3</div>
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:18:04.980

有两种方法可以做到这一点。一方面，您可以通过将 - 替换为 + 并使用适当的 css 样式来以折叠状态启动所有 html。或者，如建议的那样，您可以将 collapseAll 绑定到 onload - 我建议您查看[使用 window.onload](https://stackoverflow.com/questions/559150/best-practice-for-using-window-onload)的最佳实践，以了解有关 window.onload 的最佳实践，因为如果您不小心，您可能会遇到令人讨厌的行为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:16:44.790

```
<div class="title" onclick="javascript:toggleDiv('content1','icon1');">
                     ^ should be lowercase
  <span style="float:left">Sample Title 1</span>
  <span id="icon1" style="float:right">&nbsp;+&nbsp;</span> 
                                             ^ should expand
 </div>
 <div id="content1" class="item" style="display:none;">
                                 ^ should be hidden  ^
  <div>Item 1</div>
  <div>Item 2</div>
  <div>Item 3</div>
 </div> 
```

但请注意，非 JS 用户届时将看不到任何内容。

# python - 在 python 中执行 bash 脚本

> ID：11147548
> 
> 赞同：2
> 
> 时间：2012-06-21T22:12:50.127
> 
> 标签：python, bash, popen, expect

我创建了一个期望脚本，在执行时，ssh 会连接到服务器并执行一系列命令。伪代码如下所示：

```
#!/usr/bin/expect
spawn ssh usr@myip
expect "password:"
send "mypassword\n";
send "./mycommand1\r"
send "./mycommand2\r"
interact 
```

当从 bash shell ($ ./myscript.txt) 执行时，代码执行得很好。我现在想做的是在 python 文件中有一行以与 bash shell 相同的方式运行脚本中的命令。伪代码如下所示：

```
import subprocess
def runmyscript():
    subprocess.call("myscript.txt", executable="expect", shell=True)
def main():
    run = runmyscript():
if __name__ == '__main__': main() 
```

我已将 myscript.txt 脚本文件与我的 runmyscript.py 文件放在同一目录中，但是当我运行 python 文件时，我收到错误：

```
WindowsError: [Error 2] The system cannot find the file specified 
```

我已经阅读[了 python.org 网站上的文档](http://docs.python.org/library/subprocess.html)，但无济于事。有没有人有一个巧妙的解决方案来从 .py 代码中执行 bash 脚本？

解决方案：此代码对我有用。

```
child = subprocess.Popen(['bash', '-c', './myscript.txt'], stdout = subprocess.PIPE) 
```

使用此代码将 Expect 文件调用到 ssh 并从 .py 文件向服务器发送命令 - 如果您无法将 pycrypto/paramiko 构建到您的机器上，这是有用的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:46:04.603

这是您的期望脚本的python实现：

```
import paramiko

user = "user"
pass = "pass"
host = "host"

client = paramiko.SSHClient()
client.load_system_host_keys()
client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
client.connect(host, port=22, username=user, password=pass)
client.exec_command("./mycommand1")
client.exec_command("./mycommand2")
client.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T16:15:08.913

您可以使用 pexpect ( [http://www.noah.org/wiki/pexpect](http://www.noah.org/wiki/pexpect) )

这是一个示例函数，它可以处理通过 ssh 远程执行命令时可能遇到的很多情况。

```
import pexpect 

## Cleanly handle a variety of scenarios that can occur when ssh or scp-ing to an ip:port
# amongst them are:
# 
# (1) key has not been setup
# (2) key has changed since last time
# (3) command was executed (check exit status and output) 
#
# @param cmdLine  The "scp" or "ssh" command-line
# @param mtimeout The millisecond timeout to wait for the child process to return
# @param log      The log to record events to if necessary
def cleanlyHandleSecureCmd(cmdLine, mtimeout = None, log = None):
  status = -1
  output = None

  if mtimeout == None:
    mtimeout = 60 * 1000

  if cmdLine != None and ('scp' in cmdLine or 'ssh' in cmdLine):
    # Scenarios for ssh include: (1) key not setup (2) key changed (3) remote cmd was executed (check exit status)
    scenarios = ['Are you sure you want to continue connecting', '@@@@@@@@@@@@', EOF]
    child     = spawn(cmdLine, timeout = mtimeout)
    scenario  = child.expect(scenarios)

    if scenario == 0:
      # (1) key not setup ==> say 'yes' and allow child process to continue
      child.sendline('yes')

      scenario = child.expect(scenarios)

    if scenario == 1:
      if log != None:
        # (2) key changed ==> warn the user in the log that this was encountered
        log.write('WARNING (' + cmdLine  + '): ssh command encountered man-in-the-middle scenario! Please investigate.')

      lines    = child.readlines()
      scenario = child.expect([EOF])

      child.close()
    else:
      # (3) remote cmd was executed ==> check the exit status and log any errors
      child.close()

      status = child.exitstatus
      output = child.before
      output = sub('\r\n', '\n', output)  # Do not be pedantic about end-of-line chars 
      output = sub('\n$',  '',   output)  # Ignore any trailing newline that is present

      if status == None:
        status = child.status

      if status != 0 and log != None:
        log.error('Error executing command \'' + str(cmdLine) + '\' gave status of ' + str(status) + ' and output: ' + str(output))
  else:
    if log != None:
      log.error('Command-line must contain either ssh or scp: ' + str(cmdLine))

  return (status, output) 
```

# php - 有人成功使用 PHP 5.4.4 和 APC 3.1.10 服务高流量吗？

> ID：11147549
> 
> 赞同：29
> 
> 时间：2012-06-21T22:12:57.183
> 
> 标签：php, apache, porting, apc

[升级到 PHP 5.4.0 后调用 undefined 方法](https://stackoverflow.com/a/10344762)提到了 2012 年 3 月的一些 APC 错误报告。

我的具体问题是：*PHP 5.4.4（或类似版本）与 APC 3.1.10（4 月发布，但列为“测试版”而不是“稳定版”）结合起来是否稳定？*

我们在 Apache 机器上看到 5 000 - 9 000 APC 文件缓存命中/秒，作为流量水平的模糊指标。这适用于 PHP 5.3.8 和 APC 3.1.9（使用 mod_php）——有没有人在 5.4.4 和 3.1.10 上有过类似流量的经验？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T22:57:15.317

不。已经在一个高流量的网站上尝试过。由于字符串损坏，大约 75% 或更多的时间在 3.1.10 上出现严重的段错误。主干版本（截至 2012 年 6 月 27 日）稍微好一些，但对我们来说仍然太不稳定，无法进行生产。

见：[https ://bugs.php.net/bug.php?id=62442](https://bugs.php.net/bug.php?id=62442)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:36:56.950

第一：给 APC 大量内存。

检查我的答案以了解如何配置 APC[在 PHP 中导致“无法为池分配内存”的原因是什么？](https://stackoverflow.com/questions/3723316/warning-require-once-function-require-once-unable-to-allocate-memory-for-p)

正如您所说，5000 到 9000 hits/s 不是很可靠的信息，这取决于正在运行的内容。Magento 使用 10k 文件并为一页视图生成大量点击。

最佳优化在架构级别。考虑为您的网站使用反向代理和应用程序缓存。

# scala - 随着时间的推移，Scala 项目和任意统计数据的持续集成

> ID：11147550
> 
> 赞同：3
> 
> 时间：2012-06-21T22:13:12.410
> 
> 标签：scala, graph, statistics, continuous-integration, sbt

我正在为各种[**Scala**](http://en.wikipedia.org/wiki/Scala_%28programming_language%29)项目寻找[**持续集成**](http://en.wikipedia.org/wiki/Continuous_integration)工具。到目前为止，我找到了[Jenkins ，它显然通过](http://jenkins-ci.org/)[Sbt](http://en.wikipedia.org/wiki/Simple_Build_Tool)的插件支持 Scala 项目，以及[Pulse](http://zutubi.com/products/pulse/)，它不直接支持 Scala 项目，但声称它可以轻松集成任何与 Sbt 匹配的命令行构建工具。我对 CI 没有任何实际经验，但阅读了几篇关于它的文章，通常与 Java 相关。[](http://en.wikipedia.org/wiki/Scala_%28programming_language%29)

 **除了通常的功能，例如支持各种**代码版本控制系统**和**发布夜间构建**我希望能够**记录一堆统计数据，随着时间的推移绘制它们并**在某些数字意外变化时触发通知，即超过定义因素。本质上，测试套件中的每个测试都会在最后打印一些统计信息，这些统计信息可以通过正则表达式提取然后持久化（与它们来自的测试用例相关联）。

理想情况下，还有一种简单的方法可以对记录的统计信息创建查询，例如，将测试套件的最后一次运行与之前的进行比较。然而，这可能不是可以直接在 CI 工具中完成的事情，但至少应该可以以可查询的格式（例如 XML 或 JSON）导出记录的数据。

欢迎任何提示，链接或经验报告！

**编辑1：**

在某种意义上，这些统计信息不是 JVM 统计信息，例如代码覆盖率或内存消耗。它们与项目执行的实际工作有关，例如，排序算法执行的比较次数，或 SAT 求解器中冲突分配的次数。这些数字在每次运行结束时打印到 stdio，或写入文件。CI 工具应该“只”允许我将它们呈现为随时间变化的图表，或者执行简单的分析（总和、经络），或者当数字偏离平均值时发送邮件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T20:16:50.897

你可以编写一个 Jenkins 插件来收集这个标准输出并完成你所要求的一切。作为获取标准输出的替代方法，将该输出重定向到文件，并让插件读取该文件。

无论如何，有很多插件在做这种事情。只需查看 Jenkins 教程，也许可以获取一个执行类似操作的插件作为示例。

最后一点，我知道[Travis CI](http://travis-ci.org/)也支持 Scala，虽然我没有这方面的经验，所以我不知道他们是否支持你的要求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T01:01:19.357

我们（Atlassian——我工作的公司）销售[Bamboo](http://www.atlassian.com/software/bamboo/overview)，它确实支持 SBT 以及 Maven 构建（使用 maven-scala 插件）。我们确实在内部将这些用于我们的 Scala 项目，而且设置起来并不难。它具有您正在寻找的大部分历史特征。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:18:19.793

对于 CI 系统中的 Scala 支持，检查构建工具的支持更为相关。

其中 maven、gradle、ant 和 sbt 可以处理 Scala，我希望每个 CI 系统至少支持前 3 个。Jenkins 肯定支持。

为了收集统计数据，寻找适用于 java 字节码的工具，它们应该也能够处理 Scala 编译器生成的字节码。

[Sonar](http://www.sonarsource.org/)收集大量统计数据并通过网站提供。看看哪些统计数据对 java 有意义是值得的。

对于突然变化的触发事件，您可以查询 Sonar 的数据库。

关于更新问题的更新：

Teamcity 支持渲染自定义图表：

[http://confluence.jetbrains.net/display/TCD65/Custom+Chart](http://confluence.jetbrains.net/display/TCD65/Custom+Chart)

[http://confluence.jetbrains.net/display/TCD65/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-ReportingBuildStatistics](http://confluence.jetbrains.net/display/TCD65/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-ReportingBuildStatistics)

[http://confluence.jetbrains.net/display/TCD65/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-provideStatsUsingFile](http://confluence.jetbrains.net/display/TCD65/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-provideStatsUsingFile)

几年前使用成功。

詹金斯有一个插件，但我个人没有让它工作，当我尝试了很短的时间。

[https://wiki.jenkins-ci.org/display/JENKINS/Measurement+Plots+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Measurement+Plots+Plugin)**

# jquery - IE9 仅在按 F12 时正确调用 ajax

> ID：11147553
> 
> 赞同：17
> 
> 时间：2012-06-21T22:13:22.107
> 
> 标签：jquery, ajax, internet-explorer-9, jquery-events

我的 JSP 页面 (jQuery 1.7.2) 中有这个 jQuery 代码：

```
 function Header() {
      this.add = function ( parentDiv, leftToolbar, rightToolbar ) {
         hbHeader = Handlebars.compile( $( "#hb-header" ).html() );

         $( parentDiv ).html( hbHeader( {user:{tenantDescription:"", firstName:"", lastName:""},
            leftTB:null, rightTB:null } ) );

         $.ajax( {
            url:"${pageContext.request.contextPath}/services/login/sessionUser",
            type:"POST",
            async:true,
            success:function ( result ) {
               app.user = result;
               var ltHtml;
               var rtHtml;
               if ( leftToolbar ) {
                  ltHtml = new Handlebars.SafeString( leftToolbar );
               }
               if ( rightToolbar ) {
                  rtHtml = new Handlebars.SafeString( rightToolbar );
               }
               $( parentDiv ).html( hbHeader( {user:app.user,
                  leftTB:{
                     html:ltHtml,
                     hidden:leftToolbar == null
                  },
                  rightTB:{
                     html:rtHtml,
                     hidden:rightToolbar == null
                  }
               } ) )
            },
            error:function( jqXHR, textStatus, errorThrown ) {
               alert("error in ajax");
            }
         } );
      }
   } 
```

在执行此代码之前，将注册一个`ajaxSend`和一个`ajaxError`侦听器。像这样：

```
 $( "#log-window" ).ajaxSend( function ( event, jqXhr, ajaxOptions ) {
     console.log( "handling an ajax request adding username and password to the header" );
     jqXhr.setRequestHeader( 'username', $.cookie( 'username' ) );
     jqXhr.setRequestHeader( 'password', $.cookie( 'password' ) );
  } );
  $( "#log-window" ).ajaxError( function ( errorThrown, xhr, failedReq, textStatus ) {
     alert("error in "+failedReq.url);
     if ( textStatus == 'timeout' ) {
        if ( !failedReq.tryCount ) {
           failedReq.tryCount = 1;
           failedReq.retryLimit = 3;
        }
        if ( failedReq.tryCount++ <= failedReq.retryLimit ) {
           //try again
           $.ajax( failedReq );
           return;
        }
        throw 'Es wurde ' + failedReq.retryLimit + ' Mal versucht. Die Verbindung scheint nicht zu funktionieren.';
        return;
     }
     if ( xhr.status == 500 ) {
        if ( $.cookie( 'pageRefreshed' ) == null ) {
           $.cookie( 'pageRefreshed', 'true', { expires:10000 } );
           location.reload();
        }
        throw 'Der Server hatte ein Problem. Bitte melden Sie den Fehler and den Systemadministrator';
     } else if ( xhr.status == 401 ) {
        if ( failedReq.url != "${pageContext.request.contextPath}/services/login" ) {
           var loginData = {
              username:$.cookie( 'username' ),
              password:$.cookie( 'password' )
           };
           loginAttempt( failedReq, loginData );
        }
     } else {
        throw 'Oops! There was a problem, sorry.';
     }
  } ); 
```

整个页面可以在[http://alpha.sertal.ch:8181/VisionWeb/data-details/#data:12300923下访问](http://alpha.sertal.ch:8181/VisionWeb/data-details/#data:12300923)

如果您愿意，您甚至可以登录。用户：*alsoft03*密码：*password*

第一次进行ajax调用时会发生什么，因为用户未登录而出现401错误；这就是 IE 失败的地方。`ajaxSend`侦听器被调用，但不是`ajaxError`。如果我在自身上设置了一个错误回调，`$.ajax`它也不会被调用。

当我使用真正的浏览器（Firefox、Chrome、Opera）打开页面时，它工作正常并要求输入密码。除非您按 IE，否则 IE 不会`F12`，在这种情况下，该站点也可以按预期工作。

这真的很奇怪。您在控制台打开的情况下加载页面并且它可以工作。控制台关闭后，它只显示一个空标题。页面加载后，您可以关闭控制台，它将继续加载。

我在各种机器上对此进行了测试并得到了相同的结果。

它让我疯狂。我无法调试，因为如果我用 F12 打开调试器，它工作正常。

我知道没有进行 ajax 回调，因为我`alert("I got so far")`在不同的位置放置了行。

如果有人有线索，非常欢迎。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-21T22:17:05.423

`console.log()`需要从脚本中删除所有实例，以便它在 IE9 中工作，而无需处于开发人员模式。

**更新**我很高兴这个答案帮助了一些人。只是想我会用我从[HTML5 Boilerplate](http://html5boilerplate.com/)使用的简单解决方案来更新这个答案：

```
// Avoid `console` errors in browsers that lack a console.
(function() {
    var method;
    var noop = function () {};
    var methods = [
        'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',
        'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',
        'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',
        'timeStamp', 'trace', 'warn'
    ];
    var length = methods.length;
    var console = (window.console = window.console || {});

    while (length--) {
        method = methods[length];

        // Only stub undefined methods.
        if (!console[method]) {
            console[method] = noop;
        }
    }
}()); 
```

将它放在您的代码之前，它应该可以帮助您避免在缺少控制台的浏览器中出现任何控制台错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T22:18:12.627

console.log 在 IE 的开发人员模式之外未定义。我喜欢只做一个变量

```
var console = {log: function(){}}; 
```

当我不调试时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-30T16:40:01.110

我遇到了这个问题，我在脚本中注释掉了所有控制台引用，但它仍然只在 IE 中失败（11）。我发现解决方案是将缓存 false 添加到我的 AJAX 调用中。

```
$.ajax({
        **cache: false,**
        type : 'GET',}) 
```

我所有的输入都有属性 autocomplete="off"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-17T10:40:19.907

真的它节省了我的时间，在 IE 11 中，我们应该将 cache:false 用于获取 ajax 来解决这个问题

# javascript - 使用 Javascript 从 Atom 提要中提取图像源

> ID：11147557
> 
> 赞同：0
> 
> 时间：2012-06-21T22:13:50.903
> 
> 标签：javascript, google-api, blogger

我正在为 Blogger 网站开发一个小工具。我想使用 Javascript 从网站提要（Atom）中带有特定标签的前四个帖子中获取标题、链接和第一张图片。到目前为止，我有来自这些帖子的标题和链接，并在小工具中显示为 HTML。这是代码：

```
<?xml version="1.0" encoding="UTF-8" ?>
<Module>
<ModulePrefs title="Retrieve Featured Blog Posts" height="150" author="John Behan" />
<Content type="html">
    <![CDATA[
        <script type="text/javascript" src="http://www.google.com/jsapi"></script>
        <script type="text/javascript">
            google.load("feeds", "1");              
        </script>
        <script type="text/javascript">
            function initialize() {

                var feed = new google.feeds.Feed("http://test-ohomind.blogspot.com/feeds/posts/default/-/featured");
                feed.load(function(result) {
                    if (!result.error) {
                        var container = document.getElementById("feed");
                        for (var i = 0; i < result.feed.entries.length; i++) {
                            var entry = result.feed.entries[i];

                            var myElement = document.createElement('div');
                            var content = entry.content;
                            myElement.innerHtml = content;

                            var imagesrc = myElement.getElementsByTagName("img")[0].src;

                            var mydiv = document.getElementById("mydiv");
                            var newcontent = document.createElement('p');

                            newcontent.innerHTML = '<a href="' + entry.link + '">' + entry.title + '</a><br />' + imagesrc;

                            while (newcontent.firstChild) {
                                mydiv.appendChild(newcontent.firstChild);
                            }
                        }
                    }

                });
            }
            window.onload = initialize();
        </script>
            <body>

                <div id="mydiv">

                </div>
            </body>
    ]]>
</Content>
</Module> 
```

上面的代码给出了一个空白的小工具和 Firebug 报告

> myElement.getElementsByTagName("img")[0] 未定义

我试着改变一下：

```
var imagesrc = myElement.getElementsByTagName("img"); 
```

在小工具中给出这个

> [对象节点列表]

有人可以告诉我我做错了什么吗？我只需要获取第一张图片的来源（src）。我可以做的其他小工具，但这个小问题让我在这个阶段完全沮丧。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:24:10.670

我在您的代码中注意到的一个潜在问题是您的 window.onload 实际上正在运行 initialize() 脚本函数，而不是设置`window.onload = initialize`或`window.onload = function(){initialize()};`我相信您打算这样做。

鉴于您的代码在 onload 之前运行，它可以解释为什么 getElementsByTagName 没有拉任何东西

编辑：我还建议查看[使用 window.onload](https://stackoverflow.com/questions/559150/best-practice-for-using-window-onload)的最佳实践以获得最佳实践

# python - Python IOError: Not a gzipped file (Gzip and Blowfish Encrypt/Compress)

> ID：11147559
> 
> 赞同：3
> 
> 时间：2012-06-21T22:13:55.167
> 
> 标签：python, encryption, gzip, blowfish, smb

我在使用 python 的内置库时遇到了一些问题`gzip`。浏览了几乎所有其他有关它的堆栈问题，但似乎没有一个有效。

我的问题是，当我尝试减压时，我得到了`IOError`

我越来越：

```
Traceback (most recent call last):
File "mymodule.py", line 61, in
  return gz.read()
File "/usr/lib/python2.7/gzip.py", line 245,
  readself._read(readsize)
File "/usr/lib/python2.7/gzip.py", line 287, in
  _readself._read_gzip_header()
File "/usr/lib/python2.7/gzip.py", line 181, in
  _read_gzip_header
raise IOError, 'Not a gzipped file'IOError: Not a gzipped file 
```

这是我通过网络发送它的代码，我为什么这样做可能没有意义，但它通常处于一个while循环和内存效率高，我只是简化了它。

```
buffer = cStringIO.StringIO(output) #output is from a subprocess call
small_buffer = cStringIO.StringIO()
small_string = buffer.read() #need a string to write to buffer 
gzip_obj = gzip.GzipFile(fileobj=small_buffer,compresslevel=6, mode='wb')
gzip_obj.write(small_string)
compressed_str = small_buffer.getvalue()

blowfish = Blowfish.new('abcd', Blowfish.MODE_ECB)
remainder = '|'*(8 - (len(compressed_str) % 8))
compressed_str += remainder
encrypted = blowfish.encrypt(compressed_str)
#i send it over smb, then retrieve it later 
```

然后这是检索它的代码：

```
#buffer is a cStringIO object filled with data from  retrieval
decrypter = Blowfish.new('abcd', Blowfish.MODE_ECB)
value = buffer.getvalue()
decrypted = decrypter.decrypt(value)
buff = cStringIO.StringIO(decrypted)
buff.seek(0)
gz = gzip.GzipFile(fileobj=buff)
return gz.read() 
```

## 这就是问题所在

`return gz.read()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:47:59.937

***编辑：***我认为...您在解压缩之前忘记删除填充物。下面的代码对我有用，如果我不删除填充，也会给我同样的错误。

***编辑2：***填充规范：我认为您进行填充的方式需要您传递填充的大小，因为我假设加密算法也可以使用管道字符。根据[RFC 3852，第 6.3 节](https://www.rfc-editor.org/rfc/rfc3852#section-6.3)，您应该使用所需填充字节数的二进制表示（不是 ASCII 数字）进行填充。我已经更新了下面的代码来解释规范。

```
import gzip
import cStringIO
from Crypto.Cipher import Blowfish

#gzip and encrypt
small_buffer = cStringIO.StringIO()
small_string = "test data"
with gzip.GzipFile(fileobj=small_buffer,compresslevel=6, mode='wb') as gzip_obj:
    gzip_obj.write(small_string)
compressed_str = small_buffer.getvalue()
blowfish = Blowfish.new('better than bad')
#remainder = '|'*(8 - (len(compressed_str) % 8))
pad_bytes = 8 - (len(compressed_str) % 8)
padding = chr(pad_bytes)*pad_bytes
compressed_str += padding
encrypted = blowfish.encrypt(compressed_str)
print("encrypted: {}".format(encrypted))

#decrypt and ungzip (pretending to be in a separate space here)
value = encrypted
blowfish = Blowfish.new('better than bad')
decrypted = blowfish.decrypt(value)
buff = cStringIO.StringIO(decrypted)
buff.seek(-1,2) #move to the last byte
pad_bytes = ord(buff.read(1)) #get the size of the padding from the last byte
buff.truncate(len(buff.getvalue()) - pad_bytes) #probably a better way to do this.
buff.seek(0)
with gzip.GzipFile(fileobj=buff) as gz:
    back_home = gz.read()
print("back home: {}".format(back_home)) 
```

# c# - MonoDroid 活动独立任务队列？

> ID：11147563
> 
> 赞同：0
> 
> 时间：2012-06-21T22:14:07.723
> 
> 标签：c#, .net, mono, xamarin.android

我有一个执行许多网络请求的 Monodroid 应用程序。我正在从活动中提出请求。因此，我需要一个队列来处理我的活动之外的请求。这是为了避免同时发出多个请求。

因为我正在使用 ThreadPool.QueueUserWorkItem 在另一个线程上发出请求，所以看起来如果用户打开一个活动，启动一个请求然后返回打开另一个活动并在第一个请求完成使用 webrequests 之前启动另一个请求锁定并且是不再起作用。

最好的方法是将请求任务与活动之外的回调一起排队，或者有人知道/有类似的例子吗？我认为它需要处理如上所述的情况，即在任务完成之前可以关闭/销毁活动。这可能意味着可以取消该任务，或者该任务可以运行但不能更新 UI，因为它不再存在。

在我的情况下，我发出的请求在不同的函数中做不同的事情，因此更新 UI 的回调并不总是相同的函数。我用来发出请求的函数也有不同的参数。我不确定这些点是否会使创建该问题的解决方案变得更难/更容易，但我认为我需要重新编写很多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:47:42.160

a) 使用异步方法发出请求，这样您就不会挂起线程池线程。

b) 增加您请求的域的连接限制。

```
ServicePointManager.FindServicePoint(uri).ConnectionLimit=10000; 
```

# c++ - 为什么 Big O 计算中不考虑比较因素？

> ID：11147569
> 
> 赞同：1
> 
> 时间：2012-06-21T22:14:16.147
> 
> 标签：c++, algorithm

当你有代码时：

```
for(int i = 0; i<N; i++)
{
   array[i] += N
} 
```

不是每次循环迭代时都比较变量 i 和 N 吗？就此而言，不是每次循环迭代时都会向 i 添加 1 吗？

那么，这不是每次循环迭代 3 次操作吗？

为什么我们通常忽略这些操作并说这段代码是 O(n) ？这与这些操作如何使用 CPU 有关吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T22:40:38.830

Big-O 表示法不处理操作的实际成本，而是该成本如何随着问题的大小而增长。在这个程度上，`O(n)`并不意味着成本是`n`，而是成本随着问题的大小*线性增长。*无论 100 个元素的成本是多少，200 的成本将翻倍，1000 的成本将翻倍。同样的方式`O(n^2)`意味着成本呈*二次方*增长，因此如果问题的规模翻倍，则运算成本翻倍，如果规模增加 10 倍，成本增长百倍。

常量在这里并不重要，它们通常被排除在外。此外，在许多分析中，成本甚至不是以实际时间或内存成本表示，而是其他操作的成本。例如，无论键类型如何，`std::map::find`都说该函数具有。`O( log N )`原因完全相同：`O( log N )`意味着无论在包含`N`元素的地图中查找的成本是多少，它都会以对数方式增长。

举一个励志的例子，考虑一个相当荒谬的问题：从整本书的内容中找到一本书的作者，以及两个实现。在第一个实现中，您使用 a`std::map<std::string, std::string>`其中第一个`std::string`是书的内容，第二个是作者的姓名。第二个实现将书的内容散列成一个整数并将其存储到一个 unordered`std::vector< std::pair<int, std::string> >`中，`int`即散列和`std::string`作者姓名（假设没有散列冲突）。在地图中找到书的`O( log N )`作者的成本是 ，在向量中找到作者的成本是`O( N )`，哪个更差。但是，这些成本隐藏了比较的复杂性，在地图中比较整本书内容的成本可能是*巨大的*与比较哈希的成本相比，一本书的内容的单个比较可能比向量案例中所需的所有比较更昂贵。

Big-O 表示法只处理成本如何随着问题的大小而增长，并隐藏每个操作的实际成本。在分析算法的复杂性时，会*忽略*单个成本，但您仍应注意它们，因为 Big-O 表示法并不能说明全部情况，运行算法的实际成本将在那些恒定成本中产生你在分析中忽略了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T22:18:16.697

Big-O 表示法可以删除所有常数因子。调用一次迭代的比较、加法和所有其他开销`c`。总运行时间为`cn`，`O(cn) = O(n)`当丢弃常数因子时。

这个数学技巧用于比较将在大型数据集上工作的函数。时间复杂度为 的算法`O(n^2)`很可能比`O(n)`处理小型数据集的算法更快（如果后者的常数因子很大），但无论算法如何，小型数据集通常都能快速处理。有趣的是当数据集增长时会发生什么——搜索十亿条记录需要十秒钟还是需要几年时间？这在很大程度上受时间复杂度的影响。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-22T01:00:55.953

Big-O[*] 的定义：

对于两个函数`f`, 和`g`,`f(n)`是`O(g(n))`当且仅当存在 numbers`M`时，`c`这样：

```
for all n > M, |f(n)| <= c * |g(n)| 
```

（其中`|x|`是 的绝对值`x`）。

因此，从这个定义很容易看出，函数`3*n`是`O(n)`：随便取一个你喜欢的`c = 3`任何积极的东西。`M`

关于“增长率”的解释几乎是胡扯（或者实际上，它们是上述定义的动机），但它们可能有助于形成 Big-O 工作原理的直观概念。

为什么允许一个常数因子？为什么不定义那`f`是`O(g)`only if `|f(x)| < |g(x)|`for `n > M`？有几个原因 - 首先是因为“增长率”华夫饼/动机：我们真正用大 O 表示法说的是当你加倍`n`、三倍等时会发生什么。其次是因为“操作”的概念不是很明确。将 1 加到整数上所花费的时间与比较或跳转所用的时间不同。它甚至不一定需要相同数量的 CPU 指令。那你要测量什么？秒？CPU周期？在什么 CPU 上，以什么速度运行，以什么总线带宽？如果算法 A 在 x86 上稍微快一点怎么办？而算法 B 在 ARM 上稍微快一点？那么他们中的任何一个的时间会是Big-O（另一个的时间）吗？

对于抽象分析，我们需要比较不植根于任何特定硬件的算法的方法，Big-O 就是其中之一。

因此，算法的大 O 复杂度与每个循环执行三个恒定时间操作还是一百万次无关。他们还是贡献`O(n)`时间，随便挑个够大的`c`。

如果您`log(n)`按循环执行操作（循环`n`时间），那么您将不再是`O(n)`，因为对于 any `c`，最终`log(n) > c`对于足够大的`n`。因此不存在任何`M`和`c`满足条件。`n * log n`不是`O(n)`。

[*] 因为它适用于算法的复杂性——当接近无穷大以外的极限时也会使用 Big-O，但我们并不关心这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T22:18:24.763

我们说它与 n 成正比，因为 n 接近无穷大。因此，我不知道它们在您的处理器上花费多长时间的 n*（4 次操作）与 n 成正比。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T22:27:26.780

常数因子等于 2 还是 2^10 并不重要。最重要的是“与不断增长的 n 相比，执行时间将如何增长”。由于代码将由编译器优化这一事实，常量因子也被删除。您不能确定优化后`c`仍然等于 3。

我建议您熟悉 www.coursera.org`Algorithms: Design and Analysis, Part I`在线课程。有几个（简短的）关于删除常数因子和大 O 符号的讲座。

# android - 即使使用处理程序，也无法从另一个线程访问视图

> ID：11147571
> 
> 赞同：1
> 
> 时间：2012-06-21T22:14:23.673
> 
> 标签：android, multithreading, view, handler

我正在编写一个简单的应用程序，用于在本地网络上的服务器和应用程序之间进行通信。编写和接收消息没有问题。但我无法在 Textview 中显示收到的消息。

为了接收传入的消息，我使用了一个（工作者）线程。当我收到一些东西时，我将消息发送到主线程中的处理程序，然后该处理程序应该在 Textview 中显示消息。
但是每次处理程序尝试显示消息时，我都会收到异常：
“只有创建视图层次结构的原始线程才能触摸它的视图。”

我搜索了许多网站，包括这个网站，以找到解决方案，但仍然无法解决问题。请帮帮我。

代码：

```
 public class TCPClientActivity extends Activity {
    BufferedWriter output;
    Socket s = new Socket();

    //my handler
    private Handler mHandler;
    //where I want to display the message
    private TextView lblChat;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.tcpclient);

        Button btnConnect = (Button)findViewById(R.id.btnConnect);
        Button btnSend = (Button) findViewById(R.id.btnSend);
        //creating the TextView
        lblChat = (TextView) findViewById(R.id.lblChat);
        final EditText tbIP = (EditText) findViewById(R.id.tbIP);
        final EditText tbInput = (EditText) findViewById(R.id.tbInput);

        //creating the handler
        mHandler = new Handler()
        {
            @Override
            public void handleMessage(Message msg)
            {
                switch(msg.what)
                {
                    case 1:
                    {
                        lblChat.append("Received: " + msg.obj + "\r\n" );
                    }
                }
            }
        };
}

//Thread in which I receive incoming Messages from the server
    Thread communication = new Thread()
    {
        @Override
        public void run() 
        {
            String finalText = "";

            while(true) 
            {
                try
                {
                    DataInputStream inputStream = new DataInputStream(s.getInputStream());

                    int bytesRead;
                    byte[] b = new byte[4096];

                    bytesRead = inputStream.read(b,0,b.length);

                finalText = EncodingUtils.getAsciiString(b);

                //sending the message to the handler
                    Message msg = new Message();
                    msg.what = 1;
                    msg.obj = finalText;

                    mHandler.handleMessage(msg);
            }

                //android.view.ViewRoot$CalledFromWrongThreadException: 
                //Only the original thread that created a view hierarchy can touch its views.
                //That's the exception I get when running the program
            catch (Exception e) 
            {
                e.printStackTrace();
            }
        }
        }
    };

//method where I connect to the server
    private void connectToServer(String ip)
    {
        try
        {
            if(!ip.equals(""))
            {
                s = new Socket(ip, 3000);
            }

            else
            {
                s = new Socket("10.0.0.143", 3000);
            }

            output = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
            output.write("Android Connected");
            output.flush();

    //      new CommuTask().execute();

            //starting the thread
            communication.start();
    //      s.close();
        }

        catch(UnknownHostException e)
        {
            e.printStackTrace();
            try {
                s.close();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
        }

        catch(IOException e)
        {
            e.printStackTrace();
            try {
                s.close();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:20:31.810

您直接在处理程序上调用该方法（因此在您的工作线程上）而不是推送消息

代替：

```
 mHandler.handleMessage(msg); 
```

你会想要：

```
 mHandler.sendMessage(msg); 
```

参考： http: [//developer.android.com/reference/android/os/Handler.html#sendMessage(android.os.Message)](http://developer.android.com/reference/android/os/Handler.html#sendMessage%28android.os.Message%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:20:41.033

而不是这个：

```
mHandler.handleMessage(msg); 
```

用这个：

```
mHandler.sendMessage(msg); 
```

# hibernate - 如何使用 Hibernate 从表中删除依赖记录

> ID：11147576
> 
> 赞同：0
> 
> 时间：2012-06-21T22:14:41.667
> 
> 标签：hibernate

我正在做一个我继承的项目，但遇到了一些麻烦。在我的数据库中，我有一个传感器表。传感器可以分配任务，我有一个任务表。我可以添加和删除传感器，除非传感器被分配了任务。传感器完成任务后，我会收到 ConstraintViolationException。任务实体保留对传感器对象的引用，我确定问题出在某处。我只想能够使用我的传感器 DAO 对象来删除传感器并让它自动删除所有关联的任务。我正在摸索这个，我猜我需要在我的传感器类中添加某种级联注释，但我不确定。这是我所拥有的：

```
 @Entity
@Table(name = "sensors")
@Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL)
public class Sensor {
    @Id
    @Column(name = "sensor_id")
    private String sensorId;
    @Column(name = "obs_area_wkt", length = 2048)
    private String observableAreaWKT;
    @Column(name = "tasking_provider")
    private String taskingProvider;
    @Column(name = "delivery_uri")
    private String deliveryUri;
    @OneToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "data_service_id")
    private DataService dataService;
    @OneToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "sensor_description")
    private SensorDescription sensorDescription;
    @Column(name = "observable_property")
    private String observableProperty; 
```

这是任务对象：

```
@Entity
@Table(name = "tasks")
@Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL)
public class Task {    
@Id
    @Column(name = "task_id", length=276)
    private String id;

    @ManyToOne(cascade = CascadeType.ALL)
    @Cascade(org.hibernate.annotations.CascadeType.ALL)
    @JoinColumn(name ="sensor")
    private Sensor sensor;

    @Type(type = "org.joda.time.contrib.hibernate.PersistentDateTime")
    @Column(name = "recieved")
    private DateTime received;

    @Type(type = "org.joda.time.contrib.hibernate.PersistentDateTime")
    @Column(name = "executed")
    private DateTime executed;

    @Column(name = "command_text")
    @Lob
    private String commandText;

    @Column(name = "task_parameters")
    @Lob
    private String taskParameters;

    @Column(name = "status")
    private String status;

    @Column(name = "request_status")
    private String requestStatus;

    @Column(name = "user_id")
    private String userId;

    @Column(name = "group_id")
    private String groupId; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:21:56.320

在删除传感器时，使关联双向并添加级联以删除传感器的任务：

```
@OneToMany(mappedBy = "sensor", cascade = CacsadeType.REMOVE)
private Set<Task> tasks; 
```

或者，在删除传感器之前，先搜索其所有任务并删除它们：

```
List<Task> tasks = 
    session.createQuery("select task from Task task where task.sensor = :sensor")
           .setParameter("sensor", sensor)
           .list();
for (Task task : tasks) {
    session.delete(task);
}
session.delete(sensor); 
```

请注意，将 cascade = ALL 设置为从任务到传感器的 ManyToOne 没有任何意义：您不想在删除其中一项任务时删除传感器。

# c# - 使用 C# 导出 Exchange 邮箱时出现错误“CmdletInvocationException 未处理”

> ID：11147599
> 
> 赞同：0
> 
> 时间：2012-06-21T22:17:19.100
> 
> 标签：c#, powershell, exchange-server

我收到 CmdletInvocationException 未处理，无法调用此函数，因为当前主机未实现它。

当我用 get 命令替换 Export-Mailbox cmdlet 作为测试时，我没有收到任何错误。

这是我的示例代码。当我运行 sScript1 时，它运行得很好，当我运行 sScript2 时，我得到了错误。当我在我的测试机器上执行 get-ex 命令时，我找不到 export-mailbox cmdlet。

```
 public void RunPowerShell()
    {
        Cursor.Current = Cursors.WaitCursor;
        RunspaceConfiguration rsConfig = RunspaceConfiguration.Create();
        PSSnapInException snapInException = null;
        Runspace runSpace;

        //create the runspace
        runSpace = RunspaceFactory.CreateRunspace(rsConfig);
        runSpace.Open();
        rsConfig.AddPSSnapIn("Microsoft.Exchange.Management.PowerShell.Admin", out snapInException);
        Pipeline pipeLine = runSpace.CreatePipeline();
        //Add-MailboxPermission -Identity " + FromEmailAccount.Text + " -User Administrator -AccessRights FullAccess

        String sScript1 = "Add-MailboxPermission -Identity " + ToEmailAccount.Text + " -User Administrator -AccessRights FullAccess";
        String sScript2 = "Export-Mailbox -Identity " + FromEmailAccount.Text + " -TargetMailbox " + ToEmailAccount.Text + " -TargetFolder " + ToEmailAccount.Text + " -Confirm:$false";

        //pipeLine.Commands.AddScript(sScript1);
        pipeLine.Commands.AddScript(sScript2);

        Collection<PSObject> commandResults = pipeLine.Invoke();

        //loop through the results of the command and load the SamAccountName into the list
        foreach (PSObject results in commandResults)
        {
            //MessageBox.Show(results.ToString(), @"test");
        }
        pipeLine.Dispose();
        runSpace.Close();
        MessageBox.Show(@"complete", @"Done");
        Cursor.Current = Cursors.Default;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:14:35.973

我[在另一篇文章中](https://stackoverflow.com/a/4219302/1145368)发现了这一点，这对我的错误有用。

如果该命令通常会提示确认，那么您将需要：

```
1) Set -Confirm:$false as a parameter (and possibly -Force as well)
2) Set $ConfirmPreference = "None" before calling Set-Mailbox (and possibly -Force too)
3) Create a Host and implement the Confirm functionality ;-) 
```

最初由 Jaykul 发布/回答

# apache - htaccess recercively 排除目录 (sugarcrm & mvc)

> ID：11147600
> 
> 赞同：0
> 
> 时间：2012-06-21T22:17:48.980
> 
> 标签：apache, .htaccess, mod-rewrite

我有一份 codeigniter 正在运行。而且我现在还尝试在子目录中安装 CRM sugrar crm。并且没有任何样式表、图像和其他正在加载，因为 CI 覆盖了 sugarcrm 在那里编写系统的方式以及它们如何将 CSS 和 JavaScript 等内容包含在其中的方式。

我当前的 htaccess 规则如下所示：

```
#remove index from url
RewriteCond $1 !^(index\.php|static|crm|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

如果文件包含类似 ./file/path/ 的东西，这通常可以工作，但在这种情况下，我试图忽略 crm 目录，如您所见。但它似乎并不是递归的。

Sugarcrm 包括那里的文件，`src="css/something"`如果他们这样做了，`src="/css/something"`我不认为这会是一个问题。但我试图解决这个问题，但我不知道从哪个方向着手，想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:23:38.230

这条线是你的例外

```
RewriteCond $1 !^(index\.php|static|crm|robots\.txt) 
```

因此，如果您想将“css”文件夹添加到异常中

```
RewriteCond $1 !^(index\.php|static|crm|css|robots\.txt) 
```

如果失败，请尝试搜索类似[这样的其他可能问题](http://cheleguanaco.blogspot.pt/2011/05/sugarcrm-troubleshooting-formatting.html)

# c++ - 未初始化的值是由堆分配 + 条件跳转创建的

> ID：11147605
> 
> 赞同：3
> 
> 时间：2012-06-21T22:18:17.873
> 
> 标签：c++, valgrind

我一直在寻找这个错误，但似乎无法找到它。

Valgrind 告诉我：

```
Uninitialised value was created by a heap allocation
==31732==    at 0x4C28B35: operator new(unsigned long) (vg_replace_malloc.c:261)
==31732==    by 0x406B87: __gnu_cxx::new_allocator<int>::allocate(unsigned long void const*) (in /home/matija/Documents/FER/6.semestar/dna-assembly/FMindex/src/test)
==31732==    by 0x40560C: std::_Vector_base<int, std::allocator<int> >::_M_allocate(unsigned long) (in /home/matija/Documents/FER/6.semestar/dna-assembly/FMindex/src/test)
==31732==    by 0x40497A: std::vector<int, std::allocator<int> >::_M_insert_aux(__gnu_cxx::__normal_iterator<int*, std::vector<int, std::allocator<int> > >, int const&) (in /home/matija/Documents/FER/6.semestar/dna-assembly/FMindex/src/test)
==31732==    by 0x403B15: std::vector<int, std::allocator<int> >::push_back(int const&) (in /home/matija/Documents/FER/6.semestar/dna-assembly/FMindex/src/test)
==31732==    by 0x413655: Compressor::getMTF(std::string const&) (in /home/matija/Documents/FER/6.semestar/dna-assembly/FMindex/src/test)
==31732==    by 0x412EE4: Compressor::compress(std::string&) (in /home/matija/Documents/FER/6.semestar/dna-assembly/FMindex/src/test)
==31732==    by 0x40E2FB: Opp::Opp(std::string&) (in /home/matija/Documents/FER/6.semestar/dna-assembly/FMindex/src/test)
==31732==    by 0x402098: FMindex::FMindex(std::string&) (in /home/matija/Documents/FER/6.semestar/dna-assembly/FMindex/src/test)
==31732==    by 0x41DE0B: main (in /home/matija/Documents/FER/6.semestar/dna-assembly/FMindex/src/test) 
```

对于这段代码。据我从这条消息中可以看出，推送到向量时似乎有一个错误，但我就是不明白。我还收到一个“条件跳转或移动取决于未初始化的值”错误，我想这是这个错误的结果。我错过了什么吗？

```
vector<int> Compressor::getMTF(const string& L)
{
    // Construct initial MTF list
    list<char> MTFList = alphabet.toSortedList();

    // Generate MTF code for L
    vector<int> MTF; 
    for (int i = 0; i < L.length(); i++)
    {
        // If I am at the beginning of a bucket, store current MTF state
        if (i % bucketSize == 0) 
        {
           MTFStates.push_back(MTFList);    
        }

        // Find position of L[i] in MTFList and encode it
        list<char>::iterator it;
        int pos = 0;
        for (pos = 0, it = MTFList.begin(); it != MTFList.end(); it++, pos++)
           if (*it == L[i])
           {
              MTF.push_back(pos);
              MTFList.push_front(*it);
              MTFList.erase(it);
              break;
           }
     }
     return MTF;
} 
```

# android - 接收意图

> ID：11147606
> 
> 赞同：0
> 
> 时间：2012-06-21T22:18:24.613
> 
> 标签：android, android-intent, broadcastreceiver, intentfilter

我有一个打开 txt 文件的活动。每次用户想要打开一个 txt 文件时，我的应用程序都可以打开它。我的问题是，如何将要打开的文件的路径传递给我的活动？而且，我如何以编程方式接收路径？简而言之，除了在清单文件中设置意图过滤器以允许我的应用程序在单击该文件时打开一个 txt 文件之外，我还需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:24:39.467

您可以使用 File ( [http://developer.android.com/reference/java/io/File.html](http://developer.android.com/reference/java/io/File.html) ) 或 FileInputStream ( [http://developer.android.com/reference/java/io/FileInputStream.html](http://developer.android.com/reference/java/io/FileInputStream.html) ) 类保存文件路径和处理输入。如果您通过意图传递，您可能希望使用 putExtra() 方法将包含文件名的字符串添加到意图并在另一端检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:56:50.750

您将需要使用广播接收器，但不确定您必须使用什么意图过滤器。

也许可以尝试在清单中添加类似这样的内容：

```
<receiver android:name="MyBroadcastReceiver">
  <intent-filter>
    <action android:name="android.intent.action.ACTION_VIEW" />
    <action android:name="android.intent.action.ACTION_EDIT" />
    <action android:name="android.intent.action.ACTION_PICK" />
  </intent-filter>
</receiver> 
```

然后你需要像这样创建你的 MyBroadcastReceiver 类：

```
public final class MyBroadcastReceiver extends BroadcastReceiver
{
  @Override
  public void onReceive(Context context, Intent intent)
  {
    // Your receiver code here...
  }
} 
```

然后在 onReceive 方法中检查当您尝试打开文件时接收到 Intent 的数据。这样你就可以知道哪些数据会到达 Intent。

希望能帮助到你。

# python - 从 Google App Engine 上的 Blob_Info 获取密钥时出错

> ID：11147608
> 
> 赞同：1
> 
> 时间：2012-06-21T22:18:39.593
> 
> 标签：python, google-app-engine, blobstore

```
class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        reseller_id = self.request.get('reseller_id')
        upload_files = self.request.get('logo_img')
        if upload_files:
            blob_info = upload_files[0]
            key = blob_info.key() 
```

我在线路上遇到错误

```
key = blob_info.key() 
```

错误：

```
 AttributeError: 'str' object has no attribute 'key 
```

问题是文件上传正确，我可以在 GAE blob 查看器中看到它。我从这里的上传示例中复制了这段代码：

[https://developers.google.com/appengine/docs/python/blobstore/overview#Complete_Sample_App](https://developers.google.com/appengine/docs/python/blobstore/overview#Complete_Sample_App)

我不知道为什么我没有通过使用 blob_info.key() 获得键值，任何指针都将受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:31:57.043

请注意，在示例中他们这样做：

```
upload_files = self.get_uploads('file')  # 'file' is file upload field in the form 
```

在您的示例中，upload_files 是用户为 logo_img 字段设置的值，它是一个字符串。

我想 logo_img 字段是用户正在上传的文件，所以你需要这样做

```
upload_files = self.get_uploads('logo_img') 
```

# c# - 文件移动到远程服务器时连接到数据库

> ID：11147616
> 
> 赞同：0
> 
> 时间：2012-06-21T22:19:06.023
> 
> 标签：c#, asp.net, sql, ado.net

我创建了一个 Visual Studio 2010 ASP.NET Web 应用程序。有了它，我使用了一个 .MDF 数据库文件，会员服务在其中生成了必要的表和存储过程等。. .

连接字符串如下

```
<add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\PIPEFIXX.mdf;User Instance=true" providerName="System.Data.SqlClient" /> 
```

现在，在我完成测试后，它在远程服务器上，只使用直接的 FTP (FileZilla)，没有使用 Visual Studio 发布任何类型的内容。它现在不会连接到该数据库。我知道路径是

```
http://www.mydomain.co.uk/App_Data/ 
```

因为那是已上传的内容。

有什么建议么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:57:30.920

会不会是权限问题？您的应用程序的有效身份（可以是匿名用户、IIS APPPOOL\DefaultAppPool 或您设置的任何内容）需要能够读取/写入远程网站上的 App_Data 文件夹。

# java - PrintStream 类型中的方法 printf(String, Object...) 不适用于参数 (String, void)

> ID：11147619
> 
> 赞同：1
> 
> 时间：2012-06-21T22:19:33.550
> 
> 标签：java, compilation, printf

它给了我一条错误消息说

> PrintStream 类型中的方法 printf(String, Object...) 不适用于参数 (String, void)

```
public class project {

        public static void main(String[] args){

        duo duoObject = new duo();
        duo duoObject1 = new duo(5);
        duo duoObject2 = new duo(2,6);
        duo duoObject3 = new duo(3,7,5);
        System.out.printf("%s\n", duoObject.militaryTime());
        System.out.printf("%s\n", duoObject1.militaryTime());
        System.out.printf("%s\n", duoObject2.militaryTime());
        System.out.printf("%s\n", duoObject3.militaryTime());
        }

    }

    public class duo {
        private int hour;
        private int minute;
        private int second;

        public duo(){

        }
        public duo(int h){
            setHour(h);
        }
        public duo(int h, int m){
            setHour(h);
            setHour(m);
        }
        public duo(int h, int m, int s){
            setHour(h);
            setHour(m);
            setHour(s);
        }
        public void setHour(int h){
            hour = ((h>=0 && h<24)? h : 0);
        }
        public void setMinute(int h){
            minute = ((h>=0 && h<60)? h : 0);
        }
        public void setSecond(int h){
            second = ((h>=0 && h<60)? h : 0);
        }
        public int getHour(){
            return hour;
        }
        public int getMinute(){
            return minute;
        }
        public int getSecond(){
            return second;
        }
        public void militaryTime(){
            System.out.printf("%02d:%02d:%02d", getHour(), getMinute(), getSecond());
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T22:22:04.533

`militaryTime`返回`void`。`void`代表什么也不能打印。

也许您想`militaryTime`返回*一个*表示军事时间的字符串。在这种情况下，尝试如下定义方法：

```
public String militaryTime() {
    return String.format("%02d:%02d:%02d", getHour(), getMinute(), getSecond());
} 
```

# objective-c - 在滚动文本视图之前，在 UITextView 中看不到文本

> ID：11147621
> 
> 赞同：3
> 
> 时间：2012-06-21T22:19:35.720
> 
> 标签：objective-c, uiscrollview, interface-builder, uitextview

我的应用程序中有一堆文本视图。出于某种原因，无论我以编程方式（来自互联网）还是通过界面构建​​器（硬编码）设置 UITextView 文本，无论我做什么，当我在测试时转到该文本视图时它是空白的。但是当我滚动它的那一刻，所有的文字就突然出现了。澄清一下，我并不是说文本视图不会滚动，因为没有足够的文本。textview 已将文本编程到其中，但在应用程序运行时它不会显示任何文本，直到 textview 实际滚动，然后文本才出现。

有人知道怎么修这个东西吗？我已经尝试取消链接视图并重新链接以及所有内容。

代码：h文件

```
@interface AboutViewController : UIViewController 
{

    IBOutlet UITextView *textView;
    NSMutableData *responseData;
    NSString *res;
}
@property(nonatomic,retain)IBOutlet UITextView *textView;
@property (nonatomic,retain)NSMutableData *responseData;

@end 
```

文件

```
#import "AboutViewController.h"
@interface AboutViewController ()

@end

@implementation AboutViewController
@synthesize responseData= _responseData;
@synthesize textView;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.someurl.com"]];

        [NSURLConnection connectionWithRequest:req delegate:self];
    }
    return self;
}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    if (!_responseData) {
        [self setResponseData:[NSMutableData data]];
    }

    [_responseData appendData:data];
}

  - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)URLresponse {

    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse*)URLresponse;

    if (![httpResponse isKindOfClass:[NSHTTPURLResponse class]]) {
        NSLog(@"Unknown response type: %@", URLresponse);
        return;
    }

}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection {

    res=[[NSString alloc] initWithData:_responseData encoding:NSUTF8StringEncoding];

    textView.text = res;

    NSLog(@"RES:%@",res);
}

- (void)viewDidLoad
{
    [super viewDidLoad];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
-(void)dealloc{
    [super dealloc];
    [res release];
}
@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T22:51:17.103

我猜你的 UITextView 在你设置它的文本时是不可见的，所以文本没有被绘制。

一旦您的 UITextView 可见，您可以通过执行以下操作强制它绘制文本：

```
[textView setNeedsDisplay]; 
```

或者也许是这样：

```
[textView layoutSubviews]; 
```

否则，不要设置 UITextView 的 text 属性，直到它已经可见。

其他可能性：

1.  您的 UITextView 是否在包含您的 UITextView 的视图框架内？如果父视图不剪辑子视图并且 UITextView 位于父视图的框架之外，这可能是您的问题。问题还可能是父视图超出了父视图的父视图的边界，或者父视图的父视图的边界等。
2.  您是否尝试将大量文本加载到文本视图中？如果是这样，请尝试做一些简单的事情，例如 textView.text = @"test"; 看看这是否有效。
3.  你的 textView 是 UIScrollView 还是 UIWebView 的子视图？这肯定会出现问题。
4.  你的 textView 在另一个视图后面吗？如果是这样，请尝试将文本视图放在前面，看看是否可以解决问题。

通常，您有一些布局问题导致 UITextView 不绘制它的文本。出于某种原因，它认为不需要绘制文本。也许它不认为它在屏幕上或可见。

唉，最绝望的解决方案可能是模拟滚动：

```
textView.contentOffset = CGPointMake(0, 1);
textView.contentOffset = CGPointMake(0, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:11:13.500

请在`textView`加载时尝试

```
NSAttributedString *oldtext = objTextView.attributedText;

[objTextView removeFromSuperview];

objTextView.attributedText = oldtext;

[self.view addSubview:objTextView]; 
```

就我而言，我的文字是`attributed`

# php - file_get_contents 的维基百科奇怪的编码答案

> ID：11147623
> 
> 赞同：3
> 
> 时间：2012-06-21T22:19:43.077
> 
> 标签：php, file-get-contents, wikipedia

```
<?php

ini_set('user_agent', 'Mozilla/5.0 (Windows NT x.y; Win64; x64; rv:10.0.1) Gecko/20100101 Firefox/10.0.1');

echo file_get_contents('http://fr.wikipedia.org/wiki/Brazil', false, $context);

//echo file_get_contents('http://fr.wikipedia.org/wiki/Argentina');

//echo file_get_contents('http://fr.wikipedia.org/wiki/France'); 
```

维基百科的答案类似于编码问题（我无法发布它，因为 StackOverflow 发布规则，但如果您运行脚本，您可以看到它）。

（ETC。）

那是为了巴西和阿根廷。但是对于其他页面（如法国），它运行良好。知道发生了什么吗？顺便说一句，这些页面在浏览器上运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:58:15.647

最后，我发现了问题。我收到了一个 gzip 压缩的 HTML。当字符串看起来是二进制时，我使用 php 函数解压缩 HTML 解决了这个问题。

我虽然 cURL 会以透明的方式为开发人员处理加密，但我遇到了同样的问题。我认为这可能是维基百科的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:52:39.610

如果您从控制台运行它，请确保它使用 UTF-8（在 Linux 中应该如此，不确定在 Windows 中是否可能）。

如果您是从 Web 获取的，请添加`header('Content-Type: text/html; charset=UTF-8');`到脚本的开头以告知浏览器正确的编码。

# iphone - 如何使用命令行将“其他链接器标志”添加到 xcode 项目？

> ID：11147626
> 
> 赞同：11
> 
> 时间：2012-06-21T22:20:08.857
> 
> 标签：iphone, ios, xcode, xcodebuild

我正在尝试自动化 xcode 项目的构建过程。问题是我需要在构建项目时添加“其他链接器标志”。我不能只是手动将它添加到项目构建设置中，我必须使用命令行来完成。可能我可以以某种方式编辑项目文件或配置文件吗？只要它可以作为脚本运行，任何选项都很好。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T00:33:39.970

您可以通过为 xcodebuild 指定一个 xcconfig 文件来做到这一点。例如：

```
echo 'OTHER_LDFLAGS = $(OTHER_LDFLAGS) -force_load "$(SRCROOT)/calabash.framework/calabash" -lstdc++' > temp.xcconfig
xcodebuild -xcconfig temp.xcconfig ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-29T21:56:30.100

@Jesse Rusak 的答案有效，但是直接向命令行添加选项会更简单一些，注意从 shell 中转义变量，例如

```
xcodebuild ... "OTHER_LDFLAGS=\$(OTHER_LDFLAGS) -all_load" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-10-28T19:28:24.847

在像 BBEdit 这样的编辑器中打开 project.pbxproj 文件并粘贴您想要的标志。搜索

```
buildSettings = {
...

SWIFT_VERSION = 4.2;
} 
```

变成

```
buildSetting = {
...

SWIFT_VERSION = 4.2;
OTHER_LDFLAGS = "-all_load";
} 
```

您的调试和发布方案应该有一个部分。为所有人做

# jquery - JQuery 选择器是否仅限于当前模式窗口？我在从当前模式后面的模式中检索数据时遇到问题

> ID：11147627
> 
> 赞同：0
> 
> 时间：2012-06-21T22:20:14.917
> 
> 标签：jquery, jquery-selectors, modal-dialog

我正在使用 JQuery 的数据方法在应用程序中存储一些信息。

设置数据然后检查它是否设置正常。

```
var my_data = "sample data";

var data_location = $("#data_location");

$.data(data_location, "my_data", my_value);

console.log("data: " + $.data(data_location, "my_data")); 
```

这将输出到我的控制台：“示例数据”。

数据被存储到可见模式对话框中的 div (#data_location) 中。

然后，该应用有时会在第一个（包含数据的）模态窗口顶部显示第二个模态对话框。

一旦显示第二个模式对话框，我似乎无法检索数据。

从我正在运行的第二个对话框中：

```
var data_location = $("#data_location");

console.log("data: " + $.data(data_location, "my_data")); 
```

当它与第二个模态对话框显示一起运行时，它输出“未定义”。

有什么东西将我的 JQuery 选择器限制在当前的模式对话框中吗？

还是我错过了其他东西？

感谢你的协助。

JS小提琴演示了这个问题：

[http://jsfiddle.net/tNEAX/36/](http://jsfiddle.net/tNEAX/36/)

有趣的是，如果我在两个点​​击事件之外设置数据位置，它确实有效。不幸的是我不能这样做，因为我在多个 js 文件之间工作。你可以看到它在这里工作：http: [//jsfiddle.net/tNEAX/39/](http://jsfiddle.net/tNEAX/39/)

# web-services - Coldfusion Webservice 接收对象

> ID：11147628
> 
> 赞同：3
> 
> 时间：2012-06-21T22:20:19.067
> 
> 标签：web-services, coldfusion, bluedragon

我觉得自己像个傻瓜，没有弄清楚这一点。我有coldfusion webservice（bluedragon7）来接受来自合作伙伴的信息。他们在结果字段中传递 xml，它只在参数中显示 accessionNumber 的第一个元素。如果我将参数类型更改为其他任何类型（任何、字符串等），则会引发 500 个错误。我在这里错过了什么吗？

这是该函数的一个片段：

```
<cffunction access="remote" name="result" output="false" returntype="any" hint="">
<cfargument name="userid" type="string" required="yes" hint="userid">
<cfargument name="password" type="string" required="yes" hint="password">
<cfargument name="result" type="xml" required="Yes" default="result">
</cffunction> 
```

这是他们的帖子示例：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Header />
<soapenv:Body>
    <result xmlns="http://cws.ots.labcorp.com">
        <userId>peter265974</userId>
        <password>pwd265974</password>
        <result>
            <accessionNumber>0572854881</accessionNumber>
            <accountLocationCode>000010</accountLocationCode>
            <accountLocationName>AERO CONTROL</accountLocationName>
            <accountLocationPhone>2537353350</accountLocationPhone>
            <accountName>HEALTHFORCE PARTNERS CORPORATE</accountName>
            <accountNumber>000804</accountNumber>
            <collectorCOCcomments>
                <abbreviation />
                <commentText>100154550\. TEST OF VIEWING CO</commentText>
                <commentType>MS</commentType>
            </collectorCOCcomments>
        </result>
    </result>
</soapenv:Body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:20:18.000

我只是有同样的问题。我试图遍历所有元素，同时检查元素是否仍然具有“xmlchild”。也许我的[线程](https://stackoverflow.com/questions/10533001/get-all-elements-of-xml-body-and-add-to-struct)可以在这里提供帮助。

但是您必须更改行，您的正文内容将保存在 var 中

```
<cfset var body = xmlsearch(cont, "//SOAP-ENV:Body")[1] /> 
```

只需插入“soapenv:Body”而不是“SOAP-ENV:Body”

# javascript - Kiosk Web App jQuery 实现

> ID：11147631
> 
> 赞同：4
> 
> 时间：2012-06-21T22:20:27.867
> 
> 标签：javascript, jquery, kiosk

我有一个相对简单的网络应用程序，它可以用作我目前正在修改的信息亭。我最初的目标只是让它工作，但现在我正在尝试实施更优雅的方法。

*基本背景信息：*

*   内容——所有内容都通过 php 来自数据库——要么响应 ajax 调用，要么直接用 php 回显内容（大部分内容）。这部分我已经修改过，虽然仍然不完美，但相当有效/灵活。
*   信息亭的作用 - 我们的客户使用信息亭进行一项或多项调查。一旦表单通过验证，就会提交数据。如果这是最后一次调查，则会话结束。如果有更多调查，他们会继续进行调查。

*问题：* 我有一堆控制信息亭行为的**jQuery 事件处理程序。**基本上，行为包括显示/隐藏 DOM 中已经存在的元素，具体取决于信息亭所处的状态。

*   切换指令
*   切换注销屏幕（提前结束调查）
*   转到调查的下一个/上一个问题
*   显示自动注销警告的空闲计时器（再次只是显示/隐藏不是警报）
*   如果回答不足，则显示错过的问题
*   如果通过简单验证，则提交表单

我添加的调查越多，我遇到的特殊情况就越多，jQuery 似乎就越混乱。仅由单选按钮组成的调查很容易（尽管代码仍然不够优雅），但我似乎将那些有问题管道（依赖于其他问题的问题）和文本回复的调查视为特殊情况，我希望可以对 jQuery 采取更加模块化/OOP 的方法。

我考虑过...

*   原型
*   jQuery UI 小部件工厂
*   编写我自己的 jQuery 插件
*   编写我自己的 javascript 类
*   淘汰赛.js
*   继续当前的 jQuery 方法，只是清理它

提前感谢您提供专业知识并根据我的项目背景为我指明正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:06:24.117

Backbone.js 将是解决这个问题的绝佳方式。这种方法将通过...解决我的问题

*   将模型与视图分离
*   利用继承，我可以创建具有标准行为的基类和子类来实现某些调查元素的特殊行为
*   Backbone.js 非常轻量级并且“和其他人一起玩得很好”

# c - 在 C 中通过 TCP 发送和接收整数值

> ID：11147633
> 
> 赞同：4
> 
> 时间：2012-06-21T22:20:40.237
> 
> 标签：c, sockets, tcp, network-programming

在一个程序中，我需要通过 TCP 套接字发送一个整数值。我为此目的使用了`send()`and`recv()`函数，但它们仅将其作为字符串发送和接收。

有没有其他替代方法来发送和接收整数值`send()`？`recv()`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T22:26:47.823

`send()`并且`recv()`不要发送字符串。他们发送*字节*。由您来提供有意义的字节解释。

如果您希望发送整数，您需要确定要发送的整数大小——1 字节、2 字节、4 字节、8 字节等。您还需要确定[编码格式](http://en.wikipedia.org/wiki/Endianness)。[“网络顺序”](http://en.wikipedia.org/wiki/Endianness#Endianness_in_networking)描述了 Big-Endian 格式的约定。`<arpa/inet.h>`您可以使用 from或的以下函数转换为网络订单和从网络订单转换`<netinet/in.h>`：

```
 uint32_t htonl(uint32_t hostlong);
   uint16_t htons(uint16_t hostshort);
   uint32_t ntohl(uint32_t netlong);
   uint16_t ntohs(uint16_t netshort); 
```

如果你坚持`htonl()`在发送前（主机到网络，长）和`ntohl()`接收后（网络到主机，长），你会没事的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T22:25:54.377

当然，您可以将整数作为四个字节发送（或者您的整数恰好是多少字节）；但你必须小心。看看`htonl()`你的系统上可能出现的功能`<arpa/inet.h>`。

假设一个四字节整数 n，这可能会做你想要的：

```
uint32_t un = htonl(n);
send(sockfd, &un, sizeof(uint32_t), flags); 
```

然后您可以在接收端对补码进行编码。

调用 to 的原因`htonl()`是最高位字节通常首先通过 Internet 传输，而某些计算机体系结构（如无处不在的 x86）首先存储最低位字节。如果你不固定字节顺序，而一端的机器是x86，另一端的机器是别的机器，那么没有`htonl()`整数就会出现乱码。

顺便说一句，我不是该主题的专家，但在没有专家*答案*的情况下，这个答案可能有用。祝你好运。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-28T21:08:23.127

我也试过了。但是写不出来。所以我找到了另一个解决方案。

```
// send
char integer[4];                  // buffer
*((int*)integer) = 73232;         // 73232 is data which I want to send.
send( cs, integer, 4, 0 );        // send it

// receive
char integer[4];                  // buffer
recv( s, integer, 4, 0 );         // receive it 
```

# php - 分组和总分 - 关于这个有什么想法吗？

> ID：11147641
> 
> 赞同：2
> 
> 时间：2012-06-21T22:21:24.847
> 
> 标签：php, mysql

我目前正在为每个游戏创建 2 行数据，如下所示。然后我可以创建 SQL 代码来生成 W、L、PF、PA 和 diff 列，如图所示。有谁知道如何通过只输入一个游戏结果来创建相同的数据？

谢谢。

```
id | game | team1     | team2     | score1 | score2 | gameset | diff
--------------------------------------------------------------------
1  | 1    | Reagan    | Jefferson | 43     | 48     | 0       | -5      
2  | 1    | Jefferson | Reagan    | 48     | 43     | 1       |  5 
```

-

```
id | team       | win | loss | PF | PA | diff
-----------------------------------------------
1  | Jefferson  | 1   | 0    | 48 | 43 |  5
2  | Reagan     | 0   | 1    | 43 | 48 | -5 
```

**SQL 代码：**

```
$sql = 'SELECT id, team1, Sum(diff) as tdiff,
               Sum(If(score1>score2,2,0)) + Sum(If(score1=score2,1,0)) +
                   Sum(If(score1+score2=0,-1,0)) AS Pts, 
               Sum(If(score1>score2,1,0)) AS Wins, 
               Sum(If(score1<score2,1,0)) AS Losses, 
               Sum(If(score1+score2=0,-1,0)) + Sum(If(score1=score2,1,0)) AS Ties,
               Sum(score2) AS Allowed, Sum(score1) AS Scored
          FROM database
      GROUP BY team1 ORDER BY Pts DESC, Allowed ASC, Scored DESC, team1 ASC'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:50:44.167

您可以使用两个查询的 UNION 来完成。但是，不清楚`id`结果中的列应该是什么，所以我把它省略了。赢2分，平1分，负0分不是更常见的吗？您的公式似乎没有为无分数平局提供任何分数。UNION 指定两个分数，“团队分数”或`t_score`和“对手分数”或`o_score`。它有效地为表中的每一行创建两行`database`（这将更传统地命名为`game_results`- 'database' 应该为一组表保留，而不是为单个表保留）。

```
SELECT team, SUM(diff) AS tdiff,
       SUM(IF(t_score > o_score, 2, 0)) +
           SUM(IF(t_score = o_score, 1, 0)) +
           SUM(IF(t_score + o_score =0, -1, 0)) AS Pts, 
       SUM(IF(t_score > o_score, 1, 0)) AS Wins, 
       SUM(IF(t_score < o_score, 1, 0)) AS Losses, 
       SUM(IF(t_score + o_score = 0, -1, 0)) +
           SUM(IF(t_score = o_score, 1, 0)) AS Ties,
       SUM(o_score) AS Allowed,
       SUM(t_score) AS Scored
  FROM (SELECT team1 AS team, game, 'H' AS home_away,
               score1 AS t_score, score2 AS o_score
          FROM database
        UNION ALL
        SELECT team2 AS team, game, 'A' AS home_away,
               score2 AS t_score, score1 AS o_score
          FROM database
       ) AS R 
  GROUP BY team ORDER BY Pts DESC, Allowed ASC, Scored DESC, team ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:23:28.007

这正是我需要的乔纳森！让我走上正轨，让它发挥作用！更新的代码如下

选择团队，SUM(t_score-o_score) 作为 tdiff，
       SUM(IF(t_score > o_score, 2, 0)) +
       SUM(IF(t_score = o_score, 1, 0)) +
       SUM(IF(t_score + o_score =0, -1, 0)) AS Pts,
       SUM(IF(t_score > o_score, 1, 0)) AS Wins,
        SUM(IF(t_score < o_score, 1, 0)) AS Losses,
        SUM(IF(t_score + o_score = 0 , -1, 0)) +
        SUM(IF(t_score = o_score, 1, 0)) AS 平局，
        SUM(o_score) AS 允许，
        SUM(t_score) AS 得分
    FROM (SELECT id, diff, team1 AS team, game, 'H' AS home_away,
        score1 AS t_score, score2 AS o_score
    FROM mn_alldistrictgames
    UNION ALL
        SELECT id, diff, team2 AS team, game, 'A' AS home_away,
        score2 AS t_score , score1 AS o_score
    FROM mn_alldistrictgames
    ) AS R
GROUP BY team ORDER BY Pts DESC, Allowed ASC, Scored DESC, team ASC

# dart - 将方法传递给 EventListenerList “add”方法

> ID：11147642
> 
> 赞同：1
> 
> 时间：2012-06-21T22:21:28.343
> 
> 标签：dart

我想做如下的事情：

```
void handleClick(){
    //do stuff
}

void addHandlerToButton(){
    window.document.query('#somebutton').on.click.add(handleClick);
} 
```

Dart 编辑器的静态检查报告`'() -> void' is not assignable to 'EventListener'`

我有一种感觉，我错过了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T22:45:48.630

单击处理程序获取作为参数传递的单击事件（例如，您可以获得屏幕坐标、目标元素等）。所以你的处理程序方法签名必须是

```
void handleClick(Event event){
    // do stuff with event
} 
```

您收到的错误实际上是在告诉您（尽管以一种神秘的方式）：

> '() -> void' 不可分配给 'EventListener'

这里**EventListener**基本上是任何带有签名**void handle(Event event)的函数类型，因此您使用****on.click.add**添加的函数必须与此签名匹配。

# php - PHP exec（）无法正常工作

> ID：11147643
> 
> 赞同：7
> 
> 时间：2012-06-21T22:21:31.170
> 
> 标签：php, apache, unix, exec

我在使用 PHP exec() 函数时遇到了困难。它似乎没有调用某些函数。例如，代码`echo exec('ls');`不会产生任何输出（应该是，目录中有文件）。这对我来说是个问题的主要原因是我正在尝试从 PHP exec() 调用中执行 .jar。

据我所知，我正在正确调用 java 程序，但我没有得到任何输出。.jar 可以从服务器上的命令行执行。（为了记录，它是一个 apache 服务器）。

我的 .jar 执行的 php 如下所示：

```
$output = array();
exec('java -jar testJava.jar', $output);
print_r($output); 
```

我从这个 exec() 调用中得到的输出是`Array()`.

我在 exec() 执行`'whoami'`和`'pwd'`. 我无法弄清楚为什么有些功能可以工作而有些不能。我也不是 PHP 最有经验的人，所以我不太确定如何诊断这个问题。任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T22:00:40.380

您无法执行 ls 的原因是因为权限。

如果您以**用户 A**的身份运行 Web 服务器，那么您只能**ls**仅对**用户 A**具有权限的目录。

您可以更改目录的权限，也可以通过更改**httpd.conf**文件来更改运行服务器的用户（我假设您使用的是 apache）。

如果要更改目录的权限，请确保也更改父目录的权限。

要更改 Web 服务器用户，请执行以下步骤：

打开以下文件：

```
vi /etc/httpd/conf/httpd.conf 
```

搜索

```
User apache
Group apache 
```

更改用户名和组名。更改用户和组后，使用以下命令重新启动服务器。

```
/sbin/service httpd restart 
```

然后您将能够执行该用户可以运行的所有命令。

编辑：

“用户”应该是 httpd.conf 中的非 root 用户。默认情况下，Apache 在以 root 身份运行时不提供页面。您必须将用户设置为非 root 用户，否则会出错。如果要强制 apache 以 root 身份运行，则必须设置一个环境变量，如下所示：

```
env CFLAGS=-DBIG_SECURITY_HOLE 
```

然后你必须重建 apache 才能以 root 身份运行它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-04T08:24:08.027

我有一个解决方案：命令从控制台运行，但不是通过 exec/system/passthru 从 php 运行。问题是命令的路径。它适用于命令的绝对路径

以便：

```
wkhtmltopdf "htm1Eufn7.htm" "pdfIZrNcb.pdf" 
```

变成：

```
/usr/local/bin/wkhtmltopdf "htm1Eufn7.htm" "pdfIZrNcb.pdf" 
```

现在，它可以通过 exec 从 php 运行 Where 命令二进制文件，您可以通过`whereis wkhtmltopdf`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T19:56:39.747

我发现了问题 - SELinux 阻止 PHP 访问某些函数。将 SELinux 置于许可模式已经解决了这些问题（尽管，我宁愿不必让 SELinux 处于许可模式；如果可以的话，我宁愿找到一种允许某些功能的方法）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-30T02:26:34.480

试图弄清楚为什么 PHP exec 从命令行工作而不是从 Apache 工作，我的头发很糟糕。最后，我发现了以下权限：

```
***getsebool -a | grep httpd*** ----> 
    **httpd_setrlimit --> off
    httpd_ssi_exec --> off
    httpd_sys_script_anon_write --> off** 
```

使用： **setsebool -P httpd_ssi_exec 1**

见：[https ://linux.die.net/man/8/httpd_selinux](https://linux.die.net/man/8/httpd_selinux)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-23T08:52:12.683

您的问题不是执行问题，而是 exec 命令的语法。第二个参数始终作为数组返回，并在每个索引中包含一行输出。exec 函数的返回值将包含命令输出的最后一行。要显示输出，您可以使用：

foreach($output as $line) echo "$line\n";

有关详细信息，请参阅[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)。您还可以使用第三个参数获取命令的退出值。

# regex - 为什么我的正则表达式忽略加号或减号？

> ID：11147645
> 
> 赞同：0
> 
> 时间：2012-06-21T22:21:37.927
> 
> 标签：regex, vb.net, .net-3.5

无论我尝试什么，它都与标志不匹配。我什至尝试使用字符串作为模式。这个函数应该能够接受一个类似的字符串`1 day -36mins + 2s -1s`并将其解析为一个`TimeSpan`对象。任何指针？

```
Public Function ParseTimeDelta(ByVal TimeDelta As String) As TimeSpan
    Dim DayPattern As String = "\b([+-]?\w*\d+)\s*d(?:ay[s]?)?\b"
    Dim HourPattern As String = "\b([+-]?\w*\d+)\s*h(?:(?:ou)?r[s]?)?\b"
    Dim MinutePattern As String = "\b([+-]?\w*\d+)\s*m(?:in(?:ute)?[s]?)?\b"
    Dim SecondPattern As String = "\b([+-]?\w*\d+)\s*s(?:ec(?:ond)?[s]?)?\b"
    Dim Days As Integer = 0
    Dim Hours As Integer = 0
    Dim Minutes As Integer = 0
    Dim Seconds As Integer = 0
    Dim Regex As Text.RegularExpressions.Regex

    Regex = New Text.RegularExpressions.Regex(DayPattern, Text.RegularExpressions.RegexOptions.IgnoreCase)
    For Each Match As Text.RegularExpressions.Match In Regex.Matches(TimeDelta)
        Days += CInt(Match.Groups(1).Value)
    Next

    Regex = New Text.RegularExpressions.Regex(HourPattern, Text.RegularExpressions.RegexOptions.IgnoreCase)
    For Each Match As Text.RegularExpressions.Match In Regex.Matches(TimeDelta)
        Hours += CInt(Match.Groups(1).Value)
    Next

    Regex = New Text.RegularExpressions.Regex(MinutePattern, Text.RegularExpressions.RegexOptions.IgnoreCase)
    For Each Match As Text.RegularExpressions.Match In Regex.Matches(TimeDelta)
        Minutes += CInt(Match.Groups(1).Value)
    Next

    Regex = New Text.RegularExpressions.Regex(SecondPattern, Text.RegularExpressions.RegexOptions.IgnoreCase)
    For Each Match As Text.RegularExpressions.Match In Regex.Matches(TimeDelta)
        Seconds += CInt(Match.Groups(1).Value)
    Next

    Return New TimeSpan(Days, Hours, Minutes, Seconds)
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:46:56.407

它不匹配，因为标志之前没有单词边界。固定的。

```
Public Function ParseTimeDelta(ByVal TimeDelta As String) As TimeSpan
    Dim DayPattern As String = "((?:[+-]|\b)\w*\d+)\s*d(?:ay[s]?)?\b"
    Dim HourPattern As String = "((?:[+-]|\b)\w*\d+)\s*h(?:(?:ou)?r[s]?)?\b"
    Dim MinutePattern As String = "((?:[+-]|\b)\w*\d+)\s*m(?:in(?:ute)?[s]?)?\b"
    Dim SecondPattern As String = "((?:[+-]|\b)\w*\d+)\s*s(?:ec(?:ond)?[s]?)?\b"
    Dim Days As Integer = 0
    Dim Hours As Integer = 0
    Dim Minutes As Integer = 0
    Dim Seconds As Integer = 0
    Dim Regex As Text.RegularExpressions.Regex

    Regex = New Text.RegularExpressions.Regex(DayPattern, Text.RegularExpressions.RegexOptions.IgnoreCase)
    For Each Match As Text.RegularExpressions.Match In Regex.Matches(TimeDelta)
        Days += CInt(Match.Groups(1).Value)
    Next

    Regex = New Text.RegularExpressions.Regex(HourPattern, Text.RegularExpressions.RegexOptions.IgnoreCase)
    For Each Match As Text.RegularExpressions.Match In Regex.Matches(TimeDelta)
        Hours += CInt(Match.Groups(1).Value)
    Next

    Regex = New Text.RegularExpressions.Regex(MinutePattern, Text.RegularExpressions.RegexOptions.IgnoreCase)
    For Each Match As Text.RegularExpressions.Match In Regex.Matches(TimeDelta)
        Minutes += CInt(Match.Groups(1).Value)
    Next

    Regex = New Text.RegularExpressions.Regex(SecondPattern, Text.RegularExpressions.RegexOptions.IgnoreCase)
    For Each Match As Text.RegularExpressions.Match In Regex.Matches(TimeDelta)
        Seconds += CInt(Match.Groups(1).Value)
    Next

    Return New TimeSpan(Days, Hours, Minutes, Seconds)
End Function 
```

# php - Codeigniter 表单验证回调不起作用

> ID：11147649
> 
> 赞同：2
> 
> 时间：2012-06-21T22:21:53.513
> 
> 标签：php, codeigniter, callback

可能很简单，但这是我的问题，我已经在我的用户系统中实现了一个简单的验证码，但我似乎无法使用回调表单验证来检查验证码是否正确。

我将答案存储在用户会话中，并在表单验证时检查它是否正确。

你可以在这里看到它：`http://77.96.119.180/beer/user/register` 请原谅对啤酒的任何引用；）

这是我的代码：

```
$this->form_validation->set_rules('captcha', 'Image verification', 'trim|required|xss_clean|integer|callback_captcha_check'); 
```

这是表格的一部分

```
// CAPTCHA
$random_word = rand(10000, 99999);
$vals = array(
    'word'   => $random_word,
    'img_path'   => './captcha/',
    'img_url'    => 'http://77.96.119.180/beer/captcha/',
    'font_path'  => './captcha/fonts/pdark.ttf',
    'img_width'  => '150',
    'img_height' => 50,
    'expiration' => 7200
);

$cap = create_captcha($vals);

// Store captcha answer in session
$this->session->set_userdata('captcha_answer', $random_word);

$content .= form_label('Please enter the numbers in the box to verify you are human (Hint: Only numbers will appear)', 'captcha');
$content .= '<div class="left" style="margin-left:20px;">' . $cap['image'] . '</div>';
$content .= form_input(array('name' => 'captcha', 'value' => '', 'class' => 'right', 'style' => 'width:75%; margin-top:5px;')); 
```

这是回调函数

```
public function captcha_check($str)
    {
        if ($str == $this->session->userdata('captcha_answer'))
        {
            // Captcha is correct
            $this->form_validation->set_message('captcha', 'The %s was wrong, please try again');
            return FALSE;
        }
        else
        {
            return TRUE;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:38:14.103

您的验证规则在您的回调函数中反转。您的 return true 和 return false 逻辑需要颠倒。

只需将您的 if 语句更改为：

```
if ($str != $this->session->userdata('captcha_answer')) 
```

# ajax - CakePHP 2.1 - JsHelper / AJAX 的回调函数

> ID：11147652
> 
> 赞同：0
> 
> 时间：2012-06-21T22:22:14.273
> 
> 标签：ajax, cakephp, callback, helper

对于 CakePHP 2.x 使用 JsHelper，对于每个回调函数，是否有可能让多个选择器受到各种影响。例如，我正在使用：

```
echo $this->Js->submit('thumbs-up-green.jpg', array(
  'id' => 'thumbs-up-green',
  'before' => $this->Js->get('#thumbs-down-red')->effect('fadeOut'),
  'success' => $this->Js->get('#thumbs-down-gray')->effect('fadeIn')
)); 
```

假设我也想在 before 回调函数中对 #thumbs-down-gray 应用效果**（**除了我目前拥有的 #thumbs-down-red 效果），它的语法是什么？我一直在四处寻找，但 JsHelper 的文档有限。

另外一个更简单的问题，JsHelper 提交按钮/表单似乎执行换行，即使 CSS display:none; 活跃。我如何摆脱那个换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:04:56.683

我还没有找到一个非常简洁的 JsHelper 解决方案，我认为我无法链接其他元素和操作。

所以我认为对于更复杂的回调函数，解决方案是执行一个预加载的函数，如：

```
'before' => 'someFunction();', 
```

但是，如果你只想一次性淡出多个元素，那么你可以这样写：

```
'before' => $this->Js->get('#thumbs-down-red, #other-element')->effect('fadeOut'), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:14:20.480

您必须在实际提交调用之前在变量中设置“之前”操作。像这样：

```
$before = $this->Js->get('#skadetyp_form')->effect('fadeOut', array('buffer' => false));
$before .= '$(\'#notice\').append(\'<div class="notice">Sending..<br/>' . $this->Html->image('load_bar.gif', array('alt' => 'Loading..')) . '</div>\')';
$complete = $this->Js->get('#notice div')->effect('fadeOut', array('buffer' => false));
$complete .= '$(\'#notice\').append(\'<div class="success">Succssfully seny!</div>\')';

echo $this->Js->submit('Send!',
        array(
            'update'=>'#skadetyp_form',
            'complete' => $complete,
            'before' => $before,
            'error' => $error,
            'async' => true,
            'method' => 'post',
            'dataExpression'=>true,
            'data'=> $this->Js->serializeForm(
                array(
                    'isForm' => true,
                    'inline' => true
                )
            )
        )
); 
```

# php - 将文件从一台 DV 服务器复制到另一台 PHP

> ID：11147654
> 
> 赞同：0
> 
> 时间：2012-06-21T22:22:28.760
> 
> 标签：php, file-io, remote-server

但是，使用 php 在本地和远程服务器之间复制文件或文件夹的最佳和最简单的方法是什么？这些是位于 web 文件夹上方的文件，因此我需要使用路径而不是 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T01:47:55.547

我会使用 PHP 的内置 FTP 函数来完成。

**编辑：** 啊，你想要安全。这就是我将使用的：[SSH2-SFTP](http://php.net/manual/en/function.ssh2-sftp.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T18:20:43.287

好吧，我做了这个函数，希望它适用于你从 ftp 复制文件：$ftpConnection = 连接，例如 ftp_connect(1.0.0.1)。$path = ftp 路径。$destination = 本地文件。

```
function ftpRecursiveFileListing($ftpConnection, $path, $destination) {
    $contents = ftp_nlist($ftpConnection, $path);
    foreach ($contents as $currentFile) {
        if (strpos($currentFile, '.') === false) {
            $dir = basename($currentFile);
            echo "<br> <b> Directorio </b>" . $dir;
            mkdir($destination . "/" . $dir);
            ftpRecursiveFileListing($ftpConnection, $currentFile, $destination . "/" .   $dir);
        } else {
            $file = basename($currentFile);
            echo '<br> <b>archivo </b>' . $file;
            echo '<br> <b>path </b>' . $path;
            echo '<br> <b>completo </b>' . $path . "/" . $file;
            ftp_get($ftpConnection, $destination . '/' . $file, $path . '/' . $file, FTP_BINARY);
        }
    }
} 
```

# sql-server - 测试 XML 列中的特定节点值，包括潜在的空节点

> ID：11147655
> 
> 赞同：3
> 
> 时间：2012-06-21T22:22:33.613
> 
> 标签：sql-server, xml, xquery-sql

我在 SQL Server 2008 数据库中有一个 XML 列，其值类似于以下简化示例：

**情况1**

```
<root>
    <child>sometimes text here</child>
    <otherstuff ..... />
</root> 
```

**案例2**

```
<root>
    <child/>
    <otherstuff ..... />
</root> 
```

给定一个字符串值，我希望能够选择在“子”节点中具有特定值的行，包括选择案例 2。

例如，如果我有一个局部变量：

```
declare @queryText nvarchar(MAX)
select @queryText = 'sometimes text here' 
```

我可以通过以下方式选择与案例 1 匹配的行：

```
select * from [my_table] 
where [my_xml_column].exist('/root/child[text()=sql:variable("@queryText")]') = 1 
```

但是，对于案例 2，我希望 @queryText = '' 或 @queryText = NULL 能够工作，两者都不匹配。

作为一种解决方法，我可以使用：

```
select * from [my_table]
where [my_xml_column].value('(/root/child)[1], 'nvarchar(MAX)') = @queryText 
```

这可行，但它让我觉得我错过了一些东西并使用肮脏的解决方法来测试是否存在 .value() 而不是 .exist()... 是否有类似的表达式我可以[并且应该？]使用在 .exist() 中匹配特定文本或空节点？除了可读性之外，还有什么理由关心吗？当有人指出我错过的任何明显明显的事情时，我期待着我即将到来的掌心。:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T08:30:09.240

调用`text()`空元素会导致 NULL 而不是空字符串。因此，在这两种情况下，传递`@queryText = ''`或`@queryText = NULL`永远不会等于 NULL。请记住，没有什么等于 NULL，甚至 NULL。

请参阅下面的示例，该示例说明了如何`exist`用于填充或空搜索。

```
declare @my_table table (i int, my_xml_column xml)
insert into @my_table
    select 1, '<root><child>sometimes text here</child><otherstuff /></root>' union all
    select 2, '<root><child/><otherstuff/></root>'

declare @queryText varchar(100) = '';

select  *, 
        [using_text()]=[my_xml_column].value('(/root/child/text())[1]', 'varchar(max)'),
        [using_path]=[my_xml_column].value('(/root/child)[1]', 'varchar(max)')
from    @my_table

select  *
from    @my_table
where   [my_xml_column].exist('/root/child[.= sql:variable("@queryText")]') = 1 
```

# python - 用python解析json时出错

> ID：11147661
> 
> 赞同：0
> 
> 时间：2012-06-21T22:22:45.883
> 
> 标签：python, json, parsing

使用 python 解析时的以下消息给出以下错误。消息来自json文件消息：

```
"Daca nu il stiti déjà, cu siguranta o sa va smulga un zambet. O portie de motivatie pentru toata lumea. :)", 
```

错误：

```
Traceback (most recent call last):
  File "C:\Users\X\Desktop\store_post.py", line 328, in <module>
    post_l_1 =jsonToPost.return_post_list(data2)
  File "C:\Users\X\Desktop\jsonToPost.py", line 20, in return_post_list
    post_message = json.dumps(read_,sort_keys = True, indent =2,skipkeys=True)
  File "C:\Python27\lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
  File "C:\Python27\lib\json\encoder.py", line 195, in encode
    return encode_basestring_ascii(o)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xe9 in position 18: invalid continuation byte 
```

相关的代码片段是：

```
post_message = json.dumps(read_,sort_keys = True, indent =2,skipkeys=True)
post_message = json.loads(post_message) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T00:09:49.943

您需要仔细处理 Unicode。 [Pragmatic Unicode，或 How Do I Stop The Pain](http://bit.ly/unipain)包含所有细节。您需要知道该字节字符串使用什么编码，然后正确解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T23:08:05.123

“它是一个包含消息的字符串，我们要将其转换为 ascii，然后将其转储到数据库中”

显示的字符串没有 ASCII 表示，因此，“将其转换为 ascii”是没有意义的。此外，听起来您正在尝试使用模块`json`来完成模块`codecs`设计的工作。我的猜测是您实际上是在尝试将字符串转换为可以编码“déjà”的[ISO-8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)

您可能还应该阅读并理解[每个软件开发人员绝对、肯定必须了解 Unicode 和字符集（没有借口！）的绝对最小值](http://www.joelonsoftware.com/articles/Unicode.html)，然后也许您可以提出一个有意义的问题。

# javascript - 在javascript跨浏览器中过滤数组

> ID：11147662
> 
> 赞同：2
> 
> 时间：2012-06-21T22:22:47.230
> 
> 标签：javascript, arrays

我有一个小问题。我搜索但没有得到帮助来解决它。例如`var oldArr=['one','two','3'];`，我有一个数组，我想从中创建一个新数组，但只能使用**字符串**值，为此我目前是`using Array.filter`方法并且它正在工作，但有人说它不受所有浏览器支持，所以我的问题是如何我使用跨浏览器解决方案过滤我的数组。

这是我当前的代码

```
var oldArr=['one','two','3'];
newArr=oldArr.filter(function(a){
return !a.match(/\d/);
});
alert(newArr); 
```

预先感谢您的努力。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T22:27:44.407

也许你想要这个

```
if (!Array.prototype.filter) {
    Array.prototype.filter = function(fun /*, thisp*/) {
        var len = this.length >>> 0;
        if (typeof fun != "function") {
            throw new TypeError();
        }

        var res = [];
        var thisp = arguments[1]; 
        for (var i = 0; i < len; i++) {
            if (i in this) {
                var val = this[i];
                if (fun.call(thisp, val, i, this)) {
                    res.push(val);
                }
            }
        }

        return res;
    };
}

var oldArr = ['one','two','3'];
    newArr=oldArr.filter(function(a){
    return !a.match(/\d/);
});
console.log(newArr); 
```

参考：[**MDN**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)。

[**演示。**](http://jsfiddle.net/heera/UkPXd/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:31:03.530

```
var oldArr = ['one', 'two', '3'];
var newArr = [];
for (var i = 0; i < oldArr.length; i++) {
    if (isNaN(oldArr[i])) {
        newArr.push(oldArr[i]);
    }
} 
```

isNaN 评估某些东西是否可以转换为数字。它也是跨浏览器兼容的。

如果你想得到所有*是*数字的东西，你只需在条件句上加一个 bang：

```
if (!isNaN(oldArr[i])) { 
```

# sql - 加入一对多得到一排，按优先级

> ID：11147663
> 
> 赞同：1
> 
> 时间：2012-06-21T22:22:50.580
> 
> 标签：sql, sql-server-2008, tsql

我有一个联系人表：

```
ID  NAME
--- ----
1   KK
2   JKI
3   HU 
```

我有一个电话桌：

```
ID  ContactID  Phone  Type
--- ---------  -----  --------
1   1          569    Business
2   1          896    Mobile
3   1          258    Fax
4   2          369    Mobile
5   3          124    Fax
6   2          496    Fax 
```

我想获取至少有一个电话号码的所有联系人。要显示的电话号码应该是商务，如果没有可用的商务类型，则为移动，如果没有可用的移动类型，则为传真，否则为空

样本结果：

```
ID  NAME   PHONE
--- ------ ------
1   KK     569   -- Business present
2   JKI    369   -- Business not present but mobile present
3   HU     124   -- only fax present 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T22:36:53.403

```
;WITH [prior](i,t) AS 
(
    SELECT 1, 'Business'
    UNION ALL SELECT 2, 'Mobile'
    UNION ALL SELECT 3, 'Fax'
),
x AS 
(
  SELECT c.ID, c.Name, p.Phone,
    rn = ROW_NUMBER() OVER (PARTITION BY c.ID ORDER BY r.i)
  FROM dbo.Contacts AS c
  LEFT OUTER JOIN dbo.Phone AS p
  ON p.ContactID = c.ID
  LEFT OUTER JOIN [prior] AS r
  ON r.t = p.[Type]
)
SELECT ID, Name, Phone FROM x
WHERE rn = 1; 
```

如果要消除没有电话的联系人，只需将两个实例都更改`LEFT OUTER`为`INNER`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T22:30:14.913

```
select  c.ID
,       c.Name
,       coalesce(business.Phone, mobile.Phone, fax.Phone) as Phone
from    Contacts c
left join
        Phone business
on      business.ContactID = c.ID
        and business.type = 'Business'
left join
        Phone mobile
on      mobile.ContactID = c.ID
        and mobile.type = 'Mobile'
left join
        Phone fax
on      fax.ContactID = c.ID
        and fax.type = 'Fax'
where   coalesce(business.Phone, mobile.Phone, fax.Phone) is not null 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T02:18:44.653

我能想到的最紧凑的解决方案是，

```
; WITH CTE AS (
    SELECT 
    c.ID, c.NAME, p.Phone
    , r = ROW_NUMBER()OVER(PARTITION BY c.ID ORDER BY CASE p.[TYPE] WHEN 'Business' THEN 1 WHEN 'Mobile' THEN 2 ELSE 3 END)
    FROM Contacts c
    LEFT JOIN Phone p ON p.ContactID = c.ID AND p.[TYPE] IN ('Business','Mobile','Fax')
    WHERE EXISTS(SELECT 1 FROM Phone WHERE ContactID = c.ID)
)
SELECT ID, NAME, Phone
FROM CTE
WHERE r = 1; 
```

该解决方案返回，

*   按指定顺序与第一个匹配电话的联系人
*   Contact with NULL phone # if a phone # 存在但没有指定类型
*   根本没有电话的联系人没有结果

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T22:30:01.267

您的数据模型不适合有效地查询，但这可能会奏效：

```
SELECT C.ID, C.Name, COALESCE(
    (SELECT TOP 1 P.Phone FROM Phones P WHERE P.ContactID = C.ID AND P.[Type] = 'Business'),
    (SELECT TOP 1 P.Phone FROM Phones P WHERE P.ContactID = C.ID AND P.[Type] = 'Mobile'),
    (SELECT TOP 1 P.Phone FROM Phones P WHERE P.ContactID = C.ID AND P.[Type] = 'Fax')
  ) Phone
  FROM Contacts C 
```

# image - 为什么图像压缩算法要按子块来处理图像？

> ID：11147666
> 
> 赞同：2
> 
> 时间：2012-06-21T22:23:01.830
> 
> 标签：image, compression, jpeg, block, dft

例如，考虑 DFT 或 DCT。确切地说，由子块转换的图像与整体转换的图像之间有什么区别？生成的文件大小是否更小？算法效率更高吗？转换后的图像看起来不同吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:25:46.383

它们的设计使它们可以使用并行硬件来实现。每个块都是独立的，可以在不同的计算节点上计算，也可以共享给尽可能多的节点。

也正如在回答[为什么 JPEG 压缩按 8x8 块处理图像？](https://stackoverflow.com/questions/10780425/why-jpeg-compression-processes-image-by-8x8-blocks)计算复杂度很高。我认为 (block_y_size × block_y_size) ²

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T22:34:19.817

就是让图片变小。有很多方法可以将图像细分为块。最简单的是通过完整的行。更高级的平铺是分形，即希尔伯特曲线。Jpeg 2000 使用希尔伯特曲线。它使用额外的空间信息，也用于地图应用程序。

# python - 有没有办法列出 pip 依赖项/要求？

> ID：11147667
> 
> 赞同：132
> 
> 时间：2012-06-21T22:23:09.627
> 
> 标签：python, pip, requirements.txt

在不进行安装的情况下，我想快速查看所有`pip install`要安装的软件包。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2016-07-22T17:09:09.323

这是使用 pip 版本**8.1.2**、**9.0.1**、**10.0.1**和**18.1**测试的。

要在不弄乱 Linux 上当前目录的情况下获取输出，请使用

```
pip download [package] -d /tmp --no-binary :all: -v 
```

`-d`告诉 pip 下载文件的目录。

更好的是，只需将此脚本与参数作为包名称一起使用，即可仅获取依赖项作为输出：

```
#!/bin/sh

PACKAGE=$1
pip download $PACKAGE -d /tmp --no-binary :all:-v 2>&1 \
| grep Collecting \
| cut -d' ' -f2 \
| grep -Ev "$PACKAGE(~|=|\!|>|<|$)" 
```

也可以[在这里找到](https://gitlab.com/snippets/22979)。

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2018-03-25T03:45:14.777

看看我的项目[johnnydep](https://github.com/wimglenn/johnnydep)！

安装：

```
pip install johnnydep 
```

使用示例：

```
$ johnnydep requests
name                       summary
-------------------------  ----------------------------------------------------------------------
requests                   Python HTTP for Humans.
├── certifi>=2017.4.17     Python package for providing Mozilla's CA Bundle.
├── chardet<3.1.0,>=3.0.2  Universal encoding detector for Python 2 and 3
├── idna<2.7,>=2.5         Internationalized Domain Names in Applications (IDNA)
└── urllib3<1.23,>=1.21.1  HTTP library with thread-safe connection pooling, file post, and more. 
```

更复杂的树：

```
$ johnnydep ipython 
name                              summary
--------------------------------  -----------------------------------------------------------------------------
ipython                           IPython: Productive Interactive Computing
├── appnope                       Disable App Nap on OS X 10.9
├── decorator                     Better living through Python with decorators
├── jedi>=0.10                    An autocompletion tool for Python that can be used for text editors.
│   └── parso==0.1.1              A Python Parser
├── pexpect                       Pexpect allows easy control of interactive console applications.
│   └── ptyprocess>=0.5           Run a subprocess in a pseudo terminal
├── pickleshare                   Tiny 'shelve'-like database with concurrency support
├── prompt-toolkit<2.0.0,>=1.0.4  Library for building powerful interactive command lines in Python
│   ├── six>=1.9.0                Python 2 and 3 compatibility utilities
│   └── wcwidth                   Measures number of Terminal column cells of wide-character codes
├── pygments                      Pygments is a syntax highlighting package written in Python.
├── setuptools>=18.5              Easily download, build, install, upgrade, and uninstall Python packages
├── simplegeneric>0.8             Simple generic functions (similar to Python's own len(), pickle.dump(), etc.)
└── traitlets>=4.2                Traitlets Python config system
    ├── decorator                 Better living through Python with decorators
    ├── ipython-genutils          Vestigial utilities from IPython
    └── six                       Python 2 and 3 compatibility utilities 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-07-30T08:39:46.867

当且仅当软件包已安装时，您可以使用`pip show <package>`. `Requires:`在输出末尾查找文件。显然，这违反了您的要求，但仍然可能有用。

例如：

```
$ pip --version
pip 7.1.0 [...]
$ pip show pytest
---
Metadata-Version: 2.0
Name: pytest
Version: 2.7.2
Summary: pytest: simple powerful testing with Python
Home-page: http://pytest.org
Author: Holger Krekel, Benjamin Peterson, Ronny Pfannschmidt, Floris Bruynooghe and others
Author-email: holger at merlinux.eu
License: MIT license
Location: /home/usr/.tox/develop/lib/python2.7/site-packages
Requires: py 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-06-21T23:36:53.747

> **注意：此答案中使用的功能已于[2014 年弃用](https://pip.pypa.io/en/stable/news/#id130)并[于 2015 年删除](https://pip.pypa.io/en/stable/news/#id112)。请参阅适用于现代的其他答案`pip`。**

您可以直接使用 pip 获得的最接近的是使用以下`--no-install`参数：

```
pip install --no-install <package> 
```

例如，这是安装 celery 时的输出：

```
Downloading/unpacking celery                                                                                   
  Downloading celery-2.5.5.tar.gz (945Kb): 945Kb downloaded
  Running setup.py egg_info for package celery

    no previously-included directories found matching 'tests/*.pyc'
    no previously-included directories found matching 'docs/*.pyc'
    no previously-included directories found matching 'contrib/*.pyc'
    no previously-included directories found matching 'celery/*.pyc'
    no previously-included directories found matching 'examples/*.pyc'
    no previously-included directories found matching 'bin/*.pyc'
    no previously-included directories found matching 'docs/.build'
    no previously-included directories found matching 'docs/graffles'
    no previously-included directories found matching '.tox/*'
Downloading/unpacking anyjson>=0.3.1 (from celery)
  Downloading anyjson-0.3.3.tar.gz
  Running setup.py egg_info for package anyjson

Downloading/unpacking kombu>=2.1.8,<2.2.0 (from celery)
  Downloading kombu-2.1.8.tar.gz (273Kb): 273Kb downloaded
  Running setup.py egg_info for package kombu

Downloading/unpacking python-dateutil>=1.5,<2.0 (from celery)
  Downloading python-dateutil-1.5.tar.gz (233Kb): 233Kb downloaded
  Running setup.py egg_info for package python-dateutil

Downloading/unpacking amqplib>=1.0 (from kombu>=2.1.8,<2.2.0->celery)
  Downloading amqplib-1.0.2.tgz (58Kb): 58Kb downloaded
  Running setup.py egg_info for package amqplib

Successfully downloaded celery anyjson kombu python-dateutil amqplib 
```

诚然，这确实以临时文件的形式留下了一些麻烦，但它确实实现了目标。如果您使用 virtualenv 执行此操作（您应该这样做），那么清理就像删除`<virtualenv root>/build`目录一样简单。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-09-28T14:10:52.400

我引用了[@onnovalkering 的替代解决方案](https://stackoverflow.com/a/50424967/4501084)：

> PyPi 提供了一个带有包元数据的 JSON 端点：
> 
> ```
> >>> import requests
> >>> url = 'https://pypi.org/pypi/{}/json'
> >>> json = requests.get(url.format('pandas')).json()
> >>> json['info']['requires_dist']
> ['numpy (>=1.9.0)', 'pytz (>=2011k)', 'python-dateutil (>=2.5.0)']
> >>> json['info']['requires_python']
> '>=2.7,!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*,!=3.4.*' 
> ```
> 
> 对于特定的包版本，在 URL 中添加一个额外的版本段：
> 
> ```
> https://pypi.org/pypi/pandas/0.22.0/json 
> ```

此外，如果您使用 conda （[如 @ShpielMeister 建议的那样](https://stackoverflow.com/a/47666077/4501084)），您可以使用：

```
conda info package==X.X.X 
```

显示信息，包括特定版本的依赖项或：

```
conda info package 
```

显示信息，包括有关该软件包所有受支持版本的依赖关系。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-09T10:49:56.423

使用[pipdeptree](https://pypi.org/project/pipdeptree/) ( `pip install pipdeptree`)。需要安装包。

```
$ pipdeptree -p pandas
pandas==1.2.2
  - numpy [required: >=1.16.5, installed: 1.19.5]
  - python-dateutil [required: >=2.7.3, installed: 2.8.1]
    - six [required: >=1.5, installed: 1.15.0]
  - pytz [required: >=2017.3, installed: 2021.1] 
```

使用[johnnydep](https://github.com/wimglenn/johnnydep) ( `pip install johnnydep`)。速度较慢，因为它会下载软件包的轮子。

```
$ johnnydep pandas
2021-06-09 11:01:21 [info     ] init johnnydist                [johnnydep.lib] dist=pandas parent=None
2021-06-09 11:01:22 [info     ] init johnnydist                [johnnydep.lib] dist=numpy>=1.16.5 parent=pandas
2021-06-09 11:01:22 [info     ] init johnnydist                [johnnydep.lib] dist=python-dateutil>=2.7.3 parent=pandas
2021-06-09 11:01:23 [info     ] init johnnydist                [johnnydep.lib] dist=pytz>=2017.3 parent=pandas
2021-06-09 11:01:23 [info     ] init johnnydist                [johnnydep.lib] dist=six>=1.5 parent=python-dateutil>=2.7.3
name                        summary
--------------------------  -----------------------------------------------------------------------
pandas                      Powerful data structures for data analysis, time series, and statistics
├── numpy>=1.16.5           NumPy is the fundamental package for array computing with Python.
├── python-dateutil>=2.7.3  Extensions to the standard Python datetime module
│   └── six>=1.5            Python 2 and 3 compatibility utilities
└── pytz>=2017.3            World timezone definitions, modern and historical 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-06T18:57:16.417

我认为这些答案已经过时，现在有更好的解决方案。原帖在这里：

*   [如何在不下载或安装软件包的情况下获取 pip 命令将安装的软件包列表？](https://stackoverflow.com/questions/68489828/how-can-i-get-a-list-of-packages-pip-command-will-install-without-downloading-or)

要为您的or`requirements.txt`中列出的包生成，您需要安装.`install_requires``setup.cfg``setup.py`[`pip-tools`](https://github.com/jazzband/pip-tools)

```
pip install pip-tools
pip-compile 
```

要生成包含在for和`requirements.txt`下指定的包的文件：`extras_requires``tests``dev`

```
pip-compile --extra tests --extra devrequirements.txt file with packages listed under 
```

此外，您还可以使用`requirements.in`文件代替`setup.cfg`或`setup.py`列出您的要求。

```
pip-compile requirements.in 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-03-03T10:45:55.170

只是关于如何`johnnydep`从 Python 而不是 CLI 调用的附录：

```
import sys, johnnydep.cli
sys.argv = ["", "pandas"]
johnnydep.cli.main() 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-06-16T10:05:13.263

[另一种选择是使用与此类](https://github.com/sourcegraph/pydep)似的帮助脚本，它使用`pip.req.parse_requirements`API 来解析`requirements.txt`文件并`distutils.core.setup`替换来解析`setup.py`文件。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-11-10T14:36:05.623

正如@radtek 评论中提到的那样，应该使用该命令`pip install <package> --download <path>`，因为从 7.0.0 (2015-05-21) 开始， --no- install[已从](http://pip.readthedocs.org/en/stable/news/)`pip`. 这会将所需的依赖项下载到`<path>`.

# php - 使用 mysqli 时搜索栏不起作用

> ID：11147669
> 
> 赞同：0
> 
> 时间：2012-06-21T22:23:19.983
> 
> 标签：php, mysqli

我创建的搜索栏有问题，我没有错误，我知道我的查询是正确的，因为我的搜索栏曾经在旧的 mysql 代码中正常工作。但是由于我尝试将我的代码更改为 mysqli，它并没有完全奏效。无论用户在搜索栏中输入什么内容，它总是显示“请在搜索栏中输入一个短语”，无论搜索栏是否为空。它也不显示搜索结果。所以我的问题是，如果找到关键字，为什么它不显示搜索结果？

以下是当前代码：

```
 <?php
  $questioncontent = (isset($_POST['questioncontent'])) ? $_POST['questioncontent'] : '';

        $searchquestion = $questioncontent;
        $terms = explode(" ", $searchquestion);

        //Query for search bar      
        $questionquery = "
            SELECT q.QuestionId, q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(an.Answer ORDER BY an.Answer SEPARATOR ' ') AS Answer, r.ReplyType, 
                   q.QuestionMarks 
              FROM Answer an 
              INNER JOIN Question q ON q.AnswerId = an.AnswerId
              JOIN Reply r ON q.ReplyId = r.ReplyId 
              JOIN Option_Table o ON q.OptionId = o.OptionId 

                             WHERE ";

        $i = 0;
        foreach ($terms as $each) {
            $i++;

        //If one term entered in search bar then perform a LIKE statement to look up the term entered       
            if ($i == 1) {
                $questionquery .= "q.QuestionContent LIKE ? ";
            } else {
        //If multiple terms then add an OR statement to check for multiple keywords        
                $questionquery .= "OR q.QuestionContent LIKE ? ";
            }
        }
        //Order by terms entered in ascending order they have been entered               
        $questionquery .= "GROUP BY q.QuestionId, q.SessionId ORDER BY ";
        $i = 0;
        foreach ($terms as $each) {
            $i++;

        //if there are multiple terms, then for example there are 2 terms then display content which contains both terms first, then display content which contains only one of those terms                  
            if ($i != 1)
                $questionquery .= "+";
            $questionquery .= "IF(q.QuestionContent LIKE ? ,1,0)";
        }

        $questionquery .= " DESC ";

        //prepare query, bind the terms and execute query    
        $stmt = $mysqli->prepare($questionquery);
        $stmt->bind_param('ss', $each = '%' . $each . '%', $each = '%' . $each . '%');
        $stmt->execute();
        $stmt->bind_result($dbQuestionId, $dbQuestionContent, $dbOptionType, $dbNoofAnswers, $dbAnswer, $dbReplyType, $dbQuestionMarks);
        $questionnum = $stmt->num_rows();

        //If search bar is empty and user submits the search bar, then below is the phrase it should display:

        if (empty($questioncontent)) {
            echo "Please enter in a phrase in the text box in able to search for a question";
        }

        //Below is the code if no results are found from the search:
        else if ($questionnum == 0) {
            echo "<p>Your Search: '$searchquestion'</p>";
            echo "<p>Number of Questions Shown from the Search: <strong>$questionnum</strong></p>";
            echo "<p>Sorry, No Questions were found from this Search</p>";
        }

        //Finally below is the code that displays the results of the search if search is successful:
        else {
            echo "<p>Your Search: '$searchquestion'</p>";
            echo"<p>Number of Questions Shown from the Search: <strong>$questionnum</strong></p>";

            $output = "";
            $output .= "
                <table border='1' id='resulttbl'>
                  <tr>
                  <th class='questionth'>Question</th>
                  </tr>
            ";
            while ($stmt->fetch()) {
                $output .= "
                  <tr>
                  <td class='questiontd'>{$dbQuestionContent['QuestionContent']}</td>
                  <td class='addtd'><button type='button' class='add' onclick=\"parent.addwindow('{$dbQuestionContent['QuestionContent']}');\">Add</button></td>
                  </tr>";
            }
            $output .= "        </table>";

            echo $output;
        }

    ?> 
```

这是它自己供您测试的应用程序的链接。如果您在搜索栏中输入“AAA”，它应该会显示结果，但会一直提示需要输入一个短语。如果您随机输入一些内容以使搜索不应该找到结果，它仍然指出请输入一个短语。[应用](http://helios.hud.ac.uk/u0867587/Mobile_app/previousquestions.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T00:44:49.160

我稍微重写了您的代码，并切换到 PDO 以便于绑定。尝试这个

```
$searchquestion = $_GET['questioncontent'];
        $terms = explode(" ", $searchquestion);

        //Query for search bar      
        $questionquery = "
            SELECT q.QuestionId, q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(an.Answer ORDER BY an.Answer SEPARATOR ' ') AS Answer, r.ReplyType, 
                   q.QuestionMarks 
              FROM Answer an 
              INNER JOIN Question q ON q.AnswerId = an.AnswerId
              JOIN Reply r ON q.ReplyId = r.ReplyId 
              JOIN Option_Table o ON q.OptionId = o.OptionId 

                             WHERE ";

  $where = array();
  $bindings = array();
  $orderby=array();

    foreach($terms as $key=>$each)
    {
      $where[] = 'q.QuestionContent LIKE ? ';
      $bindings[] = $each;
      $orderby[] = ' IF(q.QuestionContent LIKE ? , 1, 0)';

    }

    $questionquery .= join(' OR ', $where);
    $questionquery .= "GROUP BY q.QuestionId, q.SessionId ORDER BY " . join('+', $orderby) . ' DESC';

     $stmt = $pdo->prepare($questionquery);
    $sth->execute(array_merge($bindings, $bindings));
    $results = $sth->fetchAll() 
```

# wpf - WPF - 如何将两个不同的数据视图绑定到数据网格中的一个多数据触发器中

> ID：11147672
> 
> 赞同：0
> 
> 时间：2012-06-21T22:23:23.427
> 
> 标签：wpf, mvvm, datagrid, datatrigger, multidatatrigger

我正在使用 MVVM 模式，如果两个布尔值设置为 true，我有一个带有一列的 DataGrid，该列显示一些图片。一个值在绑定以生成行的 DataView (DtView) 中，绑定没有问题，但另一个值是 ViewModel 的公共属性（与 DtView 相同），这是问题所在。我不知道如何解决这个问题。
这是我的代码：

```
<DataGrid ItemsSource="{Binding Path=DtView}">
  <DataGrid.Columns>
    <DataGridTemplateColumn Header="Status">
      <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal">
            <Image Source="../Images/a.png" Width="18" Height="18">
              <Image.Style>
                <Style TargetType="Image">
                  <Setter Property="Visibility" Value="Collapsed" />
                  <Style.Triggers>
                    <MultiDataTrigger>
                      <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding 'column from DtView'}" Value="True" />
                        <Condition Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=Column from other DataView}" Value="True" />
                      </MultiDataTrigger.Conditions>
                      <Setter Property="Visibility" Value="Visible" />
                    </MultiDataTrigger>
                  </Style.Triggers>
                </Style>
              </Image.Style>
            </Image>
          </StackPanel>
        </DataTemplate>
      </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
  </DataGrid.Columns>
</DataGrid> 
```

如果有人可以帮助我，我会非常高兴，因为这很令人沮丧，而且我不知道如何修复此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:51:34.213

尝试

```
<MultiDataTrigger.Conditions>
    <Condition Binding="{Binding 'column from DtView'}" Value="True" />
    <Condition Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}},
                                 Path=DataContext.OtherDtView.Column from other DataView}" Value="True" />
</MultiDataTrigger.Conditions> 
```

# jquery - 使用 jquery 每 5 秒切换类 1 秒

> ID：11147677
> 
> 赞同：4
> 
> 时间：2012-06-21T22:23:54.213
> 
> 标签：jquery, css

如何每 5 秒切换 1 秒的课程？

这是我想要的动作，只需要让它发生 1 秒，每 5 秒..

```
$('#donate').toggleClass('wiggle'); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T22:30:24.357

使用以下

```
setInterval(function(){ 
   // toggle the class every five second
   $('#donate').toggleClass('wiggle');  
   setTimeout(function(){
     // toggle back after 1 second
     $('#donate').toggleClass('wiggle');  
   },1000);

},5000); 
```

**演示** [http://jsfiddle.net/joycse06/vqRqf/](http://jsfiddle.net/joycse06/vqRqf/)

# wpf - ValidateWithoutUpdate 不会执行配置的 ValidationRules？

> ID：11147680
> 
> 赞同：3
> 
> 时间：2012-06-21T22:24:01.313
> 
> 标签：wpf, validation, binding, idataerrorinfo, validationrule

我试图理解为什么对[BindingExpression.ValidateWithoutUpdate()](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingexpressionbase.validatewithoutupdate.aspx)的调用实际上并没有做它宣传的事情。

我有一些古怪的验证（我已经从我的示例代码中删除了无聊的细节；我只想说它与 WF4 ModelItem 限制有关）我必须通过附加属性（例如，从代码）添加到绑定中而不是在 xaml 中）。

```
 // d is DependencyObject and prop is DependencyProperty
    var binding = BindingOperations.GetBinding(d, prop);
    binding.ValidationRules.Add(new MyDerpyValidatonRule()); 
```

这里没有什么疯狂的。但问题是**第一次显示控件时没有运行验证，因此 UI 中不会显示验证错误。**

```
<TextBox
    Grid.Column="1"
    x:Name="derp"
    Text="{Binding Derp, NotifyOnValidationError=True, 
                         ValidatesOnDataErrors=True}"
    t:MyDerpyValidator.TargetProperty="{x:Static TextBox.TextProperty}" /> 
```

绑定看起来不错，在值更改后可以工作，但是当第一次显示时，我得到一个皱眉而不是预期的红色边框：

![在此处输入图像描述](../Images/29883f8dd7e010e6d919a8b5e36e8d6c.png)

*最初，在将 ValidationRule 添加到 Binding 之后*，我尝试调用 ValidateWithoutUpdate 。 这似乎不起作用。后来，我使用 Dispatcher 尝试将这个调用关闭，直到应用程序变得温暖舒适（也许它没有验证，因为茶还没有完成冲泡，我不知道）

```
var exp = BindingOperations.GetBindingExpression(d, prop);
Dispatcher.CurrentDispatcher.BeginInvoke(
    (Action<BindingExpression>)(x =>
    {
        x.ValidateWithoutUpdate();
    }),
    DispatcherPriority.ApplicationIdle,
    exp); 
```

我很确定这曾经有效。 **一次**。再也没有工作过。对我来说可能是一个不正确的观察。

后来，我尝试了各种方法来让**ValidateWithoutUpdate**真正***做一些事情***。我什至尝试从事件处理程序中调用它，这将在路上发生

```
public DerpyControl()
{
    InitializeComponent();
    derp.MouseEnter += DERPDAMNYOU;
}

void DERPDAMNYOU(object sender, MouseEventArgs e)
{
    derp.GetBindingExpression(TextBox.TextProperty).ValidateWithoutUpdate();
} 
```

*它永远不会起作用。*

### 我需要做什么才能让 BindingExpression.ValidateWithoutUpdate() 进行 friggen 验证？！？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T00:17:38.627

哇，这是一些奇怪的行为。使用 ILSpy 查看一些验证代码，它在后台进行了一些检查，以确定是否需要验证，我太害怕一直遵循它，所以我也只是尝试了一些随机的东西。

这是我尝试的第一件事：

在您的附加属性更改处理程序中，之后

```
binding.ValidationRules.Add(new MyDerpyValidatonRule()); 
```

添加

```
BindingOperations.ClearBinding(d, prop);
BindingOperations.SetBinding(d, prop, binding); 
```

这必须以某种方式设置强制它进行验证的内部“需要验证”标志。

# c# - Windows Phone 后台传输和 206 部分响应

> ID：11147681
> 
> 赞同：2
> 
> 时间：2012-06-21T22:24:02.077
> 
> 标签：c#, .net, windows-phone-7

我正在开发的 Windows Phone 应用程序上的 C# 后台传输服务存在问题。

当我下载一个大文件时，服务器在 HTTP 上响应 206 部分响应，下载不起作用并将其状态更改为“已完成”而不下载任何内容。

在[http://msdn.microsoft.com/en-us/library/hh202959(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202959(v=vs.92).aspx)文档指出 206 表示下载成功，这让我相信 206 可以通过后台传输服务。但在我的应用程序上，我无法验证这一点。

其他人有这个问题的经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T23:17:37.463

啊，我已经有了答案……

206 正常工作，但检查状态码不足以确定传输结果。除了状态码之外，还应该检查 TransferError 是否为空。

# java - Java中的信号量。为什么第二个线程不等待？

> ID：11147682
> 
> 赞同：2
> 
> 时间：2012-06-21T22:24:07.997
> 
> 标签：java, multithreading, concurrency, semaphore

我有一个静态信号量实例。

```
 Semaphore semaphore = new Semaphore(1); 
```

现在我有两个线程（发送线程和接收线程）

发送线程：

```
public class SendingThread implements Runnable {

    private Semaphore semaphore;

    public SendingThread(Semaphore semaphore){
        this.semaphore = semaphore;
    }

    @Override
    public void run() {
        try {
            System.out.println("1");
            Thread.sleep(4000);
            this.semaphore.acquire();

        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
            e.printStackTrace();
        }   
    }
} 
```

和接收线程：

```
public class RecievingThread implements Runnable {

    private Semaphore semaphore;

    public RecievingThread(Semaphore semaphore){
        this.semaphore = semaphore;
    }
    @Override
    public void run() {
        System.out.println("2");
         this.semaphore.release();
            System.out.println("3");
    }
} 
```

当我根据我的理解启动这两个线程时，接收线程将**等待**4 秒，直到发送线程**通知** 它接收线程可以继续。这意味着 `System.out.println("3");`将延迟 4 秒打印，但是当我运行此代码时，所有三个值都会立即打印。为什么？

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:26:55.607

A`new Semaphore(1)`有**1 个初始许可证**，因此允许一个立即`acquire`通过。此外，由于*始终*`release`允许 a ，因此两个线程都立即进行。

 *要强制一件事先于另一件事发生，您可以使用`new Semaphore(0)`. 这将强制线程调用`acquire`等待*线程*执行`release`。*

# meteor - 在 Meteor 中创建与集合的关系

> ID：11147687
> 
> 赞同：3
> 
> 时间：2012-06-21T22:24:37.657
> 
> 标签：meteor, handlebars.js

也许这种结构不适合 Meteor，或者我想错了。试图在 noSQL 数据库中建立这样的关系吗？

我有 Dropzone 和 Widget 集合。一个 Dropzone 可以有许多小部件，并且每个小部件可以存在于多个 dropzone 中。

我的问题是我似乎无法让 Handlebars 呈现过滤后的小部件列表。

我的 dropzone 模型

```
dropzone =
  _id: "area1-id"
  title: "Area 1" 
```

小部件模型（缩写）

```
widget =
  _id: "widget1-id"
  title: "My Widget"
  dropzones: ['area1-id', 'area2-id'] 
  # each widget stores an id of which dropzones it's associated with 
```

相关模板结构

```
{{#each dropzones}}
  <div class="dropzone span4">
    <h1>{{title}}</h1>
    <div class="widget-area">
      <div class="hotzone">
        {{#widgets _id}} # passing in the current dropzone id
        {{/widgets}}
      </div>
    </div>
  </div>
{{/each}} 
```

辅助函数

```
# returns the correct sets of widgets, but can't figure
# out how to make it render the widget partial
Handlebars.registerHelper 'widgets', (drop_id)->
  widgets = CC.Widgets.find(dropzones: drop_id)
  _.each widgets, (widget)->
    Template.widget(widget)  # this ends up being blank with no error 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T05:40:52.247

我认为你想要的看起来更像这样：

```
 <div class="hotzone">
    {{#each widgets}}
      {{> widget}}
    {{/each}}
  </div> 
```

帮手：

```
Template.foo.widgets = -> CC.Widgets.find(dropzones: this._id) 
```

这有帮助吗？

# ruby-on-rails - Ruby on Rails - 如何使一个剪辑小部件从一个帮助文件工作？

> ID：11147692
> 
> 赞同：0
> 
> 时间：2012-06-21T22:25:15.727
> 
> 标签：ruby-on-rails, ruby, haml, clippy-flash

我有一个包含以下代码的 app/helpers/application_helper.rb 文件：

```
 def clippy(text, bgcolor = "#ffffff")
    text.gsub!('"',"'")
    path_to_swf = "/flash/clippy/clippy.swf"
    html = <<-EOF
      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
              width="110"
              height="14"
              id="clippy" >
      <param name="movie" value="#{path_to_swf}"/>
      <param name="allowScriptAccess" value="always" />
      <param name="quality" value="high" />
      <param name="scale" value="noscale" />
      <param NAME="FlashVars" value="text=#{text}">
      <param name="bgcolor" value="#{bgcolor}">
      <embed src="#{path_to_swf}"
             width="110"
             height="14"
             name="clippy"
             quality="high"
             allowScriptAccess="always"
             type="application/x-shockwave-flash"
             pluginspage="http://www.macromedia.com/go/getflashplayer"
             FlashVars="text=#{text}"
             bgcolor="#{bgcolor}"
      />
      </object>
    EOF
    raw(html)
  end 
```

我正在尝试在 HTML 文件中使用它（我使用 HAML，所以它实际上是一个 HAML 文件），但我不确定我需要做什么才能实际调用上面的代码并呈现小剪辑小部件。

我有这个 HAML 代码来尝试呈现剪辑：

```
.clippy-container=clippy("hello","#ffffff") 
```

我在位于 app/views/my_file.html.haml 的文件中执行此操作

知道我需要做什么才能进行剪辑渲染吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:35:12.550

是不是有问题

```
app/views/my_file.html.haml 
```

难道不应该

```
app/views/some_controller/my_file.html.haml 
```

我试过你的代码，它工作正常！

# hadoop - 选择哪一个：Hadoop 自定义 jars、Hadoop Streaming、Pig 或 Mahout？

> ID：11147695
> 
> 赞同：2
> 
> 时间：2012-06-21T22:25:36.273
> 
> 标签：hadoop, mapreduce, apache-pig, mahout, hadoop-streaming

我正在开发一个 NLP 项目，该项目可以创建实体集并从大规模语料库中计算成对相似度。目前我正在使用**hadoop 流，并且已经在****Python**中实现了所有的映射器和减速器。由于该算法需要几轮 map-reduce，我使用 Shell 脚本来链接作业。

现在这是我的担忧以及接下来我想做的事情：

*   **[关注1]。作业链和作业控制**。链接 hadoop 流作业是有问题的。如果作业序列 (job1-job2-job3) 中的 job2 失败，我必须手动删除输出文件夹，调整启动作业的脚本文件并从中间重新运行作业序列。我真的希望找到一种更聪明的方法来做到这一点。由于我需要经常调整算法的参数和逻辑，我不想一次又一次地重复这些步骤。

*   **[关注 2]。速度和效率**。我认为很大一部分时间成本是用于将文本解析为数字以及这种完全没有必要的格式转换过程。在开发过程中输入和测试那些几乎重复的 Python 代码也需要花费很多时间。

*   **[关注3]。易于维护和分发**。随着项目越来越大（我有超过 20 个 map-reduce 工作），它确实需要将整个项目模块化。我想让它面向对象，并使用IDE来开发和维护项目，这样可以更自如地处理各种内部数据结构和格式。而且我想将我的项目作为一个包分发，以便其他人可以从中受益。我需要一种简单的方法将整个项目导入 IDE 并使其易于分发。

我对解决方案的可能性进行了一些研究：

*   **备选方案 1\. Hadoop 自定义 jar**：似乎最好的方法是将整个项目转换为 java - 一个 hadoop 自定义 jar。这可能会解决所有问题，包括作业链接、效率和维护问题。但这可能需要相当长的时间，而且我已经找到了一种进行高效调试的方法。

*   **备选方案 2\. Pig**：我发现[这个问题](https://stackoverflow.com/questions/6873077/streaming-or-custom-jar-in-hadoop)的答案对于确定何时（不）使用 pig 非常有帮助。在回答中，Arun_suresh 说如果“您需要在 Map/reduce 函数中进行一些非常具体的计算……那么您应该考虑部署自己的 jars”。我的工作包括 shingling、hashing、min-hashing、permutation 等。可以使用 Pig Latin 实现吗？有没有什么地方可以让我了解 Pig Latin 程序的计算复杂程度？

*   **备选方案 3\. Mahout**：我发现新发布的[Apache Mahout](http://mahout.apache.org/)版本有几个功能与我正在做的重叠，但它不能替代我的工作。我应该将我的项目建立在 Mahout 上吗？

由于我基本上是一个人完成这项工作，并且只有大约 2 周的时间预算来完成整个家政工作，大约 1 个月的时间来改进它，我真的需要找到一个高效可靠的方法来完成它。请帮我选择一种替代方案，或者告诉我您是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:48:52.070

*   关注点 1：考虑使用 OOZIE，您可以在“工作流”中定义整个作业链，其中包含许多操作（它们可以是 Map reduce 步骤、决策切换/连接）。

    每个操作都可以定义一个准备阶段，您可以在其中删除即将到来的输出文件夹。

    您还可以查看工作流发生故障的位置，并从该特定步骤重新运行工作流。

    OOZIE 文档有运行[流式](http://incubator.apache.org/oozie/docs/3.2.0-incubating/docs/WorkflowFunctionalSpec.html#a3.2.2.2_Streaming)作业的示例，还有一些[食谱示例（案例 7）](http://incubator.apache.org/oozie/map-reduce-cookbook.html)

*   关注点 2：这是所有流式作业共享的问题，如果您想要获得最佳性能，您要么需要咬住 Java 子弹，要么寻找可以处理二进制格式的替代流输入/输出格式（例如 AVRO），并且您将需要一些知道如何处理这些的自定义映射器/减速器流包装器。

*   关注点 3：使用流式传输，您可以将所有 python 脚本捆绑到一个 tarball 中，并让 hadoop 将 tarball 解压到每个任务节点。这是 DistributedCache 归档功能的一个功能（在 OOZIE 中，这是在 map-reduce 操作的归档元素中定义的 - 请参阅上一个 OOZIE 食谱链接中的案例 6）

# sql - 什么样的数据模型对函数参数和结果进行建模？

> ID：11147703
> 
> 赞同：0
> 
> 时间：2012-06-21T22:26:05.667
> 
> 标签：sql, datamodel

下表...：

```
CREATE TABLE v (
    height int,
    width int,
    depth int,
    volume int,
    PRIMARY KEY (height, width, depth);
) 
```

... 可用于存储名为 volume: 的 3 个变量的函数的输入和输出`volume(height, width, depth) = height * width * depth`。

我在这里使用什么样的数据模型？是实体-属性-值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:57:20.127

你似乎是数学导向的。当 Codd(Date) 引入关系模型时，他（他们）将现有的数学语言重塑到了新的领域。

在您的情况下： value 可能是三个参数的函数：`val = f(h,w,d)`. 但是对于“关系”（数据库表），情况略有不同：仅当 {h,w,d} 实际存在于表中时才定义该函数。在数学中，函数是在整个 R3 域上定义的。在关系代数中，表的键 ({h,w,d}) 是在更受限制的域（或一组域的乘积）上定义的。大多数 DBMS/SQL 世界都涉及这些限制。（约束、域约束等） UNIQUE 约束可能是最基本的约束：它保证最多有一个具有特定 {h,w,d} 的元组。结果只有一个函数*值*. DBMS 人称关系的非键字段在 FK 上“功能依赖”（{h,w,d}}：给定一组键，最多可以有一行对应于它（最多一个“功能价值”）

EAV 只是一类数据模型，用于“模拟”一个对象具有可变数量的属性，而不更改所涉及的表的定义。但是，在表级别上，它只是意味着添加一个带有属性和值的额外表（实际上是两个表）。数据建模只是变相的拓扑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:54:41.073

不，它不是 EAV 模型。您只是对矩形实体的尺寸进行建模，并选择存储体积。在现实世界中，您可能会包括测量单位和一些检查约束。

```
CREATE TABLE v (
    height_cm int not null check (height_cm > 0),
    width_cm int not null check (width_cm > 0),
    depth_cm int not null check (depth_cm > 0),
    volume_cm3 int not null check (volume_cm3 = height_cm * width_cm * depth_cm),
    PRIMARY KEY (height_cm, width_cm, depth_cm)
); 
```

（我曾经与一个必须处理关系 db/XML/XSLT 怪物问题的人一起工作，该怪物是由一个组织不善的委员会设计的。除其他外，它部分根据一个容器中可以容纳多少个容器来计算运输成本。火车车厢。用户很快发现他们可以通过简单地给每个包裹的一个维度指定一个负数来节省运输成本。）

如果删除列“volume_cm3”，则该表显然是 5NF。（根本没有非键属性。）但是如果你包括列“volume_cm3”及其约束，这是什么正常形式？还在5NF吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T03:43:14.827

您显示的 V 表只是一个表。它有一个由 3 部分组成的键和一个数据列，完全依赖于键。成交量是通过使用关键中的三个度量（可能还有其他一些度量）的公式得出的。Volume 的功能依赖是三部分的关键。它不是一个属性值对。它也不违反任何正常形式。它只是一个具有三部分键和一个数据列的派生表。这个问题有可能想得太多。

# android - 如何在没有“setContentView（R.layout.main）”的情况下创建活动

> ID：11147704
> 
> 赞同：11
> 
> 时间：2012-06-21T22:26:06.623
> 
> 标签：android, layout, views

我知道它可以通过执行以下代码来创建活动，其中视图不是从 xml 文件设置的，而是像这样： setContentView(new myView(this));

我不明白的是如何使用这段代码，但仍然可以自定义它，例如，如果我想在下面的代码中添加一个按钮，我该怎么做，因为我不能简单地将一个按钮添加到 xml布局可以吗？

任何好的答案都将非常感谢提前感谢！

```
package com.faceapp;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.PointF;
import android.media.FaceDetector;
import android.media.FaceDetector.Face;
import android.os.Bundle;
import android.view.View;

 public class FaceappActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.main);
        setContentView(new myView(this));
    }

    private class myView extends View{

     private int imageWidth, imageHeight;
     private int numberOfFace = 5;
     private FaceDetector myFaceDetect; 
     private FaceDetector.Face[] myFace;
     float myEyesDistance;
     int numberOfFaceDetected;

     Bitmap myBitmap;

    public myView(Context context) {
   super(context);
   // TODO Auto-generated constructor stub

   BitmapFactory.Options BitmapFactoryOptionsbfo = new BitmapFactory.Options();
   BitmapFactoryOptionsbfo.inPreferredConfig = Bitmap.Config.RGB_565; 
   myBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.face5,   
      BitmapFactoryOptionsbfo);
   imageWidth = myBitmap.getWidth();
   imageHeight = myBitmap.getHeight();
   myFace = new FaceDetector.Face[numberOfFace];
   myFaceDetect = new FaceDetector(imageWidth, imageHeight, numberOfFace);
   numberOfFaceDetected = myFaceDetect.findFaces(myBitmap, myFace); 

  }

  @Override
  protected void onDraw(Canvas canvas) {
   // TODO Auto-generated method stub

            canvas.drawBitmap(myBitmap, 0, 0, null);

            Paint myPaint = new Paint();
            myPaint.setColor(Color.GREEN);
            myPaint.setStyle(Paint.Style.STROKE); 
            myPaint.setStrokeWidth(3);

            for(int i=0; i < numberOfFaceDetected; i++)
            {
             Face face = myFace[i];
             PointF myMidPoint = new PointF();
             face.getMidPoint(myMidPoint);
    myEyesDistance = face.eyesDistance();
             canvas.drawRect(
               (int)(myMidPoint.x - myEyesDistance),
               (int)(myMidPoint.y - myEyesDistance),
               (int)(myMidPoint.x + myEyesDistance),
               (int)(myMidPoint.y + myEyesDistance),
               myPaint);
            }
  }
    }
} 
```

^^^^^^^^^^^^^^^ 已回答

如何定位按钮和图像视图？（理想情况下使用相对布局）下图向您展示了我的意思：（忽略图像已重新调整大小）

![在此处输入图像描述](../Images/5034f70d820b5fb19fe0ea720bb65816.png) 新代码：

```
package com.test;
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.PointF;
import android.media.FaceDetector;
import android.media.FaceDetector.Face;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;

public class TesttActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        LinearLayout layout = new LinearLayout(this);
        Button button = new Button(this);
        button.setText("Button!");
        layout.addView(button);

        myView custom = new myView(this);
        layout.addView(custom);

        setContentView(layout);
    }

    private class myView extends View{

        private int imageWidth, imageHeight;
        private int numberOfFace = 5;
        private FaceDetector myFaceDetect; 
        private FaceDetector.Face[] myFace;
        float myEyesDistance;
        int numberOfFaceDetected;

        Bitmap myBitmap;

       public myView(Context context) {
      super(context);
      // TODO Auto-generated constructor stub

      BitmapFactory.Options BitmapFactoryOptionsbfo = new BitmapFactory.Options();
      BitmapFactoryOptionsbfo.inPreferredConfig = Bitmap.Config.RGB_565; 
      myBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.face5,   
      BitmapFactoryOptionsbfo);
      imageWidth = myBitmap.getWidth();
      imageHeight = myBitmap.getHeight();
      myFace = new FaceDetector.Face[numberOfFace];
      myFaceDetect = new FaceDetector(imageWidth, imageHeight, numberOfFace);
      numberOfFaceDetected = myFaceDetect.findFaces(myBitmap, myFace); 

     }

     @Override
     protected void onDraw(Canvas canvas) {
      // TODO Auto-generated method stub

               canvas.drawBitmap(myBitmap, 0, 0, null);

               Paint myPaint = new Paint();
               myPaint.setColor(Color.GREEN);
               myPaint.setStyle(Paint.Style.STROKE); 
               myPaint.setStrokeWidth(3);

               for(int i=0; i < numberOfFaceDetected; i++)
               {
                Face face = myFace[i];
                PointF myMidPoint = new PointF();
                face.getMidPoint(myMidPoint);
       myEyesDistance = face.eyesDistance();
                canvas.drawRect(
                  (int)(myMidPoint.x - myEyesDistance),
                  (int)(myMidPoint.y - myEyesDistance),
                  (int)(myMidPoint.x + myEyesDistance),
                  (int)(myMidPoint.y + myEyesDistance),
                  myPaint);
               }
     }
       }
   } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-21T22:29:22.630

您可以传递 setContentView() 任何形式的视图，作为布局的根视图。下面是一个动态构建的 LinearLayout，带有一个 Button 和您的`myView`.

```
public class Example extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        LinearLayout layout = new LinearLayout(this);
        // Define the LinearLayout's characteristics
        layout.setGravity(Gravity.CENTER);
        layout.setOrientation(LinearLayout.VERTICAL);

        // Set generic layout parameters
        LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        Button button = new Button(this);
        button.setText("Button!");
        layout.addView(button, params); // Modify this

        myView custom = new myView(this);
        layout.addView(custom, params); // Of course, this too

        setContentView(layout);
    }
} 
```

了解如果您将 setContentView() 传递给 ViewGroup，则只能将子视图添加到根视图；比如RelativeLayout、LinearLayout等。换句话说，你**不能**这样做：

```
 myView custom = new myView(this);

        Button button = new Button(this);
        button.setText("Button!");

        custom.addView(button); 
        // Nope! Method "addView()" does not exist for a regular View...

        setContentView(custom); 
```

此外，命名约定建议类名中的每个单词的首字母大写。所以`myView`应该是这样`MyView`，至少它可以让其他程序员更容易阅读你的代码，并且编译器会用正确的颜色突出显示你的类变量。

# google-chrome - 多处理数据共享

> ID：11147706
> 
> 赞同：0
> 
> 时间：2012-06-21T22:26:23.503
> 
> 标签：google-chrome, ipc, multiprocessing

我想知道 Google Chrome 的多进程架构是如何工作的。据我了解，有一个流程可以渲染所有内容，并且每个页面都有一个与之关联的附加流程。我的问题是，如果一个页面加载了 100MB 的图片，它如何将它传递给渲染器进程？

换句话说，将数据从一个进程传递（复制？）到另一个进程的最快方法是什么？

换句话说，如果一个进程产生了 100MB 的数据，如何让另一个进程读取呢？（请注意，数据是在进程分叉后产生的）。

**编辑**：如果子进程创建数据而父进程事先不知道数据的大小，如何将数据从子进程传递给父进程？我的意思是，“共享内存块”必须由父级创建，对吗？那么父母知道多少空间要分配呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:01:18.463

它的通用名称是 IPC - 进程间通信。 [http://en.wikipedia.org/wiki/Inter-process_communication](http://en.wikipedia.org/wiki/Inter-process_communication)

现在我不知道 chrome 是如何实现它的，但我希望你能明白。如果我必须选择一个，我会说内存共享或管道，但它可能（几乎）是其中任何一个。

# ruby - Sinatra 'hello world' 中的错误

> ID：11147707
> 
> 赞同：3
> 
> 时间：2012-06-21T22:26:27.353
> 
> 标签：ruby, linux, sinatra

做 Sinatra 的[入门](http://www.sinatrarb.com/intro)。我收到此错误：

```
./sinatra.rb:5: undefined method `get' for main:Object (NoMethodError)
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from sinatra.rb:3 
```

谷歌搜索这些错误会返回[ruby​​ LoadError: cannot load such file](https://stackoverflow.com/questions/9154365/ruby-loaderror-cannot-load-such-file)我看不出它与`Sinatra`.

不知道我需要分享哪些其他信息才能使我的问题更清楚。因此，只需告诉我应该运行哪些其他命令来明确问题。

**更新：**实际代码

```
# sinatra.rb
require 'rubygems'
require 'sinatra'

get '/' do
        'hey girl'
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T23:38:42.057

这里的问题是由于你命名你的文件`sinatra.rb`。当你运行那个文件时，它做的第一件事就是`require 'sinatra'`，因为当前目录在 Ruby 1.8.7 的加载路径上，它会尝试加载*自己*。然后它会调用`get '/' do ...`，但由于尚未加载真正的 Sinatra，因此会导致错误。

解决方法是将文件重命名为 以外的名称`sinatra.rb`，您可以`myapp.rb`按照链接到的页面中的建议使用。

# postgresql - 基于postgres中不同的2个字段选择行

> ID：11147708
> 
> 赞同：1
> 
> 时间：2012-06-21T22:26:31.373
> 
> 标签：postgresql, select, distinct

我有表格消息

```
| id | user_id | recepient_id | message
| 1  |    1    |      2       | test1
| 2  |    1    |      2       | test2
| 3  |    2    |      1       | test3
| 4  |    3    |      1       | test4
| 5  |    3    |      2       | test5 
```

我是 id 为 1 的用户，想选择我所在的行是 user_id 或 recepient_id（但每个 user_id/recepient_id 对只有 1 行）。在这个例子中，我想选择带有 ids 的消息 - 2、4（或 1、4 或 2、3 或 2、4。没关系。只需获取 user_id/recepient_id 的 uniq 对）

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:39:15.057

```
select distinct on (least(user_id, recipient_id), greatest(user_id, recipient_id))
    id, user_id, recipient_id, message
from the_table
where user_id = 1 or recipient_id = 1 
```

# mysql - IFNULL 和 IF 的区别

> ID：11147710
> 
> 赞同：0
> 
> 时间：2012-06-21T22:26:37.077
> 
> 标签：mysql

以下两种说法是否有区别：

```
mysql> EXPLAIN SELECT IF(arms IS NULL, 'asdf', arms) FROM limbs;
+----+-------------+-------+------+---------------+------+---------+------+------+-------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra |
+----+-------------+-------+------+---------------+------+---------+------+------+-------+
|  1 | SIMPLE      | limbs | ALL  | NULL          | NULL | NULL    | NULL |   12 |       |
+----+-------------+-------+------+---------------+------+---------+------+------+-------+
1 row in set (0.00 sec)

mysql> EXPLAIN SELECT IF(arms IS NULL, 'asdf', arms) FROM limbs;
+----+-------------+-------+------+---------------+------+---------+------+------+-------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra |
+----+-------------+-------+------+---------------+------+---------+------+------+-------+
|  1 | SIMPLE      | limbs | ALL  | NULL          | NULL | NULL    | NULL |   12 |       |
+----+-------------+-------+------+---------------+------+---------+------+------+-------+
1 row in set (0.00 sec) 
```

一个性能更好还是比另一个更好？还是它们相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:28:07.870

`IFNULL`只是ANSI SQL 的[语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)，`IF`它是 ANSI SQL 的语法糖`CASE`。

因此，请使用您更喜欢的，以及适合您特定需求的。

PS：`EXPLAIN`不依赖`SELECT`

# vb.net - 你能对 DayOfWeek 枚举进行排序吗

> ID：11147715
> 
> 赞同：0
> 
> 时间：2012-06-21T22:27:12.880
> 
> 标签：vb.net, enumeration, dayofweek

我试图弄清楚 DayOfWeek 枚举列表是否可以使用整数值（即星期日 = 0）进行排序。最终，我想获取 DayOfWeek 枚举列表并使用从星期日到星期一的星期几填充下拉列表，并且我不想对 HTML 标记中的项目进行硬编码。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:40:33.423

所以你想将[`DayOfWeek`枚举](http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx)绑定到一个`DropDownList`？

这应该可以工作，尽管我不会像`DataSource`DropDownList 那样使用枚举：

```
Dim days = From d In Enumerable.Range(0, 7)
            Select New With {
                .DayName = [Enum].GetName(GetType(DayOfWeek), d),
                .DayNumber = d
            }
Me.DdlDays.DataSource = days
Me.DdlDays.DataTextField  = "DayName"
Me.DdlDays.DataValueField = "DayNumber"
Me.DdlDays.DataBind() 
```

默认情况下按整数值排序，因此它以`Sunday`. 您可以使用`Order By`.

# bash - 如何在 echo 语句中包含 bash 命令行参数

> ID：11147717
> 
> 赞同：0
> 
> 时间：2012-06-21T22:27:17.730
> 
> 标签：bash, escaping

我正在编写一个脚本，询问用户几个选项，然后通过一系列 echo 语句创建并写入一个单独的脚本文件。该脚本在执行时还将依赖于至少一个命令行参数。

鉴于原始陈述

```
if [ "` echo $1 | egrep ^[[:digit:]]+$`" = "" ] 
```

确定第一个参数 ( `$1`) 是否为整数，如何在保持命令行参数访问的同时将其包含在要写入新文件的 echo 语句中？

我试图逃避双引号和美元符号，如

```
echo "if [ \"` echo \$1 | egrep ^[[:digit:]]+\$`\" = \"\" ]" >> generatePanos 
```

但这只是导致

```
if [ "" = "" ] 
```

但是，`echo "\$1"`结果`$1`会打印在文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:35:17.683

由于您使用的是 bash，因此可以使用 bash 的内置正则表达式：

```
if [[ $1 =~ ^[[:digit:]]+$ ]]; then 
   ...
fi 
```

即使没有 bash 的内置正则表达式，也不需要测试命令 ( [ )，或者`echo`：

```
if grep -q -E '^[[:digit:]]+$' <<< "$1"; then
   ...
fi 
```

如果这也必须在 bash 以外的 shell 上工作，那么您可以保留`echo`：

```
if echo "$1" | grep -q -E '^[[:digit:]]+$'; then
   ...
fi 
```

最后两个工作，因为`if`测试命令的退出状态。如果未找到匹配项，则该`grep`命令返回非零值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:33:55.430

在每个违规字符前加一个反斜杠： echo if [ \"` echo $1 \| egrep ^[[:digit:]]+$`\" = \"\" ]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:35:27.023

我不完全确定您的意思，但是您可以尝试以下两件事：

如果您尝试按原样打印整行（包括`$1`），请使用单引号告诉`echo`不要解释任何内容：

```
$ echo 'if [ "` echo $1 | egrep ^[[:digit:]]+$`" = "" ]'
if [ "` echo $1 | egrep ^[[:digit:]]+$`" = "" ] 
```

如果您尝试打印整行但用当前值替换`$1`：

```
$ echo "if [ \"\` echo $1 | egrep ^[[:digit:]]+\$\`\" = \"\" ]"
if [ "` echo <<some value>> | egrep ^[[:digit:]]+$`" = "" ] 
```

如果您尝试替换反引号中的整个命令部分（使用 的当前值评估`$1`），最好使用中间变量：

```
temp=$(echo $1 | egrep ^[[:digit:]]+$)
echo "if [ \"$temp\" = \"\" ]" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-21T22:39:02.570

echo "\$1" 应该完全按照您所说的去做。
要回显“1”的内容，然后回显 $1（不带反斜杠）。
在 bash 脚本中使用变量时，最好将它们加双引号（echo "$1"、func_name "$1" 等）或转义它们（echo "${1}"）。

至于第一部分，您是否要将整个“if”语句回显到文件中？这就是它的样子。如果没有，那么你应该这样做：

```
if [ conditions ]; then echo "$1" >> $filename 
```

# c++ - opencv中findChessboardCorners（）的结果不一致

> ID：11147721
> 
> 赞同：2
> 
> 时间：2012-06-21T22:27:31.057
> 
> 标签：c++, image-processing, opencv

我正在使用 OpenCV 编写 C++ 代码，我试图检测图像上的棋盘（从 .jpg 文件加载）以扭曲图像的视角。当 findChessboardCorners() 找到棋盘时，我的其余代码运行良好。但有时该函数没有检测到模式，这种行为似乎是随机的。

例如，有一个图像可以在其原始分辨率 2560x1920 上运行，但如果我首先使用 GIMP 将其缩小到 800x600，则不会。然而，另一幅图像似乎相反：在原始分辨率下不起作用，但按比例缩小。

这是我的代码中进行检测的部分：

```
Mat grayimg = imread(argv[1], CV_LOAD_IMAGE_GRAYSCALE);
if (img.data == NULL) {
    printf("Unable to read image");
    return 0;
}
bool patternfound = findChessboardCorners(grayimg, patternsize, corners,
        CALIB_CB_ADAPTIVE_THRESH + CALIB_CB_FAST_CHECK);
if (!patternfound) {
    printf("Chessboard not found");
    return 0;
} 
```

opencv 中是否存在某种错误导致这种行为？是否有人对如何预处理图像有任何提示，以便该功能更一致地工作？

我已经尝试过使用参数 CALIB_CB_ADAPTIVE_THRESH、CALIB_CB_NORMALIZE_IMAGE、CALIB_CB_FILTER_QUADS 和 CALIB_CB_FAST_CHECK。当我传入彩色图像时，我也会得到相同的结果。

提前致谢

编辑：我正在使用 OpenCV 2.4.1 版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:08:40.927

我很难让 findChessboardCorners 工作，直到我在棋盘周围添加了一个白棋盘。

我在最近的文档中发现了这一点。

在添加边框之前，有时无法识别键盘，但每次使用白色边框都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T01:22:54.110

实际上，请尝试删除 CALIB_CB_FAST_CHECK 选项，然后尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T12:19:57.233

欢迎来到真实世界的计算机视觉的乐趣:-)

您没有发布任何图像，并且 findChessboardCorners 有点太高级而无法调试。我建议在图像顶部显示（以八度音程、matlab 或更多 OpenCV 代码）检测到的角的位置，以查看是否检测到足够的角。如果没有，请尝试在图像上单独运行 cvCornerHarris。

有时问题的原因是图像的颗粒过多：尝试模糊一点，看看是否有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-28T14:17:48.640

CALIB_CB_ADAPTIVE_THRESH + CALIB_CB_FAST_CHECK 与 CALIB_CB_ADAPTIVE_THRESH | 不同 CALIB_CB_FAST_CHECK，你应该使用 | （二进制或）

# php - 使用ajax、jquery、json的数据返回值

> ID：11147724
> 
> 赞同：1
> 
> 时间：2012-06-21T22:27:37.353
> 
> 标签：php, jquery, mysql, ajax, json

拜托，你能帮我吗？我是编程初学者，所以如果这是一个愚蠢的问题，请耐心等待。谢谢你。

我有带有登录表单（用户名、密码）的 index.php 页面和带有这部分代码的 login.php：

```
<? if(!$_POST['username'] || !$_POST['password']){
$data['msg'] = 'All fields have to be filled!';
$data['success'] = false;}else{

mysql_query("   INSERT INTO log_access(user,ip,datetime)
                            VALUES(
                            '".$_POST['username']."',
                            '".$_SERVER['REMOTE_ADDR']."',
                            NOW()
                            )");

$row = mysql_fetch_assoc(mysql_query("SELECT id,login FROM users WHERE login='".$username."' AND pwd='".md5($password)."'"));

if($row['login'])
{
    $_SESSION['login'] = $row['login'];
    $_SESSION['id'] = $row['id'];

    $data['success'] = true;
    $data['redirect'] = "index.php";    
}
else 
{
    $data['success'] = false;
    $data['msg']='Wrong username or password!';
}}echo json_encode($data);?> 
```

如果我在用户名或/和密码中发送空字段，login.php 返回 $data。但是，如果我发送填充字段，则没有数据返回 index.php。我在 index.php 中有以下内容：

```
<script> 
    $(document).ready(function() 
            { 
                $('#frmLogin').submit(function() 
                { 
                    $.post('/scripts/login.php',{username: $('[name=username]').val(), password: $('[name=password]').val()}, function(data)
                        {
                            if(data.success)
                            {
                                $('#login-msg').html("Logged");
                            }
                            else
                            {
                                $('#login-msg').html(data.msg);
                            }
                        }
                        ,'json');
            return false; 
        }); 
            }); 
</script> 
```

如果我把任何东西放在第一个条件中，或者在它之前（在 login.php 中），我也会遇到同样的问题。我不知道，我做错了什么:(

感谢您的帮助！瓦沙

**编辑** 解决了！我从登录脚本到数据库的连接不好。初学者误区。感谢所有回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:47:06.403

你能检查一下 Firebug 的控制台，看看 POST 是否正在发生并且响应代码是 200 吗？您还可以检查正在检索的响应。

尝试使用以下内容调用 test.php：

```
<?
 if(!$_POST['username'] || !$_POST['password']){
$data['msg'] = 'All fields have to be filled!';
$data['success'] = false;
}else{
$data['success'] = true;
$data['redirect'] = "index.php";  
echo json_encode($_POST);
}
?> 
```

还要检查用户名和密码是否正确传递

```
alert( $('[name=username]').val() + | + $('[name=password]).val()); 
```

略高于 $.post。

我通过硬编码用户名和密码检查了你的 js，它们工作正常。分而治之通常是个好主意。对 login.php 页面的输入进行硬编码，然后先运行它，然后在其工作后将您的 $_POST 参数作为输入。这样你可以防止很多问题。

```
 ****Important Please ESCAPE ALL POST OR GET VARIABLES FOR MYSQL INSERT.
   Otherwise your scripts are vulnerable to SQL injections.
    ex: mysql_real_escape_string($_POST['username']);
    mysql_real_escape_string($_POST['password']);
Please ignore if you are already doing this! 
```

# jquery - Jquery.load(html) 不工作

> ID：11147728
> 
> 赞同：0
> 
> 时间：2012-06-21T22:27:52.543
> 
> 标签：jquery

我的 JSfiddle 在这里[http://jsfiddle.net/hhimanshu/VAAKf/3/](http://jsfiddle.net/hhimanshu/VAAKf/3/)

当我点击搜索时，它什么也没做，但是当我发出警报时，我得到了警报。

请让我知道可能出了什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T23:12:09.933

我有两个 jquery 函数，当我在顶部创建这个 jQuery 函数时，警报开始工作

```
// loading search page
$(function(){
    $("#search").click(function(){
        alert("hi");
    });
});

// animating slideshow on landing page
$(function(){
    $('#slides').slides({
        preload: true,
        pagination: true,
        preloadImage: '../static/img/loading.gif',
        play: 2000,
        pause: 1000,
        hoverPause: true
    });

    $('.slides_control').css({
        "height": "600px",
        "margin-right": "400px"
    });

    $('.pagination').hide('')
}); 
```

那是怎么工作的？我不知道。我需要订购电话吗？

# foreach - Simplexml（foreach 提供的参数无效）

> ID：11147732
> 
> 赞同：0
> 
> 时间：2012-06-21T22:28:19.497
> 
> 标签：foreach, simplexml, arguments

错误 = 警告：在第 168 行的 [path]/deals2.php 中为 foreach() 提供的参数无效

XML：[http ://www.freeimagehosting.net/2sjdd](http://www.freeimagehosting.net/2sjdd)

不知道我做错了什么。以前从来没有遇到过这个问题。

```
$xml = simplexml_load_file('http://api.yipit.com/v1/deals/?key=mykey&division=houston&format=xml');

foreach($xml->deals->list-item as $shortcut)
{
$title = $shortcut->{'title'};

echo $title;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T02:53:04.137

1.  您的 xml 中没有“交易”元素名称
2.  每个带有破折号“-”的元素名称都必须用 {'some-element'} 转义，因此即使 list-item 元素存在（它不存在），您也需要对其进行转义。[http://www.kombitz.com/2010/02/10/php-xml-problem-hyphen-in-the-element-name/](http://www.kombitz.com/2010/02/10/php-xml-problem-hyphen-in-the-element-name/)
3.  我将您的代码修改为

    foreach($xml->meta->code as $a) { echo $a; }

它工作得很好。试试我上面的建议，并尝试使用实际存在的元素。

顺便说一句，您的 XML 甚至没有正确的结构。那是什么

```
<response/> 
```

在那里做？？很多错误。:)

# php - 将xml产品加载到mysql db中，更新productid存在的位置，插入新的位置并删除db中的productid而不是xml

> ID：11147737
> 
> 赞同：1
> 
> 时间：2012-06-21T22:28:40.630
> 
> 标签：php, mysql, xml

我有一个动态产品 xml 文件，我需要从外部源加载并保存在 db 表中。现在我想保持包含当前产品的 xml 文件与表中的内容同步。所以我想确保我用 xml 和 db 表中的 ID 更新产品，插入新产品并删除那些在 db 表中过时的产品（它们不在 xml 文件中）请参阅
XML 文件映射 下面的插图

Productid->1 and product-name->book,
Productid->2 and Prouct-name->pen

现在下表

ID 姓名
1 本书
3 铅笔

现在我想用 xml 中的信息更新产品 ID 1，将 xml 中的产品 ID 2 插入表中，并从表中删除产品 ID 3，因为它在 xml 中找不到

请任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:17:43.953

由于您已经拥有所需流程的流程图，因此应该非常简单。

**我没有进行任何数据清理/转义，因为您可以根据自己的要求进行操作。**

`XML FILE: (save it as testFeed.xml)`

```
<?xml version="1.0" encoding="UTF-8"?>
<products>
    <product>
        <id>1</id>
        <name>book</name>
    </product>
    <product>
        <id>2</id>
        <name>pen</name>
    </product>
</products> 
```

`PHP Code:`

```
<?php
$xml = simplexml_load_file( 'testFeed.xml' );
$xpath = $xml->xpath( '//product' );

$feed = array();
foreach( $xpath as $node ) {
    $feed[(string)$node->id] = (string)$node->name;  // id is key, name is value
}

// delete all entries from table where the table entries are not in the xml
$sql = 'DELETE FROM `table` WHERE id NOT IN 
          (' . implode( ',', array_keys( $feed ) ) . ')';
$run = mysql_query( $sql, $link );

//Now, insert/update - USE MySQL's "INSERT ... ON DUPLICATE UPDATE" feature
foreach( $xpath as $key => $node ) {
    $sql = 'INSERT INTO `table` (id,name) VALUES ("'.$key.'","'.$node.'") 
              ON DUPLICATE KEY UPDATE name="'.$node.'";'
    $run = mysql_query( $sql, $link );
}
?> 
```

[MySQL INSERT ... ON DUPLICATE UPDATE](http://josephscott.org/archives/2011/02/mysql-insert-on-duplicate-and-multiple-rows/)示例在这里。

希望这可以帮助。

# asp.net-mvc - SqlBulkCopy WriteToServer 方法抛出无法访问目标表“[#tablename]”

> ID：11147738
> 
> 赞同：2
> 
> 时间：2012-06-21T22:28:41.040
> 
> 标签：asp.net-mvc, sqlbulkcopy

我正在执行来自 c# MVC3 的以下代码，但在 bulkCopy.WriteToServer 上出现错误“**无法访问目标表'[#tablename]'** ”

任何人都知道以下代码有什么问题。我去了几个解决方案，但在这里不起作用。

```
var uniqueID = Guid.NewGuid();
        AsclipeiousMembercode = AsclipeiousMembercode.Distinct().ToList();

        System.Data.DataTable datatable = new System.Data.DataTable();
        datatable.Columns.Add("Guid", uniqueID.GetType());
        datatable.Columns.Add("MemberCode");
        datatable.Columns.Add("DateCreated", DateTime.Now.GetType());

        var connectionString = Aurora.Customers.Data.Properties.Settings.Default.AuroraCustomerDBConnectionString;
        using (System.Data.SqlClient.SqlBulkCopy bulkCopy =
        new System.Data.SqlClient.SqlBulkCopy(connectionString, System.Data.SqlClient.SqlBulkCopyOptions.KeepIdentity))
        {
            var tableName = "[#MemberCode_TempTable_" + uniqueID.ToString().Replace("-", "") + "]";                
            var commandText = "CREATE TABLE " + tableName + " ([id] [int] IDENTITY(1,1) NOT NULL,[Guid] [uniqueidentifier] NOT NULL,[MemberCode] [nvarchar](max) NOT NULL,  [DateCreated] [datetime] NOT NULL)";

            Db.ExecuteCommand(commandText);
            Db.SubmitChanges();

            bulkCopy.DestinationTableName = tableName;
            bulkCopy.ColumnMappings.Add("Guid", "Guid");
            bulkCopy.ColumnMappings.Add("MemberCode", "MemberCode");
            bulkCopy.ColumnMappings.Add("DateCreated", "DateCreated");

            datatable = dbMemberCodeTempTable.ToDataTable();
            bulkCopy.WriteToServer(datatable);
        } 
```

# mysql - Mysql 从另一个表插入数组并用默认值填充其余部分

> ID：11147739
> 
> 赞同：0
> 
> 时间：2012-06-21T22:29:02.850
> 
> 标签：mysql, arrays, insert, temp-tables

这是我的问题：

我有一个`TRUST(id INT, trustlevel INT)`包含记录 (1, 5) 和 (2, 3) 的表。我还有一个包含 ids (1, 2, 3, 4, 5) 的数组。

我想要实现的是将数组中的所有 id 插入到一个临时表中，该临时表调用`PRESELECTED(id INT, trustlevel INT DEFAULT 10)`的方式是复制信任级别的 id 信任，而数组的其余部分接受默认值，即 10 in这个案例。所以最后 PRESELECTED 将有记录 (1, 5), (2, 3), (3, 10), (4, 10), (5, 10)。

我已经想出了如何从 TRUST 表中放置值，但我仍然坚持其余的：

```
CREATE TEMPORARY TABLE PRESELECTED (id INT, trustlevel INT DEFAULT 10);

INSERT INTO PRESELECTED (
  SELECT * FROM TRUST WHERE id IN (1, 2, 3, 4, 5)
) 
```

问题在于它只插入 1 和 2，因为 3、4 和 5 不在 TRUST 中

有什么快速的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:42:37.237

1.  在 ID 上添加唯一键（PK 或 UNIQUE KEY）

2.  首先插入来自 TRUST 的现有 id

    `INSERT INTO PRESELECTED SELECT id,trustlevel FROM TRUST WHERE id IN(1,2,3,4,5);`

3.  填写缺失的id

    `INSERT IGNORE INTO PRESELECTED (id) VALUES (1),(2),(3),(4),(5);`

# google-maps - 手机浏览器网站上的谷歌地图太小了

> ID：11147741
> 
> 赞同：8
> 
> 时间：2012-06-21T22:29:08.993
> 
> 标签：google-maps

我已将谷歌地图集成到我的网站。我使用了谷歌地图 API V3。在 Iphone 等手机上查看我的网站时，地图将无法使用。由于字体变得太小，很难看到，进一步放大地图时，字体大小会进一步减小。

在台式电脑上查看时，地图似乎可读，但我仍然对字体大小不满意，而且在 iphone 或任何手机浏览器上完全不可读。

我想解决的是，1）让地图看起来更大，尤其是通过增加字体大小。2）我想在我的地图上只显示街道名称而不是其他任何东西。3）我希望地图加载速度更快

或者有没有其他专门用于手机网站的谷歌地图API？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T01:20:29.900

我有同样的问题，我最终实施了我在这里找到的解决方案：[https ://sunpig.com/martin/2012/03/18/goldilocks-and-the-three-device-pixel-ratios/](https://sunpig.com/martin/2012/03/18/goldilocks-and-the-three-device-pixel-ratios/)

基本上，这篇文章探讨了物理像素和 CSS“像素”之间的区别。两者之间存在比例因子。它在大多数移动浏览器上的默认值似乎是您经常看到为桌面设计的页面在手机上看起来非常“缩小”且带有微小文本的原因。而且它似乎也导致无法读取谷歌地图！

当我将此 HTML 片段添加到我的“head”部分时，我的问题就消失了：

```
<meta name="viewport" content="width=device-width"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T00:26:10.973

1.  似乎这是 Google Maps API 尚不支持或未考虑到的功能。[这个论坛](http://productforums.google.com/forum/#!topic/maps/J9_D85PCfCI)

    的评论也是一样的。 显然街道标签被“烘焙到地图图块中”，因此无法实际更改字体大小/样式。[断开的链接 #2](http://productforums.google.com/forum/#!topic/mobile/Lp4cZLVVa-Q) *。

2.  关于您的第二个问题：
    如果您只想显示街道标签，我建议您通读[Google Maps API 的样式部分](https://developers.google.com/maps/documentation/javascript/styling)。浏览完此文档后，您会发现可以从向导[Broken link #4](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html) * 轻松获取 JSON，您可以将其添加到地图中。

    您所要做的就是将所有特征标签 Visibility 设置为 Off，“Road”除外。
    然后点击“Show JSON”，你应该会得到类似这样的东西：

Google Maps API v3 Styled Maps JSON：

```
[
 {
  featureType: "administrative",
  elementType: "labels",
  stylers: [
   { visibility: "off" }
  ]
 },
 {
  featureType: "landscape",
  elementType: "labels",
  stylers: [
   { visibility: "off" }
  ]
 },
 {
  featureType: "poi",
  elementType: "labels",
  stylers: [
   { visibility: "off" }
  ]
 },
 {
  featureType: "transit",
  elementType: "labels",
  stylers: [
   { visibility: "off" }
  ]
 },
 {
  featureType: "water",
  elementType: "labels",
  stylers: [
   { visibility: "off" }
  ]
 },
 {
  featureType: "road",
  stylers: [
   { visibility: "on" }
  ]
 }
] 
```

这是向导还提供 [的生成地图的静态图像。](http://maps.googleapis.com/maps/api/staticmap?center=43.644103,-79.377015&zoom=16&format=png&sensor=false&size=640x480&maptype=roadmap&style=feature:administrative|element:labels|visibility:off&style=feature:landscape|element:labels|visibility:off&style=feature:poi|element:labels|visibility:off&style=feature:transit|element:labels|visibility:off&style=feature:water|element:labels|visibility:off&style=feature:road|visibility:on)

* * *

# * 来自评论：

截至 2017 年，链接 #2 和 #4 已损坏...

# php - PHP/MySQL 自用户上次登录以来的显示时间

> ID：11147746
> 
> 赞同：1
> 
> 时间：2012-06-21T22:29:17.997
> 
> 标签：php, mysql, date, time

我不知道我应该在数据库中存储什么样的值。

我想我应该做这样的事情，但我不知道如何：

存储自给定日期（如 2000 年 1 月 1 日）以来的年、日、小时、分钟然后在另一时间，我将该值与自 2000 年 1 月 1 日以来的当前年、日、小时和分钟进行比较。显然，两者之间的差异将是自用户上次登录以来的时间。

我感谢任何人可以提供的任何帮助。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:37:23.240

`mysql`会为你做这件事。它将存储自 1970 年 1 月 1 日以来的秒数。并计算差值。

试试这个：`SELECT NOW();`。您将看到现在的日期/时间。尝试一下`SELECT UNIX_TIMESTAMP(NOW());`，您会看到自 Epoch 以来的秒数（但您通常不需要）。

您应该在每次用户登录时存储此值，这意味着将 now() 插入表或更新 last_login 字段。

你有两个选择：

`INSERT INTO user_login_history (user_id, login_date) VALUES (1, NOW());`

和

`UPDATE users SET last_login=NOW() WHERE user_id=1;`

请注意，`last_login`and`login_date`字段必须是`DATETIME`类型（存储日期和时间）或`TIMESTAMP`或`DATE`（仅日期）或`TIME`（仅时间）。

此外，您可以使用 mysql 在 mysql 中进行时间计算`DATEDIFF`，如下所示：

`SELECT NOW(), DATEDIFF(NOW(), DATE('2012-6-5'));`

在你的餐桌上，`SELECT DATEDIFF(NOW(), last_login) AS "days_since_last_login" FROM users;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T22:31:39.577

为什么不直接使用 TIMESTAMP 或 DATETIME？这就是你所需要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T22:32:31.647

您可以存储上次登录的时间戳，然后进行算术运算。也许你应该看看 DateTime::diff 方法让 PHP 做一些困难的数学;-)

# .net - 从配置文件中读取的正确方法是什么？

> ID：11147752
> 
> 赞同：0
> 
> 时间：2012-06-21T22:29:42.620
> 
> 标签：.net, web-config, app-config

我认为，我们正在这样做，有 4 种不同的方式。我们应该使用的官方正确方法是什么？

1.  我们的一些代码是用于 Web 应用程序、表单、应用程序、Silverlight 等的商业库。所以我们在其中使用的方法必须适用于所有这些情况。
2.  我们是 .NET 3.5（因为作为商业库，我们必须在 .NET 2.0 上运行）。

？？？- 谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:39:04.527

来自[msdn](http://msdn.microsoft.com/en-us/library/system.web.configuration.webconfigurationmanager.aspx)：

> 使用 WebConfigurationManager 是处理与 Web 应用程序相关的配置文件的首选方式。对于客户端应用程序，请使用 ConfigurationManager 类。

# ruby - 使用 Thin 调用时，如何在加载路径中获取我的 ruby 源？

> ID：11147753
> 
> 赞同：0
> 
> 时间：2012-06-21T22:29:45.080
> 
> 标签：ruby, sinatra, rack, thin

我正在使用 Thin、Sinatra 和 Bundler 的组合。我试图了解如何让 Thin 将源代码的路径包含在加载路径中？我一直在寻找此设置的介绍性教程，但似乎没有一个能回答我的问题。

乱用 rackup 文件或 Thin 配置文件感觉不对。假设我有一个目录结构，例如：

```
bin/my-application-entry.rb # The entry point to my sinatra application
lib/myapp/mylibs.rb
thin/config.ru # rackup config
thin/dev.yaml  # thin config
Gemfile        # for my dependencies 
```

rackup 文件的内容本质上是

```
require 'sinatra'
# I'd like to require 'my-application-entry' around here somewhere (I think?)
run Sinatra.application 
```

我调用应用程序

```
thin -C thin/dev.yaml -R thin/config.ru start 
```

我注意到 thin 需要一个命令行参数来要求一个特定的库，但肯定有一个更好的地方可以定义所有的加载路径？

所以我的问题是，我如何告诉 Thin/rack/bundle 包含哪些目录？（如 bin/ 和 lib/）

编辑：为了清楚起见，我真的很想知道这通常是如何专门用 Thin 完成的。我不愿意在我的主应用程序中修改 $:，但如果我被迫使用 $:，那么最好的地方是哪里（在 Thin/Rack/Sinatra 环境中）这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:47:24.860

$: 是描述加载路径的全局变量，表示为一个数组。您可以添加“。”，然后如果您愿意，请消除重复项，如下所示：

```
$:.unshift(".").uniq! 
```

或者你可以将它推到列表的末尾：

```
$:.push(".").uniq! 
```

它通常默认被忽略，因为它是一个潜在的安全隐患。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T15:52:19.460

我想知道同样的事情。我会告诉你我在做什么，并试图证明它的合理性。也许在写这篇文章的过程中，我会想出一些东西。

我现在决定添加到`$LOAD_PATH`in `config.ru`，因为我正在使用`config.ru`它作为我的应用程序的入口点。我可以侥幸逃脱，因为我打算将此文件保留在项目的根目录中。我不喜欢做这个假设，但现在看起来很安全。当然，我会留下评论说“Ew。假设此文件是应用程序的唯一入口点，并且它将始终位于项目的根目录中。”

我之所以选择这个是因为我想`$LOAD_PATH`在调用堆栈中添加到尽可能高的位置（依赖倒置原则），但是在运行应用程序的命令中这样做（在生产中`Procfile`运行`thin`；在开发中运行的命令行`shotgun`）会复制我的目录想要添加到加载路径。我是否将此重复归类为必要（值得删除）或巧合（值得重复）？现在，它看起来像是应用程序的一个重要方面，至少在我决定组织它的时候，因为应用程序将各种服务集成到一个请求/响应/路由引擎中。此外，`config.ru`描述应用程序，因此将其视为应用程序是有意义的。

如果情况发生变化并且我注意到我希望`$LOAD_PATH`在开发中与在生产中有所不同，那么我会将目录从调用堆栈向上移动到运行的命令中`config.ru`。

我对这个选择感到满意，不是因为我认为这是“正确的选择”，而是因为我认为我知道如何以及为什么会改变主意。对我来说已经足够好了。

我希望这有帮助。

# html - 使用 Html 5 捕获麦克风并使用 socket.io 广播

> ID：11147755
> 
> 赞同：10
> 
> 时间：2012-06-21T22:29:55.517
> 
> 标签：html, webkit, websocket, socket.io, audio-capture

我目前正在开发带有白板、视频/音频会议的虚拟教室。如何使用 HTML5、Javascript 捕获麦克风。如何从麦克风创建 base64 编码字符串？我已经从标签捕获视频图像并在画布上绘制并接收 base64 编码字符串并向所有学生及其作品广播。音频标签也有类似的方法吗？我想使用 socket.io 向全班广播老师的麦克风声音。我找到了许多教程，但每个人都解释了视频而不是音频:(。我使用的是 Chrome -v 21 并且能够使用 webkit。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T00:42:49.010

[Stream API](http://dev.w3.org/2011/webrtc/editor/webrtc.html)应该允许您执行此操作，但不幸的是，任何当前（稳定的）浏览器[都不支持它。](http://dev.w3.org/2011/webrtc/editor/webrtc.html)您可以下载[Google Chrome 的每晚版本，](https://chrome.google.com/webstore/detail/akabngbddgpigiemjhkblleffkbpmpfc)其中肯定包含对 API 的一些支持，但我不确定它的完整程度。

我猜在节点的插件开始出现以帮助在服务器端处理这些东西之前应该不会太久，但同时以下可能有用：

1.  [将音频从 Node.js 服务器流式传输到 HTML5 标记](https://stackoverflow.com/questions/3955103/streaming-audio-from-a-node-js-server-to-html5-audio-tag)
2.  [用于解析和/或将元数据注入 SHOUTcast/Icecast 无线电流的 Node.js 模块。](https://github.com/TooTallNate/node-icecast-stack)
3.  [使用 Firefox Audio Data API + Node.js + WebSocket + Redis Pub/Sub 流式传输音频](https://github.com/kulikala/AudioStream)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:12:00.273

更新： [http ://code.google.com/p/chromium/issues/detail?id=112367](http://code.google.com/p/chromium/issues/detail?id=112367)

这个问题正在解决，使其在 Windows 平台上也很稳定，但在 Mac 上工作。

# android - Android TCP客户端在TextView中读取套接字

> ID：11147759
> 
> 赞同：1
> 
> 时间：2012-06-21T22:30:03.157
> 
> 标签：android, tcpclient

我正在为 Android 设备开发 TCPclient。我可以连接到服务器，并且可以跟踪我从服务器接收到的消息。我想在客户端 GUI 上显示服务器发送的结果`TextView textview_textin`

你能帮我做吗

非常感谢

```
public class JssclientActivity extends Activity {
private EditText serverIp;

private Button connectPhones;

private String serverIpAddress = "192.168.0.2";

private boolean connected = false;

private TextView textview_textin;

public class ClientThread implements Runnable {

    public void run() {
        try {

            InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
            Log.d("ClientActivity", "C: Connecting...");
            Socket socket = new Socket(serverAddr, 2600);
            connected = true;
            while (connected) {
                try {

                    BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                    String inMsg = "";
                    char buf[] = null;
                     int val = in.read();
                     while (-1 != val) {
                        inMsg = in.readLine();
                    }

                } catch (Exception e) {
                    Log.e("ClientActivity", "S: Error", e);
                }
            }
            socket.close();
            Log.d("ClientActivity", "C: Closed.");
        } catch (Exception e) {
            Log.e("ClientActivity", "C: Error", e);
            connected = false;
        }
    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    textview_textin = (TextView) findViewById(R.id.textin);
    connectPhones = (Button) findViewById(R.id.connect);

    connectPhones.setOnClickListener( new View.OnClickListener() {  
     @Override
     public void onClick(View v) {
         if (!connected) {
             //serverIpAddress = serverIp.getText().toString();
            if (!serverIpAddress.equals("")) {
                 Thread cThread = new Thread(new ClientThread());
                 cThread.start();
                }            
         }
     }
 });

}
} 
```

* * *

非常感谢您的回复

我可以连接到设备，但我什么也没收到。我不知道为什么？

这是我尝试过的，

```
 public class JssclientActivity extends Activity {
 private EditText serverIp;

 private Button connectPhones;

 private String serverIpAddress = "192.168.20.21";

private boolean connected = false;

 private TextView textview_textin;

 @Override
 protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);

  textview_textin = (TextView) findViewById(R.id.textin);
connectPhones = (Button) findViewById(R.id.connect);

ClientThread ct = new ClientThread(new ClientThread.SocketCallback() {
      public void onReceived(final String msg) {
        JssclientActivity.this.runOnUiThread(new Runnable() {
          @Override
          public void run() {
              textview_textin.setText(msg);
          }
        });
      }
    });

  }
 }

 class ClientThread implements Runnable {

interface SocketCallback {
  void onReceived(String msg);
}
private SocketCallback callback;

private boolean connected;

private Socket socket;

public ClientThread(ClientThread.SocketCallback cb) {
      this.callback = cb;
      try {InetAddress serverAddr = InetAddress.getByName("192.168.20.21");
      Log.d("ClientActivity", "C: Connecting...");
      //Socket
    socket = new Socket(serverAddr, 2600);
      connected = true;
      } catch (Exception e) {
          Log.e("ClientActivity", "C: Error", e);
          connected = false;
      }
    }

 public void run() {
      while (connected) {
          try {

              BufferedReader in = new BufferedReader(new        InputStreamReader(socket.getInputStream()));
              String inMsg = "";
              char buf[] = null;
               int val = in.read();
          //     while (-1 != val) {
           //       inMsg = in.readLine();
            //  }
               while (-1 != val) {
                  inMsg = in.readLine();
                  this.callback.onReceived(inMsg);
                }

          } catch (Exception e) {
              Log.e("ClientActivity", "S: Error", e);
          }
      }
    //  socket.close();
      Log.d("ClientActivity", "C: Closed.");

 }
 } 
```

请问你能帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:38:18.020

创建一个回调类，

```
interface SocketCallback {
  void onReceived(String msg);
} 
```

这可以是 的内部`ClientThread`，因为它们在逻辑上是相关的。这不是必需的，但它是很好的设计。

让您的`Runnable`类在其构造函数中接受此回调的实例。

```
public ClientThread(ClientThread.SocketCallback cb) {
  this.callback = cb;
} 
```

当你构建你的`Runnable`( `ClientThread`) 时，从你的 UI 类 ( `JssClientActivity`) 中这样做，就像这样，

```
ClientThread ct = new ClientThread(new ClientThread.SocketCallback() {
  public void onReceived(String msg) {
    JssClientActivity.this.runOnUiThread(new Runnable() {
      @Override
      public void run() {
        myTextView.setText(msg);
      }
    });
  }
}}; 
```

最后，在`ClientThread`，当你收到消息时，调用回调，

```
while (-1 != val) {
  inMsg = in.readLine();
  this.callback.onReceived(inMsg);
} 
```

请注意，您无法从运行 ClientThread 的线程更新 UI。它必须从 UI 线程更新，因此调用`runOnUiThread()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:35:34.387

您可以使用 TextView 的`setText()`方法设置 TextView 的文本。

例子：

```
textview_textin.setText(yourText) 
```

通过使用`runOnUiThread()`，您将能够访问您的 TextView。看到[这个答案](https://stackoverflow.com/a/7028229/1401510)。

# c++ - boost++::weighted_median 和 eigen::vectorXf --newbie

> ID：11147761
> 
> 赞同：4
> 
> 时间：2012-06-21T22:30:16.087
> 
> 标签：c++, boost, eigen

我想获得未排序的可变长度特征 c++ vectorXf 对象的 weighted_median。看来我可以使用 boost 的统计累加器库中的 boost weighted_median 函数来有效地做到这一点[？]。

从本质上讲，我正在尝试做一些与 [这里](https://stackoverflow.com/questions/5111304/is-boost-librarys-weighted-median-broken)所做的非常相似的事情。我不确定 boost 的累加器是这个任务的正确框架（如果不是，请建议！），但我还没有找到另一个现成的 O(n) 加权中位数的实现。

我现在的问题是，是否有办法用更优雅的构造替换下面的“for(int i=0;i<100;i++)”循环？

PS我已经看到[了这个](https://stackoverflow.com/questions/7908982/using-boost-accumulators-with-eigenvector-types)SO question，但目前还不清楚如何将答案转化为可操作的解决方案。

```
#include <Eigen/Dense>
#include <iostream>
#include <boost/accumulators/accumulators.hpp>
#include <boost/accumulators/statistics/stats.hpp>
#include <boost/accumulators/statistics/median.hpp>
#include <boost/accumulators/statistics/weighted_median.hpp>
using namespace boost::accumulators;    
using namespace Eigen;

int main(){
    accumulator_set<float, stats<tag::median > > acc1;
    accumulator_set<float, stats<tag::median >,int> acc2;

    VectorXi rw=VectorXi::Random(100);
    VectorXf rn=VectorXf::Random(100);

    rw=rw.cwiseAbs();
    for(int i=0;i<100;i++){
        acc1(rn(i));
        acc2(rn(i),weight=rw(i));
    }

  std::cout << "         Median: " << median(acc1) << std::endl;
  std::cout << "Weighted Median: " << median(acc2) << std::endl;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:54:37.040

您要做的是使用 boost 累加器在某种容器中累加值。您会注意到，即使传递`std::vector<float>`给累加器也行不通。累加器根本不应该以这种方式使用。当然，您可以使用累加器来累加向量值或矩阵值 - 但这不是您想要的。

您可以使用`std::for_each`来摆脱显式循环，仅此而已：

```
// median
using boost::bind;
using boost::ref;
std::for_each(rn.data(), rn.data()+rn.rows(), bind<void>( ref(acc1), _1 ) ); 
```

您链接到的[问题](https://stackoverflow.com/questions/7908982/using-boost-accumulators-with-eigenvector-types)在 Eigen3 的最新版本中不再相关。那里给出的代码运行良好并产生正确的结果。

# php - 扩展 MongoDB Connect 类

> ID：11147764
> 
> 赞同：0
> 
> 时间：2012-06-21T22:30:31.570
> 
> 标签：php, oop, mongodb

我希望将 MongoDB connectiontion 方法放入它自己的类中，但显然 new Mongo() 已经是一个类，那么我该怎么做呢？

```
 $conn = new Mongo;
    $db = $conn->thundergallery;
    $grid = $db->getGridFS();
    $file = $grid->findOne(array('unique_id' => $posted_id));
    echo $file->getBytes();
    exit;
    $conn->close();
}catch(MongoConnectionException $e){
    die('Error connecting to MongoDB server');
}catch(MongoException $e){
    die('Error: ' . $e->getMessage());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:50:56.477

您可以扩展类做如下的事情。如果您需要任何更深层次的实施提示，请将其添加到您的原始问题中:)

```
class MyMongo extends Mongo {
    public function myMethod() {
        return 'whatever';
    }
}

$my_mongo = new MyMongo(); 
```

# java - 在单击“首选项”之前，共享首选项不会生效

> ID：11147766
> 
> 赞同：0
> 
> 时间：2012-06-21T22:30:33.497
> 
> 标签：java, android, sharedpreferences, sony, sony-smartwatch

我正在使用他们的 SDK 为 Sony Smartwatch 编写一个应用程序。这是主要活动的一部分：

```
class SmartTickerActivity extends ControlExtension {
    private Handler mHandler;

    SmartTickerActivity(final String hostAppPackageName, final Context context, Handler handler) {
        super(context, hostAppPackageName);

        if (handler == null) {
            throw new IllegalArgumentException("handler == null");
        }

    }

    @Override
    public void onStart() {
        //do some stuff

        PreferenceManager.setDefaultValues(mContext, R.xml.preference, false);
    } 
```

问题是当应用程序启动时，保存的首选项没有应用到智能手表上。XML 中的默认首选项值也不是。但是，如果我在手机上单击任何应用程序的首选项，保存的首选项值会立即应用于智能手表。

请注意，主类没有 onCreate() 方法，这让我陷入了循环。

这是 Preference 活动的一部分：

```
public class MyPreferenceActivity extends PreferenceActivity {

    private OnSharedPreferenceChangeListener mListener = new OnSharedPreferenceChangeListener() {

        public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
            Preference pref = findPreference(key);

            if (pref instanceof ListPreference) {
                ListPreference listPref = (ListPreference) pref;
                pref.setSummary(listPref.getEntry().toString());
            }

            if (pref instanceof EditTextPreference) {
                EditTextPreference editTextPref = (EditTextPreference) pref;
                pref.setSummary(editTextPref.getText().toString());
            }

        }

    };  

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Load the preferences from an XML resource
    addPreferencesFromResource(R.xml.preference);  

    setSummaries();

    setTypeface(SmartTickerActivity.mainLayout);

    if (previewLayout != null) setTypeface(previewLayout);

    // Handle read me
    Preference readMe = findPreference(getText(R.string.preference_key_read_me));
    readMe.setOnPreferenceClickListener(new OnPreferenceClickListener() {

        public boolean onPreferenceClick(Preference readMe) {
            showDialog(DIALOG_READ_ME);
            return true;
        }
    });

    // Handle about
    Preference about = findPreference(getText(R.string.preference_key_about));
    about.setOnPreferenceClickListener(new OnPreferenceClickListener() {

        public boolean onPreferenceClick(Preference about) {
            showDialog(DIALOG_ABOUT);
            return true;
        }
    });

     // Handle preview
        Preference preview = findPreference(getText(R.string.preference_key_preview_dialog));
        preview.setOnPreferenceClickListener(new OnPreferenceClickListener() {

            public boolean onPreferenceClick(Preference preview) {
                showDialog(DIALOG_PREVIEW);
                return true;
            }
        });      

    } 
```

我在Android开发方面相当缺乏经验，所以这个问题很可能与Sony SDK无关。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T07:21:41.820

您是对的，直到第一次显示 PreferenceActivity 才会加载官方示例扩展的首选项。如果您在访问首选项时使用正确的默认值，这应该不是问题。

如果您希望在第一次启动扩展时加载首选项，您可以扩展 android.app.Application 类和 onCreate 方法。

例如：

```
public class MySmartWatchApplication extends Application {
    @Override
    public void onCreate() {
        super.onCreate();
        PreferenceManager.setDefaultValues(this, R.xml.app_preferences, false);
    }
} 
```

# c++ - Cairo：裁剪 PDF 表面？

> ID：11147767
> 
> 赞同：1
> 
> 时间：2012-06-21T22:30:34.063
> 
> 标签：c++, pdf, cairo

假设我制作了这样的表面：

```
cairo_surface_t* surface = cairo_pdf_surface_create("pdffile.pdf", 40000, 40000);
cairo_t* cr = cairo_create(surface); 
```

这是一个很大的表面！这样做的原因是我不知道我的绘图的大小，直到我绘制它（这是一个复杂的图表，动态生成）。在我绘制它之后，裁剪表面似乎很简单。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:15:52.583

绘制到记录表面而不是 PDF 表面。然后可以将记录表面绘制到较小的 PDF 表面。此外，cairo 支持无界记录表面，因此当您的绘图更宽/高于 40k 像素时，这甚至可以工作。

# ruby-on-rails - 从安全域加载 CSS 文件时的 HTTP 状态 403 (Rails 2)

> ID：11147768
> 
> 赞同：1
> 
> 时间：2012-06-21T22:30:51.480
> 
> 标签：ruby-on-rails, ssl

我在 Google Chrome 中遇到了关于 SSL 的问题。基本上，我的应用程序使用的是托管在 SSL 域上并由 Rails 2 应用程序提供服务的 CSS 文件。当我查看“网络”选项卡时，它在加载文件时显示 403 状态。但是，当我在新选项卡中打开文件时，文件已成功加载。

有谁知道为什么会发生这种情况以及如何解决它？

# web-services - 在微控制器上托管 Web 服务

> ID：11147771
> 
> 赞同：0
> 
> 时间：2012-06-21T22:30:55.640
> 
> 标签：web-services, rest, microcontroller

我在网上看到了一些具有 wifi 的设备，并暴露了一些由智能设备（在本例中为 iOS）收集的信息。您是否知道任何微控制器可用于公开从传感器（通过 WiFi）读取的一些数据？

示例：公开 termometer Web 服务 - 如果有人请求当前温度进行读数（或传递缓存读数）并将其发送给请求者。

感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:42:04.313

[Raspberry Pi](http://www.raspberrypi.org/faqs)设备[似乎很便宜](http://uk.rs-online.com/web/generalDisplay.html?id=raspberrypi)，有以太网连接，[甚至还有一个测试版 Stack Exchange 社区](https://raspberrypi.stackexchange.com/)。你也许可以做一些更便宜的事情——例如没有 GPU——但这可能是一个合理的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T06:40:30.030

我认为 Yoctopuce 有一些硬件可以让你做到这一点：

[http://www.yoctopuce.com/EN/article/an-autonomous-solar-weather-station](http://www.yoctopuce.com/EN/article/an-autonomous-solar-weather-station)

这是一个太阳能气象站，基于 WiFi 模块上的温度传感器。WiFi 模块从温度传感器读取温度并自动将其发布到互联网上。它完全即插即用，无需编程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:34:00.327

我最近玩了一个[http://ruggedcircuits.com/html/yellowjacket.html](http://ruggedcircuits.com/html/yellowjacket.html)来做你想做的事。

# javascript - 如何在 Backbone / Underscore 上应用 jQuery timeago 或 easydate？

> ID：11147773
> 
> 赞同：1
> 
> 时间：2012-06-21T22:31:08.917
> 
> 标签：javascript, jquery, backbone.js, underscore.js, template-engine

你如何应用[timeago](http://timeago.yarp.com/)或[easydate](http://easydate.parshap.com/)`<time class="prettydate"><%= created_at %></time>"`（输出类似这样的东西）`Mon Jun 18 03:46:27 +0000 2012`？

我尝试了以下方法，但它不起作用，因为我使用 Backbone / Underscore 来呈现日期。

```
$(function() {
  $('time.prettydate').easydate();
}); 
```

这是我的看法：

```
( function ( views ){

    views.ResultView = Backbone.View.extend({
        tagName : 'li',
        template: _.template($('#resultItemTemplate').html()),

        initialize: function() {
            this.model.bind('change', this.render, this);
            this.model.bind('destroy', this.remove, this);
        },

        render : function () {
            //this.$el.html(this.template(this.model.toJSON()));
            var html = this.template(this.model.toJSON());
            this.$el.html($(html).timeago());
        }
    });

})( app.views ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T22:54:58.537

大概你在一个视图中有这样的东西：

```
render: function() {
    var html = _.template(...);
    this.$el.append(html);
    return this;
} 
```

您需要做的就是`html`在附加插件时直接应用插件：

```
render: function() {
    var html = _.template(...);
    this.$el.append($(html).timeago());
    return this;
} 
```

演示：http: [//jsfiddle.net/ambiguous/Fk6xF/](http://jsfiddle.net/ambiguous/Fk6xF/)

如果你正在做这同样适用`this.$el.html(...)`。

如果您需要在前一段时间应用的部分*在*您的模板中，那么您必须找到它们并`.timeago()`单独应用。这样的事情应该可以解决问题：

```
render: function() {
    var html = _.template(...);
    this.$el.html(html);
    this.$el.find('.timeago').timeago(); // Assuming you're using class="timeago"
    return this;
} 
```

演示：http: [//jsfiddle.net/ambiguous/dHr6D/](http://jsfiddle.net/ambiguous/dHr6D/)

# html - 样式化 mailchimp 表单

> ID：11147774
> 
> 赞同：0
> 
> 时间：2012-06-21T22:31:10.540
> 
> 标签：html, css, forms, mailchimp

我正在尝试缩小复选框和标签之间的距离。我希望他们排成一列。

**CSS**

```
#mc_embed_signup_pro {
    background: #fff;
    width: 520px;
    padding: 40px;
    }
#mc_embed_signup_pro input {
    height: 38px;
    width: 510px !important;
    font-family: Arial;
    font-size: 22px;
    text-transform: bold;
    color: #666;
    border: 1px #a3a3a3 solid;
    -moz-border-radius: 12px;
    border-radius: 12px;
    float: left;
    clear: both;
    }
#mc-field-group li {
    float: left;
    width: 30px;
    height: 40px;
    }
.check {
    background: aqua;
    float: right !important;
    }
#mc_embed_signup_pro label {
    margin-top: 20px;
    margin-bottom: 8px;
    float: left;
    }
#mc_embed_signup_pro .mc-field-group {
    margin-bottom: 10px;
    height:60px;
    clear: both;
    }
#mc_embed_signup_pro .button {
    background: #484848 !important;
    float: left;
    padding-top:3px !important;
    font-size: 32px !important;
    line-height: 20px !important;
    width: 150px !important;
    height: 46px !important;
    font-family: 'Populaire';
    } 
```

现场样品 [http://www.oatbook.co.uk/signup-pro.html](http://www.oatbook.co.uk/signup-pro.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:39:19.540

`#mc_embed_signup_pro input`样式为`width: 510px;`，将应用于上面的输入字段以及输入复选框。您需要为复选框制作单独的样式，以便它们都可以具有独立的宽度。

另外，不确定您是否打算这样做，但在我的浏览器上，您的复选框真的很大而且很模糊，38px x 38px

**编辑：回复第一条评论**

首先，您已经`!important`分配了`#mc_embed_signup_pro input imput`标签的宽度。`!important`将覆盖任何样式，无论它位于您的 CSS 中的哪个位置（甚至是内联样式），因此您需要删除它。这里还有第二个需要删除：

```
input {
    border-radius: 12px 12px 12px 12px;
    color: #666666;
    float: left;
    font-family: Arial;
    font-size: 15px;
    height: 8px;
    width: 220px !important;
    } 
```

这可能就是您`!important`首先将 510px 宽度添加到的原因？接下来，您将要向这些位实际添加一个类声明

```
<li>
    <input id="mce-group[1869]-1869-0" type="checkbox" name="group[1869][1]" value="1" class="checkbox">
    <label for="mce-group[1869]-1869-0" class="label">Medical Professional</label>
</li>

input.checkbox {
    width:20px; 
    float:right; 
    margin:0; 
    padding:0; 
    height:1em;
    }

input.label {
    width:200px; 
    float:left; 
    margin:0; 
    height: 1em;
    } 
```

但是，您将在这里有一些不必要的代码，因为样式来自`<input>`并且`#mc_embed_signup_pro input`正在添加您不想要的样式到复选框输入。您可以做的最好的事情是为每种输入类型放置唯一的类并设置它们的样式，而不是使用后代选择器`#mc_embed_signup_pro input`。通过使用`input`，您可以设置*所有*输入标签，而不仅仅是分配给它们的类。唯一应该应用的样式`input`是普遍适用的样式。否则，您正在编写样式，然后再覆盖它们，而不是根本没有应用它们。

我希望这是有道理的。

# awk - awk 中 $1 和 $2 的使用

> ID：11147775
> 
> 赞同：2
> 
> 时间：2012-06-21T22:31:12.113
> 
> 标签：awk

正如我在 awk 中所知道的，$1 和 $2 指的是文件的第一个和第二个字段。但是可以使用 $1 和 $2 来引用变量的第一个和第二个字段.. 这样如果 session=5 存储在一个变量中。然后我想让 $1 指代 'session' 和 $2 指 '5' 。谢谢

### 输入文件

```
session=123
process=90
customer=145
session=123
customer=198
process=90 
```

### 代码

```
 awk '$1 ~ /^Session|^CustomerId/' hi|xargs -L 1 -I name '{if (!($1 SUBSEP $2 in a)) {ids[$1]++; a[$1, $2]}} END {for (id in ids) {print "Count of unique", id, " " ids[id]}}' 
```

### 细节

我将传递我从第一个得到的输出并通过 xargs 管道它，我在 xargs 的“name”变量中读取行。现在我的 $1 应该对应于 xargs 的第一个字段，这是我的查询

### 输出

```
Count of unique sessions=2
Count of unique customer=2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:33:03.727

使用字段分隔符，它可以在 BEGIN 代码块内指定为`FS="separator"`，或作为命令行选项`awk`通过`-F "separator"` 此答案仅显示问题提出的要点。它没有解决最终输出。

```
awk -F"=" '$1 == "session" || 
           $1 == "customer" { ids[$1]++ }  # do whatever you need with the counters.
           END { for (id in ids) {
                     print "Count, id "=" ids[id] }}' hi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T00:03:40.600

如果您正在寻找的是唯一客户和会话的计数，那么这可能会：

```
awk -F= '
  $1~/^(session|customer)$/ && !seen[$0] {
    seen[$0]=1;
    count[$1]++;
  }
  END {
    printf("Count of sessions: %d\n", count["session"]);
    printf("Count of customers: %d\n", count["customer"]);
  }' hi 
```

除了保持计数之外，这还保留了贡献计数的行的关联数组，以避免第二次计数行 - 从而使其成为唯一计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T01:40:34.557

如果您想将脚本限制为仅包含“会话”和“客户”，您只需将正则表达式作为选择器添加到主脚本：

```
awk -F= '$1 ~ /^(session|customer)$/ {if (!($1 SUBSEP $2 in a)) {ids[$1]++; a[$1, $2]}} END {for (id in ids) {print "Count of unique", id, " " ids[id]}}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T23:18:22.777

您为什么不尝试所有`awk`解决方案？它更简单：

```
awk -F "=" '$1 ~ /customer|session/ { name[$1]++ } END { for (var in name) print "Count of unique", var"="name[var] }' hi 
```

结果：

```
Count of unique customer=2
Count of unique session=2 
```

还有其他原因需要管道`xargs`吗？

高温高压

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T13:16:18.020

然而，另一种选择是

```
awk -F "=" '$1 ~ /customer|session/ {print $1}'|sort |uniq -c | awk '{print "Count of unique "$2"="$1}' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-23T01:39:58.250

**以下是您删除的问题的答案：**

这是基于我对您之前的一个问题的回答的独立 AWK 脚本：

```
#!/usr/bin/awk -f
/^Customer=/ {
    mc[$0, prev]++
    if (!($0 in cseen)) {
        cust[++custc] = $0
        ids["Customer"]++
    }
    cseen[$0]
}

/^Merchant=/ {
    prev = $0
    if (!($0 in mseen)) {
        merch[++merchc] = $0
        ids["Merchant"]++
    }
    mseen[$0]++
}

END {
    for (id in ids) {
        print "Count of unique", id, ids[id]
    }
    for (i = 1; i <= merchc; i++) {
        merchant = merch[i]
        print "Customers under (" merchant ") is " mseen[merchant]
        for (j = 1; j <= custc; j++) {
            customer = cust[j]
            if (customer SUBSEP merchant in mc) {
                print "(" customer ") under (" merchant ") is " mc[customer, merchant]
            }
        }
    }
} 
```

将其设置为可执行并运行它：

```
$ chmod u+x customermerchant
$ ./customermerchant data.txt 
```

# ios - 将屏幕截图上传到 iTunes Connect 时出现奇怪的错误

> ID：11147782
> 
> 赞同：2
> 
> 时间：2012-06-21T22:31:52.613
> 
> 标签：ios, app-store, screenshot, app-store-connect

我正在尝试将新的屏幕截图上传到我在 iTunes Connect 上的游戏页面，但是当我这样做时，我收到了一个与现实和/或常识没有任何关系的错误。基本上，我上传了一堆具有正确分辨率、尺寸等的 iPhone 屏幕截图，并得到一个错误，说我没有。我开始觉得我做错了什么，尽管我很确定我没有。

错误如下：“您的二进制文件表示支持 iPhone/iPod touch。您必须提供 iPhone/iPod touch 屏幕截图。” 同样，正如您在下面的屏幕截图中看到的那样，我确实已经上传了这些屏幕截图。二进制文件是正确的，针对 iPhone/iPod Touch 和 iPad。

Chrome 和 Safari 都试过了，都无济于事。我已经为 Apple 的支持留了一张票，但这有时可能需要几天时间，而且我没有那种时间，因为没有这个批准过程就足够长了。

（[截图](https://dl.dropbox.com/u/9956376/Screen%20Shot%202012-06-22%20at%2001.11.56.png)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T16:51:58.010

我知道已经快一年了，但是对于那些仍然有这个问题的人，只需在预览中打开屏幕截图并重新保存即可。

为我们工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T23:24:43.103

检查您是否正在上传高分辨率（视网膜）屏幕截图。自 2012 年 2 月起，您为 iPhone/iPad 上传的屏幕截图必须是高分辨率的（适用于 Retina 设备）。苹果 说：

> 高分辨率图像的要求是 960 x 640、960 x 600、640 x 960 或 640 x 920 像素。图像必须至少为 72 dpi，在 RGB 颜色空间中，并且文件必须是 .jpeg、.jpg、.tif、.tiff 或 .png。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-12T07:23:28.610

我必须先在 finder 中明确添加扩展名。示例 1.png/1.jpg 而不是 1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-09T17:23:06.457

这解决了我的问题..来自苹果开发者表格的报价：

> 很遗憾听到这种情况发生。此消息表示有已开始但从未完成的屏幕截图上传。通常如果上传失败，App Store Connect 会报错并为你删除未完成的截图。但听起来在这种情况下，失败的屏幕截图没有成功删除。
> 
> 您可以自己手动删除这些：转到您的应用版本页面，您可以在其中看到您的屏幕截图。
> 
> 单击“在媒体管理器中查看所有尺寸”。这应该会将您带到一个包含所有可用显示类型和尺寸的页面。
> 
> 点击“>” 每个显示尺寸的图标以展开每个部分。
> 
> 未完成的屏幕截图显示为灰色占位符图标，而不是实际的屏幕截图。通常这些会告诉您团队中的其他人正在上传屏幕截图。但如果不是这种情况，则意味着截图上传失败，并且没有自动清理。如果您看到任何这些： 将鼠标指针悬停在屏幕截图上。左上角将出现一个红色 (-) 图标。
> 
> 单击 (-) 图标以删除占位符。
> 
> 如果您的应用程序有多个本地化，请使用此页面右上角的语言环境选择器检查每个本地化。
> 
> 希望这可以帮助！

# iis-7 - 试图让我的笔记本电脑成为网络服务器

> ID：11147786
> 
> 赞同：0
> 
> 时间：2012-06-21T22:32:00.893
> 
> 标签：iis-7, installation

我正在尝试使我的笔记本电脑成为临时 Web 服务器。自从我建立一个以来已经好几年了，我真的不知道我当时在做什么=）。

长话短说，IT 暂时不会准备好服务器，我需要使用其他端点（PC、iProducts、Android）测试我的站点。

我已经安装并运行了 IIS7。我正在使用已设置的默认网站，并在我的 inetpub\wwwroot 文件夹中放置了一个简单的 Default.htm 页面。

```
<html>
    <head>
    <title>Test</title>
    </head>
    <body>
        <div align="center">
        <table cellpadding="0" cellspacing="0" border="0">
        <tr>
        <td align="center">My Web Site</td>
        </tr>
        <tr>
        <td align="center">Does It Work</td>
        </tr>
        </table>
        </Div>
</body>
</html> 
```

使用 IP 地址或计算机名称，我可以在笔记本电脑上本地访问该站点并查看网页。

```
http://123.45.678.90/
http://MyMachine/ 
```

如果我在我的 Intranet 上访问另一台机器，我无法访问 Web 服务器。但是，我可以同时 Ping IP 地址和计算机名称。

我必须在 IIS 中设置什么才能将其公开或其他什么？

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:37:03.793

如果它在本地而不是外部应答，请确保它在公共 IP 上并且防火墙没有阻止。这可能有用：[https ://serverfault.com/questions/54623/sites-in-iis-not-available-externally](https://serverfault.com/questions/54623/sites-in-iis-not-available-externally)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T23:17:10.280

如果您无法从网络上的其他机器访问 Web 服务器，但可以使用指向 localhost 的浏览器在本地访问它，则问题可能是启用了 Windows 防火墙，并且不允许端口 80 HTTP 流量从网络。

在 Windows 7 上，您可以在控制面板 | 访问 Windows 防火墙。系统与安全 | Windows 防火墙。单击**高级设置**，然后从具有高级安全性的 Windows 防火墙窗口中选择**入站规则**。向下滚动到“万维网服务（HTTP 流量输入）”，然后单击“启用规则”。这应该允许端口 80 上的入站连接访问您的 Web 服务器。

# javafx-2 - 在 JavaFX 中清理 gridPane 并维护 Grid 线

> ID：11147788
> 
> 赞同：12
> 
> 时间：2012-06-21T22:32:04.763
> 
> 标签：javafx-2, gridpanel, gridlines

我正在尝试在 JavaFX 中制作一个简单的游戏（这是一项学校作业），我正在尝试用电路板清除面板，然后重新粉刷它。我尝试了很多方法，这是我发现的唯一一种方法，它可以（在视觉上）删除所有的棋盘，而不会创建一个视觉错误，显示一个已经被删除但仍然显示的棋子。

所以我这样声明`gridPane`：

```
private GridPane gridPecas;

@Override
public void start(Stage primaryStage)
{
    gridPecas = new GridPane();
    gridPecas.setGridLinesVisible(true);

    paintBoard();

    // rest of the code to create and paint the Stage
 }

 private void paintBoard()
 {
    gridPecas.getChildren().clear();
    // Code to fill the board with ImageView and Images of the pieces
 } 
```

这种方法的问题在于，当“gridPecas.getChildren().clear();” 被称为我只是从`GridPanel`.

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-20T10:13:35.517

`setGridLinesVisible(boolean)`仅用于调试：

[http://docs.oracle.com/javafx/2/api/javafx/scene/layout/GridPane.html#setGridLinesVisible(boolean)](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/GridPane.html#setGridLinesVisible(boolean))

例如，您甚至无法更改 gridLines 颜色。

所以你应该找到另一种制作网格线的方法，然后调用

```
yourPane.getChildren().clear(); 
```

因为它比`gridPecas.getChildren().removeAll(pecasFX[i][j]);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-09T10:25:20.533

清除 GridPane 和维护 Gridlines 的方法如下：

```
 Node node = grid.getChildren().get(0);
    grid.getChildren().clear();
    grid.getChildren().add(0,node); 
```

GridPane 中的第一个 Node*（* 如果您在向网格中添加元素之前设置了 GridLinesVisible？）包含 Gridlines（可能还有其他内容）。

所以你只需要在清除之前保留这个节点并在之后重新添加它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-19T10:01:29.283

有效清除 GridPane 并恢复维护网格线：

```
gridPane.setGridLinesVisible(false);
gridPane.getColumnConstraints().clear();
gridPane.getRowConstraints().clear();
gridPane.getChildren().clear();
gridPane.setGridLinesVisible(true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-12T04:31:15.520

**单线**：grid.getChildren().retainAll(grid.getChildren().get(0));

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T07:54:22.863

嗯，我的建议是根本不要清除所有孩子。始终保留 imageViews 并替换它们显示的图像。为了“清除”电路板，放置一个“空”图像。

# php - 从函数调用时返回 0 的数组

> ID：11147791
> 
> 赞同：0
> 
> 时间：2012-06-21T22:32:25.127
> 
> 标签：php, function, for-loop, return, call

在开始之前，我应该让你知道我在 PHP 方面几乎没有经验。事实上，我几乎是从上周才开始使用它的，所以我使用它时就好像它是 JavaScript 或其他东西一样。

无论如何，我正在尝试通过 PHP 尽可能地简化在我的网站上提供的内容的动态服务，并且尽我所知。

所以，我这样做：

1.  创建一个包含我当前使用的每个 URL 变量的数组。
2.  Querying`IDPage()`包括一个`FOR`循环遍历数组的循环，将索引位置与当前 URL 变量进行比较，如果匹配则返回索引位置。
3.  使用返回的字符串来决定要包含哪些内容。

**前 <!DOCTYPE>**

```
<?php
    $root = $_SERVER["DOCUMENT_ROOT"];
    $array_IDs = array("404", "home", "item2", "item3", "item4");
    global $root, $array_IDs;
?> 
```

**<头部>**

```
<?php
    function IDPage(){
        for ($i = 0; $i < count($array_IDs); $i++){
            if (isset($_GET[$array_IDs[$i]])){
                return $array_IDs[$i];
            }
        }
    }
?> 
```

**<正文>**

```
<article>
    <?php 
        $response = IDPage();

        if ($response == "404"){
            include($root . "/path/file.ext");
        }

        if ($response == "home"){
            include($root . "/path/file.ext");
        }

        if ($response == "item2"){
            include($root . "/path/file.ext");
        }

        if ($response == "item3"){
            include($root . "/path/file.ext");
        }

        if ($response == "item4"){
            include($root . "/path/file.ext");
        }
    ?>
</article> 
```

使用当前设置，该数组始终返回 0，并且稍微深入一点，这似乎是因为`count()`认为它`$array_IDs`没有值。但是，如果您将`FOR`循环放置在与`<body>`s 相同的块中（当然，修改代码以使其在同一块中工作），则此方法有效。

再说一次，我知道它很粗糙，但它只是一个小站点，我不知道有什么更好的，我认为我还没有准备好进入数据库等等。不过，如果有人有更好的想法，请随时告诉我，只要我有能力。:L

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:36:47.897

在函数中使用`global`关键字在函数中导入该变量：

```
function IDPage(){
    global $array_IDs;
    for ($i = 0; $i < count($array_IDs); $i++){
        if (isset($_GET[$array_IDs[$i]])){
            return $array_IDs[$i];
        }
    }
 } 
```

# javascript - 是否可以检测 IE 何时忽略 xml 文档中的空白文本节点？

> ID：11147792
> 
> 赞同：3
> 
> 时间：2012-06-21T22:32:26.137
> 
> 标签：javascript, xml, internet-explorer, dom

我正在尝试为 IE XML DOM 库的[text](http://msdn.microsoft.com/en-us/library/ms762687.aspx)属性编写 shim，但我遇到了有关格式化空白的问题。

如果我处理以下 XML 的文本属性

```
var doc1 = load_ie('<root><a>A</a><b>B</b></root>')
var doc2 = load_ie('<root><a>A</a>   <b>B</b></root>'); 
```

他们给出不同的结果：

```
doc1.text // 'AB'
doc2.text // 'A B' - the multiple spaces are compressed to a single space 
```

然而，令我惊讶的是，IE 似乎并不承认 x2 中存在的空间甚至存在，就像其他浏览器一样：

```
doc1.documentElement.childNodes.length // 2
doc2.documentElement.childNodes.length // 2 (I expected 3!)

var doc3 = load_ie('<root><a>A</a> c  <b>B</b></root>');
doc3.documentElement.childNodes.length // 3 
```

如果我在 Google chrome 上运行测试，则 doc2 案例中的节点数为 3（“a”节点、具有 3 个空格的文本节点和“b”节点），类似于 doc3 案例的工作方式。**如果 IE 对我隐藏空白节点并且我无法区分第一种和第二种情况，即使它们需要返回不同的结果，我将如何编写我的 shim？**

* * *

从字符串加载创建 XML 文档的代码：

```
load_ie = function(xmlstr){
    var doc = new ActiveXObject('Microsoft.XMLDOM');
    doc.async=false;
    doc.loadXML(xmlstr);
    return doc;
}

load_w3c = function(xmlstr){
    var p = new DOMParser();
    return p.parseFromString(xmlstr, 'text/xml');
} 
```

奖金问题：

我也无法让 MSDN 文档中给出的示例正常工作。根据它，以下XML

```
var d = load_ie(
    '<root att="   123   a      ">\n' +
    '     <a>   a   a   </a>\n' +
    '   <!--   comment   b   -->\n' +
    '   <?pi   pi   c   ?>\n' +
    '   <![CDATA[   cdata   d   ]]>\n' +
    '   e   f\n' +
    '</root>'
 );
 d.text; 
```

应该给

```
"a a cdata d e f" 
```

但相反我得到

```
"a   a       cdata   d   \n   e   f" 
```

我想知道我是否遗漏了一些明显导致我行为异常的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:31:03.490

Internet Explorer 解析方法使用 MSXML API，可以将其配置为[保留或折叠空白](http://msdn.microsoft.com/en-us/library/windows/desktop/ms761353.aspx)。以下代码在 IE9 中适用于我：

```
load_ie = function(xmlstr){
    var doc = new ActiveXObject('Microsoft.XMLDOM');
    doc.async=false;
    doc.preserveWhiteSpace=true;
    doc.loadXML(xmlstr);
    return doc;
}

var doc = load_ie('<root><a>A</a>   <b>B</b></root>');
console.log(doc.documentElement.text.length === 5)
console.log(doc.documentElement.childNodes.length === 3);
console.log(doc.documentElement.childNodes[1].nodeTypeString === "text"); 
```

# javascript - 使用 javascript/greasemonkey 提取和显示网页

> ID：11147795
> 
> 赞同：0
> 
> 时间：2012-06-21T22:32:34.983
> 
> 标签：javascript, greasemonkey

我能想到的最简单的解释方法就是告诉你我想做什么！-

（不过，首先要了解一点背景知识。我希望能够了解以下内容是如何工作的，以便我可以在未来的许多项目中使用它。我今天想要完成的是我想要使用 Javascript / Greasemonkey 的唯一原因。）

我的目标：在另一个网站中显示部分或整个网站。我希望能够将一个网页的一部分插入另一个网页。示例：Facebook - 在主页（登录）上，右侧“您可能认识的人”上方：我希望能够显示内容来自我所属的一个小组。

我尝试了许多谷歌搜索，试图找到某种形式的教程/wiki，但都无济于事。

如果您可以/愿意提供帮助，答案会很好，但是想要在不同的项目中使用它来处理不同的网站，我宁愿能够准确地了解一切是如何运作的。所以也许是一个完整的解释甚至指向在正确的方向。

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:36:57.880

不知道如何使用greasemonkey 做到这一点，但我建议为此目的使用iframe。有关更多信息，请参阅 Mozilla 关于 iframe 的文档： [https ://developer.mozilla.org/en/HTML/Element/iframe](https://developer.mozilla.org/en/HTML/Element/iframe)

另一种方法可能是使用 javascript 与网络服务器对话以获取您想要在服务器端显示的 html（使用 PHP、python 等），然后只返回您想要显示的部分。然后，javascript 可以将该块 html 插入浏览器，瞧，你想要的结果。

# html - 使空白的 html 表格单元格可点击并返回文本

> ID：11147798
> 
> 赞同：-1
> 
> 时间：2012-06-21T22:33:03.430
> 
> 标签：html, html-table

我正在尝试设置一个表格，其中最初所有单元格都是空的，但是如果用户单击空单元格，则文本将出现在单元格中。这可能只使用html吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:39:43.793

使用 HTML 和 CSS，您可以近似这种行为，但只能在鼠标按下时进行。

我不确定这是否适用于所有浏览器：

```
<table>
    <tr>
        <td>Click the cell:</td>
        <td class="revealer ">
            <div class="revealable">
                MAGIC!!
            </div>
        </td>
    </tr>
</table> 
```

神奇的是（滥用？）`active`伪选择器：

```
td.revealer .revealable {
 display:none;   
}
td.revealer:active .revealable {
 display:block;   
} 
```

只要鼠标按下，效果就会持续。鼠标向上时，元素不再“活动”

试试看：http: [//jsfiddle.net/GRMule/awksn/](http://jsfiddle.net/GRMule/awksn/)

综上所述……这个用例非常狭窄。通常，如果您要在页面上执行任何类型的动态操作，您应该考虑添加一些微不足道的 javascript。不过，不要被那些神奇的库（jQuery、mootools、下划线等）所吸引——如果你所做的只是一些非常简单的事情，你不应该添加 jQuery（例如）来完成这个. 用普通的 javascript 做这样的小事情并不比用一些花哨的库难，但库添加了 10,000 行你不需要的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:53:58.523

这是一个**仅**使用HTML 和一些 CSS 的解决方案：

**主页**：

```
<html>
<body>
<table border=1>
<tr><td><iframe src="page1.html"></iframe></td><td><iframe src="page1.html"></iframe></td></tr>
<tr><td><iframe src="page1.html"></iframe></td><td><iframe src="page1.html"></iframe></td></tr>
</table>
</body>
</html> 
```

**page1.html**：

```
<html>
<body>
<form method=post action="page2.html">
<input type="submit" value="" style="width: 100%; height: 100%; margin: 0px; padding: 0px; background: white; border: none;">
</form>
</body>
</html> 
```

**page2.html**：

```
<html>
<body>
Hello!
</body>
</html> 
```

**工作原理**：
主页显示一个表格。每个单元格包含一个内联框架。
内联框架的内容是一个包含提交按钮的表单。提交按钮没有文本，使用 CSS 设置样式：白色背景、无边框、无边距、无内边距、100% 宽度、100% 高度。这样它是不可见的，并使用整个表格单元格。
当您单击表格单元格时，实际上是单击了提交按钮。表单提交并显示page2.html（因为表单显示“action=page2.html”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:35:51.073

```
<td onclick="this.innerText = 'hello, world'"></td> 
```

请记住，点击值实际上是 javascript，而不是纯粹的 html。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-21T22:37:40.957

不它不是。不过，您可以使用 JavaScript 来做到这一点。

```
<table>
 <tr>
  <td onclick="this.innerHTML = 'Data';"></td>
  <td onclick="this.innerHTML = 'Data';"></td>
  <td onclick="this.innerHTML = 'Data';"></td>
 </tr>
 <tr>
  <td onclick="this.innerHTML = 'Data';"></td>
  <td onclick="this.innerHTML = 'Data';"></td>
  <td onclick="this.innerHTML = 'Data';"></td>
 </tr>
</table> 
```

[http://jsfiddle.net/b3hXs/](http://jsfiddle.net/b3hXs/)

但是，如果您使用 jQuery 执行此操作会更好，因此您不必将其应用于每个单元格。您可以在 jQuery.com 下载 jQuery 并将其嵌入到您的页面中，如下所示：

```
<html>
 <head>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript">
   $(document).ready(function(){
    $('td').click(function(){
     $(this).html('Data');
    });
   });
  </script>
 </head>
 <body>
  <table>
   <tr>
    <td></td>
    <td></td>
    <td></td>
   </tr>
   <tr>
    <td></td>
    <td></td>
    <td></td>
   </tr>
  </table>
 </body>
</html> 
```

[http://jsfiddle.net/M4RZs/](http://jsfiddle.net/M4RZs/)

# iphone - 适用于 iPhone 的 Mouthboard 类型应用程序

> ID：11147800
> 
> 赞同：0
> 
> 时间：2012-06-21T22:33:09.040
> 
> 标签：iphone, xcode, video, plugins, cordova

我正在为 iPhone 开发一个应用程序，其功能与 Keith Lemon Mouthboard 应用程序类似，所以我正在寻找一个视频插件，允许您从播放列表中选择视频。有人对 xcode 或 phonegap 有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:16:09.897

我们制作了有问题的应用程序，具体取决于您计划发布的内容，然后我们可以提供帮助，但需要确切知道您正在制作什么以及您打算做什么，显然我们也计划进一步使用代码库. 你可以给我发电子邮件乔“at”widebeamdigital {dot} com。抱歉，这不是一个对所有人都有帮助的开放答案，一般答案是：视频的选择队列是一个简单的数组，经过处理，视频已加载但在来自平均嘴巴权限的静态 jpeg 静止帧下，当视频被检测为开始播放时，jpeg 被删除，然后每个视频都有一个与之关联的浮点值数据项，让 jpeg 知道什么时间返回以淡出视频的最后几帧。这就是防止黑跳的方法。

# google-maps - 如何在 Google 地图 API 中使用邮政编码代替 Lat 和 Lng

> ID：11147803
> 
> 赞同：22
> 
> 时间：2012-06-21T22:33:51.163
> 
> 标签：google-maps, maps, zipcode

我想知道是否有办法使用 zipcode 而不是 Lat 和 Lng，使用这个片段或使用地理编码请求。

```
 <script type="text/javascript">
        function initialize() {
            var latlng = new google.maps.LatLng(22.1482635,-100.9100755);
            // var latlang = new google.maps.zipcode(7845); <- Is there a way to do that?
            var myOptions = {
                zoom: 8,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
            var marker = new google.maps.Marker({
                position: latlng,
                map: map,
                title:"zipcode"
            });

        }
    </script> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-21T22:39:11.843

您可以使用 Google GeoCode API 请求邮政编码的纬度和经度，然后从那里开始。

如果您想直接或通过其他媒介执行此操作，API 请求 URL 将如下所示

[http://maps.googleapis.com/maps/api/geocode/json?address=50323&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=50323&sensor=false)

其中 50323 是您的邮政编码。

或者你可以使用 google Javascript API 通过 jQuery 来完成这一切。

```
var geocoder; //To use later
var map; //Your map
function initialize() {
  geocoder = new google.maps.Geocoder();
  //Default setup
  var latlng = new google.maps.LatLng(-34.397, 150.644);
  var myOptions = {
    zoom: 8,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
}

//Call this wherever needed to actually handle the display
function codeAddress(zipCode) {
    geocoder.geocode( { 'address': zipCode}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        //Got result, center the map and put it out there
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  } 
```

# foursquare - 将 Foursquare 数据与其他应用程序相结合

> ID：11147805
> 
> 赞同：1
> 
> 时间：2012-06-21T22:34:18.990
> 
> 标签：foursquare

Foursquare 和 Groupon 等应用程序通常在其 API 参考条款中有一个条款，该条款规定他们的数据不能与其他人的数据相结合。我已经探索 Foursquare 的 API 有一段时间了，我想知道 GTrot.com 之类的网站如何能够使用来自这两个网站（Foursquare 和 Groupon）和其他类似网站的记录来显示他们的结果？

是不是 Foursquare 和 Groupon 不是真正的竞争对手，所以他们的数据可以合并显示，而 Foursquare 和 Google Places 是竞争对手，所以他们的数据不能合并？

=====

作为参考，这里是 Foursquare 的 API 政策中的一部分：-***场地数据库使用*** *我们欢迎您使用foursquare 作为您的位置数据库。**您可以在您的系统中将其他内容与我们的场地数据相关联，但您不得将我们的数据库与其他数据库合并或自行导出。**示例 -* ** 将 Wikipedia 文章与foursquare 场所相关联并将它们展示给用户* ** 不要在foursquare 和Google Places 中执行搜索，然后返回其结果/数据的组合。*

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:13:35.330

应用程序可以在其现有的位置数据库和foursquare 之间进行映射，以显示foursquare 信息或提供foursquare 特定的功能（例如签到）。只要数据正确归属于foursquare，并且底层数据库不会通过foursquare集成“了解”新位置，这在foursquare ToS下是可以的。

因此，例如，您构建了一个使用 Wikipedia 位置但显示有关这些位置的四方提示（正确归因）的网站。但是您无法将 Wikipedia 的位置集与foursquare 的位置集结合起来创建一个统一的数据集。**

# ios - Apple 是否允许具有禁用功能的免费应用程序在单击时显示购买内容的提示？

> ID：11147823
> 
> 赞同：0
> 
> 时间：2012-06-21T22:35:49.553
> 
> 标签：ios, iphone

我一直在阅读 iPhone 和 iPad 应用程序开发的业务：成功的制作和营销应用程序 (http://www.amazon.com/Business-iPhone-iPad-Development-ebook/dp/B004TMNSJK/ref=sr_1_2?ie= UTF8&qid=1340317546&sr=8-2&keywords=marketing+iphone+apps)。这本书有点旧（此时大约一年，考虑到应用商店已经存在了多长时间，这是一个很长的时间）。

该书声称 Apple 的 iPhone 开发指南/规则规定应用程序必须功能齐全。该书称，由于这条规则，应用程序的“免费”或“精简”版本无法显示看似功能强大但单击时会提示用户购买完整版应用程序的按钮。例如，想象一个 GPS 应用程序，它有一个标记为“在我开车时给我提供路线指示”的按钮。如果您单击该按钮，它只会弹出一个对话框，上面写着“购买完整版以解锁此功能”。根据这本书，该应用程序将被 Apple 审查团队拒绝。

我有一个应用程序，允许用户通过应用程序内购买下载额外的内容。我想将内容显示为“灰色”。如果用户单击锁定的内容，我想显示一个弹出窗口，告诉他们如何获取附加内容。根据书，这种行为会被拒绝。

然而，由于这种设计对我的应用程序非常重要，我花了一些时间阅读所有 iPhone 应用程序指南，包括应用内购买指南，我没有发现任何东西可以让我得出这样的结论：行为是不允许的。

由于应用程序审核流程目前大约需要一周时间，我不想因为拒绝而失去整整一周的应用程序购买。有没有人听说过这个规则，如果有，你能指点我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:45:33.620

我最近向 App Store 提交（并接受）了一个“免费”或“精简版”应用程序，其中一些`UITextField`s 显示为灰色，触摸时`UIAlertView`显示 a 。我不知道这对于按钮是否可以接受，但它似乎或多或少是一回事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-25T03:34:07.883

我认为这本书可能是对的。请检查此[链接](https://developer.apple.com/appstore/resources/submission/tips.html)或阅读以下内容。

> *The two most common reasons for application rejection are issues with core functionality and crashing. Core functionality encompasses the belief that customers rightfully expect all the features described in the marketing text and release notes to work as described, and likewise that all the buttons and menu items within the application will be fully functional (i.e., **no grayed out buttons or notifications that a feature will be implemented later**). Before you submit your app for approval, make sure that every aspect of your application is fully functional and that the marketing text and release notes correspond to the end user experience.*

# algorithm - MatLab - 牛顿法算法

> ID：11147826
> 
> 赞同：0
> 
> 时间：2012-06-21T22:35:54.000
> 
> 标签：algorithm, matlab, newtons-method

我编写了以下算法，以便使用牛顿法评估 MatLab 中的函数（我们在我的解决方案中设置 r = -7）：

```
function newton(r);
syms x;
y = exp(x) - 1.5 - atan(x);
yprime = diff(y,x);
f = matlabFunction(y);
fprime = matlabFunction(yprime);
x = r;
xvals = x
for i=1:8 
    u = x;
    x = u - f(r)/fprime(r);
    xvals = x
end 
```

该算法的工作原理是它运行时没有任何错误，但数字在每次迭代时都在不断减少，即使根据我的教科书，对于 x，表达式应该收敛到大约 -14。我的算法在前两次迭代中是正确的，但随后它超出了 -14 并最终在所有迭代完成后以粗略 -36.4 结束。

如果有人可以就算法为什么不能正常工作给我一些帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:43:25.943

我认为

```
x = u - f(r)/fprime(r); 
```

应该

```
x = u - f(u)/fprime(u); 
```

如果你总是使用`r`，你总是递减`x`相同的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:07:11.690

```
syms x
y = exp(x) - 1.5 - atan(x); % your function is converted in for loop
x=-1;
n=10;
v=0;
for i=2:n
    x(i)=tan(exp(x(i-1))-1.5);
    v=[v ;x(i)]; % you will get solution vector  for each i value
end
v 
```

# android - 如果 Android 设备不可用，Jenkins 构建会挂起

> ID：11147828
> 
> 赞同：2
> 
> 时间：2012-06-21T22:36:13.787
> 
> 标签：android, timeout, jenkins, adb, jenkins-plugins

我们在 Jenkins 构建脚本中有一个步骤，它尝试使用如下命令从设备上卸载一些单元测试：

```
adb uninstall com.company.test 
```

如果我们通常连接到构建机器的物理设备由于某种原因不存在或关闭，则构建将挂起：

```
waiting for device - 
```

有谁知道如何解决这个问题？我听说过一些插件的传闻？理想情况下，我们希望它在一段时间后发出警告，然后继续。下一个最理想的方法是启动模拟器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:30:32.073

一个棘手的解决方法是检查“adb devices”命令是否返回“附加设备列表”字符串以外的任何内容。

在您的脚本中，尝试添加：

```
DEVICE_PRESENT=`adb devices | tail -n 1`
if [ -n "$DEVICE_PRESENT" ]
then
    echo "A device is present..."
    # Run your uninstall and other commands you need the device for here
fi 
```

这个 hack 起作用的唯一原因是“adb devices”当前返回“连接的设备列表”和一个空行（如果没有找到设备）。如果这种行为发生变化，那么这种方法将不再有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T23:18:25.147

这并不理想，但构建超时插件至少可以防止构建永远挂起：[https ://wiki.jenkins-ci.org/display/JENKINS/Build-timeout+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Build-timeout+Plugin)

# jquery - 有人可以评论我的错误修复吗？

> ID：11147830
> 
> 赞同：1
> 
> 时间：2012-06-21T22:36:32.147
> 
> 标签：jquery, internet-explorer, svg, cross-browser, twitter-bootstrap

我一直在使用[Twitter 的 Bootstrap Tooltip 插件](http://twitter.github.com/bootstrap/javascript.html#tooltips)。这工作得很好，除了在`svg`元素上使用时，它会中断。经过一些调试，我缩小了问题的范围。在`js`文件中，`init`函数如下所示：

```
 , init: function (type, element, options) {
      var eventIn
        , eventOut

      ...

      if (this.options.trigger != 'manual') {
        eventIn  = this.options.trigger == 'hover' ? 'mouseenter' : 'focus'
        eventOut = this.options.trigger == 'hover' ? 'mouseleave' : 'blur'
        this.$element.on(eventIn, this.options.selector, $.proxy(this.enter, this))
        this.$element.on(eventOut, this.options.selector, $.proxy(this.leave, this))
      }

      ...

    } 
```

我记得 SVG-IE 9.0 的具体实现有很多问题，所以我做了以下修改：

```
 if (this.options.trigger != 'manual') {
    eventIn  = this.options.trigger == 'hover' ? 'mouseenter' : 'focus'
    eventOut = this.options.trigger == 'hover' ? 'mouseleave' : 'blur'
    var flag = $.browser.msie  && parseInt($.browser.version, 10) === 9
    eventIn = flag ? "mouseover" : eventIn
    eventOut = flag ? "mouseout" : eventOut

    this.$element.on(eventIn, this.options.selector, $.proxy(this.enter, this))
    this.$element.on(eventOut, this.options.selector, $.proxy(this.leave, this))
  } 
```

这在所有浏览器中都可以正常工作。经过一番搜索，我发现[其他人](http://forum.jquery.com/topic/1-6-2-broke-svg-hover-events#14737000002851960)也面临同样的问题。我不确定是否有更好的方法来修复此错误，尤其是在阅读[链接](http://forum.jquery.com/topic/1-6-2-broke-svg-hover-events#14737000002851960)中的参数之后。

> 在 IE9 中，文档上有一个原生 contains() 实现，所以 jQuery 使用它。问题是这个 contains() 实现没有扩展到 SVG 元素。

关于我的修复是否可以改进的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T23:30:57.860

好吧，我可能有一些建议，但最好的办法是在[引导 github](https://github.com/twitter/bootstrap)上进行拉取请求，@fat 和 @mdo 肯定会在合并你的代码之前查看它，甚至给你反馈。干杯!

# android - 检测蓝牙“通话”按钮按下

> ID：11147831
> 
> 赞同：3
> 
> 时间：2012-06-21T22:36:40.210
> 
> 标签：android, android-intent, bluetooth

我有一个能够与我的手机通信的蓝牙耳机。它有一个大的“通话”按钮，可以接听/挂断电话。

我正在尝试制作一个能够在按下呼叫按钮时拦截的应用程序。我尝试过使用意图过滤器：

```
<receiver android:name=".MediaButtonIntentReceiver">
    <intent-filter>
        <action android:name="android.intent.action.MEDIA_BUTTON" />
    </intent-filter>
</receiver> 
```

但通话按钮似乎没有被归类为 media_button

关于如何实现这一目标的任何想法？我只想知道什么时候按下通话按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T02:02:39.730

如果按钮当前正在调出语音拨号器（我的），您需要[ACTION_VOICE_COMMAND](http://developer.android.com/reference/android/content/Intent.html#ACTION_VOICE_COMMAND)。将以下内容添加到您的意图过滤器中：

```
<action android:name="android.intent.action.VOICE_COMMAND" />
<category android:name="android.intent.category.DEFAULT" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T01:16:02.347

尝试

> android.intent.action.CALL_BUTTON

[http://developer.android.com/reference/android/content/Intent.html#ACTION_CALL_BUTTON](http://developer.android.com/reference/android/content/Intent.html#ACTION_CALL_BUTTON)

我不确定..我认为它会触发所有通话按钮，包括电话上的任何物理通话按钮和耳机上的按钮等。

# java - 如何将 java.lang.Object 变成另一种类型的对象？

> ID：11147837
> 
> 赞同：1
> 
> 时间：2012-06-21T22:37:00.147
> 
> 标签：java, object, objectoutputstream, typeconverter

使用`.dat`_ `Node`_ `ObjectOutputStream`_从`Node[]`我之前使用的。

如果我能解决其中一个问题，我的问题将得到解决：

*   将读取`Object`转换为对象类型`Node[]`，或
*   像这样读取文件`readNode[]();`

我不知道这个的正式名称，所以我很难找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:42:10.207

从 ObjectInputStream 返回的 Object 将具有与您最初将其写入文件时相同的类型。

但是，您必须在运行时强制转换它，因为编译器无法知道它将是什么类型。

```
 Object obj = stream.readObject();
 Node[] nodes = (Node[]) obj; 
```

如果你的格式很灵活，以至于你不知道究竟会发生什么，你可以先使用 instanceof 来检查各种可能性。

```
 if (obj instanceof Node[]){
     // do something
 }
 else if (obj instanceof String) { 
     // do something
 }
 else {
    throw new IOException("unexpected object in data stream "+ obj);
 } 
```

# php - php爆炸成数组

> ID：11147839
> 
> 赞同：0
> 
> 时间：2012-06-21T22:37:10.370
> 
> 标签：php, string, explode

假设我有这个字符串：

```
var1, var2, var3, "var4, test, test2", var5, "var6", var7 
```

如何使用 explode() 函数将它们放入这样的数组中

```
Array
(
    [0] => var1
    [1] => var2
    [2] => var3
    [3] => var4, test, test2
    [4] => var4
    [5] => var6
    [6] => var7
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T22:40:47.540

我认为`str_getcsv()`是您正在寻找的功能；它应该完全符合您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:42:01.973

使用[str_getcsv](http://se.php.net/manual/en/function.str-getcsv.php)函数：

```
$array = str_getcsv('var1, var2, var3, "var4, test, test2", var5, "var6", var7'); 
```

# mysql - cmake“找不到 MySQL”（使用 XAMPP）

> ID：11147840
> 
> 赞同：0
> 
> 时间：2012-06-21T22:37:15.760
> 
> 标签：mysql, cmake, mysql-connector, mysql-connect

我正在使用 XAMPP 安装和运行 MySQL，当我运行时`me@host:/path/to/mysql-connector-cpp> cmake .`，它会抛出

```
-- BOOST_INCLUDE_DIRS=/usr/local/include
-- ENV{MYSQL_DIR} = 
CMake Error at FindMySQL.cm:202 (MESSAGE):
  mysql_config wasn't found, -DMYSQL_CONFIG_EXECUTABLE=...
Call Stack (most recent call first):
  CMakeLists.txt:166 (INCLUDE)

CMake Error at FindMySQL.cm:204 (MESSAGE):
  Cannot find MySQL.  Include dir: MYSQL_INCLUDE_DIR-NOTFOUND library dir:
  cxxflags:
Call Stack (most recent call first):
  CMakeLists.txt:166 (INCLUDE)

-- Configuring incomplete, errors occurred! 
```

我正在使用 XAMPP，所以我确定 cmake 在错误的目录中寻找 MySQL。我如何告诉它它的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:18:48.730

您可以将其指向正确的`mysql-config`可执行文件：

```
cmake -D MYSQL_CONFIG_EXECUTABLE=/path/to/mysql-config . 
```

或者您可以只定义所需的变量：

```
cmake -D MYSQL_INCLUDE_DIR=... -D MYSQL_LIBRARY_DIR . 
```

# facebook-opengraph - OpenGraph 操作是否必须先获得批准才能用于测试？

> ID：11147844
> 
> 赞同：0
> 
> 时间：2012-06-21T22:37:33.247
> 
> 标签：facebook-opengraph, facebook-apps

我已经创建了一个开放的图形操作，到目前为止，我似乎只能使用它来发布 Facebook 为我生成的测试页面（我正在搞乱 curl 和一个提供正确类型元数据的网络服务器）。

这是对操作的限制（对于沙盒应用程序，只有已批准的操作才能将实际更新发布到时间线），还是我可能正在查看错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:22:11.963

在应用仪表板中，您可以创建角色。创建一个测试用户。从测试用户登录后（这将使您从原始帐户注销），您可以自由测试。否则，除非您的操作已提交（通过应用仪表板 -> 打开图表）并获得批准，否则您无法为全球用户发帖。

# c - 如何在windows中检索线程的起始地址？

> ID：11147846
> 
> 赞同：8
> 
> 时间：2012-06-21T22:37:35.400
> 
> 标签：c, windows, multithreading, winapi

我正在用 C 语言开发一个迷你 Windows 进程资源管理器，我有一个线程句柄。
如何检索该线程的起始地址？像这样的东西：
![在此处输入图像描述](../Images/f5b634324a1482d0799996894f413415.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T22:57:39.280

几天前已经问过这样的问题。这是一个示例解决方案：

```
DWORD WINAPI GetThreadStartAddress(HANDLE hThread)
{
    NTSTATUS ntStatus;
    HANDLE hDupHandle;
    DWORD dwStartAddress;

    pNtQIT NtQueryInformationThread = (pNtQIT)GetProcAddress(GetModuleHandle("ntdll.dll"), "NtQueryInformationThread");

    if(NtQueryInformationThread == NULL) 
        return 0;

    HANDLE hCurrentProcess = GetCurrentProcess();
    if(!DuplicateHandle(hCurrentProcess, hThread, hCurrentProcess, &hDupHandle, THREAD_QUERY_INFORMATION, FALSE, 0)){
        SetLastError(ERROR_ACCESS_DENIED);

        return 0;
    }

    ntStatus = NtQueryInformationThread(hDupHandle, ThreadQuerySetWin32StartAddress, &dwStartAddress, sizeof(DWORD), NULL);
    CloseHandle(hDupHandle);
    if(ntStatus != STATUS_SUCCESS) 
       return 0;

    return dwStartAddress;

} 
```

来源：http: [//forum.sysinternals.com/how-to-get-the-start-address-and-modu_topic5127_post18072.html#18072](http://forum.sysinternals.com/how-to-get-the-start-address-and-modu_topic5127_post18072.html#18072)

您可能必须包含此文件： http: [//pastebin.com/ieEqR0eL](http://pastebin.com/ieEqR0eL)

相关问题：[如何使用 LoadLibrary() 和 GetProcAddress() 函数将 ntdll.dll 添加到项目库中？](https://stackoverflow.com/questions/11120710/how-to-add-ntdll-dll-to-project-libraries-with-loadlibrary-and-getprocaddress/11121140#11121140)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T22:52:17.243

[`NtQueryInformationThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684283.aspx)与`ThreadQuerySetWin32StartAddress`. 另一种可能性是使用[`StackWalk64`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680650.aspx).

如果只需要起始地址，`NtQueryInformationProcess`就简单*多*了。即使使用相当简洁的编码，遍历堆栈也需要几百[行代码](http://ideone.com/KiB9r)左右。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T22:51:19.413

您应该能够使用[StackWalk64](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680650%28v=vs.85%29.aspx)或相关函数获取堆栈跟踪，然后使用 dbghelp.dll 对其进行解析。

这篇 CodeProject 文章详细解释了这一切：http: [//www.codeproject.com/KB/threads/StackWalker.aspx](http://www.codeproject.com/KB/threads/StackWalker.aspx)

# html - 容器不会延伸到页面底部

> ID：11147847
> 
> 赞同：4
> 
> 时间：2012-06-21T22:37:38.820
> 
> 标签：html, css

我现在非常沮丧。我不知道为什么我的容器不会延伸到页面底部。它到达可见窗口的底部，但如果您向下滚动超过该窗口，则背景结束。

我的基本结构看起来像这样......

```
<div id='container'>
    <div id='content'>
        /*Some Content here but all divs opened here are closed. (Title Bar, Nav, etc)
        <div id='mainTableContainer'>
             /*This is where a bulk of the code is. A table is generated in PHP and it
                gets fairly lengthy.
        </div>
    </div>
</div> 
```

所以这基本上是HTML。我一生都无法弄清楚为什么#container 不会延伸到页面底部！

和 CSS

```
html{
height:100%;    
}
body {
    font: 100%/1.4 "Museo-sans", Verdana, Arial, Helvetica, sans-serif;
    background: #ccc;
    margin: 0;
    padding: 0;
    color: #000;
    height:100%;
    background-image:url(images/bg.png);
}
.container {
    width: 960px;
    background: #FFF;
    height:100%;
    margin: 0 auto;
    border-left-style:dashed;
    border-right-style:dashed;
    border-width:1px;
    border-color:#bf0000;

  }
 .content {
    height:100%;
    padding: 10px 0;
  }
#mainTableContainer{
    margin:0px auto;
    width:90%;
    height:100%;
    text-align:center; 
```

}

我尝试了很多在这个网站上找到的技巧，但没有任何帮助。我不认为有什么是浮动的。我尝试将所有高度设置为 100%，我尝试设置最小宽度……我想不通！！

编辑：好的，我做了一个 JSFILDDLE 因此，如果您将 jsfiddle 中的显示秒数缩小到小于表格，然后刷新它，您会看到背景并没有一直向下，表格是留在空中“漂浮”。 [http://jsfiddle.net/LGM3y/1/](http://jsfiddle.net/LGM3y/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T22:41:00.067

您正在尝试选择一个类，但容器是一个 ID，因此您需要：

```
#container 
```

代替

```
.container 
```

如果这不能解决，请尝试在 HTML 标记而不是容器上设置背景 CSS。

```
html{
    height:100%;    
    background:#ccc url(images/bg.png);
} 
```

ETC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T00:03:19.383

如果您删除

```
html {height: 100%;} 
```

容器填满空间..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:46:03.783

我在`<div>`'s 上使用的一个技巧（在 IE 中具有混合结果）是专门`display: block`为要扩展的容器设置 CSS 规则。

例子：

```
#container {
display: block;
height: 100%;
} 
```

# c - 如何读取/写入文件到 C 中的目录？

> ID：11147850
> 
> 赞同：0
> 
> 时间：2012-06-21T22:37:52.487
> 
> 标签：c, file-io

我需要使用 C 程序将二进制文件写入某个指定目录。但是，在编写时，我想确保如果目录结构不存在，它应该为我创建一个。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T23:15:01.860

您必须检查叶子目录是否存在，使用`stat()`，并以自上而下的方式迭代创建目录，使用`mkdir()`。`EEXIST`或者您甚至可以放弃检查并从创建目录开始 -如果您的目录已经存在，它将失败并出现一堆错误。这只是一个*简单的方法*。

如果您担心正确性，有*更好的方法*。您应该`openat()`在所需路径的后续可用组件（目录）上使用并`mkdirat()`创建缺少的组件。这样你就可以避免可能的比赛。最后，您也应该使用打开文件`openat()`。

检查相关的[联机帮助页](http://man7.org/linux/man-pages/dir_section_2.html)，看看你应该如何使用提到的系统调用。

* * *

如果上面的鱼竿对你来说不够长，那么你可以在下面找到我简单的 Linux 风味鱼。`xopen()`函数允许您在给定路径中打开文件，并在此过程中创建目录。

```
#include <errno.h>
#include <fcntl.h>
#include <string.h>
#include <sys/stat.h>
#include <unistd.h>

/* Look out! It modifies pathname! */
int xopen(char *pathname, int flags, mode_t mode, mode_t dirmode)
{
    int fd, errsv;
    int dirfd = AT_FDCWD;
    char *ptr = pathname;

    while (*ptr == '/')
        ptr++;
    for (;;) {
        strsep(&ptr, "/");
        if (ptr == NULL) {
            fd = openat(dirfd, pathname, flags, mode);
            break;
        }
        while (*ptr == '/')
            ptr++;
        if (*ptr == '\0') {
            errno = EISDIR;
            fd = -1;
            break;
        }
        if ((fd = mkdirat(dirfd, pathname, dirmode)) < 0 && errno != EEXIST)
            break;
        if ((fd = openat(dirfd, pathname, O_DIRECTORY)) < 0)
            break;
        if (dirfd != AT_FDCWD)
            close(dirfd);
        dirfd = fd;
        pathname = ptr;
    }
    errsv = errno;
    if (dirfd != AT_FDCWD)
        close(dirfd);
    errno = errsv;

    return fd;
} 
```

# elasticsearch - Elasticsearch 搜索时间一致性

> ID：11147851
> 
> 赞同：0
> 
> 时间：2012-06-21T22:37:54.937
> 
> 标签：elasticsearch

我有一个非常简单的问题。

我有一个包含 1600000 个比较大的文档的 elasticsearch 索引，我需要扫描索引以将其与经典的 sql 数据库同步。

我的文档包括 sql ID 和时间戳。

然后同步 sql db 和弹性索引，我只是顺序读取行和文档，都按 id 排序，比较 id 可以确定是否需要删除文档（比较是否定的），添加一个新文档sql 行（比较为正），如果比较为 0，我比较时间戳以了解是否需要更新文档。

它可以工作，但我观察到，当我提前阅读时，阅读文档会变慢很多。

我通过在索引上重复搜索来分块检索我的文档，每次都移动请求的“来自”字段，如下所示：

```
{
    "from" : 0, "size" : 10000,
    "fields" : ["idannonce","ts"],
    "sort" : ["idannonce"],
    "query" : "match_all" {}
} 
```

当“from”为 1000000 时，这个简单的查询比它为 0 时慢很多。

这是正常行为吗？我认为它应该与“idannonce”字段被索引的时间大致相同，不是吗？

任何想法 ？有没有办法编写相同的查询，使其在恒定时间内运行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:18:39.497

我也在做类似的事情，但我发现[https://github.com/jprante/elasticsearch-river-jdbc](https://github.com/jprante/elasticsearch-river-jdbc)更有用。这是非常简单的集成。请尝试使用它。请发布您的代码要点。此外 [https://github.com/lukas-vlcek/bigdesk](https://github.com/lukas-vlcek/bigdesk)在您运行查询时观察图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T23:25:16.947

搜索 API 不是为这个用例设计的。除了获得次优的性能之外，您可能还缺少一些更改，因为您的删除和添加会在更改提交到索引时通过“移动”您的检索窗口来干扰弹性搜索结果。您应该切换到更适合此操作 的[Scroll API 。](http://www.elasticsearch.org/guide/reference/api/search/scroll.html)

# java - 将 commons-daemon 添加到应用程序的价值

> ID：11147853
> 
> 赞同：1
> 
> 时间：2012-06-21T22:38:06.307
> 
> 标签：java, unix, jvm, sigkill, apache-commons-daemon

根据[Apache Commons Daemon 项目](http://commons.apache.org/daemon/)：

> 在系统范围关闭的情况下，虚拟机进程可能会被操作系统直接关闭，而无需通知正在运行的服务器应用程序。

所以我想知道：`commons-daemon`当你实现它时增加了什么价值？如果我有一个 Oracle GlassFish Server 实例正在运行，并且发生了一些事情（OOME、系统范围的崩溃等），通常会向运行 OGS 及其所有部署的应用程序的 JVM 发送一个`SIGTERM`或一个`SIGKILL`，如何`commons-daemon`干预并允许 OGS 和其部署的应用程序要安静/礼貌地关闭？

而且，如果那不是`commons-daemon`目的，有人可以向我解释一个使用它并且有用的用例吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:53:45.427

根据文档，操作系统支持一类特殊的服务器/守护程序，当操作系统即将关闭时，它会发送一个信号（我猜是在实际的 SIGTERM/SIGKILL 之前）通知他们它. Commons Daemon 可以与之交互。

如果有人直接终止进程，我不确定这是否有帮助，但如果您使用操作系统的适当服务管理工具，那么该应用程序可能有足够的时间进行清理。

# facebook - 我为 Facebook Like Button 提供的 url 需要准确还是可以重定向？

> ID：11147857
> 
> 赞同：1
> 
> 时间：2012-06-21T22:38:52.350
> 
> 标签：facebook, facebook-like

所以我正在尝试生成正确的 URL 以进入 facebook Like 按钮。该 URL 指向一个人的 facebook 页面，它是使用他们的 facebook 页面 ID 生成的。

facebook like button[开发人员页面](http://developers.facebook.com/docs/reference/plugins/like/)说我需要`data-href=""`在他们提供的属性中包含这个 URL `<div>`（生成 iframe）。

当我访问一个 URL时，`http://www.facebook.com/234h23o4ub23`它会重定向到正确的位置。所以我想知道我是否可以使用这个较短的网址而不是它重定向到的网址，例如：`http://www.facebook.com/pages/example-venue-name/234h23o4ub23`. 我的数据库中没有存储 URL 的“example-venue-name”段，这使得这种方法非常困难。该页面是要注册它被喜欢还是我必须做整个URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:44:34.573

点赞按钮上的 URL 实际上就是用户会关注的内容，所以只要用户可以关注链接就可以了。该链接是对象的唯一跟踪器，以便 Facebook 知道不同的对象。

# javascript - 地图标记的翻转延迟

> ID：11147859
> 
> 赞同：0
> 
> 时间：2012-06-21T22:38:57.900
> 
> 标签：javascript, jquery, settimeout

我们让开发人员为我们制作了一段 javascript，用于在地图上设置动画标记。请参阅[http://luniablue.com/clients/endowment](http://luniablue.com/clients/endowment)了解它的当前状态。

我遇到的问题是翻转过于敏感，我希望在执行翻转功能之前有 1 秒的暂停。根据我的阅读，我需要声明一个 setTimeout() 函数，但我不清楚在哪里插入它。

我已经尝试了所有可以看到的地方，但除了破坏脚本之外我没有运气。我敢肯定这很简单，但 javascript 不是我的强项。谁能帮我吗？

这是代码：

```
var firstEntry = true;
var lastOn = '';

function showAllPins() {
    if ($('#communities').hasClass('theMouseIsOff')) {
        var citiesArr = [];
        $('.pin').each( function () { 
            citiesArr.push(this.id);
            $('#'+this.id).hide();
        });
        var stillHidden = citiesArr.length;
        while (stillHidden > 0) {
            var a = Math.floor(Math.random()*citiesArr.length);
            if ($('#'+citiesArr[a]).is(':hidden')) {
                $('#'+citiesArr[a]).show().delay(Math.floor(Math.random()*900)).animate({
                    opacity: 1,
                    top: '+=40',
                }, Math.floor(Math.random()*900), 'easeOutBounce');
                stillHidden--;
            }
        }
        firstEntry = true;
        $('#communities').removeClass('theMouseIsOff');
    }
}
function showPin(relid){
    lastOn = relid;
    if ($('#communities').hasClass('theMouseIsOff')) $('#communities').removeClass('theMouseIsOff');
    if (firstEntry == true) {
        $("#communities div[id!=" + relid + "].pin").animate({
            opacity: 0,
            top: '-=40',
        }, 500);
        firstEntry = false;
    } else {
        $("#communities div[id=" + relid + "].pin").animate({
            opacity: 1,
            top: '+=40',
        }, 500, 'easeOutBounce');
    }
}
function removeLastPin() {
    $('#communities').addClass('theMouseIsOff');
    $("#communities div[id=" + lastOn + "].pin").animate({
        opacity: 0,
        top: '-=40',
    }, 500);
    setTimeout('showAllPins()',600);
}

$(document).ready( function () {
    $('.pin').mouseenter( function () {
        relid = $(this).attr('rel');
        showPin(relid);
    }).mouseleave( function () { removeLastPin() });
});

$(document).ready(function() {
    $('.pin').each(function() {
         var selector = '#' + $(this).data('tooltip-id');
         Tipped.create(this, $(selector)[0], { skin: 'light', hook: { target: 'topmiddle', tooltip: 'bottomleft'}});
        });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:51:24.163

你在哪里看到：

```
$(document).ready( function () {
    $('.pin').mouseenter( function () {
        relid = $(this).attr('rel');
        showPin(relid);
    }).mouseleave( function () { removeLastPin() });
}); 
```

您可以将其更改为：

```
$(document).ready( function () {
    $('.pin').mouseenter( function () {
        relid = $(this).attr('rel');
        setTimeout(function(){showPin(relid)}, 1000);
    }).mouseleave( function () { removeLastPin() });
}); 
```

通过更改`showPin()`函数以在超时后执行，引脚应在指定的时间间隔后出现。

**更新：**

如果您希望该函数仅在指定的时间间隔内没有发生 mouseleave 时运行，您可以像这样清除 mouseleave 的时间间隔：

```
$(document).ready(function() {
    $('.pin').mouseenter(function() {
        relid = $(this).attr('rel');
        var awaiting = setTimeout(function() {
            showPin(relid)
        }, 1000);
    }).mouseleave(function() {    
        removeLastPin();
        clearInterval(awaiting);
    });
}); 
```

# javascript - 使用javascript替换表单中的文本

> ID：11147865
> 
> 赞同：0
> 
> 时间：2012-06-21T22:39:22.857
> 
> 标签：javascript, forms, text, field, replace

我有一个包含多个字段的表单。第一个字段称为主题。我想要做的是禁用用户在字段中输入的功能，但它仍然显示，并且他们输入到其他三个字段的文本显示在第一个字段中的变量之间有空格。示例：在这种情况下：“Second_Field: John”“Third_Field: Doe”“Forth_Field: New part”然后在第一个字段，主题上，它将显示：John Doe New Part

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:43:25.047

您可以尝试以下方法：

```
<!-- HTML -->
<input type="text" id="subject" disabled="disabled">
<input type="text" id="field1">
<input type="text" id="field2">
<input type="text" id="field3">

// JavaScript
var fields = [];
for (var i = 1; i <= 3; i++) {
    fields.push(document.getElementById("field" + i).value);
}
document.getElementById("subject").value = fields.join(" "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:52:05.600

尝试这个：

```
<script>
function UpdateText()
{
  document.getElementById("subject").value =document.getElementById("Field1").value + " " +   document.getElementById("Field2").value + " " + document.getElementById("Field3").value;
}
</script>

<input type="text" id="subject" disabled="disabled"/>
<input type="text" id="Field1" onchange="UpdateText()";/>
<input type="text" id="Field2" onchange="UpdateText()";/>
<input type="text" id="Field3" onchange="UpdateText()";/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T23:06:52.633

HTML：

```
<form>
<p><input id="subject" name="subject" disabled size="60"></p>
<p><input id="Second_Field" class="part">
   <input id="Third_Field" class="part">
   <input id="Fourth_Field" class="part"></p>
</form> 
```

​</p>

JavaScript：

```
var updateSubject = function() {
  var outArray = [];
  for (var i=0;i<parts.length;i++) {
      if (parts[i].value !== '' ) {
        outArray.push(parts[i].value);
      }
  }
  document.getElementById('subject').value = outArray.join(' ');
};
var parts = document.getElementsByClassName('part');
for (var i=0;i<parts.length;i++) {
  parts[i].onkeydown = updateSubject;
} 
```

​</p>

# php - 如何适配 Jstree 使用邻接模型？

> ID：11147866
> 
> 赞同：1
> 
> 时间：2012-06-21T22:39:36.380
> 
> 标签：php, mysql, class, jstree, adjacency-list-model

Jstree 使用嵌套集的方法，虽然静态内容可行，但我们与 Ivan Bozhanov 讨论了关于重新使用我们的表以允许每个用户对其进行操作的要求，他建议我们应该使用邻接模型。

我在 PHPClasses 找到了这个库，因为这是我最后的手段，jstree.com/demo 上的文档中没有太多关于它的内容，但是.. 如果我想与 jstree 一起使用，我需要执行哪些步骤有效？

[http://www.phpclasses.org/package/6135-PHP-Create-and-manipulate-adjacency-lists-in-MySQL.html](http://www.phpclasses.org/package/6135-PHP-Create-and-manipulate-adjacency-lists-in-MySQL.html)

提前感谢您提供的任何指导！J.P-

# security - 有一种方法（模式）可以保护其他用户在休息服务中的数据吗？

> ID：11147874
> 
> 赞同：2
> 
> 时间：2012-06-21T22:41:05.870
> 
> 标签：security, design-patterns, rest, architecture

在通过 RESTful 服务公开用户资源（用户数据）的上下文中**，如果第二个用户不是该数据的所有者，我希望不能从其他用户访问其中一个用户的数据**。与其重新发明一些复杂的模型来映射每个用户身份及其数据（编程解决方案），是否有一些最佳实践或设计模式或任何类型的模型可以应用于这个问题？使用用户配置文件，我保证某种用户无法访问另一种用户的数据，但我不能确定同一配置文件的用户不会访问另一个用户数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:53:28.090

您要么需要对用户进行身份验证，然后将用户与数据（您称之为复杂/程序化）相关联，要么您只是让数据对除了创建它的用户之外的所有人都不可读。就像用户使用私钥加密所有数据然后将其存储在您的服务器上一样。这有点不同，因为任何人都可以访问数据，他们只是无法理解它。

我不推荐第二种方法，因为您将无法使用个人资料数据（生日、兴趣、您在该个人资料中可能拥有的任何内容），而且每个人都可以看到加密数据。

但是您认为这是在重新发明复杂事物的想法是自相矛盾的，如果它是如此复杂，那么当您可以使用[大量](http://en.wikipedia.org/wiki/Java_Authentication_and_Authorization_Service) [基于](http://grails.org/plugin/authentication) [插件](http://static.springsource.org/spring-security/site/)的身份验证方案时为什么要重新发明它。在这种情况下，安全是事后才想到的吗？如果是这样，那不应该。如果您对此有保证，那么交付它应该是一个高优先级。

# android - 带有文件的内部存储正在工作，但现在不行

> ID：11147888
> 
> 赞同：0
> 
> 时间：2012-06-21T22:42:38.287
> 
> 标签：android, fileinputstream

我急需帮助。我有一个应用程序在几个小时前运行良好，可以写入和读取内部存储文件。现在我回家了，在我的设备上运行它，它开始强制关闭！这对我来说根本没有任何意义。我唯一的猜测是它试图读取的文件现在不知何故不存在？我正在尝试在应用程序的许多位置读取和写入此文件。这是我在 LogCat 中收到的错误。

```
 06-21 18:14:34.666: W/dalvikvm(5349): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-21 18:14:34.682: E/AndroidRuntime(5349): FATAL EXCEPTION: main
06-21 18:14:34.682: E/AndroidRuntime(5349): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.wglxy.example.dash1/com.wglxy.example.dash1.F2Activity}: java.lang.NullPointerException
06-21 18:14:34.682: E/AndroidRuntime(5349):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at android.os.Looper.loop(Looper.java:130)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at android.app.ActivityThread.main(ActivityThread.java:3683)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at java.lang.reflect.Method.invokeNative(Native Method)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at java.lang.reflect.Method.invoke(Method.java:507)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:850)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:608)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at dalvik.system.NativeStart.main(Native Method)
06-21 18:14:34.682: E/AndroidRuntime(5349): Caused by: java.lang.NullPointerException
06-21 18:14:34.682: E/AndroidRuntime(5349):     at java.io.Reader.<init>(Reader.java:65)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at java.io.InputStreamReader.<init>(InputStreamReader.java:122)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at java.io.InputStreamReader.<init>(InputStreamReader.java:59)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at com.wglxy.example.dash1.Grid.readRawText(Grid.java:214)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at com.wglxy.example.dash1.F2Activity.onCreate(F2Activity.java:75)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-21 18:14:34.682: E/AndroidRuntime(5349):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-21 18:14:34.682: E/AndroidRuntime(5349):     ... 11 more 
```

在我的包含方法 readRawText 的 Grid 类中，它抱怨某行：InputStreamReader inputReader = new InputStreamReader(his)。“fis”在上面声明时考虑了一个特定的目录。

这是 readRawText 方法的代码.....

```
public static String readRawText(Context context)
  {

      FileInputStream fis = null;
    try {
        fis = new FileInputStream("/data/data/com.wglxy.example.dash1/app_myDir/output.txt");
    } catch (FileNotFoundException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

      InputStreamReader inputReader = new InputStreamReader(fis);
      BufferedReader buffReader = new BufferedReader(inputReader);
      String line;
      StringBuilder textFile = new StringBuilder();

      try
      {
          while((line = buffReader.readLine()) != null)
          {
              textFile.append(line);
             // textFile.append('\n');

          }
      }
      catch (IOException e)
      {
          return null;
      }

      return textFile.toString();
  } 

} 
```

由于它给我的错误是一个空指针错误，我一直在想文件可能会以某种方式消失或什么的。如果有人能帮助我解决这个问题，我将非常感激。我只是花了一整天的时间让这个应用程序正常工作，但现在不行了。这简直令人沮丧！你认为你已经完成了一些事情，但你没有......

再次，如果有人能告诉我如何解决这个问题或给我一些宝贵的建议，我将不胜感激。

更新这里是我在 F2Activity 中的 WRITEGRIDS 方法....

```
public void writeGrids(List<Grid> grids) throws IOException
{
    String data;
    FileOutputStream fos = null;

     try
     {
     File dir = getDir("myDir", Context.MODE_PRIVATE);
     Log.d("SEE",dir.getAbsolutePath());
     File myFiles = new File(dir, "output.txt");

     fos = new FileOutputStream(myFiles);

     for(Grid grid : grids)
     {
         data = grid.getGridNickName() + ";" + grid.getGridName() + ";" +
                  grid.getFirstName() + ";" + grid.getLastName() + ";" +
                  grid.getPassword()+ ";" + grid.getLoginURI() + ";"; 
         fos.write(data.getBytes());
     }
     }

      catch (Exception e)
     {
         System.err.println("Error: " + e.getMessage());
     }

     fos.close();

} 
```

所以我猜我需要将文件目录等放在我的代码顶部？但它不应该每次我运行程序时都创建一个新文件吗？如果我听起来很无知，我很抱歉。我对 android 还很陌生，到目前为止，这一直是一场爆炸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:18:49.687

你得到一个 NullPointerException 就行了

```
InputStreamReader inputReader = new InputStreamReader(fis); 
```

当您初始化 FileInputStream 时，您也会遇到 FileNotFoundException。我的猜测是 FileNotFoundException 被抛出是因为文件根本不存在导致引用变量“fis”被分配为空。

output.txt 来自哪里？它是在哪里创建的？您的应用程序中是否有一个地方正在创建文件 /app_myDir/output.txt，但此时尚未到达？

此外，为了简单地解决强制关闭的问题，您需要检查“fis”是否为空。如果它不为空，则继续处理（即使您相对确信该文件存在，这也是一个很好的做法）：

```
if (fis != null) {
    InputStreamReader inputReader = new InputStreamReader(fis);
    BufferedReader buffReader = new BufferedReader(inputReader);
    String line;
    StringBuilder textFile = new StringBuilder();

    try
    {
        while((line = buffReader.readLine()) != null)
        {
            textFile.append(line);
            // textFile.append('\n');
        }
    }
    catch (IOException e)
    {
        return null;
    }

    return textFile.toString();
} else 
    return null; 
```

# jquery - 在下拉菜单元素的样式属性中添加最大宽度的问题

> ID：11147889
> 
> 赞同：0
> 
> 时间：2012-06-21T22:42:38.127
> 
> 标签：jquery, styles, drop-down-menu

我只是想不出或在这里找到任何解决方案，所以我选择问一个问题。我有简单的 css/html 下拉菜单代码，它可以工作并且看起来很好，但是当我添加 jquery 时，问题就开始了。正如您在下面的示例中看到的那样，我正在尝试将同一棵树（ul.children li）元素宽度的最大值添加为该树中所有元素的宽度。好吧，该属性已添加，但该值是 0px 并且即使我尝试将元素范围全球化更改*.children*到所有*ul*仍然存在。是什么导致代码输出 0px 而不是元素所需的最大宽度值。提前致谢！

这是纯 HTML 代码：

```
<ul>

   <li class="page_item page-item-2"><a href="">Sākumlapa</a></li>

   <li class="page_item page-item-4"><a href="">Par mums</a>

      <ul class="children">

        <li class="page_item page-item-6"><a href="">Galerija</a></li>

      </ul>

   </li>

</ul> 
```

这是jQuery代码：

```
 $(document).ready(function() {

                            var maxWidth = 0;

                            var elemWidth = 0;

                            $('.children li').each(function() {

                                elemWidth = parseInt($(this).css('width'));

                                if (parseInt($(this).css('width')) > maxWidth) {

                                    maxWidth = elemWidth;

                                }

                             });

                            $('.children li').each(function() {

                                  $(this).css('width', maxWidth + "px");

                            });

                       }); 
```

执行此操作后，您可以看到为 children.li 元素添加了样式属性，但它包含 0px 不是元素的最大宽度。这是浏览器中的复制和粘贴代码。

```
<ul>

   <li class="page_item page-item-2"><a href="http://localhost/wordpress/?page_id=2">Sākumlapa</a></li>

   <li class="page_item page-item-4"><a href="http://localhost/wordpress/?page_id=4">Par mums</a>

      <ul class="children">

        <li class="page_item page-item-6" style="width: 0px;"><a href="http://localhost/wordpress/?page_id=6">Galerija</a></li>

      </ul>

   </li>

</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:45:19.413

`.outerWidth()`获取计算出的宽度，而不是 css 设置的值。我建议您尝试使用它：

```
var maxWidth = 0;
var elemWidth = 0;

$('.children li').each(function() { 
    elemWidth = $(this).outerWidth();
    if (parseInt($(this).css('width')) > maxWidth) {
        maxWidth = elemWidth;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:50:39.783

```
$(document).ready(function() {

                            var maxWidth = 0;

                            var elemWidth = 0;

                            $('.children li').each(function() {

                                elemWidth = parseInt($(this).outerwidth());

                                if (elemWidth  > maxWidth) {

                                    maxWidth = elemWidth;

                                }

                            });

                            $('.children li').each(function() {

                                $(this).css('width', maxWidth + 'px');

                            });

                        }); 
```

这是演示[http://jsfiddle.net/n4CQv/2/](http://jsfiddle.net/n4CQv/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T22:54:45.920

很接近！如果这是一个下拉菜单，大概是`display: none`默认情况下在您的 CSS 中将下拉菜单设置为，然后在父级悬停时显示？如果是这种情况，那么当元素的 display 属性为 none 时元素没有尺寸，您需要使用`visibility: hidden`隐藏它们并将它们设置为`display: block`您的默认 css，这意味着它们不会显示但仍会占用它们的空间。你的 javsacript 很好，但是你可以使用 jquery 的`.width()`方法来整理一下，另外第二种`$.each`方法是不必要的：

```
$(document).ready(function() {

  var maxWidth = 0;
  var elemWidth = 0;

  $('.children li').each(function() {
    elemWidth = $(this).width();
    if (elemWidth) > maxWidth) {
      maxWidth = elemWidth;
    }
  });

  $('.children li').width( maxWidth );

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T23:21:26.300

我在加载文档之后和每个函数之前添加了这一行：

```
 $('.navigation li').hover(function(){
       // here goes the whole code above
    }); 
```

这解决了我的问题！

# python - 单个 python 列表理解中的两个赋值

> ID：11147890
> 
> 赞同：7
> 
> 时间：2012-06-21T22:42:59.643
> 
> 标签：python, list-comprehension

例如：

```
a = [1,2,3]
x = [2*i for i in a]
y = [3*i for i in a] 
```

如果 a 的大小很大，将列表推导合并为一个（如果可能）会更有效吗？如果是这样，你如何做到这一点？

就像是，

```
x,y = [2*i, 3*i for i in a] 
```

这是行不通的。如果使用列表推导在计算上并不比使用普通的 for 循环更有效，也请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T22:43:53.710

您想使用带有星号运算符[的`zip()`内置函数来执行此操作。](http://docs.python.org/library/functions.html#zip)`zip()`通常将列表转换为对列表，当这样使用时，它会解压缩 - 获取对列表并分成两个列表。

```
>>> a = [1, 2, 3]
>>> x, y = zip(*[(2*i, 3*i) for i in a])
>>> x
(2, 4, 6)
>>> y
(3, 6, 9) 
```

请注意，我不确定这是否真的会更有效。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-21T23:18:47.797

如果对效率有疑问，请使用 timeit 模块，它总是很容易使用：

```
import timeit

def f1(aRange):
    x = [2*i for i in aRange]
    y = [3*i for i in aRange]
    return x,y

def f2(aRange):
    x, y = zip(*[(2*i, 3*i) for i in aRange])
    return x,y

def f3(aRange):
    x, y = zip(*((2*i, 3*i) for i in aRange))
    return x,y

def f4(aRange):
    x = []
    y = []
    for i in aRange:
        x.append(i*2)
        y.append(i*3)
    return x,y

print "f1: %f" %timeit.Timer("f1(range(100))", "from __main__ import f1").timeit(100000)
print "f2: %f" %timeit.Timer("f2(range(100))", "from __main__ import f2").timeit(100000)
print "f3: %f" %timeit.Timer("f3(range(100))", "from __main__ import f3").timeit(100000)
print "f4: %f" %timeit.Timer("f4(range(100))", "from __main__ import f4").timeit(100000) 
```

结果似乎一致地指出第一个选项是最快的。

```
f1: 2.127573
f2: 3.551838
f3: 3.859768
f4: 4.282406 
```

# javascript - 如何在javascript中初始化一个对象？

> ID：11147904
> 
> 赞同：5
> 
> 时间：2012-06-21T22:44:33.940
> 
> 标签：javascript

我想用javascript初始化一个对象..

我的代码如下：

```
var PageSlider = {

    sliders: [],

    addSlider: function(display, target, itemClass, width, height, itemsPerPage, defaultPage){
        var slideConfig = {
                display : display,
                target : target
        };
        var slider = this.createSlider(slideConfig);
        slider.initSlider();
        this.sliders.push(slider);

    },

    copy : function(obj) {
        if (null == obj || "object" != typeof obj) return obj;
        var copy = obj.constructor();
        for (var attr in obj) {
            if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];
        }
        return copy;
    },

    getInstance : function(){
        var copy = PageSlider.copy(PageSlider);
        this.sliders.length = 0;
        return copy;
    }

} 
```

使用 getInstance() 方法只需复制对象。我需要做的是获取对象的实例。

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T22:48:57.753

我会推荐原型设计，例如以下

```
var PageSlider = function() {
    this.sliders = [];
}

PageSlider.prototype.addSlider = function(display, target, itemClass, width, height, itemsPerPage, defaultPage){
    var slideConfig = {
            display : display,
            target : target
    };
    var slider = this.createSlider(slideConfig);
    slider.initSlider();
    this.sliders.push(slider);

}

slider = new PageSlider(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T22:47:46.283

PageSlider已经*是*一个对象。因此，要在它之外获取一个实例，只需使用它的名称，如下所示：

```
var giveMeAnInstanceOfPageSlider = PageSlider; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T22:49:19.367

您可以这样做，因为 PageSlider 已经是一个对象

var pageSlider = PageSlider

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T22:47:35.670

怎么样`var pageSlider = PageSlider`。`PageSlider`已经是一个对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T22:48:24.657

代码背后的想法是`getInstance`复制对象`PageSlider`，实际上是使用现有对象的值初始化一个新的空`PageSlider`对象——相当于获取对象的实例。

这段代码有点奇怪，因为它模糊了 JavaScript 中“类”和对象之间的界限（有点类似于编程语言 Io 所做的），并且更符合对象原型的概念。

# c - TCP 传输中的字符串比较错误

> ID：11147919
> 
> 赞同：3
> 
> 时间：2012-06-21T22:46:15.243
> 
> 标签：c, linux, string, network-programming

我已经用 c 编写了一个程序，可以将文件从 c 中的客户端逐行发送到服务器。文件传输完成后，我`endoffile`在txt文件中提供了一行，用于在服务器中进行字符串比较，以识别文件结束，接下来正在传输下一个文件。下一个文件必须写入服务器中的另一个文件。但问题是 strcmp 从未检测到`endoffile`代码中的 并且`endoffile`从客户端中的文件中接收到相同的字符串 amd 继续将下一个文件从客户端写入服务器中的同一文件。

```
char enof[]="endoffile";
...
do
{
   rewind(appcrt);
   bytes_recieved = recv(pass_arg.connected, recv_data_c, strlen(recv_data_c), 0);
   recv_data_c[bytes_recieved-1] = '\0';
   fputs(recv_data_c, appcrt);
   if(strcmp(enof,recv_data_c) == 0){break;}
}while(check<count); 
```

文本文件：

```
Necessary data
that is
being transmitted
to be written to the file
endoffile 
```

用于从 txt 文件读取并发送到服务器的代码：

```
while (fgets(line, sizeof(line), crt) != NULL)
{
    send(sock, line, sizeof(line), 0);
} 
```

我必须对条件进行什么更改才能解决问题并且代码退出`do....while();`循环。提前致谢。运行平台：Linux

Edit1：编辑`do....while()`如下：

```
do
    {
       rewind(appcrt);
       bytes_recieved = recv(pass_arg.connected, recv_data_c, 100, 0);
       recv_data_c[bytes_recieved] = '\0';
       fputs(recv_data_c, appcrt);
       printf("%s-%s",enof,recv_data_c);
       //if(strcmp(enof,recv_data_c) == 0){break;}
    }while(check<count); 
```

在终端中得到以下输出：

```
endoffile-file1line1
endoffile-file1line2
endoffile-file1line3
endoffile-file1line4
endoffile-file1line5
endoffile-file1line6
endoffile-endoffile
endoffile-file2line1
endoffile-file2line2
endoffile-file2line3
endoffile-file2line4
endoffile-file2line5
endoffile-file2line6
.
.
. 
```

还是没有希望。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:53:51.747

即使客户端一次向套接字写入一行，服务器也不会使用它，因为通过套接字传输的数据只是一个字节流。服务器必须读取到下一个换行符，然后进行比较。一个简单的算法将一次读取一个字节并检查它是否是换行符，如果不是，则将其附加到字符串中，直到读取换行符：

```
/* Read next line. */
memset(line, 0, sizeof(line));
size_t line_len = 0;
while (line_len < sizeof(line) - 1 &&
       1 == recv(pass_arg.connected, &line[line_len], 1, 0))
{
    if ('\n' == line[line_len]) break;
    line_len++;
} 
```

除此之外，代码还有几个问题：

*   您需要发送从文件中读取的内容，因为它可能小于`sizeof(line)`. 改变：

    ```
    send(sock, line, sizeof(line), 0); 
    ```

    至：

    ```
    send(sock, line, strlen(line), 0); 
    ```

    并检查返回值`send()`以确定是否成功。

*   以下是不正确的，因为它最多只能读取先前读取的内容（或者如果初始化为空字符串，则不会读取任何内容）：

    ```
    bytes_recieved = recv(pass_arg.connected,
                              recv_data_c, strlen(recv_data_c), 0); 
    ```

    并且，再次检查返回值，尤其是当返回值用于索引数组时。如果`recv()`失败，则返回`-1`，这将导致对数组的越界访问导致未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:51:29.040

```
while (fgets(line, sizeof(line), crt) != NULL)
{
    send(sock, line, sizeof(line), 0);
} 
```

不要忘记`fgets()`，如果该行是空白的，它可能只读取一个字节。因此，您的`send()`呼叫在每次呼叫时都会发送大量未初始化的数据——无论是前几行的内容还是`free()`您的应用程序之前的随机内存 d。

因此，您的接收程序需要比较：

```
endoffiletten to the file 
```

终于*看到*最后的字符串了。（假设`line`缓冲区一开始就充满了 ASCII`NUL`字符。）

# asp.net-mvc - ASP.NET MVC 3 与 Razor 和 Spark 视图引擎并排

> ID：11147932
> 
> 赞同：1
> 
> 时间：2012-06-21T22:47:46.700
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-routing, spark-view-engine

我最近从 MVC2 升级到 MVC3。我们曾经使用 Spark 视图引擎，我正在尝试开始迁移到 Razor。至此升级到 MVC3 是成功的。我也升级了 Spark 视图引擎，因为我需要这样做。

问题是我能够成功渲染 Spark 和 Razor 视图，但由于某种原因，MVC 正在一个位置查找 Spark 文件，而在另一个位置查找 Razor。好像 Razor 没有正确考虑我的区域，但 Spark 是。

# 输出：

```
<pre>
The view 'index' or its master was not found or no view engine supports the searched locations. The following locations were searched:

~/Areas/Live/Views/multimedia/index.aspx
~/Areas/Live/Views/multimedia/index.ascx
~/Areas/Live/Views/Shared/index.aspx
~/Areas/Live/Views/Shared/index.ascx
~/Views/multimedia/index.aspx
~/Views/multimedia/index.ascx
~/Views/Shared/index.aspx
~/Views/Shared/index.ascx
~/Areas/Live/Views/multimedia/index.cshtml
~/Areas/Live/Views/multimedia/index.vbhtml
~/Areas/Live/Views/Shared/index.cshtml
~/Areas/Live/Views/Shared/index.vbhtml
~/Views/multimedia/index.cshtml
~/Views/multimedia/index.vbhtml
~/Views/Shared/index.cshtml
~/Views/Shared/index.vbhtml
Live\~\Areas\Live\Views\multimedia\index.spark
Live\~\Areas\Live\Views\Shared\index.spark
Live\multimedia\index.spark
Live\Shared\index.spark
Live\~\Areas\Live\Views\multimedia\index.shade
Live\~\Areas\Live\Views\Shared\index.shade
Live\multimedia\index.shade
Live\Shared\index.shade
~\Areas\Live\Views\multimedia\index.spark
~\Areas\Live\Views\Shared\index.spark
multimedia\index.spark
Shared\index.spark
~\Areas\Live\Views\multimedia\index.shade
~\Areas\Live\Views\Shared\index.shade
multimedia\index.shade
Shared\index.shade
</pre> 
```

如果我将 .cshtml 文件移动到 MVC 想要的位置，它将起作用，但这不会削减它。为什么这两个引擎的位置会略有不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:28:35.150

从我读过的内容来看，Razor 和 Spark 似乎以不同的方式寻找视图（无论如何在使用区域时）。我不完全确定这是否是真的，或者我正在研究的这个实现是否有所不同。我设法通过扩展 Razor 引擎以遵循我们项目的相同模式来解决我的问题。

```
 public class CustomRazorViewEngine : RazorViewEngine
  {
      public CustomRazorViewEngine(): base()
      {
          AreaMasterLocationFormats = new string[] { "~/Areas/{2}/Views/{1}/%1/{0}.cshtml",
                             "~/Areas/{2}/Views/{1}/%1/{0}.vbhtml",
                             "~/Areas/{2}/Views/Shared/%1/{0}.cshtml",
                             "~/Areas/{2}/Views/Shared/%1/{0}.vbhtml" };

          AreaPartialViewLocationFormats = new string[] { "~/Views/{2}/Shared/{0}.cshtml" };

          AreaViewLocationFormats = new string[] { "~/Views/{2}/{1}/{0}.cshtml",
                       "~/Views/{2}/Shared/{0}.cshtml" };

          ViewLocationFormats = new string[] { "~/Views/{1}/{0}.cshtml",
                       "~/Views/Shared/{0}.cshtml" };

          MasterLocationFormats = new string[] { "~/Views/{1}/%1/{0}.cshtml",
                         "~/Views/{1}/%1/{0}.vbhtml",
                         "~/Views/Shared/%1/{0}.cshtml",
                         "~/Views/Shared/%1/{0}.vbhtml" };

          PartialViewLocationFormats = new string[] { "~/Views/{1}/{0}.cshtml",
                          "~/Views/{1}/{0}.vbhtml",
                          "~/Views/Shared/{0}.cshtml",
                          "~/Views/Shared/{0}.vbhtml" };

          FileExtensions = new string[] { "cshtml", "vbhtml" };

      }

  } 
```

# jquery - 如何使用 jQuery 将对象提交给 struts2 动作？

> ID：11147933
> 
> 赞同：0
> 
> 时间：2012-06-21T22:48:05.493
> 
> 标签：jquery, struts2

我有一个对象，我从用户选择的表行中的选择中填充。我有一个 jQuery 函数来捕获点击事件，并且隐藏的表单字段填充了我需要的 id。

但是，我不确定将该对象发送到 struts2 操作的正确方法？我尝试使用这个：

```
$(function() {
    $('#tbl tr').click(function() {
            var id = $(this).closest('tr').find('input:hidden').val();
 var page = "<s:url action='update/deleteInfo.action'/>?model.isDelete=true&model.info.id=id"; 
          console.log(page);
    window.location.href=(page);
   });
}); 
```

模型对象有一个 isDelete 布尔变量，模型有一个嵌套的 info 对象，该对象有一个带有 getter/setter 的 id 变量。

但是，当我发送它时，模型对象没有填充这些条目。有没有办法做到这一点或比 url 标签更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:11:26.340

在您的网址末尾，`id`应作为变量而不是字符串附加

```
var page = "<s:url action='update/deleteInfo.action'/>?model.isDelete=true&model.info.id="+id; 
```

# javascript - 无法在 javascript 中更改多个值

> ID：11147934
> 
> 赞同：1
> 
> 时间：2012-06-21T22:48:08.770
> 
> 标签：javascript, forms

好吧，我遇到了一个问题。我正在修改 ATS 系统，需要添加一些功能，但我在 JavaScript 中遇到了一个奇怪的事情。基本上我需要根据下拉菜单中的选择更改一组表单值，并且代码可以工作......当只有一件事需要更改时。当我添加其他需要更改的部分时，它停止工作。我跑遍了整个互联网和许多堆栈问题，但似乎没有任何帮助。有效的代码是：

```
<form id="test" name="test">
        <select id="statusID" name="statusID" onchange="javascript: return updateForm();">
                <option value="" selected></option>
                <option value="test1">One</option>
                <option value="2">Two</option>
        </select>
        <br />
        <input type="hidden" value="Test" id="RS" name="RS" />
    </form>

<script type='text/javascript'>
function updateForm()
{   
    if (document.getElementById('statusID').selectedIndex  == "2") 
                document.getElementById('RS').value = '200' 

                else if(document.getElementById('statusID').selectedIndex == "1")
                document.getElementById('RS').value = 'RSP'
}
</script> 
```

这在我在服务器上测试它时有效，但是当我添加需要填充的其他字段时它完全停止工作。我正在使用的 JavaScript 如下。我已经根据我看到的代码尝试了一些变体，但无济于事。

```
<script type='text/javascript'>
function updateForm()
{

    if (document.getElementById('statusID').selectedIndex  == "2") 
                document.getElementById('RS').value = '200'
                document.getElementById('RSDATE').value = '200'
                document.getElementById('RSP').value = '200'

                else if(document.getElementById('statusID').selectedIndex == "1")
                document.getElementById('RS').value = 'RSP'
                document.getElementById('RSDATE').value = 'RSP'
                document.getElementById('RSP').value = 'RSP'          
            }

</script> 
```

我应该指出，我根本不精通 JavaScript。我也不精通 PHP……但我正在修改基于 PHP 的 ATS 系统。这段代码是我和目标（完成 ATS 系统）之间的倒数第二个块，因此将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:50:01.680

从问题的上下文来看，您应该在 if 和 else if 之后添加大括号：（Combat 也指出，应该添加分号）

```
 if (document.getElementById('statusID').selectedIndex  == "2")  {
            document.getElementById('RS').value = '200';
            document.getElementById('RSDATE').value = '200';
            document.getElementById('RSP').value = '200';
        }
        else if(document.getElementById('statusID').selectedIndex == "1") {
            document.getElementById('RS').value = 'RSP';
            document.getElementById('RSDATE').value = 'RSP';
            document.getElementById('RSP').value = 'RSP';      
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T22:56:43.167

您需要在每行的末尾使用分号以及每个条件的花括号。

```
function updateForm() {
    if (document.getElementById('statusID').selectedIndex == "2") {
        document.getElementById('RS').value = '200';
        document.getElementById('RSDATE').value = '200';
        document.getElementById('RSP').value = '200';
    }

    else if (document.getElementById('statusID').selectedIndex == "1") {
        document.getElementById('RS').value = 'RSP';
        document.getElementById('RSDATE').value = 'RSP';
        document.getElementById('RSP').value = 'RSP';
    }
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:51:52.127

当你想要执行一个动作块时，条件句后面需要跟括号。例如：

```
if (document.getElementById('statusID').selectedIndex  == "2") {
            document.getElementById('RS').value = '200'
            document.getElementById('RSDATE').value = '200'
            document.getElementById('RSP').value = '200'
} 
```

# sql - 为什么 Rails ActiveRecord 会两次访问数据库？

> ID：11147942
> 
> 赞同：2
> 
> 时间：2012-06-21T22:49:12.423
> 
> 标签：sql, ruby-on-rails, activerecord

```
@integration = Integration.first(:conditions=> {:integration_name => params[:integration_name]}, :joins => :broker, :select => ['`integrations`.*, `brokers`.*'])
$stderr.puts @integration.broker.id # This line causes Brokers to be queried again 
```

结果是：

```
Integration Load (0.4ms)   SELECT `integrations`.*, `brokers`.* FROM `integrations` INNER JOIN `brokers` ON `brokers`.id = `integrations`.broker_id WHERE (`integrations`.`integration_name` = 'chicke') LIMIT 1
Integration Columns (1.5ms)   SHOW FIELDS FROM `integrations`
Broker Columns (1.6ms)   SHOW FIELDS FROM `brokers`
Broker Load (0.3ms)   SELECT * FROM `brokers` WHERE (`brokers`.`id` = 1) 
```

任何想法为什么 Rails 会再次访问数据库，`brokers`即使我已经加入/选择了它们？

以下是模型（代理 -> 集成是一对多的关系）。请注意，这是不完整的，我只包括了建立它们关系的行

```
class Broker < ActiveRecord::Base

  # ActiveRecord Associations
  has_many :integrations

class Integration < ActiveRecord::Base

  belongs_to :broker 
```

我使用的是 Rails/ActiveRecord 2.3.14，所以请记住这一点。

当我这样做时`Integration.first(:conditions=> {:integration_name => params[:integration_name]}, :include => :broker)`，那条线会导致两个`SELECT`s

```
Integration Load (0.6ms)   SELECT * FROM `integrations` WHERE (`integrations`.`integration_name` = 'chicke') LIMIT 1
  Integration Columns (2.4ms)   SHOW FIELDS FROM `integrations`
  Broker Columns (1.9ms)   SHOW FIELDS FROM `brokers`
  Broker Load (0.3ms)   SELECT * FROM `brokers` WHERE (`brokers`.`id` = 1) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T01:40:24.003

使用`include`而不是`joins`避免重新加载`Broker`对象。

```
Integration.first(:conditions=>{:integration_name => params[:integration_name]}, 
  :include => :broker) 
```

无需给出该`select`子句，因为您没有尝试规范化`brokers`表列。

**注1：**

在预先加载依赖项时，AR 对每个依赖项执行一个 SQL。在您的情况下，AR 将执行 main sql + `broker`sql。由于您试图获得一排，因此没有太多收获。当您尝试访问 N 行时，如果您急切加载依赖项，您将避免 N+1 问题。

**笔记2：**

在某些情况下，使用自定义急切加载策略可能会有所帮助。让我们假设您只想获取集成的关联代理名称。您可以按如下方式优化您的 sql：

```
integration = Integration.first(
  :select => "integrations.*, brokers.name broker_name",
  :conditions=>{:integration_name => params[:integration_name]}, 
  :joins => :broker)

integration.broker_name # prints the broker name 
```

查询返回的对象将包含`select`子句中的所有别名列。

`Integration`当您想要返回对象时，即使没有相应的对象，上述解决方案也不起作用`Broker`。你必须使用`OUTER JOIN`.

```
integration = Integration.first(
  :select => "integrations.*, brokers.name broker_name",
  :conditions=>{:integration_name => params[:integration_name]}, 
  :joins => "LEFT OUTER JOIN brokers ON brokers.integration_id = integrations.id") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T20:21:46.817

这些`:joins`选项只是使活动记录向查询添加连接子句。它实际上并没有使活动记录对返回的行做任何事情。关联未加载，因此访问它会触发查询

该`:include`选项是关于提前加载关联的。活动记录有两种策略来做到这一点。一种是通过大连接查询，另一种是通过每个关联触发一个查询。默认为后者，这就是您看到两个查询的原因。

`Integration.preload(:broker)`在 rails 3.x 上，您可以通过或来决定您想要哪些策略`Integration.eager_graph(:broker)`。

rails 2.x 中没有这样的工具，所以您唯一能做的就是欺骗用于确定策略的启发式方法。每当 rails 认为 order 子句、select 子句或条件引用了包含关联上的列时，它就会切换到 joins 策略（因为它是唯一在这种情况下有效的策略）。

例如做类似的事情

```
Integration.first(:conditions => {...}, :include => :broker, :select => 'brokers.id as ignored') 
```

应该强制使用替代策略（在这种情况下，活动记录实际上忽略了选择选项）。

# android - Facebook Graph API 按类别搜索地点

> ID：11147947
> 
> 赞同：5
> 
> 时间：2012-06-21T22:49:33.620
> 
> 标签：android, facebook, facebook-graph-api

我目前正在开发一个 Android 应用程序，它使用 Facebook 图形 API 根据用户的位置获取页面/位置。我还想按类别过滤结果，例如餐馆。现在我只是像这样搜索“餐厅”这个名字： [https ://graph.facebook.com/search?q=restaurant&type=place¢er=37.76,-122.427&distance=1000](https://graph.facebook.com/search?q=restaurant&type=place&center=37.76,-122.427&distance=1000)

问题是它不会找到没有名称“餐厅”的页面/地点，它还会返回与餐厅没有任何关系的地点。我也有语言问题，在非英语国家我的搜索将完全失败。

我正在考虑的一个可能的解决方案是获取一个范围内的所有位置并在我的应用程序中解析它们以获取类别或名称。显然，这给我的应用程序带来了很多开销。

我想知道是否有更好的解决方案，比如使用 FQL 来获得过滤结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T02:40:20.330

应该有，但我无法解开如何。

此 FQL 查询将为您提供有关已知位置附近所有地点的信息：

```
SELECT name, page_id, categories, description, general_info 
   FROM page WHERE page_id IN 
     (SELECT page_id FROM place WHERE 
        distance(latitude, longitude, "37.76", "-122.427") < 1000
      ) 
```

该字段是一个包含值和`categories`的数组。查看这些结果，有一系列类别名称，如“餐厅”：“意大利餐厅”、“酒吧/餐厅”等。`id``name`

我找不到的是一种向它添加`WHERE categories`返回数据的子句的方法。

# php - 使用 php 中的会话识别用户页面中的用户

> ID：11147953
> 
> 赞同：0
> 
> 时间：2012-06-21T22:51:06.683
> 
> 标签：php, session

希望这对董事会来说是一个简单的问题。另外，请记住，我是初学者。所以，如果我错过了一些**重要**的步骤，请告诉我。

我想要做的是设置一个用户页面以在用户在登录页面上输入后识别用户的电子邮件。如您所见，我正在使用 FatCow 托管，并编辑了我的密码/用户名和任何其他个人数据。这是我的代码，非常感谢您的帮助：

**登录页面：**

```
<?php

if(isset($_REQUEST['submitted'])) {

    $email = $_POST['email'];
    $password = $_POST['password'];

    $link = mysql_connect('root.fatcowmysql.com', 'username', 'password'); 
    if (!$link) { 
        die('Could not connect: ' . mysql_error()); 
    } 

    if ($email&&$password) 
    { 
        mysql_select_db(lcmembership); 

        $query = mysql_query("SELECT * FROM users WHERE email='$email' && password='$password'");

        $numrows = mysql_num_rows($query);

        if($numrows !=0)
        {
            session_save_path('/home/users/web/b2582/username/phpsessions'); 
            session_start();
            $_SESSION['users'] = "test";
            header("location: users.php");
        }
        else
            echo ("<p style='position: absolute; left: 500px; top: 150px; font-family: arial;color: white; background-color: #F1433F; border-radius: 10px; padding: 10px;'>That email address doesn't exist in our records. </p>");
        }
    } 
    else
    {
        echo ("<p style='position: absolute; left: 500px; top: 150px; font-family: arial;color: white; background-color: #F1433F; border-radius: 10px; padding: 10px; '>Incorrect Password. </p>");
    }
}
?>
<html>Form here with Action="" and Method="Post"</html> 
```

**用户页面：**

```
<?php
session_start();
echo $_SESSION['users'];
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T23:32:55.473

如果您像您一样设置自定义 session_save_path() ，那么您还需要在其他页面上调用它。该方法既是getter又是setter。

因此，在您的用户页面上，您需要以下内容：

```
<?php
    session_save_path(); // Get session path
    session_start(); // Resume session
    echo $_SESSION['users'];
?> 
```

此外，您需要更正您的 else 逻辑。在一个 if 链中有两个 else 语句。对于第一个，您需要执行 else if，然后您可以在最后使用 else 进行默认设置。就个人而言，尽管我会在您的代码中进一步移动电子邮件和密码逻辑。由于您的 MySQL 查询仅查找两者都匹配的记录，因此您现在拥有它是多余的。

# ruby-on-rails - 列出存储桶时 Ruby Amazon S3 访问被拒绝

> ID：11147961
> 
> 赞同：18
> 
> 时间：2012-06-21T22:51:49.340
> 
> 标签：ruby-on-rails, ruby, amazon-s3, amazon-web-services, buckets

红宝石新手在这里。

我获得了访问亚马逊云数据的权限。我开始认为访问密钥已关闭，但我可能错了。有人帮忙！

我将 aws 文件夹作为插件

```
>> Version
=> "0.6.3"

>> AWS::S3::Base.establish_connection!(:access_key_id =>'*******', :secret_access_key => '*****')
=> #<AWS::S3::Connection:0x007fd0539bb4c0 @options={:server=>"s3.amazonaws.com", :port=>80, :access_key_id=>"****", :secret_access_key=>"****"}, @access_key_id="****", @secret_access_key="****", @http=#<Net::HTTP s3.amazonaws.com:80 open=false>>

>> AWS::S3::Service.buckets   
=> AWS::S3::AccessDenied: Access Denied

from /Users/PBR/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/aws-s3-0.6.3/lib/aws/s3/error.rb:38:in `raise'
from /Users/PBR/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/aws-s3-0.6.3/lib/aws/s3/base.rb:72:in `request'
from /Users/PBR/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/aws-s3-0.6.3/lib/aws/s3/base.rb:88:in `get'
from /Users/PBR/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/aws-s3-0.6.3/lib/aws/s3/service.rb:21:in `buckets'
from /Users/PBR/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/aws-s3-0.6.3/lib/aws/s3/extensions.rb:183:in `block in buckets'
from /Users/PBR/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/aws-s3-0.6.3/lib/aws/s3/extensions.rb:152:in `expirable_memoize'
from /Users/PBR/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/aws-s3-0.6.3/lib/aws/s3/extensions.rb:182:in `buckets' 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-11-22T22:22:31.803

我必须去 IAM -> 用户 -> “附加用户策略”并让我的用户管理员

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-10T17:17:00.773

您可以通过以下方式解决此问题。

1.  首先去亚马逊的 s3 控制台。
2.  然后点击桶。
3.  然后单击右侧的属性选项卡。
4.  然后点击权限选项
5.  点击添加更多权限
6.  选中所有复选框并保存。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-05T18:48:50.337

IAM，您的用户所属的组，并添加 S3FullAccess 或 S3 ReadOnlyAccess

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-25T20:07:22.210

原来我的访问密钥无效。我让管理员授予我更多权限，它终于奏效了。

谢谢！！

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-11-09T19:47:12.183

对此的正确答案肯定是：IAM -> 用户 -> “附加用户策略”并使您的用户成为管理员
[![在此处输入图像描述](../Images/1ed30dc6b651c7a2422f7dc32103ccf1.png)](https://i.stack.imgur.com/mM6xl.png)

# java-me - 最小化并取回显示

> ID：11147963
> 
> 赞同：2
> 
> 时间：2012-06-21T22:52:00.967
> 
> 标签：java-me, midp, midlet, lcdui

我想最小化我的应用程序，并在计时器结束后将其取回。

我使用下面的代码。

要最小化应用程序，请使用以下代码行：

```
 Display.getDisplay (MIDLET_CLASS_NAME).setCurrent (null); 
```

要恢复屏幕，请使用以下命令：

```
 Display.getDisplay (MIDLET_CLASS_NAME).setCurrent (myCanvas); 
```

但是，当手机显示屏被关闭并进入时钟模式时，我的 midlet 显示屏不会显示，直到按下任何按钮。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:02:30.457

从您的问题看来，您希望`setCurrent`以某种方式“强制”设备立即显示您的屏幕，或者仅在屏幕可见后才返回。

事实并非如此，正如[Display.setCurrent](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Display.html#setCurrent%28javax.microedition.lcdui.Displayable%29 "API 文档")的 API 文档中明确解释的那样：

> 请求`Displayable`在显示器上显示不同的对象。**更改通常不会立即**生效。它可能会延迟，以便在事件传递方法调用之间发生，尽管不能保证在调用下一个事件传递方法之前发生。该`setCurrent`方法**立即返回，无需等待**更改发生...
> 
> ...如果应用程序在后台，传递一个非空引用`setCurrent`可能会被应用程序管理软件解释为应用程序请求被带到前台的请求...这些只是请求，并且**有不要求应用程序管理软件及时遵守这些要求，如果有的话**......

* * *

考虑重新设计您的 MIDlet 以适应指定的行为。

如果`myCanvas`是 Canvas 的一个实例，则可以使用[showNotify()](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Canvas.html#showNotify%28%29)事件。

对于通用`Displayable`屏幕[，isShown()](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Displayable.html#isShown%28%29)方法检查它是否在显示器上实际可见。

有时让用户明确地确认从后台返回是有意义的，比如

```
display.setCurrent(new Alert("back to foreground", "dismiss to continue...",
        null, AlertType.INFO), myCanvas); 
```

# python - sympy：规范化右手边有常数的线性等式

> ID：11147966
> 
> 赞同：1
> 
> 时间：2012-06-21T22:52:23.693
> 
> 标签：python, math, sympy

我正在尝试找到一种体面的方法（使用 sympy）来规范化右侧常数的线性等式。例如：

```
x + 1 = y 
```

变成：

```
x - y = -1 
```

这是我相当老套的解决方案：

```
def canonical_linear(f):
""" canonicalise a linear equality """

    lhs = f.lhs - f.rhs
    const_l = [ x for x in lhs.as_ordered_terms() if x.is_number ]

    if len(const_l) == 0:
        const = 0
    elif len(const_l) == 1:
        const = const_l[0]
    else:
        raise NotImplementedError("SHIT")

    return sympy.Eq(lhs - const, -const) 
```

这可以改进吗？干杯？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:46:28.350

`solve`这是来自SymPy中例程的源代码：

```
1262         if all(p.is_linear for p in polys):
1263             n, m = len(polys), len(symbols)
1264             matrix = zeros(n, m + 1)
1265 
1266             for i, poly in enumerate(polys):
1267                 for monom, coeff in poly.terms():
1268                     try:
1269                         j = list(monom).index(1)
1270                         matrix[i, j] = coeff
1271                     except ValueError:
1272                         matrix[i, m] = -coeff
1273 
1274             # returns a dictionary ({symbols: values}) or None
1275             result = solve_linear_system(matrix, *symbols, **flags) 
```

它将每个方程转换为多项式（`Poly`是 SymPy 中用于高效处理多项式的类），如果多项式是线性的，则遍历它以构造要求解的矩阵（最后一列是自由系数）。

上面的代码没有显示转换为多项式。多项式在 中`polys`，自由符号在 中`symbols`。

# user-interface - 如何使用文件路径列表构建 wx.TreeControl？

> ID：11147970
> 
> 赞同：0
> 
> 时间：2012-06-21T22:53:10.940
> 
> 标签：user-interface, wxpython

我想创建一个 TreeControl，它将是一个包含图像文件名的侧面板。如何生成带有 wx.treeControl 文件路径列表的树？

文件路径示例

C:\Program Files\Windows Sidebar\Gadgets\Weather.Gadget\images\120DPI\(120DPI)alertIcon.png

C:\Program Files\Windows Sidebar\Gadgets\Weather.Gadget\images\120DPI\(120DPI)grayStateIcon.png

C:\Program Files\Windows Sidebar\Gadgets\Weather.Gadget\images\120DPI\(120DPI)greenStateIcon.png

C:\Program Files\Windows Sidebar\Gadgets\Weather.Gadget\images\120DPI\(120DPI)notConnectedStateIcon.png

C:\Program Files\Windows Sidebar\Gadgets\Weather.Gadget\images\144DPI\(144DPI)alertIcon.png

我希望能够使用 wx.TreeControl 将它们放入目录树中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:07:19.850

你不能只使用 GenericDirCtrl 或者 MultiDirDialog 吗？如果您真的想做自己的事情，那么这个愚蠢的示例应该可以帮助您入门：

```
import glob
import os
import wx

########################################################################
class MyTreeCtrl(wx.TreeCtrl):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.TreeCtrl.__init__(self, parent)

########################################################################
class MyPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent=parent)

        path = r'C:\Users\mdriscoll\Documents'
        paths = glob.glob(path + "/*")

        self.tree = MyTreeCtrl(self)

        isz = (16,16)
        il = wx.ImageList(isz[0], isz[1])
        fldridx = il.Add(wx.ArtProvider_GetBitmap(wx.ART_FOLDER, 
                                                  wx.ART_OTHER, isz))
        fldropenidx = il.Add(wx.ArtProvider_GetBitmap(wx.ART_FILE_OPEN,
                                                      wx.ART_OTHER, isz))
        self.tree.SetImageList(il)

        self.root = self.tree.AddRoot(os.path.basename(path))
        self.tree.SetPyData(self.root, None)
        self.tree.SetItemImage(self.root, fldridx, wx.TreeItemIcon_Normal)
        self.tree.SetItemImage(self.root, fldropenidx, wx.TreeItemIcon_Expanded)

        for item in paths:
            if os.path.isdir(item):
                child = self.tree.AppendItem(self.root, os.path.basename(item))
                self.tree.SetPyData(child, None)
                self.tree.SetItemImage(child, fldridx, wx.TreeItemIcon_Normal)
                self.tree.SetItemImage(child, fldropenidx, wx.TreeItemIcon_Expanded)
        self.tree.Expand(self.root)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.tree, 1, wx.EXPAND)
        self.SetSizer(sizer)

########################################################################
class MyFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        super(MyFrame, self).__init__(None, title="TreeCtrl Example")
        panel = MyPanel(self)
        self.Show()

if __name__ == "__main__":
    app = wx.App()
    frame = MyFrame()
    app.MainLoop() 
```

# objective-c - StoryBoard 中的 UIStepper 水平位置正确，但在正在运行的 App 中不正确

> ID：11147971
> 
> 赞同：1
> 
> 时间：2012-06-21T22:53:37.790
> 
> 标签：objective-c, ios, xcode

我对 UIStepper 和 XCode 有疑问。我正在为 iOS 5 编写代码。在情节提要中，步进器的位置正确，但后来在应用程序中它的位置高于应有的位置。因为在步进器上方有一个按钮，步进器现在位于该按钮的顶部。我用模拟器和 iPhone 测试了这个应用程序，都是同样的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:45:35.190

好的，我解决了。该项目的自动调整大小属性错误。

# database-design - 应该使用什么样的表结构来将记忆函数参数和结果存储在关系数据库中？

> ID：11147972
> 
> 赞同：0
> 
> 时间：2012-06-21T22:53:44.150
> 
> 标签：database-design, memoization

给定一个返回标量值的 n 个变量的昂贵函数：

```
f(x1, x2, ..., xn) = y 
```

如果我想在关系数据库中记忆这个函数，我应该使用什么样的表结构，以及应用什么样的数据建模方法？

（相关但从不同的角度：[什么样的数据模型模型函数参数和结果？](https://stackoverflow.com/questions/11147703/what-kind-of-data-model-models-function-parameters-and-results)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:14:15.230

在某种程度上取决于“n”的值，您可能可以像这样对其进行建模。假设“n”的值为 137。

```
create table expensive_function_of_n_vars (
  x1 integer not null,
  x2 integer not null,
  ...
  x137 integer not null,
  primary key (x1, x2, ..., x137),
  result integer not null
); 
```

在正常情况下，我不愿意在不包含 CHECK() 约束的情况下存储结果以确保它是正确的结果。就您而言，这可能不切实际，但无论如何您都应该考虑一下。

这假设每一列都带有某种含义。也就是说，我假设在真正的问题域中，这些列中的每一列都有一个比“x3”更有意义的名称。

例如，在您引用的文章中，OP 使用“高度”、“宽度”和“深度”。在某些应用程序中，这些维度是不可互换的——您可以明确地识别现实世界对象上的哪个维度是高度，哪个是宽度，哪个是深度。（一个例子可能是托盘上的集装箱，其中高度是显而易见的，宽度是叉车预期适合的边缘，深度是剩余的尺寸。）在其他应用中，它们是可互换的，这意味着你'很容易找到像 {2, 3, 5} 和 {2, 5, 3} 这样的“重复”主键。在这种情况下，您可能希望将参数从最低到最高排序，并使用 CHECK() 约束来确保它们是有序的。

这只是简单的规范化，需要注意的是，在这种情况下，我认为你是*从*6NF 开始的，所以没什么可做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T00:15:20.377

首先，DBMS 不一定是处理记忆的最佳选择。仅当结果数量太大而无法放入 RAM 中，或者结果需要在很长一段时间内持久保存或需要在多个可能并发的客户端之间重用时，这种方法才是合理的。

对于每个函数，创建一个单独的表，其中的列对应于函数输入和结果。在输入上创建一个 PK。

在评估函数（on `value1`, `value2`, `value3`...）之前，请执行以下操作：

```
SELECT result
FROM function_table
WHERE
    input1 = :value1
    AND input2 = :value2
    AND input3 = :value3
    ... 
```

*（`:`表示绑定参数，一些 DBMS 可能使用不同的前缀）*

*   如果您得到结果，请使用它。该函数之前已评估过，这次您可以跳过评估。
*   如果您没有得到任何结果（即零行），请评估该函数并存储输入和结果以供以后重用。考虑在后台线程上执行此 INSERT，这样您就可以继续在主线程上使用结果而无需等待数据库。

通过为每个函数使用单独的表和带有绑定参数的静态定制查询，您可以利用[查询准备](http://en.wikipedia.org/wiki/Prepare_%28SQL%29)来获得更好的性能。

此外，考虑[对表进行聚类](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)（如果您的 DBMS 支持），直接从 B-Tree 结构中获取结果并避免表堆查找的需要。

# c++ - 默认动态内存大小

> ID：11147973
> 
> 赞同：0
> 
> 时间：2012-06-21T22:53:45.100
> 
> 标签：c++, dynamic

我有以下代码：

```
#include <iostream>`

using namespace std;
int main() {
    char* data = new char;
    cin >> data;
    cout << data << endl;
    return 1;
} 
```

当我输入`char*`26 个作为字符串文字时，它会编译并打印它。但是当我将 27 个作为数据时，它会中止。我想知道为什么。

为什么是27？

它对它有什么特殊意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:56:43.707

你只分配了一个角色的空间。因此，读取任何超过该数据的数据都会覆盖您不拥有的内存，因此这是未定义的行为。这就是您在结果中看到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:58:04.800

您动态分配一个字节的存储空间。要分配倍数，请执行以下操作：

```
char* data = new char[how_many_bytes]; 
```

当您使用字符串文字时，会自动分配那么多堆栈空间。当你动态分配时，你必须得到正确的字节数，否则你会得到一个段错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:59:38.517

这只是**未定义的行为**，又名“UB”。该程序可以做任何事情或不做任何事情。您看到的任何效果都是不可重现的。

为什么是UB？

因为您为单个`char`值分配空间，并将其视为以*零结尾的字符串*。由于零占用一个`char`值，因此没有（保证）真实数据的空间。但是，由于 C++ 实现通常不会增加对事物的低效检查，因此您可以将数据存储在您不拥有的部分内存中 - 直到由于 UB 而崩溃或产生无效结果或产生其他不良影响。

要正确执行此操作，请使用`std::string`代替`char*`，不要使用`new`或`delete`（a`std::string`会自动为您执行此操作）。

然后用于`std::getline`将一行输入读入字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T01:33:15.300

您必须查看 C++ 实现的具体细节。大概是执行`malloc`，等等。您的代码写入缓冲区的末尾，根据 C++ 标准，该缓冲区是 UB。要完全了解它*为何*如此行事，您需要知道应该存储在您覆盖的 27 或 28 个字节中的内容，这是您不应该做的。

Most likely, 27 ones just so happens to be the point at which you started damaging the data structures used by the memory allocator to track allocated and free blocks. But with UB you might find that the behavior isn't as consistent as it first appears. As a C++ programmer you aren't really "entitled" to know about such details, because if you knew about them then you might start relying on them, and then they might change without notice.

# google-checkout - Google Checkout 处理 URL 回调以完成订单？

> ID：11147975
> 
> 赞同：0
> 
> 时间：2012-06-21T22:53:45.490
> 
> 标签：google-checkout

我正在开发一个完全实现 google checkout 的应用程序，我试图弄清楚如何在订单完成后访问发送到 API 回调 URL（在集成设置中指定）的数据？

已完成订单的数据是否通过 POST 数据发送？XML？得到？对于已完成的订单，我如何访问发送回我的 Web 应用程序的数据？

任何正确方向的文档或指针将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:52:02.313

Google Checkout 会将通知回调作为 HTTP POST 发送到您指定的回调 URL。POST 正文中的数据采用 XML 格式。

以下一些有用的链接：

如何配置 Web 服务以响应回调： http: [//support.google.com/checkout/sell/bin/answer.py ?hl=en-GB&answer=70647](http://support.google.com/checkout/sell/bin/answer.py?hl=en-GB&answer=70647)

PHP 库 - 查看 basicapiresponsehandlerdemo.php responsehandlerdemo.php，它展示了如何解析和响应回调：

[http://code.google.com/p/google-checkout-php-sample-code/](http://code.google.com/p/google-checkout-php-sample-code/)

# php - Wordpress - 列出子页面，但将它们链接为锚点

> ID：11147976
> 
> 赞同：0
> 
> 时间：2012-06-21T22:53:45.360
> 
> 标签：php, wordpress

在这里解释有点困难，但我会尽力而为。

我有这个页面模板，你可以在这里查看：http: [//goo.gl/y088X](http://goo.gl/y088X)。该模板首先在顶部列出了所有属于“展览档案”类别的子页面作为子菜单，然后页面在页面上输出这些页面（图像）的附件，并使用一些 JS 进行演示等。

目前，子菜单（子页面列表）项目链接到页面，这是显而易见的事情。

但是，我想做的是将所有内容保留在一个页面上，并让子菜单项链接到页面上的帖子并向下滚动到页面上的该部分（基本上，使用锚链接）。如果您单击子菜单中的展览标题链接，它将滚动到页面下方的展览标题。

我已经设置了大部分，但我需要能够动态地执行此操作。标记每个部分开始的页面下方的标题需要是一个锚标记，其中 id 标记引用子菜单项，因此当单击子菜单项时，它将滚动到该位置，子菜单项具有#anchor 作为 href，而不是指向该页面的永久链接。

这是可能吗？

这就是我用来列出子菜单中的项目的方法，所以我需要一种动态创建#anchor 作为 href 而不是永久链接的方法，然后将`<h1>`标题向下标记为每个部分的页面以具有对应的标识。

希望这是有道理的，希望你能提供帮助。我会给任何解决这个问题的人一些巨大的声誉:)

在此先感谢，

```
<?php wp_list_pages('title_li=&child_of=155'); ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T23:23:26.830

而不是使用 wp_list_page() 您可以尝试使用 get_pages() 编写自己的子导航

[http://codex.wordpress.org/Function_Reference/get_pages](http://codex.wordpress.org/Function_Reference/get_pages)

一旦你建立了你的导航，你可以创建并链接到你想要的页面下方的内容。

```
<?php
if( is_page(155) ){
    $args = array( 'child_of' => 155, 
                   'sort_order' => ASC,
                   'sort_column' => post_date,
                   'parent' => 155,
                   'hierarchical' => 0  
                 );
    $mypages = get_pages($args);
?>
<ul>
    <?php foreach( $mypages as $page ) {    
?>
   <li><a href="#<?php echo $page->post_name; ?>"><?php echo $page->post_title; ?></a></li>
<?php
    }
 ?>
 </ul>
<?php
}
?> 
```

希望这有帮助？

马蒂

# excel - 如何将多个单元格的内容复制/替换/覆盖到一个单元格中？

> ID：11147978
> 
> 赞同：0
> 
> 时间：2012-06-21T22:53:52.123
> 
> 标签：excel, visual-studio-macros, vba

我在excel中有一个简单的问题，我需要将三个单元格的内容复制到一个单元格中，例如如果我在单元格中输入“1” AI想在黄色单元格中看到“1”，或者如果我在其中输入“2”单元格 b 我想在黄色单元格中看到“2”，依此类推，但我的输入可能不按顺序排列，例如我可能先输入“3”，然后输入“1”。我只是想知道我需要在excel中使用什么公式？我需要一个自动化这个过程的公式，谢谢

提前致谢 ![在此处输入图像描述](../Images/bbac3f281f2aae3d775ca61746782874.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:57:26.473

你需要类似`=Contatenate(A,B,C)`黄色单元格的东西

**更新**：

我希望您了解创建宏的基础知识。将此宏添加到您的工作簿。此代码假定 $A$1、$A$2 和 $A$3 是蓝色单元格的地址，而 B1 是黄色单元格的地址。

```
Private Sub Worksheet_Change(ByVal Target As Range)

    Application.EnableEvents = False

   If Target.Address = "$A$1" Or Target.Address = "$A$2" Or Target.Address = "$A$3" Then

       Range("B1").Value = Target.Value

   End If

    Application.EnableEvents = True

End Sub 
```

# javascript - 在 Rally SDK2 中，是否有向 ReleaseComboBox 或 IterationComboBox 添加数据的示例？

> ID：11147981
> 
> 赞同：0
> 
> 时间：2012-06-21T22:54:19.557
> 
> 标签：javascript, extjs, rally

我希望能够为“--ANY--”添加一个选项。

这不起作用：

```
Ext.create('Rally.ui.ReleaseComboBox', {
            hideLabel: false,
            fieldLabel: "Release: ",
            width: 275,
            allowBlank: true,
            listeners: {
                beforerender: function( dd, opts ) {
                    var store = dd.getStore();

                    store.add( {
                        Name: '--ANY--'
                    });

           etc... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:41:16.013

像这个例子这样的东西应该可以工作。尝试监听 store 加载，然后使用 loadData 方法将数据直接加载到 store 中，确保传入的数据是 ReleaseComboBox 的正确格式。

此外，将 loadData() 的 append 参数设置为 true。否则，它将从存储中删除现有记录，然后添加数据。

```
Ext.create('Ext.Container', {
    items: [{
        xtype: 'rallyreleasecombobox',
        storeConfig: { 
            listeners: {
                load: function(store) {
                    store.loadData([{formattedName: '--ANY--', 
                                    formattedStartDate: 'n/a', 
                                    formattedEndDate: 'n/a',
                                    isSelected: false}], 
                                    true);
                    store.sort('formattedStartDate', 'DESC');

                 }
            }
        }    
    }],
    renderTo: Ext.getBody().dom
}); 
```

# ruby - 如何使用 Daemons gem 获取第一个任务的 pid？

> ID：11147987
> 
> 赞同：2
> 
> 时间：2012-06-21T22:54:57.800
> 
> 标签：ruby, fork, pid, multiple-instances, daemons

我正在尝试使用 Daemons gem 运行相同代码/脚本的多个实例。我一直在 IRB 会话中使用它，但似乎无法获得我正在寻找的功能。我想多次运行相同的脚本来跟踪 PID，以便我可以手动启动和停止进程。更具体地说，我有一个 rails 模型，它的实例将控制一个进程，所以我需要使用类似的东西来启动和停止它

```
mydaemon = MyDaemon.create
mydaemon.start # starts the process
mydaemon.stop  # stops the process 
```

但是，为了实现这样的目标，我想将进程的 PID 存储在活动记录中。当我在 IRB 中运行以下代码时：

```
require 'rubygems'        # if you use RubyGems
require 'daemons'

task1 = Daemons.call(:multiple => true) do
  loop {
    File.open("/tmp/daemon_test.log", "w") {|f| f.write(Time.now.to_s + "\n")}
    sleep 5
  }
end 
```

该任务会自动启动（无需在 task1 上调用 start），它不会返回 pid，而是返回与 task1 关联的 Daemons::Application 对象。我只有在启动 task1 的第二个实例时才能访问 pid，即：

```
task1.start
 => 574 # PID of process but now I have 2 proc's running, one of which I don't know the PID of 
```

我使用守护进程错了吗？还是没有办法获得调用 Daemons.call 时自动启动的第一个进程的 PID？

谢谢，托梅克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T23:39:39.830

[文档说](http://daemons.rubyforge.org/classes/Daemons/Application.html)一个`Daemons::Application`对象有一个公共属性，`pid`它返回一个[Daemons::Pid](http://daemons.rubyforge.org/classes/Daemons/Pid.html)对象，所以尝试使用它`task1.pid.pid`。

# objective-c - Objective C 中方法的对象类数组转换

> ID：11147989
> 
> 赞同：0
> 
> 时间：2012-06-21T22:55:02.790
> 
> 标签：objective-c, xcode, arrays, object

我有一个对象 Student 具有 4 个属性（年龄、姓名、部门、​​姓氏）。我像这样创建该对象的数组；

```
Student students[10] blah blah init blah. 
```

然后我想使用一个学生数组作为方法的参数；

```
-(void) displayStudentInArray : (????) studentarray atIndex: (int) index {.....} 
```

“？？？” 是我的问题。我在那里写什么？我不知道。

需要帮忙。我是目标 c 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:04:29.967

而不是使用 C 表示法，数组应该这样制作：

```
NSArray *studentArray = [[NSArray alloc] initWithObjects: student1, student2, student2, ..., nil]; 
```

在这种情况下，参数类型将是 NSArray

```
-(void) displayStudentInArray : (NSArray *)studentarray atIndex: (int) index {.....} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T23:04:40.303

创建数组的首选方法是使用[`NSArray`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)（或者[`NSMutableArray`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)如果您想在创建后修改数组）：

```
NSArray *array = [[NSArray alloc]initWithObjects:student1, student2...]; 
```

那么您的方法签名将是：

```
-(void)displayStudentInArray:(NSArray *)studentarray atIndex:(int)index 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T23:18:03.187

这些答案是正确的，但如果你*真的*想使用 C 表示法，你只需要添加另一个星号来表示对另一个指针的引用：

```
- (void)displayStudentInArray:(Student**)studentArray atIndex:(int)index {
    Student* firstStudent = studentArray[1];
    //do what you want with the array
} 
```

这是因为 C 数组实际上只是指向内存中地址的指针。如果你想要一个原始的 C 数组，它看起来像这样：

```
int* arrayOfInts = malloc(yourSize * sizeof(int)); 
```

你有一个对象数组，但想法是一样的。您只需再添加一个星号来表示它是指向对象指针的指针。

```
Student** students = ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-06T14:25:31.630

写吧

```
Student *tempStudent = (array)[0]; 
```

# java - 需要正则表达式来分隔逗号分隔值（来自路由器查询输出的接口列表）

> ID：11147990
> 
> 赞同：1
> 
> 时间：2012-06-21T22:55:09.347
> 
> 标签：java, regex

我有这样的输入

`RX Only : Gi1/0/15,Gi1/0/20,Gi1/0/17`

我想从这里捕获`1/0/15`, `1/0/20`, `1/0/17`。但是这个输入发生了变化。有时只有 2 个逗号分隔值，有时 1 有时超过 3。

我想出的正则表达式只捕获第一组。如果我使用非贪婪运算符，那么它最后捕获。我应该使用什么正则表达式来分别捕获所有这些组。

使用的语言是Java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T23:12:09.360

通常更容易为您感兴趣的子字符串编写正则表达式，然后重复使用`Matcher.find()`，而不是尝试编写一个匹配整个字符串的正则表达式并从复杂的组排列中提取您想要的内容。

假设您要查找的是由“/”分隔的三个数字的三元组，那么，

```
Pattern p = Pattern.compile("\\d+/\\d+/\\d+");
Matcher m = p.matcher(inputString);
while (m.find()) {
  // your triple is in group 0
  System.out.println(m.group(0));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T23:09:34.010

给男人一条鱼……或者

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T23:07:47.060

你真的必须在这里使用正则表达式吗？如果数据格式非常相似，您可以将`indexOf`函数与`substring`. 您将必须找到`:`角色并从下一个角色开始寻找昏迷。然后检查位置`\n`并使用较小的索引来检索子字符串。

# r - write.table 在某个循环中永远不会释放内存

> ID：11147994
> 
> 赞同：0
> 
> 时间：2012-06-21T22:56:14.193
> 
> 标签：r, file-io

考虑这两段代码。第一个，一切正常，R的内存使用稳定：

```
for (i in 1:100) {
x <- rnorm(1000000)
write.table(x, file="test", col.names=F, append=T)
} 
```

现在考虑这个相关的代码，我从世界银行那里抓取一些经济指标的信息。在这里，内存使用量随着循环的迭代而上升：

```
library(RCurl)
library(XML)
for (i in 1:26) {
x <- getURL(paste("http://api.worldbank.org/countries/all/indicators/AG.AGR.TRAC.NO?per_page=500&date=1960:2012&page=", as.character(i), sep=""))
x <- xmlToDataFrame(x)
write.table(x, file="test", col.names=F, append=T)
} 
```

从写入数据的角度来看，这两个片段有什么区别，如何确保第二个片段正确释放内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:35:41.837

好的，我这样做是为了让它工作。[我从http://www.omegahat.org/R/bin/windows/contrib/2.14/](http://www.omegahat.org/R/bin/windows/contrib/2.14/)下载了二进制文件，并使用 install.packages("XML", repos=NULL) 安装。它仅适用于 32 位 R。

# azure - 以编程方式访问对等角色主机名

> ID：11147997
> 
> 赞同：2
> 
> 时间：2012-06-21T22:56:36.093
> 
> 标签：azure, azure-configuration

本页[介绍](http://msdn.microsoft.com/en-us/library/windowsazure/jj156072)如何通过 cscfg 为角色实例分配主机名。我如何在我的应用程序中访问它？由于 RoleInstance 没有 VMName 成员，因此以下方法不起作用。

```
foreach (RoleInstance instance in RoleEnvironment.Roles["MyRole"].Instances) {
    Console.WriteLine(instance.VMName);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T00:41:38.850

正如@AvkashChauhan 指出的那样，您应该能够通过 Dns 类检索主机名。不过，我很好奇，为什么您需要主机名。如果是用于角色实例之间的通信，则实际上不需要主机名。相反，您可以查询角色实例端点（假设您设置一个作为内部端点），然后对于每个实例，您可以请求 IP 地址和端口，这将允许您建立到任何给定实例的直接连接。因此，修改您拥有的代码：

```
foreach (RoleInstance instance in RoleEnvironment.Roles["MyRole"].Instances) {
   writeline(InstanceEndpoints["myendpoint"].IPEndpoint); 
```

实际上，您可能需要主机名，如果需要，请忽略此答案。但是...如果您正在寻找一种在角色实例之间建立 tcp/http/udp 连接的方法，那么这是一种检索角色实例的所有 ip/端口组合的非常简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T23:19:25.933

当您在虚拟机中时，您可以使用任何 .NET API 来获取代码中的主机名，即：

```
Dns.GetHostName(); 
```

您可能会更改 Windows Azure VM 主机名的原因是，在大多数情况下，VM 主机名设置为 RD00* ******，因此如果您有多个实例，所有主机名都会不同，并且不容易记住和管理。因此，为了让所有主机名易于记忆，您将使用以下属性，以便与同一角色相关的所有实例的名称都为 vm-name##，这样您就可以轻松记住主机名并正确管理它们。

```
<Role name="<role-name>" vmName=“&lt;vm-name>”&gt; 
```

因此，要更改主机名，您可以使用上述配置设置，但要获取主机名，您只需使用标准的 .net API 即可。