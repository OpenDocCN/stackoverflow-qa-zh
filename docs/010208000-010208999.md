# StackOverflow 问答 10208000-10208999

# ruby-on-rails - 如何在 Ruby on Rails 中将我的生产数据库复制到我的测试数据库？

> ID：10208001
> 
> 赞同：2
> 
> 时间：2012-04-18T11:01:19.880
> 
> 标签：ruby-on-rails, database, rake

我有一个运行良好的生产环境。出于测试目的，我想将所有数据库表（包括表内容！）复制到我的测试环境中。

我试过`rake db:test:clone`了，但这只会创建表结构，而不是内容。

是否有 rake 任务或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:05:36.250

试试这个：

```
rake db:test:prepare 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:44:36.143

您可以使用 Taps gem，如下所示： [http ://railscasts.com/episodes/342-migrating-to-postgresql](http://railscasts.com/episodes/342-migrating-to-postgresql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T13:15:59.550

看看：[https ://github.com/napcs/lazy_developer](https://github.com/napcs/lazy_developer)

您也可以查看：[http ://blog.robseaman.com/2008/12/2/production-data-to-development](http://blog.robseaman.com/2008/12/2/production-data-to-development)

和

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T11:26:14.950

我不认为你想要什么，但我不确定你为什么想要知道测试环境是如何工作的，你希望它发生。您基本上想要一个 shell 命令从转储中恢复。

在测试环境中，您的数据库在每次测试运行后“基本上”被分解和重建。它将加载您的固定装置/工厂，然后应用它运行的测试。测试环境的想法是您孤立地测试所有内容，除非它们是集成测试，它们对“其他测试”之前所做的事情有所了解。

综上所述，如果您的生产数据很大，那么每次都构建大生产数据可能会很糟糕。

如果数据是必不可少的，请将其复制到夹具或工厂中，您将拥有可重复的相同数据。

您想要整个数据库而不仅仅是一两个数据，还有一个更小的原因吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-28T13:50:53.473

您可以使用[yml_db](https://github.com/yamldb/yaml_db) gem。只需执行以下操作：

1.  在您的 gemfile 中包含以下内容并运行 bundle install

> 宝石'yaml_db'

2.  创建当前数据库的转储文件

> bundle exec rake db:data:dump RAILS_ENV=production

*请注意，您需要从控制台执行此操作，该控制台可以使用 database.yml 中的设置（或您拥有它们的任何位置）访问您的生产数据库。我能够设置到我的产品服务器的 ssh 隧道，然后只需在本地运行命令，但您可能需要从服务器运行它，然后下载 /db/data.yml 文件。

3.  假设您的转储文件现在位于 /db/data.yml 并且您有一个空的迁移数据库，您可以运行以下命令

> bundle exec rake db:data:dump RAILS_ENV=development

如果您的数据库不是空的并且已迁移，请先运行`rake reset`。

阅读[这篇文章](https://coderwall.com/p/90qymq/how-to-transfer-data-seamlessly-between-various-ruby-on-rails-environments-and-databases)了解更多信息。

# mysql - SQL 检查一组包含特定值的元素

> ID：10208003
> 
> 赞同：1
> 
> 时间：2012-04-18T11:01:23.630
> 
> 标签：mysql, sql

我需要编写一个查询来检索所有已下订单的客户的电子邮件地址。虽然我需要排除使用 productId 1 订购商品的客户。

但是，当客户订购了 productId 1 以及具有不同 productId 的产品时，需要将它们包括在内。具有不同productId的该产品也可能在同一客户的不同订单中。

所以现在我有点坚持我的查询。

```
 SELECT DISTINCT [Email] FROM [dbName].[dbo].[Users]

    INNER JOIN dbo.Orders on dbo.Orders.CustomerId = dbo.Users.UserId
    INNER JOIN dbo.OrderLines on dbo.OrderLines.OrderId = Orders.OrderId

    WHERE Users.SubShopID = 1 AND OrderLines.ProductId (continue here?)
    ORDER BY Email DESC 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:04:03.170

那这个呢？

```
SELECT DISTINCT [Email] FROM [dbName].[dbo].[Users]

INNER JOIN dbo.Orders on dbo.Orders.CustomerId = dbo.Users.UserId
INNER JOIN dbo.OrderLines on dbo.OrderLines.OrderId = Orders.OrderId

WHERE Users.SubShopID = 1 
AND OrderLines.ProductId <> 1
ORDER BY Email DESC 
```

# wpf - Datagrid 列标题应检查/取消选中 CheckBox 的状态，具体取决于 DataGridView 列的所有 CheckBox 是选中还是未选中

> ID：10208004
> 
> 赞同：10
> 
> 时间：2012-04-18T11:01:26.653
> 
> 标签：wpf, datagrid, checkbox, wpfdatagrid, observablecollection

![在此处输入图像描述](../Images/8c13b720fc78383736a68dc0d6274841.png)我遇到的问题与DataGrid（WPF）中的复选框有关。为了更好地理解问题，我附上了屏幕截图。

问题：即使其中一个子项未选中，也会选中 DataHeader 列复选框。我希望解决方案能够解决此问题，以便当用户明确取消选中其中一个孩子时，应该隐式取消选中 ALL(Column Header)。

请帮助大家...谢谢你请检查链接。我希望解决方案像这样工作。[http://www.codeproject.com/Articles/42437/Toggling-the-States-of-all-CheckBoxes-Inside-a-Dat#](http://www.codeproject.com/Articles/42437/Toggling-the-States-of-all-CheckBoxes-Inside-a-Dat#)

```
<dg:DataGrid.Columns>
    <dg:DataGridCheckBoxColumn Binding="{Binding Check}" IsThreeState="True" Width="50">
        <dg:DataGridCheckBoxColumn.HeaderTemplate>
            <DataTemplate x:Name="dtAllChkBx">
                <CheckBox Name="cbxAll" Content="{x:Static properties:Resources.lblAll}"
                          Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked" />
            </DataTemplate>
        </dg:DataGridCheckBoxColumn.HeaderTemplate>
    </dg:DataGridCheckBoxColumn> 
```

.

```
private void CheckBox_Unchecked(object sender, RoutedEventArgs e)
{
    unchck_all_prd();
    dgEnggAcc.Items.Refresh();
}

private void unchck_all_prd()
{
    for (int i = 0; i < engg_list.Count; i++)
    {
        engg_list[i].Check = false;
    }
}

private void chck_all_prd()
{
    for (int i = 0; i < engg_list.Count; i++)
    {
        engg_list[i].Check = true;
    }
}

public class EnggLst : ObservableCollection<EnggLst>
{
    public bool Check { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T04:41:46.633

```
//this event is for **Checked and UnChecked** of up check box (cbxall)
private void UpCheckbox_Checked(object sender, RoutedEventArgs e)
{
    //checkBox1 = cbxall (your up checkbox)
    if (checkBox1.IsChecked == true)
    {
        dataGrid1.Items.OfType<YourClass>().ToList().ForEach(x => x.IsChecked = true);
    }
    else
    {
        dataGrid1.Items.OfType<YourClass>().ToList().ForEach(x => x.IsChecked = false);
    }
}

//this event is for all other check box
//**Checked and UnChecked** of all other check box is this event
private void OtherCheckbox_Checked(object sender, RoutedEventArgs e)
{
    //checkBox1 = cbxall (your up checkbox)
    if (dataGrid1.Items.OfType<YourClass>().All(x => x.IsChecked == true))
    {
        checkBox1.IsChecked = true;
    }
    else if (dataGrid1.Items.OfType<YourClass>().All(x => x.IsChecked == false))
    {
        checkBox1.IsChecked = false;
    }
    else
    {
        checkBox1.IsChecked = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-22T23:46:03.550

在您的 XAML 数据网格中添加：

```
<DataGridTemplateColumn.Header>
<CheckBox x:Name="ckbHeader" Click="ckbHeader_Click"></CheckBox>
</DataGridTemplateColumn.Header> 
```

在您的代码中添加：

```
var ckbox = sender as CheckBox;
var All = Collection.View.SourceCollection as List<ObjectX>;

if (ckbox.IsChecked)
{
    foreach (var item in All)       
        item.Marked = true;     
}
else
{
    foreach (var item in All)       
        item.Marked = false;        
}
Collection.View.Refresh(); 
```

注意：发件人是 CheckBox

# php - 如果使用 jquery 附加多个字段，则它们不会发布到数组

> ID：10208015
> 
> 赞同：1
> 
> 时间：2012-04-18T11:01:55.727
> 
> 标签：php, jquery, html, arrays, forms

基本上，我有页面，静态html在哪里，代码：

```
<input type="text" name="exp[][from]" />
<input type="text" name="exp[][to]" />
<input type="text" name="exp[][position]" />
<input type="text" name="exp[][name]" /> 
```

在这个输入字段之后，有一个添加更多字段的按钮，它运行这个 jQuery 代码：

```
 $(document).ready(function(){
    $('#addwork').click(function() {
        $(document.createElement('div')).html('<input type="text" name="exp[][from]" />\n<input type="text" name="exp[][to]" />\n<input type="text" name="exp[][position]"  />\n<input type="text" name="exp[][name]" />').appendTo('.cvs');
    });
}); 
```

问题是，如果我使用 jQuery 添加一些字段，它们不会发布到数组中（使用 var_dump 测试），但静态的是。我在静态 html 中测试并添加了更多字段，效果很好。

所以基本上，如果我附加输入字段，它们不会发布到数组中，而是静态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:23:45.460

好吧，我尝试了一个示例代码，并且能够使用 var_dump 获取附加项的值。所以请检查此代码

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script>
   $(document).ready(function(){
    $('#addwork').click(function() {
        $(document.createElement('div')).html('<input type="text" name="exp[][from]" />\n<input type="text" name="exp[][to]" />\n<input type="text" name="exp[][position]"  />\n<input type="text" name="exp[][name]" />').appendTo('.cvs');
    });
});

</script>
</head>
<form method="post">
<input type="text" name="exp[][from]" />
<input type="text" name="exp[][to]" />
<input type="text" name="exp[][position]" />
<input type="text" name="exp[][name]" />
<div class="cvs"></div>
<input type="submit" value="btn" name="btn"/>

<input type="button" value="add" id="addwork"/>
</form>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:33:40.247

```
$(document).ready(function() {
                    $('#addwork').click(function() {
                        $('.cvs').append(
                                '<div>'+
                                    '<input type="text" name="exp[][from]" /><br>'+
                                    '<input type="text" name="exp[][to]" /><br>'+
                                    '<input type="text" name="exp[][position]"  /><br>'+
                                    '<input type="text" name="exp[][name]" />'+
                                '</div>');
                        });
                }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:35:09.283

以这种方式制作名称属性 exp[INTEGER][info] 的格式，您可以“分组”表单数据，但可能导致大数组

# java - 使用java以管理员身份执行命令行进程

> ID：10208017
> 
> 赞同：1
> 
> 时间：2012-04-18T11:01:55.860
> 
> 标签：java, dll, java-native-interface

必须使用 java 通过运行时命令行过程安装自定义服务（需要管理权限）。

操作系统视窗 7

似乎，这不能仅使用 Java 代码完成，而是通过 JNI 调用本机命令。

以下代码以管理员身份打开命令提示符，但无法在具有权限的同一提示符下执行后续命令。

```
Process p = Runtime.getRuntime().exec("cmd /c start runas /user:domain\\administrator /savecred:try.txt cmd"); 
```

有什么最佳方法可以实现这一目标吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:09:46.973

如果你在 *nix 系统上，你可以使用`sudo`from `Runtime.exec`。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/8746869/how-to-generate-processes-with-inherited-rights-and-permissions/)。

# php - 打印嵌套在 Foreach 循环中的 UL LI

> ID：10208024
> 
> 赞同：-1
> 
> 时间：2012-04-18T11:02:11.570
> 
> 标签：php, arrays, foreach

我有一个像这样的数组结构

```
[members] => Members List | 26
[member.php?id=3] => John | 26-26 
[member.php?id=4] => Alice | 26-26 
[member.php?id=5] => Michel | 26-26 
[news] => News details | 45
[alerts] > Alerts | 32 
```

我使用 foreach 循环遍历它。我想将整个列表打印为 UL LI。成员列表将是一个 LI，但是当它的子项出现时 (memeber.php?id=*) 等，它应该继承 UL LI。我希望孩子在嵌套的 LIs 中

**代码**

```
$counter = 0;
foreach($array as $key => $values)
{
     if($counter == 0)
        {
            echo "<ul>";
        }
    if($key != "" && $key != "END")
        {
            echo "<li>".$values."</li>";
        }
    if($key == "END")
        {
            echo "</ul>";
        }
    $counter++;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:08:03.633

我不确切知道你遇到的问题。但我认为，你想要这样的东西：

```
<ul>
    <li>
        <a href="members">Members List</a>
        <ul>
            <li><a href="member.php?id=3">John</a></li>
            <li><a href="member.php?id=4">Alice</a></li>
            <li><a href="member.php?id=5">Michel</a></li>
        </ul>
    </li>
    <li><a href="news">News details</a></li>
    <li><a href="alerts">Alerts</a></li>
</ul> 
```

如果是，那么我建议您更改数组结构。数组也可以嵌套。如果你有这样的东西会更容易：

```
$data = array(
    array('members', 'Members List', array(
        array('member.php?id=3', 'John'),
        array('member.php?id=4', 'Alice'),
        array('member.php?id=5', 'Michel'),
    )),
    array('news', 'News details'),
    array('alerts', 'Alerts')
); 
```

*   $data 是数组。
*   $data 中的项目是包含至少 2 个项目的数组。第一项是href/url，第二项是标签/文本。如果它有第 3 项，那么它将是子项（子项）。
*   子项的组成类似于项，其中第一项是 href/url，第二项是标签/文本。

然后，以下代码会将其转换为 HTML：

```
echo '<ul>';
foreach ($data as $item) {
    // $item[0] -> href/url, $item[1] -> label/text, $item[2] -> subitems
    echo '<li>';
    echo '<a href="' . $item[0] . '">' . $item[1] . '</a>';

    if (isset($item[2])) { // if this item has subitems...
        echo '<ul>';
        foreach ($item[2] as $subitem) {
            // $subitem[0] -> href/url, $subitem[1] -> label/text
            echo '<li><a href="' . $subitem[0] . '">' . $subitem[1] . '</a></li>';
        }
        echo '</ul>';
    }

    echo '</li>';
}
echo '</ul>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:15:41.027

您的脚本不起作用，因为您已将 URL 引用为`$key`，但仍使用`$url`循环内部访问它们。

这是你应该如何做的。

```
$counter = 0;
foreach($array as $url => $values)
{
     if($counter == 0)
        {
            echo "<ul>";
        }
    if($url != "" && $url != "END")
        {
            echo "<li>".$values."</li>";
        }
    if($url == "END")
        {
            echo "</ul>";
        }
    $counter++;    
} 
```

但是从数组创建列表的一种简单方法是

```
//First remove the END key from the array, is not needed

echo "<ul>";
foreach($array as $link => $value) {
   //THERE is no way $link can be ""
   echo "<li><a href=\"$link\">$value</a></li>";
}
echo "</ul>"; 
```

# ruby - 如何禁用ruby UDPSocket解析recvfrom上的IP地址？

> ID：10208032
> 
> 赞同：1
> 
> 时间：2012-04-18T11:02:56.437
> 
> 标签：ruby, sockets, ruby-1.8.7

做数据时，addr = @socket.recvfrom(1500)，addr数组包含Array: ["AF_INET", port, "resolved-name-or-ip", "ip"]

如何禁用 UDPSocket 上的解析？ruby UDPSocket 的文档有点差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:32:53.730

在[文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/UDPSocket.html)中，您可以在`connect`方法中看到`rsock_addrinfo`调用的方法。

该方法调用`getaddrinfo`.

所以我没有看到解决方法，你必须调用另一个连接方法。

也许您可以添加一些代码行以便更好地理解？恐怕你不能。

```
static VALUE

udp_connect(sock, host, port)
VALUE sock, host, port;
{
rb_io_t *fptr;
struct udp_arg arg;
VALUE ret;

rb_secure(3);

arg.res = sock_addrinfo(host, port, SOCK_DGRAM, 0);

GetOpenFile(sock, fptr);
arg.fd = fileno(fptr->f);
ret = rb_ensure(udp_connect_internal, (VALUE)&arg,
                RUBY_METHOD_FUNC(freeaddrinfo), (VALUE)arg.res);
if (!ret) rb_sys_fail("connect(2)");
return INT2FIX(0);
} 
```

来源：[http ://ruby-doc.org/stdlib-1.8.7/libdoc/socket/rdoc/UDPSocket.html](http://ruby-doc.org/stdlib-1.8.7/libdoc/socket/rdoc/UDPSocket.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:14:49.623

行。我找到了。

我将在此处记录此内容，以便有人可能会很幸运并找到它。

要禁用自动查找，请将其放入您的代码中：

```
BasicSocket.do_not_reverse_lookup = true 
```

在创建套接字之前。它成功了。

# iphone - 显示已创建文件夹的问题

> ID：10208033
> 
> 赞同：0
> 
> 时间：2012-04-18T11:03:00.330
> 
> 标签：iphone, xcode, directory, nsfilemanager

我已成功在 iPhone 模拟器的“文档”文件夹中创建文件夹。

```
NSError *error;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"/MyFolder"];
NSLog(@"path is:%@",dataPath);

if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
{
    [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:&error];
} 
```

我可以看到文件夹是在模拟器中创建的......现在我需要在我的应用程序屏幕中显示该文件夹。**意味着用户可以看到（通过单击“+”或其他任何内容）该文件夹已创建。**

我还提到[了 iPhone/iPad: Unable to copy folder from NSBundle to NSDocumentDirectory](https://stackoverflow.com/questions/8059737/iphone-ipad-unable-to-copy-folder-from-nsbundle-to-nsdocumentdirectory)但不是我需要的.....

是否可以显示创建的文件夹？如果是，那怎么办？？任何帮助，将不胜感激....

提前谢谢:) :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:45:23.477

您可以通过...检查当前项目是否为文件夹

```
- (BOOL)createDirectoryAtURL:(NSString *)path withIntermediateDirectories:(BOOL)createIntermediates attributes:(NSDictionary *)attributes error:(NSError **)error 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:40:42.210

看看这里，这就是您在所有现有目录中阅读的方式：

[获取文档目录中的目录数组](https://stackoverflow.com/questions/2172245/get-array-of-directories-in-documents-directory)

然后，您可以轻松地将它们显示在视图中的表格中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:46:55.047

您无法在笔尖中显示该文件夹。文件夹不是您可以从对象库中提取的对象。如果你想要一个实际的文件夹，你可以使用带有文件夹图像的 UIImageView。另外，如果您在 Documents 文件夹中创建目录，我建议使用 NSFileManager 的方法来创建目录：

```
- (BOOL)createDirectoryAtPath:(NSString *)path withIntermediateDirectories:(BOOL)createIntermediates attributes:(NSDictionary *)attributes error:(NSError **)error 
```

或者

```
- (BOOL)createDirectoryAtURL:(NSString *)path withIntermediateDirectories:(BOOL)createIntermediates attributes:(NSDictionary *)attributes error:(NSError **)error 
```

# facebook - Facebook PHP SDK 中的注销 url 无法正常工作

> ID：10208041
> 
> 赞同：2
> 
> 时间：2012-04-18T11:03:54.667
> 
> 标签：facebook, cakephp, cakephp-1.3, facebook-php-sdk

我正在尝试将 cake php 与 Facebook PHP SDK 连接起来

在 App_Controller beforeFilter 函数中

```
$facebook = new Facebook(array(
      'appId'  => Configure::read("FB_APP_ID"),
      'secret' => Configure::read("FB_APP_SECRET"),
    ));

    // Get User ID
    $user = $facebook->getUser();
pr($user);
$logoutUrl = $facebook->getLogoutUrl();
$loginUrl = $facebook->getLoginUrl();

$this->set(compact('logoutUrl')); 
```

在视图.ctp

```
<a href="<?php echo $logoutUrl; ?>">Logout</a> 
```

在这里，我已经使用 facebook 登录了应用程序，但是当我尝试使用 logoutUrl 注销时，我总是在单击注销之前获得登录用户的用户 ID。

```
$user = $facebook->getUser();
// always get the user id.
pr($user); 
```

为什么会发生这种情况，注销 url 是否不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:27:24.357

可能是注销按钮正在从 Facebook 中注销用户，而不是从您的应用程序中注销。

您必须使用`$this->Auth->logout();`从您的应用程序中注销用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T14:13:14.107

Kachar 关于执行从 Facebook 而不是您的应用程序注销的 getLogoutUrl() 是正确的。不过，我找不到对该`$this->Auth->logout();`命令的任何引用。我发现我需要取消设置会话数据才能从我的应用程序中注销。

```
session_start();
session_unset(); // The important line, must be called after session_start()
session_destroy(); 
```

# mongodb - MongoDB shell 历史不记得“身份验证”

> ID：10208042
> 
> 赞同：2
> 
> 时间：2012-04-18T11:04:01.057
> 
> 标签：mongodb, interactive-shell

当我在名为“身份验证”的集合上使用命令时，MongoDB 交互式 shell 的命令行历史（MacOSX Lion 上的 2.0.4）不起作用，但它似乎适用于其他一切。

```
$ mongo mydb
MongoDB外壳版本：2.0.4
连接到：mydb
> db.aimsx.find().count()
45
>

```

现在，如果我按向上箭头，我会得到：

```
> db.aimsx.find().count()

```

工作正常。但是，现在我对集合“身份验证”运行命令：

```
> db.authentications.find().count()
795
>

```

当我现在按下向上箭头时，我得到了这个：

```
> db.aimsx.find().count()

```

在历史记录或文件中找不到有关“身份验证”的命令`~/.dbshell`。有人对此有解释吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T14:32:20.653

这是一个过于简单的安全机制。我们不会将看起来像“.auth”的东西保存到历史记录中。有一张[JIRA 票](https://jira.mongodb.org/browse/SERVER-5616)要求改进它。

# dependencies - IOC/DI 如何影响依赖维护？

> ID：10208048
> 
> 赞同：1
> 
> 时间：2012-04-18T11:04:24.010
> 
> 标签：dependencies, inversion-of-control, dependency-management

我试图了解一个大量使用 StructureMap（一个 IOC/DI 容器框架）的大型项目。所有共享组件的接口都包含在一个项目中，所有其他项目都引用该项目。

在尝试构建依赖层次结构时，我发现很难检测到哪个项目依赖于其他项目，因为没有直接的项目引用，只有一个对接口项目的引用。

我怎样才能仍然构建层次结构树？相反，将所有接口集中在单个超级项目的良好实践中，或者它应该是“正常的”，即每个项目都包含自己的公共接口（以及实现它的预定义具体类）。这也将允许通过简单地遵循参考项目来轻松构建层次结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:37:38.093

这可能有点主观，但我会反对将这种接口封装在一个单独的项目中，其中包含彼此不自然相关的接口。如果您的应用程序的不同部分有不同的项目，那么这些项目的接口也应该是独立的。尽管有时可能有理由将接口与实现放在一个单独的项目中，但正如您所描述的那样，将来自多个实现项目的接口组合成一个巨大的接口项目不太可能是一个很好的理由。

如果您遇到这种情况，并且想要揭示真正的运行时依赖关系，您可能需要检查配置，这可能使用注册表 DSL，或者可能需要解析 XML 配置。

# c# - c#.NET - 使用锁位提取原始像素数据

> ID：10208051
> 
> 赞同：-2
> 
> 时间：2012-04-18T11:04:41.953
> 
> 标签：c#, .net, lockbits

我正在制作一个程序来自动对图像执行某些编辑。

其中一项功能是将“白色”像素转换为“白色”和透明的。最初，一切都很好。

我设法将 24bppRGB 图像转换为 32bppRGB 图像，所需像素全部透明。

图像加载到图片框中，保存后即可打开。

当我尝试重新编辑文件时出现问题。当我再次尝试提取原始像素数据时，我什么也没得到。据我所知，整个像素数据数组都是 0。

为什么会这样？

^这是我的主要问题。除了这个问题，我还注意到该程序的一些怪癖，这些只是出于好奇：

有什么区别：

```
for(int i = 0; i < (x + 1); i += y) 
```

和

```
for(int i = 0; i <= (x); i += y) 
```

并且：

```
byte = 4;
for(int i = 0; i < x - byte; i += byte) 
```

和

```
for(int i = 0; i < x - byte; i += 4) 
```

当我解锁位图时，第二个导致了 AccessViolationException。

如果可能的话，尽量让解释简单。我在这方面是一个相当新的人。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:20:33.730

[这](http://www.codeproject.com/Tips/240428/Work-with-bitmap-faster-with-Csharp)是一个带有示例的小技巧，如何轻松使用位图。

ps之间的区别：

```
for(int i = 0; i < (x + 1); i += y) 
```

和

```
for(int i = 0; i <= (x); i += y) 
```

取决于**y**值。

# java - 具有多个条件的 String.equals()（以及对结果的一项操作）

> ID：10208052
> 
> 赞同：63
> 
> 时间：2012-04-18T11:04:42.070
> 
> 标签：java, android

是否有可能在 Java for Android 中做这样的事情（这是一个伪代码）

```
IF (some_string.equals("john" OR "mary" OR "peter" OR "etc."){
   THEN do something
} 
```

?

目前，这是通过其中的多个`String.equals()`条件完成`||`的。

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-04-18T11:07:31.510

可能性：

*   使用`String.equals()`：

    ```
    if (some_string.equals("john") ||
        some_string.equals("mary") ||
        some_string.equals("peter"))
    {
    } 
    ```

*   使用正则表达式：

    ```
    if (some_string.matches("john|mary|peter"))
    {
    } 
    ```

*   在集合中存储要匹配的字符串列表并搜索集合：

    ```
    Set<String> names = new HashSet<String>();
    names.add("john");
    names.add("mary");
    names.add("peter");

    if (names.contains(some_string))
    {
    } 
    ```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2014-01-08T21:10:11.690

```
if (Arrays.asList("John", "Mary", "Peter").contains(name)) {
} 
```

*   这不如使用准备好的 Set 快，但它的性能并不比使用 OR 差。
*   当名称为 NULL（与 Set 相同）时，这不会崩溃。
*   我喜欢它，因为它看起来很干净

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-18T11:09:53.427

将可接受的值保留在 a 中，并使用[contains](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html#contains%28java.lang.Object%29)方法`HashSet`检查您的字符串是否存在：

```
Set<String> accept = new HashSet<String>(Arrays.asList(new String[] {"john", "mary", "peter"}));
if (accept.contains(some_string)) {
    //...
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-18T11:07:42.177

您当前的实现是正确的。建议是不可能的，但伪代码将通过多次`equal()`调用和`||`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T11:13:16.790

如果您为 Android KitKat 或更新版本进行开发，您还可以使用 switch 语句（请参阅：[使用 switch (String) 进行 Android 编码](https://stackoverflow.com/questions/14367629/android-coding-with-switch-string/19722741#19722741)）。例如

```
switch(yourString)
{
     case "john":
          //do something for john
     case "mary":
          //do something for mary
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T11:11:52.900

```
Pattern p = Pattern.compile("tom"); //the regular-expression pattern
Matcher m = p.matcher("(bob)(tom)(harry)"); //The data to find matches with

while (m.find()) {
    //do something???
} 
```

使用正则表达式来查找匹配可能吗？

或者创建一个数组

```
 String[] a = new String[]{
        "tom",
        "bob",
        "harry"
 };

 if(a.contains(stringtomatch)){
     //do something
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T11:07:05.720

不，它检查字符串是否为`"john" OR "mary" OR "peter" OR "etc."`

你应该检查使用`||`

喜欢。，，`if(str.equals("john") || str.equals("mary") || str.equals("peter"))`

# wpf - 以编程方式连接数据模板中控件的事件处理程序

> ID：10208057
> 
> 赞同：2
> 
> 时间：2012-04-18T11:05:08.770
> 
> 标签：wpf, command, datatemplate, routed-commands

我在整个应用程序中都有可点击的图像/矩形控件，并且更喜欢将它们连接到代码中：

```
clickableimagecontrol.MouseUp += MouseUp_Handler 
```

我正在努力理解如何对数据模板做同样的事情。我基本上需要找到模板应用于每个项目的位置，这样我就可以插入我的钩子。

我知道 WPF 建议使用某种类型的命令，但这需要更多样板代码，更不用说图像/矩形不支持命令，所以我不得不用样式按钮控件重做整个事情。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:09:48.857

请参阅可行的解决方案：

```
 private void ElementKeyUp(object source, KeyEventArgs args)
    {
        throw new NotImplementedException();
    }

    private DataTemplate GetDataTemplate()
    {
        var result = new DataTemplate();

        var factory = new FrameworkElementFactory(typeof(ListViewItem));

        var handler = new KeyEventHandler(ElementKeyUp);

        factory.AddHandler(KeyUpEvent, handler);

        result.VisualTree = factory;

        return result;
    } 
```

# jquery - 将 Flot 与 Bootstrap 一起使用：IE8 不兼容？

> ID：10208062
> 
> 赞同：5
> 
> 时间：2012-04-18T11:05:28.420
> 
> 标签：jquery, css, internet-explorer, twitter-bootstrap, flot

我正在尝试在[Bootstrap](http://twitter.github.com/bootstrap/)项目中使用[Flot 。](http://code.google.com/p/flot/)我发现在 IE8 中，Flot 图是不可见的，我已将问题缩小到Bootstrap 使用的[HTML5 shim 。](http://code.google.com/p/html5shim/)

这是完整的页面：它是[基本的 Flot 示例](http://people.iola.dk/olau/flot/examples/basic.html)加上 HTML5 shim，图表在 IE8 中是不可见的（在 Chrome 中很好）。

如果我删除 HTML5 垫片线，则该图在 IE8 中很好。但是，我需要 HTML5 shim 才能使 Bootstrap 样式正常工作（当我重新添加 Bootstrap 时——出于本示例的目的，我已经删除了对它的引用）——如果它不存在，那么 Bootstrap 样式就会变得混乱。

我能做些什么？

```
<!DOCTYPE html><html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Flot Examples</title>
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="/scripts/plugins/excanvas.min.js"></script><![endif]-->
    <script language="javascript" type="text/javascript" src="/scripts/jquery-1.7.1.min.js"></script>
    <script language="javascript" type="text/javascript" src="/scripts/plugins/jquery.flot.js"></script>
 </head>
<body>
<div id="placeholder" style="width:100%;height:300px;"></div>
<script type="text/javascript">
$(function () {
    var d1 = [];
    for (var i = 0; i < 14; i += 0.5)
        d1.push([i, Math.sin(i)]);
    var d2 = [[0, 3], [4, 8], [8, 5], [9, 13]];
    var d3 = [[0, 12], [7, 12], null, [7, 2.5], [12, 2.5]];
    $.plot($("#placeholder"), [ d1, d2, d3 ]);
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T16:04:06.067

html5shim 和 excanvas 在某种程度上做同样的事情我猜？excanvas 模拟 html5 画布元素，而 html5shim 还做了一些我不太清楚的其他魔法。简而言之，当涉及到 IE<9 和 canvas 元素时，您需要告诉 html5shim 将其关闭。我在[源代码](https://github.com/aFarkas/html5shiv/blob/master/src/html5shiv.js)中挖掘了一下，发现了这个信息。

> 该`html5`对象被暴露，以便更多的元素可以被滑动，并且可以在 iframe 上检测到现有的滑动。
> 可以在包含脚本之前更改选项 html5 = { 'elements': 'mark section', 'shivCSS': false, 'shivMethods': false };

不久之后，它列出了所有将被“shiv”d 的元素，所以我想出了这个作为解决方案：

```
<!--[if lt IE 9]>
  <script type="text/javascript">
    var html5 = { 'elements': 'abbr article aside audio bdi data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video' };
  </script>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

我也从源代码中取出了巨大的元素列表，只删除了`canvas`.

除此之外，我使用了你所有的例子，它似乎工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:40:22.767

我在ie8中也遇到了bootstrap和flot的问题，但不能完全认同OP的问题。尽管对我来说解决问题的方法与 Ryley 的答案大致相同，但我花了一个小时才明白我需要做什么才能使其正常工作。

**简单的解决方案：**

1.  [下载 excanvas.js](http://code.google.com/p/explorercanvas/downloads/list)（如果它不在你的 flot 包中。）
2.  在我在 head 标记中加载所有其他 javascript 文件之前添加[条件注释：](http://www.quirksmode.org/css/condcom.html)`<!--[if IE 8]> <script src="@Url.Content("~/Scripts/canvas/excanvas.min.js")" type="text/javascript"></script> <[endif]-->`

**Quite simple, but:** I got on this track by debugging javascript in IE, with "break on error" activated. That got me the following error msg: `'window.G_vmlCanvasManager' is null or not an object` . Googling that lead me to excanvas.js. And pronto, flot.js suddenly worked. I don't know if this has anything to do with HTML5shim, but it works... and is simpler than the answer Ryley proposes.

# java - 是否可以使用 Java 编写 Visual Studio 加载项？

> ID：10208063
> 
> 赞同：0
> 
> 时间：2012-04-18T11:05:29.370
> 
> 标签：java, .net, visual-studio-2010

我需要为 Visual Studio 2010 编写一个加载项，并且我想使用用 Java 编写的现有 API。在开发插件时是否有任何方法可以使用此 API，例如完全用 Java 编写它（我认为这只是一个梦想）或使用某种可以从 API 调用方法的包装语言？

谢谢你的帮助。

克里斯

[编辑：我在互联网上找到了一些东西： http](http://www.ikvm.net/index.html) ://www.ikvm.net/index.html 。似乎有一种方法可以将 Java 库编译成 .NET。关于这个选项，我应该能够使用我需要的 API，同时用 C# 编写加载项。正确的？还是我在这里错过了什么？有什么顾虑吗？

* * *

事实上，它正在发挥作用——尽管是间接的。可以使用 Java 原生接口 (JNI)

[http://docs.oracle.com/javase/1.5.0/docs/guide/jni/](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:16:16.530

不幸的是，你不能用`Visual Studio`Java 编写插件。这是[你应该怎么做](http://msdn.microsoft.com/en-us/vstudio/bb968855)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:21:53.737

你不能这样做，因为制作插件应该遵循微软的架构。

# python - 如何使用python获取窗口标题并每100ms扫描一次？

> ID：10208066
> 
> 赞同：7
> 
> 时间：2012-04-18T11:05:42.320
> 
> 标签：python, win32gui

用python，我想得到一个窗口标题，一个股票软件窗口。

当我浏览另一只股票时，窗口的标题会改变，现在我想每 100 毫秒扫描一次并返回新标题，但窗口标题中的前面文本是相同的文本。

我可以在cmd中打印标题，但我不知道如何每100ms扫描一次并返回

我使用这段代码：

```
from win32gui import *
import re

titles = set() 
titlekey = ''

def foo(hwnd,nouse):
    if IsWindow(hwnd) and IsWindowEnabled(hwnd) and IsWindowVisible(hwnd):
        titles.add(GetWindowText(hwnd))

EnumWindows(foo, 0) 
lt = [t for t in titles if t] 
lt.sort() 
for t in lt:
    if re.match(titlekey,t):
        print t 
```

如何每 100 毫秒扫描一次并在更改时返回新标题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T11:10:06.730

把它放在一个循环中：

```
import win32gui
tempWindowName=win32gui.GetWindowText (win32gui.GetForegroundWindow())
import time
while True:
    if (tempWindowName==win32gui.GetWindowText (win32gui.GetForegroundWindow()))
        pass
    else
        tempWindowName=win32gui.GetWindowText (win32gui.GetForegroundWindow())
        #do what you want
    time.sleep(0.1) 
```

# c - 通过 fopen 创建文件在 Linux 上运行良好，但在 Windows 上运行良好（MS VS 2010）

> ID：10208072
> 
> 赞同：1
> 
> 时间：2012-04-18T11:06:01.460
> 
> 标签：c, windows, linux, visual-studio-2010, gcc

您好，我正在尝试在 Microsoft Visual Studio Ultimate 2010 中执行由以下代码生成的 .exe 文件，但没有看到正在创建的文件。

这段代码在使用 GCC 的 Linux 中编译和执行时工作得非常好。

重复一遍，我可以使用在 Linux 中创建的文件！但在 Windows 中，.exe 程序无法为用户在命令提示符下输入的名称创建文件。

有人可以让我知道我在编译器方面出了什么问题吗？

真诚的感谢

```
// filename.cpp : Defines the entry point for the console application.

    #include "stdafx.h"        //Please comment if code is to be executed in GCC
    #include <stdio.h>
    #include <stdlib.h>
    #include <memory.h>

    int main()
    {
        FILE *pFile;
        char cNotes_buffer[100];
        memset(cNotes_buffer,0,100);
        printf("Please enter name of the LOG file - with tag MAX 100 characters!! \n");
        if( fgets (cNotes_buffer , 100 , stdin) != NULL )
            {
            fclose (stdin);
        }

        printf("name of file %s \n", cNotes_buffer);
        if ( ( pFile = fopen(cNotes_buffer,"a+") ) == NULL )
        {
            printf("ERROR OPENING FILE FOR LOGGING \n");
            exit(0);
        }
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:19:26.243

`ENTER`输入文件名后，您很可能会按。所以`\n`也进入`cNotes_buffer`。现在您尝试创建一个以该缓冲区为文件名的文件。而且我认为您不能`\n`在其中创建文件名。

如果您按下了返回键，请执行类似操作

```
cNotes_buffer[strlen(cNotes_buffer)-1]=0; 
```

**编辑**：换行符可以出现在 linux 中的[文件名](http://www.dwheeler.com/essays/fixing-unix-linux-filenames.html)中，但在[Windows](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx)上则不然这解释了为什么您的文件是在 Linux 中创建的，而不是在 Windows 上创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:15:35.707

尝试`fclose(pFile)`。未能关闭文件会导致奇怪的行为。

# java - 如何在 JFrame 中“打包”JPanel？

> ID：10208074
> 
> 赞同：-1
> 
> 时间：2012-04-18T11:06:03.317
> 
> 标签：java, swing, jframe, panel

首先，我已经完成了[这个](https://stackoverflow.com/questions/2227845/how-to-find-out-the-preferred-size-of-a-jpanel-which-is-not-displayed-according)相关的问题，但无法让它发挥作用。

现在，我的问题：我有一个 JFrame，里面包含一个 JPanel，它是动态绘制的。现在，当我绘制这个面板时，它占据了整个屏幕，并蔓延到边缘。我在面板上使用了 BoxLayout.Y_AXIS。

我是如何做到这一点的...

我附上了截图：

**我得到了什么：** ![我得到了什么](../Images/b5d284779919268084acdd1e02673ec6.png)

**我想要的是：**

![我想要的是](../Images/fa2146e3d769201eb99dd4cac9066836.png)

**编辑：添加源代码（最小化，不实际）**

```
public class DialogReportsMain extends JDialog implements ActionListener 
{
  public DialogReportsMain(JFrame mParent, boolean isModal) 
  {  
  /*******************************************/

  setLayout(new BorderLayout(0, 0));

      /***************************************/
      addNorthContent(this);
      addWestContent(this);
      addSouthContent(this);

      /***************************************/
  JPanel mOrderHeaderContainer = new JPanel();
    mOrderHeaderContainer.setLayout(new BoxLayout(mOrderHeaderContainer, BoxLayout.Y_AXIS));

        /***************************************/
        // Table Number
        JLabel mLabelTableNumber = new JLabel("Table: "
                                                + new Integer(mOrderDetails.mTableNumber).toString());
        mOrderHeaderContainer.add(mLabelTableNumber);

        /***************************************/
        // Dates
        JPanel mPanelDates = new JPanel();
        mPanelDates.setLayout(new GridLayout(1, 2, 20, 0));

            JLabel mLabelReceivedDateTime = new JLabel(mOrderDetails.mReceivedDateTime);
            mPanelDates.add(mLabelReceivedDateTime);

            JLabel mLabelBillDateTime = new JLabel(mOrderDetails.mBillDateTime);
            mPanelDates.add(mLabelBillDateTime);

        mOrderHeaderContainer.add(mPanelDates);

        /***************************************/
        // Waiter Details
        JLabel mLabelWaiterDetails = new JLabel("Waiter: "
                                                + new Integer(mOrderDetails.mWaiterId).toString()
                                                + " ("
                                                + mOrderDetails.mWaiterName
                                                + " )"
                                                );
        mOrderHeaderContainer.add(mLabelWaiterDetails);

        /***************************************/
        // Blank Lines
        mOrderHeaderContainer.add(new JLabel());
        mOrderHeaderContainer.add(new JLabel());

    /***************************************/
            add(mOrderHeaderContainer, BorderLayout.CENTER);

  /*******************************************/
  setTitle("Reports");
  setModalityType(ModalityType.MODELESS);
  setDefaultCloseOperation(DISPOSE_ON_CLOSE);
  setResizable(true);
  setMinimumSize(new Dimension(100, 400));
  makeDialogFullScreen(this);
  setLocationRelativeTo(null);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:31:12.950

*   方法`pack()`最终确定输出到屏幕的基础上

    a) 使用过`LayoutManager`

    和

    b)`Size/PrefereredSize`

    从当前`Component`层次结构中的所有元素返回

*   `BoxLayout`默认情况下接受`Size/PrefereredSize`，注意这个属性可能对每个`LayoutManager`s实现不同

# spring - apache camel 是否支持将 Spring MVC 实现的 REST 服务公开为 SOAP

> ID：10208082
> 
> 赞同：1
> 
> 时间：2012-04-18T11:06:39.557
> 
> 标签：spring, rest, soap, cxf, apache-camel

我们目前正在使用 Spring MVC 来实现 REST 服务。我们需要将这些服务实现的一个子集公开为 SOAP。

我查看了 apache camel 文档，看看是否有任何这样的直接支持。从文档看来，骆驼可能可以做到，但仅适用于通过 Apache CXF 实现的服务。在下结论之前，我想知道 Spring MVC 实现的 REST 服务是否也可以。

*   骆驼是否支持将 Spring MVC 实现的 REST 服务公开为 SOAP 服务
*   如果是的话，你能指点我一些文件吗？
*   如果没有，关于为 Spring MVC 实现的 REST 服务实现 SOAP 包装器的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T07:10:34.743

首先，没有明显的方法可以在 SOAP 和 REST 之间进行自动代理。

REST 完全是关于数据/资源（各种形状和颜色）和很少的操作，SOAP 完全是关于使用 XML 定义的数据的操作。

但是使用 Camel 使用 SOAP 消息应该相当直接（例如使用 Spring WS）。

然后，您可以使用原始 XML（XPATH 或 XSLT），也可以通过使用 JAXB 将其解组为 Java 对象。这可能是相当自动化的。请参阅（http://camel.apache.org/spring-ws-example.html 获取 Spring WS、Camel 和 JAXB 示例）。我还建议您使用 maven-jaxb2-plugin 根据 SOAP 模式生成带有 JAXB 的 Java 对象。

然后，您需要某种查找表在 SOAP 端点/方法/soap 操作之间路由到 REST 服务。这在很大程度上取决于 REST 服务的结构。然后用 Camel 调用 RESTful 资源应该是微不足道的。无论你喜欢什么，都可以考虑它是 HTTP 或 REST。

您必须考虑的可能是此场景中最重要的部分，即您的 REST 服务是否具有除 XML 之外的其他有效负载编码，例如 JSON。然后必须完成 XML 和 JSON 之间的映射。对此没有真正的标准，但 Camel 可以简化这项工作。Camel 甚至将在下一个版本 2.10 (https://issues.apache.org/jira/browse/CAMEL-4930) 中提供自动转换功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T03:05:44.257

我想您的一个可能选择是使用任何 ESB 并实现一个代理，为 REST API 提供一个 SOAP 接口。

基本上，ESB 充当接收 SOAP 消息的代理，并将格式转换为 REST 以与现有的 REST API 对话，并将接收到的响应转换回 SOAP 以响应客户端。

这是大多数 ESB 的一个非常常见的用例，我相信 Camel 也可以做到这一点，但如果您还没有绑定到 Camel，您可能还想查看其他 ESB（如[UltraESB）](http://www.adroitlogic.org)并做出决定。

# javascript - Javascript，验证，for循环

> ID：10208084
> 
> 赞同：0
> 
> 时间：2012-04-18T11:06:50.717
> 
> 标签：javascript, validation, loops

我正在用 Javascript 编写信用卡号验证器。我希望它与 LUHN 变量进行检查，并且我想自己编写这些步骤，并且我尝试在 for 循环的帮助下执行此操作以练习它们。但是，我被困住了，我可以从这里开始使用一些友好的建议来做什么。我也对 for 循环的整个语法有些困扰，欢迎任何关于如何改进它们的提示。

项目在这里：http: [//jsfiddle.net/tomasantonj/eZKMa/12/](http://jsfiddle.net/tomasantonj/eZKMa/12/)

这是我遇到问题的代码：

```
else if (filter.test(cardnumber.value))
{

  // 1\. Begin with second to last number iterate, every second number with 2 until start.
    for(i = 0; i < cardnumber.length;i += 1){
    newnumbers = (i * 2);

  // 2\. The result of the previous string to be added i+i+i.
    for (i = 0; i < newnumbers.length; i += 1){   
    sum1 = (i + i);

  // 3\. Then add the remaining numbers together but skip the last which is a control number.
    for (i = 0; i < cardnumber.length; i += 1){
    sum2 = (i + i);

  // 4\. Add sum1 and sum2 together

    var checksum = (sum1 + sum2);

    alert('the sum of x and y is: ' + checksum);
    // 5\. Mod10 out of the checksum + cardnumber control number to get validity.
    if ((checksum + cardnumber[-0]) % 10 === 0){
            alert('LUHN checks out!');
    }
    else {
    alert('not yet');
    }
   }  
  } 
 } 
```

我不确定如何提出正确的问题，但我猜我的问题是变量范围、for 循环和让 for 循环执行基于索引的查询。我知道这段代码又丑又长，这是我第二次尝试 JavaScript，所以请不要太介意。

运行此代码时，校验和未定义——有人知道这是为什么吗？可能与字符串和整数有关？:S

任何回应都将受到高度赞赏。谢谢你，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:08:52.753

您可以在所有嵌套的 for 循环中使用相同的变量“i”吗？这对我来说不好看！

# c# - 在 IEnumerable 中获取 T 的类型

> ID：10208090
> 
> 赞同：2
> 
> 时间：2012-04-18T11:07:18.450
> 
> 标签：c#, generics, .net-4.0, types

这是我的通用类：

```
public class MyClass<T>
{
    public T MainModel { get; set; }

    public Type GetType()
    {
        //here
    }
} 
```

然后我用这种形式：

```
List<MySecondClass> Myinstance = new List<MySecondClass>();

MyClass<IEnumerable<MySecondClass>> mainInstance = new  MyClass<IEnumerable<MySecondClass>> { MainModel = Myinstance  }; 
```

所以我需要`GetType()`返回的方法`typeof(MySecondClass)`你的建议是什么？

**更新**

我必须提到，始终`MyClass`只使用两种形式：第一：我在上面完全编码，第二：

```
ThirdClass thirdone = new ThirdClass(); 
MyClass<ThirdClass> = new MyClass<ThirdClass>(){ MainModel = thirdone}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T11:12:19.727

## 如果`T`是`List<T>`

```
// add error checking to taste
var typeOfEnumerable = typeof(T).GetInterfaces().Where(i => i.IsGenericType)
    .Single(i => i.GetGenericTypeDefinition() == typeof(IEnumerable<>))
    .GetGenericArguments().First(); 
```

**[看到它在行动](http://ideone.com/SjVpx)**。

## 如果`T`是`IEnumerable<T>`

```
// add error checking to taste
var typeOfEnumerable = typeof(T).GetGenericArguments().First(); 
```

## 重要笔记

您真的应该考虑在`MyClass`这里尝试做什么。为什么它要`T`成为一个特殊情况`IEnumerable<X>`？也许应该添加一些约束`T`？如果没有更具体的信息，就不可能回答这些和其他重要问题，但您确实应该这样做。

`GetType`另外，您是偶然还是故意命名该方法？像这样隐藏*真的，真的，真的不是一个好主意*`object.GetType`，所以我建议你重命名那个方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T11:09:33.220

编辑：读得太快。对于那个很抱歉。

```
var t = typeof(T);
if (t.IsGenericType)
{
    return t.GetGenericArguments().FirstOrDefault();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:51:19.347

考虑`IEnumerable<T>`在许多不同的情况下使用它。

例子：

*   `MyClass<IEnumerable<MySecondClass>>`: 正如你所说，你想要`MySecondClass`
*   `MyClass<List<MySecondClass>>`: 你可能想要`MySecondClass`
*   `MyClass<Dictionary<Guid, MySecondClass>>`: 还有`MySecondClass`？或者`KeyValuePair<Guid, MySecondClass>`？
*   `MyClass<MyOwnStringList>`: MyOwnStringList 将实现`IEnumerabl<string>`。类本身没有通用参数。有很多这样的例子。
*   `MyClass<string>`: 你考虑过那个字符串工具`IEnumerable<char>`吗？
*   一个类可以实现多个`IEnumerable<T>`定义。

在考虑了这些情况之后，您必须决定要做什么。

*   您可以搜索`IEnumerable<T>`接口并提取通用参数。可能不止一个。字符串可能有一个例外。
*   您可能会放弃尝试获取`IEnumerable<T>`通用参数。
*   您可能只想`IEnumerable<T>`直接支持（无子类型），例如，`IList<T>`.

# jsf - PrimeFaces DataTable 选择在 dialog.show() 上变为空

> ID：10208091
> 
> 赞同：3
> 
> 时间：2012-04-18T11:07:18.573
> 
> 标签：jsf, dialog, datatable, null, primefaces

我一起使用 Datatable 和 Dialog 时遇到了一个大问题。

我需要单击数据表的行并显示一个从数据表的选定项加载数据的对话框。

选择很好，但是一旦显示对话框，所选元素就会设置为空：/

这是一些代码：

```
<h:form id="form">  
                    <pou:dataTable widgetVar="conv" id="mex" var="conv" value="#{messagesBean.listaConversazioni}" paginator="true" rowKey="#{conv}" paginatorPosition="bottom"  
                                   selection="#{messagesBean.destinatario}"  selectionMode="single" rows="15">  
                        <pou:ajax event="rowSelect" 
                                  oncomplete="convDialog.show()" update=":form:display, :growl, :menuPanel" />  
                        <pou:column>
                            <f:facet name="header">
                                <h:outputText value="Conversazioni"/>                                                                        
                            </f:facet>
                            <h:outputText value="#{conv.username}"/>                                
                        </pou:column>  
                    </pou:dataTable>                     

                    <pou:dialog id="convDialog" header="Conversazione" widgetVar="convDialog" onHide="conv.unselectAllRows()" position="center" modal="true" resizable="false" draggable="false"  
                                showEffect="explode" hideEffect="explode" height="635" width="620">                                  
                        <h:panelGrid id="display">
                            <pou:panel id="postForm">
                                <div align="center">
                                    <pou:inputTextarea value="#{messagesBean.messaggio}" cols="50" autoResize="true" maxlength="255"/> <br/>
                                    <pou:commandButton  action="#{messagesBean.invia(messagesBean.destinatario)}" value="Invia" update="display, :growl"/>
                                </div>   
                            </pou:panel>             
                            <pou:panel>
                                <div class="conversazionePanel">
                                    <pou:dataTable id="mexTable" var="mex" value="#{messagesBean.caricaConversazione(messagesBean.destinatario)}" rowStyleClass="postTable">                                         
                                        <pou:column style="border: none; background: rgba(0,0,0,0)">  
                                            <div id="messaggio_#{mex.idMessaggio}">
                                                <pou:outputPanel rendered="#{mex.mittente eq loginBean.utente}">
                                                    <pou:panelGrid columns="2">
                                                        <h:outputText value="Io"/>
                                                        <div class="messaggioInviato">#{mex.testo}</div>
                                                    </pou:panelGrid> 
                                                </pou:outputPanel> 
                                                <pou:outputPanel rendered="#{mex.destinatario eq loginBean.utente}">                                                                                                                                                
                                                    <pou:panelGrid columns="2">
                                                        <div class="messaggioRicevuto">#{mex.testo}</div>
                                                        <h:outputText value="#{mex.mittente.username}"/>
                                                    </pou:panelGrid>                                                                                                
                                                </pou:outputPanel>                                                 
                                            </div>
                                        </pou:column>                                        
                                    </pou:dataTable>   
                                </div>
                            </pou:panel>                            
                        </h:panelGrid>                                                                                    
                    </pou:dialog>                        
                </h:form> 
```

_

`#{messagesBean.listaConversazioni}`返回用户列表

_

`#{conv}`是用户

_

`#{messagesBean.destinatario}`是我需要设置的用户。当我单击该行时，它需要 conv 的值，但它突然变为 null。

奇怪的想法是

```
<pou:dataTable id="mexTable" var="mex" value="#{messagesBean.caricaConversazione(messagesBean.destinatario)}" 
```

同时，在同一个对话框中

```
<h:outputText value="#{messagesBean.destinatario==null}"> 
```

打印真实：\

它出什么问题了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T15:21:51.707

不确定，但`rowKey="#{conv.id}"`也许？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-23T17:23:55.910

我知道这篇文章很旧，但同样的场景已经出现过多次，99% 的问题是使用 @RequestScoped bean 来存储选择。Request Scoped bean 填充了选定的行，但随后被拆除。因此，当您想要打开对话框时，会创建一个带有空选择的新 RequestScoped bean。尝试将保留选择的支持 bean 更改为 @ViewScoped，您的问题应该得到解决。

# javascript - 褪色的幻灯片不循环播放

> ID：10208096
> 
> 赞同：0
> 
> 时间：2012-04-18T11:07:36.020
> 
> 标签：javascript, jquery

我正在尝试创建一个淡入淡出的图像幻灯片，只有我的第一张图像不断刷新，有人能看到我哪里出错了吗？

HTML：

```
<div id="slideshow">
    <a href="#"><img src="http://placekitten.com/200/300" class="active"/></a>
    <a href="#"><img src="http://placekitten.com/300/400"/></a>
    <a href="#"><img src="http://placekitten.com/350/500"/></a>
    <a href="#"><img src="http://placekitten.com/370/600"/></a>
</div> 
```

jQuery：

```
function slideSwitch() {
    var $active = $('#slideshow a IMG.active');

    if ($active.length == 0) $active = $('#slideshow a IMG:last');

    // use this to pull the images in the order they appear in the markup
    var $next = $active.next().length ? $active.next() : $('#slideshow a IMG:first');

    // uncomment the 3 lines below to pull the images in random order
    // var $sibs  = $active.siblings();
    // var rndNum = Math.floor(Math.random() * $sibs.length );
    // var $next  = $( $sibs[ rndNum ] );

    $active.addClass('last-active');

    $next.css({
        opacity: 0.0
    }).addClass('active').animate({
        opacity: 1.0
    }, 1000, function() {
        $active.removeClass('active last-active');
    });
};

$(function() {
    setInterval(slideSwitch, 5000);
});​ 
```

[http://jsfiddle.net/eSrcr/1/](http://jsfiddle.net/eSrcr/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:16:13.957

问题是因为您在变量上`next()`使用`$active`。没有`next()`元素，因为每个元素都`img`包含在它自己的`a`.

试试这个：

```
var $next = $active.parent().next("a").find("img").length ? $active.parent().next("a").find("img") : $('#slideshow img:first'); 
```

[**示例小提琴**](http://jsfiddle.net/eSrcr/4/)

不过，您需要确保淡出/隐藏之前的图像，因为它们的大小都不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:19:14.163

代替：

```
var $next = $active.next().length ? $active.next() : $('#slideshow a IMG:first'); 
```

和：

```
var $next =  $active.parent().next().find("img").length ? $active.parent().next().find("img")
    : $('#slideshow a IMG:first'); 
```

# java - 如何使用Java将一段.docx复制到另一个.docx并保留样式

> ID：10208097
> 
> 赞同：8
> 
> 时间：2012-04-18T11:07:37.393
> 
> 标签：java, ms-word, apache-poi, docx4j

我正在尝试将 .docx 中特定段落的内容复制到另一个空的 .docx 。我遇到的问题是 source.docx 中的样式、项目符号、编号等未保留在目标 .docx 中。这里是我的代码

谁能告诉我要添加到上述代码中的更改是什么？提前致谢！！

```
public class WordFinal {

        public static void main(String[] args) throws IOException, XmlException {

        XWPFDocument doc = new XWPFDocument(new FileInputStream("source.docx"));

        XWPFDocument destDoc =new XWPFDocument(); 

        OutputStream out = new FileOutputStream("Destination.docx"); 

        XWPFParagraph pr =doc.getParagraphs()[1];

        String copy=pr.getText();

        XWPFParagraph paragraphOne = destDoc.createParagraph(); 

        XWPFRun paragraphOneRunOne = paragraphOne.createRun();

        paragraphOneRunOne.setText(copy);

        destDoc.write(out);

         }
             } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-19T04:46:02.177

我正在使用来自[http://poi.apache.org/的“poi-bin-3.10.1-20140818”库](http://poi.apache.org/)

您可以复制`.docx`文件循环中的所有段落`doc.getParagraphs()`

但`Table`不是段落，所以`Table`不是复制的。

要复制`Table`，您必须获取`IBodyElement`和循环`doc.getBodyElements()`。

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;

import org.apache.poi.xwpf.usermodel.XWPFDocument;
import org.apache.poi.xwpf.usermodel.XWPFParagraph;
import org.apache.xmlbeans.XmlException;

public class WordFinal {

    public static void main(String[] args) throws IOException, XmlException {

        XWPFDocument doc = new XWPFDocument(new FileInputStream("source.docx"));

        XWPFDocument destDoc = new XWPFDocument();

        OutputStream out = new FileOutputStream("Destination.docx");

        // ** This code will copy just one paragraph. **

        XWPFParagraph pr = doc.getParagraphs().get(0);

        destDoc.createParagraph();

        int pos = destDoc.getParagraphs().size() - 1;

        destDoc.setParagraph(pr, pos);

        destDoc.write(out);

    }
} 
```

所以复制所有段落和表格的代码如下所示。

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;

import org.apache.poi.xwpf.usermodel.BodyElementType;
import org.apache.poi.xwpf.usermodel.IBodyElement;
import org.apache.poi.xwpf.usermodel.XWPFDocument;
import org.apache.poi.xwpf.usermodel.XWPFParagraph;
import org.apache.poi.xwpf.usermodel.XWPFTable;
import org.apache.xmlbeans.XmlException;

public class WordFinal {

    public static void main(String[] args) throws IOException, XmlException {

        XWPFDocument doc = new XWPFDocument(new FileInputStream("source.docx"));

        XWPFDocument destDoc = new XWPFDocument();

        OutputStream out = new FileOutputStream("Destination.docx");

        for (IBodyElement bodyElement : doc.getBodyElements()) {

            BodyElementType elementType = bodyElement.getElementType();

            if (elementType.name().equals("PARAGRAPH")) {

                XWPFParagraph pr = (XWPFParagraph) bodyElement;

                destDoc.createParagraph();

                int pos = destDoc.getParagraphs().size() - 1;

                destDoc.setParagraph(pr, pos);

            } else if( elementType.name().equals("TABLE") ) {

                XWPFTable table = (XWPFTable) bodyElement;

                destDoc.createTable();

                int pos = destDoc.getTables().size() - 1;

                destDoc.setTable(pos, table);
            }
        }

        destDoc.write(out);
    }
} 
```

但即使通过这种方式，您也无法复制图像和样式。

所以复制的文件看起来与原始文件不同。

该`org.apache.poi.xwpf.usermodel.XWPFRun.addPicture()`方法似乎有错误。

`XWPFRun.addPicture()`Microsoft Word 无法打开包含添加的图像的 Docx 文档。

[参考] [https://issues.apache.org/bugzilla/show_bug.cgi?id=49765](https://issues.apache.org/bugzilla/show_bug.cgi?id=49765)

下面的代码包括下一个功能。

1.  复制段落和表格的内容和样式

2.  复制页面布局

3.  从源 docx 文件复制图像

    ```
    package com.overflow.heeseok;

    import java.io.*;
    import java.math.BigInteger;
    import java.util.List;

    import org.apache.poi.openxml4j.exceptions.InvalidFormatException;
    import org.apache.poi.xwpf.usermodel.*;
    import org.apache.xmlbeans.XmlException;
    import org.openxmlformats.schemas.wordprocessingml.x2006.main.*;
    import org.openxmlformats.schemas.wordprocessingml.x2006.main.STPageOrientation.Enum;

    public class WordFinal {

        public static void main(String[] args) throws IOException, XmlException
        {
            XWPFDocument srcDoc = new XWPFDocument(new FileInputStream("Source.docx"));

            CustomXWPFDocument destDoc = new CustomXWPFDocument();

            // Copy document layout.
            copyLayout(srcDoc, destDoc);

            OutputStream out = new FileOutputStream("Destination.docx");

            for (IBodyElement bodyElement : srcDoc.getBodyElements()) {

                BodyElementType elementType = bodyElement.getElementType();

                if (elementType == BodyElementType.PARAGRAPH) {

                    XWPFParagraph srcPr = (XWPFParagraph) bodyElement;

                    copyStyle(srcDoc, destDoc, srcDoc.getStyles().getStyle(srcPr.getStyleID()));

                    boolean hasImage = false;

                    XWPFParagraph dstPr = destDoc.createParagraph();

                    // Extract image from source docx file and insert into destination docx file.
                    for (XWPFRun srcRun : srcPr.getRuns()) {

                        // You need next code when you want to call XWPFParagraph.removeRun().
                        dstPr.createRun();

                        if (srcRun.getEmbeddedPictures().size() > 0)
                            hasImage = true;

                        for (XWPFPicture pic : srcRun.getEmbeddedPictures()) {

                            byte[] img = pic.getPictureData().getData();

                            long cx = pic.getCTPicture().getSpPr().getXfrm().getExt().getCx();
                            long cy = pic.getCTPicture().getSpPr().getXfrm().getExt().getCy();

                            try {
                                // Working addPicture Code below...
                                String blipId = dstPr.getDocument().addPictureData(new ByteArrayInputStream(img),
                                        Document.PICTURE_TYPE_PNG);
                                destDoc.createPictureCxCy(blipId, destDoc.getNextPicNameNumber(Document.PICTURE_TYPE_PNG),
                                        cx, cy);

                            } catch (InvalidFormatException e1) {
                                e1.printStackTrace();
                            }
                        }
                    }

                    if (hasImage == false)
                    {
                        int pos = destDoc.getParagraphs().size() - 1;
                        destDoc.setParagraph(srcPr, pos);
                    }

                } else if (elementType == BodyElementType.TABLE) {

                    XWPFTable table = (XWPFTable) bodyElement;

                    copyStyle(srcDoc, destDoc, srcDoc.getStyles().getStyle(table.getStyleID()));

                    destDoc.createTable();

                    int pos = destDoc.getTables().size() - 1;

                    destDoc.setTable(pos, table);
                }
            }

            destDoc.write(out);
            out.close();
        }

        // Copy Styles of Table and Paragraph.
        private static void copyStyle(XWPFDocument srcDoc, XWPFDocument destDoc, XWPFStyle style)
        {
            if (destDoc == null || style == null)
                return;

            if (destDoc.getStyles() == null) {
                destDoc.createStyles();
            }

            List<XWPFStyle> usedStyleList = srcDoc.getStyles().getUsedStyleList(style);
            for (XWPFStyle xwpfStyle : usedStyleList) {
                destDoc.getStyles().addStyle(xwpfStyle);
            }
        }

        // Copy Page Layout.
        //
        // if next error message shows up, download "ooxml-schemas-1.1.jar" file and
        // add it to classpath.
        //
        // [Error]
        // The type org.openxmlformats.schemas.wordprocessingml.x2006.main.CTPageMar
        // cannot be resolved.
        // It is indirectly referenced from required .class files
        //
        // This error happens because there is no CTPageMar class in
        // poi-ooxml-schemas-3.10.1-20140818.jar.
        //
        // [ref.] http://poi.apache.org/faq.html#faq-N10025
        // [ref.] http://poi.apache.org/overview.html#components
        //
        // < ooxml-schemas 1.1 download >
        // http://repo.maven.apache.org/maven2/org/apache/poi/ooxml-schemas/1.1/
        //
        private static void copyLayout(XWPFDocument srcDoc, XWPFDocument destDoc)
        {
            CTPageMar pgMar = srcDoc.getDocument().getBody().getSectPr().getPgMar();

            BigInteger bottom = pgMar.getBottom();
            BigInteger footer = pgMar.getFooter();
            BigInteger gutter = pgMar.getGutter();
            BigInteger header = pgMar.getHeader();
            BigInteger left = pgMar.getLeft();
            BigInteger right = pgMar.getRight();
            BigInteger top = pgMar.getTop();

            CTPageMar addNewPgMar = destDoc.getDocument().getBody().addNewSectPr().addNewPgMar();

            addNewPgMar.setBottom(bottom);
            addNewPgMar.setFooter(footer);
            addNewPgMar.setGutter(gutter);
            addNewPgMar.setHeader(header);
            addNewPgMar.setLeft(left);
            addNewPgMar.setRight(right);
            addNewPgMar.setTop(top);

            CTPageSz pgSzSrc = srcDoc.getDocument().getBody().getSectPr().getPgSz();

            BigInteger code = pgSzSrc.getCode();
            BigInteger h = pgSzSrc.getH();
            Enum orient = pgSzSrc.getOrient();
            BigInteger w = pgSzSrc.getW();

            CTPageSz addNewPgSz = destDoc.getDocument().getBody().addNewSectPr().addNewPgSz();

            addNewPgSz.setCode(code);
            addNewPgSz.setH(h);
            addNewPgSz.setOrient(orient);
            addNewPgSz.setW(w);
        }
    } 
    ```

和`CustomXWPFDocument`类源。

```
package com.overflow.heeseok;

import java.io.IOException;

import org.apache.poi.xwpf.usermodel.XWPFDocument;
import org.apache.xmlbeans.*;
import org.openxmlformats.schemas.drawingml.x2006.main.*;
import org.openxmlformats.schemas.drawingml.x2006.wordprocessingDrawing.CTInline;

/**
 * [ref] https://issues.apache.org/bugzilla/show_bug.cgi?id=49765
 * [ref] http://pastebin.com/index/CbQ3iw8t, http://pastebin.com/2YAneYgt
 */
public class CustomXWPFDocument extends XWPFDocument
{
    public CustomXWPFDocument() throws IOException
    {
        super();
    }

    public void createPictureCxCy(String blipId,int id, long cx, long cy)
    {
        CTInline inline = createParagraph().createRun().getCTR().addNewDrawing().addNewInline();

        String picXml = "" +
                "<a:graphic xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\">" +
                "   <a:graphicData uri=\"http://schemas.openxmlformats.org/drawingml/2006/picture\">" +
                "      <pic:pic xmlns:pic=\"http://schemas.openxmlformats.org/drawingml/2006/picture\">" +
                "         <pic:nvPicPr>" +
                "            <pic:cNvPr id=\"" + id + "\" name=\"Generated\"/>" +
                "            <pic:cNvPicPr/>" +
                "         </pic:nvPicPr>" +
                "         <pic:blipFill>" +
                "            <a:blip r:embed=\"" + blipId + "\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\"/>" +
                "            <a:stretch>" +
                "               <a:fillRect/>" +
                "            </a:stretch>" +
                "         </pic:blipFill>" +
                "         <pic:spPr>" +
                "            <a:xfrm>" +
                "               <a:off x=\"0\" y=\"0\"/>" +
                "               <a:ext cx=\"" + cx + "\" cy=\"" + cy + "\"/>" +
                "            </a:xfrm>" +
                "            <a:prstGeom prst=\"rect\">" +
                "               <a:avLst/>" +
                "            </a:prstGeom>" +
                "         </pic:spPr>" +
                "      </pic:pic>" +
                "   </a:graphicData>" +
                "</a:graphic>";

        //CTGraphicalObjectData graphicData = inline.addNewGraphic().addNewGraphicData();
        XmlToken xmlToken = null;
        try
        {
            xmlToken = XmlToken.Factory.parse(picXml);
        }
        catch(XmlException xe)
        {
            xe.printStackTrace();
        }
        inline.set(xmlToken);
        //graphicData.set(xmlToken);

        inline.setDistT(0);
        inline.setDistB(0);
        inline.setDistL(0);
        inline.setDistR(0);

        CTPositiveSize2D extent = inline.addNewExtent();
        extent.setCx(cx);
        extent.setCy(cy);

        CTNonVisualDrawingProps docPr = inline.addNewDocPr();
        docPr.setId(id);
        docPr.setName("Picture " + id);
        docPr.setDescr("Generated");
    }

    public void createPicture(String blipId,int id, int width, int height)
    {
        final int EMU = 9525;
        width *= EMU;
        height *= EMU;
        //String blipId = getAllPictures().get(id).getPackageRelationship().getId();

        createPictureCxCy(blipId, id, width, height);
    }
} 
```

# c# - 如何从使用 WCF 绑定的 app.config 开始，并将其转换为以正确的方式以编程方式绑定

> ID：10208098
> 
> 赞同：0
> 
> 时间：2012-04-18T11:07:37.737
> 
> 标签：c#, .net, wcf, soap

我有以下绑定，当我创建客户端时可以正常工作。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="Assets_AssetsPort" closeTimeout="00:01:00" openTimeout="00:01:00"
                    receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
                    bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Mtom" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
                <binding name="AssetsPortBinding" closeTimeout="00:01:00" openTimeout="00:01:00"
                    receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
                    bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://osi-tm/services/Assets" binding="basicHttpBinding"
                bindingConfiguration="Assets_AssetsPort" contract="InterplayWS.AssetsPortType"
                name="AssetsPort" />
        </client>
    </system.serviceModel>
</configuration> 
```

但是现在我需要在没有任何配置文件的情况下配置它。因此，我尝试执行以下操作：

```
 BasicHttpBinding basicBinding = new BasicHttpBinding()
    {
        MaxReceivedMessageSize = 2147483647,
        MaxBufferPoolSize = 2147483647
    };
    basicBinding.MessageEncoding = WSMessageEncoding.Mtom;

    var endpoint = new EndpointAddress(new Uri(String.Format("http://{0}/services/Assets?wsdl", Connection.InterplayHost)));

    var client = new AssetClient(basicBinding, endpoint); 
```

当我运行它时，我得到一个错误

```
<Exception>
<ExceptionType>System.ServiceModel.CommunicationException, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>Unrecognized message version.</Message>
<StackTrace>
at System.ServiceModel.Channels.ReceivedMessage.ReadStartEnvelope(XmlDictionaryReader reader)
at System.ServiceModel.Channels.BufferedMessage..ctor(IBufferedMessageData messageData, RecycledMessageState recycledMessageState, Boolean[] understoodHeaders)
at System.ServiceModel.Channels.MtomMessageEncoder.ReadMessage(ArraySegment`1 buffer, BufferManager bufferManager, String contentType)
at System.ServiceModel.Channels.MessageEncoder.ReadMessage(Stream stream, BufferManager bufferManager, Int32 maxBufferSize, String contentType)
at System.ServiceModel.Channels.HttpInput.ReadChunkedBufferedMessage(Stream inputStream)
at System.ServiceModel.Channels.HttpInput.ParseIncomingMessage(Exception&amp; requestException)
at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)
at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)
at DDMEService.InterplayReference.AssetsPortType.GetChildren(GetChildrenRequest request)
at DDMEService.InterplayReference.AssetsPortTypeClient.DDMEService.InterplayReference.AssetsPortType.GetChildren(GetChildrenRequest request)
at DDMEService.InterplayReference.AssetsPortTypeClient.GetChildren(UserCredentialsType UserCredentials, GetChildrenType GetChildren1)
at DDMEService.Classes.AvidCommand.PopulateGenericAssets(String UNCHostname, String UNCDirectoryPath)
at DDMEService.Classes.CommandManager.PrepareAvidList(String HostName, String DirectoryPath, Boolean SearchSubdirectory, Boolean RenameToDirectory, String FileFilter, String ExtensionFilter, String InterplayHost, String InterplayWorkgroup, String Catalog, String LocatorSequenceStartWords, String LocatorSequenceEndWords, String Username, String Password)
at DDMEService.Classes.CommandManager.Execute()
at DDMEService.ClientHandler.ProcessCommand(String ClientIP, String Command)
at DDMEService.ClientHandler.Process(Object O)
at System.Threading._ThreadPoolWaitCallback.WaitCallback_Context(Object state)
at System.Threading.ExecutionContext.runTryCode(Object userData)
at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading._ThreadPoolWaitCallback.PerformWaitCallbackInternal(_ThreadPoolWaitCallback tpWaitCallBack)
at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback(Object state)
</StackTrace>
<ExceptionString>System.ServiceModel.CommunicationException: Unrecognized message version.</ExceptionString>
</Exception> 
```

**不工作的肥皂请求**

```
--uuid:4475db34-2787-4220-b800-15c91678a4be+id=2
Content-ID: <http://tempuri.org/0>
Content-Transfer-Encoding: 8bit
Content-Type: application/xop+xml;charset=utf-8;type="text/xml"

<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Header><h:UserCredentials xmlns:h="http://avid.com/interplay/ws/assets/types" xmlns="http://avid.com/interplay/ws/assets/types" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><Username>Administrator</Username><Password>avid</Password></h:UserCredentials><ActivityId CorrelationId="f29e64f8-1568-4683-b196-d53bd97a2cec" xmlns="http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics">13063b98-becc-416a-89ec-23a23498ed21</ActivityId></s:Header><s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><GetChildren xmlns="http://avid.com/interplay/ws/assets/types"><InterplayURI>interplay://A51WG6/Catalogs/000</InterplayURI></GetChildren></s:Body></s:Envelope>
--uuid:4475db34-2787-4220-b800-15c91678a4be+id=2-- 
```

**工作肥皂请求**

```
--uuid:f1481ad5-def1-42bf-a3ca-f9cff5eb856b+id=2
Content-ID: <http://tempuri.org/0>
Content-Transfer-Encoding: 8bit
Content-Type: application/xop+xml;charset=utf-8;type="text/xml"

<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Header><h:UserCredentials xmlns:h="http://avid.com/interplay/ws/assets/types" xmlns="http://avid.com/interplay/ws/assets/types" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><Username>Administrator</Username><Password>avid</Password></h:UserCredentials></s:Header><s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><GetChildren xmlns="http://avid.com/interplay/ws/assets/types"><InterplayURI>interplay://WG5C/Catalogs/Sundance</InterplayURI></GetChildren></s:Body></s:Envelope>
--uuid:f1481ad5-def1-42bf-a3ca-f9cff5eb856b+id=2-- 
```

我怎样才能正确地形成它以使其对我的服务起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:46:53.150

为什么要创建元素然后推送 mtom？你已经有一个文本编码器，所以 mtom 将是第二个编码器。改用这个：

```
basicBinding.messageEncoding = WSMessageEncoding.Mtom 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:51:43.163

我必须从 http://{0}/services/Assets?wsdl 中删除 ?wsdl

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-18T11:55:39.633

要在代码中创建等效绑定，您只需将 BasicHttpBinding 实例上的属性设置为配置文件中指定的值。

通过快速扫描您的代码，您似乎可以删除创建 MtomMessageEncodingBindingElement 实例的代码并将 basicBinding 上的 MessageEncoding 属性设置为 Mtom。

# sql-server-2008 - 是否可以在 SQL Server 2008 中选择特定的 ORDER BY？

> ID：10208104
> 
> 赞同：15
> 
> 时间：2012-04-18T11:07:47.060
> 
> 标签：sql-server-2008, sql-order-by

我有一个包含日期和时间的表，day 列，可以输入任何 7 天，并且它们设置为 data type `varchar`。由于此表包含客户的预订时间，我想从表中选择 id 匹配的所有日期，并且我想按星期一至星期日排序。我希望我可以在这个查询中添加一些东西来手动选择结果返回的顺序，如下所示：

```
select * 
from requirements 
where Family_ID = 1 
ORDER BY Day, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday 
```

这当然行不通，但我只是想展示我想要实现的目标。客户不一定每天都需要帮助，我只是想显示他们预订的日期。

按 DESC 和 ASC 排序对一周中的几天没有帮助，我将不胜感激有关如何实现这一点的任何提示。

谢谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-18T11:12:05.427

嗯..这很讨厌，这些日子被逐字存储为“星期一”、“星期二”等？

无论如何，只需这样做：

```
SELECT * 
FROM Requirements
ORDER BY 
     CASE Day 
     WHEN 'Monday' THEN 1
     WHEN 'Tuesday' THEN 2
     WHEN 'Wednesday' THEN 3
     WHEN 'Thursday' THEN 4
     WHEN 'Friday' THEN 5
     WHEN 'Saturday' THEN 6
     WHEN 'Sunday' THEN 7
     END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:06:43.167

恕我直言，您没有任何理由存储`Monday, Tuesday, etc`...如果您存储日期或日期时间值，您可以随时在需要时从该数据中提取工作日名称 -`DATENAME`在查询中使用或使用您的演示层。这样做的性能成本并不能证明单独存储它恕我直言。而且您应该仍然能够使用本机日期/日期时间数据正确排序。

# ios - 无法从 OAuth iOS 中提取用户 Facebook 电子邮件地址

> ID：10208113
> 
> 赞同：1
> 
> 时间：2012-04-18T11:08:33.177
> 
> 标签：ios, facebook, email, sdk, oauth

你能帮忙解决一些卡在这里，让我们先看代码，这里我请求权限

```
 NSMutableDictionary *params = [[NSMutableDictionary alloc] initWithCapacity:0];
    [params setObject:facebook._appId forKey:@"client_id"];
    [params setObject:@"token" forKey:@"response_type"];
    [params setObject:[NSString stringWithCString:"email,user_about_me,read_stream,publish_stream,offline_access" encoding:NSUTF8StringEncoding] forKey:@"scope"];
    [facebook dialog:@"oauth" andParams:params andDelegate:self];
    [params release]; 
```

这里使用 @"me" 作为图形 API

```
- (void)fbDidLogin 
{
    [facebook requestWithGraphPath:@"me" andDelegate:self];

} 
```

但我得到的只是

```
- (void)request:(FBRequest *)request didLoad:(id)result
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible=NO;
    NSLog(@"FB result %@", result);
} 
```

FB结果（“Justfortest Workingin”，100002369945695）

但是如何获取电子邮件地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:46:12.727

```
facebook = [[Facebook alloc] initWithAppId:kYourAppID andDelegate:self];    
NSArray *permissions = [[NSArray alloc] initWithObjects:@"publish_stream",@"publish_actions", @"email",@"user_about_me",@"offline_access",nil];
[facebook authorize:permissions];
[permissions release]; 
```

然后你应该得到你需要的一切

对于对话框而不是 Web 浏览器，这是您需要的：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithCapacity:10];
[params setObject:kFBAppId forKey:@"client_id"];
[params setObject:@"publish_stream,email,offline_access" forKey:@"scope"];
// Now popup the login dialog
[facebook dialog:@"oauth" andParams:params andDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:51:01.340

正确答案是 fb 不返回电子邮件和其他数据

```
[facebook requestWithGraphPath:@"me" andDelegate:self]; 
```

只有 id 和 name。

我需要简单地输入

```
- (void)request:(FBRequest *)request didLoad:(id)result 
```

再次调用用户数据。

最后需要的方法如下所示：

```
 - (void)request:(FBRequest *)request didLoad:(id)result
    {
        NSData * dt = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/me/?access_token=%@",facebook.accessToken]]];
        NSDictionary *response = (NSDictionary*)[[JSONDecoder decoder] objectWithData:dt];
        NSLog(@"fb response %@",response);
        if ([response objectForKey:@"email"]) {
            [[NSUserDefaults standardUserDefaults] setValue:[response objectForKey:@"email"] forKey:@"fbEmail"];
            [[NSUserDefaults standardUserDefaults] setValue:[response objectForKey:@"id"] forKey:@"fbId"];
            [[NSUserDefaults standardUserDefaults] setValue:facebook.accessToken forKey:@"fbToken"];
            [[NSUserDefaults standardUserDefaults] setValue:facebook.expirationDate forKey:@"fbExDate"];
            [[NSUserDefaults standardUserDefaults] synchronize];
        }
    } 
```

我得到了所有的用户数据，谢谢大家的帮助，希望这对某人有帮助。也感谢来自[http://midatlanticconsulting.com](http://midatlanticconsulting.com)的人，他们帮助我解决了这个问题。

# ios - 使用 Chameleon 项目在 Mac 上移植 iOS 应用程序

> ID：10208118
> 
> 赞同：0
> 
> 时间：2012-04-18T11:08:50.983
> 
> 标签：ios, macos, uikit, porting, osx-chameleon

我已经为 iOS 开发了一个应用程序，其中我使用 MPMoviePlayerController 来显示视频。那里没有问题。该应用程序运行良好。

现在我想在 Mac 上移植同一个应用程序。我是 Mac 编程的新手，所以我决定搜索可以帮助我在 Mac 上移植我的应用程序的“任何东西”，然后我得到了[Chameleon](http://chameleonproject.org/)。我尝试了示例应用程序“MultiApple”和它工作，但是当我尝试在我的应用程序中集成时，它给出了找不到 UIKit 框架之类的错误。

我在某个地方犯了一个可怕的错误。

任何人都可以在这个集成中帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T06:42:14.337

我还在将一个相对较大的应用程序（约 20k LOC，不包括所有 3rd 方依赖项）从 iOS 移植到 Mac，虽然花费的时间比预期的要多，但我仍然对 Chameleon 提供的东西相当满意。由于实现不完整和一些限制，我还分叉了官方的 Chameleon 供自己使用：

[https://github.com/jerryrt/Chameleon](https://github.com/jerryrt/Chameleon)

您的问题主要是由于项目设置不完整/错误造成的，除了提供参考的示例项目外，Chameleon 确实缺乏详细的文档。我主要是通过逐个检查示例项目的设置来到达这里的。我不会在这里完全介绍详细的过程，但会提供正确的项目设置的外观，尤其是集成了 MPMoviePlayer 的情况。

![进口变色龙](../Images/1bf633474eb59dc8f5f1d974b7fedeed.png)

![一个工作项目设置](../Images/3408a431774fe5eb7e6e6540bb229816.png)

顺便说一句，如果您最初的 iOS 项目是基于 XIB 的，我不推荐 Chameleon 用于此目的。

# php - 尝试读取文件时页面未加载

> ID：10208119
> 
> 赞同：2
> 
> 时间：2012-04-18T11:08:52.773
> 
> 标签：php, fopen

我需要读取位于 localhost 路径中的文件，其字符串由“;”分隔。我正在尝试定义一个函数，该函数应该打开文件，读取单个字符串并将其放入传递的第二个参数中。
但从验证器我得到一个解析错误：
致命错误：无法在第 13 行的代码中重新声明 readfile()

```
<?php                                     
function readfile($filename, $var)
{
    $file=fopen($filename,"r");
    while($temp!=";")
    {
        $temp=fread($file,1);
        if($temp!=";")
            $result=$result . $temp;
    }
    fclose($file);
    $var=$result;
}
$filename="log.txt";
readfile($filename,$nome);
echo $nome;
?> 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:13:46.957

readfile 是一个内置的 php 函数

`http://php.net/manual/en/function.readfile.php`

把它命名为不同的东西

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T11:12:58.407

你得到的错误是告诉你在你的代码前面的某个地方有另一个名为“readfile”的函数。

找到并删除其他版本，或将此函数名称更改为“read_file”之类的名称。

- - 编辑 - -

这是因为 PHP 已经有了一个[叫做 readfile 的函数](http://php.net/manual/en/function.readfile.php):)

更改函数名称，您就可以开始了。

# php - 一旦我的javascript计时器结束，我该如何禁用我的提交按钮？

> ID：10208121
> 
> 赞同：-1
> 
> 时间：2012-04-18T11:08:53.470
> 
> 标签：php, javascript, form-submit

我有一个从某个日期开始运行到零的 javascript 计时器，我需要它来禁用我的 html/php 页面上的提交按钮，这是我的表单代码。我尝试了多种途径，但这些方法似乎都不起作用

```
<form id="MakeBid" action="MakeBid.php" method="POST">
  <input type="hidden" name="propertyID" value ="1"/>
  <div>Bid Now <input type="text" name="pricesoldfor"/></div> 
  <input id = "submit" type="submit" value="Submit" /> 
</form> 
```

这是我拥有的 javascript 代码

```
function calcage(secs, num1, num2) {
    s = ((Math.floor(secs / num1)) % num2).toString();
    if (LeadingZero && s.length < 2) s = "0" + s;
    return "<b>" + s + "</b>";
}

function CountBack(secs) {
    if (secs < 0) {
        document.getElementById("cntdwn").innerHTML = FinishMessage;

        return;
    }
    DisplayStr = DisplayFormat.replace(/%%D%%/g, calcage(secs, 86400, 100000));
    DisplayStr = DisplayStr.replace(/%%H%%/g, calcage(secs, 3600, 24));
    DisplayStr = DisplayStr.replace(/%%M%%/g, calcage(secs, 60, 60));
    DisplayStr = DisplayStr.replace(/%%S%%/g, calcage(secs, 1, 60));
    document.getElementById("cntdwn").innerHTML = DisplayStr;
    if (CountActive) setTimeout("CountBack(" + (secs + CountStepper) + ")", SetTimeOutPeriod);
}

function putspan(backcolor, forecolor) {
    document.write("<span id='cntdwn' style='background-color:" + backcolor + "; color:" + forecolor + "'></span>");
}

if (typeof(BackColor) == "undefined") BackColor = "white";
if (typeof(ForeColor) == "undefined") ForeColor = "black";
if (typeof(TargetDate) == "undefined") TargetDate = "12/31/2020 5:00 AM";
if (typeof(DisplayFormat) == "undefined") DisplayFormat = "%%D%% Days, %%H%% Hours, %%M%% Minutes, %%S%% Seconds.";
if (typeof(CountActive) == "undefined") CountActive = true;
if (typeof(FinishMessage) == "undefined") FinishMessage = "";
if (typeof(CountStepper) != "number") CountStepper = -1;
if (typeof(LeadingZero) == "undefined") LeadingZero = true;
CountStepper = Math.ceil(CountStepper);
if (CountStepper == 0) CountActive = false;
var SetTimeOutPeriod = (Math.abs(CountStepper) - 1) * 1000 + 990;
putspan(BackColor, ForeColor);
var dthen = new Date(TargetDate);
var dnow = new Date();
if (CountStepper > 0) ddiff = new Date(dnow - dthen);
else ddiff = new Date(dthen - dnow);
gsecs = Math.floor(ddiff.valueOf() / 1000);
CountBack(gsecs);​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:15:05.973

最简单的方法是隐藏提交按钮：

```
document.getElementById('submit').style.display='none'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:16:15.823

我认为您的计时器在以下情况下已停止，因此请在此处输入代码以禁用您的按钮。将提交按钮的 id 更改为 btnsubmit

```
if (CountStepper == 0)
{
  CountActive = false;
  document.getElementById("btnsubmit").disabled = true; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:16:58.840

你试过了`document.getElementById( 'submit' ).disabled = true;`吗？

修改函数`CountBack`如下：

```
function CountBack(secs) {
if (secs < 0) {
document.getElementById("cntdwn").innerHTML = FinishMessage;
document.getElementById( 'submit' ).disabled = true;

return;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T11:12:47.393

当 js 计时器用完时调用此代码...

```
document.getElementById("xx").disabled = true; 
```

用您的提交按钮 ID 填写 xx。

# django - Django Haystack 报告 `Errno 111: Connection Refused` 连接到 Solr

> ID：10208125
> 
> 赞同：1
> 
> 时间：2012-04-18T11:09:01.623
> 
> 标签：django, solr, connection, django-haystack

由于某种原因，最近我的 Django Haystack Solr 应用程序停止工作。我正在使用 Haystack 1.2.7，这是尝试进行 Solr 查询时的错误：

> 使用 '(name_auto:test) AND (django_ct:cities.city)' 查询 Solr 失败：[Errno 111] 连接被拒绝

显而易见的答案是我`HAYSTACK_SOLR_URL`的错误，或者 Solr 没有运行。我检查了这两种可能性，并且 Solr 像往常一样在与`HAYSTACK_SOLR_URL`. 我可以在网络浏览器中打开它，甚至可以在网络界面上进行查询。

```
HAYSTACK_SITECONF = 'project.search_sites'
HAYSTACK_SEARCH_ENGINE = 'solr'
HAYSTACK_SOLR_URL = 'http://localhost:8080/solr' 
```

那么 Solr 拒绝连接还有其他原因吗？我该如何检查？我如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:47:45.153

该问题似乎是由最近的系统更新引起的，该更新更新了我用来运行 Solr 的 HTTP 服务器 Jetty。它拒绝连接，因为它的设置文件只允许某些用户。所以我编辑`/etc/default/jetty`包含这一行：

```
JETTY_HOST=0.0.0.0 
```

所以它现在接受所有传入的连接，解决了问题。您还可以指定 Django 将使用的特定连接，以限制滥用的可能性。

# android - 更新内容位图时刷新图库对象

> ID：10208130
> 
> 赞同：0
> 
> 时间：2012-04-18T11:09:35.233
> 
> 标签：android, refresh, gallery, baseadapter

我有一个从 android.widget.Gallery 派生的类和一个从 BaseAdapter 派生的类，它覆盖了 createBitmap。画廊将显示从互联网上下载的一堆图像，但由于用户可能选择不观看所有图像，因此我仅在必要时下载每张图像（即当它被画廊显示时）。因此，在第一次调用 createBitmap 时，会返回一个默认的“下载图像”图标，并且会安排正确图像的下载。当图像准备好时，我的活动会收到通知。但我不知道如何强制刷新当前可见的图库对象（尽管将其滚动出视图并返回查看下载的图像就足够了）。notifyDataSetChanged() 没有任何乐趣...

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:16:56.910

假设当您的活动收到通知时，它知道项目的位置或某种标识符。您应该能够检索视图并将位图设置为它（这将刷新特定视图。

为给定标识符识别视图的方法是使用 setTag 函数将该标识符附加到视图。然后您可以遍历 Gallery 子项并找到视图：

```
for(int i=0 ; i<mParent.getChildCount();i++){
  View view = mParent.getChildAt(i);
  if(view!=null && view.getTag().equals(yourIdentifier)){
    return view;
  }
} 
```

并且循环应该很快，因为 AdapterViews 只保留有限数量的视图并回收它们。

# c# - 这段代码在 Monotouch 中使用 Sqlite 有什么问题吗？获取 malloc() 错误

> ID：10208142
> 
> 赞同：0
> 
> 时间：2012-04-18T11:10:13.743
> 
> 标签：c#, sqlite, xamarin.ios

请参阅下面在 Monotouch 中使用 Sqlite 的代码。它代表了许多方法中的一种，并且看起来都一样。一切都清理干净了吗？在 Sqlite 文档中，我读到我应该**完成**每个准备好的语句，但我找不到匹配的调用。那么，我错过了什么吗？

据我所知，我正在打开关闭并正确处理所有内容。尽管如此，我还是随机从 Sqlite收到**malloc() 错误。**这是最近开始的，所以它也可能是 MT 本身的 Sqlite 版本中的一个问题，因为我的代码没有改变。

```
using ( SqliteConnection oConn = this.CreateDBMSConnection() )
{
  oConn.Open ();

  using ( SqliteCommand oCmd = new SqliteCommand (
    "SELECT CollaborationItems.*, CollaborationParticipants.intStatus AS intParticipantStatus   FROM CollaborationItems " +
"LEFT JOIN CollaborationParticipants ON CollaborationItems.intItemID = CollaborationParticipants.intItemID " +
"WHERE CollaborationItems.intID = @intD", oConn ) )
  {
    oCmd.Parameters.AddWithValue( "@intID", iItemID );

    using ( SqliteDataReader oReader = oCmd.ExecuteReader (  ) )
    {
      while ( oReader.Read( ) )
      {
         // [...] - some code omitted.

         // The next call again create a DMBS connection, has similar using etc.
         oItem.Participants = this.GetEventParticipants(oItem);
      }
      oReader.Close( );
    }
  }
  oConn.Close( );
} 
```

这是我收到的例外：

> Mono.Data.Sqlite.SqliteException: malloc() 在 Mono.Data.Sqlite.SQLite3.Prepare 内存不足 (Mono.Data.Sqlite.SqliteConnection cnn, System.String strSql, Mono.Data.Sqlite.SqliteStatement previous, UInt32 timeoutMS, System.String& strRemain) [0x0022a] 在 /Developer/MonoTouch/Source/mono/mcs/class/Mono.Data.Sqlite/Mono.Data.Sqlite_2.0/SQLite3.cs:343 在 Mono.Data.Sqlite。 SqliteCommand.BuildNextCommand () [0x00019] 在 /Developer/MonoTouch/Source/mono/mcs/class/Mono.Data.Sqlite/Mono.Data.Sqlite_2.0/SQLiteCommand.cs:230

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:34:03.803

**内存不足**情况的位置意味着您的内存不足 - 但这并不**意味着**它是分配所有内存的位置。

**IOW 失败的地方** 可能没有错`malloc`- 除了没有它请求的可用内存。您*可能*正在寻找错误的位置来查找（以前的）内存使用情况。

此外，由于`sqlite`是非托管代码，内存不足的情况不会触发 GC（除非 iOS 向应用程序发送警告）。因此，在此代码中，内存使用量*较高*的问题更有可能导致应用程序中的许多其他地方出现此*故障。*这会使您怀疑代码的错误部分。

要找到（或至少确保）您正在寻找正确的位置，我建议您使用 Apple 的 Instruments 并监控应用程序的总内存使用情况。这将告诉哪里（以及何时）分配了大部分内存。

这可能仍然表明，`sqlite`但即便如此，您应该能够更准确地了解问题。

# java - 注释@XmlElement 只写？

> ID：10208143
> 
> 赞同：4
> 
> 时间：2012-04-18T11:10:20.800
> 
> 标签：java, xml, jaxb, cxf, jax-rs

我是 java XML 绑定的新手。

这是我的课

```
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

/**
 * @author Martin Burchard
 * 
 */
@XmlRootElement(name = "user")
    public class User {
    private String id;
    private String nickname;
    private String email;
    private String password;

    @XmlElement(name = "id")
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    @XmlElement(name = "nickname")
    public String getNickName() {
        return nickname;
    }

    public void setNickName(String nickname) {
        this.nickname = nickname;
    }

    @XmlElement(name = "email")
    public String getEMail() {
        return email;
    }

    public void setEMail(String email) {
        this.email = email;
    }

    @XmlElement(name = "password")
    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

} 
```

在创建/注册用户期间，必须提供密码，但稍后在询问用户信息时，XML 不应包含密码元素。是否可以将元素定义为只写？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T14:29:01.047

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[JAXB 2 (JSR-222)](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

MOXy 有一个`@XmlReadOnly`扩展名。带有注释的字段/属性`@XmlReadOnly`将在解组（读取）期间填充，但不会在编组期间写入。

**用户**

```
package forum10208143;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import org.eclipse.persistence.oxm.annotations.XmlReadOnly;

/**
 * @author Martin Burchard
 * 
 */
@XmlRootElement(name = "user")
public class User {
    private String id;
    private String nickname;
    private String email;
    private String password;

    @XmlElement(name = "id")
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    @XmlElement(name = "nickname")
    public String getNickName() {
        return nickname;
    }

    public void setNickName(String nickname) {
        this.nickname = nickname;
    }

    @XmlElement(name = "email")
    public String getEMail() {
        return email;
    }

    public void setEMail(String email) {
        this.email = email;
    }

    @XmlElement(name = "password")
    @XmlReadOnly
    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

} 
```

**jaxb.properites**

要将 MOXy 指定为您的 JAXB 提供程序，您需要添加一个`jaxb.properties`在与您的域模型相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory = org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum10208143;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(User.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum10208143/input.xml");
        User user = (User) unmarshaller.unmarshal(xml);

        System.out.println(user.getPassword());

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(user, System.out);
    }

} 
```

**输入.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<user>
    <id>jdoe</id>
    <nickname>Jane</nickname>
    <email>jane.doe@example.com</email>
    <password>secret</password>
</user> 
```

**输出**

```
secret
<?xml version="1.0" encoding="UTF-8"?>
<user>
   <email>jane.doe@example.com</email>
   <id>jdoe</id>
   <nickname>Jane</nickname>
</user> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:41:13.070

据我所知，没有这样的选项，我建议您使用不包含密码字段的派生类，如“ReadOnlyUser”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T17:53:18.967

我是这样做的：

*   我将访问类型设置为无，以便能够注释字段和属性。
*   *然后用返回** *的方法注释密码属性。
*   然后是另一个返回未加密密码的 getter。

不知道这是否全部被接受，但到目前为止它有效....

```
@XmlRootElement(name = "User")
@XmlAccessorType(XmlAccessType.NONE)
public class User { 
```

...

```
private String password = null;
@XmlElement(required=false, name="password")
public String getPassword() { 
    return (password == null || password.isEmpty()) ? null : "**********"; 
}

@XmlTransient
public String getUnencryptedPassword() { 
    return this.password; 
} 
```

# c++ - 是否有可能声明一个不占用内存的成员变量？

> ID：10208146
> 
> 赞同：1
> 
> 时间：2012-04-18T11:10:39.730
> 
> 标签：c++, class, templates, member

给定一个这样的模板类：

```
template <typename T>
class C
{
T member;
//... some other members that are not of interest here
}; 
```

是否有任何类型可以作为 T 来防止`member`占用不必要的内存？起初`void`我突然想到了，但我知道你不能声明`void`.

*注意*
当然这个例子是简化的。背景是一个持有一些信息但可以获取用户添加的附加信息的类。当用户不想添加其他信息时，应该可以将它们排除在外。所以基本上，如果用户想要存储额外的数据，他将构建`C<MyAdditionalData>`，但如果他不这样做，它应该就像`C<NoData>`并且不会有数据。当然，我可以编写某种模板专业化，但我不喜欢将所有内容都写两次。

**编辑**
好吧，我发现一个空类是我能得到的最接近的（由于对齐仍然消耗 1 个字节甚至 4/8），所以我现在的问题是：是否已经有一些标准的空类我应该用于这使我的代码更具可读性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T11:39:37.453

将您的模板类专门化为一种类型`NoData`，并且不要在此专门化中定义成员。

```
template <class T>
class C {
   T member;
...
};

template<>
class C<NoData> {
   // Do not declare that member
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T11:20:46.613

> 好的，我发现空类是迄今为止我能得到的最接近的，所以我现在的问题是：是否已经有一些**标准的空类**我应该使用它来使我的代码更具可读性？

不，您可以自己定义一个：

```
struct standard_empty_class {}; 
```

用它。

> 所以基本上，如果用户想要存储额外的数据，他将构建`C<MyAdditionalData>`，但如果他不这样做，它应该就像`C<NoData>`并且不会有数据。

我不明白这一点。如果用户不想存储任何数据，那么为什么即使那样你还需要一个类，并且仍然需要编写`C<NoData>`呢？忘记那个案子吧。没有数据意味着没有课程。它不能解决这个问题吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T11:21:15.797

我不认为这是可能的。实际上，情况恰恰相反。即使是空类在实例化时也会占用内存（一个字节），因此程序在实例之间可能会有所不同。那是

```
class A {
};

A a, b;  // vars of type A 
```

然后`a`并且`b`必须占用一些内存，以便您的程序可以引用它们，例如`if (a == b)`. 如果他们不使用内存，您将无法做到这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T12:27:43.973

没有数据成员，因为对象的大小永远不会为零，并且数据成员没有退出子句。

但是，如果基类子对象为空，则其大小可以为零。因此：

```
template <typename T>
struct Member {
    T member;
};

template <>
struct Member<void> {
};

template <typename T>
class C : private Member<T>
{
//... some other members that are not of interest here
}; 
```

应该工作，我想。但是你可能会因为`C<void>::member`不存在而绊倒，所以任何使用它的成员函数都不会编译 for `C<void>`，包括构造函数。

> 如果用户想要存储额外的数据，他将构建 `C<MyAdditionalData>`

为什么没有`C`一个没有额外数据成员的非模板类，如果用户想添加数据成员，`C`作为基类使用？记住要给出`C`一个受保护的析构函数——每个基类都应该有一个受保护的析构函数或一个虚拟析构函数，但是由于您的`C`模板类没有虚拟析构函数，因此非模板版本也不需要是虚拟的。

按照这些思路，您可以执行以下操作：

```
class CNoData
{
//... some other members that are not of interest here
};

template <typename T>
class CWithData<T> : CNoData
{
T member
// have to duplicate constructors, unfortunately.
}; 
```

如果你真的需要它，添加一个类型特征：

```
template <typename T>
struct C {
     typedef CWithData<T> type;
};

template <>
struct C<void> {
    typedef CNoData type;
}; 
```

然后你会写在哪里`C<MyAdditionalData>`，现在你写`CWithData<MyAdditionalData>`，你会写`C<some_type_that_might_be_void>`你写`typename C<some_type_that_might_be_void>::type`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T12:04:10.240

正如您所说，模板已经包含一些其他数据。它有虚拟方法，那是另外一个成员。

添加一个额外的成员是一个非常小的开销，可以简单地忽略，所以我只使用 C。（如果有其他成员小于对齐，甚至是 char）

使用 typedef 以获得更好的清晰度：

```
typedef C<int> CEmptyGraphNode; 
```

# python - OpenERP：插入数据代码

> ID：10208147
> 
> 赞同：2
> 
> 时间：2012-04-18T11:10:43.087
> 
> 标签：python, postgresql, openerp

我是 OpenERP 新手，我已经安装了 OpenERP v6。我想知道如何在数据库中插入数据？我必须修改哪些文件才能完成这项工作？（用于 SQL 代码的文件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T22:31:29.203

[OpenERP 开发人员手册](http://doc.openerp.com/v6.0/developer/)是一个很好的起点。还有一个名为的模块`base_module_record`可让您进行配置更改，然后将这些更改导出为可以导入另一个数据库的模块。

如果你问一个更具体的问题，你可能会得到更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:51:15.837

OpenERP 使用 PostgreSQl 作为后端结构。Postgresql 由 pgadmin3 (Postgres GUI) 管理，您可以在那里编写 sql 查询并可以从那里添加/删除记录。不建议将数据直接插入/删除数据库！！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:36:04.640

在您要更改的相应模块的 .py 文件中添加列将向 pgadmin3 插入列，类的定义也将创建表...当字段显示在 xml 文件中并且通过将值输入到字段中时接口将值存储到表中的值到数据库...

# java - 使用 Primefaces 在文件系统上上传文件

> ID：10208148
> 
> 赞同：1
> 
> 时间：2012-04-18T11:10:50.873
> 
> 标签：java, file-upload, jsf-2, primefaces

我读了很多页，但我敢肯定，我在某处犯了一些错误，我不能像它应该的那样简单地上传文件。

首先，我在带有 Netbeans 7 和 JDK 1.7 的 Glassfish 3.1 上使用 JSF2.0、Primefaces 3.2 和 JPA2 进行开发。

接下来我必须说的是，我想将此代码插入到一个接口中，该接口将从许多其他类扩展而来，并且应该将文件存储在文件系统上的许多文件夹中！所以现在我将报告我写的内容，请告诉我问题出在哪里！

这是 web.xml 中的代码：

```
<filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    <init-param>
        <param-name>uploadDirectory</param-name>
        <param-value>D:/Cyborg/</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

包含 p:uploadFile 的页面还包含许多其他表单的字段，我将仅复制我认为您感兴趣的内容：

```
...
<h:form method="POST">
    ...
    <h:outputLabel for="uploadFile" value="#{bundle.LabelUploadFile}" />
    <p:fileUpload value="#{progettiController.uploadFile}" mode="simple" />
    ...
    <h:commandLink action="#{progettiController.create}" value="#{bundle.SaveLink}" />
    ... 
```

这是AbstractController接口中的代码：

```
protected UploadedFile uploadFile;

public void setUploadFile(UploadedFile uploadFile) {
    this.uploadFile=uploadFile;
}

public UploadedFile getUploadFile() {
    return uploadFile;
} 
```

最后将方法 Create 放入 ProgettiController：

```
public String create() {
    try {
        getFacade().create(current);
        System.out.println("Message: ProgettiController: Create: new row created successfully!");

        try {
            current=getFacade().findLast();
            String ext=uploadFile.getFileName();
            System.out.println("Message: ProgettiController: Create: FileName="+ext);

            ext=ext.substring(ext.lastIndexOf("."),ext.length());
            System.out.println("Messaggio: ProgettiController: ext="+ext);

            current.setNomeFile(ext.substring(0,ext.lastIndexOf(".")));
            current.setTipoFile(ext.substring(ext.lastIndexOf(".")+1,ext.length()));
            getFacade().edit(current);
            ext=urlFilesystem+current.getId()+ext.substring(ext.lastIndexOf(".")+1,ext.length());
            System.out.println("Message: ProgettiController: Create: posizione e nome del file="+ext);

            File oldFile= (File)uploadFile;
            File newFile= new File(ext);
            oldFile.renameTo(newFile);
        } catch (Exception e) {
            System.out.println("Messaggio: ProgettiController: Create: errore nel try legato al upload="+e.getMessage());
            e.printStackTrace();
        }

        JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ProgettiCreated"));
        recreateModel();
        System.out.println("Messaggio: ProgettiController: create try");
        return url+"List?faces-redirect=true";
    } catch (Exception e) {
        JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
        System.out.println("Messaggio: ProgettiController: create catch="+e.getMessage());
        e.printStackTrace();
        return url+"List?faces-redirect=true";
    }
} 
```

如果我尝试此代码，问题是当页面调用该方法将 null 返回到 uploadFile 中，如果我将“enctype="multipart/form-data"”添加到 h:form 标记中，则应用程序没有调用该方法！有人能帮我吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:11:00.430

> *如果我将 "enctype="multipart/form-data"" 添加到 h:form 标记中，则应用程序不会调用该方法！*

这意味着 PrimeFaces 文件上传过滤器无法正常工作。它负责解析`multipart/form-data`请求并将解析后的数据以可理解的形式进一步提供给 JSF（在即将到来的 JSF 2.2 版本之前，JSF 默认不支持`multipart/form-data`请求）。

这至少有以下主要原因：

*   `<servlet-name>`中的不`<filter-mapping>`正确。您需要确保它与相同`<servlet-name>`的`<servlet>`配置`FacesServlet`完全相同`web.xml`。

*   Commons IO 和 FileUpload JAR 不在 webapp 的运行时类路径中。我不使用 Netbeans，因此无法详细说明，但无论您使用哪种方式将 JAR 包含在 webapp 中，您都需要绝对确保它们最终位于`/WEB-INF/lib`已部署的 webapp 的文件夹中。您可以通过检查服务器中的部署来验证这一点。在 Eclipse 中，这可以通过直接将这些 JAR 直接放入 Web 项目的那个文件夹中来实现。

*   您的 Web 应用程序中碰巧有另一个`Filter`，它与 PrimeFaces 文件上传过滤器的工作大致相同，并且在 PrimeFaces 文件上传过滤器*之前*执行。例如，`ExtensionsFilter`捆绑在 Tomahawk 中的 MyFaces。请求正文只能被解析一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T23:45:36.050

您的代码中有错误导致空指针

```
 {..
        ext=ext.substring(ext.lastIndexOf("."),ext.length()); 
        // here ext contains the extension of the file only

        System.out.println("Messaggio: ProgettiController: ext="+ext);

        current.setNomeFile(ext.substring(0,ext.lastIndexOf(".")));
        // used the extension as the file name
        current.setTipoFile(ext.substring(ext.lastIndexOf(".")+1,ext.length()));
        // the file type is an empty string causing the error
        ..} 
```

尝试以下

```
 {..
        ext=ext.substring(ext.lastIndexOf("."),ext.length()); 

        System.out.println("Messaggio: ProgettiController: ext="+ext);

       current.setNomeFile(uploadFile.getFileName().
                           substring(0,uploadFile.getFileName().lastIndexOf(".")));
        // the file name is setted properly
        current.setTipoFile(uploadFile.getFileName().
                           substring(uploadFile.getFileName().
                           lastIndexOf(".")+1,uploadFile.getFileName().length()));
        // the file type is setted properly
        ..} 
```

# java - Java - 与原始数据类型的动态比较

> ID：10208151
> 
> 赞同：6
> 
> 时间：2012-04-18T11:11:01.467
> 
> 标签：java, dynamic, operators, conditional-statements, primitive

朋友们，

我们正在编写一个验证框架......

我们确实有一个如下配置文件...

```
<root>
<property name="Premium">
    <xmlTag>//Message/Request/Product/Benefit/Premium/amount</xmlTag>
    <valueType>float</valueType>
    <validation condition=">" value="0">Premium Amount cannot be less than Zero.</validation>
</property> 
```

我使用 XPath 获取 XML 值并将其转换为按`<valueType>`元素值浮动...

不，我确实`value="0"`也被转换为浮动。

现在，我必须应用已指定为`condition=">"`.

我不想在 IF ELSEIF....ELSE 循环上执行此操作。

有没有其他方法可以将“<”转换为运算符`<`或在字符串上使用比较运算符？

这样一来，我的代码就简单了，对以后更多的运营商有用。

==================================================== ============================

谢谢大家的建议和回答...

我决定使用[BeanShell](http://www.beanshell.org/download.html)的 bsh.Interpreter。它为我工作......

示例代码为大家...

```
 System.out.println(new bsh.Interpreter().eval("1 < 0"));
        System.out.println(new bsh.Interpreter().eval("1 > 0"));
        System.out.println(new bsh.Interpreter().eval("1 >= 0"));
        System.out.println(new bsh.Interpreter().eval("0 >= 0"));
        System.out.println(new bsh.Interpreter().eval("1 != 0"));
        System.out.println(new bsh.Interpreter().eval("0 != 0"));
        System.out.println(new bsh.Interpreter().eval("1 == 0"));
        System.out.println(new bsh.Interpreter().eval("0 == 0")); 
```

返回我真/假。

谢谢&祝你好运...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:15:06.720

您可以使用 switch 语句

```
char operator = ...;
switch(operator) {
   case '<': return value1 < value2;
   case '=': return value1 == value2;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T11:25:01.577

我建议使用诸如**Java EL**甚至更好的**Apache Commons Jexl**之类的表达式语言，因为它更容易集成。这是取自[**JEXL**网站](http://commons.apache.org/jexl/)的代码示例：

```
 // Assuming we have a JexlEngine instance initialized in our class named 'jexl':
    // Create an expression object for our calculation
    String calculateTax = "((G1 + G2 + G3) * 0.1) + G4";
    Expression e = jexl.createExpression( calculateTax );

    // populate the context
    JexlContext context = new MapContext();
    context.set("G1", businessObject.getTotalSales());
    context.set("G2", taxManager.getTaxCredit(businessObject.getYear()));
    context.set("G3", businessObject.getIntercompanyPayments());
    context.set("G4", -taxManager.getAllowances());
    // ...

    // work it out
    Float result = (Float)e.evaluate(context); 
```

在您的特定示例中，您可以将验证 XML 更改为：

```
<property name="Premium">
    <xmlTag>//Message/Request/Product/Benefit/Premium/amount</xmlTag>
    <valueType>float</valueType>
    <validation expression="Premium> 0">Premium Amount cannot be less than Zero.</validation>
</property> 
```

然后建立自己的 JEXL 上下文：

```
JexlContext context = new MapContext();
context.set("PREMIUM", <Premium value fetched from XML>); 
```

在我看来，这是最具可扩展性的解决方案，因为它允许您在一行代码中构建复杂的验证表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:15:15.293

将原始值包装到相应的包装器中：

```
Float f = new Float(floatValue) 
```

然后您可以`compareTo()`多态地使用提供的方法。

编辑：您还可以查看表达式解析的全功能实现；除了这里已经提到的其他内容，我会添加[Spring EL](http://static.springsource.org/spring/docs/3.1.1.RELEASE/spring-framework-reference/html/expressions.html#expressions-evaluation)。

# c# - C#中的强类型资源文件

> ID：10208152
> 
> 赞同：5
> 
> 时间：2012-04-18T11:11:09.977
> 
> 标签：c#, embedded-resource, strong-typing

我有一个访问类库项目中的文件的 Windows 应用程序。

```
public static class Global
{
    private static ResourceManager ResourceManager { get; set; }

    static Global ()
    {
        ResourceManager = new ResourceManager("MyClassLibraryProject.Resource", Assembly.GetExecutingAssembly());
    }

    private static string GetValue (string name)
    {
        return (ResourceManager.GetString(name, Options.CultureInfo));
    }

    public static string ProductName
    {
        get
        {
            return (GetValue(MethodBase.GetCurrentMethod().Name.Replace("get_", "")));
        }
    }
}
` 
```

在此示例中，我`ProductName`手动创建了该属性。有没有更简单的方法来访问资源文件中每一行的强类型名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T11:22:14.987

这可能会满足您的需求：[https ://docs.microsoft.com/en-us/dotnet/framework/tools/resgen-exe-resource-file-generator](https://docs.microsoft.com/en-us/dotnet/framework/tools/resgen-exe-resource-file-generator)

由于资源属性类型是在运行时确定的，因此您需要一个工具来分析资源文件的预编译时间并生成所需的属性。Resgen.exe 将执行此操作，但您也可以创建自定义 t4 脚本或其他内容。

从文档：

> *以下命令读取基于 XML 的输入文件 myResources.resx 并写入名为 myResources.resources 的二进制资源文件。它还生成一个名为 MyFile.cs 的 C# 文件，其中包含一个名为 MyClass 的类，其中包含与输入文件中引用的资源匹配的强类型属性。MyClass 类包含在名为 Namespace1 的命名空间中。*
> 
> resgen myResources.resx myResources.resources /str:C#,Namespace1,MyClass,MyFile.cs

# jquery - jqPlot - 标签数据，点值数据

> ID：10208153
> 
> 赞同：0
> 
> 时间：2012-04-18T11:11:11.223
> 
> 标签：jquery, charts, jqplot, diagramming

我正在使用 jqPlot 来显示一些漂亮的图表。我想使用 data['values'] 创建图表。data['pointvalues'] 用于突出显示工具提示， data['labels'] 用于标签。 ![jqPlot 的数据](../Images/6624498176af8f1b848b72558c784000.png)

我的情节调用非常基本：

```
 var plot1 = $.jqplot ('chart', data['values'],{
            cursor:{
                show:true,
                zoom:true,
                showTooltip:false
            },
            series:{

            },
            legend: {
                show: true,
                placement: 'outsideGrid'
            },
            highlighter: {
                show: true
            }
        }); 
```

**编辑 - 解决方案** 标签：

```
legend: {
                show: true,
                placement: 'outsideGrid',
                labels: data['labels']
            }, 
```

折线图中的点值：

```
$('#chart').bind('jqplotDataMouseOver',
        function (ev, seriesIndex, pointIndex) {
            $('.jqplot-highlighter-tooltip').text('Kalenderwoche: '+(pointIndex+1)+' ,'+data['labels'][seriesIndex]+': '+data['pointvalues'][seriesIndex][pointIndex]);
            $('.jqplot-highlighter-tooltip').css('opacity',1);

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:06:34.097

现在您需要了解一件事是在将数据提供给绘图之后，函数本身会将值分配给荧光笔和标签，对于所有这些，您只能提供一个数据集。如果要格式化带有 $ 符号的标签，请使用刻度选项。

# jquery - 如何使用 Ajax 获取请求传递 jQuery 变量？

> ID：10208157
> 
> 赞同：0
> 
> 时间：2012-04-18T11:11:37.900
> 
> 标签：jquery, ajax, get, slider

我有一个由 jQuery 滑块生成的值。我需要将其变量传递给[http://domain.com/index.php?rich=3&sweet=6](http://domain.com/index.php?rich=3&sweet=6)形式的 url 。我需要使用 Ajax 的 get 请求将 javascript 变量（丰富和甜蜜）发送到 url。

我的 index.php 文件中有以下 javascript（变量由选择/滑块 HTML 代码设置的值分配）， selectToUISlider() 将滑块耦合到下拉菜单：

```
<script type="text/javascript">
$(document).ready(function () {

$('#rich').selectToUISlider({
labels:7, sliderOptions: {
stop: function(e,ui) {
  var richValue = $('#rich').val();    
  }}}).next();

$('#sweet').selectToUISlider({
labels:7, sliderOptions: {
stop: function(e,ui) {
  var sweetValue = $('#sweet').val();
  }}}).next();          

}
</script>
........ 
```

下面的 HTML 代码（我省略了 'sweet' 选择代码）

```
 <form action="index.php" name="form1" method="GET">
<!-- demo 1 -->
<fieldset>

        <select name="rich" id="rich" onchange="this.form.submit()">
        <optgroup label="Not too Rich">
        <?php $rich1 .= '<option'.(isset($_GET['rich']) && $_GET['rich']=='1' ? ' selected ' : ' ').'value="1">'.'Not too Rich'.'</option>'."\n"; ?>
        <?php echo $rich1 ?>

          .........................

        <?php $rich7 .= '<option'.(isset($_GET['rich']) && $_GET['rich']=='7' ? ' selected ' : ' ').'value="7">'.'Super Rich'.'</option>'."\n"; ?>
        <?php echo $rich7 ?>

        </optgroup>
        </select>
    </fieldset> 
```

我的理解是我必须这样做：

```
$.get('index.php?rich='+ $('#rich').val() , function(data) {
                            $('#rich').html(data);
                        }); 
```

以某种方式进入代码，但我不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:14:51.620

是的，但更合适的方式是：

```
$.get('index.php', {rich : $('#rich :selected').val()}, function(data) {
    //so something with data
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:43:53.450

Denis Ermolin 是对的，但为什么要“GET”请求？你会在 IE 中遇到兑现问题 - IE 有时喜欢缓存 url。使用“POST” - IE 不会兑现它。

```
$.post('index.php', {rich : $('#rich :selected').val()}, function(data) {
    //so something with data
}); 
```

# php - 如何在 PHP Pear Mail Queue 上设置退回电子邮件地址？

> ID：10208162
> 
> 赞同：0
> 
> 时间：2012-04-18T11:12:19.710
> 
> 标签：php, pear

我正在使用 PHP Pear Mail Queue 发送排队的电子邮件，但我无法让退回（未送达）的电子邮件正常工作。我正在使用 Mail_mime 创建标题，看起来像这样：

```
 $hdrs = array(
            "From"        => EMAIL_FROM_ADDRESS, 
            "Reply-To"    => EMAIL_FROM_ADDRESS, 
            "Return-Path" => EMAIL_FROM_ADDRESS,
            "To"          => $recipient, 
            "Subject"     => $this->NewsletterTitle
        ); 
```

请注意，即使定义了 Return-Path，我也不会退回到该电子邮件地址。这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:12:22.560

发现了一个问题 - 毕竟是 Pear 问题，我所做的只是更新它，问题解决了。

# ios - Apple 在多个设备上推送通知

> ID：10208170
> 
> 赞同：0
> 
> 时间：2012-04-18T11:12:49.950
> 
> 标签：ios

如何使用 tokenId 列表在多个设备上发送推送通知。

我能够获取安装应用程序的设备的令牌 ID。但问题是如何将此令牌 ID 发送到服务器端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:16:41.433

您必须创建一个接受来自设备的令牌 ID 的服务器端 API 调用（Web 服务方法或类似方法）。然后服务器与 APN 服务器连接以进行身份​​验证并将通知作为 JSON 有效负载发送。

# sql - 我不完全理解 sqlite3_finalize

> ID：10208171
> 
> 赞同：2
> 
> 时间：2012-04-18T11:12:51.730
> 
> 标签：sql, ios, sqlite

我不完全理解 sqlite3_finalize。我的初始代码。

```
while (j < Autors.count)
{
 if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) 
 {
    sqlite3_bind_int(compiledStatement,  1, ((AuthorSettings *)[Autors objectAtIndex:j]).authorId);
    if(sqlite3_step(compiledStatement) != SQLITE_DONE) 
    {    
        NSLog(@"sqlite3_step error %s", sqlite3_errmsg(database));
        sqlite3_busy_timeout(database, 5);
    } 
    else
    {    
        if(sqlite3_prepare_v2(database, sqlStatement_1, -1, &compiledStatement, NULL) == SQLITE_OK) 
        {
            sqlite3_bind_int(compiledStatement,  1, bookId);
            if(sqlite3_step(compiledStatement) != SQLITE_DONE) 
            {    
                NSLog(@"sqlite3_step error %s", sqlite3_errmsg(database));
                sqlite3_busy_timeout(database, 5);
            }    
            else  j++;    
        } 
        else NSLog(@"sqlite3_prepare_v2 error %s", sqlite3_errmsg(database));
    }    
 }
}
sqlite3_finalize(compiledStatement); 
```

我添加了 sqlite3_finalize 函数。请检查我。

```
while (j < Autors.count)
 {
 sqlite3_finalize(compiledStatement); //**added
 if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) 
 {
    sqlite3_bind_int(compiledStatement,  1, ((AuthorSettings *)[Autors objectAtIndex:j]).authorId);
    if(sqlite3_step(compiledStatement) != SQLITE_DONE) 
    {    
        NSLog(@"sqlite3_step error %s", sqlite3_errmsg(database));
        sqlite3_busy_timeout(database, 5);
    } 
    else
    {   
        sqlite3_finalize(compiledStatement); //**added
        if(sqlite3_prepare_v2(database, sqlStatement_1, -1, &compiledStatement, NULL) == SQLITE_OK) 
        {
            sqlite3_bind_int(compiledStatement,  1, bookId);
            if(sqlite3_step(compiledStatement) != SQLITE_DONE) 
            {    
                NSLog(@"sqlite3_step error %s", sqlite3_errmsg(database));
                sqlite3_busy_timeout(database, 5);
            }    
            else  j++;    
        } 
        else NSLog(@"sqlite3_prepare_v2 error %s", sqlite3_errmsg(database));
    }    
 }
}
sqlite3_finalize(compiledStatement); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T11:21:03.170

`sqlite3_finalize`是相反的`sqlite3_prepare_v2`。所以你的代码应该是这样的：

```
sqlite3_prepare_v2(...);
while () {
  sqlite3_reset(...);
  sqlite3_bind_int(...);
  sqlite3_step(...);
}
sqlite3_finalize(...); 
```

您不想准备不必要的陈述。

# nhibernate - Fluent NHibernate 多态性和 TransformUsing

> ID：10208173
> 
> 赞同：1
> 
> 时间：2012-04-18T11:12:55.013
> 
> 标签：nhibernate, fluent-nhibernate, polymorphism, transformation, wcf-rest

我有一个名为“Entity”的基类和名为“Project”、“Company”、“Contact”的子类，它们继承了基类“Entity”并在我的 WCF REST 应用程序上使用 Fluent NHibernate 进行了映射。

以前，我的实体类不需要这种多态关联，但最近我需要将这些类与多对多关系相关联，所以我决定这样做。这是我的基类的映射：

```
 public crmEntityMap()
    {
        Table("crmEntity");
        LazyLoad();
        Id(x => x.ID).GeneratedBy.Identity().Column("ID");
        Map(x => x.instanceID).Not.Nullable().Column("InstanceID");
        Map(x => x.comment).Column("Comment").Length(500);
        HasManyToMany(x => x.RelatedEntities)
            .AsList(i => i.Column("`Index`"))
            .ParentKeyColumn("ParentID")
            .ChildKeyColumn("ChildID")
            .BatchSize(100)
            .Not
            .LazyLoad()
            .Fetch.Join()
            .Cascade.None();
        DiscriminateSubClassesOnColumn("Type");
    } 
```

项目映射：

```
 public class crmProjectMap : SubclassMap<crmProject>
{

    public crmProjectMap() {
        Table("crmProjects");
        LazyLoad();
        Map(x => x.name).Column("Name").Length(50);
        Map(x => x.initialDate).Column("InitialDate");
        Map(x => x.deadline).Column("Deadline");
        Map(x => x.isClosed).Column("IsClosed");
        References(x => x.assignedToUser).Column("AssignedToUserID").NotFound.Ignore();
    }
} 
```

我的 WCF REST 服务上的序列化转换代码：

```
 public static DTO.Project GetProject(int projectId, int instanceId)
        {
            crmUser user = null;
            return Provider.GetSession().QueryOver<crmProject>()
                .Fetch(x => x.assignedToUser).Eager()
                .JoinAlias(x => x.assignedToUser, () => user, JoinType.LeftOuterJoin)
                .Where(c => c.ID == projectId)
                .And(c => c.instanceID == instanceId)
  .Select(Projections.ProjectionList()
        .Add(Projections.Property("ID"), "ID")
        .Add(Projections.Property("instanceID"), "instanceID")
        .Add(Projections.Property("name"), "name")
        .Add(Projections.Property("comment"), "comment")
        .Add(Projections.Property("isClosed"), "isClosed")
        .Add(Projections.Property("initialDate"), "initialDate")
        .Add(Projections.Property("deadline"), "deadline")
        .Add(Projections.Property(() => user.userID), "assignedToUserID")
        //Add Related Entities?
  ).TransformUsing(Transformers.AliasToBean<DTO.Project>())
  .SingleOrDefault<DTO.Project>();
        } 
```

但正如您所看到的，我需要在此处添加相关实体，但我不知道该怎么做，因为相关实体可以是继承实体类的“公司”、“联系人”或“项目”。我需要在 DTO.Project 类上定义它并将数据转换为它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:20:16.787

这是我解决这个问题的方法。如果有人可以改进它，我将不胜感激。

```
 DTO.Project proj = new DTO.Project();
        crmUser user = null;
        crmEntity ent =null;
        using (ISession session = Provider.SessionFactory.OpenSession())
        {
            proj = session.QueryOver<crmProject>()
                .Fetch(x => x.assignedToUser).Eager()
                .JoinAlias(x => x.assignedToUser, () => user, JoinType.InnerJoin)
                .Where(c => c.ID == projectId)
                .And(c => c.instanceID == instanceId)
  .Select(Projections.ProjectionList()
        .Add(Projections.Property("ID"), "ID")
        .Add(Projections.Property("instanceID"), "instanceID")
        .Add(Projections.Property("name"), "name")
        .Add(Projections.Property("comment"), "comment")
        .Add(Projections.Property("isClosed"), "isClosed")
        .Add(Projections.Property("initialDate"), "initialDate")
        .Add(Projections.Property("deadline"), "deadline")
        .Add(Projections.Property(() => user.userID), "assignedToUserID")
  ).TransformUsing(Transformers.AliasToBean<DTO.Project>())
  .SingleOrDefault<DTO.Project>();

            proj.RelatedEntities = session.QueryOver<crmProject>()
                .Fetch(x => x.RelatedEntities).Eager()
                .Where(c => c.ID == projectId).JoinAlias(x=>x.RelatedEntities,()=>ent,JoinType.InnerJoin)
  .Select(Projections.ProjectionList()
        .Add(Projections.Property(()=>ent.ID), "ID")
        .Add(Projections.Property(() => ent.type), "Type")
  ).TransformUsing(Transformers.AliasToBean<DTO.EntityRelation>()).List<DTO.EntityRelation>();
        }
        return proj; 
```

# ios - 带有网格轮廓的 AQGridView

> ID：10208175
> 
> 赞同：2
> 
> 时间：2012-04-18T11:12:59.047
> 
> 标签：ios, aqgridview

我正在使用 AQGridView 在我的应用程序中显示项目网格。

有时我没有足够的项目来填充一行，我想为单元格添加一个网格轮廓，所以如果你愿意，你可以看到一个 1px 的空单元格，我可以通过隐藏单元格的内容来做到这一点并保留大纲，但随后我将不得不检查单元格的索引以防止选定状态等...

是否可以设置任何其他首选项以获得网格轮廓，或者我应该自己添加这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:29:59.863

我认为这是不可能的，也许只是使用假细胞？

# html - 如何从网页打开默认文本编辑器

> ID：10208176
> 
> 赞同：1
> 
> 时间：2012-04-18T11:13:09.403
> 
> 标签：html

我有一个包含文本文件列表的网页（使用 ASP.NET 构建）。我希望用户能够单击文件并使用默认文本编辑器打开它。

预计用户已经拥有相关文件，我真的只需要打开它。

*编辑：*目前只需要支持 Windows & Firefox & Chrome。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T20:43:16.303

我认为你能做的最好的事情是使用 Response.ContentType 强制文件作为下载，如下所示：

```
Response.ContentType = "text/plain";
Response.AppendHeader("content-disposition", "attachment; filename=" + fileName); 
```

如果您将文件的内容直接通过管道传输到响应流（从而强制下载），它将提示用户保存或在文本编辑器中打开文件。我认为这是您在不发明自己的协议的情况下将获得的最接近的结果。

# c++ - 带升压的类型列表

> ID：10208180
> 
> 赞同：3
> 
> 时间：2012-04-18T11:13:29.420
> 
> 标签：c++, boost

在我继续之前 - 在 boost 或使用它的小型实现中是否已经有类型列表实现？到目前为止，我还没有发现任何有用的东西。

我正在尝试使用 boost pp 生成各种大小的列表类：

```
#define BOOST_PP_LOCAL_MACRO(n) \
    template< BOOST_PP_ENUM_TRAILING_PARAMS(n, class t) >   /*error C2913: explicit specialization; 'typelist1' is not a specialization of a class template*/ \
struct typelist##n \
{ \
    typedef t##n e##n; /*I want n of these*/ \
};

#define Type_At(list, element) list::e##element

#define BOOST_PP_LOCAL_LIMITS (1, 5)

#include BOOST_PP_LOCAL_ITERATE() 
```

请参阅问题代码中的注释。这是制作类型列表的好方法吗？好像……脏。我只是听说过 typelist 的概念，所以我不熟悉不同的风格。

# 解决方案：

```
#define BOOST_MPL_LIMIT_VECTOR_SIZE  50
#include <boost/mpl/vector.hpp>
#include <boost/mpl/at.hpp>

typedef boost::mpl::vector<int, float, double, long, short> vecType;
boost::mpl::at_c<vecType, 3>::type hi = 3; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:21:38.673

也许你可以试试[`boost::mpl::vector`](http://www.boost.org/doc/libs/1_37_0/libs/mpl/doc/refmanual/vector.html)。[（我不太明白你想做什么）。]

如果您可以使用 c++11，则使用可变参数模板制作类型列表要容易得多（这意味着没有讨厌的预处理器的东西）。

# java - 调用 java 类时被替换的字符

> ID：10208182
> 
> 赞同：1
> 
> 时间：2012-04-18T11:13:54.110
> 
> 标签：java, javascript, jquery

我有一个包含此代码的 jsp 文件，

```
<form id="testForm">
    <input type="hidden" value="study--study is negative--echocardiogram--" name="hidAllProc"/>
</form> 
```

现在，我使用 jQuery 的 .serialize() 函数序列化这个表单，并将其发送到另一个 jsp 的 post 请求中，然后在这个 jsp 中，我只需将“request”对象发送到 java 类并使用 request.getParameters("hidAllProc" ) 检索隐藏字段值。

现在，问题是我试图打印我在 java 类中得到的值，就像这样，“研究..研究是否定的..超声心动图..”。所有的“--”都被“..”代替了。我仅在特定 PC 中遇到此行为。此代码在我和我朋友的 PC 中完美运行。我需要帮助，因为我几乎尝试了所有可能的事情，并且已经用尽了所有想法！

谢谢， 里沙布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:59:23.213

尝试在任何地方使用 UTF-8 编码。如果应用程序在 tomcat 上运行，以下是操作方法：

[http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q8](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:30:02.917

jQuery`serialize`使用 utf8 进行序列化。你可能想试试把

```
<%@codepage=65001%> 
```

在接收页面的顶部，它是 utf8 的代码页。如果它不起作用，在您的 java 类上，您可以使用解码您的输入

```
URLDecoder.decode(x) 
```

# node.js - nodemon - 对 json 文件的更改重新启动

> ID：10208183
> 
> 赞同：12
> 
> 时间：2012-04-18T11:13:55.817
> 
> 标签：node.js

我正在使用“nodemon”在文件更改时重新启动节点。但是，当 json 文件发生更改时，它似乎不会触发。任何人都知道是否有办法设置它？

此外，是否有一种编程方式可以从正在运行的应用程序本身重新启动？我想用“永远”运行它并抛出错误会做到这一点。非常感谢任何指针

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-02-25T18:18:20.517

**Marciej 的**方法对我有用：

```
nodemon -e js,html 
```

您也可以在`nodemon.json`配置文件中进行配置。以下是我们目前使用它的方式：

```
{
    "execMap": {
        "js": "node --harmony"
    },
    "script": "server.js",
    "ext": "js html"
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-02T10:02:37.223

只需使用“-e”命令行开关

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-05-22T09:22:55.127

您也可以在 package.json 文件中指定 nodeman 配置

```
"nodemonConfig": {
    "ext": "js, ts, graphql, json"
  } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-18T14:15:34.767

不幸的是，它监控的扩展似乎在脚本中被硬编码：

[https://github.com/remy/nodemon/blob/master/nodemon.js#L334](https://github.com/remy/nodemon/blob/master/nodemon.js#L334)

`program.ext = '.coffee|.js';`

您可以破解它以使其也适用于 json：

`git clone https://github.com/remy/nodemon.git`
`cd nodemon`

将该行修改`nodemon.js`为`program.ext = '.coffee|.js|.json';`

`npm install -g .`（它应该使用克隆的 git 文件夹而不是 npm 注册表）

或者你可以使用我的[脚本](https://github.com/mihaifm/simplemon)，虽然它不如 nodemon 稳定。

# asp.net-mvc - 使用 HttpSelfHostServer 和 IDependencyResolver 时“违反继承安全规则”

> ID：10208188
> 
> 赞同：8
> 
> 时间：2012-04-18T11:14:33.210
> 
> 标签：asp.net-mvc, asp.net-web-api

我正在尝试使用 HttpSelfHostServer 自托管 ASP.NET MVC 4 WebAPI。一切都很好，我尝试添加自定义依赖解析器。（最终这将使用 StructureMap，但我什至还没有达到这一点）。如果我尝试实例化自定义解析器，则在启动服务器时会出现以下异常：

> TypeLoadException：类型违反了继承安全规则：'System.Web.Mvc.CompareAttribute'。派生类型必须要么与基类型的安全可访问性相匹配，要么难以访问。

代码如下：

```
public class CustomDependencyResolver : IDependencyResolver
{
    public object GetService( Type serviceType )
    {
        return null;
    }

    public IEnumerable<object> GetServices( Type serviceType )
    {
        return null;
    }
}

...

// To trigger the exception, all I need to do is instantiate the custom resolver.
var dependencyResolver = new CustomDependencyResolver();

// Exception is thrown when I create the server:
var server = new HttpSelfHostServer( _config ); 
```

请注意，我不必对解析器做任何事情——这很简单，实例化它的行为稍后会触发失败。

奇怪的是，这个异常只发生在调试（F5）中——如果我通过 Ctrl+F5 运行，一切正常。

关于如何解决这个问题的任何想法？

堆栈跟踪：

```
mscorlib.dll!System.Reflection.RuntimeAssembly.GetExportedTypes() + 0x27 bytes  
System.Web.Http.dll!System.Web.Http.Dispatcher.HttpControllerTypeCacheUtil.FilterTypesInAssemblies(System.Web.Http.Dispatcher.IBuildManager buildManager, System.Predicate<System.Type> predicate) + 0x104 bytes    
System.Web.Http.dll!System.Web.Http.Dispatcher.HttpControllerTypeCacheUtil.GetFilteredTypesFromAssemblies(string cacheName, System.Predicate<System.Type> predicate, System.Web.Http.Dispatcher.IBuildManager buildManager) + 0x76 bytes    
System.Web.Http.dll!System.Web.Http.Dispatcher.HttpControllerTypeCache.InitializeCache() + 0x58 bytes   
System.Web.Http.dll!System.Web.Http.Dispatcher.HttpControllerTypeCache.HttpControllerTypeCache(System.Web.Http.HttpConfiguration configuration) + 0x96 bytes    
System.Web.Http.dll!System.Web.Http.Dispatcher.DefaultHttpControllerFactory.DefaultHttpControllerFactory(System.Web.Http.HttpConfiguration configuration) + 0x96 bytes  
System.Web.Http.dll!System.Web.Http.Services.DefaultServiceResolver..ctor.AnonymousMethod__0(System.Web.Http.HttpConfiguration config) + 0x30 bytes 
System.Web.Http.dll!System.Web.Http.Services.DefaultServiceResolver.GetService(System.Type t) + 0x57 bytes  
System.Web.Http.dll!System.Web.Http.Services.DependencyResolver.GetService(System.Type serviceType) + 0xd3 bytes    
System.Web.Http.dll!System.Web.Http.DependencyResolverExtensions.GetService<System.Web.Http.Dispatcher.IHttpControllerFactory>(System.Web.Http.Services.DependencyResolver resolver) + 0x6a bytes   
System.Web.Http.dll!System.Web.Http.DependencyResolverExtensions.GetServiceOrThrow<System.Web.Http.Dispatcher.IHttpControllerFactory>(System.Web.Http.Services.DependencyResolver resolver) + 0x5b bytes    
System.Web.Http.dll!System.Web.Http.DependencyResolverExtensions.GetHttpControllerFactory(System.Web.Http.Services.DependencyResolver resolver) + 0x25 bytes    
System.Web.Http.dll!System.Web.Http.Dispatcher.HttpControllerDispatcher.HttpControllerDispatcher(System.Web.Http.HttpConfiguration configuration) + 0x77 bytes  
System.Web.Http.SelfHost.dll!System.Web.Http.SelfHost.HttpSelfHostServer.HttpSelfHostServer(System.Web.Http.SelfHost.HttpSelfHostConfiguration configuration) + 0x62 bytes  
WebApi.Host.dll!My.WebApi.Host.Server.Listen() Line 33 + 0x1b bytes C#
Services.TrialBalance.TestHarness.exe!Digita.AccountsPro.Services.TrialBalance.TestHarness.Program.Main() Line 21 + 0xa bytes   C#
[Native to Managed Transition]  
[Managed to Native Transition]  
mscorlib.dll!System.AppDomain.ExecuteAssembly(string assemblyFile, System.Security.Policy.Evidence assemblySecurity, string[] args) + 0x6d bytes    
Microsoft.VisualStudio.HostingProcess.Utilities.dll!Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly() + 0x2a bytes  
mscorlib.dll!System.Threading.ThreadHelper.ThreadStart_Context(object state) + 0x63 bytes   
mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool ignoreSyncCtx) + 0xb0 bytes    
mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state) + 0x2c bytes    
mscorlib.dll!System.Threading.ThreadHelper.ThreadStart() + 0x44 bytes   
[Native to Managed Transition] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T12:49:59.767

终于找到答案了；因此回答我自己的问题。

原来有两个`IDependencyResolver`：一个在`System.Web.Http.Services`，一个在`System.Web.Mvc`。

两者都在非调试中编译和运行。

`System.Web.Http.Services.IDependencyResolver` **是正确的**。

`System.Web.Mvc.IDependencyResolver`似乎会引起问题。

# android - Android 哈希不起作用

> ID：10208191
> 
> 赞同：-1
> 
> 时间：2012-04-18T11:15:01.243
> 
> 标签：android, hash, character-encoding, sha256

我正在尝试使用 Sha-256 对 url 进行哈希处理，但遇到了一些问题。我已将字节转换为字符串，当我记录该字符串时，它显示不正确，而不是 32 个字符长的 rand 字符，它显示：

04-18 11:46:00.427: V/myApp(797): �C�rE�������.mm"7�{���"��Q]m

任何帮助将不胜感激

这是我的代码：

```
public void hash() throws NoSuchAlgorithmException, UnsupportedEncodingException{

        MessageDigest md = MessageDigest.getInstance("SHA-256");
        md.update(fixturesFeedURL.getBytes("UTF-8"));
        byte[] digest = md.digest();
        String strhash = new String(digest);
        Log.v("myApp", strhash);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:21:14.193

这是我为 MD5 做的事情：

```
MessageDigest md = MessageDigest.getInstance("MD5");
byte[] b = md.digest(input.getBytes());
StringBuffer output = new StringBuffer();
for (int i = 0; i < b.length; i++) {
  String tmpStr = "0" + Integer.toHexString((0xff & b[i]));
  output.append(tmpStr.substring(tmpStr.length() - 2));
}
return output.toString(); 
```

可能只是改变 MessageDigest 算法的问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:23:54.703

您的问题是将字节数组转换为字符串 - 您可以使用它来执行此操作：

http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Hex.html#encodeHex(byte[])

# jquery - Jquery选择器多个href - 动态获取href值

> ID：10208197
> 
> 赞同：0
> 
> 时间：2012-04-18T11:15:22.897
> 
> 标签：jquery

我有几个html href，如下所示：

```
<a id="link1" href="http://www.google.com">USA </a>    
<a id="link2" href="http://www.google.com.au">AU </a>
<a id="link2" href="http://www.google.com.nz">NZ </a> 
```

我的jquery如下：

```
<script>
    $("a").click(function () {
      var link = $('a').attr('href');
      alert(link);
      dosomethingforlink(link);

    });
</script> 
```

基本上，通过上面的单击功能，我想获取`<a>`标签的 href 值（被单击）并为每个链接做一些不同的事情。

还是我需要`(#id).click`为每个 ID 创建函数？

如果可以使用 Jquery 进行上述操作，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:16:30.853

试试这个 ：

```
$("a").click(function () {
  var link = $(this).attr('href');
  alert(link);
  dosomethingforlink(link);
}); 
```

我已更改`$('a')`为`$(this)`as `$('a')`will get all the anchors ..`$(this)`只会获得当前单击的一个。

[这是一个快速工作演示](http://jsfiddle.net/3jVht/).. 您将看到最后一行是`event.preventDefault()`- 它防止默认操作（即跟随 href）发生并允许您的函数执行。[`event.preventDefault()`文档在这里](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:16:36.817

这样的事情可能是

```
<script>
    $("a").click(function (event) {
      event.preventDefault();          
      var link = $(this).attr('href');
      alert(link);
      dosomethingforlink(link);
    });
</script> 
```

补充：

使用 event.preventDefault() 从导航到锚标记中的 url

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T11:25:16.823

```
$("a").click(function (evt) {
      evt.preventDefault();
      var link = $(this).attr('href');
      alert(link);
      dosomethingforlink(link);
}); 
```

您应该使用`preventDefault()`，否则您将无法执行进一步的代码（您的链接被点击并且页面立即更改）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T11:28:16.113

ID 应该是唯一的，所以不要在多个元素上使用相同的 ID。

可能是这样的：

```
$("a[id^='link']").on('click', function (e){
  e.preventDefault();
  switch ($(this).attr('href')) {
     case 'http://www.google.com' :
         //do something
     break;
     case 'http://www.google.com.au' :   
         //do something
     break;
     default: 
        //do something else

....etc
  }
}); 
```

# resharper - 使用代码清理时在 Resharper 中禁用/自定义注释（重新）格式

> ID：10208199
> 
> 赞同：3
> 
> 时间：2012-04-18T11:15:35.067
> 
> 标签：resharper

有没有办法使用 Resharper (6) 定义如何“清理”评论？我没有找到解决这个问题的方法。

代码清理前：

```
/// <summary>
/// This is a comment.
/// </summary>
public class MyClass
{
   ... <not yet cleaned code is here>
} 
```

代码清理后：

```
/// <summary>
///   This is a comment.
/// </summary>
public class MyClass
{
   ... <cleaned code is here>
} 
```

想要的结果：

```
/// <summary>
/// This is a comment.
/// </summary>
public class MyClass
{
   ... <cleaned code is here>
} 
```

备注：我不想禁用单个类的清理等。我只想更改意外添加的评论中的缩进。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T09:35:09.770

我找到了一个解决方案（使用 ReSharper 6.1.1000.8.2）。

打开菜单：*ReSharper->Options->Code Editing->Code Cleanup->(Select profile,需要是用户定义的profile)->C#->Disable Reformat embedded XML doc comments*

这似乎是 ReSharper 6.1 中的一个新复选框！？

此解决方案不会设置缩进，但会禁用注释重新格式化。因此，您必须自己清理注释，但 ReSharper 不再更改它们（使用错误的缩进）。

我希望 JetBrains 将添加一个选项来支持在下一个版本中单独设置缩进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T16:24:41.680

我认为这是一个错误。这是在 ReSharper 错误跟踪站点上：http: [//youtrack.jetbrains.com/issue/RSRP-275881](http://youtrack.jetbrains.com/issue/RSRP-275881)

# objective-c - 控制 segue 目的地 返回按钮 导航栏

> ID：10208201
> 
> 赞同：0
> 
> 时间：2012-04-18T11:15:40.853
> 
> 标签：objective-c, ios

我在导航栏中嵌入了 4 个视图：

VC1 -> VC2 -> VC3 -> VC4

我需要将 VC3 中的后退按钮连接到 VC1 而不是 VC2。我已经搜索实现此选项，但我没有成功。是否可以？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:47:26.693

如果您希望后退按钮保持其正常外观，则无法更改其行为，但如果您无法组织您的应用更好。它涉及直接编辑导航堆栈并从中删除不需要的视图控制器。

这不是推荐的处理方式，但它可以完成任务：

```
NSMutableArray *myNavigationStack = [NSMutableArray arrayWithArray:self.navigationController.viewControllers];
[myNAvigationStack removeObjectAtIndex:<yourViewControllerExtraIndex>];
self.navigationController.viewControllers = navigationStack; 
```

确保您获得正确的索引（0 是您的 rootViewController），并正确处理您的内存。

解决此问题的最佳方法可能是设计应用程序的体系结构以完全避免这种行为。

# objective-c - 延迟从连接内更新的标签：didReceiveData:data

> ID：10208204
> 
> 赞同：0
> 
> 时间：2012-04-18T11:15:59.710
> 
> 标签：objective-c, macos, nsurlconnection, nstextfield, performselector

我正在开发一个下载管理器，我正在尝试更新指示下载速度和剩余百分比的标签。

它在 connection:didReceiveData 中更新得太快了，并且使用 performSelector 并从该方法延迟它不起作用（它只是在开始之前延迟了很长时间）。

我应该怎么做才能更新下载速度或剩余百分比等内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:35:09.817

如果您不想尽快更新显示，只需记下上次更新的时间。如果当前时间距离上次更新不到 0.5 秒，则不要在此通道上更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:27:46.613

了解如何计算速度和百分比会很有帮助，但一种方法是：

1.  计算两次调用之间经过的时间（以秒为单位）`connection:didReceiveData`
2.  取当前接收数据的大小（姑且称之为`size`）
3.  到目前为止下载的总数据大小（让我们称之为`downloadedSize`）
4.  `Speed = size / timeElapsed`
5.  `Percentage = downloadedSize / Total data size`（假设你有它）
6.  转换为所需单位
7.  更新标签（我不明白你为什么要在这里延迟）

# bash - 如何从包含搜索词完全匹配的 CSV 文件中删除所有行？

> ID：10208206
> 
> 赞同：4
> 
> 时间：2012-04-18T11:16:05.050
> 
> 标签：bash, sed, awk

我有一个这样的 CSV 文件：

```
text,0
more text,2
some more text,100 
```

我需要删除仅包含`0`在第二列中的任何行，例如，上面的输出将是：

```
more text,2
some more text,100 
```

如何从 CSV 中删除完全匹配的所有行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T11:17:47.937

如果这是您的最后一个字段，则 grep 可以解决问题：

```
grep -v ',0$' 
```

如果没有，并且您的字段不包含`,`，请使用 awk：

```
awk -F , '{if ($2!='0') print}' 
```

如果它更复杂，请使用带有 CSV 解析器的 python 或 ruby​​。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T14:28:34.917

一个简单的 sed 解决方案...

```
sed /,0$/d 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T12:00:22.570

如果您想对文件进行内联编辑，可以尝试以下操作。请记住在尝试任何内联编辑之前备份您的文件。（将删除包含匹配项的行）

```
sed -i "s/.*match.*//g" /yourfile.csv 
```

删除文件中的任何空白行。（记住在尝试任何内联编辑之前备份您的文件。）

```
sed -i "/^$/d" /yourfile.csv 
```

**对于 OS X**，您可以尝试以下操作（记住在尝试任何内联编辑之前备份您的文件。）

```
sed -i '' "s/.*match.*//g" /yourfile.csv
sed -i '' "/^$/d" /yourfile.csv 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T12:59:03.137

这可能对您有用：

```
awk -F, '$2' file 
```

# assetslibrary - ALAssetsLibraryChangedNotification 在 ios5.0 中不起作用

> ID：10208207
> 
> 赞同：0
> 
> 时间：2012-04-18T11:16:05.957
> 
> 标签：assetslibrary

ALAssetsLibraryChangedNotification 在 IOS 5.0 中不起作用。它在较旧的 IOS 4 版本中运行良好。我怎样才能让它在 IOS 5.0 中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:56:49.377

这是一个[ios5.0 错误](http://www.openradar.me/10484334)。

您可以执行以下操作之一：

1.) 调用 [self.assetsLibrary writeImageToSavedPhotosAlbum:nil metadata:nil completionBlock:^(NSURL *assetURL, NSError *error) { }]; 创建 ALAssetsLibrary 的实例后立即

2.) 观察 ALAssetsLibraryChangedNotification（不是 NSManagedObjectContextObjectsDidChangeNotification）

# javascript - 从列表中删除项目，knockout.js

> ID：10208210
> 
> 赞同：1
> 
> 时间：2012-04-18T11:16:07.377
> 
> 标签：javascript, asp.net-mvc-3, knockout.js

请查看代码（在 ASP MVC 3 上使用 knockout.js）：

```
self.tags = ko.utils.arrayMap(@Html.Raw(new JavaScriptSerializer().Serialize(Model.Tags)), function(tag) {
                return {
                    label: tag.Name,
                    value: tag.id
                };
        });

self.addTag = function(event, ui){
            $(event.target).val("");

            var tag = ui.item.label;
            var id = ui.item.value;

            self.selectedTags.push("id: " + id + ", Name: " + tag);
            //Delete selected tag here from list
            return false;
        } 
```

问题是，如何从标签中删除？（我尝试使用remove（），我遇到了一个错误。但是当我尝试pop（）时，它成功了）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:57:11.043

您的标签数组是普通数组，而不是可观察数组，它没有删除方法。

Knockout 有普通数组的助手

```
ko.utils.arrayRemoveItem(array, itemToRemove) 
```

或者你可以使用拼接（实际上 ko.utils.arrayRemoveItem 使用拼接）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:39:08.727

通常，您可以使用 splice 从 javascript 数组中删除项目。

Pop 将不起作用，因为它只会删除最后插入的值。

var a = [1,2,3] a.splice(1,1); # 删除位置 1 的一个元素 => [1,3]

如果需要，您可以将其与淘汰赛一起使用。

淘汰赛也有一些像 array.remove(function(a){ return a.id === 1; }) 这样的 api，它返回所有 id 为 1 的元素。

编辑：作为一个例子，你可以看看这个 JsFiddle [http://jsfiddle.net/Ng39n/](http://jsfiddle.net/Ng39n/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T21:48:01.060

您可以向视图模型添加一个函数 removeTag，如下所示：

```
self.removeTag = function(tag) { self.tags.remove(tag); }) 
```

# oracle - 共享存储和 Oracle 集群件

> ID：10208215
> 
> 赞同：0
> 
> 时间：2012-04-18T11:16:30.590
> 
> 标签：oracle, cluster-computing

需要问一个关于RAC环境中共享存储机制的基本问题。我已经通过文件，但需要有人确认以下内容：

在我的场景中，数据库是 Windows 2008 R2 上的 Oracle 11g。问题是所有参与集群的节点如何连接到共享存储？是通过 LAN 还是可以在参与集群的节点之一中拥有物理存储，而其他节点通过 LAN 连接到该节点？一个简单的问题是，这个共享存储将驻留在哪里？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:15:30.863

存储需要对所有节点可见，这可以通过多种方式完成。如果您是从 rac 开始的，那么查看[oracle-base上的一些教程可能是个好主意](http://www.oracle-base.com/articles/10g/oracle-db-10gr2-rac-installation-on-linux-using-nfs.php)

# android - 单击列表视图中包含的复选框时无法选择整个项目

> ID：10208219
> 
> 赞同：1
> 
> 时间：2012-04-18T11:16:45.060
> 
> 标签：android, listview

我正在处理自定义列表视图

![这是我的应用程序屏幕截图](../Images/f717d1f51eb629e57a365f2eb2e93143.png)

这是我的适配器类

```
public class MenubaseAdapter extends BaseAdapter {
private static ArrayList<MenuItem> searchMenuItemArraylist;
private LayoutInflater menuInflater;
public MenubaseAdapter( Context context,ArrayList<MenuItem> results) {
    searchMenuItemArraylist=results;
    menuInflater = LayoutInflater.from(context);
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return searchMenuItemArraylist.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

               iewHolder holder;
            if(convertView==null)
            {
                convertView=menuInflater.inflate(R.layout.menu_list, null);
                holder=new MenuViewHolder();

                holder.txtItemName=(TextView)convertView.findViewById(R.id.textView_menuitem);
                holder.txtItemPrice=(TextView)convertView.findViewById(R.id.textView_itemprice);
                holder.txtItemQty=(TextView)convertView.findViewById(R.id.TextView_itemQty);
                holder.selectChk=(CheckBox)convertView.findViewById(R.id.checkBox_menuchk);

                convertView.setTag(holder);
            }else {
                holder=(MenuViewHolder)convertView.getTag();
            }
            holder.txtItemName.setText(searchMenuItemArraylist.get(position).getMenuItemname());
            holder.txtItemPrice.setText(searchMenuItemArraylist.get(position).getMenuItemPrice());
            holder.txtItemQty.setText(searchMenuItemArraylist.get(position).getItemQty());
            holder.selectChk.setChecked(searchMenuItemArraylist.get(position).isSelected());
holder.selectChk.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub

                        //how to select the listview item ?
                    }
                });

 return convertView;

        }

static class MenuViewHolder
{
    TextView txtItemName;
    TextView txtItemPrice;
    TextView txtItemQty;
    CheckBox selectChk;
} 
```

}

现在我的问题是，当我单击 foodmenuitems 时，列表被选中并且复选框被选中。但是如果我只单击复选框，那么列表项将不会被提前选中。thnx。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:28:56.023

要跟踪所选项目，请获取对象的一个​​临时数组列表或简单的字符串数组列表，您将在其中添加或删除所选项目。

**例如**

你有一个临时数组列表`ArrayList<MenuItem> tempList;`

现在在 getview 方法中，您将必须进行两项更改

1.  检查天气当前对象是否在临时数组列表中。如果当前元素在临时数组列表中，则只需将复选框的状态设置为 true，否则将其设置为 false。
2.  在复选框的 onClick 方法中首先检查复选框的状态。如果选中该复选框，则只需检查当前元素是否在临时数组列表中，否则只需将当前元素添加到数组列表中。如果复选框的状态未选中，则检查当前元素的临时数组列表，如果临时数组列表中存在，则将其从列表中删除，然后调用该`notifyDatasetChanged`方法

# wpf - 获取渲染视图的上下文？

> ID：10208221
> 
> 赞同：2
> 
> 时间：2012-04-18T11:16:51.607
> 
> 标签：wpf, mvvm

在我的 WPF 应用程序中，我有一个名为`CompanyViewModel`.

有时，这个类的一个实例被设置为`DataContext`我的主窗口，它的定义如下：

```
<window x:Class= ..... >
    <Grid>
        <ContentControl Content="{Binding }"></ContentControl>
    </Grid>
</Window> 
```

在这种情况下，我希望使用一个显示视图模型的所有属性的视图。

其他时候，`ListView`控件将其 itemsource 设置为包含`CompanyViewModel`. 在这里，我希望使用一个只呈现一些重要属性的视图。

我在资源字典中有这个`MainWindow.xaml`：

```
<DataTemplate DataType="{x:Type vm:CompanyViewModel}">
    <vw:CompanyView></vw:CompanyView>
</DataTemplate> 
```

是否可以根据绑定视图模型的上下文为视图模型选择视图？例如，使用`CompanyView`when 显示在`ContentControl`window 或 when 在 a 中`TabControl`，以及使用`CompanyViewSmall`where 显示在 a 中`ListView`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:58:59.893

首先`DataTemplate`在本地查找要使用的对象，如果未找到，则在 Visual Tree 层次结构中进一步查找。

因此，您可以指定在`DataTemplate`层次结构的更下方使用与正常不同的东西。

例如，以下将使用可视化树中的`CompanyView`任何位置`CompanyViewModel`，除非在特定`ListView`位置`DataTemplate`指定为较小的视图。

```
<Window.Resources>
    <DataTemplate DataType="{x:Type vm:CompanyViewModel}">
        <vw:CompanyView />
    </DataTemplate>
</Window.Resources>

<ListView>
    <ListView.Resources>
        <DataTemplate DataType="{x:Type vm:CompanyViewModel}">
            <vw:CompanyViewSmall />
        </DataTemplate>
    </ListView.Resources>
</ListView> 
```

您也可以使用隐式样式来`ListView`告诉它在 中使用较小的模板`.Resources`，但是这会将较小的视图应用于任何`ListView`，而不仅仅是特定的，如果您曾经将另一种样式应用于 a`ListView`您必须记住继承默认样式以保持较小的`DataTemplate`.

```
<Style TargetType="{x:Type ListView}">
    <Style.Resources>
        <DataTemplate DataType="{x:Type vm:CompanyViewModel}">
            <vw:CompanyViewSmall />
        </DataTemplate>
    </Style.Resources>
</Style> 
```

# spring - EXT JS：是否可以在代理中将 url 添加到读取器和写入器

> ID：10208222
> 
> 赞同：1
> 
> 时间：2012-04-18T11:16:51.633
> 
> 标签：spring, hibernate, rest, spring-mvc, extjs

我正在创建一个使用 Spring 3、EXTJS 4、hibernate 3 的简单项目，我想创建一个从数据库中提取数据的 ext 表单，您可以添加、删除和更新此信息。我已经填写了表格，现在我想弄清楚如何在表格中更新客户。

做这个的最好方式是什么？我想做的是为作者使用与阅读器不同的 url，以便它可以将客户对象传递回我的 java 类以更新数据库

这是我目前填充表单的方式

```
Ext.onReady(function(){

var store = Ext.create('Ext.data.Store', {
    autoLoad: true,
    autoSync: true,
    model: 'Person',
    proxy: {
        type: 'rest',
        url: 'http://localhost:8080/helloworld/service/web',
        reader: {
            type: 'json' 
        },
        writer: {
            type: 'json',
        }
    },
..... 
```

我想知道是否可以像这样为读者和作者使用不同的网址

```
Ext.onReady(function(){

var store = Ext.create('Ext.data.Store', {
    autoLoad: true,
    autoSync: true,
    model: 'Person',
    proxy: {
        type: 'rest',

        reader: {
            type: 'json',
            url: 'http://localhost:8080/helloworld/service/web'
        },
        writer: {
            type: 'json',
            url: 'http://localhost:8080/helloworld/service/web/update'
        }
    },
...... 
```

这些是我用来填充表单和更新客户的方法

```
@Controller
@RequestMapping("/web")  
public class Web {

@Autowired
private CustomerService customerService;

@RequestMapping(method=RequestMethod.GET)
public @ResponseBody List<Customer> getCustomers() {
    List<Customer> list = customerService.returnAllCustomers();
    return list;
}

@RequestMapping(value="/update", method=RequestMethod.GET)
public @ResponseBody void updateCustomers(Customer customer) {
    customerService.saveCustomer(customer);
}
...... 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T23:00:07.717

如果你想有单独的 URL，你可以切换到使用`AjaxProxy`. Readers 和 Writers 不应配置 URL，因为它们只是解码器和编码器。这是一个例子：

```
var store = Ext.create('Ext.data.Store', {
    autoLoad: true,
    autoSync: true,
    model: 'Person',
    proxy: {
        type: 'ajax',
        api: {
            create  : 'http://localhost:8080/helloworld/service/web/create',
            read    : 'http://localhost:8080/helloworld/service/web',
            update  : 'http://localhost:8080/helloworld/service/web/update',
            destroy : 'http://localhost:8080/helloworld/service/web/delete'
        }
        reader: {
            type: 'json'
        },
        writer: {
            type: 'json'
        }
    }
} 
```

相反，如果您想继续使用 restful 实现，则需要更改服务器端 API 以将 create、read、update 和 destroy 方法分别映射到`POST`、`GET`、`PUT`和`DELETE`。例子：

```
@RequestMapping(method=RequestMethod.PUT)
public @ResponseBody void updateCustomers(Customer customer) {
    customerService.saveCustomer(customer);
} 
```

# c++ - 什么是第一 - 模板实例化与宏扩展？

> ID：10208233
> 
> 赞同：10
> 
> 时间：2012-04-18T11:17:44.347
> 
> 标签：c++, templates, macros, c-preprocessor

让我们考虑一个这样的代码示例（它只是一个人为的例子来结合`define`and `template`，不要寻找任何意义它）：

```
#define COMMA ,

template <typename A> class Test
{
public:
    Test(){}

    void Foo(A var COMMA int test);
};

Test<int> Knarz; 
```

**问题：**

我的假设是否正确，**首先**预处理器将搜索/替换所有出现的 COMMA，**其次**编译器将按该顺序实例化任何模板？

**跟进：**

如果上面的答案是“**是**”，正如我所希望的那样，你能解释为什么这个[使用模板和定义的解决方案](https://stackoverflow.com/a/10207540/913577)有效吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T11:21:02.567

预处理器在编译本身完成之前运行，因此您假设预处理器将`COMMA`在模板实例化之前替换是正确的。

供您跟进：该解决方案与模板几乎没有关系。问题在于预处理器将大括号内的逗号作为宏的参数分隔符，因为它不会解析 C++ 代码以查看它是模板参数的分隔符。因此，宏仅在替换后才`COMMA`用于插入`,`分隔模板参数。`MOCK_CONSTANT_METHOD0`但是我不确定这是否可以保证工作，因为我不知道内存宏替换顺序的保证。If`COMMA`将在`MOCK_CONSTANT_METHOD0`一切崩溃并且代码再次无法编译之前被替换。

编辑：查看标准后，我认为该解决方案通常应该有效，因为预处理器会`MOCK_CONSTANT_METHOD0`首先找到并替换它。只有这样，它才会检查替换的结果以找到`COMMA`宏。虽然没有保证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T11:20:49.760

首先是宏和模板，实际上宏只会在编译之前将更改应用于现有代码。所以在这个解决方案中，逗号将生成一个模板代码，如：

```
MOCK_CONSTANT_METHOD0(aMethod, const QMap<QString,QString>()); 
```

在编译之前。

所以对于第二个问题：

它与 gmock 框架的实际工作方式有关， MOCK_CONSTANT_METHOD0 是一个宏，因此该行将转换为其他内容。Markus Mayr 说逗号将被翻译为参数分隔符，因此它与在这种情况下如何转换 gmock 宏有关，我猜首先将替换模拟宏，然后在内部应用逗号，这就是为什么它可以使用宏而不仅仅是逗号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T11:21:37.980

预处理器是第一个。

我认为引用的解决方案是一个非常糟糕的主意，因为它取决于预处理器执行替换的顺序。由于整个字符集仅用于防止预处理器卡住模板参数列表中的逗号，因此使用 typedef 会好得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-25T18:55:06.033

翻译有[9个阶段](http://en.cppreference.com/w/cpp/language/translation_phases)。

> 我的假设是否正确，首先预处理器将搜索/替换所有出现的`COMMA`，其次编译器将按该顺序实例化任何模板？

在第`COMMA`4 阶段替换令牌
。在第 8 阶段实例化模板。

# image - 图像恢复中的光学传递函数是什么？

> ID：10208234
> 
> 赞同：2
> 
> 时间：2012-04-18T11:17:45.850
> 
> 标签：image, image-processing, filter

我正在研究逆向过滤，我正在尝试对其进行编码，我从网上寻找了一些参考资料。每个人都考虑过我所指的冈萨雷斯书中没有的光学传递函数。

```
% Inverse_Filter_Demo-

clc
clear all
close all

original_image=imread('cameraman.jpg'); %loading the original (un-blurred) image
original_image=double(original_image);

%The  blur function (PSF- Point Spread Function) that will be added  to the original image
PSF=fspecial('motion',20,45);

%Adding blur to the original image
degraded_image = imfilter(original_image,PSF,'circular','conv');

OTF= psf2otf(PSF,[size(degraded_image,1) size(degraded_image,2)]);%Getting OTF from PSF
Inverse_Filter=conj(OTF)./((abs(OTF)).^2); %The inverse filter

%Preforming Fourier Transform to the degraded image
FT_degraded_image=fftn(degraded_image);

%Preforming the restoration itself
restored_image=abs(ifftn(FT_degraded_image.*Inverse_Filter));

%Presenting the restoration results:

figure;
set(gca,'Fontsize',14);
colormap(gray);
imagesc(original_image,[0 255]);
truesize;    
title('Original image');

figure;
set(gca,'Fontsize',14);
colormap(gray);
imagesc(degraded_image,[0 255]);
truesize;    
title('Degraded image');

 figure;
set(gca,'Fontsize',14);
colormap(gray);
imagesc(restored_image,[0 255]);
truesize;    
title('Restoration of the degraded image (using Inverse Filter)'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T21:56:10.487

您的问题不清楚，可能更适合（dsp.stackexchange.com）。但是，如果您要问的是“什么是光学传递函数？” 那么 OTF 的[Wikipedia 文章](http://en.wikipedia.org/wiki/Optical_transfer_function)是一个很好的起点。

考虑它的最简单方法是光学传递函数是点扩展函数 (PSF) 的傅里叶变换。通常 PSF 是一个过滤器（卷积核），它描述单个针孔型光源如何通过某些设备涂抹到实际图像中。

OTF 只是该拖尾过程的幅度/相位表示。图像的傅里叶变换将*在相空间中乘以*滤波器，以产生模糊的、真实的输出图像的傅里叶变换（而不是卷积，这是您在空间域中使用 PSF 所做的）。在应用 OTF 后应用傅里叶逆变换应该会给您设备将产生的实际图像。

为了数学上的方便，有时为了处理效率，使用 OTF 而不是常规空间域的 PSF 可能更方便。这就是为什么您会看到一些算法和教科书使用 OTF 而不是 PSF 来描述他们的方法。

# extjs4 - 表格东侧带有静态图像的浮动表格

> ID：10208236
> 
> 赞同：0
> 
> 时间：2012-04-18T11:17:48.297
> 
> 标签：extjs4

我有用于在东侧使用图像面板编辑产品的表格。我希望该图像具有宽度：200，高度：200。并形成浮动它。怎么做？![在此处输入图像描述](../Images/c501ca6d9659758456499f29146740a1.png)

编辑：您可以在附加图像中看到，图像下方区域为空 这是此窗口的项目部分

```
items: [{
    xtype: 'tabpanel',
    border: false,
    items: [{
        xtype: 'container',
        title: 'General',
        border: false,
        layout: 'border',
        region: 'left',
        border: false,
        items: [{
            xtype: 'container',
            region: 'center',
            layout: 'border',

            //height: 175,
            flex: 1,
            border: false,
            items: [{
                xtype: 'webposform',
                id: 'productinfo',
                startfocused: true,

                region: 'center',
                items: [{
                    xtype: 'textfield',
                    hidden: true,
                    name: 'id',
                },{
                    xtype: 'textfield',
                    fieldLabel: 'SKU',
                    name: 'sku',
                },{
                    xtype: 'textfield',
                    fieldLabel: 'Product name',
                    name: 'name',
                },{
                    xtype: 'posdecimalfield',
                    fieldLabel: 'Sales Price',
                    name: 'price',
                },{
                    xtype: 'posdecimalfield',
                    fieldLabel: 'Cost Price',
                    name: 'cost',
                },{
                    xtype: 'textfield',
                    fieldLabel: 'EAN',
                    hideTrigger: true,
                    keyNavEnabled: false,
                    name: 'ean',
                },{
                    xtype: 'container',
                    anchor: '100%',
                    layout: 'hbox',
                    bodyPadding: 5,
                    border: false,
                    defaults: {
                        labelWidth: 120,
                        anchor:'100%'
                    },
                    items: [{
                        hidden: true,
                        xtype: 'textfield',
                        name: 'supplier'
                    },{
                        xtype: 'textfield',
                        region: 'center',
                        name: 'supplier_display',
                        fieldLabel: 'Supplier',
                        flex: 1,
                        readOnly: true,
                    },{
                        action: 'selectSupplier',
                        margin: '0 0 0 2',
                        xtype: 'button',
                        width: 25,
                        region: 'west',
                        text: '...',
                    }],
                },{
                    xtype: 'textarea',
                    fieldLabel: 'Description',
                    name: 'description'
                },]
            },{
                xtype: 'panel',
                border: false,
                layout: 'vbox',
                align : 'stretch',
                pack  : 'start',
                region: 'east',
                items: [{
                    xtype: 'panel',

                    id: 'defaultimage',
                    bodyPadding: 5,
                    height: 200,
                    width: 200,
                    margins: '5 5 5 5',
                    region: 'center',
                },{
                    xtype: 'panel',
                    border: false,
                    flex: 1
                }]
            }],
        }],
    },{
        xtype: 'imagepanel',
        title: 'Images',
        layout: 'border',
    }],
}], 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:20:32.117

似乎有什么问题？使用`column`或`hbox`布局并将所有字段放入第一列/容器中，将图像放入第二列/容器中。

你有你已经尝试过的代码吗？

# node.js - node.js redis 异步查询

> ID：10208237
> 
> 赞同：2
> 
> 时间：2012-04-18T11:17:52.427
> 
> 标签：node.js, redis

希望有人可以帮助解决关于 node-redis 的（简单）异步问题。我正在尝试从 redis 数据库中的哈希加载一个集合，然后进一步使用该填充集合。这是代码片段：-

```
var redis_client = redis.createClient(REDIS_PORT, REDIS_URL); 

redis_client.hgetall(target_hash,function(e,o){

    Object.keys(o).forEach(function(target){

        // get the "name" from the hash         
        redis_client.hget(o[target],"name",function(e,o){
        if (e){
                 console.log("Error occurred getting key: " + e);
              }
        else {
                 redis_client.sadd("newset",o);
             }
    });

});

// the following line prints nothing - why ?? 

redis_client.smembers("newset",redis.print); 
```

当我检查 redis 中“newset”的内容时，它按预期填充，但在运行时显示为空。我确定这是一个异步问题 - 非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T14:21:26.273

`hgetall`是异步调用：当它收到redis服务器的回复时，最终会调用你的回调`function (target) { ... }`。但是在您的脚本中，它实际上会立即返回。由于`hgetall`返回非常快，Node 将立即运行下一条语句`smembers`. 但是此时`sadd`语句还没有运行（即使您的系统非常快，因为还没有上下文切换）。

您需要做的是确保`smembers`在所有可能的`sadd`调用都执行之前不调用。redis_client 提供了`multi`允许您将所有调用排队`sadd`并在它们全部完成后运行回调的功能。我还没有测试过这段代码，但你可以试试这个：

```
var redis_client = redis.createClient(REDIS_PORT, REDIS_URL);

redis_client.hgetall(target_hash, function(e, o) {
  var multi = redis_client.multi();
  var keys = Object.keys(o);
  var i = 0;

  keys.forEach(function (target) {
    // get the "name" from the hash     
    redis_client.hget(o[target], "name", function(e, o) {
      i++;
      if (e) {
        console.log("Error occurred getting key: " + e);
      } else {
        multi.sadd("newset", o);
      }

      if (i == keys.length) {
        multi.exec(function (err, replies) {
          console.log("MULTI got " + replies.length + "replies");
          redis_client.smembers("newset", redis.print);
        });
      }
    });
  });
}); 
```

一些库有一个内置的等价物`forEach`，允许您指定一个在循环完成时要调用的函数。如果没有，您必须手动跟踪有多少回调，并`smembers`在最后一个回调之后调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:53:50.200

除非您确实需要交易，否则不应使用 multi 。

只需保留交易计数器并在最终回调中调用 smembers

```
var redis_client = redis.createClient(REDIS_PORT, REDIS_URL); 
var keys = Object.keys(o);
var i = 0;
redis_client.hgetall(target_hash,function(e,o){

    Object.keys(o).forEach(function(target){

        // get the "name" from the hash         
        redis_client.hget(o[target],"name",function(e,o){
        i++
        if (e){
                 console.log("Error occurred getting key: " + e);
              }
        else {
                 redis_client.sadd("newset",o);
                 if (i == keys.length) {
                    redis_client.smembers("newset", redis.print);
                 }

         }}); 
```

# linux - 如何在不使用 tmp 目录的情况下重新打包 zip 文件？

> ID：10208241
> 
> 赞同：3
> 
> 时间：2012-04-18T11:18:24.007
> 
> 标签：linux, bash

我有很多 zip 文件需要重新打包/重新压缩才能解决 MediaWiki 0.1.18 中的错误。

我可以做到

```
#!/bin/bash

for f in *zip; do
   cd tmp
   rm -rf *
   unzip ../"$f"
   zip -r ../"$f" *
   cd ..
done 
```

但是有没有办法做到这一点，例如使用管道或 zip 选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T11:22:34.230

```
gzip -d -c old.gz | gzip >new.gz 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T12:54:28.920

你不能。如果您将一些位发送到 zip，则无法知道一个文件何时结束以及新文件何时开始。

实际上，您可以编写自己的程序来完成这项工作，但从您的描述来看，这似乎有点矫枉过正。此外，您并没有告诉您到底要修复什么错误，因此无法建议其他解决方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-27T13:58:08.820

There is a utility called [AdvanceCOMP](http://advancemame.sourceforge.net/comp-readme.html) that does exactly what you're looking for. It recompresses ZIP and GZ files (and some others) without intermediary extraction to disk. (I do believe that the mechanism used is to decompress the data and recompress it, but that does not require writing files to disk or regenerating metadata.)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-25T09:14:32.417

有点晚了，但可能对后来的人有帮助：

`zipsplit -n 2147483648`将重新打包 zip 高达 2GiB 而无需提取。但由于此命令用于拆分 zip 文件，因此没有覆盖原始文件或指定输出文件的选项，只有输出目录。

# javascript - Javascript，转义不是函数-来自Firefox？

> ID：10208242
> 
> 赞同：1
> 
> 时间：2012-04-18T11:18:40.540
> 
> 标签：javascript

我对这个感到很困惑，从 Firefox 得到这个错误。

```
escape is not a function 
```

![在此处输入图像描述](../Images/bef20b0cebf95938531906ee602b148d.png) 查看 W3C 页面，它说它像我想的那样受支持。

我尝试`escapeURI`了，这产生了同样的错误。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:23:36.647

`escape`DOM 级别 1 中有一个函数，因此您的代码应该可以工作。该问题最可能的解释是您已经覆盖它或`escape`在本地​​范围内声明了一个新变量。如果是后者，那么您应该能够通过`window.escape`.

无论如何，您都不应该使用此功能；它已被弃用，因为它不能很好地处理非 ASCII 字符。改为使用[`encodeURIComponent`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)。

# c# - DataSource 和 DataSourceID 都在“GridView1”上定义。删除一个定义

> ID：10208249
> 
> 赞同：0
> 
> 时间：2012-04-18T11:19:05.090
> 
> 标签：c#, asp.net, sql

我正在使用gridview 和SqlDataSource 将数据表信息绑定到gridview。在 gridview 更新事件中，我有以下代码：

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
  {
                    var ID = (int)GridView1.DataKeys[e.RowIndex]["No"];
                    string costring = "the conn string";
                    string query = "UPDATE mytable SET Age = @Age WHERE No = " + ID;
                    using (SqlConnection dataConnection = new SqlConnection(costring))
                    {
                        using (SqlCommand com = new SqlCommand(query, dataConnection))
                        {
                            dataConnection.Open();
                            int valueID = 18;
                            com.Parameters.AddWithValue("Age", valueID);
                            com.ExecuteNonQuery();
                            GridView1.DataSource = SqlDataSource1;
                            GridView1.DataBind();
                            dataConnection.Close();
                        }
                    }
                 } 
```

*   如果我单击更新事件，我会得到：“DataSource 和 DataSourceID 都在 'GridView1' 上定义。删除一个定义。” 这里是“GridView1.DataBind();”！但是当我刷新网页时，代码可以工作，但我总是收到这个错误。
*   我在谷歌上搜索过，我发现我不能同时使用这两者..但我需要查看 gridview 上的信息，我不能删除 sqldatasource 绑定，而且我需要使代码工作。
*   我试过 DataGridviewID = null; 我没有收到任何错误但没有任何改变代码没有执行..没有任何反应

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:25:03.230

如果您发出此语句，您是否真的需要再次分配数据源

```
 GridView1.DataSource = SqlDataSource1;
  GridView1.DataBind(); 
```

并使用

```
 SqlDataSource1.Update(); 
```

[有一个使用数据源的例子](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.update.aspx)，我希望对你有帮助

# java - 如何在java中使用JSlider增加/减少图像的亮度？

> ID：10208255
> 
> 赞同：2
> 
> 时间：2012-04-18T11:19:38.857
> 
> 标签：java, swing, brightness, jslider

我正在使用 java swing 技术在 netbeans 平台上制作应用程序。我想对捕获的图像进行图像处理。此图像由 X-Ray Gun 捕获。之后我想使用 JSlider 增加/减少图像的亮度。我使用paintComponent 完成了这个（图形g）方法。但我想在不使用paintComponenet（Graphics g）方法的情况下直接增加/减少图像亮度的效果。那么我该怎么做呢？我的代码如下所示。在我的代码中，我使用 JAI 库的 PlanarImage 和 BufferedImage 类来加载 .tiff 图像，之后我使用 JSlider 对象的 statechange 事件来增加/减少图像的亮度。

```
enter code here

 import java.awt.BorderLayout;
 import java.awt.Graphics;
 import java.awt.image.BufferedImage;
 import java.awt.image.RescaleOp;
 import javax.media.jai.JAI;
 import javax.media.jai.PlanarImage;
 import javax.swing.*;
 import javax.swing.event.ChangeEvent;
 import javax.swing.event.ChangeListener;

 public class Main extends JPanel implements ChangeListener {

 RescaleOp op;
 PlanarImage image = JAI.create("fileload", "F:\\java\\aimages\\teeth1.tiff");
 BufferedImage bufferedImage = image.getAsBufferedImage();
 BufferedImage bImage;

 int x1 = bufferedImage.getWidth();
 int y1 = bufferedImage.getHeight();

 JSlider slider = new JSlider(-10, 10);

 public Main() {
     bImage=bufferedImage; 
     slider.addChangeListener(this);
    this.add(slider, BorderLayout.class);
    // this.add(new JLabel(new ImageIcon(bufferedImage)), BorderLayout.NORTH);

 }

 @Override
 protected void paintComponent(Graphics g) {
    g.drawImage(bufferedImage, 0, 0, x1, y1, null);
 }

 public static void main(String[] argv) throws Exception {

    JFrame jFrame = new JFrame();
    jFrame.add(new Main());
    jFrame.setVisible(true);
    jFrame.setSize(200, 200);
    jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

 }

 @Override
 public void stateChanged(ChangeEvent e) {
    JSlider slid = (JSlider) e.getSource();
    float value = (float) slid.getValue();
    setValue(value);
 }

 private void setValue(float value) {

    bufferedImage=bImage;
    float scaleFactor = (float) (1.0 + (value / 10.0));
    op = new RescaleOp(scaleFactor, 0, null);
    bufferedImage = op.filter(bufferedImage, null);
    repaint();

 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:27:32.940

目前尚不清楚您*为什么*要避免使用`paintComponent()`，但您始终可以更改`BufferedImage`a`JLabel`的`ImageIcon`using `RescaleOp`。

附录：听起来您不想覆盖原始图像，因此更改副本自然是有意义的。不幸的是，您的示例仅复制了对原始示例的*引用。*相反，使用两个副本，传递原始 as`src`和副本 as `dst`，如下面的示例所示。另请参阅[`AlphaTest`](https://stackoverflow.com/a/5864503/230513)。

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.image.BufferedImage;
import java.awt.image.RescaleOp;
import javax.media.jai.JAI;
import javax.media.jai.PlanarImage;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

/**
 * @see https://stackoverflow.com/q/10208255/230513
 * @see https://stackoverflow.com/questions/5838842
 * @see https://stackoverflow.com/questions/5864490
 */
public class RescaleTest extends JPanel implements ChangeListener {

    private static final String NAME = "image.jpg";
    private BufferedImage image, copy;
    private JSlider slider = new JSlider();

    public RescaleTest() {
        PlanarImage pi = JAI.create("fileload", NAME);
        image = pi.getAsBufferedImage();
        copy = pi.getAsBufferedImage();
        this.setLayout(new BorderLayout());
        this.add(new JLabel(new ImageIcon(copy)));
        this.add(slider, BorderLayout.SOUTH);
        slider.setValue(slider.getMaximum() / 2);
        slider.addChangeListener(this);
    }

    @Override
    public void stateChanged(ChangeEvent e) {
        float value = (float) slider.getValue();
        float scaleFactor = 2 * value / slider.getMaximum();
        RescaleOp op = new RescaleOp(scaleFactor, 0, null);
        copy = op.filter(image, copy);
        repaint();
    }

    private void display() {
        JFrame f = new JFrame("RescaleTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new RescaleTest().display();
            }
        });
    }
} 
```

# c++ - 为什么 COM 在新线程中不起作用？

> ID：10208259
> 
> 赞同：1
> 
> 时间：2012-04-18T11:19:48.610
> 
> 标签：c++, windows, com

将我的 VS2003 项目转换为 VS2008 后，我的问题就开始了。解决方案包含 3 个项目。项目是DLL。有很多编译错误，然后是一些链接器错误……好吧，我把它们赶走了。现在它根本行不通；）

因此，其中一个 DLL 应该通过 COM 与 Word 进行通信。

```
Word::_ApplicationPtr d_pApp;
Word::_DocumentPtr d_pDoc;

void MSWord2003::init()
{
    free();
    HRESULT hr;
    CLSID clsid;
    CLSIDFromProgID(L"Word.Application", &clsid);  

     // Get an interface to the running instance, if any..
    IUnknown *pUnk;

    hr = GetActiveObject(clsid, NULL, (IUnknown**)&pUnk);
    if(hr!=S_OK)
        throw MSWord::MSWordException("Nie znaleziono działającej aplikacji MSWord.");

    IDispatch* d_pDispApp;
    hr = pUnk->QueryInterface(IID_IDispatch, (void**)&d_pDispApp);
    if(hr!=S_OK)
        throw MSWord::MSWordException("Nie udało się połączyć z aplikacją MSWord.");

    pUnk->Release();
    pUnk = 0;

    d_pApp = d_pDispApp;
    d_pDoc = d_pApp->ActiveDocument;

    d_pDispApp->AddRef();   

    d_currIdx = -1;

    paragraphsCount = d_pDoc->GetParagraphs()->Count;
    footnotesCount = d_pDoc->GetFootnotes()->Count;
    endnotesCount = d_pDoc->GetEndnotes()->Count;
}

void MSWord2003::free()
{
    if(d_pApp!=0)
    {
        d_pApp->Release();
        d_pApp=0;
    }
} 
```

此代码适用于 VS2003（以及不同的机器，我的计算机上没有 VS2003），而在 VS2008 中，它仅在由主线程调用时才有效。当被新线程调用时（由 CoInitialize 初始化）d_pApp 未正确初始化 - 它的 ptr 显示为 0。

在调试时，我在 comip.h 中找到了代码：

```
template<typename _InterfacePtr> HRESULT _QueryInterface(_InterfacePtr p) throw()
    {
        HRESULT hr;

        // Can't QI NULL
        //
        if (p != NULL) {
            // Query for this interface
            //
            Interface* pInterface;
            hr = p->QueryInterface(GetIID(), reinterpret_cast<void**>(&pInterface));

            // Save the interface without AddRef()ing.
            //
            Attach(SUCCEEDED(hr)? pInterface: NULL);
        }
        else {
            operator=(static_cast<Interface*>(NULL));
            hr = E_NOINTERFACE;
        }

        return hr;
    } 
```

在新线程中，QueryInterface 返回 E_NOINTERFACE，尽管 GetIID() 为两个线程返回相同的内容。这就是我陷入困境的地方 - 我不知道是什么导致了这种行为......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:26:15.180

IMO 你应该不使用 CoInitialize 初始化 COM，而是使用 CoInitializeEx，指定 COINIT_MULTITHREADED。否则，每个线程都有单独的单线程 COM 单元。

# wpf - 如何更改工具栏中的按钮文本颜色？

> ID：10208260
> 
> 赞同：1
> 
> 时间：2012-04-18T11:19:52.803
> 
> 标签：wpf, xaml, button, colors, toolbar

是否可以更改`Button`按钮存在于工具栏中的文本颜色？

我尝试了以下`app.xaml`

```
<Style TargetType="{x:Type Toolbar}"> <!-- this changes the background colour -->
    <Setter Property="Background" Value="AliceBlue"/> <!-- works -->
    <Setter Property="Foreground" Value="Red"/> <!-- doesn't work -->
</Style> 
```

我试过了

```
<Style TargetType="{x:Type Button}"> <!-- this changes both colours -->
    <Setter Property="Background" Value="AliceBlue"/> <!-- works -->
    <Setter Property="Foreground" Value="Red"/> <!-- work -->
</Style> 
```

工具栏定义为：

```
<ToolBarTray Background="White" Width="Auto">
    <ToolBar UseLayoutRounding="True" >
        <Button Content="Options"  Name="btnOptionsSettings" Click="btnOptionsSettings_Click" ></Button>
        <Button Content="Timer"    Name="btnTimerSettings" Click="btnTimerSettings_Click" ></Button>
        <Button Content="Blocks"   Name="btnBlocks" Click="btnBlocks_Click" ></Butto

    </ToolBar>
</ToolBarTray> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:31:18.803

你可以通过调用外部样式表来做到这一点

# eclipse - 如何在eclipse中改变当前行的背景

> ID：10208261
> 
> 赞同：1
> 
> 时间：2012-04-18T11:20:03.540
> 
> 标签：eclipse, vim, background

***Eclipse：*** ![在此处输入图像描述](../Images/0d5863ddbbb4b8f20a779292ba6551a8.png) 正如你所看到的，现在Eclipse中的当前行是深绿色的，但是我想将当前行更改为只是一个下划线，就像我在vim中所做的那样，下划线是当前行：

***vim*** ![在此处输入图像描述](../Images/0f04cce6c3b3ed5a94900e1c86eb028f.png)

日食能做到吗？我已经搜索了所有可以搜索的内容，包括 eclipse 和 google 中的首选项，但仍然找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T21:53:17.683

```
:hi cursorline cterm=underline ctermbg=None 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:57:22.583

我似乎在 Eclipse 的默认选项中的任何地方都找不到该选项。

我看到处理“当前行”主题的唯一领域是

```
Windows > Preferences > General > Editors > Text Editors 
```

在此屏幕中，您应该看到**外观颜色选项**，您可以在其中选择**当前行突出显示**。

我检查的另一个地方是**注释**部分：

```
Windows > Preferences > General > Editors > Text Editors > Annotations 
```

但我没有看到任何类型的当前线路选项。您可能需要为此尝试 3rd 方插件。

# android - 如何获得布局的尺寸或更类似于高度和宽度（以像素为单位）？

> ID：10208262
> 
> 赞同：1
> 
> 时间：2012-04-18T11:20:07.787
> 
> 标签：android, android-layout, android-screen

我想以像素为单位获得布局的宽度。我试过这个：

```
LinearLayout galleryContainer = (LinearLayout)findViewById(R.id.galleryContainerLayout);
int galleryWidth= galleryContainer.getLayoutParams().width; 
```

如果我吐出galleryWidth，它会显示“-1”。

我也试过

```
galleryContainer.getWidth() 
```

但它第一次给出 0，然后第二次给出 480（实际大小），所以就像我在布局渗透其大小之前得到了像素。

我勒个去？

我怎样才能真正获得以像素为单位的布局宽度？或者一些确切的值，比如倾角？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:36:58.223

`measure()`通话前使用`getWidth()`

```
galleryContainer.measure(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:52:27.090

不确定你，但我们也可以编写这样的代码，看看它是否有帮助。

```
Display display = ((WindowManager)context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
                        int width = display.getWidth();
                        int height = display.getHeight(); 
```

玩得开心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T11:22:56.373

布局已膨胀但尚未绘制。为了获得宽度或高度，您必须使用以下方法。

```
@Override 
public void onWindowFocusChanged(boolean hasFocus) 
{ 
     // TODO Auto-generated method stub 
     super.onWindowFocusChanged(hasFocus);
     System.out.println("...Width..."+galleryContainer.getWidth()); 
} 
```

# java - 如何加载带有数据的弹出窗口并将所选选项返回到原始表单

> ID：10208263
> 
> 赞同：0
> 
> 时间：2012-04-18T11:20:10.510
> 
> 标签：java, html, jsp, spring-mvc

我有一个表单，用户可以在其中从图像列表中选择一个图像。我想要一个按钮“选择图像”。按下按钮时，应该会弹出或覆盖可用图像列表。当用户选择图像时，图像的 id 应该返回到原始形式。

我完全不知道该怎么做。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:32:08.613

这应该很简单：

1.  单击“选择”时，显示一个 div（用高 zindex 标记它以具有弹出行为或使用 jQuery 对话框）

2.  在此弹出窗口中添加您的所有图像（您是否想在 html 表格中添加图像或使用 div 取决于您）

3.  为您的图像添加侦听器（如果您的所有图像都有一个类，那么类似于：

jQuery('.imgclass').click)

1.  当用户关闭此 div 时，使用您将在步骤 3 中捕获的 id。

# c# - 如何在不知道其具体类型的情况下获得通用接口？

> ID：10208279
> 
> 赞同：0
> 
> 时间：2012-04-18T11:21:02.837
> 
> 标签：c#, generics, reflection, interface

这是我的问题（请耐心等待）。

我有以下基类和接口

```
public abstract class Entity 
{
    public Entity()
    {
    }
}

public interface IRelatable<T> where T : Entity
{
    T RelatedEntity { get; set; }

    void RelateTo()
} 
```

我有两个继承自 Entity 的类：

```
public class E1 : Entity
{
    public E1
   {
   }
}

public class E2 : Entity, IRelatable<E1>
{
    public E2
    {
    }

    public E1 RelatedEntity { get; set; }

    public void RelateTo()
    {
        // To some code here ....
    }    
} 
```

现在，我想获得 E2 的相关实体，如下所示：

```
public void DoReflcetion(Entity ent)
{
   var ent2 = (ent as IRelatable<>).RelatedEntity;
} 
```

任何想法如何做到这一点？

谢谢你，暗里

* * *

答：谢谢您的回答。B. 问题是我想从这样的非泛型类访问 RelatedEntity：

```
public class SomeClass
{
    public void DoSomething(IRelatable<> rel)
    {
        rel.RelateTo();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:36:17.083

你可以这样做：

```
public class SomeClass<T> where T: Entity
{
    public void DoSomething(IRelatable<T> rel)
    {
        T relatedTo = rel.RelatedEntity;
        // ...
    }
} 
```

尽管我建议使用更简单的模型来表示实体之间的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:36:29.983

如果要从非泛型类访问 RelatedEntity，则创建泛型方法

```
public class SomeClass
{
    public void DoSomething<T>(IRelatable<T> rel)
        where T : Entity
    {
        T relatedTo = rel.RelatedEntity;
        // ...        
    }
} 
```

T 的类型将从参数类型推断：

```
SomeClass someClass = new SomeClass();
E2 e2 = new E2() { RelatedEntity = new E1() };
s.DoSomething(e2); 
```

# facebook - 如何向用户的朋友发送电子邮件？

> ID：10208286
> 
> 赞同：1
> 
> 时间：2012-04-18T11:21:16.577
> 
> 标签：facebook, email, facebook-graph-api

我在几款 Zynga 游戏中看到，它们允许你从 Facebook 邀请朋友，并且邀请会直接发送到你的电子邮件。

有什么办法可以做到这一点？我可以获取用户朋友的电子邮件地址吗？我已经尝试了具有扩展权限的默认 Graph API 调用，但我无法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:27:17.027

参考：[开发 Facebook 身份验证](https://developers.facebook.com/docs/authentication/permissions/#user_friends_perms)

![在此处输入图像描述](../Images/f729024edcde64ae8d1e06f3aa75ee60.png)

根据上述，即使通过扩展权限，您也无法检索朋友的电子邮件详细信息。

但是，您始终可以使用[facebook apprequest向用户发送请求](https://developers.facebook.com/docs/reference/dialogs/requests/)

这就是apprequests的工作方式

```
FB.init({
  appId  : 'YOUR_APP_ID',
  frictionlessRequests : true,
}); 
```

希望这可以帮助

# php - 仅替换字符串的一个特殊部分中的字符

> ID：10208287
> 
> 赞同：1
> 
> 时间：2012-04-18T11:21:16.623
> 
> 标签：php

当我有一个字符串时：

```
$string = 'word1="abc.3" word2="xyz.3"'; 
```

如何在 xyz in 之后用逗号替换点并`xyz.3`在 abc in 之后保留他`abc.3`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:30:23.983

您提供了一个示例，但没有说明何时应修改内容以及何时应保持不变。解决方案可能很简单：

```
str_replace("xyz.", "xyz", $input); 
```

但是如果你明确想要一个更明确的匹配，比如在句号之后需要一个数字，那么：

```
preg_replace("/xyz\.([0-9])+/", 'xyz\${1}', $input); 
```

（未测试）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:33:06.180

这取决于替换与否的标准。您可以将字符串拆分为多个部分（使用explode 或preg_split），然后在某些部分替换点（例如str_replace），然后将它们连接在一起（implode）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T11:33:15.180

怎么样：

```
$string = 'word1="abc.3" word2="xyz.3"';
echo preg_replace('/\.([^.]+)$/', ',$1', $string); 
```

**输出：**

```
word1="abc.3" word2="xyz,3" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T11:24:49.937

类似的东西（对不起，我用javascript做了这个，没有看到PHP标签）。

```
var stringWithPoint = 'word1="abc.3" word2="xyz.3"';
var nopoint = stringWithPoint.replace('xyz.3', 'xyz3'); 
```

在php中

```
$str = 'word1="abc.3" word2="xyz.3"';

echo str_replace('xyz.3', 'xyz3', $str); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T11:25:43.970

您可以使用 PHP 的字符串函数来删除点 (.)。

```
str_replace(".", "", $word2); 
```

# ruby-on-rails - 除了最后 2 条 ruby on rails 之外，我如何获取所有记录？

> ID：10208290
> 
> 赞同：0
> 
> 时间：2012-04-18T11:21:26.637
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

致力于显示和隐藏评论，默认情况下我显示 2 个最新的：

### 辅助方法：

```
 def comments(micropost_id)
        Comment.where(:micropost_id => micropost_id).limit(2).order("created_at DESC").reverse
  end 
```

2条评论将以这种方式显示：

> 评论 1（10 小时前发送）
> 
> 评论 2（一小时前发送）

我有一个显示所有评论的可点击按钮，它将该特定微博的所有评论添加到列表中。这很好，除了我需要除 2 条最新的评论之外的所有评论。

使用`offset(2)`带走了前 2 条评论。我基本上需要做相反的事情。所以想知道是否有什么我可以链接到`offset`方法上来实现这一点，或者是否有专门的方法来做相反的事情`.offset()`？

提前致谢亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:28:41.033

我会从数据库中获取所有注释并丢弃应用程序代码中的最后两条。这使得查询变得非常简单和高效。数据库传统上是最难扩展的组件，因此您不应对其造成任何不必要的负载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:29:57.260

您可以按照 sergio 的建议进行操作，在从数据库加载它们后将最后两个切掉，或者您可以反转查询中的 order 子句，偏移两个然后反转结果。

# windows-phone-7 - 如何获得 Windows 手机“芒果”的虚拟内存

> ID：10208291
> 
> 赞同：0
> 
> 时间：2012-04-18T11:21:28.590
> 
> 标签：windows-phone-7

在我的应用程序中，我想找出设备的虚拟内存（windows phone 'mango'）

使用了多少，免费的有多少

（目前我只能获取手机内存，但它没有显示免费、已使用或任何其他信息）

请帮忙

斯内哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:44:08.517

系统内存与您无关。

使用 Microsoft.Phone.Info.DeviceStatus.ApplicationCurrentMemoryUsage 查找您当前的使用情况，使用 Microsoft.Phone.Info.DeviceExtendedProperties.GetValue("ApplicationWorkingSetLimit") 查找限制。[http://msdn.microsoft.com/en-us/library/ff707583%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/ff707583%28v=vs.92%29.aspx) 如果电流超过限制，您的应用程序将被终止。这就是你所需要担心的。

或者，也许您考虑的不是内存而是磁盘空间？您只能将文件存储在 IsolatedStorage， http: [//msdn.microsoft.com/en-us/library/ff402541%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/ff402541%28v=vs.92%29.aspx)

像 System.IO.IsolatedStorage.IsolatedStorageFile.AvailableFreeSpace

# inversion-of-control - 如何在多台机器上分配 IOC/DI 组件？

> ID：10208292
> 
> 赞同：1
> 
> 时间：2012-04-18T11:21:33.073
> 
> 标签：inversion-of-control, structuremap, distribution

我正在维护一个大型应用程序，它大量使用 StructureMap 来加载它的组件。我正在尝试拆分组件，以便它们可以在通过网络连接的不同机器上运行。它们已经在不同的线程中运行，但在同一个进程中（使用单个 StructureMap 容器）。

我不知道该怎么做。是否可以让 StructureMap 自动为所有组件创建代理并通过网络而不是本地使用它们？需要对组件进行哪些更改才能使其可分发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:35:21.647

有趣的！理论上我想这是可能的，真正的潜在问题是如果你真的想这样做，我们正在谈论一个重大的架构变化。

免责声明：我不知道您对 WCF 有多熟悉，我将尝试非常粗略地解释一下我认为它是如何可能的，但请考虑，如果我们谈论的是通过网络进行的这种通信，您想使用 WCF。

*   为要通过网络使用的组件定义每个接口作为 WCF 服务合同
*   用服务包装你的组件并将它们托管在某个地方/以某种方式
*   为这些服务编写客户端，让它们实现您的组件接口
*   当代码需要一个组件时，让 StructureMap 注入您的客户端

虽然听起来很简单，但相关的复杂性隐藏在这些步骤背后。举几个我脑海中的潜在问题：您要将哪些组件包装到服务中？包装它们有多容易？你打算在哪里接待他们，怎么办？安全呢？您的日志记录机制是否需要调整？

# android - 用于 Netfilter 和 iptables 的 Android 内核 .config 文件

> ID：10208298
> 
> 赞同：1
> 
> 时间：2012-04-18T11:21:44.660
> 
> 标签：android, linux-kernel, iptables, netfilter

最新的 android 源（android 4.0.1）带有 Iptables 1.4.11。

为了启用 iptables 和 Netfilter，2.6..35 内核应该是什么样子？

我搜索了一些网站并获得了以下配置。我需要做一些改变吗？甚至需要 XTABLES 吗？我需要使用 iptable nat 规则，其余的不是优先事项。请查看此配置（下面仅给出网络部分）并建议：

```
#
# Core Netfilter Configuration
#
CONFIG_NETFILTER_NETLINK=y
CONFIG_NETFILTER_NETLINK_QUEUE=y
CONFIG_NETFILTER_NETLINK_LOG=y
CONFIG_NF_CONNTRACK=y
CONFIG_NF_CT_ACCT=y
CONFIG_NF_CONNTRACK_MARK=y
CONFIG_NF_CONNTRACK_EVENTS=y
CONFIG_NF_CT_PROTO_DCCP=y
CONFIG_NF_CT_PROTO_GRE=y
CONFIG_NF_CT_PROTO_SCTP=y
CONFIG_NF_CT_PROTO_UDPLITE=y
CONFIG_NF_CONNTRACK_AMANDA=y
CONFIG_NF_CONNTRACK_FTP=y
CONFIG_NF_CONNTRACK_H323=y
CONFIG_NF_CONNTRACK_IRC=y
CONFIG_NF_CONNTRACK_NETBIOS_NS=y
CONFIG_NF_CONNTRACK_PPTP=y
CONFIG_NF_CONNTRACK_SANE=y
CONFIG_NF_CONNTRACK_SIP=y
CONFIG_NF_CONNTRACK_TFTP=y
CONFIG_NF_CT_NETLINK=y
CONFIG_NETFILTER_XTABLES=y
CONFIG_NETFILTER_XT_TARGET_CLASSIFY=y
# CONFIG_NETFILTER_XT_TARGET_CONNMARK is not set
# CONFIG_NETFILTER_XT_TARGET_DSCP is not set
CONFIG_NETFILTER_XT_TARGET_MARK=y
CONFIG_NETFILTER_XT_TARGET_NFQUEUE=y
CONFIG_NETFILTER_XT_TARGET_NFLOG=y
# CONFIG_NETFILTER_XT_TARGET_NOTRACK is not set
CONFIG_NETFILTER_XT_TARGET_RATEEST=y
# CONFIG_NETFILTER_XT_TARGET_TRACE is not set
CONFIG_NETFILTER_XT_TARGET_TCPMSS=y
# CONFIG_NETFILTER_XT_TARGET_TCPOPTSTRIP is not set
CONFIG_NETFILTER_XT_MATCH_COMMENT=y
CONFIG_NETFILTER_XT_MATCH_CONNBYTES=y
CONFIG_NETFILTER_XT_MATCH_CONNLIMIT=y
CONFIG_NETFILTER_XT_MATCH_CONNMARK=y
CONFIG_NETFILTER_XT_MATCH_CONNTRACK=y
CONFIG_NETFILTER_XT_MATCH_DCCP=y
CONFIG_NETFILTER_XT_MATCH_DSCP=y
CONFIG_NETFILTER_XT_MATCH_ESP=y
CONFIG_NETFILTER_XT_MATCH_HELPER=y
CONFIG_NETFILTER_XT_MATCH_IPRANGE=y
CONFIG_NETFILTER_XT_MATCH_LENGTH=y
CONFIG_NETFILTER_XT_MATCH_LIMIT=y
CONFIG_NETFILTER_XT_MATCH_MAC=y
CONFIG_NETFILTER_XT_MATCH_MARK=y
CONFIG_NETFILTER_XT_MATCH_OWNER=y
CONFIG_NETFILTER_XT_MATCH_POLICY=y
CONFIG_NETFILTER_XT_MATCH_MULTIPORT=y
CONFIG_NETFILTER_XT_MATCH_PKTTYPE=y
CONFIG_NETFILTER_XT_MATCH_QUOTA=y
CONFIG_NETFILTER_XT_MATCH_RATEEST=y
CONFIG_NETFILTER_XT_MATCH_REALM=y
CONFIG_NETFILTER_XT_MATCH_SCTP=y
CONFIG_NETFILTER_XT_MATCH_STATE=y
CONFIG_NETFILTER_XT_MATCH_STATISTIC=y
CONFIG_NETFILTER_XT_MATCH_STRING=y
CONFIG_NETFILTER_XT_MATCH_TCPMSS=y
CONFIG_NETFILTER_XT_MATCH_TIME=y
CONFIG_NETFILTER_XT_MATCH_U32=y
CONFIG_NETFILTER_XT_MATCH_HASHLIMIT=y

#
# IP: Netfilter Configuration
#
CONFIG_NF_CONNTRACK_IPV4=y
CONFIG_NF_CONNTRACK_PROC_COMPAT=y
CONFIG_IP_NF_QUEUE=y
CONFIG_IP_NF_IPTABLES=y
CONFIG_IP_NF_MATCH_RECENT=y
CONFIG_IP_NF_MATCH_ECN=y
CONFIG_IP_NF_MATCH_AH=y
CONFIG_IP_NF_MATCH_TTL=y
CONFIG_IP_NF_MATCH_ADDRTYPE=y
CONFIG_IP_NF_FILTER=y
CONFIG_IP_NF_TARGET_REJECT=y
CONFIG_IP_NF_TARGET_LOG=y
CONFIG_IP_NF_TARGET_ULOG=y
CONFIG_NF_NAT=y
CONFIG_NF_NAT_NEEDED=y
CONFIG_IP_NF_TARGET_MASQUERADE=y
CONFIG_IP_NF_TARGET_REDIRECT=y
CONFIG_IP_NF_TARGET_NETMAP=y
CONFIG_NF_NAT_SNMP_BASIC=y
CONFIG_NF_NAT_PROTO_DCCP=y
CONFIG_NF_NAT_PROTO_GRE=y
CONFIG_NF_NAT_PROTO_UDPLITE=y
CONFIG_NF_NAT_PROTO_SCTP=y
CONFIG_NF_NAT_FTP=y
CONFIG_NF_NAT_IRC=y
CONFIG_NF_NAT_TFTP=y
CONFIG_NF_NAT_AMANDA=y
CONFIG_NF_NAT_PPTP=y
CONFIG_NF_NAT_H323=y
CONFIG_NF_NAT_SIP=y
CONFIG_IP_NF_MANGLE=y
CONFIG_IP_NF_TARGET_ECN=y
CONFIG_IP_NF_TARGET_TTL=y
CONFIG_IP_NF_TARGET_CLUSTERIP=y
CONFIG_IP_NF_RAW=y
CONFIG_IP_NF_ARPTABLES=y
CONFIG_IP_NF_ARPFILTER=y
CONFIG_IP_NF_ARP_MANGLE=y
# CONFIG_IP_DCCP is not set
# CONFIG_IP_SCTP is not set
# CONFIG_TIPC is not set
# CONFIG_ATM is not set
# CONFIG_BRIDGE is not set
# CONFIG_VLAN_8021Q is not set
# CONFIG_DECNET is not set
# CONFIG_LLC2 is not set
# CONFIG_IPX is not set
# CONFIG_ATALK is not set
# CONFIG_X25 is not set
# CONFIG_LAPB is not set
# CONFIG_ECONET is not set
# CONFIG_WAN_ROUTER is not set
# CONFIG_NET_SCHED is not set
CONFIG_NET_CLS_ROUTE=y

#
# Network testing
#
# CONFIG_NET_PKTGEN is not set
# CONFIG_HAMRADIO is not set
# CONFIG_CAN is not set
# CONFIG_IRDA is not set
CONFIG_BT=y
CONFIG_BT_L2CAP=y
CONFIG_BT_SCO=y
CONFIG_BT_RFCOMM=y
CONFIG_BT_RFCOMM_TTY=y
CONFIG_BT_BNEP=y
# CONFIG_BT_BNEP_MC_FILTER is not set
# CONFIG_BT_BNEP_PROTO_FILTER is not set
CONFIG_BT_HIDP=y 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-23T14:04:16.623

对于 IP 表，我将以下内容添加到我的 linux 内核配置中：

```
CONFIG_NETFILTER=y
CONFIG_NF_CONNTRACK=m
CONFIG_NETFILTER_XT_TARGET_MASQUERADE=m
CONFIG_IP_NF_IPTABLES=y
CONFIG_IP_NF_FILTER=y
CONFIG_IP_NF_NAT=m 
```

# oop - toString 返回所有对象的 getter 方法

> ID：10208302
> 
> 赞同：0
> 
> 时间：2012-04-18T11:22:06.490
> 
> 标签：oop, coldfusion, tostring, object-to-string

我正在使用 ColdFusion，但我很想知道其他语言如何处理这个问题。

有没有更好的方法来返回所有对象变量（getter），而无需在对象上编写大量的 toString() 方法。

```
variables.oCity = createObject("component", "_lbr._core._locations.city").init();

variables.oCity.setName(request.parameters.sCityName);
variables.oCity.setCountryID(request.parameters.nLocationCountryID);

if(request.parameters.nStateID eq 0){
    variables.stArgs = {};
    variables.stArgs.sState = request.parameters.sLocationCountry;
    variables.stArgs.nCheckCountryID = request.parameters.nCountryID;
    variables.oCity.setStateID = application.stObj.oLocationBusiness.getState(argumentCollection=variables.stArgs).getStateID();
} else {
    variables.oCity.setStateID = request.parameters.nStateID;
} 
```

我的代码看起来像这样。我想要的是输出我刚刚设置的所有内容（以及对象默认的任何内容），而无需编写一个巨大的 toString 来连接所有可能看起来像这样的变量：

> 对象：StateID = 12，Name = "Argentina"，CountryID = 32，CityID = 44

我的心告诉我这不太可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:43:33.607

这取决于您如何在对象中存储变量。我通常将所有变量存储在一个`variables.instance`结构中。然后我创建一个`get()`简单地返回`variables.instance`结构的：

```
public struct function get(){
    return Duplicate(variables.instance);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:20:40.953

如果您在 CF9+ 中使用`cfproperty`, and `accessor=true`or ，则 cfc 的转储将返回所有不带.`persistent=true``getter=false`

# css - -webkit-transform 的闪烁/渲染问题

> ID：10208312
> 
> 赞同：1
> 
> 时间：2012-04-18T11:22:49.497
> 
> 标签：css, webkit, css-transforms

我遇到了一个奇怪的问题`-webkit-transform`。如果我使用`perspective`and`rotateX`使元素“向上翻转”，如果元素足够高，它会闪烁或完全不渲染超过某个角度。

我设置了一个[jsFiddle 演示](http://jsfiddle.net/HLQjP/1/)来说明这个问题。左右移动鼠标来旋转矩形。

*   当元素高度为 400 像素时，一切似乎都正常。

*   单击“4000”使元素高 4000 像素。文字在一定范围内**停止更新，****呈现闪烁**。

*   单击“40000”使元素高 40000 像素。它在小角度渲染良好，但**在大约 80 度时完全消失**。

这里发生了什么？有解决方法还是我应该提交 WebKit 错误？

（注意：我在 OS X 上的 Safari 和 Chrome 中都看到了这种行为。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:00:04.177

此代码的问题在于`CSS3` `perspective`属性。当元素高度为 4000px 或更高时，它会在靠近屏幕时消失，因为它只有 500px 距离（使用`perspective`属性定义。
那里，如果元素更高，则元素应该更远。

我做了一些 if 语句来根据元素高度获得不同的观点：

```
if (document.getElementById("m2").offsetHeight == 400) {
    document.getElementById("m2").style.webkitTransform = "perspective(500) rotateX(" + (e.clientX / 5) + "deg)";
}

if (document.getElementById("m2").offsetHeight == 4000) {
    document.getElementById("m2").style.webkitTransform = "perspective(5000) rotateX(" + (e.clientX / 5) + "deg)";
}

if (document.getElementById("m2").offsetHeight == 40000) {
    document.getElementById("m2").style.webkitTransform = "perspective(50000) rotateX(" + (e.clientX / 5) + "deg)";
} 
```

# eclipse - Eclipse 自动构建输出与 Maven 命令行构建输出交互

> ID：10208313
> 
> 赞同：10
> 
> 时间：2012-04-18T11:22:52.833
> 
> 标签：eclipse, maven, maven-3, m2eclipse

由于两者都使用目标目录，Eclipse 的构建输出有时会干扰在命令行运行的 mvn 构建的输出。

分离两个输出的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T08:03:04.720

将以下内容插入您的 pom.xml。Eclipse 的“m2e.version”属性将激活以下配置文件，该配置文件会更改 Eclipse 构建的位置

```
<profiles>
  <profile>
    <id>IDE</id>
    <activation>
      <property>
        <name>m2e.version</name>
      </property>
    </activation>
    <build>
      <!-- Put the IDE's build output in a folder other than target, so that IDE builds don't interact with Maven builds -->
      <directory>target-ide</directory>
    </build>
  </profile>
</profiles> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:44:57.150

官方方式在这里介绍：
[http ://wiki.eclipse.org/M2E_FAQ#How_to_configure_Maven_project_to_use_separate_output_folders_in_Eclipse](http://wiki.eclipse.org/M2E_FAQ#How_to_configure_Maven_project_to_use_separate_output_folders_in_Eclipse)

我个人不会做这样的事情。通常我基本上禁用 Eclipse 中的自动构建，因为无论如何我都是从控制台进行的大多数构建。但如果你真的想要它，你就在这里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-05T15:03:40.850

如果您使用 maven-eclipse-plugin 而不是 M2Eclipse，这里是您想要更改 Eclipse 输出目录的定义：

```
<plugin>
  <artifactId>maven-eclipse-plugin</artifactId>
  <version>2.9</version>
  <configuration>
    <buildOutputDirectory>target-eclipse/classes</buildOutputDirectory>
    <downloadSources>true</downloadSources>
    <downloadJavadocs>true</downloadJavadocs>
  </configuration>
</plugin> 
```

# c# - 接口实现的“转到定义”等效快捷方式？

> ID：10208316
> 
> 赞同：3
> 
> 时间：2012-04-18T11:23:09.487
> 
> 标签：c#, visual-studio, intellisense, interface-implementation

> **可能重复：**
> [如何快速找到接口方法的实现？](https://stackoverflow.com/questions/1261567/how-do-you-quickly-find-the-implementations-of-an-interfaces-method)
> [转到具体类型的定义](https://stackoverflow.com/questions/4234796/go-to-definition-on-concrete-type)

除非您想快速跳转到函数实现，否则对接口进行编码非常有用。

在过去的好日子里，F12（转到定义）会直接带您到那里，但当然现在它只是带您到接口定义，而不是实现。

我很欣赏可能有多种实现，但有没有比手动查找文件或 Ctrl-Shift-F 搜索所有引用更快的方法，即使这也包括每个调用。“查找所有参考”给出了相同的结果。

只是想知道是否有人有一个方便的方法/宏？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T11:37:02.770

使用[ReSharper](http://www.jetbrains.com/resharper/)。那里是 Ctrl+F12。你会惊讶于它的强大...

顺便说一句，它被称为“Go to Implementation”，而不是“Go to Declaration”。

# delphi - 模块“rtl160.bpl”中地址 50043a45 的访问冲突。读取地址 00000000

> ID：10208317
> 
> 赞同：2
> 
> 时间：2012-04-18T11:23:09.587
> 
> 标签：delphi, delphi-xe2

刚刚更新了delphi xe2。

delphi 在启动时崩溃并显示错误消息：

> 模块“rtl160.bpl”中地址 50043a45 的访问冲突。读取地址 00000000

尝试重新安装更新3，没有帮助。看了[这里](https://forums.embarcadero.com/thread.jspa?messageID=450413#450413)，没有任何反应。向 Embarcadero 报告，没有回应。

关于如何解决这个问题的任何建议？半天时间去垃圾桶了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T13:36:35.320

试试这三件事：

1.  为 $(delphi)\bin\bde.exe 创建一个快捷方式，其中 $(Delphi) 是 C:\Program Files\Embarcadero\RAD Studio\9.0\ 通常

2.  修改启动产品的快捷方式并将 -rfoo 添加到末尾。您修改后的快捷方式将如下所示：

    > "C:\Program Files (x86)\Embarcadero\RAD Studio\9.0\bin\bds.exe" -rfoo

3.  如果您使用的是 Windows 7 或 Vista，请右键单击并以管理员身份运行

工作一个小时后，例外又回来了。去他妈的，我要把这个 IDE 扔进垃圾箱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T15:18:04.723

试试这 3 件事（第 2 件事与之前的评论相同）：

1.  为建立一个快捷方式，通常`$(delphi)\bin\bde.exe`在哪里`$(Delphi)``C:\Program Files\Embarcadero\RAD Studio\9.0\`

2.  修改启动产品的快捷方式并将 -rfoo 添加到末尾。您修改后的快捷方式将如下所示： `"C:\Program Files (x86)\Embarcadero\RAD Studio\9.0\bin\bds.exe" -rfoo`

3.  启动快捷方式一次。使用注册表查找`HKEY_CURRENT\Software\Enbarcadero\foo`. 并全部替换`HKEY_CURRENT\Software\Enbarcadero\BDS`为`HKEY_CURRENT\Software\Enbarcadero\foo` （您可以将 BDS 重命名为 BDS_Old，在 foo 之后重命名为 BDS）。

    之后一切正常，无需捷径

# asp.net - 使用多个开源许可证的商业 Web 应用程序是否应该有关于/通知页面？

> ID：10208320
> 
> 赞同：2
> 
> 时间：2012-04-18T11:23:26.553
> 
> 标签：asp.net, open-source, licensing

Web 应用程序是否应该有一个通知/关于页面，详细说明我们正在使用的组件/库以及相关的许可证？

一些许可证，例如 LGPL（由 SevenZipSharp 使用）有一个合并的作品条款：

lgpl V3

> 1.  联合作品。您可以根据您选择的条款传达组合作品，如果您还执行以下每一项操作，那么这些条款实际上不会限制对组合作品中包含的库部分的修改以及用于调试此类修改的逆向工程：
> 
> a) 在合并作品的每份副本中给出醒目的通知，说明其中使用了库，并且本许可涵盖了库及其使用。b) 将 GNU GPL 和本许可文档的副本随附在组合作品中。c) 对于在执行期间显示版权声明的组合作品，在这些声明中包括图书馆的版权声明，以及将用户引导至 GNU GPL 和本许可文档副本的参考。d) 执行以下操作之一： 0) 根据本许可证的条款，以适合用户的形式并在允许用户将应用程序与修改后的应用程序重新组合或重新链接的条件下，传送最小对应源代码和对应的应用程序代码链接版本的版本以生成修改后的组合作品，以 GNU GPL 第 6 节规定的方式传送相应的源代码。1) 使用合适的共享库机制与库链接。一种合适的机制是（a）在运行时使用用户计算机系统上已经存在的库的副本，并且（b）将与与链接版本接口兼容的库的修改版本正常运行。e) 提供安装信息，但前提是您需要根据 GNU GPL 第 6 节提供此类信息，并且仅在安装和执行通过重新组合生成的组合作品的修改版本所必需的范围内提供此类信息或使用链接版本的修改版本重新链接应用程序。（如果您使用选项 4d0，安装信息必须伴随最小对应源和对应应用程序代码。如果您使用选项 4d1，则必须按照 GNU GPL 第 6 节指定的方式提供安装信息，以传达相应的源代码。）

lgpl V2.1

> 您必须在每份作品的副本中显眼地声明其中使用了库，并且本许可涵盖了库及其使用。您必须提供本许可证的副本。如果执行期间的作品显示版权声明，您必须在其中包含库的版权声明，以及将用户引导至本许可副本的参考。此外，您必须执行以下操作之一：
> 
> a) 随作品附上图书馆的完整相应机器可读源代码，包括作品中使用的任何更改（必须根据上述第 1 节和第 2 节分发）；并且，如果作品是与图书馆链接的可执行文件，则将完整的机器可读“使用图书馆的作品”作为目标代码和/或源代码，以便用户可以修改图书馆，然后重新链接以生成包含修改后的库的修改后的可执行文件。（据了解，更改库中定义文件内容的用户不一定能够重新编译应用程序以使用修改后的定义。） b) 使用合适的共享库机制与库链接。一种合适的机制是（1）在运行时使用用户计算机系统上已经存在的库的副本，而不是将库函数复制到可执行文件中，并且（2）将使用库的修改版本正常运行，如果用户安装了一个，只要修改后的版本与制作作品的版本界面兼容。c) 为作品附上至少三年有效的书面报价，向同一用户提供上述第 6a 小节中规定的材料，收费不超过执行此分发的成本。d) 如果通过提供从指定地点获取副本的方式分发作品，则提供从同一地点复制上述指定材料的同等访问权限。

许多其他许可具有关于在您的应用程序或组合作品中显示通知的类似条款。

这是否意味着 Web 应用程序需要一个关于使用的页面详细信息组件？我找不到任何这样做的网站示例，尽管很多网站经常使用开源库？

我猜网站/应用程序当前使用的退出条款是谁会知道开源组件是否正在服务器端的组合工作/网络应用程序中使用，但这不是借口，特别是如果网络应用程序曾经被审计过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:28:01.200

仅仅因为别人做错了，并没有给你做错的权利。

如果图书馆的许可证规定您的应用程序应该包含一个具有适当学分的页面，那么这就是您应该做的。

**编辑：**

（这是我对许可协议的解释，可能有误）。

我相信库和 Web 应用程序之间存在（相当大的）差异。上面发布的许可协议似乎是针对**其他库**的，而不是针对**最终用户 Web 应用程序的**。我相信，如果您从 SevenZipSharp 库中创建自己的库，则上述许可协议中的引用适用 - 并迫使您也必须在 LGPL 下分发您的库。但是，如果您在面向用户而不是面向开发人员的应用程序中使用 SevenZipSharp 库，则许可证中的上述引用不适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T11:40:40.270

很抱歉重新提出这个相当老的问题，但显然没有公认的结论。作为免责声明，IANAL，因此接下来的所有内容都是外行对如何将此许可证应用于此主题的解释。我真的在寻找澄清，确认或证明我错了的人！

我目前的解释是，正在运行的 Web 应用程序不会将自己“分发”给每个冲浪者，它只是生成输出，然后在冲浪者的浏览器中呈现。

因此，Web 应用程序将被要求在其自己的文档/安装说明/管理员/操作员手册中包含版权/许可声明 - 这是针对 Web 应用程序的用户，实际上是安装、配置和操作它的人。

许可证通常不涵盖应用程序生成的 OUTPUT，这是访问应用程序生成的网页的冲浪者所消费的内容。因此，生成的输出中不必包含版权声明，即。网页。

然而，在交互式 Web 应用程序中，“应用程序”和“生成的输出”之间的界限并不是那么清晰和清晰，如果部分应用程序代码包含在交付的网页中（如 Javascript 应用程序），甚至可能不再存在）。所以我不确定我的解释是否成立，或者它是否完全有效。

# jquery - ajax调用后重新初始化jQuery函数

> ID：10208325
> 
> 赞同：0
> 
> 时间：2012-04-18T11:23:38.120
> 
> 标签：jquery, ajax

我目前正在使用一个应用 GreyScale 悬停效果的 jQuery 插件。该插件完美运行。

插件所在的页面使用基于 ajax 的过滤。因此，以下代码仅在初始加载时才能正常工作。我需要能够重新初始化每个过滤器上的两个元素。

我一直在尝试`$(document).on`使用 jQuery 1.7.2 但无法使其正常工作..

```
$(function() {
    // fade in the grayscaled images to avoid visual jump
    $('.colour img').hide().fadeIn(1000);
  });

  // user window.load to ensure images have been loaded
  $(window).load(function () {
    $('.colour img').greyScale({
      // call the plugin with non-defult fadeTime (default: 400ms)
      fadeTime: 500,
      reverse: false
    });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:27:34.267

你不能把它放在一个函数中，在文档中调用那个函数，然后在你的ajax调用之后再次调用它吗？就像是：

```
function YourFunction() {
    $('.colour img').greyScale({
    // call the plugin with non-defult fadeTime (default: 400ms)
       fadeTime: 500,
      reverse: false
    });
} 
```

然后在准备好的文档上调用它，例如：

```
$(function () {
    YourFunction();
}); 
```

然后在你的 AJAX 调用的回调中`YourFunction()`再次调用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:28:09.423

你可以有两个函数，然后在你需要的时候调用它们

```
function x()
{
   // fade in the grayscaled images to avoid visual jump
    $('.colour img').hide().fadeIn(1000);
}

function y()
{
   $('.colour img').greyScale({
      // call the plugin with non-defult fadeTime (default: 400ms)
      fadeTime: 500,
      reverse: false
} 
```

在初始加载和 ajax 调用之后调用它们

# r - 使用 cast() 转换 data.frame

> ID：10208326
> 
> 赞同：4
> 
> 时间：2012-04-18T11:23:40.177
> 
> 标签：r, dataframe

给定一个这样的data.frame

```
> x <- data.frame(A=c('a','a','b','b'), B=c(1,2,3,4))
> x
  A B
1 a 1
2 a 2
3 b 3
4 b 4 
```

我想把它变成

```
 a b
1 1 3
2 2 4 
```

这应该是一个简单的操作，但我不知道该怎么做。我最接近的是`cast(x, . ~ A)`至少不会因“选择未定义的列”而失败，但它仍然不是我想要的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:57:38.410

像这样：

```
data.frame( tapply(x$B, x$A, list)) 
```

结果：

```
 a b
1 1 3
2 2 4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T16:52:00.603

我最近也一直在努力理解`cast`。您想要的输出显示值`1`和`3`在同一行。但是您的输入并未提供该信息。添加一`id`列解决了这个问题。

```
library(reshape2)

x <- data.frame(id=c(1, 2, 1, 2), A=c('a', 'a', 'b', 'b'), B=c(1, 2, 3, 4))

dcast(x, id ~ A, value.var="B")
#   id a b
# 1  1 1 3
# 2  2 2 4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T12:11:50.943

如果你想保持 B 的值与 x 中的顺序相同，你可以试试这个：

```
data.frame(split(x$B, x$A)) 
```

# c# - 为什么迭代 GetConsumingEnumerable() 不能完全清空底层阻塞集合

> ID：10208330
> 
> 赞同：18
> 
> 时间：2012-04-18T11:23:48.867
> 
> 标签：c#, .net, wpf, task-parallel-library, blockingcollection

在尝试创建一个简单的管道时`BlockingCollection<T>`，我使用 Task Parallel Library 遇到了一个可量化和可重复的问题`ConcurrentQueue<T>`。`GetConsumingEnumerable`

简而言之，从一个线程将条目添加到默认值`BlockingCollection<T>`（在引擎盖下依赖于 a `ConcurrentQueue<T>`）并不能保证它们会`BlockingCollection<T>`从另一个调用该`GetConsumingEnumerable()`方法的线程中弹出。

我创建了一个非常简单的 Winforms 应用程序来重现/模拟它，它只是将整数打印到屏幕上。

*   `Timer1`负责排队工作项......它使用一个并发字典`_tracker`，以便它知道它已经添加到阻塞集合中的内容。
*   `Timer2`只是记录`BlockingCollection`&的计数状态`_tracker`
*   START 按钮启动 a `Paralell.ForEach`，它简单地遍历阻塞集合`GetConsumingEnumerable()`并开始将它们打印到第二个列表框。
*   STOP 按钮停止`Timer1`阻止更多条目被添加到阻塞集合中。

```
public partial class Form1 : Form
{
    private int Counter = 0;
    private BlockingCollection<int> _entries;
    private ConcurrentDictionary<int, int> _tracker;
    private CancellationTokenSource _tokenSource;
    private TaskFactory _factory;

    public Form1()
    {
        _entries = new BlockingCollection<int>();
        _tracker = new ConcurrentDictionary<int, int>();
        _tokenSource = new CancellationTokenSource();
        _factory = new TaskFactory(); 
        InitializeComponent();
    }

    private void timer1_Tick(object sender, EventArgs e)
    { //ADDING TIMER -> LISTBOX 1
        for(var i = 0; i < 3; i++,Counter++)
        {
            if (_tracker.TryAdd(Counter, Counter))
            _entries.Add(Counter);
            listBox1.Items.Add(string.Format("Adding {0}", Counter));
        }
    }

    private void timer2_Tick_1(object sender, EventArgs e)
    { //LOGGING TIMER -> LIST BOX 3
        listBox3.Items.Add(string.Format("Tracker Count : {0} / Entries Count : {1}", _tracker.Count, _entries.Count));
    }

    private void button1_Click(object sender, EventArgs e)
    { //START BUTTON -> LOGS TO LIST BOX 2

        var options = new ParallelOptions {
                                CancellationToken = _tokenSource.Token,
                                MaxDegreeOfParallelism = 1
                            };

        _factory.StartNew(() => { Parallel.ForEach(_entries.GetConsumingEnumerable(), options, DoWork); });

        timer1.Enabled = timer2.Enabled = true;
        timer1.Start();
        timer2.Start();
    }

    private void DoWork(int entry)
    {
        Thread.Sleep(1000); //Sleep for 1 second to simulate work being done.
        Invoke((MethodInvoker)(() => listBox2.Items.Add(string.Format("Processed {0}", entry))));
        int oldEntry;
        _tracker.TryRemove(entry, out oldEntry);
    }

    private void button2_Click(object sender, EventArgs e)
    { //STOP BUTTON
        timer1.Stop();
        timer1.Enabled = false;
    } 
```

以下是事件的顺序：

*   按开始
*   Timer1 滴答和 ListBox1 立即更新 3 条消息（添加 0、1、2）
*   ListBox2 随后更新了 3 条消息，间隔 1 秒
    *   处理 0
    *   处理 1
    *   处理 2
*   Timer1 滴答和 ListBox1 立即更新 3 条消息（添加 3、4、5）
*   ListBox2 用 2 条消息更新，间隔 1 秒
    *   处理 3
    *   处理 4
    *   **处理 5**未打印...似乎已经“丢失”
*   按 STOP 以防止计时器 1 添加更多消息
*   等等...“处理中 5”仍然没有出现

![缺少条目](../Images/757f7181d6e40993d9149c44654ce1f3.png)

您可以看到并发字典仍在跟踪 1 项尚未处理并随后从中删除`_tracker`

如果我再次按开始，则 timer1 开始添加更多 3 个条目，并行循环恢复活力，打印 5、6、7 和 8。

![在随后的项目被推到它后面后返回条目](../Images/40626453505b04f63935a3ffc85a4c24.png)

我完全不知道为什么会发生这种情况。再次调用 start 显然调用了一个 newtask，它调用了一个 Paralell foreach，并重新执行 GetConsumingEnumerable()，它神奇地找到了丢失的条目......我

**为什么`BlockingCollection.GetConsumingEnumerable()`不保证迭代添加到集合中的每个项目。**

**为什么添加更多条目随后会导致它“解开”并继续处理？**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-18T12:19:58.087

你不能`GetConsumingEnumerable()`在`Parallel.ForEach()`.

使用**`GetConsumingPartitioner`**来自[TPL 的附加功能](http://blogs.msdn.com/b/pfxteam/archive/2010/04/06/9990420.aspx)

在博文中，您还将得到一个解释为什么不能使用`GetConsumingEnumerable()`

> Parallel.ForEach 和 PLINQ 默认使用的分区算法使用分块来最小化同步成本：不是每个元素获取一次锁，而是获取锁，获取一组元素（一个块），然后释放锁。

即 Parallel.ForEach 等到它收到一组工作项后再继续。正是你的实验显示的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-24T18:50:03.387

从 .net 4.5 开始，您可以创建一个分区器，它一次只需要一个项目：

```
var partitioner = Partitioner.Create(jobsBatchesQ.queue.GetConsumingEnumerable(), EnumerablePartitionerOptions.NoBuffering);
Parallel.ForEach(partitioner, new ParallelOptions { MaxDegreeOfParallelism = (currentTask.ParallelLevel > 0 ? currentTask.ParallelLevel : 1) }, (batch, state) => {//do stuff} 
```

[https://msdn.microsoft.com/en-us/library/system.collections.concurrent.enumerablepartitioneroptions(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.collections.concurrent.enumerablepartitioneroptions(v=vs.110).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T12:10:50.570

我无法使用简单的控制台应用程序复制您的行为，而这些应用程序基本上做同样的事情（在 .Net 4.5 beta 上运行，这可能会有所作为）。但我认为发生这种情况的原因是`Parallel.ForEach()`试图通过将输入集合分成块来优化执行。并且使用您的可枚举，在您向集合中添加更多项目之前，无法创建一个块。有关详细信息，请参阅[MSDN 上](http://msdn.microsoft.com/en-us/library/dd997411.aspx)[*的 PLINQ 和 TPL 的自定义分区器*](http://msdn.microsoft.com/en-us/library/dd997411.aspx)。

要解决此问题，请不要使用`Parallel.ForEach()`. 如果您仍想并行处理这些项目，则可以`Task`在每次迭代中启动 a。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T06:00:42.910

为了清楚起见，我觉得我应该注意的是，如果您能够在执行 Parallel.foreach 之前调用 BlockingCollection 的 .CompleteAdding() 方法，那么您在上面描述的问题将不成问题。我已经多次将这两个对象一起使用，效果很好。

此外，您可以在调用 CompleteAdding() 后随时重新设置 BlockingCollection，以便在需要时添加更多项目 (_entries = new BlockingCollection();)

如果您多次单击开始和停止按钮，如下更改上面的点击事件代码将解决您缺少条目的问题并使其按预期工作：

```
private void button2_Click(object sender, EventArgs e)
{ //STOP BUTTON
    timer1.Stop();
    timer1.Enabled = false;
>>>>_entries.CompleteAdding();
>>>>_entries = new BlockingCollection<int>();
} 
```

# tcl - 带有 tcl 期望命令的 Iperf

> ID：10208335
> 
> 赞同：0
> 
> 时间：2012-04-18T11:24:21.643
> 
> 标签：tcl, expect

我想通过运行 tclscript（自动化）来运行 iperf 命令。要在另一台 PC (Linux) 中运行的 iperf 命令。我正在使用 tclexpect 来做同样的事情，要求是打开一个控制台并运行 iperf 命令。代码如下。

```
puts "\n Enter the port no : " 
gets stdin sprt

puts "\n Enter the display intervel (in sec) : "
gets stdin sint

global spawn_id
set timeout 40 

spawn telnet $ip
expect "login:"
send "$user\r"

set timeout 10

expect "Password:"
send "$password\r"

expect "$"
send "iperf -s -u -p $sprt -i $sint" 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:35:00.383

你快完成了。

像这样更改最后两行。

```
expect ".*$"
send "pwd\r" 
```

# node.js - Nodejs，mongodb - 使用 $nin 或 $in 作为对象 ID 或 _id

> ID：10208339
> 
> 赞同：7
> 
> 时间：2012-04-18T11:24:53.487
> 
> 标签：node.js, mongodb, object

我正在使用`Nodejs`，`mongodb`数据库。我们可以`$nin`这样 使用

```
Model.find({ uname : { $nin : ["sachin","saurav"] } }.... 
```

以上为法线元素之类的词`uname`和其他词。但是对于对象 ids(_id)，..

```
Model.find({_id : {$nin : ["6534767457dfgbyb23","wtvwt3wy5etvdh"] } } ... 
```

上面的行没有给出错误，它显示正确..

```
var ObjectID = require('mongodb').ObjectID;
var a = new ObjectID("sdfsdznfsdz");
var b=new ObjectID("sdfjwneufhq2rfwefsd");
Model.find({_id : { $nin : [a,b] } }... 
```

上面也没有给出错误...

问题是，我不能像 a,b,c,d 那样手动编写...

我必须以某种正确的格式将所有这些 a,b,c,d... 存储在某个变量中，并且必须这样做

```
Model.find({_id : {$nin : variable } } 
```

或者

```
Model.find({_id : {$nin : [variable] } } 
```

我试过这个

```
var string = a+","+b //this didnt work, error : invalid object id
var string = "nfw34qfhrs9"+","+"u89tgngnfdb"  //this also same error
var string = "\"jn4tr43r\""  +  "," + "\"ansfuw37fe\""  //this also same error 
```

我该怎么办？问题是，我应该得到所有项目，除了那些`_ids`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T11:39:23.137

$nin 在 mongo 中的工作方式是它需要一个值数组来检查。

代码： `var string = a+","+b`不使它成为一个有效的数组。当您创建具有值的字符串时`sdfsdznfsdz, u89tgngnfdb`

所以 $nin 将数组视为该值，而不是您尝试实现的方式。

做你想做的事情的解决方案是用这些值创建一个数组。

所以像：

```
var ids = new Array( new ObjectId("1124edcef241"), new ObjectId("56943decfeca845") );

// Dont put [ ] as a parameter. Just send a variable thats an array     
Model.find( {_id : { $nin : ids } } ); 
... 
```

以防您对数组有点模糊，我建议您阅读以下内容：

[http://www.w3schools.com/js/js_obj_array.asp](http://www.w3schools.com/js/js_obj_array.asp)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-18T13:55:27.210

尚无法发表评论，但只是想在此处添加`new ObjectID()`对我不起作用的内容，但是`new ObjectId()`（小写 d）确实有效。希望这可以帮助某人。

# asp.net - 在 HttpModule 中重用回发数据

> ID：10208340
> 
> 赞同：1
> 
> 时间：2012-04-18T11:24:54.313
> 
> 标签：asp.net, postback, httpmodule

我有一个自定义的 HttpModule，它可以处理用户是否需要支付发票。如果用户进行了回发，但在我的 HttpModule 的发票部分被“捕获”，我想在支付发票后重新发布用户进行的原始回发，因此用户不必开始超过。

例子：

1.  用户填写表单并将其提交给服务器
2.  HttpModule 识别用户有未付发票，并将用户重定向到支付页面
3.  用户支付账单
4.  第1点的原帖被转发，用户可以继续

我尝试在会话状态中保存 HttpContext（来自 HttpContext.Current）并将 HttpContext.Current 设置为会话中的值，当账单已支付时，但它不起作用。

HttpModule 中断正常流程后是否可以重用回发？

我的 HttpModule 看起来像这样： class UnpaidInvoiceHttpModule : IHttpModule { private HttpApplication cHttpApp;

```
 public void Dispose(){}

    public void Init(HttpApplication context)
    {
        cHttpApp = context;
        context.PreRequestHandlerExecute += new EventHandler(CheckForUnpaidInvoices);
    }

    private void CheckForUnpaidInvoices(Object s, EventArgs e)
    {
        if (HttpContext.Current.Request.Path.EndsWith(".aspx") || HttpContext.Current.Request.Path.EndsWith(".asp") || HttpContext.Current.Request.Path == "/")
        {
            if (HttpContext.Current.Request.Path != "/login.aspx" 
                && HttpContext.Current.Request.Path != "/Payment/Default.aspx"
                && HttpContext.Current.Request.Path != "/Payment/Default_notice.aspx" 
                && HttpContext.Current.User != null)
            {
                if (HttpContext.Current.User.Identity.IsAuthenticated)
                {
                    CustomUser mUser = ManagerSecurity.SecurityAPI.GetUser();      
                    if (mUser.HasUnpaidInvoices)
                    {
                        HttpContext.Current.Session["prepaymentHttpContext"] = HttpContext.Current;
                        HttpContext.Current.Response.Redirect("/Payment/Default.aspx");
                    }
                    else
                    {
                        if (HttpContext.Current.Session["prepaymentHttpContext"] != null)
                        {
                            HttpContext.Current = (HttpContext)HttpContext.Current.Session["prepaymentHttpContext"];
                        }
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T23:05:35.220

[此链接](http://www.codeproject.com/Articles/37539/Redirect-and-POST-in-ASP-NET)应为您提供执行您描述的操作所需的一切。请注意，此解决方案不会延迟发布。它立即将数据重新发布到不同的页面。您必须修改它以将名称/值集合存储在某处（可能在发票页面上的 ViewState 中，或在数据库中），以便在支付发票后可以再次提取它。支付发票后，您可以提取名称-值集合并将其传递给“重定向和发布”方法，以使用户回到原来的目的地。

# oracle - ORACLE 数据库性能调优

> ID：10208345
> 
> 赞同：0
> 
> 时间：2012-04-18T11:25:10.257
> 
> 标签：oracle

我们遇到了性能问题，我需要一些建议（我们在 Oracle 10g R2 上）情况是这样的

1）它是一个遗留系统。

2）在某些表中，它保存了过去 10 年的数据（意味着自第一个版本推出以来从未删除过数据）。现在，在大多数 OLTP 表中，它们大约有 30,000,000 - 40,000,000 行。

3) 对这些表的搜索操作需要 5-6 分钟的时间。（像 select count(0) from xxxxx where isActive='Y' 这样的简单查询需要大约 6 分钟的时间。）当我们看到解释计划时，我们发现索引扫描正在 isActive 列上进行。

4) 我们建议归档和清除不需要的旧数据，团队正在努力解决这个问题。即使我们删除了 5 年的数据，我们也会在表中留下大约 15,000,000 - 20,000,000 行，这本身就非常庞大，因此我们考虑在这些表上进行表分区，但我们发现用户可以执行大多数表的搜索这些表的列来自 UI，因此这将破坏表分区的目的。

那么需要采取哪些措施来改善这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:45:34.600

首先：质疑您首先发出查询`select count(0) from xxxxx where isactive = 'Y'`的原因。十分之九是检查记录是否存在的一种懒惰方式。如果您是这种情况，只需将其替换为选择 1 行的查询（rownum = 1 和 first_rows 提示）。

你提到的行数没什么好担心的。如果您的应用程序在行数增加时表现不佳，那么您的系统就不是为扩展而设计的。我会使用 SQL*Trace 或 ASH 调查所有耗时过长的查询并修复它。

顺便说一句：恕我直言，您提到的任何内容都无法证明遗产一词的合理性。

问候，
罗布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:01:58.563

Just a few observations:

1.  I'm guessing that the "isActive" column can have two values - 'Y' and 'N' (or perhaps 'Y', 'N', and NULL - although why in the name of Fred there wouldn't be a NOT NULL constraint on such a column escapes me). If this is the case an index on this column would have very poor selectivity and you might be better off without it. Try dropping the index and re-running your query.

2.  @RobVanWijk's comment about use of `SELECT COUNT(*)` is excellent. ONLY ask for a row count if you really need to have the count; if you don't need the count, I've found it's faster to do a direct probe (`SELECT whatever FROM wherever WHERE somefield = somevalue`) with an apprpriate exception handler than it is to do a `SELECT COUNT(*)`. In the case you cited, I think it would be better to do something like

`BEGIN`

```
 SELECT IS_ACTIVE
    INTO strIsActive
    FROM MY_TABLE
    WHERE IS_ACTIVE = 'Y';

  bActive_records_found := TRUE;
EXCEPTION
  WHEN NO_DATA_FOUND THEN
    bActive_records_found := FALSE;
  WHEN TOO_MANY_ROWS THEN
    bActive_records_found := TRUE;
END; 
```

1.  As to partitioning - partitioning can be effective at reducing query times **IF** the field on which the table is partitioned is used in all queries. For example, if a table is partitioned on the TRANSACTION_DATE variable, then for the partitioning to make a difference all queries against this table would have to have a TRANSACTION_DATE test in the WHERE clause. Otherwise the database will have to search each partition to satisfy the query, so I doubt any improvements would be noted.

Share and enjoy.

# ruby-on-rails - 我将如何存储文件的内容而不将它们存储在数据库或服务器上

> ID：10208350
> 
> 赞同：0
> 
> 时间：2012-04-18T11:25:19.737
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, forms, ruby-on-rails-3.1

我只想让表单读取 .csv 文件的内容而不将它们存储在任何地方并执行此操作

```
csv_text = File.read('thefiletheychoose') # If this line isnt possible can we store the contents of the csv temp somewhere?
csv = CSV.parse(csv_text, :headers => true)
csv.each do |row|
  row = row.to_hash.with_indifferent_access
  Company.create!(row.to_hash.symbolize_keys)
end 
```

我不知道 .html 会是什么样子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:44:45.910

考虑到您的表单中有一个文件上传字段：

```
<%= form_tag '/companies/create', :multipart => true do %>
  <label for="file">File to Upload</label>
  <%= file_field_tag "upload" %>
  <%= submit_tag %>
<% end %> 
```

您应该在控制器中执行以下操作：

```
def create
  csv_text = params[:upload].read
  # Same thing as yours:
  csv = CSV.parse(csv_text, :headers => true)
  csv.each do |row|
    row = row.to_hash.with_indifferent_access
    Company.create!(row.to_hash.symbolize_keys)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:04:48.327

您可以使用临时文件：http: [//apidock.com/ruby/Tempfile](http://apidock.com/ruby/Tempfile)

# java - 在 OpenJPA 中使用地图查询实体

> ID：10208352
> 
> 赞同：0
> 
> 时间：2012-04-18T11:25:43.377
> 
> 标签：java, jpa, jpql, openjpa

我有以下实体

```
@Entity
public class Conversation implements Serializable {

    @Id
    private int Id;

    @Column
    private Alias AliasA;

    // SNIP
} 
```

和

```
@Entity
public class Alias implements Serializable {

    @Id
    private String alias;

    @Column
    private String personalName;

    @OneToMany(mappedBy = "alias", cascade = CascadeType.ALL)
    @MapKeyColumn(name="address")
    private Map<String, Recipient> recipients = new HashMap<String, Recipient>();
} 
```

和

```
@Entity
public class Recipient implements Serializable {

    @Id
    @GeneratedValue
    private long id;

    @Column
    private String address;

    @Column
    private RecipientStatus status;

    @ManyToOne
    private Alias alias;
} 
```

我想做类似下面的 JPQL 查询

```
SELECT conversation FROM Conversation conversation WHERE :sender MEMBER OF conversation.aliasA.recipients AND conversation.adId=:adID 
```

我的地图的键在哪里`:sender`。然而，该`MEMBER OF`关键字似乎只适用于集合而不适用于地图。我相信 JPA 2.0 应该提供`KEY`关键字，但这似乎还没有在 OpenJPA 中实现。有没有替代方案？

更新：添加信息以澄清我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:41:48.297

有一个`VALUE`关键字应该允许您执行以下操作：

```
SELECT c FROM Conversation c JOIN c.aliasA a JOIN a.recepients r 
WHERE VALUE(r) = :sender AND conversation.adId=:adID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:27:09.917

虽然 axtavt 的回答给了我需要的提示，但实际上答案是，在这种情况下，IntelliJ 10.5.4 中的错误检查是不可信的。

`KEY`关键字确实有效，正确的查询是

```
SELECT conversation FROM Conversation conversation JOIN conversation.aliasA.recipients recipients WHERE KEY(recipients) = :senderAddress AND conversation.adId=:adID 
```

# objective-c - 如何从 NSArray 中获取特定长度的字符串？

> ID：10208355
> 
> 赞同：0
> 
> 时间：2012-04-18T11:25:47.540
> 
> 标签：objective-c, ios, nsarray, fast-enumeration

我想在 NSArray 中获取具有特定长度的字符串。

该数组有很多元素，我不想使用快速枚举。

有没有可能的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:28:54.733

无论您做什么，无论您是否意识到，您都将使用快速枚举。但是，您是否考虑过使用 NSPredicate 对象和`filteredArrayWithPredicate`方法？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T11:50:48.927

这就像一个魅力：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"self.length == %d", lenght];
NSArray *filtered = [array filteredArrayUsingPredicate:predicate]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:40:40.917

```
NSArray *yourArray = [[NSArray alloc] initWithObjects:@"Apple, Orange, Grapes, Cherry, nil"];

for(NSString *element in yourArray){

    if(element.length==yourLength){
        [filteredArray addObject:element];
    }
}

NSLog(@"Filtered array now contains the elements with length %d", yourLength);
NSLog(@"Filtered array--%@", filteredArray); 
```

# java - 从 ArrayList 中删除 抛出 UnsupportedOperationException

> ID：10208356
> 
> 赞同：0
> 
> 时间：2012-04-18T11:25:53.153
> 
> 标签：java, android, exception

我正在开发一个 Android 3.1 应用程序。

我用 ArrayList 创建了我的自定义 ArrayAdapter。Form 是一个自定义类，有两个字段：name 和 FormId。

这是我的 ArrayAdapter 代码：

```
public class FormAdapter extends ArrayAdapter<Form>
{
    private Context context;
    private int layoutResourceId;
    private List<Form> forms;
    private ArrayList<Integer> checkedItemsPosition;
    private Button downloadButton;

    public ArrayList<Integer> getCheckedItemsPosition()
    {
        return checkedItemsPosition;
    }

    public String[] getSelectedFormsId()
    {
        String[] ids = new String[checkedItemsPosition.size()];
        int i = 0;
        for(Integer pos : checkedItemsPosition)
        {
            Form f = forms.get(pos.intValue());
            ids[i] = f.FormId;
            i++;
        }
        return ids;
    }

    /**
     * Called when selected forms has been downloaded and save it locally correctly.
     */
    public void updateFormsNotDownloaded()
    {
        for (Integer pos : checkedItemsPosition)
        {
            remove(forms.get(pos.intValue()));
        }

        checkedItemsPosition.clear();
        notifyDataSetChanged();
    }

    public FormAdapter(Context context, int textViewResourceId,
            List<Form> objects, Button downloadButton)
    {
        super(context, textViewResourceId, objects);

        this.context = context;
        this.layoutResourceId = textViewResourceId;
        this.forms = objects;
        this.checkedItemsPosition = new ArrayList<Integer>();
        this.downloadButton = downloadButton;
    }

    @Override
    public int getCount()
    {
        return forms.size();
    }
    @Override
    public View getView(final int position, View convertView, ViewGroup parent)
    {
        Log.v("FormAdapter", "getView.postion: " + position);
        View row = convertView;
        if (row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);
        }

        Form f = forms.get(position);
        if (f != null)
        {
            CheckBox checkBox = (CheckBox)row.findViewById(R.id.itemCheckBox);
            if (checkBox != null)
            {
                checkBox.setText(f.Name);
                checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener()
                {
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked)
                    {
                        //Form f = forms.get(position);
                        if (isChecked)
                        {
                            //checkedItems.add(f.FormId);
                            checkedItemsPosition.add(new Integer(position));
                        }
                        else
                        {
                            //checkedItems.remove(checkedItems.indexOf(f.FormId));
                            checkedItemsPosition.remove(checkedItemsPosition.indexOf(new Integer(position)));
                        }
                        downloadButton.setEnabled(checkedItemsPosition.size() > 0);
                    }
                });
            }
        }

        return row;
    }
} 
```

列表项是带有复选框的自定义项。在`checkedItemsPosition`我存储检查项目的位置。

我的问题在于`updateFormsNotDownloaded`方法。为什么我得到一个`UnsupportedOperationException`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:42:00.590

我只能想到一个原因。您传递给 ArrayAdapters 构造函数的 List<> 实现不支持 remove()。您可以使用 ArrayList 来解决这个问题。如果由于某种原因您使用 Arrays.asList() 从数组构造列表，您将获得一个无法修改的列表。

```
The size of the
     * {@code List} cannot be modified, i.e. adding and removing are unsupported 
```

# javascript - 使用显示模块模式时，如何在 Eclipse 中查看大纲？

> ID：10208357
> 
> 赞同：17
> 
> 时间：2012-04-18T11:25:54.547
> 
> 标签：javascript, eclipse, jsdoc, revealing-module-pattern

我目前正在重构我们拥有的一些 Javascript 代码，除此之外，我已经对其进行了更改以利用显示模块模式。代码看起来更整洁，工作正常，但我在大纲视图中看不到这些功能。我将顶级命名空间 var 视为 var，但您无法扩展它以查看其中的函数。

假设以前的代码看起来像这样：

```
function myFunc1() {}
function myFunc2() {} 
```

在这种情况下，您可以在大纲视图中看到这两个功能。但是如果你把它改成这样：

```
var myNamespace = function()
{
  function myFunc1() {}
  function myFunc2() {}

  return {
    name: "myNamespace",
    myFunc1: myFunc1,
    myFunc2: myFunc2
  }
}(); 
```

然后大纲视图只向您显示 myNamespace 变量。我尝试过寻找，但找不到真正能正确显示层次结构的视图。有谁知道查看这个的方法，或者是 Eclipse 无法做到这一点的情况？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-16T09:17:47.210

添加：

```
/**
 * @memberOf myNamespace
 */ 
```

在每个函数定义之前恢复层次结构。

您将在此处找到更多有趣的标签来记录您的代码：
[我如何将 JsDoc 引入 JavaScript 项目 - 并找到了我的 Eclipse 大纲](http://www.kajabity.com/2012/02/how-i-introduced-jsdoc-into-a-javascript-project-and-found-my-eclipse-outline/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T19:18:27.590

一种方法是如下调用它。按原样定义它，但不要自行执行它。确保原型是一个空对象，然后尝试调用它。它的工作方式相同，但会恢复大纲，您无需在每个函数前添加注释。

```
var myNamespace = (function()
{
  function myFunc1() {}
  function myFunc2() {}

  return {
    name: "myNamespace",
    myFunc1: myFunc1,
    myFunc2: myFunc2
  }
});
myNamespace.prototype = {};
myNamespace(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T22:57:30.913

在大纲中未显示 myFunc1() 等似乎是一个在 3.2 中标记为已修复的错误。但是，它在 4.2 中并未修复。在处理包含数百个函数的非常大的文件时，这当然是一个巨大的痛苦，并且只有 var 名称显示在大纲中。我祈祷它被修复。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=236202](https://bugs.eclipse.org/bugs/show_bug.cgi?id=236202)

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=281374#c1](https://bugs.eclipse.org/bugs/show_bug.cgi?id=281374#c1)

/** * @memberOf myNamespace */ 对我不起作用。当我在 myFunc1() 上方添加它时，即使我关闭并打开文件，它也不会在大纲中显示它。

有趣的是，我的 20 个左右的函数中有 4 个确实出现在大纲中，但是有效的和无效的没有区别，除了有效的都包含 this.xxx （但如果我添加这个.dummy；对于不可见的功能，它没有帮助）

这个半作品： myNameSpace.prototype = {}; 我的名字空间；

但是你不能这样调用它的函数：myNameSpace.myFunc1();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T22:30:23.107

我正在使用 Eclipse/Kepler。使用上面的建议，我设法获得了大纲视图。但是提案（Ctrl-空格）不起作用。有些 fn 可见，有些不可见。没有要检测的模式。

阅读[http://usejsdoc.org/#JSDoc3_Tag_Dictionary](http://usejsdoc.org/#JSDoc3_Tag_Dictionary)后，我将所有 @memberOf 替换为 @memberof，现在一切都按预期工作（'直到出现下一个问题......）

# php - Smarty / PHP：为什么 Smarty 不能在一张表中使用两个 foreach 循环？

> ID：10208358
> 
> 赞同：3
> 
> 时间：2012-04-18T11:25:59.000
> 
> 标签：php, smarty

是否可以使用 Smarty 在一张表中使用两个不同的 foreach 循环？我尝试了一切，但它似乎不起作用。$numrow 数组有 10 个结果，但在所有 10 行中只显示一个并且相同。

这是 Smarty 的常见问题吗？

```
<table width="500">   

{foreach from=$categories item=category}   
  {if $category.fcType == 'm'}
    <tr>
      <td><strong>{$category.fcName}</strong></td>
      <td>&nbsp</td>
  {else}
    <tr>
      <td><a href="http://localhost/ZendFramework/forum/category?c={$category.fcID}">{$category.fcName}</a></td>
      <td>{$category.fcDescription}</td>
    {foreach from=$numrows item=numrow} 
      <td>{$numrow}</td>
    {/foreach} 
  {/if}

  {if !empty($category.fuUsername)}
      <td>Nieuwste topic toegevoegd door {$category.fuUsername} op {$category.topic_date}</td>
  {else}
      <td>&nbsp</td> 
  {/if}
    </tr>        
{/foreach}  

</table> 
```

php:

```
$getCat = isset($_GET['c']) ? $_GET['c'] : '';;
    $getCat = htmlentities(mysql_real_escape_string($getCat));;

    $query_cat = "
    SELECT 
        forum_categories.fcID
        ,forum_categories.fcName
        ,forum_categories.fcDescription
        ,forum_categories.fcParent
        ,forum_categories.fcType
        ,forum_users.fuUsername
        ,DATE_FORMAT(forum_topics.ftDate,'%d-%m-%Y %H:%i:%s') AS topic_date
    FROM
        forum_categories
    LEFT JOIN
        forum_topics
    ON
        forum_topics.fcID = forum_categories.fcID
    LEFT JOIN
        forum_users
    ON
        forum_topics.fuID = forum_users.fuID    
    GROUP BY
        forum_categories.fcID
    ORDER BY 
        forum_categories.fcPos 
    ";
    $exec_cat = mysql_query($query_cat);
    if (($exec_cat) and mysql_num_rows($exec_cat))
    {
        while($category = mysql_fetch_assoc($exec_cat))
        {           
            $query_count = "
            SELECT 
                forum_topics.ftID
            FROM
                forum_categories
            INNER JOIN
                forum_topics
            ON
                forum_categories.fcID = forum_topics.fcID
            WHERE forum_categories.fcID = '".$category['fcID']."'
            ";
            $exec_count = mysql_query($query_count);
            $numrows = mysql_num_rows($exec_count);
            $numrows[] = $numrows;

            echo $numrows;

            $this->view->assign("numrows", $numrows);   

            $categories[] = $category; 
            $this->view->assign("categories", $categories);
        }

    }  
    else 
    {
        echo 'Er zijn nog geen categorieen aanwezig in de database.';
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:50:20.003

```
 while($category = mysql_fetch_assoc($exec_cat))
    {           
        $query_count = "
        SELECT 
            forum_topics.ftID
        FROM
            forum_categories
        INNER JOIN
            forum_topics
        ON
            forum_categories.fcID = forum_topics.fcID
        WHERE forum_categories.fcID = '".$category['fcID']."'
        ";
        $exec_count = mysql_query($query_count);
        $category['numrows'] = mysql_num_rows($exec_count);
        $categories[] = $category;
    }
$this->view->assign("categories", $categories); 
```

在您的 Smarty TPL 中：`{foreach from=$category.numrows item=numrow}`

顺便说一句，您不是在循环中覆盖您分配的类别吗？（将最后一个分配放在while循环之外）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:45:21.690

尝试在你的 foreach 循环中使用不同的名称：

```
{foreach name = "loop1" from=$categories item='category'} 
```

和

```
{foreach name = "loop2" from=$numrows item='numrow'} 
```

我自己没试过，但看看有什么不同

（顺便说一句，记得在特殊的 html 字符后加一个分号：它应该是   而不是  ）

# flash - Flash 应用程序内 does not send cookie in IE

> ID：10208365
> 
> 赞同：-2
> 
> 时间：2012-04-18T11:26:21.020
> 
> 标签：flash, internet-explorer, session, iframe, session-cookies

We've got a Facebook application that is embedded in a Facebook canvas page and therefore it is loaded inside an iframe. The application itself holds a flash, put in tag.

What happens is that when Http requests are made via the flash, cookie is not included in the request headers, so the server can't determine which the session is. This happens only in IE, with other browsers this problem is not reproduced.

I examined the requests made via IE and Chrome and they differ in several things, most notably in the absence of Cookie parameter in the IE one.

Would you please assist? Big thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:46:57.523

I found a solution for the problem - you can check it over here > [IE always sending the same jsessionid over time (using Java Wicket)](https://stackoverflow.com/questions/10139364/ie-always-sending-the-same-jsessionid-over-time-using-java-wicket/10213743)

I created a new thread there since I didn't think the question was asked correctly here.

# jquery - jQuery 和 IE7 id 问题

> ID：10208366
> 
> 赞同：1
> 
> 时间：2012-04-18T11:26:21.927
> 
> 标签：jquery, internet-explorer-7, cross-browser

我在我的网站上使用“飞越”效果。像[这样](http://spoonfedproject.com/wp-content/uploads/demo/jquery-slide-hover/index.htm)- 水平效应。

该脚本适用于 IE8、9、FF 和 Chrome。在 IE7 中，我在页面上有多个元素。两者都有相同的id。将鼠标悬停在页面上的第一个项目上，它会加载。将鼠标悬停在另一个上，它根本不起作用。对我来说没什么意义。

我的代码如下：

**HTML**

```
<div style="margin-bottom:30px;" id="takealook-sub">
            <a href="#">
                <img style="left: -200px;" alt="" src="path/to/image">
            </a>
</div> 
```

**jQuery**

```
$(function(){
        $("#takealook-sub a").hover(function(){
            $("img", this).stop().animate({left:"0px"},{queue:false,duration:600});
        }, function() {
            $("img", this).stop().animate({left:"-200px"},{queue:false,duration:600});
        });
    }); 
```

有谁知道为什么一个可以在 IE7 中工作，而另一个不能工作的原因？就像我说的，在所有其他浏览器中一切似乎都很好。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:28:44.607

您**不能**`id`在单个文档上有重复的 s .... 改用 a `class`...[请参阅此处的 v4.0.1 HTML 规范和此处的](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)v5 [HTML 规范](http://www.w3.org/TR/html5/global-attributes.html#the-id-attribute)

使用类的示例：

```
<div style="margin-bottom:30px;" class="takealook-sub">
    <a href="#">
        <img style="left: -200px;" alt="" src="path/to/image">
    </a>
</div>
<div style="margin-bottom:30px;" class="takealook-sub">
    <a href="#">
        <img style="left: -200px;" alt="" src="path/to/image">
    </a>
</div> 
```

即你可以拥有尽可能多的......然后你可以这样做：

```
$(function () {
    $(".takealook-sub a").hover(function () {
        $("img", this).stop().animate({
            left: "0px"
        }, {
            queue: false,
            duration: 600
        });
    }, function () {
        $("img", this).stop().animate({
            left: "-200px"
        }, {
            queue: false,
            duration: 600
        });
    });
}); 
```

在 jQuery 选择器`.`中是类的前缀而不是`#`for `id`s

# c++ - c ++：如何将数据插入到结构成员（结构位于向量中）

> ID：10208367
> 
> 赞同：0
> 
> 时间：2012-04-18T11:26:25.607
> 
> 标签：c++, string, vector, struct

正如您在标题中看到的，我正在研究结构向量。

结构成员之一是**字符串 word**。当我试图以这种方式向该成员输入数据时：**(*iv).word=temp_str;** ，我得到一个运行时错误。

```
while (is!=str1.end())
{
    if (((*is)!='-')&&((*is)!='.')&&((*is)!=',')&&((*is)!=';')&&((*is)!='?')&&((*is)!='!')&&((*is)!=':'))
    {
        temp_str.push_back(*is);
        ++is;
    }
    else
    {        
        (*iv).word=temp_str;
        ++iv;
        str1.erase(is);
        temp_str.clear();
    }
} 
```

这可能是相关的代码间隔。

应该说 word 和 temp_str 是字符串类型。iv 是向量的迭代器。

在这种情况下，将数据输入结构成员的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:28:48.337

您的迭代器可能无效，否则将一个字符串分配给另一个字符串应该不是问题。

一个问题是这条线：

```
str1.erase(is); 
```

这将使 无效`is`，您可能应该将其更改为：

```
is = str1.erase(is); 
```

`iv`指向什么？似乎您需要添加以下内容：

```
while (is!=str1.end() && iv != something.end()) 
```

也是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:43:26.377

我猜这是迭代器或为向量分配空间的问题。这是应该工作的

```
#define N 10

struct myStruct
{
    int a;
    std::string str;
};

int main()
{
    std::vector<myStruct>  myVector;
    myVector.resize(N); 
    std::vector<myStruct>::iterator itr;    
    for (itr = myVector.begin(); itr != myVector.end(); ++itr)
    {
        std::string tmp = getString();
        itr->str = tmp;
    }
    return 0;
} 
```

# c# - 像“自动”时间设置一样获取实时时间

> ID：10208369
> 
> 赞同：0
> 
> 时间：2012-04-18T11:26:45.553
> 
> 标签：c#, windows-phone-7, timezone, windows-phone-7.1, clock

我正在创建一个应用程序，用户在其中向 Web 服务器发送购买请求，并且这个发送请求的过程会反馈一些分析数据。具体来说，此数据需要一个时间戳来记录请求的发出时间。

通常， DateTime.Now 是合适的。但是，这使用了电话/系统时间中的时间，不能完全信任；因为用户可能已经通过手机设置修改了这个时间。

我的问题; 有没有办法检测系统时间是否手动设置？和/或是否有推荐的方法来自动获取实时时间，就像 WP7 设置菜单中的“自动设置”开关一样？我了解 WP7 方法使用来自移动网络/运营商的数据，可能并非所有设备/网络都支持。DateTime.Now 是一个可行的备份（如果可以通过检查是否使用自动时间来标记分析数据），但如果有推荐的方法来优先使用运营商时间（或使用数据连接的等价物），那将是最有用的。

我已经搜索了这个站点以及网络和 MSDN，但我没有找到任何特别适合这个要求的东西。谢谢。

# php - 我可以重新定义 PHP 显示未捕获异常的方式吗？

> ID：10208371
> 
> 赞同：0
> 
> 时间：2012-04-18T11:26:49.460
> 
> 标签：php, exception, exception-handling

PHP 中的正常抛出和未捕获的异常将产生类似于以下的输出：

```
致命错误：在 /home/codemonkey/foo/bar/File.php:143 中带有消息“权限不足或其他内容”的未捕获异常“异常”
堆栈跟踪：
#0 /home/codemonkey/dev/foo/bar/SomeOtherFile.php(85): foo\bar\File::fromUpload(Array)
#1 /home/codemonkey/dev/foo/bar/OmniDataFileImport.php(35): foo\bar\OmniDataFileImport->performFileImportLogic()
#2 [内部函数]: foo\bar\OmniDataFileImport->post(Object(Request), false)
#3 /home/codemonkey/dev/foo/vendor/tonic/lib/tonic.php(654): call_user_func_array(Array, Array)
#4 /home/codemonkey/dev/foo/dispatch.php(22): Resource->exec(Object(Request))
#5 {主要}
  在第 143 行抛出 /home/codemonkey/dev/foo/broadnet/files/File.php

```

消息和堆栈跟踪很酷，但我真的想要更多信息。出于这个原因，我想使用更多信息来扩展异常，例如局部变量及其值。问题是 PHP 可能仍会输出相同的上述信息，但会显示文本“未捕获的异常 'MyException'”。

我可以覆盖 PHP 显示未捕获异常的方式吗？我记得阅读过有关 PHP 中的一个函数，您可以将其设置为备份以捕获所有未捕获的异常。也许我可以使用该功能来格式化我自己的消息并终止该过程。

感谢您提供有关该主题的所有有用信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:28:34.607

您正在寻找[`set_exception_handler()`](http://php.net/set_exception_handler).

但是，您无法检索局部变量等 - PHP 的错误处理/调试非常差，除非您使用不适合生产系统的调试扩展。

# testing - Arquillian 与用于 OSGi（集成）测试的 Pax 考试相比如何？

> ID：10208373
> 
> 赞同：4
> 
> 时间：2012-04-18T11:27:07.137
> 
> 标签：testing, osgi, jboss-arquillian, pax, pax-exam

我目前正在研究如何最好地测试我们打算在 Apache Karaf 上运行的 OSGi 应用程序。显而易见的选择是使用[labs-paxexam-karaf](https://github.com/openengsb/labs-paxexam-karaf)进行的 Pax 考试（有关教程，请参见[http://iocanel.blogspot.com/2012/01/advanced-integration-testing-with-pax.html](http://iocanel.blogspot.com/2012/01/advanced-integration-testing-with-pax.html)）。但是，我担心性能（因为 Pax Exam 显然为每种测试方法启动了一个新框架）。我还发现[Arquillian 有一些 OSGi 支持](http://arquillian.org/blog/2012/01/27/arquillian-container-osgi-1-0-0-CR6/)，尽管这不是它的主要关注点。JUnit4osgi 不是一个选项，因为它只支持 JUnit 3。

对于不熟悉这两种框架的人来说，从哪个开始更好？有哪些权衡？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:36:50.267

基于[Reactor Strategies](http://team.ops4j.org/wiki/display/paxexam/Reactor+Strategies) Pax-Exam 可以在同一个 OSGi 容器中运行所有测试方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T12:55:04.467

如果您需要适当的 OSGi 支持，为什么还要使用 Arquillian？=)

在查看 PaxExam 时，请确保文档参考 PaxExam 2 - v 1 和 2 之间存在很大差异。

PaxExam 需要一段时间才能掌握，但在此过程中您会学到很多关于 OSGi 的知识（这绝对是一件好事，但仍然会受到伤害）。

与@Dmytro 的回答并行，[测试容器](http://team.ops4j.org/wiki/display/paxexam/Test+Containers)包括一个本机容器，它与 junit 测试使用相同的 VM 运行 - 这意味着您可以在 Eclipse 中使用调试启动。这特别适用于 org.eclipse.m2e:lifecycle-mapping maven eclipse 插件和 org.ops4j.pax.exam:maven-paxexam-plugin。这种方法很棒，完整的 IDE 集成。

PaxExam 文档有点稀疏，但有一些[很好的示例](https://github.com/tonit/Learn-PaxExam)（请参阅提供交互式 shell 的带有 main 方法的 Native 启动器）和[wiki doc](http://team.ops4j.org/wiki/display/paxexam/Pax+Exam)。如果您遇到问题，邮件列表人员 (general@lists.ops4j.org) 会非常有帮助。

另一种选择是查看[Karaf 的 paxexam](https://github.com/openengsb/labs-paxexam-karaf/wiki)，它非常流畅且易于启动和运行 Karaf 实例（features.xml 等）。

就我个人而言，我只使用 PaxExam2，因为我不希望对框架提供者有明确的依赖（完全不反对 Karaf，它很糟糕）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T20:47:44.247

Pax Exam 2.x（在 Pax 3.0 中别名为 PerClass）的 EagerSingleStagedReactorFactory 允许您在同一个 OSGi 容器中运行**给定类的所有测试方法。**

通过 Pax Exam 3.0.0.M1 中引入的 PerSuite 策略，您的套件的**所有**测试类都在同一个容器中运行。

顺便说一句，Pax Exam 3.0 除了支持 OSGi 外，还支持 Java EE 和 CDI 容器，因此与 Arquillian 的功能更加相似，只有 Pax Exam 来自另一端。

使用 Pax Exam，无需以 ShrinkWrap 样式组装部署，它们是从类路径自动构建的。此外，您可以运行具有共享配置的测试类套件。

# iphone - 是否可以在不越狱的情况下记录 iPhone/iPad 屏幕上发生的事情？

> ID：10208374
> 
> 赞同：0
> 
> 时间：2012-04-18T11:27:09.940
> 
> 标签：iphone, ios, ipad, uikit, screen-capture

我想录制 iPhone/iPad 屏幕上发生的事情的视频。这里与可用的常用应用程序有一个变化，即从应用程序记录设备屏幕（内部视图）。我需要从设备的主屏幕记录东西，即使应用程序（记录）在后台。是否可以实施？

我还希望将捕获的视频保存到 iPad。（在应用程序沙箱内）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:29:17.460

不会。即使你能找到办法，Apple 也会拒绝这个应用程序。

# php - 如何在 javascript 函数中传递 php 代码？

> ID：10208375
> 
> 赞同：0
> 
> 时间：2012-04-18T11:27:11.123
> 
> 标签：php, javascript, jquery, ajax

我想附加上传到（'.list'）的文件名。文件的名称必须是上传时在服务器中调用的名称。例如，我可以有 2 个文件，但一个称为 mountain.png，另一个称为 mountain2.png。

但问题是我如何将 $_FILES["fileImage"]["name"] 作为参数传递给我的 js 函数，然后附加它，因为 javascript 函数和 php 脚本位于不同的页面上（即使 php 脚本确实如此回调javascript函数）？

**更新**

下面是javascript代码：

下面是表单代码（QandATable.php）

```
<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startImageUpload(this);' class='imageuploadform' >
        <p>Image File: <input name='fileImage' type='file' class='fileImage' />
        <input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' />
        </p> 
        <ul class='list'></ul>
        </form> 
```

下面是javascript函数（QandATable.php）

```
 function stopImageUpload(success){

  var nameimagefile = <?php echo $nameimagefile?>;
      var result = '';
      if (success == 1){
         result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
         $('.listImage').append(nameimagefile + '<br/>');
      }
      else {
         result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
      }

     return true;

    } 
```

下面是 php 脚本（imageupload.php）：

```
 $result = 0;
    $nameimagefile = '';

        if( file_exists("ImageFiles/".$_FILES['fileImage']['name'])) {
            $parts = explode(".",$_FILES['fileImage']['name']);
            $ext = array_pop($parts);
            $base = implode(".",$parts);
            $n = 2;

            while( file_exists("ImageFiles/".$base."_".$n.".".$ext)) $n++;
            $_FILES['fileImage']['name'] = $base."_".$n.".".$ext;

            move_uploaded_file($_FILES["fileImage"]["tmp_name"],
            "ImageFiles/" . $_FILES["fileImage"]["name"]);
            $result = 1;
$nameimagefile = $_FILES["fileImage"]["name"];

        }
            else
              {
              move_uploaded_file($_FILES["fileImage"]["tmp_name"],
              "ImageFiles/" . $_FILES["fileImage"]["name"]);
              $result = 1;
$nameimagefile = $_FILES["fileImage"]["name"];

              }

        ?>

        <script language="javascript" type="text/javascript">window.top.window.stopImageUpload(<?php echo $result;?>);</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:32:24.543

您可以简单地将值 $_FILE 文件名放入 php 变量中，而不是使用回显它

```
var yourjasvariable=<?php echo $yourvariable?>; 
```

并在 append 方法中使用这个 js 变量。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T16:16:22.593

你可以选择 AJAX 来做你想做的事。用 JSON 编写数据。可以从 PHP 和 JavaScript 读取 JSON - 读取 JSON 以在 PHP 中获取数据 - 读取 AJAX 结果（JSON）以从 PHP 获取数据

我会做这样的事情（未经测试的例子）

# AJAX js部分

```
<form method='post' enctype='multipart/form-data' onsubmit='startAjaxImageUpload(this);' >
      ...
</form>  

/*
 * ajax functions 
 */
function startAjaxImageUpload(event){

    /* Collect your formdatas as json with jquery this datas will be sent to php*/
    var formDatas = {
            'value1'        : $('input[test1=eid]').val(),
            'value2'        : $('input[id=test2_id]').val(),
            ......
        'value3'    : $('input[id=test3_id]').val()
        };

    $.ajax({
        cache: false,
        url:  "imageupload",
        data: formDatas,
        success: function(data) {
            // data is the json Result from php => imageupload.php do what u want with them in js
            // use the next line if u wanna see which json datas comes back from php if the ajax call wass successfull
            // console.log("data is %o, data);
            // ....

        }
        error:function(data){
            // error function
            // data is the json Result from php => imageupload.php do what u want with them in js
            // use the next line if u wanna see which json datas comes back from php if the ajax call wass successfull
            // console.log("data is %o, data);
            alert(damn, something went wrong);
        }
    })
} 
```

# PHP部分，imageupload.php

```
 $result = 0;
    $nameimagefile = '';
    .....
    // if done ure work on server side and no error was found, pass the  result back to starAjaxImageUpload success function
    return $nameimagefile = $_FILES["fileImage"]["name"];
    }else
    // abbort ajax, ajax error function will used
    return false
          } 
```

# r - 使用两个输入向量为 scale_colour_manual 生成向量

> ID：10208378
> 
> 赞同：0
> 
> 时间：2012-04-18T11:27:29.337
> 
> 标签：r, ggplot2

[http://had.co.nz/ggplot2/scale_manual.html](http://had.co.nz/ggplot2/scale_manual.html)上的 ggplot2 手册建议使用如下结构：

```
values = c("8" = "red","4" = "blue","6" = "darkgreen", "10" = "orange") 
```

将特定颜色分配给值。

如何从两个数组生成这个结构：

```
A = c("8","4","6","10"); B = c("red","blue","darkgreen","orange") 
```

我做到了：

```
rbind(A,B)
  [,1]  [,2]   [,3]        [,4]    
A "8"   "4"    "6"         "10"    
B "red" "blue" "darkgreen" "orange" 
```

但我不确定如何将其转换为“X”=“Y”分配的数组。

我意识到这是一个一般的 R 问题，而不是特定于 ggplot2 的问题。但是我将其标记为 ggplot2 以防它在将来帮助遇到同样问题的人。欢迎任何建议...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:33:39.580

这应该有效：

```
values = B
names(values) = A
> all.equal(values,
+       c("8" = "red","4" = "blue","6" = "darkgreen", "10" = "orange"))
[1] TRUE 
```

您所追求的行为模仿了 Python 字典的行为。有`key`,`value`对，并且引用特定的键会返回值。在这个 R 示例中，`keys`是字符向量的名称， 是向量`values`内的值。对于 ggplot2 这明确地将一个键（例如`"8"`）耦合到一个颜色值（`"red"`）。

# php - phpMyAdmin 没有在本地登录

> ID：10208383
> 
> 赞同：0
> 
> 时间：2012-04-18T11:27:37.790
> 
> 标签：php, mysql

我已经设置了 PHP 5.4，现在 MySQL 开发人员 5.5 都安装在我的本地机器上，并且都可以单独工作。

当我转到 phpMyAdmin (localhost/phpmyadmin) 时，我没有收到任何错误，并且登录屏幕完美显示。我唯一的问题是我无法登录。当我提交登录时它只是回到登录屏幕。

我认为这与数据库未在本地主机上运行或 PHP 未正确连接到数据库有关。

我应该看什么来确认两者之间的联系等？

请注意：我已经花了几个小时在谷歌上寻找解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T09:10:25.267

通过删除 PHP 并卸载 MySQL 并最终安装 WAMP 服务器解决了该问题。

# asp.net-mvc - ASP.NET MVC SiteMap 提供程序可以使用任意资源吗？

> ID：10208384
> 
> 赞同：1
> 
> 时间：2012-04-18T11:27:40.563
> 
> 标签：asp.net-mvc, resources, sitemapprovider

在[这个页面](http://mvcsitemap.codeplex.com/workitem/5361)作者写道，资源必须在特殊的应用程序文件夹（`App_GlobalResources`）中。好的，我把它们放进去。但是在我的项目中，我使用了一棵资源文件夹树，它反映了我的视图/模型/等的树。文件夹。因此，在我的树枝的每个终端文件夹中，我都有一个与其他资源文件同名的文件（如“字符串”或任何文件）。这种方案看起来很容易维护资源对应的相关项目文件。都是这样的：

应用程序文件夹树：

```
Views
-Account
--LogOn.cshtml
-Home
--Index.cshtml 
```

资源文件夹树：

```
Resources
-Views
--Account
---LogOn
----Locals
-----Strings.resx // the same name
--Home
---Index
----Locals
-----Strings.resx // the same name 
```

但是名称中的这种相同性会导致`App_GlobalResources`文件夹中资源冲突的错误。即使我为每个资源文件分配不同的命名空间。

如果我使用我的方案`App_GlobalResources`，所有资源都可以正常工作，但是`MvcSiteMapProvider`。

那么，可以`MvcSiteMapProvider`使用其他资源文件夹`App_GlobalResources`吗？或者我怎样才能组织我的资源以使它们正常工作，`MvcSiteMapProvider`但又要避免大量资源的复杂化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T07:53:30.390

如果将资源文件放在`App_GlobalResources`文件夹之外，会有一些好处。Scott Allen 写了一篇关于它的优秀文章：

[http://odetocode.com/Blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx](http://odetocode.com/Blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx)

您可以在 中使用来自另一个程序集的资源`MvcSiteMapProvider`，但您必须编写自己的资源提供程序，如下所述：

[http://msdn.microsoft.com/en-us/library/aa905797.aspx](http://msdn.microsoft.com/en-us/library/aa905797.aspx)

www.c-sharpcorner.com/uploadfile/prvn_131971/chapter-i-resources-and-localization/

# linux - webkit如何找到libflashplayer.so？

> ID：10208392
> 
> 赞同：1
> 
> 时间：2012-04-18T11:28:09.063
> 
> 标签：linux, flash, ubuntu, webkit, gtk

我在 webkitgtk 中使用 webview 打开一个 html 文件以在我的代码中播放服务器上的 flash 文件。但它建议我缺少插件。所以我想知道webkit是如何找到libflashplayer.so的，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-03T02:08:07.457

Unix 系统上的插件搜索路径在 WebKit 源代码中定义`WebKit/Source/WebKit2/Shared/Plugins/unix/PluginSearchPath.cpp`。目前它从以下位置加载插件：

```
$MOZ_PLUGIN_PATH
$MOZILLA_HOME/plugins
$HOME/.mozilla/plugins
$HOME/.netscape/plugins
/usr/lib/browser/plugins
/usr/local/lib/mozilla/plugins
/usr/lib/firefox/plugins
/usr/lib64/browser-plugins
/usr/lib/browser-plugins
/usr/lib/mozilla/plugins
/usr/local/netscape/plugins
/opt/mozilla/plugins
/opt/mozilla/lib/plugins
/opt/netscape/plugins
/opt/netscape/communicator/plugins
/usr/lib/netscape/plugins
/usr/lib/netscape/plugins-libc5
/usr/lib/netscape/plugins-libc6
/usr/lib64/netscape/plugins
/usr/lib64/mozilla/plugins
/usr/lib/nsbrowser/plugins
/usr/lib64/nsbrowser/plugins 
```

所以 WebKitGTK+ 会发现`libflashplayer.so`它是否安装到这些位置之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:41:55.890

它在`/usr/lib/flashplugin-installer`

完整路径：

```
/usr/lib/flashplugin-installer/libflashplayer.so 
```

# ruby - Ruby Rails，所有控制器都可用的全局函数

> ID：10208394
> 
> 赞同：0
> 
> 时间：2012-04-18T11:28:17.317
> 
> 标签：ruby, ruby-on-rails-3, model-view-controller, controller

这可能是一个愚蠢的问题，**您可以为多个控制器提供一个功能**吗？

我有 2 个控制器

```
class C1Controller < ActionController::Base
 def add(input_value)
  @output_value = input_value * 2
 end
end 
```

现在我想像这样在另一个控制器中使用**这个****添加**功能

 **```
class C2Controller < ActionController::Base
 @new_value = add(2)
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T11:30:25.153

在 中定义该函数`app/controllers/application_controller.rb`，它将在所有控制器中可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T11:32:01.673

`ApplicationController`可用于此。

确保您的其他控制器源自`ApplicationController`而不是直接源自`ActionController`，因为它们应该是。然后您可以在单个`ApplicationController`.

但是定义父控制器并让您的控制器从中派生可能是明智的，因为它`ApplicationController`并不是真正用于随机代码共享，而是用于过滤器和防伪等特定目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-07T20:08:55.110

您还可以在帮助程序中定义该函数，然后将此帮助程序包含在您的 ApplicationController 中。如下：

```
include SessionsHelper 
```**

# c# - C# 泛型和接口继承接口

> ID：10208395
> 
> 赞同：0
> 
> 时间：2012-04-18T11:28:21.380
> 
> 标签：c#, generics, interface

假设我有两个接口，IFeaturesA，IFeaturesB。

IFeaturesA 有一组签名方法。假设一个是：-

```
public void printMe(); 
```

IFeaturesB 实现了 IFeaturesA，并增加了一个新的签名方法，例如：-

```
public void printMeAlso(); 
```

假设我想使用通用方法，例如：-

```
public Check<E>(E passedItem)
{

} 
```

如果我传入 IFeaturesA，我希望能够调用此方法。如果我传入 IFeaturesB，我希望能够调用额外的方法 printMeAlso();

检查传递给泛型方法的接口类型并在 C# 中访问其方法的最佳方法是什么？是否针对两种接口类型检查对象类型，然后转换为最佳方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:31:42.063

**那不适合泛型**。

泛型是对行为的*无类型*重用。如果您需要检查类型，那么它不适合泛型。您可以施加**[约束](http://msdn.microsoft.com/en-us/library/d5x73970%28v=vs.80%29.aspx)**，但不能在泛型方法中检查实际类型。

您要抽象的只是*您正在传递一个 item*的事实。那**不是抽象。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T11:36:57.380

使用两种方法

公共检查（IFeaturesA passItem）{

}

公共检查（IFeaturesB passItem）{

}

添加私有方法来处理通用性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T11:34:24.773

不要认为通过定义接口来实现你想要的东西是一个好方法，简单定义类结构，比如

```
public class FeaturesA
{
    public virtual void printMe()
    {  
    }

}

public class FeaturesB : FeaturesA
{
    public override void printMe()
    {  
    }

} 
```

在代码中使用之后，比如

```
FeaturesA a = new FeaturesA(); 
FeaturesA b = FeaturesB();
public Check(A passedItem)
{
    passedItem.printMe();
} 
```

在`Check(a)` 印刷品a上，在`Check(b)`印刷品b上

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T11:36:47.080

如果要检查项目的类型，请使用“is”：

```
if (passedItem is IFeatureA) { } 
```

如果您想将泛型限制为可以由接口或抽象类定义的某些行为，请使用“where”：

```
public class foo<E> where E : IFeatureA
{
} 
```

后一种情况不允许您使用 IFeatureB，但类型 E 类中的任何变量都可以使用 IFeatureA 中定义的方法和属性，而无需检查类型。

您可能还想查看 Dynamic 类型，因为它更接近您想要做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T11:31:55.100

我会检查 E 的类型

```
if(E.GetType().Equals(typeof(IFeaturesA)){ //call method...} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T11:34:41.703

这看起来像是对另一个接口的调用。

如果你让两个接口都继承`IPrintable`其中只包含一个`Print()`方法，并扩展你的`Check<E>(E passedItem)`with `where E : IPrintable`，你可以调用`passedItem.Print()`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T11:34:52.063

尝试以下

```
Check(IFeaturesA f) {}
Check(IFeaturesB f){}
Check<T>(T obj) where T : IFeaturesA, IFeaturesB {} 
```

# javascript - jquery随机隐藏2个数字而不重复前一个

> ID：10208398
> 
> 赞同：0
> 
> 时间：2012-04-18T11:28:38.053
> 
> 标签：javascript, jquery

我如何随机选择任意 2 个数字并使用 jquery 隐藏它。我知道我可以使用该功能两次，它会工作两次。但它也会重复前面的。因此有时其中一个元素不会隐藏。

```
randomtip = function(){
            var length = $("li.ad1 a").length;
            var ran = Math.floor(Math.random()*length);
            $("li.ad1 a:nth-child(" + ran + " )").hide();
        };

        randomtip(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:45:16.573

为什么不添加一个 if-else 来检查随机选择的元素是否隐藏：

```
randomtip = function(){
        var length = $("li.ad1 a").length;
        var ran = Math.floor(Math.random()*length);
        if($("li.ad1 a:eq(" + ran + ")").is(":hidden")) randomtip();
        else $("li.ad1 a:eq(" + ran + ")").hide();
    };

randomtip();
randomtip(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:48:05.793

怎么样，

```
var Aran;
randomtip = function(){
          var length =  $("li.ad1 a").length;
          var ran = Math.floor(Math.random()*length);
          if(Aran !=ran){
             $("li.ad1 a:nth-child(" + ran + " )").hide();
            Aran=ran;  
          }
          else{

             randomtip();
           }

        }; 
```

然后调用它两次！

# c# - 如何在 C# 中读写 xml 文件不依赖于标签名称？

> ID：10208405
> 
> 赞同：0
> 
> 时间：2012-04-18T11:29:03.923
> 
> 标签：c#, xml

非常感谢您阅读我的问题。

底部是我的 xml 文件的示例。请参考。

我之前做过一些 xml 文件，但是通过“CMarkXml”。“IntoElement，OutofElement”，很清楚。

但是当 C#...我迷路了..

1：如何在不使用标签名的情况下读写我的xml文件。我看到一些关于 c# 对 xml 文件进行操作的文章，但都假设知道标签名称。

2：如果没有标签名，很难或者不推荐。那么如何通过 XmlDocument 读写我的 xml 文件呢？（对不起，请不要玲，我对此感到非常晕眩……）。

3：我的想法是，对于xml文件，取出一些部分，我们仍然可以通过xmldocument来解析部分。

4：对于xml文件的写/修改，当然要包含delete some section，delete some "leaf"，改变属性...

非常感谢您阅读冗长的问题，任何帮助我将不胜感激。如果你有一个很好的示例代码但没有大陆将它们粘贴在这里，你可以将它发送到“erlvde@gmail.com”吗？

```
<root>
    <a>i belong to a</a>
    <b>
        <bb>
            <bb>1</bb>
            <bb>2</bb>
            <bb>3</bb>
            <bb>4</bb>
            <bb>5</bb>
        </bb>
        <bb>
            <bb>1</bb>
            <bb>2</bb>
            <bb>3</bb>
            <bb>4</bb>
            <bb>5</bb>
        <bb>
    ....(other <bb>)
    </b>
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:37:40.623

将您的 xml 读入`XmlDocument`：

```
var xmlDocument = new XmlDocument();
xmlDocument.LoadXml("XML HERE"); 
```

访问子节点：

```
xmlDocument.ChildNodes[1] 
```

但它也很容易出错

您还可以检查是否有子节点：

```
xmlDocument.HasChildNodes 
```

并获取子节点的数量：

```
xmlDocument.ChildNodes.Count 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:43:24.873

在我看来，您的元素名称包含标识符。如果是这种情况，并且您可以控制 XML 架构，我强烈建议您更改您的 XML 以包含指示您的标识符的元素和/或属性，然后使用内置的[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)类来序列化 XML 和从 XML 序列化。它有许多可用的修饰符，例如[XmlElement](http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.aspx)和[XmlAttribute](http://msdn.microsoft.com/en-us/library/system.xml.xmlattribute.aspx)等，用于格式化输出。

[这](http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization)是一个帮助您入门的教程。

如果可能的话，将您的 XML 更改为类似以下的内容，这将使操作变得更加简单……如果可以更改架构的话。

```
<root>
    <a>i belong to a</a>
    <b>
        <bb id="1">
            <bb>1</bb>
            <bb>2</bb>
            <bb>3</bb>
            <bb>4</bb>
            <bb>5</bb>
        </bb>
        <bb id="2">
            <bb>1</bb>
            <bb>2</bb>
            <bb>3</bb>
            <bb>4</bb>
            <bb>5</bb>
        <bb>
    </b>
</root> 
```

**编辑** *此编辑反映了您对 XML 所做的更改*

* * *

这是一个简单的控制台应用程序，它将对象序列化为 XML 文件，然后对其进行再水化。

*预期的 XML*

```
<?xml version="1.0" encoding="utf-8"?>
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <a>i belong to a</a>
  <b>
    <bb>
      <bb>1</bb>
      <bb>2</bb>
      <bb>3</bb>
      <bb>4</bb>
      <bb>5</bb>
    </bb>
    <bb>
      <bb>1</bb>
      <bb>2</bb>
      <bb>3</bb>
      <bb>4</bb>
      <bb>5</bb>
    </bb>
  </b>
</root> 
```

*简单的控制台应用程序演示*

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Serialization;
using System.IO;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var items = new root
            {
                a = "i belong to a",
                b = new List<bb>
                {
                    new bb
                    {
                        bbClassProperty = new List<int>
                        {
                            1,
                            2,
                            3,
                            4,
                            5
                        }
                    },
                    new bb
                    {
                        bbClassProperty= new List<int>
                        {
                            1,
                            2,
                            3,
                            4,
                            5
                        }
                    }
                }
            };

            XmlSerializer serializer = new XmlSerializer(typeof(root));

            using (var textWriter = new StreamWriter(@"C:\root.xml"))
            {
                serializer.Serialize(textWriter, items);
                textWriter.Close();
            }

            using (var stream = new StreamReader(@"C:\root.xml"))
            {
                var yourObject = serializer.Deserialize(stream);
            }

            Console.Read();
        }
    }

    #region [Classes]

    public class root
    {
        public string a { get; set; }

        public List<bb> b { get; set; }
    }

    public class bb
    {
        [XmlElement("bb")]
        public List<int> bbClassProperty { get; set; }
    }

    #endregion
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T13:17:58.460

这样的事情会有帮助吗？

```
void Iterate(XmlNode parent) {
    //do something with
    //parent.Name
    //parent.Value
    //parent.Attributes

    foreach(XmlNode child in parent.ChildNodes) {
        Iterate(child);
    }
}

XmlDocument document = new XmlDocument();
document.Load(filename);

XmlNode parent = document.DocumentElement;
Iterate(parent); 
```

你也可以这样存储它（抱歉有任何语法错误，没有运行它）

```
public class Document {
    public Element DocumentElement { set; get; }

    private void Load(string fileName) {
        XmlDocument document = new XmlDocument();
        document.Load(fileName);

        DocumentElement = new Element(this, null);
        DocumentElement.Load(document.DocumentElement);
    }
}

public class Element {
    public string Name { set; get; }
    public string Value { set; get; }
    //other attributes

    private Document document = null;
    private Element parent = null;
    public Element Parent { get { return parent; } }
    public List<Element> Children { set; get; }
    private int order = 0;

    public Element(Document document, Element parent) {
        Name = "";
        Value = "";
        Children = new List<LayoutElement>();

        this.document = document;
        this.parent = parent;
        order = parent != null ? parent.Children.Count + 1 : 1;
    }

    private Element GetSibling(bool left) {
        if(parent == null) return null;
        int add = left ? -1 : +1;
        Element sibling = parent.Children.Find(child => child.order == order + add);
        return sibling;
    }

    public Element GetLeftSibling() {
        return GetSibling(true);
    }

    public Element GetRightSibling() {
        return GetSibling(false);
    }

    public void Load(XmlNode node) {
        Name = node.Name;
        Value = node.Value;
        //other attributes

        foreach(XmlNode nodeChild in node.Children) {
            Element child = new Element(document, this);
            child.Load(nodeChild);
            Children.Add(child);
        }
    }
}

Document document = new Document();
document.Load(fileName); 
```

要立即更改/删除，您可以迭代树并按名称查找元素，但由于名称不是唯一的，您会同时影响许多元素。您可以在每个标签中添加一个唯一的 ID，例如

```
<bb id="bb1"/> 
```

然后在 Load 函数中读取它

```
id = ((XmlElement)node).GetAttribute("id"); 
```

并使用此 id 遍历树。抱歉，我现在没有时间提供更详细的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T11:38:12.563

如果你有一个[XmlNode](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode_properties.aspx)对象，你可以使用 XMLNode.FirstChild 来获取孩子，如果它有的话。您还可以使用 XMLNode.NextSibling 来获取同一父节点的下一个节点。为什么不能使用节点的名称？这是最简单和最常用的方法。特别是如果您使用 XPath 或类似的。

[XPath](http://de.wikipedia.org/wiki/XPATH)也是您第二个问题的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T11:49:20.060

你可以使用类 XML 阅读器，[这里](http://www.dotnetperls.com/xmlreader)给出一个简单的例子。

```
using System;
using System.Xml;

class Program
{
    static void Main()
    {
    // Create an XML reader for this file.
    using (XmlReader reader = XmlReader.Create("perls.xml"))
    {
        while (reader.Read())
        {
        // Only detect start elements.
        if (reader.IsStartElement())
        {
            // Get element name and switch on it.
            switch (reader.Name)
            {
            case "perls":
                // Detect this element.
                Console.WriteLine("Start <perls> element.");
                break;
            case "article":
                // Detect this article element.
                Console.WriteLine("Start <article> element.");
                // Search for the attribute name on this current node.
                string attribute = reader["name"];
                if (attribute != null)
                {
                Console.WriteLine("  Has attribute name: " + attribute);
                }
                // Next read will contain text.
                if (reader.Read())
                {
                Console.WriteLine("  Text node: " + reader.Value.Trim());
                }
                break;
            }
        }
        }
    }
    }
} 
```

输入文件文本为：

```
<?xml version="1.0" encoding="utf-8" ?>
<perls>
    <article name="backgroundworker">
    Example text.
    </article>
    <article name="threadpool">
    More text.
    </article>
    <article></article>
    <article>Final text.</article>
</perls> 
```

> 输出
> 
> 开始元素。
> 
> 开始元素。
> 
> 具有属性名称：backgroundworker
> 
> 文本节点：示例文本。
> 
> 开始元素。
> 
> 具有属性名称：线程池
> 
> 文本节点：更多文本。
> 
> 开始元素。
> 
> 文本节点：
> 
> 开始元素。
> 
> 文本节点：最终文本。`enter code here`

如果文件不包含标题，您可以使用以下代码，在上面的示例中。

```
XmlReaderSettings settings = new XmlReaderSettings();
                settings.ConformanceLevel = ConformanceLevel.Fragment;
reader = XmlReader.Create(filePath, settings) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T11:33:25.900

查看对象的`ChildNodes`（和类似的）属性和方法`XmlElement`。这些将允许您遍历节点的子节点，然后您可以询问该节点的名称。

# iphone - 无法将 iOS/iPhone 应用程序构建为 i386 以外的任何应用程序

> ID：10208407
> 
> 赞同：1
> 
> 时间：2012-04-18T11:29:16.243
> 
> 标签：iphone, ios, xcode, compilation

我对 iOS/iPhone/XCode 世界完全陌生，所以如果你猜是介于相当复杂和*每个人都*应该知道的如此简单的东西之间，我会选择简单的答案。:-)

好的，所以我继承了我们外包给另一家公司的 iPhone 项目。我现在唯一的目标是能够构建该死的东西。我设置了 XCode 4.2 并安装了正确的 SDK。我加载了项目，到目前为止一切似乎都很好。但是，当我构建时，我会从我认为是构建的链接阶段的错误中得到错误。我不完全确定，因为在构建时状态会迅速变化。我得到的错误如下：

![来自 XCode 构建的错误](../Images/59c0f25634d7d7c8804465590acc2341.png)

从我在网上找到的内容来看，我使用的库之一似乎不是为 i386 平台编译的。首先，这对我来说没有意义，因为我正在使用的库（这些错误来自哪里）当前包含在子项目中并生成我认为与架构无关的**.a**文件（我在这里错了吗??）。此外，我在项目中找不到指示 XCode 构建到 i386 架构的任何地方。这是我到目前为止所做的：

*   确保出现这些错误的文件包含在 Build Phase 选项卡的“Compile Sources”部分（.m 文件）
*   将我的架构设置为**armv6**和**armv7**并将**Build Active Architecture Only**设置为*no*。（见下图）

**主要项目配置** ![主项目构建配置](../Images/1af51fbe49fed908b78ba5bda6cd1f29.png)

**子项目配置** ![子项目配置](../Images/caf36469a1df85d8fc66d8c425e24188.png)

当我使用发布配置构建事件时，我仍然收到此错误，我不知道为什么。我在构建配置中看到的所有内容似乎都表明我应该在*arm*架构中构建所有内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:47:08.227

您遇到错误是因为您弄乱了架构设置。您不应该将这些修复为 ARM 代码，但也应允许 i386。

现在，您的多个（子）项目之一仅构建 ARM 代码，一旦您尝试构建模拟器版本，就会导致链接器错误。发生这种情况是因为您的体系结构设置不是应有的。

请注意您对***Any iOS SDK***的设置，该设置不正确，因为它仅构建 ARM 代码。选择特定设置（单击）后，使用键盘上的退格键完全删除这些设置。

这就是它应该的样子： ![在此处输入图像描述](../Images/57b963c577a691096f2ec9fc9ac28808.png)

`$(ARCHS_STANDARD_32_BIT)``ARMV7`在构建设备特定代码和`i386`构建模拟器特定代码时解析。仅当您计划将结果提供给较旧的 iOS 设备（iPhone 3G 及以下）时，才需要包含`ARMV6`我的屏幕截图中的代码。

一旦这些设置**在所有（子）项目中处于活动状态**，一切都应该顺利进行。

要从项目中创建通用库，如果您计划将静态库分发给其他开发人员，这很有用，请使用`LIPO`.

例子：

```
lipo input_library_1.a input_library_2.a -create -ouput output_library.a 
```

假设 input_library_1 是`i386`特定的（模拟器），而 input_library_2 是`ARM`特定的（设备），这会将它们加入一个可用于模拟器和设备的通用版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:46:56.450

您似乎一直在尝试链接到为设备（armv6 或 armv7）构建的静态库。当您为模拟器构建时，架构将是 i386。所以你得到了所有这些讨厌的链接错误。解决方案是将为模拟器编译的库也包含在您的项目中。

# javascript - html/php 页面上的 Jquery 日期和时间

> ID：10208408
> 
> 赞同：1
> 
> 时间：2012-04-18T11:29:16.917
> 
> 标签：javascript, jquery, html, date, arabic

我想显示与以下网站相同的日期（英文和阿拉伯文）和时间：

[http://bit.ly/2gHpUZ](http://bit.ly/2gHpUZ)

因为我无法从这个网站上选择代码，但我需要与我的 html / php 页面完全相同的代码，

问候亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:38:37.223

当然，你可以得到代码。一旦文档完全加载，“showTheTime”函数将与“replaceText”函数一起调用，以将时间转换为阿拉伯语：

```
function replaceText(node){
    if (node.nodeType == 3){
        node.nodeValue = node.nodeValue.replace(/0/ig, '٠'); 
        node.nodeValue = node.nodeValue.replace(/1/ig, '۱'); 
        node.nodeValue = node.nodeValue.replace(/2/ig, '۲'); 
        node.nodeValue = node.nodeValue.replace(/3/ig, '۳'); 
        node.nodeValue = node.nodeValue.replace(/4/ig, '٤'); 
        node.nodeValue = node.nodeValue.replace(/5/ig, '٥'); 
        node.nodeValue = node.nodeValue.replace(/6/ig, '٦'); 
        node.nodeValue = node.nodeValue.replace(/7/ig, '۷'); 
        node.nodeValue = node.nodeValue.replace(/8/ig, '۸'); 
        node.nodeValue = node.nodeValue.replace(/9/ig, '۹'); 
    }else if (node.nodeType == 1){
        $(node).contents().each(function (){
            replaceText(this);
        });
    }
}

function showTheTime(){
    now = new Date();
    now.setUTCHours(now.getUTCHours()+3);
    $('#clock').html(now.getUTCHours() + ":" + showZeroFilled(now.getUTCMinutes()) + ":" + showZeroFilled(now.getUTCSeconds()));
    setTimeout(showTheTime, 1000);
    replaceText(document.getElementById('clock'));
}

function showZeroFilled(inValue){
    if (inValue > 9){
    return "" + inValue;
}
    return "0" + inValue;
}

$(document).ready(function(){
    showTheTime();
});​ 
```

您需要做的就是在文档中定义或重新定义元素“时钟”。

# c - 解释汇编代码

> ID：10208410
> 
> 赞同：1
> 
> 时间：2012-04-18T11:29:19.283
> 
> 标签：c, function, assembly, x86-64, x86

我找到了以下汇编代码，但我不知道它应该做什么（主要是因为 cmovg 遵循 movl 指令）：

```
pushl %ebp
movl %esp, %ebp
movl 8(%ebp), %edx
movl %edx, %eax
sarl $31, %eax
testl %edx, %edx
movl $1, %edx
cmovg %edx, %eax
popl %ebp
ret 
```

所以到目前为止我是这样解释的： pushes on stack

创建一个新指针（堆栈指针）以指向与基指针相同的位置

获取输入（我们称之为 x）

将 x 复制到寄存器 %eax (res = x)

res = res >> 31 符号扩展

测试 x

设置 x = 1

如果 >, res = x

恢复指针

返回资源

但是，我不确定这个子程序的意义是什么。对我来说似乎没用。如果您能指出这里正在做什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T11:52:05.473

此代码返回 X 的符号。在 C 中：

```
int sign(int x) {
    if (x>0)
        return 1;
    else if (x==0)
        return 0;
    else
        return -1;
} 
```

如果它是否定的，则指令`sarl $31, %eax`将被`-1`输入，否则。然后该指令将用if为正数替换该值。`eax``0``cmovg``1``x`

# java - 将 Windows 文件转换为 Linux 文件

> ID：10208411
> 
> 赞同：1
> 
> 时间：2012-04-18T11:29:22.467
> 
> 标签：java, linux, file, unix, file-conversion

我在 Linux 机器上作为 shell 脚本的一部分运行 Windows 文件时遇到问题，我想知道是否可以使用 Java 或 Linux 命令将 Windows 创建的文件“转换”为 Linux 文件？

例如：

如果我上传在 Windows 中创建的 CSV 文件，那么在使用的服务器上，`nano`我可以看到该文件以 DOS 格式保存。我可以使用在 DOS 和 Linux 格式之间切换`M-D`并将其保存为 Linux 文件。

我的问题是是否可以通过 Java (<-preference) 或通过 Linux 命令来实现这一点？

我试过剥离回车`sed -i 's/{ctrl-v}{ctrl-m}//g' [file]`，但这对解决问题没有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T11:31:59.800

`dos2unix`和`unix2dos`unix 命令，来自`dos2unix`包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:33:58.460

您可以将 BufferedReader 与包含的 FileReader 一起使用来逐行获取文件，然后对这些行执行任何操作（例如，将它们推送到另一个具有正确行尾的文件中。

```
File relFile = new File(".....");
BufferedReader read = new BufferedReader(new FileReader(relFile));
File targetFile = new File("....");
FileWriter fwri = new FileWriter(targetFile);
String line;
while ((line = read.readLine()) != null) {
    fwri.write(line+"\n"); // if you want the system line delimiter use the System property for that.
}
fwri.flush();
fwri.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-02T12:57:02.873

如果您没有可用的 dos2unix 实用程序但安装了**vim**或**vi**

打开你的文件：

`vi yourfile.csv`或者`vim yourfile.csv`

要将文件格式更改为 unix 类型：

`:setlocal ff=unix`

然后保存文件：

`:wq!`

*参考：http: [//vim.wikia.com/wiki/File_Format](http://vim.wikia.com/wiki/File_Format)*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-05T18:07:18.807

使用 vim 检查您的编码格式：

```
:set fileencoding 
```

在 windows 中，通常是 gb2312，但在 linux 中是 utf-8。

所以你最好通过以下方法将其转换为linux格式：

```
:set fileencoding=utf-8 
```

然后保存它`:wq!`

# php - 如何使用 SOAP 在 SugarCRM 中创建用户？

> ID：10208413
> 
> 赞同：0
> 
> 时间：2012-04-18T11:29:33.977
> 
> 标签：php, soap, sugarcrm

我想将 SugarCRM 绑定到现有的 ERP 工具。将在 ERP 工具中管理（添加和删除）用户，因此我需要能够通过 SOAP 添加用户。

到目前为止，我还没有找到一种在 SugarCRM 中创建用户帐户的方法，即系统生成的密码依次邮寄到用户的地址。

有什么指针可以在代码中查看吗？我不想将所有数据填充到 $_POST 中，然后调用 Users/Save.php ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:54:19.080

目前这是不可能的，但您可以通过升级安全方式扩展 SugarCRM Web 服务来创建自己的 Web 服务方法：http: [//support.sugarcrm.com/02_Documentation/04_Sugar_Developer/Sugar_Developer_Guide_6.1/02_Application_Framework#Extensibility_in_Upgrade_Safe_Manner](http://support.sugarcrm.com/02_Documentation/04_Sugar_Developer/Sugar_Developer_Guide_6.1/02_Application_Framework#Extensibility_in_Upgrade_Safe_Manner)

此方法可以基于 modules/Users/GeneratePassword.php 中可用的代码，您可以在“set_entry”调用后调用此方法以将密码发送给您的新用户。

# eclipse - 请配置 GWT SDK？

> ID：10208414
> 
> 赞同：7
> 
> 时间：2012-04-18T11:29:37.807
> 
> 标签：eclipse, google-app-engine

我刚刚为 Eclipse 安装了 Google App Engine 插件，并想创建一个新项目。但我只得到：

![在此处输入图像描述](../Images/edabd19585f643cf387d7ff3211a0a8f.png)

为什么我不能创建一个新项目？

提前问候和谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T11:44:17.447

插件与 SDK 不同。插件只是让使用 GWT 项目变得容易。SDK 中包含实际的 GWT 编译器和库，需要单独下载。下载并解压 SDK 后，您必须在 Eclipse 的 Preferences 中配置其位置。去`Window > Preferences > Google > Web Toolkit`那里添加SDK。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T04:31:52.963

我有同样的问题。

如果您不想使用 GWT，只需取消选中同一对话框上的“使用 Google Web Toolkit”复选框即可。您不需要打开它来创建新的 Web 应用程序项目。

我个人认为 GWT 的复选框在默认情况下是打开的，即使您没有安装，这也是令人困惑的。

您使用 eclipse 插件安装的 SDK 应该足够了。

# iphone - Iphone 被拒绝的应用程序

> ID：10208416
> 
> 赞同：0
> 
> 时间：2012-04-18T11:29:42.563
> 
> 标签：iphone, xcode4.2, itunes

我将我的应用程序从 1.0 版更新到 1.1 版，并在一周前向 Apple 提交了我的 iPhone 应用程序。几分钟前，我从 Apple 收到了这份报告

> 我们发现您的应用使用了一个或多个非公共 API，这不符合 App Store 审核指南。不允许使用非公共 API，因为如果这些 API 发生更改，可能会导致糟糕的用户体验。
> 
> 我们在您的应用中发现了以下非公共 API `setContentToHTMLString`：.
> 
> 如果您在源代码中定义了与上述 API 同名的方法，我们建议您更改方法名称，以便它们不再与 Apple 的私有 API 冲突，以避免您的应用程序在以后的提交中被标记。
> 
> 此外，一个或多个上述 API 可能驻留在应用程序随附的静态库中。如果您无权访问该库的源代码，则可以使用“strings”或“otool”命令行工具搜索已编译的二进制文件。“strings”工具可以输出库调用的方法列表，“otool -ov”将输出Objective-C类结构及其定义的方法。
> 
> 这些技术可以帮助您缩小有问题的代码所在的位置。

请告诉我，如何解决它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T11:32:19.503

如果您正在使用：

```
setContentToHTMLString 
```

不要再使用它，如果它是私有 API 方法并且 Apple 不希望您使用它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T11:34:05.320

如果您使用的是私有 API 中的方法，那么您将不得不找到一个替代函数。来自图书馆或自己编写。

如果您编写了一个名为 setContentToHTMLString 的函数，则重命名该函数（您可能希望为其添加前缀 - 也许是 mySetContentToHTMLString）并将所有用法更改为您的新名称。

然后你就可以重新提交了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T11:36:51.017

`setContentToHTMLString`是一种未记录的方法`UITextView`。您可能需要将其删除。不允许您访问私有 API。

# c++ - 为什么即使声明为“私有”，成员函数仍然可以访问？

> ID：10208421
> 
> 赞同：1
> 
> 时间：2012-04-18T11:30:17.863
> 
> 标签：c++, virtual-functions, private-members, access-specifier

> **可能重复：**
> [C++ 中的公共虚函数派生私有](https://stackoverflow.com/questions/1061726/public-virtual-function-derived-private-in-c)

```
class B
{
    private:
    int b;
    public:
    B(int i);
    virtual void show()
    {
        cout<<"B::show()called. "<<b<<endl;
    }
};

B::B(int i=0)
{
    b=i;
}

class D:public B
{
    private:
    int d;
    void show()
    {
        cout<<"D::show() called. "<<d<<endl;
    }
    public:
    D(int i, int j);
};

D::D(int i=0, int j=0):B(i)
{
    d=j;
}

void fun(B&obj)
{
    obj.show();
}
/*if I redefine fun() as follow, the result would be the same
void fun(B*obj)
{
obj->show();
}
*/
int main()
{
    D *pd=new D(5,8);
    fun(*pd);     //K
    delete pd;
} 
```

程序的输出是“D::show() called.”，表示调用了类 D 的私有部分中声明的虚函数。你不觉得很奇怪吗？如何从外部访问类的私有成员？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T11:32:29.007

与 Java 不同，在 C++ 中，访问说明符不会影响`virtual`函数。
“访问说明符”是针对句柄类型对类方法进行的*编译时检查。*`static`例如，在您的代码`obj`中是类型`B`并且`B::show()`是`public`；因此该代码是合法的。
`obj`可以动态引用其他类型而不是`B`.

请记住，`virtual`函数分派是一种*运行时*现象。（在 Java 中它会给出运行时错误。）

`B::show()`是`public`并且一旦它被调用，该`virtual`功能将启动并调用适当的对象的函数。

如果您尝试`D::show()`直接调用，那么您将得到预期的编译器错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T11:36:00.063

关键部分是您的函数`void fun(B&obj)`采用静态类型的参数`B&`（因此转换发生在调用站点；同样发生在`B*`）。

由于`B::show` *是*公开的，因此您的代码调用它没有问题。当编译器查看如何调度调用时，它会看到`show`它`virtual`调用`D::show`. 您无法调用`D::show`if`obj`是类型的事实`D`是无关紧要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T11:31:53.517

这并不奇怪。在`B`中，该方法是公开的。你**可以**调用`show()`一个`B`对象。

只是该方法被分派到扩展类。

# winapi - 不会使 CPU 达到峰值的 Win32 游戏循环

> ID：10208425
> 
> 赞同：5
> 
> 时间：2012-04-18T11:30:25.493
> 
> 标签：winapi, game-loop

Windows 中有很多应用程序以相当高且稳定的帧速率触发代码而不会占用 CPU 的示例。

例如，WPF/Silverlight/WinRT 应用程序可以做到这一点。浏览器和媒体播放器也可以。他们究竟是如何做到这一点的，我将进行哪些 API 调用以从 Win32 应用程序中实现相同的效果？

当然，时钟轮询不起作用，因为这会使 CPU 达到峰值。也不是`Sleep()`，因为您最多只能获得大约 50 毫秒的粒度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T11:35:43.497

他们正在使用多媒体计时器。[您可以在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743609%28v=vs.85%29.aspx)找到有关 MSDN的信息

在每个多媒体计时器事件中，只有视图无效（使用[InvalidateRect ）。](http://msdn.microsoft.com/en-us/library/dd145002%28v=vs.85%29.aspx)绘图发生在`WM_PAINT`/`OnPaint`处理程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:11:52.257

其实睡觉也没什么不好。

您可以使用 QueryPerformanceCounter/QueryPerformanceFrequency 的组合来获得非常准确的计时，并且平均而言，您可以创建一个循环，该循环平均在预期的时间准确地向前滴答。

我从来没有见过一个睡眠会错过它的最后期限多达 50 毫秒，但是，我见过很多天真的计时器会漂移。即accumalte一个小的延迟和conincedentally更新明显的不规则间隔。这就是导致帧率不均匀的原因。

如果您在每 n:th 帧播放一个非常短的哔声，这非常可听。

此外，逻辑和渲染可以彼此独立运行。CPU 可能看起来没那么忙，但我敢打赌 GPU 工作很努力。

现在，关于不占用 CPU。CPU 使用率只是给定样本下进程所花费的 CPU 时间的细分（线程调度程序实际上会跟踪这一点）。如果您的游戏目标为 30 Hz。你被限制在每帧 33 毫秒，否则你会落后（CPU 太慢或代码太慢），如果你不能达到这个目标，你将不会以 30 Hz 运行，如果你在 33 毫秒以下达到它然后您可以释放处理器时间，从而有效地释放资源。

[这](http://www.koonsolo.com/news/dewitters-gameloop/)对你来说可能也是一本有趣的读物。

*在旁注中，您可以有效地为未来的计算做准备工作，而不是让出时间。一些游戏在负载不重的情况下实际上会做一些事情，比如排序和内存碎片整理，到处都是，最后加起来。*

# aptana - Aptana 3 - 挂起“将文件观察程序挂钩到新项目”

> ID：10208428
> 
> 赞同：0
> 
> 时间：2012-04-18T11:30:46.067
> 
> 标签：aptana, aptana3

在 Aptana Studio 3 中创建/导入任何项目后，会出现一个任务“将文件观察程序挂钩到新项目”并挂起。这可以防止在该项目上发生任何其他任务。

这特别烦人，因为我所有的工作项目都存储在 SVN 中，这会阻止初始结帐。

编辑：补充一点，这也可以防止 Aptana 退出，迫使我杀死它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:38:42.803

从 Studio 3.1 开始，我们不再使用我们自己的实现来监视对 IDE 之外的项目的本机文件修改，请参阅[https://jira.appcelerator.org/browse/APSTUD-4302](https://jira.appcelerator.org/browse/APSTUD-4302)

因此，您可以升级到 3.1，或者您可以通过进入 Preferences > Aptana Studio 并取消选中相关选项来明确关闭 3.0 中的文件监视。

# python - 在python中对嵌套列表进行排序

> ID：10208429
> 
> 赞同：0
> 
> 时间：2012-04-18T11:30:51.457
> 
> 标签：python

我有一个嵌套列表：

```
a = [[{'aa': 2L}, {}, {'mm': 9L}, {}, {}], [{'aa': 1L}, {}, {'mm': 5L}, {}, {}], [{'aa': 2L}, {}, {'mm': 7L}, {}, {}], [{'aa': 5L}, {}, {'mm': 7L}, {}, {}]] 
```

期望的输出：

```
a = [[{'aa': 1L}, {}, {'mm': 5L}, {}, {}], [{'aa': 2L}, {}, {'mm': 7L}, {}, {}], [{'aa': 5L}, {}, {'mm': 7L}, {}, {}], [{'aa': 2L}, {}, {'mm': 9L}, {}, {}]] 
```

我从 a.sort() 得到的输出：

```
a = [[{'aa': 1L}, {}, {'mm': 5L}, {}, {}], [{'aa': 2L}, {}, {'mm': 7L}, {}, {}], [{'aa': 2L}, {}, {'mm': 9L}, {}, {}], [{'aa': 5L}, {}, {'mm': 7L}, {}, {}]] 
```

不想要。

在这里，我想通过考虑子列表的任何一个键对列表“a”进行排序。在这种情况下，我使用第三个字典和键“mm”。现在只有一个键“mm”可能有多个键值对，但我应该能够避免其他人并仅根据“mm”键值进行排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:32:28.223

您有一个列表列表，因此如果要对子列表进行排序，则需要对每个子列表进行排序。

```
a_sorted = [sorted(sublist) for sublist in a] 
```

显然，如果您希望外部列表也被排序，您可以`sorted()`在排序列表的列表上运行。

您可以传递`sorted()`内置`key`参数 - 一个接受列表项并返回要排序的值的函数。有点不清楚你想如何对列表进行排序，你可以澄清一下，尽管这样你应该能够找到一个解决方案。

但是，您的数据结构似乎有点奇怪。如果您有对形式的对，`{key: value}`通常最好使用元组：`(key, value)`，或者一个包含所有对作为键和值的单个更大的字典，例如：

```
a = [{'aa': 2L, 'mm': 7l}, {'aa': 2L, 'mm': 5L}, {'aa': 2L, 'mm': 9L}, {'aa': 2L, 'mm': 3L}] 
```

在这种情况下，我们可以使用`sorted(a, key=itemgetter("mm"))`- using [`operator.itemgetter()`](http://docs.python.org/library/operator.html#operator.itemgetter)- 对 的值进行排序`'mm'`。

或者，如果您需要空对（`None`例如，不使用 to 的键），作为元组：

```
a = [[('aa', 2L), (,), ('mm', 7L), (,), (,)], [('aa', 2L), (,), ('mm', 5L), (,), (,)], [('aa', 2L), (,), ('mm', 9L), (,), (,)], [('aa', 2L), (,), ('mm', 3L), (,), (,)]] 
```

在这里我们可以做类似的事情`sorted(a, key=lambda sublist: sublist[2][1])`——我们使用`lambda`快速函数来提取子列表中第三项中的第二项。

如果你想保持你的数据结构不变——例如，如果你打算用更多的内容来扩展字典，那么类似的计划会起作用`sorted(a, key=lambda sublist: sublist[2]["mm"])`——这次`'mm'`使用`dict`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T11:54:34.250

我不确定我是否正确地回答了这个问题，但答案对我来说似乎很简单，如下所示。

索引键中的第三项`[3]`，然后用键重新索引字典`mm`

```
>>> sorted(a,key=lambda key:key[2]['mm'])
[[{'aa': 1L}, {}, {'mm': 5L}, {}, {}], [{'aa': 2L}, {}, {'mm': 7L}, {}, {}], [{'aa': 5L}, {}, {'mm': 7L}, {}, {}], [{'aa': 2L}, {}, {'mm': 9L}, {}, {}]]
>>> 
```

# android - 在屏幕方向更改时保存打开的片段

> ID：10208432
> 
> 赞同：2
> 
> 时间：2012-04-18T11:31:00.620
> 
> 标签：android, android-fragments, android-tabhost

我有 TabHost，其中包含活动。我正在通过方法
设置这些活动。`TabSpec.setContent(intent)`

每个活动都有一些列表视图。在 Listview 项目上点击时，我必须打开新的 Fragment（我需要保持 Tabs 可见。这就是我使用 Fragment 的原因）。但是如果我打开片段然后改变屏幕旋转，片段就会消失。是否有任何方法可以保存或恢复每个选项卡中打开的片段？

这是我如何在 Activity 中启动片段的代码

```
articleFragment = new TabletArticleActivityFragment(articleHeadersList, rubricIdentifier, article.getId(),
getResources().getColor(color.blogs));
FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.add(id.tabletRubricLayoutTest, articleFragment, "articleDetailFragment");
articleFragment.setRetainInstance(true);
ft.addToBackStack("articleDetailFragment").commit(); 
```

# html - 如何定位这个元素固定？

> ID：10208436
> 
> 赞同：0
> 
> 时间：2012-04-18T11:31:20.300
> 
> 标签：html, css

MY HTML 右侧有一个图形元素，在显示信息文本的位置颜色较浅： ![在此处输入图像描述](../Images/d68b71543cea587e174a39d9969b43ac.png)

元素的 HTML 是

```
<div class="fl50" id="R-col">
        <div class="clear">&nbsp;</div>
        <div class="fl95 hknot pin" style="height: 500px; overflow: auto;">
        <div class="fl20"><strong>S&ouml;kande</strong></div>
        <div class="clear"></div>

    <div class="fl100">
    1 
    <A HREF="javascript:doSubmitWithModifierAndIndex('Grunduppgifter','editPerson', '1', '0')" ><span class="link">Kenneth Branagh</span> (241, 268569)</A>
    (även uppfinnare)   
    <BR>
    Testvägen 3<BR>
    12121   Testby</div><div class="clear"></div>

        <div class="fl20"><strong>Uppfinnare</strong></div> 
            <div class="clear"></div>

    1 
    <A HREF="javascript:doSubmitWithModifierAndIndex('Grunduppgifter','editPerson', '2', '0')" ><span class="link">Kenneth Branagh</span> (241, 0)</A>
    (även sökande)  
    <BR>
    Testvägen 3<BR>
    12121   Testby<BR>

        </div>
    </div>
</div><!-- sokupp --> 
```

我的 CSS 文件是

```
*  {font-family:arial;}

.avnamn{ 
                color: #90002b; 
                font-size: 140%; 
                display: inline; 
                vertical-align: 3%; 
                margin-left: 1%;
                }

.b{border:1px solid #000;}

.readonly{background-color: #CCC;}

.Webdings{
    font-family: Webdings;
    }

ul{margin-top: 0px}

.mt3{margin-top:-3px;}
.mt5p{margin-top:5px;}

.fontS80 {font-size: 80%;} 
a:link{color:#000; text-decoration:none; }
a:visited{color:#000; text-decoration:none; }
a:hover{color:#000; text-decoration:none; }
a:active{color:#000; text-decoration:none; }

.fontS75 {font-size: 75%;} 

.link{color: #003366;
    text-decoration: underline;
    cursor: pointer;
    font-weight: bold;}

.link_sm{color: #003366;
    text-decoration: underline;
    cursor: pointer;}

.link_sm{font-size: 70%;cursor: pointer;}

.small{font-size: 75%;}

.smallg{font-size: 75%;
color: #555;}

.ssmall{
    font-size: 65%;
    font-weight: bold;
    color: #555;
}
.small60{font-size: 60%;}
.small50{
    font-size: 50%;
    color: #333;
}
.smallb{font-size: 85%;}
table{display:inline;}

h1{font-size: 130%;display:inline;}
h2{font-size: 100%;display:inline;}
h3{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}
h4{font-size: 70%;display:inline;}
h5{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}

.hthin{
    font-size: 125%;
}

.th {text-align: left;}

td, th{font-size: 75%;
    vertical-align: text-top;}
.td_link{cursor: pointer;}
.td40{height:40px;}
.td60{height:60px;}

.thkant{
    border-top: 1px solid #000;
    border-bottom: 1px solid #000;
    font-size: 70%;
        text-align: left;
}

.labb{F0F0E3; c1c1b3 }

.bb{border-bottom: 1px solid #000;}
.bbV{border-bottom: 1px solid #FFF;}
.TB_nbA {background-color:#CCC;}
.TB_bt, .TB_nb, .TB_db, .TB_bb {background-color:#efefdc;}

.hk {background-color:#d9ddb3;}

.hknot {background-color:#f9faf2;}
/*<!--F8F8F1-->*/
.TB_bt{border-top: 1px solid #FFF;}
.TB_bt5{border-top: 5px solid #FFF;}
.TB_bb{border-bottom: 1px solid #999;}
.TB_bb2{border-bottom: 2px solid #c1c1b3;}
.TB_db{border-bottom: 1px solid #000; border-top: 1px solid #000;}
.TB_tb{border-top: 2px solid #efefdc;}

.TB_bo{border: 2px solid #efefdc;}
.TB_bo_hk{border-top: 1px solid #efefdc;}

.TB_bo2{border: 1px solid #efefdc;}

.TB_bo2B{
border-top: 2px solid #c1c1b3;
border-left: 3px solid #efefdc;
border-right: 3px solid #efefdc;
border-bottom: 2px solid #c1c1b3;
}

.TD_bo{
    border-right: 1px solid #c1c1b3;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.TD_bo2{

    border-right: 0;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.ytb{
    border-left:3px solid #efefdc;
    border-right:3px solid #efefdc;
}

.datum {
    font-size: 70%;
    padding-right: 5px;
    vertical-align: text-top;} 
.sub {background:#EAEAEA;}
.sub_meny, .sub_meny_r, .sub_meny_active, .sub_meny_sm{
    font-size: 70%;
    padding-left: 20px;
    padding-right: 20px;
    vertical-align: text-top;}

.sub_meny_sm {
    font-size: 60%;
    vertical-align: middle;
    padding-left: 10px;
    padding-right: 10px;
}   

.sub_meny_r{
    float:right;
    font-size: 70%;
    padding-left: 8px;
    padding-right: 8px;}

.sub_meny_rm{margin-top:4px;}
.sub_meny_active{font-weight: bold;}

.flikkant1 {
    background-image: url(../images/fl1k.jpg);
    background-position: center;
    z-index: -1;}

.inl_namn{
    font-weight: bold;
    font-size: 70%;
    color: Black;
    text-decoration: none;}

.th{text-align: left;}
.tr{text-align: right;}

.g1{
    background-color: #FFF;
    line-height: 20px;
}

.g2{
    background-color: #EEE;
    line-height: 20px;
}

.g3{
    background-color: #DCDCDC;
    line-height: 20px;
    font-weight: bold;
    font-size: 100%;
}
.g4{
    background-color: #CCC;
    line-height: 20px;
}

.popup{
    border-color: #000; 
    border-style: groove; 
    border-width: 2px; 
    padding: 0px; 
    background-color: #FFF;
    font-size: 70%;
}

.popupN{
    background-color: #F0F0E3;
    color: #000;
    width: 100%;
    display: inline;
    font-weight: bold;
    height: auto;
    padding: 2px;
    border-bottom: 1px solid #000;
}
.pin{padding: 6px;}

.fl10, .fl20, .fl30, .fl40, .fl50, .fl60, .fl70, .fl80, .fl90, .fl100 {
    padding-bottom:4px;color: #000000;
}

.over{
    background-color: #EFEFDC;
    line-height: 20px;
}

.half{
line-height:50%;
}

.quarter{
line-height:25%;
}

.lh10{
line-height:10%;
}

.checkmargin {margin-right: 25px;}  
.checkmarginL {margin-left: 25px;}  

.pusher {padding-left: 15px;"}
.pusherR {margin-right: 40px;"}

.rand3{background-color: #FFF; line-height: 3px;}
.rand1{background-color: #FFF; line-height: 1px;}

.whiteborder {     color: #ffffff;      border: 4px solid #ffffff;      padding: 10px;      margin: 10px; }
#details { width: 580; color: #ffffff; }

.f200 {
    color: #000000;
}

.f210 {
    color: #000000;float: left;
}

.b2{border:2px solid #efefdc;}
.inp_sel{width: 80%;}

.form-bg {
  background: #eeefdf;
  width:1080px;
  overflow:hidden;
}

.data-bar {
  border-bottom:1px solid #fbfbf7;
  display:inline-block;
  padding:10px 10px;
}

.left {
float:left;
width:200px;

}

.column1 {     margin: 0;      padding: 0;     width: 450px;     border:0;     float: left; } 
.column2 {     color:black; margin: 0;      padding: 0;     border:0;     width: 50px;     float: right; }

.right {
float:right;
width:700px;
}

.data-box-nat {
width:650px;
height:100px;
border:2px solid #cbcbcb;
margin-bottom: 5px; 
}
.data-box-pct {
width:650px;
height:100px;
border:2px solid #cbcbcb; 
}
.data-box {
width:650px;
height:100px;
border:2px solid #cbcbcb; 
margin-bottom: 5px;
}
.data-box-country {
width:650px;
border:2px solid #cbcbcb; 
margin-bottom: 5px;
}
#table td { 
margin:120px; 
} 

.personName {     float:left;     width:300px;   }  
.otherDetails {     float:right;     width:300px;      }

a img     { border: 0;} 
```

我的问题是，当我调整页面大小时，右列元素“下降”到下方，我不希望它浮动，而是在页面调整大小时保持在其位置。可以做到吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:41:00.677

[小提琴示例](http://jsfiddle.net/ryanwfiorini/W9zjy/)

关键是不要让父容器小于内部容器的总宽度。因此，将父容器的最小宽度设置为大于或等于内部容器的大小。

# javascript - HTML5 视频无法在 android 上播放

> ID：10208439
> 
> 赞同：0
> 
> 时间：2012-04-18T11:31:42.033
> 
> 标签：javascript, android, html

我有以下html代码：

```
<span id="video-teaser">
    <span>Click here for a <strong>FREE</strong> hot video</span>
    <video src="http://example.com/videos/nakednews.mp4" controls="" poster="http://example.com//img/iphone-video-btn.png" id="videoTeaser" height="1"></video>
</span> 
```

我试图想出两种解决方案..使用javascript addlistener..并在按下视频时触发视频。

```
 <script type="text/javascript">
            var video = document.getElementById('videoTeaser');
            var elementToTrigger=document.getElementById('video-teaser');
                    elementToTrigger.addEventListener('click',function(){
                    video.play();
                    },false);
      </script> 
```

两种解决方案都不起作用..当我在网站的 pc 版本上单击视频预告片时，视频本身就可以工作..

这可能是什么解决方案..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:47:58.403

尝试在[http://code.google.com/p/html5webview/source/checkout](http://code.google.com/p/html5webview/source/checkout)的 svn 链接中给出的代码，它工作正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:59:25.217

这是 Android < 4.0 的已知问题

这是一个工作量：

在您的网络视图中，您必须设置自己的 ChromeClient
并覆盖此功能：

```
 _customViewCallback = callback;
        if (view instanceof FrameLayout){  
             FrameLayout frame = (FrameLayout) view;  
             if (frame.getFocusedChild() instanceof VideoView){  
                 final VideoView video = (VideoView) frame.getFocusedChild(); 
                 _customView = video;
                 frame.removeView(video);  
                 Activity a = (Activity)_context;
                 a.setContentView(video);  
                 video.setOnCompletionListener(new OnCompletionListener() {  

                    @Override  
                    public void onCompletion(MediaPlayer mp) { 
                        mp.stop();
                        video.stopPlayback();
                        onHideCustomView();
                    } 
                });  
                 video.setOnErrorListener(new OnErrorListener() {  

                    @Override  
                    public boolean onError(MediaPlayer mp, int what, int extra) {  
                        return false;  
                    }  
                });  
                 if (!video.isPlaying())
                     video.start();  
             }  
         } 
```

并覆盖`OnHideCustomView`以添加您的处理并添加（以便您的视频可以再次打开）：

```
_customViewCallback.onCustomViewHidden(); 
```

这些链接可能对您有所帮助：

[WebView 和 HTML5 <视频>](https://stackoverflow.com/questions/3815090/webview-and-html5-video)

[如何使用android在webview中播放视频？](https://stackoverflow.com/questions/4989738/how-to-play-a-video-in-a-webview-with-android)

[WebView 不打开 android 默认视频播放器？](https://stackoverflow.com/questions/6247146/webview-not-opening-android-default-video-player)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:54:54.217

加载 span 标签的内容后，script 标签内的代码将起作用 将 script 标签放在 span 标签下面，如下所示

```
<span id="video-teaser">
    <span>Click here for a <strong>FREE</strong> hot video</span>
    <video src="http://example.com/videos/nakednews.mp4" controls="" poster="http://example.com//img/iphone-video-btn.png" id="videoTeaser" height="1"></video>
</span>

 <script type="text/javascript">
            var video = document.getElementById('videoTeaser');
            var elementToTrigger=document.getElementById('video-teaser');
                    elementToTrigger.addEventListener('click',function(){
                    video.play();
                    },false);
      </script>
</body> 
```

# php - 如果我如何使用 PHP 自动更改页面

> ID：10208442
> 
> 赞同：4
> 
> 时间：2012-04-18T11:31:52.913
> 
> 标签：php, mysql, database, url, hyperlink

... if 语句的条件得到满足？

如果满足某些条件，我有一些代码可以将数据添加到数据库中，添加数据后我希望页面重定向到另一个页面？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T11:41:57.000

使用 if-else 条件。您可以使用 PHP 的 header() 。

```
if(/* Your conditions */){
// redirect if fulfilled
header("Location:nxtpage.php");
}else{
//some another operation you want
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T11:35:33.137

你应该使用 header php 函数

```
<?php 

  //some conditions

  header("Location: http://www.example.com/");

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T11:41:08.293

试试这个代码

```
 $query ="insert into test values (1,'test')";

if(mysql_query($query) == true)
{
  header('location:index.php');
  exit();
}
else
{
  echo " insert failed";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T11:33:58.117

尝试[PHP 标头](http://php.net/manual/en/function.header.php)：

header('位置：[http](http://www.example.com/) ://www.example.com/ ');

# tsql - 按一周中的天数计算订单，将周六和周日计数添加到周五

> ID：10208445
> 
> 赞同：1
> 
> 时间：2012-04-18T11:31:56.697
> 
> 标签：tsql, date

我想获取周一到周日的订购商品数量，但是将周六和周日的订单添加到周五，所以查询结果只会显示 Orderdates (Monday to Friday)

我已经有这个 sql 显示一周中每一天的订单：

```
select DATENAME(weekday,orderdate) Day,CONVERT(VARCHAR(10), orderdate, 103) orderdate, 
COUNT(orderdate) Orders  
from Orders_tb
where orderDate >= '2012-03-01 00:00:00.000'  
and orderDate <= '2012-03-31 00:00:00.000'  
group by datepart(day,orderDate),orderdate,DATENAME(weekday,orderdate) 
```

感谢您的输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:52:10.377

**澄清后**编辑。****

 **用例将周末更改为星期五。派生表用于避免在需要 orderdate 的任何地方复制相同的表达式。

```
select DATENAME(weekday,orderdate_trimmed) Day,
       CONVERT(VARCHAR(10), orderdate_trimmed, 103) orderdate, 
       COUNT(orderdate_trimmed) Orders
from 
(
  select *, 
         order_date -
         case DATENAME(weekday,orderdate)
              when 'Saturday' then 1
              when 'Sunday' then 2
              else 0
          end
         orderdate_trimmed
    from Orders_tb
) a
where orderDate >= '2012-03-01 00:00:00.000'
  and orderDate <= '2012-03-31 00:00:00.000'
group by orderdate_trimmed 
```

您可以仅通过使用 case 语句来计算匹配天数：

```
select COUNT(orderdate) TotalOrders,
       COUNT(CASE WHEN DATENAME(weekday,orderdate) = 'Monday' then 1 end) Monday,
       COUNT(CASE WHEN DATENAME(weekday,orderdate) = 'Tuesday' then 1 end) Tuesday,
       COUNT(CASE WHEN DATENAME(weekday,orderdate) = 'Wednesday' then 1 end) Wednesday,
       COUNT(CASE WHEN DATENAME(weekday,orderdate) = 'Thursday' then 1 end) Thursday,
       COUNT(CASE WHEN DATENAME(weekday,orderdate) = 'Friday' 
                    OR DATENAME(weekday,orderdate) = 'Saturday' 
                    OR DATENAME(weekday,orderdate) = 'Sunday'
                  THEN 1 end) Friday
from Orders_tb
where orderDate >= '2012-03-01 00:00:00.000'  
and orderDate <= '2012-03-31 00:00:00.000' 
```

关于日期的警告：由于日期可以包含时间部分，这样比较会更明智：

```
where orderDate >= '2012-03-01 00:00:00.000'  
and orderDate < '2012-04-01 00:00:00.000' 
```**

# php - 仅选择具有相关模型的模型或具有相关模型的后代

> ID：10208447
> 
> 赞同：2
> 
> 时间：2012-04-18T11:31:59.970
> 
> 标签：php, sql, activerecord, yii

所以，有类别和产品，我需要选择不为空的类别才能构建产品类别菜单。非空表示该类别包含产品或后代类别包含产品。我想用范围来做，但我似乎走不远。

类似于以下内容，但我需要递归检查类别层次结构的更多级别

```
/**
 * This is the model class for table "shopCategories".
 *
 * The followings are the available columns in table 'shop_categories':
 * @property integer $id
 * @property integer $parentId
 * @property integer $order
 * @property integer $isActive
 * @property integer $cstamp
 * @property integer $mstamp
 *
 * The followings are the available model relations:
 * @property ProductCategory $parent
 * @property ProductCategory[] $children
 * @property ProductCategoryL10n[] $l10n
 * @property ProductCategoriesProducts[] $productsJunction
 */
class ProductCategory extends BogoActiveRecord
{
...

public function nonEmpty()
{    
    $this->getDbCriteria()->mergeWith(array(
        'with' => array(
            'children',
            'children.products'=>array(
                'condition'=>'products.isActive=1',
                'joinType'=>'INNER JOIN', 'limit'=>1
            ),
        ),
    ));

    return $this;
}

...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:47:19.067

递归是数据库真正不擅长的（例如MySql 根本不支持递归）。不幸的是，您所要求的无法直接实现。

您的选择是：

1.  在 PHP 中进行过滤。
2.  修改您的数据库模式以使用[修改后的预排序树遍历](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)(MPTT)，更新您的模型并再次询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:20:09.833

如果您对产品设置了级别限制，那么您可以构建一次性查询以节省 PHP 处理时间。您可以通过使用别名将所需数量的连接添加回同一个表来手动执行“递归”。

如果您被迫进入当前模式，那么这可能避免必须重建查询，更不用说执行并将其抽象回 Active Records 以查看它们是否为空。

这是假设您没有无限深的菜单结构。

# c# - VarType 到 GetType()

> ID：10208452
> 
> 赞同：1
> 
> 时间：2012-04-18T11:32:14.467
> 
> 标签：c#, vb.net, type-conversion, gettype

我正在将一个 VB.NET 项目转换为 C#，但我陷入了这个 if 循环，有人可以帮我转换它吗？我假设我需要为此使用 GetType() 方法，但我不确定如何。

循环：

```
Private Sub oOpcGroup_DataChange(ByVal TransactionID As Integer, ByVal NumItems As Integer, ByRef ClientHandles() As Integer, ByRef ItemValues() As Object, ByRef Qualities() As Integer, ByRef TimeStamps() As Date)

    Dim i As Integer

    For i = 1 To NumItems
        If VarType(ItemValues(i)) And Not VariantType.Array Then
            txtSubValue.Text = ItemValues(i)
        Else
            MsgBox("Data type return error, returned array, expected single item", MsgBoxStyle.Critical, "Data Change Error")
            Exit Sub
        End If
    Next i
    Exit Sub
End Sub 
```

这是我到目前为止所拥有的：

```
void oOpcGroup_DataChange(int TransactionID, int NumItems, ref Array ClientHandles, ref Array ItemValues, ref Array Qualities, ref Array TimeStamps)    //Events OPCGroup
    {

        for (int i = 0; i < NumItems; i++)
        {
            if(){

            }
            else
            {
                MessageBox.Show("Expected single item.", "Data type return error.", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:59:50.173

这是我想出的，使用 GetType() 而不是 Information.VarType。

我确实将 MsgBox 方法调用替换为对 System.Windows.Forms.MessageBox.Show 的调用。

```
private void oOpcGroup_DataChange(int TransactionID, int NumItems, ref Array ClientHandles, ref Array ItemValues, ref Array Qualities, ref Array TimeStamps)  
{

    for (int i = 0; i < NumItems; i++)
    {
        var obj = ItemValues.GetValue(i);

        if (obj != null && !obj.GetType().IsArray)
        {
            txtSubValue.Text = obj.ToString();
        }
        else
        {
            System.Windows.Forms.MessageBox.Show("Data type return error, returned array, expected single item", "Data Change Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T11:57:18.057

忘记自动代码转换器吧，它们经常在转换中出错，特别是如果它们没有可用的完整上下文（ItemValues 的声明等）

我认为在这种情况下原始的 VB 代码是不正确的。该代码将像以下 C# 代码一样执行：

```
int i = 0;

for (i = 1; i <= NumItems; i++) {
    if ((Information.VarType(ItemValues[i]) & ~VariantType.Array) != 0) {
        txtSubValue.Text = ItemValues[i];
    } else {
        Interaction.MsgBox("Data type return error, returned array, expected single item", MsgBoxStyle.Critical, "Data Change Error");
        return;
    }
} 
```

但是，VariantType 不是标志枚举，因此“与非”操作在任何一种语言中都不会产生有意义的结果。根据消息框中的文本，正确的条件是`VarType(ItemValues(i)) <> VariantType.Array`在 VB 中，`Information.VarType(ItemValues[i]) != VariantType.Array`.

避免使用 VB 6 兼容函数，您可以编写`if (!(ItemValues[i] is Array))`.

如果您想继续使用 C# 中的 VB 6 兼容函数来简化移植，您需要添加对 Microsoft.VisualBasic.dll 的引用。

# php - 在多个单元格中循环遍历数组

> ID：10208455
> 
> 赞同：1
> 
> 时间：2012-04-18T11:32:25.150
> 
> 标签：php, for-loop, foreach

假设我有一个数组

```
$aSomeArray = array("1","2","3","4","5","6","7","8","9","10","11","12"); 
```

现在像这样在一个表格行中显示一个数组值很容易

```
echo "<table>";

foreach ($aSomeArray as $iSomeArrayKey => $iSomeArrayValue)
{   
     echo "<tr>";
     echo "<td>".$iSomeArrayValue."</td>";
     echo "</tr>";
}

echo "</table>"; 
```

但我想像这样以表格格式显示值

```
1    2    3    4
5    6    7    8
9    10   11   12 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T11:34:51.650

编辑，这有效：

```
$aSomeArray = array("1","2","3","4","5","6","7","8","9","10","11","12");
$i = 0;
echo "<table>\r\n";
foreach ($aSomeArray as $aSomeArrayKey => $aSomeArrayValue)
{   
    if (($i % 4) == 0) echo "\t<tr>\r\n";
    echo "\t\t<td>" . $aSomeArrayValue . "</td>\r\n";
    if (($i % 4) == 3) echo "\t</tr>\r\n";
    $i++;
}
echo "</table>\r\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T11:53:55.547

只是一个看起来更好恕我直言的想法。

```
<?php
$aSomeArray = array("1","2","3","4","5","6","7","8","9","10","11","12");

function createMatrix($width, $array)
{
 $newArray = array();
 $temp = array();
 $count = 1;

 foreach($array as $key => $value)
 {
  $temp[] = $value;

  if(($count++ % $width) == 0)
  {
   $newArray[] = $temp;
   $temp = array();
  }
 }
 if( count($temp) > 0)
 {
  $newArray[] = $temp;
 }
 return $newArray;
} 
```

将创建一个变量矩阵数组`$width` 然后您可以使用该数据作为一个双 for-each 像这样：

```
$matrix = createMatrix(2, $aSomeArray );

foreach($matrix as $row)
{
 echo "<tr>\n";
 foreach($row as $td)
 {
  echo "\t<td>{$td}</td>\n";
 }
 echo "</tr>\n";
} 
```

产生：

```
<tr>
    <td>1</td>
    <td>2</td>
</tr>
<tr>
    <td>3</td>
    <td>4</td>
</tr>
<tr>
    <td>5</td>
    <td>6</td>
</tr>
<tr>
    <td>7</td>
    <td>8</td>
</tr>
<tr>
    <td>9</td>
    <td>10</td>
</tr>
<tr>
    <td>11</td>
    <td>12</td>
</tr> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T11:36:22.670

只做一个运行计数。因此，在 foreach 集`$i = 1`和每四个结果之前，将计数重置为`$i = 1`然后结束该行并重新打开一个新行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T11:45:17.833

```
$aSomeArray = array("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13");

$columns = 4; // The number of columns to shown

echo "<table>";

$i = 0;
$trOpen = false; // just a flag if <tr> has been closed (paired with </tr>) or not.
foreach ($aSomeArray as $item) {
    if ($i % $columns == 0) {
        echo "<tr>";
        $trOpen = true;
    }

    echo "<td>" . $item . "</td>";

    if (($i + 1) % $columns == 0) {
        echo "</tr>";
        $trOpen = false;
    }

    $i++;
}

if ($trOpen) {
    echo "</tr>"; // add '</tr>' if it is not yet added.
}

echo "</table>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T11:35:53.873

```
echo "<table>";
echo "<tr>";
foreach ($aSomeArray as $aSomeArrayKey => $aSomeArrayValue)
{   
 echo "<td>".$aSomeArrayValue."</td>";
 if($aSomeArrayValue % 4 == 0)
     echo "</tr><tr>";
}
echo "</tr>";
echo "</table>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T11:36:57.833

```
$i=1;
echo "<tr>";
foreach ($aSomeArray as $aSomeArrayKey => $aSomeArrayValue)
{   

     echo "<td>".$aSomeArrayValue."</td>";
     $i++;
     if($i%4==0){
         echo "<tr></tr>";
     }
}
echo "</tr>"; 
```

它也适用于不可被 4 个元素整除的元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T12:04:38.570

试试这个代码

```
<?php
$i=0;
echo"<table>";
echo"<tr>";
foreach($aSomeArrayas as $val)
{
if($i %4 ==0)
  {
     echo"</tr><tr> <td> $val</td>";  
  }
  else
  {
    echo"<td> $val </td>";  
  }
  $i++;
}
echo"</tr>";
echo"</table>";
?> 
```

# jquery - 用双状态按钮替换 Rails Confirm Alert

> ID：10208462
> 
> 赞同：0
> 
> 时间：2012-04-18T11:32:54.603
> 
> 标签：jquery, ruby-on-rails-3, twitter-bootstrap

在 Rails 3 的链接中使用 data-confirm 标记会生成通畅的 Javascript，需要有确认警报。例如：

```
<%= link_to "Destroy", @product, :confirm => "Are you sure?", :method => :delete %> 
```

但是，我想将此行为更改为以下内容：

单击按钮会将其文本更改为“确定？” 然后用户必须再次单击它才能执行操作。（也许超时后文本甚至可以恢复正常）

在 Rails 3.1 应用程序中更改此行为的最佳位置在哪里？（顺便说一句，我正在使用 Twitter Bootstrap，以防有更好的解决方案可以很好地工作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:53:32.113

所以这就是你的做法（这是基于[自定义 rails 确认框（使用 $.rails.confirm 覆盖）](https://stackoverflow.com/questions/7435859/custom-rails-confirm-box-with-rails-confirm-override)）

如果您愿意，这可以在您的 application.js 中使用（Rails 3.1）

```
$.rails.confirm = function(message, element) 
{ 
    var state = element.data('state');
    var txt = element.text();
    if (!state)
    {
        element.data('state', 'last');
        element.text('Sure?');
        setTimeout(function()
        {
            element.data('state', null);
            element.text(txt);
        }, 2000);
        return false;
    }   
    else
    {
        return true;
    }
};

$.rails.allowAction = function(element) 
{
    var message = element.data('confirm'),
        answer = false, callback;
    if (!message) { return true; }

    if ($.rails.fire(element, 'confirm')) 
    {
        // le extension.
        answer = $.rails.confirm(message, element);
        callback = $.rails.fire(element, 'confirm:complete', [answer]);
    }
    return answer && callback;
};

$.rails.handleLink = function(link) 
{
    if (link.data('remote') !== undefined) 
    {
        $.rails.handleRemote(link);
    } 
    else if (link.data('method')) 
    {
        $.rails.handleMethod(link);
    }

    return false;
}; 
```

# css - 如何使用css设置div标签的高度

> ID：10208467
> 
> 赞同：-3
> 
> 时间：2012-04-18T11:33:16.320
> 
> 标签：css

> **可能重复：**
> [设置innerHTML 时DIV 宽度和高度不会调整大小？](https://stackoverflow.com/questions/1798926/div-width-and-height-wont-resize-when-setting-innerhtml)

我有一个 div 标签，它的文本写成内部 HTML，例如：

```
<div>Some text. Some text. Some text. Some text. Some text. Some text. Some text. Some text.........</div> 
```

内部 HTML 有很长的文本。在 div 标签下，我保留了一个锚标签。问题是，当我缩短 div 标签的高度时，比如说 200px，那么锚标签就会超过 div 标签的内部 HTML。

但是，我希望当我缩短 div 标签的高度时，内部 HTML 也应该具有相同的高度。我的意思是锚标签将出现在 div 标签的正下方，并且 div 标签的高度为 200 像素。我用谷歌搜索，但没有得到太多帮助。我希望我已经说清楚了。如果您有任何疑问，请问我。我需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:37:25.540

将锚标记的位置属性设置为相对

```
a#MyA
{
  top:100px;
  position:relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:24:06.250

我不确定我是否正确理解了你的问题，但至少在你的 jsfiddle 链接中有很多错别字，纠正了一些，[结果如下](http://jsfiddle.net/fs69D/)

```
<div id="aa">Some Text. Some Text. Some Text. Some Text. Some Text. Some Text.Some Text.Some Text. Some Text. Some Text.Some Text.......</div>
    <div id="bb"><a href="#">Read More</a></div>​ 
```

还添加了一些颜色以便于调试。看看它。也检查[一下](http://jsfiddle.net/fs69D/3/)，另一种可能是您正在尝试做的事情...

```
div#aa {
    height: 100px;
    background-color: #f00;
    overflow: hidden;
}

a {
    background-color: #aaf;
}
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T07:16:55.023

我有这个问题的解决方案： [设置innerHTML时DIV宽度和高度不会调整大小？](https://stackoverflow.com/questions/1798926/div-width-and-height-wont-resize-when-setting-innerhtml)

您必须为 div 标签添加溢出属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T11:36:16.197

您需要以 % 而不是 px 设置高度；所以改变你的锚标签高度 % 意味着高度：5% 这可能会解决你的问题。

# c# - 需要 C# 线程帮助

> ID：10208469
> 
> 赞同：2
> 
> 时间：2012-04-18T11:33:20.783
> 
> 标签：c#, multithreading

我被要求编写一个方法，允许调用者通过串行端口向硬件设备发送命令字符串。发送命令后，该方法必须等待设备的响应，然后将其返回给调用者。

更复杂的是，硬件设备会定期向 PC 发送未经请求的数据包（应用程序必须存储以进行报告的数据）。所以当我发送一个串口命令时，我可能会在收到命令响应之前收到一个或多个数据包。

其他注意事项：可能有多个客户端可能同时发送串行命令，因为此方法将构成 WCF 服务的基础。此外，该方法需要是同步的（出于我不会在这里讨论的原因），因此排除了使用回调将响应返回给客户端的可能性。

关于“多个客户端”，我计划使用 BlockingCollection<> 对传入命令进行排队，并使用一个后台线程一次执行一个任务，从而避免串行端口争用。

但是我不确定如何处理传入的串行数据。我最初的想法是有另一个后台线程不断读取串行端口，存储数据分析包，但也寻找命令响应。当接收到一个时，线程会以某种方式将响应数据返回给最初发送串行命令的方法（从那时起它一直在等待 - 请记住我有一个规定，该方法是同步的）。

这是我不确定的最后一点 - 我怎样才能让我的方法等到后台线程收到命令的响应？以及如何将后台线程的响应传递给我的等待方法，以便它可以将其返回给调用者？我是线程新手，所以我会以错误的方式解决这个问题吗？

提前致谢

安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:55:51.807

首先：当你使用`SerialPort`框架自带的类时，数据接收事件已经是异步的了。当你发送一些东西时，数据是异步传入的。

我要尝试的是：将所有需要等待答案的请求排队。在整个接收处理程序中，检查传入数据是否是其中一个请求的答案。如果是这样，将回复与请求信息一起存储（为此创建某种状态类）。所有其他传入数据均正常处理。

那么，如何让请求等待答复呢？发送命令并返回回复的调用将创建状态对象，将其排队并监视对象以查看是否收到了答案。如果收到应答，则调用返回结果。

一个可能的大纲可以是：

```
string SendAndWait(string command)
{
    StateObject state = new StateObject(command);
    state.ReplyReceived = new ManualResetEvent(false);
    try
    {
        SerialPortHandler.Instance.SendRequest(command, state);
        state.ReplyReceived.WaitOne();
    }
    finally
    {
        state.ReplyReceived.Close();
    }

    return state.Reply;
} 
```

是什么`SerialPortHandler`？我会让它成为一个单例类，其中包含一个`Instance`访问单例实例的属性。这个类完成了所有的串口工作。它还应该包含当“带外”信息进入时引发的事件（不是对命令的回复的数据）。

它还包含`SendRequest`将命令发送到串行设备、将状态对象存储在内部列表中、等待命令的回复进入并使用回复更新状态对象的方法。

状态对象包含一个调用的等待句柄，它在更改状态对象的属性后`ReplyReceived`由 设置。这样你就不需要循环和. 此外，您可以调用几毫秒来等待回复进来，而不是调用。这样，您可以实现某种超时功能。`SerialPortHandler``Reply``Thread.Sleep``WaitOne()``WaitOne(timeout)``timeout`

这就是它的外观`SerialPortHandler`：

```
void HandlePossibleCommandReply(string reply)
{
    StateObject state = FindStateObjectForReply(reply);
    if (state != null)
    {
        state.Reply = reply;
        state.ReplyReceived.Set();

        m_internalStateList.Remove(state);
    }
} 
```

请注意：这是我尝试开始的。我确信这可以得到非常优化，但正如您所见，其中并没有涉及太多“多线程”——只有该`SendAndWait`方法应该以某种方式调用，以便多个客户端可以发出命令，而另一个客户端仍在等待它的响应。

**编辑**
另一个注意事项：您是说该方法应构成 WCF 服务的基础。这使事情变得更容易，就像您配置服务一样，将为每次调用服务创建一个服务类的实例，因此该`SendAndWait`方法将“活”在它自己的服务实例中，甚至不需要完全可以重入。在这种情况下，您只需要确保`SerialPortHandler`始终处于活动状态（=> 是独立于实际 WCF 服务创建和运行的），无论当前是否存在您的服务类的实例。

**编辑 2**
我按照评论中的建议将示例代码更改为不循环和睡眠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:53:41.467

如果您*真的*想阻塞直到后台线程收到您的命令响应，您可以考虑让后台线程在您将命令排入队列并将其返回给您时锁定一个对象。接下来，您等待锁定并继续：

```
// in main code:
var locker = mySerialManager.Enquee(command);
lock (locker)
{
     // this will only be executed, when mySerialManager unlocks the lock
}

// in SerialManager
public object Enqueue(object command)
{
    var locker = new Object();
    Monitor.Enter(locker); 
    // NOTE: Monitor.Exit() gets called when command result 
    // arrives on serial port
    EnqueueCommand(command, locker);
    return locker;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T11:55:03.390

几件事。您需要能够将串行响应绑定到请求它们的命令。我假设有一些索引或序列号与命令一起出现并在响应中返回？

鉴于此，你应该没问题。您需要某种“serialAPU”类来表示请求和响应。我不知道这些是什么，也许只是字符串，我不知道。该类也应该有一个 autoResetEvent。无论如何，在你的'DoSerialProtocol()'函数中，创建一个serialAPU，用请求数据加载它，将它排入串行线程并等待autoResetEvent。当线程获得serialAPU时，它可以在serialAPU中存储一个索引/序列号，将serialAPU存储在一个向量中并发送请求。

当数据进入时，您是否进行协议处理，如果数据是有效响应，则从数据中获取索引/序列并在向量中的 serialAPU 中查找匹配值。从向量中删除匹配的serialAPU，用响应数据加载它并发出autoResetEvent信号。最初调用“DoSerialProtocol()”的线程将继续运行并可以处理响应数据。

当然，有很多“摆动”。超时是其中之一。我很想在 serialAPU 中有一个状态枚举，受 CritcalSection 或 atomicCompareandSwap 保护，初始化为“Esubmitted”。如果起始线程在 autoResetEvent 上的等待超时，它会尝试将其 serialAPU 中的状态枚举设置为“EtimedOut”。如果成功，很好，它会向调用者返回一个错误。同样，在串行线程中，如果它找到状态为 EtimedOut 的串行 APU，它只是将其从容器中删除。如果找到与响应数据匹配的serialAPU，它会尝试将状态更改为“EdataRx”，如果成功。触发 autoRestEvent。

另一个是烦人的OOB数据。如果出现这种情况，创建一个串行 APU，加载 OOB 数据，将状态设置为“EOOBdata”并用它调用一些“OOBevent”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-18T11:40:01.383

我建议你看看[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx) -Class

此类中有一个事件（RunWorkerCompleted），当工人完成工作时会触发该事件。

# cookies - 如何爬取网站以获取所有设置的 cookie 以及设置它们的页面？

> ID：10208473
> 
> 赞同：0
> 
> 时间：2012-04-18T11:33:28.287
> 
> 标签：cookies, web-crawler

我正在寻找一个程序，它可以爬过一个站点并获取设置 cookie 的页面列表。正常的站点爬网不解析 JavaScript，因此它们不会获取以这种方式设置的 cookie。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:48:07.640

看来您没有找到合适的工具。最好的方法是在 GreeasyMonkey（或其他浏览器脚本引擎插件）上编写自己的脚本，搜索掩码“ *** *cookie* *** ”并手动分析结果。您还可以编写自动下载和解析 HTML 页面的外部 JS 文件。

# javascript - Substr 基于字节而不是字符数

> ID：10208476
> 
> 赞同：1
> 
> 时间：2012-04-18T11:33:41.640
> 
> 标签：javascript, byte

我正在创建一个字段最大值只能是 200 字节的输入系统。我正在使用以下方法计算剩余的字节数（这种方法可能也有争议！）：

```
var totalBytes = 200;
var $newVal = $(this).val();
var m = encodeURIComponent($newVal).match(/%[89ABab]/g);
var bytesLeft = totalBytes - ($newVal.length + (m ? m.length : 0)); 
```

这似乎效果很好，但是如果有人要粘贴大量数据，我希望能够对输入进行切片并且只显示 200 个字节。我猜在伪代码中看起来像：

```
$newText = substrBytes($string, 0, 200); 
```

任何帮助或指导将不胜感激。

**编辑**：这里发生的一切都是UTF-8 btw :)

**编辑2**：我知道我可以循环每个角色并进行评估，我想我希望可能有一些更优雅的东西来处理这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:03:22.197

A Google search yielded [a blog article](http://illegalargumentexception.blogspot.co.uk/2010/12/javascript-validating-utf-8-string.html), complete with a try-it-yourself input box. I'm copying the code here because SO likes definitive answers rather than links, but credit goes to [McDowell](https://stackoverflow.com/users/304/mcdowell).

```
/**
 * codePoint - an integer containing a Unicode code point
 * return - the number of bytes required to store the code point in UTF-8
 */
function utf8Len(codePoint) {
  if(codePoint >= 0xD800 && codePoint <= 0xDFFF)
    throw new Error("Illegal argument: "+codePoint);
  if(codePoint < 0) throw new Error("Illegal argument: "+codePoint);
  if(codePoint <= 0x7F) return 1;
  if(codePoint <= 0x7FF) return 2;
  if(codePoint <= 0xFFFF) return 3;
  if(codePoint <= 0x1FFFFF) return 4;
  if(codePoint <= 0x3FFFFFF) return 5;
  if(codePoint <= 0x7FFFFFFF) return 6;
  throw new Error("Illegal argument: "+codePoint);
}

function isHighSurrogate(codeUnit) {
  return codeUnit >= 0xD800 && codeUnit <= 0xDBFF;
}

function isLowSurrogate(codeUnit) {
  return codeUnit >= 0xDC00 && codeUnit <= 0xDFFF;
}

/**
 * Transforms UTF-16 surrogate pairs to a code point.
 * See RFC2781
 */
function toCodepoint(highCodeUnit, lowCodeUnit) {
  if(!isHighSurrogate(highCodeUnit)) throw new Error("Illegal argument: "+highCodeUnit);
  if(!isLowSurrogate(lowCodeUnit)) throw new Error("Illegal argument: "+lowCodeUnit);
  highCodeUnit = (0x3FF & highCodeUnit) << 10;
  var u = highCodeUnit | (0x3FF & lowCodeUnit);
  return u + 0x10000;
}

/**
 * Counts the length in bytes of a string when encoded as UTF-8.
 * str - a string
 * return - the length as an integer
 */
function utf8ByteCount(str) {
  var count = 0;
  for(var i=0; i<str.length; i++) {
    var ch = str.charCodeAt(i);
    if(isHighSurrogate(ch)) {
      var high = ch;
      var low = str.charCodeAt(++i);
      count += utf8Len(toCodepoint(high, low));
    } else {
      count += utf8Len(ch);
    }
  }
  return count;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:04:28.747

Strings in JavaScript are represented in UTF-16 internally, so every character take actually two bytes. So your question is more like "Get bytes length of str in UTF-8".

Hardly you need half of a symbol, so it may cut 198 or 199 bytes.

Here're 2 different solutions:

```
// direct byte size counting
function cutInUTF8(str, n) {
    var len = Math.min(n, str.length);
    var i, cs, c = 0, bytes = 0;
    for (i = 0; i < len; i++) {
        c = str.charCodeAt(i);
        cs = 1;
        if (c >= 128) cs++;
        if (c >= 2048) cs++;
        if (c >= 0xD800 && c < 0xDC00) {
            c = str.charCodeAt(++i);
            if (c >= 0xDC00 && c < 0xE000) {
                cs++;
            } else {
                // you might actually want to throw an error
                i--;
            }
        }
        if (n < (bytes += cs)) break;
    }
    return str.substr(0, i);
}

// using internal functions, but is not very fast due to try/catch
function cutInUTF8(str, n) {
    var encoded = unescape(encodeURIComponent(str)).substr(0, n);
    while (true) {
        try {
            str = decodeURIComponent(escape(encoded));
            return str;
        } catch(e) {
            encoded = encoded.substr(0, encoded.length-1);
        }
    }
} 
```

# jekyll - 如何使用 jekyll 插件压缩和缩小资产

> ID：10208481
> 
> 赞同：17
> 
> 时间：2012-04-18T11:34:13.183
> 
> 标签：jekyll, minify

我有一个简单的测试 jekyll 应用程序，如下所示：

index.html 是：

```
<script type="text/javascript" src="/assets/myfile.js"><script>
<p>hi</p> 
```

myfile.js 文件如下：

```
var  x  = "this is a string";
alert(x +  "hi"); 
```

我只想添加一个插件，以便它可以在将 js 文件写入 _site/assets/myfile.js 文件之前缩小它

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-25T22:06:18.230

以下是我在 2014 年解决此问题时发现的总结：

开始于

1.  [https://github.com/donaldducky/jekyll-cssminify](https://github.com/donaldducky/jekyll-cssminify)

    开发进展顺利，直到被这个项目击败：

2.  [http://www.matthodan.com/2012/11/22/jekyll-asset-pipeline.html](http://www.matthodan.com/2012/11/22/jekyll-asset-pipeline.html)

    ...到目前为止，这是我最喜欢实现的，但它现在不起作用，而且看起来开发已经停止，所以我被迫转向

3.  [https://github.com/envygeeks/jekyll-assets](https://github.com/envygeeks/jekyll-assets)

    ...再次击败＃2，但使用起来有点棘手。无论如何，这是唯一有效的，所以这就是我现在正在使用的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T11:36:39.707

Jekyll有一些用于[HTML](https://github.com/stereobooster/html_press)和[CSS缩小的插件，但是搜索并没有发现任何明显的 JS 内容。](https://github.com/donaldducky/jekyll-cssminify)

不过[上面CSS一的源码](https://github.com/donaldducky/jekyll-cssminify/blob/master/CssMinify.rb)不到100行，其实是用[Juicer](https://github.com/cjohansen/juicer)做的缩小，也可以做JS，这样插件就可以很方便的作为模板来实现自己的JS缩小器（看起来甚至只是`s/css/js/g`将接近工作）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-23T07:38:01.633

我为此推荐[Jekyll Asset Pipeline](http://www.matthodan.com/2012/11/22/jekyll-asset-pipeline.html) gem。它支持任何语言（例如，Scss、Less、CoffeeScript、Erb 等），并具有使其与众不同的一系列功能（例如，资产标记、压缩、gzipping 等）。它似乎也是近来增长最快的与 Jekyll 相关的宝石，我认为这意味着它在社区中越来越受欢迎。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-04T17:26:34.317

对于 JS 和 CSS，您可以使用[Jekyll Asset Bundler](https://github.com/moshen/jekyll-asset_bundler)它使用 yui-compressor 或closure-compiler gems。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-17T16:12:09.467

[对于图像，我制作了一个通过image_optim](https://github.com/toy/image_optim)运行图像的插入式插件：

[https://gist.github.com/sffc/a828267913591159ab1cc3e1bfde20d7](https://gist.github.com/sffc/a828267913591159ab1cc3e1bfde20d7)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-11T17:22:04.450

与其他插件相比，这个似乎相当更新，并使用 yui-compressor 和 htmlcompressor
[https://github.com/digitalsparky/jekyll-minifier缩小 HTML/XML/CSS/JS Minifier](https://github.com/digitalsparky/jekyll-minifier)

# php - 在三台 PC 的网络中使用 XAMPP

> ID：10208482
> 
> 赞同：0
> 
> 时间：2012-04-18T11:34:22.433
> 
> 标签：php, networking, xampp

我通过网络 HUB 连接了三台 PC。我在其中之一上安装了 XAMPP。我想使用在 XAMPP 上运行的 web 应用程序，也可以从其他 PC 上运行。

尝试使用其 IP 访问 PC，但无法正常工作。

我正在使用该站点的基本 URL 的变量，并在其中写入 127.0.0.1/sitename。我不应该改变这个吗？或者这也适用于其他PC？

# apache - 在 Apache 2.x 中，如何通过 MIME 类型限制对文件的访问？

> ID：10208485
> 
> 赞同：0
> 
> 时间：2012-04-18T11:34:35.663
> 
> 标签：apache, mod-rewrite, mime

我有一个相当简单的问题，但我无法使用 Google 或通过 Apache 手册找到正确的答案。

假设我的 Web 服务器上有一个文件系统目录，其中包含不同类型的文件。在虚拟主机上使用，我想允许完全访问该目录中的所有文件。使用与内容根目录使用相同目录的单独虚拟主机，我想限制对某些 MIME 类型的文件的访问（可能等于查看每个正则表达式的文件扩展名？）。

如何在第二个虚拟主机中的 Apache 中实现这一点？

感谢您花时间帮助我。

托拜厄斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:38:28.630

根据[这篇文章，](http://www.ducea.com/2006/07/21/apache-tips-tricks-deny-access-to-certain-file-types/) [“文件”指令](http://httpd.apache.org/docs/2.4/mod/core.html#files)对我来说看起来很有希望，在您的虚拟主机或目录配置中，您可以通过正则表达式指定（或范围）文件名，并且像往常一样拒绝访问：

```
<Files ~ "\.inc$">
Order allow,deny
Deny from all
</Files> 
```

应用正则表达式时首选“FilesMatch”指令。

# ios - 使用 Crashlog 调试 iOS（基础）

> ID：10208488
> 
> 赞同：3
> 
> 时间：2012-04-18T11:34:50.850
> 
> 标签：ios, crash, crash-log

好吧，我在这方面很愚蠢。谁能告诉我如何阅读崩溃日志并使用它来调试应用程序？我不是在寻找任何人来解决这个问题。我只是希望获得有关如何自己学习修复它的建议，这样我就不必每隔几天就在这样的地方打扰人们。

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0xdde40cfb
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x31134f94 objc_msgSend + 44
1   Bobble_Head                     0x000c97aa 0x20000 + 694186
2   Bobble_Head                     0x000ca096 0x20000 + 696470
3   UIKit                           0x33b2d6b4 -[UIAccelerometer _acceleratedInX:y:z:timestamp:] + 192
4   UIKit                           0x338d1286 -[UIApplication handleEvent:withNewEvent:] + 2574
5   UIKit                           0x338d0708 -[UIApplication sendEvent:] + 48
6   UIKit                           0x338d00dc _UIApplicationHandleEvent + 5820
7   GraphicsServices                0x341c0224 PurpleEventCallback + 876
8   CoreFoundation                  0x310a651c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
9   CoreFoundation                  0x310a64be __CFRunLoopDoSource1 + 134
10  CoreFoundation                  0x310a530c __CFRunLoopRun + 1364
11  CoreFoundation                  0x3102849e CFRunLoopRunSpecific + 294
12  CoreFoundation                  0x31028366 CFRunLoopRunInMode + 98
13  GraphicsServices                0x341bf432 GSEventRunModal + 130
14  UIKit                           0x338fee76 UIApplicationMain + 1074
15  Bobble_Head                     0x000a82dc 0x20000 + 557788
16  Bobble_Head                     0x00021a90 0x20000 + 6800

.
.
.

Thread 0 crashed with ARM Thread State:
    r0: 0x00257ba0    r1: 0x000e1df4      r2: 0x00000000      r3: 0x30bddcf9
    r4: 0xdde40cfb    r5: 0x0028c430      r6: 0x2fe1d7e4      r7: 0x2fe1d724
    r8: 0x3df57800    r9: 0x00030072     r10: 0x0028afe0     r11: 0xbf802700
    ip: 0x776f6873    sp: 0x2fe1d5dc      lr: 0x000c97b1      pc: 0x31134f94
  cpsr: 0xa00f0030

Binary Images:
   0x20000 -    0xfffff +Bobble_Head armv7  <55ac25ad8d173c9ab6c6ef5bd996cc21> /var/mobile/Applications/CE8D156C-1FF9-45AE-B60A-6958A21BC02D/Bobble_Head.app/Bobble_Head
0x2fe1f000 - 0x2fe40fff  dyld armv7  <4a817f3e0def30d5ae2032157d889c1d> /usr/lib/dyld
0x3043e000 - 0x30488fff  libvDSP.dylib armv7  <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x3048a000 - 0x3048ffff  libGPUSupportMercury.dylib armv7  <3c1cc3175c403ace8fcbd3826bd43807> /System/Library/PrivateFrameworks/GPUSupport.framework/libGPUSupportMercury.dylib
0x304de000 - 0x30591fff  iTunesStore armv7  <0b61336b65033857a22ce498c653636b> /System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore
0x30758000 - 0x30784fff  libtidy.A.dylib armv7  <3aacc5b650e037c086a8ff6657d154bf> /usr/lib/libtidy.A.dylib
0x30785000 - 0x30786fff  libsystem_sandbox.dylib armv7  <66e985f3eea03ef08afb7cf4c153f76e> /usr/lib/system/libsystem_sandbox.dylib
0x3078d000 - 0x30790fff  libmacho.dylib armv7  <e52b77623bd031bc807e77029566c777> /usr/lib/system/libmacho.dylib
0x30793000 - 0x30795fff  libCoreVMClient.dylib armv7  <d4d4aa3090c83e87bcb15ed00b93fd5c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x3079d000 - 0x307acfff  SpringBoardServices armv7  <ca5b10014b473d2eaec5c48d89ee1b54> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x30887000 - 0x30888fff  DataMigration armv7  <d77f0e8f39ee37f5a2ac713a3fd9e693> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x30889000 - 0x30892fff  libMobileGestalt.dylib armv7  <4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib
0x30894000 - 0x30a12fff  Foundation armv7  <c40ddb073142315bb4ebb214343d0b7f> /System/Library/Frameworks/Foundation.framework/Foundation
0x30a13000 - 0x30a1ffff  libCRFSuite.dylib armv7  <bdb2b4d1a78c39c1ba60d791207aed2a> /usr/lib/libCRFSuite.dylib
0x30a62000 - 0x30a69fff  MailServices armv7  <ab2388ce733e38b7a261273a401bbbf1> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x30ac1000 - 0x30acdfff  Accounts armv7  <79f22009b1173e1e81f70fc5c0410119> /System/Library/Frameworks/Accounts.framework/Accounts
0x30ace000 - 0x30bf1fff  PhotoLibrary armv7  <7549c116c4d632a7b078cd8e7a28ac72> /System/Library/PrivateFrameworks/PhotoLibrary.framework/PhotoLibrary
0x30bf2000 - 0x30c0afff  iAd armv7  <9e9184ed0077317a97b879c3df950316> /System/Library/Frameworks/iAd.framework/iAd
0x30c0b000 - 0x30ce3fff  vImage armv7  <caf3648be2933384b6aa1ae7408ab4f0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x30ce4000 - 0x30cebfff  AssetsLibraryServices armv7  <0703f561f9a038b6850d6e93bba7e5f4> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x30d31000 - 0x30d3dfff  libz.1.dylib armv7  <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x30e0c000 - 0x30e12fff  libnotify.dylib armv7  <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x30eed000 - 0x30eedfff  vecLib armv7  <a2cfe25e77aa36bfb4a30b2d0d2dd465> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x30eee000 - 0x30ef5fff  SpringBoardUI armv7  <8f278b49685e3db68ac63c60011b14dd> /System/Library/PrivateFrameworks/SpringBoardUI.framework/SpringBoardUI
0x31019000 - 0x31130fff  CoreFoundation armv7  <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x31131000 - 0x311f7fff  libobjc.A.dylib armv7  <90014d1bc583366d85622e43097df416> /usr/lib/libobjc.A.dylib
0x311f8000 - 0x311fdfff  libsystem_dnssd.dylib armv7  <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x31200000 - 0x31235fff  SystemConfiguration armv7  <4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x31236000 - 0x313f3fff  ImageIO armv7  <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x313f4000 - 0x313f9fff  libcopyfile.dylib armv7  <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x313fa000 - 0x313fffff  ApplePushService armv7  <f424c0340de637c08bbeb4f3bd8c6eaf> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x31546000 - 0x31583fff  FTServices armv7  <28ed78e01a77388cb4c0f2f6ec33482c> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x3158e000 - 0x3165dfff  libGLProgrammability.dylib armv7  <49607ffe4ee9389494285a213e392924> /System/Library/Frameworks/OpenGLES.framework/libGLProgrammability.dylib
0x3165e000 - 0x3169dfff  QuickLook armv7  <802b1092542a3017a0380632502610d4> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x316a5000 - 0x3173efff  EventKit armv7  <d67aa1508ee7306b8e2a45c76ffddff0> /System/Library/Frameworks/EventKit.framework/EventKit
0x3173f000 - 0x31742fff  CaptiveNetwork armv7  <f5cc4b97ce9432da9426f12621453325> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x31839000 - 0x3184ffff  EAP8021X armv7  <fffe86a22bc434a6ae84f23bfecef9d6> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x31854000 - 0x31890fff  iCalendar armv7  <f2836083051132d3aa40ad82d7f73aea> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x31895000 - 0x3189bfff  liblaunch.dylib armv7  <aa2bcba6fc7a36a191958fef2e995475> /usr/lib/system/liblaunch.dylib
0x3189c000 - 0x318b6fff  TelephonyUI armv7  <6d9df4a85ca23acfa0799076fb8e5944> /System/Library/PrivateFrameworks/TelephonyUI.framework/TelephonyUI
0x318b7000 - 0x318d0fff  Twitter armv7  <8fe6d77b99b43d2287e9c51bc4b22456> /System/Library/Frameworks/Twitter.framework/Twitter
0x318d3000 - 0x31947fff  MediaControlSender armv7  <87315c54b2293ab589950341ff91b45d> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x31a2e000 - 0x31a3ffff  AirTraffic armv7  <c9eb888c1bd1322cbda5b01d41be0c7d> /System/Library/PrivateFrameworks/AirTraffic.framework/AirTraffic
0x31a40000 - 0x31a4bfff  AccountSettings armv7  <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x31ac0000 - 0x31ad1fff  libxpc.dylib armv7  <ccf25b1e49ce3b2fa58d8c8546755505> /usr/lib/system/libxpc.dylib
0x31ad2000 - 0x31aeafff  ChunkingLibrary armv7  <c73a4b4b38ae3702bc1feae489d31634> /System/Library/PrivateFrameworks/ChunkingLibrary.framework/ChunkingLibrary
0x31aeb000 - 0x31af8fff  libbsm.0.dylib armv7  <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x31af9000 - 0x31b39fff  libGLImage.dylib armv7  <40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x31c99000 - 0x31d69fff  WebKit armv7  <6ff2796c2f933050ac6ecdee9fc6a216> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x31d7e000 - 0x31d96fff  Notes armv7  <724966ed5cd4395cb70f9c996b123f53> /System/Library/PrivateFrameworks/Notes.framework/Notes
0x31dbf000 - 0x31dc4fff  CrashReporterSupport armv7  <2bb524b3bb3c3eb2932ce13b655b7c7c> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x31e3c000 - 0x31e3cfff  libkeymgr.dylib armv7  <ebd2dddf55d83cf48a18913968775960> /usr/lib/system/libkeymgr.dylib
0x31f5a000 - 0x31f5cfff  MobileInstallation armv7  <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x322d2000 - 0x322d2fff  libCVMSPluginSupport.dylib armv7  <a80aaa9989483ce3a496a061fd1e9e0a> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x322f6000 - 0x32305fff  OpenGLES armv7  <e80acc691001301e96101bb89d940033> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x3230e000 - 0x32accfff  WebCore armv7  <814351ff217e3425a8e532c2e2251f73> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x32acd000 - 0x32ae1fff  PersistentConnection armv7  <65682d21486836a3aa3e17b9461e7b3a> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x32ae2000 - 0x32b2cfff  ManagedConfiguration armv7  <5e0a131bbfec305ea01f9e01f486da63> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x32b2d000 - 0x32b4afff  libsystem_info.dylib armv7  <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x32b4b000 - 0x32baefff  IMCore armv7  <6e26e99b9b5f3829a8486ffd8c64f0d2> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x32bb2000 - 0x32bd0fff  BulletinBoard armv7  <6b4e1e4680c030cb9a0ced9ff69a711f> /System/Library/PrivateFrameworks/BulletinBoard.framework/BulletinBoard
0x32bde000 - 0x32be2fff  IOSurface armv7  <6ae77a40f8e93f28bc466ca93f5675d4> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x32c16000 - 0x32d5ffff  libicucore.A.dylib armv7  <b70646b63f1f3b33896dd8cb91b8dab1> /usr/lib/libicucore.A.dylib
0x32e5f000 - 0x32e62fff  CoreTime armv7  <a398de5ba1e43a11b7008e9bb5a7f6fe> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x32e63000 - 0x32e64fff  libremovefile.dylib armv7  <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x32e70000 - 0x32ef3fff  MapKit armv7  <e39706ac199134a497954e1f1d6d7245> /System/Library/Frameworks/MapKit.framework/MapKit
0x32f33000 - 0x32f33fff  libgcc_s.1.dylib armv7  <eb82984fa36c329387aa518aa5205f3d> /usr/lib/libgcc_s.1.dylib
0x32f86000 - 0x32fcefff  CoreMedia armv7  <eb1f503312be3c93b07b2d0d25177000> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x3312d000 - 0x33131fff  AggregateDictionary armv7  <3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x334cc000 - 0x334cffff  NetworkStatistics armv7  <7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x334d6000 - 0x33506fff  ContentIndex armv7  <7a64670bb2ff3ee39ddee1dc1c72f92d> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x3350f000 - 0x336f3fff  AudioToolbox armv7  <c91e27850452330ea804db6408840fd2> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x337ab000 - 0x337e7fff  AppSupport armv7  <311eac85b2a433a884dacba77217b49e> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x337ea000 - 0x33847fff  StoreServices armv7  <628fbbc73ed93730962c53bfbfde6794> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x338b4000 - 0x338b8fff  libcache.dylib armv7  <d6a7436ed8dc33d795c9b42baf864882> /usr/lib/system/libcache.dylib
0x338b9000 - 0x338bcfff  ActorKit armv7  <434c756a6b053f4ba3c954cfccddbf59> /System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
0x338cd000 - 0x33d6ffff  UIKit armv7  <d72bcc68e76a3a55a963590cdcffe8cd> /System/Library/Frameworks/UIKit.framework/UIKit
0x33db7000 - 0x33dccfff  libresolv.9.dylib armv7  <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x33dcd000 - 0x33dcffff  OAuth armv7  <3ccc08bd120934baba4572552dc18ee4> /System/Library/PrivateFrameworks/OAuth.framework/OAuth
0x33dd0000 - 0x33dd2fff  libCoreFSCache.dylib armv7  <808518e0fbf539af8489f028ca5198c7> /System/Library/Frameworks/OpenGLES.framework/libCoreFSCache.dylib
0x33dd3000 - 0x33dd7fff  IOMobileFramebuffer armv7  <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x33dd8000 - 0x33de2fff  libvMisc.dylib armv7  <e8248c797b9b363594bb652ddf7ce16d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x33deb000 - 0x33f10fff  JavaScriptCore armv7  <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x33f20000 - 0x33f69fff  AddressBook armv7  <b17a2962e9043e0385c3c2c652155f2b> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x33f6c000 - 0x34022fff  AVFoundation armv7  <35cb7a0eb1dc3554a777c1cc11cb0415> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x34023000 - 0x340cdfff  libBLAS.dylib armv7  <bf822cc1a3243ae7b104cf73ca22d352> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x340da000 - 0x340f3fff  libRIP.A.dylib armv7  <1828cddc5dd93c61afbefb59587d7f8a> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x340f4000 - 0x3410dfff  OpenAL armv7  <b038673e21c132ff9d0c4de6502efea5> /System/Library/Frameworks/OpenAL.framework/OpenAL
0x3412a000 - 0x3416dfff  ImageCapture armv7  <e21827dfb65032e1aa7fdf22a4f37fc4> /System/Library/PrivateFrameworks/ImageCapture.framework/ImageCapture
0x3418e000 - 0x341bafff  ACTFramework armv7  <0bc67086eb7b31d090bb4c9c7a54bfb2> /System/Library/PrivateFrameworks/ACTFramework.framework/ACTFramework
0x341bb000 - 0x341c5fff  GraphicsServices armv7  <e21a6e61bdd136b6805a9e3abe2e3d1f> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x3426e000 - 0x3426efff  liblangid.dylib armv7  <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x342a6000 - 0x342aafff  FTClientServices armv7  <21de970d7ebb3e7fb502a0a5451b0806> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x342ab000 - 0x342b2fff  MediaRemote armv7  <42dc1b43dabd3692b97d6aacfbdf0449> /System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote
0x34304000 - 0x34347fff  libcommonCrypto.dylib armv7  <95b49daf4cf038b6bea8010bba3a1e26> /usr/lib/system/libcommonCrypto.dylib
0x3437d000 - 0x3438efff  DataAccessExpress armv7  <e6144ba265da3bb7b9a263aa1a29b054> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x34399000 - 0x343a5fff  CoreVideo armv7  <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x343a6000 - 0x343f4fff  CoreLocation armv7  <44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x34441000 - 0x3452ffff  libiconv.2.dylib armv7  <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2.dylib
0x3453b000 - 0x34551fff  libsystem_kernel.dylib armv7  <7ac5560851ce3cb3981068092074b409> /usr/lib/system/libsystem_kernel.dylib
0x3458c000 - 0x34612fff  CoreMotion armv7  <6a9355d5a8e238b5b8f193605d509e15> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x3462c000 - 0x34684fff  CoreAudio armv7  <be335e8eb6f93594b028a6ddd503a183> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x346a4000 - 0x346acfff  MobileWiFi armv7  <b76c3e9fb78234c392058250d4620e72> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x346b1000 - 0x346d6fff  OpenCL armv7  <ec915bfc3f7633dda61b5fc87459119b> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x346fc000 - 0x3470bfff  MobileDeviceLink armv7  <70ac33720f513f0f97ea2279260678ca> /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x34853000 - 0x34915fff  Celestial armv7  <2a59586b0ae937c3b25fe526924aa885> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x34916000 - 0x34a89fff  MediaPlayer armv7  <63cdf8f9c66d36e7a4e69e2f6cae854f> /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer
0x34acd000 - 0x34ae4fff  WebBookmarks armv7  <bd20a05587783a8e9596eef1d3615ea7> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x34ae5000 - 0x34aebfff  MobileKeyBag armv7  <e1f06241ef0e3f0aae00f15df572077e> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x34aec000 - 0x34bbbfff  IMGSGX535GLDriver armv7  <6108ea3ab17835bc9092b27bd44703d5> /System/Library/Extensions/IMGSGX535GLDriver.bundle/IMGSGX535GLDriver
0x34bd8000 - 0x34e99fff  libLAPACK.dylib armv7  <0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x34e9a000 - 0x34efefff  MessageUI armv7  <b74d79ea691a35ada276f063b7217a20> /System/Library/Frameworks/MessageUI.framework/MessageUI
0x34f52000 - 0x34f59fff  libc++abi.dylib armv7  <bab4dcbfc5943d3fbb637342d35e8045> /usr/lib/libc++abi.dylib
0x34f5a000 - 0x34f95fff  libCGFreetype.A.dylib armv7  <55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x350d1000 - 0x350d7fff  IAP armv7  <17eddbf5590d3cb88d4acbda27447f5b> /System/Library/PrivateFrameworks/IAP.framework/IAP
0x350d8000 - 0x3561cfff  FaceCoreLight armv7  <f326d88709683520b251dc53cb847c11> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x3562b000 - 0x35635fff  libbz2.1.0.dylib armv7  <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x35636000 - 0x356a6fff  CoreImage armv7  <86ac6f5a267637b6b7f8a831dfc7c64b> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x356a7000 - 0x356abfff  libGFXShared.dylib armv7  <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x356ac000 - 0x356e1fff  DataAccess armv7  <89fd0c22338b37538cf61803a0bca9e2> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x356e2000 - 0x35727fff  GeoServices armv7  <a26be2e76e8730ab91a16502aba376be> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x35780000 - 0x35780fff  Accelerate armv7  <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x35781000 - 0x35927fff  CoreData armv7  <b0215b6d4d143859a2b313ecade095ec> /System/Library/Frameworks/CoreData.framework/CoreData
0x35928000 - 0x359c5fff  PhotoLibraryServices armv7  <da975ffd2e003b6a898a7d60b5273d0f> /System/Library/PrivateFrameworks/PhotoLibraryServices.framework/PhotoLibraryServices
0x359f5000 - 0x35a74fff  libsqlite3.dylib armv7  <bf01f5ed47b033d8bde30d735ff44416> /usr/lib/libsqlite3.dylib
0x35a75000 - 0x35ac6fff  CoreText armv7  <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText
0x35ad4000 - 0x35afdfff  ToneLibrary armv7  <7c1be74cc7833f3db25638fbc4ed55b8> /System/Library/PrivateFrameworks/ToneLibrary.framework/ToneLibrary
0x35afe000 - 0x35b02fff  libAccessibility.dylib armv7  <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x35b03000 - 0x35b41fff  IOKit armv7  <fcda71d29d6136dfbd84c1725f4998e5> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x35baa000 - 0x35bf3fff  libc++.1.dylib armv7  <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x35bf4000 - 0x35ce5fff  QuartzCore armv7  <a2afbe6483683d05ad51b106f98776e2> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x35d7c000 - 0x35da0fff  PrintKit armv7  <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x35da1000 - 0x35e47fff  AddressBookUI armv7  <da424fecc66e3628ab03378ae80b38fc> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x35eb5000 - 0x35eb6fff  libdnsinfo.dylib armv7  <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x35ec0000 - 0x35ec6fff  MediaStream armv7  <99a5a80a06f5367c93a7911bf257bf20> /System/Library/PrivateFrameworks/MediaStream.framework/MediaStream
0x35f67000 - 0x35fb3fff  CoreTelephony armv7  <e8eb52ca5fe33c7488a33efd222e7804> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x35fb4000 - 0x35fcafff  libmis.dylib armv7  <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x35fd3000 - 0x35fd7fff  CertUI armv7  <f503892ef60e36108d28d8f9d6144d2a> /System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x35fe3000 - 0x36003fff  libxslt.1.dylib armv7  <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x36004000 - 0x36033fff  MMCS armv7  <527ed7a3b4753ead89e30be95dc3c590> /System/Library/PrivateFrameworks/MMCS.framework/MMCS
0x360b1000 - 0x360b2fff  libsystem_blocks.dylib armv7  <9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib
0x360b3000 - 0x360d6fff  MobileSync armv7  <e42604c550283f4aa517ae8f108b340f> /System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x36654000 - 0x3665afff  XPCObjects armv7  <dc568831fa5b3b22b673c62bc9d21d16> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x36c0d000 - 0x36c23fff  libdispatch.dylib armv7  <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x36c91000 - 0x36d3efff  libxml2.2.dylib armv7  <58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib
0x36d52000 - 0x36d8efff  IMFoundation armv7  <77bb4365a65b32a49523b03da0340dbc> /System/Library/PrivateFrameworks/IMCore.framework/Frameworks/IMFoundation.framework/IMFoundation
0x36e5e000 - 0x36e95fff  Security armv7  <eea56f71fde83c2981f9281dc7823725> /System/Library/Frameworks/Security.framework/Security
0x37021000 - 0x37065fff  MobileCoreServices armv7  <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x37066000 - 0x3706efff  ProtocolBuffer armv7  <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x3707f000 - 0x37111fff  HomeSharing armv7  <969a71b143ce3b84a41af74119131ebd> /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing
0x37188000 - 0x3718efff  liblockdown.dylib armv7  <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x37197000 - 0x371cbfff  MIME armv7  <d30292ea8f7e360fa5f5d5b1b62b602d> /System/Library/PrivateFrameworks/MIME.framework/MIME
0x37283000 - 0x37299fff  DictionaryServices armv7  <6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x372a3000 - 0x372c6fff  Bom armv7  <c3435ecd2e5839f89de51edad0e1bb00> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x372c7000 - 0x374f4fff  MediaToolbox armv7  <ec9bc89489763c6c93f86c5c490b2d69> /System/Library/PrivateFrameworks/MediaToolbox.framework/MediaToolbox
0x37529000 - 0x3755cfff  CoreMediaStream armv7  <f5a0b436d07a3bcea37b43627249177b> /System/Library/PrivateFrameworks/CoreMediaStream.framework/CoreMediaStream
0x3755d000 - 0x3755dfff  libunwind.dylib armv7  <e0a73a57795f3e1698a52ebe6fc07005> /usr/lib/system/libunwind.dylib
0x37571000 - 0x37637fff  GLEngine armv7  <6617f2b4ee283469a5595129889ff049> /System/Library/Frameworks/OpenGLES.framework/GLEngine.bundle/GLEngine
0x3763d000 - 0x3765cfff  libSystem.B.dylib armv7  <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib
0x37664000 - 0x376b5fff  libstdc++.6.dylib armv7  <c352af5a742e3c7a8d4d7e5f6f454793> /usr/lib/libstdc++.6.dylib
0x376c7000 - 0x376c8fff  libdyld.dylib armv7  <977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib
0x37730000 - 0x37807fff  CFNetwork armv7  <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x37808000 - 0x3793ffff  MusicLibrary armv7  <545ed15c56a53f5f9f893706c7af4ab7> /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary
0x379b8000 - 0x379b9fff  CoreSurface armv7  <7850befd26b630f183ee326aaadd7b34> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x379ba000 - 0x37a46fff  libsystem_c.dylib armv7  <f859ce1ad1773f0ba98d7c6e135b7697> /usr/lib/system/libsystem_c.dylib
0x37a49000 - 0x37a4dfff  Marco armv7  <8dea3e558fe534ff868fc92e215ce53b> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x37a81000 - 0x37a84fff  libsystem_network.dylib armv7  <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x37a87000 - 0x37b00fff  ProofReader armv7  <6db611d8df6530d480f97a40bc519f70> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x37b01000 - 0x37b04fff  libcompiler_rt.dylib armv7  <b2c05d8601c13be884097192dca4e187> /usr/lib/system/libcompiler_rt.dylib
0x37bdd000 - 0x37c15fff  VideoToolbox armv7  <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x37c16000 - 0x37c6cfff  GMM armv7  <6b2f7e1aa6be3d69b4c4cf54ed960602> /System/Library/PrivateFrameworks/GMM.framework/GMM
0x37ca3000 - 0x37cb2fff  GenerationalStorage armv7  <d84c3fd0e7bd36e78c256f2f4c5a4e91> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x37cb3000 - 0x37cb9fff  MobileIcons armv7  <ed1b46f917903c9b9baaa2be4392dafe> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x37cbe000 - 0x37ce7fff  AppleAccount armv7  <2ba44023410231fcb3f72f762ea3ce6e> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x37e6b000 - 0x37fb0fff  CoreGraphics armv7  <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x37fb7000 - 0x38065fff  Message armv7  <b8221d43401d315fb84398b7aa570fc1> /System/Library/PrivateFrameworks/Message.framework/Message 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:37:47.163

阅读这两篇文章，您将掌握查找和消除崩溃错误所需的所有知识

[http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)
[http://www.raywenderlich.com/10505/my-app-crashed-now-what-part-2](http://www.raywenderlich.com/10505/my-app-crashed-now-what-part-2)

# php - 在 DB 行模板的循环中替代 include()？

> ID：10208491
> 
> 赞同：2
> 
> 时间：2012-04-18T11:34:56.180
> 
> 标签：php

我正在用 PHP 编写一个数据提供程序类，以帮助我加快多行 SQL 查询结果的呈现速度。基本上，该类有一堆与 SQL 相关的属性和方法来帮助分页、排序和最终呈现数据。至于后者，我希望能够轻松地对行进行模板化，因此我编写了一个名为 render() 的方法，可以使用行模板文件作为参数从视图文件（在 MVC 模型中）调用该方法。它看起来类似于：

```
public function render($row_template_file) {
    if($result = mysql_query($this->query)) {
        while($row = mysql_fetch_array($result)) {
            include $row_template_file;
        }
    }
} 
```

实际的方法比这更复杂（它检查模板文件是否存在，使用数据抽象类而不是 mysql_* 函数等），但你明白了。行模板文件基本上是直接输出的 HTML，即：

```
<div class="row">
    <div class="foo"><?php echo $row['foo']; ?></div>
    <div class="bar"><?php echo $row['bar']; ?></div>
</div> 
```

这种方法效果很好，唯一的问题是循环中的 include() 在性能方面不是一个好主意，尤其是在渲染大量行时。在保持以这种方式对行进行模板化的能力的同时，有什么可以替换它的吗？这里几乎没有类似的问题，但所有建议的解决方案都涉及将逻辑与演示混合，这是我想要避免的。我想在第一次迭代期间创建一个匿名函数，然后在所有后续迭代中调用它，但也许我想多了，或者在这里重新发明了轮子。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:12:56.793

`printf()`/建议的`sprintf()`解决方案很简洁，但不允许在模板中包含特定于表示的逻辑，例如：

```
<div class="gender">
    <?php if($row['gender'] == 'f') : ?>
    <img src="female_icon.gif" />
    <?php else : ?>
    <img src="male_icon.gif" />
    <?php endif; ?>
</div> 
```

我知道，我不应该把模板写成“基本上是 HTML” :-)

我一直在使用我在问题中提到的匿名函数解决方案，尽管它看起来不是很漂亮，但它可以工作并且比多个包含要快得多，所以我将其添加为可能的答案之一：

```
public function render($row_template_file) {
    if($result = mysql_query($this->query)) {
        $render_row = create_function('$row', '?>'.file_get_contents($row_template_file).'<?php ');
        while($row = mysql_fetch_array($result)) {
            $render_row($row);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:44:55.863

也许改用 php 的 printf() / [sprintf()](http://www.php.net/manual/en/function.sprintf.php)函数？

因此，您的模板文件将包含如下代码：

```
<div class="row">
    <div class="foo">%s</div>
    <div class="bar">%s</div>
</div> 
```

在循环之前，您只需将其加载到变量中一次：

```
$tmpl = file_get_contents( $row_template_file); 
```

在循环中，您只需将变量放入模板中：

```
printf( $tmpl, $row['foo'], $row['bar']); 
```

请参阅上面链接中的示例 #3 和 #4，了解“参数交换”——在模板中使用编号位置的方法——不必担心不同模板中参数的不同顺序。

希望这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:03:30.700

可以尝试使用 eval 函数。对 php.net 的评论可能会对您有所帮助： [http ://www.php.net/manual/ru/function.eval.php#108091](http://www.php.net/manual/ru/function.eval.php#108091)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T11:41:39.697

这几乎感觉像是一个太简单的解决方案，也许我只是不明白什么是大问题，但是使用 PHP 函数呢？

```
function outputRow($row) {
    echo '<div class="row">';
    echo '<div class="foo">' . $row['foo'] . '</div>';
    echo '<div class="bar">' . $row['bar'] . '</div>';
    echo '</div>';
} 
```

而不是包括，你打电话`outputRow($row)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T11:46:58.570

将模板创建为带有占位符的字符串并将值替换到其中。将其传递给`render()`方法。

然后，您只需要决定如何最好地获取字符串 - 通过`file_get_contents`（我会这样做）或简单地将其硬编码到某个“模板”类中，从中提取一个接口 -并传递它。

# android - http连接错误android.os.networkonmainthreadexception

> ID：10208494
> 
> 赞同：0
> 
> 时间：2012-04-18T11:35:02.293
> 
> 标签：android, connection, tablet

我为 android 编写了应用程序，但我遇到了一个问题。它适用于手机，但不适用于平板电脑。我有错误：http 连接错误 android.os.networkonmainthreadexception。这是我的代码：

公共类 AktualizacjaActivity { 公共静态最终字符串 KEY_121 = "http://xxx.php";

```
public String getServerData(String returnString,Context context) {
    DatabaseAdapter db1 = new DatabaseAdapter(context);
    db1.open();
    String question="";
    try
    {

        Cursor c = db1.makeCursor(DatabaseAdapter.STRUCT, new String[] {DatabaseAdapter.ID},DatabaseAdapter.KODE_ID+"='"+returnString+"'",null);
        c.moveToFirst();
        question+="NOT IN('";
        while(!c.isLast())
        {
        question+=c.getString(c.getColumnIndex(DatabaseAdapter.ID))+"','";
        c.moveToNext();
        }
        question+=c.getString(c.getColumnIndex(DatabaseAdapter.ID))+"')";

    }
    catch(Exception e)
    {

    }

    db1.close();
    if(question.equalsIgnoreCase("NOT IN('")) question="";

   InputStream is = null;

   String result = "";
    //the year data to send, warunek rok większy od 1980
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("code_id",returnString));
    nameValuePairs.add(new BasicNameValuePair("no", question));

    //http post
    try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(KEY_121);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

    }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
    }

    //convert response to string
    try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"ISO-8859-2"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();

    }catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
    }
    //parse json data
    DatabaseAdapter db = new DatabaseAdapter(context);
    db.open();
    try{

            JSONArray jArray = new JSONArray(result);

            for(int i=0;i<jArray.length();i++){
                    JSONObject json_data = jArray.getJSONObject(i);

                  db.addItmem("INSERT INTO my_kodeks_struktura VALUES("  
                    +json_data.getInt("id")+","
                    +json_data.getInt("code_id")+","+
                    json_data.getInt("position_art")+",'"+
                    json_data.getString("position_art_a")+"',"+
                    json_data.getInt("level")+",'"+
                    json_data.getString("name")+"');");

            }

    }catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
    }
    db.close();
    return "Upd"; 

}    

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:45:10.450

正如例外所说：您不能在 ui 线程上进行 http 调用。至少不在较新的操作系统上。

考虑使用 AsyncTask 进行此类调用。

# java - Eclipse 与 EGit，git-blame 信息很难看到

> ID：10208495
> 
> 赞同：27
> 
> 时间：2012-04-18T11:35:09.067
> 
> 标签：java, eclipse, git, egit, blame

使用带有 EGit 插件和 JDK 1.7 的 Eclipse Indigo Service Release 2。我已经看到它应该支持责备注释，但我无法让它像我[在 Eclipse Wiki 上](http://wiki.eclipse.org/EGit/New_and_Noteworthy/1.0.0#Blame_Annotations "在 Eclipse 维基上")看到的那样显示。

这是我的样子，你看不到指针，但我悬停在垂直的棕色线上：

![在此处输入图像描述](../Images/81a175d6ffc7975326ff9a226b7b38ec.png)

有人知道如何扩展注释视图吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-18T12:01:48.363

Right-click on the brown line, *Revisions -> Show Author*.

# javascript - 如何在 JS 中为静态页面调用 onbeforeunload 行为？

> ID：10208500
> 
> 赞同：0
> 
> 时间：2012-04-18T11:35:33.410
> 
> 标签：javascript

我有一个不保存更改就无法退出的文档。我使用 onbeforeunload 询问用户是否真的想退出。如果“退出”场景是单击链接并重新加载页面，则它可以正常工作。但我也有 JS 菜单，可以将用户从文档编辑器移动到设置，并且它在没有网站重定向的情况下完成，但完全由 JS 通过替换“文档视图”并显示“编辑设置视图”来处理。但是移动到编辑设置视图会使文档中的更改像正常重新加载一样未保存。那么如何调用浏览器来询问用户是否真的想像在这种情况下发生页面重新加载时那样移动到编辑设置视图呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:38:23.267

如果不离开页面，你就不能。但是你可以用你自己的更好、更友好的模态对话框来询问他们（一个绝对定位`div`，`zIndex`比任何其他的都大，可能`iframe`在它下面有一个垫片来吃掉所有的点击，等等）。你可以自己动手，但是有*很多*模态对话框库可以节省你的时间。

或者，如果您愿意，您可以使用[`confirm`](https://developer.mozilla.org/en/DOM/window.confirm)，它没有很好的用户体验（但是，也没有`onbeforeunload`），但是非常容易编码并且完全跨浏览器兼容（尽管链接指向 Mozilla 页面）。

# iphone - 使用 NSCoding 缓存文件的框架

> ID：10208518
> 
> 赞同：1
> 
> 时间：2012-04-18T11:36:25.980
> 
> 标签：iphone, objective-c, ios

我想使用 NSCoding 保存/加载我的类的实例。每个类都应该有一个单独的缓存时间/生存时间。当应用程序启动时，如果我的类的实例未过期或正常创建，我希望从缓存中加载它。

这个问题一定已经解决了数百次了......

有没有一个很好的框架来做这件事，还是我应该自己动手？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:39:26.643

~~也许您可以尝试[NSCache](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSCache_Class/Reference/Reference.html)~~ NSCache 不符合 NSCoding 协议，因此您无法归档/取消归档缓存。

> NSCache 对象是一个类似于集合的容器或缓存，用于存储键值对，类似于 NSDictionary 类。开发人员经常合并缓存来临时存储具有创建成本高昂的瞬态数据的对象。重用这些对象可以提供性能优势，因为不必重新计算它们的值。但是，这些对象对应用程序并不重要，如果内存紧张，可以将其丢弃。如果丢弃，则必须在需要时重新计算它们的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:53:01.743

需要明确的是，您可以使用保存或加载*对象*，而不是*类*`NSCoding`。

我不知道有一个框架可以做到这一点。您可以将文件修改时间用作缓存时间，也可以将其保存在单独的数据库中。如果不是太多不同的类，您可以将`NSUserDefaults`其用作单独的数据库。每个班级都将被编码以知道自己的生存时间。

# autotools - 使用 PKG_CHECK_MODULES 时，自动生成的 Makefile 不传递库头的标志

> ID：10208523
> 
> 赞同：3
> 
> 时间：2012-04-18T11:36:42.747
> 
> 标签：autotools, autoconf, automake, pkg-config

我的项目依赖于一个库（更准确地说，是 GTK+），所以我在我的 中添加了以下配置`configure.ac`：

```
PKG_CHECK_MODULES([GTK], [gtk+-2.0])
AC_SUBST([GTK_CFLAGS])
AC_SUBST([GTK_LIBS]) 
```

我`Makefile.am`的是：

```
bin_PROGRAMS = secretary
secretary_SOURCES = secretary.c 
```

反过来，我`secretary.c`的如下：

```
#include <gtk/gtk.h>

int main(int argc, char *argv[]) {
    gtk_init(&argc, &argv);
    GtkWidget *window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_widget_show(window);
    gtk_main();
    return 0;
} 
```

但是，当我运行时`make`（当然，在调用之后`./configure`）我得到了这个错误：

```
gcc -DHAVE_CONFIG_H -I. -g -O2 -MT secretary.o -MD -MP -MF \
   .deps/secretary.Tpo -c -o secretary.o secretary.c
secretary.c:1:21: fatal error: gtk/gtk.h: File or directory not found. 
```

我错过了什么？为什么 autoconf 没有将正确的标志传递给 gcc？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:35:23.453

使用时`PKG_CHECK_MODULES`，需要在`Makefile.am`. 最简单的方法是将其添加到`AM_LDFLAGS`and `AM_CPPFLAGS`：

```
AM_LDADD = @GTK_LIBS@
AM_CPPFLAGS = @GTK_CFLAGS@ 
```

如果您想更具体，您可以添加：

```
secretary_LDADD = @GTK_LIBS@
secretary_CPPFLAGS = @GTK_CFLAGS@ 
```

根本不使用可能更容易`PKG_CHECK_MODULES`，让用户通过通常的机制（`LDFLAGS`在标准位置分配或安装库）指定库的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T02:19:15.647

从@William Pursell 的建议开始，我寻找解决方案。这个答案有点冗长，因为我觉得有必要证明我为什么不接受这个有用的帖子作为答案。

**注意**：*如果您正在寻找一些神奇的线条，只需跳到最后的“解决方案”部分。*

# 尝试建议的解决方案

我尝试了 William Pursell 解决方案，但发现了一个问题：GCC 4.6.1 在处理某些参数的排序时要求特别高。因此，当我将变量设置如下：

```
secretary_CPPFLAGS = @GTK_CFLAGS@ # DOES NOT WORK!
secretary_LDFLAGS = @GTK_LIBS@    # DOES NOT WORK! 
```

我得到以下`gcc`调用行：

```
gcc -std=gnu99  -g -O2 -pthread -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgio-2.0 \
    -lpangoft2-1.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo -lpango-1.0 \
    -lfreetype lfontconfig -lgobject-2.0 -lgmodule-2.0 -lgthread-2.0 -lrt \
    -lglib-2.0    -o secretary secretary-secretary.o 
```

其中库在目标代码*之前*传递给编译器。`.o`GCC 不接受它并给了我这个错误：

```
secretary-secretary.o: In function `main':
/home/adam/software/secretary-gtk/secretary.c:4: undefined reference to `gtk_init'
/home/adam/software/secretary-gtk/secretary.c:5: undefined reference to `gtk_window_new'
/home/adam/software/secretary-gtk/secretary.c:6: undefined reference to `gtk_widget_show'
/home/adam/software/secretary-gtk/secretary.c:7: undefined reference to `gtk_main' 
```

# 后续研究

寻找解决方案，我发现@uidzer0 有[同样的问题](https://stackoverflow.com/questions/8979128/properly-include-glib-headers-with-autotools)并解决了它 - 但没有发布全面的解释......所以我去看了[他的项目](https://github.com/benlemasurier/stormfs)。我查看了它[`configure.ac`](https://github.com/benlemasurier/stormfs/blob/master/configure.ac)在哪里找到了用法`PKG_CHECK_MODULES`：

```
PKG_CHECK_MODULES([FUSE], [fuse >= 2.8.3])
PKG_CHECK_MODULES([GLIB], [glib-2.0 >= 2.22.5])
PKG_CHECK_MODULES([GTHREAD], [gthread-2.0])
PKG_CHECK_MODULES([CURL], [libcurl >= 7.16.0]) 
```

所以我寻找使用生成的变量（`FUSE_LIBS`等）的位置。我在[`src/Makefile.am`](https://github.com/benlemasurier/stormfs/blob/master/src/Makefile.am)文件中找到了它们：

```
stormfs_CFLAGS = -D_REENTRANT \
                 -DFUSE_USE_VERSION=26 \
                 -D_FILE_OFFSET_BITS=64 \
                 -DSYSCONFDIR=\"${sysconfdir}\" \
                 ${FUSE_CFLAGS} \
                 ${CURL_CFLAGS} \
                 ${GLIB_CFLAGS} \
                 ${GTHREAD_CFLAGS}
stormfs_LDADD = ${LIBS} \
                ${FUSE_LIBS} \
                ${CURL_LIBS} \
                ${GLIB_LIBS} \
                ${GTHREAD_LIBS} 
```

# 解决方案

所以我得出结论，我不应该设置`*_CPPFLAGS`/`*_LDFLAGS`而是设置`*_CFLAGS`and`*_LDADD`标志。我得到的（工作）配置是：

```
bin_PROGRAMS = secretary
secretary_SOURCES = secretary.c
secretary_CFLAGS = @GTK_CFLAGS@
secretary_LDADD = @GTK_LIBS@ 
```

# javascript - 在 Couchdb (iriscouch) POST 请求中添加新文档失败，状态为 500

> ID：10208524
> 
> 赞同：2
> 
> 时间：2012-04-18T11:36:45.163
> 
> 标签：javascript, http, node.js, couchdb

几个月前，下面的代码运行良好，用于在 couchdb (iriscouch) 中添加一个新文档。

现在我得到一个 HTTP 状态 500。有解决方法吗？

代码（在 Node.js 中）：

```
var http=require('http');

var options = {
  host: 'sbose78.iriscouch.com',
  path: '/bosedb1',
  method: 'POST',

  headers:{
 'Content-Type':'application/json',
 'accept':'application/json'
   }
 };

var data={
   'servings' : 4,
   'subtitle' : "Delicious with fresh bread",
   'title' : "Fish Stew------"
};

var req = http.request(options, function(res) {
   console.log('STATUS: ' + res.statusCode);
   console.log('HEADERS: ' + JSON.stringify(res.headers));
     var body="";

   res.on('data', function (chunk) {
     body+=chunk;
         console.log('BODY(inside listener):\n ' + body);

   }); 

  console.log('BODY (outside listener): ' + body);

});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

 //write data to request body
req.write(JSON.stringify(data));
req.end(); 
```

* * *

响应：

```
 STATUS: 500
HEADERS: {"content-type":"text/plain","content-length":"239"}
BODY(inside listener):
 Internal routing error

Sorry, we cannot connect to the intended server.

We have just been notified of this problem. We will correct it as soon as possible.

Feel free to contact us if you have any questions: support@iriscouch.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:41:26.433

看起来[http://www.iriscouch.com/](http://www.iriscouch.com/)目前已关闭：

```
Host not found: www.iriscouch.com 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T12:20:28.550

你有没有考虑过使用抽象层，至少做http？

*   [要求](http://github.com/mikeal/request)

如果你不这样做，你的代码库将会有很多 http 代码:)

我个人编写并维护了基于请求的 node.js CouchDB 客户端，如果您对此感到好奇，可以在[github上找到更多信息](http://github.com/dscape/nano)

# performance - Solr 索引时速度慢

> ID：10208536
> 
> 赞同：7
> 
> 时间：2012-04-18T11:37:19.440
> 
> 标签：performance, solr, spell-checking

我有超过 100 个 CSV 文件，其中有 10000 行，我正在编制索引。然后查询拼写是类似的拼写。虽然这样做索引非常慢。

我找到了一些很好的解决方案

1.  使用主索引和从属进行查询的主从。[如何更快地索引 Solr 中的记录（并且不影响 ColdFusion Web 服务器）？两个JVM？](https://stackoverflow.com/questions/3926137/how-to-index-records-in-solr-faster-and-not-impact-coldfusion-web-server-two)

2.  使用三范围[http://www.lucidimagination.com/blog/2009/05/13/exploring-lucene-and-solrs-trierange-capabilities/](http://www.lucidimagination.com/blog/2009/05/13/exploring-lucene-and-solrs-trierange-capabilities/)

我知道这两种解决方案是不同的我想要一些应该更高优先级的评论？第二种解决方案是否适合我的问题？如果我的拼写检查问题有更多解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T17:36:37.950

索引通常会使查询变慢。如果您有快速磁盘，索引将使用 100% 的 CPU，否则，它将使用 100% 的磁盘带宽。无论哪种方式，查询都会很慢。

主/从配置是此问题的标准解决方案。从服务器专用于搜索查询。它们唯一变慢的时间是在复制之后，当创建具有新缓存的新搜索器时。

主/从配置可能不会使索引更快，但会避免查询性能变慢。已经进行了多线程索引的工作，因此您可能希望一次测试多个索引任务。如果瓶颈是磁盘 IO，这将无济于事，只有当它使用 100% 的 CPU 时。

Trie 字段非常适合范围查询。我怀疑它们会对索引速度产生很大影响。

最后，您可能需要调整拼写建议选项。拼写建议可能需要大量工作，并且您可以通过不同的、更便宜的选项获得良好的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-02T22:19:32.780

在进行批量索引时，您通常可以实现良好的查询性能，而无需借助蓝/绿设置。

以下是实现这一目标的一些提示：

*   如果您要插入大量文档，请尽可能使用[https://github.com/lucidworks/spark-solr 。](https://github.com/lucidworks/spark-solr)这有一个相对容易使用的强大的批量导入机制。如果没有必要，不要编写自己的批量导入到 Solr 代码。
*   如果您必须使用 solrj，请确保您是分批提交。见`add(Collection<SolrInputDocument)`方法。如果你用插入 http 请求压倒 solr，它会大大降低查询速度。
*   不要过于频繁地提交。提交是昂贵的！
*   使用自动加热。这是一个 solr 功能，它会在每次创建新搜索器时（提交后）使文件系统缓存预热。这对于确保通过将所有搜索保留在有效缓存中来确保在提交后获得良好的快速查询至关重要。
*   如果您有很多分片（例如，超过 20 个），请考虑采用“交错提交”方法，一次提交一个分片。这是一个 Python 示例，它有 16 个 solr 服务器，总共有 64 个分片。通过一次只提交 1 个分片，它可以防止整个集合同时提交，从而减少提交的影响。

```
while :
do
  curl -v 'http://solr-0.solr:8983/solr/MyCollection_shard8_0_0_replica_n127/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-0.solr:8983/solr/MyCollection_shard8_0_1_replica_n128/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-0.solr:8983/solr/MyCollection_shard8_1_0_replica_n131/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-0.solr:8983/solr/MyCollection_shard8_1_1_replica_n132/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-1.solr:8983/solr/MyCollection_shard4_0_0_replica_n95/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-1.solr:8983/solr/MyCollection_shard4_0_1_replica_n96/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-1.solr:8983/solr/MyCollection_shard4_1_0_replica_n99/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-1.solr:8983/solr/MyCollection_shard4_1_1_replica_n100/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-2.solr:8983/solr/MyCollection_shard3_0_0_replica_n87/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-2.solr:8983/solr/MyCollection_shard3_0_1_replica_n88/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-2.solr:8983/solr/MyCollection_shard3_1_0_replica_n91/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-2.solr:8983/solr/MyCollection_shard3_1_1_replica_n92/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-3.solr:8983/solr/MyCollection_shard7_0_0_replica_n119/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-3.solr:8983/solr/MyCollection_shard7_0_1_replica_n120/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-3.solr:8983/solr/MyCollection_shard7_1_0_replica_n123/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-3.solr:8983/solr/MyCollection_shard7_1_1_replica_n124/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-4.solr:8983/solr/MyCollection_shard2_0_0_replica_n79/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-4.solr:8983/solr/MyCollection_shard2_0_1_replica_n80/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-4.solr:8983/solr/MyCollection_shard2_1_0_replica_n83/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-4.solr:8983/solr/MyCollection_shard2_1_1_replica_n84/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-5.solr:8983/solr/MyCollection_shard1_0_0_replica_n71/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-5.solr:8983/solr/MyCollection_shard1_0_1_replica_n72/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-5.solr:8983/solr/MyCollection_shard1_1_0_replica_n75/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-5.solr:8983/solr/MyCollection_shard1_1_1_replica_n76/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-6.solr:8983/solr/MyCollection_shard5_0_0_replica_n159/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-6.solr:8983/solr/MyCollection_shard5_0_1_replica_n161/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-6.solr:8983/solr/MyCollection_shard5_1_0_replica_n163/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-6.solr:8983/solr/MyCollection_shard5_1_1_replica_n165/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-7.solr:8983/solr/MyCollection_shard6_0_0_replica_n151/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-7.solr:8983/solr/MyCollection_shard6_0_1_replica_n153/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-7.solr:8983/solr/MyCollection_shard6_1_0_replica_n155/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-7.solr:8983/solr/MyCollection_shard6_1_1_replica_n157/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-8.solr:8983/solr/MyCollection_shard8_0_0_replica_n135/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-8.solr:8983/solr/MyCollection_shard8_0_1_replica_n137/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-8.solr:8983/solr/MyCollection_shard8_1_0_replica_n139/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-8.solr:8983/solr/MyCollection_shard8_1_1_replica_n141/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-9.solr:8983/solr/MyCollection_shard4_0_0_replica_n143/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-9.solr:8983/solr/MyCollection_shard4_0_1_replica_n145/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-9.solr:8983/solr/MyCollection_shard4_1_0_replica_n147/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-9.solr:8983/solr/MyCollection_shard4_1_1_replica_n149/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-10.solr:8983/solr/MyCollection_shard6_0_0_replica_n111/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-10.solr:8983/solr/MyCollection_shard6_0_1_replica_n112/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-10.solr:8983/solr/MyCollection_shard6_1_0_replica_n115/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-10.solr:8983/solr/MyCollection_shard6_1_1_replica_n116/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-11.solr:8983/solr/MyCollection_shard5_0_0_replica_n103/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-11.solr:8983/solr/MyCollection_shard5_0_1_replica_n104/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-11.solr:8983/solr/MyCollection_shard5_1_0_replica_n107/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-11.solr:8983/solr/MyCollection_shard5_1_1_replica_n108/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-12.solr:8983/solr/MyCollection_shard2_0_0_replica_n167/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-12.solr:8983/solr/MyCollection_shard2_0_1_replica_n169/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-12.solr:8983/solr/MyCollection_shard2_1_0_replica_n171/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-12.solr:8983/solr/MyCollection_shard2_1_1_replica_n173/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-13.solr:8983/solr/MyCollection_shard1_0_0_replica_n175/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-13.solr:8983/solr/MyCollection_shard1_0_1_replica_n177/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-13.solr:8983/solr/MyCollection_shard1_1_0_replica_n179/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-13.solr:8983/solr/MyCollection_shard1_1_1_replica_n181/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-14.solr:8983/solr/MyCollection_shard3_0_0_replica_n183/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-14.solr:8983/solr/MyCollection_shard3_0_1_replica_n185/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-14.solr:8983/solr/MyCollection_shard3_1_0_replica_n187/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-14.solr:8983/solr/MyCollection_shard3_1_1_replica_n189/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  curl -v 'http://solr-15.solr:8983/solr/MyCollection_shard7_0_0_replica_n191/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-15.solr:8983/solr/MyCollection_shard7_0_1_replica_n193/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-15.solr:8983/solr/MyCollection_shard7_1_0_replica_n195/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'
  curl -v 'http://solr-15.solr:8983/solr/MyCollection_shard7_1_1_replica_n197/update?update.distrib=FROMLEADER&waitSearcher=true&openSearcher=true&commit=true&softCommit=false&distrib.from=blah&commit_end_point=true&version=2&expungeDeletes=false'

  # 15 minute commit timer
  sleep 900
done 
```

*   确保您的过滤器缓存足够大。这可以防止过滤占用 CPU 和磁盘 IO，因此您会注意到索引时的影响要小得多。
*   考虑定期进行 Solr 优化。通过进行 solr 优化，更多的索引可能适合内存，从而减少磁盘 IO。通过减少磁盘 IO，新文档不太可能需要访问磁盘，从而提高磁盘性能。
*   如果 Solr 在共享硬件上，请确保正在运行的其他应用程序没有占用 CPU 和磁盘资源。例如，如果您使用 Apache Tika 解析文档，请确保 Tika 在另一台主机上运行。Solr 最好自己留下。
*   确保 VM 上有足够的内存用于文件系统缓存。例如。如果你有一台 32G RAM 的机器，你应该考虑不要让你的最大堆大小太大。例如，如果您有 -Xmx28G 它不会为操作系统的文件系统缓存留下足够的内存。使用经验分析来确定您实际需要多少堆。例如 -Xmx12G 会将 50% 的内存留给 FS 缓存。您在查询期间使用缓存的次数越多，索引对您的影响就越小。

# sql-server - 在 SQL Server 中创建带有指示类型的额外列的视图

> ID：10208537
> 
> 赞同：1
> 
> 时间：2012-04-18T11:37:21.547
> 
> 标签：sql-server, view, sql-server-2005-express

我需要创建一个视图，其中有一列指示该行来自哪个表。

我正在使用 SQL Server 2005 Express

更具体地说，我有一个数据库，其中包含一个名为 users 的表、一个名为 developers 的表和一个包含银行帐户数据的单独表。我需要一个显示用户和开发人员的银行帐户信息的视图，以及一个额外的列来说明该行是来自用户还是开发人员。

我有这个：

```
CREATE VIEW bankDataView
AS

SELECT accountinfo, name, lastname, devcode as id
FROM developer d INNER JOIN bankdata bd ON
d.bankdataID = bd.bankDataID
UNION
SELECT accountinfo, name, lastname, userID as id
FROM user u INNER JOIN bankdata bd ON
u.bankdataID = bd.bankdataID 
```

但现在我需要知道如何获得额外的专栏。

这是可能的，还是我应该考虑另一种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:39:10.890

只需在每个选择语句中添加一个额外的列，说明数据来自哪个表。然后您可以轻松区分开发人员和用户。

```
CREATE VIEW bankDataView
AS

SELECT accountinfo, name, lastname, devcode as id, 'Developer' as TableName
FROM developer d 
INNER JOIN bankdata bd 
    ON d.bankdataID = bd.bankDataID
UNION
SELECT accountinfo, name, lastname, userID as id, 'User' as TableName
FROM user u 
INNER JOIN bankdata bd 
    ON u.bankdataID = bd.bankdataID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:59:16.610

bluefeet 在逻辑上是正确的，但是如果您使用 UNION ALL 而不是普通的 UNION 性能会更好。Plain UNION 做了额外的工作来消除联合中的重复结果。由于新的 TableName 列，不会有重复的结果

# c# - jquery value 插件按钮更改

> ID：10208543
> 
> 赞同：0
> 
> 时间：2012-04-18T11:37:27.867
> 
> 标签：c#, jquery, ajax-upload

我在我的网站中使用 Valum 文件上传插件以及 jquery-ui 主题 excite-bike。现在我的问题是按钮，它提供了 valum 插件来上传文件。我想用我的按钮来调用 valum`s uploader 。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:44:13.143

您不要将 Valum Uploader 与 a 一起使用`button`-您将其传递给一个容器，它会为您创建“按钮”-这实际上是一个具有某些样式的 div ...您可以`div`使用`qq-upload-button`该类设置创建的样式

# hql - HQL 查找具有相交子列表的对象，包括大小

> ID：10208544
> 
> 赞同：1
> 
> 时间：2012-04-18T11:37:31.017
> 
> 标签：hql, intersection, sublist

嗨，我正在使用 hibernate 4 并尝试查找 HQL

一个简单的 OneToMany：

主要对象

```
@Entity
public class MainObject {
 @OneToMany
   List<SubObject> list;
} 
```

子

```
@Entity
public class SubObject {
} 
```

现在我有一个子对象列表。如何找到包含我列表中至少两个子对象的所有 MainObjects？

# asp.net - 如何在代码隐藏文件中的 asp.net 表中插入标签？

> ID：10208548
> 
> 赞同：3
> 
> 时间：2012-04-18T11:37:40.283
> 
> 标签：asp.net, html-table, code-behind, tablerow

我在文件后面的代码中添加表格。我想在其中添加标签。

```
<table id="tbl" runat="server">
   <tr>
        <th>test</th>
       <td>
       </td>
   </tr>
</table> 
```

我不知道如何通过代码添加。

那么谁能告诉我如何添加标签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T11:41:36.003

```
HtmlTable t = tbl; //just to make it clear your table is an HtmlTable
tbl.Rows[0].Cells.Add(new HtmlTableCell("th")); //adds an emtpy cell to the first row with th tagname 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T11:47:18.530

```
Table t = new Table();
TableHeaderRow th = new TableHeaderRow();
th.Controls.Add(new LiteralControl("test"));
t.Controls.Add(th);
containerControlForTheTable.Controls.Add(t); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-15T08:41:51.730

```
Dim tr As New HtmlTableRow
tr.Cells.Add(New HtmlTableCell("th"))
yourtable.Rows.Add(tr) 
```

# installation - 如何在每用户安装程序中使用 WiX 安装程序将应用程序与现有文件类型相关联？

> ID：10208551
> 
> 赞同：5
> 
> 时间：2012-04-18T11:37:48.397
> 
> 标签：installation, wix, windows-installer

与[如何使用 WiX 安装程序将应用程序与现有文件类型相关联？](https://stackoverflow.com/questions/2772452/how-to-associate-application-with-existing-file-types-using-wix-installer)以及[如何使用 WiX 安装程序注册文件类型/扩展名？](https://stackoverflow.com/questions/138550/how-to-register-file-types-extensions-with-a-wix-installer).

如果安装是按用户进行的，我如何将应用程序与现有文件类型相关联？

不允许使用 HKLM 密钥

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T13:42:25.767

我相信这与每台机器的情况并没有什么不同。对于[downmarker](https://bitbucket.org/wcoenen/downmarker)（按用户安装），我把它放在安装应用程序可执行文件的组件中：

```
<!-- associate .md file extension with downmarker -->
<ProgId Id="DownMarker" Icon="downmarker.exe" 
    Description="Markdown Document">
    <Extension Id="md" >
       <Verb Id="open" Argument="&quot;%1&quot;"
          TargetFile="downmarker.exe" />
    </Extension>
</ProgId> 
```

或者您可以查看[完整的 wxs 文件](https://bitbucket.org/wcoenen/downmarker/raw/8a21182a274d/setup/product.wxs)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T02:46:50.803

在这里我们开始.. 这应该适用于每个用户的应用程序，并提供您正在寻找的大部分好东西，除了 start > run 仅适用于每台机器。

```
<Icon Id="filetype.ico" SourceFile="filetype.ico" />
<Component Id="MyApp.exe" Directory="APPLICATIONFOLDER" Guid="*">
    <File Id="MyApp.exe" Name="MyApp.exe" KeyPath="yes"/>

    <Shortcut Id="startmenuShortcut" Directory="ProgramMenuFolder" Name="MyApp" Icon="$(var.product).ico" IconIndex="0" WorkingDirectory="APPLICATIONFOLDER" Advertise="yes" />

    <!-- Capabilities keys for Vista/7 "Set Program Access and Defaults" -->
    <RegistryValue Root="HKCU" Key="SOFTWARE\MyApp\Capabilities" Name="ApplicationDescription" Value="!(loc.ApplicationDescription)" Type="string" />
    <RegistryValue Root="HKCU" Key="SOFTWARE\MyApp\Capabilities" Name="ApplicationIcon" Value="[APPLICATIONFOLDER]MyApp.exe,0" Type="string" />
    <RegistryValue Root="HKCU" Key="SOFTWARE\MyApp\Capabilities" Name="ApplicationName" Value="!(loc.ApplicationName)" Type="string" />
    <RegistryValue Root="HKCU" Key="SOFTWARE\MyApp\Capabilities\DefaultIcon" Value="[APPLICATIONFOLDER]MyApp.exe,1" Type="string" />
    <RegistryValue Root="HKCU" Key="SOFTWARE\MyApp\Capabilities\FileAssociations" Name=".xyz" Value="MyApp.Document" Type="string" />
    <RegistryValue Root="HKCU" Key="SOFTWARE\MyApp\Capabilities\MIMEAssociations" Name="application/xyz" Value="MyApp.Document" Type="string" />
    <RegistryValue Root="HKCU" Key="SOFTWARE\MyApp\Capabilities\shell\Open\command" Value="&quot;[APPLICATIONFOLDER]MyApp.exe&quot; &quot;%1&quot;" Type="string" />
    <RegistryValue Root="HKCU" Key="SOFTWARE\RegisteredApplications" Name="MyApp" Value="SOFTWARE\MyApp\Capabilities" Type="string" />

    <!-- Extend to the "open with" list + Win7 jump menu pinning  -->
    <RegistryValue Root="HKCR" Key="Applications\MyApp.exe\SupportedTypes" Name=".xyz" Value="" Type="string" />
    <RegistryValue Root="HKCR" Key="Applications\MyApp.exe\shell\open" Name="FriendlyAppName" Value="!(loc.ApplicationName)" Type="string" />

    <!-- MyApp.Document ProgID -->
    <RegistryValue Root="HKCR" Key="MyApp.Document" Name="FriendlyTypeName" Value="!(loc.DescXYZ)" Type="string" />
    <ProgId Id="MyApp.Document" Description="!(loc.DescXYZ)" Icon="filetype.ico" Advertise="yes">
        <Extension Id="xyz">
            <Verb Id="open" Command="!(loc.ExplorerMenuOpenXYZ)" Argument="&quot;%1&quot;" />
            <MIME Advertise="yes" ContentType="application/xyz" Default="yes" />
        </Extension>
    </ProgId>

    <!-- Optional: add an 'Edit with XYZ' to 'right click' even when not associated -->
    <RegistryValue Root="HKCR" Key="SystemFileAssociations\.xyz\shell\edit.MyApp.exe" Value="!(loc.ExplorerMenuEditXYZ)" Type="string" />
    <RegistryValue Root="HKCR" Key="SystemFileAssociations\.xyz\shell\edit.MyApp.exe\command" Value="&quot;[APPLICATIONFOLDER]MyApp.exe&quot; &quot;%1&quot;" Type="string" />
</Component> 
```

# jquery - Dynatree的使用和创建

> ID：10208552
> 
> 赞同：0
> 
> 时间：2012-04-18T11:37:51.470
> 
> 标签：jquery, struts2, dynatree, jquery-dynatree

我正在使用带有 struts 的 (jquery) dynatree。树上的项目将以这种方式创建：

1.  右键单击节点，会显示一个上下文菜单，其中包含 [创建、修改和删除] 等选项。单击“创建”后，会弹出一个窗口，其中包含用于数据捕获的输入字段。
2.  在弹出窗口中单击保存时，使用 ajax 创建记录并刷新树。
3.  在创建记录时，记录应将父节点的 ID 发送到服务器，该 ID 通常是存储在服务器或数据库上的父节点数据的主键。
4.  可以在每个节点上执行此操作。
5.  每个节点都应该能够存储父节点的 id。
6.  每个节点或子节点也应该知道它在树上的级别。即子节点一的级别为1。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:06:18.867

我真的帮不了你，因为你没有发布任何代码，而且 stackoverflow 也不是让别人为你*写*代码的地方。

我建议做的是去 Dynatree[示例页面](http://wwwendt.de/tech/dynatree/doc/samples.html)并查看他们在那里发布的所有不同的树示例。在每个树示例下都有该特定示例的源代码。选择最能代表您想要在项目中执行的操作的示例，然后尝试将其修改为您真正想要的。然后当/如果您有问题，请使用代码编辑您的帖子，以便我们为您提供帮助。

您还可以查看这些对您有帮助的文档。

[Dynatree 文档](http://wwwendt.de/tech/dynatree/doc/dynatree-doc.html#h2)
[jQuery 文档](http://docs.jquery.com/Main_Page)

# iphone - iphone应用程序在后台时触发事件？

> ID：10208558
> 
> 赞同：0
> 
> 时间：2012-04-18T11:38:19.507
> 
> 标签：iphone, enterprise, multitasking, background-process

当使用位置/音乐功能时，我们可以注册 iPhone 应用程序在后台运行。我的问题是我们可以根据位置更新触发偶数吗？例如：当我在后台达到某个预定义的纬度/经度而不启动应用程序时，将纬度/经度发送到服务器？

如果有任何帮助，我不介意使用企业解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:42:13.523

查看**重要的位置更改**API，它应该提供您想要的，尽管不是很准确。
[http://longweekendmobile.com/2010/07/22/iphone-background-gps-accurate-to-500-meters-not-enough-for-foot-traffic/](http://longweekendmobile.com/2010/07/22/iphone-background-gps-accurate-to-500-meters-not-enough-for-foot-traffic/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:42:28.623

是的，这是可能的。如果您使用 locationmanager 并通过委托获得新位置，您的代码将在不打开应用程序的情况下执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:44:34.150

是的，这是可以做到的。查看 Apple 关于[获取用户位置的详细信息](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW10)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T11:53:31.837

你需要实现这个 API

```
- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region{
     //write code here
} 
```

# javascript - MVC3 razor 获取视图中的浏览器屏幕宽度和高度

> ID：10208560
> 
> 赞同：0
> 
> 时间：2012-04-18T11:38:32.777
> 
> 标签：javascript, jquery, asp.net-mvc-3, view, razor

在我的网站中，我动态生成位图，它需要根据浏览器的宽度和高度进行渲染，因此页面上没有溢出。

我已成功创建并渲染了图像，但我不知道如何获取浏览器的宽度和高度并将其传递给图像渲染的操作

看法：

```
@{
ViewBag.Title = "Index";
}
<h2>Home</h2>
<br />
<img src="@Url.Action("Image", new { height = , width = })" alt="image" usemap="#clickMap" height="" width="" /> 
```

控制器：

```
public ActionResult Image(int width, int height)
{
    MemoryStream stream = new MemoryStream();
    var image = DynamicImages.ImageGeneration.GetWorkflow(width, height);

    image.Save(stream, ImageFormat.Png);

    return File(stream.ToArray(), "image/png");
} 
```

我已经在一个名为 Browser.js 的文件中放置了一个 jQuery 函数来获取屏幕高度，但我不知道如何引用它：

```
function getWidth() {
    return $(window).width();
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:47:14.933

您可以尝试以下方法：

```
$("img-selector").attr("src", "@Url.Action("Image")" + "?height=" + getHeight() 
    + "&width=" + getWidth()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:52:15.000

我设法让这个工作。我没有在页面中添加图像元素并更改源，而是在函数中生成了一个图像标签并将其添加到页面中的 div 中。至于对操作的调用，我对 url 调用进行了硬编码（这就是 @Url.Action() 所做的），这是我的代码：

```
@{
ViewBag.Title = "Index";
}
<h2>Home</h2>
<br />
<script type="text/javascript">

    $(document).ready(function () {
        renderWorkflow();
    });

    function renderWorkflow() {
        var width = $(window).width();
        var height = $(window).height();
        var imageLink = "<img id=\"workflow\" src=\"/Home/WorkflowImage?width=" + width + "&height=" + height + "\" alt=\"Workflow Image\" />";

        $("#workflowImage").html(imageLink);
    }

</script>
<div id="workflowImage">
    <p>Java script must be enabled in order to render the workflow</p>
</div>
<map id="clickMap" name="clickMap">
</map> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:45:43.783

你可以做一个ajax请求来做到这一点

```
<script type="text/javascript">
  var Height = //get height
  var Width = // get width

 $.get('@Url.Action("Image", "Controller")', { width: width, height: Height}, function (data) {              

        });
</script> 
```

# android - 使用wifi SSID在android中阻止网站

> ID：10208562
> 
> 赞同：3
> 
> 时间：2012-04-18T11:38:37.100
> 
> 标签：android, web, wifi, block

我如何在通过 wifi SSID 黑名单控制的 android 中阻止网站，我的意思是当我为指定的 SSID 阻止 facebook 时，它应该只为该 SSID 阻止 facebook。

我的要求是使用 SSID 过滤器来阻止网站以获取不同的 wifi。就像办公室里的人应该阻止娱乐网站，但是当涉及到另一个已经为网站维护一些黑名单的 ssid 时，它应该阻止这些网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:44:07.697

```
List<WifiConfiguration> configuredNetworks = wifiManager.getConfiguredNetworks(); 
if(configuredNetworks != null)
{ 
    for(WifiConfiguration wifiConfiguration : configuredNetworks)
    { 
       if(wifiConfiguration.status == WifiConfiguration.Status.ENABLED || 
          wifiConfiguration.status == WifiConfiguration.Status.CURRENT)
          { 
              ScanResult scan = map.get(wifiConfiguration.SSID);
              if(scan != null)
              { 
                 // Here you have the current connected WiFi
                 String wifiName = scan.SSID;
              }
          }
    }
} 
```

# google-app-engine - App Engine 切换到高复制

> ID：10208568
> 
> 赞同：3
> 
> 时间：2012-04-18T11:39:25.350
> 
> 标签：google-app-engine

我是否认为您不能将 Goole AppEngine 应用程序更改为高复制。

你要做的是迁移到一个新的应用程序，即 High Replication。删除 App 重新创建为 High Replication 并迁移回来。

有更快的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T11:53:21.570

[迁移应用程序](https://developers.google.com/appengine/docs/adminconsole/migration)（来自 Google 的官方指南）

但基本上：

1.  你无法改变。
2.  克隆应用程序。
3.  迁移数据。
4.  禁用旧应用程序。

# ios - UITableView 检查动画

> ID：10208574
> 
> 赞同：1
> 
> 时间：2012-04-18T11:40:10.110
> 
> 标签：ios, uitableview, uianimation

如何检查动画何时完成。

我使用这种方法：

[self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:2 inSection:0]] withRowAnimation:UITableViewRowAnimationNone];

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:55:18.073

这是动画类参考的[链接。](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CAAnimation_class/Introduction/Introduction.html)我认为功能

```
-(void)animationDidStop:(CAAnimation *)theAnimation finished:(BOOL)flag 
```

是你要找的那个。

# mongodb - mongodb - 滥用 system.users 集合？

> ID：10208578
> 
> 赞同：0
> 
> 时间：2012-04-18T11:40:24.020
> 
> 标签：mongodb

我有一个简单的 mongodb 应用程序。用户在登录时创建帐户。

当用户创建他们的帐户时，我必须将额外的数据存储在某处。

目前我正在扩展 mongodb 中的**system.users**集合并向其中添加一堆字段。但是它是一个“系统”集合，所以我不确定这是否是一个好主意。

这是“坏习惯”吗？我是否应该创建一个 user_details 集合并使用“_id”外键样式将其映射到 system.users 表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:43:49.187

这绝对是个坏主意。`system.users`集合应该存储允许访问您的数据库的用户的身份验证详细信息。数据库用户和应用程序用户是两个截然不同的实体！

我的建议：停止搞乱系统集合。否则将来肯定会适得其反。

# dreamweaver - Dreamweaver 模板中的循环和 TemplateRepeatIndex

> ID：10208580
> 
> 赞同：6
> 
> 时间：2012-04-18T11:40:31.873
> 
> 标签：dreamweaver, tridion, dwt, dreamweaver-templates

我在访问变量时遇到了一些麻烦，在这种情况下是 Setvariable。当我进入循环时，变量不存在。任何人都对此有任何见解。感谢你的帮助

下面是我在模板中的代码部分。当你有机会时，你会帮忙吗？谢谢。

```
<!-- TemplateBeginRepeat name="Component.Fields.section" -->
@@SetVariable("columnSectionIndex", "${TemplateRepeatIndex}")@@
Inline Value @@GetVariable("columnSectionIndex")@@       Variable value can be accessed
    <!-- TemplateBeginRepeat name ="Field.links" -->
      Inside Loop Value @@GetVariable("columnSectionIndex")@@  //Not getting declared           variable //value here. Says variable doesn’t exist in ContextVariables.
       <!-- TemplateBeginRepeat name ="Field.linkimages" -->
       <!-- TemplateEndRepeat -->
    <!-- TemplateEndRepeat -->
<!-- TemplateEndRepeat --> 
```

输出

```
Variable Added Successfully
Inline Value 0 
Inside Loop Value Variable doesn't exist 
```

我的载重吨代码

```
[TemplateCallable()]
public string SetVariable(string variableName, string value)
    {
        //Remove the old variable and set the new variable
        if (_Engine.PublishingContext.RenderContext.ContextVariables.Contains(variableName))
        {
            _Engine.PublishingContext.RenderContext.ContextVariables[variableName] = value;
            return "Variable Modified Successfully";
        }
        else
        {
            _Engine.PublishingContext.RenderContext.ContextVariables.Add(variableName, value);
            return "Variable Added Successfully";
        }
    }
    [TemplateCallable()]
    public string GetVariable(string variableName)
    {
        //Get the varialbe
        if (_Engine.PublishingContext.RenderContext.ContextVariables.Contains(variableName))
            return _Engine.PublishingContext.RenderContext.ContextVariables[variableName].ToString();
        else
            return "Variable doesn't exist";
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T13:17:12.053

循环中的变量问题是众所周知的，甚至被[记录在案](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_FAD509B62A6D4ED68949E6DB1752FCB3)。

基本上，第一个循环已经在您设置变量时进行了评估，因此您总是会落后一个。

*   设置变量 i=0
*   循环迭代 1，i=null
*   循环迭代 2，i=0
*   循环迭代 3，i=1
*   ETC

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T12:30:35.470

这可能会有所帮助： [http ://www.tridiondeveloper.com/get-and-set-variables-in-dwts](http://www.tridiondeveloper.com/get-and-set-variables-in-dwts)

# jsf - jsf 1.2 UI 组件标签支持bean

> ID：10208581
> 
> 赞同：1
> 
> 时间：2012-04-18T11:40:38.590
> 
> 标签：jsf, jakarta-ee, custom-component, jsf-1.2, backing-beans

我正在使用 JSF 1.2，我想使用`ui:component`标签创建一个自定义组件。我需要在我的应用程序的很多地方使用这个组件，所以我希望这个组件是高度可重用的。

问题是，对于这个自定义组件的每次使用，我都需要一个支持 bean 来存储我的信息并充当某些事件的动作侦听器。我在我的应用程序中的大约 15 个地方使用了这个组件，而且我还在一个页面中不止一次地使用了这个组件。

我不想创建自定义 JSF 组件（带有 UIComponent、渲染器等），而且我不知道如何管理支持数据。

有什么方法可以指定一个类，并且自定义组件在我每次使用它时都会创建一个类的实例？

**编辑：** 是否可以扩展现有的 JSF 组件？（我使用 Richfaces 实现）

欢迎任何帮助或想法。

# c# - 自定义列表定义上的 SharePoint EventReceiver ItemUpdating 问题

> ID：10208586
> 
> 赞同：0
> 
> 时间：2012-04-18T11:40:51.127
> 
> 标签：c#, sharepoint, sharepoint-2010, eventreceiver

我的 CustomListDefinition 和 CustomEventReceiver 有问题。

ListDefinition 工作正常。我可以从中创建列表，并且一切看起来都应该如此。我的 EventReceiver 作用于以下四个事件：ItemAdding、ItemAdded、ItemUpdating 和 ItemUpdated。

通过 WebInterface 添加/更新 ListItems 时，一切正常，没有任何错误。当我尝试通过 C#（或 PowerShell）创建或编辑 ListItem 时，我收到以下错误：

> “未知状态模块：33 消息：134”

即使代码实际上**什么也没**做！我用一个新的空 EventReceiver 重现了这个问题，它附加到我的自定义 ListDefinition 的 ItemUpdating 事件。

此问题仅发生在**ItemUpdating**事件上。当我在没有此事件的情况下部署我的解决方案时，一切进展顺利。将 EventReceiver 部署到标准列表（例如 Task ListDefinition）也没有像上面那样的问题。

所以我的结论是，我的 ListDefinition 中一定有错误。

有人可以帮我找出错误吗？

**我的 Elements.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
    <!-- Do not change the value of the Name attribute below. If it does not match the folder name of the List Definition project item, an error will occur when the project is run. -->
    <ListTemplate
        Name="MyProject.ListDefinition.Booking"
        Type="10001"
        BaseType="0"
        OnQuickLaunch="TRUE"
        SecurityBits="11"
        AllowDeletion="TRUE"
        DisallowContentTypes="FALSE"
        Sequence="410"
        DisplayName="Anmeldung"
        Description="Anmeldeliste für ein Fest"
        Image="/_layouts/images/itgen.png"/>
</Elements> 
```

**我的 Schema.xml（内容类型和字段定义定义如下面的代码）**

```
<?xml version="1.0" encoding="utf-8"?>
<List xmlns:ows="Microsoft SharePoint" Title="Fest Anmeldung" FolderCreation="FALSE" Direction="$Resources:Direction;" Url="Lists/Fest-MyProject.ListDefinition.Booking" BaseType="0" EnableContentTypes="TRUE" DisableAttachments="TRUE" EnableMinorVersions="FALSE" ModeratedList="FALSE" PrivateList="FALSE" VersioningEnabled="FALSE" xmlns="http://schemas.microsoft.com/sharepoint/">
  <MetaData>
    <ContentTypes>
      <ContentType ID="0x0100d05f16219b3543eb81f2b7707d50a4d3" Name="externer Teilnehmer" Group="MyProject.Fest" Description="externer Teilnehmer am Fest" Inherits="TRUE" Version="0">
        <FieldRefs>
          <FieldRef ID="{fa564e0f-0c70-4ab9-b863-0177e6ddd247}" Name="Title" DisplayName="Titel" Required="FALSE" />
          <FieldRef ID="{F168D67A-8BE4-42ED-B3D6-D04C3CE487F9}" Name="MyProjectFestFirstName" />
          <FieldRef ID="{EA8D4CAA-A219-43ED-8796-345E387BD4C6}" Name="MyProjectFestLastName" />
          <FieldRef ID="{A29AE60F-BCCA-47B5-A498-17B4E7FD4297}" Name="MyProjectFestParticipates" />
          <FieldRef ID="{08885975-334B-4BB6-B7A7-052610C2F885}" Name="MyProjectFestPartner" />
          <FieldRef ID="{5E480332-98F6-4328-955E-037F6F1C66DE}" Name="MyProjectFestChildrenCount0To3" />
          <FieldRef ID="{0BD4A5E1-171F-41AA-9628-979694549807}" Name="MyProjectFestChildrenCount4To8" />
          <FieldRef ID="{90F8CEE7-289B-499B-AA6E-3BE92568948D}" Name="MyProjectFestChildrenCount9To15" />
          <FieldRef ID="{9EB35619-530A-4149-9889-1CEDB7CF3C9F}" Name="MyProjectFestChildrenCount16" />
          <FieldRef ID="{6B63D7A4-4FCC-4C16-979A-BB640FAADA61}" Name="MyProjectFestArrivalDate" />
          <FieldRef ID="{B390E3B7-76C8-4E03-A54E-FD3106689FFE}" Name="MyProjectFestAccommodations" />
          <FieldRef ID="{DEE42C9A-238E-4E93-971B-6BFE3BE5B53B}" Name="MyProjectFestFood" />
          <FieldRef ID="{A6056EA2-E4B8-4555-B5FF-0CDD8FD415FC}" Name="MyProjectFestParticipantCount" />
          <FieldRef ID="{C204C403-CDD5-4A09-AF58-A21D7AEBF985}" Name="MyProjectFestBranch" />
          <FieldRef ID="{EF54ACED-E2BE-4EB7-BF39-1D2A46202DFC}" Name="MyProjectFestDescription" />
        </FieldRefs>
      </ContentType>
      <ContentType ID="0x0100e498ffd129d6485fbe5174d501bbf362" Name="interner Teilnehmer" Group="MyProject.Fest" Description="interner Teilnehmer am Fest" Inherits="TRUE" Version="0">
        <FieldRefs>
          <FieldRef ID="{fa564e0f-0c70-4ab9-b863-0177e6ddd247}" Name="Title" DisplayName="Titel" Required="FALSE" />
          <FieldRef ID="{F168D67A-8BE4-42ED-B3D6-D04C3CE487F9}" Name="MyProjectFestFirstName" />
          <FieldRef ID="{EA8D4CAA-A219-43ED-8796-345E387BD4C6}" Name="MyProjectFestLastName" />
          <FieldRef ID="{A29AE60F-BCCA-47B5-A498-17B4E7FD4297}" Name="MyProjectFestParticipates" />
          <FieldRef ID="{08885975-334B-4BB6-B7A7-052610C2F885}" Name="MyProjectFestPartner" />
          <FieldRef ID="{5E480332-98F6-4328-955E-037F6F1C66DE}" Name="MyProjectFestChildrenCount0To3" />
          <FieldRef ID="{0BD4A5E1-171F-41AA-9628-979694549807}" Name="MyProjectFestChildrenCount4To8" />
          <FieldRef ID="{90F8CEE7-289B-499B-AA6E-3BE92568948D}" Name="MyProjectFestChildrenCount9To15" />
          <FieldRef ID="{9EB35619-530A-4149-9889-1CEDB7CF3C9F}" Name="MyProjectFestChildrenCount16" />
          <FieldRef ID="{6B63D7A4-4FCC-4C16-979A-BB640FAADA61}" Name="MyProjectFestArrivalDate" />
          <FieldRef ID="{B390E3B7-76C8-4E03-A54E-FD3106689FFE}" Name="MyProjectFestAccommodations" />
          <FieldRef ID="{DEE42C9A-238E-4E93-971B-6BFE3BE5B53B}" Name="MyProjectFestFood" />
          <FieldRef ID="{A6056EA2-E4B8-4555-B5FF-0CDD8FD415FC}" Name="MyProjectFestParticipantCount" />
          <FieldRef ID="{C204C403-CDD5-4A09-AF58-A21D7AEBF985}" Name="MyProjectFestBranch" ShowInDisplayForm="TRUE" ShowInEditForm="FALSE" />
          <FieldRef ID="{3BAC8D07-9B0D-4D8A-8899-8A398E94A5DC}" Name="MyProjectFestSystemMitaId" ShowInDisplayForm="TRUE" ShowInEditForm="FALSE"  />
          <FieldRef ID="{026BDDB3-C776-4873-A82D-1A87BA4FE4B8}" Name="MyProjectFestSystemAccount" ShowInDisplayForm="TRUE" ShowInEditForm="FALSE"  />
          <FieldRef ID="{99EB27C2-156A-42AD-AC42-8BE91AE1CEC7}" Name="MyProjectFestActivityStatus" ShowInDisplayForm="TRUE" ShowInEditForm="FALSE"  />
        </FieldRefs>
      </ContentType>
    </ContentTypes>
    <Fields>
      <Field ID="{fa564e0f-0c70-4ab9-b863-0177e6ddd247}" Name="Title" Type="Text" DisplayName="Titel" Required="FALSE" />

      <Field
   ID="{F168D67A-8BE4-42ED-B3D6-D04C3CE487F9}"
   Name="MyProjectFestFirstName"
   DisplayName="Vorname"
   Type="Text"
   Required="TRUE"
   Sealed="TRUE"
   AllowDeletion="FALSE"
   Group="MyProjectFest"
   Filterable="TRUE"
   Sortable="TRUE" />

      <Field
        ID="{EA8D4CAA-A219-43ED-8796-345E387BD4C6}"
        Name="MyProjectFestLastName"
        DisplayName="Nachname"
        Type="Text"
        Required="TRUE"
        Sealed="TRUE"
        AllowDeletion="FALSE"
        Group="MyProjectFest"
        Filterable="TRUE"
        Sortable="TRUE" />

      <Field
        ID="{A29AE60F-BCCA-47B5-A498-17B4E7FD4297}"
        Name="MyProjectFestParticipates"
        DisplayName="Teilnahme am Fest"
        Type="Boolean"
        Required="FALSE"
        Sealed="TRUE"
        AllowDeletion="FALSE"
        Description="Falls nein, müssen die weiteren Felder nicht ausgefüllt werden!"
        Group="MyProjectFest"
        Filterable="TRUE"
        Sortable="TRUE"  />

      <Field
        ID="{08885975-334B-4BB6-B7A7-052610C2F885}"
        Name="MyProjectFestPartner"
        DisplayName="Teilnahme Partner"
        Type="Boolean"
        Required="FALSE"
        Sealed="TRUE"
        AllowDeletion="FALSE"
        Group="MyProjectFest"
        Filterable="TRUE"
        Sortable="TRUE"  />

      <Field
        ID="{5E480332-98F6-4328-955E-037F6F1C66DE}"
        Name="MyProjectFestChildrenCount0To3"
        DisplayName="Anzahl Kinder (0-3)"
        Type="Number"
        Decimals="0"
        Min="0"
        Max="10"
        Required="FALSE"
        Sealed="TRUE"
        AllowDeletion="FALSE"
        Group="MyProjectFest"
        Filterable="TRUE"
        Sortable="TRUE"  />

      <Field
        ID="{0BD4A5E1-171F-41AA-9628-979694549807}"
        Name="MyProjectFestChildrenCount4To8"
        DisplayName="Anzahl Kinder (4-8)"
        Type="Number"
        Decimals="0"
        Min="0"
        Max="10"
        Required="FALSE"
        Sealed="TRUE"
        AllowDeletion="FALSE"
        Group="MyProjectFest"
        Filterable="TRUE"
        Sortable="TRUE"  />

      <Field
        ID="{90F8CEE7-289B-499B-AA6E-3BE92568948D}"
        Name="MyProjectFestChildrenCount9To15"
        DisplayName="Anzahl Kinder (9-15)"
        Type="Number"
        Decimals="0"
        Min="0"
        Max="10"
        Required="FALSE"
        Sealed="TRUE"
        AllowDeletion="FALSE"
        Group="MyProjectFest"
        Filterable="TRUE"
        Sortable="TRUE"  />

      <Field
        ID="{9EB35619-530A-4149-9889-1CEDB7CF3C9F}"
        Name="MyProjectFestChildrenCount16"
        DisplayName="Anzahl Kinder (16+)"
        Type="Number"
        Decimals="0"
        Min="0"
        Max="10"
        Required="FALSE"
        Sealed="TRUE"
        AllowDeletion="FALSE"
        Group="MyProjectFest"
        Filterable="TRUE"
        Sortable="TRUE"  />

      <Field
        ID="{6B63D7A4-4FCC-4C16-979A-BB640FAADA61}"
        Name="MyProjectFestArrivalDate"
        DisplayName="Anreise-Datum"
        Type="DateTime"
        Format="DateOnly"
        Required="FALSE"
        Sealed="TRUE"
        AllowDeletion="FALSE"
        Group="MyProjectFest"
        Filterable="TRUE"
        Sortable="TRUE"  />

      <Field
        ID="{B390E3B7-76C8-4E03-A54E-FD3106689FFE}"
        Name="MyProjectFestAccommodations"
        DisplayName="Anzahl Übernachtungen"
        Type="Number"
        Decimals="0"
        Min="0"
        Max="10"
        Required="FALSE"
        Sealed="TRUE"
        AllowDeletion="FALSE"
        Group="MyProjectFest"
        Filterable="TRUE"
        Sortable="TRUE"  />

      <Field
        ID="{DEE42C9A-238E-4E93-971B-6BFE3BE5B53B}"
        Name="MyProjectFestFood"
        DisplayName="mitgebrachte Speise"
        Type="Text"
        Required="FALSE"
        Sealed="TRUE"
        AllowDeletion="FALSE"
        Group="MyProjectFest"
        Filterable="TRUE"
        Sortable="TRUE"  />

      <Field ID="{3bac8d07-9b0d-4d8a-8899-8a398e94a5dc}" Name="MyProjectFestSystemMitaId" DisplayName="SYSTEM_MITA_ID" Type="Number" Decimals="0" Required="FALSE" Sealed="TRUE" AllowDeletion="FALSE" Group="MyProjectFest" />
      <Field ID="{026bddb3-c776-4873-a82d-1a87ba4fe4b8}" Name="MyProjectFestSystemAccount" DisplayName="Account-Name" Type="Text" MaxLength="5" Required="FALSE" Sealed="TRUE" AllowDeletion="FALSE" Group="MyProjectFest" />
      <Field ID="{99eb27c2-156a-42ad-ac42-8be91ae1cec7}" Name="MyProjectFestActivityStatus" DisplayName="Status" Type="Text" MaxLength="10" Required="FALSE" Sealed="TRUE" AllowDeletion="FALSE" Group="MyProjectFest" />

      <Field ID="{ef54aced-e2be-4eb7-bf39-1d2a46202dfc}" Name="MyProjectFestDescription" DisplayName="Beschreibung" Type="Note" NumLines="3" Required="FALSE" Sealed="TRUE" AllowDeletion="FALSE" Group="MyProjectFest" Filterable="TRUE" Sortable="TRUE" />
      <Field ID="{c204c403-cdd5-4a09-af58-a21d7aebf985}" Name="MyProjectFestBranch" DisplayName="Niederlassung" Type="Choice" Format="Dropdown" BaseType="Text" Required="FALSE" Sealed="FALSE" AllowDeletion="FALSE" Group="MyProjectFest" Filterable="TRUE" Sortable="TRUE">
        <CHOICES>
          <CHOICE>B</CHOICE>
          <CHOICE>E</CHOICE>
          <CHOICE>HH</CHOICE>
          <CHOICE>K</CHOICE>
          <CHOICE>M</CHOICE>
        </CHOICES>
        <Default>K</Default>
      </Field>

      <Field
        ID="{A6056EA2-E4B8-4555-B5FF-0CDD8FD415FC}"
        Name="MyProjectFestParticipantCount"
        DisplayName="Teilnehmeranzahl"
        Type="Calculated"
        ResultType="Number"
        ReadOnly="FALSE"
        Hidden="FALSE"
        Decimals="0"
        Group="MyProjectFest">
        <Formula>=IF([MyProjectFestParticipates]=TRUE,1+IF([MyProjectFestPartner]=TRUE,1,0)+[MyProjectFestChildrenCount0To3]+[MyProjectFestChildrenCount4To8]+[MyProjectFestChildrenCount9To15]+[MyProjectFestChildrenCount16],0)</Formula>
        <FieldRefs>
          <FieldRef Name="MyProjectFestParticipates" />
          <FieldRef Name="MyProjectFestPartner" />
          <FieldRef Name="MyProjectFestChildrenCount0To3" />
          <FieldRef Name="MyProjectFestChildrenCount4To8" />
          <FieldRef Name="MyProjectFestChildrenCount9To15" />
          <FieldRef Name="MyProjectFestChildrenCount16" />
        </FieldRefs>
      </Field>
    </Fields>
    <Views>
      <View BaseViewID="0" Type="HTML" MobileView="TRUE" TabularView="FALSE">
        <Toolbar Type="Standard" />
        <XslLink Default="TRUE">main.xsl</XslLink>
        <RowLimit Paged="TRUE">30</RowLimit>
        <ViewFields>
          <FieldRef Name="LinkTitleNoMenu">
          </FieldRef>
          <FieldRef Name="MyProjectFestFirstName" />
          <FieldRef Name="MyProjectFestLastName" />
          <FieldRef Name="MyProjectFestParticipates" />
          <FieldRef Name="MyProjectFestParticipantCount" />
        </ViewFields>
        <Query>
          <OrderBy>
            <FieldRef Name="Modified" Ascending="FALSE">
            </FieldRef>
          </OrderBy>
        </Query>
        <ParameterBindings>
          <ParameterBinding Name="AddNewAnnouncement" Location="Resource(wss,addnewitem)" />
          <ParameterBinding Name="NoAnnouncements" Location="Resource(wss,noXinviewofY_LIST)" />
          <ParameterBinding Name="NoAnnouncementsHowTo" Location="Resource(wss,noXinviewofY_ONET_HOME)" />
        </ParameterBindings>
      </View>
      <View BaseViewID="1" Type="HTML" WebPartZoneID="Main" DisplayName="$Resources:core,objectiv_schema_mwsidcamlidC24;" DefaultView="TRUE" MobileView="TRUE" MobileDefaultView="TRUE" SetupPath="pages\viewpage.aspx" ImageUrl="/_layouts/images/generic.png" Url="AllItems.aspx">
        <Toolbar Type="Standard" />
        <XslLink Default="TRUE">main.xsl</XslLink>
        <RowLimit Paged="TRUE">30</RowLimit>
        <ViewFields>
          <FieldRef Name="Attachments">
          </FieldRef>
          <FieldRef Name="LinkTitle">
          </FieldRef>
          <FieldRef Name="MyProjectFestFirstName" />
          <FieldRef Name="MyProjectFestLastName" />
          <FieldRef Name="MyProjectFestParticipates" />
          <FieldRef Name="MyProjectFestParticipantCount" />
        </ViewFields>
        <Query>
          <OrderBy>
            <FieldRef Name="ID">
            </FieldRef>
          </OrderBy>
        </Query>
        <ParameterBindings>
          <ParameterBinding Name="NoAnnouncements" Location="Resource(wss,noXinviewofY_LIST)" />
          <ParameterBinding Name="NoAnnouncementsHowTo" Location="Resource(wss,noXinviewofY_DEFAULT)" />
        </ParameterBindings>
      </View>
    </Views>
    <Forms>
      <Form Type="DisplayForm" Url="DispForm.aspx" SetupPath="pages\form.aspx" WebPartZoneID="Main" />
      <Form Type="EditForm" Url="EditForm.aspx" SetupPath="pages\form.aspx" WebPartZoneID="Main" />
      <Form Type="NewForm" Url="NewForm.aspx" SetupPath="pages\form.aspx" WebPartZoneID="Main" />
    </Forms>
  </MetaData>
</List> 
```

该代码有点匿名，因此可能包含一些打字错误。;)

希望你能帮我找到我的问题。

编辑：我发现，事件日志中发生了这个错误：

> 在 OC.Sommerfest 中加载和运行事件接收器 MyProject.BookingItemEventReceiver 时出错，Version=1.0.0.0，Culture=neutral，PublicKeyToken=asdasdasd。附加信息如下。

事件 ID 为 6875。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T12:14:11.980

我也有同样的问题，目前正在努力解决。在我的情况下，使用由站点内容菜单创建的自定义列表。

1.  但是我检查了在捕获内部抛出未处理的异常时出现的错误。

2.  另一个原因可能是您在错误消息中重新修改的字符串的长度太长。

如果我找到一个新的解决方案，我会分享。

问候...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:52:26.570

尝试在[`EventFiringEnabled`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.speventreceiverbase.eventfiringenabled.aspx)设置为 false 期间更新列表项代码。

就像是 ：

```
 this.EventFiringEnabled = false;
    //item updated logic
   this.EventFiringEnabled = true; 
```

# perl - 我是 perl-cgi 的新手。我正在尝试将 db 与 cgi 脚本连接我收到此错误

> ID：10208593
> 
> 赞同：-1
> 
> 时间：2012-04-18T11:41:18.130
> 
> 标签：perl, cgi

使用 Perl CGI，我正在尝试使用 db 连接创建登录页面。我正在使用 IDE 日食。在运行它时，我收到错误：

```
Server Error
while trying to obtain /sssss/login.cgi
Missing header from cgi output 
```

这是我的代码：

```
#!/usr/bin/perl
use strict;
use CGI qw(:standard);
use CGI::Pretty qw(:all);
use CGI::Carp qw(warningsToBrowser fatalsToBrowser);
use DBI;
use DBD::mysql;
use DBI qw(:sql_types);
use DBD::ODBC;
use CGI qw/:standard/;
use CGI;

my $cgi = CGI->new();

my $user='root';
my $pass='123';
my $dsn = 'DBI:mysql:delve:server';
my $dbh = &sql_connect;
$dbh-> {'LongTruncOk'} = 1;
$dbh-> {'LongReadLen'} = 90000;
print "Content-type: text/html\n\n";
print "<html><h1>OTT Login</h1></html>\n";
print '<body bgcolor="gray">';

#start a form----------------

print '<form method=POST>';

print '<p>';
print 'Employee Name: <p><INPUT type="text" name="User" size=25 maxlength=25></p>';
print '</p>';

# Create a text box for Password:---------------

print '<p>';
print 'Password:<p><INPUT TYPE=PASSWORD NAME="mypassword" id = "Password" size = "15" maxlength = "15" tabindex = "1"/></p>';
print '</p>';

#Create submit & reset button:-------------------

#print '<p><input type=" button" name="submitit"value="submit"onclick="formvalidation(myform)"/></p>';
print '<form name="input" method="post">';
print '<p><input type="submit" value="Submit" /><INPUT TYPE="reset" name = "Reset" value = "Reset"></p>';

#Create Change Password & Reset Password link:------------
print '<p><a href="changepwd.cgi">Change Password</a></p>';
print '<p><a href="userlogin.cgi">Reset Password</a></p>';
print '</form>';

#logic for submit button functionality :-----------------

if (param('User') and param('mypassword'))
{
my $usr=ucfirst(lc(param('User')));
my $pwd=ucfirst(lc(param('mypassword')));

my $query="select username from login where username='$usr'";
my $data=$dbh->prepare($query)  or die $dbh->errstr;
$data->execute()                or die $data->errstr;
my ($x,$y);
my $query1="select password from login where password='$pwd'";
my $data1=$dbh->prepare($query1)    or die $dbh->errstr;
$data1->execute()               or die $data->errstr;

if ($x=$data->fetchrow())
                {
                 if ($y=$data1->fetchrow())
                 {

                 print "Correct Password";
                 print $cgi->redirect("samp.html");
                 }
                    else
                   {
                   print "Incorrect Password";
                      }
        }
        else
        {

            print "Invalid username";
        }
$dbh->disconnect || die "$DBI::errstr\n";

}
sub sql_connect
{
    Reconnect:
    my $dbh = DBI->connect($dsn, $user, $pass,{AutoCommit => 1}) or warn "$DBI::errstr\a\a\n";

    if(defined $dbh)
    {
        print "Data base Connected successfully\n";
    }
    else
    {
        print "Please Check Ur Database\n"; ### To handle Database Failure
        sleep(10);
        goto Reconnect;
    }
    return $dbh;
}

1; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-18T13:01:04.103

您的子例程在发送正确的 HTTP 标头之前`sql_connect`生成输出。 要么将调试消息打印到日志文件，要么在生成其他内容之前先打印 HTTP 标头。`print "...")`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-18T13:21:55.710

当您发送 HTTP 响应（例如，向浏览器打印内容）时，您的应用程序必须发送响应*标头*，而不仅仅是正文。当您发送 HTML 时，您打印到 STDOUT 的*第一件事*应该是一个至少包含以下内容的标题：

```
 Content-type: text/html 
```

标题后跟一个空行。

所以脚本中的第一个打印应该是：

```
 print 'Content-type: text/html',"\n\n"; 
```

（如果您要生成更多标题，则在每个标题之后仅打印一个 \n 直到最后一个。）

当然，如果你改用`CGI`or`CGI::Simple`模块，你的生活会轻松很多。CGI 有很多边缘情况和奇怪的行为，这些模块已经在这些模块中处理过了。

# html - How to position these elements on the same row?

> ID：10208598
> 
> 赞同：0
> 
> 时间：2012-04-18T11:41:32.370
> 
> 标签：html, css

I have some GUI components that don't line up on the same row which I want them to: ![enter image description here](../Images/dc8acbba75074bd7b74d5d79bacd97c8.png)

I want them all on the same row. What must be done then? My HTML is

```
<div id="rab" class="yta2   TB_nb fontS80">
    <div class="fl50" id="L-col">
    <div class="clear half">&nbsp;</div>
    <div class="fl25"><h3>Åberopade rabattgrundande ärenden</h3></div>
    <div class="fl40">Registrera: 
    <input type="radio" name="its" checked value="its">ITS
    <input type="radio" name="uppdrag" value="uppdrag">Uppdrag
    <input type="radio" name="pct" value="pct">PCT/Patentansökan
    </div>

    <div class="clear"></div>
    <div class="fl40">ITS inlämnad datum:
    <input type="text" size="10" name="pct_inlamningsdatum" 
id="pct_inlamningsdatum" value="">&nbsp;<a href="#"><img src="images/cal.gif" width="16" height="15" alt="" onclick="javascript:openCalWin('620','300','depositionsdatum')"></a></div>
    <div class="clear"></div>
    <div class="fl20">Nummer:</div>
    <div class="fl40"><input type="text" name="pct_nr"></div>
    <div class="clear"></div>
</div>
<div class="fl50" id="R-col">
    <div class="clear">&nbsp;</div>
    <div class="fl95 hknot" style="height: 165px; overflow: auto;">

<table><tr><td><strong>Myndighet</strong></td><td><strong>Datum</strong></td><td><strong>Nummer</strong></td><td><strong>Utlämning</strong></td></tr>
            </table>
    </div>
</div> 
```

My CSS is

```
*  {font-family:arial;}

.avnamn{ 
                color: #90002b; 
                font-size: 140%; 
                display: inline; 
                vertical-align: 3%; 
                margin-left: 1%;
                }

.b{border:1px solid #000;}

.readonly{background-color: #CCC;}

.Webdings{
    font-family: Webdings;
    }

ul{margin-top: 0px}

.mt3{margin-top:-3px;}
.mt5p{margin-top:5px;}

.fontS80 {font-size: 80%;} 
a:link{color:#000; text-decoration:none; }
a:visited{color:#000; text-decoration:none; }
a:hover{color:#000; text-decoration:none; }
a:active{color:#000; text-decoration:none; }

.fontS75 {font-size: 75%;} 

.link{color: #003366;
    text-decoration: underline;
    cursor: pointer;
    font-weight: bold;}

.link_sm{color: #003366;
    text-decoration: underline;
    cursor: pointer;}

.link_sm{font-size: 70%;cursor: pointer;}

.small{font-size: 75%;}

.smallg{font-size: 75%;
color: #555;}

.ssmall{
    font-size: 65%;
    font-weight: bold;
    color: #555;
}
.small60{font-size: 60%;}
.small50{
    font-size: 50%;
    color: #333;
}
.smallb{font-size: 85%;}
table{display:inline;}

h1{font-size: 130%;display:inline;}
h2{font-size: 100%;display:inline;}
h3{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}
h4{font-size: 70%;display:inline;}
h5{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}

.hthin{
    font-size: 125%;
}

.th {text-align: left;}

td, th{font-size: 75%;
    vertical-align: text-top;}
.td_link{cursor: pointer;}
.td40{height:40px;}
.td60{height:60px;}

.thkant{
    border-top: 1px solid #000;
    border-bottom: 1px solid #000;
    font-size: 70%;
        text-align: left;
}

.labb{F0F0E3; c1c1b3 }

.bb{border-bottom: 1px solid #000;}
.bbV{border-bottom: 1px solid #FFF;}
.TB_nbA {background-color:#CCC;}
.TB_bt, .TB_nb, .TB_db, .TB_bb {background-color:#efefdc;}

.hk {background-color:#d9ddb3;}

.hknot {background-color:#f9faf2;}
/*<!--F8F8F1-->*/
.TB_bt{border-top: 1px solid #FFF;}
.TB_bt5{border-top: 5px solid #FFF;}
.TB_bb{border-bottom: 1px solid #999;}
.TB_bb2{border-bottom: 2px solid #c1c1b3;}
.TB_db{border-bottom: 1px solid #000; border-top: 1px solid #000;}
.TB_tb{border-top: 2px solid #efefdc;}

.TB_bo{border: 2px solid #efefdc;}
.TB_bo_hk{border-top: 1px solid #efefdc;}

.TB_bo2{border: 1px solid #efefdc;}

.TB_bo2B{
border-top: 2px solid #c1c1b3;
border-left: 3px solid #efefdc;
border-right: 3px solid #efefdc;
border-bottom: 2px solid #c1c1b3;
}

.TD_bo{
    border-right: 1px solid #c1c1b3;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.TD_bo2{

    border-right: 0;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.ytb{
    border-left:3px solid #efefdc;
    border-right:3px solid #efefdc;
}

.datum {
    font-size: 70%;
    padding-right: 5px;
    vertical-align: text-top;} 
.sub {background:#EAEAEA;}
.sub_meny, .sub_meny_r, .sub_meny_active, .sub_meny_sm{
    font-size: 70%;
    padding-left: 20px;
    padding-right: 20px;
    vertical-align: text-top;}

.sub_meny_sm {
    font-size: 60%;
    vertical-align: middle;
    padding-left: 10px;
    padding-right: 10px;
}   

.sub_meny_r{
    float:right;
    font-size: 70%;
    padding-left: 8px;
    padding-right: 8px;}

.sub_meny_rm{margin-top:4px;}
.sub_meny_active{font-weight: bold;}

.flikkant1 {
    background-image: url(../images/fl1k.jpg);
    background-position: center;
    z-index: -1;}

.inl_namn{
    font-weight: bold;
    font-size: 70%;
    color: Black;
    text-decoration: none;}

.th{text-align: left;}
.tr{text-align: right;}

.g1{
    background-color: #FFF;
    line-height: 20px;
}

.g2{
    background-color: #EEE;
    line-height: 20px;
}

.g3{
    background-color: #DCDCDC;
    line-height: 20px;
    font-weight: bold;
    font-size: 100%;
}
.g4{
    background-color: #CCC;
    line-height: 20px;
}

.popup{
    border-color: #000; 
    border-style: groove; 
    border-width: 2px; 
    padding: 0px; 
    background-color: #FFF;
    font-size: 70%;
}

.popupN{
    background-color: #F0F0E3;
    color: #000;
    width: 100%;
    display: inline;
    font-weight: bold;
    height: auto;
    padding: 2px;
    border-bottom: 1px solid #000;
}
.pin{padding: 6px;}

.fl10, .fl20, .fl30, .fl40, .fl50, .fl60, .fl70, .fl80, .fl90, .fl100 {
    padding-bottom:4px;color: #000000;
}

.over{
    background-color: #EFEFDC;
    line-height: 20px;
}

.half{
line-height:50%;
}

.quarter{
line-height:25%;
}

.lh10{
line-height:10%;
}

.checkmargin {margin-right: 25px;}  
.checkmarginL {margin-left: 25px;}  

.pusher {padding-left: 15px;"}
.pusherR {margin-right: 40px;"}

.rand3{background-color: #FFF; line-height: 3px;}
.rand1{background-color: #FFF; line-height: 1px;}

.whiteborder {     color: #ffffff;      border: 4px solid #ffffff;      padding: 10px;      margin: 10px; }
#details { width: 580; color: #ffffff; }

.f200 {
    color: #000000;
}

.f210 {
    color: #000000;float: left;
}

.b2{border:2px solid #efefdc;}
.inp_sel{width: 80%;}

.form-bg {
  background: #eeefdf;
  width:1080px;
  overflow:hidden;
}

.data-bar {
  border-bottom:1px solid #fbfbf7;
  display:inline-block;
  padding:10px 10px;
}

.left {
float:left;
width:200px;

}

.column1 {     margin: 0;      padding: 0;     width: 450px;     border:0;     float: left; } 
.column2 {     color:black; margin: 0;      padding: 0;     border:0;     width: 50px;     float: right; }

.right {
float:right;
width:700px;
}

.data-box-nat {
width:650px;
height:100px;
border:2px solid #cbcbcb;
margin-bottom: 5px; 
}
.data-box-pct {
width:650px;
height:100px;
border:2px solid #cbcbcb; 
}
.data-box {
width:650px;
height:100px;
border:2px solid #cbcbcb; 
margin-bottom: 5px;
}
.data-box-country {
width:650px;
border:2px solid #cbcbcb; 
margin-bottom: 5px;
}
#table td { 
margin:120px; 
} 

.personName {     float:left;     width:300px;   }  
.otherDetails {     float:right;     width:300px;      }

a img     { border: 0;} 
```

Can you help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:19:44.617

Urs code itself works pretty well... Three radio buttons comes in same line in firefox and chrome.. but i dont know about IE ...[check this](http://jsfiddle.net/lakshmipriya/UTNPz/)

# report - Cognos 报告工作室

> ID：10208607
> 
> 赞同：0
> 
> 时间：2012-04-18T11:42:03.173
> 
> 标签：report, cognos

我是新手，一无所知。我想做的是一个简单的情况，当 else 结束时。

我想测试一个位置的值然后分配一个值，否则它是一个计算。

我的问题是当它是更高组的成员时如何测试该位置。

例如; [销售交付 (SALD)].[Locations].[Locations].[Sales Order Store Code]->:[PC].[@MEMBER].[31] 是它的样子，但无论我如何将它放在我的 when 语句中，我都会遇到各种错误。

我确信这很简单，但我还没有这样做。突然离开后被置于这个位置。

谢谢，埃里克

# command-line - wget下载某些文件时出错

> ID：10208612
> 
> 赞同：0
> 
> 时间：2012-04-18T11:42:35.223
> 
> 标签：command-line, wget

我在以编程方式下载某些文档时遇到问题。

例如这个链接

```
https://www-950.ibm.com/events/wwe/grp/grp019.nsf/vLookupPDFs/Introduction_to_Storwize_V7000_Unified_T3/$file/Introduction_to_Storwize_V7000_Unified_T3.pdf 
```

可以从浏览器下载，但是当我尝试从 wget 获取它时它不起作用。

我努力了

```
wget https://www-950.ibm.com/events/wwe/grp/grp004.nsf/vLookupPDFs/3-Mobile%20Platform%20--%20Truty%20--%20March%208%202012/\$file/3-Mobile%20Platform%20--%20Truty%20--%20March%208%202012.pdf 
```

它给了我这个输出

```
--2012-04-18 17:09:42--  
https://www-950.ibm.com/events/wwe/grp/grp004.nsf/vLookupPDFs/3-Mobile%20Platform%20--%20Truty%20--%20March%208%202012/$file/3-Mobile%20Platform%20--%20Truty%20--%20March%208%202012.pdf

Resolving www-950.ibm.com... 216.208.176.98
Connecting to www-950.ibm.com|216.208.176.98|:443... connected.
Unable to establish SSL connection. 
```

谁能帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:15:55.217

将 --no-check-certificate 添加到您原来的 wget 命令中。

另外，您需要确保您使用的是代理。

在 Linux 上：

```
export http_proxy=http://myproxyserver.com:8080 
```

在 Windows 上：

```
set http_proxy=http://myproxyserver.com:8080 
```

我还发现在 Windows 上，因为这是一个 https 请求，为了使它工作，我还必须设置 https_proxy。所以

```
set https_proxy=http://myproxyserver.com:8080 
```

显然，更改代理设置以适应您的特定情况。

# c# - 当我按下设备的返回键时如何解决未处理的异常？

> ID：10208613
> 
> 赞同：0
> 
> 时间：2012-04-18T11:42:35.363
> 
> 标签：c#, windows-phone-7

当我按下设备的返回键时出现未处理的异常如何解决这个问题？

我在 windows phone 7 应用程序中实现了收藏夹功能。私人无效FavoriteClick（对象发送者，EventArgs e）{

```
 var favorites = GetFavorites();

            if (favorites.Any(m => m.key == _key))
            {
                RemoveFavorite();
                IsolatedStorageSettings.ApplicationSettings["favorites"] = favorites;
                //NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative)); 
                return;
            }

            AddFavorite();              
    }

    private void AddFavorite()
    {
        const string messageBoxText = "Do you wish to add this page to your favorites?";
        const string caption = "Add Favorite";
        const MessageBoxButton button = MessageBoxButton.OKCancel;
        // Display message box
        var result = MessageBox.Show(messageBoxText, caption, button);

        // Process message box results
        switch (result)
        {
            case MessageBoxResult.OK:
                var favorites = GetFavorites();
                favorites.Add(_page);                   
                IsolatedStorageSettings.ApplicationSettings["favorites"] = favorites;
                break;
        }
    }

    private void RemoveFavorite()
    {
        const string messageBoxText = "Do you wish add remove this page to your favorites?";
        const string caption = "Remove Favorite";
        const MessageBoxButton button = MessageBoxButton.OKCancel;
        // Display message box
        MessageBoxResult result = MessageBox.Show(messageBoxText, caption, button);

        // Process message box results
        switch (result)
        {
            case MessageBoxResult.OK:
                List<MobiRecord> favorites = GetFavorites();

                foreach (MobiRecord m in favorites)
                {
                    if (m.key == _key)
                    {
                        favorites.Remove(m);
                        IsolatedStorageSettings.ApplicationSettings["favorites"] = favorites;                           
                        return;
                    }
                }                    
                break;
        }
    } 
```

问题 ：

进入收藏页面后，我添加了一些收藏夹，然后选择任何一个添加的收藏夹，然后单击返回按钮后单击删除收藏夹应用程序自动关闭（我得到了未经处理的异常）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:13:43.740

这里的问题很可能是您正在更改您正在执行 foreach 迭代的集合（通过在收藏夹上调用 Remove）。这将导致您的异常（尽管我需要异常详细信息才能确定）。

就像这个从集合中删除的代码片段一样：

```
favorites.RemoveAll(m => m.key == _key); 
```

# sql - 按检索 4 个值分组

> ID：10208616
> 
> 赞同：0
> 
> 时间：2012-04-18T11:42:55.303
> 
> 标签：sql, sql-server, group-by, aggregate-functions

我有以下查询

```
SELECT  Cod ,
        MIN(Id) AS id_Min,
        -- retrieve value min in the middle as id_Min_Middle,
        -- retrieve value max in the middle as id_Max_Middle,
        MAX(Id) AS id_Max,            
        COUNT(*) AS Tot
FROM    Table a ( NOLOCK )        
GROUP BY Cod
HAVING  COUNT(*)=4 
```

我怎样才能像对 and 所做的那样检索and之间`min`的值？如果我使用我得到的and ，但不是我想要的值。`max``min``max``(SUM(Id) - (MIN(Id)+MAX(Id))``sum``middle min``max`

例子

```
Cod      |  Id

Stack       10
Stack       15
Stack       11
Stack       40
Overflow    1
Overflow    120
Overflow    15
Overflow    100 
```

所需输出

```
Cod         | Min   | Min_In_The_Middle | Max_In_The_Middle | Max

Stack         10          11                   15               40
Overflow      1           15                  100               120 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:39:24.537

我不确定您的问题被标记`plsql` **和** `sql-server`. 但我假设您正在使用支持 CTE 和窗口函数的数据库系统。

为了概括您一直在尝试做的事情，首先将行号分配给行，然后使用您想要实现枢轴的任何技术：

```
;WITH OrderedValues as (
    SELECT Cod,Id,ROW_NUMBER() OVER (PARTITION BY Cod ORDER BY Id) as rn
       COUNT(*) OVER (PARTITION BY Cod) as Cnt
    FROM Table (NOLOCK)
), With4Values as (
    SELECT * from OrderedValues where Cnt=4
)
SELECT Cod,
    --However you want to do the pivot. Here I'll use MAX/CASE
    MAX(CASE WHEN rn=1 THEN Id END) as Value1,
    MAX(CASE WHEN rn=2 THEN Id END) as Value2,
    MAX(CASE WHEN rn=3 THEN Id END) as Value3,
    MAX(CASE WHEN rn=4 THEN Id END) as Value4
FROM
    With4Values
GROUP BY
    Cod 
```

希望您可以看到，与回答有关 3 行或 4 行的过于具体的问题相比，这更容易扩展到更多列。但是，如果您需要处理任意数量的列，则必须切换到动态 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:01:19.263

试试这个，祝你好运

```
WITH temp AS
         (SELECT   cod, MIN (ID) min_id, MAX (ID) max_id
              FROM tab
          GROUP BY cod
            HAVING COUNT (ID) = 4)
    SELECT code, temp.min_id,
           (SELECT   MIN (ID)
                FROM tab
               WHERE cod = temp.cod AND ID NOT IN (temp.min_id)
            GROUP BY cod) min_mid_id,
           (SELECT   MAX (ID)
                FROM tab
               WHERE cod = temp.cod AND ID NOT IN (temp.max_id)
            GROUP BY cod) max_min_id, temp.max_id
      FROM temp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T13:03:53.880

只有一个（[这里](https://data.stackexchange.com/stackoverflow/query/edit/67157)`[Table|[Clustered] Index]]Scan`有演示）：

```
SELECT  pvt.Cod,
        pvt.[1] AS MinValue,
        pvt.[2] AS MinInterValue,
        pvt.[3] AS MaxInterValue,
        pvt.[4] AS MaxValue
FROM
(
        SELECT  x.Cod, x.ID, x.RowNumAsc
        FROM
        (
                SELECT  *,
                        ROW_NUMBER() OVER(PARTITION BY t.Cod ORDER BY t.ID ASC) RowNumAsc,
                        ROW_NUMBER() OVER(PARTITION BY t.Cod ORDER BY t.ID DESC) RowNumDesc
                FROM    MyTable t
        ) x
        WHERE   x.RowNumAsc = 1 AND x.RowNumDesc = 4
        OR      x.RowNumAsc = 2 AND x.RowNumDesc = 3
        OR      x.RowNumAsc = 3 AND x.RowNumDesc = 2
        OR      x.RowNumAsc = 4 AND x.RowNumDesc = 1

) y
PIVOT   ( MAX(y.ID) FOR y.RowNumAsc IN ([1], [2], [3], [4]) ) pvt; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T12:16:56.593

我知道您想排除极值并找到其余的最小值和最大值。这是我想到的，但我没有机会运行和测试它......

```
WITH Extremes AS ( SELECT Cod, MAX(ID) AS Id_Max, MIN(ID) AS Id_Min 
                    FROM [Table] a GROUP BY Cod)
SELECT 
  e.Cod,
  e.Id_Min,
  MIN(a.Id) AS id_Min_Middle,
  MAX(a.Id) AS id_Max_Middle,
  e.Id_Max
FROM Extremes e
LEFT JOIN [Table] a ON a.Cod = e.Cod AND a.Id > e.Id_Min AND a.Id < e.Id_Max
GROUP BY e.Cod 
```

# javascript - jquery中的数据存储

> ID：10208619
> 
> 赞同：0
> 
> 时间：2012-04-18T11:43:14.820
> 
> 标签：javascript, jquery, arrays, object

我想在 jquery 中存储对象。对象是“事件”，每个事件都有一个日期、标题和一些文本。它们需要像数组一样存储（也许这就是多维数组），所以我可以用计数器遍历它们。

编辑，

我喜欢将 stores var 作为对信息进行分组的一种方式，但是如何添加多个项目以及如何为它们编制索引？

```
var dates = new Array('12th Dec', '14th Jan', '6th May');
var event_title = new Array('My Birthday', 'Going to Beach', 'Holiday');
var event_text = new Array('One Year Older', 'Remember the suntan lotion', 'on the plane to spain');

I need to return by index alert(dates[2], event_title[2], event_text[2]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:53:28.227

你可以试试：

```
var store = {};

store = {
     dates : dates,
     titles: titles,
     infotxt: infotxt
  }; 
```

然后访问：

`store.dates`左右`store.title`..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-22T20:54:54.897

您可能不想像这样做那样将单独的相关信息存储在数组中，然后尝试按索引访问这些组。

JavaScript 有一个完美的原生对象，允许您对相似的属性进行分组。只需使用对象文字：

```
var events = [];

events.push({
  data: someData,
  title: someTitle,
  text: someText
}); 
```

现在你有了通常被称为“集合”的东西。

您可以更进一步，将每个事件都设为“类”：

```
function MyAwesomeEvent(data, title, text) {
  this.data = data;
  this.title = title;
  this.text = text;
}

events.push(new MyAwesomeEvent(someData, someTitle, someText)); 
```

根据您的特定用例，这种方法可能会很严厉，但这是另一种选择。

# apache - iPhone上的.htaccess重写问题

> ID：10208621
> 
> 赞同：1
> 
> 时间：2012-04-18T11:43:23.087
> 
> 标签：apache, .htaccess

我正在尝试将（www 和非 www）.olddomain.com 重定向到 www.newdomain.com，并将 newdomain.com 重定向到 www.newdomain.com

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{HTTP_HOST} ^olddomain.com$
RewriteRule (.*) http://www.newdomain.com/$1 [R=Permanent]

RewriteCond %{HTTP_HOST} ^newdomain.com$
RewriteRule (.*) http://www.newdomain.com/$1 [R=Permanent] 
```

这些规则似乎适用于除 iPhone 上的 Safari 之外的所有浏览器——它适用于 iPad。iPhone 重定向到`www.newdomain.com/http://www.newdomain.com/`时`olddomain.com`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:19:40.063

有趣...让我们尝试更具体/更准确。如果这没有帮助 - 请提供真实的域名，以便我查看实际的 http 标头。

但在你这样做之前——如果可能的话，请清除你的浏览器缓存/重新启动（在 iPhone 上）——现代浏览器（至少是桌面浏览器）会缓存 301 重定向..如果你的初始重写规则出错，浏览器可能仍然使用缓存的重定向。

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(olddomain\.com|newdomain\.com)$ [NC]
RewriteRule ^(.*)$ http://www.newdomain.com%{REQUEST_URI} [R=301,L] 
```

两个规则的最终域相同，因此我将它们加入到单个规则中。

# sencha-touch-2 - 第二次添加视图时按钮点击没有反应

> ID：10208627
> 
> 赞同：4
> 
> 时间：2012-04-18T11:43:53.040
> 
> 标签：sencha-touch-2

当列表中的一个项目被选中时，我执行以下代码行。

```
this.details = Ext.create('EventManager.view.EventInfoView');
this.getNavigationView().push(this.details); 
```

所以我创建了一个新视图，并将其推送到导航视图上。在我的控制器中，我监听了在新创建的视图内的 acceptEventButton 的点击。

```
Ext.define('EventManager.controller.eventController', {
extend: 'Ext.app.Controller',
config: {
    refs: {
        acceptEventButton: '#acceptEventButton'
    },

    control: {
        "acceptEventButton": {
            tap: 'onAcceptButtonTap'
        }
    }
},
... 
```

第一次将此视图放置在导航视图上时，按钮点击起作用。当我点击后退按钮并按下另一个视图时，该按钮什么也不做。

我想按照现在的逻辑来解决这个问题。在创建视图然后推送它时，我宁愿自己不添加事件监听器。

这个问题所在以及如何解决的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T11:36:14.180

发布了一个新版本的 sencha 架构师，允许添加未列出的属性。

我通过在我的按钮上添加一个操作字段并在我的控制器中对该操作做出反应来解决这个问题。

```
{
    xtype: 'button',
    id: 'acceptEventButton',
    ui: 'confirm',
    text: 'Accept',
    action: 'acceptEvent'
} 
```

在我的控制器中，我有以下代码行

```
 control: {
        "button[action=acceptEvent]": {
            tap: 'onAcceptButtonTap'
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T05:55:07.290

我之前遇到过同样的问题，通过在我的navigationView的配置中设置
autoDestroy：false来解决

在将 false 应用于此 autoDestroy 属性后，它工作得很好。
希望它也对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:19:29.590

您应该按如下方式更改您的查询：

```
control: {
    "button[id='acceptEventButton']": {
        tap: 'onAcceptButtonTap'
    }
} 
```

作为额外信息：您还可以在这些查询中使用 xtype。
例如，如果您有如下导航视图：

```
Ext.define('app.view.Pages', {
    extend: 'Ext.NavigationView',
    xtype: 'pages',
    ...
} 
```

然后你像这样向它推送一个列表：

```
Ext.define('app.view.ItemList', {
    extend: 'Ext.dataview.List',
    xtype: 'itemlist',
    ...
} 
```

那么您可以按如下方式编写查询：

```
control: {
    "pages itemlist": {
        itemtap: 'onItemTap'
    }
} 
```

# mysql - mysql总付款

> ID：10208629
> 
> 赞同：3
> 
> 时间：2012-04-18T11:43:59.717
> 
> 标签：mysql

谁能帮我解决一个问题？我有一个看起来像这样的数据库：表费用

```
paydate       receiver   payment
2011-05-06     SOLO       3000
2011-05-08     Walmart    5000
2011-05-09     McDonalds  400
2011-05-08     Korona     700
2011-05-08     Walmart    1000
2011-05-09     BigZ       1300 
```

我必须计算完成最大付款当天所有付款的总和。结果应如下所示：

```
paydate       payment
2011-05-08    6700 
```

我设法找到了最高付款和付款日期：

```
SELECT payment, paydate FROM expenses WHERE payment=(SELECT max(payment) FROM expenses); 
```

但它只给了我最高付款和付款日期，我需要当天付款的总和。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T11:47:23.313

将查询更改为：

```
select sum(payment), paydate
from expenses 
where paydate=(
  select paydate from expenses 
  where payment = (
    select max(payment) from expenses)
); 
```

我用过这个[**`SUM`**](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum)功能的地方。

**编辑**：以前的输出不是所需要的。这是我以前和现在使用的[sqlfiddle 。](http://sqlfiddle.com/#!2/a62ec/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T07:48:24.997

据我所知，其他答案没有考虑到可以有多个日期具有相同的最高付款。我在下面的回答说明了如何返回所有可能的答案：

```
SELECT sum(payment) total_amount, paydate
FROM expenses
WHERE paydate in (SELECT paydate
                  From expenses
                  WHERE payment = (Select max(payment) from expenses))
group by paydate
order by total_amount desc 
```

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T12:02:59.887

```
CREATE TABLE `t` (
`t1` INT(10) NULL DEFAULT NULL,
`t2` DATE NULL DEFAULT NULL,
`t3` INT(10) NULL DEFAULT NULL
)

INSERT INTO `t` (`t1`, `t2`, `t3`) VALUES
(1, '2012-04-19', 100),
(2, '2012-04-18', 200),
(3, '2012-04-18', 300),
(4, '2012-04-19', 150); 
```

和查询：

```
select sum(t3), t2 from t  where t2=(select t2 from t where t3 = (select max(t3) from t)) 
```

结果给我们 500 和 2012-04-18，即总和和日期

或检查：

```
select t1, sum(t3), t2 from t  where t2=(select t2 from t where t3 = (select max(t3) from t)) group by t1 
```

# java - GWT html 文件国际化

> ID：10208632
> 
> 赞同：0
> 
> 时间：2012-04-18T11:44:12.533
> 
> 标签：java, gwt

GWT 有一个很好的文档：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale)

我已经本地化了几乎所有的案例，除了 html 文件。是否可以在 GWT 的项目中本地化 html 文件？

例如，如何本地化简单的 html 标题容器，使用 GWT 的 i18n 可能性：

```
...
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Text that should be localized :)</title>
  </head>
... 
```

非常感谢您的反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:52:41.223

If you want to localize only titles you can set it with GWT with method:

```
Window.setTitle(strings.title()); 
```

If you want to localize static text in your HTML you can implement it as jsp files. Here is the answer [Internationalization in a JSP web application?](https://stackoverflow.com/questions/2316485/internationalization-in-a-jsp-web-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:22:03.797

如果您想在主机页面内更改 GWT 应用程序之外的元素/文本，则 DOM 操作可能是一种方法：

[http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/DOM.html](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/DOM.html)
[https://developers.google.com/web-toolkit/doc/latest /DevGuideUiDom](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiDom)

# .net - .NET MVC3 - 网址和控制器关系？

> ID：10208642
> 
> 赞同：0
> 
> 时间：2012-04-18T11:44:42.317
> 
> 标签：.net, asp.net-mvc-3

我对 ASP .NET MVC3 比较陌生。我知道当我通过 Visual Studio 创建控制器时，它们会响应一些 URL。但是在哪里定义了哪个控制器响应哪个 URL？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:47:01.760

查看您的`global.asax`文件 - 路由表通常在那里定义。

这是 URL 和控制器/动作之间的映射。

有关详细信息，请参阅官方[ASP.NET MVC 路由概述](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs)。

```
public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default",                                              // Route name
            "{controller}/{action}/{id}",                           // URL with parameters
            new { controller = "Home", action = "Index", id = "" }  // Parameter defaults
        );

    }

    protected void Application_Start()
    {
        RegisterRoutes(RouteTable.Routes);
    }
} 
```

# ios - 设置 CATransform3D 透视变换的消失点

> ID：10208646
> 
> 赞同：0
> 
> 时间：2012-04-18T11:44:56.360
> 
> 标签：ios, perspective, catransform3d

有谁知道在使用 CATransform3D 变换创建透视效果时如何定义消失点坐标？我有代码可以旋转图像并查看添加的透视效果，但我需要能够指定消失点的位置，这似乎是一些不可修改的默认参数。我进行了广泛的搜索，得出的结论是，这可能是不可能的，并且需要我改为查看 OpenGL。感谢任何帮助。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:16:05.610

我认为您需要的是图层上的锚点。尝试将其更改为 0 到 1 之间的值：

```
self.layer.anchorPoint = CGPointMake(0.25, 0.25); 
```

希望有帮助！:)

# c# - 自动夹具和接口

> ID：10208648
> 
> 赞同：17
> 
> 时间：2012-04-18T11:44:58.400
> 
> 标签：c#, .net, autofixture

假设我有接口：

```
public interface IFoo
{
    int Bar1 { get; set; }
    int Bar2 { get; set; }
} 
```

如果`IFoo`是上课，我可以写：

```
fixture.CreateAnonymous<IFoo>(); 
```

结果将为 和 设置`Bar1`数字`Bar2`。

但是如何使用接口来做到这一点？我尝试使用`AutoMoqCustomization`，但这似乎适用于具有接口类型而不是接口本身的属性。

我正在寻找像`CreateAnonymous`上课一样的自动化方式。目前我正在创建界面模拟并明确设置它的属性，这是我想要保存的工作。我必须遗漏一些明显的东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-18T12:17:37.587

如果您想将[接口映射到特定的具体类](http://blog.ploeh.dk/2010/04/06/MappingTypesWithAutoFixture.aspx)，您当然可以这样做：

```
fixture.Register<IFoo>(() => fixture.CreateAnonymous<ConcreteFoo>()); 
```

（或`fixture.Register<IFoo>( fixture.CreateAnonymous<ConcreteFoo>)`简称）

但是，AutoMoq（以及 AutoRhinoMocks 和 AutoFakeItEasy）也是一种选择。这样，创建 IFoo 实例的尝试将返回一个 Moq 创建的代理，该代理实现了 IFoo。

但是，使用 Moq，您不会看到 Bar1 和 Bar2 已填充。这不仅是因为 AutoFixture 不调用 setter，而且因为 Moq 不（默认情况下）*实现*getter。

为了使 Moq 起作用，需要在`Mock<T>`自身上调用 SetupAllProperties()。虽然可能，但在当前的 AutoMoq 图中有点难以做到。已经有一个[工作项](http://autofixture.codeplex.com/workitem/4245)，但是如果您通读讨论，您会发现这个问题比看起来更复杂。

在任何情况下，具有属性的接口也是一个坏主意，因为许多其他原因，所以最好的解决方案是重新设计接口，使其不具有属性。

# java - 关于消息发布的可分发客户端的建议

> ID：10208649
> 
> 赞同：2
> 
> 时间：2012-04-18T11:45:06.950
> 
> 标签：java, rabbitmq, distributed-computing, amqp

我需要一些关于实现软件的最佳方法的建议，我需要在 Windows 和 linux 机器上分发和安装该软件。

我编写了一个小型 Java 消息传递应用程序，它在我的机器上本地运行并侦听特定端口以获取流式消息。此应用程序将消息推送到 JMS 队列中。然后我的 Web 应用程序轮询 JMS 队列（也是本地的）并按预期运行。

我现在希望显着扩展我的应用程序。这意味着我希望能够将消息传递应用程序分发给其他用户（可能在世界任何地方），这些用户可以安装它，然后使用简单的用户界面选择一个端口号，然后运行该应用程序。该应用程序的执行方式与我用 JAVA 编写的消息传递应用程序相同。它会处理选定端口上的消息，然后将它们发布到我的队列服务器上的队列中——我的 Java 应用程序将从该队列轮询消息。

我想知道几件事...

1.  我是一名 Java 程序员，但想知道生成可以轻松安装在各种平台上的远程客户端的最简单方法是什么？我宁愿人们可以下载和安装，而不是处理复杂的平台依赖关系。这可能意味着 Windows 安装程序...
2.  我正在考虑使用 AMQP 消息作为主干 - 例如 RabbitMQ。如果我决定回避分发基于 Java 的消息应用程序，这一点尤其重要。

只是对这种方法的一些想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:39:32.597

> 生成可以轻松安装在各种平台上的远程客户端的最简单方法是什么？

纯 Java，带有 GUI，使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)部署。用户单击一个链接，按照提示操作，然后应用程序。在屏幕上（自动更新）。

由 Sun（由 Oracle 维护）设计，用于 Windows、*nix 和 OS X。

# c# - 更改超链接 asp.net 依赖于 gridview 中的结果列

> ID：10208650
> 
> 赞同：1
> 
> 时间：2012-04-18T11:45:10.093
> 
> 标签：c#, asp.net, sql

下午好，我有一个gridview（gridview的简历）

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="IDEntretien,Expr2,Expr3" DataSourceID="SqlDataSource12" 
        EnableModelValidation="True" BackColor="White" BorderColor="#999999" 
        BorderStyle="None" BorderWidth="1px" CellPadding="3" GridLines="Vertical">
        <AlternatingRowStyle BackColor="Gainsboro" />
        <Columns>
            <asp:BoundField DataField="IDEntretien" HeaderText="IDEntretien" 
                InsertVisible="False" ReadOnly="True" SortExpression="IDEntretien" 
                Visible="False" />
            <asp:BoundField DataField="IDPersonne" HeaderText="ID" 
                SortExpression="IDPersonne" />
            <asp:BoundField DataField="dtmDate" HeaderText="Date" 
                SortExpression="dtmDate" DataFormatString="{0:d}" />
            <asp:BoundField DataField="strNom" HeaderText="Projet" 
                SortExpression="strNom" />
            <asp:HyperLinkField DataNavigateUrlFields="IDEntretien" 
                DataNavigateUrlFormatString="ActionASG.aspx?IDEntretien={0}" HeaderText="ASG" 
                Text="ASG" />
            <asp:HyperLinkField DataNavigateUrlFields="IDEntretien" 
                DataNavigateUrlFormatString="ActionAEPP.aspx?IDEntretien={0}" HeaderText="AEPP" 
                Text="AEPP" />
        </Columns>
        <FooterStyle BackColor="#CCCCCC" ForeColor="Black" />
        <HeaderStyle BackColor="#000084" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#999999" ForeColor="Black" HorizontalAlign="Center" />
        <RowStyle BackColor="#EEEEEE" ForeColor="Black" />
        <SelectedRowStyle BackColor="#008A8C" Font-Bold="True" ForeColor="White" />
    </asp:GridView>
<asp:SqlDataSource ID="SqlDataSource12" runat="server" 
        ConnectionString="<%$ ConnectionStrings:BE Intranet 2009 01 %>" 
        SelectCommand="SELECT Entretien.IDEntretien, Entretien.IDConseiller, Entretien.IDPersonne, Entretien.dtmDate, Entretien.memCommentaires, Entretien.IDProjet, Projet.strNom, Conseiller.strNom AS Expr1, Conseiller.IDConseiller AS Expr2, Projet.IDProjet AS Expr3 FROM Entretien INNER JOIN Conseiller ON Entretien.IDConseiller = Conseiller.IDConseiller INNER JOIN Projet ON Entretien.IDProjet = Projet.IDProjet WHERE (Entretien.IDPersonne = @IDPersonne)">
        <SelectParameters>
            <asp:QueryStringParameter Name="IDPersonne" QueryStringField="IDP" />
        </SelectParameters>
    </asp:SqlDataSource> 
```

我希望当结果出现在 PROJECT - ASG 列（来自表 Projet.strNom）中时，它会变成一个 HyperLinkField，它会引用一个页面“ActionASG.aspx？IDEntretien = {0}”。如果结果发生变化，例如 AEPP，它将引用“ActionAEPP.aspx?IDEntretien = {0}”。目前，该列如下：因此应该更改。???Datanavigateurlfields = "strNom" 根据内容变化，它指的是一个非常具体的页面。

我只是用 C# 编程，我希望我很清楚。在所有情况下，非常感谢您。

莱瑞克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:49:22.880

在网格的 datarowbound 事件中访问您的网格列，并根据您的链接按钮数据更改 int url

# asp.net-mvc-3 - MVC 部分视图隐藏主视图

> ID：10208656
> 
> 赞同：1
> 
> 时间：2012-04-18T11:45:32.730
> 
> 标签：asp.net-mvc-3, partial-views

我是 MVC 的新手。使用 MVC 3。

我有如下的 PersonMaster 控制器...具有以下两个操作。

```
public ActionResult TopTenPersons()
    {
        Thread.Sleep(2000);
        var persons = DatabaseHelper.Instance.Database.Query<Person_Master>("select top(10) from person_master").ToList();
        return View("_PersonGrid", persons);
    }

    public ActionResult Index()
    {
        var persons = DatabaseHelper.Instance.Database.Query<Person_Master>("select * from person_master").ToList();

        return View("_PersonGrid",persons);
        //return View();
    } 
```

然后，index.cshtml 视图如下..

```
@model System.Collections.Generic.ICollection<MyPracticeApp1.Models.Person_Master>
@section scripts{
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript">    </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
}

<h2>Persons</h2>

<p>

@Ajax.ActionLink("Click to top 10 Persons","TopTenPersons", new AjaxOptions{
UpdateTargetId="tbl_person",
InsertionMode=InsertionMode.Replace,
HttpMethod="GET"
})
</p>
<div id="tbl_person">
@Html.Action("Index","PersonMaster");
</div> 
```

..和上面在索引视图中调用的部分视图_PersonGrid.cshtml如下......

```
@model System.Collections.Generic.ICollection<MyPracticeApp1.Models.Person_Master>
@{
var persongrid = new WebGrid(Model);
}
@persongrid.GetHtml() 
```

....但问题是它直接显示部分视图。它没有呈现索引视图的 Ajax Actionlink。那么，错在哪里呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:49:30.593

更改`TopTenPersons`为返回 a `Partial View`，而不是 a`View`

```
public ActionResult Index()
{
    var persons = DatabaseHelper.Instance.Database.Query<Person_Master>("select * from person_master").ToList();

    return PartialView("_PersonGrid",persons);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:00:44.877

将 layout=null 添加到 _PersonGrid.cshtml

看起来像

```
@{
   Layout = null;
} 
```

当您添加此代码时，它不会呈现完整视图..

# wordpress - 在菜单中混合页面和类别 - 永久链接问题

> ID：10208660
> 
> 赞同：0
> 
> 时间：2012-04-18T11:45:41.833
> 
> 标签：wordpress, permalinks

我有/想要结构：

```
News
NewsPage | AnotherNewsPage | NewsCategory1 | NewsCategory2
NewsPost1 etc 
```

固定链接应该是`/news/newspage`（有效）、`/news/newscategory1`（无效/固定链接冲突）`news/newscategory1/newspost1`等/

我目前拥有它，因此这`News`是一个标准页面，而不是帖子页面。

如果这可能？或者我是否必须接受帖子的永久链接总是与页面永久链接不同/不混合页面和帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:55:52.603

帖子的永久链接总是不同的——除非您开始使用自定义帖子类型和分类法。

您可以在永久链接设置中更改类别路径的根 - 这将更改所有帖子的路径。

你也可以开始弄乱重写规则，但这可能会破坏其他一切。

# android - ExpandableListView 没有反应并收到任何点击

> ID：10208666
> 
> 赞同：4
> 
> 时间：2012-04-18T11:46:08.373
> 
> 标签：android, events, listview

当我尝试将可扩展列表插入现有活动（不是从 ExpandalbleListActivity 派生的）时遇到了几个问题。

该列表确实像我的 XML 布局中描述的那样显示，但是当我尝试单击/展开它时它没有反应。

为了测试，我在列表上方插入了一个按钮，它会收到点击。它自己的列表没有说可点击=假。

可扩展列表的代码：

```
<ExpandableListView
android:id="@+id/h_Zzwa_activity_listView"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:groupIndicator="@color/transparent" android:clickable="true">
</ExpandableListView> 
```

初始化列表的代码：

```
this.m_adapter = new HZzwaListAdapter(this, m_requests);
    listZzwa =  (ExpandableListView) findViewById(R.id.h_Zzwa_activity_listView);
    listZzwa.setAdapter(this.m_adapter) 
```

适配器（启动并调用组..）

```
public class HZzwaListAdapter extends BaseExpandableListAdapter
{

private List<HMyMessage> items;
private Context myContext;

public HZzwaListAdapter(Context context)
{
    myContext = context;
}

public HZzwaListAdapter(Context context, List<HMyMessage> items)
{
    myContext = context;
    this.items = items;
}

@Override
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent)
{

    if (convertView == null)
    {
        LayoutInflater inflater = (LayoutInflater) myContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.h_Zzwa_list_subitem,
                null);
    }

    HMyMessage message = items.get(childPosition);
    if (message != null)
    {
        TextView tvPlayerName = (TextView) convertView
                .findViewById(R.id.h_Zzwalistitem_info_signText);
        tvPlayerName.setText(message.info.getSign());
    }
    return convertView;
}

@Override
public int getChildrenCount(int groupPosition)
{
    return 1;
}

@Override
public Object getGroup(int groupPosition)
{
    return null;
}

@Override
public int getGroupCount()
{
    return items.size();
}

@Override
public long getGroupId(int groupPosition)
{
    return groupPosition;
}

@Override
public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent)
{

    if (convertView == null)
    {
        LayoutInflater inflater = (LayoutInflater) myContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater
                .inflate(R.layout.h_machching_list_item, null);
    }

    // Get item and set it into the view
    HMyMessage plan = (HMyMessage) items.get(groupPosition);
    if (plan != null)
    {
        TextView pname = (TextView) convertView
                .findViewById(R.id.h_Zzwalistitem_pname);
        TextView pF = (TextView) convertView
                .findViewById(R.id.h_Zzwalistitem_pText);

        if (pname != null)
        {
            pname.setText(plan.requester.getName());
        }
        if (pF != null)
        {
            pF.setText(plan.p + " unit  ");
        }
    }

    return convertView;

}

@Override
public boolean hasStableIds()
{
    return false;
}

@Override
public boolean isChildSelectable(int groupPosition, int childPosition)
{
    return true;
}

@Override
public Object getChild(int groupPosition, int childPosition)
{
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getChildId(int groupPosition, int childPosition)
{
    // TODO Auto-generated method stub
    return 0;
}

} 
```

即使我为 click 或 listItemClick 事件设置了一个侦听器，也没有任何反应。

为什么？对于通常的列表，同样的事情非常有效：/

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T09:46:25.787

请添加子和组布局。`onItemClick` **使用 listview，当 listview 的项目具有 button 时**，listview 不会收到类似的问题。我之前遇到过这个问题，所以我必须为适配器中的每个项目实现 onclick。检查这篇[文章 ListView 不响应 OnItemClickListener](http://xjaphx.wordpress.com/2011/07/14/listview-doesnt-respond-to-onitemclicklistener/) 和[问题 3414 **ListView 不接收具有可点击或可聚焦内容的项目的 OnItemClick/OnItemLongClick**](http://code.google.com/p/android/issues/detail?id=3414)

**编辑：**放置视图或视图`android:focusable="false"`。`Button``EditText`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T13:53:04.400

您需要为可扩展列表使用适当的侦听器......它们与普通列表不同。

**例子：**

```
lv.setOnChildClickListener(new ExpandableListView.OnChildClickListener() { 
    @Override 
    public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id)  
    { 
        // Your code for click action here.
        return true; 
    } 
}); 
```

还有一个类似的 OnGroupClickListener。

有关完整详细信息，请查看[文档](http://developer.android.com/reference/android/widget/ExpandableListView.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T16:31:34.187

在我创建了一个新的 group.xml 并使用它而不是现有的之后它起作用了

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-24T14:49:12.630

如果您在父视图中使用了一些可点击的组件（如 Checkbox、ToggleButton、ImageButton...），则不会触发 click 事件。

您可以在您的适配器中设置，在`getGroupView`，单击 convertView 的侦听器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-04T08:48:56.473

我知道这是一个老问题，但我最近从我的程序中收到了同样的问题。我的 ExpandableListView 没有响应，并且组点击的点击事件。因此，我没有实现 ExpandableListView.OnItemClickListener ，而是实现了 ExpandableListView.OnGroupClickListener ，它就像魅力一样工作。希望这对以后收到此问题的人有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-17T06:44:26.880

在适配器中创建一个接口。

```
public interface IExpandableListAdapter {
        void onItemClick(int groupPosition, boolean isExpanded);
} 
```

将此 onClickListener 添加到您的持有者视图

```
holderView.setOnClickListener(view -> iExpandableListAdapter.onItemClick(groupPosition, isExpanded)); 
```

在您的活动中覆盖接口。

```
ExpandableListAdapter expandableListAdapter = new ExpandableListAdapter(context, list, (groupPosition, isExpanded) -> {
        if(isExpanded)
            expandableListView.collapseGroup(groupPosition);
        else
            expandableListView.expandGroup(groupPosition); 
}); 
```

现在您可以在适配器中使用 Button、ImageButton 等的单击事件。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-08-31T15:25:02.353

添加`android:descendantFocusability="blocksDescendants"`到您正在膨胀的任何不再接收触摸事件的基本布局中。

# matlab - 从联合累积分布函数中模拟样本？

> ID：10208667
> 
> 赞同：3
> 
> 时间：2012-04-18T11:46:09.373
> 
> 标签：matlab, random, distribution, probability, sampling

我有两个独立变量 X 和 Y 的[联合密度函数](http://dl.dropbox.com/u/709705/JointDens.png)。现在我想从这个分布中采样新的 x,y。

我相信我必须做的是找到联合累积分布，然后以某种方式从中**采样。**我有点知道如何在 1D 中做到这一点，但我发现很难理解如何在 2D 中做到这一点。

我还使用 matlab 函数`cumtrapz`找到了上述 pdf的[累积分布函数。](http://dl.dropbox.com/u/709705/CumulativeDist.png)

为了清楚起见，我想做的是从这个经验分布中抽取随机值 x,y。

有人可以在这里指出我正确的方向吗？

**编辑：**我有数据值，我使用 [pdf bins] = hist3([NY])

然后我规范化pdf并做

累积分布 = cumtrapz(pdfNormalize)

是的（对下面的评论）X，Y 应该是独立的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:20:31.433

如果您知道如何在 1D 中对分布进行采样，那么您可以将其扩展到 2D。创建*X*的边际分布。从中取样，例如*X* [1]。然后在您的二维分布中修复一个变量 X= *X* [1]并为*Y*采样，即从一维分布 f [XY] ( *X* [1] , *Y* )中采样*Y 。*

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-16T15:07:51.263

给定两个随机变量 X 和 Y 的联合分布，您可以通过对 Y 的所有可能值求和来单独计算 X 的 CDF，即 P(X<=x)=Sum[P[X=x_i 和 Y= y_j],{x_i<=x 和 y_j}] 的所有值。一旦你掌握了 P(X<=x)，就有众所周知的采样 X 值的方法，我们称之为 a。现在你有了 a，计算 P(Y<=y given X=a)=Sum[P[X=a and Y=y_j],{y_j<=y}]/Sum[P[X=a and Y= y_j],{y_j 的所有值}]。使用与给您 X 相同的方法对 Y 进行采样，得出 Y=b。完毕。

相同的方法可以推广到两个以上的随机联合分布的随机变量。**

# javascript - 带有 azAZ-09-specialchars 的长字符串的 jquery REGEX 和 |

> ID：10208672
> 
> 赞同：0
> 
> 时间：2012-04-18T11:46:15.753
> 
> 标签：javascript, jquery, regex

您好，有人可以在 jquery regex 中帮助我吗？自从昨晚以来我一直在这里堆叠，最后我决定寻求一些帮助:)

任何这是我的正则表达式 abd 字符串在 exg 变量中.. 然后我想将每个字符串拆分

比赛[0] = 'eNortjI0sLBScgQDz3yTfK98XCdH59RKc4M8＆+ SSXFzzXFz3UE9H9yzfYMfCYtPiDLes0NSAXCL3nIj0osJcIvNCjwxLv6z8YhPTXFxv8＆KSMNekjIrgqqzQvOJyy0zXNPMoZ4vS0PQS4 + S0＆IIgU7OssPIolygXJWtcMMMFXCch | eNortjI0sLRScgQDz3yTfK98XCfHXDBDjzx3X4＆cXCLXygKn4tzsNCNcJ + NMK + xEM6Ok＆OIq1 + DcXFxLw8AwjyhHb480lyxTg＆LkKv8sXw＆zpCSnJE + XYo＆EVH＆3yKyAsMjEtKxSi4CIqlwigwL＆giinXDC3wCiXKBcla1wwpPEmEA == |';

匹配[1] = 'eNortjI0NLJScgQDz3yTfK98XCdH9yCPZJ＆CiCpD36xcMMuSsLwox6qAwMqkUAPTlChHI8ugvDQL9zzjbBMfT8u8RIOgMgvnHJ9SpzynvFDfQAugijBLv6CgXDBT＆0LzKMdI06BIf9OyKGd＆U58kN19fV8colygXJWtcMNaqJP8 = |';

`var regex = /[a-zA-Z]+[0-9]+[/-=&_]+|/g;`

`var exg = 'eNortjI0sLBScgQDz3yTfK98XCdH59RKc4M8&+SSXFzzXFz3UE9H9yzfYMfCYtPiDLes0NSAXCL3nIj0osJcIvNCjwxLv6z8YhPTXFxv8&KSMNekjIrgqqzQvOJyy0zXNPMoZ4vS0PQS4+S0&IIgU7OssPIolygXJWtcMMMFXCch|eNortjI0sLRScgQDz3yTfK98XCfHXDBDjzx3X4&cXCLXygKn4tzsNCNcJ+NMk+xEM6Ok&OIq1+DcXFxLw8AwjyhHb480lyxTg&LkKv8sXw&zpCSnJE+XYo&EVH&3yKyAsMjEtKxSi4CIqlwigwL&giinXDC3wCiXKBcla1wwpPEmEA==|eNortjI0NLJScgQDz3yTfK98XCdH9yCPZJ&CiCpD36xcMMuSsLwox6qAwMqkUAPTlChHI8ugvDQL9zzjbBMfT8u8RIOgMgvnHJ9SpzynvFDfQAugijBLv6CgXDBT&0LzKMdI06BIf9OyKGd&U58kN19fV8colygXJWtcMNaqJP8=|eNodwdEKgjAUXDDQf&ELnLk57GnXJaiQq4do923YSuXqQKNgXx90zl4yxspE&TUhD21cMNVmqzQkKbdYGVQ6rfzrIy9+nEThYPBvhLU2bpezFs&YSw4H2xdEj+t4mzoVz8Rhuy&i1KTL4BCIx5mcd1tt7Bc16uT4A7goJkI=|eNodyN0KwiAUXDDgd9kb2CzGujoqyeaJFjmKc9fYMCGxkLWfpy&6Lr9UMsbLDP6qyGMdBZzOFRsmq3RYXYN8tW8kUQRdyJ7k4SNq2fntbJwP7QWQ5HOcSeQEKcd0TGzB3XXhY2&wV&6h7a27b17KGQImm9ZOpEhl+y9eOlwnaQ==|eNortjI0NLBScgQDz3yTfK98XCdHv3J3b9P80rwo54pwTy+DgkR3M3eXTMdAY6ekjChHD4PcFJ+KNIMg54Bko9IKxxC&XFyTQl+niqLc7NAkV6PIXCKjgFCD0FQTc4vSCuf0JP+SJIPcspKsKEdj48ys9CiXKBcla1wwr5gmBA==|eNortjI0sLBScgQDz3yTfK98XCdHp1KniMLwiNKglFxc71L3wqrAPEe3UF&PHMuq9BDPXDCflKTkkJDQCIM0s&B8rwxLR5co5ySXbJ9SY7dSH&+SyAqL7JQkV3cPX&NKc9OilKoU51ST&CQ&k6Ki0vIolygXJWtcMKhcMCZa|eNortjI0MLJScgQDz3yTfK98XCdHP5MoxySjJMfIFL&CEsuSUKNQv4LiSre8KKco56IUT3&L0CyfgMIox&IoXCevKFwns&R011THgMKsfLcoZ++MQo&0cNeyIPOqkPTIqrCqCstcMM+C8ChHz8goFyVrXDCmkyQg|eNortjI0NLJScgQDz3yTfK98XCdH&4z8yCin0szUgNwo54zkkBDTJB&TrIBA06S8XFxvr7SKyuDsKOeIZOPcsFA&&4woZ49UU&ekIKMq&7DURCOLimRjX9eKSmdDxxwXZ4&wjDT&lLDsJI&iqpB01yhcJ4v0KJcoFyVrXDA8ZVwnTQ==|eNortjI0MrBScgQDz3yTfK98XCdHLy&LSLfMyOxcIvfIioJit9Lc9NC04NK8NEvncHe&9Byv5MRwy8pC79ywgLT0SJ+qjORCC5PK0oh8i8yU0gpPR9PK7BJXn9SCxDznsEQXb7e8LLMCp+L8tMTyKJcoF7XUioLMotTi+Mw8WwMla1ww8SosXw==|eNortjI0NLRScgQDz3yTfK98XCdHr0pcJ+PAdP9sc+NcIvcyY4PEoNywyuyKzOQsC8twDx9Hg7TUkHyv7BDjMtPg3LwcjyinqlwiNxcXXCeXKFwn7wggEWmck59YHJhZ5Z4ZmF4R5eSfaFnkWuzpVFRglpxcXB7lEuWiZA1cMO+XJv4=|eNortjI0MLdScgQDz3yTfK98XCdHr7LgEpekEmO&xIBgo5CMoOSSKu&QDKPK5OziojS&&Bwvk&BK4yqLCFOjTNNcXC9Tz8C0jLzSkuCMYI88v8KIwORQi&TMQLM8i&B8Sy9Pl7QqXwt&gxQvrzLHKJcoFyVrXDCNviXB|eNortjI0NLRScgQDz3yTfK98XCdHn4pCp5yQxNIkM8MQ97SI0PLkoIqy9DJvZ3PXgPDwgKSIKKfwPKfi&CqvtAqTTNf0YMdwS8cM&yjH7Mr0omTTsLQqg&RcXLOK9Oz00LDgwijHCOeqyuC8KFwnf2fvSMcolygXJWtcMD&GXCfp|eNortjI0NLBScgQDz3yTfK98XCdHF6&gcEdTr5SiNO8KY1wnk1KLIE&&yowox+JcMB&XlGyzQH8&gwKvyIjyEMuyNI+ktMSQ7DDzdAsTA&fyKMckl&KS9HDDgNRKL0+jkCintLCStFwin+LcRC+PXFxcJ7+qwCiXKBcla1wwqjUmMg=='`

```
 if(regex.test(exg)) {
      var matches = exg.match(regex);
      for(var match in matches) {
            alert(matches[match]);
      } 
       } else {
         alert("No matches found!");
       }` 
```

但是我的正则表达式不起作用，有人可以给我一个正确的正则表达式吗？：） 请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:52:56.603

埃利亚斯的回答可能是最简单的方法，但如果你坚持使用正则表达式，那么这个怎么样：

```
var regex = /[a-zA-Z0-9\/-=&_+]+\|{0,1}/g 
```

解释您的正则表达式及其不起作用的原因：

```
[a-zA-Z]+  // Match one or more a-z upper or lower case
[0-9]+     // *THEN* match one or more 0-9
[/-=&_]+   // *THEN* match one or more of these characters
|          // *THEN* match a pipe 
```

这里的问题是搜索字符串中的字母、数字和符号混合在一起。因此，它们都需要一起放在方括号内，以便您以*任何*顺序将它们中的一个或多个匹配在一起。你的将它们按特定顺序排列，首先是字母，然后是数字，然后是符号。

最后`{0,1}`的 匹配零个或一个管道，因此将捕获最后一个没有管道的匹配项。

顺便说一句，没有 JQuery 正则表达式之类的东西。正则表达式函数是 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:50:26.200

呃... 就这样使用怎么`split`样`marches = yourString.split('|');`

这将返回一个字符串数组，但不会包含管道字符，但如果需要，只需将它们连接到子字符串即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:53:08.610

您在 | 之前错过了一个斜线，所以这可能是您想要的？

```
var regex = /[a-zA-Z0-9\/-=&_]+\|/g; 
```

# javascript - 在javascript（或jQuery）中使用变量触发同名函数

> ID：10208674
> 
> 赞同：1
> 
> 时间：2012-04-18T11:46:46.917
> 
> 标签：javascript, function, variables

我有一个名称的函数，如下所示：

```
function tony {
   //do something
} 
```

我还有一个名为 currentName 的变量，其值为“tony”，如下所示：

```
var currentName = 'tony'; 
```

我想知道的是是否有任何方法`tony ()`可以通过使用变量来激活函数，`currentName`例如：（`+currentName+ ();`但我知道这不起作用）？

任何帮助将非常感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:47:50.277

如果它在全局范围内，您可以使用...

```
window[currentName](); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:48:12.747

这应该有效：

```
eval(currentName + '()'); 
```

# java - 检查字符串是否在字符串的 ArrayList 中

> ID：10208676
> 
> 赞同：59
> 
> 时间：2012-04-18T11:46:53.207
> 
> 标签：java, string, list, arraylist

如何检查 a`String`中是否存在`List`？

如果有结果，我想分配`1`给，否则。`temp``2`

我目前的代码是：

```
Integer temp = 0;
List<String> bankAccNos = new ArrayList<String>();//assume list contains values
String bankAccNo = "abc";
for(String no : bankAccNos)
    if(no.equals(bankAccNo))
        temp = 1; 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-04-18T11:50:35.200

```
temp = bankAccNos.contains(no) ? 1 : 2; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-18T11:49:00.900

`List`界面已经解决了这个问题。

```
int temp = 2;
if(bankAccNos.contains(bakAccNo)) temp=1; 
```

更多可以在关于[List](https://docs.oracle.com/javase/8/docs/api/java/util/List.html)的文档中找到。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-07T22:02:56.057

```
 List list1 = new ArrayList();
    list1.add("one");
    list1.add("three");
    list1.add("four");

    List list2 = new ArrayList();
    list2.add("one");
    list2.add("two");
    list2.add("three");
    list2.add("four");
    list2.add("five");

    list2.stream().filter( x -> !list1.contains(x) ).forEach(x -> System.out.println(x)); 
```

输出是：

```
two
five 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-19T22:11:59.387

```
*public class Demo {
   public static void main(String[] args) {
      List aList = new ArrayList();
      aList.add("A");
      aList.add("B");
      aList.add("C");
      aList.add("D");
      aList.add("E");
      if(aList.contains("C"))
         System.out.println("The element C is available in the ArrayList");
      else
         System.out.println("The element C is not available in the ArrayList");
      if(aList.contains("H"))
         System.out.println("The element H is available in the ArrayList");
      else
         System.out.println("The element H is not available in the ArrayList");
   }
}* 
```

输出将是：

> 元素 C 在 ArrayList 中可用 元素 H 在 ArrayList 中不可用

# iphone - 使用“完成”按钮作为返回键

> ID：10208678
> 
> 赞同：-1
> 
> 时间：2012-04-18T11:46:56.083
> 
> 标签：iphone, objective-c, ios

我想知道是否可以使用键盘的“完成”键作为返回键？

**例子 ：**

您在搜索字段中，输入您想要搜索的任何内容，然后不要点击键盘的返回键，我希望用户能够通过点击上面的“完成”键来开始搜索键盘。

**更新 ：**

我不想更改返回键的文本或方面。我想使用键盘上方小栏中的“完成”蓝色按钮启动搜索，在“上一个”和“下一个”旁边

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:55:44.327

试试这个：它会帮助你......首先将委托设置为你的所有文本字段，而不是编写这个方法：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {

    if([text isEqualToString:@"\n"]) {
        [textView resignFirstResponder];
        return NO;
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:49:36.160

我只是实现以下方法：

来自 UITextFieldDelegate

```
textFieldShouldReturn: 
```

询问代理文本字段是否应处理按下返回按钮。

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:49:46.873

```
textField.returnKeyType=UIReturnKeyDone; 
```

将此添加到您的文本字段的委托以在按下键盘时移除键盘：

```
- (BOOL)textFieldShouldReturn:(UITextField *)aTextfield {

    [textField resignFirstResponder];

    return YES;

} 
```

# javascript - Coffeescript 多行正则表达式替换混淆

> ID：10208681
> 
> 赞同：0
> 
> 时间：2012-04-18T11:46:59.420
> 
> 标签：javascript, regex, coffeescript

我需要重新组织一个古老的 cvs 数据库，以便可以使用正确的特殊字段名称将其导入电子商务软件。

这是我匹配的一些代码。[id,类别,制造商,型号]

```
"1","3","Samsung","Galaxy S III"
"2","3","HTC","One X" 
```

我的正则表达式

```
".*?".*?".*?".*?(".*?") 
```

我基本上只需要用稍微复杂的对象文字替换制造商，比如

```
{manufacturers: 'Samsung'} 
```

但我似乎无法弄清楚如何选择性地替换第三场比赛。我知道我可以拆分字符串并提取我需要的数据，但我不知道如何替换匹配项，以便输出变量如下所示：

```
"1","3",{manufacturers: 'Samsung'},"Galaxy S III"
"2","3",{manufacturers: 'HTC'},"One X" 
```

谢谢你帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:59:55.433

匹配这个：

```
"(.*?)","(.*?)","(.*?)","(.*?)" 
```

替换为：

```
"$1","$2",{manufacturers: '$3'},"$4" 
```

* * *

例子：

```
var s='"1","3","Samsung","Galaxy S III"';
var p='"(.*?)","(.*?)","(.*?)","(.*?)"';
var r='"$1","$2",{manufacturers: \'$3\'},"$4"';
console.log(s.replace(new RegExp(p,"g"),r)); 
```

输出：

```
"1","3",{manufacturers: 'Samsung'},"Galaxy S III" 
```

# tfs - Team Foundation Server：授予整个集合的签出权限

> ID：10208686
> 
> 赞同：0
> 
> 时间：2012-04-18T11:47:16.060
> 
> 标签：tfs

是否可以将 Windows 组权限“阅读权限”授予整个集合？

“阅读权限”是指该组中的任何人都可以从 TFS 中获取源，但不能签入某些内容或编辑“任务”或启动构建或其他任何内容。

我在服务器上的“Team Foundation 管理控制台”的安全设置中没有发现这样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:08:06.603

您可以通过更改我不推荐的贡献组的权限来自定义流程，或者通过添加具有您所需权限的新组来自定义流程，请参见下图

**注意**：您可以通过使用 TFPT ( [Team Foundation Power Tool](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f) ) 的流程编辑器或直接自定义 XML 文件来执行此操作。

![在此处输入图像描述](../Images/3cd694ab5a579ca7a83ab647ec4cd3d0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:24:45.717

实际上有一个更简单的方法可以做到这一点。打开要设置此权限的团队项目集合的源代码管理资源管理器。在左侧的树视图中，右键单击最顶部的节点（其中可能包含您的集合名称）并选择“安全性”。这将显示优先于整个集合的安全选项。

在此处，找到您要授予此权限的组并选择它们。接下来，在权限区域中，授予他们“读取”权限。这将允许该组中的每个人查看和下载该团队项目集合中的源代码。

如果您还有其他问题，请告诉我。

-Taylor，TFS 版本控制开发主管

# php - 我是否需要在每个使用数据库的函数中建立一个 php mysql 连接？

> ID：10208691
> 
> 赞同：11
> 
> 时间：2012-04-18T11:47:25.080
> 
> 标签：php, mysql

我正在创建一个 php restful API，目前我在每个函数中都有数据库连接信息。

```
//Connect To Database
    $hostname=host;
    $username=username;
    $password=password;
    $dbname=dbname;

    mysql_connect($hostname, $username, $password) OR DIE('Unable to connect to database! Please try again later.');
    mysql_select_db($dbname);
mysql_query($sqlApiAccess) or die('Error, insert query failed'); 
```

这样做的最佳方法是什么，我可以每个 php 文件有一个数据库连接吗？或者我是否需要为每个使用数据库的函数执行此操作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T12:24:14.833

为了避免每次都创建新的数据库连接，我们可以使用**[单例设计模式](https://stackoverflow.com/questions/203336/creating-the-singleton-design-pattern-in-php5)**——

我们需要一个数据库类——来处理数据库连接——

**数据库.class.php**

```
<?php
        class Database
        {
            // Store the single instance of Database
            private static $m_pInstance;

            private $db_host='localhost';
            private $db_user = 'root';
            private $db_pass = '';
            private $db_name = 'databasename';

            // Private constructor to limit object instantiation to within the class
            private function __construct() 
            {
                mysql_connect($this->db_host,$this->db_user,$this->db_pass);
                mysql_select_db($this->db_name);
            }

            // Getter method for creating/returning the single instance of this class
            public static function getInstance()
            {
                if (!self::$m_pInstance)
                {
                    self::$m_pInstance = new Database();
                }
                return self::$m_pInstance;
            }

            public function query($query)
            {
               return mysql_query($query);
            }

         }
?> 
```

&我们可以从其他文件中调用它-

**其他.php**

```
<?php
       include 'singleton.php';
       $pDatabase = Database::getInstance();

       $result = $pDatabase->query('...');
?> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-18T11:51:07.327

创建一个 config.php 并添加代码：

`config.php:`

```
$hostname = 'host';
$username = 'username';
$password = 'password';
$dbname   = 'dbname';

$conn = mysqli_connect($hostname, $username, $password) OR die('Unable to connect to database! Please try again later.');
mysqli_select_db($conn, $dbname); 
```

然后在您希望使用 mysql 的任何文件中，添加以下内容：

`script2.php`

```
<?php
require_once 'config.php';

mysqli_query($sqlApiAccess) or die('Error, insert query failed');
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T11:51:03.973

无需在每个功能中进行连接。您需要制作一个连接文件`conn.php`并进行连接查询。

```
<?php
mysql_connect("localhost", "admin", "1admin") or die(mysql_error());
mysql_select_db("test") or die(mysql_error());
?> 
```

在要连接数据库的任何其他文件中，只需写下这一行

```
<?php include("conn.php");?> 
```

在此文件上，您可以运行任何查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T11:51:08.920

做这个：

```
$db_connection= mysql_connect($hostname, $username, $password) OR DIE('Unable to connect to database! Please try again later.'); 
```

并且每次您要查询时：

```
mysql_query("my_query",$db_connection); 
```

请注意，如果您在函数中连接到数据库，则需要全局`$db_connection`.

当你想关闭数据库连接时：

```
mysql_close($db_connection); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T11:52:36.447

为什么不将连接信息移到配置中并将调用`mysql_connect`移到某个工厂？

例如

```
class ConnectionFactory {
    public static MysqlConnection CreateConnection() {
        $connection = mysql_connect(Config::$host, Config::$port etc);
        mysql_select_db($connection, Config::$schema);
        return $connection;
    }
} 
```

然后在你的代码中

```
$connection = ConnectionFactory::CreateConnection();
mysql_query($connection, $sqlApiAccess) or die('Error, insert query failed'); 
```

# javascript - 正则表达式用转义字符解析字符串

> ID：10208694
> 
> 赞同：6
> 
> 时间：2012-04-18T11:47:32.943
> 
> 标签：javascript, regex

我正在从格式化的字符串中读取信息。格式如下所示：

```
"foo:bar:beer:123::lol" 
```

“：”之间的所有内容都是我想用正则表达式提取的数据。如果一个 : 后跟另一个 : （如“::”），则此数据必须是“”（一个空字符串）。

目前我正在用这个正则表达式解析它：

```
(.*?)(:|$) 
```

现在我想到“：”也可能存在于数据中。所以它必须逃脱。例子：

```
"foo:bar:beer:\::1337" 
```

如何更改我的正则表达式，使其也匹配“\:”作为数据？

编辑：我使用 JavaScript 作为编程语言。它似乎对复杂的正则表达式有一些限制。该解决方案也应该在 JavaScript 中工作。

谢谢，麦克法兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:15:16.637

```
var myregexp = /((?:\\.|[^\\:])*)(?::|$)/g;
var match = myregexp.exec(subject);
while (match != null) {
    for (var i = 0; i < match.length; i++) {
        // Add match[1] to the list of matches
    }
    match = myregexp.exec(subject);
} 
```

输入：`"foo:bar:beer:\\:::1337"`

输出：`["foo", "bar", "beer", "\\:", "", "1337", ""]`

您将始终得到一个空字符串作为最后一个匹配项。鉴于您还希望空字符串在分隔符之间匹配（以及 JavaScript 中缺少后向断言），这是不可避免的。

**解释：**

```
(          # Match and capture:
 (?:       # Either match...
  \\.      # an escaped character
 |         # or
  [^\\:]   # any character except backslash or colon
 )*        # zero or more times
)          # End of capturing group
(?::|$)    # Match (but don't capture) a colon or end-of-string 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-19T14:03:44.890

这是一个解决方案：

```
function tokenize(str) {
  var reg = /((\\.|[^\\:])*)/g;
  var array = [];
  while(reg.lastIndex < str.length) {
    match = reg.exec(str);
    array.push(match[0].replace(/\\(\\|:)/g, "$1"));
    reg.lastIndex++;
  }
  return array;
} 
```

它根据字符将字符串拆分为标记`:`。

*   但是，如果您希望它成为令牌的一部分，您可以转义`:`字符。`\`
*   如果您希望它成为令牌的一部分，您可以逃避`\`with`\`
*   任何其他`\`都不会被解释。（即：`\a`遗骸`\a`）
*   因此，只要事先正确格式化数据，您就可以将任何数据放入令牌中。

这是一个带有字符串的示例`\a:b:\n::\\:\::x`，它应该给出这些标记：`\a`, `b`, `\n`, `<empty string>`, `\`, `:`, `x`。

```
>>> tokenize("\\a:b:\\n::\\\\:\\::x");
["\a", "b", "\n", "", "\", ":", "x"] 
```

为了更清楚：放入标记器的字符串将被解释，它有2个特殊字符：`\`和`:`

*   `\`只有在`\`or之后才具有特殊含义`:`，并且将有效地“转义”这些字符：这意味着它们将失去对标记器的特殊含义，并且它们将被视为任何普通字符（因此将成为标记的一部分）。
*   `:`是分隔 2 个标记的标记。

我意识到 OP 没有要求斜线转义，但其他查看者可能需要一个完整的解析库，允许数据中的任何字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T11:50:31.807

使用否定的lookbehind断言。

```
(.*?)((?<!\\):|$) 
```

`:`仅当它前面**没有**.时才会匹配`\`。

# silverlight - 发布中的无效跨线程访问

> ID：10208695
> 
> 赞同：0
> 
> 时间：2012-04-18T11:47:40.433
> 
> 标签：silverlight, c#-4.0, visual-studio-lightswitch

我有一个灯开关应用程序需要从它的 WCF Ria 生成 Crystal Report。在开发运行时我能够正确生成而没有错误，但是当我将它推送到发布环境时它会提示错误 - 无效的跨线程访问。

我已经阅读了一些文章，很可能是 Silverlight UI 线程问题

```
 partial void GenerateReport_Execute()
    {
        try
        {
            GenerateCrystalReport.Load();

            var temp = DataWorkspace.QUMCrystalReportDomainData.GenerateCrystalReport(SearchQuery.SelectedItem.GroupId, sQuarter, sYear, eQuarter, eYear);

            System.Windows.Deployment.Current.Dispatcher.BeginInvoke(delegate()
            {
                var uri = new Uri("C:\\Temp\\ReportTest.pdf", UriKind.RelativeOrAbsolute);

                if (AutomationFactory.IsAvailable)
                {
                    var shell = AutomationFactory.CreateObject("Shell.Application");

                    shell.ShellExecute(uri.ToString());

                }
                else if (!System.Windows.Application.Current.IsRunningOutOfBrowser)
                {
                    HtmlPage.Window.Navigate(uri, "_blank");
                }
                else
                {
                    throw new InvalidOperationException();
                }
            });
        }
        catch ( Exception ex)
        {
            MessageBox.Show(ex.ToString());                
        }

    } 
```

我做错了吗？请帮我确定这一点。

提前致谢

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T02:26:29.050

回答我的问题，基本上底部的消息框导致 UI 问题。

Lightswitch 的调度程序与 wpf 的调度程序不同（该消息框使用什么），如果我错了，请更正

# facebook - 用于 GWT 应用程序的 Facebook 集成的 Facebook api？

> ID：10208696
> 
> 赞同：1
> 
> 时间：2012-04-18T11:47:42.440
> 
> 标签：facebook, gwt, playn

我需要将 facebook 集成到我的 playN 游戏（gwt）中。用户应该能够登录 facebook 并获得好友列表、在线状态等。

任何人都可以为此建议一些facebook api吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:57:08.420

您可能需要考虑在 GWT 后端代码中使用[socialauth](http://code.google.com/p/socialauth/)。我目前将它用于 G+ 和 Facebook 集成服务器端。

# php - 在 PHP 中检查 memory_limit

> ID：10208698
> 
> 赞同：51
> 
> 时间：2012-04-18T11:47:48.007
> 
> 标签：php, memory-limit

我需要检查是否`memory_limit`至少`64M`在我的脚本安装程序中。这只是应该工作的 PHP 代码的一部分，但可能由于这个“M”，它没有正确读取值。如何解决这个问题？

```
 //memory_limit
    echo "<phpmem>";
    if(key_exists('PHP Core', $phpinfo))
    {
        if(key_exists('memory_limit', $phpinfo['PHP Core']))
        {
            $t=explode(".", $phpinfo['PHP Core']['memory_limit']);
            if($t[0]>=64)
                $ok=1;
            else
                $ok=0;
            echo "<val>{$phpinfo['PHP Core']['memory_limit']}</val><ok>$ok</ok>";
        }
        else
           echo "<val></val><ok>0</ok>";
    }
    else
        echo "<val></val><ok>0</ok>";
    echo "</phpmem>\n"; 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2019-01-26T22:41:50.817

检查命令行：

```
php -i | grep "memory_limit" 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-04-18T12:38:41.820

尝试先转换值（例如：64M -> 64 * 1024 * 1024）。之后，进行比较并打印结果。

```
<?php
$memory_limit = ini_get('memory_limit');
if (preg_match('/^(\d+)(.)$/', $memory_limit, $matches)) {
    if ($matches[2] == 'M') {
        $memory_limit = $matches[1] * 1024 * 1024; // nnnM -> nnn MB
    } else if ($matches[2] == 'K') {
        $memory_limit = $matches[1] * 1024; // nnnK -> nnn KB
    }
}

$ok = ($memory_limit >= 64 * 1024 * 1024); // at least 64M?

echo '<phpmem>';
echo '<val>' . $memory_limit . '</val>';
echo '<ok>' . ($ok ? 1 : 0) . '</ok>';
echo '</phpmem>'; 
```

**请注意，上面的代码只是一个想法。**不要忘记处理 -1（无内存限制）、仅整数值（以字节为单位的值）、G（以千兆字节为单位的值）、k/m/g（以千字节、兆字节、千兆字节为单位的值，因为速记不区分大小写）， ETC。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2019-05-09T09:14:10.903

**1\. PHP-CLI：**

检查ini的命令行：

```
$ php -r "echo ini_get('memory_limit');" 
```

或者检查 php-cli 信息和 grep`memory_limit`值：

```
$ php -i | grep "memory_limit" 
```

**2\. PHP-FPM：**

将此行粘贴到`index.php`或**任何可以在浏览器上查看的 php 文件中**，然后检查结果：

```
<?php echo ini_get('memory_limit'); 
```

另一种方法是使用`phpinfo()`：

```
<?php phpinfo(); 
```

然后寻找`memory_limit`价值 [![在此处输入图像描述](../Images/351c174b8eed8ceef84058465a5f6de4.png)](https://i.stack.imgur.com/O6I3L.png)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-03-11T04:31:55.943

这是另一种更简单的检查方法。

```
$memory_limit = return_bytes(ini_get('memory_limit'));
if ($memory_limit < (64 * 1024 * 1024)) {
    // Memory insufficient      
}

/**
* Converts shorthand memory notation value to bytes
* From http://php.net/manual/en/function.ini-get.php
*
* @param $val Memory size shorthand notation string
*/
function return_bytes($val) {
    $val = trim($val);
    $last = strtolower($val[strlen($val)-1]);
    $val = substr($val, 0, -1);
    switch($last) {
        // The 'G' modifier is available since PHP 5.1.0
        case 'g':
            $val *= 1024;
        case 'm':
            $val *= 1024;
        case 'k':
            $val *= 1024;
    }
    return $val;
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-08-19T04:46:55.903

很老的帖子。但我将把它留在这里：

```
/* converts a number with byte unit (B / K / M / G) into an integer */
function unitToInt($s)
{
    return (int)preg_replace_callback('/(\-?\d+)(.?)/', function ($m) {
        return $m[1] * pow(1024, strpos('BKMG', $m[2]));
    }, strtoupper($s));
}

$mem_limit = unitToInt(ini_get('memory_limit')); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-04-18T13:08:01.273

只要您的数组`$phpinfo['PHP Core']['memory_limit']`包含 的值[`memory_limit`](http://php.net/http://php.net/memory_limit)，它就可以执行以下操作：

*   该值的最后一个字符可以表示速记符号。如果它是无效的，它会被忽略。
*   字符串的开头以 PHP 自己的特定方式转换为数字：忽略空格等。
*   数字和速记符号（如果有）之间的文本被忽略。

例子：

```
# Memory Limit equal or higher than 64M?
$ok = (int) (bool) setting_to_bytes($phpinfo['PHP Core']['memory_limit']) >= 0x4000000;

/**
 * @param string $setting
 *
 * @return NULL|number
 */
function setting_to_bytes($setting)
{
    static $short = array('k' => 0x400,
                          'm' => 0x100000,
                          'g' => 0x40000000);

    $setting = (string)$setting;
    if (!($len = strlen($setting))) return NULL;
    $last    = strtolower($setting[$len - 1]);
    $numeric = (int) $setting;
    $numeric *= isset($short[$last]) ? $short[$last] : 1;
    return $numeric;
} 
```

速记符号的详细信息在[PHP 手册的 FAQ 条目中进行了](http://www.php.net/manual/en/faq.using.php#faq.using.shorthandbytes)概述，极端细节是[一些 PHP Memory Stretching Fun 协议的一部分](http://hakre.wordpress.com/2011/06/09/protocol-of-some-php-memory-stretching-fun/)。

请注意，如果设置为`-1`PHP，则此处不会限制，但系统会限制。因此，您需要决定安装程序如何处理该值。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-10-09T09:48:58.027

不是那么精确但更简单的解决方案：

```
$limit = str_replace(array('G', 'M', 'K'), array('000000000', '000000', '000'), ini_get('memory_limit'));
if($limit < 500000000) ini_set('memory_limit', '500M'); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-06-11T13:35:41.803

如果您对 CLI 内存限制感兴趣：

```
cat /etc/php/[7.0]/cli/php.ini | grep "memory_limit" 
```

FPM /“正常”

```
cat /etc/php/[7.0]/fpm/php.ini | grep "memory_limit" 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-04-23T14:16:23.170

谢谢你的灵感。

我遇到了同样的问题，我没有只是从互联网上复制粘贴一些功能，而是为它编写了一个开源工具。随意使用它或提供反馈！

[https://github.com/BrandEmbassy/php-memory](https://github.com/BrandEmbassy/php-memory)

只需使用 Composer 安装它，然后您将获得当前的 PHP 内存限制，如下所示：

```
$configuration = new \BrandEmbassy\Memory\MemoryConfiguration();
$limitProvider = new \BrandEmbassy\Memory\MemoryLimitProvider($configuration);
$limitInBytes = $memoryLimitProvider->getLimitInBytes(); 
```

# java - Kaazing vs jWebsocket

> ID：10208700
> 
> 赞同：1
> 
> 时间：2012-04-18T11:47:58.117
> 
> 标签：java, websocket, multiplayer, kaazing

有人可以比较这两个 websocket 服务器。我必须选择其中之一；由于多人“在线”游戏的新手，我需要专家意见。我可能会有 Flash 客户端。使用其中一个可能会面临哪些挑战。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T05:58:20.083

完全披露：我为 Kaazing 工作，我自己没有使用过 jWebSocket。

几个要点：

**0) 生产与测试版**

Kaazing 是生产质量的软件。jWebSocket 网页上的下载链接指向该产品的测试版。

**1) 客户端技术**

Kaazing 为多种客户端技术（JavaScript、Java、.NET/Silverlight 和 Flash）提供 WebSocket 库，看起来 jWebSocket 提供了 JavaScript 和 Java。您提到您需要一个 Flash 客户端，而 AFAIK 只有 Kaazing 提供。jWebSocket 使用 Flash 进行仿真（见下一点）。

> *注意：* Kaazing 现在提供 AngularJS、ReactJS、Objective-C (iOS)、Xamarin（.NET 支持 iOS 和 Android）、Java、.NET 和 Android 客户端。但是，已弃用对 SilverLight 和 Flash 的支持。

**2) 仿真**（适用于不支持 WebSocket 的浏览器）

jWebSocket 需要 Flash，而 Kaazing 不需要。请注意，安全 WebSocket (wss://) 的 Flash 仿真要求您为 Flash x 域策略文件打开一个单独的端口。在许多企业中，这是行不通的。

**3) 协议支持**

Kaazing 在 WebSocket 之上提供了广泛的高级协议：JMS（可以针对任何后端 JMS 消息代理运行）、STOMP、AMQP、XMPP 等。我不知道 jWebSocket 在这个领域做了什么。

**4) 企业部署**

将 Kaazing WebSocket 网关与现有的目录服务 (LDAP) 一起配置很容易。它支持单点登录，并且网关可以很容易地集群用于 HA 目的（同样，不太确定 jWebSocket 在这里做了什么。）

请查看这些功能的文档：

安全配置：

*   [使用网关支持高可用性](https://kaazing.com/doc/5.0/high-availability/u_high_availability/index.html)
*   [使用网关保护网络流量](http://kaazing.com/doc/5.0/security/o_tls/index.html)

**5) 开源**

jWebSocket 是开源的，Kaazing 有开源*社区版*和*企业版*。

希望这对现在有所帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T20:39:50.817

对于游戏平台，您可能需要查看[http://www.pubnub.com/](http://www.pubnub.com/)。我在一次开发者大会上遇到了他们的 CTO，出于您所陈述的目的，您可能会赢得大奖，而不必自己管理基础设施。查看他们的[http://www.pubnub.com/customers/showcase](http://www.pubnub.com/customers/showcase)，了解谁在使用他们的基础设施以及用于什么目的的详细信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T21:09:35.063

我是一名 jWebSocket 开发人员，我们目前正在开发 jWebSocket 的第一个生产版本，我将仅提及 jWebSocket 的一些优点： - 多个客户端（JavaScript、C#、Java OS、BlackBerry、Android、GWT（In process）和一些其他 ）。- 多个WebSocket引擎，只需在配置中切换运行即可，其中（Grizzly-GlassFish, Tomcat, TCP, NIO...）让jWebSocket应用更广泛，让应用更容易迁移。- NFC 和智能卡、Arduino 和其他技术。- 客户端中的一组非常多样化的演示（游戏、聊天、短信、WebSocket-Captcha、Sencha、Jquery 和 jQuery Mobile 插件、Arduino、智能卡、SessionStorage、SSH-Remote Shell Control RT in web、乒乓球游戏演示，无需服务器端插件等即可创建完整客户端应用程序的通道...）

很长一段时间以来，我们一直在为我们的社区制作新的文档、新的网站和新的 jWebSocket 生产版本，jWebSocket 是一个由来自世界各地的人们创建的项目，他们致力于贡献并创建一个真正的所有开源社区都可以使用的可用产品。我们正在努力为社区提供最好的服务。

我不会在 Kaazing 和 jWebSocket 之间进行比较，它们都有不同的社区、目标和许可证。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T21:40:31.387

对我来说，重点是 Kaazing 拥有专有许可证并且已经付费。jWebSocket 是 LGPL 且免费的。如果您正在开发具有 ROI 的应用程序，允许您为 Kazzing 之类的服务付费，我认为这是一个不错的选择（例如 pubnub.com 和 pusher.com），但如果您想构建一个完整的解决方案并托管它或者您想与 OS 社区一起创建新的 websocket 替代方案，jWebSocket 是一个很好的选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T16:17:21.373

在过去 3 个月左右的时间里，我一直在使用 jWebSockets，这是我第一次听说 Kaazing。

我将尽我所能描述我对 jWebSocket 的感受，希望它会有所帮助。

设置开发环境并开始使用并不容易，但使用它进行开发相当舒适。整个系统很有意义，而且很容易理解。您在服务器端使用 Java 进行编程，在客户端使用基于 json 的令牌使用 js 进行编程，这使得发送和接收数据变得非常容易。

然而，它非常缺乏支持。缺少很多文档，支持论坛几乎死了。有开发人员的付费支持，但我从未尝试过。

有很多开源演示可以用来理解和入门。他们中的大多数人工作顺利。在短暂访问他们的演示站点后，我无法对 kaazing 说些什么。

在我使用 jWebSocket 的几个月里，我还没有遇到过一个错误，系统运行顺畅，我唯一的失望是缺乏支持和文档。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-04T22:21:05.487

如果您正在寻找一个纯开源项目，请查看[Atmosphere Framework](http://github.com/Atmosphere/atmosphere)。许可证是 Apache 2。

——让弗朗索瓦（Atmosphere 的创造者）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-25T16:26:13.550

[jWebSocket](http://jwebsocket.org/)是一个很好的框架，几乎支持所有的服务器。它也有码头的支持。jWebSocket 的唯一问题是开发缓慢和零支持。Websocket 规范变化非常迅速，而 jWebSocket 发布非常缓慢。我宁愿观望 jWebSocket 框架一段时间。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-26T03:28:24.770

我要在 Peter 的评论中添加两件事，一是 Kaazing 的仿真解决方案向原生 WebSocket API 公开了相同的 API，因此您只需学习 WebSocket 而不是其他一些专有 API。您可以查看 Peter 提到的演示和文档以获取更多信息。

其次，Kaazing 刚刚宣布在 Amazon EC2 上提供 Kaazing WebSocket Gateway AMI - [http://kaazing.com/cloud](http://kaazing.com/cloud)

最好的，乔纳斯

# css - 嵌套选择器中的 CSS 样式链接颜色

> ID：10208706
> 
> 赞同：2
> 
> 时间：2012-04-18T11:48:09.530
> 
> 标签：css

在下面的示例中，链接 2 按预期显示为白色而不是黑色，如何在不将其包装在容器标签中的情况下设置链接 2 的颜色？

```
.text a{
color:#FFF;
}

.black{
color:#000;
}

<div class="text">
<a href="#">Link 1</a>
<a href="#" class="black">Link 2</a>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:49:15.517

您的第二个选择器需要比第一个选择器更具体才能覆盖它：

```
.text a {
color:#FFF;
}

.text a.black {
color:#000;
}

<div class="text">
<a href="#">Link 1</a>
<a href="#" class="black">Link 2</a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:50:01.227

它是白色的，因为前面的选择器具有更高的[特异性](http://snook.ca/archives/html_and_css/understanding_c)。一种解决方案：

```
.black{
  color:#000 !important;
} 
```

但是，如果您使用过多，这可能会导致复杂的问题。一般来说，最好的解决方案是尽量避免使用过多的选择器。有一个选择器为链接设置默认样式，然后只使用类来更改特定链接。例如：

```
a {
  color: #fff;
}
.black {
  color: #000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:52:16.210

结果是白色的，因为第一个选择器更加具体，即：获取具有“text”类的元素中的链接，而最后一个仅获取具有“black”类的任何元素。

您可以通过两种方式解决此问题：

```
.text a.black {
color:#000;
} 
```

或者

```
.black{
  color:#000 !important;
} 
```

其中“重要”覆盖了赋予“黑色”类元素的其他规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T11:54:11.930

这是工作解决方案，您只需将样式应用于带有 id 而不是类的黑色：

```
.text a{
color:#FFF;
}

#black{
color:#000;
}

<div class="text">
<a href="#">Link 1</a>
<a href="#" id="black">Link 2</a>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T11:55:18.493

正如其他人所提到的，它是白色的，因为您之前的“a”标签选择器比您的“黑色”类更具体。

这里有两个选项：

更加详细一些：

```
.text a{
color:#FFF;
}

.text a.black {
color:#000;
}

<div class="text">
<a href="#">Link 1</a>
<a href="#" class="black">Link 2</a>
</div> 
```

或者，您可以使用“！important”规则：

```
.text a{
color:#FFF;
}

.black{
color:#000!important;
}

<div class="text">
<a href="#">Link 1</a>
<a href="#" class="black">Link 2</a>
</div> 
```

我强烈建议第一种方法，但在某些情况下，“！important”可以快速解决，直到您找出真正的问题所在。不要滥用“！important”规则，因为它会在未来搞砸你——相信我！

希望这能回答你的问题。祝你有美好的一天。

迈克尔。

# mysql - 如何在使用 Select 语句时在 mysql 中转义 value 关键字

> ID：10208708
> 
> 赞同：1
> 
> 时间：2012-04-18T11:48:15.863
> 
> 标签：mysql

`SELECT`我在使用 Select 语句时遇到问题，其中我的列名为“值”，并且我想使用和运算符检索基于“值”列的值`LIKE`。

代码：

```
 SELECT compo.clecompo
  FROM    compo compo
       ON (compo.clecompo = metadatas_compo.clecompo)
   AND ((metadatas_compo.value LIKE '%%NOM%%')
    OR (metadatas_values.metavalues_name LIKE '%%NOM%%')) 
```

我突出显示了 value 关键字。这是我没有得到任何结果的查询示例。注：`(metadatas_compo.value)` `metadatas_compo`是表名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:50:33.070

你在 MySQL 中使用反引号 ` 转义文字

```
SELECT compo.clecompo FROM compo compo ON (compo.clecompo = metadatas_compo.clecompo) AND ((metadatas_compo.`value` LIKE '%%NOM%%') OR (metadatas_values.metavalues_name LIKE '%%NOM%%')) 
```

但是，建议不要在表/列名称中使用保留文字。对于保留字列表：

[http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

# javascript - $.getJSON 触发选择更改事件

> ID：10208710
> 
> 赞同：0
> 
> 时间：2012-04-18T11:48:35.690
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery Ajax 将类别添加到下拉列表中。选择一个选项后，我想加载子类别。

我面临的问题是通过 Ajax 函数向下拉列表中添加选项似乎也触发了更改事件。我怎样才能避免这种情况或更好地重写我的代码以避免这种行为？

这是我的代码：

```
categoryHelper.loadLevel1 = function () {

    // The control that needs to be filled with categories
    var $control = $("#select1");

    // This function runs $.getJSON() and fills the drop down list
    // with option elements
    fillDropDown(url, null, $control); 

    // When I select a value I want to run the function loadLevel2 which
    // takes the currently selected value from level 1 as parameter
    $control.change(categoryHelper.loadLevel2($control.val()));
}; 
```

fillDropDown 的代码：

```
function fillDropDown(url, parameters, dropdown) {
///     all data has been loaded</param>
    $.getJSON(url, parameters, function (data) {
        $(dropdown).empty();
        $(dropdown).append(createOption("", ""));
        $(data).each(function () {
            $(dropdown).append(createOption(this.value, this.text));
        });
    });
} 
```

感谢所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:55:28.357

这一行：

```
$control.change(categoryHelper.loadLevel2($control.val())); 
```

将调用结果传递`categoryHelper.loadLevel2($control.val())`给`.change()`; 如果这不是一个函数，那么您将不会向元素添加事件处理程序，而是触发任何已经绑定的事件处理程序。将其更改为：

```
$control.change(function() {categoryHelper.loadLevel2($control.val())}); 
```

这样您实际上是在将函数传递给`.change()`，并且它应该可以工作。

# java - 执行顺序混乱

> ID：10208712
> 
> 赞同：0
> 
> 时间：2012-04-18T11:48:39.430
> 
> 标签：java, android, eclipse

我有一个由几个不同活动组成的游戏应用程序。第一个被调用的是一个启动屏幕，当它完成时，它完成并通过一个意图启动另一个活动。为了访问所有活动中一致的一些全局数据，我还有一个像这样的“全局”类：

```
public class Globals extends Application
{
  int global_variable_A;
  int global_variable_B;
  int global_variable_C;

  public void onCreate()
  {
    // stuff
  }
} 
```

在 androidmanifest.xml 我有以下（除其他外）：

```
<application
    android:icon="@drawable/mygame_icon"
    android:screenOrientation="portrait"
    android:label='"My Game"' android:name=".Globals">

<activity
    android:label="My Game"
    android:name=".Splash" 
    android:screenOrientation="portrait">
    <intent-filter >
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

我现在的问题是，先执行 Globals 的 onCreate 还是 Splash 的 onCreate？还是它们同时在不同的线程上运行？我问是因为我得到了一些不一致的行为，如果它们在不同的线程上会得到解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:53:13.237

`onCreate()` 全局关闭课程..应用程序首先执行，然后是活动，..您可以通过在应用程序 onCreate() 方法中保留一个调试点来自己测试..

# sql - 在 perl DBI 上使用多个查询

> ID：10208716
> 
> 赞同：0
> 
> 时间：2012-04-18T11:48:59.510
> 
> 标签：sql, perl

我确信在同一行有更好的方法可以做到这一点，但我无法弄清楚如何，因为我是 Perl 的初学者。基本上我需要做的是选择、删除和计算结果。

```
$sth = $dbh->prepare("SELECT env,server, mwp.is_reference where env='$ARGV[1]';");
$sth->execute();

$sth2 = $dbh->prepare("delete from mwp.is_info_package where env='$ARGV[1]'");
$sth2->execute();

$sth3 = $dbh->prepare("SELECT count(1) from mwp.is_reference where env='$ARGV[1]'");
$sth3->execute() 
```

目标是我如何在同一行使用 3 个查询，而不是执行 3 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:12:43.543

好吧，您可以从使用占位符 ( `'?'`) 开始。

```
my @qlist
    = ( 'SELECT env,server FROM mwp.is_reference where env=?'
      , 'DELETE mwp.is_info_package WHERE env=?'
      , 'SELECT count(1) FROM mwp.is_reference where env=?'
      ); 
```

然后你可以像这样遍历它们：

```
my $env = $ARGV[1];

foreach my $query ( @qlist ) { 
    $dbh->prepare( $query )->execute( $env );
    Carp::croak( $dbh->errstr ) if $dbh->err;
} 
```

但是，当然，您真的想*选择*两个输出，不是吗？

```
use Carp qw<croak>;

my $select_query = 'SELECT env,server FROM mwp.is_reference where env=?';
my $delete_query = 'DELETE mwp.is_info_package WHERE env=?';
my $count_query  = 'SELECT count(1) FROM mwp.is_reference where env=?';
my %empty_atts;

my $rows 
    = $dbh->selectall_arrayref( $select_query, \%empty_atts, $env )
    ;
croak( $dbh->errstr ) if $dbh->err;
$dbh->prepare( $delete_query )->execute( $env );
croak( $dbh->errstr ) if $dbh->err;
my ( $count ) 
    = $dbh->selectrow_array( $count_query, \%empty_atts, $env )
    ;
croak( $dbh->errstr ) if $dbh->err; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:29:24.520

我使用以下查询语句解决了这个问题：

```
$sth = $dbh->prepare("select env,iserver, ( select count(1)  from is_reference where env='$ARGV[1]' ) as total from is_reference where env='$ARGV[1]'"); 
```

不是最优雅的方式，但用更少的线条解决了我的问题。关于删除查询，我转移到另一个条件来检查表是否有数据。

谢谢大家。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-18T13:18:43.623

您可以使用执行这些功能并返回选择结果和计数的存储过程，然后您只需要执行以下操作：

```
 my $sth = $dbh->prepare("EXEC procedure_name ?");
 $sth->execute( $ARGV[1] ); 
```

顺便说一句，您使用准备和执行的方式是不可取的。您使用 prepare 来避免在查询中直接使用 Perl 变量；您的 Perl 变量应该`execute()`作为值传递给，而不是作为字符串的一部分传递给`prepare()`. 这样做有很多很好的理由，包括防止 SQL 注入攻击。

我还注意到您上一个 SQL 查询的奇怪之处。我想你可能想要

```
SELECT count(env) FROM mwp.is_reference where env=? 
```

否则它将始终返回“1”作为计数......同样，除非有数据库触发器在做一些有趣的事情，否则您可以通过这种方式将第一个和最后一个查询组合成一个（我会留在这里`count(1)`，以防您真的是这样）想）：

```
 my $sth = $dbh->prepare('SELECT env,server FROM mwp.is_reference where env=?');
 $sth = $sth->execute( $ARGV[1] );
 my $result_set = $sth->fetchall_arrayref();
 my $count = scalar @{ $result_set }; 
```

这`$result_set`将是对包含结果的 ARRAYRefs 的 ARRAY 的引用；`$count`将包含该结果集中的行数。

# mysql - 运行 SQL 查询时出现未定义的偏移量错误

> ID：10208723
> 
> 赞同：0
> 
> 时间：2012-04-18T11:49:17.093
> 
> 标签：mysql, sql

每次我运行 SQL 语句：

```
SELECT * FROM tbl_accident WHERE progress = 'on hire' AND progress = 'vd' 
```

但它返回一个错误：

> 注意：未定义的偏移量：第 139 行的 C:\xampp\htdocs\newclaim\cases.php 中的 2
> 注意：未定义的偏移量：第 139 行的 C:\xampp\htdocs\newclaim\cases.php 中的 1

或者，当我运行时：

```
SELECT * FROM tbl_accident WHERE progress = 'on hire'; 
```

或者

```
SELECT * FROM tbl_accident WHERE progress = 'vd'; 
```

没有问题。我究竟做错了什么？第 138-140 行的代码如下：

```
<td><?php $caseOpen = explode("/", $row_cases['caseOpen']); 
  $caseOpen = $caseOpen[2].'/'.$caseOpen[1].'/'.$caseOpen[0]; 
  echo $caseOpen;?></td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:52:01.067

尝试

```
SELECT * FROM tbl_accident WHERE progress='on hire' OR progress='vd' 
```

您在查询中使用`AND`而不是。`OR`Using`AND`永远不会返回任何结果，因为`progress`不能`vd`同时`on hire`使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:52:15.783

请检查你的sql。您在 where 子句中使用的进度比使用 AND 的时间要多。您可以使用 OR 代替 AND

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T12:15:34.393

您目前总是从您的选择中返回 0 行。

试试这个：

```
SELECT * FROM tbl_accident WHERE progress in ('on hire', 'vd') 
```

# javascript - 通过javascript恢复初始规模

> ID：10208730
> 
> 赞同：0
> 
> 时间：2012-04-18T11:49:34.753
> 
> 标签：javascript, mobile

我的移动网站正在使用视口元标记，初始比例=1。我没有限制放大或缩小的能力，但是当我加载新页面（使用 Ajax）时，我想将视图恢复为初始比例值（重置缩放）。

这可能吗？

# java - JRules Studio - 在测试时显示 IN_OUT 参数的值

> ID：10208731
> 
> 赞同：0
> 
> 时间：2012-04-18T11:49:36.203
> 
> 标签：java, jrules

我正在使用 JRules Studio 开发一些极其简单的规则。规则填充 IN_OUT 参数。测试完成后，有没有办法查询 IN_OUT 对象中的值？

最初我想在调试器中询问它，但任何其他想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:11:29.717

我不确定是否理解这个问题：

你的 JAVA 代码是这样的： 然后你使用你的“out”参数......就像你对任何 JAVA 对象所做的那样
`IlrSessionFactory factory = new IlrJ2SESessionFactory();
IlrStatelessSession session = factory.createStatelessSession();
IlrSessionRequest sessionRequest = factory.createRequest();
sessionRequest.setRulesetPath(“/RuleAppName/rulesetName”);
sessionRequest.setTraceEnabled(true);
sessionRequest.getTraceFilter().setInfoAllFilters(true);
Map inputParameters = new HashMap ();
Report in_report = new Report(); // no-arg constructor
// ... populate the Object ...
inputParameters.put("report", in_report);
sessionRequest.setInputParameters(inputParameters);
IlrSessionResponse sessionResponse = session.execute(sessionRequest);
Report out_report = (Report)sessionResponse.getOutputParameters().get("report“);`

如果您想在调试时看到它们，我会说：

1/（未测试）在调试器透视图中查看“工作内存选项卡”
我不确定，但如果在此处可见，这是找到它们的最简单方法

2/（已测试）在您的规则流起点的初始操作中，添加：
context.insert（*您的参数的技术名称*）；
不是“企业名称”。无论如何避免在规则流、IRL 规则等技术工件中使用 BAL！

通过这样做，您可以强制引擎将您的参数插入到工作内存中。
没有重复（别担心，它会像魅力一样工作）但据我所知，这是使它们在 JRules 的 Eclipse 调试器中可见的最短方法

希望它有所帮助

# php - 在ajax函数中添加两个数字

> ID：10208733
> 
> 赞同：0
> 
> 时间：2012-04-18T11:49:38.707
> 
> 标签：php, javascript, ajax

嗨，我是 ajax 新手，尝试在 ajax 函数中添加两个数字，代码如下：

```
$("#next_btn").click(function(){
    Display_Load();
    var page = this.title;
    var subtract = 1;
    $("#content").load("pagination_brand.php?page=" + page, Hide_Load());
          this.title = parseInt(page + 1);
    }); 
```

在这个函数中，我调用了 div 的标题值，点击时我想在该数字中添加 1 个值，就像标题为 1 一样，onclick 它将变为 2，但是当我看到它显示的输出时，它作为字符串添加11除2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T11:50:57.527

一定是：

```
this.title = parseInt(page) + 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:52:10.127

只需解析数字，然后它将其视为整数而不是字符串

this.title = parseInt(page)+1;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:53:44.430

你需要这样做

```
for integers 
```

parseInt(number1,10) + parseInt(1,10) 用于浮点数/小数 parseFloat(number1) + parseFloat(1,10)

# azure-table-storage - 如何使用 log4Net adonetappender 将数据存储到 azure table stroage

> ID：10208734
> 
> 赞同：1
> 
> 时间：2012-04-18T11:49:40.243
> 
> 标签：azure-table-storage, adonetappender

我们正在使用 log4Net Adonetappender 将我们的应用程序使用配置的审计日志数据存储到 sqlserver 表中，现在我们正在将我们的应用程序移动到 Windows Azure，现在我们想使用相同的 adonetappender 将数据存储到 Windows azure 表存储中由于 sql azure 存储的成本昂贵，因此无法使用 sql azure 数据库。如果我们想存储到 sql azure 中，不需要任何修改，我们的应用程序运行良好，没有任何问题，但是我们希望将此审计日志数据存储到 windows azure 表存储中，因为该数据快速增长并且使用了 azure 表存储与 sql azure 相比，具有高可扩展性和更低的成本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:21:29.887

我刚刚遇到了同样的问题，并在这个线程中找到了我的答案：[log4net ADO.NET Appender 在 Dev Fabric 上工作，但在 Azure 上静默失败](https://stackoverflow.com/questions/2858854/log4net-ado-net-appender-works-on-dev-fabric-but-fails-silently-on-azure)

短版：adonetappender 在 Azure 中运行良好，但您需要确保您的表上有一个聚集索引。查看是否可以在 Azure 上的日志表中手动插入一行以确认问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T21:43:47.230

我不相信这种方法会奏效。Azure 表没有 ADO.NET 接口。如果您想直接从 log4net 中写入，您很可能必须编写自己的适配器来执行此操作。

也就是说，Azure 诊断已经写入表存储。如果您按照 Azure 诊断程序的要求设置并设置 log4net TraceAppender，则日志消息将进入表存储。这有点迂回，但我实际上自己使用它。

# cuda - 将一维数组复制到 CUDA 内存 - 指向内存的指针

> ID：10208735
> 
> 赞同：1
> 
> 时间：2012-04-18T11:49:40.430
> 
> 标签：cuda, labview

Q1：是否可以从 cuda.lvlib:Copy 1D Array to CUDA Memory (SGL).vi 获取指向设备内存的指针？我想将此指针传递给我的 DLL。

Q2：DLL 应该返回指向存储结果的设备内存的指针。是否可以使用 cuda.lvlib:Copy CUDA Memory to 1D Array (SGL).vi 将结果复制回主机？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T00:06:37.853

一维数组通常存在于 CUDA 用于分配设备内存的线性地址空间之外，所以不，应该不可能查询一维 CUDA 数组的指针。

所有版本的 CUDA 都可以通过主机上的 memcpy 命令读取/写入一维 CUDA 数组的内容，内核可以通过纹理读取它们；在最新版本的 CUDA 上使用 Fermi 类硬件，内核还可以通过表面引用和 1D 表面加载/存储内在函数读取/写入 1D CUDA 数组的内容。

# iphone - PhoneGap 1.6 - 基于旧的 PhoneGap 版本构建项目

> ID：10208743
> 
> 赞同：2
> 
> 时间：2012-04-18T11:50:18.733
> 
> 标签：iphone, xcode4, cordova

我对 PhoneGap 完全陌生（不是 iOS 编程），我的公司有一个使用旧版本 PhoneGap 制作的项目。我已经在我的计算机中安装了新的 PhoneGap 版本（v. 1.6），但该项目没有构建。我注意到该项目使用了一个名为 PhoneGap.framework 的文件，该文件在我的计算机中找不到。安装新的 PhoneGap v. 1.6 后，我注意到可以创建一个“基于 Cordova 的应用程序”（不是基于 PhoneGap 的应用程序），它使用其他框架，即 Cordova.framework。

问题：如何在我的计算机中构建项目？从一个版本到另一个版本的任何迁移？

我还注意到使用新 PhoneGap 版本创建的项目会创建以下代码片段：

```
#ifdef CORDOVA_FRAMEWORK
    #import <Cordova/CDVPlugin.h>
    #import <Cordova/CDVURLProtocol.h>
#else
    #import "CDVPlugin.h"
    #import "CDVURLProtocol.h"
#endif 
```

但我公司的项目有以下代码：

```
#ifdef PHONEGAP_FRAMEWORK
    #import <PhoneGap/PGPlugin.h>
    #import <PhoneGap/PGURLProtocol.h>
#else
    #import "PGPlugin.h"
    #import "PGURLProtocol.h"
#endif 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:44:37.000

如果已经使用 phonegap 创建了项目，那么您有 2 个选项。

1) 将现有项目升级到 Cordova 1.6，这并不难，但需要一些时间和重新调整工具，特别是如果使用的插件尚未更新...

2) 在此处下载较旧版本的 phonegap 并安装 - 最佳版本将是 1.3，因为 1.4 是开始向 cordova 过渡的时候。

这是旧版本的 git - [https://github.com/phonegap/phonegap/tags](https://github.com/phonegap/phonegap/tags)

安装 1.3 将让您使用原来的 phonegap 框架。

祝你好运！

# php - 使用 PHP 获取外键

> ID：10208748
> 
> 赞同：3
> 
> 时间：2012-04-18T11:50:27.840
> 
> 标签：php, mysql, foreign-keys, relational-database, innodb

我正在 PHP 中创建一个类，其中我只有表名的参数并获取所有列和值。但我不知道如何获取带有外键的列的值。
那是因为我不知道与哪个表相关。

我需要一种可以*从已知表中使用 PHP 或 SQL 获取外键的*方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T11:53:24.613

在 MySql 中，您可以查询`information_schema`以获取有关数据库的元信息。

```
SELECT
  TABLE_NAME AS `table_name`,
  COLUMN_NAME AS `column_name`,
  REFERENCED_COLUMN_NAME AS `referenced_column_name`,
  REFERENCED_TABLE_NAME AS `referenced_table_name`
FROM information_schema.KEY_COLUMN_USAGE
WHERE TABLE_SCHEMA = DATABASE()
  AND REFERENCED_TABLE_SCHEMA = DATABASE() 
```

来自：[https](https://github.com/troelskn/pdoext/blob/master/lib/pdoext/connection.inc.php#L413) ://github.com/troelskn/pdoext/blob/master/lib/pdoext/connection.inc.php#L413 （具体`loadKeys`功能）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:54:17.850

您可以使用 MySQL 命令：

```
SHOW CREATE TABLE mytable 
```

# php - 在网站上显示 Facebook 新闻源/时间线

> ID：10208754
> 
> 赞同：24
> 
> 时间：2012-04-18T11:50:45.523
> 
> 标签：php, html, facebook, web-services

我有一个客户希望他们公司的 Facebook 新闻源/时间线显示在他们的网站上。这不是个人时间线/新闻源，而是组织的。

我读过的所有内容似乎都是几年前的事情，但结果似乎是：Facebook 希望将其所有数据保存在自己的服务器上——他们不希望人们将其导出，而且人们因尝试而被禁止。（正如我所说，这些信息已有好几年的历史了。）

我发现的最接近的当前事物是[Activity Feed Plugin](http://developers.facebook.com/docs/reference/plugins/activity/)，但它只注册其他用户与站点或 FB 应用程序的交互。

有没有人成功地将他们的公共更新导出到外部网站，或者我必须告诉我的客户无法完成？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-23T23:01:36.717

AFAIK，在某种程度上是可能的。最简单但不是最适合您的情况的解决方案可能是[Like Box 插件](https://developers.facebook.com/docs/reference/plugins/like-box/ "https://developers.facebook.com/docs/reference/plugins/like-box/")：

> Like Box 使用户能够：
> 
> 查看有多少用户已经喜欢这个页面，以及他们的哪些朋友也喜欢它
> 阅读来自页面 的**最新帖子**
> 一键点赞页面，无需访问页面

更好的解决方案：使用他们的[Graph API](https://developers.facebook.com/docs/reference/api/ "https://developers.facebook.com/docs/reference/api/")，但是您只能读取数据（作为 JSON），不能在您的客户网站上完全复制流，不要期望能够应用 facebook 使用的样式（即您不会的）无法刮掉它），您必须复制它，或者创建自己的样式。

现在，如果页面是公开的并且可以被所有人阅读，因为没有隐私规则，那么您可以简单地使用任何有效的 access_token 调用 url（也可以是 app access_token）：

```
https://graph.facebook.com/<clientpagename_OR_id>/feed 
```

或者

```
https://graph.facebook.com/<clientpagename_OR_id>/posts 
```

根据您的具体需要，尝试使用[图形 API 资源](https://developers.facebook.com/tools/explorer)管理器进行检查（并查看返回的数据类型）。当有很多帖子时，会有分页网址，您也可以在资源管理器中注意到。

如果页面不公开，您需要一个具有 read_stream 权限的 access_token，因此您需要创建一个[facebook 应用程序](https://developers.facebook.com/apps "https://developers.facebook.com/apps")，类型为网站。然后让您的客户页面的管理员授权该应用程序，并`read_stream` [获得权限](https://developers.facebook.com/docs/authentication/permissions/#extended_perms "https://developers.facebook.com/docs/authentication/permissions/#extended_perms")。之后，您可以使用身份验证后收到的 access_token 调用 url，并可以继续读取流。

```
https://graph.facebook.com/<clientpagename_OR_id>/posts?access_token=thetoken 
```

在这种情况下，使用[PHP SDK](https://developers.facebook.com/docs/reference/php/ "https://developers.facebook.com/docs/reference/php/")来简化身份验证和调用图形 api。

重要链接：[认证指南](https://developers.facebook.com/docs/authentication/ "https://developers.facebook.com/docs/authentication/")、[实时更新](https://developers.facebook.com/docs/reference/api/realtime/ "https://developers.facebook.com/docs/reference/api/realtime/")。

祝你好运。

编辑：您确实需要访问令牌来访问提要或发布**连接**，但您不一定需要访问令牌来读取页面对象本身，如[本文档](https://developers.facebook.com/docs/reference/api/page/ "https://developers.facebook.com/docs/reference/api/page/")中所述。
来自文档的注释：

> 对于需要访问令牌的连接，如果页面是公开的且不受限制，您可以使用任何有效的访问令牌。受限页面上的连接需要用户访问令牌，并且仅对满足页面上设置的限制条件（例如年龄）的用户可见。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-23T23:25:59.450

您可以使用 Facebook 的 Graph API 检索组织的新闻源。无法通过公共 API 检索时间线。

没有插件可以做到这一点。你需要打电话

```
https://graph.facebook.com/USER_ID/home 
```

这会给你一个 JSON 响应。

然后，您需要将 JSON 解析为组织网页上的新布局。

迷惑地打电话

```
https://graph.facebook.com/USER_ID/feed 
```

不检索新闻源，而是检索用户的墙帖，这可能是也可能不是您想要的。

[这](http://johndoesdesign.com/blog/2011/php/adding-a-facebook-news-status-feed-to-a-website/)是一个教程，介绍了使用 php 在网站上设置新闻源的基础知识。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-11T12:41:56.033

最简单的方法是阅读 Facebook 时间线 RSS：

```
function FacebookFeed($pagename, $count, $postlength) {
$pageID = file_get_contents('https://graph.facebook.com/?ids='.$pagename.'&fields=id');
$pageID = json_decode($pageID,true);
$pageID = $pageID[$pagename]['id'];

ini_set('user_agent', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.9) Gecko/20071025 Firefox/2.0.0.9');
$rssUrl = 'http://www.facebook.com/feeds/page.php?format=rss20&id='.$pageID;
$xml = simplexml_load_file($rssUrl);
$entry = $xml->channel->item;

for ($i = 0; $i < $count; $i++) {
$description_original = $entry[$i]->description;
$description_striphtml = strip_tags($description_original);
$description = substr($description_striphtml, 0, $postlength);

$link = $entry[$i]->link;

$date_original = $entry[$i]->pubDate;
$date = date('d-m-Y, H:i', strtotime($date_original));

$FB_feed .= $description."&hellip;<br>";
$FB_feed .= "<small><a href='".$link."'>".$date."</a></small><br><br>";
}

return $FB_feed;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-06T14:44:43.737

绝对可以做到。您只需要通过 facebook 获取访问令牌，然后您就可以通过 facebook API 访问帖子的 JSON 提要。

您需要访问 facebook 开发者网站并单击顶部的应用程序。按照步骤获取应用程序密钥和客户端 ID。然后只需将它们放入以下 ​​URL，它将返回您的访问令牌：

[https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=YOUR_CLIENT_ID&client_secret=YOUR_CLIENT_SECRET](https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=YOUR_CLIENT_ID&client_secret=YOUR_CLIENT_SECRET)

分步说明：http: [//smashballoon.com/custom-facebook-feed/access-token/](http://smashballoon.com/custom-facebook-feed/access-token/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T11:57:34.083

是的，这是可以做到的。首先在 facebook 的开发者页面注册网站。您可以使用任何合适的 API 与 FB 进行交互。有时我使用 SpringSocial（因为我与 Spring 紧密合作）...您可以使用 FB 自己的 api，这也非常有用，您可以在[此处阅读教程](https://developers.facebook.com/docs/opengraph/tutorial/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-24T15:43:50.933

本文档详细介绍了获取 facebook 访问令牌以及使用令牌获取 FB 提要的步骤。

**例子：** 一个活生生的例子可在

> [https://newtonjoshua.com](https://newtonjoshua.com)

**Graph API 简介：** Graph API 是获取数据进出 Facebook 平台的主要方式。它是一个基于 HTTP 的低级 API，可用于查询数据、发布新故事、管理广告、上传照片以及应用程序可能需要执行的各种其他任务。

**脸书应用程序：**

> [https://developers.facebook.com](https://developers.facebook.com)

创建一个 Facebook 应用程序。你会得到一个`App_Id`和`App_Secret`

**图形 API 资源管理器：**

> [https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)`**{{App_Id}}**` /?method=GET&path=me%2Ffeed&version=v2.8

你会得到一个`access_token`短暂的。所以这将是我们的`short_lived_access_token`.

注意：在创建访问令牌时选择您需要的所有 fb 字段。这将授予访问令牌获取这些字段的权限。

**访问令牌扩展：**

> [https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id=](https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id=) **{{App_Id}}** &client_secret= **{{App_Secret}}** &fb_exchange_token= **{{short-lived-access_token}}**

您将获得`access_token`有效期为 2 个月的证书。

**访问令牌调试器：**

> [https://developers.facebook.com/tools/debug/accesstoken?q=](https://developers.facebook.com/tools/debug/accesstoken?q=) **{{access_token}}** &version=v2.8

您可以检查检查的详细信息`access_token`。

**Facebook SDK for JavaScript：** 在您的 HTML 中包含以下 JavaScript，以将 SDK 异步加载到您的页面中

```
 (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk')); 
```

**Graph API：** 让我们调用 API 来获取我们的 FB id、个人资料图片、封面图片和提要。

```
window.fbAsyncInit = function () {
    FB.init({
        appId: '{{App_Id }}',
        xfbml: true,
        version: 'v2.7'
    });
    FB.api(
        '/me',
        'GET', {
            fields: 'id,picture{url},cover,feed',
            access_token: {{access_token}}
        },
        function (response) {
        if (response.error) {
                console.error(response.error.message);
            }
            if (response.picture.data.url) {
                profilePic = response.picture.data.url;
            }
            if (response.cover.source) {
                coverPic = response.cover.source;
            }
            if (response.feed.data) {
        feeds = response.feed.data;
                feeds.forEach(function (feed) {
            // view each feed content
                });
            }
            if (response.feed.paging.next) {
                nextFeedPage = response.feed.paging.next;
        // a request to nextFeedPage will give the next set of feeds
            }

        }
    );
}; 
```

使用 Graph API Explorer 设计应在“字段”中输入的查询（例如：“id,picture{url},cover,feed”）

现在您可以使用您的 access_token 从 Facebook Graph API 获取您的 Facebook 数据。

参考[https://developers.facebook.com/docs/graph-api/overview/](https://developers.facebook.com/docs/graph-api/overview/)

注意：您`access_token`将在 2 个月后到期。之后创建一个新的 access_token。

# iphone - 无法在 iPhone 中关闭 ABPersonViewController

> ID：10208758
> 
> 赞同：2
> 
> 时间：2012-04-18T11:50:54.563
> 
> 标签：iphone, abpersonviewcontroller, abrecordref

如何解除 ABPersonViewController？这是我的代码

```
 #pragma mark - Edit Record Method

-(void)btnEditContactTapped:(id)sender {

    // Fetch the address book 
    ABAddressBookRef addressBook = ABAddressBookCreate();

    ABRecordID recID = ABRecordGetRecordID(record);

    ABRecordRef record1 = ABAddressBookGetPersonWithRecordID(addressBook,recID);

    ABPersonViewController *personViewController = [[ABPersonViewController alloc]init];
    // set delegate
    personViewController.personViewDelegate = self;

    // Allow editing info
    personViewController.allowsEditing = YES;

    // Display contact info of selected person
    personViewController.displayedPerson = record1;

    // Person view controllers must be used with a navigation controller in order to function properly.
    UINavigationController *nc = [[UINavigationController alloc]
                                  initWithRootViewController:personViewController];
    [self presentModalViewController:nc animated:YES];
    [personViewController release];

}

#pragma mark - ABPersonViewControllerDelegate Method

- (BOOL)personViewController:(ABPersonViewController *)personViewController shouldPerformDefaultActionForPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifierForValue {

    [self dismissModalViewControllerAnimated:YES];
    return NO;
} 
```

记录在我的 ivar 中，声明为 .h 文件中的 ABRecordRef 记录。ABPersonViewControllerDelegate 方法永远不会被调用？怎么了？任何形式的帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:57:52.690

您是否在项目的 .h 中实施了这些协议..？

```
< ABPeoplePickerNavigationControllerDelegate,
                                                                 ABPersonViewControllerDelegate,
                                                                 ABNewPersonViewControllerDelegate,
                                                                 ABUnknownPersonViewControllerDelegate> 
```

# cross-platform - cmake：安装可执行文件并创建指向它们的链接

> ID：10208759
> 
> 赞同：5
> 
> 时间：2012-04-18T11:50:56.520
> 
> 标签：cross-platform, cmake

我正在使用 cmake 和 cpack 来构建我的项目和构建包。我在我的项目中创建了一些可执行文件，我们称它们`EXE1`为`EXE2`.

在创建这些可执行文件的不同版本时，我想命名以反映可执行文件的版本（比如说`EXE1_1.0.0`）。我可以通过执行更改目标的输出名称`set_target_properties`。

但是，现在在执行 时`install`，我想创建一个指向可执行文件版本名称的符号链接，即我想要

*   安装在`bin`目录中的“版本化”可执行文件，即`EXE1_1.0.0`
*   创建指向“版本化”可执行文件的符号链接，即 create symlink `EXE1`，它指向`EXE1_1.0.0`

有人可以建议我怎么做吗？

第二个问题是：如何安装配置文件/etc/MYPROJECT/目录？我需要将什么 DESTINATION 用于配置文件，例如`bin`用于可执行文件和`lib`库？使用绝对路径是否像`/etc`cmake 可接受的做法一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:44:07.270

我随后在 cmake 邮件列表上问了这个问题，这是我收到的回复：

> 答案的有效性将取决于您使用的 CMake 版本以及您想要支持的平台集。
> 
> 符号链接不是那么便携
> 
> a) 创建可能 [当前] 无法移植，但如果您的目标是 Unix，您可以使用 cmake -E create_symlink 创建一个。
> 
> b) 根据您使用的 CPack 生成器和 CMake/CPack 版本
> 符号链接可能嵌入或不嵌入包中。
> 
> 即 CPack pre 2.8.7 不能创建包含符号链接的 ZIP 存档 CPack 2.8.8 现在可以做到这一点。
> 
> 然后您可以在安装时使用 install(SCRIPT ... 或 install(CODE ...) 来执行此操作。
> 
> 如果您使用 RPM，另一种选择是使用特定于软件包的安装后脚本。cpack --help-variable CPACK_RPM_POST_INSTALL_SCRIPT_FILE
> 
> 最后一个解决方案当然只适用于 CPack RPM。

对于第二个问题

> 您可以使用绝对目标路径，它们应该由 CPack DEB 和 RPM 处理得很好，我不知道其他的。
> 
> 如果您的软件应该安装在 Windows 上，这不适用于存档生成器（ZIP、TGZ 等...）和/或 NSIS。
> 
> 可能您可以执行以下操作：
> 
> if(UNIX AND NOT APPLE) set(CONFDEST "/etc/${CMAKE_PROJECT_NAME}") else() set(CONFDEST "etc") endif()
> 
> install(FILES yourconffile DESTINATION ${CONFDEST})

# c# - 如何在 windows phone7 中显示印地语内容？

> ID：10208768
> 
> 赞同：7
> 
> 时间：2012-04-18T11:51:19.057
> 
> 标签：c#, windows-phone-7

如何在 windows phone7 中显示印地语内容？

我有印地语内容（语言）如何在浏览器控件中显示这种本地语言。

或任何文本框或富文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:59:14.840

唯一一次提到印地语支持是在 2012 年 1 月，它指出不幸的是 Windows Phone 7 不支持印地语字体样式，并且在撰写本文时，不支持安装自定义字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:38:59.797

我认为，您正在寻找的是嵌入一种支持印地语字形的字体。您可以按照以下教程进行操作：http: [//blogs.msdn.com/b/robcamer/archive/2010/06/26/embed-a-font-in-a-windows-phone-7-application.aspx](http://blogs.msdn.com/b/robcamer/archive/2010/06/26/embed-a-font-in-a-windows-phone-7-application.aspx)

# eclipse - 如何在 Eclipse Indigo 3.7.1 中安装 JavaEE 功能

> ID：10208771
> 
> 赞同：0
> 
> 时间：2012-04-18T11:51:20.103
> 
> 标签：eclipse, eclipse-indigo

我安装了 Eclipse Indigo。那时，我没有安装 Indigo 的 JavaEE 版本。现在我想在我的 Indigo 中拥有 JavaEE 的功能。我应该为此使用哪个插件。这样我就可以添加 Tomcat 服务器并获得 HTML/JSP 语法突出显示。

以下是我的eclipse版本截图。

![在此处输入图像描述](../Images/141e82206e7d293ccb15b3d2f03e4a6e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:56:32.887

[Eclipse Web 工具 (WTP)](http://www.eclipse.org/webtools/)。这是更新站点：http: [//download.eclipse.org/releases/indigo/](http://download.eclipse.org/releases/indigo/)。

但是请注意，Eclipse Java EE 版本包含除 WTP 之外的一些其他功能和插件，因此我强烈建议您安装新版本的 Eclipse Java EE 并将其与现有工作区连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:55:36.700

您可以升级 Eclipse。请看以下链接

[http://wiki.eclipse.org/FAQ_How_do_I_upgrade_Eclipse%3F](http://wiki.eclipse.org/FAQ_How_do_I_upgrade_Eclipse%3F)

# javascript - 自动化测试 Android 应用程序？

> ID：10208775
> 
> 赞同：2
> 
> 时间：2012-04-18T11:51:36.750
> 
> 标签：javascript, android, html, css, testing

大家好，我手头有一个严重的问题，我需要了解一些工具，这些工具可以自动对使用 HTML、JavaScript、CSS 制作的 Android 应用程序进行黑盒测试，用于本机应用程序我使用 Robotium 作为测试工具来自动化对android应用程序进行黑盒测试，但我找不到任何足以自动测试使用PhoneGap制作的应用程序的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T04:19:35.250

您可以使用 Gorilla Logic 测试工具..从这里下载**MonkeyTalk工具**[....](http://www.gorillalogic.com/testing-tools/monkeytalk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:51:47.937

[NativeDriver](http://code.google.com/p/nativedriver/)可能适合你。

# php - 如何在 javascript 标签中使用 PHP 代码？

> ID：10208778
> 
> 赞同：0
> 
> 时间：2012-04-18T11:51:52.553
> 
> 标签：php, javascript

> **可能重复：**
> [我可以在 javascript 中使用 php 吗？](https://stackoverflow.com/questions/1851995/can-i-use-php-in-javascript)

我想将变量“i”(javascript) 的值分配给变量 $x(PHP)。下面的代码不起作用

```
<script type="text/javascript">
$(function () {

 for (var i = 0; i <= 10; i += 1)
    d1.push([i, <?php $x=" ?>i<?php "; echo test($x); ?>]);
.
.
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:55:00.673

但是 PHP 是*服务器端*的，所以在 JavaScript 意识到它存在之前就被解析了……你需要在循环之前将 PHP 变量保存到某种 JS 数据结构中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:56:22.083

您可以使用 PHP 代码生成 JavaScript，然后将其提供给用户。反过来（使用 JavaScript 创建 PHP 代码或在那里注入值）是不可能的。

这里的一个例外是，您可以使用 AJAX 请求在服务器上执行另一个 PHP 脚本。在该请求中，您可以包含一些由 JavaScript 生成的值，以将它们传递给 PHP 脚本。

一般来说，PHP 是服务器端语言，而 JavaScript 是客户端语言。您可以在服务器端生成客户端代码，但反之则不行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:57:20.060

当然是行不通的。您的代码正在做的是为 PHP 变量`$x`分配`" ?>i<?php "`. 您无法在字符串文字中间逃离 PHP 模式。

您似乎误解了 Web 应用程序的客户端/服务器模型如何工作的某些基本原理。JavaScript 在客户端（在浏览器中）运行，PHP 在服务器上运行。客户端永远不会看到任何 PHP 代码，服务器永远不会执行任何 JavaScript 代码。你不能混搭（无论如何不使用 AJAX）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T11:58:07.250

您可以将变量内容 $_POST 到服务器（通过表单）。否则，您将不得不使用 AJAX 将变量发布到服务器。

无论哪种方式，您都需要从客户端获取它并将其发送到服务器端。

# php - 使用纬度和经度获取时区？

> ID：10208780
> 
> 赞同：6
> 
> 时间：2012-04-18T11:51:58.770
> 
> 标签：php, iphone

我有当前的纬度和经度，我想要那个纬度和经度的时区。（我想知道这个经纬度来自哪个时区）

我想要像这样的输出。

```
Latitude:22.5726460
Longitude:88.3638950 
```

这是印度加尔各答的纬度经度，当我有这个纬度时，我想要亚洲/加尔各答（作为输出）

请提出任何可以解决我问题的api或任何想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:53:52.530

您可以自己计算时区以获得更多帮助，请参阅此[答案](https://stackoverflow.com/a/4633247/919545)可能对您有帮助....

**编辑：** 您可以使用weatherbug api使用您的纬度/经度获取准确时间

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T14:10:20.013

我最近刚遇到类似的项目。我现在使用[GeoNames](http://www.geonames.org/export/ws-overview.html)和[TimeZoneDB](http://timezonedb.com/api)提供的网络服务。

这两个服务都需要注册一个 API 密钥。

地理名称：api.geonames.org/findNearbyPlaceName?lat=47.3&lng=9&username=demo&style=full

时区数据库：api.timezonedb.com/?lat=53.7833&lng=-1.75&key=KEY

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T06:37:34.370

您的问题可能相同

[Web 服务 - 一个城市的当前时区？](https://stackoverflow.com/questions/55901/web-service-current-time-zone-for-a-city)

您可以使用网络服务，[http://www.earthtools.org/webservices.htm#timezone](http://www.earthtools.org/webservices.htm#timezone)，

例子 ：

[http://www.earthtools.org/timezone-1.1/40.71417/-74.00639](http://www.earthtools.org/timezone-1.1/40.71417/-74.00639)

# pydev - 有没有办法*真的*强制 pydev 使用强制内置？

> ID：10208782
> 
> 赞同：2
> 
> 时间：2012-04-18T11:52:02.960
> 
> 标签：pydev, clutter

我正在使用 pydev 开发一个 pyclutter 应用程序。Clutter 被添加到解释器路径并在强制内置列表中，但 clutter 命名空间中的所有对象都显示为“缺少导入”错误（即红色曲线）。

是否有另一种方法可以强制 pydev 的内省更加健壮？我怀疑它可能比平时更难自省混乱的内容，因为它使用 pygobject 将对象从共享 C 库中拉出，但是如果我使用 in-IDE python 调试器查看模块的内容，里面的对象包裹全部出现。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T23:52:25.687

好吧，如果你在那里添加一个对象（比如，'mypy.lib'），PyDev 将创建一个 shell，在其中导入该模块（即：import mypy.lib）并在其中执行一个目录（即：dir(mypy.lib)。库））。

如果由于某种原因执行 dir() 确实在命令行中起作用但在代码完成中不起作用，那么这可能是 PyDev 中的一个问题，但我认为真正的问题是某些库并没有真正公开它们所拥有的在 dir() 上，就在您访问某些“已知”属性时，在这种情况下，目前使其工作的唯一方法是创建具有实际接口的模块（然后根据需要访问内容）或提供“预定义的完成”- - 参见“预定义完成”主题： http: [//pydev.org/manual_101_interpreter.html](http://pydev.org/manual_101_interpreter.html)

编辑：如果上述情况没有帮助，它“通常”是一个 PYTHONPATH 错误配置问题（即：添加任何模块后，您应该转到解释器配置并添加缺少的路径——只需添加/删除它通常就可以了，但请注意，如果实际路径本身没有任何变化，您可以转到解释器配置页面，然后按“应用”并选择要重新索引的解释器）——如果这仍然不是您的问题，请告诉我（只是要注意，我在这里安装了混乱，它对我来说工作正常）。

# objective-c - 从子视图向父视图添加视图

> ID：10208785
> 
> 赞同：0
> 
> 时间：2012-04-18T11:52:08.303
> 
> 标签：objective-c, ios, uiview

我有我的根视图控制器。在那我加载视图A。视图A包含一个按钮来加载视图B。但是，我不想将视图B添加为视图A的子视图。如果我这样做会发生这种情况：

```
- (IBAction)loadViewB:(id)sender {

    if (self.viewB == nil) {
        self.viewB = [[NUMViewController alloc] initWithNibName:@"NUMviewController" bundle:Nil];
    } 

    [self.view addSubview:viewB.view];

} 
```

我想加载 viewB 作为我的 rootview 的子视图。所以我可以在 viewB 中制作动画之前为 viewA 制作动画。

但我不确定我必须如何处理这个问题。我猜我的 rootViewController 中需要一个方法来处理子视图的添加和删除。我需要能够从我的 viewA 子视图中调用该方法。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:54:56.597

尝试`[self.view.superview addSubview:viewB.view]`
但我认为这不是 MVC 的最佳方法。
你可以做的是将 viewA 添加到 self.view 和 viewB 到 self.view 。

# php - 是否可以在没有 sqlite 函数的情况下将 SQLite 数据库与 PHP 一起使用？

> ID：10208787
> 
> 赞同：4
> 
> 时间：2012-04-18T11:52:09.737
> 
> 标签：php, sqlite

我有一个没有 SQLite-Functionality 作为基础安装的 PHP 安装，所以没有 sqlite_* 函数可用。

是否有无需在 PHP 中安装任何插件即可访问 SQLite 数据库的 PHP 库（PHP 代码）？
（我无法更改服务器配置）

事实上，我只需要基本支持（仅限 SELECT 语句）

基本上我正在寻找一个纯 PHP SQLite 驱动程序，就像[https://github.com/kripken/sql.js](https://github.com/kripken/sql.js)是 SQLite 驱动程序的纯 JS 实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T02:46:39.303

## 一切皆有可能

不同的问题是它是否足够聪明才能真正做到这一点......

我认为更好的方法是将 sqlite 数据库导入 mysql 或其他一些可用的数据库。好的，这仍然需要`sqlite`安装...

这是如何*完成*的：

```
class ExtremelySimpleAndPowerfulSQLite {
    private $database_file;
    public function __construct( $filename ) {
        $this->database_file = $filename;
    }

    public function sqlite_query( $sql ) {
        ob_start();
        passthru("sqlite ".$this->database_file." '$sql'", $result);
        if ($result <> 0) {
            ob_end_clean();
            return false;
        }
        $sqlite_result = ob_get_contents();
        ob_end_clean();
        return $sqlite_result;
    }
}

$sqlite = new ExtremelySimpleAndPowerfulSQLite("test.db");

// It works, huh...
echo $sqlite->sqlite_query('select * from table');

if ($foobar = $sqlite->sqlite_query('select * from mytable'))
    echo $foobar; 
```

### 但

这确实没有那些 php 自己的 sqlite 函数的 sqlite，所以......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:34:51.287

任何 php 库要么是用纯 php 编写并使用一些底层函数，要么是一个模块，应该安装。

因此，唯一的选择是为该模块获取 C 代码并将其重写为 php。AFAIK，唯一需要的低级函数，正在使用网络套接字，它们在 php.ini 中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T12:40:02.663

也许我的回答有点晚了，但我相信它对寻找这类问题的其他用户会有所帮助。SQLite 是一款出色的软件，有时它可以替代 MySQL 或其他经典使用的数据库。（让我们考虑一下低流量网站。）不幸的是，它可以作为 PHP 扩展使用，因此在依赖第三方廉价托管服务提供商时可以禁用服务器端。这就是我开始开发 PHPFileDB 的原因，这是一个用 PHP 编码并完全支持 SQL 语法的完整平面文件数据库（我的目标是获得与基于 MySQL 的框架的完全兼容性）

显然，它是开源的，可以在[https://github.com/morepaolo/PHPFileDB访问](https://github.com/morepaolo/PHPFileDB)

希望对您有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T00:34:59.787

我在谷歌上没有找到任何普通的 php sqlite 驱动程序搜索。我试图从梨中得到一些东西，但是 sqlite mdb2 驱动程序利用 sqlite php 扩展来工作：

```
root@blackbigone:~# pear install MDB2_Driver_sqlite
pear/MDB2_Driver_sqlite requires PHP extension "sqlite"
No valid packages found
install failed 
```

在我安装 php-sqlite 之后，pear 模块就正常了：

```
root@blackbigone:~# pear install MDB2_Driver_sqlite
downloading MDB2_Driver_sqlite-1.4.1.tgz ...
Starting to download MDB2_Driver_sqlite-1.4.1.tgz (30,921 bytes)
.........done: 30,921 bytes
install ok: channel://pear.php.net/MDB2_Driver_sqlite-1.4.1 
```

阅读代码，我发现的任何 php sqlite 包装器都有这样的内容：

```
if (!function_exists('sqlite_open')) return false; 
```

所以，我认为还没有人用 PHP 编写过纯 sqlite 驱动程序。对不起。

# jquery - jquery 数据表行位置（高度）

> ID：10208794
> 
> 赞同：0
> 
> 时间：2012-04-18T11:52:18.467
> 
> 标签：jquery, datatable

我使用 jquery 中的数据表在我的网站上显示和编辑一些数据。但是在编辑列中的值时我有一个小问题。当我按下行中的编辑按钮时，我的数据表有点跳动，因此，我必须再次滚动才能查看编辑行。此外，当我按下保存时，数据表再次跳转。首先在保存或按下编辑按钮后，我的桌面滚动回到顶部。但是我可以通过在评论中放置 oTable.fndraw() 来解决这个问题。但它仍然无法正常工作。所以我想要的是：当你按下编辑按钮时，表格不会从位置改变，所以你的行仍然在同一个地方，当你按下保存按钮时，它也保持在同一个地方。

首先我认为这可能是因为我使用了分页，但是当我禁用分页时，我遇到了同样的问题。有人可能知道我可以在哪里解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:25:43.363

我找到了第二个问题的解决方案：行的高度。Wish还给了我第一个问题的答案：编辑表格行时，我怎么能留在同一个地方。好吧，就像我想的那样：行高。所以我试图改变行的高度并且它起作用了。

您不必在 css 文件中更改行的高度，而是在样式标记中。像这样：

```
<style type="text/css" title="currentStyle">
    @import "../javascript/3rdParty/jquery/css/table.css";
    tr { height: 50px; }
</style> 
```

这些行现在都具有相同的高度，并且我不再有滚动表格的问题。

额外说明：如果您的页面中有更多表格，请不要忘记在 tr 之前添加 id。否则所有表格行都将具有给定的高度。

# c# - wpf，c#，viewport3D的renderTargetBitmap而不将其分配给窗口

> ID：10208798
> 
> 赞同：2
> 
> 时间：2012-04-18T11:52:50.627
> 
> 标签：c#, .net, wpf

我在代码中创建了一个 Viewport3D：

```
Viewport3D CurViewport3D = new Viewport3D();
CurViewport3D = CreateViewportWithContent(); //fill the viewport with some content
BitmapSource bmp;
var renderTargetBitmap = new RenderTargetBitmap(600, 300, 96, 96, PixelFormats.Default);

renderTargetBitmap.Render(CurViewport3D);
bmp = (BitmapSource)renderTargetBitmap;
PngBitmapEncoder png = new PngBitmapEncoder();
png.Frames.Add(BitmapFrame.Create(bmp));
using (Stream stm = File.Create("outp.png")){ png.Save(stm);} 
```

但不幸的是，outp.png 是空的，没有任何内容。如果我将视口应用于窗口：

```
MainGrid.Children.Add(CurViewport3D); //MainGrid is part of the window 
```

一切都很完美。outp.png 不为空。有谁知道如何在不将视口应用于窗口的情况下获得正确的图像？

问题解决了！我无法回答我的问题 - 不知道为什么......我添加了以下序列：

```
int width = 500;
int height = 300;
CurViewport3D.Width = width;
CurViewport3D.Height = height;
CurViewport3D.Measure(new Size(width, height));
CurViewport3D.Arrange(new Rect(0, 0, width, height)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:06:41.857

问题解决了！我无法回答我的问题 - 不知道为什么......我添加了以下序列：

```
int width = 500;
int height = 300;
CurViewport3D.Width = width;
CurViewport3D.Height = height;
CurViewport3D.Measure(new Size(width, height));
CurViewport3D.Arrange(new Rect(0, 0, width, height)); 
```

# objective-c - iOS项目中的未知接收器'jsonParser'错误

> ID：10208799
> 
> 赞同：0
> 
> 时间：2012-04-18T11:52:54.200
> 
> 标签：objective-c, ios, json, facebook-graph-api

我在下面的代码中遇到了几个错误。错误是'使用未声明的标识符'SBJSON'和'未知接收器'jsonParser'，你的意思是SBJsonParser'吗？

我的项目中有 JSON 库。它与 Facebook Graph API 和 Google Places 一起使用。出于某种原因，尽管下面的代码（也适用于 Facebook API）没有找到 JSON 文件。知道为什么吗？我想知道我是否将它们错误地拖放到项目中或其他什么。

谢谢你的帮助。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
        [self hideActivityIndicator];

        NSString* responseString = [[[NSString alloc] initWithData:receivedData
                                                          encoding:NSUTF8StringEncoding]
                                    autorelease];
        NSLog(@"Response from photo upload: %@",responseString);
        [self clearConnection];
        // Check the photo upload server completes successfully
        if ([responseString rangeOfString:@"ERROR:"].location == NSNotFound) {
            SBJSON *jsonParser = [[SBJSON new] autorelease];
            id result = [jsonParser objectWithString:responseString];
            // Look for expected parameter back
            if ([result objectForKey:@"image_name"]) {
                productImageData = [result copy];
                // Now that we have successfully uploaded the photo
                // we will make the Graph API call to send our Wishlist
                // information.
                [self apiGraphAddToWishlist];
            } else {
                [self showAlertErrorMessage:@"Could not upload the photo." ];
            }
        } else {
            [self showAlertErrorMessage:@"Could not upload the photo." ];
        }
    } 
```

![包括显示项目中的 JSON 库和错误的屏幕截图](../Images/0455deeb1ac76f99f30037a2dc89de94.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:00:46.850

而不是使用

```
SBJSON *jsonParser 
```

采用：

```
SBJsonParser *jsonParser; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:57:31.977

![在此处输入图像描述](../Images/6a7db5b51dd1e6380db3d891ae67fb7d.png)

请确保您的项目中包含此文件，并且所有 .m 文件都在目标的“编译源”列表中。

还要确保您所指的文件正在导入 SBJSON.h：

```
#import "SBJSON.h" 
```

# php - 将活动类添加到 标签

> ID：10208801
> 
> 赞同：0
> 
> 时间：2012-04-18T11:53:01.667
> 
> 标签：php, javascript

我想在`<li>`访问特定 url 时添加活动类？

我的代码看起来像这样，

```
<ul>
<li>
    <a href="link1">Link1</a>
</li>
<li>
    <a href="link2">Link2</a>
</li>
<li>
    <a href="link3">Link3</a>
</li>
<li>
    <a href="link4">Link4</a>
</li>
<li>
    <a href="link5">Link5</a>
</li>
<li>
    <a href="link6">Link6</a>
</li>
</ul> 
```

如果 URL 中存在 www.abc/link1 则只有第一个 li 应该处于活动状态，其余的应该没有任何类。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:57:07.687

以下是您可以使用 JavaScript 实现的方法...

```
var normalisePath = function(path) { return path.replace(/^\/|\/$/g, ''); },
var path = normalisePath(window.location.pathname),
    li = document.getElementsByTagName('li'),
    i, length, a;

for (i = 0, length = li.length; i < length; i++) {
    a = li[i].getElementsByTagName('a')[0];

    if (normalisePath(a.pathname) == path) {
        li[i].className += ' active';
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:56:56.560

使用 jQuery，您可以使用：

```
$("li").addClass("active"); 
```

不过，您必须开发逻辑部分...

**编辑：** ...下面是：

```
$(function() {
    $("li").removeClass("active");
    var current = window.location.pathname.split('/').pop();
    $('a[href="' + current + '"]').addClass("active");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T12:01:54.393

只需将变量添加到与每个页面一起出现的 url

```
www.abc/link1?link_num=1 
```

然后

```
switch($_GET[link_num]){
case '1':
    $style1 = 'class=active';
    break;
case '2';
    $style2 = 'class=active';
    break;
etc...
} 
```

然后

```
<ul>
<li>
<a href="link1?link_num=1" <?=$style1?>>Link1</a>
</li>
<li>
<a href="link2?link_num=1" <?=$style2?>>Link2</a>
</li>
<li>
etc 
```

我敢肯定有更好的方法，但这会做到

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T11:59:12.733

查看

```
var path = window.location.pathname 
```

并将其与您`li`的 s 进行比较。`active`将类添加到s href 匹配`li`的类。`a``path`

# java - 通过创建本地对象调用会话 bean 方法有什么好处

> ID：10208812
> 
> 赞同：1
> 
> 时间：2012-04-18T11:53:28.233
> 
> 标签：java, ejb

直接调用会话Bean方法

```
/**
     * @ejb.interface-method view-type="both"
*/
public String test(String name, prefix, int length) {
  int nSeq = test2(name);
} 
```

通过创建本地会话 bean 对象来调用会话 bean 方法

```
/**
             * @ejb.interface-method view-type="both"
        */
        public String test(String name, prefix, int length) {
        ITestSessionBeanLocal testSessionBean = (ITestSessionBeanLocal)_ctx.getEJBLocalObject();
            int nSeq = testSessionBean.test2(name);
        } 
```

session bean的其他方法

```
 /**
             * @ejb.interface-method view-type="both"
        */
        public String test2(String name) {
          //Code
        } 
```

通过创建本地对象来调用会话 bean 方法有什么好处？

# python - 使用 matplotlib 的 xy 散点图中误差线的颜色图

> ID：10208814
> 
> 赞同：16
> 
> 时间：2012-04-18T11:53:32.213
> 
> 标签：python, matplotlib, scatter-plot, color-mapping

我有一个时间序列数据，其中有数量 y 及其误差 yerr。我现在想创建一个图，显示 y 与垂直误差条 (yerr) 的相位（即时间/周期 % 1）。为此，我通常使用 pyplot.errorbar(time, y, yerr=yerr, ...)

但是，我想使用颜色条/地图来指示同一图中的时间值。

我因此做的是以下内容：

```
pylab.errorbar( phase, y, yerr=err, fmt=None, marker=None, mew=0 )
pylab.scatter( phase, y, c=time, cmap=cm ) 
```

不幸的是，这将绘制单色误差条（默认为蓝色）。由于我每个图有约 1600 个点，这使得散点图的颜色图消失在误差线后面。这是一张图片，显示了我的意思：

![在此处输入图像描述](../Images/37eb35cd580dc4dc196aeb79912e4d88.png)

有没有一种方法可以使用与散点图中使用的颜色图相同的颜色图来绘制误差线？我不想调用errorbar 1600次......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-18T15:25:44.357

除了改变颜色，另一个建议是改变`zorder`误差线与散点图的关系。这使用户关注数据并绘制出错误的一般形状（我认为这是您的意图）。

```
from pylab import *

# Generate some random data that looks like yours
N = 1000
X = random(N)
Y = sin(X*5) + X*random(N)*.8
Z = random(N)
ERR = X*random(N)

# These are the new arguments that I used
scatter_kwargs = {"zorder":100}
error_kwargs = {"lw":.5, "zorder":0}

scatter(X,Y,c=Z,**scatter_kwargs)
errorbar(X,Y,yerr=ERR,fmt=None, marker=None, mew=0,**error_kwargs )
xlim(0,1)
show() 
```

![在此处输入图像描述](../Images/d582b33548991cee0c9be643fc43861a.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-23T18:22:02.823

我一直在寻找解决方案，我终于找到了解决办法：

```
from pylab import *

#data
time = arange(100.)
signal = time**2
error = ones(len(time))*1000

figure(1)
#create a scatter plot
sc = scatter(time,signal,s=20,c=time)

#create colorbar according to the scatter plot
clb = colorbar(sc)

#create errorbar plot and return the outputs to a,b,c
a,b,c = errorbar(time,signal,yerr=error,marker='',ls='',zorder=0)

#convert time to a color tuple using the colormap used for scatter
time_color = clb.to_rgba(time)

#adjust the color of c[0], which is a LineCollection, to the colormap
c[0].set_color(time_color)

fig = gcf()
fig.show()
xlabel('time')
ylabel('signal') 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-11T12:14:03.243

很抱歉将其重新挖掘，但我自己也遇到了类似的事情，这是我根据之前的回复提出的解决方案。

这将标记、误差条和大写设置为颜色图中的相同颜色：

```
import matplotlib.pyplot as plt
import numpy as np

#data
time = np.arange(100.)
signal = time**2
error = np.ones(len(time))*1000

#create a scatter plot
sc = plt.scatter(time,signal,s=20,c=time)

#create colorbar according to the scatter plot
clb = plt.colorbar(sc)

#convert time to a color tuple using the colormap used for scatter
time_color = clb.to_rgba(time)

#loop over each data point to plot
for x, y, e, color in zip(time, signal, error, time_color):
    plt.errorbar(x, y, e, lw=1, capsize=3, color=color) 
```

**编辑：** 更改为 matplotlib v3.1.1 后，上述停止工作，但这里有一个解决方法：

```
import matplotlib.pyplot as plt
import numpy as np

#data
time = np.arange(100.)
signal = time**2
error = np.ones(len(time))*1000

#create a scatter plot
sc = plt.scatter(time,signal,s=0,c=time)

#create colorbar according to the scatter plot
clb = plt.colorbar(sc)

#convert time to a color tuple using the colormap used for scatter
import matplotlib
import matplotlib.cm as cm
norm = matplotlib.colors.Normalize(vmin=min(signal), vmax=max(signal), clip=True)
mapper = cm.ScalarMappable(norm=norm, cmap='viridis')
time_color = np.array([(mapper.to_rgba(v)) for v in signal])

#loop over each data point to plot
for x, y, e, color in zip(time, signal, error, time_color):
    plt.plot(x, y, 'o', color=color)
    plt.errorbar(x, y, e, lw=1, capsize=3, color=color) 
```

最后为了完整起见，这里是它应该产生的图表： [![在此处输入图像描述](../Images/6c700f74d0456e37f90479c1be5a5c9b.png)](https://i.stack.imgur.com/cNnYU.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T14:38:32.023

您可以像使用 in中的参数一样使用`ecolor`可选参数：`pylab.errorbar``color``pylab.scatter`

```
pylab.errorbar( phase, y, yerr=err, fmt=None, marker=None, mew=0, ecolor=time ) 
```

# javascript - 当我单击 asp.net 中的退出按钮时，文本框 onblur 事件未触发

> ID：10208821
> 
> 赞同：0
> 
> 时间：2012-04-18T11:53:57.713
> 
> 标签：javascript, asp.net, textbox, onblur

我有一个modelpopup扩展器，在那个文本框和两个asp.net按钮（保存，退出），文本框我写了onblur事件（在那个事件文本框中输入的值检查数据库是否有效，无效显示警报消息）现在该条件有效，但是**当我单击退出按钮时，我已经处理了 onclick 或 onclientclik 事件（关闭 modelpopup 代码）但现在触发文本框模糊事件验证并显示警报消息**，如何解决该问题请给我任何想法那。我的代码是

```
<asp:TextBox ID="txtForgotUserId" runat="server" ClientIDMode="Static" onblur="CheckUserId()"></asp:TextBox>
<asp:Button ID="btnForgotExit" runat="server" Text="Exit" CssClass="art-button" ClientIDMode="Static" OnClientClick="hidepop()"/>

<script type="text/javascript">
    function hidepop() {
        $find('MpForgot').hide();
        return true;
    }

    function CheckUserId() {
        document.getElementById('btnCheckUserId').click();
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:40:30.960

代码按预期工作，因为一旦 TextBox 失去焦点就会调用 onblur。我建议`CheckUserId()`在不同的点调用——也许是在单击按钮时——而不是 TextBox onblur。

如果您必须`CheckUserId()`在 onblur 期间调用，那么您可以使用这样的计时器：

```
<asp:TextBox ID="txtForgotUserId" runat="server" 
    ClientIDMode="Static" onblur="startCheckUserIdTimer()"></asp:TextBox>
<asp:Button ID="btnForgotExit" runat="server" Text="Exit" 
    CssClass="art-button" ClientIDMode="Static" OnClientClick="hidepop()"/>

<script type="text/javascript">
    var timer;

    function hidepop() {
        clearTimeout(timer);
        $find('MpForgot').hide();
    }

    function startCheckUserIdTimer() {
        clearTimeout(timer);
        timer = setTimeout("CheckUserId()", 100);
    }

    function CheckUserId() {
        clearTimeout(timer);
        document.getElementById('btnCheckUserId').click();
    }
</script> 
```

# jquery - jquery 将文件发送到 as3 文件参考

> ID：10208822
> 
> 赞同：0
> 
> 时间：2012-04-18T11:53:59.197
> 
> 标签：jquery, flash, external, filereference

我正在尝试做一个简单的 Flash 文件上传器。我创建了一个 Flash SWF，它可以将文件上传到服务器上，还有一个 php 将它保存在那里。我现在想要完成的事情是将这个闪存隐藏在某个地方并通过外部函数访问它。我想要做的就是浏览一个文件并通过jQuery将文件提供给flash fileReference，然后调用fileReference.upload（）。

我希望有人可以帮助我解决这个问题。提前谢谢你，丹尼尔！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:35:20.887

在 Flash 文件中，您不希望查看将添加回调方法的 ExternalInterface 类。像这样的东西：

```
if (ExternalInterface.available)
    ExternalInterface.addCallback("jsFunc", doSomething);

function doSomething():void
{
     trace("i did something");
} 
```

然后应该可以从 SWF 对象上的 JS 调用方法 jsFunc。查看[ExternalInterface 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)以获取更多信息。

# jquery - 基本 JQuery：加载后执行插件操作？

> ID：10208827
> 
> 赞同：1
> 
> 时间：2012-04-18T11:54:45.757
> 
> 标签：jquery

我很羞于问这么明显的事情，但是我浪费了很多时间，我找不到解决方案......我在 JQuery 中实现了一个单词计数器插件，它在每次击键时计算*输入*元素中的单词，并在旁边的 div 中显示它们。

我的插件是这样加载的：

```
$(document).ready(function(){ 
  $("#myOrigin").wordcounter({thresholdError : 65}); 
}); 
```

该插件的结构如下：

```
(function( $ ) {
  $.fn.wordcounter = function(options) {
  var settings = { /* settings */ };

  if (options) { jQuery.extend(settings, options); }

  doWordCount = function() {
    var l = $(this).val().length;
    // etc...
  }

  $(this).keyup(doWordCount);
  return jQuery(this);
};
})( jQuery ); 
```

这完美地工作。

但是现在，我希望在加载文档时执行该操作，这样如果输入有文本，计数器就会从一开始就反映这一点，而不仅仅是在第一次按键之后。

我尝试使用`$(this).ready(doWordCount);`which 触发 doWordCount 方法，但它`$(this)`指的是文档，而不是绑定的元素！

我该如何解决？

再次抱歉这些基本问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:01:46.063

如果您将doWordCount 函数设置为对象的方法。做这种事情时，我总是用谷歌 jquery 插件模式。我总是以这篇文章结尾：http: [//www.learningjquery.com/2007/10/a-plugin-development-pattern](http://www.learningjquery.com/2007/10/a-plugin-development-pattern)

我认为这应该可以帮助您做您想做的事情。我想你想公开你的 thedoWordCount 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T12:02:32.767

尝试像这样更改插件的最后几行

```
...
$(this).keyup(doWordCount).trigger('keyup');
return jQuery(this); 
```

我更喜欢使用`.triggerHandler()`，但这种方法并不总是合适的，因为它只影响[文档状态](http://api.jquery.com/triggerHandler/)的第一个匹配元素（所以如果你选择了一个元素，它就可以工作）

# asp.net-mvc-3 - 使用 ip 地址限制对 mvc 控制器的访问

> ID：10208832
> 
> 赞同：0
> 
> 时间：2012-04-18T11:54:55.210
> 
> 标签：asp.net-mvc-3

我正在遵循 [此处描述的解决方案](https://stackoverflow.com/questions/473687/restrict-access-to-a-specific-controller-by-ip-address-in-asp-net-mvc-beta)

我在 mvc3 中的控制器装饰有这样的自定义 FilterIP 属性

```
 //Admin/Device/Edit/1
    [FilterIP(
            ConfigurationKeyAllowedSingleIPs = "AllowedAdminSingleIPs",
            ConfigurationKeyAllowedMaskedIPs = "AllowedAdminMaskedIPs",
            ConfigurationKeyDeniedSingleIPs = "DeniedAdminSingleIPs",
            ConfigurationKeyDeniedMaskedIPs = "DeniedAdminMaskedIPs"
    )]
    public ActionResult Edit(int Id).... ommiting 
```

在 Web.config 中，我在 appSettings 中有这些值

```
 <appSettings>
  <add key="AllowedAdminSingleIPs" value="89.111.212.141"/>
  <add key="AllowedAdminMaskedIPs" value="10.2.0.0;255.255.0.0"/>
  <add key="DeniedAdminSingleIPs" value=""/>
  <add key="DeniedAdminMaskedIPs" value=""/>
 </appSettings> 
```

现在，我使用[http://www.whatismyip.com/](http://www.whatismyip.com/) 来发现我当前的 ip（因为我有来自 isp 的动态 ip）。据我所知，这应该在我使用我的 ip inside 后工作。89.111.212.141 是我的 isp 动态 ip。但它不起作用。

有什么问题？在收到装饰控制器操作时，我经常被重定向到登录。顺便提一下，当使用 localhost 作为 AllowedAdminSingleIPs 时，它正在工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:57:23.313

如果您已在本地托管您的应用程序（VS 内置 Web 服务器）并在本地访问它，那么您的 IP 是 127.0.0.1，由`httpContext.Request.UserHostAddress`. 尝试通过放置断点来调试代码，以查看发生了什么。

# windows - 如何在一个语句中评估两个函数？

> ID：10208838
> 
> 赞同：1
> 
> 时间：2012-04-18T04:07:28.213
> 
> 标签：windows, visual-studio-2010, vb.net

如何在 vb.net 的一个语句中声明两个对象？例子

> If IsNumeric(TextBox1.Text),(TextBox2.Text) Then
> lbl_answer.Text = Val(TextBox1.Text) + Val(TextBox2.Text)
> Else
> MsgBox("只能计算错误数字")
> End If

我可以

> 如果不是数字（textbox1.text）那么

但我不能说

> 如果不是数字（textbox1.text），（textbox2.text）

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:00:15.620

由于到目前为止没有人这样做，让我表达您的选择（直接来自评论 - 抱歉，为什么这些不是我不知道的答案）：

1.  `And`

    ```
    If IsNumeric(TextBox1.Text) And IsNumeric(TextBox2.Text) Then ... 
    ```

2.  `AndAlso`（细微的区别：`AndAlso`如果第一个表达式的计算结果为假，则不要计算第二个表达式）

    ```
    If IsNumeric(TextBox1.Text) AndAlso IsNumeric(TextBox2.Text) Then ... 
    ```

我不认为 LINQ 真的是一种选择。

# java-me - 为什么在 Java 中调用 cancelInquiry 取消，在某些诺基亚手机上进行蓝牙查询时，代码会挂起？

> ID：10208844
> 
> 赞同：1
> 
> 时间：2012-04-18T11:55:43.790
> 
> 标签：java-me, bluetooth, nokia-s40, synchronized-block

我在配备 S40 的诺基亚设备上遇到问题（但在 S60 上没有）。问题是这样的：当您从同步块中调用discoveryAgent 的cancelInquiry 方法时，它会挂起。它实际上应该回调inquiryCompleted。代码只是冻结-永远不会进入inquiryCompleted方法。如果完成了相同的事情，但不是在同步块内完成 - 一切正常。问题是我需要同步块，以便其中的所有内容在多线程应用程序中原子执行。

这就是我的 DiscoveryListener 的样子：

```
public class DeviceDiscoverer implements DiscoveryListener {
   private Object thisCannotBeInterruptedByOtherBlocksLikeIt=new Object();
   private boolean stiiInCycle;
   private DiscoveryAgent discoveryAgent;

   public boolean cancel() { //called from some controller in mid discovery
      //synchronized(thisCannotBeInterruptedByOtherBlocksLikeIt) //problem when this is uncommented
      {
         if (stillInCycle) {
             //<some logic>
             discoveryAgent.cancelInquiry(this);
             //<more logic>
         }
      }
   }
   public void inquiryCompleted(int inquiryStatus) { //this is a callback in response to cancel or normal ending
      Beeper.beep(); //this makes the phone make a sound
   }

   // <some irrelevant methods here. some have synchronized blocks like the one above>
} 
```

当您在 s40 和 s60 上运行上述代码时，注释掉同步语句，并调用 cancel() 方法，inquiryCompleted 方法会立即被调用并且您会听到哔声。但是，如果您取消注释同步语句，您会听到 S60 上的哔哔声，但在 S40（至少在第 5 版 fp1 上），从不调用 queryCompleted！（当我在调用discoveryAgent的cancelInquiry之前放置哔哔声时，它发出哔哔声。当我在那个调用之后放置它时，它没有到达那里。那是因为调用不会返回，直到它调用inquiryCompleted并且该调用不会发生）

问题是什么？如果这是 S40 的 cancelInquiry 的 impl'n 中的错误，我该如何解决？我必须同步，因为事情是并行完成的（例如，我的代码可能会开始查询，然后可能会取消它。在它被取消时，startInquiry 可能正在运行，deviceDiscovered 可能正在运行，inquiryCompleted 可能正在运行，并且当然，与其中任何一个并行，传入的 cancelInquiry 可能正在运行。

我试图将inquiryCompleted 分离到另一个侦听器实例中，换句话说，我没有调用discoveryAgent.cancelInquiry(this)，而是调用了discoveryAgent.cancelInquiry(anotherInstance)，希望调用“anotherInstance”中的inquiryCompleted，但不，它挂起方式也是如此。

有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:54:10.173

我不喜欢这种方法，但是，因为你不能使用同步......繁忙的等待循环怎么样？[http://en.wikipedia.org/wiki/Busy_wait](http://en.wikipedia.org/wiki/Busy_wait)

你可以试试下面的代码：

```
    私有线程取消线程；

    公共布尔取消（）{
        同步（这个）{
            而（取消线程！= null）{
                尝试 { Thread.sleep(100); } 捕捉（异常 e）{}
            }
            cancelThread = Thread.currentThread();
        }

        // 做你的事

        取消线程=空；// 返回前
    }

```

# asp.net-mvc-3 - mvc 3中的TextBox在应用程序启动时显示零值

> ID：10208846
> 
> 赞同：1
> 
> 时间：2012-04-18T11:55:47.353
> 
> 标签：asp.net-mvc-3, c#-4.0

所以在我的模型中，我有：

```
public int Number {get; set;} 
```

在我看来，我称之为：

```
@Html.TextBoxFor(m => m.Number, new { id = "Number" }) 
```

当我运行应用程序时，TextBox 中有 0 值。

我试图改变这样的模型：

```
public int? Number {get; set;} 
```

但后来我得到了例外......但是我的模型中有

```
public decimal? Price {get; set;} 
```

在我看来：

```
@Html.TextBoxFor(m => m.Price, new { id = "Price" }) 
```

当我运行这个文本框是空的，一切正常。有人解释为什么 int 在这种情况下不能是可为空的类型吗？我得到的例外是`Method not found: 'Int32'`

目标不是在文本框中有 0 值，而是在普通的空文本框中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:18:34.643

尝试在您的视图中添加验证，如下所示：

> @Html.TextBoxFor(m => m.Price, new { id = "Price" }) @Html.ValidationMessageFor(m => m.Price)

在您的控制器中，您必须验证您的模型状态是否有效。

```
 If(ModelState.IsValide)
{
// code if all is ok
}
else
{
ModelState.AddModelError("", "Error Message");
                  return View(Model);
} 
```

# c++ - 具有递归可变参数模板的函数的部分模板特化的替代方案

> ID：10208847
> 
> 赞同：2
> 
> 时间：2012-04-18T11:55:50.293
> 
> 标签：c++, c++11, template-specialization, variadic-templates

我正在编写`sprintf()`使用递归可变参数模板的替代方法，如[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2087.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2087.pdf)中所述。我的目标是允许为用户定义的类型轻松添加自定义数据类型格式化程序。例如，如果基本实现如下所示：

```
#include <iostream>
#include <sstream>
#include <wchar.h>
#include <stdexcept>

using std::wstring;
using std::wstringstream;

const wstring wsprintf(const wchar_t *s)
{
    wstringstream outstream;
    while(*s)
    {
        if (*s == L'%' && *++s != L'%')
            throw std::runtime_error("invalid format string: missing arguments");
        outstream << *s++;
    }
    return outstream.str();
}

template<typename T, typename... Args>
const wstring wsprintf(const wchar_t *s, const T& value, const Args&... args)
{
    wstringstream outstream;
    while(*s)
    {
        if(*s == L'%' && *++s != L'%')
        {
            outstream << value << wsprintf(++s, args...);
            return outstream.str();
        }
        outstream << *s++;
    }
    throw std::runtime_error("extra arguments provided to wsprintf");
} 
```

然后我可以通过编写为我的类添加一个格式化程序`Foo`（比方说，它包含`customDescription()`返回 a的方法）`wstring`

```
template<typename... Args>
const wstring wsprintf<const Foo&>(const wchar_t *s, const Foo& foo, const Args&... args)
{
    return wsprintf(s, foo.customDescription(), args...);
} 
```

然后我就可以做到这一点：

```
Foo bar;
wstring message = wsprintf("my foo tells me %s", bar); 
```

但是，我编写此代码的方式将不起作用，因为不允许函数的部分模板专业化 (PTSF)，如[http://www.gotw.ca/publications/mill17.htm](http://www.gotw.ca/publications/mill17.htm)中所述。

通常可替代 PTSF 的两种替代方法是：

1.  完全消除模板的使用并使用重载函数。
2.  创建静态类来包装函数的专门实现。

第一种选择似乎不可行，因为递归可变参数模板方法`printf()` *需要*至少一个模板参数（可变参数包）。

当我尝试实现第二种选择时，我遇到了几个语法错误（作为注释内联）：

```
namespace wsprintf_impl {

    struct wsprintf
    {
        static const wstring impl(const wchar_t *s)
        {
            wstringstream outstream;
            while(*s)
            {
                if (*s == L'%' && *++s != L'%')
                    throw std::runtime_error("invalid format string: missing arguments");
                outstream << *s++;
            }
            return outstream.str();
        }
    };

    // ERROR: redefinition of 'wsprintf' as different kind of symbol
    template< class T, class Args&... args >
    struct wsprintf
    {
        static const wstring impl(const wchar_t *s, const T& value, const Args&... args)
        {
            wstringstream outstream;
            while(*s)
            {
                if(*s == L'%' && *++s != L'%')
                {
                    outstream << value << wsprintf::impl(++s, args...);
                    return outstream.str();
                }
                outstream << *s++;
            }
            throw std::runtime_error("extra arguments provided to wsprintf");
        }
    };

}

template< class T, class Args&... args >
wstring wsprintf(const wchar_t *s, const T& value, const Args&... args)
// ERROR: type 'const Args &' of function parameter pack does not contain any unexpanded parameter packs
// ERROR: declaration of 'args' shadows template parameter
{
    return wsprintf_impl::wsprintf<T, args...>::impl(s, value, args...);
    // ERROR: expected '>'
    // ERROR: expected '(' for function-style cast or type construction
} 
```

我不确定如何解决这些错误。有任何想法吗？我一开始就走在正确的道路上吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:00:33.163

问题是它`wsprintf`被声明为一个类*和*一个类模板。让它成为一个类模板，第一种情况是没有参数的特化：

```
template <typename...>
struct wsprintf;

template <>
struct wsprintf<> // specialization for no arguments
{
    // blah blah ... 
};

template< class T, class... Args> // oops, bad syntax here was
struct wsprintf<T, Args...> // specialization for one or more args.
{
    // blah blah ... 
}; 
```

# tsql - TSQL从2个条件中选择行

> ID：10208849
> 
> 赞同：0
> 
> 时间：2012-04-18T11:55:52.167
> 
> 标签：tsql, sql-server-2005

我有一张这样的桌子：

```
ORDER_ID   CODE1   CODE2   CODE3   STATUS
1          '001'   'BIGP'  NULL    4
2          '002'   'BIGP'  NULL    1
3          '001'    NULL   NULL    6
4          '002'    NULL   'L'     1 
```

第二张桌子像这样：

```
ADDRESS_ID   ORDER_ID  TYPE   ADD_DATE       CATEGORY
1            1         'K1'   '2010-01-01'   'CLIENT'
2            1         'D1'   '2010-01-02'   'SYSTEM'
3            2         'D2'   '2010-01-02'   'SYSTEM'
4            2         'D2'   '2010-02-01'   'CLIENT' 
```

如果对于每个具有以下内容的订单，我必须做什么：

*   状态不在 (4,6)
*   代码1='002'
*   (code2=null and code3=null) or (code2 in ('BIGA', 'BIGP') and code3=null) or (code2=NULL and code3 = 'L')

我必须选择一个类型为“D2”或“K1”的地址（D2 具有更高的优先级，因此如果有 2 个地址，一个 K1 和第二个 D2，我必须选择 D2）。
**如果没有任何类型为 D2 或 K1 的地址，我必须为该订单选择类别为“客户”的最旧地址。**

这是我创建的：

```
SELECT TOP 1000 o.order_Id
              , a.Address_Id
              , a.Zip
            --, *
FROM orders o
 address a
    ON a.order_Id = o.order_Id
WHERE
 (a.Type='D2' OR a.Type='K1')
 AND o.Status NOT IN (4, 6)
 AND code1='002'
 AND ((code2 IS NULL AND code3 IS NULL) OR (code2 IN ('BIGA', 'BIGP') AND code3 IS NULL) OR (code2 IS NULL AND code3 = 'L')) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:35:23.110

您可以为该任务使用[CROSS APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.90%29.aspx)`derived table` ，因为它允许在.

```
SELECT TOP 1000 o.order_Id
              , a.Address_Id
              , a.Zip
            --, *
FROM orders o
CROSS APPLY
(
 select TOP 1
        a.Address_Id,
        a.Zip
   from address a
  WHERE a.order_Id = o.order_Id
  ORDER BY case a.Type 
                when 'D2' then 1 
                when 'K1' then 2 
                else 3 
            end,
        a.ADD_DATE
) a
WHERE
 o.Status NOT IN (4, 6)
 AND code1='002'
 AND ((code2 IS NULL AND code3 IS NULL) OR (code2 IN ('BIGA', 'BIGP') AND code3 IS NULL) OR (code2 IS NULL AND code3 = 'L')) 
```

除此之外，您可能会以每个订单的最小类型加入派生地址表：

```
from orders o
inner join address a
  ON a.order_Id = o.order_Id
inner join
(
  select a.order_id, a.Type,
         row_number () over (partition by a.order_id
                             order by case a.Type when 'D2' then 1 
                                                  when 'K1' then 2 
                                                  else 3 
                                       end, 
                                      a.ADD_DATE) rn
    from Address a
   group by a.order_id, a.Type
) onlyOneAddress
  on a.order_id = onlyOneAddress.order_id
 and a.type = onlyOneAddress.type
 and onlyOneAddress.rn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:00:10.187

只需按 [Type] desc 添加顺序，它将显示高优先级

# css - Margin 0 auto 在 IE 9 中对我不起作用

> ID：10208852
> 
> 赞同：3
> 
> 时间：2012-04-18T11:56:01.973
> 
> 标签：css

我正在使用一些 css，我花了大约 3 个小时来弄清楚为什么 margin 0 auto 在 IE 中不起作用

链接是

```
stage.media-carrier.de/home/box/10 
```

当我在 firefox、chrome 等中打开它时，它工作正常，内容在中心，但在 IE 中，其他一切都很好，但内容没有进入页面中心

有任何想法吗 __？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:06:05.483

将样式标签放在页面顶部的头部。doctype 必须是页面上的第一个元素以防止错误。因为那个 IE 以 quirks-mode 运行页面。

# java - Hibernate 和 Ehcache 的可变 ID 安全吗？

> ID：10208855
> 
> 赞同：0
> 
> 时间：2012-04-18T11:56:12.480
> 
> 标签：java, hibernate, ehcache

在 Hibernate 和 Ehcache 中使用可变 ID 是否安全？另请注意，这`hashCode`是基于 ID 的。

```
class Company implements Serializable {
  String code; // PK
  public int hashCode() {
    return code == null ? 17 : code.hashCode();
  }
  public boolean equals(Object o) {
    // Some obvious equals checking for type and field equality
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:03:22.043

There is a difference between *business key* and *surrogate key* concepts. Usually, ID means an immutable identifier (surrogate key), which has no business meaning. At the database level a corresponding column would be a primary key, so that it could be referenced by foreign keys in other tables to ensure referential integrity. Entity properties that model ID are often of type Long. Its value is assigned once and never changed.

The business key could consists of one or more entity properties (and thus columns), which can be mutable.

The provided in the question snippet suggests that field `code` (should be private) is a business key. So, it can be changed as required. Although the entity type is missing an ID field.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T12:10:14.640

这可能不是一个好主意。（这表明您打算使用业务键（代码）作为对象的主键。如果您的流程要求您能够更改或重新分配键，这可能会导致复杂化。）

但是，它是否安全（至少在 Hibernate 的情况下）取决于“代码”字段是如何变异的，然后是变异的。如果在对象持久化后更改其代码，则会破坏内存和数据库中的副本之间的关系，并且会发生不好的事情。

另一个问题是，如果“代码”字段在对象位于`HashMap`or时发生更改`HashSet`，则对象或条目可能会丢失。

# wpf - WPF：选择新选项卡时，数据绑定 TabControl 不会提交更改

> ID：10208861
> 
> 赞同：15
> 
> 时间：2012-04-18T11:56:53.653
> 
> 标签：wpf, c#-4.0

我有一个 TabControl，其中每个 Tab 及其内容都数据绑定到 ObservableCollection：

```
<TabControl ItemsSource="{Binding Path=.}">
    <TabControl.ContentTemplate>
        <DataTemplate>
            <TextBox Text="{Binding Path=propertyValue}" />
        </DataTemplate>
    </TabControl>
</TabControl> 
```

如果我要单击 Tab 1，然后在文本框中键入一些内容并单击选项卡，以便 TextBox 失去焦点，我在文本框中键入的新数据将被提交到 ObservableCollection 项。

但是，如果我在 TestBox 中键入数据，然后立即单击另一个选项卡，则永远不会提交数据。另外，当我返回数据时，它不再设置为我输入的内容。

任何人都知道在更改当前选项卡之前强制数据提交的方法吗？

**更新和修复**

我所做的是连接`SelectionChanged`事件：

```
private void tabData_SelectionChanged(object sender, SelectionChangedEventArgs e) {
    theTabControl.Focus();         
} 
```

在 TabControl 上调用 Focus() 会使 TextBox 失去焦点并提交数据。我这样做是因为我有其他控件（例如 DatePicker），它们表现出类似的行为。这是一个包罗万象的东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-18T12:31:19.353

这个问题在这里得到了很好的描述：[WPF Binding: Use LostKeyboardFocus 而不是 LostFocus 作为 UpdateSourceTrigger](http://connect.microsoft.com/VisualStudio/feedback/details/552961/wpf-binding-use-lostkeyboardfocus-instead-of-lostfocus-as-updatesourcetrigger) 很有趣的是，微软的人知道这个问题好几年了，但仍然没有解决它。这里也是一个大讨论：[WPF Databind Before Saving](https://stackoverflow.com/questions/57493/wpf-databind-before-saving)

这个技巧有效：

```
 <TabControl SelectionChanged="OnSelectionChanged"> 
```

和代码隐藏：

```
 private void OnSelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (Keyboard.FocusedElement is TextBox)
            Keyboard.FocusedElement.RaiseEvent(new RoutedEventArgs(LostFocusEvent));
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T12:20:49.803

如果您选择一个新选项卡，旧选项卡将从可视树中卸载。我认为这就是未提交更改的原因。您可以尝试[停止这种行为](https://stackoverflow.com/q/5038107/620360)，或者作为一种解决方法，您可以将[UpdateSourceTrigger](http://msdn.microsoft.com/en-us/library/system.windows.data.updatesourcetrigger.aspx)设置为`PropertyChanged`：

```
<TextBox Text="{Binding Path=propertyValue, UpdateSourceTrigger="PropertyChanged"}" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-05T14:59:59.623

如果除了选项卡控件之外，您还有其他控件或从文本框转换的方式，这可能是最简洁的答案。如果文本框以任何方式失去键盘焦点，它将升级为失去焦点。

```
<TextBox PreviewLostKeyboardFocus="commentTextBox_PreviewLostKeyboardFocus"  Name="commentTextBox" Text="{Binding Comment, UpdateSourceTrigger=LostFocus}"/> 
```

并在代码隐藏的事件处理程序中：-

```
 private void commentTextBox_PreviewLostKeyboardFocus(object sender, KeyboardFocusChangedEventArgs e)
    {
        (sender as TextBox).RaiseEvent(new RoutedEventArgs(LostFocusEvent));
    } 
```

这具有在预览阶段将“失去键盘焦点”升级为完全成熟的“失去焦点”事件的效果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-18T12:22:55.300

也许你可以试试这个

```
<TabControl ItemsSource="{Binding Path=.}">
<TabControl.ContentTemplate>
    <DataTemplate>
        <TextBox Text="{Binding Path=propertyValue,UpdateSourceTrigger=LostFocus}" />
    </DataTemplate>
</TabControl> 
```

# c++ - 如何在 C++ 中复制动态数组的值

> ID：10208863
> 
> 赞同：1
> 
> 时间：2012-04-18T11:56:58.540
> 
> 标签：c++, arrays

我声明了一个动态数组`int *idArray;`，我想将值复制到 a `tempArray`，然后我将更改顺序`tempArray`，但我不想更改顺序`idArray`，我该怎么写？我已经尝试实现它，但是当顺序`tempArray`改变时，顺序`idArray`也会改变。

```
int *idArray = new int[size]; 
int *tempArray = idArray;
int m, n;
for(int k = 0; k < size; k++) {
    m = rand() % size;
    n = tempArray[m];
    tempArray[m] = tempArray[k];
    tempArray[k] = n; 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T11:59:11.263

```
std::vector<int> idArray(size); 
std::vector<int> tempArray = idArray; 
```

问题解决。

此外，您可以使用`std::random_shuffle`- 您不必自己洗牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:59:46.400

我建议使用`std::vector<>`数组。`std::vector<>`将为您处理复制和其他内存管理。此外，它还记得数组的大小。（`new[]`没有。）

否则，您需要执行以下操作：

```
int *idArray = new int[size]; 
int idArray_size = size; // note this. you need to save array's size somewhere.
.......
int *tempArray = new int[idArray_size];

/* copy */
for(int i = 0; i < idArray_size; i++)
    tempArray[i] = idArray[i];

int m, n;
for(int k = 0; k < size; k++) {
    m = rand() % size;
    n = tempArray[m];
    tempArray[m] = tempArray[k];
    tempArray[k] = n; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:05:28.753

因为您的临时数组指向您的 Id 数组

> int *tempArray = idArray;

因此，您可以声明 Yout`*tempArray`并手动将值从 Idarray 复制到 temp Array

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-18T12:00:06.267

这是您分配的实际内存，idArray 指向它：

```
int *idArray = new int[size]; 
```

这只是指向同一内存地址的指针：

```
int *tempArray = idArray; 
```

您应该将 tempArray 声明为与 idArray 相同，然后将内容复制到其中：

```
int *idArray = new int[size];
int *tempArray = new int[size];
memcpy(tempArray,idArray,size * sizeof(int)); 
```

# iphone - UIBarButtonItem 未显示在 UINavigationController 中

> ID：10208874
> 
> 赞同：0
> 
> 时间：2012-04-18T11:57:51.600
> 
> 标签：iphone, uinavigationcontroller, uinavigationitem, rightbarbuttonitem

我正在尝试将 2 个按钮添加到 UINavigationController 的导航栏：

1）左侧的标准“后退”按钮 - 有效，并且

2）右侧的“搜索”按钮 - 不显示。

这是代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

// 1st button - this shows up correctly:
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] init];
backButton.title = @"MAIN";
self.navigationItem.backBarButtonItem = backButton;    

// 2nd. button - this one does not show up:
UIBarButtonItem *searchButton = [[UIBarButtonItem alloc]
                                           initWithBarButtonSystemItem:UIBarButtonSystemItemSearch
                                           target:self
                                           action:@selector(goSearching:)];
self.navigationItem.rightBarButtonItem = searchButton;

itemsByTitleVC *itemsView = [[itemsByTitleVC alloc] initWithNibName:@"itemsByTitleVC" bundle:nil];

[self.navigationController pushViewController:itemsView animated:YES]; 
```

}

有人知道为什么这不起作用吗？（对于它的价值，我使用的是 Xcode 4.2，带有 Storyboard ......）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T12:02:49.467

Your setting the rightBarButtonItem to `filterButton`, but shouldn't it be `searchButton`?

```
// 2nd. button - this one does not show up:
UIBarButtonItem *searchButton = [[UIBarButtonItem alloc]
                                           initWithBarButtonSystemItem:UIBarButtonSystemItemSearch
                                           target:self
                                           action:@selector(goSearching:)];
// Here I think you wanna add the searchButton and not the filterButton..
self.navigationItem.rightBarButtonItem = searchButton; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:03:51.480

Maybe you mixed searchButton up with filterButton?

EDIT:

Once again I looked at your code and I noticed that you are doing this in :didSelectRowAtIndexPath.

When you set self.navigationItem.rightBarButtonItem, actually your are changing the button of current navigationController, not the button of itemsByTitleVC.

So the resolution is, move this piece of code into somethere inside itemsByTitleVC, like viewDidLoad: or viewWillAppear:.

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:58:36.350

我今天遇到了这个问题，最终我发现我的（和你的）

```
self.navigationItem.rightBarButtonItem 
```

是 UIView 类的*只读*属性。

声明您自己的指向 的属性，`barbuttonItem`您可以修改该按钮。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-20T07:51:17.807

我也遇到过这个问题，最后通过setter方法设置rightBarButtonItem解决了。喜欢`[self.navigationItem setRightBarButtonItem:saveButton animated:YES];`。

# iphone - xcode - 过滤 UITableView 的 xml 数据

> ID：10208877
> 
> 赞同：0
> 
> 时间：2012-04-18T11:57:55.893
> 
> 标签：iphone, objective-c, xml, xcode

我正在使用 xCode 4.3.2。在这个项目中，我已经读取了 xml 数据并将其放在 uiTableView 中，但在这里我只想列出输出数据（超过 '4000'）的价格。我该如何为此设定条件？请你帮助我好吗？

我的 XML：

```
<oembed>
<Company><name>ABC</name><price>2000</price></Company>
<Company><name>JP</name><price>4000</price></Company>
<Company><name>VB</name><price>5000</price></Company>
</oembed> 
```

视图控制器.m

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName 
    attributes:(NSDictionary *)attributeDict 
{

    if([elementName isEqualToString:@"oembed"]) 
    {
        books = [[NSMutableArray alloc] init];
    }
    else if([elementName isEqualToString:@"Company"]) 
    {
        aBook = [[Book alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string 
{ 

    if(!currentElementValue) 
        currentElementValue = [[NSMutableString alloc] initWithString:string];
    else
        [currentElementValue appendString:string];

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"oembed"])
        return;

    if([elementName isEqualToString:@"Company"]) {

        [books addObject:aBook];

        [aBook release];
        aBook = nil;
    }
    else 
        [aBook setValue:currentElementValue forKey:elementName];

    [currentElementValue release];
    currentElementValue = nil;
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:03:18.750

Try filtering your `books` array before displaying the data in the table.

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"self.price >= 4000"];
NSArray *filtered = [books filteredArrayUsingPredicate:predicate]; 
```

Note that this code assumes you're using some sort of a dictionary or a custom object which has a property named `price`.

# sql - 从 SQL 登录中提取密码

> ID：10208884
> 
> 赞同：2
> 
> 时间：2012-04-18T11:58:10.153
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我需要编写一个脚本来提取 SQL 登录的密码并将其传播到另一台服务器。

我这样做了：

```
Declare @PasswordBinary varbinary(256)
Set @PasswordBinary = CAST(LOGINPROPERTY( @LoginName, 'PasswordHash' ) AS varbinary (256))

Exec sp_hexadecimal @PasswordBinary, @PasswordStr Out 
```

sp_hexadecimal ：

```
Create PROCEDURE [dbo].[sp_hexadecimal]
    @binvalue varbinary(256),
    @hexvalue varchar (514) OUTPUT
AS
  DECLARE @charvalue varchar (514)
  DECLARE @i int
  DECLARE @length int
  DECLARE @hexstring char(16)

  SELECT @charvalue = '0x'
  SELECT @i = 1
  SELECT @length = DATALENGTH (@binvalue)
  SELECT @hexstring = '0123456789ABCDEF'

  WHILE (@i <= @length)
  BEGIN
     DECLARE @tempint int
     DECLARE @firstint int
     DECLARE @secondint int

     SELECT @tempint = CONVERT(int, SUBSTRING(@binvalue,@i,1))
     SELECT @firstint = FLOOR(@tempint/16)
     SELECT @secondint = @tempint - (@firstint*16)

     SELECT @charvalue = @charvalue +
                         SUBSTRING(@hexstring, @firstint+1, 1) +
                         SUBSTRING(@hexstring, @secondint+1, 1)

     SELECT @i = @i + 1
  END

  SELECT @hexvalue = @charvalue 
```

我有一个变量

```
@SQL nvarchar(max) = 'CREATE LOGIN ' + QUOTENAME(@LoginName) + ' With PASSWORD = ' + @PasswordStr + ' HASHED''' 
```

我将它发送到远程服务器上的存储过程，并在那里执行这个变量：

```
 Exec (@SQL) 
```

但我得到一个错误：

> @SQL 变量设置为：'Create Login [Name] With password = 0x Hashed'

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:32:26.187

更改您的程序以在密码上添加引号：

```
SET @tmpstr = 'CREATE LOGIN [' + @name + '] WITH PASSWORD=' + @txtpwd + ' HASHED' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:49:23.953

这对我有用

```
SELECT  'create login ' + QUOTENAME(name) + ' with password = '
        + CONVERT(SYSNAME, [password_hash], 1) + ' hashed'
FROM    sys.[sql_logins] 
```

# parameters - 日期范围参数 - 包括记录选择的范围

> ID：10208886
> 
> 赞同：0
> 
> 时间：2012-04-18T11:58:14.643
> 
> 标签：parameters, crystal-reports, report, selection, record

我正在使用 Crystal Reports 12.0.0.683，我使用 date 类型的参数并设置为**Allow Range Values**。比我想在**记录选择公式**中使用它。我正在设置**包含此值**并使用此选择公式：

```
(not HasValue({?PARAM_DATE}) OR 
(
    if HasLowerBound({?PARAM_DATE}) and HasUpperBound({?PARAM_DATE}) then
                ({VIEW_REPORT_1.DATE_DUE} > Minimum({?PARAM_DATE})) and 
                        ({VIEW_REPORT_1.DATE_DUE} < Maximum({?PARAM_DATE}))
    else if HasLowerBound({?PARAM_DATE}) and not HasUpperBound({?PARAM_DATE}) then
                ({VIEW_REPORT_1.DATE_DUE} > Minimum({?PARAM_DATE})) 
    else if HasLowerBound({?PARAM_DATE}) and not HasUpperBound({?PARAM_DATE}) and IncludesLowerBound({?PARAM_DATE}) then
                ({VIEW_REPORT_1.DATE_DUE} >= Minimum({?PARAM_DATE})) 
    else if not HasLowerBound({?PARAM_DATE}) and HasUpperBound({?PARAM_DATE}) then
                ({VIEW_REPORT_1.DATE_DUE} < Maximum({?PARAM_DATE}))
    else if not HasLowerBound({?PARAM_DATE}) and HasUpperBound({?PARAM_DATE}) and IncludesUpperBound({?PARAM_DATE}) then
                ({VIEW_REPORT_1.DATE_DUE} <= Maximum({?PARAM_DATE}))
)) 
```

我使用`IncludesUpperBound`，`IncludesLowerBound`但它仍然没有选择正确的记录。

例如，我有 DATE_DUE 2012-03-30，如果我设置参数 2012-03-30 并选择包含此值，则记录将被过滤掉。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:54:21.683

您没有在任何地方使用小于或等于/大于或等于，因此它不会包含*等于*最大值或最小值的值。

您可以通过这样做大大简化您的代码：

```
not(hasvalue({?PARAM_DATE}))
or {VIEW_REPORT_1.DATE_DUE} in {?PARAM_DATE}
```

# c# - Groupby 价值和回报指数

> ID：10208892
> 
> 赞同：0
> 
> 时间：2012-04-18T11:58:48.267
> 
> 标签：c#, linq

我想使用 linq 使用 value 对数据进行分组，并将相应的索引作为数组返回。

**例子**

```
int[] input = {0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,2,2,2,2} 
```

**预期产出**

```
Dictionary<int,int[]> ouput = {0->[0,1,2,3,8,9,10,11]; 1 -> [4,5,6,7,12,13,14,15]; 2 -> [16,17,18,19]} 
```

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:05:44.300

你可以使用这个：

```
var output = input.Select((x, i) => new { Value=x, Index=i })
                  .GroupBy(x => x.Value)
                  .ToDictionary(x => x.Key, x => x.Select(y => y.Index)
                                                  .ToArray()); 
```

这首先选择一个匿名类型将原始索引保存在数组中，然后按值分组，然后将分组结果转换为字典，其中每个组的键作为字典的键，并从对应组中的所有元素索引被选中。

更短的方法是：

```
var output2 = input.Select((x, i) => new { Value=x, Index=i })
                   .ToLookup(x => x.Value, x => x.Index); 
```

这将导致 a`Lookup<int, int>`在语义上与 相同`Dictionary<int, int[]>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T12:04:24.570

```
var result = input
            .Select((i, index) => new{Num=i, Index=index})
            .GroupBy(x => x.Num)
            .ToDictionary(grp => grp.Key, grp => grp.Select(x => x.Index).ToArray()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:03:12.793

尝试

```
input.Select( (i, index) => new {Value = i, Index = index})
            .GroupBy(x => x.Value).Select(y => new { Key = y.Key, Indexes = y.Select(z => z.Index).ToList() }); 
```

# .net - 计算字段和 OData/WCF 数据服务

> ID：10208893
> 
> 赞同：0
> 
> 时间：2012-04-18T11:58:49.280
> 
> 标签：.net, wcf, entity-framework, wcf-data-services, odata

我正在尝试将一些计算字段添加到使用 WCF 数据服务在外部公开的实体框架模型中，我遇到的问题是我尝试的任何内容都不会暴露在我的服务之外。

我尝试添加以下代码（注意：实际方法在 get/set 方法中有业务逻辑）：

```
public partial class myClass
{
    [DataMember]
    public string Foo { get; set; }
} 
```

但是 OData 仍然没有返回该字段，似乎 OData 只查看 .edmx。

目前我能想到解决这个问题的唯一选择是实现一个`CLR function`并让我的实体框架模型查看一个 SQL `view`，它为每个返回的行调用我的函数并计算服务器端的值，并使用存储过程来更新实体. 但我宁愿不必为实际上是一个简单的（在 .NET 中，但在 SQL 中不是）计算字段而经历所有这些。

计算此字段时，我还有哪些其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:11:25.813

没错，如果提供者是 EF，WCF DS 只会查看 csdl。

所以你有几个选择

*   继续使用 EF 提供程序并以某种方式将列添加到 CSDL。我看到人们所做的是将列添加到数据库中，但将它们留空并在 EF 类中计算它们（例如）。但我确信还有其他方法可以做到这一点。

*   使用自定义提供程序，在这种情况下，您可以完全控制一切，但是通过基于 EF 的投影实现这一点的工作量是巨大的。因此，除非您遇到其他问题，否则我不会走那条路。

# node.js - Node.js 崩溃！SyntaxError：意外的令牌非法

> ID：10208895
> 
> 赞同：3
> 
> 时间：2012-04-18T11:58:55.207
> 
> 标签：node.js, crash, express

突然什么都没有了。我唯一做的就是在“控制器”文件夹中添加一个新文件，然后将其删除。有什么问题？这是什么意思？

```
node/last/test4/controllers/.DS_Store:1

^

module.js:311
    throw err;
          ^
SyntaxError: Unexpected token ILLEGAL
    at Module._compile (module.js:429:25)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31)
    at Function._load (module.js:308:12)
    at Module.require (module.js:354:17)
    at require (module.js:370:17)
    at /Users/henrikpetersson81/node/last/test4/controllers.js:8:13
    at Array.forEach (native)
    at Object.oncomplete (node/last/test4/controllers.js:6:15) 
```

controllers.js（这个文件中没有任何改变，因为它工作）：

```
var fs = require('fs');

module.exports = function(app, service){
    fs.readdir(__dirname + '/controllers', function(err, files){
        if (err) throw err;
        files.forEach(function(file){
            var name = file.replace('.js', '');
            require('./controllers/' + name)(app, service);
        });
    });
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T12:03:17.343

这是因为 Mac 创建了一个文件`.DS_STORE`. 发生的事情是帮助程序自动通过控制器文件夹并包括它们。Node 包含它，认为它是一个控制器并崩溃，因为它不是 JavaScript。

# jquery - 更改跨度标记onchange事件jquery的值

> ID：10208899
> 
> 赞同：0
> 
> 时间：2012-04-18T11:59:17.477
> 
> 标签：jquery, events, onchange, html

当用户从下拉列表中选择一个选项时，我试图更改 span 的值，但这似乎不起作用。

HTML：

```
<tr>
                    <td class="field" colspan="4">
                    <select id="mmt">
                    <option value="Metric" selected>METRIC</option>
                    <option value="English">ENGLISH</option>
                    </select></td>
                </tr>
                <tr>
                    <td class="head"><label for="abc">ABC</label></td>
                    <td class="field"><input type="text" id="abc"/><span class="m">MM</span> OD</td>
                    <td class="head"><label for="pqr"></label></td>
                    <td class="field"><input type="text" id="pqr" /><span class="ms">MM</span></td>
                </tr>
                <tr>
                    <td class="head"><label for="xyz">XYZ</label></td>
                    <td class="field"><input type="text"  id="xyz" /></td>
                    <td class="head"><label for="stu"></label></td>
                    <td class="field"><input type="text" id="stu"/><span class="ms">MM</span></td>
                </tr> 
```

jQuery：

```
$(function() {          
                    $('#mmt').change(function() {
                        if ($('#mmt option:selected').text() == "English") {
                            $('.ms').text("INCH");
                        }
                        else {
                            $('.ms').text("MM")     
                        }

                    });

        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:01:48.017

`$('#mmt option:selected').text()`将返回`"METRIC"`或`"ENGLISH"`，但永远不会`"English"`。

您需要元素的*值*，`select`而不是 selected 的文本内容`option`。
为此使用[`$('#mmt').val()` *^([docs])*](http://api.jquery.com/val/)，或者简单地说`$(this).val()`， since`this`指的是`select`元素。

[**演示**](http://jsfiddle.net/Zg6JB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:10:41.663

您需要在此处更新您的 jquery 是解决方案；

```
$(function() {          
           $('#mmt').change(function() {

           if ($('#mmt option:selected').val() =="English") {
               $('.ms').text("INCH");

               }
           else {
               $('.ms').text("MM")     
           }

          });

        }); 
```

你可以检查[JSFiddle](http://jsfiddle.net/SX7n3/71/)

# objective-c - UIkit 动画和核心动画

> ID：10208902
> 
> 赞同：0
> 
> 时间：2012-04-18T11:59:30.807
> 
> 标签：objective-c, ios, core-animation

我是一个初学者的iOS程序员。我想知道 UIView 动画方法的限制是什么，在其他世界什么时候使用核心动画？我的问题是，我见过许多应用程序女巫为她的视图设置动画，但我不知道他们是使用核心动画还是仅使用 UIKit 动画。

谢谢你的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:06:00.073

通常 UIView 动画适用于绝大多数动画。通常，只有在您要执行更高级的动画路径、同时操作大量图层或只需要做一些 UIView 动画无法实现的事情时，您才会使用核心动画。但在我的应用程序中，我对几乎所有内容（包括 3D 变换）都使用 UIView 动画，而且我对此没有任何问题。你不会想在游戏中使用 UIView 动画，但对于大多数非游戏应用程序来说应该没问题。此外，UIView 动画在后端使用核心动画。

# php - 我们如何使用数据库动态更改一些下拉列表？

> ID：10208903
> 
> 赞同：0
> 
> 时间：2012-04-18T11:59:38.857
> 
> 标签：php, javascript, mysql, dynamic, drop-down-menu

尝试从 mysql 数据库动态更改下拉列表值。脚本似乎可以工作，但我不确定。数据库列是id、columnA、columnB、columnC、columnD

在第二个下拉列表选择时，它会发出警报“再次嗨”。

```
$(document).ready(
function() {
$(".columnA").change(
function() {
    var dataA=$(this).val();
    var dataString = 'columnA='+ dataA;
    $.ajax (    {
                    type: "POST",
                    url: "ajax_try.php",
                    data: dataString,
                    cache: false,
                    success: function(html)
                    {
                        $(".columnB").html(html);
                    }    
                }               
            );

            }
    );

$(".columnB").change(
function() {
    var dataB=$(this).val();
    var dataString = 'columnB='+ dataB;
    $.ajax (    {
                    type: "POST",
                    url: "ajax_try.php",
                    data: dataString,
                    cache: false,
                    success: function(html)
                    {
                        alert("hi.. again");
                        $(".columnC").html(html);
                    }    
                }               
            );

            }
    ); 
```

});

```
<?php
include('db.php');
if($_POST['columnA'])
{
$columnA = $_POST['columnA'];

$sql = mysql_query("SELECT id, columnB FROM try WHERE columnA = '$columnA' GROUP BY columnB");

//$sql = mysql_query("SELECT id, columnB FROM try columnB WHERE columnA = '$columnA'");

while($row = mysql_fetch_array($sql))
{
$id = $row['id'];
$columnB = $row['columnB'];
echo '<option value="'.$id.'">'.$columnB.'</option>';

}
}

if($_POST['columnB'])
{
$columnB = $_POST['columnB'];

$sql = mysql_query("SELECT id, columnC FROM try WHERE columnB = '$columnB' GROUP BY columnC");

while($row = mysql_fetch_array($sql))
{
$id = $row['id'];
$columnC = $row['columnC'];
echo '<option value="'.$id.'">'.$columnC.'</option>';

}
}

?> 
```

好的，我认为 html 代码更容易理解问题..

```
<html xmlns="http://www.w3.org/1999/xhtml">
....
<script type="text/javascript" src="http://ajax.googleapis.com/
ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
.....
here is the script
...
</script>
</head>
<body>
<table width="100%" border="0" cellpadding="10">
  <tr>
    <td width="15%"><span style="font-size:20px;">columnA</span></td>
    <td><span >
        <select size="1" id="columnA" title="" name="columnA" class="columnA"  style="width:250px; height:40px; font-size:20px; padding: 5px;">
            <option value="0" selected="selected">Choose..</option>
        <?php
            include('db.php');
            $sql=mysql_query("SELECT columnA FROM try GROUP BY columnA");
            while($row = mysql_fetch_array($sql))
            {
            //$id = $row['id'];
            $dataA = $row['columnA'];
            echo '<option value="'.$dataA.'">'.$dataA.'</option>';
            } 
        ?>
        </select>
        </span>
    </td>
  </tr>
  <tr>
     <td width="15%"><span style="font-size:20px;">columnB</span></td>
    <td>
        <select size="1" id="columnB"  title="" name="columnB" class="columnB" style="width:250px; height:40px; font-size:20px; padding: 5px;">
            <option value="0" selected="selected">Choose..</option>
        </select>
    </td>
  </tr>
  <tr>
     <td width="15%"><span style="font-size:20px;">columnC</span></td>
    <td>
        <select size="1" id="columnC"  title="" name="columnC" class="columnC" style="width:250px; height:40px; font-size:20px; padding: 5px;">
            <option value="0" selected="selected">Choose..</option>
        </select>
    </td>
  </tr>

</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:08:00.160

```
while($row = mysql_fetch_array($sql)) {
   $id = $row['id'];
   $columnC = $row['columnC'];
   echo '<option value="'.$id.'">'.$columnC.'</option>';
} 
```

您正在打印 columnB，而您应该打印 columnC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:12:05.187

我很想在一个查询中选择表中的所有行，然后使用 JavaScript（或 jQuery）来更改选择列表选项。这样可以节省 HTTP 请求，因为每次更改都会触发 AJAX 事件，如果用户更改选项 100 次，那么出于美观原因，这就是 100 个请求。

另一个好处是，如果用户由于某种原因没有 JavaScript 或连接速度较慢，那么选择列表仍然可用，否则它们将是空白的，因为它们没有被您的 AJAX 调用加载。

# iphone - 测试静态库或在项目之间共享

> ID：10208907
> 
> 赞同：1
> 
> 时间：2012-04-18T11:59:52.623
> 
> 标签：iphone, xcode, shared-libraries, static-libraries

我将制作一个静态库，它将在我的几个应用程序中使用。该库也将发布，以便每个人都可以使用它。因此，我对任何人看到代码不感兴趣，并且它很容易在项目中实现。

我选择使用[Michael Tyson 的通用静态库模板](https://github.com/michaeltyson/iOS-Universal-Library-Template)。此模板依赖于 Adam Martins 通用静态库脚本。

现在，我想要一种在设备上测试我的库的方法，并且由于我需要在其他项目中使用这个库，我想只是将它链接到另一个项目并通过这个项目测试库。我只是无法弄清楚我将如何做到这一点。谁能指导我完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:04:32.060

将所有 .h 文件从库项目复制到新项目，然后只需将库拖放到新项目中……不要将库复制到新项目中……如果您在库它们将反映在您的项目中，您不必再次重复该过程..（只需确保两个构建相同，例如，如果您使用设备方案开发库，那么您的项目也应该在设备方案下编译.您也可以制作一个FAT库，但这需要更多的工作，您可以稍后再查看。）希望这会有所帮助..

您可以参考[本](http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/)教程以获取更多图形信息..

# login - 如何在rails applicaiton中使用谷歌设置登录？

> ID：10208909
> 
> 赞同：0
> 
> 时间：2012-04-18T12:00:00.723
> 
> 标签：login, oauth, omniauth

我使用omniauth 登录社交网络。我可以在 facebook 中创建一个应用程序，并且可以将我的 id 和 secret 放入配置文件中。但我无法在谷歌做同样的事情，因为我无法注册网址[http://localhost:3000](http://localhost:3000)。我开始知道谷歌有一些方法可以避免使用一些证书的注册过程，但我不知道该怎么做。如果有人这样做，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:07:39.563

有一个较新的[omniauth 插件](https://rubygems.org/gems/google-api-omniauth)使用[OAuth 2.0 进行登录](https://developers.google.com/accounts/docs/OAuth2Login)，您可能想尝试一下。

文档很简单，但是里面有一个示例应用程序，而且很容易配置。[通过API 控制台](https://code.google.com/apis/console)注册客户端也很容易，并且对本地主机友好 :)

# salesforce - 来自自定义按钮的 Salesforce 机会验证

> ID：10208911
> 
> 赞同：0
> 
> 时间：2012-04-18T12:00:06.660
> 
> 标签：salesforce, apex-code

我有一个自定义按钮“提交订单”，它可以简单地更改机会阶段。

但我想在更改阶段之前添加一些验证检查

这是我的顶级课程

```
global class SubmitOrder {

public SubmitOrder(ApexPages.StandardController controller)
{
}

Webservice static string Submit(string oppId)
{
    string message = '';
    try
    {
        List<Opportunity> listOpp = new List<Opportunity>();
        Opportunity oppNew = [SELECT id, StageName, Destination_Zone__c, Sold__c  FROM Opportunity WHERE Id = :oppId];

        boolean flag = true;
        if(oppNew.StageName!= 'To Be Searched' && oppNew.StageName != 'Search')
        {
            oppNew.StageName.addError('Stage should be \'To Be Searched\' or \'Presentation\' or \'Search');
            flag = false;
        }
        if( oppNew.Destination_Zone__c == '')
        {
            oppNew.Destination_Zone__c.addError('Destination Zone is required');
            flag = false;
        }
        if(oppNew.Sold__c < 0)
        {
            oppNew.Sold__c.addError('Sold is required');
            flag = false;
        }

        if(flag)
        {
            oppNew.StageName = 'Ticketing';
            listOpp.add(oppNew);
            if (listOpp != null && !listOpp .isEmpty())
            {
               Database.update(listOpp);
            }
            message ='Saved Successfully';
    }
    catch(System.CalloutException e)
    {
        message = e.getMessage();
    }
    return message;
}
} 
```

并要求自定义按钮是

```
{!REQUIRESCRIPT("/soap/ajax/10.0/connection.js")}
{!REQUIRESCRIPT("/soap/ajax/10.0/apex.js")}

var oppId= "{!Opportunity.Id}";
var result = sforce.apex.execute("SubmitOrder","Submit",{oppId:oppId }); 
```

但出现以下错误

**SObject 行不允许出错**

任何帮助，将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:08:41.880

问题是您正在获取 ID 并将其传递给一个方法，该方法检索具有该 ID 的 OLD 行，该 ID 已经在数据库中，并尝试对其使用 addError() 。它不起作用，因为 addError() 不适用于数据库中已经存在的行。

在不知道您的确切要求的情况下，我会提出这个建议 - 将验证规则放在 Opportunity 对象上。然后你可以对你的按钮进行编码来简单地更新记录。验证规则将处理其余部分。

# android - 如何在滚动视图中滚动列表视图？

> ID：10208912
> 
> 赞同：0
> 
> 时间：2012-04-18T12:00:07.367
> 
> 标签：android

我是 Android 新手，我正在使用滚动视图中的列表视图开发应用程序。根据我的要求，我需要显示一些带有垂直滚动的视图，并在其下方显示一个列表视图。我想垂直滚动整个视图和列表视图，因为列表视图必须独立滚动。我已经搜索了解决方案，但发现我们不应该在滚动视图中使用 Listview。

我已经尝试了另一种方法，用动态线性布局替换列表视图，这也不起作用。

当我触摸 ListItem 时，我尝试禁用 ScrollView 的焦点，反之亦然，但我没有得到它。

我尝试了以下代码来禁用滚动视图的焦点。

```
mScrollView.setFocusableInTouchMode(true);
mScrollView.setFocusable(true);

mScrollView.setDescendantFocusability(ViewGroup.FOCUS_BEFORE_DESCENDANTS);

mScrollView.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        v.requestFocusFromTouch();
        return false;
    }
}); 
```

请帮帮我，提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:06:33.763

ListViews 不打算在滚动视图中使用。

对于您的参考：[看到这个](http://code.google.com/p/android/issues/detail?id=6552)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:12:55.203

## 不要在 ScrollView 中嵌套 ListView

如果您必须这样做，请尝试下面的代码，它也来自 StackOverflow，由一个人回答。

```
public class Utility {
public static void setListViewHeightBasedOnChildren(ListView listView) {
    ListAdapter listAdapter = listView.getAdapter();
        if (listAdapter == null) {
            // pre-condition
            return;
        }

    int totalHeight = 0;
    for (int i = 0; i < listAdapter.getCount(); i++) {
        View listItem = listAdapter.getView(i, null, listView);
        listItem.measure(0, 0);
        totalHeight += listItem.getMeasuredHeight();
    }

    ViewGroup.LayoutParams params = listView.getLayoutParams();
    params.height = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() – 1));
    listView.setLayoutParams(params);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:30:14.520

正如你从别人那里知道的..

ScrollView 中的 ListView 不起作用。

对于解决方案的摇动，

您可以将其他布局部分...添加`views`到一个 xml 和`listview`另一个

然后使用`listView.setHeaderView(view);`将您的视图布局添加为标题。

示例代码：

LinearLayout ll = (LinearLayout) findViewById(R.id.headerlayout); ListView lv = (ListView)findViewById(R.id.listview); lv.addHeaderView(ll);

**[看到这个](https://stackoverflow.com/questions/6121186/android-listview-with-header-and-footer-buttons)**或者你也可以在互联网上搜索*带有标题的 Listview 示例*

# java - 如何在java代码中使用.dll文件？

> ID：10208914
> 
> 赞同：1
> 
> 时间：2012-04-18T12:00:13.077
> 
> 标签：java, .net, dll, java-native-interface

我有一个 .dll 文件，我必须在 java 中使用它。这个 .dll 文件有一个参数化的方法，它应该返回类型为字符串。当我将参数传递给它时，我得到的消息为`Native methods do not specify a body`

这是代码...

```
package com.letme.test;

public class Eagleye_parser {

    String n = "E48A7 F7759 65EA7";

    public Eagleye_parser() {}

    static {
        System.loadLibrary("Eagleye_parser");
    }

    public native String eagleye_fmu(n);// here it is giving msg : Native methods do not specify a body 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:03:47.243

试试看一下 JNA，它提供了一个很好的原生代码包装层。

[https://github.com/twall/jna](https://github.com/twall/jna)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:15:31.730

只需在您的项目中添加引用。和顶部的命名空间......然后你可以访问所有的dll方法。如果您使用的是 Eclispe，请右键单击您的项目->然后单击构建路径->然后单击添加库，然后单击用户库

在这里你可以导入dll

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:39:08.180

`public native String eagleye_fmu(n);`这里的 'n' 是问题所在，因为任何其他 java 函数声明都会出现问题。

这应该类似于`public native String eagleye_fmu(String);`然后您像调用任何其他函数一样调用本机函数`String result = eagleye_fmu(n);`

这一切都假设您正确实施了 dll

# casting - 在 Teradata 中安全地将 VARCHAR 转换为 DECIMAL

> ID：10208917
> 
> 赞同：1
> 
> 时间：2012-04-18T12:00:15.760
> 
> 标签：casting, decimal, varchar, teradata, isnumeric

在 Teradata DB 我有源表

```
create set table SRC_TABLE (
    Some_Id varchar(2O) not null
); 
```

该表加载了来自外部系统的数据。我有目标表

```
create set table DST_TABLE (
    Some_Id decimal(4,0) not null
); 
```

我需要安全地将行从 SRC_TABLE 复制到 DST_TABLE。有一个合同，外部系统将只提供可转换为 DECIMAL(4) 的值。但是，是否有任何安全的方法可以选择 SRC_TABLE 中不符合合同并可能导致类型转换失败的行？

更新：由于我工作环境的限制，我无法使用 UDF 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:50:12.583

我建议使用`MERGE INTO`带有错误表的 SQL 中的操作来捕获无法应用的记录。这将允许您加载数据并对无法应用的错误表中的记录进行后处理。

您还可以从 Teradata Developer Exchange 下载相应的 UDF 库，并使用`IsNumeric()`等效库对 的每一行执行条件检查，`SRC_TABLE`以避免将非数字数据插入表中。这种条件检查可以丢弃整个记录，将记录加载到日志表中，或者将值设置为无效数据的商定默认值。

```
CREATE ERROR TABLE MyDB.TGT_TABLE_ERR FOR MyDB.TGT_TABLE; -- Creates Error Table for MERGE INTO operation

MERGE INTO MyDB.TGT_TABLE T1
     USING MyDB.SRC_TABLE T2
        ON T1.{primary index} = T2.{primary index}
WHEN MATCHED THEN
     UPDATE SET Some_ID = CAST(T2.Some_ID AS DECIMAL(4,0))
WHEN NOT MATCHED THEN
     INSERT VALUES (T2.{column list})
LOGGING ALL ERRORS WITH NO LIMIT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T23:26:43.957

您可以使用 FastExport 从旧表中写出数据，然后使用 FastLoad 将其加载到新表中。任何解析为 decimal(4, 0) 的记录都将被加载到新表中，而其余记录将被写出到错误表中。确保设置一个足够高的值`ERRLIMIT`，以确保作业不会在少数错误后终止。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-19T10:40:29.543

最后在同事的帮助下，我找到了可行的解决方案。它有一些限制（不考虑符号，不考虑小数部分），但对于 ID，它工作得很好。

1.  从字符串的开头和结尾修剪空格
2.  从字符串中修剪前导零
3.  测试最大允许长度
4.  用零填充字符串到四个字符（将四个零添加到字符串的开头并从字符串中获取最后四个字符）
5.  在允许的字符集上测试字符串中的每个位置

所以`SRC_TABLE`不能转换成的记录`DECIMAL(4)`可以通过select来获取：

```
select 
  Some_Id
from
  SRC_TABLE
where
  characters(trim(leading '0' from trim(both ' ' from Some_Id))) > 4
  or substring(substring('0000' || trim(leading '0' from trim(both ' ' from Some_Id)) FROM characters('0000' || trim(leading '0' from trim(both ' ' from Some_Id))) - 3) FROM 1 FOR 1) NOT IN ('0','1','2','3','4','5','6','7','8','9')  
  or substring(substring('0000' || trim(leading '0' from trim(both ' ' from Some_Id)) FROM characters('0000' || trim(leading '0' from trim(both ' ' from Some_Id))) - 3) FROM 2 FOR 1) NOT IN ('0','1','2','3','4','5','6','7','8','9')
  or substring(substring('0000' || trim(leading '0' from trim(both ' ' from Some_Id)) FROM characters('0000' || trim(leading '0' from trim(both ' ' from Some_Id))) - 3) FROM 3 FOR 1) NOT IN ('0','1','2','3','4','5','6','7','8','9')
  or substring(substring('0000' || trim(leading '0' from trim(both ' ' from Some_Id)) FROM characters('0000' || trim(leading '0' from trim(both ' ' from Some_Id))) - 3) FROM 4 FOR 1) NOT IN ('0','1','2','3','4','5','6','7','8','9'); 
```

编辑：dnoeth 在他对[Convert char to int TeraData Sql](https://stackoverflow.com/questions/39386736/convert-char-to-int-teradata-sql)的回答中建议的方式更方便，它也适用于 TD 13.10：

```
-- TO_NUMBER returns NULL when failing

CAST(TO_NUMBER(UTENTE_CD) AS INTEGER)

-- check if there are only digits
CASE WHEN UTENTE_CD  = ''                     -- all spaces
       THEN NULL
     WHEN LTRIM(UTENTE_CD, '0123456789') = '' -- only digits
       THEN CAST(UTENTE_CD AS INTEGER)
     ELSE NULL
END 
```

# performance - 存储过程和实体框架的性能

> ID：10208921
> 
> 赞同：3
> 
> 时间：2012-04-18T12:00:22.820
> 
> 标签：performance, entity-framework, stored-procedures, entity-framework-4

为什么通过我的实体模型调用存储过程会导致性能比直接调用慢得多，有什么明显的原因吗？

首先，我不希望 SP 以*完全相同*的速度运行，而且我知道 EF 必须做的各种事情在直接访问 SP 时不会被调用。

除此之外，我有一个返回三列字符串的查询。当我通过 Enterprise Manager 执行它时，它几乎可以立即运行。如果我通过 EF 运行它，则大约需要六秒钟。当然，结果被映射为复杂类型，但是当我通过 SQL Server Profiler 运行查询时，可以清楚地看到延迟发生在 SQL Server 上：

![从 SQL Server Profiler 中的两个来源执行的查询的性能](../Images/1cf0eccf264387d8381e1401a98d56bf.png)

在图中，1 表示从企业管理器调用的 SQL，2 表示它是通过我的应用程序使用 EF 调用的。

有什么明显的我做错了吗？我预计可能会延迟一两秒，但差异似乎太大了。

**编辑：**

似乎存储过程在通过 ADO.Net 调用时也运行缓慢。我的同事似乎认为这与 .Net 正在缓存的错误执行计划有关。通过编辑存储过程并再次保存它似乎清除了缓存中的所有内容，并且对存储过程的 ADO.Net 和 EF 调用都运行良好。

有没有其他人遇到过这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T16:46:19.660

Take a look at [this thread on SQL Server forum](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/6e5353b9-4837-4022-a535-5408ed6f852a/). It's a bit similar and might give some clues. In short, you may have different SQL Server execution environment options in SSMS and ADO.NET leading to different execution plans. Clearing the SQL Server plan cache should help.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T08:51:03.957

Pavel Gatilov 似乎已经用 ARITH ABORT 设置击中了这个名字，但我想我会发布更多关于我的发现的信息。

[这篇](https://stackoverflow.com/questions/6344992/controlling-arithabort-in-ef4)关于 SO 的帖子讨论了一个类似的问题，讨论了一个变通方法；可以在 EF 连接和 SQL.Data.Client 之间编写一个包装类，该类在对数据库的任何调用前加上“SET ARITHABORT ON”。[MSDN上的这篇文章](http://blogs.msdn.com/b/jkowalski/archive/2009/06/11/tracing-and-caching-in-entity-framework-available-on-msdn-code-gallery.aspx)更详细地解释了。

在查看了更改的复杂性并考虑到我们要将应用程序从使用存储过程转移到完全使用 EF 之后，我们将硬着头皮将 SP 功能转移到我们的 EF 数据模型中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-09T00:58:01.283

在单个事务中调用不一样

```
INSERT INTO foo (col1, col2) SELECT col1, col2 (with all 100 rows of the changes) 
```

比调用 100 次

```
EXEC SP_foo_INSERT param1, param2 
```

只需查看在这两种情况下生成的查询并直接在数据库中测试该查询。看看它的执行计划是什么。

# javascript - 在 Chrome 中实时编辑 Javascript，例如在 Visual Studio 中编辑并继续

> ID：10208922
> 
> 赞同：5
> 
> 时间：2012-04-18T12:00:28.060
> 
> 标签：javascript, debugging, google-chrome, google-chrome-devtools

Chrome 可以即时编辑 Javascript，无需刷新整个页面，类似于 Visual Studio 对代码隐藏文件的编辑和继续功能。这有助于对 javascript 函数或片段进行原型设计。

你必须打一个断点，然后点击编辑按钮。然后当前函数将被展开，然后您可以在更改生效后退回到它。不如 VS 编辑和继续那么好，但至少它是一些东西。此外，似乎有些事情无法改变。

是否有任何其他工具可以进行实时 javascript 编辑，或者有更好的方法吗？据我所知，Visual Studio 2010 并没有。

```
function test1() {

    debugger;

    var data_array = [];
    var newvar1 = newfunc()+'dc'; // ok - can edit
    var newvar2 = "hey2"; // ok - can edit
    var newvar3 = 4; // ok can edit

    var someobj = {1:"hey2", 2:"string2"}; // no - can not edit values after executed once
    var word_array = ["hello", "goodbye", "adios"]; // no - can not edit values after executed once

    for (var counter = 0; counter < 500; counter++) {
        data_array[counter] = counter + word_array[Math.floor(Math.random() * (word_array.length))];
    }

}

function newfunc() {
     return "yes44";   
} 
```

类似问题：
[使用 Google Chrome 调试和编辑嵌入在 HTML 页面中的 javascript](https://stackoverflow.com/questions/7497913/using-google-chrome-to-debug-and-edit-javascript-embedded-in-html-page)
[在 Chrome 调试器中编辑](https://stackoverflow.com/questions/5067532/editing-in-the-chrome-debugger)

自动保存插件 [http://www.google.com/intl/cs-CZ/events/io/2010/sessions/chrome-developer-tools.html](http://www.google.com/intl/cs-CZ/events/io/2010/sessions/chrome-developer-tools.html) 谷歌演示： [https ://github.com/NV/chrome-devtools-自动保存](https://github.com/NV/chrome-devtools-autosave)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:25:14.260

你可能想试试[Chrome Dev Tools for Java](http://code.google.com/p/chromedevtools/)项目。它是一个用于在 Chrome 中调试 JavaScript 的 Eclipse 插件，可以与 JavaScript IDE 插件一起使用。通过这种方式，您可以编辑、调试和实时编辑同一个文件（参见[文本](http://code.google.com/p/chromedevtools/wiki/FeatureDebugOnRealFiles)）。

# apache - Redis PhpRedis 堆栈跟踪

> ID：10208924
> 
> 赞同：0
> 
> 时间：2012-04-18T12:00:33.627
> 
> 标签：apache, redis, stack-trace

出于性能和稳定性的原因，我一直在测试 phpredis。性能非常好，但是在持续测试后我看到一个可重复的堆栈跟踪错误 - 通过“ab”运行相同的脚本。

模式运行此测试 3 到 4 次

ab -n 10000 -c 10 -k "http://localhost:84/index.php rw_app_id=1&code=test&device_id=test"

（如果我从浏览器运行请求，我似乎无法出现错误，尽管这可能是因为我无法加载进程。）

通常在第 3 次或第 4 次迭代期间，Apache 错误日志会报告以下内容：

阿帕奇错误日志：

[警告] [client 127.0.0.1] mod_fcgid: stderr: PHP Fatal error: Uncaught exception 'RedisException' with message 'Redis server away' in /var/www/web1/web/index.php:108

[警告] [客户端 127.0.0.1] mod_fcgid：stderr：堆栈跟踪：[2012 年 4 月 18 日星期三 16:39:49] [警告] [客户端 127.0.0.1] mod_fcgid：stderr：#0 /var/www/web1/web /index.php(108): Redis->hGet('rw_promo_code:1...', 'unlock_code')

[警告] [client 127.0.0.1] mod_fcgid: stderr: #1 /var/www/web1/web/index.php(172): RedeemAPI->redeem()

[警告] [客户端 127.0.0.1] mod_fcgid: stderr: #2 {main}

[警告] [client 127.0.0.1] mod_fcgid: stderr: Next exception 'RedisException' with message 'Redis server away' in /var/www/web1/web/index.php:0

[警告] [客户端 127.0.0.1] mod_fcgid：标准错误：堆栈跟踪：

[警告] [客户端 127.0.0.1] mod_fcgid: stderr: #0 /var/www/web1/web/index.php(172): Redis->__destruct()

[警告] [client 127.0.0.1] mod_fcgid: stderr: #1 /var/www/web1/web/index.php(172): RedeemAPI->redeem()

[警告] [客户端 127.0.0.1] mod_fcgid: stderr: #2 {main}

[警告] [client 127.0.0.1] mod_fcgid: stderr: 在第 0 行的 /var/www/web1/web/index.php 中抛出

[警告] [client 127.0.0.1] mod_fcgid: stderr: PHP Fatal error: Uncaught exception 'RedisException' with message 'Redis server away' in /var/www/web1/web/index.php:108

[警告] [客户端 127.0.0.1] mod_fcgid：标准错误：堆栈跟踪：

[警告] [client 127.0.0.1] mod_fcgid: stderr: #0 /var/www/web1/web/index.php(108): Redis->hGet('rw_promo_code:1...', 'unlock_code')

[警告] [client 127.0.0.1] mod_fcgid: stderr: #1 /var/www/web1/web/index.php(172): RedeemAPI->redeem()

[警告] [客户端 127.0.0.1] mod_fcgid: stderr: #2 {main}

[警告] [client 127.0.0.1] mod_fcgid: stderr: Next exception 'RedisException' with message 'Redis server away' in /var/www/web1/web/index.php:0

[警告] [客户端 127.0.0.1] mod_fcgid：标准错误：堆栈跟踪：

[警告] [客户端 127.0.0.1] mod_fcgid: stderr: #0 /var/www/web1/web/index.php(172): Redis->__destruct()

[警告] [client 127.0.0.1] mod_fcgid: stderr: #1 /var/www/web1/web/index.php(172): RedeemAPI->redeem()

[警告] [客户端 127.0.0.1] mod_fcgid: stderr: #2 {main}

[警告] [client 127.0.0.1] mod_fcgid: stderr: 在第 0 行的 /var/www/web1/web/index.php 中抛出

[警告] [client 127.0.0.1] mod_fcgid: stderr: PHP Fatal error: Uncaught exception 'RedisException' with message 'Redis server away' in /var/www/web1/web/index.php:108

ETC....

重新启动 Apache 和 Redis 并可以重复循环。偶尔它会再次连接并成功处理一些请求。

我可以尝试捕获异常并尝试重新连接，但是进程无法恢复。

Ubuntu x86_64 11.10 Redis 版本 2.4 Apache/2.2.20 (Ubuntu) mod_fastcgi/mod_fastcgi-SNAP-0910052141 mod_fcgid/2.3.6 mod_perl/2.0.5 Perl/v5.12.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T03:18:10.003

**在https://github.com/antirez/redis/issues/340**上找到了这个：

 **这可能是由于操作系统没有足够快地清理连接造成的。当 redis-benchmark 禁用 keepalive 时会发出以下警告，但对于运行循环基准测试同样有效：

警告：keepalive 已禁用，您可能需要

echo 1 > /proc/sys/net/ipv4/tcp_tw_reuse 对于 Linux 和

sudo sysctl -w net.inet.tcp.msl=1000 用于 Mac OS X，以便使用大量客户端/请求

我对此进行了测试并有所帮助-但是我仍然遇到很多错误

[warn] [client 127.0.0.1] (104)Connection reset by peer: mod_fcgid: error reading data from FastCGI server [error] [client 127.0.0.1] 脚本头过早结束：index.php

更新：

已测试 1,000,000 个请求 - 一次 10 个 - 零错误。**

# mysql - 如何提高大表中的插入时间？

> ID：10208926
> 
> 赞同：0
> 
> 时间：2012-04-18T12:00:38.133
> 
> 标签：mysql, database

我们在 MySQL 表中有以下数据结构，它基本上记录用户在页面上的操作

```
id int
page_id int
user_id int
action_type enum(6)
date_created datetime` 
```

我们有以下索引：

```
id Primary key
user_id-page_id-date_created unique
page_id-user_id-date_created
user_id
page_id-date_created 
```

我们的问题是这个表目前有 1.25 亿行，并且它以每天 80 万的速度增长，这使得插入需要大约 2 个小时才能完成。插入是通过从 3 个其他表中选择数据的 3 个查询进行的。这次我们能做些什么来改善？我们应该放弃mysql并尝试其他数据库解决方案吗？

**LE：**根据您的反馈，我正在尝试提供更多信息。首先，这些表是 MyISAM，这些插入每晚在 cron 作业中发生一次，我们不会从中删除任何数据。这是我处理插入的方法。我将把大表称为 big_table 并且 3 个表中的每一个都将是 content_table，因为它们的结构相似。解释将是 3 张桌子中最大的一张，大约有 1.085 亿张桌子。首先我得到我应该开始使用 php 插入的 id。（我可以在 3 分钟内让非索引查询得到它）

```
SELECT id FROM content_table WHERE date_created > "2012-04-18" ORDER BY id ASC LIMIT 1;
+-----------+
| id        |
+-----------+
| 107278872 |
+-----------+
1 row in set (3 min 15.52 sec)

EXPLAIN SELECT id FROM content_table WHERE date_created > "2012-04-18" ORDER BY id ASC LIMIT 1;
+----+-------------+------------------+-------+---------------+---------+---------+------+------+-------------+
| id | select_type | table            | type  | possible_keys | key     | key_len | ref  | rows | Extra       |
+----+-------------+------------------+-------+---------------+---------+---------+------+------+-------------+
|  1 | SIMPLE      | content_table    | index | NULL          | PRIMARY | 4       | NULL |    1 | Using where |
+----+-------------+------------------+-------+---------------+---------+---------+------+------+-------------+
1 row in set (0.06 sec) 
```

然后使用这个 id 我执行以下操作

```
INSERT IGNORE INTO big_table (user_id, page_id, type, date_created) 
SELECT user_id, page_id, IF (is_admin,"admin_action","action") as type, created_time FROM content_table WHERE id >= "107278872"; 
```

这是选择的解释的样子

```
EXPLAIN SELECT user_id, page_id, IF (is_admin,"admin_action","action") as type, created_time FROM content_table WHERE id >= "107278872";
+----+-------------+------------------+-------+---------------+---------+---------+------+--------+-------------+
| id | select_type | table            | type  | possible_keys | key     | key_len | ref  | rows   | Extra       |
+----+-------------+------------------+-------+---------------+---------+---------+------+--------+-------------+
|  1 | SIMPLE      | content_table    | range | PRIMARY       | PRIMARY | 4       | NULL | 777864 | Using where |
+----+-------------+------------------+-------+---------------+---------+---------+------+--------+-------------+
1 row in set (0.00 sec) 
```

我也在 phpmyadmin 中尝试过，得到了大约 0.004 秒的时间，所以我认为是插入需要时间，而不是数据获取。我对服务器的了解是它是一个四核 xeon @ 2.4 ghz 和 16 GB 的内存，但我对存储一无所知（我一有这些信息就会回来）。并且数据不用于记录，我们只需要统计哪些用户在页面上最活跃，各种分组等，用户可以为这些指定任何时间间隔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:05:46.150

你可以：

1.  解释您在其他 3 个表上运行的查询的计划，以查看它们是否被正确索引。应该消除 TABLE SCAN。
2.  为查询中的每个 WHERE 子句向这三个其他表添加索引。
3.  按天、周、月或其他合适的机制对数据进行分区，以便您可以将最旧的数据移到报告/仓储解决方案中。
4.  您可以查看触发解决方案是否可以帮助您。
5.  分析数据库并监控网络流量以查看时间花费在哪里。

所有关系数据库都将不得不处理过多的数据。你的第一个想法不应该是放弃 MySQL；它应该弄清楚您的归档策略需要是什么。您必须确定在给定时间您的事务存储中需要多少数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T21:39:21.813

你是如何插入它们的？您每秒只能有一定数量的事务循环查询，如下所示

```
//start loop
insert into table values (1) 
//end loop 
```

会比

```
//start loop
//fill a variable 
//end loop
insert into table values (1),(2),(3),(4) // where (1),(2),(3),(4) are values filled by the loop 
```

（注意你不能像这样插入太多的值，用你的数据试试，我通常发现 200 左右是一个相当不错的值）

您没有大量索引，所以我认为它们不会引起问题，phpmyadmin 显示索引大小，检查与总表大小相比的内容 - 这可能会让您了解它是否存储过多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:15:13.883

影响刀片的因素很多，例如

*   引擎种类
*   索引
*   如何插入数据等。

首先告诉我们您是如何插入数据的，其次是哪个存储引擎用于表，然后我们可以进一步优化您的插入查询，一般我可以说不必要的索引意味着插入速度慢。

有关插入速度的更多说明，[请阅读 dev.mysql 的这篇文章以了解插入速度。](http://dev.mysql.com/doc/refman/5.0/en/insert-speed.html)

# ruby-on-rails-3 - 为 nil 调用 id，它会错误地为 4 - 如果你真的想要 nil 的 id，请使用 object_id

> ID：10208927
> 
> 赞同：4
> 
> 时间：2012-04-18T12:00:40.053
> 
> 标签：ruby-on-rails-3

我想知道是否有人可以帮助我。我现在正在学习 ROR 并且遇到了一些麻烦。我使用脚手架创建了 other_users 和 post 模型。other_users 有很多：帖子等等。这个想法是，当用户登录并创建帖子时，在显示操作中显示创建此帖子的用户的名称。我想知道是否有人可以给我打电话。

后控制器

```
def new
    @post = Post.new(:other_user_id => @other_user.id)

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end
def create
    @post = Post.new(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end 
```

发布视图_form：

```
<%= form_for(:post, :url => {:action => 'create', :other_user_id => @other_user.id}) do |f| %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :content %><br />
    <%= f.text_area :content %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我知道这有问题，但我对此很陌生，所以我无法自己解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T17:01:55.367

第 2 行`@other_user`是未知的，所以它是 nil。我们试图从 nil 中获取 id，因此它会产生错误，称为`called id for nil`. 初始化并重`@other_user`试。

# gcc - Ubuntu上pcre-8.30的编译错误

> ID：10208932
> 
> 赞同：0
> 
> 时间：2012-04-18T12:00:58.483
> 
> 标签：gcc, ubuntu, libtool

尝试在 Ubuntu 10.04 上编译 pcre-8.30.tar.gz 时遇到错误，不知道发生了什么。

```
ciphor@MyUbuntu:~/work/pcre-8.30$ make
make  all-am
make[1]: Entering directory `/home/ciphor/work/pcre-8.30'
  CXX    pcrecpp.lo
libtool: compile: unrecognized option `-DHAVE_CONFIG_H'
libtool: compile: Try `libtool --help' for more information.
make[1]: *** [pcrecpp.lo] Error 1
make[1]:Leaving directory `/home/ciphor/work/pcre-8.30'
make: *** [all] Error 2 
```

我阅读了 Makefile 并找到了以下行：

```
LTCOMPILE = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) \
    $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) \
    $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) \
    $(AM_CFLAGS) $(CFLAGS) 
```

其中 $(DEFS) 是“-DHAVE_CONFIG_H”选项。我想这是 gcc 的一个选项，而不是 libtool 的选项，对吧？

似乎错误就在这里，但是如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:46:19.880

检查是否`g++`已安装，以及 Makefile 中的 和 的值`CXX`是否`CXXCPP`设置`ac_ct_CXX`为`g++`。

# php - javascript代码中的php变量

> ID：10208936
> 
> 赞同：-1
> 
> 时间：2012-04-18T12:01:08.510
> 
> 标签：php, javascript, jquery

我在帮助函数中有下面的代码，我尝试在事件发生后将用户重定向到链接。

```
static public function redirect($path)
{       
    echo '<script type="text/javascript">';
    echo 'self.parent.location.href = "$path";';
    echo '</script>';        
} 
```

就我而言，我将该函数称为，`Helper_Popup::redirect("/account/my_addresses")`但当然，它将我重定向到一个链接`something/$path`。我应该如何在上面的代码中“嵌入” php 变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:04:53.557

你的`$path`变量用单引号括起来，所以变量被解释为字面意思`'$path'`而不是变量的实际值，这是双引号和单引号在 php 中的区别，试试这个：

```
static public function redirect($path)
{       
    echo '<script type="text/javascript">';
    echo 'self.parent.location.href = "'.$path.'";';
    echo '</script>';        
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T12:05:24.143

线路不正确。如果你想在 Javascript 中使用 php，你必须这样做

```
echo 'self.parent.location.href = "' . $path . '";'; 
```

或者你可以像这样使用双引号

```
echo "self.parent.location.href = '$path';"; 
```

如果你使用单引号 php 将不会被执行。但是如果使用双引号，php 将解析 php 代码（如果可用），单引号会将回显写为纯文本：“$path”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T12:04:53.967

```
echo 'self.parent.location.href = "'. $path .'";'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T12:04:05.320

```
echo "self.parent.location.href = '$path';"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T12:06:51.433

尝试。

```
echo 'self.parent.location.href = "'. $path .'";'; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-18T12:05:17.937

添加 `<?php ?>`标签和`echo`变量

例子

```
<script src='<?php echo $var; ?>' </script> 
```

# fortran - 是否将相同的实体传递给具有不同意图未定义行为的参数？

> ID：10208938
> 
> 赞同：1
> 
> 时间：2012-04-18T12:01:10.670
> 
> 标签：fortran, fortran90

```
module foo
contains
   subroutine bar()
      integer :: i(3)

      i(1) = 1
      i(2) = 2
      i(3) = 3
      call baz(i, i)
   end subroutine

   subroutine baz(a,b)
      integer, intent(in) :: a(:)
      integer, intent(inout) :: b(:)

      b(2) = 5
      print *, a
      print *, b
   end subroutine

end module
program xx
   use foo
   call bar()
end program 
```

在这段代码中，我将相同的数组传递`i`给 baz，将其绑定到具有不同意图的参数。当然，当我打印时`a`，它会改变。这是未定义的行为，还是根据规范？

请注意，我完全希望这会发生。我对这种行为并不感到困惑，我只是想了解它是否有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:07:20.643

这是未定义的行为。Fortran 通常禁止参数别名（即多个参数指向相同的实际数据），除非参数具有 POINTER 或 TARGET 属性。

# objective-c - 查找子视图 iOS Sdk 的实际来源

> ID：10208939
> 
> 赞同：0
> 
> 时间：2012-04-18T12:01:10.780
> 
> 标签：objective-c, xcode

如果我将进度条放在 UIScrollView 之外，我会得到一些 x 和 y 轴（如（110,250）），如果我将进度条保留在 UIScrollView 中，我会得到不同的 x 和 y 轴（如（9,100））。

我的要求是我必须将进度条放在 UIScrollView 中，但我想知道 UIScrollview 之外进度条的 x 和 y 轴。

即我的进度条起源必须相对于 UIView 计算而不是相对于 Scrollview

请给我解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:12:36.013

UIView 可以将矩形从一个坐标空间转换到另一个坐标空间，只要它们有一个共同的父视图（甚至是窗口）。因此，例如：

```
[scrollview convertRect:subview.frame toView:someOtherView];  //scrollView converts the frame of subView.frame to the coordinate system of someOtherView 
```

有几种方法可以将点或矩形从另一个视图转换为另一个视图：

```
[superView convertRect:anotherView.frame fromView:anotherView.superView]; //Will give you the rect of anotherView.frame in superView coordinate system. 
```

请注意，矩形可以是任何东西（不需要是特定视图的框架）。该方法所做的只是从一个坐标空间转换到另一个坐标空间。

此外，要在屏幕（或主窗口）上查找视图的坐标，您可以将“toView:”设置为 nil：

```
[superView convertRect:subView.frame toView:nil]; //will give you the coordinate of subView in the window 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:12:44.720

这两个 UIView 方法应该可以帮助您：

```
– convertPoint:toView:
– convertPoint:fromView: 
```

# apache-flex - 将嵌入文件从“资产”复制到 File.applicationStorageDirectory

> ID：10208940
> 
> 赞同：1
> 
> 时间：2012-04-18T12:01:11.567
> 
> 标签：apache-flex

我需要将我嵌入项目的“assets”文件夹中的一些图像复制到 File.applicationStorageDirectory 位置，但我不知道该怎么做（实际上我不知道如何使用 File 访问嵌入的文件对象实例）...

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:39:35.387

正如我在评论中建议的那样，显然嵌入式资产默认情况下不会序列化为 ByteArray。例如，图像被序列化为 BitmapAsset 类。

```
[Embed(source="sourceImg.png")]
private var MyImage:Class; 
```

对于此嵌入，您可以执行以下操作：

```
var bmp:BitmapAsset = new MyImage(); 
```

有一些技术可以将该 BitmapAsset 转换为 ByteArray，但还有一种更简单的方法：如果在 embed 指令中将类型设置为“octetstream”，它会立即序列化为 ByteArrayAsset 类，它是 ByteArray 的子类。所以你可以这样做：

```
[Embed(source="sourceImg.png", mimeType="application/octet-stream")]
private var MyImage:Class;

var bytes:ByteArray = new MyImage(); 
```

现在您需要做的就是使用 FileStream 将该 ByteArray 写入磁盘：

```
var file:File = File.desktopDirectory.resolvePath('targetImage.png');
var fs:FileStream = new FileStream();
fs.open(file, FileMode.WRITE);
fs.writeBytes(bytes);
fs.close(); 
```

这就是它的全部。

# javascript - 在 Mozilla 中未调用 Div onclick 事件

> ID：10208944
> 
> 赞同：2
> 
> 时间：2012-04-18T12:01:17.663
> 
> 标签：javascript, jquery

我的代码中有这个：

```
<div class="someClass">
    <div id="22" class="otherClass" onclick="goToEdit();">Title</div>
    <div class="parent">Other title</div>
</div> 
```

和：

```
function goToEdit()
{
    tree.selectItem($(event.target).attr('id'));
    btnMyButton_onclick();
} 
```

在 Chrome 中一切正常，但在 Mozilla 中，它不会对点击事件做出反应。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:25:19.167

> 我收到未定义事件的错误

**嗬！**我们都应该意识到。

问题是这`event`在大多数浏览器上不是全局的，尽管它在 IE 上，并且 Chrome 通过使其成为全局以及做它应该做的事情（将它传递到事件处理函数）向为 IE 设计的网站抛出了一块骨头。

到目前为止，您最好的选择是根本不使用`onclick="code"`（见下文），但您也可以这样做：

```
<div id="22" class="otherClass" onclick="goToEdit(event);">Title</div> 
```

...应该可以跨浏览器工作。它之所以有效，是因为该`event`对象是在调用处理程序的特殊上下文中定义的`onclick`（在以标准方式执行此操作的浏览器上），或者它是一个全局对象（在 IE 上），因此无论哪种方式，它都是在该点定义的（但不一定，作为一个全局的，稍后在你的`goToEdit`函数中——这就是我们将它作为参数传递的原因）。

但同样，我不会那样做。相反，我会通过让`id`值以字母开头来使值对 CSS 有效，并使用 jQuery 连接处理程序：

HTML：

```
<div id="d22" class="otherClass">Title</div> 
```

JavaScript：

```
$("#d22").click(goToEdit);
function goToEdit(event) {
    tree.selectItem(event.target.id.substring(1));
    btnMyButton_onclick();
} 
```

笔记：

*   在传递它之前，我从值`d`的开头删除了`id`它。我想这是`22`有原因的。
*   没有理由这样做`$(event.target).attr('id')`，直接使用`event.target.id`。
*   如果`div`可能包含其他元素（`span`s、`em`s、`p`s 等），请注意`event.target`可能不是`div`，它可能是 的后代元素`div`。`this`不过，将永远是`div`（jQuery 看到），所以：

    ```
    $("#d22").click(goToEdit);
    function goToEdit(event) {
        tree.selectItem(this.id.substring(1));
        btnMyButton_onclick();
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:13:11.443

尝试将元素的引用传递给函数。

```
 ... onclick="goToEdit(this);"> 
```

和

```
function goToEdit(element)
    {
       tree.selectItem($(element).attr('id'));
       btnMyButton_onclick();
    } 
```

编辑：http: [//jsfiddle.net/SwUuE/4/](http://jsfiddle.net/SwUuE/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:05:29.063

HTML 名称和 ID 标记必须以字母开头。你有`id="22"`. 也许它会导致浏览器之间的不一致。见：[http ://www.w3.org/TR/html4/types.html](http://www.w3.org/TR/html4/types.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T12:12:02.493

根据定义，div 用于将您的页面划分为不同的部分。改为使用带有类型按钮标签的锚点或输入

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-24T10:05:46.173

我认为，您可以从 html 中删除“onclick”

```
<div class="someClass">
    <div id="22" class="otherClass">Title</div>
    <div class="parent">Other title</div>
</div> 
```

然后尝试这样的事情

```
$('#22').on('click', function (e) {
    your code
}); 
```

**但是**如果你的 div id="22" 将被动态添加，你应该使用这样的东西

```
$('parent').on('click', '#22', function (e) {
    your code
}); 
```

where 'parent' - 静态元素在单击之前已存在于文档中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-07T07:29:36.060

我也面临同样的问题，但这段代码帮助了我。

我在 Mozilla Firefox 和 Chrome 上进行测试，两者都可以。

```
<input type="button" onclick="return goBack();" class="btn btn-warning cancel" value=" Cancel" style="color:white" />

<script>
function goBack() {
    window.history.back();
}
</script> 
```

# c# - 如果找到自关闭标签，如何删除元素

> ID：10208945
> 
> 赞同：3
> 
> 时间：2012-04-18T12:01:26.060
> 
> 标签：c#

我正在从第三方应用程序中提取一个 xml 文件，如下所示

```
<round round_id="14208" name="5th Round" start_date="2013-09-06" end_date="2013-09-10" type="cup" groups="0" has_outgroup_matches="no" last_updated="2011-04-05 14:15:02">
    --Some Data with more elements
</round>

<round round_id="14208" name="5th Round" start_date="2013-09-06" end_date="2013-09-10" type="cup" groups="0" has_outgroup_matches="no" last_updated="2011-04-05 14:15:02">
    --Some Data with more elements
</round> 
```

我的问题是有时这个标签带有像这样的自关闭标签

```
<round round_id="14208" name="5th Round" start_date="2013-09-06" end_date="2013-09-10" type="cup" groups="0" has_outgroup_matches="no" last_updated="2011-04-05 14:15:02"/> 
```

我想检查自闭标签并删除元素。

请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:24:20.547

```
var file = "C:\\YourPath\\data.xml";
var doc = new XmlDocument();
doc.Load(file);
var nodes = doc.SelectNodes("/rounds/round");
foreach (XmlNode item in nodes)
{
    if (item.InnerXml == String.Empty)
    {
        item.ParentNode.RemoveChild(item);
    }
}
doc.Save(file); 
```

# php - PHP SOAP how to create nested requests

> ID：10208956
> 
> 赞同：1
> 
> 时间：2012-04-18T12:02:01.487
> 
> 标签：php, soap, request, soap-client, complextype

I'm really out of ideas with PHP SOAP client. Main reason for this is probably that I don't fully understand how SOAP and more so how PHP Soap-client works.

I need to get nested elements (I hope that's the right term) from Soap client.

Here is the example I try to create

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/" xmlns:hor="http://Horizon.ExternalServices" xmlns:hor1="http://Horizon.ExternalServices.AFS">
   <soapenv:Header/>
   <soapenv:Body>
      <tem:SomeFunction>
         <tem:foobar>
            <hor:Foo>lorem</hor:Foo>
            <hor:Bar>ipsum</hor:Bar>
         </tem:foobar>
         <tem:bazbar>
            <hor1:Foo>lorem</hor1:Foo>
            <hor1:Bar>ipsum</hor1:Bar>
            <!--Optional:-->
         </tem:bazbar>
      </tem:SomeFunction>
   </soapenv:Body>
</soapenv:Envelope> 
```

My first attempt was just to put entire structure as assosiated array (that has always worked before), but with these nested thingis it seems to be a no go.

Then I tried several different methods to create the following structure with SoapVar and SoapParam but because I really don't seem to understand how they work most of the time I'm getting just the request without anything inside the body.

I've read the documention on PHP, wikipedia and w3schools. I just don't seem to get a grasp on the concept.

I'd really appriciate if some one could give me link or anything that explains how the Soap-client actually works. Also code examples would be much appriciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:16:13.380

即使我遇到了同样的问题，然后开始使用 nusoap 类，因为它更容易以关联数组格式传递数据，并且该类基于它构建 xml。你可以从[这里下载](http://sourceforge.net/projects/nusoap/)

# wpf - 将 MediaElement 绑定到 WPF 中的滑块位置

> ID：10208959
> 
> 赞同：4
> 
> 时间：2012-04-18T12:02:22.520
> 
> 标签：wpf, slider, mediaelement

尝试将滑块的最大值绑定到媒体元素的持续时间并将滑块的当前值绑定到媒体元素的位置，但由于某些原因它没有。

我希望滑块在视频播放时移动它的拇指。

```
<Slider x:Name="videoSlider" Value="{Binding ElementName=mp3MediaElement, Path=Position}" 
ValueChanged="videoSlider_ValueChanged" IsMoveToPointEnabled="True" 
Maximum="{Binding ElementName=mp3MediaElement, Path=NaturalDuration}" 
AllowDrop="True" DataContext="{Binding ElementName=mp3MediaElement}" /> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T12:12:11.737

我没有使用绑定..我有一个类似的问题并为此使用了计时器（我的代码在 Silverlight 中，假设在 WPF 上是相同的）：

第一个方向（电影更新滑块）

```
private TimeSpan TotalTime;

private void MyMediaElement_MediaOpened(object sender, RoutedEventArgs e)
        {
            TotalTime = MyMediaElement.NaturalDuration.TimeSpan;

            // Create a timer that will update the counters and the time slider
            timerVideoTime = new DispatcherTimer();
            timerVideoTime.Interval = TimeSpan.FromSeconds(1);
            timerVideoTime.Tick += new EventHandler(timer_Tick);
            timerVideoTime.Start();
        }

void timer_Tick(object sender, EventArgs e)
        {
            // Check if the movie finished calculate it's total time
            if (MyMediaElement.NaturalDuration.TimeSpan.TotalSeconds > 0)
            {
                if (TotalTime.TotalSeconds > 0)
                {
                    // Updating time slider
                    timeSlider.Value = MyMediaElement.Position.TotalSeconds /
                                       TotalTime.TotalSeconds;
                }
            }
        } 
```

表单 ctor 或类似内容的第二个方向（用户更新滑块）
写下以下行：

```
timeSlider.AddHandler(MouseLeftButtonUpEvent, 
                      new MouseButtonEventHandler(timeSlider_MouseLeftButtonUp), 
                      true); 
```

事件处理程序是：

```
private void timeSlider_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
        {
            if (TotalTime.TotalSeconds > 0)
            {
                MyMediaElement.Position = TimeSpan.FromSeconds(timeSlider.Value * TotalTime.TotalSeconds);
            }
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T12:21:26.397

Slider 属性 Value 和 Maximum 都是 Double 类型。您正在尝试绑定到类型的值`TimeSpan`并`Duration`相应地绑定，这就是绑定系统在您的情况下不起作用的原因。

您可以尝试编写转换器，或绑定到`NaturalDuration.TimeSpan.TotalSeconds`属性。

希望这可以帮助。

顺便说一句，如果您的某些绑定不起作用，您可以在 Visual Studio“输出”窗口中检查绑定错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-20T06:17:20.073

我遇到了同样的问题，滑块没有更新 MediaElement 的 UI。
我花了很长时间试图修复它，但我不确定它是否会帮助其他人。
但是以防万一其他人遇到这个问题，请注意媒体元素中有一个**ScrubbingEnabled**属性，它允许 MediaElement 的 UI 根据位置自动寻找正确的图片。
当您处于暂停模式并尝试拖动滑块时非常有用。
只需`ScrubbingEnabled="True"`在您的 MediaElement 的 XAML 中添加：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-12T02:26:31.280

这是我最终用于我的 UWP 应用程序的内容。

这个答案只是解决了具体问题；移动滑块以响应播放。它不处理响应用户移动滑块而改变视频位置。

首先添加这些：

```
private DispatcherTimer timerVideoPlayback;

private void TimerVideoPlayback_Tick(object sender, object e)
{
    long currentMediaTicks = mediaElement.Position.Ticks;
    long totalMediaTicks = mediaElement.NaturalDuration.TimeSpan.Ticks;

    if (totalMediaTicks > 0)
        slider.Value = (double)currentMediaTicks / totalMediaTicks * 100;
    else
        slider.Value = 0;
} 
```

然后当您的视频开始播放时，启动计时器：

```
timerVideoPlayback = new DispatcherTimer();
timerVideoPlayback.Interval = TimeSpan.FromMilliseconds(10);
timerVideoPlayback.Tick += TimerVideoPlayback_Tick;
timerVideoPlayback.Start(); 
```

我使用了 10 毫秒的间隔来保持滑块运动稳定。使用您喜欢的任何值。

并且不要忘记在播放结束时停止该计时器：

```
timerVideoPlayback.Stop(); 
```

# c# - C# .NET 与托管 Python (CPython) 的互操作性 -> 有什么问题吗？

> ID：10208960
> 
> 赞同：3
> 
> 时间：2012-04-18T12:02:22.937
> 
> 标签：c#, .net, python, interop, ironpython

我正在设计一个应用程序。核心应该用 C# 编写，但我也想使用一些已经完成的 CPython 模块（非托管）。

所以我对互操作性（从 C# 调用 CPython 方法和从 CPython 调用 C#）感兴趣。如果有问题，因为 C# 在 .NET 运行时（托管）中运行，而 CPython 直接非托管。

我已经与谷歌调查了这个问题并提出了以下解决方案：

*   通过 DLR +“CPython 扩展”+也许是“IronClad”使用 IronPython 并从 IronPython 调用 CPython 模块，反之亦然 -> 这些模块是托管还是非托管执行？如果我想使用 CPython 中的 C# 类和方法，有什么问题吗？
*   使用“Python for .NET”-> 与上述相同的问题。

你怎么看，哪种方式会更好？还是您有其他解决方案？

最后一个但也许是最重要的问题，我是否正确理解了上述几点，还是我搞砸了？

提前谢谢了 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:18:46.900

我认为你误解了 Python。它是一种解释型¹语言。您只需提供文本源文件，解释器就会执行它们。

Python*语言*与CPython、IronPython、Jython、PyPy 等*实现*之间存在差异。他们每个人都试图尽可能准确地实现 Python 语言，同时还添加了特定于实现的功能。这就像 C# 编译器是用 C++ 编写的一样。

例如，任何（纯）Python 文件都可以由 IronPython 解释器执行。但是，如果您知道您将使用 IronPython，您可以使用特殊的 IronPython 功能，让您进入 .NET 库。

现在，大多数 Python 不使用任何特定于实现的功能，因此使用什么来运行它并不重要。不过，有些 Python 确实如此。

¹好吧，它被编译成 .pyc 文件……但无论如何，“编译”并不是一个定义明确的术语。

* * *

为什么这对你很重要？好吧，您有一堆要与 .NET 框架一起使用的 Python 源代码。如果该代码不使用任何 CPython 特定的功能——例如使用 C 扩展模块——那么您可以在 IronPython 中运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:48:48.903

通过 COM 公开您的 Python 代码并从 C# 调用它。多次使用此途径（两种方式）。

# javascript - jQuery：根据 if 语句添加 css

> ID：10208968
> 
> 赞同：0
> 
> 时间：2012-04-18T12:03:00.660
> 
> 标签：javascript, jquery, html, css

我想检查图像的高度（页面上有多个这样的元素）。如果高度大于 66 像素，我想应用一个等于其高度一半的负上边距。

以下代码不执行任何操作。我的 if 语句有什么问题？

```
if($('.topstories a.image img').height() > 66){
    var margintop = -0.5 * ($(this).height() - 66);
    $(this).css('margin-top', 'margintop');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:04:20.573

您已将 value to margintop 放在引号中，因此它被视为字符串文字（在这种情况下为无效值）。尝试：

```
$(this).css('margin-top', margintop); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T12:48:46.243

我不知道你的函数的其余部分，但你要浏览每个图像，你需要使用循环或 each()。就像是：

```
$('.topstories a.image img').each(function(){
    if($(this).height() > 66)){
        var margintop = 0.5 * ($(this).height());
        $(this).css('margin-top', '-' + margintop);
    }
}); 
```

我认为您在数学运算符中减去 66 也会导致问题 - 如果图像高度为 67，而您减去 66，您会得到 1\. 1 * .5 等于 0，所以您不会看到效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T12:05:28.607

代替

```
$(this).css('margin-top', 'margintop'); 
```

和

```
$(this).css('margin-top', margintop); 
```

# c# - C# string.Format 1000,00 到 1.000,00

> ID：10208975
> 
> 赞同：2
> 
> 时间：2012-04-18T12:03:21.840
> 
> 标签：c#, string, string.format

如何将数字更改为以下内容：

`1000`应该成为`1.000,00`，当我有的时候`700`，它必须是`700,00`。
当我尝试`string.Format("{0:0,000.00}", Number)`时，`700`变成`0.700,00`了，所以它不好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T12:08:09.103

你需要

```
string.Format("{0:#,##0.00}", Number) 
```

您需要将前导占位符指定为 # 而不是零，这使其成为可选的。

但是，与其“蛮力”设置数字格式，不如确定您的目标是哪种文化格式并`CultureInfo`为 string.format 提供正确的格式。`String.Format`允许您提供如下格式的文化：

```
var culture = CultureInfo.GetCultureInfo("fr-FR");
var formattedNumber = string.Format(culture , "{0:n}", Number); 
```

（我选择纯粹使用法语作为说明，因为它似乎符合您示例中的要求）。

如果您关心具有特定格式，您不应该做的是在`{0:n}`不指定文化的情况下使用 - 因为这完全取决于用户/系统的文化设置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T12:09:53.143

`CultureInfo`在[string.Format](http://msdn.microsoft.com/en-us/library/1ksz8yb7.aspx)中提供正确的

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-18T12:12:36.217

您希望小数分隔符为 ，千位分隔符为 。

最好的方法是在应用程序级别定义它以保持一致性。

**窗体：**

在 program.cs 中

```
System.Threading.Thread.CurrentThread.CurrentUICulture.NumberFormat.NumberDecimalSeparator = ",";
System.Threading.Thread.CurrentThread.CurrentUICulture.NumberFormat.NumberGroupSeparator = "."; 
```

**ASP.NET**

定义一个基本页面，然后执行：

```
 protected override void InitializeCulture()
    {
    base.InitializeCulture(); 

     System.Threading.Thread.CurrentThread.CurrentUICulture.NumberFormat.NumberDecimalSeparator = ",";    
     System.Threading.Thread.CurrentThread.CurrentUICulture.NumberFormat.NumberGroupSeparator = ".";                    
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T12:09:07.140

使用格式字符串格式化数字时，无论小数分隔符是用于格式化的区域性，`.`都是*占位符。*类似`,`地用作千位分隔符。

您需要在正确的位置使用它们，并使用一种将 a`,`用作小数分隔符和`.`千位分隔符的区域性。

```
string.Format(CultureInfo.GetCultureInfo("de-DE"), "{0:n}", 1000) 
```

产生`1.000,00`.

```
string.Format(CultureInfo.GetCultureInfo("en-GB"), "{0:n}", 1000) 
```

产生`1,000.00`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-18T12:14:33.410

您是否尝试根据需要设置 NumberFormat

```
NumberFormatInfo num = new NumberFormatInfo();

num.NumberDecimalSeparator = ",";
num.NumberGroupSeparator = ".";
string samp =  70000.00.ToString("N2",num); // prints 70.000,00 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T12:06:36.533

试试这个 `String.Format("{0:n}", 1000 )`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T12:08:48.633

试试`String.Format("#,0.##")`。这个对我有用。
输入：800
输出：800,00

输入：1400
输出：1.400,00

我使用德国文化作为数字格式。也许你必须指定它，这取决于你的文化。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-27T11:23:50.027

这将起作用：

```
NumberFormatInfo num = new CultureInfo("de-DE", false).NumberFormat;
double myDigit = 123456789; // you can also use int
string output = myDigit.ToString("N0" , num);
//output = 123.456.789 
```

如果你使用`ToString("F" , num)`你可以使用`123456789.33`，你的输出将是`123.456.789,33`

# javascript - JQuery add Image to Div

> ID：10208979
> 
> 赞同：0
> 
> 时间：2012-04-18T12:03:42.377
> 
> 标签：javascript, jquery, html

I tried to create a plugin for jQuery, but there is a problem.

This is the .html: [http://pastebin.com/amLSFSZX](http://pastebin.com/amLSFSZX)

and this is the .js file: [http://pastebin.com/CmrHzKRk](http://pastebin.com/CmrHzKRk)

I want 4 arrows in a div.

1.  Top Middle
2.  Right Middle
3.  Bottom Middle
4.  Left Middle

If it's not packed in a plugin it works fine.

But if I include the plugin, it bugs.

This is the output via Firebug:

```
<img class="arrows" src="arrow-top.png" alt="Arrow-Top" style="height: 26px; width: 20px; top: 50px; left: 480480px; position: absolute; display: none;">
<img class="arrows" src="arrow-right.png" alt="Arrow-Top" style="position: absolute; display: none;">
<img class="arrows" src="arrow-bottom.png" alt="Arrow-Top" style="left: 480480px; position: absolute; display: none;">
<img class="arrows" src="arrow-left.png" alt="Arrow-Top" style="height: 20px; width: 26px; top: 50250px; left: 480px; position: absolute; display: none;"> 
```

Can anyone help? Sorry for my bad english.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:16:24.400

这可能只是一个复制/粘贴或其他错误，但你的 firebug 输出的内联样式在某些地方看起来很奇怪。

你有`left: 480480px;`两个地方和`top: 50250px`。您还没有准确解释没有发生什么或期望的行为超出了“它的错误”。

关于您的 jsfiddle，感谢您将这些资源整合在一起，但是当我第一次对其执行运行时，我的开发人员工具中已经出现了两个错误。未找到arrow.js，并且您无法在#map 上调用AddArrow 方法。您可能正在使用 jQuery，因此您需要在窗口左侧选择它作为您的框架。

但我认为那些奇怪的左侧和顶部方面可能会导致`bugs`您所指的问题。

**编辑**：看起来你的问题是你包含了 arrow.js 插件，但是你自己覆盖了它。乍一看，arrow.js 和您的 javascripting 区域中的代码看起来相同。（*当然，他们都分享了你的计算没有括号的问题！*）

我已经在我的小提琴中删除了对 arrow.js 的依赖，我认为*你也应该这样做*，因为你显然正在将代码复制到你的标记中。如果您无法控制arrow.js，那么您**应该**使用自己的代码，因为arrow.js没有在top 和left 的计算周围加上括号时是**有缺陷的。**

这是[更新的小提琴](http://jsfiddle.net/Q6nmR/7/)，其中基本箭头取自较大的`Internet`（因为我无权访问您的箭头）。停止依赖arrow.js；正如我所描述的那样纠正它，你会在一个更好的地方。包含插件时为什么一切都会中断的问题的答案是插件错误。

您将需要调整代码以在您的上下文中正确执行它。例如：jsfiddle 为您触发 $(document).ready()。

# android - 如何获取用户输入的名称并在edittext中搜索相应的位置

> ID：10208985
> 
> 赞同：1
> 
> 时间：2012-04-18T12:04:08.003
> 
> 标签：android, google-maps

我可以将谷歌地图放在我的安卓手机中。我把谷歌地图的搜索选项。如果用户给出位置并单击按钮搜索意味着它在谷歌地图中找到位置。现在我想在用户在Edittext中给出位置名称时显示相对位置..请给我任何参考.....

```
 i try this code of button click
     if (v == search) {
        Geocoder geo = new Geocoder(getApplicationContext(),
                Locale.getDefault());
        try {
            List<Address> addresses = geo.getFromLocationName(location
                    .getText().toString(), 5);
            if (addresses.size() > 0) {
                GeoPoint p = new GeoPoint((int) (addresses.get(0)
                        .getLatitude() * 1E6), (int) (addresses.get(0)
                        .getLongitude() * 1E6));

                controller.animateTo(p);
                controller.setZoom(12);
                MapOverlay mapOverlay = new MapOverlay(getApplicationContext(),p);
                List<Overlay> lisOverlays = view.getOverlays();
                lisOverlays.clear();
                lisOverlays.add(mapOverlay);

            } 
```

按钮搜索单击意味着它也显示位置。我想根据用户搜索在编辑文本中显示位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:08:24.747

使用以下代码接受用户输入并在地图上搜索位置。

```
 String value = editText1.getText().toString();
          // Do something with value!
          Log.d("value", value);

          Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault());    
            try {
                List<Address> addresses = geoCoder.getFromLocationName(
                    value, 5);
                String add = "";
                if (addresses.size() > 0) {
                    p = new GeoPoint(
                            (int) (addresses.get(0).getLatitude() * 1E6), 
                            (int) (addresses.get(0).getLongitude() * 1E6));
                    mc.animateTo(p);    
                    mapView.invalidate();
                }    
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

需要进行一些更改

# activerecord - Rails 3.1：如何根据方法的结果进行查询？

> ID：10208994
> 
> 赞同：0
> 
> 时间：2012-04-18T12:04:33.363
> 
> 标签：activerecord, ruby-on-rails-3.1

在我的应用程序中，我想跨 ActiveRecord 查询保持可链接性。但我并不总是能够这样做。有时我被迫使用 select - 它返回一个数组，从而破坏了可链接性。

特别是，我的应用中有一个名为 Response 的模型

响应有一个方法叫page？它返回特定 Response 对象的页码 - 一个整数

```
def page?
  ... returns the page number ...      
end 
```

方法——页面？- 需要查看应用程序中的一些其他模型才能执行。它不能 - 换句话说 - 仅依赖于 Responses 表中的数据

现在，我有一个查询 - on_page(n) - 在响应模型类中定义如下

```
 def self.on_page(n)
   select{ |m| m.page? == n }
 end 
```

问题是上面的选择返回一个数组而不是一个 ActiveRecord::Relation。这意味着我不能执行以下操作（'with_scan' 是另一个 ActiveRecord 查询）

```
Response.on_page(3).with_scan 
```

我可以通过更改查询完成的顺序来完成上述工作。但这只是一个黑客

在“on_page”查询中使用选择是否有替代方法？还是有不同的使用方式？任何可以保持可链接性的方式？

提前感谢您的帮助， Abhinav

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:16:35.787

可链接性是通过使用 ActiveRecord::Relation 的实例来实现的。要将 Array 的实例转换为 ActiveRecord::Relation，请使用 .scoped() 方法：

```
def self.on_page(n)
   select{ |m| m.page? == n }.scoped
end 
```

[您可以在此处](http://guides.rubyonrails.org/active_record_querying.html)查看文档。

# ipad - 在 iPad 上为 HTML5 Web 应用程序进行身份验证

> ID：10208995
> 
> 赞同：0
> 
> 时间：2012-04-18T12:04:37.820
> 
> 标签：ipad, html, web

我创建了一个 HTML5 网络应用程序，效果很好。但是，当我将它固定到主屏幕以使其表现得像全屏原生应用程序时，每次打开它时，我都必须通过我的公司 Windows 内部网进行身份验证。如果我切换到另一个应用程序并切换回来，我需要再次进行身份验证。

当我在 Safari 中打开应用程序时，我不需要进行身份验证。

这是正常的吗？或者任何人都可以想到为什么我的网络将以我需要不断进行身份验证的方式配置的原因？这变得有点烦人。

谢谢！

克里斯

# macos - 如何在 Qt 应用程序名称中使用空格？

> ID：10208997
> 
> 赞同：5
> 
> 时间：2012-04-18T12:04:38.907
> 
> 标签：macos, qt

应用程序名称通常由

```
TARGET = MyApplication 
```

MyApplication.pro 文件中的语句。我的问题是，如何在应用程序名称中添加空格。显然是简单的解决方案

```
TARGET = My Application 
```

不起作用。我主要对应用程序名称感兴趣，因为它显示在 Mac OS X 菜单栏中。

我在 Mac OS 10.7 上使用 Qt 4.7.4 和 Qt Creator 2.4.1。

我尝试了一些来自互联网的解决方案，例如

[http://grovr.blogspot.de/2010/11/putting-spaces-in-name-of-qt-for.html](http://grovr.blogspot.de/2010/11/putting-spaces-in-name-of-qt-for.html) [http://www.developer.nokia.com/Community/Discussion/showthread.php?207662 -App-name-with-whitespace](http://www.developer.nokia.com/Community/Discussion/showthread.php?207662-App-name-with-whitespace)

但他们没有工作。

因为我是 Qt 和 Stack Overflow 的新手，请为我的错误道歉。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T13:36:47.170

至少在 Windows (Qt 4.8.0, Qt Creator 2.4.1) 中这有效：

```
TARGET = "My Application" 
```

# objective-c - 将 UITableView 的默认复选标记替换为自定义图像

> ID：10208998
> 
> 赞同：6
> 
> 时间：2012-04-18T12:04:42.047
> 
> 标签：objective-c, ios, uitableview

我想替换 UITableViewCell 的附件设置为 UITableViewCellAccessoryCheckmark 时显示的默认复选标记图像。

所以我还是想写：

```
[cell setAccessoryType:UITableViewCellAccessoryCheckmark]; 
```

但我希望显示我自己的图像而不是默认图像。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-18T12:09:41.370

```
myUITableViewCell.accessoryView = myImageView; 
```

然后把你的图片放到 UIImageView 中。

看

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/cl/UITableViewCell](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/cl/UITableViewCell)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T12:17:13.137

**方法一：**

我认为你可以使用

假设您有一个带有复选标记图像的 UIButton。

**上`cellForRowAtIndexPath:`**

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
CGRect frame = CGRectMake(0.0, 0.0, image.size.width, image.size.height);
button.frame = frame;
[button setBackgroundImage:image forState:UIControlStateNormal];

[button addTarget:self action:@selector(checkButtonTapped:event:)  forControlEvents:UIControlEventTouchUpInside];
button.backgroundColor = [UIColor clearColor];
cell.accessoryView = button; 
```

**checkButtonTapped：事件：方法：**

```
- (void)checkButtonTapped:(id)sender event:(id)event
{
    NSSet *touches = [event allTouches];
    UITouch *touch = [touches anyObject];
    CGPoint currentTouchPosition = [touch locationInView:self.tableView];
    NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint: currentTouchPosition];
    if (indexPath != nil)
    {
        [self tableView: self.tableView accessoryButtonTappedForRowWithIndexPath: indexPath];
    }
} 
```

**附件ButtonTappedForRowWithIndexPath：方法**

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    NSMutableDictionary *item = [dataArray objectAtIndex:indexPath.row];

    BOOL checked = [[item objectForKey:@"checked"] boolValue];

    [item setObject:[NSNumber numberWithBool:!checked] forKey:@"checked"];

    UITableViewCell *cell = [item objectForKey:@"cell"];
    UIButton *button = (UIButton *)cell.accessoryView;

    UIImage *newImage = (checked) ? [UIImage imageNamed:@"unchecked.png"] : [UIImage imageNamed:@"checked.png"];
    [button setBackgroundImage:newImage forState:UIControlStateNormal];
} 
```

我从这个链接中获取了上面的代码：

[在 iPhone 中为 UITableView 实现自定义附件视图](http://www.edumobile.org/iphone/iphone-programming-tutorials/impliment-a-custom-accessory-view-for-your-uitableview-in-iphone/)

**方法二：**

还有一种方法可以使用自定义 tableView 单元格。

我认为您必须制作一个自定义单元格并在单元格的右侧添加一个 imageView。

然后，此 imageView 将保存您想要的图像。

在 didSelectRowAtRowAtIndexPath: 上，您可以根据点击次数添加和删除图像。

如果您需要更多帮助，请告诉我。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T12:06:39.870

看这段代码：

```
- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath { 
...
    NSMutableDictionary *item = [dataArray bjectAtIndex:indexPath.row];
    cell.textLabel.text = [item objectForKey:@"text"];

    [item setObject:cell forKey:@"cell"];

    BOOL checked = [[item objectForKey:@"checked"] boolValue];
    UIImage *image = (checked) ? [UIImage imageNamed:@"checked.png"] : [UIImage imageNamed:@"unchecked.png"];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    CGRect frame = CGRectMake(0.0, 0.0, image.size.width, image.size.height);
    button.frame = frame;
    [button setBackgroundImage:image forState:UIControlStateNormal];

    [button addTarget:self action:@selector(checkButtonTapped:event:)  forControlEvents:UIControlEventTouchUpInside];
    button.backgroundColor = [UIColor clearColor];
    cell.accessoryView = button;
    ...
}

    - (void)checkButtonTapped:(id)sender event:(id)event {
       NSSet *touches = [event allTouches];
       UITouch *touch = [touches anyObject];
       CGPoint currentTouchPosition = [touch locationInView:self.tableView];
       NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint: currentTouchPosition];
       if (indexPath != nil) {
          [self tableView: self.tableView accessoryButtonTappedForRowWithIndexPath: indexPath];
       }
    }

    - (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {
       NSMutableDictionary *item = [dataArray objectAtIndex:indexPath.row];

       BOOL checked = [[item objectForKey:@"checked"] boolValue];

       [item setObject:[NSNumber numberWithBool:!checked] forKey:@"checked"];

       UITableViewCell *cell = [item objectForKey:@"cell"];
       UIButton *button = (UIButton *)cell.accessoryView;

       UIImage *newImage = (checked) ? [UIImage imageNamed:@"unchecked.png"] : [UIImage imageNamed:@"checked.png"];
       [button setBackgroundImage:newImage forState:UIControlStateNormal];
    } 
```

[参考](http://www.edumobile.org/iphone/iphone-programming-tutorials/impliment-a-custom-accessory-view-for-your-uitableview-in-iphone/)