# StackOverflow 问答 12490000-12490999

# c# - LINQ-Entities Group By With Range 变量查询

> ID：12490004
> 
> 赞同：0
> 
> 时间：2012-09-19T07:09:59.540
> 
> 标签：c#, linq, entity-framework, tsql, linq-to-entities

这是我试图将其转换为 LINQ-Entities 查询的 T-SQL ......

```
SELECT  [a].[ModLimit], [b].[NumberOfMods]
FROM    [dbo].[Site][a]
INNER JOIN
(
    SELECT          [SiteId], ISNULL(COUNT(*),0) AS [NumberOfMods]
    FROM            [dbo].[Users][a]
    WHERE           [a].[IsMod] = 1
    GROUP BY        [SiteId]
) [b] ON [a].[SiteId] = [b].[SiteId]
WHERE   [a].[SiteId] = 1 
```

到目前为止我正在使用什么（不编译......）

```
from u in db.Set<User>()
join s in db.Set<Site>() on u.SiteId equals s.SiteId
let x = t.ModLimit
where s.SiteId == 1
group u by u.SiteId into g
select new { g,x}); 
```

想法？

表的缩减结构：

**地点**

*SiteId* int PK

*ModLimit*整数

**用户**

UserId int PK

*SiteId* int FK *IsMod* 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:51:03.713

到目前为止，这是我最好的尝试（您能否提供 dbo.site & dbo.users & 的结构或您期望输入的一些测试数据？）

```
 List<User> users = new List<User>();
            users.Add(new User() { SiteId = 0, IsMod = 1, ModLimit = 3 });
            users.Add(new User() { SiteId = 1, IsMod = null, ModLimit = 2 });
            users.Add(new User() { SiteId = 1, IsMod = 1, ModLimit = 2 });
            users.Add(new User() { SiteId = 1, IsMod = 1, ModLimit = 2 });

            var innerSelect = users
                    .Where(o => o.IsMod != null && o.IsMod > 0)
                    .GroupBy(o => o.SiteId)
                    .Select(o => new User
                     {
                         SiteId = o.Key,
                         Counter = o.Count()
                     })
                     .ToList();

            var result = (from u in users
                          join s in innerSelect on u.SiteId equals s.SiteId
                          where u.SiteId == 1
                          select new
                          {
                              u.ModLimit,
                              NumberOfMods = s.Counter
                          })
                          .Distinct()
                          .ToList(); 
```

# extjs4 - 问题 - 从 extjs 4 中的数据库（MYSQL）动态填充复选框组

> ID：12490005
> 
> 赞同：0
> 
> 时间：2012-09-19T07:10:00.467
> 
> 标签：extjs4

我在 extjs 4 中从数据库（MYSQL）动态填充复选框组时遇到问题。下面是我通过搜索论坛尝试的代码。请告知需要做什么才能使其正常工作。

(i) 我有一个 ArrayStore 如下：

```
 var checkboxArray1 = [];
     var arrayStore=   new Ext.data.ArrayStore({
      autoLoad:false,
      proxy: {
             type: 'rest',
             url: 'xxxxxxx',
             reader: {
                 type: 'json',
                 root: 'doThisStore'
             }  
      },
      fields : ['vcName','vcId'],
      listeners: {                                                                           

             load: function(t, records, options) {                                                  

                 for(var i = 0; i < records.length; i++) {  

                   checkboxArray1.push({name: records[i].data.vcId, boxLabel: records[i].data.vcName});  
                   alert(checkboxArray1[i].name);
                   alert(checkboxArray1[i].boxLabel);
                 }                                                                                  
             }                                                                                      
         }      
     }); 
```

(ii) 我的“字段集”如下：

```
{
                        xtype : 'fieldset',
                        title : "Systems",
                        collapsed:false,
                        checkboxToggle: true,
                        anchor : '100%',
                        defaults : {
                            msgTarget : 'side',
                            allowBlank : true
                        },
                        items:{
                           xtype: 'checkboxgroup',
                         fieldLabel: 'dothis',
                         columns: 3,
                         vertical: true,
                         items: checkboxArray1

                    }}, 
```

感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:37:17.757

首先将 ID 赋予复选框组的项目，然后将该 ID 用作

```
Ext.getCmp('Your Id').add(CheckBoxArray1); 
```

# jquery - 当我单击

> ID：12490008
> 
> 赞同：1
> 
> 时间：2012-09-19T07:10:04.037
> 
> 标签：jquery, dom

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:12:54.640

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:20:48.227

在你的桌子上添加一个“my_table”id并使用它：

```
$(function(){
    $("#my_table").on('click','.close',function(event){
        event.preventDefault();
        $(this).closest('tr').remove();
    });
}); 
```

# javascript - 在 ember.js 中查看处理程序

> ID：12490010
> 
> 赞同：0
> 
> 时间：2012-09-19T07:10:15.220
> 
> 标签：javascript, ember.js

// 我的表单视图

```
App.Form = Em.View.extend({
    templateName:'app/templates/Login/login'    
}); 
```

// 索引.html

```
<script type="text/x-handlebars"> 
    Hello <b>{{App.Value}}</b>  
       <div id="frm">
            {{#view App.Form}}

        {{/view}}
       </div>                   
</script> 
```

//login.handlebars

```
<b>Login Page: </b> 
```

几个问题。

1.  当我加载我的 index.html 时，它不会调用登录把手。我看不到那里的粗体文字。
2.  在我进行 ajax 调用检查我的凭据后，如何将我的用户重定向到另一个视图或页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:16:10.420

```
App.Form = Em.View.extend({
    templateName:'loginTemplate'    
});

<script type="text/x-handlebars" data-template-name="loginTemplate"> 
  <b>Login Page: </b>
</script> 
```

我猜应该这样做...为了重定向到页面，您可以尝试 Ember.Router

# mysql - Codeigniter - Active Records 是否容易受到 SQL 注入的影响？

> ID：12490011
> 
> 赞同：1
> 
> 时间：2012-09-19T07:10:35.980
> 
> 标签：mysql, codeigniter, activerecord, sql-injection

刚刚在 Stack Overflow 上阅读[了这篇](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)文章，因此让我想知道 SQL 注入是否可以通过 CI 中的活动记录进行。

在我项目中的大多数地方，对于用户注册和用户配置文件更新，我都做了这样的 SQL 插入：

**控制器 ：**

```
$name = $this->input->post('name');
$last_name = $this->input->post('last_name');
$age = $this->input->post('dob');

$user_data = array(
    'name' => $name,
    'last_name' => $last_name,
    'age' => $age
);

$this->user_model->add_user_function($user_data); 
```

**模型：**

```
function add_user_function($data)
{
    $this->db->insert('user_table',$data);
    return;
} 
```

就像上面 SO 链接中的示例一样，我的代码是否容易受到 SQL 注入的影响？
如果有可能损害我的系统，您能否举一个具体的例子，如果它存在，我该如何预防。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T07:16:17.653

CodeIgniter 已经为您的案例提供了 2 个安全功能。

1.  用户输入的 XSS 过滤： [输入类](http://codeigniter.com/user_guide/libraries/input.html)的方法有第二个布尔参数，它允许您通过 XSS 过滤器运行输入，以防您没有启用全局 xss 过滤器。

2.  对于 SQL 注入，使用绑定查询和活动记录是安全的，它将使您免于 SQL 注入，因为框架会完成所有转义易受攻击的用户输入的工作。用户报告的活动记录漏洞很少，但是 CodeIgnitor 团队（EllisLabs）在后续版本中迅速修复了这些漏洞

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:14:44.683

CodeIgniter 在使用活动记录而不是运行直接 SQL 查询时会去除引号和易受攻击的脚本。所以不用担心使用活动记录......

`mysql_real_escape_string`并且在生成要运行的 SQL 查询时在内部进行了一些检查。

# html - 每个页面上的代码页眉和页脚或使用包含标签？

> ID：12490012
> 
> 赞同：0
> 
> 时间：2012-09-19T07:10:45.607
> 
> 标签：html, css, design-patterns

这更像是一个“最佳实践”问题，而不是一个编码问题。关于对网站中的页眉/导航和页脚部分进行编码。在每个页面上编码还是使用包含标签更好？

在每一页上编写代码似乎很乏味，并且违反了“永远不要重复自己”的黄金法则，所以使用包含标签似乎是最明显的选择，但我可能是错的。

当谈到网页设计的最佳标准时，我充其量只是平均水平，所以我希望从专业人士那里得到一些意见。

顺便说一句，据我所知，您的开发设置中需要某种“桌面服务器”才能使用包含标签，我直接从桌面工作，然后将无法使用包含标签进行测试，是这对吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:34:53.267

如果你的网站是 PHP 的，那么一定要使用 include 函数来重复内容——不仅仅是页眉/页脚，还有页面中的任何重复模块。

这意味着任何时候你需要更新你的标题，你不需要在每个页面上单独做！

至于在本地工作 - 您可以将 PHP 安装到您的计算机上，并使用本地服务器环境进行测试。如果这看起来令人生畏，那么只需在上传到您的实时网站之前上传到一个测试网站，这样您就可以在那里使用 PHP 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:38:03.307

你不应该重复代码。想象一下，有一天您必须更改标题……您必须对所有页面进行更改！这是绝对不行的。

# c++ - Visual Studio 无法“看到”我包含的头文件

> ID：12490015
> 
> 赞同：46
> 
> 时间：2012-09-19T07:11:18.760
> 
> 标签：c++, visual-studio-2008, include

我在 Visual Studio 2008 中创建了一个空的“演示”项目，并将一些现有项目添加到我的解决方案中。在“Demo”中的 main.cpp 文件中包含“MyHeader.h”（其他项目的头文件）。还在“工具/选项/VC++ 目录/包含文件”部分添加了头文件的路径。但是智能感知说：“在当前源文件的目录或构建系统路径中找不到文件'MyHeader.h'......”

如何解决问题？谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-08-05T21:28:58.100

删除解决方案目录中的 .sdf 文件。它只是 Intellisense 数据库，Visual Studio 将在您下次打开该解决方案时重新创建它。此数据库可能会损坏并导致 IDE 无法找到内容，并且由于编译器会即时为自己生成此信息，因此不会受到影响。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-19T07:14:52.390

如果您选择`Project`然后`All Files`在菜单中，则所有文件都应显示在解决方案资源管理器中，这些文件物理上位于您的项目地图中，但（尚未）包含在您的项目中。如果您在解决方案资源管理器中右键单击要添加的文件，则可以包含它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-05-14T19:07:32.390

刚刚在我身上发生了这种情况，关闭并重新启动计算机后。最终我意识到架构已经从 x64 更改为 ARM。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-15T12:38:24.387

如果只有 IDE 指示找不到包含的文件，但编译成功，则问题只是 IntelliSense 没有完全与最近的更改保持同步。根据我自己的经验，在包含现有项目时，这可能会特别发生。删除在您的解决方案目录中生成的 .sdf 文件（= IntelliSense 数据库）会强制 Visual Studio 重新生成它，以便它再次保持最新状态。只是做一个“干净”可能会做同样的事情，但需要更多时间，因为那时一切都会再次生成。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-24T20:14:13.210

我知道这是一个较老的问题，但以上答案都不适合我。就我而言，问题原来是我有绝对包含路径但没有驱动器号。编译很好，但是当我右键单击并尝试打开它时，Visual Studio 找不到包含文件。将驱动器号添加到我的包含路径可以解决问题。

我绝不会建议在项目文件的任何方面硬编码驱动器号；对于任何永久性情况，可以使用相对路径、宏、环境变量或树的某种组合。但是，在这种情况下，我正在从事一些短期内需要绝对路径的临时项目。无法右键单击打开文件非常令人沮丧，希望这对其他人有帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-03-18T09:51:47.667

在我的情况下，在 Visual Studio 2019 中，我将一个头文件复制到项目目录中，就在其他文件附近。Intellisense 可以看到它，但构建失败。很公平，它实际上并没有添加到项目中。我将它添加为现有项目，但这是 Visual Studio 仍然没有考虑到它的一点。
解决方案：

1.  关闭项目。
2.  删除`.vs`目录。
3.  重新打开项目。现在 Visual Studio 重新创建包含所有内容的目录，它现在可以看到包含的文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-28T16:26:03.393

以我的经验，使用 VS2010，当在编译时找不到包含文件时，进行清理，然后构建通常可以解决问题。编辑器能够打开一个包含文件然后编译器宣布它找不到那个文件的情况并不少见，即使它在屏幕上打开也是如此！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-04-29T08:33:33.197

从 2015 年升级到 Visual Studio 2019 后，我遇到了这个问题。它可以很好地编译项目，但 Intellisense 和 IDE 找不到任何头文件。

该项目只有 Win32/Debug 的有效配置。没有为其他环境正确设置包含路径。尽管 Visual Studio 将当前环境显示为 Win32/Debug，但 Intellisense 一定是在使用其他东西。

将当前环境更改为 x64/Release，然后回到 Win32/Debug 修复它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-03-30T17:27:49.557

如果 Visual Studio 说您错过了当前源文件夹中的某个文件，那么我使用了一种解决方案。只需右键单击要添加的文件并选择`Open Document`，如果它确实不存在，那么您应该会看到类似 的`cannot find file in the source file path = "somewhere in your computer"`内容，那么您可以做的就是先将源文件添加到该路径中，看看它是否有效。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-19T07:13:23.770

尝试将头文件添加到项目文件中。（右键单击项目-> 添加现有文件）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-04T21:30:33.310

这是我解决这个问题的方法。

*   ***转到项目 --> 显示所有文件。***

[![在此处输入图像描述](../Images/7f0ee380336d2b2355dd9b0a7e264381.png)](https://i.stack.imgur.com/qSzZY.png)

*   ***右键单击解决方案资源管理器中的所有文件，然后在要包含的所有文件中单击包含在项目中。***

[![在此处输入图像描述](../Images/5d9537895c7c3a3934bd3aa1ee1d691f.png)](https://i.stack.imgur.com/FwZMM.png)

完毕 ：）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-02T00:20:29.707

如果某个灵魂向下滚动到这个底部，那么对我有用的是***禁用***该`Disable Database`选项，即将它设置为`False`under `Tools|Options|Text Editor|C/C++|Advanced`。出于某种原因，它是`True`为我设置的。

[![在此处输入图像描述](../Images/dd57a676eabdd01d13fa7d95261669c7.png)](https://i.stack.imgur.com/THvXh.png)

根据[docs](https://docs.microsoft.com/en-us/visualstudio/ide/reference/options-text-editor-c-cpp-advanced?view=vs-2019#browsingnavigation)，如果它设置为`True`

> 代码浏览数据库 (SDF) 的所有使用、所有其他浏览/导航选项以及除 #include 自动完成之外的所有 IntelliSense 功能均被禁用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-11-08T15:45:53.270

有同样的问题。仔细检查您是否将包含文件添加到项目的**调试**或**发布**版本中。如果您只为其中一个添加它并为另一个 VS 编译只会装傻而找不到它们。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-30T08:58:07.120

在 Visual Studio 中，单击`Project`>`Rescan Solution`如下图所示重建项目数据库。

[![在此处输入图像描述](../Images/6aaf3a26d0d743e8b14a4ca26c2146a6.png)](https://i.stack.imgur.com/fYrs6.png)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-04-16T09:22:46.137

我遇到了这个问题，但提供的解决方案并没有直接帮助我，所以我分享了我是如何让自己陷入类似情况并暂时解决的。

我在现有解决方案中创建了一个新项目，并从该解决方案中的另一个项目复制并粘贴了 Header 和 CPP 文件，我需要通过 IDE 将其包含在我的新项目中。Intellisense 显示一个错误，提示它无法解析对头文件的引用，并且编译代码也失败并出现同样的错误。

看完这里的帖子后，我用 Windows 文件资源管理器检查了项目文件夹，只找到了**main.cpp**文件。出于某种原因，我对头文件和 CPP 文件的复制和粘贴只是一个*参考*？（我假设）并且没有将文件物理复制到新的项目文件中。

我从 Visual Studio 中的项目视图中删除了文件，并使用文件资源管理器将所需的文件复制到项目文件夹/目录中。然后我通过显示所有文件引用了此处发布的其他解决方案以*“在项目中包含文件”*，这解决了问题。

它归结为文件不在项目文件夹/目录中，即使它们在 IDE 中正确显示。

**请注意**我理解复制代码不是最佳实践，我的情况纯粹是一个学习/爱好项目。在重用来自其他项目的代码时，正确使用 IDE/项目/解决方案设置可能符合我的最大利益以及最终遇到类似情况的任何其他人 - 我仍在学习，总有一天我会解决这个问题的！

# c# - 只有赋值调用递增递减和新对象表达式可以用作语句错误

> ID：12490017
> 
> 赞同：0
> 
> 时间：2012-09-19T07:11:28.773
> 
> 标签：c#, c#-4.0

我想检查我最后一个元素的数组长度是否为 6。在这里我不知道这个数组有多少个 id。我的消息数组是这样的。

> 代码 用户名 id1 id2 id3... 日期

```
 if ([msg_arr.Length - 1] == 6)//YYMMDD  
    {
        strDate = msg_arr[msg_arr.Length - 1].ToString();
    } 
```

但我在这里遇到错误。

> 只有赋值、调用、递增、递减和新对象表达式可以用作语句

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:14:06.377

应该是`if (msg_arr[msg_arr.Length - 1].Length == 6)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:14:15.023

```
 if ([msg_arr.Length - 1] == 6) //this is a problem 
```

您没有指定您访问的数据，我**认为**它必须类似于

```
if (msg_arr[msg_arr.Length - 1] == 6) 
```

**如果**他数组的内容是`string`，请执行以下操作：

*   或者

    int val = int.Parse(msg_arr[msg_arr.Length - 1]);

    如果 (val == 6)

*   或者

    if (msg_arr[msg_arr.Length - 1] == "6")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T10:49:06.683

看来您期望格式为 YYMMDD 的字符串日期，并且您希望确保数组中有六个值。我相信你所希望的：

```
if (msg_arr.Length == 6)//YYMMDD  
{
    strDate = (String.Join("", msg_arr);
} 
```

ToString() 方法只会分配对象的字符串名称，因此 strDate 将具有类似于“System.Int32[]”的值

# python - 一个可以检查分支的python linter/静态检查器

> ID：12490019
> 
> 赞同：2
> 
> 时间：2012-09-19T07:11:36.940
> 
> 标签：python

我特别担心：

**由于分支执行导致的未初始化值：**我知道在 Java 中存在`variable a might not have been initialized`控制流，这可能导致变量无法初始化。

**返回值魔法：**根据分支，该方法可能会返回一个值，或者由于分支未达到返回值而无意返回任何内容。

有没有可以检查分支是否正确的工具？我知道它需要一种静态类型语言来做到这一点，但是 Python 是否有等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:59:24.973

通常的嫌疑人（PyChecker、pylint、pyflakes）都没有处理您提到的“未初始化分支”案例或“返回值”案例。

我在这段代码上测试了它们：

```
x = 1

def foo():
    if False:
        y = 1
    print y     # not defined!

def bar():
    if x == 1:
        return True
    # fall off end 
```

pyflakes 和 PyChecker 报告没有问题，而 pylint 报告了一堆愚蠢的事情（缺少文档字符串，不喜欢我的任何变量名......）。

我认为这两种情况都值得在静态语法检查器工具中实现。我认为它们的计算成本不会那么高，也不会导致很多误报。但是，可能有一些分支总是被合理的语法检查器决定但无法确定（例如，如果您有检查至少存在 1000 个素数的代码，如果存在则使用分支来定义 y）。

# javascript - 使用 ajax 和 window.location 伪造 url 栏

> ID：12490020
> 
> 赞同：2
> 
> 时间：2012-09-19T07:11:38.150
> 
> 标签：javascript, jquery, ajax, window.location

我使用 .load 发出 ajax 请求。它运作良好。但我的网址栏有问题。我想更改网址栏。例如。当 ajax 加载关于/联系页面时。我想将 url 栏更改为 about/contact。

我用过这个。

```
window.location.replace = about/contact; 
```

但现在，他直接重定向到这个页面。但我不希望页面重定向到该 url。我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T07:17:13.857

您可以使用 History API 来做到这一点，虽然[支持还不是普遍](http://caniuse.com/#search=history)的，但在 IE 以外的浏览器中很好。有关它的使用示例：http: [//html5demos.com/history](http://html5demos.com/history)。它将根据需要修改可见 URL，还允许您使用后退按钮返回到以前的状态。

[建议您为此使用history.js](https://github.com/balupton/History.js/)之类的东西，因为它对尚不支持历史 API 的浏览器有相应的行为。它将首先使用 History API，如果不存在将使用[哈希](http://atendesigngroup.com/blog/hashbang-and-pushstate)技术。

如果你想自己动手，那么一定要查看 History API 以及它是如何工作的，这里有一些地方可以开始：[文章 1](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)，[文章 2](http://html5doctor.com/history-api/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:16:58.477

使用 ajax 历史插件，如 jquery-address。

看看这个： [https ://stackoverflow.com/questions/116446/what-is-the-best-back-button-jquery-plugin](https://stackoverflow.com/questions/116446/what-is-the-best-back-button-jquery-plugin)

# xcode - GKsession 将在 10 分钟内完成，有什么办法可以继续更长的时间吗？

> ID：12490022
> 
> 赞同：0
> 
> 时间：2012-09-19T07:11:52.053
> 
> 标签：xcode, background, gksession

我创建了一个应用程序，它将使用后台的 GKsession 通过蓝牙发送数据。正在发送数据，但是，即使我每 30 秒调用一次该功能，数据发送也会完成。有什么办法可以持续更长的时间吗？

或者 Iphone 或 BTM 是否有任何限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:48:35.417

不知道是否有任何强制限制，但最好定义一个 ping 函数以以 15 秒的小间隔向所有连接的对等方广播一条小消息。

# jquery - 剃刀中动态命名的JQuery函数

> ID：12490026
> 
> 赞同：0
> 
> 时间：2012-09-19T07:12:05.990
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, razor

我在 razor 模板中的 asp.net mvc 中有一个函数。我想动态命名我的函数。但我该怎么做？这是我的功能：

```
function ipro-@count() {
                numpro-@count = numpro-@count + 1;
                document.getElementById("numpro-@count").innerHTML = numpro-@count;
            } 
```

count 是一个动态数字。它不适用于函数名称。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T07:28:41.580

如果你这样做会发生什么，需要在变量名周围添加括号

```
 function ipro@(count) () {
                numpro@(count) = numpro@(count) + 1;
                document.getElementById("numpro@(count)").innerHTML = numpro@(count);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:38:30.140

对于这种具体情况，您可以使用简单的解决方法（当 javascript 不太大且不太复杂时）

```
@{
    int count = 3;
}
@helper outputFunction(int count)
{
    @Html.Raw(string.Format("function ipro{0}() {{ numpro-{0} = numpro-{0} + 1; document.getElementById('numpro-{0}').innerHTML = numpro-{0}; }}", count));
}

<!DOCTYPE html>
<html>
<head>

    <title>@ViewBag.Title</title>
</head>
<body>
    <script>
        @outputFunction(count);
    </script>
</body>
</html> 
```

# php - 从php中的表中删除选定的行

> ID：12490028
> 
> 赞同：0
> 
> 时间：2012-09-19T07:12:15.410
> 
> 标签：php

我正在使用代码（粘贴在下面）从表中删除它被`checkbox`. 它正在工作，但它没有从表中删除记录，它只显示`echo`“已成功删除记录。”。

请查看我的代码并建议我进行一些更改。

```
<?php
echo "Hiiiiiiiiii";
include("conn.php");
$sql="select * from test ";

$res=mysql_query($sql) or die(mysql_error());
?>

<form name="form1" method="POST" action="">
    <table width="578" border="1" align="center" id="menu">
    <tr>
    <th></th>
    <th>id</th>
    <th>Name</th>
    <th>email</th>
    <th>phno</th>
 </tr>

<?php
 while($row=mysql_fetch_array($res))
 {
?>

 <tr>

    <td><input name="checkbox[]" type="checkbox" id="checkbox[]" value="<? echo $rows['id']; ?>"></td>
    <td><?php echo $row['id'];?></td>

    <td><?php echo $row['name'];?></td>
    <td><?php echo $row['emailid'];?></td>

    <td><?php echo $row['phno'];?></td>
    <?php
    echo"<td><a href='update.php?id=".$row['id']."'>Update</a></td>";
    ?>
 <?php
  }
 ?>  
 <tr><td><input type="submit" name="delete" value="Delete" id="delete"></td></tr></tr></table>

 <?php
// Check if delete button active, start this
$count = mysql_num_rows($res);
echo "$count";

if(isset($_POST['delete']))
    {
         $delete_id = $_POST['checkbox'];
         $id = count($delete_id );
         if (count($id) > 0)
          {
             foreach ($delete_id as $id_d)
             {
                $sql = "DELETE FROM `test` WHERE id='$id_d'";
                $delete = mysql_query($sql);
            }
        }
        if($delete)
        {
            echo $id." Records deleted Successfully.";
        }
    }
>? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:25:47.910

添加`error_reporting(E_ALL);`到文件的顶部。现在您将能够看到所有错误。 [http://php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)

此外，用于`var_dump()`检查变量中的实际内容。跑步时，`var_dump($_POST);`您可以清楚地看到帖子中的实际内容。 [http://php.net/manual/en/function.var-dump.php](http://php.net/manual/en/function.var-dump.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:22:16.957

在选择记录之前放置删除代码，然后只有您可以看到数据库中可用的实际记录。

```
 <?php
    echo "Hiiiiiiiiii";
    include("conn.php");

    if(isset($_POST['delete']))
        {
             $delete_id = $_POST['checkbox'];
             $id = count($delete_id );
             if (count($id) > 0)
              {
                 foreach ($delete_id as $id_d)
                 {
                    $sql = "DELETE FROM `test` WHERE id='$id_d'";
                    $delete = mysql_query($sql);
                }
            }
            if($delete)
            {
                echo $id." Records deleted Successfully.";
            }
        }

    $sql="select * from test ";

    $res=mysql_query($sql) or die(mysql_error());
    ?>
    <form name="form1" method="POST" action="">
        <table width="578" border="1" align="center" id="menu">
        <tr>
        <th></th>
        <th>id</th>
        <th>Name</th>
        <th>email</th>
        <th>phno</th>
     </tr>

<?php
 while($row=mysql_fetch_array($res))
 {
?>

 <tr>

    <td><input name="checkbox[]" type="checkbox" id="checkbox[]" value="<? echo $rows['id']; ?>"></td>
    <td><?php echo $row['id'];?></td>

    <td><?php echo $row['name'];?></td>
    <td><?php echo $row['emailid'];?></td>

    <td><?php echo $row['phno'];?></td>
    <?php
    echo"<td><a href='update.php?id=".$row['id']."'>Update</a></td>";
    ?>
 <?php
  }
 ?> 
 <tr><td><input type="submit" name="delete" value="Delete" id="delete"></td></tr></tr></table>

 <?php
// Check if delete button active, start this
$count = mysql_num_rows($res);
echo "$count";
>? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T07:19:33.160

```
if(isset($_POST['delete'])){
    $delete = false;
    $ids = array();
    foreach($_POST['checkbox'] as $val){
        $ids[] = (int) $val;
    }
    $ids = implode("','", $ids);
    $sql = "DELETE FROM `test` WHERE id IN ('".$ids."')";
    $delete = mysql_query($sql);
    $id = mysql_affected_rows();
    if($delete){
        echo $id." Records deleted Successfully.";
    }
} 
```

你的复选框也应该有：

```
<input name="checkbox[]" type="checkbox" id="checkbox[]" value="<?php echo $row['id']; ?>"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-06T16:21:55.193

```
<td><input name="checkbox[]" type="checkbox" id="checkbox[]" value="<? echo $rows['id'];?>"></td>
<td><?php echo $row['id'];?></td> 
```

需要进行如下更改才能完美运行：

```
<td><input name="checkbox[]" type="checkbox" id="checkbox[]" value="**<?php** echo $rows['id']; ?>"></td> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T07:55:17.593

你应该把这段代码移到你的代码`include("conn.php");`下面

```
if (isset($_POST['delete'])) {
    $delete_id = $_POST['checkbox'];
    $id        = count($delete_id);
    if (count($id) > 0) {
        foreach ($delete_id as $id_d) {
            $sql    = "DELETE FROM `test` WHERE id='$id_d'";
            $delete = mysql_query($sql);
        }
    }
    if ($delete) {
        echo $id . " Records deleted Successfully.";
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T07:19:28.720

输出id的代码中有一个错字：

```
... value="<? echo $rows['id']; ?>"> 
```

它应该是

```
... value="<? echo $row['id']; ?>"> 
```

请注意，您的代码也容易受到[SQL 注入](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php "SQL注入")攻击。您应该检查 POST 请求中的 id 是否真的是整数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-19T07:20:11.480

```
<? echo $rows['id']; ?> 
```

这里没有 $rows 删除 s put

```
<? echo $row['id']; ?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-19T07:21:38.620

您应该将复选框命名为

```
name="checkbox[<?php echo $row['id'] ?>]" 
```

然后当你试图删除

```
foreach ($_POST['checkbox'] as $id => $delete) {
    // delete id
} 
```

您通过计数选择 id 的方式相当尴尬，您也只删除了 1 行，这显然不存在，因为计数不是 id。此外，复选框的值旨在指示复选框是否被选中，它通常不包含值，通常的方法是使名称包含复选框的实际含义。

# mysql - 如何在自引用表中添加记录？

> ID：12490031
> 
> 赞同：2
> 
> 时间：2012-09-19T07:12:31.347
> 
> 标签：mysql, sql, database, self-referencing-table

我是 MySql 的菜鸟。我想创建以下自引用表：

```
EMPLOYEE
+-----+------+------+
|Name |E-ID  |M-ID  |
+-----+------+------+
|ABC  |12345 |67890 |
|DEF  |67890 |12345 |
+-----+------+------+ 
```

我使用以下命令：

```
CREATE TABLE EMPLOYEE (
    NAME VARCHAR(20) ,
    E-ID CHAR(6) NOT NULL ,
    M-ID CHAR(6) NULL ,
    PRIMARY KEY (E-ID) ,
    FOREIGN KEY (M-ID) REFERENCES EMPLOYEE(E-ID)
    ); 
```

现在我的问题是，如何输入这两条记录？我的意思是，每次外来约束都会失败。我尝试输入：

```
INSERT INTO EMPLOYEE VALUES('12345','67890'); 
```

我也试过：

```
INSERT INTO EMPLOYEE VALUES('12345','67890'),('67890','12345'); 
```

以上两个命令都失败了。给出错误：

> 错误 1452 (23000)：无法添加或更新子行：外键约束失败 BLAH BLAH

伙计们，实际上我正在尝试实现以下 ppt 的第 25 张幻灯片中给出的表格：[关系数据模型和关系数据库约束](http://cs.gmu.edu/~aobaidi/fall_05/index_files/Lectures/ENCh05.ppt)

约束是：

1.  EMPLOYEE 的 SUPERSSN 引用 EMPLOYEE 的 SSN。
2.  DEPARTMENT 的 MRSSN 引用 EMPLOYEE 的 SSN。
3.  EMPLOYEEE 的 DNO 引用 DEPARTMENT 的 DNumber。

创建表后，如何添加记录？它总是会失败外键约束。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T07:24:18.583

由于 MySQL 不支持可延迟约束（这是此类问题的“自然解决方案”），因此您需要分两步执行此操作；

```
INSERT INTO employee (name, `E-ID`) values ('Arthur', '123456');
INSERT INTO employee (name, `E-ID`) values ('Ford', '67890');
UPDATE employee 
    SET `M-ID` = '67890' 
WHERE `E-ID` = '123456';

UPDATE employee 
    SET `M-ID` = '123456' 
WHERE `E-ID` = '67890'; 
```

不过，您的循环引用对我来说确实很奇怪。一名雇员是一名雇员的经理，而另一名雇员又是他的经理？

请允许我对您的表定义发表两条评论：

*   避免使用需要引用标识符的特殊字符的列（或表名）。从长远来看，使用`E_ID`代替会为您节省一些麻烦`E-ID`
*   如果您的员工 ID 可以少于 6 个字符，那么您很可能希望使用`VARCHAR(6)`而不是`CHAR(6)`由于数据类型的值填充`CHAR`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-02T01:59:07.223

这里有很好的答案，但我想我会指出快速和肮脏的：

```
SET FOREIGN_KEY_CHECKS = 0; 
INSERT INTO EMPLOYEE VALUES('12345','67890'),('67890','12345');
SET FOREIGN_KEY_CHECKS = 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T07:17:48.873

它显然会失败，因为表是空的。

```
INSERT INTO EMPLOYEE VALUES('12345','67890'); 
```

由于`M-ID`取决于`E-ID`. 删除约束，以便您可以插入记录。您做的最好的事情是创建另一个表`M-ID`并将其引用到`Employee`表。

# android - 从小部件启动 Android 应用程序

> ID：12490033
> 
> 赞同：0
> 
> 时间：2012-09-19T07:12:40.777
> 
> 标签：android, android-widget

下面是从小部件启动应用程序的代码......它不起作用，有什么建议吗？谢谢你

```
package com.acd.widget;
import android.appwidget.AppWidgetProvider;
import android.content.Intent;

public class AcdWidget extends AppWidgetProvider {
   String packageName = "air.kwd.acdsummit";
   String className = "com.package.MainActivity";
   Intent intent = new Intent(Intent.ACTION_MAIN);
   intent.setComponent(new ComponentName(packageName, className));
   startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:05:08.763

您需要在某些事件侦听器（如 OnClick）中调用语句。您在方法之外调用它们，其中需要声明（字段、方法）。

阅读[App Widgets](http://developer.android.com/guide/topics/appwidgets/index.html#AppWidgetProvider)开发人员指南，了解有关如何实现所需功能的更多信息。

# c++ - 正则表达式。查找所有非拉丁字符的单词

> ID：12490035
> 
> 赞同：0
> 
> 时间：2012-09-19T07:12:45.823
> 
> 标签：c++, c, regex, locale

如何使用 regex.h 库找到所有包含至少一个非拉丁字母（阿拉伯文、中文...）的单词？

城市دبي

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:13:05.767

怎么样：

```
(?=\pL)(?![a-zA-Z]) 
```

这将匹配任何非拉丁字母的字母：

```
not ok - cityدبي
ok - city
not ok - دبي 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:07:51.170

试试这个 ：

```
[a-zA-Z]*[^A-Za-z \d]+[a-zA-Z]* 
```

含义：一个或多个非拉丁字母在一个或多个拉丁字母之前或之后，即包含至少 1 个非拉丁字符的单词。查看带有一些随机文本的演示： [http ://regexr.com?326s3](http://regexr.com?326s3)

您可能需要根据您的需要调整此正则表达式，并根据您的输入包括数字、特殊字符、单词边界等内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T08:06:23.543

如果不匹配就使用`[^a-zA-Z]` ，它应该包含一个国际字符......

# python - Openerp 自定义报错 - 只能解析字符串

> ID：12490041
> 
> 赞同：0
> 
> 时间：2012-09-19T07:13:02.000
> 
> 标签：python, xml, openerp

我创建了 openerp 自定义报告，但是当我尝试打开它时，我收到了这个错误：

只能解析字符串

```
(<type 'exceptions.ValueError'>, ValueError(u'can only parse strings',), <traceback object at 0x28c908c0>) 
```

有谁知道这意味着什么以及问题可能出在哪里？我读到 rml 文件名或路径可能有问题。我检查了它，但它似乎是正确的。

所以没有人知道这样的错误意味着什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:51:11.330

我绕过了这个没有翻译文件的安装报告，然后我使用管理菜单安装了翻译文件。至于现在，这是我设法打印此报告的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:05:43.323

仔细检查您的报告定义和调用脚本。很可能您的“report.RML”名称或 RML 文件的路径不匹配。

如果它不能解决您的问题，请显示您的 python 和 xml 代码

# mysql - LOAD DATA INFILE 正在跳过第一列

> ID：12490047
> 
> 赞同：0
> 
> 时间：2012-09-19T07:13:21.980
> 
> 标签：mysql, load-data-infile, phpquery

以下是跳过表中的第一列

```
$load ="LOAD DATA INFILE '$inputFile' INTO TABLE $tableName FIELDS TERMINATED BY ',' LINES TERMINATED BY '\r\n' IGNORE 1 LINES"; 
```

infile 在适当的列中有适当的数据

怎么了 ？

# yii - 当 dataProvider 与 CSqlDataProvider 一起使用时 Yii-CGridView 列链接是否有效？

> ID：12490053
> 
> 赞同：2
> 
> 时间：2012-09-19T07:13:45.813
> 
> 标签：yii

我在 CGridView 中使用的代码在列值的 $data->gen_id 和 $data->erc_gen 中为我提供了一个空值，当我使用浏览器检查器进行检查时，它给了我`<a href="/ekportal/erc/index.php?r=ercGen/update&amp;id="></a>`

ercgen/admin 代码如下：

```
$qryTmp = 
    "SELECT gen_id, erc_ref,B.complete_name sales_executive,C.description type,D.client_name client_id,event_name, E.status_desc erc_status ".
    "FROM erc_gen A, Users B, erc_type C, clients D, erc_status E ".
    "WHERE A.sales_executive = b.user_id ".
    "AND A.type = C.typ_no ".
    "AND A.client_id = D.client_id ".
    "AND A.erc_status = E.id ".
    "AND sales_executive = '$user_id' ".
    "AND erc_status = '1' ";
$count = Yii::app()->db->createCommand('SELECT COUNT(*) FROM ('.$qryTmp.') X')->queryScalar();
$dataProvider=new CSqlDataProvider($qryTmp, array(
'totalItemCount'=>$count,
'sort'=>array(
    'attributes'=>array(
         'gen_id','erc_ref', 'sales_executive', 'type','client_id','event_name','erc_status'
    ),
),
'pagination'=>array(
    'pageSize'=>10,
),
));

//CGRIDVIEW
$this->widget('zii.widgets.grid.CGridView', array(
'dataProvider'=>$dataProvider,
'pager'=>array(
    'header'=>'',
    'firstPageLabel'=>'&lt;&lt;',
    'prevPageLabel'=>'&lt;',
    'nextPageLabel'=>'&gt;',
    'lastPageLabel'=>'&gt;&gt;',
),   
'columns'=>array(
    array(
        'header'=>'#',
        'value'=>'$this->grid->dataProvider->pagination->currentPage * $this->grid->dataProvider->pagination->pageSize + ($row+1)',
    ),
    array(
        'header'=>'Reference Number',
        'name'=>'erc_ref',
        'type'=>'raw',
        'value'=>'CHtml::link($data->erc_ref,Yii::app()->createUrl("ercGen/update",array("id"=>"$data->gen_id")))',
    ), 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:38:19.383

我在[这里找到了答案](http://www.yiiframework.com/forum/index.php/topic/15669-problem-with-cgridview-columns-when-changing-data-provider/)

只需更改`$data->erc_ref`为`$data['erc_ref']`和`$data->gen_id``$data['gen_id']`

# html - 如何在鼠标悬停时更改 div 背景图像

> ID：12490054
> 
> 赞同：2
> 
> 时间：2012-09-19T07:13:52.447
> 
> 标签：html, css

> **可能重复：**
> [有没有办法将鼠标悬停在一个元素上并影响另一个元素？](https://stackoverflow.com/questions/6867257/is-there-any-way-to-hover-over-one-element-and-effect-a-different-element)

如何*使用 css*更改 div 背景图像，将鼠标悬停在另一个 div 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:17:48.600

这将实现您正在寻找的东西，尽管有更好的方法可以做到这一点，`background-position`例如使用精灵。然而：

你的 HTML

```
<a class="selector">My Link</a> 
```

你的 CSS

```
.selector {
    background-image:url(myImage.jpg);
}

.selector:hover {
    background-image:url(myHoverImage.jpg);
} 
```

**jQuery解决方案**

HTML

```
<a class="selector" data-type="bgChanger1">
    My Link
</a>

<div data-type="bgChanger1">
    ...
</div> 
```

查询

```
$(document).ready(function()
{
    var hoverElement = $('.selector'),

        dataType = hoverElement.attr('data-type'),

        linkedDiv  = $('div[data-type="' + data-type + '"]');

    hoverElement.hover(function(e)
    {
        e.preventDefault()

        linkedDiv.css('background-image', 'hoverImage.jps');
    },
    {
        linkedDiv.css('background-image', 'normalImage.jpg');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:45:45.113

使用您提供的标记，这确实可以单独使用 CSS：

```
<a>
    <img src="http://placehold.it/100x100" /> 
    <div> 
    </div>
</a>​ 
```

当锚点悬停时，您可以使用`:hover`伪选择器选择 div

```
a:hover div
{
    background-image: url(http://placehold.it/400x400);
} 
```

当锚点悬停时，这将改变 div 的背景。这并非在所有情况下都有效，您必须了解元素的关系并使用适当的选择器。如果元素没有关系，则必须使用 Javascript（或其库之一。）

[http://jsfiddle.net/Kyle_Sevenoaks/fPGU3/](http://jsfiddle.net/Kyle_Sevenoaks/fPGU3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T07:29:51.397

您可以使用 jquery 来执行此操作。

您的标记：

```
<div id="div1"></div>
<div id="div2"></div> 
```

你的脚本：

```
$("#div1").mouseover( function() {
   $("#div2").css("background-image", "url('image.png')");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T07:52:19.253

只需添加一个 jquery 脚本，如下所示：

```
 $(document).ready(function() {
    $('#div1').hover(function(){
      $('#div2').css("background","url(image_url)");
    });
 }); 
```

# c# - iTextSharp - 从 pdf 中读取证书

> ID：12490061
> 
> 赞同：1
> 
> 时间：2012-09-19T07:14:13.770
> 
> 标签：c#, itextsharp, x509certificate

继我在这篇文章[read-certificate-from-pdf](https://stackoverflow.com/questions/12477580/read-certificate-from-pdf)上提出的问题之后，我正在使用 SignCertificateChain 来实现所有关于 pdf 签名的证书链。

但是，我注意到课程只返回一个项目（我的证书），相反，如果我用 adobe acrobat 打开同一个文档，我可以阅读 2 个证书（我的证书和关于谁释放我的证书）。

我在发什么东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:36:56.537

如果没有样本 PDF，很难为您提供帮助。我目前正在编写有关此主题的（基于 Java 的）文档，但无法重现您的问题：http: [//itextpdf.com/book/digitalsignatures](http://itextpdf.com/book/digitalsignatures)请参阅第 5 章处理证书验证。

# android - 将 Facebook 集成到 Android 应用程序

> ID：12490063
> 
> 赞同：0
> 
> 时间：2012-09-19T07:14:17.353
> 
> 标签：android, facebook

我在这里有一个简单的问题。将 FB sdk 集成到 android 应用程序需要什么。

我可以在网页视图中打开 facebook url 并登录，然后在 FB 上做任何事情。那么 FB 需要与我的应用程序集成的场景是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:25:03.397

使用 Facebook sdk，您可以将照片直接上传到您的 Facebook 相册，还可以获得所有用户的喜欢、朋友等等。

与使用 webview 相比，使用 sdk 为您的应用程序用户节省了时间——他不需要每次输入他的个人资料（使用 sso - 单点登录）或任何其他需要 Facebook 的东西时都登录。

就我而言，我使用我的应用页面直接从我的应用激活原生 Facebook 应用。在我看来，如果您不需要更复杂的东西，只需显示页面，您就可以使用它。

如果没有本机 Facebook 应用程序，请使用用户浏览器激活它（捕获块）。

```
try{

Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("fb://profile/" + PROFILE_FACEBOOK_APP_ID));
startActivity(intent);

}catch(Exception e){

startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.facebook.com/UserNamePage")));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:34:43.117

通常，当开发者想要代表用户发帖、直接将图片添加到指定相册、获取用户的电子邮件地址等时，会使用集成。

这些可以在用户第一次授权应用程序时完成，他们也授权权限。

它也被视为一种营销工具，因为所有帖子都会通过 (yourAppName) 说，因此您可以获得一些在线形象。

就像 Ofir A 说的那样，这对用户来说是节省时间的，因为他们只需要登录一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:07:56.137

嗨，为什么您使用 facebook 链接调用 webview。您应该使用适用于 Android 的 FaceBook Native Sdk。与 webview 相比，这可以提供更好的用户体验。[参考 Facebook 集成](https://developers.facebook.com/docs/mobile/android/build/#register)

# objective-c - 如何使用 NSWindowController 在标准应用程序中显示窗口？

> ID：12490064
> 
> 赞同：5
> 
> 时间：2012-09-19T07:14:16.873
> 
> 标签：objective-c, xcode, cocoa, nib, nswindowcontroller

我使用 Xcode 模板创建了一个新的空白标准应用程序。删除了 MainMenu.xib 中的窗口，我用 xib 创建了一个新的自定义 NSWindowController 子类。

它们被命名为“WYSunFlowerWindowController.h”和“WYSunFlowerWindowController.m”。

然后我附加如下初始化函数：

```
- (id)init
{
    NSLog(@"init()");

    return [super initWithWindowNibName:@"WYSunFlowerWindowController" owner:self];
} 
```

我的 WYAppDelegate.m 文件如下所示：

```
static WYSunFlowerMainWindowController* windowController = nil;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    if (windowController == nil) {
        windowController = [[WYSunFlowerMainWindowController alloc] init];
    }
    [[windowController window] makeKeyAndOrderFront:windowController];
} 
```

我有一个问题，在我启动应用程序后，窗口无法自行显示。谁能告诉我为什么？我的代码有什么问题吗？

我是 Objective-C 和可可的新手。所以我想我可能犯了一个愚蠢的错误，我自己无法弄清楚。

更新：

这是我的项目来源。请看看并帮助我弄清楚我的错误是什么。</p>

[https://dl.dropbox.com/u/3193707/SunFlower.zip](https://dl.dropbox.com/u/3193707/SunFlower.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:41:16.580

在您的 init 方法中，我认为您必须先将 self 设置为 super init，然后才能返回 self。

```
-(id)init
{
    NSLog (@"init()");
    self = [super initWithWindowNibName:@"WYSunFlowerWindowController" owners:self];
    return self;
} 
```

**编辑**：

尝试替换`makeKeyAndOrderFront:`为`[windowController showWindow:self]`

然后，如果这仍然不起作用，请检查您的窗口控制器 xib，确保文件所有者设置为 WYSunFlowerWindowController 并且 IBOutlet 窗口（在 NSWindowController 中声明）已连接到窗口。

**编辑2：**

在控制器中注释掉 @property 和 @synthesize 窗口是诀窍。不要重新声明已经在超类中预定义的 get 和 setter。

# process - 想要从 Adob e AIR 中调用已经运行的本机进程

> ID：12490065
> 
> 赞同：2
> 
> 时间：2012-09-19T07:14:22.897
> 
> 标签：process, air, adobe, native

我想要实现的是从 Adob​​e AIR 中调用已经运行的本机进程。实际上，在 Adob​​e AIR 中，我想触发一些已经运行的本地进程，以便它（本地进程）可以根据输入采取进一步的行动。

我从 NativeProcess 类中了解到它启动了一个新的本机进程。那么如果该进程已经在操作系统上运行会发生什么呢？adobe air 会与已经运行的进程交互，还是会启动一个独立于另一个已经运行的新进程？

感谢您的帮助。如果我不够清楚，请告诉我。

谢谢你。

# android - 我可以在android中使用为ios创建的sqlite数据库吗？

> ID：12490072
> 
> 赞同：1
> 
> 时间：2012-09-19T07:14:49.123
> 
> 标签：android, ios, string, sqlite

我想访问存储在为 ios 应用程序创建的 sqlite 数据库中的字符串文件。任何建议的方法来做到这一点？我已经搜索了整个网络，但没有找到任何这样做的人。我知道可以将 plist 文件转换为 xml 文件，但是将来我正在开发的应用程序将从服务器获取所有资源（包括字符串）。

我希望有人可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:48:17.670

您可以将 SQLite 数据库文件作为资产包含在您的应用程序中，然后像 Android 中的任何其他 SQLite 数据库一样使用它。

然后您提到您将从服务器获取资源，我从您的问题中假设数据当前位于 pLists 中，所以我认为可能有两个问题合二为一？

您可能会考虑使用 JSON，在许多情况下，它比解析 XML 快得多。我最近使用“Sublime Text”将一堆 plist 转换为 JSON。它做得很好。我的应用程序的 v1 解析了 pLists。我尝试了 SAX、DOM 和拉解析器来找到最快的（在这种情况下为 SAX），但是在转换为 JSON 之后，应用程序的 v2 快得多。我没有测量它，因为我不需要。用户体验就够了。以前我必须在一个特别大的 pList 上使用加载进度对话框，使用新的 JSON 解析器，UI 始终是响应式的。

# ruby-on-rails-3 - Rails 3：如何使用 Rails 在数据库中插入记录

> ID：12490076
> 
> 赞同：11
> 
> 时间：2012-09-19T07:14:53.633
> 
> 标签：ruby-on-rails-3

我是 Rails 新手，我正在努力学习这项技术，所以如果问题很愚蠢，请原谅。

我正在使用 Rails 3 。

请让我知道如何在数据库中插入记录。

我正在使用 postgresql，下面是学生表的表结构。

```
SELECT column_name FROM information_schema.columns WHERE table_name ='Students';

 column_name
-------------
 id
 name
 age
 description
(4 rows) 
```

**这是我的控制器文件 student_controller.rb**

```
class StudentController < ApplicationController

  def new
  end

end 
```

**这是我的模型文件 student.rb**

```
class Student < ActiveRecord::Base

end 
```

**这是我在 \app\views\student\new.html.erb 下的视图文件**

```
<h1>BookController#new</h1>
<form>
  Id: <input type="text" name="id" /><br />
 Last Name: <input type="text" name="lastname" />
  Age: <input type="text" name="age" />
  Desciption: <input type="text" name="description" />
</form> 
```

当我访问`http://localhost:3000/student/new`

请让我知道如何在数据库中插入记录？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T10:17:24.353

你了解 RESTful 吗？我假设您知道它，除非您可以在 rails guide 中找到它（在表单标签中，您必须添加`@student,:action => :new, :method => :post`）要添加新记录，只需键入`Student.create(:name=> "a", :age => 2)` 此语句由 2 个句子组成

```
object = Student.new(:name => "a", :age => 2)
object.save 
```

我建议您`rails generate scaffold Student`改用创建这样的所有内容。然后，在控制器，视图中阅读这些生成代码，您会非常深刻地理解！:) P/s：我也是业余爱好者：D

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T07:25:47.710

首先，您应该使用 rails helper 方法`form_for`来生成构建表单。按照[**这个链接**](http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for)。在您的模型中，您应该将学生数据作为散列接收到名为`student`. 所以在你的控制器中它会像

```
def create
    @student = Student.new(params[:student])
    respond_to  do |format|
          .. ... ...
          #handle the response
    end
end 
```

这是一个快速浏览的示例`comments_controller.rb`文件。[https://gist.github.com/3748175](https://gist.github.com/3748175)

**但最重要的是！！**

由于您对这项技术完全陌生，我建议您制作一个示例 rails 应用程序的脚手架并检查自动生成的代码。

```
# run this command in your command line to generate the codes
rails generate scaffold Student name:string age:integer description:text 
```

[**在这里**](http://guides.rubyonrails.org/getting_started.html#getting-up-and-running-quickly-with-scaffolding)获得更多见解。

**一些最有用的链接：**

*   [http://apidock.com/rails](http://apidock.com/rails)
*   [http://guides.rubyonrails.org](http://guides.rubyonrails.org)
*   [只是初学者的另一个资源](http://coding.smashingmagazine.com/2009/03/27/ultimate-beginners-guide-to-ruby-on-rails/):)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T07:33:13.140

Rails 是一个复杂的框架。这并不意味着它很难（即使有时很难），而是有很多主题可以让你掌握。您绝对应该阅读一个教程来帮助您入门：官方 Rails 指南[“入门”](http://guides.rubyonrails.org/getting_started.html)是让自己沉浸在 Rails 中的一种非常体面的方式。

在那之后，你会得到你的问题的答案，但也有更多的答案……可能还有更多的问题。

# android - 广播接收器在启动时自动触发

> ID：12490081
> 
> 赞同：2
> 
> 时间：2012-09-19T07:15:07.530
> 
> 标签：android, broadcastreceiver

我`BroadcastReceiver`在我的主要活动中注册了一个。活动在其中一个选项卡中发送一个粘性以触发广播接收器（`TabActivity`应用程序）。

一切正常，但是当我重新启动应用程序时，粘性会自动发送（不是由用户触发）并打开视图。

我的问题是：这怎么可能？我是不是误会了什么？我该如何解决？

MainActivity: OnCreate:

```
 registerReceiver(openOutgoingCall, new IntentFilter("OPENOUTGOINGCALL")); 
```

广播接收器：

```
private BroadcastReceiver openOutgoingCall = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {

            Bundle extras = intent.getExtras();
            if(extras.isEmpty() == false) {
                HashMap<String,String> callData = (HashMap<String, String>) extras.get("callData");
                openOutgoingCall(callData); 
            }

        }
    }; 
```

TabHost 内的活动

```
public void openCall(View view) {
    Intent i = new Intent("OPENOUTGOINGCALL");
    i.putExtra("callData", detailInfo);
    sendStickyBroadcast(i);    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:36:22.780

粘性广播应该保留（即使它们被接收），以便之后也可以检索它们。也许您应该尝试使用以下简单的广播方式：

```
sendBroadcast(i); 
```

读[这个](https://stackoverflow.com/a/2584729/966550)。

# dynatree - 使用延迟加载扩展密钥路径

> ID：12490082
> 
> 赞同：2
> 
> 时间：2012-09-19T07:15:25.340
> 
> 标签：dynatree, jquery-dynatree

我有一棵包含多个项目和多个级别的完整树，该树是使用 ajax 调用构建的并使用惰性节点

所以现在我想添加这个函数，这样我的树就可以加载和选择项目，如果我给出完整的路径，但在我可以选择项目之前，我需要确保项目是用延迟加载加载的，这样我才能访问它。

我找到了函数.loadKeypath（），所以为了测试我检索到我的节点的完整路径

```
node.getKeyPath(); 
```

所以路径是/12/16/17/18

所以我想我应该在加载 ajax 数据后放置这段代码

```
onPostInit: function(isReloading, isError){
                $("#tree").dynatree("getTree").loadKeyPath("/12/16/17/18", function(node, status){
                    if(status == "loaded") {
                        // 'node' is a parent that was just traversed.
                        // If we call expand() here, then all nodes will be expanded
                        // as we go
                        node.expand();
                    }else if(status == "ok") {
                        // 'node' is the end node of our path.
                        // If we call activate() or makeVisible() here, then the
                        // whole branch will be exoanded now
                        node.activate();
                    }else if(status == "notfound") {
                        var seg = arguments[2],
                            isEndNode = arguments[3];
                    }
                });
            } 
```

但是现在我在控制台中收到了这个警告：

```
Node not found: 12 jquery.dynatree.js:49 
```

这是完整的日志

```
9:12:27.862 - Dynatree._create(): version='$Version: 1.2.0$', debugLevel=2\. jquery.dynatree.js:52
9:12:27.865 - DynaTree.persistence: 
Object
 jquery.dynatree.js:52
9:12:27.867 - Dynatree._load(): read tree structure... jquery.dynatree.js:52
9:12:27.868 - Dynatree._init(): send Ajax request... jquery.dynatree.js:52
9:12:27.869 - Class.create.removeChildren(false) jquery.dynatree.js:52
9:12:27.876 - Dynatree._load(): render nodes... jquery.dynatree.js:52
9:12:27.877 - Dynatree._load(): bind events... jquery.dynatree.js:52
9:12:27.885 - Dynatree._load(): postInit... jquery.dynatree.js:52
9:12:27.887 - Dynatree._init(): done. jquery.dynatree.js:52
9:12:27.889 - ui.dynatree._init() was called; no current default functionality. jquery.dynatree.js:52
9:12:29.483 - Removed leading root key. jquery.dynatree.js:52
9:12:29.484 - Class.create._loadKeyPath(12/16/17/18) jquery.dynatree.js:52
9:12:29.484 - Node not found: 12 jquery.dynatree.js:49
9:12:29.485 - trigger nodeLoaded.dynatree.tree._1 jquery.dynatree.js:52
9:12:29.485 - dtnode._expand(true) IGNORED - 
Class.create
 jquery.dynatree.js:52 
```

那么我如何加载嵌套在其他节点中的节点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T06:45:39.000

这是供将来参考的答案

经过一些调试和 dynatree 开发人员的帮助，我们想出了一个解决方案，如果你想加载一个键路径，请使用字符串而不是整数作为键。

代替

```
 "icon": false,
        "checkbox": false,
        "title": "xxxxxxxx",
        "key": 23,
        "type": "child" 
```

采用

```
 "icon": false,
        "checkbox": false,
        "title": "xxxxxxxx",
        "key": "23",
        "type": "child" 
```

这样 loadkeypath 函数将拾取正确的路径！

# sql-server-2008-r2 - 不确定如何将此特定插入到 sql 表中

> ID：12490085
> 
> 赞同：1
> 
> 时间：2012-09-19T07:15:36.073
> 
> 标签：sql-server-2008-r2

我有这个脚本：

```
 SELECT 'pro' as descript, COUNT(*) as cnt FROM Trade.TradesMen where TradesManAccountType_Value = 2 AND HasTradeListing = 1
 UNION ALL

 SELECT 'std' as descript, COUNT(*) as cnt FROM Trade.TradesMen tm
 INNER JOIN Membership.Members m ON m.MemberId = tm.MemberId
 INNER JOIN aspnet_Membership am ON am.UserId = m.AspNetUserId
 WHERE tm.TradesManAccountType_Value = 1 AND tm.HasTradeListing = 1 AND am.IsApproved = 1

 UNION ALL

 SELECT 'listed' as descript, COUNT(*) as cnt FROM Trade.TradesMen where HasTradeListing = 1

 UNION ALL

 SELECT 'all' as descript, COUNT(*) as cnt FROM Trade.TradesMen
 insert into Admin.VersionHistory values(4,cnt,CURRENT_TIMESTAMP) //is NOT correct 
```

这会产生：

```
 1     pro          32549
 2     std          13096
 3     listed   230547
 4     all          231638 
```

我想将以上内容作为行添加到我的表中：Admin.VersionHistory 具有列 VersionHistory 类型 int auto-increment 并且是 ID，Version 类型为 varchar(50) 和数据时间戳

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:23:07.477

（更新了来自 OP 的新信息）
从我的脑海中，它看起来像这样。

```
INSERT INTO Admin.VersionHistory (Version, NumberOf, DateAndTime)
SELECT descript, CAST(cnt AS VARCHAR), SYSDATE
FROM
(
SELECT 'pro' as descript, COUNT(*) as cnt FROM Trade.TradesMen where TradesManAccountType_Value = 2 AND HasTradeListing = 1

UNION ALL

SELECT 'std' as descript, COUNT(*) as cnt FROM Trade.TradesMen tm
INNER JOIN Membership.Members m ON m.MemberId = tm.MemberId
INNER JOIN aspnet_Membership am ON am.UserId = m.AspNetUserId
WHERE tm.TradesManAccountType_Value = 1 AND tm.HasTradeListing = 1 AND am.IsApproved = 1

UNION ALL

SELECT 'listed' as descript, COUNT(*) as cnt FROM Trade.TradesMen where HasTradeListing = 1

UNION ALL

SELECT 'all' as descript, COUNT(*) as cnt FROM Trade.TradesMen
) ; 
```

这是假设该`VersionHistoryId`列由数据库自动播种。每次插入时，都会自动插入一个 ID 号。

不过，不确定您想通过该`CURRENT_TIMESTAMP`列实现什么。我把`SYSDATE`它作为一个时间戳。

该`NumberOf`列包含计数数据。以您认为合适的方式命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:29:02.747

```
insert into Admin.VersionHistory 
SELECT 'all', COUNT(*),current_timestamp FROM Trade.TradesMen 
```

# jquery - 复制 jQuery 片段后禁用弹出窗口

> ID：12490087
> 
> 赞同：2
> 
> 时间：2012-09-19T07:15:52.133
> 
> 标签：jquery, zeroclipboard

我正在使用 Snippet: jQuery Syntax Highlighter found [here](http://www.steamdev.com/snippet/ "这里")。虽然所有功能都运行良好，但我想禁用每次单击复制按钮后出现的弹出窗口。该文档没有显示任何方法来做到这一点。有什么方法可以防止弹出窗口，或者我应该使用其他工具。我也尝试使用 zClip。但即使将它们结合起来，我也无法得到想要的结果。

片段代码：

```
$("pre.htmlCode").snippet("html",{style:"bright",transparent:true,showNum:false,menu:false}); 
```

z剪辑代码：

```
$('pre.htmlCode').zclip({
               path:'js/ZeroClipboard.swf',
               copy:$('pre.htmlCode').text()

           }); 
```

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:39:29.527

注释掉这一行：

alert("复制文本到剪贴板：\n\n " + text);

在 jquery.zclip.js

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-17T13:39:50.907

使用 afterCopy 回调。您的 afterCopy 函数将覆盖默认的警报框。如果您不想使用任何操作，请留空功能。

# android - Facebook 集成的应用程序配置错误

> ID：12490089
> 
> 赞同：3
> 
> 时间：2012-09-19T07:16:04.550
> 
> 标签：android, facebook

> **可能重复：**
> [应用程序被错误配置为 Facebook 登录：Android Facebook 集成问题](https://stackoverflow.com/questions/12382558/app-is-misconfigured-for-facebook-login-android-facebook-integration-issue)

从 Facebook SDK 得到奇怪的问题 `Application is Mis-Configured for Facebook login. Press Okay to go back to the application without connecting to Facebook.`

问题已经[**在这里**](https://stackoverflow.com/questions/12382558/app-is-misconfigured-for-facebook-login-android-facebook-integration-issue)问过了，我试过但在给定的答案中没有找到任何解决方案。

此问题不会返回任何错误或响应或任何异常.. 已经更改了 2 到 3 个 APP_ID..

![在此处输入图像描述](../Images/997c51061bd7a6270d45526a793d7763.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T17:26:10.527

您是否尝试过检查 logcat 以查看按下“确定”按钮后显示什么样的错误消息？您提到您已经设置了自己的 APP_ID，但是您是否将 Android Hash Key 放入您的[仪表板](https://developers.facebook.com/apps/)？

如果您仍然无法使用它，请按照[我们文档](https://developers.facebook.com/docs/mobile/android/hackbook/)中的步骤操作，看看您是否可以设置它并使用我们的示例应用程序进行身份验证。如果您正确实施了示例应用程序，则可以**保证**它可以正常工作 - 如果您无法将 Hackbook 设置为正常工作，那么您将无法正确设置自己的应用程序。如果您能够让 Hackbook 正常工作，那么您只需要确保在您的应用程序中执行相同的操作即可。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-15T18:57:52.243

要生成签名，您需要在您的 PC 上安装 openssl。如果您没有从这里下载 openssl (http://code.google.com/p/openssl-for-windows/downloads/list)

1.  在 C: 中，创建 openssl 文件夹
2.  将下载的 openssl zip 文件的内容提取到 C:drive 中的 openssl 文件夹中
3.  将 openssl 内容复制到 jdk1.6.0\bin 文件夹中
4.  打开命令提示符
5.  移动到 jdk1.6.0\bin 的 bin。可以通过使用.. cd "your jdk1.6.0 bin directory" 来完成，运行以下命令来生成你的 keyhash。在生成 hashkey 时，它应该询问您的密码。

`keytool -exportcert -alias androiddebugkey -keystore "C:\Users\Arsalan.android\debug.keystore" | openssl sha1 -binary | openssl base64`

注意：在上面的代码中请注意，您需要提供您的用户路径（即在我的情况下它是 C:\Users\Arsalan ，您只需为您的用户帐户进行更改。

输入密码为 android

. 如果它不要求输入密码，则您的密钥库路径不正确。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T10:23:46.250

这很简单...

只需更改 facebook.java 中的功能：-

```
public void authorize(Activity activity, String[] permissions,
        final DialogListener listener) {
    authorize(activity, permissions, **DEFAULT_AUTH_ACTIVITY_CODE**, listener);
} 
```

to----- public void authorize(Activity activity, String[] permissions, final DialogListener listener) { authorize(activity, permissions, **FORCE_DIALOG_AUTH** , listener); 它会工作..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T15:08:02.970

我辛苦了两天终于得到了解决方案，这是获取哈希键的错误方法**-**

```
keytool -exportcert -alias *<your _alias_name>* -keystore *<key_store_path>* | [openssl_bin_directory]\openssl sha1 -binary | [openssl_bin_directory]\openssl base64 
```

这里描述了**正确**的方法 -

[http://facebook.stackoverflow.com/questions/13281913/app-is-misconfigured-for-facebook-login-with-release-key-hash](http://facebook.stackoverflow.com/questions/13281913/app-is-misconfigured-for-facebook-login-with-release-key-hash)

或在这里

[Facebook Android 生成密钥哈希](https://stackoverflow.com/questions/5306009/facebook-android-generate-key-hash/12405323#12405323)

# eclipse - Eclipse 显示视图向导说使用 f2 显示描述...但是在哪里设置视图的描述

> ID：12490094
> 
> 赞同：1
> 
> 时间：2012-09-19T07:16:17.653
> 
> 标签：eclipse, eclipse-plugin, swt, eclipse-rcp

在 Eclipse Window>Show View 中，在底部我们可以看到一个文本说“使用 f2 显示所选视图的描述”现在如果我们选择任何视图并按 f2，它总是显示“没有可用的描述”。现在我创建了一个视图，该视图在 showView eclipse menu 中可用，但我想设置相同的描述。所以在 ViewPart 中，我究竟需要在哪里进行描述设置。

![在此处输入图像描述](../Images/14159cb95f942718e40532a9610e5e27.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:22:27.887

根据[这个](https://bugs.eclipse.org/bugs/show_bug.cgi?id=128529)错误报告，描述是在`description`视图的标签中设置的`plugin.xml`。

一个例子：

```
<view
    name="Sample View"
    icon="icons/sample.gif"
    category="test"
    class="test.views.SampleView"
    id="test.views.SampleView">
    <description>A very long descriptive text.
                 With a new line comes still more.
                 And more ... and more.</description>
</view> 
```

结果：

![在此处输入图像描述](../Images/81eff17b7c9e2677183642c0c3409336.png)

# c# - 如何删除 Telerik RadTextBox 中显示的先前数据

> ID：12490103
> 
> 赞同：3
> 
> 时间：2012-09-19T07:16:50.387
> 
> 标签：c#, asp.net, telerik, telerik-radinput

如果我在 Telerik 中输入文本，`RadTextBox`它会显示先前输入的数据。如何防止/消除这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:18:47.437

使用该`AutoComplete`物业。将其设置为`Disabled`。

# javascript - 从另一个函数读取值的正确方法是什么？

> ID：12490106
> 
> 赞同：1
> 
> 时间：2012-09-19T07:16:59.110
> 
> 标签：javascript, node.js

说我有这个功能

```
function name(){
  var first_name = "mike";
} 
```

我想将值 first_name 传递给另一个函数——我知道你可以这样做：

```
function name(){
  var first_name = "mike";
  getName(first_name);
} 
```

但是说我想访问它而不像那样传递

```
function name(){
  var first_name = "mike";
  getName()
} 
```

在 getName 中，如何从 name() 函数访问 first_name？

```
function getName(){
   console.log(this.first_name)
} 
```

在 PHP 中，我知道您可以使用 $this->first_name 来完成，这将如何在 javascript 中完成？另外，如果您可以在 javascript 中调用另一个函数，是否有像 PHP $this->first_name() 那样的正确方法

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:23:22.777

```
function name(){
  var first_name = "mike";
  return first_name;
}

function getName(){
  var get_name=name();   
  alert(get_name);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:27:29.520

您不能从任何其他函数访问该变量，除非您像在**naga 的**解决方案中那样显式传递它，因为`first_name`它是本地的，只能`name`访问它。您可能想要使用原型。

```
function Person(name) {
  this.first_name = name || 'Mike';
}

Person.prototype = {
  getName: function() {
    return this.first_name;
  }
};

var john = new Person('John');
console.log(john.getName()); //=> John 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:27:11.917

有点淘气，但这是您问题的一个答案...

```
var first_name = "mike";

function change_name(new_name) {
  first_name = new_name;
}

function get_name() {
  return first_name;
}

console.log(get_name()); 
```

我个人更喜欢这样的设计模式......

```
var names = new function() {
  // The 'this' context may change within callbacks and such,
  // so this is one way to save it for later use
  var self = this;

  this.first_name = "mike";
  this.change_name = function(new_name) {
    self.first_name = new_name;
  }
  this.get_name = function() {
    return self.first_name;
  }
}

console.log(names.first_name);
console.log(names.get_name());
names.change_name("kevin");
console.log(names.first_name); 
```

# javascript - 我试图在函数触发时获取目标元素的 id，但 `this` 关键字返回 `undefined`

> ID：12490110
> 
> 赞同：1
> 
> 时间：2012-09-19T07:17:15.213
> 
> 标签：javascript, javascript-events

我试图在函数触发时捕获目标元素的 id，但`this` 关键字返回`undefined`

--- HTML 文件。---（我不能在 onclick 函数中添加任何参数）我`<a>`在页面中有很多标签，想识别女巫`<a>`标签被点击了。

```
<a href="#some_links" id="element_id" onclick = "object.pageName.functionName('parms1', 'parms2', 'parms3')">Get this object</a>

<a href="#some_links" id="second_element_id" onclick = "object.pageName.functionName('parms1', 'parms2', 'parms3')">Get this object</a> 
```

--- .js 文件 ---

```
object.pageName.functionName = function(a, b, c){
    alert(this); // returns 'undefined'
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:22:59.523

这是 StackOverflow 上一个非常常见的问题。

简而言之，您的 onclick 被包装在一个匿名函数中（它确实可以访问`this`. 您必须传递它。

--- HTML 文件。---

```
<a href="#some_links" id="element_id" onclick = "object.pageName.functionName(this, 'parms1', 'parms2', 'parms3')">Get this object</a> 
```

--- .js 文件 ---

```
object.pageName.functionName = function(self, a, b, c){
    alert(self); // returns 'undefined'
} 
```

这是另一种方式：

```
object.pageName.functionName = function(a, b, c){
    // Downside of this way, you can only use this function for one element.
    self = document.getElementById("element_id");
    alert(self);
} 
```

# mysql - 如何提高记录集处理的性能

> ID：12490111
> 
> 赞同：1
> 
> 时间：2012-09-19T07:17:18.287
> 
> 标签：mysql, asp-classic, ado, recordset

我在 ASP 中编写了一个 Web 应用程序，它从 MySQL 数据库 (v5.1.63) 中读取 3600 行并将数据输出到 HTML 表中。我正在使用记录集来获取数据和页面大小/光标位置，以让用户在页面之间前进/后退。该数据库现在包含大约 200.000 行，但还在不断增长。

页面加载时间越来越长（现在大约 15-20 秒），如果可能的话，我想对其进行优化。

我很想获得有关如何提高性能的提示。

下面是数据库结构：

```
# Col 类型归类属性 Null 默认
1 ID int(11) 否 无 AUTO_INCREMENT
2 均值 varchar(5) utf8_general_ci 否 无
3 最大 varchar(5) utf8_general_ci 否 无
4 分钟 varchar(5) utf8_general_ci 否 无
5 dt varchar(20) utf8_general_ci 否 无
6 dir varchar(2) utf8_general_ci 否 无
7 日志文本 utf8_general_ci 否 无

```

这是我正在使用的代码：

```
' Opening the db
Set oConn = Server.CreateObject("ADODB.Connection")
Set oRS = Server.CreateObject("ADODB.Recordset")
oConn.ConnectionString =
"DRIVER={MySQL};SERVER=<server>;DATABASE=<database>;UID=<uid>;PWD=<pwd>;"
oConn.Open

' Retrieve 3600 records
sSQL = "SELECT * FROM mytable ORDER BY id DESC"
oRS.CursorLocation = adUseServer
oRS.PageSize = 6*600
oRS.Open sSQL, oConn, adOpenForwardOnly, adLockReadOnly
nPageCount = oRS.PageCount

...code to set the page selected by the user (nPage)

oRS.AbsolutePage = nPage

Do While Not (oRS.EOF Or oRS.AbsolutePage <> nPage)
    ...
    Response.Write("<td>" & oRS("dt") & "</td>")
    Response.Write("<td>" & oRS("mean") & "</td>")
    Response.Write("<td>" & oRS("min") & "</td>")
    Response.Write("<td>" & oRS("max") & "</td>")
    ...
    oRS.MoveNext
Loop
oRS.Close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:03:33.607

如果您使用 MySQL 作为 RDMS - 如果您使用 mySqls`LIMIT`子句执行分页，效率会更高：

即对于给定的查询字符串页码，每页获取 10 个项目：

```
ItemsPerPage    = 10
PageNumber      = request.querystring("Page")

if PageNumber = "" then 
    PageNumber = 0
end if

Limit           = PageNumber * ItemsPerPage
Query           = "SELECT * FROM mytable ORDER BY id DESC LIMIT " & Limit & ", " & ItemsPerPage 
```

# objective-c - 如何编辑源文件：需要修剪每个源文件顶部的注释块？

> ID：12490112
> 
> 赞同：0
> 
> 时间：2012-09-19T07:17:29.073
> 
> 标签：objective-c, ios

目前，我们需要将我们的源代码传递给客户公司。但是所有源文件在每个源文件的顶部都包含标准作者和版权注释块，因此我们需要修剪该文本。应保留项目结构。最好使用什么命令或实用程序，有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:30:03.050

你可以在这里查看： [sed replace (single-line) C comments with C++ comments](https://stackoverflow.com/questions/11730287/sed-replace-single-line-c-comments-with-c-comments)

当您标记问题 ios 时，您可以访问 bash（和 sed）。Sed 使用正则表达式来查找/替换文本。修改上面链接中的正则表达式应该很简单。

编辑：

这是 sed 脚本，它将删除所有 c 和 c++ 注释：[http](http://sed.sourceforge.net/grabbag/scripts/remccoms3.sed) : //sed.sourceforge.net/grabbag/scripts/remccoms3.sed（由 Brian Hiles 提供）

下载它，将其与您的源代码一起放置，然后运行

```
./remccoms3 <SourceFile.cpp >NewSourceFile.cpp 
```

# asp.net - CSS 不适用于 asp.net 中的单选按钮

> ID：12490119
> 
> 赞同：2
> 
> 时间：2012-09-19T07:18:04.410
> 
> 标签：asp.net, css, radio-button

我尝试在 css 下方显示单选按钮中的图像，但以下 css 无法正常工作。请帮助。

```
.RadioButton
{
    background-image: url(../images/radio.png);
}

<asp:RadioButton ID="RadioButton1" runat="server" CssClass="RadioButton"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:23:51.317

您不能单独使用 CSS 设置单选按钮的样式，因为它们的外观是由操作系统决定的，而不是由浏览器决定的。您将不得不使用 Javascript 插件来允许它。

[正如您在此处看到](http://jsfiddle.net/Kyle_Sevenoaks/3zChd/)的，图像被加载到`<img>`标签中，但不是作为单选按钮的背景图像。

您可以使用[像这样](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)的插件来设置这些元素的样式。

# android - Android 应用程序响应特定的链接点击。

> ID：12490124
> 
> 赞同：0
> 
> 时间：2012-09-19T07:18:35.413
> 
> 标签：android, mobile, hyperlink

我想要一个 android 应用程序响应从任何其他 android 应用程序单击的特定链接。问题是我无法自定义单击链接的应用程序。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:29:56.993

不可以。在没有其他应用程序源的情况下，您无法更改单击链接的行为。如果可以的话，那将是非常不安全的！

想象一下，能够在不属于您的应用程序中更改链接点击的行为。如果允许应用程序执行此操作，我将不会运行 Android！

# android - Android 从服务下载图像文件并在通知中显示进度条

> ID：12490131
> 
> 赞同：0
> 
> 时间：2012-09-19T07:19:18.230
> 
> 标签：android, service, notifications, progress-bar

我必须使用 android 服务从 url 下载图像文件。该文件已下载，但是当我尝试在通知中添加进度条以便我可以看到我的设备挂起的下载进度或一段时间进度条继续运行并且没有下载文件时。我怎样才能实现？

**编码 Android 服务以下载文件并在通知中显示进度条**

```
package com.tutorial.app;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.lang.Thread.State;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.util.ByteArrayBuffer;

import android.app.IntentService;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.widget.ProgressBar;
import android.widget.RemoteViews;

public class DownloadProgress extends IntentService {

    public DownloadProgress() {
        super("");
        // TODO Auto-generated constructor stub
    }
    ProgressBar progressBar;
    private List<Integer> progress = new  ArrayList<Integer>();
    int currentProgress = 5;
//    Notification notification;
//    NotificationManager notificationManager;
    String filepath = "/mnt/sdcard/downloaf/first.jpg";

    @Override
    protected void onHandleIntent(Intent intent1) {

    try {
        UpdateProgress();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }   
    }

    private void UpdateProgress() throws IOException {
        Thread download = null;
        Intent intent = new Intent(this, DownloadProgress.class);
        final PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);
        @SuppressWarnings("deprecation")
        final Notification notification = new Notification(R.drawable.icon, "simulating a download", System
                .currentTimeMillis());
        notification.flags = notification.flags | Notification.FLAG_ONGOING_EVENT;
        notification.contentView = new RemoteViews(getApplicationContext().getPackageName(), R.layout.download_progress);
        notification.contentIntent = pendingIntent;
        notification.contentView.setImageViewResource(R.id.status_icon, R.drawable.ic_menu_save);
        notification.contentView.setTextViewText(R.id.status_text, "simulation in progress");
        notification.contentView.setProgressBar(R.id.status_progress, 100, currentProgress, false);
        final NotificationManager notificationManager = (NotificationManager) getApplicationContext().getSystemService(
                getApplicationContext().NOTIFICATION_SERVICE);
        notificationManager.notify(42, notification);

        download = new Thread() {

            @Override
            public void run() {

                for (int i = 1; i < 20; i++) {
                    currentProgress ++;//+= (progress.get(i)*10)/100;
                    notification.contentView.setProgressBar(R.id.status_progress, 100, currentProgress, false);

                    // inform the progress bar of updates in progress
                    notificationManager.notify(42, notification);

                    try {
                        Thread.sleep(100);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

                // remove the notification (we're done)

            }

        };
        URL url = new URL("http://www.ilikewallpaper.net/The-new-iPad-wallpapers/download/4755/Assassins-Creed-3-The-new-iPad-wallpaper-ilikewallpaper_com_1024.jpg");
        File file = new File(filepath);
        URLConnection con = url.openConnection();
        long fileLength = con.getContentLength();
        InputStream stream = con.getInputStream();
        byte[] buff = new byte[5 * 1024];
        BufferedInputStream buffer = new BufferedInputStream(stream,1024*5);
        FileOutputStream outputStream = new FileOutputStream(file);

        int current = 0;

             while ((current = buffer.read()) != -1) {
                    progress.add(current);
                    synchronized (outputStream) {
                        download.run();
                        outputStream.write(buff, 0, current);
                        notificationManager.cancel(42);
                    }

                }

//          download.run();
             outputStream.flush();
        outputStream.close();
        stream.close();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:24:29.370

可能是你的通知太频繁了。这就是它冻结的原因。使它们以更大的间隔更新。确定是每秒或 2 秒一次。
还要检查[通知服务中的 android 内存泄漏](https://stackoverflow.com/questions/3390280/android-memory-leak-in-notification-service)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-20T05:58:39.277

这个话题太老了。但我希望有人能得到对我有用的帮助。

我`DownloadManager`在 android 中使用过，它是在 API 级别 9 中添加的。它使用起来非常简单，您无需担心显示通知。只需几行代码

```
DownloadManager downloadmanager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
Uri uri = Uri.parse("your_any_download_url");
DownloadManager.Request request = new Request(uri);
Long reference = downloadmanager.enqueue(request); 
```

您可以`DownloadManager`从[Android 开发者网站了解更多信息，并按照](https://developer.android.com/reference/android/app/DownloadManager.html)[此处](http://www.compiletimeerror.com/2013/11/download-manager-in-android-with-example.html#.V2eEd_l9600)的教程进行操作

# java - Java Applet 错误 - IllegalArgumentException“将容器的父级添加到自身”

> ID：12490136
> 
> 赞同：0
> 
> 时间：2012-09-19T07:19:29.780
> 
> 标签：java, swing, japplet, illegalargumentexception

我必须创建一个小程序。我写的代码如下。

```
import java.awt.event.*;

import java.awt.*;

import javax.swing.*;

public class feedback extends JApplet

    implements ActionListener
{
    private JTextField login;

    private JTextField email;
    private JTextField comments;
    private final String SUBMIT="SUBMIT";
    private final String CLEAR="CLEAR";
    public void actionPerformed(ActionEvent e)
    {
        String command = e.getActionCommand();
        if(CLEAR.equals(command))
            {login.setText(" ");
            email.setText(" ");
            comments.setText(" ");}
        else if(SUBMIT.equals(command))
           {
            login.setText(" ");
            email.setText(" ");
            comments.setText(" ");
           }
        }
     public void start()
    {
        Container contentPane = getContentPane();
        JScrollPane sPane = new JScrollPane();
        JPanel pContPanel = new JPanel();

        pContPanel.setLayout(new GridBagLayout());

        GridBagConstraints gbc = new GridBagConstraints(3, 4, 1, 1, 0, 0, GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL, new Insets(10,10,10,10), 20, 20);

        JLabel title = new JLabel("FEEDBACK");
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.gridwidth = 3;
        pContPanel.add(title, gbc);

        JPanel panel1 = new JPanel();
        JLabel prompt = new JLabel("LOGIN");
        panel1.add(prompt, gbc);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 1;
        gbc.gridwidth = 1;
        pContPanel.add(panel1, gbc); 

        login = new JTextField(15);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.gridwidth = 2;
        pContPanel.add(login, gbc);

        JPanel panel2=new JPanel();
        JLabel print = new JLabel("EMAIL");
        panel2.add(panel2);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 2;
        gbc.gridwidth = 1;
        pContPanel.add(panel2, gbc);

        email = new JTextField(30);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 1;
        gbc.gridy = 2;
        gbc.gridwidth = 2;
        pContPanel.add(email, gbc);

        JPanel panel3=new JPanel();
        JLabel ask = new JLabel("COMMENTS");
        panel3.add(panel3);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 3;
        gbc.gridwidth = 1;
        pContPanel.add(panel3, gbc);

        comments = new JTextField(50);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 1;
        gbc.gridy = 3;
        gbc.gridwidth = 2;
        pContPanel.add(comments, gbc);

        JButton bSUBMIT = new JButton(SUBMIT);
        bSUBMIT.addActionListener(this);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 4;
        gbc.gridwidth = 1;
        pContPanel.add(bSUBMIT, gbc);

        JButton bCLEAR = new JButton(CLEAR);
        bCLEAR.addActionListener(this);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 1;
        gbc.gridy = 4;
        pContPanel.add(bCLEAR, gbc);

         sPane.setViewportView(pContPanel);
         contentPane.add(sPane, BorderLayout.CENTER);
        }
    } 
```

它正在编译，没有语法错误。但是，当我使用小程序查看器（在 BlueJ 中）运行它时，它会说，

异常：java.lang.IllegalArgumentException：将容器的父级添加到自身。

你能帮我找出我的代码中的错误在哪里，我可以通过什么方式纠正它？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:28:13.823

您正在尝试将面板添加到自身，例如`panel2.add(panel2);`

正确的程序应该是：

```
import java.awt.event.*;

import java.awt.*;

import javax.swing.*;

public class Feedback extends JApplet implements ActionListener
{
    private JTextField login;

    private JTextField email;
    private JTextField comments;
    private final String SUBMIT="SUBMIT";
    private final String CLEAR="CLEAR";
    public void actionPerformed(ActionEvent e)
    {
        String command = e.getActionCommand();
        if(CLEAR.equals(command))
            {login.setText(" ");
            email.setText(" ");
            comments.setText(" ");}
        else if(SUBMIT.equals(command))
           {
            login.setText(" ");
            email.setText(" ");
            comments.setText(" ");
           }
        }
     public void start()
    {
        Container contentPane = getContentPane();
        JScrollPane sPane = new JScrollPane();
        JPanel pContPanel = new JPanel();

        pContPanel.setLayout(new GridBagLayout());

        GridBagConstraints gbc = new GridBagConstraints(3, 4, 1, 1, 0, 0, GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL, new Insets(10,10,10,10), 20, 20);

        JLabel title = new JLabel("FEEDBACK");
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.gridwidth = 3;
        pContPanel.add(title, gbc);

        JPanel panel1 = new JPanel();
        JLabel prompt = new JLabel("LOGIN");
        panel1.add(prompt, gbc);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 1;
        gbc.gridwidth = 1;
        pContPanel.add(panel1, gbc);

        login = new JTextField(15);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.gridwidth = 2;
        pContPanel.add(login, gbc);

        JPanel panel2=new JPanel();
        JLabel print = new JLabel("EMAIL");
        panel2.add(print);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 2;
        gbc.gridwidth = 1;
        pContPanel.add(panel2, gbc);

        email = new JTextField(30);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 1;
        gbc.gridy = 2;
        gbc.gridwidth = 2;
        pContPanel.add(email, gbc);

        JPanel panel3=new JPanel();
        JLabel ask = new JLabel("COMMENTS");
        panel3.add(ask);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 3;
        gbc.gridwidth = 1;
        pContPanel.add(panel3, gbc);

        comments = new JTextField(50);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 1;
        gbc.gridy = 3;
        gbc.gridwidth = 2;
        pContPanel.add(comments, gbc);

        JButton bSUBMIT = new JButton(SUBMIT);
        bSUBMIT.addActionListener(this);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 4;
        gbc.gridwidth = 1;
        pContPanel.add(bSUBMIT, gbc);

        JButton bCLEAR = new JButton(CLEAR);
        bCLEAR.addActionListener(this);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 1;
        gbc.gridy = 4;
        pContPanel.add(bCLEAR, gbc);

         sPane.setViewportView(pContPanel);
         contentPane.add(sPane, BorderLayout.CENTER);
        }
    } 
```

# android - 如果使 Android 动画不可见，它会自行停止吗？

> ID：12490138
> 
> 赞同：0
> 
> 时间：2012-09-19T07:19:35.007
> 
> 标签：android, android-layout

```
ImageView something = (ImageView)findViewById(R.id.my_animated_image_view);
something.setVisibility(View.INVISIBLE);
((AnimationDrawable)something.getDrawable()).stop(); // <-- 这条线是多余的吗？

```

就我而言，我有一堆动画，其中只有一个运行/可见，现在我正在对所有动画调用 setVisibility() 和 stop()。如果我不需要自己调用 stop() 可能会更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:33:22.500

从`AnimationDrawable`来源：

```
@Override
    public boolean setVisible(boolean visible, boolean restart) {
        boolean changed = super.setVisible(visible, restart);
        if (visible) {
            if (changed || restart) {
                setFrame(0, true, true);
            }
        } else {
            unscheduleSelf(this);
        }
        return changed;
    } 
```

因此，如果您将 setVisible(false,false) 应用于`AnimationDrawable`则动画将停止。但是，当您将其应用于`View`. 如果您希望动画顺利进行，请尝试 AnimationDrawable.setVisible(false,false) 如果您希望视图不可见，请不要使其不可见，因为会发生很多 UI 问题。尝试设置Alpha动画，使其透明并设置FillAfter（true）。当动画结束调用视图到`setVisibility(View.Invisible)`需要的地方。这可能会给你一些 FPS。但一般要考虑在制作动画时会发生什么 UI 内容。避免 GC 调用并查看失效情况

# c# - 在列表项中搜索子字符串

> ID：12490143
> 
> 赞同：0
> 
> 时间：2012-09-19T07:20:18.177
> 
> 标签：c#, list, lambda

我有清单：

```
List<string> str = new List<string>();  
str.Add("asdf---US,IN");  
str.Add("asdg---UK,IN");  
str.Add("asjk---RU,IN");  
str.Add("asrt---IT,DE"); 
```

当我输入“IN”时，我想获得类似（“asdf”，“asdg”，“asjk”）的列表。为此，我正在做：

```
System.Text.RegularExpressions.Regex regEx = 
        new System.Text.RegularExpressions.Regex("asr", 
        System.Text.RegularExpressions.RegexOptions.IgnoreCase);
List<string> str = new List<string>();  
str.Add("asdf---US,IN");  
str.Add("asdg---UK,IN");  
str.Add("asjk---RU,IN");  
str.Add("asrt---IT,DE"); 
var getArray = str.Where<string>(item => regEx.IsMatch(item)).ToList<string>();
str = getArray.ToList(); 
```

str 有正确的结果。但它包含整个项目，如“asdf---US,IN”、“asdg---UK,IN”、“asjk---RU,IN”。我只想要列表中项目的前四个字符，即“asdf”、“asdg”、“asjk”。我可以在 lambda 表达式中放入什么条件来获得我想要的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:22:37.630

如果它只是前四个字符，请使用[string.SubString](http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.110%29.aspx)：

```
var getArray = str.Where(item => regEx.IsMatch(item))
                  .Select(r=> r.Substring(0,4))
                  .ToList(); 
```

您也不需要`<string>`使用`where`and指定强制转换`ToList`。列表中的项目已经是字符串类型。

编辑：

如果您只寻找那些以“IN”结尾的字符串，您可以摆脱正则表达式并使用[string.EndsWith](http://msdn.microsoft.com/en-us/library/system.string.endswith.aspx)：

```
var getArray = str.Where(item => item.EndsWith("IN"))
                  .Select(r=> r.Substring(0,4))
                  .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:25:12.317

正则表达式应该是

```
.*?(?=---.*?IN) 
```

并且查询应该是

```
var getArray = str.Where<string>(item => regEx.IsMatch(item)).Select<string>(item => regEx.Match(item)).ToList<string>(); 
```

# android - Ormlite、listViews 和适配器？

> ID：12490145
> 
> 赞同：6
> 
> 时间：2012-09-19T07:20:45.430
> 
> 标签：android, android-listview, ormlite

我在我的应用程序中运行了 OrmLite，并带有数据库助手等。我查看了 OrmLite 的示例和一些教程。这是我使用 listViews 的代码：

数据库管理员：

```
public List<Artist> getAllArtists() {
    List<Artist> artists = null;
    try {
        artists = getHelper().getArtistDao().queryForAll();
    } catch (SQLException e) {
            e.printStackTrace();
    }
    return artists;
} 
```

活动：

```
List<Artist> artists = dataBase.getAllArtists(); 

for (Artist artist : artists) {
     items.add(artist);
}

mAdapter = new ArtistsListCustomAdapter(getActivity(), items);
listView.setAdapter(mAdapter); 
```

这是一个好的方法还是使用我的方法会有麻烦？

从我读到的其他来源，应该`CursorAdapter`用于 listViews 而不是 BaseAdapter（我现在正在扩展`ArtistsListCustomAdapter()`）。对我来说，第二次迭代结果以创建数组似乎很尴尬。

我已经找到了一些关于使用适配器的线索，但是由于我对 Android 总体来说还比较陌生，所以我真的很感激更多关于“连接点”的线索。在我的情况下，应该`getAllArtists()`返回一个`Cursor`？这么简单的任务似乎很复杂：

> [在 CursorAdapter 中使用带有 ORMLite 的 Android 游标](https://stackoverflow.com/questions/7159816/android-cursor-with-ormlite-to-use-in-cursoradapter)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-01T09:42:52.477

看看这个：

[https://github.com/campnic/ormlite-android-extras](https://github.com/campnic/ormlite-android-extras)

他们实现了 ormlite 光标适配器。

# mongodb - PyMongo MapReduce 总是使用浮点数

> ID：12490150
> 
> 赞同：1
> 
> 时间：2012-09-19T07:20:52.700
> 
> 标签：mongodb, mapreduce, pymongo

我正在尝试使用 mapreduce，但由于某种原因它会将整数转换为浮点数。

地图：

```
function() {
    emit(this._id.p, 1);
} 
```

减少：

```
function(key, values) {
    var total = 0;
    for(var i = 0; i < values.length; i++) {
        total += values[i];
    }
    return total;
} 
```

我得到这样的输出：

```
[
    {u'_id': 1.0, u'value': 6.0}, 
    {u'_id': 2.0, u'value': 6.0}, 
    {u'_id': 3.0, u'value': 5.0}, 
    {u'_id': 4.0, u'value': 6.0}, 
    {u'_id': 5.0, u'value': 3.0}, 
    {u'_id': 6.0, u'value': 6.0},
    **snip**
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:31:25.217

Javascript 没有“整数”的概念，所有数字都是浮点数。因此，您的`emit(this._id.p, 1)`声明正在发出 float 1.0。MongoDB 为 Javascript 解释器提供了一个`NumberInt`and`NumberLong`类来解决这个问题。

试试`emit(this._id.p, NumberInt(1))`吧。

# ios - iOS的TimeGetTime

> ID：12490152
> 
> 赞同：1
> 
> 时间：2012-09-19T07:21:05.850
> 
> 标签：ios

我正在编写一个需要 SystemTime 的应用程序，即自系统启动以来经过的时间。iPhone SDK 中是否有任何可用的 API 可用于 iPhone 应用程序？Windows Mobile 上有一个 API TimeGetTime() 可用.....我们在 iPhone 操作系统上有相应的 API 吗？

提前非常感谢！

# mysql - 如果 mysql 中的第一次更新失败，则查询更新另一个表

> ID：12490155
> 
> 赞同：2
> 
> 时间：2012-09-19T07:21:24.617
> 
> 标签：mysql, sql-update

我有一个带有一些更新查询的 .sql 文件。

我正在寻找的是当更新查询失败时，我应该能够执行另一个更新查询

例如`Update table1 set col1="zbc" where id=1;` ，假设上述查询失败，因为未找到“id=1”。

然后我想执行下面的查询来更新另一个表：

```
Update table2 set col1="zbc" where id=1; 
```

由于我希望将其放入 .sql 文件中，因此我正在寻找单个查询来使用 if/case 语句或类似语句来实现此目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:25:00.143

您可以使用存储过程并从 .sql 文件内容中调用该过程吗？MySQL 手册指出 if/then 子句仅在“存储程序”中受支持：http: [//dev.mysql.com/doc/refman/5.5/en/if.html](http://dev.mysql.com/doc/refman/5.5/en/if.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:35:38.277

如果只运行第二个查询并检查这些行是否存在于第一个表中，例如：

```
Update table1 set col1="zbc" where id=1;
Update table2 set col1="zbc" where id=1 
                             and not exists (select id from table1 where id=1); 
```

或使用[ROW_COUNT()](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_row-count) MySql 函数和 IF。它返回最后一条语句更改、删除或插入的行数。

# java - 高分更改为数组列表并按时间排序

> ID：12490162
> 
> 赞同：0
> 
> 时间：2012-09-19T07:22:10.850
> 
> 标签：java, arrays, sorting, file-io

我需要帮助对我尝试过 Holder-comarator、Collections.Sort 的输入文件/高分进行排序，而我现在正试图将其设为数组列表，因此高分按我尝试过但失败的时间排序，我真的被卡住了好几天。任何建议都会很可爱

```
import java.io.*;
import java.util.*;

public class game {

private static void  start() throws IOException {
    int number = (int) (Math.random() * 1001);
    BufferedReader reader;
    reader = new BufferedReader(new InputStreamReader(System.in));
    Scanner input = new Scanner(System.in);

    String scorefile = "p-lista_java";
    int försök = 0;
    int gissning = 0;
    String namn;
    String line = null;
    String y;
    String n;
    String val ;
    String quit = "quit";
    String Gissning;

    System.out.println("Hello and welcome to this guessing game" +
            "\nStart guessing it's a number between 1 and 1000: ");

    long startTime = System.currentTimeMillis();
    while (true || (!( input.next().equals(quit)))){   

        System.out.print("\nEnter your guess: ");
        gissning = input.nextInt();
        försök++;

        if (gissning == number ){
            long endTime = System.currentTimeMillis();
            long gameTime = endTime - startTime;
            System.out.println("Yes, the number is " + number + 
                    "\nYou got it after " + försök + " guesses " + " times in " + (int)(gameTime/1000) + " seconds.");
            System.out.print("Please enter your name: ");
            namn = reader.readLine();

            try {
                BufferedWriter outfile
                        = new BufferedWriter(new FileWriter(scorefile, true));
                outfile.write(namn + " " + försök +"\t" + (int)(gameTime/1000) + "\n");
                outfile.close();
            } catch (IOException exception) {

            }
         break;

        }

         if( gissning < 1 || gissning > 1000 ){
                System.out.println("Stupid guess! I wont count that..." );
                --försök;
         }

         else if (gissning > number){
            System.out.println(" Your guess is too high");
         }
        else 
            System.out.println("Your guess is too low");
    }

        try {
            BufferedReader infile
                        = new BufferedReader(new FileReader(scorefile));
            while ((line = infile.readLine()) != null) {
                System.out.println(line);
            }
            infile.close();

        } catch (IOException exception) {

    }

    System.out.println("Do you want to continue (Y/N)?");
       val=reader.readLine();

       if ((val.equals("y"))||(val.equals("Y"))){
           game.start();
       }
       else 
           System.out.print("Thanks for playing");
       System.exit(0);

}

    public static void main (String[] args) throws IOException {

       game.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:28:57.987

有很多方法可以实现这一目标。可能最简单的方法是在将分数打印到屏幕之前对其进行排序。首先，将分数线放在一个列表中。

```
BufferedReader infile = new BufferedReader(new FileReader(scorefile));
List<String> scores = new ArrayList<String>();
while ((line = infile.readLine()) != null) {
    scores.add(line);
}
infile.close(); 
```

现在您可以对列表进行排序。您可以使用该类的`sort`方法`Collections`，但您必须为此使用自定义`Comparator`方法。由于您的高分格式与空格处的行一样`<name>\t<steps>\t<time>`，`split`因此将第三个元素解析为数字并比较这些数字。

```
Collections.sort(scores, new Comparator<String>() {
    public int compare(String s1, String s2) {
        int t1 = Integer.parseInt(s1.split("\\s")[2]); // time in s1
        int t2 = Integer.parseInt(s2.split("\\s")[2]); // time in s2
        return t1 - t2;                                // neg. if t1 < t2
    } 
}); 
```

这将对`scores`就地列表进行排序，所以现在剩下要做的就是实际打印分数：

```
System.out.println("Name       Steps  Time");
for (String s : scores) {
    String[] ps = s.split("\\s");
    System.out.println(String.format("%-10s %5s %5s", ps[0], ps[1], ps[2]));
} 
```

# gwt - 自动获取 livegrid smartgwt 中的特定页面

> ID：12490164
> 
> 赞同：1
> 
> 时间：2012-09-19T07:22:28.870
> 
> 标签：gwt, smartgwt, gwt-rpc

我有一个实时记录网格（有界数据源），它们是联系人。实时网格被分页。我有一个问题，我必须显示在此 livegrid 中选择的搜索记录。在谷歌搜索中，我在 listgrid 中找到了 API scrollToRow。它也被记录在某处，该 scrollToRow 仅在绘制记录后才起作用。

问题是，如果有人搜索未在 livegrid 中获取的记录，因此未绘制；scrollToRow 将不起作用。是否有任何解决方案可以在 livegrid 中获取特定页面或继续在网格中获取记录直到获取所需的记录。

# php - 无法让 mysql_insert_id() 工作

> ID：12490165
> 
> 赞同：0
> 
> 时间：2012-09-19T07:22:34.837
> 
> 标签：php, mysql, sql, mysql-insert-id

我试过这个：

```
$cid = mysql_insert_id($this->result);
$this->result = "<div class='alert alert-success'>" . sprintf(_('Successfully added user id <b>%s</b> to the database.'), $cid) . "</div>"; 
```

但我只收到此错误：

警告：mysql_insert_id()：提供的参数不是有效的 MySQL-Link 资源

这是整个函数（我添加了这个**$cid = mysql_insert_id($this->result);**希望检索插入数据的 id）：

```
private function adduser() {

    if (!empty($this->error)) return false;

    $params = array(
        ':user_level' => parent::getOption('default-level'),
        ':name'       => $this->name,
        ':email'      => $this->email,
        ':username'   => $this->username,
        ':password'   => parent::hashPassword($this->password)
    );

    parent::query("INSERT INTO `login_users` (`user_level`, `name`, `email`, `username`, `password`)
                    VALUES (:user_level, :name, :email, :username, :password);", $params);

    $shortcodes = array(
        'site_address'  =>  SITE_PATH,
        'full_name'     =>  $this->name,
        'username'      =>  $this->username,
        'email'         =>  $this->email,
        'password'      =>  $this->password
    );

    $subj = parent::getOption('email-add-user-subj');
    $msg = parent::getOption('email-add-user-msg');

    if(!parent::sendEmail($this->email, $subj, $msg, $shortcodes))
        $this->error = _('ERROR. Mail not sent');
    $cid = mysql_insert_id($this->result);
    $this->result = "<div class='alert alert-success'>" . sprintf(_('Successfully added user <b>%s</b> to the database. Credentials sent to user.'), $cid) . "</div>";

} 
```

这是与数据库的连接：

```
<?php
$host = "xxx"; 
$dbName = "xxx"; 
$dbUser = "xxx"; 
$dbPass = "xxx"; 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:26:45.303

`mysql_insert_id()`将资源链接（即数据库句柄）作为参数而不是查询结果。包含什么`$this->result`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:28:42.323

检查[手册](http://php.net/manual/en/function.mysql-insert-id.php)

参数为`mysql_insert_id`Link_Identifier。但我猜你正在传递结果。尝试

```
$cid = mysql_insert_id(); 
```

或者你的 $this->result 必须是 mysql_connect() 返回的连接标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:33:22.300

您已经在使用 PDO，请切换到：

```
$cid = self::$dbh->lastInsertId(); // PDO for mysql_insert_id 
```

# spring - Spring DI 不满足的依赖表示

> ID：12490170
> 
> 赞同：0
> 
> 时间：2012-09-19T07:22:51.683
> 
> 标签：spring, model-view-controller, servlets, dependency-injection, inversion-of-control

应用程序上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="user" class="com.pomkine.pottyauth.domain.User"/>
    <bean id="userdao" class="com.pomkine.pottyauth.persistance.GaeUserDao"/>
    <bean id="userservice" class="com.pomkine.pottyauth.service.UserServiceImpl">
        <constructor-arg ref="userdao"/>
    </bean>
</beans> 
```

控制器：

```
@Controller
public class RosterController {

    private UserService userService;

    @Inject
    public RosterController(UserService userService){
        this.userService=userService;
    }

    @RequestMapping(value = {"/userRoster"}, method = RequestMethod.GET)
    public String showRosterPage(Map<String,Object> model){
        model.put("users",userService.getAllUsers());
        return "userRoster";
    }
} 
```

所以我希望将 UserService 注入到我的控制器中。但我得到以下异常：

```
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'rosterController' defined in file [S:\Coding\Idea_workspace\pottyAuth\target\pottyAuth-1.0\WEB-INF\classes\com\pomkine\pottyauth\mvc\RosterController.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [com.pomkine.pottyauth.service.UserService]: : No matching bean of type [com.pomkine.pottyauth.service.UserService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. 
```

这是我的 UserServiceImpl 类：

```
public class UserServiceImpl implements UserService {

    private UserDao dao;

    public UserServiceImpl(UserDao dao){
        this.dao=dao;
    }
    @Override
    public User getUser(User user) {
        return dao.getUser(user);
    }

    @Override
    public void addUser(User user) {
         dao.addUser(user);
    }

    @Override
    public List getAllUsers() {
        return dao.getAllUsers();
    }
} 
```

所以我期待 Spring 容器创建 UserServiceImlp bean 并将其注入 RosterController。但似乎找不到 UserServiceImpl bean。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:29:25.193

UserServiceImpl 没有实现 UserService

编辑：我也看不到

```
<context:component-scan  base-package=""> 
```

这是整个 Spring 配置吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:38:07.303

这意味着 Spring 找不到任何类型的 bean `UserService`。检查你的`UserServiceImpl`班级。
想知道为什么要同时使用基于 XML 和注释的方法来定义 bean？如果你坚持其中任何一个，那就太好了。

* * *

**编辑：**
将`@Component`注释添加到`UserServiceImpl`. 这样Spring就会知道它应该创建一个对象`UserServiceImpl`

```
@Component
public class UserServiceImpl implements UserService  
{
.....  
} 
```

正如@pawelccb 提到的那样使用

```
<context:component-scan  base-package="your.base.package"> 
```

在 Spring 配置文件中。
检查此[链接](http://www.mkyong.com/spring/spring-auto-scanning-components/)以获取详细信息。

# python - IntegrityError：区分唯一约束和非空违规

> ID：12490172
> 
> 赞同：15
> 
> 时间：2012-09-19T07:23:04.140
> 
> 标签：python, django, postgresql, psycopg2

我有这个代码：

```
try:
    principal = cls.objects.create(
        user_id=user.id,
        email=user.email,
        path='something'
    )
except IntegrityError:
    principal = cls.objects.get(
        user_id=user.id,
        email=user.email
    ) 
```

它尝试使用给定的 id 和电子邮件创建用户，如果已经存在，则尝试获取现有记录。

我知道这是一个糟糕的结构，无论如何它都会被重构。但我的问题是这样的：

我如何确定发生了哪种`IntegrityError`情况：与`unique`约束违规相关的事件（（user_id，电子邮件）上有唯一键）或与`not null`约束相关的事件（`path`不能为空）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T13:14:27.263

psycopg2 提供了`SQLSTATE`异常作为`pgcode`成员，它为您提供了非常细粒度的错误信息以进行匹配。

```
python3
>>> import psycopg2
>>> conn = psycopg2.connect("dbname=regress")
>>> curs = conn.cursor()
>>> try:
...     curs.execute("INVALID;")
... except Exception as ex:
...     xx = ex
>>> xx.pgcode
'42601' 
```

有关代码含义，请参见[PostgreSQL 手册中的](http://www.postgresql.org/docs/current/static/errcodes-appendix.html)[*附录 A：错误代码。*](http://www.postgresql.org/docs/current/static/errcodes-appendix.html)请注意，您可以粗略地匹配广泛类别的前两个字符。在这种情况下，我可以看到 SQLSTATE 42601 属于`syntax_error`该`Syntax Error or Access Rule Violation`类别。

你想要的代码是：

```
23505   unique_violation
23502   not_null_violation 
```

所以你可以写：

```
try:
    principal = cls.objects.create(
        user_id=user.id,
        email=user.email,
        path='something'
    )
except IntegrityError as ex:
    if ex.pgcode == '23505':
        principal = cls.objects.get(
            user_id=user.id,
            email=user.email
        )
    else:
        raise 
```

也就是说，这是执行`upsert`or的不好方法`merge`。@pr0gg3d 在建议使用 Django 的正确方法方面可能是正确的；我不做 Django，所以我不能评论那一点。有关 upsert/merge 的一般信息，请参阅[depesz 关于该主题的文章](http://www.depesz.com/2012/06/10/why-is-upsert-so-complicated/)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-09-06T20:44:07.113

2017 年 9 月 6 日更新：

一个非常优雅的方法是`try`/ `except IntegrityError as exc`，然后在`exc.__cause__`and上使用一些有用的属性`exc.__cause__.diag`（一个诊断类，它为您提供有关手头错误的一些其他超级相关信息 - 您可以自己探索它`dir(exc.__cause__.diag)`）。

上面描述了您可以使用的第一个。为了使您的代码更具前瞻性，您可以直接引用 psycopg2 代码，甚至可以使用我上面提到的诊断类检查违反的约束：

```
except IntegrityError as exc:
    from psycopg2 import errorcodes as pg_errorcodes
    assert exc.__cause__.pgcode == pg_errorcodes.UNIQUE_VIOLATION
    assert exc.__cause__.diag.constraint_name == 'tablename_colA_colB_unique_constraint' 
```

编辑澄清：我必须使用`__cause__`访问器，因为我使用的是 Django，所以要访问我必须调用的 psycopg2 IntegrityError 类`exc.__cause__`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T07:44:05.690

最好使用：

```
try:
    obj, created = cls.objects.get_or_create(user_id=user.id, email=user.email)
except IntegrityError:
    .... 
```

如[https://docs.djangoproject.com/en/dev/ref/models/querysets/#get-or-create](https://docs.djangoproject.com/en/dev/ref/models/querysets/#get-or-create)

只有在违反约束的`IntegrityError`情况下才应该提出。`NOT NULL`此外，您可以使用`created`标志来了解对象是否已经存在。

# python - 金字塔请求：UnicodeDecodeError

> ID：12490174
> 
> 赞同：0
> 
> 时间：2012-09-19T07:23:07.307
> 
> 标签：python, utf-8, pyramid

我正在使用 Pyramid 框架，试图将 UTF8 数据发布到它。这是我得到的例外。我不确定如何解决这个问题。任何想法为什么会发生？

```
mod_wsgi (pid=1389): Exception occurred processing WSGI script '/home/user/transcriptions/pyramid.wsgi'.
Traceback (most recent call last):
File "/home/user/transcriptions/lib/python2.7/site-packages/pyramid-1.3.2-py2.7.egg/pyramid/router.py", line 187, in __call__
response = self.handle_request(request)
File "/home/user/transcriptions/lib/python2.7/site-packages/pyramid-1.3.2-py2.7.egg/pyramid/tweens.py", line 20, in excview_tween
response = handler(request)
File "/home/user/transcriptions/lib/python2.7/site-packages/pyramid_tm-0.5-py2.7.egg/pyramid_tm/__init__.py", line 100, in tm_tween
response = handler(request)
File "/home/user/transcriptions/lib/python2.7/site-packages/pyramid-1.3.2-py2.7.egg/pyramid/router.py", line 164, in handle_request
response = view_callable(context, request)
File "/home/user/transcriptions/lib/python2.7/site-packages/pyramid-1.3.2-py2.7.egg/pyramid/config/views.py", line 333, in rendered_view
result = view(context, request)
File "/home/user/transcriptions/lib/python2.7/site-packages/pyramid-1.3.2-py2.7.egg/pyramid/config/views.py", line 471, in _requestonly_view
response = view(request)
File "/home/user/transcriptions/transcriptions/frontend_views.py", line 179, in rpc_adduser
data = request.params
File "/home/user/transcriptions/lib/python2.7/site-packages/WebOb-1.2.1-py2.7.egg/webob/request.py", line 832, in params
params = NestedMultiDict(self.GET, self.POST)
File "/home/user/transcriptions/lib/python2.7/site-packages/WebOb-1.2.1-py2.7.egg/webob/request.py", line 783, in POST
vars = MultiDict.from_fieldstorage(fs)
File "/home/user/transcriptions/lib/python2.7/site-packages/WebOb-1.2.1-py2.7.egg/webob/multidict.py", line 74, in from_fieldstorage
obj.add(field.name, decode(field.value))
File "/home/user/transcriptions/lib/python2.7/site-packages/WebOb-1.2.1-py2.7.egg/webob/multidict.py", line 67, in <lambda>
decode = lambda b: b.decode('utf8')
File "/usr/lib/python2.6/encodings/utf_8.py", line 16, in decode
return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode bytes in position 6-8: invalid data 
```

它窒息的字符串是“Venus\xe4gen”。

我正在从使用这些属性定义的 HTML 表单中提交数据：

```
<form name="form_reg" id="formtrans" method="post" action="signup"
        content="text/html; charset=utf-8"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T09:26:37.697

好的，伙计们，我似乎找到了问题所在。问题是表单是基于 PHP 的服务器。它使用 cURL 将数据从一台服务器发布到另一台服务器。第二台服务器有 Pyramid 应用程序，它接受请求。我添加了 iconv('ISO-8859-1','UTF-8',$fields_string) 并修复了它

```
 $fields = $_REQUEST;

            foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
            rtrim($fields_string,'&');                
            //open connection
            $ch = curl_init();
            curl_setopt($ch, CURLOPT_HTTPHEADER, "Content-Type: text/html; charset=utf-8");

            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_POST, count($fields));
            $fields_string = iconv('ISO-8859-1', 'UTF-8', $fields_string);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $fields_string);

            $result = curl_exec($ch);
            curl_close($ch); 
```

我不确定为什么 PHP 会这样，$_REQUEST 应该是 UTF-8，因为页面的字符集（元也是）是 utf-8。虽然我不是 PHP 的忠实粉丝。感谢大家的帮助！

# iphone - 使用 UITabBarController 的 iPhone 应用程序崩溃

> ID：12490176
> 
> 赞同：0
> 
> 时间：2012-09-19T07:23:11.407
> 
> 标签：iphone, ios, crash, uitabbarcontroller

你能帮助理解那个崩溃日志吗？我不确定出了什么问题。

```
"0   MyApp                               0x0007af6f MyApp + 499567",
"1   MyApp                               0x0007b6d1 MyAPp + 501457",
"2   libsystem_c.dylib                   0x33bb97e3 _sigtramp + 38",
"3   JavaScriptCore                      0x35668fef WTFReportBacktrace + 146",
"4   WebCore                             0x32b5740f WebThreadLock + 54",
"5   UIKit                               0x310ec4bf -[UIFieldEditor scrollXOffset] + 10",
"6   UIKit                               0x310ec463 -[UITextField _endedEditing] + 166",
"7   UIKit                               0x310ec375 -[UITextField willDetachFieldEditor:] + 44",
"8   UIKit                               0x310b616d -[UIFieldEditor becomeFieldEditorForView:] + 168",
"9   UIKit                               0x310ec0bd -[UITextField _resignFirstResponder] + 188",
"10  UIKit                               0x30fd1695 -[UIResponder resignFirstResponder] + 128",
"11  UIKit                               0x30ff6c7b -[UITextField resignFirstResponder] + 150",
"12  UIKit                               0x310b000f -[UIView(Hierarchy) _removeFirstResponderFromSubtree] + 146",
"13  UIKit                               0x3118fe4b __UIViewWillBeRemovedFromSuperview + 54",
"14  UIKit                               0x30fd0cbd -[UIView(Hierarchy) removeFromSuperview] + 56",
"15  UIKit                               0x31069873 -[UITransitionView _didCompleteTransition:] + 422",
"16  UIKit                               0x310691a3 -[UITransitionView transition:fromView:toView:] + 1402",
"17  UIKit                               0x31068c21 -[UITransitionView transition:toView:] + 104",
"18  UIKit                               0x310687ed -[UITabBarController transitionFromViewController:toViewController:transition:shouldSetSelected:] + 524",
"19  UIKit                               0x310685db -[UITabBarController transitionFromViewController:toViewController:] + 30",
"20  UIKit                               0x31067f15 -[UITabBarController _setSelectedViewController:] + 300",
"21  UIKit                               0x31067c49 -[UITabBarController setSelectedIndex:] + 240",
"22  MyApp                               0x00002f6d MyApp + 8045",
"23  MyApp                               0x000789ef MyApp + 489967",
"24  MyApp                               0x0007644f MyApp + 480335",
"25  Foundation                          0x37ae1a81 -[NSThread main] + 72",
"26  Foundation                          0x37b75591 __NSThread__main__ + 1048",
"27  libsystem_c.dylib                   0x33b70735 _pthread_start + 320",
"28  libsystem_c.dylib                   0x33b705f0 thread_start + 8" 
```

第 22 行：这是那个函数：

```
- (UIViewController *) selectTabBarItemWithTag:(NSInteger) tag
{
    NSArray *viewControllers = self.rootController.viewControllers;

    int idx = 0;
    for (UIViewController *vc in viewControllers) {
        if (vc.tabBarItem.tag == tag) {
            self.rootController.selectedIndex = idx;
            return vc;
        }

        idx++;
    }

    return nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:44:09.060

检查页面上存在的 UITextField 对象。因为`resignFirstResponder`在您的 UIViewController 上处于活动状态的 UITextField 方法上出现错误。也许最好`resignFirstResponder`在 UIViewController 的方法调用`viewWillDisappear:`中添加方法，这将被更改。实际上你的问题很接近下一个： [UITextFieldDelegate 问题](https://stackoverflow.com/questions/5823560/uitextfielddelegate-problem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T13:14:50.227

您是否尝试过从快速枚举结构中删除您的代码？

```
for (int i = 0; i < [viewControllers count]; i++) {
    UIViewController *vc = [viewControllers objectAtIndex:i];
    if (vc.tabBarItem.tag == tag) {
        self.rootController.selectedIndex = i;
        return vc;
    }
} 
```

# asp.net - Ajax 组合框文本未显示在列表框可见区域中

> ID：12490182
> 
> 赞同：0
> 
> 时间：2012-09-19T07:23:35.830
> 
> 标签：asp.net, combobox, ajaxcontroltoolkit

我正在使用 Ajaxtoolkit 进行组合框控件，以实现具有 .netframework 4.0 的自动完成功能。AjaxControlToolkit.dll 的版本为 3.03053，大小为 4065 KB。

我遇到了在组合框的列表框区域中显示项目的问题。我的数据表中有 500 多个项目，这些项目通过其 DataSource 属性与组合框控件绑定。当我在文本区域中输入内容时，列表中的相应项目被突出显示。但有时对应的项目在列表区域中不可见，但项目仍在列表中。

如果有人遇到这种行为，请帮助我。我使用的是 IE9 和 FireFox 15.0.1 版本。

```
<cc1:ComboBox ID="ddlAcntNameTest" runat="server" DropDownStyle="DropDownList"             AutoCompleteMode="SuggestAppend" CaseSensitive="false" RenderMode="Inline" ItemInsertLocation="Append" CssClass="GreenTypeComboBoxStyle" ListItemHoverCssClass="" AutoPostBack="true" >  </cc1:ComboBox> 
```

在代码后面

```
 private void FillAcntNameTestDDL()
    {
            DataTable AccountList = NacWeb.LedgerAccount.GetAccountVisibleListForDdl();
            ddlAcntNameTest.DataSource = AccountList;
            ddlAcntNameTest.DataTextField = "AcntName";
            ddlAcntNameTest.DataValueField = "AcntId";
            ddlAcntNameTest.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:39:58.967

您必须共享代码才能获得更好的想法。我们如何在不查看与数据源的自动完成和组合绑定代码的情况下进行判断？

现在好了，在查看代码后，我认为没有问题，您可以尝试清理解决方案并重建相同的解决方案。

浏览示例：[Combobox-sample](http://demos.telerik.com/aspnet-ajax/combobox/examples/overview/defaultcs.aspx)

# visual-studio-2010 - Visual C++ 2010 Express 不生成 DLL 文件

> ID：12490187
> 
> 赞同：1
> 
> 时间：2012-09-19T07:23:53.617
> 
> 标签：visual-studio-2010, visual-c++, dll

我有一个 Visual C++ DLL 项目（只是一个项目，没有父解决方案）并且需要构建 DLL。

构建命令不会生成任何错误消息。在 Debug 文件夹中有`mylibrary.lib`，但没有`mylibrary.dll`.

我查看了[Visual Studio 2010 C++ DLL 项目 - 没有输出 DLL 文件！](https://stackoverflow.com/questions/2816788/visual-studio-2010-c-dll-project-no-output-dll-file)，但我的情况与那个问题不同。在构建输出中，没有类似的消息

> MFCInterop.vcxproj -> C:\temp\sotest\Debug\MFCInterop.dll

只要

> MFCInterop.vcxproj -> C:\temp\sotest\Debug\MFCInterop.lib

我该怎么做才能生成 DLL 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T09:40:06.057

我可能是生成的 dll 但不在 Debug 文件夹中。您应该为项目设置输出目录。为此转到

> 项目属性--->常规--->输出目录--->.\Debug

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:48:03.800

如果您的 DLL 没有公开任何内容，则可能会发生这种情况。通常应使用以下构造公开 DLL 的公共 API 类：

```
#ifdef YOUR_DLL_EXPORTS
    #define YOUR_API __declspec(dllexport)
#else
    #define YOUR_API __declspec(dllimport)
#endif 

class YOUR_API ClassToExpose {}; 
```

然后你必须在 DLL 项目中定义 YOUR_DLL_EXPORTS。如果您没有公开的东西，则不会生成 DLL。我希望这有帮助。

# qt - 基于 Qt 的程序在调试模式下链接但不在发布模式下

> ID：12490188
> 
> 赞同：1
> 
> 时间：2012-09-19T07:24:00.530
> 
> 标签：qt, visual-studio-2008

我正在使用 Visual Studio 2008 Compiler 编写一个基于 Qt 的项目。在调试模式下，一切正常，程序编译和链接成功，但是当我切换到发布模式并开始编译时，在链接过程中出现此错误：

```
1>Linking...
1>MSVCRT.lib(crtexew.obj) : error LNK2019: unresolved external symbol _WinMain@16 referenced in function ___tmainCRTStartup
1>release\\MobnaPC.exe : fatal error LNK1120: 1 unresolved externals 
```

但是主函数已经定义了！
先感谢您

# c# - EF 5 + SQL Server CE 4：如何为数据库文件指定自定义位置？

> ID：12490190
> 
> 赞同：7
> 
> 时间：2012-09-19T07:24:12.980
> 
> 标签：c#, entity-framework, sql-server-ce

我正在开发一个需要小型本地数据库的客户端系统。我想避免安装 SQL Server Express，并决定使用 SQL Server 4。

我使用 Entity Framework 5 进行数据访问并创建了我的自定义上下文。在开发中一切正常，我可以使用 app.config 设置特定文件位置或动态`Data Source=|DataDirectory|\MyDatabase.sdf`.

但在部署时，我希望数据库位于用户文档文件夹中：

```
\My Documents\ApplicationName\MyDatabase.sdf 
```

我怎样才能做到这一点？

我实际上需要的是能够在代码中设置自定义连接字符串！

这是我到目前为止所尝试的：

```
private MyApplicationDataContext(string connectionString)
    : base(connectionString)
{
}

public static MyApplicationDataContext CreateInstance()
{
    var directory = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
    var path = Path.Combine(directory, @"ApplicationName\MyDatabase.sdf");

    //var connectionString = string.Format("provider=System.Data.SqlServerCe.4.0;provider connection string=\"Data Source={0}\"", path);
    var connectionString = string.Format("Data Source={0}", path);

    return new MyApplicationDataContext(connectionString);
} 
```

如您所见，我尝试了两种连接字符串，但都导致了异常。

> 不支持关键字：“提供者”。

和

> 提供程序未返回 ProviderManifestToken 字符串。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T08:46:37.717

啊，我终于猜对了！

如果其他人有同样的问题，我会包含调整后的代码。诀窍是在 Database.DefaultConnectionFactory 上设置连接字符串

```
 private MyApplicationDataContext()
    { }

    public static MyApplicationDataContext CreateInstance()
    {
        var directory = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
        var path = Path.Combine(directory, @"ApplicationName\MyDatabase.sdf");

        // Set connection string
        var connectionString = string.Format("Data Source={0}", path);
        Database.DefaultConnectionFactory = new SqlCeConnectionFactory("System.Data.SqlServerCe.4.0", "", connectionString);

        return new MyApplicationDataContext();
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-29T22:54:50.907

在 EF 6 中，这可以使用 DbConfiguration 来完成：

应用程序配置：

```
<entityFramework codeConfigurationType="MyDbConfiguration, MyAssembly">
</entityFramework> 
```

在你的程序集中创建一个类，如：

```
public class MyDbConfiguration : DbConfiguration
{
    public MyDbConfiguration()
    {
        SetProviderServices(SqlCeProviderServices.ProviderInvariantName, SqlCeProviderServices.Instance);
        var directory = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
        var path = Path.Combine(directory, @"ApplicationName\MyDatabase.sdf");          
        var connectionString = string.Format(@"Data Source={0}",path);
        SetDefaultConnectionFactory(new SqlCeConnectionFactory(SqlCeProviderServices.ProviderInvariantName, "", connectionString));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T06:18:13.267

该`SqlCeConnection`实例用于连接`Sql Ce`数据库文件。如果我想连接到`MSSQL`数据库，我将使用`SqlConnectionStringBuilder`和`SqlConnection`实例来构建我的`DbConnection`实例。

```
// The ctor for `DbConnection`.
private MyApplicationDataContext(DbConnection conn) : base(conn, true) {}

public static MyApplicationDataContext CreateInstance()
{
    var directory = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
    var path = Path.Combine(directory, @"ApplicationName\MyDatabase.sdf");

    // Connection string builder for `Sql ce`
    SqlCeConnectionStringBuilder sb = new SqlCeConnectionStringBuilder();
    sb.DataSource = path;

    // DbConnection for `Sql ce`
    SqlCeConnection dbConn = new SqlCeConnection(sb.ToString());
    return new MyApplicationDataContext(dbConn);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-04T17:26:09.333

For EF 6

I arrived at this answer thanks to **Matthias's** post, but included some worthwhile info from [Entity Framework Code-Based Configuration (EF6 onwards)](https://msdn.microsoft.com/en-us/data/jj680699).

To specify a custom database location you will need to do some configuration. Configuration for an Entity Framework application can be specified in a config file (app.config/web.config) or through code. The latter is known as code-based configuration. Given that my project required the database location to be set dynamically, I went with the code-based configuration, which is described below.

(Note that the config file takes precedence over code-based configuration. In other words, if a configuration option is set in both code and in the config file, then the setting in the config file is used.)

According to EF documentation (above link) there are 4 approaches to implement your custom configuration,which include: Using DbConfiguration, Moving DbConfiguration, Setting DbConfiguration explicitly, and Overriding DbConfiguration.

## Using DbConfiguration

Code-based configuration in EF6 and above is achieved by creating a subclass of System.Data.Entity.Config.DbConfiguration. The following guidelines should be followed when subclassing DbConfiguration:

*   Create only one DbConfiguration class for your application. This class specifies app-domain wide settings.

*   Place your DbConfiguration class in the same assembly as your DbContext class. (See the Moving DbConfiguration section if you want to change this.)

*   Give your DbConfiguration class a public parameterless constructor.

*   Set configuration options by calling protected DbConfiguration methods from within this constructor.

Following these guidelines allows EF to discover and use your configuration automatically by both tooling that needs to access your model and when your application is run.

Example (modified from Matthias's answer):

```
public class MyDbConfiguration : DbConfiguration
{
    public MyDbConfiguration()
    {
        SetProviderServices(SqlCeProviderServices.ProviderInvariantName, SqlCeProviderServices.Instance);
        //var directory Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
        var directory = @"C:\Users\Evan\Desktop\TestFolder"; // Directory may or may not already exist
        Directory.CreateDirectory(directory);   // create directory if not exists         
        var path = Path.Combine(directory, @"ApplicationName\MyDatabase.sdf");          
        var connectionString = string.Format(@"Data Source={0}",path);
        SetDefaultConnectionFactory(new SqlCeConnectionFactory(SqlCeProviderServices.ProviderInvariantName, "", connectionString));
    }
} 
```

Note that the config file does not need to be altered unless there are existing configuration settings that override your custom configuration. Also, I changed the directory to illustrate that While EF is capable of creating a new database if it doesn't already exist, it will not create parent directories, which is why I included this line: Directory.CreateDirectory(directory). Given that this approach worked for my project I didn't explore the remaining 3 configuration methods, but you can find info on them in the link provided above and I will include the documentation here as a reference in case the link breaks.

## Moving DbConfiguration

There are cases where it is not possible to place your DbConfiguration class in the same assembly as your DbContext class. For example, you may have two DbContext classes each in different assemblies. There are two options for handling this.

The first option is to use the config file to specify the DbConfiguration instance to use. To do this, set the codeConfigurationType attribute of the entityFramework section. For example:

```
<entityFramework codeConfigurationType="MyNamespace.MyDbConfiguration, MyAssembly"> 
    ...Your EF config... 
</entityFramework> 
```

The value of codeConfigurationType must be the assembly and namespace qualified name of your DbConfiguration class.

The second option is to place DbConfigurationTypeAttribute on your context class. For example:

```
[DbConfigurationType(typeof(MyDbConfiguration))] 
public class MyContextContext : DbContext 
{ 
} 
```

The value passed to the attribute can either be your DbConfiguration type - as shown above - or the assembly and namespace qualified type name string. For example:

```
[DbConfigurationType("MyNamespace.MyDbConfiguration, MyAssembly")] 
public class MyContextContext : DbContext 
{ 
} 
```

## Setting DbConfiguration explicitly

There are some situations where configuration may be needed before any DbContext type has been used. Examples of this include:

*   Using DbModelBuilder to build a model without a context
*   Using some other framework/utility code that utilizes a DbContext where that context is used before your application context is used

In such situations EF is unable to discover the configuration automatically and you must instead do one of the following:

*   Set the DbConfiguration type in the config file, as described in the Moving DbConfiguration section above
*   Call the static DbConfiguration.SetConfiguration method during application startup

## Overriding DbConfiguration

There are some situations where you need to override the configuration set in the DbConfiguration. This is not typically done by application developers but rather by thrid party providers and plug-ins that cannot use a derived DbConfiguration class.

For this, EntityFramework allows an event handler to be registered that can modify existing configuration just before it is locked down. It also provides a sugar method specifically for replacing any service returned by the EF service locator. This is how it is intended to be used:

*   At app startup (before EF is used) the plug-in or provider should register the event handler method for this event. (Note that this must happen before the application uses EF.)
*   The event handler makes a call to ReplaceService for every service that needs to be replaced.

For example, to repalce IDbConnectionFactory and DbProviderService you would register a handler something like this:

```
DbConfiguration.Loaded += (_, a) => 
   { 
       a.ReplaceService<DbProviderServices>((s, k) => new MyProviderServices(s)); 
       a.ReplaceService<IDbConnectionFactory>((s, k) => new MyConnectionFactory(s)); 
   }; 
```

In the code above MyProviderServices and MyConnectionFactory represent your implementations of the service.

You can also add additional dependency handlers to get the same effect.

Note that you could also wrap DbProviderFactory in this way, but doing so will only effect EF and not uses of the DbProviderFactory outside of EF. For this reason you’ll probably want to continue to wrap DbProviderFactory as you have before.

You should also keep in mind the services that you run externally to your application - e.g. running migrations from Package Manager console. When you run migrate from the console it will attempt to find your DbConfiguration. However, whether or not it will get the wrapped service depends on where the event handler it registered. If it is registered as part of the construction of your DbConfiguration then the code should execute and the service should get wrapped. Usually this won’t be the case and this means that tooling won’t get the wrapped service.

# entity-framework - 实体框架 5 SaveChanges 不工作，没有错误

> ID：12490192
> 
> 赞同：2
> 
> 时间：2012-09-19T07:24:22.897
> 
> 标签：entity-framework, entity-framework-5, entity-sql

关于这个主题的许多问题似乎都不符合我的情况。我有一个大数据模型。在某些情况下，只需要在 UI 上显示几个字段，因此对于那些我替换了 LINQ to Entity 查询，该查询使用 Entity SQL 查询提取所有内容，只检索所需的列，使用 Type 构造函数，以便我得到返回的实体而不是 DbDataRecord，如下所示：

```
SELECT VALUE MyModelNameSpace.INCIDENT(incident.FieldA, incident.FieldB, ...) FROM ... AS ... 
```

这有效并在 UI 中显示字段。如果我进行更改，当我退出 UI 元素时，更改会返回到实体模型。但是当我执行 SaveChanges 时，更改不会持久保存到数据库中。日志中没有显示错误。现在，如果我非常小心地将上述查询替换为检索整个实体的 Entity Sql 查询，如下所示：

```
SELECT VALUE incident FROM MyDB.INCIDENTs AS incident... 
```

更改确实会保存在数据库中！因此，作为测试，我创建了另一个查询，如第一个查询，命名实体中的每一列，它应该与第二个实体 SQL 查询完全等效。然而，它也没有持久化对数据库的更改。

我尝试将返回结果上的 MergeOption 设置为 PreserveChanges，以开始跟踪，如下所示：

```
incidents.MergeOption = MergeOption.PreserveChanges; 
```

但这没有任何效果。但实际上，如果使用 Entity Sql 检索整个实体会持续更改，那么在检索字段子集时表现不同的逻辑目的是什么？我想知道这是否是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:14:48.280

Gert 是正确的，问题是实体没有附加。*你好，格特！Ik 是 ervan 胡说八道！* 我只是想添加一些细节来展示完整的解决方案。基本上，ObjectContext 有一个 Attach 方法，所以你会认为就是这样。但是，当您的 Entity SQL 选择语句命名列，并且您像我一样使用 Type 创建对象时，不会创建 EntityKey，并且 ObjectContext.Attach 失败。在尝试插入我自己创建的 EntityKey 但失败后，我偶然发现了在 Entity Framework 4 中添加的 ObjectSet.Attach。它不会失败，而是会在缺少 EntityKey 时创建它。不错的触感。

代码是（这可能可以用更少的步骤完成，但我知道这是可行的）：

```
var QueryString = "SELECT VALUE RunTimeUIDesigner.INCIDENT  (incident.INCIDENT_NBR,incident.LOCATION,etc"
ObjectQuery<INCIDENT> incidents = orbcadDB.CreateQuery<INCIDENT>(QueryString);
incidents.MergeOption = MergeOption.PreserveChanges;
List<INCIDENT> retrievedIncidents = incidents.ToList<INCIDENT>();
orbcadDB.INCIDENTs.Attach(retrievedIncidents[0]);
iNCIDENTsViewSource.Source = retrievedIncidents; 
```

# android - 如何在 Android 中使用 JavaMail Api

> ID：12490194
> 
> 赞同：0
> 
> 时间：2012-09-19T07:24:31.747
> 
> 标签：android, email, jakarta-mail

我有一个 Html 要从我的 android 应用程序作为电子邮件发送。我不想将其作为附件发送。我想在电子邮件正文中显示它。是否可以使用**JavaMail api**来发送？我可以发送电子邮件使用javamail的gmail应用程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:56:51.777

在 Android 中，当您想要做的不是应用程序的主要关注点时，您通常会使用 an`Intent`并要求另一个应用程序执行此操作。处理此意图的应用程序通常专注于完成此目标。例如：如果您想拨打电话，通常将其交给拨号应用程序，或者如果您想发送电子邮件，则让 GMail 或其他电子邮件应用程序处理它。

完成此任务的最简单且推荐的方法是触发 Intent。

以下代码片段应该为您完成工作。

```
Intent mailIntent = new Intent(Intent.ACTION_SEND); // says we want to SEND something
mailIntent.putExtra(Intent.EXTRA_EMAIL, new String[]{"to.email@server.com"});
mailIntent.putExtra(Intent.EXTRA_SUBJECT, "email subject");
mailIntent.putExtra(Intent.EXTRA_TEXT, "message content. Html should go here.");

// Some versions of android, doesn't recognize your intention is to send an email, 
// even though you specify the EXTRA_EMAIL and they show all sorts of apps as 
// options. Specifying the rfc type fixes this on most devices.

mailIntent.setType("message/rfc822"); 

// now we fire the intent

startActivity(mailntent); 
```

请注意，Android 上的 GMail 应用和默认交换应用可能会将您的 html 显示为文本。根据我的经验，如果您在 MS Outlook 或类似应用程序中打开发送的文档，它会识别出该邮件是 HTML 格式的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:27:40.880

使用该机制在 Android 中发送电子邮件非常容易`Intent`，没有理由以不好的方式执行此操作。

尝试阅读[此链接](http://www.mkyong.com/android/how-to-send-email-in-android/)和一些关于此的 Android 文档。

# android - 将 TextView 放在另一个的右侧并使其始终可见

> ID：12490196
> 
> 赞同：3
> 
> 时间：2012-09-19T07:24:40.070
> 
> 标签：android, android-layout, android-linearlayout

将一个 TextView 放在另一个 TextView 的右侧很容易，但是当基础 TextView 的宽度大于屏幕大小时，右侧 TextView 变得不可见。

我的 XML 布局：

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">

<TextView
    android:id="@+id/messages"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:lines="1"
    android:text="Messages" />

<TextView
    android:id="@+id/counter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dp"
    android:background="@drawable/bg_white_r30p0pl10"
    android:drawableRight="@drawable/arrow_orange"
    android:text="800" />

</LinearLayout> 
```

即使基本 TextView 宽度很大，如何制作正确的 TextView 屏幕？

升级版：

换句话说，我需要：

如果第一个 TextView 很短：

```
 |[ShotrTextView][TextView]      | 
```

如果第一个 TextView 很长：

```
 |[LooooooongTextVi...][TextView]| 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T08:50:59.403

解决方案是使用 shrinkColumns = 0 的 TableLayout

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:shrinkColumns="0" >

<TableRow
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/messages"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:lines="1"
        android:text="Messages" />

    <TextView
        android:id="@+id/counter"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:background="@drawable/bg_white_r30p0pl10"
        android:drawableRight="@drawable/arrow_orange"
        android:text="800" />

</TableRow>

</TableLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:56:20.033

试试这个

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ellipsize="end"
        android:inputType="text"
        android:text="" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_weight="0"
        android:inputType="text"
        android:text="12345" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T07:57:09.750

将其发布为思考线是这样做的唯一方法......

```
 <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:singleLine="true"
                android:layout_height="wrap_content"
                android:text="Medium TextMedium TextMedium TextMedium Text"
                android:maxWidth="280dp"
                android:ellipsize="end"
                />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:singleLine="true"
                android:text="HHH"
                 /> 
```

> 并像这样创建一[维文件](https://stackoverflow.com/questions/6403619/how-to-support-all-the-different-resolutions-of-android-products)并使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T07:26:55.890

检查答案：[并排的两个TextView，只有一个椭圆？](https://stackoverflow.com/questions/3785221/two-textviews-side-by-side-only-one-to-ellipsize)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal">

<TextView android:id="@+id/messages" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1" 
android:ellipsize="end" android:lines="1" android:text="Message" />
<TextView android:id="@+id/counter" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="5dp"
  android:layout_weight="1" android:background="@drawable/bg_white_r30p0pl10" android:drawableRight="@drawable/arrow_orange" android:text="800" /> 

</LinearLayout> 
```

# javascript - 使用 Javascript 添加具有绝对位置的 span 元素会增加高度

> ID：12490199
> 
> 赞同：1
> 
> 时间：2012-09-19T07:24:52.173
> 
> 标签：javascript, html, css, position

单击以下代码中的圆角矩形之一时，需要创建 span 元素的副本并将其放置在原始元素的顶部。代码会这样做，但新元素的高度增加了。请提出可能出错的地方。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<body>

<div id="phrasesDiv" style="line-height:250%" /></div>

<style type="text/css">
.phrase {
    font-size:18pt;
    color:blue;
    background: palegreen;
    border:2px solid green;
    padding:2px 10px 2px 10px;
    -webkit-border-radius:10px;
}
</style>

<script type="text/javascript">

{
    // create the phrase list dynamically
    var phraseList = "Apple~Orange~Kiwi~Guava";
    var phrasesDiv = document.getElementById("phrasesDiv");
    var phrases = phraseList.split('~');
    for (var i=0; i<phrases.length; i++)
        phrasesDiv.innerHTML += "<span id=\""+phrases[i]+"\" class=\"phrase\" onmousedown=\"phraseTouched('"+phrases[i]+"')\">"+phrases[i]+"</span>&nbsp;&nbsp;&nbsp;\n";
}

function getDim(el) {
    var lw = el.offsetWidth;
    var lh = el.offsetHeight;
    for (var lx=0, ly=0; el != null; lx += el.offsetLeft, ly += el.offsetTop, el = el.offsetParent);
    return {x:lx,y:ly,w:lw,h:lh};
}

function phraseTouched(id) {
    var elem = document.getElementById(id);
    var dim = getDim(elem);
    var dragElem = document.createElement('span')
    dragElem.id = id+"_copy";
    dragElem.innerHTML = id;
    dragElem.className += " phrase";
    dragElem.style.background = "pink";
    dragElem.style.position = "absolute";
    dragElem.style.left =  dim.x+"px";
    dragElem.style.top =  dim.y+"px";
    elem.parentNode.appendChild(dragElem);
}

</script>

</html> 
```

编辑：以下功能有效......但我仍然很想知道如果我以编程方式添加到 div 会增加高度。

```
function phraseTouched(id) {
    var elem = document.getElementById(id); 
    var dim = getDim(elem); 
    document.body.innerHTML += "<span id=\"_"+id+"\" class=\"phraseDrag\" style=\"left:"+dim.x+"px;top:"+dim.y+"px;position:absolute;\">"+id+" </span>\n";  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:47:50.427

简而言之，当您将讨厌的“位置：绝对”属性添加到您的元素并且它不知道如何表示自己时，您打破了标准布局模型。如果您想保持大部分样式，最简单的解决方法是简单地添加：

```
display: inline-block; 
```

在你的 .phrase 风格的某个地方，至少我会这样做。当然，只要您不介意丢失 line-height 属性，Vijay 的解决方案就可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:37:08.473

希望这没问题。刚刚删除了**250% 的行高**。还将标记更改为**W3C 标准（不完全）**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Demo</title>
        <style type="text/css">
            .phrase {
                font-size:18pt;
                color:blue;
                background: palegreen;
                border:2px solid green;
                padding:2px 10px 2px 10px;
                -webkit-border-radius:10px;
            }
        </style>
    </head>

    <body>
        <div id="phrasesDiv"></div>
        <script type="text/javascript">

            // create the phrase list dynamically
            var phraseList = "Apple~Orange~Kiwi~Guava";
            var phrasesDiv = document.getElementById("phrasesDiv");
            var phrases = phraseList.split('~');
            for (var i=0; i<phrases.length; i++)
                phrasesDiv.innerHTML += "<span id=\""+phrases[i]+"\" class=\"phrase\" onmousedown=\"phraseTouched('"+phrases[i]+"')\">"+phrases[i]+"</span>&nbsp;&nbsp;&nbsp;\n";

            function getDim(el) {
                var lw = el.offsetWidth;
                var lh = el.offsetHeight;
                for (var lx=0, ly=0; el != null; lx += el.offsetLeft, ly += el.offsetTop, el = el.offsetParent);
                return {x:lx,y:ly,w:lw,h:lh};
            }

            function phraseTouched(id) {
                var elem = document.getElementById(id);
                var dim = getDim(elem);
                var dragElem = document.createElement('span')
                dragElem.id = id+"_copy";
                dragElem.innerHTML = id;
                dragElem.className += " phrase";
                dragElem.style.background = "pink";
                dragElem.style.position = "absolute";
                dragElem.style.left =  dim.x+"px";
                dragElem.style.top =  dim.y+"px";
                elem.parentNode.appendChild(dragElem);
            }

        </script>
    </body>
</html> 
```

**更新**：不删除行高。为每个替换的 span 标签添加了 line-height。

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Demo</title>
        <style type="text/css">
            .phrase {
                font-size:18pt;
                color:blue;
                background: palegreen;
                border:2px solid green;
                padding:2px 10px 2px 10px;
                -webkit-border-radius:10px;
            }
        </style>
    </head>
    <body>
        <div style="height:100%;width:500px;border:1px solid #B0B0B0;">
            <div id="phrasesDiv" style="line-height:250%;"></div>
        </div>
        <script type="text/javascript">

            // create the phrase list dynamically
            var phraseList = "Apple~Orange~Kiwi~Guava~Test1~Test2~Test3~Test4~Test5~Test6~Test7~Test8~Test9~Test10";
            var phrasesDiv = document.getElementById("phrasesDiv");
            var phrases = phraseList.split('~');
            for (var i=0; i<phrases.length; i++)
            {
                phrasesDiv.innerHTML += "<span id=\""+phrases[i]+"\" class=\"phrase\" onmousedown=\"phraseTouched('"+phrases[i]+"')\">"+phrases[i]+"</span>&nbsp;&nbsp;&nbsp;\n";
            }

            function getDim(el) {
                var lw = el.offsetWidth;
                var lh = el.offsetHeight;
                for (var lx=0, ly=0; el != null; lx += el.offsetLeft, ly += el.offsetTop, el = el.offsetParent);
                return {x:lx,y:ly,w:lw,h:lh};
            }

            function phraseTouched(id) {
                var elem = document.getElementById(id);
                var dim = getDim(elem);
                var dragElem = document.createElement('span')
                dragElem.id = id+"_copy";
                dragElem.innerHTML = id;
                dragElem.className += " phrase";
                dragElem.style.background = "pink";
                dragElem.style.position = "absolute";
                dragElem.style.left =  dim.x+"px";
                dragElem.style.top =  dim.y+"px";
                dragElem.style.lineHeight = "27px";
                elem.parentNode.appendChild(dragElem);
            }

        </script>
    </body>
</html> 
```

# c# - System.Array 上的 foreach

> ID：12490200
> 
> 赞同：0
> 
> 时间：2012-09-19T07:24:53.260
> 
> 标签：c#, arrays, casting, foreach, system.array

给定以下代码：

```
static void Main() {
    string[] myArray = {"One", "Two", "Three"};

    PrintArray(myArray);
}

static void PrintArray(System.Array array1) {

    foreach (string s in array1) 
        Console.WriteLine(s);
} 
```

我很惊讶我可以毫无错误地编译这些行，因为在`PrintArray`编译器中无法知道 array1 是什么类型的数组（在这种情况下是`System.string[]`）。如果我这样更改 foreach 行：`foreach (int s in array1)`，代码仍将编译，但会生成运行时无效转换异常。

在这种情况下，编译不应该确保在 foreach 语句中只能使用 Object 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:35:44.633

通过指定循环变量的类型，您可以将数组中的每个元素显式拆箱/强制转换为该类型。

在字符串的情况下，它是从对象到字符串的强制转换。
如果您的数组是一个 int 数组，您将执行拆箱操作而不是强制转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:36:36.073

编译器知道您正在传入 a `System.Array`，这是一个`object`基于 - 的集合。它不能静态地知道数组包含什么样的对象，因此无法确保代码在一般情况下运行时不会出错。强制转换`int`必须在运行时执行并且可能会失败。

# android - MonoAndroid：在 monoDevelop 和 VisualStudio 的指定位置找不到 sdk

> ID：12490201
> 
> 赞同：2
> 
> 时间：2012-09-19T07:24:58.430
> 
> 标签：android, xamarin.android

我已经在 windows 中安装了 MonoAndroid 和 monoDevelop。但是当我想设置 android sdk 位置时，monoDevelop 总是说“在指定位置找不到 SDK”。

SDK 位于“C:\SDK”中。我还尝试使用 Windows 安装程序安装 android SDK。

编辑：当我在用于设置 SDK 路径的 Visual Studio 选项中单击“Mono for android”时出现错误：
“尝试初始化 MonoAndroidPackage 时出错：
System.ArgumentNulException：值不能为空。
参数名称：path1
.. 。”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:05:59.097

"*确保已下载并安装了 android SDK 工具和平台工具。为此，请从开始菜单打开 Android SDK 管理器，并确保每个工具的“状态”为“已安装”* “！！！

有了这个解决方案，问题必须解决！

[同样的问题 - 解决了！](https://stackoverflow.com/questions/13476031/there-wan-an-error-attempting-to-initialize-the-monoandroidpackage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:16:53.453

我刚刚遇到这个问题，并意识到我的 PC 上没有安装 Java 和 Java SE JDK。也许这会对你有所帮助。

# python - PyQt4：调整dockWidget大小时，滚动条不显示在滚动区域中

> ID：12490209
> 
> 赞同：2
> 
> 时间：2012-09-19T07:25:23.980
> 
> 标签：python, scrollbar, pyqt4, qdockwidget

我创建了一个 python 测试程序 (Test_InfoPanel.py)，它有 MainWindow 和 dockWidget，在其中还有一个 tabWidget 和 scrollArea 小部件。但是，当我调整 MainWindow 的大小时，垂直滚动条不会自动出现

同样，当我取消停靠 dockWidget 并调整大小时，垂直滚动条不会自动出现。

请帮忙！

**测试程序（Test_InfoPanel.py）：**

```
#!/usr/bin/env python

# Filename: Test_InfoPanel.py
# Date: 2012-Sep-18
'''
This program test the scrollarea to show scrollbars for the InfoPanel_UI.
'''

import sys
from PyQt4 import QtCore, QtGui

if __name__ == "__main__":
    import sys
    app = QtGui.QApplication(sys.argv)
    # Look and feel changed to 'Cleanlooks'.
    app.setStyle('Cleanlooks')

    from InfoPanel_UI import Ui_MainWindow_InfoPanel

    AppWindow = QtGui.QMainWindow()
    ui = Ui_MainWindow_InfoPanel()
    ui.setupUi(AppWindow)

    ui.tabWidget_Info_Panel.setCurrentWidget(ui.scrollArea_Info_Panel)

    AppWindow.show()
    sys.exit(app.exec_()) 
```

* * *

**生成的 *.ui 脚本 (InfoPanel_UI.py)：**

```
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'InfoPanel.ui'
#
# Created: Wed Sep 19 13:11:06 2012
#      by: PyQt4 UI code generator 4.9.4
#
# WARNING! All changes made in this file will be lost!

from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_MainWindow_InfoPanel(object):
    def setupUi(self, MainWindow_InfoPanel):
        MainWindow_InfoPanel.setObjectName(_fromUtf8("MainWindow_InfoPanel"))
        MainWindow_InfoPanel.resize(602, 263)
        MainWindow_InfoPanel.setDocumentMode(False)
        self.centralwidget = QtGui.QWidget(MainWindow_InfoPanel)
        self.centralwidget.setObjectName(_fromUtf8("centralwidget"))
        MainWindow_InfoPanel.setCentralWidget(self.centralwidget)
        self.statusbar = QtGui.QStatusBar(MainWindow_InfoPanel)
        self.statusbar.setObjectName(_fromUtf8("statusbar"))
        MainWindow_InfoPanel.setStatusBar(self.statusbar)
        self.dockWidget_Info_Panel = QtGui.QDockWidget(MainWindow_InfoPanel)
        self.dockWidget_Info_Panel.setMinimumSize(QtCore.QSize(300, 140))
        font = QtGui.QFont()
        font.setBold(True)
        font.setItalic(True)
        font.setWeight(75)
        self.dockWidget_Info_Panel.setFont(font)
        self.dockWidget_Info_Panel.setLayoutDirection(QtCore.Qt.LeftToRight)
        self.dockWidget_Info_Panel.setAllowedAreas(QtCore.Qt.LeftDockWidgetArea|QtCore.Qt.RightDockWidgetArea)
        self.dockWidget_Info_Panel.setObjectName(_fromUtf8("dockWidget_Info_Panel"))
        self.dockWidgetContents_Info_Panel = QtGui.QWidget()
        self.dockWidgetContents_Info_Panel.setObjectName(_fromUtf8("dockWidgetContents_Info_Panel"))
        self.tabWidget_Info_Panel = QtGui.QTabWidget(self.dockWidgetContents_Info_Panel)
        self.tabWidget_Info_Panel.setGeometry(QtCore.QRect(0, 0, 300, 215))
        font = QtGui.QFont()
        font.setBold(False)
        font.setItalic(False)
        font.setWeight(50)
        self.tabWidget_Info_Panel.setFont(font)
        self.tabWidget_Info_Panel.setObjectName(_fromUtf8("tabWidget_Info_Panel"))
        self.tab_1 = QtGui.QWidget()
        self.tab_1.setObjectName(_fromUtf8("tab_1"))
        self.scrollArea_Info_Panel = QtGui.QScrollArea(self.tab_1)
        self.scrollArea_Info_Panel.setGeometry(QtCore.QRect(9, 9, 271, 171))
        self.scrollArea_Info_Panel.setVerticalScrollBarPolicy(QtCore.Qt.ScrollBarAsNeeded)
        self.scrollArea_Info_Panel.setWidgetResizable(True)
        self.scrollArea_Info_Panel.setObjectName(_fromUtf8("scrollArea_Info_Panel"))
        self.scrollAreaWidgetContents = QtGui.QWidget()
        self.scrollAreaWidgetContents.setGeometry(QtCore.QRect(0, 0, 269, 169))
        self.scrollAreaWidgetContents.setObjectName(_fromUtf8("scrollAreaWidgetContents"))
        self.frame_Info_Panel = QtGui.QFrame(self.scrollAreaWidgetContents)
        self.frame_Info_Panel.setGeometry(QtCore.QRect(0, 0, 261, 161))
        self.frame_Info_Panel.setObjectName(_fromUtf8("frame_Info_Panel"))
        self.label_Eqpt_Model = QtGui.QLabel(self.frame_Info_Panel)
        self.label_Eqpt_Model.setGeometry(QtCore.QRect(10, 10, 111, 27))
        self.label_Eqpt_Model.setObjectName(_fromUtf8("label_Eqpt_Model"))
        self.lineEdit_Eqpt_Model = QtGui.QLineEdit(self.frame_Info_Panel)
        self.lineEdit_Eqpt_Model.setEnabled(False)
        self.lineEdit_Eqpt_Model.setGeometry(QtCore.QRect(120, 10, 111, 27))
        palette = QtGui.QPalette()
        brush = QtGui.QBrush(QtGui.QColor(60, 60, 60))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(60, 60, 60))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 127))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Text, brush)
        self.lineEdit_Eqpt_Model.setPalette(palette)
        self.lineEdit_Eqpt_Model.setObjectName(_fromUtf8("lineEdit_Eqpt_Model"))
        self.label_State = QtGui.QLabel(self.frame_Info_Panel)
        self.label_State.setGeometry(QtCore.QRect(10, 40, 111, 27))
        self.label_State.setObjectName(_fromUtf8("label_State"))
        self.lineEdit_State = QtGui.QLineEdit(self.frame_Info_Panel)
        self.lineEdit_State.setEnabled(False)
        self.lineEdit_State.setGeometry(QtCore.QRect(120, 40, 111, 27))
        palette = QtGui.QPalette()
        brush = QtGui.QBrush(QtGui.QColor(60, 60, 60))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(60, 60, 60))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 127))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Text, brush)
        self.lineEdit_State.setPalette(palette)
        self.lineEdit_State.setObjectName(_fromUtf8("lineEdit_State"))
        self.groupBox_Current_Position = QtGui.QGroupBox(self.frame_Info_Panel)
        self.groupBox_Current_Position.setGeometry(QtCore.QRect(10, 70, 241, 91))
        palette = QtGui.QPalette()
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.WindowText, brush)
        brush = QtGui.QBrush(QtGui.QColor(85, 255, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Button, brush)
        brush = QtGui.QBrush(QtGui.QColor(170, 255, 127))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Light, brush)
        brush = QtGui.QBrush(QtGui.QColor(127, 255, 63))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Midlight, brush)
        brush = QtGui.QBrush(QtGui.QColor(42, 127, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Dark, brush)
        brush = QtGui.QBrush(QtGui.QColor(56, 170, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Mid, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.BrightText, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.ButtonText, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Base, brush)
        brush = QtGui.QBrush(QtGui.QColor(85, 255, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Window, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Shadow, brush)
        brush = QtGui.QBrush(QtGui.QColor(170, 255, 127))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.AlternateBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 220))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.ToolTipBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.ToolTipText, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.WindowText, brush)
        brush = QtGui.QBrush(QtGui.QColor(85, 255, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Button, brush)
        brush = QtGui.QBrush(QtGui.QColor(170, 255, 127))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Light, brush)
        brush = QtGui.QBrush(QtGui.QColor(127, 255, 63))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Midlight, brush)
        brush = QtGui.QBrush(QtGui.QColor(42, 127, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Dark, brush)
        brush = QtGui.QBrush(QtGui.QColor(56, 170, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Mid, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.BrightText, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.ButtonText, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Base, brush)
        brush = QtGui.QBrush(QtGui.QColor(85, 255, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Window, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Shadow, brush)
        brush = QtGui.QBrush(QtGui.QColor(170, 255, 127))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.AlternateBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 220))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.ToolTipBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.ToolTipText, brush)
        brush = QtGui.QBrush(QtGui.QColor(42, 127, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.WindowText, brush)
        brush = QtGui.QBrush(QtGui.QColor(85, 255, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Button, brush)
        brush = QtGui.QBrush(QtGui.QColor(170, 255, 127))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Light, brush)
        brush = QtGui.QBrush(QtGui.QColor(127, 255, 63))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Midlight, brush)
        brush = QtGui.QBrush(QtGui.QColor(42, 127, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Dark, brush)
        brush = QtGui.QBrush(QtGui.QColor(56, 170, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Mid, brush)
        brush = QtGui.QBrush(QtGui.QColor(42, 127, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.BrightText, brush)
        brush = QtGui.QBrush(QtGui.QColor(42, 127, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.ButtonText, brush)
        brush = QtGui.QBrush(QtGui.QColor(85, 255, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Base, brush)
        brush = QtGui.QBrush(QtGui.QColor(85, 255, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Window, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Shadow, brush)
        brush = QtGui.QBrush(QtGui.QColor(85, 255, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.AlternateBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 220))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.ToolTipBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.ToolTipText, brush)
        self.groupBox_Current_Position.setPalette(palette)
        self.groupBox_Current_Position.setObjectName(_fromUtf8("groupBox_Current_Position"))
        self.label_Current_Position_X = QtGui.QLabel(self.groupBox_Current_Position)
        self.label_Current_Position_X.setGeometry(QtCore.QRect(20, 20, 41, 27))
        self.label_Current_Position_X.setObjectName(_fromUtf8("label_Current_Position_X"))
        self.lineEdit_Current_Position_X = QtGui.QLineEdit(self.groupBox_Current_Position)
        self.lineEdit_Current_Position_X.setEnabled(False)
        self.lineEdit_Current_Position_X.setGeometry(QtCore.QRect(60, 20, 161, 27))
        palette = QtGui.QPalette()
        brush = QtGui.QBrush(QtGui.QColor(60, 60, 60))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(60, 60, 60))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 127))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Text, brush)
        self.lineEdit_Current_Position_X.setPalette(palette)
        self.lineEdit_Current_Position_X.setObjectName(_fromUtf8("lineEdit_Current_Position_X"))
        self.label_Current_Position_Y = QtGui.QLabel(self.groupBox_Current_Position)
        self.label_Current_Position_Y.setGeometry(QtCore.QRect(20, 50, 41, 27))
        self.label_Current_Position_Y.setObjectName(_fromUtf8("label_Current_Position_Y"))
        self.lineEdit_Current_Position_Y = QtGui.QLineEdit(self.groupBox_Current_Position)
        self.lineEdit_Current_Position_Y.setEnabled(False)
        self.lineEdit_Current_Position_Y.setGeometry(QtCore.QRect(60, 50, 161, 27))
        palette = QtGui.QPalette()
        brush = QtGui.QBrush(QtGui.QColor(60, 60, 60))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(60, 60, 60))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 127))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Text, brush)
        self.lineEdit_Current_Position_Y.setPalette(palette)
        self.lineEdit_Current_Position_Y.setObjectName(_fromUtf8("lineEdit_Current_Position_Y"))
        self.scrollArea_Info_Panel.setWidget(self.scrollAreaWidgetContents)
        self.tabWidget_Info_Panel.addTab(self.tab_1, _fromUtf8(""))
        self.tab_2 = QtGui.QWidget()
        self.tab_2.setObjectName(_fromUtf8("tab_2"))
        self.tabWidget_Info_Panel.addTab(self.tab_2, _fromUtf8(""))
        self.dockWidget_Info_Panel.setWidget(self.dockWidgetContents_Info_Panel)
        MainWindow_InfoPanel.addDockWidget(QtCore.Qt.DockWidgetArea(2), self.dockWidget_Info_Panel)

        self.retranslateUi(MainWindow_InfoPanel)
        self.tabWidget_Info_Panel.setCurrentIndex(0)
        QtCore.QMetaObject.connectSlotsByName(MainWindow_InfoPanel)

    def retranslateUi(self, MainWindow_InfoPanel):
        MainWindow_InfoPanel.setWindowTitle(QtGui.QApplication.translate("MainWindow_InfoPanel", "MainWindow Info Panel", None, QtGui.QApplication.UnicodeUTF8))
        self.dockWidget_Info_Panel.setWindowTitle(QtGui.QApplication.translate("MainWindow_InfoPanel", "Info Panel", None, QtGui.QApplication.UnicodeUTF8))
        self.label_Eqpt_Model.setText(QtGui.QApplication.translate("MainWindow_InfoPanel", "Eqpt Model:", None, QtGui.QApplication.UnicodeUTF8))
        self.lineEdit_Eqpt_Model.setText(QtGui.QApplication.translate("MainWindow_InfoPanel", "ABC", None, QtGui.QApplication.UnicodeUTF8))
        self.label_State.setText(QtGui.QApplication.translate("MainWindow_InfoPanel", "State:", None, QtGui.QApplication.UnicodeUTF8))
        self.lineEdit_State.setText(QtGui.QApplication.translate("MainWindow_InfoPanel", "Working", None, QtGui.QApplication.UnicodeUTF8))
        self.groupBox_Current_Position.setTitle(QtGui.QApplication.translate("MainWindow_InfoPanel", "Current Position:", None, QtGui.QApplication.UnicodeUTF8))
        self.label_Current_Position_X.setText(QtGui.QApplication.translate("MainWindow_InfoPanel", "X =", None, QtGui.QApplication.UnicodeUTF8))
        self.lineEdit_Current_Position_X.setText(QtGui.QApplication.translate("MainWindow_InfoPanel", "1000.00 m", None, QtGui.QApplication.UnicodeUTF8))
        self.label_Current_Position_Y.setText(QtGui.QApplication.translate("MainWindow_InfoPanel", "Y =", None, QtGui.QApplication.UnicodeUTF8))
        self.lineEdit_Current_Position_Y.setText(QtGui.QApplication.translate("MainWindow_InfoPanel", "1000.00 m", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget_Info_Panel.setTabText(self.tabWidget_Info_Panel.indexOf(self.tab_1), QtGui.QApplication.translate("MainWindow_InfoPanel", "Info_Pg 1", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget_Info_Panel.setTabText(self.tabWidget_Info_Panel.indexOf(self.tab_2), QtGui.QApplication.translate("MainWindow_InfoPanel", "Info_Pg 2", None, QtGui.QApplication.UnicodeUTF8)) 
```

* * *

**PS：**我最初将 mainWindow 创建为 Dialog，但意识到在 undock & redock 之后，dockWidget 无法正确停靠。不知何故，有一个偏移量。如果 mainWindow 是 QtGui.QMainWindow 而不是 QtGui.QDialog，这似乎不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:22:19.950

`ui`您在文件中没有任何布局。不要只是将小部件放在某些位置。使用适当的布局来放置小部件。布局将确保小部件在您调整大小时正确增长/缩小。

官方文档有一个[在 Qt Designer 中使用布局](http://doc.qt.digia.com/4.7-snapshot/designer-layouts.html)的部分。

**编辑**

`ui`显示正确使用布局的示例文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>MainWindow</class>
 <widget class="QMainWindow" name="MainWindow">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>539</width>
    <height>600</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>MainWindow</string>
  </property>
  <widget class="QWidget" name="centralwidget">
   <layout class="QGridLayout" name="gridLayout">
    <item row="0" column="0">
     <widget class="QFrame" name="frame">
      <property name="frameShape">
       <enum>QFrame::StyledPanel</enum>
      </property>
      <property name="frameShadow">
       <enum>QFrame::Raised</enum>
      </property>
     </widget>
    </item>
   </layout>
  </widget>
  <widget class="QMenuBar" name="menubar">
   <property name="geometry">
    <rect>
     <x>0</x>
     <y>0</y>
     <width>539</width>
     <height>21</height>
    </rect>
   </property>
  </widget>
  <widget class="QStatusBar" name="statusbar"/>
  <widget class="QDockWidget" name="dockWidget_2">
   <attribute name="dockWidgetArea">
    <number>2</number>
   </attribute>
   <widget class="QWidget" name="dockWidgetContents_2">
    <layout class="QVBoxLayout" name="verticalLayout_2">
     <item>
      <widget class="QTabWidget" name="tabWidget">
       <widget class="QWidget" name="tab">
        <attribute name="title">
         <string>Tab 1</string>
        </attribute>
        <layout class="QVBoxLayout" name="verticalLayout">
         <item>
          <widget class="QScrollArea" name="scrollArea">
           <property name="widgetResizable">
            <bool>true</bool>
           </property>
           <widget class="QWidget" name="scrollAreaWidgetContents">
            <property name="geometry">
             <rect>
              <x>0</x>
              <y>0</y>
              <width>327</width>
              <height>473</height>
             </rect>
            </property>
            <layout class="QGridLayout" name="gridLayout_2">
             <item row="4" column="1">
              <widget class="QLineEdit" name="lineEdit_4"/>
             </item>
             <item row="3" column="1">
              <widget class="QLineEdit" name="lineEdit_3"/>
             </item>
             <item row="0" column="0">
              <widget class="QLabel" name="label">
               <property name="text">
                <string>Eqpt Model:</string>
               </property>
              </widget>
             </item>
             <item row="4" column="0">
              <widget class="QLabel" name="label_5">
               <property name="text">
                <string>Y=</string>
               </property>
              </widget>
             </item>
             <item row="1" column="0">
              <widget class="QLabel" name="label_2">
               <property name="text">
                <string>State:</string>
               </property>
              </widget>
             </item>
             <item row="2" column="0">
              <widget class="QLabel" name="label_3">
               <property name="text">
                <string>Current Position</string>
               </property>
              </widget>
             </item>
             <item row="1" column="1">
              <widget class="QLineEdit" name="lineEdit_2"/>
             </item>
             <item row="3" column="0">
              <widget class="QLabel" name="label_4">
               <property name="text">
                <string>X=</string>
               </property>
              </widget>
             </item>
             <item row="0" column="1">
              <widget class="QLineEdit" name="lineEdit"/>
             </item>
             <item row="5" column="1">
              <spacer name="verticalSpacer">
               <property name="orientation">
                <enum>Qt::Vertical</enum>
               </property>
               <property name="sizeHint" stdset="0">
                <size>
                 <width>20</width>
                 <height>40</height>
                </size>
               </property>
              </spacer>
             </item>
            </layout>
           </widget>
          </widget>
         </item>
        </layout>
       </widget>
       <widget class="QWidget" name="tab_2">
        <attribute name="title">
         <string>Tab 2</string>
        </attribute>
       </widget>
      </widget>
     </item>
    </layout>
   </widget>
  </widget>
 </widget>
 <resources/>
 <connections/>
</ui> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:39:06.230

我已经修改了 InfoPanel.ui（用 scrollArea 小部件中的 gridLayout 替换框架）。

**信息面板.ui：**

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>MainWindow_InfoPanel</class>
 <widget class="QMainWindow" name="MainWindow_InfoPanel">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>602</width>
    <height>263</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>MainWindow Info Panel</string>
  </property>
  <property name="documentMode">
   <bool>false</bool>
  </property>
  <widget class="QWidget" name="centralwidget">
   <widget class="QFrame" name="frame_Info_Panel">
    <property name="geometry">
     <rect>
      <x>20</x>
      <y>50</y>
      <width>261</width>
      <height>161</height>
     </rect>
    </property>
   </widget>
  </widget>
  <widget class="QStatusBar" name="statusbar"/>
  <widget class="QDockWidget" name="dockWidget_Info_Panel">
   <property name="minimumSize">
    <size>
     <width>300</width>
     <height>140</height>
    </size>
   </property>
   <property name="font">
    <font>
     <weight>75</weight>
     <italic>true</italic>
     <bold>true</bold>
    </font>
   </property>
   <property name="layoutDirection">
    <enum>Qt::LeftToRight</enum>
   </property>
   <property name="allowedAreas">
    <set>Qt::LeftDockWidgetArea|Qt::RightDockWidgetArea</set>
   </property>
   <property name="windowTitle">
    <string>Info Panel</string>
   </property>
   <attribute name="dockWidgetArea">
    <number>2</number>
   </attribute>
   <widget class="QWidget" name="dockWidgetContents_Info_Panel">
    <widget class="QTabWidget" name="tabWidget_Info_Panel">
     <property name="geometry">
      <rect>
       <x>0</x>
       <y>0</y>
       <width>300</width>
       <height>215</height>
      </rect>
     </property>
     <property name="font">
      <font>
       <weight>50</weight>
       <italic>false</italic>
       <bold>false</bold>
      </font>
     </property>
     <property name="currentIndex">
      <number>0</number>
     </property>
     <widget class="QWidget" name="tab_1">
      <attribute name="title">
       <string>Info_Pg 1</string>
      </attribute>
      <widget class="QScrollArea" name="scrollArea_Info_Panel">
       <property name="geometry">
        <rect>
         <x>9</x>
         <y>9</y>
         <width>271</width>
         <height>171</height>
        </rect>
       </property>
       <property name="verticalScrollBarPolicy">
        <enum>Qt::ScrollBarAsNeeded</enum>
       </property>
       <property name="widgetResizable">
        <bool>true</bool>
       </property>
       <widget class="QWidget" name="scrollAreaWidgetContents">
        <property name="geometry">
         <rect>
          <x>0</x>
          <y>0</y>
          <width>269</width>
          <height>169</height>
         </rect>
        </property>
        <widget class="QWidget" name="gridLayoutWidget">
         <property name="geometry">
          <rect>
           <x>0</x>
           <y>0</y>
           <width>261</width>
           <height>161</height>
          </rect>
         </property>
         <layout class="QGridLayout" name="gridLayout_Info_Panel">
          <item row="0" column="0">
           <widget class="QLabel" name="label_Eqpt_Model">
            <property name="text">
             <string>Eqpt Model:</string>
            </property>
           </widget>
          </item>
          <item row="1" column="1">
           <widget class="QLineEdit" name="lineEdit_State">
            <property name="enabled">
             <bool>false</bool>
            </property>
            <property name="palette">
             <palette>
              <active>
               <colorrole role="Text">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>60</red>
                  <green>60</green>
                  <blue>60</blue>
                 </color>
                </brush>
               </colorrole>
              </active>
              <inactive>
               <colorrole role="Text">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>60</red>
                  <green>60</green>
                  <blue>60</blue>
                 </color>
                </brush>
               </colorrole>
              </inactive>
              <disabled>
               <colorrole role="Text">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>0</red>
                  <green>0</green>
                  <blue>127</blue>
                 </color>
                </brush>
               </colorrole>
              </disabled>
             </palette>
            </property>
            <property name="text">
             <string>Working</string>
            </property>
           </widget>
          </item>
          <item row="1" column="0">
           <widget class="QLabel" name="label_State">
            <property name="text">
             <string>State:</string>
            </property>
           </widget>
          </item>
          <item row="0" column="1">
           <widget class="QLineEdit" name="lineEdit_Eqpt_Model">
            <property name="enabled">
             <bool>false</bool>
            </property>
            <property name="palette">
             <palette>
              <active>
               <colorrole role="Text">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>60</red>
                  <green>60</green>
                  <blue>60</blue>
                 </color>
                </brush>
               </colorrole>
              </active>
              <inactive>
               <colorrole role="Text">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>60</red>
                  <green>60</green>
                  <blue>60</blue>
                 </color>
                </brush>
               </colorrole>
              </inactive>
              <disabled>
               <colorrole role="Text">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>0</red>
                  <green>0</green>
                  <blue>127</blue>
                 </color>
                </brush>
               </colorrole>
              </disabled>
             </palette>
            </property>
            <property name="text">
             <string>ABC</string>
            </property>
           </widget>
          </item>
          <item row="2" column="0" colspan="2">
           <widget class="QGroupBox" name="groupBox_Current_Position">
            <property name="palette">
             <palette>
              <active>
               <colorrole role="WindowText">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>0</red>
                  <green>0</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Button">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>85</red>
                  <green>255</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Light">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>170</red>
                  <green>255</green>
                  <blue>127</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Midlight">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>127</red>
                  <green>255</green>
                  <blue>63</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Dark">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>42</red>
                  <green>127</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Mid">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>56</red>
                  <green>170</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Text">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>0</red>
                  <green>0</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="BrightText">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>255</red>
                  <green>255</green>
                  <blue>255</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="ButtonText">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>0</red>
                  <green>0</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Base">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>255</red>
                  <green>255</green>
                  <blue>255</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Window">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>85</red>
                  <green>255</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Shadow">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>0</red>
                  <green>0</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="AlternateBase">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>170</red>
                  <green>255</green>
                  <blue>127</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="ToolTipBase">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>255</red>
                  <green>255</green>
                  <blue>220</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="ToolTipText">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>0</red>
                  <green>0</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
              </active>
              <inactive>
               <colorrole role="WindowText">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>0</red>
                  <green>0</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Button">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>85</red>
                  <green>255</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Light">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>170</red>
                  <green>255</green>
                  <blue>127</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Midlight">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>127</red>
                  <green>255</green>
                  <blue>63</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Dark">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>42</red>
                  <green>127</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Mid">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>56</red>
                  <green>170</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Text">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>0</red>
                  <green>0</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="BrightText">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>255</red>
                  <green>255</green>
                  <blue>255</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="ButtonText">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>0</red>
                  <green>0</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Base">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>255</red>
                  <green>255</green>
                  <blue>255</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Window">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>85</red>
                  <green>255</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Shadow">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>0</red>
                  <green>0</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="AlternateBase">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>170</red>
                  <green>255</green>
                  <blue>127</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="ToolTipBase">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>255</red>
                  <green>255</green>
                  <blue>220</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="ToolTipText">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>0</red>
                  <green>0</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
              </inactive>
              <disabled>
               <colorrole role="WindowText">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>42</red>
                  <green>127</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Button">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>85</red>
                  <green>255</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Light">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>170</red>
                  <green>255</green>
                  <blue>127</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Midlight">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>127</red>
                  <green>255</green>
                  <blue>63</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Dark">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>42</red>
                  <green>127</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Mid">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>56</red>
                  <green>170</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Text">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>42</red>
                  <green>127</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="BrightText">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>255</red>
                  <green>255</green>
                  <blue>255</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="ButtonText">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>42</red>
                  <green>127</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Base">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>85</red>
                  <green>255</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Window">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>85</red>
                  <green>255</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="Shadow">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>0</red>
                  <green>0</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="AlternateBase">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>85</red>
                  <green>255</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="ToolTipBase">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>255</red>
                  <green>255</green>
                  <blue>220</blue>
                 </color>
                </brush>
               </colorrole>
               <colorrole role="ToolTipText">
                <brush brushstyle="SolidPattern">
                 <color alpha="255">
                  <red>0</red>
                  <green>0</green>
                  <blue>0</blue>
                 </color>
                </brush>
               </colorrole>
              </disabled>
             </palette>
            </property>
            <property name="title">
             <string>Current Position:</string>
            </property>
            <widget class="QLabel" name="label_Current_Position_X">
             <property name="geometry">
              <rect>
               <x>20</x>
               <y>20</y>
               <width>41</width>
               <height>27</height>
              </rect>
             </property>
             <property name="text">
              <string>X =</string>
             </property>
            </widget>
            <widget class="QLineEdit" name="lineEdit_Current_Position_X">
             <property name="enabled">
              <bool>false</bool>
             </property>
             <property name="geometry">
              <rect>
               <x>60</x>
               <y>20</y>
               <width>161</width>
               <height>27</height>
              </rect>
             </property>
             <property name="palette">
              <palette>
               <active>
                <colorrole role="Text">
                 <brush brushstyle="SolidPattern">
                  <color alpha="255">
                   <red>60</red>
                   <green>60</green>
                   <blue>60</blue>
                  </color>
                 </brush>
                </colorrole>
               </active>
               <inactive>
                <colorrole role="Text">
                 <brush brushstyle="SolidPattern">
                  <color alpha="255">
                   <red>60</red>
                   <green>60</green>
                   <blue>60</blue>
                  </color>
                 </brush>
                </colorrole>
               </inactive>
               <disabled>
                <colorrole role="Text">
                 <brush brushstyle="SolidPattern">
                  <color alpha="255">
                   <red>0</red>
                   <green>0</green>
                   <blue>127</blue>
                  </color>
                 </brush>
                </colorrole>
               </disabled>
              </palette>
             </property>
             <property name="text">
              <string>1000.00 m</string>
             </property>
            </widget>
            <widget class="QLabel" name="label_Current_Position_Y">
             <property name="geometry">
              <rect>
               <x>20</x>
               <y>50</y>
               <width>41</width>
               <height>27</height>
              </rect>
             </property>
             <property name="text">
              <string>Y =</string>
             </property>
            </widget>
            <widget class="QLineEdit" name="lineEdit_Current_Position_Y">
             <property name="enabled">
              <bool>false</bool>
             </property>
             <property name="geometry">
              <rect>
               <x>60</x>
               <y>50</y>
               <width>161</width>
               <height>27</height>
              </rect>
             </property>
             <property name="palette">
              <palette>
               <active>
                <colorrole role="Text">
                 <brush brushstyle="SolidPattern">
                  <color alpha="255">
                   <red>60</red>
                   <green>60</green>
                   <blue>60</blue>
                  </color>
                 </brush>
                </colorrole>
               </active>
               <inactive>
                <colorrole role="Text">
                 <brush brushstyle="SolidPattern">
                  <color alpha="255">
                   <red>60</red>
                   <green>60</green>
                   <blue>60</blue>
                  </color>
                 </brush>
                </colorrole>
               </inactive>
               <disabled>
                <colorrole role="Text">
                 <brush brushstyle="SolidPattern">
                  <color alpha="255">
                   <red>0</red>
                   <green>0</green>
                   <blue>127</blue>
                  </color>
                 </brush>
                </colorrole>
               </disabled>
              </palette>
             </property>
             <property name="text">
              <string>1000.00 m</string>
             </property>
            </widget>
           </widget>
          </item>
         </layout>
        </widget>
       </widget>
      </widget>
     </widget>
     <widget class="QWidget" name="tab_2">
      <attribute name="title">
       <string>Info_Pg 2</string>
      </attribute>
     </widget>
    </widget>
   </widget>
  </widget>
 </widget>
 <resources/>
 <connections/>
</ui> 
```

* * *

在命令提示符中使用 pyuic4 -o InfoPanel_UI.py InfoPanel.ui 创建了 *_UI.pt。

使用 Test_InfoPanel.py 运行，在垂直调整大小时仍然显示滚动条未显示的相同结果。:(

# ruby-on-rails - 如何查询 memcached 中的特定片段以及如何清除所有 memcache

> ID：12490213
> 
> 赞同：2
> 
> 时间：2012-09-19T07:25:39.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, memcached, dalli

刚刚开始使用带有 rails 应用程序的 memcached

我有以下片段：

```
<% cache("home_main", :expires_in => 1.minute) do %> 
```

并想通过 Rails 控制台查询该值，但是：

```
 => nil 
1.9.1 :012 > Rails.cache.read('home_main')
 => nil 
1.9.1 :013 > Rails.cache.fetch('home_main')
 => nil 
1.9.1 :014 > 
```

我将如何查询以取回该片段？或者我如何查看当前的缓存键是什么？

另外，如何清除缓存？

来自 Rails.cache.stats

```
conn_yields: '0'
 bytes: '409071'
 curr_items: '23'
 total_items: '157'
 evictions: '0'
 reclaimed: '0'
=> nil 

>Rails.cache.clear

....
>Rails.cache.stats 
...
  bytes: '409071'
  curr_items: '23'
  total_items: '157'
  evictions: '0'
  reclaimed: '0'
 => nil 
1.9.1 :017 > 
```

我将如何真正清除 memcached？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:22:08.633

这些是我使用的 3 种主要 memcache 方法：

向缓存中添加一个值：

```
CACHE.set(CACHE_KEY, CACHE_VALUE) 
```

从缓存中读取一个值：

```
CACHE.get(CACHE_KEY) 
```

清除特定键的缓存：

```
CACHE.delete(CACHE_KEY) 
```

希望这会有所帮助......干杯。

# .net - 如何使用 Linq 和列表中的条件查询 DataTable？

> ID：12490216
> 
> 赞同：0
> 
> 时间：2012-09-19T07:25:54.523
> 
> 标签：.net, vb.net, linq, datatable

我有一个`DataTable`包含我从数据库中获得的 ID 列表。我需要做的是得到一个`List<Of Integer>`.

这个整数列表将是 中的 Id `DataTable`，但我需要根据另一个来过滤它们`List<Of Integers>`。因此，我基本上是在尝试从中生成一个 Id 列表，`DataTable`但前提是它们存在于我的其他 Id 列表中。

我知道如何进行 Linq To DataSet 查询，但我只是不确定是否可以根据另一个列表对其进行过滤，这里有一些伪代码来解释我想要实现的目标：

```
List<Of Integer> ExistingList = GetReferenceIds(whatever)
DataTable DBTable = GetAllDatabaseIds(whatever)

List<Of Integer> FilteredList = DBTable.AsEnumerable()
                                    .Where(Column("Id") IN FilteredList).ToList() 
```

有没有一种简单的方法可以做到这一点，而不必枚举列表并检查每一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:45:24.350

最[有效](https://stackoverflow.com/questions/5551264/why-is-linq-join-so-much-faster-than-linking-with-where)的是使用[`Enumerable.Join`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.join.aspx)：

```
IEnumerable<int> IDs = from row in DBTable.AsEnumerable()
             join id in ExistingList
             on row.Field<int>("Id") equals id 
             select id;  // selects the id, you could also select the DataRow 
```

哎呀！这是 VB.NET：

```
Dim IDs = From row In DBTable
          Join id In ExistingList
          On row.Field(Of Int32)("Id") Equals id
          Select id 
```

* * *

> 有没有办法让我的 ID 不在列表中？

是的，那将是一个[外部连接](http://msdn.microsoft.com/en-us/library/bb397895.aspx)。但在这种情况下[`Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)更容易（甚至可能更有效）：

```
Dim dbIDs = DBTable.AsEnumerable().Select(Function(r) r.Field(Of Int32)("Id"))
Dim notInList As IEnumerable(Of Int32) = dbIDs.Except(ExistingList) 
```

# node.js - Adobe Brackets - 调试 Node.js 和 Node-inspector

> ID：12490220
> 
> 赞同：5
> 
> 时间：2012-09-19T07:26:10.373
> 
> 标签：node.js, adobe-brackets

快速提问：是否可以使用 Adob​​e Brackets 使用 Node-inspector 调试 Node.js。喜欢在 Adob​​e Brackets 中进行单步调试吗？

谢谢
问候
克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T00:43:49.927

Node.js 有一个用于“实时开发”的括号扩展： [https ://github.com/DennisKehrig/brackets-v8-node-live](https://github.com/DennisKehrig/brackets-v8-node-live)

还有一个通用的 JS 调试器扩展： [https ://github.com/jdiehl/brackets-debugger](https://github.com/jdiehl/brackets-debugger)

问题是它们还不能一起工作：调试器假定您使用的是通常的实时开发模式，该模式连接到 Chrome 浏览器实例。这两个扩展的作者经常合作，我相信他们曾经致力于使扩展兼容（参见第一个扩展中的“v8bridge”分支）。*我认为如果你在括号开发*谷歌论坛论坛中用这个问题开始一个线程，他们会非常敏感。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-08T19:06:18.293

用于 Brackets的[Theseus 项目](http://blog.brackets.io/2013/08/28/theseus-javascript-debugger-for-chrome-and-nodejs/)是一个“全能调试器”，支持检查在 Node.js 中运行的代码。

# javascript - 在 Gmap 上添加太多位置

> ID：12490228
> 
> 赞同：0
> 
> 时间：2012-09-19T07:27:11.840
> 
> 标签：javascript, google-maps

我想做的是：我有很多地理位置。我想将它们全部添加到谷歌地图上，这些点将是透明的（不是 100% 透明的）。位置越多的区域，位置相互重叠时颜色越深。

查看此预览，我需要与此类似，但在谷歌地图上：

![在此处输入图像描述](../Images/f540840e227edcf5b395bb52e89f5472.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:40:01.477

我过去使用过的两种很棒的技术...

1.  [聚类标记](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)
2.  [热图](https://developers.google.com/maps/documentation/javascript/layers#JSHeatMaps)

集群标记允许您将大量标记浓缩成可以轻松渲染的东西。热图正是它们听起来的样子。

希望这会有所帮助：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:19:20.620

你需要一张热图..

[http://googlemapsmania.blogspot.com.au/2012/06/google-maps-api-gets-heat-maps.html](http://googlemapsmania.blogspot.com.au/2012/06/google-maps-api-gets-heat-maps.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:27:24.530

文档中的这篇文章解决了您的问题：

[https://developers.google.com/maps/articles/toomanymarkers](https://developers.google.com/maps/articles/toomanymarkers)

仅供参考 - 在 Google Maps API v3 1000 中不是“太多”，看起来你只需要一个自定义图标（你的部分透明圆圈）。

这是一个包含许多半透明圆圈（原生 Google Maps API 多边形）的示例：

[http://www.geocodezip.com/v3_polygon_exampleF.html](http://www.geocodezip.com/v3_polygon_exampleF.html)

# jquery - 无效的回发或回调参数。当使用 jquery 填充下拉列表并且有回发时

> ID：12490236
> 
> 赞同：2
> 
> 时间：2012-09-19T07:27:59.687
> 
> 标签：jquery, asp.net, ajax, asp.net-ajax

我有两个下拉列表框更改第一个我想填写第二个。我为此编写了一个 jquery，如下所示

```
function BindModel() {
var makeCode = $('#ddMake').val();
var ddModel = $("#ddModel");
if (makeCode == "0") {
    return false;
}
else {
    $("#loading").show();
    $.ajax({
        type: "POST",
        url: "Services/GetModels.ashx",
        data: { 'makeCode': makeCode },
        success: function (data) {
            $("#loading").hide();
            $.each(data, function () {
                ddModel.append($("<option />").val(this.ModelCode).text(this.ModelName));
            });
        },
        error: function () {
            $("#loading").hide();
        }
    });
}
} 
```

我有一个通用的http处理程序如下

```
context.Response.ContentType = "application/json";
        context.Response.ContentEncoding = Encoding.UTF8;
        if( context.Request["makeCode"]!=null)
        {
            var makeCode = context.Request["makeCode"].Trim();
            var lobjSearchProps = new CSearchAllProps
            {
                SearchValue = "%",
                MakeCode = makeCode
            };
            var allModelProps = new 
            CModelRestrictionLogic().GetModels(lobjSearchProps).ToList();
            context.Response.Write(JSONHelper.GetJSON(allModelProps));    
        } 
```

`CModelRestrictionLogic().GetModels(lobjSearchProps)`我从数据库中获取数据的函数在哪里。
并将`CModelRestrictionLogic().GetModels(lobjSearchProps)`列表转换为 JSON。每件事都运行良好。但是每当我发回它时都会出错：

> 无效的回发或回调参数。使用配置或页面中的 <%@ Page EnableEventValidation="true" %> 启用事件验证。出于安全目的，此功能验证回发或回调事件的参数是否源自最初呈现它们的服务器控件。如果数据有效且符合预期，请使用 ClientScriptManager.RegisterForEventValidation 方法注册回发或回调数据以进行验证。

我知道原因，因为我已经从 jquery 填写了下拉列表，所以它出现了错误。
我还在 init 上编写了函数来填充回发值中的数据，如下所示

```
 protected override void OnInit(EventArgs e)
    {
        var postedOptionValue = Request.Form[ddModel.UniqueID];
        ddModel.Items.Add(new ListItem(postedOptionValue));
        base.OnInit(e);
    } 
```

我怎样才能摆脱这个价值？我不想使用 enableEventValidation="false" 因为这是一个安全问题。

# solr - Solr 过滤器查询 - 字符串与整数

> ID：12490238
> 
> 赞同：5
> 
> 时间：2012-09-19T07:28:01.957
> 
> 标签：solr, lucene, normalize

假设我正在尝试查询一堆具有类别的文档，并且我想将查询限制为指定的类别（据我了解，这只是使用 fq 参数（过滤器查询）。

我想知道将参数设置为整​​数而不是字符串或通常情况下的数据是否会提高性能？我只会在右侧犯错，但我想我会仔细检查以防它无关紧要并且 Solr 在引擎盖下执行了某种优化？

如果我可以只过滤字符串匹配会更方便，但是..

感谢任何提示的人

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:21:32.513

除非您需要执行范围查询（数字字段对此有特殊支持）或排序（int 字段缓存比字符串字段缓存更节省内存），否则它们应该大致等效。

# javascript - onblur 在 window.onload 上触发

> ID：12490239
> 
> 赞同：1
> 
> 时间：2012-09-19T07:28:05.293
> 
> 标签：javascript, events, onblur

我的`onblur`事件正在触发`window.onload`。我怀疑我选择错误的节点。当我`console.log(input)`在`function checkList()`它显示`<input name='newTask'>` 这是正确的使用方法`onblur`吗？

```
app.view = (function(){
    function init(){
        checkList();
    }

    function checkList(){
        var input = document.getElementsByName('newTask')[0];

        input.onblur = checkInput();

        requestAnimFrame(checkList);
    }

    function checkInput(){

        alert('check input');
    }

    return {
        init : init
    }
})();

window.requestAnimFrame = (function(){
    return  window.requestAnimationFrame       || 
            window.webkitRequestAnimationFrame || 
            window.mozRequestAnimationFrame    || 
            window.oRequestAnimationFrame      || 
            window.msRequestAnimationFrame     || 
            function( callback ){
                window.setTimeout(callback, 1000 / 60);
            };
})();

window.onload = function(){
    app.view.init();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:33:34.963

您的`onblur`事件并没有提前触发，而是`checkInput`在您真正打算进行分配时调用您的函数。

替换`input.onblur = checkInput();`为`input.onblur = checkInput;`

# iphone - 可以用空值初始化 NSArray 吗？

> ID：12490243
> 
> 赞同：1
> 
> 时间：2012-09-19T07:28:32.667
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nsarray

我有以下通常包含 CGColor 的数组：

```
_strokeColors = [[NSArray alloc] initWithObjects:NULL,NULL,NULL,NULL, nil]; 
```

我有一些与这个数组（即 ）并行运行的其他数组，`_fillColors`它们`_mutuablePaths`具有相同数量的值。我遍历所有这些数组来检查数据，在这个特定的例子中，所有的`_strokeColors`都必须为 NULL。但是，我注意到上面的数组的大小为 0。

初始化这样一个需要为每个值读取 NULL 的数组的模式是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T07:30:18.723

```
_strokeColors = [[NSArray alloc] initWithObjects:[NSNull null],[NSNull null],[NSNull null],[NSNull null], nil]; 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T07:31:37.673

这应该适合你：

```
_strokeColors = [[NSArray alloc] initWithObjects:[NSNull null],[NSNull null],[NSNull null],[NSNull null], nil]; 
```

您只能将对象类型存储在数组或任何其他集合中。

NULL，实际上不是一个对象。因此，您必须使用以下方法将其设为对象类型：[NSNull null]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T07:47:55.717

在 Cocoa 中，`NULL`并没有真正使用，但通常保留用于使用标准 C 指针的情况。

由于 Objective-C 也是 C，这当然只是一种约定，但很有用——它允许您设置指向 的`NSString*`指针`nil`，以及指向 的`char*`或`void*`指针`NULL`，一眼就能看出区别。

此外，在 Cocoa 中，集合（数组、字典、集合）不能保存`nil`值，因此正如其他海报所指出的那样，您必须使用占位符，即`[NSNull null]`.

但请注意，`[NSNull null]`它只是一个占位符，而且由于集合只能保存对象，所以这个占位符也是一个标准的 Objective-C 对象。

因此，如果您在条件语句中使用它，则需要对其进行正确测试，例如：

```
id myVar = [NSNull null];

// Stuff...

if ( myVar == [NSNull null] ) {
     // myVar has not been changed, do something
} 
```

这与标准 C 习惯用法不同，您可以`NULL`直接在条件语句中测试一个值：

```
void *myPointer = NULL;

// Stuff...

if ( myPointer ) {
    // More stuff if pointer uninitialized
} 
```

您可能还想知道为什么突然可以`[NSNull null]`使用`==`运算符来测试变量是否相等？那是因为`[NSNull null]`它是一个单例，保证在内存中始终具有相同的位置（`==`在这种情况下这是测试的内容）。不要对普通对象执行此操作。

更多关于它的[文档](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/NumbersandValues/Articles/Null.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T08:29:55.267

试试这个方法 -

```
_strokeColors = [[NSArray alloc] initWithObjects:[NSNull null],[NSNull null],[NSNull null],[NSNull null], nil]; 
```

# sql - 对称交叉连接

> ID：12490244
> 
> 赞同：3
> 
> 时间：2012-09-19T07:28:34.740
> 
> 标签：sql, sql-server, tsql

我正在尝试`i,j`从表中的每个元素中提取所有对，例如针对同一表中的每个元素，这里是我的查询：

```
select a.Id L,b.id R into #cross from MyTable a cross join mytable b 
```

我处于`i,j == j,i`只需要一半记录的情况。我天真的尝试是：

```
select a.Id L,b.id R into #cross from MyTable a cross join mytable b 
where not exists
    (select * from #cross c where c.L=R and c.R=L) 
```

但我无法在插入时查询目标表，正如 SQL Server 所说：

```
The SELECT INTO statement cannot have same source and destination tables 
```

我怎样才能有效地做？

**编辑** 仅供参考，我说“我需要一半的记录”，这是错误的，考虑到的记录数`i,j == j,i`是`n*(n+1)/2`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T07:31:45.080

因此，只需设置连接条件，使左侧始终等于或小于！

```
 select a.Id L,b.id R
      into #cross
      from MyTable a
inner join mytable b on a.id <= b.id 
```

# php - 在 ZendFramework 中扩展子目录控制器类时未找到类

> ID：12490252
> 
> 赞同：1
> 
> 时间：2012-09-19T07:28:51.417
> 
> 标签：php, model-view-controller, zend-framework, controller

我有下一个结构

```
-应用
--控制器
---子
----DemoController.php
---索引控制器.php
-楷模
- 意见
-Boostrap.php
```

好吧，在我的 Sub/DemoController.php 我有下一个：

```
<?php
class Sub_DemoController extends Zend_Controller_Action
{
    public function indexAction()
    {
        echo 'hello demo';
    }
} 
```

我的 IndexController.php 是这样的：

```
<?php
class IndexController extends Sub_DemoController
{
} 
```

当我运行我的网络时抛出下一个错误：找不到类'Sub_DemoController'......我尝试使用 Application_Sub_DemoController 初始化类，但返回相同的结果。

**我不想使用模块**，我知道如何在 Zend Framewoork 中使用模块，但我不寻找它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:45:06.297

您需要添加`resourceType`到您的资源自动加载器，将其添加到您的引导文件中：

```
$this->getResourceLoader()
     ->addResourceType('sub', 'controllers/Sub', 'Sub'); 
```

更多： http: [//framework.zend.com/manual/1.12/en/zend.loader.autoloader-resource.html](http://framework.zend.com/manual/1.12/en/zend.loader.autoloader-resource.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:33:52.950

请看一下[Zend 框架（1.7.5）：如何更改控制器目录](https://stackoverflow.com/questions/592299/zend-framework-1-7-5-how-to-change-controller-directory)

我认为您没有正确设置控制器目录，或者您的自动加载器无法正常工作。

# java - SyslogAppender 不工作

> ID：12490253
> 
> 赞同：7
> 
> 时间：2012-09-19T07:29:01.597
> 
> 标签：java, logging, log4j, syslog

我有一个 java 程序，我想在 fedora 机器上登录 /var/log/messages 文件。我正在使用 log4j SyslogAppender，但它不起作用。

我的 log4j 属性文件包含

```
# Set root category priority to INFO and its only appender to CONSOLE.
log4j.rootCategory=INFO, CONSOLE, SYSLOG
#log4j.rootCategory=INFO, CONSOLE, LOGFILE

# Set the enterprise logger priority to DEBUG
log4j.logger.com.locaid=INFO, CONSOLE, LOGFILE, SYSLOG

# CONSOLE is set to be a ConsoleAppender using a PatternLayout.
log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n

# LOGFILE is set to be a File appender using a PatternLayout.
log4j.appender.LOGFILE=org.apache.log4j.FileAppender
log4j.appender.LOGFILE.File=/home/dev/app.log
log4j.appender.LOGFILE.Append=true
log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout
log4j.appender.LOGFILE.layout.ConversionPattern=[%d{dd/MM/y HH:mm:ss}][%t][%1p] %c - %m%n

log4j.appender.SYSLOG=org.apache.log4j.net.SyslogAppender
log4j.appender.SYSLOG.syslogHost=localhost
log4j.appender.SYSLOG.layout=org.apache.log4j.PatternLayout
log4j.appender.SYSLOG.layout.conversionPattern=%d{ISO8601} %-5p [%t] %c{2} %x - %m%n
log4j.appender.SYSLOG.Facility=LOCAL1
log4j.appender.SYSLOG.Threshold=debug
log4j.appender.SYSLOG.FacilityPrinting=true 
```

在`/etc/rsyslog.conf`我有

```
local1.*      /var/log/app.log 
```

在 /etc/sysconfig/rsyslog 中有

```
SYSLOGD_OPTIONS="-r -m 0 -c 4" 
```

在重新启动 rsyslog 服务时，会创建 app.log 文件，但不会附加任何日志。我也尝试过使用默认的 USER 工具，尽管`logger -p LOCAL1.info`cmd 正在工作并将日志附加到 app.log，但它不起作用。需要帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T10:57:58.420

我在 log4j 端看不到任何问题，但我的`/etc/default/rsyslog`（在 Ubuntu 上）说

```
# Options for rsyslogd
# -m 0 disables 'MARK' messages (deprecated, only used in compat mode < 3)
# -r enables logging from remote machines (deprecated, only used in compat mode < 3)
# -x disables DNS lookups on messages received with -r
# -c compatibility mode
# See rsyslogd(8) for more details 
```

这表明它不能`-r`与. 而不是尝试在此处设置远程访问，您应该编辑并添加（或取消注释）`-m 0``-c 4``/etc/rsyslogd.conf`

```
$ModLoad imudp
$UDPServerRun 514 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T10:39:15.467

```
#This Configuration File is used for Logger Module which is used for either using     Log4J or SysLog4J
log4j.rootLogger = DEBUG,LOGFILE

    #------------------------------------------------------------------------------------------    ------------------------------------------------------------------------------
#[Log4j]
#------------------------------------------------------------------------------------------    ------------------------------------------------------------------------------

# Log4j implements Rolling File Appender Configurations
log4j.appender.LOGFILE=org.apache.log4j.RollingFileAppender
# The log4j layout  
log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout
# The Log4j configuration file location 
log4j.appender.LOGFILE.File= C:/Documents and Settings/bgh28706/Desktop/log_output.cfg
# The Log4j conversion layout to apply for 
log4j.appender.LOGFILE.layout.ConversionPattern=%d{ISO8601} %t %p %c %M %m %n
# The Log4j maximum file size to keep for before renaming to the backup file 
log4j.appender.LOGFILE.MaxFileSize=5KB 
# The maximum number of log4j files to be kept in the system 
log4j.appender.LOGFILE.MaxBackupIndex=2
#Additivity set to False makes the output not to be produced in any other appender
log4j.additivity.LOGFILE.file=false

#------------------------------------------------------------------------------------------    ------------------------------------------------------------------------------
#[Syslog]
#------------------------------------------------------------------------------------------    ------------------------------------------------------------------------------

# The syslog appender to be configured for the syslog configuration to affect 
log4j.appender.SYSLOGFILE=org.apache.log4j.net.SyslogAppender
# The  hostname to log the syslogger information
log4j.appender.SYSLOGFILE.SyslogHost=localhost
# The facility name in the logger where the log file shall be logged 
log4j.appender.SYSLOGFILE.facility=local5
# The log filename layout of the syslogger appender 
log4j.appender.SYSLOGFILE.layout=org.apache.log4j.PatternLayout
# The syslogger configuration pattern 
log4j.appender.SYSLOGFILE.layout.ConversionPattern=%d{ISO8601} %t %p %c %M %m %n
#Additivity set to False makes the output not to be produced in any other appender
log4j.additivity.SYSLOGFILE.file=false 
```

看看这是否可以帮助您，因为它对我来说运行良好！问候阿南德·巴特

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-28T15:31:00.460

这里的问题是

```
SYSLOGD_OPTIONS="-r -m 0 -c 4" 
```

应该

```
SYSLOGD_OPTIONS="-r -m 0" 
```

这些选项不能一起使用

# c# - 导入 GridView 数据源

> ID：12490255
> 
> 赞同：0
> 
> 时间：2012-09-19T07:29:05.427
> 
> 标签：c#, asp.net, datatable

我在内容页面上有一个带有数据的gridview。我需要将gridview的数据源作为母版页按钮click上的数据表。以下是我的代码

```
string DicPageName = Page.GetType().Name;
        GridView gv1;
        DataTable DT;

        if (DicPageName == "dictionaries_abs_aspx")
        {
            gv1 = (GridView)ContentPlaceHolder2.FindControl("GridView1");
            if (gv1 != null)
            {
                if (gv1.Visible)
                {
                    DT = new DataTable();

                    DT = (DataTable)gv1.DataSource;

                }
            }
        } 
```

但 DT 返回 null.plz 帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:58:28.140

您提到上面的代码位于按钮单击事件处理程序中。这总是在回发。

任何 Web 数据绑定控件的数据源在回发时为空。如果需要，您需要再次查询数据源（例如数据库）（或将其存储在 Seession 中）。

出于兴趣：你为什么需要它？也许有更好的方法。

# c++ - OpenCV：基于高斯混合模型的颜色提取

> ID：12490256
> 
> 赞同：7
> 
> 时间：2012-09-19T07:29:12.913
> 
> 标签：c++, opencv, colors, extract, gaussian

我正在尝试使用 opencv EM 算法进行颜色提取。我正在使用基于 opencv 文档中的示例的以下代码：

```
cv::Mat capturedFrame ( height, width, CV_8UC3 );
int i, j;
int nsamples = 1000;
cv::Mat samples ( nsamples, 2, CV_32FC1 );
cv::Mat labels;
cv::Mat img = cv::Mat::zeros ( height, height, CV_8UC3 );
img = capturedFrame;
cv::Mat sample ( 1, 2, CV_32FC1 );
CvEM em_model;
CvEMParams params;
samples = samples.reshape ( 2, 0 );

    for ( i = 0; i < N; i++ )
    {           
        //from the training samples
        cv::Mat samples_part = samples.rowRange ( i*nsamples/N, (i+1)*nsamples/N);

        cv::Scalar mean (((i%N)+1)*img.rows/(N1+1),((i/N1)+1)*img.rows/(N1+1));
        cv::Scalar sigma (30,30);
        cv::randn(samples_part,mean,sigma);                     

    }       

    samples = samples.reshape ( 1, 0 );

    //initialize model parameters
    params.covs         = NULL;
    params.means        = NULL;
    params.weights      = NULL;
    params.probs        = NULL;
    params.nclusters    = N;
    params.cov_mat_type = CvEM::COV_MAT_SPHERICAL;
    params.start_step   = CvEM::START_AUTO_STEP;
    params.term_crit.max_iter = 300;
    params.term_crit.epsilon  = 0.1;
    params.term_crit.type   = CV_TERMCRIT_ITER|CV_TERMCRIT_EPS;     
    //cluster the data
    em_model.train ( samples, Mat(), params, &labels );     

    cv::Mat probs;
    probs = em_model.getProbs();

    cv::Mat weights;
    weights = em_model.getWeights();

cv::Mat modelIndex = cv::Mat::zeros ( img.rows, img.cols, CV_8UC3 );

for ( i = 0; i < img.rows; i ++ )
{
    for ( j = 0; j < img.cols; j ++ )
    {
        sample.at<float>(0) = (float)j;
    sample.at<float>(1) = (float)i;     

    int response = cvRound ( em_model.predict ( sample ) ); 
    modelIndex.data [ modelIndex.cols*i + j] = response;

    }
} 
```

我的问题是：

**首先**，我想提取每个模型，这里总共五个，然后将这些对应的像素值存储在五个不同的矩阵中。在这种情况下，我可以分别有五种不同的颜色。这里我只获取了它们的索引，有什么方法可以在这里实现它们对应的颜色吗？为方便起见，我可以从根据这五个 GMM 找到主色开始。

**其次**，这里我的示例数据点是“100”，它们大约需要 3 秒。但我想在不超过 30 毫秒的时间内完成所有这些事情。我知道使用 GMM 的 OpenCV 背景提取执行得非常快，低于 20 毫秒，这意味着我必须有一种方法可以在 30 毫秒内完成所有 600x800=480000 像素的所有这些。我发现`predict`函数是最耗时的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T15:46:22.967

**第一个问题：**

为了进行颜色提取，您首先需要使用输入像素来训练 EM。之后，您只需再次遍历所有输入像素并使用 predict() 对每个像素进行分类。我附上了一个小例子，它利用 EM 基于颜色进行前景/背景分离。它向您展示了如何提取每个高斯的主色（均值）以及如何访问原始像素颜色。

```
#include <opencv2/opencv.hpp>

int main(int argc, char** argv) {

    cv::Mat source = cv::imread("test.jpg");

    //ouput images
    cv::Mat meanImg(source.rows, source.cols, CV_32FC3);
    cv::Mat fgImg(source.rows, source.cols, CV_8UC3);
    cv::Mat bgImg(source.rows, source.cols, CV_8UC3);

    //convert the input image to float
    cv::Mat floatSource;
    source.convertTo(floatSource, CV_32F);

    //now convert the float image to column vector
    cv::Mat samples(source.rows * source.cols, 3, CV_32FC1);
    int idx = 0;
    for (int y = 0; y < source.rows; y++) {
        cv::Vec3f* row = floatSource.ptr<cv::Vec3f > (y);
        for (int x = 0; x < source.cols; x++) {
            samples.at<cv::Vec3f > (idx++, 0) = row[x];
        }
    }

    //we need just 2 clusters
    cv::EMParams params(2);
    cv::ExpectationMaximization em(samples, cv::Mat(), params);

    //the two dominating colors
    cv::Mat means = em.getMeans();
    //the weights of the two dominant colors
    cv::Mat weights = em.getWeights();

    //we define the foreground as the dominant color with the largest weight
    const int fgId = weights.at<float>(0) > weights.at<float>(1) ? 0 : 1;

    //now classify each of the source pixels
    idx = 0;
    for (int y = 0; y < source.rows; y++) {
        for (int x = 0; x < source.cols; x++) {

            //classify
            const int result = cvRound(em.predict(samples.row(idx++), NULL));
            //get the according mean (dominant color)
            const double* ps = means.ptr<double>(result, 0);

            //set the according mean value to the mean image
            float* pd = meanImg.ptr<float>(y, x);
            //float images need to be in [0..1] range
            pd[0] = ps[0] / 255.0;
            pd[1] = ps[1] / 255.0;
            pd[2] = ps[2] / 255.0;

            //set either foreground or background
            if (result == fgId) {
                fgImg.at<cv::Point3_<uchar> >(y, x, 0) = source.at<cv::Point3_<uchar> >(y, x, 0);
            } else {
                bgImg.at<cv::Point3_<uchar> >(y, x, 0) = source.at<cv::Point3_<uchar> >(y, x, 0);
            }
        }
    }

    cv::imshow("Means", meanImg);
    cv::imshow("Foreground", fgImg);
    cv::imshow("Background", bgImg);
    cv::waitKey(0);

    return 0;
} 
```

我已经用下图测试了代码，它的表现相当不错。

![在此处输入图像描述](../Images/7ac1108128706ce0714c32b5a035881a.png)

**第二个问题：**

我注意到集群的最大数量对性能有很大的影响。因此，最好将其设置为非常保守的值，而不是将其留空或将其设置为示例中的样本数。此外，文档还提到了一个迭代过程，以使用较少约束的参数重复优化模型。也许这会给你一些加速。要了解更多信息，请查看[此处](http://opencv.willowgarage.com/documentation/cpp/expectation-maximization.html)为 train() 提供的示例代码中的文档。

# asp.net - 更改使用查询字符串的 url 显示

> ID：12490268
> 
> 赞同：0
> 
> 时间：2012-09-19T07:29:47.927
> 
> 标签：asp.net

当我单击 gridview 超链接字段时，下一页打开并且网址是[https://www.example.com//forumtopic.aspx?CategoryId=1](https://www.example.com//forumtopic.aspx?CategoryId=1)但我想将网址显示为[https://www.example.com //Forum/Maths](https://www.example.com//Forum/Maths)，其中 maths 是类别 id 1 的值。请解释清楚，并告诉我们在 gridview 超链接字段中的导航 url 中给出的值......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:43:18.187

使用任何 URL 重写技术

使用下面的 url 查看搜索结果

[http://www.google.com?q=url+rewriting+asp.net](http://www.google.com?q=url+rewriting+asp.net)

如果您发现任何特定的实施困难，请告诉我...

# android - Google place api，想要获取最近的位置

> ID：12490270
> 
> 赞同：4
> 
> 时间：2012-09-19T07:29:51.177
> 
> 标签：android, google-maps, google-maps-api-3, google-places-api

您好，我想使用 google place api 搜索最近的位置....

从[https://developers.google.com/places/documentation/supported_types](https://developers.google.com/places/documentation/supported_types)我在我的代码中使用了类型来搜索最近的地方......

代码如下

```
try {
     double radius = 5000; // 10000 meters
    // get nearest places
    nearPlaces = googlePlaces
                    .search(gps.getLatitude(), gps.getLongitude(), radius,
                            "sublocality|sublocality_level_4|sublocality_level_5|sublocality_level_3|sublocality_level_2|sublocality_level_1|neighborhood|locality|sublocality");

    } catch (Exception e) {
    e.printStackTrace();
    }
 return null;
} 
```

但找不到最近的地方

就像我在“**美国加利福尼亚州圣地亚哥**”那么我想得到类似的结果

**Gaslamp/Downtown,
Pacific Beach,
Ocean Beach,
Uptown,
Hillcrest,
Mission Valley, Fashion Valley,
North Park,**

但不是这个，我只得到两个值

**Mission Valley East,
塞拉梅萨**

所以任何人都可以帮助我我必须通过什么**类型**，这样我就可以获得上面的结果而不是下面的结果

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T02:06:09.007

由于未知原因，我之前的答案已被版主删除，我正在重新发布更多上下文，因为它是当前正确的答案：

您似乎正在尝试返回附近的地理位置（支持的地点类型中[第二个列表中的任何内容）。](https://developers.google.com/places/documentation/supported_types#table2)不幸的是，Places API 不是为此而设计的，它旨在返回附近机构的列表（支持的地点类型中的[第一个列表](https://developers.google.com/places/documentation/supported_types)中的任何内容）和最多两个`locality`or`political`类型的结果，以帮助识别您正在执行地点的区域搜索请求。

这在此处的文档中有所说明： [https ://developers.google.com/places/documentation/search#PlaceSearchResponses](https://developers.google.com/places/documentation/search#PlaceSearchResponses)

> *"results" contains an array of Places, with information about each. See Place Search Results for information about these results. The Places API returns up to 20 establishment results per query. Additionally, political results may be returned which serve to identify the area of the request.*

If you type filter your Place Search request by a geographic location type like `locality` or `political`, you will filter out the establishment results and only be left with the area identity results.

A Places API - Feature Request for returning nearby localities has been filed here: [http://code.google.com/p/gmaps-api-issues/issues/detail?id=4434](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4434)

If you believe this would be a useful feature please make sure your star the request to let us know you are interested in seeing it added.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:57:41.390

双半径 = 5000 是 5 公里，刚好超过 3 英里。如果你增加半径，你应该返回更多的地方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T21:09:08.160

您应该考虑到最大 50Km 的距离，并且有以下不同的类型：机构、住宿、水疗中心、酒吧、教堂、place_of_worship 等。

# android - 通过 java 编码使用 layout_column

> ID：12490271
> 
> 赞同：1
> 
> 时间：2012-09-19T07:29:54.937
> 
> 标签：android, android-gridlayout

我有一个`GridLayout`和里面一些`TextView`。我`android:layout_column`在xml中使用过，它正在工作。现在我的问题是，我们如何通过 java 编码来实现这一点。我看过一些例子，但它们就像

```
tv.setLayoutParams(new TableRow.LayoutParams(3)); 
```

我该怎么办`GridLayout`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:32:15.687

我不能说它是那种方法，但它是替代品并给出我想要的。我已通过此代码设置`TextView`了第 4`column`和第 1 。`row`

```
tv.setLayoutParams(new GridLayout.LayoutParams(GridLayout.spec(0),GridLayout.spec(3))); 
```

等待是否有其他答案可用。

# sinatra - 如何在 Sinatra 中使 DataMapper 静音

> ID：12490273
> 
> 赞同：1
> 
> 时间：2012-09-19T07:30:00.527
> 
> 标签：sinatra, datamapper

所以，一个简单的小问题。每次我在我的“get”或“post”块中使用 DataMapper 执行一些事务时，我得到的输出看起来像这样......

```
core.local - - [19/Sep/2012:09:04:54 CEST] "GET /eval_workpiece/state?id=24 HTTP/1.1" 200 4
- -> /eval_workpiece/state?id=24 
```

这对我来说有点太冗长了。我可以关闭此反馈吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T21:28:22.250

这不是 Datamapper 日志记录，这是 WEBrick 服务器完成的日志记录，它[默认使用这两种格式记录所有请求](https://github.com/ruby/ruby/blob/v1_9_3_286/lib/webrick/httpserver.rb#L54-59)。

（请注意，这*也不是*Rack 日志记录，尽管 Rack::CommonLogger 使用相同（或至少非常相似）的格式）。

阻止这种情况的最简单方法是切换到不添加自己的日志记录的另一台服务器，例如 Thin。

如果您想继续使用 WEBrick，您需要找到一种方法从您的 Sinatra 应用程序中将选项传递给它。当前发布的 Sinatra gem (1.3.3) 不允许使用简单的方法来执行此操作，但[当前的 master 允许您`:server_options`设置 Sinatra 然后将传递](https://github.com/sinatra/sinatra/blob/38f71248f839b95f6d17747a2c177bdd83f95f78/lib/sinatra/base.rb#L1408-1409)的设置。所以在未来你应该能够做到这一点：

```
set :server_settings, {:AccessLog => []} 
```

为了让WEBrick保持沉默。

暂时你可以在你的应用文件的末尾添加这样的东西（我假设你正在启动你的应用程序`ruby my_app_file.rb`）：

```
disable :run
Sinatra::Application.run! do |server|
  server.config[:AccessLog] = []
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T19:58:00.570

要切断所有日志记录：

```
DataMapper.logger = nil 
```

要更改详细程度：

```
DataMapper.logger.set_log(logger, :warn) # where logger is Sinatra's logging object 
```

其他级别是`:fatal => 7, :error => 6, :warn => 4, :info => 3, :debug => 0`（[http://rubydoc.info/gems/dm-core/1.1.0/DataMapper/Logger](http://rubydoc.info/gems/dm-core/1.1.0/DataMapper/Logger)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T22:55:11.260

如果您使用 ActiveSupport 运行，则可以使用内核扩展：

```
quietly { perform_a_noisy_task } 
```

这会在块的持续时间内将 STDOUT 和 SDTERR 临时绑定到 /dev/null。由于您可能不想抑制*所有*输出，理论上您可以这样做：

```
with_warnings(:warn) { # or :fatal or :error or :info or :debug
  perform_a_noisy_task
} 
```

并且适当的消息将被禁止。（注意：我说*“理论上”*是因为 using`with_warnings`在我的 Padrino/DataMapper 环境中给了我一个看似无关的错误。YMMV。）

# android - 显示非常大的图像 - 是否可以不将其切割成瓷砖？

> ID：12490275
> 
> 赞同：0
> 
> 时间：2012-09-19T07:30:12.610
> 
> 标签：android, image, memory-leaks, high-resolution

我试图在我的平板电脑应用程序中显示非常大的图像 (>=50MB)。我可以在进行缩放时动态加载更好的图像分辨率（使用`inSampleSize`）直到获得高分辨率吗？或者......是否可以仅将图像的可见部分加载到内存中？做这个的最好方式是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:51:50.580

您可以使用 android 中的 Bitmap 类对该图像进行采样。您可以使用我在下面提到的这个参考

[安卓开发者](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)

[堆栈溢出](https://stackoverflow.com/questions/2641726/decoding-bitmaps-in-android-with-the-right-size)

[示例代码](http://zerocredibility.wordpress.com/2011/01/27/android-bitmap-scaling/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:15:24.223

由于分配给应用程序的内存很小，因此无法在 android 中显示具有相同分辨率的高分辨率图像。所以你需要对图像进行采样。但是通过这种方法，当您缩放图像时，视觉伪影将开始出现。要删除这些，您可以在缩放时增加 inSample 大小，并使用增加的 inSample 大小再次解码资源。您可以添加一个限制，使位图不会变得非常大。

# php - 使用表单比发布更好？

> ID：12490278
> 
> 赞同：-3
> 
> 时间：2012-09-19T07:30:22.553
> 
> 标签：php

因为当您使用 post 时，然后单击刷新，浏览器将尝试再次发布。

我在 youtube 上观看了一些教程，其中显示了“发布然后重定向技术”。他在将重定向（使用标题）发布到同一页面后这样做，其中包含一些获取数据

如果发现这很愚蠢，因为您可以改用 get 方法

所以简而言之，我的问题是……如果你使用表单，get 方法是否比 post 方法更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T07:33:37.180

不，这不是更好...

*更糟*

为什么？因为按下刷新会*重复表单执行的任何操作*。想象一下有多少人会不小心两次从信用卡扣款，或者两次提交相同的论坛帖子——完全没有必要。

GET 请求应该是幂等的。让我更强大：GET 请求*应该*是幂等的。他们不应该“做”任何事情，而只是请求信息。

POST-Redirect-GET 方法是避免“刷新”问题的方法。时期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:33:27.337

GET 应该对服务器没有影响。也就是说，您应该能够多次重新发出相同的 GET 并且不会有问题。

相反，POST 旨在更新记录。它们不一定是幂等的。这就是为什么如果您尝试再次发布相同的 POST，您的浏览器会警告您——您真的想从亚马逊购买两本该书吗？

如果您的表单是搜索表单或类似表单，则 GET 是合适的。如果您的表单是登录表单、结帐表单等……则不然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:14:27.663

获取不安全。但发布如此！确保永远不要使用 get。这不是一个更好的做法。如果我们传递的数据对用户没有用处，我们可以使用 get。

# c++ - 快速访问数组中的数据

> ID：12490279
> 
> 赞同：2
> 
> 时间：2012-09-19T07:30:23.523
> 
> 标签：c++, performance, multidimensional-array

我的问题就在这里。
我有四个 3 维表，它们是一种查找表（ 32x32x32 ），我必须在 C++ 中实时快速地检索值。
我的主要目标是计算时间，因为必须进行大量操作，而良好的编程实践是次要的，因为我不太担心代码维护。在大多数个人计算机上实现这一目标的最佳解决方案是什么？
我曾想过将数据存储在全局变量中并将它们放在一个单独的文件中，并通过诸如“extern const float first[32][32][32];”之类的声明来使用它们。或从文件加载矢量。
但我想后者会慢一些，因为数据必须通过另外一个指针来访问。
还有其他解决方案吗？

我在网上进行了搜索，但是当我阅读不同的事实时，这让我更加困惑。
例如，这两个网站似乎没有提出相同的建议（如果我理解正确的话）：[site1](http://www.diku.dk/forskning/performance-engineering/Jesper/heaplab/heapsurvey_html/node17.html)，[site2](http://bytes.com/topic/c/answers/891039-array-performance-fix-size-vs-dynamic)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:15:35.033

如果您对每个元素执行操作，则很有可能可以并行执行。由于您对优化访问时间特别感兴趣，因此可以考虑将数组视为一维数组以加快访问速度。

```
 struct Object32P3 {
     union { 
    struct {float arr3[32][32][32]}; 
    struct {float arr1[32768]}; 
    }; 
    }; 
```

通过偏移量访问 1D 数组比紧密循环中的 3d 数组更快。

我之所以说访问不应该是您必须尝试和优化的第一个地方，是因为您在访问元素后正在执行一些操作，这是查看和优化的最佳位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T08:54:13.193

访问多维数组中的数据

```
float data[32][32][32];
data[i][j][k]; 
```

完全等同于访问展平数组

```
float data[32768];
data[i * 1024 + j * 32 + k]; 
```

没有涉及额外的指针，只是数组索引的算术。

在性能方面，an`extern const float [32][32][32]`将为编译器提供优化整个程序的机会，因为它可以完全访问数据以及您如何使用它。

将文件中的数据加载到动态大小的文件`vector<vector<vector<float>>>`中会导致多个指针间接访问数据元素；鉴于您知道数据的大小，将其加载到 a`static float[32][32][32]`中会更有效。

对于在编译时范围未知的数据，一个不错的选择是使用[Boost.MultiArray](http://www.boost.org/doc/libs/1_51_0/libs/multi_array/doc/user.html)：

```
typedef boost::multi_array<float, 3> array_type;
array_type A(boost::extents[32][32][32]);

A[i][j][k] = 5.0f; 
```

# jsf-2 - p：删除行后数据表不更新

> ID：12490281
> 
> 赞同：0
> 
> 时间：2012-09-19T07:30:32.480
> 
> 标签：jsf-2, primefaces

我已经搜索了这个主题并尝试了所有建议，但是我似乎无法让看似非常简单的事情起作用。

我有一个 PrimeFaces 3.4 ，其中的数据是从我的支持 bean 中的`<p:dataTable>`a 填充的，并且每一行的其中一个列中都有 a 。我只是想实现数据表的简单删除和刷新。但是，尽管从对象中删除了元素，但数据表不会刷新。`List``<p:commandLink>``List`

Bean（查看范围）：

```
public void deleteRow(rowType row){
    this.tableDataList.remove(row);
} 
```

看法：

```
<h:form id="form">
    <p:dataTable id="dt" var="dt" value=#{managedBean.tableDataList}
                 rowKey="#{dt.id}" selection="#{managedBean.selectedRow}"
                 selectionMode="single">
       <p:column><h:outputText value="#{dt.field1}"/></p:column>
       <p:column><h:outputText value="#{dt.field2}"/></p:column>
       <p:column><h:outputText value="#{dt.field3}"/></p:column>

       <p:column width="60">
          <p:commandLink id="deleteCl"
                         value="Delete"
                         actionListener="#{managedBean.deleteRow(dt)}"
                         update=":form:dt"
                         />
       </p:column>
</h:form> 
```

据我所知，PrimeFaces 3.4 中的数据表应该可以通过命令链接等子组件进行更新，但我就是无法让它工作。我实现了一个阶段侦听器，因此我可以看到在渲染响应阶段之前没有验证或其他错误，但是除非我刷新浏览器窗口，否则数据表会继续显示已删除的行，然后它将消失。

如果我`ajax="false"`在命令链接中设置它可以工作，但是整个页面会被不必要地更新。

我努力了：

*   `action`在和之间切换`actionListener`
*   以各种组合对命令链接属性进行以下更改：
    *   `process="@this"`
    *   `update="@this"`
    *   `update="@form"`

令人讨厌的是，我有一个带有命令链接的类似表，其中每个链接都会打开一个对话框窗口，其中包含另一个数据表，该数据表填充了根据最初单击的行检索到的数据。在同一页面上完美运行。啊！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:10:05.957

尝试从中建模一些点，看看它是否对您有帮助。

```
 <h:outputText escape="false" value="#{message.noCompaniesFound}" rendered="#{companyController.companyModel.rowCount == 0}"/>
            <h:panelGroup rendered="#{companyController.companyModel.rowCount > 0}">
                <p:commandButton id="addButton" value="#{message.newCompany}" oncomplete="companyDialog.show()" icon="ui-icon-plus" title="#{message.addCompany}" rendered="#{loginController.privileges.contains(bundle.SuperUser)}"/>  

                <p:dataTable id="companyList" var="company" widgetVar="companyTable" value="#{companyController.companyModel}" rowKey="#{company.name}" selection="#{companyController.selectedCompany}" selectionMode="single"
                             paginator="true" rows="10"
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="5,10,15,20,50,100">

                    <p:ajax event="rowEdit" update="@this" listener="#{companyController.saveCompany(company)}">
                        <f:param name="company" value="#{company}"/>
                    </p:ajax>      

                    <f:facet name="header">
                        <p:outputPanel>
                            <h:outputText value="#{message.search}: "/>
                            <p:inputText id="globalFilter" onkeyup="companyTable.filter()"/>
                        </p:outputPanel>
                    </f:facet>

                    <p:column id="name" headerText="#{message.name}" filterBy="#{company.name}" filterMatchMode="contains" filterStyle="display: none;">
                        <h:outputText value="#{company.name}"/>
                    </p:column>

                    <p:column headerText="#{message.editOptions}" style="width:10px;">
                        <p:commandButton id="editButton" update=":companyForm" oncomplete="editDialog.show()" icon="ui-icon-pencil" title="#{message.edit}">                                
                            <f:setPropertyActionListener value="#{company}" target="#{companyController.selectedCompany}"/>
                        </p:commandButton>
                        <p:commandButton id="deleteButton" update=":companyForm" oncomplete="confirmation.show()" icon="ui-icon-trash" title="#{message.delete}">                                
                            <f:setPropertyActionListener value="#{company}" target="#{companyController.selectedCompany}"/>
                        </p:commandButton>
                    </p:column>
                    <f:facet name="footer">
                    </f:facet>
                </p:dataTable>
            </h:panelGroup>

            <p:confirmDialog id="confirmDialog" message="#{message.sureYouWantToDelete} #{companyController.selectedCompany.name} ?" severity="alert" widgetVar="confirmation">
                <p:commandButton id="confirm" value="#{message.yes}" onclick="confirmation.hide()" actionListener="#{companyController.deleteCompany}" update="companyForm" />
                <p:commandButton id="decline" value="#{message.no}" onclick="confirmation.hide()"/>    
            </p:confirmDialog> 
```

# c++ - 返回指针后删除堆

> ID：12490284
> 
> 赞同：1
> 
> 时间：2012-09-19T07:30:50.843
> 
> 标签：c++

我有如下功能

```
int* readFile(string InputPath)
{
    int *myvar = new int[10]; //The file has 10 lines (Using heap)

    ifstream inFile;

    inFile.open(InputPath.c_str(), ios::in);

    if (inFile.fail())
    {
        cout << "Error reading the input file ";
        cout << InputPath << ".";
        exit(0);
    }
    string fileLine;

    while (getline(inFile, fileLine))
    {
       myvar[i]=toint(fileLine); //will be converted to int!
    }
    ;
    inFile.close();

    return myvar;
}: 
```

如何释放堆（myvar）？一般来说，返回此类数组的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:33:34.283

**如何释放堆（myvar）？**

您返回的 int* ；不要改变它，不要丢失它，当你用完记忆，

```
delete [] theReturnedPointer; 
```

除非您有充分的理由将其设为数组，否则您可以省去内存管理的麻烦，而只需使用向量即可。

**最好的方法**

最好的方法是返回一个向量：

```
vector<int> readFile(const string& InputPath)
{
    ifstream inFile(InputPath); // or inputPath.c_str() for old compilers
    if (!inFile)
    {
        cout << "Error reading the input file " << InputPath << ".";
        exit(0); // thow would be better! Or at least return an empty vector.
    }

    vector<int> myvar;
    for(int n; inFile >> n && myvar.size() < 10; )
    {
       myvar.push_back(n);
    }
    return myvar;
} 
```

但是如果你真的很想使用`new[]`，那么至少返回自管理指针，`std::unique_ptr<int[]>`。永远不要让原始指针转义函数，而不是在 C++ 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:33:47.523

显然，调用它成为调用者的责任`delete[]`。请注意，这意味着调用者必须知道返回的指针是用 分配的`new[]`，这并不是最佳的。

您应该返回 a `std::vector<int>`，这使得这一切变得更加简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T07:34:21.740

调用者必须`delete[]`是函数返回的值。目前的代码没有为超出数组末尾的写入提供任何保护：

```
while (getline(inFile, fileLine))
{
    myvar[i]=toint(fileLine); //will be converted to int!
} 
```

但是，由于这是 C++，因此请使用 a并直接从输入流中[`std::vector<int>`](http://en.cppreference.com/w/cpp/container/vector)读取`int`s，而不是将它们作为字符串读取并执行转换。`std::vector<int>`将为您处理内存管理：

```
std::vector<int> myvar;

int i;
while (inFile >> i) myvar.push_back(i); 
```

`std::vector<int>`从函数返回。调用者可以确切地知道返回值中有多少`int`个 s（如果您返回一个数组，除非您包含一个标记值来指示结束，否则它不能知道）并且不需要显式删除它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T07:35:49.267

必须有一些代码会在这个指针上调用 delete。

我认为，更好的方法是获取一个指针作为参数。这样做会迫使使用此函数的人初始化数组，所以他会知道，他将来必须删除它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T07:40:55.610

C++ 中的约定是不返回分配的内存。相反，函数原型应该看起来像

```
size_t readFile(string InputPath,int* array,size_t n_elements); 
```

该函数返回它实际放置在数组中的元素数。调用者将使用适当的方法分配和释放内存，而不是必要的 new/delete[] 而是 malloc/free 或更低级别的系统函数，例如 VirtualAlloc。

# spring - 如何在不创建新的情况下检索 Multipart Dispatcher Servlet 加载的当前 ApplicationContext？

> ID：12490289
> 
> 赞同：1
> 
> 时间：2012-09-19T07:31:11.690
> 
> 标签：spring, servlets, dispatcher, multipart, applicationcontext

当我的应用程序服务器启动时，我`ApplicationContext`的由 Multipart Servlet 加载。

我在某些队列上有多个入站消息侦听器。从不同队列读取的每条消息都代表一个不同的线程。消息沿着我的应用程序流传播，我需要检索当前的应用程序上下文（之前由多部分加载）并注入我的单例类。

有没有办法做到这一点？

PS：我无法控制调度程序 servlet ...这是一个大问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-10T15:28:58.393

OP写道：

> 我解决了。我创建了一个使用亲属方法（特别是）`classfactorybean`实现的 on xml 。最后一个方法由回调调用，并在服务器启动时自动检索 Multipart 加载的上下文，并将上下文注入到我的 bean 中（在引导阶段）。`ApplicationContextAware``setApplicationContext`

# java - 服务器响应（JSON 格式）到数组转换

> ID：12490290
> 
> 赞同：1
> 
> 时间：2012-09-19T07:31:16.363
> 
> 标签：java, android, json, achartengine

我正在开发一个 android 应用程序，在该应用程序中我向服务器发送 http 响应并以 JSON 格式的字符串获取响应，现在基于此响应，我需要使用 AChartEngine 为不同的设备生成堆叠柱形图。响应字符串如下所示

```
[{"ChartDate":null,"CycleStatus":null,"Cycle_Duration":0,"Cycle_Percent":0,"Duration":0,"EquipmentDescription":"MTConnect","EquipmentId":5,"EquipmentName":"MTC 1","EquipmentStatusColor":null,"EquipmentStatusDescription":null,"EquipmentStatusId":0,"EquipmentStatusIdentifier":null,"EquipmentStatusTypeId":0,"EquipmentStatusTypeName":null,"EquipmentStatusTypeName_resourceKey":null,"EquipmentTimeZoneId":null,"EventData":null,"GeneralStatusState":0,"IsFirstRowData":false,"Percentage":0,"ReportGroupId":0,"ReportGroupName":null,"ReportGroupValue":null,"StatusAction":0,"StatusDuration":[{"ChartDate":null,"CycleStatus":null,"Cycle_Duration":0,"Cycle_Percent":0,"Duration":561.60722222222023,"EquipmentDescription":"MTConnect","EquipmentId":5,"EquipmentName":"MTC 1","EquipmentStatusColor":"#008000","EquipmentStatusDescription":"In Cycle","EquipmentStatusId":0,"EquipmentStatusIdentifier":null,"EquipmentStatusTypeId":1,"EquipmentStatusTypeName":null,"EquipmentStatusTypeName_resourceKey":"EquipmentStatusTypeName.InCycle","EquipmentTimeZoneId":null,"EventData":null,"GeneralStatusState":0,"IsFirstRowData":false,"Percentage":0,"ReportGroupId":0,"ReportGroupName":null,"ReportGroupValue":null,"StatusAction":0,"StatusDuration":null,"TimeStamp":{"DateTime":"\/Date(-62135596800000)\/","OffsetMinutes":0},"UnknownDowntime_Duration":0,"UnknownDowntime_Percent":0},{"ChartDate":null,"CycleStatus":null,"Cycle_Duration":0,"Cycle_Percent":0,"Duration":134.57583333333525,"EquipmentDescription":"MTConnect","EquipmentId":5,"EquipmentName":"MTC 1","EquipmentStatusColor":"#FFFF00","EquipmentStatusDescription":"In Cycle","EquipmentStatusId":0,"EquipmentStatusIdentifier":"","EquipmentStatusTypeId":2,"EquipmentStatusTypeName":null,"EquipmentStatusTypeName_resourceKey":"EquipmentStatusTypeName.UnknownDowntime","EquipmentTimeZoneId":null,"EventData":null,"GeneralStatusState":0,"IsFirstRowData":false,"Percentage":0,"ReportGroupId":0,"ReportGroupName":null,"ReportGroupValue":null,"StatusAction":0,"StatusDuration":null,"TimeStamp":{"DateTime":"\/Date(-62135596800000)\/","OffsetMinutes":0},"UnknownDowntime_Duration":0,"UnknownDowntime_Percent":0}],"TimeStamp":{"DateTime":"\/Date(-62135596800000)\/","OffsetMinutes":0},"UnknownDowntime_Duration":0,"UnknownDowntime_Percent":0},{"ChartDate":null,"CycleStatus":null,"Cycle_Duration":0,"Cycle_Percent":0,"Duration":0,"EquipmentDescription":null,"EquipmentId":1,"EquipmentName":"PCS Loop 1","EquipmentStatusColor":null,"EquipmentStatusDescription":null,"EquipmentStatusId":0,"EquipmentStatusIdentifier":null,"EquipmentStatusTypeId":0,"EquipmentStatusTypeName":null,"EquipmentStatusTypeName_resourceKey":null,"EquipmentTimeZoneId":null,"EventData":null,"GeneralStatusState":0,"IsFirstRowData":false,"Percentage":0,"ReportGroupId":0,"ReportGroupName":null,"ReportGroupValue":null,"StatusAction":0,"StatusDuration":[{"ChartDate":null,"CycleStatus":null,"Cycle_Duration":0,"Cycle_Percent":0,"Duration":495.61333333332925,"EquipmentDescription":null,"EquipmentId":1,"EquipmentName":"PCS Loop 1","EquipmentStatusColor":"#008000","EquipmentStatusDescription":"In Cycle","EquipmentStatusId":0,"EquipmentStatusIdentifier":null,"EquipmentStatusTypeId":1,"EquipmentStatusTypeName":null,"EquipmentStatusTypeName_resourceKey":"EquipmentStatusTypeName.InCycle","EquipmentTimeZoneId":null,"EventData":null,"GeneralStatusState":0,"IsFirstRowData":false,"Percentage":0,"ReportGroupId":0,"ReportGroupName":null,"ReportGroupValue":null,"StatusAction":0,"StatusDuration":null,"TimeStamp":{"DateTime":"\/Date(-62135596800000)\/","OffsetMinutes":0},"UnknownDowntime_Duration":0,"UnknownDowntime_Percent":0},{"ChartDate":null,"CycleStatus":null,"Cycle_Duration":0,"Cycle_Percent":0,"Duration":200.56972222222623,"EquipmentDescription":null,"EquipmentId":1,"EquipmentName":"PCS Loop 1","EquipmentStatusColor":"#FFFF00","EquipmentStatusDescription":"In Cycle","EquipmentStatusId":0,"EquipmentStatusIdentifier":"","EquipmentStatusTypeId":2,"EquipmentStatusTypeName":null,"EquipmentStatusTypeName_resourceKey":"EquipmentStatusTypeNam 
```

现在这是对五种不同设备的响应，我如何将此 JSON 字符串用于数组，以便提取每个设备的数据并将其发送到 AChartEngine 以绘制图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:42:37.920

您可以将响应字符串转换为 JSONObject。您发布的响应是 JSONArray。

```
 JSONArray jsonArray = new JSONArray(responseString);
     int size = jsonArray.length();
     ArrayList<JSONObject> arrayList = new ArrayList<JSONObject>();
     for(int i= 0; i< size; i++) {
          JSONObject jsonObject = jsonArray.optJSONObject(i);
          // use this jsonObject to get the value by passing the keys.
           String value = jsonObject.optString(key);

           //here is your array list of jsonobjects
           arrayList.add(jsonObject);
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:50:13.250

使用下面的代码传递 JsonArray 并将值存储到 ArrayList 中。

```
JSONArray jArray = new JSONArray(mRes);
ArrayList<String> array1 = new ArrayList<String>();
for(int i= 0; i< size; i++) {
    JSONObject jObject = jArray.getJSONObject(i);
    String mValue = jObject.getString("your_json_object_name");
    array1.add(mValue);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:40:17.627

使用 Gson api，它允许您将 json 对象直接映射到 java 对象。检查以下链接以供进一步参考：

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

[https://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide)

# google-app-engine - 在 AppEngine 中使用命名路由的最佳做法是什么？

> ID：12490294
> 
> 赞同：1
> 
> 时间：2012-09-19T07:31:30.253
> 
> 标签：google-app-engine

在 app.yaml 文件中，我放了 2 行来指定 url 映射：

*   网址：/blog/.* 脚本：blog.app

*   网址：/脚本：home.app

问题是我不能使用“uri_for”函数在home.py中为博客模块生成一个url，如果home moudle中没有添加路由：

这是 home 模块中的代码：

```
 app = webapp2.WSGIApplication([
       webapp2.Route(r'/', handler=HomeHandler, name='home')
    ], debug = SITE_CONFIG['is_debug'], config=SITE_CONFIG) 
```

和 blog.py 中的代码：

```
 app = webapp2.WSGIApplication([
    webapp2.Route(r'/blog/<blog_id:\d+>', handler=BlogHandler,    name="blog")
    ], debug = SITE_CONFIG['is_debug'], config=SITE_CONFIG) 
```

所以，如果我在 home.html 中有这样的代码：{{ uri_for('blog', blog_id=blabla) }}，它就无法工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T18:03:20.730

您应该将这些路线整合到一个应用程序中。

```
app = webapp2.WSGIApplication([
       webapp2.Route(r'/', handler=HomeHandler, name='home'),
       webapp2.Route(r'/blog/<blog_id:\d+>', handler=BlogHandler, name="blog")
    ], debug = SITE_CONFIG['is_debug'], config=SITE_CONFIG) 
```

实际上，这些只是查看博客帖子的路线。

如果你想做一个完整的 CRUD 应用程序，你可能需要添加更多。

```
app = webapp2.WSGIApplication([
        webapp2.Route(r'/admin/blog', handler='admin.AdminBlogHandler:list, name="admin.blog.list"),
        webapp2.Route(r'/admin/blog/new', handler='admin.AdminBlogHandler:new', name='admin.blog.edit'),
        webapp2.Route(r'/admin/blog/<id:[^/]+>/edit', handler='admin.AdminBlogHandler:edit', name='admin.blog.edit'),
        webapp2.Route(r'/admin/blog/<id:[^/]+>', handler='admin.AdminBlogHandler:view', name='admin.blog.view')
    ], debug = SITE_CONFIG['is_debug'], config=SITE_CONFIG) 
```

这些示例的注意事项：

1）您为名称添加前缀以从不同的文件加载处理程序（admin.AdminBlogHandler 将在 'admin.py' 中查找 'class AdminBlogHandler'

2）您在处理程序名称之后，冒号之后指定要运行的方法。

3) 在每种方法中，我都在为获取和发布创建功能，因此没有用于编辑和更新的离散 RESTful URL。

# php - php中的完美肥皂（Wsdl）Web服务

> ID：12490298
> 
> 赞同：24
> 
> 时间：2012-09-19T07:31:54.300
> 
> 标签：php, web-services, soap, wsdl

我是一名 PHP 程序员，我想使用 WSDL 创建一个 SOAP Web 服务。

请有人建议任何简单的教程或代码，使我能够在设备（iPhone、Blackberry、Android）端制作对象。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-19T08:11:59.703

以下是 PHP 中 SOAP (WSDL) Web 服务的一些教程和示例：

1.  [使用 PHP 和 SOAP 创建 Web 服务，第 1 部分](http://phpmaster.com/web-services-with-php-and-soap-1/)（已过期 - nusoap）
2.  [使用 PHP 和 SOAP 创建 Web 服务，第 2 部分](http://phpmaster.com/web-services-with-php-and-soap-2/)（已过期 - nusoap）
3.  [wsdl2php 手册](https://web.archive.org/web/20131023185211/http://www.urdalen.no/wsdl2php/manual.php)（PHP SOAP 扩展）
4.  [Web 服务 - WSDL：创建 SOAP 服务器](https://web.archive.org/web/20150805115209/http://www.phpeveryday.com/articles/Web-Services-WSDL-Creating-SOAP-Server-P484.html)（PHP SOAP 扩展）
5.  [WSDL 文档示例](http://www.tutorialspoint.com/wsdl/wsdl_example.htm)（SOAP 解释，没有 PHP）

**编辑：对于 PHP 5.3 以上的最新版本**

[SoapClient 类](http://php.net/soapclient)用于最新版本的 PHP（5.3 及更高版本）。

它可能会帮助你。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-12T08:45:12.187

请避免遵循[托尼·斯塔克回答](https://stackoverflow.com/a/12490799/327074)中的一些建议链接，它们确实**已经过时了**。

例如，在当前支持的 PHP 版本（例如 5.3/5.4）中使用 nusoap 真的很麻烦。

更好的替代方案是来自本机 PHP SOAP 扩展的[SoapClient 。](http://php.net/soapclient)

# jquery - 无法在值上选择 Select

> ID：12490301
> 
> 赞同：0
> 
> 时间：2012-09-19T07:32:13.700
> 
> 标签：jquery, select

我生成多选框。接下来，我为此选择添加一些选项并尝试设置选定的选项。但这不起作用。这是我设置所选项目的代码：

```
for(xx=0;xx<obj.length; xx++)
{
    //console.log(obj.length);
    idd = obj[xx].id_produkt_lista;   
    id_statusd =  obj[xx].id_status;

    $('#sel_' + idd).find("option[value=" + id_statusd + "]").attr('selected','selected');

} 
```

上面代码中的变量是：

*   idd - 我要设置其选项的选择框的 ID。
*   id_statusd - 应该在 select # *sel* +id上选择的值

我的html代码如下：

```
<tbody>
    <tr id="47">
        <td id="" class="">2</td>
        <td id="">
            <select class="sel" id="sel_47">
            <option value="2" style="color: rgb(186, 175, 28);">drukowanie</option>
            <option valuea="3" style="color: rgb(8, 193, 255);">na zgrzewalni</option>
            <option value="4" style="color: rgb(112, 51, 158);">na oklejaniu</option>
            <option value="5" style="color: rgb(112, 51, 158);">laminowanie</option>
            <option value="6" style="color: rgb(112, 51, 158);">przycinanie</option>
            <option value="7" style="color: rgb(112, 51, 158);">oklejanie</option>
            <option value="8" style="color: rgb(237, 90, 21);">na cięciu</option>
            <option value="9" style="color: rgb(237, 90, 21);">na frezowaniu</option>
            <option value="10" style="color: rgb(237, 90, 21);">burtowanie i klejenie</option>
            <option value="11" style="color: rgb(237, 90, 21);">spawanie</option>
            <option value="12" style="color: rgb(237, 90, 21);">elektryka</option>
            <option value="14" style="color: rgb(90, 35, 163);">zamowienie zewnetrzne</option>
            <option value="15" style="color: rgb(62, 201, 65);">MAGAZYN-gotowe</option>
        </select>
        </td>
     </tr> 
     <tr id="48">
         <td id="" class="">3</td>
         <td id="">
        <select class="sel" id="sel_48">
            <option value="2" style="color: rgb(186, 175, 28);">drukowanie</option>
            <option value="3" style="color: rgb(8, 193, 255);">na zgrzewalni</option>
            <option value="4" style="color: rgb(112, 51, 158);">na oklejaniu</option>
            <option value="5" style="color: rgb(112, 51, 158);">laminowanie</option>
            <option value="6" style="color: rgb(112, 51, 158);">przycinanie</option>
            <option value="7" style="color: rgb(112, 51, 158);">oklejanie</option>
            <option value="8" style="color: rgb(237, 90, 21);">na cięciu</option>
            <option value="9" style="color: rgb(237, 90, 21);">na frezowaniu</option>
            <option value="10" style="color: rgb(237, 90, 21);">burtowanie i klejenie</option>
            <option value="11" style="color: rgb(237, 90, 21);">spawanie</option>
            <option value="12" style="color: rgb(237, 90, 21);">elektryka</option>
            <option value="14" style="color: rgb(90, 35, 163);">zamowienie zewnetrzne</option>
            <option value="15" style="color: rgb(62, 201, 65);">MAGAZYN-gotowe</option>
        </select>
         </td>
       </tr> 
       <tr id="49">
           <td id="" class="">4</td>
           <td id="">
            <select class="sel" id="sel_49"><option value="2" style="color: rgb(186, 175, 28);">drukowanie</option>
            <option value="3" style="color: rgb(8, 193, 255);">na zgrzewalni</option><option value="4" style="color: rgb(112, 51, 158);">na oklejaniu</option>
            <option value="5" style="color: rgb(112, 51, 158);">laminowanie</option><option value="6" style="color: rgb(112, 51, 158);">przycinanie</option>
            <option value="7" style="color: rgb(112, 51, 158);">oklejanie</option><option value="8" style="color: rgb(237, 90, 21);">na cięciu</option>
            <option value="9" style="color: rgb(237, 90, 21);">na frezowaniu</option><option value="10" style="color: rgb(237, 90, 21);">burtowanie i klejenie</option>
            <option value="11" style="color: rgb(237, 90, 21);">spawanie</option><option value="12" style="color: rgb(237, 90, 21);">elektryka</option>
            <option value="14" style="color: rgb(90, 35, 163);">zamowienie zewnetrzne</option><option value="15" style="color: rgb(62, 201, 65);">MAGAZYN-gotowe</option>
            </select></td></tr> </tbody> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:54:38.017

您不需要以这种方式在选项上设置 selected 属性。您所要做的就是在`select`.

在此处查看此操作：http: [//jsfiddle.net/ht6xD/](http://jsfiddle.net/ht6xD/)

所以你的代码可能看起来像：

```
for(xx=0;xx<obj.length; xx++)
{
    //console.log(obj.length);
    idd = obj[xx].id_produkt_lista;   
    id_statusd =  obj[xx].id_status;

    $('#sel_' + idd).val(id_statusd);
} 
```

不太可能与问题有关，但您仍应修复。在第一次`<select>`改变

```
<option valuea="3" 
```

至

```
<option value="3" 
```

**编辑**

我已经模拟了这个（[http://jsfiddle.net/HacLZ/](http://jsfiddle.net/HacLZ/)）。确实，这是您应该考虑自己做的事情，但现在已经完成。

该代码在所有三种解决方案（您的、我的和 nbrooks）中都可以正常工作。所以肯定有其他问题。我怀疑你有重复的身份证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:09:13.950

[`.val()`](http://api.jquery.com/val/)接受一个回调参数，它可以计算元素的新值，给定索引和前一个值。

像这样的东西应该工作：

```
$("select.sel").val(function(index, value) {
    return obj[index]["id_status"];
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:52:32.810

如果 idd 和 id_statusd 包含预期值，它应该可以正常工作，但是尝试将选择行更改为：

```
$('#sel_' + idd + ' option[value="' + id_statusd + '"]').attr('selected','selected'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T08:26:24.990

尝试这个

***JS代码***

```
$(document).ready(function(){
    $('select').change(function(){
         var id = $(this).attr('id');
        console.log($('#'+id+'').find('option:selected').text());
    });     
}); 
```

***[JS小提琴](http://jsfiddle.net/vabqv/67/)***

# php - PHP 在下拉列表中获取选定的值

> ID：12490303
> 
> 赞同：0
> 
> 时间：2012-09-19T07:32:27.940
> 
> 标签：php

我有这个脚本，它在下拉列表中显示年、月和日。

我的问题是：如何获取 dmy 格式的选定值？

假设我是否有一个按钮来获取当前选定的值并显示在文本框上。我该怎么做？

任何想法都非常感谢。谢谢你。

```
<html>
    <body>
<?php
    $months = array(
            'January', 
            'February', 
            'March', 
            'April', 
            'May', 
            'June',
            'July', 
            'August', 
            'September', 
            'October', 
            'November',
            'December'
        );
    $weekday = array(
            'Sunday',
            'Monday',
            'Tuesday',
            'Wednesday',
            'Thursday',
            'Friday',
            'Saturday'
        );
    $days = range(1,31);
    $years = range (2010, 2020);

    $currentDay = date('d');
    $currentMonth = date('F');
    $currentYear = date('Y');

    echo "<select name='weekday'>";
    foreach($days as $valued) {

        if($valued == $currentDay)
        { 
            $default = 'selected="selected"'; 
            echo '<option '.$default.' value="'.$valued.'">'.$valued.'</option>\n';
        } else {
            $default='';
            echo '<option '.$default.' value="'.$valued.'">'.$valued.'</option>\n';
        }
        } 
    echo '</select>&nbsp;';
        echo "<select name='month'>";
        foreach($months as $valuem) {
            if($valuem==$currentMonth)
        { 
            $default1 = 'selected="selected"';
            echo '<option '.$default1.' value="'.$valuem.'">'.$valuem.'</option>\n';
        } else {
            $default1 = '';    
            echo '<option '.$default1.' value="'.$valuem.'">'.$valuem.'</option>\n';
        }

    } 
        echo '</select> &nbsp; ';
        echo "<select name='year'>";

        foreach ($years as $valuey) {

    if($valuey == $currentYear)
    { 
       $default2 = 'selected="selected"';
       echo '<option '.$default2.' value="'.$valuey.'">'.$valuey.'</option>\n';
    } else {
           $default2 = '';
           echo '<option '.$default2.' value="'.$valuey.'">'.$valuey.'</option>\n';
    }

        }  
        echo '</select> &nbsp; ';
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:34:45.910

首先，让我纠正你几个错误：

1.  *名为weekday*的选择应命名为*day*。这不是强制性的，但是选择的名称实际上尊重内部数据的含义是一种很好的做法。

2.  如果要向服务器提交数据，则**必须**在表单中包含 <select>、<input>、<textarea> 等元素。

`<form action="#" method="POST"> [code be here] </form>`

应该做。

我真的不明白你想做什么。但是，我将其缩小到两件事：

1.  您正在尝试将值取回服务器，以进行进一步处理。我想“在文本框中打印日期”只是一个模型案例。在这种情况下，您将使用 $_GET/$_POST 数组（取决于表单使用的方法，见上文）。因此，考虑到当前情况，您将拥有：

    ```
    $selectedDay = $_POST['weekday'];
    $selectedMonth = $_POST['month'];
    $selectedYear = $_POST['year']; 
    ```

    然后，就像之前所说的那样，你会有

    ```
    <textarea><?php echo $selectedDay."-".$selectedMonth."-".$selectedYear;?></textarea> 
    ```

2.  （很可能）您正在尝试在页面上操作而不将值发送回服务器。例如，每次用户在选择中选择不同的值时，都会运行一个脚本并在一个文本框中填充：“您已选择 23-2-1992”。在这种情况下，您不使用 PHP，而是使用 Javascript。

这是您的代码，就是这样做的（重构）：

```
<html>
<head>
<script type="text/javascript">
function updateTextBox()
{
    day = document.getElementById("day").value;
    aux = document.getElementById("month");

    month = aux.value;
    //Use the following if you want the month number instead of the month name, e.g. 12-4-2012
    //month = aux.options[aux.selectedIndex].id;

    year = document.getElementById("year").value;

    document.getElementById("textbox").value = day + "-" + month + "-" + year;
}
</script>
<title>Some title here</title>
</head>
<body>

<?php
$months = array ('January', 'February', 'March', 'April', 'May', 'June','July', 'August', 'September', 'October', 'November','December');
$weekday = array('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday');
$days = range(1,31);
$years = range (2010, 2020);

$currentDay = date('d');
$currentMonth = date('F');
$currentYear = date('Y');

echo "<select name='day' id='day' onChange='updateTextBox()'>";
foreach($days as $valued) {

    if($valued == $currentDay)
    { 
          $default = 'selected="selected"'; 
            echo '<option '.$default.' value="'.$valued.'">'.$valued.'</option>\n';
    } else {
          $default='';
            echo '<option '.$default.' value="'.$valued.'">'.$valued.'</option>\n';
    }

} 
echo '</select>&nbsp;';

echo "<select name='month' id='month' onChange='updateTextBox()'>";

foreach($months as $array_key=>$valuem) {

    if($valuem==$currentMonth)
    { 
        $default1 = 'selected="selected"';
    } else {
        $default1 = '';
    }
    echo '<option '.$default1.' id="'.($array_key+1).'" value="'.$valuem.'">'.$valuem.'</option>\n';

} echo '</select> &nbsp; ';

echo "<select name='year' id='year' onChange='updateTextBox()'>";

foreach ($years as $valuey) {

        if($valuey == $currentYear)
        { 
            $default2 = 'selected="selected"';
        } else {
            $default2 = '';
        }
        echo '<option '.$default2.' value="'.$valuey.'">'.$valuey.'</option>\n';

}
echo '</select> &nbsp; ';
?>

<textarea id="textbox"></textarea>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:38:51.567

```
<textarea>

<?php

echo $currentDay."-".$currentMonth."-".$currentYear;

?>
</textarea> 
```

这将以您在文本区域中请求的格式显示日期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:48:40.160

```
<?php
if(isset($_POST['submit'])){
    $message=$_POST['weekday'].'-'.$_POST['month'].'-'.$_POST['year'];
}
?>
<html>
<body>
<?php
$months = array(
        'January', 
        'February', 
        'March', 
        'April', 
        'May', 
        'June',
        'July', 
        'August', 
        'September', 
        'October', 
        'November',
        'December'
    );
$weekday = array(
        'Sunday',
        'Monday',
        'Tuesday',
        'Wednesday',
        'Thursday',
        'Friday',
        'Saturday'
    );
$days = range(1,31);
$years = range (2010, 2020);

$currentDay = date('d');
$currentMonth = date('F');
$currentYear = date('Y');
echo '<form method="post" action="">';
echo "<select name='weekday'>";
foreach($days as $valued) {

    if($valued == $currentDay)
    { 
        $default = 'selected="selected"'; 
        echo '<option '.$default.' value="'.$valued.'">'.$valued.'</option>\n';
    } else {
        $default='';
        echo '<option '.$default.' value="'.$valued.'">'.$valued.'</option>\n';
    }
    } 
echo '</select>&nbsp;';
    echo "<select name='month'>";
    foreach($months as $valuem) {
        if($valuem==$currentMonth)
    { 
        $default1 = 'selected="selected"';
        echo '<option '.$default1.' value="'.$valuem.'">'.$valuem.'</option>\n';
    } else {
        $default1 = '';    
        echo '<option '.$default1.' value="'.$valuem.'">'.$valuem.'</option>\n';
    }

} 
    echo '</select> &nbsp; ';
    echo "<select name='year'>";

    foreach ($years as $valuey) {

if($valuey == $currentYear)
{ 
   $default2 = 'selected="selected"';
   echo '<option '.$default2.' value="'.$valuey.'">'.$valuey.'</option>\n';
} else {
       $default2 = '';
       echo '<option '.$default2.' value="'.$valuey.'">'.$valuey.'</option>\n';
}

    }  
    echo '</select> &nbsp; ';
    echo '<input type="submit" name="submit" id="submit" value="Get Selected Date">          </input></form>';
?>
<p>You Select:</p>
<input type="text" value="<?php if(isset($message)){echo $message;}  ?>"></input>

</body>
</html> 
```

# ipv6 - vimeo.com 是否支持 IPV6？vimeo的IPV6地址是什么？

> ID：12490306
> 
> 赞同：-6
> 
> 时间：2012-09-19T07:32:43.880
> 
> 标签：ipv6, vimeo

我想通过 ipv6 访问 vimeo (http://vimeo.com/)，但它的 ipv6 地址是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T07:46:55.613

显然（正如您可以通过简单的 DNS 请求所做的那样），它们没有 IPv6 地址：

```
$ host -a vimeo.com
Trying "vimeo.com"
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 16587
;; flags: qr rd ra; QUERY: 1, ANSWER: 10, AUTHORITY: 0, ADDITIONAL: 7

;; QUESTION SECTION:
;vimeo.com.                     IN      ANY

;; ANSWER SECTION:
vimeo.com.              30      IN      TXT     "v=spf1 a mx ptr ip4:74.113.232.150 ip4:74.113.232.149 include:iac.com -all"
vimeo.com.              30      IN      MX      6 vimeo.com.s7b2.psmtp.com.
vimeo.com.              30      IN      MX      6 vimeo.com.s7b1.psmtp.com.
vimeo.com.              30      IN      MX      6 vimeo.com.s7a2.psmtp.com.
vimeo.com.              30      IN      NS      ns4.iaccap.com.
vimeo.com.              30      IN      SOA     primary.vimeo.com. admin.vimeo.com. 2008102362 86400 7200 604800 300
vimeo.com.              30      IN      NS      ns1.iaccap.com.
vimeo.com.              30      IN      MX      6 vimeo.com.s7a1.psmtp.com.
vimeo.com.              30      IN      NS      ns2.iaccap.com.
vimeo.com.              30      IN      A       74.113.233.128

;; ADDITIONAL SECTION:
vimeo.com.s7a1.psmtp.com. 14359 IN      A       64.18.6.10
vimeo.com.s7b2.psmtp.com. 14359 IN      A       64.18.6.14
vimeo.com.s7b1.psmtp.com. 14359 IN      A       64.18.6.13
ns4.iaccap.com.         86400   IN      A       74.113.238.28
ns1.iaccap.com.         86400   IN      A       74.113.232.28
vimeo.com.s7a2.psmtp.com. 14359 IN      A       64.18.6.11
ns2.iaccap.com.         86400   IN      A       66.235.119.14 
```

# bash - 在 linux 脚本上构建 gcc

> ID：12490307
> 
> 赞同：0
> 
> 时间：2012-09-19T07:32:46.417
> 
> 标签：bash, unix, gcc, build

美好的一天，我编写了在 linux 上构建 gcc 的脚本，我的代码是：

```
#!/bin/bash

export INSTALLATION_GCC=/opt

cd $INSTALLATION_GCC

tar xjvf gcc-4.7.0.tar.bz2

export srcdir="$INSTALLATION_GCC/gcc-4.7.0"

export objdir="$INSTALLATION_GCC/gcc-bin"

export insdir="$INSTALLATION_GCC/usr/local"

mkdir -p $srcdir

mkdir -p $objdir

mkdir -p $insdir

cd $objdir

$srcdir/configure --prefix=$insdir

make bootstrap 
```

进行安装

但是当我运行这个脚本时，我得到了错误：

```
No such file or directoryopt
tar (child): gcc-4.7.0.tar.bz2\r: Cannot open: No such file or directory
tar (child): Error is not recoverable: exiting now
tar: Child returned status 2
tar: Error is not recoverable: exiting now
/configure: No such file or directory
'.  Stop. No rule to make target `bootstrap
'.  Stop. No rule to make target `install 
```

为什么 cd 不成功，如果我执行我的脚本（如果我在交互模式下输入这个命令一切正常）？构建和安装 gcc 后为什么我的 gcc 版本没有改变，我怎样才能正确替换旧版本的 gcc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:08:19.667

我认为我关于退格作为目录名称一部分的评论是相关的：

“这里有些奇怪，错误消息 No such file or directoryopt is missing a space and a /. 在我看来您的代码没有生成此错误消息，您确定 $INSTALLATION_GCC 是 /opt 与前导 / ? 几乎看起来 $INSTALLATION_GCC 的第一个字符是退格键。”

我还`gcc-4.7.0.tar.bz2\r`发现了其中一条错误消息。A`\r`会产生这些效果。`\r`（回车）最常见的不需要的来源是 Windows。您是否在 Windows 上使用记事本之类的工具来编辑脚本？如果涉及 Windows，请使用`dos2unix`.

# php - 在 zend 框架中在运行时删除标签装饰器的类

> ID：12490308
> 
> 赞同：2
> 
> 时间：2012-09-19T07:32:50.190
> 
> 标签：php, zend-framework, zend-form

我正在处理 zend 框架 1.12 中的一个项目。为了生成装饰器，我创建了一个扩展“Zend_Form”的类“Application_Form_Base”。当我在表单中添加带有标签装饰器的新元素时，我已经在这个类中编写了这样的代码，它在该标签上应用了一个 css 类“field_label”。问题来了，对于某种形式，我只想在运行时删除标签的这个 css 类。任何人都有想法，如何在渲染表单元素时在运行时删除这个 css 类？

以下是我的中间形式类

```
<?php

class Application_Form_Base extends Zend_Form
{

public $elementDecorators = array(
        'ViewHelper',
        'Errors',
        array(
                'label',
                array(                          
                        'class' => 'field_label'
                )
        ),
        array(
                array(
                        'row' => 'HtmlTag'
                ),
                array(
                        'tag' => 'div',
                        'class' => 'form-row'
                )
        )
);

public $buttonDecorators = array(
        'ViewHelper',
        array(
                array(
                        'label' => 'HtmlTag'
                ),
                array(
                        'tag' => 'label',
                        'placement' => 'prepend',
                        'class'=>'field_label'
                )
        ),
        array(
                array(
                        'row' => 'HtmlTag'
                ),
                array(
                        'tag' => 'div',
                        'class' => 'form-row'
                )
        )
);

public function loadDefaultDecorators ()
{
    $this->setDecorators(
            array(
                    'FormElements',
                    array(
                            'HtmlTag',
                            array(
                                    'tag' => 'div',
                                    'class' => 'zendForm'
                            )
                    ),
                    'Form'
            ));
}
} 
```

以下是我的搜索表单的片段

```
class Admin_Form_SubscribeSearch extends Application_Form_Base
{

public function init()
{
    $locale = Zend_Registry::get('Zend_Translate');

    /* Form Elements & Other Definitions Here ... */

    $this->setMethod('post');
    $this->setName('searchPackage');

    $this->addElement('text','name',array(
        'label'=>$locale->translate('label_name'),
        'required'=>true,
        'decorators'=> $this->elementDecorators,
        'filters'=>array('StringTrim'),
        'class'=>'',   
    )); 
```

以下是为该表单字段生成的 html 输出。

```
<label class="field_label required" for="price">name</label> 
```

在视图中渲染表单元素时，我想删除这个 'field_label' 类。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:12:04.067

您可以为特定元素设置特定的装饰器：

```
$element = $this->getElement('name');
$element->setDecorator(array('Label')); // without additional class 
```

# sql-server - 将 ms-access last() 函数转换为 sql server 2008

> ID：12490325
> 
> 赞同：0
> 
> 时间：2012-09-19T07:33:39.457
> 
> 标签：sql-server, sql-server-2008, tsql, ms-access

如何将 ms-access last() 函数转换为 sql server 2008 等效查询？代码是

```
SELECT 
    DISTINCT Last([Title].[Number) AS Row_ID 
FROM [Title] 
HAVING (Last([Title].[Number]) Is Null) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:36:57.207

它没有直接的等价物，但通常可以通过 and 的组合来实现`ORDER BY`，`ROW_NUMBER()`或者可能`MAX`- 如果您提供更多上下文和示例数据，则更容易给出明确的答案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:46:46.560

试试这个

```
Select Top 1 Number From
(
  Select Number From Title ORDER BY Number DESC
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T08:42:00.383

尝试[在 (...) 上使用 LAST_VALUE(Title.Number)](http://msdn.microsoft.com/en-us/library/hh231517.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T08:14:51.197

您需要使用子查询，`ORDER BY`因为 sql-server 不保证没有此子句的行的顺序。请参阅示例。

```
declare @tbl table(f1 int, f2 varchar(10), d datetime)

insert into @tbl values (1,'1-first','20120917')
insert into @tbl values (1,'1-middle','20120918')
insert into @tbl values (1,'1-last','20120919')
insert into @tbl values (2,'2-just one','20120917')

select f1, (select TOP 1 f2 from @tbl t2 where t2.f1=t1.f1 order by d DESC) Last_f2
from @tbl t1
group by f1 
```

# wordpress - htaccess 条件重定向

> ID：12490330
> 
> 赞同：0
> 
> 时间：2012-09-19T07:33:52.883
> 
> 标签：wordpress, .htaccess, redirect

我通过谷歌索引了几个标签，如下所示`domain.com/tag-name`。由于我的 wordpress 插件之间的不兼容，这个结构必须更改为`domain.com/tag/tag-name`，另一方面，我所有的帖子都具有与索引标签 url 几乎相同的结构`domain.com/pots-name`。如果http响应是404，有没有办法使用htaccess创建条件模式以重定向`domain.com/tag-name`到？`domain.com/tag/tag-name`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:03:12.330

您可以创建一个自定义 404 php 页面并从那里重定向。

将以下行添加到您的 .htaccess 中：

```
ErrorDocument 404 /404_redirect.php 
```

并创建您的自定义 404_redirect.php：

```
<?php
if (should_redirect($_SERVER['REDIRECT_URL'])) {
    header('HTTP/1.1 301 Moved Permanently');
    header('Location: ' . get_redirect_target($_SERVER['REDIRECT_URL']));
} else {
    print_default_404_page();
}
?> 
```

# google-apps-script - 如何从 Google 日历共享中获取邮件地址列表？

> ID：12490335
> 
> 赞同：0
> 
> 时间：2012-09-19T07:34:14.983
> 
> 标签：google-apps-script, google-calendar-api

我想向所有与我共享 Google 日历的人发送电子邮件，但未能找到一种方法可以返回[日历服务](https://developers.google.com/apps-script/service_calendar)中的电子邮件地址列表。提示？

顺便说一句，GDocs 和脚本的源代码也是[可用](https://docs.google.com/spreadsheet/ccc?key=0Alwfpys1YRkcdDN6My1BaFRzVVZLQi11LXA2cGNRR0E)的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T23:29:18.163

不幸的是，CalenderApp 服务不会公开与之共享的用户列表，但它是功能请求的绝佳候选者。

# c# - 遍历一个字符串 [] 列表 按字母顺序获取结果

> ID：12490337
> 
> 赞同：2
> 
> 时间：2012-09-19T07:34:27.743
> 
> 标签：c#, linq, list, arrays

我将首先在这里声明主要问题，因此您可以根据需要跳过其余问题。

**如何使结果列表按字母顺序排序？**

```
public static List<string> GenerateMonthNames(string prefixText)
{
    List<string> items = new List<string>();
    items.Add("a");
    items.Add("appl");
    items.Add("ap");
    items.Add("apple");
    items.Add("change");
    items.Add("world");
    items.Add("engaging");

    string[] strArray = items.ToArray();

    string tempFundstr = string.Empty;
    List<string> returnedList= new List<string>();

    int strNumber;
    int strIndex = 0;
    for (strNumber = 0; strNumber < strArray.Length; strNumber++)
    {
        strIndex = strArray[strNumber].IndexOf(prefixText);
        if (strIndex >= 0)
        {
            tempFoundStr = strArray[strNumber];
            retLst.Add(retstr);
        }    
    }

    items.Clear();
    return returnedList;
} 
```

绝望地尝试 Ajax`autoComplete`只是为了让它工作，而不使用数据库作为自动完成数据的源

虽然我已经解决了主要问题，因为它根本没有工作（;。现在在“修复”问题之后自动完成确实可以工作。**但是**

这是一种混乱的解决方案，我设法拉出以便遍历列表或数组这里的问题是我无法理解如何通过使用 Linq、枚举或任何实现，所以我将能够返回结果列表**按字母顺序排序**。

在你的帮助下，我希望能把代码弄明白（按书本）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:40:27.347

这应该工作

```
items.Where(item => item.IndexOf(prefixText) >= 0).OrderBy(item => item) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:42:09.850

试试这个：

```
public static List<string> GenerateMonthNames(string prefixText)    
{
    var items = new List<string>();
    items.Add("Oliver");
    items.Add("Olsen");
    items.Add("learns");
    items.Add("how");
    items.Add("change");
    items.Add("world");
    items.Add("engaging");  

    var returnList = items.Where(item=>item.Contains(prefixTest)).ToList();
    returnList.Sort();

    return returnList;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T07:38:50.217

如果它只是返回您要添加的排序列表，那么这应该可以

```
return retLst.OrderBy(item=>item); 
```

要进行更完整的重构，请使用 PHeiberg 的解决方案。

你也可以像这样初始化

```
List<string> items = new List<string>(){"a", "appl", ...etc}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T07:45:05.640

如果要过滤所有具有前缀 is 的项目`prefixText`，`StartWith`会更正确：

```
items.Where(item => item.StartsWith(prefixText))
     .OrderBy(item => item) 
```

# asp.net-mvc-3 - 在一个视图中组合多个模型

> ID：12490338
> 
> 赞同：0
> 
> 时间：2012-09-19T07:34:27.743
> 
> 标签：asp.net-mvc-3

我对此处给出的已接受答案有一个后续问题：[ASP MVC 3 中的一个视图中的两个模型](https://stackoverflow.com/questions/5550627/two-models-in-one-view-in-asp-mvc-3)

我有三个模型，类型、原因、位置，我想在一个视图中列出其内容。根据上面链接中的答案，我制作了一个新模型，它结合了如下所示：

```
public class Combined
    {
        public IEnumerable<Place> Place { get; set; }
        public IEnumerable<Type> Type { get; set; }
        public IEnumerable<Cause> Cause { get; set; }
    } 
```

我将其设为 IEnumerable<> 因为据我所知，当我只想在 foreach 循环中列出这些模型的内容时，这就是我想要的。然后我为视图制作了这个控制器：

```
[ChildActionOnly]
    public ActionResult overSightHeadings()
    {
        Combined Combined = new Combined();
        return View(Combined);
    } 
```

最后是视图（我只是想先从其中一个表中列出）：

```
@model mvcAvvikelser.Models.Combined
@{
    Layout = null;
}
<tr>
@foreach (var Type in Model.Type)
{
    <th> @Html.DisplayTextFor(ModelItem => Type.Name)</th>
}
</tr> 
```

这段代码的问题是它在 foreach 代码启动时抛出了一个空异常。

```
System.NullReferenceException: Object reference not set to an instance of an object. 
```

所以我不完全确定我在这里做错了什么，它应该不是 IEnumerable，我是否在控制器中错误地初始化了模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:54:34.190

应该是这个

```
[ChildActionOnly]
public ActionResult overSightHeadings()
{
    Combined combined = new Combined();
    combined.Types = new List<Type>();
    combined.Causes = new List<Cause>();
    combined.Places = new List<Place>();

    return View(Combined);
} 
```

请注意，我已将属性名称更改为复数。这将您的财产定义为收藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:48:50.967

看起来像

```
 public IEnumerable<Type> Type { get; set; } 
```

未设置

尝试在没有 IEnumerable 的模型构造函数中初始化此列表

```
 List<Type> Type = new List<Type>(); 
```

# c - 如何强制 openMP 以特定顺序运行迭代

> ID：12490347
> 
> 赞同：8
> 
> 时间：2012-09-19T07:35:16.690
> 
> 标签：c, openmp

我正在使用 openMP 并行运行我的模拟实例。

```
#pragma omp parallel for private(part) shared(P,lfcc,temp)
for (part = 0; part < P->Parts; part++) 
```

循环的一部分检查索引号为“part”的输出文件是否已经存在（因此我可以针对“Parts”的某个值运行模拟，然后在不覆盖现有结果的情况下增加它）。但是，这需要迭代按顺序运行。**也就是说，对于 n 个线程，它应该首先同时运行部分 (1)-(n)，然后是部分 (n+1)-(2n)，依此类推。**现在（3个线程并行运行，并且“部分”设置为N），行为不同，运行第一部分（0），（N / 3），（2N / 3），然后是（1），（N /3+1),(2N/3+1) 等等。

现在假设，我最初想要全部完成的 30 个部分。然后我决定我需要更多零件并将“零件”更改为 45。然后第一个线程得到零件 (1)-(15)、第二个 (16)-(30) 和第三个 (31-45)。前两个线程很快发现它们所有分配的部分都已经完成，并将让最后一个线程单独工作（如果我在程序终止之前放置了一个屏障子句）。

一种简单的解决方案是让“part”变量不是从 0 开始，而是从 m+1 开始，其中 m 是先前完成的部分的数量。但我想知道是否可以强制 openMP 以上面粗体显示的顺序运行迭代。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T08:19:00.077

`1`您可以更改每个线程在`schedule`子句中到达的迭代块的大小，例如`schedule(static,1)`. 使用 3 个线程，第一个线程将处理迭代 0、3、6、9 等，第二个线程将处理迭代 1、4、7、10 等，第三个线程将处理迭代 2、5、8， 11 以此类推。您仍然需要在循环中的某个位置进行同步，因为无法保证线程会同时以相同的速度执行所有步骤（您可以在每次迭代结束时设置屏障以在下一个迭代块开始之前进行同步）。

另一种解决方案是使用 OpenMP 任务构造。有了它，您可以在一个线程中运行一个大循环，生成计算任务。您可以在此循环中检查输出文件是否存在，并仅在需要时创建新任务（例如，输出文件不存在）：

```
#pragma omp parallel
{
    ...
    #pragma omp single
    for (part = 0; part < P->Parts; part++)
    {
        if (!output_file_exists(part))
           #pragma omp task
           {
              ... computation for that part ...
           }
    }
    #pragma omp taskwait
    ...
} 
```

希望我已经正确理解了您的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-29T13:53:35.260

如果我们希望 OpenMP 线程按顺序执行，我们必须使用该`ordered`子句。但是，我们必须小心。以下将按`i`顺序打印（和线程ID）（`i`从`0`到`19`，tid从`0`到`omp_get_num_threads() - 1`）：

```
#pragma omp parallel
#pragma omp for ordered
for (i = 0; i < 20; i++)
    #pragma omp ordered
    printf("i=%d - tid=%d\n", i, omp_get_thread_num()); 
```

输出（在我的 8 核 intel x86_64 机器中）：

```
i=0 - tid=0
i=1 - tid=0
i=2 - tid=0
i=3 - tid=1
i=4 - tid=1
i=5 - tid=1
i=6 - tid=2
i=7 - tid=2
i=8 - tid=2
i=9 - tid=3
i=10 - tid=3
i=11 - tid=3
i=12 - tid=4
i=13 - tid=4
i=14 - tid=5
i=15 - tid=5
i=16 - tid=6
i=17 - tid=6
i=18 - tid=7
i=19 - tid=7 
```

但请注意：

```
#pragma omp parallel
#pragma omp for ordered
for (i = 0; i < 20; i++)
{
    // the threads enter this for() section in order but won't 
    // print this statement in order!
    printf("other i=%d - tid=%d\n", i, omp_get_thread_num());
    #pragma omp ordered
    // these are printed in order
    printf("i=%d - tid=%d\n", i, omp_get_thread_num()); 
} 
```

输出：

```
other i=16 - tid=6
other i=18 - tid=7
other i=12 - tid=4
other i=0 - tid=0
i=0 - tid=0
other i=1 - tid=0
i=1 - tid=0
other i=2 - tid=0
i=2 - tid=0
other i=3 - tid=1
other i=6 - tid=2
other i=14 - tid=5
i=3 - tid=1
other i=4 - tid=1
i=4 - tid=1
other i=5 - tid=1
i=5 - tid=1
i=6 - tid=2
other i=7 - tid=2
i=7 - tid=2
other i=8 - tid=2
i=8 - tid=2
other i=9 - tid=3
i=9 - tid=3
other i=10 - tid=3
i=10 - tid=3
other i=11 - tid=3
i=11 - tid=3
i=12 - tid=4
other i=13 - tid=4
i=13 - tid=4
i=14 - tid=5
other i=15 - tid=5
i=15 - tid=5
i=16 - tid=6
other i=17 - tid=6
i=17 - tid=6
i=18 - tid=7
other i=19 - tid=7
i=19 - tid=7 
```

最后请注意，这个数组是按顺序填充的：

```
// threads filling up array
int Arr[20] = {0};
#pragma omp parallel for ordered
for (i = 0; i < 20; i++)
    Arr[i] = i;

printf("\n\n");
// lets check to see if threads have put values to the array in order
for (i = 0; i < 20; i++)
    printf("Arr[%d]=%d\n", i, Arr[i]); 
```

输出：

```
A[0]=0
A[1]=1
A[2]=2
A[3]=3
A[4]=4
A[5]=5
A[6]=6
A[7]=7
A[8]=8
A[9]=9
A[10]=10
A[11]=11
A[12]=12
A[13]=13
A[14]=14
A[15]=15
A[16]=16
A[17]=17
A[18]=18
A[19]=19 
```

# c# - 从 asp.net 中的 Web.config 获取连接字符串

> ID：12490348
> 
> 赞同：30
> 
> 时间：2012-09-19T07:35:18.660
> 
> 标签：c#, asp.net, database, connection-string

我想知道从 asp.net 中的 web.config 文件中获取连接字符串的方法。

我只知道以下方式。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Configuration;

    namespace Sherserve.DataAccessLayer
    {
        public class DBGateway
        {
            public static string conString;

            public DBGateway()
            {
                conString = ConfigurationManager.ConnectionStrings["test"].ToString();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-19T07:41:59.107

使用`ConfigurationManager.ConnectionStrings`是唯一正确的方法，要正确使用它并进行健全性检查，您可以拥有这样的代码：

```
public DBGateway()
{
    ConnectionStringSettings mySetting = ConfigurationManager.ConnectionStrings["test"];
    if (mySetting == null || string.IsNullOrEmpty(mySetting.ConnectionString))
        throw new Exception("Fatal error: missing connecting string in web.config file");
    conString = mySetting.ConnectionString;
} 
```

如果连接字符串丢失，这将引发有用的错误，而不是神秘的“空对象”错误。

值得一提的是，`ConnectionStringSettings`该类正在覆盖该`ToString()`方法：

```
public override string ToString()
{
    return this.ConnectionString;
} 
```

所以这意味着使用`ConfigurationManager.ConnectionStrings["test"].ToString()`是一样的，`ConfigurationManager.ConnectionStrings["test"].ConnectionString`但是你仍然更好地执行健全性检查，并且个人使用实际属性看起来更干净，而不是依赖于类来提供它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-19T07:38:23.237

这是整个解决方案：-

```
string constring = System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionStringName"].ConnectionString;
SqlConnection con = new SqlConnection(constring);
DataSet ds = new DataSet();
try
 {
   SqlDataAdapter dataAdapter = new SqlDataAdapter(query, con);
   SqlCommandBuilder commandBuilder = new SqlCommandBuilder(dataAdapter);
   con.Open();
   dataAdapter.Fill(ds, "table");
   return ds;
 }
 catch (Exception ex)
  {
  }
    finally
    {
        if (con.State == System.Data.ConnectionState.Open)
            con.Close();
    } 
```

这就是您如何将数据库中的记录提取到数据表中的方法。

希望这就是你要找的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-05T11:04:04.407

尝试

```
 string ConString = System.Configuration.ConfigurationManager.ConnectionStrings[ConfigurationManager.ConnectionStrings.Count -1].ConnectionString; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-26T18:17:26.080

我的 WebAssistant 类上有一个方法。我在 appSettings 上有一个包含我的 WebAppName 的键，请检查以下行：

```
<add key="DOMAIN_NAME" value="mRizvandi.com"/> 
```

我的连接名称总是有“DomainName”+“DBConnectionString”模板，例如：

```
<add name="mRizvandiDBConnectionString" connectionString=... 
```

好的，一切准备就绪，无需传递任何字符串即可获取连接字符串。

```
 public static string GetDBConnectionString()
    {
        string retValue = "";
        string domainUrl = "";
        string connectionKey = "";
        string dbConnectionString = "";

        domainUrl = GetDomainUrl();
        connectionKey = domainUrl.Substring(0, domainUrl.IndexOf(".")) + "DBConnectionString";
        dbConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings[connectionKey].ToString();
        retValue = dbConnectionString;

        return retValue;
    } 
```

我希望会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-02T15:48:29.627

以下代码对我有用。我添加了异常，以防在 web.config 中未建立 connectionString

网络配置：

```
 <configuration>
  <connectionStrings>
    <add name="DBConnection" connectionString="Data Source=myaddress;Initial Catalog=MyCatalog;User ID=myuser;Password=pass;Encrypt=True;TrustServerCertificate=False"
         providerName="System.Data.SqlClient" />
  </connectionStrings>
</configuration> 
```

在我的连接类中：

```
static internal string GetSqlConnectionString(){

try {
    ConnectionStringSettings mySetting = ConfigurationManager.ConnectionStrings("DataBaseConnection");
    if (mySetting == null)
        throw new Exception("Database connection settings have not been set in Web.config file");

    return mySetting.ConnectionString;

} catch (Exception ex) {
    throw;
}} 
```

# excel - 间接增加单元格参考 A1 A2 A3 等

> ID：12490349
> 
> 赞同：6
> 
> 时间：2012-09-19T07:35:19.487
> 
> 标签：excel, excel-formula

我可以知道如何启用（SHEET1 中的 CELL A1）

`=INDIRECT('SHEET2.A1')`

相应地拖动列和行，而不必一一输入

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T09:26:17.910

有时`CELL`函数在这里很有用，例如

`=INDIRECT("'Sheet1'!"&CELL("address",A1))`

可以拖下或跨过

* * *

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T07:42:59.680

您可以在函数中使用单元格引用`Indirect()`，它解析为引用单元格中的值。给定 Sheet1：

```
ColA
------
This
is
a
test 
```

Sheet2中的这些值和公式：

```
ColA    ColB
------  ------
A1      =INDIRECT("Sheet1!"&A1)
A2      =INDIRECT("Sheet1!"&A2)
A3      =INDIRECT("Sheet1!"&A3)
A4      =INDIRECT("Sheet1!"&A4) 
```

Sheet2 中的值如下所示：

```
ColA    ColB
------  ------
A1      This
A2      is
A3      a
A4      test 
```

然后很容易填写（向下拖动公式）自动增加 A 列中的单元格引用和 B 列中的间接公式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T08:12:09.503

再三考虑，将我的评论发布到另一个答案作为答案

**`For copying down`**

您可以
`=INDIRECT("'Sheet1'!A"&ROW(A1))`
在没有帮助列的情况下直接使用增量

请注意，`'`工作表名称周围需要 处理您引用的工作表`'Sheet 1'`而不是`Sheet1`

**`For copying across`**
`=INDIRECT("'Sheet1'!A"&COLUMN()-1)`

在单元格 B1 中将给出 =`Sheet1A1`
在单元格 C1 中将给出 =`Sheet1A2`
等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T14:18:23.083

一个选择是尝试`OFFSET`。

> 偏移（参考，行，列，[高度]，[宽度]）

链接：[微软帮助](http://office.microsoft.com/client/helppreview14.aspx?AssetId=HP010342739&lcid=1033&NS=EXCEL&Version=14&tl=2&CTT=5&origin=HP010342670)

也许使用`ROWS()`，甚至根据值计算出来 - 我用它来查找基于公式的信息，例如`MONTH(Q11)`

# gnuplot - 在单个图形 gnuplot 中从两个不同的数据文件绘图

> ID：12490352
> 
> 赞同：0
> 
> 时间：2012-09-19T07:35:27.787
> 
> 标签：gnuplot

我有两个不同的数据文件，分别命名为`try_giants.dat`和`parameters_ks.dat`. 我想绘制第一个文件的第三列与第二个文件的第二列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T07:27:21.467

使用数据文件`D1.csv`

```
0 1 0
0 1 1
0 1 2
0 1 3
0 1 4 
```

和`D2.csv`

```
0 10
0 20
0 30
0 40
0 50 
```

`D1.csv`您可以在 x 轴上绘制第三列，在`D2.csv`y轴上绘制第二列

```
plot "< paste D1.csv D2.csv" u 3:5 w l 
```

[paste](http://www.computerhope.com/unix/upaste.htm)命令合并相应或后续文件行，为您提供以下输出：

```
0 1 0   0 10
0 1 1   0 20
0 1 2   0 30
0 1 3   0 40
0 1 4   0 50 
```

因此，该文件的第三列是第三列，`D1.csv`第五列是第二列，`D2.csv`结果如下图：

![在此处输入图像描述](../Images/0d18017230d31a1c3501e7c54a0fd873.png)

# mongodb - MongoDB：我如何运行这个查询

> ID：12490360
> 
> 赞同：0
> 
> 时间：2012-09-19T07:35:52.587
> 
> 标签：mongodb, pymongo

我有很多键，如下所示：

```
foo.bar.N.taz.M.zat = value 
```

其中 N 和 M 是随机整数。

我如何在这样的结构中搜索值？

# java - 通话中播放声音

> ID：12490362
> 
> 赞同：1
> 
> 时间：2012-09-19T07:35:59.440
> 
> 标签：java, android, telephony, multimedia

我可以在通话过程中播放声音，但另一端的音量很低。

我应该怎么办？我已经将声音级别增加到支持的最大值。

我已经尝试过 Stream、媒体播放器和扬声器电话，但没有得到预期的结果。

我被困在这个位置，请帮助我......

# css - 是否可以在固定 div 上覆盖？

> ID：12490367
> 
> 赞同：0
> 
> 时间：2012-09-19T07:36:29.443
> 
> 标签：css, twitter-bootstrap

我使用 Bootstrap 作为我的 UI 框架，并且导航栏固定在顶部。我想要一个覆盖全屏的叠加层。目前，导航栏没有被接管。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T07:40:05.047

Bootstrap 导航栏的 z-index 为 1030，这意味着您可能需要 CSS z-index 属性至少为 1031。

```
overlay {
    z-index: 1031;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:41:09.637

实际上，导航栏也确实被接管了。但是，它的`z-index`属性大于覆盖。只需将其添加到您的 CSS 中：

```
.modal-backdrop {
    z-index: 100000;
} 
```

# jquery - 如何使 jquery 砌体具有流体高度？

> ID：12490374
> 
> 赞同：2
> 
> 时间：2012-09-19T07:37:09.490
> 
> 标签：jquery, widget, jquery-masonry

我正在寻找具有拖放选项的灵活（高度+宽度）小部件布局。我希望小部件具有最小和最大高度和宽度，并且在重新调整浏览器窗口大小时都可以重新调整大小。

它必须同时支持 chrome 和 safari。

我已经找到了“css3 flexbox”，但是当我希望其中一个小部件同时具有滚动和灵活高度时，它会出现一些问题。

我找到了“jquery masonry”并希望将其更改为具有灵活高度（现在它具有面向内容的高度）。我想知道是否有人已经这样做了，或者找到了一个可以做到这一点的控件？

# c# - 找不到程序集

> ID：12490381
> 
> 赞同：2
> 
> 时间：2012-09-19T07:37:55.090
> 
> 标签：c#, .net, autofac

我正在使用 Autofac 动态加载程序集。只要程序集与执行程序集位于同一文件夹中，它就可以正常工作。

但是，如果我要动态加载的程序集位于子文件夹中，则应用程序会因“无法加载文件或程序集...”而崩溃

我知道，我可以将这些程序集放在 GAC 中，然后解决问题。但这不是我想要的……

这就是我正在做的...

```
 var builder = new ContainerBuilder();
    builder.RegisterApiControllers(AppDomain.CurrentDomain.GetAssemblies());
    builder.RegisterModule(new ConfigurationSettingsReader());
    builder.Register(c => c.ResolveNamed<IMyInterface>(myVersion)); 
```

还有一些配置：

```
 autofac defaultAssembly="blah"
      modules
        module type="myVersionFile, blah"
      modules
    autofac 
```

关于如何动态加载位于子文件夹中而不使用 GAC 的程序集的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:44:59.043

你有几个选择：

1.  将[探测路径](http://msdn.microsoft.com/en-us/library/823z9h8w.aspx)添加到指向子文件夹的 app.config。这仅在您尝试加载的程序集在您的项目中以某种方式引用时才有效。
2.  您可以通过其他方式指定要加载的程序集。例如，我总是通过路径和文件名掩码加载它们，即具有特定名称模式的特定文件夹中的所有程序集。例如，您可以使用类似于以下的代码：

    ```
    var path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, subFolder);
    var pattern = "YourProject.*.dll";
    var assemblies = Directory.GetFiles(path, pattern).Select(Assembly.LoadFrom);
    builder.RegisterApiControllers(assemblies); 
    ```

# ios - iOS：检测电影纵横比

> ID：12490383
> 
> 赞同：2
> 
> 时间：2012-09-19T07:38:17.167
> 
> 标签：ios, avplayer

我正在开发一个使用 AVPlayer 和 AVPlayerItem 的 DRM 视频播放器，可以播放流式或纯文件电影。

我想知道是否可以检测电影的纵横比，以便我可以做一些平移/平移来播放带有或不带有最终黑色条纹的电影。

我查看了 CoreMedia 框架，但它不是任何真正好的文档，因为大多数方法都没有解释。

你们有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T09:13:23.720

其实很简单：只需要​​使用 AVPLayer 的 videoGravity 就可以了。

# c# - 在单声道中使用 Interop.WMPLib.dll #linux

> ID：12490393
> 
> 赞同：3
> 
> 时间：2012-09-19T07:38:50.033
> 
> 标签：c#, mono, monodevelop, archlinux, wmplib

我正在使用 Visual Studio 2010 和 C# 在 Windows 中开发一个应用程序...现在我想在 Mono 中编译这个应用程序（安装在 Windows 上），然后在 Archlinux 上运行我的应用程序（使用 Monoframework）。

此应用程序使用 Interop.WMPLib.dll 并且在单声道框架中没有...我可以在单声道中引用 WMP 吗？什么是替代品？

非常感谢！恩里科

# c - 开罗的 GtkDrawingArea - 如何使其可滚动

> ID：12490400
> 
> 赞同：2
> 
> 时间：2012-09-19T07:39:39.227
> 
> 标签：c, scroll, gtk, cairo

接下来是`cairo`用于绘制某些东西的小代码。问题是cairo绘制的canvas大于gtk的scrolled_window的面积。但是 scrolled_window 不滚动，所以我只能看到画布的一部分。

有什么建议吗？我的环境：MinGW + gtk2.10.11。

```
#include <gtk/gtk.h>

static gboolean draw_cb (GtkWidget *widget, GdkEventExpose *event) 
{
  cairo_t *cr;
  cr = gdk_cairo_create (widget->window);
  cairo_set_source_rgb(cr, 1, 1, 1);
  cairo_paint(cr);
  cairo_set_source_rgb (cr, 0.42, 0.65, 0.80);
  cairo_set_line_width (cr,6);
  cairo_rectangle (cr, 30, 30, 100, 100);
  cairo_stroke (cr); 
  cairo_destroy(cr);
  return FALSE;
}

int main (int argc, char *argv[])
{
  gtk_init (&argc, &argv);
  GtkWidget *window;
  GtkWidget *sw;
  GtkWidget *cr;

  window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_window_set_policy((GtkWindow *)window, FALSE, FALSE, FALSE);
  sw = gtk_scrolled_window_new (NULL,NULL);
  gtk_widget_set_usize(sw, 100, 100);
  cr = gtk_drawing_area_new();

  gtk_scrolled_window_add_with_viewport(GTK_CONTAINER(sw), cr);
  gtk_container_add (GTK_CONTAINER(window), sw);

  g_signal_connect (window, "destroy", G_CALLBACK (gtk_main_quit), NULL);
  g_signal_connect (cr, "expose-event", G_CALLBACK(draw_cb),  NULL);

  gtk_widget_show_all (window);
  gtk_main ();
  return 0;
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T09:18:18.907

通常，在绘图时，您有两种选择：

1.  要么您希望绘制的内容适应可用大小，然后使用 cairo_scale
2.  或者您使用滚动视图，就像您正在做的那样。

在情况 2 中，Cairo 无法知道您正在画出边界。在某些情况下，越界绘图甚至是您想要的。所以在这里，缺少的是设置绘图区域的大小。这可以使用[gtk_widget_set_size_request](http://developer.gnome.org/gtk/stable/GtkWidget.html#gtk-widget-set-size-request)来完成。

# eclipse - 从 STS Eclipse 中的默认值更改新的 Tomcat 设置

> ID：12490402
> 
> 赞同：1
> 
> 时间：2012-09-19T07:39:47.497
> 
> 标签：eclipse, tomcat

我发现自己不得不不断地在 STS Eclipse 中删除我的 Tomcat 7 服务器并重新安装。

每次我必须这样做：
a）从 45 秒开始增加启动时间，b）通过在“参数”选项卡下的“VM 参数”中添加类似这样的内容来增加 Tomcat 内存：“-XX:MaxPermSize=512m -XX: PermSize=512m -Xms256m -Xmx1024m -XX:-UseGCOverheadLimit"

如何更改 a) 和 b) 的默认值？谷歌有很多关于一次改变这些的信息，但我想改变一个“新”的默认值，而在这方面搜索是空白的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:35:54.343

创建`bin/setenv.sh`（对于 Unix）或`bin/setenv.bat`（对于 Windows）并在`-XX`那里添加所有选项。默认情况下，该文件在 Tomcat[中不存在，](http://www.tomcatexpert.com/ask-the-experts/configure-tomcat-memory-settings)但如果您创建一个，它将被启动脚本拾取。

每当您重新安装 Tomcat 时，只需备份此文件并将其复制回来。

# c++ - 从 CLI C++ 项目引用非托管 C++ 项目

> ID：12490403
> 
> 赞同：2
> 
> 时间：2012-09-19T07:39:49.250
> 
> 标签：c++, visual-studio-2010, visual-studio, compilation

我正在尝试创建一个 CLI DLL 来桥接我的非托管 C++ 可执行项目和另一个托管项目，所有这些都在一个 Visual Studio 解决方案中。

不过，我遇到的问题更早：我无法在我的新 CLI 项目中链接引用非托管 C++ 项目。我已经包含了所需的 .h 文件，并在 CLI 项目中添加了对非托管项目的引用。编译成功，但我遇到了以前从未见过的链接错误：

> 错误2
> 错误LNK2028：未解析的令牌（0A000088）“公共：__cdecl ...

我在项目属性中添加了一个引用并包含了 .h 文件。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:51:28.170

似乎链接器缺少其他项目的一些中间信息。我真的不记得“引用”本机项目是否确实自动设置了链接阶段..我真的觉得你说“引用”很奇怪..对我来说“引用”这个词有点局限于.Net的世界程序集，因为 VS 中的“添加引用”，这使得没有人关心包含/库，并且由于显而易见的原因，本机 dll 无法使用 IIRC。如果您的意思是您手动配置了链接器选项，请原谅我:)

如果不是 - 请解释您是如何引用本机模块的。

无论哪种方式，如果“引用”更早工作，如果您重命名项目，文件名可能会不同步，可能文件时间戳有点偏离，VS 没有注意到新版本。简单的清除和重建有时会神奇地帮助。如果没有，您可以尝试手动删除 Debug/Release/Bin/Obj 文件夹并尝试重新构建。

要尝试诊断，第一步是查看链接器作为输入给出的内容：在 C++/CLI 项目的项目属性页中，检查 Linker->CommandLine 并查看名称类似于“myOtherNativeCppProjectName.lib”的文件在那里可见。如果不是 - 这就是问题所在，只需将其添加到 previos 链接器页面上的链接器选项中，或重新添加引用，然后清理、重建并查看会发生什么。

多说一句，您必须发布整个错误消息 - 此错误消息在函数名称处被截断，因此很难判断它是您的函数还是某些缺少的库模块。随着编译阶段成功并且问题出在链接 - 您是否 100% 确定您已实现该功能？我的意思是，正确的 .h 确实提供给了 C++/CLI 项目，但是正确的 .cpp 文件是否与本机中包含的 .h 文件匹配？忘记添加一个文件也很常见。或者忘记实例化模板。或者在 .H 和 .CPP 之间输入错误的类/函数名称。

# modernizr - Modernizr 特征检测未运行

> ID：12490404
> 
> 赞同：0
> 
> 时间：2012-09-19T07:39:54.720
> 
> 标签：modernizr

我在使用 Modernizr 时遇到问题。根据我读过的初学者教程，这个 html 应该是它的全部内容，但没有任何反应。我期望的是 HTML 元素的类会发生变化，以反映哪些功能可用，哪些功能不可用。

我通过添加 Alert("Hello"); 确保 js 文件路径正确。并确保它触发。

什么不见​​了？

```
<!DOCTYPE html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <title>My Beautiful Sample Page</title>
    <script src="modernizr.custom.57102.js"></script>
</head>

<body>

<div >Yo yo yo </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:27:07.563

使用您问题中的示例 HTML 可以正常工作。

请务必使用例如 Google Chrome 开发者工具或 Firefox 的 Firebug 检查页面的**当前**状态。“查看源代码”选项只为您提供**原始**源代码，与您之前编写的完全相同。

# less - LessCss w/dotLess mixin 问题用于 IE 渐变过滤器

> ID：12490418
> 
> 赞同：2
> 
> 时间：2012-09-19T07:41:13.960
> 
> 标签：less, mixins, css, dotless

我定义了以下较少的mixin：

```
.TopDownActiveGradient(@s1, @s2){ 
background: -moz-linear-gradient(top, @s1 0%, @s2 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,@s1), color-stop(100%,@s2)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, @s1 0%, @s2 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, @s1 0%, @s2 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, @s1 0%, @s2 100%); /* IE10+ */
background: linear-gradient(to bottom, @s1 0%, @s2 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='@{s1}', endColorstr='@{s2}'); /* IE6-8 */} 
```

它是这样使用的：

`.TopDownActiveGradient(#f7f7f7, #fffffe);`

现在，当我输入的颜色不能简化为简写版本（例如#dadada）时，它可以正常工作，这意味着如果我使用#ffffff 作为可以转换为#fff 的颜色，**它将无法**用作 Ie6 的过滤器-8 需要一个完整的颜色十六进制值。

此问题仅**在打开 minify 选项时**发生。如果我选择不缩小，#ffffff 会变成“白色”，效果很好。

我的问题是如何在我的 mixin 中停止颜色十六进制代码缩小？或者有什么办法可以绕过这个限制？

我尝试了很多东西，但都没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:08:11.637

对于 8 char hex，这已在 dotless main 中修复 - [https://github.com/dotless/dotless/commit/52ba9a4ccf4e9a895d557f01112ab4c7f4cad8a7](https://github.com/dotless/dotless/commit/52ba9a4ccf4e9a895d557f01112ab4c7f4cad8a7)

这是在当前版本中。

如果您需要 6 char hex，您可以尝试使用插值

〜“@col”

不过，我不确定它是否会起作用。

# android - 如何在android中使用旅行方向旋转地图视图

> ID：12490423
> 
> 赞同：3
> 
> 时间：2012-09-19T07:41:34.503
> 
> 标签：android, google-maps

我正在尝试使用用户行进方向旋转地图视图，我尝试使用当前位置方位旋转它，但它不起作用我无法继续这样做。谁能告诉我我该怎么做我正在使用谷歌我的应用程序中的地图。谢谢..

# android - 如何在android中正确配置proguard？

> ID：12490425
> 
> 赞同：2
> 
> 时间：2012-09-19T07:41:40.167
> 
> 标签：android, proguard

我已经通过此链接[http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)启用了 proguard，但没有减少 apksize 并且还在逆向工程过程中从 apk 获取代码，所以如何配置。提前致谢

# java - GWT-Platform：当应用程序部署在 tomcat/jboss 上时，浏览器刷新时不会调用 onReveal() 方法

> ID：12490427
> 
> 赞同：4
> 
> 时间：2012-09-19T07:41:47.173
> 
> 标签：java, gwt, gwt-platform

在我的一个 GWT-Platform 应用程序中，我面临一个奇怪的问题，当我在 eclipse GWT 插件中配置的码头运行应用程序并点击浏览器刷新当前页面已成功加载（placeManager.getCurrentPlaceRequest（））但当应用程序战争部署在tomcat/jboss 执行在当前位置请求的演示者的 onBind() 方法之后停止并且不显示页面。

在处理刷新的过程中，该 Presenter 的 GateKeeper 的第一次 canReveal() 方法返回 false，在服务器调用后我再次显示当前位置，这导致 canReveal() 方法返回 true，但 Presenter 仍然未显示。所以，在这里我怀疑有些棘手！

关于这种行为的任何提示？

以下是实现的 LoggedInGatekeeper 的代码片段，它发挥了关键作用：

`public class LoggedInGatekeeper implements Gatekeeper {`

 ````
private final EventBus eventBus;

private final DispatchAsync dispatcher;

private final PlaceManager placeManager;

private CurrentUser currentUser;

private boolean isUserLoggedOut;

private String lastPageAccessed;

@Inject
public LoggedInGatekeeper(final EventBus eventBus, final DispatchAsync dispatcher, final PlaceManager placeManager)
{
    this.eventBus = eventBus;

    this.dispatcher = dispatcher;

    this.placeManager = placeManager;

    this.eventBus.addHandler(LoginAuthenticatedEvent.getType(), new LoginAuthenticatedEventHandler()
    {
        @Override
        public void onLogin(LoginAuthenticatedEvent event)
        {
            currentUser = event.getCurrentUser();
            isUserLoggedOut = false;
        }
    });

    this.eventBus.addHandler(LogoutUserEvent.getType(), new LogoutUserEventHandler()
    {
        @Override
        public void onLogoutUser(LogoutUserEvent event)
        {
            SessionFactory.removeCookie(Constants.LAST_PAGE_ACCESSED);
            currentUser = null;
            isUserLoggedOut = true;
        }
    });
}

@Override
public boolean canReveal()
{
    Log.info("Browser fetched session cookie : " + Cookies.getCookie(Constants.JSESSION_COOKIE_KEY));

    if (Cookies.getCookie(Constants.JSESSION_COOKIE_KEY) == null)
    {
        SC.say("Your session is expired. Please login again");
        NavigateToLoginEvent.fire(eventBus);
        return false;
    }

    if (currentUser != null && !isUserLoggedOut)
    {

        lastPageAccessed = placeManager.getCurrentPlaceRequest().getNameToken();
        Log.info("canReveal() 1 : " + lastPageAccessed);
        SessionFactory.addCookie(Constants.LAST_PAGE_ACCESSED, lastPageAccessed);
        return currentUser.isLoggedIn();
    }
    else if (isUserLoggedOut)
    {
        Log.info("canReveal() 2 : User is logged out");
        NavigateToLoginEvent.fire(eventBus);
        return false;
    }
    else
    {
        Log.info("canReveal() 3 : Check on server for logged in user");
        dispatcher.execute(new FetchLoggedInUserAction(), new FetchLoggedInUserAsyncCallback());
        return true;
    }
}

class FetchLoggedInUserAsyncCallback extends MessageAsyncCallback<FetchLoggedInUserResult>
{
    /**
     * 
     */
    public FetchLoggedInUserAsyncCallback()
    {
        super("Loading...");
    }

    @Override
    public void doOnFailure(Throwable caught)
    {
        NavigateToLoginEvent.fire(eventBus);
    }

    @SuppressWarnings("unchecked")
    @Override
    public void doOnSuccess(FetchLoggedInUserResult result)
    {
        if (result == null)
        {
            Log.info("doOnSuccess() 1 : LoggedInUser not found on server");
            NavigateToLoginEvent.fire(eventBus);
        }
        else
        {
            Log.info("doOnSuccess() 2 : LoggedInUser found on server");
            if (result.getLoggedInUser() != null)
            {

                currentUser = new CurrentUser();
                currentUser.setMerchantConsoleUser(result.getLoggedInUser());

                SessionFactory.getClientSessionInstance().put(SessionKeys.LOGGED_IN_USER, result.getLoggedInUser());

                PlaceRequest currentPlaceRequest = placeManager.getCurrentPlaceRequest();

                Log.info("doOnSuccess() 3 : " + currentPlaceRequest.getNameToken());

                if (currentPlaceRequest != null)
                {   
                    placeManager.revealPlace(currentPlaceRequest);
                }
            }
            else
            {
                NavigateToLoginEvent.fire(eventBus);
            }
        }
    }
} 
```

}`  `提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:53:53.017

谜底透露，在 onBind() 方法中添加了以下代码，并且浏览器刷新开始按预期在所有环境中工作。这似乎是框架的模糊行为，当时 GateKeeper 尝试从服务器获取数据以某种方式将演示者的可见性设置为 false，同样的想法导致我编写以下代码并且它有效，希望 GWT-P 的人可以看看在这篇文章中思考处理这种情况的正确方法：

```
/**
     * This piece of code takes care of revealing page on browser refresh event.
     * On browser refresh somehow visibility of page is set to false, so, we need to manually fire the reveal content event.
     */
    if(this.getProxy().canReveal() == true && !this.isVisible()){
                revealInParent();
    } 
````

# java - 在排序的循环链表中插入数据

> ID：12490428
> 
> 赞同：1
> 
> 时间：2012-09-19T07:41:52.003
> 
> 标签：java, linked-list, circular-list

我想将给定的数据添加到已经排序的循环链接列表中，以便结果列表也被排序。`Node`已经提供了具有`public int data`和`public Node next`作为类成员的类。

一个函数`addNode(Node head)`将被实现，它将一个已知的数据（9）插入到列表中。`Node head`是循环链表的头指针。

我考虑过以下案例

1.  当列表为空时，创建节点，将其数据设置为 9 并将其 next 引用到自身。将新创建的节点作为头部。

2.  当列表仅包含一项时。修改第一个节点的next指针指向新节点，新节点的next指针指向给定的头节点。使头节点指向值最低的节点。

3.  当插入的数据最小时，即小于头节点所指向的节点的数据，插入到头节点之前。

4.  当要在两个节点之间插入数据时。所以我正在使用while循环，它将找到将插入新数据的节点并相应地修改节点的next指针。

当我提交代码时，它以某种方式失败了一个我无法找到的测试用例。有人可以帮助我找出我的逻辑中可能忽略的条件。

下面是实现的代码：

```
public static Node addElement(Node input1)
{
    //Write code here
Node result = new Node();
Node current = new Node();
current = input1;

Node value = new Node();
value.data = 10;

if(current == null){
    value.next = value;
    result = value;
}
else if(current.next == current){
    value.next = input1;
    current.next = value;
    result = current.data < value.data ? current : value;
}
else if(value.data < current.data){
    while(current.next != input1)
        current = current.next;     

    current.next = value;
    current.next.next = input1;
    result = current.next;
}   
else{
    while(current.next != input1 && current.next.data <= value.data)
        current = current.next;

    Node currentNext = current.next;
    current.next = value;
    current.next.next = currentNext;
    result = input1;
}

return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-10T19:52:02.323

```
void sortedInsert(struct node** head_ref, struct node* new_node)
{
  struct node* current = *head_ref;

  // Case 1 of the above algo
  if (current == NULL)
  {
     new_node->next = new_node;
     *head_ref = new_node;
  }

  // Case 2 of the above algo
  else if (current->data >= new_node->data)
  {
    /* If value is smaller than head's value then
      we need to change next of last node */
    while(current->next != *head_ref)
        current = current->next;
    current->next = new_node;
    new_node->next = *head_ref;
    *head_ref = new_node;
  }

  // Case 3 of the above algo
  else
  {
    /* Locate the node before the point of insertion */
    while (current->next!= *head_ref && current->next->data < new_node->data)
      current = current->next;

    new_node->next = current->next;
    current->next = new_node;
  }
} 
```

# iphone - 在 Mac 中创建序列图的在线工具

> ID：12490431
> 
> 赞同：0
> 
> 时间：2012-09-19T07:42:07.887
> 
> 标签：iphone, objective-c

抱歉，这不是编程问题。我想为我的 iOS 应用程序开发一个序列图。

我用谷歌搜索了很多，但找不到任何有用的工具

任何人都可以帮助我使用任何在线工具或任何其他工具在 Mac 中创建序列图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:16:06.660

我找到了一个有用的工具。请导航至[此处](https://cacoo.com/r/KmWnV)

```
 [1]: https://cacoo.com/r/KmWnV 
```

# android - 如何获取在 Android 中触发事件的视图？

> ID：12490435
> 
> 赞同：1
> 
> 时间：2012-09-19T07:42:39.500
> 
> 标签：android

您知道如何获取触发事件的视图吗？举例：

```
 final AutoCompleteTextView edtxInput = (AutoCompleteTextView)layout.findViewById(R.id.edtx_input);  
    edtxInput.setThreshold(2);
    edtxInput.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View arg1, int position, long arg3) {
            Console.debug(TAG, "view: " + arg1, Console.Liviu);             
            edtxInput.setText(((FormOption)edtxInput.getAdapter().getItem(position)).getDescription());
        }
    }); 
```

这里的问题是我不知道如何从 OnItemClickListener 中的 edtxInput 更新文本而不使其成为最终文本。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:50:52.273

检查这个[http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)

> 参数
> 
> parent 单击发生的 AdapterView。

arg1 是 AutoCompleteTextView (edtxInput) 本身。所以你可以做

```
 AutoCompleteTextView edtxInput = (AutoCompleteTextView)layout.findViewById(R.id.edtx_input);  
    edtxInput.setThreshold(2);
    edtxInput.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View arg1, int position, long arg3) {
            Console.debug(TAG, "view: " + arg1, Console.Liviu); 
AutoCompleteTextView medtxInput = (AutoCompleteTextView)parent;
                medtxInput.setText(((FormOption)medtxInput.getAdapter().getItem(position)).getDescription());
            }
        }); 
```

**更新**

似乎`AutoCompleteTextView`不是 AdapterView 的子类。这在某种程度上是 SDK 的“错误”。为了得到`AutoCompleteTextView`你可以做一个黑客

```
 AutoCompleteTextView medtxInput = (AutoCompleteTextView)view.getParent(); 
```

所以你得到点击的视图然后得到它的父级`AutoCompleteTextView`

但是为什么你一开始就不想`AutoCompleteTextView`进入决赛呢？有什么特别的原因吗？

如果你只想要适配器，你可以写这个，只有这个

```
((ChildClass)parent.getItemAtPosition(position)).getDescription(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:49:19.863

将 edtxInput 声明为全局变量，以便在整个类中可以访问该变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:28:02.343

为什么使变量 final 对您如此不利？任何可以使 edtxInput 全局化的方式。请参阅下面的代码

```
public class myActivity extends Activity implements OnItemClickListener {

    AutoCompleteTextView mEditTextInput;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mEditTextInput = (AutoCompleteTextView)layout.findViewById(R.id.edtx_input);
        mEditTextInput.setOnItemClickListener(this);
    }

    public void onItemClick(AdapterView<?> parent, View arg1, int position, long arg3) {
        Console.debug(TAG, "view: " + arg1, Console.Liviu);             
        mEditTextInput.setText(((FormOption)mEditTextInput.getAdapter().getItem(position)).getDescription());
    }
} 
```

就这样。

# javascript - Jquery在输入键上提交

> ID：12490436
> 
> 赞同：0
> 
> 时间：2012-09-19T07:42:49.647
> 
> 标签：javascript, jquery, html

我有以下代码：

```
<div class="search">
    <input type="text" id="tbWasSearch" value="Search here..." class="project" onclick="this.value=''"/>
    <input type="button" id="tbWasSeachButton" class="tbWasSeachButton" onclick="searchWas();" />
</div>

    function searchWas() {
        var txt = $("#tbWasSearch").val();
        if (txt != "") {
            var url = "http://eiff/server.pt?=" + txt;
            window.open(url);
            $("#tbWasSearch").val('');
        }
    } 
```

我希望一旦我将文本放入 tbWasSearch 并按 Enter 键，使用 inoke searchWas() 输入的文本；应该与我输入文本并单击搜索按钮时的机制相同

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:52:20.930

使用 jQuery 你可以写这样的东西

```
$("#tbWasSearch").keyup(function(event){
    if(event.keyCode == 13){
        $("#tbWasSeachButton").click();
    }
}); 
```

其中 13 是返回键的 keyCode

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:47:30.280

使用[keyuy](http://api.jquery.com/keyup/)事件：

```
var reload = function(e) { 
   if (e.keyCode == '13')
      searchWas();
};

$('#tbWasSearch').keyup(reload); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:24:58.077

此外，如果您使用表单标签，您可以使用：

```
$('form:first').submit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T11:36:54.630

```
You use form something like this..

<script>
function searchWas() {
    var txt = $("#tbWasSearch").val();
    if (txt != "") {
        var url = "http://eiff/server.pt?=" + txt;
        window.open(url);
        $("#tbWasSearch").val('');
    }
}
</script>

<form action="javascript:searchWas();">
<div class="search">
<input type="text" id="tbWasSearch" value="Search here..." class="project" onclick="this.value=''"/>
<input type="button" id="tbWasSeachButton" class="tbWasSeachButton" />
</div>
</form> 
```

# javascript - 如何通过for循环的索引绑定到数组元素？

> ID：12490438
> 
> 赞同：2
> 
> 时间：2012-09-19T07:42:55.830
> 
> 标签：javascript

假设您有一个字符串数组，例如：

```
var fruit = ["apple","peach","pear","plum"]; 
```

以及一个要填充对象的空数组，每个对象都有一个绑定到水果数组特定索引的文本属性：

```
var objlist = [];

for (var i=0;i<fruit.length;i++) {
    objlist.push({text: fruit[i]});
}

//objlist[0].text = "apple", objlist[1].text = "peach", etc. 
```

有没有办法“绑定”第一个数组的元素，所以下面的语句：

```
fruit.shift() 
```

会导致 objlist 中对象的文本属性更新为水果数组中的相应索引吗？

```
//objlist[0].text = "peach", objlist[1].text = "pear", etc. 
```

我已经接受了 .text 可能必须是一个函数 .text() 的事实，但这对我的目的来说是可以的。

由于明显的原因，以下内容不起作用：

```
for (var i=0;i<fruit.length;i++) {
    objlist.push({text: function() { return fruit[i]; }});  //i is not bound
} 
```

然而，这完美地工作：

```
[0,1,2,3].forEach(function(i) {
    objlist.push({text: function() { return fruit[i]; }});  //i is bound
}); 
```

使用第二种方法，我可以修改 fruit[] 并且 objlist 会相应地更新，但这并不优雅。

我的问题：有没有更好的方法来做到这一点？也许类似于使用指针的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:56:23.990

无需创建额外的数组，因为您可以通过 for-in 构造进行绑定。像这样

```
for (var k in fruit) {
    objlist.push({text: function() { return fruit[k]; }});
} 
```

所以，用你的测试用例

```
var fruit = ["apple","peach","pear","plum"];
var objlist = [];

for (var k in fruit) {
    objlist.push({text: function() { return fruit[k]; }});
}

console.log('---- init state -----')
for(k in objlist) {
    console.log(objlist[k].text());
}

fruit.shift();
console.log('---- shifted state -----')
for(k in objlist) {
    console.log(objlist[k].text());
} 
```

代码得到

```
---- init state -----
apple
peach
pear
plum
---- shifted state -----
peach
pear
plum
undefined 
```

# javascript - 使用 Javascript 将新列表元素添加到无序列表

> ID：12490439
> 
> 赞同：5
> 
> 时间：2012-09-19T07:42:58.370
> 
> 标签：javascript, html

我正在尝试使用以下代码将新元素添加到无序列表中：

的HTML：

```
<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Javascript</title>
<link rel="stylesheet" href="jsPlay.css" type="text/css" />
<script src="jsPlay.js"></script>
</head>

<body>

<ul id="numberList"></ul>

</body>
</html> 
```

Javascript：

```
window.onload = function()
{
    //alert("Window is loaded");

    var numberList = document.getElementById("numberList");

    //for every number between 100 and 200      
    for(var i = 0; i > 100 && i < 200; i++)
    {
        if ( i % 17 == 0 && i % 2 == 0) //if number evenly divisible by 17 and 2
        {
                    //create new li element
            var newNumberListItem = document.createElement("li");

                    //create new text node
            var numberListValue = document.createTextNode(i);

                    //add text node to li element
            newNumberListItem.appendChild(numberListValue);

                    //add new list element built in previous steps to unordered list
                    //called numberList
            numberList.appendChild(newNumberListItem);

        }
    }
} 
```

当我在浏览器中运行它时，我只得到空白。我检查了 FireBug（在 Firefox 15.0.1 上）以查看是否有任何错误，但没有什么明显的。我认为我没有正确地将某些东西绑定在一起 - 这似乎是一个基本问题，但我似乎无法弄清楚为什么元素没有被添加到无序列表中。

我确信 Javascript 代码中的注释就足够了，但如果不是，请随时问我问题。

非常感谢您的帮助 ：）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T07:46:39.373

你[的 for 循环](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)立即失败，因为`i`它不大于 100。如果你尝试这样的事情，它应该可以工作：

```
for (var i = 100; i < 200; i++) 
```

示例：http: [//jsfiddle.net/grc4/gc4X5/1/](http://jsfiddle.net/grc4/gc4X5/1/)

# c# - 获取 iOS 版本的通用正则表达式，所有 iOS 设备

> ID：12490441
> 
> 赞同：2
> 
> 时间：2012-09-19T07:43:02.223
> 
> 标签：c#, iphone, ios, regex, mobile-safari

我正在尝试找到一个从所有 iOS 设备获取 iOS 版本的正则表达式。我不能为每种设备类型（iphone、ipad、ipod）单独做一个，我需要一个通用的。

在进行比赛之前，我会检查它是否是有效的 iOS 设备。我想出的解决方案是：

```
Match match = Regex.Match(HttpContext.Current.Request.UserAgent, @"(?<version>\d+(_\d+)+) like Mac OS X");
string versionNr = match.Groups["version"].ToString().Replace("_", "."); 
```

我检查了很多设备代理字符串，到目前为止它们都匹配。但我有点担心它不会匹配所有，只是检查是否有人有更好的正则表达式。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:38:46.163

正如其他答案中提到的，正则表达式对于测试用户代理字符串不是 100% 可靠的，但要回答这个问题如何：

```
(i[PSa-z\s]+);.*?CPU\s([OSPa-z\s]+(?:([\d_]+)|;)) 
```

第一个匹配组是 iPhone/pad/pod 类型，第二组是 IOS 版本（IOS 1 除外，没有版本号）

使用的语料库可能缺少一些用户代理，但你可以在这里摆弄它：

[http://refiddle.com/5x9](http://refiddle.com/5x9)

# cakephp - CakePHP hasMany_Through 从 tableA 和它们的 tableB 中检索数据

> ID：12490444
> 
> 赞同：2
> 
> 时间：2012-09-19T07:43:16.687
> 
> 标签：cakephp, has-many-through

请帮我。我是 CakePHP 的新手。我有一个数据库关联。时事通讯 hasAndBelongsToMany 类别。我尝试了 hasMany_Through 而不是 hasAndBelongsToMany (HABTM)

```
//Newsletter
public $hasMany = array(
    'CategoryNewsletterShip'
    )
);

//Category
public $hasMany = array(
   'CategoryNewsletterShip'
       )
 );

//CategoryNewsletterShip
 public $belongsTo = array(
    'Newsletter', 'Category'
    )
 ); 
```

在 NewsletterController 我试过了： find('all') ;

```
// NewslettersConroller
$newsletters = $this->Newsletter->find('threaded');
this->set('newsletters', $newsletters);
//---- 
```

我只能检索时事通讯及其许多 CategoryNewsletterShips。我如何检索他们的类别？

我需要的是时事通讯和他们的类别。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T16:24:13.877

可能为时已晚

你需要建立一个连接查询：

```
$this->Newsletter->find('all', array(
 'joins' => array(
                    array(
                        'table'         => 'category_newsletter_ships',
                        'alias'         => 'CategoryNewsletterShip',
                        'type'          => 'inner',
                        'conditions'    => array(
                            'Newsletter.id = CategoryNewsletterShip.newsletter_id'
                        ),
                    ),
                    array(
                        'table'         => 'categories',
                        'alias'         => 'Category',
                        'type'          => 'inner',
                        'conditions'    => array(
                            'Category.id = CategoryNewsletterShip.category_id'
                        ),
                    )
))); 
```

# javascript - JS -（不带 jQuery）：正则表达式元数据

> ID：12490446
> 
> 赞同：0
> 
> 时间：2012-09-19T07:43:30.540
> 
> 标签：javascript, regex

我正在尝试查找和替换类名中的字符串。我正在使用一个函数，它返回一个类的“元数据”：

例如：

```
class="atestclass {action : '/myurl/param1/param2'}" 
```

所以函数 metadata.action 会返回“/myurl/param1/param2”。

现在我需要用正则表达式以一种通用的方式更改这个值。

所以这是我的正则表达式，当然它不起作用:(

```
var regExp = new RegExp(opts.attribute + '\'.\'','igm'); 
```

“opts.attribute”在这种情况下是“动作”。现在我需要在“opts.attribute”之后找到引号的第一次出现，并将其替换为“opts.value”。

我不知道该怎么做，RegExp 是我个人的噩梦：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:10:47.910

```
var oldclass="atestclass {action : '/myurl/param1/param2'}";
var regExp = new RegExp("(\\{\\s*"+opts.attribute+"\\s*:\\s*').*?'", 'igm');
var newclass = oldclass.replace(regExp, "$1"+opts.value.replace('$', '$$')+"'"); 
```

# javascript - javascript 的 substr 奇怪的行为？

> ID：12490449
> 
> 赞同：2
> 
> 时间：2012-09-19T07:43:51.697
> 
> 标签：javascript

我需要从 json 中提取日期：

```
/Date(1224043200000)/ 
```

我[看到](https://stackoverflow.com/questions/206384/how-to-format-a-json-date)我可以这样做：

```
var date = new Date(parseInt('/Date(1224043200000)/'.substr(6))); 
                                    ^
                                    |
------------------------------0123456 
```

但是如何`substr`知道忽略最后一个字符？[)/]

我在[mdn](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)进行了搜索，但找不到记录在案的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T07:47:11.117

`.substr()`返回第 6 个字符后的所有内容。

但是`parseInt()`会解析所有数字字符，直到它到达一个非数字字符，所以忽略发生在`parseInt`

* * *

[**引用文档**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)

> 如果`parseInt`在指定的基数中遇到不是数字的字符，它会忽略它和所有后续字符并返回解析到该点的整数值。`parseInt`将数字截断为整数值。允许前导和尾随空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:49:39.947

试试这个：

```
var date = new Date(parseInt('/Date(1224043200000)/'. substring(6, indexOf(")")-1 )); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T07:59:53.443

我会以另一种方式解决这个问题。Gaby 解释了 parseInt，但要注意：`parseInt`将带前导零的整数解释为八进制。这可能不适用于您的情况，但 IMO，这是一种更安全的方法：

```
var date = new Date(+('/Date(1224043200000)/'.match(/\d+/)[0])); 
```

首先，`'/Date(1224043200000)/'.match(/\d+/)`从数组中提取字符串中的数字：`["1224043200000"]`.
然后我们需要这些匹配的第一个元素，因此`[0]`.
为了安全起见，我将所有这些都放在括号中，前面有一个`+`符号，以将匹配的子字符串强制为一个数字：`+('/Date(1224043200000)/'.match(/\d+/)[0]) === 1224043200000`
这被传递给`Date`构造函数，它创建一个日期对象`"Wed Oct 15 2008 06:00:00 GMT+0200 (Romance Daylight Time)"`作为字符串值

要捕获任何可能的错误，您可能希望将这条单线拆分一下，但这取决于您 :)

# objective-c - 重新启动应用程序时数据丢失（核心数据）

> ID：12490455
> 
> 赞同：6
> 
> 时间：2012-09-19T07:44:17.000
> 
> 标签：objective-c, uitableview, core-data

伙计希望你会没事的。

我是 iPhone 开发的新手。我正在使用核心数据创建一个简单的应用程序。在应用程序中，当我保存数据时，它工作正常，然后我检索数据，它也工作正常。但是当我重新启动我的应用程序时，所有数据都丢失了。

在应用程序启动时，在 ViewDidLoad 函数中，我正在使用我在工作应用程序期间检索的相同函数检索数据。

**保存数据方法：**

```
 NSManagedObjectContext *context=[app managedObjectContext];
    Contacts *data=[NSEntityDescription insertNewObjectForEntityForName:@"Contacts" inManagedObjectContext:context];
    if(nameField.text.length <=0 || phoneField.text.length <=0 )
    {

        UIAlertView *alert=[[UIAlertView  alloc]initWithTitle:@"Warning!" message:@"Please enter some data." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
        [alert show];
    }
    else
    {
        data.name = nameField.text;
        data.phone = phoneField.text;
        NSLog(data.name);
        NSLog(data.phone);
        [self.navigationController popToRootViewControllerAnimated:YES];

    } 
```

**检索数据方法：**

```
 NSEntityDescription *entity=[NSEntityDescription entityForName:@"Database" inManagedObjectContext:context];

    NSFetchRequest *fetchRequest=[[NSFetchRequest alloc]init];

    [fetchRequest setFetchBatchSize:20];

    [fetchRequest setEntity:entity];

    NSSortDescriptor *sorting = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];

    NSArray *sorted_Array=[NSArray arrayWithObject:sorting];

    [fetchRequest setSortDescriptors:sorted_Array];

    NSError *error;

    NSMutableArray *tArray=[[context executeFetchRequest:fetchRequest error:&error]mutableCopy];

    [self setArray:tArray];
    [self.tableView reloadData]; 
```

**应用委托代码**

```
#import "ZAppDelegate.h"
#import "Contacts.h"

@implementation ZAppDelegate

@synthesize window = _window;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    TableViewController *TVC=[[TableViewController alloc]init];

    TVC.MOcontext=self.managedObjectContext;

    UINavigationController *nvgc=[[UINavigationController alloc]initWithRootViewController:TVC];
    self.window.rootViewController=nvgc;

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    /*
     Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
     Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
     */
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    /*
     Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
     If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
     */
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    /*
     Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
     */
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    /*
     Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
     */
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Saves changes in the application's managed object context before the application terminates.
    [self saveContext];
}

- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil)
    {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error])
        {
            /*
             Replace this implementation with code to handle the error appropriately.

             abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
             */
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
}

#pragma mark - Core Data stack

/**
 Returns the managed object context for the application.
 If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.
 */
- (NSManagedObjectContext *)managedObjectContext
{
    if (__managedObjectContext != nil)
    {
        return __managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil)
    {
        __managedObjectContext = [[NSManagedObjectContext alloc] init];
        [__managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return __managedObjectContext;
}

/**
 Returns the managed object model for the application.
 If the model doesn't already exist, it is created from the application's model.
 */
- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil)
    {
        return __managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Diary" withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return __managedObjectModel;
}

/**
 Returns the persistent store coordinator for the application.
 If the coordinator doesn't already exist, it is created and the application's store added to it.
 */
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil)
    {
        return __persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Diary.sqlite"];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error])
    {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 

         Typical reasons for an error here include:
         * The persistent store is not accessible;
         * The schema for the persistent store is incompatible with current managed object model.
         Check the error message to determine what the actual problem was.

         If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.

         If you encounter schema incompatibility errors during development, you can reduce their frequency by:
         * Simply deleting the existing store:
         [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

         * Performing automatic lightweight migration by passing the following dictionary as the options parameter: 
         [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

         Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.

         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    

    return __persistentStoreCoordinator;
}

#pragma mark - Application's Documents directory

/**
 Returns the URL to the application's Documents directory.
 */
- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
}

@end 
```

这里有什么问题吗？我希望尽早得到好的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T12:29:44.813

在应用程序生命周期的某个时刻，您需要调用`save`，`NSManagedObjectContext`否则您的更改将不会持久保存到`NSPersistentStore`. 例如在应用程序委托的`applicationDidEnterBackground:`方法中。

```
NSError *saveError = nil;
if( ![[self managedObjectContext] save:&saveError] ) {
   //  deal with error...
} 
```

我假设您的应用程序委托设置和维护核心数据堆栈，就像 Apple 模板一样......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T14:18:49.693

在您的 AppDelegate 中：

```
- (void)applicationWillTerminate:(UIApplication *)application
{
  // Saves changes in the application's managed object context before the application terminates.
  [self saveContext];
} 
```

`-saveContext`可能在 Xcode 模板的`-save`早期版本中。

* * *

更重要的是，你可以在其他类中调用`-save`or方法：`-saveContent`

```
[(AppDelegate *)[UIApplication sharedApplication] saveContext]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:08:20.837

我看不到您在代码中的保存位置。您需要告诉 managedcontext 进行保存。你在哪里做这取决于你的应用程序和设计。如果您认为它已经在您的应用程序中的某个地方，请添加一些 NSLog 以尝试调试或使用调试器工具实际单步执行您的代码。

这是一个简单的修复。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-02T14:29:48.347

这个 Context 需要保存
CoreDataManager * context = [CoreDataManager sharedInstance];
...
..
...
... ...
...
...
[上下文 saveContext];

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-17T05:59:00.193

NSManagedObjectContext 提供了一个便签本：你可以对你的对象做任何你喜欢的事情，但最后需要保存它。在保存之前，您对 NSManagedObjectContext 所做的任何更改都是临时的。尝试将其添加到方法的末尾：

```
if (![context save:&error]) {
 NSLog(@"Couldn't save: %@", error);
} 
```

# java - Java 7 浏览器插件选项

> ID：12490457
> 
> 赞同：1
> 
> 时间：2012-09-19T07:44:19.687
> 
> 标签：java, plugins

在 Java 5.0 时代，我能够在 Java 控制面板中调整浏览器插件的 JVM 选项。现在使用 Java 7.0，Java 控制面板中不再有浏览器插件选项卡。

是否仍然可以为 Java 7.0 的浏览器插件添加 JVM 选项？我说的是`-Xmx256m`或之类的选项`-XX:+HeapDumpOnOutOfMemoryError`。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:14:21.310

在 Windows 上，转到 Java 控制面板->Java 并单击“查看”。然后您将看到 Java 运行时环境设置对话框。对于每个 JVM，您可以在 Runtime Parameters 列中添加参数。

顺便说一句，如果您想为所有用户执行此操作，您可以在 HTML 中将参数传递给您的小程序，例如：

```
<applet ...etc
    <param name="java_arguments" value="-Xmx256m">
</applet> 
```

# c# - VB.Net/C# - ASCII 到 EBCDIC

> ID：12490458
> 
> 赞同：0
> 
> 时间：2012-09-19T07:44:37.407
> 
> 标签：c#, vb.net, ascii, ebcdic

我有一个将 ASCII 编码文件转换为 EBCDIC 编码文件的应用程序。我的问题是，每当我尝试使用其他转换工具（EBCDIC 到 ASCII）时，我都会遇到问题。

* * *

这是我获得代码的地方[http://support.microsoft.com/kb/216399](http://support.microsoft.com/kb/216399)

* * *

CS？NTPRC？37-MAY MTLAW 4RY？- 这应该是结果的样子。

CcCs@@CnCtCp$$CrCc@@C?C?-CmCaCy CmCtClCaCw C?$$CrCy@@CmCtClCaCw$$ - 我文件的这个内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T10:46:12.563

不要使用该代码，.NET 非常支持处理不同的编码：

```
Imports System.IO
Imports System.Text

Module Conversions
    Public Sub ConvertAsciiToEbcdic(ByVal inpath As String, ByVal outpath As String)
        Using sr As New StreamReader(inpath, Encoding.ASCII)
            Using sw As New StreamWriter(outpath, False, Encoding.GetEncoding(37))
                Do
                    Dim line = sr.ReadLine()
                    If line Is Nothing Then Exit Do
                    sw.WriteLine(line)
                Loop
            End Using
        End Using
    End Sub
End Module 
```

如果您想以相反的方式进行转换，只需交换编码即可。

# c# - winforms MVP 应用程序中的自定义事件聚合器

> ID：12490462
> 
> 赞同：0
> 
> 时间：2012-09-19T07:44:54.707
> 
> 标签：c#, winforms, mvp, eventaggregator

我决定为我正在编写的 winforms MVP 应用程序构建自己的事件聚合器。目的是允许视图（用户控件）订阅来自模型的事件，否则这些模型具有它们的视图。

问题是; 由于应该有一个公共事件聚合器，并且仅在编写应该交互的用户控件的应用程序时才需要聚合器，那么公开事件聚合器的最佳方法是什么？

到目前为止我的建议：

1.  我认为注入它会很麻烦，因为所有用户控件都必须有一个 IEventAggregator 并且聚合器对于用户控件本身来说不是必需的，只是由具有附加功能的用户控件组成的主应用程序。
2.  使 EventAggregator 静态或单例。但是，这会带来类似的问题，即各个用户控件必须通过静态聚合器发布事件。

你有什么想法可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T08:49:01.797

我为这样的场景实现了一个简单的 EventBroker。但是，我不认为注射会是一团糟。事实上，将其注入容器然后解析发布/订阅将是最简洁的方式。单元测试也会更容易。下面给出了我的事件代理（我使用的是 MEF，但这几乎不会产生任何影响）：-

```
 [Export]
public class MyEventBroker : IMyEventBroker
{
    [ImportingConstructor]
    public MyEventBroker()
    {

    }

    private readonly ConcurrentDictionary<Type, List<Action<CompositeEventArguments>>> _compositeEventHandlers = new ConcurrentDictionary<Type, List<Action<CompositeEventArguments>>>();

    public void Publish<T>(CompositeEventArguments args)
    {
        if (_compositeEventHandlers.ContainsKey(typeof (T)))
        {
            _compositeEventHandlers[typeof(T)].ForEach(subscriber=> { if (subscriber != null) subscriber.Invoke(args); }); //TODO : check for null. QUES - Will we need weak references?????
        }
    }

    public void Subscribe<T>(Action<CompositeEventArguments> handler)
    {
        if (!_compositeEventHandlers.ContainsKey(typeof (T)))
            _compositeEventHandlers[typeof(T)] = new List<Action<CompositeEventArguments>>();

        _compositeEventHandlers[typeof (T)].Add(handler);

    }

    public void UnSubscribe<T>(Action<CompositeEventArguments> handler)
    {
        if (_compositeEventHandlers.ContainsKey(typeof (T)))
            _compositeEventHandlers[typeof (T)].Remove(handler);

    }
}

public class CompositeEvent<T> where T : CompositeEventArguments
{

}

public class CompositeEventArguments
{

} 
```

现在要拥有您的自定义事件，请定义您的事件参数：-

```
#region Custom Events
public class MyCustomEventArgs : CompositeEventArguments{}
#endregion 
```

然后发布：-

```
 var broker = MefContainer.Instance.Resolve<MyEventBroker>();
        broker.Publish<MyCustomEventArgs >(new MyCustomEventArgs()); 
```

并订阅：-

```
 var broker = MefContainer.Instance.Resolve<MyEventBroker>();
            broker.Subscribe<MyCustomEventArgs >(t=>MyHandler(t)); 
```

MefContainer 是我的自定义单例类，用于公开组合容器。你可以使用统一，温莎或任何你喜欢的！

在这里写博客：http: [//compositewinform.blogspot.co.uk/2014/04/have-you-ever-found-yourself-in.html](http://compositewinform.blogspot.co.uk/2014/04/have-you-ever-found-yourself-in.html)

# android - Toast，Android中同时通知

> ID：12490468
> 
> 赞同：0
> 
> 时间：2012-09-19T07:45:10.353
> 
> 标签：android, python, sl4a

我想使用 sl4a 在 Android 中执行 Python 脚本（显示 Toast 和通知）。我可以同时显示 Toast 消息和通知吗？我正在使用模拟器进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:04:49.477

是的，可以同时使用祝酒词和通知。

虽然在我看来这可能不是最好的用户体验。

Toast 是一种让用户在查看屏幕时知道某事的方法，并且优先级较低。它会在一段时间内消失。

通知是一种让用户知道比 toast 优先级更高的事情的方法。这可能是在用户的主要关注点不是您的应用程序的时候，或者设备也在休眠。用户可以转到通知抽屉并查看您的应用程序的新功能。

在大多数用例中，其中一个可以完成这项工作。我不知道你为什么需要两者..同时。不是一个通知就删了吗？

# c++ - ecx 寄存器是否用于传递静态函数调用中的参数之一？

> ID：12490470
> 
> 赞同：4
> 
> 时间：2012-09-19T07:45:20.600
> 
> 标签：c++, assembly, x86

我知道在 C++ 中调用对象的非静态成员函数时，this 指针在 ecx 寄存器中传递。静态函数呢，因为没有 this 指针，在这种情况下编译器是否使用 ecx 寄存器来传递常规参数之一？

编辑 - 我在这里谈论 cdecl 调用约定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T07:53:43.950

调用函数时使用什么`ecx`（或任何其他寄存器）取决于[调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions)。

例如，考虑 C++ 代码

```
struct S {
    static void f( int, int ) { }
    void g( int ) { }
};

void g() {
    S::f( 3, 4 );
    S s;
    s.g( 3 );
} 
```

通过 Microsoft Visual Studio 2010 (64bit) 编译它

```
cl /c main.cpp 
```

然后通过

```
dumpbin /disasm main.obj 
```

给这个`g`函数：

```
?g@@YAXXZ (void __cdecl g(void)):
  0000000000000000: 48 83 EC 38        sub         rsp,38h
  0000000000000004: BA 04 00 00 00     mov         edx,4
  0000000000000009: B9 03 00 00 00     mov         ecx,3
  000000000000000E: E8 00 00 00 00     call        ?f@S@@SAXHH@Z
  0000000000000013: BA 03 00 00 00     mov         edx,3
  0000000000000018: 48 8D 4C 24 20     lea         rcx,[rsp+20h]
  000000000000001D: E8 00 00 00 00     call        ?g@S@@QEAAXH@Z
  0000000000000022: 48 83 C4 38        add         rsp,38h
  0000000000000026: C3                 ret 
```

`S::f`请注意对静态方法的第一次调用如何传入第一个参数 (3)`ecx`和传入的第二个参数 (4) `edx`。所以你的问题的答案是：

是的。对于这个特定的编译器，`ecx`用于在静态函数调用中传递参数之一。

# solr - 如何在 Suggester 中忽略大小写敏感？索尔 3.6

> ID：12490480
> 
> 赞同：3
> 
> 时间：2012-09-19T07:46:13.020
> 
> 标签：solr

目前正在开发 Solr 3.6 中的 Suggester。我已经通过提供外部字典源配置了 Suggester。

solrconfig.xml：

```
 <searchComponent name="spellcheck" class="solr.SpellCheckComponent">

    <str name="queryAnalyzerFieldType">textSpell</str>

  <lst name="spellchecker">
      <str name="name">suggest</str>
      <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
      <str name="lookupImpl">org.apache.solr.spelling.suggest.tst.TSTLookup</str>
      <float name="threshold">0.005</float>
      <str name="buildOnCommit">true</str>
    <bool name="exactMatchFirst">true</bool>
     <str name="sourceLocation">D:\source.txt</str>

    </lst>

  </searchComponent> 
```

来源.txt：

```
nokia   2
nokia 5233  3
nokia 5130  2
Symbian 1
samsung 6712    2
htc 2
HTC Wild    6
htc one 7
Nokia 1280  5 
```

当我尝试使用“n”进行搜索时，它会在结果下方提示我

```
nokia 5233
nokia 5130
nokia 
```

但结果不包含在“诺基亚 1280”中。

可能是什么原因？如何在 Suggester 中忽略大小写敏感？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-28T00:51:43.757

我认为这篇文章会对你有所帮助，[https://cwiki.apache.org/confluence/display/solr/Suggester](https://cwiki.apache.org/confluence/display/solr/Suggester)

尝试在您的建议器中使用“字段”参数

```
 <searchComponent name="spellcheck" class="solr.SpellCheckComponent">
       <str name="queryAnalyzerFieldType">textSpell</str>
       <lst name="spellchecker">
          <str name="name">suggest</str>
          <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
          <str name="lookupImpl">org.apache.solr.spelling.suggest.tst.TSTLookup</str>
          <float name="threshold">0.005</float>
          <str name="buildOnCommit">true</str>
          <bool name="exactMatchFirst">true</bool>
          <str name="field">phoneName</str>
          <str name="sourceLocation">D:\source.txt</str>
       </lst>
    </searchComponent> 
```

字段类型定义

```
 <fieldType class="solr.TextField" name="textSuggest" positionIncrementGap="100">
       <analyzer>
          <tokenizer class="solr.StandardTokenizerFactory"/>
          <filter class="solr.StandardFilterFactory"/>
          <filter class="solr.LowerCaseFilterFactory"/>
       </analyzer>
    </fieldType> 
```

字段定义

```
 <field name="phoneName" type="string" indexed="true" stored="false" required="false" multiValued="false"/> 
```

# sql - SQL IN 函数问题

> ID：12490482
> 
> 赞同：3
> 
> 时间：2012-09-19T07:46:37.480
> 
> 标签：sql, oracle11g, oracle-apex

我已经在我的 oracle apex 应用程序中创建了一个页面项，`P16_X`其中包含值。`998,785,523`然后我`Classic Report`在我的顶点页面中创建了一个并将下面的代码添加为`Region Source`.

```
 select 
   sale_date,
   invoice_number , 
   sale_amount from sale
    where sale_id in (:P16_X); 
```

当我加载我的页面时，我得到了以下错误。

```
 report error:
  ORA-01722: invalid number 
```

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:56:21.837

试试这个

```
 select 
   sale_date,
   invoice_number , 
   sale_amount from sale
    where ','||:P16_X||',' like '%,'||sale_id||',%' 
```

PS：当您将此参数发送到查询中时，oracle 会将其作为字符串“998,785,523”，因此您的原始查询因此而失败。在这个查询中，我们得到：

```
','||'998,785,523'||',' like '%,'||sale_id||',%' 
```

它相当于：

```
',998,785,523,' like '%,'||sale_id||',%' 
```

例如对于 sale_id=523 它被转换为：

```
',998,785,523,' like '%,523,%' 
```

这个 sale_id 是真的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:51:47.977

不知道 APEX，但问题是 Oracle 将 p16 视为数字，但 '998,785,523' 将他视为字符串，因此我认为您应该在任何临时表中添加这 3 个值并在 IN 子句中使用 select from 或解析 '998,785,523 ' 并在IN子句中使用它或使用动态sql创建您的选择语句。我投票赞成我的第一个建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:26:37.773

将用户输入直接连接到您的 SQL 中会导致 SQL 注入问题。请查看 apex_util.string_to_table，它允许您将 CSV 转换为可用于 IN 构造的数组。

# iphone - IOS：暂停来自 ipod 的背景音乐

> ID：12490489
> 
> 赞同：0
> 
> 时间：2012-09-19T07:46:53.080
> 
> 标签：iphone, objective-c, ios, xcode, avaudioplayer

我使用 openAL 和 AVAudio 在我的游戏中播放音效。允许用户在播放时收听其他来源的音乐 (AVAudioSessionCategoryAmbient)

在游戏过程中，音效与背景音乐流畅地融合在一起。

但是，在游戏完成后，我想播放自己的小配乐，如果用户正在收听其他音乐，这听起来不太好。

如果我改变

```
AVAudioSessionCategoryAmbient 
```

至

```
AVAudioSessionCategoryPlayback 
```

我可以打开ipod音乐。

但是，在我自己的音乐曲目完成后切换回 AVAudioSessionCategoryAmbient 时，无论如何我可以恢复背景音乐吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:22:25.683

也许是这样的？

```
- (void) audioPlayerDidFinishPlaying: (AVAudioPlayer *) 播放器
            成功：（BOOL）标志{
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryAmbient
            错误：无]；
}

```

在 AVAudioPlayer 委托中。

# ruby - Ruby 数组操作优化

> ID：12490491
> 
> 赞同：-1
> 
> 时间：2012-09-19T07:46:56.260
> 
> 标签：ruby

我正在执行以下操作：

```
def createDTable
  dTable = Array.new
  cTable.each_index do |i|
    dTable[cTable[i]] = i
  end
end 
```

有什么办法可以优化这个（非常简单的）代码，尤其是对于大`cTable`而稀疏的代码`dTable`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:24:07.087

我很好奇，所以我对它进行了基准测试。(http://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html)

我为 C 表生成了随机数。基本上，如果值在数组的长度范围内，则使用 Array 会更好地提高速度，而当它们更大时使用 Hash 会更好。

我尝试了 5 种不同的组合：

```
randoms to 10,000, array size 100,000 => Array
randoms to 100,000, Array size 10,000 => Hash
randoms to 100,000, array size 100,000 => Array
randoms to 1,000,000, Array size 100,000 => Array
randoms to 10,000,000, Array size 100,000 => Hash 
```

所以无论如何，这是我的备用代码，但你可能会很好。

```
def create_d_hash(c_table)
  d_hash = {}
  c_table.each_with_index do |value, index|
    d_hash[value] = index
  end
  d_hash
end 
```

# javascript - 为什么所有的字都没有出现

> ID：12490492
> 
> 赞同：3
> 
> 时间：2012-09-19T07:47:05.063
> 
> 标签：javascript, jquery

在我的文字游戏中，有一个`<ul>`包含单词的单词列表，与单词相关的图片和与单词相关的声音。

当游戏运行时，脚本会根据我声明为“maxWords”的单词量动态创建一个网格。

我遇到的问题是，当我运行程序时，有时缺少一个单词，但图像和声音仍然存在。

自从我让我的网格接受更大的词后，这种情况才开始发生，而且我在试图找出为什么会发生这种情况时遇到了麻烦。

这是存储在 HTML 中的 wordList...

```
 <ul style="display:none;" id="wordlist">

    <li data-word="mum" data-audio="http://www.wav-sounds.com/cartoon/porkypig2.wav" data-pic="http://www.clker.com/cliparts/5/e/7/f/1195445022768793934Gerald_G_Lady_Face_Cartoon_1.svg.med.png"></li>

    <li data-word="lion" data-audio="http://www.wav-sounds.com/cartoon/bugsbunny2.wav" data-pic="http://www.clker.com/cliparts/c/9/9/5/119543969236915703Gerald_G_Cartoon_Cat_Face.svg.med.png"></li>

    <li data-word="bear" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://www.clker.com/cliparts/a/2/c/0/1195440948271207911zeimusu_spotty_dog.svg.med.png"></li>

    <li data-word="beetle" data-audio="http://www.wav-sounds.com/cartoon/daffyduck2.wav" data-pic="http://www.clker.com/cliparts/4/b/4/2/1216180545881311858laurent_scarabe.svg.med.png"></li>

    <li data-word="rat" data-audio="http://www.wav-sounds.com/cartoon/bugsbunny1.wav" data-pic="http://www.clker.com/cliparts/C/j/X/e/k/D/mouse-md.png"></li>

    <li data-word="father" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://www.clker.com/cliparts/3/a/6/6/119544474191128182Gerald_G_Man_Face_6_-_World_Label.svg.med.png"></li>

  </ul> 
```

该脚本相当大，所以这里有一个小提琴来看看[http://jsfiddle.net/smilburn/HZX6k/4/](http://jsfiddle.net/smilburn/HZX6k/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:08:39.317

也许它不能解决问题，但我在评论中看到了误导性的讨论，并且可能有一些易于修复的代码错误：

选择时 jQuery 方法需要 $() 语法，并且当您将 jQuery 选择器放入变量时，如下所示：

```
var yourvar = $("#selector") 
```

您不再需要 $() ，只需使用 yourvar.whatever() 进行 jquery 方法调用。pic 变量可能没有方法显示，因为它不是选择器。

**我建议使用 :nth-child() 选择器而不是当前的方括号（数组）选择器**

现在，这解决了图片，并没有解决更大的词谜：D

对于更大的单词，您需要检查硬编码条件并记录任何可能导致代码中断的地方，我假设它是循环中断，以查看问题出在哪里。

# postgresql - 用于创建俄罗斯 UTF-8 数据库的 Postgresql 字符类型？

> ID：12490497
> 
> 赞同：4
> 
> 时间：2012-09-19T07:47:25.113
> 
> 标签：postgresql, pgadmin

“创建数据库”窗口中的字符类型有以下选择：`en_US.UTF8`, `C`, `POSIX`. 但数据库将包含俄语数据。如何选择`ru_RU.UTF8`？

如果不需要，我应该选择以上哪个？DB 编码为 UTF8。

编辑：PostgreSQL 版本：8.4 操作系统：VirtualBox 中的 CentOS 6 语言环境：我不知道，我使用两种语言是的，我使用 pgAdmin3 “如果你选择 template0 作为模板数据库，提供的选项会改变吗？” - 不

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T13:27:45.583

对于俄罗斯`UTF-8`数据库，您确实想要`ru_RU.UTF-8`作为您的`LC_CTYPE`and `LC_COLLATE`. 要使用 SQL 创建数据库，您将编写：

```
CREATE DATABASE my_database_name 
ENCODING 'UTF-8' 
LC_COLLATE 'ru_RU.UTF-8'
LC_CTYPE 'ru_RU.UTF-8'
TEMPLATE template0; 
```

您的管理工具应该允许您选择这些选项。如果不知道您的 Pg 版本、您使用的管理工具、您的操作系统/版本等，很难说更多。

# jquery - Freetile Jquery插件-加载页面时未执行功能

> ID：12490498
> 
> 赞同：2
> 
> 时间：2012-09-19T07:47:28.983
> 
> 标签：jquery, jquery-plugins

我正在使用[Freetile Jquery 插件](https://github.com/yconst/Freetile)来制作更好看的网格。在我的网页上，我喜欢高度不同的卡片，这就是我使用 freetile 的原因。

**问题**
这是我执行插件的 jQuery 片段

```
<script type="text/javascript">

$(document).ready(function() {
$('#freetile-container').freetile({ animate: true, elementDelay: 30 });
});

</script> 
```

它不执行插件，所以我的页面看起来像这张 [图片 - 只是浮动](http://oi50.tinypic.com/2dl2olu.jpg)

但是当我打开我的萤火虫时，插件突然被执行，“卡片”被动画化并相互平铺。[图片 - 现在平铺](http://oi47.tinypic.com/2rqghnc.jpg)

我真的无法弄清楚似乎有什么问题 - jquery 是否认为我的页面尚未加载或其他什么？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:38:03.843

尝试指定一个自定义元素选择器：

```
$(document).ready(function() {
        $('#freetile-container').freetile({ 
        selector: '.post',
        animate: true, 
        elementDelay: 30
    });
}); 
```

*将“post”替换为元素的类名。*

# python - 这是 Windows 中的 Python 模块吗？

> ID：12490504
> 
> 赞同：0
> 
> 时间：2012-09-19T07:48:00.887
> 
> 标签：python, module, python-2.7, easy-install

以下软件包是 Python 2.7 标准安装的一部分吗？

```
import common
import settings
import xpath 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:52:02.287

不，这些不是，检查 python 2.7[文档](http://docs.python.org/library/)

编辑： xpath 可能是[这里](http://code.google.com/p/py-dom-xpath/)的一个。在不知道上下文的情况下很难准确回答，但我不知道名为 settings / common 的常见模块/包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:52:12.547

[不，这些模块在stdlib](http://docs.python.org/library/index.html)中找不到。

# c# - C# 将字符串转换为 ASCII 字节

> ID：12490507
> 
> 赞同：2
> 
> 时间：2012-09-19T07:48:19.653
> 
> 标签：c#

我有一个字符串：

```
LogoDataStr = "ABC0000" 
```

我想转换为 ASCII 字节，结果应该是：

```
LogoDataBy[0] = 0x41;
LogoDataBy[1] = 0x42;
LogoDataBy[2] = 0x43;
LogoDataBy[3] = 0x30;
LogoDataBy[4] = 0x30;
LogoDataBy[5] = 0x30;
LogoDataBy[6] = 0x30; 
```

我试过用这种方式：

```
byte[] LogoDataBy = ASCIIEncoding.ASCII.GetBytes(LogoDataStr); 
```

但我得到的结果是这样的：

```
LogoDataBy[0] = 0x41;
LogoDataBy[1] = 0x42;
LogoDataBy[2] = 0x43;
LogoDataBy[3] = 0x00;
LogoDataBy[4] = 0x00;
LogoDataBy[5] = 0x00;
LogoDataBy[6] = 0x00; 
```

我的编码有什么问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T08:01:33.500

这段代码

```
class Program
{
    static void Main(string[] args)
    {
        byte[] LogoDataBy = ASCIIEncoding.ASCII.GetBytes("ABC000");
    }        
} 
```

产生预期的输出

![在此处输入图像描述](../Images/ada846eb4601b7b9e7ce33a375b5aa4e.png)

在读取 ASCII 字节之前，请仔细检查您的代码和字符串的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T08:06:09.377

只是扔：

```
Encoding.ASCII.GetBytes("ABC0000").Dump(); 
```

Into LinqPAD 给出（十进制）的输出：

> 字节[]（7 项）
> 65
> 66
> 67
> 48
> 48
> 48
> 48

所以我不确定你是如何得到 0x00 的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:23:48.573

```
 class CustomAscii
    {
        private static Dictionary<char, byte> dictionary;

        static CustomAscii()
        {
            byte numcounter = 0x30;
            byte charcounter = 0x41;
            byte ucharcounter = 0x61;
            string numbers = "0123456789";
            string chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
            string uchars = "abcdefghijklmnopqrstuvwxyz";
            dictionary = new Dictionary<char, byte>();
            foreach (char c in numbers)
            {
                dictionary.Add(c, numcounter++);
            }
            foreach (char c in chars)
            {
                dictionary.Add(c, charcounter++);
            }
            foreach (char c in uchars)
            {
                dictionary.Add(c, ucharcounter++);
            }
        }

        public static byte[] getCustomBytes(string t)
        {
            int iter = 0;
            byte[] b = new byte[t.Length];
            foreach (char c in t)
            {
                b[iter] = dictionary[c];
                //DEBUG: Console.WriteLine(b[iter++].ToString());
            }

            return b;
        }
    } 
```

我就是这样做的。只要 Encoding.ASCII.GetBytes() 会返回错误值。

# c++ - C++ 获取向量类型

> ID：12490508
> 
> 赞同：12
> 
> 时间：2012-09-19T07:48:23.207
> 
> 标签：c++, templates, vector

我正在使用模板函数进行对象构造以从反射数据创建对象，并且效果很好，但是现在我想在反射系统中支持 STL 容器类型，以便对象，例如：

```
// Note - test case only
// for real world usage it would probably not be structured like this 
// and the phrases would be mapped by an id or something 
struct Phrases {
  std::vector<std::string> phrases;
};

typedef std::string Lang;
struct Langs {
  std::map< Lang, Phrases > translations;
}; 
```

可以支持。我可以在返回时做一些正则表达式魔术

```
typeid( object ).name() 
```

确定对象是向量还是映射，以及对象的参数参数是什么。我已经尝试了一些模板魔术来执行以下操作，其中 CreateString、ConstructString 和 DestroyString 位于函数中，而数据也位于更复杂的东西中，它使用类型数据库来处理对象构造。

```
// Representational of code, basically a copy-paste to a different test project where I can work out the problems with this specific vector problem 
// Vector specialised construction 
template <typename T> void ConstructVector( void* object, const std::vector<std::string>& data ) {
  T* vec = (T*)object;
  Name vector_type = GetVectorTypeName<T>();

  void *obj; 
  CreateString(&obj);
  // All fields in this type should be valid objects for this vector 
  for( std::vector<std::string>::const_iterator it = data.begin(), end = data.end(); it != end; ++it ) {
    // Push it 
    vec->push_back(*obj);
    // Get address to new instance 
    void *newly = &vec->back(); 
    ConstructString(newly,*it);
  }
  DestroyString(&obj);

} 
```

由于“vec->push_back(*obj);”的非法间接，这不起作用 我不能这样，因为我实际上并不知道类型。基本上我需要做的是创建这个向量，其中已经有一些空白的未设置元素，或者在没有实际类型的情况下向它添加新元素，因为如果我可以获得指向向量内的内存块的指针，我可以滚动并构建对象。但是向量添加要求，例如

```
vector::push_back( T& value ) 
```

或者

```
vector::insert( Iter&, T& ) 
```

除非我能从模板内部得到那个 T 类型，否则对我不起作用

测试代码的 pastebin 来尝试解决这个问题：http: [//pastebin.com/1ZAw1VXg](http://pastebin.com/1ZAw1VXg)

所以我的问题是，当我在像这样的模板中时，如何获得 std::vector 声明的 std::string 部分

```
template <typename T> void SomeFunc() {

  // Need to get std::string here somehow       
  // Alternatively need to make the vector a certain size and then 
  // get pointers to it's members so I can construct them 
}

SomeFunc<std::vector<std::string>>>(); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-19T07:54:25.047

有两种方法可以做到这一点。

**1）**要么您利用`std::vector<>`（像所有标准库容器类一样）维护一个成员类型这一事实`value_type`，它表示存储在向量中的元素的类型。所以你可以这样做：

```
template <typename T> void SomeFunc() {
  typename T::value_type s;  // <--- declares a `std::string` object
                             //      if `T` is a `std::vector<std::string>`
} 
```

**2）**否则，您更改函数的声明并使用模板模板参数：

```
template <template <typename> class T, typename Elem>
void SomeFunc(T<Elem> &arg)
{
  Elem s;
} 
```

但是，这样做有一个小问题：`std::vector`确实是一个带有两个参数（元素类型和分配器类型）的模板，这使得模板模板参数的使用有点困难，并且仍然保持语法简单。对我有用的一件事是声明向量类型的别名，它只留下一个模板参数：

```
template <typename Elem>
using myvector = std::vector<Elem>; 
```

然后我可以`SomeFunc`这样使用：

```
int main()
{
  myvec<std::string> vec;
  SomeFunc(vec);
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-11-12T10:14:57.563

在 c++11 中，您可以使用 decltype 和 std::decay 来达到这种效果：

`std::vector<int> vec; using T = typename std::decay<decltype(*vec.begin())>::type;`

# jquery-ui - JQuery 绑定点击事件保留旧的绑定值

> ID：12490510
> 
> 赞同：0
> 
> 时间：2012-09-19T07:48:32.727
> 
> 标签：jquery-ui, click, jquery

我有一个 ASP.NET MVC 3.0 部分视图，它在 jquery ui 对话框中呈现。在这个局部视图中，我有一些链接可以帮助我显示更多信息。

```
@foreach (StatusType status in ViewBag.Status)
{
    <li>@status.StatusMessage<a href='#' status='@status.StatusCode'><img src=@Url.Content("~/Content/Images/information.png") alt="See detail"/></a></li>
} 
```

我已经将这些链接与点击事件绑定：

```
$('a[status]').live('click', function (e) {
            if (e.preventDefault)
                e.preventDefault();
            else
                e.returnValue = false;
            var status = $(this).attr('status');
            alert('@Model.Code');
            ...}); 
```

发生的事情是，当我第一次单击链接时，它会向我显示正确的代码（比如说 12）。当我再次为另一个代码 (66) 加载部分视图时，它将向我显示两条警报消息，第一条带有 12（我之前单击过的旧值），第二条带有 66。

我将加载的部分视图越多，我在警报中的价值就越大。我不明白为什么它让我像我点击的所有代码的历史一样。

如果有人对这个问题有任何想法，将受到欢迎，它只会让我发疯。

提前致谢。

**更新**

使用 on 而不是 live 作品，但我仍然对对话框有疑问。我已经使用建议的解决方案更改了代码：

```
 $('#StatusDiv').on('click', 'a[status]', function (e) {
            e.preventDefault();
            var status = $(this).attr('status');
            alert('@Model.Code');
            $('#StatusDialog').dialog({
                autoOpen: false,
                width: 800,
                resizable: true,
                title: 'Status Info',
                modal: true,
                open: function (event, ui) {
                    alert('@Model.Code');
                    $(this).load('@Url.Action("ViewStatusInfo")', { clientId: clientId, Code: '@Model.Code', status: status
                    });
                }
            });
            $('#StatusDialog').dialog('open');
        }); 
```

第一个警报显示正确的代码，但 open 函数内的第二个警报显示旧代码。在第二次点击时它会正常工作，但我不明白它如何选择旧值，因为第一次显示是正确的......

再次感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:10:28.297

首先：不要`live`在 jquery 的最新版本中使用。

```
$('#list').on('click', '.status', function(e){
    e.preventDefault();
    alert(this.href);
}); 
```

在这里，我们将事件绑定到`#list`，当我们插入新链接时，一切都会起作用。

演示：[jsfiddle.net/wPSH2/](http://jsfiddle.net/wPSH2/)

# c# - 脚本在 dotnet WebBrowser 控件中运行速度较慢

> ID：12490512
> 
> 赞同：1
> 
> 时间：2012-09-19T07:48:46.063
> 
> 标签：c#, jquery, jquery-plugins, webbrowser-control, smooth-scrolling

我在我的 winforms 应用程序中使用 WebBrowser 控件和[Smooth Div Scroll](http://www.smoothdivscroll.com)来呈现 html 选取框。我下载了示例并添加了

```
autoScrollingInterval: 3 
```

至

```
$("div#makeMeScrollable").smoothDivScroll({
    autoScrollingMode: "onStart"
}); 
```

让它移动得更快。当我在 IE 中打开示例时，它工作得很好，但是当我使用 WebBrowser 控件并调用导航方法时，滚动条的移动速度要慢得多。

是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-22T22:01:03.193

据我了解，您正在处理的问题是 IE 7 标准模式下 WebBrowser 控件呈现的版本控制问题，而您在 IE 中使用的实际 WebBrowser 是 IE 8 或 IE 9，它在那里工作，但您的 JQuery /JavaScript 或 CSS 包含在 IE 7 中不起作用。

让我直接告诉你。webbrowser 控件上的默认渲染引擎已修复，以确保跨所有平台的兼容性。

基本上，如果您安装的浏览器是 IE 7 - IE 9，那么使用的渲染引擎只有 IE 7.0（默认情况下）。

但是，如果您安装的 IE 版本是 IE 6 或更低，那么使用的渲染引擎是 IE 4.0（不是开玩笑），当然除非您另外设置。

有一种误解认为 WebBrowser 控件使用当前安装的任何内容（当前 IE 版本），但事实并非如此，因为它们这样做是为了减少向后兼容性问题。您可以通过在普通浏览器中访问 www.whatsmyuseragent.com，然后在 WebBrowser 控件中再次访问该网站来看到（作为证据）这确实是您的问题，您会看到它显示 MSIE 7.0 :)。

您可以将其设置为使用当前安装的 Internet Explorer 版本，或者在页面中使用 META 标记，或者在运行 webbrowser 控件的机器上编辑注册表（编辑 Current_User 和 Local_Machine 都可以）。

WebBrowser 控件将（通常）使用您安装的任何版本的 IE，但出于兼容性原因，它将默认以 IE7 标准模式呈现页面。

如果您想利用新的 IE9 功能，您应该在HTML 页面`<meta http-equiv="X-UA-Compatible" content="IE=9" >` 的标签内添加元标签。`<head>`

这个元标记必须在任何指向 CSS、JavaScript 文件等的链接之前添加，这些链接也可以`<head>`正常工作（只有其他`<meta>`标记或`<title>`标记可以在它之前）。

另一种方法是将注册表项添加到：

> HKLM > SOFTWARE > Microsoft > Internet Explorer > Main > FeatureControl > FEATURE_BROWSER_EMULATION

并在其中添加值为“9000”的“YourCompiledApplicationName.exe”，以强制 WebBrowser 控件以 IE9 模式显示页面。尽管您也可以使用其他值，但请注意，这些文档并不完全准确，因为无论您使用什么值，似乎都不可能让页面在 IE 8 模式下呈现。（注意：YourCompiledApplicationName.exe 必须是您编译的包含 WebBrowser 控件的 EXE 文件名，它仅适用于您已包含在注册表中的文件名）。此外，添加 vshost.exe 和 YourCompiledApplicationName.exe.svchost 不会有什么坏处，因此它在通过您的 IDE 运行时可以工作，而且，如果您的应用程序在 64 位 Windows 下运行，您可能还应该在以下注册表路径下设置以下 DWORD到相同的值（根据 32 位路径）：

> HK[LM|CU] \ SOFTWARE \ Wow6432Node \ Microsoft \ Internet Explorer \ Main \ FeatureControl \ FEATURE_BROWSER_EMULATION

将注册表项添加到 HKCU 而不是 HKLM 中的同一路径也将起作用 - 这很有用，因为写入 HKLM 需要管理员权限，而 HKCU 不需要。

不知道IE 10.0什么时候出来，WebBrowser控件默认引擎是否会转到10.0（如果系统上当然安装了10.0），或者即使在IE 10.0发布后它仍然是IE 7.0，我们将不得不看到它出来。但是，如果我们根据以前的经验猜测，我怀疑 IE 10.0 将是使用 IE 7.0 渲染引擎的最后一个版本，而当 IE 11 出来时，对于 IE 11 之间的所有 IE 版本，默认渲染引擎将保持为 IE 11 & IE 14\. 这只是通过推断他们过去所做的事情的猜测。

有关可以将注册表设置为的值的更多信息，[请查看：](http://msdn.microsoft.com/en-us/library/ie/ms533876%28v=vs.85%29.aspx)

# php - PHP - 总天数不是整数

> ID：12490521
> 
> 赞同：0
> 
> 时间：2012-09-19T07:49:41.663
> 
> 标签：php, date, datetime

这个问题的公认答案是：[计算工作日](https://stackoverflow.com/questions/336127/calculate-business-days)是错误的。只需检查

```
echo getWorkingDays("2012-01-01","2012-05-01",$holidays); 
```

问题出在这个片段上：

```
$days = ($endDate - $startDate) / 86400 + 1; 
```

所以最小的不工作的例子是：

为什么这个表达式：

```
($endDate - $startDate) / (60*60*24); 
```

不是整数：

```
 $startDate = strtotime("2012-01-01");
 $endDate = strtotime("2012-05-01"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:53:39.270

您已超过 DST 阈值。每当您这样做时，您的持续时间（通常）会缩短或延长一小时。如果您希望避免这种情况，请专门使用 UTC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:09:03.443

正如伊格纳西奥所说，这是因为通过了夏令时的开始（三月的最后一个星期日）或结束（十月的最后一个星期日）......所以你最终失去/获得了一个小时，从而搞砸了计算。

我添加的只是等式中的 round() ，它完美地处理了这种情况:)

```
$days = round( (strtotime($endDate) - strtotime($startDate)) / 86400 + 1); 
```

# ide - typedef后的Qt没有自动完成

> ID：12490523
> 
> 赞同：2
> 
> 时间：2012-09-19T07:49:58.787
> 
> 标签：ide, qt4

我现在正在 Qt4 中尝试来自 ITK 的一些代码，就像 IDE 一样。一件有趣的事情是在 typedef 之后对象无法自动完成可能的属性。

```
// Declare the image
typedef itk::Image<short, 3> ImageType;

ImageType::SizeType imSize = {{256, 256, 10}};
ImageType::Pointer im = ImageType::New();
im->SetRegions(imSize);
im->Allocate(); 
```

这里 im-> 有麻烦。每次我都必须手动填写。

我想这不是一个错误？

# jquery - 在 MVC 中将 Json 日期时间分配给 TextBoxFor 时格式错误

> ID：12490524
> 
> 赞同：2
> 
> 时间：2012-09-19T07:50:10.063
> 
> 标签：jquery, json, asp.net-mvc-3, datetime, razor

我有一个函数可以根据 dropdown 的变化在文本框中设置更新日期时间。

我的jQuery：

```
function ModifymyDiv (element) {

    var option = $("#myDiv option:selected").text();
    var requrl = '@Url.Action("PopulateConfirmationFields", "Controller", null, Request.Url.Scheme, null)';
    $.ajax({
        type: "Get",
        url: requrl,

        success: function (data) {

            $('#txtconfTime').empty();
            $('#txtconfName').empty();
            $('#txtconfName').val(data.name);
            $('#txtconfTime').val(data.time);
        },
        error: function (failure) {
        }
    });
} 
```

我的 Json 方法：

```
 public ActionResult PopulateConfirmationFields()
        {
            User usr = userProxy.GetUserById(UserAppContext.UserOID);
            string name = string.Format("{1},{0}", usr.FirstName, usr.LastName);
            DateTime time = DateTime.Now;
            var t = new { name = name, time = time };
            return Json(t, JsonRequestBehavior.AllowGet);
        } 
```

还在我的文本框中...

```
@Html.TextBoxFor(model => model.confirmationDateTime, new { id = "txtconfTime" }) 
```

DateTime 值看起来像...

```
/Date(1348040819674)/ 
```

如何将正确的日期时间格式传递给我的 TextBox ？PS 在这种特殊情况下，不能将其修改为字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:25:07.223

找到解决方案：

```
 var jsonDate= data.time;
        var date = new Date(parseInt(jsonDate.substr(6)));
        var curr_date = date.getDate();
        var curr_month = date.getMonth();
        curr_month++; //January is represented by 0 
        var curr_year = date.getFullYear();
        var date =curr_month + "/" + curr_date + "/" + curr_year;
            $('#txtconfTime').empty();
            $('#txtconfName').empty();
            $('#txtconfName').val(data.name);
            $('#txtconfTime').val(date);
        }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:15:18.277

例如，您可以：

```
public ActionResult PopulateConfirmationFields()
        {
            User usr = userProxy.GetUserById(UserAppContext.UserOID);
            string name = string.Format("{1},{0}", usr.FirstName, usr.LastName);
            String time = DateTime.Now.ToString();
            var t = new { name = name, time = time };
            return Json(t, JsonRequestBehavior.AllowGet);
        } 
```

# sed - 如何使用 sed 删除顶部注释行？

> ID：12490528
> 
> 赞同：0
> 
> 时间：2012-09-19T07:50:21.980
> 
> 标签：sed

我知道如何删除所有评论或删除文件中的指定行，但不知道如何只删除包含作者、版权等的第一条顶级评论行。我不能只使用删除第一行，因为可能有源文件根本不包含顶级评论块。有什么建议吗？

**更新**：源文件是objective-c文件，所有顶级注释行都以`//`. 可能规则“删除所有评论行，直到找到第一个非评论行然后停止”最能描述我想要实现的目标。

**第二个问题：**另外，寻找一种方法来告诉 sed 通过所有项目目录和文件递归循环。

**更新2**。这是我正在尝试修改的objective-c文件的注释块示例：

```
//
//  MyProjectAppDelegate.m
//  MyProject
//
//  Created by Name Surname on 2011-09-20.
//  Copyright 2012 JSC MyCompany. All rights reserved.
// 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:59:07.987

如果 awk 也被接受，请查看以下内容：

```
 awk 'BEGIN{f=1}f&&/^\/\//{next;}{f=0}1' yourFile 
```

**测试**

```
kent$  cat test.txt
//
//  MyProjectAppDelegate.m
//  MyProject
//
//  Created by Name Surname on 2011-09-20.
//  Copyright 2012 JSC MyCompany. All rights reserved.
//
real codes come here...

// comments in codes should be kept

foo bar foo bar

kent$  awk 'BEGIN{f=1}f&&/^\/\//{next;}{f=0}1' test.txt
real codes come here...

// comments in codes should be kept

foo bar foo bar 
```

您可以结合 find 和 awk one-liner 进行递归处理。

sed 也可以用同样的想法做到这一点。需要在Hold space写一个标记，并检查每一行的hold space。它具有 -i 选项的优势，它允许您更改原始文件。但是我觉得 awk 更直接地完成这项工作。将更改的文本保存回原始文件也不是一件难事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:50:03.607

这是一个适用于*Kent's*`sed`的解决方案： *`test.txt`*

 *```
sed -n '/^ *\/\//! { :a;p;N;s/.*\n//;ba}' 
```

输出：

```
real codes come here...

// comments in codes should be kept

foo bar foo bar 
```

*解释*

```
sed -n '/^ *\/\//!{    # if line does not start with //
  :a                   # label a
  p                    # print line
  N                    # append next line to PS
  s/.*\n//             # remove previous line
  ba                   # branch to a
}' < test.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T11:23:47.373

试试看：

```
sed '0,\#^\([^/]\|/[^/]\)\|^$# d' 
```*

# asp.net - 在现有 EC2 实例上创建 RamDisk 是否可行且安全？如果可能，该怎么做？

> ID：12490529
> 
> 赞同：2
> 
> 时间：2012-09-19T07:50:26.950
> 
> 标签：asp.net, amazon-ec2, amazon, ramdisk

我有一个当前拥有我们网站的**EC2实例，我们正在考虑将我们的“****临时 ASP.NET**文件”编译文件夹指向**EC2**上的**RamDisk**。不确定这是否是个好主意，也找不到太多信息。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:53:37.097

Ramdisk 通常用于加速对常用文件的访问。在您的情况下，我认为速度不是问题，但您想节省主驱动器上的空间。在这种情况下，我将使用 EC2 中的实例存储 - 与 EBS 支持的主存储相比，此存储将在重启时刷新。

[这是关于 Serverfault 的帖子](https://serverfault.com/questions/386346/how-can-i-access-instance-storage-on-a-windows-ec2-instance-with-an-ebs-root-dev)，向您展示了如何挂载实例存储。另请查看[AWS 文档中的实例存储](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/InstanceStorage.html)。然后，您必须将 Temporary ASP.NET Files 文件夹移动到实例支持的磁盘之一。**

# asp.net-mvc - MVC 可选 GridView

> ID：12490532
> 
> 赞同：0
> 
> 时间：2012-09-19T07:51:12.303
> 
> 标签：asp.net-mvc

我正在使用**MVC**设计网页。其中一个页面具有以下控件和功能：

控制：

*   2 GridViews (gvItems, gvSelectedItems)
*   3 个按钮（btnTransferSingle、btnTransferAll、提交）

功能

*   gvItems 将填充一组项目，其中包含：名称、点数
*   gvSelectedItems 将包含从 gvItems 传输的项目。因此它还将包含：名称、点数
*   两个 GridViews 都支持多选
*   btnTransferSingle 会将所有选定的项目从 gvItems 传输到 gvSelectedItems。
*   btnTransferAll 会将所有剩余项目从 gvItems 转移到 gvSelectedItems。
*   btnSubmit 会将 gvSelectedItems 中的所有项目发送到控制器。

我不确定如何执行以下操作：

*   1）如何创建一个支持多选和显示多个模型属性的gridview。
*   2）如何将项目从一个gridview（gvItems）转移到另一个（gvSelectedItems）？
*   3) 如何将 gvSelectedItems 中的所有项目传回控制器？

我可以使用 listBox 完成提到的事情，但 listBox 只允许显示一个属性并且没有标题。

我使用了 Matt Kruse Javascript 的工具箱来帮助在列表框之间移动项目。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:53:24.193

我认为列表框是正确的方法。

如果要显示这两个属性，请在加载数据时尝试将它们连接起来。可以使用 html/css 添加一些标题

# asp.net-mvc-3 - ASP.NET MVC 3 - 自定义客户端验证不起作用

> ID：12490533
> 
> 赞同：0
> 
> 时间：2012-09-19T07:51:14.913
> 
> 标签：asp.net-mvc-3, data-annotations, jquery-validate, unobtrusive-validation

我正在尝试实现自定义客户端验证，但它不起作用。我基于 Codeproject 上的文章[http://www.codeproject.com/Articles/275056/Custom-Client-Side-Validation-in-ASP-NET-MVC3](http://www.codeproject.com/Articles/275056/Custom-Client-Side-Validation-in-ASP-NET-MVC3)

我也看过这里，但我认为我正在以正确的方式实现它，但我忽略了一些东西。我的目标是验证日期（必需的日期格式，并且不早于表单上的另一个日期）。前两个可以通过数据注释来完成，最后一个我必须通过自定义验证来完成。

我的基类上有一些数据注释（ClassLibrary 在 VB.NET 中）：

```
Imports System.ComponentModel
Imports System.ComponentModel.DataAnnotations

<MetadataType(GetType(CM_CONTRACTVALIDATIONData))>
Partial Public Class CM_CONTRACTACTIVATION
    '...
End Class

Public Class CM_CONTRACTVALIDATIONdata
'...
<DataType(DataType.Date)>
<Required()>
Public Property TakeBackDeviceWhen
'..
End Class 
```

在 javascript 文件中，我添加了自定义方法：

```
//validation
$.validator.addMethod("checkPickupDate", function (value, element) {
    return false;
});
$("#form").validate({
    rules: {
        TakeBackDeviceWhen: {
            checkPickupDate: true
        }
    },
    messages: {
        TakeBackDeviceWhen: {
            checkPickupDate: "Test"
        }
    }
}
); 
```

我的 chtml 文件如下：

```
@Html.TextBox("TakeBackDeviceWhen", Model.TakeBackDeviceWhen.HasValue ? Model.TakeBackDeviceWhen.Value.ToShortDateString() : "", new { style = "Width: 200px" }) 
```

生成的 HTML 如下：

```
<input id="TakeBackDeviceWhen" class="hasDatepicker" type="text" value="" style="Width: 200px" name="TakeBackDeviceWhen" data-val-required="The TakeBackDeviceWhen field is required." data-val="true"> 
```

似乎我的类型验证和自定义验证都没有实现。

出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:47:30.827

好的，解决了。我希望 ：-）

今天学到了什么： （1）不要使用EditorFor：当你从MVC模板脚手架时，输入字段生成到EditorFor，似乎你不能添加自定义的不显眼的验证标签。所以，我试图解决这个问题，直到我将其更改为 TextBoxFor。

(2) 可以在 jQuery 中添加自定义验证方法，但不能将它们与不显眼的验证混合使用。添加自定义方法后，您还必须将其添加到不显眼的适配器中。并且不要忘记在底部添加 jQuery :-s （我从[jQuery.validator.unobtrusive.adapters.addMinMax 往返中得到这个，在 MVC3 中不起作用](https://stackoverflow.com/questions/6217009/jquery-validator-unobtrusive-adapters-addminmax-round-trips-doesnt-work-in-mvc)）

```
$(function () {
$.validator.addMethod("checkpickupdate", function (value, element) {
    if (value == "20/09/2012") {
        return false;
    } else {
        return true;
    }
});

$.validator.unobtrusive.adapters.addBool("checkpickupdate");
} (jQuery)); 
```

(3) 在 htmlAttributes 中的输入字段中添加验证标签：

```
@Html.TextBox("TakeBackDeviceWhen", Model.TakeBackDeviceWhen.HasValue ? Model.TakeBackDeviceWhen.Value.ToShortDateString() : "",
                new { 
                    style = "Width: 200px", 
                    data_val = "true", 
                    data_val_required = "verplicht!",
                    data_val_date = "moet datum zijn",
                    data_val_checkpickupdate = "wow"
                 }) 
```

(4) 数据类型数据注释不会强制验证。您必须像在 (3) 中一样添加它。您可以添加自定义 ValidationAttribute （用于服务器端验证）：

```
public class MustBeDateAttribute : ValidationAttribute {
    public override bool IsValid(object value) {
        try
        {
            DateTime dte = DateTime.Parse(value.ToString());
            return true;
        }
        catch (Exception)
        {
            return false;
            throw;
        }
    }
} 
```

这是生成的 html 输出：

```
<input type="text" value="" style="Width: 200px" name="TakeBackDeviceWhen" id="TakeBackDeviceWhen" data-val-required="required!" data-val-date="has to be a date" data-val-checkpickupdate="custom error" data-val="true" class="hasDatepicker valid"> 
```

当我在不同的项目中使用我的 ClassLibrary 时，我现在将尝试从类库中分离 dataannotations 元数据（可能使用依赖解析器）。

# c - malloc和calloc分配的内存块布局的区别？

> ID：12490534
> 
> 赞同：10
> 
> 时间：2012-09-19T07:51:17.060
> 
> 标签：c

[`calloc`](http://www.cplusplus.com/reference/clibrary/cstdlib/calloc/)分配`num`内存块，每个大小为`size`：

> `void * calloc ( size_t num, size_t size );`
> 
> **为内存中的数组分配空间 为** num 个元素的数组分配一块内存，每个元素的大小为字节长，并将其所有位初始化为零。

相反，[`malloc`](http://www.cplusplus.com/reference/clibrary/cstdlib/malloc/)分配一块大小为 的内存`size`：

> `void * malloc ( size_t size );`
> 
> **分配内存块** 分配一块大小字节的内存，返回一个指向块开头的指针。

* * *

两者之间有什么区别（除了零初始化`calloc`）？

calloc 的确切含义是`num`内存块，因为实际上返回的内存区域也是连续的。

我相信必须有一些区别，否则为这些方法定义两个不同的接口没有多大意义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T07:58:22.023

抱歉，没有区别（但内存已清零）

Calloc() 在与数组一起使用时很有用，其中您有两个不同的值：数组的大小和单个单元格的维度。返回的区域内存在这两种情况下都是连续的，并且它们可能使用相同的数据结构来跟踪此类区域（但这取决于实现）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:55:35.627

在实践中，他们做同样的事情。calloc 的优点是良好的实现将在执行所需的乘法运算以确定您需要多少内存时执行溢出检测。

如果你这样做：

```
void *
calloc(size_t nmemb, size_t size)
{
    size_t sz = nmemb * size;
    void *res = malloc(sz); 
```

'sz' 可能最终不会是你所期望的那样。然后 malloc 将分配比调用者预期的要少得多，但调用者最终可以将返回的区域视为足够大。这会导致堆溢出，这将带来通常具有的所有安全隐患。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T12:39:54.870

我试图找出`calloc`工作原理

我找到下面的代码

```
/* We use this function occasionally since the real implementation may
   be optimized when it can assume the memory it returns already is
   set to NUL.  */
void * weak_function
calloc (size_t nmemb, size_t size)
{   
  /* New memory from the trivial malloc above is always already cleared.
     (We make sure that's true in the rare occasion it might not be,
     by clearing memory in free, below.)  */
  size_t bytes = nmemb * size;

#define HALF_SIZE_T (((size_t) 1) << (8 * sizeof (size_t) / 2))
  if (__builtin_expect ((nmemb | size) >= HALF_SIZE_T, 0)
      && size != 0 && bytes / size != nmemb)
    return NULL;

  return malloc (bytes);
} 
```

可以看到 calloc 和 malloc 没有太大区别。

你可以在这里浏览 glibc 的代码

[http://sourceware.org/git/?p=glibc.git;a=blob;f=elf/dl-minimal.c](http://sourceware.org/git/?p=glibc.git;a=blob;f=elf/dl-minimal.c)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T07:55:26.860

唯一真正的区别是使用 0 初始化`calloc()`。

为什么`calloc()`使用块大小和块计数`malloc()`而不使用，我一直不清楚。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T07:58:58.797

它们完全相同。`Calloc`希望您指定要分配多少给定大小的块，因为它用 0 初始化它们。底层结构完全相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T08:03:08.297

你可以认为是`calloc()`：

```
void* calloc(size_t nmemb, size_t size)
{
  const size_t nbytes = nmemb * size;
  void *p = malloc(nbytes);
  if(p != NULL)
    memset(p, 0, nbytes);
  return p;
} 
```

请注意，它的实现可能完全不同，但它与上述功能等效。内存的“内部布局”没有区别，你得到一个连续的块。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-30T05:27:25.310

是`Calloc()`的。它的作用是将每个大小的 n 块分配给每个大小的`size_t size`块，然后将每个大小的块分配`size_t size`给 ZERO 。

# asp.net - 检索搜索结果的最佳方法

> ID：12490536
> 
> 赞同：1
> 
> 时间：2012-09-19T07:51:27.457
> 
> 标签：asp.net, post, curl, get, search-engine

我正在尝试编写一个从特定站点提取集装箱信息的程序。我在几家使用 POST 方法提交搜索的航运公司网站上取得了成功。对于这些网站，我一直在使用 cURL，一个 PHP 库。然而，这个网站[http://www.cma-cgm.com/eBusiness/Tracking/](http://www.cma-cgm.com/eBusiness/Tracking/)一直很难与之交互。我曾尝试使用 cURL，但我检索到的只是没有实际搜索结果的周围 html。

我试图跟踪的一个示例容器是 CMAU1173561。

实际的跟踪 URL 似乎是[http://www.cma-cgm.com/eBusiness/Tracking/Default.aspx?ContNum=CMAU1173561&T=292012319448](http://www.cma-cgm.com/eBusiness/Tracking/Default.aspx?ContNum=CMAU1173561&T=292012319448)其中 ContNum 是运输集装箱，T 是从当前时间构造的值。

我还注意到 .aspx。以编程方式检索这些搜索结果的最佳方法是什么？

# c# - 我想使用 foreach 语句迭代对象

> ID：12490547
> 
> 赞同：2
> 
> 时间：2012-09-19T07:52:07.467
> 
> 标签：c#, extension-methods

有一种列表容器（例如，我无法修改的 MyList），但仅声明了 GetCount() 和 At() 方法。

我想对 MyList 使用 foreach 语句，所以我编写了如下扩展方法。

```
public static class MyListHelper
{
    public static IEnumerable<MyListItemType> GetEnumerator(this MyList list)
    {
        for (int i = 0; i < list.GetCount(); ++i )
        {
            yield return list.At(i);
        }
    }
} 
```

但是，如果我编写“ **foreach (MyListItemType i in list)...** ”，编译器会吐出“MyList 不包含 GetEnumerator 的 piblic 定义”。

我可以直接调用 GetEnumerator() 方法并且工作正常。

我应该为此多做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:56:46.717

如果您不能直接编辑`MyList`（非静态）类的代码，则可能必须制作扩展方法`ToIEnumerable`或类似方法。也许是这样的：

```
public static class MyListExtensions
{
  public static IEnumerable<MyListItemType> ToIEnumerable(this MyList list)
  {
    return new Wrapper(list)
  }

  private class Wrapper : IEnumerable<MyListItemType>
  {
    readonly MyList list;

    public Wrapper(MyList list)
    {
      this.list = list;
    }

    public IEnumerator<MyListItemType> GetEnumerator() 
    { 
      for (int i = 0; i < list.GetCount(); ++i )
      { 
        yield return list.At(i); 
      } 
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
      return this.GetEnumerator();
    }
  } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:54:29.327

更改`MyList`以实现[IEnumerable](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)或`IEnumerable<T>`接口。这包括[GetEnumerator](http://msdn.microsoft.com/en-us/library/s793z9y2.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T07:57:07.350

您`MyList`需要实现接口`IEnumerable`

```
public class MyList:IEnumerable<MyListItemType>
{
    public IEnumerable<MyListItemType> GetEnumerator()
    {
        ...
    }
} 
```

# c# - 如何使用多个按钮控制 jquery 验证引擎控件？

> ID：12490554
> 
> 赞同：0
> 
> 时间：2012-09-19T07:52:35.633
> 
> 标签：c#, javascript, jquery

> **可能重复：**
> [jQuery 验证 - 一个 asp.net 表单上的多个提交按钮，不同的验证组？](https://stackoverflow.com/questions/1602911/jquery-validation-multiple-submit-buttons-on-one-asp-net-form-different-valid)

我正在使用 jQuery 验证引擎插件，我的内容页面中有两个按钮：一个是提交按钮，另一个是取消按钮。

当我单击提交按钮时，会触发表单验证，但是当我单击取消按钮时，会再次触发表单验证。单击取消按钮时，我不想触发验证。

任何的想法 ？

```
<form>
    <asp:TextBox ID="TextBox1" CssClass="validate[required]" runat="server"></asp:TextBox>
    <asp:TextBox ID="TextBox2" CssClass="validate[required]" runat="server"></asp:TextBox>
    <asp:Button ID="Button1" runat="server" Text="send" />
</form>
<asp:Button ID="Button2" runat="server" Text="cancel" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:55:48.450

提及按钮的类型。表单中没有类型的按钮将被视为提交按钮。

只需将类型指定为取消按钮的按钮。这不会触发验证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:02:33.320

这更像是一个 asp.net 问题。

您可以添加`CausesValidation="False"`为属性：

```
<asp:Button ID="Button2" runat="server" Text="cancel" CausesValidation="False" /> 
```

# gwt - GWT，RichTextArea，以像素为单位设置选定的文本大小

> ID：12490557
> 
> 赞同：0
> 
> 时间：2012-09-19T07:52:59.487
> 
> 标签：gwt, font-size, pixels, rich-text-editor

有一个函数可以设置所选文本的大小：**RichTextArea.BasicFormatter.setFontSize(RichTextArea.FontSize fontSize))**

它需要一个绝对字体大小参数 (1-7)。但我需要以像素为单位设置大小。有可能以某种方式做吗？

欢迎任何建议或想法=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:48:55.903

您必须实现自己的控件（即 ListBox），它在选择时会插入标签，例如

```
<span style="font-size: 12px;"> ... </span> 
```

围绕选定的文本。

如果用户将字体大小应用于文本的重叠部分，一个好的实现也会删除不必要的标签。

您可以将此控件添加到与 RichTextArea 一起使用的工具栏。

# java - 如何在编辑后下载excel文件

> ID：12490558
> 
> 赞同：1
> 
> 时间：2012-09-19T07:53:03.887
> 
> 标签：java

我的网络应用程序有一个功能：允许用户下载一个包含用户可以在界面上选择的数据的示例 excel 文件。例如：在我的界面中有 1 个用于选择国家/地区的保管箱，以及一个“下载”按钮。在我的应用程序中有一个 excel 文件“Template.xls”。当用户选择国家并单击“下载”按钮时，我在 Template.xls 中编辑“国家”字段，其值等于国家/地区保管箱的值，然后写入响应。用户将收到一个带有国家值的 Excel 文件“Template.xls”。我的代码如下：

函数编辑Excel文件：

```
private void editExcelFile(String filePath, String country) throws IOException, InterruptedException {
    InputStream fileIn = this.getClass().getResourceAsStream(filePath);

    HSSFWorkbook workbook = new HSSFWorkbook(fileIn);
    HSSFSheet sheet = workbook.getSheetAt(0);
    HSSFRow row = sheet.getRow(1);
    if (row == null ) {
        row = sheet.createRow(1);
    }
    HSSFCell cell7 = row.getCell(7);
    if (cell7 == null)
        cell7 = row.createCell(7);
    cell7.setCellType(Cell.CELL_TYPE_STRING);
    cell7.setCellValue(country);

    HSSFCell cell14 = row.getCell(14);
    if (cell14 == null)
        cell14 = row.createCell(14);
    cell14.setCellType(Cell.CELL_TYPE_STRING);
    cell14.setCellValue(country);

    // Write the output to a file
    FileOutputStream fileOut = new FileOutputStream(this.getClass().getResource(filePath).getPath());
    workbook.write(fileOut);
    fileOut.flush();
    fileOut.close();
    fileIn.close();
} 
```

onSubmit 函数（点击“下载”按钮时）：

```
@Override
protected ModelAndView onSubmit(HttpServletRequest request, HttpServletResponse response, Object command, BindException errors) throws Exception {
    String templateFilePath = "/Template.xls";
    String country = request.getParameter("country");
    editExcelFile(templateFilePath, country);
    response.setContentType("application/octet-stream");
    response.setHeader("Content-Disposition", "attachment;filename=Template.xls");
    InputStream fileIn = this.getClass().getResourceAsStream(templateFilePath);
    ServletOutputStream out = response.getOutputStream();

    byte[] outputByte = new byte[4096];
    while (fileIn.read(outputByte, 0, 4096) != -1) {
        out.write(outputByte, 0, 4096);
    }
    fileIn.close();
    out.flush();
    out.close();
    return null;
} 
```

但是在下载 Template.xls 时，country 的值不是最后的选择，因为“Template.xls”文件尚未更新但已下载。那么，如何在下载之前检查我的 excel 文件是否已更新。有没有人帮帮我？非常感谢！

# apache - 未使用 Apache 重写重定向 URL

> ID：12490562
> 
> 赞同：0
> 
> 时间：2012-09-19T07:53:26.817
> 
> 标签：apache, mod-rewrite

我一直在使用apache服务器。我想将一些 URL 重定向到另一个，例如。www.abc.com 到 localhost:8080/Home

我在apache安装的conf文件夹中的httpd.conf中取消了rewrite模块的注释。然后我在 httpd.conf 文件中编写了如下所示的重写规则。

RewriteEngine On # 开启重写引擎 RewriteRule [http://www.abc.com](http://www.abc.com) http://localhost:8080/Home/

但是什么也没发生。它只是正常打开 abc.com。即使在日志中也没有错误消息。

谁能建议问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:58:19.500

您只能重写将服务器作为主机的 URL。由于您不托管 www.abc.com，因此您无法重写其任何 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:24:08.330

这不是“最佳”解决方案，但我在家里使用它。

在您自己的 PC 上编辑“主机”文件以进行重定向。例如，我的将“阁楼”重定向到 ip 10.0.0.5，即我在阁楼中的服务器。因此，当我键入 attic/myfolder 时，我会得到通常在 10.0.0.5/myfolder 中得到的内容。

您的主机默认位置可以通过非常快速的 google 找到。

正如我所说，不是最好的，但它确实有效。

编辑：

好的，something.something，我们将其命名为 xyz.com。

我们这里需要两件事；

```
a) your server must expect traffic from xyz.com 
(this is just a config on the server, easy to achieve).

b) your browser must be pointed to your server when you type xyz.com. 
```

通常，当您在任何浏览器中键入 xyz.com 时，您的 PC 将连接到 DNS 服务器以找出 xyz.com 的实际位置（DNS 服务器返回 IP 地址）。要通知 DNS 服务器 xyz.com 应该指向您的服务器，您需要付费向注册商注册域名（未分配的域并不昂贵）。这是最好的方法，因为现在每台计算机都知道如何通过键入 xyz.com 来访问您的服务器。当您将您的网站移动到托管服务器时，您会转到注册商的网站并更改设置，说“停止指向我的家庭服务器的 IP 并开始指向我的托管服务器的 IP”。

或者，如果您不想这样做，您需要告诉您的 PC 跳过 DNS 检查，您可以通过如上修改您的主机文件来做到这一点。这仅对您有用，但足以用于家庭测试目的。

第三个选项是运行您自己的 DNS 服务器，并手动告诉它覆盖 xyz.com 的全球设置。这样，您的浏览器将在检查 DNS 服务器时获得您的自定义结果，并直接转发到您的服务器。但是，运行您自己的 DNS 服务器是一项复杂的工作，并且对于您当前的任务来说是多余的。

总之，从最好到最差：1）注册您的域并将其指向家 2）修改您的主机文件以绕过 DNS 检查 3）运行您自己的 DNS 服务器，并覆盖 xyz.com 的设置

希望这次我更清楚了：O）

# android-ndk - android-ndk，找不到 glGenVertexArraysOES

> ID：12490567
> 
> 赞同：6
> 
> 时间：2012-09-19T07:53:48.280
> 
> 标签：android-ndk, vertex-array

我想在我的 Android 原生 c 应用程序中使用 VAO。

问题是，这`GL_OES_vertex_array_object`是支持的，我什至可以得到地址，`glBindVertexArrayOES`但`glDeleteVertexArraysOES`找不到`glGenVertexArraysOES`。

的存在是否`GL_OES_vertex_array_object`意味着所有这些功能都可以访问？

我的 VAO 初始化代码：

```
std::string vao = "GL_OES_vertex_array_object";

if ( isExtensionSupported ( vao.c_str () ) != 0 )
{
    LOG ( vao << " supported" );
    glBindVertexArrayOES = (PFNGLBINDVERTEXARRAYOESPROC)eglGetProcAddress ( "glBindVertexArrayOES" );
    if ( !glBindVertexArrayOES )
        LOG ( "Can't get proc address: glBindVertexArrayOES" );

    glDeleteVertexArraysOES = (PFNGLDELETEVERTEXARRAYSOESPROC)eglGetProcAddress ( "glDeleteVertexArraysOES" );
    if ( !glDeleteVertexArraysOES )
        LOG ( "Can't get proc address: glDeleteVertexArraysOES" );

    glGenVertexArraysOES = (PFNGLGENVERTEXARRAYSOESPROC)eglGetProcAddress ( "glGenVertexArraysOES" );
    if ( glGenVertexArraysOES )
        LOG ( "Can't get proc address: glGenVertexArraysOES" );
}
else
{
    LOG ( vao << " not supported" );
} 
```

我当然收到日志消息

```
无法获取 proc 地址：glGenVertexArraysOES

```

我的`Android.mk`（缩短一点）：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := smart
LOCAL_SRC_FILES := Base/Node.cpp
...

LOCAL_LDLIBS    := -llog -landroid -lGLESv2 -lEGL
LOCAL_STATIC_LIBRARIES := nv_and_util

include $(BUILD_SHARED_LIBRARY)

$(call import-add-path, C:/NVPACK/TDK_Samples/tegra_android_native_samples_v10p00/libs/jni)
$(call import-module,nv_and_util) 
```

设备型号 Samsung i9003 与 Android 2.3.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-07T02:26:02.090

我刚刚测试了这个......

代替：

```
#include <GLES2/gl2ext.h> 
```

有了这个：

```
#define GL_GLEXT_PROTOTYPES
#include <GLES2/gl2ext.h> 
```

必须在包含 gl2ext.h 之前定义宏 GL_GLEXT_PROTOTYPES。无需明确定义功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-18T03:45:44.667

如果那真的是您的代码，那么错误是您缺少“！”。相比：

```
if ( !glDeleteVertexArraysOES ) 
```

至

```
if ( glGenVertexArraysOES ) 
```

# struts2 - 如何使用 Struts 2 Validator 验证 Action 中的对象字段

> ID：12490569
> 
> 赞同：-1
> 
> 时间：2012-09-19T07:54:02.867
> 
> 标签：struts2, validation

例如，EditAction 有 Object 提议，如何使用 Struts 验证框架来验证提议的字段。注释或 XML 配置？

```
<s:form action="/process/sample/Edit" >
  <s:select name="proposal.study" label="Study" list="#attr.studyTypeListKey" multiple="true" size="3" required="true" />
  <s:textfield name="proposal.familyNumber" label="Family Number" maxlength="20" required="true"/>
  <s:textfield name="proposal.individualNumber" label="Individual Number" maxlength="10" required="true"/>
  <s:textfield name="proposal.alpha" label="Alpha" maxlength="30" required="true"/>
  <s:submit value="Modify"/>
</s:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T09:27:04.227

请尝试此代码。可能是工作。

1.  请检查您的 xwork jar 版本和 Struts-core jar 。应该是一样的。

2.  字段名称和文本框名称应该相同。

# java - 从 JPA/Hibernate 调用 Sybase 存储过程

> ID：12490572
> 
> 赞同：1
> 
> 时间：2012-09-19T07:54:26.757
> 
> 标签：java, hibernate, jpa

我需要从 JPA 调用 Sybase 存储过程并将值返回到将用于填充另一个持久对象的瞬态对象。

这就是我所做的：

```
@Entity
public class CBSCustomer {
String cpr;
<--snipped-->

@Id
@Transient
public String getCpr() {
    return cpr;
}

<---snipped-->

} 
```

在 bean 中调用 SP：

```
List<CBSCustomer> fetchedCustomerList = getEmPhoenix().createNativeQuery("{call sp_name(?)}", CBSCustomer.class).setParameter(1, cprInput).getResultList();

if (fetchedCustomerList.size() > 0) {              
          CBSCustomer cbsCustomer = ((CBSCustomer)fetchedCustomerList.get(0));
          setDisabled(true);
      } 
```

不幸的是，我不断收到抱怨列名的错误，即“x 的列名无效”，其中 x 是我在 CBSCustomer 中的字段的占位符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:01:12.777

经过大量测试，这就是我的做法。我希望它可以帮助别人。

1）您必须为结果集映射创建一个@Entity POJO，并使用@Transient 注释所有字段。

2）您需要在该类中有一个 @ResultSetMapping 注释，例如

```
@SqlResultSetMapping(
name="CBSCustomer",
entities={
    @EntityResult(
        entityClass=CBSCustomer.class,
        fields={
            @FieldResult(name="name", column="Name"),
            @FieldResult(name="cpr", column="CPR"),
<--snipped-->
        }
    )
} 
```

3) 现在您可以调用存储过程并使用 createNativeQuery 中的“CBSCustomer”别名将其映射到该字段，例如

```
createNativeQuery("{call procedure(?)}", "CBSCustomer") 
```

# ios - 我应该在每个 UIViewController 中监听可达性更新吗？

> ID：12490578
> 
> 赞同：9
> 
> 时间：2012-09-19T07:54:48.733
> 
> 标签：ios, reachability

我看到很多可达性示例，其中人们只在可达性状态更改时显示一条消息。
但最近，我在 Foursquare 应用程序中看到，每当用户尝试执行需要 Internet 连接的操作时，它们都会显示一条消息。
我认为这是更强大和更好的用户体验，可以提醒用户他不能在没有互联网的情况下做任何事情。主要是因为用户可以在应用程序之间切换，做其他事情，而当他回来时忘记他没有连接。
同样，只要他们恢复连接，我就可以看到他们从 Internet 获取数据并刷新 UI。

我真正在寻找的是做到这一点的最佳方法。这是怎么做到的？
他们是否有一个通用的 UIViewController 可以在每次需要连接时检查可达性？
或者他们在每个 Internet 请求之前都有一种代理类来取消请求并显示一条消息？你们是怎么处理的？

谢谢。

编辑：

我想出的解决方案是使用 AFNetworking，它还在框中提供可达性状态。
基本上我创建了一个 AFHTTPClient 并在其上设置了一个可达性回调块来监听状态变化。AFHTTPClient 对象是应用程序范围的（一种单例）。（实际上，我需要访问 a.com、b.com 的每个主机都有一个 AFHTTPClient ...）。

然后，当我需要执行一个请求时，我创建一个新的 AFHTTPRequestOperation（在我的情况下为 AFJSONRequestOperation），并将它排入我的 AFHTTPClient 对象。在操作的失败块中，我检查是否可以使用`networkReachabilityStatus`AFHTTPClient 的属性访问主机。如果无法访问，我会显示一条消息，指出用户没有互联网连接。

我把它包起来了，所以我不必每次创建操作时都这样做。所以现在在应用程序中，每次用户在没有连接的情况下尝试做某事时，他都会收到一条消息，提醒他他无法访问互联网。
一旦我恢复连接（或者更确切地说，一旦我应该有一个连接），我也会使用可达性回调在屏幕上重新加载数据。
我不知道这是否是最佳做法，但我认为很高兴知道该应用程序会在新连接可用时立即重新加载重要数据。

如果有人对示例代码感兴趣，我可以提供。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-19T08:17:55.790

在今年的 WWDC 演讲中，舞台上的 Apple 工程师建议用户不要将应用程序的 Internet 访问建立在 Reachability 示例应用程序状态的基础上。可达性通常不能提供完整的信息（它基于复杂的机制），工程师提供的建议是这样的：

1.  尝试进行互联网连接，无论可达性状态如何；然后根据成功/失败结果设置您的 UI 提示
2.  如果由于网络问题而失败，则注册到 Reachability 并在 Reachability 亮绿灯时重试；当您想从失败条件中自动恢复时，这是需要的
3.  无论如何，无论可达性状态如何，都可以让用户“强制重试”。如果成功，请立即重置您的 UI 提示。

Apple 工程师所说的完全正确：当互联网连接完全正常时，您经常可以在控制台日志中看到可达性失败消息。

另一件事：没有比状态栏中显示的更好的“网络提示”了：如果那里有 wi-fi 图标、3G/4G 图标、蜂窝场强。

回到你原来的问题：没有绝对更好的方法来管理这些东西，这在很大程度上取决于应用程序架构。如果您希望将网络内容集中在一个专用类（不是 UIViewController 而是 NSObject 子类）中，那么为该类定义一个只读属性是有意义的，该属性在最新的互联网连接后更新为“成功/失败”使用服务器应用程序（ping 其他服务器（如 Google 或 Apple）是没有意义的：首先它并不优雅，其次问题可能来自为应用程序提供服务的服务器，而不是设备的互联网连接状态！）。

```
@property (readonly) BOOL lastConnectionToMyServerSuccess
```

然后，您的视图控制器可以注册（通过 KVO 或通过中央通知）此属性更改并通过显示图标或其他方式相应地更新其 UI（我重复一遍：让用户可以手动尝试连接到 Internet）。视图控制器应在看不见时（“viewWillDisappear:”）或卸载（“viewDidLoad:”）或释放时从 KVO 注销。

当然，这增加了一些额外的复杂性。例如：您使用该应用程序，互联网指示灯为绿色。然后你暂停它，做其他事情，几分钟后你回到应用程序。在这种情况下，应用程序应该 ping 您的服务器以再次恢复互联网灯状态，因为几分钟后网络状况可能会发生变化（例如，您在火车上）。在任何情况下，所有加载的视图控制器都会从网络专用类获得 KVO 通知并更新自己。

# c# - 签署多部分/替代电子邮件，toDigest 字符串是什么？

> ID：12490582
> 
> 赞同：0
> 
> 时间：2012-09-19T07:55:02.993
> 
> 标签：c#, email, multipart, sign

以下用于签名的电子邮件示例的正文部分是什么？

```
------=_NextPart_000_005C_01CD9649.B405A420
Content-Type: multipart/alternative;
boundary="----=_NextPart_001_005D_01CD9649.B405A420"

------=_NextPart_001_005D_01CD9649.B405A420
Content-Type: text/plain;
charset="iso-8859-2"
Content-Transfer-Encoding: 7bit

test

------=_NextPart_001_005D_01CD9649.B405A420
Content-Type: text/html;
charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable

<html>
.....
</html>
------=_NextPart_001_005D_01CD9649.B405A420--

------=_NextPart_000_005C_01CD9649.B405A420 
```

我正在使用 C# 电子邮件库，对于多部分/替代电子邮件，在调用时会出现错误“哈希值不正确”：

```
Smime.CheckSignature(true) 
```

这意味着它会为电子邮件正文的错误部分计算哈希值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:29:51.833

所以，经过几个小时的尝试，这就是答案：

```
------=_NextPart_000_005C_01CD9649.B405A420
*Content-Type: multipart/alternative;
*boundary="----=_NextPart_001_005D_01CD9649.B405A420"
*
*
*------=_NextPart_001_005D_01CD9649.B405A420
*Content-Type: text/plain;
*charset="iso-8859-2"
*Content-Transfer-Encoding: 7bit
*
*test
*
*
*------=_NextPart_001_005D_01CD9649.B405A420
*Content-Type: text/html;
*charset="iso-8859-2"
*Content-Transfer-Encoding: quoted-printable
*
*<html>
*.....
*</html>
*------=_NextPart_001_005D_01CD9649.B405A420--
*
------=_NextPart_000_005C_01CD9649.B405A420 
```

以 * 开头的行是要散列的消息正文（字符串 toDigest）。包括最后的新线！所以在这里：

```
Smime = new SignedCms(new ContentInfo(Encoding.ASCII.GetBytes(toDigest)) 
```

# testing - Visual Studio 负载测试不断发送请求

> ID：12490584
> 
> 赞同：1
> 
> 时间：2012-09-19T07:55:23.020
> 
> 标签：testing, web, load, visual-studio-2005, load-testing

几天前我开始使用 Visual Studio 负载测试。我正在调用一个 URL 并获得平均响应时间结果。我的问题是我希望测试工具发送 1 个用户 1 个请求。但是测试工具每 5 秒发送 1 个请求。如何限制总请求数。我想将我的代码连接到一个包含 2000 条记录的 MDB 文件。我希望 1 个用户一一发送这 2000 条记录。

我当前的代码如下。请帮忙。

此致

```
public override IEnumerator<WebTestRequest> GetRequestEnumerator()
    {
        WebTestRequest request;

        if (true)
        {
            request = new WebTestRequest("http://192.168.1.36:8888/webgis_net/wms.ashx?NCWS=OGM&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&BBOX=30.4181109599491,40.4702930755111,30.4195710292824,40.4717531448444&SRS=EPSG:4326&WIDTH=256&HEIGHT=256&LAYERS=Uydu,ILCELER,ILLER,MAHALLE_HAT,CASN,ORMAN,ORMAN_HAT,B2,B2_HAT,ZIRAAT,ZIRAAT_HAT,SU,SU_HAT,NOKTA,OSN&FORMAT=image/png");
            request.Method = "GET";
            request.Timeout = 180;
            yield return request;

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:09:00.673

当您创建新`Load Test`的时，请在以下内容中执行以下操作`New Load Test Wizard`：

1.  在`Load Pattern`选项卡中检查`Constant Load`选项并设置`User Count`= 1
2.  在`Test Mix Model`选项卡中检查`Bases on the number of tests`选项
3.  在`Test Mix`选项卡中仅添加您想要的 Web 测试
4.  在`Run Settings`选项卡中检查`Test Iterations`选项并设置`Test Iterations`= 2000

通过这种方式，将只创建一个虚拟用户，并且测试（2000）将一个接一个，但不会同时进行

# php - 我的网络浏览器下载的图像在哪里

> ID：12490593
> 
> 赞同：-1
> 
> 时间：2012-09-19T07:55:58.607
> 
> 标签：php, javascript, html, http

伙计们，如果我们在服务器上请求一个站点以及一些图像，那么这些图像也来自服务器。

我们是否也要求提供这些图像？我的意思是那些图像是否被转移到我们的硬盘上？因为如果没有，那么我们请求的站点中的代码将没有图像可以参考，我的意思是这些图像没有保存在浏览器上，浏览器只有图像名称来引用原始图像。

如果是，那么我可以从服务器上找到这些下载的图像吗？？？

**编辑，试图理解这个问题**

当浏览器请求一个网页的副本时，它是否也下载了所需的图像？当它只有一个文件名时它是如何做到这一点的。

如果它确实下载了图像，它会在硬盘驱动器的哪个位置保存它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:05:54.937

当您访问一个网页时，它的图像会下载到您的计算机互联网临时文件中，以便您的浏览器能够呈现它，它们也存储在临时文件中以缓存它们，因此下次您访问该网页时无需重新下载它们并可以更快地呈现整个页面。

请记住，使用来自外部站点的图像可能是非法的或导致侵犯权利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:09:20.593

当您请求完整的网页时，浏览器会下载所需的任何图像。

这些图像可能会也可能不会保存在本地硬盘上。许多浏览器都有一个`privacy mode`这意味着没有任何东西被写入磁盘。此外，远程 Web 服务器可能会要求浏览器不要保存它们。

在 Internet Explorer 下，图像位于您的 Internet 临时文件中。谷歌，因为它会随着 Windows 版本的变化而改变位置。

在 Firefox 下，它们存储在您的`profile`目录中。同样，该目录的位置也发生了变化。

文件名很少（如果有的话）与 HTML 中给出的图像名有任何关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:09:32.087

是的，如果您访问一个网页并且该网页包含图像，那么这些图像会下载到您的硬盘驱动器，以便它们可以显示在浏览器中。

我不会说“Google it”，但在这种情况下，只需[一点点研究](http://en.wikipedia.org/wiki/Web_cache)就会有很长的路要走。

# c# - C# 代码复制文件，这个片段可以改进吗？

> ID：12490594
> 
> 赞同：1
> 
> 时间：2012-09-19T07:56:06.300
> 
> 标签：c#, asp.net, algorithm

通过本地 LAN 共享复制大约 50 GB 的数据时，由于连接问题，复制在大约 10 GB 时失败。

我已将复制的 10GB 数据目录重命名为 localRepository，然后编写了一个 C# 程序将文件从远程服务器复制到目标，前提是在本地存储库中找不到它。如果找到将文件从本地存储库移动到目标文件夹。

尽管代码运行良好并且很好地完成了任务。我想知道，我是否编写了最有效的代码？你能找到任何改进吗？

```
string destinationFolder = @"C:\DataFolder";
        string remoteRepository = @"\\RemoteComputer\DataFolder";
        string localRepository = @"\\LocalComputer\LocalRepository";

        protected void Page_Load(object sender, EventArgs e)
        {
            foreach (string remoteSrcFile in Directory.EnumerateFiles(remoteRepository, "*.*", SearchOption.AllDirectories))
            {
                bool foundInLocalRepo = false; ;
                foreach (var localSrcFile in Directory.EnumerateFiles(localRepository, "*.*", SearchOption.AllDirectories))
                {

                    if (Path.GetFileName(remoteSrcFile).Equals(Path.GetFileName(localSrcFile)))
                    {
                        FileInfo localFile = new FileInfo(localSrcFile);
                        FileInfo remoteFile = new FileInfo(remoteSrcFile);

                        //copy this file from local repository
                        if (localFile.Length == remoteFile.Length)
                        {
                            try
                            {
                                File.Move(localSrcFile, PrepareDestinationPath(remoteSrcFile));
                                Debug.WriteLine(remoteSrcFile + " moved from local repo");
                            }
                            catch (Exception ex)
                            {
                                Debug.WriteLine(remoteSrcFile + " did not move");
                            }
                            foundInLocalRepo = true;
                            break;
                        }
                    }
                }
                if (!foundInLocalRepo)
                {
                    //copy this file from remote repository
                    try
                    {
                        File.Copy(remoteSrcFile, PrepareDestinationPath(remoteSrcFile), false);
                        Debug.WriteLine(remoteSrcFile + " copied from remote repo");
                    }
                    catch (Exception ex)
                    {
                        Debug.WriteLine(remoteSrcFile + " did not copy");
                    }

                }
            }
        }

        private string PrepareDestinationPath(string remoteSrcFile)
        {
            string relativePath = remoteSrcFile.Split(new string[] { "DataFolder" }, StringSplitOptions.None)[1];
            string copyPath = Path.GetFullPath(destinationFolder + relativePath);
            Directory.CreateDirectory(Path.GetDirectoryName(copyPath));
            return copyPath;
        } 
```

**编辑：**

根据 Thomas 给出的回答，我正在尝试压缩文件。传统上，作为最终用户，我们使用压缩文件然后复制。作为程序员，我们可以并行压缩和复制文件吗？我的意思是已经压缩的部分通过电线发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:01:15.107

您对嵌套循环做了太多的工作。

您应该删除内部“foreach”并将其替换为以下代码：

(1) 构造您要查找的文件的名称并

(2) 使用 File.Exists() 查看是否存在，然后

(3) 继续使用您当前在“if (Path.GetFileName(remoteSrcFile)...”条件下拥有的相同代码块。

像这样的东西：

```
foreach (string remoteSrcFile in Directory.EnumerateFiles(remoteRepository, "*.*", SearchOption.AllDirectories))
{
    string localSrcFile = Path.Combine(localRepository, Path.GetFileName(remoteSrcFile));

    if (File.Exists(localSrcFile))
    {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:02:11.860

我建议在移动之前压缩文件。试试看一下非常简单的[http://dotnetzip.codeplex.com/](http://dotnetzip.codeplex.com/)

尝试一次压缩 1000 个文件，这样您就不必多次运行 for 循环并每次都建立新的连接等。

# matplotlib - Matplotlib 表：单个列宽

> ID：12490596
> 
> 赞同：4
> 
> 时间：2012-09-19T07:56:15.357
> 
> 标签：matplotlib

有没有办法指定 matplotlib 表中各个列的宽度？

我表中的第一列只包含 2-3 位数字 ID，我希望这一列比其他列小，但我似乎无法让它工作。

假设我有一张这样的桌子：

```
import matplotlib.pyplot as plt

fig = plt.figure()
table_ax = fig.add_subplot(1,1,1)

table_content = [["1", "Daisy", "ill"],
                 ["2", "Topsy", "healthy"]]
table_header = ('ID', 'Name','Status')

the_table = table_ax.table(cellText=table_content, loc='center', colLabels=table_header, cellLoc='left')

fig.show() 
```

（别介意奇怪的裁剪，它不会发生在我的真实桌子上。）

我试过的是这样的：

```
prop = the_table.properties()
cells = prop['child_artists']

for cell in cells:
    text = cell.get_text()
    if text == "ID":
        cell.set_width(0.1)
    else:
        try:
            int(text)
            cell.set_width(0.1)
        except TypeError:
            pass 
```

上面的代码似乎效果为零——列的宽度仍然相同。（`cell.get_width()`返回`0.3333333333`，所以我认为这`width`确实是单元格宽度......那我做错了什么？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-29T09:24:47.543

我一直在网上一遍又一遍地寻找类似的问题解决方案。我找到了一些答案并使用了它们，但我并没有很直接地找到它们。偶然我只是在尝试不同的表方法时发现了表方法 get_celld 。通过使用它，您可以获得一个字典，其中的键是对应于单元格位置的表坐标的元组。所以通过写

```
cellDict=the_table.get_celld()
cellDict[(0,0)].set_width(0.1) 
```

您只需处理左上角的单元格。现在循环遍历行或列将相当容易。

答案有点晚，但希望其他人可以得到帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-17T08:05:49.237

只为完成。列标题以 (0,0) ... (0, n-1) 开头。行标题以 (1,-1) ... (n,-1) 开头。

```
 ---------------------------------------------
                  | ColumnHeader (0,0)  | ColumnHeader (0,1)  |
                  ---------------------------------------------
rowHeader (1,-1)  | Value  (1,0)        | Value  (1,1)        |
                   --------------------------------------------
rowHeader (2,-1)  | Value  (2,0)        | Value  (2,1)        |
                   -------------------------------------------- 
```

编码：

```
for key, cell in the_table.get_celld().items():
    print (str(key[0])+", "+ str(key[1])+"\t"+str(cell.get_text())) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:42:08.460

条件`text=="ID"`总是`False`，因为`cell.get_text()`返回一个`Text`对象而不是一个字符串：

```
for cell in cells:
    text = cell.get_text()
    print text, text=="ID"  # <==== here
    if text == "ID":
        cell.set_width(0.1)
    else:
        try:
            int(text)
            cell.set_width(0.1)
        except TypeError:
            pass 
```

另一方面，`cells`直接解决问题：try `cells[0].set_width(0.5)`.

编辑：`Text`对象`get_text()`本身有一个属性，所以可以像这样进入一个单元格的字符串：

```
 text = cell.get_text().get_text() # yup, looks weird
    if text == "ID": 
```

# javascript - 使 div 中的内容不可编辑（可点击）

> ID：12490597
> 
> 赞同：0
> 
> 时间：2012-09-19T07:56:15.423
> 
> 标签：javascript, jquery, html

我不知道这是否可能。

我有一个动态表单，其中包含动态创建的内容。每次单击按钮时，都会添加一个新的 div 元素。而我想做的就是让之前的div不可编辑，也就是输入字段不能用，按钮不能点击。

可行吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T08:02:32.633

尝试这样的事情：

```
// Disable all input-like elements in the divs except for the last div
$(".divclass:not(:last-child) :input").attr("disabled", true); 
```

`divclass`你提到的div的类在哪里。

示例：http: [//jsfiddle.net/grc4/LrxkU/2/](http://jsfiddle.net/grc4/LrxkU/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:11:07.030

可能是这样的吗？[http://jsfiddle.net/ng4Ct/2/](http://jsfiddle.net/ng4Ct/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:59:59.233

如果您可以访问以前的 div 元素，则可以向它们添加属性 disabled="disabled" 。

您可以在同一个按钮单击功能上触发将禁用属性添加到所需元素的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T08:00:01.200

好吧，您可以访问 DIV 中的特定元素并使用 Javascript 禁用它们，或者您可以访问 DIV 然后循环遍历其中的所有元素（可能更可取），并使用 Javascript 自动禁用它们。

当然这取决于你的代码是如何编写的，你能提供一些生成DIV的代码吗？

# embedded - 微控制器接口

> ID：12490601
> 
> 赞同：2
> 
> 时间：2012-09-19T07:56:42.100
> 
> 标签：embedded, microprocessors

我是嵌入式编程领域的新手，我正在寻找有关使用 I2C、USB、UART、CAN 等与微控制器接口的信息。有人知道关于这个主题的任何好的链接、书籍、教程吗？因为我是这个主题的真正新手，所以我更喜欢它尽可能基本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:36:13.513

Wikipedia 确实是一个很好的起点，可以学习围绕这些机制中的每一个的基础知识。

一旦掌握了，我建议您查看具有其中一些功能的微控制器的实际数据表和用户指南。例如，[这款](http://www.microchip.com/wwwproducts/Devices.aspx?dDocName=en542037)16 位 PIC 具有专用的 UART、I2C 和 SPI 总线。查看文档的相关部分，借助您对基本原理的新知识，您将开始了解如何设计使用它们的系统。

下一步是为这种设备购买一个开发板，然后使用示例代码（其中有很多），自己编写一些数据链路。顺便说一句，UART 无疑是最容易测试的，因为所有 PC 都可以使用 RS-232 协议从终端进行传输，因此在这种情况下，您可以编写一个环回来相对轻松地传输和接收字符。但是，对于 I2C 和 SPI，我认为您需要购买专用的[主机加密狗](http://www.totalphase.com/products/aardvark_i2cspi/)以允许您使用协议进行传输，尽管我认为 Windows 8 可能会引入本机支持（但不要引用我的话）。

我没有使用 CAN 实现数据链路，所​​以我不能具体评论，虽然我只是做了一个快速的谷歌搜索并且有一个支持它的 PIC 系列，所以我相信你可以遵循类似的方法。至于 USB，我认为它有点像魔法，所以我会让其他人来回答这个问题 - 虽然我知道你可以为 PIC 获得 USB 软件堆栈，所以同样，可能会遵循类似的方法.

最后一点，我只提到了 PIC 作为示例微控制器。如果您一般不熟悉微控制器，您很快就会意识到 Microchip、TI 和 Atmel 等公司的所有主要微控制器系列通常都遵循相同的设计，所以我会浏览并选择为您提供文档的系列最舒服（或者最不不舒服，正如马丁詹姆斯所建议的那样！）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T08:38:05.700

由于您已经是桌面开发人员，因此您可能会跳到中间的某个地方。下载您计划使用的控制器的用户手册。从制造商等网站获取更简单的外围设备之一的示例代码 - UART 很好。

获取一个开发板和一个 Eclipse/Crossworks/任何支持您的开发板的开发系统，并让一些东西工作 - 闪光灯 LED、UART 回声等。不要尝试首先使用多任务程序和中断驱动程序 - 只需使用尽可能少的代码行轮询 UART。为什么——因为仅仅获得一个开发设置来编译、链接、下载和运行一行代码本身就是一项相当大的练习，而复杂的代码不会带来任何复杂性。在您可以有效地编写/调试控制器的任何代码之前，您首先要调试您的开发设置和硬件。仅仅获得仅仅让板载 LED 闪烁即可工作的“闪烁”代码是向前迈出的一大步：)

大多数控制器都有专门的组/博客，要么在 uC 制造商网站上，要么从它链接 - 加入他们。

如果您想有效地进行此操作，请获得一块板并尝试让它做某事-没有更好的方法。一旦您可以让 LED 闪烁或 UART 发出一串字符，您就可以参加比赛了：）

开发简单的 'blinky' 或 UART-polling 函数不会浪费——你可以在以后有更复杂的代码时继续使用它们。使 LED 闪烁（延迟循环被 OS 睡眠取代）是一个很好的指标，表明代码正在运行，我一直将其保留在交付的系统中。UART 轮询也很有用 - 它将在没有任何中断的情况下运行，因此您可以从数据/预取/任何中止向量中调用它来发出许多“严重错误 - 系统暂停”消息，您将在正在进行的开发过程中收到这些消息：)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T08:47:32.640

在大多数情况下，您想要使用的微控制器的数据表或参考手册就是您所需要的。每个供应商都将以不同的方式实现这些接口，因此这是您获得低级编程信息的唯一权威来源。

I ² C和UART比较简单，没有标准的高层协议栈；这将由您或您可能连接的设备定义。您的微控制器供应商几乎肯定会提供示例代码和/或应用说明。

CAN 更复杂，通常 CAN 网络使用更高级别的应用协议，其中有几个用于不同的应用领域，例如 CANopen、NMEA2000、DeviceNet、IEC J1939 等。大多数情况下，第三方库是实现应用程序协议栈的最具成本效益的方法，但如果网络仅包含您正在实现的设备，则可能不需要这种复杂性。同样，您的微控制器供应商可能有示例。

[USB实施者论坛](http://www.usb.org/home)对 USB进行了非常严格的定义，并且协议栈是不平凡的。大多数具有片上 USB 接口的微控制器供应商都会提供至少设备级 USB 的示例代码和应用说明。USB 主机堆栈更复杂，而且使用第三方库（相对昂贵）也是最快的上市方式。否则您必须支付 USB IF 的费用可能会使编写您自己的主机堆栈的成本不低。即使是 USB 设备接口，您也需要 USB IF 提供 2000 美元的 USB 供应商 ID。一些微控制器和库供应商将允许您以很少或免费的成本将他们的供应商 ID 用于定义的产品 ID 子集，但就数量而言，您可能必须是重要客户。对于内部实验，您可能无需官方 VID 就可以逃脱，

# android - 如何在这一行中设置忽略大小写敏感？

> ID：12490602
> 
> 赞同：-1
> 
> 时间：2012-09-19T07:56:42.330
> 
> 标签：android

如何在字符串包含中设置区分大小写？这是我下面的代码比较字符串我如何在这一行中设置忽略大小写敏感？我的应用程序检查字符串接收中的字符串是否包含“LOGIN”我如何添加忽略大小写敏感，以便八个字符串包含“登录”或“登录”它的启动应用程序？

```
 public void onReceive(Context context, Intent intent) 
{

abortBroadcast();
    //---get the SMS message passed in---a
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String str = "";  

    if (bundle != null)
    {

        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                

            String phNum = msgs[i].getOriginatingAddress();  

            str += msgs[i].getMessageBody().toString();
            if (specificPhoneNumber.equals(phNum))

            {
                Uri uri = Uri.parse("content://sms/inbox");

                ContentResolver contentResolver = context.getContentResolver();

                String where = "address="+phNum;
                Cursor cursor = contentResolver.query(uri, new String[] { "_id",   
     "thread_id"}, where, null,
                                  null);

                while (cursor.moveToNext()) {

                    long thread_id = cursor.getLong(1);
                    where = "thread_id="+thread_id;
                    Uri thread = Uri.parse("content://sms/inbox");
                    context.getContentResolver().delete(thread, where, null);

                }

              if (str.contains("LOGIN"))
                      {

                Intent l = new Intent(context,AgAppMenu.class);

            l.putExtra("msg",str);

                l.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(l);

                      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:58:13.843

```
String str="LOGIN" 
```

`str.toLowerCase`给出“登录”

所以现在你要做的就是检查“登录”（因为现在一切都是小写的）

```
if (str.toLowerCase().contains("login")) //This works for "login, Login, LOGIN ..." 
```

@karn 提到`s.equalsIgnoreCase("login")`如果你想要平等，女巫会更时尚。

如果你真的去`s.equalsIgnoreCase("login")`。

如果要检查登录/登录是否在字符串中，请使用`if (str.toLowerCase().contains("login"))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:59:59.297

尝试以下操作：

```
if (str.contains("LOGIN")||str.contains("login")) 
```

或尝试：

```
if (str.equalsIgnoreCase("login)); 
```

# jpa-2.0 - Camel-case column-names：如何在 EclipseLink 中生成带有下划线的 sql 列，如 Hibernates ImprovementNamingStrategy 所做的

> ID：12490607
> 
> 赞同：2
> 
> 时间：2012-09-19T07:56:57.673
> 
> 标签：jpa-2.0, eclipselink

我正在从 Hibernate 迁移到 EclipseLink。

我意识到的是，Hibernates ddl-generation 为驼峰式列创建下划线分隔的 sql 列

```
<property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy" /> 
```

在我的persistence.xml 中。我非常喜欢那个。

我的问题是：我怎样才能让 EclipseLink 做到这一点？

强尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:26:59.440

我找到了解决方案。您必须使用 EclipseLink Session-Customizer 类。
在这里解释（如果您向下滚动该页面，则以示例为例）：[http ://dev.eclipse.org/mhonarc/lists/eclipselink-users/msg00094.html](http://dev.eclipse.org/mhonarc/lists/eclipselink-users/msg00094.html)

强尼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T08:25:42.163

分叉这个[https://gist.github.com/iromu/6864061](https://gist.github.com/iromu/6864061)。数字不被识别为用下划线包围的字符，您可以使用 @Column(name="") 覆盖映射

# java - 使用种子的 Java 随机数生成器

> ID：12490609
> 
> 赞同：0
> 
> 时间：2012-09-19T07:57:07.143
> 
> 标签：java, random, seed

> **可能重复：**
> [当我设置种子时，Java random 总是返回相同的数字？](https://stackoverflow.com/questions/5533191/java-random-always-returns-the-same-number-when-i-set-the-seed)
> [使用种子的 Java 随机数](https://stackoverflow.com/questions/12458383/java-random-numbers-using-a-seed)

**嗨，这是我的代码。我正在尝试使用种子（即 15416640）同时生成 2 个随机数。生成的数字并不是真正随机的。**

```
Random radiusGenerator = new Random(15416640);

Random angleGenerator = new Random(15416640);

try
{
    for(int i=1; i<=sequenceNumber; i++)
    {
        double radius =  (0.5 - (0.5 * Math.sqrt(1-radiusGenerator.nextDouble())));
        double angle = angleGenerator.nextDouble();
        angle = angle*(Math.PI*2);

        System.out.print(radius+"      "+ angle +"\n");
     } 
```

**请帮助...谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:58:41.263

这是完全正常的，也是一个特点：在[Pseudo Random Generator](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)中，种子定义了将生成的数字序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:58:52.657

使用一个`Random`对象，并生成您想要的一切。由于您使用相同的种子初始化 2 个`Random`对象，因此如果您使用相同的方法调用它们，它们将生成相同的数字。

# android - Android在gridview上显示数据

> ID：12490611
> 
> 赞同：0
> 
> 时间：2012-09-19T07:57:24.760
> 
> 标签：android, database, gridview

我的数据库中有一些数据，我想在 android 手机中显示它。我想在 Grid-view 上显示我的数据，因为我的数据存在连续变化，因此我想在 android 中显示，如 asp.net gridivew。请任何人都可以帮助我执行此操作或任何示例代码来执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:00:02.673

你需要有两件事`Gridview`：

1.  `Gridview`在布局中使用组件。

2.  对方法中的元素进行膨胀，`getView`并按位置将元素设置为`Gridview`项目。

您可以点击此链接了解它：

[http://android-coding.blogspot.in/2011/09/simple-gridview-example.html](http://android-coding.blogspot.in/2011/09/simple-gridview-example.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:13:50.127

您已决定使用动态视图来处理不同的数据，因此您走在了正确的轨道上。您可以使用任何一种动态视图（列表视图、网格视图、图库等），具体取决于您需要显示的数据类型。
如果您不熟悉这些动态视图，那么您应该首先阅读一些有关这些视图实现的教程。首先尝试使用一个基本程序来理解这些概念。一旦你清楚了这些概念，那么你需要做的就是用从数据库中获取的数据替换下面的数据。网上有很多教程。以下是一些链接：

*   [GridView 教程](http://www.mkyong.com/android/android-gridview-example/)
*   [列表视图教程](http://www.mkyong.com/android/android-listview-example/)

如有任何疑问，请随时讨论。

# php - Drupal CMS 还是 CMF？

> ID：12490615
> 
> 赞同：3
> 
> 时间：2012-09-19T07:57:38.697
> 
> 标签：php, drupal, content-management-system

你能解释一下什么是 Drupal 吗？CMS 还是 CMF？

谷歌搜索 CMS 和 CMF 的差异我知道有框架、CMF 和 CMS。使用框架我可以创建 CMF 和 CMS，使用 CMF 我可以创建 CMS。CMF 只是基于框架（或不是）的平台，包括一些基本的东西，如应用程序结构、授权等。

我错了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T08:12:12.030

Drupal 都根据维基百科：

[内容管理系统](http://en.wikipedia.org/wiki/Content_management_system)：

> 内容管理系统 (CMS) 是一种计算机程序，允许在网站上发布、编辑和修改内容以及从中央页面进行维护。

[CMF](http://en.wikipedia.org/wiki/List_of_content_management_frameworks)：

> 内容管理框架 (CMF) 是一种便于使用可重用组件或定制软件来管理 Web 内容的系统。

无需进一步论证，我想可以肯定地说 Drupal 符合上述两个定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T08:11:08.953

根据我对 Drupal 6 的经验，我会说它是“CMS++”：您拥有所有常用的 CMS 功能（文档、规则、工作流、用户管理、模板等）。多年来，它的设计一直在改进，使其非常可扩展。因此，任何时候您需要额外的功能并且有人还没有为您编写，您可以自己编写一些 PHP 并挂接到扩展点。不涉及黑客攻击。

从理论上讲，没有什么可以阻止您将 Drupal 用作 CMF 并编写一堆扩展。但我会说，如果您的网站不是以内容为导向的，那可能是矫枉过正。

# asp-classic - 经典 ASP 中的编码/加密

> ID：12490620
> 
> 赞同：0
> 
> 时间：2012-09-19T07:57:50.983
> 
> 标签：asp-classic, character-encoding

我有两个网页，/default.asp 和 /mobile/default.asp。

两个页面都有以下声明：

meta http-equiv="Content-Type" content="text/html;charset=utf-8"

此外，两个页面都使用相同的包含文件，该文件提供对某些字符串加密和解密功能的访问。

我遇到的问题是，当使用相同的密钥对相同的字符串进行加密时，使用相同字符集编码和相同加密函数的两个页面会给出两个不同的字符串。

有任何想法吗？不正确的输出包含许多带有问号的黑色菱形。在 HEX 中，这些显示为 FD FF。

附加 - 加密数据存储在 SQL 数据库中，这就是我看到两种不同加密结果的方式。

因此，它具有相同的加密功能，输出位于同一个 SQL 数据库中，但来自两个不同的 asp 页面（但它们使用相同的字符集）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:33:29.210

您可以将服务器端代码页设置为 UTF-8 如下：

```
<%@ Language="VBSCRIPT" CODEPAGE="65001"%> 
```

或者

```
<% 
Response.CodePage = "utf-8"
%> 
```

保持输出与代码页相同是很常见的。输出是您使用元标记设置的内容，也可以设置如下：

```
<% 
Response.Charset = "utf-8"
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:03:24.067

经过大约 8 小时的反复试验，我设法找到了问题所在。

ASP 页面本身已创建并保存为 UTF-8 编码，它需要是没有 BOM 的 UTF-8

# ruby - 如何在 Ruby 文件中包含模板部分

> ID：12490621
> 
> 赞同：-1
> 
> 时间：2012-09-19T07:58:01.973
> 
> 标签：ruby, ruby-on-rails-3

我正在使用一个 ruby​​ 网站应用程序，但我不熟悉 Ruby，我想知道你如何在 html 文件中包含一个导航模板文件，我熟悉你如何在 PHP 中使用 require

所以这将包括每个页面上的导航部分，在 Ruby 中执行此操作的代码是什么

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:15:10.407

如果您使用**erb**生成 html，则必须添加到相应的 .erb 文件（在 /app/views/*/ 中）：

```
<%= render 'nav' %> 
```

然后文件 *_nav.html.erb* 将在该点被包含（来自包含文件所在的同一目录）。

# c++ - c++ size_t在linux中定义在哪里

> ID：12490622
> 
> 赞同：16
> 
> 时间：2012-09-19T07:58:07.457
> 
> 标签：c++

现在我正在谈论程序员使用 typedef 关键字定义的新类型。只要我的学生习惯了 size_t 类型（例如通过使用函数 length ()），我不得不让他们稍微努力“相信”它是一个整数类型，我认为它会很棒向他们展示定义此类型的位置。

所以，我在 Ubuntu 盒子的 /usr/include 中做了很多 grep，我看到 size_t 是 size_type 的重新定义，而 size_type 又是 metadata_type 的重新定义，这就是本文的结尾目录。未找到最终的“typedef unsigned int metadata_type;”。

在 /usr/src 中，我发现了另一种名为 yy_size_t 的先前类型，...

但是，无论如何，我一直无法到达链条的尽头。

有谁知道在哪里可以找到最终定义以检查它是否是无符号整数（或类似的）？我可能会错过我盒子里的开发包吗？在这种情况下，为什么我能够使用 size_t 类型编译程序？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-19T08:08:59.620

您可以尝试使用 C 预处理器 ( `cpp`) 手动扩展标准包含文件并检查其输出：

```
$ echo '#include <stdlib.h>' | cpp -I/usr/include - > stdlib-expanded.c 
```

您会发现`cpp`even 的输出包括标记，以指示代码`stdlib-expanded.c`已包含在哪些文件中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T08:42:14.770

gcc 提供了一些头文件，这与此处相关：`size_t`定义在`stddef.h`哪个头文件中。例如，在`/usr/lib/x86_64-redhat-linux/4.1.1/include/stddef.h`. 那里的定义`size_t`是

```
typedef __SIZE_TYPE__ size_t; 
```

`__SIZE_TYPE__`是一个编译器预定义的宏（它允许确保编译器和头文件一致，并且编译器期望的取决于它的参数——例如 -m32 它是一个无符号的 32 位位，而 -m64 是一个无符号的 64位类型——使标头独立于编译器参数）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T08:33:24.467

正如其他人所写，如果您搜索所有包含文件，您可能会找到它。但是，不能保证这是大多数实现的工作方式这一事实。

标准规定，例如，`#include <stddef.h>`应该提供一个`size_t`必须是无符号整数类型的定义。但它也表示不需要一个名为*stddef.h*的文件存在于文件系统的任何位置。甚至提供了这样一个文件但该文件只包含以下行的实现

```
#pragma stdlib_stddef_h 
```

如果上述编译指示有效地提供了标准对该标头的规定，则将完全符合要求。

换句话说， size_t 是一个无符号整数类型，因为这是标准所说的，而不是因为这是您可以在头文件中读取的内容。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-19T08:33:39.047

为了完整起见，您是否考虑过简单地询问 C++ `size_t`？

```
#include <iostream>
#include <cstddef>
#include <limits>

int main()
{
    std::cout << "sizeof(size_t) = " << sizeof(std::size_t) << std::endl;
    std::cout << "is size_t an integer? " <<
        (std::numeric_limits<std::size_t>::is_integer ? "yes" : "no")
        << std::endl;
    std::cout << "is size_t signed? " <<
        (std::numeric_limits<std::size_t>::is_signed ? "yes" : "no")
        << std::endl;
} 
```

给我

```
sizeof(size_t) = 8
is size_t an integer? yes
is size_t signed? no 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-27T06:19:31.303

`std::size_t`中定义`<cstddef>`。请参阅[http://en.cppreference.com/w/cpp/header/cstddef](http://en.cppreference.com/w/cpp/header/cstddef)。

# ruby - Anagrams Code Kata，Ruby 解决方案非常慢

> ID：12490626
> 
> 赞同：1
> 
> 时间：2012-09-19T07:58:16.613
> 
> 标签：ruby, performance, algorithm, anagram

我最近一直在玩 Ruby，我刚刚完成了来自[http://codekata.pragprog.com](http://codekata.pragprog.com)的 Anagrams Code Kata 。

该解决方案是测试驱动的，并利用了独特的素因数分解定理，但它似乎运行得非常慢。到目前为止，仅在 45k 文件上它已经运行了大约 10 分钟。任何人都可以给我任何关于提高我的代码性能的建议吗？

```
class AnagramFinder
def initialize
    @words = self.LoadWordsFromFile("dict45k.txt")
end

def OutputAnagrams
    hash = self.CalculatePrimeValueHash

    @words.each_index{|i|
        word = @words[i]
        wordvalue = hash[i]
        matches = hash.select{|key,value| value == wordvalue}
        if(matches.length > 1)
            puts("--------------")
            matches.each{|key,value|
                puts(@words[key])
            }
        end         
    }

end

def CalculatePrimeValueHash     
    hash = Hash.new
    @words.each_index{|i|
        word = @words[i]
        value = self.CalculatePrimeWordValue(word)
        hash[i] = value
    }

    hash
end

def CalculatePrimeWordValue(word)
    total = 1
    hash = self.GetPrimeAlphabetHash
    word.downcase.each_char {|c|
        value = hash[c]
        total = total * value
    }
    total
end

def LoadWordsFromFile(filename)

    contentsArray = []
    f = File.open(filename)

    f.each_line {|line|
        line = line.gsub(/[^a-z]/i, '')
        contentsArray.push line
    }

    contentsArray
end

def GetPrimeAlphabetHash
    hash = { "a" => 2, "b" => 3, "c" => 5, "d" => 7, "e" => 11, "f" => 13, "g" =>17, "h" =>19, "i" => 23, "j" => 29, "k" => 31, "l" => 37, "m" => 41, "n" =>43, "o" =>47, "p" => 53, "q" =>59, "r" => 61, "s" => 67, "t" => 71, "u" => 73, "v" => 79, "w" => 83, "x" => 89, "y" => 97, "z" => 101 }
end 
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T09:52:39.567

Frederick Cheung 有几个优点，但我想我可以为您提供一些描述性示例。

我认为您的主要问题是您创建索引的方式迫使您在其中进行线性搜索。

您的单词列表 ( `@words`) 看起来像这样：

```
[
  "ink",
  "foo",
  "kin"
] 
```

也就是说，它只是一个单词数组。

然后你用 来创建你的哈希索引`CalculatePrimeValueHash`，哈希键等于单词在 中的索引`@words`。

```
{
  0 => 30659, # 23 * 43 * 31, matching "ink"
  1 => 28717, # 13 * 47 * 47, matching "foo"
  2 => 30659  # 31 * 23 * 43, matching "kin"
} 
```

我会认为这是一个好的开始，但问题是如果你保持这样，你将不得不遍历散列以找到`@words`属于一起的散列键（即索引），然后遍历这些键以加入它们。也就是说，这里的基本问题是你做的事情太细化了。

相反，如果您要使用素值作为哈希键来构建此哈希，并让它们指向具有该键的单词数组，您将得到一个像这样的哈希索引：

```
{
  30659 => ["ink", "kin"],
  28717 => ["foo"]
} 
```

使用这种结构，编写输出时唯一要做的就是迭代哈希值并打印它们，因为它们已经分组。

您的代码的另一件事是，它似乎生成了一大堆一次性对象，这将确保您的垃圾收集器保持忙碌，这通常是 ruby​​ 的一个很大的瓶颈。

寻找基准工具和/或分析器来分析您的代码并查看可以在哪里获得批准也可能是一件好事。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T09:40:00.650

从根本上说，您的代码很慢，因为对于其中的每个单词（45k），您会遍历整个哈希（其中 45k）来寻找具有相同签名的单词，因此您要进行 45k * 45k 的这些比较。另一种表达方式是说您的复杂性是单词数量的 n^2。

下面的代码实现了您的基本想法，但在我碰巧躺在身边的 236k 字文件上运行了几秒钟。它肯定会更快 - 可以消除第二次通过数据查找具有> 1个项目的东西，但可读性会降低

它也比你的代码短很多，大约三分之一，同时保持可读性，主要是因为我使用了更多的标准库函数和惯用的 ruby​​。

例如， load_words 方法用于`collect`将一个数组转换为另一个数组，而不是遍历一个数组并将内容添加到第二个数组。类似地，签名函数使用`inject`而不是迭代字符。最后，我习惯于`group_by`进行实际的分组。所有这些方法都恰好在 Enumerable 中——非常值得熟悉这些方法。

`signature_for_word`可以变得更加简洁

```
word.each_char.map {|c| CHAR_MAP[c.downcase]}.reduce(:*) 
```

这需要单词，将其拆分为字符，然后将每个字符映射到正确的数字。`reduce(:*)`（reduce 是注入的别名）然后将它们相乘。

```
class AnagramFinder
  CHAR_MAP ={ "a" => 2, "b" => 3, "c" => 5, "d" => 7, "e" => 11, "f" => 13, "g" =>17, "h" =>19, "i" => 23, "j" => 29, "k" => 31, "l" => 37, "m" => 41, "n" =>43, "o" =>47, "p" => 53, "q" =>59, "r" => 61, "s" => 67, "t" => 71, "u" => 73, "v" => 79, "w" => 83, "x" => 89, "y" => 97, "z" => 101 }

  def initialize
    @words = load_words("/usr/share/dict/words")
  end

  def find_anagrams
    words_by_signature = @words.group_by {|word| signature_for_word word}
    words_by_signature.each do |signaure, words|
      if words.length > 1
        puts '----'
        puts words.join('; ')
      end
    end
  end

  def signature_for_word(word)
    word.downcase.each_char.inject(1) {| total, c| total * CHAR_MAP[c]}
  end

  def load_words(filename)
    File.readlines(filename).collect {|line| line.gsub(/[^a-z]/i, '')}
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T09:04:49.690

您可以使用 Benchmark 工具开始限制速度。这里有一些例子：

[http://www.skorks.com/2010/03/timing-ruby-code-it-is-easy-with-benchmark/](http://www.skorks.com/2010/03/timing-ruby-code-it-is-easy-with-benchmark/)

首先，看看运行需要多长时间`self.calculate_prime_value_hash`以及之后的`calculate_prime_word_value`.

很多时候，缓慢归结为内部循环运行的次数，因此您还可以记录它们运行的​​次数。

您可以做的一个非常快速的改进是将主要 alhabet 哈希设置为常量，因为它根本没有改变：

```
PRIME_ALPHABET_HASH = { "a" => 2, "b" => 3, "c" => 5, "d" => 7, "e" => 11, "f" => 13, "g" =>17, "h" =>19, "i" => 23, "j" => 29, "k" => 31, "l" => 37, "m" => 41, "n" =>43, "o" =>47, "p" => 53, "q" =>59, "r" => 61, "s" => 67, "t" => 71, "u" => 73, "v" => 79, "w" => 83, "x" => 89, "y" => 97, "z" => 101 } 
```

# validation - 根据strtuts 2中的另一个文本字段使文本字段成为必需

> ID：12490628
> 
> 赞同：0
> 
> 时间：2012-09-19T07:58:21.150
> 
> 标签：validation, struts2

在 struts 2 中，我如何使用 actionName-validation.xml 根据另一个 texfield 值创建所需的文本字段

我认为这是使用自定义验证器完成的，但如何？我不想使用 javascript 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:34:42.110

你需要这样的东西：

```
<validator type="required" short-circuit="true">
  <param name="fieldName">textfield1</param>
  <message>You must enter a value for textfield1.</message>
</validator>

<validator type="required" short-circuit="true">
  <param name="fieldName">textfield2</param>
  <message>You must enter a value for textfield2.</message>
</validator>

<validator type="expression">
  <param name="expression">textfield1 gt textfield2</param>
  <message>textfield2 must be greater than textfield1.</message>
</validator> 
```

[请参阅“短路验证器”文档。](http://struts.apache.org/2.x/docs/validation.html#Validation-ShortCircuitingValidator)

# asp.net - 使用 gridview 检索图像

> ID：12490636
> 
> 赞同：0
> 
> 时间：2012-09-19T07:58:47.393
> 
> 标签：asp.net

我想从**OLEDB SQL Server**获取数据并将其显示在**gridview**中，我能够获取除**Image**之外的数据：

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
        AutoGenerateColumns="False" DataSourceID="SqlDataSource1" 
        EnableModelValidation="True" Height="184px" Width="546px">
        <Columns>
            <asp:BoundField DataField="col_FirstName" HeaderText="col_FirstName" 
                SortExpression="col_FirstName" />
            <asp:BoundField DataField="col_LastName" HeaderText="col_LastName" 
                SortExpression="col_LastName" />
            <asp:BoundField DataField="col_age" HeaderText="col_age" 
                SortExpression="col_age" />
            <asp:BoundField DataField="col_photo" HeaderText="col_photo" 
                SortExpression="col_photo" />
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
        ProviderName="<%$ ConnectionStrings:ConnectionString.ProviderName %>" 
        SelectCommand="SELECT [col_FirstName], [col_LastName], [col_age], [col_photo] FROM [tbl_PersonInfo_Test]">
    </asp:SqlDataSource>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:03:53.437

您可以尝试使用此代码 - 基于 asp:ImageField

```
<asp:ImageField DataImageUrlField="col_photo"></asp:ImageField> 
```

链接：http: [//msdn.microsoft.com/en-us/library/aa479350.aspx](http://msdn.microsoft.com/en-us/library/aa479350.aspx)

并替换此代码

```
<asp:BoundField DataField="col_photo" HeaderText="col_photo" SortExpression="col_photo" /> 
```

第二种解决方案 - 基于`template field`

```
<asp:TemplateField HeaderText="Status" ItemStyle-HorizontalAlign="Center">
    <ItemTemplate> 
         <asp:Image ID="photo" runat="server" ImageUrl="<%# DataBinder.Eval(Container.DataItem, "col_photo")%>"  />
    </ItemTemplate> 
</asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:24:34.930

当您在数据库中使用**binaryField**时，您可以创建一个简单的 imageHandler 类。此类知道如何从**数据存储**中**加载****Image**并将其**写入****responseStream**。请参阅下面的一个*非常粗略的示例*。

 *********图像处理程序.aspx**

```
protected void Page_Load(object sender, EventArgs e)
{
  if (Request.QueryString["ID"] != null)
  {
      int id = Convert.ToInt32(Request.QueryString["ID"]);

      // query your dataStorage for col_photo according to the current id
      // ...

      // access your binaryColumn
     Byte[] bytes = (Byte[])dt.Rows[0]["col_photo"]; // adapt in case you use ExecuteScalar()
     Response.Buffer = true;
     Response.Charset = "";
     Response.Cache.SetCacheability(HttpCacheability.NoCache);
     Response.ContentType = "image/jpeg";
     Response.BinaryWrite(bytes);
     Response.Flush();
     Response.End();
} 
```

**ASPX**

```
// don't forget to add the pkColumn to your select statement!!
<asp:ImageField DataImageUrlField="YOUR_PK_COLUMN" 
 DataImageUrlFormatString="imageHandler.aspx?ID={0}"
 ControlStyle-Width="100" ControlStyle-Height="100"/> 
```

You can find several examples on the web. See [Displaying Images in gridViews](http://www.highoncoding.com/Articles/207_Displaying_Images_from_Database_in_GridView.aspx) or [ImagesFromDBinGridView](http://aspsnippets.com/Articles/Display-images-from-SQL-Server-Database-in-ASP.Net-GridView-control.aspx) or just ask [Mr. Google](https://www.google.at/search?q=asp%3aImageField&sugexp=chrome,mod=15&sourceid=chrome&ie=UTF-8#hl=de&sclient=psy-ab&q=show%20binary%20image%20in%20gridview%20in%20asp.net&oq=gridview%20show%20image%20b&gs_l=serp.3.2.0i19j0i8i30i19l3.104751.110618.0.114774.29.19.5.5.6.1.355.3879.0j14j4j1.19.0...0.0...1c.1.OlQLRL-9qoU&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=d5b3764c53169ab6&biw=1600&bih=775).*******

# c# - XML 解析：读取 CDATA

> ID：12490637
> 
> 赞同：4
> 
> 时间：2012-09-19T07:58:49.293
> 
> 标签：c#, windows-phone-7, rss, xml-parsing, cdata

```
<item><title>this is title</title><guid isPermaLink="true">http://www.i.com/video/nokia-lumia-920-deki-pureview_2879.html</guid><link>http://www.i.com/video/nokia-lumia-920-deki-pureview_2879.html</link>
<description><![CDATA[this is the info.]]></description>
<pubDate>Wed, 5 Sep 2012 22:10:00 UT</pubDate>
<media:content type="image/jpg" expression="sample" fileSize="2956" medium="image" url="http://media.chip.com.tr/images/content/video/88/201209060102428081-0.jpg"/>
<enclosure type="image/jpg" url="http://media.chip.com.tr/images/content/video/88/201209060102428081-0.jpg" length="2956"/></item> 
```

我想阅读 <"description"> 中的 CDATA

我写了这个

```
 var x = e.Result;// e is downlaoded xml file

        var videos = XElement.Parse(e.Result);

        var fList = (from haber in videos.Descendants("channel").Elements("item")
                     select new Video
                     {
                         title = haber.Element("title").Value,
                         link = haber.Element("link").Value,
                         //description = ???????
                     }).ToList(); 
```

我应该写什么来描述？//编辑答案：同样的方法

但如果描述是这样的呢？

```
<![CDATA[<p>Zombiler adına ne umduk ne bulduk!</p> <p> </p><p><img style="margin: 5px 0px 5px 5px; border: 1px solid #333333; float: right;" alt="Black_ops" src="http://or.com/images/stories/haber/haberler6/20120918_Castlevania/Black_ops.jpg" height="0" width="0" /><strong>Black Ops 2</strong>'de Zombi modu olabilir haberi çıktığından beri bir ses, bir görüntü beklerken <strong>Call of Duty</strong>'nin resmi <strong>Youtube</strong> sayfasında aşağıdaki video yayınlandı. Açıkçası ne demek istiyorlar anlamak güç. <p><a href="http://or.com/haberler/1-yeni-oyunlar/10624-esi-gorulmemis-call-of-duty-videosu">Devamını oku...</a></p>]]> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T08:00:28.810

您应该能够使用完全相同的代码：

```
description = haber.Element("description").Value 
```

或者

```
description = (string) haber.Element("description") 
```

LINQ to XML 将负责为您阅读文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:14:57.760

要读取 CDATA 块，您只需使用相同的方法；你想要的是从中清除 HTML，然后检查[这个答案](https://stackoverflow.com/questions/9967747/remove-html-from-string/9968899#9968899)。

# android - 创建滚动视图时

> ID：12490640
> 
> 赞同：0
> 
> 时间：2012-09-19T07:59:03.710
> 
> 标签：android, layout, view

我正在动态创建一个滚动视图，我有一个非常基本的问题。默认情况下是否`ScrollView()`具有垂直滚动？我是否必须使用它来设置它：`setVerticalScrollBarEnabled(true);`？如果不是，我会用什么来创建垂直滚动？

我的代码我正在使用它：

```
ScrollView sV = new ScrollView(getActivity());
sV.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
sV.setVerticalScrollBarEnabled(true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:06:12.567

为什么不使用自定义 ListView 来代替？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:08:19.293

`ScrollView`总是垂直滚动（如果里面有足够的小部件/元素）。对于水平滚动，`HorizontalScrollView`使用 。

正如 Neo 所提到的，如果您想动态添加内容，ListView 可能是更好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T08:08:55.103

默认情况下，`ScrollView`添加垂直滚动。要添加水平滚动，请使用[Horizo​​ntalScrollView](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)。因此，您不必这样做`sV.setVerticalScrollBarEnable(true)`，当内容大于设备屏幕时会添加滚动条。

# android - 导入opencsv库时的感叹号

> ID：12490643
> 
> 赞同：1
> 
> 时间：2012-09-19T07:59:26.450
> 
> 标签：android, opencsv

[我从这里](http://sourceforge.net/projects/opencsv/)下载了 opencsv 库，但是在导入这个库之后，eclipse 在我的项目旁边放置了一个感叹号。

我还清理了项目并重新启动了我的工作区，但问题仍然存在。

1.  如何解决这个问题呢？

2.  是导入`au.com.bytcode.opencsv.CSVReader`正确的导入语句还是应该导入其他内容？

# servlets - OSGI HttpService：保护所有 servlet

> ID：12490644
> 
> 赞同：2
> 
> 时间：2012-09-19T07:59:31.183
> 
> 标签：servlets, osgi, security

感谢 HttpService，我正在开发 servlet 并将它们注册到我的 OSGI 容器中。我的目标是保护在我的 OSGI 容器中注册的所有 servlet。我看到我可以使用我自己的 handleSecurity 方法实现向 HttpContext 注册我的 Servlet 来处理我的安全性。

但我正在考虑捆绑使用默认 HttpContext 注册 servlet 的情况（意味着没有安全性）。

所以我的问题是，有没有办法一劳永逸地强制部署在我的 OSGI 容器中的所有 servlet 的安全性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:10:19.890

简短的回答是不使用 HttpService。

更长的答案，如果您使用根据 OSGi 规范尚不​​可用的[白板扩展器](http://team.ops4j.org/wiki/display/paxweb/Whiteboard+Extender)，您可能会实现类似的效果，但 felix 和 pax-web 确实提供了它。使用白板扩展器时，您可以结合对 HttpContext 的引用（作为属性）注册 servlet。当然，这个 HttpContext 也需要是一个“定制的”，但您只需要注册一次并能够从您的 Servlet 中引用它。这可能是您最接近您的问题的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-19T06:41:11.243

如果您使用 Apache Felix 白板扩展器，您可以注册一个 Servlet 过滤器，这是处理安全性的更好方法，因为它很容易支持不同的策略。意图是在Http Service的下一次更新中支持Filters和whiteboard：[https ://github.com/osgi/design/tree/master/rfcs/rfc0189](https://github.com/osgi/design/tree/master/rfcs/rfc0189)

您可以按照建议使用钩子，但请不要。钩子是为深层中间件设计的，而不是面向应用程序的方面。它们产生启动/停止排序问题，它们使系统对调试工具更加不透明，简而言之，它们使您的系统更加复杂。如果您出于这些目的开始使用钩子，您会发现更多用例，并且它们将开始交互。远离它们，除了非常核心的系统中间件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T07:03:48.873

我将使用服务挂钩功能 (OSGI 4.3) 来覆盖 HttpService.registerServlet 的行为。在我的钩子中，我将强制使用我的 HttContext 实现。

使用此解决方案，任何向 HttpService 注册 servlet 的包都将受到我的 HttpContext 实现的保护。

# imap - IMAP 提取主题

> ID：12490648
> 
> 赞同：12
> 
> 时间：2012-09-19T07:59:54.240
> 
> 标签：imap

通过 telnet 使用 IMAP，我希望能够从特定的给定电子邮件中提取主题。现在我知道 fetch 命令负责从电子邮件中获取数据。

我的问题是，如何在*不*调用 BODY[HEADER.FIELDS (SUBJECT)] 的情况下专门获取主题标题（在服务器看来，这将“打开电子邮件”并因此设置 /seen 标志，这是我不想发生的）？

我知道 FETCH FULL 返回完整的标题，其中包含主题，但解析它是一场噩梦，如果我手动解析它可能会充满看不见的陷阱。我如何让服务器只给我标题中的主题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-19T12:13:17.680

我发现了答案：

BODY.PEEK[标题.字段（主题）]

.PEEK 告诉它不要打开它（所以 /seen 没有设置）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-06T00:02:13.010

"a1 FETCH 1:* (FLAGS BODY[HEADER.FIELDS (SUBJECT DATE FROM)])\r\n"

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T13:07:12.070

除了 BODY.PEEK，您还可以获取 ENVELOPE，它为您提供了大部分消息元数据的解析摘要。

# python - 如何保存这个 matplotlib 图形，以便不裁剪 x 轴标签？

> ID：12490657
> 
> 赞同：8
> 
> 时间：2012-09-19T08:00:10.183
> 
> 标签：python, matplotlib, pandas

我在 ipython 笔记本中运行以下代码片段，使用`pandas`数据分析库和`matplotlib.pyplot`.

```
titles = {'gradStat_p3': "P3:  Gradiometers", 'magStat_p3': "P3:  Magnetometers",
          'gradStat_mmn': "MMN:  Gradiometers", 'magStat_mmn': "MMN:  Magnetometers"}

scales = {'gradStat': (-2.0 * 1e-22, 3.5 * 1e-22), 'magStat': (-1.6 * 1e-25, 4.5 * 1e-25)}

fig, axes = plt.subplots(nrows=2, ncols=2, figsize=(8, 5))
fig.tight_layout()
for c, component in enumerate(('p3', 'mmn')):
    for s, sensor in enumerate(('gradStat', 'magStat')):
        key = sensor + '_' + component
        axes[c, s].set_ylim(scales[sensor])
        agg = aggregated[key]
        # Plot
        agg.plot(ax=axes[c, s], kind='bar', legend=False, title=titles[key])
        axes[c, s].set_xticklabels(agg.index.format(names=False))
        if not c:  # hide the labels
            axes[c, s].xaxis.set_visible(False)

        saveFile = '/tmp/ERF_comparative_barplot.pdf'
        fig.savefig(saveFile) 
```

执行上述代码时，ipython notebook 的内联图形输出中会生成以下（正确）图：

![正确的格式](../Images/3911502e648b0fadd6488c33589a8b7d.png)

请注意，x-lable 已正确显示。

然而，当图像被保存时，x-labels 被裁剪如下：

![格式错误](../Images/e51f87d2bb614a3420c701b24cb50b14.png)

我试过打电话`fig.savefig(savefile, bbox_inches=0`，但无济于事。我怎样才能避免这种裁剪？

**注意：**为了您的方便，我在[这里](http://dl.dropbox.com/u/6160029/aggregated.pickle)`aggregated`腌制了变量。这是 pandas DataFrame 对象的字典，它*应该*是您运行上述代码和重现错误所需的全部内容（假设您安装了 pandas v.0.8.1）。

 *首先十分感谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T08:49:25.830

您可以使用`fig.tight_layout()`.

```
fig, ax = subplots(1,1,1)
ax.plot(np.random.randn(5))
ax.set_xticklabels(['this is a very long label', 'b', 'c', 'd', 'e'], rotation=90)
fig.tight_layout()
fig.savefig('test.pdf') 
```*

# javascript - 将jQuery函数应用于具有相同类的多个元素

> ID：12490659
> 
> 赞同：7
> 
> 时间：2012-09-19T08:00:19.007
> 
> 标签：javascript, jquery

我有一个有多个滑块的网页，所有滑块都带有“.viewer”类

如果我添加我的 jQuery

```
 $('.viewer').carousel('.viewer #simplePrevious', '.viewer #simpleNext'); 
```

这不起作用，是不是因为它也不知道这也适用于哪个滑块？它不应该适用于页面上的所有 .viewer 元素吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-19T08:01:38.750

您应该使用 jQuery 方法`each()`：

```
$('.viewer').each(function() {
    $(this).carousel('.viewer #simplePrevious', '.viewer #simpleNext');
}); 
```

查看在线文档以获取更多信息：[http ://api.jquery.com/each/](http://api.jquery.com/each/)

希望这有助于交配。

# android - Modbus tcp 安卓应用程序

> ID：12490661
> 
> 赞同：4
> 
> 时间：2012-09-19T08:00:24.887
> 
> 标签：android, eclipse, tcp, modbus

我正在开发 android 应用程序来在 tcp/ip modbus 的帮助下控制 plc 有人有很好的教程吗？
[Modbus 协议转义线程 (Android,Jamod)](https://stackoverflow.com/questions/11773864/modbus-protocol-escapes-the-thread-android-jamod)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T10:46:57.243

**Android 上的 Modbus**可以在这里看到**[，](http://www.nyx.net/~ddileo/)**带有源的**ModbusDroid可以在****[这里](http://www.bencatlin.com/sofware-projects/modbus-droid/)**找到，**modbus4j**可以在**[这里](http://sourceforge.net/projects/modbus4j/files/modbus4j/)**找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T07:47:15.130

我已经做了你想做的事。[我在以下链接](https://stackoverflow.com/questions/12560429/sending-a-boolean-value-to-a-plc-from-android)中发布了一个问题和我的问题的答案。我希望这个有点帮助。

# iphone - 移除 TabBarItem 高亮显示

> ID：12490665
> 
> 赞同：1
> 
> 时间：2012-09-19T08:00:46.923
> 
> 标签：iphone, ios, uitabbar

我有一个`UITabBar`基于应用程序，在一个 TabBar 按钮上我有一个导航控制器。当我移动到导航控制器时，需要删除标签栏突出显示选项。不应选择标签栏按钮。

我怎么能让这成为可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:53:36.720

尝试查看[UITabBarItem](https://developer.apple.com/library/IOs/ipad/#documentation/UIKit/Reference/UITabBarItem_Class/Reference/Reference.html)文档的“管理完成和选定的图像”任务部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:52:17.873

如果要更改 tabBar 索引，请使用

```
[self.tabBarController setSelectedIndex:index]; 
```

如果您不想显示选定的索引，则只需隐藏 tabBar。

# php - PHP GD 图像倒计时不再工作

> ID：12490668
> 
> 赞同：1
> 
> 时间：2012-09-19T08:00:58.773
> 
> 标签：php, image, gd

这个倒计时脚本在过去的几年里一直有效。脚本没有任何变化，但时间没有改变，所以我假设代码已被弃用。

以下是脚本的不同部分：

**HTML**

```
<img src="http://example.com/countdown.php" /> 
```

**PHP - 倒计时.php**

```
<?php
header ("content-type: image/jpg");
$echo = file_get_contents("http://example.com/countdown-script.php");
$string = "".$echo."";
$font = 8;
$width = ImageFontWidth($font)* 48;
$height = ImageFontHeight($font);
$im = ImageCreateFromjpeg("http://example.com/countdown.jpg");
$x=imagesx($im)-$width;
$y=imagesy($im)-$height;
$background_color = imagecolorallocate ($im, 0, 0, 0);
$text_color = imagecolorallocate ($im, 250, 84, 5);
$border = 5;
imagestring ($im, $font, $x, $y,  $string, $text_color);
imagejpeg ($im, '', 100);
?> 
```

**PHP - 倒计时脚本.php**

```
<?php
countdown(2012,10,31,0,0,0);
function countdown($year, $month, $day, $hour, $minute, $second)
{
$the_countdown_date = gmmktime($hour, $minute, $second, $month, $day, $year);
$today = time();
$difference = $the_countdown_date - $today;
if ($difference < 0) $difference = 0;
$days_left = floor($difference/60/60/24);
$hours_left = floor(($difference - $days_left*60*60*24)/60/60);
$minutes_left = floor(($difference - $days_left*60*60*24 - $hours_left*60*60)/60);
$seconds_left = floor($difference - $days_left*60*60*24 - $hours_left*60*60 - $minutes_left*60);
echo "".$days_left." Days, ".$hours_left." Hours, ".$minutes_left." Minutes, ".$seconds_left." Seconds Left";
}  
?> 
```

虽然它曾经显示 countdown.jpg 和顶部的文本倒计时，但它只是显示为损坏的图像或默认为 alt 标签（如果使用）。

它在我使用 PHP5.2 的香草测试环境中工作，但我无法让它在 PHP5.4 上工作，显然不推荐使用 5.4 的代码？

# eclipse - 日食上的垂直白线

> ID：12490672
> 
> 赞同：7
> 
> 时间：2012-09-19T08:01:20.190
> 
> 标签：eclipse

> **可能重复：**
> [是否有可能使 Eclipse 的代码折叠排水沟变黑？](https://stackoverflow.com/questions/1041760/is-it-possible-to-make-eclipses-code-folding-gutter-black)

白线在默认配色方案中是不可见的，但是当我应用不同的配色方案时，它出现了..

白线还包含代码折叠按钮..

![http://imgur.com/rqdD6](../Images/703660b7edfbe4c002512a8693ed8248.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T08:56:42.960

取自[这个](https://stackoverflow.com/questions/1041760/is-it-possible-to-make-eclipses-code-folding-gutter-black)线程：

> “更改编辑器的背景颜色后，禁用然后重新启用代码折叠并单击应用，这似乎解决了颜色问题，但保留了丑陋的白线分隔符。”

或者

> “首先禁用新编辑器的折叠（首选项->C++->编辑器->折叠）。
> 
> 然后，每当您打开新编辑器时，折叠“列”将不可用。
> 
> 现在，打开一个新编辑器，按住 rt 键单击文本的最左侧（如果启用了行号，则为行号）并选择“启用折叠”（或按 ctrl + numpad-divide）。
> 
> 然后，默认情况下要折叠的任何东西都将被折叠，并且折叠的 + 和 - 将在深色背景上可用 - 没有颜色故障”。

# php - 使用 PHP 的 mySQL 表中的增量主键

> ID：12490673
> 
> 赞同：3
> 
> 时间：2012-09-19T08:01:25.637
> 
> 标签：php, mysql, sql, select, increment

我正在尝试使用表单帖子向 mySQL 表添加行。每行都有一个我称为quoteID 的主。提交新表单时，它应该将自身添加为表中的一行，并且 quoteID 比之前的 quoteID 大一。它目前看起来像这样：

```
<?
session_start();
if(!session_is_registered(myusername)){
header("location:login.php");
}
include 'verify.php';
$con = mysql_connect("localhost","user","$password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("internal", $con);

$previousOrderID = mysql_query("SELECT * FROM sourcingQuote ORDER BY quoteID DESC LIMIT 1"); 
$newOrderID = $previousOrderID + 1;

mysql_close($con);
?> 
```

目前该表中有 4 行，quoteID 为 1、2、3 和 4。奇怪的是，如果我尝试：

```
<? echo $previousOrderID; ?><br>
<? echo $newOrderID; ?><br> 
```

输出结果为：

```
Resource id #3

4 
```

无论表中有多少行，$previousOrderID 都固定为 3。我该如何纠正这个问题？更重要的是，当我添加它时它是正确的，但为什么它首先输出'Resource id #3'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:02:41.787

您可以通过在 phpmyadmin 中选择自动增量来执行此操作

> ![在此处输入图像描述](../Images/7d53937998dd59317073e4000065d704.png)

或者通过sql示例，表名是demo，冒号是demo，带有自动增量及其主键

```
CREATE TABLE IF NOT EXISTS `demo` (
  `demmo` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`demmo`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:03:19.403

不，那是资源链接，您必须获取数据：

```
<?php
    $previousOrder = mysql_query("SELECT * FROM `sourcingQuote` ORDER BY `quoteID` DESC LIMIT 1"); 
    $previousOrder = mysql_fetch_assoc($previousOrder);
    $previousOrderID = $previousOrder['quoteID'];
    $newOrderID = $previousOrderID + 1;

    echo $previousOrderID."<br />";
    echo $newOrderID."<br />";
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T08:04:21.720

避免重复的最佳方法是将`QuoteID`as `AUTO_INCREMENT`ed`PRIMARY KEY`

```
CREATE TABLE sourcingQuote
(
    QuoteID INT AUTO_INCREMENT,
    -- other columns,
    CONSTRAINT t_pk PRIMARY KEY (QuoteID)
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T08:06:11.800

您可以在 mysql phpmyadmin 中将“quoteID”设置为自动增量.....

并且您获取资源 ID #3 .. 因为您正在打印资源链接.. 您可以通过以下方式打印数据

```
$previousOrderID = mysql_query("SELECT * FROM sourcingQuote ORDER BY quoteID DESC LIMIT 1"); 
$previousOrderID = mysql_fetch_assoc($previousOrderID);
$newOrderID = $previousOrderID['ID'] + 1; 
```

# java - FormComponents 有常用的 isVisible 方法

> ID：12490676
> 
> 赞同：1
> 
> 时间：2012-09-19T08:01:37.670
> 
> 标签：java, wicket

有没有办法我可以让几个不同的检票口组件具有相同的 isVisible() 实现

例如，我有具有相同 isVisible 方法的 Labels、TextFields、DropdownChoices 等，但我不会为所有这些类实现自定义类，因为很难维护对代码的更改。

顺便说一句，由于页面的设计，我无法将它们放入 webmarkupcontainer 中。

我希望他们都继承这样的东西。

```
public class DepositoryFormComponent extends Component
{
public DepositoryFormComponent(String id) {
    super(id);
}

public DepositoryFormComponent(String id, IModel model) {
    super(id, model);
}

public boolean isVisible() {
    return isFormDepositoryType();
}

protected boolean isFormDepositoryType() {
    return getCurrentSelections().getSelectedOwnedAccount().getAssetType() == AssetType.DEPOSITORY;
}

protected CurrentSelections getCurrentSelections() {
    return (CurrentSelections) getSession().getAttribute(CurrentSelections.ATTRIBUTE_NAME);
}

public void onRender(){}; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:07:19.857

你有几个选择：

1.  如果您可以控制标记，并且可以将要控制其可见性的所有组件组合在一个标记中，则可以使用[`<wicket:enclosure>`](https://cwiki.apache.org/WICKET/wickets-xhtml-tags.html#Wicket%2527sXHTMLtags-Elementwicket%253Aenclosure)标记使组件控制整个标记的可见性。请注意，这不会影响页面设计，并且会达到与添加`WebMarkupContainer`

2.  您可以`IBehavior`将计算可见性并调用`setVisible()`. 如果您不希望将来调用来更改的可见性，`Component`您也可以调用。也许不完全是覆盖，但我认为如果你不创建自定义组件就不太可能实现覆盖。[`Component#setVisibilityAllowed()`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/Component.html#setVisibilityAllowed%28boolean%29)`setVisible()``Component``isVisible`

    ```
    public class VisiblityControlBehavior extends AbstractBehavior { 

        private boolean isComponentVisible() { 
            return isFormDepositoryType();
        } 

        protected boolean isFormDepositoryType() {
            return getCurrentSelections().getSelectedOwnedAccount().getAssetType() == AssetType.DEPOSITORY;
        }

        protected CurrentSelections getCurrentSelections() {
            return (CurrentSelections) getSession().getAttribute(CurrentSelections.ATTRIBUTE_NAME);
        }

        @Override 
        public void bind(Component component) { 
            boolean visible = isComponentVisible(); 
            component.setVisible(visible); 
            component.setVisibilityAllowed(visible); 
        } 
    } 
    ```

# c# - 无法将 bigint 拆箱到 long

> ID：12490683
> 
> 赞同：3
> 
> 时间：2012-09-19T08:02:08.640
> 
> 标签：c#, asp.net, .net, sql-server

首先请原谅我的英语。我收到此错误__当我尝试将对象从 executescalar() 显式转换为 long 时，它给出了 can not unbox executescalar() to long 。

而转换为 System.Decimal 类型时没有错误。

```
long? id = (long?)ppwDb.ExecuteScalar(ppwDbCmd); //RAISE eXCEPTION
decimal? id = (decimal?)ppwDb.ExecuteScalar(ppwDbCmd);***// NO eXCEPTION 
```

id 的 AND 值为 (id = 9874563) ，表示在远距离下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T08:19:40.900

你必须投两次：

```
long? id = (long?) (decimal?) ppwDb.ExecuteScalar(ppwDbCmd); 
```

第一个演员将拆箱`decimal?`。第二个演员将从`decimal?`to转换`long?`。你不能跳过第一个演员，因为 a`decimal?`不能拆箱到 a `long?`。

这假定`ppwDb.ExecuteScalar(ppwDbCmd)`返回`object`，但返回的实际值是 a `decimal?`。

但是，我怀疑如果 id 为空，则`ppwDb.ExecuteScalar(ppwDbCmd)`返回。`DBNull.Value`在这种情况下，您将不得不对该值进行特殊处理：

```
object result = ppwDb.ExecuteScalar(ppwDbCmd);
long? id = result != DBNull.Value ? (long?) (decimal) result : null; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T08:27:31.113

试试这个

```
object retVal = selectCommand.ExecuteScalar();
long? Id = (retVal == DBNull.Value) ? null : Convert.ToInt64(retVal); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T08:08:33.770

```
object value = selectCommand.ExecuteScalar(ppwDbCmd);
long? l =  (value != null)?Convert.ToInt64(value):null; 
```

上面应该工作，使用对象而不是长？直接地，你可以在 return 上面的语句中有 null 明确地检查 null。

原因是返回的值（作为 object ）不是有效的 int ；因此，隐式强制转换不起作用。如果您说转换为 int ，则您将其显式转换为 int 截断返回数字中的任何双倍因子。

# django - Django Admin：为什么有些字段显示为空？

> ID：12490685
> 
> 赞同：0
> 
> 时间：2012-09-19T08:02:14.427
> 
> 标签：django, django-admin, django-fixtures

我有一个带有“发布”模型的 Django 博客，如下所示：

```
class Post(models.Model):
    title = models.CharField(max_length=1000)
    author = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')
    text = models.TextField(max_length=10000)
    CATEGORY_CHOICES = (
         ('breakfast','Breakfast'),
         ('brunch','Brunch'),
         ...
    )
    category = models.CharField(max_length=100,blank=True,choices=CATEGORY_CHOICES) 
```

我已使用该命令将一堆“发布”对象（已完成上述所有字段）上传到我的数据库`python manage.py loaddata fixturename.json`。但是，当我登录管理站点以修改对象时，我为“类别”字段上传的值不会显示为字段下拉列表中的预选值。为什么是这样？有什么办法可以解决吗？

编辑：这是我的 json 夹具文件中的片段：

```
 {
    "pk": 34, 
    "model": "blogs.post", 
    "fields": {
        "category": "breakfast",  
        "author": "jennaboller", 
        "text": "I have to say, my favorite weekend breakfast is blah blah blah", 
        "title": "Corned Beef Hash & Eggs: My Favorite Weekend Breakfast", 
        "pub_date": "2011-01-25 05:05:37"
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:58:16.717

根据我在对问题的最后评论中所说的，这个问题很可能与模型领域的属性`blank=True`有关。但是由于您为示例模型实例（*早餐*）指定了一个特定类别，它也应该显示在管理配置中。`category``Post`

 *这种行为的原因可能是 Django 不希望`blank`a`CharField`中的属性设置了该`choices`属性，因为它在这里没有真正意义。如果您希望能够说一个`Post`实例不属于某个特定类别，那么最好在`CATEGORY_CHOICES`诸如`('none', 'None')`. 也许这也可能是 Django 管理模块中的一个错误，但我不知道这一点。*

# java - Java：确定小程序是否显示在屏幕上

> ID：12490686
> 
> 赞同：5
> 
> 时间：2012-09-19T08:02:19.363
> 
> 标签：java, swing, applet, awt, visibility

我正在尝试用 Java 编写一个小程序来检查它是否显示在屏幕上。有几种方法可以检查 Java 是否要显​​示小程序或特定组件（即`.isShowing()`或`.isVisible()`），但没有一种方法可以检查应用程序是否真的在屏幕上可见。

假设您在您喜欢的浏览器的选项卡 A 中启动小程序。当您移动到选项卡 B 时，小程序不再显示，但仍在运行（在这种情况下不会调用 applet.stop()）。或者当您拥有带有小程序的页面但在它之前移动另一个页面时。我需要检查小程序是否真的对用户可见，而不是被任何其他东西隐藏（例如，在另一个应用程序后面。）

我认为在 Java 中没有简单的方法可以做到这一点，因为我在过去 2 天搜索了它；）有人可以告诉我一些方法来实现这一点吗？您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:31:29.767

我对小程序没有太多经验，但据我了解，您不需要检查它是否是`Visible`or `Showing`，您需要检查它是否是 `Active. 检查这个java代码 - > [Java代码](http://docs.oracle.com/javase/1.4.2/docs/api/java/applet/Applet.html#isActive%28%29)

或者您可以在屏幕上定义一个范围并检测鼠标何时超过该范围。所以在这种情况下，即使小程序正在显示，您也会知道用户是否正在处理其他事情。（用户在屏幕上同时打开两个浏览器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T01:33:24.133

我通过`Frame.isFocused()`.

# c# - 我可以在不通过 SMTP 服务器验证的情况下发送电子邮件吗？

> ID：12490689
> 
> 赞同：4
> 
> 时间：2012-09-19T08:02:28.470
> 
> 标签：c#, .net, email, smtp, smtpclient

我正在创建简单的电子邮件发送应用程序。在我的应用程序中，当我发送电子邮件时，我必须输入我的电子邮件地址或密码，但我不想使用密码只想输入电子邮件

所以

我可以使用 c#/.net 应用程序在不使用密码的情况下发送电子邮件吗？

这是我的代码：

```
 try
    {
        // setup mail message
        MailMessage message = new MailMessage();
        message.From = new MailAddress(textBox1.Text);
        message.To.Add(new MailAddress(textBox2.Text));
        message.Subject = textBox3.Text;
        message.Body = richTextBox1.Text;

        // setup mail client
        SmtpClient mailClient = new SmtpClient("smtp.gmail.com");
        mailClient.Credentials = new NetworkCredential(textBox1.Text,"password");

        // send message
        mailClient.Send(message);

        MessageBox.Show("Sent");
    }
    catch(Exception)
    {
        MessageBox.Show("Error");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:25:28.990

> 我可以使用 c#/.net 应用程序在不使用密码的情况下发送电子邮件吗？

是的，如果您有权访问不需要身份验证的电子邮件网关，您可以简单地执行以下操作：

```
SmtpClient mailClient = new SmtpClient("your.emailgateway.com");
mailClient.Send(message); 
```

也许您的公司或 ISP 可以为您提供一个？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T08:06:06.407

一般来说，你可以，当然。在您的具体示例代码中，您使用的是不允许匿名发送的 GMail。

从[他们的参考资料](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)：

> smtp.gmail.com（使用身份验证）
> 使用身份验证：是
> TLS/STARTTLS 端口：587
> SSL 端口：465

关于您的`catch`条款的附加评论：

在我看来，您严重滥用了异常的想法。更好的方法是：

```
catch(Exception x)
{
    var s = x.Message;
    if ( x.InnerException!=null )
    {
        s += Environment.NewLine + x.InnerException.Message;
    }

    MessageBox.Show(s);
} 
```

# mysql - Mysql UNION 和 GROUP BY

> ID：12490695
> 
> 赞同：16
> 
> 时间：2012-09-19T08:02:39.587
> 
> 标签：mysql, join, group-by, union

我有 2 个表需要根据日期和 2 个值加在一起。

这给了我所有信息的列表 - 很好。

```
$query = (SELECT  date, debit, credit , note  FROM proj3_cash )
UNION 
(SELECT  settle, purch, sale, issue FROM proj3_trades)
ORDER BY date"; 
```

现在我需要对两张表中的每日总计信息进行分组。

```
$query = "(SELECT  date, SUM(debit), SUM(credit)FROM proj3_cash  GROUP BY date)
UNION 
(SELECT  settle as date, SUM(purch) as debit, SUM(sale) as credit FROM proj3_trades GROUP BY date)
ORDER BY date"; 
```

很好，但是如果每个表中有相同日期的内容，我会得到：

```
date        SUM(debit)    SUM(credit)
--------------------------------------
2010-12-02  0.00          170.02 
2010-12-02  296449.91     233111.10 
```

如何将两者分组到同一天？

如果我在最后添加 GROUP BY - 我只会收到错误消息。还是应该通过 JOIN 来完成？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-19T08:08:02.387

您可以使用派生表实现此目的：

```
SELECT date, SUM(debit), SUM(credit)
FROM
(
    SELECT  date, debit, credit
      FROM proj3_cash
    UNION ALL
    SELECT  settle as date, 
            purch as debit, 
            sale as credit 
      FROM proj3_trades
) derivedTable
GROUP BY date
ORDER BY date 
```

我已将 UNION 更改为 UNION ALL，因为 union 将消除两个表中的重复项。

# javascript - iscroll 不工作

> ID：12490698
> 
> 赞同：0
> 
> 时间：2012-09-19T08:02:52.727
> 
> 标签：javascript, jquery, css, cordova

我正在使用 iScroll 到我的 phonegap 应用程序之一。我的模板是这样设置的。我有 index.html。我正在通过 jQuery load() 方法动态加载页面。因此，当我启动应用程序时会发生什么情况，然后它会动态加载 login.html。之后我使用 iscroll refresh 方法。因此，当我第一次滚动到页面末尾时它可以工作，但是当我想第二次滚动时它不会滚动。为此，我在 logcat 中收到此错误

```
Miss a drag as we are waiting for WebCore's response for touch down 
```

我怎样才能让它工作？

这是我的 index.html

```
<header>
    Header
</header>
<div id="wrapper">
    <div id="scroll-content">

    </div>
</div>
<footer>
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Profile</a></li>
        <li><a href="#">Photos</a></li>
    </ul>
</footer>
</body>
<script type="text/javascript">
var theScroll;
function scroll() {
    theScroll = new iScroll('wrapper', { vScrollbar: true });
}
document.addEventListener('DOMContentLoaded', scroll, false);
</script> 
```

这是我的js文件

```
jQuery(function () {
var myScroll = new iScroll('wrapper');
var Login = {
    onDeviceReady : function () {
        $('#scroll-content').load('./pages/login.html', function () {
            setTimeout(function () {
                myScroll.refresh();
            }, 0);
        });
        $(document).on('touchstart', '#btnlogin', Login.validate);
    },
    validate : function (e) {
        e.preventDefault();
        var input;
        $('#loginform input').each(function () {
            input = $(this).val();
            if(input == "") {
                $(".errormsg").html('Enter all mandatory fields');
                $(this).addClass('error');
            }
        });
    }
};

document.addEventListener("deviceready", Login.onDeviceReady, false);
}); 
```

这是我的CSS

```
footer {
  background-color: #c27b00;
  position: absolute;
  z-index: 2;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 48px;
  padding: 0;
  border-top: 1px solid #444; }
  footer ul {
margin: 0;
padding: 0; }
footer ul li {
  display: inline-block;
  padding: 5% 10.5%;
  background-color: #fafafa; }
  footer ul li a {
    width: 100%;
    height: 100%; }
 body #wrapper {
position: absolute;
z-index: 1;
top: 45px;
bottom: 48px;
left: 0;
width: 100%;
background: #aaa;
overflow: auto; }
body #wrapper #scroll-content {
  position: absolute;
  z-index: 1;
  width: 100%;
  padding: 0; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T19:50:48.593

在这里查看我的答案：[https ://stackoverflow.com/a/18726304/1959362](https://stackoverflow.com/a/18726304/1959362)

在您的情况下，尝试在“pageshow”事件上调用 refresh() 方法，如下所示：

```
$('#<id-of-your-jqm-page>').on('pageshow', function() {
    setTimeout(function () {
        myScrollFunction .refresh();
    }, 100);
}); 
```

# jquery - jQuery masonry 附加结果仅显示在单列中

> ID：12490699
> 
> 赞同：1
> 
> 时间：2012-09-19T08:03:05.417
> 
> 标签：jquery, jquery-masonry

当我使用砖石附加方法时，附加项目的“左”属性都计算为“0”，导致所有项目都显示在单个列中。做一个 masonry('reload') 可以正确地重新排列所有内容，但是每次加载新项目时都会占用资源。

即使它应该从底部进行，它也是从顶部开始制作动画的。

我的代码如下：

最初：

```
$('.pinboard-list').masonry({
    itemSelector : '.grid-item'
}); 
```

然后对于每个项目

```
function renderitems(){
    boxes = $(html);
    $('.pinboard-list').append(boxes).masonry('appended',boxes,true);
} 
```

我错过了一些明显的东西吗？

编辑

JS小提琴

[http://jsfiddle.net/LTFG8/1/](http://jsfiddle.net/LTFG8/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:33:42.340

您需要使用文档中显示的 imagesLoaded 方法 - Masonry（和同位素，就此而言）需要新附加或前置或插入图像的宽度和高度才能正确布局，并通过回调重新触发。SO上有许多类似的问题和答案，展示了如何解决这个问题。使用 Chrome 的开发工具查看[这里的演示。](http://masonry.desandro.com/docs/help.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:00:07.193

感谢@Systembolaget 提供线索。容器中必须有一些东西才能使附加的方法起作用。添加这样的东西修复它：

```
<li class="grid-item">&nbsp;</li> 
```

修复它

# c# - asp.net 中最好的 C# Ajax (with jquery) HTML 显示编程模式/用法

> ID：12490703
> 
> 赞同：0
> 
> 时间：2012-09-19T08:03:16.223
> 
> 标签：c#, jquery, asp.net, ajax

在 C# 编程中，我通常执行以下操作：对于 json 响应，我使用 jquery 调用 .asmx 或 .ashx 文件并解析响应。

对于 html 响应，哪个更易于编程和以后改进？像我已经做的那样调用 .aspx 文件还是有其他方法？

我不喜欢 .ashx 的想法，因为在 Designer 模式下看不到数据。

我想要的只是在客户端是这样的：

```
$.ajax({
      type: "POST",
      url: "something",
      cache: false,
      success: function(msg) {
        // Replace the div's content with the page method's return.
        $("#container").html(msg);
      }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:07:42.460

现在的标准是通过带有 WCF 或新的 asp.net WebApi 的 RestService 提供数据 (json/html)。之后，您将使用 javascript 微模板框架进行客户端渲染。

仅对于 ajax 调用，它并不是“总是”在服务器端呈现内容 (html) 的好方法。

这是一个很棒的[链接](http://engineering.linkedin.com/frontend/leaving-jsps-dust-moving-linkedin-dustjs-client-side-templates)。事件如果不是aspnet特有的，也是一样的。

# php - 特征应该在单独的文件中吗？

> ID：12490711
> 
> 赞同：1
> 
> 时间：2012-09-19T08:04:43.877
> 
> 标签：php

假设这种情况：

```
interface IFoo
{
  public function Bar();
}

trait Foo
{
  public function Bar()
  {
    echo 'Bar';
  }
}

class FooBar implements IFoo
{
   use Foo;
}

$foobar = new FooBar();
$foobar->Bar(); //echos 'Bar'; 
```

我将类 FooBar 放在它自己的文件中，接口 IFoo 也在它自己的文件中。

但是我应该如何处理特质 Foo：

*   在自己的文件中？（我的偏好）
*   连同inferface IFoo？
*   当 trait 有自己的文件时，自动加载将如何处理呢？

注意：netbeans 将类 FooBar 的代码标记为无效。Netbeans 没有检测到特征 Foo 用于实现 IFoo。漏洞？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T08:10:27.140

特征像类一样自动加载。因此，如果您有一个符合 PSR 的加载器（其中命名空间是目录，文件名是类/接口/特征名称），那么一切都应该使用它自己的文件中的特征。

所以要回答标题中的问题，如果你想坚持标准，那么你应该使用 PSR 加载，所以是的，特征应该在单独的文件中。

就 netbeans 而言，我认为 7.2 是唯一支持 php 5.4（以及特性）的版本，因此请确保您拥有 netbeans 7.2，并在项目设置中设置 php 5.4。

# c# - Composite C1 中的自定义小部件

> ID：12490715
> 
> 赞同：2
> 
> 时间：2012-09-19T08:05:04.990
> 
> 标签：c#, custom-component, c1-cms

我正处于一个大型网站的新 Web 项目的早期阶段，选择的 CMS 是 Composite C1。到目前为止，我对它感到满意，它很有前途，而且我可以相对快速地使用它。

但是，在我看来，我目前陷入了一个简单的问题。

该项目将处理来自外部数据库的大量产品（6000+），以及大量产品组（分层）。这本身不是问题，但是通过 CMS，网站的编辑将能够将元数据添加到产品中，创建特定于 Web 的产品组等。这就是问题的开始。

在最简单的世界中，自定义数据类型上的单个产品选择器就足够了，但是对于 6000 多种产品，这不是一个选项。所以我想创建一个带有自动完成或搜索字段+结果字段的自定义小部件（将数据添加到我的自定义数据类型时）。

阅读后[如何将自定义小部件添加到 C1？](http://docs.composite.net/Console/ConsoleFAQ?q=How%20to%20add%20custom%20widget%20to%20C1?)我认为这将是一个较小的问题，但我什至无法让代码示例正常工作。我收到配置错误说

> **解析错误消息**：无法创建类型“SampleProvider.MyWidgetFunctionProvider，WidgetProvider”

SampleProvider.MyWidgetFunctionProvider 位于同一解决方案中的单独项目中，并且设置了所有引用。可能是什么问题呢？

何时/如果我可以让自定义小部件功能正常工作，处理对我的外部实体的引用的最佳方法是什么？你能发现我提出的解决方案有什么问题吗？

TL;博士; 我需要一种方法来为 Composite C1 中的外部数据库中的实体创建元数据，而无需使用标准的 Selector 小部件（对于 Selector 而言数据过多）。我应该怎么办？

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T07:17:42.710

我也创造了同样的东西。它对我来说很好。

我希望你已经注册了具有相同应用程序名称和命名空间的 dll

> SampleProvider.MyWidgetFunctionProvider, WidgetProvider

这个错误可能是由给定的命名空间引起的

只要看到这个格式被赋予 type="Namespace_name.Class_name, Assembly_name" 并且 name 是一个程序集名称。

如果答案不清楚，我可以提供帮助，因为相同的代码对我来说是完美的

# android - Eclipse、Android NDK 和 Sequoyah：摆脱“make: *** No rule to make target `MyProjectName_scd.mk'。停止。”

> ID：12490716
> 
> 赞同：2
> 
> 时间：2012-09-19T08:05:08.000
> 
> 标签：android, android-ndk, eclipse-cdt, cocos2d-x

我在 Eclipse 中使用[Sequoyah](http://www.eclipse.org/sequoyah/)在 Windows 上构建了一个原生 Android 应用程序（一个[Cocos2Dx](http://www.cocos2d-x.org)游戏），以避免在构建 C++ 源代码时使用命令行。

一切都很好，除了我不时收到以下错误：

> C/C++ 问题。make: ***没有规则来制作目标“MyProjectName_scd.mk”。停止。项目属性中的 [发现选项] 页面。

我的项目中没有任何 MyProjectName_scd.mk，只有一个 MyProjectName.mk。

尽管如此，所有共享库实际上都是构建的，如果我手动删除此错误消息（从上下文菜单中），该应用程序在设备和模拟器上都可以正常工作。

每次出现此错误消息时，我都必须手动删除它，因为如果我不这样做，我会收到一个消息框，其中包含：“您的项目包含错误，请在运行应用程序之前修复它们”并且无法启动应用程序。这真的很烦人。

任何想法如何解决它？

[Windows 7 x86，Eclipse 4.2.0 | CDT 8.1.0.201206111645，Android NDK r8]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:15:26.543

我在这里找到了解决方法：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=332522](https://bugs.eclipse.org/bugs/show_bug.cgi?id=332522)

本质上，你需要去：

窗口 -> 首选项 -> C/C++ -> 构建 -> 设置 -> CDT GCC Buildin 编译器设置 [共享]

然后添加到“获取编译器规格的命令”：

-std=c++11

应该这样做！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T07:01:28.703

你可以去你的项目 Properties->c/C++ Build->Discovery options 并取消选中“Report path detection questions”或者只是取消选中Automate discovery of paths and symbols

# php - PHP，如何从文档类型声明开始获取内容？

> ID：12490718
> 
> 赞同：-1
> 
> 时间：2012-09-19T08:05:36.247
> 
> 标签：php, regex

我需要从文档类型声明开始直到结束，这就是我所拥有的：

```
HTTP/1.1 200 OK
Server: nginx
Date: Wed, 19 Sep 2012 07:52:41 GMT
Content-Type: text/html; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Keep-Alive: timeout=20
Status: 200 OK
X-Runtime: 736
ETag: "66644f063945c4d3f6e5471723306c2c"
Cache-Control: no-cache
Set-Cookie: vrid=e93aae30-e45c-012f-9786-001f29cc11ee; domain=.yellowpages.com; path=/; expires=Tue, 19-Sep-2017 07:52:40 GMT
Set-Cookie: parity_analytics=---+%0A%3Avisit_id%3A+u1ncewtmt44s23myff9s5t1tbcd5h%0A%3Avisit_start_time%3A+2012-09-19+07%3A52%3A40.711499+%2B00%3A00%0A%3Alast_page_load%3A+2012-09-19+07%3A52%3A40.711501+%2B00%3A00%0A; path=/; expires=Sat, 19-Sep-2037 07:52:40 GMT
Set-Cookie: _parity_session=BAh7CDoPc2Vzc2lvbl9pZCIlMDIxNjZiMDVkZmMxNWFmMzQ5OGVlNTk3Njg0MTM2NmY6EF9jc3JmX3Rva2VuSSIxbVhHMGNmM1U1K3E1OFo2NTQwVHltTFdZaHREa1lMMnRCVnE1eVFJNFpHQT0GOgZFRjoTZGV4X3Nlc3Npb25faWRJIillOTg5ZjNlMC1lNDVjLTAxMmYtOTc4Yy0wMDFmMjljYzExZWUGOwdG--08b9db1ba698882287f47a60e34c0c1e227d440a; path=/; HttpOnly
X-Rid: vendetta-ac8a22f2-3a5c-4da8-a1e8-25d4a550bf32
Expires: Wed, 19 Sep 2012 07:52:40 GMT

<!DOCTYPE html><head></head><body></body>... 
```

这可以用正则表达式来实现吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:09:18.747

您可以使用[`http_parse_headers`](http://php.net/manual/en/function.http-parse-headers.php)

这是示例：

```
$headers = substr($yourString, 0, strpos($yourString, '<!DOCTYPE'));
print_r(http_parse_headers($headers)); 
```

这是使用 Regex 的文档中的有用功能（如果您无权访问 PECL 库）：

```
function http_parse_headers( $header )
{
    $retVal = array();
    $fields = explode("\r\n", preg_replace('/\x0D\x0A[\x09\x20]+/', ' ', $header));
    foreach( $fields as $field ) {
        if( preg_match('/([^:]+): (.+)/m', $field, $match) ) {
            $match[1] = preg_replace('/(?<=^|[\x09\x20\x2D])./e', 'strtoupper("\0")', strtolower(trim($match[1])));
            if( isset($retVal[$match[1]]) ) {
                $retVal[$match[1]] = array($retVal[$match[1]], $match[2]);
            } else {
                $retVal[$match[1]] = trim($match[2]);
            }
        }
    }
    return $retVal;
} 
```

# c# - 调整窗口大小时保持两个图像相对缩放

> ID：12490719
> 
> 赞同：0
> 
> 时间：2012-09-19T08:05:49.130
> 
> 标签：c#, wpf

假设有 2 张图片，一张大的用于背景，一张较小的用于前景。前景恰好位于背景的中间，覆盖了它的相对数量（例如 50%），因此用户将它们视为单个图像。

问题是我需要背景来填充`Window`各种尺寸。将其`Stretch`值设置为`UniformToFill`将做到这一点。但是我怎样才能让前景仍然覆盖 50% 的背景呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:18:28.467

使用矢量图像会更好，因为它可以在调整容器大小时*“自行”缩放。*

然后根据窗口大小设置边距，如下所示：

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    Height="400" Width="400">
<Grid>
    <Image Margin="100">
        <Image.Source>
            <DrawingImage>
                <DrawingImage.Drawing>
                    <GeometryDrawing Brush="#FF000000" Geometry="M14.800615,5.6499605L14.800615,14.800346C10.630442,17.910477 7.8903284,22.840685 7.8903284,28.44092 7.9003286,37.871319 15.530646,45.511639 24.961039,45.521641 34.391431,45.511639 42.011749,37.871319 42.04175,28.44092 42.03175,22.840685 39.291636,17.910477 35.121462,14.800346L35.121462,5.6599612C43.841825,9.5601254,49.912077,18.280493,49.912077,28.44092L49.922077,28.44092C49.912077,42.231503 38.741611,53.391972 24.961039,53.391972 11.170465,53.391972 0,42.231503 0,28.44092 0,18.270493 6.0902529,9.5501251 14.800615,5.6499605z M19.570043,0L30.237043,0 30.237043,33.917 19.570043,33.917z" />
                </DrawingImage.Drawing>
            </DrawingImage>
        </Image.Source>
    </Image>
</Grid> 
```

要始终使用 50% 的窗口，您可以使用[Converter](http://wpftutorial.net/ValueConverters.html)来绑定属性。

另外，也许[这](http://rachel53461.wordpress.com/2011/08/20/the-math-converter/)可以帮助你。

# layout - 我可以在 Netbeans 7.2 中保存我的窗口布局吗？

> ID：12490730
> 
> 赞同：11
> 
> 时间：2012-09-19T08:06:38.037
> 
> 标签：layout, netbeans, windows-7, window, netbeans-7

由于标签往往会在一段时间后在错误的窗口中打开，因此存储预设布局以便在事情搞砸时返回会很有帮助。

例如，如果我位于“**输出”窗格的***运行选项卡*中并通过在项目浏览器中双击打开源文件，则源文件将在“**输出”窗格**的选项卡中打开，而不是在主**编辑器窗口中打开**

 ******![Netbeans 7.2 Win7 x64 中的屏幕截图](../Images/62a28bba7510f13d4053149007aa09b5.png)

在 menu`Window`中，有 to 选项`Reset Windows`，它修复了这个 bug。但后来我所有的窗口自定义都丢失了。

所以 - 我还没有弄清楚如何存储我当前的窗口配置。一个相当漂亮的解决方案（例如备份 xml 文件）是可以接受的。

检查 netbeans.org 上的相关错误：[Source file opens in wrong window panel](http://netbeans.org/bugzilla/show_bug.cgi?id=209468)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T20:23:55.157

根据[这篇文章](http://dirk.net/2008/10/11/change-the-netbeans-windows-layout/)，[Perspective 插件](http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=3273)可让您保存窗口布局（并在布局之间切换）。不幸的是，它已经很老了（2008 年），所以我不确定它是否仍然适用于 7.2 版本。******

# asp.net - 如何在buttonclick上获取动态创建的文本框的值

> ID：12490732
> 
> 赞同：0
> 
> 时间：2012-09-19T08:06:51.020
> 
> 标签：asp.net, c#-4.0, dynamic

我创建了两个动态表和文本框，如下所示：

```
protected void drpNetworkList_SelectedIndexChanged(object sender, EventArgs e)
    {
     string socialNetworkName = drpNetworkList.SelectedItem.Text;

DataSet networkdata =   VoCServiceObj.GetSocailNetworkNameDetails(partnerid,socialNetworkName);           

        int cdount = networkdata.Tables[0].Rows.Count;

            pnlViewData.Controls.Clear();
            Check.Checked = true;               
            pnlViewData.Visible = true;
            table = new Table();
            table.ID = "tbl_dy";

            //Brandurl
            row = new TableRow();
            cell = new TableCell();

            Label lbl = new Label();
            lbl.ID = "lbl_1";
            lbl.Text = "BrandURL";
            cell.Controls.Add(lbl);
            row.Cells.Add(cell);

            cell = new TableCell();
            TextBox txt = new TextBox();
            txt.ID = "textBox";
            txt.Text = networkdata.Tables[0].Rows[0]["BrandDestinationURL"].ToString();
            cell.Controls.Add(txt);
            row.Cells.Add(cell);
            table.Rows.Add(row);

            for (int i = 1; i <= cdount; i++)
            {
                int count = i - 1;

                //ProdutId
                row = new TableRow();
                cell = new TableCell();

                Label lbl2 = new Label();
                lbl2.ID = "lbl_1'" + i + "'";
                lbl2.Text = "ProductID" + i + "'";
                cell.Controls.Add(lbl2);
                row.Cells.Add(cell);

                cell = new TableCell();
                TextBox txt2 = new TextBox();
                txt2.ID = "textBox1" + i + "'";
                txt2.Text = networkdata.Tables[0].Rows[count]["ProductID"].ToString();
                cell.Controls.Add(txt2);
                row.Cells.Add(cell);

                table.Rows.Add(row);

                //ProdutURL
                row = new TableRow();
                cell = new TableCell();

                Label lbl3 = new Label();
                lbl3.ID = "lbl_2'" + i + "'";
                lbl3.Text = "ProductURL" + i + "'";
                cell.Controls.Add(lbl3);
                row.Cells.Add(cell);

                cell = new TableCell();
                TextBox txt3 = new TextBox();
                txt3.ID = "textBox2" + i + "'";
                txt3.Text = networkdata.Tables[0].Rows[count]["ProductDestinationURL"].ToString();
                cell.Controls.Add(txt3);
                row.Cells.Add(cell);

                table.Rows.Add(row);

            }
            pnlViewData.Controls.Add(table);

    }
   protected void imgSave_Click(object sender, ImageClickEventArgs e)
    {
                    TextBox tb1 = (TextBox)Page.FindControl("textBox11");
        String str = string.Empty;
        str = tb1.Text;
    } 
```

文本框显示来自数据库的默认值。我在运行时编辑这些值，我想在按钮单击函数中获取这些值。我如何做到这一点？？？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:15:53.840

每次创建页面时都会创建所有页面控件。

在事件上动态创建的控件必须在下一个`Init`.

只有之前创建的控件`ProcessPostData`才能接收用户输入的数据。

您可以使用`ViewState`记住下次必须重新创建这些控件。

# c# - C#，程序设计，内存使用

> ID：12490733
> 
> 赞同：0
> 
> 时间：2012-09-19T08:06:53.867
> 
> 标签：c#, optimization, memory

所以我在程序设计方面非常业余。我在 uni 完成了一些课程，但它们都专注于学习语法和非常基本的设计原则。

无论如何，我正在用 C# .Net 编写一个通过 RPC 与 rtorrent 交互的客户端。我将 torrent 客户端信息存储在 ITorrentClient 接口中，并将 torrent 信息存储在 Torrent 对象中。要获取有关 torrent 的数据，它需要从 ITorrentClient 调用一个函数，例如：

```
class Torrent
{
    string _hash;
    ITorrentClient _client;

    public Torrent(ITorrentClient client)
    {
        this._client = client;
    }

    public double UploadSpeed
    {
        get
        {
            return _client.getTorrentUploadSpeed(_hash);
        }
    }
} 
```

不幸的是，这意味着如果您的 torrent 客户端中有大量 torrent（就像我一样），您的内存中将有数百个浪费的 ITorrentClients。我如何设计我的程序，这样我就不会有数百个无用的对象漂浮在周围？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:31:01.053

如果您的实现`ITorrentClient`是引用类型（类）而不是值类型（结构），则`_client`each 的属性`Torrent`将包含对 的**引用**，`ITorrentClient`而**不是实际的 object**。

考虑：

```
var client = new MyTorrentClient(); // TorrentClient implements ITorrentClient
var t1 = new Torrent(client);
var t2 = new Torrent(client); 
```

`MyTorrentClient`内存中只有一个实例，`t1`并`t2`持有对它的引用。

# iphone - 尝试从共享实例启动功能

> ID：12490745
> 
> 赞同：0
> 
> 时间：2012-09-19T08:08:12.187
> 
> 标签：iphone, objective-c, selector

我有显示地图的界面实例。我从其他界面调用该地图并显示它，现在我想在地图界面中启动一个函数（func5）。

我正在创建：

```
myMap *map = (myMap*) [[UIApplication sharedApplication] delegate];
[map func5:2]; 
```

这`func5`是我在 myMap 界面中声明的。

```
-(void) func5:(int) num; 
```

但是在尝试运行此行时出现错误：[map func5:2];

```
'NSInvalidArgumentException', reason: '-[AppDelegate func5:]: unrecognized selector sent to instance 0x952b140' 
```

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:10:40.680

您可以发布函数**func5**的声明吗？

正确检查此项，并在必要时提供必要的参数

```
[map func5];  // is how you have called your method
[AppDelegate func5:] // is what your eror has showed with ":" after the function name 
```

它们是两个不同的东西，取决于你如何定义你的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:23:09.277

首先，将这样的方法放在应用程序委托上是一件可怕的事情，通常您希望这些方法在它们自己的实例中。

二、AppDelegate 必须有

```
- (void)func5; 
```

在标头中声明（即 AppDelegate.h）

从这里的代码中，我假设“实例”是指您的 AppDelegate，而不是像 *MyMapClass *myMap;这样的其他东西。*事物。

如果是第二个，那么您必须在应用程序委托的标头中将 myMap 声明为属性，然后以这种方式调用它：

```
AppDelegate *delegate = (AppDelegate*) [[UIApplication sharedApplication] delegate];
[deletage.myMap func5]; 
```

并在要调用该函数的位置添加标题。

```
#include AppDelegate.h 
```

这仍然是一种可怕的做法。

# batch-file - 如何通过批处理文件将结果隔离到不同的文件夹？

> ID：12490751
> 
> 赞同：0
> 
> 时间：2012-09-19T08:08:31.830
> 
> 标签：batch-file, dos

我想将结果 PASSED/FAILED 隔离到不同的文件夹（PASSED/FAILED 文件夹）。

例子：

```
REM 1 = line number
REM 2 = path
pushd %2
for /f "delims=" %%x in ('dir /d /od /b "%~1*.log"') do set "recent=%%x"
echo %recent%
find "PASSED" "%recent%"
set rtn=%errorlevel%
IF rtn=0 (
move %2result_%1.log %2PASSED
) ELSE (
move %2result_%1.log %2FAILED
)
popd
exit /b %rtn% 
```

此流程尚未生效。

我需要你的建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:49:10.727

您应该将行更改`IF rtn=0 (`为`IF %rtn%==0 (`，仅此而已

# iphone - 如何使用 MapKit 在两个位置之间绘制路线并绘制要点？

> ID：12490753
> 
> 赞同：3
> 
> 时间：2012-09-19T08:08:48.653
> 
> 标签：iphone, objective-c, ios5, mapkit

我正在使用 MapKit api 获取地图上的当前位置并在放置针指向的两个位置之间绘制路线。我还想在其路线之间获取所有主要看台。我正在使用以下函数来获取两个位置之间的路线

```
- (NSArray*)getRoutePointFrom:(MyLocation*)origin to:(MyLocation*)destination
{
 NSString* saddr = [NSString stringWithFormat:@"%f,%f", origin.coordinate.latitude, origin.coordinate.longitude];
 NSString* daddr = [NSString stringWithFormat:@"%f,%f", destination.coordinate.latitude, destination.coordinate.longitude];

 NSURL *url=[NSURL URLWithString:[NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/directions/json?origin=%@&destination=%@&sensor=false&avoid=highways&mode=driving",saddr,daddr]];

 NSError *error=nil;

 NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;

 [request setURL:url];
 [request setHTTPMethod:@"POST"];

  NSURLResponse *response = nil;

  NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error: &error];

  NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

 SBJsonParser *json=[[SBJsonParser alloc] init];

 NSDictionary *dic=[json objectWithString:responseString error:nil];

 NSDictionary *nextdic=[dic valueForKey:@"routes"];
 NSDictionary *legdic=[nextdic valueForKey:@"legs"];
 NSDictionary *stepdic=[legdic valueForKey:@"steps"];

 NSArray *array=[[NSArray alloc] initWithArray:[[stepdic valueForKey:@"polyline"] valueForKey:@"points"]];  

 NSString *string=[NSString stringWithFormat:@"%@",[[array objectAtIndex:0] objectAtIndex:0]];

 return [self decodePolyLine:[string mutableCopy]];

}

-(NSMutableArray *)decodePolyLine:(NSString *)encodedStr 
{  

 NSMutableString *encoded = [[NSMutableString alloc] initWithCapacity:[encodedStr length]];  
 [encoded appendString:encodedStr];  
 [encoded replaceOccurrencesOfString:@"\\\\" withString:@"\\"  
                             options:NSLiteralSearch  
                               range:NSMakeRange(0, [encoded length])];  
 NSInteger len = [encoded length];  

 NSInteger index = 0;  
 NSMutableArray *array = [[NSMutableArray alloc] init] ;  
 NSInteger lat=0;  
 NSInteger lng=0;  
 while (index < len) {  
  NSInteger b;  
  NSInteger shift = 0;  
  NSInteger result = 0;  
  do {  
   b = [encoded characterAtIndex:index++] - 63;  
   result |= (b & 0x1f) << shift;  
   shift += 5;  
  } while (b >= 0x20);  
  NSInteger dlat = ((result & 1) ? ~(result >> 1) : (result >> 1));  
  lat += dlat;  
  shift = 0;  
  result = 0;  
  do {  
   b = [encoded characterAtIndex:index++] - 63;  
   result |= (b & 0x1f) << shift;  
   shift += 5;  
  } while (b >= 0x20);  
  NSInteger dlng = ((result & 1) ? ~(result >> 1) : (result >> 1));  
  lng += dlng;  
  NSNumber *latitude = [[NSNumber alloc] initWithFloat:lat * 1e-5];  
  NSNumber *longitude = [[NSNumber alloc] initWithFloat:lng * 1e-5];  
  //          printf("[%f,", [latitude doubleValue]);  
  //          printf("%f]", [longitude doubleValue]);  
  CLLocation *loc =[[CLLocation alloc] initWithLatitude:[latitude floatValue] longitude:[longitude floatValue]] ;  
  [array addObject:loc];  
 }  

 NSLog(@"array in decode polygon is %@",array);

 return array;  
} 
```

但它不工作。..

关于这个的帮助谢谢！...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T09:19:20.257

这个问题已经被问过好几次了。我猜您正在从[http://iosguy.com/2012/05/22/tracing-routes-with-mapkit/](http://iosguy.com/2012/05/22/tracing-routes-with-mapkit/)获取代码 您还可以查看那个 SO 问题：[Plotting Route with Multiple Points in iOS](https://stackoverflow.com/questions/10639530/plotting-route-with-multiple-points-in-ios)

您也可以从[http://iosboilerplate.com](http://iosboilerplate.com)获取代码并为其做出贡献。

最后但并非最不重要的一点是，有一个框架可以帮助您以一小笔钱来完成它（但与您需要做的相比没有什么）： http: [//www.cocoacontrols.com/controls/ mtdirectionskit](http://www.cocoacontrols.com/controls/mtdirectionskit)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-27T08:58:51.120

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface ViewController : UIViewController<MKMapViewDelegate>
{
    NSData *alldata;
    NSMutableDictionary *data1;

    NSMutableArray *RouteLocation;
    NSMutableArray *RouteName;
}
@property (strong, nonatomic) IBOutlet MKMapView *mapview;
@property (nonatomic, retain) MKPolyline *routeLine;
@property (nonatomic, retain) MKPolylineView *routeLineView;

-(void)LoadMapRoute;
@end

#import "ViewController.h"

@implementation ViewController
@synthesize mapview,routeLine,routeLineView;

- (void)viewDidLoad {
    [super viewDidLoad];
     self.mapview.delegate = self;
    // Do any additional setup after loading the view, typically from a nib.
    RouteName = [[NSMutableArray alloc] initWithObjects:@"Ahmedabad",@"Rajkot", nil];
    RouteLocation = [[NSMutableArray alloc] initWithObjects:@"23.0300,72.5800",@"22.3000,70.7833", nil];
    [self LoadMapRoute];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

//-------------------------------------
// ************* Map ******************
//-------------------------------------

-(void)LoadMapRoute
{
    MKCoordinateSpan span = MKCoordinateSpanMake(0.8, 0.8);
    MKCoordinateRegion region;
    region.span = span;
    region.center= CLLocationCoordinate2DMake(23.0300,72.5800);

    // Distance between two address
    NSArray *coor1=[[RouteLocation objectAtIndex:0] componentsSeparatedByString:@","];
    CLLocation *locA = [[CLLocation alloc] initWithLatitude:[[coor1 objectAtIndex:0] doubleValue] longitude:[[coor1 objectAtIndex:1] doubleValue]];

    NSArray *coor2=[[RouteLocation objectAtIndex:1] componentsSeparatedByString:@","];
    CLLocation *locB = [[CLLocation alloc] initWithLatitude:[[coor2 objectAtIndex:0] doubleValue] longitude:[[coor2 objectAtIndex:1] doubleValue]];
    CLLocationDistance distance = [locA distanceFromLocation:locB];
    NSLog(@"Distance :%.0f Meters",distance);

    NSString *baseUrl = [NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/directions/json?origin=%@&destination=%@&sensor=true", [RouteLocation objectAtIndex:0],[RouteLocation objectAtIndex:1] ];

    NSURL *url = [NSURL URLWithString:baseUrl];
    alldata = [[NSData alloc] initWithContentsOfURL:url];

    NSError *err;
    data1 =[NSJSONSerialization JSONObjectWithData:alldata options:NSJSONReadingMutableContainers|NSJSONReadingMutableLeaves error:&err];

    NSString *overviewPolyline = [[[[data1 objectForKey:@"routes"] objectAtIndex:0] objectForKey:@"overview_polyline"] objectForKey:@"points"];
    NSArray *path = [self decodePolyLine:overviewPolyline];

    if (err)
    {
        NSLog(@" %@",[err localizedDescription]);
    }

    NSInteger numberOfSteps = path.count;

    CLLocationCoordinate2D coordinates[numberOfSteps];
    for (NSInteger index = 0; index < numberOfSteps; index++) {
        CLLocation *location = [path objectAtIndex:index];
        CLLocationCoordinate2D coordinate = location.coordinate;

        coordinates[index] = coordinate;
    }

    MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:coordinates count:numberOfSteps];
    [self.mapview addOverlay:polyLine];

//    MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:path count: path.count];
//    [self.mapview addOverlay:polyLine];
//    [self.mapview setRegion:region animated:YES];
}

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    MKPolylineView *polylineView = [[MKPolylineView alloc] initWithPolyline:overlay];
    polylineView.strokeColor = [UIColor colorWithRed:204/255\. green:45/255\. blue:70/255\. alpha:1.0];
    polylineView.lineWidth = 5;

    return polylineView;
}

-(NSMutableArray *)decodePolyLine: (NSMutableString *)encoded {
    [encoded replaceOccurrencesOfString:@"\\\\" withString:@"\\"
                                options:NSLiteralSearch
                                  range:NSMakeRange(0, [encoded length])];
    NSInteger len = [encoded length];
    NSInteger index = 0;
    NSMutableArray *array = [[NSMutableArray alloc] init];
    NSInteger lat=0;
    NSInteger lng=0;
    while (index < len) {
        NSInteger b;
        NSInteger shift = 0;
        NSInteger result = 0;
        do {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlat = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lat += dlat;
        shift = 0;
        result = 0;
        do {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlng = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lng += dlng;
        NSNumber *latitude = [[NSNumber alloc] initWithFloat:lat * 1e-5];
        NSNumber *longitude = [[NSNumber alloc] initWithFloat:lng * 1e-5];
        printf("[%f,", [latitude doubleValue]);
        printf("%f]", [longitude doubleValue]);
        CLLocation *loc = [[CLLocation alloc] initWithLatitude:[latitude floatValue] longitude:[longitude floatValue]];
        [array addObject:loc];
    }

    return array;
}
@end 
```

# c# - MVC3 中相同操作的不同视图

> ID：12490754
> 
> 赞同：1
> 
> 时间：2012-09-19T08:08:51.730
> 
> 标签：c#, asp.net-mvc, mobile-website

我正在使用 ASP.NET MVC3 开发一个移动网络。我需要根据不同尺寸设备上可用的不同屏幕分辨率更改我的视图以使其最适合。

举个例子，

在这里，我有一个 Action 调用 SalesHistory。和视图调用 SalesHistory.cshtml 我决定创建 4 个视图（**与本机应用程序开发**相同）来根据不同设备上可用的不同屏幕分辨率排列内容。所以我需要有，

```
SalesHistory_xhdpi.cshtml
SalesHistory_hdpi.cshtml
SalesHistory_mdpi.cshtml
SalesHistory_ldpi.cshtml 
```

现在，我需要在调用方法之后和在文件系统中查找 cshtml 文件之前将后修复（ _xhdpi/_hdpi/_mdpi 或 ldpi ）添加到视图文件名。在这里，我有决定后期像素的逻辑。

如何更改视图文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:24:28.950

如果无法通过简单的 CSS 查询来完成更改，并且您绝对必须拥有不同的视图文件，则可以使用以下代码进行更改：

```
DisplayModeProvider.Instance.Modes.Insert(0, new DefaultDisplayMode("ldpi") {//condition to detect resolution)}); 
```

看看这个网站是一个很好的开始，特别是关于按移动类型提供单独视图的部分：[http ://www.hanselman.com/blog/CreateAGreatMobileExperienceForYourWebsiteTodayPlease.aspx](http://www.hanselman.com/blog/CreateAGreatMobileExperienceForYourWebsiteTodayPlease.aspx)

# android - Android，将活动与其布局分开

> ID：12490759
> 
> 赞同：0
> 
> 时间：2012-09-19T08:09:16.147
> 
> 标签：android, android-layout

我创建了一个 android 库项目，其中包含`activities`

从基础库项目中，我将创建许多从该基础库派生的不同应用程序

主要区别在于布局`activities`和一些`activity-ui`功能

我的问题是如何将活动与视图分开。

我会解释：

我在图书馆有几项活动，包括一些控制和逻辑等。

现在从我的派生应用程序中，我想将自己的布局注入到新布局中的库活动中，有一个新按钮，我想添加一些 ui 逻辑，例如弹出警报对话框。

最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-25T13:04:50.283

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
   MainView view = new MainView(this);
    setContentView(view);

} 
```

在 MainView 类内部

```
public MainView(@NonNull Activity activity) {
        super(activity);
        View view = inflate(getContext(), R.layout.activity_main, this);
} 
```

现在我们使用视图来查找视图的其余部分

# python - 如何按一级索引分组并将函数应用于 Pandas 中的二级索引

> ID：12490762
> 
> 赞同：3
> 
> 时间：2012-09-19T08:09:24.413
> 
> 标签：python, pandas

我有这样的多级数据框'df'：

```
 col1 col2
first second
a        0    5    5
         1    5    5
         2    5    5
b        0    5    5
         1    5    5 
```

我想将一个函数`func`(exp: `'lambda x: x*10'`) 应用于`second`，有点像：

```
df.groupby(level='first').second.apply(func) 
```

结果会像这样：

```
 col1 col2
first second
a        0    5    5
         10   5    5
         20   5    5
b        0    5    5
         10   5    5 
```

上述命令不适用于`second`不是列，因此`.second`Pandas 不接受。

我不想这样做`df.reset_index()`，blablabla ...，最后`df.set_index().`我更喜欢在一个命令中做到这一点，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-16T09:49:59.320

您可以使用`set_levels`索引的方法来更改给定级别中的值。因此，对于给定的`func`，`level`您可以执行以下操作：

```
new_values = map(func, df.index.get_level_values(level))
df.index.set_levels(new_values, level, inplace=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:26:44.587

创建 DataFrame 时，您可以按如下方式设置 MultiIndex：

```
df.set_index(['first', 'second'], drop=False) 
```

这样，索引列不会被删除，您的`apply`.

# javascript - 查找表头单元格值（第一列）

> ID：12490763
> 
> 赞同：4
> 
> 时间：2012-09-19T08:09:25.370
> 
> 标签：javascript, jquery

[我有一个在http://jsfiddle.net/Lijo/sP7zD/](http://jsfiddle.net/Lijo/sP7zD/)中列出的 HTML 表。我需要读取第一列标题的值。我正在使用“gt”和“lt”运算符来做这件事。但它没有获得第一列的值。

1.  在我编写的脚本中需要对 jQuery 代码进行哪些更改？
2.  读取第一列标题值的更好方法是什么？

代码

```
<input type="submit" value="Alert" class="alertButton"/>

<table class="resultGridTable" cellspacing="0" id="detailContentPlaceholder_grdLocalTaxReport"
style="border-collapse: collapse;">
<tr>
    <th scope="col">
        IsSummaryRow
    </th>
    <th scope="col">
        Associate
    </th>
    <th scope="col">
        Gross Amount
    </th>
    <th scope="col">
        Federal Withholding
    </th>

</tr>
<tr>
    <td>
        False
    </td>
    <td>
        Norman Tylor
    </td>
    <td>
        3450
    </td>
    <td>
        32
    </td>
</tr>
</table>

<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.1.js"></script> 
```

脚本

```
$('.alertButton').click(function() {                                                  
    var selectedElements = $("tr").find("th:gt(0):lt(1)");
    $(selectedElements).css('background-color','yellow');
    alert(selectedElements.html());
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:12:02.820

利用`$('th:first')`

```
var selectedElements = $("th:first"); 
```

***[这是演示](http://jsfiddle.net/sP7zD/1/)***。

对于您的代码：改为使用`eq`。

```
var selectedElements = $("tr").find("th:eq(0)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:49:48.130

尝试这个

***代码***

```
<input type="submit" value="Alert" class="alertButton" />
<table class="resultGridTable" cellspacing="0" id="detailContentPlaceholder_grdLocalTaxReport"
style="border-collapse: collapse;">
    <tr>
        <th scope="col">
            IsSummaryRow
        </th>
        <th scope="col">
            Associate
        </th>
        <th scope="col">
            Gross Amount
        </th>
        <th scope="col">
            Federal Withholding
        </th>
    </tr>
    <tr>
        <td>
            False
        </td>
        <td>
            Norman Tylor
        </td>
        <td>
            3450
        </td>
        <td>
            32
        </td>
    </tr>
</table>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.1.js">
</script> 
```

***JS代码***

```
$('.alertButton').click(function()
    {                                                 
        var selectedElements = $('th').first();
            alert(selectedElements .text());
        selectedElements.css({'background':'yellow'});                 
}); 
```

***[演示](http://jsfiddle.net/sP7zD/15/)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T08:15:49.217

要回答问题 1，您的代码会尝试查找索引大于 0 的元素，因此它会找到第二个。尝试删除`gt`. 这将找到索引小于 1 的元素，因此它将匹配索引为 0 的元素。

```
var selectedElements = $("tr").find("th:lt(1)"); 
```

但正如其他答案中提到的，有更好的方法来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T08:13:21.013

利用`var selectedElements = $(".resultGridTable").find("tr:first").find('th:first');`

```
$('.alertButton').click(function()
{

var selectedElements = $(".resultGridTable").find("tr:first").find('th:first');
    $(selectedElements).css('background-color','yellow');
    alert(selectedElements.html());

}); 
```

​</p>

# android - 如果一个或全部为空，则显示 Toast 消息供用户键入所有 EditText - Android

> ID：12490764
> 
> 赞同：0
> 
> 时间：2012-09-19T08:09:28.393
> 
> 标签：android, button, android-edittext, spinner, toast

我有一个应用程序，用户在其中输入他朋友的信息。我的应用程序有`Spinner`4`EditText`和 3 `Buttons`（保存、主菜单、视图）。

用户单击保存按钮后，如果用户键入所有必填字段，则显示 Toast 消息“您的信息已成功保存！：D”，如果用户未键入一个或所有必填字段，则显示 Toast 消息“请输入所有必填字段。:o"。
我尝试使用`if..else`引用我的 SMS 应用程序的语句进行编码 -

```
String contact_fname = sendTo.getSelectedItem().toString();
//String contact_fname = textName.getText().toString();
String message = messageTxt.getText().toString();
if (contact_fname.length() > 0 && message.length() > 0)
    sendSMS(contact_fname, message);
else
    Toast.makeText(getBaseContext(), "Please choose a sender's name and enter your message", Toast.LENGTH_SHORT).show(); 
```

我用 Spinner 和 4 EditText 替换了它们。我尝试参考上面的这些代码（短信应用程序），但它失败了=（

我只需要在用户按下保存后显示吐司消息（我已经提到过）`Button`

任何人都知道如何做到这一点？我感谢提供的任何帮助 =)
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:13:07.837

好消息是您正在使用 EditText。它好的原因是 EditText 带有表单验证。不过用的人不多。

例子 ：

```
EditText firstName = (EditText)findViewById(R.id.first_name);
if( firstName.getText().toString().length() == 0 )
    firstName.setError( "First name is required!" ); 
```

希望这可以帮助！

# java - 通过 SWT 中的 Java 代码更改 Google 地图位置？

> ID：12490766
> 
> 赞同：-1
> 
> 时间：2012-09-19T08:09:36.710
> 
> 标签：java, google-maps, google-maps-api-3, swt

我一直在按照[本](http://www.mkyong.com/google-maps/google-maps-api-hello-world-example/)教程在 SWT 中创建地图浏览器。

似乎地图中心是在html文件中设置的。有没有办法从 Java 代码更改位置（纬度和经度值）？我正在尝试实施车辆跟踪系统。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:28:28.777

我找到了解决该问题的方法。我用 Html 文件的内容创建了一个字符串数组，并将其传递给浏览器。[在这个片段](http://dev.eclipse.org/viewcvs/viewvc.cgi/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet307.java?view=co)中找到它。

Html 代码的内容取自[此博客。](http://xihuisoft.blogspot.com/2012/02/use-google-map-in-swt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:43:38.093

`BrowserFunction`你可以在 swt中做一些实验。它用于在 SWT 浏览器中从 java 脚本回调到 java。

# android - 如何为 Android 和 IOS 构建一个库？

> ID：12490767
> 
> 赞同：3
> 
> 时间：2012-09-19T08:09:38.887
> 
> 标签：android, ios, shared-libraries

我有一段 ANSI C 代码（仅在其中使用 libc）。我想让它成为一个在 Android（使用 JNI 封装）和 IOS 中都可以使用的库。

有可能吗？如果是，如何设置构建环境？

是否应该为每个平台构建两次？我对跨平台编译完全陌生。也许这个问题很愚蠢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:12:37.753

是的，这是可能的。您可能可以在 XCode 中使用它。对于 Java，您需要`.so`使用 NDK 构建一个库。这可能会很痛苦，这取决于它实际上是多么的 ANSI 以及您使用了多少标准库。见[http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)

# javascript - Google Maps API v3 折线在更新时不显示

> ID：12490770
> 
> 赞同：1
> 
> 时间：2012-09-19T08:10:02.850
> 
> 标签：javascript, google-maps-api-3, maps, google-maps-markers, google-polyline

我想在谷歌地图上用折线绘制标记作为它们之间的连接。但我无法在谷歌地图上显示我的折线。我已将折线和地图初始化为全局变量。标记正在显示，但折线只是不渲染。

```
function initialize() {
var mapOptions = {
    zoom : 13,
    center : oldenburg,
    mapTypeId : google.maps.MapTypeId.ROADMAP
};
map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
var polyOptions = {
        strokeColor : '#FF3333',
        strokeOpacity : 1.0,
        strokeWeight : 3
    };
    path = new google.maps.Polyline(polyOptions);
    path.setMap(map);
}
function addPlaces(orte) {

for ( var i = 0; i < orte.length; i++) {
    var ort = toLatLng(orte[i][0], orte[i][1]);
     path.getPath().push(ort);

    marker = new google.maps.Marker({
        position : ort,
        title : '#' + orte[i][2],
        icon : image,
        map : map
    });
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:17:58.790

在实例化折线时尝试指定路径：

**示例：** Google 示例坐标

```
var flightPlanCoordinates = [
    new google.maps.LatLng(37.772323, -122.214897),
    new google.maps.LatLng(21.291982, -157.821856),
    new google.maps.LatLng(-18.142599, 178.431),
    new google.maps.LatLng(-27.46758, 153.027892)
  ]; 
```

以代码上的坐标为例

```
var polyOptions = {
    path: flightPlanCoordinates, //IMPORTANT TO SET the PATH for the line to RENDER
    strokeColor : '#FF3333',
    strokeOpacity : 1.0,
    strokeWeight : 3
}; 
```

或者作为使用上述坐标的谷歌文档示例：

```
 var flightPath = new google.maps.Polyline({
    path: flightPlanCoordinates,
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 2
  }); 
```

# java - 如何在 jsf 2.0 中跟踪登录用户？

> ID：12490771
> 
> 赞同：2
> 
> 时间：2012-09-19T08:10:02.557
> 
> 标签：java, jsf-2

我正在使用 JSF 2.0 框架，我需要帮助。说得尽可能简单，我需要的是获取用户`username`和 id 并将其显示在我正在构建的应用程序中。

这是我的 UserBean 类：

```
@ManagedBean
@SessionScope
 public class UserBean implements Serializable {
 private static final long serialVersionUID = 1L;
 private int id;
 private String username;
 private String password;
 //getter and setter methods 
```

在`index.xhtml`页面上，用户需要输入用户名和密码才能登录（比较数据库中的值）。当他这样做时，我想在下一页上输出他的用户名和 ID，并在整个应用程序中跟踪它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:39:37.640

您`UserBean`已经**在**会话范围内。您根本不需要自己“跟踪”它。如果您需要在视图中显示任意 JSF 托管 bean 的属性，只需以通常的方式在 EL 中访问它们。

```
<p>Welcome, #{userBean.username}!</p> 
```

如果您需要将其注入其他 bean，因为您需要在 postconstructor 或 (action)listener 方法中提供用户信息，那么只需使用`@ManagedProperty`.

```
@ManagedBean
@RequestScoped
public class OtherBean {

    @ManagedProperty("#{userBean}")
    private UserBean userBean; // +setter

    // ...
 } 
```

### 也可以看看：

*   [JSF 2.0 中的通信](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:08:50.727

如果您想直接获取会话数据表单页面。如下使用。

```
 <h:outputText value="#{sessionScope.UserBean.username}"/>
   <h:outputText value="#{sessionScope.UserBean.id}"/> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T08:27:44.930

因为用户名和 id 在会话范围的 bean 中。您可以像这样从会话映射中获取它们。

page2.XHTML

```
<h:outputText value="#{page2Bean.uname}"/>
<h:outputText value="#{page2Bean.id}"/>

Page2Bean.java
@managedBean(name="page2Bean")
class Page2Bean {
private String uName;
private int id;
//getters and setters 
public page2Bean() {
UserBean uBean = (UserBean)     (FacesContext.getCurrentInstance().getExternalContext().getSessionMap()).get("userBean"));// get the UserBean which is in the session
 this.uName= uBean.getUserName();
this.id= uBean.getId();

} 
```

**编辑** 您在构造函数中获取会话数据（在这种情况下为用户名和 id）并将它们分配给您在 page2.xhtml 中使用的属性

让我知道它是否有帮助...

# vim - 如何在 NERDTree 中快速导航文件

> ID：12490772
> 
> 赞同：2
> 
> 时间：2012-09-19T08:10:07.367
> 
> 标签：vim, nerdtree

比如说，我正在编辑一个位于根目录的子目录中的文件。现在我想通过键入其部分名称快速跳转到位于根目录中任何位置的另一个文件（该功能就像在 Eclipse 中按 Shift+Ctr+R 时一样）。NERDTree 有可能吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T08:53:03.240

NERDTree 没有超越`/foo`和的搜索功能`?bar`。

我会第二个 CtrlP，kev 提到的，它可以很好地完成你想要的（以及更多）。我喜欢它。

但是你也可以使用 Vim 的原生

```
:e ../**/foo*<Tab> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T08:20:20.340

您正在寻找[`Command-T`](https://github.com/wincent/Command-T)或[`ctrlp`](https://github.com/kien/ctrlp.vim)。

# dojo - SpinWheelSlot 中的项目未正确显示

> ID：12490775
> 
> 赞同：0
> 
> 时间：2012-09-19T08:10:26.927
> 
> 标签：dojo, dojox.mobile

我正在使用 Dojo Toolkit 开发一个移动应用程序。我有以下代码：

```
<div id="spin1" data-dojo-type="dojox.mobile.SpinWheel">
    <div id="sortOrderSlot" data-dojo-type="dojox.mobile.SpinWheelSlot"
         items="['pt','px','cm']" style="width: 100%;">
    </div>
</div> 
```

输出应如下所示：

```
----------------------------
-                          -
-            pt            -
-                          -
-            px            -
-                          -
-            cm            -
-                          -
---------------------------- 
```

但我得到以下结果：

```
----------------------------
-                          -
-            p             -
-                          -
-            t             -
-                          -
-            ,             -
-                          -
-            p             -
-                          -
-            x             -
-                          -
-            ,             -
-                          -
-            c             -
-                          -
-            m             -
-                          -
---------------------------- 
```

我一开始以为是浏览器的缺陷，但在每个浏览器中看起来都一样。那有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:09:50.743

"items" 的值是 [key,value] 对的数组。在您的情况下，您必须使用“标签”。此外，您现在应该使用“data-dojo-props”来指定小部件属性。

所以这应该更好地工作：

```
<div data-dojo-type="dojox.mobile.SpinWheelSlot"
     data-dojo-props="labels: ['pt','px','cm']" style="text-align:center;width:100%;">
</div> 
```

# android - 两个 android 版本上不同的 listPreference 背景颜色

> ID：12490777
> 
> 赞同：1
> 
> 时间：2012-09-19T08:10:27.310
> 
> 标签：android, android-layout

样式.xml：

```
<resources
xmlns:android="http://schemas.android.com/apk/res/android">
<style name="CustomTheme" parent="@android:style/Theme.Light">
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowBackground">@drawable/bg_repeat</item>
</style> 
```

清单.xml：

```
<activity android:name="Main" android:theme="@style/CustomTheme"></activity> 
```

主.java：

```
public void onCreate(Bundle savedInstanceState) 
{
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
             WindowManager.LayoutParams.FLAG_FULLSCREEN);
    super.onCreate(savedInstanceState); 
```

在 main.java 我有一个 listPreference。listpreference 的背景颜色在 android 2.3.5 上为白色，在 android 4.0.4 上为蓝色。现在我对列表首选项的字体颜色感到困惑。

# ios - 十进制小键盘。在某些地区强制使用点而不是逗号

> ID：12490779
> 
> 赞同：1
> 
> 时间：2012-09-19T08:10:31.747
> 
> 标签：ios, xcode, uikeyboard

我正在使用十进制键盘输入 IP 地址，但是我忽略了一个事实，即在欧洲他们使用 . 而不是 . 作为小数。这使得输入 IP 地址成为不可能。

无论用户的设备设置如何，是否可以强制键盘使用特定区域，例如美国或英国？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:51:23.383

这是不可能的，因为您可能会尝试强制使用用户未启用的键盘。但是，您可以根据需要使用自定义键盘，或设置视图的输入附件视图（这是显示在键盘顶部的小视图）

# android - Android：无法通过json解析数据

> ID：12490786
> 
> 赞同：0
> 
> 时间：2012-09-19T08:11:08.113
> 
> 标签：android, json, android-listview, httpclient

我无法使用`json`我正在以这种格式获取数据来解析来自服务器的数据。

```
[{"school":"abc","event":"test","eventdate":"09\/18\/2012","eventtext":"Hello,this is test "}][{"school":"abc","event":"test","eventdate":"09\/18\/2012","eventtext":"Hello,this is test "},{"school":"abc","event":"new test","eventdate":"09\/20\/2012","eventtext":"Hello, test2"}] 
```

我是新手，`json parsing`下面是我的代码：

```
import java.util.ArrayList;
import java.util.HashMap;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONObject;

import android.app.Activity;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import android.widget.BaseAdapter;
import android.widget.ListView;

import android.widget.TextView;
import com.appforschools.R;
import com.appforschools.event.Myadapter;

public class event extends Activity {
ListView list;

ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
 @Override

 public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.event);
   list=(ListView)findViewById(R.id.listView1);

   try {
        HttpClient client = new DefaultHttpClient();
        HttpGet get = new HttpGet(
                "http://xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        HttpResponse rp = client.execute(get);
        String result = EntityUtils.toString(rp.getEntity());
        System.out.println("----------------------- result: " + result);

        result = "{\"root\": " + result + "}";
        JSONObject root = new JSONObject(result);
        JSONArray sessions = root.getJSONArray("root");
        for(int i=0;i<sessions.length();i++){
            HashMap<String, String> map2 = new HashMap<String, String>();
            JSONObject e = sessions.getJSONObject(i);
            map2.put("text", e.getString("eventtext"));
            map2.put("date", e.getString("eventdate"));
            mylist.add(map2);
        }

    } catch (Exception e) {
        e.printStackTrace();
    }
    System.out.println("----------------------- 1");
list.setAdapter(new Myadapter());

 }
public class Myadapter extends BaseAdapter {

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return mylist.size();
        }

        @Override
        public Object getItem(int arg0) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public long getItemId(int arg0) {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub
            LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.customlistview,
                    null);
            TextView item = (TextView) convertView
                    .findViewById(R.id.text);
            item.setText(mylist.get(position).get(
                    "text"));
            TextView date = (TextView) convertView
                    .findViewById(R.id.date);
            date.setText(mylist.get(position).get("date"));
            return convertView;
        }

    }

 } 
```

当我调试此代码时，它会在此字符串中获得结果，`String result = EntityUtils.toString(rp.getEntity());`但在该行`JSONObject root = new JSONObject(result);`之后显示异常。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:13:00.157

因为响应是一个 json 数组，你应该这样做：

```
JSONArray root = new JSONArray(result);
for(int i=0;i<root.length();i++){
....
} 
```

# javascript - 如何在不修改 onclick 函数的情况下识别单击了哪个元素

> ID：12490788
> 
> 赞同：0
> 
> 时间：2012-09-19T08:11:12.163
> 
> 标签：javascript, javascript-events

> **可能重复：**
> [我试图在函数触发时获取目标元素的 id，但`this`关键字返回`undefined`](https://stackoverflow.com/questions/12490110/i-trying-to-get-the-target-elements-id-when-function-fired-but-this-keyword-r)

--- HTML 文件 ---

```
<a href="#link_1" id="id_0" onclick = "getElement('parms1', 'parms2', 'parms3')">0</a>
<a href="#link_2" id="id_1" onclick = "getElement('parms1', 'parms2', 'parms3')">1</a>
<a href="#link_1" id="id_2" onclick = "getElement('parms1', 'parms2', 'parms3')">2</a> 
```

--- Js文件---

```
function getElement = function(a, b, c){
    // trying to get the clicked element
    alert(this); // returns 'undefined'
} 
```

**注意**：我不能在onclick函数中修改/添加/删除参数，但是我可以在js文件中添加/删除参数

**问题**：如何在不修改 onclick 函数参数的情况下识别单击了哪个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:40:19.727

简单修复：

将 HTML 更改为：

```
<a href="#link_1" id="id_0" onclick = "getElement('parms1', 'parms2', 'parms3',this,event)">0</a> 
```

函数定义为：

```
//function getElement = function(){};doesn't really make sense...
function getElement (a, b, c,clicked,e)
{
    alert(clicked.id);//alerts id of clicked link
    alert((e.target || e.srcElement).id);//via the event object
} 
```

所以选择是你的，要么传递`this`和传递`event`给函数，要么只是`event`，或者只是`this`，你很高兴。

不过，您可能希望考虑委托此类事件

# javascript - 如何将字符串值从活动传递给 webView

> ID：12490789
> 
> 赞同：6
> 
> 时间：2012-09-19T08:11:16.340
> 
> 标签：javascript, android, webview

请告诉我如何将一些字符串值从活动传递到 web 视图。我在 DashboardActivity 中有加载 URL 的 webview，我想将该活动中的字符串值传递给 javaScript window.onload 函数使用的 webview。请告诉我这样做的方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T08:36:25.400

根据您的用例，有不同的方法可以实现这一点。难点在于你要在onload方法中做事。

如果可以在页面加载后传入字符串，则可以使用

```
String jsString = "javascript:addData('" + theString + "');");
webView.loadUrl(jsString); 
```

如果您确实需要可在页面的 onload 方法上访问的数据，则可以修改调用的 url 以包含查询数据（如果可能）。就像是：

```
String urlWithData = yourUrl + "?data=" + theString;
webView.loadUrl(urlWithData); 
```

然后使用标准 javascript 解析 window.location.search 以获取数据。

最后，如果由于某种原因无法修改 URL，可以使用回调对象让 javascript 获取值：

```
private class StringGetter {
   public String getString() {
       return "some string";
   }
} 
```

然后在加载 url 之前使用此回调配置您的 webView：

```
webView.addJavascriptInterface(new StringGetter(), "stringGetter"); 
```

在页面的 onload 方法中，您可以使用：

```
var theString = stringGetter.getString(); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-06T04:13:33.697

如果在加载的网页上选择了输入字段，您可以尝试以下操作：

```
String pasteData = "a string value to paste into the webview"    
String javaScript = "javascript:document.activeElement.setAttribute('value','"+pasteData+"');";

mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.requestFocus(View.FOCUS_DOWN);
mWebView.loadUrl(javaScript); 
```

# java - Android货币符号排序

> ID：12490793
> 
> 赞同：4
> 
> 时间：2012-09-19T08:11:30.250
> 
> 标签：java, android, format, currency

我正在使用非英语语言环境的设备，英语货币格式如下：

1 美元

如果我有英语语言环境，我会得到欧元货币，例如：

1欧元

使用

```
format.setCurrency(Currency.getInstance(currency));
return format.format(amount); 
```

在文档中找到：

[http://developer.android.com/reference/java/util/Currency.html#getSymbol](http://developer.android.com/reference/java/util/Currency.html#getSymbol) ()

> 在语言环境中返回此货币的本地化货币符号。也就是说，给定“USD”和 Locale.US，你会得到“$”，但给定“USD”和非美国语言环境，你会得到“US$”。
> 
> 如果 locale 只指定一种语言而不是语言和国家（例如 Locale.JAPANESE 或 {new Locale("en", "")} 而不是 Locale.JAPAN 或 {new Locale("en", "US" )})，返回 ISO 4217 货币代码。
> 
> 如果没有特定于区域设置的货币符号，则返回 ISO 4217 货币代码。

不是同一种方法，但可能相关。为什么我的设备语言环境对以货币排序的符号有影响？无论我使用哪种语言环境，1$ 都是不正确的。

有没有办法改变这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:21:09.633

该方法的行为是正确的。

并非所有国家/地区都希望在金额之前使用货币符号。

如果您总是希望货币格式与美国化的期望相匹配，请将语言环境保留为`Locale.US`. 如果您希望货币以本地化方式显示，请保持您的实现不变。

请参阅此简短指南（来自 Microsoft，不少于）：

[货币格式](https://docs.microsoft.com/en-us/globalization/locale/currency-formatting)

我猜您可能想要实现的是以适合其语言环境的格式显示货币？如果是这种情况，只需将语言环境与您使用的货币匹配，然后再调用该方法。

请注意，格式甚至可以在同一个国家/地区有所不同。在加拿大，说英语的人使用 $50.00 的格式是相当普遍的，而法语加拿大人可能使用 50,00 $。

另请参阅有关 UX 的这个问题：

[https://ux.stackexchange.com/questions/22574/where-to-place-currency-symbol-when-localizing-and-what-to-do-with-odd-symbols](https://ux.stackexchange.com/questions/22574/where-to-place-currency-symbol-when-localizing-and-what-to-do-with-odd-symbols)

# box-api - box.com API 是否具有像 Google Picker 一样的选择器控件

> ID：12490805
> 
> 赞同：0
> 
> 时间：2012-09-19T08:12:42.610
> 
> 标签：box-api

我们需要将 Box API 函数集成到我们的 Web 应用程序中。在使用 Google Drive 时，我们使用 Google Picker 作为 GUI 来选择文件。box.com API 有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:02:28.873

何墓，

你可能想试试 filepicker.io。他们为您构建了一个连接到 Box API 的选择器工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:53:08.377

Box API 工具只是为构建接口所需的信息提供后端接口，将接口元素留给应用程序处理。

如果您正在使用 Web 界面，一个常见的选择是[http://www.jstree.com/](http://www.jstree.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-23T16:24:31.813

根据您使用的语言，Box 已开始提供示例文件夹选择器。查看 SDK 页面

# php - 如何为新的 Jira 问题设置指定日期？

> ID：12490807
> 
> 赞同：0
> 
> 时间：2012-09-19T08:12:50.797
> 
> 标签：php, soap, jira

新 Jira 问题的创建日期始终`NOW();`是我们如何为新 Jira 问题设置指定日期？

```
$soapClient = 
    new SoapClient("http://jira:9090/rpc/soap/jirasoapservice-v2?wsdl");
$token = $soapClient->login('user', 'pass');
$issue=array(
    'created' => '2005-04-14T18:00:00Z',
    'type'=>3,
    'project'=>'XXX',
    'assignee'=>'user1',
    'reporter'=>'user1',
    'description'=>'test',
    'summary'=>'test'
);
$soapClient->createIssue($token, $issue); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-23T20:48:12.553

即使您的用例是有效的，但从 Jira 的角度来看，当问题真正在 Jira 中创建时总是会创建问题。

来自 Jira 6.4 API 文档（[https://docs.atlassian.com/jira/REST/latest/#d2e4329](https://docs.atlassian.com/jira/REST/latest/#d2e4329)）：

“可以使用 /rest/api/2/issue/createmeta 资源确定在创建时可以在字段参数或更新参数中设置的字段。如果未将字段配置为出现在创建屏幕上，则不会在createmeta里面，提交的话会出现字段验证错误。”

# javascript - 将嵌套函数内的 Ruby 的 yield 转换为 Node.js

> ID：12490812
> 
> 赞同：0
> 
> 时间：2012-09-19T08:13:16.140
> 
> 标签：javascript, ruby, node.js, yield

我正在尝试将一块 Ruby 代码转换为 Node.js。一件特别的作品让我很难过，关于`yield`. 代码如下：

```
each_pair(hash["args"][0]) do |key, value, pair|
   # perform operations
end

...

def each_pair(hash)
    hash["props"].each do |p|
        yield(p["key"], p["value"], p)
    end
end 
```

如果我正确阅读了这段代码，它会说“迭代哈希属性。对于每个元素，回调外部函数并使用给定`p["key"], p["value"], p`值执行操作。”

我无法真正理解这在 Javascript 中的外观。我熟悉编写更琐碎的闭包。是否可以进行转换？我猜它是这样的：

```
each_pair(hash["args"][0], function(key, value, pair) {
 // perform operations
}

...

function each_pair(hash, func) {
   hash["props"].forEach(p) {
       func(p["key"], p["value"], p)
   }
} 
```

但是感觉有些不对...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:21:25.923

不，这是一个不错的翻译。这有点欺骗性，因为 ruby​​ 中的任何方法都可以使用隐式块调用。如果它在那里，你可以`yield`。如果您有一段时间不使用它们，这是您忘记的速记技巧之一 :)

在 ruby​​ 版本中，您还可以添加一个`&block`参数并替换`yield(...`为`block.call(...`. 它在功能上是等效的。

# iis - IIS 未获取 Applicationhost.config 中配置的覆盖

> ID：12490818
> 
> 赞同：0
> 
> 时间：2012-09-19T08:13:46.520
> 
> 标签：iis, configuration, web-config

在 win8 机器上使用 VS2012 中的 Web 项目时，我遇到了一个在 google 上很常见的错误，即
HTTP 错误 500.19 - 内部服务器错误
此配置部分不能在此路径中使用。当该部分锁定在父级别时会发生这种情况。锁定是默认情况下 (overrideModeDefault="Deny") 或由具有 overrideMode="Deny" 或旧 allowOverride="false" 的位置标记显式设置的。

到处提到的解决方案是找到 C:\Windows\System32\inetsrv\Config\applicationHost.config 文件并更改以下内容：
section name="handlers" overrideModeDefault="Allow"

唉，我仍然得到完全相同的错误。

**我尝试过的事情：**
在 Windows 功能菜单中删除并重新启用 IIS，因为这是作为解决方案提到的。
仔细检查我的应用程序是否作为应用程序运行，而不是虚拟文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:08:49.407

如果您没有误解无法访问的部分（错误详细信息应提及它是哪个部分）并且您的应用正在添加处理程序，那么您可能会与 UAC 虚拟化发生冲突。

当您尝试访问该文件时，该文件将获得一个虚拟版本，这将是您始终获得的版本，但实际文件仍将提供给 IIS。一种检查方法是触发应该从 IIS 管理器写入 aphost 的更改（例如应用程序的 Windows 身份验证设置与默认值不同），并查看您在查看文件时是否得到它

下面详细介绍 UAC 包括 VirtualStore [http://technet.microsoft.com/en-us/magazine/2007.06.uac.aspx](http://technet.microsoft.com/en-us/magazine/2007.06.uac.aspx)

尝试以管理员身份打开文件，禁用 UAC 也是一个选项。您还可以使用 IIS 管理器将处理程序添加到您的应用程序，并将它们从 web.config 中删除。

没有 IIS 提供的所有工具来管理配置，例如 powershell 模块和命令行。

# parameters - 如果变量为真，则调用参数

> ID：12490819
> 
> 赞同：-1
> 
> 时间：2012-09-19T08:13:47.077
> 
> 标签：parameters, jasper-reports

以下问题是关于 Jasper-Report 的：

当变量为真时，我可以调用参数吗？我想多次调用一个参数，以便在特定的选定字段中写入一些内容。

感谢您的回答。

问候，罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:28:51.740

不，iReport 仅在报告填写过程开始时提示输入参数。这是因为所有参数值都必须在流程开始之前设置。一旦开始灌装，就不能更改参数。

（昨天阅读了您对其他问题的评论：[https](https://stackoverflow.com/questions/12473244/dynamic-text-input) ://stackoverflow.com/questions/12473244/dynamic-text-input ，我认为单独使用 iReport 或 JasperReports 无法实现您想要的。JasperReports并非旨在具有交互式报告填写过程。）

# css - 使用 CSS 在空白处换行

> ID：12490821
> 
> 赞同：-2
> 
> 时间：2012-09-19T08:13:59.120
> 
> 标签：css

我正在使用 CMS 为主页上的菜单添加标题。这是李的形式。

如果我的页面标题有两个单词“Hello World”，我希望在两个单词之间有一行返回，所以这些单词出现在两行上。我怎样才能做到这一点 ？

我尝试了自动换行、空白的组合，但没有强制使用空白。帮助表示赞赏。谢谢

更新：使用 SharePoint 并且无法将标签添加到标题。

```
 .s4-tn li.static > .menu-item {
    color:white;

    border:0px none transparent;
    background-color:transparent;
    height:38px;
    padding:7px 10px 5px;   
    font-size:1.2em;
    border-left: 1px solid transparent; 
    border-right: 1px solid white;  
    font-family:Arial, Helvetica, sans-serif;
    font-weight:100;        
}

.menu-item-text {
    width:6em;
    background:lime;
    height:30px;
    white-space:pre-line;

} 
```

浏览器呈现的 HTML 代码：

```
<div class="menu horizontal menu-horizontal">
        <ul class="root static">
            <li class="static"><a class="static menu-item" href="/expense" accesskey="1"><span class="additional-background"><span class="menu-item-text">Expense Form</span></span></a></li><li class="static"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:26:42.583

您可以使用`"Hello<br /> world"`

# jquery - 使用 jquery 添加事件单击时无法运行 swf 时出错？

> ID：12490822
> 
> 赞同：0
> 
> 时间：2012-09-19T08:14:02.787
> 
> 标签：jquery

我有一个示例代码：

```
<a title="click" href="test.swf" class="game-in-link" style="background:#000;width:100%;height:450px;display:block;">CLICK ON PLAY</a>
<div>
<!--
<object width="100%" height="450">
   <param name="movie" value="test.swf"></param>
   <param name="wmode" value="transparent"></param>
   <param name="allowFullScreen" value="true"></param>
   <param name="allowscriptaccess" value="always"></param>
   <embed src="test.swf" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="100%" height="450"></embed>
</object>
-->
</div> 
```

和jQuery：

```
// Get SWF file
jQuery("a.game-in-link").one('click', function () {
    var anchor = jQuery(this);
    anchor.html(anchor.html().replace('<div><!--', '').replace('--></div>', ''));
    anchor.removeAttr('href');
    return false;
}); 
```

=> Error can't filw test.swf, How to get SWF file with result is ?

```
<object width="100%" height="450">
   <param name="movie" value="test.swf"></param>
   <param name="wmode" value="transparent"></param>
   <param name="allowFullScreen" value="true"></param>
   <param name="allowscriptaccess" value="always"></param>
   <embed src="test.swf" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="100%" height="450"></embed>
</object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:23:21.617

你应该试试这个

```
<a title="click" href="test.swf" class="game-in-link" style="background:#000;width:100%;height:450px;display:block;">CLICK ON PLAY</a>
<div id="swfPlayer" style="display:none;">
<object width="100%" height="450">
   <param name="movie" value=""></param>
   <param name="wmode" value="transparent"></param>
   <param name="allowFullScreen" value="true"></param>
   <param name="allowscriptaccess" value="always"></param>
   <embed src="" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="100%" height="450"></embed>
</object>
</div> 
```

和jQuery

```
// Get SWF file
jQuery("a.game-in-link").one('click', function () {
    var anchor = jQuery(this);
    var swfPlayer= jQuery('#swfPlayer');
    swfPlayer.find('param[name=movie]').prop("value", anchor.prop("href"));
    swfPlayer.find('embed').prop("src", anchor.prop("href"));
    anchor.removeAttr('href');
    swfPlayer.show();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:41:30.887

这可以工作：

```
jQuery("a.game-in-link").one('click', function (e) {
    e.preventDefault();
    var anchor = jQuery(this).next(); //get next div
    var a = anchor.html().replace('<!--', '').replace('-->', '');
    anchor.html(a).prev().attr('href', '#'); //substitute html and a href
    return false;
}); 
```

# google-chrome-extension - 在 Chrome 打包应用程序中不提示保存

> ID：12490825
> 
> 赞同：4
> 
> 时间：2012-09-19T08:14:25.363
> 
> 标签：google-chrome-extension, google-chrome-app

我已经开始研究谷歌在 Chrome 中的打包应用程序，[http://developer.chrome.com/apps](http://developer.chrome.com/apps)这似乎是一项很棒的技术，但还处于早期阶段。

我的问题是：是否可以在没有提示的情况下使用应用程序中的 fileSystem API 将文件保存到计算机？我想制作一个可以保存日志文件等的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:44:54.380

我与参与打包应用程序开发的人员进行了一些对话，就像今天一样，如果不提示我们在应用程序沙箱之外，您将无法访问文件系统。但它可能会在未来出现。

但是有一个名为 Node-Webkit 的新项目，它与 Chrome 打包应用程序非常相似，您可以在其中使用 HTML、js 等在 Chrome 中开发应用程序，您还可以在浏览器中运行 nodejs。使用它你可以访问文件系统和更多的东西。

在这里查看： [https](https://github.com/rogerwang/node-webkit) ://github.com/rogerwang/node-webkit和 [https://github.com/rogerwang/node-webkit/wiki](https://github.com/rogerwang/node-webkit/wiki)

在 Node-Webkit 中加载和保存文件非常容易。看起来像这样

```
var gui = require("nw.gui");
var fs = require("fs");

//Save
fs.writeFile('message.txt', 'Hello Node', function (err) {
    if (err) throw err;
    console.log('It\'s saved!');
});

//Load
fs.readFile('message2.txt', 'utf8', function (err, data) {
    if (err) throw err;
    console.log(data);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-16T14:49:02.253

看起来您很快就能做到这一点——请参阅[https://groups.google.com/a/chromium.org/forum/#!topic/apps-dev/fu1TyjdYLEc](https://groups.google.com/a/chromium.org/forum/#!topic/apps-dev/fu1TyjdYLEc)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T18:22:39.063

有点儿。您可以保存到应用程序的“工作区”，这意味着文件将被保存，但用户或其他应用程序将无权访问它。它将位于沙盒存储区域中。为此，只需使用 HTML5 文件系统 API（[此处为教程](http://www.html5rocks.com/en/tutorials/file/filesystem/)）。

您需要：`"permissions": ["storage"]`在您的清单和 js 中，您可以执行以下操作：

```
var onInitFsCallback=function(fs) {
  fs.root.getFile('log.txt', {create: true}, function(fileEntry) {
    fileEntry.createWriter(function(fileWriter) {
      _this.fileWriter = fileWriter;
      fileWriter.onwriteend = onWriteEndCallback;
      fileWriter.onerror = onErrorCallback;
      fileWriter.write(myBlob);
      fileWriter.write(myString);
    }, errorHandler);

  }, errorHandler);

};
window.webkitRequestFileSystem([window.TEMPORARY or window.PERMANENT], sizeInBytes,
  onInitFsCallback, onErrorCallback); 
```

您还可以使用检查器工具（资源 -> 文件系统）检查应用程序的文件系统。从那里，您可以下载或删除文件。在 Chrome 24 中，您需要在 chrome://flags 中启用开发者工具实验，点击 DevTools 设置菜单，实验，并启用文件系统检查。

另一方面，如果您想保存在应用程序沙箱之外的任意位置，则出于安全原因需要用户提示。

# java - 在 postgresql 中转义特殊字符

> ID：12490828
> 
> 赞同：0
> 
> 时间：2012-09-19T08:14:49.417
> 
> 标签：java, jdbc, escaping, expression

我在 postgres 数据库中有以下字符串

> `ABC 123 !#$%*&'-(,)^?<\>~(())%%\\'',,//##$--++**??&&@!!~~\\`

我希望用户在从屏幕输入时能够搜索这些特殊字符。但是，程序不断抛出错误。我使用字符串来创建查询（这是框架性质，所以我无法更改 => 无法使用 PreparedStatement），所以发生了这个问题。我尝试了下面的方法，似乎这个函数可以解析一些特殊字符，但是当我`[@#$%*&'-(,)^?<\>~(())]`从屏幕输入并开始搜索时，它会抛出`org.seasar.extension.jdbc.IllegalBindArgSizeRuntimeException`

```
private String replaceSpecialCharacter(String str) {
    String strResult = str.replaceAll("\\\\", "\\\\\\\\\\\\\\\\");
     strResult = strResult.replaceAll("%", "\\\\\\\\\\\\%");

     strResult = strResult.replaceAll("％", "\\\\\\\\\\\\％");
     strResult = strResult.replaceAll("_", "\\\\\\\\\\\\_");
     strResult = strResult.replaceAll("＿", "\\\\\\\\\\\\＿");
     strResult = strResult.replaceAll("'", "\\\\\\\\\\\\'");
     strResult = strResult.replaceAll("\"", "\\\\\\\\\\\\\"");

     return strResult;
} 
```

我想知道有没有办法解决这个问题？

非常感谢

# javascript - 在图像点击时关闭灯箱效果

> ID：12490833
> 
> 赞同：-2
> 
> 时间：2012-09-19T08:15:03.490
> 
> 标签：javascript, html, css

我正在使用[这个灯箱效果](http://lokeshdhakar.com/projects/lightbox2/)：

我已经尝试了几个小时，但没有运气。如何在单击图像时关闭灯箱图像，而不是使用 x 或溢出空间。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:28:55.950

在 lightbox.js 中添加这个，在第 126 行之后（之后`appendTo($('body'));`：）

```
 $('.lb-nav').hide().on('click', function(e) {
    _this.end();
    return false;
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-25T15:50:00.507

```
this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return i.end(),!1})} 
```

找到这一行，并在两个类之后粘贴 .lb-nav：

```
this.$lightbox.find(".lb-loader, .lb-close, .lb-nav").on("click",function(){return i.end(),!1})} 
```

# c# - 大型标准输入上的 C# 进程中断

> ID：12490836
> 
> 赞同：0
> 
> 时间：2012-09-19T08:15:07.300
> 
> 标签：c#, process, gnupg

我需要通过 GnuPG 加密来加密文件的内容。为此，我从 FILE 中获取内容并通过 StandardInput 传递它。对于小数据，它工作正常，但是当我尝试写入超过 500KB 数据的 StandardInput 时，程序卡住了。

```
 process = new Process();
     process.StartInfo.WorkingDirectory = _bindirectory;
     process.StartInfo.RedirectStandardInput = true;
     process.StartInfo.RedirectStandardOutput = true;
     process.StartInfo.RedirectStandardError = true;
     process.StartInfo.FileName = gpgExecutable;
     process.StartInfo.Arguments = gpgOptions;
     process.StartInfo.UseShellExecute = false;
     process.StartInfo.CreateNoWindow = true;

     process.Start();
/*****Here is the line where Compiler Process Stucks on large data****/
     process.StandardInput.Write(inputText); 
     process.StandardInput.Flush();
     process.StandardInput.Close();

     process.OutputDataReceived += process_OutputDataReceived;
     process.ErrorDataReceived += process_ErrorDataReceived;
     process.BeginErrorReadLine();
     process.BeginOutputReadLine();
     process.WaitForExit(); 
```

请提出解决方案？我应该分块发送文件数据吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:40:00.960

顺便说一句，您试图通过的数据是什么？是文本还是二进制数据？如果是二进制，请尝试写入`StandardInput.BaseStream`。我认为标准输入默认处于文本模式，如果通过某些特定字节（如 EOF 或 NULL）可能会被破坏。请参阅[https://stackoverflow.com/a/1284753/717732](https://stackoverflow.com/a/1284753/717732)

编辑：

我在我的评论中是正确的 - 如果子进程读取数据的速度不够快（或根本不读取），则流缓冲区将被阻塞并且所有写入都会阻塞，就像缓冲区为空时读取阻塞一样。参见示例[如何避免标准输入卡在 c# 进程中](https://stackoverflow.com/questions/6731525/how-to-avoid-standard-input-getting-stuck-in-c-sharp-process?rq=1)

您可以轻松地验证这一点：创建一个在无限循环中从标准输入读取的微型应用程序。然后，用一个很小的测试应用程序临时替换您的 gpgexecutable 路径，看看是否阻塞。它很可能不会阻塞。

您绝对应该检查为什么子进程没有读取您尝试发送的数据。也许命令行参数是错误的？或者，如果一切看起来都很好，只是子进程工作得这么慢（您可以在 TaskMonitor 中检查进程的活动 - gpg 是休眠还是旋转？），然后将流编写代码放入一些后台工作程序中。

# c# - 在 SQL 变量上设置表单字段值

> ID：12490837
> 
> 赞同：0
> 
> 时间：2012-09-19T08:15:06.810
> 
> 标签：c#, asp.net, sql

我在 SQL 2012 存储过程中有以下内容：

```
V.VoterID IN (SELECT VoterID FROM vts_tbVoterAnswers WHERE AnswerID=@Seed) 
```

@Seed 是存储过程中的一个整数变量，它应该等于从名为 ddlSeed 的 ASP 表单字段中给出的值。

如何将 SQL 变量与表单字段的值连接起来？

编辑：你是对的@HeavenCore，我的问题似乎太模糊了，我很抱歉。好的，这是表单代码：

```
<%@ Page Language="c#" MasterPageFile="MsterPageTabs.master" AutoEventWireup="false"%>
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server"><table summary="maintable" class="TableLayoutContainer">
<tr>
<td class="contentCell" valign="top">
<table summary="exporttable" class="innerText">
<tr>
<td>
<table summary="exporttypetable" class="innerText">
<asp:PlaceHolder ID="CSVOptionPlaceHolder" runat="server">
</asp:PlaceHolder>
<tr>
<td width="155">
<br /><strong>
<asp:Literal ID="SeedLabel" runat="server" EnableViewState="False">Seed : </asp:Literal></strong>
</td>
<td>
<asp:DropDownList ID="ddlSeed" runat="server">
<asp:ListItem Value=""> All </asp:ListItem>
<asp:ListItem Value="32"> Yes </asp:ListItem>
<asp:ListItem Value="31"> No </asp:ListItem>
</asp:DropDownList></td></tr></table>
</td></tr></table>
<asp:Button ID="ExportDataButton" runat="server" Text="Export CSV"></asp:Button></td></tr>
</table>
</asp:Content> 
```

基本上它的作用是允许用户从下拉菜单中进行选择并提交。下拉列表中的每个选项都有一个值：

[空] 表示全部 32 表示是 31 表示否

提交后，下拉列表的值应成为以下存储过程中SQL 变量**@Seed的值：**

```
USE [SurveyDB20652]
GO

SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER ON
GO
/// <summary>
/// Return the data needed to export a CSV  file
/// </summary>
*/
ALTER PROCEDURE [dbo].[vts_spVoterExportCSVData]
                @SurveyID int,
                @StartDate datetime,
                @EndDate datetime,
                @Seed int
AS

SELECT  SUBSTRING(Q.QuestionText,1,20) as QuestionText,Q.QuestionId,
 AnswerID,SelectionModeId,AnswerTypeId, 
SUBSTRING(Q.QuestionText,1,20)+'...'+' | '+ AnswerText   as ColumnHeader ,
AnswerText,
Q.DisplayOrder QuestionDisplayOrder,
Q.QuestionId,
Q.Alias QuestionAlias,
Q.QuestionIdText QuestionIdText,
A.DisplayOrder AnswerDisplayOrder,
A.AnswerId ,
A.AnswerAlias,Q.ParentQuestionid,
    case when q.parentQuestionId is null then null
    else (select count(*)+1 from vts_tbquestion q1 
             where q1.parentquestionid=q.parentquestionid
             and   q1.questionid<q.questionid
             ) 
    end as roworder,
    case when q.parentQuestionId is null then null
    else (select QuestionText from vts_tbquestion q1 
             where q1.questionid=q.parentquestionid
             ) 
    end as ParentQuestiontext,
    case when q.parentQuestionId is null then null
    else (select QuestionIdText from vts_tbquestion q1 
             where q1.questionid=q.parentquestionid
             ) 
    end as ParentQuestionIdtext,
    case when q.parentQuestionId is null then null
    else (select ALIAS from vts_tbquestion q1 
             where q1.questionid=q.parentquestionid
             ) 
    end as ParentQuestionAliastext,
A.AnswerIDText AnswerIdText
 FROM vts_tbQuestion Q
INNER JOIN vts_tbAnswer A
    ON A.QuestionID = Q.QuestionID
WHERE 
    SurveyID = @SurveyID  
ORDER BY Q.DisplayOrder, Q.QuestionID, A.DisplayOrder

SELECT
    V.VoterID,
    V.VoteDate,
    V.StartDate,
    V.IPSource,
    V.ContextUserName as username,
    (SELECT sum(ScorePoint) FROM vts_tbVoter 
        INNER JOIN vts_tbVoterAnswers
            ON vts_tbVoterAnswers.VoterID = vts_tbVoter.VoterID
        INNER JOIN vts_tbAnswer
            ON vts_tbAnswer.AnswerID = vts_tbVoterAnswers.AnswerID
        WHERE vts_tbVoter.VoterID = V.VoterID) AS Score
    FROM vts_tbVoter V
    WHERE 
        V.SurveyID = @SurveyID AND
        V.Validated <> 0 AND
        DATEDIFF (d,@startDate,V.VoteDate) >= 0 AND DATEDIFF (d,@endDate,V.VoteDate) <= 0 AND
        V.VoterID IN (SELECT VoterID FROM vts_tbVoterAnswers WHERE AnswerID=@Seed)
    ORDER BY V.VoterID DESC

SELECT
    V.VoterID,
    VA.AnswerID,
    SectionNumber,
    VA.AnswerText,
    AnswerTypeId,
    SelectionModeId,
    Q.QuestionId,
    A.AnswerText AnswerAnswerText,
    A.DisplayOrder AnswerDisplayOrder,
A.AnswerAlias,
A.AnswerIDText AnswerIdAlias
FROM vts_tbVoterAnswers VA
INNER JOIN vts_tbVoter V
    ON V.VoterID = VA.VoterID
INNER JOIN vts_tbAnswer A
    ON VA.AnswerId=A.AnswerId
INNER JOIN vts_tbQuestion Q
     ON A.QuestionId=Q.QuestionId
WHERE 
    V.SurveyID = @SurveyID AND
    V.Validated <> 0 AND
    DATEDIFF (d,@startDate,V.VoteDate) >= 0 AND DATEDIFF (d,@endDate,V.VoteDate) <= 0 AND
    V.VoterID IN (SELECT VoterID FROM vts_tbVoterAnswers WHERE AnswerID=@Seed)

ORDER BY V.VoterID DESC 
```

上述过程基本上用作过滤器。它过滤掉所有在 vts_tbVoterAnswers 表中没有 VoterID 条目的数据库条目，该表的对应 AnswerID 条目等于 @Seed 的值（可以是 '' 或 32 或 31）

因此，如果在下拉列表中：我选择全部，则 @Seed='' : 将选择表 vts_tbVoterAnswers 中的所有条目如果我选择是，则 @Seed='32': 将过滤掉 VoterID 120 及其所有条目如果我选择否，则 @Seed='31' : 将过滤掉 VoterID 109 及其所有条目

vts_tbVoterAnswers 表如下所示：

```
VoterID | AnswerID | SectionNumber | AnswerText

109     | 3        | 0             | 12/03/2000

109     | 23       | 0             | NULL

109     | 32       | 0             | NULL

120     | 3        | 0             | 26/11/1979

120     | 23       | 0             | NULL

120     | 31       | 0             | NULL 
```

所以我的问题是如何将@Seer SQL 变量与下拉列表给出的值连接起来.. :)

我希望这个解释比我以前的解释更好。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:48:25.993

你的问题很模糊，

假设 @Seed 是你的过程中的一个参数。假设您的 proc 被称为 usp_GetVotes

您可以从 ASP 调用 proc，将表单值传递给参数：

```
'#### Make sure you have adovbs.inc

'#### Ready objects
Set db = CreateObject("ADODB.Connection") 
set dbc = CreateObject("ADODB.Command") 

'#### Connect to SQL
db.Open "YourConnectionString"

'#### Build & Execute Command
With dbc
    .ActiveConnection = db
    .CommandText = "vts_spVoterExportCSVData" 
    .CommandType = adCmdStoredProc
    .Parameters.Append .CreateParameter("@Seed", adInt, adParamInput, , request.form("ddlSeed"))
    set rs = .Execute 
End With 
```

或者，如果你想变得又快又脏：

```
set rs = db.execute("EXEC vts_spVoterExportCSVData @Seed = " & replace(request.form("ddlSeed"),"'","''")) 
```

**编辑 1：您已澄清问题的 C# 版本：**

```
SqlConnection db = new SqlConnection(YourConnectionString);
SqlCommand dbc = new SqlCommand("vts_spVoterExportCSVData", db);
dbc.CommandType = CommandType.StoredProcedure;

SqlParameter Seed = dbc.Parameters.Add("@Seed", SqlDbType.Int);
Seed.Direction = ParameterDirection.Input;
Seed.Value = request.form("ddlSeed");
db.Open();

SqlDataReader Results = dbc.ExecuteReader();

while (Results.Read())  {
    //Results["VoterID"].ToString();
    //Results["AnswerID"].ToString();
    //Results["SectionNumber"].ToString();
    //Results["AnswerText"].ToString();
};

Results.Close(); 
```

# json - 在单声道触摸/机器人中序列化/反序列化 JSON

> ID：12490846
> 
> 赞同：1
> 
> 时间：2012-09-19T08:15:46.223
> 
> 标签：json, xamarin.ios, cross-platform, xamarin.android

是否有一种跨平台的方式来序列化/反序列化单触摸/机器人中的 JSON，而不使用像 Newtonsoft.Json 这样的第三方库？

我必须每个平台都有一个对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:16:39.117

适用于 Android 的 MonoTouch 和 Mono 都附带了一个[`System.Json.dll`](http://msdn.microsoft.com/en-us/library/system.json%28v=vs.95%29.aspx)程序集，该程序集提供了您在 Silverlight（和 .NET 4.5）中可以找到的相同功能集。

注意：MT 和 M4A 配置文件均基于 Silverlight，并随着时间的推移而增强以涵盖更多 API。

# css - 在以下上下文中使用 0px 而不是 0

> ID：12490850
> 
> 赞同：0
> 
> 时间：2012-09-19T08:16:00.107
> 
> 标签：css

我想知道在以下情况下我应该使用 0px 还是 0。

```
box-shadow:inset 0px 15px 10px -15px #000 
```

或者

```
box-shadow:inset 0 15px 10px -15px #000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:18:11.113

使用 0 时，几乎总是适合单独使用它。

指定测量类型的原因是为了明确您期望的测量数量。在 0 的情况下，测量类型是什么（在这种情况下）并不重要，因为 0 大象与 0px 相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:19:08.967

它没有任何区别。0 是 0px 是 0em 是 0%。这是您不需要单位的特殊情况。语义上由你决定

有两个微小的提供程序：首先，如果您使用 0px，那么在开发过程中，当您使用 web 检查器或 firebug 时，您可以通过按向上和向下箭头来更改值。如果您使用 0 那么它不知道要使用什么单位，并且该技巧将不起作用。其次，如果使用 0 而不是 0px，则可以节省 2 个字符，这就像世界上最小的文件大小优化。但它并不完全值得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:20:30.463

他们都工作，所以这几乎是个人喜好。

0 的特殊之处在于它表示任何单位的 0，但我通常会声明测量单位以方便阅读。

[http://jsfiddle.net/Kyle_Sevenoaks/UFgpt/](http://jsfiddle.net/Kyle_Sevenoaks/UFgpt/)

# django - Django：你为 Windows 推荐哪个搜索库？

> ID：12490856
> 
> 赞同：-1
> 
> 时间：2012-09-19T08:16:49.730
> 
> 标签：django, search, sphinx, django-haystack

我在 Windows 上开发站点，但是当我尝试添加搜索时，我遇到了 Sphinx 和 Haystack+Xapian 的太多问题。可能的解决方案是去 Linux，但我不想改变我的工作环境。您为 Windows 推荐什么搜索库/服务器/等？您使用过哪个版本、存储库、教程？也许您可以编写自己的迷你教程？我对这个问题感到非常沮丧，并且几天都无法前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:31:28.903

最后我让 Sphinx 工作。在多个表中搜索仍然存在问题，但我相信这是可以解决的。

有用的链接：
[如何使用 MySQL 和 PHP 在 XAMPP for Windows 7 上安装和实现 Sphinx Search](http://blog.robbsnet.com/2011/07/how-to-install-and-implement-sphinx.html)

[教程：在 Windows 上安装](http://sphinxsearch.com/forum/view.html?id=2972)

[在 Windows 上安装 Sphinx](http://sphinxsearch.com/docs/1.10/installing-windows.html)

在以下代码片段中，使用了我系统上的路径。

views.py 中的搜索功能：

```
def search(request):
    from sphinxapi import SphinxClient, SPH_MATCH_ANY, SPH_SORT_RELEVANCE
    S = request.GET['search']
    client = SphinxClient()
    client.SetServer('127.0.0.1', 9312)
    #client.SetSelect("*, AVG(price) AS avgprice")
    client.SetMatchMode(SPH_MATCH_ANY)
    client.SetSortMode(SPH_SORT_RELEVANCE)
    client.SetFieldWeights({'header': 20, 'text': 10})
    result = client.Query(S, '*')
    matches = result["matches"]
    ids = [match["id"] for match in matches]
    article = {"header": "Search results", "text": ""}
    if ids != []:
        objects = Main.objects.filter(pk__in = ids)
        for object in objects:
            url = request.build_absolute_uri(object.get_absolute_url())
            article["text"] += "<a href=" + url + ">" + object.header + "</a>" + "\n"
        ResponseDict = {"articles": [article]}
    else:
        ResponseDict = {"articles": []}
    return render_to_response("index.html", ResponseDict, 
        context_instance = RequestContext(request)) 
```

sphinx.conf（位于 ...\Sphinx\bin 文件夹中）：

```
source src1
{
    type = pgsql
    sql_host = localhost
    sql_user = <db user>
    sql_pass = <pwd>
    sql_db = <db name>
    sql_port = 5432
    sql_query = \
        SELECT id, header, text \
        FROM app_main
    sql_query_info = SELECT * FROM app_main WHERE id=$id
    sql_attr_uint = source_id
}

source src2
{
    type = pgsql
    sql_host = localhost
    sql_user = <db user>
    sql_pass = <pwd>
    sql_db = <db name>
    sql_port = 5432
    sql_query = \
        SELECT id, header, text \
        FROM app_comment
    sql_query_info = SELECT * FROM app_comment WHERE id=$id
    sql_attr_uint = source_id
}

index test1
{
    source = src1
    source = src2
    path = D:/blizzard/Projects/Python/Web/moz455/app/sphinx/data/test1
    docinfo = extern
    charset_type = utf-8
}

index testrt
{
    type = rt
    rt_mem_limit = 32M
    path = D:/blizzard/Projects/Python/Web/moz455/app/sphinx/data/testrt
    charset_type = utf-8
    rt_field = title
    rt_field = content
    rt_attr_uint = gid
}

indexer
{
    mem_limit = 32M
}

searchd
{
    listen = 127.0.0.1:9312
    log = D:/blizzard/Projects/Python/Web/moz455/app/sphinx/log/searchd.log
    query_log = D:/blizzard/Projects/Python/Web/moz455/app/sphinx/log/query.log
    read_timeout = 5
    max_children = 30
    pid_file = D:/blizzard/Projects/Python/Web/moz455/app/sphinx/log/searchd.pid
    max_matches = 1000
    seamless_rotate = 1
    preopen_indexes = 1
    unlink_old = 1
    workers = threads # for RT to work
    binlog_path = D:/blizzard/Projects/Python/Web/moz455/app/sphinx/data
} 
```

在 app 文件夹中创建 \sphinx、\sphinx\data 和 \sphinx\log 文件夹后，搜索可用，使用命令进行索引

```
D:/Old/Sphinx/bin/indexer --config D:/Old/Sphinx/bin/sphinx.conf --all 
```

并使用命令开始搜索

```
D:/Old/Sphinx/bin/searchd --config D:/Old/Sphinx/bin/sphinx.conf 
```

# php - 使用 mysql 和 php 合并和存储多个 csv 文件的最佳方法

> ID：12490857
> 
> 赞同：3
> 
> 时间：2012-09-19T08:16:58.793
> 
> 标签：php, mysql, performance, csv

我正在与一家公司合作，该公司每天都会给我一个`CSV`大约 25.000 行的文件。前一天与前一天的区别在于`CSV`，在最新的一天中，一些行（比总数少很多）被删除，而另一些则被添加。所以这两个文件共有大约 24900 行。

我必须及时存储所有行。所以每天我都必须用当前的 CSV 更新我在 DB 中的表。

我想想：

```
<?php
   $fh = fopen($actual_csv, 'r');
   $contents = fread($fh, filesize($actual_csv));
   fclose($fh);
   $fileLines = explode("\n", $contents);
   for ($i = 1; $i < count($fileLines) - 1; $i++) {
    $fieldList = explode(';', $fileLines[$i]);
        //$fieldList[0] is my unique id
        if(mysql_num_rows(mysql_query("SELECT * FROM table_where_i_store_all WHERE id='$fieldList[0]'"))<=0){
           mysql_query("INSERT INTO table_where_i_store_all (column names..) VALUES ('$fieldList[0],........')"); // there are many column so i don't write it..
        }
   }
?> 
```

我认为这不是很强大和快速。有没有更好的方法？谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:20:41.783

在字段上创建唯一索引`id`（也许您已经完成了）并使用`INSERT IGNORE`或`INSERT ... ON DUPLICATE KEY UPDATE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:04:34.070

ALTER TABLE table_where_i_store_all 添加唯一（id）；

```
$fileLines = explode("\n", $contents);
$linemax = count( $fileLines )-1;

if( $linemax < 1 ) // empty file?
  return;

$SQL = "INSERT IGNORE INTO table_where_i_store_all (column_names) VALUES ";

for ($i = 1; $i < $linemax; $i++) {
   $fieldList = explode(';', $fileLines[$i]);
   //$fieldList[0] is my unique id

   $SQL .= "('$fieldList[0],........'),";        
}
$SQL = substr( $SQL, 0, strlen($SQL)-1);  // remove extra comma from end
$res = mysql_query($SQL); 
```

# php - 在查询所有选定数据的 WHERE 子句中使用复选框数组

> ID：12490858
> 
> 赞同：0
> 
> 时间：2012-09-19T08:17:19.153
> 
> 标签：php, mysql

我已经查看了一些在查询中使用数组的示例，但我似乎无法得到对我有帮助的东西......

我需要使用从复选框到处理页面的一组选定项目，并在查询中使用它们。请注意，我的所有数据都是实时的，从复选框到查询中使用/或需要的数据的数据。

第一部分，query1 计算所选数组的总数（来自复选框），第二部分，query2 显示来自所选数组的数据库中的所有数据。

有人可以帮我解决这个问题吗？（如果只选择了一项，则两个查询都可以正常工作，但不能进行多项选择）我的数据数组的名称是“interest”，我尝试在 WHERE 查询中使用 implode 和 IN 子句：

```
<?php
$date = date("F-Y",$_SESSION[diesel_date]);
$matches = implode(',', $_POST[interest]);

include("../xxx.xxx");
$cxn = mysqli_connect($host,$user,$password,$dbname);
$query = "SELECT SUM(`diesel_qty`) d_q FROM `diesel` 
            WHERE MONTH(`diesel_date`)= MONTH( '$dd' )
            AND `diesel_vehicle_no` IN ('$matches') ";
$result = mysqli_query($cxn,$query);
    while($row = mysqli_fetch_assoc($result))
    {
    extract($row);
    echo "<h7>Total Diesel Filled during $dd is&nbsp;</h7><b>";
    print $d_q;
    echo "</b><h7>&nbsp;Litres.</h7><br><br>\n";
    }
?>
<?php
      include("../xxx.xxx");
$cxn = mysqli_connect($host,$user,$password,$dbname)
    or die ("Couldn't connect to server.");
$query = "SELECT
                  `diesel_date`, 
                  `diesel_time`, 
                  `location_id`, 
                  `company_id`, 
                  `diesel_vehicle_no`, 
                  `diesel_driver_name`, 
                  `diesel_qty`,
                  `diesel_feed_id` 
    FROM`diesel` 
    WHERE MONTH(`diesel_date`)= MONTH( '$dd' )
    AND `diesel_vehicle_no` IN ('$matches') 
    ORDER BY `diesel_date`";
$result = mysqli_query($cxn,$query)
    or die ("Couldn't execute query.");

echo "<table><br>
<tr>
 <th>DieselFillDate</th>
 <th>Time</th>
 <th>Location</th>
 <th>CompanyOwning Plant/Vehicle</th>
 <th>Plant/Vehicle No</th>
 <th>DriversName</th>
 <th>Quantity</th>
 <th>DieselFeed</th>
</tr>";
while($row = mysqli_fetch_assoc($result))
{
    extract($row);
    echo "<tr>\n
        <td width='100'>$diesel_date</td>\n
        <td>$diesel_time</td>\n
        <td>$location_id</td>\n
        <td>$company_id</td>\n
        <td>$diesel_vehicle_no</td>\n
        <td>$diesel_driver_name</td>\n
        <td>$diesel_qty</td>\n
        <td>$diesel_feed_id</td>\n
        </tr>\n";
}
echo "</table><br>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:56:48.653

我找到了解决方案，也许这可以帮助其他正在努力解决类似问题的人。

我首先将数组分配给一个变量...

```
$matches = $_POST[interest]; 
```

然后换...

```
$matches = implode(',', $_POST[interest]); 
```

有了这个

```
$amf = implode("', '", array_keys($matches)); 
```

我的脚本遇到的问题是我的变量不是数字，而是一个字符串，因此我必须在 implode 语句中插入“”。这是代码，它现在可以完美运行：

```
<?php 
$date = date("F-Y",$_SESSION[diesel_date]); 
$amf = implode("', '", array_keys($matches));

include("../xxx.xxx"); 
$cxn = mysqli_connect($host,$user,$password,$dbname); 
$query = "SELECT SUM(`diesel_qty`) d_q FROM `diesel`  
        WHERE MONTH(`diesel_date`)= MONTH( '$dd' ) 
        AND `diesel_vehicle_no` IN ('$matches') "; 
$result = mysqli_query($cxn,$query); 
    while($row = mysqli_fetch_assoc($result)) 
    { 
    extract($row); 
    echo "<h7>Total Diesel Filled during $dd is&nbsp;</h7><b>"; 
    print $d_q; 
    echo "</b><h7>&nbsp;Litres.</h7><br><br>\n"; 
    } 
?> 
<?php 
  include("../xxx.xxx"); 
$cxn = mysqli_connect($host,$user,$password,$dbname) 
    or die ("Couldn't connect to server."); 
$query = "SELECT 
              `diesel_date`,  
              `diesel_time`,  
              `location_id`,  
              `company_id`,  
              `diesel_vehicle_no`,  
              `diesel_driver_name`,  
              `diesel_qty`, 
              `diesel_feed_id`  
    FROM`diesel`  
    WHERE MONTH(`diesel_date`)= MONTH( '$dd' ) 
    AND `diesel_vehicle_no` IN ('$matches')  
    ORDER BY `diesel_date`"; 
$result = mysqli_query($cxn,$query) 
or die ("Couldn't execute query."); 

echo "<table><br> 
<tr> 
 <th>DieselFillDate</th> 
 <th>Time</th> 
 <th>Location</th> 
 <th>CompanyOwning Plant/Vehicle</th> 
 <th>Plant/Vehicle No</th> 
 <th>DriversName</th> 
 <th>Quantity</th> 
 <th>DieselFeed</th> 
</tr>"; 
while($row = mysqli_fetch_assoc($result)) 
{ 
    extract($row); 
    echo "<tr>\n 
    <td width='100'>$diesel_date</td>\n 
    <td>$diesel_time</td>\n 
    <td>$location_id</td>\n 
    <td>$company_id</td>\n 
    <td>$diesel_vehicle_no</td>\n 
    <td>$diesel_driver_name</td>\n 
    <td>$diesel_qty</td>\n 
    <td>$diesel_feed_id</td>\n 
    </tr>\n"; 
} 
echo "</table><br>"; 
?> 
```

# android - VMWare上的Android屏幕旋转

> ID：12490859
> 
> 赞同：4
> 
> 时间：2012-09-19T08:17:26.703
> 
> 标签：android, screen, vmware

有没有办法旋转安装在 VMWare 上的 Android 屏幕？

这些键在 VMWare 上不起作用：

KEYPAD_7，Ctrl-F11

KEYPAD_9, Ctrl-F12

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-21T08:29:03.820

我觉得我可以

我在我的 JellyBean 上安装了一个应用程序，它是 Android x86 4.2，它改变了我的屏幕旋转，甚至在**重新启动**后，**重置**什么都不重置，屏幕还是一样

经过几个小时的搜索，我发现没有任何建议

`Num`关闭 `7`，`9`不起作用_

但最后我得到了解决方案

按`**ctrl + F9**`多次对我来说是**3** ，其他三个如下

### `**ctrl + F9**` 对于 0 或 360 度

### `**ctrl + F10**` 90度

### `**ctrl + F11**`180度

### `**ctrl + F12**`270度

# vb.net - 在两个边界内查询 vb 数组的日期时间的最快方法

> ID：12490861
> 
> 赞同：0
> 
> 时间：2012-09-19T08:17:33.397
> 
> 标签：vb.net, visual-studio, visual-studio-2005

我正在编写一个函数来增加原始计算数据的时间尺度，时间密度约为 2 分钟到 5 分钟（之后还有其他更大的尺度）。有超过 100k 个数据点保存在一个不按时间顺序排列的数组中。我正在寻找查询数组并在两个日期时间内查找数据的最快方法。在代码运行时，每个数据点只需要使用一次，但由于数据不按顺序读取，因此必须多次读取。我对如何做到这一点有几个想法：

只需查看数组中的所有时间值，检查它们是否在给定的两个日期时间内。这将强制代码在每个新时间点运行整个数组约 50k 次。

使用我的时间数据在数组中创建一个布尔值，如果该值已被使用，该值将变为真。这将在日期时间比较之前对已使用的点进行布尔检查，这应该更快。

将数组重新组织成顺序，我不确定根据日期时间这需要多长时间。它首先会大大增加导入数据所需的时间，但是它可以使扩展查询更快。关于重新排序数组与乱序运行它所花费的时间比率的任何想法？

欢迎任何其他建议。

如果人们觉得有必要，我会添加一些代码。提前致谢。

编辑：根据要求提供一些示例。

以下是数组的定义：

```
 Dim ScaleDate(0) As Date
    Dim ScaleData(0) As Double 
```

我使用`redim preserve`SQL 将数据添加到其中。

这是从数组复制的日期时间点的示例。

```
(0) = #2/12/2012 12:01:36 AM# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:13:37.337

首先，正如 Tim Schmelter 建议的那样，我会使用 a`List(Of T)`而不是数组。它可能会更有效率，并且肯定会更容易使用。其次，我建议您定义自己的类型，该类型存储单个项目的所有数据，而不是将项目的每个属性存储在单独的列表中。这样做会使将来更容易修改，但也会更有效，因为您只需要调整一个列表而不是两个：

```
Public Class MyItem
    Public Property ScaleDate() As Date
        Get
            Return _scaleDate
        End Get
        Set(ByVal value As Date)
            _scaleDate = value
        End Set
    End Property
    Private _scaleDate As Date

    Public Property ScaleData() As Double
        Get
            Return _scaleData
        End Get
        Set(ByVal value As Double)
            _scaleData = value
        End Set
    End Property
    Private _scaleData As Double
End Class

Private _myItems As New List(Of MyItem)() 
```

很难说哪个会更快，排序列表或搜索列表。这完全取决于它的大小、更改的频率以及您搜索它的频率。因此，我建议您尝试这两种选择，并亲自查看哪种方案在您的场景中效果更好。

对于排序，如果你有自己的类型，你可以简单地实现它`IComparable(Of T)`，然后调用`Sort`列表中的方法：

```
Public Class MyItem
    Implements IComparable(Of MyItem)

    Public Property ScaleDate() As Date
        Get
            Return _scaleDate
        End Get
        Set(ByVal value As Date)
            _scaleDate = value
        End Set
    End Property
    Private _scaleDate As Date

    Public Property ScaleData() As Double
        Get
            Return _scaleData
        End Get
        Set(ByVal value As Double)
            _scaleData = value
        End Set
    End Property
    Private _scaleData As Double

    Public Function CompareTo(ByVal other As MyItem) As Integer Implements IComparable(Of MyItem).CompareTo
        Return ScaleDate.CompareTo(other.ScaleDate)
    End Function
End Class

Private _myItems As New List(Of MyItem)()

'To sort the list after it's been modified:
_myItems.Sort() 
```

您只想在每次修改列表时对列表进行一次排序。您不想在每次搜索列表时对其进行排序。此外，对它本身进行排序并不会使从前到后的搜索速度更快，因此您需要实现一个快速搜索排序列表的 find 方法。例如，这些方面的东西应该起作用：

```
Private Function FindIndex(ByVal startDate As Date) As Integer
    FindIndex(startDate, 0, _myItems.Count - 1)
End Function

Private Function FindIndex(ByVal startDate As Date, ByVal startIndex As Integer, ByVal endIndex As Integer) As Integer
    If endIndex >= startIndex Then
        Dim midIndex As Integer = ((endIndex - startIndex) \ 2) + startIndex
        If _myItems(midIndex).ScaleDate < startDate Then
            Return FindIndex(startDate, midIndex, endIndex)
        Else
            Return FindIndex(startDate, startIndex, midIndex)
        End If
    Else
        Return startIndex
    End If
End Function 
```

为了搜索未排序的列表，我只需在整个列表上从前到后循环，然后创建一个包含所有匹配项的新列表：

```
Dim matches As New List(Of MyItem)()
For Each item As MyItem In _myItems
    If (item.ScaleDate >= startDate) And (item.ScaleDate <= endDate) Then
        matches.Add(item)
    End If
Next 
```

或者，如果这些项目上的日期大多是连续的，它们之间没有巨大的间隔，那么使用一个`Dictionary(Of Date, List(Of MyItem))`对象来存储你的项目列表可能是值得的。这将包含每个日期的单独项目列表，所有项目都存储在哈希表中。因此，要获取或设置特定日期的项目列表会非常快，但是要获取日期范围内所有项目的列表，您必须遍历日期范围内的每一天并获取列表那天从字典中，并将它们组合成一个匹配列表：

```
Dim _days As New Dictionary(Of Date, List(Of MyItem))()

'You'd need to loop through and add each item with code like this:
Private Sub AddItem(ByVal item As MyItem)
    Dim dayItems As List(Of MyItem) = Nothing
    _days.TryGetValue(item.ScaleDate, dayItems)
    If dayItems Is Nothing Then
        dayItems = New List(Of MyItem)()
        _days(item.ScaleDate) = dayItems
    End If
    dayItems.Add(item)
End Sub

'And then to find all the items in a date range, you could do something like this:
Private Function FindItemsInRange(ByVal startDate As Date, ByVal endDate As Date) As List(Of MyItem)
    Dim matches As New List(Of MyItem)()
    Dim i As Date = startDate
    While i <= endDate
        Dim dayItems As List(Of MyItem) = Nothing
        _days.TryGetValue(i, dayItems)
        If dayItems Is Nothing Then
            matches.AddRange(dayItems)
        End If
        i = i.AddDays(1)
    End While
    Return matches
End Function 
```

# r - 将文件从 PostgreSQL 导入到 R

> ID：12490863
> 
> 赞同：15
> 
> 时间：2012-09-19T08:17:51.150
> 
> 标签：r, postgresql

我有一个大数据集，我将在 R 软件中进行一些分析。虽然我无法将数据正确导入 R。

我收到此错误：

```
postgresqlNewConnection(drv, ...) 中的错误：RS-DBI 驱动程序：（无法连接数据库名称“Intel”上的 User@local

```

我已经使用 PostgreSQL 打开数据并以某种方式对其进行管理。如何将 PostgreSQL 中的现有数据导入 R 软件？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-04T10:30:55.113

```
drv <- dbDriver("PostgreSQL")
con <- dbConnect(drv, host='localhost', port='5432', dbname='Swiss',
                 user='postgres', password='123456') 
```

此外，应安装 R 中的“RPostgreSQL”包。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T08:31:31.093

试试 R 包 RPostgreSQL [http://cran.r-project.org/web/packages/RPostgreSQL/](http://cran.r-project.org/web/packages/RPostgreSQL/)。[您可以在http://code.google.com/p/rpostgresql/](http://code.google.com/p/rpostgresql/)中查看如何使用它。例子：

```
library(RPostgreSQL)
drv <- dbDriver("PostgreSQL")   ## loads the PostgreSQL driver
con <- dbConnect(drv, dbname="R_Project")   ## Open a connection 
rs <- dbSendQuery(con, "select * from R_Users")   ## Submits a statement
fetch(rs,n=-1)   ## fetch all elements from the result set
dbGetQuery(con, "select * from R_packages")   ## Submit and execute the query
dbDisconnect(con)   ## Closes the connection
dbUnloadDriver(drv)   # Frees all the resources on the driver 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-03T09:56:37.807

在远程连接之前，您必须在 PostgreSQL 服务器上配置两件事。这是如何在 Linux 下进行配置的说明：

# 1.找到并配置postgresql.conf，让TCP服务接受来自任何主机的连接，而不仅仅是localhost

> 查找/-名称“postgresql.conf”

在我的 linux 操作系统中，该文件位于 /etc/postgresql/9.6/main/ 中，所以我在那里对其进行了修改。添加行**“listen_addresses = '*'”**，如下所示：

> /etc/postgresql/9.6/main/postgresql.conf

```
#listen_addresses = 'localhost'         # what IP address(es) to listen on;
# insert the following line
listen_addresses = '*' 
```

# 2\. 查找并配置 pg_hba.conf 以允许从任何主机连接客户端

> 须藤查找/-名称“pg_hba.conf”

在我的 linux 操作系统中，该文件位于 /etc/postgresql/9.6/main/ 中，所以我在那里对其进行了修改。添加**“host all all 0.0.0.0/0”**行，如下所示：

> 须藤纳米/etc/postgresql/9.6/main/pg_hba.conf

```
# Put your actual configuration here
# ----------------------------------
#
# If you want to allow non-local connections, you need to add more
# "host" records.  In that case you will also need to make PostgreSQL
# listen on a non-local interface via the listen_addresses
# configuration parameter, or via the -i or -h command line switches.
#
# insert the following line
host all all 0.0.0.0/0 trust 
```

# 3.停止和启动服务器

> sudo 服务 postgresql 停止
> 
> sudo 服务 postgresql 启动

# 4\. 与您的客户连接，现在应该可以工作了。

祝你好运！

# jobs - 如何在 Linux 上使用 libdrizzle 配置 gearmand？

> ID：12490870
> 
> 赞同：4
> 
> 时间：2012-09-19T08:18:24.000
> 
> 标签：jobs, gearman, libdrizzle

我一直在尝试使用 gearman 的持久工作队列。当我尝试使用 libdrizzle 时-

```
gearmand -q libdrizzle --libdrizzle-host=127.0.0.1 --libdrizzle-user=gearman --libdrizzle-password=secret --libdrizzle-db=some_db --libdrizzle-table=gearman_queue --libdrizzle-mysql 
```

它给了我这样的错误-

```
gearmand: unknown option libdrizzle-host 
```

还有一件奇怪的事情是，当我这样做时，`man gearmand`它没有 libdrizzle 选项。我应该怎么办？我想要mysql中的持久队列。我曾尝试使用`gearman_udf_mysql`，但它也没有奏效。我已经发布了问题。请参阅[mysql 在哪里保存 gearman mysql udf 文件的路径？](https://stackoverflow.com/questions/12476391/where-does-mysql-save-the-path-for-gearman-mysql-udf-files)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-07T03:07:09.410

Gearman 必须使用 libdrizzle/mysql 支持编译。`gearmand --help`您可以通过运行命令或在旧版本上检查它是否已编译`man gearmand`。

如果 libdrizzle/mysql 支持可用，您将在帮助中看到 Drizzle/Mysql 选项。如果它不存在，则需要重新编译 gearmand。以下是在 Ubuntu 12.04 LTS 上安装 Gearman 1.1.12 的命令（在干净的 Vagrant Precision64 机器上测试）：

```
vagrant@precise64:~$ sudo apt-get update
vagrant@precise64:~$ sudo apt-get install libboost-all-dev gperf libevent-dev uuid-dev libmysqld-dev
vagrant@precise64:~$ wget https://launchpad.net/gearmand/1.2/1.1.12/+download/gearmand-1.1.12.tar.gz
vagrant@precise64:~$ tar zxvf gearmand-1.1.12.tar.gz
vagrant@precise64:~$ cd gearmand-1.1.12/
vagrant@precise64:~/gearmand-1.1.12$ ./configure 
```

此时，在`./configure`输出的末尾查找以下行，这表明已安装 Mysql 支持：

```
* Building with libdrizzle   yes
* Building with libmysql     yes 
```

然后继续安装：

```
vagrant@precise64:~/gearmand-1.1.12$ make
vagrant@precise64:~/gearmand-1.1.12$ sudo make install 
```

Gearmand 现在配置了 libdrizzle 并将作业存储在 Mysql 数据库中。

# c# - 使用列表框更新数据库

> ID：12490876
> 
> 赞同：0
> 
> 时间：2012-09-19T08:18:57.710
> 
> 标签：c#, winforms, entity-framework

我遇到了一个问题，我的列表框无法更新数据。我有 2 张桌子，计时和台车服务。列表框从时序表中读取并显示数据。两个表都是链接的。每当我更新台车服务表中的时间时，它都会提示我这个错误：

> 属性“TimingID”是对象的关键信息的一部分，不能修改。

有人可以帮忙吗？

```
private void btnUpdateTS_Click(object sender, EventArgs e)
    {

        int ID = Int32.Parse(lblID.Text);
        foreach (timing selectedTiming in lstTime.SelectedItems)
        {
            var EditTS = (from ets in db.trolleyservices
                          where ets.idtrolleyservice == ID
                          select ets).First();
            EditTS.Type = txtType.Text;
            EditTS.TimingID = selectedTiming.TimingID;

            db.SaveChanges();
            txtType.Text = "";
        }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:29:19.953

尝试添加

```
db.ObjectStateManager.ChangeObjectState(<yourObject>, EntityState.Modified); 
```

在 db.SaveChanges() 之前；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:22:24.363

听起来您的 trolleyservice 有一个 TimingID 标识列。所以数据库会为你创建键值，你不能自己设置它们。

如果您希望能够设置该值，也许您应该考虑将其设为非关键字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:25:43.267

需要说对象被修改，然后保存。

```
Database.ObjectStateManager.ChangeObjectState(yourObject, EntityState.Modified);
Database.SaveChanges(); 
```

# java - 如何在一份报告中打印多个带有条形码的报告或多个条形码

> ID：12490881
> 
> 赞同：2
> 
> 时间：2012-09-19T08:19:11.697
> 
> 标签：java, oracle, jasper-reports

我有一个*条形码*报告，它使用序列（*Oracle*后端）来生成我的*条形码*编号。

这是我的查询：

```
SELECT to_char(PALLET_ID_NO_SEQ.nextval) FROM dual 
```

我将此字段放在将显示*条形码*值的设计器窗口中。

我有一张带有表情的图片：

```
new com.pepkorit.BarbecueRotateRenderer(
    net.sourceforge.barbecue.BarcodeFactory.createCode128C(
    $F{TO_CHAR(PALLET_ID_NO_SEQ.NEXTVAL)}), false, true, 1, 50, 190, 50) 
```

以上是使用序列值的*条形码。*

我希望能够打印/生成 100 个或更多报告。目前，我一次只能生成一份报告。

所以我的第一个猜测是获取一个参数，该参数会提示用户一个值，该值将指示要打印多少个*条形码，每个条形码都有一个单独的编号。*

我不确定我关于解决这个问题的想法是否正确以及如何去做。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:31:52.000

只需对查询进行少量修改即可轻松完成，而无需通过多种方式进行编程。

## 解决方案 1\. 在 Detail 带中使用带有 Barcode 组件的单个报告

**您可以使用单个报告的模板在一份**报告中生成多个条形码。

在这种情况下，***queryString***表达式（适用于*Oracle* DB）将如下所示：

```
SELECT seq_barcode.nextval AS barcode, rownum FROM dual CONNECT BY LEVEL <= $P{quantity} 
```

- 它根据您的需要多次从序列中生成一个值。***$P{quantity}***参数确定要生成的行数（条形码）。

工作*rjxml*文件：

```
<jasperReport ...>
    <parameter name="quantity" class="java.lang.Integer">
        <defaultValueExpression><![CDATA[20]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[SELECT seq_barcode.nextval AS barcode, rownum FROM dual CONNECT BY LEVEL <= $P{quantity}]]>
    </queryString>
    <field name="BARCODE" class="java.lang.Integer"/>
    <field name="ROWNUM" class="java.lang.Integer"/>
    <title>
        <band height="82" splitType="Stretch">
            <textField>
                <reportElement x="145" y="18" width="240" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA["The number of barcodes is: " + $P{quantity}]]></textFieldExpression>
            </textField>
        </band>
    </title>
    <detail>
        <band height="47" splitType="Stretch">
            <componentElement>
                <reportElement x="145" y="10" width="200" height="28"/>
                <jr:barbecue xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" type="2of7" drawText="false" checksumRequired="false">
                    <jr:codeExpression><![CDATA[$F{BARCODE}]]></jr:codeExpression>
                </jr:barbecue>
            </componentElement>
        </band>
    </detail>
</jasperReport> 
```

结果将是（***$P{quantity} == 5***）：

![在 iReport 中预览的结果](../Images/79bd858307efa8670f2978b6f353a701.png)

* * *

在您的情况下，***queryString***表达式将如下所示：

```
SELECT to_char(PALLET_ID_NO_SEQ.nextval) AS barcode, rownum FROM dual CONNECT BY LEVEL <= $P{quantity} 
```

*Barcode*组件的表达式为：

```
new com.pepkorit.BarbecueRotateRenderer(
    net.sourceforge.barbecue.BarcodeFactory.createCode128C($F{barcode}),
    false, true, 1, 50, 190, 50) 
```

## 解决方案 2\. 使用组头带

您可以使用与第一个解决方案中相同的***queryString***表达式。***rownum***字段上的组将帮助我们生成**单个**报告，其中包含许多属于其自己组的条形码（一组 - 一个条形码）。*Barcode*组件应放置在Group *Header*带中。

使用***isStartNewPage***属性，我们可以设法在新页面上生成组或不生成组。

rjxml*文件*：

```
<jasperReport ...>
    <parameter name="quantity" class="java.lang.Integer">
        <defaultValueExpression><![CDATA[20]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[SELECT seq_barcode.nextval AS barcode, rownum FROM dual CONNECT BY LEVEL <= $P{quantity}]]>
    </queryString>
    <field name="BARCODE" class="java.lang.Integer"/>
    <field name="ROWNUM" class="java.lang.Integer"/>
    <group name="rownumGroup" isStartNewPage="true">
        <groupExpression><![CDATA[$F{ROWNUM}]]></groupExpression>
        <groupHeader>
            <band height="50">
                <componentElement>
                    <reportElement x="145" y="11" width="200" height="28"/>
                    <jr:barbecue xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" type="2of7" drawText="false" checksumRequired="false">
                        <jr:codeExpression><![CDATA[$F{BARCODE}]]></jr:codeExpression>
                    </jr:barbecue>
                </componentElement>
            </band>
        </groupHeader>
    </group>
    <title>
        <band height="82" splitType="Stretch">
            <textField>
                <reportElement x="145" y="18" width="240" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA["The number of barcodes is: " + $P{quantity}]]></textFieldExpression>
            </textField>
        </band>
    </title>
</jasperReport> 
```

如果组**rownumGroup的*****isStartNewPage="false"***结果将是（***$P{quantity}== 7***）：

 ***![在 iReport 中预览的结果 isStartNewPage=](../Images/5204e0d1a15cf2a3e5cbe0033f43e49a.png)

如果组**rownumGroup的*****isStartNewPage="true"*** ，结果将是（***$P{quantity} == 5***）：

 ***![在 iReport 中预览的结果 isStartNewPage=](../Images/c461a070289d0b0776dd5b62861e0a38.png)

## 解决方案 3\. 使用子报表

我们可以将*Subreport*组件添加到*Detail*带区（*参见第一个解决方案*）或*Group Header*（*参见第二个解决方案*）带区。在这种情况下，您不仅可以向子报表添加*Barcode*组件，还可以添加您想要的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:57:46.330

一种可能的方式：

1）创建一个bean：

```
public class Entity {
    private Image image;

    public Entity(Image image) {
        this.image = image;
    }

    public Entity() {}

    public Image getImage() {
        return image;
    }

    public void setImage(Image image) {
        this.image = image;
    }
} 
```

2）用数据填充100个这样的bean（你的条形码图像）

3）创建一个像这样的碧玉报告：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ExtendedPortReport" language="groovy" pageWidth="1190" pageHeight="842" orientation="Landscape" columnWidth="1150" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <property name="ireport.zoom" value="0.75"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <field name="image" class="java.awt.Image"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <detail>
        <band height="750" splitType="Stretch">
            <image scaleImage="RetainShape" hAlign="Center" vAlign="Top" isUsingCache="true" onErrorType="Blank">
                <reportElement isPrintRepeatedValues="false" x="0" y="0" width="1150" height="750"/>
                <box>
                    <pen lineWidth="0.0"/>
                    <topPen lineWidth="0.0"/>
                    <leftPen lineWidth="0.0"/>
                    <bottomPen lineWidth="0.0"/>
                    <rightPen lineWidth="0.0"/>
                </box>
                <imageExpression><![CDATA[$F{image}]]></imageExpression>
            </image>
        </band>
    </detail>
</jasperReport> 
```

4) 将图像字段的类型（在报告中）设置为 java.awt.Image

5）将报告创建为桌面应用程序（在您的情况下，如果需要，请使用其他方式）

```
 final JasperReport report = (JasperReport)JRLoader.loadObjectFromFile(MAIN_BINARY_PATH);
    final JRDataSource dataSource = new JRBeanCollectionDataSource(/*there is your list of entities*/);

    final JasperPrint jasperPrint = JasperFillManager.fillReport(report, null, dataSource);
    JRViewer viewer = new JRViewer(jasperPrint);
    //add viewer to a frame/panel 
```******

# jsrender - Easy JsRender for 循环不起作用

> ID：12490883
> 
> 赞同：0
> 
> 时间：2012-09-19T08:19:27.337
> 
> 标签：jsrender

我正在尝试使用 JsRender 渲染列表中的一些项目。见[http://jsfiddle.net/arame3333/PTWnq/1/](http://jsfiddle.net/arame3333/PTWnq/1/)

我没有从 jsFiddle 得到任何关于为什么这不起作用的反馈。问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:25:34.270

好吧，调试器说：

```
GET http://borismoore.github.com/jsrender.js 404 (Not Found) 
```

正确的地址是：

```
http://borismoore.github.com/jsrender/jsrender.js 
```

那么你的大括号是错误的：

```
$('#departmentList').html($('#DepartmentTemplate').render(data)); 
```

并且模板有打破它的空白，这更好：

```
<script id="DepartmentTemplate" type="text/x-jquery-tmpl">
      {{for BusinessUnitName}}
            <li>{{:#data}}</li>
      {{/for}}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:27:01.943

看看你的括号，移动其中一个（从 html 到末尾）：

```
$('#departmentList').html($('#DepartmentTemplate').render(data)); 
```

# jquery - jQuery 验证远程

> ID：12490884
> 
> 赞同：0
> 
> 时间：2012-09-19T08:19:39.230
> 
> 标签：jquery, jquery-validate

我在远程检查电子邮件地址时遇到 jquery 验证插件问题。

远程函数返回一个 JSON 字符串，如：

```
"{ "isValid": "true", "email": "email@email.com"  }" 
```

我知道 jquery 验证中的默认设置应该只包含一个返回 true 或 false 的 json 字符串。但我需要返回检查的电子邮件。

是否可以使用远程验证功能来检查 json 属性“isValid”？

谢谢，

詹姆斯福特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-22T21:36:27.720

要处理来自自定义远程验证调用的响应，您必须创建自定义规则。在此示例中，我们正在检查用户 nick 是否可用。

jquery 验证自定义规则：

```
$('#nick').rules("add", {
  // nick is required
  required: true,
  // nick can have from 3 to 30 characters
  rangelength: [3,30],
  remote: {
    url: "/your-api-url",
    type: "GET",
    data: {
      // nick is id of input field from html
      nick: function() {
          // get user input from field value
          return $('#nick').val();
      }
    },
    // custom filtering response from api call
    dataFilter: function(data) {
      // we need to parse data string to json
      var json = JSON.parse(data);
      if(json.nick === "true" || json.nick === true) {
          // jquery validate remote method
          // accepts only "true" value
          // to successfully validate field 
          return '"true"';
      } else {
          // error message, everything that isn't "true"
          // is understood as failure message
          return '"This nick is already taken."';
      }
    }
  }
}); 
```

如果 nick 可用，则来自 api 的响应：

```
{nick:true} 
```

html:

```
<input name="nick" id="nick" value="" placeholder="Nick" type="text" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:01:18.230

您可以轻松扩展验证器插件。您所要做的就是使用`$.validator.addMethod()`，添加一个进行远程调用的方法，获取您显示的 JSON 字符串，执行您需要返回电子邮件地址的任务，并在最后将 true 或 false 返回到验证流程。

这可能会有所帮助：[http ://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T09:16:17.657

我认为您可以使用 remote() 作为源编写自定义方法。就像是

```
jQuery.validator.addMethod("customRemote", function(value, element, param) {

...
// the piece of code doing AJAX response parsing

success: function(response) {
    validator.settings.messages[element.name].remote = previous.originalMessage;

    // original:
    var valid = response === true || response === "true";

    // replace with your own logic
    if(response.isValid == "true" && something == else) {
        // do the stuff
    }

...

}) 
```

# python - 如何从敌人那里找到玩家所在的方向？

> ID：12490888
> 
> 赞同：0
> 
> 时间：2012-09-19T08:20:14.480
> 
> 标签：python, pyglet, game-ai

我已经设法使用以下代码（python 和 pyglet）让敌人 AI 向玩家移动：

```
(dx, dy) = ((player.x - self.x)/math.sqrt((player.x - self.x) ** 2 + 
           (player.y - self.y) ** 2),(player.y - self.y)/math.sqrt((player.x - self.x)
           ** 2 + (player.y - self.y) ** 2))
newCoord = (self.x + dx * 3, self.y + dy * 3)
self.x,self.y = newCoord 
```

但是我不确定如何旋转敌人的精灵，让他们面对玩家。我很确定我可以使用上面的一些代码并相应地旋转播放器，但我无法找到一种可行的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:33:16.657

您拥有的信息是直角三角形的两条腿，您正在尝试找到角度。所以

```
math.tan(angle) == float(player.y - self.y) / (player.x - self.x) 
```

或者

```
angle == math.atan(float(player.y - self.y) / (player.x - self.x)) 
```

但是这个 atan 会丢失符号信息，除法可能会给你`ZeroDivisionError`，这正是[math.atan2](http://docs.python.org/library/math.html#math.atan2)的用途：

```
angle = math.atan2(player.y - self.y, player.x - self.x) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T08:29:59.017

使用[`math.atan2()`](http://docs.python.org/library/math.html#math.atan2)delta y 和 x 将为您提供适当的弧度角度。

```
>>> math.atan2(1, -1)
2.356194490192345 
```

# spring - 在单个 Hadoop 节点上连接一个 Hadoop Jobfactorybean、多个 Reducer

> ID：12490889
> 
> 赞同：0
> 
> 时间：2012-09-19T08:20:19.283
> 
> 标签：spring, hadoop, spring-data

**我想要达到的目标：**

我已经设置了一个包含 Hadoop 任务的 Spring Batch Job 来处理一些较大的文件。要让多个 Reducer 运行该作业，我需要使用[setNumOfReduceTasks](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapreduce/Job.html#setNumReduceTasks%28int%29)设置 Reducer 的数量。我正在尝试通过[JobFactorybean](http://static.springsource.org/spring-hadoop/docs/1.0.0.M2/api/org/springframework/data/hadoop/mapreduce/JobFactoryBean.html)设置它。

我在 classpath:/META-INF/spring/batch-common.xml 中的 bean 配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="jobFactoryBean" class="org.springframework.data.hadoop.mapreduce.JobFactoryBean" p:numberReducers="5"/>
    <bean id="jobRepository" class="org.springframework.batch.core.repository.support.MapJobRepositoryFactoryBean" />
    <bean id="transactionManager" class="org.springframework.batch.support.transaction.ResourcelessTransactionManager"/>
    <bean id="jobLauncher" class="org.springframework.batch.core.launch.support.SimpleJobLauncher" p:jobRepository-ref="jobRepository" />
</beans> 
```

XML 通过以下方式包含：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:property-placeholder location="classpath:batch.properties,classpath:hadoop.properties"
            ignore-resource-not-found="true" ignore-unresolvable="true" />

    <import resource="classpath:/META-INF/spring/batch-common.xml" />
    <import resource="classpath:/META-INF/spring/hadoop-context.xml" />
    <import resource="classpath:/META-INF/spring/sort-context.xml" />

</beans> 
```

我正在通过以下方式获取 jUnit 测试的 bean

```
 JobLauncher launcher = ctx.getBean(JobLauncher.class);
    Map<String, Job> jobs = ctx.getBeansOfType(Job.class);
    JobFactoryBean jfb = ctx.getBean(JobFactoryBean.class); 
```

jUnit 测试因错误而停止：

```
No bean named '&jobFactoryBean' is defined 
```

所以： JobFactoryBean 没有加载，但是其他的加载正确并且没有错误。

没有线

```
JobFactoryBean jfb = ctx.getBean(JobFactoryBean.class); 
```

项目测试运行，但每个作业只有一个 Reducer。

方法

```
ctx.getBean("jobFactoryBean"); 
```

返回一个 Hadoop 作业。我希望能在那里得到 factoryBean ......

为了测试它，我扩展了 Reducer 的构造函数以记录 Reducer 的每次创建，以便在生成时收到通知。到目前为止，我只在日志中得到一个条目。

我有一个 2 个虚拟机，每个虚拟机有 2 个分配的内核和 2 GB 内存，我正在尝试对一个 75MB 的文件进行排序，该文件由古腾堡项目的多本书组成。

编辑：

我尝试过的另一件事是通过属性设置 hadoop 作业中减速器的数量，但没有结果。

```
<job id="search-jobSherlockOk" input-path="${sherlock.input.path}"
    output-path="${sherlockOK.output.path}"
    mapper="com.romediusweiss.hadoopSort.mapReduce.SortMapperWords"
    reducer="com.romediusweiss.hadoopSort.mapReduce.SortBlockReducer"
    partitioner="com.romediusweiss.hadoopSort.mapReduce.SortPartitioner"
    number-reducers="2"
    validate-paths="false" /> 
```

*   mapreduce-site.xml 中的设置在两个节点上：

    ```
    <property>
            <name>mapred.tasktracker.reduce.tasks.maximum</name>
            <value>10</value>
    </property> 
    ```

**...以及为什么：**

我想复制以下博客文章的示例： [http ://www.philippeadjiman.com/blog/2009/12/20/hadoop-tutorial-series-issue-2-getting-started-with-customized-partitioning/](http://www.philippeadjiman.com/blog/2009/12/20/hadoop-tutorial-series-issue-2-getting-started-with-customized-partitioning/)

我需要在同一台机器或完全分布式环境上使用不同的 Reducer 来测试 Partitioner 的行为。第一种方法会更容易。

ps: 有较高声望的用户能否创建一个标签“spring-data-hadoop” 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:50:55.307

Answered the question on the Spring forums where it was also posted (recommend using it for Spring Data Hadoop questions).

The full answer is here [http://forum.springsource.org/showthread.php?130500-Additional-Reducers](http://forum.springsource.org/showthread.php?130500-Additional-Reducers) , but in short, the number of reducers is driven by the number of input splits. See [http://wiki.apache.org/hadoop/HowManyMapsAndReduces](http://wiki.apache.org/hadoop/HowManyMapsAndReduces)

# c# - View 在不同的程序集中找不到 ViewModel

> ID：12490897
> 
> 赞同：6
> 
> 时间：2012-09-19T08:21:05.113
> 
> 标签：c#, wpf, mvvm, .net-4.0

我正在开始一个新项目，并将我的项目结构定位在[这个问题](https://stackoverflow.com/questions/3423033/recommended-wpf-project-structure/3423811#3423811)中推荐的结构上。

现在我看到了奇怪的行为。当我在 View-XAML 中设置数据上下文时，在运行时找不到它（获取 a `XamlParseException`）。当我在代码隐藏文件的构造函数中设置它时，一切正常。

这是使用不同程序集时的官方（记录）行为，还是我做错了什么？

编码：

*不工作：*

`MainView.xaml:`

```
<UserControl x:Class="ViewsRoot.Views.MainView"             
         xmlns:baseControls="clr-namespace:BaseControls;assembly=BaseControls"            
         xmlns:viewModels="clr-namespace:ViewModelsRoot;assembly=ViewModelsRoot">
<UserControl.DataContext>
    <viewModels:ShellViewModel />
</UserControl.DataContext> 
```

`MainView.xaml.cs`

```
public MainView() 
{
    InitializeComponent();
    // No DataContext set in codebehind-file    
} 
```

*在职的：*

`MainView.xaml:`

```
<UserControl x:Class="ViewsRoot.Views.MainView"             
         xmlns:baseControls="clr-namespace:BaseControls;assembly=BaseControls"            
         xmlns:viewModels="clr-namespace:ViewModelsRoot;assembly=ViewModelsRoot">
<!--<UserControl.DataContext>
    <viewModels:ShellViewModel />
</UserControl.DataContext> --> 
```

`MainView.xaml.cs:`

```
public MainView()
{
    InitializeComponent();
    DataContext = new ViewModelsRoot.ShellViewModel();
} 
```

**更新：**

异常文本是：

> {"文件或程序集\" ViewModelsRoot, PublicKeyToken = null \"或其依赖项之一未找到。系统找不到指定的文件。"}

我能看到的唯一内部异常是`System.IO.FileNotFoundException`.

**更新 2：**

感谢您的评论，但我没有忘记命名空间。我在这里缩短了它以显示代码，但我（再次）进行了双重和三重检查。DataContexts 命名空间也由智能感知填充。整篇`<viewModels:ShellViewModel />`都是intelli-sense写的。所以它是在设计时发现的......所以还有更多想法吗？

**更新 3：** xaml 被“正确”解析，因为我能够将 DataContext 绑定到同一程序集中的类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-17T12:01:58.057

我使用三个项目解决方案重现了这个错误，它们之间具有指定的依赖关系：

*   启动项目 → ViewsRoot
*   ViewsRoot → ViewModelsRoot
*   ViewModelsRoot

“StartupProject”具有“exe”输出类型，而其他两个具有“dll”。

就我而言，我通过将“ViewModelsRoot”添加到“StartupProject”的引用列表中解决了这个问题。这不是编码问题，而是运行时问题，因为“ViewModelsRoot.dll”没有复制到“StartupProject”输出文件夹。

当您在代码隐藏中指定 DataContext 时，Visual Studio 会注意到对该“dll”的需求，并在编译后将其添加到输出中。从 XAML 设置 DataContext 时不会发生这种情况。这很棘手，因为“ViewModelsRoot”代码是从 XAML 与反射一起使用的。将其添加到引用列表会强制 Visual Studio 在这两种情况下复制“dll”。

您也可以直接将“ViewModelsRoot.dll”复制到输出文件夹中，但更改代码时不会更新。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T16:28:15.893

当项目目标框架设置为“客户端配置文件”（这是在 VS2010、IIRC 上默认设置的）时，我经常发现此错误，如果是这种情况，请尝试将其更改为 3.5 或 4.0。

# javascript - IOS应用开发UI部分的滚动条

> ID：12490902
> 
> 赞同：0
> 
> 时间：2012-09-19T08:21:32.367
> 
> 标签：javascript, html, css, ios, cordova

如何在我的 index.html 中提供滚动条，以使页眉和页脚 div 保持固定在屏幕上，而如果内容超出可用空间，则可以滚动位于页眉和页脚之间的内容部分。

有人知道吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:56:31.363

你可以试试 iScroll

[http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

这是我发现保持固定页眉和页脚并在它们之间滚动内容的最佳选择

# html - Kickstarter 喜欢主页中的堆叠图像背景

> ID：12490903
> 
> 赞同：0
> 
> 时间：2012-09-19T08:21:43.060
> 
> 标签：html, css

我想模仿 kickstarter.com 中使用的堆叠图像。我的问题是图像不会在屏幕上溢出。箭头指向要填充图像的剩余空间。

这是图片 [http://postimage.org/image/9we1jinkz/](http://postimage.org/image/9we1jinkz/)

HTML：

```
 <div id="projectGrid">
    <div class="project"><a href="thumbLink"><img src="img/p1.png" /></a></div>
    <div class="project"><a href="thumbLink"><img src="img/p2.png" /></a></div>
 </div> 
```

CSS：

```
.project {float:left;overflow:hidden;}
 #projectGrid {

background: none repeat scroll 0 0 #222222;
overflow: hidden;
position: absolute;
z-index: 6;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:54:43.363

您需要向 projectGrid 添加一个外部容器，该容器将占据屏幕总宽度的 80%，然后将其余内容设置为较小的宽度。这是非常基本的 CSS 布局。显然，您从 kickstarter.com 网站复制粘贴了一些 html 和一些 CSS。我强烈建议您在尝试实现此类复杂布局之前研究 CSS 的工作原理。 [http://tinkerbin.com/fVhY1DHr](http://tinkerbin.com/fVhY1DHr)

# c# - 我可以明智地模拟这个 NHibernate 查询吗？

> ID：12490906
> 
> 赞同：0
> 
> 时间：2012-09-19T08:21:50.527
> 
> 标签：c#, unit-testing, nhibernate, mocking

我一直在做一个项目，我们使用 Fluent NHibernate ORM 来访问 SQL Server 数据库并显示和操作数据。

在最初的开发阶段，我们一直在针对实际数据库编写单元测试；这对学习 NHibernate 很有帮助，但这并不理想，因为数据库并不总是有我们需要测试的内容，而且运行测试的时间开始太长。

所以我希望尝试在单元测试中使用模拟对象，我没有多少模拟经验，现在我不能总是看到如何更改功能以允许我这样做。

这是我昨天写的一个函数（重写为更“抽象”的概念。但基本上我的代码具有不同的类名：

```
 public static IList<Order> GetAllOrders(long parentCompanyId)
    {
        using (var session = DbSetup.GetSession())
            {
                var idList =
                    (from p in session.Query<ParentCompanyList>() 
                     where p.ParentCompanyId == parentCompanyId 
                     select p.CompanyId)
                     .ToList<long>();

                IQuery q = session.CreateQuery("from Order as o where o.CompanyId in (:ids)");
                q.SetParameterList("ids", idList);

                var results = q.List<Order>();
                return results;
            }
    } 
```

所以我有一个连接到数据库的 NHibernate.ISession，我正在运行查询以查找 ParentCompanyList （类流畅地映射到数据库表）以获取连接到母公司的公司的 CompanyId 列表，并且然后使用它从与母公司关联的所有公司中获取所有老年人。

我不确定是否有什么好方法可以在不访问数据库的情况下对其进行测试。

我可以创建允许我测试的模拟对象吗？我该如何设置？我是否需要创建一个模拟 ISession 来返回适当的 List 和 IOrder 结果？在那一点上，如果我回馈我实际要求的东西，我似乎实际上并没有测试任何有价值的东西......

我只是在这里误解了一些基本的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T10:03:17.123

在测试与数据库的交互（查询、插入）时，最好*使用*数据库，因为只能以这种方式测试查询翻译、约束等。为了提高性能并进行测试隔离，通常使用内存数据库

[来自 NHibernates 贡献者之一的博文，描述了使用 NHibernate 和 sqlite 进行单元](http://ayende.com/blog/3983/nhibernate-unit-testing)测试

# cakephp - Cakephp 2.2.2 RSS 未由 w3 验证器验证

> ID：12490910
> 
> 赞同：1
> 
> 时间：2012-09-19T08:22:14.637
> 
> 标签：cakephp, rss

我是 cakephp 的新手。所以，我在玩它的同时学习和发现 cakephp 中的更多东西。

我正在使用 cakephp 2.2.2 版本。我想为我的网站生成 RSS 提要。所以我在这里遵循 100% RSShelper 教程：http: [//book.cakephp.org/2.0/en/core-libraries/helpers/rss.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/rss.html)

但是我生成的 RSS 提要有问题。W3 的提要验证表明我的 RSS 未验证，结果如下： http://validator.w3.org/appc/check.cgi?url= [http%3A%2F%2Fmalaysia60.info%2Fberitas%2Findex.rss](http://validator.w3.org/appc/check.cgi?url=http://malaysia60.info/beritas/index.rss)

我不知道出了什么问题。我已经检查并删除了 cakephp 文件中视图、RSS 默认布局和控制器中的多余空格。

有人能告诉我这个 RSShelper 有什么问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:52:54.373

我认为您收到此验证错误是因为您的 RSS 文件中缺少 XML 声明。将以下代码段添加到布局的顶部：`<?xml version="1.0"?>`错误应该会消失。

# html - 网站显示为 HTML 代码而不是呈现的 HTML - 不确定

> ID：12490915
> 
> 赞同：1
> 
> 时间：2012-09-19T08:22:38.107
> 
> 标签：html, http, servlets, web, rendering

我有一个网站问题，有时浏览器窗口中只显示 HTML 文本，而不是呈现的 HTML 页面。这有时会在所有浏览器中发生。示例网址： http: [//www.starkl.at/view/p-1258/Newsletter---Gartentipp/](http://www.starkl.at/view/p-1258/Newsletter---Gartentipp/)

来自 IE9 的 HTTP 请求标头是（未显示 Cookie）：

```
GET http://www.starkl.at/view/p-1258/Newsletter---Gartentipp/ HTTP/1.1
Accept: text/html, application/xhtml+xml, */*
Referer: http://www.starkl.at/view/p-1931/Service/
Accept-Language: de-AT
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Accept-Encoding: gzip, deflate
Connection: Keep-Alive
DNT: 1
Host: www.starkl.at
Pragma: no-cache 
```

HTTP 响应标头是：

```
HTTP/1.1 200 OK
Date: Wed, 19 Sep 2012 07:43:49 GMT
Cache-Control: no-cache, no-store, must-revalidate, proxy-revalidate
Content-Type: text/html;charset=UTF-8
Content-Length: 21160
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive 
```

内容长度（以字节为单位）似乎也匹配。它是在 Tomcat 6/7 上运行的 Java 6/7 应用程序，前面有一个额外的 httpd 2.2.x。

知道可能是什么问题吗？？？？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:45:02.687

如果浏览器编写代码而不呈现它是因为它被告知这样做，那么您的应用程序可能正在返回以浏览器认为它是纯文本的方式编码的 html。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-09-23T12:44:37.940

打开工具、选项、电子邮件、电子邮件选项，然后取消选中“以纯文本格式阅读所有标准邮件”。这适用于 Outlook 2003，因此您的版本（如果不是 2003）可能会略有不同。

# c# - 通过 C# 自动排列 visio 形状

> ID：12490916
> 
> 赞同：2
> 
> 时间：2012-09-19T08:22:40.020
> 
> 标签：c#, visio

我在我的 C# 应用程序中使用 Microsoft Visio 作为 COM 对象。我想在 Visio 页面上自动排列形状。我应该为这个任务编写什么代码？形状是数据库实体。

```
userView.Shapes.SomeMethod(); 
```

userView 是 COM 对象的名称，但应该`SomeMethod`是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-19T17:56:55.427

我知道这是一个“较旧”的问题，但我正在做一些非常相似的事情，并设法使用以下代码“自动布局”流程图：

```
public enum GraphStyles { TopDown, LeftRight };
public void ArrangeGraph(GraphStyles Style)
{
    if (Style == GraphStyles.TopDown)
    {
        // set 'PlaceStyle'
        var placeStyleCell = VisApp.ActivePage.PageSheet.get_CellsSRC(
            (short)VisSectionIndices.visSectionObject,
            (short)VisRowIndices.visRowPageLayout,
            (short)VisCellIndices.visPLOPlaceStyle).ResultIU = 1;
        // set 'RouteStyle'
        var routeStyleCell = VisApp.ActivePage.PageSheet.get_CellsSRC(
            (short)VisSectionIndices.visSectionObject,
            (short)VisRowIndices.visRowPageLayout,
            (short)VisCellIndices.visPLORouteStyle).ResultIU = 5;
        // set 'PageShapeSplit'
        var pageShapeSplitCell = VisApp.ActivePage.PageSheet.get_CellsSRC(
            (short)VisSectionIndices.visSectionObject,
            (short)VisRowIndices.visRowPageLayout,
            (short)VisCellIndices.visPLOSplit).ResultIU = 1;
    }
    else if (Style == GraphStyles.LeftRight)
    {
        // set 'PlaceStyle'
        var placeStyleCell = VisApp.ActivePage.PageSheet.get_CellsSRC(
            (short)VisSectionIndices.visSectionObject,
            (short)VisRowIndices.visRowPageLayout,
            (short)VisCellIndices.visPLOPlaceStyle).ResultIU = 2;
        // set 'RouteStyle'
        var routeStyleCell = VisApp.ActivePage.PageSheet.get_CellsSRC(
            (short)VisSectionIndices.visSectionObject,
            (short)VisRowIndices.visRowPageLayout,
            (short)VisCellIndices.visPLORouteStyle).ResultIU = 6;
        // set 'PageShapeSplit'
        var pageShapeSplitCell = VisApp.ActivePage.PageSheet.get_CellsSRC(
            (short)VisSectionIndices.visSectionObject,
            (short)VisRowIndices.visRowPageLayout,
            (short)VisCellIndices.visPLOSplit).ResultIU = 1;
    }
    else { throw new NotImplementedException("GraphStyle " + Style.ToString() + " is not supported"); }
    VisApp.ActivePage.Layout();
} 
```

希望这可以节省一些时间。我花了一段时间才弄清楚。

我正在使用 visio 2010 和 Visual Studio 2010

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:39:42.840

不久前我需要做类似的事情..

我使用 Microsoft 的 Glee 库进行布局。下载中包含非常好的示例，向您展示如何添加节点和关系并使它们“自动排列”。但是请注意，Glee 并非免费用于商业用途。

*   [http://research.microsoft.com/en-us/downloads/f1303e46-965f-401a-87c3-34e1331d32c5/default.aspx](http://research.microsoft.com/en-us/downloads/f1303e46-965f-401a-87c3-34e1331d32c5/default.aspx)

然后我使用此示例将计算出的位置从 Glee 转换为 Visio 绘图。

*   [http://www.syntaxwarriors.com/2012/generating-visio-uml-diagrams-from-c/](http://www.syntaxwarriors.com/2012/generating-visio-uml-diagrams-from-c/)

基本上我所做的就是添加我所有的节点和关系 Glee，然后获取节点列表及其位置，并使用第二个链接将它们添加到 Visio。

这是 Glee 可以做什么的图表示例：

![欢乐合唱团图片示例](../Images/caf6dc6ac3d0d943b97c4923d0fd463e.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:48:57.537

[这](http://msdn.microsoft.com/en-us/library/ff765900.aspx)可能会有所帮助

相关报价

> 要布置页面、母版或组的形状子集，请建立一个 Selection 对象，在其中选择要布置的形状，然后调用 Layout 方法。如果在 Selection 对象上执行 Layout 方法并且该对象没有选择任何形状，则布局页面、母版或选择组中的所有形状。

**编辑：noonand 2012-09-21 添加了有关 LayoutIncremental 方法的信息**

刚刚又看了一下对象模型，看来您想要的方法是 LayoutIncremental 方法

[相关帮助主题](http://office.microsoft.com/client/helppreview14.aspx?AssetId=HV080351919&lcid=6153&NS=VISIO.DEV&Version=14&tl=2&respos=0&CTT=1&queryid=dd99ec0a-f819-4f21-894b-19b09e6807f2)的摘录说：

```
Page.LayoutIncremental(AlignOrSpace, AlignHorizontal, AlignVertical, SpaceHorizontal, SpaceVertical, UnitsNameOrCode) 
```

# iphone - iOS：在 Game Center Sandbox 报告中模拟错误

> ID：12490919
> 
> 赞同：0
> 
> 时间：2012-09-19T08:23:14.377
> 
> 标签：iphone, ios, sandbox, leaderboard

我即将完成对一款名为 WarpOut 的游戏的更新（可在 App Store 下载，请查看）；此更新包括游戏中心功能。

我报告了高分和成就。

目前，它可以在 Game Center Sandbox 上运行（正如它应该的那样），并且我已经实现了代码以在报告时发生错误时推迟报告。

我的问题是：由于沙箱是本地的，我如何模拟错误以检查延迟报告是否正常工作？

# iphone - 在不打开对话框的情况下发布 Facebook 好友个人资料？

> ID：12490921
> 
> 赞同：-3
> 
> 时间：2012-09-19T08:23:18.810
> 
> 标签：iphone, ios, facebook

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               friend, @"to",
                               @"100xxxx",@"from",
                               @"I'm also using thex xx for iOS app", @"message",

                               nil];
AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

[[delegate m_Facebook] requestWithGraphPath:@"/xxx6842/feed"   // or use page ID instead of 'me'
               andParams:params
           andHttpMethod:@"POST"
             andDelegate:self]; 
```

我正在尝试很多，但收到错误消息！

当我使用 hackbook api 时！

感谢每一个人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:58:33.910

假设`params`您的代码中的变量是一个带有“消息”键和值的字典，您还应该确保向用户询问 publish_stream 扩展权限。

# java - 在java中存储传感器数据的最快方法

> ID：12490923
> 
> 赞同：1
> 
> 时间：2012-09-19T08:23:23.230
> 
> 标签：java, logging, store

我目前正在编写一个从各种传感器接收数据的 Java 应用程序。这种情况发生的频率各不相同，但我相信我的应用程序每天会收到大约 10 万次信号。每次应用程序接收到信号时，我都想记录从传感器接收到的数据。因为应用程序不仅仅记录传感器数据，所以性能是一个问题。我正在寻找记录数据的最佳和最快的方法。因此，我可能不使用数据库，而是写入文件并每天保留 1 个文件。

那么什么是更快的呢？使用数据库还是记录到文件？毫无疑问，使用什么日志软件也有很多选择。如果记录到文件是最佳选择，那么哪个最适合我的目的？

存储的数据可能会在以后用于分析目的，因此请记住这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:02:51.483

廉价 PC 上的免费数据库应该能够轻松地每秒记录 10 条记录。

好的系统上的优化数据库或廉价 PC 上的记录器应该能够轻松地每秒写入 100 条记录/行。

一个经过调整的记录器应该能够轻松地每秒写入 1000 行。

快速二进制记录器每秒可以轻松执行 100 万条记录（取决于记录的大小）

您的要求是每个信号每秒大约 1.2 条记录，这应该能够实现您喜欢的任何方式。我假设您希望能够查询您的数据，因此您最终希望将其存储在数据库中，因此我将其放在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:34:32.307

我建议您首先使用 log4j（或任何其他日志记录框架）。您可以使用写入数据库的 jdbc 附加程序或写入文件的任何类型的文件附加程序。关键是您的代码将足够通用，如果您愿意，以后可以更改...

一般来说，文件比数据库访问快得多，但这里有一个优化的地方。如果性能很关键，您可以对日志基础设施使用批处理/异步调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:33:54.503

啊嵌入式系统的世界。在使用气垫船时，我遇到了类似的问题。我在局域网上用一台单独的计算机（你可以用一个单独的程序来解决这个问题）解决了这个问题，它只是坐下来作为我发送给它的日志的服务器。FileWriter 程序是用 C++ 编写的。这必须解决你的两个问题。首先是写入日志时明显的性能提升。其次，Java 程序完全无需编写任何日志（但将充当代理），并且可以专注于性能关键任务。除非您使用 SQLite，否则为此使用数据库将是一种过度杀伤力。

祝你好运！

# html - 使用 CSS 和绝对定位对图像进行分层

> ID：12490925
> 
> 赞同：-2
> 
> 时间：2012-09-19T08:23:26.860
> 
> 标签：html, css, css-position

我有一个网页，我想在其中相应地对 3 层图像进行分层以充当背景，以便可以将内容放在顶部。滚动时图像不应移动，因此固定位置不起作用。以下是它们应该从后到前出现的顺序 (1-3)

1.  img - 我在 html 中设置为背景图像的 sky.jpg。
2.  img - 设置在 sky.jpg 上方的 backDrop.png。
3.  img - BtmRight.png 我想将其放置在所有图像上方和右下角。

两个图像（backDrop.png、BtmRight.png）都设置了绝对定位和 z-index 以确定顺序。我无法让 BtmRight.png 图像出现在其他图像的右下方。当您滚动页面时，我希望右下角的图像保持原位。我还希望内容出现在所有图像上。下面是我的 HTML/CSS，有什么我遗漏的吗？

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
            <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title>Untitled Document</title>
            </head>
            <style type="text/css">
            html {
              height: 100%;
              margin: 0;
              padding: 0;
              margin-top:100px;
              background: url(sky.jpg) no-repeat center center fixed; 
              -webkit-background-size: cover;
              -moz-background-size: cover;
              -o-background-size: cover;
               background-size: cover;
            }
            body {
              height: 100%;
              margin: 0;
              padding: 0;
            }
            #imgBack {
                width: 100%;
                margin-top:100px;
                position:absolute;
                z-index:20;
                border:#0FF thin solid;
            }
            #imgBtmRight {
                position:absolute; 
                z-index:50; 
                bottom:0; 
                right:0;
            }
            </style>

            <body>

            <img id="imgBtmRight" src="BtmRight.png" width="413" height="283" /> 

            <img id="imgBack" src="backDrop.png" />

            </body>
            </html> 
```

任何有关该主题的信息或帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T08:42:53.767

以正确的顺序堆叠您的 DOM 元素（以及关闭该 div）可能是一个好主意：

1.  身体
2.  背景
3.  BtmRight
4.  内容

自然的“堆叠”是自下而上的——将每个元素（图像、div 等）视为一张纸。当您向下移动 HTML 文档时，您会将纸片添加到堆栈中。除非您明确更改 z 索引，否则这些文件彼此重叠 - 但如果可以的话，最好以正确的顺序开始它们。

编辑：

似乎正在工作：

[使用链接图像的示例](http://jsfiddle.net/2jCJw/)

我唯一改变的是图像源和 body 标签上的位置。除非您在代码中遗漏了其他内容，否则您应该没有问题。

另一个编辑：

如果您希望右下角的图像保持原位，请使用位置：固定在该图像上而不是位置：绝对。

另一个编辑：

如果您希望内容超出右下角图像的顶部，您只需为您的内容添加一个包装器并使用 z-indexing：

[例子](http://jsfiddle.net/2jCJw/2/)

# iphone - 如何使用 SpringBoard-Class.h 中的函数？

> ID：12490927
> 
> 赞同：2
> 
> 时间：2012-09-19T08:23:30.140
> 
> 标签：iphone, ios, jailbreak

在 SpringBoard-Class.h 中，我找到了以下功能：

```
-(void)_powerDownNow;
-(void)_rebootNow;
-(void)reboot;
-(void)powerDown; 
```

我正在尝试使用它们。我的 iPhone 已经越狱了。

我使用`[[[SpringBoard alloc] init] reboot]`，但编译结果是：

> 架构 armv6 的未定义符号：“_OBJC_CLASS_$_SpringBoard”，引用自：RootViewController.mm.o 中的 objc-class-ref ld：未找到架构 armv6 collect2 的符号：ld 返回 1 个退出状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:13:21.740

我假设您正在开发一个与 SpringBoard 挂钩的调整。如果您没有标题，您可以随时使用

```
[objc_getClass("SpringBoard") sharedApplication] methodToUse]; 
```

这将产生一个警告......但它会没事的。

您不能从应用程序调用 SpringBoard 的方法，因为 SpringBoard 不是您可以链接到的库。它本身就是一个应用程序。

# c# - 将对象转换为 MyType 其中 T 可以是任何类型

> ID：12490928
> 
> 赞同：1
> 
> 时间：2012-09-19T08:23:35.653
> 
> 标签：c#, .net, c#-4.0, asp.net-4.5

我有一些代码可以在程序集中搜索所有类型的类型`MyType<T>`。`T`可以是我`Activator.CreateInstance`用来创建这些类型的对象的任何类型。我需要将这些对象传递给期望的方法，`MyType<T>`因此我需要以某种方式将每个对象从 Object （由返回`Activator.CreateInstance`）转换为`MyType<T>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:30:44.673

您需要的是 GetGenericTypeDefinition - MakeGenericType 组合的组合，以形成您自己的新类型。这是一个例子：

```
 public class  GenericTypeTest<T>
    {
        T value;
    }

    void MakeTest()
    {
        var newType = typeof(double);
        var customType = typeof(GenericTypeTest<object>).GetGenericTypeDefinition().MakeGenericType(newType);
        var createdObject = Activator.CreateInstance(customType);
    } 
```

如果你想使用 createdObject，它有点复杂，因为你不能“硬编码”任何东西：

```
 public class  GenericTypeTest<T>
    {
        public GenericTypeTest(T value)
        {
            this.value = value;
        }
        public T value {get; protected set; }
    }

    public void ShowSomething<T>(GenericTypeTest<T> genericContainer)
    {
         MessageBox.Show(genericContainer.value.ToString());
    }

    void MakeTest()
    {
        var newType = typeof(double); object newValue = 1.0;

        var customType = typeof(GenericTypeTest<object>).GetGenericTypeDefinition().MakeGenericType(newType);
        var createdObject = Activator.CreateInstance(customType, newValue);

        this.GetType().GetMethod("ShowSomething").MakeGenericMethod(newType).Invoke(this, new object[] { createdObject });
    } 
```

# c - 进程大小如何确定？

> ID：12490929
> 
> 赞同：7
> 
> 时间：2012-09-19T08:23:39.010
> 
> 标签：c, operating-system

我对这些概念很陌生，但我想问大家一个我认为非常基本的问题，但我很困惑，所以我问了。问题是......操作系统如何确定进程的大小？我先说清楚，假设我写了一个 C 程序，我想知道它要占用多少内存，我该如何确定呢？其次，我知道一个进程有很多部分，如代码部分、数据部分、BSS。现在这些的大小是预先确定的吗？其次是如何确定 Stack 和 heap 的大小。在计算进程的总大小时，堆栈和堆的大小是否也很重要。

我们再次说，当我们加载程序时，会为进程分配一个地址空间（我猜这是由基址和限制寄存器完成并由 MMU 控制），并且当进程试图访问不在它的内存位置时地址空间我们得到分段错误。进程如何访问不在其地址空间中的内存。根据我的理解，当发生一些缓冲区溢出时，地址就会被破坏。现在，当进程想要访问损坏的位置时，我们会遇到分段错误。是否有任何其他违反地址的方式。

第三，为什么堆栈向下增长并向上堆。这个过程是否与所有操作系统相同。它如何影响性能。为什么我们不能以其他方式拥有它？

请纠正我，如果我的任何陈述有误。

谢谢索拉博

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:09:46.003

当一个进程启动时，它会获得自己的虚拟地址空间。虚拟地址空间的大小取决于您的操作系统。通常，32 位进程获得 4 GiB（4 giga 二进制）地址，64 位进程获得 18 EiB（18 exa 二进制）地址。

您不能以任何方式访问未映射到虚拟地址空间的任何内容，因为根据定义，任何未映射到虚拟地址空间的内容都没有适合您的地址。您可能会尝试访问当前未映射到任何内容的虚拟地址空间区域，在这种情况下，您会遇到段错误异常。

在任何给定时间，并非所有地址空间都映射到某物。也不是所有的都可以映射（可以映射多少取决于处理器和操作系统）。在当前一代的英特尔处理器上，最多可以映射 256 TiB 的地址空间。请注意，操作系统可以进一步限制这一点。例如，对于 32 位进程（最多有 4 个 GiB 地址），Windows 默认为系统保留 2 GiB，为应用程序保留 2 GiB（但有一种方法可以为系统保留 1 GiB，为应用程序保留 3 GiB）。

应用程序运行时使用了多少地址空间以及映射了多少变化。操作系统特定的工具可以让您监控当前分配的内存和虚拟地址空间对于正在运行的应用程序是什么。

代码段、数据段、BSS 等是指链接器创建的可执行文件的不同区域的术语。通常，代码与静态不可变数据分开，静态不可变数据与静态分配但可变的数据分开。堆栈和堆与上述所有内容分开。它们的大小由编译器和链接器计算。请注意，每个二进制文件都有自己的部分，因此任何动态链接的库都将分别映射到地址空间中，每个库都将其自己的部分映射到某个地方。然而，堆和堆栈不是二进制映像的一部分，通常每个进程只有一个堆栈和一个堆。

堆栈的大小（至少是初始堆栈）通常是固定的。编译器和/或链接器通常有一些标志，可用于设置运行时所需的堆栈大小。堆栈通常“向后增长”，因为这就是处理器堆栈指令的工作方式。让堆栈沿一个方向增长，而其余的则沿另一个方向增长，这样在您希望两者都不受限制但又不知道每个可以增长多少的情况下，组织内存变得更容易。

通常，堆是指进程启动时未预先分配的任何东西。在最低级别，有几个与堆管理相关的逻辑操作（并非所有操作都像我在此处描述的那样在所有操作系统中实现）。

虽然地址空间是固定的，但一些操作系统会跟踪它的哪些部分当前被进程回收。即使不是这种情况，流程本身也需要对其进行跟踪。因此，最低级别的操作是实际决定要使用地址空间的某个区域。

第二个低级操作是指示操作系统将该区域映射到某物。这个一般可以

*   一些不可交换的内存

*   可交换并映射到系统交换文件的内存

*   可交换并映射到其他文件的内存

*   可交换并以只读模式映射到其他文件的内存

*   另一个虚拟地址区域映射到的相同映射

*   另一个虚拟地址区域映射到的相同映射，但处于只读模式

*   另一个虚拟地址区域映射到的相同映射，但在写时复制模式下，复制的数据映射到默认交换文件

我可能忘记了其他组合，但这些是主要的。

当然，使用的总空间实际上取决于您如何定义它。当前使用的 RAM 与当前映射的地址空间不同。但正如我在上面所写的，依赖于操作系统的工具应该可以让您了解当前正在发生的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T08:47:18.377

这些部分由可执行文件预先确定。

除此之外，可能还有任何动态链接库。虽然 DLL 的代码和常量数据应该在使用它的多个进程之间共享并且不会被多次计算，但它的进程特定的非常量数据应该在每个进程中都被考虑在内。

此外，进程中可以动态分配内存。

此外，如果进程中有多个线程，则每个线程都有自己的堆栈。

更重要的是，在进程本身和代表它的内核中将有每个线程、每个进程和每个库的数据结构（线程本地存储、命令行参数、各种资源的句柄、用于这些资源的结构）资源等等等等）。

如果不知道一切是如何实现的，就很难准确地计算出整个进程的大小。不过，您可能会得到一个合理的估计。

Wrt`According to my understanding when some buffer overflows happens then the address gets corrupted.`这不一定是真的。首先，地址是什么？这取决于缓冲区附近的内存中发生了什么。如果有地址，它可以在缓冲区溢出期间被覆盖。但是，如果附近有另一个缓冲区包含您的照片，则图片的像素可能会被覆盖。

当您尝试访问您没有必要权限的内存时（例如，已映射或以其他方式存在于进程地址空间中的内核部分），您可能会遇到分段或页面错误。或者它可以是只读位置。或者该位置不能映射到物理内存。

在不知道我们所讨论的性能的情况下，很难判断堆栈和堆的位置和布局将如何影响性能。你可以推测，但推测可能会被证明是错误的。

顺便说一句，您真的应该考虑针对单独的问题就 SO 提出单独的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T08:55:03.787

*“进程如何访问不在其地址空间中的内存？”*

考虑到内存保护，这是不可能的。但它可能会被*尝试*。考虑随机指针或超出缓冲区的访问。如果您将任何指针递增足够长的时间，它几乎肯定会进入未映射的地址范围。简单的例子：

```
 char *p = "some string";

 while (*p++ != 256)  /* Always true. Keeps incrementing p until segfault. */
     ; 
```

轻描淡写地说，像这样的简单错误并非闻所未闻。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T08:59:41.973

我可以回答问题#2 和#3。

**答案#2**

在 C 中使用指针时，您实际上是在使用一个数值，该数值被解释为内存地址（现代操作系统上的逻辑地址，请参见脚注）。您可以随意修改此地址。如果该值指向的地址不在您的地址空间中，则您有分段错误。

例如考虑这种情况：您的操作系统为您的进程提供从 0x01000 到 0x09000 的地址范围。然后

```
int * ptr = 0x01000;
printf("%d", ptr[0]); // * prints 4 bytes (sizeof(int) bytes) of your address space
int * ptr = 0x09100;
printf("%d", ptr[0]); // * You are accessing out of your space: segfault 
```

正如您所指出的，段错误的主要原因是使用指向 NULL 的指针（主要是 0x00 地址，但取决于实现）或使用损坏的地址。

注意，在 linux i386 上，base 和 limit 寄存器并没有像你想象的那样使用。它们不是每个进程的限制，但它们指向两种段：用户空间或内核空间。

**答案#3**

堆栈增长取决于硬件而不是操作系统。在 i386 汇编指令上，如 push 和 pop 使堆栈相对于堆栈相关的寄存器向下增长。例如，当您执行 push 时堆栈指针会自动减小，而当您执行 pop 时堆栈指针会增加。操作系统无法处理它。

**脚注**

在现代操作系统中，进程使用所谓的逻辑地址。该地址由操作系统映射到物理地址。要注意这一点，请自己编译这个简单的程序：

```
#include <stdio.h>

int main()
{
    int a = 10;
    printf("%p\n", &a);
    return 0;
} 
```

如果您多次（甚至同时）运行该程序，您会看到，即使对于不同的实例，打印出相同的地址。当然这不是真正的内存地址，而是一个逻辑地址，在需要的时候会映射到物理地址。

# c# - 为什么在标志枚举中使用按位或运算符，含义为 AND

> ID：12490931
> 
> 赞同：14
> 
> 时间：2012-09-19T08:23:51.420
> 
> 标签：c#, .net, c#-4.0

`OR`这可能是一个简单而简单的问题，但我仍然对决定使用bitwise 的原因有些困惑。假设我有一个`A`包含四个字段的类：

```
class A
{
    private int Field1;
    private static int Field2;
    public int Field3;
    public static int Field4;
} 
```

并用于`Reflection`获取字段：

```
var fields = typeof (A).GetFields(BindingFlags.Public | BindingFlags.Static); 
```

如果您是新手`Reflection`并且不知道如何使用`BindingFlags`，那么您脑海中的初始逻辑思维将是：

此行将选择所有静态 OR 公共字段，因为使用了按位 OR。以及您认为的预期结果：

```
Field2
Field3
Field4 
```

但是当按下 F5 时，结果将完全不同，按位`OR`工作为`AND`：

```
Field4 
```

为什么不使用可能遵循逻辑思维的按位 AND 运算符。像这样：

```
var fields = typeof (A).GetFields(BindingFlags.Public & BindingFlags.Static); 
```

我在[MSDN](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)中找到的话：

> 在某些情况下，用于组合标志的按位或运算可能被认为是一个高级概念，简单任务不需要。

请任何人都可以在这里以简单的方式解释*高级概念以便理解吗？*

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-19T08:27:32.170

见最后一个简短的总结。

**长答案：**

按位或组合枚举标志的位。

例子：

*   `BindingFlags.Public`值为 16 或 10000（二进制）
*   `BindingFlags.Static`值为 8 或 1000（二进制）

按位或将这些组合如下：

```
10000
01000
--
11000  --> 24 
```

按位 AND 会像这样组合它们：

```
10000
01000
--
00000   --> 0 
```

这是标志的一个非常基本的概念：
每个值都是 2 的幂，例如：

*   1 =`2^0`
*   2 =`2^1`
*   4 =`2^2`
*   8 =`2^3`
*   等等

它们的位表示始终为 a `1`，其余为零：

```
decimal | binary
1       | 0001
2       | 0010
4       | 0100
8       | 1000 
```

使用按位与组合它们中的任何一个总是会导致 0，因为`1`在同一位置没有。按位与会导致完全信息丢失。

另一方面，按位或总是会产生明确的结果。例如，当您有（二进制）1010（十进制 10）时，您知道它最初是 8 和 2。没有其他可能性可以创建 10。
正如 Default 所说，您调用的方法稍后可以使用按位 AND 运算符提取此信息：

```
if(10 & 8 == 8) // value 8 was set 
```

**在这种情况下，按位或基本上是将值传输到您正在调用的方法的工具。**
此方法对这些值的作用与按位或的使用无关。
它可以在内部要求所​​有传递的标志与`GetFields`. 但它也可能只需要一个传递的标志来匹配。

对于您作为呼叫者，以下内容将是等效的：

```
var requiredFlags = new List<BindingFlags>();
requiredFlags.Add(BindingFlags.Public);
requiredFlags.Add(BindingFlags.Static);
typeof (A).GetFields(requiredFlags); 
```

现在不能编译，因为`GetFields`不提供这样的重载，但含义与您的代码相同。

**总结一下（TL; DR）：**

按位 AND 与布尔 AND
无关 按位 OR 与布尔 OR 无关

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T08:29:35.327

标志枚举用于表示一组布尔条件。

在您的示例中，必须满足每个布尔条件才能返回相应的字段。

标志枚举是简单的整数值，它遵循与和或运算的常用二进制规则，因此要设置几个位，您必须将表示这些位的值进行或运算。

完成此操作后，您将拥有一个设置了适当位的标志枚举。

您遇到的问题是因为您将两个不同的概念混为一谈：为标志枚举构造一组布尔条件的方式是一个概念。标志枚举的使用方式（或它所代表的）是一个不同的概念。

前者使用 OR 来构造布尔条件集。后者表示每个位都代表一个必须满足的布尔条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T08:45:15.990

The implementers of GetFields() chose to *interpret* the combination of various ORed flags as meaning an AND combination of the selected criteria.

Which makes sense as you can always drop a criterion if you don't want the additional filter.

# php - 是字符串在php中的数组

> ID：12490934
> 
> 赞同：3
> 
> 时间：2012-09-19T08:24:06.770
> 
> 标签：php

您可以像在数组中一样在字符串中进行数字索引。
前任。

```
$text = "esenihc gnikcuf yloh";
echo $text[0];
echo $text[1];
echo $text[2];
...................
...................
................... 
```

但是如果你把字符串放在 print_r() 中，就会发生不一样的情况，就像在数组中一样，你不能用字符串做 count()。

我阅读了文档，它说。count() 如果参数中不是数组，则返回 1

print_r() 如果字符串在参数中，它只会打印该字符串。

这不是确切的词，而是类似的东西。

为什么这两个函数都不将字符串视为数组？

所以最后一个问题是字符串数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T08:29:38.160

与例如 C 不同，PHP 有一个内置的`string`数据类型。数据类型允许您像数组一样访问字符串中的`string`单个字符，但始终是`string`. 因此，如果您将它传递给接受`mixed`数据类型的函数，该函数将确定传递参数的数据类型并以这种方式对待它。也就是说，`print_r()`它将以编程为输出字符串的方式打印它，而不是像数组一样。

如果您想要一个功能与数组相同的功能，`count`请查看`strlen`.

如果你愿意，你可以通过`str_split`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:25:44.617

如果将字符串视为数组，则字符串是数组，例如：`echo $text[0]`，但会`print_r` *打印有关变量的人类可读信息*，因此它将输出该变量。

这叫做[类型杂耍](http://php.net/manual/en/language.types.type-juggling.php)

```
$a    = 'car'; // $a is a string
$a[0] = 'b';   // $a is still a string
echo $a;       // bar 
```

要计算字符串的长度`strlen($string)`，您可以使用`for()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T08:27:10.627

没有字符串不是数组

字符串是一系列字符，其中一个字符与一个字节相同，而 PHP 中的数组实际上是一个有序映射。映射是将值与键相关联的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T12:04:33.457

简单地说，PHP 中的每个变量都是一个数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-12T01:04:52.867

也许为时已晚，但是：

```
<?php
    $text = "esenihc gnikcuf yloh";
    $arrText = explode(" ", $text);

    foreach($arrText as $word) {
        echo $word . "<br>";
    }
?> 
```

# c# - 如何使用 Json 和 JQuery 在 Dropdown 中填充数据

> ID：12490935
> 
> 赞同：0
> 
> 时间：2012-09-19T08:24:15.263
> 
> 标签：c#, jquery, asp.net, json

```
 var technicianServiceUrl = "../../../AJAX/Common/BankingServiceAjax.svc/";
    var proxyTechnician = new serviceProxy(technicianServiceUrl);
    var technicians;

    function OnGetNotes() {
        proxyNotes.invoke("SearchBranchesByBankID",
                { "request":
                    {
                        "BankID": 1
                    }
                }, OnGetNotesComplete, OnError);

    }
    function OnGetNotesComplete(result) {

        var obj = jQuery.parseJSON(result);
        technicians = obj.Branches;
    } 
```

我希望 OnGetNotesComplete 在我的下拉列表中填充数据。返回将是数组

# android - 未找到源，编辑源查找路径

> ID：12490936
> 
> 赞同：2
> 
> 时间：2012-09-19T08:24:18.473
> 
> 标签：android, android-emulator

我正在使用 Eclipse 开发一个 android 应用程序，但是每当我调试我的应用程序时，我都会得到。

ActivityThread.performLaunchActivity(ActivityThread $ActivityRecord,Intent)line:2059 并且在标签页正文中有一些红色文字`"Source not found"`和一个按钮，上面写着`"Edit Source Lookup Path..."`。

我尝试通过添加多个路径，`"Edit Source Lookup Path..."`但找不到 Eclipse 正在寻找的路径。我已经尝试了许多在线给出的解决方案，但我的应用程序仍然显示相同的消息。

对于我的 java 代码：- [https://stackoverflow.com/questions/12489325/source-not-found-in-android-emulator-while-debug-the-app-retrieving-data-from-we](https://stackoverflow.com/questions/12489325/source-not-found-in-android-emulator-while-debug-the-app-retrieving-data-from-we) （代码工作正常)

# c - make 命令替换代码中的常量

> ID：12490938
> 
> 赞同：1
> 
> 时间：2012-09-19T08:24:26.263
> 
> 标签：c, unix, makefile

对不起，如果这是一个原始问题，但我在 linux 中真的很新。有没有办法在使用`make`命令构建应用程序时替换源代码中的常量？

我知道下一个可能的方法是更改​​源代码中使用的头文件，但我问这个是因为我必须对多个微控制器进行编程，并且每个微控制器都应该有一个唯一的整数作为其编号（这个编号在代码）。

任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:34:16.870

您可以使用通过命令行传递给编译器的*C 语言宏。*通常的`Makefile`片段看起来像

```
CFLAGS = -DVERSION_INT=42 -DVERSION_STRING=\"Frobozz Magic Frobnicator (TM)\"

main: main.c
         $(CC) $(CFLAGS) -o $@ main.c 
```

在 main.c 你可能有

```
static int version = VERSION_INT;
static char vers[] = VERSION_STRING; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T08:33:36.067

它通常通过在调用编译器时定义预处理器宏来完成，例如：

```
# Makefile
NUMBER := 42
%.o : %.c
    gcc -c -o $@ ${CPPFLAGS} ${CFLAGS} -DNUMBER=${NUMBER} $< 
```

在源文件中：

```
// some.c
int number = NUMBER; 
```

# sql-server - “SELECT * FROM (SELECT ...”) 会创建临时表吗？

> ID：12490940
> 
> 赞同：1
> 
> 时间：2012-09-19T08:24:31.867
> 
> 标签：sql-server

做一个

```
SELECT * FROM (SELECT foo.id, bar.name FROM foo LEFT JOIN bar ON bar.foo_id = foo.id)
              \--------------- Will this be a temp table? --------------------------/ 
```

创建与在存储过程中使用# 声明表相同类型的临时表？还是它创建了一个视图或其他一些魔法？对临时表的快速搜索只显示它们在存储过程中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:27:00.017

确实如此，但仅限于内部。

执行整个查询后，您将无法访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:34:25.450

临时表将在内存中创建，然后如前所述，丢失。对于复杂的子查询，这显然会给内存带来一些压力，但与大多数事情一样，内存比磁盘快。

您可以将嵌套查询作为单个查询进行，使用临时表（在磁盘上）然后执行另一个查询，最终删除该表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:31:07.857

在您的示例中，外部查询什么也不做。所以查询优化器会将它优化掉。

您可以在查询执行计划中看到结果集的流向。例如，a`loop join`会产生一个包含结果行的临时结构。临时结构可以像临时表一样存储在 tempdb 中。但它不会对您可见，并且会在查询完成后被释放。

# iphone - 关于 AVPlayer 在真机上的音量

> ID：12490941
> 
> 赞同：0
> 
> 时间：2012-09-19T08:24:35.033
> 
> 标签：iphone, objective-c, ios, avplayer

我正在使用 AVPlayer 播放本地音频文件和音频流。

除音量外，在真实设备上一切正常。音量非常低。即使我设置了设备音量最大值。但耳机音量正常。我猜想扬声器的音量如何变成耳机的音量。

它也适用于模拟器。

我试过 MPMusicPlayerController 、 AVMutableAudioMix 来设置音量。但没有任何效果。

我完全糊涂了。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:04:07.370

您可以从[开发者那里获得解决方案。Apple 技术问答 QA1716](http://developer.apple.com/library/ios/#qa/qa1716/_index.html)

AVPlayer 使用系统音量（由硬件音量开关控制）进行媒体播放。

使用**MPVolumeView**类在您的应用程序中向用户展示一个滑块控件，以设置系统音频输出音量

有关详细信息，请参阅[MPVolumeView 类参考](https://developer.apple.com/library/ios/#documentation/MediaPlayer/Reference/MPVolumeView_Class/Reference/Reference.html)。

您可以使用 AVPlayer 通过创建带有音量斜坡的 AVAudioMix 将音量设置为 0 来静音音频的播放，如下所示

**通过创建一个具有零音量斜坡的 AVAudioMix，使用 AVPlayer 使音频播放静音。**

```
AVURLAsset *asset = [AVURLAsset URLAssetWithURL:[self myAssetURL] options:nil];
NSArray *audioTracks = [asset tracksWithMediaType:AVMediaTypeAudio];

// Mute all the audio tracks
NSMutableArray *allAudioParams = [NSMutableArray array];
for (AVAssetTrack *track in audioTracks) {
    AVMutableAudioMixInputParameters *audioInputParams =[AVMutableAudioMixInputParameters audioMixInputParameters];
    [audioInputParams setVolume:0.0 atTime:kCMTimeZero];
    [audioInputParams setTrackID:[track trackID]];
    [allAudioParams addObject:audioInputParams];
}
AVMutableAudioMix *audioZeroMix = [AVMutableAudioMix audioMix];
[audioZeroMix setInputParameters:allAudioParams];

// Create a player item
AVPlayerItem *playerItem = [AVPlayerItem playerItemWithAsset:asset];
[playerItem setAudioMix:audioZeroMix]; // Mute the player item

// Create a new Player, and set the player to use the player item 
// with the muted audio mix
AVPlayer *player = [AVPlayer playerWithPlayerItem:playerItem];

// assign player object to an instance variable
self.mPlayer = player;

// play the muted audio
[mPlayer play]; 
```

# asp.net - 当 ConcurrencyMode = Multiple 时，两个并行 WCF 请求是否可以由同一个线程处理

> ID：12490943
> 
> 赞同：3
> 
> 时间：2012-09-19T08:24:39.443
> 
> 标签：asp.net, .net, multithreading, wcf, threadstatic

我有一个带有 ServiceBehavior（InstanceContextMode = InstanceContextMode.Single，ConcurrencyMode = ConcurrencyMode.Multiple）的 WCF 服务。我想使用 ThreadStatic 变量来获取数据。

我开始担心是否有可能对相同或不同 operationContracts 的两个并行请求由同一个线程服务器端处理，因为如果发生这种情况，我的 ThreadStatic 变量将被覆盖。（即类似于 ASP.NET 中 HttpHandlers 和 HttpModules 之间的线程更改)

我用相同的 ServiceBehaviour 和 maxConcurrentCalls="2" 做了一个尖峰服务。之后，一个 wcf 客户端用 50 个并行请求调用了该服务，而我的担心并没有发生。然而，这并不是 100% 的证明。

预先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T08:40:46.337

无论 ConcurrencyMode 是什么，`ThreadStatic`当您的请求终止并且线程返回到线程池时，一个值将保持不变。同一线程可以重复用于后续请求，因此可以看到您的`ThreadStatic`值。

显然这对于​​两个*并发*请求是不正确的，因为根据定义，它们将在不同的线程上执行。

来自评论：

> 根据定义，MSDN 还说：'服务实例是多线程的。没有同步保证。因为其他线程可以随时更改您的服务对象，所以您必须始终处理同步和状态一致性。所以它不是那么明显:)

这意味着多个请求可以同时访问您的服务类的单个实例。因此，您需要处理对服务类实例成员的任何访问的同步。

但是`ThreadStatic`，根据定义，成员一次只能由一个线程（因此一个请求）使用，因此不需要同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:28:36.770

您的问题的直接答案是乔的答案。

但是，您在评论中提到您正在使用环境设计模式。该模式已在 WCF 中作为 OperationContext 实现，并且专门设计为可扩展的。**我强烈建议在任何自定义线程存储上使用 OperationContext**。

请参阅[在哪里存储当前 WCF 调用的数据？ThreadStatic 安全吗？](https://stackoverflow.com/questions/1895732/where-to-store-data-for-current-wcf-call-is-threadstatic-safe)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:47:30.787

我想在这里添加乔的答案，因为如果您需要存储状态，我建议您对请求使用某种相关性。线程模型在生产中会变得非常复杂和不可靠。

此外，现在假设您有两个托管此服务的 IIS 服务器和一个硬件或软件负载均衡器，以便您可以使用它。为了确保收集到正确的状态，您需要关联，因为您永远不知道服务将在哪个服务器上启动。在下面的帖子中，我模拟了一个简化版本的工作方式。要记住的一件事是，`SessionState`需要将其保存在服务的所有实例的共享位置，例如 AppFabric 缓存服务器。

[两个 WCF 方法之间的全局变量](https://stackoverflow.com/questions/12475855/global-variable-between-two-wcf-methods/12476050#12476050)

# flash - 在 Actionscript 中更改文本字段

> ID：12490949
> 
> 赞同：0
> 
> 时间：2012-09-19T08:25:10.107
> 
> 标签：flash, actionscript, timer, textbox, countdown

再一次，Actionscript / Flash 让我发疯。我正在尝试创建一个简单的倒数计时器。我在舞台上添加了一个文本（“输入文本”类型）。文本字段的名称是 wtftext。

```
 var treffen = new Date(2012,8,24,00,00,00);

function countdown() 
{ 
 var jetzt = new Date();
// trace(jetzt);

 var rest = treffen - jetzt;
 rest = Math.floor(rest/1000); //umrechnung millisek. in sek      
// trace(rest);

 var std = Math.floor(rest/3600); 
// trace(std);
 var temp = rest - (std*3600);
 var min = Math.floor(temp/60); 
// trace(min);

 wtftext.text = std + " Hours " + min + " Min";
 trace(std + " Hours " + min + " Min");

} 
//initial:
//countdown();
//recurring:
setInterval(countdown,1000); 
```

我知道计算是正确的。但是当文本字段内容发生变化时出现问题。一秒钟后，我得到的只是

> 输入

我认为“r in”必须与我在文本字段中输入的文本相关（“x剩余”）。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:37:47.083

好的，我解决了。只需删除最初添加到文本字段的文本。

# visual-studio-2010 - Sharepoint 2010：创建一个查阅列，该列引用文档库中特定内容类型的文件

> ID：12490950
> 
> 赞同：0
> 
> 时间：2012-09-19T08:25:13.037
> 
> 标签：visual-studio-2010, sharepoint, content-type

我需要在 sharepoint 2010 中创建一个查找列，该列引用指定内容类型的文件。文件都驻留在以文件夹形式组织的文档库中。

更确切地说：

*   我的 DocLib1 包含不同内容类型的文件（例如 ContentType1、ContentType2）
*   我需要创建一个查阅列（在不同的列表中，但我认为这不重要），它引用 DocLib1 并且只引用 ContentType1 的文件（而不是 ContentType2 的文件）。

我知道如何在 SP Web 界面或 SharePoint Designer 中创建查阅列。如有必要，我还可以使用 C# 或 elements.xml 在 Visual Studio 中创建列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:07:11.647

我之前尝试创建一个按名称列引用文档的查找列，但它不像您期望的那样工作。虽然查找列中存储的值有效，但它不会显示在列表视图或项目显示中。目前我使用[Lookup Extra](http://www.sparqube.com/SharePoint-Lookup-Column/)字段类型进行文档查找。它还支持按内容类型过滤文档。

# java - 如何为mybatis框架生成的mapper类创建Aspect？

> ID：12490954
> 
> 赞同：1
> 
> 时间：2012-09-19T08:25:25.467
> 
> 标签：java, spring, aop, mybatis

我想使用带有此切入点的 mybatis 创建用于分析数据库调用的方面

```
@Pointcut("execution(public * org.example.mybatisgenerated.*Mapper+.*(..) )")
public void anyGeneratedMapperMethod(){} 
```

问题是映射器是接口并且没有像这样的具体类。

```
public interface SampleMapper {

  int deleteByPrimaryKey(String sampleGuid);

  int insert(Sample record);
} 
```

映射器的实现（实际的 sql 脚本）在 xml 文件中。具体类被创建为代理。是否有可能以某种方式建议映射器的所有方法？

使用 Aspectj 加载时编织。也许这可以通过另一种编织方式实现。我不想用具体的实现来包装所有的映射器，这将是很多无用的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:57:56.710

MyBatis 中有一个[拦截器内置功能](http://www.mybatis.org/core/configuration.html#plugins)。也许你可以使用它？

# java - 一个用于从 Set 中获取子列表的衬垫

> ID：12490955
> 
> 赞同：5
> 
> 时间：2012-09-19T08:25:28.033
> 
> 标签：java, guava, apache-commons-collection

是否有一个单行（可能来自 Guava 或 Apache Collections）从集合中获取子列表。在内部它应该做这样的事情：

```
public <T> List<T> sublist(Set<T> set, int count) {
  Iterator<T> iterator = set.iterator();
  List<T> sublist = new LinkedList<T>();
  int pos = 0;
  while (iterator.hasNext() && pos++ < count) {
    sublist.add(iterator.next());
  }
  return sublist;
} 
```

显然，如果没有足够的元素，它必须返回尽可能多的元素。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-19T22:09:14.550

与番石榴：

```
return FluentIterable.from(set) 
  .limit(count)
  .toImmutableList(); 
```

（此外，与大多数其他解决方案相比，这实际上不会遍历整个集合——它*实际上*只会遍历第一个`count`元素然后停止。）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-19T08:29:07.333

```
(new LinkedList<Object>(mySet)).sublist(0, Math.min(count, mySet.size())) 
```

但请注意：代码（甚至是您的原始代码）有点臭，因为集合的迭代顺序取决于所讨论的实际集合实现（它完全未定义 in`HashSet`和 s 的键顺序`TreeSet`）。所以，这实际上是一个悬而未决的问题，哪些元素进入了最终的子列表。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-19T08:28:58.100

这应该这样做：

```
return (new LinkedList<T>(set)).subList(0, count); 
```

但请确保，它`count`不大于`set`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-19T08:29:36.850

您可以使用[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)并使用它的[subSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#subSet%28E,%20boolean,%20E,%20boolean%29)方法：

> 返回此集合的一部分的视图，其元素范围从 fromElement 到 toElement。如果 fromElement 和 toElement 相等，则返回的集合为空，除非 fromExclusive 和 toExclusive 都为真。返回的集合由该集合支持，因此返回集合中的更改会反映在该集合中，反之亦然。返回的集合支持该集合支持的所有可选集合操作。

**使用整数的示例：**

```
TreeSet<Integer> t = new TreeSet<Integer>();
t.add(1);
t.add(2);
t.add(3);
t.add(4);
t.add(5);

System.out.println("Before SubSet:");

for(Integer s : t){
    System.out.println(s);
}

System.out.println("\nAfter SubSet:");

for(Integer s : t.subSet(2,false,5,true)){
    System.out.println(s);
} 
```

**输出：**

```
Before SubSet:
1
2
3
4
5

After SubSet:
3
4
5 
```

或者，如果您不知道元素并希望返回两点之间的元素，则可以使用由 Set 构造的 ArrayList 并使用[subList](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractList.html#subList%28int,%20int%29)方法。

```
System.out.println("\nAfter SubSet:");

t = new TreeSet(new ArrayList(t).subList(2, 5));

for(Integer s : t){
    System.out.println(s);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-19T08:29:17.683

那这个呢

```
Set<String> s = new HashSet<String>();
// add at least two items to the set 
Set<String> subSet = new HashSet(new ArrayList<String>(s).subList(1, 2)); 
```

这将在 1 和 2 之间进行子列表

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T08:41:05.993

无需事先创建副本`Set`，您可以（使用番石榴）：

```
Lists.newLinkedList(Iterables.getFirst(Iterables.partition(mySet, count), ImmutableList.of())) 
```

`LinkedList`它是一个只包含（最多）第一个元素的真实`count`元素，而不是更大列表上的视图。

# java - 使用 Java Webstart 时不显示进度对话框

> ID：12490958
> 
> 赞同：1
> 
> 时间：2012-09-19T08:25:33.900
> 
> 标签：java, java-web-start, java-deployment-toolkit

我们正在使用最新的 Java 7 版本 (U7) 通过 Webstart 部署一个基于 Swing 的应用程序（带有一些 JavaFX 组件）：

```
<script src="http://java.com/js/dtjava.js"></script>
<script>
        function launchApplication(jnlpfile) {
        dtjava.launch(
            { url : jnlpfile },
            {
                javafx : '2.2+',
                toolkit: 'swing'
            },
            {}
        );
        return false;
    }
</script>
...
<p>
<a href='xxxx.jnlp' 
    onclick="return launchApplication('xxxx.jnlp');">Start</a> 
<noscript>
<p style="color: red">Please enable JavaScript!</p>
</noscript>
</p> 
```

不幸的是，没有显示显示下载 JAR 文件和验证它们的进度的对话框。这意味着当需要从服务器下载文件时，用户会认为启动应用程序不起作用，因为他没有收到任何反馈。

任何想法为什么不显示此对话框？这与 Java 7 或使用部署工具包有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:16:10.563

带有嵌入式 JavaFX 的 Swing 应用程序没有[默认的预加载器](http://docs.oracle.com/javafx/2/deployment/deploy_swing_apps.htm#BACFDACD)。根据 JavaFX 部署文档，它是在获取 jar 时 [显示加载进度条的预加载器。](http://docs.oracle.com/javafx/2/deployment/deploy_user_experience.htm#BABFIECI)

我不知道是否可以为 Swing 应用程序创建自定义预加载器，您可以[尝试一下](http://docs.oracle.com/javafx/2/deployment/preloaders.htm#BABCDIHD)，看看它是否有效 - 但我怀疑这可能是不可能的。

如果创建默认预加载器不起作用，那么您可以[针对 JavaFX 项目记录问题](http://javafx-jira.kenai.com)。如果该问题应由主要 Java 项目解决，JavaFX 团队将对其进行分类并通知您。

# android - 用片段替换 ViewPager - 然后导航回来

> ID：12490963
> 
> 赞同：31
> 
> 时间：2012-09-19T08:26:06.853
> 
> 标签：android, android-fragments, android-viewpager, fragmentpageradapter

我有一个活动，它最初托管一个 ViewPager，连接到一个 FragmentPagerAdapter。

当用户单击 ViewPager 的子片段中的项目时，我正在使用 FragmentTransaction 用我想要导航到的新片段替换空容器视图。

如果我在事务上使用 addToBackStack()，提交事务然后返回，我不会返回到 ViewPager 的视图（初始布局）。

如果我不在事务上使用 addToBackStack()，提交事务然后返回，应用程序退出。

似乎很明显 ViewPager 没有添加到后台堆栈（这并不奇怪，因为它本身不是一个片段）。但我希望默认行为是后台按下将我带回最初的活动查看（ViewPager）。

根据我所阅读的内容，似乎可能是因为正在发生片段事务，ViewPager 或 PagerAdapter 失去了应该显示哪个片段的跟踪。

我真的对此感到困惑，但我最终创建了一大堆覆盖 onBackPress 并显示和隐藏 viewpager 视图的代码。我会认为有一种更简单的方法可以使用默认行为来执行适当的导航。

tl;博士

A 是一个 Viewpager 托管片段。B是一个新的片段。

当我用 B 替换 A，然后按返回时，我希望导航回 A，但这并没有发生。

任何建议将不胜感激。

代码：

主要活动：

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

        headingLayout = (RelativeLayout) findViewById(R.id.headingLayout);
        headingLayout.setVisibility(View.GONE);

        // Set up the ViewPager, attaching the adapter and setting up a listener
        // for when the
        // user swipes between sections.
        mViewPager = (ViewPager) findViewById(R.id.pager);

        mViewPager.setPageMargin(8);

        /** Getting fragment manager */
        FragmentManager fm = getSupportFragmentManager();

        /** Instantiating FragmentPagerAdapter */
        MyFragmentPagerAdapter pagerAdapter = new MyFragmentPagerAdapter(fm);

        /** Setting the pagerAdapter to the pager object */
        mViewPager.setAdapter(pagerAdapter);
.
.
.
}

    public void onListItemClicked(Fragment fragment) {
        fromPlayer = false;
        InitiateTransaction(fragment, true);

    }

    public void InitiateTransaction(Fragment fragment, boolean addToBackStack) {

        invalidateOptionsMenu();

        FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();

        ft.replace(R.id.fragmentContainer, fragment).addToBackStack(null)
                .commit();

    } 
```

寻呼机适配器：

```
package another.music.player;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import another.music.player.fragments.AlbumListFragment;
import another.music.player.fragments.ArtistListFragment;
import another.music.player.fragments.SongListFragment;

public class MyFragmentPagerAdapter extends FragmentPagerAdapter {

    final int PAGE_COUNT = 3;

    /** Constructor of the class */
    public MyFragmentPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    /** This method will be invoked when a page is requested to create */
    @Override
    public Fragment getItem(int i) {
        switch (i) {
        case 0:
            ArtistListFragment artistListFragment = new ArtistListFragment();
            Bundle artistData = new Bundle();
            artistData.putInt("current_page", i + 1);
            artistListFragment.setArguments(artistData);
            return artistListFragment;

        case 1:
            AlbumListFragment albumListFragment = new AlbumListFragment();
            Bundle albumData = new Bundle();
            albumData.putInt("current_page", i + 1);
            albumData.putBoolean("showHeader", false);
            albumListFragment.setArguments(albumData);
            return albumListFragment;

        default:

            SongListFragment songListFragment = new SongListFragment();
            Bundle songData = new Bundle();
            songData.putInt("current_page", i + 1);
            songListFragment.setArguments(songData);
            return songListFragment;
        }
    }

    /** Returns the number of pages */
    @Override
    public int getCount() {
        return PAGE_COUNT;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return "Artists";

        case 1:
            return "Albums";

        default:
            return "Songs";
        }
    }
} 
```

主 xml（包含 fragmentContainer 和 ViewPager）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/main_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/app_background_ics" >

    <RelativeLayout
        android:id="@+id/headingLayout"
        android:layout_width="match_parent"
        android:layout_height="56dp" >
    </RelativeLayout>

    <FrameLayout
        android:id="@+id/fragmentContainer"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/headingLayout" />

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <android.support.v4.view.PagerTabStrip
            android:id="@+id/pager_title_strip"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#33b5e5"
            android:paddingBottom="4dp"
            android:paddingTop="4dp"
            android:textColor="#fff" />
    </android.support.v4.view.ViewPager>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-06-27T18:54:05.447

I also had this very same problem for a long time. The solution turns out to be very simple, and you don't need any hacks with the ViewPager Visibility. I is described in this other SO related question: [Fragment in ViewPager not restored after popBackStack](https://stackoverflow.com/questions/16600156/fragment-in-viewpager-not-restored-after-popbackstack)

However, to make it simple, all you need is to use getChildFragmentManager() in your ViewPager adapter, instead of getSupportFragmentManager(). So, instead of this:

```
 /** Getting fragment manager */
    FragmentManager fm = getSupportFragmentManager();

    /** Instantiating FragmentPagerAdapter */
    MyFragmentPagerAdapter pagerAdapter = new MyFragmentPagerAdapter(fm);

    /** Setting the pagerAdapter to the pager object */
    mViewPager.setAdapter(pagerAdapter); 
```

You do this:

```
 /** Getting fragment manager */
    FragmentManager fm = getChildFragmentManager();

    /** Instantiating FragmentPagerAdapter */
    MyFragmentPagerAdapter pagerAdapter = new MyFragmentPagerAdapter(fm);

    /** Setting the pagerAdapter to the pager object */
    mViewPager.setAdapter(pagerAdapter); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-02T15:04:20.057

**更新：**
这不是“Android 方式”，它会导致列表视图的用户体验不佳。相反，创建一个新活动。

对于寻找解决此问题的简单方法的人，我将总结一下我所做的。

我的架构：

*   FragmentActivity 中的 ViewPager（实际上是 ActionBarActivity，用于 ActionBar 支持。但 ActionBarActivity 实现了 FragmentActivity）。

*   2 个标签：

    *   扩展 Fragment 的 FragmentContainer1。
    *   扩展 Fragment 的 FragmentContainer2。

对于每个 FragmentContainer，我们调用 getChildFragmentManager，例如在 onCreate 方法中，并添加我们想要在这个容器中显示的片段：

```
FragmentToShow fragment = new FragmentToShow();

getChildFragmentManager()
        .beginTransaction()
        .add(R.id.container, fragment)
        .commit(); 
```

我们不希望我们的第一个片段被添加到片段容器的后台堆栈中，因为我们不想在按下后退按钮时显示片段容器。

然后，如果我们想用我们的 FragmentToShow 类中的另一个片段替换 FragmentToShow（比如使用 listView）：

```
Fragment itemFragment = new ItemFragment();

getFragmentManager()
        .beginTransaction()
        .replace(R.id.container, itemFragment)
        .addToBackStack(null)
        .commit(); 
```

在这里，我们检索子片段管理器，并将 itemFragment 添加到后堆栈。

所以现在我们想要在按下后退按钮时返回到 listView（FragmentToShow 实例）。我们的活动（FragmentActivity）是唯一知道后退按钮的活动，因此我们必须在此活动中覆盖 onBackPressed() 方法：

```
@Override
public void onBackPressed() {

    // We retrieve the fragment manager of the activity
    FragmentManager frgmtManager = getSupportFragmentManager();

    // We retrieve the fragment container showed right now
    // The viewpager assigns tags to fragment automatically like this
    // mPager is our ViewPager instance
    Fragment fragment = frgmtManager.findFragmentByTag("android:switcher:" + mPager.getId() + ":" + mPager.getCurrentItem());

    // And thanks to the fragment container, we retrieve its child fragment manager
    // holding our fragment in the back stack
    FragmentManager childFragmentManager = fragment.getChildFragmentManager();

    // And here we go, if the back stack is empty, we let the back button doing its job
    // Otherwise, we show the last entry in the back stack (our FragmentToShow) 
    if(childFragmentManager.getBackStackEntryCount() == 0){
        super.onBackPressed();
    } else {
        childFragmentManager.popBackStack();
    }
} 
```

由于我们在活动中调用 getSupportFragmentManager，所以我们可以在子片段中调用 getFragmentManager。这将返回一个支持 FragmentManager 实例。

就是这样！我不是专家，所以如果您有任何建议或意见，请随意。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T03:51:04.193

我发现实现这一目标的唯一方法是执行以下操作：

离开 viewPager 时，使用 Visiblity.GONE 将 viewPager 发送到视野之外。将任何片段事务添加到后台堆栈。

返回 viewPager 屏幕时（通过后按），覆盖 onBackPressed。您可以查看后台堆栈中有多少个片段。如果 viewPager 是片段事务发生之前的第一个视图，那么您可以检查片段回栈条目计数是否为 0。

fragmentManager.getBackStackEntryCount() == 0，回栈中没有分片。

如果该陈述为真，那么只需使用 Visibility.VISIBLE 将 viewPager 带回视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-28T16:47:34.057

如果您使用的是可以 start的`ViewPager`包含，那么在回击或从所述位置向上导航时，您将如何正确导航回 中的位置（假设您为您的 声明了向上导航）。`Fragments``Activities``ViewPager``Activity``Activities`

首先，您需要将 的当前位置`ViewPager`作为 Extra传递`Intent`给新的`Activity`.

然后你将把这个位置传回给父母`Activity`这样做：

```
Intent upIntent = NavUtils.getParentActivityIntent(this);
upIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
upIntent.putExtra(FeedPagerActivity.EXTRA_POSITION, position);
NavUtils.navigateUpTo(this, upIntent); 
```

将该代码放入

> onOptionsItemSelected（菜单项项）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-05T08:42:18.490

我想我有一个非常相似的问题。

似乎`FragmentManager`s 的行为有点分层。我解决这个问题的方法是使用活动中的“主”FragmentManager，它承载容器和 ViewPager，而不是可以从 ViewPager 内的片段中检索的那个。

为此，我使用了：

```
this.getActivity().getSupportFragmentManager() 
```

其中`this`是 Fragment 的一个实例。

现在，如果我从 ViewPager 中的一个项目导航到具有“替换”事务的其他片段，返回后我可以看到 ViewPager 处于我离开的状态。

更完整的代码示例如下所示：

```
FragmentManager fragmentManager =  MyCurrentFragment.this.getActivity().getSupportFragmentManager();
FragmentTransaction transaction = fragmentManager.beginTransaction();

transaction.replace(R.id.container, newFragment);
transaction.addToBackStack(null);

transaction.commit(); 
```

# android - 安卓录音音量

> ID：12490964
> 
> 赞同：0
> 
> 时间：2012-09-19T08:26:11.593
> 
> 标签：android, audio-recording, volume

我需要在 Android 中录制音频文件，但我遇到了音量低的问题。输出轨道的音量太小了。
如何提高录音音量？

是否可以 ？

我使用 MediaRecorder

**更新**

我使用这段代码：

```
AudioManager audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
audioManager.setMode(AudioManager.MODE_NORMAL);
audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,
               audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0); 
```

有没有减少音量的错误？

录音机代码：

```
 recorder.setAudioSource(MediaRecorder.AudioSource.MIC); // CHANGE THIS ?
 recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
 recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
 recorder.setOutputFile(outputAudio);
 recorder.setOnErrorListener(errorListener);
 recorder.setOnInfoListener(infoListener);
 recorder.setMaxDuration(Integer.parseInt(getString(R.string.max_mills)));** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:35:46.150

据我了解，录制时无法做到这一点，这完全取决于您的麦克风。但是在播放时，可以使用 MediaPlayer 上的 setVolume(float, float) 方法来增加音量。

# java - 加载百分比时Android ProgressBar消息更改

> ID：12490965
> 
> 赞同：4
> 
> 时间：2012-09-19T08:26:13.590
> 
> 标签：java, android

当进度条加载到特定百分比时，我正在尝试添加消息。因此，当加载 10% 时，会出现标题或消息，表明已加载某些内容。我不能这样做，它迫使关闭。任何想法如何做到这一点。

下面是我的示例代码

```
 public void onClick(View v) {

        // prepare for a progress bar dialog
        progressBar = new ProgressDialog(v.getContext());
        progressBar.setCancelable(true);
        progressBar.setMessage("File downloading ...");
        progressBar.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progressBar.setProgress(0);
        progressBar.setMax(100);
        progressBar.show();
        //getWindow().requestFeature(Window.FEATURE_INDETERMINATE_PROGRESS);

        //reset progress bar status
        progressBarStatus = 0;
        //reset filesize
        fileSize = 0;

        new Thread(new Runnable() {
          public void run() {
            while (progressBarStatus < 100) {

              // process some tasks
              progressBarStatus = doSomeTasks();

              // your computer is too fast, sleep 1 second
              try {
                Thread.sleep(1000);
              } catch (InterruptedException e) {
                e.printStackTrace();
              }

              // Update the progress bar
              progressBarHandler.post(new Runnable() {
                public void run() {
                  progressBar.setProgress(progressBarStatus);
                }
              });
            }

            // ok, file is downloaded,
            if (progressBarStatus >= 100) {

                // sleep 2 seconds, so that you can see the 100%
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                // close the progress bar dialog
                progressBar.dismiss();
            }
          }
           }).start();

           }

            });

    }

// file download simulator... a really simple
public int doSomeTasks() {

    while (fileSize <= 1000000) {

        fileSize++;
        setProgressBarIndeterminate(true);
        if (fileSize == 100000) {
            progressBar.setMessage("10 percent loaded");
            return 10;
        } else if (fileSize == 200000) {
            progressBar.setMessage("20 percent loaded");
            return 20;
        } else if (fileSize == 300000) {
            progressBar.setMessage("30 percent loaded");
            return 30;
        }
        // ...add your own

    }

    return 100;

} 
```

感谢 StackOverFlow 用户

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:34:55.107

尝试像下面的代码一样更新进度条...

```
//To use the AsyncTask, it must be subclassed  
private class LoadViewTask extends AsyncTask<Void, Integer, Void>  
{  
    //Before running code in separate thread  
    @Override  
    protected void onPreExecute()  
    {  
        //Create a new progress dialog  
        progressDialog = new ProgressDialog(LoadingScreenActivity.this);  
        //Set the progress dialog to display a horizontal progress bar  
        progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);  
        //Set the dialog title to 'Loading...'  
        progressDialog.setTitle("Loading...");  
        //Set the dialog message to 'Loading application View, please wait...'  
        progressDialog.setMessage("Loading application View, please wait...");  
        //This dialog can't be canceled by pressing the back key  
        progressDialog.setCancelable(false);  
        //This dialog isn't indeterminate  
        progressDialog.setIndeterminate(false);  
        //The maximum number of items is 100  
        progressDialog.setMax(100);  
        //Set the current progress to zero  
        progressDialog.setProgress(0);  
        //Display the progress dialog  
        progressDialog.show();  
    }  

    //The code to be executed in a background thread.  
    @Override  
    protected Void doInBackground(Void... params)  
    {  
        /* This is just a code that delays the thread execution 4 times, 
         * during 850 milliseconds and updates the current progress. This 
         * is where the code that is going to be executed on a background 
         * thread must be placed. 
         */  
        try  
        {  
            //Get the current thread's token  
            synchronized (this)  
            {  
                //Initialize an integer (that will act as a counter) to zero  
                int counter = 0;  
                //While the counter is smaller than four  
                while(counter <= 4)  
                {  
                    //Wait 850 milliseconds  
                    this.wait(850);  
                    //Increment the counter  
                    counter++;  
                    //Set the current progress.  
                    //This value is going to be passed to the onProgressUpdate() method.  
                    publishProgress(counter*25);  
                }  
            }  
        }  
        catch (InterruptedException e)  
        {  
            e.printStackTrace();  
        }  
        return null;  
    }  

    //Update the progress  
    @Override  
    protected void onProgressUpdate(Integer... values)  
    {  
        //set the current progress of the progress dialog  
        progressDialog.setProgress(values[0]);  
    }  

    //after executing the code in the thread  
    @Override  
    protected void onPostExecute(Void result)  
    {  
        //close the progress dialog  
        progressDialog.dismiss();  
        //initialize the View  
        setContentView(R.layout.main);  
    }  
} 
```

并在要显示进度条的地方调用此 AsyncTask ...

```
//Initialize a LoadViewTask object and call the execute() method  
new LoadViewTask().execute(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T08:29:58.320

使用[AsynTask](http://developer.android.com/reference/android/os/AsyncTask.html)而不是基本线程。在 asynctask 中，使用回调`onProgressUpdate`调用 `progressBar.setProgress(progressBarStatus);`

您只能从主线程访问 UI 元素。

# android - 将 Drupal 7 移动主题变成同时使用 REST 和 webview 的应用程序？

> ID：12490966
> 
> 赞同：0
> 
> 时间：2012-09-19T08:26:17.983
> 
> 标签：android, jquery, cordova, jquery-mobile, drupal-7

我有许多 Drupal 7 网站 (http://drupal.org)，它们有一个带有 JQuery mobile (http://jquerymobile.com/) 的移动主题，供用户使用智能手机或平板电脑浏览。尽管这提供了出色的移动体验，但我想为 Android 和 Iphone 创建一个应用程序，该应用程序使用一些内置功能来创建内容（主要是节点创建上的相机）。我已经安装了 eclipse 和 android 模拟器，并且安装了用于 Android 测试的 Phonegap。在这里，我需要一些关于解决我的特定问题的最佳方法的建议。基本上每个应用程序几乎可以完全只是一个 web 视图（简单），但我确实需要 2 个功能来增加足够的独特性，使其能够在 MAC 应用程序商店中获得批准。

1.  使用 REST 服务（以及 phonegap）添加节点的能力可以访问使用手机的摄像头来填充图像字段。
2.  起始页或首页具有快速登录，并允许即时访问以添加内容（所有资产都存储在手机本地，因此即使手机离线，此页面仍会出现）。
3.  能够从常规移动站点 (webview) 返回到本地节点创建页面（可以访问摄像头）或正面。
4.  能够将某些内容传递给 webview，这样我就可以隐藏访问节点创建表单的 web 版本的内容创建链接（例如，它没有摄像头）。

这是我感到困惑的地方。我不想重新创建整个站点并使用服务检索所有数据（我见过的很多教程和东西都在这样做，包括 DrupalGap - [http://drupal.org/project/drupalgap](http://drupal.org/project/drupalgap)）。这似乎是大量冗余工作，当站点升级和更改时需要大量持续更新，除了速度之外没有任何实际收益（为此，它不会那么快）。

对于我的移动应用程序，当用户想要查看他们的个人资料、查看各种页面等时，这些都应该发生在 web 视图中，我只需要服务和用于首页、身份验证和节点创建的移动开发的典型方法。其余的应该发生在 webview 中。那么在添加节点和使用服务进行身份验证之间切换的最佳方式是什么？我是否应该尝试在页面中嵌入 web 视图并在顶部有一个小菜单，该菜单不会更改指向添加内容和登录的链接？

如何为 webview 内容和服务设置会话？或者我如何通过 REST 强制身份验证，然后将其传递给 webview？您不必直接回答每一个问题，我只是想要一些提示，让我朝着正确的方向开始。到目前为止，我想我为应用程序创建了一个“首页”，它的所有资产都存储在手机本地，它有一个通过 Web 服务 (REST) 进行身份验证的登录。登录后，它会显示添加节点的链接和查看 web 视图的链接。最大的问题是我如何为两者使用相同的会话以及如何在两个井之间导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:28:28.737

我实现了上述目标，让登录通过 jquery mobile 在常规 html 页面中使用 REST 服务（如本教程[http://tylerfrankenstein.com/code/android-app-with-drupal-7-services-phonegap -and-jquery-mobile](http://tylerfrankenstein.com/code/android-app-with-drupal-7-services-phonegap-and-jquery-mobile)）这也是可以放置创建内容链接的地方。如果您希望用户能够打开“常规”移动网站并且已经登录，请使用 childbrowser phonegap 插件 (https://build.phonegap.com/docs/plugins)。用户可以通过单击 X 关闭子浏览器并返回主仪表板，或者您可以创建一个侦听器，通过特定 URL（如主页）响应他们。

# c# - 如何在 Excel 中获取选定的工作表名称

> ID：12490969
> 
> 赞同：3
> 
> 时间：2012-09-19T08:26:32.443
> 
> 标签：c#, excel

我正在尝试在 Excel 中获取所选工作表的名称。我的 excel 文件中有 4-5 个工作表。用户应该选择其中两个，然后我的应用程序扫描特定列并比较值。但是，当用户选择多个工作表时，我无法在 C# 中找到获取工作表名称的方法。用户还可以通过应用程序删除这些选定的工作表。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:16:07.183

使用 VSTO：

```
var sheets = Application.ActiveWindow.SelectedSheets;

var names = new List<string>();
foreach (Excel.Worksheet sh in sheets)
{
  names.Add(sh.Name);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:34:05.887

一种方法是使用 Spreadsheetgear：[链接到 Spreadsheetgear 网站](http://www.spreadsheetgear.com/)

这是我尝试过的处理 Excel 工作簿的最简单的解决方案。但相当昂贵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:51:31.147

如果您需要免费解决方案，请查看 Excel Package Plus：[http ://epplus.codeplex.com/](http://epplus.codeplex.com/)

它应该具有您需要的所有功能。

# objective-c - NSDictionary 里面的 NSDictionary

> ID：12490970
> 
> 赞同：9
> 
> 时间：2012-09-19T08:26:33.753
> 
> 标签：objective-c, xcode, key, nsdictionary

好的，我有一个 .plist 文件，

其中我有一个`NSDictionary *StoredAddresses`，

里面`StoredAddresses`，又是一把`NSDictionary`

我知道我可以使用，

```
if ([dictionaryOfAddresses objectForKey:@"StoredAddresses"]) 
```

要访问顶级 NSDictionaries，但如何在存储的地址中搜索键？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T08:32:22.807

好吧，如果我没看错的话，你的字典中有字典。这就像任何其他对象一样工作：

```
NSDictionary* Address=[dictionaryOfAddresses objectForKey:@"Home Address"];
NSString* Street=[Address objectForKey:@"Street"]; 
```

如果您愿意，您可以合并呼叫：

```
NSString* Street=[[dictionaryOfAddresses objectForKey:@"Home Address"] objectForKey:@"Street"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T12:49:55.823

您可以使用该`NSKeyValueCoding`方法`valueForKeyPath:`访问嵌套对象的属性。例如，给定以下字典...

```
NSDictionary *homeAddressDict = @{ @"street" : @"2 Elm St.", @"city" : @"Reston" };
NSDictionary *addressesDict = @{ @"home" : homeAddressDict }; 
```

`home`...您可以按如下方式访问嵌套字典的值：

```
NSString *street = [addressesDict valueForKeyPath:@"home.street"];
NSString *city = [addressesDict valueForKeyPath:@"home.city"]; 
```

这对于嵌套更深的路径同样适用，例如：

```
NSDictionary *contactDict = @{ @"name" : @"Jim Ray", @"addresses" : addressesDict };

NSString *street2 = [contactDict valueForKeyPath:@"addresses.home.street"];
NSString *city2 = [contactDict valueForKeyPath:@"addresses.home.city"]; 
```

请注意，无论对象是 的实例`NSDictionary`还是继承自 的任何自定义类`NSObject`，只要自定义类具有名称与键匹配的属性或实例变量，这都将起作用。

因此，例如，您可以替换具有声明属性、getter 方法或名为**street**和**city**的实例变量（或名为**_street**和**_city**的实例变量）的自定义类的实例，而不是使用`NSDictionary`家庭地址，并且仍然可以访问它一样的方法。`Address`

 ******如果包含目标属性的对象是可变的（例如 的实例`NSMutableDictionary`），您甚至可以使用相同的机制修改该值，例如：

```
[contactDict setValue:@"Herndon" forKeyPath:@"addresses.home.city"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T08:29:31.837

这将返回**StoredAddresses中的键数组**

```
yourArray=[[dictionaryOfAddresses objectForKey:@"StoredAddresses"] allKeys]; 
```

然后您可以打印 yourArray 并查看密钥，然后在知道您可以使用任一访问的密钥之后

```
dict=[[dictionaryOfAddresses objectForKey:@"StoredAddresses"] objectForKey:[yourArray objectAtIndex:index_for_that_key]]; 
```

或者

```
dict=[[dictionaryOfAddresses objectForKey:@"StoredAddresses"] objectForKey:@"key_for_your_dict"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-11T20:54:45.663

另一种获取子字典的新方法可以生成一些简洁的代码是以下速记符号：

```
NSString *street = dictionaryOfAddresses[@"HomeAddress"][@"Street"]; 
```******

# git - 为什么 Git 无法使用 Jenkins（错误的配置文件）连接到本地存储库？

> ID：12490981
> 
> 赞同：1
> 
> 时间：2012-09-19T08:27:16.437
> 
> 标签：git, jenkins

当我在 Jenkins 下的 Git 中提供本地存储库路径时，我收到错误消息：

```
Failed to connect to repository : 
Command "C:\Program Files\Git\bin\git.exe ls-remote -h E:/New folder (2) HEAD" returned status code 128:
stdout: 
stderr: fatal: bad config file line 1 in C:/\Users\usr1/.gitconfig 
```

如何解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:55:19.310

您需要确定`%HOME%`（默认情况下未定义）指的是什么（在启动 Jenkins 之前）：

`C:/\Users\usr1`可能不是可访问的路径，而`C:\Users\usr1`可能。

正如这篇[博文中提到的](http://dustint.com/post/299/hudson-jenkins-and-git-http-authentication)：

> 创建一个新的 Execute Shell 构建步骤。执行命令：

```
echo $HOME 
```

> 运行构建并检查输出以查看其`$HOME`位置

# android - Android 2.2+ Mediaplayer 准备缓慢 - 使用以前的版本？

> ID：12490982
> 
> 赞同：1
> 
> 时间：2012-09-19T08:27:27.693
> 
> 标签：android

我即将实现一个消耗直播电台资源的应用程序。我已经在各种平台上测试了[相同的 url](http://radio-shtorm.ru:8000/56)，并注意到从 2.2 到 4.0 的版本需要更多时间来准备，而低于这些版本的版本几乎可以立即播放（没有测试过 3.0 版本）。[我想这与此处](https://stackoverflow.com/questions/4413300/change-buffer-size-on-mediaplayer)和[此处](https://stackoverflow.com/questions/6582908/why-does-it-take-so-long-for-androids-mediaplayer-to-prepare-some-live-streams)提到的实时流的缓冲区大小评估有关。

我可以做些什么来为所有 android 设备提供相同的 pre 2.2 即时准备？谢谢。

PS Android 4.0 准备与 2.1 版本一样好 - 立即。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T11:43:55.613

媒体播放器准备取决于比特率。详情如下。

1.  MPR 新闻流：27 秒，64 kbps
2.  MPR古典音乐流：15秒，128 kbps
3.  MPR 当前流：7 秒，128 kbps
4.  PRI 流：52 秒，32 kbps

# android - android片段方向更改

> ID：12490986
> 
> 赞同：4
> 
> 时间：2012-09-19T08:27:44.203
> 
> 标签：android, android-fragments, android-orientation, android-dialogfragment

**编辑：**

更改设备方向后，我有一个`DialogFragment`父项内部的引用`Activity`为 NULL 的位置。我该如何解决？

片段创建：

```
MyFragment myFragment = MyFragment.newInstance(title);
myFragment.show(getFragmentManager(), tag); 
```

方向改变后：

```
MyFragment myFragment = (MyFragment)getFragmentManager().findFragmentByTag(tag);
myFragment.dismiss();  //NULL pointer exception here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T20:55:27.450

`myFragment.setRetainInstance(true);`为救援。

* * *

**编辑：**

`onDestroyView`在你的 DialogFragment 中也覆盖：

```
@Override
public void onDestroyView() {
  if (getDialog() != null && getRetainInstance())
    getDialog().setOnDismissListener(null);
  super.onDestroyView();
} 
```

这是以下问题的结果：[http ://code.google.com/p/android/issues/detail?id=17423](http://code.google.com/p/android/issues/detail?id=17423)

# wpf - 使用 MVVM 和 WPF 创建导航的最佳架构

> ID：12490991
> 
> 赞同：1
> 
> 时间：2012-09-19T08:28:13.043
> 
> 标签：wpf, mvvm, navigation

我是 WPF 和 MVVM 的初学者。我创建了具有包含框架的 mainMindow 的新导航项目。我还创建了 3 个页面，我希望通过将 mainWindows 中的命令绑定到我的 ViewModel 来实现页面之间的导航并通过框架显示它们。

我的问题是：最好做什么：

将每个页面设为单例或在我的视图模型中创建页面实例？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:33:01.350

我建议看看[Prism](http://compositewpf.codeplex.com/)。除其他功能外，它还提供了可以在项目中使用的导航基础设施。

# mysql - 使用双字节执行 MySQL 更新会使字段不正确的字符串

> ID：12490994
> 
> 赞同：0
> 
> 时间：2012-09-19T08:28:33.240
> 
> 标签：mysql, asp-classic, phpmyadmin, adodb, double-byte

MySQL 设置为 UTF-8( `utf8_general_ci`: MySQL, Table, Column)。我可以通过和（旧版 VB 脚本）**选择**varchar 值作为原始双字节字符。这些字符是从 phpMyAdmin 插入的。`ADODB``ASP`

ASP 页面保存为`encoding Shift_JIS`，ADODB 连接参数表示为 dsn=...;APP=ASP Script;`STMT=SET CHARACTER SET SJIS;`

但是当我从 ASP**更新**字段时，更新的 varchar 字符串**没有**（省略）双字节字符，但在 phpMyAdmin 中有单字节字符。

如何解决这些更新/插入问题？我试图将 MySQL 字符集更改为 sjis，但它不能解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:10:24.907

我可以解决这个问题。路由原因在 SQL 中。

> UPDATE users SET name = **N** 'aaaa' WHERE id = N'BBB';

这个 'N' 使字符被破坏。我正在使用带有 MS-SQL Server 英文版的 ASP 程序，必须附加这个“N”。从 MS-SQL 迁移到 MySQL 时，我必须删除所有这些“N”！

# sql - 在 ms sql 中减去/更改“零”数：1001 到 101

> ID：12490997
> 
> 赞同：0
> 
> 时间：2012-09-19T08:28:51.583
> 
> 标签：sql, sql-server

我遇到了一个小问题：我需要从 ms sql 中的一个数字中更改/减去“0”，一个小例子：

我得到了 1000008448 它必须是： 100008448 在整张桌子上......

任何人都有一个好主意怎么做？（我不擅长 MS SQL :( ）

编辑：更多示例：

100323 将是 10323 10233 将是 1233 10000 将是 1000...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T08:36:58.200

以下可能会执行您想要的操作（它将最高有效数字“替换”`x0`为`x`）：

```
UPDATE table SET col=col
    -power(10, floor(log10(col)))*floor(col/power(10, floor(log10(col))))
    +power(10, floor(log10(col))-1)*floor(col/power(10, floor(log10(col)))) 
```

见[sqlFiddle :)](http://sqlfiddle.com/#!3/279c5/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:34:08.757

它是一个数字字段吗？你所有的数字都是1000000000个数字吗？

如果是这样的话，

```
UPDATE table 
SET mycol = mycol - 900000000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:05:44.000

```
update yourtable set
      yourcolumn=
        cast(stuff(cast(yourcolumn as varchar),
                    CHARINDEX('0',cast(yourcolumn as varchar)),1,'')
             as int)
      where CHARINDEX('0',cast(yourcolumn as varchar))>0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T09:19:09.240

这适用于您迄今为止发布的所有示例。它是作为字符串操作进行的，我通常建议最好留给比 SQL Server 更好的工具：

```
declare @T table (Frm int not null,Too int not null)
insert into @T (Frm,Too) values
(1001, 101),
(1000008448, 100008448),
(100323, 10323),
(10233, 1233),
(10000, 1000)

select
    CONVERT(int,SUBSTRING(Frm,1,1) + SUBSTRING(Frm,3,20)) Frm,Too
from
    (select CONVERT(varchar(20),Frm) Frm,Too from @T) t 
```

结果：

```
Frm         Too
----------- -----------
101         101
100008448   100008448
10323       10323
1233        1233
1000        1000 
```

但毫无疑问，在您的实际数据中存在更多不适用的情况。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-19T08:30:42.597

根据您对问题的最初表述，您需要以下 SQL 语句

```
update <table>
set <field> = 100008448
where <field> = 1000008448; 
```

当然，您将替换为您的表名和字段名。

很可能是您没有正确表述问题，因为以上是针对特定问题而不是一般问题的答案。