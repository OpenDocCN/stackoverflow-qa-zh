# StackOverflow 问答 12493000-12493999

# android - 如何设置请求超时异常

> ID：12493001
> 
> 赞同：-1
> 
> 时间：2012-09-19T10:36:17.747
> 
> 标签：android

这是我下面的代码，它从服务器获取 xml 响应我如何在这段代码中设置请求超时计时器？如果服务器没有响应我的应用程序返回异常我是否在下面的代码中设置计时器所以如果服务器在 15 秒异常调用中没有响应

```
public static   String[][] AgAppXMLParser( String parUrl) {

    String _node,_element;
    String[][] xmlRespone = null;
    try {

            String url = www.xyz.com;
            URL finalUrl = new URL(url);    

            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(new InputSource(finalUrl.openStream()));
            doc.getDocumentElement().normalize();

            NodeList list=doc.getElementsByTagName("*");
            _node=new String();
            _element = new String();
            xmlRespone = new String[list.getLength()][2];

            //this "for" loop is used to parse through the
            //XML document and extract all elements and their
            //value, so they can be displayed on the device

            for (int i=0;i<list.getLength();i++)
                {
                    Node value=list.item(i).      getChildNodes().item(0);
                    _node=list.item(i).getNodeName();
                    _element=value.getNodeValue();
                    xmlRespone[i][0] = _node;
                    xmlRespone[i][1] = _element;

                }//end for

        }//end try

    catch (Exception e)
    {
      flag=false;
      Log.e(LOG_TAG, "CONNECTION ERROR   SERVER NOT RESPONDING", e);
    } 

    return xmlRespone;         

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:04:34.107

为此，您需要实现**Timer** ...请参阅下面的参考链接...

[如何在android中设置计时器](https://stackoverflow.com/questions/1877417/how-to-set-a-timer-in-android)

[Android：如何使用计时器](https://stackoverflow.com/questions/3486162/android-how-to-use-a-timer)

[Android中的计时器](http://custardbelly.com/blog/2010/10/01/timers-in-android/)

希望对你有帮助...

# c# - 拉伸图像的宽度和高度

> ID：12493004
> 
> 赞同：2
> 
> 时间：2012-09-19T10:36:42.473
> 
> 标签：c#, windows-8, microsoft-metro

如果它被**Stretched** by ，我可以得到`Height`and吗？`Width``Image`**`UniformToFill`**

 **我试过`Width`和`Height`属性，但它们总是`NaN`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:07:58.430

如果您想知道图像控件的尺寸，可以这样：

```
double theHeight = this.ActualHeight - img.Margin.Top - img.Margin.Bottom;
double theWidth = this.ActualWidth - img.Margin.Left - img.Margin.Right; 
```

（`img`是上面代码中的图像控件名称，下面的代码中）

* * *

如果你想知道图像的实际大小（在拉伸之前），你可以试试这个：

```
BitmapSource SourceData = (BitmapSource)img.Source;
double imgWidth = SourceData.PixelWidth;
double imgHeight = SourceData.PixelHeight; 
```

*（我在[这里](http://www.vistax64.com/avalon/55688-wpf-image-source-real-size.html#post269573)找到了这个）*

* * *

此外，这将为您提供调整大小后（但在统一之前）的图像尺寸：

```
double actWidth = img.ActualWidth;
double actHeight = img.ActualHeight; 
```

因此，其中一个变量（`actWidth`或`actHeight`）必须等于图像控制维度，而另一个变量将高于它。

* * *

请注意，如果您在事件中调用它们，则第二个和第三个代码不起作用`Window_Loaded`，因为此时没有加载图像。您应该在加载完所有内容后使用它。**

# jquery - 使用 jQuery 显示/隐藏内容时奇怪的 div 选择

> ID：12493008
> 
> 赞同：0
> 
> 时间：2012-09-19T10:36:53.853
> 
> 标签：jquery, html, css

有一个小按钮，单击时会显示一些额外的内容。当我快速单击或多次单击时，显示的内容被标记为已选中：

![在此处输入图像描述](../Images/7afce2dcabc5552a5caf1ca9f5a7ff85.png)

当 jquery show effect 的动画完成时，此选择消失。黑色箭头指向按钮。

知道为什么会有这种选择以及如何避免它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:43:44.403

当您快速单击时，您可能会稍微移动鼠标，这会使您选择项目。尝试使用

```
document.selection.empty(); 
```

和（不适用于所有浏览器）

```
window.getSelection().removeAllRanges(); 
```

清除选择。

来源：[清除 Firefox 中的选择](https://stackoverflow.com/questions/6186844/clear-a-selection-in-firefox/6187098#6187098)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:45:19.233

您还可以[将突出显示颜色设置](http://css-tricks.com/overriding-the-default-text-selection-color-with-css/)为与容器的背景相同，然后如果它确实被选中，您实际上不会注意到..？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T18:57:13.680

您还可以使用 CSS 使按钮不可选，这将禁用浏览器的文本选择。我不确定您的按钮 css 样式到底是什么样的，但这样的东西应该可以工作：

```
button {
    ...
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

# java - 正则表达式阻止某些特殊字符

> ID：12493011
> 
> 赞同：0
> 
> 时间：2012-09-19T10:37:16.447
> 
> 标签：java, regex

我目前坚持完成以下正则表达式。

我的正则表达式

```
^[a-zA-Z0-9.][a-zA-Z0-9.+:_-]+[a-zA-Z0-9.]$ 
```

并且匹配结构是 `Sample:Te.st4:Test.Sample` 每个名称都用分隔`:` 但我想允许每个名称具有除以下字符之外的任何特殊字符。

```
> # * 
```

我不知道如何写那个正则表达式。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T10:55:44.333

正则表达式`"^[^>#*]+$"`将匹配除包含`>`,`#`或的内容之外的任何输入`*`。

从您现有的正则表达式来看，您似乎不想允许`:`成为第一个或最后一个字符，在这种情况下，您想要的正则表达式是这样的：

`"^[^:>#*]+|([^:>#*][^>#*]+[^:>#*])$"`

# wordpress - Wordpress 恶意软件脚本注入 asaunirg.com.br facesta.com.br 0day.php

> ID：12493016
> 
> 赞同：2
> 
> 时间：2012-09-19T10:37:42.183
> 
> 标签：wordpress, iframe, applet, malware

修改了我的模板的 index.php 以在标记之前添加这两行代码（出于安全原因，我删除了脚本的某些部分）。

```
<script type="text/javascript" src="http://asaunirg.com.br/******"></script>
<script type="text/javascript" src="http://asaunirg.com.br/******"></script> 
```

他们打开两个 iframe、一个 java 小程序并向 . 它与 asaunirg.com.br 一起尝试连接到另一个名为 facesta.com.br 的站点。

我解决了它删除模板文件夹中 index.php 文件中的前两行（上面显示的恶意脚本）的问题。有谁知道如何将这个恶意代码注入我的网站？

# css - HTML/CSS：浮动 div 高度和底部垂直对齐

> ID：12493017
> 
> 赞同：1
> 
> 时间：2012-09-19T10:37:41.993
> 
> 标签：css, html, css-float

我无法使用`<div>`和 CSS制作下面 jsFiddle 链接中描述的 HTML 布局`float`。使用`table`标签我可以解决这个问题，但我需要 DIV+CSS 解决方案。这是可能的？任何人都可以帮忙吗？

**HTML：**

```
<div class="container">

<div class="column">

Some content!<br/>
Some content!<br/>
Some content!<br/>
Some content!<br/>
Some content!<br/>

</div>

 <div>

Something on top

</div>

    <div id="bottom-content" style="background-color: #FA0">

Something with vertical align = bottom AND height == height of left column

</div>

</div> 
```

**CSS：**

```
.container {
    overflow: hidden;
}
.column {
    float: left;
    background-color: grey;
    padding-bottom: 1000px;
    margin-bottom: -1000px;
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/tKnw9/8/)**

解决方案：

**HTML：**

```
<div class="container">

<div class="column">

Some content!<br/>
Some content!<br/>
Some content!<br/>
Some content!<br/>
Some content!<br/>

</div>

 <div style="float:left; height:82px">

Something on top

</div> 

    <div id="bottom-content" style="background-color: #FA0; float:left;">

Something with vertical align = bottom AND height == height of left column

</div>

</div> 
```

**CSS：**

```
.container {
    overflow: hidden;
}
.column {
    float: left;
    background-color: grey;
    padding-bottom: 1000px;
    margin-bottom: -1000px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:30:20.583

我猜可以使用以下代码来实现布局（即[https://dl.dropbox.com/u/2325784/example_layout.png ）：](https://dl.dropbox.com/u/2325784/example_layout.png)

```
.container {
    width:900px;
    overflow: hidden;
}
.picture{
    float:left;
    width:220px;
}
.column {
    width:320px;
    float: left;
    background-color: grey;
} 
```

＆HTML是：

```
<div class="container">
    <div class="picture">Picture</div>
    <div class="column">
        <table>
            <tr>
                <td>Genere</td>
                <td>Arcade</td>
            </tr>
            <tr>
                <td>Developer</td>
                <td>Micheal A. Denio</td>
            </tr>
            <tr>
                <td>Publisher</td>
                <td>Micheal A. Denio</td>
            </tr>
            <tr>
                <td>Released</td>
                <td>1988</td>
            </tr>
            <tr>
                <td>Platform</td>
                <td>DOS</td>
            </tr>
            <tr>
                <td>Rating 1</td>
                <td>Rating Picture will goes here</td>
            </tr>
            <tr>
                <td>Rating 2</td>
                <td>Rating2 Pic will goes here</td>
            </tr>
        </table>
    </div>
</div> 
```

如果您不想使用表格，您可以通过`ul`&`li`组合来实现。

干杯!

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-19T10:41:21.167

当我得到你的问题时。你需要在你的 div 上给出浮动

jsfiddle.net/tKnw9/12

检查小提琴

# apache - 更改 .htaccess 中的 URL

> ID：12493019
> 
> 赞同：0
> 
> 时间：2012-09-19T10:37:52.253
> 
> 标签：apache, .htaccess

我会尽力解释这一点；我有两个域名：`www.original.com`和`www.mysite.com/`. 网站内`www.original.com`没有内容，所有内容都托管在`www.mysite.com/original/`. 现在，当我访问时，`www.original.com`我设置了这样的重定向：

```
redirectMatch 307 ^(.*)$ http://www.mysite.com/original 
```

但是，我意识到这不是我需要的，因为我希望网站的访问者在地址栏上`www.original.com`看到，而不是. 有没有办法在.htaccess 中做到这一点？我曾经通过插件域在旧主机帐户的 cPanel 中执行此操作，但我现在拥有的主机 (united-domains.de) 显然不提供插件域。`www.original.com``http://www.mysite.com/original`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:52:41.250

您必须告诉 www.original.com 充当代理服务器。但这可能需要您不仅仅是编辑 htaccess。

有关更多信息，请参阅此：[http ://httpd.apache.org/docs/2.2/mod/mod_proxy.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:30:18.240

由于这两个站点是分开的，因此您需要依赖 mod_proxy。有多种方法可以创建从`www.original.com`域到`www.mysite.com`域的反向代理。最简单的方法是使用`ProxyPass`and `ProxyPassReverse`：

```
ProxyPass / http://www.mysite.com/original
ProxyPassReverse / http://www.mysite.com/original 
```

但这些仅适用于服务器或虚拟主机配置。如果您无权访问它，则必须使用 mod_rewrite 的`[P]`标志，它将 a 的目标替换`RewriteRule`交给 mod_proxy，您可以在 htaccess 文件中使用它：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?original\.com$ [NC]
RewriteRule ^(.*)$ http://www.mysite.com/original/$1 [L,P] 
```

# php - Travis-CI 在 PHP 开发中实际上做了什么？

> ID：12493020
> 
> 赞同：12
> 
> 时间：2012-09-19T10:38:06.143
> 
> 标签：php, travis-ci

我是开源项目的新手。我浏览的一些项目使用 Travis。我已经阅读了手册，但仍然无法了解 Travis CI 的实际用途。

谁能解释一下或提供一些链接？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-19T10:43:01.837

TravisCI（正如 CI）所暗示的，是一个“持续集成”环境。每当您提交代码更改时，它都可以执行单元测试和其他工具，例如代码嗅探器、混乱检测、复制粘贴检测、文档构建器等。

更有用的是，它可以针对不同版本的 PHP 运行测试。

然后它可以报告这些测试和工具运行的结果，因此您始终知道您的更改是否稳定，或者是否破坏了代码的其他部分等。

# delphi - 为什么 Str() 给出“W1057 Implicit string cast from 'ShortString' to 'string'”？

> ID：12493021
> 
> 赞同：2
> 
> 时间：2012-09-19T10:38:14.663
> 
> 标签：delphi, unicode, delphi-xe2

考虑：

```
function x_StrZero(N: Double; W: Integer; D: Integer = 0): String;
var S : String;
begin
  Str(N:W:D,S);   
  S := Trim(S); 
```

这使 W1057 隐式字符串从“ShortString”转换为“字符串”

[在线文档](http://docwiki.embarcadero.com/Libraries/en/System.Str)说：

```
procedure Str(const X [: Width [:Decimals]]; var S: String); 
```

但是也

> 注意：但是，在使用此过程时，编译器可能会发出警告：W1057 Implicit string cast from '%s' to '%s' (Delphi)。

为什么会这样？

我想防止这种丑陋的解决方法：

```
function x_StrZero(N: Double; W: Integer; D: Integer = 0): String;
var
  S : String;
  SS : ShortString;
begin
  Str(N:W:D,SS);
  S := Trim(String(SS)); 
```

我已阅读[为什么 Delphi 在将 ShortString 分配给字符串时会发出警告？](https://stackoverflow.com/questions/2121265/why-does-delphi-warn-when-assigning-shortstring-to-string)但这并不能回答这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T11:02:43.023

```
Str(N:W:D,S); 
```

编译为

```
S := System._Str2Ext(N, W, D); 
```

where`System._Str2Ext`是返回类型为 的函数`ShortString`。它`string`在作业中转换为`S`。该警告虽然不易阅读，但它是正确的，但此时存在隐式转换。因此，要么通过避免重新编写代码以使其没有隐式转换`Str`，要么关闭警告，或者忽略警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:46:41.823

您可以关闭该特定警告。这只是一个提醒，大多数情况下您的程序运行良好。我猜编译器仍然会`String`在`ShortString`内置的函数中看到`Str()`和`Writeln()`.

# macvim - 在 MacVim 中打开新选项卡时不执行 .vimrc

> ID：12493023
> 
> 赞同：5
> 
> 时间：2012-09-19T10:38:16.690
> 
> 标签：macvim, janus

我已经安装了 MacVim 和 Janus。

我最近添加`set rnu`到我的 .vimrc.after 以启用相对行编号，并发现在打开新窗口时我只有 rnu 工作。我的意思是，当我在现有窗口中打开一个新选项卡时，我会得到正常的顺序编号。

我想知道如何为我的所有 MacVim 窗口和选项卡启用 rnu。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T15:08:33.250

遇到同样的问题。原因是为某些文件类型设置了绝对行号。希望 janus 开发人员可以对此做点什么：我刚刚在 github 存储库上为此打开了一个问题：[https ://github.com/carlhuda/janus/issues/472](https://github.com/carlhuda/janus/issues/472)

**更新**：

将此添加到您的`~/.vimrc.after`文件中：

> 设置编号
> 
> 设置相对数

相对行号应与这些设置保持一致。

# git - github - 可能有一个只订阅部分目标项目的子项目？

> ID：12493031
> 
> 赞同：2
> 
> 时间：2012-09-19T10:38:47.557
> 
> 标签：git, github, subproject

我想建立一个 git 子项目，它只从目标项目中提取一个文件——我只想从目标项目中提取构建的 JavaScript 库，而不是整个项目。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:36:03.633

简短的回答：没有。

长答案：不，但它可能有助于执行浅克隆（仅获取最后 N 次提交）。看`git clone --depth MAXDEPTH`。

# android - 是否可以从其他应用程序中卸载一个 android 应用程序？

> ID：12493032
> 
> 赞同：4
> 
> 时间：2012-09-19T10:38:47.453
> 
> 标签：android, android-intent

假设有两个不同的 Android 应用程序：A 和 B。

应用 A 是系统管理员。有什么方法可以卸载应用程序 B 或使其无法运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T10:42:52.033

是的，有可能，你需要使用`Intent.ACTION_DELETE` 看看下面的代码，

```
Uri packageUri = Uri.parse("package:com.mypackgage");  
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE,packageUri);  
startActivity(uninstallIntent); 
```

当您运行上述代码时，它会要求卸载应用程序，如下所示，图片

> ![在此处输入图像描述](../Images/e4e6e5c3416c4bed32f0357f8d28bfb0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:51:46.990

试试下面的代码卸载apk ...

```
Uri packageURI = Uri.parse("package:com.example.uninstall"); // replace with your package name
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE, packageURI);
uninstallIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(uninstallIntent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:44:59.967

通过使用下面的代码片段，您可以卸载 ANDROID 手机上已安装的应用程序。它将您重定向到卸载确认...

> 创建一个以动作和数据为包名的意图对象，并以 ACTION_DELETE 开头。

```
Intent intent = new Intent(Intent.ACTION_DELETE);
intent.setData(Uri.parse("package:com.pack.Applicationname"));
startActivity(intent); 
```

# c# - 转换为 ValueType 时的 C# 装箱

> ID：12493035
> 
> 赞同：6
> 
> 时间：2012-09-19T10:39:09.377
> 
> 标签：c#

我正在阅读有关[ValueType 类](http://msdn.microsoft.com/en-us/library/system.valuetype%28v=vs.100%29.aspx)的信息，我想知道当某些东西被强制转换为 ValueType 时，它​​是否会被装箱？例子：

```
void DoSomething(ValueType valueType)
{
}

DoSomething(5); 
```

当 DoSomething 方法接收到时，`int`由文字表示的是否被装箱？`5`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:44:37.913

是的，它被装箱了。

想一想……对于不被装箱的值，应该有一些可以是任何值类型的通用二进制表示 - 包括所有内置的和您将来可能定义的任何结构。

由于不存在这样的二进制表示，因此必须将值装箱。

解释：

当您使用参数调用方法时，调用者将位序列放置在约定的位置和约定的格式中，例如，int 是 32 位，负数编码为 1-补码，double 是 64 位，以 IEEE 浮点编码格式等

除了 unboxed int 和 double 之外，您没有一种方法可以使用，因为它不知道要读取多少位以及如何解码它们ץ

如果您确实希望方法同时接受两者，您可以为函数提供值的内存位置（该位置本身具有已知的大小和格式，因此该方法知道如何对其进行解码）和一些元数据，因此该方法知道实际类型价值的 - 用元数据包装价值并提供它的内存位置称为（惊喜，惊喜）“装箱”

因此，只要您使用参数/变量/任何不是确切类型的值传递值，系统必须将值装箱，否则接收器将不知道该值实际使用多少内存以及如何从序列中解码该内存位回到数字或结构。

这仅适用于值类型，因为引用类型总是使用内存位置传递（内存位置在 .net 中称为“引用”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T10:44:22.543

是的，它`ValueType`是一个类（因此是一个引用类型，因此会产生装箱）。

这个问题涵盖了类似的基础：

[为什么 Enum 的 HasFlag 方法需要装箱？](https://stackoverflow.com/questions/11665279/why-enums-hasflag-method-need-boxing/11665458#11665458)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:44:18.523

根据 Marc Gravell 在您链接到的[MSDN 文章中的评论。](http://msdn.microsoft.com/en-us/library/system.valuetype%28v=vs.100%29.aspx)

> 需要强调的是，虽然 ValueType 可用于将值*限制* 为值类型，但强制转换为 ValueType（隐式或显式）仍然是一种装箱操作；只有具体的已知值类型（“DateTime”、“int”等）可以直接作为值类型处理 - ValueType 本身被视为一个类（所以装箱）。

# android - Android - RealViewSwitcher 完全模式

> ID：12493044
> 
> 赞同：3
> 
> 时间：2012-09-19T10:39:44.213
> 
> 标签：android, android-relativelayout, viewswitcher

我`RealViewSwitcher`在我的 Android 应用程序中使用该组件。它在 a 内`RelativeLayout`，我将其设置`height`为`200dp`。但是每次我尝试运行该应用程序时都会发生此错误：

```
ViewSwitcher can only be used in EXACTLY mode. 
```

我该如何解决这个烦人的问题？谢谢你们

# php - 对象名称上的特殊符号不允许我在 php 中浏览对象/数组

> ID：12493047
> 
> 赞同：1
> 
> 时间：2012-09-19T10:40:00.107
> 
> 标签：php, arrays, object, object-properties

现在，我使用drupal 来制作网站。我正在修改 drupals 用户模块，因为我需要为个人资料页面制作自定义布局。

不幸的是，我在通过阵列访问时遇到了问题。

配置文件的所有数据都在一个数组中（$user_profile）

阵列只是巨大的。我试图通过对象导航。

虽然我在导航方面做得很好（感谢 print_r 功能），但我现在面临一个问题。

有一个名为 entityInfo:protected 的对象。在这个对象内部有更多的对象（例如，我试图访问这个对象内部的对象，称为标签。

问题是，如果我尝试这样做：

```
echo $user_profile['profile_medico']['view']['profile2']['2']['field_tags']['#object']->{'entityInfo:protected'}->label 
```

我收到下一条消息

**注意：未定义的属性：Profile::$entityInfo:protected in include()（D:\xampp\htdocs\specialdr\modules\user\user-profile.tpl.php 的第 55 行）。注意：试图在 include() 中获取非对象的属性（D:\xampp\htdocs\specialdr\modules\user\user-profile.tpl.php 的第 55 行）。**

我不知道我怎样才能正确地写这个，所以我可以访问这个对象并继续通过数组和对象......因为我还有很长的路要走，直到我到达我需要访问的对象。

顺便说一句...如果您想查看数组... [http://fancomix.net/bigarray.txt](http://fancomix.net/bigarray.txt)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:43:13.183

很简单`->entityInfo`，`:protected`不需要，它是访问修饰符或可见性修饰符。它仅显示在 中`var_dump()`以提供有关该属性的信息。在 PHP 中，可以将对象属性（以及方法）声明为 public、protected 或 private。您可以在手册中阅读有关[可见性的](http://php.net/manual/en/language.oop5.visibility.php)更多信息。

`protected`意味着只能从对象方法访问该属性 - 没有外部访问，因此您将无法获取该属性。不过，`Profile`该类可以有一个 getter 方法 - 您应该检查该类的定义以找到它，或者如果可以的话进行必要的更改，例如将其更改为`public`或编写一个 getter 方法。

# python - Python - 如何在 X 秒后终止进程并继续执行 python 代码？

> ID：12493049
> 
> 赞同：0
> 
> 时间：2012-09-19T10:40:01.917
> 
> 标签：python, os.system

> **可能重复：**
> [具有超时的子](https://stackoverflow.com/questions/1191374/subprocess-with-timeout)
> [进程启动进程并阻塞直到完成的最佳方法](https://stackoverflow.com/questions/7027809/best-way-to-launch-a-process-and-block-until-it-is-finished)

我有一个 python 代码，我需要在其中运行像“curl --user ....”这样的 Linux 命令。我需要运行这个命令 3600 秒。3600 秒后，我需要终止“Linux 命令进程”。我怎么可能做到这一点？

```
def timeout_command(command, timeout):
    import os, datetime, time, signal
    start = datetime.datetime.now()
    time_pass = 0
    while (time_pass < timeout):
        process = os.system(command)
        now = datetime.datetime.now()
        time_pass = (now-start).seconds
        print time_pass

print timeout_command("curl --user...", 3600)
print "Other2"
print "Other3" 
```

关于如何杀死它的任何线索：“process = os.system(command)”？

此致，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:20:20.753

子流程是优雅的方式。如果您正在使用多处理（您可以每 3600 秒启动一个子进程），请使用 os.system("kill -9 + multiprocessing.current_process().pid) 在 3600 秒后杀死子进程

# python - 你知道一个用于处理日期的很棒的 Python 库吗？

> ID：12493052
> 
> 赞同：6
> 
> 时间：2012-09-19T10:40:09.570
> 
> 标签：python, date-parsing

我搜索了一个很棒的 Python 库日期，比如[Moment.js](http://momentjs.com/)。你知道一些吗？

我特别想要一个可以进行如下转换的库：*09/25/2012 00:00 - 09/25/2012 13:00*到*09/25/2012 00:00 - 13:00*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-04T15:05:52.097

一些受 Moment.js 启发的 Python 库：

*   [箭](https://arrow.readthedocs.io/en/latest/)
*   [德洛里安](http://delorean.readthedocs.org/en/latest/index.html)
*   [片刻](https://pypi.python.org/pypi/moment/0.0.14)

Arrow 和 Delorean 似乎更成熟一些，尽管我并没有真正广泛地使用它们中的任何一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:42:41.150

[datetime](http://docs.python.org/library/datetime.html)，它带有标准库。这是 Doug Hellman 对“本周模块”的介绍[。](http://www.doughellmann.com/PyMOTW/datetime/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T10:42:43.547

您可以尝试这些 3rd 方包：

*   [日期工具](http://labix.org/python-dateutil)
*   [mxDatetime](http://www.egenix.com/products/python/mxBase/mxDateTime/)：它的解析器非常好。不过，请检查许可证是否适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T10:41:25.200

[日期](http://docs.python.org/library/datetime.html#module-datetime)时间是最好的。[在此处](http://pleac.sourceforge.net/pleac_python/datesandtimes.html)查看操作

# android - Jquery Mobile Listview 在 android 2.2.2 中不可滚动

> ID：12493058
> 
> 赞同：1
> 
> 时间：2012-09-19T10:40:30.750
> 
> 标签：android, css, html, cordova, jquery-mobile

我有一个 Jquery Mobile 对话框，如下所示：

```
 <div data-role="dialog" id="styles" data-theme="a">       
        <div data-role="header" class="header">       
            <h1>Styles</h1>         
        </div>
        <!-- /header --> 

        <div data-role="content" data-scroll="true" data-theme="a">   
            <div class="scroll">                         
                <ul data-role="listview" id="mylist">                            
                </ul>                                         
            </div>               
        </div>
        <!-- /content --> 

        <div data-role="footer" class="footermodal">               
            <h1>↕ Please Scroll ↕&lt;/h1>             
        </div>
        <!-- /footer -->    

    </div> 
```

ul 内容需要可滚动。在ios中是这样。在 Android 4+ 中也是。但在 Android 2.2.2 中，内容不会滚动。我试过添加：

```
data-scroll="true" 
```

不工作。除了此时此刻的高度之外，它没有任何风格，当然还有jquery mobile“主题”，但我已经删除了它，它仍然不滚动：

```
 .scroll{
    height:320px;
    overflow: scroll;

    } 
```

我不明白为什么它不在 Android 2.2.2 中滚动。有谁知道这个问题，有解决方案或任何帮助吗？这让我疯狂。：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:52:02.843

看看[http://chris-barr.com/index.php/entry/scrolling_a_overflowauto_element_on_a_touch_screen_device/](http://chris-barr.com/index.php/entry/scrolling_a_overflowauto_element_on_a_touch_screen_device/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:19:41.337

3.0 之前的所有 android 版本都存在溢出漏洞：滚动或自动（[错误信息](http://code.google.com/p/android/issues/detail?id=2911)）。

来自 Chris Barr 的文章和使用 jQuery 的人在这里是一个快速修复：

```
function touchScroll(selector){
      var scrollStartPos = 0;
      $(selector).live('touchstart', function(event) {
        event.preventDefault();
        scrollStartPos = this.scrollTop + event.originalEvent.touches[0].pageY;
      });
      $(selector).live('touchmove', function(event) {
        event.preventDefault();
        this.scrollTop = scrollStartPos - event.originalEvent.touches[0].pageY;
      });
} 
```

然后如果使用 modernizr ：

```
if (Modernizr.touch) {
    touchScroll($('.myScrollableContent'))
} 
```

但这并不理想，因为所有可触摸的设备都会有这个。

或者，如果您使用 Phonegap，您可以执行以下操作（在 phonegap 启动后的某处）：

```
if (window.device && device.platform=="Android" && parseInt(device.version) < 3){
    touchScroll($('.myScrollableContent'))
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T16:43:18.410

这是 android < 3 和 ios < 5 的问题。

简单的开始是将 overthrowjs 和“overthrow”类添加到您的可滚动内容中。

然后您可以查看 iscroll 或其他 polyfilers。

# powershell - Powershell 等待进程

> ID：12493061
> 
> 赞同：1
> 
> 时间：2012-09-19T10:40:44.907
> 
> 标签：powershell, wait

我过去使用过 Wait-Process，它工作正常。这次我试图优雅地关闭视觉工作室（留出时间保存任何未保存的文件），一旦完成，便可以打开记事本。

**(Get-Process devenv).CloseMainWindow() | 等待进程 | 记事本**

不幸的是，虽然 Visual Studio 确实正常关闭，但记事本与保存文件对话框同时弹出。为什么在这种情况下 Wait-Process 不能按规范工作。伴随着一个powershell错误，我目前无法理解。

***Wait-Process ：输入对象不能绑定到命令的任何参数，因为命令不接受管道输入，或者输入及其属性与接受管道输入的任何参数都不匹配。在 line:1 char:54 (Get-Process devenv).CloseMainWindow() | 等待进程 <<<<***

但是我做了很多DoSomethingA | 等待进程 | DoSomethingB 命令有效。我无法在这里弄清楚不同的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:23:38.377

试试这样：

```
Get-Process devenv | % {$_.CloseMainWindow()}; wait-process devenv -ea silentlycontinue ; notepad 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T10:48:07.680

CloseMainWindow 返回一个布尔值，该值通过管道传递给 Wait-Process，但 Wait-Process 需要一个进程对象而不是布尔值。试试这个

```
Get-Process devenv | ForEach-Object {
    $null=$_.CloseMainWindow()
    Wait-Process -Id $_.id
    notepad
} 
```

# asp.net-mvc - 初学者的 Profiling Qn - ASP .NET MVC + Mini-Profiler + Chrome 开发者工具

> ID：12493064
> 
> 赞同：5
> 
> 时间：2012-09-19T10:40:56.957
> 
> 标签：asp.net-mvc, profiling, mvc-mini-profiler

![在此处输入图像描述](../Images/d5c7d94751a0df46565dab3e9837b56b.png)

上面突出显示的两个部分。

* * *

1st - Mini-Profiler 告诉我 Controller/Action 的执行需要多少时间（通过 ajax 调用）

**87毫秒**

* * *

2nd - Chrome Web Inspector 告诉我完成同一个 ajax 请求需要多长时间

**535 毫秒**

* * *

使用一瞥，我发现其他生命周期事件（基本控制器/过滤器）的执行需要大约 22 毫秒。

寻找指导以找出其余时间的去向。

谢谢。

* * *

**编辑**

这几乎是一致的（两个值的差异约为 10 - 20 ms - Mini-Profiler 和 Chrome Inspector）。

这些结果是针对运行 IIS 7.5 的生产服务器 (VPS)**的在线请求。**在开发机器（运行 IIS express 的本地主机）上测量这些数字时，Mini-Profiler 和 Chrome Inspector 结果的差异并不那么显着。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:25:11.923

由于这些请求是针对在线资源的，因此您需要考虑延迟。

例如采取这个：

![图片](../Images/653c75ccce24e832f5a3c286d1804fa5.png)

服务器时间仅为 118 毫秒，但是 dns 查找需要 598 毫秒，连接需要另外 205 毫秒，并且响应仅在我访问页面后返回 +1173 毫秒。最后 DOM 只开始渲染 1.27 秒。

服务器位仅考虑在您的应用程序内的服务器上花费的时间。

您必须对此进行补充。

1.  解析dns所需的时间。
2.  连接所需的时间（如果没有保持连接）

[等待的时间]

1.  发送请求资源的 TCP 数据包所需的时间
2.  Web 服务器/代理前端的开销
3.  服务器时间（亮红色数字）
4.  第一个 TCP 数据包找到返回给您的方式所需的时间。

[/等待的时间]

1.  其余数据包找到返回给您的路需要时间。（阅读有关 TCP 拥塞窗口的信息）
2.  浏览器解析它返回的内容所花费的时间
3.  渲染所需的时间

（还有 JavaScript 和 CSS 的相互依赖关系，我不打算在这里讨论）

# c# - 实际场景中的委托：类范围内 Vs 命名空间范围内

> ID：12493067
> 
> 赞同：1
> 
> 时间：2012-09-19T10:41:03.780
> 
> 标签：c#, delegates, scope

`Delegate`在类范围内声明类型与直接在命名空间范围内声明类型相比有哪些优缺点？我的意思是以下两个-

```
namespace MyNamespace
{
    public delegate string NamespaceScopeDelegate(int x, int y);

    public class ClassX
    {
        //class members
    }
} 
```

和，

```
namespace YourNamespace
{
    public class ClassA
    {
        public delegate string ClassScopeDelegate(int x, int y);

        //...
        //other class members
    }
} 
```

什么样的实际场景会让我使用后一个？我的意思是它到底在哪里合适？

**编辑 ：**

对于第一种情况，每当我需要实例化委托类型时，我可以这样做 -

```
var delegateInstance = new NamespaceScopeDelegate(MethodToPoint); 
```

但对于第二种情况，我必须使用封闭类型名称作为 -

```
var delegateInstance = new ClassA.ClassScopeDelegate(MethodToPoint); 
```

我为什么要这样做？第二种情况是否提供了我还不知道的任何封装？是否有任何特殊情况*需要*这种可访问性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:45:24.303

在您当前的示例中，唯一的区别是第二个不会弄乱您的命名空间，您需要引用它首先声明的类。您可以使用它来明确委托与类有密切的关系，并且主要由它单独使用。

以下也是可能的（内部或私有）：

```
namespace YourNamespace
{
    public class ClassA
    {
        internal/private delegate string ClassScopeDelegate(int x, int y);

        //...
        //other class members
    }
} 
```

通过将其设为内部，只有同一个程序集可以访问它，并且它不会弄乱您的命名空间，通过将其设为私有，只有类本身可以访问委托声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:11:23.627

您需要了解命名空间只是您的类/委托的一个漂亮的命名工具。

以这段代码为例：

```
namespace YourNamespace
{
    public class ClassA
    {
    }
} 
```

它产生一个名为 的类`YourNamespace.ClassA`。没有任何实际的命名空间 - 只是一个带有点名称符号的类。

对于在类中定义的委托也是如此。

重要的是您希望如何组织代码。

就那么简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-19T10:27:49.803

> 什么样的实际场景会让我使用后一个？

对于代表，可能没有。

来自评论中已经提到的[嵌套类型：](https://msdn.microsoft.com/en-us/library/ms229027(v=vs.100).aspx)

> **如果类型可能在声明类型之外被引用，则不要使用嵌套类型。**在常见情况下，不应该要求声明嵌套类型的变量和对象实例化。**例如，处理类上定义的事件的事件处理程序委托不应嵌套在类中。**

# java - 无需递归即可获取结构中的文件数

> ID：12493069
> 
> 赞同：3
> 
> 时间：2012-09-19T10:41:08.220
> 
> 标签：java, file

是否可以在不遍历所有文件的情况下获取文件夹（以及所有子 * 文件夹）中的文件总数，并递归地深入？

我的意思是这确实很容易，但也许有更好的解决方案？

```
private int totalFileCounter = 0;

private void countFiles(File f) {
    if (f.isDirectory()) {
        for (File fi : f.listFiles()) {
            countFiles(fi);
        }
    } else {
        totalFileCounter++;
    }
} 
```

编辑：好吧，也许我的问题没有问得那么好......我的意思是java或文件系统或其他东西有什么功能可以让我获得O（1）中的文件总数？如果所有解决方案现在都有运行时间 O(n)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:45:23.027

通常，最简单的解决方案是最好的。我不会使用字段来计算应该是函数的结果。如果一次从两个线程调用该方法，您可能会得到不正确的结果。

```
static int countFiles(File f) {
    if (f.isDirectory()) {
        int sum = 0;
        for (File fi : f.listFiles()) 
            sum += countFiles(fi);
        return sum;
    }
    return 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:43:43.407

是的，使用 a[`Queue`](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html)进行迭代[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)。这是一个示例（未经测试）：

```
private void countFiles(File f) {
    Queue<File> queue = new LinkedList<File>();
    queue.add(f);
    while (!queue.isEmpty()) {
      File file = queue.poll();
      if (file.isDirectory()) {
        queue.addAll(Arrays.asList(file.listFiles()));
      } else {
        totalFileCounter++;
      }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:50:11.977

这个[Apache Commons API](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#listFiles%28java.io.File,%20java.lang.String%5b%5d,%20boolean%29)可以满足您的目的吗？它返回`Collection<File>`

# xcode4 - 如何自定义 UITableView

> ID：12493071
> 
> 赞同：1
> 
> 时间：2012-09-19T10:41:20.200
> 
> 标签：xcode4, uitableview

实际上我正在尝试在 UITableView 的不同行中实现不同的图像。通过创建一个新的 UITableViewCell 我尝试了很多来实现它但我失败了。我需要在每一行中设置两个图像和一个标签。如何做呢？而且我必须使用导航控制器在下一页中获取图像...请指定我的代码并解释。否则我无法理解。感谢您提供的信息丰富的答案...

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 5;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"Cell";

        sampletable1 *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {

            NSArray* views = [[NSBundle mainBundle] loadNibNamed:@"sampletable1" owner:nil options:nil];
            for (UIView *view in views) {
                if([view isKindOfClass:[UITableViewCell class]])
                {
                    cell = (sampletable1*)view;

                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:40:41.517

这是你需要的。[子类化 UITableViewCell](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW12)。显示的示例中有两个图像。您可以使用相同的技术再添加一个

# python - 装饰器和类方法

> ID：12493074
> 
> 赞同：18
> 
> 时间：2012-09-19T10:41:28.560
> 
> 标签：python, class, methods, decorator, python-decorators

我无法理解为什么会发生以下情况。我有一个装饰器，它除了检查函数是否是方法之外什么都不做。我以为我已经了解 Python 中的方法是什么，但显然，情况并非如此：

```
import inspect

def deco(f):
    def g(*args):
        print inspect.ismethod(f)
        return f(*args)
    return g

class Adder:
    @deco
    def __call__(self, a):
        return a + 1

class Adder2:
    def __call__(self, a):
        return a + 2
Adder2.__call__ = deco(Adder2.__call__) 
```

现在，运行以下命令：

```
>>> a = Adder()
>>> a(1)
False
2
>>> a2 = Adder2()
>>> a2(1)    
True
3 
```

我希望这段代码能打印两次 True。

那么，像在 Adder2 中那样手动装饰函数并不完全等同于通过 @deco 函数进行装饰？

有人可以很高兴并解释为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T10:52:29.190

方法是与类相关联的函数。仅当您从已定义的类中检索方法时才会创建方法；方法是函数的包装器，也包含对类的引用（以及对实例的可选引用）。

第一种情况发生的是：Python 编译你的类定义`Adder`。它找到装饰器定义和一个函数。装饰器被传递给函数，返回一个*新*函数。该函数被添加到类定义中（存储在类中`__dict__`）。一直以来，您都在处理 python 函数，*而不是*方法。那会在以后发生。

然后当您调用`a(1)`时，查找显示实例没有 a`__call__`但`Adder`类有，因此使用 检索它[`__getattribute__()`](http://docs.python.org/reference/datamodel.html#object.__getattribute__)。这会找到一个*函数*（你的`deco`装饰器），它是一个[描述符](http://docs.python.org/reference/datamodel.html#implementing-descriptors)，因此它的[`__get__()`](http://docs.python.org/reference/datamodel.html#object.__get__)方法被调用（所以`Adder.__call__.__get__(a, Adder))`，返回一个*绑定的方法*，然后调用它并传入`1`值。该方法是绑定的，因为在调用`instance`时不是 None `__get__()`。你的装饰器，它在类构建时包装了一个函数，`False`因为它被传递了一个未包装的函数来开始打印。

然而，在第二种情况下，您检索一个方法（再次通过`__getattribute__()`调用`__get__()`未修饰的`Adder2.__call__`函数），这次是未绑定的（因为没有实例，只有一个传递给的类`__get__()`（完整调用是`Adder2.__call__.__get__(None, Adder2)`），然后您*装饰*该方法。现在`ismethod()`打印 True。

请注意，在 Python 3 中，后一种情况发生了变化。在 Python 3 中不再有未绑定方法的概念，只有函数和绑定方法。因此，“绑定”一词被完全删除。在这种情况下，您的第二种情况也将打印`False`为`Adder2.__call__.__get__(None, Adder2)`返回函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T10:51:23.860

在类定义中，`__call__`是一个函数，而不是一个方法。通过属性查找（例如使用点语法）访问函数的行为，例如 with `Adder2.__call__`，返回一个未绑定的方法。并`a2.__call__`返回一个绑定方法（`self`绑定到`a2`）。

请注意，在 Python3 中， 的概念`unbound method`已被删除。那里，`Adder2.__call__`还有一个功能。

# android - 将一个布局与另一个布局的顶部对齐以制作状态栏

> ID：12493076
> 
> 赞同：0
> 
> 时间：2012-09-19T10:41:41.200
> 
> 标签：android

我有这样的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/parent"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#e4e8ed"
android:gravity="top" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/app"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="0px"
    android:orientation="vertical"
    android:padding="0px" >

    <include
        android:id="@+id/tabBar"
        layout="@layout/tab" />

    <Button
        android:id="@+id/nist"
        android:layout_width="match_parent"
        android:layout_height="67dp"
        android:layout_gravity="center_horizontal"
        android:layout_marginBottom="3dp"
        android:layout_marginLeft="3dp"
        android:layout_marginRight="3dp"
        android:layout_marginTop="3dp"
        android:background="@drawable/ready"
        android:textColor="#FFFFFF" />

    <ListView
        android:id="@+id/lastCases"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="2.08"
        android:longClickable="true" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="7dp"
    android:layout_below="@id/app"
    android:background="@drawable/dropshadow_custom" >

    <TextView
        android:id="@+id/error"
        style="@style/AudioFileInfoOverlayText"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginTop="120dp"
        android:gravity="center"
        android:text="No Cases"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#D6D8D9"
        android:textSize="40dp" />
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/app"
    android:background="#000000"
    android:gravity="bottom"
    android:orientation="vertical" >
</LinearLayout>

</RelativeLayout> 
```

我尝试使用此标签将最后一个对齐到`LinearLayout`包含 的布局顶部：但它似乎不起作用。怎么能做到这一点？`ListView``android:layout_alignTop="@+id/app"`

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:28:09.260

没有任何内容的布局没有显示，因为它的宽度`layout_width="wrap_content"`和`layout_height="wrap_content"`高度的值为 0！即使您设置了一些背景颜色，也不会出现任何内容！您要么必须向布局添加一些内容，要么必须定义另一个布局维度。你的布局的位置`android:layout_alignTop="@+id/app"`应该是正确的。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:30:05.890

您可以将第一个布局定位上的“layout_below”设置为最后一个布局。

代码是，我在顶部布局中放置了一个按钮作为示例（Obs：在您的列表视图中，您应该在 layout_weight 中使用 0dp，因为您已经使用了 layout_weight ^^）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/parent"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:background="#e4e8ed"
     android:gravity="top" >

     <LinearLayout
          android:id="@+id/app"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:layout_margin="0px"
          android:orientation="vertical"
          android:layout_below="@+id/top"
          android:padding="0px" >

     <Button
          android:id="@+id/nist"
          android:layout_width="match_parent"
          android:layout_height="67dp"
          android:layout_gravity="center_horizontal"
          android:layout_marginBottom="3dp"
          android:layout_marginLeft="3dp"
          android:layout_marginRight="3dp"
          android:layout_marginTop="3dp"
          android:textColor="#FFFFFF" />

     <ListView
          android:id="@+id/lastCases"
          android:layout_width="match_parent"
          android:layout_height="0dp"
          android:layout_weight="2.08"
          android:longClickable="true" />
</LinearLayout>

<LinearLayout
     android:layout_width="fill_parent"
     android:layout_height="7dp"
     android:layout_below="@+id/app" >

     <TextView
          android:id="@+id/error"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:layout_marginTop="120dp"
          android:gravity="center"
          android:text="No Cases"
          android:textAppearance="?android:attr/textAppearanceLarge"
          android:textColor="#D6D8D9"
          android:textSize="40dp" />
</LinearLayout>

<LinearLayout
     android:id="@+id/top"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_alignParentRight="true"
     android:background="#000000"
     android:gravity="bottom"
     android:orientation="vertical" >

    <Button 
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"    
          android:text="Top"
/> 
```

# javascript - 奇怪的 CSS 定位问题

> ID：12493080
> 
> 赞同：-3
> 
> 时间：2012-09-19T10:41:47.783
> 
> 标签：javascript, html, css, position

使用[Flowslider](http://www.flowslider.com/)。请看看[这个网站](http://goo.gl/Wo2wG)。滑块的位置由 JS (AFAIK) 改变，它在滑块下的内容上获得位置。`h1`此外，如您所见，标签和滑块 div之间的空白空间很大。我错过了什么？

![在此处输入图像描述](../Images/ff78e71003c49dd802e99babc01a7cab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:44:47.083

在 slider.css 中，第 10 行：

```
.www_FlowSlider_com-item{
    margin: 32px 10px 32px 0;
} 
```

这会在每个图像容器上提供 32px 的边距顶部。尝试替换为

```
.www_FlowSlider_com-item{
    margin: 0px 10px 32px 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:46:06.767

从`.www_FlowSlider_com-item`类中删除边距。

你会得到你的解决方案。

# knockout.js - 将 ViewModel 扩展到 KnockoutJS 中动态加载的一段标记

> ID：12493082
> 
> 赞同：0
> 
> 时间：2012-09-19T10:41:51.073
> 
> 标签：knockout.js

在我的页面上，我有几个嵌套的 KnockoutJS 视图模型应用于多个逻辑丰富的标记区域。

在我的内部，`FactViewModel`我正在加载一个包含对该“事实”的评论列表的 div。这是通过`FactViewModel`. ajax 加载的标记包含`data-bind`属性，但正如预期的那样，没有绑定到视图模型元素。如何将视图模型扩展到动态加载的标记以进行处理，例如单击处理程序等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:10:58.197

You should take a look at Knockout's templating.

[http://knockoutjs.com/documentation/template-binding.html](http://knockoutjs.com/documentation/template-binding.html)

You want to define a client side template, either included as a fixed part of your initial HTML, or load and attach it to the document dynamically. You don't really post any code, so it's hard to post any specifics, but I make use of KOs templates, and I feel they work quite well (and yes, I also apply them to dynamically loaded data).

# objective-c - Objective-C：捕获后使用原始图像大小

> ID：12493083
> 
> 赞同：0
> 
> 时间：2012-09-19T10:41:53.533
> 
> 标签：objective-c, uiimageview, uiimagepickercontroller

我正在制作一个使用相机的应用程序。一切运行良好，但是当我开始在 a 上添加捕获的图像时，`UIImageView`它会根据`UIImageView`.

我想要它做的是，使用捕获图像的原始大小。

这是我的代码：

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
    [insertPhoto1 setImage:image];
    [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:47:41.897

问题出在 imageView 的 contentMode 上：

```
 insertPhoto1.contentMode=UIViewContentModeCenter; 
```

# html5-canvas - 使用 javascript 在 HTML5 视频上用鼠标绘制矩形

> ID：12493090
> 
> 赞同：0
> 
> 时间：2012-09-19T10:42:39.537
> 
> 标签：html5-canvas

我在画布上嵌入了 HTML5 页面中的视频。我想在视频上绘制一个带有鼠标事件的矩形，并且不应擦除矩形。

请帮助我如何做到这一点..

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:38:37.593

您可以在 Video-Canvas 之上创建一个新的 Canvas 元素。并处理该新画布元素的鼠标事件。并确保您没有为新画布设置背景属性，这将使其透明并且视频画布元素内容将可见。如果您不明白，请告诉我。

# php - 如何在 PHPExcel 中制作文件保存提示？

> ID：12493094
> 
> 赞同：0
> 
> 时间：2012-09-19T10:42:43.303
> 
> 标签：php, zend-framework, phpexcel

我刚开始在我的 Zend Framework 项目中使用 PHPExcel，现在我想创建一个带有保存到文件按钮的多选框，如下所示：

```
SELECT BOX WITH INFO
-------------------   
option1           -
option2           -
.                 -
.                 -
.                 -
-------------------

---------------------------
save to excel file button -
--------------------------- 
```

如何在 PHPExcel 中获取此文件保存到提示功能？

[http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:45:00.980

PHPExcel 不提供任何 GUI 工具，因此它无法为您生成选择框。它纯粹是一个用于读取、写入和操作电子表格文件的库。如果您想与用户前端交互，您需要自己编写。

# java - 当与多线程和高负载一起使用时，Spymemcached 集不起作用

> ID：12493096
> 
> 赞同：2
> 
> 时间：2012-09-19T10:42:50.817
> 
> 标签：java, memcached, spymemcached

我使用 memcached 1.4.7 版和 spymemcached 2.8.4 作为客户端来设置和获取它的键值。在多线程和高负载环境中使用时，spymemcached 客户端无法设置缓存本身的值。

我正在使用 40M 长密钥运行负载测试程序，这些密钥平均分为 20 个工作线程。每个工作线程尝试在缓存中设置 1M 键。因此有 40 个工作线程正在运行。

在我的 DefaultCache.java 文件中，我创建了一个包含 20 个 spymemcached 客户端的连接池。每次工作线程尝试将密钥设置为缓存 DefaultCache.java 时都会返回一个随机客户端，如 getCache() 方法所示。

当我的程序退出时，它会打印

**加载的键总数 = 40000000**

但是，当我转到 memcached telnet 控制台时，它总是会丢失数千条记录。我还通过随机获取几个输出 null 的键来验证它。没有驱逐且 cmd_set、curr_items、total_items 分别等于 39.5M

缓存中这些缺少键的原因可能是什么。

这是用于参考目的的代码。

```
public class TestCacheLoader { 
public static final Long TOTAL_RECORDS = 40000000L;
public static final Long LIMIT = 1000000L;

public static void main(String[] args) {
    long keyCount = loadKeyCacheData();
    System.out.println("Total no of keys loaded  = " + keyCount);
}

public static long loadKeyCacheData() {
    DefaultCache cache = new DefaultCache();
    List<Future<Long>> futureList = new ArrayList<Future<Long>>();
    ExecutorService executorThread = Executors.newFixedThreadPool(40);
    long offset = 0;
    long keyCount = 0;
    long workerCount = 0;
    try {
        do {
            List<Long> keyList = new ArrayList<Long>(LIMIT.intValue());
            for (long counter = offset; counter < (offset + LIMIT) && counter < TOTAL_RECORDS; counter++) {
                keyList.add(counter);
            }
            if (keyList.size() != 0) {
                System.out.println("Initiating a new worker thread " + workerCount++);
                KeyCacheThread keyCacheThread = new KeyCacheThread(keyList, cache);
                futureList.add(executorThread.submit(keyCacheThread));
            }
            offset += LIMIT;
        } while (offset < TOTAL_RECORDS);
        for (Future<Long> future : futureList) {
            keyCount += (Long) future.get();
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        cache.shutdown();
    }
    return keyCount;
} 
```

}

```
class KeyCacheThread implements Callable<Long> {
private List<Long> keyList;
private DefaultCache cache;

public KeyCacheThread(List<Long> keyList, DefaultCache cache) {
    this.keyList = keyList;
    this.cache = cache;
}

public Long call() {
    return createKeyCache();
}

public Long createKeyCache() {
    String compoundKey = "";
    long keyCounter = 0;
    System.out.println(Thread.currentThread() + " started to process " + keyList.size() + " keys");
    for (Long key : keyList) {
        keyCounter++;
        compoundKey = key.toString();
        cache.set(compoundKey, 0, key);
    }
    System.out.println(Thread.currentThread() + " processed = " + keyCounter + " keys");
    return keyCounter;
} 
```

}

```
public class DefaultCache {
private static final Logger LOGGER = Logger.getLogger(DefaultCache.class);

private MemcachedClient[] clients;

public DefaultCache() {
    this.cacheNamespace = "";
    this.cacheName = "keyCache";
    this.addresses = "127.0.0.1:11211";
    this.cacheLookupTimeout = 3000;
    this.numberOfClients = 20;

    try {
        LOGGER.debug("Cache initialization started for the cache : " + cacheName);
        ConnectionFactory connectionFactory = new DefaultConnectionFactory(DefaultConnectionFactory.DEFAULT_OP_QUEUE_LEN,
                DefaultConnectionFactory.DEFAULT_READ_BUFFER_SIZE, DefaultHashAlgorithm.KETAMA_HASH) {
            public NodeLocator createLocator(List<MemcachedNode> list) {
                KetamaNodeLocator locator = new KetamaNodeLocator(list, DefaultHashAlgorithm.KETAMA_HASH);
                return locator;
            }
        };

        clients = new MemcachedClient[numberOfClients];

        for (int i = 0; i < numberOfClients; i++) {
            MemcachedClient client = new MemcachedClient(connectionFactory, AddrUtil.getAddresses(getServerAddresses(addresses)));
            clients[i] = client;
        }
        LOGGER.debug("Cache initialization ended for the cache : " + cacheName);
    } catch (IOException e) {
        LOGGER.error("Exception occured while initializing cache : " + cacheName, e);
        throw new CacheException("Exception occured while initializing cache : " + cacheName, e);
    }
}

public Object get(String key) {
    try {
        return getCache().get(cacheNamespace + key);
    } catch (Exception e) {
        return null;
    }
}

public void set(String key, Integer expiryTime, final Object value) {
    getCache().set(cacheNamespace + key, expiryTime, value);
}

public Object delete(String key) {
    return getCache().delete(cacheNamespace + key);
}

public void shutdown() {
    for (MemcachedClient client : clients) {
        client.shutdown();
    }
}

public void flush() {
    for (MemcachedClient client : clients) {
        client.flush();
    }
}

private MemcachedClient getCache() {
    MemcachedClient client = null;
    int i = (int) (Math.random() * numberOfClients);
    client = clients[i];
    return client;
}

private String getServerAddresses(List<Address> addresses) {
    StringBuilder addressStr = new StringBuilder();
    for (Address address : addresses) {
        addressStr.append(address.getHost()).append(":").append(address.getPort()).append(" ");
    }
    return addressStr.toString().trim();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-18T06:36:48.013

我也看到了。原因是他们用于异步操作的反应器模式。这意味着每 1 个连接有 1 个工作线程。这 1 个线程是高负载和多线程机器下的引导瓶颈。1 个线程只能加载 1 个 CPU，而其余 23 个线程将处于空闲状态。

我们提出了连接池，增加了工作线程并允许利用更多的硬件能力。在**github 上**查看项目**3levelmemcache**。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:56:36.740

我不确定，但 spymemcached 库本身似乎存在问题。我将 DefaultCache.java 文件的实现更改为使用 xmemcached，一切都开始正常工作。现在我没有丢失任何记录。telnet stats 显示匹配数量的 set 命令。

不过感谢您的耐心。**

# symfony - Symfony2：使用会话对象或我自己的管理器更好吗？

> ID：12493100
> 
> 赞同：2
> 
> 时间：2012-09-19T10:43:04.540
> 
> 标签：symfony, twig

与[那个](https://stackoverflow.com/questions/12479187/something-that-escapes-me-about-symfonys-controllers)问题有关。
我知道我必须创建一些服务来处理我的实体等等。那是因为我必须将我的逻辑从控制器“移动”到“经理”（即服务）中

现在我有一个包含一些逻辑的服务。在该服务中，我根据用户返回“关联对象”列表 - 假设这些对象是运动队。
假设我的列表的第一个元素（以某种方式从存储库生成）是“默认”团队，并说我有一个页面，我可以在**所有会话**中更改它。
注销或会话陈旧后，我想在“默认”情况下返回。

所以我的想法是：“因为我已经为这个实体编写了一个管理器，所以我将在这个类中编写一个私有属性，其中加载（从 db）这个属性并存储（暂时，使用 setter 方法）我的更改。”
这不会影响我的数据库，我可以在所有会话中保留我的信息。

但是一个想法出现在我的脑海中：会话对象怎么样？（是一项服务，如果我没有理解错的话）
我的解决方案是一个好的解决方案，还是将我的信息存储到会话对象中更好？
从我的角度来看，它是相同的，只是我可以使用`app.session`. 我错了吗？

此外，如果我没记错的话，我怎样才能从树枝访问我的对象属性，而无需每次都从控制器传递它们？（很像有一个全局变量，我想在我的应用程序页面的任何地方显示）。

**编辑：**

更多信息可以在[这个聊天记录](https://chat.stackoverflow.com/transcript/message/5425143#5425143)中找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:42:50.787

如果您想在会话期间存储变量（例如，登录直到注销或只要用户不关闭浏览器窗口），您必须将其存储在会话对象中。如果要在请求期间存储变量，可以将其存储在管理器服务中。

但是，您可以使用管理器服务来加载会话变量并使其对控制器可用。

就像将控制器与数据库/Doctrine 分离是一个好主意一样，将控制器与会话分离也是一个好主意。

更新：正如在查看 REST 时的评论中提到的，在服务中执行会话内容不是一个好主意。但是，您仍应将变量存储在会话中并使用控制器在服务中设置值。

# android - 如何使用 monkeyrunner API（Python 脚本）从文本字段中删除文本

> ID：12493101
> 
> 赞同：3
> 
> 时间：2012-09-19T10:43:05.427
> 
> 标签：android, python, monkeyrunner

我正在尝试使用 monkeyrunner API 从文本字段中删除文本。我正在用python编写脚本。

有诸如“KEYCODE_FORWARD_DEL”、“KEYCODE_DEL”之类的关键事件以及将光标移动到末尾“KEYCODE_MOVE_END”。

我正在尝试删除文本，为此，我尝试将光标移动到末尾，但“KEYCODE_MOVE_END”不起作用。光标根本不动。

然后，我尝试使用“KEYCODE_FORWARD_DEL”，但它也不起作用。

这些键适用于我使用脚本在其中输入文本的文本字段，但这些键不适用于已填充的字段。

有人可以请指导我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T21:22:30.370

这对我有用，虽然没有尝试设置 Exchange 帐户：

```
 fieldLength = 50
  # select all the chars
  self.device.press('KEYCODE_SHIFT_LEFT', MonkeyDevice.DOWN)
  for i in range(fieldLength):
     self.device.press('KEYCODE_DPAD_LEFT', MonkeyDevice.DOWN_AND_UP)
     MonkeyRunner.sleep(1)
  self.device.press('KEYCODE_SHIFT_LEFT', MonkeyDevice.UP)

  # delete them
  self.device.press('KEYCODE_DEL', MonkeyDevice.DOWN_AND_UP) 
```

# clojure - 穿过函数向量

> ID：12493106
> 
> 赞同：5
> 
> 时间：2012-09-19T10:43:14.897
> 
> 标签：clojure

我有一个函数向量`(def my-func [a b c d])`。每个函数都将最后一个函数的输出作为输入。我想通过它们进行输入，我该怎么做？

如何获得以下表格`(-> in a b c d)`？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T17:37:52.623

您可以使用[`comp`](http://clojuredocs.org/clojure_core/clojure.core/comp)，但请注意它从右到左执行功能

```
((comp d c b a) 10) 
```

或者

```
((apply comp my-fns) 10) 
```

将 10 传递给第一个函数，结果传递给下一个函数，依此类推。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T10:53:09.520

我认为您可以使用以下`reduce`功能：

```
(def fns [inc inc inc])
(reduce (fn [v f] (f v)) 10 fns) 
```

# java - 如何使用 Selenium WebDriver 测试 XSS 漏洞？

> ID：12493108
> 
> 赞同：0
> 
> 时间：2012-09-19T10:43:15.527
> 
> 标签：java, testing, selenium, webdriver, automated-tests

我正在为我的应用程序编写自动化测试。我想到的测试之一是检查应用程序中的 XSS 漏洞（特别是脚本/标记注入）。

假设我有一个接受文本输入的字段：

```
<input id="messageInput" name="message" /> 
```

并假设它在其他地方打印输入消息，如下所示：

```
<p id="messageOutput">You entered ${message}</p> 
```

最简单的测试用例会尝试输入标记，`<b>Hello</b>`而不是纯文本。

如何验证标记实际上并未在浏览器上呈现？我能想到的一种肮脏方式是深入到显示输入的元素。

```
@FindBy(id = "messageOutput")
WebElement messageOutput;

public boolean isMarkupRendered() {
    try {
        messageOutput.findElement(By.tagName("b"));
        return true;
    } catch (NoSuchElementException e) {
        return false;
    }
} 
```

但是，这将我的方法与我可能提供的测试数据类型联系起来 - 它不够通用，无法处理诸如

```
<script>document.body.style.backgroundColor='red'</script> 
```

这里有什么建议吗？Selenium 是否提供了一种更清洁的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:56:48.227

到目前为止，我还没有遇到过获取元素 css 属性（特别是颜色）：

```
 public String jsGetColor(String css){

        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x=$(\'"+css+"\');");
        stringBuilder.append("return x.css('color')");
        String res= (String) js.executeScript(stringBuilder.toString());
        return res;

    } 
```

因此，如果您肯定知道它是什么类型的元素，那么想法是使用元素的 css 属性进行操作： text 、 picture 等。

-如何验证标记实际上并未在浏览器上呈现？- 有很多方法可以判断硒是否存在或不存在：

```
input.findElements(By.xpath("//xpath")).size() > 0

driver.findElement(By.cssSelector(html>blablabla....)).isDisplayed()

public bool IsElementPresent(By selector)
{
    return driver.FindElements(selector).Any();
} 
```

希望这对您有所帮助）

# uitableview - 自定义单元格表视图中的 XCode 4.4 远程图像

> ID：12493114
> 
> 赞同：0
> 
> 时间：2012-09-19T10:43:35.050
> 
> 标签：uitableview, storyboard, xcode4.4, custom-cell

我是 Xcode 编程的新手，我正在开发一个小型应用程序，但我遇到了问题。

我有一个带有自定义单元格的表格视图，从外部获取数据以填充视图（通过 JSon）。我在列表中导航速度很慢，因为在方法中`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`。我得到了一个外部图像，这使得它变得很慢，因为它每次显示一个单元格时都会运行。

如何在不使用此方法的情况下填充整个列表？或者是否有其他方法可以让它理解图像存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:51:36.323

在自定义 UITableViewCell 时，Apple 建议的方法很少。您可能正在尝试将子视图添加到单元格的 contentView 中。此处描述了一种更好的方法[Subclassing UITableViewCell](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW12)。好吧，我建议您阅读[TableView 编程指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html#//apple_ref/doc/uid/TP40007451-CH1-SW1)。

# asp.net-mvc - 如何在 mvc4 的特定视图中添加单个 css 文件？

> ID：12493116
> 
> 赞同：6
> 
> 时间：2012-09-19T10:43:35.590
> 
> 标签：asp.net-mvc, asp.net-mvc-4, razor

实际上我有一个母版页，我正在将此母版页添加到另一个视图（Index.cshtml）中，现在我想将另一个单独的 css 文件添加到 Index.cshtml 视图中。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-19T11:03:55.940

在您的母版页（例如 _Layout.cshtml）的 head 部分中添加一个 RenderSection 调用。您的标题部分可能如下所示：

```
<head>
    <meta charset="utf-8" />
    <meta name="description" content="The content description" />
    <link rel="shortcut icon" href="@Url.Content("~/Content/images/favicon.ico")" />
    <title>@ViewBag.Title</title>
    @RenderSection("css", false)
</head> 
```

然后在您的 Index.cshtml 中使用该部分添加您的 css 链接：

```
@section css {
    <link href="@Url.Content("~/css/style.css")" rel="stylesheet"/>
} 
```

请注意，“css”是您的部分的唯一名称，它需要匹配。您还可以在所需的任何视图中使用此部分。然后，您在 css 部分中指定的部分将在 html 的 head-tag 中呈现，就在您将 RenderSection 占位符放在 _Layout.cshtml 中的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:41:42.027

不好的做法，但你可以在视图顶部添加一个 html 链接标签或脚本标签，现代浏览器仍然会呈现它。它并不总是需要在母版页的头部

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:48:13.803

您可以使用 Razor[部分](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)或字符串集合并将其存储在 ViewBag.CSS 中，然后在布局上呈现它，或者如果您不精通 razor，您可以使用 javascript

```
var $ = document; // shortcut
var cssId = 'myCss';  // you could encode the css path itself to generate id..
if (!$.getElementById(cssId))
{
    var head  = $.getElementsByTagName('head')[0];
    var link  = $.createElement('link');
    link.id   = cssId;
    link.rel  = 'stylesheet';
    link.type = 'text/css';
    link.href = 'http://website.com/css/stylesheet.css';
    link.media = 'all';
    head.appendChild(link);
} 
```

# wpf - WPF/AvalonDock v2.0 布局文档

> ID：12493117
> 
> 赞同：1
> 
> 时间：2012-09-19T10:43:36.600
> 
> 标签：wpf, avalondock

如何以编程方式添加其中包含一些 UIElements 的 LayoutDocument？（如 stackpanel、scrollviewer 等）当用户单击“新建项目”按钮时，我想将带有 stackpanel、canvas 等的新 LayoutDocument 添加到 LayoutDocumentPane。我可以以某种方式从一个 LayoutDocument 克隆 xaml 代码并将其加载到新的吗？是否可以将 Title LayoutDocument 属性绑定到 ViewModel 属性？（我得到错误它必须是依赖属性）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T02:01:25.827

你可以使用`Content`属性。例如，如果您想添加一个 `LayoutDocument`带有自定义内容的新内容（`StackPanel`例如），您可以按如下方式进行：

```
//Get the main LayoutDocumentPane of your DockingManager 
var documentPane = dockManager.Layout.Descendents().OfType<LayoutDocumentPane>().FirstOrDefault();

if (documentPane != null)
{
    LayoutDocument layoutDocument = new LayoutDocument {Title = "New Document"};

    //*********Here you could add whatever you want***********
    layoutDocument.Content = new StackPanel();

    //Add the new LayoutDocument to the existing array
    documentPane.Children.Add(layoutDocument);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-11T20:49:41.347

首先，在 XAML 中 - 为 Grid 命名，例如，x:Name = "mainGrid"

然后在课堂上写这个

```
 //Create button - we put this in document
        Button mybutton = new Button();
        mybutton.Content = "hello";
        mybutton.Width = 100;
        mybutton.Height = 50;
        mybutton.Click += (sender, ev) => { MessageBox.Show("Hello"); };

        DockingManager dockmanager = new DockingManager();

        //Set theme
        dockmanager.Theme = new Xceed.Wpf.AvalonDock.Themes.ExpressionLightTheme();

        //Create LayoutRoot
        var layoutroot = new Xceed.Wpf.AvalonDock.Layout.LayoutRoot();

        //Create LayoutPanel
        var layoutpanel = new Xceed.Wpf.AvalonDock.Layout.LayoutPanel();

        //Create LayoutDocumentPane
        var layoutdocpane = new Xceed.Wpf.AvalonDock.Layout.LayoutDocumentPane();

        //Create LayoutDocument and set parameters of Document
        var LayoutDocument = new Xceed.Wpf.AvalonDock.Layout.LayoutDocument();
        LayoutDocument.Title = "Some text";
        //Put button in Document
        LayoutDocument.Content = mybutton;

        layoutdocpane.Children.Add(LayoutDocument);
        layoutpanel.Children.Add(layoutdocpane);
        layoutroot.RootPanel.Children.Add(layoutpanel);

        dockmanager.Layout = layoutroot;
        mainGrid.Children.Add(dockmanager); 
```

对不起我的英语不好。请重写这个，如果它会有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T15:09:35.767

我对 WPF 尤其是 AvalonDock 不太熟悉。我是这样做的，到目前为止它仍然有效:)

您可以为从 LayoutDocument 继承的文档编写一个单独的类。通过这种方式，您应该能够使用 VisualStudio 设计器编辑“项目文档”的标准布局（添加您的堆栈面板、画布等）。

（我假设您有一种显示“项目文档”的标准方式。否则，您可以像在 WPF 中那样在代码中自己构建内容并将其放入 LayoutDocument 中。）

例如：

```
<ad:LayoutDocument x:Class="Namespace.MyDocument"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:ad="http://avalondock.codeplex.com"
    d:DesignHeight="500"
    d:DesignWidth="800"

<Grid>
    <!-- content -->
</Grid>

</ad:LayoutDocument> 
```

后面的代码中的类继承自 LayoutDocument：

```
namespace Namespace
{
    public partial class MyDocument : AvalonDock.Layout.LayoutDocument
    {
        // ...
    }
} 
```

要创建和添加一个新文档，您只需实例化一个新的 MyDocument 对象并通过绑定或类似的方式将其添加到集合中`layoutDocumentPane.Children.Add(doc)`。

不过，我不知道 Title 属性的绑定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T19:52:08.940

那是完全正确的。您只需添加即可添加标题`doc.Title = "My document title"`

或者

您可以添加`Title="My document title"`将`document.xaml`成为孩子的。

# scala - dispatch 的简单使用

> ID：12493118
> 
> 赞同：0
> 
> 时间：2012-09-19T10:43:37.660
> 
> 标签：scala, playframework-2.0, scala-dispatch

我即将建立一个愚蠢的 play/scala 应用程序，它唯一的工作就是在收到呼叫后进行一些 http 呼叫

```
GET /abracadabra controllers.Application.abracadabra(stuff: String) 
```

进而

```
 def abracadabra(stuff: String) = Action {
        Logger.info("called for stuff: "+stuff);
            // call this other URL with 'stuff' as get parameter
            // log http return status code and return Ok/200 anyways
      } 
```

现在对于我考虑使用[Dispatch](http://dispatch.databinder.net)的第二部分（已评论） 。

我已经阅读了文档，但我无法弄清楚如何使用 Promises 等等。

如果有人可以向我指出一些示例代码或其他东西，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:58:09.077

自从玩！有一个内置的异步库，你可能应该继续使用它，除非 Dispatch 中有你特别需要的功能。

这是一个简短的示例：

```
def abracadabra(stuff: String) = Action {
  Logger.info("called for stuff: "+stuff);
  Async {
    WS.url("http://stackoverflow.com/").get().map { response =>
      Ok("I got it: " + response)
    }
  }  
} 
```

文档在这里：[https ://github.com/playframework/Play20/wiki/ScalaWS](https://github.com/playframework/Play20/wiki/ScalaWS)

# phpfox - 在 PHPFox 中触发函数

> ID：12493120
> 
> 赞同：0
> 
> 时间：2012-09-19T10:43:40.807
> 
> 标签：phpfox

在 PHPFox 站点中，我想在每次活动点增加时触发一个函数。是否可以通过一个文件更新？否则我将不得不更改每个模块（例如照片、博客、投票、评论等），以增加活动点为准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:04:02.647

您可以使用钩子“user.service_activity_update”为此编写插件。这里有一个关于如何编写[插件的教程](http://www.phpfox.com/kb/article/264/primer-on-hooks-plugins/)

# ruby-on-rails - Rails 3.2.8 中的 Rake 中止

> ID：12493124
> 
> 赞同：0
> 
> 时间：2012-09-19T10:43:49.373
> 
> 标签：ruby-on-rails, rake

我已经成功地用脚手架创建了一个空的新 rails 项目，但是当我尝试时`rake db:create`，它会抛出一个错误：`rake aborted! uninitialized constant Rake::DSL`.

正如其他 SO 帖子所提到的，我尝试将我的 Gemfile 设置为 gem 'rake'、'0.8.7'，但 rake 给了我另一个错误：

> 您要求：rake = 0.8.7
> 
> 该捆绑包当前已将 rake 锁定在 0.9.2.2。尝试运行`bundle update rake`Run`bundle install`来安装缺失的 gem。

然后我按照消息说的做了更新 rake 和 bundle install。同样的错误。

开发一个 Rails 项目是一种轻松愉快的体验，但它是 ruby​​ 版本、rails 版本、差异 gem 和插件版本之间的噩梦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:50:59.600

尝试删除您的 Gemfile.lock，然后在终端上输入：

```
bundle install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:59:11.817

> 我已经成功地用脚手架创建了一个空的新 Rails 项目，但是当我尝试 rake db:create 时，它​​给我一个错误：rake aborted！未初始化的常量 Rake::DSL。

对于这个问题，我建议通过运行所有 rake 任务`bundle exec rake ...`

# wordpress - wordpress 预览演示插件

> ID：12493127
> 
> 赞同：0
> 
> 时间：2012-09-19T10:44:00.733
> 
> 标签：wordpress, themes, preview

我已经开始在 wordpress 主题网站上看到能够在同一页面上预览主题的功能，我尝试搜索该插件但我找不到任何插件 - 我假设它是 iframe 但我可能弄错了。有没有人遇到过这个问题，我希望能够为自己创建这个解决方案是什么？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:06:46.343

查看[Theme Test Drive 插件](http://wordpress.org/extend/plugins/theme-test-drive/)。

激活后，您应该能够将预览 URL`(http://www.myblog.com/?theme=Default)`与 iframe 和/或您喜欢的任何灯箱解决方案结合起来。

# regex - 正则表达式替换文本但在文本位于特定标签之间时排除

> ID：12493128
> 
> 赞同：12
> 
> 时间：2012-09-19T10:44:01.043
> 
> 标签：regex

我有以下字符串：

```
Lorem ipsum Test dolor sit amet, consetetur sadipscing elitr, sed diam nonumy <a href="http://Test.com/url">Test</a> eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd sed Test dolores et ea rebum. Stet clita kasd gubergren, no sea <a href="http://url.com">Test xyz</a> takimata sanctus est Lorem ipsum dolor sit amet. 
```

现在我将替​​换标签之外的字符串“Test”而不是标签之间的字符串（例如替换为“1234”）。

```
Lorem ipsum 1234 dolor sit amet, consetetur sadipscing elitr, sed diam nonumy <a href="http://Test.com/url">Test</a> eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd sed 1234 dolores et ea rebum. Stet clita kasd gubergren, no sea <a href="http://url.com">Test xyz</a> takimata sanctus est Lorem ipsum dolor sit amet. 
```

我从这个正则表达式开始：`(?!<a[^>]*>)(Test)([^<])(?!</a>)`

但是有两个问题没有解决：

1.  标签内的文本“测试”也被替换（例如`<a href="http://Test.com/url">`）
2.  标签之间的文本是否与搜索的文本不完全匹配，它也会被替换（例如`<a href="http://url">Test xyz</a>`）

我希望有人有解决这个问题的方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-10-25T16:38:04.393

**回答**

采用

```
(Test)(?!(.(?!<a))*</a>) 
```

**解释**

让我提醒您一些符号的含义：

1)`?!`是一个[否定的前瞻](https://www.rexegg.com/regex-lookarounds.html)，例如`r(?!d)`选择所有`r`不直接跟在后面的`d`：

[![在此处输入图像描述](../Images/d4129a47af7da4cad61bd2f7d26f2f02.png)](https://i.stack.imgur.com/Wody4.png)

2）因此，永远不要在没有字符的情况下开始负前瞻。只是`(?!d)`没有意义：

[![在此处输入图像描述](../Images/e68a260eb11b390a74f342a205760bc6.png)](https://i.stack.imgur.com/sE92Q.png)

3)`?`可以用作惰性匹配。例如`.+E`将从中选择

> 123EEE

整个字符串`123EEE`。但是，根据需要`.+?E`选择尽可能少的“任何字符”( `.+`)。它只会选择`123E`.

***回答：***

Protist 的答案是你应该使用`(?!<a[^>]*?>)(Test)(?![^<]*?</a>)`. 让我先解释一下如何缩短它。

如 2) 所述，在比赛前进行前瞻是没有意义的。所以以下等价于原生答案：

```
(Test)(?![^<]*?</a>) 
```

也既然`<`不允许，懒惰的匹配`?`是多余的，所以它也相当于

```
(Test)(?![^<]*</a>) 
```

这将选择所有`Test`后面`</a>`没有的，中间没有符号`<`。这就是为什么出现在 any 之前或之后的 Test`<a ...> .. </a>`将被替换。

但是，请注意

```
Lorem Test dolor <a href="http://Test.com/url">Test <strong>dolor</strong></a> eirmod 
```

将更改为

```
Lorem 1234 dolor <a href="http://1234.com/url">1234 <strong>dolor</strong></a> eirmod 
```

为了抓住这一点，您可以将您的正则表达式更改为

```
(Test)(?!(.(?!<a))*</a>) 
```

它执行以下操作：

> `Test`选择后面不跟字符串的每个单词，`***</a>`其中每个字符`***`后面不跟`<a`.

请注意，点`.`很重要（见 2））。

请注意，惰性匹配 like`(Test)(?!(.(?!<a))*?</a>)`是不相关的，因为嵌套链接在 HTML4 和 HTML5 中是非法的（smth like `<a href="#">..<a href="#">...</a>..</a>)`.

原生生物说

> 此外，不建议在原始 HTML 上使用正则表达式。

我同意这一点。一个问题是，如果标签没有关闭或打开，就会导致问题。例如，这里提到的所有解决方案都会改变

```
Lorem Test dolor Test <strong>dolor</strong></a> eirmod 
```

到

```
Lorem Test dolor Test <strong>dolor</strong></a> eirmod 1234 dolores sea 1234 takimata 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-19T11:48:17.860

```
(?!<a[^>]*?>)(Test)(?![^<]*?</a>) 
```

与 zb226 相同，但使用惰性匹配进行了优化

此外，不建议在原始 HTML 上使用正则表达式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T11:24:03.863

这应该可以解决问题：

```
(?!<a[^>]*>)(Test)(?![^<]*</a>) 
```

[在 regexr 上](https://regexr.com/50uhi)自己尝试一下。

**后续：**正如[亚当](https://stackoverflow.com/users/2311074/adam)[上面](https://stackoverflow.com/a/46937770/1529709)解释的那样，第一部分没有效果，可以完全删除：

```
(Test)(?![^<]*</a>) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-15T00:06:36.343

复活这个古老的问题，因为它有一个没有提到的简单解决方案。

关于使用正则表达式解析 html 的所有免责声明，这里有一个简单的方法。

**Perl / PCRE 的方法**

```
<a[^>]*>[^<]*<\/a(*SKIP)(*F)|Test 
```

[演示](http://regex101.com/r/hU3wD2)

**通用解决方案**

```
<a[^>]*>[^<]*<\/a|(Test) 
```

在这个版本中，要替换的文本被捕获在第 1 组中，并通过简单的回调或 lambda 执行替换。

[演示](http://regex101.com/r/dI1pM2)

**参考**

1.  [除了情况 s1、s2、s3 之外，如何匹配模式](https://stackoverflow.com/q/23589174)
2.  有关代码实现，请参阅[如何匹配模式中的代码示例，除非...](http://www.rexegg.com/regex-best-trick.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-05T16:46:18.017

通过@protist 调整建议的解决方案，在这种情况下搜索短语并**排除**脚本标记内的任何匹配项：

```
(?!<script[^>]*?>)(\bTest Phrase\b)(?![^<]*?<\/script>) 
```

[演示](https://regexr.com/4fa2r)

Adam 提供的答案虽然更简洁，但执行起来需要更长的时间。这可以通过编辑此评论中已经提到的演示来证明。

# php - 在其他页面访问 MySQL 连接语句

> ID：12493129
> 
> 赞同：0
> 
> 时间：2012-09-19T10:44:03.210
> 
> 标签：php, mysql, sql

> **可能重复：**
> [在不同的 PHP 页面中使用相同的 MySQL 连接](https://stackoverflow.com/questions/2261624/using-same-mysql-connection-in-different-php-pages)

这对我来说是全新的，因为我的 PHP 系统的每个页面上都有我的连接语句。有没有办法可以将它存储在另一个专用文件中并在每个页面中调用它，而不是在每个 PHP 文件中包含硬代码？谁能指出我正确的教程方向或解释它是如何工作的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:45:52.203

将连接信息放在一个文件中，并在所有其他页面中使用[include 。](http://php.net/manual/en/function.include.php)

*   确保使用 .php 作为要包含的文件的扩展名。
*   出于安全原因，建议将该文件保留在您的 webroot 之外（最好放一张地图）。
*   如果您还没有熟悉它，请尝试使用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)而不是通常的 mysql_ 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:00:26.273

[包括](http://www.php.net/manual/en/function.include.php)
[include_once](http://www.php.net/manual/en/function.include-once.php)
[需要](http://www.php.net/manual/en/function.require.php)
[require_once](http://www.php.net/manual/en/function.require-once.php)

*   include 语句包含并评估指定的文件。
*   require 与 include 相同，但失败时也会产生致命的 E_COMPILE_ERROR 级别错误。

# javascript - 为什么地图图钉上的点击事件不起作用？

> ID：12493131
> 
> 赞同：1
> 
> 时间：2012-09-19T10:44:09.947
> 
> 标签：javascript, event-handling, dom-events, bing-maps

我想向 Bing 地图添加一个图钉，当用户单击图钉时，应该会出现一个信息框。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
   <head>
      <title></title>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

      <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
      <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>

      <script type="text/javascript">
          function BingMap(){
          var map = null;
          var pinInfobox = null;

          this.showMap = function(latitude, longitude){  

              var mapOptions = {
                      credentials: "mycredentials",
                      center: new Microsoft.Maps.Location(latitude, longitude),
                      mapTypeId: Microsoft.Maps.MapTypeId.aerial,
                      zoom: 18,
                      showScalebar: false
              }

              map = new Microsoft.Maps.Map(document.getElementById("map_canvas"), mapOptions);
              Microsoft.Maps.Events.addHandler(map, 'click', function(event) {
                  var point = new Microsoft.Maps.Point(event.getX(), event.getY());
                  var loc = event.target.tryPixelToLocation(point); 
                  that.addNewMarker(loc.latitude, loc.longitude);
              });

          };

          this.addMarker = function(id, title, latitude, longitude){
              var loc = new Microsoft.Maps.Location(latitude, longitude);

              var pin = new Microsoft.Maps.Pushpin(loc); 

              pinInfobox = new Microsoft.Maps.Infobox(pin.getLocation(), 
                      {title: title, 
                       description: 'This pushpin is located at (0,0).', 
                       visible: false, 
                       offset: new Microsoft.Maps.Point(0,15)});

              Microsoft.Maps.Events.addHandler(pin, 'click', function(event) {
                  pinInfobox.setOptions({ visible:true });
              });

              map.entities.push(pin);
              map.entities.push(pinInfobox);
          }; 
      }

      $(document).ready(function() {
            var map = new BingMap();  
            map.showMap(50.364302, 7.559795);

            map.addMarker("1", "title", 50.364302, 7.559795);
           });
      </script>
   </head>
   <body> 
      <div id='map_canvas' style="position:absolute; width:400px; height:400px;"></div>
   </body>
</html> 
```

我将代码放入我创建实例并调用 showMap 和 addMarker 方法的类中。不幸的是，没有调用显示信息框的事件。

仅当我将代码放在类方法中时才会出现此问题。以下页面上的代码有效：http: [//msdn.microsoft.com/en-us/library/gg508987.aspx](http://msdn.microsoft.com/en-us/library/gg508987.aspx)

我是否必须以某种方式更新 DOM 或其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:23:30.797

显示信息框的`Pushpin` `click`处理程序未触发的原因是`click`您为地图定义的处理程序中的错误：

```
 Microsoft.Maps.Events.addHandler(map, 'click', function(event) {
              var point = new Microsoft.Maps.Point(event.getX(), event.getY());
              var loc = event.target.tryPixelToLocation(point); 
              that.addNewMarker(loc.latitude, loc.longitude);
          }); 
```

`event.target.tryPixelToLocation(point)`会崩溃，因为`event.target`引用了`Pushpin`没有`tryPixelToLocation()`定义函数的对象。此外，对于您发布的代码，`that.addNewMarker(loc.latitude, loc.longitude)`它没有引用之前定义的任何内容，因此也会崩溃。由于执行在地图单击时崩溃，事件不会传播到图钉单击处理程序，这就是您看不到信息框的原因。如果你注释掉上面的代码，你会看到当你点击一个图钉时会出现信息框。

您可以使用浏览器中的开发人员工具来跟踪此类问题，以备将来使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:53:53.843

当我将地图项目拆分为内容页面时，我遇到了这个问题。

我通过附加这样的事件来解决它

```
 if (window.addEventListener) 
    { 
        window.addEventListener("load", BingMap, false); 
    }
    else if (window.attachEvent) 
    {
     window.attachEvent("onload", BingMap);
    } 
```

# regex - htaccess中正则表达式中的连字符

> ID：12493134
> 
> 赞同：1
> 
> 时间：2012-09-19T10:44:21.613
> 
> 标签：regex, .htaccess

htaccess 中有这个正则表达式：

```
RewriteRule ^collection/([^/_]+)games/$ some.php?coll=$1 [L] 
```

它适用于像“/collection/somegames/”这样的
url，但我希望规则接受这些 url：“/collection/some-games/”被重定向到“some.php?coll=some”，我将其更改为：

```
RewriteRule ^collection/([^/_]+)-games/$ some.php?coll=$1 [L] 
```

或者

```
RewriteRule ^collection/([^/_\-]+)-games/$ some.php?coll=$1 [L] 
```

以上都没有帮助。
解决办法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:09:09.167

```
RewriteRule ^collection/([^/_]+?)-?games/$ some.php?coll=$1 [L] 
```

你去吧。

# html - CSS 三栏布局——清除浮动

> ID：12493137
> 
> 赞同：-1
> 
> 时间：2012-09-19T10:44:35.833
> 
> 标签：html, css

> **可能重复：**
> [为什么这很清楚：两者都在全球范围内行动？](https://stackoverflow.com/questions/7085100/why-is-this-clearboth-acting-globally)

我在 alistapart 上以三列布局为例：[http](http://www.alistapart.com/d/negativemargins/ex5.htm) ://www.alistapart.com/d/negativemargins/ex5.htm ，但是当我尝试使用“clear：left”样式制作一个框时：`<p style='clear:left;'>Lorem ... arcu.</p>` 内容框下方跳到左列下方。屏幕：[错误演示](https://i.stack.imgur.com/JsrYu.png)（chrome、firefox、...）。

修复它的最佳方法是什么？

```
<h1>content</h1>
                <p style="float:left;">sdfsf</p>
<p style="clear:left">Lorem ipsum dolor sit amet, consectetuer adipiscing elit.  Phasellus varius eleifend tellus. Suspendisse potenti. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos. Nulla facilisi. Sed wisi lectus, placerat nec, mollis quis, posuere eget, arcu.</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:11:09.370

解决了：

```
#main {overflow: hidden;} 
```

或者

```
#main {overflow: auto;} 
```

感谢： [为什么这很清楚：两者都在全球范围内行动？](https://stackoverflow.com/questions/7085100/why-is-this-clearboth-acting-globally?rq=1)

# qt - QML - 图像不会加载到应用程序的部署版本中

> ID：12493145
> 
> 赞同：5
> 
> 时间：2012-09-19T10:44:59.420
> 
> 标签：qt, qml, qtdeclarative

我编写了一个**Qt/QML 应用程序**，在编译期间一切正常并在我自己的系统上运行。但是，当我将此软件移至另一台计算机时，不会加载任何图片。例如这是我的背景图片：

```
 Image{
    id:background;
    source:"qrc:/qml/MobnaPC/images/back.jpg"
} 
```

当我在我的系统（开发环境系统）中运行可执行文件（在发布模式下创建）时加载此图像，但是当我将此文件及其关联的 dll 移动到另一个系统（未安装 Qt）时，背景图像不会加载.
我还尝试了相对寻址而不是资源系统。但问题仍然存在。我该如何解决这种奇怪的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:01:40.603

您缺少处理 JPEG 图像格式的 Qt 插件。解决此问题的最简单方法是将**qjpeg4.dll**复制到与可执行文件相同的工作目录中。

# iphone - 99 美元的 iOS 开发者许可证是否允许我发布一个或多个应用程序？

> ID：12493148
> 
> 赞同：10
> 
> 时间：2012-09-19T10:45:10.057
> 
> 标签：iphone, ios

我目前正在查看每年 99 美元的 iOS 开发者许可证。然而，我发现不清楚这是否适用于一个应用程序，是否可以将多个应用程序（免费，99 美元除外）发布到 AppStore？

**我可以在 99 美元的 iOS 开发者许可下发布多个应用程序吗？**如果是; 有额外费用吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T10:52:38.890

您可以提交任意数量的应用程序，但只能提交 1 年。您必须每年支付 99 美元的订阅费（如果您代表企业继续，则为 299 美元）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T10:48:35.613

您只需要一个注册帐户。您可以根据需要开发 - 发布应用程序。

**1\. 开发**

使用 iOS SDK 和 iOS 开发中心的丰富技术资源开发您的应用程序。

**2\. 测试**

在 iPad、iPhone 和 iPod touch 上测试和调试您的代码以完成您的应用程序。

**3\. 分发** 在 iPad、iPhone 和 iPod touch 上测试和调试您的代码以完成您的应用程序。

iOS 开发者计划使您能够在 App Store 上分发您的应用程序。将您的免费或商业应用程序提供给全球数百万 iPad、iPhone 和 iPod touch 客户。通过应用内购买、iAd 富媒体广告、批量购买等，扩展从 App Store 上的应用产生收入的能力。

[https://developer.apple.com/programs/ios/](https://developer.apple.com/programs/ios/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T10:53:39.113

**是的，您可以在99 美元**的IOS 开发人员许可证下发布多个应用程序。上传更多应用程序不收取额外费用。这些链接将帮助您
[https://developer.apple.com/programs/ios/](https://developer.apple.com/programs/ios/)
[https://developer.apple.com/appstore/index.html](https://developer.apple.com/appstore/index.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T10:46:22.617

是的，您可以在 99 美元的 iOS 开发者许可下发布**一年的应用程序数量****没有限制**。

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T10:46:43.523

您可以在一个开发者帐户上发布数千个应用程序，无需额外费用。**

# actionscript-3 - 如何将计时器事件的值转换为数字？

> ID：12493150
> 
> 赞同：1
> 
> 时间：2012-09-19T10:45:12.730
> 
> 标签：actionscript-3, timer

我正在制作一个游戏，其中显示杀死敌人的反应时间并用于以后的计算。该数字需要精确，以秒为单位，具有三位有效数字。所以我需要将计时器的当前值转换为数值。

我有它，所以敌人产生，一个计时器（reactionTimer）事件开始，当它被杀死时，一个变量（reactionTime）将被设置为reactionTimer。

然后产生一个新的并重置计时器和变量。

我已经尝试了几次，但它总是最终将计时器值显示为“对象计时器”或 0。

我也尝试过使用`currentCount`，但这并没有给我十进制数字，只是奇怪地工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:08:26.610

新的 ActionScript 开发人员经常混淆了[`Timer`类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html)的目的和`TimerEvent`. 它实际上是为了在特定时间触发动作，而不是为了*测量*时间。

要测量时间，请使用[`getTimer`函数](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#getTimer%28%29)。无论何时调用它，它都会返回自 Flash 播放器启动以来经过的毫秒数。要测量经过的时间，您只需调用`getTimer()`两次，然后从第二个测量值中减去第一个测量值。

有很多方法可以组织您的特定情况。一种是将敌人的生成时间戳存储在敌人类上，并在构造函数中捕获它：

```
public class Enemy extends MovieClip {
    public function get spawnTime():int { return _spawnTime; }
    private var _spawnTime:int;

    // Constructor
    public function Enemy() {
        super();
        _spawnTime = getTimer();
    }
} 
```

然后当敌人被杀死时，你`getTimer()`再次调用以获得反应时间：

```
// Somewhere, where you are processing the enemy killed event
var killTime:int = getTimer();
var reactionTime:int = killTime - killedEnemy.spawnTime; // in whole ms
var reactionSeconds:Number = reactionTime / 1000;        // in seconds 
```

# c# - 为什么列表项为零？

> ID：12493152
> 
> 赞同：-4
> 
> 时间：2012-09-19T10:45:19.717
> 
> 标签：c#, list, lambda

我有一个包含以下项目的列表：

> 捆绑/发布/美国---NL
> 捆绑/发布/英国---美国

我想在列表项中搜索子字符串（“US”或“UK”）。

```
var testVar = (from r in ghh
    where (r.Substring(r.LastIndexOf('/') + 1, 
                       (r.Length - (r.IndexOf("---")    + 3)))) == "US"
    select r).ToList();

if ( testVar != null)
{
    //print item is present
} 
```

（`ghh`是列表名称）

但`testVar`总是表现出来`null`。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:55:32.793

尝试另一种方式：

```
testVar.Where(x => {
    var country = x.Split('/').Last()
              .Split(new[] { "---" }, StringSplitOptions.RemoveEmptyEntries)
              .First();

    return country == "US" || country == "UK";
}).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:49:17.177

为什么不直接使用（假设列表只是一个字符串列表）：

```
 var items = (from r in ghh where r.Contains("UK") || r.Contains("US") select r).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T11:16:15.310

没有情况`testVar`会在哪里`null`。

这是一些代码来说明这一点。请务必在运行前激活输出视图... 查看 -> 输出

唯一可能发生的事情是 linq 查询稍后执行并且您得到一个空异常，因为您的 ghh 在 linq 尝试查询它时为空。Linq 不一定会立即执行。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Diagnostics;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            CallAsExpected();
            CallWithNull();
            CallNoHits();
            Console.WriteLine("Look at Debug Output");
            Console.ReadKey();
        }

        private static void CallNoHits()
        {
            TryCall(new List<string> {
                "UK foo",
                "DE bar"
            });
        }

        private static void CallWithNull()
        {
            TryCall(null);
        }

        private static void CallAsExpected()
        {
            TryCall(new List<string> {
                "US woohooo",
                "UK foo",
                "DE bar",
                "US second",
                "US third"
            });
        }

        private static void TryCall(List<String> ghh)
        {
            try
            {
                TestMethod(ghh);
            }
            catch (Exception e)
            {
                Debug.WriteLine(e);
            }
        }

        private static void TestMethod(List<String> ghh)
        {
            if (ghh == null) Debug.WriteLine("ghh was null");

            var testVar = (from r in ghh
                           where (r.Contains("US"))
                           select r);

            Debug.WriteLine(String.Format("Items Found: {0}", testVar.Count()));

            if (testVar == null) Debug.WriteLine("testVar was null");

            foreach (String item in testVar)
            {
                Debug.WriteLine(item);
            }
        }
    }
} 
```

# java - 使用 JDBC 时出现 MissingResourceException？

> ID：12493157
> 
> 赞同：5
> 
> 时间：2012-09-19T10:45:24.577
> 
> 标签：java, mysql, exception, jdbc

我以前多次使用 JDBC 没有任何问题，但由于某种原因，在我的新服务器上它无法正常工作。代码在我的主机上编译并运行良好，所有库（包括 JDBC）都应该编译成我运行的单个 JAR。

基本代码：

```
try
{
    Class.forName("com.mysql.jdbc.Driver");
}
catch (ClassNotFoundException e)
{
    System.err.println("Cannot load driver...");
    e.printStackTrace();
}

try
{
    connection = DriverManager.getConnection("jdbc:mysql://localhost/dbname?user=dbuser&password=dbpass");
    statement = connection.createStatement();
}
catch (SQLException e)
{
    System.err.println("Cannot connect to database...");
    e.printStackTrace();
} 
```

错误：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at com.mysql.jdbc.Util.stackTraceToString(Util.java:355)
    at com.mysql.jdbc.Util.<clinit>(Util.java:120)
    at com.mysql.jdbc.NonRegisteringDriver.parseURL(NonRegisteringDriver.java:764)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:325)
    at java.sql.DriverManager.getConnection(DriverManager.java:620)
    at java.sql.DriverManager.getConnection(DriverManager.java:222)
    at com.test.Server.<init>(Server.java:78)
    at com.test.Server.main(Server.java:49)
Caused by: java.lang.RuntimeException: Can't load resource bundle due to underlying exception java.util.MissingResourceException: Can't find bundle for base name com.mysql.jdbc.LocalizedErrorMessages, locale en_GB
    at com.mysql.jdbc.Messages.<clinit>(Messages.java:61)
    ... 8 more
Caused by: java.util.MissingResourceException: Can't find bundle for base name com.mysql.jdbc.LocalizedErrorMessages, locale en_GB
    at java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1539)
    at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1278)
    at java.util.ResourceBundle.getBundle(ResourceBundle.java:733)
    at com.mysql.jdbc.Messages.<clinit>(Messages.java:59)
    ... 8 more 
```

我以前从未遇到过这种错误，而且谷歌根本没有帮助。我已经检查了数据库凭据、端口号等。希望能提供任何帮助来解决它！

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2014-04-11T12:19:09.547

代替..

```
connection = DriverManager.getConnection("jdbc:mysql://localhost/dbname?user=dbuser&password=dbpass"); 
```

..bcoz 默认端口是 mysql 的 3306。如果更改，请给出

```
DriverManager.getConnection("jdbc:mysql://localhost:3306/minebench", "username", "password"); 
```

并添加“mysql-connector-java-5.1.0-bin.jar”。那就试试吧。

# html - CSS3 中的自适应布局

> ID：12493158
> 
> 赞同：0
> 
> 时间：2012-09-19T10:45:26.987
> 
> 标签：html, css, adjustable

我正在尝试将我的网站索引页面转换为可调整的。我希望页面的整个内容都可以调整。可调整是指如果有人在新窗口中打开页面并尝试通过用鼠标拖动窗口来调整窗口大小，我的页面内容也会根据窗口的宽度和高度自行调整。

是否可以只使用 CSS 或者我也必须使用一些 javascript？

我需要的是类似 [this][1]

任何帮助或建议都将受到高度评价

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:21:44.970

你想做的是**响应式设计**

例如，您可以使您的 css 以特定设计为目标：

```
//General css 

/*MEDIA BETWEEN 300 - 1000PX */ 
@media all and (min-width:300px) and (max-width:1000px)
{

}

/*MEDIA BETWEEN 621 - 800PX */ 
@media all and (min-width:621px) and (max-width:800px)
{

}

/*MEDIA BETWEEN 300 - 620PX */ 
@media all and (min-width:300px) and (max-width:620px)
{

} 
```

一些可以提供帮助的页面是：

1.  [http://googlewebmastercentral.blogspot.in/2012/04/responsive-design-harnessing-power-of.html](http://googlewebmastercentral.blogspot.in/2012/04/responsive-design-harnessing-power-of.html)
2.  [http://www.onextrapixel.com/2012/04/23/responsive-web-design-layouts-and-media-queries/](http://www.onextrapixel.com/2012/04/23/responsive-web-design-layouts-and-media-queries/)

**注意：使用 em 和 % 代替 px 和 pt**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:53:09.740

只需在东西上设置相对宽度，例如`width: 75%;`or`width: 60%;`而不是`width: 450px;`or `width: 650px;`。如果您只需要在调整页面大小时使元素变窄/变宽，这对您有用。
如果您想要进行重大布局更改（例如在您提供的演示中，当窗口变小时，顶部菜单栏变成侧边栏），您将需要一些 Javascript 来根据窗口宽度切换样式表。希望这能给你一些想法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:55:19.000

您所说的称为“响应式设计”。响应式网站更多地使用百分比而不是像素以及 css 中称为“媒体查询”的东西。

这里有一篇很棒的文章： [http ://www.alistapart.com/articles/responsive-web-design/](http://www.alistapart.com/articles/responsive-web-design/)

# java - 正则表达式无法在 java 中找到重复的标记

> ID：12493159
> 
> 赞同：0
> 
> 时间：2012-09-19T10:45:28.543
> 
> 标签：java, regex

嗨，我知道这个问题已经被问过很多次了。我使用了与 SO 某人建议的相同方法来使用正则表达式查找重复表达式，但它无法正常工作。我有一个类似下面的模式文件，我需要使用正则表达式在 Java 中进行解析。

```
[Abc]
var1 = "val1"
var2 = val2 
[Def]
var1 = "\[val1\]" 
var2 = 1;
var3 = val3
[Xyz]
var1 = val1 
```

我正在使用正则表达式`(\[([^\\]*?)\])(.|\s)*?`在文件中查找块。我正在考虑从方括号开始到下一个括号开始的块。[当我在正则表达式星球上](http://www.regexplanet.com/advanced/java/index.html)尝试这个正则表达式时，它不起作用。它匹配给定的文件，但它发现 group(3) 为空，它应该是从第一个方括号末尾到下一个方括号开头的块。我也尝试过使用这个正则表达式`(\[([^\\]+?)\]\s*$\s*(([^=]*)\s*=\s*([^$]*)\s*$)*?)`，但这也不起作用。当我将值对编号固定为 4 并尝试使用正则表达式`(\[(.+?)\]\s*?(.+?)\s*?=\s*?(.+?)\s*?(.+?)\s*?=\s*?(.+?)\s*?(.+?)\s*?=\s*?(.+?)\s*?(.+?)\s*?=\s*?(.+?)\n\s*?)`时，它起作用了。为什么它不适用于可变大小写。

如果我能够在上述情况下提取块，我想要两个块的例子是

```
var1 = "val1"
var2 = val2 
```

或者直接提取

```
var1 , "val1" var2 val2 
```

希望这能说明问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:18:02.630

您需要使用积极的前瞻性。您需要找到下一个块开始，但不要抓住它。

伴随着一些东西

```
(\[([^\\]*?)\])((.*\s)*?)(?=(\[[^\\]*\])|$) 
```

解释：

*   `(\[([^\\]*?)\])`- 块定义：[sdgsdg]
*   `((.*\s)*?)`- 块内容。行，但不贪心。
*   `(?=(\[[^\\]*\])|$)`- 积极展望未来。另一个块的开始，或字符串的结尾。

# phpunit - Silex phpunit不匹配路由

> ID：12493164
> 
> 赞同：3
> 
> 时间：2012-09-19T10:45:43.343
> 
> 标签：phpunit, silex

我正在尝试为我的 Silex 应用程序编写一些测试，但遇到了问题。

我有以下 phpunit.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit 
     bootstrap="./bootstrap.php"
     backupGlobals="false"
     backupStaticAttributes="false"
     colors="true"
     convertErrorsToExceptions="true"
     convertNoticesToExceptions="true"
     convertWarningsToExceptions="true"
     processIsolation="false"
     stopOnFailure="false"
     syntaxCheck="false"
>
    <testsuites>
        <testsuite name="Management Test Suite">
            <directory>./</directory>
        </testsuite>
    </testsuites>
    <filter>
        <whitelist>
            <directory>../src/</directory>
        </whitelist>
    </filter>
</phpunit> 
```

引导代码是

```
<?php

use Symfony\Component\HttpKernel\Client;

function getJSONResponse($app, Client $client, $url, $params = array())
{
    $params['test_key'] = $app['test_key'];
    $client->request('GET', $url, $params);
    $response = $client->getResponse();
    $data = json_decode($response->getContent(), true);
    return $data;
} 
```

我的第一个测试文件如下

```
<?php

require_once $_SERVER['frog_docroot'] . '/www/vendor/autoload.php';

class DefaultTest extends Silex\WebTestCase
{
    public function createApplication()
    {
        return require $_SERVER['frog_docroot'] . '/www/src/app.php';
    }

    public function testInvalidUrlThrowsException()
    {
        $client = $this->createClient();
        $data = getJSONResponse($this->app, $client, '/some/url/that/does/not/exist');
        $this->assertContains('No route found for "GET /some/url/that/does/not/exist"', $data['message']);
    }
} 
```

我的第二个是

```
<?php

require_once $_SERVER['frog_docroot'] . '/www/vendor/autoload.php';

class AnotherTest extends Silex\WebTestCase
{
    public function createApplication()
    {
        return require $_SERVER['frog_docroot'] . '/www/src/app.php';
    }

    public function testSearchReturnsResults()
    {
        $client = $this->createClient();
        $data = getJSONResponse($this->app, $client, '/packages/search', array(
            'search' => 'something',
            'offset' => 0,
            'limit' => 10,
        ));

        $this->assertSame(array(
            'data' => array(
                '1' => 'Some Package',
            ),
            'offset' => 0,
            'limit' => 10,
        ), $data);
    }
} 
```

问题是，如果我单独运行测试，它们都会通过。

如果我将它们作为测试套件的一部分运行，则会引发异常

```
There was 1 failure:

1) AnotherTest::testSearchReturnsResults
Failed asserting that Array (
    'message' => 'No route found for "GET /packages/search"'
    'code' => 0
) is identical to Array (
    'data' => Array (
        '1' => 'Some Package'
    )
    'offset' => 0
    'limit' => 10
    'more' => false
). 
```

我尝试编写测试的方式有什么明显错误吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-26T09:18:03.300

我遇到了同样的问题。我所要做的（尽管我不喜欢那个解决方案）就是使用`require`and`include`而不是`require_once`and`include_once`

# android - Android TabHost，Activity之间跳转

> ID：12493165
> 
> 赞同：2
> 
> 时间：2012-09-19T10:45:43.507
> 
> 标签：android, android-tabhost, stack-overflow

我的 TabHost 有问题。

我想在一个新的“详细”活动中从概览活动中跳出来，而不会丢失我的“TabBar”。

我为此使用此功能：

```
public void replaceContentView(String id, Intent newIntent) {       
    try
    {           
        Activity ac = (Activity) context;   
        ActivityGroup ag = (ActivityGroup) ac.getParent();      
        View view = ag.getLocalActivityManager().startActivity(id,newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)).getDecorView();                           
        ((Activity) context).setContentView(view);          

    }
    catch(Exception e)
    {
        Log.v("ERRR",e.toString());
    }

} 
```

这工作正常...

但是我想跳入“详细”活动，当我在那里时，我想用特殊参数跳回（使用按钮，而不是后退按钮）到概览活动中。在 2 次跳转后，我得到一个 stackoverflow错误，但为什么？

概述城市：

```
Intent i1 = new Intent(context,Detailed.class);  
replaceContentView("Detaield",i1); 
```

在“详细活动”中，我使用它来跳回：

```
Intent i1 = new Intent(context,Overview.class);  
i1.putExtra("extradata","try");
replaceContentView("Overview",i1); 
```

# jquery - 根据条件显示 Div

> ID：12493168
> 
> 赞同：0
> 
> 时间：2012-09-19T10:45:56.677
> 
> 标签：jquery

我已经看到当用户滚动到页面末尾时显示 div 的页面。当用户开始向上滚动时，div 消失。我怎样才能在 jQuery 中做到这一点。我正在使用 v1.8

到目前为止，我已经尝试过了

```
if($(window).scrollTop() + $(window).height() == $(document).height()) {
       alert('bottom')
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:57:41.667

您必须在滚动时检查：

```
var $win = $(window),
    $doc = $(document),
    $target = $('#target');
// save relevant elements so they don't have to be selected on each scroll call

$win.scroll(function() {
    $win.scrollTop() + $win.height() == $doc.height()
    ? $target.show()
    : $target.hide();
}); 
```

[jsfiddle](http://jsfiddle.net/w4WEX/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T11:00:43.957

示例：http: [//jsfiddle.net/7EzUf/](http://jsfiddle.net/7EzUf/)

您将代码放在元素的`.scroll`处理程序中。`window`每当用户滚动时，都会触发该函数。

```
$(window).scroll(function(){
    if ($(window).scrollTop() + $(window).height() == $(document).height()) {
        $('#bottom').fadeIn();
    } else {
        $('#bottom').fadeOut();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:57:17.020

看到它在这里工作[jsFiddle](http://jsfiddle.net/LcwEq/)

当您击中底部时会出现警报 div，否则会隐藏

# c# - C# Windows 安全中心设置

> ID：12493170
> 
> 赞同：4
> 
> 时间：2012-09-19T10:45:58.423
> 
> 标签：c#, security, api, interface, center

我想禁用 Windows 中的操作中心消息。我知道注册表在哪里保存这些检查的值，但这些是特定于机器的。而且我知道我可以禁用整个服务。但我不想禁用该服务，我只想不显示通知/警报/消息。

要查看这些选项，我正在谈论转到：cmd.exe -> RunDll32.exe shell32.dll,Control_RunDLL wscui.cpl

安全中心将启动并单击左侧的“更改操作中心设置”。

现在我在我的 C# 项目中引用了“C:\Windows\System32\wscui.cpl”并添加了

```
using SecurityCenterAdmin; 
```

我知道我可以创建这个对象

```
SecurityCenterAdmin.WscAdmin admin = new WscAdmin();
admin.DoModalSecurityAction(); 
```

但我找不到关于它的参考资料。在 Google 上搜索“WscAdmin msdn”或“SecurityCenterAdmin”不会产生任何结果。

有什么提示吗？

提前致谢。麦克风

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T14:09:20.650

您描述的行为与恶意软件可能采取的行为一致，因此系统应该积极禁止这种行为。

似乎存在用于与 Windows 安全中心交互的私有 API。如此处所述，[此](https://stackoverflow.com/questions/7050095/how-to-make-windows-recognize-my-app-as-a-firewall-product)接口受 NDA 约束，如果您的应用程序对其有合法要求，可以通过联系 Microsoft 获得（请参阅上述帖子的答案中的详细信息）。

还有一个用于查询 WSC 的公共 API：[documentation](http://msdn.microsoft.com/en-us/library/gg537273%28v=vs.85%29.aspx)、[sample](http://code.msdn.microsoft.com/windowsdesktop/Windows-Security-Center-e4bcb429/view/SourceCode#content)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:41:29.440

如果您不愿意通过适当的渠道访问 API (wscisv@microsoft.com)。您可以随时尝试机器人处理该过程。

*   使用Process.Start打开动作中心，你似乎已经有了命令行“RunDll32.exe shell32.dll,Control_RunDLL wscui.cpl”。
*   使用 FindWindow 和 FindWindowEx API 函数来获取窗口和控制句柄。[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499%28v=vs.85%29.aspx)您需要使用“Microsoft SPY++”Windows SDK 工具来获取课程名称等
*   使用 SendMessage API 模拟鼠标消息到窗口/控件[http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx) WM_LBUTTONDOWN、WM_LBUTTONUP、WM_MOUSEMOVE 等等等。使用 SPY++ 也将有助于这个过程。

如果您在没有正确通知用户的情况下执行此操作，那么您的软件是非常阴暗的 - 恶意软件。我可以看到实际用途，作为贵公司可以用来快速配置独立桌面或其他东西的内部程序，但这确实是一个延伸。

# java - Tomcat 6.0.35 上的 Spring Web Flow 使用 Eclipse Indigo

> ID：12493175
> 
> 赞同：1
> 
> 时间：2012-09-19T10:46:18.703
> 
> 标签：java, spring, jakarta-ee, spring-webflow

我是春天的新手。我正在尝试使用 Tomcat 上的 Spring web flow 运行一个名为 library 的自学项目。作为 IDE，我使用 Eclipse Indigo。

我的项目的 WebContent 文件夹结构如下：

```
 WebContent
    pages
        welcome
            - introduction.jsp
            - menu.jsp
            - welcome.jsp
            - welcome.xml
    WEB-INF
        - library-service.xml
        - library-servlet.xml
        - library-webflow.xml
        - web.xml
        lib
            - commons-logging.jar
            - jstl.jar
            - ognl-2.6.9.jar
            - org.springframework.binding-2.0.9.RELEASE.jar
            - org.springframework.js-2.0.9.RELEASE.jar
            - org.springframework.webflow-2.0.9.RELEASE.jar
            - spring.jar
            - spring-webmvc.jar
            - standard.jar 
```

作为内容**web.xml**，它如下：

```
<display-name>library</display-name>

<context-param>
    <param-name>contextConfigLocation</param-name>
<param-value>/WEB-INF/library-service.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>library</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>library</servlet-name>
    <url-pattern>/pages/*</url-pattern>
</servlet-mapping> 
```

**library-servlet.xml**的内容如下：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <import resource="library-webflow.xml" />   

</beans> 
```

我使用**library-service.xml**从服务层向 bean 声明。其内容如下：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

<bean name="libraryService"
    class="com.library.service.LibraryService" />

</beans> 
```

作为welcome.jsp页面的内容，如下：

```
<html>
<head>
<title>Welcome</title>
</head>
<body>
    <h2>Welcome!</h2>
    <a href="${flowExecutionUrl}&_eventId=next">Next</a>
    <a href="${flowExecutionUrl}&_eventId=skip">Skip</a>
</body>
</html> 
```

由于**welcome.xml**的内容是：

```
<flow xmlns="http://www.springframework.org/schema/webflow"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/webflow
    http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <view-state id="welcome">
        <transition on="next" to="introduction" />
        <transition on="skip" to="menu" />
</view-state>

    <view-state id="introduction">
        <transition on="next" to="menu" />
    </view-state>

    <view-state id="menu" />
</flow> 
```

我的问题是，当我运行welcome.jsp 时，在Tomcat 中出现以下嵌套错误。我正在使用 Tomcat 6.0.35。

```
Sep 19, 2012 4:41:11 PM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet library threw exception
java.lang.NullPointerException
    at org.springframework.webflow.conversation.impl.ContainedConversation.unlock(ContainedConversation.java:107)
    at org.springframework.webflow.execution.repository.support.ConversationBackedFlowExecutionLock.unlock(ConversationBackedFlowExecutionLock.java:55)
    at org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:178)
    at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    at org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController.java:174)
    at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:236)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:257)
    at org.springframework.webflow.mvc.servlet.ServletMvcView.doRender(ServletMvcView.java:50)
    at org.springframework.webflow.mvc.view.AbstractMvcView.render(AbstractMvcView.java:180)
    at org.springframework.webflow.engine.ViewState.render(ViewState.java:282)
    at org.springframework.webflow.engine.ViewState.refresh(ViewState.java:241)
    at org.springframework.webflow.engine.ViewState.resume(ViewState.java:219)
    at org.springframework.webflow.engine.Flow.resume(Flow.java:545)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:259)
    at org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169)
    at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    at org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController.java:174)
    at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)

Sep 19, 2012 4:41:11 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet library threw exception
java.lang.NullPointerException
    at org.springframework.webflow.conversation.impl.ContainedConversation.unlock(ContainedConversation.java:107)
    at org.springframework.webflow.execution.repository.support.ConversationBackedFlowExecutionLock.unlock(ConversationBackedFlowExecutionLock.java:55)
    at org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:178)
    at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    at org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController.java:174)
    at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:55:27.193

尝试将 webflow XML 添加到 web.xml：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/library-service.xml, /WEB-INF/library-webflow.xml</param-value>
</context-param> 
```

# eclipse - Eclipse - “虚拟”资源

> ID：12493179
> 
> 赞同：5
> 
> 时间：2012-09-19T10:46:34.193
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, cnf

我正在编写一个使用虚拟树状文件结构的插件。基本上，它就像一个包含文件的标准文件系统，不同之处在于这些文件实际上并不存在于文件系统的特定位置，而仅仅是 java 对象。

这些目前由使用*SettingProvider*的导航器（使用通用导航器框架的自定义实现）支持，并且与这些对象的交互就像与标准文件的交互一样实现。

但是，现在有必要在这些对象上粘贴标记。据我了解 Eclipse 框架，标记只能附加到 *IResource*s，因此为了实现此目标，我应该创建*IResource*的实例，而不是使用 *SettingProvider*s 。

但是，标准实现只允许从文件系统创建资源。由于存在诸如虚拟文件夹之类的东西，因此必须有可能创建虚拟资源，即在文件系统中没有实际位置的资源。但是我该怎么做呢？我的研究似乎毫无进展……

或者，是否有可能以不同的方式实现所需的功能（将标记粘贴到 CNF 导航器中的对象）？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:04:00.757

对，标记只能附加到工作区中的资源。为了实现自定义文件系统，Eclipse 提供了 EFS 机制，以提供“类文件”结构，有关详细信息，请参阅[http://wiki.eclipse.org/EFS](http://wiki.eclipse.org/EFS) - 在此页面上，您还可以找到示例链接实现应该让您了解如何实现自己的文件系统贡献者。但是：恕我直言，在您的场景中使用 Eclipses 标记系统是错误的方法。所有东西都与工作空间模型紧密耦合，而工作空间模型不能很好地与自定义数据模型配合使用。根据我的经验，最好的方法是

1.  拥有完全适合您的数据模型的自己的标记模型，
2.  为你的树实现一个装饰器（通过扩展点）
3.  实现类似问题视图的东西来可视化标记。

虽然实现已经存在的类似东西听起来有点奇怪，但它会为您省去很多麻烦，因为您的场景不受工作区模型和 api 边界的限制。

# haskell - 输入'<-'上的haskell解析错误

> ID：12493180
> 
> 赞同：0
> 
> 时间：2012-09-19T10:46:37.220
> 
> 标签：haskell

当我运行这段代码时，有一个问题让我很困惑

```
data Tree a = Nil | Node a (Tree a) (Tree a)
type IntTree = Tree Int
type Counter = State Int

withCounter::Int -> Counter a -> a
withCounter init f = fst(runState f init)

nextCount::Counter Int
nextCount = do
    n <- get
    put (n+1)
    return n

incTree::IntTree -> IntTree
incTree tree = withCounter 1 (IncTree' tree)
incTree' Nil = return 0
incTree' (Node l e r) = do
    newl <- incTree' l
    n <- nextCount
    newr <- incTree' r
    return (Node newl (e+n) newr) 
```

错误如下：

```
parse error on input '<-' 
```

它似乎在第 27 行提出，即 'n <- nextCount'

有谁知道我为什么会收到这个错误？谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T11:02:51.177

由于您似乎没有直接复制和粘贴代码，答案可能是您混合了制表符和空格。

不要使用制表符：仅使用空格缩进。

# ruby-on-rails - 在应用程序中使用部分 Rails 引擎

> ID：12493185
> 
> 赞同：4
> 
> 时间：2012-09-19T10:46:46.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, partial, rails-engines

我在名为**'Parent'**的应用程序中使用了一个名为**'Child'**的导轨可安装引擎。

 **我有**部分“孩子/用户/_index.html.erb”**

现在我想在父控制器中**渲染**这个**孩子的部分**。是否可以？

意味着我想做类似的事情

```
render :partial => 'child/user/index.html.erb' 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T11:13:17.713

参考[这个](http://api.rubyonrails.org/v2.3.8/classes/ActionController/Base.html#M000460)

```
render :file => 'child/user/index.html.erb' 
###or try '/child/user/index.html.erb' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:37:05.000

我想你可以`render user/index`

参考[http://edgeguides.rubyonrails.org/engines.html](http://edgeguides.rubyonrails.org/engines.html)

> 引擎无法找到呈现评论所需的部分。Rails 首先在应用程序的（test/dummy）app/views 目录中查找，然后在引擎的 app/views 目录中查找。当它找不到它时，它会抛出这个错误。引擎知道查找 blorgh/comments/comment，因为它接收的模型对象来自 Blorgh::Comment 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-07T12:23:13.793

这对我有用：

```
render file: 'child/user/_index.html.erb' 
```**

# deployment - jenkins - 哪个插件复制工件并可以作为输入用户凭据获取到远程机器

> ID：12493186
> 
> 赞同：0
> 
> 时间：2012-09-19T10:46:49.640
> 
> 标签：deployment, jenkins, jenkins-plugins, autodeploy

是我还是没有 Jenkins 插件可以简单地获取您的 DLL 并将其复制到具有预定义域用户密码的远程计算机 (UNC)？

我想我在这里错过了一些东西，无法对需要这些凭据的机器执行简单的部署（ArtifactsDeployer 等）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:01:41.217

我认为[CIFS Publisher](https://wiki.jenkins-ci.org/display/JENKINS/CIFS-Publisher+Plugin)插件提供了您正在寻找的功能。

> 此插件使用 CIFS (SMB) 协议将构建工件上传到存储库站点。首先，您应该在 Hudson 全局配置页面中定义 CIFS 共享。之后，您可以使用项目配置中的选择列表来引用共享。

* * *

**更新**抱歉，我刚刚注意到 CIFS Publisher 已被弃用，取而代之的是[Publish over CIFS](https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+CIFS+Plugin)插件，该插件是用于不同协议的发布者插件的公共集合的一部分。在任何情况下，都支持“复制到远程 CIFS 共享”功能。

# python - 列表过滤的python语法错误

> ID：12493193
> 
> 赞同：2
> 
> 时间：2012-09-19T10:47:03.070
> 
> 标签：python

我正在尝试从列表中过滤项目，但出现语法错误： **SyntaxError: invalid syntax**

编码：

```
a['name'] = 'Dan'
b['name'] = 'Joe'

ppl = [a,b]
inputName = raw_input('Enter name:').strip()
person = [p in ppl if p['name']==inputName].pop() 
```

任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T10:49:15.997

`[item for item in array]` 不是 `[item in array]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:59:58.390

首先，如果你想使用'name'键，你应该使用字典而不是列表。它应该看起来像这样

```
 a = {'name':'Dan'}
    b = {'name':'Joe'}
    ppl = [a,b]
    for p in ppl:
        if(p['name']==inputName):
            person=ppl.pop(ppl.index(p)) 
```

也许有更好的方法，更pythonic，但这个工作;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T20:47:07.020

我同意 Bogna Anna Ka，使用字典。

在我看来，这更像是pythonic：

```
a = {'name':'Dan'}
b = {'name':'Joe'}
ppl = [a,b]
for key, value in ppl.iteritems()
    if(key == inputName):
        person = value 
```

您遍历键值对而不是创建键列表并遍历它们（**对于 ppl 中的 p：**隐式执行）并执行 get()、pop() 和 index()

# mysql - CI 数据库名称

> ID：12493195
> 
> 赞同：0
> 
> 时间：2012-09-19T10:47:12.383
> 
> 标签：mysql, database, codeigniter, database-design, database-connection

我在 Codeigniter 中连接数据库时遇到问题，因为我的数据库名称是“database-db_sample”，所以我想知道我的数据库名称中的 -(hypen) 是否是我出错的原因，

这是我得到的错误

> 发生数据库错误
> 
> 无法选择指定的数据库：database-db_sample

谁能告诉我我做错了什么，这是我的数据库配置

```
$db['online']['hostname'] = "localhost";
$db['online']['username'] = "root";
$db['online']['password'] = "";
$db['online']['database'] = "database-db_sample";
$db['online']['dbdriver'] = "mysql";
$db['online']['dbprefix'] = "";
$db['online']['pconnect'] = TRUE;
$db['online']['db_debug'] = TRUE;
$db['online']['cache_on'] = FALSE;
$db['online']['cachedir'] = "";
$db['online']['char_set'] = "utf8";
$db['online']['dbcollat'] = "utf8_general_ci";
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T23:39:16.110

您的问题是您没有为 root 设置适当的权限，或者 mySQL 不喜欢您使用连字符。

所以如果你想从 phpMyAdmin 开始新的。首先转到您的 localhost->phpMyAdmin->privileges 选项卡->添加新用户。输入用户名并使用 localhost，然后选中“创建具有相同名称的数据库...”复选框。而已！**只是不要使用连字符**。您的数据库将具有与您的用户名相同的名称，并具有所有适当的权限。

# php - 在没有 gcm 服务的情况下更新数据库的 Android 通知

> ID：12493196
> 
> 赞同：0
> 
> 时间：2012-09-19T10:47:19.903
> 
> 标签：php, android, mysql

谢谢你的演示，

我已经做了 。但现在我想在我的数据库更新时在 android 中发出通知，然后应该在我的 android 中生成通知邮件。

我不想使用 GCM 服务。所以请给我一个更好的方法。

谢谢拉胡尔拉瓦特

# javascript - Facebook 登录未在 Safari/iPhone 中打开

> ID：12493198
> 
> 赞同：5
> 
> 时间：2012-09-19T10:47:28.700
> 
> 标签：javascript, safari, popup, facebook-javascript-sdk

我正在创建一个显示 Facebook 朋友的应用程序。首先，用户需要点击登录按钮，然后在填写登录ID和密码后会出现一个简单的弹出屏幕，它将显示好友列表。
一切正常，可在 Firefox、Chrome、IE 上运行，但不会在 Safari 和 iPhone 中打开弹出窗口。
有人建议我在`channelUrl`. 我创建了一个`channel.html`并添加了参考，但它对我没有帮助。
我搜索了很多，但没有发现有帮助。

这是我的代码。
自定义.js

```
function getUser()
{
FB.init({
    appId      : '289403314507596', // App ID
    channelUrl : 'http://bc2-236-161.compute-1.amazonaws.com/html/channel.html', // Channel File
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
});

 (function(d){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all.js";
 ref.parentNode.insertBefore(js, ref);
 }(document));

//check current user login status
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        window.location="facebook_friend.html"
        loadFriends();
    } else {
        //user is not connected.
        FB.login(function(response) {
            if (response.authResponse) {
                window.location="facebook_friend.html"
                loadFriends();
            } else {
                alert('User cancelled login or did not fully authorize.');
            }
        });
    }
 });
 }
//start from here
 $(document).ready(function(){
$('.load-button').click(function(){
    getUser();
});
}); 
```

频道.html

```
<script src="//connect.facebook.net/en_US/all.js"></script>// i add this line in channel.html 
```

refer_friend.html
我`custom.js`在这个文件中添加了引用

```
 <div id="fb-root"></div>
   <script src="http://connect.facebook.net/en_US/all.js"></script>
   <img src="includes/fb-btn1.png" class="load-button" style="
    width: 290px;
    Height: 40px;
    margin-top: 5px;"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T05:54:27.127

好的......在浪费了我一整天之后，我得到了答案。使用`Javascript_Facebook Sdk`，当您单击登录按钮时，它将打开弹出窗口。在 Safari 或 iPhone（我的）中，我启用了 Block-popup 选项。
因此我无法看到 Facebook 登录窗口。您需要允许弹出窗口。
您可以通过单击允许弹出窗口

```
Safari-disable Block pop-up windows 
```

或者

```
 safari-preference-then disable checkbox of pop-up window's 
```

或者您可以使用键盘快捷键：

```
shift-[command key]-K. 
```

干杯。

# c++ - 在 C++/CLI 中使用 unique_ptr 时出现链接器错误

> ID：12493203
> 
> 赞同：9
> 
> 时间：2012-09-19T10:47:48.203
> 
> 标签：c++, visual-studio-2010, c++11, c++-cli, unique-ptr

我目前正在将我的实例转换`auto_ptr`为`unique_ptr`，但我遇到了一个问题。它在代码的 C++ 部分中运行良好，但是在我的托管 C++/CLI 层中执行此操作时（该软件同时使用 C# 和 C++）我得到链接错误。它编译得很好，但在链接时会中断。从来没有任何问题`auto_ptr`。

我目前正在使用 Visual Studio 2010。有人知道`unique_ptr`在 C++/CLI 中使用的任何问题吗？

我试图在下面的一段代码中总结我的问题，但请注意下面的代码*实际上可以编译和工作*（我检查了指针的所有权是否正确移动）。编译时我没有收到链接错误，但下面的代码是纯 C++ 而不是 C++/CLI。我只是想有一个关于如何构造代码的最小示例，以便链接器错误更易于阅读。

```
#include "stdafx.h"
#include <vector>
#include <memory>
#include <utility>

using namespace std;

namespace Test {

template< class T >
struct LinAlgPoint3 {
  LinAlgPoint3() { x = y = z = 0; };

  union {
    struct {T x,y,z;} ;
    T data_[3];
  };
};

class ContainerClass
{
public:
  void setUniquePtr(
    unique_ptr< vector< LinAlgPoint3< float > > > newUniquePtr1 ,
    unique_ptr< vector< unsigned char > > newUniquePtr2 )
  {
    m_uniquePtr1 = move(newUniquePtr1);
    m_uniquePtr2 = move(newUniquePtr2);
  }

private:
  unique_ptr< vector< LinAlgPoint3< float > > > m_uniquePtr1;
  unique_ptr< vector< unsigned char > > m_uniquePtr2;
};

int main(int argc, char** argv)
{
  auto pos = unique_ptr< vector< LinAlgPoint3< float > > >( new vector< LinAlgPoint3< float > >() );
  auto name = unique_ptr< vector< unsigned char > >(new vector< unsigned char >());
  ContainerClass container;
  container.setUniquePtr(move(pos), move(name));
}

} //namespace Test 
```

链接时出现的错误如下：

```
error LNK2028: unresolved token (0A0018A5) "private: __cdecl std::unique_ptr<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > >,struct std::default_delete<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > > > >::unique_ptr<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > >,struct std::default_delete<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > > > >(class std::unique_ptr<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > >,struct std::default_delete<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > > > > const &)" (??0?$unique_ptr@V?$vector@U?$LinAlgPoint3@M@Test@@V?$allocator@U?$LinAlgPoint3@M@Test@@@std@@@std@@U?$default_delete@V?$vector@U?$LinAlgPoint3@M@Test@@V?$allocator@U?$LinAlgPoint3@M@Test@@@std@@@std@@@2@@std@@$$FAEAA@AEBV01@@Z) referenced in function "public: static void __clrcall std::unique_ptr<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > >,struct std::default_delete<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > > > >::<MarshalCopy>(class std::unique_ptr<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > >,struct std::default_delete<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > > > > *,class std::unique_ptr<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > >,struct std::default_delete<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > > > > *)" (?<MarshalCopy>@?$unique_ptr@V?$vector@U?$LinAlgPoint3@M@Test@@V?$allocator@U?$LinAlgPoint3@M@Test@@@std@@@std@@U?$default_delete@V?$vector@U?$LinAlgPoint3@M@Test@@V?$allocator@U?$LinAlgPoint3@M@Test@@@std@@@std@@@2@@std@@$$FSMXPEAV12@0@Z)
1>TestClass.obj : error LNK2028: unresolved token (0A0018A6) "private: __cdecl std::unique_ptr<class std::vector<unsigned char,class std::allocator<unsigned char> >,struct std::default_delete<class std::vector<unsigned char,class std::allocator<unsigned char> > > >::unique_ptr<class std::vector<unsigned char,class std::allocator<unsigned char> >,struct std::default_delete<class std::vector<unsigned char,class std::allocator<unsigned char> > > >(class std::unique_ptr<class std::vector<unsigned char,class std::allocator<unsigned char> >,struct std::default_delete<class std::vector<unsigned char,class std::allocator<unsigned char> > > > const &)" (??0?$unique_ptr@V?$vector@EV?$allocator@E@std@@@std@@U?$default_delete@V?$vector@EV?$allocator@E@std@@@std@@@2@@std@@$$FAEAA@AEBV01@@Z) referenced in function "public: static void __clrcall std::unique_ptr<class std::vector<unsigned char,class std::allocator<unsigned char> >,struct std::default_delete<class std::vector<unsigned char,class std::allocator<unsigned char> > > >::<MarshalCopy>(class std::unique_ptr<class std::vector<unsigned char,class std::allocator<unsigned char> >,struct std::default_delete<class std::vector<unsigned char,class std::allocator<unsigned char> > > > *,class std::unique_ptr<class std::vector<unsigned char,class std::allocator<unsigned char> >,struct std::default_delete<class std::vector<unsigned char,class std::allocator<unsigned char> > > > *)" (?<MarshalCopy>@?$unique_ptr@V?$vector@EV?$allocator@E@std@@@std@@U?$default_delete@V?$vector@EV?$allocator@E@std@@@std@@@2@@std@@$$FSMXPEAV12@0@Z)
1>TestClass.obj : error LNK2019: unresolved external symbol "private: __cdecl std::unique_ptr<class std::vector<unsigned char,class std::allocator<unsigned char> >,struct std::default_delete<class std::vector<unsigned char,class std::allocator<unsigned char> > > >::unique_ptr<class std::vector<unsigned char,class std::allocator<unsigned char> >,struct std::default_delete<class std::vector<unsigned char,class std::allocator<unsigned char> > > >(class std::unique_ptr<class std::vector<unsigned char,class std::allocator<unsigned char> >,struct std::default_delete<class std::vector<unsigned char,class std::allocator<unsigned char> > > > const &)" (??0?$unique_ptr@V?$vector@EV?$allocator@E@std@@@std@@U?$default_delete@V?$vector@EV?$allocator@E@std@@@std@@@2@@std@@$$FAEAA@AEBV01@@Z) referenced in function "public: static void __clrcall std::unique_ptr<class std::vector<unsigned char,class std::allocator<unsigned char> >,struct std::default_delete<class std::vector<unsigned char,class std::allocator<unsigned char> > > >::<MarshalCopy>(class std::unique_ptr<class std::vector<unsigned char,class std::allocator<unsigned char> >,struct std::default_delete<class std::vector<unsigned char,class std::allocator<unsigned char> > > > *,class std::unique_ptr<class std::vector<unsigned char,class std::allocator<unsigned char> >,struct std::default_delete<class std::vector<unsigned char,class std::allocator<unsigned char> > > > *)" (?<MarshalCopy>@?$unique_ptr@V?$vector@EV?$allocator@E@std@@@std@@U?$default_delete@V?$vector@EV?$allocator@E@std@@@std@@@2@@std@@$$FSMXPEAV12@0@Z)
1>TestClass.obj : error LNK2019: unresolved external symbol "private: __cdecl std::unique_ptr<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > >,struct std::default_delete<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > > > >::unique_ptr<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > >,struct std::default_delete<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > > > >(class std::unique_ptr<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > >,struct std::default_delete<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > > > > const &)" (??0?$unique_ptr@V?$vector@U?$LinAlgPoint3@M@Test@@V?$allocator@U?$LinAlgPoint3@M@Test@@@std@@@std@@U?$default_delete@V?$vector@U?$LinAlgPoint3@M@Test@@V?$allocator@U?$LinAlgPoint3@M@Test@@@std@@@std@@@2@@std@@$$FAEAA@AEBV01@@Z) referenced in function "public: static void __clrcall std::unique_ptr<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > >,struct std::default_delete<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > > > >::<MarshalCopy>(class std::unique_ptr<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > >,struct std::default_delete<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > > > > *,class std::unique_ptr<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > >,struct std::default_delete<class std::vector<struct LinAlgPoint3<float>,class std::allocator<struct LinAlgPoint3<float> > > > > *)" (?<MarshalCopy>@?$unique_ptr@V?$vector@U?$LinAlgPoint3@M@Test@@V?$allocator@U?$LinAlgPoint3@M@Test@@@std@@@std@@U?$default_delete@V?$vector@U?$LinAlgPoint3@M@Test@@V?$allocator@U?$LinAlgPoint3@M@Test@@@std@@@std@@@2@@std@@$$FSMXPEAV12@0@Z)
1>D:\Test\Test.dll : fatal error LNK1120: 4 unresolved externals 
```

正如您所看到的（如果您可以通过令人难以置信的可怕消息），有一些对 MarshalCopy 的引用，这让我担心 C++/CLI 可能还不支持 unique_ptr。

软件的布局是

```
C# executable -> C++/CLI translation layer (dll) -> C++ dll 
```

所以 C++ dll 使用 unique_ptr 编译得很好，但是 C++/CLI dll 无法正确链接。

我忘了提到一些非常重要的事情：如果我将 unique_ptr 用于更简单的数据类型，例如字符串，它会成功链接。例如：

```
 auto string1= unique_ptr< string >(new string(20000, 'S'));
  auto string2 = unique_ptr< string >(new string(20000, 'A'));
  string1= std::move(string2); 
```

而且我还尝试确保使用该变量，以便编译器不会对其进行优化。

**编辑：**我刚刚测试了添加另一个接受 a 的外部函数`unique_ptr<string>`，并且我尝试在上面发送`string1`并且也中断了！所以问题必须在生成的 DLL 之间，因为 std::move() 在每个文件/类中都能很好地工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T08:54:26.033

好吧，不知道它现在有多相关，但我在 C++/CLI 上遇到了完全相同的问题，并通过采用 r-value 引用而不是 value 来解决它。我的意思是： void setUniquePtr(unique_ptr **&&** a, unique_ptr **&&** b)

这种方式虽然不是最干净的做事方式，但它可以编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:24:36.460

阅读那个复杂的错误消息，我认为它抱怨`LinAlgPoint3`结构没有复制构造函数。尝试实现复制构造函数，也许还有运算符`=`and `==`，看看是否能解决它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T20:07:24.273

您不能在 DLL 之间传递 C++ 对象并期望它正常工作。

不同模块中的内存布局可能不同。几乎可以肯定使用了不同的分配器（这会击落任何拥有内存的 C++ 类型，包括`string`、`vector`和`unique_ptr`）。

使用指向纯虚拟基类的指针可以帮助解决这个问题。

或者，如果您有 C++ 部分的源代码，请尝试将 C++ 和 C++/CLI 链接到单个 DLL 中，而不是在单独的 DLL 中引用 C++ 代码。

# javascript - 通过 iframe 进行响应式设计

> ID：12493204
> 
> 赞同：0
> 
> 时间：2012-09-19T10:47:48.547
> 
> 标签：javascript, jquery

通过 iframe 查看的网站响应式设计似乎不起作用。我想更改孩子的宽度 css 以使其正确适合

这是我尝试过的：

```
<script type='text/javascript'>
  $(document).ready(function(){
                       $("##frameDemo").contents().find("body").css("width","100px");
   });
                    </script> 

    <iframe src="http://www.domain.com?ID=#getincentiveID()#" width="80%" height="100" id='frameDemo'></iframe> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T10:51:13.923

我可以在那里看到几个错误：`$("##frameDemo")`应该是`$("#frameDemo")`.

然后，如果`src="http://www.domain.com..."`指向外部域，则无法使用 JavaScript 访问 DOM 内容。

* * *

您可以使用 php 获取远程页面内容：

```
$url = 'http://www.domain.com?ID=#getincentiveID()#';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$page = curl_exec($ch);
curl_close($ch); 
```

然后您将页面内容存储在`$page`.

# zip - 包含隐藏文件的 Zip

> ID：12493206
> 
> 赞同：96
> 
> 时间：2012-09-19T10:48:04.707
> 
> 标签：zip, hidden-files

在 Linux 中，我可以通过以下方式压缩当前目录中的所有（隐藏文件除外）：

```
zip 1.zip * 
```

但是如何包含隐藏文件？

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-09-19T10:50:11.010

**编辑：**正确的方法是`zip -r 1.zip .`

下面我之前的答案中显示的命令不正确，因为它们还包括父目录。

* * *

你有没有试过这个：

```
zip yourfile.zip sourcedir/* .* 
```

或者你在你的情况下

```
zip 1.zip * .[^.]*' 
```

它还应该包括所有隐藏文件。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-03-24T06:56:16.427

或者你可以添加更简单的

```
zip 1.zip ./ 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-08-05T07:03:13.437

只是为了确保它不会被遗忘，因为这是一个开发人员论坛，我们很多人都使用 git。

在 zip 中只获取您想要的内容的一种简单方法是使用`git archive -o filename.zip branch`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-01-14T02:24:48.697

如果要压缩所有文件（+隐藏文件），请使用： zip -r namefiles.zip 。这 ”。” 是文件夹中的所有文件。

```
zip -r namefiles.zip "folder will zip" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-04-05T10:43:22.193

在 macOS 10.15.7 上，我必须分别添加所有点前导文件 ( `\.*`) 和其余文件 ( `*`)：

```
zip -r file.zip \.* * 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-03T19:13:15.977

如果您无权将 zip 文件保存在当前目录中，您可以转到您有权限的目录并键入

```
zip -r 1.zip /path/to/source/dir/. 
```

但是，当`.../some_dir`您输入时

```
unzip 1.zip 
```

然后你的文件将被解压成 `.../some_dir/path/to/source/dir/`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-03T20:32:22.303

如果您想使用隐藏和常规文件递归地保存当前目录的某些子目录，只需键入

```
zip -r backup-subdirectory.zip backup-subdirectory/. backup-subdirectory/* 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-03-04T18:38:02.973

```
zip -r 1.zip .* -x "../*" 
```

只是这样做`zip -r 1.zip .*`也会包括父文件夹，所以诀窍是使用排除父文件夹`-x "../*"`

# php - 使用 CodeIgniter 的文件上传类进行文件上传和数据输入

> ID：12493210
> 
> 赞同：0
> 
> 时间：2012-09-19T10:48:15.037
> 
> 标签：php, codeigniter

我正在开发一种允许用户上传图像和数据的表单。我以前构建过表单，但正在尝试将文件上传类与我以前的控制器集成。

下面是我的视图中的控制器、模型和表单，有人可以帮我补上缺失的链接吗？我已经搜索了所有并没有找到解决方案

```
class Canvas extends CI_Controller {

function __construct() {
    parent::__construct();
                  $this->load->helper(array('form', 'url'));

}

function index() {
            $vars = array();
            $this->load->library('FacebookConnect');
            $facebook=$this->facebookconnect->connect();
            $vars['facebook'] = $facebook;
            $user = $vars['user'] = $facebook->getUser();
            $this->load->model('Users_Model'); 
            if($user != 0  && sizeof($_POST)>0) {
                // user already set up. Show thank you page
                $this->iterate_profile ($vars['user'],false,$_POST);
                $this->load->view('upload_form',$vars);
            } else {
                // user not set, show welcome message
                $this->load->view('canvas',$vars);
            }

}
    function do_upload()
    {
        $config['upload_path'] = './uploads/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '100';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';

        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload())
        {
            $error = array('error' => $this->upload->display_errors());

            $this->load->view('upload_form', $error);
        }
        else
        {
            $data = array('upload_data' => $this->upload->data());

            $this->load->view('upload_success', $data);
        }
    }
    function thank_you() {
            $this->load->view('thank_you',$vars);
    }

    function remove() {
            $vars = array();
            $this->load->library('FacebookConnect');
            $facebook=$this->facebookconnect->connect();
            $vars['facebook'] = $facebook;
            $vars['user'] = $facebook->getUser();
            $this->load->model('Users_Model'); 
            if($vars['user'] == 0) {
                // user not set, redirect
                redirect('/', 'refresh');
            } else {
                // user already set up. Remove
                $this->load->model('Users_Model'); 
                $this->Users_Model->remove($vars['user']);
            }

            $this->load->view('removed',$vars);
    }

    protected function iterate_profile ($user,$breadcrumb,$item) {

        foreach($item as $key => $value) {
            if(is_array($value)) {
                $this->iterate_profile($user,$key,$value);
            }
            else {
                if($breadcrumb) {
                    //echo '[' . $breadcrumb . '_' . $key . ']= ' . $value . ' <br />';
                    $key = $breadcrumb . '_' . $key;
                }

                if( ! $this->Users_Model->exists($user,$key)) {
                    // does not exist in the database, insert it
                    $this->Users_Model->add($user,$key,$value);
                } else {
                    $this->Users_Model->update($user,$key,$value);
                }
            }
        }
    } 
```

模型：

```
class Users_Model extends CI_Model {
protected $_name = 'users';

function add($id,$key,$value) {
    $data = array(
       'id' => $id,
       'name' => $key,
       'value' => $value
    );

    return $this->db->insert($this->_name, $data); 
}
function update($id,$key,$value) {
    $data = array(
       'value' => $value
    );

    $this->db->where(array(
       'id' => $id,
       'name' => $key
    ));
    return $this->db->update($this->_name, $data); 
}

function exists($id,$key=null) {
    if($key == null) {
        $this->db->where(array(
        'id' => $id
        ));
    } else {
        $this->db->where(array(
        'id' => $id,
        'name' => $key
        ));  
    }

    $query = $this->db->get($this->_name);
    if($query->num_rows() > 0) {
        return true;
    }
    return false;
}

function remove($id) {
    $data = array(
       'id' => $id,
    );

    return $this->db->delete($this->_name, $data); 
}

function all() {
    $query = $this->db->get($this->_name);
    $results = array();
    if($query->num_rows() > 0) {
        foreach($query->result() as $row) {
            $results[]=$row;
        }
    } 
    return $results;  
} 
```

}

视图中的表格：

```
 <form action="./" method="post" accept-charset="utf-8" enctype="multipart/form-data">
              <table>
                    <tr><td><b class="ara">XXXXXXXX</b> <input id="name" type="text" name="uid" value="" size="30"></td></tr>
                    <tr><td><b class="ara">XXXXXXXX</b><input id="dob" type="text" name="date_of_birth" value="" size="30"></td></tr>
                    <tr><td><b class="ara" >XXXXXXXX</b><input id="email" type="text" name="email" value="" size=30></td></tr>
                    <tr><td><b class="ara">XXXXXXXX</b> <input id="tel" type="text" name="telephone" value="" size="30"></td></tr>
                    <tr><td><input type="radio" name="device" value="11" checked><b>XXXXXXXX</b></input>
                                  <input type="radio" name="device" value="305"><b>XXXXXXXX</b></input>
                                  <input type="radio" name="device" value="306"><b>XXXXXXXX</b></input></td></tr>
                    <tr><td><b>XXXXXXXX</b><select name="reason"> 
                    <option value="volvo">XXXXXXXX</option> 
                    <option value="saab">XXXXXXXX</option> 
                    <option value="mercedes">XXXXXXXX</option> 
                    <option value="audi">XXXXXXXX</option></select></td></tr>
                    <tr><td><b>XXXXXXXX</b><select name="game">
                    <option value="chuzzle">XXXXXXXX</option> 
                    <option value="tetris">XXXXXXXX</option> 
                    <option value="speed">XXXXXXXX</option></select></td></tr>
                    <tr><td><input type="file" name="userfile" class="upload" size="30"/></td></tr>
                    <tr><td><span class="ara tandc">XXXXXXXX</span></td><td><input id="checkme" type="checkbox" class="check" name="Check me" value="Submit"/></td></tr>
                    <tr><td><b><input type="button" class="btn" id="send" name="Add me" value="Submit"/></td></tr>
              </table>
        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:08:12.053

你实际上得到了什么错误？我第一眼看到的一个问题是表单提交给`./`, not `do_upload`，所以代码可能永远不会运行？

从 index() 运行 do_upload() 并更改它，使其根据成功返回 true/false。如果出现错误，请将其保存到类变量中，如下所示：

```
class Canvas extends CI_Controller {

    private $upload_error = '';

    function __construct() {
    ... 
```

然后在 中`do_upload()`，而不是这样做：

```
$error = array('error' => $this->upload->display_errors()); 
```

你可以做：

```
$this->upload_error = array('error' => $this->upload->display_errors()); 
```

而在 中`index()`，如果调用结果`do_upload()`为假，则从`$this->upload_error`

总体而言，您的`do_upload()`方法如下所示：

```
 function do_upload()
    {
        $config['upload_path'] = './uploads/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '100';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';

        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload())
        {
            $this->upload_error = array('error' => $this->upload->display_errors());

            return false;
        }
        else
        {
            //$data = array('upload_data' => $this->upload->data());
            return true;
        }
    } 
```

# visual-studio-2010 - 编辑和打包没有解决方案文件的 DNN 模块

> ID：12493214
> 
> 赞同：1
> 
> 时间：2012-09-19T10:48:39.063
> 
> 标签：visual-studio-2010, dotnetnuke

我最近获得了一个 DotNetNuke 模块来编辑和发布回网站。但是，我得到的模块文件夹缺少 Visual Studio 解决方案文件。它包含所有单独的 cs 文件，因此我可以一个一个地打开它们，但没有模块的整体文件，所以我不确定如何在完成更改后重新打包和部署更改。

我尝试创建一个空白解决方案来添加项目，但是当我尝试执行此操作时出现错误，如下所示：

*无法读取项目文件“...csproj”。未找到导入的项目“....nuget\nuget.targets”。确认<Import>声明中的路径是正确的，并且该文件存在于磁盘上*

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:49:19.533

该模块可能已构建为 WSP 类型的项目，其中没有编译的 DLL，而 .NET 只是在适当的位置编译文件。如果您有一个模块包，您应该能够将模块安装到 DotNetNuke 站点，将模块添加到页面，然后只需更改 App_Code 和 DesktopModules 文件夹中的文件并刷新页面以查看更改。

完成后，您可以将更新的文件复制到 zip 包中，也可以转到主机 -> 扩展。然后编辑模块并从管理菜单中选择“创建包”，它将生成一个新包。

# java - 如何使用 guice 在 Web 应用程序中的每个请求中绑定到不同的实现

> ID：12493215
> 
> 赞同：2
> 
> 时间：2012-09-19T10:48:38.863
> 
> 标签：java, guice

我已经为一组特定的请求设置了一个过滤器，即 */dispatch 通过我的 Guice 侦听器。

在此过滤器中，我想根据请求 URI 更改每个请求中 BaseService 类型（包含一个方法的接口）的绑定。即，如果 URI 是 /hello/dispatch 我希望 BaseService 绑定到 HelloServiceImpl 否则如果 URI 是 /bye/dispatch 我想绑定到 ByeServiceImpl 。两者都实现了 BaseService 。

现在，在我参与 servlet 请求处理的随机类的某个地方，我想注入特定于当前请求的 BaseService 的适当实现。

这可能吗 ？如何 ？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:55:47.957

考虑使用工厂模式来提供不同类型的 BaseService。

```
public interface ServiceFactory
{
  public BaseService create(String uri);
}

public class ServiceFactoryImpl implements ServiceFactory
{
  @Override
  public BaseService create(String uri)
  {
    if(uri.equals("/hello/dispatch"))
      return new HelloServiceImpl();

    else if (uri.equals("/bye/dispatch"))
      return new ByeServiceImpl();

    return null;
  }
} 
```

然后是您模块中的工厂。

```
bind(ServiceFactory.class).to(ServiceFactoryImpl.class); 
```

并将其注入请求中。

# c# - 基类中的泛型：我的 Stacktrace 是否缺少一行？

> ID：12493218
> 
> 赞同：0
> 
> 时间：2012-09-19T10:48:47.330
> 
> 标签：c#, .net-3.5, stack-trace

我得到的异常堆栈跟踪是：

```
/* snip */
at SomeSystemMethod()
at Namespace.Adapters.ListAdapterBase`1.GetObjects(String where)
at Namespace.Processes.MyProcess.Run()
/* snip */ 
```

这似乎在第二行之后缺少了一些东西，因为 ListAdapterBase 是抽象的，并且方法 GetObjects 不是直接调用的，而是由子类的另一个方法调用的：

```
public class ActualStateList : ListAdapterBase<ActualState>
{
    /* snip */
    public List<ActualState> GetByUserId(int userId)
    {
        return GetObjects(string.Format(
            WHERECLAUSE_BYUSERID, userId));
    }
    /* snip */
} 
```

所以我的第一个问题是，Stacktrace 中怎么可能没有调用`ActualStateList.GetByUserId()`或其他子类或方法？

其次：该`Run()`方法使用了 ListAdapterBase 的 4 个子类，我能以某种方式找出异常发生在哪个子类中吗？ListAdapterBase 后面的数字是否以某种方式精确地导致了其中一个子类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:51:29.507

第一个问题：很可能`GetByUserId`在您的发布版本中内联，这就是堆栈跟踪中没有丢失它的原因。使用 Debug 构建应该显示该方法。

第二个问题：从您得到的 StackTrace 中，您无法推断出使用了哪个子类。数字 ( ``1`) 是类名的一部分，`ListAdapterBase`简单地说明这个类有一个通用参数。

但是有一个想法：由于 JIT 能够内联`GetByUserId`您知道某些事情：

*   JIT 在编译时知道哪个子类被用作`virtual`方法没有内联。
*   只有调用的子类`GetObjects`才是使用的特定子类的候选者
*   只有以[简单方法](http://blogs.msdn.com/b/davidnotario/archive/2004/11/01/250398.aspx)`GetObjects`调用的子类才是候选者。

这些要点可能会帮助您找到特定的子类。

`Run`添加 pdb 文件可能会有所帮助，因为它会在引发异常的方法中显示行号。发布版本也可以添加 pdb 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:53:22.543

正如丹尼尔所说，该`GetByUserId`方法似乎已被编译器内联，这就是您在堆栈跟踪中看不到它的原因。

``1`after意味着它是具有一个类型参数的`ListAdapterBase`泛型类型，这在这里当然没有帮助，因为您的所有派生类都有一个类型参数。您将无法仅从堆栈跟踪中找到它是哪一个。

# php - 如何在我的数据库中保存通过单击按钮创建的新创建的下拉列表和文本字段

> ID：12493220
> 
> 赞同：0
> 
> 时间：2012-09-19T10:49:03.377
> 
> 标签：php, javascript

我的页面上有这段代码。它通过单击按钮在一个表格行中创建一个复选框、下拉列表和文本框。我的问题是，当我单击保存按钮时，它不会保存创建的复选框、下拉列表和文本框，它只会保存页面上第一次显示的那个。函数 addRow(tableID) { var table = document.getElementById(tableID);

```
 var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var colCount = table.rows[0].cells.length;

        for(var i=0; i<colCount; i++) {

            var newcell = row.insertCell(i);

            newcell.innerHTML = table.rows[0].cells[i].innerHTML;
            //alert(newcell.childNodes);
            switch(newcell.childNodes[0].type) {
                case "text":
                        newcell.childNodes[0].value = "".id = "percent";
                        break;
                case "checkbox":
                        newcell.childNodes[0].checked = false.id = "checkbox";
                        break;
                case "create_select_box":
                        newcell.childNodes[0].selectedIndex = "0" .id = "percentage";
                        break;
            }
        }
    }
    function deleteRow(tableID) {
        try {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;

        for(var i=0; i<rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if(null != chkbox && true == chkbox.checked) {
                if(rowCount <= 1) {
                    alert("Cannot delete all the rows.");
                    break;
                }
                table.deleteRow(i);
                rowCount--;
                i--;
            }

        }
        }catch(e) {
            alert(e);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:03:26.250

为每个变量获取隐藏变量并将其发布到您的变量中。我认为这对您有帮助。

# visual-studio-2012 - visual studio 2012 终极新依赖图错误

> ID：12493221
> 
> 赞同：8
> 
> 时间：2012-09-19T10:49:04.247
> 
> 标签：visual-studio-2012

每次创建新的依赖关系图时，我都会使用 Visual Studio 2012 Ultimate 出现此错误：

```
Unable to connect to the specified database.

An exception occurred attempting to connect to a database using the following connection string:
Data Source=(LocalDB)\v11.0;AttachDbFilename=;Initial Catalog=master;
Integrated Security=True;Enlist=False;
Asynchronous Processing=True;MultipleActiveResultSets=True;Connect Timeout=30.

Check that the specified SQL Server instance exists and the service is running. 
```

我的解决方案得到正确构建，我的连接字符串是这样的：

```
<connectionStrings>
<add name="DefaultConnection" connectionString="Data Source=.;Initial Catalog=JewelryStore;Integrated Security=SSPI;" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-18T00:10:01.383

您的问题可能与您的 localDB 实例有关：

```
%localappdata%\Microsoft\Microsoft SQL Server Local DB\Instances\v11.0 
```

我遇到了同样的问题，因为当我安装 VS12 时，我的计算机不在域中，而我最近将它加入了域，并且我的用户帐户没有访问 SQL DB 的权限。
为了解决我跑的问题

```
sqllocaldb stop "v11.0" -k
sqllocaldb delete "v11.0"
sqllocaldb create "v11.0" 
sqllocaldb start "v11.0" 
```

然后我重新启动了 VS 2012，我的本地数据库现在可以使用，并且现在创建了依赖关系图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T07:29:25.350

在建议的解决方案之后，我仍然遇到错误。我必须以管理员身份执行 Visual Studio，这样才能解决问题。

# git - git无法拉取添加的文件

> ID：12493228
> 
> 赞同：0
> 
> 时间：2012-09-19T10:49:23.373
> 
> 标签：git

场景：我在名为 trip 的服务器上有一个远程分支，两个本地分支 - 都名为 trip - 在两个不同的位置，更新上述远程分支。（两个当地人都在同一个州）

问题，我刚刚在一个本地分支中创建了两个文件，然后提交并将其推送到远程分支现在我需要将这些文件从远程分支拉到另一个本地分支。但是当我说

```
git pull origin trip 
```

它说分支已经是最新的。

请问我怎样才能得到文件？谢谢你

# .net - 仅在从特定版本进行次要升级时调用 InstallShield 自定义操作

> ID：12493229
> 
> 赞同：0
> 
> 时间：2012-09-19T10:49:23.273
> 
> 标签：.net, installshield, custom-action

我只需要在从特定产品版本进行小幅升级时调用 InstallShield (2011) 自定义操作。
例如从 1.1 升级到 1.4 时应该调用它，但不能在 1.2 到 1.4、1.3 到 1.4 等期间调用。这类似于升级表，但仅用于小升级。你能指点我，如何做到这一点？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:39:03.297

我想不出任何内置的东西来做到这一点。这是一个非常紧密耦合的要求。

我的建议是您在所有小升级期间触发自定义操作，然后以编程方式确定您是否应该实际做某事。当你做某事时，你可能会留下面包屑，这样它就可以成为推动该决定的人工制品。

# git - 如何从git中的远程操作恢复错误的获取

> ID：12493230
> 
> 赞同：1
> 
> 时间：2012-09-19T10:49:31.127
> 
> 标签：git, git-fetch

我有一些带有很多遥控器的 git repo，一些远程分支是独一无二的，我没有本地跟踪分支。

今天我在更改远程 url 时犯了错误（我使用 remote1 而不是 remote2）。

在`git fetch --all`我的 remote1 被重写之后（我在提交 sha 之前看到 +）

这非常糟糕，因为我现在无法访问 remote1，而且我无法修改 url 并获取。

在这个错误的获取之后，是否可以从我的本地仓库恢复 remote1 分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:25:30.633

Git 在 reflog 中记录引用发生的所有事情（如分支提示和远程分支提示），您必须深入其中才能找到远程的先前 SHA。

要搜索 git reflog，请输入`git reflog`，然后搜索上次提到的 (refs/remotes/remote/branch)。它会给你一个SHA。

然后您可以通过运行恢复对此 SHA 的远程引用

```
git update-ref refs/remotes/remote1/branch 
```

编辑您可以尝试使用[Lost Last Git Commit](https://stackoverflow.com/q/2348292/11343)查找悬空提交。

# soap - 如何使用 SOAP 合作伙伴 API 创建销售队伍“用户”？

> ID：12493231
> 
> 赞同：3
> 
> 时间：2012-09-19T10:49:32.747
> 
> 标签：soap, salesforce

我想使用 SOAP API Partner WSDL 以编程方式在 SalesForce 中创建一个用户。这是我的代码：

```
import com.sforce.soap.partner.Connector;
import com.sforce.soap.partner.PartnerConnection;
import com.sforce.soap.partner.QueryResult;
import com.sforce.soap.partner.SaveResult;
import com.sforce.soap.partner.sobject.SObject;
import com.sforce.ws.ConnectionException;
import com.sforce.ws.ConnectorConfig;

import com.sforce.soap.partner.sobject.*;
import com.sforce.soap.partner.*;
import com.sforce.soap.*;
import com.sforce.*;

public class PartnerAPICreateUser {

    /**
     * @param args
     */
    public static void main(String[] args) {

        ConnectorConfig config = new ConnectorConfig();
        config.setUsername("waprau@waprau.com");
        config.setPassword("dhskjhkjgfkjsdhkfjg");

        PartnerConnection connection = null;

        try {
            SObject user = new SObject();

            user.setType("user");

            user.setField("Alias", "abcd");
            user.setField("DefaultGroupNotificationFrequency", "P");
            user.setField("DigestFrequency", "D");
            user.setField("Email", "abcd@pqrs.com");
            user.setField("EmailEncodingKey", "ISO-8859-1");
            user.setField("LanguageLocaleKey", "English");
            user.setField("LastName", "Rau");
            user.setField("LocaleSidKey", "En");
            user.setField("TimeZoneSidKey", "America/Los_Angeles");
            user.setField("Username", "abcd@pqrs.com");
            user.setField("UserPermissionsCallCenterAutoLogin", "true");
            user.setField("UserPermissionsMarketingUser", "true");
            user.setField("UserPermissionsOfflineUser", "true");

            connection = Connector.newConnection(config);
            SaveResult[] results = connection.create(new SObject[] { user });
            System.out.println("Created user: " + results[0].getId());

            QueryResult queryResults = connection
                    .query("SELECT Id, Name from User "
                            + "ORDER BY CreatedDate DESC LIMIT 5");
            if (queryResults.getSize() > 0) {
                for (SObject s : queryResults.getRecords()) {
                    System.out.println("Id: " + s.getField("Id") + " - Name: "
                            + s.getField("Name"));
                }
            }

        } catch (ConnectionException ce) {
            ce.printStackTrace();
        }
    }
} 
```

但是，当我执行这个 Java 程序时，它会给出以下输出，显示“创建的用户：null”:-(

```
Created user: null
Id: 005E0000001fb3vIAA - Name: Rau
Id: 005E0000001fVTTIA2 - Name: Chatter Expert
Id: 005E0000001fVU1IAM - Name: Wap Rau 
```

转到 MyName > 设置 > 管理用户（在管理设置中）> 配置文件时的管理权限

![在此处输入图像描述](../Images/92ecd1077373a899b4c135c0ea2bdc17.png)

你能告诉我有什么问题吗？

谢谢，

瓦普劳

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:09:46.503

create 调用返回一个错误，但你不检查它，返回的 SaveResult 会告诉你为什么它没有创建用户，你想要类似的东西

```
SaveResult[] results = connection.create(new SObject[] { user });
if (results[0].isSuccess())
    System.out.println("Created user: " + results[0].getId());
else
    System.out.println("Error: " + results[0].getErrors()[0].getStatusCode() + 
                       ":" + results[0].getErrors()[0].getMessage()); 
```

# php - 从链接获取值并将其用于标题属性

> ID：12493232
> 
> 赞同：0
> 
> 时间：2012-09-19T10:49:33.100
> 
> 标签：php, css, drupal

如何从链接中获取值并将其用于 title 属性：

```
<a href="#">Test</a> 
```

至：

```
<a href="#" title="Test"></a> 
```

我使用 drupal 作为 CMS

我使用 css content 属性来显示标题。如果内容有一个值属性，那就容易多了。

谢谢

这是我的导航代码：

```
<nav id="main_menu">

            <?php print theme('links__system_main_menu', array('links' => $main_menu, 'attributes' => array('class' => array('links', 'inline', 'clearfix')))); ?>
          </nav><!-- /#main_menu --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:50:51.953

如果`<a>`元素有一个 ID，你可以这样做：

```
value = document.getElementById("ahrefid").innerHTML; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:58:30.450

像这样试试

```
$(document).ready(function() {
    $value = $('a').text();
    $('a').attr('title', $value);
}); 
```

编辑 ：

```
jQuery(document).ready(function($) {
 $('a').each(function() {
    $value = $(this).text();
    $(this).attr('title', $value);
 }) 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:08:04.957

**HTML：**

```
<a id="anchorId" href="#">Test</a> 
```

**Javascript：**

```
var anchorVal = document.getElementById("anchorId").innerHTML;
document.getElementById("anchorId").setAttribute("title", anchorVal) 
```

**[看演示](http://jsfiddle.net/vReJx/)**

# actionscript-3 - Flash 加载外部视频和循环

> ID：12493235
> 
> 赞同：0
> 
> 时间：2012-09-19T10:49:42.450
> 
> 标签：actionscript-3, flash, loops, video, external

我已使用正常序列将外部视频添加到 Flash AS3 文件中：

文件>导入>导入视频

视频是mp4格式，我没有设置皮肤。该文件播放正常，但我希望它在完成后循环播放。

我尝试了 gotoAndPlay(1)，它似乎已经回到了文件的开头，但没有重新启动视频。

请帮忙 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:39:31.117

使用以下代码

```
fvp.source=yourvideo
fvp.autoRewind=true
fvp.addEventListener(VideoEvent.AUTO_REWOUND, videoPlayAgain, false, 0, true)
function videoPlayAgain( event:VideoEvent):void
{
 event.target.play()
} 
```

# ruby-on-rails - 将同一资源嵌套在路线中的多个位置

> ID：12493239
> 
> 赞同：4
> 
> 时间：2012-09-19T10:49:57.983
> 
> 标签：ruby-on-rails, rails-routing

所以我和之前的许多人一样，在我的应用程序中引入了“喜欢”项目的概念。可以喜欢许多不同类型的资源（帖子、回复、列表、操作等），我正在寻找构建路由文件的最佳方式。

这可能涉及制作一个看起来像这样的 routes.rb 文件：

```
resources lists do
  resources posts do
    resources replies do
      resources likes
    end
    resources likes
  end
  resources likes
end 
```

还有一个 LikesController 不知道它是什么意思 load_and_authorize - ing：

```
class LikesController < ActionController:Base

  load_and_authorize :list # only works if list_id exists in this request
  load_and_authorize :post, through: :list # only works if post_id exists in this request

  # and so on...

end 
```

有没有更好的方法来做到这一点？我曾想过只有一个 /likes 路径来发布所有内容，但这意味着我不能使用 load_and_authorize，也意味着更难以明智地为给定列表、帖子、回复等执行 Likes#index 之类的事情。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:00:22.417

不要在其他资源中嵌套喜欢，试试这个：

```
scope "/lists/:list_id(/posts/:post_id(/replies/:reply_id))" do
  resources :likes
end 
```

我相信这应该为您提供一组 LikesController 路由，这些路由需要一个`:list_id`参数，并且可以选择采用 a`:post_id`和 a `:reply_id`。该 url 非常难看，但我只是想匹配四重嵌套 rails 资源路由的默认值。我建议稍微清理一下。

编辑：看起来这还需要你的 LikesController 中的一些额外逻辑——比如一个 before_filter ，它检测你有哪些参数并仅加载这些对象。但这对我来说似乎是一个可以解决的问题？

# iphone - 框架（RestKit）与 armv7s 不兼容

> ID：12493241
> 
> 赞同：2
> 
> 时间：2012-09-19T10:50:05.157
> 
> 标签：iphone, xcode, restkit

当我尝试为 iPhone 5 (armv7s) 存档我的项目时，它出现了一个错误，指出 RestKit 与 armv7s 架构不兼容。

在这个项目中，我使用的是来自 RestKit 的旧版本，0.9 版。此版本默认无法与 armv7s 一起使用。有没有办法设置 RestKit 项目（版本 0.9）以支持 armv7s。

我尝试将 armv7s 添加到 RestKit 项目的有效架构中，并更改了架构以支持 armv6 和 armv7。不幸的是，这并没有成功。

当然，我可以使用最新版本的 RestKit 设置项目。只是这会花费很多时间，因为核心已经更新了很多次。

另一个问题，当前商店中的应用程序（为 armv6 和 armv7 构建）可以在 iPhone 5 (armv7s) 上运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:49:10.247

如果您不愿意更新到最新（兼容）版本，最好将有效架构保留为 6 和 7，iPhone 5 上的处理器向后兼容旧架构。唯一的缺点是您不会获得针对 iPhone 5' armv7s 处理器的任何特定优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:04:21.007

我建议在这个提交中检查 RestKit 人是如何做到的：[https ://github.com/RestKit/RestKit/commit/29ba601cfc38560be923f57fba545881d0789ea5](https://github.com/RestKit/RestKit/commit/29ba601cfc38560be923f57fba545881d0789ea5)

然后尝试从那里找到一种方法来根据您的具体情况完成它。

可能不是一个完整的解决方案，但它绝对是一个很好的提示。

# actionscript-3 - 类型错误：错误 #2007

> ID：12493243
> 
> 赞同：1
> 
> 时间：2012-09-19T10:50:08.163
> 
> 标签：actionscript-3, flash, flash-cs3

2012 年 9 月 20 日，格林威治标准时间 + 8 点晚上 7:27.. 即使使用代码“继续；”仍然有同样的错误......还有其他建议吗？:(

帮助以前的答案仍然无效.. :(

练习教程。当对象 git 捕手时，我的这部分代码出现错误。

```
function moveObject(e:Event):void {
    // cycle thru objects using a for loop
    for (var i:int=objects.length-1; i>=0; i--) {
        //move objects down based on speed
        objects[i].y += speed;
        objects[i].rotation += speed;
        // if objects leaves the stage
        if (objects[i].y > 400) {
            // remove it from display list
            removeChild(objects[i]);
            // remove it from the array backwards
            // remove it backwards removes all problems when looping through.
            // forward would cause confusion if you removed 5 before 4\. 
            objects.splice(i, 1);

        }
        if (objects[i].hitTestObject(player.arrowS.sackC)) {
            if (objects[i].typestr == "good") {
                score += 3;
            } else {
                score -= 5;
                if (score <= 0) {
                    score = 0;
                }
            }
            trace(score);
            updateScore(score);
            removeChild(objects[i]);
            objects.splice(i, 1);
        }
    }
  } 
```

尽管游戏仍在运行，但看到这一点很烦人。这是错误

```
TypeError: Error #2007: Parameter hitTestObject must be non-null.
at flash.display::DisplayObject/flash.display:DisplayObject::_hitTest()
at flash.display::DisplayObject/hitTestObject()
at adventure_fla::MainTimeline/moveObject() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:30:22.387

当特定变量的值在运行时为空时会发生此错误。如果它变为空，请检查不同位置的 hitTestObject 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:51:25.710

您正在遍历一个数组，如果`if (objects[i].y > 400) {`为真，则将该元素从数组中拼接出来，因此`objects[i]`现在为空。

然后你去做，`if (objects[i].hitTestObject(player.arrowS.sackC)) {`但如果第一个 coniditon 为真，则`objects[i]`不再有值，所以你得到发布的错误。

您想要做的不是跳出循环，而是使用`continue`关键字，以便循环移动到下一个项目。

```
if (objects[i].y > 400) {
        // remove it from display list
        removeChild(objects[i]);
        // remove it from the array backwards
        // remove it backwards removes all problems when looping through.
        // forward would cause confusion if you removed 5 before 4\. 
        objects.splice(i, 1);
        continue; //abandon the rest of this loop cycle (since objects[i] is now null), and move on to the next loop cycle, so the below code doesn't execute for the current i
} 
```

除了上述之外，您还应该检查您`player.arrowS.sackC`的不为空：

```
if(player && player.arrowS && player.arrowS.sackC && objects[i].hitTestObject(player.arrowS.sackC)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T20:56:25.273

您需要存储对该对象的引用并从该引用中工作

```
 function moveObject(e:Event):void {
    // cycle thru objects using a for loop

    if(player.arrowS.sackC){
      var currentObject:MovieClip;
      for (var i:int=objects.length-1; i>=0; i--) {
          //move objects down based on speed
          currentObject = objects[i] as MovieClip;
          currentObject.y += speed;
          currentObject.rotation += speed;
          // if objects leaves the stage
          if (currentObject.y > 400) {
              // remove it from display list
              removeChild(currentObject);
              // remove it from the array backwards
              // remove it backwards removes all problems when looping through.
              // forward would cause confusion if you removed 5 before 4\. 
              objects.splice(i, 1);
              continue;// go to next iteration of loop
          }
          if (currentObject.hitTestObject(player.arrowS.sackC)) {
              if (currentObject.typestr == "good") {
                  score += 3;
              } else {
                  score -= 5;
                  if (score <= 0) {
                      score = 0;
                  }
              }
              trace(score);
              updateScore(score);
              removeChild(currentObject);
              objects.splice(i, 1);
              continue;// go to next iteration of loop
          }
      }
    }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T06:19:17.633

```
function moveObject(e:Event):void {
    // cycle thru objects using a for loop
    for (var i:int=objects.length-1; i>=0; i--) {
        //move objects down based on speed
        objects[i].y += speed;
        objects[i].rotation += speed;
        // if objects leaves the stage
        if (objects[i].y > 400) {
            // remove it from display list
            removeChild(objects[i]);
            // remove it from the array backwards
            // remove it backwards removes all problems when looping through.
            // forward would cause confusion if you removed 5 before 4\. 
            objects.splice(i, 1);
            //once an element is spliced from the array the array is getting refreshed
            //so to avoid accessing empty array(ie, after the last element is removed) in the next if condition, the loop has breaked here
            //Don't worry about return statement as the Enter frame listener function calls till the listener has been removed
            return;
        }
        if (objects[i].hitTestObject(player.arrowS.sackC)) {
            if (objects[i].typestr == "good") {
                score += 3;
            } else {
                score -= 5;
                if (score <= 0) {
                    score = 0;
                }
            }
            trace(score);
            updateScore(score);
            removeChild(objects[i]);
            objects.splice(i, 1);
            return;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T03:38:56.040

先生，我得到了解决我的问题的答案，它不是代码，而是我为角色制作的动画，因为它包含的关键帧都具有实例名称 sackC:D

我知道这不是编码的专业方式，但我能说什么..我只是一个初学者..

虽然谢谢大家的帮助..

# php - 计数数组值 > 0

> ID：12493247
> 
> 赞同：0
> 
> 时间：2012-09-19T10:50:17.020
> 
> 标签：php

`$_POST['ore']`我有一个表单，可以从选择框和文本输入字段的表中发送整数。有问题的数组是：

```
print_r($_POST)
//returns
Array
(
[ore] => Array
    (
        [0] => 1
        [1] => 2
        [2] => 0
        [3] => 0
        [4] => 0
        [5] => 0
        [6] => 0
        [7] => 0
        [8] => 0
        [9] => 0
    )
.... 
```

这就是它变得越来越大，它是一个小应用程序。10个选择框，10个输入框。表单本身和其他功能都很好用。

`while`但是，在提交时，数据被发送到另一个页面，该页面处理收集的信息并基于`count`该数组的循环生成一个新表。但是，我只想计算大于 0 的值，因为零在技术上是空的。

我尝试了多种功能、示例、碎片，也尝试了愚蠢的运气，但没有积极的结果。我已经得到了一些部分工作，但大多数时候他们忽略了最后一行。

我目前有`size = count($_POST['ore']);`- 但是这会创建一个包含 10 行的表（应该如此），并用 while 代码的最后一个循环填充表中的其余行。实用，但烦人，不是我想做的。

我试过array_filter

```
function nonzero($var){
   return ($var > 0); }
$size = array_filter($_POST['ore'], "nonzero"); 
```

没运气。

我`if(isset($_POST['ore']))`在多个地方尝试过，但由于数组中有一个 0 值，所以它在技术上是设置的。

那么，如何计算或过滤然后计算 $_POST['ore'] 数组值以去除 0 并仅计算或返回大于 0 的键？

我的键盘，我提前谢谢你。

* * *

编辑 - 找到答案谢谢大家一大早的反馈

```
function nonzero($var){
   return ($var > 0); }
$size = count(array_filter($_POST['ore'], "nonzero")); 
```

^^ 做到了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:55:23.037

您已经尝试过：

```
$size = array_filter($_POST['ore], "nonzero"); 
```

这是发这篇文章时的错字还是你从代码中复制的？如果是这样，则缺少撇号。此外， $size 将是所有大于 0 的值的返回数组，因此对于您需要的大小：

```
$size = count(array_filter($_POST['ore'], "nonzero")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:58:58.393

如果数组中没有负元素，您实际上不需要定义过滤函数`array_filter`，默认情况下会过滤掉零：

```
$size = count(array_filter($_POST['ore'])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:48:52.983

您好，请尝试取消设置值为 0 的数组的索引

```
foreach($array as $array_key=>$array_item)
{
  if($array[$array_key] == 0)
  {
    unset($array[$array_key]);
  } 
```

}

希望对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T10:59:47.510

您的函数应该可以正常工作，您唯一必须知道的是该函数正在返回一个数组，因此：

```
$_POST['ore'][] = 1;
$_POST['ore'][] = 2;
$_POST['ore'][] = 0;
$_POST['ore'][] = 0;

function nonzero($var){ 
    return ($var > 0); } 

$arr = array_filter($_POST['ore'], "nonzero"); 
echo count($arr); // this returns 2 
```

# javascript - Javascript - 在定义之前使用

> ID：12493250
> 
> 赞同：-1
> 
> 时间：2012-09-19T10:50:26.847
> 
> 标签：javascript

最近我问了一个关于我用 JavaScript 编码的三角形计算的问题。基本上我去了 JSLint（*一个 JavaScript 调试工具*）来获取一些数据，以了解为什么函数和过程中没有任何东西在看起来不错的地方工作，并且我遵循了之前给出的建议，但我相信这是一个单独的问题。我已经发布了下面的代码：

```
 <html>
<head>
<link href="stylesheet/stylesheet.css" rel="stylesheet" type="text/css">

<script language="Javascript" type="text/javascript">

/*  Key/Legend
Var
    inp1 = input1
    inp2 = input2
    inp3 = input3
    Triangle_Inputs = Form Name

    */

/* Notes

    In computing, a parser is one of the components in an interpreter or 
    compiler that checks for correct syntax and builds a data structure 
    (often some kind of parse tree, abstract syntax tree or other hierarchical structure) 
    implicit in the input tokens.

    Technique
    if (side1 is equal to side2 AND side 2 is equal to side3) {equalitateral}

    if (side1 is equal to side2 AND side 2 doesn't equal to side3) {isosceles}

    if (side1 doesn't equal to side2 AND side2 doesn't equal to side 3 AND side 3 doesn't equal side 1) {scalene}

    http://www.w3schools.com/js/js_comparisons.asp

    */

function checkinputs(){
/* Var = parseInt(document.Name_Of_Element_Form.Field_Name(Input).value); */
/* Input Fields */
inp1 = parseInt(document.Triangle_Inputs.input1.value);
inp2 = parseInt(document.Triangle_Inputs.input2.value);
inp3 = parseInt(document.Triangle_Inputs.input3.value);
/* Side options */
sideA = (inp1);
sideB = (inp2);
sideC = (inp3);
    if (sideA == sideB && sideB == sideC) {
    alert("Equalateral");
    }
    if (sideA == sideB && != sideC) {
    alert("Isosceles");
    }
    if (sideA != sideB == sideC) {
    alert("Isosceles");
    }
    if (sideA != sideB != sideC != sideA) {
    alert("Scalene!");
    }
}
</script>

</head>
<body>
<div id="Container">

<div id="Header"><h1></h1></div>

        <div id="Content_1">
                <div id="Explanation">
                This calculator will determine what
                triangle you have made depending on
                the integer values in the input fields.

                </div>
                <div id="Form">
                    <FORM NAME="Triangle_Inputs" METHOD="GET">
                    Enter the triangle values below: <br>
                    <p>
                    <h4>Side 1: </h4><BR>
                    <INPUT TYPE="Integer" NAME="input1" VALUE=""><P>
                    <h4>Side 2: </h4><BR>
                    <INPUT TYPE="Integer" NAME="input2" VALUE=""><P>
                    <h4>Side 3:</h4> <BR>
                    <INPUT TYPE="Integer" NAME="input3"  VALUE=""><P>
                    <INPUT TYPE="button" NAME="Submit" Value="Submit" Class="Submit" onClick="checkinputs()">
                    </FORM>
                </div>
                <div id="Verbal_Output">
                    <h2>You made a:</h2>
                    <p>        
                    <h2>Triangle</h2>
                </div>

            </div>
            <p>
            <p>
        <div id="Content_2">

        <div id="Image_Output">asdad</div>
    </div>      
</div>

</body>
</html> 
```

这是网站本身，忽略 div 标签。我想知道为什么我不能点击按钮以及更多 JSlint 说的重点：

> inp1 = parseInt(document.Triangle_Inputs.input1.value);
> 
> 第 39 行字符 1 'inp1' 在定义之前被使用。

对于 inp1、inp2 和 inp3。

编辑：

我对使用变量的理解是不正确的，我列出它们时没有使用“，”。相反，我调用了一个变量，其余的我没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:58:08.280

试试这个：

```
var checkinputs = function() {
/* Input Fields */
var sideA = parseInt(document.Triangle_Inputs.input1.value),
    sideB = parseInt(document.Triangle_Inputs.input2.value),
    sideC = parseInt(document.Triangle_Inputs.input3.value);

alert (sideA == sideB && sideB == sideC) ? 'Equilateral' :
      (sideA == sideB && sideA != sideC) ? 'Isosceles' :
      (sideA != sideB && sideA == sideC) ? 'Isosceles' :
      (sideA != sideB && sideA != sideC && sideB != sideC) ? 'Scalene' :
      'logic needs improvement';
} 
```

我还注意到你的逻辑有点缺陷，所以我把它编辑成我认为正确的样子。

# javascript - 从选择输入中添加/删除/更新选项

> ID：12493254
> 
> 赞同：0
> 
> 时间：2012-09-19T10:50:41.483
> 
> 标签：javascript

这是我开始做的事情：http: [//jsfiddle.net/nd9ny/](http://jsfiddle.net/nd9ny/)

现在它不能像我想要的那样工作。

每次添加新的选择输入或删除输入时，我都想更新选项。

例如，我们的第一个选择输入包含以下选项：

```
<select>
    <option value="1"></option>
    <option value="2"></option>
    <option value="3"></option>
    <option value="4"></option>
</select> 
```

当我向页面添加新输入时，我希望我的函数更新所有输入并从中删除新选择的选项。

```
<select>
    <option value="1" selected></option>
    <option value="3"></option> // The second one is removed
    <option value="4"></option>
</select>

<select>
    <option value="2" selected></option> // The first one is removed
    <option value="3"></option>
    <option value="4"></option>
</select> 
```

然后，如果我删除第一个输入，第二个变成：

```
<select>
    <option value="1"></option>
    <option value="2" selected></option>
    <option value="3"></option>
    <option value="4"></option>
</select> 
```

需要纯 Javascript 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:05:42.190

您可以尝试以下解决方案：

**- CSS：**

```
.hidden {
    display: none;  
} 
```

**- JS函数：**

```
function hide_selected(el) {

    var index = el.selectedIndex;

    // Show every options
    for(var i=0; i<el.length; i++)
        el[i].className="";

    // Hide the selected one
    el[index].className="hidden";
} 
```

**- HTML 示例：**

```
<body>
    <select onchange="javascript:hide_selected(this);">
        <option value="1" class="hidden" selected="selected">1</option>
        <option value="2" class="">2</option>
        <option value="3" class="">3</option>
        <option value="4" class="">4</option>
    </select>
</body> 
```

**注意：**此功能是在 Firefox 上测试的，您可能需要检查它是否适用于其他浏览器。

希望这可以帮助

# jquery - HTML5 可排序 - 拖动项目在 Internet Explorer 中消失

> ID：12493255
> 
> 赞同：2
> 
> 时间：2012-09-19T10:50:47.273
> 
> 标签：jquery, internet-explorer, internet-explorer-9, opacity, jquery-ui-sortable

**在 Internet Explorer 9**中，当我在[jQuery HTML5 可排序插件的](http://farhadi.ir/projects/html5sortable)[这个示例](http://farhadi.ir/projects/html5sortable/#sortable2)中拖动项目时，拖动的项目消失了，即使[它声明](http://farhadi.ir/projects/html5sortable/#features)它支持 IE 5.5+。它看起来像这样：

![在此处输入图像描述](../Images/fed0ec1f41ab61baca0f9bddfc22da04.png)

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:54:14.800

您可以通过切换到 jQuery UI（jQuery 的官方 UI 库）轻松修复它！

我已经多次使用[拖放组件，但从未注意到 IE 中有任何消失的问题。](http://jqueryui.com/demos/draggable/)

当然，这*可能*是对您当前的 HTML/CSS 或其他一些冲突脚本的影响。切换到另一个插件将有助于证明是您的代码，还是有问题的插件。

编辑：

插件的实际演示站点上的问题...保留了上述评论，因为在这种情况下（或至少可能是）导致问题的自定义代码，这仍然是有效的调试*路径*...

# c - 分配内存并释放它们。我们应该将它们设置为 NULL 吗？

> ID：12493258
> 
> 赞同：3
> 
> 时间：2012-09-19T10:50:53.573
> 
> 标签：c, malloc, free

```
gcc (GCC) 4.7.0
c89 
```

你好，

我想知道我在这里的想法是否正确。当我使用 malloc 分配内存时。malloc 将返回一个指向内存大小的指针。

因此，在我分配内存之前，所有指针的值都将为 NULL。

使用此代码段：

```
struct address *db_row = NULL;

db_row = malloc(sizeof(struct address));
db_row->name = malloc(sizeof(char) * 10);
db_row->email = malloc(sizeof(char) *10);

free(db_row->name);
free(db_row->email);
free(db_row); 
```

在分配内存之前，我已经在 db_row 的 gdb 调试器中完成了此操作：

```
(gdb) p db_row
$20 = (struct address *) 0x0
(gdb) p *db_row
Cannot access memory at address 0x0 
```

这是正确的，因为没有分配内存地址。在我分配内存后，当我做同样的事情时，我会得到以下信息：

```
(gdb) p db_row
$25 = (struct address *) 0x602310
(gdb) p *db_row
$26 = {id = 0, set = 0, name = 0x0, email = 0x0} 
```

但是，在我释放内存之后，我仍然得到相同的内存地址，在分配任何内存之前，它不应该像第一种情况那样为 NULL 吗？

释放内存后：

```
(gdb) p db_row
$28 = (struct address *) 0x602310
(gdb) p *db_row
$27 = {id = 6300480, set = 0, name = 0x602330 "", email = 0x602350 " #`"} 
```

如您所见，它仍然指向相同的内存位置，这是正确的吗？

最后，我在最后添加了这个，看看我是否可以做双重免费：

```
if(db_row != NULL) {
    free(db_row);
}

if(db_row != NULL) {
    free(db_row);
} 
```

我在第二次调用 free 时得到了堆栈转储。但是作为一项安全措施，您是否应该始终检查以确保您没有尝试进行双重免费？

释放指针后是否值得将指针设置为 NULL？

```
db_row = NULL; 
```

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T10:53:58.217

> 但是作为一种安全措施，您是否应该始终检查以确保您没有尝试释放 NULL 指针？

`free()`使用指针调用`NULL`是安全的，不会发生任何事情。调用`free()`没有`NULL`指针，您可以显式执行此操作。`NULL`调用后的指针`free()`会阻止对*同一*指针变量的双重释放：

```
/* Assuming 'db_row' is referring to a valid address
   at this stage the following code will not result
   in a double free.*/
free(db_row);
db_row = NULL;
free(db_row); 
```

**如果另一个指针变量指向相同的地址并被传递给，`free()`那么仍然会发生双释放。**

仅仅因为一个指针不是 -`NULL`并不能保证它指向一个有效的地址。确保`free()`不会出现 double 是程序员的责任。`NULL`在调用后对指针变量进行调用`free()`有助于但不提供保证，因为多个指针变量可以指向同一个地址。

* * *

> 但是作为一项安全措施，您是否应该始终检查以确保您没有尝试进行双重免费？

没有办法通过查询指针变量来确定它所持有的地址处的内存是否已经被`free()`d。一个指针变量保存一个地址，仅此而已。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T10:57:34.893

`null`除非您位于变量范围的末尾，否则最好在释放指针后设置指针；`free`是的，不这样做是正常的。

如果指针是`null`，则调用它是安全的，并且对它的任何访问都将生成核心转储，这比使用未设置为 的释放指针时可能发生的`free`内存损坏或双倍更容易调试。`free``null`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T10:52:38.987

> **释放内存后，我仍然获得相同的内存地址，在分配任何内存之前，它是否应该像第一种情况那样为 NULL？**

因为`free()`只释放分配给你的内存。它不会将指针设置为`NULL`。

> **但是作为一种安全措施，您是否应该始终检查以确保您没有尝试释放 NULL 指针？**

如果传递给`free()`的指针是空指针，则不会发生任何操作（*C99 第 7.20.3.2 节*）。

> **`NULL`释放它们后值得设置指针吗？**

这样做绝对没有任何好处，更多时候它会隐藏你的问题，这会以某种或其他形式抬起他们丑陋的头。

这是一种防御性和可疑的编程风格，以避免悬空指针或双重释放问题，其中你试图保护自己不`free()`被***同一个指针调用。实际上，当你使用******不同***的指针指向同一个指针时，双重释放问题通常会发生或不会发生内存和这些不同的指针被传递给`free()`.

在第二种也是更常见的错误场景中，制作指针的做法`NULL`没有任何作用。所有这些情况只能通过编写程序、进行一些良好的思考和定期的代码审查来避免。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T11:59:00.063

为了在这里澄清，我将引用 malloc 的手册页：

`The free() function frees the memory space pointed to by ptr, which must have been returned by a previous call to malloc(), calloc() or realloc(). Otherwise, or if free(ptr) has already been called before, undefined behavior occurs. If ptr is NULL, no operation is performed.`

所以，回顾一下：

1.  Free 接受由内存分配函数返回的指针（NULL 或有效）
2.  如果它为 NULL，则不会发生任何事情
3.  如果它是一个有效的指针，它会释放内存

您会注意到这里它**没有**说明更改`ptr`指向的地址。那是你的事。所以这样做非常安全：

```
int *p = malloc(sizeof(int));
*p = 5;
printf("p=%d\n",*p);
free(p);
p = NULL; 
```

现在你可以`free()`整天在指针 p 上打电话，你就没事了。如果您担心双重`free()`调用出现错误，在最新版本的 Linux libc（5.4.23 之后）和 GNU libc（2.x）上，有一个安全机制，称为`MALLOC_CHECK_`

您将看到如下消息，而不是堆栈崩溃： `*** glibc detected *** ./a.out: free(): invalid pointer: 0x0804b008 ***`

您可以通过以下方式使用它：

1.  `export MALLOC_CHECK_=0`关闭 malloc 检查并（可能）让您的程序崩溃
2.  `export MALLOC_CHECK_=1`你会收到上面的警告信息
3.  `export MALLOC_CHECK_=2`将调用 abort(1) 并为您提供代码的回溯
4.  `export MALLOC_CHECK_=3`只是选项 1|2 一起

# dependency-injection - Zend Framework 2 通过接口进行依赖注入

> ID：12493259
> 
> 赞同：0
> 
> 时间：2012-09-19T10:50:54.240
> 
> 标签：dependency-injection, zend-framework2

如何指定特定类需要 setter 注入的接口实现？我有一个工作，例如用于构造函数注入，但不适用于二传手。

```
class Lister1 {
    public $finder;
    public function setFinder(Finder $finder){
        $this->finder = $finder;
    }
}

interface Finder {
    public function findAllByName($name);
}

class FinderImpl1 implements Finder {
    public function findAllByName($name) {}
} 
```

现在对于上面的以下代码有效。

```
$di = new Di();
$di->instanceManager()->addTypePreference(
    'Finder', 
    'FinderImpl1'
);
$lister = $di->get('Lister1'); 
```

但是，如果我也有以下内容怎么办

```
class Lister2 extends Lister1{
}
class FinderImpl2 implements Finder {
    public function findAllByName($name) {//assume a different impl}
} 
```

所以 Lister1 需要注入 FinderImpl1 而 Lister2 需要注入 FinderImpl2。
我们可以在每个类的基础上添加类型偏好吗？
我查看了 zf2 附带的单元测试，但没有发现任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:38:00.080

看起来您已经找到了 Ralph 的[DI 示例](https://github.com/ralphschindler/Zend_DI-Examples)。好的。那将是我的第一个建议。:)

我可能错了（自从我使用 DI 以来已经有一段时间了），但它可能比您想象的要简单。

像这样使用 setter 注入：

```
$di = new Zend\Di\Di;
$di->configure(new Zend\Di\Config(array(
    'instance' => array(
        'Lister1' => array(
            'parameters' => array(
                'finder' => 'FinderImpl1',
            ),
        ),
        'Lister2' => array(
            'parameters' => array(
                'finder' => 'FinderImpl2',
            ),
        ),
    )
))); 
```

如果您要定义一个*interface*的实例，*那么*您需要担心设置“首选项”；在这种情况下，如果您有一些棘手的问题，您可能会考虑使用一些别名以及首选项定义。

# asp.net-mvc-3 - IE9 中的 Backbone.js 集合获取请求缺少数据参数

> ID：12493261
> 
> 赞同：0
> 
> 时间：2012-09-19T10:51:08.490
> 
> 标签：asp.net-mvc-3, backbone.js, internet-explorer-9

因此，我使用 Backbone.js 编写了一个消息传递系统。它在 Chrome 和 FF 中运行良好，但 IE9 有一个特定的 fetch 调用问题会杀死它。（我在 MVC3 中工作）。

我有一个检查新消息的民意调查，它将日期发送到服务器。使用此方法调用民意调查：

```
DoMessageFetch = function() {
    var now = new Date().toUTCString();
            Chat.mymessages.fetch({
                cache: false,
                data: {
                    Now: now
                },
                success: function (response) {
                    // if there are messages ...
                    // for each message, open a chat window
                    if (Chat.mymessages.length > 0) {
                        for (var i = 0; i < Chat.mymessages.length; i++) {                            
                            var useridto = Chat.mymessages.at(i).get("UserId");
                            var name = Chat.mymessages.at(i).get("ScreenName");
                            // a chat-window with this useridto is NOT on the page
                            if (!($('#chat-window-' + useridto).is(':visible'))) {
                                Chat.doChatMessageFetch(name, useridto, null); // this constructs a Backbone view
                            }
                        }
                    }
                },
                error: function () { console.log('ERROR: fetching general poll messages failed.'); }
            });

            Chat.mymessages.reset();
} 
```

在 IE9 中，当我在控制器中观察断点时，Now 参数为空。这意味着请求遵循服务器上错误的代码路径...

我不明白我的 Now 参数在 IE 中的位置。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:36:32.233

这个问题是由于不同的行为

```
new Date().toUTCString() 
```

在 IE、Google Chrome 和 Firefox 之间。

例如 Chrome 中的结果是：

```
"Thu, 20 Sep 2012 20:19:15 GMT" 
```

在 IE 中你会得到

```
"Thu, 20 Sep 2012 20:19:15 UTC" 
```

MVC3 ModelBinder 将忽略 IE 格式并将您的 Now 参数保留为空。解决此问题的方法是替换

```
new Date().toUTCString() 
```

和

```
new Date().toJSON() 
```

此解决方案唯一需要注意的是，由于缺少 toJSON() 函数，默认情况下它在 IE7 上不起作用，但可以使用 Douglas Crockford [json2.js](https://github.com/douglascrockford/JSON-js)库解决此问题，在使用 Backbone.js 时也建议使用该库

# shopify - Shopify 网络钩子应用程序

> ID：12493262
> 
> 赞同：0
> 
> 时间：2012-09-19T10:51:11.110
> 
> 标签：shopify, webhooks

我正在考虑实现一个shopify应用程序。应用程序的目的是当它安装在任何商店时。**应用程序将自行设置 HTTP POST 请求 URL**，当该商店有任何订单时，应用程序将通过 POST 向我们发送信息。

可以使用 webhook 吗？因为我找不到任何以编程方式使用 webhook 的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:31:46.653

你读过 webhook 的 API 文档吗？它所谈论的只是以编程方式使用它们。

[http://docs.shopify.com/api/webhooks/using-webhooks](http://docs.shopify.com/api/webhooks/using-webhooks)

你遇到了一些具体的问题吗？

# ruby-on-rails - ROR 中的日期时间差异

> ID：12493264
> 
> 赞同：0
> 
> 时间：2012-09-19T10:51:22.143
> 
> 标签：ruby-on-rails

我有一个 ruby​​ 应用程序，我需要获取 Days-Hours-Minutes 格式的日期时间差。为此我使用以下功能

```
def duration  (from_time, to_time)
   from_time = from_time.to_time if from_time.respond_to?(:to_time)
   to_time = to_time.to_time if to_time.respond_to?(:to_time)
   distance_in_seconds = ((to_time - from_time).abs).round

   secs  = distance_in_seconds.to_int
   mins  = secs / 60
   hours = mins / 60
   days  = hours / 24

   if days > 0
     "#{days}d #{hours % 24}h"
   elsif hours > 0
     "#{hours}h #{mins % 60}m"
   elsif mins > 0
     "#{mins}m"
 end
end 
```

上面从另一个函数中这样调用

```
duration(aw_updated, Time.now) 
```

但有时它给了我错误的结果，

当我显示上述值时

```
aw_updated is 2012-09-19 04:23:34 UTC
Time.now is   2012-09-19 16:33:09 +0530
Time.now.utc is 2012-09-19 11:03:09 UTC 
```

和

```
Diff is 6h 26m 
```

但是我的系统时间是2012-09-19 16:33:09

不确定我在哪里做错了，一些 UTC 问题？

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:08:13.017

对于正确答案`utc`，在这种情况下，您的两个时间都应该有相同的时区

所以它正在转换`2012-09-19 16:33:09 +0530`成`utc`哪个给出`2012-09-19 11:03:09 UTC`，因此差异是 Diff 是 6h 26m

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:09:03.967

将其作为评论输入，但还不能。

我没有详细查看您的功能，但您必须从头开始构建它吗？为什么不在内置的[DateTime](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html)类中使用 Ruby。您可以将字符串解析为 DateTime 对象，进行计算并使用[strftime](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-i-strftime)方法以您想要的格式输出时间

# python - Tastypie 属性和相关名称，空属性错误

> ID：12493268
> 
> 赞同：2
> 
> 时间：2012-09-19T10:51:38.320
> 
> 标签：python, django, tastypie

我收到此错误：

```
The object '' has an empty attribute 'posts' and doesn't allow a default or null value. 
```

我正在尝试获取帖子上的“投票”数量并将其返回到我的 models.py 中：

```
class UserPost(models.Model):
    user = models.OneToOneField(User, related_name='posts')
    date_created = models.DateTimeField(auto_now_add=True, blank=False)
    text = models.CharField(max_length=255, blank=True)

    def get_votes(self):
        return Vote.objects.filter(object_id = self.id) 
```

这是我的资源：

```
class ViewPostResource(ModelResource):
    user = fields.ForeignKey(UserResource,'user',full=True)
    votes=  fields.CharField(attribute='posts__get_votes')
    class Meta:
        queryset = UserPost.objects.all()
        resource_name = 'posts'

        authorization = Authorization()
        filtering = {
            'id' : ALL,
            } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T12:01:45.483

您定义的`attribute`值不正确。您可以通过几种方式实现您想要的。

定义一个`dehydrate`方法：

```
def dehydrate(self, bundle):
    bundle.data['custom_field'] = bundle.obj.get_votes()
    return bundle 
```

或者设置`get_votes`as 属性并像这样定义资源中的字段（我推荐这个，因为它最清楚）：

```
votes = fields.CharField(attribute='get_votes', readonly=True, null=True) 
```

或者这样定义：

```
votes = fields.CharField(readonly=True, null=True) 
```

在资源中定义 dehydrate_votes 方法，如下所示：

```
def dehydrate_votes(self, bundle):
    return bundle.obj.get_votes() 
```

# shell - 如何从bash中的文件中提取特定行？

> ID：12493275
> 
> 赞同：1
> 
> 时间：2012-09-19T10:52:19.080
> 
> 标签：shell

我想从 shell 脚本文件中以特定模式开头的行中提取字符串。

例如：我想要以 开头的行中的字符串`hello`：

```
hi to_RAm
hello to_Hari
hello to_kumar
bye to_lilly 
```

输出应该是

```
to_Hari
to_kumar 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:20:21.047

使用 grep：

```
 grep ^hello file | awk '{print $2}' 
```

`^`是匹配以“hello”开头的行。这是假设您要打印第二个单词。

如果要打印除第一个单词之外的所有单词，则：

```
 grep ^hello file | awk '{$1=""; print $0}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:25:38.733

`sed`是最合适的工具：

```
sed -n 's/^hello //p' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T14:00:37.993

您可以使用 GNU grep 的 perl 兼容正则表达式并使用后向：

```
grep -oP '(?<=hello ).*' 
```

# c++ - 嵌套 Boost.Assignment `map_list_of`

> ID：12493277
> 
> 赞同：3
> 
> 时间：2012-09-19T10:52:23.370
> 
> 标签：c++, boost, c++11, variable-assignment, list-initialization

是否可以更改此 C++11 初始化：

```
const std::map<int, std::map<int, std::string>> test =
  {{1,
    {{1, "bla"},
     {2, "blie"}
    }
   },
   {3,
    {{1, "ha"},
     {2, "hie"}
    }
   }
  }; 
```

在不使用临时变量的情况下使用 Boost.Assignment 的某种形式？`map_list_of`不幸的是，以这种方式嵌套似乎是不可能的。我错了吗？

注意：我为一些可怕的宏做好了准备。只要它通常可以正常工作就可以了。可变参数模板不行，因为目标编译器是 Intel C++ 2013 和/或 MSVS2012。

*编辑*：我想使用的“理想”包装界面看起来像这样：

```
//header
extern const std::map<int, std::map<int, std::string>> test;

// source file
/*something*/ test
  /*something*/ 1,
  /*something*/ 1, "bla" /*something*/
  /*something*/ 2, "blie" /*something*/
  /*something*/ 2 //etc... 
```

任何地方都`/*something*/`可以是空的。这应该同时使用 C++11 大括号 init 或`boost::assign::map_list_of`. 我试图避免像这里这样的手动重复：[https ://stackoverflow.com/a/1872506/256138](https://stackoverflow.com/a/1872506/256138)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T11:22:42.990

[可以通过hackery](https://stackoverflow.com/a/29988957/560648)`map_list_of`以这种方式嵌套（但*可能*会在下面创建临时对象，我不确定）：

 *```
#include <map>
#include <string>
#include <boost/assign/list_of.hpp>
using boost::assign::map_list_of;

const std::map<int, std::map<int, std::string> > test =
    map_list_of
        (1, map_list_of
            (1, "bla")
            (2, "blie")
            .convert_to_container<std::map<int, std::string> >()
        )
        (3, map_list_of
            (1, "ha")
            (2, "hie")
            .convert_to_container<std::map<int, std::string> >()
        )
    ;

// Correctly prints "hie".
//std::cout << test.find(3)->second.find(2)->second << "\n"; 
```

* * *

可能的宏接口（忽略*空*的要求，主要是我不确定是什么意思）：

```
#include <iostream>
#include <string>
#include <map>

#ifdef CPP_11_AVAILABLE // Unsure what the actual macro is.
#define map_entries_begin {
#define map_entries_end }
#define map_entry_begin {
#define map_entry_end },

#else
#include <boost/assign/list_of.hpp>
#define map_entries_begin boost::assign::map_list_of
#define map_entries_end
#define map_entry_begin (
#define map_entry_end )

#endif

const std::map<int, std::map<int, std::string>> test =
    map_entries_begin
        //------//
        map_entry_begin
            1, map_entries_begin
                 map_entry_begin 1, "bla" map_entry_end
                 map_entry_begin 2, "blie" map_entry_end
               map_entries_end
        map_entry_end

        //------//
        map_entry_begin
            3, map_entries_begin
                 map_entry_begin 1, "ha" map_entry_end
                 map_entry_begin 2, "hie" map_entry_end
               map_entries_end
        map_entry_end

    map_entries_end;

int main()
{
    std::cout << test.find(3)->second.find(2)->second << "\n";
    return 0;
} 
```

诚然相当冗长，但似乎满足您的要求。

[请参阅http://ideone.com/6Xx2t](http://ideone.com/6Xx2t)上的 C++11 在线演示。*

# ios - CGContext 在线程中无法正常工作

> ID：12493279
> 
> 赞同：0
> 
> 时间：2012-09-19T10:52:33.873
> 
> 标签：ios, thread-safety, core-graphics, drawrect, cgcontext

我正在尝试使用 Core Graphics 从另一个线程在自定义 UIView 中进行无限绘图。获得电流是不可能的，`CGContext`所以我尝试创建一个新的。但我不知道如何将其应用于视图。

这是我在自定义视图中使用的代码：

```
CG_INLINE CGContextRef CGContextCreate(CGSize size)
{
    CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB();
    CGContextRef ctx = CGBitmapContextCreate(nil, size.width, size.height, 8, size.width * (CGColorSpaceGetNumberOfComponents(space) + 1), space, kCGImageAlphaPremultipliedLast);
    CGColorSpaceRelease(space);

    return ctx;
}
- (void)drawRect:(CGRect)rect 
{
    CGContextRef context = CGContextCreate(self.bounds.size);
    if(context)
    {
        [self.layer renderInContext:context];
        [self drawSymbolsInContext:context];
        CGContextRelease(context);
    }
}
- (void)drawSymbolsInContext:(CGContextRef)context
{
    for (int x = 0; x<[cellsArray count];x++)
    {
        for(int y=0; y<[[cellsArray objectAtIndex:x] count]; y++)
        {
            NSLog(@"lol %d", y);

            float white[] = {1.0, 1.0, 1.0, 1.0};
            CGContextSetFillColor(context, white);
            CGContextFillRect(context, [self bounds]);

            CGContextSetTextDrawingMode(context, kCGTextStroke);
            CGContextSetRGBFillColor(context, 1.0, 0.0, 0.0, 1.0);
            CGContextSelectFont(context, "Times", 12.0, kCGEncodingMacRoman);
                                CGAffineTransform xform = CGAffineTransformMake(
                                                                                1.0,  0.0,
                                                                                0.0, -1.0,
                                                                                0.0,  0.0);
            CGContextSetTextMatrix(context, xform);
            CGContextShowTextAtPoint(context, 100.0, 100.0 + 15*y, "test", strlen("test"));
        }
    }
} 
```

这是我用来运行 thead 的代码（在 ViewController 中）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [NSThread detachNewThreadSelector:@selector(SomeAction:) toTarget:self withObject:self.view];
}

- (void) SomeAction:(id)anObject
{
    NSAutoreleasePool *autoreleasepool = [[NSAutoreleasePool alloc] init];
    DrawView *drawView = (DrawView *)anObject;

    while (1)
    {
        COLOR col;
        col.blue = 100;
        col.red = 100;
        col.green = 200;

        int cellX = 0;
        int cellY = [[rowsArray objectAtIndex:0] count];

        CELL cel;
        cel.x = cellX;
        cel.x = cellY;

        SymbolAlive *s = [[SymbolAlive alloc] initWithColor:col andFrame:cel];

        [[rowsArray objectAtIndex:0] addObject:s];
        [drawView drawRect:drawView.bounds];

        [NSThread sleepForTimeInterval: 0.1];
    }
    [NSThread exit];
    [autoreleasepool release];
} 
```

循环正确运行。但是屏幕上什么也没有显示。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:46:10.973

我猜你必须在主线程上进行绘图。代替

```
 [drawView drawRect:drawView.bounds]; 
```

做这个

```
 [self performSelectorOnMainThread:@selector(doDraw:) withObject:nil waitUntilDone:NO]; 
```

然后创建一个绘图函数，如

```
 - (void)doDraw:(id)notused
    {
        [drawView drawRect:drawView.bounds];
    } 
```

这将允许您在后台进行处理，但在主线程上进行绘图。

此外，在这种情况下，您应该使用标准图形上下文。

还有一条评论，您可能还可以将所有绘图移入上下文线程，然后在主线程上调用 renderInContext 。

# c# - Sharepoint 和 Linq 舍入

> ID：12493282
> 
> 赞同：2
> 
> 时间：2012-09-19T10:52:41.030
> 
> 标签：c#, .net, linq, sharepoint

我有一个共享点列表，其中包含几个月的销售数据。我使用了三列月份、年份和销售额。我正在尝试编写一个 Web 服务来按月将数据分组为销售额并将其导出为 xml。在 sharepoint 中，2010 年的销售数字有 2 个小数位，对于 2011 年和 2012 年，它们是整数。当我运行以下 linq 查询时，它为我提供了 2010 年和 2011 年的正确总和，但对于 2012 年，它将数字四舍五入到最接近的百万。

```
var query = from row in SPListDT.AsEnumerable()
group row by new
{
    year = row.Field<double>("Year"),
    month = row.Field<string>("Month")
} into grp
orderby grp.Key.year, grp.Key.month
select new
{
    Key = grp.Key,
    year = grp.Key.year,
    month = grp.Key.month,
    budgetSum =grp.Sum(r => r.Field<double>("Sales"))
}; 
```

Sharepoint 似乎只有一种数字（数字）数据类型，使用此方法返回双精度数。我使用网络服务只回扣它获得的所有数字，而且它们每年都是正确的。为什么只对部分数据进行四舍五入？

# sql - 如何使用 VBA 连接到 Oracle SQL？

> ID：12493284
> 
> 赞同：0
> 
> 时间：2012-09-19T10:52:56.303
> 
> 标签：sql, oracle, vba

我是 vba 的新手，希望能帮助我使用 VBA 连接到 Oracle SQL。我有这样的 MS Server 代码，需要以某种方式修改它（或创建一个新代码），以便它与 Oracle SQL 一起使用。

这是代码：

```
Public Const sConnect As String = "xxx; Initial Catalog=xxx; User ID=xxx;Password=xxx;"

Sub GetData1()

Sheets(1).Range("a1:ao20000").ClearContents

Dim rsConnection As ADODB.Connection
Dim rsRecordset As ADODB.Recordset
Dim sQuerry As String

sQuerry = "select * from xxx"

Set rsConnection = New ADODB.Connection
Set rsRecordset = New ADODB.Recordset

rsConnection.ConnectionString = sConnect
rsConnection.Open

Set rsRecordset = rsConnection.Execute(sQuerry)

Worksheets(1).Range("A2").CopyFromRecordset rsRecordset

rsConnection.Close

Set rsConnection = Nothing
Set rsRecordset = Nothing

End Sub 
```

我的问题是：除了 Oracle Developer，我还需要安装什么吗？如果是这样，是什么？如何更改代码以使其工作？

非常感谢提前！！问候， Maciej

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:57:27.030

您需要在计算机上安装 Oracle 客户端软件。最小的设置是使用 Oracle 即时客户端，请参阅[http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html](http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html)。

您唯一需要在程序中更改的是连接字符串

# javascript - 使用 javascript 禁用 requiredfieldvalidator

> ID：12493285
> 
> 赞同：2
> 
> 时间：2012-09-19T10:52:58.193
> 
> 标签：javascript, asp.net, requiredfieldvalidator

首先，我已经看到了关于这个主题的其他线程，我只是想澄清一些我被困在上面的东西。

我有这个文本框控件和必填字段验证器：

```
<td class="style1">
    <asp:TextBox runat="server" ID="txtFirstname"></asp:TextBox>
</td>
<td>
    <asp:RequiredFieldValidator ID="rfvFirstname" runat="server"   ControlToValidate="txtFirstname" >*</asp:RequiredFieldValidator>
</td> 
```

而这个javascript代码

```
<script type="text/javascript">
    function chkValidators() {
        alert("enter function chkValidators");
        validatorEnable(document.getElementById('<%rfvFirstname%>'), false);
    } 
```

这给了我一个编译错误：

```
Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. 

Compiler Error Message: CS1002: ; expected

Source Error:

Line 158:            #line default
Line 159:            #line hidden
Line 160:            @__w.Write("\'), false);\r\n         }\r\n   </script>\r\n");
Line 161:        }
Line 162: 
```

有人知道怎么修这个东西吗？

缺口

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T11:19:18.757

你试过用..

```
 ValidatorEnable(document.getElementById('<%= rfvFirstname.ClientID %>'), false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-25T13:48:49.027

我们可以像这样使用**jquery**

```
$("#ObjectID").removeAttr("data-val-required"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T02:52:05.520

这是我的脚本，用于禁用验证器并在 Checkbox onclick 事件时清除错误文本。

```
<script language="javascript" type="text/javascript">

       function chktextmiddlenameEnableDisable(obj) {

             document.getElementById('<%=txtMiddleName.ClientID %>').disabled = obj;
             if (obj == true) {
                     document.getElementById('<%=RequiredFieldValidator2.ClientID %>').innerHTML = '';
                     } else {
                              document.getElementById('<%=RequiredFieldValidator2.ClientID %>').innerHTML = 'Please Enter Middle Name';
                     }
              } 

 </script> 
```

在我的复选框 onclick 事件中，我调用了`onclick="chktextmiddlenameEnableDisable(this.checked);"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-22T23:31:25.230

当 ValidatorEnable() 没有时，这对我有用。

```
 document.getElementById("<%=rfvFirstname.ClientID %>").enabled = false; 
```

# java - 杰克逊解析javascript函数

> ID：12493290
> 
> 赞同：3
> 
> 时间：2012-09-19T10:53:21.523
> 
> 标签：java, javascript, json, parsing, jackson

是否可以将包含 Javascript 函数的 JSON 字符串解析为 Jackson JsonNode ？

我尝试解析的（JSON 格式）字符串：

```
{
    "key1" : "value1",
    "key2" : "value2",
    "key3" : function () {
       // some javascript code
    }
} 
```

在 Java 对象中，我希望像 Map（转换为 String 的 Javascript 函数）之类的东西。

目前，我有以下例外：

```
org.codehaus.jackson.JsonParseException: Unrecognized token 'function' 
```

我发现了很多无效 JSON 使用的功能，但仍然不是我想要的......

任何的想法 ？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:05:05.410

JSON 不允许函数。尽管您可以将函数编码为这样的字符串，但它是为了安全的数据传输：

```
{
    "key1" : "value1",
    "key2" : "value2",
    "key3" : "function () { ... }"
} 
```

...但是在重新编码时，它将是一个字符串而不是一个函数，除非您使用`eval()`它（尽管这很可能是不安全的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:17:44.197

这是无效的 JSON，Jackson 不支持；未来也不太可能得到支持。我建议将其设为常规 JSON 字符串，然后在必要时在 Javascript 端重新解析。

# vim - 如何让 macvim 像在 Destroy all Software 中一样执行 shell 命令？

> ID：12493292
> 
> 赞同：2
> 
> 时间：2012-09-19T10:53:26.257
> 
> 标签：vim, macvim, ansi

[当 Gary Bernhardt 从Destroy All Software](https://www.destroyallsoftware.com)执行 shell 命令时，例如：

```
:!ls 
```

该命令看起来好像“生成了一个新外壳”——它占据了整个窗口，并带有自己的主题。你可以在他主页的“一分钟演示视频”中看到它在 00:36 左右。

当我在我的 macvim 中做同样的事情时，结果是不一样的；该命令在“屏幕底部”运行，在大约 1/3 屏幕大小的“小缓冲区”内运行，并保留了我在 vim 中使用的主题。不方便的是，它还会按字面意思打印转义码，而不是使用颜色代码（之前[在 Stack Overflow 中已经询问过](https://stackoverflow.com/questions/6126575/vim-unix-commands-printed-in-color)这个特殊位，但我想知道 Gary 是如何做到的）。

我试过的：

1.  我看过 Gary 关于 vim 配置的 3 集：[The .vimrc](https://www.destroyallsoftware.com/screencasts/catalog/the-vimrc)、[Some Vim Tips](https://www.destroyallsoftware.com/screencasts/catalog/some-vim-tips)和[File Navigation in Vim](https://www.destroyallsoftware.com/screencasts/catalog/file-navigation-in-vim)。可悲的是，他们都没有提到做一些特殊的事情或安装与 shell 脚本完成方式相关的插件。
2.  我研究了 Gary 的[.vimrc](https://github.com/garybernhardt/dotfiles/blob/master/.vimrc)和[.vim 文件夹](https://github.com/garybernhardt/dotfiles/tree/master/.vim/)。如果相关的配置选项在某处，我找不到它。

因此，我的问题是：如何让 macvim 像在 DAS 中一样显示 shell 命令？

规格：我正在使用 MacVim、MacOsx 10.8.1、iterm2、zsh 和 ohmyzsh。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:20:49.690

好吧，我想我现在可以回答自己了。

Macvim 在 gui 模式下的控制台操作与在控制台模式下非常不同。

在控制台模式下，它就像在 DAS 中一样工作。全屏，颜色代码。

在 gui 模式下，它......好吧，它基本上很烂。屏幕底部，没有颜色代码。

因此，如果您想在 macvim 中获得漂亮的 shell 输出，请使用非 gui 模式。至少现在。（我没有研究过像[Conque](http://code.google.com/p/conque/)这样的插件）

# asp.net - 未触发按钮 ClickEvent

> ID：12493298
> 
> 赞同：-1
> 
> 时间：2012-09-19T10:53:52.907
> 
> 标签：asp.net, .net, vb.net, visual-studio-2010, asp.net-controls

下午所有，

我的网页上有两个按钮，用于锁定和解锁网页，以便用户可以锁定页面并对其进行编辑，而其他用户无法访问该记录，然后解锁该记录，以便其他用户可以对其进行编辑。

我遇到的问题是按钮不起作用，我不知道为什么。我正在使用图像按钮，但看起来事件没有被触发，我看不到问题，它让我发疯。有人可以看看我的代码...

```
 <asp:ImageButton ID="btnLock" runat="Server" 
       AlternateText="Click to lock record" ImageUrl="~/images/lock.png" />

   <asp:ImageButton ID="btnUnlock" runat="Server" 
       AlternateText="Click to unlock record" ImageUrl="~/images/unlock.png" />

   <asp:Label ID="lblUserName" runat="server" Font-Bold="True" Font-Size="Medium" 
            ForeColor="#CC3300"></asp:Label>
        <asp:HiddenField ID="hdnIsLockedBy" runat="server" />

 'VB Code for lock button...
  Protected Sub btnLock_Click(sender As Object, e As System.EventArgs) Handles btnLock.Click

    Dim lock As New WeeklyClass

    'Check that the Loggedby field is set to null so the user can then lock the record
    If String.IsNullOrEmpty(lock.LockedBy) Then
        'lock and add the username
        lock.LockedBy = User.Identity.Name
        'global variable islockedby
        hdnIsLockedBy.Value = User.Identity.Name
        'AgendaID required as part of the stored procedure 
        lock.AgendaID = Integer.Parse(lblAgendaNumber.Text)

    End If
    'Save to the database using the Class DAL and the Stored Procedure
    WeeklyClassDAL.LockWeeklyAgenda(lock)

    'Display buttons as expected result
    btnLock.Visible = False
    btnUnlock.Visible = True

    ' Refreshes fields on the page
    Response.Redirect("~/WeeklyAgenda.aspx?Edit=" & lblAgendaNumber.Text)

End Sub

  'VB Code for unlock button...
   Protected Sub btnUnlock_Click(sender As Object, e As System.EventArgs) Handles btnUnlock.Click

    Dim unlock As New WeeklyClass

    ' Check to see if the system has a username
    If hdnIsLockedBy.Value = User.Identity.Name Then
        'set the lockedby field to null
        unlock.LockedBy = hdnIsLockedBy.Value
        'pass the relevent agendaid
        unlock.AgendaID = Integer.Parse(lblAgendaNumber.Text)
    End If

    ' save to the database using the Class DAL
    WeeklyClassDAL.unLockWeeklyAgenda(unlock)

    'Display buttons as expected result
    btnLock.Visible = True
    btnUnlock.Visible = False

    ' Refreshes fields on the page
    Response.Redirect("~/WeeklyAgenda.aspx?Edit=" & lblAgendaNumber.Text)

End Sub 
```

任何帮助都是非常重要的。我已经看这个很久了，似乎找不到问题。

问候贝蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:55:30.953

您需要在按钮中指定 Click 事件。

```
OnClick="Button1_Click" 
```

所以你的按钮应该是：

```
<asp:ImageButton 
            ID="btnLock" 
            runat="Server" 
            AlternateText="Click to lock record" 
            ImageUrl="~/images/lock.png" 
            OnClick="btnLock_Click" />

<asp:ImageButton 
           ID="btnUnlock" 
           runat="Server" 
           AlternateText="Click to unlock record" 
           ImageUrl="~/images/unlock.png" 
           OnClick="btnUnloc_Click /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:55:50.330

您需要将 autopostback="true" 添加到按钮：

```
<asp:ImageButton ID="btnLock" runat="Server" autopostback="true"
       AlternateText="Click to lock record" ImageUrl="~/images/lock.png" /> 
```

否则后面的代码不会被触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:59:22.857

您尚未订阅 click 事件。您的控件不知道当用户单击它们时它必须调用这些函数。

订阅这些事件如下：

```
<asp:ImageButton ID="btnLock" runat="Server" 
       AlternateText="Click to lock record" ImageUrl="~/images/lock.png"  
       OnClick="btnLock_Click" />

   <asp:ImageButton ID="btnUnlock" runat="Server" 
       AlternateText="Click to unlock record" ImageUrl="~/images/unlock.png"            
       OnClick="btnUnloc_Click /> 
```

# curl - libcurl - 32 位但不是 64 位的 dll 错误

> ID：12493300
> 
> 赞同：2
> 
> 时间：2012-09-19T10:54:05.347
> 
> 标签：curl, libcurl

这是一个从帖子（[链接](https://stackoverflow.com/questions/12107885/libcurl-lib-where-can-i-get-it)）开始的新线程。

我已使用建议的 curl 库（[链接](http://curl.haxx.se/download/libcurl-7.19.3-win32-ssl-msvc.zip)）将 libcurl 构建到我的 dll 中。我在 libcurl_imp.lib 中链接并创建了用于调用 curl 方法的库例程。这一切都是一种享受——但只能在 64 位机器上使用？- 如果我尝试在 32 位 XP 机器上运行相同的 dll/二进制应用程序，它会立即转储。事实上，我所有的应用程序都中止了——它们没有引用我的新库例程，它们只是使用 dll。似乎因为我在我的 dll 中构建了 cURL 调用，所以它立即中止了生成的进程——我只是明白了——</p>

> 1 + 完成（134）
> 
> 5656 中止测试应用程序

我在 main 之后立即有一个 printf 语句，但在命令行上没有输出。

然后我从 dll 中删除了我所有的新库函数，除了一个之外，我所做的只是——</p>

`CURLcode res = curl_global_init(CURL_GLOBAL_DEFAULT);`

这一行导致我的所有应用程序在构建到我的 dll 时在 32 位上失败——将其注释掉，它们都可以工作。

如前所述，相同的 dll/二进制文件在我的 64 位机器上运行良好。64 位机器与我的 32 位机器具有相同的 curllib.dll 运行时。

对于信息，我的构建机器是 32 位的，我们有 32 位和 64 位的生产机器。

# .net - 使用 NLog 记录方法名称和参数

> ID：12493301
> 
> 赞同：5
> 
> 时间：2012-09-19T10:54:06.593
> 
> 标签：.net, nlog

如何使用 NLog 记录调用方法及其传入参数？如果不可能：我可以将一些参数传递给记录器，以便它们出现在最终的日志消息中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-05T19:12:09.473

NLog 允许您使用 LogEvent 捕获其他上下文：

```
Logger logger = LogManager.GetCurrentClassLogger();
LogEventInfo theEvent = new LogEventInfo(LogLevel.Debug, null, "Pass my custom value");
theEvent.Properties["MyValue"] = "My custom string";
theEvent.Properties["MyDateTimeValue"] = new DateTime(2015, 08, 30, 11, 26, 50);
theEvent.Properties["MyDateTimeValueWithCulture"] = new DateTime(2015, 08, 30, 11, 26, 50);
theEvent.Properties["MyDateTimeValueWithCultureAndFormat"] = new DateTime(2015, 08, 30, 11, 26, 50);
logger.Log(theEvent); 
```

然后可以使用提取`${all-event-properties}`

另请参阅：[https ://github.com/NLog/NLog/wiki/EventProperties-Layout-Renderer](https://github.com/NLog/NLog/wiki/EventProperties-Layout-Renderer)

另请参阅：[https ://github.com/NLog/NLog/wiki/All-Event-Properties-Layout-Renderer](https://github.com/NLog/NLog/wiki/All-Event-Properties-Layout-Renderer)

`[System.Runtime.CompilerServices.CallerMemberName] methodName`您可以通过使用as 参数创建自己的日志方法来自动捕获方法名称。另请参阅：[https ://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.callermembernameattribute](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.callermembernameattribute)

如果使用`LogManager.GetCurrentClassLogger()`获取类的记录器，那么您可以使用`${logger}`呈现类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T04:27:13.600

解决此问题的一种方法 - 在 NLog 记录器类下创建自定义包装器，这将需要额外的参数，如 className 和 methodName。之后自己构建消息。您也可以使用它：

*   [如何获取有关调用方法和类名的信息](https://stackoverflow.com/questions/14849367/how-to-determine-calling-method-and-class-name)
*   [MSDN 呼叫者信息 - 获取有关 Visual Studio 2012 呼叫者的信息](http://msdn.microsoft.com/en-us/library/hh534540%28v=vs.110%29.aspx)

# sql-server - EF5 如何添加缺失的关系

> ID：12493302
> 
> 赞同：1
> 
> 时间：2012-09-19T10:54:06.710
> 
> 标签：sql-server, asp.net-mvc, entity-framework

嗨，我定义了一个数据库第一个 EF5 模型。我的用户表有一个主键 guid UserGUID 和另一个具有自动递增整数的键字段 UserID。我创建了一个名为 UserCustomField 的表，该表具有 UserID，并且我在我的用户表中创建了对 UserID 的外键约束。

当我从数据库更新模型时，会生成与主键的所有外键关系，但不会生成与 Key 字段的关系。忽略通过我的所有表格使用 guid 的潜在意义..... A/ EF 不应该添加这种关系吗？B/我如何手动添加它？

干杯蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:13:56.453

A：不能。 B：你不能。

EF 只有在它们指向主键时才能使用关系，因此要么更改`User`表以用`UserID`作主键并删除`UserGuid`或更改表以`UserCustomField`指向表中。`UserID``UserGuid``User`

它不起作用的原因是您的数据库需要`UserID`在`User`表中标记为唯一（这意味着唯一约束）并且 EF 还不支持唯一约束。

# android - Android DownloadManager：下载失败，但 COLUMN_REASON 只返回“占位符”

> ID：12493306
> 
> 赞同：12
> 
> 时间：2012-09-19T10:54:46.490
> 
> 标签：android, download-manager

对于在不稳定的移动互联网连接上进行大量后台下载的应用来说，DownloadManager 似乎是正确的选择。

使用在网络上找到的教程代码，该应用程序能够请求从系统的 DM 下载，如下所示：

```
// in onCreate()
dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);

// in requestData()
Uri u = Uri.parse("http://server:8000/feed/data");
Request dreq = new Request(u);
dreq.setNotificationVisibility(Request.VISIBILITY_HIDDEN);
downloadID = dm.enqueue(dreq); 
```

该代码中的 URL 是本地计算机上的测试服务器。该 URL 有效，Android 模拟器中的浏览器可以检索该页面，并且当我的应用程序通过 DownloadManager 和上面引用的代码请求该页面时，服务器返回 HTTP 代码 200。

这是 ACTION_DOWNLOAD_COMPLETE BroadcastReceiver 中的相关代码，当 DM 检索到文件时会调用它。

```
Query q = new Query();
q.setFilterById(downloadID);
Log.i("handleData()", "Handling data");
Cursor c = dm.query(q);
if (c.moveToFirst()) {
  Log.i("handleData()", "Download ID: " + downloadID + " / " + c.getInt(c.getColumnIndex(DownloadManager.COLUMN_ID)));
  Log.i("handleData()", "Download Status: " + c.getInt(c.getColumnIndex(DownloadManager.COLUMN_STATUS)));
  if (c.getInt(c.getColumnIndex(DownloadManager.COLUMN_STATUS)) == DownloadManager.STATUS_SUCCESSFUL) {
    String uriString = c.getString(c.getColumnIndex(DownloadManager.COLUMN_LOCAL_URI));
    Log.i("handleData()", "Download URI: " + uriString);
  } else if (c.getInt(c.getColumnIndex(DownloadManager.COLUMN_STATUS)) == DownloadManager.STATUS_FAILED) {
    Log.i("handleData()", "Reason: " + c.getString(c.getColumnIndex(DownloadManager.COLUMN_REASON)));
  }
} 
```

奇怪的结果是这样的：

DOWNLOAD_STATUS 是 16（或 STATUS_FAILED），但原因是“占位符”。

这是为什么？服务器返回 200 状态码时为什么会失败？为什么DownloadManager没有给出任何理由？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-19T13:53:55.117

在这里回答自己。

这就是问题所在： COLUMN_REASON 不是字符串，而是数值。

```
Log.i("handleData()", "Reason: " + c.getInt(c.getColumnIndex(DownloadManager.COLUMN_REASON))); 
```

将返回一个可以使用的实际错误代码。

# delphi - " 已停止工作”的解释

> ID：12493308
> 
> 赞同：2
> 
> 时间：2012-09-19T10:55:12.903
> 
> 标签：delphi, windows-7, delphi-2009

当 Windows 显示此消息时，有人可以解释我吗？我该怎么做才能阻止我的程序抛出这个异常？

我有一个 Delphi Windows 窗体程序，它在执行一些 SQL 操作后会短暂地抛出此消息。所以我执行 SQL，起初一切似乎都很好，但是在窗口通过显示此消息杀死它之后的随机时间......

有趣的是，它只在调试时发生。当我不调试时，它运行非常稳定。编辑：使用 RAD-Studio2009

我不想完全关闭消息（只有我使用 Google 找到的提示）我想停止我的程序，给 Windows 一个这样做的理由。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:05:37.217

当未处理的异常从您的应用程序中泄漏时，Windows 会显示此消息。这是一种致命的情况。您的应用程序发生了一些非常错误的事情，因为应该全部捕获异常。

您需要弄清楚是什么引发了异常以及为什么它没有被捕获。第一步是展开错误对话框的详细信息，找出故障发生在哪个模块，故障是什么等等。这至少应该会产生一些高级别的线索。

Delphi 调试器很可能无法帮助您解决此类故障。您需要配置系统以安排由 Windows 错误报告服务生成故障转储。然后，您可以在 WinDbg 之类的工具中加载错误报告并尝试找出答案。

# django - RabbitMQ 上的 Heroku、Django 和 celery

> ID：12493317
> 
> 赞同：3
> 
> 时间：2012-09-19T10:55:34.433
> 
> 标签：django, heroku, rabbitmq, celery, gevent

我正在 Heroku 上构建一个 Django 项目。我知道 gunicorn 被推荐作为网络服务器，所以我需要一个事件循环类型的 worker，我为此使用 gevent。似乎猴子修补 gevent 为我完成了大部分工作，所以我可以有并发，但是我应该如何在没有真正线程或堵塞整个循环的情况下连接到 RabbitMQ？

我对此感到困惑，因为 Heroku 自己推荐 gunicorn、celery 和 RabbitMQ，但我不明白所有这些如何协同工作。

* * *

## 回答 #1

> 赞同：-7
> 
> 时间：2012-12-06T23:36:58.917

你知道芹菜和独角兽有不同的用途吗？

Gunicorn 是响应用户请求的网络服务器，为他们提供网页或 JSON 数据。

Celery 是一个异步任务管理器，即它允许您运行任意 python 代码，而不管对您的服务器的 Web 请求。

你了解这种区别吗？

# image - 在 MATLAB 中确定区域平均值

> ID：12493320
> 
> 赞同：1
> 
> 时间：2012-09-19T10:55:39.830
> 
> 标签：image, matlab, image-processing

我需要一些关于图像中 RGB 捕获的帮助。我正在使用 impixel 从图片中手动获取 RGB，但我想创建一个网格，比如说 20x20 px 框，它会自动告诉我每个框的 RGB 值。所以在一张图片中，假设我有 20 个盒子，它会告诉我 20 个 RGB 值。是的，如果有 20% 或更多的空白区域会忽略该 rgb 框。

你能给我一些链接或给我一个大致的想法如何做到这一点。

最好的祝福

PS图像只是一个.jpg，背景是白色的，中间有一个项目。

更新

这是我使用 impixel 收集 RGB 的代码

```
px=impixel(img);        
st = num2cell(px,1);
zstup = cellfun(@sum,st); 
zred = size(px,1);         
rez = bsxfun(@rdivide,zstup,zred); 
trez=round(rez); 
```

我想做的是：

[http://imageshack.us/photo/my-images/696/exsample.jpg/](http://imageshack.us/photo/my-images/696/exsample.jpg/)

因此，在我的代码中，像 A1、A2 等每个框都会返回像 trez 这样的 RGB 值。

所以在我的代码中，我将我的**trez**数据保存在一个表格中，就像在excel中让我们说220 | 23 | 34，现在如果我对另一个水果这样做，我将拥有

220 | 23 | 34

123 | 212| 78

等等...

回到自动化，A7 和 A 15 不是很好的 RGB 候选，因为它们有超过 50% 的白色区域，所以所有有 20% 白色的东西都将被忽略。所以A31好，需要保存RGB值。

所以总而言之，我将拥有 6 个 RGB 值，这些值必须像上面的示例一样自动保存。我知道如何保存到表中，我只需要帮助来收集每个盒子中的 rgb 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:56:36.527

根据您的确切需求，我看到了两种解决方案：

使用 ) 缩小图像`impyramid(img, 'reduce'`。这为您提供了一个较小的图像，其中包含原始图像的平均值。然后执行您之前所做的以访问单个像素。尽可能多地重复以获得 2x2、4x4、8x8 或更大的“盒子”。

或者，您可以使用将框（或任意形状）定义为 1 和 0 的矩阵，并使用该`regionprops`函数根据包含的字段获取有关图像内容的信息：

```
roi = zeros(size(img))
roi(1:10,1:10) = 1;
r = regionprops(roi, img, 'MeanIntensity')
average = r.MeanIntensity 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:01:36.520

这是我从文件夹中的图片自动抓取颜色的完整代码。所以程序会要求你选择一个文件夹，然后你会得到一个表格，里面有关于颜色和圆度的信息。我正在使用此代码从具有白色背景的水果中获取颜色。它自己做所有事情。希望它可以帮助某人。

```
clear all;
clc;

uiwait(msgbox('Chose the folder where your pictures are kept. Click OK to continue..'));

% Opening the folder

folder = uigetdir(pwd); 
filePattern = fullfile(folder, '*.jpg');
jpegFiles = dir(filePattern);
    for k = 1:length(jpegFiles)
        baseFileName = jpegFiles(k).name;
        fullFileName = fullfile(folder, baseFileName);
        [pathstr, name, ext] = fileparts(fullFileName);
        naziv_voca=name;

        %Taking RGB color

        slika = imread(fullFileName);
        [redovi stupci RGBboje] = size(slika);
        red_ink = floor(redovi/10);
        stup_ink = floor(stupci/10);
        r = 1;
        c = 1;
        for stupac = 1 : stup_ink  : stupci
            for red = 1 : red_ink : redovi
            red1 = red;
            red2 = red1 + red_ink;
            stupac1 = stupac;
            stupac2 = stupac1 + stup_ink;
            red2 = min(red2, redovi);
            stupac2 = min(stupac2, stupci);
            crveniS = slika(red1:red2, stupac1:stupac2, 1);
            zeleniS = slika(red1:red2, stupac1:stupac2, 2);
            plaviS = slika(red1:red2, stupac1:stupac2, 3);
            crvena(r,c) = mean2(crveniS);
            zelena(r,c) = mean2(zeleniS);
            plava(r,c) = mean2(plaviS);
            r = r + 1;
                if r >redovi
                    r = 1;
                end
            end
            c = c + 1;
                if c >1
                    c = 1;
                end
            end

        RGB=[crvena,zelena,plava];
        bijela=[255 255 255];
        tolerancija = 50;
        rez = RGB((abs(RGB(:,1)-bijela(1)) > tolerancija) | (abs(RGB(:,2)-bijela(2)) > tolerancija),:);
        trez=round(rez); 

        %Taking shape

        pic = rgb2gray(slika);
        threshold = graythresh(pic);
        bw = im2bw(pic,threshold);
        fbw = ones(size(bw))-imfill(ones(size(bw))-bw); 
        invImg = ~fbw;
        f = bwlabel(invImg);
        S = regionprops(f,'Area','Perimeter','centroid');
        Thr=100;
        S=S([S.Area]>Thr);
        score = (min(sqrt([S.Area]),[S.Perimeter]/4)./(max(sqrt([S.Area]), [S.Perimeter]/4))).^2;
        score=max(score);

        %Inserting data into table and creating data

        if exist('tablica.mat','file')
            vel=size(trez,1);
            for z=1:vel
                s=load('tablica');
                olddata=s.data;
                temp=trez(z,:);
                dataCell= [naziv_voca,num2cell(temp),num2cell(score)]; 
                data=[olddata;dataCell];
                save('tablica.mat','-append','data');
            end
        else
            stupac_rgb = num2cell(trez,1);
            zstupac = cellfun(@sum,stupac_rgb); 
            zred = size(trez,1);           
            rez = bsxfun(@rdivide,zstupac,zred); 
            trez=round(rez);
            data= [naziv_voca,num2cell(trez),num2cell(score)];
            save('tablica','data')
        end 

    end  
    uiwait(msgbox('Your information is saved')); 
```

# sql - Cakephp2.0 检索数据 find()

> ID：12493321
> 
> 赞同：1
> 
> 时间：2012-09-19T10:55:39.597
> 
> 标签：sql, cakephp

我有一个抛出错误的 find 参数，debugkit 说未知列，现在查看表格时我可以在那里看到它。

有一张`invoices`桌子 -`id, sender_id, receiver_id, total_amount, expiry_date`

还有一张`disputes`桌子 -`id, invoice_id, active, dispute_date`

这是来自争议模型

```
public $belongsTo = array(
    'Invoice' => array(
            'className' => 'Invoice',
            'foreignKey' => 'invoice_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
            )
        );

    public $hasOne = array(
        'Sender' => array(
            'className' => 'Account',
            'foreignKey' =>'sender_id',
            'associationForeignKey'  => 'accounts_id',),
        'Receiver'=> array(
            'className' => 'Account',
            'foreignKey' =>'receiver_id',
            'associationForeignKey'  => 'accounts_id',
            )
            ); 
```

这个发现在争议控制器中

```
$id = $this->Auth->User('account_id');

    $conditions=array('Invoice.receiver_id' => $id,
    'Dispute.invoice_id'=>'Invoice.id');

    $receiver = $this->Invoice->find('all', array(
    'conditions'=>$conditions));

    debug($receiver);

    $this->set('id', $id);
    $this->set('conditions', $conditions);
    $this->set('receiver', $receiver); 
```

目前在`$conditions`里面说`Column not found: 1054 Unknown column 'Dispute.invoice_id' in 'where clause'`

如果我从`$conditions`查找中删除它，则在调试时检索以下内容。

```
array(
    (int) 0 => array(
        'Invoice' => array(
            'id' => '5',
            'scheduled' => true,
            'paid' => false,
            'sender_id' => '3',
            'receiver_id' => '2',
            'template_id' => '3',
            'created' => '2012-02-06 00:00:00',
            'expiry_date' => '0000-00-00',
            'total_amount' => '0'
        ),
        'ReceiverAccount' => array(
            'id' => '2',
            'street' => '50 Simmington Circuit',
            'city' => 'Greenvale',
            'postcode' => '3059',
            'state' => 'VIC',
            'country' => 'Australia',
            'active' => true,
            'account_name' => 'Kialla Transport (Operations) Pty Ltd',
            'abn' => '2147483647'
        ),
        'SenderAccount' => array(
            'id' => '3',
            'street' => '31 Simmington Circuit',
            'city' => 'Greenvale',
            'postcode' => '3059',
            'state' => 'VIC',
            'country' => 'Australia',
            'active' => true,
            'account_name' => 'MGD Kialla Pty Ltd',
            'abn' => '2147483647'
        ),
        'Template' => array(
            'id' => '3',
            'name' => 'MGDKiallaConsulting',
            'description' => 'The invoice template for MGD Kialla Pty Ltd Consulting Fees',
            'account_id' => '3',
            'active' => true
        ),
        'FieldsInvoice' => array(),
        'Dispute' => array(
            (int) 0 => array(
                'id' => '5',
                'dispute_date' => '2012-03-01',
                'comment' => 'Amount on invoice is not the same as amount discussed',
                'active' => false,
                'invoice_id' => '5'
            )
        )
    ),
    (int) 1 => array(
        'Invoice' => array(
            'id' => '16',
            'scheduled' => false,
            'paid' => false,
            'sender_id' => '1',
            'receiver_id' => '2',
            'template_id' => '0',
            'created' => '2012-06-20 00:00:00',
            'expiry_date' => '0000-00-00',
            'total_amount' => '0'
        ),
        'ReceiverAccount' => array(
            'id' => '2',
            'street' => '50 Simmington Circuit',
            'city' => 'Greenvale',
            'postcode' => '3059',
            'state' => 'VIC',
            'country' => 'Australia',
            'active' => true,
            'account_name' => 'Kialla Transport (Operations) Pty Ltd',
            'abn' => '2147483647'
        ),
        'SenderAccount' => array(
            'id' => '1',
            'street' => '4 Ridley Court',
            'city' => 'Doncaster East',
            'postcode' => '3109',
            'state' => 'VIC',
            'country' => 'Australia',
            'active' => true,
            'account_name' => 'McDonalds',
            'abn' => '2147483647'
        ),
        'Template' => array(
            'id' => '0',
            'name' => 'SYSTEM',
            'description' => 'SYSTEM',
            'account_id' => '2',
            'active' => true
        ),
        'FieldsInvoice' => array(),
        'Dispute' => array(
            (int) 0 => array(
                'id' => '8',
                'dispute_date' => '2012-07-01',
                'comment' => 'Amount on invoice is not the same as amount discussed',
                'active' => true,
                'invoice_id' => '16'
            )
        )
    ),
    (int) 2 => array(
        'Invoice' => array(
            'id' => '18',
            'scheduled' => true,
            'paid' => false,
            'sender_id' => '3',
            'receiver_id' => '2',
            'template_id' => '0',
            'created' => '2012-06-25 00:00:00',
            'expiry_date' => '0000-00-00',
            'total_amount' => '0'
        ),
        'ReceiverAccount' => array(
            'id' => '2',
            'street' => '50 Simmington Circuit',
            'city' => 'Greenvale',
            'postcode' => '3059',
            'state' => 'VIC',
            'country' => 'Australia',
            'active' => true,
            'account_name' => 'Kialla Transport (Operations) Pty Ltd',
            'abn' => '2147483647'
        ),
        'SenderAccount' => array(
            'id' => '3',
            'street' => '31 Simmington Circuit',
            'city' => 'Greenvale',
            'postcode' => '3059',
            'state' => 'VIC',
            'country' => 'Australia',
            'active' => true,
            'account_name' => 'MGD Kialla Pty Ltd',
            'abn' => '2147483647'
        ),
        'Template' => array(
            'id' => '0',
            'name' => 'SYSTEM',
            'description' => 'SYSTEM',
            'account_id' => '2',
            'active' => true
        ),
        'FieldsInvoice' => array(),
        'Dispute' => array(
            (int) 0 => array(
                'id' => '10',
                'dispute_date' => '2012-07-01',
                'comment' => 'Amount on invoice is not the same as amount discussed',
                'active' => true,
                'invoice_id' => '18'
            )
        )
    ),
    (int) 3 => array(
        'Invoice' => array(
            'id' => '19',
            'scheduled' => true,
            'paid' => false,
            'sender_id' => '4',
            'receiver_id' => '2',
            'template_id' => '0',
            'created' => '2012-07-26 00:00:00',
            'expiry_date' => '0000-00-00',
            'total_amount' => '0'
        ),
        'ReceiverAccount' => array(
            'id' => '2',
            'street' => '50 Simmington Circuit',
            'city' => 'Greenvale',
            'postcode' => '3059',
            'state' => 'VIC',
            'country' => 'Australia',
            'active' => true,
            'account_name' => 'Kialla Transport (Operations) Pty Ltd',
            'abn' => '2147483647'
        ),
        'SenderAccount' => array(
            'id' => '4',
            'street' => '643 Somerton Road',
            'city' => 'Greenvale',
            'postcode' => '3059',
            'state' => 'VIC',
            'country' => 'Australia',
            'active' => true,
            'account_name' => 'Simmington Investments Pty Ltd',
            'abn' => '2147483647'
        ),
        'Template' => array(
            'id' => '0',
            'name' => 'SYSTEM',
            'description' => 'SYSTEM',
            'account_id' => '2',
            'active' => true
        ),
        'FieldsInvoice' => array(),
        'Dispute' => array()
    ),
    (int) 4 => array(
        'Invoice' => array(
            'id' => '20',
            'scheduled' => false,
            'paid' => false,
            'sender_id' => '5',
            'receiver_id' => '2',
            'template_id' => '0',
            'created' => '2012-07-28 00:00:00',
            'expiry_date' => '0000-00-00',
            'total_amount' => '0'
        ),
        'ReceiverAccount' => array(
            'id' => '2',
            'street' => '50 Simmington Circuit',
            'city' => 'Greenvale',
            'postcode' => '3059',
            'state' => 'VIC',
            'country' => 'Australia',
            'active' => true,
            'account_name' => 'Kialla Transport (Operations) Pty Ltd',
            'abn' => '2147483647'
        ),
        'SenderAccount' => array(
            'id' => '5',
            'street' => '2 Everingham Court',
            'city' => 'Greenvale',
            'postcode' => '3059',
            'state' => 'VIC',
            'country' => 'Australia',
            'active' => true,
            'account_name' => 'NG Technologies',
            'abn' => '2147483647'
        ),
        'Template' => array(
            'id' => '0',
            'name' => 'SYSTEM',
            'description' => 'SYSTEM',
            'account_id' => '2',
            'active' => true
        ),
        'FieldsInvoice' => array(),
        'Dispute' => array()
    ),
    (int) 5 => array(
        'Invoice' => array(
            'id' => '21',
            'scheduled' => false,
            'paid' => false,
            'sender_id' => '6',
            'receiver_id' => '2',
            'template_id' => '0',
            'created' => '2012-07-30 00:00:00',
            'expiry_date' => '2010-11-10',
            'total_amount' => '0'
        ),
        'ReceiverAccount' => array(
            'id' => '2',
            'street' => '50 Simmington Circuit',
            'city' => 'Greenvale',
            'postcode' => '3059',
            'state' => 'VIC',
            'country' => 'Australia',
            'active' => true,
            'account_name' => 'Kialla Transport (Operations) Pty Ltd',
            'abn' => '2147483647'
        ),
        'SenderAccount' => array(
            'id' => '6',
            'street' => '20 Ridley Court',
            'city' => 'Doncaster',
            'postcode' => '3109',
            'state' => 'VIC',
            'country' => 'Australia',
            'active' => true,
            'account_name' => 'KFC',
            'abn' => '2147483647'
        ),
        'Template' => array(
            'id' => '0',
            'name' => 'SYSTEM',
            'description' => 'SYSTEM',
            'account_id' => '2',
            'active' => true
        ),
        'FieldsInvoice' => array(),
        'Dispute' => array()
    )
) 
```

我想要做的只是检索他们有争议信息的发票信息，即争议.invoice_id=invoice.id 但它会引发错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:41:30.373

您可以使用临时删除关联，这在您检索数据的方法中没有用

$this->User->unbindModel ( array ('belongsTo' => array ('Group' ), 'hasOne' => array ('UsersChicken' ) ) );

类型函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:46:40.873

尝试使用**可包含**行为：

```
$this->Invoice->Behaviors->attach('Containable');

$this->Invoice->contain('Dispute' => array('conditions' => array('Dispute.invoice_id' => 'Invoice.id')));
$receiver = $this->Invoice->find('all', array('conditions' => array('Invoice.receiver_id' => $id)));

$this->Invoice->Behaviors->detach('Containable'); 
```

参考：

*   [可容纳](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

# image-processing - ROC 曲线交叉验证

> ID：12493326
> 
> 赞同：3
> 
> 时间：2012-09-19T10:55:58.567
> 
> 标签：image-processing, machine-learning, computer-vision, pattern-recognition

如何为交叉验证生成 ROC 曲线？

对于单个测试，我认为我应该对 SVM 的分类分数进行阈值化以生成 ROC 曲线。

但我不清楚如何为交叉验证生成它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T08:44:52.033

经过一轮完整的交叉验证后，所有观察都被分类一次（尽管通过不同的模型），并且已经给出了属于感兴趣类别的估计概率，或类似的统计数据。这些概率可用于生成 ROC 曲线，其方式与在外部测试集上获得的概率完全相同。当您将分类阈值从 0 更改为 1 时，只需计算分类错误率即可。

但是，通常您希望执行多轮交叉验证，因为性能会根据折叠的划分方式而有所不同。如何计算所有回合的平均 ROC 曲线对我来说并不明显。我建议将它们全部绘制并计算平均 AUC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T16:51:46.063

作为 Backlin 的后续行动：

不同运行的 k-fold 或 leave-n-out 交叉验证的结果变化表明模型的不稳定性。这是有价值的信息。

*   当然，您可以合并结果并只生成一个 ROC。
*   但是您也可以绘制曲线集，
    例如 R 包[ROCR](http://rocr.bioinf.mpi-sb.mpg.de/)
*   或计算不同阈值的中位数和IQR，并构建一个描述这些变化的带。
    这是一个示例：阴影区域是在 8 倍交叉验证的 125 次迭代中观察到的四分位间距。细黑色区域包含一个特定阈值的一半观察到的特异性-敏感性对，中位数用 x 标记（忽略 + 标记）。 ![迭代交叉验证的 ROC](../Images/3f24c6f99d32dffedb256b2ff14b6091.png)

# html - Twitter Bootstrap - 表单字段顶部的标签未对齐

> ID：12493329
> 
> 赞同：5
> 
> 时间：2012-09-19T10:56:12.820
> 
> 标签：html, css, forms, twitter-bootstrap

我正在尝试创建一个表单元素并排放置，它们的标签（与相应输入元素的开头对齐）在它们之上，如下所示：

```
Label                 Label2
+----------------+    +-------+
+----------------+    +-------+ 
```

以下内容无法按预期工作，因为“Label2”与输入元素略有不同：

```
<div class="controls controls-row">
    <label class="span9"><span>Label</span></label>
    <label class="span2"><span>Label2</span></label>
</div>
<div class="controls controls-row">
    <input type="text" class="span9" />
    <input type="text" class="span2" />
</div> 
```

我使用这种变通方法的结构让它工作：

```
<div class="controls controls-row">
    <div class="span9">
        <label><span>Label</span></label>
    </div>
    <div class="span2">
        <label><span>Label2</span></label>
    </div>
</div>
<div class="controls controls-row">
    <div class="span9">
        <input type="text" class="span12" />
    </div>
    <div class="span2">
        <input type="text" class="span12" />
    </div>
</div> 
```

那么这可能是一个错误吗？因为在[Twitter Bootstrap 页面上](http://twitter.github.com/bootstrap/base-css.html#forms)它说：

> 将 .span1 到 .span12 用于匹配相同大小的网格列的输入。

[这是一个重现我的问题的 JSFiddle](http://jsfiddle.net/kLuB3/)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T11:00:48.577

可能最简单的解决方法是删除 HTML 中两个`input`s 之间的空格：

```
<input type="text" class="span9" />
<input type="text" class="span2" /> 
```

至：

```
<input type="text" class="span9" /><input type="text" class="span2" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-20T21:09:55.527

我设法使用网格系统做到了：

```
<div class="row-fluid">
  <div class="span9">
    <label>First name</label>
    <input name="firstName" class="span12" placeholder="First name" type="text">
  </div>
  <div class="span3">
    <label>Last name</label>
    <input name="lastName" class="span12" placeholder="Last name" type="text">
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T11:17:59.813

它未对齐的原因是 first 之后的空格`<input>`。这个空格似乎是旧浏览器的“功能”：它们在`<input>`紧随其后的 other之后添加 Unicode SPACE (U+0020) 字符`<input>`，除非它们在标记中的同一行上。

您可以将祖先的字体大小减小到 0，因此该空间将不可见：

```
.controls.controls-row { font-size: 0; }​ 
```

# gcc - 内存对齐结构的大小

> ID：12493331
> 
> 赞同：1
> 
> 时间：2012-09-19T10:56:18.500
> 
> 标签：gcc, struct, memory-alignment

```
struct Test
{
    int a;
    char b;
    int c;
} __attribute__((packed, aligned( 128 )))test; 
```

sizeof( test ) 返回 128 。

为什么尺寸不是 9 ？

内存是否四舍五入为 128 的倍数？

例如：

```
struct Test
{
 int b;
 char c;
} test; 
```

sizeof(test) 返回 8（四舍五入为 8 的倍数）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:01:50.677

如果要创建一个数组，`struct Test`那么每个元素都需要 128 字节对齐，因此结构的每个实例都需要填充到 128 字节的倍数以保持这一点。因此`sizeof(struct Test)`= 128。

# c# - 静态类中的非静态方法有什么意义？

> ID：12493332
> 
> 赞同：0
> 
> 时间：2012-09-19T10:56:27.503
> 
> 标签：c#, oop, static, scope

我看了看[这个](https://stackoverflow.com/questions/1179808/what-is-the-point-to-a-static-method-in-a-non-static-class)问题，我想知道相反的情况。为什么会需要？

那里有人说：

> 为什么你会有一个在类中而不是在模块中的“共享方法”？答案：在其类的实例之间共享它。

那么这很清楚为什么有必要在非静态类中使用静态方法。相反的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:00:45.013

相反（静态类中的实例方法）是不可能的，至少在 C# 中是不可能的。它会产生编译时错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:58:41.920

一个类只能`static`在它是一个嵌套类时声明——当您希望该嵌套类可以访问而不必创建包含类的实例时，您可以这样做。

除此之外，它只是一个普通类，它可以具有实例状态（非静态变量），并且您可以在该类中使用非静态方法，就像在任何其他类中一样......

例如，[`HashMap`包含一个`Entry`具有一些非静态方法](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#HashMap.Entry)的静态嵌套类。

ps：您刚刚添加了 C# 标记 - 我的回答与您的原始问题有关，标记为 Java。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T11:00:25.827

在 Java 中，静态方法在嵌套静态类中的工作方式与在非嵌套非静态类中的工作方式相同。

在给出的示例`main(String[] args)`中，必须是`static`

如果您有一个不使用的方法，`this`则最好（并且更简单）制作该方法`static`，以便清楚该方法不需要实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T11:05:02.930

静态类不能被实例化，所以在静态类中声明非静态方法是没有用的。

# ruby - 使用浮点数在Ruby中打开范围？

> ID：12493335
> 
> 赞同：3
> 
> 时间：2012-09-19T10:56:31.403
> 
> 标签：ruby

是否可以在 ruby​​ 中创建排除一个或两个端点的范围。那么处理开闭区间边界的数学概念呢？

例如，我能否定义一个从 1.0 到 10.0 的范围，不包括 1.0

说（用伪红宝石）

```
range = [1.0...10.0)

range === 1.0
=> false

range === 10.0
=> true 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T11:04:29.323

Ruby 中的`Range`类仅支持封闭和半开（右开）范围。但是，您可以轻松编写自己的代码。

这是 Ruby 中的半开范围示例：

```
range = 1.0...10.0

range === 1.0
# => true

range === 10.0
# => false 
```

Rubinius 中符合 Ruby 1.9 的`Range`类的总行数为 238 行 Ruby 代码。如果你不需要你的开放范围类来支持 Ruby 语言规范的每一个皱纹、极端情况、特殊情况、特质、向后兼容怪癖等等，那么你可以用比这少得多的东西来解决问题。

如果你真的只需要测试包含，那么这样的事情就足够了：

```
class OpenRange
  attr_reader :first, :last

  def initialize(first, last, exclusion = {})
    exclusion = { first: false, last: false }.merge(exclusion)
    @first, @last, @first_exclusive, @last_exclusive = first, last, exclusion[:first], exclusion[:last]
  end

  def first_exclusive?; @first_exclusive end
  def last_exclusive?;  @last_exclusive  end

  def include?(other)
    case [first_exclusive?, last_exclusive?]
    when [true,  true]
      first <  other && other <  last
    when [true,  false]
      first <  other && other <= last
    when [false, true]
      first <= other && other <  last
    when [false, false]
      first <= other && other <= last
    end
  end

  alias_method :===, :include?

  def to_s
    "#{if first_exclusive? then '(' else '[' end}#@first...#@last#{if last_exclusive? then ')' else ']' end}"
  end

  alias_method :inspect, :to_s
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T11:04:06.150

您可以使用 排除范围的最右边的元素`...`。请参阅下面的示例

```
(1..10).to_a # an array of numbers from 1 to 10 - [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

(1...10).to_a # an array of numbers from 1 to 9 - [1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T11:05:22.193

使用从头到尾运行构建`..`的范围。那些使用`...`不包括最终值创建的。

```
('a'..'e').to_a    #=> ["a", "b", "c", "d", "e"]
('a'...'e').to_a   #=> ["a", "b", "c", "d"] 
```

[在这里](http://www.ruby-doc.org/core-1.9.3/Range.html)查看更多

您也可以轻松编写自己的 Range 来排除起始值。

对于浮动范围：

```
(1.0..10.0).step.to_a # => [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0]
(1.0...10.0).step.to_a # => [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0]
(1.0..10.0).step(2.0).to_a # => [1.0, 3.0, 5.0, 7.0, 9.0]
(1.0...10.0).step(2.0).to_a # => [1.0, 3.0, 5.0, 7.0, 9.0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-15T17:47:49.883

几年后但是......利用案例陈述按出现顺序评估每个标准并根据其第一次匹配遵循路径的事实怎么样。在示例中，1.0 总是什么都不做，即使它在技术上是第二个“when”的有效值。

```
case myvalue
    when 1.0
      #Don't do anything (or do something else)
    when 1.0...10.0
      #Do whatever you do when value is inside range 
      # not inclusive of either end point
    when 10.0
      #Do whatever when 10.0 or greater
    end 
```

# android - Android - 在我的应用中禁用接近传感器

> ID：12493336
> 
> 赞同：4
> 
> 时间：2012-09-19T10:56:35.960
> 
> 标签：android

我正在开发一个应用程序，该应用程序允许用户从应用程序本身拨打电话，一旦呼叫开始，用户就可以返回应用程序执行一些 UI 操作。

我目前的问题是，一旦呼叫开始，接近传感器就会启用，这使得几乎无法使用该应用程序（取决于传感器的灵敏度 - 每台设备）。

有没有办法控制传感器？例如，我想在我的活动可见时禁用传感器，并在不可见时重新启用它。

谢谢，里奥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:52:09.517

尝试`WakeLock`在您的应用程序代码中设置......如下所示......

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);

PowerManager.WakeLock wl = pm.newWakeLock( PowerManager.FULL_WAKE_LOCK, "FullWakeLock" ); 
```

希望它会帮助你...

# ruby-on-rails-3 - 耙中止！:name:Symbol 的未定义方法“map”

> ID：12493337
> 
> 赞同：8
> 
> 时间：2012-09-19T10:56:39.843
> 
> 标签：ruby-on-rails-3, rake

我正在尝试将参数传递给 Rake 任务并访问我的模型，如“[如何将命令行参数传递给 rake 任务](https://stackoverflow.com/questions/825748/how-do-i-pass-command-line-arguments-to-a-rake-task)”和“ [Rails rake 任务是否提供对 ActiveRecord 模型的访问？](https://stackoverflow.com/questions/876396/do-rails-rake-tasks-provide-access-to-activerecord-models) ”中所述。

但是添加`=> :environment`到此代码：

```
require 'rake'

namespace :genre do
    desc "Add a genre"
    task :add, :genre_id, :name => :environment do |t, args|
        puts args.name  
    end
end 
```

当我运行任务时给我这个错误：

```
rake genre:add['1','Abc']
rake aborted!
undefined method `map' for :name:Symbol

(See full trace by running task with --trace) 
```

如果我删除`=> :environment`它就可以了。

* * *

更新：

痕迹：

```
rake --trace genre:add['1','Abc']
rake aborted!
undefined method `map' for :name:Symbol
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb:254:in `set_arg_names'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task_manager.rb:29:in `define_task'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb:310:in `define_task'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/dsl_definition.rb:32:in `task'
/private/var/www/html/someapp.com/subdomains/someapp.heroku.com/someapp/lib/tasks/genre.rake:5:in `block in <top (required)>'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task_manager.rb:207:in `in_namespace'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/dsl_definition.rb:102:in `namespace'
/private/var/www/html/someapp.com/subdomains/someapp.heroku.com/someapp/lib/tasks/genre.rake:3:in `<top (required)>'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/engine.rb:425:in `load'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/engine.rb:425:in `block in load_tasks'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/engine.rb:425:in `each'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/engine.rb:425:in `load_tasks'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/application.rb:145:in `load_tasks'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
/private/var/www/html/someapp.com/subdomains/someapp.heroku.com/someapp/Rakefile:7:in `<top (required)>'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `block in load_rakefile'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `block in run'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/user/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/user/.rvm/gems/ruby-1.9.2-p318/bin/rake:19:in `load'
/Users/user/.rvm/gems/ruby-1.9.2-p318/bin/rake:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-19T17:52:00.447

看起来您的语法已关闭。尝试：

```
task :add, [:genre_id, :name] => :environment do |t, args| 
```

# github - Gitlab 无法访问您的 Gitolite 系统

> ID：12493339
> 
> 赞同：1
> 
> 时间：2012-09-19T10:56:44.083
> 
> 标签：github, gitolite, gitlab

我在 Ubuntu 服务器 12 上安装了 GitLab。
我按照以下步骤操作：http: [//blog.compunet.co.za/gitlab-installation-on-ubuntu-server-12-04/](http://blog.compunet.co.za/gitlab-installation-on-ubuntu-server-12-04/)

一切似乎都是正确的......但是当我尝试创建一个新项目时，我收到错误消息：

```
Gitlab was unable to access your Gitolite system. 
```

我运行了诊断工具（“ `bundle exec rake gitlab:app:status RAILS_ENV=production`”）

```
(in /home/gitlab/gitlab) Starting diagnostic
config/database.yml.............exists
config/gitlab.yml.............exists
/home/git/repositories/...........exists 
/home/git/repositories/ is writable?........YES 
remote: Counting objects: 12, done. 
remote: Compressing objects: 100% (8/8), done. 
Receiving objects: 100% (12/12), 1.12KiB, done. 
Resolving deltas: 100% (1/1), done. 
remote:Total 12 (delta 1), reused 0 (delta 0) 
Can clone gitolite-admin?..............YES 
UMASK for .gitolite.rc is 0007?............YES
 /home/git/share/gitolite/hooks/common/post-receive exists?............YES 
```

完成的

登录管理区域仅显示：

> 错误-> /home/gitlab/gitlab/tmp/gitlabhq-gitolite-1348050652/gitolite

`config/gitlab.yml`文件没问题。
存储库的权限就像教程一样（第 3 节 - 权限）。
我什至试图解除锁定...

你有什么建议来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:40:18.783

如果有帮助，我会发生非常相似的情况，除了在我的 gitlab 日志中出现以下错误：

> 错误 -> 拉取错误 -> 无法克隆 gitolite-admin repo

我比较了提到的[gitolite fork](https://github.com/wingrunr21/gitolite/commit/cb100415e7)的提交，发现那里的更改已经在我的 gitlab 版本中到位。

我最终停止了 gitlab 相关服务，删除了 gitlab *tmp*目录的内容，然后重新启动了 gitlab 相关服务。

之后，一切似乎都运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:33:02.143

如果问题来自[此 gitolite fork 的此提交中](https://github.com/wingrunr21/gitolite/commit/cb100415e7)修复的权限正则表达式，您可以查看“ [GitHub 提示：将提交下载为补丁](http://chem-bla-ics.blogspot.fr/2011/01/github-tip-download-commits-as-patches.html)”：

`.patch`可以通过在其 url 末尾添加 a 来下载您的提交： **[patch](https://github.com/wingrunr21/gitolite/commit/cb100415e7.patch)**。

这样，您可以将它应用到您当前的 gitolite 源（甚至不使用 git 本身，只需使用[`patch`command](http://en.wikipedia.org/wiki/Patch_%28Unix%29)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:05:29.123

通过遵循标题为“禁用本地主机和您的域的 StrictHostKeyChecking”的安装说明部分并为我的 gitolite 主机添加一个新部分，该部分设置为服务器的 IP 地址而不是本地主机，我能够在我的服务器上解决此问题。打开：

```
/etc/ssh/ssh_config 
```

并添加以下行：

```
Host [gitolite hostname/IP here]
    StrictHostKeyChecking no
    UserKnownHostsFile=/dev/null 
```

（用适当的主机名/IP替换括号部分）

它已经在设置步骤中，但我之前跳过了它，因为我不明白它的建议。否则，SSH 客户端会尝试显示是/否提示以接受新主机名，而 Ruby 后端会将其解释为连接 gitolite 失败。

# scala - Scala DSL - 函数对象的隐式方法

> ID：12493345
> 
> 赞同：2
> 
> 时间：2012-09-19T10:56:55.207
> 
> 标签：scala, dsl

在我的 DSL 中，我希望能够这样做：

```
val a = 5

Parse("TYPE") {
  a match {
    case 3 => info("almost")
    case s: String => error("wrong type")
    case 5 => info("you won!")
    case _ => error("omg")
  }
} 
```

带输出

```
[INFO] TYPE: you won! 
```

where`Parse`是一个函数对象，它有`apply(String)`,`info(String)`和`error(String)`方法：

```
object Parse {

  def apply(name: String)(parseF: => Unit) { parseF }
  def info(text: String) { println("[INFO] " + name + ": " + text) }
  def error(text: String) { println("[ERROR] " + name + ": " + text) }

} 
```

诀窍是`info`and`error`方法的输出应该以某种方式对`Parse`对象来说是本机的，并通过如上所示的示例构造消息。因此，他们

1.  必须像示例中一样可访问，无需任何导入。
2.  必须有权访问传递给的第一个参数`Parse()`（示例中为“TYPE”）。
3.  在工作期间不得创建任何实例或额外对象。

这是一个理想的描述。我认为这将需要更多样板文件。请建议，我怎样才能做到这一点？

**编辑：**我最初的猜测是在方法中声明`info`and`error`方法`apply`并没有使它们在`parseF`传递的方法中可见。嗯，不出所料..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:29:26.927

也许是这样的：

```
object Parse {
  val currentName = new util.DynamicVariable("<none>")
  def apply(name: String)(parseF: => Unit) = currentName.withValue(name)(parseF)
  def info(text: String) = println("[INFO] %s: %s" format (currentName.value, text)
}

// usage
import Parse._ // there's no other way to get ability to call 'info' without 'Parse'.
Parse("TYPE") {
  // some code
  info("some info") // prints: [INFO] TYPE: some info
}

info("some other info") // prints: [INFO] <none>: some other info 
```

如果需要，如果在块外调用它很容易`info`抛出异常。`Parse {}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:12:14.970

没有满足 1-3 的解决方案。您可以使用语法略有不同的 1 和 2 或 2 和 3。

1 和 2)

```
class Parse(val s:String) {
  def info....

}

new Parse("TYPE") {

} 
```

2 和 3)

```
object Parse {
  def apply(s:String)(f:String=>Unit) = ...
}

Parse("TYPE")(s => {

}) 
```

# .htaccess - 如果其他段与字符串 .htaccess 匹配，则删除 url 段

> ID：12493348
> 
> 赞同：0
> 
> 时间：2012-09-19T10:57:09.437
> 
> 标签：.htaccess, rewrite

我有这样的网址：

```
http://www.domain.com/account/home
http://www.domain.com/account/settings/email
http://www.domain.com/account/widget
http://www.domain.com/account/widget/2
http://www.domain.com/account/... 
```

我只想在**小部件**位于第二段时重写 url，并且在没有第一段**帐户**的情况下重写它，如下所示：

```
http://www.domain.com/widget
http://www.domain.com/widget/2
http://www.domain.com/widget/... 
```

我该怎么做呢？我知道如何完全但不是选择性地删除**帐户。**

NB**帐户**是我的网站所在的子文件夹。

**[编辑]**

我发现这行得通，这是最好的方法吗？

```
RewriteEngine on
RewriteRule ^account/widget/(.*)$ /widget/$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:35:45.160

```
RewriteEngine on
RewriteRule ^account/widget/(.*)$ /widget/$1 [L] 
```

# javascript - 带有输出映射的 JavaScript 混淆器

> ID：12493349
> 
> 赞同：2
> 
> 时间：2012-09-19T10:57:14.320
> 
> 标签：javascript, obfuscation

我有一个 Javascript API，我想在线使用它并对未经授权的用户进行混淆处理。我的类名在代码中的字符串中使用（即它是动态的），而且我还有一些在 XML 文件中的类名，所有这些都需要进行模糊处理，以使整体可用。我的想法是使用 Javascript 混淆器，它能够为我提供每个混淆符号的原始和新（无意义）名称的映射。然后我就可以对 js 和 XML 进行后处理，以便在那里应用相同的映射。我查看了 Google 的 Closure Compiler 和 UglifyJS，但似乎都没有提供这张地图。我现在正在研究 Jscrambler 和其他非自由混淆器。任何人都可以推荐一个能够正确混淆代码并为我提供进行此后处理所需的工具吗？谢谢R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:50:58.477

我认为您可以使用[jscambler API](https://jscrambler.com/en/webapi/v2/rest#symbol_table)提供的符号表来做到这一点：

> “符号表包含表示源代码名称及其替换的键值对。”

# python - 列表构造中的元组解包（python3）

> ID：12493351
> 
> 赞同：5
> 
> 时间：2012-09-19T10:57:18.950
> 
> 标签：python, python-3.x, python-3.2, iterable-unpacking

我很想在作业的右侧使用元组解包：

```
>>> a = [3,4]

>>> b = [1,2,*a]
  File "<stdin>", line 1
SyntaxError: can use starred expression only as assignment target 
```

当然，我可以这样做：

```
>>> b = [1,2]
>>> b.extend(a)
>>> b
[1, 2, 3, 4] 
```

但我认为这很麻烦。我错过了一点吗？一个简单的方法？有这个计划吗？或者是否有理由明确没有在语言中使用它？

部分问题在于所有容器类型都使用构造函数，该构造函数期望可迭代并且不接受 *args 参数。我可以子类化，但这会给其他人应该阅读的脚本引入一些非 Python 的噪音。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T11:01:09.077

您可以使用添加运算符：

```
a = [3, 4]
b = [1, 2] + a 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T11:00:59.847

您有几个选择，但最好的选择是使用列表连接 ( `+`)：

```
b = [1,2] + a 
```

* * *

如果您真的希望能够使用该`*`语法，您可以创建自己的列表包装器：

```
def my_list(*args):
    return list(args) 
```

那么您可以将其称为：

```
a = 3,4
b = my_list(1,2,*a) 
```

我想这里的好处是`a`不需要是列表，它可以是任何序列类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T11:01:09.847

不，这不是计划的。`*arg`任意参数列表（和关键字`**kw`参数映射）仅适用于 python[调用调用（由](http://docs.python.org/py3k/reference/expressions.html#calls)[`*arg`和`**kw`函数签名](http://docs.python.org/py3k/reference/compound_stmts.html#function-definitions)镜像），以及[可迭代赋值](http://docs.python.org/py3k/reference/simple_stmts.html#assignment-statements)的左侧。

您可以简单地连接两个列表：

```
b = [10, 2] + a 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-23T05:54:53.477

这在 Python 3.5 中已修复，如[PEP 448](https://docs.python.org/3/whatsnew/3.5.html#whatsnew-pep-448)中所述：

```
>>> a=[3,4]
>>> b=[1,2,*a]
>>> b
[1, 2, 3, 4] 
```

# iphone - 导航控制器和 ViewDeck 库

> ID：12493352
> 
> 赞同：2
> 
> 时间：2012-09-19T10:57:26.953
> 
> 标签：iphone, objective-c, ios

我的视图平台库和导航控制器有问题，当我按下带有 popviewcontroller 的后退按钮时应用程序崩溃。是否有人在他们的应用程序中添加了带有导航控制器的视图面板？

我以这种方式初始化了deckView：

```
LeftViewController *leftViewController = [[LeftViewController alloc]initWithNibName:@"LeftViewController" bundle:[NSBundle mainBundle]];

CentraController *centralViewController = [[CentraController alloc]initWithNibName:@"CentraController" bundle:[NSBundle mainBundle]];

self.deckController = [[IIViewDeckController alloc]initWithCenterViewController:centralViewController leftViewController:leftViewController];

self.deckController.leftLedge = 100;
self.deckController.navigationControllerBehavior = IIViewDeckNavigationControllerContained;

[self.navigationController initWithRootViewController:deckController];
[window setRootViewController:self.navigationController]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T02:54:40.207

使用[源](https://github.com/Inferis/ViewDeck/blob/master/ViewDeckExample/AppDelegate.m)卢克：

```
ViewController *centerController = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
self.centerController = [[UINavigationController alloc]initWithRootViewController:centerController];

IIViewDeckController* deckController =  [[IIViewDeckController alloc] initWithCenterViewController:self.centerController leftViewController:self.leftController rightViewController:rightController]; 
```

# ios - UIImagePicker：保存电影时使用什么文件格式？

> ID：12493360
> 
> 赞同：0
> 
> 时间：2012-09-19T10:58:24.803
> 
> 标签：ios, file, format

当我使用 UIImagePicker 录制视频然后想将其保存到磁盘时，使用什么文件格式？换句话说..当我将文件放在磁盘上并想将其传输到服务器时，我应该使用哪种 MIME 类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:38:35.453

拍摄视频时使用`UIImagePickerController`的格式是 Apple 的 quicktime 格式 .MOV。

您正在寻找的 MIME 类型是`video/quicktime`

希望这可以帮助！

# visual-c++ - 错误 LNK2019：函数“int __cdecl fld_new”中引用了未解析的外部符号 __imp__debugf

> ID：12493370
> 
> 赞同：4
> 
> 时间：2012-09-19T10:58:53.400
> 
> 标签：visual-c++

我正在将我的项目从 VS 6 升级到 VS 2010，在发布模式下构建时，我遇到了以下错误。

```
 1>Creating library .\Release\JfFrpF32.lib and object .\Release\JfFrpF32.exp> 
 1>FLD_.obj : error LNK2019: unresolved external symbol __imp__debugf referenced in  function "int __cdecl fld_new(char *,unsigned char,unsigned char,short,char,char,unsigned char,short,char,double,double,short,char *,char,short,short)" (?fld_new@@YAHPADEEFDDEFDNNF0DFF@Z)
 1>Release/JfFrpF32.dll : fatal error LNK1120: 1 unresolved externals
 1>
 1>Build FAILED. 
```

请帮助我..提前谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T11:38:38.387

导致 LNK2019 的常见问题包括：

*   符号的声明包含拼写错误，因此它与符号的定义名称不同。

*   使用了函数，但参数的类型或数量与函数定义不匹配。

*   调用约定（__cdecl、__stdcall 或 __fastcall）在函数声明和函数定义的使用上有所不同。

*   符号定义在编译为 C 程序的文件中，符号在没有 extern "C" 修饰符的 C++ 文件中声明。在这种情况下，请修改声明。

有关更多信息，[请参见此处](http://msdn.microsoft.com/en-us/library/799kze2z%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:09:21.167

就我而言，即使我使用`extern "C"`了 ，我也得到了未解决的符号错误。
hpp 是

```
extern "C"
{
class A
{
public:
    void hi();
};
A* a;
DECLDIR int Connect();
}//extern 
```

而cpp是

```
#include "DatabasePlugin.hpp"// Include our header, must come after #define DLL_EXPORT

extern "C" // Get rid of name mangling
{   
    DECLDIR int Connect()
    {
        a = new A();
        a->hi();
        return 0;
    }//Connect
}//extern 
```

问题是我没有为这个`hi()`函数创建一个实现。添加它解决了这个问题。像这样：

```
extern "C" // Get rid of name mangling
{   
    void A::hi() {}

    DECLDIR int Connect()
    {
        a = new A();
        a->hi();
        return 0;
    }//Connect
}//extern 
```

`Hi()`必须事先声明`Connect()`也可能很重要。

# .net - 为批量操作实施网络挂钩

> ID：12493372
> 
> 赞同：3
> 
> 时间：2012-09-19T10:58:55.427
> 
> 标签：.net, rest, asp.net-web-api, webhooks

我希望将[Web 挂钩](http://www.webhooks.org/)作为应用程序 REST API 的一部分来实现。

最初，我们希望为 API 消费者实现一种机制来注册实体更新事件。因此，如果一个实体发生更改，我们会调用所有已为该实体上的更改事件注册的 webhook（作为注册过程的一部分，API 使用者可以包含额外的过滤条件，以确保他们只接收他们感兴趣的实体子集的回调在）。

现在 - 这对于用户发起的更改效果很好，会慢慢渗入，但我担心当大量更改发生时如何最好地处理这个问题 - 例如作为在 UI 中执行的批量操作的一部分，或者API使用者发生的大量变化。

到目前为止，我已经考虑过：

*   只需使用某种异步池为每个实体进行回调 - 我在这里看到的问题是规模并可能对订阅 Web 挂钩的那些应用程序造成损害。
*   排队每个 webhook 注册的更改记录，超过 10 秒的窗口，然后将单个 webhook 通知推送到 subscribe 以及受影响的实体列表 - 我在这里看到的问题是我们在操作和 webhook 之间引入了不必要的延迟，当事件刚刚进入时 - 这也会引入一些开销和复杂性，特别是如果在网络农场场景中实现这一点。
*   实际上将批量操作公开为网络挂钩 - 因此，如果执行批量删除，消费者将订阅它。因此，为单个实体更改设置挂钩不会收到任何用于批量更新/删除等的实体更改事件 - 他们必须通过批量操作 Web 挂钩来处理这个问题。

作为一些额外的细节 - 此应用程序中的批量操作可能包含 10 到大约 100,000 个实体。

有没有人为批量操作实施了网络挂钩，可以阐明他们如何决定实施这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:53:04.180

我们最近实现了 web 钩子作为我们的 REST API 的一部分，我们主要关心的也是批量操作。在我们的例子中，它是批量导入，用户可以通过我们的网络应用程序导入 excel 或 csv 文件中的记录。

我们的导入流程被设计成整个流程在一个事务中运行。因此，如果它失败了，我们只是回滚并且什么都不做，如果它成功完成，我们会向订阅的客户端发布一个 web hook 通知，其中包含一个巨大的主体，其中包含有关受影响实体的信息。

现在我不确定在您的应用程序中如何进行批量操作。如果它在交易中，那么你没有问题。否则，我建议将单动作和批量动作网络挂钩分开。我想这是使用 webhook 的缺点之一，你可以通过背靠背的 POST 请求来降低订阅者的数量。

# asp.net-mvc-3 - 是否可以在 MVC3 中将 System.Drawing.Color 与 ViewBag 一起使用？

> ID：12493374
> 
> 赞同：0
> 
> 时间：2012-09-19T10:58:59.140
> 
> 标签：asp.net-mvc-3

我的控制器中有一个 Viewbag，如何在不使用 CSS 的情况下更改文本颜色？我尝试使用 System.Drawing.Color 但颜色名称作为文本分配给 viewbag。这是我的控制器

```
public ActionResult change_color()
{

ViewBag.stackoverflow= "This text has to be red";

ViewBag.stackoverflow.ForeColor = System.Drawing.Color.Red;

return View()
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:03:31.533

不，您不能将该枚举与 ViewBag 一起使用。原因是 ViewBag 只是其他对象的占位符，因此将该变量分配给该属性甚至没有意义，因为`ForeColor`您尝试访问的属性应该在您放入 ViewBag 以保存的对象上。

在同样的意义上，为什么不做

```
ViewBag.AnyNumber = 5;
ViewBag.AnyNumber.ForeColor = System.Drawing.Color.Red; 
```

所以你给一个数字（不是文本，数字）分配颜色？

您基本上是在尝试执行`string.ForeColor`不存在的任务。

# php - 在 Yoast Wordpress SEO 插件中设置自定义规范 URL

> ID：12493375
> 
> 赞同：7
> 
> 时间：2012-09-19T10:59:00.137
> 
> 标签：php, seo, wordpress

*因无人回复而重发。*

我在使用 Wordpress SEO API 设置自定义规范标题时遇到了一些麻烦：http: [//yoast.com/wordpress-seo-api-docs/](http://yoast.com/wordpress-seo-api-docs/)

我有一个名为设计的自定义帖子类型，它使用自定义 URL 重写。它采用基本页面 /design/ 并向其添加设计名称，例如 /design/a-design/。默认情况下，Wordpress SEO 中的规范是 /design/ 页面。

我想做的是编写一个函数来确定它是否是设计页面并返回不同的规范。我可以通过这样做来测试它是否是设计页面，`if ($design == ""){`并且我尝试使用自定义永久链接 URL，但该功能只是完全删除了规范。

这是我的基本功能：

```
function design_canonical(){
    if ($design == "") {    
        // Leave blank and Yoast SEO will use default canonical for posts/pages
    }
    else {
        return $design['detailslink'];
    }
}
add_filter( 'wpseo_canonical', 'design_canonical' ) 
```

很明显做错了什么，但我不完全确定是什么。

想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T13:51:35.783

您可以尝试以下方法：

```
function design_canonical($url) {
    global $post;

    if ( get_post_type( $post->ID ) == 'design' ) {
        return site_url( '/design/' . $post->post_name );
    } else {
        // Do nothing and Yoast SEO will use default canonical for posts/pages
        return $url;
    }
}
add_filter( 'wpseo_canonical', 'design_canonical' ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-23T12:55:05.457

嗨，我无法回答上面的帖子，所以我只做另一个。

我尝试使用stealthyninja 的答案来解决类似的问题，它几乎奏效了。除了最后一部分：空的 else 语句。如果规则不匹配，它不会呈现任何输出。

也许 Yoast 在过去 2 年内更新了他的插件，所以我想我应该在这里提一下。

以下代码片段解决了我的问题：

```
function design_canonical($url) {
    global $post;

    if ( get_post_type( $post->ID ) == 'design' ) {
         return site_url( '/design/' . $post->post_name );
    } else {
         return $url;
    }
}
add_filter( 'wpseo_canonical', 'design_canonical' ); 
```

# c# - 将 HH.mm 格式的字符串解析为 TimeSpan

> ID：12493381
> 
> 赞同：28
> 
> 时间：2012-09-19T10:59:39.857
> 
> 标签：c#, .net, string, parsing, time

我正在使用**.NET framework v 3.5**，我需要将表示时间跨度的字符串解析为`TimeSpan`对象。

问题是使用**点**分隔符而不是冒号...例如`13.00`，或`22.30`

所以我想知道我是否必须替换`.`或`:`有更干净的方法来获得它。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-19T11:06:13.997

解析`DateTime`并使用它的`TimeOfDay`属性，它是一个`TimeSpan`结构：

```
string s = "17.34";
var ts = DateTime.ParseExact(s, "HH.mm", CultureInfo.InvariantCulture).TimeOfDay; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-19T11:03:41.767

**更新的答案：**

不幸的是，.NET 3 不允许使用自定义`TimeSpan`格式，因此您只能手动执行某些操作。我会按照您的建议进行替换。

**原始答案（仅适用于 .NET 4+）：**

使用[`TimeSpan.ParseExact`](http://msdn.microsoft.com/en-us/library/dd784501.aspx)，指定[自定义格式字符串](http://msdn.microsoft.com/en-us/library/ee372287.aspx)：

```
var timeSpan = TimeSpan.ParseExact("11.35", "mm'.'ss", null); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T11:03:19.783

```
string YourString = "01.35";

var hours = Int32.Parse(YourString.Split('.')[0]);
var minutes = Int32.Parse(YourString.Split('.')[1]);

var ts = new TimeSpan(hours, minutes, 0); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T11:12:29.147

对于**.Net 3.5**，您可以使用 DateTime.ParseExact 并使用[TimeOfDay](http://msdn.microsoft.com/en-us/library/system.datetime.timeofday%28v=vs.85%29.aspx)属性

```
string timestring = "12.30";
TimeSpan ts = DateTime.ParseExact(
                                  timestring, 
                                  "HH.mm", 
                                  CultureInfo.InvariantCulture
                                  ).TimeOfDay; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-01T16:11:50.780

如果 TimeSpan 格式是像这样“9:00 AM”的十二小时时间格式，那么使用带有格式字符串“h:mm tt”的 TimeSpan.ParseExact 方法，像这样

```
TimeSpan ts = DateTime.ParseExact("9:00 AM", "h:mm tt", CultureInfo.InvariantCulture).TimeOfDay; 
```

谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-02T11:11:15.110

试试这个（它对我有用）：

```
DateTime dt = Convert.ToDateTime(txtStartDate.Text).Add(DateTime.ParseExact(ddlStartTime.SelectedValue, "HH.mm", CultureInfo.InvariantCulture).TimeOfDay); 
```

startdate 将是一个类似于 28/02/2018 的字符串，而 ddlstarttime 是 HH 格式，例如 13.00

# ios - 如何知道用户何时更改应用设置

> ID：12493386
> 
> 赞同：0
> 
> 时间：2012-09-19T11:00:09.430
> 
> 标签：ios, notifications, nsuserdefaults, appsettings, settings.bundle

我想知道用户是否从“设置”应用更改了我的任何应用设置。

我尝试观察`NSUserDefaultsDidChangeNotification`，当用户更改任何应用程序设置并返回应用程序时，应用程序开始接收通知。但我发现，在设置应用程序（由用户）或代码中没有真正进行更改的其他情况下，也会发送此通知。

所以我想知道是否有任何方法只能检测用户对应用程序设置所做的更改。

# wordpress - 限制从 get_terms 中提取的帖子

> ID：12493387
> 
> 赞同：0
> 
> 时间：2012-09-19T11:00:10.433
> 
> 标签：wordpress

我有以下代码，它基本上提取了分类“类别”的术语列表。然后它会拉入该术语的每个帖子。

```
 $terms = get_terms('categories');

foreach ($terms as $term) {
  $wpq = array ('taxonomy'=>'categories','term'=>$term->slug);
  $myquery = new WP_Query ($wpq);
  $article_count = $myquery->post_count;
  echo "<h3 class=\"term-heading\" id=\"".$term->slug."\">";
  echo $term->name;
  echo "</h3>";
  if ($article_count) {
    echo "<ul>";
    while ($myquery->have_posts()) : $myquery->the_post();
      echo "<li><a href=\"".get_permalink()."\">".$post->post_title."</a></li>";
    endwhile;
    echo "</ul>";
  }
} 
```

我的问题是我将如何将查询限制为仅从每个术语中提取 1 个帖子？

任何帮助将不胜感激，干杯丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:03:55.970

您可以`post_count`在`$wpq`数组中使用

例如：- `$wpq = array ('taxonomy'=>'categories','term'=>$term->slug,'post_count' => 1);`

更多关于 WP_Query [http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:15:00.353

这是我的工作：

我只是更改了以下内容：

```
$wpq = array ('taxonomy'=>'categories','term'=>$term->slug,); 
```

到：

```
$wpq = array ('taxonomy'=>'categories', 'showposts' => 1, 'term'=>$term->slug,); 
```

# sql-server - 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围

> ID：12493397
> 
> 赞同：0
> 
> 时间：2012-09-19T11:00:52.143
> 
> 标签：sql-server, visual-studio-2010, c#-4.0

我正在尝试从数据库中读取数据，并将从日期时间选择器中选择的日期作为查询的值传递。我认为，由于错误的数据类型，我不断收到各种错误消息。

我在这里做错了什么？

请帮忙。

磷

```
 private void buttonRetrieveData_Click(object sender, EventArgs e)
    {
        openConnection();

        //TODO: Add function te retrieve data between dates enteren in datetimepickers
        DateTime datumVan = dateTimePickerVan.Value;

        DateTime datumTot = dateTimePickerTot.Value;

        string query = "select * from my_Table where date between '" + datumVan.ToShortDateString() + "' and '" + datumTot.ToShortDateString() + "' order by date desc";

        DataSet dset = new DataSet();
        SqlDataAdapter adapter = new SqlDataAdapter(query, connection);

        SqlCommandBuilder cb = new SqlCommandBuilder(adapter);

        adapter.Fill(dset, "my_Table");

        dataGridView1.DataSource = dset;
        dataGridView1.DataMember = "my_table";

        adapter.Update(dset, "my_Table");

        closeConnection();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:11:04.867

我知道 SQL datetime 类型的日期范围为：1753 年 1 月 1 日到 9999 年 12 月 31 日

.NET 日期时间最小值是 0001 年 1 月 1 日 00:00:00.0000000。

我建议你检查一下你没有落在范围之间。

这意味着如果您的日期时间选择器不是使用 SQL 最小值启动的，它可能会返回无效的 SQL 日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:03:07.003

我遇到了类似的问题，但我的解决方法很简单：

代替

```
+ datumVan.ToShortDateString() + "' and '" + datumTot.ToShortDateString() + 
```

我改为

```
+ datumTot.ToShortDateString() + "' and '" + datumVan.ToShortDateString() + 
```

试试看，如果这有帮助。

另外，您的日期是否正在通过使用 ToShortDateString() 转换为字符串，但是表中日期的格式是什么？

也许您也可以尝试以下查询：

select * from my_Table where CAST(date AS DATE) between CAST('" + ToShortDateString() + "' AS DATE) and CAST('" + datumTot.ToShortDateString() + "' AS DATE) order by date desc";

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:40:28.273

**不要将日期视为字符串**。就这么简单，一开始就避免将它们转换为字符串，这样就省去了一大堆麻烦。

所以，而不是：

```
string query = "select * from my_Table where date between '" + datumVan.ToShortDateString() + "' and '" + datumTot.ToShortDateString() + "' order by date desc"; 
```

改为：

```
string query = "select * from my_Table where date between @Van and @Tot order by date desc"; 
```

然后在命令对象中添加参数：

```
adapter.SelectCommand.Parameters.AddWithValue("@Van",datumVan);
adapter.SelectCommand.Parameters.AddWithValue("@Tot",datumTot); 
```

让 ADO.Net 和 SQL Server 处理将 .NET 日期时间值转换为 SQL Server 日期时间值的问题。

# mysql - MySQL 存储过程 WHILE 只给出最后一个结果

> ID：12493400
> 
> 赞同：3
> 
> 时间：2012-09-19T11:00:59.653
> 
> 标签：mysql, sql, stored-procedures, while-loop

我想为两个日期（@sdate，@edate）之间的每个日期提取一个计数，但它只给我最后一天的计数，而不是所有天的计数。

如何输出所有结果？这是我的存储过程。

```
DELIMITER $$
USE `cmd_storeinfo`$$
DROP PROCEDURE IF EXISTS `test2`$$
CREATE DEFINER=`USER`@`%` PROCEDURE `test2`()
BEGIN
  SET @sdate = (DATE_SUB(CURDATE(), INTERVAL 6 MONTH));
  SET @edate = (CURDATE());
  SET @x='';
  SET @Y='';
    WHILE @sdate <= @edate DO
       SELECT COUNT(*) INTO @y
       FROM cmd_storeinfo.strinfo 
       WHERE LiveDate <= @sdate AND DeinstallDate >= @sdate OR DeinstallDate IS
             NULL AND LiveDate IS NOT NULL
             AND CHAIN != 1 && CHAIN != 2 && CHAIN != 999
       GROUP BY @sdate
         SET @x = @sdate;
         SET @sdate = (DATE_ADD(@sdate, INTERVAL 1 DAY));
   END WHILE;
SELECT @x,@y;
END$$
DELIMITER ; 
```

谢谢你的帮助。丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:41:58.593

您应该尝试使用临时表。这是一个[很好的答案](https://stackoverflow.com/questions/5308969/creating-temporary-tables-in-mysql-stored-procedure)。

像这样的东西可以工作：

```
DELIMITER $$
USE `cmd_storeinfo`$$
DROP PROCEDURE IF EXISTS `test2`$$
CREATE DEFINER=`USER`@`%` PROCEDURE `test2`()
BEGIN
  CREATE TEMPORARY TABLE tmpTable (currentDate DATE, startDate INT);

  SET @sdate = (DATE_SUB(CURDATE(), INTERVAL 6 MONTH));
  SET @edate = (CURDATE());
  SET @x='';
  SET @Y='';
    WHILE @sdate <= @edate DO
       INSERT INTO tmpTable (currentDate, startDate)
       SELECT @sdate, COUNT(*)
       FROM cmd_storeinfo.strinfo 
       WHERE LiveDate <= @sdate AND DeinstallDate >= @sdate OR DeinstallDate IS
             NULL AND LiveDate IS NOT NULL
             AND CHAIN != 1 && CHAIN != 2 && CHAIN != 999
       GROUP BY @sdate
         SET @sdate = (DATE_ADD(@sdate, INTERVAL 1 DAY));
   END WHILE;
SELECT * FROM tmpTable;

DROP TEMPORARY TABLE IF EXISTS tmpTable;
END$$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:42:18.137

您应该使用[临时表](http://www.tutorialspoint.com/mysql/mysql-temporary-tables.htm)来存储所有值。

```
DELIMITER $$
USE `cmd_storeinfo`$$
DROP PROCEDURE IF EXISTS `test2`$$
CREATE DEFINER=`USER`@`%` PROCEDURE `test2`()
BEGIN
  SET @sdate = (DATE_SUB(CURDATE(), INTERVAL 6 MONTH));
  SET @edate = (CURDATE());
  SET @x='';
  SET @Y='';
  CREATE TEMPORARY TABLE tmpTable (x datetime,y bigint); -- creating tmp table
    WHILE @sdate <= @edate DO
       SELECT COUNT(*) INTO @y
       FROM cmd_storeinfo.strinfo 
       WHERE LiveDate <= @sdate AND DeinstallDate >= @sdate OR DeinstallDate IS
             NULL AND LiveDate IS NOT NULL
             AND CHAIN != 1 && CHAIN != 2 && CHAIN != 999
       GROUP BY @sdate

         SET @x = @sdate;
         insert into tmpTable (x,y) values (@x,@y); -- inserting values
         SET @sdate = (DATE_ADD(@sdate, INTERVAL 1 DAY));
   END WHILE;
SELECT x,y from tmpTable order by x; -- output temp table results
END$$
DELIMITER ; 
```

# jsf-2 - 如何在 Backbase Portal 5.2.1.2 中实现 JSF？

> ID：12493404
> 
> 赞同：3
> 
> 时间：2012-09-19T11:01:09.857
> 
> 标签：jsf-2, backbase-portal

我目前正在尝试将基本的 JSF (2.0) 支持添加到 Backbase Portal 5.2.1.2 以在我的自定义小部件中使用。

当我以静态方式访问我的小部件时（例如“.../portal/static/portal_name/widgets/widget_name/index.xhtml”），它似乎正在工作，但是当我在门户的上下文中查看我的小部件时（ .../portal/portals/portal_name/pages/index) 我的 JSF 标记显示在 HTML 源代码中，而不是解析后的输出。EL 变量（如#{msg.title}）也会发生同样的情况。

如果我在“普通”webapp 项目中使用相同的 JSF 设置，它也可以正常工作，所以在我看来，一定是 Backbase 特定的东西导致了这个问题。

我想知道是什么导致了这种情况发生，是否可以解决或规避，或者是否有人成功地在这个特定版本的 Backbase 中实现了 JSF。我知道在 Backbase 5.1 中实现 JSF 是可行的，但对我来说，恢复到该版本不是一个选项。

编辑 - 按请求添加了小部件的 index.xhtml（我的实际 index.xhtml 稍大，但这也失败了）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xml:lang="en">
<h:head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title>Help ribbon widget</title>
    <link rel="stylesheet" type="text/css" href="css/style.css" />
</h:head>
<h:body>
    <span class="left title">#{msg.help_title}</span>
    <h:outputText value="TEST"/>
</h:body>
</html> 
```

此外，如果有任何帮助，我正在为我的容器模板使用 Border_Layout。

当我转到 Google Chrome 检查器的网络选项卡并查看对小部件 index.xhtml 文件的请求时，我可以看到正确的输出，但由于某种原因，这与组合 html 中显示的内容不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T10:50:18.163

这种方法的问题是当前不希望小部件定义包含动态内容。

我猜在您的场景中， *Border_Layout* 容器是服务器端渲染 (SSR) 小部件。发生这种情况时，如果您的小部件的*src* URL 是相对的，则门户将简单地从磁盘读取文件，并且永远不会调用 faces servlet。这是正常的，定义应该是静态的。但是有两个直接的解决方案：

首先，您可以切换到客户端渲染 (CSR)。这将导致客户端对小部件定义发出 http 请求，并通过 faces servlet 访问它。实现这一点的最简单方法是使用不包含`<b:include>`标签的自定义页面模板。此解决方案确实意味着它不适用于禁用 JS。

但是，如果您希望继续使用 SSR，则可以为小部件的*src*属性使用绝对 url。这意味着服务器需要对小部件发出 http 请求，从而通过 faces servlet 运行它。这里还有一个问题；由于 Portal Server 期望小部件定义是静态的，它会积极缓存它，因此您需要关闭小部件缓存。

从长远来看，我不会真的推荐这两种解决方案。我建议您在单独的上下文中独立运行您的 JSF 应用程序，然后找到一种方法将其包含在小部件中。您可以尝试使用 Backbase Mashup Services 进行设置，但我推荐了一种简单的 iframe 方法。如果您需要，我可以为您提供更高级的 iframe Backbase 小部件，用于创建无缝 iframe（无滚动条等）。

如果您需要更多支持，我鼓励您在[https://my.backbase.com](https://my.backbase.com)注册。Backbase 的新支持站点，您应该在其中收到更多专门的帮助、文档和代码示例。

# iphone - 如何在 iPhone 中使用 settings.bundle 在自定义单元格中添加图像？

> ID：12493405
> 
> 赞同：1
> 
> 时间：2012-09-19T11:01:20.457
> 
> 标签：iphone, xcode, ios5.1

我为 iPhone 应用程序创建了一个设置屏幕，该屏幕在 iPhone 设置中可见。现在我需要在该屏幕内添加应用程序的图像徽标（附截图）

我正在使用 root.plist 进行设置。任何人指导我如何实现这一目标？

提前致谢。![截屏](../Images/1206dbc935befe6fde056132ece220ac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:21:28.547

I ended up this problem with following points:

those applications that are part of iOS only display that functionality otherwise it is not possible.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:10:16.463

The icon displayed will be a scaled down version of the Icon.png file by default. If you want something different add an icon sized at 29 x 29 pixels named Icon-Settings.png to your application.

# tridion - 让动态链接在经典 ASP 页面上工作

> ID：12493407
> 
> 赞同：5
> 
> 时间：2012-09-19T11:01:24.623
> 
> 标签：tridion, tridion-2011

我目前正在全新安装 Tridion 2011。我们之前使用的是 5.3 并且正在保留数据库。到目前为止，我已经安装了数据库、内容管理器、两个内容交付服务器，现在正在设置演示服务器。我们所有的网页都是使用经典的 asp 构建的。如果我希望我的 ASP 页面使用动态链接，我被告知应该手动安装 API（链接、代理和 WAI）（请参阅[https://stackoverflow.com/a/12428237/1113475](https://stackoverflow.com/a/12428237/1113475)）

我已通读文档，其中解释了如何将 API 安装为 .NET Web 服务。我不认为这是我想要的，因为我的网页都是经典的 asp。我假设我需要对`Content Delivery\roles\api\windows`目录中的 exe 文件做一些事情，但是当我运行它们时它们什么都不做。

在我的 asp 页面上运行以下代码时

```
Server.CreateObject("cd_link.ComponentLink") 
```

我得到错误

> 服务器对象错误“ASP 0177：800401f3”
> 
> Server.CreateObject 失败
> 
> /about/index.asp，第 196 行
> 
> 800401f3

...但这显然会发生，因为我没有安装链接器

### 附加信息

服务器是 64 位 Windows Server 2008。运行 IIS 7.5，但我的 Tridion 2011 应用程序池在 32 位模式下运行。

创建其他第三方对象工作正常。就像 Chilkat Crypt 库一样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T11:24:42.333

来自[实时文档](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_37579189E2264514837918B57EC3DCD1)：

1.  在每台运行 Content Delivery Server 角色的计算机上，打开 Windows 命令提示符，访问 SDL Tridion 2011 SP1 安装介质，导航到文件夹 Content Delivery\roles\api\windows。
2.  通过运行以下命令安装已弃用的 Windows 服务：

cd_broker.exe -安装

cd_wai.exe -安装

cd_link.exe -安装

# java - Java 从代码授予权限

> ID：12493410
> 
> 赞同：2
> 
> 时间：2012-09-19T11:01:43.600
> 
> 标签：java, permissions, policy

我目前正在使用以下方法设置策略文件：

```
policyURL =cl.getResource("res/policy/abc.policy");
System.out.println(policyURL.toString());
System.setProperty("java.security.policy", policyURL.toString()); 
```

问题是该文件会干扰其他正在运行的应用程序。

是否可以从代码授予权限并在应用程序停止时将其删除？我不想从 ProgramFiles 修改 java.policy。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:25:31.087

你不能通过以下属性在JVM上设置它：

```
java -Djava.security.manager -Djava.security.policy=res/policy/abc.policy 
```

我怀疑这不会影响其他正在运行的应用程序。

# matlab - 图上的标签无法在已部署的 Matlab 应用程序中显示

> ID：12493412
> 
> 赞同：2
> 
> 时间：2012-09-19T11:01:56.360
> 
> 标签：matlab, figure

我有一个使用 Builder JA 部署的 Matlab 应用程序。我将它合并到一个更大的基于 Java 的 Web 应用程序中。它建立在一台 Windows 机器上，上面有实际的 matlab，当我在那里测试它时工作正常。我已将应用程序部署到 Linux 服务器上，该服务器上只有 MCR。现在发生的事情是我可以通过网页运行应用程序，但生成的图形只显示图形而不显示文本（标题、轴标签等）。当我使用 WebFigure(gcf) 和使用 figtoImStream(gcf, jpg) 时都会发生这种情况，所以我认为这不是任何一种格式的问题。问题似乎出在 hardcopy.p 函数中，因为服务器日志显示错误

```
{Warning: Failed to draw text string} 
{> In /usr/local/MATLAB/MATLAB_Compiler_Runtime/v717/toolbox/matlab/graphics/hardcopy.p>hardcopy at 28
  In compiler/private/hardcopyOutput at 58
  In figToImStream at 73
  In Gaussian_WBfigures_jpg at 635} 
```

我看到一些事情表明这是 Matlab 寻找不存在的字体的问题，还有一些事情表明这是渲染器的问题。有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:24:17.963

尝试使用不同的字体或解释器绘制标签。在使用不同的解释器打印时，matlab 中存在错误报告。例如[http://www.mathworks.com/support/bugreports/398506](http://www.mathworks.com/support/bugreports/398506) , [http://www.mathworks.com/support/bugreports/309380](http://www.mathworks.com/support/bugreports/309380)

```
figure
text(0.5,0.5,'testa','Fontname','Arial')
text(0.5,0.6,'testa','Fontname','Times')
text(0.5,0.7,'testa','Fontname','Times','Interpreter','Tex')
text(0.5,0.8,'testa','Fontname','Times','Interpreter','Latex') 
```

# vb.net - vb.net datagridview中的组合框第一次不显示值

> ID：12493414
> 
> 赞同：2
> 
> 时间：2012-09-19T11:01:59.553
> 
> 标签：vb.net, datagridview, autocomplete, combobox, datagridviewcomboboxcell

以下是我的代码：

```
 Public Class Form1

Private DT_LocalTransactionList As DataTable

Private Sub DataGridView1_CellEnter(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.CellEnter
    DT_LocalTransactionList = New DataTable
    DT_LocalTransactionList.Columns.Add("TransactionName")
    DT_LocalTransactionList.Columns.Add("TransactionType")
    For iVisible As Integer = 0 To 5
        DT_LocalTransactionList.Rows.Add()
        DT_LocalTransactionList.Rows(iVisible).Item("TransactionName") = "Name " & iVisible
        DT_LocalTransactionList.Rows(iVisible).Item("TransactionType") = "Add " & iVisible
    Next
    If e.ColumnIndex = colName.Index Then
        Dim dgvCbo As New DataGridViewComboBoxCell
        dgvCbo = TryCast(DataGridView1(colName.Index, e.RowIndex), DataGridViewComboBoxCell)
        dgvCbo.DataSource = DT_LocalTransactionList
        dgvCbo.DisplayMember = "TransactionName"
        dgvCbo.ValueMember = "TransactionType"
    End If
End Sub

Private Sub DataGridView1_EditingControlShowing(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewEditingControlShowingEventArgs) Handles DataGridView1.EditingControlShowing
    Select Case Me.DataGridView1.CurrentCell.ColumnIndex

        Case colName.Index
            If TypeOf e.Control Is ComboBox Then
                Dim cb As ComboBox = TryCast(e.Control, ComboBox)
                cb.DropDownStyle = ComboBoxStyle.DropDown
                cb.AutoCompleteSource = AutoCompleteSource.ListItems
                cb.AutoCompleteMode = AutoCompleteMode.Suggest
                RemoveHandler cb.DrawItem, AddressOf GridCombo_DrawItem
                RemoveHandler cb.DropDownClosed, AddressOf cbDropDownClosed
                RemoveHandler cb.Validating, AddressOf GridCombo_Validating
                RemoveHandler cb.KeyDown, AddressOf GridCombo_KeyDown
                AddHandler cb.DrawItem, AddressOf GridCombo_DrawItem
                cb.DrawMode = DrawMode.OwnerDrawFixed
                AddHandler cb.DropDownClosed, AddressOf cbDropDownClosed
                AddHandler cb.Validating, AddressOf GridCombo_Validating
                AddHandler cb.KeyDown, AddressOf GridCombo_KeyDown
            End If
    End Select
End Sub

Private Sub GridCombo_DrawItem(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DrawItemEventArgs)
    Dim text As String = sender.GetItemText(sender.Items(e.Index))

    e.DrawBackground()

    Using br As New SolidBrush(e.ForeColor)
        e.Graphics.DrawString(text, e.Font, Brushes.Black, e.Bounds)
    End Using

    e.DrawFocusRectangle()
End Sub

Private Sub cbDropDownClosed(ByVal sender As Object, ByVal e As System.EventArgs)

End Sub

Private Sub GridCombo_Validating(ByVal sender As Object, ByVal e As System.ComponentModel.CancelEventArgs)
    Dim cb As ComboBox = TryCast(sender, ComboBox)

    If Not IsItemExistInList(cb) Then
        e.Cancel = True
    End If
End Sub

Private Sub GridCombo_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs)
    Dim cb As ComboBox = TryCast(sender, ComboBox)
    cb.Refresh()

    If e.KeyCode = Keys.Enter Then
        If IsItemExistInList(cb) Then
            System.Windows.Forms.SendKeys.Send("{TAB}")
        End If
    End If
End Sub

Public Function IsItemExistInList(ByRef cboCombo As ComboBox) As Boolean
    Dim blnContinue As Boolean
    Dim intCount As Integer

    blnContinue = False

    If cboCombo.Text.Trim = "" Then
        blnContinue = True
    End If

    If blnContinue = False Then
        For intCount = 0 To cboCombo.Items.Count - 1 And blnContinue = False
            If cboCombo.Text.Trim = cboCombo.GetItemText(cboCombo.Items(intCount)).Trim Then
                blnContinue = True
            End If
        Next
    End If

    IsItemExistInList = blnContinue
End Function

   End Class 
```

当我在 datagridview 的组合框控件中键入“n”时，它会显示自动完成功能中的所有值，然后选择一个并按下选项卡，它不会在该字段中显示所选值。当第二次做同样的事情时，它会在那里显示正确的选择。如何在第一时间实现那个东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:59:45.383

`CommitEdit`一旦编辑控件根据指定的条件进行验证，您应该查看DataGridView 的方法。

```
Private Sub GridCombo_Validating(ByVal sender As Object, ByVal e As System.ComponentModel.CancelEventArgs)
    Dim cb As ComboBox = TryCast(sender, ComboBox)

    If Not IsItemExistInList(cb) Then
        e.Cancel = True
    Else
        DataGridView1.CommitEdit(DataGridViewDataErrorContexts.CurrentCellChange)
    End If
End Sub 
```

在这种情况下，您可以忽略`CommitEdit`方法返回的值，因为提供的示例仅允许来自集合的值。因此，如果值不存在，则不会填充单元格。

推荐[阅读](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.commitedit%28v=vs.80%29.aspx)

我在使用时也经历过`DataGridViewComboBoxColumn`，它需要点击 2-3 次才能编辑单元格的值。我建议使用：

```
DataGridView1.EditMode = DataGridViewEditMode.EditOnEnter 
```

在某个起点。上面的代码本身详细说明了它的作用。

# php - 在 wordpress 插件创建中创建子菜单

> ID：12493416
> 
> 赞同：0
> 
> 时间：2012-09-19T11:02:02.500
> 
> 标签：php, wordpress

我创建了一个插件并使用此代码创建了一个菜单

```
add_filter('page_template', 'in_page_template');
function in_page_template()
{
    global $wpdb;
    $new_page_title = 'Packages';
    $sql = "SELECT * FROM wp_posts where post_name='" . $new_page_title . "';";
    $cnt_post = $wpdb->get_results($sql);
    if (!(is_page('Home'))) {
        $ppid = $_GET['page_id'];
        if (count($cnt_post) != 0) {
            $pid = $cnt_post[0]->ID;
            if ($pid == $ppid) {
                $page_template = dirname(__FILE__) . '/Packages.php';
                return $page_template;
            }
        }
    }
} 
```

如何为包页面创建子菜单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:30:34.877

```
add_action('init', 'create_initial_pages');
function create_initial_pages() {
$pages = array(
    array(
        'name'  => 'post_name',
        'title' => 'post_title',
        'child' => array(
            'page1-1' => 'National',
            'page1-2' => 'International'

        )
    ),

 );

 $template = array(
    'post_type'   => 'page',
    'post_status' => 'publish',
    'post_author' => 1
 );

 foreach( $pages as $page ) {
    $exists = get_page_by_title( $page['title'] );
    $my_page = array(
        'post_name'  => $page['name'],
        'post_title' => $page['title']
    );
    $my_page = array_merge( $my_page, $template );

    $id = ( $exists ? $exists->ID : wp_insert_post( $my_page ) );

    if( isset( $page['child'] ) ) {
        foreach( $page['child'] as $key => $value ) {
            $child_id = get_page_by_title( $value );
            $child_page = array(
                'post_name'   => $key,
                'post_title'  => $value,
                'post_parent' => $id
            );
            $child_page = array_merge( $child_page, $template );
            if( !isset( $child_id ) ) wp_insert_post( $child_page );
         }
     }
   }
} 
```

# sql - SQL 无法理解逻辑

> ID：12493422
> 
> 赞同：0
> 
> 时间：2012-09-19T11:02:35.547
> 
> 标签：sql, hsqldb

我有一个具有以下架构的板球数据库：

```
Bowl(BowlID, MatchID, Striker, Non-Striker, Bowler, Runs, OverNum)
 - Stores info for every ball
Match(MatchID, Team1, Team2, Date)
 - Stores all the matches 
```

我试图计算出比赛中倒数第二个球的百分比是多少。

所以首先我需要得到每场比赛的倒数第二个球。我真的不知道该怎么做。OverNum 列存储了球号，因此对于 2020 场比赛，这将从“0.1”开始到“19.6”（假设他们坚持了几局）。

会不会是这样的：

```
SELECT MatchID, MAX(OverNum) 
FROM Bowl 
WHERE OverNum 
NOT IN (SELECT Max(OverNum) FROM Bowl)
GROUP BY MatchID 
```

我无法确保它从每场比赛中获得倒数第二，而不是从整个碗桌中获得第二高的 OverNum...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:13:54.000

要获得倒数第二个球，请使用：

```
select *
from (
   select matchid, overnum,
          row_number() over (partition by matchid order by overnum desc) as rn
   from bowl
) t
where rn = 2; 
```

您没有提到您正在使用的 DBMS。以上是 ANSI 标准 SQL，几乎所有现代 DBMS 都支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:14:41.157

> 我试图计算出比赛中倒数第二个球的百分比是多少。

这些行中的一些东西：

```
SELECT 
    -- Consider each case where the runs scored on the
    -- penultimate ball is what you wanted as a '1' and rest as '0'
    (SUM(CASE Runs 
        WHEN @needed THEN 1
        ELSE 0
    END) * 100) / SUM(1),
FROM 
    Bowl b1
    JOIN 
    (
        // Penultimate ball in a given match.
        SELECT bNextMax.MatchId, Max(CONVERT(REAL, bNextMax.OverNum)) 
        FROM 
            Bowl bNextMax
            JOIN (
                SELECT MatchId, MAX(CONVERT(REAL, OverNum)) OverNum
                FROM Bowl 
                GROUP BY MatchID
            ) as bMax
            ON bNextMax.MatchID = bMax.MatchID AND bNextMax.OverNum != bMax.OverNum
    ) b2
    ON b1.MatchID = b2.MatchID AND b1.OverNum = b2.OverNum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:32:19.593

您需要使用稍微复杂的内部查询。我假设您当然使用的是 SQL Server，尽管 Oracle 实际上可能会使这更容易一些。

```
select * from Bowl b
where OverNum = 
(
    select top 1 OverNum from 
    (
        select top 2 OverNum 
        from Bowl 
        where Bowl.MatchID = b.MatchID 
        order by OverNum desc
    ) top2 
    order by OverNum asc
) 
```

# gwt - 创建 GWT RPC 服务

> ID：12493424
> 
> 赞同：0
> 
> 时间：2012-09-19T11:02:38.930
> 
> 标签：gwt, service, server-side, rpc

我正在尝试为带有`GWT`. 我`Google Web Application`在`Eclipse`没有示例代码的情况下创建了一个，现在我想添加该服务，但开发人员 Google 指南对我没有帮助。我不确定在哪里添加界面以及它是如何工作的。

如果我正确理解了谷歌文档，我必须添加 a`module`和 an `entry point class`，对吗？如果您能给我一些提示并帮助我如何创建 rpc 服务，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:13:28.933

如果您在 Eclipse 的“新建项目”向导中创建一个新的 GWT 项目，并选中“生成项目示例代码”，它将包括一个具有示例方法的功能齐全的 RPC 服务，然后您可以根据需要对其进行调整或复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:26:37.200

我不确定什么对你最有帮助。Google 开发人员指南对我来说已经足够（至少当我在 1.6 版开始使用它时）为我的 GWT 应用程序创建 RPC 服务。

**通用APP**

模块：是`.gwt.xml`文件。是的，你会需要它。GWT 编译器会自动找到它并尝试编译所有 GWT 代码（该`<source>`元素会告诉哪个子包包含将转换为 JS 的 Java 代码）。它还将告诉哪个类实现了 EntryPoint 接口。onModuleLoad 将是 javascript 在客户端页面中运行时执行的代码。

**RPC**

好吧，您应该首先尝试 UI 的东西，然后，当您有足够的信心时，再尝试服务器的东西。无论如何，方案是：

```
interface MyService extends RemoteService {
 List<String> doSomething(String sample, int other);
}

@RemoteServiceRelativePath("../path/to/servlet") // see later
intercace MyServiceAsync {
 void doSomething(String sample, int other, AsyncCallback<List<String>> callback);
} 
```

这些是接口。稍后是异步的。这就是您将从客户端使用的内容。始终调用和传递 AsyncCallback 的实现，它将接收（稍后，您不知道何时）结果。

第一个接口是同步接口。这就是你需要在服务器上实现的。您必须从 RemoteServiceServlet 类继承（它是已经完成所有值处理的 servlet 的实现），并实现您的接口。GWT 代码完成其余的工作（几乎）。

```
public class ServiceImpl extends RemoteServiceServlet implements MyService
{
 // implement the method normally
} 
```

您需要从客户端创建服务代理：

```
private static MyServiceAsync MY_SERVICE = GWT.create(MyService.class); 
```

是的。我知道 GWT 如何知道 MyserviceAsync 和 MyService 一起工作很奇怪。别担心。有用 ：）

只需像这样使用服务：

```
MY_SERVICE.doSomething("value", 111, new AsyncCallback<List<String>>() {
   // note that this code executes some time in the future when response from server is back
   public void onSuccess(List<String> result) {
      Window.alert("Server answered with " + result.size() + " elements!");
   }
   public void onFailure(Throwable t) {
      Window.alert("Server failed: " + t.getMessage());
   }
} 
```

**服务器路径**

您必须配置您的应用程序以使该 servlet 实现侦听 @RemoteServiceRelativePath 中指示的 URL。这就是客户端知道在哪里发出请求，而服务器知道哪个 servlet 处理该请求的方式。我建议使用：

`../my-service.gwt`作为相对路径（GWT 模块发布在`<ROOT>/module_name`

和

配置您的 Web 应用程序以使用 servlet`/my-service.gwt`

但这完全取决于您的喜好:)

无论如何，我认为谷歌教程是最好的。所以请复制粘贴。尝试和修改，直到你了解整个事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:10:39.213

Out of memory, don't have eclipse in front of me. First do create a test project with generated testcode, you can delete it afterward. Yes you will have to add a module. Create in client the two interfaces for the async calls, inherit it on server side. Hope I understood your question right.

# powermock - Javassist 3.17.0-GA 何时可用

> ID：12493431
> 
> 赞同：1
> 
> 时间：2012-09-19T11:03:05.020
> 
> 标签：powermock, javassist

任何人都知道 Javassist 3.17.0-GA 何时可用？

Javaassit 中有一个错误（在 3.17.0-GA 中修复）在与 Java 7 一起使用时会破坏 PowerMock： [https ://issues.jboss.org/browse/JASSIST-160?focusedCommentId=12718716&page=com.atlassian.jira .plugin.system.issuetabpanels:comment-tabpanel#comment-12718716](https://issues.jboss.org/browse/JASSIST-160?focusedCommentId=12718716&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12718716)

相关的 PowerMock 错误 [http://code.google.com/p/powermock/issues/detail?id=355](http://code.google.com/p/powermock/issues/detail?id=355)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-15T15:21:26.787

**它是可用的**。看起来更新版本已经解决了我的问题，我相信这与你的问题相似。我假设您的问题是[java.lang.VerifyError: Expecting a stackmap frame](https://stackoverflow.com/q/15122890/977087)的一些变体。

在编写 Javassist 的 3.19 版本时[可用](http://mvnrepository.com/artifact/org.javassist/javassist)。PowerMock [1.5.1](http://mvnrepository.com/artifact/org.powermock/powermock-core/1.5.1)也更新为使用 Javassist 3.18 GA。

* * *

**替代修复**
除了升级之外，其他推荐的解决方案之一是使用 JVM 参数 -XX:-UseSplitVerifier 来自Java 7 堆栈映射问题[的此处](http://code.google.com/p/powermock/issues/detail?id=355)[和](https://stackoverflow.com/q/15122890/977087)有关 java.lang.VerifyError 的 PowerMock 问题注册表的组合（其中你已经链接到）。

**IntelliJ中替代修复的实现**
我已将 -UseSplitVerifier 添加到我的 JUnit 运行器中，但也有关于将其添加到构建中的 Maven *Surefire*插件的建议，以使解决方案具有可移植性，如本文中推荐的[那样](https://stackoverflow.com/a/7579864/977087)。

# php - 使用 PHP 的同步函数

> ID：12493438
> 
> 赞同：13
> 
> 时间：2012-09-19T11:03:30.293
> 
> 标签：php, synchronization, synchronized

如何使 PHP 中的函数同步，以便不会同时执行相同的函数？第二个用户必须等到第一个用户完成该功能。然后第二个用户可以执行该功能。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T11:10:47.130

这基本上归结为在某个函数被锁定并且在第一个调用者从该函数返回之前无法执行的地方设置一个标志。这可以通过多种方式完成：

*   使用锁定文件（第一个函数锁定文件名“f.lok”，第二个函数检查锁定文件是否存在并根据该评估执行或不执行）
*   在数据库中设置一个标志（不推荐）
*   按照@JvdBerg 的建议使用信号量（最快）

在编写并发应用程序时，请始终注意竞争条件和死锁！

**使用信号量更新** （未测试）：

```
<?php

define('SEM_KEY', 1000);

function noconcurrency() {
    $semRes = sem_get(SEM_KEY, 1, 0666, 0); // get the resource for the semaphore

    if(sem_acquire($semRes)) { // try to acquire the semaphore. this function will block until the sem will be available
        // do the work 
        sem_release($semRes); // release the semaphore so other process can use it
    }
} 
```

PHP 需要使用 sysvsem 支持编译才能使用 sem_* 函数

这是在 PHP 中使用信号量的更深入的教程：

[http://www.re-cycledair.com/php-dark-arts-semaphores](http://www.re-cycledair.com/php-dark-arts-semaphores)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-19T11:07:02.217

您正在寻找[信号量](http://php.net/manual/en/book.sem.php)

请记住，使用信号量（或任何其他阻塞机制）可能会产生严重的性能问题，因为在信号量启动时无法处理请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:07:56.957

我的头顶上：

*   函数检查名为 isFunctionRunning 的数据库字段是否等于 1。如果不开始执行
*   您将名为 isFunctionRunning 的数据库字段更新为 1
*   函数在这里变魔术
*   您将名为 isFunctionRunning 的数据库字段更新为 0

但不知何故，我认为你试图做的是“错误的”，可以通过另一种方式实现。如果你说更多细节会有所帮助

编辑：不知道php信号量，上面的答案会更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-09T23:45:32.490

您可以使用`flock`带有“”（排他锁）标志的“”（文件锁定）函数`LOCK_EX`来创建一个自定义“同步”函数，该函数接受要同步的处理程序。

您可以在[这里](https://stackoverflow.com/a/52249188/2016554)找到代码。

我希望这有帮助。

# php - 从复选框发布多维数组

> ID：12493440
> 
> 赞同：2
> 
> 时间：2012-09-19T11:03:36.773
> 
> 标签：php, html, multidimensional-array

我已经看到了一些关于从复选框发布数组的问题，但是我还没有看到任何尝试做我想做的事情。

我有一个复选框列表，用于提交填充在数据库中 foreach 数据循环中的数据。

```
<input type="checkbox" name="phonelist[]" value="<?=strtoupper($device['id']);?>"/> 
```

这就是我目前为复选框电话列表返回多个项目的方式。但是，是否可以在复选框的相同值部分但在多维数组中的不同项目下添加另一个值？例如

```
<input type="checkbox" name="phonelist[][]" value="<?=strtoupper($device['id']);?><?=strtoupper($device['another value']);?>"/> 
```

我知道我的“伪代码”是错误的，但我希望它能传达我希望实现的想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T11:04:46.777

是的，为每个部分添加 id：

```
<input type="checkbox" name="phonelist[0][]" value="<?=strtoupper($device['id']);?><?=strtoupper($device['another value']);?>"/>
<input type="checkbox" name="phonelist[0][]" value="<?=strtoupper($device['id']);?><?=strtoupper($device['another value']);?>"/>
<input type="checkbox" name="phonelist[1][]" value="<?=strtoupper($device['id']);?><?=strtoupper($device['another value']);?>"/>
<input type="checkbox" name="phonelist[1][]" value="<?=strtoupper($device['id']);?><?=strtoupper($device['another value']);?>"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T11:06:25.307

我认为你最好这样处理：

```
<input type="checkbox" name="phonelist[<?=strtoupper($device['id']);?>]" value="<?=strtoupper($device['id']);?>"/> 
```

然后

```
<input type="checkbox" name="phonelist[<?=strtoupper($device['id']);?>][<?=strtoupper($device['another value']);?>]" value="<?=strtoupper($device['id']).strtoupper($device['another value']);?>"/> 
```

所以你仍然可以`foreach` `$_POST['phonelist']`但保持一个参考值。

# excel - Excel - 计算数据之间的最大差异

> ID：12493443
> 
> 赞同：6
> 
> 时间：2012-09-19T11:03:53.100
> 
> 标签：excel

晚上好 ！我想知道Excel是否提供了一个可以计算数据列表差异的最大值的内置函数。

例如，我们有 1、2、3、2、1。最大差值为 2 (3 - 1)。我知道如何用公式制作这个函数，但如果 Excel 提供了直接做这个的东西，那会很有趣。

谢谢 ！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T11:05:50.550

用这个：

```
Max(data_scope) - Min(data_scope) 
```

# java - 列表 从shutdownNow()返回的不能转化为提交的Runnable

> ID：12493449
> 
> 赞同：3
> 
> 时间：2012-09-19T11:04:13.600
> 
> 标签：java, shutdown, java.util.concurrent

下面是该类的源代码。

`shutdownNow()`我想验证未提交的任务是如何工作的。我在下面的代码中遇到的问题是`shutdownNow()`返回`List<FutureTask>`，而不是`List<Runnable>`我提交`List<Runnable>`的包含提交的`PrimeProducer`.

`In Below program I wanted to get the tasks which where not executed and their state so that I can reschedule them later. name() represents just state that I want to store.`

所以我无法转换为提交的任务。

```
class PrimeProducer implements Runnable {
private final SynchronousQueue<BigInteger> queue;

PrimeProducer(SynchronousQueue<BigInteger> queue) {
    this.queue = queue;
}

public void run() {
    try {
        BigInteger p = BigInteger.ONE;
        queue.put(p = p.nextProbablePrime());
    } catch (InterruptedException consumed) {
        System.out.println("Safe Exit");
        Thread.currentThread().interrupt();
    }

}

public String name() {
    return "PrimeProducer";
}

public static void main(String[] args) throws InterruptedException,
        ExecutionException {
    PrimeProducer primeProducer = new PrimeProducer(
            new SynchronousQueue<BigInteger>());//SynchronousQueue just to ensure it put is blocking
    ExecutorService executorService = Executors.newFixedThreadPool(1);
    executorService.submit(primeProducer);
    executorService.submit(primeProducer);
    List<Runnable> list = executorService.shutdownNow();
    //PrimeProducer producer = (PrimeProducer) list.get(0);// Class Cast
                                                            // Exception
    FutureTask<PrimeProducer> futureTask = (FutureTask<PrimeProducer>) list
            .get(0);
            System.out.println(futureTask.isDone());//Prints false
    futureTask.get().name();//futureTask-->PrimeProducer get() hangs.

}
} 
```

**有问题的线路**

```
//PrimeProducer producer = (PrimeProducer) list.get(0);// Class Cast
                                                            // Exception
 FutureTask<PrimeProducer> futureTask = (FutureTask<PrimeProducer>) list
            .get(0);
 futureTask.get().name();//futureTask-->PrimeProducer get() hangs. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:43:27.897

尝试“执行”而不是“提交”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:57:12.020

发生此行为是因为提交的任务的方式`execute`和处理方式之间存在差异。`submit`

`execute`方法直接使用`Runnable command`which 传递给它 where as `submit`create`RunnableFuture`和 call`execute`

```
 RunnableFuture<Object> ftask = newTaskFor(task, null); 
```

# php - 找到包含在 FireBug 中显示的 DIV 容器的 PHP/HTML 文件

> ID：12493451
> 
> 赞同：1
> 
> 时间：2012-09-19T11:04:22.983
> 
> 标签：php, html, joomla, joomla2.5

我正在 Joomla 中编辑现有模板，我需要更改菜单图标文本。在 Joomla Administrator 中，我找不到可以执行此操作的地方。因此，在 FireBug 中，我找到了我正在搜索的 DIV 容器。但是如果我更改 FireBug 中的文本，我的更改显然不会保存。现在非常基本的问题是：我如何知道这个 DIV 容器所在的 PHP 或 HTML 文件的名称？或者如何保存我的更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:15:22.710

FireBug will only change web browsers content, it will not affect files on the server. If you know DIV's id you can search for files with this string on the server. To save changes - edit file and save - but on the server.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-02T13:16:25.103

我使用 TestWrangler 应用程序（我在 Mac 上） - 打开空白 TW，单击搜索，浏览以查找要搜索的文件夹。我总是在我的硬盘驱动器上搜索我的网站文件夹的副本，而不是实时站点文件。搜索您要查找包含它的文件的文本字符串。给 TW 几秒钟或更长时间，它会准确地告诉您哪个文件包含该字符串。 [http://www.barebones.com/products/textwrangler/](http://www.barebones.com/products/textwrangler/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T23:51:28.527

I just thought I'd share this as a possible 'answer' as well.

there is a joomla extension that enables you to search through your source code within joomla itself.

Here is the link:

[http://extensions.joomla.org/extensions/miscellaneous/development/22858](http://extensions.joomla.org/extensions/miscellaneous/development/22858)

I'm sure it will come in handy instead of going through the hassle of a complex setup on localhost.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T12:27:10.900

当您右键单击 HTML 元素并选择“使用萤火虫检查”时，在萤火虫屏幕的右侧，您将看到应用于该元素的样式以及行号，如果您只是将鼠标悬停在上面它会显示文件的确切位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T12:40:36.453

使用文件搜索工具，它包含在大多数 IDE 中，如果您的编辑器没有这样的功能，请尝试使用文件 grep 工具，如wingrep (http://www.wingrep.com/)

# c# - 使用 mini-profiler 和 MVC3 - 在单独的 dll 中分析模型类的连接

> ID：12493453
> 
> 赞同：1
> 
> 时间：2012-09-19T11:04:30.120
> 
> 标签：c#, .net, asp.net-mvc-3, mvc-mini-profiler

我有一个 MVC3 项目，其中一个模型被构建为一个单独的类库项目，以便在其他应用程序中重用。

我正在使用 mini-profiler，并希望找到一种方法来分析从此类库中生成的数据库连接和查询，并将结果返回给 MVC3 应用程序。

目前，在我的 MVC3 应用程序中，现有模型使用以下帮助程序类获取连接：

```
public class SqlConnectionHelper
{
    public static DbConnection GetConnection()
    {
        var dbconn = new SqlConnection(ConfigurationManager.ConnectionStrings["db"].ToString());
        return new StackExchange.Profiling.Data.ProfiledDbConnection(dbconn, MiniProfiler.Current);
    }
} 
```

但是，外部模型不能调用这个函数，因为它对 MVC3 应用程序或 mini-profiler 一无所知。

我想到的一种方法是`IDbConnection Connection`在外部模型上有一个字段，然后在`ProfiledDbConnection`调用任何模型的方法之前将一个对象传递给该字段。然后，该模型将使用该字段中的任何内容进行数据库连接，并且我应该在 MVC3 前端获得一些分析结果。

但是，我不确定这是否可行，或者这是否是最好的方法。我有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:08:47.010

`ProfiledDbConnection`不是小巧玲珑：它是迷你分析器。我们不提供任何可以接管所有连接创建的魔法；我唯一能建议的就是在你的库中公开一个可以从外部订阅的事件——所以*库*中的创建代码可能看起来有点像：

```
public static event SomeEventType ConnectionCreated;
static DbConnection CreateConnection() {
    var conn = ExistingDbCreationCode();
    var hadler = ConnectionCreated;
    if(handler != null) {
        var args = new SomeEventArgsType { Connection = conn };
        handler(typeof(YourType), args);
        conn = args.Connection;
    }
    return conn;
} 
```

这可以让外部代码有机会做他们想做的任何事情，例如：

```
YourType.ConnectionCreated += (s,a) => {
    a.Connection = new StackExchange.Profiling.Data.ProfiledDbConnection(
        a.Connection, MiniProfiler.Current);
}; 
```

# android - 为什么我会想要`setRetainInstance(false)`？- 或 - 处理设备旋转的正确方法

> ID：12493458
> 
> 赞同：16
> 
> 时间：2012-09-19T11:04:45.777
> 
> 标签：android, android-activity, rotation, fragment, lifecycle

*如果我在这方面有任何错误，请纠正我。这是一个澄清问题，因为我没有看到它在任何地方明确写过。*

在 Android 4 中，您可以调用`setRetainInstance(true)`a`Fragment`以便在配置更改（这基本上意味着设备旋转）时，`Fragment`不会破坏 java 对象并且不会创建它的新实例。即，保留实例。

这比在 Android 1-3 中更加理智且不那么令人恼火，因为您不必处理和捆绑所有数据，因此可以将其传递给新的（或）实例，然后再次解除捆绑。这基本上是您期望发生的事情，并且可以说它应该如何从一开始就为 s 工作。`onRetainNonConfiguration`~~`State`~~`Instance()``Fragment``Activity``Activity`

正如您所期望`setRetainInstance(true)`的那样，视图也会在旋转时重新创建（被称为）。`onCreateView()`我假设（未经测试）资源解析（`layout`vs `layout-land`）有效。

所以我的问题有两个：

1.  为什么不是`Activities`一开始就这样。
2.  为什么这不是默认值？有没有什么理由让你真的希望你*在*`Fragment`轮换中被毫无意义地摧毁和重建？因为我什么都想不出来。

# 编辑

为了澄清我将如何做到这一点：

```
class MyFragment extends Fragment
{
    // All the data.
    String mDataToDisplay;
    // etc.

    // All the views.
    TextView mViewToDisplayItIn;
    // etc.

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setRetainInstance(true);
        mDataToDisplay = readFromSomeFileOrWhatever(); // Ignoring threading issues for now.
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        return inflater.inflate(R.layout.my_fragment, container, false);
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState)
    {
        // At this point if mViewToDisplayItIn was not null, the old one will be GC'd.
        mViewToDisplayItIn = view.findViewById(R.id.the_text_view);
        mViewToDisplayItIn.setText(mDataToDisplay);
    }

    // Optionally:
    @Override
    public void onDestroyView()
    {
        // All the view (and activity) to be GC'd.
        mViewToDisplayItIn = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T11:32:06.450

> 以便在配置更改时（这基本上意味着设备旋转）

以及更改语言环境、更改 SIM 卡、更改默认字体大小、插入或移除外部键盘、将设备放入扩展坞或从中移除等。

> 您不必处理 onRetainNonConfigurationState()

那就是`onRetainNonConfigurationInstance()`。

> 捆绑所有数据，以便将其传递给新的 Fragment（或 Activity）实例，然后再次解绑

您的数据应该已经“捆绑”（例如，私有静态内部类的实例），因此不需要“捆绑”或“不捆绑”。此外，它通常不应该是“你的所有数据”，除非你是内存泄漏的粉丝。

> 而且我假设（未经测试）资源解析（布局与布局土地）有效。

正确的。

> 是否有任何理由让您真正希望您的 Fragment 被无意义地销毁并在轮换时重新创建？

当然。

正如您所注意到的，所有小部件都被重新创建，因此与小部件绑定的数据成员不仅不需要保留。除非您以某种方式专门将它们重置`null`为保留的片段，直到`onCreateView()`再次调用，这些数据成员将保留旧的小部件，这些小部件将保留旧的活动实例，这将防止旧的活动实例被垃圾收集。AFAIK，`onCreateView()`直到片段将被重新显示之前不会被调用，这可能不会在很长一段时间内（片段未用于新方向，或者片段用于某个页面中的某个页面）`ViewPager`用户以旧方向访问但未在新方向重新访问等）。这意味着保留的片段可能会在相当长的一段时间内保留旧的活动对象。根据该活动可能持有的*其他内容*`Bitmap`（例如，大型对象），这可能很糟糕。

类似地，一个片段本身包含大数据，在配置更改后可能会或可能不会使用该片段，是不应该保留的片段。

此外，还会有一些片段根本不需要保留（例如，所有数据都由 填充`Loaders`，它们已经知道配置更改并适当地处理它们）。

等等。

就垃圾收集问题而言，默认不保留片段是最安全的做法。您可以选择保留一些片段，但您有责任*确保*您不会因此而搞砸自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:07:51.393

我不知道第一个问题的答案。从一开始就*应该*是这样的。我猜谷歌的某个人认为他们*非常*聪明地提出了这个方案。

然而，第二个问题要容易得多。这不是默认设置，因为这不是 Android 开发所期望的。Android 开发人员知道实例会在轮换时死掉并期待它。更改默认设置会让很多开发人员非常生气。

# c# - 根据asp.net中的下拉列表选择单选按钮

> ID：12493461
> 
> 赞同：0
> 
> 时间：2012-09-19T11:04:57.203
> 
> 标签：c#, asp.net, drop-down-menu, radio-button

我基本上是在尝试将下拉列表与单选按钮绑定。下拉菜单中有 4 个选项，应根据这些选项选择单选按钮。对于前两个选项，单选按钮应该处于活动状态，而对于下拉菜单中的其余两个对象，单选按钮应该变为非活动状态。

这是我的下拉前端代码：

```
<asp:DropDownList ID="ddLType" runat="server" Width="406px" Height="23px">
<asp:ListItem Value="Prof">Professional</asp:ListItem>
<asp:ListItem>Enterprise</asp:ListItem>
<asp:ListItem>Maintanence</asp:ListItem>
<asp:ListItem>Reporting</asp:ListItem>
</asp:DropDownList> 
```

这是我的单选按钮代码：

```
<asp:RadioButtonList ID="rdoMeapSupport" RepeatDirection="Horizontal" runat="server" AutoPostBack="True" >
<asp:ListItem Value="1" Text="Yes" />
<asp:ListItem Value="0" Text="No" />                        
</asp:RadioButtonList> 
```

如果我们选择专业，则单选按钮应处于活动状态，并且选中“是”选项。对于企业，这两个按钮都应该处于活动状态但未选中。通过维护和报告，按钮应变为非活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:24:53.130

将 AutoPostBack="true" 属性应用于下拉列表并在选定的索引更改事件中执行以下逻辑。

```
<asp:DropDownList ID="ddLType" runat="server" Width="406px" Height="23px" 
            onselectedindexchanged="ddLType_SelectedIndexChanged" AutoPostBack="true" >
            <asp:ListItem Value="Prof">Professional</asp:ListItem>
            <asp:ListItem>Enterprise</asp:ListItem>
            <asp:ListItem>Maintanence</asp:ListItem>
            <asp:ListItem>Reporting</asp:ListItem>            
        </asp:DropDownList>
        <asp:RadioButtonList ID="rdoMeapSupport" RepeatDirection="Horizontal" runat="server"
            AutoPostBack="True">
            <asp:ListItem Value="1" Text="Yes" />
            <asp:ListItem Value="0" Text="No" />
        </asp:RadioButtonList>

protected void ddLType_SelectedIndexChanged(object sender, EventArgs e)
        {
            if (ddLType.SelectedIndex == 0 || ddLType.SelectedIndex == 1)
            {
                rdoMeapSupport.Enabled = true;
            }
            else
            { rdoMeapSupport.Enabled = false; }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:37:01.860

首先，您必须将名为 AutoPostBack 的下拉列表的属性设置为 true。您可以通过简单地选择下拉列表并从属性窗口设置 AutoPostBack = true 来做到这一点。然后去文件后面的代码写这些代码：

```
 protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        if (ddLType.SelectedValue == "Professional")
        {
            rdoMeapSupport.Enabled = true;
            rdoMeapSupport.SelectedValue = "Yes";
        }
    }

} 
```

在您的单选按钮列表“SelectedIndexChanged”的设置事件之后并将此代码粘贴到其中

```
 protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (ddLType.SelectedValue == "Professional")
    {
        rdoMeapSupport.Enabled = true;
        rdoMeapSupport.SelectedValue = "Yes";
    }

    if (ddLType.SelectedValue == "Enterprise")
    {
        rdoMeapSupport.SelectedValue = null;
        rdoMeapSupport.Enabled = true;
    }

    if ((ddLType.SelectedValue == "Maintanence") || (ddLType.SelectedValue == "Reporting"))
    {
        rdoMeapSupport.SelectedValue = null;
        rdoMeapSupport.Enabled = false;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:28:11.820

我认为激活单选按钮，但不允许选择是没有用的，最好禁用它。
您可以为此使用 jquery：

```
<script>
  $(function () {
    $("# <%# ddLType.ClientID %>").change(function () {
      var selVal = $(this).val();
      if(selVal == "Prof"){
        $('#rb_Statusno').removeAttr('disabled');
      else
        $('#rb_Statusno').attr('disabled', true);
      }  
</script> 
```

如需更多帮助，您可以阅读[这篇](https://stackoverflow.com/questions/1406544/disabling-radio-buttons-with-jquery)文章。

# jquery - JavaScript CSS 解析器

> ID：12493464
> 
> 赞同：1
> 
> 时间：2012-09-19T11:05:09.607
> 
> 标签：jquery, css, json, parsing

我正在为像 jquery 一样工作的 javascript 搜索 css 解析器，例如：

```
var style = {

    '.test': {
        paddingTop: 20,
        height: 100,
        width: 100,
        borderRadius: 5
    },

    '.test2': {
        color: '#888'
    }

} 
```

此 json 必须转换为：

```
.test{
    padding-top: 20px;
    height: 100px;
    width: 100px;
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
}   
.test2 {
    color: #888;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:16:32.547

一些简单的东西。

全部替换`camelCase`为`css-hyphenation`（@AKX 的道具以获得更好的正则表达式）。

```
String.prototype.toCssProperty = function () {
    return this.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();
}; 
```

附加`px`到所有数值。

```
if(typeof value === 'number')
    value += 'px'; 
```

[演示](http://jsfiddle.net/E54Cx/)

```
function addRule(selector, styles) {
    var builder = [];
    for(var key in styles) {
        if(styles.hasOwnProperty(key)) {

            var value = styles[key];
            if(typeof value === 'number')
                value += 'px';

            builder.push(key.toCssProperty() + ':' + value);
        }
    }       

    var rule = builder.join('; ');
    document.styleSheets[0].addRule(selector,rule);
}

function applyStyles(s) {
    for(var key in s) {
        if(s.hasOwnProperty(key)) {
            addRule(key, s[key]);            
        }
    }
}; 
```

如果你只想要字符串，你应该返回它，而不是像我在演示中那样添加 css 规则。

我敢肯定，这没有涵盖大量的极端情况。谨慎实施。

# google-plus - Google+ API 定价

> ID：12493466
> 
> 赞同：3
> 
> 时间：2012-09-19T11:05:24.427
> 
> 标签：google-plus

我注意到 Google Plus API 每天有 10,000 个请求的礼貌限制。我似乎无法找到任何有关是否可以通过付款来提高这一点的信息。

这可能吗？否则，我认为即使考虑与 Google+ 集成也没有任何意义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T21:09:06.553

申请 Google+ API 的配额不需要花钱。您需要提交申请以获得更多配额，并获得批准。

要增加您的 Google+ 配额：

1.  访问[Google API 控制台](https://code.google.com/apis/console)。（确保您已在**services**下启用了 Google+ API 。）
2.  点击菜单上的“**配额”。**
3.  查找“ **Google+ API** ”，然后点击“**请求更多...** ”

# python - Python线程，线程不关闭

> ID：12493467
> 
> 赞同：5
> 
> 时间：2012-09-19T11:05:35.947
> 
> 标签：python, multithreading

我有一个 Python 程序，当我使用 退出应用程序时 `Ctrl-c`，脚本不会关闭。我的进程仍然显示在正在运行的进程中。

```
#!/usr/bin/env python
import socket
import threading
import Queue
import serial
import mysql.connector
from datetime import datetime, date, time

host = '0.0.0.0'
port = 1024
buffer = 102400
my_queue = Queue.Queue()

class readFromUDPSocket(threading.Thread):

    def __init__(self, my_queue): 
        threading.Thread.__init__(self)
        self.my_queue = my_queue

    def run(self):
        while True:
            buffer1,addr = socketUDP.recvfrom(buffer)
            self.my_queue.put(buffer1)
            print 'UDP received'

class readFromSerial(threading.Thread):

    def __init__(self, my_queue): 
        threading.Thread.__init__(self)
        self.my_queue = my_queue

    def run(self):
        while True:
            buffer2 =  ser.readline(eol=';')
            if buffer2:
                self.my_queue.put(buffer2)
                print 'Serial received'

class process(threading.Thread):

    def __init__(self, my_queue):
        threading.Thread.__init__(self)
        self.my_queue = my_queue
        self.alive = threading.Event()
        self.alive.set()

    def run(self):
        while True: 
            buffer3 = self.my_queue.get()
            today = datetime.now()
            timestamp = today.strftime("%A, %B %d, %Y %H:%M:%S")
            print 'Data pushed at:', timestamp
            print buffer3
            if buffer3.startswith('temp:'):
                temp = buffer3.replace('temp:','')
                cnx = mysql.connector.connect(user='root', password='xxxxx', database='temperature')
                cursor = cnx.cursor()
                cursor.execute("INSERT INTO temperature.temperature (time,temperature) VALUES (%s, %s)", [timestamp, temp])
                print 'Data inserted into Database'
                cnx.commit()
                cursor.close()
                cnx.close()

if __name__ == '__main__':

    # Create socket (IPv4 protocol, datagram (UDP)) and bind to address
    socketUDP = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    socketUDP.bind((host, port))
    ser = serial.Serial('/dev/ttyUSB0', 57600, timeout=2)

    # Instantiate & start threads
    myServer = readFromUDPSocket(my_queue)
    mySerial = readFromSerial(my_queue)
    myDisplay = process(my_queue)

    myServer.start()
    myDisplay.start()
    mySerial.start()

while 1:
    pass

UDPSock.close()
ser.close() 
```

为什么python线程不关闭`Ctrl+c`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T11:07:56.457

您需要使线程成为守护线程。为此，在调用线程的 init 后添加以下行

```
self.setDaemon(True) 
```

当只有守护线程存活时，程序将退出，主线程当然是非守护线程

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T11:09:23.870

`the_thread.setDaemon(true)`，请参阅[http://docs.python.org/library/threading.html#threading.Thread.daemon](http://docs.python.org/library/threading.html#threading.Thread.daemon)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T17:03:41.420

我无法杀死我的 python 子进程，因为我在命令中设置了`shell=True`选项。`process.Popen`我删除了 shell=True 然后我可以杀死它。

如果子进程是一个 shell，那么你必须在 shell 结束之前杀死它正在运行的东西。

# macos - MacOS X：从 dmg 安装程序更新软件

> ID：12493469
> 
> 赞同：1
> 
> 时间：2012-09-19T11:05:38.137
> 
> 标签：macos, installation, ini, updates, dmg

我有一个用于 MacOS 的小软件，带有一个简单的 dmg 安装程序（打开，拖放到应用程序文件夹，你知道的）。我的问题是，该软件在 .app 包中写入了一个小 ini 文件，如果我更新软件，该文件会丢失，因为旧包在写入新包之前已被删除。

我的问题是，如果你们中的任何人知道一个优雅的解决方案。用户应该能够将文件保存在任何地方，例如桌面，并且 ini 文件应该移动到新包中。我不想将此文件保存在 .app 包之外，因为如果用户只是删除包，这会将私人数据留在计算机上。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:22:31.173

将数据保存到应用程序包中不是好的做法，
对于将来的版本，请实施其他解决方案。

为了解决当前的问题，我可以想到两个解决方案：

**在文件中添加两个`.dmg`文件**

*   新的应用程序。
*   Backuptool：备份文件的简单 AppleScript 就可以完成这项工作。

确保在替换应用程序之前通知用户运行备份。
但是，用户可能会忘记运行备份并丢失数据。

**创建安装程序**

另一种选择是使用 PackageMaker 编写安装程序。
PackageMaker 提供了在更新应用程序之前运行脚本的选项。
添加备份数据的预安装脚本。

# jquery - 在 jquery 中用淡入淡出改变 img src

> ID：12493470
> 
> 赞同：0
> 
> 时间：2012-09-19T11:05:46.720
> 
> 标签：jquery, html, image, load, fadein

我有这段代码可以淡化图像

```
$("#mix").click(function() {
   $("#mix").addClass("load");
      $("#brick-image").stop(true).fadeTo("slow", 0);
      $("#brick-image").load(function() {                                
         $("#mix").removeClass("load");
         $("#brick-image").stop(true).fadeTo("slow", 1);
      });
      $("#brick-image").attr("src","build.php?bricks=RT433,RT201,RT543&ratio=40,40,20&"+new Date().getTime());
}); 
```

HTML

```
<div id="bricks">
   <img src="build.php" id="brick-image">
</div>

<div id="mix-button">
   <a href="#" id="mix" class="load">Bland igen</a>
</div> 
```

这样做的问题是图像淡出然后新图像淡入。是否有可能以某种方式使新图像淡入另一个图像然后隐藏旧图像，这样我就可以获得非常平滑的淡入淡出而没有首先淡入背景（闪烁）？

img 标签中的 build.php 是一个创建动态随机图像的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:24:11.710

你那里只有一个图像标签，所以不，你不能做一个平滑的过渡。您需要制作两张不同的图像，一张淡出，另一张以相同的速度淡入。像这样的东西：

**HTML：**

```
 <div id="bricks">
       <img src="build.php" class="brick-image active">
       <img src="build.php" class="brick-image">
    </div>

    <div id="mix-button">
       <a href="#" id="mix" class="load">Bland igen</a>
    </div> 
```

**CSS：**

```
#bricks {
    position: relative;
}

.brick-image {
    position: absolute;
    display: none;
}

.brick-image.active {
    display: block;
} 
```

**JS：**

```
$('#mix').click(function() {
   var $mix = $(this),
       $imgs = $('.brick-image', '#bricks');
       $newImg = $imgs.not('.active');

   $mix.addClass('load');
   $newImg.attr('src', 'build.php?bricks=RT433,RT201,RT543&ratio=40,40,20&'+new Date().getTime());
   $imgs.stop(true).toggleClass('active').fadeToggle('slow', function() {
       $mix.removeClass('load')
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:31:06.420

## *[jsBin 演示](http://jsbin.com/anejun/1/edit)*

```
$("#mix").click(function(e){
      e.preventDefault();
      $("#mix").addClass("load");
      $('<img />').attr('src',"build.php?bricks=RT433,RT201,RT543&ratio=40,40,20&"+new Date().getTime()).load(function(){
         $("#mix").removeClass("load");
        $(this).hide().fadeTo(800,1).css({position:'absolute',top:0,left:0});
      }).appendTo('#bricks');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:10:56.210

You can do it using css classes by using `position:absolute` and changing `z-index` while `fadeIn` and `fadeOut`.

# magento - Magento 自定义模块管理块显示

> ID：12493477
> 
> 赞同：1
> 
> 时间：2012-09-19T11:06:17.773
> 
> 标签：magento, admin, block

努力访问我创建的管理块。我创建了一个模块......它有很多元素，所有的工作。使用我的 adminhtml 布局更新 xml 文件，我已经将标题包含添加到某些管理页面没有问题。

问题似乎是它无法访问/查看我的块......所以可能引用错误，即使我一直在关注“模块创建者”扩展文件。

我认为另一个愚蠢的问题，已经太久了！:)

首先是代码：

Mworkz/MyModuleName/Block/Adminhtml/MyBlock.php

```
class Mworkz_MyModuleName_Block_Adminhtml_MyModuleName extends Mage_Adminhtml_Block_Widget_Grid_Container
{
 public function __construct()
  {

    var_dump('WE ARE IN THE ADMIN BLOCK!');exit;

    $this->_controller = 'adminhtml_mymodulename';
    $this->_blockGroup = 'mymodulename';
    $this->_headerText = Mage::helper('mymodulename')->__('Item Manager');
   $this->_addButtonLabel = Mage::helper('mymodulename')->__('Add Item');
    parent::__construct();
  }
} 
```

我的布局 xml（此文件有效，并且被正确引用，因为我的管理标题包括工作）应该指出我有一个自定义选项卡和控制器......所有工作。

```
<?xml version="1.0"?>
<layout version="0.1.0">

  <mymodulename_adminhtml_mymodulename_index>
    <reference name="head">
        <action method="addJs"><script>Mworkz/MyModuleName.js</script></action> 
    </reference>
     <reference name="content">

        <block type="mymodulename/adminhtml_mymodulename" name="mymodulename" ></block>

    </reference>

  </mymodulename_adminhtml_mymodulename_index>
</layout> 
```

我希望看到插入的 var_dump stmt ....但它不显示。提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:25:01.250

文件命名！简单的大写问题...

我的块文件被称为`'...Adminhtml/MyModuleName.php'`，

我在文件中的块标识符是`'...Adminhtml_Mymodulename {'`

我想为 adminhtml 块用户的另一组工作代码片段！谢谢

# java - 我的机器和我的 Java 是 32 位还是 64 位？

> ID：12493480
> 
> 赞同：0
> 
> 时间：2012-09-19T11:06:23.113
> 
> 标签：java, jakarta-ee, 32bit-64bit

我的机器是 32 位还是 64 位？我的机器上安装的 Java 是 32 位还是 64 位？

`uname -a`产生：

```
Linux xhost 2.6.18-194.el5xen #1 SMP Tue Mar 16 22:01:26 EDT 2010 x86_64 x86_64 x86_64 GNU/Linux 
```

`java -version`产生：

```
java version "1.6.0_24"
Java(TM) SE Runtime Environment (build 1.6.0_24-b07)
Java HotSpot(TM) Server VM (build 19.1-b02, mixed mode) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T11:08:05.247

`java -version`在 64 位 VM 上看起来像这样（它明确表示 64 位）：

```
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T11:17:50.393

你可以试试`java -d64 -version`

如果它不是 64 位，你会得到类似的东西：

`This Java instance does not support a 64-bit JVM.`
`Please install the desired version`

# mysql - 我想了解 Windows 智能引号如何变成“â€™”

> ID：12493483
> 
> 赞同：4
> 
> 时间：2012-09-19T11:06:32.073
> 
> 标签：mysql, utf-8, character-encoding, ms-word

这是工作流程：

1.  用户在 Word 中输入；Word 将单个撇号更改为“智能引用”
2.  用户将单词中的测试粘贴到网页上的表单中；表单所在的页面以 UTF-8 编码
3.  数据使用编码保存到 MySQL 数据库中`latin1`
4.  当 PHP 应用程序（假设数据库编码为 UTF-8）从数据库中检索并显示在 UTF-8 网页中时，引用显示为 â€™

我意识到输入和输出页面的编码与数据库之间存在不匹配。我要解决的。

无论如何，角色不应该在往返数据库的旅程中幸存下来吗？

单个字符（如果我不困惑，0x92）如何通过该过程并以三个字符的形式出现在另一端？

有人可以告诉我在这个过程的每个阶段发生了什么字节吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T11:14:35.400

# analytics - 使用用户 GA 帐户 ID 计算 img 横幅点击次数？

> ID：12493485
> 
> 赞同：1
> 
> 时间：2012-09-19T11:06:45.620
> 
> 标签：analytics

我的客户想要跟踪 aa href 标记中的横幅点击次数。他们在我的页面上有 gif 图像，点击后重定向到他们的页面。我如何调整代码，以便他们可以使用他们的 GA 帐户计算点击次数。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:58:14.643

如果您的客户特别想跟踪您页面上重定向到他自己的横幅图像/gif 的点击，您可以设置中间重定向。

我的意思是在 Google Analytics 上设置一个名为“MyClient Image Banner Click”之类的配置文件，然后在您的服务器上创建一个名为 clientClick.html 的页面并使其看起来像这样：

```
<!DOCTYPE html>
<html><head>
<script type="text/javascript">
/* GOOGLE ANALYTICS CODE FOR "MyClient Image Banner Click" PROFILE HERE */
</script>
<meta http-equiv="refresh" content="0;url=http://www.customer.com/page.html">
</head></html> 
```

然后，您将页面上的图像横幅 gif 重定向到 clientClick.html 而不是他的网站。这样，触发此特定分析代码的唯一时间是用户单击图像横幅时。0 秒后，此 clientClick.html 页面将自动将单击图像的用户重定向到您客户网站上的实际目标页面。您的客户可以在其帐户的 Google Analytics（分析）中查看所有用户人口统计数据。

这种做法比您想象的要普遍得多。想一想您看到广告引用“out.php?id=blahblah&client=44”作为href的所有时间吗？希望这可以帮助！阿罗哈。:)

# c# - Ajax Enabled Wcf Service 找不到具体方法

> ID：12493487
> 
> 赞同：0
> 
> 时间：2012-09-19T11:07:01.033
> 
> 标签：c#, javascript, asp.net, web-services

我有 Webservice 的奇怪行为。

现在网络服务看起来像：

```
[ServiceContract(Namespace = "")]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class Service1
    {
        // To use HTTP GET, add [WebGet] attribute. (Default ResponseFormat is WebMessageFormat.Json)
        // To create an operation that returns XML,
        //     add [WebGet(ResponseFormat=WebMessageFormat.Xml)],
        //     and include the following line in the operation body:
        //         WebOperationContext.Current.OutgoingResponse.ContentType = "text/xml";
        [OperationContract]
        public string DoWork()
        {
            // Add your operation implementation here
            return "Hello there";
        }

        // Add more operations here and mark them with [OperationContract]
    } 
```

我可以毫无问题地在 JS 中读取它：

```
 <script>

        function doWork() {
            Service1.DoWork(onSuccess, onFailure);
        }

        function onSuccess(result) {
            document.getElementById('txtValueContainer').value = result;
        }

        function onFailure(result) {
            window.alert(result);
        }

</script> 
```

但是，一旦我尝试发送其他内容，例如字符串：

```
 [OperationContract]
        public Question[] OurServerOutput(string userid)
        {
            return Question.getQuestionsForUser(new Guid(userid)).ToArray();
        }

where 

        public static IEnumerable<Question> getQuestionsForUser( Guid userGuid)
        {
            LinqConnectionDataContext context = new LinqConnectionDataContext();
            var query = from c in context.Questions where c.UidUser == userGuid select c;
            return query;

        } 
```

Javascript 无法再找到我的服务，并且出现错误：

```
Unhandled exception at line 132, column 13 in http://localhost/

0x800a1391 - Microsoft JScript runtime error: 'Service1' is undefined 
```

如何通过启用 Ajax 的 WebService 发送数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:31:29.910

答案很简单：将 Linq DB 上的 Seriliazation 设置为单向

# php - 正则表达式中的未知修饰符

> ID：12493489
> 
> 赞同：0
> 
> 时间：2012-09-19T11:07:04.910
> 
> 标签：php, preg-match

有谁知道为什么我会收到此错误：`preg_match() [function.preg-match]: Unknown modifier '('` 使用此方法：

```
function checkFBDateFormat($date) {
    if(preg_match ("/^([0-9]{2})/([0-9]{2})/([0-9]{4})$/", $date, $parts)){
        if(checkdate($parts[2],$parts[1],$parts[3]))
            return true;
        else
            return false;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:48:48.097

您可能要考虑根本不使用正则表达式。

```
<?php
// simple example
$timestamp = strtotime('12/30/2012');
if ($timestamp) {
    // valid date… Now do some magic
    echo date('r', $timestamp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:14:55.350

You need to escape your slash, like so:

```
if(preg_match ("/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/", $date, $parts)){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:24:26.320

你没有逃避你的“/”，你也没有完成你的 if 语句，请试试这个：

```
 function checkFBDateFormat($date) {
        if(preg_match("/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/", $date, $parts)){
            if(checkdate($parts[2],$parts[1],$parts[3])) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    }

echo var_dump(checkFBDateFormat('08/09/2012')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T11:09:22.850

您将`/`其用作表达式的分隔符。但是，无论如何它是完全没有必要的

```
$parts = explode('/', $date); 
```

更好的是：http: [//php.net/datetime.createfromformat](http://php.net/datetime.createfromformat)

为了让您了解会发生什么：PCRE 正则表达式在模式本身的开头和结尾需要一个分隔符。第二个分隔符之后的所有内容都被视为修饰符。因此，您决定使用`/`分隔符（它始终是第一个字符），因此您的模式在`/^([0-9]{2})/`. 接下来的所有内容（`(`起初是 a）都被视为修饰符，但`(`不是现有的修饰符。

如果您想保留正则表达式，我建议使用另一个分隔符，例如

```
~^([0-9]{2})/([0-9]{2})/([0-9]{4})$~
#^([0-9]{2})/([0-9]{2})/([0-9]{4})$# 
```

只需[阅读有关`PCRE`-extension的手册](http://php.net/pcre)

两个额外的评论：

*   您应该`$parts`在使用它之前定义 ,
*   请记住，该表达式是非常不准确的，因为它允许日期为`33/44/5678`，但拒绝`1/1/1970`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T11:09:59.310

If the first char is e.g. an slash `/` is detected as delimiter fro the regular expression. Thus your regex is only the part `^([0-9]{2})`. And everything after the second slash is recognized as modifiers for the regex.

If you really want to match a slash, use `\/` to escape it

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T11:10:59.083

Since you are using slash in regular expression, need use other delimiter, try:

```
preg_match ("#^([0-9]{2})/([0-9]{2})/([0-9]{4})$#", $date, $parts) 
```

# c# - 在函数中声明数据结构的替代方法是什么？

> ID：12493491
> 
> 赞同：0
> 
> 时间：2012-09-19T11:07:25.143
> 
> 标签：c#, data-structures, scope

在 C# 中是否有一个很好的现有或即将推出的替代方法来声明方法中的数据结构？可以使用匿名类型，但声明它们有困难。假设我有一个假设的课程：

```
class ThingsManager
{
    private void DoThings(IEnumerable<Thing> things)
    {
        var thingLocations = new Dictionary<string, string>();

        foreach(var thing in things)
        {
            // some complicated logic and checks for current thing;
            // if current thing satisfies all conditions:

            var thingName = thing.Name;
            var thingLocation = location; // taken somewhere from upper lines
            thingLocations.Add(thingName, thingLocation);
        }

        // ... later

        foreach(var thingLocation in thingLocations)
        {
            // here I don't know what is the key and what does the value mean.
            // I could use Linq and anonymous types, but sometimes it is clearer 
            // to use foreach if the logic is complicated
        }
    }
} 
```

现在，我想看到什么：

```
class ThingsManager
{
    private void DoThings(IEnumerable<Thing> things)
    {
        struct ThingLocations
        {
            string ThingName {get;set;}
            string Location {get;set;}
        }

        var thingLocations = new List<ThingLocations>();

        foreach(var thing in things)
        {
            // some complicated logic and checks for current thing;
            // if current thing satisfies all conditions:

            var thingName = thing.Name;
            var thingLocation = location; // taken somewhere from upper lines
            thingLocations.Add(new ThingLocation(thingName, thingLocation));
        }

        // ... later

        foreach(var thingLocation in thingLocations)
        {
            // now here I can use thingLocation.ThingName  
            // or thingLocation.Location
        }
    }
} 
```

我也可以在类中声明结构，但在我的函数之外的任何地方使用它都没有意义。如果我的函数是唯一可以使用此数据结构的地方会更好。我正在寻找一种更好的方法来处理这种情况，或者至少能够声明匿名类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:11:40.283

匿名类型将有助于命名方面，但您必须将输入转换为您的匿名类型，并且该类型将保留在方法范围的内部。

```
// Assumes thingLocation comes from somewhere...
var thingLocations = things
    .Select(t => new { ThingName = t.Name, Location = new ThingLocation(t.Name, thingLocation) } ); 
```

它是使用`Select`扩展方法完成的，以便投影到匿名类型。

您可以在没有 linq 的情况下声明匿名类型，但您会发现尝试将它们添加到列表/字典中很烦人：

```
var me = new { Name = "Adam", Age = 27 }; 
```

* * *

[我要郑重声明我不会采用这种方法，我个人会使用匿名类型、a`Tuple<string, string>`或自定义类型。]

如果所有这些都失败了，如果你不介意启动 DLR，你可以使用`ExpandoObject`：

```
 class Thing
    {
        public string Name;
    }

    static void Main(string[] args)
    {
        var things = new List<Thing>() { new Thing { Name = "Adam" } };
        var thingLocations = new List<dynamic>();

        foreach (var thing in things)
        {
            dynamic location = new ExpandoObject();
            location.Name = thing.Name;
            location.Location = "here";

            thingLocations.Add(location);
        }

        // ... later

        foreach(var thingLocation in thingLocations)
        {
            Console.WriteLine(thingLocation.Name);
            Console.WriteLine(thingLocation.Location);
        }

        Console.ReadLine();
    } 
```

这允许您通过在现场声明它们来根据需要动态添加属性。然后您可以稍后使用这些，因为`ExpandoObject`当 DLR 按名称要求成员时，它会为 DLR 提供管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:09:58.223

C# does indeed support [Anonymous Types](http://msdn.microsoft.com/en-us/library/bb397696.aspx), but the real answer is:

No, you can't do that in C#. Just declare the `struct` as private right above your method and forget about it.

# sql-server - CPU 使用日期谓词 SQL Server

> ID：12493492
> 
> 赞同：0
> 
> 时间：2012-09-19T11:07:38.873
> 
> 标签：sql-server

我正在使用日期字段谓词（非集群）检索一些数据，并且我正在尝试使用 2 种替代方法来实现我的目标。该字段是一个`datetime`并且在我使用的语句之一中，字面上存储在该字段中的值

```
WHERE dataload ='2012-07-16 10:13:01.307' 
```

在另一条语句中，我使用了这个谓词。

```
WHERE dataload >= DATEADD(DAY,0,datediff(day,0,@Dataload)) 
  and dataload <= dateadd(ms,-3,DATEADD(DAY,1,datediff(day,0,@Dataload))) 
```

查看统计 IO/time 输出，读取是相同的，但是方法 #1 使用了 16ms 的 CPU，方法 #2 使用了 0ms，导致方法 #1 消耗了总成本的 61%，超过了总成本的 39%方法#2。

我真的不明白为什么 #method1 中使用 CPU，而方法 #2 上有这么多功能并且给了我 0ms。

有什么基本的解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:10:59.853

The first method retrieves the field from disk, taking `6 msec. The second method just fetches the data from memory. If you reversed the order, the other method would take longer.

# c++ - C / C++ UTF-8 大写/小写转换

> ID：12493496
> 
> 赞同：17
> 
> 时间：2012-09-19T11:07:58.777
> 
> 标签：c++, c, utf-8, case-conversion

问题：有一种方法具有相应的测试用例，可以在一台机器上运行而在另一台机器上失败（详情如下）。我认为代码有问题，导致它偶然在一台机器上工作。不幸的是我找不到问题。

请注意，std::string 和 utf-8 编码的使用是我没有真正影响的要求。使用 C++ 方法完全没问题，但不幸的是我什么都没找到。因此使用 C 函数。

方法：

```
std::string firstCharToUpperUtf8(const string& orig) {
  std::string retVal;
  retVal.reserve(orig.size());
  std::mbstate_t state = std::mbstate_t();
  char buf[MB_CUR_MAX + 1];
  size_t i = 0;
  if (orig.size() > 0) {
    if (orig[i] > 0) {
      retVal += toupper(orig[i]);
      ++i;
    } else {
      wchar_t wChar;
      int len = mbrtowc(&wChar, &orig[i], MB_CUR_MAX, &state);
      // If this assertion fails, there is an invalid multi-byte character.
      // However, this usually means that the locale is not utf8.
      // Note that the default locale is always C. Main classes need to set them
      // To utf8, even if the system's default is utf8 already.
      assert(len > 0 && len <= static_cast<int>(MB_CUR_MAX));
      i += len;
      int ret = wcrtomb(buf, towupper(wChar), &state);
      assert(ret > 0 && ret <= static_cast<int>(MB_CUR_MAX));
      buf[ret] = 0;
      retVal += buf;
    }
  }
  for (; i < orig.size(); ++i) {
    retVal += orig[i];
  }
  return retVal;
} 
```

考试：

```
TEST(StringUtilsTest, firstCharToUpperUtf8) {
  setlocale(LC_CTYPE, "en_US.utf8");
  ASSERT_EQ("Foo", firstCharToUpperUtf8("foo"));
  ASSERT_EQ("Foo", firstCharToUpperUtf8("Foo"));
  ASSERT_EQ("#foo", firstCharToUpperUtf8("#foo"));
  ASSERT_EQ("ßfoo", firstCharToUpperUtf8("ßfoo"));
  ASSERT_EQ("Éfoo", firstCharToUpperUtf8("éfoo"));
  ASSERT_EQ("Éfoo", firstCharToUpperUtf8("Éfoo"));
} 
```

失败的测试（仅发生在两台机器中的一台上）：

```
Failure
Value of: firstCharToUpperUtf8("ßfoo")
  Actual: "\xE1\xBA\x9E" "foo"
Expected: "ßfoo" 
```

两台机器都安装了语言环境 en_US.utf8。然而，他们使用不同版本的 libc。它可以在带有 GLIBC_2.14 的机器上工作，与编译位置无关，并且不能在另一台机器上工作，而它只能在那里编译，否则它缺少正确的 libc 版本。

无论哪种方式，都有一台机器可以编译此代码并在它失败时运行它。代码一定有问题，我想知道是什么。指向 C++ 方法（尤其是 STL）也很好。由于其他外部要求，应避免使用 Boost 和其他库。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-08T23:15:09.073

也许有人会使用它（也许用于测试）

有了这个你可以制作简单的转换器:)没有额外的库:)

[http://pastebin.com/fuw4Uizk](http://pastebin.com/fuw4Uizk)

1482 个字母

例子

```
Ь <> ь
Э <> э
Ю <> ю
Я <> я
Ѡ <> ѡ
Ѣ <> ѣ
Ѥ <> ѥ
Ѧ <> ѧ
Ѩ <> ѩ
Ѫ <> ѫ
Ѭ <> ѭ
Ѯ <> ѯ
Ѱ <> ѱ
Ѳ <> ѳ
Ѵ <> ѵ
Ѷ <> ѷ
Ѹ <> ѹ
Ѻ <> ѻ
Ѽ <> ѽ
Ѿ <> ѿ
Ҁ <> ҁ
Ҋ <> ҋ
Ҍ <> ҍ
Ҏ <> ҏ
Ґ <> ґ
Ғ <> ғ
Ҕ <> ҕ
Җ <> җ
Ҙ <> ҙ
Қ <> қ
Ҝ <> ҝ
Ҟ <> ҟ
Ҡ <> ҡ
Ң <> ң 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-10T21:23:14.947

下面的 C++11 代码对我有用（暂时忽略了应该如何翻译尖锐 s 的问题——它保持不变。无论如何它正在慢慢地从德语中逐步淘汰）。

仅将优化和大写首字母留作练习。

编辑：正如所指出的，codecvt 似乎已被弃用。但是，它应该保留在标准中，直到定义了合适的替代品。请参阅[已弃用的标头 <codecvt> 替换](https://stackoverflow.com/questions/42946335/deprecated-header-codecvt-replacement)

```
#include <codecvt>
#include <iostream>
#include <locale>

std::locale const utf8("en_US.UTF-8");

// Convert UTF-8 byte string to wstring
std::wstring to_wstring(std::string const& s) {
  std::wstring_convert<std::codecvt_utf8<wchar_t> > conv;
  return conv.from_bytes(s);
}

// Convert wstring to UTF-8 byte string
std::string to_string(std::wstring const& s) {
  std::wstring_convert<std::codecvt_utf8<wchar_t> > conv;
  return conv.to_bytes(s);
}

// Converts a UTF-8 encoded string to upper case
std::string tou(std::string const& s) {
  auto ss = to_wstring(s);
  for (auto& c : ss) {
    c = std::toupper(c, utf8);
  }
  return to_string(ss);
}

void test_utf8(std::ostream& os) {
  os << tou("foo" ) << std::endl;
  os << tou("#foo") << std::endl;
  os << tou("ßfoo") << std::endl;
  os << tou("Éfoo") << std::endl;
}    

int main() {
  test_utf8(std::cout);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T12:10:20.493

小写尖 s : ß; 大写锐利 s：ẞ. 您是否在断言中使用了大写版本？似乎 glibg 2.14 遵循 pre unicode5.1 没有大写版本的 sharp s，而在另一台机器上 libc 使用 unicode 5.1 ẞ=U1E9E ...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T11:09:28.163

对于该测试用例，您期望德语 ß 字符的大写版本是什么？

换句话说，您的基本假设是错误的。

请注意，评论中的维基百科指出：

> Sharp s 在拉丁字母中几乎是独一无二的，因为它没有传统的大写形式（其他几个例子之一是格陵兰语中使用的 kra，ĸ）。这是因为它最初从未出现在德语文本中，而传统的德语印刷（使用黑色字体）从未使用全大写。使用全大写时，当前的拼写规则要求将 ß 替换为 SS。[1] 然而，在 2010 年，当用大写字母书写地名时，官方文件中强制使用它。 [2]

因此，基本的测试用例，以尖 s 作为声母，违反了德语规则。我仍然认为我有一点，因为原始海报的前提是错误的，对于所有语言，字符串通常不能在大小写之间自由转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-01T14:20:25.490

问题是您不断言的语言环境是合规的，而您的断言确实触发的语言环境是不合规的。

[B.1.2中要求的技术报告N897](http://www.open-std.org/jtc1/sc22/wg20/docs/n897-14652w25.pdf) [`LC_CTYPE`理由]：

> 由于`LC_CTYPE`字符类基于 C 标准字符类定义，因此该类别不支持多字符元素。例如，德语字符传统上被归类为小写字母。没有对应的大写字母；在德语文本的正确大写中，将被 SS 替换；即，由两个字符。这种转换不在`toupper`and`tolower`关键字的范围内。

本技术报告于 2001 年 12 月 25 日发布。但根据：[https ://en.wikipedia.org/wiki/Capital_%E1%BA%9E](https://en.wikipedia.org/wiki/Capital_%E1%BA%9E)

> 2010 年，在德国的官方文件中，当以全大写形式书写地名时，必须使用大写字母 ẞ

但是标准委员会没有重新讨论这个话题，因此在技术上独立于德国政府所说的，标准化的行为`toupper`应该是不改变 ß 字符。

这在机器上工作不一致的原因是[`setlocale`](http://en.cppreference.com/w/cpp/locale/setlocale)：

> 将指定的系统语言环境或其部分安装为新的 C 语言环境

因此，它是不符合系统语言环境的，`en_US.utf8`即指示`toupper`修改 ß 字符。不幸的是，专业化[`ctype<char>::clasic_table`](http://en.cppreference.com/w/cpp/locale/ctype_char/classic_table), 不可用，`ctype<wchar_t>`因此您无法修改行为。留给您两个选择：

1.  创建一个`const map<wchar_t, wchar_t>`从每个可能的小写字母`wchar_t`到相应大写字母的转换`wchar_t`
2.  添加这样的检查`L'ß'`：

    ```
    int ret = wcrtomb(buf, wChar == L'ß' ? L'ẞ' : towupper(wChar), &state); 
    ```

[`Live Example`](http://coliru.stacked-crooked.com/a/cbbc903117e5b9c1)

# knockout.js - Knockout.js - 在显示无输入时更改事件

> ID：12493497
> 
> 赞同：0
> 
> 时间：2012-09-19T11:08:00.127
> 
> 标签：knockout.js

我有一个输入

```
<input type="text" name="Name" id="Name" data-bind="value: Name" style="display: none;" > 
```

和一个视图模型：

```
name  : ko.observable() 
```

当我单击另一个控件中的链接时，名称值将添加到输入中。

但是“更改”事件没有触发。

我怎样才能让输入的值改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:03:59.900

也许，您可以通过订阅可观察对象的更改来替换*更改事件（具有相同的效果）。*

```
<input type="text" name="Name" id="Name" data-bind="value: name" style="display: none;">

var Model = function() {
  var self = this;
  this.name = ko.observable();  
  this.name.subscribe(function () {
        alert(self.name());                
  });
};
ko.applyBindings(new Model()); 
```

# date - 从 Metro 风格 App 中的 Unix 时间戳获取日期

> ID：12493504
> 
> 赞同：0
> 
> 时间：2012-09-19T11:08:28.833
> 
> 标签：date, c++-cli, windows-runtime

我正在读出一个带有日期的 Json 文件。

```
jsonValue->GetObject()->GetNamedObject("board")->GetNamedNumber("date") 
```

该日期以 Unix 代码格式保存：

```
"date":1347973494 
```

但我需要以“19.09.2012”之类的正常格式获取它。我找不到合适的功能来解决这个问题。我已经尝试过 DateTimeFormatter 类，但我认为这不是正确的方法。

所以有人知道如何将 DateTime 从 Unix 时间戳更改为像“19.09.2012”这样的普通格式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:24:55.257

Unix 时间戳是自 1970 年以来的秒数，因此将秒数添加到 1970-01-01。

```
int unixTimestamp = 1347973494;
System::DateTime timestamp = System::DateTime(1970, 1, 1).AddSeconds(unixTimestamp); 
```

然后将 DateTime 格式化为您喜欢的任何字符串格式，或将其用作 DateTime。

```
System::String^ formatted = timestamp.ToString("dd.MM.yyyy") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:25:06.730

我解决了日历类的问题，你可以在[这里找到](http://msdn.microsoft.com/en-us/library/windows/apps/windows.globalization.calendar.aspx)

```
int unixTimestamp = (int)jsonValue->GetObject()->GetNamedNumber("date");

Windows::Globalization::Calendar^ cal = ref new Windows::Globalization::Calendar();
 cal->Year = 1970;
 cal->Month = 1;
 cal->Day = 1;
 cal->Minute = 0;
 cal->Hour = 0;
 cal->Second = 0;
 cal->AddSeconds(unixTimestamp);

 mainDate -> Text = cal->DayAsString() + ". " + cal->MonthAsString() + " " + cal->YearAsString(); 
```

# c# - 避免 goto 的最佳方法是什么？

> ID：12493505
> 
> 赞同：0
> 
> 时间：2012-09-19T11:08:34.510
> 
> 标签：c#, goto

我通常会陷入这样一种情况，即 goto 似乎是我心目中的最佳选择。但是看了好几遍都没用，总有替代的。现在，我正在尝试这样的事情：-

```
 try{
            //Something that requires internet connectivity;
    }
     catch{
            //Show a message-Internet connectivity lost,and go back to try
    //-->FYI--Ignore "show message", because I am just appending this text to a  
    // textbox. So there won't be a problem of multiple ShowMessage Boxes.
      } 
```

现在，在我看来，最好的选择是在 catch 语句中使用 goto，但我试图避免它。try 是函数中的第一个语句，如果我记得那个函数，我正在堆积堆栈，所以这也不是一个更好的选择。我可以采取什么替代方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T11:14:07.593

使用`while`带有标志的循环

```
var tryAgain = true;
while (tryAgain) 
{
    try
    {
        ...
        tryAgain = false;
    }
    catch (...)
    {
        tryAgain = ...
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T11:14:29.167

在这种特殊情况下，递归调用相同的函数并保持一个计数器与您调用它的次数没有任何问题。像这样的东西（在伪代码中）：

```
public void DoMyInternetThing(int numberOfAttemptsRemaining)
{
    try 
    {
         //do stuff
    }
    catch (ConnectionException) 
    {
        if (numberOfAttemptsRemaining <= 0)
            throw new SomethingBadHappenedException();

        DoMyInternetThing(numberOfAttemptsRemaining - 1);  
    }
} 
```

与任何递归一样，您需要确保正确构建它，但这很好用（我自己使用过）并且它避免了您的`goto`（这本身并不坏，但使用它会导致意大利面条或结构不良的代码） .

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T11:11:00.970

If you want to try again, wrap your try-catch in a do-while loop.

# c# - 在中继器链接按钮中将对象作为 CommandArguement 传递

> ID：12493507
> 
> 赞同：2
> 
> 时间：2012-09-19T11:08:43.577
> 
> 标签：c#, asp.net, repeater, linkbutton, commandargument

我有一个带有客户列表的中继器。针对每个客户都有一个删除链接按钮。作为链接按钮的一部分，我想将客户对象传递给命令参数，如下所示（其中 Container.DataItem 是客户对象）：

```
<asp:LinkButton  ID="lnkDelete" 
   OnClientClick="return confirmDelete();"  
   OnClick="Customer_OnDelete"  
   CommandArgument="<%# Container.DataItem  %>"  
   CommandName="Delete" 
   runat="server"></asp:LinkButton> 
```

当我这样做时：

```
 var button = (((LinkButton) sender));

    var customer=  button.CommandArgument; 
```

button.CommandArguement 是一个字符串。我需要所有的对象属性，因为我们使用的是 Nhibernate，所以一切都需要设置，删除记录的 ID 是不够的。我在网上看到了有关将逗号分隔的值列表传递到命令参数中的示例，但希望避免这样做。这可能吗？

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T12:20:01.860

在我看来，这种情况下最好的方法是：

*   从中获取 ID`CommandArgument`
*   通过 ID 获取客户
*   删除客户实体

使用`Repeater`事件`OnItemCommand`。此事件包含`RepeaterCommandEventArgs`. 你不能`CommandArgument`这样：

```
protected void myRepeater_ItemCommand(object source, RepeaterCommandEventArgs e)
{
   int customerID= Convert.ToInt32(e.CommandArgument.ToString());
} 
```

在您的`asp:LinkButton`标签上使用：

```
CommandArgument='<%# DataBinder.Eval(Container.DataItem, "ID") %>' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T11:18:05.033

您在这里遇到的问题是您的转发器必须被翻译成 HTML。因此，您受限于元素属性中规范所允许的限制。

在服务器端`CommandArgument`将始终是一个字符串，所以你不能做你想做的事，因为你有它编码。

现在......您可以实施一些技巧来解决这个问题，例如前面提到的 CSV，或者您可以使用[二进制序列化](http://msdn.microsoft.com/en-us/library/72hyey7b%28v=vs.110%29.aspx)和[Base64 编码](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)结果。**然而，这些都是可怕的解决方案！**

你需要的是重新思考你是如何做到这一点的。我保证有一个更简单的方法。

# mysql-python - 使用 python dict 创建 MySQL 插入

> ID：12493508
> 
> 赞同：0
> 
> 时间：2012-09-19T11:08:43.747
> 
> 标签：mysql-python

[我正在尝试使用此处](https://stackoverflow.com/questions/9336270/using-a-python-dict-for-a-sql-insert-statement/12492130#12492130)找到的提示从 python dict 创建 MySQL 插入。我收到 MySQL 错误，因为语法不正确。我发现问题是在我的查询中，字段名称用单引号括起来。我的代码是：

```
d=dict(a='pepe',b=4,c='potamo')
qmark = ", ".join(['%s'] * len(d))
sql = "INSERT INTO db.table ({}) VALUES ({})".format(qmark,qmark)
c.execute(sql,(d.keys() + d.values()) 
```

查看 mysql 日志，这会产生：

```
INSERT INTO db.table ('a', 'b', 'c') VALUES ('pepe', 4, 'potamo') 
```

这会引发 mysql 异常（语法错误）。在 MySQL 命令行中使用该语句会产生相同的错误，并且手动从字段中删除单引号可以修复它：

```
INSERT INTO db.table (a,b,c) VALUES ('pepe',4,'potamo') 
```

所以我想知道删除这些单引号的最佳方法是什么，或者是否有办法让`cursor.execute()`（Mysqldb 的一部分）为我修复它。到目前为止，我只能想到类似的东西：

```
str(d.keys()).replace("'","") + str(d.values()) 
```

然后将生成的 str 拆分回列表以将其提供给`cursor.execute()`. 或者创建一个

```
l=d.keys() 
```

然后`'`从列表的每个元素中删除

```
execute(sql,(l + d.values()) 
```

所有这些看起来都很难看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:45:31.457

尝试这样的事情：

```
d=dict(a='pepe',b=4,c='potamo')
sql = "INSERT INTO db.table (a, b, c) VALUES (%(a)s,%(b)s,%(c)s)"
c.execute(sql, d) 
```

# c# - Treeview.selectednode 给出了错误的值

> ID：12493512
> 
> 赞同：0
> 
> 时间：2012-09-19T11:09:09.683
> 
> 标签：c#, winforms, treeview

我有一个树视图，其中有几个孩子，其中许多孩子都有祖先。我在树视图旁边还有一个数据网格视图。基于treeview选择的节点，我在Datagridview中绑定数据。

我`treeView1.SelectedNode`用来获取节点值我的问题是这个表达式给出了之前选择的节点。

```
private void treeView1_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
{
    node = e.node;
} 
```

这给了我正确的节点（选定的节点）。但

`node = treeview1.selectednode`给出我之前选择的节点。我想在点击事件（_nodemouseclick）之外获取选定的节点。

我怎么才能得到它。我不想将节点保存在全局变量中然后使用它。

希望我能清楚地解释我的问题。

感谢期待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:54:50.633

```
 TreeNode yourGlobalTreeNode;
    void treeView1_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
    {
        yourGlobalTreeNode = e.Node;
        otherFunction();
        anOtherFunction(e.Node);
    }
    void otherFunction()
    {
        MessageBox.Show(yourGlobalTreeNode.Text);
    }
    void anOtherFunction(TreeNode tn)
    {
        MessageBox.Show(tn.Text);
    } 
```

其他功能意味着您可以使用以上两种方法在任何地方使用此 tree_node。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:30:35.100

这是因为在 selectedNode 更改之前引发了 MouseClick 事件。尝试改用 SelectedItemChanged 事件

```
 private void TreeView1_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
    {

    } 
```

# ajax - jQuery ajax JSON 响应太大

> ID：12493513
> 
> 赞同：1
> 
> 时间：2012-09-19T11:09:10.690
> 
> 标签：ajax, json, web-services

我有一个返回`string`jQuery`$.ajax`调用的 .NET Web 服务。

如果字符串的长度小于 88900（左右），它可以正常工作，但是一旦我向字符串添加 100 个字符，它就不再工作了。我得到一个`500 Internal Server`错误。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T11:18:08.050

jQuery 不限制大小，但 ASP.NET 默认情况下会这样做。您可以使用此 web.config 设置对其进行调整：

```
<system.web.extensions>
  <scripting>
      <webServices>
        <jsonSerialization maxJsonLength="x">
        </jsonSerialization>
      </webServices>
  </scripting>
</system.web.extensions> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-08T11:12:31.563

您可以增加 Json 结果的最大长度。

```
var list = Json(new { list = tasksList }, JsonRequestBehavior.AllowGet);

list.MaxJsonLength = int.MaxValue; 
```

# cakephp - CakeTime 31/12/2012 to 2012-12-31?

> ID：12493521
> 
> 赞同：0
> 
> 时间：2012-09-19T11:09:38.337
> 
> 标签：cakephp, date, format

I am trying to format an date received as 31/12/2012 to 2012-12-31.

I have used ::format and ::toServer, but I get 2012-31-12 instead of 2012-12-31.

How can I do it ?

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:53:57.930

尝试这个：

```
//via Time helper
echo $this->Time->format('Y-m-d', "31/12/2012");

//via CakeTime utility
echo CakeTime::format('Y-m-d', "31/12/2012"); 
```

来自 CakePHP 1.3 手册：

> (...) 格式是 PHP 日期函数的包装器。

# magento - Magento：获取子类别的描述和图像

> ID：12493522
> 
> 赞同：0
> 
> 时间：2012-09-19T11:09:57.627
> 
> 标签：magento

我正在使用此代码在 Magento 中显示特定类别的子类别：

```
$parentCategoryId = 3;
foreach Mage::getModel('catalog/category')->load($parentCategoryId)->getChildrenCategories() as $childCategory) {
     echo $childCategory->getName() . '<br />';
     echo $childCategory->getUrl() . '<br />';
} 
```

这工作安静的罚款。但现在我喜欢显示这些子类别的描述和类别图像。我已经尝试过描述并添加了这一行：

```
echo $childCategory->getDescription() . '<br />'; 
```

但是输出是空的。有人知道我可以做些什么来显示描述和稍后的类别图像吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:55:16.983

请试试这个，它在我的最后工作正常

```
<?php  
$parentCategoryId = 10;
$categories = Mage::getModel('catalog/category')->load($parentCategoryId)->getChildren();
$catArray = explode(',', $categories);
foreach($catArray as $child){
     $_child = Mage::getModel( 'catalog/category' )->load( $child );
     echo $_child->getName() . '<br />';
     echo $_child->getUrl() . '<br />';
     echo $_child->getDescription() . '<br />';
}
?> 
```

我们不会从此函数 getChildrenCategories() 中获取类别描述属性。关于此功能的更好解释可以在[Stackoverflow 答案中找到](https://stackoverflow.com/questions/1552342/magento-getting-the-descriptions-from-a-sub-category)

# c# - 在 c# 中移动文件而不重命名它

> ID：12493527
> 
> 赞同：1
> 
> 时间：2012-09-19T11:10:03.523
> 
> 标签：c#, asp.net, visual-studio-2010

我有一组 XML 文件，我正在循环遍历并将有错误的文件移动到另一个文件位置。但是，当我使用 system.io.file.move 函数时，它需要我指定文件名而不是移动文件路径。有没有办法可以在保持相同名称的同时将文件从一个位置移动到另一个位置？我目前正在根据文件在数组中的位置创建一个名称，这实际上并不可行。

```
string ErrorPath = string.Format(@"{1}ErroredXml{0}.xml", errorLength, errorPaths);

//If type equals "add" then call add method else call update
if (Equals(type, typecomp))
{
    //pass object to data access layer to add record
    value.addNewGamePlay();

    if (value.getGamePlayID() == 0)
    {
        //move to error file
        System.IO.File.Move(value.getFile(), ErrorPath);
        errorLength++;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T11:12:25.637

您可以使用[`Path.GetFileName`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)以下方法提取原始文件名并使用它构造目标路径[`Path.Combine`](http://msdn.microsoft.com/en-us/library/fyy7a5kt.aspx)：

```
var original = value.getFile();
var destinationPath = Path.Combine(errorPaths, Path.GetFileName(original)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T11:16:35.897

移动方法不需要更改文件名。第二个参数不是文件的新名称，而是文件的新路径，例如

第一个参数 (sourceFileName) @"c:\temp\MyTest.txt"

第二个参数 (destFileName) @"c:\temp2\MyTest.txt"

所以文件名是相同的“MyTest.txt”只是位置改变了。

# javascript - 用javascript构建html标签

> ID：12493528
> 
> 赞同：0
> 
> 时间：2012-09-19T11:10:04.200
> 
> 标签：javascript, html

场景如下：我多次调用 buldMyStuff 函数以如下方式构建图像。将 img 包装成“a”标签不是一种选择。

```
function buildMyStuff(item){
    var tag = <img src="someimg.png" onclick="doClick(' + item.Type + ',' + item.data+ ')" />';
    return tag;
}

function doClick(type,data){
    //do stuff
} 
```

让我们假设 item.type 的值为“type”，item.data 的值为“data”。问题是当我单击图像时，它说类型未定义。因此（我检查了构建的 html 结构）img 最终看起来像这样：

```
<img src="someimg.png" onclick="doClick(type,data)" /> 
```

我需要实现的是：

```
 <img src="someimg.png" onclick="doClick('type','data')" /> 
```

但是，当我使用 ' 字符来包装整个标签和 " 字符来包装属性时，我不能使用其他任何东西。有人知道解决方案吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:12:26.450

这是无效的；

```
var tag = <img src="someimg.png" onclick="doClick(' + item.Type + ',' + item.data+ ')" />'; 
```

它应该是

```
var tag = '<img src="someimg.png" onclick="doClick(\'' + item.Type + '\',\'' + item.data+ '\')" />'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:13:15.040

```
function buildMyStuff(item){ 
    var tag = '<img src="someimg.png" onclick="doClick(\'' + item.Type + '\',\'' + item.data+ '\')" />'; 
    return tag; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T11:14:22.513

您可以使用`'\'`转义特殊字符。

`var tag = <img src="someimg.png" onclick="doClick(' + item.Type + ',' + item.data+ ')" />';`

=>

`var tag = '<img src="someimg.png" onclick="doClick(\'' + item.Type + '\',\'' + item.data+ '\')" />';`

# iphone - change the view on button clicked in tabbar app

> ID：12493529
> 
> 赞同：0
> 
> 时间：2012-09-19T11:10:05.587
> 
> 标签：iphone, objective-c, ios, xcode, uitabbarcontroller

In my tab based app, I programetically created the tabbar app with 4 tabs. In my first tab there is 5 scrren & in 3rd tab there is 3 screens.

On my first tab's 2nd screen when i click one button i want it should go to 2nd screen in 3rd tab. But now it go to the screen which is last open on 3rd tab.

e.g. tabControllers: a,b,c,d

```
a tab: 1->2>3>4>5

C  tab:  1>2>3 
```

I want selected tab is a: & screen is: 3 &

click button on that screen go to

selected tab is C & screen is 2nd

reference link is: [Change the selected TabBar index on button click](https://stackoverflow.com/questions/12313820/change-the-selected-tabbar-index-on-button-click)

My code is as follow:

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
 //for home tab..
    UINavigationController *nav1 = [[UINavigationController alloc] init];
    UIViewController *viewController1 = [[[CarAccidentAppViewController alloc] initWithNibName:@"CarAccidentAppViewController_iPhone" bundle:nil] autorelease];
    nav1.viewControllers = [NSArray arrayWithObjects:viewController1, nil];

    //for steps tab...
    UINavigationController *nav2 = [[UINavigationController alloc] init];
    UIViewController *viewController2 = [[[FirstSteps alloc] initWithNibName:@"FirstSteps" bundle:nil] autorelease];
    nav2.viewControllers = [NSArray arrayWithObjects:viewController2, nil];

    //for profiles tab...
    UINavigationController *nav3 = [[UINavigationController alloc] init];
    UIViewController *viewController3 = [[[Profiles alloc] initWithNibName:@"Profiles" bundle:nil] autorelease];
    nav3.viewControllers = [NSArray arrayWithObjects:viewController3, nil];

    //for contact us tab...
    UINavigationController *nav4 = [[UINavigationController alloc] init];
    UIViewController *viewController4 = [[[ContactUs alloc] initWithNibName:@"ContactUs" bundle:nil] autorelease];
    nav4.viewControllers = [NSArray arrayWithObjects:viewController4, nil];

    self.tabBarController = [[[UITabBarController alloc] init] autorelease];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:nav1,nav2,nav3,nav4 ,nil];

    self.window.rootViewController=self.tabBarController;
      [self.window makeKeyAndVisible];
    return YES;

}

//Button click event 
-(IBAction)btnNewDriverPressed:(id)sender
{
    [[NSUserDefaults standardUserDefaults]setInteger:0 forKey:@"showselectedIndex"];
    self.tabBarController.selectedViewController=[self.tabBarController.viewControllers 
objectAtIndex:2];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:22:23.850

请上传您的流程，并附上说明您真正想要实现的目标的图片。

浏览您的愿望`viewcontroller`/`screen`使用`initwithnibname`方法。

跟随 ：

```
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
[self.navigationController pushViewController:self.viewController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:44:50.380

抱歉，您无法使其工作..如果您在第一个屏幕的“C”选项卡中，您只需单击任何按钮即可进入第二个屏幕。通过按 c 选项卡，它不会在不按任何按钮的情况下将第二个视图控制器加载到您的导航控制器。所以你需要自己推到第二个屏幕并选择c选项卡。但我认为，如果你这样做，你的应用程序设计并不好。它不会提供最佳的用户体验。

# frameworks - How to make public directory of my framework the default one in Vagrant?

> ID：12493530
> 
> 赞同：0
> 
> 时间：2012-09-19T11:10:13.163
> 
> 标签：frameworks, virtualization, virtual-machine, virtualbox, vagrant

I am using **[Vagrant](http://vagrantup.com/)** to set up my local development environment. I managed to do port forwarding from port 80 on my Virtual Machine (lucid64) to my host port 8080\. If I put an index.html file in my project folder and type 'localhost:8080' in my browser, I see the html page displayed. So far so good.

The thing is I work on a framework which has this directory structure:

```
app
**public**
vendor
tmp 
```

where the public folder should be the 'root' folder.

So I edited the project.conf file located at /etc/apache2/sites-available in my Virtual Machine to:

```
<VirtualHost *:80>
    DocumentRoot /vagrant/public
</VirtualHost> 
```

(I simply added the '/public' part).

Now when I go to localhost:8080 in my browser, **it downloads the index.php file in the public folder instead of displaying it. How can I fix that please?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:13:50.510

PHP 是否在您的 apache 配置中正确安装和启用？我不认为这与流浪汉有关。

# java - Why Lucene does not return the results based on whole word match?

> ID：12493545
> 
> 赞同：2
> 
> 时间：2012-09-19T11:11:02.297
> 
> 标签：java, regex, lucene

I am using Lucene to match the keywords with list of words within an application. The whole process is automated without any human intervention. Best matched result (the one on the top and highest score) is picked from the results list returned from Lucene.

The following code demonstrates the above functionality and the results are printed on console.

**Problem :**

The problem is that lucene searches the keyword (word to be searched) and gives as a result a word that partially matches the keyword. On the other hand the full matched result also exists and does not get ranked in the first position.

For example, if I have lucene RAM index that contains words 'Test' and 'Test Engineer'. If i want to search index for 'AB4_Test Eng_AA0XY11' then results would be

Test
Test Engineer

Although Eng in 'AB4_Test Eng_AA0XY11' matched for Engineer (that is why it is listed in results). But it does not get the top position. I want to optimize my solution to bring the 'Test Engineer' on top because it the best match that considers whole keyword. Can any one help me in solving this problem?

```
public class LuceneTest {

private static void search(Set<String> keywords) {

    StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_36);
    try {
        // 1\. create the index
        Directory luceneIndex = buildLuceneIndex(analyzer);

        int hitsPerPage = 5;
        IndexReader reader = IndexReader.open(luceneIndex);

        for(String keyword : keywords) {

            // Create query string. replace all underscore, hyphen, comma, ( , ), {, }, . with plus sign
            StringBuilder querystr = new StringBuilder(128);
            String [] splitName = keyword.split("[\\-_,/(){}:. ]");

            // After tokenizing also add plus sign between each camel case word. 
            for (String token : splitName) {
                querystr.append(token + "+");
            }

            // 3\. search
            IndexSearcher searcher = new IndexSearcher(reader);
            TopScoreDocCollector collector = TopScoreDocCollector.create(hitsPerPage, true);

            Query q = new QueryParser(Version.LUCENE_36, "name", analyzer).parse(querystr.toString());
            searcher.search(q, collector);
            ScoreDoc[] hits = collector.topDocs().scoreDocs;

            System.out.println();
            System.out.println(keyword);
            System.out.println("----------------------");
            for (ScoreDoc scoreDoc : hits) {
                Document d = searcher.doc(scoreDoc.doc);
                System.out.println("Found " + d.get("id") +  " : " + d.get("name"));
            }

            // searcher can only be closed when there
            searcher.close();
        }

    }catch (Exception e) {
        e.printStackTrace();
    }
}

/**
 * 
 */
private static Directory buildLuceneIndex(Analyzer analyzer) throws CorruptIndexException, LockObtainFailedException, IOException{

    Map<Integer, String> map = new HashMap<Integer, String>();
    map.put(1, "Test Engineer");
    map.put(2, "Test");

    Directory index = new RAMDirectory();
    IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_36, analyzer);

    // 1\. create the index
    IndexWriter w = new IndexWriter(index, config);
    for (Map.Entry<Integer, String> entry : map.entrySet()) {
        try {
            Document doc = new Document();
            doc.add(new Field("id", entry.getKey().toString(), Field.Store.YES, Field.Index.ANALYZED));
            doc.add(new Field("name", entry.getValue() , Field.Store.YES, Field.Index.ANALYZED));
            w.addDocument(doc);

        }catch (Exception e) {
            e.printStackTrace();
        }
    }

    w.close();

    return index;
}

public static void main(String[] args) {

    Set<String> list = new TreeSet<String>();

    list.add("AB4_Test Eng_AA0XY11");
    list.add("AB4_Test Engineer_AA0XY11");

    search(list);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T13:38:30.377

如果这两个结果（测试，测试工程师）具有相同的排名分数，那么您将按照它们出现的顺序查看它们。您应该尝试使用长度过滤器并增强术语，然后您可能会想出解决方案。

另请参阅： [将完全匹配排名为最高的最佳 lucene 设置是什么](https://stackoverflow.com/questions/8786343/what-is-the-best-lucene-setup-for-ranking-exact-matches-as-the-highest?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:17:58.697

您可以查看[Lucene 查询语法规则](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/queryparsersyntax.html)，了解如何强制搜索`Test Engineer`.

基本上，使用诸如

```
 AB4_Test AND Eng_AA0XY11 
```

*可以*工作，虽然我不确定。上面链接指向的页面非常简洁，您将能够快速找到可以满足您需求的查询。

# javascript - 使用 Ajax 重新加载/刷新 div

> ID：12493547
> 
> 赞同：0
> 
> 时间：2012-09-19T11:11:09.917
> 
> 标签：javascript, jquery, ajax

我正在尝试将一段 jquery 放在一起以显示隐藏的 div，同时刷新父 div，以便 javascript 可以修改并显示新的高度。

这是我到目前为止所拥有的，但经过一些研究发现，除了刷新 div 之外，您必须使用 ajax 并且想知道是否有人可以伸出援手。

```
var $r = jQuery.noConflict();
  $r(document).ready(function() {
      $r('#open').click(function () {
        $r('#expandable-2').show('slow');
        $r(this).load(location.href + '.panel > *');
      });
       $r('#close').click(function () {
        $r('#expandable-2').hide('1000');
        $r(this).load(location.href + '.panel > *');
      });
  }); 
```

到目前为止，我有这个，

*   带有打开和关闭 id 的链接
*   单击后，他们将显示块的 css 属性提供给 div expandable-2
*   我坚持的部分是刷新父 div .panel 以便正确显示显示的 div。

原因是我目前在我的页面中使用 CodaSlider 脚本，并且高度是根据容器中的内容量动态引入的。现在为了在单击打开时显示新内容，需要刷新容器，从而以新高度显示新内容。

希望这是有道理的，但任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:14:49.910

to "refresh" a div you just need to do:

```
document.getElementById("myDiv").innerHTML = new_content; 
```

new_content may be the html returned by your ajax call but you definitely DON'T need an ajax call to "refresh" a div.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:21:11.600

`html`您可以使用jQuery 的方法更改 div 的 html 。

```
$r(".content-div").html("Hello world"); 
```

如果你想用ajax从服务器加载一个html，你应该使用`load`如下函数：

```
$r(".content-div").load("ajax/users.html"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:22:16.833

您的代码明显混乱。只是一些提示：

*   如果您的父 div 包含#expandable-2，那么您将无法执行 ajax 调用并立即显示动画，因为 ajax 调用会在 #expandable-2 元素出现/消失时破坏它。
*   通过 ajax 将外部代码加载到 div 中的正确方法是：

    ```
    $r('.panel').load('/path/to/url'); 
    ```

    这会将“/path/to/url”的响应加载到“.panel”div中。**确保 '/path/to/url' 只返回 div 的新内容**，否则不能使用 $r('.panel').load，而必须使用间接方法（即：$r.ajax )

# java - 如何使用数组列表？[哎呀]

> ID：12493548
> 
> 赞同：0
> 
> 时间：2012-09-19T11:11:12.240
> 
> 标签：java, arraylist

实现 Zoo 类（及其测试类）。动物园的名称和面积以平方米为单位。动物园可以有一种或多种动物。动物具有 ID、名称、类型、年龄、性别。我们应该能够向 Zoo 添加新的 Animals，移除 Animals 并确定目前动物园中有多少动物。

这是动物园类：

```
import java.util.ArrayList;

public class Zoo {
    String name;
    String area;
    ArrayList<Animal> animals;
    static int id;

    public Zoo(String name, String area) {
        this.name = name;
        this.area = area;
    }

    public void addanimal(animal ann) {
        animals.add(id, ann);
        id++;
    }
}

public class Animal {
    String name;
    String type;
    String age;
    String gender;

    public Animal(String name, String type, String age, String gender) {
        this.name = name;
        this.type = type;
        this.age = age;
        this.gender = gender;
    }
}
public class Test {

    public static void main(String[] args) {
        Zoo nozha = new Zoo("nozha", "100");
        Animal lion = new Animal("lion", "male", "20", "fine");
        nozha.addanimal(lion);
        Znimal tiger = new Animal("tiger", "male", "30", "ssc");
        nozha.addanimal(tiger);
        System.out.print(Zoo.id);
    }
} 
```

首先，我需要有关功能（addanimal）的帮助，因为当我打印（zoo.id）时它不起作用并且我不知道如何删除动物请帮助我，我是编程初学者，这是我第一次使用 ArrayList，我从来没有问过

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T11:17:40.273

您需要将`animals`变量初始化为默认值以外的其他值，即`null`：

```
private List<Animal> animals = new ArrayList<Animal>(); 
```

然后查看 的[javadoc](http://docs.oracle.com/javase/6/docs/api/)，`java.util.List`您会发现它包含添加和删除元素的方法，以及返回其大小的方法，因此完全不需要 id 变量。

此外，请注意在 javadoc 中所有类如何以大写字母开头，并且所有方法都以 camelCase 拼写（like`addAnimal()`和 not like `addanimal()`）。尊重这些约定：它们是代码可读性的一个非常重要的因素。

此外，为您的变量选择适当的类型。面积（以平方米为单位）应该是 int 或 float 或 double，但不能是 String。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:50:09.570

动物园.java：

```
import java.util.ArrayList;
  public class Zoo {

    String name; 
    double area; 
    int sizeOfZoo = 0;
    ArrayList<Animal> animals = new ArrayList<Animal>();

    public Zoo(String name, double area) { 
        this.name = name; 
        this.area = area;

    }   

        public void addAnimal(Animal ann) {
        animals.add(ann); 
    } 

        public int getSizeOfZoo() {
                return animals.size();
        }
    } 
```

动物.java

```
public class Animal {
    String name;
    String type;
    String age;
    String gender;

    public Animal(String name, String type, String age, String gender) {

            this.name = name;
            this.type = type;
            this.age = age;
            this.gender = gender;
        }    
    } 
```

测试.java

```
 public class Test {

        public static void main(String[] args) {

            Zoo nozha = new Zoo("nozha", 100);
            Animal lion = new Animal("lion","fine","20","male");
            nozha.addAnimal(lion); 

            Animal tiger = new Animal("tiger","ssc","30","female");
            nozha.addAnimal(tiger);

            System.out.println("Number of animals in zoo: " + nozha.getSizeOfZoo());
        }
} 
```

我为您提供了一个 getSizeOfZoo() 方法，以摆脱 Id 变量。将区域的字符串更改为双精度。保持你的类分开，保持命名约定 Class、variable、methodName() 等。这样更容易阅读。创建狮子和老虎时的参数有点偏离，我现在将其设置为名称，类型，年龄，性别。

查看 ArrayList 的 javadoc，您可以弄清楚如何从 ArrayList 中“删除”一个元素（我不愿意为您做您的项目）。您遇到的问题更多是关于编码基础知识，而不是任何特定于 Java 或特定于 OOP 的问题。读一读，试试方法 removeAnimal(animal an) 看看你是怎么做的。如果有任何问题，我们可以提供帮助，但请查看 getSizeOfZoo() 和 addAnimal() 以及文档，您应该会飞！

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:19:28.130

> 首先我需要有关功能（addanimal）的帮助，因为当我打印时（zoo.id）

根据您的代码，它似乎`zoo.id`会返回`ArrayList<animals>`为什么使用上述列表的大小或按照*封装*`animals.size()`规则的大小，. *这可能会返回 NullPointerException，因此初始化**arraylist`**`getAnimals().size()`*`ArrayList<animals> with a empty`**

 *在删除列表中的上述动物时，您最好选择`animals.remove(Animal ann)`.

在更新时，*通过 ID 或 hashCode*`animals.contains(Animal ann)`检查是否为真，然后检查列表中的索引，然后更新*`ann``ann``animals.set(<index>, ann)`**

# solr - 或 Solr 中的查询不起作用

> ID：12493557
> 
> 赞同：1
> 
> 时间：2012-09-19T11:11:47.000
> 
> 标签：solr

我的 Solr 服务器似乎只使用 AND 而不是 OR，例如

```
/solr/select?q=(marsden AND emma)&qt=yodl_handler works, but 
/solr/select?q=(marsden OR mackey)&qt=yodl_handler doesn't. 
```

对于每个单独的查询，它返回结果，例如

```
/solr/select?q=marsden&qt=yodl_handler returns 2 results
/solr/select?q=mackey&qt=yodl_handler returns 3 results 
```

任何建议表示赞赏！

这是 yodl_handler 的定义：

```
<requestHandler name="yodl_handler" class="solr.DisMaxRequestHandler">
    <lst name="defaults">
      <str name="echoParams">explicit</str>
      <float name="tie">0.01</float>
      <str name="qf">
        dc.title^1 dc3.title^1 dc.type^1 vra2.logical.creator^1 vra2.image.agent.name^1 vra2.image.agent.role^1 vra2.image.agent.role^1 vra2.image.location.name^1 vra2.image.rights.rightsholder^1 vra2.image.source.refid^1 vra2.image.title^1 vra2.image.worktype^1 vra2.work.agent.attribution^1 vra2.work.agent.name^1 vra2.work.agent.role^1 vra2.work.culturalContext^1 vra2.work.description^1 vra2.work.location-type^1 vra2.logical.location.place^1 vra2.logical.location.name^1 vra2.work.location.refid^1 vra2.work.material^1 vra2.work.rights.rightsHolder^1 vra2.work.StylePeriod^1 vra2.work.subject.term.name^1 vra2.work.subject.term.place^1 vra2.work.subject.term.keyword^1 vra2.work.technique^1 vra2.work.title^1 vra2.work.worktype^1 iris2.instrument.instrumentType^1 iris2.instrument.primaryInstrumentType^1 iris2.instrument.secondaryInstrumentType^1 iris2.instrument.instrumentType.alltypes^1 iris2.instrument.author^1 iris2.references.allauthors^1 iris2.instrument.researchArea^1 iris2.instrument.typeOfFile^1 iris2.instrument.software^1 iris2.instrument.dataType^1 iris2.instrument.linguisticTarget^1 iris2.instrument.sourceLanguage^1 iris2.instrument.funder^1 iris2.instrument.licence^1 iris2.participants.participantType^1 iris2.participants.firstLanguage^1 iris2.participants.targetLanguage^1 iris2.participants.gender^1 iris2.participants.proficiencyLearner^1 iris2.participants.proficiencyStudentsTaught^1 iris2.participants.yearsOfTeachingExperience^1 iris2.participants.domainOfUse^1 iris2.references.publicationType^1 iris2.references.author^1 iris2.references.author.lastnames^1 iris2.references.booktitle^1 iris2.references.journal^1 iris2.references.publicationDate^1 iris2.references.publicationLatestDate^1 iris2.references.publisher^1 iris2.references.placeOfPublication^1 iris2.references.editor^1 iris2.references.conferenceName^1
      </str>
      <int name="ps">100</int>
      <str name="q.alt">*:*</str>
      <str name="hl.fl">text features name</str>
      <str name="f.name.hl.fragsize">0</str>
      <str name="f.name.hl.alternateField">name</str>
      <str name="f.text.hl.fragmenter">regex</str>
    </lst>
</requestHandler> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:17:08.550

简单的答案是，Solr DisMax 查询解析器不支持查询中的布尔逻辑。它与涉及“AND”的查询一起使用的外观可能是您的字段索引方式（停用词？）或出现在基础数据中的副作用。

如果您发送 debugQuery 参数，您可以更好地了解幕后发生的事情，例如：

> /solr/select?q=(marsden AND emma)&qt=yodl_handler&debugQuery=true

Solr wiki 上有更多关于 Dismax 解析器的文档：

> Dismax 查询解析器支持 Lucene QueryParser 语法的一个极其简化的子集。引号可用于对短语进行分组，+/- 可用于表示强制和可选子句……但所有其他 Lucene 查询解析器特殊字符都被转义以简化用户体验。（参见[DisMaxQParserPlugin](http://wiki.apache.org/solr/DisMaxQParserPlugin)）

好消息是，如果您使用的是现代版本的 Solr (3.1+)，您可以访问新的[ExtendedDisMax](http://wiki.apache.org/solr/ExtendedDisMax)解析器，它支持布尔查询。`

# android - 使用 findviewbyid 实例化时覆盖方法

> ID：12493559
> 
> 赞同：0
> 
> 时间：2012-09-19T11:12:18.200
> 
> 标签：android

我有一个关于覆盖方法的问题。当我实例化一个视图时，我有 2 个选项。

1.以编程方式实例化视图。

```
View view = new View( .... ){
      onDraw(){

         .......
      }

 }; 
```

2.从布局实例化视图。

```
View view = findViewbyid(...){

        onDraw(){
           .......
        }
}; 
```

我的问题是，是否有可能覆盖第二个选项中所示的方法。？

感谢和问候，

沙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:14:30.510

不，第二个选项是不可能的。但是，您可以创建自定义类`extends View`并覆盖您想要的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T11:23:34.380

不，你不能用第二个选项来做。当您使用时，`findViewById`您已经在实例化原生 Android View 类，它会调用构造函数： `public View (Context context, AttributeSet attrs)`. 您必须创建自定义视图并在那里覆盖实现 `onDraw(Canvas canvas)`以适应您的需求。

# php - .htaccess 文件，路径已正确重定向，但未加载图像和 css

> ID：12493563
> 
> 赞同：0
> 
> 时间：2012-09-19T11:12:27.900
> 
> 标签：php, apache, .htaccess, url-rewriting, seo

嗨，我在 .htaccess 文件中使用以下几行

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /coaster/CoasterInsider/
 RewriteRule signup$ index.php?page=signup [L,NC]
 RewriteRule login$ index.php?page=loginHandle [L,NC]
 RewriteRule u/(.*)$ index.php?page=profile&username=$1 [L,NC] 
```

路径被正确重定向，但没有加载 css、flash 和图像。另外，如果我在任何网址之后使用以下“/”，

```
RewriteRule signup(/?)$ index.php?page=signup [L,NC] 
```

它在那里找不到任何页面，即错误 404。我只希望我的 htaccess 文件同时适用于 /signup 和 /signup/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:21:45.487

当浏览器显示：

```
http://example.com/coaster/CoasterInsider/signup
http://example.com/coaster/CoasterInsider/signup/ 
```

并遇到一个相对 URL，例如：

```
<img src="site/images/photo.png"> 
```

它将相对 URL 转换为（分别）：

```
http://example.com/coaster/CoasterInsider/site/images/photo.png
http://example.com/coaster/CoasterInsider/signup/site/images/photo.png 
```

您应该对资产使用绝对 URL。养成这样的习惯：

```
<img src="/site/images/photo.png"> 
```

或者，您可以在页面中使用 HTML[`base`](http://www.w3.org/TR/html401/struct/links.html#h-12.4)标签，它告诉浏览器如何处理相对 URL。我个人不推荐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:59:30.813

这被建议并为我工作，将它放在`<head>`你的标签内`html`：`<base href="/">`再次，它对我有用，我希望它可以帮助其他人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:18:09.917

采用

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

排除真实文件和目录被重写。

您还可以添加

```
RewriteCond %{REQUEST_FILENAME} !-l 
```

对符号链接做同样的事情。

# drupal-6 - 如何增加分类学csv模块的上传期限限制

> ID：12493565
> 
> 赞同：0
> 
> 时间：2012-09-19T11:12:30.210
> 
> 标签：drupal-6

**我正在尝试通过分类学 csv 上传模块上传 csv，但是在上传具有更多字符的术语时，它会给出术语字符限制为 255 的错误。有什么办法可以增加这个限制，以便我可以上传我的条款。谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:34:17.660

默认情况下，术语名称在 mySQL 数据库中总共限制为 255 个字符。据我所知，没有什么可以超越这一点。由于您无法修改数据库，因此如果不先对数据库进行一些重大修改，就无法使其超过 255 个字符，这反过来又会给您带来很多问题。如果您的条款超过 255 个字符，最好的办法是将名称限制为少于 255 个。

出于参考目的，分类法 csv 导入模块默认限制了您可以上传的字符数量。以下文件是它们所在的位置：`taxonomy_csv/import/taxonomy_csv.import.parser.api.inc`. 在此文件中，您将在以下行号上找到数字： `50, 142, 159, 196, 235, 279, 306, and 341`

与往常一样，在更改任何设置或结构之前备份您的数据库。

# c# - 使用 .NET 3.5 的 Visual Studio 2010 项目似乎允许 System.Xml 中仅可从 .NET 4.0 获得的方法

> ID：12493567
> 
> 赞同：3
> 
> 时间：2012-09-19T11:12:39.723
> 
> 标签：c#, .net, visual-studio-2010, .net-3.5

我最近在某些机器上遇到了以下异常。

> 未处理的异常：System.MissingMethodException：找不到方法：'无效 System.Xml.Xsl.XslCompiledTransform.Transform（System.Xml.XPath.IXPathNavigable，System.Xml.Xsl.XsltArgumentList，System.Xml.XmlWriter，System.Xml.XmlResolver )'。

从这个错误中可以清楚地看出，我们正在尝试对[`System.Xml.Xsl.XslCompiledTransform`](http://msdn.microsoft.com/en-us/library/dd728267.aspx)不存在的类使用方法。

该错误似乎与存在或不存在 .NET Framework 4.0 的 Windows XP 机器隔离，但适用于我尝试过的 Windows 7 机器（都有 3.5 和 4.0）。

阅读文档，我们可以看到这里使用的签名在 .NET 4.0 中可用，但在更早的版本中不可用。

在新的 .NET 3.5 控制台应用程序中使用以下代码，我尝试以几种不同的方式编译项目。

```
using System;
using System.Xml.XPath;
using System.Xml.Xsl;

namespace SystemXmlTestTool
{
    class Program
    {
    static void Main(string[] args)
    {
        var transform = new XslCompiledTransform();

        try
        {
            transform.Transform((IXPathNavigable)null, null, null, null);
        }
        catch (Exception e)
        {
            Console.WriteLine(e.GetType().Name);
            Console.WriteLine(e.Message);
        }

        Console.ReadKey();
    }
    }
} 
```

通过运行

```
C:\Windows\Microsoft.NET\Framework\v3.5\MSBuild.exe /target:clean
C:\Windows\Microsoft.NET\Framework\v3.5\MSBuild.exe /target:build 
```

在 Windows 7 机器上（以及通过 Visual Studio 2010 编译），项目将成功编译。

如果我在 Windows XP 机器（也安装了 .NET Framework 4.0）上执行相同操作，我会收到一个编译器警告，告诉我很明显。

**归根结底的问题是；**为什么 Windows 7 机器（多台）上的 Visual Studio 2010/MSBuild 允许我在我的代码中使用此方法，而 .NET Framwork 3.5 中不应该存在这种方法？

我怀疑我的环境有问题，但我不知道为什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T11:17:56.757

最有可能的是，您只在它失败的机器上安装了 .NET Framework 3.5 客户端配置文件，而在它工作的机器上安装了完整的 .NET Framework 3.5。

当以完整框架为目标时，我可以在 Windows 7 上编译代码，但在以客户端配置文件为目标时不能。

此时文档似乎不正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T11:31:14.870

该方法肯定在我的 2.0 GAC 中，但是，它完全有可能是由其中一个服务包添加的。由于 4.0 与 2.0（包括 3.0 和 3.5）是隔离的，所以那些机器有 4.0 并不重要。重要的是它们拥有的 2.0 版本（特别是在 XP 机器上）：

*   2.0 - 使用 SP1？与 SP2？
*   3.0 - 使用 SP1？与 SP2？
*   3.5 - 使用 SP1？

我的猜测是它没有显示在文档中，*要么是*因为事故，要么是因为它不在核心框架版本中。有趣的是，该方法也没有智能注释，这**很不**寻常。

# python - Django：复合字段或嵌入式类（如 JPA）？

> ID：12493568
> 
> 赞同：3
> 
> 时间：2012-09-19T11:12:41.880
> 
> 标签：python, django, django-models

假设您必须对几个应该具有复合属性的类进行建模，例如*尺寸*（*宽度*和*高度*）或*电话号码*（*前缀*、*号码*和*扩展名*）。

在 Java 中（使用 JPA 2）我会创建一个*Dimensions*类并用`@Embeddable`. 这会导致*Dimension 的*字段（例如*width*和*height*）嵌入到每个声明类型为*Dimensions*属性的类中。

您如何使用 Django 对这些进行建模，同时避免代码重复？*创建单独的维度*模型并使用字段引用它是没有意义的`ForeignKey`。并且这些类没有足够的共同点来证明模型继承是合理的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T12:20:50.157

我认为你可能过度思考继承。继承是并且实际上是组合模型的推荐方法。以下是如何在 Django 中正确使用模型继承的示例：

```
class PhoneModelBase(model.Model):
    phone = models.CharField(max_length=16)
    ...

    class Meta:
        abstract = True

class PhoneModel(PhoneModelBase):
    # phone is here without typing it
    # the only restriction is that you cannot redefine phone here
    # its a Django restriction, not Python restriction
    # phone = models.CharField(max_length=12) # <= This will raise exception
    pass 
```

所以它的作用是创建一个模型`PhoneModelBase`，但这里的关键是它使用`class Meta`with `abstract=True`。

这里有更多关于正在发生的事情的幕后故事以及对一些 Python 概念的一些解释。我假设您不知道它们，因为您在问题中提到了 Java。这些 Python 概念实际上是相当混乱的概念，所以我的解释可能并不完整，甚至令人困惑，所以如果你不遵循，请不要介意。您所需要知道的就是使用`abstact = True`. 这是官方文档：[https](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes) ://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes 。

`Meta`里面的属性`PhoneModelBase`就是这样，一个属性。它与类中的任何其他属性相同，除了它是一个类实例（请记住，在 Python 中，类和函数是一阶成员）。此外，Python 有一个叫做的东西`__metaclass__`，你可以将它添加到你的类中。`__metaclass__`定义了如何构建类的实例的方式。更多关于[这里](http://docs.python.org/reference/datamodel.html#customizing-class-creation)。Django 使用这些来创建模型类实例。

所以要创建这个`PhoneModelBase`类，下面是一个粗略的大纲：

*   当创建类的实例`PhoneModelBase`（类本身，而不是类的实例 - `PhoneModelBase()`）时，`__metaclass__`由于`model.Model`继承而产生的 接管创建过程
*   在 中`__metaclass__`，Python 调用创建实际类实例的函数并将您尝试创建的类中的所有字段 - PhoneModelBase 传递给它。这将包括`phone`,`Meta`以及您定义的任何其他字段
*   它看到`Meta`属性，然后开始分析其属性。根据这些属性的值，Django 会改变模型的行为
*   它看到`abstract`属性，然后改变它试图创建的类的逻辑——`PhoneModelBase`不将它存储在数据库中

因此`PhoneModelBase`，即使它的定义看起来与常规模型非常相似，它也不是常规模型。它只是一个抽象类，旨在在其他模型中用作复合材料。

当其他模型继承自 时`PhoneModelBase`，它们`__metaclass__`将从基本模型中复制属性，就像您手动键入这些属性一样。它不会是这样的外键。所有继承的属性都将成为模型的一部分，并将在同一个表中。

希望所有这些都有意义。如果没有，您只需要记住使用`Meta`class with即可`abstract = True`。

**编辑**

正如评论中所建议的，您还可以从多个基类继承。因此，您可以拥有`PhoneModelBase`, `DimensionsModelBase`，然后您可以从这两个（或更多）继承，并且所有基类的所有属性都将出现在您的模型中。

# c++ - 了解价值粘合剂

> ID：12493573
> 
> 赞同：3
> 
> 时间：2012-09-19T11:12:56.683
> 
> 标签：c++, templates, generics, c++11

它花了整整一年的时间，但我已经完成了[C++ 模板 -](http://www.josuttis.com/tmplbook/tmplbook.html) David Vandevoorde 和 Nicolai M. Josuttis 的完整指南，现在我被困在上一章的最后一部分 - 价值粘合剂，过去 3周。

第 457 页的第 22.8 节对 value binders 的介绍非常简单易懂，但我发现该部分其余部分的示例难以理解。具体来说，我不明白*（*参见`Binder`functors [/](http://www.josuttis.com/tmplbook/functors/binder1.hpp.html) binder1.hpp和functors [/binder2.hpp](http://www.josuttis.com/tmplbook/functors/binder2.hpp.html)和`BinderParams`类（参见[functors/binderparams.hpp](http://www.josuttis.com/tmplbook/functors/binderparams.hpp.html)）试图实现的目标。我的困难不是模板语法，而是这些背后的意图类。

类如何`Binder`执行绑定？类如何`BinderParams`识别（？）参数？这就是我难以看到/理解的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T12:04:08.997

[它是partial application](http://en.wikipedia.org/wiki/Partial_application)的一种实现，您可以在其中获取一个函数（或函子），并将一个值“绑定”到它的一个参数上，以获得一个新的函子，并少一个参数。

这对于将*通用*函数与*特定*数据结合起来最有用，而无需自己编写额外的样板代码。

考虑：您想通过对每个元素应用一个函数来转换一个集合，从而生成一个相同大小的新集合。例如，`std::transform`需要一元函数。如果您已经有一个函数可以执行您想要的操作但需要更多参数（例如，`AddTwoThings`当您只想向每个元素添加相同的常量时，Kerrek's），您可以：

*   重写它
*   编写另一个函数来调用第一个函数并固定一个参数
*   或者，您可以将一个参数*绑定*到固定值，得到一个可用的一元函数`std::transform`

* * *

有关显示 Vandevoorde & Josuttis 系统的 C++11 标准等效项的简单使用的示例，请参阅令人惊讶的详细[cppreference 示例](http://en.cppreference.com/w/cpp/utility/functional/bind)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T11:30:59.230

我没有这本书，我也不会去买它来回答这个问题（你应该修改它以使其独立），但我认为总体思路是这样的：

```
struct AddTwoThings
{
     int operator()(int a, int b) const { return a + b; }
};

typedef Binder<AddTwoThings, 0, int> AddThingToSomething;
//                           ^  ^^^
//                           |   |
//      argument position? --+   +-- bound type

AddTwoThings add2;
AddThingToSomething add10(add2, 10); 
```

现在`add10(n)`与 相同`add2(10, n)`，即`10 + n`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T11:35:34.193

看签名

```
template< class F, class T >
std::binder1st<F> bind1st( const F& f, const T& x );

template< class F, class T >
std::binder2nd<F> bind2nd( const F& f, const T& x ); 
```

即函数`bind1st`并`bind2nd`接受一个函数和一个参数并返回函数对象的`binder1st`和`binder2nd`。调用这些函数对象将调用函数`f`，并将其第一个或第二个参数评估为`x`。

您在 V&J 中提到的部分是该功能的实现。它已在 C++11 中被`std::bind`具有签名的更通用取代

```
template< class F, class... Args >
/*unspecified*/ bind( F&& f, Args&&... args ); 
```

的返回类型`std::bind`是可以存储到`auto`变量中但不明确提及的东西。要实现的代码非常棘手，因为您必须存储要绑定的参数的位置、类型和值。

# sql - 更新引用另一个表

> ID：12493575
> 
> 赞同：2
> 
> 时间：2012-09-19T11:13:02.527
> 
> 标签：sql, sql-update, informix

我有一个需要编写的语句（使用通用名称，因为这是为了工作）来更新表“tUpd”中的“updCol”列。tUpd 还有一个列“linkCol”，它存在于另一个表 tOther 中。tOther 有另一列“idCol”。

我的问题是更新 tUpd 中行的 updCol 值，这些行通过 linkCol 对应于具有给定 idCol 值的行。

我认为应该可行的一种解决方案如下；

```
update
    tUpd
set
    updCol = XXX
where exists (
    select
        idCol
    from
        tOther
    where
        tOther.linkCol = tUpd.linkCol
    and tOther.idCol = MY_ID
) 
```

但是，我担心这种方法会导致性能下降，因为我之前曾被警告过与性能相关的子查询 - 此子查询将为 tUpd 的每一行运行一次，这是正确的吗？

有没有人有更好的建议？

**重要更新**：我的工作场所不惜一切代价避免使用 SQL JOIN，更喜欢在 where 子句中使用，例如`where a.col = b.col`. 这可以说是相当尴尬，但允许在我不完全理解的特别是日志记录方面具有灵活性。所以，我正在寻找不使用 JOIN 的解决方案:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-04T11:34:32.900

上述所有解决方案都会在 Informix 中出现错误，因为它找不到表中的那个。这是一个对我有用的解决方案：

```
update table1
set table1.field2 = (select table2.field2 from table2 where table1.field1 = table2.field1)
where table1.field1 in (select table2.field1 from table2) 
```

* * *

[编辑：另一个问题](https://stackoverflow.com/questions/17701344/informix-update-with-select-syntax)的多列解决方案

```
update table1
set (table1.field2, table2.field3) = (
  (select table2.field2, table2.field3 
     from table2 
     where table1.field1 = table2.field1)
)
where table1.field1 in (select table2.field1 from table2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T11:23:15.787

也许它会帮助你

```
update tUpd
set tU.updCol = XXX
from tOther tot, tUpd tU   
where tot.linkCol = tU.linkCol
  and tot.idCol = MY_ID 
```

[这](https://stackoverflow.com/questions/10938270/update-informix-table-with-joins)是类似问题的链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T11:35:55.760

它就是这样

```
UPDATE DestinationTable
SET DestinationTable.UpdateColumn =  SourceTable.UpdateColumn 
FROM SourceTable
WHERE DestinationTable.JoinColumn = SourceTable.JoinColumn 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-01T14:46:41.460

这适用于 Informix 数据库：

```
UPDATE dest_table V 
SET field_1 = 
   (SELECT field_1 FROM source_tbl WHERE field_2 IS NULL
   AND field_1 = V.field_1); 
```

[参考](https://www.ibm.com/support/knowledgecenter/SSGU8G_12.1.0/com.ibm.sqls.doc/ids_sqs_1830.htm)

# mongodb - MongoDB 中的多集合、多文档“事务”

> ID：12493576
> 
> 赞同：20
> 
> 时间：2012-09-19T11:13:06.877
> 
> 标签：mongodb, transactions

我意识到，就其本质而言，MongoDB 不会也可能永远不会支持此类事务。但是，我发现我确实需要以某种有限的方式使用它们，所以我提出了以下解决方案，我想知道：**这是最好的方法吗，可以改进吗?** （在我去我的应用程序中实现它之前！）

显然，事务是通过应用程序控制的（在我的例子中，是一个 Python Web 应用程序）。对于此事务中的每个文档（在任何集合中），添加以下字段：

```
'lock_status': bool (true = locked, false = unlocked),
'data_old': dict (of any old values - current values really - that are being changed),
'data_new': dict (of values replacing the old (current) values - should be an identical list to data_old),
'change_complete': bool (true = the update to this specific document has occurred and was successful),
'transaction_id': ObjectId of the parent transaction 
```

此外，还有一个`transaction`集合，其中存储详细说明正在进行的每个事务的文档。他们看起来像：

```
{
    '_id': ObjectId,
    'date_added': datetime,
    'status': bool (true = all changes successful, false = in progress),
    'collections': array of collection names involved in the transaction
} 
```

这是该过程的逻辑。希望它以这样一种方式工作，即如果它被中断或以其他方式失败，它可以正确回滚。

**1：**设置`transaction`文档

**2：**对于受此事务影响的每个文档：

*   设置`lock_status`为`true`（“锁定”文档不被修改）
*   设置它们的旧值`data_old`和`data_new`新值
*   设置`change_complete`为`false`
*   设置为我们刚刚制作`transaction_id`的文档的ObjectId`transaction`

**3：**执行更新。对于每个受影响的文档：

*   将该文档中的任何受影响的字段替换为`data_new`值
*   设置`change_complete`为`true`

**4：**将`transaction`文档设置`status`为`true`（因为所有数据都已成功修改）

**5：**对于受交易影响的每个文档，做一些清理：

*   删除`data_old`and `data_new`，因为它们不再需要
*   设置`lock_status`为`false`（解锁文档）

**6：**删除`transaction`步骤1中设置的文档（或按照建议，将其标记为完成）

* * *

我认为这在逻辑上是这样工作的，如果它在任何时候失败，所有数据都可以回滚或者可以继续事务（取决于你想要做什么）。显然所有回滚/恢复/等。由应用程序而不是数据库执行，通过使用`transaction`具有该 transaction_id 的其他集合中的文档和文档。

**我错过或忽略了这个逻辑中的任何明显错误吗？有没有更有效的方法（例如，减少数据库的写入/读取）？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T11:41:39.380

作为通用响应，MongoDB 上的多文档提交可以作为两阶段提交执行，这在手册中已经有一些广泛的记录（参见：[http ://docs.mongodb.org/manual/tutorial/perform-two-phase-提交/](http://docs.mongodb.org/manual/tutorial/perform-two-phase-commits/)）。

手册建议的模式简要如下：

*   设置一个单独的`transactions`集合，包括*目标文档*、*源文档*、*价值*和*状态*（交易的）
*   创建新的交易对象`initial`作为`state`
*   开始进行交易并更新`state`到`pending`
*   将事务应用于两个文档（目标、源）
*   将交易状态更新为`committed`
*   使用find判断文档是否反映事务状态，如果ok，更新事务状态为`done`

此外：

*   您需要手动处理故障情况（如下所述未发生某些事情）
*   您需要手动实现回滚，基本上是通过引入名称`state`值`canceling`

您的实施的一些具体说明：

*   我不鼓励您将`lock_status`, `data_old`,之类的字段添加`data_new`到源/目标文档中。这些应该是交易的属性，而不是文件本身。
*   为了概括目标/源文档的概念，我认为您可以使用`DBref`s：[http ://www.mongodb.org/display/DOCS/Database+References](http://www.mongodb.org/display/DOCS/Database+References)
*   我不喜欢在完成后删除交易文件的想法。将状态设置为`done`似乎是一个更好的主意，因为这允许您稍后调试并找出已执行的事务类型。我很确定您也不会用完磁盘空间（为此也有解决方案）。
*   在您的模型中，您如何保证一切都按预期进行了更改？您是否以某种方式检查更改？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-07-02T10:30:08.993

[MongoDB 4.0](https://www.mongodb.com/transactions)增加了对多文档 ACID 事务的支持。

**Java 示例：**

```
try (ClientSession clientSession = client.startSession()) {
   clientSession.startTransaction();
   collection.insertOne(clientSession, docOne);
   collection.insertOne(clientSession, docTwo);
   clientSession.commitTransaction();
} 
```

注意，它适用于副本集。您仍然可以拥有一个具有一个节点的副本集并在本地计算机上运行它。

*   [https://stackoverflow.com/a/51396785/4587961](https://stackoverflow.com/a/51396785/4587961)
*   [https://docs.mongodb.com/manual/tutorial/deploy-replica-set-for-testing/](https://docs.mongodb.com/manual/tutorial/deploy-replica-set-for-testing/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-25T16:09:09.793

MongoDB 4.0 正在添加（多集合）多文档事务：[链接](https://www.mongodb.com/transactions)

# emacs - 如何评估存储在 emacs 寄存器中的 elisp？

> ID：12493583
> 
> 赞同：1
> 
> 时间：2012-09-19T11:13:45.283
> 
> 标签：emacs, elisp

这样做的动机如下：我有各种文件绑定到寄存器。这允许我通过运行跳转到我的 xmonad 配置`C-x r j H`或我的 .emacs 文件`C-x r j E`。

我希望能够跳到我的`run-haskell`缓冲区`C-x r j H`。但是，运行`C-x r j`会运行该`jump-to-register`功能，所以我不能只是 bind `C-x r j H`，afaik。

对我来说似乎最简单的解决方法是评估存储在寄存器中的 elisp，因此存储`(run-haskell)`在寄存器中`H`。

但是似乎没有内置用于评估寄存器中的 elisp，这让我觉得我正在错误地解决问题。

我怎么解决这个问题？我知道这可能属于超级用户风格问题的范围，但我在这里发布是因为我认为解决方案在于编写 elisp。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:49:41.240

`jump-to-register`不直接支持这个，但你可以很容易地扩展它：

```
(defadvice jump-to-register (around jump-to-buffer-maybe
                                     (register &optional delete)
                                     activate compile)
  (let ((r (get-register register)))
    (if (bufferp r)
        (switch-to-buffer r)
      ad-do-it) )) 
```

为了使它起作用，您选择的寄存器需要包含一个缓冲区对象。为方便起见，您可能还想定义一个将缓冲区对象放入寄存器的函数：

```
(defun buffer-to-register (buf reg)
  (interactive "bBuffer: \ncRegister: ")
  (set-register reg (get-buffer buf)) ) 
```

如果你真的想`eval`注册而不是`switch-to-buffer`，修改应该是微不足道的。我不清楚如何准确地设置合理的保护措施以不执行任何随机文本，但如果你限制自己使用交互式命令，它甚至不应该太不安全。

# algorithm - Given an array of integers, find the LARGEST number using the digits of the array such that it is divisible by 3

> ID：12493591
> 
> 赞同：13
> 
> 时间：2012-09-19T11:14:01.780
> 
> 标签：algorithm, dynamic-programming, greedy

E.g.: Array: 4,3,0,1,5 {Assume all digits are >=0\. Also each element in array correspond to a digit. i.e. each element on the array is between 0 and 9\. }

In the above array, the largest number is: 5430 {using digits 5, 4, 3 and 0 from the array}

My Approach:

For divisibility by 3, we need the sum of digits to be divisible by 3. So,

1.  Step-1: Remove all the zeroes from the array.
2.  Step-2: These zeroes will come at the end. {Since they dont affect the sum and we have to find the largest number}
3.  Step-3: Find the subset of the elements of array (excluding zeroes) such that the number of digits is MAXIMUM and also that the sum of digits is MAXIMUM and the sum is divisible by 3.
4.  STEP-4: The required digit consists of the digits in the above found set in decreasing order.

So, the main step is STEP-3 i.e. *How to find the subset such that it contains MAXIMUM possible number of elements such that their sum is MAX and is divisible by 3* .

I was thinking, maybe Step-3 could be done by GREEDY CHOICE of taking all the elements and keep on removing the smallest element in the set till the sum is divisible by 3.

But i am not convinced that this GREEDY choice will work.

Please tell if my approach is correct. If it is, then please suggest as to how to do Step-3 ?

Also, please suggest any other possible/efficient algorithm.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-19T11:24:55.987

**Observation:** If you can get a number that is divisible by 3, you need to remove at most 2 numbers, to maintain optimal solution.

A simple `O(n^2)` solution will be to check all possibilities to remove 1 number, and if none is valid, check all pairs (There are `O(n^2)` of those).

* * *

**EDIT:**
`O(n)` solution: Create 3 buckets - `bucket1`, `bucket2`, `bucket0`. Each will denote the modulus 3 value of the numbers. Ignore `bucket0` in the next algorithm.

Let the sum of the array be `sum`.

```
If sum % 3 ==0: we are done.
else if sum % 3 == 1:
  if there is a number in bucket1 - chose the minimal
  else: take 2 minimals from bucket 2
else if sum % 3 == 2
  if there is a number in bucket2 - chose the minimal
  else: take 2 minimals from bucket1 
```

Note: You don't actually need the bucket, to achieve `O(1)` space - you need only the 2 minimal values from `bucket1` and `bucket2`, since it is the only number we actually used from these buckets.

**Example:**

```
arr = { 3, 4, 0, 1, 5 }
bucket0 = {3,0} ; bucket1 = {4,1} bucket2 = { 5 }
sum = 13 ; sum %3 = 1
bucket1 is not empty - chose minimal from it (1), and remove it from the array.
result array = { 3, 4, 0, 5 } 
proceed to STEP 4 "as planned" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T11:31:08.763

Greedy choice definitely doesn't work: consider the set `{5, 2, 1}`. You'd remove the `1` first, but you should remove the `2`.

I think you should work out the sum of the array modulo 3, which is either 0 (you're finished), or 1, or 2\. Then you're looking to remove the minimal subset whose sum modulo 3 is 1 or 2.

I think that's fairly straightforward, so no real need for dynamic programming. Do it by removing one number with that modulus if possible, otherwise do it by removing two numbers with the other modulus. Once you know how many to remove, choose the smallest possible. You'll never need to remove three numbers.

You don't need to treat `0` specially, although if you're going to do that then you can further reduce the set under consideration in step 3 if you temporarily remove all 0, 3, 6, 9 from it.

Putting it all together, I would probably:

*   Sort the digits, descending.
*   Calculate the modulus. If 0, we're finished.
*   Try to remove a digit with that modulus, starting from the end. If successful, we're finished.
*   Remove two digits with negative-that-modulus, starting from the end. This always succeeds, so we're finished.
*   We might be left with an empty array (e.g. if the input is `1, 1`), in which case the problem was impossible. Otherwise, the array contains the digits of our result.

Time complexity is `O(n)` provided that you do a counting sort in step 1\. Which you certainly can since the values are digits.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T11:41:32.510

What do you think about this:

first sort an array elements by value

```
sum up all numbers
- if sum's remainder after division by 3 is equal to 0, just return the sorted
  array
- otherwise
    - if sum of remainders after division by 3 of all the numbers is smaller
      than the remainder of their sum, there is no solution
    - otherwise
        - if it's equal to 1, try to return the smallest number with remainder
          equal to 1, or if no such, try two smallest with remainder equal to 2,
          if no such two (I suppose it can happen), there's no solution
        - if it's equal to 2, try to return the smallest number with remainder
          equal to 2, or if no such, try two smallest with remainder equal to 1,
          if no such two, there's no solution 
```

first sort an array elements by remainder of division by 3 ascending then each subset of equal remainder sort by value descending

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T12:03:26.423

First, this problem reduces to maximizing the number of elements selected such that their sum is divisible by 3.

Trivial: Select all numbers divisible by 3 (0,3,6,9).

Le a be the elements that leave 1 as remainder, b be the elements that leave 2 as remainder. If (|a|-|b|)%3 is 0, then select all elements from both a and b. If (|a|-|b|)%3 is 1, select all elements from b, and |a|-1 highest numbers from a. If the remainder is 2, then select all numbers from a, and |b|-1 highest numbers from b.

Once you have all the numbers, sort them in reverse order and concatenate. that is your answer.

Ultimately if n is the number of elements this algorithm returns a number that is al least n-1 digits long (except corner cases. see below).

NOTE: Take care of corner cases(i.e. what is |a|=0 or |b|=0 etc). (-1)%3 = 2 and (-2)%3 = 1 .

If m is the size of alphabet, and n is the number of elements, this my algorithm is O(m+n)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-08T23:09:15.097

Sorting the data is unnecessary, since there are only ten different values. Just count the number of zeroes, ones, twos etc. in O (n) if n digits are given. Calculate the sum of all digits, check whether the remainder modulo 3 is 0, 1 or 2\.

If the remainder is 1: Remove the first of the following which is possible (one of these is guaranteed to be possible): 1, 4, 7, 2+2, 2+5, 5+5, 2+8, 5+8, 8+8\.

If the remainder is 2: Remove the first of the following which is possible (one of these is guaranteed to be possible): 2, 5, 8, 1+1, 1+4, 4+4, 1+7, 4+7, 7+7\.

If there are no digits left then the problem cannot be solved. Otherwise, the solution is created by concatenating 9's, 8's, 7's, and so on as many as are remaining.

(Sorting n digits would take O (n log n). Unless of course you sort by counting how often each digit occurs and generating the sorted result according to these numbers).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-30T08:18:03.250

Amit's answer has a tiny thing missing.

If bucket1 is not empty but it has a humongous value, lets say 79 and 97 and b2 is not empty as well and its 2 minimals are, say 2 and 5\. Then in this case, when the modulus of the sum of all digits is 1, we should choose to remove 2 and 5 from bucket 2 instead of the minimal in bucket 1 to get the largest concatenated number.

Test case : 8 2 3 5 78 79

If we follow Amits and Steve's suggested method, largest number would be 878532 whereas the largest number possible divisble by 3 in this array is 879783

Solution would be to compare the appropriate bucket's smallest minimal with the concatenation of both the minimals of the other bucket and eliminate the smaller one.

# api - LinkedIn Throttling 如何计算我的通话数量？

> ID：12493598
> 
> 赞同：2
> 
> 时间：2012-09-19T11:14:29.040
> 
> 标签：api, rest, linkedin, throttling

我一直在我的应用程序中使用 LinkedIn API，我注意到 LinkedIn 仪表板中配置文件请求的调用次数明显高于我正在进行的调用量（大约是我一直在做的调用量的 10 倍） .

我正在使用批量调用和字段选择器。

其他人有过这样的经历吗？知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:56:47.093

从[油门限制文档](http://developer.linkedin.com/documents/throttle-limits)：

> 注意：批量请求会受到限制，就像您发出多个单独的请求一样，因此它们提供了效率，而不是额外的信息。

因此，您的批量请求的每一部分都算作一个请求。

但是如果不知道你*到底*在做什么，就没有机会说这是否真的是你经历的原因。

# android - 如何更改vmlite android的屏幕大小？

> ID：12493599
> 
> 赞同：0
> 
> 时间：2012-09-19T11:14:29.307
> 
> 标签：android, vmlite

我安装了[vmlite 的 android 映像](http://www.vmlite.com/index.php?option=com_content&view=article&id=69&Itemid=178)，它很棒，但有一件事我没有找到解决方案：如何更改屏幕尺寸？

它具有屏幕宽度/高度的固定比例，但我需要更改它以模拟一些 android 手机。

我搜索了很多但没有找到解决方案，请帮助。

* * *

**更新**

grub 菜单如下：

1.  命令行 (hd0,2)/命令行
2.  内核 --use-cmd-line (hd0,2)/内核
3.  初始化 (hd0,2)/ramdisk

我已经使用这个命令添加了一个自定义大小：

```
VBoxManage.exe setextradata "android-vmlite" "CustomVideoMode1" "480x800x32" 
```

然后添加`vga-ask`到所有 3 个菜单选项，但没有一个有效。

当按下`b`它们时，它不会要求选择模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:37:26.530

好的，我做了一些研究，终于能够编辑虚拟盒子图像。就是这样：

如果您在启动时查看 vmlite 映像的 grub 条目，内核条目（带有“kernel”关键字的条目）有一个参数`--use-cmd-line`，这`cmdline`是在第一个条目中定义的`cmdline (hd0,2)/cmdline`，这是一个`cmdline`位于引导硬盘第三分区内的文件。

该文件具有内核选项：

```
init=/init qemu=1 console=ttyS0 console=tty0 vga=788 verbose androidboot.hardware=vbox_x86 androidboot.console=ttyS0 android.qemud=ttyS1 
```

现在您必须编辑这个名为 cmdline 的文件以将`vga=788`选项更改为`vga=ask`.

**编辑：（在 Linux 机器上）**

您需要安装`vdfuse`.

> `sudo apt-get install virtualbox-fuse`

在某处创建两个空文件夹。

> `sudo mkdir /mnt/image`
> 
> `sudo mkdir /mnt/partition`

然后将虚拟盒映像（vdi、vmdk 或 vhd 等）安装到文件夹。（假设 virtualbox 磁盘映像文件是`/tmp/vmlite.vmdk`，我们将其挂载到`/mnt/image`文件夹）

> `vdfuse -w -f /tmp/vmlite.vmdk /mnt/image`

将在名为*EntireDisk*、*Partition1*、*Partition2*、*Partition3*等的挂载文件夹中创建一些文件。

由于我们对第三个分区感兴趣，我们将相应的文件挂载到`/mnt/partition`：

> `sudo mount -o loop /mnt/image/Partition3 /mnt/partition`

见内容：

> `sudo ls -l /mnt/partition`

会有 cmdline、ramdisk 和内核。

现在我们编辑 cmdline 文件（我们将使用 gedit 文本编辑器，你可以使用你喜欢的一个）：

> `sudo gedit /mnt/partiton/cmdline`

进行编辑，更改`vga=788`为`vga=ask`，保存并关闭。验证新文件内容：

> `sudo cat /mnt/partition/cmdline`

卸载文件和图像：

> `sudo umount /mnt/partition`
> 
> `sudo umount /mnt/image`

如果我们不需要这两个文件夹：

> `sudo rm /mnt/image`
> 
> `sudo rm /mnt/partition`

完成，从虚拟机启动映像。它会说按 ENTER 查看可用的视频模式，在 Enter 时显示一个列表，键入选择的数字，或键入“扫描”以搜索更多显示模式。

**注意：**并非所有模式都有效，请使用颜色深度为 24 或 32 并支持纵横比的 VESA 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T00:13:16.123

请参考这个线程：

[http://forum.xda-developers.com/showthread.php?p=19785371](http://forum.xda-developers.com/showthread.php?p=19785371)

您可以在 (hd0,2) 内部更改此文件 cmdline

init=/init qemu=1 控制台=ttyS0 控制台=tty0 vga=788 详细 androidboot.hardware=vbox_x86 androidboot.console=ttyS0 android.qemud=ttyS1

==>

init=/init qemu=1 控制台=ttyS0 控制台=tty0 vga=询问详细 androidboot.hardware=vbox_x86 androidboot.console=ttyS0 android.qemud=ttyS1

感谢僚机的详细指导。

另一种选择是将 vmdk 文件附加到正在运行的 linux vm（如果有的话），磁盘将自动挂载以使生活更简单。

# php - How to define a PHP class for handling MySQL's "foreign key constraint" exception?

> ID：12493608
> 
> 赞同：1
> 
> 时间：2012-09-19T11:14:54.593
> 
> 标签：php, mysql, foreign-keys

I'm rather new to PHP, and I want to:

1.  define a class in the main directory of my web application and use it in sub-directories.
2.  the class receives MySQL delete statements, executes them and catches foreign key constraint exception.

This is the class so far:

```
class MySQLErrorHandling
    {
        public function query($query_string)
            {
                try 
                   {
                      $conn = mysql_query($query_string);

                      if (!$conn) 
                      throw new Exception("mysql Error:");
                   } 
                catch(Exception $e) 
                   {
                      echo $e->getMessage(). mysql_error();
                   }
            }
    } 
```

Any suggestions? Appreciated.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-19T11:21:22.437

我建议不要捕获外键约束异常，而是使用`ON DELETE CASCADE`. 数据库将负责正确删除项目。查看[文档](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html) 。

# trigger.io - Porting static html/javascript site to iPad using trigger.io

> ID：12493609
> 
> 赞同：0
> 
> 时间：2012-09-19T11:14:55.157
> 
> 标签：trigger.io

Im currently in the process of porting a completely static site using trigger io to convert it to an app. The site comprises of lots of folders in folders with index.html files in them to make the urls nice. The site uses absolute urls to include stylesheets, javascripts, on a tags, and images in every page.

I would like to set a root directory for trigger.io, but I cannot find any way of doing this. Is this even possible?

Cheers,

Rich

Edit:

Example:

```
<script src="/json.js" type="text/javascript"></script>
<img alt="Bar_hat" class="bar_hat" src="/assets/bar_hat-09efbabebef04dd368425a6b71badfa7.jpg" /> 
```

The script tag is in all of the files.

The img tag is used in 90% of the files. These are obviously not being found from within the app.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:43:36.170

将您的“assets”目录复制到“src”目录并在资产前使用不带“斜杠”的 -

```
<img alt="Bar_hat" class="bar_hat" src="assets/bar_hat-09efbabebef04dd368425a6b71badfa7.jpg" /> 
```

此外，如果您想通过 javascript 访问，则必须使用此模式：

```
forge.file.getUrl("assets/bar_hat-09efbabebef04dd368425a6b71badfa7.jpg", 
   function(file) {
      //  If using zepto or jquery
      $("#whateverImage").attr("src", file);
   }, 
   function(err) {
     // error
   }
); 
```

编辑：getUrl 与 getLocal

# css - How to set up overflow in twitter bootstrap dropdown list with submenus?

> ID：12493613
> 
> 赞同：5
> 
> 时间：2012-09-19T11:15:04.530
> 
> 标签：css, drop-down-menu, twitter-bootstrap, overflow

I have a problem with css overflow property for twitter bootstrap dropdown component with submenus.

When setting max-height and overflow to auto the scrollbar appears in the list as it should, but submenus go inside the drop down list under horizontal scroll, which is not what I need.

Here is the example of this issue.

[http://jsfiddle.net/ftMhv/1/](http://jsfiddle.net/ftMhv/1/)

I've tried changing values overflow-x and overflow-y, but none of them worked well.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:16:13.657

在您描述的问题中使用溢出时，它将隐藏其中的所有子项。不幸的是，真的没有办法解决它。

为什么需要滚动导航下拉菜单？是不是因为太长了？

如果是这种情况，我建议尝试采用柱状方法。Have`<div>`在`<li>`that have 中`float: left;`，然后在其中放置子菜单。

对不起，但我认为这是您问题的唯一答案。

编辑：您可以使用 javascript 和 jquery 创建一个浮动的绝对定位容器，该容器显示在用户鼠标的坐标处。不过，这可能会变得非常棘手和复杂。

# android - Android - 使用 AsycTaskLoader 和 MySql 填充列表

> ID：12493617
> 
> 赞同：0
> 
> 时间：2012-09-19T11:15:15.700
> 
> 标签：android, mysql, android-listview, android-asynctask, android-loadermanager

我想用从 MySql 数据库加载的某些对象填充 ListFragment。

它必须从我的 ResultSet 中加载前 10 个“对象”。我想为此使用 AsyncTaskLoader 并在每次从数据库中检索加载的对象时将其放入 ListItem 中。

有人可以帮我解决这个问题吗？尝试搜索好的示例或教程，但我还没有真正找到真正有用的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:37:00.610

在 preexecute 方法中使用新列表创建适配器。将该适配器设置为您的列表视图。

然后在 doInBackground 中读取您的数据库，创建适合您列表的对象，但不要添加它们。将每个对象作为您的 publishprogress 方法的参数传递。

在 onProgressUpdate 中，将您的对象添加到列表中，并通知您的适配器数据集已更改。

下面是我如何阅读 Twitter 电话的示例。

```
private class parseTwitterTask extends AsyncTask<Void, TCListObject2, List<TCListObject2>> {
    TCListObjectAdapter2 adapter;
    List<TCListObject2> list;

    @Override
    protected void onPreExecute() {
        list = new ArrayList<TCListObject2>();
        ListView lv = (ListView)findViewById(R.id.twitterlist);
        adapter = new TCListObjectAdapter2(list);
        lv.setAdapter(adapter);
        super.onPreExecute();
    }

    @Override
    protected List<TCListObject2> doInBackground(Void... params) {
        try {
            String url = social.get("twittersearchurl");//"http://search.twitter.com/search.json?q=" + social.get("twitter");
            String json = Internet.request(url, null);
            JSONObject jo = new JSONObject(json);
            if(jo.has("results")) {                 
                JSONArray ar = jo.getJSONArray("results");
                for(int i = 0; i < ar.length(); i++) {
                    TCListObject2 tweet = new TCListObject2();
                    JSONObject jobj = (JSONObject) ar.get(i);
                    tweet.id = "false";
                    tweet.img = jobj.getString("profile_image_url");

                    String text = jobj.getString("text");
                    text = Html.fromHtml(text).toString();
                    tweet.params.put(R.id.sub2, text);

                    String name = jobj.getString("from_user");
                    name = Html.fromHtml(name).toString();
                    tweet.params.put(R.id.text, name);

                    String time = jobj.getString("created_at");
                    tweet.params.put(R.id.sub1, Converter.timeToTimeAgo(time));

                    try {
                        tweet.time = new Date(time);
                    } catch(Exception e) {
                        e.printStackTrace();
                    }

                    tweet.celLayout = R.layout.cell_tweetobject;
                    publishProgress(tweet);
                }
            }
        } catch(Exception e) {
            e.printStackTrace();
        }

        return list;
    }

    @Override
    protected void onProgressUpdate(TCListObject2... values) {
        list.add(values[0]);
        adapter.notifyDataSetChanged();
        super.onProgressUpdate(values);
    } 
```

# mysql - 大型mysql数据库计数不同的性能

> ID：12493621
> 
> 赞同：0
> 
> 时间：2012-09-19T11:15:29.057
> 
> 标签：mysql, count, distinct

我有一个大问题。我有一个大约 50M 行的表。在这张表中，我有 3 列：位置、人员代码和日期。它看起来像这样：

```
date         person    location

2012-04-07   837592      0
2012-04-08   892857      6
2012-04-06   726474      1
2012-04-03   204857      4
2012-04-08   516485      9
2012-04-07   405867      0 
```

因此，一个人可以在同一日期在不同地点，也可以在不同日期在同一地点。

现在，我的问题是我需要这样的查询：

`SELECT COUNT (DISTINCT person) FROM my_table WHERE location = '0';`

所以基本上我必须计算在不同时间在一个地方的不同人。如果我以前面描述的方式执行此操作，则查询大约需要 20 分钟。

所以我问是否有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:21:19.283

尝试这个 ：：

```
SELECT person, COUNT (*) FROM my_table WHERE location = '0' group by person; 
```

这将提高性能，接下来您可以对使用的列进行索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:22:41.537

像这样试试

```
SELECT COUNT (*) FROM my_table WHERE location = '0' GROUP BY person; 
```

# jquery - 如何阻止 Jquery ajaxForm() 刷新页面？

> ID：12493622
> 
> 赞同：1
> 
> 时间：2012-09-19T11:15:40.193
> 
> 标签：jquery, ajaxform

我有一个表单，我在没有使用 .ajax() 刷新页面的情况下成功提交了一个表单，但是我修改了我的表单以包含一个上传字段并且它没有上传。所以我尝试使用有效的 ajaxForm() 方法，即它发布和上传但它刷新页面。如何阻止它刷新页面？

我试图把一个 return false 并且它完全停止提交工作。

这是我到目前为止所拥有的

```
 var options = {
            target:     '#post',
            url:        '<?php echo $linkr; ?>',
            success:    function() {
                $("#post").load("<?php echo $linkr; ?>");
            }
        };
        $("form").submit(function () { 
        $(this).ajaxForm(options); 
        return false;
        }); 
```

此代码进入一个空白页面，但它发布和上传：

```
 var options = {
                target:     '#post',
                url:        '<?php echo $linkr; ?>',
                success:    function(result) {
                    $("#post").html(result);
                }
            };
            $("form").ajaxForm(options); 
```

重申一下，我需要它在不刷新页面的情况下发布和上传。使用 .ajax() 可以完成此操作，但不会上传。放置 preventDefault 不起作用，或者我使用错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:17:43.843

利用[`preventDefault()`](http://api.jquery.com/event.preventDefault/)

```
$("form").submit(function (e) { 
    e.preventDefault();
    $(this).ajaxForm(options); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:05:45.143

基本上你的问题是浏览器并不真正支持在不重新加载页面的情况下正常上传文件。不过可以使用 HTML5 或 flash。

您可以阅读本教程以了解如何使用 HTML5 实现 ajax 文件上传 [http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)

[或者你可以使用像http://www.uploadify.com/](http://www.uploadify.com/)这样的插件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:19:00.730

尝试这样的事情然后让我知道-

```
 var options = {
        target:     '#post',
        url:        '<?php echo $linkr; ?>',
        success:    function(result) {
            $("#post").html(result);
        }
    }; 
```

# uitableview - 在 iOS5 中更改选定 UITableViewCells 的背景颜色

> ID：12493623
> 
> 赞同：0
> 
> 时间：2012-09-19T11:15:56.107
> 
> 标签：uitableview, background, background-color, ios5.1, uiappearance

我的应用程序在不同的屏幕中显示分组的静态 UITableView。无论如何使用外观代理

```
[UITableView appearance] 
```

或者

```
[UITableViewCell appearance] 
```

自定义选定单元格的背景颜色？基本上我需要修改

```
cell.selectedBackgroundView.backgroundColor 
```

对于我的应用程序中的每个单元格，但我找不到要在代理对象中设置的正确属性。

顺便说一句，我也尝试过正常的方法（作为一个组静态表）：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {

    cell.selectedBackgroundView.backgroundColor = [UIColor yellowColor];

} 
```

但它不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T18:01:53.607

您需要为 selectedBackgroundView 提供一个视图。那里已经没有了。尝试：

```
cell.selectedBackgroundView = [[UIView alloc] initWithFrame:cell.bounds] ;
cell.selectedBackgroundView.backgroundColor = [UIColor yellowColor] ; 
```

此外，放置此代码（至少第一行）的更好位置是在`-tableView:cellForRowAtIndexPath:`创建单元格时。否则，每次显示单元格时，您都将创建一个新的背景视图。

# android - 在 Android 中使用电容式按钮

> ID：12493624
> 
> 赞同：0
> 
> 时间：2012-09-19T11:16:03.400
> 
> 标签：android

我很好奇是否有任何库可以与三星手机的电容按钮一起使用？我的意思是当事件发生时点亮它们，或者使它们闪烁，诸如此类的东西......

谢谢，rohitkg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:33:29.087

Android SDK 中对此没有任何内容，因为没有假设存在此类按钮、具有背光等。欢迎您联系设备制造商，以查看他们是否有针对特定设备执行此操作的文档化和受支持的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:11:29.757

[这是我从samsung-moment-notifications](http://code.google.com/p/samsung-moment-notifications/source/browse/trunk/MomentNotificationLight/src/com/geniusdog/monotlights/NotificationLights.java)中获取的代码片段。

```
Process process = null;
DataOutputStream os = null;
try {
    // get root 
    process = Runtime.getRuntime().exec("su");
    os = new DataOutputStream(process.getOutputStream());
    // write the command
    os.writeBytes("echo 100 > /sys/class/leds/button-backlight/brightness\n");
    os.writeBytes("exit\n");
    // clear the buffer
    os.flush();
    Toast.makeText(NotificationLights.this, "Lights are on", Toast.LENGTH_SHORT).show();
    // wait for complete
    process.waitFor();

     // won't catch an error with root, but it has to have an exception catcher to execute
 } catch (Exception e) {
     Toast.makeText(NotificationLights.this, "Couldn't get SU, are you rooted?", Toast.LENGTH_SHORT).show();
       return;
 } 
```

1-您必须有一个根设备。

2-您必须知道为每个设备打开/关闭灯的脚本的位置。

`/sys/class/leds/button-backlight/brightness`特定于*三星时刻*。

如果您要在另一台设备上尝试它，它将无法正常工作。

# python - ImportError：没有名为 elementtree.SimpleXMLWriter 的模块

> ID：12493629
> 
> 赞同：4
> 
> 时间：2012-09-19T11:16:16.730
> 
> 标签：python, xml, elementtree, xmlwriter

在我的 python 代码中，我试图以 XML 格式显示输出。为此，我使用`XMLwriter`.

但它显示错误：

```
Traceback (most recent call last):
  File "C:\Users\Ponmani\Desktop\test.cgi", line 8, in <module>
    from elementtree.SimpleXMLWriter import XMLWriter
ImportError: No module named elementtree.SimpleXMLWriter 
```

导致错误的行是：

```
from elementtree.SimpleXMLWriter import XMLWriter 
```

我的整个python代码是：

```
import os
import cgi
import MySQLdb
import cgitb
from xml.etree.ElementTree import ElementTree
from elementtree.SimpleXMLWriter import XMLWriter
import sys
import SecureDb
cgitb.enable()
print "Content-type: text/xml\n\n";
root=xml.start("root")
conn= MySQLdb.connect(host = SecureDb.host ,user =SecureDb.user ,passwd=SecureDb.password ,db=SecureDb.database)
cursor=conn.cursor()
xml=XMLWriter(sys.stdout)
cursor.execute("select * from register where Name='Subburaj'")
result=cursor.fetchall()
if(result!=()):    
    for colns in result:
         xml.start("Group")
         xml.element("Name","%s" %(colns[0]))
         xml.element("Mail","%s" %(colns[1]))
print result
xml.end()
xml.close(root)
conn.commit()
cursor.close()
conn.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:39:08.297

`ElementTree`Python 2.5 及更高版本附带的模块*不*包括该`SimpleXMLWriter`模块；后者与其他功能完全分开`ElementTree`。

为了生成 XML，我个人使用模板语言，例如[Chameleon](http://chameleon.repoze.org/)。您还可以使用 ElementTree API 本身构建树并简单地调用`.write()`结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:36:43.023

我不是 XML 的向导，但是，看起来您要么需要安装[elementtree](http://pypi.python.org/pypi/elementtree/)（显然 SimpleXMLWriter[不包含在 python2.5 中](http://mail.python.org/pipermail/python-dev/2006-August/068128.html)......也许它从未被拉入标准库），或者使用这些设施在标准库中。

对我来说，它看起来像：

```
import xml.etree.ElementTree as ET
root = ET.Element('root')
#...

for colns in result:
     new_group = ET.SubElement(root,"Group")
     new_elem = ET.SubElement(new_group,"Name")
     new_elem.text = "%s" %(colns[0])
     #I suppose that:
     #ET.SubElement(new_group,"Name").text = str(colns[0])
     #would work too ...
     new_elem = ET.SubElement(new_group,"Mail")
     new_elem.text = "%s" %(colns[0]) 
```

然后，您可以使用`root.write()`.

[参考1](http://docs.python.org/library/xml.etree.elementtree.html#building-xml-documents)

[参考文献2](https://pythonadventures.wordpress.com/tag/simplexmlwriter/)

# javascript - 查找一个选择并添加一个类到它的孩子

> ID：12493633
> 
> 赞同：0
> 
> 时间：2012-09-19T11:16:27.473
> 
> 标签：javascript, jquery, html, jquery-ui

我正在开发一个 Rails 应用程序，我需要动态更改 Select 的列表。我必须通过 JavaScript 为每个孩子添加一个类标签来做到这一点。

问题是，我似乎无法找到 Select 的正确 ID。

选择是用红宝石制作的，在浏览器中它的信息是这样的。

**HTML 中的选择**

```
<select id="relat[rond_cat_tipus][]_all" name="relat[rond_cat_tipus][]_all" size="8" multiple="multiple"> 
```

**Javascript是这个**

```
$(document).ready(function() {
    var list = $('select#relat[rond_cat_tipus][]_all').children();

    for (var index = 0;index < list.length; index++){
        if(list[index].html.indexOf("C-") > -1){
            list[index].addClass("atu_si");
        }else{
            list[index].addClass("atu_no");
        }
    }

    $(".relat_atu").on("change", function(){
        if($(this).hasClass("relat_atu_yes")){
            $(".atu_si").show();
            $(".atu_no").hide();
        }else{
            $(".atu_si").hide();
            $(".atu_no").show();
        }
    });
}); 
```

关于如何解决这个问题的任何提示？

**编辑**

非常感谢您的所有回答。多亏了你，我终于想出了解决方案。

如果有人遇到同样的问题，我会发布它。

```
jQuery(function(){
    jQuery("select#relat\\[rond_cat_tipus\\]\\[\\]_all").children().each(function(){
        if(jQuery(this).html().indexOf("C-") > -1){
            jQuery(this).addClass("atu_no");
        }else{
            jQuery(this).addClass("atu_si");
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:28:55.957

```
jQuery(function(){
        jQuery("select[name]").each(function(){
            if(jQuery(this).attr("name").indexOf("relat[rond_cat_tipus][]_all")>-1){
                jQuery("*", this).addClass("class-added");
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:19:30.190

尝试这个：

```
var list = $('select#relat\\[rond_cat_tipus\\]\\[\\]_all').children(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:22:50.670

@Wiggin 这将起作用：

```
var list = $('select[name="relat[rond_cat_tipus][]_all"]').children(); 
```

更新：

```
$('select[name="relat[rond_cat_tipus][]_all"]').each(function(){
    var list = $(this).children();
    ...
}); 
```

# javascript - 通过 Jquery AJAX 将 CSV 文件中的值解析为 JSON

> ID：12493635
> 
> 赞同：-1
> 
> 时间：2012-09-19T11:16:32.033
> 
> 标签：javascript, jquery, json, csv

我正在尝试从 Yahoo's Finance API 获取 JSON 数据。

```
$.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.quotes%20WHERE%20symbol%3D%27WRC%27&format=json&diagnostics=true&env=store://datatables.org/alltableswithkeys&callback", function(data) {
// I am parsing JSON string using data here 
}); 
```

问题是当股票收盘时，我需要显示最后交易值。我找到了一个将值作为 CSV 文件返回的链接。所以我需要下载它并用jQuery解析它。

这是我到目前为止所做的：

```
$.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.quotes%20WHERE%20symbol%3D%27WRC%27&format=json&diagnostics=true&env=store://datatables.org/alltableswithkeys&callback", function(data) {

if(data.query.results.quote.DaysLow == null && data.query.results.quote.DaysHigh == null){

    //When stock is closed this section works
    var date = data.query.results.quote.LastTradeDate;
    var datesplit = date.split('/');

        $.ajax({
        type: "GET",
        url: "http://ichart.finance.yahoo.com/table.csv?s=WRC&a="+ datesplit[1] +"&b="+ datesplit[0] + "&c="+ datesplit[2] +"&d="+ datesplit[1] +"&e="+ datesplit[0] +"&f="+ datesplit[2] +"&g=d&ignore=.csv",
        dataType: "text",
        success: function(data) { 
            console.log(data);
        }
        });
}
else{
  //When stock is not closed this section works
  //There is no problem in this section

}       
}); 
```

这是我收到的错误消息：

> XMLHttpRequest 无法加载 [http://ichart.finance.yahoo.com/table.csv?s=WRC&a=18&b=9&c=2012&d=18&e=9&f=2012&g=d&ignore=.csv](http://ichart.finance.yahoo.com/table.csv?s=WRC&a=18&b=9&c=2012&d=18&e=9&f=2012&g=d&ignore=.csv)。Access-Control-Allow-Origin 不允许 Origin null。

你能帮我下载CSV文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:21:57.553

我认为不需要 ajax 你可以简单地称之为

```
 document.location.href = "http://ichart.finance.yahoo.com/table.csv?s=WRC&a="+ datesplit[1] +"&b="+ datesplit[0] + "&c="+ datesplit[2] +"&d="+ datesplit[1] +"&e="+ datesplit[0] +"&f="+ datesplit[2] +"&g=d&ignore=.csv"; 
```

它不会重新加载页面

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T11:36:26.237

您可以使用任何服务器端脚本来完成

例如：-

```
 $.ajax({
    type: "GET",
    url: "your-server-side-file.php",
    dataType: "text",
    success: function(data) { 
        console.log(data);
    }
  }); 
```

并在该服务器文件`your-server-side-file.php`处理中，csv 文件解析该值。以您自己的格式返回。

例如 php csv 文件解析[http://php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)

# php - 更改未保存在 Cpanel 上的 PHP 脚本中

> ID：12493640
> 
> 赞同：1
> 
> 时间：2012-09-19T11:16:52.033
> 
> 标签：php, cpanel

我正在我的虚拟主机上练习一些 PHP 脚本。我登录到我的 CPanel，转到文件管理器，创建 PHP 脚本，然后在浏览器中测试它们。

现在，问题是，脚本第一次运行正常。但是，如果我进行一些更改，它会继续加载以前的输出。

这种方式真的很难调试。

我已尝试清除浏览器的缓存、删除 cookie、重新启动浏览器、注销并重新登录到 Cpanel。但是，似乎没有任何效果。

即使是一个简单的代码，如：

```
<?php echo "Hello" ?> 
```

不会工作。

有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:25:58.980

尝试 fileZilla 软件连接 ftp 并确保您的文件正确，然后尝试简单的 html 文件

# c# - EF 上具有默认过滤器的实体

> ID：12493641
> 
> 赞同：4
> 
> 时间：2012-09-19T11:16:53.073
> 
> 标签：c#, entity-framework, entity

我的 .edmx 文件中有一个名为 Client 的实体。

我必须对它运行几个 linq 查询，但在所有这些查询上，我都需要一个过滤器（比如说 active=1）。

我不想对`where c.active == 1`我的所有查询都有一个，我的实体应用了默认过滤器更有意义。这是可以做的事情吗？

或者也许我可以将查询作为实体而不是表的基础？（我采用数据库优先方法）

我知道另一种解决方案是在数据库上创建一个视图并将实体链接到视图，但我也不希望这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:19:51.213

您可以向生成的数据库上下文添加其他方法：

```
partial class DatabaseContext // same name as your generated context
{
    IQueryable<Client> ActiveClients { get { return Clients.Where(c => c.active == 1); } }
} 
```

并在整个代码中使用它。由于它是部分类的一部分（在生成的上下文类之外的其他文件中定义），因此在刷新模式时它不受 codegen 工具的影响。

# jquery - 在页面加载时打开 jquery 模式

> ID：12493646
> 
> 赞同：0
> 
> 时间：2012-09-19T11:17:40.483
> 
> 标签：jquery, dialog, popup, modal-dialog, pageload

我有一个功能可以在单击按钮时打开一个模式窗口。如何修改它以便在页面加载时打开（嗯......在处理表单之后）

这是打开对话框的函数：

```
$j(function () {
    $j('#popup-wrapper').modalPopLite({ 
        openButton: '#clicker', 
        closeButton: '#close-btn' 
    });
}); 
```

这是它需要去的地方：

```
if(isset($_POST['submitted']))
{
   if($formproc->ProcessForm())
   {
        $formproc->RedirectToURL("thank-you.php");
   }
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:22:49.027

尝试

```
$('form').submit(function(){
 $('#popup-wrapper').trigger('click');
}); 
```

## 更新

您必须通过 ajax(post) 提交表单并在`complete:`或`success:`部分调用上述函数

替代方案：（未测试）

```
<?php if($formproc->ProcessForm()) { ?>
       <script>$('#popup-wrapper').trigger('click');</script>
<?php  } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:39:42.770

我可能有这个错误，但如果你想在你的“thank-you.php”页面上打开它，在页面加载时（正如我看到的问题）你可以将以下内容放在你的 html 中的任何位置（最好在 jquery include 之后的头部）

```
<script>
    $(document).ready( function(){
        $j('#popup-wrapper').modalPopLite({ openButton: '#clicker', closeButton: '#close-btn' });
    });
</script> 
```

抱歉，如果我完全误解了这一点...

祝你好运！

**编辑**

好吧，如果你想要它，为什么不捕获一个 php 变量中的字符串，以便以后在你的页面中使用呢？喜欢...

```
$modal = '';

if ($userHasPosted){

    $modal = "<script ... />";

}

... later in the page (maybe in the head somewhere) ...

echo $modal; 
```

这有任何意义吗？

# asp.net - 获取 您目前没有为您的用户建立默认网页。运行VS2008解决方案时

> ID：12493650
> 
> 赞同：0
> 
> 时间：2012-09-19T11:17:53.093
> 
> 标签：asp.net, visual-studio-2008, iis

我在 VS2008 中有网站。在 IIS 5.1 中创建了虚拟目录。当我尝试运行该站点以从 Visual Studio 进行调试时，我不断得到：

> 您的 Web 服务现在正在运行。
> 
> 您当前没有为您的用户建立默认网页。任何试图从另一台机器连接到您的网站的用户当前都会收到一个“建设中”页面。您的 Web 服务器列出以下文件作为可能的默认网页：default.htm、default.asp、index.htm、iisstart.asp。目前，只有 iisstart.asp 存在。
> 
> 要将文档添加到您的默认网站，请将文件保存在 c:\inetpub\wwwroot 中。

我不知道为什么会这样。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:53:48.200

如果我理解正确，可能就这么简单：

在解决方案资源管理器中，右键单击要设为默认页面的页面，然后单击“设置为起始页”。

# html - 如何在 div 中对齐图片库？

> ID：12493654
> 
> 赞同：2
> 
> 时间：2012-09-19T11:18:01.073
> 
> 标签：html, css

很抱歉，如果这是一个 n00b 问题，但对于我的生活，我无法让这个灯箱画廊在我的“内容”div 中集中排列。

[http://www.justthisdesign.co.uk/bathroom-gallery.html](http://www.justthisdesign.co.uk/bathroom-gallery.html)

我很惭愧问这样一个愚蠢的问题，但老实说，我已经尝试了一切。我给每一行中的最后一个图像一个 .last 类，然后使用 padding-right 和 margin-right 玩，但它似乎没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:22:52.600

`text-align: center;`在`content`div 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:24:33.747

采用 `<div id="content" class="clearfix thumbs" style="text-align: center;">`

将边距 4 用于两侧画廊中的所有图片，而不仅仅是右侧！！。您可以删除内容 div 的水平填充并调整 div 宽度中的填充区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T11:39:37.093

给你的内容 div 一个 text-align:center; 并将每行中的最后一张图像的边距为 0，否则右侧将有额外的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T11:25:06.220

```
#content {
     padding: 15px 30px;
     background-color: #F8F8F8;
} 
```

而不是填充尝试使用边距：

```
#content {
     margin: auto;
     width: 900px;
     background-color: #F8F8F8;
} 
```

并弄乱宽度以控制其位置。希望这可以帮助。

# .net - 在 VS 2012 中使用实体数据模型

> ID：12493656
> 
> 赞同：1
> 
> 时间：2012-09-19T11:18:02.080
> 
> 标签：.net, entity-framework, visual-studio-2012, ado.net-entity-data-model, entity-framework-5

我之前在 VS 2010 中使用过实体数据模型，但现在我在 VS 2012 中遇到了问题。首先，现在在 2012 实体数据模型中有两个扩展名为 .tt 的新文件。此外，Designer.cs 文件是空的，并且有一条消息如何启用代码生成，但是当我启用代码生成时，它说对象已经存在。

我也错过了 CreateObjectSet();

```
 using (MyEntities entitiesContext = new MyEntities())
            {
                var entitySet = entitiesContext.CreateObjectSet<T>();

            } 
```

不知道为什么，但现在entitiesContext 没有 .CreateObjectSet();

我想知道是否有人可以弄清楚发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:03:52.097

VS 2012 中的新实体数据模型默认使用 T4 模板 (.tt) 文件，而不是以前用于代码生成的自定义工具。生成的上下文也基于较新的 DbContext API，而不是 Visual Studio 2010 使用的 ObjectContext API（这就是它没有该方法的原因 - DbContext API 中的等效方法是`Set<T>`）。T4 和 DbContext API 目前都是推荐使用 EF 的方法。

我当前的机器上没有 VS 2012，但您可以尝试删除 .tt 并打开老一代，如中所述`.Desinger.cs.`

# jquery - jQuery UI、.load 和对话框

> ID：12493660
> 
> 赞同：0
> 
> 时间：2012-09-19T11:18:08.207
> 
> 标签：jquery, jquery-ui, user-interface, dialog

我需要一个按钮来触发一个 jQuery UI 对话框，该对话框根据初始链接标签中提供的 GET 参数请求一个页面。

然后，AJAX 加载页面将根据提供的 GET 参数从数据库中检索数据，并作为填充表单显示给用户。

然后，用户应该能够编辑这些填充的表单字段并单击“保存”，然后表单字段将被 POST 到另一个脚本（可以是自己的，或在必要时分开）。

处理 POST 数据的 scipt 将返回 true 或 false，如果为 false，将提供错误，如果为 true，则需要关闭框，工作完成。

这是我所拥有的，但是在试图让我的头脑处理 POST 时遇到了问题（我需要一个单独的脚本吗？）

```
$(function (){
    $('a.edit').click(function() {
        var url = this.href;
        dialog.dialog({
            close: function(event, ui) {
                dialog.remove();
            },
            modal: true
        });
        dialog.load(
            url, 
            {},
                function (responseText, textStatus, XMLHttpRequest) {
            }
            );
            return false;
        });
    });

<a class="edit" href="handle.php?d=838474&f=37446374"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:05:24.990

使用 ID 而不是类。

最好不要更新您从中获取数据的同一元素。

# coffeescript - 具有固定范围的 CoffeeScript 兼容分支？

> ID：12493661
> 
> 赞同：3
> 
> 时间：2012-09-19T11:18:08.557
> 
> 标签：coffeescript, coco

[除了固定作用域](http://lucumr.pocoo.org/2011/12/22/implicit-scoping-in-coffeescript/)之外，是否有一个没有任何更改的 CoffeeScript 分支，因此它在很大程度上与 CoffeeScript 兼容（如果代码没有外部变量分配，则完全兼容）？我会考虑可接受的方法来分配外部变量以包括`:=`la LiveScript、`nonlocal`la Python 或其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:03:18.150

没有。我认为 LiveScript 与 CoffeeScript 兼容，但这不是“一个小补丁”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:20:19.800

可可可能是你的朋友。
[https://github.com/satyr/coco](https://github.com/satyr/coco)
我现在要自己尝试一下..

> 在隐藏 JavaScript 不好的部分的过程中，CoffeeScript 积累了自己的怪癖：可怕的变量范围、尴尬的范围、令人困惑和/或无意义的关键字、冗长的文件扩展名等等。可可试图修改它们，将两者的好部分交织在一起。

在咖啡替代品列表中找到：
[https ://github.com/jashkenas/coffee-script/wiki/List-of-languages-that-c​​ompile-to-JS](https://github.com/jashkenas/coffee-script/wiki/List-of-languages-that-compile-to-JS)

编辑：
Coco 解决方案仍然有一个警告，afaik。
:= 语法仅帮助您进行分配，而不是读取访问权限。

# user-permissions - Confluence 链接查看权限

> ID：12493663
> 
> 赞同：0
> 
> 时间：2012-09-19T11:18:14.183
> 
> 标签：user-permissions, confluence, wiki-markup

我正在使用 Confluence 4.1.4 并希望任何人都可以看到指向空间和页面的链接，即使用户没有获得目标的查看权限。

这是代码：

```
<ac:link><ri:space ri:space-key="FOO" /><ac:plain-text-link-body>Bar</ac:plain-text-link-body></ac:link> 
```

用户不会看到“Bar”，而只会看到 FOO。恕我直言，最好不要显示链接。

是否有显示页面标题的解决方法（不使用外来插件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:55:44.827

在 Confluence 4.3 中，链接的文本（例如页面标题）对于没有目标查看权限的用户是可见的。

我不知道这是在哪个版本中引入的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:54:08.960

在我们的案例中，（丑陋的）解决方法是将链接视为外部链接。

# silverlight - Silverlight 中的引用 Unity

> ID：12493665
> 
> 赞同：1
> 
> 时间：2012-09-19T11:18:16.307
> 
> 标签：silverlight, unity-container

鉴于 Silverlight 使用精简的 .net 框架，我可以从 Silverlight 项目中引用 Unity 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:26:51.997

您可以从[此处下载](http://www.microsoft.com/en-us/download/details.aspx?id=1623)[Unity for Silverlight](http://msdn.microsoft.com/en-us/library/hh237492.aspx)的特殊版本。（如果您使用[nuget](http://nuget.org/packages/Unity/2.1.505.2)，它将自动为您引用正确的 dll）

但是 Unity for Silverlight 有一些限制：

*   不支持 XML 配置。
*   由于 Silverlight 安全模型的不同，容器只能创建和注入公共类型。桌面版本还允许您注入内部类型。
*   不支持 Unity 拦截机制。

请注意（感谢 @Sebastian Weber 的信息）自 EntLib Silverlight 集成包发布以来也支持拦截。[有关其他信息，请参阅 MSDN](http://msdn.microsoft.com/en-us/library/hh852713%28v=pandp.51%29.aspx)。

但是**您不能** 在 SL 项目中使用 Unity“桌面 dll”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:26:38.607

它存在一个特殊版本的 Unity for Silverlight。你可以在[这里找到](http://www.microsoft.com/en-us/download/details.aspx?id=1623)

最新版本为 2.1，支持 Silverlight 3-5

# javascript - 如何在 intellij IDEA 中使用 Rhino 进行远程 Javascript 调试？

> ID：12493668
> 
> 赞同：8
> 
> 时间：2012-09-19T11:18:18.840
> 
> 标签：javascript, intellij-idea, remote-debugging

有一个服务器使用 Rhino 引擎来执行 JavaScript 文件。我需要使用 IDEA 连接到该服务器并在其上运行调试脚本。我在 IDEA 的 Rhino 调试器上找到的唯一信息是“JS 调试器”。但我需要的是一些连接到服务器本身的能力。所以，如果你能给出一些与之相关的想法，那将是非常有帮助的。

# c# - 区分 Excel 互操作操作引发的异常

> ID：12493669
> 
> 赞同：2
> 
> 时间：2012-09-19T11:18:44.480
> 
> 标签：c#, excel, exception, interop, comexception

我正在使用`Microsoft.Office.Interop.Excel`库从我的 C# 应用程序中将数据导出到 Excel。

`sheet.Cells[currentRow, 1])`使用无效`currentRow`值调用，会产生一条`System.Runtime.InteropServices.COMException`消息：

```
"Exception from HRESULT: 0x800A03EC" 
```

和`ErrorCode`-2146827284

但是，我收到了完全相同的错误代码，用于命令 Excel 保存到写保护文件。

**有没有办法区分从 Excel 收到的 COMExceptions，以便我可以相应地处理它们？** 我不想让我的用户说“使用 Excel 时出了点问题，对不起，傻瓜”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:26:44.323

我使用 Excel 互操作已经好几年了，但我还没有找到方法。最好的办法是在潜在问题发生之前检查它们。我希望有更好的东西，但据我所知没有。

**编辑**
您可以在 VBA 中捕获不同的错误，因此 Excel 本身确实区分了各种错误，但我相信 .NET 将所有这些错误都集中到一个 COMException 类中，它不会为您提供详细信息。

我发现这篇文章详细介绍了 VBA 错误代码：http:
[//support.microsoft.com/kb/146864](http://support.microsoft.com/kb/146864)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:31:49.357

a 的全部意义`COMException`在于它是从 COM 方面回来的。通常，在 COM 中，错误条件由`HRESULT`特定方法的返回值不为 0 表示。

不幸的是，这就是 COM“合同”中内置的错误信息的范围。所以你得到错误值（0x800A03EC 与 -2146827284 的值相同）。.NET 方面没有更多信息。

# wcf - 元数据公开但未找到 WSDL

> ID：12493670
> 
> 赞同：1
> 
> 时间：2012-09-19T11:18:49.467
> 
> 标签：wcf, web-services, configuration, metadata

我的 WCF 服务有问题，它以某种方式无法公开/发布 WSDL 定义。我已经阅读了有关导出元数据的 MSDN 教程。我也至少搜索了几个小时，但大多数人的问题与我不同/更简单。

我很确定我的配置文件是正确的，所以我会感谢任何可以建议我可以寻找的其他地方的人？

我的服务通常正在运行，我可以在 localhost 上访问它，在那里我可以获得 WCF 服务的标准页面（消息显示“要测试此服务，您需要创建一个客户端并使用它来调用该服务。您可以这使用命令行中的 svcutil.exe 工具，语法如下：“等）。

当我尝试访问 *?wsdl 扩展时，我的浏览器告诉我找不到该页面。

当我尝试在soapUI 中测试服务时，它告诉我WSDL 有问题。

所以，我希望这能让任何人了解我的问题是什么，我将非常感谢任何帮助。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:10:49.480

您是否在 serviceBehavior 中指定了 httpGetEnabled？

```
<behaviors>
  <serviceBehaviors>
    <behavior name="SubscriberOperationsBehavior">
      <serviceMetadata httpGetEnabled="true"
                       httpsGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

您还可以创建一个 mex 端点。

将以下端点添加到您的服务配置中：

```
<endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" /> 
```

# javascript - jQuery 日期选择器和日期时间选择器

> ID：12493677
> 
> 赞同：2
> 
> 时间：2012-09-19T11:19:19.807
> 
> 标签：javascript, jquery, jquery-ui, web-applications, jquery-plugins

我在尝试使用这两个 jquery 插件时遇到了一个小问题。希望有人可以帮助我解决这个问题。

我使用的第一个插件（DatePicker）是 jqueryui 附带的默认插件。第二个插件（DateTimePicker）是来自[http://trentrichardson.com/examples/timepicker/的 DateTimePicker](http://trentrichardson.com/examples/timepicker/)

我想要实现的是拥有一个用户定义的日期范围，就像 jqueryui 中提供的示例一样，有两个文本框（指定开始日期和结束日期）[http://jqueryui.com/demos/datepicker/date-range。 html](http://jqueryui.com/demos/datepicker/date-range.html)

虽然有另一个 datetimepicker 允许用户在上面指定的日期内选择一个 datetime。

这是一个示例：http: [//jsfiddle.net/uyB52/1/](http://jsfiddle.net/uyB52/1/)

但是，这里的问题是，每当我尝试添加 datetimepicker javascript 时，datepicker 将无法正常运行。它将无法按预期设置最小日期范围。

有没有人遇到过同样的问题？有人可以给我建议吗？我还是编程新手。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:57:09.320

看起来您的 datetimepicker 插件干扰了 jQuery UI（尽管它应该是一个有效的 jQuery UI 插件）。可能有解决此问题的可能性，但我建议不使用或使用其他插件来选择时间（这可行）。

如果您想使用 datetimepicker，您将不得不搜索不同的插件并找出最适合您需求的插件。我不能真正推荐插件，因为它取决于您的要求。

但是你也可以不使用 datetimepicker 插件而只使用 jQuery UI 来代替？看看这个小提琴：http: [//jsfiddle.net/uyB52/7/](http://jsfiddle.net/uyB52/7/)

这个想法是使用 jQuery UI 的 datepicker 来选择日期，并使用下拉框来选择时间。您还可以让用户在输入字段中输入时间[并对其进行验证](https://stackoverflow.com/questions/7294131/time-validation-with-jquery)。或者，[使用 jQuery UI 滑块](http://jqueryui.com/demos/slider/)代替下拉框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:38:28.420

知道了。您应该将字符串转换为日期，因为 minDate 和 maxDate 选项采用 Date 对象。

```
$("#from").datepicker("option", "maxDate", new Date(selected_date)) 
```

[jsfiddle](http://jsfiddle.net/ap4sJ/)

# asp.net - Textboxvalidation - 包括重音字母的正则表达式验证器

> ID：12493679
> 
> 赞同：0
> 
> 时间：2012-09-19T11:19:21.960
> 
> 标签：asp.net, regex, validation

不久前，我问了一个关于使用正则表达式（[链接](https://stackoverflow.com/questions/8815580/textboxvalidation-empty-or-minimum-3-characters-spaces-do-not-count)）进行文本框验证的问题。因此，根据答案，我使用带有以下正则表达式的（客户端）正则表达式验证器：

```
([\s*]*\w[\s*]*){3,} 
```

除非输入带有重音符号的单词（例如*élè*）来搜索 élève，否则它会按预期工作。在这种情况下，验证不会通过。

有人可以帮我解决如何在上述正则表达式中包含重音字母吗？有些页面告诉它`\w`应该包含重音字母，但是当我使用[在线验证器](http://public.kvalley.com/regex/regex.asp)对其进行测试时它失败了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:51:28.557

试试这个：

```
(\s*[a-zA-Z_0-9À-ÿ]\s*){3,} 
```

或者

```
([\s*]*[a-zA-Z_0-9À-ÿ][\s*]*){3,} 
```

**这将包括从 À 到 ÿ 的所有字符（所有重音字符，包括大写和小写的法国重音）**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:55:37.307

尝试使用`\p{L}`而不是`\w`. 这将允许 Unicode“字母”类别中的所有字符。您可能必须手动包含数字 ( `\p{N}`)。（见[MSDN](http://msdn.microsoft.com/library/20bw873z.aspx#CategoryOrBlock)）

# jsf - 树表扩展事件 jsf primefaces 中的问题

> ID：12493691
> 
> 赞同：2
> 
> 时间：2012-09-19T11:20:04.693
> 
> 标签：jsf, primefaces

我正在使用 primfaces3.2，并且正在使用组件树表。在扩展树时，我试图折叠所有其他树。但是扩展事件对我不起作用。

```
xhtml:

<p:ajax event="expand" listener="#{MyBean.onNodeExpand}" update=":form1" /> 

MyBean:

         public void onNodeExpand(NodeExpandEvent event) {
                String id = ((dummyclass) event.getTreeNode().getData()).getID();
                for (TreeNode app : List.getChildren()) {
                    dummyclass d = (dummyclass) app.getData();
                      if (id.equalsIgnoreCase(d.getID())) {
                         app.setExpanded(true);
                    } else 
                         {
                         app.setExpanded(false);
                    }
                }
            } 
```

dummyclass 是一个 pojo 类，它包含树表的所有 getter 和 setter。

# javascript - 对文本字段和复选框进行验证

> ID：12493692
> 
> 赞同：1
> 
> 时间：2012-09-19T11:20:06.373
> 
> 标签：javascript, html

请问我可以就我的表格寻求帮助吗？我想让文本字段和复选框都成为必填字段。复选框正在验证，我现在需要的只是文本字段需要验证。我正在使用 JavaScript。

HTML：

```
<form name="form" method="post" action="result.php" onSubmit="return checkme()">
<table cellpadding="0" cellspacing="0" border="0">
<tr>
<td>Name: </td>
<td> <input name="Name" type="text" id="Name" size="20"></td>
</tr>
<tr>
<td>Email: </td>
<td> <input name="Email" type="text" id="Email" size="20"></td>
</tr>
<tr>
<td colspan="2" align="center"><input type="checkbox" name="agree" value="agree_terms"> I agree to the terms</td>
</tr>
<tr>
<td colspan="2" align="center"><input type="submit" name="submit" value="Submit">      <input type="reset" name="reset" value="Clear"></td>
</tr>
</table>
</form> 
```

Javascript：

```
<script language="JavaScript" type="text/JavaScript">
<!--//hide script
function checkme() {
missinginfo = "";
if (!document.form.agree.checked) {
missinginfo += "\n - You must agree to the terms";
}
if (missinginfo != "") {
missinginfo ="__________________________________\n" +
"Required information is missing: \n" +
missinginfo + "\n__________________________________" +
"\nPlease complete and resubmit.";
alert(missinginfo);
return false;
}
else {
return true;
}
}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:23:37.543

添加此 JS 代码以验证文本字段

```
if(document.form.Name.value==""){
missinginfo += "Required field";
} 
```

电子邮件字段也一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:25:46.390

如果您将 doctype 转换为，`<!DOCTYPE html>`则可以使用

```
required="true" 
```

执行如下

```
<input name="Name" type="text" id="Name" size="20" required="true"> 
```

大多数浏览器都支持 HTML5。或者使用相当简单的[jQuery 验证。](http://docs.jquery.com/Plugins/Validation)

# view - 从 ContentBinding 获取视图中的内容

> ID：12493693
> 
> 赞同：3
> 
> 时间：2012-09-19T11:20:17.397
> 
> 标签：view, ember.js

我对新的 Ember.js (1.0 pre) 有问题

我得到了在 Ember 0.9.8 上有效的东西，但是当我更改此库的版本时，我注意到无法解决的问题。（我不太擅长 Ember :/)

这是示例代码：http: [//jsfiddle.net/ETQCc/5/](http://jsfiddle.net/ETQCc/5/)

我创建了视图：

```
<script type="text/x-handlebars" data-template-name="MyView">
    {{s}} / {{content.s}} / {{this.s}} / {{view.s}}
</script>

App.myview = Em.View.extend({
    layoutName : "MyView",
}); 
```

我想展示一些取决于我在内容绑定中设置的变量：

```
<script type="text/x-handlebars">
     xx{{view App.myview contentBinding="App.ctrl"}}
</script> 
```

如何在此控制器中获取变量？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T11:30:07.917

你有两种方法可以做到这一点。你可以 ：

*   将控制器绑定到您的视图而不是绑定内容（请参阅[JSFiddle](http://jsfiddle.net/wt4fk/)）。通过这样做，您将视图的上下文设置为控制器，因此`{{s}}`可以直接工作：

`{{view App.myview controllerBinding="App.ctrl"}}`

*   编辑您的模板以从视图而不是其上下文中获取变量（请参阅[此 JSFiddle](http://jsfiddle.net/wt4fk/1/)）。通过这样做，视图内容被绑定到控制器，并且您的模板显示了`s`视图内容的属性：

`{{view.content.s}}`

我建议你看看[Ember.js View Context changes](https://gist.github.com/2494968)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:30:38.023

我找到了答案......我应该使用：{{view.content.s}}

# ruby-on-rails - 验证模型这个或那个但必须有一个 Rails？

> ID：12493695
> 
> 赞同：0
> 
> 时间：2012-09-19T11:20:28.427
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-1.9.3

我有 3 个模型

```
class Audio
end

class Album
end

class Movie
end 
```

我想在音频模型中进行验证。在创建音频时，服务器应该验证音频是否与专辑或电影或两者链接。但是提交时选择模型的两个字段都不应该为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:30:46.853

专辑应该与另一种类型链接，比如说“媒体”。这允许您在“媒体”上有一个字段，可以是“电影”或“音频”。

看看 classy_enum 如何执行类型： [https ://github.com/beerlington/classy_enum](https://github.com/beerlington/classy_enum)

# c++ - CString 十六进制值转换为字节数组

> ID：12493699
> 
> 赞同：1
> 
> 时间：2012-09-19T11:20:52.380
> 
> 标签：c++, bytearray, type-conversion, cstring

我一直在尝试执行从包含十六进制字符串的 CString 到字节数组的转换，并且一直

到目前为止不成功。我看过论坛，到目前为止似乎都没有帮助。有没有只有几个的功能

执行此转换的代码行？

我的代码：

```
BYTE abyData[8];    // BYTE = unsigned char

CString sByte = "0E00000000000400"; 
```

期待：

```
abyData[0] = 0x0E;
abyData[6] = 0x04; // etc. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:35:54.553

您可以一次简单地吞噬两个字符：

```
unsigned int value(char c)
{
    if (c >= '0' && c <= '9') { return c - '0'; }
    if (c >= 'A' && c <= 'F') { return c - 'A' + 10; }
    if (c >= 'a' && c <= 'f') { return c - 'a' + 10; }

    return -1; // Error!
}

for (unsigned int i = 0; i != 8; ++i)
{
    abyData[i] = value(sByte[2 * i]) * 16 + value(sByte[2 * i + 1]);
} 
```

当然`8`应该是你的数组的大小，并且你应该确保字符串的长度正好是原来的两倍。对此的检查版本将确保每个字符都是有效的十六进制数字，如果不是这种情况，则会发出某种类型的错误信号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T11:32:48.873

像这样的东西怎么样：

```
for (int i = 0; i < sizeof(abyData) && (i * 2) < sByte.GetLength(); i++)
{
    char ch1 = sByte[i * 2];
    char ch2 = sByte[i * 2 + 1];

    int value = 0;

    if (std::isdigit(ch1))
        value += ch1 - '0';
    else
        value += (std::tolower(ch1) - 'a') + 10;

    // That was the four high bits, so make them that
    value <<= 4;

    if (std::isdigit(ch2))
        value += ch1 - '0';
    else
        value += (std::tolower(ch1) - 'a') + 10;

    abyData[i] = value;
} 
```

**注意：**以上代码*未经*测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T12:14:58.007

你可以：

```
#include <stdint.h>
#include <sstream>
#include <iostream>

int main() {
    unsigned char result[8];
    std::stringstream ss;
    ss << std::hex << "0E00000000000400";
    ss >> *( reinterpret_cast<uint64_t *>( result ) );
    std::cout << static_cast<int>( result[1] ) << std::endl;
} 
```

但是**请注意内存管理问题**！另外，结果与您期望的相反，因此：

```
result[0] = 0x00
result[1] = 0x04
...
result[7] = 0x0E 
```

# git - 在 git 远程存储库上设置变量 - git gc 不会自动运行

> ID：12493706
> 
> 赞同：1
> 
> 时间：2012-09-19T11:21:28.637
> 
> 标签：git, variables, git-gc

似乎 git 拒绝在我的远程存储库上自动执行 gc 命令。在大约一个月内，由于 .pack 文件，存储库扩大到大约 6GB。我认为这是变量 gc.auto 的问题-如何在远程存储库上设置此变量，或者如何在该存储库上手动运行 git-gc 命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:31:57.067

您必须登录托管远程存储库的框，然后只需键入

```
git gc 
```

在命令行上。

关于`gc.auto`：[文档](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)说：

> gc.auto
> 当存储库中的松散对象大约超过这么多时， git gc --auto 将打包它们。一些 Porcelain 命令不时使用此命令执行轻量级垃圾收集。默认值为 6700。将此设置为 0 将禁用它。

但是，您正在谈论`.pack`文件。似乎还有另一种选择：

> gc.autopacklimit
> 当存储库中有多个没有用 *.keep 文件标记的包时， git gc --auto 将它们合并到一个更大的包中。默认值为 50。将此设置为 0 将禁用它。

请注意，这`gc.autopacklimit`适用于包装的数量，而不是它们的大小。也许你可以`gc`使用这些来调整行为......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-18T11:42:27.943

注意：如果您的repo只有一个包文件，`git gc`则不应*在*`git config gc.autoPackLimit 1`. 然而确实如此。
也就是说，它一直持续到 Git 2.10（2016 年第三季度）。

请参阅[Eric Wong (](https://github.com/ele828) [)的](https://github.com/ele828)[commit 5f4e3bf](https://github.com/git/git/commit/5f4e3bf536621675efd51020eb2950986b882e18)（2016 年 6 月 25 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 97865e8](https://github.com/git/git/commit/97865e83c7266ad0fd55f75ae4e2d968ef34bf6f))^(中，2016 年 7 月 13 日）)[`ele828`](https://github.com/ele828)
^([`gitster`](https://github.com/gitster))

> ## `gc`：修复一个错误`gc.autoPackLimit`

这与文档相匹配，并允许`gc.autoPackLimit=1`维护单个包，而无需在每次 " `git gc --auto`" 调用时尝试重新打包。

> " `gc.autoPackLimit`" 设置为 1 时不应在只有一包时触发重新打包，但代码计数不佳并且这样做了。

# javascript - 在 JavaScript 中在运行时向对象添加属性和函数的名称是什么？

> ID：12493708
> 
> 赞同：0
> 
> 时间：2012-09-19T11:21:35.237
> 
> 标签：javascript

在 JavaScript 中可以动态地向对象（和函数）添加属性和函数吗？这个叫什么名字？

```
var obj = {};
obj.myProperty = "I have just beed added!"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:23:02.710

在 Javascript 中，一切都是在运行时生成的。

所以我称之为*“向对象添加属性和函数”*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:31:08.150

只是为了贡献知识的总和，因为我现在对我的家庭作业评论感到难过......

这被简单地称为**属性分配**，因为您正在为属性分配值。

### 编辑：

作为记录，第 3 章的第 3 节：对象，在*JavaScript 中*，Douglas Crockford 的优秀部分是这样说的：

> 对象中的值可以通过**赋值**来更新。如果对象中已经存在属性名，则替换属性值

（重点补充）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:25:39.510

JavaScript 是基于原型的语言，因此您可以将其称为原型行为。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-19T11:32:41.333

**增强类型**：Crockford 第 32 页，“JavaScript 的优点”。所以我想我们可以称之为：*增强*。他继续谈论增强原型，但在开头段落中他说：

“JavaScript 允许*扩展*语言的基本类型。在第 3 章中，我们看到将方法添加到 Object.prototype 使该方法可用于所有对象。这**也**适用于函数、数组字符串、数字、正则表达式和布尔值。”

然后，他继续举例说明如何增强原型。但是，正如上面的句子所示，扩充可以应用于所有 JavaScript 基本类型。

所以我想增强是一个足够公平的词。

# c# - 设置 Sharepoint Doclib 项的初始版本

> ID：12493711
> 
> 赞同：1
> 
> 时间：2012-09-19T11:21:48.107
> 
> 标签：c#, sharepoint, versioning, document-library

我遇到了以下问题：我在运行时创建一个文件。该文件被推送到文档库。这完美！但是...我想设置这个文件的版本。它被设置为 1.0 版，但我想先把它放在 0.1 版中。

这是如何运作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:29:09.563

必须将文档库配置为**创建主要和次要版本**以获取版本号，例如`0.1`或`2.7`。

更多信息：

*   [从用户的角度来看主要和次要版本控制](http://henkhooiveld.com/2010/01/18/major-and-minor-versioning-from-a-users-perspective/)
*   [版本控制、内容批准和签出计划](http://technet.microsoft.com/en-us/library/cc262378.aspx)

# wmi - 以编程方式更改 SCCM 2012 上的“将此包中的内容复制到分发点上的包共享”

> ID：12493712
> 
> 赞同：1
> 
> 时间：2012-09-19T11:21:48.893
> 
> 标签：wmi, sccm

我在 SCCM 2012 服务器上有许多软件包。我想使用 WMI 在包属性页面的“数据访问”选项卡上更改**“将此包中的内容复制到分发点上的包共享”选项？**

我熟悉使用 WMI 操作 SCCM 对象以及使用 .NET 和 VBScript 操作 SCCM 对象，但找不到可以更改此选项的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T23:02:35.060

您正在寻找的属性是 ShareName(String) 和 ShareType(Int)。

例如，如果您想要如下 gui 中所示的设置，

![在此处输入图像描述](../Images/a2888887dab34109c6dda2c6220444ab.png)

设置应更改为

```
ShareName="share1"
ShareType=2 
```

# android - 以编程方式更改 EditText IME_ACTION

> ID：12493713
> 
> 赞同：8
> 
> 时间：2012-09-19T11:21:49.807
> 
> 标签：android

在我的应用程序中，我需要显示一个或两个编辑文本来收集信息（e1 和 e2），具体取决于用户将通过单选按钮进行的​​选择。这是通过将 edittext 的可见性状态设置为 GONE 来完成的，并且工作正常。

我的问题是如何以编程方式将 IME_ACTION 从“完成”设置为“下一个”，即：

1) 只有 e1 可见 - 将 e1 的 IME_ACTION 设置为 DONE

2) e1 和 e2 可见 - 将 e1 的 IME_ACTION 设置为 NEXT，将 e2 的 IME_ACTION 设置为 DONE。

我正在使用 android:minSdkVersion="4" 和 android:targetSdkVersion="16" 并在 Android 2.2 设备上进行测试。

这是我的布局：

```
<EditText
android:id="@+id/e1"
android:layout_width="0dip"
android:layout_height="wrap_content"
android:inputType="text"
android:maxLines="1"
android:singleLine="true"
android:imeOptions="actionDone"
android:hint="@string/sh15"
android:textColor="@android:color/black"
android:textSize="@dimen/s">
</EditText>         
<EditText
android:id="@+id/e2"
android:layout_width="0dip"
android:layout_height="wrap_content"
android:inputType="text"
android:maxLines="1"
android:singleLine="true"
android:imeOptions="actionDone"
android:hint="@string/sh16"
android:textColor="@android:color/black"
android:textSize="@dimen/s">
</EditText> 
```

这是我的代码：

```
RadioGroup r= (RadioGroup) dialog.findViewById(R.id.rg);
  r.setOnCheckedChangeListener(new OnCheckedChangeListener() 
  {
   public void onCheckedChanged(RadioGroup group, int checkedId) 
   {
    switch(checkedId)
    {
     case R.id.rb1: //show one edittext
         e1.setVisibility(View.VISIBLE);             
         e2.setVisibility(View.GONE);
         e1.setImeOptions(EditorInfo.IME_ACTION_DONE);
     break;
     case R.id.rb2: //show two edittext
         e1.setVisibility(View.VISIBLE);
         e2.setVisibility(View.VISIBLE);
         e1.setImeOptions(EditorInfo.IME_ACTION_NEXT);
         e2.setImeOptions(EditorInfo.IME_ACTION_DONE);
     break;

    }
   }
  }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T11:44:45.230

```
e2.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        @Overrid
    public boolean onEditorAction(TextView v, int actionId,KeyEvent event) {
        if (actionId == EditorInfo.IME_ACTION_DONE) {
                //your code    
              }
          }
)}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-14T19:11:35.500

万一有人降落在这里：`EditText.setImeOptions(EditorInfo.IME_ACTION_NEXT);`如果是 TouchWiz，上帝会帮助你 :)

另外，我注意到当 EditText 有焦点时无法切换时出现问题，因此请确保关闭键盘并取消焦点

# c++ - 枚举名称作为函数

> ID：12493715
> 
> 赞同：1
> 
> 时间：2012-09-19T11:22:10.960
> 
> 标签：c++

如果我们在 c++ 中使用枚举名称作为函数会发生什么？为了详细说明，让我把下面的代码片段

```
enum check{
    HELLO,
    HI,
    HOWDY,
    SALAM,
    SALOM,
    STOP
};

void main() {
    int p  = check();
    cout<<p;
} 
```

我可以假设它可能会在类或结构的情况下调用默认构造函数，但是枚举会发生什么？

如果它是某种类似构造函数的方法，它会返回 0 吗？因为'p'设置为0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:23:51.337

它使用*值初始化*（就像 a`class`或 a `struct`）`check`来*复制初始化*，`int`然后返回`0`。

需要明确的是，您没有将它用作函数，这是值初始化的语法。

就像

```
int p = int(); 
```

没有将类型`int`用作函数。

# magento - magento 的 cookie 时间与时区不同

> ID：12493718
> 
> 赞同：0
> 
> 时间：2012-09-19T11:22:19.930
> 
> 标签：magento, cookies, timezone

我搜索了两个多小时，我的问题是：

我需要使用 cookie，但我发现我的 magento 的 cookie 时间不对。我已经重新安装了我的 magento，并在`system/configuration/general/locale`选项中选择了我的时区。

但是当我访问我的网站时，我发现 cookie 时间仍然使用 GMT 并且路径也不正确..（它们是 magento 的 cookie“前端”和“adminhtml”，而不是我设置的 cookie，因为我需要修复首先是 cookie 时间，然后他们开始使用我自己的 cookie）。

但是我`<?php echo Mage::getModel('core/date')->date();?>`在header.phtml中使用来打印我的时间，而且这个时间是对的。

所以这意味着设置cookies的地方不使用时区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:55:27.863

您确定这些设置没有设置在较低的配置范围（网站或商店级别）吗？**使用系统 > 配置**屏幕左上角的 GUI 工具或使用查询：

```
SELECT * FROM `core_config_data`
WHERE `scope` != 'default'
  AND `path` LIKE 'web/cookie%'; 
```

如果您获得上述查询的任何结果，则表示在商店或网站级别设置了值。

# php - 谷歌天气正则表达式

> ID：12493722
> 
> 赞同：0
> 
> 时间：2012-09-19T11:22:30.500
> 
> 标签：php, regex

我在 PHP 中使用正则表达式来解析 Google 在查询“天气”时提供的天气结果。

基本上，我已经设法匹配了我需要的每一个细节（湿度、风、位置名称等），但我根本无法匹配以摄氏度为单位的当前温度。有没有人能够提供一个匹配这个的表达式？

`<td style="font-size:140%;white-space:nowrap;vertical-align:top;padding-right:15px;font-weight:bold" rowspan=2>10°C | <a href="/setprefs?fheit=1&amp;sig=0_vpPSh_He8v7GXjLf7MhO-wNqNOU=&amp;prev=http://www.google.com/search%3Fq%3Dweather%2Bin%2Bwellington&amp;sa=X&amp;ei=3KVZUL6JMcWsiAfug4GQBQ&amp;ved=0CB8QwwQ" class="fl">&deg;F</a>`

抱歉，粘贴太长了，但 10 摄氏度即将开始。这些是环绕它的两个 HTML 标记。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:24:37.567

这个怎么样？：

```
/>-?(\d+)°C\b/ 
```

# jquery - 防止复杂按钮断裂成零件

> ID：12493726
> 
> 赞同：1
> 
> 时间：2012-09-19T11:22:41.183
> 
> 标签：jquery, jquery-ui

我正在使用 jQuery UI 创建一个带有下拉菜单的按钮，该下拉菜单位于对话框中：

[http://jsfiddle.net/ph5Jw/6/](http://jsfiddle.net/ph5Jw/6/)

当我将对话框的宽度调整为最小设置时，按钮的第二部分会跳到下一行。如何防止它缠绕——我希望按钮部件永远不会分开。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:27:09.247

指定[空格：nowrap；](https://developer.mozilla.org/en-US/docs/CSS/white-space)在容器上。

[更新了小提琴。](http://jsfiddle.net/ph5Jw/8/)

# php - PHP在同一行上使用结束标记重构递归XML？IE

> ID：12493727
> 
> 赞同：0
> 
> 时间：2012-09-19T11:22:41.883
> 
> 标签：php, xml, recursion

我需要重组一个非常大的 xml 源，例如在

[http://www.fluffyduck.com.au/sampleXML.xml](http://www.fluffyduck.com.au/sampleXML.xml)

我需要为 jstree 修改它，但是我不确定如何递归地操作数据，因为使用 simpleXml 将其加载为 xml 只会看到前 1 个用户记录。

```
<user id="41" username="bsmain" firstname="Boss" lastname="MyTest" fullname="Test Name" email="lalal@test.com" logins="1964" lastseen="11/09/2012">

</user>

to

<user id="41">
    <content><name>bsmain</name></content>
</user> 
```

问题是一些 xml 行没有结束标记，例如，而是看起来像这样：

```
<user id="61" username="underling" firstname="Under" lastname="MyTest" fullname="Test Name" email="lalal@test.com" logins="4" lastseen="08/09/2009"/> 
```

如果我修改此记录并添加下层 jstree 无法识别它，我假设末尾的 /> 与？

我确实想在 XML 中执行此操作，但我认为它可能更容易，以某种方式简单地“逐行”解析 xml 文件，读取数据行可能会对其进行分解，然后创建一个新变量来存储它，其中包含修改后的内容，例如作为 ：

```
<user id="61">
    <content><name>bsmain</name>
</user> 
```

并在末尾存在 /> 的行上，手动插入标签。

必须有一种更智能/更快的方法来实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:04:07.393

您最好的选择是[`DOMDocument`](http://www.php.net/manual/en/class.domdocument.php)用于 XML 解析。我编写了一个将属性（不包括`id`属性）转换为内容元素的示例：

**代码**

```
<?php
$s =
'<users>' .
    '<user id="61" username="underling" firstname="Under" lastname="MyTest" fullname="Test Name" email="lalal@test.com" logins="4" lastseen="08/09/2009"/>' .
    '<user id="61" username="underling" firstname="Under" lastname="MyTest" fullname="Test Name" email="lalal@test.com" logins="4" lastseen="08/09/2009"/>' .
    '<user id="8" test="testvalue"></user>' .
'</users>';

$doc = new DOMDocument();
$doc->loadXML($s);

$users = $doc->getElementsByTagName("user");
foreach ($users as $user)
{
    if ($user->hasAttributes())
    {
        // create content node
        $content = $user->appendChild($doc->createElement("content"));
        // transform attributes into content elements
        for ($i = 0; $i < $user->attributes->length; $i++)
        {
            $attr = $user->attributes->item($i);
            if (strtolower($attr->name) != "id")
            {
                if ($user->removeAttribute($attr->name))
                {
                    $content->appendChild($doc->createElement($attr->name, $attr->value));
                    $i--;
                }
            }
        }
    }
}

header("Content-Type: text/xml");
echo $doc->saveXML();

?> 
```

**输出**

```
<users>
    <user id="61">
        <content>
            <username>underling</username>
            <firstname>Under</firstname>
            <lastname>MyTest</lastname>
            <fullname>Test Name</fullname>
            <email>lalal@test.com</email>
            <logins>4</logins>
            <lastseen>08/09/2009</lastseen>
        </content>
    </user>
    <user id="61">
        <content>
            <username>underling</username>
            <firstname>Under</firstname>
            <lastname>MyTest</lastname>
            <fullname>Test Name</fullname>
            <email>lalal@test.com</email>
            <logins>4</logins>
            <lastseen>08/09/2009</lastseen>
        </content>
    </user>
    <user id="8">
        <content>
            <test>testvalue</test>
        </content>
    </user>
</users> 
```

# android - 为地理编码结果设置自动完成超时

> ID：12493729
> 
> 赞同：1
> 
> 时间：2012-09-19T11:22:45.037
> 
> 标签：android, autocomplete, timeout, geocoding

处理打字超时的最佳方法是什么？

我尝试了这样的代码（受[此处](https://stackoverflow.com/questions/9142885/geocoder-autocomplete-in-android)代码的启发）：

```
public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {
//...
    Message msg = Message.obtain(messageHandler, MESSAGE_TEXT_CHANGED, arg0.toString());
    messageHandler.sendMessageDelayed(msg, 1000 );
//...
} 
```

但在日志中，我可以看到地理编码器在每次按键时都会被调用，无论我输入多快。我想拥有与 Javascript 的 setTimeout(...) 函数相同的行为。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:30:12.053

您可以在按下新键时取消之前发送给处理程序的消息：

```
Message msg = Message.obtain(messageHandler, MESSAGE_TEXT_CHANGED, arg0.toString());
messageHandler.removeMessages(MESSAGE_TEXT_CHANGED);
messageHandler.sendMessageDelayed(msg, 1000 ); 
```

# c# - Slickgrid 为单元格/列或行添加颜色

> ID：12493741
> 
> 赞同：5
> 
> 时间：2012-09-19T11:23:39.003
> 
> 标签：c#, slickgrid

我有一个非常棒的 slickgrid，它有计算/小计/费用等，小计不是固定的，它们会向下移动，因为上面选择了项目。

但是我被困在将这个单元格中的文本颜色更改为红色？是否可以？也许通过注入 HTML 代码？有没有办法为整个列背景着色..说绿色？还是一排变灰？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T11:35:22.273

`cssClass`使用列定义上的属性将 CSS 类添加到列`columnDefinition.cssClass='myCellClass'`

要将特定的 CSS 类添加到某些行，请使用[此处](http://github.com/mleibman/SlickGrid/commit/26d525a136e74e0fd36f6d45f0d53d1ce2df40ed)指定的“rowClasses”选项。

有关详细信息，请参阅这两个 SO 问题中的答案：[如何在 SlickGrid 中向单元格添加类](https://stackoverflow.com/q/2742166/122005)以及[如何在 SlickGrid 中更改单元格的背景颜色？](https://stackoverflow.com/q/2746417/122005)

# c++ - 国外exe/dll或WTF的图片基地址？

> ID：12493743
> 
> 赞同：2
> 
> 时间：2012-09-19T11:23:45.300
> 
> 标签：c++, dll, exe, portable-executable, base-address

我有一个外部进程（exe 文件 DllProj.exe 正在运行），它有 SampleDll.dll 链接到它（隐式链接）。我可以借助我的函数 imageBase() 找到链接 dll 的基地址，但不能找到进程本身的基地址！有什么区别，为什么它不能按原样工作？

我的意思是，这段代码返回带有正确 DOS/NT-headers 的 pBase：

```
LPVOID pBase = imageBase("DllProj.exe", "SampleDll.dll");
if (!pBase) 
    return false;
PIMAGE_DOS_HEADER pDosHeader = PIMAGE_DOS_HEADER((HMODULE)pBase); 
if (::IsBadReadPtr(pDosHeader, sizeof(IMAGE_DOS_HEADER)) ||
    IMAGE_DOS_SIGNATURE != pDosHeader->e_magic)
    return false; 
```

但此代码返回为 FALSE：

```
LPVOID pBase = imageBase("DllProj.exe", "DllProj.exe");
//and so on... 
```

这是我的程序：

```
LPVOID imageBase(LPSTR szVictimProcess, LPSTR szVictim)
{
    //находим процесс szVictimProcess
    DWORD aProcesses[1024], cbNeeded, nProcesses;
    unsigned int i;

    if (!EnumProcesses(aProcesses, sizeof(aProcesses), &cbNeeded))
        return NULL;
    nProcesses = cbNeeded / sizeof(DWORD);

    HANDLE ProcHandle = 0;
    TCHAR szProcessName[MAX_PATH] = TEXT("<unknown>");
    for (i = 0; i < nProcesses; i++)
    {
        ProcHandle = OpenProcess(PROCESS_QUERY_INFORMATION | PROCESS_VM_READ, false, aProcesses[i]);

        if (NULL != ProcHandle) 
        {
            HMODULE hMod[1024];
            if ( EnumProcessModules(ProcHandle, hMod, sizeof(hMod), &cbNeeded) )
            {
                GetModuleBaseName(ProcHandle, hMod[0], szProcessName, sizeof(szProcessName)/sizeof(TCHAR)); // Get the process name
                if (0 == lstrcmpiA(szVictimProcess, szProcessName))
                {
                    //находим модуль szVictim
                    DWORD nModules = cbNeeded / sizeof(HMODULE);
                    char szModName[MAX_PATH];
                    for (unsigned int j = 0; j < nModules; j++)
                    {
                        if (GetModuleFileNameEx(ProcHandle, hMod[j], szModName, sizeof(szModName))) // Get the module name
                        {
                            shortName(szModName);
                            if (0 == lstrcmpiA(szModName, szVictim)) 
                            {
                                MODULEINFO info;
                                GetModuleInformation(ProcHandle, hMod[j], &info, sizeof(info));
                                return info.lpBaseOfDll;

                                //Equal To:
                                //return hMod[j];

                                //Debug:
                                //LPSTR string = new char[256];
                                //wsprintf(string,"\t%s (0x%08X)\n", szModName, hMod[j]);
                            }
                        }
                    }
                    break;
                }
            }
        }

        CloseHandle(ProcHandle);
    }

    return NULL; 
} 
```

PS：我的下一个目标是获取 DllProj.exe 的导入表（Sample.dll 所在的位置）和劫持 dll 的函数调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:28:00.247

如何使用这个：

```
#pragma comment( lib, "psapi" )

DWORD GetModuleBase(HANDLE hProc, string &sModuleName) 
{ 
   HMODULE *hModules; 
   char szBuf[50]; 
   DWORD cModules; 
   DWORD dwBase = -1; 
   //------ 

   EnumProcessModules(hProc, hModules, 0, &cModules); 
   hModules = new HMODULE[cModules/sizeof(HMODULE)]; 

   if(EnumProcessModules(hProc, hModules, cModules/sizeof(HMODULE), &cModules)) { 
      for(int i = 0; i < cModules/sizeof(HMODULE); i++) { 
         if(GetModuleBaseName(hProc, hModules[i], szBuf, sizeof(szBuf))) { 
            if(sModuleName.compare(szBuf) == 0) { 
               dwBase = (DWORD)hModules[i]; 
               break; 
            } 
         } 
      } 
   } 

   delete[] hModules; 

   return dwBase; 
} 
```

信用在[这里回答](https://stackoverflow.com/questions/10056641/getting-base-address-of-a-process)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-28T22:09:14.317

您的代码没有任何问题，我编译了您的代码，它工作正常并将正确的地址输出到控制台。确保以管理员身份运行。这是使用我测试过的代码的项目：

```
#include <windows.h>
#include <iostream>
#include <psapi.h>
#include <string>

void shortName(LPSTR strToChange)
{
    std::string path(strToChange);
    std::string filename;

    size_t pos = path.find_last_of("\\");
    if (pos != std::string::npos)
        filename.assign(path.begin() + pos + 1, path.end());
    else
        filename = path;

    lstrcpy(strToChange, filename.data());
}

LPVOID imageBase(LPSTR szVictimProcess, LPSTR szVictim)
{
    DWORD aProcesses[1024], cbNeeded, nProcesses;
    unsigned int i;

    if (!EnumProcesses(aProcesses, sizeof(aProcesses), &cbNeeded))
        return NULL;
    nProcesses = cbNeeded / sizeof(DWORD);

    HANDLE ProcHandle = 0;
    TCHAR szProcessName[MAX_PATH] = TEXT("<unknown>");
    for (i = 0; i < nProcesses; i++)
    {
        ProcHandle = OpenProcess(PROCESS_QUERY_INFORMATION | PROCESS_VM_READ, false, aProcesses[i]);

        if (NULL != ProcHandle)
        {
            HMODULE hMod[1024];
            if (EnumProcessModules(ProcHandle, hMod, sizeof(hMod), &cbNeeded))
            {
                GetModuleBaseName(ProcHandle, hMod[0], szProcessName, sizeof(szProcessName) / sizeof(TCHAR)); // Get the process name
                if (0 == lstrcmpiA(szVictimProcess, szProcessName))
                {
                    DWORD nModules = cbNeeded / sizeof(HMODULE);
                    char szModName[MAX_PATH];
                    for (unsigned int j = 0; j < nModules; j++)
                    {
                        if (GetModuleFileNameEx(ProcHandle, hMod[j], szModName, sizeof(szModName))) // Get the module name
                        {
                            shortName(szModName);
                            if (0 == lstrcmpiA(szModName, szVictim))
                            {
                                MODULEINFO info;
                                GetModuleInformation(ProcHandle, hMod[j], &info, sizeof(info));
                                return info.lpBaseOfDll;
                            }
                        }
                    }
                    break;
                }
            }
        }
        CloseHandle(ProcHandle);
    }
    return NULL;
}

int main(void)
{
    void* base = imageBase((char*)"ac_client.exe", (char*)"ac_client.exe");

    std::cout << "0x" << std::hex << base;
} 
```

# delphi - 如何更改 TeeChart 图例的双向模式？

> ID：12493746
> 
> 赞同：0
> 
> 时间：2012-09-19T11:23:52.820
> 
> 标签：delphi, bidirectional, teechart

是否可以简单地更改`BiDiMode`a`TChart`的传说？或者我必须手动绘制整个图例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:05:13.713

TeeChart中的BiDiMode应该是这样的吧？

```
 Chart1.BiDiMode:=bdRightToLeft; 
```

不过，这从未得到支持，因此我们将尝试在即将发布的版本中实现它。

# linux - 如何在 Ubuntu 上清除 RapidSVN 的设置？

> ID：12493750
> 
> 赞同：3
> 
> 时间：2012-09-19T11:24:06.343
> 
> 标签：linux, svn, ubuntu, rapidsvn

出于某种原因，每次我到达 RapidSVN 上的书签时，应用程序都会崩溃。它甚至没有向我显示错误。只是自己关闭。

我尝试通过 Synaptic 包管理器完全删除该应用程序，然后重新安装它，但它仍然有有问题的书签。

我的问题是：如何清除 RapidSVN 的应用设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:13:05.047

RapidSVN 的设置显然存储在主目录中。清除应用程序的配置文件就像运行以下命令一样简单：

```
rm -rf .RapidSVN 
```

此命令将重置您为 RapidSVN 所做的所有配置。我建议您在清除之前备份配置。

# iphone - 在从 Xcode 签出 svn 时出现错误“格式错误或方案或主机或路径丢失

> ID：12493755
> 
> 赞同：-1
> 
> 时间：2012-09-19T11:24:22.763
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, svn

我在我的 iPhone 项目中使用 svn 存储库，

我的问题是当我尝试检查项目时它给了我错误

**SVN : URL 'http://Presentation:81/svn/**

**'格式错误或缺少方案或主机或路径**

主机可通过上述 URL 访问。

我的 Xcode 版本是 4.1

请建议我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:27:04.303

svn 在那里做一些不同的事情。例如，当使用 https://.. 时，它有时会抱怨它无法验证证书，而 Safari 和 MacOS X 的其余部分完全可以做到这一点。原因是 svn 不使用 MacOS X 的根证书存储，因此不识别手动添加的证书，而只使用我相信的内置证书。

当您指定“Presentation”的主机名时，很可能 svn 不会将该名称自动完成为完全限定的域名。因此，请尝试使用全名。

其次，上面的错误字符串以 ' 开头显示的 URL，但不会以某种方式结束，这表明您可能错误地添加了太多引号，或者它可能只是一个复制和粘贴错误。

# javascript - XHR / 使用 D3 发布请求

> ID：12493758
> 
> 赞同：4
> 
> 时间：2012-09-19T11:24:36.907
> 
> 标签：javascript, xmlhttprequest, d3.js, data-visualization

我正在研究如何使用功能强大的[D3](https://github.com/mbostock/d3)发出 POST 请求（我可以完全推荐它用于数据可视化），并找到了D3 的作者目前正在处理 xhr POST 请求（和其他请求类型）的[xhr2 分支](https://github.com/mbostock/d3/tree/xhr2)支持。

似乎这是一个全新的功能，因为合并请求来自昨天（2012 年 9 月 18 日）:) 出于好奇，我已经想尝试一下，使用以下代码序列（我从这个[位置](https://github.com/mbostock/d3/pull/811#issuecomment-8661257)获得）

```
 d3.text("localhost/test",function(d) { console.log(d)})
         .method("POST")
         .setRequestHeader("Content-type", "application/x-www-form-urlencoded")
         .data("a=1&b=2&c=3"); 
```

不幸的是，我收到以下错误消息。

> TypeError: 'undefined' is not a function (evalating 'd3.text("localhost/test",function(d) { console.log(d)}) .method("POST")')

我正在使用 xhr2 分支中的[缩小 D3 版本](https://github.com/mbostock/d3/blob/xhr2/d3.v2.min.js)。有人知道要改变什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T16:25:18.700

API 仍在开发中。如果你想尝试一下，目前的 API 是这样的：

```
d3.text("/test")
    .header("Content-type", "application/x-www-form-urlencoded")
    .post("a=1&b=2&c=3", function(error, text) { console.log(text); }); 
```

如果您想要完整的请求对象而不仅仅是 responseText，您也可以直接使用 d3.xhr 而不是 d3.text。

**编辑：**更新到最新的 API。

# eclipse - Eclipse 相关项目未复制到 WTP 部署

> ID：12493763
> 
> 赞同：9
> 
> 时间：2012-09-19T11:24:56.203
> 
> 标签：eclipse, jakarta-ee, gradle, eclipse-wtp

在我们开始使用 Gradle 之前，Eclipse 中的多项目 (10-12) 开发工作通过 WTP 项目成功部署到了内部 Tomcat 7 服务器之一。我们发现这对开发非常有用。

随着 Gradle 的启动和运行，依赖项目的 jar 文件不再被复制到 ../WEB-INF/lib 目录。我不相信这与 gradle 有任何关系，因为它稍后完全不在图片中，但它是不同的，所以我提到它。构建独立的战争文件与“gradle jettyRun”一样完美。

如果我将项目方面“实用程序模块”添加到 Eclipse 中的依赖项目，那么它就可以工作。但是，我不记得最初是这样做过的。好的，这也确实使从 gradle 生成 eclipse 项目变得复杂！

我可以忍受它，但想知道是否有人知道它*是否*必须这样，或者是否有其他选择。

谢谢 - 版本：eclipse Indigo SR2、Java 1.7、Gradle 1.2

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T15:23:34.993

我也遇到过这个问题：依赖于其他项目的 Eclipse WTP 项目不会部署这些项目的依赖项，除非它们也是 WTP 项目。

这远不是一个理想的解决方案，但在我自己的构建脚本中，我通过使用`eclipse-wtp`插件而不是插件来解决这个问题`eclipse`：

```
allprojects {
    apply plugin: 'eclipse-wtp'
} 
```

有几个与此相关的错误：[GRADLE-1880](http://issues.gradle.org/browse/GRADLE-1880)和[STS-2192](https://issuetracker.springsource.com/browse/STS-2192)。

# java - JAR 文件不从 ext 加载类文件

> ID：12493764
> 
> 赞同：3
> 
> 时间：2012-09-19T11:25:03.120
> 
> 标签：java, jar, classpath

我在我的 Linux 系统上安装了 JDK 1.6，$JAVA _HOME 目录是`/usr/java/jdk1.6.0_07`. 我在 Eclipse 上构建了指向 $JAVA_HOME 的路径。它通过 Eclipse 顺利运行并从中加载所有第三方 JAR 文件`/usr/java/jdk1.6.0_07/jre/lib/ext/`，但是当我导出 JAR 文件并运行它时，它会抛出`ClassNotFoundExecption`.

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:29:01.607

1.  您是否正确安装了 Java？以下是安装[Java 7](http://www.if-not-true-then-false.com/2010/install-sun-oracle-java-jdk-jre-7-on-fedora-centos-red-hat-rhel/)或[Java 6的一些说明](http://www.if-not-true-then-false.com/2010/install-sun-oracle-java-jdk-jre-6-on-fedora-centos-red-hat-rhel/)
2.  您确定您使用的 Java 版本是正确的吗，因为 Linux 上可以有多个 Java 版本？尝试`java -version`在您运行它的终端上进行检查。
3.  您使用任何第三方库吗？如果是这样，您是否在运行 jar 文件或将它们捆绑到 jar 文件中时指定了类路径？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:34:11.853

返回什么`java -version`？您是否使用相同的 JRE 执行？

# mercurial - 推送完成后，xxx 似乎不是 hg 存储库

> ID：12493768
> 
> 赞同：1
> 
> 时间：2012-09-19T11:25:20.430
> 
> 标签：mercurial

就在几天前，当我推送到 hg 存储库时，推送完成后出现“xxx 似乎不是 hg 存储库”之类的内容。输出如下所示：

```
pushing to http://xxx/scm/hg/jewelry
searching for changes    
remote: adding changesets
remote: adding manifests
remote: adding file changes
remote: added 1 changesets with 1 changes to 1 files
abort: 'http://xxx/scm/hg/jewelry' does not appear to be an hg repository:
---%<--- (no content-type)

---%<---
! 
```

推送其实已经结束了，所以这也没什么大不了的，只是真的很烦人。那么有人遇到过这个吗？

顺便说一句，客户端的 hg 版本是 2.1，服务器是 2.3。但这似乎不是版本问题，因为它是几天前突然冒出来的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:12:54.647

我不确定，但看起来有人在服务器上安装了一个钩子，以便在推送后运行某些东西并且他们的钩子坏了？如果您添加`--debug`到推送中，您会看到任何额外的细节吗？最近有人添加了服务器端更改组挂钩的任何机会？也许“通知”发送电子邮件？

# haskell - GHC发生检查识别哪些情况？

> ID：12493773
> 
> 赞同：6
> 
> 时间：2012-09-19T11:25:47.063
> 
> 标签：haskell, ghc, typechecking

GHC 发生检查可防止您构造无限类型。它的目的是防止代码中的常见错误还是防止类型检查器无限循环，或两者兼而有之？

它识别了哪些情况，恶意用户是否有可能欺骗它（如在 Safe Haskell 上下文中）进入循环？如果类型系统是图灵完备的（是吗？）我不明白 GHC 如何保证计算会停止。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T13:43:18.833

将类型推断视为求解方程组。让我们看一个例子：

```
f x = (x,2) 
```

我们如何推断 的类型`f`？我们看到它是一个函数：

```
f :: a -> b 
```

此外，从 的结构中`f`我们可以看出，以下方程同时成立：

```
b = (c,d)
d = Int
c = a 
```

通过求解这个方程组，我们可以看到 的类型`f`是`a -> (a, Int)`。现在让我们看看下面的（错误的）函数：

```
f x = x : x 
```

的类型`(:)`是`a -> [a] -> [a]`，因此这会生成以下方程组（简化）：

```
a = a
a = [a] 
```

所以我们得到一个 equation `a = [a]`，从中我们可以得出结论，这个方程组没有解，因此代码不是很好的类型。如果我们不拒绝 equation `a = [a]`，我们确实会进入一个无限循环，将 equations `a = [a]`、`a = [[a]]`、`a = [[[a]]]`等添加到我们的系统中（或者，正如 Daniel 在他的回答中指出的那样，我们可以在我们的类型系统中允许无限类型，但这会使错误的程序，例如`f x = x : x`类型检查）。

你也可以在 ghci 中测试：

```
> let f x = x : x

<interactive>:2:15:
    Occurs check: cannot construct the infinite type: a0 = [a0]
    In the second argument of `(:)', namely `x'
    In the expression: x : x
    In an equation for `f': f x = x : x 
```

至于您的其他问题：GHC Haskell 的类型系统不是图灵完备的，并且类型检查器保证会停止 - 除非您启用[`UndecidableInstances`](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/type-class-extensions.html#undecidable-instances)，在这种情况下，它理论上可以进入无限循环。然而，GHC 通过具有固定深度的递归堆栈来确保终止，~~因此不可能构建一个它从不停止的程序~~（**编辑：**根据 CAMcCann 的评论，这毕竟是可能的 - 在允许在不增加堆栈深度的情况下循环的类型级别）。

然而，有可能使编译花费任意长的时间，因为 Hindley-Milner 类型推断的复杂性在最坏的情况下是指数级的（但不是平均！）：

```
dup x = (x,x)

bad = dup . dup . dup . dup . dup . dup . dup . dup
      . dup . dup . dup . dup . dup . dup . dup . dup
      . dup . dup . dup . dup . dup . dup . dup . dup
      . dup . dup . dup . dup . dup . dup . dup . dup 
```

Safe Haskell 不会保护您免受这种情况的影响 -如果您想允许潜在的恶意用户在您的系统上编译 Haskell 程序，请查看[mueval 。](http://hackage.haskell.org/package/mueval)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-19T14:04:50.607

> GHC 发生检查可防止您构造无限类型。

这仅在字面意义上是正确的，即防止*语法上*无限的类型。这里真正发生的只是一种*递归*类型，在某种意义上，统一算法需要内联递归。

总是可以通过显式递归来定义完全相同的类型。这甚至可以通用地完成，使用类型级别的版本`fix`：

```
newtype Fix f = Fix (f (Fix f)) 
```

例如，类型`Fix ((->) a)`等同于与`b`统一`(a -> b)`。

然而，在实践中，“无限类型”错误几乎总是表明代码中有错误（所以如果它坏了，你可能不应该这样`Fix`做）。通常的情况是混淆了参数顺序，或者在不使用显式类型签名的代码中将表达式放在错误的位置。

以正确方式极其幼稚的类型推断系统可能会扩展递归，直到内存不足，但不会出现停止问题——如果类型需要与自身的一部分统一，那永远不会发生工作（至少在 Haskell 中，可能有一些语言将其视为等同于`newtype`上面的显式递归）。

除非您启用，否则 GHC 中的类型检查和类型推断都不是图灵完备的`UndecidableInstances`，在这种情况下，您可以通过函数依赖项或类型族进行任意计算。

Safe Haskell 并没有真正参与进来。`UndecidableInstances`很容易生成非常大的推断类型，尽管它是有限的，但会耗尽系统内存，如果内存为我服务，Safe Haskell无论如何都不会限制使用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-19T13:36:21.663

我的书签中有以下精彩邮件：[无限类型没有错！](http://article.gmane.org/gmane.comp.lang.haskell.cafe/17105)即使有无限类型，也没有使类型检查器循环的真正危险。类型系统不是图灵完备的（除非您明确要求它与`UndecidableInstances`扩展类似）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-19T14:58:36.117

目的（在 Haskell 编译器中）是为了防止代码中的常见错误。可以构建一个类型检查器和推理引擎来支持类型的无限递归。[这个问题](https://stackoverflow.com/questions/8963376/why-dont-type-synonyms-permit-recursion-in-haskell)有一些进一步的信息。

OCaml 使用 实现递归类型`-rectypes`，所以这绝对是可能的。OCaml 社区将更加精通出现的一些问题（默认情况下该行为是关闭的）。

发生检查识别无限类型扩展。例如，这段代码：

```
Prelude> let a = [a]
<interactive>:2:10:
    Occurs check: cannot construct the infinite type: t0 = [t0]
    In the expression: a
    In the expression: [a]
    In an equation for `a': a = [a] 
```

如果您尝试手动计算类型，则类型为`[ [ [ [ ... ] ] ] ]`. 手动编写这样的类型是不可能的，因为它们是无限的。

发生检查发生在类型推断期间，这是与类型检查分开的阶段。必须推断无限类型，因为它们不能手动注释。Haskell-98 类型推断是[可判定](http://en.wikipedia.org/wiki/Decidability_%28logic%29)的，因此不可能欺骗编译器进入循环（当然排除错误，我怀疑[这个示例](https://codegolf.stackexchange.com/questions/7197/crash-your-favorite-compiler)利用了这些错误）。GHC 默认使用 System F 的受限子集，其类型推断也是可判定的。对于某些扩展，例如`RankNTypes`，GHC 确实允许类型推断无法确定的代码，但随后需要类型注释，因此再次没有类型推断阶段循环的危险。

由于图灵完备的语言是不可判定的，所以默认类型系统不可能是图灵完备的。我不知道 GHC 的类型系统是否在启用某些扩展组合的情况下成为图灵完备的，但某些扩展（例如`UndecidableInstances`）允许编写会因堆栈溢出而使编译器崩溃的代码。

顺便说一句，禁用发生检查的主要问题是许多常见的编码错误会导致无限的类型错误，因此禁用它通常会导致比它解决的问题更多的问题。如果您确实打算使用无限类型，则 newtype 包装器将允许它，而无需过多的符号。

# mysql - MySQL - 在选择中使用条件

> ID：12493777
> 
> 赞同：1
> 
> 时间：2012-09-19T11:26:04.707
> 
> 标签：mysql, select, parameters, conditional-statements

我有 3 张桌子：

*   订单：
    *   订单编号
    *   购买日期
    *   ...
*   订单产品：
    *   orders_products_id
    *   订单编号
    *   products_id
    *   产品名称
    *   产品数量
    *   ...
*   产品仓库：
    *   products_id
    *   仓库id
    *   product_quantity_in_warehouse

现在我想要一个包含以下信息的表格：

*   当前的日期
*   products_id
*   产品名称
*   仓库id
*   current_quantity_in_warehouse
*   昨天卖了

到目前为止，我有以下内容：

```
SELECT DISTINCT  CURRENT_DATE AS `date`
                 orpr.products_id AS products_id
                 orpr.products_name AS products_name
                 pwq.warehouses_id AS warehouses_id
                 pwq.products_quantity AS current_quantity_in_warehouse
                 (  SELECT SUM(orpr.products_quantity)
                    FROM `products_warehouses` wpq
                    INNER JOIN `orders_products` orpr ON pwq.products_id = orpr.products_id
                    INNER JOIN `orders` or ON orpr.orders_id = or.orders_id
                    WHERE pwq.products_id = ??
                    AND   pwq.warehouses_id = ?? ) AS sold_yeserday
FROM             `orders_products` orpr
INNER JOIN       `orders` or ON orpr.orders_id = or.orders_id
INNER JOIN       `products_warehouses pwq ON pwq.products_id = orpr.products_id; 
```

我想要的是 ?? 的 products_id 和 warehouses_id 与结果的每一行类似。

如果有人有一个更简单的例子来说明如何在选择中使用选择（内部选择使用其中的选择条件ID，当然这会改变每一行），只要我能重现示例以解决我的问题。

提前致谢，

格雷茨，凯文 C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:44:22.497

```
SELECT
    CURRENT_DATE AS `date`,
    orpr.products_id AS products_id,
    orpr.products_name AS products_name,
    pwq.warehouses_id AS warehouses_id,
    pwq.products_quantity AS current_quantity_in_warehouse,
    SUM(orpr.products_quantity) AS sold_yeserday
FROM             
    orders_products orpr
    INNER JOIN       
    products_warehouses pwq ON pwq.products_id = orpr.products_id;
group by orpr.products_id, pwq.warehouses_id
order by orpr.products_id, pwq.warehouses_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:38:04.547

您应该提取内部 SELECT 语句并将结果放入表中，您可以在外部选择中加入该表

```
SELECT SUM(orpr.products_quantity) As 'Sold_yesterday', pwd.products_id, pwd.warehouses_id
INTO #tempTable
FROM `products_warehouses` wpq
INNER JOIN `orders_products` orpr ON pwq.products_id = orpr.products_id
INNER JOIN `orders` or ON orpr.orders_id = or.orders_id

SELECT DISTINCT  CURRENT_DATE AS `date`
orpr.products_id AS products_id
orpr.products_name AS products_name
pwq.warehouses_id AS warehouses_id
pwq.products_quantity AS current_quantity_in_warehouse                
FROM             `orders_products` orpr
INNER JOIN       `orders` or ON orpr.orders_id = or.orders_id
INNER JOIN       `products_warehouses pwq ON pwq.products_id = orpr.products_id;
INNER JOIN       '#tempTable' tt On tt.products_id = pwd.products_id AND tt.warehouses_id = pwd.warehouses_id 
```

# spring - 如何使用 Spring MVC 和 JPA 将表单输入插入到多个表中？

> ID：12493780
> 
> 赞同：0
> 
> 时间：2012-09-19T11:26:48.590
> 
> 标签：spring, hibernate, jpa, spring-mvc

我必须插入产品详细信息。我有多个从表生成的 bean 类，但所有字段都在一个 html 表单中。如何将这些表单元素映射到不同的 bean 类，以及如何在控制器中获取这些表单元素？

我的 Bean 课程是

```
Category
    private Long id;
    private String description;
    private String name;

ProductAttribute 
    private String description;
    private String name;

CategoryAttributeMapping
    private Category category;
    private ProductAttribute productAttribute ; 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:32:32.057

您可以制作某种具有所有这些字段的代理对象，将 HTML 表单中的路径映射到该对象，并在某些服务层中，您可以将其分解为这 3 个实体类并将它们保存在数据库中。

附带说明（如果您使用的是 Hibernate），您所拥有的是 @ManyToMany（我想）映射。您不需要创建第 3 个类来映射这 2 个实体。

# php - Mysql查询匹配多个可能的字符

> ID：12493782
> 
> 赞同：1
> 
> 时间：2012-09-19T11:26:54.097
> 
> 标签：php, mysql, search, sql-like

我有以下查询

```
SELECT * 
FROM  `articles` 
WHERE (
        (
        UCASE(  `title` ) LIKE UCASE(  '% Fishoil %' ) 
        AND UCASE(  `title` ) LIKE UCASE(  '% for %' ) 
        AND UCASE(  `title` ) LIKE UCASE(  '% more %' ) 
        AND UCASE(  `title` ) LIKE UCASE(  '% musclemass %' )
        )
    OR (
        UCASE(  `text` ) LIKE UCASE(  '% Fishoil %' ) 
        AND UCASE(  `text` ) LIKE UCASE(  '% for %' ) 
        AND UCASE(  `text` ) LIKE UCASE(  '% more %' ) 
        AND UCASE(  `text` ) LIKE UCASE(  '% musclemass %' )
        )
    OR (
        UCASE(  `source` ) LIKE UCASE(  '% Fishoil %' ) 
        AND UCASE(  `source` ) LIKE UCASE(  '% for %' ) 
        AND UCASE(  `source` ) LIKE UCASE(  '% more %' ) 
        AND UCASE(  `source` ) LIKE UCASE(  '% musclemass %' )
        )
    OR (
        UCASE(  `unique` ) LIKE UCASE(  '% Fishoil %' ) 
        AND UCASE(  `unique` ) LIKE UCASE(  '% for %' ) 
        AND UCASE(  `unique` ) LIKE UCASE(  '% more %' ) 
        AND UCASE(  `unique` ) LIKE UCASE(  '% musclemass %' )
        )
    )
ORDER BY  `year` DESC 
```

我想做的是改变

```
UCASE(  `tile` ) LIKE UCASE(  '% Fishoil %' ) 
```

进入

```
 UCASE(  `title` ) LIKE UCASE(  '%Fishoil %' ) 
OR 
    UCASE(  `title` ) LIKE UCASE(  '%Fishoil,%' ) 
OR 
    UCASE(  `title` ) LIKE UCASE(  '%Fishoil.%' ) 
OR 
    UCASE(  `title` ) LIKE UCASE(  '%Fishoil:%' ) 
OR 
    UCASE(  `title` ) LIKE UCASE(  '%Fishoil;%' ) 
OR 
    UCASE(  `title` ) LIKE UCASE(  '%Fishoil\'%' ) 
OR 
    UCASE(  `title` ) LIKE UCASE(  '%Fishoil"%' ) 
OR 
    UCASE(  `title` ) LIKE UCASE(  '%Fishoil!%' ) 
OR 
    UCASE(  `title` ) LIKE UCASE(  '%Fishoil?%' ) 
```

但在我看来，这似乎使查询变得异常复杂，因为它必须进行多次匹配。是否有一种正则表达式匹配可以一次性匹配“搜索词+特殊字符”？

如果是这样，与它匹配的最佳方法是什么？

这是生成关键字搜索字符串的 php 代码

```
$specialchars = array(' ',',','.',':',';',mysql_real_escape_string("'"),'"','!','?');
foreach($seek as $searchword)
    {
    foreach($specialchars as $char)
        {
        $seeker[] = "LIKE UCASE(  '%$searchword".$char."%' )";
        }
    $temp = implode(" OR ",$seeker);
    echo $temp;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:34:04.907

我建议你使用[正则表达式](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)，因为它们比通配符`LIKE`语法强大得多。通过使用正则表达式，您可以将整组条件放入一个`REGEXP`调用（每列）中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:35:39.287

不要为每个字符添加 or 子句，而是使用下划线 ( `_`)。这就像一个通配符，除了一件事：它是单个字符的占位符：

```
SELECT * FROM foo WHERE bar LIKE 'visolie_'; 
```

匹配 visolie!、visolie:、visolie? 和 - 因为 like 也是*不区分大小写*的 ViSOliE!。

*编辑：*

出于所有意图和目的：有许多优秀的搜索引擎是由*非常*聪明的人编写的，并且仍在由一群有能力的程序员进一步开发。尝试创建自己的 SE 可能是一个很好的练习，但当它真正归结为它时，只需使用[CSE](http://www.google.com/cse/)。
他们已经为您完成了艰苦的工作，作为开发人员意味着以一种聪明的方式偷懒。开源软件以及网络的全部意义在于避免不断重复发明轮子的必要性。

如果您*绝对*想构建自己的 SE，PHP&MySQL 是经过验证的技术，但可能不是完成这项工作的最佳工具。尝试寻找更快的数据库（NoSQL？）替代品（MongoDB 会浮现在脑海中，只要您不经常更新数据，它的速度非常快。再次：选择一个意味着失去另一个，您的数据并不安全存储...）。
PHP 相当快，但与 C++ 相比，它占用了大量资源。我不确定我是否做对了，但我准备赌一大笔钱，说 SE 就像谷歌，雅虎！甚至糟糕的旧 Bing 在某处也有相当庞大的 C(++) 代码库。迄今为止，没有任何脚本语言可以超越它，（而且 IMO 永远不会有脚本语言可以）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:43:29.743

[**FULLTEXT**](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)可能值得一看[](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

 **你可以做这样的事情；

```
SELECT *, MATCH(title,text,source,unique) AGAINST('fishoil for more musclemass') AS `score` FROM `articles` WHERE MATCH(title,text,source,unique) AGAINST('fishoil for more musclemass') ORDER BY `score` DESC, `year` DESC 
```

whcih 将首先返回最相关的结果。

您也必须更改您的 SQL 表；

```
ALTER TABLE articles ADD FULLTEXT(title,text,source,unique); 
```

希望这可以帮助**

# objective-c - #define 宏重新定义

> ID：12493783
> 
> 赞同：0
> 
> 时间：2012-09-19T11:27:02.693
> 
> 标签：objective-c, cocos2d-iphone, c-preprocessor

你能帮我避免这个警告吗：**'kFontFromFontSize'宏重新定义**

在 Gameconfig.h

```
#ifndef __GAME_CONFIG_H
#define __GAME_CONFIG_H

//
// Supported Autorotations:
//      None,
//      UIViewController,
//      CCDirector
//
#define kFontFromiPaoneToiPad 2.1

#define kFontFromFontSize 2*kFontFromiPaoneToiPad 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:31:40.543

当我使用 Visual Studio 进行测试时，您的定义似乎工作正常。你确定你没有在其他地方定义这些吗？也许您的编译器会以不同的方式对待它。在这种情况下，您可以改用 const 全局变量：

```
const float kFontFromiPaoneToiPad = 2.1;
const float kFontFromFontSize = 2 * kFontFromiPaoneToiPad; 
```

顺便说一句，在#define 中在复合表达式周围使用括号被认为是一种很好的做法，以避免在代码中替换它时出现任何潜在问题。

# c# - WPF 简单表格布局

> ID：12493784
> 
> 赞同：3
> 
> 时间：2012-09-19T11:27:02.100
> 
> 标签：c#, .net, wpf, caliburn.micro

我正在寻找为我正在处理的 WPF 项目创建一个简单的布局。![表格布局](../Images/e2183aacc8d926a0f340d262ee43a8ce.png)

我尝试设置 Datagrid 和 GridView 的样式，但它们都不能按我的意愿工作，而且我不希望项目是可编辑/可选择的，也不希望对列进行排序或类似的东西。基本上我只想要一个没有花里胡哨的简单动态表格布局。

任何关于如何重新创建它的建议将不胜感激。

更新：我需要基于 ObservableCollection 动态的行数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:22:06.730

使用 HeaderedItemsControl、XAML

```
 <!-- templates -->

    <DataTemplate x:Key="itemWithDeleteButton">
        <Grid Width="Auto">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="100"/>
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Column="0" Text="{Binding Path=DocumentName, Mode=OneWay}" />
            <Button Grid.Column="1" Command="{Binding DeleteCommand}"/>
        </Grid>
    </DataTemplate>

    <Style TargetType="{x:Type HeaderedItemsControl}" x:Key="DeletedGrid">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type HeaderedItemsControl}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="100"/>                              
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="4*"/>
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Column="0" Grid.Row="0" Text="Document Name" 
                                   VerticalAlignment="Center"
                                   FontWeight="Bold"/>
                        <TextBlock Grid.Column="1" Grid.Row="0" Text="Actions"
                                   VerticalAlignment="Center"
                                   FontWeight="Bold"/>
                        <Grid Grid.Row="1" Grid.ColumnSpan="2" Width="Auto" Height="Auto" Background="White">
                            <ItemsPresenter/>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>

    <!-- control -->

    <HeaderedItemsControl Style="{StaticResource DeletedGrid}" Margin="0,0,0,10" 
                                  Grid.Row="4" Grid.ColumnSpan="2" ItemTemplate="{StaticResource itemWithDeleteButton}"                                      
                                  ItemsSource="{Binding GridData}"> 
```

视图模型

```
 public class GridItem
    {
      public string DocumentName { get; set; }
      public ICommand DeleteCommand { get; set; }
    }

    public class MyViewModel
    {
      public ObservableCollection<GridItem> GridData { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:22:14.743

这只是类似的事情。对于第二列，您可能会使用一个删除按钮，或者可能只是在 TextBlock 上单击事件。要获得准确的格式需要进行一些调整。

```
<ListView.View>
                        <GridView AllowsColumnReorder="False" x:Name="gvCurDocFields">
                            <GridViewColumn Width="120">
                                <GridViewColumnHeader Content="Field" />   
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" Text="{Binding Path=FieldDefApplied.FieldDef.DispName, Mode=OneWay}"  />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn>
                                <GridViewColumnHeader Content="Value" />
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock TextAlignment="Left" Margin="0" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" Text="{Binding Path=DispValue, Mode=OneWay}" />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                        </GridView>
                    </ListView.View> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:32:13.193

您可以为此使用网格布局：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="32" /> <!-- Header row -->
        <RowDefinition Height="Auto" /> <!-- One for each row of data -->
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" /> <!-- Document Name column -->
        <ColumnDefinition Width="200" /> <!-- Actions column -->
    </Grid.ColumnDefinitions>
</Grid> 
```

# apache-camel - Apache Camel - 解析来自 http 端点的响应的问题

> ID：12493794
> 
> 赞同：0
> 
> 时间：2012-09-19T11:27:47.637
> 
> 标签：apache-camel

我有一个由 http 请求（POST，servlet 端点）触发的路由，使用速度将数据转换为 SOAP Web 服务请求，然后使用 http 将其发布到 Web 服务。然后我试图从中解析响应，但我在响应中得到二进制数据。但是 SOAPUI 显示正确的数据。

想法？

```
from("servlet:///cancelCode?servletName=CamelServlet")
.to("velocity:classpath:cancelCode.vm")
.setHeader(Exchange.HTTP_METHOD, constant("POST"))
.to(inteleOrderServiceEndpoint) 
```

控制台中的响应：

```
2012-09-19 13:22:11 DEBUG [header:] << "HTTP/1.1 200 OK[\r][\n]"
2012-09-19 13:22:11 DEBUG [header:] << "HTTP/1.1 200 OK[\r][\n]"
2012-09-19 13:22:11 DEBUG [header:] << "Content-Type: text/xml; charset=utf-8[\r][\n]"
2012-09-19 13:22:11 DEBUG [header:] << "Content-Encoding: gzip[\r][\n]"
2012-09-19 13:22:11 DEBUG [header:] << "Transfer-Encoding: chunked[\r][\n]"
2012-09-19 13:22:11 DEBUG [header:] << "Server: Jetty(6.1.x)[\r][\n]"
2012-09-19 13:22:11 DEBUG [header:] << "[\r][\n]"
2012-09-19 13:22:11 DEBUG [content:] << "1"
2012-09-19 13:22:11 DEBUG [content:] << "0"
2012-09-19 13:22:11 DEBUG [content:] << "0"
2012-09-19 13:22:11 DEBUG [content:] << "[\r]"
2012-09-19 13:22:11 DEBUG [content:] << "[\n]"
2012-09-19 13:22:11 DEBUG [content:] << "[0x1f][0x8b][0x8][0x0][0x0][0x0][0x0][0x0][0x0][0x0][0x8d][0x92]]j[0xc3]0[0x10][0x84][0xdf]{[\n]"
2012-09-19 13:22:11 DEBUG [content:] << "[0xe3][0x3]hq[0xff]k\A[0xeb][0x98][0xb6][0x10][0xf2][0x90][0x1b][0xa8][0xf2][0xd2][0x14]$[0xad][0xd1][0xca][0xa1][0xb9]}[0xe5]Dn[0xed]bJ[0xde][0xa4][0x99][0xf9][0x16][0xcd][0xa2][0x8a]Iu[0xe8][0xf6]e[0xe3][0xf6]h[0xa8][0xc3][0xec][0xcb][0x1a][0xc7]e[0x92][0x1f][0xf3]][0x8]][0x9][0xc0]z[0x87]V[0xb1][0x88][0xee]`[0x9][0xf2][0x1f]0[0x1c][0x0][0x13][0x7]y"[0xb5]r?[0x14][0xb6]Z8[0xc][0x9a][0xac][0x8]h[0xd0][0x91][0x17][0x8e] &4[0x1a]M-z[0xe4][0x8e][0x1c][0xe3][0x84]-[0xce][0x86]9[0xa8][0xd0]s./[0xb2],[0xab][0xc6][0x1a][0xaf][0xa8][0xe2]X[0x98][0x8b][0xcf][0xd4][0x1e][0x8e][0xca] [0xc6][0x1][0xe5]iH[0x1d][0x87]l[0xd3][0xb][0xb6]Da[0x8c],[0xa6]z3[0xf5]S[0xa4](u[0xcf][0x81],[0xfa][0xb7][0x95]|[0xa1][0x83]jU[0x5][0xf5][0x5][0x8a][0xd1]*[0xb3][0xe9][0xed];zY\^][0xdf][0xdc][0xde][0xdd]?$tf.[0xc1][0xc7][0xde][0xb2]~[0xda][0xd4][0xcd]z[0xdd][0xac]F[0xec]$O:[0xc0]%[0x16][0xdc][0xf9]"*[0x98][0xaf][0xef][0xf7]>~[0x15][0xf9][\r][0xd4][0xe9][0x80][0xdd]=[0x2][0x0][0x0]"
2012-09-19 13:22:11 DEBUG [content:] << "[\r]"
2012-09-19 13:22:11 DEBUG [content:] << "[\n]"
2012-09-19 13:22:11 DEBUG [content:] << "0"
2012-09-19 13:22:11 DEBUG [content:] << "[\r]"
2012-09-19 13:22:11 DEBUG [content:] << "[\n]"
2012-09-19 13:22:11 DEBUG [content:] << "[\r]"
2012-09-19 13:22:11 DEBUG [content:] << "[\n]"
2012-09-19 13:22:11 DEBUG [header:] << "[\r][\n]" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:55:08.667

内容是 gzip 编码的（例如压缩），因此它显示为二进制数据。

您可以解压缩它以将数据解析为纯可读文本。或者当你调用远程http服务器时，你可以告诉http服务器你*不*支持gzip，远程服务器应该尊重并发回纯文本数据。

# php - 复选框在 php 中显示为动态

> ID：12493795
> 
> 赞同：1
> 
> 时间：2012-09-19T11:27:52.537
> 
> 标签：php, html

这是我的一段代码：

```
$a=mysql_query("SELECT denumire_intrebare,denumire_varianta,tip_intrebare 
                FROM intrebari,variante 
                WHERE intrebari.cod_chestionar='".$_SESSION['cod']."' 
                AND intrebari.cod_intrebare=variante.cod_intrebare");

while($b=mysql_fetch_array($a))    
if($b['tip_intrebare']==3)    
{    
echo $b['denumire_intrebare'];
echo "<br>";
echo "<input type='checkbox' name='option1' value='Milk'>";
echo $b['denumire_varianta'];
echo "<br>";
} 
```

所以让我解释一下。我查询数据库，它给我带来了一个问题和与之相关的答案。我希望答案将它们作为复选框答案。问题是我的问题正在重复所有答案。因此，如果我有 5 个答案，那么问题会像这样出现 5 次：问题 answer1，问题 answer2，...。我希望我的问题只出现一次，并带有问题下的答案。我错过了一些东西，但我不知道是什么。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:31:51.190

用 all 制作一个数组`$b['denumire_varianta']`并在 while 完成后使用 a `foreach()`，还制作你的 checkboxes 数组，以便以后可以获取它们：

```
$variante = array();
while($b=mysql_fetch_array($a)) {
    if($b['tip_intrebare']==3){
        $intrebare = $b['denumire_intrebare'];
        $variante[] = $b['denumire_varianta'];
    }
}
echo $intrebare."<br />";
foreach($variante as $varianta){
    echo "<input type='checkbox' name='option[]' value='".$varianta."'>";
    echo $varianta."<br />";
} 
```

# javascript - Jetty Maven 插件：使用扫描

> ID：12493798
> 
> 赞同：0
> 
> 时间：2012-09-19T11:28:01.023
> 
> 标签：javascript, maven, maven-jetty-plugin

我在 Netbeans 中有一个 JavaScript 项目，文件结构如下：

src/main/javascript

src/main/resources（包含我的 index.html）

src/main/webapp

进行 mvn 构建时，目标文件夹包含我的“项目”文件夹以及我的 index.html 和 javascript 文件。

当我在 src 文件夹中编辑 JavaScript 文件或 index.html 时，我希望码头能够识别这一点（我认为这是码头扫描仪的想法）。但这种情况并非如此。

这是我在 POM 中的码头插件配置：

```
<plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>7.4.2.v20110526</version>
            <configuration>
                <scanTargets>
                    <scanTarget>${basedir}/src/main/resources/</scanTarget>
                    <scanTarget>${basedir}/src/main/javascript/</scanTarget>
                </scanTargets>
                <scanIntervalSeconds>10</scanIntervalSeconds>
                <stopKey>foo</stopKey>
                <stopPort>9999</stopPort>
                <classesDirectory>${project.build.directory}/project/</classesDirectory>
                <webAppConfig>
                    <contextPath>/</contextPath>
                    <resourceBases>
                        <resourceBase>${project.build.directory}/project/</resourceBase>
                        <resourceBase>${project.build.directory}/project/</resourceBase>
                    </resourceBases>
                </webAppConfig>
            </configuration>
        </plugin> 
```

有人可以告诉我为什么没有“扫描”更改吗？

# c - C 中的 Crypto++ 等价物

> ID：12493808
> 
> 赞同：2
> 
> 时间：2012-09-19T11:28:35.507
> 
> 标签：c, cryptography, crypto++

是否有任何等效于加密原语的开源 ANSI-C 库。我知道 C++ 的 Crypto++，但找不到 C 的任何东西

大多数情况下我需要 SHA-1、SHA-2、AES、RSA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T11:32:09.357

[PolarSSL](http://polarssl.org)似乎有相当好的覆盖范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T12:29:02.173

您可以使用 OpenSSL。对于您的目的，它可能有点过大，但它确实包含您的原语。它既被大量使用，又得到维护。

# matplotlib - Matplotlib 中对数轴上的小刻度

> ID：12493809
> 
> 赞同：3
> 
> 时间：2012-09-19T11:28:37.613
> 
> 标签：matplotlib

我有一个带有对数 x 轴和 y 轴的散点图（因为我主要对两者的较低值感兴趣）。

但是，我希望刻度标签采用十进制格式，而不是 10^x。

我正在使用这个：

```
# axis limits:
ax.set_xlim(xmin=0, xmax = 1.2)
ax.set_ylim(ymin=0,ymax=1000)

# log scales:
ax.set_yscale('log')
ax.set_xscale('log')

# set y-ticks:
ax.set_yticks((1,10,100,1000))
ax.set_yticklabels(("1","10","100","1000")) 
```

这有效（尽管引入`ax.set_yscale('log')`或`ax.set_xscale('log')`提出了以下警告（知道这是怎么回事吗？）：

```
Warning (from warnings module):
  File "C:\Python27\lib\site-packages\numpy\ma\core.py", line 3785
warnings.warn("Warning: converting a masked element to nan.")
UserWarning: Warning: converting a masked element to nan. 
```

但是当我对 x 轴尝试相同的操作时，我得到一个 MaskError：

```
# set x-ticks:
ax.set_xticks((0, 0.2, 0.4, 0.8, 1))
ax.set_xticklabels(("0", "0.2", "0.4", "0.8", "1"))

[snip long long traceback]
File "C:\Python27\lib\site-packages\numpy\ma\core.py", line 3795, in __int__
  raise MaskError, 'Cannot convert masked element to a Python int.'
MaskError: Cannot convert masked element to a Python int. 
```

我认为这与次要与主要刻度有关。我曾尝试使用ticker，但最后总是遇到相同的错误。

我将非常感谢任何帮助！

**回答后编辑：** 问题通过替换解决

```
ax.set_yticks((1,10,100,1000))
ax.set_yticklabels(("1","10","100","1000"))
ax.set_xticks((0, 0.2, 0.4, 0.8, 1))
ax.set_xticklabels(("0", "0.2", "0.4", "0.8", "1")) 
```

和

```
ax.yaxis.set_major_formatter(FormatStrFormatter('%1.0f'))
ax.xaxis.set_major_formatter(FormatStrFormatter('%.1f'))
ax.xaxis.set_minor_formatter(FormatStrFormatter('%.1f')) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T12:46:10.973

您可以`ticker`用作：

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.ticker import FormatStrFormatter

fig = plt.figure(1, [5,4])
ax = fig.add_subplot(111)

ax.plot( range(1,100) , range(1,100) ,  color='#aaaaff')
ax.set_xscale('log')
ax.xaxis.set_major_formatter(FormatStrFormatter('%.03f'))
plt.show() 
```

![在此处输入图像描述](../Images/d3c0dff1dca058f537968555875c3ea9.png)

# eclipse - Maven Webapp 项目在构建期间无法识别自定义规则集

> ID：12493812
> 
> 赞同：2
> 
> 时间：2012-09-19T11:29:01.320
> 
> 标签：eclipse, maven, pmd

我在 Eclipse 中有一个 Maven WebApp 项目（只是一个 HelloWorld Servlet）并正在运行 tomcat 服务器。如果代码包含 out.print 语句，我的最终目标是使构建失败。我在 pom.xml 中定义了 maven pmd 插件 2.5，如下所示，并在名为 sop.xml 的文件中定义了一个自定义规则集，如下所示。

但是当我右键单击项目 -> 运行方式 -> Maven 构建并尝试打包它时，构建成功并创建了war文件。我希望构建失败，因为 .java 代码包含 out.print 语句。

我是 Maven 的新手，并在这方面请求您的所有帮助。谢谢。

## 规则集文件（sop.xml）：

```
<?xml version="1.0"?>
<ruleset name="Custom ruleset" xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0
http://pmd.sourceforge.net/ruleset_2_0_0.xsd"
xsi:noNamespaceSchemaLocation="http://pmd.sourceforge.net/ruleset_2_0_0.xsd">
<description>This ruleset checks my code for println statements</description>
<rule ref="rulesets/JavaLogging.xml" message="Must handle exceptions">
</rule>
</ruleset> 
```

## POM.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0"                          
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>MavenWebGroupId</groupId>
<artifactId>MavenWebArtifactId</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>
<name>MavenWebName</name>
<description>MavenWebDescription</description>
<build>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.5</source>
                <target>1.5</target>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-pmd-plugin</artifactId>
            <version>2.5</version>
            <configuration>
                <skip>false</skip>
                <targetJdk>${compile.source}</targetJdk>
                <rulesets>
                    <!-- Custom local file system rule set -->
                    <ruleset>c:\rulesets\sop.xml</ruleset>
                </rulesets>
                <linkXref>true</linkXref>
                <failOnViolation>true</failOnViolation>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>${project.groupId}</groupId>
                    <artifactId>build</artifactId>
                    <version>${project.version}</version>
                </dependency>
            </dependencies>
        </plugin>

        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.0</version>
        </plugin>
    </plugins>
</build>
<dependencies>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.5.6</version>
    </dependency>
</dependencies>
    </project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:50:36.063

看起来`maven-pmd-plugin`在打包过程中没有执行。要在打包期间调用此插件，请将其定义如下：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-pmd-plugin</artifactId>
    <version>2.5</version>
    <configuration>
     ...
    </configuration>
    <dependencies>
    ...
    </dependencies>
    <executions>
        <execution>
            <id>run-pmd</id>
            <phase>prepare-package</phase>
            <goals>
                 <goal>check</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

注意`<executions>`标记。

# android - 如何传递 ArrayList 到另一个应用程序中的活动？

> ID：12493818
> 
> 赞同：3
> 
> 时间：2012-09-19T11:29:20.697
> 
> 标签：android, share

我正在尝试在两个应用程序之间共享数据..首先我想将文件保存到 SD 卡然后读取它..但是这个解决方案不起作用..所以如果有办法发送`ArrayList`一个`Object`实现`Parcelable`..

还有什么其他方法可以实现这一目标？

**注意：**
活动不在同一个应用程序中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T13:05:50.367

`ArrayList`是一个`Serializable`类，`Intent`因此只要您的自定义对象也是`Serializable`. 它看起来像：

```
Intent intent = new Intent(YourActivity.this, YourReceiverActivity.class);
intent.putExtra("YourArrayList", new ArrayList<YourSerializableObject>());
startActivity(intent); 
```

然后检索它：

```
Intent intent = getIntent();
ArrayList<YourSerializableObject> list = 
    (ArrayList<YourSerializableObject>)intent.getSerializableExtra("YourArrayList"); 
```

对于要成为的对象`Serializable`，所有包含的成员也必须是`Serializable`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:42:51.383

您可以使用带有静态成员类型 ArrayList<CustomObject> 的静态类（例如称为 DataChannel），然后使用静态 get/set 在活动之间传递对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-17T22:42:33.857

我不确定为什么没有人提到这一点，但你最好的选择是 BY FAR SQLite。它比任何传递的对象都高效得多，因为相比之下它不会占用任何内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T11:40:17.560

您可以使用以下方法将对象数组作为额外内容存储在 Intent 中：

```
public Intent putExtra (String name, Parcelable[] value) 
```

您必须配置您的其他应用程序以接收您的自定义 URI 的 Intent。

# php - 在mysql中将camelcase表和列名转换为snake case

> ID：12493821
> 
> 赞同：0
> 
> 时间：2012-09-19T11:29:37.810
> 
> 标签：php, mysql, ruby-on-rails

我尝试了谷歌搜索和stackoverflowing，但找不到答案，所以我想我会发布一个。

目前我继承了一个遗留系统（PHP/MySQL），其中表名和列名以驼峰形式定义（即tableName、columnName）。我想将此系统迁移到 RoR，并希望将 MySQL 表也转换为蛇案例（即 table_name、column_name）。

我怎样才能有效地做到这一点并且仍然成功地迁移数据？有没有人这样做过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-08-15T08:34:27.747

您可以使用 Rails 数据库迁移重命名表和列。

您可以创建一个迁移文件来重命名表，并创建另一个迁移文件来重命名其列。

假设我们要重命名`emailSubscriptions`表。

```
> bundle exec rails generate migrations rename_email_subscriptions
# this creates db/migrate/xxxxxxxx_rename_email_subscriptions.rb 
```

编辑迁移文件

```
# this creates db/migrate/xxxxxxxx_rename_email_subscriptions.rb

class RenameEmailSubscriptions < ActiveRecord::Migration
  def change
    rename_table :emailSubscriptions, :email_subscriptions
  end
end 
```

对于列

```
> bundle exec rails generate migrations rename_email_subscriptions_columns
# this creates db/migrate/xxxxxxxx_rename_email_subscriptions_columns.rb 
```

编辑迁移文件

```
# this creates db/migrate/xxxxxxxx_rename_email_subscriptions_columns.rb

class RenameEmailSubscriptionsColumns < ActiveRecord::Migration
  def change
    change_table :email_subscriptions do |t|
      t.rename :columnName1, :column_name_1
      t.rename :columnName2, :column_name_2
      t.rename :columnName3, :column_name_3
      t.rename :columnName4, :column_name_4
    end
  end
end 
```

跑`bundle exec rake db:migrate`

对所有表及其对应的列执行此操作。

请注意，我决定拆分迁移以重命名表及其列，以便可以回滚迁移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:57:39.813

您可以覆盖模型中的表名：

```
class Project < ActiveRecord::Base
  self.table_name = "project"
end 
```

或者

```
class Post < ActiveRecord::Base
  def self.table_name
    "special_" + super
  end
end

Post.table_name # => "special_posts" 
```

更多信息： http: [//guides.rubyonrails.org/3_2_release_notes.html](http://guides.rubyonrails.org/3_2_release_notes.html)

您还可以制作一个脚本并重命名您的表格并在之后使用 rails 约定，这取决于您！

从那里您可以使用 rails 迁移重命名列名： [如何在 Ruby on Rails 迁移中重命名数据库列？](https://stackoverflow.com/questions/1992019/how-can-i-rename-a-database-column-in-a-rails-migration)

# html - TD 表中的唯一 ID

> ID：12493823
> 
> 赞同：0
> 
> 时间：2012-09-19T11:29:59.820
> 
> 标签：html, html-table

我对 HTML 中的 TD 标记感到困惑，在 Input 标记中，我们有`name`作为唯一 ID 来说明输入框的 ID，但是 TD 中的唯一 ID 替换`name`属性是什么？因为当我更新我的表单时，所有来自 Input 标记的内容都已更新，但 TD 标记未更新，因为没有特定/唯一 ID 来发送数据。

我的代码如下：

**输入标签**

```
<input name="four" type="text" class="style6" value="<?php echo $row['four']; ?>" size="3"> 
```

**TD 属性**

```
<table>
<tr>
<td>
<center>
<?php echo $row['one'] = round($row['two'] / $row['three']); ?>
</center>
</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:47:10.057

in的`name`属性`input`不需要是唯一的。它用于使元素对表单数据做出贡献并为贡献提供名称（名称=值）。

该`td`元素对表单数据没有贡献。该`name`属性对其无效，并且该`id`属性虽然允许（对于任何元素），但不会影响功能。表格单元格标记根本不影响表单数据。为此，您需要表单字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:53:51.083

你可以简单地尝试

```
<td id="someid"></td>

<script type="text/javascript">
document.getElementbyid("someid").innerHTML = "whatever you want to put inside it"
</script> 
```

希望这会有所帮助

# wordpress - Wordpress 循环仅遍历最后 15 个帖子

> ID：12493824
> 
> 赞同：0
> 
> 时间：2012-09-19T11:30:01.567
> 
> 标签：wordpress

我正在使用一个 wordpress 框架（WooFramework），它使用以下代码来创建特定类别的所有帖子的列表：

```
<?php while ( have_posts() ) { the_post(); ?>
<li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
<?php } ?> 
```

我检查了 Wordpress 文档，这段代码似乎是正确的。然而，输出的列表仅包含 15 个最近的帖子。似乎有什么东西让 have_posts() 比它应该的更早停止。关于可能导致此问题的任何想法？

提示：索引页面（默认情况下）显示 15 个最近的帖子。这可能与问题有关吗？框架是否有可能重新定义 wordpress 的 have_posts() 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:26:04.593

尝试转到设置>阅读并更改“博客页面最多显示”的值。如果您想显示*所有*帖子，您可以将其设置为非常高的值，例如 9999999999。

# jquery - 带有ajax调用的jQuery番茄酱验证规则

> ID：12493829
> 
> 赞同：0
> 
> 时间：2012-09-19T11:30:30.733
> 
> 标签：jquery, ajax

我正在使用 jQuery 番茄酱验证插件，可以在这里找到： [https ://github.com/mustardamus/ketchup-plugin](https://github.com/mustardamus/ketchup-plugin)

它背后的基本思想将自定义验证事件（或规则）绑定到表单中的字段，并且在焦点丢失在字段上之后触发该事件。如果验证规则返回 true，则表示该字段已验证。

我添加了我的自定义验证规则：

```
jQuery.ketchup.validation('email_unique', _('Email is being used by another user.'), function (form, el, value) {
            $j.ajax({
                url: Routes.webshop_check_email_uniqueness_path().url,
                type: "POST",
                data: {email: el.val()},
                success: function(data) {
                    // this should always work
                    return true;
                }
            });
    }); 
```

但这不起作用，它总是返回false。我还尝试通过使用使我的 jQuery 调用同步：`async: false`但它不起作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:03:38.057

```
jQuery.ketchup.validation('email_unique', _('Email is being used by another user.'), function (form, el, value) {
        var rtn = false;
        $.ajax({
            url: Routes.webshop_check_email_uniqueness_path().url,
            type: "POST",
            async: false,
            data: {email: el.val()},
            success: function(data) {
                // this should always work
                rtn = true;
            }
        });
       return rtn
}); 
```

# php - PDO 获取最大值

> ID：12493831
> 
> 赞同：1
> 
> 时间：2012-09-19T11:30:34.580
> 
> 标签：php, mysql, database, select, pdo

我一直在研究过去一个小时没有运气，我尝试了很多方法。我要做的就是从表中的某个列中获取最大值并将其存储在 php 中的一个变量中，我可以将其用于任何我想要的。这是我目前所处的位置：

```
$link = new PDO('mysql:host=****;dbname=****;charset=UTF-8','****','****');
$gid = $link->prepare("SELECT MAX(Group_ID) as maxGroup FROM Conference");
$gid->execute();
$test = $gid->fetch(PDO::OBJ);
echo $test; 
```

在这一点上，我什至不知道 OBJ 是否正确，我只是在尝试很多不同的东西。谁能帮帮我，我需要做什么？我只想获得最大值并将其存储在变量中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:33:18.807

您正在返回一个对象，因此您需要相应地访问属性：

```
echo $test->maxGroup; 
```

返回查询结果并根据`->fetch(PDO::OBJ);`您在查询中的列/别名创建一个具有属性的对象。

编辑：如果您只是尝试返回结果并尝试几种不同的方式，为什么不以简单的方式进行：

```
$test = $sth->fetch(PDO::FETCH_ASSOC);
echo $test['maxGroup']; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T11:38:46.047

为什么不直接关联？

```
$link = new PDO('mysql:host=****;dbname=****;charset=UTF-8','****','****');
$gid = $link->prepare("SELECT MAX(Group_ID) as maxGroup FROM Conference");
$gid->execute();
$test = $gid->fetch(PDO::FETCH_ASSOC);
echo $test['maxGroup']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T16:12:32.010

我为想要使用它的人创建了一个简单的函数，它简单但对 pdo() 很有帮助，这是一个简单的函数，我从心里知道你知道我的意思

```
function last_inserted($column,$table){
 $dbh = pdo();
 $gid = $dbh->prepare("SELECT MAX(".$column.") as maxGroup FROM ".$table);
 $gid->execute();
 $last = $gid->fetch(PDO::FETCH_ASSOC);
 return $last['maxGroup'];
 } 
```

# jquery - 使用 jQuery fileupload 插件直接上传到 Amazon S3

> ID：12493832
> 
> 赞同：1
> 
> 时间：2012-09-19T11:30:35.920
> 
> 标签：jquery, ruby-on-rails, amazon-s3

我正在使用[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)将文件上传到我的 Rails 应用程序上的 S3（安装此 gem：[https](https://github.com/tors/jquery-fileupload-rails) ://github.com/tors/jquery-fileupload-rails ）。

这是我的表格。由于我只需要上传文件并稍后创建文档，因此它不是 form_for。

```
 <%= form_tag 'Bucket URL SNIP', :multipart => true, :id => "fileupload" do %>
  <%= hidden_field_tag 'key', @token %>
  <%= hidden_field_tag 'AWSAccessKeyId', ACCESSKEYSNIP %>
  <%= hidden_field_tag 'acl', 'public-read' %>
  <%= hidden_field_tag 'success_action_status', '200' %>
  <%= hidden_field_tag 'policy', controller.s3_policy_document %>
  <%= hidden_field_tag 'signature', controller.signature %>
  <% end %> 
```

jQuery 上传器是这样初始化的：

```
 $(function () {

      $('#fileupload').fileupload({

        forceIframeTransport: true

      });

  }); 
```

一切正常，我看到了 UI，但是当文件的进度条完成时，它给了我一个错误，并且文件实际上并没有被上传。

类型错误：iframe 未定义。（Firefox）TypeError：TypeError：无法读取未定义的属性“0”（Chrome）

可能是什么问题呢？

编辑：

查看 Javascript 控制台，我收到这样的错误（替换了真实地址）：

```
Unsafe JavaScript attempt to access frame with URL BUCKETURL from frame with URL SERVERURL. Domains, protocols and ports must match. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T21:01:44.290

我最近写了一篇关于如何将文件直接上传到 s3 的简短教程，希望对您有所帮助：

[http://pjambet.github.com/blog/direct-upload-to-s3/](http://pjambet.github.com/blog/direct-upload-to-s3/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T16:22:55.610

亚马逊 AWS 最近宣布支持 CORS。这意味着您不必使用 iframe 方法直接上传到 S3。现在您可以无后顾之忧地使用 HTML5。

它还允许您使用拖放等功能。

要启用直接 HTML5 上传，您只需在存储桶属性中调整存储桶 CORS 设置。

# php - 将数据库中的信息存储在 _SESSION 数据中

> ID：12493836
> 
> 赞同：0
> 
> 时间：2012-09-19T11:30:48.077
> 
> 标签：php

我正在使用以下方法从数据库中获取用户数据：

```
$stmt = $db->prepare("SELECT usernames FROM login.users WHERE emails = :email");
$stmt->bindValue(":email", $email);
$stmt->execute(); 
```

以及除用户名之外的其他字段（我还没有具体解决我将使用哪些字段）。

由于我正在获取一个用户的数据，因此它应该返回一行数据。因此，我可以使用：

```
$data = $stmt->fetch(PDO::FETCH_ASSOC); 
```

这会给我一个 $data 中的关联数组。但是我如何将其转移到 $_SESSION？

[PHP中的数组复制](https://stackoverflow.com/questions/7135966/array-copying-in-php)给了我使用的想法：

```
$_SESSION[$index] = $data[$index]; 
```

或类似的，但我将如何自动查找 $index 是什么？如果我可以更改 SELECT 语句以包含不同的列，而不必`$_SESSION['columnname'] = $data['columnname']`为每一列都包含，我真的很喜欢它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T11:33:06.063

您可以将整个 $data 存储在单个会话变量中：

```
$_SESSION['data']=$data; 
```

或者您可以执行以下操作：

```
foreach($data as $key => $value)
    $_SESSION[$key]=$value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:38:24.487

不要在会话中存储数据库信息。会话旨在使易失性数据持久化。数据库中的数据已经是持久的，因此没有必要将数据库数据放在会话中，而且设计不好。

# jquery - 如何在jquery中重置div标签

> ID：12493839
> 
> 赞同：1
> 
> 时间：2012-09-19T11:31:03.190
> 
> 标签：jquery, dom

我的 html 页面中有一个下拉框，我需要将下拉列表重置为其原始状态。我的代码片段如下：

```
<div id="countries" >
 <!---------------I select a particular module----------------->
     <select id="modules" onchange = "getRole()"> <!--Function getRole() called here-->
                <option>---Select---</option>
                <option value="1">Module1</option>
                <option value="2">Module2</option>
                <option value="3">Module3</option>
                <option value="4">Module4</option>
        </select>
  <!-Based on the modules some processing is done and countries are displayed->
     <select multiple="multiple" id="country" name="country[]">

            <option value="1">India</option>
            <option value="2">USA</option>
            <option value="3">Russia</option>

       </select> 
</div> 
```

进行一些处理后，我需要重置下拉菜单

换句话说，我需要在使用我的下拉菜单完成所有处理后恢复我的原始状态。

我正在使用 .clone() 但这似乎不起作用。

```
function getRole() {
    //CLone the id 'countries'
    var cloneobj = $('#countries').clone();

    //Some processing here
    ....

    //After processing get back the original state
    $('#countries').replaceWith(cloneObj);
} 
```

这里的问题是克隆正在创建重复的 id，因此 dosent 似乎是正确的解决方案。任何人都可以帮忙。请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:34:22.640

一、提供`#`id

```
var cloneobj = $('#countries').clone(); 
```

并尝试

```
$('#countries').replaceWith(cloneObj); 
```

Javascript 对函数是大小写敏感的！！！

**`clone()`不同于`Clone()`**.

**更新 2**

我抓住了你：你错过了`</select>`标签和评论问题

```
<div id="countries" >
 <!---------------I select a particular module----------------->
     <select id="modules" onchange = "getRole()"> <!--Function getRole() called here-->
                <option>---Select---</option>
                <option value="1">Module1</option>
                <option value="2">Module2</option>
                <option value="3">Module3</option>
                <option value="4">Module4</option>

     </select> <!-- Here you forgot -->

  <!--Based on the modules some processing is done and countries are displayed !. You forgot one `-` -->
     <select multiple="multiple" id="country" name="country[]">

            <option value="1">India</option>
            <option value="2">USA</option>
            <option value="3">Russia</option>

       </select> 
</div> 
```

**更新 3**

请参阅我使用 jquery 事件的示例：http: [//jsfiddle.net/6WLVC/](http://jsfiddle.net/6WLVC/)

不过，我不知道为什么在标签中使用事件`getRole()`还不起作用。`onchange``select`

似乎 jQuery 函数只在`$(function(){ ... });`初始化时起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:37:06.247

我认为您应该使用`clone()`（**区分大小写**），**使用 id hash** `#`并使用**正确的对象**进行替换。（您将克隆的对象保存`cloneobj`并替换使用`cloneObj`未定义的对象（**区分大小写**！）

克隆选项并像这样替换：

```
function getRole() {
    //Clone the id 'countries'
    var clonedObj = $('#countries').clone();

    //Some processing here
    ....

    //After processing get back the original state
    $('countries').replaceWith(clonedObj);
} 
```

# php - 在我的 PHP 代码中，我使用 API 连接到数据库。我收到警告：simplexml_load_string()：

> ID：12493845
> 
> 赞同：1
> 
> 时间：2012-09-19T11:31:35.660
> 
> 标签：php, oracle, curl

我是 php 新手，需要使用他们的 API 查询 oracle 数据库。我只能在正文中以 xml 或 json 形式发送查询。我不确定我是否做得对。请找到代码

```
<?php
    //HTTP Headers
    $header = array('Content-Type = application/xml','Accept = application/xml');
    $xmlquery =  <<<XML
    ---- query----
    XML;
    $body = simplexml_load_string($xmlquery);
    //URL containing query parameters : appGUID, pagenumber, pagesize 
    $url='http://<server name>?appGUID=<GUID>&pagenumber=1&pagesize=50';
    $ch = curl_init();
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
    curl_setopt($ch,CURLOPT_POST,true);
    curl_setopt($ch, CURLOPT_POSTFIELDS,$body);
    //CURLOPT_POSTFIELDS : The full data to post in a HTTP "POST" operation.
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $response = curl_exec($ch);
    var_dump ($response);
    curl_close($ch);
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:58:57.543

Simplexml_load_string 返回一个包含 xml 字符串属性的对象。Curl_post 期望您的有效负载不是对象。您应该能够直接发布您的 XML 字符串。

# iphone - SQLite 添加或插入值

> ID：12493848
> 
> 赞同：0
> 
> 时间：2012-09-19T11:31:49.900
> 
> 标签：iphone, objective-c, ios, sqlite

我有一个带有值的表。我需要在其中添加或插入值。例如，在表中存在值：“123”的行（“exml”），我想添加值“4567”。之后它必须是“1234567”，如果值不存在它必须是“4567”，请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:14:09.807

> 检查它描述的链接创建数据库，创建表，
> 
> 打开数据库从表中检索数据
> 
> 它将帮助您插入和检索值。

[通过 Objective-C 创建 SQLite3 数据库文件](https://stackoverflow.com/questions/10540728/creating-an-sqlite3-database-file-through-objective-c/11795399#11795399)

检查这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:52:28.277

为此，您必须首先从表中获取现有数据，然后为您在数据库中获得的记录数放置一个循环，然后您可以这样做，

```
 for(int i=0;i<arrOldData.count;i++)
    {
        NSString *strNew;
        if([[arrOldData objectAtIndex:i] objectForKey:@"exml"])
        {
            strNew=[[[arrOldData objectAtIndex:i] objectForKey:@"exml"] stringByAppendingString:yourNewString];
        }
        else
        {
            strNew=yourNewString;
        }

        //your insert statement will be here with value(strNew)
    } 
```

这不是完整的代码，这只会让您简要了解您可以做什么，希望对您有所帮助。

# android - 如何将服务绑定到android中的片段

> ID：12493854
> 
> 赞同：0
> 
> 时间：2012-09-19T11:32:11.183
> 
> 标签：android, android-intent

如何将服务绑定到android中的片段。尝试在片段中调用绑定服务时返回 false。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-19T11:39:42.957

您可以通过编程方式进行操作，首先创建您的`BroadcastReceiver`然后从`Fragment`.`getActivity().registerReceiver(receiver, filter)`

# ruby - Ruby 将 1.8.7 更新到 1.9.3

> ID：12493861
> 
> 赞同：-2
> 
> 时间：2012-09-19T11:32:43.053
> 
> 标签：ruby, linux, rvm

当我查看 Ruby 的版本时

```
`$ ruby -v` 
```

我明白了

```
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux] 
```

但是当我想升级 Ruby

```
$ rvm install 1.9.3 
```

我明白了

```
Already installed ruby-1.9.3-p194. 
```

有什么问题？

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:36:17.790

rvm 选择的 ruby​​ 版本取决于您使用的 rvm 版本。

尝试关注

```
 rvm use 1.9.3
   ruby -v 
```

要查找所有已安装的 ruby​​ 版本，请使用以下命令

```
 rvm list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:34:57.510

我看不出有什么问题。

您告诉 RVM 使用的版本是 1.8.7，并且您还安装了 1.9.3，如果您愿意，可以告诉 RVM 使用。

# postgresql - 在 postgres 9.2 上安装后，PL/R 找不到共享库

> ID：12493862
> 
> 赞同：0
> 
> 时间：2012-09-19T11:32:42.820
> 
> 标签：postgresql, installation, plr

我试图让[PL/R](http://www.joeconway.com/plr)在我没有 root 访问权限的 linux 服务器上运行。安装本身可以使用以下命令正常工作：

`LD_INCLUDE_PATH="$HOME/pgsql/include" LD_LIBRARY_PATH="$HOME/pgsql/lib:$HOME/lib/R/lib" PGDATA="$HOME/usr/pgsql/data" PG_LIB_DIR="$HOME/pgsql/lib" R_HOME="$HOME/lib/R" USE_PGXS=1 make`

但是，当我尝试将 plr 扩展名添加到数据库`CREATE EXTENSION plr;`时，出现以下错误：

`ERROR: could not load library "~/lib/postgresql/plr.so": libR.so: cannot open shared object file: No such file or directory`

[我在安装文档页面](http://www.joeconway.com/plr/doc/plr-install.html)的底部读到我应该将库路径添加到 LD 配置文件`/etc/ld.so.conf`，但我没有 root 访问权限，我无法更改此文件。

有解决方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:29:23.633

您需要`LD_LIBRARY_PATH="$HOME/pgsql/lib:$HOME/lib/R/lib"`在运行时在 PostgreSQL 服务器的环境中设置。由于您似乎是在您自己的用户 ID 下的主目录之外运行 PostgreSQL，这应该像在运行之前导出环境变量一样简单`pg_ctl`，例如：

```
LD_LIBRARY_PATH="$HOME/pgsql/lib:$HOME/lib/R/lib" pg_ctl -D the_datadir start 
```

或者，您可以查看是否可以在启用 rpath 链接的情况下重新编译 PL/R，因此链接器在编译时`plr.so`将路径嵌入其中。`libR.so`将`-rpath`选项传入`LDFLAGS`或传入`-Wl,-rpath`。`CFLAGS`见和。`-rpath`_ _`man ld``-Wl``man gcc`

# c# - 使用其他 ScrollBar 控制 RichTextBox 位置

> ID：12493864
> 
> 赞同：0
> 
> 时间：2012-09-19T11:32:49.607
> 
> 标签：c#, winforms, scrollbar, richtextbox, splitcontainer

我在 splitcontainer.panel1 中有richTextBox (dock style = fill, scrollbar = only vertical, wordwrap = false)

```
splitcontainer.panel1.Controls.Add(richTextBox); 
```

在需要滚动richTextBox的情况下（当它的宽度大于splitcontainer.panel1的宽度时）。

我希望会出现一个滚动条（但在 splitcontainer.panel1 中，而不是来自richTextBox 的滚动条）。

可以处理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:00:52.743

这样做当然没有意义。为了使子面板的滚动条能够正常工作，您无法停靠填充 RichTextBox 控件。然后，您将不得不根据 TextChanged 事件不断调整 RichTextBox 控件的大小，这可能会变得一团糟。

也不清楚*为什么*不能将 ScrollBars 设置为两者：

```
richTextBox.ScrollBars = RichTextBoxScrollBars.Both; 
```

它似乎可以完成您真正希望它完成的工作。

# php - inversedBy 和 mappedBy 有什么区别？

> ID：12493865
> 
> 赞同：114
> 
> 时间：2012-09-19T11:33:01.490
> 
> 标签：php, doctrine-orm

我正在使用 Zend Framework 2 和 Doctrine 2 开发我的应用程序。

在编写注释时，我无法理解 和 之间的`mappedBy`区别`inversedBy`。

我应该什么时候使用`mappedBy`？

我应该什么时候使用`inversedBy`？

我什么时候都不应该使用？

这是一个例子：

```
 /**
 *
 * @ORM\OneToOne(targetEntity="\custMod\Entity\Person", mappedBy="customer")
 * @ORM\JoinColumn(name="personID", referencedColumnName="id")
 */
protected $person;

/**
 *
 * @ORM\OneToOne(targetEntity="\Auth\Entity\User")
 * @ORM\JoinColumn(name="userID", referencedColumnName="id")
 */
protected $user;

/**
 *
 * @ORM\ManyToOne (targetEntity="\custMod\Entity\Company", inversedBy="customer")
 * @ORM\JoinColumn (name="companyID", referencedColumnName="id")
 */
protected $company; 
```

我快速搜索并找到以下内容，但我仍然感到困惑：

*   [示例 1](https://stackoverflow.com/questions/3328836/problem-understanding-relation-mapping-in-doctrine-2)
*   [示例 2](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/bidirectional-references.html)
*   [示例 3](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html)

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2012-09-19T13:32:37.033

*   **mappedBy**必须在（双向）关联的*反面指定*
*   **必须在（双向）关联的*拥有方*指定**inversedBy****

 **来自学说文档：

*   ManyToOne 始终是双向关联的拥有方。
*   OneToMany 始终是双向关联的反面。
*   OneToOne 关联的拥有方是具有包含外键的表的实体。

见[https://www.doctrine-project.org/projects/doctrine-orm/en/latest/reference/unitofwork-associations.html](https://www.doctrine-project.org/projects/doctrine-orm/en/latest/reference/unitofwork-associations.html)

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2016-01-04T00:48:02.590

上面的答案不足以让我理解发生了什么，所以在深入研究之后，我认为我有一种解释它的方法，这对于像我一样努力理解的人来说是有意义的。

**INTERNAL DOCTRINE**引擎使用 inversedBy 和 mappedBy来减少为获取所需信息而必须执行**的 SQL 查询的数量。**要清楚，如果您不添加 inversedBy 或 mappedBy 您的代码仍然可以工作，但不会被**优化**。

例如，看看下面的类：

```
class Task
{
    /**
     * @var int
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="task", type="string", length=255)
     */
    private $task;

    /**
     * @var \DateTime
     *
     * @ORM\Column(name="dueDate", type="datetime")
     */
    private $dueDate;

    /**
     * @ORM\ManyToOne(targetEntity="Category", inversedBy="tasks", cascade={"persist"})
     * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
     */
    protected $category;
}

class Category
{
    /**
     * @var int
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;

    /**
     * @ORM\OneToMany(targetEntity="Task", mappedBy="category")
     */
    protected $tasks;
} 
```

如果您要运行这些类来生成模式（例如，`bin/console doctrine:schema:update --force --dump-sql`），您会注意到 Category 表上没有用于任务的列。（这是因为它上面没有列注释）

这里要理解的重要一点是变量 tasks 仅存在于其中，因此内部学说引擎可以使用上面的引用，它表示它的 mappedBy 类别。现在...不要像我一样在这里混淆... **Category 不是指类名**，它指的是 Task 类上称为“受保护的 $category”的属性。

同样，在 Tasks 类上，属性 $category 提到它是 inversedBy="tasks"，注意这是复数，**这不是类名**的复数，而只是因为该属性在 Category 中被称为“受保护的 $tasks”班级。

一旦你理解了这一点，就很容易理解 inversedBy 和 mappedBy 在做什么以及如何在这种情况下使用它们。

在我的示例中，引用外键（如“任务”）的一侧总是获得 inversedBy 属性，因为它需要知道该类上的哪个类（通过 targetEntity 命令）和哪个变量（inversedBy=）才能“向后工作”，以便说话并从中获取类别信息。记住这一点的一种简单方法是，将具有 foreignkey_id 的类是需要具有 inversedBy 的类。

与 category 一样，它的 $tasks 属性（记住，它只是类的一部分用于优化目的）是 MappedBy 'tasks'，这在两个实体之间正式创建了关系，因此学说现在可以安全地使用 JOIN SQL 语句而不是两个单独的 SELECT 语句。如果没有 mappedBy，原则引擎不会从 JOIN 语句中知道它将在“Task”类中创建什么变量来放置类别信息。

希望这能更好地解释它。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-11-20T16:12:38.477

在双向关系中既有拥有方也有反方

**mappedBy** : 放入双向关系的反面来引用它的拥有方

**inversedBy** : 放入双向关系的拥有方来引用它的反方

**和**

**mappedBy**属性与 OneToOne、OneToMany 或 ManyToMany 映射声明一起使用。

**inversedBy**属性与 OneToOne、ManyToOne 或 ManyToMany 映射声明一起使用。

**注意**：双向关系的拥有方包含外键。

在 Doctrine 文档中有两个关于 inversedBy 和 mappedBy 的参考： [第一个链接](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/association-mapping.html)，[第二个链接](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/unitofwork-associations.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-25T08:20:38.173

5.9.1。拥有方和反向方

对于多对多关联，您可以选择哪个实体是拥有者，哪个实体是反面。从开发人员的角度来看，有一个非常简单的语义规则可以决定哪一方更适合作为拥有方。您只需要问自己，哪个实体负责连接管理，然后选择它作为拥有方。

以文章和标签两个实体为例。每当您想将文章连接到标签时，反之亦然，主要是文章负责这种关系。每当您添加新文章时，您都希望将其与现有或新标签联系起来。您的创建文章表单可能会支持此概念并允许直接指定标签。这就是为什么你应该选择文章作为拥有方，因为它使代码更易于理解：

[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html)**

# mysql - Mysql 在 JOIN 表语句中计算行数，这可能吗？

> ID：12493867
> 
> 赞同：0
> 
> 时间：2012-09-19T11:33:07.170
> 
> 标签：mysql

鉴于此查询：

```
SELECT DISTINCT a.dogTag, a.dateEdited
FROM dvdpedia a
JOIN dvd_uploads b ON a.dogTag = b.dogTag
JOIN dvd_moderators c ON a.dogTag = c.dogTag
WHERE b.uploader != 9  AND c.moderator != 9
ORDER BY a.dogTag ASC
LIMIT 50; 
```

我只想从 dvd_moderators 中选择仅出现一次的行，即仅被审核一次而不是多次且与给定的用户 ID 不匹配的行（本例中为 9）。

`dvd_moderators`看起来像这样：

```
id    dogTag    moderator
219    2         9
2226   2         7 
```

当然，版主 ID 会因其他条目而改变。

使用 COUNT 最有效，除非用户 ID 与主持人匹配：

```
SELECT  a.dogTag, a.dateEdited, COUNT(c.dogTag) AS moderations
FROM dvdpedia a
JOIN dvd_uploads b ON a.dogTag = b.dogTag
JOIN dvd_moderators c ON a.dogTag = c.dogTag
WHERE b.uploader != 9 AND c.moderator != 9
GROUP BY c.dogTag
HAVING moderations = 1  
ORDER BY a.dogTag ASC
LIMIT 50; 
```

然后它报告它只被审核了一次（这是一个正确的查询，它正在丢弃与 moderator = 9 匹配的行，因此计数变为 1 而不是 2）但对于我需要的目的不正确。

基本上，我想要只审核一次的行，并且其中一位审核员与用户 ID 不匹配（在上面的示例中为 9）。

我怎么能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:13:43.037

感谢 Sitepoint 的 Guido，这是他提供的解决方案。我把它放在这里是希望它能帮助处于类似情况的其他人：

```
SELECT a.dogTag, a.dateEdited
FROM dvdpedia a
JOIN dvd_uploads b ON a.dogTag = b.dogTag
JOIN dvd_moderators c ON a.dogTag = c.dogTag
JOIN
 (SELECT dogTag
  FROM dvd_moderators
  GROUP BY dogTag
  HAVING count(dogTag) = 1
 ) AS d
ON a.dogTag = d.dogTag
WHERE 1=1 
AND   b.uploader != 9 
AND   c.moderator != 9
ORDER BY a.dogTag ASC
LIMIT 50; 
```

如果有人感兴趣，可以[链接到该帖子。](http://www.sitepoint.com/forums/showthread.php?886639-Mysql-count-rows-in-a-JOIN-table-statement-is-it-possible&goto=newpost)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:37:22.553

```
SELECT  a.dogTag, a.dateEdited, COUNT(c.dogTag) AS moderations 
FROM dvdpedia a 
JOIN dvd_uploads b ON a.dogTag = b.dogTag AND b.uploader != 9
JOIN dvd_moderators c ON a.dogTag = c.dogTag AND c.moderator != 9
GROUP BY c.dogTag 
HAVING moderations = 1   
ORDER BY a.dogTag ASC 
LIMIT 50; 
```

# java - 同时调试python和Java

> ID：12493870
> 
> 赞同：2
> 
> 时间：2012-09-19T11:33:17.937
> 
> 标签：java, python, debugging

我正在使用 Python 来调用我的许多 Java 程序。是否可以对 Python 和 Java 使用调试透视图并同时跟踪两种语言的进度？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:14:16.800

我下载了两个不同的 Eclipse，一个用于 JavaSE，一个用于 PyDev。Python 脚本以远程调试模式启动 JVM，然后另一个 Eclipse 实例通过远程调试连接到该 JVM。这样，即使在两个不同的 IDE 中，您也可以调试 Python 和 Java 代码（我不知道这是否可以在同一个实例中完成，即两个调试会话是否可以存在于同一个 Eclipse 实例中，但是我不在乎，因为我为 Python、Java、Scala、Android 使用了不同的 Eclipse 实例……）

创建以下 Java 程序并导出一个可运行的 JAR，例如在 location `/home/raffaele/hello.jar`，并在以下行设置断点`System.out.println()`

```
public class HelloWorld {

    public static void main(String[] args) {
        for (int i = 0; i < 10; i++)
            System.out.println(i);
    }

} 
```

创建一个 Python 脚本，在 line 处添加一个断点`print i`并点击*Debug as Python script*。子进程输出应该被重定向到 Eclipse 控制台，并且您应该看到消息**Listening for transport dt_socket at address: 8000**

```
import subprocess

subprocess.call(["java", "-jar", "-Xdebug",
                 "-Xrunjdwp:transport=dt_socket,address=8000,server=y",
                 "/home/raffaele/hello.jar"])

for i in range(1, 10):
    print i 
```

此时，在 JavaSE Eclipse 实例中，创建一个远程调试配置：*运行*>*调试配置*，在左侧栏中选择*远程 Java 应用程序*，在右侧选择名称、主机`localhost`、传输`socket`端口`8000`。点击*Apply*，然后*Debug*。JavaSE 实例中的 Debug 透视图将打开，您将看到您的代码在`System.out.println`. 在右窗格中，您可以检查局部变量，例如`i = 0`. 点击*Resume* 10 次，PyDev 实例会闪烁，因为 Python 断点已被命中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:41:32.987

> 我正在使用 Python 来调用我的许多 Java 程序。***是否可以对 Python 和 Java 使用调试透视图并同时跟踪两种语言的进度？***谢谢

不是我所知道的（所以[：Eclipse 调试上的 CBT 和 Java](https://stackoverflow.com/questions/2642069/eclipse-is-it-possible-to-have-cdt-and-java-ide-together)）。您可以尝试其他调试方法，例如使用[log4j](http://logging.apache.org/log4j/1.2/)记录事件（针对您的 java 异常等），或者使用[junit](http://www.junit.org/)和[pyunit单元测试技术构建一个](http://pyunit.sourceforge.net/)[ant 脚本](http://ant.apache.org/)，并以良好的[覆盖率](https://stackoverflow.com/questions/90002/what-is-a-reasonable-code-coverage-for-unit-tests-and-why)为目标。

试试这个网站[Testing Java with Jython and PyUnit](http://www.burgaud.com/jyunit/)，我想这就是你所追求的。

> JUnit 是由 Erich Gamma 和 Kent Beck 编写的单元测试框架，它并不是 Java 环境中单元测试的唯一替代方案。***本文提供了一个关于如何使用 Jython、PyUnit 和 Ant 对 Java 项目进行单元测试的简单演示。***为了提供更好的比较元素，提供的示例与 JUnit 发行版中可用的示例相同：MoneyTest。
> 
> 本文假设读者具有单元测试、**Java**、Jython 或**Python**以及可能的**Apache Ant**的一些基本知识。有关每种技术的更多信息，请参阅本文末尾的参考资料部分。（布尔戈，2012）

祝你好运！

# jquery - 水平滚动jquery

> ID：12493873
> 
> 赞同：1
> 
> 时间：2012-09-19T11:33:39.950
> 
> 标签：jquery, scroll

我在使用 jquery 水平滚动时遇到问题。我正在使用绝对定位的 div 的锚点。实现滚动。问题是，在不同分辨率下查看时，滚动位置（左偏移）不一致。

这是我的项目的链接：[http ://www.topazbranch.com/FB_others/preview2/Callme2.html](http://www.topazbranch.com/FB_others/preview2/Callme2.html)

有什么建议么 ？当整个页面位于左侧时，我没有问题。但是，在我将它定位在页面中间之后。我一直有这个问题。

# c# - 将项目从另一个窗体添加到 ListBoxControl

> ID：12493878
> 
> 赞同：0
> 
> 时间：2012-09-19T11:34:15.687
> 
> 标签：c#, winforms

我在表单 (Form1) 中有一个 ListBoxControl，在它下面有一个按钮，我想向我展示另一个表单 (Form2)。

在 Form2 中，我有一个 TextBox 和一个按钮，当我单击此按钮时，我希望将 TextBox 中的当前文本添加到另一个 Form1 中的 ListBoxControl 中。

我怎样才能做到这一点 ？

***表格 1：***

![表格 1](../Images/6aa340f1107676a7717502040cf10a58.png)

***表格 2：***

![表格2](../Images/cebbf7fd1a10d7d884b6aafd2a715418.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:41:43.077

在其他表单上使用此代码：

```
 Form1 frm;
  if ((frm= (Form1 )IsFormAlreadyOpen(typeof(Form1))) != null)
  {
      //get the value of the form
      //frm.listboxcontrol.text
  }

  public static Form IsFormAlreadyOpen(Type FormType)
  {
     return Application.OpenForms.Cast<Form>().FirstOrDefault(OpenForm => OpenForm.GetType() == FormType);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:46:13.863

您可以在 form1 中创建一个公共方法：

```
public SampleMethodName(string Value)
{
  // Write your code to add it the list.
  ListBox1.Add(Value); 
} 
```

现在，当用户打开 form2，在文本框中添加一些文本，然后按验证器，您可以创建 form1 的实例。

```
protected void valider_click(object sender, eventargs e)
{
  Form1 frm = new Form1();
  frm.SampleMethodName(TextBox.Value);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T11:47:45.327

有一个使用对话框的标准模式。

在 Form2 上，提供一个用于读取控件的属性：

```
public string KeyWord
{
   get { return Textbox1.Text; }
} 
```

在 Form1 上，单击按钮时：

```
using (Form2 dialog = new Form2())
{
    // init Form2

    var result = dialog.ShowDialog();

    if (result == DialogResult.OK)
    {
        sting newKeyWord = dialog.KeyWord;
        // add to listbox
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T12:31:40.573

如果您不想使用对话结果（如 Henk 建议的那样），但如果您想让第二个表单保持打开状态，请尝试以下操作。即，如果您想在添加 ListBox 项目时让第二个表单保持打开状态。

表格一：

```
using System;
using System.Windows.Forms;

namespace FormComm
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            var form2 = new Form2(this);
            form2.Show();
        }

        delegate void AddListBoxItemCallback(string text);
        public void AddListBoxItem(object item)
        {
            if (this.InvokeRequired)
            {
                AddListBoxItemCallback callback = new AddListBoxItemCallback(AddListBoxItem);
                this.Invoke(callback, new object[] { item });
            }
            else
            {
                this.listBox1.Items.Add(item);
            }

        }
    }
} 
```

表格 2：

```
using System;
using System.Windows.Forms;

namespace FormComm
{
    public partial class Form2 : Form
    {
        private Form1 _form = null;

        public Form2(Form1 form)
        {
            InitializeComponent();

            this._form = form;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            _form.AddListBoxItem(textBox1.Text);
        }
    }
} 
```

# windows-8 - Metro 应用程序（Windows 8，winrt）。在我的应用程序在 Windows 应用商店中可用后，我可以在不更新应用程序的情况下添加新的应用程序内购买产品吗

> ID：12493879
> 
> 赞同：3
> 
> 时间：2012-09-19T11:34:18.937
> 
> 标签：windows-8, microsoft-metro, in-app-purchase, windows-runtime, windows-store

我开发了用于销售电子书的 Metro（Windows 8、WinRT）应用程序。我想使用**Windows 商店**作为支付处理器来支持 Windows 商店**应用内购买**。

我对下一个问题感兴趣：

1.  在我的应用程序在 Windows 应用商店中可用后，我是否可以添加新的应用内购买产品而无需更新应用程序？（或者我在创建新的应用内购买产品时总是需要更新应用？）

2.  我可以以编程方式（动态）将新的应用内购买产品添加到 Windows 应用商店应用内购买产品列表吗？

3.  如果我每天添加 100 本书 - 我需要每天添加 100 个新的应用内购买产品吗？

4.  应用内购买产品的数量是否有限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:51:59.240

在您的应用在 Windows 应用商店中获得批准后，您始终可以添加新的应用内购买；但是，对于您的情况，听起来您最好使用自己的第三方支付系统并改用它。

这样一来，您就不会受到 Windows 应用商店的限制，也不会损失 30% 的提成（如果您的应用程序的终生销售额超过 2 万美元，包括应用程序购买，则最终减价为 20%。）权衡是您必须说服用户向您提供一些其他形式的付款信息（PayPal、信用卡定期计费等...）

如果您可以忍受 Windows 应用商店的周转时间，那么该选项对您来说可能是最简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:40:09.453

您应该始终更新您的应用程序，但是：

*   如果您只更新产品 - 您的应用的审核速度将比平时更快。
*   此外，您可以列出一些额外的产品。要有某种缓冲。

[我建议你在这里](http://social.msdn.microsoft.com/Forums/en-US/windowsstore/threads/)问你的问题

# c++ - 如何围绕winApi集成c++类和对象？

> ID：12493882
> 
> 赞同：1
> 
> 时间：2012-09-19T11:34:31.300
> 
> 标签：c++, c, eclipse, qt, integration

嘿，所以对于我的一个 c++ 项目，我需要开发一个 4-5 窗口应用程序。现在的问题是，目前我所有的程序任务都分为类，我通过传递“虚拟”值并返回打印结果来测试它们. 这一切都很好并且工作正常，但是现在我想介绍一个 GUI 界面，它给我提出了我的处理应该如何与前端通信的问题，因为 winAPI 最初是用于 c 而不是面向对象的语言。

我正在考虑做的事情，并且有一种感觉将是一项乏味的任务，创建一个为我做 win api 注册和方法的类。还有其他选择吗？？？

我正在考虑将 Qt 集成到 eclipse 中，但我认为他们停止为 eclipse 提供库，因为我无法在任何地方找到该库的下载，甚至在 Qt 下载页面上也找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:41:29.080

好吧，如果你想使用 Win32，那么你必须做 Win32 需要你做的所有事情。这是一个相当低级的 API，所以你只需要处理很多细节。

但是，不要过度设计事物。您不必为 Win32 编写通用 C++ 包装器……您只需为您的程序制作一个 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:57:39.363

如果您的问题只是 C 不支持类，那么只需**将关键字替换为** `class` **关键字** `struct`。只需确保**声明所有变量的访问类型**（私有、公共、受保护），这样它就可以互换（两者都适用）。它们之间的**唯一区别是默认访问类型**，**对于类来说是私有的**。如果您使用了 C++ 独有的其他语法，那么这将不起作用。

也有从 C++ 到 C 的代码生成器。最佳解决方案是使用专门为此目的使用 C++ 作为其基础语言的 IDE 创建一个 GUI。MFC 运行良好，但它不是开源的，您将需要相当多的关于继承和熟悉“类类型转换”的知识。使用 Visual Studio 中包含的向导会有所帮助。

尝试第一个选项；它可能会以同样的方式工作。

# java - 在jsoup中选择属性为空值的元素

> ID：12493886
> 
> 赞同：0
> 
> 时间：2012-09-19T11:35:01.897
> 
> 标签：java, jsoup

这是我的代码。我想检索属性样式为空值的元素。

```
String html = "<div style=''>dsfsdfs</div>";

Document doc = Jsoup.parse(html);

Elements elements = doc.select("*[style='']"); 

System.out.println(elements.size()); 
```

但是在输出中我没有得到样式属性为空的元素的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:44:37.860

如果您可以通过空属性值选择元素，则不确定。

但是您可以选择所有具有`style`属性的元素并检查它们的值：

```
String html = "<div style=''>dsfsdfs</div>";
Document doc = Jsoup.parse(html);

for( Element element : doc.select("[style]") )
{
    if( element.attr("style").isEmpty() )
    {
        // Do something with 'element'
        System.out.println(element);
    }
} 
```

## 编辑：

```
Elements emptyAttr = doc.select("[style~=^$]"); 
```

# knockout.js - 淘汰赛中的嵌套依赖项

> ID：12493889
> 
> 赞同：0
> 
> 时间：2012-09-19T11:35:12.207
> 
> 标签：knockout.js

我希望在下拉列表更改时更改集合。我在模型中有太多数组：

```
function Model(data) {

        this.Stuff = data.Stuff;
        this.Filter = data.Filter;
        this.SelectedFilterOption = ko.observalbe();
} 
```

html是这样的：

```
<select data-bind="options: Filter, optionsText: 'Name', value: SelectedFilterOption"></select>
<div data-bind="foreach: Stuff">
<label data-bind="text: Name"></label><br/>
</div> 
```

我想要实现的是，当用户更改数组时`select`，`stuff`应该使用选择的值更新和过滤数组。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:29:50.917

我建议在模型中添加一个计算值，返回过滤后的数组，数组将根据选择的当前值进行过滤。

```
function Model () {
     ....
    this.FilteredStuff = ko.computed(function () {
        return ko.utils.arrayFilter(self.Stuff(), function(item) { return item == self.SelectedFilterOption () } );    
    });  
}

<div data-bind="foreach: FilteredStuff">
    <label data-bind="text: $data"></label><br/>
</div> 
```

一个工作[小提琴](http://jsfiddle.net/gbos/st3vh/1/)

# php - mysql查询有序邻近

> ID：12493892
> 
> 赞同：3
> 
> 时间：2012-09-19T11:35:31.770
> 
> 标签：php, mysql, search

每个人

我在mysql中遇到了一些问题。我想做的是搜索数据库表，我在这里有一个条件。

例如：-

**《企业税法》/10**

当我输入上述搜索时，它应该在字段 column1 中的 10 个单词内返回行...... 上面的查询应该是什么（juss mysql查询会很棒）。有人可以帮忙吗:)。很高兴看到任何评论

感谢您阅读我的问题，

异乡恋

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:40:46.207

你可以试试MySql中的全文搜索功能。有一个`proximity`功能在文章的中途描述：

[http://www.drdobbs.com/database/full-text-search-with-innodb/231902587?pgno=2](http://www.drdobbs.com/database/full-text-search-with-innodb/231902587?pgno=2)

# objective-c - Objective-C performSelectorInBackground - 调用方法在哪里运行？

> ID：12493893
> 
> 赞同：0
> 
> 时间：2012-09-19T11:35:32.520
> 
> 标签：objective-c, ios, cocoa-touch

简单的问题：如果我这样做会发生什么：

```
- (void)viewDidLoad
{
    [self performSelectorInBackground:@selector(myBGMethod) withObject:nil];
}

-(void)myBGMethod
{
    [self myOtherMethod];
}

-(void)myOtherMethod
{
    NSLog(@"This is not Inception");
    //some more code here
} 
```

`NSLog()`和其他代码会`myOtherMethod`在主线程还是后台运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:37:49.040

它将在后台运行。一旦你在另一个线程中调用了 myBGMethod，无论它调用什么都在同一个线程上进行，除非它特别请求另一个线程。

附带说明一下，根据您想要支持的 iOS 版本，您可能想了解更多关于[Grand Central Dispatch](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)的信息。它使多线程更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:38:08.377

它将在后台线程中运行。

`NSLog`您可以通过在所有方法中调用来确认这一点。默认情况下，`NSLog`沿进程 ID (pid) 打印线程号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T11:44:33.623

如果您对特定代码行在哪个线程上执行感到好奇，您可以在该行上放置一个断点并检查 Xcode 中的 Debug Navigator 窗格：

![在此处输入图像描述](../Images/06043d2aec191658129c8d59111d0df2.png)

在这种情况下，我在`NSLog(...)`

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSLog(@"HI!");
}); 
```

你可以看到我们在线程 2`com.apple.root.default-priority`

# silverlight - 浏览器外 Silverlight 和许多“页面”

> ID：12493895
> 
> 赞同：1
> 
> 时间：2012-09-19T11:35:37.737
> 
> 标签：silverlight, silverlight-5.0, silverlight-oob, out-of-browser

我正在构建一个 Silverlight 浏览器外应用程序，该应用程序最终将在 Windows 7 触摸屏平板电脑上运行，独立于任何浏览器 - 它将像任何其他应用程序一样运行。

目前，我的代码都在一个 XAML 和相应的 .cs 文件中，但这很混乱，我想将其拆分并在需要时调用每个页面，即 Main.xaml、AboutUs.xaml、Contact.xaml等等

这在 OOB 应用程序中可能吗？我尝试使用框架和页面控件，但是当我通过单击按钮将源设置为我的一个新 XAML 时，即“/AboutUs.xaml”，它告诉我这是一个无效的 URI。

谢谢，格雷格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:08:45.907

尝试在 MainPage.xaml 中创建一个根画布（例如：myCanvas），作为显示所有页面的容器。

在导航点击时，写下这个。

```
myCanvas.Children.Clear();
myCanvas.Children.Add(new myPage()); 
```

一个好的做法是在每个页面上设置一个公共属性

```
public MainPage parentPage; 
```

在这种情况下，您可以为其分配包含该根画布的父页面（如果是 myCanvas）。在更多页面上，您只需使用

```
parentPage.myCanvas.Clear();
anotherPage tempPage = new anotherPage();
tempPage.parentPage = parentPage;
parentPage.myCanvas.Add(tempPage); 
```

# .net - 生成随机 X 长度字符串

> ID：12493897
> 
> 赞同：2
> 
> 时间：2012-09-19T11:35:40.637
> 
> 标签：.net

如何创建包含字母和数字的随机 X 长度字符串。我的快速解决方案是：

```
Guid.NewGuid().ToString("N").Substring(X); 
```

还有什么更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:38:05.380

**GUID 不是随机的，它们是独一无二的！**如果您在需要随机性的地方使用它们，那么您做错了什么。

随机数据生成有多种选择，但这里的问题是：*它意味着*什么？掷骰子？加密国家机密？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T11:41:35.070

如果您想要字典键的“随机”字符串，只需使用`Guid`. 它们将是独一无二的，并且对于键入字典来说绰绰有余。

* * *

类似的东西会起作用，但你需要限制你的随机范围以避免恶作剧：

[警告，对其进行编码并运行一次 - 否则未经测试。与您当前的解决方案相比，性能是无法量化的。此外，此实现比问题评论中链接的答案要冗长得多。]

```
 static void Main(string[] args)
    {
        Random r = new Random();

        int x = r.Next(1, 1000);

        char[] pool = new[] { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z' };
        char[] word = new char[x];

        for (int i = 0; i < x; i++)
        {
            // max value is not inclusive, so no -1 from length.
            int a = r.Next(pool.Length); 
            word[i] = pool[a];
        }

        Console.WriteLine(new string(word));
        Console.ReadLine();
    } 
```

使用 ASCII 码可能有更好的方法来做到这一点，但是嗯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T11:50:02.097

我曾经制作了一个“随机”密码生成器，它看起来像这样。你可以随意修改它，这里可能有一些 linq 表达式的空间。

```
public static string GeneratePassWord(bool useNumbers,bool useLetters, bool useUpperAndLowerCase, bool useSpecialCharacters, int passwordLength)
{
    Random randomNumber = new Random();
    List<char> chars = new List<char>();

    if (useNumbers) // Add numbers
    {
        for (int i = 0; i <= 9; i++)
        {
            chars.Add((char)(48 + i));
        }
    }

    if (useLetters) // Add letters
    {
        for (int i = 0; i <= 25; i++) // Small letters
        {
            chars.Add((char)(97 + i));
        }
        if (useUpperAndLowerCase)
        {
            for (int i = 0; i <= 25; i++) // Large letters
            {
                chars.Add((char)(65 + i));
            }
        }
    }

    if (useSpecialCharacters) // Add specials
    {
        chars.Add((char)'!');
        chars.Add((char)'#');
        chars.Add((char)'%');
        chars.Add((char)'&');
        chars.Add((char)'_');
        chars.Add((char)'.');
        chars.Add((char)'+');
        chars.Add((char)'@');
        chars.Add((char)'$');
    }

    // Generate random password from char
    if (chars.Count > 0)
    {
        StringBuilder newPass = new StringBuilder();
        for (int i = 0; i <= passwordLength; i++)
        {
            newPass.Append(chars[randomNumber.Next(chars.Count)]);
        }
        return newPass.ToString();
    }
    else
    {
        return string.Empty;
    }
} 
```

如您所见，它基本上创建了一个 List<> 字符，然后从列表中随机选择您想要的每个字符数。

# javascript - 如何从测试文件中访问 mocha 选项？

> ID：12493898
> 
> 赞同：6
> 
> 时间：2012-09-19T11:35:43.157
> 
> 标签：javascript, mocha.js, gruntjs

我正在使用 gruntjs 和 grunt-simple-mocha 运行 mocha 测试： [https ://github.com/yaymukund/grunt-simple-mocha](https://github.com/yaymukund/grunt-simple-mocha)

如何在每个 mocha 测试中访问我的 grunt.js 文件中定义的选项？

我想要完成的是在我的 gruntfile 中有一些通用配置，并在我的测试中使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:45:19.993

我已经发现的一种方法是使用全局值，这不是很好，但可以

内部`grunt.js`配置

```
global.hell = 'hey you'; 
```

内部测试

```
console.log(global.hell); 
```

现在检查另一种方式，也许会更好

- 编辑

不，如果我不想像 mocha-as-promised 那样结束一些黑魔法，我似乎会停下来，因为我没有写那个的技能。

- 编辑

你也可以看看这个 - [https://github.com/visionmedia/mocha/wiki/Shared-Behaviours](https://github.com/visionmedia/mocha/wiki/Shared-Behaviours) 你可以在测试之间共享一些对象，但不确定它是否有助于咕噜声

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:20:49.673

据我所知，没有办法将任何物体推入你的摩卡套装。对于您的问题，我能想到的唯一其他解释是，您想在测试文件中加载一组通用配置。我不相信您可以，除了在测试文件的最顶部加载一个通用配置文件以供您的测试方法使用。

# android - 为什么 UDP 接收方两次收到相同的数据包？

> ID：12493899
> 
> 赞同：0
> 
> 时间：2012-09-19T11:35:48.637
> 
> 标签：android, ios

为什么 UDP 接收者两次收到同一个数据包？UDP发送方只向接收方发送一个数据包，但接收方两次收到数据包，两个数据包相同。发送方和接收方运行在不同的设备中。发送方APP运行在android设备中，接收方是在 iOS 设备中运行。如何解释这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:57:16.777

从`http://en.wikipedia.org/wiki/User_Datagram_Protocol`

```
UDP uses a simple transmission model with a minimum of protocol mechanism.
It has no handshaking dialogues, and thus exposes any unreliability of the
underlying network protocol to the user's program. As this is normally IP
over unreliable media, there is no guarantee of delivery, ordering or
duplicate protection. 
```

如果要避免这种情况，则必须改用 TCP。

# c - 如何使用 ffmpeg 库转置视频？

> ID：12493904
> 
> 赞同：0
> 
> 时间：2012-09-19T11:36:05.377
> 
> 标签：c, ffmpeg

我正在尝试在 Android 中开发一个录像机和播放应用程序。所以，我正在使用 ffmpeg 库，并且我已经编译了该库以在项目中使用。

我录制了一段视频，当我播放时，在某些设备中无法识别方向矩阵，所以我想用 ffmpeg 库开发一个 C 方法来执行此命令：

ffmpeg -i f.mp4 -vf "转置=1" -r 24 -sameq f2.mp4"

我找到了这个文档，但没有帮助我，因为不要使用 AVFilter 和 AVFilterContext 类。

[http://dranger.com/ffmpeg/tutorial01.html](http://dranger.com/ffmpeg/tutorial01.html)

[http://cekirdek.pardus.org.tr/~ismail/ffmpeg-docs/structAVFilterContext.html](http://cekirdek.pardus.org.tr/~ismail/ffmpeg-docs/structAVFilterContext.html)

[http://ffmpeg.org/doxygen/trunk/api-example_8c-source.html](http://ffmpeg.org/doxygen/trunk/api-example_8c-source.html)

现在我只有打开和关闭视频文件

这是我的代码：

```
/*open the video file*/
if ((lError = av_open_input_file(&gFormatCtx, gFileName, NULL, 0, NULL)) !=0 ) {
    LOGE(1, "Error open video file: %d", lError);
    return; //open file failed
}
/*retrieve stream information*/
if ((lError = av_find_stream_info(gFormatCtx)) < 0) {
    LOGE(1, "Error find stream information: %d", lError);
    return;
} 
/*find the video stream and its decoder*/
gVideoStreamIndex = av_find_best_stream(gFormatCtx, AVMEDIA_TYPE_VIDEO, -1, -1, &lVideoCodec, 0);
if (gVideoStreamIndex == AVERROR_STREAM_NOT_FOUND) {
    LOGE(1, "Error: cannot find a video stream");
    return;
} else {
LOGI(10, "video codec: %s", lVideoCodec->name);
}
if (gVideoStreamIndex == AVERROR_DECODER_NOT_FOUND) {
    LOGE(1, "Error: video stream found, but no decoder is found!");
    return;
}   
/*open the codec*/
gVideoCodecCtx = gFormatCtx->streams[gVideoStreamIndex]->codec;
LOGI(10, "open codec: (%d, %d)", gVideoCodecCtx->height, gVideoCodecCtx->width);
#ifdef SELECTIVE_DECODING
gVideoCodecCtx->allow_selective_decoding = 1;
#endif
if (avcodec_open(gVideoCodecCtx, lVideoCodec) < 0) {
LOGE(1, "Error: cannot open the video codec!");
    return;
}
LOGI(10, "get video info ends"); 
```

如何使用 ffmpeg 库转置视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T08:35:41.547

如何使用 FFmpeg 解码客户 I/O

```
AVCodec *pCodec;
avcodec_register_all();
// Register all formats and codecs
av_register_all();

//av_init_packet(&packet);
if(avformat_network_init()!=0){
    goto initError; // Couldn't init new work
}
// Open video file

pFormatCtx = avformat_alloc_context();
printf("==========>>%p %lu\n", buff,sizeof(buff));
pFormatCtx->pb=av_malloc(buff_size);//pFormatCtx->pb=av_alloc_put_byte(buff,buff_size,0,NULL,NULL,NULL,NULL);
pFormatCtx->pb=avio_alloc_context(buff,buff_size,0,NULL,NULL,NULL,NULL);

pFormatCtx->iformat=av_find_input_format("h264");
pFormatCtx->flags = AVFMT_FLAG_CUSTOM_IO;
pFormatCtx->iformat->flags=AVFMT_NOFILE;

// Retrieve stream information
 if(avformat_find_stream_info(pFormatCtx,NULL)<0){
        goto initError; // Couldn't find stream information
}
 streamNo=-1;
// Find the first video stream
if ((streamNo =  av_find_best_stream(pFormatCtx,AVMEDIA_TYPE_VIDEO, -1, -1, &pCodec, 0)) < 0)
{
    av_log(NULL, AV_LOG_ERROR, "Cannot find a video stream in the input file %d\n",streamNo);
    goto initError;
} 
```

虽然我无法从我的缓冲区中找到流，但 streamNo 始终是 -1381258232 我的缓冲区是 void* buff int buff_size

# http - Tomcat 返回 http 响应码 400

> ID：12493905
> 
> 赞同：1
> 
> 时间：2012-09-19T11:36:13.537
> 
> 标签：http, rest, tomcat, httpurlconnection

我在谷歌上搜索了很长时间，但仍然找不到解决我的情况的方法。

我的 Tomcat 有时会返回异常：

```
Error in postRequest(): Server returned HTTP response code: 400 for URL: http://localhost:80/CITIUS2/webresources/entities.personainterna/ 
```

有时它有效，有时它返回这个异常，所以我真的不知道是什么原因......

连接功能：

```
public static String excutePost(String targetURL, String urlParameters) throws UnsupportedEncodingException {

    URL url;
    HttpURLConnection connection = null;
    String responseXML = null;

    try {
        //Create connection
        url = new URL(targetURL);
        connection = (HttpURLConnection) url.openConnection();
        byte[] requestXML = urlParameters.getBytes();

        connection.setRequestProperty("Content-Length", String.valueOf(requestXML.length));
        connection.setRequestProperty("Content-Type", "application/xml; charset=utf-8");

        connection.setRequestMethod("POST");

        connection.setDoOutput(true);
        connection.setDoInput(true);

        // Send the String that was read into postByte.
        OutputStream out = connection.getOutputStream();
        out.write(requestXML);
        out.close();

        // Read the response and write it to standard out.
        InputStreamReader isr = new InputStreamReader(connection.getInputStream());
        BufferedReader br = new BufferedReader(isr);
        String temp;
        String tempResponse = "";

        //Create a string using response from web services
        while ((temp = br.readLine()) != null) {
            tempResponse = tempResponse + temp;
        }
        responseXML = tempResponse;
        br.close();
        isr.close();
    } catch (java.net.MalformedURLException e) {
        System.out.println("Error in postRequest(): Secure Service Required");
    } catch (Exception e) {
        System.out.println("Error in postRequest(): " + e.getMessage());
    }
    return responseXML;
} 
```

@ 编辑：

一般构建成功，没有错误，Apache Tomcat 的输出窗口中只有这一项。

休息法：

```
@POST
@Consumes({"application/xml", "application/json"})
public Response create(Personainterna entity) {
    try {
        getJpaController().create(entity);
        return Response.created(URI.create(entity.getPersonaId().toString())).build();
    } catch (Exception ex) {
        return Response.notModified(ex.getMessage()).build();
    }
} 
```

# python - 将列表修剪为分隔符

> ID：12493909
> 
> 赞同：0
> 
> 时间：2012-09-19T11:36:25.030
> 
> 标签：python, list, trim, delimiter

说你有清单

```
`[1, 0, -1, 0, ';', 2, 0, 0, -1, ';', 0, 1, 0, -1, ';', 0, 1, -2, 0, ';', 0, 3, -6, 0, ';']` 
```

什么是最简单的方法来向后修剪说第二次出现';'，输出

`[1, 0, -1, 0, ';', 2, 0, 0, -1, ';', 0, 1, 0, -1, ';', 0, 1, -2, 0]`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T11:47:32.067

如果您有一个*列表*作为输入，您可以尝试`";"`从那里找到和工作的索引：

```
>>> L = [1, 0, -1, 0, ';', 2, 0, 0, -1, ';', 0, 1, 0, -1, ';', 0, 1, -2, 0, ';', 0, 3, -6, 0, ';']
>>> idx = [i for (i,v) in enumerate(L) if v == ";"]
>>> L[:idx[-2]]
[1, 0, -1, 0, ';', 2, 0, 0, -1, ';', 0, 1, 0, -1, ';', 0, 1, -2, 0, ';', 0, 3, -6, 0, ';'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:47:08.907

```
def get_part(lst,sep=';'):
    out = []
    for i in lst:
        if i == sep:
           yield out
           out = []
        else:
           out.append(i) 
```

（您已经从[上一个问题](https://stackoverflow.com/questions/12424759/conditionally-merge-lists)中获得）。

现在，要修剪它，我们需要转换为列表：

```
lst = list(get_part(yourlist))
output_list = []
for part in lst[:-2]:
   output_list.extend(part)
   output_list.append(';') 
```

* * *

但我之前的建议仍然有效。更好的数据结构是列表列表。

# jquery - 鼠标悬停时的jQuery暂停延迟计时器

> ID：12493912
> 
> 赞同：1
> 
> 时间：2012-09-19T11:36:37.450
> 
> 标签：jquery, css, jquery-ui

我目前正在学习 MVC3，并且在我的学习过程中一直在我的项目中添加几个 jQuery 脚本，试图同时学习。事情进展顺利，但在这种情况下，我似乎无法确切地弄清楚我必须做什么才能实现我想要的功能。

我在[这个 Fiddle](http://jsfiddle.net/vypTA/1/)中创建了一个相关代码的示例，而不是将代码写在几个代码块中。

在我的代码中发生的是，当按下按钮时，消息 div 从左侧滑出，3 秒后它会再次滑开。如果用户在消息 div 滑出时将鼠标放在消息 div 上，则会添加一条消息。

这几乎是我想要的，除了一点点补充；当用户将鼠标放在消息 div 上时，我希望它保持打开状态，直到他们将鼠标移开，然后它会滑回，目前它在 3 秒后仍会滑开。

我已经尝试过移动`.delay`，将代码添加到`mouseout()`事件中，但是我对 jQuery 的了解几乎阻止了我在这里的进展。

谁能解释如何做到这一点和/或指出一些例子。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:50:39.657

由于您在显示功能中调用 clear（因此延迟 3 秒），因此我建议使用以下 mouseover/mouseout 处理程序：

```
$("#messageWrapper").mouseover(function() {
    $("#testlabel").text("mouseover");
    $("#messageWrapper").css('width', 'auto');
    $("#messageWrapper .messageBox").text(something);
    $(this).clearQueue();
}).mouseout(function() {
    $("#testlabel").text("mouseout");
    clearMessages();
}); 
```

编辑过的小提琴： http: [//jsfiddle.net/vypTA/7/](http://jsfiddle.net/vypTA/7/) - 猜你可以调整清除延迟（将其作为arg或其他东西传递）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:45:52.723

这是[你](http://jsfiddle.net/vypTA/4/)想要达到的目标吗？

```
$("#messageWrapper").mouseover(function() {
    $("#testlabel").text("mouseover");
    $("#messageWrapper").css('width', 'auto');
    $("#messageWrapper .messageBox").text(something);
    $("#messageWrapper").stop(); // added this line
}).mouseout(function() {
    $("#testlabel").text("mouseout");
    clearMessages(); // added this line
}); 
```

# objective-c - uisearchbar uisearchdisplaycontroller tableview 字幕错误

> ID：12493913
> 
> 赞同：0
> 
> 时间：2012-09-19T11:36:37.777
> 
> 标签：objective-c, ios, xcode, searchbar, searchdisplaycontroller

我的表格视图搜索栏有点问题

我用数组 tableViewArray 制作了一个 tableview。
tableViewArray 由另一个数组的多行组成，该数组由 [text, distance] 组成。一切正常。
现在我添加了一个 searchBar 和一个 searchdisplaycontroller，它们基于一个新的字符串数组（来自 tableViewArray 的“文本”对象）进行搜索。我认为搜索应该只对文本可用，并且搜索方法是在其上实现的。

现在，当我得到搜索结果时，它看起来不错，并且搜索返回了预期的行。问题在于搜索 tableViews 字幕。它显示 tableViewArray 的第 1、2、3 行的距离。

我需要它将距离映射到搜索 tableview 行中显示的文本。我想我需要为包含[文本距离]的搜索结果创建一个新的表格视图数组。文本不是问题，因为它来自搜索结果，但是我如何将新距离映射到旧距离？？？

我在搜索委托中使用的搜索方法是：

```
searchResults = [[NSArray alloc]init];
NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"SELF contains[cd] %@",
                            searchText];
searchResults = [searchItems  filteredArrayUsingPredicate:resultPredicate]; 
```

希望有人可以提供帮助:) 在此先感谢！

原代码：

```
- (NSInteger)tableView:(UITableView *)theTableView numberOfRowsInSection:(NSInteger)section
{

    if (theTableView == self.searchDisplayController.searchResultsTableView) {
        return [searchResults count];
    } else {
        return [tableViewArray count];
    }
}  

- (UITableViewCell *)tableView:(UITableView *)theTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:     UITableViewCellStyleSubtitle
                                  reuseIdentifier: CellIdentifier] ;

     if (theTableView == self.searchDisplayController.searchResultsTableView) {

    } else {
         cell = [theTableView dequeueReusableCellWithIdentifier:CellIdentifier     forIndexPath:indexPath];
}

    // Configure the cell...
    // cell.textLabel.numberOfLines = 0;
   // cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;

    if (theTableView == self.searchDisplayController.searchResultsTableView) {
        cell.textLabel.text = [searchResults objectAtIndex:indexPath.row];
    } else {
        cell.textLabel.text = [[[tableViewArray objectAtIndex:indexPath.row]     objectAtIndex:0] subtitle];
}

    cell.detailTextLabel.textColor = [UIColor redColor];

float blabla=  [[[tableViewArray objectAtIndex:indexPath.row] objectAtIndex: 1] doubleValue];
if (blabla < 1000) {
         cell.detailTextLabel.text = [NSString stringWithFormat:@"%.2f m",blabla];
} else {
         cell.detailTextLabel.text = [NSString stringWithFormat:@"%.2f km",blabla/1000];
}

NSString *text = [[[tableViewArray objectAtIndex:indexPath.row] objectAtIndex:0] subtitle];
NSRange q8RangeValue = [text rangeOfString:@"Q8" options:NSCaseInsensitiveSearch];
NSRange okRangeValue = [text rangeOfString:@"OK" options:NSCaseInsensitiveSearch];

if (q8RangeValue.length >0  ) {
        cell.imageView.image = [UIImage imageNamed:@"q8.png"];
} else if (okRangeValue.length >0 ) {
        cell.imageView.image = [UIImage imageNamed:@"OK logo.png"];

} else {
        cell.imageView.image = nil;
}

return cell;
} 
```

我在哪里为搜索制作数组：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

NSLog(@"didUpdateToLocation Location calculator distance array for the tableView");

NSMutableArray * distancesInReverseOrder = [[NSMutableArray alloc] init];

for (int i = 0; i<allAnnotations.count; i++) {

NSIndexPath *indexPath = [NSIndexPath indexPathForRow:i inSection:0] ;
CLLocationCoordinate2D annotationCoord = [[allAnnotations objectAtIndex:indexPath.row] coordinate];

CLLocation *location = [[CLLocation alloc] initWithLatitude:annotationCoord.latitude  longitude:annotationCoord.longitude];

distanceToMe = [newLocation distanceFromLocation:location];

[distancesInReverseOrder insertObject:[NSNumber numberWithFloat: distanceToMe] atIndex:0];

}

distances = [[NSMutableArray alloc] initWithArray:[[distancesInReverseOrder reverseObjectEnumerator] allObjects]];

// Assuming you have your points on the map in an NSArray called
// allAnnotations and your distances in distances, create a
// new mutable array to hold both
tableViewArray = [[NSMutableArray alloc] init];

// Iterate over all of the points, and add a new element to the mutable
// array which is a new array containing a point and its distance
for (int i = 0; i < allAnnotations.count; i++) {
    NSArray *newItem = [NSArray arrayWithObjects: [allAnnotations objectAtIndex: i], [distances objectAtIndex: i], nil];
    [tableViewArray addObject: newItem];
}

// Now, sort the new array based upon the distance in the second element
// of each array (ie, the distance).
[tableViewArray sortUsingComparator: ^(id obj1, id obj2) {
    NSNumber *dist1 = [obj1 objectAtIndex:1];
    NSNumber *dist2 = [obj2 objectAtIndex:1];

    return [dist1 compare:dist2];
}];

searchResults = [NSMutableArray arrayWithCapacity:[tableViewArray count]];

searchItems = [[NSMutableArray alloc] init];

for (int i = 0; i < allAnnotations.count; i++) {
    NSArray *newItem = [NSArray arrayWithObjects: [[[tableViewArray objectAtIndex:i] objectAtIndex:0] subtitle], @"bla", nil];
    [searchItems addObject: newItem];
}

/*
for (int i=0; i<tableViewArray.count; i++) {
    [searchItems insertObject:[[[tableViewArray objectAtIndex:i] objectAtIndex:0] subtitle] atIndex:0];
}
*/

NSLog(@"searchitems count is %i", searchItems.count);

[tableView reloadData];

[locationManager stopUpdatingLocation]; 
```

}

```
 - (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
 /*
// Update the filtered array based on the search text and scope.
// Remove all objects from the filtered search array
[searchResults removeAllObjects];
// Filter the array using NSPredicate
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF.name contains[c] %@",searchText]; 
```

// searchResults = [NSMutableArray arrayWithArray:[[tableViewArray objectAtIndex:1] filteredArrayUsingPredicate:predicate]];

*/

```
/* 
```

searchResults = [[NSArray alloc]init];

```
NSPredicate *resultPredicate = [NSPredicate
                                predicateWithFormat:@"SELF contains[cd] %@",
                                searchText];

    searchResults =[searchItems filteredArrayUsingPredicate:resultPredicate];

*/

// Create index set of all objects in textArray that contain searchText:
NSIndexSet *set = [searchItems indexesOfObjectsPassingTest:
                   ^BOOL(NSString *text, NSUInteger idx, BOOL *stop) {
                       NSRange range = [text rangeOfString:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];
                       return (range.location != NSNotFound);
                   }];

// Filter textArray:
filteredTextArray = [searchItems objectsAtIndexes:set];
// Filter distanceArray:
filteredDistanceArray = [distances objectsAtIndexes:set];

NSLog(@"filtered text array is %@", filteredTextArray);
NSLog(@"filtered distance array is %@",filteredDistanceArray); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:06:11.243

如果我正确理解您的问题，您有 2 个单独的数组用作表格视图的数据源，我们称它们`textArray`为`distanceArray`.

现在您`textArray`根据搜索字符串进行过滤，您需要对`distanceArray`.

一种方法是替换`filteredArrayUsingPredicate`为`indexesOfObjectsPassingTest`，因为这会返回一组可以应用于两个数组的匹配索引：

```
// Create index set of all objects in textArray that contain searchText:
NSIndexSet *set = [textArray indexesOfObjectsPassingTest:
    ^BOOL(NSString *text, NSUInteger idx, BOOL *stop) {
        NSRange range = [text rangeOfString:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];
        return (range.location != NSNotFound);
    }];

// Filter textArray:
filteredTextArray = [textArray objectsAtIndexes:set];
// Filter distanceArray:
filteredDistanceArray = [distanceArray objectsAtIndexes:set]; 
```

现在您可以使用`filteredTextArray`和`filteredDistanceArray`作为搜索表视图的数据源。

**或者**，如果数组中的每个对象都是例如包含一行文本和距离的字典，则可以使用单个数组作为数据源。

**更新：**据我所知，您的每个项目`tableViewArray`都是一个包含 2 个项目的数组（一个用于文本，一个用于距离）。

在这种情况下，我建议`tableViewArray`直接过滤：

```
NSIndexSet *set = [tableViewArray indexesOfObjectsPassingTest:
                   ^BOOL(NSArray *item, NSUInteger idx, BOOL *stop) {
                       NSString *subtitle = [[item objectAtIndex:0] subtitle];
                       NSRange range = [subtitle rangeOfString:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];
                       return (range.location != NSNotFound);
                   }];

searchResults = [tableViewArray objectsAtIndexes:set]; 
```

现在`searchResults`是过滤后的数组，每个项目的结构都与`tableViewArray`.

这简化了 中的事情`cellForRowAtIndexPath`，例如

```
if (theTableView == self.searchDisplayController.searchResultsTableView) {
    cell.textLabel.text = [[[searchResults objectAtIndex:indexPath.row] objectAtIndex:0] subtitle];
     distance = [[[searchResults objectAtIndex:indexPath.row] objectAtIndex: 1] doubleValue];
} else {
    cell.textLabel.text = [[[tableViewArray objectAtIndex:indexPath.row] objectAtIndex:0] subtitle];
    distance = [[[tableViewArray objectAtIndex:indexPath.row] objectAtIndex: 1] doubleValue];
} 
```

# log4net - 记录 log4net 数值级别值

> ID：12493915
> 
> 赞同：2
> 
> 时间：2012-09-19T11:36:52.030
> 
> 标签：log4net

我想在使用 log4net 时记录对应于日志级别的数值。也就是说，现在我正在使用以下命令文本登录到数据库：

```
<commandText value="INSERT INTO Log ([Date],[Thread],[Level],[Logger],[Message],[Exception]) VALUES (@log_date, @thread, @log_level, @logger, @message, @exception)" />

   <parameter>
    <parameterName value="@log_level" />
    <dbType value="String" />
    <size value="50" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%level" />
    </layout>
  </parameter> 
```

我想将日志记录级别的字符串值更改为数字。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T17:41:16.867

我没有对此进行测试，但以下应该可以工作。

您可以像这样创建自己的转换器：

```
sealed class NumericLevelPatternConverter : PatternLayoutConverter 
{
    override protected void Convert(TextWriter writer, LoggingEvent loggingEvent)
    {
        // maybe you need to call ToString() on the value property
        writer.Write( loggingEvent.Level.Value ); 
    }
} 
```

并在配置文件中：

```
<layout type="log4net.Layout.PatternLayout">
    <converter>
        <name value="levelId" />
        <type value="YourNamespace.NumericLevelPatternConverter" />
    </converter>
    <conversionPattern value="%levelId" />
</layout> 
```

# git - 从 JGit 中的 RevCommit 对象获取提交信息

> ID：12493916
> 
> 赞同：5
> 
> 时间：2012-09-19T11:36:52.030
> 
> 标签：git, jgit

我调用了 jgit log 命令并取回了一些 RevCommit 对象。我可以从中取回一些基本信息，并使用以下代码获取更改的文件列表。不过，我还需要两件事：

1）当提交没有父母时，我如何获得以下信息？

2）如何获取每个文件中更改的内容的差异

```
RevCommit commit = null;

RevWalk rw = new RevWalk(repository);

RevCommit parent = null;
if (commit.getParent(0) != null) {
   parent = rw.parseCommit(commit.getParent(0).getId());
}

DiffFormatter df = new DiffFormatter(DisabledOutputStream.INSTANCE);
df.setRepository(repository);
df.setDiffComparator(RawTextComparator.DEFAULT);
df.setDetectRenames(true);

List<DiffEntry> diffs = df.scan(parent.getTree(), commit.getTree());
for (DiffEntry diff : diffs) {
   System.out.println(getCommitMessage());

   System.out.println("changeType=" + diff.getChangeType().name()
           + " newMode=" + diff.getNewMode().getBits()
           + " newPath=" + diff.getNewPath()
           + " id=" + getHash());
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T15:06:07.663

1）使用重载`scan`方法 with`AbstractTreeIterator`并在没有父级的情况下调用如下：

```
df.scan(new EmptyTreeIterator(),
        new CanonicalTreeParser(null, rw.getObjectReader(), commit.getTree()); 
```

没有父级的情况仅适用于初始提交，在这种情况下，差异的“之前”为空。

2）如果您想要`git diff`样式输出，请使用以下内容：

```
df.format(diff); 
```

并且差异将被写入传递给构造函数的输出流。因此，要单独获取每个差异，应该可以`DiffFormatter`每个文件使用一个实例。或者您可以使用`DiffFormatter`带有 a 的一个`ByteArrayOutputStream`，获取内容并在格式化下一个文件之前将其重置。大致是这样的：

```
ByteArrayOutputStream out = new ByteArrayOutputStream();
DiffFormatter df = new DiffFormatter(out);
// ...
for (DiffEntry diff : diffs) {
    df.format(diff);
    String diffText = out.toString("UTF-8");
    // use diffText
    out.reset();
} 
```

请注意，Git 不知道文件的编码，这必须在`toString()`方法中指定。这里它使用一个合理的默认值。根据您的用例，您最好不要使用`toByteArray()`.

* * *

一般注意事项：确保您始终释放`RevWalk`和`DiffFormat`使用`release()`.

# cakephp - CakePHP 2 Bake 无法创建模型

> ID：12493920
> 
> 赞同：1
> 
> 时间：2012-09-19T11:37:03.727
> 
> 标签：cakephp, cakephp-2.2, cakephp-bake

我正在尝试通过 Cake Bake 命令创建模型。我正在使用 Windows 和 II7。我已经在系统路径上设置了全局变量，所以我可以在我的命令提示符上做“蛋糕烘焙”。

我在 App/config/database.php 中定义了我的数据库配置

完成后，按 M 选择模型，然后选择默认数据库，控制台显示以下消息：

```
Your database does not have any tables. 
```

而且我无法为我的项目创建任何模型。

如果我在我的数据库上手动创建一个表，错误会发生变化并显示：[http ://www.subirimagenes.com/imagen-picture-8000920.html](http://www.subirimagenes.com/imagen-picture-8000920.html)

它有什么问题？当然，如果我刚刚安装了 Cake，我就没有桌子了！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:34:09.230

首先，使用**phpMyAdmin** (localhost/phpmyadmin) 创建表。

然后，如果您在**app/config/database.php**中正确配置了数据库配置，您将在可以创建的 Bake 脚本中看到模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:38:21.640

请参阅以下链接以获取蛋糕烘焙的分步方法

[http://book.cakephp.org/2.0/en/console-and-shells/code-generation-with-bake.html](http://book.cakephp.org/2.0/en/console-and-shells/code-generation-with-bake.html) http://www.jamesfairhurst.co.uk/posts/view/baking_with_cakephp

您还可以检查此错误的环境变量设置

# java - @JoinTable 的 HIBERNATE_IDX 是什么

> ID：12493921
> 
> 赞同：1
> 
> 时间：2012-09-19T11:37:04.740
> 
> 标签：java, hibernate

我从不这样做，但我项目中的某个人在 Foo 和 Bar 之间创建了多对多关系。Foo 和 Bar 都有唯一的系统生成 ID。在 Foo 上，我有以下代码：

```
 @ManyToMany(targetEntity = Bar.class, cascade = CascadeType.ALL, fetch = FetchType.EAGER)
  @JoinTable(name = "FOO_BAR_LNK", 
      joinColumns = {@JoinColumn(name = "FOO_ID", referencedColumnName = "ID")}, 
      inverseJoinColumns = {@JoinColumn(name = "BAR_ID", referencedColumnName = "ID")})
  private Set<Bar> bars; 
```

创建表时，它有 3 列，HIBERNATE_IDX、FOO_ID 和 BAR_ID。HIBERNATE_IDX 包含全零。

什么是 HIBERNATE_IDX？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:42:15.717

似乎 HIBERNATE_IDX 是决胜局的一部分，以保证连接表上的唯一索引并防止笛卡尔积。有点拼凑，但我就是这么想的。

# php - 如何添加 lastInsertId()？

> ID：12493923
> 
> 赞同：-2
> 
> 时间：2012-09-19T11:37:12.587
> 
> 标签：php, sql, pdo, lastinsertid

> **可能重复：**
> [无法让 mysql_insert_id() 工作](https://stackoverflow.com/questions/12490165/cant-get-mysql-insert-id-to-work)

我想在这个函数上使用**lastInsertId()打印最后插入的 id：**

```
private function adduser() {

    if (!empty($this->error)) return false;

    $params = array(
        ':user_level' => parent::getOption('default-level'),
        ':name'       => $this->name,
        ':email'      => $this->email,
        ':username'   => $this->username,
        ':password'   => parent::hashPassword($this->password)
    );

    parent::query("INSERT INTO `login_users` (`user_level`, `name`, `email`, `username`, `password`)
                    VALUES (:user_level, :name, :email, :username, :password);", $params);

    $shortcodes = array(
        'site_address'  =>  SITE_PATH,
        'full_name'     =>  $this->name,
        'username'      =>  $this->username,
        'email'         =>  $this->email,
        'password'      =>  $this->password
    );

    $subj = parent::getOption('email-add-user-subj');
    $msg = parent::getOption('email-add-user-msg');
    $cid = parent::lastInsertId();

    if(!parent::sendEmail($this->email, $subj, $msg, $shortcodes))
        $this->error = _('ERROR. Mail not sent');

    $this->result = "<div class='alert alert-success'>" . sprintf(_('Successfully added user <b>%s</b> to the database. Credentials sent to user.'), $cid) . "</div>";

} 
```

我已经添加了这个：

```
$cid = parent::lastInsertId(); 
```

然后在此处添加**$cid**：

```
$this->result = "<div class='alert alert-success'>" . sprintf(_('Successfully added user <b>%s</b> to the database. Credentials sent to user.'), $cid) . "</div>"; 
```

但我不断得到：

```
Fatal error: Call to undefined method Generic::lastInsertId() in 
```

数据库连接如下所示：

```
public function dbConn() {

    include(dirname(__FILE__) . '/config.php');

    try {
        self::$dbh = new PDO("mysql:host={$host};dbname={$dbName}", $dbUser, $dbPass);
        self::$dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING );
    } catch (PDOException $e) {
        return '<div class="alert alert-error">'._('Database error: '). $e->getMessage() . '</div>';
    }

} 
```

任何想法我应该如何正确添加**lastInsertId()**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:52:21.960

代替

```
$cid = parent::lastInsertId(); 
```

和

```
self::$dbh->lastInsertId(); 
```

...因为（看起来）您的连接对象存储在`dbh`我们正在谈论的这个匿名类的字段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:43:18.490

LastInsertID 是 PDO 类的一个方法。

您在`Generic`没有方法的类上调用它`LastInsertID();`

# php - 建立一个mysqli db连接类和其他类使用它

> ID：12493927
> 
> 赞同：0
> 
> 时间：2012-09-19T11:37:34.987
> 
> 标签：php, oop, mysqli

抱歉这个愚蠢的问题是 php 中的 oop 新手……我有一个问题，我在编写一个 mysqli 类时会返回一个连接处理程序，该处理程序使我能够在其他类/方法中使用连接处理程序。我运行一个小型程序博客 n 想转换为 oop。这是我的工作代码示例。请在必要时为我重构。预先感谢。

```
$db_link = mysqli_connect(DB,HOST,DB_USER,DB,PASS,DB_NAME) or die(mysql_error());
class myDB extends mysqli
{
  public function getConfig($id, $db_link) // thanks cbuckley
 {
   $db_link = $this->db_link;
   $res = mysqli_query($this->db_link,"SELECT * from config where id='1'");
   $row = mysqli_fetch_array($res);
   return $row['option'];
  }    
} 
```

我已经定义了常量并且连接成功但选择不起作用。在索引页面上这是

```
include('inc/dbc.php'); 
$db = new MyDB(); 
echo $db->getConfig(1, $db_link); 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T00:53:30.507

你的问题不是很具体，我感觉你并没有真正意识到你的具体问题是什么。您已经接受了一个答案，该答案为您提供了一些代码，但将您置于错误的方向，因为它不能解决您的潜在问题并浪费代码。

如果您想利用 PHP 的 mysqli 扩展的面向对象接口并从中受益，您应该知道的第一件事是，`Mysqli`该类已经表示数据库连接（“链接”，因为它以过程方法命名）：

```
require('inc/dbc.php');

$dbConnection = new Mysqli(DB_HOST, DB_USER, DB_PASS, DB_NAME); 
```

已经是这样了。当然，您可能想在这里使用一些错误处理：

```
if ($dbConnection->connect_error)
{
    throw new Exception(
       sprintf('(#%d) %s', $dbConnection->connect_errorno,
                $dbConnection->connect_error)
    );
} 
```

抛出异常而不是假设`die('message')`已经完成，因为您可以轻松创建异常处理程序，以便您可以从中心位置向用户显示更有用的响应，而不是处理出现的每个异常错误情况（实际上是在该位置会在哪里`die`）。

您还可以记录并邮寄回溯，以便更轻松地修复问题。当然，您不需要使用异常，但是经验法则是`die`仅在您在一周内丢弃的脚本中使用，并且它不适用于面向对象的设计。

由于您在需要数据库连接的所有地方都需要此代码，因此您可以创建自己的连接对象以将这些部分组合在一起，因为它们属于一起：

```
class DatabaseException extends Exception
{
}

class DatabaseConnection extends Mysqli
{
    public function __construct($host, $user, $password, $database = "", $port = NULL, $socket = NULL) {

        parent::__construct($host, $user, $password, $database, $port, $socket);

        $this->throwConnectionExceptionOnConnectionError();
    }

    private function throwConnectionExceptionOnConnectionError() {

        if (!$this->connect_error) return;

        $message = sprintf('(%s) %s', $this->connect_errno, $this->connect_error);

        throw new DatabaseException($message);
    }
} 
```

用法实际上非常简单并且非常相同，只是类的名称有所不同，并且需要加载它的定义：

```
require('inc/dbc.php');
require('inc/database.php');

$dbConnection = new DatabaseConnection(DB_HOST, DB_USER, DB_PASS, DB_NAME); 
```

如所写，连接对象已经代表您的数据库连接。因此，应用程序中需要它的每个部分都必须请求它。让我们回顾一下您的示例函数：

```
function getOption($id, $db_link)
{
   // $db_link = $this->db_link;
   $res = mysqli_query($this->db_link,"SELECT * from config where id='1'");
   $row = mysqli_fetch_array($res);
   return $row['option'];
} 
```

我重命名了函数并评论了第一行，即使这可能是你想要的。实际上，*如果*该函数是`DatabaseConnection`对象的一部分，它可以像这样工作：

```
class DatabaseConnection extends Mysqli
{
    ...

    public function getOption($id) {
        $statement = $this->prepare('SELECT `option` FROM config WHERE id=?');
        $statement->bind_param('i', $id);
        $statement->execute();
        $statement->bind_result($option);
        $statement->fetch();
        $statement->close();
        return $option;
    } 
```

如本例所示，数据库连接已经存在。但是，这是不可取的。想象一下，你不仅有选择，还有这个、那个等等等等等等。您将在一个类中创建一个又一个函数。好吧，对于一个甚至可以正常工作的小应用程序，但想像得越来越多。你会得到一个非常大的班级，负责很多事情。所以这样做会很糟糕，即使你可以使用`$this`已经准备好的语句。

另请注意，您应该准备声明。这已经在这里回答了无数次，如果您不习惯，请阅读它，值得一读。有更好的方法可以在进入面向对象的过程中不重复代码（DRY：不要重复自己）（您甚至应该已经使用程序来做到这一点）。

为了将所有这些都放在一个类中会是一个问题，而是将它放在它自己的类中：

```
class DatabaseModelBase
{
    protected $connection;

    public function __construct(Connection $connection) {
        $this->connection = $connection;
    }

    protected function prepare($query) {
        $connection = $this->connection;
        $statement = $connection->prepare($query);
        if (!$statement) {
            throw new DatabaseException(
                sprintf('(%s) %s', $connection->error, $connection->errno)
            );
        }
        return $statement;
    }
}

class Option extends DatabaseModelBase
{
    public function find($id) {
        $statement = $this->prepare('SELECT `option` FROM config WHERE id=?');
        $statement->bind_param('i', $id);
        $statement->execute();
        $statement->bind_result($option);
        $statement->fetch();
        $statement->close();

        return $option;
    }
} 
```

这再次具有一些扩展的错误处理，因为大多数错误是在 SQL 查询中发生的。正如您所看到的，获取某些特定数据的单个函数被放置在它自己的类中。您可以使用此类类对特定数据类型的获取和更新进行分组。

完整用法：

```
$dbConnection = new Connection(DB_HOST, DB_USER, DB_PASS, DB_NAME);

$option = new Option($dbConnection);

$optionValue = $option->find(1);

echo $optionValue; # value for option with ID1 
```

对象的名称`Option`可能不太好，我试图使示例保持轻量级，但也提供了一些分离。`Option`对于其他场景，您可能希望更喜欢一些不同的方式来访问数据库连接，因为它是通过它的构造函数注入的，`Option`不再处理如何创建数据库连接的细节。

例如，您可以使数据库连接对象更智能，仅在第一次实际使用准备或查询时连接到数据库。这样对您网站的不需要数据库连接的请求就不会不必要地连接到数据库。

您可以在其他问题中找到更多示例，并且您可能想了解依赖注入。此外，您总是希望将事物彼此分开，因此您有一些彼此仅轻微连接的对象。

*   [如何使用已弃用的 mysql_* 函数成功重写旧的 mysql-php 代码？](https://stackoverflow.com/questions/10919277/how-to-successfully-rewrite-old-mysql-php-code-with-deprecated-mysql-functions)
*   [依赖注入简单实现](https://stackoverflow.com/questions/2030624/dependency-injection-simple-implementation)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T11:45:21.750

我建议在类中也将连接移动到数据库：

```
class myDB extends mysqli
{
  private $link;

  public function Connect()
  {
    $this->link = mysqli_connect(DB,HOST,DB_USER,DB,PASS,DB_NAME) or die(mysql_error());
  }

  public function getConfig($id) // thanks cbuckley
  {
     $res = mysqli_query($this->link,"SELECT * from config where id='$id'");
     $row = mysqli_fetch_array($res);
     return $row['option'];
   }    
} 
```

并像这样使用它：

```
include('inc/dbc.php'); 
$db = new MyDB();
$db->Connect(); 
echo $db->getConfig(1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T12:23:29.130

我建议您将 mysqli 类包装在一个新的类中，而不是对其进行扩展：对于那些需要配置的类，只需包含具有依赖注入的配置即可。这给您带来的好处是，您需要配置的代码不需要了解方式，配置获取其值。如果您稍后决定从iniFile 解析配置，您只需要更改配置类，或者更好的是，编写一个实现配置接口的新类并注入新的配置类。

```
class Configuration implements ConfigurationInterface{
        private $mysqli;

        public function construct(mysqli $mysqli) {
            $this->mysqli = $mysqli;
        }

        public function get($key) 
        {
            // You should escape this query to prevent SQL-injection
            $res = $this->mysqli->query("SELECT * from config where id='$key'");
            $row = $res>fetch_array();
            return $row['option'];
        }
    }

interface ConfigurationInterface {
    public get($key);
} 
```

像这样使用它：

```
$mysqli = new mysqli('localhost', 'root', 'pw', 'my_db');
$config = new Configuration($mysqli);

var_dump($config->get(0)); 
```

# django-views - 如何从 django 过滤器中的日期时间字段中提取日期

> ID：12493929
> 
> 赞同：1
> 
> 时间：2012-09-19T11:37:40.123
> 
> 标签：django-views

在我看来，我已经使用了这个查询..

```
temp2=transaction.objects.filter(user_id=client_obj,Date_of_trans.date()=rec_var1)[0].Trans_Amount 
```

我需要将我的模型中存在的名为 Date_of_trans 的日期时间字段与从用户收到的变量进行比较，但代码不起作用......应该编写什么查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:00:08.397

这基本上是一个**sql 查询**。所以你应该这样想。你怎么能在sql中做到这一点。我的意思**是您将在 sql 中应用什么条件**。要使用 datetime 字段查找特定日期的记录，您应该**检查一天开始到一天结束之间的记录**。

尝试这个

```
from datetime import datetime, time
temp2=transaction.objects.filter(user_id=client_obj,Date_of_trans>datetime.combine(rec_var1, time(0,0,0)), Date_of_trans <= datetime.combine(rec_var1, time(23,59,59)) )[0].Trans_Amount 
```

上面的代码是考虑到**rec_var1 是一个 date()**对象而编写的。

在这里，您可以检查一天开始到一天结束之间的所有交易。我认为这将解决您的问题。

我使用了 datetime.combine 函数，它结合了日期和时间对象来形成这里需要的 datetime 对象。

谢谢

# java - 检查一个字符串是否有四个连续的字母以升序或降序排列

> ID：12493931
> 
> 赞同：4
> 
> 时间：2012-09-19T11:37:44.177
> 
> 标签：java, regex, string, automata

美好的一天堆栈溢出。

我是使用正则表达式的菜鸟，这是我的问题 - 如果密码包含 4 个连续字符，我需要检查它。到目前为止，我刚刚介绍的是关于数字的。这是我的正则表达式：

升序数字 - ^。*?(?:0123|1234|2345|3456|4567|5678|6789)。*$

递减数字 - ^. *?(?:9876|8765|7654|6543|5432|4321|3210)。*$

这仅适用于数字。我知道这在正则表达式中已经是一种矫枉过正，所以我不想用字母来做。如果我这样做，那就太矫枉过正了。

abcdblah //因为 abcd 而为真

helobcde //true 因为 bcde

dcbablah //真正的因为 dcba

heloedcb //true 因为 edcb

任何帮助将不胜感激。感谢堆栈溢出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T11:42:02.200

答案很简单：不要使用正则表达式。

使用这种方法：

*   遍历每个字母（当然，跳过最后一个树字母）
    *   遍历接下来的三个字母并检查升序
        *   如果它们都在上升，则返回 true。
    *   遍历接下来的三个字母并检查降序
        *   如果它们都在下降，则返回 false。
*   返回假

在代码中，这看起来像这样（未经测试的代码）：

```
public boolean checkForAscendingOrDescendingPart(String txt, int l)
{
    for (int i = 0; i <= txt.length() - l; ++i)
    {
        boolean success = true;
        char c = txt.charAt(i);
        for (int j = 1; j < l; ++j)
        {
            if (((char) c + j) != txt.charAt(i + j))
            {
                success = false;
                break;
            }
        }
        if (success) return true;

        success = true;

        for (int j = 1; j < l; ++j)
        {
            if (((char) c - j) != txt.charAt(i + j))
            {
                success = false;
                break;
            }
        }
        if (success) return true;
    }
    return false;
} 
```

祝你好运！
堆栈溢出 ：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T11:46:16.267

这是一个不使用正则表达式的想法：所有字符都有一个 ansi 值并且通常是连续的。所以 abcd 应该有下面的 ansi 值：64,65,66,67

伪代码：

```
for (i=string.start;i<string.end-4;i++) {
   check=string.substring(i,4);
   c1=check.substring(0,1);
   c2=check.substring(1,1);
   c3=check.substring(2,1);
   c4=check.substring(3,1);
   if (c1.ansival==c2.ansival+1 && c2.ansival==c3.ansival+1 && c3.ansival==c4.ansival+1) {
      return false;
   } else {
      return true;
   }
} 
```

也以相反的顺序重复（c1.ansival+1==c2.ansival）降序

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T11:43:17.950

除了列出您想要匹配的每个可能序列的“过度杀伤”解决方案之外，没有办法使用正则表达式来解决这个问题。正则表达式的表达力不足以提供更好的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T12:09:53.013

这是我的解决方案。它只使用一个循环。

请记住，如果要将其限制为纯 ASCII，则需要更多逻辑。

```
static boolean isWeak(String pass) {
  Character prev = null;
  Boolean asc = null;
  int streak = 0;
  for (char c : pass.toCharArray()) {
    if (prev != null) {
      switch (c - prev) {
      case -1:
        if (Boolean.FALSE.equals(asc)) streak++;
        else { asc = false; streak = 2; }
        break;
      case 1:
        if (Boolean.TRUE.equals(asc)) streak++;
        else { asc = true; streak = 2; }
        break;
      default: asc = null; streak = 0;
      }
      if (streak == 4) return true;
    }
    prev = c;
  }
  return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T11:45:29.790

考虑这个

```
String s = "aba";
for (int i = 0; i < s.length() - 1; i++) {
    if (!(Character.isLetter(c1) && Character.isLetter(c2))) {
            //reject
    } 
    if ((int)s.charAt(i) > (int)s.charAt(i + 1))) {
        //reject
    } 
```

}

对于 s，if 语句为真，因此您可以拒绝它。如果 s 是 abc，那么 if 语句永远不会为真。

上面的代码使用`>`升序检查。用于`<`降序

# python - 命令行 Python 应用程序中的多行用户输入

> ID：12493934
> 
> 赞同：6
> 
> 时间：2012-09-19T11:37:56.907
> 
> 标签：python, string, input, copy-paste

有没有简单的方法来处理**命令行 Python 应用程序中的多行用户输入**？

我一直在寻找没有任何结果的答案，因为我**不想**：

*   从文件中读取数据（我知道，这是最简单的方法）；
*   创建任何 GUI（让我们只使用命令行，好吗？）；
*   逐行加载文本（它应该一次粘贴，而不是输入，也不是逐行粘贴）；
*   分别处理每一行（我想将整个文本作为字符串）。

我想要实现的是**允许用户粘贴整个文本**（包含多行）**并将输入捕获为完全命令行工具中的一个字符串**。在 Python 中可能吗？

如果该解决方案在 Linux 和 Windows 环境中都有效，那就太好了（我听说某些解决方案可能会由于 cmd.exe 的工作方式而导致问题）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T12:05:08.913

```
import sys

text = sys.stdin.read() 
```

粘贴后，您必须通过发送文件结束控制字符（在 Linux 中为`ctrl`+ ，在 Windows 中为 +）来告诉 python 没有更多输入。`D``ctrl``Z``enter`

此方法也适用于管道。如果上面的脚本被调用`paste.py`，你可以这样做

```
$ 回声“你好” | 蟒蛇粘贴.py

```

并且`text`将等于`"hello\n"`。在windows中也是一样的：

```
C:\Python27>目录 | 蟒蛇粘贴.py

```

上面的命令会将输出保存`dir`到`text`变量中。当使用管道提供输入时，无需手动键入文件结尾字符——当程序创建输入完成时，python 将自动收到通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:00:24.190

您可以从剪贴板获取文本，而无需`raw_input()`用户粘贴多行文本的任何其他操作：

```
import Tkinter
root = Tkinter.Tk()
root.withdraw()

text = root.clipboard_get()

root.destroy() 
```

另请参阅 [如何使用 Python 将字符串复制到 Windows 上的剪贴板？](https://stackoverflow.com/q/579687/4279)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:43:53.470

利用 ：

`input = raw_input("Enter text")`

这些作为所有输入的字符串输入。因此，如果您粘贴整个文本，所有这些都将在`input`变量中。

**编辑：**显然，这仅适用于 Windows 上的 Python Shell。

# php - 使用 PHP preg_replace 删除？仅在它后面没有“=”符号的情况下

> ID：12493937
> 
> 赞同：0
> 
> 时间：2012-09-19T11:38:06.427
> 
> 标签：php, regex, preg-replace

我追求（如果可能的话），一个只会替换问号“？”的reg表达式 在我的字符串中没有“=”符号的情况下使用“'”？

例如，这是什么东西？，但这会保留吗？=永远

最终应该是：

这是东西'，但这会保留吗？=永远

谢谢

亩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:58:20.000

这很简单，使用负前瞻：使用

```
\?(?!=) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:49:17.307

只需检查一下......没有正则表达式的简单一个（我不知道正则表达式:(）...：p

```
$string = "this is something?, but this will remain?=forever";
$my_secret_replace = "THISISANYTHINGWHICHWILLNOTINSTRING_OR_ANYRANDOMNUMBER";

$temp_string = str_replace("?=",$my_secret_replace,$string);
$temp_string = str_replace("?","'",$temp_string);
$final_string = str_replace($my_secret_replace,"?=",$temp_string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:05:34.220

```
$string = "String contains ? and ?= contains too?=?";
echo preg_replace("/\?([^=]|$)/", "'\\1", $string); 
```

# mysql - MySQL如何将十进制值转换为度、分、秒

> ID：12493945
> 
> 赞同：1
> 
> 时间：2012-09-19T11:38:25.033
> 
> 标签：mysql, sql

我有一个十进制值说`123.77`

现在我想使用 MySQL将其转换为相应`degree`的 , `minute`,值。`second`我尝试了几种方法，但无法得到正确的答案。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:37:43.090

就是这样，

*   度的整个单位将保持不变（即在经度 121.135° 中，从 121° 开始）。
*   将小数乘以 60（即 0.135 * 60 = 8.1）。
*   整数变为分钟 (8')。
*   取剩余的小数并乘以 60。（即 0.1 * 60 = 6）。
*   结果数字变为秒 (6")。秒可以保留为小数。
*   将你的三组数字放在一起，使用度 (°)、分钟 (') 和秒 (") 的符号（即 121°8'6" 经度）

询问，

```
SET @deci = 123.77;
SELECT FLOOR(@deci) Degrees,

       FLOOR((@deci - (FLOOR(@deci))) * 60) Minutes,

       ((@deci - (FLOOR(@deci))) * 60 -
       FLOOR((@deci - (FLOOR(@deci))) * 60)) * 60 SECONDS 
```

[**SQLFIDDLE 演示**](http://sqlfiddle.com/#!2/d41d8/2139)

**[在线转换工具（用于检查）](http://web.library.uiuc.edu/asp/max/DD2DMS.asp)**

![在此处输入图像描述](../Images/876806578f7636cee279b684b3afcc2f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-08T14:42:02.587

John Woo 给出的答案虽然对正值是正确的，但对于负值不会给出正确的结果。我已经调整了他的答案以考虑到这一点。

```
SET @deci = -123.77;
SELECT SIGN(@deci)* FLOOR(ABS(@deci)) Degrees,
FLOOR((ABS(@deci) - (FLOOR(ABS(@deci)))) * 60) Minutes,
((ABS(@deci) - (FLOOR(ABS(@deci)))) * 60 -
FLOOR((ABS(@deci) - (FLOOR(ABS(@deci)))) * 60)) * 60 SECONDS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-22T04:34:26.687

通过借用不同的基于巴比伦的指标，跳出框框思考：

```
mysql> SELECT TIME_FORMAT("%H°%i'%s", SEC_TO_TIME(ROUND(3600 * -1.234)));
+-------------------------------------------------------------+
| TIME_FORMAT("%H°%i'%s", SEC_TO_TIME(ROUND(3600 * -1.234)))  |
+-------------------------------------------------------------+
| -01:14:02                                                   |
+-------------------------------------------------------------+
mysql> SELECT TIME_FORMAT("%H°%i'%s", SEC_TO_TIME(ROUND(3600 * -123.77)));
+--------------------------------------------------------------+
| TIME_FORMAT("%H°%i'%s", SEC_TO_TIME(ROUND(3600 * -123.77)))  |
+--------------------------------------------------------------+
| -123:46:12                                                   |
+--------------------------------------------------------------+ 
```

（这`ROUND`是为了避免在答案中获得小数点后 3 位。）

# cxf - apache cxf 拦截器属性

> ID：12493948
> 
> 赞同：0
> 
> 时间：2012-09-19T11:38:38.823
> 
> 标签：cxf, jax-rs, interceptor

我有以下拦截器

```
public class MyInterceptorextends AbstractPhaseInterceptor<Message>{
  public void handleMessage(Message message) throws Fault {
     message.put("myatt", "value");
  }
} 
```

我正在创建一个 JAXWS 客户端代理

```
 CalculatorService proxy = JAXRSClientFactory.create("http://eisoukr.victoria-insbg.com/API", CalculatorService.class, providers);
    ClientConfiguration config = WebClient.getConfig(proxy);
    config.getInInterceptors().add(new MyInterceptor()); 
```

如何从代理中读取“myatt”属性，或者是否有另一种方法可以在代理和拦截器之间交换属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:44:42.373

ClientConfiguration 上有一个 getResponseContext() 方法，可用于检索消息上设置的各种属性。

# java - 父子关系休眠

> ID：12493951
> 
> 赞同：1
> 
> 时间：2012-09-19T11:38:54.753
> 
> 标签：java, hibernate

我一直在尝试使用休眠重新创建父/子场景，我以此为例（休眠非常新）：

[http://www.mkyong.com/hibernate/hibernate-one-to-many-relationship-example-annotation/](http://www.mkyong.com/hibernate/hibernate-one-to-many-relationship-example-annotation/)

我的情况与此类似。我正在开发一个具有一些任务对象的项目，这些任务对象应该是某些任务流对象的一部分。

*   所以有两个实体任务和任务流。

*   任务流应该有许多或至少一个任务。

*   任务表中已经有一些任务，现在我想在任务流表中插入一些条目，以便任务流对象具有任务列表或任务集。

**忘了在我原来的问题中提到：**

*   任务可以在许多不同的任务流中

我的任务流看起来像：

```
class Taskflow{
   int taskflowid;
   String taskflowname;
   List<Task> tasklist;
} 
```

在数据库任务流中有 2 个字段`taskflowid`和`taskflowname`.

这就是任务的样子：

```
class Task{
 //many properties/fields
} 
```

考虑到这个例子，与我在谷歌上搜索的例子相比，Task 与 TaskFlow 之间总是存在某种关系。那有必要吗？我只想让任务流引用任务。我认为这一切都错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:50:29.693

如果您不声明关系，它将是简单的成员变量。为了让 hibernate 明白你有一对多的关系，你需要在一些 for 中指定它`.hbm`，`annotation`

```
@OneToMany //This for hibernate to understand that you have one to many relationship with Task
List<Task> tasklist; 
```

内部任务

```
@ManyToOne
Taskflow taskFlow 
```

请记住，默认名称将用于生成列名。请参考[这里的教程](http://www.dzone.com/tutorials/java/hibernate/hibernate-example/hibernate-mapping-one-to-many-using-annotations-1.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T11:53:30.440

Hibernate 支持不同基数（一对一、一对多/多对一、多对多）和不同方向性（单向或双向）的关系。

在您的情况下，您有一个多对多的关系，它可以是单向的（如果`Task`不需要包含`TaskFlow`它所属的所有 s 的集合），也可以是双向的。

例如，从`TaskFlow`到的单向关系`Task`：

```
class Taskflow {
    ...
    @ManyToMany
    private List<Task> tasks;
    ...
} 
```

**也可以看看：**

*   [第 7 章集合映射](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/collections.html)

# sql - 使用连接查询（许多 m:n 关系）

> ID：12493955
> 
> 赞同：0
> 
> 时间：2012-09-19T11:39:12.473
> 
> 标签：sql, ruby-on-rails, database, activerecord

我必须使用 Rails 的活动记录或 sql (sqlite) 执行以下查询。

让我们从模型的描述开始。

*   用户 1:n 兴趣
*   兴趣 m:n 类别
*   兴趣 m:n 地点
*   事件 m:n 类别
*   活动 m:n 地点

m:n 关系正在通过具有模式interests_categories、events_categories 等的第三个表来实现。

我有用户并且这些用户有兴趣（类别 -> 例如运动、音乐和他喜欢的位置）。事件被标记为位置和类别。

现在我想列出所有可能适合特定事件的用户。例如，如果有一个事件发生在纽约市并且有一些体育活动，我想根据位置和类别获取可能对此事件感兴趣的用户列表。

我想在单个数据库访问而不是多个数据库中进行。在 ActiveRecord 或 sql 中会是什么样子？（更有效的方法是首选）我可能必须先加入类别/位置表，根据先前加入的所有表加入兴趣，然后根据兴趣选择所有用户。不幸的是，我对连接 sql 的了解有限。或者甚至有不同的方法可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:07:43.843

经过一番思考，我认为这个加入会起作用。

```
class Events
  def get_users

User.joins(%"inner join interests on interests.user_id = users.id
             inner join categories_interests
               on categories_interests.interest_id = interests.id
             inner join categories on categories_interests.category_id = categories.id
             inner join interests_locations
               on interests_locations.interest_id = interests.id
             inner join locations on interests_locations.location_id = locations.id
             inner join categories_events on categories_events.category_id = categories.id
             inner join events_locations on events_locations.location_id = locations.id
             inner join events
               on categories_events.event_id = events.id
               and events_locations.event_id = events.id").where("events.id = :eid", :eid => id)

  end
end 
```

# c++ - 我应该在 Delphi 而不是 C++ Builder 中编写组件吗？如何向组件添加事件？

> ID：12493962
> 
> 赞同：2
> 
> 时间：2012-09-19T11:39:44.550
> 
> 标签：c++, delphi, events, components, c++builder

我使用 C++ Builder (XE2)，我需要开发一些在 Delphi 中也可以使用的 VCL 组件。据我了解，C++ Builder 支持 Delphi 代码和 Delphi 组件，但反过来不支持？如果是这样，最好开始用Delphi编写它，这样我就不会做双重工作？

我的问题的第二部分更具技术性；我知道如何在 VCL 组件中添加属性，但不知道如何添加事件。有人可以给我一个例子吗（无论是 Delphi 还是 C++ Builder）。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:33:04.350

*据我了解，C++ Builder 支持 Delphi 代码和 Delphi 组件，但反过来不支持？*

*在源代码级别 - 是的。但是，如果您选择无源分发您的库 - BPL+DCP+DCU - 那么这无关紧要，除了一些小的不兼容问题，例如 Delphi 缺少 [] 运算符和 C++ 缺少虚拟重载构造函数。*

***事实证明，这个估计是错误的。阅读下面雷米的评论***

* * *

最接近您的示例 ov 事件是 VCL 本身，源代码通常随 Delphi 一起提供。如果您有没有 VCL 源的 Delphi Starter/Trial - 然后获取任何开源 VCL 库或组件。例如 JediVCL 或基本上几乎任何带有源的 VCL 组件。例如，任何[“FWS”（免费提供源代码）](http://torry.net/pages.php?id=20)组件 99% 使用事件。

最基本和广泛使用的事件通知类型——例如 TButton.OnClick、TForm.OnCreate 等等——是 TNotifyEvent

打开该类型的[Delphi 帮助](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TNotifyEvent)。滚动到“另见”并在那里查看两个链接。

*   [过程类型](http://docwiki.embarcadero.com/RADStudio/en/Procedural_Types)类似于 C 中的**int (*f)(void)**。
*   [活动创建手册](http://docwiki.embarcadero.com/RADStudio/en/Creating_Events_-_Overview)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T11:43:24.080

如：（从about.delphi.com借来的代码）

```
type
  TState = (stStarted, stStopped);
  TStateChangeEvent = procedure
  (Sender : TObject; State : TState) of object;

  TThirdComponent = class(TSecondComponent) // or whatever
  private
    { Private declarations }
    FState  : TState;
    FOnStart,
    FOnStop  : TNotifyEvent;
    FOnStateChange  : TStateChangeEvent;
  protected
    { Protected declarations }
  public
    { Public declarations }
    constructor Create(AOwner : TComponent); override;
    destructor Destroy; override;
    procedure Start; override;
    procedure Stop; override;
    property State : TState
      read FState;
  published
    { Published declarations }
    property OnStart : TNotifyEvent
      read FOnStart
      write FOnStart;
    property OnStateChange : TStateChangeEvent
      read FOnStateChange
      write FOnStateChange;
    property OnStop : TNotifyEvent
      read FOnStop
      write FOnStop;
  end 
```

然后你可以做

```
procedure TThirdComponent.Start;
begin
  inherited; 
  FState := stStarted;
  if Assigned(OnStart) then OnStart(Self);
  if Assigned(OnStateChange) then 
    OnStateChange(Self, State);
end; 
```

# javascript - wordpress - 在帖子内容中找到最后一个锚标记并在之后显示文本

> ID：12493963
> 
> 赞同：1
> 
> 时间：2012-09-19T09:02:22.550
> 
> 标签：javascript

我有一个网站，其内容以这种格式显示：

```
<div id='foo'>
  <ul>
   <li>
      <a href=""></a>
      <a href=""></a>
   </li>
  </ul>
   <ul>
    <li>
       <a href=""></a>
       <a href=""></a>
    </li>
   </ul>
   <ul>
    some text
   </ul>
</div> 
```

我想找到最后一个锚标记，如果存在，那么我想抓取出现在最后一个锚标记之后的内容并将其显示在 div 中。我想从上面的例子中得到的预期结果/html是：

```
<ul>
    some text
</ul> 
```

做这个的最好方式是什么？

# .net - EF 代码优先和大型模型的性能

> ID：12493965
> 
> 赞同：3
> 
> 时间：2012-09-19T11:40:11.037
> 
> 标签：.net, performance, entity-framework, ef-code-first

以前，使用 EF 模型，虽然模型中的实体数量没有限制，但据说为了获得最佳性能，[模型应该限制在 200 或 400 个实体](http://thedatafarm.com/blog/data-access/entity-framework-designer-and-large-databases/)。虽然您可以拥有一个包含 400 多个实体的 EDMX，但 EF 可能会因此[变慢](http://blogs.msdn.com/b/adonet/archive/2008/11/24/working-with-large-models-in-entity-framework-part-1.aspx)。

使用 Code First，模型是否有推荐的尺寸限制？在可能遇到性能问题之前，我们是否对可以在模型中使用的实体数量设置了上限？我找不到这方面的信息...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:21:56.887

应用程序启动性能的主要原因是视图生成。鉴于 CodeFirst/DbContext API/EntityFramework.dll 只是在 System.Data.Entity.dll 之上构建的层，并且视图是由 System.Data.Entity.dll 生成的，我假设您可能期望类似的行为考虑生成视图。

# javascript - 向服务器发送 json 数据返回 400 错误请求

> ID：12493966
> 
> 赞同：0
> 
> 时间：2012-09-19T11:40:12.287
> 
> 标签：javascript, jquery, json, post, http-post

我想将我的字符串值作为 json 数据发送到服务器，但我收到 400 错误请求。这是我如何发送数据的代码。

```
dataString = '{"comment":"'  +dataString+ '"}';
        dataString = '[' + dataString + ']';

         $.parseJSON(dataString);
         console.debug("After parsing : "+dataString);

        $(form_element).clearForm();
        $.ajax({
            type : "POST",
            url : loc,
            cache : false,
            data : dataString,
            dataType: 'json',
            contentType: "application/json",

            success : function(data) {
                console.debug("After success");
            } 
```

当我调试代码时，@RequestParameter“注释”具有空值。请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:42:18.363

parseJSON[函数](http://api.jquery.com/jQuery.parseJSON/)返回一个对象。

你应该做

```
var obj = $.parseJSON(dataString);

$.ajax({
        type : "POST",
        url : loc,
        cache : false,
        data : obj, 
```

那是假设你真的需要像你一样构建你的字符串。通常只构建你的对象而不是创建一个 json 字符串，解析它然后要求 jQuery 再次序列化它更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:30:38.687

我认为你应该传递 json 对象而不是 json 数组。

```
var dataString = '{"comment":"test"}';
    //dataString = '[' + dataString + ']';  //delete this, NOT array
var obj = $.parseJSON(dataString);
console.log(obj);

$.ajax({
    type : "POST",
    url : url,
    cache : false,
    data : obj,
    contentType:"application/json; charset=utf-8",
    dataType:"json",

    success : function(data) {
        console.debug("After success");
    }
}); 
```

# android - Android：设备重启后的现有处理程序？

> ID：12493968
> 
> 赞同：1
> 
> 时间：2012-09-19T11:40:24.463
> 
> 标签：android, android-handler

我有一个关于处理程序及其在设备重新启动时是否存在的问题，假设我已经使用延迟 3 小时执行了 3 个处理程序`postDelayed()`，我只是想知道，例如设备重新启动，这些线程是否仍然存在？还是我需要再次执行它们？如果是这样，我如何在设备重启后自动执行处理程序？我已经阅读了一些我需要依次启动接收器以运行服务的线程，但我真的很困惑如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:42:36.753

> 我只是想知道，例如设备重新启动，这些线程是否仍然存在？

不会。无论如何，它们在您的三个小时内也不存在，因为 Android 很可能首先终止了您的进程。请`AlarmManager`用于这样的定期工作。

> 如果是这样，我如何在设备重启后自动执行处理程序？

你没有。不过，您可以使用 a`BOOT_COMPLETED` `BroadcastReceiver`在 中重新安排警报`AlarmManager`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:43:15.483

重新启动后处理程序消失了。如果您想在 Android 启动时设置它们，您可以编写一个[始终在 Android 启动时启动](https://stackoverflow.com/questions/10428510/how-to-start-launch-application-at-boot-time-android)的系统应用程序。

# wso2 - 应用程序是否应该部署到 ESB？

> ID：12493969
> 
> 赞同：1
> 
> 时间：2012-09-19T11:40:29.617
> 
> 标签：wso2, soa, apache-servicemix

我刚刚观看了一个 youtube WSO2[网络研讨会](http://www.youtube.com/watch?v=1KXKppaOgtY&feature=plcp)，其中讨论了两个常见错误（15m 17s）：

1.  不要通过托管业务逻辑来使用代理代替服务容器
2.  不要通过托管协调逻辑来使用损坏的流程协调器

这对于 WSO2 产品集是有意义的，其中每个关注点都有不同的产品。

但是，从我从 camel/servicemix 邮件列表中可以看出，对于 (a) 企业集成、(b) 托管业务逻辑和 (c) 托管这三个问题，通常将 servicemix (或 fuseesb) + camel + activiti 结合起来协调逻辑。为了避免上面列出的错误，我应该创建单独的 servicemix 实例来分离关注点吗？例如：

1.  Servicemix 独立作为业务逻辑的服务容器（例如 osgi 应用程序）
2.  Servicemix +骆驼作为经纪人
3.  Servicemix + activiti 作为流程协调者

我想答案将取决于交易量。非常大的交易量需要在逻辑上分离关注点，而将关注点混合到单个部署中以实现较小的交易量可能是可以的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:50:57.620

对，我猜你已经自己提供了答案:)

这当然取决于负载。基本上每个用例都彼此不同。如果您期望代理的负载很高，最好隔离代理并将其仅用于代理，其他人也是如此。WSO2 堆栈只是提供了正确分离这些问题的答案。即使使用 WSO2，您也可以创建具有所有这些功能的单个碳实例。但不建议:)

问候，/女娲

# maven - 如何构建 EAR 子项目并使用 Jenkins 进行部署？

> ID：12493975
> 
> 赞同：1
> 
> 时间：2012-09-19T11:41:06.927
> 
> 标签：maven, deployment, jenkins

我的 Maven 项目有一堆像这样的子项目：

```
proj/
  projEAR/
  projCommon/ 
```

如何编译和构建 EAR 项目 + 将其同时部署到我的 Web 服务器？

我现在的做法是：

```
proj$ mvn clean install
[... builds everything ... ]
proj$ cd projEAR
projEAR$ mvn weblogic:deploy
[... deploys the EAR file ... ] 
```

我想用一个命令来做到这一点。就像是

```
proj$ mvn clean install projEAR/pom.xml weblogic:deploy 
```

这当然失败了，但我希望你明白......

**更新：** 这一切的原因是詹金斯只接受一个 pom 文件和命令。所以问题实际上是如何配置 Jenkins 来运行 Maven 两次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:21:39.363

Jenkins 的 weblogic-deployer-plugin 怎么样。它会将您的 ear 文件部署到 weblogic 实例。请参阅[**WebLogic 部署程序插件**](https://wiki.jenkins-ci.org/display/JENKINS/WebLogic+Deployer+Plugin)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:03:35.450

## 快速简便的解决方法

作为一种解决方法，我可以建议您使用一些 Jenkins 的插件，例如["M2 Extra Steps"](https://wiki.jenkins-ci.org/display/JENKINS/M2+Extra+Steps+Plugin)。它允许您在之前或之后执行额外的操作。它们通常在构建之后用于执行诸如生成文档或部署某些东西之类的事情。

我知道这很好用......因为我经常使用这个技巧:)

## 建议，没试过

此刻，我没有一个直接的答案。我真的不知道如何只用一个 Maven 命令来做到这一点。我会尝试附加 weblogic 部署阶段进行安装。

***ear 子模块***--> pom.xml

```
<build>
    [...]
    <plugins>
        [...]

        <plugin>
           <groupId>org.codehaus.mojo</groupId>
           <artifactId>weblogic-maven-plugin</artifactId>
           <version>2.9.1</version>
           <executions>
             <execution>
               <configuration>
                    [...]
               </configuration>
               <goals>
                 <goal>install</goal>
               </goals>
             </execution>
           </executions>
         </plugin>
     [...]
    <plugins>        
    [...]
<build> 
```

它应该可以工作，但再一次，我从未尝试过。

不要犹豫，给予反馈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:12:23.797

我无法让它与 Maven 一起工作。但我解决它的方式（在詹金斯）是

1.  使用父 pom的命令在 Jenkins 中创建*预构建步骤：proj/pom.xml*`mvn clean install`
2.  将主构建配置为`weblogic:deploy`使用 projEAR/pom.xml。

这会导致运行两个命令：首先`mvn clean install`是`mvn weblogic:deploy`.

# mysql - 安装 Agiletoolkit 我在哪里设置数据库测试的 mysql 密码？

> ID：12493980
> 
> 赞同：0
> 
> 时间：2012-09-19T11:41:32.647
> 
> 标签：mysql, atk4

我正在尝试敏捷工具包。当我尝试进行数据库测试时出现错误。

```
PDO error: SQLSTATE[HY000] [1045] Access denied for user 'root'@'localhost' (using password: YES)
DSN: mysql:host=localhost;dbname=example;charset=utf8 
```

然后有一个回溯，它并没有真正复制得很好（在这篇文章的末尾）

**背景**

我在我的 Windows 7 机器上安装了 WAMP。我已经为 mysql 设置了一个 root 密码，我还在 phpmyadmin3.5.1\config.inc.php 中设置了这个密码，所以 Phpmyadmin 可以工作，我可以在 phpmyadmin 中创建表等等。

我已将敏捷工具包复制到我的`www`目录中。它在 WAMP 创建的首页上显示为超链接。都好。当我点击它时，我得到了敏捷工具包，我得到了“你自己的敏捷工具包副本中的 Hello World”消息 -> 到目前为止一切都很好。

页面右上角有一些按钮 - 欢迎，示例...数据库测试...。当我单击“数据库测试”时，我收到如上所示的错误消息。

我假设在某个地方我需要告诉agiletoolkit 我的mysql root 密码。

但是我在哪里做或者我做其他事情。

提前致谢

* * *

这是完整的错误

```
http://localhost/agiletoolkit/?page=dbtest 
```

基本异常

数据库连接失败

附加信息：

```
PDO error: SQLSTATE[HY000] [1045] Access denied for user 'root'@'localhost' (using password: YES)
DSN: mysql:host=localhost;dbname=example;charset=utf8

C:\wamp\www\agiletoolkit\atk4\lib\BaseException.php:38 
```

堆栈跟踪：

```
C:\wamp\www\agiletoolkit\atk4\lib/BaseException.php :38     BaseException   BaseException->collectBasicData(Null, 1, 0)
C:\wamp\www\agiletoolkit\atk4\lib/AbstractObject.php    :292    BaseException   BaseException->__construct("Database Connection Failed")
C:\wamp\www\agiletoolkit\atk4\lib/DB.php    :67     sample_project_db   DB->exception("Database Connection Failed")
C:\wamp\www\agiletoolkit\atk4\lib/ApiCLI.php    :329    sample_project_db   DB->connect(Null)
C:\wamp\www\agiletoolkit\page/dbtest.php    :7  sample_project  Frontend->dbConnect()
C:\wamp\www\agiletoolkit\atk4\lib/AbstractObject.php    :189    sample_project_dbtest   page_dbtest->init()
C:\wamp\www\agiletoolkit\atk4\lib/ApiFrontend.php   :92     sample_project  Frontend->add("page_dbtest", "dbtest", "Content")
C:\wamp\www\agiletoolkit\atk4\lib/ApiWeb.php    :332    sample_project  Frontend->layout_Content()
C:\wamp\www\agiletoolkit\atk4\lib/ApiFrontend.php   :33     sample_project  Frontend->addLayout("Content")
C:\wamp\www\agiletoolkit\atk4\lib/ApiWeb.php    :208    sample_project  Frontend->initLayout()
C:\wamp\www\agiletoolkit/index.php  :15     sample_project  Frontend->main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:06:16.987

在“C:\wamp\www\agiletoolkit”中，您将看到一个名为 config-distrib.php 的文件。复制粘贴并将其重命名为 config.php 然后更改 dsn 进行连接。

DSN 表示数据源名称。

您将在 config.php 文件中找到以下行。

```
$config['dsn']='mysql://root:root@localhost/project'; 
```

您可以将其修改为

```
$config['dsn']='mysql://root:@localhost/YOURDATABASENAME'; 
```

默认情况下，数据库用户是“root”，密码是“”，您正在访问本地主机上的数据库。

另请检查，[此](http://agiletoolkit.org/learn/install/config)以获取更多信息。

# jsf - primefaces中树表崩溃的问题？

> ID：12493982
> 
> 赞同：0
> 
> 时间：2012-09-19T11:41:36.680
> 
> 标签：jsf, primefaces

我正在使用 primefaces 3.2，我正在使用 treetable，我正在尝试折叠树。但它没有被折叠。我没有使用任何事件。treetable 包含在 h:form 中，我正在使用布局提前致谢

# android - 如何获取用户的位置？

> ID：12493986
> 
> 赞同：1
> 
> 时间：2012-09-19T11:41:43.513
> 
> 标签：android, location, settings

我想在我的应用程序中获取用户的位置。所以，我阅读了文档并知道如何让它工作。但是，如果用户没有在偏好设置中设置“Alloy apps to use internet/GPS to get location”，我的应用就会崩溃。

我发现的唯一方法是显示未启用位置设置的对话框，并以编程方式转到位置首选项。

但是还有其他方法可以解决这个问题吗？我看到许多应用程序（如 yandex.maps）不要求启用此设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:49:39.710

好吧，如果用户不同意使用条款并允许请求的权限，则不应安装您的应用程序。

您仍然应该检查是否有一种方法可以在需要时查找信息。

在您的代码中，在实际测试用户位置之前，您可能应该调用一个检查所有位置管理器列表的函数，如果无法确定，则返回 false。

如果函数返回 false，您应该提示用户并且什么也不做。否则，你应该做你想做的事情。

尝试阅读[vogella 的关于使用位置管理器的教程](http://www.vogella.com/articles/AndroidLocationAPI/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:50:25.893

请参阅下面的这两个链接，您可能会很容易地得到答案。

[如何在 Android 中以编程方式获取当前 GPS 位置？](https://stackoverflow.com/questions/1513485/how-do-i-get-the-current-gps-location-programmatically-in-android)

[android - 如何获取当前位置的经纬度](https://stackoverflow.com/questions/6095919/android-how-to-get-current-location-latitude-and-longitude)

希望它会帮助你。

# jquery - jQuery UI Accordion - 单击链接并设置活动选项

> ID：12493988
> 
> 赞同：1
> 
> 时间：2012-09-19T11:42:01.263
> 
> 标签：jquery, jquery-ui

我有一个链接，单击该链接会转到用户消息。

我正在尝试获取它，以便在单击链接后加载页面时，第二个选项卡处于活动状态。

```
$("#messages").click(function(){
    $("#user-menu").accordion( "option", "active", 2 );
}); 
```

我在这里发现了一个类似的问题

[https://stackoverflow.com/questions/10681033/accordion-menu-active-state-after-link-click](https://stackoverflow.com/questions/10681033/accordion-menu-active-state-after-link-click)

但理想情况下，我正在寻找一个更优雅的解决方案。

对此的任何帮助将不胜感激，谢谢。

亚伦

# xml - XML Schema - 字符串列表

> ID：12493990
> 
> 赞同：14
> 
> 时间：2012-09-19T11:42:14.157
> 
> 标签：xml, list, schema

该元素必须具有“字符串列表”类型，并且可以出现`0`或多次出现该类型的信息。所以我所做的是：

```
<xs:element name="xxx" type="ooo" />

<xs:simpleType name="ooo">
   <xs:list itemType="xs:string" />
</xs:simpleType> 
```

我相信这是正确的，但是

我在哪里放在`minOccur`这里`maxOccur`？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-19T12:12:28.523

不幸的是，您的问题不清楚，因为它可能意味着多种事情。

一种可能的解释是您希望元素“xxx”出现在 0 到 x 次之间。这是通过在根元素内部定义一个序列来完成的。

```
<xs:simpleType name="ooo">
  <xs:restriction base="xs:string" />
</xs:simpleType>

<xs:element name="root">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="xxx" type="ooo" minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

您不能在根元素上指定 minOccurs 和 maxOccurs，因为 XML 中只能有 1 个根元素。但是您可以将序列定义为根元素的子元素，这就是上面示例中所做的。

现在，如果您希望“xxx”成为您的根元素，您可以有效地做同样的事情。这完全一样，除了一个名为“root”的元素，您现在有一个名为“xxx”的元素，而子元素被称为其他类型的“ooo”

```
<xs:simpleType name="ooo">
  <xs:restriction base="xs:string" />
</xs:simpleType>

<xs:element name="xxx">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="xxx-child" type="ooo" maxOccurs="unbounded" minOccurs="0" />
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

在您的示例中，“列表”类型的使用确实意味着我认为您认为它的含义。XSD 中的列表类型不定义元素序列，而是定义可以具有由空格分隔的值列表的单个元素。

```
<xs:simpleType name="ooo">
  <xs:list itemType="xs:string" />
</xs:simpleType>

<xs:element name="xxx" type="ooo" /> 
```

此架构定义生成的 XML 如下所示：

```
<xxx>item1 item2 item3 item4 item5</xxx> 
```

XML 实际上是由空格分隔的任意长度的字符串的无限列表。您可以为继承自的列表定义一个类型`xs:string`以限制值的类型，但我不知道限制长度的方法。

最后，我认为您要完成的工作与我上面关于“xxx”和“xxx-child”的建议之一接近，但只是重新格式化定义序列的位置。

```
<xs:complexType name="ooo">
  <xs:sequence minOccurs="0" maxOccurs="unbounded">
    <xs:element name="child" type="xs:string" />
  </xs:sequence>
</xs:complexType>

<xs:element name="xxx" type="ooo" /> 
```

生成的 XML 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<xxx>
  <child></child>
  <child></child>
  <child></child>
</xxx> 
```

最后一个选项还有其他变体，例如将 移动`minOccurs="0" maxOccurs="unbounded"`到`<xs:sequence>`“子”元素。在您的示例中，这根本不重要，因为这两个定义都会产生完全相同的 XML。但是如果你有 2 个子元素，那将意味着不同的东西：

```
<xs:complexType name="ooo">
  <xs:sequence minOccurs="0" maxOccurs="unbounded">
    <xs:element name="child1" type="xs:string" />
    <xs:element name="child2" type="xs:string" />
  </xs:sequence>
</xs:complexType> 
```

将产生这样的 XML（child1 后跟 child2 的序列将重复 x 次）：

```
<?xml version="1.0" encoding="utf-8"?>
<xxx>
  <child1></child1>
  <child2></child2>
  <child1></child1>
  <child2></child2>
  <child1></child1>
  <child2></child2>
</xxx> 
```

然而

```
<xs:complexType name="ooo">
  <xs:sequence>
    <xs:element name="child1" type="xs:string" minOccurs="0" maxOccurs="unbounded" />
    <xs:element name="child2" type="xs:string" minOccurs="0" maxOccurs="unbounded" />
  </xs:sequence>
</xs:complexType> 
```

会产生这样的 XML（child1 将重复 x 次，然后 child2 重复 y 次）：

```
<?xml version="1.0" encoding="utf-8"?>
<xxx>
  <child1></child1>
  <child1></child1>
  <child2></child2>
  <child2></child2>
  <child2></child2>
  <child2></child2>
  <child2></child2>
</xxx> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-01T20:54:36.320

为避免获取具有字段的对象，该字段具有字符串列表，您可能需要使用更简单的方法：

```
<xs:complexType>
    <xs:sequence>
        <xs:element name="stringList" block="extension"
            minOccurs="0" maxOccurs="unbounded" type="xs:string"/>
    </xs:sequence>
</xs:complexType> 
```

然后在生成的类中你会得到一个字段，它直接包含列表（不是对象）

```
List<String> stringList; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T11:48:06.140

这是我发现的一个代码示例，可能对您有所帮助：

```
<xs:element name="person">
<xs:complexType>
        <xs:sequence>
          <xs:element name="full_name" type="xs:string"/>
          <xs:element name="child_name" type="xs:string"
          maxOccurs="10" minOccurs="0"/>
        </xs:sequence>
</xs:complexType>
</xs:element> 
```

# java - 使用 Java 应用程序轮询 Web 服务器中的数据库

> ID：12493994
> 
> 赞同：0
> 
> 时间：2012-09-19T11:42:20.103
> 
> 标签：java, php, sql, netbeans-7

我正在尝试轮询服务器中的数据库并检查是否添加了任何新记录，如果有的话，我将使用新记录向 java 应用程序发送 http 请求。

这是 GET 请求：

```
public class PHPDataChecker implements Runnable {
public static String output;
public void run(){
  try {
    URL url = new URL("http://taxi.net/login.php");
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
    conn.setRequestMethod("GET");
    conn.setRequestProperty("Accept", "application/json");

    if (conn.getResponseCode() != 200) {
        throw new RuntimeException("Failed : HTTP error code : "
                + conn.getResponseCode());
    }

    BufferedReader br = new BufferedReader(new InputStreamReader(
        (conn.getInputStream())));

    System.out.println("Output from Server .... \n");
    while ((output = br.readLine()) != null) {
        System.out.println(output);
    }

    conn.disconnect();

  } catch (MalformedURLException e) {

    e.printStackTrace();

  } catch (IOException e) {

    e.printStackTrace();

  }

}
} 
```

我正在使用调度程序，这是代码：

```
public class Main {
 private static boolean canStop=false;
public static void stopPHPDataChecker() {
    canStop=true;
}
public static void runnner() {
    // Setup a task for checking data and then schedule it
    PHPDataChecker pdc = new PHPDataChecker();
    ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
    final ScheduledFuture<?> pdcHandle = scheduler.scheduleAtFixedRate(pdc, 0L, 10L, TimeUnit.MILLISECONDS);// Start schedule

    scheduler.schedule(new Runnable() {
       public void run() {
            System.out.println(">> TRY TO STOP!!!");
            pdcHandle.cancel(true);
            Main.stopPHPDataChecker();
            System.out.println("DONE");
        }

    }, 10L, TimeUnit.MILLISECONDS);

    do {
        if (canStop) {
            scheduler.shutdown();
        }
    } while (!canStop);

    System.out.println("END");
} 
```

另外两个程序定期轮询它

运行Main.java：

```
public class RunMain implements Runnable {
 public void run(){
     Main m=new Main();
     m.runnner();
 }} 
```

checkSchedule.java：

```
public class checkSchedule {
public static void main(String[] args) {
RunMain m = new RunMain();
ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
final ScheduledFuture<?> pdcHandle = scheduler.scheduleAtFixedRate(m, 0L, 10L, TimeUnit.SECONDS);
 }
} 
```

这不会正确轮询数据库编码有什么问题吗？

这是我在 nebeans IDE 中看到的输出

> 服务器输出 ....
> {"return":"0"}
> 服务器输出 ....
> {"return":"0"}
> 
> > 试着停下来！！！
> > DONE
> > END
> > 尝试停止！！！
> > DONE
> > END
> > 尝试停止！！！
> > DONE
> > END
> > 尝试停止！！！
> > DONE
> > END
> > 尝试停止！！！
> > DONE
> > END
> > 尝试停止！！！
> > DONE
> > END
> > 尝试停止！！！
> > DONE
> > END
> > 尝试停止！！！
> > DONE
> > END
> > 尝试停止！！！
> > DONE
> > END
> > 尝试停止！！！
> > 完成
> > 结束

# php - 获取上周的数据

> ID：12493995
> 
> 赞同：0
> 
> 时间：2012-09-19T11:42:22.987
> 
> 标签：php, mysql

我想要上周的所有数据。我用了

```
SELECT id FROM tbl
WHERE date >= curdate() - INTERVAL DAYOFWEEK(curdate())+6 DAY
AND date < curdate() - INTERVAL DAYOFWEEK(curdate())-1 DAY 
```

但是当我的一周从“星期一”开始时它不起作用。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:40:03.820

```
SELECT id FROM tbl WHERE date  >= CURDATE() - INTERVAL (WEEKDAY(CURDATE())+7) DAY  AND date   <  CURDATE()  - INTERVAL (WEEKDAY(CURDATE())) DAY 
```

我试试这个，它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:45:08.560

然后像这样改变

```
$lastweek = unix_to_human(time("Y-m-d H:i:s") - (7 * 24 * 60 * 60), TRUE, 'us');
SELECT id FROM tbl
WHERE date >= curdate() - $lastweek
AND date < curdate() - $lastweek 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:46:14.160

尝试

```
SELECT id FROM tbl
WHERE YEARweek(date) = YEARweek(curdate()) 
```

# c - CLONE_VM 标志使计时器不准确？

> ID：12493999
> 
> 赞同：0
> 
> 时间：2012-09-19T11:42:33.120
> 
> 标签：c, linux, multithreading, multiprocessing, system-calls

最近我遇到一个关于与多进程共享内存的问题。考虑下面的代码，主要目的是让子进程被定时器的信号处理程序报警，做一些输出。但令我困惑的是，当我在 clone() 函数中设置 CLONE_VM 标志时，itimer 可能会出错，并且输出文本会填满你的控制台。

**我期望的是：每秒打印“---Alarm！\n---ChildThread is awaked.\n---foo=10”。**

**实际情况是：重复打印上面的文字非常快。**

我想知道如何产生一个子进程并让它同时分享其父母的记忆。非常感谢。

```
#define _GNU_SOURCE

#include <stdio.h>
#include <signal.h>
#include <sched.h>
#include <stdlib.h>
#include <linux/sched.h>
#include <sys/time.h>

static volatile int foo = 100;

int pidChild;

void AlarmThread(int sig)
{
    printf("---Alarm!\n");
    kill(pidChild, SIGCONT);
}

int ChildThread(void *arg)
{
    raise(SIGSTOP);
    while(1)
    {
        printf("---ChildThread is awaked.\n");
        printf("---foo=%d\n", foo);     // If CLONE_VM is set, this variable may be changed by main thread.
        raise(SIGSTOP);
    }
    return 0;
}

int main(int argc, char **argv)
{
    void *stack = malloc(4000) + 4000;
    struct itimerval itimer;
    signal(SIGALRM, AlarmThread);
    pidChild = clone(ChildThread, stack, CLONE_VM | CLONE_SIGHAND, NULL);
    itimer.it_interval.tv_sec = 1;
    itimer.it_interval.tv_usec = 0;
    itimer.it_value = itimer.it_interval;
    setitimer(ITIMER_REAL, &itimer, NULL);   // Set up a 1 tick-per-sec timer.
    foo = 10;   // Test if the child thread shares the main thread's memory.
    while(1);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:16:36.837

我真的会警告你*不*要这样做。共享内存不仅仅意味着应用程序内存，还包括库内存（标准库和您可能使用的任何第三方库），并且它们可能还没有准备好让其他进程破坏其内部数据结构，尤其是当它们认为自己会破坏其内部数据结构时运行单线程。

如果您只是想要一个进程，以便将线程的可终止 PID 作为应用程序的公开可见界面的一部分，为什么不让实际代码在线程中运行，并生成一个无用的子进程，它什么都不做`for(;;)pause();`呢？然后，让线程通过退出来响应这个子进程的死亡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:34:23.500

> 但令我困惑的是，当我在 clone() 函数中设置 CLONE_VM 标志时，itimer 可能会出错，并且输出文本会填满你的控制台。

“可能出错”是什么意思？发生了什么？你期待什么？提问的时候需要说清楚。

CLONE_VM 几乎与 itimer 无关。您正在使用像这样的高级系统调用，甚至无法制定您正在尝试做什么以及为什么让我相信这是一项学校作业。