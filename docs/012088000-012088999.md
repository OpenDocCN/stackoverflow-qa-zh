# StackOverflow 问答 12088000-12088999

# jquery - AJAX按钮（只需一键）

> ID：12088000
> 
> 赞同：0
> 
> 时间：2012-08-23T08:48:59.297
> 
> 标签：jquery, ajax, button

我有一个 AJAX 函数，如下所示。该代码有一些我不知道如何解决的错误。我想要做的是，每次我单击一个按钮（仅一次），它会直接将该按钮的值保存到数据库中，但发生的事情是，它需要用户单击两次才能保存的值那个按钮。有没有人可以帮助我，因为我是 AJAX 和 jQuery 的新手？谢谢！！！

HTML

```
<fieldset>
<input type="radio" id="start2'+i+'" name="oris'+i+'" value="2" onClick="get(id,2);">
<input type="radio" id="start1'+i+'" name="oris'+i+'" value="1" onClick="get(id,1);">
</fieldset> 
```

AJAX

```
 function get(startId){
 var objectA = parseInt(startId.substr(4,1));
 var id = parseInt(startId.substr(5,1));
 var idNumber = "<?php echo $_GET['idNumber']; ?>";

 $('#start'+objectA+id).click(function(){

 jQuery.ajax({

 url: 'followingPage.php',
 type: 'post',
 data: {" field1value": + objectA, "idNumber": + idNumber, "id": +id  },
 success: function(results){
 top.location="submission.php?idNumber=<?=$_GET['idNumber'];?>";
 }
 });
 });
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:00:39.233

```
var flag = false;

 $('#start'+objectA+id).click(function(){
 if(flag){ return false; } //prevent multiple click
  flag = true;  
  //do your stuff here   

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:03:14.223

```
$(function(){
  $("input[type='radio']").click( function() {
     var idNumber = "<?php echo $_GET['idNumber']; ?>";
     jQuery.ajax({
       url: 'followingPage.php',
       type: 'post',
       data: {" field1value": + $(this).val(), "idNumber": + idNumber, "id": + $(this).attr("id")  },
       success: function(results){
         top.location="submission.php?idNumber=<?=$_GET['idNumber'];?>";
       }
     });
   });
 } 
```

像这样的东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:10:20.887

HTML部分添加

```
 <form onSubmit="return false;" >
    </form> 
```

# ruby-on-rails - Rails - fields_for循环中的增量变量

> ID：12088003
> 
> 赞同：0
> 
> 时间：2012-08-23T08:49:20.247
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我希望这是一个简单的问题 - 我有以下帮助代码：

```
module ApplicationHelper

  def add_feature_fields(feature_types, object_form_builder, actions_visible)
    feature_types.length.times {object_form_builder.object.features.build}
    i = 0
    fields = object_form_builder.fields_for :features do |features_builder|
      render :partial => "features/fixed_feature", :locals => {:feature => features_builder, :fixed_feature_type => feature_types[i], :form_actions_visible => actions_visible}
      i = i + 1
    end
  end
end 
```

代码按预期工作，除了行`i = i + 1`。出于某种原因，这似乎打破了循环，并且没有渲染任何内容。显然，我以某种方式做错了——也许 fields_for 不是一个正常的循环？

每次循环运行时，如何将 i 增加 1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:12:04.973

我不确定下面的代码，但围绕这个的东西应该可以解决问题。试一下

```
object_form_builder.each.with_index do |builder,index|
  object_form_builder.fields_for :features, builder do |feature_builder|
      render :partial => "features/fixed_feature", :locals => {:feature => features_builder, :fixed_feature_type => feature_types[i], :form_actions_visible => actions_visible}
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:12:36.900

我能够通过执行以下操作来完成此工作：

```
 module ApplicationHelper

  def add_feature_fields(feature_types, object_form_builder, actions_visible)
    feature_types.length.times {object_form_builder.object.features.build}
    i = -1
    object_form_builder.fields_for :features do |features_builder|
      i = i + 1
      render :partial => "features/fixed_feature", :locals => {:feature => features_builder, :fixed_feature_type => feature_types[i], :form_actions_visible => actions_visible}
    end
  end
end 
```

我相信发生的事情是，当我`i = i + 1`在调用渲染后执行此操作时，返回值是迭代器而不是渲染（因为该方法返回最后一个值）。

# c++ - 绘制像鼠标光标一样始终处于最顶部的移动图标，并适用于全屏应用程序

> ID：12088004
> 
> 赞同：1
> 
> 时间：2012-08-23T08:49:21.287
> 
> 标签：c++, windows, winapi, mouse

我需要绘制一个与鼠标光标大致同步移动并且始终位于所有窗口顶部的图标。操作系统：Windows 7

通过在最透明的窗口中绘制我的图标，我有一个解决方案可以在某种程度上发挥作用。此解决方案存在一些主要缺点，因为最顶层窗口会干扰其他最顶层窗口，并且某些全屏应用程序无法正常工作。示例是开始菜单和任务栏，如果我不经常将其设置为最顶部，它们将覆盖我的窗口。对于某些全屏应用程序，用图标更新窗口位置的性能会大幅下降，并且不能流畅地跟随鼠标。

我遇到了另一种方法，将图标直接绘制到桌面的设备上下文[绘制鼠标指针图标？](https://stackoverflow.com/questions/10823022/draw-mouse-pointer-icon). 这个解决方案有一个缺点，似乎没有很好的方法来删除“trail”，尤其是在桌面内容快速变化的情况下。

所以我的问题是：有没有没有上述问题的最终解决方案？是否可以在鼠标光标的“层”中绘制所有窗口上方？或者使用我将控制的自定义图标制作第二个鼠标光标（我知道寡妇可以显示两个独立控制的鼠标光标，如 CPNMouse）？

有人可以指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:03:56.557

使用通过 WS_EX_LAYERED / UpdateLayeredWindow 设置透明度的最顶层窗口。如果您也设置了 WS_EX_TRANSPARENT 样式，那么窗口将不会拦截鼠标输入。

# r - plyr ddply 并总结在 R 中的使用

> ID：12088006
> 
> 赞同：1
> 
> 时间：2012-08-23T08:49:25.437
> 
> 标签：r, dataframe, plyr, data.table, subset

嗨，我想避免使用循环，所以想使用 plyr 的东西来帮助解决我的问题。

我想创建一个函数，该函数从数据框中获取每个因子的特定选择列的总和。

因此，如果我们有以下示例数据...

```
df <- data.frame(cbind(x=rnorm(100),y=rnorm(100),z=rnorm(100),f=sample(1:10,100, replace=TRUE))) 
df$f <- as.factor(df$f) 
```

即我想要类似的东西：

```
foo <- function(df.obj,colname){
     some code
} 
```

其中 the`df.obj`将是`df`上面的变量，而 colname 参数可以是`x`,`y`或中的任何一个`z`。

并且我希望函数的输出/结果具有一列独特因素（在上述情况下为 1:10）以及每个因素的 x 列中的值的总和。

我希望解决方案非常简单，并且可能会使用`ddply`或`summarise`以某种方式但无法弄清楚如何做到这一点，以便我可以将列名作为参数。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:27:09.760

这就是你所追求的吗？

```
> ddply(df, .(f), colwise(sum))
    f          x           y          z
1   1 -0.4190284  2.61101681  1.2280026
2   2  1.1063977  2.40006922  4.9550079
3   3  0.4498366 -4.00610558  0.9964754
4   4  1.9325488 -2.81241212 -3.1185574
5   5 -4.1077670 -1.01232884 -3.9852388
6   6 -1.0488003 -2.42924689  3.5273636
7   7  2.2999306  0.85930085 -0.6245167
8   8 -4.8105311 -6.81352238 -2.1223436
9   9 -2.8187083  5.03391770  1.6433896
10 10  5.1323666 -0.06192382  1.8978994 
```

编辑：由 TS 提供的正确答案：

```
foo <- function(df.obj,colname){ddply(df, .(f), colwise(sum))[,c("f",colname)]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T02:52:02.777

这似乎非常适合`data.table`and`lapply(.SD,FUN)` 和`.SDcols`论点

*   `.SD`是一个 data.table，其中包含每个组的 x 数据子集，不包括组列。
*   `.SDcols`是一个向量，包含您希望应用函数的列的名称 ( `FUN`)

# 一个例子

设置`data.table`

```
library(data.table)
DT <- as.data.table(df) 
```

`x`, `y`,`z`列的总和`f`

```
DT[, lapply(.SD, sum), by = f, .SDcols = c("x", "y", "z")]

##      f       x       y       z
##  1:  4  4.8041  3.9788  1.2519
##  2:  2  1.1255 -0.8147  2.9053
##  3:  3  0.9699 -0.1550 -8.5876
##  4:  9  2.2685 -1.2734  1.0506
##  5:  5 -0.1282 -2.5512  5.0668
##  6: 10 -2.7397  0.5290 -0.3638
##  7:  1  2.9544 -3.1139 -1.3884
##  8:  8 -4.3488  0.6894  1.4195
##  9:  7  2.3152  0.6474  2.7183
## 10:  6 -0.1569  1.0142  0.9156 
```

`x`和`z`列的总和`f`

```
DT[, lapply(.SD, sum), by = f, .SDcols = c("x", "z")]

##      f       x       z
##  1:  4  4.8041  1.2519
##  2:  2  1.1255  2.9053
##  3:  3  0.9699 -8.5876
##  4:  9  2.2685  1.0506
##  5:  5 -0.1282  5.0668
##  6: 10 -2.7397 -0.3638
##  7:  1  2.9544 -1.3884
##  8:  8 -4.3488  1.4195
##  9:  7  2.3152  2.7183
## 10:  6 -0.1569  0.9156 
```

计算*平均值的例子*

```
DT[, lapply(.SD, mean), by = f, .SDcols = c("x", "y", "z")]

##      f        x        y        z
##  1:  4  0.36955  0.30606  0.09630
##  2:  2  0.10232 -0.07407  0.26412
##  3:  3  0.07461 -0.01193 -0.66059
##  4:  9  0.15123 -0.08489  0.07004
##  5:  5 -0.01425 -0.28346  0.56298
##  6: 10 -0.21075  0.04069 -0.02799
##  7:  1  0.29544 -0.31139 -0.13884
##  8:  8 -0.54360  0.08617  0.17744
##  9:  7  0.38586  0.10790  0.45305
## 10:  6 -0.07844  0.50710  0.45782

DT[, lapply(.SD, mean), by = f, .SDcols = c("x", "z")]

##      f        x        z
##  1:  4  0.36955  0.09630
##  2:  2  0.10232  0.26412
##  3:  3  0.07461 -0.66059
##  4:  9  0.15123  0.07004
##  5:  5 -0.01425  0.56298
##  6: 10 -0.21075 -0.02799
##  7:  1  0.29544 -0.13884
##  8:  8 -0.54360  0.17744
##  9:  7  0.38586  0.45305
## 10:  6 -0.07844  0.45782 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:53:09.467

我没有足够的代表发表评论，所以必须以答案形式提问 - 为什么要避免在 R 中使用循环？

编辑：无论如何使用 plyr 我会使用 count()

# html - CSS 样式优先级

> ID：12088007
> 
> 赞同：5
> 
> 时间：2012-08-23T08:49:31.037
> 
> 标签：html, css, css-selectors

我在 CSS 声明优先级方面遇到问题。我的页面包含一个带有规则的外部 CSS 文件和一些内联 CSS 声明，这些声明应该覆盖该规则。据我了解，内联样式声明应该覆盖外部 CSS 声明。但是，当我在 Chrome 中查看该页面时，表格的第二行显示为蓝色，而当它应该显示为内部样式声明中定义的红色时。

我在这里想念什么

这是HTML：

```
<html>
<head>
    <link rel="stylesheet" href="screen.css" type="text/css" media="screen, projection">
    <style type="text/css">
        td,tr,th
        {
            background: Red;
        }
    </style>
</head>
<body>
    <table>
        <tr>
            <td>11</td>
            <td>22</td>
        </tr>
        <tr>
            <td>aa</td>
            <td>bb</td>
        </tr>
    </table>
</body>
</html> 
```

这是CSS文件的内容：

```
tbody tr:nth-child(even) td,
tbody tr.even td
{
    background: #e5ecf9;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-23T08:53:05.287

在计算哪个规则具有最高特异性时，选择器的数量很重要。

CSS 特异性的两个出色的可视化是[http://www.standardista.com/css3/css-specificity/](http://www.standardista.com/css3/css-specificity/)和[http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)

您应该避免仅仅坚持`!important`要覆盖的规则（请参阅[在 CSS 中使用“！important”的含义是什么？](https://stackoverflow.com/questions/3706819/what-are-the-implications-of-using-important-in-css)），而是更改选择器以使您的规则与导入的规则具有更多或相同的权重。

例如以下将使所有单元格`background:red`

```
thead tr:nth-child(1n) th, tbody tr:nth-child(1n) td {
    background:red;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T09:00:12.410

在这种情况下，更详细的规则将得到它。

在你的 HTML 中试试这个：

```
<style type="text/css" media="screen, projection">
    tbody tr:nth-child(even) td,
    tbody tr:nth-child(even) tr,
    tbody tr:nth-child(even) th
    {
        background: Red;
    }
</style> 
```

最好的祝福

# c# - 如何在 Windows 8 中集成第三方键盘？

> ID：12088009
> 
> 赞同：1
> 
> 时间：2012-08-23T08:49:40.750
> 
> 标签：c#, windows-8, visual-studio-2012, ime

我已经开发了一个具有不同布局的键盘 (C#)，并且还建议在 TextBox 上输入一些单词，但它仍处于应用程序级别我想将它与 TSF 集成，这使得我的键盘在整个 Windows 8 中都可用。我想通了我需要在（进程内服务器）中向 TSF 注册文本服务。

如何在 Windows 8 中集成键盘？

![在此处输入图像描述](../Images/95fb249f8d8045114c4f379035c54ede.png)

# android - AdnEngine 粒子系统 更新多少粒子

> ID：12088012
> 
> 赞同：0
> 
> 时间：2012-08-23T08:49:57.213
> 
> 标签：android, andengine, particle-system

我需要一些关于如何或一些代码示例或与此相关的任何东西的想法。

我已经制作了一些粒子系统，这里我将从 nicolas 的示例中展示

```
final SpriteParticleSystem particleSystem = new SpriteParticleSystem(new PointParticleEmitter(-32, ParticleSystemNexusExample.CAMERA_HEIGHT - 32),
                                                                     ParticleSystemNexusExample.RATE_MIN, 
                                                                     ParticleSystemNexusExample.RATE_MAX, 
                                                                     ParticleSystemNexusExample.PARTICLES_MAX, 
                                                                     this.mParticleTextureRegion, this.getVertexBufferObjectManager()); 
```

我需要的是“实时”更新变量

```
private static final float RATE_MIN = 5;
private static final float RATE_MAX = 8;
private static int PARTICLES_MAX = 16; 
```

这是以前代码中的 var

```
ParticleSystemNexusExample.RATE_MIN
ParticleSystemNexusExample.RATE_MAX
ParticleSystemNexusExample.PARTICLES_MAX 
```

以某种方式可能吗？可以以某种方式重新启动粒子系统。好吧，重新启动它不是 100%“实时”更新系统，但我需要像使用设置一样留在应用程序中，当你退出设置时，它会得到新的变量。

基本上我`onCreateScene`有`ParticleSystem();`

我使用公共无效`ParticleSystem()` {}

并且可以重新启动它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T21:11:34.633

目前尚不清楚您到底想做什么，但是 Nicholas 将最小和最大速率变量保留在 ParticleSystem 类上。我不确定你能得到什么行为，但你可以尝试为此添加一个公共接口并实时更新它以查看会发生什么。如果你不想乱用 AndEngine 平台代码，这里有一个建议：

您可以创建两个或多个具有不同速率的粒子系统，并根据您的需要在屏幕上管理它们。如果您只想交换一次，只需拆下第一个并连接第二个即可。如果您想在它们之间不断变化，您可以使用 setParticlesSpawnEnabled 来确定哪个是活动的。

干杯!

# database - 使用 isql 从一个数据库复制 Firebird

> ID：12088020
> 
> 赞同：2
> 
> 时间：2012-08-23T08:50:14.790
> 
> 标签：database, firebird, isql

我有 2 个火鸟数据库

```
c:\db1.gdb
c:\db2.gdb 
```

两个数据库架构相同，因此都包含一个表

```
MyTable
-------
Id int
Name varchar(50)
...etc 
```

它保证两个数据库上的数据不同，但是我需要从 db2.MyTable 复制到 db1.MyTable

一个要求是我使用 firebird isql 工具来执行此操作。

我将如何首先使用 isql

```
-Connect to both db's in one isql command window
-run a sql statement that would do a select all from one table in db2 and insert it into the same table in db1 
```

我正在使用火鸟 1.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:41:32.850

这在 FB 1.5 中是不可能的。您可以在 Firebird 2.5 中使用新的“执行语句...外部”功能来做到这一点，这使得从触发器、过程和代码块内部访问另一个 firebird 数据库成为可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T15:47:59.803

如果你真的必须这样做，`isql`那么你可以编写`select`产生语句的`insert`语句；在 db2 中运行 select，将结果保存到某个文件中，然后在 db1 中执行语句。选择语句将类似于

```
select 'insert into MyTable(id, name) values ('|| cast(id as varchar(10)) ||','''|| name ||''');' from MyTable; 
```

[但是，使用 Clever Components 的Interbase DataPump](http://www.clevercomponents.com/products/datapump/index.asp)之类的东西更容易完成这项工作。

# javascript - jQuery 插件在 localhost 上运行良好，但在 web 服务器上与 bg-image 混淆

> ID：12088024
> 
> 赞同：1
> 
> 时间：2012-08-23T08:50:31.490
> 
> 标签：javascript, jquery, html, css

我已经构建了一个小型轻量级插件来显示 cookie 消息。在我的本地主机上测试工作正常，没有网页受到影响，但是，当我将文件发送到服务器时，它是：

*   防止加载 bg 图像
*   或者..弄乱它的可见性或功能

jsfiddle（javascript文件）：http: [//jsfiddle.net/dvQYS/](http://jsfiddle.net/dvQYS/)

有没有人知道为什么他们在服务器电脑上搞砸了？（即使它的客户端代码）这就是我认为原因可能是因为它在本地主机服务器上工作正常

我已经回答了下面的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:59:37.187

对于任何寻找类似东西的人：

我将脚本调用移动到文件的顶部，由于某种原因，在底部调用它会弄乱它，所以遇到这些问题的任何人都可以试试！

# ruby-on-rails - 检测应用程序是否作为 HTTP 服务器启动（rake 任务、rconsole 等）

> ID：12088025
> 
> 赞同：12
> 
> 时间：2012-08-23T08:50:32.033
> 
> 标签：ruby-on-rails, ruby, rake, eventmachine

我正在使用[EventMachine](https://github.com/eventmachine/eventmachine)和[Monetarily](https://github.com/eatenbyagrue/momentarily)来启动 e TCP 服务器以及我的 rails 应用程序。这是从`config/initializers/momentarily.rb`.

我的问题是当我运行 rake 任务时它也会启动，比如`db:migrate`. 我只希望它在我启动 HTTP 服务器时启动。环境无济于事，因为服务器启动和 rake 任务都在开发环境下。有没有办法知道应用程序正在运行 HTTP 服务器而不是其他任何东西？请注意，这不仅是 rake 任务，如果我运行 rails 控制台，EM 也会启动，这对于我的情况来说也是不可取的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T06:19:23.027

```
unless File.basename($0) == "rake" && ARGV.include?("db:migrate")
  # you are not in rake db:migrate
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-03T11:09:00.537

据我所知，没有一种很好的方法可以做到这一点。您可以复制[newrelic](https://github.com/newrelic/rpm)的方法（检查[local_environment.rb](https://github.com/newrelic/rpm/blob/master/lib/new_relic/local_environment.rb)`discover_dispatcher` ） ，它基本上有一个启发式列表，用于检测它是否在乘客、瘦身等内部运行。

对于乘客，它会检查

```
defined?(::PhusionPassenger) 
```

对于薄它检查

```
if defined?(::Thin) && defined?(::Thin::Server) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-04-15T11:52:16.753

在文件中设置环境变量`config.ru`，并在代码中的任何位置使用它来检测它是否`rails server`仅使用命令执行。

例如

*   *文件：* `config.ru`

    ```
    ENV['server_mode'] = '1' 
    ```

并在某处使用它：

*   *文件：* `config/environment.rb`

    ```
    Thread.new { infinite_loop! }.join if ENV['server_mode'] = '1' 
    ```

* * *

参考：[答案](https://stackoverflow.com/a/17414005/1052356)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T09:35:41.813

也许您可以在初始化程序中基于`ARGV`?

就像是：

```
if ARGV.join(' ').match /something/
  # your initializer code here
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T10:34:18.897

不要从初始化程序启动其他服务器。在其中创建一个[守护程序](http://daemons.rubyforge.org)`script/momentarily`并从您的应用程序中启动它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-01T09:25:54.347

在您的应用程序启动后，您可以将其用于检查`ps`. 如果`ps`显示 HTTP 服务器正在运行并且正在运行的 HTTP 服务器与您的应用程序具有相同的 pid（通过检查来检查 pid `$$`），那么您可以启动 TCP 服务器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-15T09:33:43.707

除了上面 Frederick Cheung 的一个很好的回答，实际过程环境中可能还有一些其他的“足迹”。例如。Phusion Passenger 向 ENV 添加了某些变量，例如：

```
PASSENGER_APP_ENV
IN_PASSENGER
PASSENGER_SPAWN_WORK_DIR
PASSENGER_USE_FEEDBACK_FD 
```

Web 服务器通常也可以设置`SERVER_SOFTWARE`变量，例如：

```
SERVER_SOFTWARE=nginx/1.15.8 Phusion_Passenger/6.0.2 
```

# php - 我将如何在 Doctrine2 中执行 MySQL 计数（*）？

> ID：12088026
> 
> 赞同：15
> 
> 时间：2012-08-23T08:50:45.707
> 
> 标签：php, mysql, symfony, doctrine-orm

我有以下 Doctrine2 查询：

```
$qb = $em->createQueryBuilder()
      ->select('t.tag_text, COUNT(*) as num_tags')
      ->from('CompanyWebsiteBundle:Tag2Post', 't2p')
      ->innerJoin('t2p.tags', 't')
      ->groupBy('t.tag_text')
;
$tags = $qb->getQuery()->getResult(); 
```

运行时出现以下错误：

```
[Semantical Error] line 0, col 21 near '*) as num_tags': Error: '*' is not defined. 
```

我将如何在 Doctrine2 中执行 MySQL 计数（*）？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-23T08:53:46.797

您应该可以这样做（将查询构建为字符串）：

```
$query = $em->createQuery('SELECT COUNT(u.id) FROM Entities\User u');
$count = $query->getSingleScalarResult(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-23T09:03:14.567

您试图在 DQL 中而不是“在 Doctrine 2 中”。

您需要指定要计算的字段（注意，我不使用 term 列），这是因为您使用的是 ORM，并且需要以 OOP 方式思考。

```
$qb = $em->createQueryBuilder()
      ->select('t.tag_text, COUNT(t.tag_text) as num_tags')
      ->from('CompanyWebsiteBundle:Tag2Post', 't2p')
      ->innerJoin('t2p.tags', 't')
      ->groupBy('t.tag_text')
;
$tags = $qb->getQuery()->getResult(); 
```

但是，如果您需要性能，则可能需要使用 a，[`NativeQuery`](http://docs.doctrine-project.org/en/latest/reference/native-sql.html)因为您的结果是简单的标量而不是对象。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-08-11T02:28:02.137

由于 $query->getSingleScalarResult() 预计至少有一个结果，因此如果没有找到结果则抛出无结果异常，因此请使用 try catch 块

```
try{
   $query->getSingleScalarResult();
}
catch(\Doctrine\ORM\NoResultException $e) {
        /*Your stuffs..*/
} 
```

# c - malloc() 和 calloc() 的区别？

> ID：12088028
> 
> 赞同：3
> 
> 时间：2012-08-23T08:50:46.927
> 
> 标签：c, dynamic-memory-allocation

`malloc()`谁能解释在 C 中使用和`calloc()`用于动态内存分配有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:34:45.030

尝试这样做：使用 malloc 分配一些内存

```
char* pszKuchBhi ;
pszKuchBhi = malloc(10) ;
printf( "%s\n", pszKuchBhi ) ;  
// Will give some junk values as the memory allocated is not initialized and 
// was storing some garbage values 
```

现在在用 calloc 替换 malloc 时做同样的事情。看到不同。

```
char* pszKuchBhi ;
pszKuchBhi = calloc( 10, 1 ) ;
printf( "%s\n", pszKuchBhi ) ; 
//Will print nothing as the memory is initialized to 0 
```

calloc 分配的内存被初始化为 0。它对初学者初始化内存很有好处，但性能方面 calloc 很慢，因为它必须先分配然后再初始化。为了更好地澄清，您始终可以搜索相同的问题，但更好地体验它以了解内部情况。您还可以密切关注您的记忆，亲自查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:55:01.623

`malloc`返回具有固定字节数的分配。此内存未清除（垃圾值）。

`calloc`返回特定内存的固定数量对象的分配。此内存归零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:02:24.800

分配 100 字节的内存，初始化为 0。

```
char *ptr = calloc(100, sizeof(char)); 
```

如果我们使用 malloc()，那么

```
char *ptr = malloc(100);
int i = 0;
for(i=0; i< 100; i++)
    ptr[i] = 0; 
```

分配内存后，如果初始化发生得更好，我们可以立即使用`malloc()`. 不必初始化为0，然后用数据初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T09:04:30.300

如果要分配 100 个 int。你必须这样做：

```
int *var;

var = malloc(100 * sizeof(int));
// OR
var = calloc(100, sizeof(int)); 
```

因为`malloc`在参数中需要多个字节，而`calloc`需要一个数字和一个元素，所以它自己进行计算，并用零填充所有分配的内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T09:07:47.627

当您使用 malloc 分配内存时，内存只是分配有垃圾值，而当您使用 calloc 分配内存时，内存被分配并且每个内存位置都填充为 0。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T09:56:29.583

一个是原始`malloc()`函数 ( )，另一个是更方便的函数 ( `calloc()`)。从本质上讲，您可以考虑`calloc()`这样实现：

```
void * my_calloc(size_t num_elems, size_t elem_size)
{
  const size_t bytes = num_elems * elem_size;
  void *p;

  if((p = malloc(bytes)) != NULL)
  {
    memset(p, 0, bytes);
  }
  return p;
} 
```

# javascript - 如何监视 jQuery AJAX 请求？

> ID：12088029
> 
> 赞同：6
> 
> 时间：2012-08-23T08:50:52.650
> 
> 标签：javascript, jquery, jasmine

下面两种实现ajaxRequest(1)(2)的方式应该是等价的。
话说回来：

1.  为什么验证回调的单元测试（3）执行，（1）成功，（2）失败？
2.  我应该如何重写测试 (3) 以监视 (2) 中的成功回调？
3.  如果我尝试 `stub jQuery.ajax`使用 sinon 和代码 (2)，我会收到错误消息。我应该如何解决它？

请参阅代码 (3) 中的注释以获取更多详细信息。

* * *

(1)

```
ajaxRequest: function (message, callback) {
    return $.ajax({
        url: backendRouter.generate('feedback_send'),
        type: 'POST',
        dataType: 'json',
        data: {
            message: message
        },
        success: callback
    });
} 
```

* * *

(2)

```
ajaxRequest: function (message, callback) {
    return $.ajax({
        url: backendRouter.generate('feedback_send'),
        type: 'POST',
        dataType: 'json',
        data: {
            message: message
        }
    }).success(callback);
} 
```

* * *

(3)

```
it("should execute the callback function on success", function () {
    spyOn($, "ajax").andCallFake(function(options) {
        options.success();
    }); // If I use the code (2) I get the following error
        // TypeError: Object #<Object> has no method 'success'
    var callback = jasmine.createSpy();
    ajaxRequest('some message', callback);
    expect(callback).toHaveBeenCalled();
}); 
```

* * *

(4)

```
it("makes a GET request for todo items", function () {
    sinon.stub(jQuery, 'ajax');
    backendController.ajaxRequest('some message', sinon.spy()); 
    // Cannot call method 'success' of undefined
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T09:19:54.720

这是一个演练：

如果您使用编号 2 中的代码，您将在 jquery 上调用 ajax 函数：

```
return $.ajax({
  url: backendRouter.generate('feedback_send'),
  type: 'POST',
  dataType: 'json',
  data: {
    message: message
  }
... 
```

在使用这些参数调用此函数后，jQuery 返回一个[jqHR](http://api.jquery.com/jQuery.ajax/#jqXHR) ，该 jqHR恰好定义了一个成功函数。然后调用该成功函数：

```
...
}).success(callback); 
```

到目前为止一切都很好，直到您的 jasmine 测试监视 ajax 函数。您用来调用的相同选项`$.ajax`将传递给这个新间谍。

```
// this is the value of the options parameter
{
    url: backendRouter.generate('feedback_send'),
    type: 'POST',
    dataType: 'json',
    data: {
        message: message
    }
} 
```

传递此对象时，您的假函数实际上会尝试调用`options.success`不存在的 ！因此错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-28T08:10:44.183

有一个 jquery 插件，它使用`sinonjs`并`qunit`提供了一种更简单的方法来编写 ajax 测试并获得预期的结果。

看看**[jqueryspy](https://github.com/inspiraller/jqueryspy/blob/master/README.md)**

# c++ - C++链表实现多数据插入

> ID：12088030
> 
> 赞同：1
> 
> 时间：2012-08-23T08:50:53.587
> 
> 标签：c++, linked-list

我正在尝试使用链表创建一个主题先决条件检查器。我知道如何将单个数据插入节点。

我的问题是如何将多个数据插入一个节点？我找到了一个非常适合我的任务的好例子。但问题是我不太懂C。任何人都可以帮助解释以下`void add()`功能吗？我想将该`add`功能用于我的作业。

```
#include <stdio.h>
#include <conio.h>
#include <malloc.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

struct node
{
   char data [ 20 ];
   char m [ 5 ] [ 20 ];
   int mcount;
   struct node * link;
};

struct node * dic [ 26 ];

void add ( char * );
int  search ( char * );
void show( );
void deldic( );

void main( )
{
   char word [ 20 ] , ch;
   int i;

   clrscr( );

   while ( 1 )
   {
       clrscr( );
       printf ( "\n\t\tDictionary\n" );
       printf ( "\n\t\t1.Add Word.\n" );
       printf ( "\t\t2.Search Word.\n" );
       printf ( "\t\t3.Show Dictionary.\n" );
       printf ( "\t\t0.Exit." );
       printf ( "\n\n\t\tYour Choice ");
       scanf ( "%d", &ch );

       switch ( ch )
       {
           case 1 :

               printf ( "\nEnter any word : " );
               fflush ( stdin );
               gets ( word );
               add ( word );

               break;

           case 2 :

               printf ( "\nEnter the word to search : " );
               fflush ( stdin );
               gets ( word );
               i = search ( word );
               if ( ! i )
                   printf ( "Word does not exists." );
               getch( );

               break;

           case 3 :

               show( );
               getch( );

               break;

           case 0 :

               deldic( );
               exit ( 0 );

           default :

               printf ( "\nWrong Choice" );
       }
   }
}

void add ( char * str )
{
   int i, j = toupper ( str [ 0 ] ) - 65;
   struct node * r, * temp = dic [ j ], * q;
   char mean [ 5 ] [ 20 ], ch = 'y';

   i = search ( str );
   if ( i )
   {
       printf ( "\nWord already exists." );
       getch( );
       return;
   }
   q = ( struct node * ) malloc ( sizeof ( struct node ) );
   strcpy ( q -> data, str );
   q -> link = NULL;

   for ( i = 0; tolower ( ch ) == 'y' && i < 5; i++ )
   {
       fflush ( stdin );
       printf ( "\n\nEnter the meaning(s) : " );
       gets ( mean [ i ] );
       strcpy ( q -> m [ i ] , mean [ i ] );
       if ( i != 4 )
           printf ( "\nAdd more meanings (y/n) " );
       else
           printf ( "You cannot enter more than 5 meanings." );
       fflush ( stdin );
       ch = getche( );
   }

   q -> mcount = i;
   if ( dic [ j ] == NULL || strcmp ( dic [ j ] -> data, str ) > 0 )
   {
       r = dic [ j ];
       dic [ j ] = q;
       q -> link = r;
       return;
   }

   else
   {
       while ( temp != NULL )
       {
           if ( ( strcmp ( temp -> data, str ) < 0 ) && ( ( strcmp ( temp -> link -> data, str ) > 0 ) ||
                                           temp -> link == NULL ) )
           {
               q -> link = temp -> link;
               temp -> link = q;
               return;
           }
           temp = temp -> link;
       }
   }
} 
```

这是我到目前为止的任务

```
#include <iostream>
#include <string>
#include <iomanip>
using namespace std;

struct subjectlist
{
   string subject;
   string prereq;
   subjectlist *next;
};

subjectlist *start_prt=NULL;
subjectlist *current;
int option=0;

int main ()
{
 int x;
 string subject;

               cout << "1\. Add subject" << endl;
               cout << "2\. Search prerequisite" << endl;
               cout << "3\. Delete subject" << endl;
               cout << "4.Show subjects" << endl;
               cout << "5\. Save to file" << endl;
               cout << "6\. Load from file" << endl;
                 cout << "0\. Exit" << endl;
               cin >> x;

               switch (x)
   {
       case 1:
           cout<<"Input subject"<<endl;
           cin >>  subject;
           add(subject);
           break;

       case 2:
           cout<<"Input subject to be checked"<<endl;
           break;

       case 3:
           cout<<"Delete a subject"<<endl;
           break;

       case 4:
           cout<<"Show Subjects"<<endl;
           break;

       case 5:
           cout<<"Save to File"<<endl;
           break;

       case 6:
           cout<<"Load from file"<<endl;
           break;

       case 0:
           cout<<"exit"<<endl;
           break;

       default: cout <<"Invalid selection, please try again."<<endl;
   }
 }

void add ()
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:13:45.610

该`add()`函数将节点添加到列表中。但是在将节点添加到列表之前，它会检查节点中的数据是否已经存在于列表中？

```
 i = search ( str );
   if ( i ) 
```

这将检查重复数据。
如果数据已经存在于列表中，则节点不会插入到列表中。

如果列表中不存在数据，则它会移动得更远。

```
 for ( i = 0; tolower ( ch ) == 'y' && i < 5; i++ ) 
```

这个 for 循环接受`meaning (string)`数组，`meaning`每个节点只能添加 5 秒。 **节点也以这样的方式添加到列表中，列表将以排序的形式出现。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:06:04.750

既然您正在使用 c++，一种支持面向对象编程的语言，为什么不使用此功能呢？

首先，您可以创建数据结构，其中包含要存储的所有有用项目。您还可以编写一个 operator== 使比较两个 Data 对象更加清晰：

```
struct Data
{
    char data [20];
    char m [5][20];
    int mcount;

    bool operator==(const Data& other)const
    {
        //probably you need more comparisons
        return mcount==other.mcount; 
    }
}; 
```

然后您可以创建一个 Node 类，其中包含一个 Data 对象，以及指向下一个（可能指向上一个）项目的指针。

```
struct Node
{
    Data data;
    Node * next;
    //Node * previous;
} 
```

得到这个之后，你可以创建自己的链表类：

```
class MyLinkedList
{
    Node * head;

    public:

    MyLinkedList(){//initialization steps}

    ~MyLinkedList(){ //Delete the list}

    void add(Data item)
    {
        if(!contains(item))
        {
            //append it
        }
    }

    bool contains(Data item){ //... check if the list already contains item}

    //create a string representation of the object. 
    //If you dont like this style, you could also provide 
    //an operator>> or operator<< for the class
    std::string toString()
    {
        std::stringstream stream;
        //iterate through the list, and add elements with
        return stream.str();
    }
}; 
```

如果你得到了这个，那么在你的 main() 中它看起来会更清晰，你想要什么：

```
MyLinkedList list;

Data data; //somehow fill it

//adding items
list.add(data);

//printing the list
cout<<list.toString();

//after it goes out of scope the destructor will be called, 
//so you dont need to bother with the deletion. 
```

# sql-server-2005 - 按日期查看序列中的缺失数字

> ID：12088032
> 
> 赞同：1
> 
> 时间：2012-08-23T08:51:00.440
> 
> 标签：sql-server-2005

我有一个表名“Numerator”有 3 列：No_Fact、Numerat 和 Date。像这样：

```
No_Fact         Numerat         Date
1207020015      000713          2012-07-02 00:00:00.000
1207020016      000720          2012-07-02 00:00:00.000
1207020017      000722          2012-07-02 00:00:00.000
1207020019      000723          2012-07-02 00:00:00.000
1207020022      000724          2012-07-02 00:00:00.000
1207020021      000733          2012-07-02 00:00:00.000
1207020020      000734          2012-07-02 00:00:00.000
1207020018      000735          2012-07-02 00:00:00.000
1208120001      000766          2012-08-12 00:00:00.000
1208120002      000769          2012-08-12 00:00:00.000
1208230001      000777          2012-08-23 00:00:00.000
1208230002      000780          2012-08-23 00:00:00.000 
```

我想查看 Numerat 列中数字之间的一些缺失数字，所以我尝试使用以下代码：

```
SELECT A.Numerat+1 AS 'MISSING FROM', MIN(B.Numerat)-1 AS 'TO'
FROM Numerator A, Numerator B
WHERE A.Numerat < B.Numerat
GROUP BY A.Numerat
HAVING A.Numerat+1 < MIN(B.Numerat)
ORDER BY 1 
```

和结果集：

```
MISSING FROM   TO
714            719 
721            721
725            732
736            765
767            768
770            776
778            779 
```

这是一个很好的代码。但是序号太多，不符合简洁的需要。所以我只想在今天（2012-08-23）显示部分行，喜欢这样：

```
MISSING FROM   TO
778            779 
```

我非常感谢任何可以解码它的人，谢谢。

当我在表格中插入的下一行从 2012 年 8 月 23 日开始时，有一件有趣的事情：

```
No_Fact         Numerat         Date
1208230001      000777          2012-08-23 00:00:00.000
1208230002      000780          2012-08-23 00:00:00.000
1208250001      000782          2012-08-25 00:00:00.000
1208250002      000783          2012-08-25 00:00:00.000
1208250003      000784          2012-08-25 00:00:00.000
1208250004      000785          2012-08-25 00:00:00.000
1208250005      000786          2012-08-25 00:00:00.000
1208250006      000788          2012-08-25 00:00:00.000
1208250007      000789          2012-08-25 00:00:00.000
1208250008      000790          2012-08-25 00:00:00.000
1208250009      000793          2012-08-25 00:00:00.000
1208250010      000794          2012-08-25 00:00:00.000 
```

作为我最初的目的，我想查看 Numerat 列中缺少的数字，总而言之，我只想显示我今天单独输入的一行，然后根据 bluefeet 的建议，我使用以下代码：

```
SELECT A.Numerat+1 AS 'MISSING FROM', MIN(B.Numerat)-1 AS 'TO'
FROM Numerator A
INNER JOIN Numerator B
  ON A.Numerat < B.Numerat
  AND a.Tanggal = DATEADD(DAY, DATEDIFF(DAY, 0, GetDate()), 0)
GROUP BY A.Numerat
HAVING A.Numerat+1 < MIN(B.Numerat)
ORDER BY 1 
```

并取得成果：

```
MISSING FROM   TO
787            787
791            792 
```

如果我们仔细看有一个没有出现的缺失数字，那就是：

```
MISSING FROM   TO
781            781 
```

但我们不知道具体包括日期吗？是 23 还是 25。在这种情况下，确切地知道这个缺少的数字是在什么日期并不重要，显然缺少一个数字，应该注意，并且在所有公共假期的 24 日到期，让我们输入它25 日。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:34:39.257

以下是执行此查询的几种不同方法，都已将日期纳入其中：

```
SELECT A.Numerat+1 AS 'MISSING FROM', MIN(B.Numerat)-1 AS 'TO'
FROM test A
INNER JOIN test B
  ON A.Numerat < B.Numerat
  AND a.dt = DATEADD(DAY, DATEDIFF(DAY, 0, GetDate()), 0)
GROUP BY A.Numerat
HAVING A.Numerat+1 < MIN(B.Numerat)
ORDER BY 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/0ab3a/7)

或者

```
;with cte as
(
  select numerat, dt, 
    row_number() over(partition by dt order by numerat) rn
  from test
  where dt = DATEADD(DAY, DATEDIFF(DAY, 0, GetDate()), 0)
)
select c.Numerat+1 MissingFrom, t.Numerat-1 [To]
from cte c
inner join test t
  on c.Numerat < t.Numerat
where c.rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/0ab3a/16)

或者您可以使用`MAX()`没有日期的聚合：

```
SELECT max([Missing From]), max([to])
FROM
(
  SELECT A.Numerat+1 AS 'MISSING FROM', MIN(B.Numerat)-1 AS 'TO'
  FROM test A
  INNER JOIN test B
    ON A.Numerat < B.Numerat
  GROUP BY A.Numerat
  HAVING A.Numerat+1 < MIN(B.Numerat)
) x 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/0ab3a/19)

# jboss - Apache LDAP 错误

> ID：12088035
> 
> 赞同：2
> 
> 时间：2012-08-23T08:51:13.073
> 
> 标签：jboss, ldap, apacheds

我想登录到部署在 jboss 5.1.0 上的 flex 应用程序。在安装过程中，我使用 APACHEDS 配置了 ldap，并且软件接受了凭据。现在，当我尝试登录 JBOSS 时，返回以下错误：

```
LDAP: error code 80 - OTHER: failed for MessageType : SEARCH_REQUEST 
```

哪里有问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T01:10:34.117

由于返回的是 SEARCH_REQUEST，我怀疑错误是找不到用户的绑定 DN。

# c# - 如何创建和注册文本服务？

> ID：12088036
> 
> 赞同：2
> 
> 时间：2012-08-23T08:51:23.357
> 
> 标签：c#, microsoft-metro

我已经开发了一个 IME 作为一个普通的 windows 8 应用程序，但我需要通过 out windows 8 使这个 IME 可用。所以我对它做了一些研究，我应该使用我使用 C# 创建的 IME 创建一个基于 COM 对象的文本服务。我需要在 proc 服务器中注册 COM 对象

我被困在创建文本服务中，我需要一些关于如何创建文本服务和 COM 对象的指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:42:14.617

也许这对你没有太大帮助，但你会知道什么对你不起作用： [是否可以制作 WinRT 服务](https://stackoverflow.com/questions/10326459/is-it-possible-to-make-a-winrt-service)

# java - Xbootclasspath 和 Java 安全性

> ID：12088037
> 
> 赞同：1
> 
> 时间：2012-08-23T08:51:25.747
> 
> 标签：java, security

恶意软件是否可以使用[Xbootclasspath](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html#nonstandard)绕过 Java 安全性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:53:04.380

当恶意软件可以使用任意参数执行 Java 启动器时，它几乎可以执行 Java 安全机制之外的所有操作。

它实际上在那个位置的 Java 安全机制*之外。*例如：它完全可以在没有安全管理器的情况下轻松启动，这将是在这种情况下“绕过 Java 安全性”的一种更简单的方法。

所以我看不出这是如何破坏 Java 安全性的。

# c# - C# windows 应用程序中的连接字符串

> ID：12088039
> 
> 赞同：1
> 
> 时间：2012-08-23T08:51:32.783
> 
> 标签：c#, sql-server-2008

我是第一次开发 C# windows 应用程序。

Que 1 - ) 我已经开发了我的 Windows 应用程序，它使用 SQL Server 2008 使用下面的连接字符串..

```
Data Source=myMachineName;Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword; 
```

但是当我创建我的应用程序的设置并将其安装到另一台计算机时，它会抛出无法与 SQL 服务器建立连接的错误。

我猜这个错误是因为我的连接字符串，因为它特定于我的计算机并且将它安装到另一台计算机将无法正常工作..

因此，我怎样才能使我的连接字符串适用于任何计算机..

Que 2 - 我是否需要在我的设置中附加模式文件作为我的数据库将如何创建到其他计算机中？

这可能是愚蠢的问题，但因为我第一次这样做，我不知道这一切。

![在此处输入图像描述](../Images/3cbf3346128e7b398962bb53e63e9789.png)

问候， 马赫什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:59:04.970

您应该将 Web 配置放在 xml 格式的 app.config 文件中。并从您的代码中读取它。您可以根据机器通过记事本轻松更改 app.config 文件。

是的，如果要从设置中创建模式脚本，则必须在设置中设置模式脚本。否则，您将在客户端计算机上创建数据库手册。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:58:06.127

如果您在开发计算机上使用过 SQL Server，则必须在将使用您的应用程序的每台计算机上安装它。有几个选项可以解决此问题：

如果您的应用不需要访问中央 sql 服务器（例如，您的应用只跟踪用户 DVD），请改用 SQL Server Compact Edition 并将其嵌入到您的应用中

如果您的应用需要某种集中式数据，请先获取一个专用的 SQL 服务器，在那里安装您需要的一切，然后在您的应用中将您当前的 myServerAddress 更改为服务器的地址。请注意，服务器需要可从远程位置访问（有些限制对本地主机的访问！）。

> Que 2 - 我是否需要在我的设置中附加架构文件作为我的数据库将如何创建到其他计算机中？

再次，多种选择。例如，您可以将数据库导出为 .sql 文件（右键单击数据库资源管理器中的 db 并选择 option `Publish to provider`），然后在其他计算机上使用 sql 管理器将其导入。或者，也许您可​​以创建一个 .cs 安装脚本，该脚本将使用 C# 代码完成相同的工作。

**根据 OP 的评论进行编辑：**

解决方案的示例链接：

问题 1：[在安装程序中嵌入 SQLServer CE](https://stackoverflow.com/questions/6331295/embedding-sqlserver-ce-in-an-installer) 问题 2：http: [//support.microsoft.com/kb/307283](http://support.microsoft.com/kb/307283)

> 好的，但我当前的连接字符串会在这种情况下工作，因为 DataSource 是我的特定机器名称

当然不是，您必须将其更改为指向 SQL Server CE 数据库文件。可能最好的方法是不对其进行硬编码，而是使用数据库的相对路径。例如，它看起来像这样：

`Data Source=|DataDirectory|\MyDb.sdf`，其中`|DataDirectory|`指向`App_Data`您的应用程序的文件夹。

> 另请参阅我附有问题的错误屏幕图..

您的错误很清楚 - 建立与您的数据库的连接时出现问题。它要么不存在，要么无法从您当前的机器访问。

# c# - 使用 Grid.Rows.Add 方法的 C# DataGridView 数据绑定错误

> ID：12088042
> 
> 赞同：0
> 
> 时间：2012-08-23T08:51:45.723
> 
> 标签：c#, sql, datagridview, datatable

我在表单上有一个 DataGridView。我从数据库中选择一些数据并将它们加载到数据表中，然后我将此数据表引用到网格的数据源，如下所示。

```
string sql = "";
sql = "SELECT id,name,surname,code FROM t_persons";
DataTable dt = new DataTable();
...
adapter.Fill(dt);
grid.DataSource = dt; 
```

然后我想用**grid.Rows.Add()**方法向这个网格添加新行。但是每次它给出错误**时，当控件是数据绑定时，无法以编程方式将行添加到 DataGridView 的行集合中。**
那么问题是什么，我该如何解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:55:06.840

您应该将行添加到 DataTable，而不是 DataGridView。这就是异常所说的。尝试：

```
DataRow newRow = dt.NewRow();
dt.Rows.Add(newRow); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:55:23.890

请您可以直接将行添加到数据表，它对gridview 有影响，因为它绑定到数据表。

# python - 限制方法访问接口？

> ID：12088047
> 
> 赞同：0
> 
> 时间：2012-08-23T08:51:57.427
> 
> 标签：python, interface, abstract-class

我有一个 Python 系统，由大约 9-10 个类组成，所有类都实现了大部分胖鸭式接口，并且可以被大量模块互换使用。我正在尝试将类重构为核心、显式（即 ABC）接口和外围功能，遵循职责分离，但为了做到这一点，我需要能够判断消费者模块何时调用核心之外的方法界面。

假设我有一个带有抽象方法的 ABC：

```
from abc import ABCMeta, abstractmethod

class MyABC:
    __metaclass__ = ABCMeta
    @abstractmethod 
    def foo(self):
        pass 
```

我还有一个实现这些抽象方法以及其他方法的类：

```
class MyClass(MyABC):
    def foo(self):
        pass
    def bar(self):
        pass

instance = MyClass()

>>> isinstance(instance, MyABC)
True 
```

我如何确保当我传递`instance`给一个方法`do_something`时，*它只*使用属于`MyABC`（在这种情况下`foo`）的方法而不是任何其他方法（`bar`）？在静态类型语言（例如 C++）中，我可以传递`do_something`ABC 类型的指针；Python中是否有某种包装器可以类似地限制方法访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:01:01.833

简短的回答：没有

Python 中没有可以强制执行的私有方法/变量的概念，如此处[详细描述](http://docs.python.org/tutorial/classes.html)。

在 Python 中，这是按惯例处理[的](http://www.python.org/dev/peps/pep-0008/#naming-conventions)。

如果您真的想深入了解内部结构，请查看此[线程](https://stackoverflow.com/questions/70528/why-are-pythons-private-methods-not-actually-private)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:09:23.130

这就是我想出的：

```
class ABCGuard(object):
    def __init__(self, obj, *abcs):
        if any(not isinstance(obj, abc) for abc in abcs):
            raise ValueError("{0} must implement {1}"
                             .format(obj.__class__.__name__,
                                     ', '.join(abc.__name__ for abc in abcs
                                               if not isinstance(obj, abc))))
        self.__obj = obj
        self.__abcs = abcs
        classname = '{0}{{{1}}}'.format(obj.__class__.__name__,
                                        ', '.join(abc.__name__ for abc in abcs))
        self.__class__ = type(classname, (ABCGuard, ) + abcs, {})

    def __getattribute__(self, name):
        if name.startswith('_ABCGuard__') or (name.startswith('__') and
                                              name.endswith('__')):
            return super(ABCGuard, self).__getattribute__(name)
        elif any(name in abc.__abstractmethods__ for abc in self.__abcs):
            return getattr(self.__obj, name)
        else:
            raise AttributeError("%r object has no attribute %r" %
                                 (self.__class__.__name__, name))

    def __dir__(self):
        return [x for abc in self.__abcs for x in abc.__abstractmethods__] 
```

# delphi - 如果我更改使用它的项目的设置，是否会重新编译“根据需要重建”库？

> ID：12088049
> 
> 赞同：1
> 
> 时间：2012-08-23T08:52:02.737
> 
> 标签：delphi, delphi-xe

我有一个使用库（DPK/视觉控件）的程序。该库是在调试模式下编译的。这意味着优化是关闭的，范围检查是打开的，等等。库设置为“根据需要重建”。我不打算重新分发它（仅供内部使用）。

如果我在“发布”模式下编译我的程序会发生什么？库中包含的代码会自动重新编译为“发布”模式吗？或者我必须先加载 DPK 并在“发布”模式下重新编译我的库？

* * *

更新：
与“根据需要重建”相关，Embarcadero 的帮助说明了一切：“根据需要构建包”。我将其解释为“如果程序以发布模式编译，则需要重新编译库，因此我们将为您完成”。我的解释也……符合圣经吗？

* * *

该实验表明（在上述条件下）库中包含的代码将根据 DPR 的设置而不是 DPK 的设置编译成 EXE。

编译器在重新编译其 PAS 文件时不关心 DPK 文件（仅适用于未在 IDE 中加载 DPK 时）。**

所以这里是（易于在所有系统中重现）证明：让我们称我的程序 Prog.DPR（包含 Prog.pas）和我的库 Lib.DPK（包含 LibUnit.pas）。该库包含 TMyPanel 可视化控件。DPR 处于发布模式。DPK 处于调试模式。

```
I install the library. I exit the library ('Close all').
I load the DPR in IDE, I also load LibUnit (Attention: I load only the unit, not the DPK)
I put TMyPanel on my program's form.
The LibUnit is automatically added to the USES clause on my program.
I edit LibUnit. I compile. It works. New DCU file is generated for LibUnit.
I go to library's folder and I delete the DPK (and the Dproj) but I keep LibUnit.pas.
I edit LibUnit. I compile. Still works! New DCU file is generated for DCU file is generated for LibUnit.!!!! 
```

问题是：如果没有关于如何编译 LibUnit 的信息（PDK 被删除），LibUnit 是如何编译的？？？？？？显然编译器使用了 DPR 的设置。这是“释放”模式。这意味着我的库作为“发布”集成到程序中。.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T09:19:17.327

在可执行文件中的调试和发布目标之间切换不会导致任何引用的运行时包被重建。

包有自己的选项，这些选项独立于使用它们的项目。这是唯一可能的设计选择。想象一下，如果你有一个包被另外两个项目 A 和 B 使用，比如说。现在，A 是为调试而构建的，但 B 是为发布而构建的。不能同时为两者构建包。

“根据需要重新构建”意味着如果最新版本相对于包的源已过时，则将重新构建包。

* * *

关于您的问题更新中的“实验”，您的 exe 很可能在运行时没有链接到包。相反，.pas 文件被直接编译并链接为您的 exe 项目的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:33:01.880

该实验表明（在上述条件下）库中包含的代码将根据 DPR 的设置而不是 DPK 的设置编译成 EXE。

编译器在重新编译其 PAS 文件时不关心 DPK 文件（仅适用于未在 IDE 中加载 DPK 时）。**

所以这里是（易于在所有系统中重现）证明：让我们称我的程序 Prog.DPR（包含 Prog.pas）和我的库 Lib.DPK（包含 LibUnit.pas）。该库包含 TMyPanel 可视化控件。DPR 处于发布模式。DPK 处于调试模式。

*   我安装库。我退出图书馆（“全部关闭”）。
*   我在 IDE 中加载 DPR，我还加载了 LibUnit（注意：我只加载单元，而不是 DPK）
*   我将 TMyPanel 放在我的程序表单上。
*   LibUnit 会自动添加到我的程序的USES 子句中。
*   我编辑 LibUnit。我编译。有用。为 LibUnit 生成新的 DCU 文件。
*   我去图书馆的文件夹，我删除了 DPK（和 Dproj），但我保留了 LibUnit.pas。
*   我编辑 LibUnit。我编译。仍然有效！为 LibUnit 生成了新的 DCU 文件。为 LibUnit 生成了 DCU 文件。！！！！！！

问题是：如果没有关于如何编译 LibUnit 的信息（PDK 被删除），LibUnit 是如何编译的？？？？？？显然编译器使用了 DPR 的设置。这是“释放”模式。这意味着我的库作为“发布”集成到程序中。.

# objective-c - executeFetchRequest：错误：导致未捕获的异常“NSRangeException”

> ID：12088050
> 
> 赞同：1
> 
> 时间：2012-08-23T08:52:10.307
> 
> 标签：objective-c, ios

我在 iOS4 中遇到了 Out of Bounds 异常，当我在 iOS5 中运行我的应用程序时没有得到。

调用时出现异常`executeFetchRequest:error:`

这是代码：

```
// Fetch
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"DisplayName = %@", inDisplayName];

    //iOS5 only
    //NSFetchRequest *req = [[NSFetchRequest alloc] initWithEntityName:inEntityName];

    NSFetchRequest *req = [[NSFetchRequest alloc] init];
    [req setEntity:[NSEntityDescription entityForName:inEntityName inManagedObjectContext:inContext]];

    [req setFetchLimit:1];
    [req setPropertiesToFetch:[NSArray arrayWithObject:@"DisplayName"]];
    [req setIncludesPropertyValues:NO];
    [req setIncludesSubentities:NO];
    [req setPredicate:pred];

    NSError *err = nil;
    NSArray * results = [inContext executeFetchRequest:req error:&err]; // here

    if ([results count]) {
        id result = [results objectAtIndex:0];
        [cache setObject:result forKey:cacheKey];        
        return result;
    }

    FreeAndNil(req); 
```

这是日志：

```
2012-08-23 10:47:35.855 MyApp [2694:11603] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[NSMutableArray objectAtIndex:]: index 4294967295 beyond bounds [0 .. 30]'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x01cb15a9 __exceptionPreprocess + 185
    1   libobjc.A.dylib                     0x02035313 objc_exception_throw + 44
    2   CoreFoundation                      0x01ca70a5 -[__NSArrayM objectAtIndex:] + 261
    3   CoreFoundation                      0x01bd674e CFArrayGetValueAtIndex + 190
    4   CoreData                            0x0193c304 -[NSSQLCore _prepareDictionaryResultsFromResultSet:usingFetchPlan:] + 2084
    5   CoreData                            0x018867ac -[NSSQLCore _newRowsForFetchPlan:selectedBy:withArgument:] + 2188
    6   CoreData                            0x0187d151 -[NSSQLCore newRowsForFetchPlan:] + 369
    7   CoreData                            0x0187c515 -[NSSQLCore objectsForFetchRequest:inContext:] + 357
    8   CoreData                            0x0187c0ce -[NSSQLCore executeRequest:withContext:error:] + 206
    9   CoreData                            0x0192bcdc -[NSPersistentStoreCoordinator executeRequest:withContext:error:] + 1084
    10  CoreData                            0x01879267 -[NSManagedObjectContext executeFetchRequest:error:] + 359
    11  MyApp                               0x0002519a +[CMItem objectWithEntityName:displayNameHasValue:inContext:] + 666
    12  MyApp                               0x00024c50 +[CMItem objectWithEntityName:andProperty:hasValue:inContext:] + 208
    13  MyApp                               0x00051ba7 -[CMMyEntity awakeFromInsert] + 295
    14  CoreData                            0x018b0647 -[NSManagedObjectContext insertObject:] + 151
    15  CoreData                            0x0188c680 -[NSManagedObject initWithEntity:insertIntoManagedObjectContext:] + 336
    16  CoreData                            0x018b0a33 +[NSEntityDescription insertNewObjectForEntityForName:inManagedObjectContext:] + 131
    17  MyApp                               0x000909a4 -[CMEditViewControllerBase loadNewCollectible] + 212
    18  MyApp                               0x00091756 -[CMEditViewControllerBase saveButtonPushed:] + 614
    19  UIKit                               0x007204fd -[UIApplication sendAction:to:from:forEvent:] + 119
    20  UIKit                               0x00932cc3 -[UIBarButtonItem(UIInternal) _sendAction:withEvent:] + 156
    21  UIKit                               0x007204fd -[UIApplication sendAction:to:from:forEvent:] + 119
    22  UIKit                               0x007b0799 -[UIControl sendAction:to:forEvent:] + 67
    23  UIKit                               0x007b2c2b -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 527
    24  UIKit                               0x007b17d8 -[UIControl touchesEnded:withEvent:] + 458
    25  UIKit                               0x00744ded -[UIWindow _sendTouchesForEvent:] + 567
    26  UIKit                               0x00725c37 -[UIApplication sendEvent:] + 447
    27  UIKit                               0x0072af2e _UIApplicationHandleEvent + 7576
    28  GraphicsServices                    0x0244a992 PurpleEventCallback + 1550
    29  CoreFoundation                      0x01c92944 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 52
    30  CoreFoundation                      0x01bf2cf7 __CFRunLoopDoSource1 + 215
    31  CoreFoundation                      0x01beff83 __CFRunLoopRun + 979
    32  CoreFoundation                      0x01bef840 CFRunLoopRunSpecific + 208
    33  CoreFoundation                      0x01bef761 CFRunLoopRunInMode + 97
    34  GraphicsServices                    0x024491c4 GSEventRunModal + 217
    35  GraphicsServices                    0x02449289 GSEventRun + 115
    36  UIKit                               0x0072ec93 UIApplicationMain + 1160 
```

谢谢

**更新**：

```
- (void)awakeFromInsert
{
    [super awakeFromInsert];
    [self setReadIt:[NSNumber numberWithBool:YES]];
    [self setCLZID:@"0"];
    CMLookUpItemComic *myRating = [CMItem objectWithEntityName:@"MyRating" andProperty:@"DisplayName" hasValue:@"0" inContext:[self managedObjectContext]];
    [self setMyRating:myRating];

    [self setUserValues:[NSEntityDescription insertNewObjectForEntityForName:@"UserValues" inManagedObjectContext:[self managedObjectContext]]];
} 
```

超类：

```
- (void)awakeFromInsert
{
    [super awakeFromInsert];
    [self autoSetUniqueID];
}

- (void)autoSetUniqueID
{
    if (highestUniqueID == NSNotFound) {
        NSManagedObjectContext *context = [self managedObjectContext];
        NSEntityDescription *entity = [self entity];

        NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"UniqueID"
                                                             ascending:NO];
        NSArray *sortDescriptors = [NSArray arrayWithObject:sort];
        [sort release];

        NSFetchRequest *fetch = [[NSFetchRequest alloc] init];
        [fetch setEntity:entity];
        [fetch setFetchLimit:1];

        [fetch setSortDescriptors:sortDescriptors];
        NSArray *results = [context executeFetchRequest:fetch error:nil];
        [fetch release];

        if (results != nil && [results count]) {
            CMItem *itemWithHighestID = [results lastObject];
            highestUniqueID = [[itemWithHighestID UniqueID] integerValue];
        } else {
            highestUniqueID = 0;
        }
    }

    highestUniqueID++;

    [self setPrimitiveValue:[NSNumber numberWithInt:highestUniqueID] forKey:@"UniqueID"];   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:56:24.107

对于像我这样陷入这个问题并整天迷失的人：

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"DisplayName = \"%@\"", inDisplayName]; 
```

`\"%@\"`崩溃是由谓词/中缺少括号引起的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:48:11.607

你所做的让我很紧张。来自苹果文档：

> 通常不鼓励您在 awakeFromInsert 的实现中执行提取。虽然是允许的，但是执行 fetch 请求可能会触发内部 Core Data 通知的发送，这可能会产生不必要的副作用。例如，在 OS X 中，一个 NSArrayController 的实例最终可能会在其内容数组中插入一个新对象两次。

~~我的建议是完全删除 -awakeFromInsert 代码，并使highestUniqueID 成为每次需要时计算的瞬态属性。您可以使用 Core Data 非常有效地检索属性的最大值。阅读标题为[获取特定值](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coredata/Articles/cdFetching.html#//apple_ref/doc/uid/TP40002484-SW1)的部分。~~

您正在尝试重新创建[objectID](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html)。这段代码没有理由。

# mongodb - Ming 0.3.2 安装和导入但崩溃

> ID：12088053
> 
> 赞同：3
> 
> 时间：2012-08-23T08:52:27.583
> 
> 标签：mongodb, odm, ming

安装 Ming 0.3.2 后，我通过运行以下代码来测试安装：

```
>>> from ming.datastore import DataStore
>>> bind = DataStore('mongodb://localhost:27017/', database='tutorial')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: __init__() got an unexpected keyword argument 'database'
>>> ^D 
```

我查看了安装文件并在 datastore.py 文件中发现该类的构造函数不包含“数据库”参数。

```
class DataStore(object):

    def __init__(self, bind, name, authenticate=None):
        self.bind = bind
        self.name = name
        self._authenticate = authenticate
        self._db = None 
```

然后我安装了 Ming 0.3.0 来查看 datastore.py 文件并找到与文档匹配的 DataStore 类（它包含一个数据库 arg），然后尝试了我遇到其他复杂情况的那个版本。

我使用 easy_install 来安装 Ming，我已经很好地安装了 mongodb 和 pymongo 运行。我在 OS X Lion 上运行这些。任何关于让 Ming 跑步的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:51:44.543

我遇到了同样的问题。这是我尝试过的步骤，它有效！希望它也适用于您的环境。

1.  通过以下方式卸载 Ming 0.3.2 版本： `pip uninstall Ming`

2.  通过以下方式安装 0.3.0：`pip install -Iv [http://downloads.sourceforge.net/project/merciless/0.3.0/Ming-0.3.0.tar.gz](http://downloads.sourceforge.net/project/merciless/0.3.0/Ming-0.3.0.tar.gz)`

3.  再次尝试明办网站上的示例。会有另一个错误

    > 回溯（最后一次调用）：
    > 文件“tutorial.py”，第 1 行，在 <module> from ming.datastore import DataStore
    > 
    > File "/home/me/work/deploy/test/local/lib/python2.7/site -packages/ming/ **init** .py”，第 3 行，在 <module> 中从会话导入会话
    > 
    > 文件“/home/me/work/deploy/test/local/lib/python2.7/site-packages/ming/session. py"，第 7 行，在 <module> 中 from pymongo.son import SON
    > 
    > ImportError: No module named son

4.  将“/home/me/work/deploy/test/local/lib/python2.7/site-packages/ming/session.py”的第7行更改为`from bson.son import SON`

5.  再试一次。它会起作用。

这是我引用的链接。这是一个日文网页，但你可以通过谷歌翻译器将其翻译成英文。 [http://ryooo321.blogspot.com/2012/05/macsleepymongoose.html](http://ryooo321.blogspot.com/2012/05/macsleepymongoose.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T17:55:23.513

我认为可能与最新版本的pymongo和ming有冲突。

bind = DataStore('mongodb://localhost:27017/', name='test') 让我走得更远，但我最终只使用了 pymongo 本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T00:07:55.287

尝试删除`database=`.

```
In [8]: from ming.datastore import DataStore

In [9]: bind = DataStore('mongodb://grid:27017/', 'tutorial')

In [10]: bind.name
Out[10]: 'tutorial' 
```

# java - 使用java在同一浏览器中打开一个新标签

> ID：12088054
> 
> 赞同：0
> 
> 时间：2012-08-23T08:52:27.240
> 
> 标签：java, session, browser

基本上，我在开发项目时打开新窗口时遇到了问题。我不想使用 JavaScript 的 window.open()。

我正在使用 jsf+spring+hibernate 框架。当用户登录系统（使用spring security）时，会显示两个页面，一个在原始选项卡上，另一个必须是弹出窗口。我找到了一种打开新浏览器的方法。这里是：

```
public class LaunchBlackBoard {
public static void runBrowser(String webSite) {
    try {
        Desktop desktop = Desktop.getDesktop();
        if (Desktop.isDesktopSupported()
                && desktop.isSupported(Desktop.Action.BROWSE)) {
            URI uri = new URI(webSite);
            desktop.browse(uri);
        }
    } catch (IOException ex) {
        ex.printStackTrace();
    } catch (URISyntaxException ex) {
        ex.printStackTrace();
    }
} 
```

这是问题所在。此类用于打开默认浏览器，但不用于打开当前运行的浏览器。如果用户使用非默认浏览器登录，则默认浏览器将打开。如果是这种情况，由于会话问题，新选项卡将由于缺少会话而无法通过身份验证。

现在，我想找到一种方法，既可以在同一个浏览器中打开一个新选项卡，也可以将会话对象从一个浏览器传递到另一个浏览器。有什么好主意吗？多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:11:19.197

没有直接的方法可以在同一浏览器中打开新选项卡。我们可以通过 Httprequest 找到当前浏览器。

```
String userAgent = request.getHeader("user-agent");
if (userAgent.indexOf("MSIE") > -1) {
  out.println("Your browser is Microsoft Internet Explorer<br/>");
} 
```

[http://www.codemiles.com/servlets-jsp/how-can-we-get-browser-information-in-jsp-t1286.html](http://www.codemiles.com/servlets-jsp/how-can-we-get-browser-information-in-jsp-t1286.html)

基于此选择，我们可以将新浏览器作为新进程启动

[从 Java 程序打开浏览器窗口](https://stackoverflow.com/questions/248534/open-browser-window-from-java-program)

# powershell - 远程运行命令时如何更改 Powershell CLR 版本？

> ID：12088055
> 
> 赞同：9
> 
> 时间：2012-08-23T08:52:33.890
> 
> 标签：powershell, clr, remoting

我在尝试在远程服务器上运行我们的一些脚本时遇到了问题。

我们需要所有 Powershell 会话来加载 CLR 的 v4，因为我们正在使用我们的脚本加载我们自己的自定义二进制文件。

我们已经这样做了一段时间（我们使用类似于此处的修改过的 powershell.exe.config 进行此操作：[How can I run PowerShell with the .NET 4 runtime?](https://stackoverflow.com/questions/2094694/how-can-i-run-powershell-with-the-net-4-runtime)），当您 RDP 进入“Server1”时一切都很好并打开一个 Powershell 会话。变量 $PSVersionTable 告诉我们 CLR v4 已加载。

现在我们试图通过远程运行这些命令来简化事情，我们遇到了我们的问题：当您将远程 Powershell 会话输入到同一台服务器时，$PSVersionTable 仅显示 v2...

所以问题是，如果您在 Server1 上打开本地 Powershell 会话，它会加载 v4，但如果您从 Server2 远程到 Server1，它只会加载 v2。

有人知道如何告诉 Powershell 使用 CLR v4 进行远程会话吗？任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T11:07:49.950

尝试在 64 位操作系统中创建一个`c:\windows\System32\wsmprovhost.exe.config`文件和一个文件，如下所示：`c:\windows\SysWOW64\wsmprovhost.exe.config`

```
<?xml version="1.0"?>
<configuration>
    <startup useLegacyV2RuntimeActivationPolicy="true">
         <supportedRuntime version="v4.0.30319"/>        
         <supportedRuntime version="v2.0.50727"/>        
    </startup>
</configuration> 
```

# codeigniter - Rolling-curl Codeigniter 库

> ID：12088061
> 
> 赞同：0
> 
> 时间：2012-08-23T08:52:48.513
> 
> 标签：codeigniter, curl

我一直在 Codeigniter [http://code.google.com/p/rolling-curl/source/browse/#svn%2Ftrunk之外成功使用了这个滚动卷曲库](http://code.google.com/p/rolling-curl/source/browse/#svn%2Ftrunk)

我想将该库与 Codeigniter 一起使用，但无法使其正常工作。

我创建了一个名为 Rollingcurl.php 的文件并放在 codeigniter 的 application/library 文件夹中。在这个文件中，我复制了原始 RollingCurl.php 文件的内容（请参阅上面发布的链接中的 RollingCurl.php 文件）。

我的控制器如下所示：

```
class Rolling_curl extends CI_Controller {

function __construct()
{
    parent::__construct();      
}

function index(){

    $this->load->library('rollingcurl', 'request_callback');
    $this->rollingcurl->request("http://www.google.com");
    $this->rollingcurl->execute();

}

function request_callback($response, $info, $request) {
        // parse the page title out of the returned HTML
        if (preg_match("~<title>(.*?)</title>~i", $response, $out)) {
                $title = $out[1];
        }
        echo "<b>$title</b><br />";
        print_r($info);
    print_r($request);
        echo "<hr>";
} 
```

在索引函数中，我正在加载从原始 RollingCurl.php 创建的 rollingcurl 库，并传递参数“request_callback”，这是控制器中另一个函数的名称（参见原始 rolling-curl 示例：[http： //code.google.com/p/rolling-curl/source/browse/trunk/example.php](http://code.google.com/p/rolling-curl/source/browse/trunk/example.php)）。

但是，它不起作用......我做错了什么？

# oracle - ORACLE JDBC：DriverManager 或 OracleDataSource

> ID：12088068
> 
> 赞同：4
> 
> 时间：2012-08-23T08:53:37.937
> 
> 标签：oracle, jdbc, oracle11g

在尝试使用具有匹配版本的`Oracle 11.1.0.7.0`jdbc 连接到我的数据库时，我发现了两个变体。`ojdbc6.jar`假设一个字符串**DBURL**的形式

```
jdbc:oracle:thin:@//#DBSERV#:#DBPORT#/#DBSID# 
```

这些散列词（'...'）填写正确的地方，它们（变体）看起来像

1.  ods=新 oracle.jdbc.pool.OracleDataSource();
    ods.setPassword（数据银行密码）；
    ods.setUser（数据银行用户）；
    ods.setURL(DBURL);
    dbconn=ods.getConnection;
2.  java.sql.DriverManager.registerDriver(new oracle.jdbc.OracleDriver());
    dbconn=java.sql.DriverManager.getConnection(DBURL,数据银行用户,数据银行密码);

当然紧随其后`dbconn.getConnection();`。
到目前为止，我认为两者都应该工作 - 但我感兴趣哪种方式更好？也许一个已被弃用？
此外，我只能与变体 1 联系。也许我错过了变体 2中的某些内容。
我对任何建议都感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-02T20:19:29.307

[DataSource](http://docs.oracle.com/javase/6/docs/api/javax/sql/DataSource.html)是提供与数据库的连接的首选方式。这种高级对象为您“完成”工作并访问较低的类，例如[DriverManager](http://docs.oracle.com/javase/6/docs/api/java/sql/DriverManager.html)

您可以找到一些`DataSource`更强大的实现，其中连接是池化和可重用的：[ConnectionPoolDataSource](http://docs.oracle.com/javase/6/docs/api/javax/sql/ConnectionPoolDataSource.html)

`DataSource`通常配置并注册到 JNDI 树中。
通常，像[Tomcat](http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html)这样的应用程序/Web 服务器提供配置（和共享）数据源的能力。

# visual-studio-2012 - 安装 VS2012 后应用程序崩溃

> ID：12088069
> 
> 赞同：0
> 
> 时间：2012-08-23T08:53:39.127
> 
> 标签：visual-studio-2012

我不太确定最初的去向...

我有一个使用 MFC 和 .NET 2.0 在 VS2010 中构建的应用程序。然后我安装了VS2012。甚至在启动 VS2012 之前，我已经尝试再次运行该应用程序，现在它在启动后立即崩溃，并出现“应用程序已停止工作”错误。

但是，如果我在 VS2010 中通过 F5 启动应用程序（即从一开始就附加了调试器），它确实有效。

有没有人对此可能有什么可能的原因/修复有任何建议？我目前不确定要寻找什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:06:43.223

您可能从未安装过 VS2010 运行时的可再发行包。使用[Dependency Walker](http://www.dependencywalker.com/)或类似工具找出缺少的 DLL，找出它的来源，然后安装该运行时包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:27:43.887

最终它与 VS2012 完全无关 - doh。有一个旧的可执行文件正在运行，并且缺少许多依赖项。

# c++ - 以独立于平台的方式访问串口

> ID：12088071
> 
> 赞同：2
> 
> 时间：2012-08-23T08:53:45.773
> 
> 标签：c++, c, serial-port, platform-independent

我的任务是创建一个程序，通过 RS-232 从桌面站控制设备。目前我正处于计划阶段，需要一些一般帮助来选择语言和解决问题的整体方法。

该程序应在 32 位和 64 位 Intel 处理器上的 Linux（主要是 Ubuntu）和 Windows（XP、7）下构建和运行。工作站可能有物理 COM 端口或（更有可能）USB-RS232 转换器。

目前我最好的选择是使用 CMake 有条件地构建的 C++ 程序。是否有某种方式，使用某种语言来配置和访问串行端口（包括通过 USB 模拟），这是平台无关的？如果不是，那么解决这个问题的好方法是什么？

*到目前为止的建议*：
* [C++ with Boost](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference.html)
* [python with pySerial](http://pyserial.sourceforge.net/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T09:27:49.513

使用 Boost Asio（使用 C++）！

（[http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio.html](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio.html)）

它保证独立于平台：http: [//www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/using.html](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/using.html)

尽管它比任何其他库更好的是它支持异步通信。我认为该功能使其在您的设备控制软件中非常有用。并且不要忘记它是 Boost 的一部分，其库非常可靠。

我在我的短信程序中使用了它（使用通过串行/COM 端口发送的 AT 命令）。

希望这可以解决您的问题，因为它已经解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:33:21.703

您可以查看 Java [Communication Api](http://www.oracle.com/technetwork/java/index-jsp-141752.html)

对于 C/C++，您可以在 linux、MacOS 和 Cygwin（适用于 Windows）下使用**/dev/ttySx设备。**如果 USB-RS232 转换器基于 FTDI 芯片，您可以查看 libFTDI。最后，您最终可以检查[适用于 Linux 和 Windows 的 RS-232](http://www.teuniz.net/RS-232/)

# android - 如何在我的 android 应用程序中添加阿拉伯语

> ID：12088072
> 
> 赞同：0
> 
> 时间：2012-08-23T08:53:45.213
> 
> 标签：android, android-emulator, locale

我已经建立了一个阿拉伯语词典应用程序，但我的模拟器没有阿拉伯语，所以文本显示不正确，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:55:02.120

在连接到开发机器的真实设备上测试您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:55:26.160

尝试在 Android 3.0 及更高版本的模拟器上进行测试。他们在这些版本的模拟器中修复了阿拉伯语。

# sql-server - 查询性能

> ID：12088075
> 
> 赞同：0
> 
> 时间：2012-08-23T08:53:50.077
> 
> 标签：sql-server, database, sql-like

我有具有以下架构的表：

> ID,firstName,MiddleName,LastName,FML,[其他一些列]

`FML`列由连接名、空格字符、中间名、空格字符和姓氏创建。当您知道 FML 时，我想搜索 persong。因此我的查询是

```
SELECT * from tbl where FML LIKE @Param 
```

但我想优化这个查询，我正在考虑将输入字符串分成 firstName、MiddleName、LastName 字符串并像这样进行查询

```
SELECT * FROM tbl where firstName like @FN and MiddleName like @MN and LastName like @ln. 
```

也会查询

```
SELECT smth from tbl where Val='test' 
```

然后在性能方面做得更好

```
Select smth from tbl where Val like 'test' 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:56:56.407

如果你的意思是 =，那么使用 =。如果你的意思是like，那么就用like。但是一旦给like加上通配符，性能就会下降。

通过对单独的字段进行分离和过滤，您失去了灵活性，但增加了在搜索中更具体的能力。因此，它本身并没有优化，因为功能不同。

假设您有两条记录，Jack Roberts 和 Robert Jack

如果您的查询是“%Robert%”，您的第一个查询允许您找到它们，而第二个查询允许您使用单独的查询找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:03:00.370

是的 '=' 运算符提供最佳性能，而 LIKE 搜索所有具有 test 值的 Val。

# dynamics-crm - 如何测试 Dynamics CRM 电子邮件功能

> ID：12088076
> 
> 赞同：0
> 
> 时间：2012-08-23T08:53:50.157
> 
> 标签：dynamics-crm, microsoft-dynamics

我在 VM 上设置 Dynamics CRM 以向某些客户端演示该功能。

我想演示电子邮件功能，例如向服务器发送电子邮件并检查是否创建了活动。

我已经开始配置电子邮件路由器，但看起来需要一个 Exchange 实例。无论如何，是否可以在没有 Exchange 的情况下演示功能（这实际上不是我的专业领域）。我可以使用任何测试工具吗？

注意：我想在我的虚拟机上演示功能，而不是在云中的任何服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:01:45.283

Crm 本身不能发送或接收电子邮件，它使用电子邮件路由器与电子邮件服务器通信以发送和接收电子邮件。

当我使用电子邮件路由器时，我通常发现交换是一个简单的选择。但是，您也可以使用 POP3 和 SMTP 电子邮件服务器（例如 yahoo 邮件），我自己没有这样做，但它[在此处](http://technet.microsoft.com/en-us/library/hh699670)描述：

> 电子邮件系统
> 
> 电子邮件路由器可以连接到一个或多个运行 Microsoft Exchange Server 或 Exchange Online 的电子邮件服务器。电子邮件路由器还可以连接到符合 POP3 的服务器以提供传入电子邮件路由。对于传出电子邮件，您可以使用 SMTP 和 EWS（仅限 Exchange Online）。有关 Microsoft Dynamics CRM 支持的电子邮件服务器版本和协议的详细信息，请参阅本指南中的 Microsoft Dynamics CRM 电子邮件路由器软件要求。

另一个值得考虑的选项是 Outlook 客户端，这可能是快速演示的最快途径。

如果您在 VM 上安装 Outlook，将其连接到电子邮件帐户，将其连接[到 Crm](http://www.microsoft.com/en-gb/download/details.aspx?id=27821)，然后您可以使用它手动将电子邮件提升到 Crm。使用这种方法，您甚至可能会错过将其实际连接到真实邮箱的机会，只需在 Outlook 中创建任务和电子邮件，然后进行推广。也许这对于演示目的来说已经足够好了。

# java - 在 MappedSuperClass 属性上添加 @Transient

> ID：12088078
> 
> 赞同：1
> 
> 时间：2012-08-23T08:53:57.127
> 
> 标签：java, hibernate

目前我有一个名为 BaseEntity 的 MappedSuperClass，我正在扩展我的所有实体类

```
 @MappedSuperclass
public abstract class PersistentObject extends BaseEntity {

    /**
     * 
     */
    @Transient
    private static final long serialVersionUID = -1701208353317749260L;

    protected Tenant tenant;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "TENANT_ID")
    public Tenant getTenant() {
        return this.tenant;
    }

    public void setTenant(Tenant tenant) {
        this.tenant = tenant;
    }
@Version
    @Column(name = "VERSION")
    public int getVersion() {
        return this.version;
    }

    public void setVersion(int version) {
        this.version = version;
    }

} 
```

在包含静态数据的实体中，我不需要添加tenant_id，因为我需要 BaseEntity 中的所有其他属性。

目前我只能使用 AttributeOverrides 和 AssoscationOverrides 更改我的列名等，那么如何在 MappedSuperClass 中不需要的字段上添加@Transient？

# r - 如何将整数转换为二进制向量？

> ID：12088080
> 
> 赞同：23
> 
> 时间：2012-08-23T08:54:02.097
> 
> 标签：r, binary, integer, numeric, binary-data

如何使用R将整数转换为二进制向量？

例如 ：

```
number <- 11
[1] 1 0 1 1 
```

如果我需要将整个数字向量（最小值 = 0，最大值 = 300）转换为二进制矩阵，最快的转换方法是什么（使用 R 代码或包中的一些现有函数）？

跟着兔子： `base::intToBits`

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-23T09:09:58.967

有`intToBits`将任何整数转换为 32 个原始向量的函数，因此您可以这样做：

```
decimals <- c(3,5,11,4)
m <- sapply(decimals,function(x){ as.integer(intToBits(x))})
m

> m
      [,1] [,2] [,3] [,4]
 [1,]    1    1    1    0
 [2,]    1    0    1    0
 [3,]    0    1    0    1
 [4,]    0    0    1    0
 [5,]    0    0    0    0
 [6,]    0    0    0    0
 [7,]    0    0    0    0
 [8,]    0    0    0    0
 [9,]    0    0    0    0
[10,]    0    0    0    0
[11,]    0    0    0    0
[12,]    0    0    0    0
[13,]    0    0    0    0
[14,]    0    0    0    0
[15,]    0    0    0    0
[16,]    0    0    0    0
[17,]    0    0    0    0
[18,]    0    0    0    0
[19,]    0    0    0    0
[20,]    0    0    0    0
[21,]    0    0    0    0
[22,]    0    0    0    0
[23,]    0    0    0    0
[24,]    0    0    0    0
[25,]    0    0    0    0
[26,]    0    0    0    0
[27,]    0    0    0    0
[28,]    0    0    0    0
[29,]    0    0    0    0
[30,]    0    0    0    0
[31,]    0    0    0    0
[32,]    0    0    0    0 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-23T09:04:23.670

这个[SO post](https://stackoverflow.com/questions/6614283/converting-decimal-to-binary-in-r)建议了这个`intToBits`功能。我定义了 function `number2binary`，其中包含一个`noBits`用于控制返回多少位的参数。标准是返回 32 位。

```
number2binary = function(number, noBits) {
       binary_vector = rev(as.numeric(intToBits(number)))
       if(missing(noBits)) {
          return(binary_vector)
       } else {
          binary_vector[-(1:(length(binary_vector) - noBits))]
       }
    } 
```

对于一些例子：

```
> number2binary(11)
 [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 1
> number2binary(11, 4)
[1] 1 0 1 1 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-02-04T15:52:03.683

试试 CRAN 包“binaryLogic”

```
library(binaryLogic)

as.binary(11)
[1] 1 0 1 1

as.binary(11, littleEndian=TRUE)
[1] 1 1 0 1

as.binary(42, n=16)
[1] 0 0 0 0 0 0 0 0 0 0 1 0 1 0 1 0

as.binary(0:2, n=2)
[[1]]
[1] 0 0

[[2]]
[1] 0 1

[[3]]
[1] 1 0

as.binary(0xFF)
[1] 1 1 1 1 1 1 1 1 
```

也可用：移位、旋转、格雷码等。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-23T09:24:35.373

您可以使用以下功能，基于`intToBit`：

```
intToBitVect <- function(x){
  tmp <- rev(as.integer(intToBits(x)))
  id <- seq_len(match(1,tmp,length(tmp))-1)
  tmp[-id]
} 
```

第一行将 intToBits 输出转换为数字 0 和 1，并直接排序。第二行检查哪些值需要保留，如下：

*   使用 .检查第一个 1 出现的位置`match`。如果找不到 1，则要求`match`返回`tmp`向量的长度。
*   创建一个序列（使用`seq_len`）从 1 到向量`1`中第一次出现 之前的位置`tmp`
*   `tmp`删除向量中的所有这些位置

为了证明它有效：

```
> intToBitVect(11)
[1] 1 0 1 1
> intToBitVect(0)
[1] 0 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-10-13T18:18:18.877

我在 MJ Crawley 的“The R Book”中找到的解决方案是以下功能：

```
binary <- function(x) {
  i <- 0
  string <- numeric(32)
  while(x > 0) {
    string[32 - i] <- x %% 2
    x <- x %/% 2
    i <- i + 1 
  }
  first <- match(1, string)
  string[first:32] 
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-01-12T13:07:03.307

还有一个：

```
toBits <- function (x, nBits = 8){
   tail(rev(as.numeric(intToBits(x))),nBits)
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-16T20:26:07.423

如果你想返回一个二进制序列，即一个 1 和 0 的向量，那么这个函数会为你做这件事，但它一次只能取 1 个数字。

```
dectobin <- function(y) {
  # find the binary sequence corresponding to the decimal number 'y'
  stopifnot(length(y) == 1, mode(y) == 'numeric')
  q1 <- (y / 2) %/% 1
  r <- y - q1 * 2
  res = c(r)
  while (q1 >= 1) {
   q2 <- (q1 / 2) %/% 1
   r <- q1 - q2 * 2
   q1 <- q2
   res = c(r, res)
  }
  return(res)
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-02-24T15:57:09.617

你实际上不需要调用任何函数来得到这个 - 单独的模运算可以给出答案。

```
int_to_binary <- function(num, pow) {
  if(2^(pow + 1) - 1 < num) stop("Use a higher values of 'pow'")
  num %/% (2^(pow:0)) %% 2
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-12-20T03:23:25.767

```
intToBin <- function(x){
  if (x == 1)
    1
  else if (x == 0)
    NULL
  else {
   mod <- x %% 2
   c(intToBin((x-mod) %/% 2), mod)
  }
} 
```

所以 intToBin(10) 返回

```
[1] "1" "0" "1" "0" 
```

如果你想要字符串而不是向量

```
> paste0(intToBin(10), collapse = "")
[1] "1010" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-05T08:33:01.793

这是一个*Rcpp*实现。

在 Rstudio 中，将以下代码保存在文件中，例如`binary.cpp`，然后键入*Source*。

```
//************************
// binary.cpp 
#include <RcppArmadillo.h>

//' @Title get the binary representation of a positive integer
// [[Rcpp::depends(RcppArmadillo)]]
//[[Rcpp::export]]
void intToBinary(int n, arma::vec& a ) {
  for(int i=0;n>0;i++){
    a[i]=n%2;
    n=n/2;
  }
}
//************************ 
```

如果 Source 顺利，从 R 控制台类型

```
> a <- rep(0,10) # needed to store the binary representation
> myInt <- 5 # to be converted to binary form
> intToBinary(myInt, a)
> rev(a) # print in the usual form 
```

# objective-c - 替换 NSString (iOS NSString) 中每出现一次的引号

> ID：12088081
> 
> 赞同：4
> 
> 时间：2012-08-23T08:54:03.297
> 
> 标签：objective-c, ios, nsstring

我需要用德语文本的特定引号替换已经存在的标准上双引号“”（在我从数据库中获取的文本中），以便在 UIWebView 中使用。引用的单词（每个偶数索引）之前的第一个双引号字符需要替换为 HTML 等价物 „ which is `&bdquo;`，引用的单词（每个奇数索引）之后的第二个双引号字符需要替换为 “ which is `&ldquo;`。引号可以在文本中的任何位置，所以我不能依赖任何固定的位置。

所以基本上我有一个这样的 NSString：

*只是“一些”文本和一些“更多”文本*

或在 Objective-C 中：

```
NSString *str = @"just \"some\" text with some \"more\" text"; 
```

我知道来自 NSString 的 stringByReplacingOccurrencesOfString 方法，但当然这只会用底部双引号替换所有双引号。

```
NSString *newStr = [str stringByReplacingOccurrencesOfString:@"\"" withString:@"&bdquo;"]; 
```

我找不到一种方法来替换每一秒或每第 n 次出现，有人有提示/想法我怎么能做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:33:45.033

`NSScanner`提供另一种选择...

```
NSScanner *scanner = [NSScanner scannerWithString:englishString];
NSMutableString *germanString = [NSMutableString string];
BOOL foundQuote = YES;
int quoteIndex = 0;

while (foundQuote) {
    NSString *nextPart = @"";
    [scanner scanUpToString:@"\"" intoString:&nextPart];
    if (nextPart != nil) {
        [germanString appendString:nextPart];
    }
    foundQuote = [scanner scanString:@"\"" intoString:nil];
    if (foundQuote) {
        [germanString appendString:((quoteIndex % 2) ? @"&ldquo;" : @"&bdquo;")];
        quoteIndex++;
    }
}

NSLog(@"The German version is: %@", germanString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:50:26.570

像这样的事情应该是朝着正确的方向推动：

```
static NSString * StringByReplacingEverySecondOccurrenceWithString(
                        NSString * const pSource,
                        NSString * const pSearch,
                        NSString * const pReplace)
{
  /* @todo test that pSource has two occurrences before copying, and return [pSource.copy autorelease] if false. */
  NSMutableString * const str = [pSource.mutableCopy autorelease];
  bool isEven = true;
  for (NSUInteger pos = 0; pos < str.length; isEven = !isEven) {
    const NSRange remainder = NSMakeRange(pos, str.length - pos);
    const NSRange next = [str rangeOfString:pSearch options:0 range:remainder];
    if (NSNotFound != next.location && !isEven) {
      [str replaceCharactersInRange:next withString:pReplace];
    }
    pos = next.location + next.length;
  }
  return [str.copy autorelease];
} 
```

* * *

**更新**

如果您想按照 Caleb 对问题的编辑，您可以使用它来替换替换字符串：

```
static NSString * StringByReplacingWithAlternatingStrings(
                          NSString * const pSource,
                          NSString * const pSearch,
                          NSString * const pReplaceA,
                          NSString * const pReplaceB)
{
  /* @todo test that pSource has two occurrences before copying, and return [pSource.copy autorelease] if false. */
  NSMutableString * const str = [pSource.mutableCopy autorelease];
  bool isEven = true;
  for (NSUInteger pos = 0; pos < str.length; isEven = !isEven) {
    const NSRange remainder = NSMakeRange(pos, str.length - pos);
    const NSRange next = [str rangeOfString:pSearch options:0 range:remainder];
    if (NSNotFound != next.location) {
      NSString * const substitution = isEven ? pReplaceA : pReplaceB;
      [str replaceCharactersInRange:next withString:substitution];
      pos = next.location + substitution.length;
    }
    else {
      pos = NSNotFound;
    }
  }
  return [str.copy autorelease];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T10:13:06.347

我会建议使用正则表达式。

```
NSString *str = @"just \"some\" text with some \"more\" text";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\"(\\w+)\"" options:NSRegularExpressionCaseInsensitive error:nil];
NSString *returnString = [regex stringByReplacingMatchesInString:str options:0 range:NSMakeRange(0, [str length]) withTemplate:@"\"$1&quote"];
NSLog(@"%@",returnString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T10:05:15.880

做这个：

```
 NSString *string = @"just \"some\" text with some \"more\" text";
 NSArray *arr = [string componentsSeparatedByString:@"\""];
 NSMutableString *formattedResponse = [NSMutableString string];
 for (int i = 0;i<[arr count];i++)//(NSString *str in arr)
 {
    if(i == 0)
    {
        [formattedResponse appendString:[arr objectAtIndex:i]];
    }
    else{
    if(i%2 == 0)
    {
        [formattedResponse appendString:[NSString stringWithFormat:@"%@",[arr objectAtIndex:i]]];
    }
    else{
        [formattedResponse appendString:[NSString stringWithFormat:@"\"%@,,",[arr objectAtIndex:i]]]; // replace downward quotes as i don't know
    }
    }
 }
 NSLog(@"formattedResponse : %@",formattedResponse); 
```

# python - python列表连接效率

> ID：12088089
> 
> 赞同：23
> 
> 时间：2012-08-23T08:54:14.787
> 
> 标签：python, list

连接两个列表的最有效方法是什么`list_a`以及`list_b`何时：

*   `list_b`物品必须放在`list_a`物品之前
*   结果必须放在`list_a`

我想到了 4 种可能性：

```
# 1
list_a = list_b + list_a

# 2
for item in list_b:
    list_a.insert(0, item)

# 3
for item in self.list_a:
    list_b.append(item)
list_a = list_b

# 4
list_a[0:0] = list_b 
```

谢谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-23T09:34:36.603

这是[BigYellowCactus 答案中](https://stackoverflow.com/a/12088237/)使用的时间如何随着列表长度的增加而发展的图表。纵轴是初始化两个列表并在另一个前面插入一个列表所需的时间，以 usec 为单位。水平轴是列表中的项目数。

![可能性的渐近行为](../Images/495d38656c0629d48702047a5fb783c5.png)

**t1**：

```
list_a = list_b + list_a 
```

**t2**：

```
for item in list_b:
    list_a.insert(0, item) 
```

**t3**：

```
for item in list_a:
    list_b.append(item)
list_a = list_b 
```

**t4**：

```
list_a[0:0] = list_b 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-23T10:12:49.453

鉴于

```
list_a = list_b + list_a 
```

适用于您的目的，因此您实际上并不需要`list_a`对象本身来存储所有数据`list_a`- 您只需要*调用* `list_a`它（即，您没有或不关心您拥有的任何其他变量浮动可能指的是同一个列表）。

如果您也不关心它是否完全是一个列表，而只是关心它是可迭代的，那么您可以使用`itertools.chain`：

```
list_a = itertools.chain(list_b, list_a) 
```

如果您*确实*关心某些列表内容，则可以构建类似于列表的类似事物类型`chain`-例如：

```
class ListChain(list):
    def __init__(self, *lists):
        self._lists = lists

    def __iter__(self):
        return itertools.chain.from_iterable(self._lists)

    def __len__(self):
        return sum(len(l) for l in self._lists)

    def append(self, item):
        self._lists[-1].append(item)

    def extend(self, iterable):
        self._lists.append(list(iterable))

    def __getitem__(self, item):
       for l in self._lists:
           if item < len(l):
              return l[item]
           item -= len(l)
       else:
          raise IndexError 
```

等等。这需要付出很多努力（可能超过其价值）才能在所有情况下工作 - 例如，处理切片和负索引浮现在脑海中。但是对于非常简单的情况，这种方法可以避免大量复制列表内容。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-23T09:00:33.967

您可以将 list_b 分配给一个切片，该切片恰好是空的，但位于 list_a 的开头：

```
list_a[0:0] = list_b 
```

这是在任何位置将列表插入另一个列表的最快方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-23T08:59:01.977

尝试这个：

```
list_a[0:0] = list_b 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-23T09:03:06.760

为什么不只是[`timeit`](http://docs.python.org/library/timeit.html)？

```
import timeit

create_data = """\
list_a = range(10)
list_b = range(10)
"""

t1 = timeit.Timer(stmt=create_data + """\
list_a = list_b + list_a
""")

t2 = timeit.Timer(create_data + """\
for item in list_b:
    list_a.insert(0, item)
""")

t3 = timeit.Timer(create_data + """\
for item in list_a:
    list_b.append(item)
list_a = list_b
""")

t4 = timeit.Timer(create_data + """\
list_a[0:0] = list_b
""")

for i, t in enumerate([t1,t2,t3,t4]):
    print i, "%.2f usec/pass" % (1000000 * t.timeit(number=100000)/100000) 
```

**结果：**

> 0 0.73 微秒/遍
> 1 2.79 微秒/遍
> 2 1.66 微秒/遍
> 3 0.77 微秒/遍

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-11-17T07:43:02.943

[![在此处输入图像描述](../Images/e4624375ebcc4b0e90b577736f7d1024.png)](https://i.stack.imgur.com/USaAq.png)

[`itertools.chain`](https://docs.python.org/library/itertools.html#itertools.chain)只需制作一个生成器，因此如果您可以使用生成器而不是列表来摆脱困境，那么生成的时间是恒定的，但是您在访问每个元素时会付出代价。否则`list_a[0:0] = list_b`大约快 6 倍`list_a = list_b + list_a`

我认为这`list_a = list_b + list_a`是最易读的选择，而且已经相当快了。

您提到的`append()`在`for`循环中使用的两种方法非常慢，所以我没有费心将它们包括在内。

* * *

`[Clang 11.0.0 (clang-1100.0.33.8)] on darwin`使用以下代码在 1.6 GHz 双核 Intel Core i5 和 16 GB 2133 MHz LPDDR3 RAM 上运行Python 3.7.5 ：

```
from timeit import timeit
import random
import matplotlib.pyplot as plt

num_data_points = 1000
step = 10
methods = [
    # ordered from slowest to fastest to make the key easier to read
    # """for item in list_a: list_b.append(item); list_a = list_b""",
    # """for item in list_b: list_a.insert(0, item)""",
    # "list_a = list(itertools.chain(list_b, list_a))",
    "list_a = list_b + list_a",
    "list_a[0:0] = list_b",
    "list_a = itertools.chain(list_b, list_a)",
]

x = list(range(0, num_data_points * step, step))
y = [[] for _ in methods]
for i in x:
    list_a = list(range(i))
    list_b = list(range(i))
    random.shuffle(list_a)
    random.shuffle(list_b)
    setup = f"list_a = {list_a}; list_b = {list_b}"
    for method_index, method in enumerate(methods):
        y[method_index].append(timeit(method, setup=setup, number=30))
    print(i, "out of", num_data_points * step)

ax = plt.axes()
for method_index, method in enumerate(methods):
    ax.plot(x, y[method_index], label=method)
ax.set(xlabel="number of elements in both lists", ylabel="time (s) (lower is better)")
ax.legend()
plt.show() 
```

# android - 带圆角的矩形，但每边都有定义的笔划

> ID：12088092
> 
> 赞同：0
> 
> 时间：2012-08-23T08:54:23.363
> 
> 标签：android, android-layout

我将它用于我的列表视图背景：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <solid android:color="#C98E04"/>
<stroke android:width="0.25dp"
        />

<padding android:left="1dp"
         android:top="1dp"
         android:right="1dp"
         android:bottom="1dp"
         /> 

<corners android:bottomRightRadius="7dp" android:bottomLeftRadius="7dp" 
 android:topLeftRadius="7dp" android:topRightRadius="7dp"/> 
</shape> 
```

问题是每个列表视图项之间的边框比框架厚。如何定义更薄的上边框（笔画）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-23T09:58:23.130

您可以将笔画的大小最小化为 0.1，并在列表视图中添加它以最小化 didvei 间隙 android:dividerHeight="2dp"

# html - 自定义选择下的链接未从隐藏的 li 在声明的页面上重定向

> ID：12088098
> 
> 赞同：0
> 
> 时间：2012-08-23T08:54:40.083
> 
> 标签：html, css

我对自定义选择有一个奇怪的问题。我使用了一个简单的“ul li ul”来创建该选择并在焦点上展开，但是如果我想在选择在隐藏的 li 上展开时使用一些链接，当我点击它们时没有任何反应，我不明白为什么：|

如果有人可以帮助我。

小提琴示例：http: **[//jsfiddle.net/RwtHn/1128/](http://jsfiddle.net/RwtHn/1128/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:07:37.070

链接（_self）的默认目标不起作用。（不知道为什么）
尝试使用 _blank 或 _parent

```
 <ul id="main">
        <li class="username" tabindex="1" >  <a>USERNAME</a>
            <ul class="curent_buser">
                <li><a  href="http://www.youtube.com/watch?v=nOGsB9dORBg" target="_blank">HELP NEEDED</a></li>
                <li><a wicket:id="logoff" href="http://www.youtube.com/watch?v=nOGsB9dORBg" target="_blank">LOG OFF</a></li>
            </ul>
        </li>
    </ul> 
```

​</p>

# python - 向操作系统传递命令：这里有什么问题？

> ID：12088100
> 
> 赞同：0
> 
> 时间：2012-08-23T08:54:41.883
> 
> 标签：python, bash, operating-system

因此，我想创建一个简单的脚本来根据某个文件夹中包含的文件名创建目录。

我的方法如下所示：

```
def make_new_folders(filenames, destination):
    """
    Take a list of presets and create new directories using mkdir
    """
    for filename in filenames:
        path = '"%s/%s/"' %  (destination, filename)
        subprocess.call(["mkdir", path]) 
```

由于某种原因，我无法让命令工作。

如果我传入一个名为“测试文件夹”的文件，我会收到一个错误，例如：

```
mkdir: "/Users/soundteam/Desktop/PlayGround/Test Folder: No such file or directory 
```

打印“路径”变量会导致：“/Users/soundteam/Desktop/PlayGround/Test Folder/”

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T09:00:39.947

首先，您应该使用`os.path.join()`将路径部分粘合在一起，因为它可以跨平台工作。

此外，还有内置命令，如[os.mkdir](http://docs.python.org/library/os.html#os.mkdir)或[os.makedirs](http://docs.python.org/library/os.html#os.makedirs)（这真的很酷，因为它是递归的）来创建文件夹。创建子流程的成本很高，在这种情况下，这不是一个好主意。

在您的示例中，您将双引号 ( `"destination/filename"`) 传递给子进程，而您不必这样做。如果您在文件或文件夹名称中使用空格，终端需要双引号，子进程会为您处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T08:57:44.380

你不需要双引号。`subprocess`将参数直接传递给进程，因此您无需准备它们以供 shell 解析。您也不需要尾部斜杠，并且应该使用 os.path.join 来组合路径组件：

```
path = os.path.join(destination, filename) 
```

**编辑：**您应该接受@Fabian 的回答，这说明您根本不需要子流程（我知道）。

# servlets - 在WEB-INF下移动资源

> ID：12088103
> 
> 赞同：5
> 
> 时间：2012-08-23T08:54:46.457
> 
> 标签：servlets, web.xml, web-inf

我有一个包含数百个 HTML、JavaScript 和图像文件的 Web 应用程序。这些文件位于根目录下：

```
my_root--
    -- html
    -- js
    -- images 
```

这些文件夹包含一些子文件夹。

出于安全原因，我需要将所有这些资源移动到 WEB-INF 文件夹下，这样它们就不能被直接访问。

目前 JSP 和 servlet 文件已经在 WEB-INF 文件夹下。

对我来说，安全移动 WEB-INF 下的所有 HTML/JavaScript/images 文件夹而不破坏所有链接/转发到这些文件夹中的资源并确保这些资源不能直接访问的最简单方法是什么？

我正在使用 WebSphere 和 WebLogic 服务器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T10:31:26.773

> *对我来说，安全移动 WEB-INF 下的所有 html/js/images 文件夹而不破坏所有链接/转发到这些文件夹中的资源并确保无法直接访问这些资源的最简单方法是什么？*

你在这里犯了一个思考错误。无论如何，HTML/JS/图像（和 CSS）资源都**需要**可直接访问。对于 JSP，情况有所不同，其中一些（如果不是全部）需要由 servlet 进行预处理（例如，从数据库中检索一些列表以显示在表中）。如果直接访问这些 JSP，那么将完全跳过该 servlet 步骤，这绝对不是您想要的（JSP 最终“空”；没有来自数据库的任何数据）。这就是为什么它们应该被隐藏起来`/WEB-INF`以防止直接访问而无需首先通过预处理 servlet。此外，在基于 servlet 的 MVC 框架的情况下，整个 MVC 框架过程（收集请求参数、转换/验证它们、更新模型值、调用操作等）将被跳过。

您的具体功能要求并不完全清楚（整个问题本身没有意义；答案只是“不要那样做”），但是如果您*确实*想限制对不需要的静态资源的访问仅由 servlet 对某些用户进行预处理，那么您需要实现身份验证/登录系统。您可以为此使用容器管理的身份验证或自行`Filter`开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:22:35.353

You can go with a very simple tool like notepad++ and use the findAndReplace feature. Eclipse can also do this but it gets tricky to effectively find every reference.

Note that there are other ways to stop users from accessing your images. It is probably easier to just leave things where they are and instruct the websphere to stop serving these images from the images folder

# javascript - 使用自身为变量分配新值

> ID：12088104
> 
> 赞同：1
> 
> 时间：2012-08-23T08:54:50.607
> 
> 标签：javascript, jquery

这不起作用，但我不明白为什么它不起作用？任何帮助的人？:)

```
params = qs.split("=", 2),
id = params[1];

if(id.indexOf("?") != -1){
  id = id.split("?", 1);
} 
```

基本上，如果 IF 语句为真，我想更改 'ID' 的值，如果不是.. 它会跳过它并且值 Id 保持默认值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:59:25.717

的结果`id = id.split("?", 1)`是一个数组（最多 1 个项目），但我认为您希望 id 是一个字符串。这可以解释为什么 id 不是你想要的字符串。

我同意其他评论。请向我们展示您要解析的 URL 字符串，并告诉我们您要获取的部分。通常，您`?`首先查找，然后分开，然后划分各个`key=value`部分。

如果您有这样的网址：

```
http://www.example.com?foo=bar 
```

这是一个简单的函数，可以将所有查询参数放入一个对象中：

```
function getParms(url) {
    var sections, key, pieces = url.split("?");
    var results = {};
    if (pieces.length > 1) {
        sections = pieces[1].split("&");
        for (var i = 0; i < sections.length; i++) {
            key = sections[i].split("=");
            results[key[0]] = key[1];                          
        }
    }
    return(results);
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/kNG3u/](http://jsfiddle.net/jfriend00/kNG3u/)

# sharepoint - SharePoint 2010 无法获取我的自定义组

> ID：12088106
> 
> 赞同：1
> 
> 时间：2012-08-23T08:54:54.317
> 
> 标签：sharepoint

我在我的 SharePoint 2010 发布网站中创建了几个组。我有一些我想要获取的应用程序页面

```
using (SPSite spsite = new SPSite(SPContext.Current.Site.Url))
{
    using (SPWeb curWeb = spsite.OpenWeb())
    {   
        SPGroupCollection groups = curWeb.Groups;
    }
} 
```

它显示现有（默认）站点组，但不显示我的组。

请提出一些带有问题定义的解决方案。我不知道为什么会发生这种情况，因为当我尝试使用该`GetList("list name")`函数访问我的任何列表时，我永远不会得到它，而如果我尝试通过索引器访问它，就像`Lists["list name"]`我得到那个列表一样。

不知何故，我可以访问我的网站集列表，但不能访问当前网站。

我不确定是否存在一些权利/权限问题或问题可能是什么。如果可能，请提供参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:05:29.023

如果您有`SPContext`，您可以使用`SPContext.Current.Site.WebApplication.Sites`来获取此网站集列表。从 中`SPSite`，所有网络都有`AllWeb`s 属性，`SiteGroups`组`RootWeb`列表中有 s 属性。请记住，子站点中没有组的概念

或者

```
using (SPWeb oWebsite = SPContext.Current.Site.URL)
{
    SPGroupCollection collGroups = oWebsite.Groups;
    foreach (SPGroup oGroup in collGroups)
    {
        Response.Write(SPEncode.HtmlEncode(oGroup.Name) + "<BR>");
    }
} 
```

# android - linux系统无法连接android设备到eclipse

> ID：12088107
> 
> 赞同：1
> 
> 时间：2012-08-23T08:54:58.330
> 
> 标签：android, eclipse, ubuntu

我无法使用 abd 将 android 设备连接到 linux 系统上的 eclipse。我创建`51-android.rules`的文件`root/etc/udev/rules.d`如下：

```
SUBSYSTEM="usb", ATTR{idVendor}=="2821", MODE="0666", GROUP="plugdev"
SUBSYSTEM="usb", ATTR{idVendor}=="04e8", MODE="0666", GROUP="plugdev"
SUBSYSTEM="usb", ATTR{idVendor}=="0955", MODE="0666", GROUP="plugdev"
SUBSYSTEM="usb", ATTR{idVendor}=="0b05", MODE="0666", GROUP="plugdev"
SUBSYSTEM="usb", ATTR{idVendor}=="18d1", MODE="0666", GROUP="plugdev"
SUBSYSTEMS="usb", ATTRS{idVendor}=="2821",ATTRS{idProduct}=="19983" MODE="0666"
SUBSYSTEM="usb", SYSFS{idVendor}=="0bb4" MODE="0666" 
```

当我将 android 设备连接到 linux 系统时，该设备无法识别。相反，我得到了？？？？？？作为设备名称。

安装的软件：

*   Ubuntu 10.04
*   日蚀靛蓝
*   安卓 4.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:02:01.800

在 SUBSYSTEM 之后需要两个“=”（即`SUBSYSTEM**==**"usb", ATTR{idVendor}=="2821"`，...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:23:13.980

尝试：

```
sudo adb kill-server
sudo adb start-server 
```

如果 ADB 在您的 $PATH 中。如果不，

```
sudo ./adb kill-server
sudo ./adb start-server 
```

来自 android-sdk/平台工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:51:31.943

确保您的文件名正确！

`/etc/udev/rules.d/51-android.rules.`（最后包含 .）

您必须为此文件添加权限，以便外部应用程序可以通过以下方式获得访问它的权限

```
chmod a+r /etc/udev/rules.d/51-android.rules 
```

关于设备配置的详细说明在[这里](http://developer.android.com/tools/device.html)..

# c++ - GetDlgItemInt 返回 0

> ID：12088114
> 
> 赞同：0
> 
> 时间：2012-08-23T08:55:14.513
> 
> 标签：c++, winapi, mfc

我里面有一个对话框和一个图片控件。在 OnInitDialog 期间，我尝试像这样获取图片控件的文本部分

```
CWnd *dialogHandle; // Handle of the dialog  
CWnd *itemHandle; // Handle of the picture control  
BOOL error;  
dialogHandle->GetDlgItemInt(itemHandle->GetDlgCtrlID(), &error, 0); 
```

但是 GetDlgItemInt 函数将错误设置为 0，表示存在错误

这是资源行

```
CONTROL 65443, IDC_PICTURE, "Static", SS_BITMAP, 13, 13, 40, 40 
```

我想要这个号码 65443

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:01:24.237

你想要 GetWindowLong(hWnd, GWL_ID); （或 MFC 等价物）。

GetDlgItemInt() 只是 GetDlgItemText() 周围的 atoi() 包装器，它读取控件的标签，而不是其 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:01:38.243

[`GetDlgItemInt()`](http://msdn.microsoft.com/en-us/library/c7t43w0s%28v=vs.80%29.aspx)应该让文本失控。第二个参数称为“已翻译”标志，而不是“错误”标志。这真的是您正在寻找的方法吗？我想你需要别的东西。

# web-applications - Heroku 应用程序验证来自 Cloudmailin 的请求

> ID：12088118
> 
> 赞同：1
> 
> 时间：2012-08-23T08:55:28.100
> 
> 标签：web-applications, heroku, cloudmailin

我在 Heroku 应用程序中使用 Cloudmailin

> CloudMailin 允许您通过 HTTP POST 请求在 Web 应用程序中接收传入的电子邮件

就我而言，Cloudmailin 配置为接收电子邮件以将它们发布到`myapp.heroku.com/incoming_url`.

我注意到任何人都可以跳过中间人和 POST 来`/incoming_url`刺激我的应用程序就像收到一封电子邮件一样。由于我的应用程序因此会发送一封电子邮件，我担心它可能会被滥用来发送垃圾邮件。

我希望我的应用程序能够验证真正由 Cloudmailin（或我）发出的 HTTP 请求。也许 Cloudmailin 可以以某种方式签署其 HTTP 请求（在 HTTP 标头或查询字符串中）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:23:11.023

CloudMailin 提供了两种方法来实现这一点：

*   散列（已停产，仅限原始格式）
*   HTTPS 和基本身份验证（新推荐的方法）。

如果您在 CloudMailin 中使用原始格式，则它通过散列机制进行签名。CloudMailin 与您共享一个密钥，用于散列通过 CloudMailin HTTP Post 发送的所有字段。这样您就可以验证消息是否确实来自 CloudMailin。可以在[此处](http://docs.cloudmailin.com/http_post_formats/original/#validating-the-sender)找到有关此散列的更多详细信息。

但是，在最近的格式中，这已停止使用 HTTPS 和基本身份验证。散列算法可能有点复杂，而且设置起来也很复杂。因此，建议用户通过 HTTPS 向其站点发出请求并通过基本身份验证。然后你可以使用类似的东西：

```
https://username:password@yourdomain.com/target 
```

作为您发布电子邮件的位置。由于只有 CloudMailin 和您的站点知道您可以拒绝此类攻击的用户名和密码，它还具有加密您的消息传输的好处，因此没有人可以窥探信息。

# sql-server-2008 - 具有多个 AND 和 OR 的 SQL 选择

> ID：12088119
> 
> 赞同：7
> 
> 时间：2012-08-23T08:55:39.083
> 
> 标签：sql-server-2008, select, where

我坐在一个逻辑问题上，我只是越来越困惑自己。

示例表

## 身份证 | 客户 ID | 任务 | 已确认 | 取消 | 完全的

1 | 20 | 正文 | 1 | 0 | 0
2 | 20 | 正文 | 1 | 1 | 0
3 | 20 | 正文 | 1 | 0 | 1
4 | 17 | 正文 | 0 | 1 | 0
5 | 17 | 正文 | 1 | 0 | 0
6 | 20 | 正文 | 1 | 空 | 空
7 | 20 | 正文 | 0 | 1 | 空值

我希望选择 custID = 20 的所有任务并确认 = 1。如果任务取消=1或完成=1，则不返回记录。

在这种情况下，返回的行将是 1 和 6。

到目前为止我的查询是

```
SELECT *
FROM table1
WHERE    
 (CustID = 20 AND Confirmed = 1 AND Cancelled <> 1 AND Completed <> 1) OR
 (CustID = 20 AND Confirmed = 1 AND Cancelled = 1 AND Completed <> 1) OR
 (CustID = 20 AND Confirmed = 1 AND Cancelled <> 1 AND Completed = 1) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-23T08:59:29.473

您可以将其简化为：

```
SELECT * FROM table1
WHERE CustID = 20
  AND Confirmed = 1
  AND (Cancelled <> 1 OR Cancelled IS NULL)
  AND (Completed <> 1 OR Completed IS NULL) 
```

在将实数值与 NULL 进行比较时，您必须小心（并且非常明确），因为等式和不等式都将它们排除在外。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T08:59:40.990

```
SELECT *
FROM table1
WHERE    
    CustID = 20 AND Confirmed = 1 AND NOT (Cancelled = 1 OR Completed = 1) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-02-04T08:59:36.767

```
SELECT * FROM thk_basvuru WHERE thk_status in (8,23,33) or thk_olo_status not in (4,6,9,11,12) 
```

# android - 安卓异步任务 下载没有进度和结果的文件

> ID：12088125
> 
> 赞同：0
> 
> 时间：2012-08-23T08:56:18.900
> 
> 标签：android, android-asynctask, extends, overriding

我想运行一个接受单个字符串并从服务器下载该文件的任务。由于必须在不同的线程上执行与网络相关的操作，我必须扩展 AsyncTask。参考在线文档，我看到它需要三个参数，即参数、进度和结果。

我知道扩展这样的类是有意义的

```
private class DownloadFileTask extends AsyncTask<URL, Integer, Long> 
```

但现在我只想下载文件而不显示任何进度或从函数返回任何内容。

扩展这样的类给了我错误

```
 private class DownloadFileTask extends AsyncTask<String, void, void>
     {
       protected void doInBackground(Sting url)
       {    //code to simply download file , no progress shown , nothing returned
       }
     } 
```

我也理解为实现类 DownloadFileTask 显示覆盖该方法

```
protected abstract Result doInBackground (Params... params) 
```

其原型中的 Result 是 AsyncTask<...> Template 的第三个参数。所以我不能把它当作无效。但是有没有办法简单地下载文件而不显示进度和结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:00:37.073

通用参数应该是对象，所以你应该传递`Void`而不是`void`.

```
....extends AsyncTask<String, Void, Void> 
```

# iphone - 用惯性移动汽车

> ID：12088127
> 
> 赞同：0
> 
> 时间：2012-08-23T08:56:25.190
> 
> 标签：iphone, objective-c, xcode, ios4

我试图在没有任何物理的情况下以惯性移动汽车。我在 Objective C 中使用基于视图的应用程序。
是否可以做这样的事情？我的任务是：
我触摸汽车并将其向左移动，当触摸结束方法完成后，汽车应继续惯性移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:08:35.247

你试过什么吗？

如果你不想用物理学来做，你将很难让它做你想让它做的事情。至少你需要

```
v = u - at 
```

在哪里：

```
v is the new speed, 
u is the initial speed 
t is the time and 
a is the deceleration 
```

这是你需要自己想出一个数字的减速。

# database - 数据库链接 & 而不是触发器

> ID：12088128
> 
> 赞同：0
> 
> 时间：2012-08-23T08:56:25.157
> 
> 标签：database, oracle, triggers, hyperlink

我有以下任务要管理。我们在服务器“A”和服务器“B”之间有一个数据库链接。我在服务器“A”上创建了表，并在服务器“B”上创建了指向这些表的视图。

前。服务器“A”上的客户表和服务器“B”上指向服务器“A”上的表的客户视图。

为了在视图上提供更新功能，我在视图上创建了一个代替更新触发器：

```
PROMPT CREATE OR REPLACE TRIGGER tudb_customers
CREATE OR REPLACE TRIGGER tudb_customers instead of update or delete on customers
REFERENCING NEW AS NEW OLD AS OLD
for each row

declare
proc_typ_old char;
proc_typ char;
begin
if updating then
    proc_typ := 'U';
else
    proc_typ := 'D';
end if;

if proc_typ = 'U' then
    update customers@db_link set customersname=:new.customersname
    where customersid = :old.customersid;
else
delete from customers@db_link where customersid = :old.customersid;
end if;
end TUDB_MOB_ZUG;
/ 
```

如果我尝试更新服务器“B”上的视图（更新客户设置客户名称 =“亨利”，其中客户 ID = 1）：old.customersid 始终为空。所以更新失败。

Oracle版本是10.2.0.1.0

任何人都可以在这件事上帮助我吗？有任何想法吗？

问候，克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:43:14.980

这可能是一个错误，因为它在 10.2.0.5 中似乎可以正常工作。错误 4386090（'OLD VALUE RETURN NULL IN "INSTEAD OF" TRIGGER BASED ON DBLINK）来自诊断分析的声音，`:old`如果触发器具有 DB 链接，则触发器中的值为 null；这似乎已作为 10.2.0.3 补丁集注释中列出的 4771052 的副本（'INSTEAD-OF 触发器无法通过 dblink 正确更新表'，但无法查看更多详细信息）关闭。

您需要向 Oracle 提出 SR 以确认这是同一问题，但如果是这样，我怀疑他们只会建议您进行修补，因为 10g 已经有一段时间不支持了。不幸的是，没有列出任何解决方法。

如果视图是单个表，从您最初的描述来看似乎就是这种情况，我不确定您是否需要触发器；直接更新和删除工作。您的视图是否[需要 INSTEAD OF 触发器](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_triggers.htm#i1025919)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:31:49.447

同意@AlexPoole，关于这口井可能是一个错误，您可能会被建议在联系 Oracle 时应用补丁。

好一点，在您的情况下，可能不需要通过视图进行更新。

但是，此时如果我是您，我会考虑这是否是在客户端和数据库之间建立连接的好方法。我的意思是通过 dblink 将 Oracle 实例（服务器“B”）连接到真实的数据库实例（服务器“A”），并让客户端通过服务器“B”间接连接到真实服务器。我认为这是一种 hack，在某个时刻似乎是解决可能是网络问题的简单方法，但后来会出现更多问题，比如这次。

# android - Android：从网页 URL 加载图像

> ID：12088136
> 
> 赞同：4
> 
> 时间：2012-08-23T08:57:05.733
> 
> 标签：android, url, imageview, android-imageview

> **可能重复：**
> [加载远程图像](https://stackoverflow.com/questions/3075637/loading-remote-images)

我正在开发一个应用程序，其中有一个列表，其中每一行都有一个图像，

此图像是从 Web URL 加载的。

下面是我的代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
            android:id="@+id/list_row_img"
            android:layout_width="200dp"
            android:layout_height="200dp"
            />

    <TextView
            android:id="@+id/list_row_description"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            />

</LinearLayout> 
```

这是活动代码

```
@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ImageView img= (ImageView) findViewById(R.id.list_row_img);
    Bitmap bm = null;
    try {
         URL aURL = new URL("http://image10.bizrate-images.com/resize?sq=60&uid=2216744464");
         URLConnection conn = aURL.openConnection();
         conn.connect();
         InputStream is = conn.getInputStream();
         BufferedInputStream bis = new BufferedInputStream(is);
         bm = BitmapFactory.decodeStream(bis);
         img.setImageBitmap(bm);
         bis.close();
         is.close();

         } catch (Exception e) {
            Log.v("EXCEPTION", "Error getting bitmap", e);
         }
} 
```

当我跑步时，我在设备上什么也没有。只有灰屏，没有异常发生。

请注意，我在清单文件中添加了此权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

谁能帮帮我？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T09:01:00.203

试试这个，你可以通过

```
 new DownloadImageTask((ImageView)  im1).execute(url here); 
```

* * *

```
 private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    ImageView bmImage;

    public DownloadImageTask(ImageView bmImage) {
        this.bmImage = bmImage;
    }

    protected Bitmap doInBackground(String... urls) {
        String urldisplay = urls[0];
        Bitmap mIcon11 = null;
        try {
            InputStream in = new java.net.URL(urldisplay).openStream();
            mIcon11 = BitmapFactory.decodeStream(in);
        } catch (Exception e) {
            Log.e("Error", e.getMessage());
            e.printStackTrace();
        }
        return mIcon11;
    }

/*    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        showProgressDialog();
    }*/

    protected void onPostExecute(Bitmap result) {
        //pDlg.dismiss();
        bmImage.setImageBitmap(result);
    }} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-23T09:06:46.617

使用以下代码从 url 下载图像并将图像显示到 imageview 中，这将解决您的问题。

```
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;
import android.os.Bundle;
import android.os.StrictMode;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.widget.ImageView;

public class MainActivity extends Activity {

    ImageView mImgView1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);

        mImgView1 = (ImageView) findViewById(R.id.mImgView1);
        String url = "https://www.morroccomethod.com/components/com_virtuemart/shop_image/category/resized/Trial_Sizes_4e4ac3b0d3491_175x175.jpg";
        BitmapFactory.Options bmOptions;
        bmOptions = new BitmapFactory.Options();
        bmOptions.inSampleSize = 1;
        Bitmap bm = loadBitmap(url, bmOptions);
        mImgView1.setImageBitmap(bm);
    }

    public static Bitmap loadBitmap(String URL, BitmapFactory.Options options) {
        Bitmap bitmap = null;
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in, null, options);
            in.close();
        } catch (IOException e1) {
        }
        return bitmap;
    }

    private static InputStream OpenHttpConnection(String strURL)
            throws IOException {
        InputStream inputStream = null;
        URL url = new URL(strURL);
        URLConnection conn = url.openConnection();

        try {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setRequestMethod("GET");
            httpConn.connect();

            if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                inputStream = httpConn.getInputStream();
            }
        } catch (Exception ex) {
        }
        return inputStream;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T09:00:55.983

您的图片链接无效。尝试使用浏览器访问它，您会发现。那是你的问题。

# linux - 尝试从 Go 程序中启动外部编辑器

> ID：12088138
> 
> 赞同：11
> 
> 时间：2012-08-23T08:57:16.173
> 
> 标签：linux, editor, go

我试图弄清楚如何从 Go 程序中启动外部编辑器，等待用户关闭编辑器，然后继续执行程序。基于[this](https://stackoverflow.com/questions/3076798/start-nano-as-a-subprocess-from-python-capture-input) SO answer，我目前有以下代码：

```
package main

import (
    "log"
    "os"
    "os/exec"
)

func main() {
    fpath := os.TempDir() + "/thetemporaryfile.txt"
    f, err := os.Create(fpath)
    if err != nil {
        log.Printf("1")
        log.Fatal(err)
    }
    f.Close()

    cmd := exec.Command("vim", fpath)
    err = cmd.Start()
    if err != nil {
        log.Printf("2")
        log.Fatal(err)
    }
    err = cmd.Wait()
    if err != nil {
        log.Printf("Error while editing. Error: %v\n", err)
    } else {
        log.Printf("Successfully edited.")
    }

} 
```

当我运行程序时，我得到了这个：

```
chris@DPC3:~/code/go/src/launcheditor$ go run launcheditor.go 
2012/08/23 10:50:37 Error while editing. Error: exit status 1
chris@DPC3:~/code/go/src/launcheditor$ 
```

我也尝试过使用`exec.Run()`而不是`exec.Start()`，但这似乎也不起作用（尽管它不会在同一个地方失败）。

如果我使用 Gvim 而不是 Vim，我可以让它工作，但它拒绝与 Vim 和 nano 一起工作。我认为这与在终端模拟器中运行的 Vim 和 nano 有关，而不是创建外部窗口。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T10:51:24.183

显然，您必须在对象上设置`Stdin`,`Stdout`和。像这样（假设对象被调用）：`Stderr``Cmd``os.Std(in|out|err)``cmd`

```
cmd.Stdin = os.Stdin
cmd.Stdout = os.Stdout
cmd.Stderr = os.Stderr 
```

解决这个问题的功劳归功于 freenode 上#go-nuts 上的人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T09:19:07.567

这对我有用，但它的缺点是打开另一个终端（编辑后会自动关闭）：

```
cmd := exec.Command("/usr/bin/xterm", "-e", "vim "+fpath) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T09:13:45.297

在这里`cmd := exec.Command("vim", fpath)`，你或多或少地做了：

```
$ PATH= vim foo.txt
bash: vim: No such file or directory
$ 
```

Shell 使用 PATH 环境变量，`exec.Command`不使用。您必须查找`vim`二进制文件并将其完整路径传递给`exec.Command`. [exec.LookPath](http://golang.org/pkg/os/exec/#LookPath)会为您做到这一点。

# c# - XtraGrid Master-Detail 在单独的网格中

> ID：12088142
> 
> 赞同：0
> 
> 时间：2012-08-23T08:57:42.493
> 
> 标签：c#, entity-framework

我将 xtragrids 与实体框架一起使用。我有 2 个 sql 表。我在 gridControl1 中显示了合作伙伴表，在 gridControl2 中显示了 partner_contacts 表。如何在 gridControl1 和 gridControl2 之间建立关系。如果我单击 gridControl1 中的一行，我想在 gridControl2 中显示相关行。

第一个表：合作伙伴 - partnerId - partnerName

第二张表：partner_contacts - partner_contactsId - partner_contactsName - partner_contacts_partner_FK

```
public partial class frmPartnersList : DevExpress.XtraEditors.XtraForm
{
    ValinorEntities valinor = new ValinorEntities();

    public frmPartnersList()
    {
        InitializeComponent();

        gridControl1.DataSource = valinor.partners;
        gridControl2.DataSource = valinor.partner_contacts;
    }
 } 
```

* * *

我试过这个：

```
 object obj = gridView1.GetRowCellValue(gridView1.GetSelectedRows()[0], gridView1.FocusedColumn.FieldName);

        string obj2 = obj.ToString();

        var selectedPartner = valinor.partners.Where(p => p.partnerId = obj2).FirstOrDefault();
        if (selectedPartner != null)
            gridControl2.DataSource = selectedPartner.partner_contacts; 
```

我有两个错误：

*   无法将 lambda 表达式转换为类型“字符串”，因为它不是委托类型

*   无法将类型“string”隐式转换为“int”

*   委托“System.Func”不接受 1 个参数

对于此代码：（p => p.partnerId = obj2）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:33:03.827

您可以`FocusedRowChanged`在 gridcontrol1 中使用事件。

例如，当 gridcontrol1 中的焦点行发生更改时

```
int partnerId=(int)gridview1.GetFocusedRowCellValue("PartnerID");

gridcontrol2.DataSource=valinor.partner_contacts.where(partner_contact=>partner_contact.PartnerId=partnerId); 
```

或者，如果您在实体模型的合作伙伴实体中添加了关系，则

```
var selectedPartner=valinor.partners.where(p=>p.PartnerId=partnerId).FirstOrDefault();
if(selectedPartner!=null)
gridcontrol2.datasource=selectedPartner.Contacts; 
```

我假设关系名称...它可能因您的模型而异。

# java - 码头和自定义 sessionIdManager

> ID：12088146
> 
> 赞同：2
> 
> 时间：2012-08-23T08:57:48.660
> 
> 标签：java, jetty, session-management

为了拥有自定义会话存储，我实现了自定义 sessionManager（通过扩展`NoSqlSessionManager`）和 sessionIdManager。我的代码（连同它需要的 jars）进入`${jetty.home}/lib/ext`（版本 8.1.4 BTW）。我包含了另一个具有`start.ini`以下内容的配置文件：

```
<Configure id="Server" class="org.eclipse.jetty.server.Server">
    <Set name="sessionIdManager">
        <New id="customIdMgr" class="com.me.customSessionIdManager">
            <Arg>...</Arg>
        </New>
    </Set>
</Configure> 
```

码头启动并且 sessionIdManager 似乎正在工作。至少`scavenge()`方法被调用。到现在为止还挺好。下一步是将我的自定义 sessionManager 与`WebAppContext`我选择的相关联。我在覆盖模板 ( `overlay.xml`) 中使用以下内容进行了操作：

```
<Configure class="org.eclipse.jetty.webapp.WebAppContext">

  <Get name="server">
    <Get id="customIdMgr" name="sessionIdManager"/>
  </Get>

  <Set name="sessionHandler">
    <New class="org.eclipse.jetty.server.session.SessionHandler">
      <Arg>
        <New class="com.me.customSessionManager">
          <Set name="sessionIdManager"><Ref id="customIdMgr"/></Set>
        </New>
      </Arg>
    </New>
  </Set>

</Configure> 
```

但是，当启动 Jetty 时，我得到了这个：

```
WARN:oejx.XmlConfiguration:Config error at <Get id="customIdMgr" name="sessionIdManager"/> java.lang.NullPointerException 
```

...这意味着在处理覆盖时，在主码头配置中注册的对象现在消失了。

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:30:47.573

经过大量调试后发现，问题的根源是`<Get name="server">`返回 null。很可能对 Server 类的引用在部署过程的后期注入到 WebAppContext 中。因此，我没有得到服务器，而是引用了它，`<Ref id="Server">`这就是诀窍。

# cocos2d-iphone - 检测多个碰撞点

> ID：12088147
> 
> 赞同：0
> 
> 时间：2012-08-23T08:57:53.933
> 
> 标签：cocos2d-iphone, box2d-iphone

如何检测精灵体内的多个碰撞点。我知道精灵体的检测，但不知道自定义碰撞。

在我的游戏中，我的玩家和敌人精灵都处于动态身体中，我想以两种方式检测碰撞，比如 mario 类型。敌人顶部的碰撞检测，另一个是敌人前面的碰撞检测。

我怎样才能做到这一点？？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:45:50.053

您可以在敌人的头部和底部添加不同的固定装置。然后只需检查哪个敌人的灯具与您的英雄相撞

# ios - fork() 失败（1：不允许操作）

> ID：12088155
> 
> 赞同：3
> 
> 时间：2012-08-23T08:58:15.250
> 
> 标签：ios, permissions, fork

我是ios新手。我面临一个关于许可的问题。fork() 失败（1：不允许操作）

我想为 ios 构建一个用 c 实现的开源库。可以在ios上使用“fork()”函数吗？如果可以，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:02:50.133

不，每个 iOS 应用程序都是一个单独的进程。您可以创建新线程，而不是新进程。

另请参阅[使用 fork() 将应用程序移植到 pthread_create()](https://stackoverflow.com/questions/6503083/porting-an-application-with-fork-to-pthread-create)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:16:01.707

fork() can only be used on jailbroken phones.

# maven - 使用原型在根 pom 中指定模块

> ID：12088156
> 
> 赞同：0
> 
> 时间：2012-08-23T08:58:18.967
> 
> 标签：maven, archetypes

我正在生成一个具有 4 个子模块的自定义原型。问题是，当我在根 pom.xml 中定义这 4 个模块时，使用以下符号：

```
<modules>
    <module>${rootArtifactId}-client</module>
    <module>${rootArtifactId}-daemon</module>
    <module>${rootArtifactId}-impl</module>
    <module>${rootArtifactId}-war</module>
</modules> 
```

当我在原型上运行 mvn install 时，我收到一条错误消息，指出该项目不包含模块。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:56:27.870

更新你的 pom 如下：

```
<modules>
    <module>${project.artifactId}-client</module>
    <module>${project.artifactId}-daemon</module>
    <module>${project.artifactId}-impl</module>
    <module>${project.artifactId}-war</module>
</modules> 
```

# wpf - 在工具提示上绑定对象集合

> ID：12088158
> 
> 赞同：0
> 
> 时间：2012-08-23T08:58:20.883
> 
> 标签：wpf, binding, collections, tooltip, stackpanel

有人可以告诉我如何将 a 的工具提示`StackPanel`与其子项绑定吗？

这是我使用的一些代码：

```
<StackPanel>
... (some UI like grid, textblock, border, ...)
<StackPanel.ToolTip>
 <ToolTip Placement="RelativePoint" Padding="0" HasDropShadow="False">
   <ItemsControl ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=StackPanel, AncestorLevel=3}, Path=Children}"
                 Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=StackPanel, AncestorLevel=3}, Path=ActualWidth}" 
                 Height="11">
   </ItemsControl>
  </ToolTip>
</StackPanel.ToolTip>
<StackPanel> 
```

我首先尝试`VisualBrush`将其绑定在 a 上`ToolTip`，但这仅显示非隐藏控件，因此当一个子项在 中隐藏（对眼睛不可见，而不对 PC 不可见）时`StackPanel`，该子项在`ToolTip`.

还想说与 ActualWidth 的绑定有效。现在我有一个具有正确度量的工具提示，但其中没有内容（它只是一个填充的空白矩形）。

有人请帮助我吗？:)

仅供参考，我想要的就像您使用他的工具提示绑定到 Textblock 的 Content 属性一样。唯一的区别是我想绑定对象集合而不是字符串值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:51:18.727

在**WPF**中，您应该使用**MVVM**，因为它允许您始终绑定到数据，而不是其他控件。您必须将**WPF 控件**视为**数据可视化工具**，而不是数据容器。

因此，如果您使用的是 MVVM，只需将 Tooltip ItemsControl 绑定到您的（可观察的？）项目集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:11:21.250

问题可能是由于 ToolTip 不是 StackPanel 的可视化树的一部分。

因此 StackPanel 不是 ToolTip 的祖先 -> 因此为什么 RelativeSource 绑定不起作用。

# php - MySQL：25M 记录（行）一个简单的 COUNT(column) 需要 70 秒然后退出

> ID：12088160
> 
> 赞同：0
> 
> 时间：2012-08-23T08:58:32.587
> 
> 标签：php, mysql, database, myisam

我有一个相当大的表（1,8GB，25M 记录），每个重要列都有索引（我使用 WHERE 或其他选择器）。引擎是 MyISAM，我听说有人建议切换到 InnoDB，但许多其他人说 MyISAM 在计算大量数据时速度更快（而 InnoDB 更适合安全事务）。

现在，有时，我会做一组简单的统计查询（所以我知道我们的立场）：

```
(A) SELECT COUNT(username) FROM superLargeTable
(B) SELECT COUNT(username) FROM superLargeTable WHERE firstname IS NOT NULL
(C) SELECT COUNT(username) FROM superLargeTable WHERE firstname IS NULL 
```

如果最近更新了表（并且缓存无效），这些是慢查询日志测量的查询时间：

A：71 秒（锁定：0 秒）（行：1） B：47 秒（锁定：0 秒）（行：1） C：20 秒（锁定：0 秒）（行：1）

显然，第二次运行（因为它被缓存了）会产生几乎即时的数据。

我对所有相关列都有索引（几乎所有列都有索引）。我仍然接受建议，说许多列上的索引是非常糟糕的设计，另一方面，我完全需要它，因为否则查询将全部超时。

我确实有很多突发类型的插入和更新，以不规则的时间间隔在表上触发（有时每分钟一次，最多 5000 次快速插入/更新），有时间隔几分钟。

数据需要同步，所以我不能拆分为只读从属设备并使用它。

知道为什么一个简单的 COUNT 需要这么长时间吗？是否有一个秘密的替代命令可以告诉我一行中有多少条记录，并且有一个特定的标准？

真的很纳闷。服务器是 8GHz、8/16GB RAM、160GB 磁盘（10% 左右正在使用），查询都在本地运行，而不是通过网络传输。

如果需要，愿意帮助提供更多数据/信息。

编辑 1：查询 A 的 EXPLAIN 命令返回：

```
select_type=SIMPLE
type=index
possible_keys=NULL
key=followers (this is the actual username column in the imaginary query above)
key_len=9
ref=NULL
rows=24408162
Extra=Using index 
```

编辑 2：@theHe 推荐了一个很棒的工具：mysqltuner.pl - 这是结果（问题）：

```
[!!] Total fragmented tables: 15
[!!] Maximum possible memory usage: 30.7G (767% of installed RAM)
[!!] Query cache efficiency: 8.6% (5M cached / 59M selects)
[!!] Joins performed without indexes: 19031
[!!] Temporary tables created on disk: 48% (993K on disk / 2M total)
[!!] Table cache hit rate: 0% (64 open / 27K opened) 
```

这些是建议：

`-------- Recommendations -----------------------------------------------------
General recommendations:
Run OPTIMIZE TABLE to defragment tables for better performance
Reduce your overall MySQL memory footprint for system stability
Adjust your join queries to always utilize indexes
When making adjustments, make tmp_table_size/max_heap_table_size equal
Reduce your SELECT DISTINCT queries without LIMIT clauses
Increase table_cache gradually to avoid file descriptor limits
Variables to adjust:
*** MySQL's maximum memory usage is dangerously high ***
*** Add RAM before increasing MySQL buffer variables ***
query_cache_limit (> 10M, or use smaller result sets)
join_buffer_size (> 128.0K, or always use indexes with joins)
tmp_table_size (> 32M)
max_heap_table_size (> 16M)
table_cache (> 64)`

# objective-c - 显示弹出框时更改方向时应用程序崩溃。

> ID：12088169
> 
> 赞同：1
> 
> 时间：2012-08-23T08:59:17.013
> 
> 标签：objective-c, ipad

嗨朋友们，

单击工具栏按钮时，会出现我的弹出视图。当我将模拟器旋转到横向时，会显示以下错误消息：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIPopoverController presentPopoverFromRect:inView:permittedArrowDirections:animated:]: Popovers cannot be presented from a view which does not have a window.'

*** First throw call stack:
(0x1b69052 0x1868d0a 0x1b11a78 0x1b119e9 0x9ae72e 0x9affcb 0x9b26eb 0x281a39 0x1b34885 0x1b347a8 0x1c61aa 0x5490d8 0x54d499 0x54d584 0x11ede00 0x15ff4f0 0x1aa0833 0x1a9fdb4 0x1a9fccb 0x209a879 0x209a93e 0x51ca9b 0x29dd 0x2955) 
```

处理我的按钮事件的代码是：

```
-(IBAction)name:(id)sender
{
    if ([_popover isPopoverVisible]) 
    {
        [_popover dismissPopoverAnimated:YES];
    }

    else {
        task * content = [[task  alloc] init];

        content.navigationItem.title =@"name"; 
        [content setDelegate:self];
        navController = [[UINavigationController alloc] initWithRootViewController: content]; 
        _popover = [[UIPopoverController alloc] 
                    initWithContentViewController:navController];
        _popover. popoverContentSize=CGSizeMake(350, 480);

        [_popover presentPopoverFromBarButtonItem:sender
                        permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    }

} 
```

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:31:35.647

在这里，您需要添加代码以在更改方向时从视图中消除弹出框。

`if ([_popover isPopoverVisible]) { [_popover dismissPopoverAnimated:YES]; }`

因此，在更改方向时将代码放入方法 shouldAutorotateToInterfaceOrientation() 中，它将起作用。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

if ([_popover isPopoverVisible]) 
{
    [_popover dismissPopoverAnimated:YES];
}

return YES; 
```

}

如果您还有其他问题，请随时提出。

# grails - 为什么使用与配置的 SpringBean 名称相同的操作名称会导致 ClassCastException？

> ID：12088174
> 
> 赞同：1
> 
> 时间：2012-08-23T08:59:31.270
> 
> 标签：grails, classcastexception, autowired, grails-controller

要重现此问题，请使用以下步骤。

1.  创建一个新的 Grails 应用程序。
2.  创建一个名为 FooController 的新控制器
3.  向 FooController 添加一个动作“栏”
4.  在 src/groovy 中，创建一个名为 Bar 的新类
5.  在 resources.groovy 中配置一个名为 bar 的 SpringBean

    `bar(Bar) {bean -> bean.autowire = 'byName' }`

6.  启动应用程序并导航到 http:localhost:8080/[appContext]/foo/bar
7.  你应该得到一个类似于这样的堆栈跟踪：

`java.lang.ClassCastException: Bar cannot be cast to groovy.lang.Closure at org.grails.plugin.resource.DevModeSanityFilter.doFilter(DevModeSanityFilter.groovy:44) at java.lang.Thread.run(Thread.java:680)'`

为什么会出现这种情况？它是 Grails 中的错误还是预期的行为？

我希望配置的 SpringBeans 和操作名称之间不应该有名称冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:10:42.243

问题是 Groovy 语法像

```
class FooController {
  def bar = {
    // do something
  }
} 
```

给`FooController`类两个公共方法

```
public Object getBar() {
  return bar;
}

public void setBar(Object newBar) {
  bar = newBar;
} 
```

该`setBar`方法的存在使 Spring 将其视为要自动装配的属性，并用您的 bean 替换闭包值。Grails 本身只需要 getter 方法，所以如果你说

```
class FooController {
  final bar = {
    // do something
  }
} 
```

（即声明`bar`为`final`）然后Groovy 将只合成getter 而不是setter，Spring 不会将`bar`其视为可以自动装配的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:19:24.440

控制器中的动作是一个闭包，它被转换为一个内部类。你的bean有相同的名字，所以我相信你是通过这个来命名冲突的。您是否尝试重命名 bean 或操作？

# qt - Qt将行编辑文本设置为链接单击的链接？

> ID：12088175
> 
> 赞同：0
> 
> 时间：2012-08-23T08:59:34.003
> 
> 标签：qt, hyperlink

使用这个：

```
void MainWindow::on_webView_linkClicked(const QUrl &arg1)
{

} 
```

如何设置`lineEdit`链接文本？我想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:01:50.223

如果我对你的理解正确，你有一个类似下面的链接......

```
<a href="foo.html">bar</a> 
```

..你想获得价值“bar”。如果这就是你想要做的，你不能从那个方法。几个选项，取决于您对页面的控制程度：

*   将超链接的文本嵌入到 URL 中并提取它。就像是：`<a href="foo.html?text=bar">bar</a>`
*   如果您自己生成这些链接，并且 URL 和文本之间存在一对一的关系，则设置从 url 到文本的映射并在映射中查找文本。

# java - 使用opencv或javacv识别图像中具有相同颜色的轮廓？

> ID：12088176
> 
> 赞同：0
> 
> 时间：2012-08-23T08:59:35.137
> 
> 标签：java, opencv, javacv

这个问题与我[之前](https://stackoverflow.com/questions/11912503/how-to-identify-contour-which-are-not-directly-separated-from-each-other/11912722#comment15903920_11912722) 的问题有关，我使用彩色图像作为输入并使用线条颜色进行识别，但我想知道如何使用灰度图像识别这种图像。这是灰度输入图像，必须识别

![在此处输入图像描述](../Images/9de881d5e6fd764d23db48191d7b4962.png)

我需要用它的位置（x 和 y 坐标）来识别以下对象。

![在此处输入图像描述](../Images/fe213bf877b3638598b1c19939c50930.png)

请有人用简单的代码示例解释来识别这些对象，我还需要识别这些对象的连接线（如下图所示）。

![在此处输入图像描述](../Images/a6164de82e32c80d6cf4883591c4847f.png)

请使用简单的代码示例来解释这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:01:53.693

解决方案的概念与上一个问题相同 - 使用扩张和腐蚀：

```
Mat src = imread("input.jpg"), tmp;

cvtColor(src, tmp, CV_BGR2GRAY);
threshold(tmp, tmp, 200, 255, THRESH_OTSU);

Mat element = getStructuringElement(MORPH_RECT, Size(3, 3), Point(1, 1));
dilate(tmp, tmp, element);
erode(tmp, tmp, element); 
```

结果：

![在此处输入图像描述](../Images/821a9f544cda45226d74c0308e295245.png)

# javascript - Raphael JS + 点击处理程序

> ID：12088178
> 
> 赞同：1
> 
> 时间：2012-08-23T08:59:39.977
> 
> 标签：javascript, canvas, svg, click, raphael

当我点击立方体的特定面时，我试图让一个“3d”立方体来听我的点击，但我一直收到错误消息。

代码：http: [//jsfiddle.net/qa3P7/1/](http://jsfiddle.net/qa3P7/1/)

在 winload 函数中，我添加了以下代码：

```
cube.object[0].click(function(){
    alert('test');
}); 
```

但它返回：`Object #<Object> has no method 'click'`

当我这样做时：`cube.object[0]`，我确实得到了立方体的正确“面”：

```
cube.object[0]
Object
bl: Array[3]
br: Array[3]
c: "url("img/cube/bianco.jpg")"
clip: 123.18126918267271
id: "face_2"
normal: Array[2]
object: z
shadow: null
tl: Array[3]
tr: Array[3]
__proto__: Object 
```

我对这一切都很陌生，经过数小时的尝试和研究，我被困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:28:10.717

这是有问题的，因为立方体的每个可见面都在每一帧上重新绘制（请参阅`drawFrame`），并且`.click()`是 Raphael 路径的一种方法，在这种情况下称为`face.object`. 您可以尝试在每次重绘面部时重新分配点击处理程序，但我认为更好的方法是捕捉画布级别上的点击并手动识别光标下的面部。

# android - android 尝试使用画布在其上绘制文本时出现错误

> ID：12088180
> 
> 赞同：0
> 
> 时间：2012-08-23T08:59:41.460
> 
> 标签：android, text-rendering

我尝试在图像上绘制文本，但它不起作用。这是我的代码：

```
ImageView image = (ImageView) findViewById(R.id.imageView1);
    Uri uri = Uri.parse("android.resource://mms.first/"+R.drawable.girl);
    Bitmap bitmap;
    try {
         ContentResolver cr = getContentResolver();
        bitmap = android.provider.MediaStore.Images.Media.getBitmap(cr, uri);

        //drawTextImage(bitmap);
         Canvas c = new Canvas(bitmap);
            Paint paint = new Paint();
            paint.setColor(Color.BLUE);
            paint.setStyle(Paint.Style.FILL);
            paint.setAntiAlias(true);
            paint.setTextSize(20);
            c.drawText("Golden Stag", 30, 200, paint);
        image.setImageBitmap(bitmap); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:29:28.057

这是代码：

```
 Bitmap bitmap;
  Resources resx = getResources();
  bitmap = BitmapFactory.decodeResource(resx, R.drawable.girl);

  Canvas canvas = new Canvas(bitmap.copy(Bitmap.Config.ARGB_8888, true)); 
```

# objective-c - 静态库和-weak-lSystem

> ID：12088183
> 
> 赞同：5
> 
> 时间：2012-08-23T09:00:05.220
> 
> 标签：objective-c, linker-errors

我构建了一个链接到其他框架的静态库，尤其是 CoreLocation。我想使用 iOS 5 提供的功能但要兼容 4.3。

当我在 4.3 的 iOS 设备上启动它并出现以下错误时，我的应用程序在启动时崩溃：

```
Date/Time:       2012-08-22 16:44:53.900 +0200
OS Version:      iPhone OS 4.3.3 (8J3)
Report Version:  104

Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x00000001, 0xe7ffdefe
Crashed Thread:  0

Dyld Error Message:
  Symbol not found: _UIKeyboardDidChangeFrameNotification 
```

这篇文章中描述了我遇到的问题：[iOS 4 app 在 iOS 3.1.3 上启动时崩溃：找不到符号：__NSConcreteStackBlock](https://stackoverflow.com/questions/3313786/ios-4-app-crashes-at-startup-on-ios-3-1-3-symbol-not-found-nsconcretestackbl)。

但是在构建静态库时如何处理呢？设置 -weak-lSystem 标志时无法编译。这是一个跟踪：

```
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: -dynamic not specified, -all_load invalid
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: -dynamic not specified the following flags are invalid: -ObjC 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: can't locate file for: -weak-lSystem
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: file: -weak-lSystem is not an object file (not allowed in a library)
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: file: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/usr/lib/libxml2.2.dylib is a dynamic library, not added to the static library
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: file: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/usr/lib/libxml2.2.dylib is a dynamic library, not added to the static library
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: file: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/usr/lib/libz.dylib is a dynamic library, not added to the static library
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: file: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/usr/lib/libz.dylib is a dynamic library, not added to the static library
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool failed with exit code 1 
```

**解决**

请参阅下面接受的答案，不要忘记在 Xcode 中将不同版本中使用的库标记为可选。例如：我为 iOS 5 使用 UIKit 新通知，但我的部署目标是 4.3，所以我需要将此库标记为可选以使事情正常工作。CoreLocation CLGeocoder 新的 iOS 5 类也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:42:06.850

问题是 UIKeyboardDidChangeFrameNotification 在 iOS 4 上不可用，因此动态加载程序 (Dyld) 失败。

从静态库开发人员的角度来看，您不必做任何事情。-weak-lSystem 标志应该在将静态库用于应用程序的 Xcode 项目中设置（请参阅问题中提到的帖子） - 而不是在静态库的项目中。

# c# - 如何在连接的 2 程序中创建服务器数据库（共享数据库）？

> ID：12088184
> 
> 赞同：0
> 
> 时间：2012-08-23T09:00:08.757
> 
> 标签：c#, sql, database, database-connection

我有一个 C# 程序，应该安装在不同的连接 PC 和 Microsoft SQL Server 数据库上。这些程序适用于通用数据库并具有查询。
那么我应该如何编程呢？

我应该安装 SQL Server 吗？或者我必须让其中一个程序监听器来响应查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:10:24.640

是的。如果您需要共享数据库，则需要将其安装在始终可用的地方。

它不必是 SQL Server，也不必是任何类型的数据库服务器——它可以是文件服务器上的共享 Access 文件。

SQL Server 有许多版本，如果您担心的话，其中一些是免费的。或者，第三方可以为您托管您的 SQL 服务器数据库

# c++ - “直到（-- p ---> second < 0）”如何循环直到找到非正值

> ID：12088187
> 
> 赞同：0
> 
> 时间：2012-08-23T09:00:19.057
> 
> 标签：c++

此代码如何找到非正值？

```
#include <map>
#include <cstdio>

#define until(cond) while(!(cond))

using namespace std;

int main() {
  // initialization
  map<int,int> second;
  int i=10;
  int testme[10]={4,3,1,-3,7,-10,33,8,4,14};
  while (i --> 0) second[i]=testme[i];

  // find the first non-positive value in second
  map<int,int>::reverse_iterator p = --second.rend();
  do {
    printf("Is %d non-positive?\n",second[++i]);
  } until(-- p --->   second < 0);
    // "second < 0" to check if the value in second is non-positive

  printf("Yes it is!\n");
} 
```

输出是：

```
Is 4 non-positive?
Is 3 non-positive?
Is 1 non-positive?
Is -3 non-positive?
Yes it is! 
```

那么“second < 0”字符串如何检查非正值呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T09:08:56.697

解析的一些提示`--p--->second`。它被评估为`--((p--)->second)`。（感谢@AProgrammer 修复了我的明显错误！）

*   `p`是指针或迭代器。

*   `p--`递减`p`，但将其*先前*的值作为右值返回

*   `(p--)->second`访问该值的成员`second`。

*   `--((p--)->second)`递减该值（即映射值）并返回新的递减值

*   将新值与`0`

笔记：

*   `p--`负责迭代容器。请注意，循环不会对`p`.

*   外部`--`使`0`计数为负数。作为副作用，循环会递减映射中的每个值。

*   第二种用法`i`有点多余。您可以`p->second`在循环中而不是在循环中编写`second[++i]`，因为您已经有一个迭代器。实际上，`second[++i]`需要进行整棵树搜索。

代码等价于：

```
do { /* ... */
    auto q = p;
    --p;
    --(q->second);
} until (q->second < 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:29:27.173

实际上它检查值是否不是正数，而不是负数： http: [//liveworkspace.org/code/587a9554a2b0b8f830179518133c2274](http://liveworkspace.org/code/587a9554a2b0b8f830179518133c2274)

正如克雷克所说

```
do { /*...*/ }
until(-- p --->   second < 0); 
```

相当于：

```
do { /*...*/ }
until(--((p--)->second) < 0); 
```

这相当于：

```
do { /*...*/ } 
while(((p--)->second)-- > 0); 
```

所以如果价值是`0`它也会打破。

# java - Java 控制台键盘 - 自动接受输入

> ID：12088188
> 
> 赞同：1
> 
> 时间：2012-08-23T09:00:21.850
> 
> 标签：java, input, keyboard

我正在创建一个简单的控制台应用程序，我可以在其中使用键盘箭头键作为输入，就像典型的玩具遥控器一样。当我按下向上箭头时，控制台将打印输出文本“UP”，或者如果我按下箭头，它将打印“向下”。

我只想按一次箭头键，即我不需要在之后按 enter 来接受我的输入。我希望在按下箭头键时自动接受输入。

我已经尝试了一些代码，但这仍然没有发生，我仍然需要按 enter 接受我的输入。如果您知道如何尽可能简单地实现这一目标，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:09:54.903

此示例代码将帮助您获取左箭头键事件。你可以参考这个，

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;

import javax.swing.*;

public class Test2 extends JPanel {
   private static final int PREF_W = 400;
   private static final int PREF_H = PREF_W;
   private static final int TIMER_DELAY = 50;
   private Timer leftKeyTimer = new Timer(TIMER_DELAY , new TimerListener());

   public Test2() {
      int condition = JComponent.WHEN_IN_FOCUSED_WINDOW;
      InputMap inputMap = getInputMap(condition );
      ActionMap actionMap = getActionMap();

      String leftDownKey = "Left Down";
      String leftUpKey = "Left Up";
      KeyStroke leftDown = KeyStroke.getKeyStroke(KeyEvent.VK_LEFT , 0, false);
      KeyStroke leftUp = KeyStroke.getKeyStroke(KeyEvent.VK_LEFT , 0, true);
      inputMap.put(leftDown, leftDownKey);
      inputMap.put(leftUp, leftUpKey);

      actionMap.put(leftDownKey, new LeftKeyAction(false));
      actionMap.put(leftUpKey, new LeftKeyAction(true));
      leftKeyTimer.setActionCommand("Left Key");
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   private class LeftKeyAction extends AbstractAction {
      private boolean onKeyRelease;

      public LeftKeyAction(boolean onKeyRelease) {
         this.onKeyRelease = onKeyRelease;
      }

      @Override
      public void actionPerformed(ActionEvent e) {
         if (onKeyRelease) {
            if (leftKeyTimer != null && leftKeyTimer.isRunning()) {
               leftKeyTimer.stop();
            }
         } else {
            if (leftKeyTimer != null && !leftKeyTimer.isRunning()) {
               leftKeyTimer.start();
            }

         }
      }
   }

   private class TimerListener implements ActionListener {
      public void actionPerformed(ActionEvent actEvt) {
         System.out.println(actEvt.getActionCommand());
      }
   }

   private static void createAndShowGui() {
      Test2 mainPanel = new Test2();

      JFrame frame = new JFrame("Test2");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:37:40.973

这实际上是一个令人惊讶的复杂问题。如果你想要一个真正的控制台应用程序（没有 GUI 元素），你必须牺牲可移植性。

大多数控制台默认是行缓冲的，所以在按下回车之前Java不会得到任何输入。大多数可以切换到字符模式，但是没有独立于操作系统的方法来做到这一点。有关更多信息，请参阅[http://www.darkcoding.net/software/non-blocking-console-io-is-not-possible/](http://www.darkcoding.net/software/non-blocking-console-io-is-not-possible/)

# blackberry - 在 Blackberry OS 5.0 中，是否有任何 UI Handler 来更新屏幕的 UI

> ID：12088189
> 
> 赞同：-1
> 
> 时间：2012-08-23T09:00:26.890
> 
> 标签：blackberry

我正在使用 Blackberry OS 5.0 开发应用程序。是否有任何 UI 处理程序（如在 android 中）更新当前屏幕的 UI。我在我的应用程序中使用线程，当线程同时运行时，我需要更新我的屏幕 UI。现在，在我的线程完成后，我正在弹出当前屏幕并再次推送新屏幕。然后只有我的 UI 得到更新。线程运行时是否有任何替代方法来更新 UI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:27:59.493

是的，有一个更好的方法：在 UI 线程上执行更新。例子：

```
Application.getUiApplication().invokeLater(new Runnable(){

    public void run(){
        editField.setText("My updated text");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:42:29.067

您需要使 UI 无效并更新 UI，您还可以删除所有 Ui 并针对特定条件重新加载它。像 getmainManger.deleteAll();

此方法删除所有 UI，您可以加载新 UI 并更新所有 UI。

# c++ - 使用 boost::spirit 解析字符串

> ID：12088192
> 
> 赞同：2
> 
> 时间：2012-08-23T09:00:31.257
> 
> 标签：c++, boost-spirit

我想解析字符串

```
 std::string entry = "127.0.0.1 - [16/Aug/2012:01:50:02 +0000] \"GET /check.htm HTTP/1.1\" 200 17 \"AgentName/0.1 libwww-perl/5.833\"" 
```

带有以下内容：

```
 ip_rule %= lexeme[(+char_("0-9."))[ref(ip) = _1]];
    timestamp_rule %= lexeme[('[' >> +(char_ - ']') >> ']')[ref(timestamp) = _1]];
    user_rule %= lexeme[(+char_)[ref(user) = _1]];
    request_rule %= lexeme[('"' >> +(char_ - '"') >> '"')[ref(req) = _1]];
    referer_rule %= lexeme[('"' >> +(char_ - '"') >> '"')[ref(referer) = _1]];

    bool r = phrase_parse(first, last,
    ip_rule >> user_rule >> timestamp_rule >> request_rule >> uint_[ref(status) = _1]
    >> uint_[ref(transferred_bytes) = _1] >> referer_rule, space); 
```

但它不匹配。如果我从字符串中删除“-”，当然规则“user_rule”会匹配。您能否建议如何将字符串与“-”匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:03:08.823

你的`user_rule`“吃”了剩下的文字。像这样定义它：`+~qi::char_("["))`，这样它就会停在`'['`字符处。以下代码按预期工作：

```
#include <boost/spirit/include/qi.hpp> 
using namespace boost::spirit::qi;

int main()
{
    std::string ip, user, timestamp, req, referer;
    unsigned status, transferred_bytes;
    std::string entry = "127.0.0.1 - [16/Aug/2012:01:50:02 +0000] \"GET /check.htm HTTP/1.1\" 200 17 \"AgentName/0.1 libwww-perl/5.833\"";
    bool r = phrase_parse(entry.begin(), entry.end(), 
    lexeme[+char_("0-9.")] >> 
        +~char_("[") >> 
        lexeme[('[' >> +~char_("]") >> ']')] >> 
        lexeme[('"' >> +~char_("\"") >> '"')] >> 
        uint_ >> 
        uint_ >> 
        lexeme[('"' >> +~char_("\"") >> '"')], space, ip, user, timestamp, req, status, transferred_bytes, referer); 

} 
```

# c# - 使用 .Net 从 Oracle DB 读取数据比使用 Java 快 10 倍

> ID：12088195
> 
> 赞同：8
> 
> 时间：2012-08-23T09:00:33.683
> 
> 标签：c#, java, .net, oracle

我正在使用 .Net 和 Java 从 Oracle DB 中读取 100 万条记录。在 .Net 中，我在 Java ojdbc6 瘦客户端中使用 ODP.Net。在 .Net 中读取数据大约需要 10 秒，而在 Java 中大约需要 2 分钟。为什么会有如此巨大的差异？

这是一个代码：

。网：

```
 try
        {
            DateTime dt1 = DateTime.Now;

            OracleConnection con = new OracleConnection();
            con.ConnectionString = "Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=myHost)(PORT=myPort)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=myService)));User Id=myId;Password=myPass;";

            con.Open();
            string cmdQuery = "SELECT * FROM DROPME";

            OracleCommand cmd = new OracleCommand(cmdQuery);
            cmd.Connection = con;
            cmd.CommandType = CommandType.Text;

            int i = 0;
            OracleDataReader reader = cmd.ExecuteReader();
            while (reader.Read())
            {
                Object o1 = reader.GetValue(0);
                Object o2 = reader.GetValue(1);
                Object o3 = reader.GetValue(2);
                Object o4 = reader.GetValue(3);
                Object o5 = reader.GetValue(4);
                Object o6 = reader.GetValue(5);
                Object o7 = reader.GetValue(6);                    
                i++;
            }

            DateTime dt2 = DateTime.Now;

            double elapsed = (dt2 - dt1).TotalSeconds;
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        } 
```

爪哇：

```
 try
    {
        long t0 = System.currentTimeMillis();
        oracleDataSource = new OracleDataSource();
        oracleDataSource.setURL("jdbc:oracle:thin:myId/myPass@myHost:myPort:myService");
        Connection connection = oracleDataSource.getConnection();
        PreparedStatement statement = connection.prepareStatement("SELECT * FROM DROPME");
        ResultSet result = statement.executeQuery();
        int i = 0;
        while (result.next())
        {
            result.getObject(1);
            result.getObject(2);
            result.getObject(3);
            result.getObject(4);
            result.getObject(5);
            result.getObject(6);
            result.getObject(7);
            i++;
        }
        long t1 = System.currentTimeMillis();
        long elapsed = (t1 - t0)/1000;
        int t = 0;
    }
    catch (Exception ex)
    {
        ex.printStackTrace();
    } 
```

编辑： setFetchSize() 完成了这项工作，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T09:11:15.860

默认情况下，在 Java 中，ResultSet 被完全检索并存储在内存中。这对于具有大型 ResultSet 的查询不利。要使用流式传输结果，您必须使用：

```
stmt = conn.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY, java.sql.ResultSet.CONCUR_READ_ONLY);
stmt.setFetchSize(Integer.MIN_VALUE); 
```

我没有比较所花费的时间，但我想这会快得多。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-23T09:46:55.240

根据我的经验，Oracle JDBC 驱动程序在大量传输方面的开箱即用配置很差。默认情况下，它一次只在网络上传输 10 条记录。因此，如果您有 1,000,000 条记录，驱动程序将产生 100,000 次网络访问。

您可以`ResultSet`使用以下代码告诉一次要获取多少条记录：

```
result.setFetchSize(1000); 
```

随意尝试不同的尺寸。在我处理过的至少一个应用程序中，它显着减少了处理时间（从几分钟到几秒钟）。

# scala - 这是在 Lift 中实现 GMail 小部件的正确方法吗？

> ID：12088196
> 
> 赞同：2
> 
> 时间：2012-08-23T09:00:34.700
> 
> 标签：scala, comet, lift

我正在尝试实现一个类似于 iGoogle 或 Netvibse 上的 GMail 小部件，以练习如何在 Lift web 框架中使用 Comet。

目前我所拥有的是以下代码，它很短而且效果很好。

但我不确定这是实现它的最佳方式。因为从 GMail 中提取邮件是一项耗时的工作，并且下面的代码只有一个 GMailListener，当从 GMail 中获取邮件时会阻塞。

我想这意味着如果我的网站上有两个用户，例如 UserA 和 UserB。

虽然下面的代码是线程安全的，但是如果他们都在使用这个 Comet 的页面上，UserB 还是要等到 UserA 的邮件被处理后才能得到自己的结果，对吧？

避免阻塞的最佳方法是什么？

```
import net.liftweb.actor.LiftActor
import net.liftweb.util.Schedule
import net.liftweb.util.Helpers._
import net.liftweb.http.CometActor
import net.liftweb.http.js.JsCmds.SetHtml
import net.liftweb.http.js.jquery.JqJsCmds._

case class FetchGMail(userID: Int, sender: CometActor)
case class NewStuffs(mails: List[Stuff])

object GMailListener extends LiftActor
{
    def getMails(userID: Int) = {
        // Get Mails from GMail
    }

    def messageHandler = {
        case FetchGMail(userID, sender) => 
            println("Get FetchMail request")
            sender ! NewStuffs(getMails(userID))
            Schedule.schedule(this, FetchGMail(userID, sender), 5 minutes)
    }
}

class Inbox extends CometActor with JSImplicit
{
    def render = <div>Empty Inbox</div>

    GMailListener ! FetchGMail(1, this)

    override def lowPriority = {
        case NewStuffs(mails) => 
            println("get new mails")
            partialUpdate(AppendHtml("mails", <div>{mails}</div>))
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T14:54:57.070

请记住，actor 一次只能处理一条消息，并且只会在处理消息时消耗资源。你的 GmailListener 是一个单例，所以它现在可能是一个瓶颈，但你没有理由不能为每个用户创建一个 GmailListener 的实例。每个实例只会在您的日程安排调用指示时唤醒并利用一个线程进行 Gmail 查找。只需确保在收件箱关闭时关闭相应的 GmailListener。看看`net.liftweb.http.CometListener`我认为应该有帮助的。

# eclipse - Eclipse 和 Play!2 插件的问题

> ID：12088206
> 
> 赞同：0
> 
> 时间：2012-08-23T09:01:08.987
> 
> 标签：eclipse, playframework

我正在尝试在我的 Play 项目中使用 Mailer 插件，但遇到了一些麻烦。该项目编译良好，我可以在本地主机上访问该网站，但 Eclipse 显示错误：

```
def sendEmail = Action {
    import play.api.Play.current
    import com.typesafe.plugin._
    val mail = use[MailerPlugin].email
    mail.setSubject("mailer")
    mail.addRecipient("Peter Hausel Junior <noreply@email.com>","example@foo.com")
    mail.addFrom("Peter Hausel <noreply@email.com>")
    //sends html
    mail.sendHtml("<html>html</html>" )
    //sends text/text
    mail.send( "text" )
    //sends both text and html
    mail.send( "text", "<html>html</html>")

     Ok(views.html.indexLoggedout())
  } 
```

错误是指第 2 行：plugin is not a member of com.typesafe

这是 Build.scala

```
val appDependencies = Seq(
  "com.typesafe" %% "play-plugins-mailer" % "2.0.4"
) 
```

和 play.plugins

```
1500:com.typesafe.plugin.CommonsMailerPlugin 
```

正如我所说，项目在使用时编译正常`play compile`，只是 Eclipse 显示错误。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:38:43.420

这是我发现的解决方案。做：

```
play clean
play compile
play eclipsify 
```

然后等待 Eclipse 重建工作区。这应该可以解决任何插件依赖问题。

# android - 即使在 deleteLocalRef 之后 jni 表也会溢出

> ID：12088207
> 
> 赞同：6
> 
> 时间：2012-08-23T09:01:11.383
> 
> 标签：android, reference, java-native-interface, overflow

当我运行代码时，我收到一个错误“添加到 JNI 本地引用表失败有 512 个条目”

这是我的代码：

```
jstring pJNIData = pJNIEnv->NewStringUTF ( variables[0].GetStringValue() );

pJNIEnv->CallStaticVoidMethod ( pJNIActivityClass, pJNIMethodIDStartTime, pJNIData ) ;

pJNIEnv->DeleteLocalRef(pJNIData); 
```

我已经阅读了几个建议，但没有一个有效！尽管有`DeleteLocalRef`，但它无法正常工作。该函数用于一个探查器，它从字面上调用所有函数......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:01:04.530

当一个名为 Java 代码的 JNI 方法（在我的例子中，该方法不是静态的）时，我已经看到了这一点。据我了解，当从 JNI 调用 Java 方法时，未使用的本地引用***不会***自动删除（我的意思是，直到顶级 JNI 函数返回）。

IIRC 要么已经在日志中有关于内存对象的信息，要么我可以添加一些日志记录；从这些信息中，我发现了我之前没有提到的垃圾项目。它们是两个数组和一个类，在随后的调用中创建，但没有被垃圾回收。

```
// in a function that calls a Java method from JNI
jbyteArray srcArray = env->NewByteArray(len);
jclass cls = env->FindClass("com/something/MyClass");
jmethodID mid = env->GetMethodID(cls, "mymethod", "([BI)[B");
jbyteArray resArray = (jbyteArray)env->CallObjectMethod(obj, mid, srcArray, XXXX);

...
env->DeleteLocalRef(cls);
env->DeleteLocalRef(resArray);
env->DeleteLocalRef(srcArray);
// no need to do anything with mid 
```

请注意，尽管这三个本地参考的获得方式不同，但它们都在附近徘徊。

有用的链接： http: [//www.netmite.com/android/mydroid/dalvik/docs/jni-tips.html#local_vs_global_references](http://www.netmite.com/android/mydroid/dalvik/docs/jni-tips.html#local_vs_global_references) （或找到 Dalvik VM 文档 dalvik/docs/jni-tips.html 并找到“本地与全球参考”）

*JNI 返回的每个对象都是“本地引用”。这意味着它在当前线程中的当前本机方法的持续时间内有效。即使对象本身在本机方法返回后继续存在，引用也是无效的。这适用于 jobject 的所有子类，包括 jclass 和 jarray。[...] 注意：方法和字段 ID 只是 32 位标识符，不是对象引用，不应传递给 NewGlobalRef。GetStringUTFChars 和 GetByteArrayElements 等函数返回的原始数据指针也不是对象。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T22:29:41.520

I thought I would chip in just in case anyone else runs into this issue. This is a weird case that kept me confused for hours!

Ok so I have an NDK app and the Java code being called is inside an apk that is loaded at runtime. I have no idea if the runtime loading effects this in any way but I thought I should mention it.

Now in a c++ method I use find class and getmethodid to get the constuctor to a HashMap and call it to get a new HashMap instance. I then populate the HashMap from the c++ side using jni calls. So far so good. I then pass the HashMap to java code and, again, all is working as expected. Once the java code has returned I call DeleteLocalRef on the HashMap. No errors are thrown but the reference **is not deleted.**

This only came up when I finally ran over 512 local references (from multiple calls to this function) and the error dump showed that the last 10 items in the localref store were nearly all HashMaps. I would understand that the GC would not collect these references at the end of the method as I am make a multithreaded ndk app. However the DeleteLocalRef should have worked.

**The Fix:** In the end I found that creating the HashMap from a jni call to a java method I wrote was fine, and the reference was then free'able. It seems crazy to have a java function that literally just returns a new HashMap but it worked so for now I am living with it :)

# visual-studio-2010 - 引用库项目的 LIBPATH 选项

> ID：12088210
> 
> 赞同：1
> 
> 时间：2012-08-23T09:01:29.713
> 
> 标签：visual-studio-2010

我有一个依赖于外部库的静态库项目。我已将外部库的文件夹添加到静态库项目的“附加库目录”设置中。然后，当我创建一个项目并添加对此静态库项目的引用时，它仍然无法在链接时找到外部 lib 文件。只有当我将外部库的文件夹添加到应用程序项目的“附加库目录”设置中时，它才会找到库文件。

有没有办法自动向 /LIBPATH 添加一些东西，以便每个引用静态库项目的应用程序项目自动找到外部 lib 文件？我真的不想在一般的“图书馆目录”文件夹中指定文件夹。我也不能使用 '#pragma comment(linker, "/LIBPATH...")' 指令。

# linux - wget：如果它指向位置 X，则不遵循重定向，否则执行

> ID：12088213
> 
> 赞同：3
> 
> 时间：2012-08-23T09:01:38.947
> 
> 标签：linux, bash, http, redirect, wget

[正如我在这里](https://stackoverflow.com/questions/2662943/wget-dont-follow-redirects)读到的，重定向可以很容易地被`--max-redirect 0`. 但是，如果有两种重定向：好的一种和坏的一种。

在我的情况下，好的重定向是：

[http://someaddres.com/888.html](http://someaddres.com/888.html) -> [http://someaddres.com/some-string-in-url-describing-page.html](http://someaddres.com/some-string-in-url-describing-page.html)

错误的重定向是：

[http://someaddres.com/555.html](http://someaddres.com/555.html) -> [http://someaddres.com/](http://someaddres.com/)

我能做些什么来只放松良好的重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:05:15.703

我能想到的唯一方法是按照您所说的那样关闭重定向，然后解析响应（我建议使用`sed`or `grep`，但我确信还有其他选项）寻找重定向请求. 您可能需要参数`--server-response`来获取标头，具体取决于用于重定向的方法。如果找到了，请对重定向目标执行新的 wget（除非它是您不想重定向到的目标）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:25:32.243

正如@Thor84no 所说，一种解决方案可以解析响应。这是我的：

```
REDIRECTED_TO=`wget --max-redirect 0 $ADDRESS 2>&1 | grep "Location" | sed 's|.*\(http://.*/.*\) .*|\1|'`

if [ "$REDIRECTED_TO" != "$BAD_REDIRECTION" ]; then wget $REDIRECTED_TO; fi 
```

# c++ - 为什么 C++ 在迭代容器时会调用复制构造函数？

> ID：12088215
> 
> 赞同：0
> 
> 时间：2012-08-23T09:01:43.753
> 
> 标签：c++, copy-constructor

```
void ParticleGeneratorController::generate() {
    for( unsigned i = 0; i < generators.size(); i++) {
        ParticleGenerator generator = *generators[i];
        generator.update();
    }
} 
```

似乎调用了复制构造函数什么的，但我没有定义一个。我只有一个显式的默认构造函数。

[https://github.com/ChrisLundquist/Waveform/blob/master/src/models/particle_generator.h](https://github.com/ChrisLundquist/Waveform/blob/master/src/models/particle_generator.h)

鉴于我上面的代码，测试失败。[https://github.com/ChrisLundquist/Waveform/blob/master/spec/controllers/particle_generator_controller_spec.cpp#L21](https://github.com/ChrisLundquist/Waveform/blob/master/spec/controllers/particle_generator_controller_spec.cpp#L21)

当写为

```
void ParticleGeneratorController::generate() {
    for( unsigned i = 0; i < generators.size(); i++) {
        generators[i]->update();
    }
} 
```

测试通过。

为什么在第一个实现中调用了复制构造函数？它是如何由编译器生成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T09:03:32.770

此行导致复制：

```
ParticleGenerator generator = *generators[i]; 
```

如果没有明确指定复制构造函数（或赋值运算符），编译器会自动生成一个。如果您希望防止复制对象，您可以声明而不是定义复制构造函数和赋值运算符`private`：

```
ParticleGenerator
{
public:

private:
    ParticleGenerator(const ParticleGenerator&);
    ParticleGenerator& operator=(const ParticleGenerator&);
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T09:03:33.190

`ParticleGenerator`每次执行此操作时，您都在创建一个新的：

```
ParticleGenerator generator = *generators[i]; 
```

这是一个复制初始化，并且，鉴于您没有显式提供复制构造函数，因此使用编译器合成的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:04:40.757

以下行进行复制：

```
ParticleGenerator generator = *generators[i]; 
```

如果您没有定义复制构造函数，编译器会自动为您完成。为了禁用它，您可以将复制构造函数声明为私有而不实现它。通常这也应该使用复制赋值运算符来完成。

如果您想避免在代码中复制，您可以简单地创建一个指针。写

```
ParticleGenerator * generator = generators[i];
generator->update(); 
```

而是进入你的循环。或者

```
generators[i]->update(); 
```

如果你想成为真正的短手。

# android - 检查 KSOAP2 网络服务是否启动并运行

> ID：12088218
> 
> 赞同：2
> 
> 时间：2012-08-23T09:01:50.900
> 
> 标签：android, ksoap2, android-ksoap2

```
 private String METHOD_NAME = "schedule";
    private String NAMESPACE = "http://calculate.backend.web.org";
    private String SOAP_ACTION = NAMESPACE + METHOD_NAME; 
    private static final String URL = "http://192.168.0.4:8080/AndroidBackEnd/services/Calculate?wsdl";

SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            request.addProperty("username",username);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.call(SOAP_ACTION,envelope);
            Object result = envelope.getResponse(); 
```

如何验证 WEB-SERVICE 是否已从客户端启动并运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:58:17.077

如果您的 Web 服务已关闭，那么 Android`SocketTimeoutException`在无法连接到它时会抛出一个错误。

您可以通过手动设置连接的超时持续时间

`HttpTransportSE androidHttpTransport = new HttpTransportSE(URL, timeoutDuration);`

或者让连接在其默认超时持续时间后超时。

因此，您可以在代码中捕获该异常并了解 Web 服务已关闭。

# .net - 在 xaml 中实例化通用页面

> ID：12088220
> 
> 赞同：2
> 
> 时间：2012-08-23T09:01:52.583
> 
> 标签：.net, silverlight, windows-phone-7, xaml

我是Windows Phone开发的新手，如果我的问题很愚蠢，请原谅。

我开发了一个简单的泛型类，旨在成为我的 WP7 应用程序中所有页面的基类。它是这样的：

```
namespace Subway.Rails
{
    public class Screen<TModel> : PhoneApplicationPage where TModel: class, new()
    {
        private static readonly DependencyProperty ModelProperty = DependencyProperty.Register("Model", typeof(TModel),
                                                                                               typeof (Screen<TModel>),
                                                                                               new PropertyMetadata(new TModel()));

        public TModel Model
        {
            get { return GetValue(ModelProperty) as TModel; }
            set { SetValue(ModelProperty, value); }
        }
    }
} 
```

但是，当我尝试使用`x:TypeArguments`指令在 XAML 中声明页面时

```
<rails:Screen x:TypeArguments="models:NotesStorage" xmlns:rails="clr-namespace:Subway.Rails;assembly=Subway.Rails" ... 
```

并将 *.xaml.cs 文件中的基本类型加倍

```
public partial class HomeView : Screen<NotesStorage> 
```

我收到运行时错误

```
Error   7   Using the generic type 'Subway.Rails.Screen<TModel>' requires 1 type arguments  D:\development\labs\mobilelab\Subway.Notes\Subway.Notes\obj\Debug\Views\HomeView.g.cs   37  50  Subway.Notes 
```

在生成的文件中。

有没有办法在 XAML 中实例化通用页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:57:09.743

虽然我找不到任何正式的说明（总是很难找到关于不受支持的功能的文档）：当[Silverlight 不支持](https://stackoverflow.com/questions/4270351/silverlight-4-support-for-xtypearguments)它时，它在 Windows Phone 上不可用。

您看到的错误消息似乎证实了这一点。

# django - 在 if 条件内调用块：django 模板

> ID：12088222
> 
> 赞同：32
> 
> 时间：2012-08-23T09:02:11.787
> 
> 标签：django, django-templates

我一直试图在 django 模板中的 if 条件内调用一个块。

我有一个`base template`. 我有许多其他扩展基本模板的模板。我在基本模板中定义了一个块：

```
{% block test_block %}Test{% endblock %} 
```

然后我想在其他模板中的某个条件下覆盖这个块。如果条件失败，则不应覆盖该块。这是我写的东西：

```
{% if test_value %}{% block test_block %}Development{% endblock %}{% endif %} 
```

这实际上（或可能实际上）忽略了 if 条件。

**我最终做了什么：**

```
{% block test_block %}{% if test_value %}Development{% else %}{{ block.super }}{% endif %}{% endblock %} 
```

我不得不在任何需要的地方做这样的事情。

这是最好的方法吗？这是唯一的方法吗？为什么我不能尝试我的第一种方法？还是我这边有什么错误？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-03-22T23:16:53.507

您没有犯错 - 模板块被包括在内，无论它们周围有任何条件。[您可以从Django 源代码](https://github.com/django/django/blob/dcb8f00d06eec99072b78d54215c9a3dc04acb99/django/template/loader_tags.py#L88)中的`ExtendsNode`类的这一行中看到这一点：`django/template/loader_tags.py`

```
self.blocks = {n.name: n for n in nodelist.get_nodes_by_type(BlockNode)]} 
```

当s`{% extends %}`被渲染时，它直接从模板中获取所有块节点，并在父节点遇到这些`block`s 时将它们存储起来以进行渲染。不考虑孩子中的这些块是否在条件内。

# sharepoint - 功能停用不起作用。永远加载而不执行停用

> ID：12088223
> 
> 赞同：0
> 
> 时间：2012-08-23T09:02:17.387
> 
> 标签：sharepoint, sharepoint-2010

尝试通过 GUI 停用自定义功能时遇到问题。当我按下“停用”按钮时，正如预期的那样，我被重定向到询问我是否确定要停用的警告页面。确认后，页面开始加载。有问题的功能通常应该非常快地激活，但是在这种情况下，页面加载超过 5 分钟而没有任何事情发生。在断定页面似乎陷入了永恒的加载周期后，我不得不刷新页面以查看是否有任何更改，但没有，该功能仍然处于活动状态。

有任何想法吗？

详细信息：我正在工作的站点是以前存在的 office365 站点。我刚刚对我的自定义解决方案进行了一些更改（修改一个功能并添加另一个）停用旧解决方案并上传了新解决方案，所以我正在尝试停用并重新激活我修改过的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:39:22.250

这取决于停用期间发生的情况 - 如果停用必须执行大量更新（例如从许多子站点的列表中删除列），5 分钟可能不会很长。我确实曾经有一个功能停用需要 45 分钟 (?) 才能运行。

我猜另一种可能性是您的 C# 代码包含无限循环？虽然这似乎有点远。

否则，Office 365 很难调试；我建议通过 O365 门户向 Microsoft 拨打支持电话，看看他们是否可以看到任何日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:22:50.340

删除该功能时，您是否尝试删除 CT 之类的项目或任何依赖于其他事物的项目？

我已经看到在我们的测试环境中发生这种情况时功能会出现故障，并确保在部署之前解决这个问题。

在 codeplex 的某处有一个功能检查器，但我不确定这是否会连接到 office365 站点。它被称为 FeatureAdmin.exe 这可能会帮助您删除该功能并清除该功能中的剩余内容，但它不会删除您的功能正在努力删除的任何内容（如果它当然是！）

部署原始功能时，您是否测试过它可以完全停用？

# javascript - 网页设计中的广泛图像

> ID：12088225
> 
> 赞同：1
> 
> 时间：2012-08-23T09:02:29.183
> 
> 标签：javascript, css, web

我正在编写一个网站并尝试使用类似 www.airbnb.com 的内容：我的意思是顶部有一个静态栏（这部分没问题），下面是一个带有大中心按钮的大图像。

我怎样才能设法让这个大图像在每个屏幕分辨率上正常显示：目前，在 1920*1080 像素上，我的图像在大按钮居中时非常完美。但是，如果我改变我的分辨率，图像将被裁剪或调整大小......

你知道我该怎么做（css或javascript）吗？

太感谢了 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:28:29.160

您可以使用 CSS 媒体查询根据分辨率加载物理上不同大小的图像，例如

你原来的桌面背景：

```
body {
    background:url(images/bg1.jpg) no-repeat 0 0;
} 
```

对于最大分辨率为 800 像素的屏幕：

```
@media (max-width: 800px) {

    body {
        background:url(images/bg2.jpg) no-repeat 0 0;
    }

} 
```

对于最大分辨率为 480 像素的屏幕：

```
@media (max-width: 480px) {

    body {
        background:url(images/bg3.jpg) no-repeat 0 0;
    }

} 
```

您选择的分辨率显然取决于您自己，以上仅作为示例给出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:06:51.573

如果您正在使用`<img>`，则为其设置`width`and`height`属性。

如果您将图像用作现有元素的背景，请为背景设置正确的[样式](http://www.w3schools.com/cssref/css3_pr_background-size.asp)：

```
div{
  background:url(img_flwr.gif);
  background-size:80px 60px;
  background-repeat:no-repeat;
} 
```

# java - java nextInt() 尝试多次捕获重复输出

> ID：12088226
> 
> 赞同：0
> 
> 时间：2012-08-23T09:02:36.937
> 
> 标签：java, exception-handling, java.util.scanner

我正在编写一个程序，它接受程序中的两个整数，`nextInt();`并将其包装在一个`try catch`块中以阻止错误的输入，例如双精度数或字符。

当输入多个错误输入时，循环会重复相同的次数。我认为这是因为我`scan.next()`必须循环足够多的时间才能捕获没有错误的错误输入。有没有办法在第一次运行时知道这个数字，以便循环运行多次？

在输出中， `if(cont == 'N') System.out.print("\nPlease re-enter\n\t:");`将输出并镜像写入不匹配输入的次数。也就是说，如果我输入 3 3.3 它将重复一次，如果输入 s 3.3 2.5 它将重复三次。

我尝试将循环`scan.next()`默认为十次，但太过分了，我必须输入额外的 8 个字符才能再次开始阅读。也许是一个while循环，但它的条件是什么，我试过`while(scan.next() != null){}`了，但那个条件从未停止过。

```
//input error checking
char cont = 'Y';
do{
  if(cont == 'N')
    System.out.print("\nPlease re-enter\n\t:");
  cont = 'Y';
  /* to stop the accidential typing of things other
   * than integers from being accepted
   */
  try{
    n1 = scan.nextInt();
    n2 = scan.nextInt();
  }catch(Exception e){
    cont = 'N'; //bad input repeat loop
    scan.next();//stops infinite loop by requesting Scanner try again
  }
} while(cont == 'N');//do loop while told N for continue 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:22:41.413

不确定您希望代码做什么。通过阅读您发布的内容，我假设您希望用户输入 2 个整数，如果他/她不想提示他/她重新输入某些内容，直到他/她输入 2 个整数。如果是这种情况，我会添加

`scan = new Scanner(br.readLine());`

在此 if 语句之后：

`if(cont == 'N') {System.out.print("\nPlease re-enter\n\t:");}`

这将解决您的循环问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:21:10.510

第一次尝试 ：

将异常捕获中的行从

```
scan.next(); 
```

至

```
while(scan.hasNext()){
    scan.next();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:21:35.063

您可以尝试在 catch 块中执行以下操作：

```
while(scan.hasNext())
    scan.next(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T09:23:09.997

使它成为一种方法并使用该方法进行操作。
像这样的某事：

```
 // do it until getting two Integers
    boolean isItInteger = false;
    while (isItInteger == false) {
        isItInteger = getInt();
    }
    .
    .
    .
        // your method for getting two Integers
    public static boolean getInt() {
        try {
            Scanner sc = new Scanner(System.in);
            n1 = sc.nextInt();
            n2 = sc.nextInt();
        } catch (Exception e) {
            System.out.println("Please re-enter");
            return false;
        }
        return true;
    } 
```

# asp.net-mvc-3 - Enumerable 的数据类型应该是什么

> ID：12088228
> 
> 赞同：0
> 
> 时间：2012-08-23T09:02:47.433
> 
> 标签：asp.net-mvc-3, razor, model-binding

我正在使用 mvc 3 razor，问题是使用 razor helpers 在数据库中记录下拉列表值：

```
 @Html.DropDownListFor(m => m.Question,   (IEnumerable<SelectListItem>)ViewBag.QuestionList) 
```

在这里，我的观点是使用模型绑定。在数据库中，问题列是 sting 数据类型（varchar），并且在运行应用程序时，它在提交表单后显示以下错误

```
The ViewData item that has the key 'Question' is of type 'System.String' but must be of type 'IEnumerable<SelectListItem>'. 
```

我应该在这里改变什么以避免错误在这里我必须使用模型绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:06:57.853

> 我应该在这里改变什么以避免错误在这里我必须使用模型绑定。

您应该确保在呈现此视图的控制器操作中，您已`ViewBag.QuestionList`使用`IEnumerable<SelectListItem>`. 当重新显示包含此 DropDown 的同一视图时，人们通常会忘记在他们的 POST 操作中执行此操作：

```
IEnumerable<SelectListItem> items = ... 
ViewBag.QuestionList = items;
return View(someModel); 
```

还要确保模型上的 Question 属性是标量类型（字符串、整数、...）而不是复杂类型。如果是复杂类型，则需要选择对应的标量属性将选中的值绑定到：

```
@Html.DropDownListFor(
    m => m.Question.QuestionId, 
    (IEnumerable<SelectListItem>)ViewBag.QuestionList
) 
```

# monkeyrunner - 如何通过 Monkeyrunner 打开最近的应用列表面板

> ID：12088230
> 
> 赞同：1
> 
> 时间：2012-08-23T09:02:50.233
> 
> 标签：monkeyrunner, long-press

对于使用 monkeyrunner 的自动化测试，我想从最近的应用程序列表面板启动一个应用程序，而通过 monkeyrunner 命令长按 HOME 键后无法打开面板。

```
device.press('KEYCODE_HOME',MonkeyDevice.DOWN)
Monkeyrunner.sleep(5)
device.press('KEYCODE_HOME',MonkeyDevice.UP) 
```

使用上面的代码，按下作为短按。手动长按HOME键即可打开面板。这个问题有解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T08:30:58.717

您可以使用主页按钮的坐标并在这些精确坐标上模拟长按：

```
device.touch(x, y, MonkeyDevice.DOWN)  
MonkeyRunner.sleep(3)
device.touch(x, y, MonkeyDevice.UP) 
```

其中 (x, y) 是主页按钮的坐标。您可以通过转到开发人员选项并选择指针位置并在触摸主页按钮时观察坐标来获得这些。

此外，还有一个特定的应用切换键事件：

```
device.press(' KEYCODE_APP_SWITCH', MonkeyDevice.DOWN_AND_UP) 
```

这应该会打开最近的应用程序面板。

# visual-studio-2008 - 为 wince 编译 boost

> ID：12088231
> 
> 赞同：0
> 
> 时间：2012-08-23T09:02:53.427
> 
> 标签：visual-studio-2008, boost, windows-ce

在为我的 wince 目标创建 Visual Studio 2008（版本 9.0）项目时，Visual Studio 知道我的平台是“FSS5PV210_CE6（ARMV4I）”。该平台由供应商预定义并通过 sdk 安装，并让 Visual Studio 神奇地知道其包含目录。我在 vs 显示的命令行中看不到它，所以问题是：vs 如何将包含目录注入编译器？

为了提升，我在 user-config.jam 中添加了以下内容：

```
using msvc : 9.0~armstone : "cl.exe" :
<compileflags>-D_CRT_SECURE_NO_WARNINGS
<compileflags>-D_WIN32_WCE=0x600
<compileflags>-DUNDER_CE
<compileflags>-DBSP_FSS5PV210
<compileflags>-DWINCE
<compileflags>-DARM
<compileflags>-D_ARM_
<compileflags>-DARMV4I
<compileflags>-D_LITTLE_ENDIAN
<compileflags>-DUNICODE
<compileflags>-D_UNICODE
<compileflags>-DPOCKETPC2003_UI_MODEL
<compileflags>-DBOOST_NO_STD_LOCALE
<compileflags>-D_MSC_VER=1500
<linkflags>/subsystem:windowsce,6.00
<linkflags>/machine:arm
<linkflags>/NODEFAULTLIB:oldnames.lib
<linkflags>/STACK:262144,4096
<linkflags>coredll.lib
<linkflags>corelibc.lib
<linkflags>ole32.lib
<linkflags>oleaut32.lib
<linkflags>uuid.lib
<linkflags>commctrl.lib
<architecture>arm
<instruction-set>armv4
<interface>wince
<assembler>"armasm.exe"
; 
```

然后我使用 bjam.exe 工具集=msvc-9.0~armstone variant=debug link=static threading=multi runtime-link=shared --prefix= --layout=tagged install 调用 bjam

我再次想知道 bjam 如何知道我的平台及其包含目录，即“c:\Program Files (x86)\Windows CE Tools\wce600\FSS5PV210_CE6\Include\Armv4i”

-约臣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:42:59.133

您必须从 bjam 调用设置环境变量的批处理文件。这是通过配置文件中的选项完成的。例如：

```
using msvc : 9.0~armstone : "cl.exe" :
    <compileflags>-D_CRT_SECURE_NO_WARNINGS
    <compileflags>-D_WIN32_WCE=0x600
    <compileflags>-DUNDER_CE
    <compileflags>-DBSP_FSS5PV210
    <compileflags>-DWINCE
    <compileflags>-DARM
    <compileflags>-D_ARM_
    <compileflags>-DARMV4I
    <compileflags>-D_LITTLE_ENDIAN
    <compileflags>-DUNICODE
    <compileflags>-D_UNICODE
    <compileflags>-DPOCKETPC2003_UI_MODEL
    <compileflags>-DBOOST_NO_STD_LOCALE
    <compileflags>-D_MSC_VER=1500
    <linkflags>/subsystem:windowsce,6.00
    <linkflags>/machine:arm
    <linkflags>/NODEFAULTLIB:oldnames.lib
    <linkflags>/STACK:262144,4096
    <linkflags>coredll.lib
    <linkflags>corelibc.lib
    <linkflags>ole32.lib
    <linkflags>oleaut32.lib
    <linkflags>uuid.lib
    <linkflags>commctrl.lib
    <architecture>arm
    <instruction-set>armv4
    <interface>wince
    <assembler>"armasm.exe"
    <setup>armstoneconf.bat
; 
```

在我称为 armstoneconf.bat 的批处理文件中，您必须设置目标标头的 PATH、INCLUDE、LIB 和 LIBPATH。

在 user-config.jam 中，您必须使用 ARM 编译器而不是 x86 编译器。我认为位于 %VCInstallDir%ce/bin/x86_arm/cl.exe 而不是桌面目标的“cl.exe”。

您可以创建一个简单的 vc 解决方案并查看 Visual Studio 使用什么。

另请参阅：http://stackoverflow.com/questions/15906901/build-boost-c-wince

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:48:54.037

这适用于 checksdk.exe 突击队：

```
checksdk -list

checksdk.exe -sdk "your sdk name" -script setenviroment.bat 
```

在`setenvironment.bat`其中设置了一个名为`INCLUDE`. 它还设置`PATH`和`LIB`。它设置`PATH`以确保使用正确的交叉编译器`cl.exe`（例如 x86_arm 一个，以防您正在为 arm 编译），它设置`LIB`为帮助您链接`INCLUDE`，当然是用于编译。

# c - 动态结构声明

> ID：12088233
> 
> 赞同：1
> 
> 时间：2012-08-23T09:02:56.953
> 
> 标签：c

我的项目中有一些代码，其中使用了结构 z。此结构声明根据我的系统中设置的条件标志而更改。我希望结构声明是动态的。

如果条件标志为 0，则

```
struct x z; 
```

如果条件标志为 1，则

```
struct y z; 
```

但是要对 z 执行的操作是相同的。目前，这是通过声明两个结构来处理的：

```
struct x z_x;
struct y z_y; 
```

然后根据条件标志在代码中使用适当的结构。这种方法似乎不是最优的。有关处理此类代码的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:08:58.630

您还可以使用 #ifdefs 创建结构：

```
typedef struct
{
#ifdef MY_FLAG
int s;
#else
float s;
#endif
} z; 
```

您也可以使用联合，该结构将同时具有两个字段，您将使用您需要的那个。

```
union {
int i;
float f;
} z; 
```

zi = 1; zf = 1.0;

这样，您一次只能使用一个成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:44:29.783

由于该标志是运行时的，因此您无法避免一直检查此标志。至少，我想不出这样的方式。

但是你仍然可以减少内存和代码。我会这样做：

* * *

减少内存使用：

```
struct z_x* = NULL;
struct z_y* = NULL;

//...

if( flag )
{
    z_x = malloc( sizeof( struct x ) );
}
else
{
    z_y = malloc( sizeof( struct y ) );
} 
```

* * *

为了减少代码，而不是一直写这样的东西：

```
if( flag )
{
    // do operations_N with z_x
}
else
{
    // do operations_N with z_y
} 
```

我会写：

```
operations_N( z_x, z_y, flag ); 
```

在哪里

```
void operations_N( struct x* z_x, struct y* z_y, flag )
{
    if( flag )
    {
        // do operations_N with z_x
    }
    else
    {
        // do operations_N with z_y
    }
} 
```

当然，`operations_1`并且`flag`应该有一些好的和合乎逻辑的名字。

但这可能会导致一些问题，所以如果您决定使用这种方法，请小心。

# ios - 在 textview -xcode 中添加按钮

> ID：12088236
> 
> 赞同：2
> 
> 时间：2012-08-23T09:03:05.117
> 
> 标签：ios, xcode, uibutton, textview

如何在 textview 中添加按钮？例如..

```
textView.text=@"text here\n\n text also here\n\n text here aswell"; 
```

如何在每个“\n\n”之后或沿文本添加按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:07:40.170

您可以创建一个对象`UIButton`并将其作为子视图添加到 yout `textview`。

需要预先设置按钮的边框所以文字必须是统计的，并且必须提前知道按钮的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T16:44:28.187

so your \n\n creates a paragraphs

You can do it without static text just split your text in separate textviews by \n\n, add them to your scrollview. You have to measure your text paragraphs height to set the right frame for textviews and leave gaps for buttons. I would rather use tableview so you dont have to worry about that. Add buttons in between, it is doable.

you may reconsider adding buttons along the text this way (you can but it is really convoluted way of doing things), use webview for that as already stated here by others

# homebrew - OSX Mountain Lion Homebrew 医生错误导入 cdo

> ID：12088238
> 
> 赞同：2
> 
> 时间：2012-08-23T09:03:07.597
> 
> 标签：homebrew, osx-mountain-lion

G'day 传说，

我最近在 OSX Mountain Goat 上使用 Homebrew 遭受了可怕的痛苦。

我想让 numpy 和 scipy 继续下去，这简直就是地狱。

我最终完全删除了自制软件。在中间的某个地方我做错了什么。

现在我明白了：

```
192-168-1-105:local holografix$ brew doctor
Error: Failed to import: cdo
Your system is raring to brew. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:41:50.567

这是一个已知的错误。（https://github.com/mxcl/homebrew/issues/14409）。

要修复它，您可以编辑 /usr/local/Library/Formula/cdo.rb （例如使用 nano 文本编辑器）。您需要更换线路

```
"options 'enable-grib2', 'Compile Fortran bindings'" 
```

经过

```
"option 'enable-grib2', 'Compile Fortran bindings'" 
```

这是“选项”，但我们需要“选项”。

# c# - 在 C# 中将 xps 导出为 pdf

> ID：12088241
> 
> 赞同：1
> 
> 时间：2012-08-23T09:03:18.653
> 
> 标签：c#, wpf, pdf, infragistics, xps

我是新手，我想从**Infragistics**、**Xamdatagrid生成****PDF**。但是，由于 Infragistics 不提供此功能，我已经生成了**Xamdatagrid的****XPS** ，并希望以**编程方式将其转换为 XPS**。有哪些可能的解决方法和第三方工具可以做到这一点？

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:08:56.953

如果您将 xamDataGrid 导出为 excel 文件，那么使用起来非常简单，`Excel.Interop`并要求 excel 以 PDF 格式导出其工作簿

```
// Export an excel workbok in PDF format with landscape orientation
private static void ExportWorkbookToPDF(string workbook, string output)
{
    Microsoft.Office.Interop.Excel.Application excelApplication = 
                     new Microsoft.Office.Interop.Excel.Application();
    excelApplication.ScreenUpdating = false;
    excelApplication.DisplayAlerts = false;
    excelApplication.Visible = false;

    Microsoft.Office.Interop.Excel.Workbook excelWorkbook = 
                     excelApplication.Workbooks.Open(workbook);

    if (excelWorkbook == null)
    {
        excelApplication.Quit();
        excelApplication = null;
        excelWorkbook = null;
        throw new NullReferenceException("Cannot create new excel workbook.");
    }
    try
    {
        ((Microsoft.Office.Interop.Excel._Worksheet)excelWorkbook.ActiveSheet).PageSetup.Orientation = 
                Microsoft.Office.Interop.Excel.XlPageOrientation.xlLandscape;
        excelWorkbook.ExportAsFixedFormat(XlFixedFormatType.xlTypePDF, output);
    }
    finally
    {
        excelWorkbook.Close();
        excelApplication.Quit();
        excelApplication = null;
        excelWorkbook = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:31:21.877

如果您只想创建 pdf。那么最简单的事情就是在机器上安装任何 pdf 打印机。一个像 [PDF 创建器](http://filehippo.com/download_pdfcreator/)，然后只需在 XamDataGrid 上调用如下所示的打印内容。

确保在打印机选择对话框中选择 PDF 打印机。

```
 // 1\. Create Report object
            Report reportObj = new Report();

            // 2\. Create EmbeddedVisualReportSection section. 
            // Put the grid you want to print as a parameter of section's constructor
            EmbeddedVisualReportSection section = new EmbeddedVisualReportSection(xamdg);

            // 3\. Add created section to report's section collection
            reportObj.Sections.Add(section);

            // Optional. If you have progress indicator set its Report property to created report
           // progressInfo.Report = reportObj;

            // 4\. Call print method
            reportObj.Print(true, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:25:15.740

您还可以使用 GhostXPS 等第三方软件。 [http://www.ghostscript.com/download/gxpsdnld.html](http://www.ghostscript.com/download/gxpsdnld.html)

只需使用正确的参数启动转换过程，它就会为您生成 PDF。缺点是您必须将文件临时保存到磁盘并检查返回码。还要确保您没有违反 GNU 许可证******

# phpunit - 将 Simpletest 测试套件转换为 PHPUnit

> ID：12088242
> 
> 赞同：1
> 
> 时间：2012-08-23T09:03:27.337
> 
> 标签：phpunit, migrate, simpletest

我使用 Simpletest 测试套件以不同的配置方法运行所有测试。我为每个配置方法创建了一个套件，它设置了环境，然后运行所有测试。

如果不清楚，请查看[Adapter.php](https://github.com/Znarkus/postmark-php/blob/master/Tests/Adapter.php)和[Constants.php 。](https://github.com/Znarkus/postmark-php/blob/master/Tests/Constants.php)

现在似乎[支持 PHPUnit 中的测试套件](http://www.phpunit.de/manual/current/en/organizing-tests.html#organizing-tests.xml-configuration)，但据我了解，它仅用于对测试进行分组，不支持设置环境或运行 PHP 脚本。

如何将我的测试套件转换为 PHPUnit？我愿意重新考虑测试的结构:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T09:50:20.740

除了重构您的测试套件之外，您还应该知道`assertions`PHPUnit 中的行为与 SimpleTest 不同。

在 SimpleTest 中，您可以测试断言结果并在断言失败后执行进一步的代码，但您不能在 PHPUnit 中：使用 PHPUnit[测试触发错误的方法的返回值](https://stackoverflow.com/questions/1225776/test-the-return-value-of-a-method-that-triggers-an-error-with-phpunit)

这也可能会强制重构一些实际测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:34:52.317

您可以在每次测试之前或在每个测试套件之前使用测试装置来设置您的环境：

[http://www.phpunit.de/manual/3.6/en/fixtures.html#fixtures.more-setup-than-teardown](http://www.phpunit.de/manual/3.6/en/fixtures.html#fixtures.more-setup-than-teardown)

您正在寻找的方法是

*   `setUp()`和`tearDown()`（在每次测试之前/之后调用），和
*   `setUpBeforeClass()`和`tearDownAfterClass()`（在每个测试类（套件）之前/之后调用）。

# sql - ActiveX 调用 URL 页面

> ID：12088243
> 
> 赞同：0
> 
> 时间：2012-08-23T09:03:29.797
> 
> 标签：sql, internet-explorer, sql-server-2005, vbscript, activex

我`ActiveX Script`在 SQl Server 上的作业中使用以下代码每 X 分钟调用一次 URL。

```
Dim WshShell
Set WshShell = CreateObject("WScript.Shell")
WshShell.Run "iexplore.exe http://www.google.com.br"
Set WsShell = Nothing 
```

它正在工作，但创建的进程继续运行： ![在此处输入图像描述](../Images/d47455a5c9876221b764ba5c2cad354d.png)

更改该代码以调用 URL 并终止最近调用的进程或使用“生存时间”调用它的任何方式。我认为它更安全，我不想杀死错误的进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:49:16.293

Following up on the suggestion by @Ted, you can also fetch a URL using native Microsoft capabilities in an in-process fashion. You can do this via a component known as WinHTTP ([the latest appears to be WinHTTP 5.1](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384045%28v=vs.85%29.aspx)).

See my script below which includes a function to simply obtain the status of a URL. When I run this script I get the following output:

```
http://www.google.com => 200 [OK]
http://www.google.com/does_not_exist => 404 [Not Found]
http://does_not_exist.google.com => -2147012889
    [The server name or address could not be resolved] 
```

If you want the actual content behind a URL, try `oHttp.ResponseText`. Here's the [WinHTTP reference](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384106%28v=vs.85%29.aspx) if you are interested in other capabilities as well.

```
Option Explicit

Dim aUrlList
aUrlList = Array( _
    "http://www.google.com", _
    "http://www.google.com/does_not_exist", _
    "http://does_not_exist.google.com" _
)

Dim i
For i = 0 To UBound(aUrlList)
    WScript.Echo aUrlList(i) & " => " & GetUrlStatus(aUrlList(i))
Next

Function GetUrlStatus(sUrl)
    Dim oHttp : Set oHttp = CreateObject("WinHttp.WinHttpRequest.5.1")

    On Error Resume Next

    With oHttp
        .Open "GET", SUrl, False
        .Send
    End With

    If Err Then
        GetUrlStatus = Err.Number & " [" & Err.Description & "]"
    Else
        GetUrlStatus = oHttp.Status & " [" & oHttp.StatusText & "]"
    End If

    Set oHttp = Nothing
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:40:16.837

您启动 IE 的方式是外部的，一旦启动，您几乎无法控制该进程。更好的交互方式是这样的

```
Function GetData(strUrl) 'As String
  Set web = CreateObject("InternetExplorer.Application")
  web.Navigate strUrl
  Do While web.Busy
    wscript.sleep 100
  Loop
  Set doc = Nothing
  Do Until Not doc Is Nothing
    Set doc = web.Document
  Loop
  strWebPage = doc.all(1).innerHTML 'This does return the head sections
  web.Quit
  GetData = strWebPage
End Function

wscript.echo GetData("www.google.com") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T19:13:17.183

**更新：**就目前而言，这似乎不是一个可行的解决方案。在多次调用之后，IE 进程也开始使用这种方法进行累积。看来这种行为与 IE 的会话管理有关。IE 不喜欢被突然终止。

* * *

[我在这里](http://www.activexperts.com/activmonitor/windowsmanagement/adminscripts/processes/)找到了一些关于通过 WMI 管理进程的非常有用的信息。以此为基础，我想出了下面显示的代码。WMI 方法的优点之一是您可以访问该进程的唯一 ID。我认为我的代码是一个起点，因为我确信可以进一步改进（包括添加异常处理）。

也许对 WMI 有更深入了解的其他人可以提供额外的建议。

PS：希望你喜欢我将这个功能封装在一个名为`Process`.

```
Option Explicit

' Const PROG = "notepad.exe"
Const TARGET = "http://www.google.com"
Dim PROG : PROG = "C:\Program Files\Internet Explorer\iexplore.exe " & TARGET
Const ABOVE_NORMAL = 32768  ' what are the other priority constants?

Dim oProc : Set oProc = New Process
oProc.Name = PROG
' oProc.Priority = ABOVE_NORMAL
oProc.Launch

WScript.Echo "Launched '" & PROG & "' with process ID '" & oProc.ID & "'"
WScript.Sleep 5000
oProc.Terminate
WScript.Echo "Process " & oProc.ID & " killed."
Set oProc = Nothing

' ----------------------------------------------------------------------

Class Process

Public Computer
Public Name
Public Priority
Public ID
Public IsRunning

Private mHandle

Private Sub Class_Initialize()
    Me.Computer = "."
    Me.Name = Null
    Me.ID = -1
    Me.Priority = Null
    Me.IsRunning = False
    Set mHandle = Nothing
End Sub

Private Sub Class_Terminate()
    Set mHandle = Nothing
End Sub

Public Sub Launch()
    Dim oWmi, oStartup, oConfig
    Dim nPid

    Set oWmi = GetObject("winmgmts:" _
                         & "{impersonationLevel=impersonate}!\\" _
                         & Me.Computer & "\root\cimv2")

    Set oStartup = oWmi.Get("Win32_ProcessStartup")

    If Not IsNull(Me.Priority) Then
        Set oConfig = oStartup.SpawnInstance_
        oConfig.PriorityClass = Me.Priority
    End If

    Set mHandle = GetObject("winmgmts:root\cimv2:Win32_Process")
    mHandle.Create Me.Name, Null, oConfig, nPid
    ' WScript.Echo "TypeName Is [" & TypeName(mHandle) & "]"
    Me.ID = nPid
    Me.IsRunning = True
End Sub

Public Sub Terminate()
    ' mHandle.Terminate  ' hmmm, doesn't work...

    Dim oWmi
    Dim colProcessList, oProc

    Set oWmi = GetObject("winmgmts:" _
                                  & "{impersonationLevel=impersonate}!\\" _
                                  & Me.Computer & "\root\cimv2")

    Set colProcessList = oWmi.ExecQuery _
        ("Select * from Win32_Process Where ProcessId = '" & Me.ID & "'")

    For Each oProc In colProcessList  ' should be only one process
        ' WScript.Echo "TypeName Is [" & TypeName(oProc) & "]"
        oProc.Terminate
    Next

    Me.IsRunning = False
End Sub

End Class 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T21:22:42.753

您是否可以考虑使用轻量级的命令行 URL 检索程序，例如 CURL ( [http://curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html) ) 或 WGET ( [http://www.gnu.org/software/wget/](http://www.gnu.org/software/wget/) )？这些程序可以很简单地从命令行执行：

```
wget http://www.google.com
curl http://www.google.com 
```

您可以像这样从 VBScript 执行它们：

```
sub shell(cmd)
    ' Run a command as if you were running from the command line
    dim objShell
    Set objShell = WScript.CreateObject( "WScript.Shell" )
    objShell.Run(cmd)
    Set objShell = Nothing
end sub

shell "wget http://www.google.com" 
```

唯一的缺点是 WGET 和 CURL 不会执行 javascript、下载附属图像或呈现 HTML；他们只会下载网页。根据我的经验，只要我只需要检索一个 HTML 页面，我就会经常使用 CURL 和 WGET；但如果我必须渲染某些东西或触发 AJAX 函数，我会使用可自动化的 Web 浏览器工具包，例如 Selenium、WATIN 或 IMacros。

# php - 如何获取目录下的所有csv文件名？

> ID：12088252
> 
> 赞同：5
> 
> 时间：2012-08-23T09:03:42.513
> 
> 标签：php

假设有一个名为 的文件夹`example`，其中有一些 csv 文件，例如`(a.csv, b.csv....`）。

目录与文件夹`test.php`相同。`example`现在我想将所有 csv 文件名传递给以下 if 条件。即，替换`test.csv`为所有 csv 文件名

```
if (($handle = fopen("test.csv", "r")) 
```

我该怎么办？

我使用以下代码：

```
$files=  glob("./example/*.csv");
 if (($handle = fopen("$files", "r")) 
```

但它不起作用。谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T09:06:35.623

`$files`是一个数组，你需要用它循环。

```
$files = glob("./example/*.csv");
foreach($files as $filepath) {
  if ($handle = fopen($filepath, "r")) {
     // ...
  }
} 
```

# iphone - UITableView：自定义标题标题视图不显示

> ID：12088257
> 
> 赞同：2
> 
> 时间：2012-08-23T09:04:07.660
> 
> 标签：iphone, ios, uitableview, ios5

我想显示一个带有自定义标题标题的表格。`table view`附加到`controller class`实现`tableview delegate`和数据源协议但不是子类的，因为`UIViewController`表是要显示在另一个表视图上方的子视图。

我的代码的一些片段： tableview 是以编程方式创建的：

```
 _myListView = [[UITableView alloc] initWithFrame:tableFrame style:UITableViewStyleGrouped];

[_myListView setDataSource:self.myListController];
[_myListView setDelegate:self.myListController];
[_myListView setBackgroundColor:darkBackgroundColor]; 
```

其中 myListController 是类中的一个强属性。

对于节中的行数：

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    …
    return count;    
} 
```

段数：

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [someDelegate sectionCount];
} 
```

对于自定义标题视图：

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView* headerView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, SectionHeaderHeight)];
    UILabel* sectionHeaderTitle = [[UILabel alloc] initWithFrame:CGRectMake(20, 3, 300, 24)];

    [headerView setBackgroundColor:[UIColor clearColor]];

    sectionHeaderTitle.text = [self myTitleForHeaderInSection:section];
    sectionHeaderTitle.textColor = [UIColor whiteColor];
    sectionHeaderTitle.textAlignment = UITextAlignmentLeft;

   [headerView addSubview:sectionHeaderTitle];

    return headerView;
} 
```

对于自定义 headerViewHeight（从 iOS5 开始需要）：

```
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    if ( [self tableView:tableView numberOfRowsInSection:section] > 0) {
        return SectionHeaderHeight;
    } else {
        return 0;
    }
} 
```

可悲的是，tableview 没有显示任何节标题，就像我会返回 nil 一样。但是，我检查了断点，代码实际上返回了一个 UIView。

其他一切正常。

我错过了什么？请不要犹豫，让我为自己感到羞耻。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:13:13.093

我真的不明白你为什么要使用自定义视图，而不是“标准”视图？你可能有你的理由，但我在你的代码中没有看到任何东西告诉我为什么:)

我个人会使用这个：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    if (section == 0) return @"First section header title";
    if (section == 1) return @"Second section header title";
    else return nil;
} 
```

告诉我这不是你要找的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:25:25.910

文本颜色您将其更改为黑色并检查一次。

`sectionHeaderTitle.textColor = [UIColor blackColor];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:22:22.670

我似乎找到了解决方案：

我为要显示的每个标题视图创建了一个延迟加载强属性。（幸好只有三个）

现在显示视图。

似乎在呈现表之前，标题视图在没有强引用的情况下被释放。

是否存在与实现表视图委托和数据源协议的类的连接不是 UIViewController？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T08:31:47.260

你试试这个代码在我这边工作:-)

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *view=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 24)];

    UIImage *myImage = [UIImage imageNamed:@"SectionBackGround.png"];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:myImage];
    imageView.frame = CGRectMake(0,0,320,24);

    UIImage *imageIcon = [UIImage imageNamed:@"SectionBackGround.png"];
    UIImageView *iconView = [[UIImageView alloc] initWithImage:myImage];
    iconView.frame = CGRectMake(0,0,320,24);

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 24)];
    label.text = [tableView.dataSource tableView:tableView titleForHeaderInSection:section];
    label.backgroundColor = [UIColor clearColor];
    label.font = [UIFont boldSystemFontOfSize:14];

    [view addSubview:imageView];
    [view addSubview:iconView];
    [view addSubview:label];
    return view;

}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 24;
} 
```

# stream - windows phone 7中的流类

> ID：12088258
> 
> 赞同：0
> 
> 时间：2012-08-23T09:04:08.403
> 
> 标签：stream, windows-phone

我正在尝试在 windows phone 7 应用程序中包含 .wav 文件。但不知何故，流类没有被识别。任何想法为什么？另外，我只是在项目中拖了wav文件。但是没有一个声音文件夹可以自动添加声音文件吗？我已经包含了 xna 框架和 xna.framework.audio 库。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:15:39.103

文件的格式似乎必须如下：

```
Codec: Microsoft PCM Format
Sample Rate: 11025
Channels: 1(Mono) or 2(Stereo) 
```

[这是一个简短的教程，其中包含在 Windows Phone 7 上播放 wav 文件](http://mobileworld.appamundi.com/blogs/petevickers/archive/2010/09/29/playing-wav-files-on-windows-phone-7.aspx)的示例。

# android - ANDROID中的动画闪烁

> ID：12088259
> 
> 赞同：2
> 
> 时间：2012-08-23T09:04:14.730
> 
> 标签：android, animation, flicker

我正在尝试在 ADNROID 中实现一些相对简单的东西。我有一堆 Drawable 存储在一个列表中。我想使用淡入效果创建一个效果，其中可绘制对象一个一个地显示在彼此之上。

我在下面的代码中取得了部分成功。它实际上在我的手机 (Nexus S) 上完美运行，但在我的平板电脑 (ASUS TF101) 上显示闪烁。这可能是由于平板电脑的 CPU 速度更快。

这是我的设置：我已将所有可绘制对象存储在`drawables`列表中。我还在布局中定义了两个图像，一个在另一个之上：`imageViewForeground`和`imageViewBackground`.

这个想法是先设置背景图像，然后启动一个动画，其中前景图像从 alpha-0 开始并转到 alpha-1。然后用新的前景图像替换背景，选择一个新的前景（即下一个可绘制对象）并永远循环。

该`counter`对象是一个 int 计数器的简单包装器。

这是我的代码：

```
final Animation fadeInAnimation = new AlphaAnimation(0f, 1f);
fadeInAnimation.setDuration(2000);
fadeInAnimation.setStartOffset(3000);
fadeInAnimation.setFillBefore(false);
fadeInAnimation.setFillAfter(true);
fadeInAnimation.setRepeatCount(Animation.INFINITE);
fadeInAnimation.setRepeatMode(Animation.RESTART);
fadeInAnimation.setAnimationListener(new Animation.AnimationListener() {
    @Override
    public void onAnimationStart(Animation animation) {
        imageViewForeground.setImageDrawable(drawables.get(counter.value()));
        Log.d(TAG, "onAnimationStart");
    }

    @Override
    public void onAnimationEnd(Animation animation) {
        Log.d(TAG, "onAnimationEnd");
    }

    @Override
    public void onAnimationRepeat(Animation animation) {
        imageViewBackground.setImageDrawable(drawables.get(counter.value()));
        counter.increase();
        // the problem appears in this line, 
        // where the foreground becomes visible for a very small period, 
        // causing the flickering
        imageViewForeground.setImageDrawable(drawables.get(counter.value()));
    }
});

imageViewForeground.startAnimation(fadeInAnimation); 
```

有什么想法可以克服这个闪烁的问题吗？

# django - django 使用 mysql 托管

> ID：12088262
> 
> 赞同：0
> 
> 时间：2012-08-23T09:04:20.070
> 
> 标签：django, pythonanywhere

我在名为“pythonanywhere”的 DJango 免费托管网站上运行我的 python 基础 REST 服务。

到目前为止，每个 Web 服务的响应时间约为 100 毫秒，因此我的前端非常快，但最近几天响应发生了巨大变化，现在对于相同的 REST API，我得到了 30 秒。

由于上述性能，我无法安排我的演示，我计划为自己设置新的 django/python/mysql 基础环境。

托管/设置基于 Django 的应用程序（使用 mysql）的最佳方法是什么，最好是免费托管，但我不介意花几块钱来获得更好的服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:08:04.117

对于生产部署设置[，推荐的部署是`wsgi`](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/).

StackOverflow 不是征求一揽子建议的正确地方，尤其是因为您还没有对预期的负载/使用情况有任何了解。

如果您只需要一些东西来快速“在线”运行您的应用程序；PaaS 提供商应提供最快的启动时间。我以前用过[heroku](http://heroku.com) [，上手](https://devcenter.heroku.com/articles/django)非常简单。

# image-processing - GIMP在增加/减少饱和度时如何避免色块

> ID：12088267
> 
> 赞同：0
> 
> 时间：2012-08-23T09:04:39.500
> 
> 标签：image-processing, gimp

以[https://subtilitas.org/hsv/indexEn.htm](https://subtilitas.org/hsv/indexEn.htm)为例

很明显，当增加/减少饱和度时会出现色块。但是 GIMP 如何做类似的工作呢？它将产生没有块的图像。后高斯滤波器？我不确定并且对此很好奇。

# openstack - 无法在 openstack 上启动 WindowsXp 映像

> ID：12088269
> 
> 赞同：0
> 
> 时间：2012-08-23T09:04:57.453
> 
> 标签：openstack

我在笔记本电脑上尝试了openstack，我的设置是这样的

主机：Windows 7 虚拟化：VirtualBox

Ubuntu12 在这个 VirtualBox 上运行，在这个 Ubuntu12 上，我安装了 OpenStack Essex 软件包，使用 qemu 作为管理程序，并添加了一些 uec linux 镜像，我可以使用 ssh 和 vnc 访问 linux 镜像，非常成功。

现在，上传Windows图像变得非常具有挑战性，真是一场噩梦我尝试了所有可能的方法，在谷歌中搜索了很多解决方案，但没有任何效果，最后我使用VBoxManage将WindowsXp.vdi文件转换为WindowsXp.img并添加到一目了然，一旦我启动它，我就会出现蓝屏错误，并且 windowsxp 正在可怕地重新启动............所以请帮助解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:03:28.433

如果您选择的虚拟化没有正确的驱动程序，您的 Windows 图像（服务器或桌面）将会蓝屏。尝试使用[http://www.claunia.com/qemu/drivers/index.html（QEMU](http://www.claunia.com/qemu/drivers/index.html)驱动程序）上的驱动程序之一安装 Windows 映像，看看效果如何。

***请注意**：众所周知，Windows 很难在任何云上运行，**而**不仅仅是 OpenStack。除了驱动程序之外，您还将与图像格式（就像您一样）和初始化问题（否则所有图像都带有相同的 GUID）进行斗争。*

# postgresql - PostgreSQL regexp_replace 与匹配的表达式

> ID：12088271
> 
> 赞同：4
> 
> 时间：2012-08-23T09:05:07.773
> 
> 标签：postgresql, plpgsql

我正在使用 PostgreSQL`regexp_replace`函数来转义字符串中的方括号、括号和反斜杠，以便我可以将该字符串用作正则表达式模式本身（在使用它之前对该字符串也进行了其他操作，但它们超出了这个问题。想法是替换：

`[`有`\[`
`]`有`\]`
`(`有`\(`
`)`有`\)`
`\`有`\\`

[关于正则表达式](http://www.postgresql.org/docs/9.1/static/functions-matching.html#FUNCTIONS-POSIX-REGEXP)的 Postgres 文档页面说明如下：

> 替换字符串可以包含\n，其中n是1到9，表示应该插入匹配模式的第n个括号子表达式的源子字符串，它可以包含\&表示匹配整个模式的子字符串应该插入。如果您需要在替换文本中添加文字反斜杠，请编写 \。

然而`regexp_replace('abc [def]', '([\[\]\(\)\\])', E'\\\1', 'g');`产生`abc \ def\`.

在同一页面的下方，给出了一个使用`\\1`符号的示例 - 所以我尝试了。

然而，`regexp_replace('abc [def]', '([\[\]\(\)\\])', E'\\\\1', 'g');`产生`abc \1def\1`.

我猜这是意料之中的，但`regexp_replace('abc [def]', '([\[\]\(\)\\])', E'.\\1', 'g');`会产生`abc .[def.]`. 也就是说，转义适用于标准反斜杠以外的字符。

在这一点上，我不知道如何进行。我该怎么做才能真正给我想要的替代品？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T10:12:30.917

好的，找到答案了。显然，我需要在替换中双重转义反斜杠。此外，我需要`E`在旧版本的 postgres（在我的情况下为 8.3）的搜索模式中添加 -prefix 和双转义反斜杠。最终代码如下所示：

```
regexp_replace('abc [def]', E'([\\[\\]\\(\\)\\\\\?\\|_%])', E'\\\\\\1', 'g') 
```

是的，它看起来很可怕，但它有效:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-14T08:41:34.270

这是最简单的方法

```
select regexp_replace('abc [def]', '([\[\]\(\)\\])', '\\\1', 'g') 
```

# php - preg_replace 文本突出显示以忽略 URL

> ID：12088276
> 
> 赞同：0
> 
> 时间：2012-08-23T09:05:46.227
> 
> 标签：php, preg-replace

我正在使用 preg_replace 突出显示搜索结果中的单词。搜索结果有时还包含 URL，而不仅仅是文本。一些 URL 包含关键词。然后由于 preg_replace 也会更改 URL，因此 URL 会变得混乱。

有什么方法可以忽略 preg_replace 中的 URL？

这就是我使用的：

`$result = preg_replace('!('.$keyword.')!i', '<span style="background: #f00;">$1</span>', $result);`

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:20:20.177

编辑..
好吧，这有帮助吗？
将结果设为数组，然后检查它是否包含 url？

```
 <?php
    $result = "This is Stpartāāa http://google.lv ";
    $arr = explode(" ", $result);
    foreach($arr as $key => $value) {
        if ((strpos($value,'http://') !== false) AND (strpos($value,'www.') !== false)) {
                // do nothing
            } else {
                // do somthing
            }
    }
    ?> 
```

# ios - 我正在拖动一个 UItableView。如何找到内容偏移量

> ID：12088277
> 
> 赞同：-1
> 
> 时间：2012-08-23T09:05:46.843
> 
> 标签：ios, uitableview, uiscrollview

我有一个标准的 UITableViewContoller。可以看到 UITableView 的初始位置。

![初始位置](../Images/9a44e4e42cedcd38a41ca8989fc8f492.png)

当我拖动 UITableView 时，您可以看到偏移量。拖动时是否可以找到偏移量？当我结束拖动时，我可以找到一个偏移量。拖动时如何找到偏移量？

![在此处输入图像描述](../Images/cf951fadf5be9159e5d8235c5d884d78.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:17:37.023

因为 UITableView 是 UIScrollView 的子类，所以您可以简单地在控制器上使用 UIScrollViewDelegate 协议。如果它已经是 tableview 委托，则只需添加此协议，并使用该方法`scrollViewDidScroll:`

每次用户将桌子轻轻拉下时，都会调用此方法。在那里你可以像你已经做的那样获得内容偏移量:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:32:38.100

代表没有提供太多信息。观察者是更好的解决方案。

```
[self.tableView addObserver:self forKeyPath:@"contentOffset" options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld context:nil]; 
```

[类似的话题](https://stackoverflow.com/questions/12087848/is-it-possible-to-add-observer-to-tableview-contentoffset)

# c# - 并非所有代码路径都返回值错误

> ID：12088279
> 
> 赞同：-1
> 
> 时间：2012-08-23T09:06:00.877
> 
> 标签：c#, asp.net

我的 CS 文件出现编译错误。我有一个创建用户凭据的 JSON 对象的方法。

```
public string CreateLoginjson(string strErrorType, bool blIsAuthenticated)
        {

            StringBuilder sbLoginJson = new StringBuilder();
            if (blIsAuthenticated)
            {
                sbLoginJson.Append("{LoginSuccess:1");
            }
            else
            {
                sbLoginJson.Append("{LoginSuccess:0");
            }

            if (strErrorType != string.Empty)
            {
                if (strErrorType.TrimEnd(new char[] { ',' }) == "Token" || strErrorType.TrimEnd(new char[] { ',' }) == "BlankToken")
                {
                    sbLoginJson.Append(",txtTestTokenNumber1:\"Error\"");
                    sbLoginJson.Append(",txtTestTokenNumber2:\"Error\"");
                    sbLoginJson.Append(",txtTestTokenNumber3:\"Error\"");
                    sbLoginJson.Append(",txtTestTokenNumber4:\"Error\"");

                }

                if (strErrorType.TrimEnd(new char[] { ',' }) == "Password" || strErrorType.TrimEnd(new char[] { ',' }) == "BlankPassword")
                {
                    sbLoginJson.Append(",txtPassword:\"Error\"");

                }

                if (strErrorType.TrimEnd(new char[] { ',' }) == "UserName" || strErrorType.TrimEnd(new char[] { ',' }) == "BlankUserName")
                {
                    {
                        sbLoginJson.Append(",UserName:\"Error\"");

                    }
                    string strLoadErrorControlMessage = LoadErrorControl(strErrorType, string.Empty);

                    if (strLoadErrorControlMessage != string.Empty)
                    {
                        PageTestApplicationLogin objPageTestApplicationLogin = new PageTestApplicationLogin(objClientConfiguration);
                        sbLoginJson.Append(",ErrorMessage:'" + objPageTestApplicationLogin.GetTestApplicationLoginErrorHtml("", strLoadErrorControlMessage).Replace("'", "\"") + "'");

                    }

                }
                sbLoginJson.Append("}");

                var LoginJson = sbLoginJson.ToString();
                return LoginJson;

            }
        } 
```

我是否应该将 return 语句放在其他地方，因为我觉得这就是导致此错误的原因？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:08:05.037

你测试`if (strErrorType != string.Empty)`。但是如果条件是`false`呢？在这种情况下，您的方法返回什么？没有什么。

这就是导致编译错误的原因。你**必须**返回一些东西，即使它是`null`.

或者，您也可以引发异常。例如，您可以添加：

```
else {
    throw new ArgumentException("strErrorType", "strErrorType cannot be empty");
} 
```

更进一步，简单地解决编译问题，你的方法应该做什么？您测试 strErrorType 变量的空性。应该禁止吗？如果是，则抛出异常。如果否，则返回一个足够的值（`null`可能）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:08:20.223

如果这不是真的，那么该方法不会返回。

```
if (strErrorType != string.Empty) 
```

所以一定要在最后做点什么，也许是抛出异常或返回一些东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:09:05.753

仅当满足某些条件时，您的方法才会返回某些内容`(if (strErrorType != string.Empty))`。如果不满足该条件，它也应该返回一些东西。换句话说，如果一个方法有返回类型，它在任何情况下都*必须返回一些东西。*除非抛出异常...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T09:09:57.103

公共字符串 CreateLoginjson（字符串 strErrorType，布尔 blIsAuthenticated）{

```
 StringBuilder sbLoginJson = new StringBuilder();
        if (blIsAuthenticated)
        {
            sbLoginJson.Append("{LoginSuccess:1");
        }
        else
        {
            sbLoginJson.Append("{LoginSuccess:0");
        }

        if (strErrorType != string.Empty)
        {
            if (strErrorType.TrimEnd(new char[] { ',' }) == "Token" || strErrorType.TrimEnd(new char[] { ',' }) == "BlankToken")
            {
                sbLoginJson.Append(",txtTestTokenNumber1:\"Error\"");
                sbLoginJson.Append(",txtTestTokenNumber2:\"Error\"");
                sbLoginJson.Append(",txtTestTokenNumber3:\"Error\"");
                sbLoginJson.Append(",txtTestTokenNumber4:\"Error\"");

            }

            if (strErrorType.TrimEnd(new char[] { ',' }) == "Password" || strErrorType.TrimEnd(new char[] { ',' }) == "BlankPassword")
            {
                sbLoginJson.Append(",txtPassword:\"Error\"");

            }

            if (strErrorType.TrimEnd(new char[] { ',' }) == "UserName" || strErrorType.TrimEnd(new char[] { ',' }) == "BlankUserName")
            {
                {
                    sbLoginJson.Append(",UserName:\"Error\"");

                }
                string strLoadErrorControlMessage = LoadErrorControl(strErrorType, string.Empty);

                if (strLoadErrorControlMessage != string.Empty)
                {
                    PageTestApplicationLogin objPageTestApplicationLogin = new PageTestApplicationLogin(objClientConfiguration);
                    sbLoginJson.Append(",ErrorMessage:'" + objPageTestApplicationLogin.GetTestApplicationLoginErrorHtml("", strLoadErrorControlMessage).Replace("'", "\"") + "'");

                }

            }
            sbLoginJson.Append("}");

            var LoginJson = sbLoginJson.ToString();
            return LoginJson;

        }

return ""; // need it
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T09:54:49.110

除了解决您的问题的所有答案之外，我只想添加一些有用的信息。

而不是检查`strErrorType != string.Empty`，您应该强烈考虑`String.IsNullOrEmpty(strErrorType)`或至少在某些时候检查 strErrorType != null 。

原因是如果`strErrorType`为空，它将通过您当前的测试，并且您将尝试在空字符串上调用方法，这将引发异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T09:07:52.617

你是对的，错误正在发生，因为如果代码没有输入第二条`if`语句，它将永远不会命中返回语句。

我会这样做；

```
public string CreateLoginjson(string strErrorType, bool blIsAuthenticated)
        {

            StringBuilder sbLoginJson = new StringBuilder();
            if (blIsAuthenticated)
            {
                sbLoginJson.Append("{LoginSuccess:1");
            }
            else
            {
                sbLoginJson.Append("{LoginSuccess:0");
            }

            if (strErrorType != string.Empty)
            {
               //All your error code here

            }

            var LoginJson = sbLoginJson.ToString();
            return LoginJson;
        } 
```

注意最后两行在`IF`语句之外的位置

# java - BigDecimal - 将不变量与 DecimalFormat 进行比较

> ID：12088281
> 
> 赞同：1
> 
> 时间：2012-08-23T09:06:07.500
> 
> 标签：java, bigdecimal

我使用 ###,###.## 格式生成一个 BIgDecimal，结果为 660,000.00，然后我尝试将其与 a 进行比较，`new BigDecimal(660000.00)`但每次都返回 false。有没有办法将不变的值与它们创建的初始格式进行比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:18:33.557

这是因为两者的规模*不同*`BigDecimals`：

```
System.out.println(new BigDecimal("660000.00").scale()); // 2
System.out.println(new BigDecimal(660000.00).scale());   // 0 
```

要在不考虑规模的情况下比较它们，您可以执行以下操作：

```
BigDecimal bd1 = new BigDecimal("660000.00");
BigDecimal bd2 = new BigDecimal(660000.00);

int s = Math.max(bd1.scale(), bd2.scale());
.. bd1.setScale(s).equals(bd2.setScale(s)) ..   // == true. 
```

* * *

**旁注：**请注意双字面值（例如`.1`，例如）并不代表实际值 .1，而是它的近似值。（这是由于浮点表示不准确。）这可以通过做

```
System.out.println(new BigDecimal(.1)); 
```

打印 0.10000000000000000055511151231257827021181583404541015625

但是，`new BigDecimal(".1")`确实确实代表了 0.1，这就是为什么

```
new BigDecimal(.1).equals(new BigDecimal(".1")) 
```

是假的。

# android - 我正在编写 android 应用程序我遇到异常，我无法解决

> ID：12088283
> 
> 赞同：0
> 
> 时间：2012-08-23T09:06:18.937
> 
> 标签：android

这是我的代码，我遇到了异常，我无法解决请帮助我，我正在尝试使用 webservice 做 android 应用程序。使用 gateOut 方法计算今天有多少船门

```
package com.example.marport;

import java.io.IOException;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.SoapFault;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class LimanBilgileri extends Activity
{
    /** Called when the activity is first created. */

    final static String NAMESPACE = "http://webservice.marport.dcat.com/";
    // Web servis üzerinde hangi metodu kullanacağımızı ayarlıyoruz.
    final static String METHOD_NAME = "gateOut";
    // SOAP_ACTION : NAMESPACE ve METHOD_NAME birleşiminden oluşuyor.
    final static String SOAP_ACTION = "http://webservice.marport.dcat.com/gateOut";
    // Son olarak Web servise ait URL tanımlamasını burada yapıyoruz.
    final static String URL = "192.168.1.164:8070/test/services/MarportWebServicePort";

    private TextView sonuc;
    private EditText deger;
    private Button hesapla;
    private TextView debug;

    public void onCreate(Bundle savedInstanceState)
    {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.limanbilgileri);
       debug=(TextView)findViewById(R.id.textView3);

       deneme den=new deneme();
       den.execute();

}

    public class deneme extends AsyncTask<String, String, String>{
        private final ProgressDialog dialog = new ProgressDialog(LimanBilgileri.this);

        String result=null; 
        protected void onPostExecute(String unused) {

          this.dialog.dismiss();
            debug.setText("sonuc " +unused);
       }
        protected void onPreExecute() {
            this.dialog.setMessage("Yükleniyor...");
            this.dialog.show();

          }
        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub

            SoapObject Request=new SoapObject(NAMESPACE,METHOD_NAME);
              //Request.addProperty();
              SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
              soapEnvelope.dotNet=false;
              soapEnvelope.setOutputSoapObject(Request);
              HttpTransportSE aht=new HttpTransportSE(URL);
              try {
                aht.call(SOAP_ACTION, soapEnvelope);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (XmlPullParserException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
              try {
                 result= soapEnvelope.getResponse().toString();

            } catch (SoapFault e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return result;
        }

    }
} 
```

这里有例外

```
08-16 12:43:42.867: E/AndroidRuntime(2892): FATAL EXCEPTION: AsyncTask #1
08-16 12:43:42.867: E/AndroidRuntime(2892): java.lang.RuntimeException: An error occured while executing doInBackground()
08-16 12:43:42.867: E/AndroidRuntime(2892):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
08-16 12:43:42.867: E/AndroidRuntime(2892):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-16 12:43:42.867: E/AndroidRuntime(2892):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-16 12:43:42.867: E/AndroidRuntime(2892):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-16 12:43:42.867: E/AndroidRuntime(2892):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-16 12:43:42.867: E/AndroidRuntime(2892):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
08-16 12:43:42.867: E/AndroidRuntime(2892):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
08-16 12:43:42.867: E/AndroidRuntime(2892):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
08-16 12:43:42.867: E/AndroidRuntime(2892):     at java.lang.Thread.run(Thread.java:856)
08-16 12:43:42.867: E/AndroidRuntime(2892): Caused by: java.lang.NullPointerException
08-16 12:43:42.867: E/AndroidRuntime(2892):     at org.ksoap2.serialization.SoapSerializationEnvelope.getResponse(SoapSerializationEnvelope.java:552)
08-16 12:43:42.867: E/AndroidRuntime(2892):     at com.example.marport.LimanBilgileri$deneme.doInBackground(LimanBilgileri.java:90)
08-16 12:43:42.867: E/AndroidRuntime(2892):     at com.example.marport.LimanBilgileri$deneme.doInBackground(LimanBilgileri.java:1)
08-16 12:43:42.867: E/AndroidRuntime(2892):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
08-16 12:43:42.867: E/AndroidRuntime(2892):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-16 12:43:42.867: E/AndroidRuntime(2892):     ... 5 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:14:26.127

异常在这里生成：

```
result= soapEnvelope.getResponse().toString(); 
```

可能你在那条线之前做错了什么。例如，soapEnvelope 可能没有正确初始化。还是必须先执行请求？

更确切地说，错误在**SoapSerializationEnvelope.java:552**中（由上面的这个调用执行）。但由于您没有发布此文件，我们无法检查。

- - 编辑 - -

我在这里找到了这个文件的一个版本：[http](http://code.google.com/p/salesforceandroid/source/browse/trunk/SalesforceAndroid/src/org/ksoap2/serialization/SoapSerializationEnvelope.java?r=93) ://code.google.com/p/salesforceandroid/source/browse/trunk/SalesforceAndroid/src/org/ksoap2/serialization/SoapSerializationEnvelope.java?r=93 ；似乎是该文件的不同版本（因为没有行号 552）；但是有一个方法getResonse()：

```
public Object getResponse() throws SoapFault {
    if (bodyIn instanceof SoapFault) {
        throw (SoapFault) bodyIn;
    }
    KvmSerializable ks = (KvmSerializable) bodyIn;
    return ks.getPropertyCount() == 0 ? null : ks.getProperty(0);
} 
```

这应该产生空指针异常的唯一原因是“bodyIn”（内部变量）为空。此变量在 parseBody() 方法或该对象的 parseXml() 中初始化。所以必须先调用这个，才能成功执行getResponse();

或者：如果这部分由您维护......变量“bodyIn”必须在您的对象生命周期的其他地方初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:09:14.583

听起来您的服务不会从您的请求中返回任何内容。也许您应该确保您的 SOAP 请求是正确的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-13T12:17:39.180

也许这有帮助，对我来说工作：

```
if (android.os.Build.VERSION.SDK_INT > 9) 
{
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

见[Android http 连接异常](https://stackoverflow.com/questions/6976317/android-http-connection-exception)

# jquery - 灯箱 + jQuery 冲突

> ID：12088285
> 
> 赞同：1
> 
> 时间：2012-08-23T09:06:39.100
> 
> 标签：jquery, html, firefox, lightbox

`Lightbox`在我使用`jQuery`.. 进行选项卡导航后不再工作了。`Chrome`可视化很好，但是`Firefox`一团糟。

我做错了，因为`event.preventDefault();`并且没有工作（在单击选项卡控制器`return false`的锚点后，我不得不使用滚动返回页面底部）`a href="#id_name`

任何帮助，将不胜感激。

头：

```
 <!-- Lightbox + Prototype + jQuery -->     
 <script type="text/javascript" src="js/prototype.js"></script>
 <script type="text/javascript" src="js/scriptaculous.js?load=effects,builder"></script>
 <script type="text/javascript" src="js/lightbox.js"></script>
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
 <script type="text/javascript">
      if (typeof jQuery == 'undefined') { document.write(unescape("%3Cscript src='js/jquery-1.8.0.min.js' type='text/javascript'%3E%3C/script%3E")); }
 </script> 
```

用于标签导航的 jQuery：

```
 <script type="text/javascript">
    $(document).ready(function() {
        //Default Action
        $(".tab_content").hide(); //Hide all content
        $("ul.bmenu li:first").addClass("active").show(); //Activate first tab
        $(".tab_content:first").show(); //Show first tab content                     

        //On Click Event
        $("ul.bmenu li").click(function(event) {
            event.preventDefault(); //non impedisce di scrollare to Top
            $("html, body").animate({ scrollTop: $(document).height() }, "slow");
            $("ul.bmenu li").removeClass("active"); //Remove any "active" class
            $(this).addClass("active"); //Add "active" class to selected tab
            $(".tab_content").hide(); //Hide all tab content
            var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
            $(activeTab).fadeIn(); //Fade in the active content
            return false; //non impedisce di scrollare to Top
        });                                  
    });
</script> 
```

一些 HTML：

```
<div class="tab_content content" id="tab2">
    <div class="images_grid"> <!-- images_grid_collezione -->
        <!-- Riga 1 -->
        <a href="imgs_grid/Rosso_01.png" rel="lightbox[medardo_rosso]"><img class="grid_img" src="imgs_grid/Rosso_01.png" alt="" /></a>
        <a href="imgs_grid/Rosso_02.png" rel="lightbox[medardo_rosso]"><img class="grid_img" src="imgs_grid/Rosso_02.png" alt="" /></a> 
```

[我将网站上传到这里](http://www.picbattle.net/websites/Sito%20Medardo%20Rosso%20IN_PROGRESS/index_Tabs.html)的临时目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:08:20.037

放在 `<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>` 标题的第一行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:10:23.547

问题是您`jquery`在 jquery 之前包含了 at last 和其他依赖于 jquery 的库。订单确实很重要，一开始就包括它，你应该没问题

```
 <script type="text/javascript" src="js/prototype.js"></script>   
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
 <script type="text/javascript" src="js/lightbox.js"></script>
 <script type="text/javascript">
        if (typeof jQuery == 'undefined') { document.write(unescape("%3Cscript src='js/jquery-1.8.0.min.js' type='text/javascript'%3E%3C/script%3E")); }
 </script>
 <script type="text/javascript" src="js/scriptaculous.js?load=effects,builder"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T21:25:18.563

我通过使用 jQuery noConflict 模式解决了它。长话短说：原型短符号“$”与 jQuery 短符号“$”冲突。

在脚本的开头添加“jQuery.noConflic()”并将“$”替换为“jQuery”或简单地添加一个变量（我使用了“j”）。

`$j(document).ready(function() { $j(".tab_content").hide(); //Some Other actions ...`

问题解决了。谢谢大家的帮助！:)

# java - 数据源拒绝建立连接，来自服务器的消息：“连接太多”

> ID：12088292
> 
> 赞同：3
> 
> 时间：2012-08-23T09:07:04.300
> 
> 标签：java, mysql, spring, hibernate, jakarta-ee

我正在使用 hibenate 和 spring，并且在我们从 jmeter 击中 250 个用户的情况下低于异常

> “原因：com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException：数据源拒绝建立连接，来自服务器的消息：“连接太多”

hibernate_cfg.xml

```
<property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/my_db</property>
    <property name="hibernate.connection.username">user1</property>
    <property name="hibernate.connection.pool_size">1</property>
    <property name="hibernate.c3p0.min_size">5</property>
    <property name="hibernate.c3p0.max_size">50</property>
    <property name="hibernate.c3p0.timeout">300</property>
    <property name="hibernate.c3p0.max_statements">500</property>
    <property name="hibernate.c3p0.idle_test_period">3000</property>
    <property name="hibernate.current_session_context_class">thread</property>
    <property name="hibernate.hbm2ddl.auto">update</property>` 
```

春天

```
<bean id="dataSource" scope="prototype" class="org.springframework.jdbc.datasource.DriverManagerDataSource"> 
    <property name="driverClassName">
        <value>${dbDriver}</value>
    </property>  
    <property name="url">
        <value>${dbURL}</value> 
    </property>
    <property name="username">
        <value>${dbUsername}</value>
    </property>
    <property name="password">
        <value>${dbPassword}</value>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T09:21:28.393

这是来自服务器的消息，因此，我将检查服务器报告的已连接客户端的数量。如果这是一个预期的数字，比如 500 左右，那么我会增加服务器上的这个限制，如果你真的希望你的应用程序有那个级别的并发。否则，请减少客户端数量。

关于它如何工作的一些背景知识：每个客户端都是服务器上的一个线程，每个线程将至少消耗一个连接。如果你做得对，一旦线程完成，连接将返回到池中（即：一旦响应发送到客户端）。因此，在最好的情况下，如果您连接了大约 500 个用户，您将拥有 500 个连接。如果看到的数字接近并发用户数的倍数（即：2 个用户，4 个连接），那么您可能每个线程消耗了多个连接（这是您不使用提供的数据源所付出的代价您的应用程序服务器，如果您使用的是一个）。如果您看到一个非常高的数字（例如，用户数量的 10 倍），那么您可能在某处存在连接泄漏。如果您忘记关闭连接，可能会发生这种情况。

我真的建议使用由您的应用程序服务器管理的 EntityManager，并使用它也提供的 DataSource。然后，您不必担心管理连接池。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-15T11:29:42.163

我认为您的问题是您的数据源没有连接池。来自 org.springframework.jdbc.datasource.DriverManagerDataSource javadocs：

> **注意：这个类不是一个实际的连接池；它实际上并没有 * 池连接。**

在该类的 javadocs 中也说使用 Apache 的 Jakarta Commons DBCP，以防您确实需要连接池。

> 如果您需要 J2EE 容器之外的“真实”连接池，请考虑 [Apache 的 Jakarta Commons DBCP](http://jakarta.apache.org/commons/dbcp) 或 C3P0。Commons DBCP 的 BasicDataSource 和 C3P0 的 ComboPooledDataSource 是全连接池 bean，支持与此类相同的基本属性以及特定设置（例如最小/最大池大小等）。

我用过它，它就像一个魅力:)

希望我有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:27:46.660

如果每次都创建连接可能会导致此问题。解决方法很简单。单上。每个 sessin 的连接。所以我在我的帖子底部发布了一些代码。检查不正确和正确的编码。1-不正确，2-正确

```
private  EntityManagerFactory emf = null;

@SuppressWarnings("unchecked")
public BaseDAO() {

        emf = Persistence.createEntityManagerFactory("aaHIBERNATE");
        persistentClass = (Class<T>) ((ParameterizedType) getClass()
                .getGenericSuperclass()).getActualTypeArguments()[0];

}

private static EntityManagerFactory emf = null;

@SuppressWarnings("unchecked")
public BaseDAO() {

    if (emf == null) {
        emf = Persistence.createEntityManagerFactory("aaHIBERNATE");}
        persistentClass = (Class<T>) ((ParameterizedType) getClass()
                .getGenericSuperclass()).getActualTypeArguments()[0];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T09:16:20.140

您需要在应用程序和数据库服务器中跟踪它。

1.  检查数据库配置以获取可能的最大打开连接数。
2.  如果您正在使用来自其他客户端的数据库连接，请检查数据库服务器中当前打开的连接。
3.  如果您打开太多连接而不是关闭它们，请检查您的应用程序。

您需要在数据库服务器设置中增加 max open connections 的值。

要更改最大打开连接数，您需要在数据库服务器下的 my.cnf 文件中进行`max_connections`编辑`max_user_connections`。

您还可以授予/编辑每个用户的最大连接数。[更多信息在这里](http://dev.mysql.com/doc/refman/5.0/en/user-resources.html)

# rest - jMeter 签名 URL 和哈希

> ID：12088294
> 
> 赞同：2
> 
> 时间：2012-08-23T09:07:17.167
> 
> 标签：rest, jmeter

我们正在处理一项时间紧迫的任务，需要使用 jMeter 为 REST WS 编写性能脚本。

REST API 采用身份验证标头。此身份验证标头具有：

1.  一个签名的 URL（REST API 本身的）。
2.  在 POST 正文中发送的所有内容的哈希值。

我们想要一个 jMeter 脚本，以便它可以：

1.  从 Excel 表或 java 方法等中读取 POST 正文的内容，因为每次登录都必须更改帖子正文的内容。
2.  每次正文内容更改时创建 POST 正文的哈希，并在 auth 标头中使用此哈希。
3.  签署 URL 并在 auth 标头中使用它。

我的问题是：

1.  以上都可以实现吗？这是我想知道的最低限度，以便我知道我是否需要花更多时间在这上面。
2.  做这个的最好方式是什么？
3.  我假设 POST 正文和 auth 标头的内容都可以是动态的。它是否正确？如果没有，我们根本无法编写此脚本。

我知道的唯一 jMeter 是评论中的内容。在给定的时间内得到我所有的答案是不可能的。

任何答案，帮助，指针都会有所帮助。

感谢您阅读本文-在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:33:30.947

1.  是的，可能。我们做过类似的事情。
2.  两种可能的选择是：
    *   使用 beanshell 预处理器
    *   使用自定义函数

我们选择了后者，因为它更好地使用内存

3\. 是的，您可以传入 vars 以使每个请求都不同。获取数据的一种方法是使用 CSV 数据配置控件。

# android - Android中的自定义对话框警报没有提示

> ID：12088298
> 
> 赞同：0
> 
> 时间：2012-08-23T09:07:29.250
> 
> 标签：android, android-intent, android-widget, dialog, customdialog

以下是我为 2 个对话框创建的代码：即日期选择器和提交 2 个按钮时的自定义对话框，即 btnselDate 和 btnAlertDialog。

日期选择器对话框工作正常，但自定义对话框存在一些问题。我的自定义对话框显示用户的登录表单。

请检查它并提出适当的建议。

代码如下：

```
 public void onClick(View view)
    {
        if(view.getId() == R.id.btnselDate)
        {
            // Date Picket DialogBox

            showDialog(1);
        }
        else if(view.getId()==R.id.btnAlertDialog)
        {
            // Alert Dialog Box

            Context mContext = getApplicationContext();
            Dialog dialog = new Dialog(mContext);

            dialog.setContentView(R.layout.custom_activity);
            dialog.setTitle("Custom Dialog");

            TextView text = (TextView) dialog.findViewById(R.id.tvPwd);
            text.setText("Enter the Password");

            final EditText pwd=(EditText) dialog.findViewById(R.id.etPwd);

            Button btnlogin=(Button) dialog.findViewById(R.id.btnOK);

            btnlogin.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    //Login Button

                    if(pwd.getText().toString().equals("abc"))
                    {
                        Intent intent=new Intent(MainActivity.this,WelcomeUser.class);
                        startActivity(intent);
                    }
                    else
                    {
                        Toast.makeText(MainActivity.this, "Wrong Password, Try Again", Toast.LENGTH_SHORT).show();
                    }

                }
            });
        }
        else
        {
            Toast.makeText(MainActivity.this, "No Dialog Selected yet", Toast.LENGTH_SHORT).show();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:14:09.293

而不是这个

```
 dialog.setContentView(R.layout.custom_activity); 
```

对于对话框的自定义布局，您必须充气布局检查代码here

```
 LayoutInflater factory = LayoutInflater.from(this);
    final View textEntryView = factory.inflate(R.layout.alert_dialog_text_entry, null);
    return new AlertDialog.Builder(AlertDialogSamples.this)
        .setIcon(R.drawable.alert_dialog_icon)
        .setTitle(R.string.alert_dialog_text_entry)
        .setView(textEntryView)
        .setPositiveButton(R.string.alert_dialog_ok, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {

                /* User clicked OK so do some stuff */
            }
        })
        .setNegativeButton(R.string.alert_dialog_cancel, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {

                /* User clicked cancel so do some stuff */
            }
        })
        .create(); 
```

# unit-testing - Mockito 捕获回调消息

> ID：12088307
> 
> 赞同：1
> 
> 时间：2012-08-23T09:08:01.387
> 
> 标签：unit-testing, mocking, mockito

我有一个模拟回调对象

```
Callback callback = mock(Callback.class); 
```

这个对象有两个方法，`done()`和`failed(String msg)`。

我做一个

```
verify(callback).done(); 
```

看到它`done()`被调用了，但是当事情没有那么好并且`failed(String msg)`被调用时，我该如何打印`msg`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:25:45.350

您可以使用[ArgumentCaptor](https://static.javadoc.io/org.mockito/mockito-core/2.8.47/org/mockito/ArgumentCaptor.html)来捕获`msg`验证时`failed()`调用的内容，例如在您可以定义的测试类中：

```
@Mock private Callback mockCallback;
@Captor private ArgumentCaptor<String> stringCaptor; 
```

并在测试本身：

```
verify(mockCallback).falied(stringCaptor.capture());

final List<String> capturedMessages = stringCaptor.getAllValues();
final String actualMsg = capturedMessages.get(0);
final String expectedMsg = "foo";

assertEquals(expectedMsg, actualMsg); 
```

注意：`@Captor`注解是在 mockito v1.8.3 中引入的。如果您使用的是之前的版本，上面链接的 API 中有一个先前语法的示例。

# c - OpenGL - 屏幕上没有出现任何内容

> ID：12088308
> 
> 赞同：2
> 
> 时间：2012-08-23T09:08:02.553
> 
> 标签：c, opengl

我正在使用带有 VC++ 2010 的 Windows 7

我正在尝试在屏幕上绘制一个简单的点，但它没有显示。屏幕变黑了，所以我知道我有一个有效的 OpenGL 上下文等...

基本上，我的 OpenGL 代码归结为这一点（此时我没有深度缓冲区）：

```
glClear( GL_COLOR_BUFFER_BIT );

glMatrixMode( GL_PROJECTION );
glLoadIdentity();
gluPerspective( 45.0, 1018.0 / 743.0, 5.0, 999.0 );
glMatrixMode( GL_MODELVIEW );
glLoadIdentity();

glColor4f( 1, 1, 1, 1 );
glPointSize( 100 );
glBegin( GL_POINTS );
glVertex2i( 0, 0 );
glEnd();

SwapBuffers( hdc ); 
```

OpenGL的初始化代码是这样的：

```
glClearColor( 0, 0, 0, 1 );
glShadeModel( GL_SMOOTH );
glHint( GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST ); 
```

问题是屏幕上什么都没有出现，唯一发生的就是屏幕被清除了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T09:25:18.450

浏览以下清单（这是[来自 delphigl.com](http://wiki.delphigl.com/index.php/Checkliste_Allgemein) (de_DE) 的通用 opengl 清单，我们通常让人们在看不到任何东西时进行检查）：

*   您的对象是否不小心涂成黑色？尝试并更改`glClearColor`.
*   您是否意外启用了纹理？在使用 绘制之前禁用它`glDisable(GL_TEXTURE_2D)`。
*   尝试禁用以下测试：
    *   GL_DEPTH_TEST
    *   GL_CULL_FACE
    *   GL_ALPHA_TEST
*   检查您`glViewport`的设置是否正确。
*   尝试将您的模型视图矩阵翻译出近剪裁平面（在您的情况下为 5.0）`glTranslatef(0, 0, -6.0)`

* * *

有几个潜在的问题。主要问题是您如何使用[`gluPerspective`](https://www.opengl.org/sdk/docs/man/xhtml/gluPerspective.xml)投影。`gluPerspective`用于透视视图，因此，它不会在视图坐标的 (0, 0, 0) 处显示任何内容。在您的设置中，您禁止在视图坐标（剪裁平面附近）中显示 (0, 0, 5) 之前的任何内容。我建议将您的观点设置为`glVertex3f(0., 0., 10.)`并重试。另一种解决方案是使用`glTranslatef`将您的视图坐标移动超过 5 个单位。

也`glPointSize`可能不会接受您的值`100`，因为常见的实现限制为 64 点大小。

对于 OpenGL 的良好开端，我还建议阅读[Nehes 教程](http://nehe.gamedev.net/tutorial/lessons_01__05/22004/)。它们可能不是最先进的，但涵盖了您现在面临的任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:25:00.690

问题是因为我调用 glDepthRange 误解了它的实际作用，我这样称呼它：`glDepthRange( nearPlane, farPlane )`. （这是 5.0f 和 999.0f）当我删除这个调用时，一切都能够正确绘制。非常感谢您的帮助。:)

# ruby-on-rails-3.2 - Rails 无法解析 YAML（Psych::SyntaxError）

> ID：12088311
> 
> 赞同：0
> 
> 时间：2012-08-23T09:08:07.620
> 
> 标签：ruby-on-rails-3.2, yaml, omniauth

我在 Rails 3.2 中创建一个 Rails 应用程序，我正在尝试使用 gem **'omniauth-twitter'实现****twitter 登录**。我已经安装了相同的 gem。现在我尝试在 Rails的**/config/app.yml中添加我的 twitter 凭据：**

 ****```
config/app.yml

development: &default
 s3_bucket_name: xxxx
 aws_access_key_id: xxxx
 aws_secret_access_key: xxxx
 cloud_made_key: xxxx
 facebook_key: "xxxxx"
 facebook_secret: 'xxxxxxx'
 twitter_consumer_key: "xxxx"
 twitter_consumer_secret: "xxxxx" 
```

当我重新启动服务器时，出现以下错误：

```
 error
/home/swati/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/psych.rb:148:in `parse': couldn't parse YAML at line 8 column 0 (Psych::SyntaxError)
from /home/swati/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/psych.rb:148:in `parse_stream'
from /home/swati/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/psych.rb:119:in `parse'
from /home/swati/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/psych.rb:106:in `load'
from /home/swati/projects/hackathon-io/config/application.rb:77:in `<class:Application>'
from /home/swati/projects/hackathon-io/config/application.rb:13:in `<module:HackathonIo>'
from /home/swati/projects/hackathon-io/config/application.rb:12:in `<top (required)>'
from /home/swati/.rvm/gems/ruby-1.9.2-p290@hackathon-io/gems/railties-3.2.6/lib/rails/commands.rb:53:in `require'
from /home/swati/.rvm/gems/ruby-1.9.2-p290@hackathon-io/gems/railties-3.2.6/lib/rails/commands.rb:53:in `block in <top (required)>'
from /home/swati/.rvm/gems/ruby-1.9.2-p290@hackathon-io/gems/railties-3.2.6/lib/rails/commands.rb:50:in `tap'
from /home/swati/.rvm/gems/ruby-1.9.2-p290@hackathon-io/gems/railties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我搜索了一个解决方案，发现了同样的问题并实现了[rails error, could't parse YAML](https://stackoverflow.com/questions/4980877/rails-error-couldnt-parse-yaml)中指定的答案。

```
/config/boot.rb

 require 'yaml'
 YAML::ENGINE.yamler = 'syck' 
```

我重新启动服务器并再次收到错误：

```
`/home/swati/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/syck.rb:135:in `load': syntax error on line 8, col 22: `   twitter_consumer_key: "xxxxx"' (ArgumentError)
from /home/swati/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/syck.rb:135:in `load'
from /home/swati/projects/hackathon-io/config/application.rb:77:in `<class:Application>'
from /home/swati/projects/hackathon-io/config/application.rb:13:in `<module:HackathonIo>'
from /home/swati/projects/hackathon-io/config/application.rb:12:in `<top (required)>'
from /home/swati/.rvm/gems/ruby-1.9.2-p290@hackathon-io/gems/railties-      3.2.6/lib/rails/commands.rb:53:in `require'
from /home/swati/.rvm/gems/ruby-1.9.2-p290@hackathon-io/gems/railties-3.2.6/lib/rails/commands.rb:53:in `block in <top (required)>'
from /home/swati/.rvm/gems/ruby-1.9.2-p290@hackathon-io/gems/railties-3.2.6/lib/rails/commands.rb:50:in `tap'
from /home/swati/.rvm/gems/ruby-1.9.2-p290@hackathon-io/gems/railties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我无法弄清楚语法错误。请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-29T14:52:15.923

我遇到了同样的问题，并通过将所有制表符转换为空格并在脚本允许后删除多余的空格来解决它（如果您的代码中有的话，我几乎没有）。基本上删除了我的 yml 文件中的缩进，它解决了问题并启动了应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T17:20:55.423

我的一个 yaml 文件遇到了同样的错误，在看到上面关于制表符的马特建议后，我检查了我的编辑器（SublimeText）并切换到空格而不是制表符进行缩进，它解决了这个问题。****

# sql - 查询太复杂

> ID：12088312
> 
> 赞同：5
> 
> 时间：2012-08-23T09:08:13.587
> 
> 标签：sql, ms-access-2010

我正在尝试将一些计算从 Excel 移到我的 Access 数据库中，但是当我使用 5 个以上的输入值时，我遇到了“查询太复杂”错误。我应该拆分查询还是有更有效的解决方法？任何帮助，将不胜感激！这是代码：

```
SELECT qb1.CompanyName, qb1.Assetname, qb1.Year,
      ((qb1.DatapointValue*1000000)+qb2.DatapointValue+
        qb3.DatapointValue+qb4.DatapointValue+qb5.DatapointValue+
        qb6.DatapointValue) AS MPPOilRevised

FROM ((((((PEBaseQuery AS qb1 
INNER JOIN PEBaseQuery AS qb2 ON qb1.AssetName=qb2.AssetName) 
INNER JOIN PEBaseQuery AS qb3 ON qb1.AssetName=qb3.AssetName) 
INNER JOIN PEBaseQuery AS qb4 ON qb1.AssetName=qb4.AssetName) 
INNER JOIN PEBaseQuery AS qb5 ON qb1.AssetName=qb5.AssetName) 
INNER JOIN PEBaseQuery AS qb6 ON qb1.AssetName=qb6.AssetName))

WHERE qb1.DatapointID=2003 And qb2.DatapointID=2032 
      And qb3.DatapointID=2034 And qb4.DatapointID=2042 
      And qb5.DatapointID=2036 And qb6.DatapointID=2030; 
```

* * *

```
CompanyName, Year, AssetName, DatapointID, DatapointName,   DatapointValue 
CompanyA,    2011, CAAsset1,  2005,        OIL,             170883.740972926 
CompanyA,    2011, CAAsset1,  2032,        Wellwork,        615913 
CompanyA,    2011, CAAsset1,  2034,        Annual shutdown, 0 
CompanyA,    2011, CAAsset1,  2042,        Export,          0 
CompanyA,    2011, CAAsset1,  2036,        Plant,           958387 
CompanyA,    2011, CAAsset1,  2030,        Reservoir,       2394231 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:25:07.750

看起来您需要一个聚合查询，而不是这个复杂的查询。例如

```
select companyName, assetName, year, 
   Sum(DatapointValue) as MPPOilRevised
from PEBaseQuery 
where DatapointID in (2032, 2034, 2042, 2036)
group by companyName, assetName, year 
```

唯一的问题是第一个数据点乘以 1000000。你可以试试`IIF`：

```
select companyName, assetName, year, 
   Sum(IIf(DatapointID=2003,DatapointValue*1000000,DatapointValue)) as MPPOilRevised
from PEBaseQuery 
where DatapointID in (2032, 2034, 2042, 2036)
group by companyName, assetName, year 
```

也请尝试这样的“疯狂”查询，对这个特定的 DatapointID 进行子查询，没有`IIF`：

```
select companyName, assetName, year, SUM(DatapointValue) 
        + (select SUM(DatapointValue * 1000000) from  PEBaseQuery q2 
           where q2.companyName = q1.companyName 
              and q2.assetName= q1.assetName
              and q2.year= q1.year
              and q2.DatapointID = 2003
           group by companyName, assetName, year)
    from PEBaseQuery q1
    where DatapointID in (2032, 2034, 2042, 2036)
    group by companyName, assetName, year 
```

“生产最大潜力”的更新。请尝试以下操作：

```
select b.companyName, b.assetName, IIf(b.calculationResult > mp.calculationResult,b.calculationResult,mp.calculationResult)  as MPPOilRevised
from 
    (select companyName, assetName, year, Sum(IIf(DatapointID=2003,DatapointValue*1000000,DatapointValue)) as calculationResult
        from PEBaseQuery 
        where DatapointID in (2032, 2034, 2042, 2036) 
        group by companyName, assetName, year) b --Base
     left join 
     (select companyName, assetName, year, 
        Sum(DatapointValue) as calculationResult
        from PEBaseQuery 
        where DatapointID = 2218
        group by companyName, assetName, year) mp -- Max Potential
    on b.companyName= mp.companyName
        and b.assetName = mp.assetName
        and b.year = mp.year 
```

使用减法逻辑的计算示例。**更新**了最终的疯狂 SQL。另请注意，对于此类事情，我会使用应用程序逻辑或存储过程：

```
 select b.companyName, b.assetName, IIf(b.calculationResult > mp.calculationResult,b.calculationResult,mp.calculationResult)  as MPPOilRevised
from 
    (select companyName, assetName, year, SUM(DatapointValue) 
        + (select SUM(DatapointValue * 1000000) from  PEBaseQuery q2 
           where q2.companyName = q1.companyName 
              and q2.assetName= q1.assetName
              and q2.year= q1.year
              and q2.DatapointID = 2003
           group by companyName, assetName, year)
        - (select SUM(DatapointValue) from  PEBaseQuery q2 
           where q2.companyName = q1.companyName 
              and q2.assetName= q1.assetName
              and q2.year= q1.year
              and q2.DatapointID = 2029 
           group by companyName, assetName, year)
    from PEBaseQuery q1
    where DatapointID in (2032, 2034, 2042, 2036)
    group by companyName, assetName, year) b --Base
     left join 
     (select companyName, assetName, year, 
        Sum(DatapointValue) as calculationResult
        from PEBaseQuery 
        where DatapointID = 2218
        group by companyName, assetName, year) mp -- Max Potential
    on b.companyName= mp.companyName
        and b.assetName = mp.assetName
        and b.year = mp.year 
```

# database - 数据库同步方法

> ID：12088313
> 
> 赞同：0
> 
> 时间：2012-08-23T09:08:16.660
> 
> 标签：database, synchronization

我目前被分配为我的公司开发一个同步应用程序。我们的数据库服务器上有 SQL 服务器，它将与客户端数据库同步。客户端数据库是未知的，它们可以是 SQLite 或 MYSQL 或其他。

此同步应用程序的作用是检测服务器和客户端数据库上发生的更改。保存这些更改并同步。如果服务器数据库发生更改，它将与客户端数据库同步，反之亦然。

我对此进行了一些研究，并了解了许多解决方案。其中之一是使用 Microsoft Sync Framework。但是我几乎没有找到一个很好的与远程数据库同步的实现示例。

然后我在 SQL Server 2008 上遇到了更改数据捕获（CDC）。CDC 通过触发器检测源表上的更改并将这些更改放在一个名为 sync_table 的单独表上，然后将该表用于同步。

由于我的机器上没有足够的数据库权限，因此我无法使用 CDC 功能，因此我开始开发自己的解决方案，其工作方式与 CDC 类似。我为每个源表创建单独的同步表，创建触发器来检测数据更改并将这些数据放入同步表中。

但是，建议我对其进行更多研究，以选择最佳实施方法。

我需要记住以下几点，

*   数据库可能/可能不在同一网络上。
*   在服务器端，用户必须能够选择哪些表将参与同步过程。
*   需要先注册将与服务器数据库同步的设备。这意味着所有客户端设备都将由用户注册，然后才能开始同步。

像往常一样，任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:37:54.437

有一个名为 SymmetricDS 的开源项目具有许多相同的目标。查看[文档和数据模型](http://www.symmetricds.org/doc/3.1/html/user-guide.html "SymmetricDS 文档和数据模型")看看问题是如何解决的，也许你会得到一些想法。不是每个源表都有一个单独的影子表，而是有一个 sym_data 表，其中所有数据都以逗号分隔值格式捕获。优点是可以在一个地方查找捕获的数据并检索属于同一事务的更改。成功传输数据后，通过经常清除表来保持表较小。它使用 Web 协议 (HTTP) 进行数据传输。优点是利用现有的 Web 服务器进行性能、管理和通过防火墙进行已知过滤。在允许客户端同步之前，还使用了一个注册协议。服务器管理员为客户端 ID“打开注册”，允许客户端首次连接。它支持许多不同的数据库，所以你

# javascript - Fancybox 画廊重复图像

> ID：12088324
> 
> 赞同：0
> 
> 时间：2012-08-23T09:09:01.487
> 
> 标签：javascript, jquery, fancybox, image-gallery

我做了一个fancybox画廊，它适用于图像编号，但它显示相同的图像

例如，如果我有 5 张图片，我可以点击下 4 次，但会显示相同的图片，除非我打开另一张图片，否则它将适用于两张图片，依此类推

我使用了一些随机数来避免缓存，但是看着萤火虫没有错误，也没有发送请求来获取新图像

这是我的代码

```
<a href="path/to/image/1/?cashe='+Math.random()+'" class="aGalleryHolder" rel="galleryGroup" ><img src="path/to/image/1/" class="galleryItems2" /></a> 
```

并且 JS 尝试了两个不同的选择器和相同的结果

```
jQuery("a.aGalleryHolder").fancybox();
jQuery("a[rel=galleryGroup]").fancybox(); 
```

有任何想法吗 ？

[http://jsfiddle.net/5VZ6h/1/](http://jsfiddle.net/5VZ6h/1/)

这是让我发疯的 src

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:34:39.497

我认为弄乱原始的fancybox js文件是个坏主意，除非您知道自己在做什么。您的小提琴显示了原始文件的更改，特别是从第 792 行开始。

从 fancybox.net 的原始[fancybox js 文件](http://fancybox.net/js/fancybox-1.3.4/jquery.fancybox-1.3.4.js) 第 792 行说：

```
$(this)
 .data('fancybox', $.extend({}, options, ($.metadata ? $(this).metadata() : {})))
 .unbind('click.fb')
 .bind('click.fb', function(e) {
   e.preventDefault();
   ...etc 
```

您的编辑[http://jsfiddle.net/5VZ6h/1/](http://jsfiddle.net/5VZ6h/1/)：

```
$(this)
 .die('click.fb')
 .live('click.fb', function(e) {       
  $(this).data('fancybox', $.extend({}, options, ($.metadata ? $(this).metadata() : {})))
  e.preventDefault();
  ... etc 
```

一旦我用原始的 fancybox js 代码分叉了你的小提琴，它就可以正常工作。自己看：http: [//jsfiddle.net/jMWFp/3/](http://jsfiddle.net/jMWFp/3/)

# iphone - 检测 uitableviewcell 的哪一侧被点击：向左或向右

> ID：12088326
> 
> 赞同：0
> 
> 时间：2012-08-23T09:09:04.297
> 
> 标签：iphone, objective-c, xcode

是否可以区分 uitableview 中一行的哪一侧被点击？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  //which side of row has been detected left or right
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T09:19:36.077

你可以继承 UITableViewCell。在您的子类中，您可以创建一个 iVar `wasTouchOnLeft`。然后覆盖`touchesBegan`或`touchesEnded`像下面的例子：

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch=(UITouch *)[touches anyObject];
    if([touch locationInView:self].x< (0.5 * self.frame.size.width) )
    {
        NSLog(@"Touched Left");
        wasTouchOnLeft=YES;
    }
    else {
        NSLog(@"Touched Right");
        wasTouchOnLeft=NO;
    }
    [super touchesEnded:touches withEvent:event];
} 
```

`didSelectRowAtIndexPath`然后，您`UITableViewController`可以在其中访问`wasTouchOnLeft`单元格的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:16:40.957

您无法在此方法中直接确定这一点。但是如果你真的想要这个功能，可以创建一个自定义的 tableview 单元格，它有两个大按钮（一个在右侧，一个在左边），或者在单元格上应用一个触摸识别器。

如果您将此操作委托给您的控制器（您也可以将其存储在单元格中并通过它访问）

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  if(((YourCustomTableCell*)[tableView cellForRowAtIndexPath:indexPath]).clickedSideProperty) action;
else anotherAction;
} 
```

但最好从表格单元格委派它而不是从 didSelectRow 访问它......</p>

# asp.net - 如何将 FlexPaper 与 Asp.Net 集成

> ID：12088328
> 
> 赞同：0
> 
> 时间：2012-08-23T09:09:04.717
> 
> 标签：asp.net, flexpaper

我正在尝试在我的示例项目中实现 FlexPaper，它包含 Pdf 文件。

阅读 FlexPaper 文档后，我发现.. 我们需要先发布文档[单击此处](http://flexpaper.devaldi.com/docs.jsp)我的项目中有 500 个 pdf 文档，因此发布这些文件会很痛苦。我理解正确吗？如果是，不通过发布模式发布 pdf 文件的替代方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:20:35.327

好吧，我已经向 FlexPaper 团队发布了同样的问题，他们回复我说将所有 pdf 文件放在 pdf 文件夹中，因此无需上传文档。

谢谢

# cakephp - find() 基于多个 HABTM 关系中的条件

> ID：12088332
> 
> 赞同：2
> 
> 时间：2012-08-23T09:09:20.113
> 
> 标签：cakephp, cakephp-2.0, conditional-statements, has-and-belongs-to-many, multiple-conditions

我正在使用 CakePHP 2.1
让我们声明我有以下模型和关系：
`Posts`belongsTo `Edition`
`Posts`HABTM `Editors`
`Posts`HABTM`Tags`

我从 推理`PostsController`并且我想找到所有`Posts`属于某个`Edition`，并且`Editor.id=55`是相关的并且`Tag.id=33`是相关的。

我发现了许多示例，其中`Posts`基于 HABTM 关系上的条件进行查找是通过从`Editor`.

```
$this->Editor->find('all',
    array(
        'conditions'=>array('Editor.id'=>55),
        'contain'=>array('Post')
    )
); 
```

不幸的是，这在这里不起作用，因为我想设置多个 HABTM 关系。

using`contain`也不起作用，因为它只切断了一个分支 ( `editors`)，但无助于过滤它的父级 ( `posts`)。

我该如何解决这个问题？
我可能需要诉诸临时加入吗？如果是这样，有人可以大致解释我采取什么方法吗？

**编辑：** 一些伪代码以说明我想要实现的目标：

```
$this->Post->find('all',
    array('conditions'=>array(
            'Edition.id'=>4,
             // start pseudo code
            'Post.Editor' => 'has at least one related editor with id=55',
            'Post.Tag' => 'has at least one related tag with id=33',
        )
    )
); 
```

亲切的问候，巴特

**编辑解决方案：** 在@RichardAtHome 之后，我创建了下面的解决方案。（尚未）使用多个连接条件，但这似乎没有必要：

```
// Paginate over Cards that belong to current Subscription (belongsTo) AND the User is related to as an Editor (HABTM)
$this->paginate = array(
    'fields' => array('id','title','workingtitle','attachment_count','subscription_id'),
    'joins' => array(
        // create Editor-join
        array(
            'table' => 'cards_users',
            'alias' => 'Editor',
            'type' => 'left',
            'conditions' => array(
                'Editor.card_id = Card.id'
            )
        ), 
        array( 
            'table' => 'users', 
            'alias' => 'User', 
            'type' => 'left',
            'conditions'=> array( 
                'User.id = Editor.user_id'
            ) 
        )
    ),
    'conditions' => array(
        'OR' => array(
            // is Card in current subscription? (straightforward condition)
            array('Card.subscription_id',$subscription_id),
            // is current User assigned as Editor? (condition works with join above)
            array('User.id' => $user['id'])
        )
    ),
    'limit' => 10
); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T13:11:58.550

对于这种类型的查询，我通常发现自己构建连接最容易，因为 cake 不会连接，它将执行多个查询（从表 a 中选择匹配的行，然后从表 b 中获取匹配的行）。

您的查询需要看起来像这样：

```
$this->Post->find('all',
    array(
        'conditions'=>array('Post.edition_id'=>4),
        'joins'=>array(
            array(
                'type'=>'inner',
                'table'=>'posts_editors',
                'alias'=>'PostsEditor',
                'conditions'=>array(
                    'PostsEditor.post_id = Post.id',
                    'PostsEditor.editor_id'=>55 // your criteia for editor id=55
                )
            ),
            array(
                'type'=>'inner',
                'table'='posts_tags',
                'alias'=>'PostsTag',
                'conditions'=>array(
                    'PostsTag.post_id = Post.id',
                    'PostsTag.tag_id'=>33 // your criteria for tag id = 33
                )

            )
        )
    )
); 
```

检查输出的 SQL 以了解此查询在幕后实际执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:36:19.867

尝试：

```
$this->Post->find('all',
        array('conditions'=>array(
                'Edition.id'=>4,
                'Editor.id' => '55',
                'Tag.id' => '33',
            )
        )
    ); 
```

# typo3 - 如何设置浏览菜单以循环页面并且它的子页面仅在typo3中？

> ID：12088333
> 
> 赞同：0
> 
> 时间：2012-08-23T09:09:34.470
> 
> 标签：typo3, typoscript

我正在尝试设置浏览菜单来循环页面及其子页面。我必须采用**< 2 >**的格式，其中**<**是上一页，**2**是当前页，**>**是下一页。为了解决这个问题，我决定在父页面上放置一个扩展模板，其中浏览菜单指向子页面树的第一页：

```
lib.pagenumber = HMENU
lib.pagenumber{
  special = browse
  special.items = | next
  special.next.uid = 100
  special.next.fields.title = 2

  1 = TMENU
  1{
     noBlur = 1
     expAll = 0
     NO = 1
     NO.ATagTitle = 1
     NO.before = <div id="currLGMpg" class= "currpg">1</div>
     NO.linkWrap = <div class=nextLGMpg>|</div>

  }
} 
```

当前页面没有链接，而只是一个图像框，它必须位于上一个和下一个链接之间，并且还可以自动编号。这是我要解决的第二个问题。对于子页面，我认为第一个子页面上的模板在链接包装上带有选项拆分可以用于设置上一个和下一个链接的样式，但我不知道如何将当前页面的图像放在中间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-08T11:16:51.427

您好骑自行车，您应该遵循以下步骤，这仅适用于下一个，请按照相同的步骤进行上一个。

```
temp.lightbox_navi.30 = HMENU
temp.lightbox_navi.30 {
    stdWrap.wrap = <li>|</li>
    special = browse
    special {
        items = next
        items.prevnextToSection = 0
        next.fields.title = < next Projekt
    }
    1 = TMENU
    1 {
        NO = 1
    }
    stdWrap.ifEmpty.cObject = HMENU
    stdWrap.ifEmpty.cObject {
        special = browse
        special {
            items = first
            items.prevnextToSection = 0
            first.fields.title = < next Projekt o
        }
        1 = TMENU
        1 {
            NO = 1
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:32:42.387

所以我终于解决了除了一个问题之外的所有问题。这是对页面进行自动编号。对于那些感兴趣的人，您需要将下一个和上一个分别映射到，以便您可以在其间放置一个页码按钮。以下打字稿代码位于您要为其设置浏览按钮的页面的根页面树上：

```
 #Next page button setup
lib.nextpage = HMENU
lib.nextpage.special = browse
lib.nextpage.special.items = next

#can't remove the page title some reason it just gets inserted back so we set it to nothing
lib.nextpage.special.next.fields.title =

#if we're on the parent page of the page tree we wish to browse next should point to the first page of the subtree.
[globalVar = TSFE:id = 46]
  lib.nextpage.special.next.uid = 100
[global]  

lib.nextpage.1 = TMENU
lib.nextpage.1{
     noBlur = 1
     expAll = 0
     NO = 1
     #NO.ATagTitle = 1
     NO.linkWrap = <div class=nextLGMpg>|</div>

}

#Page number
lib.currpage = TEXT
#can't autonumber yet so put a 1 as a placeholder for the current page number 
lib.currpage.value = 1 
lib.currpage.wrap = <div id="currLGMpg">|</div>

#previous page button setup

#copy from next page setup; tbh all we gain is 1 less line code
lib.prevpage < lib.nextpage
lib.prevpage.special.items = prev
lib.prevpage.special.prev.fields.title =
#again if we're at the 1st subpage we need to target the parent page as that is page one.
[globalVar = TSFE:id = 100]
  lib.prevpage.special.prev.uid = 46
#next line tests to see if we're at page 1\. If we are we remove the prev object because browsing stops here.
[globalVar = TSFE:id = 46]
lib.prevpage >
[global]

lib.prevpage.1 = TMENU
lib.prevpage.1{
     noBlur = 1
     expAll = 0
     NO = 1
     #NO.ATagTitle = 1
     NO.linkWrap = <div class=prevLGMpg>|</div>

} 
```

一旦我弄清楚如何自动编号，我将更新答案。

# c++ - Qwtslider 布局 - 显示当前值

> ID：12088334
> 
> 赞同：0
> 
> 时间：2012-08-23T09:09:39.840
> 
> 标签：c++, qt, slider, qwt

我有一个滑块，除了可以显示它的比例尺之外，我还想要一个标签来显示滑块的当前值是什么，当我滑动它时，它会变为当前位置。来自 qwt.sorceforge.net 的此链接中的内容

[http://qwt.sourceforge.net/sliders.png](http://qwt.sourceforge.net/sliders.png)

这是我的滑块代码：

```
Slider = new QwtSlider(centralWidget);
Slider->setObjectName(QString::fromUtf8("Slider"));
Slider->setGeometry(QRect(520, 40, 60, 500));
QSizePolicy sizePolicy1(QSizePolicy::Expanding, QSizePolicy::Fixed);
sizePolicy1.setHorizontalStretch(0);
sizePolicy1.setVerticalStretch(0);
sizePolicy1.setHeightForWidth(Slider->sizePolicy().hasHeightForWidth());
Slider->setSizePolicy(sizePolicy1);
QFont font;
font.setFamily(QString::fromUtf8("Bitstream Charter"));
font.setPointSize(9);
Slider->setFont(font);
Slider->setCursor(QCursor(Qt::ArrowCursor));
Slider->setOrientation(Qt::Vertical);
Slider->setScalePosition(QwtSlider::LeftScale);
Slider->setBgStyle(QwtSlider::BgTrough);
Slider->setThumbLength(20);
Slider->setThumbWidth(10);
Slider->setBorderWidth(2);
Slider->setRange(xmin, xmax, step);
Slider->setScale(xmin, xmax+1, (xmax+1)/16); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:22:49.913

将滑块的`valueChanged(int)`信号与您自己的插槽连接：

```
connect( slider, SIGNAL(valueChanged(int)), 
         someClassThatHasSlot, SLOT(setValueToTheLabel(int)) ); 
```

在插槽中，只需执行类似的操作

```
void setValueToTheLabel( int value )
{
    ui.yourLabel->setText( QString::number( value ) );
} 
```

# java - Android随机生成字符

> ID：12088337
> 
> 赞同：0
> 
> 时间：2012-08-23T09:09:43.227
> 
> 标签：java, android

如何生成随机字符？

像这样的随机数：：

```
public static int random() {
    Random generator = new Random();
    int x = generator.nextInt(10000);
    return x;
} 
```

我需要画出类似的东西：zCs3v3b1b6 just random chars

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:13:31.433

```
public static char random() {
     Random generator = new Random();
     char x = (char)(generator.nextInt(96) + 32);
     return x;
} 
```

这将生成一个随机字符。

```
public static void main(String[] args) {
     StringBuilder builder = new StringBuilder();
     for (int i = 0; i < 8; i++)
           builder.append(random());
     System.out.println(builder.toString());
} 
```

这将生成一个包含 8 个随机字符的字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:22:38.030

见以下链接：[http ://www.asciitable.com/](http://www.asciitable.com/)

```
public static char randomSeriesForThreeCharacter() {
Random r = new Random();
char random_3_Char = (char) (48 + r.nextInt(47));
return random_3_Char;
} 
```

# bash - 监视丢失 bash 变量？

> ID：12088338
> 
> 赞同：0
> 
> 时间：2012-08-23T09:09:44.287
> 
> 标签：bash, monit

试图让 monit 监视我们编写的自定义守护程序，但它不能与 bash 停止/启动脚本一起使用。如果我从命令行手动运行停止/启动脚本，它每次都能 100% 完美运行。如果它通过 monit 执行，则变量为空。从我遇到问题的脚本中提取：

```
GETPID=$(ps aux | grep unicorn | grep master | cut -d" " -f7)
echo "getPID : $GETPID"                                             
echo $GETPID > $PIDFILE 
```

`$GETPID`使用 monit 执行此变量时，该变量为空。用手它完美地工作。

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:07:00.533

一般来说，解析`ps`or的输出并不是一个好主意`ls`。

您可以在文件系统上编写一个简单的`pgrep`using ：`find``proc`

```
# find /proc/ -maxdepth 2 -type l -name exe -lname '/bin/bash' -printf '%h\n' 2>/dev/null | sed 's/.*\///'
3580
3595
9504
9869
10054
10156
10193
# pgrep bash
3580
3595
9504
9869
10054
10156
10193 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:04:37.743

谢谢您的帮助。问题是 rvm 安装中独角兽的路径。

# qt - 如何在 QT 中捕获子小部件的关键事件

> ID：12088339
> 
> 赞同：0
> 
> 时间：2012-08-23T09:09:48.250
> 
> 标签：qt, events

我创建了以`HomeScreen.ui`Qt 命名的 Ui 屏幕。这个屏幕没有不同的小部件，比如`QPushButton`等`QLabel`。我想更改默认导航，因为我试图捕捉`keyEvents`使用`keyPressedEvent`功能

```
void HomeScreen::keyPressEvent(QKeyEvent *event )
{
    int keyCode = event->key();
    qDebug() << keyCode;
} 
```

但这仅在焦点位于主屏幕上时才捕获事件，如果焦点位于任何子小部件上，例如按钮`keyPressEvent`未被调用。我想捕获子小部件上的事件，以便我可以为它们编写导航。

谁能告诉我该怎么做？

# ios - Mpmovieplayercontroller 视频暂停，同时单击另一个功能的按钮

> ID：12088340
> 
> 赞同：0
> 
> 时间：2012-08-23T09:09:51.923
> 
> 标签：ios, xcode, macos, mpmovieplayercontroller

我`MPMovieplayerController`用于播放视频，而我点击其他按钮，即我想暂停我的视频，无论它再次播放。我点击播放意味着我想在暂停时播放。但对我来说，现在点击按钮意味着我的视频已停止。但我想暂停而不是停止。我的示例代码在这里

```
 - (IBAction) playvideo
{
    NSURL *url = [NSURL URLWithString:@"http://xyz/video1.mp4"];
    movieplayer = [[[MPMoviePlayerController alloc]initWithContentURL:url] retain]; 
movieplayer.view.frame=CGRectMake(25,54,658,460);    
    [self.view addSubview:movieplayer.view];
    [movieplayer play];
}

-(void)buttononclick
{

    [movieplayer pause];
    [movieplayer.view removeFromSuperview];

    for (int i = 0; i < 13; i++)
    {
CGRect frame;
frame.origin.x = 150 * i;
frame.origin.y = 0;
frame.size = CGSizeMake(140, self.scrollView.frame.size.height);
        [scrollView setShowsHorizontalScrollIndicator:NO];

        UIImageView *temp1 = [[UIImageView alloc] initWithFrame:CGRectMake(25, 7, 75, 75)];
        [temp1 setImage:[UIImage imageNamed:@"sti15.png"]];
        [self.scrollView addSubview:temp1];

        UIImageView *temp2 = [[UIImageView alloc] initWithFrame:CGRectMake(110, 7, 75, 75)];
        [temp2 setImage:[UIImage imageNamed:@"sti16.png"]];
        [self.scrollView addSubview:temp2];

        UIImageView *temp3 = [[UIImageView alloc] initWithFrame:CGRectMake(195, 7, 75, 75)];
        [temp3 setImage:[UIImage imageNamed:@"sti17.png"]];
        [self.scrollView addSubview:temp3];

}
    self.scrollView.contentSize = CGSizeMake(165 * 10, self.scrollView.frame.size.height);
    self.scrollView.pagingEnabled=0;
}

- (void)viewDidDisappear:(BOOL)animated
{
   // [self setDescText:nil];
[super viewDidDisappear:animated];
    [movieplayer pause];
    [movieplayer.view removeFromSuperview];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-06T12:17:06.383

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    if ((movie.playbackState==MPMoviePlaybackStateStopped)||(movie.playbackState==MPMoviePlaybackStatePaused)) 
    {
        [movie play];  
    }
    else
    {
        [movie pause];
    }
} 
```

试试这个代码，它会工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:07:01.183

查看`MPMoviePlaybackStatePlaying`、`MPMoviePlaybackStateStopped`、`MPMoviePlaybackStatePaused`和的通知`MPMoviePlaybackStateInterrupted`。

就像是：

```
MPMoviePlayerController *player = notification.object;
/* Playback is currently stopped. */
    if (player.playbackState == MPMoviePlaybackStateStopped)
    {
        NSLog(@"MPMoviePlaybackStateStopped");
    }

/*  Playback is currently under way. */
    else if (player.playbackState == MPMoviePlaybackStatePlaying)
    {        
        NSLog(@"MPMoviePlaybackStatePlaying");
        }

/* Playback is currently paused. */
    else if (player.playbackState == MPMoviePlaybackStatePaused)
    {
        NSLog(@"MPMoviePlaybackStatePaused");
    } 
```

您可以像这样连接您的目标操作：

```
if ((_moviePlayer.playbackState == MPMoviePlaybackStateStopped) || (_moviePlayer.playbackState == MPMoviePlaybackStatePaused)) {
            [_moviePlayer play];
        } else {
            [_moviePlayer pause];
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-15T12:32:25.497

您可以将目标添加到播放/暂停按钮。但首先你需要抓住 mpmovieplayerview 的按钮。

第 1 步列出按钮。方法参考从[这里](https://stackoverflow.com/questions/7243888/how-to-list-out-all-the-subviews-in-a-uiviewcontroller-in-ios)

从按钮出现时调用此方法（视频准备就绪）。但请记住，这也会捕获全屏按钮和播放按钮。（如果可用）

```
- (void)CatchSubviewsOfView:(UIView *)view {

// Get the subviews of the view
NSArray *subviews = [view subviews];

for (UIView *subview in subviews) {

    // Do what you want to do with the subview
    NSLog(@"%@", subview);
    if(subview isKindOfClass:[UIButton class]]){
        // add your target here
        [subview addTarget:self action:@selector(extraAction:) forControlEvents:UIControlEventTouchUpInside];
    }

    // List the subviews of subview
    [self listSubviewsOfView:subview];
}
} 
```

步骤 2 执行操作

```
-(IBAction)extraAction:(id)sender{
    NSLog(@"some extraAction");
} 
```

调用 catch 方法示例。[self CatchSubviewOfView:movieplayer.view];

# types - 为什么括号在 F# 类型声明中很重要

> ID：12088341
> 
> 赞同：6
> 
> 时间：2012-08-23T09:09:52.097
> 
> 标签：types, f#, pattern-matching

在我的 F# 代码中观察到这种行为，我完全感到困惑，这里取自交互式会话：

```
Microsoft (R) F# 2.0 Interactive build 4.0.40219.1
Copyright (c) Microsoft Corporation. All Rights Reserved.

For help type #help;;

> type foo = Foo of (string * int);;
  type foo = | Foo of (string * int)

> let f = Foo ("bar",42);;
  val f : foo = Foo ("bar", 42)

> match f with Foo x -> x;;
  val it : string * int = ("bar", 42)

> type bar = Bar of string * int;;
  type bar = | Bar of string * int

> let b = Bar ("baz",21);;
  val b : bar = Bar ("baz",21)

> match b with Bar x -> x;;
  match b with Bar x -> x;;
  -------------^^^^^

stdin(7,14): error FS0019: This constructor is applied to 1 argument(s) but expects 2
> 
```

对我来说，在 Foo 和 Bar 上使用单个变量进行模式匹配似乎很明显应该是有效的 - 所以我想知道是否有人知道这种奇怪行为的原因，或者你是否像我一样认为这是一个错误。

更新：为了澄清，构造函数的报告类型`Foo`是`Bar`：

```
> Foo;;
val it : string * int -> foo = <fun:clo@14-1>
> Bar;;
val it : string * int -> bar = <fun:clo@13> 
```

所以当然，他们应该接受相同的一组有效模式

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T10:10:00.803

我同意这看起来很混乱。正如 pad 解释的那样，这两个声明之间的区别不仅仅是句法上的——您实际上是在定义由不同类型组成的有区别的联合案例。

*   在 的情况下`Foo`，该案例包含一个类型的元素`int * string`
*   如果是`Bar`，则 case 包含两个元素 type`int`和`string`

这两个选项非常相似，但它们实际上是不同的。如果您查看[F# 规范中的类型定义，](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc321997149)就会发现这一点。以下是描述可区分联合的类型定义的位：

> union-type-defn :=
>    type-name '=' union-type-cases type-extension-elements [opt]
> 
> 联合类型案例 :=
>    '|' [选择] 联合类型案例'|' ...'|' 联合类型案例
> 
> union-type-case :=
>    属性[选择]   union-type-case-data
> 
> union-type-case-data :=
>    ident -- null union case
>    ident of type * ... * type -- n-ary union case

请注意，“n-ary union case”由多个元素 ( `type * ... * type`) 组成。*类型*定义如下（毫不奇怪，它可以是一个元组）：

> type :=
>    ( type )
>    type -> type -- 函数类型
>    type * ... * type -- 元组类型
>    ... -- 许多其他类型

我不知道为什么*union-type-case-data*不只使用一元联合案例（而不是 n-ary）并且总是将元素视为元组。我认为这很有意义，但它可能是 F# 从 OCaml 或 ML 继承的东西。但是，至少规范解释了这一点！

事实上，我认为规范有点模棱两可，因为您可以将`Foo of int * int`元组视为 n 元联合情况和一元情况（但没有括号中的 type `( type )`）。

# c# - 使用现有表进行代码优先迁移

> ID：12088346
> 
> 赞同：10
> 
> 时间：2012-08-23T09:10:00.207
> 
> 标签：c#, .net, entity-framework-migrations

在我的模型中，我有导航属性语言：

```
public class IntegratorDescription : BaseContract
{
    [Key, Column(TypeName = "bigint"), DataMember]
    public long Id { get; set; }
    [DataMember, Column(TypeName = "bigint"), ForeignKey("Language")]
    public long LangId { get; set; }
    [DataMember]
    public string CompanyShortInfo { get; set; }
    [DataMember, Column(TypeName = "ntext")]
    public string CompanyInfo { get; set; }

    public virtual Models.Language Language { get; set; }
} 
```

语言表已经存在并且它是由另一个 ORM 完成的，我需要说迁移不要尝试创建语言表而只更新描述表。如何？

-“数据库中已经有一个名为‘Languages’的对象。”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-23T11:07:43.067

-忽略更改

忽略在当前模型中检测到的任何未决更改，构建一个空迁移。这可用于创建初始的空迁移以启用现有数据库的迁移。注意 这样做假定目标数据库模式与当前模型兼容。

[http://coding.abel.nu/2012/03/ef-migrations-command-reference/](http://coding.abel.nu/2012/03/ef-migrations-command-reference/)

# asp.net - 在 SL 业务应用程序 + ASP.NET 身份验证方案中为用户存储额外数据的最佳实践？

> ID：12088347
> 
> 赞同：0
> 
> 时间：2012-08-23T09:10:03.517
> 
> 标签：asp.net, silverlight, authentication, wcf-ria-services

我即将编写一个 Silverlight 业务应用程序，并且我计划使用 ASP.NET 内置的身份验证服务（据我所知，它足够安全）。

我的问题是我已经有一个数据库，其中的`Users`表比 ASP.NET DB 中的列多得多。

最好的做法是什么，这里？

**选项 1：**向 ASP.NET`Users`表添加列。

**选项 2：**`Users`只将不在 ASP.NET 表中的列放入我的表`Users`中。

**选项 3：**使用`Profile`ASP.NET DB 中的表来存储我的用户的额外数据。

**选项 4：**您命名。;o)

我目前倾向于选项 2，因为我认为更改 ASP.NET DB 会将该 DB 的使用限制在该应用程序中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:18:29.963

选项 2 可能非常好（您可以覆盖和自定义成员资格提供程序类，以使这对您来说更加无缝）。

配置文件表很有用，因为它很容易添加，但直接查询可能会很痛苦（例如，创建一个显示所有用户的名字和姓氏的网格视图，其中这些数据都在配置文件的一列中）。

# wcf - 具有 gzip 压缩配置的 WCF 服务（服务器/客户端）

> ID：12088348
> 
> 赞同：0
> 
> 时间：2012-08-23T09:10:04.973
> 
> 标签：wcf, compression, gzip, configuration-files

关于我的自托管 WCF 服务中的 gzip 压缩，我有几个问题。

我实现了一个自定义 gzip 压缩（使用 msdn 示例）并且一切正常（请求/响应都被很好地压缩）。

目前，客户端配置包括使用压缩的所有附加配置（bindingElementExtensions、policyImporters 指向 gzip 编码器二进制文件等）。

实际上我认为客户端不需要任何外部配置来使用该服务，只需要在“Accept-Encoding”和“Content-Encoding”中提到“gzip”......我如何配置我的客户端工作那样 ？如果我的客户只收到一条编码消息，我希望他处理...

另一个问题 - 是否可以设置 gzip 压缩将从该大小开始编码的最小消息大小？其动机是优化服务器的负载并防止对小消息进行不必要的压缩。还是使用 gzip 压缩或根本不使用它？

提前致谢！！！

# wsdl - 命名空间前缀从请求更改为响应

> ID：12088351
> 
> 赞同：0
> 
> 时间：2012-08-23T09:10:21.530
> 
> 标签：wsdl, websphere, xml-namespaces, soapui

我使用 websphere application server 和 Rational application developer(RAD) 开发了一项服务。我正在使用 SOAP UI 对我的服务进行单元测试。该服务部署良好并获得了准确的结果，但问题出在命名空间前缀中。我得到的响应前缀与请求命名空间的前缀不同。即，如果请求的命名空间定义为 common、domain 等..我得到的响应是命名空间为 a、b、c ..

请求就像这里一样......

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"    xmlns:tic="http://www.trrt.com/pos/TicketRemark_v1"  xmlns:dom="http://www.tport.com/pos//Domain" xmlns:com="http://www.tralport.com/pos//Common">
   <soapenv:Header/>
   <soapenv:Body>
      <tic:RetrrksRequest  Version="1" >
         <dom:TicketDocument TicketNbr="6000001"/>
      </tic:RetrrksRequest>
   </soapenv:Body>
</soapenv:Envelope> 
```

回应是……

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Body>
  <c:RetrrksResponse Version="1" TimeStamp="2012-08-23T14:15:59.000" xmlns:a="http://www.trrt.com/pos/viewtrip/schema/CommonTypes_v1" xmlns:b="http://www.trport.com/pos/viewtrip/schema/DomainTypes_v1" xmlns:c="http://www.travt.com/pos/viewtrip/schema/TicketRemarksServices_v1">
     <a:Success/>
     <b:TicketDocument TicketDocumentNbr="6000000000001" TotalDocQuantity="7"/>
     <b:BookiID CreateDateTime="2012-08-12T12:40:00.000" PurgeDate="2013-06-20" ID="ABCDEF">
     </b:BookiID>
     <b:FeeRemarks>
        <b:Remark Type="3000">remark text</b:Remark>
     </b:FeeRemarks>
  </c:RetrirksResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:42:54.277

这不是问题。命名空间前缀可以是任意的，只要它引用正确的命名空间。不应依赖于命名空间前缀的特定选择。任何依赖于前缀选择的代码都可能会遇到互操作性问题。

# android - 我们可以使用 DeviceAdmin API 来处理应用程序特定的策略吗

> ID：12088352
> 
> 赞同：0
> 
> 时间：2012-08-23T09:10:22.217
> 
> 标签：android, device-admin

我需要在 Android 应用程序中处理密码过期问题。密码将存储在首选项或数据库中。

[http://developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)说 DeviceAdmin Api 能够设置诸如“密码过期超时”之类的策略

是否可以使用此功能来处理特定于应用程序的凭据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:54:33.927

我们可以。通过使用 DeviceAdmin API，我们可以设置/重置密码，并按照他们在此 api 中指定的方式执行更多操作。

要获得对您的应用程序的设备管理员权限，用户必须至少接受您的应用程序作为管理员一次。

您可以通过运行问题链接中提供的示例应用程序来检查这一点。

# php - 使用 mysql 显示特定国家/地区网页内容的最佳方式

> ID：12088355
> 
> 赞同：0
> 
> 时间：2012-08-23T09:10:30.550
> 
> 标签：php, mysql

需要你的大力帮助。我需要你们所有好人的建议。

我有一些内容只需要向少数几个国家显示。我可以使用 Geoip 获取用户所在的国家/地区。我将我的内容存储在 MySQL 数据库中，并带有 country_code 字段。国家代码可以为空，也可以为任何单个代码或一组逗号分隔值

我想做的是，

1.  检查 country_code，如果它为空，则为所有用户显示该内容。
2.  如果 country_code 不为空且只有一个值，则仅显示给定 country_code 用户的内容。
3.  如果 country_code 是一组逗号分隔的值，则显示所有逗号分隔的国家用户的内容。

我有两种选择

1.  分别为国家添加数据列`each`并显示内容，例如`three columns`三个国家美国，英国，澳大利亚，如果用户的位置是美国，

    `$sql=mysql_fetch_array(mysql_query("SELECT * FROM content_table WHERE US=='$country_code'"))`;

2.  将单列的国家数据添加为国家代码并存储美国、英国、澳大利亚，如果用户的位置是美国，

    `$sql=mysql_fetch_array(mysql_query("SELECT * FROM content_table WHERE country_code!=''")); $pieces = explode(",", $sql['country_code']); foreach($pieces as $val){ if($country_code=="US") //display content }`

注意：**国家数量可能会根据我的需要而有所不同**

克服这个问题的最佳做法是什么，

*   对不同的国家使用不同的列进行快速搜索，但我认为添加更多列并不好
*   使用单列并迭代逗号分隔值需要更多计算

我该怎么办..？？请就此给我建议..或者你有什么比这更好的主意吗..？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:17:32.277

我只想说 - 创建一个国家表

```
countries
id, code, name
1, UK , United Kingdom 
```

.....和其他国家

在您的`content`表中只需添加另一列 country_id 或 country_code

```
Content
id, title, body, country_code
1, some text, more text, 1 
```

然后在你的 sql

只是`select * from content where country_code = 'UK' or country_id = 1`// 取决于你选择哪个选项

或者

创建一个单独的链接表以允许多个国家/地区的内容

```
content_country
content_id, country_id
1, 2
1, 1
1, 3 
```

要获取您的查询的内容，请使用`left/right/inner`连接，例如

```
SELECT *
FROM `content` c
LEFT JOIN content_country cc ON cc.content_id = c.id
AND cc.country_id
IN ( 2, 4 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:27:37.827

```
$sql=mysql_fetch_array(mysql_query("SELECT * 
    FROM content_table 
    WHERE country_code = '' 
    OR country_code REGEXP ',?". $user_country_code .",?'")); 
```

`country_code`如果我对您的理解很好，您是否只想在用户国家代码在该字段中或未指定时才向用户显示元素`country_code`？

即使数据库解决方案会更好，也应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:24:04.807

```
Try It:

$sql=mysql_fetch_array(mysql_query("SELECT * FROM content_table WHERE country_code!=''")); 

$pieces = explode(",", $sql['country_code']); 

# No Need to run loop 
#foreach($pieces as $val)
#{ 
#    if($country_code=="US") //display content 
#}

if(!empty($pieces))    // 
{

    if(in_array($user_country_code,$pieces ))
    {
        echo "display content";
    }
}
else
{
        echo "display content";    // for all country
}

Use in_array() except of loop. I guess you will use in on user login so you will have user_country_code. 
```

# c# - 在下拉列表中显示 DB 值

> ID：12088358
> 
> 赞同：0
> 
> 时间：2012-08-23T09:10:38.900
> 
> 标签：c#, asp.net

我正在将数据库中的值显示到下拉列表中。但我无法将相应的值放入 DDL。

```
if (dt.Rows.Count > 0)
            {
                DataTable dt1 = new DataTable();
                dt1 = bll.getnewid(TextBox1.Text);

                    if (dt1.Rows.Count > 0)
                    {

                        Session["pid"] = dt1.Rows[0]["NewidColumn"].ToString();
                        Session["email"] = dt1.Rows[0]["EmailID"].ToString();
                        Session["gender"] = dt1.Rows[0]["Gender"].ToString();
                        Session["mobile"] = dt1.Rows[0]["MobileNo"].ToString();
                        Session["country"] = dt1.Rows[0]["Country"].ToString();
                        Session["state"] = dt1.Rows[0]["State"].ToString();
                      } 
```

我正在这样显示

```
 DropDownList1.Text = Session["country"].ToString();
            DropDownList2.Text = Session["state"].ToString(); 
```

我能够在数据表中获取国家和州的值。但我无法在 DDL 中显示它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:30:59.597

```
DropDownList1.Items.Add(new ListItem(Session["country"].ToString()); 
DropDownList2.Items.Add(new ListItem(Session["state"].ToString());
Dropdownlist2.databind();
Dropdownlist1.databind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:13:45.847

```
DropDownList1.Items.Add(new ListItem(Session["country"].ToString()); 
DropDownList2.Items.Add(new ListItem(Session["state"].ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:31:07.690

试试这样

```
 DropDownList1.Items.Add("yourvalue");
   DropDownList1.Items.Add(Session["country"].ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T09:34:30.557

试试这个代码：

```
DropDownList1.Items.Insert(0, new ListItem(Session["country"].ToString(), "0"));
DropDownList1.DataBind();

DropDownList2.Items.Insert(0, new ListItem(Session["state"].ToString(), "0"));
DropDownList2.DataBind(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T09:35:04.280

使用会话有什么需要..？而是尝试这个..希望它有效。在这行代码 (dt1 = bll.getnewid(TextBox1.Text);) 之后使用这两行而不是会话。

```
DropDownList1.DataSource=dt1;
DropDownList1.DataTextField="Country";
DropDownList1.DataValueField="Country";
DropDownList1.DataBind();
DropDownList2.DataSource=dt1;
DropDownList2.DataValueField="Country";
DropDownList2.DataValueField="Country";
DropDownList2.DataBind(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T09:13:33.903

您需要设置下拉列表的`SelectedValue`or`SelectedIndex`属性。

# php - 在 PHP 中将 16 位 Int 转换为 IP 地址

> ID：12088360
> 
> 赞同：1
> 
> 时间：2012-08-23T09:10:39.660
> 
> 标签：php, bit-manipulation

我得到了以下 PHP 函数，并被要求编写另一个反转它的函数。

```
function convertTo16bit($ipString) {
    $ipString = explode(".", $ipString);

    $ip = ($ipString[0] << 24) | ($ipString[1] << 16) | ($ipString[2] << 8) | ($ipString[3]);
    $lowNumber = $ip & 0xffff;
    $highNumber = ($ip >> 16) & 0xffff;
    return array($lowNumber , $highNumber );
} 
```

第一个问题：我理解上面的代码在做什么，但不知道为什么，有人能解释一下为什么你需要创建一个 lowNumber 和 highNumber 吗？

其次，我需要编写一个名为“convertToIPAddress”的函数，它接受一个类似于上面输出的数组，并以 IP 地址的形式返回一个字符串。谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:16:06.843

您不必自己编写这些函数。你可以使用`ip2long()`and`long2ip()`来达到这个目的。

上下部分的原因是在 32 位系统（甚至 64 位 Windows）上，整数不足以容纳所有可能的值。上面提到的 PHP 函数通过返回具有相同位设置的负数来“解决”这个问题。

> 因为 PHP 的整数类型是有符号的，而且很多 IP 地址在 32 位架构上会产生负整数，所以需要使用 sprintf() 或 printf() 的 "%u" 格式化程序来获取无符号 IP 地址的字符串表示. （来源： http: [//php.net/ip2long](http://php.net/ip2long)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:18:34.760

我写了这段代码：

```
<?php

function convertTo16bit($ipString) {
    $ipString = explode(".", $ipString);

    $ip = ($ipString[0] << 24) | ($ipString[1] << 16) | ($ipString[2] << 8) | ($ipString[3]);
    $lowNumber = $ipString & 0xffff;
    $highNumber = ($ipString >> 16) & 0xffff;
    return array($lowNumber , $highNumber );
}

$ip = "192.168.1.17";

var_dump($ip);
var_dump(convertTo16bit($ip));

?> 
```

并收到：

```
string '192.168.1.17' (length=12)

array (size=2)
  0 => int 1
  1 => int 0 
```

我认为这个功能是不正确的。不要使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T22:31:28.917

我想到了...

```
function convert16BitIntsToIP($startingArray) {
    $low = $startingArray[0];
    $high  = $startingArray[1];

    $base = $high << 16 | $low;

    $ip1 = $base >> 24 & 0x00ff;
    $ip2 = $base >> 16 & 0x00ff;
    $ip3 = $base >> 8 & 0x00ff;
    $ip4 = $base & 0x00ff;

    $ip = "$ip1.$ip2.$ip3.$ip4";

   return $ip;
   } 
```

# android - Android 滑块按钮小部件

> ID：12088362
> 
> 赞同：2
> 
> 时间：2012-08-23T09:10:44.703
> 
> 标签：android, slider, translation

我是Android开发的新手。我想用动画实现一个滑动按钮。效果显示在以下视频中：[http](http://www.youtube.com/watch?v=ImHe4N4mvE4) ://www.youtube.com/watch?v=ImHe4N4mvE4 。这就像iphone的“滑动解锁”效果。我的问题是如何实现这种效果。这个应用程序是用 changeview、scrollview 实现的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:19:07.153

您可以将带有动画的图像视图放在线性布局中，其高度是包装内容，宽度是填充父项

动画代码

```
 public static Animation inFromLeftAnimation() {
 Animation inFromLeft = new TranslateAnimation(
 Animation.RELATIVE_TO_PARENT,  -1.0f, Animation.RELATIVE_TO_PARENT,  0.0f,
 Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
 );
 inFromLeft.setDuration(350);
 inFromLeft.setInterpolator(new AccelerateInterpolator());
 return inFromLeft;
 }
public static Animation outToLeftAnimation() {
Animation outtoLeft = new TranslateAnimation(
 Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  -1.0f,
 Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
);
outtoLeft.setDuration(350);
outtoLeft.setInterpolator(new AccelerateInterpolator());
return outtoLeft;
} 
```

# c# - 如何将 Sharepoint 列的数据类型从数字更改为日期时间？

> ID：12088367
> 
> 赞同：0
> 
> 时间：2012-08-23T09:11:06.070
> 
> 标签：c#, sharepoint

我有一个 Sharepoint 2010 列表，其中有一列类型为“数字”的列，如何将数据类型更改为 DateTime。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:25:37.300

`Number`和`Datetime`字段完全不同，不允许通过 Web 界面直接从数字切换到日期。但是，您可以先更改数字-> 文本，然后更改文本-> 日期。（当然，您可能会在通话过程中丢失数据）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:49:37.467

在功能区中..按照如下所示的路径

ListTools-->List---->List Settings-->Columns--->点击“Your column name”-->在“The type of information in this column is”单选按钮中选择日期时间-->另外（如果需要，日期时间格式在描述下）--->点击确定

# c# - MongoDB C# 驱动程序中的部分更新 - 字典问题

> ID：12088370
> 
> 赞同：5
> 
> 时间：2012-08-23T09:11:12.557
> 
> 标签：c#, mongodb, dictionary, partial

我正在尝试使用以下方法构建一个通用方法来通过 MongoDB C# 驱动程序处理我的所有部分更新：

```
public bool UpdateObject<T>(UpdatableObject<T> updatableObject)
    where T : new()
{
    var builder = GenerateMongoUpdateBuilder(updatableObject.ModifiedFields);
    var collection = GetCollection<T>();
    var result = collection.Update(Query.EQ("_id", BsonValue.Create(updatableObject.Id)), builder, new MongoUpdateOptions { Flags = UpdateFlags.Multi });
    return result.UpdatedExisting;
}

private static UpdateBuilder GenerateMongoUpdateBuilder(Dictionary<string, object> modifiedFields)
{
    var builder = new UpdateBuilder();
    foreach (var modifiedField in modifiedFields)
    {
        var type = modifiedField.Value.GetType();
        if (type.IsPrimitive || type.IsValueType || (type == typeof(string)))
        {
            builder.Set(modifiedField.Key, BsonValue.Create(modifiedField.Value));
        }
        else
        {
            builder.Set(modifiedField.Key, modifiedField.Value.ToBsonDocument());
        }
    }
    return builder;
} 
```

我不得不挣扎了一段时间，直到找到了通过 BsonValue 处理原始类型和通过 BsonDocument 处理非原始类型的解决方案。一切运行良好，直到...我们创建了一个包含字典的对象。插入工作完美，但一旦进入更新（使用此方法） - 它就不能再反序列化了。在更新前后查看 Mongo 中的对象表明它不再是同一个对象 - 更新后它有额外的 _t 字段包含“System.Collections.Generic.Dictionary`2[System.String,[SomeObject, SomeObjectAssembly] ]"

所以我开始质疑我的实施......

知道我在做什么错吗？

谢谢，尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:49:42.080

在 Robert Stam 的帮助下，问题得到了解决。这一切都在 Jira 项目中进行了描述。谢谢！

# asp.net - ASP.Net 打印机友好页面

> ID：12088373
> 
> 赞同：0
> 
> 时间：2012-08-23T09:11:33.053
> 
> 标签：asp.net, css, printing, asp.net-controls, print-css

大家早，

我正在尝试使网页打印机友好。通过拥有另一个样式表并且引用这是我的母版页，我已经成功地为我的一个页面完成了此操作。

```
<link href="Styles/style2.css" rel="stylesheet" type="text/css" />
<link href="styles/style-print.css" media="print" rel="stylesheet" type="text/css" /> 
```

我遇到的问题是我希望有一个打印机友好选项保持的主页是由 ASP 组成的。面板控件，这些也有 1 或 2 个子面板。我使用这些面板来减少混乱和滚动。

如果我将相关的 div 标签添加到主页，我似乎只能获得这些面板的标题，而不会获得子标题或这些面板中的内容，除非我在单击打印机友好按钮之前折叠这些面板。

这不是我希望用户完成的任务，而且打印机友好页面看起来很糟糕，因为我想删除面板/框。有没有办法让我格式化这个页面，所以当用户按下 pinter 友好按钮时，我看不到面板，而只是看到内容？

问候贝蒂。

这是我的可折叠面板的一些示例代码...

```
 <table>
            <tr>
                <td style="width:528px">
                    <h5>Topic</h5>
                </td>
                <td style="width:154px">
                    <h5>Presenter</h5>
                </td>
                <td>
                    <h5>Time</h5>
                </td>
            </tr>
        </table>
        <!--   1\.  HSE Issues (Main heading) -->
        <asp:Panel ID="pnlHeaderHSERegIssues" runat="server" CssClass="pnl" 
            Width="740px">
            <div style="float:left;">
                1\. Safety, Health, Environmental &amp; Regulatory Issues
            </div>
            <div style="float:right;">
                <asp:Label ID="lblShowHideHSERegIssues" runat="server"></asp:Label>
            </div>
            <div style="clear:both">
            </div>
        </asp:Panel>
        <!--   1.1  Safety Sub heading  -->
        <asp:Panel ID="pnlInfoHSERegIssues" runat="server" CssClass="pnlBody">
            <asp:Panel ID="pnlHeaderSafety" runat="server" CssClass="pnlBody2" Width="740px">
                <div style="float:left;">
                    1.1 - Safety Reviews
                </div>
                <div style="float:right;">
                    <asp:Label ID="lblShowHideSafety" runat="server"></asp:Label>
                </div>
                <div style="clear:both">
                </div>
            </asp:Panel>
            <asp:Panel ID="pnlInfoSafety" runat="server" CssClass="pnlBody">
                <table width="100%">
                    <tr>
                        <td style="width: 510px">
                            <asp:TextBox ID="txtSafety" runat="server" Height="100px" 
                                style="font-family:Verdana" TextMode="MultiLine" Width="510px"></asp:TextBox>
                        </td>
                        <td style="width: 140px" valign="top">
                            <asp:TextBox ID="txtSafetyPresenter" runat="server" Height="97px" 
                                style="font-family:Verdana" width="140px"></asp:TextBox>
                        </td>
                        <td style="width: 57px" valign="top">
                            <asp:TextBox ID="txtSafetyTime" runat="server" style="font-family:Verdana" 
                                width="50px"></asp:TextBox>
                        </td>
                    </tr>
                </table>
            </asp:Panel>
          </asp:Panel>

        <!-- Collapse / un-collapse Panels (Main Heading) -->
        <asp:CollapsiblePanelExtender ID="CollapsiblePanelExtender" runat="server" 
            CollapseControlID="pnlHeaderHSERegIssues" Collapsed="true" 
            CollapsedText="Show Details" ExpandControlID="pnlHeaderHSERegIssues" 
            ExpandDirection="Vertical" ExpandedText="Hide Details" ScrollContents="false" 
            TargetControlID="pnlInfoHSERegIssues" TextLabelID="lblShowHideHSERegIssues">
        </asp:CollapsiblePanelExtender>
        <!-- Collapse / un-collapse Panels (sub Heading) -->
        <asp:CollapsiblePanelExtender ID="CollapsiblePanelExtender1" runat="server" 
            CollapseControlID="pnlHeaderSafety" Collapsed="true" CollapsedText="Show" 
            ExpandControlID="pnlHeaderSafety" ExpandDirection="Vertical" ExpandedText="Hide" 
            ScrollContents="false" TargetControlID="pnlInfoSafety" 
            TextLabelID="lblShowHideSafety">
       </asp:CollapsiblePanelExtender> 
```

# android - 从命令行编译Android项目很慢

> ID：12088375
> 
> 赞同：16
> 
> 时间：2012-08-23T09:11:56.173
> 
> 标签：android, performance, compilation, dex

我正在从 OSX 上的命令行编译我的（相当简单，只有 5 个文件，几百个 LOC）应用程序：

`ant debug`

有用。但它工作缓慢：

`BUILD SUCCESSFUL Total time:`

`26 seconds`

这是为什么？即使我只更改一个 java 文件中的一行，也需要这么多时间。大部分时间都花在了`dex`阶段（大约 20 秒），这是 AFAIK 创建 Dalvik 字节码。但是我的朋友也在使用 Eclipse 在 Windows 上从事同一个项目，他说在他的机器上编译只需要一两秒钟。我能做些什么来加快这个过程吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T09:39:06.680

我终于找到了解决方案！这有点骇人听闻，但它确实有效。

首先，转到您的 ANDROID-SDK/platform-tools 目录，然后将`dx`app 重命名为其他名称，例如`dextool`，最后创建`dx`包含内容的新文件：

```
#!/bin/sh
shift
dextool --dex --incremental --no-optimize $@ 
```

将“dextool”替换为您之前选择的名称。这将为每个 dex 调用添加（未记录的）--incremental 属性，这将通过仅对在构建之间发生更改的类进行 dex 化来**大大**减少构建时间。现在看起来像这样：

`[dx] Merged dex A (1 defs/11,3KiB) with dex B (359 defs/1253,2KiB). Result is 359 defs/1519,3KiB. Took 0,5s`

0.5s 而不是 20s 是一个巨大的差异！

编辑 - 几句话：

*   在使用它之前，您必须至少编译一次项目，因为它使用以前的 classes.dex 文件
*   使用 ant 以外的其他 Android 工具链时可能会遇到问题

更新：

谷歌发布了 SDK Tools 21.0，它使上述调整被废弃，因为它支持 pre-dexing。最后！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T16:34:57.087

即使在`--incremental --no-optimize`原始 dex.bat 中添加的 21.1.1 中它也很慢，所以我继续想办法，结果是：如果您按大小对传递给 dex 的 .jar 文件进行排序，您可以获得更好的性能。

观看[https://code.google.com/p/android/issues/detail?id=79166](https://code.google.com/p/android/issues/detail?id=79166)以获取更新，我希望他们同意并进入 vNext。

```
#!/usr/bin/perl
use strict;
use warnings;
#use Data::Dump qw(dump);
use List::Util qw(first), qw(sum);

# size of the argument, -s for files, -s on **/*.class for folders
sub size {
        if (-d $_) {
                # directory size is sum of all class files in the dir recursively
                # account for pre-dexing and compression with a 25% decrease
                return sum(map { size($_) * 0.25 } <$_/*.class>) || 0;
        }
        return -s $_; # use built-in size operator
}

my $dx_args_with_args =
   qr/^--(output|positions|(no-)?optimize-list|dump-(to|width|method)|num-threads|main-dex-list|input-list)$/;
my $nArgs = $#ARGV;
# last argument like --blah, those are for dx
my $lastArg = $nArgs - first { $ARGV[$nArgs - $_] =~ /^--/ } 0..$nArgs;
if ($lastArg != -1 && $ARGV[$lastArg] =~ /$dx_args_with_args/) {
        $lastArg += 1;
}

my @inputs = map { $_->[1] }
             sort { $a->[0] <=> $b->[0] }
             map { [size(), $_] }
             @ARGV[$lastArg + 1 .. $nArgs];

print join(" ", @ARGV[0..$lastArg], @inputs);

exit 0; 
```

### 用法

*   让 Perl 在你的道路上
*   将上面的 perl 脚本复制到 ANDROID-SDK/build-tools/vvv/dx.pl
*   在 ANDROID-SDK/build-tools/vvv/ 中重命名 dx
    Unix：重命名`dx`为`dx-orig`
    Windows：重命名`dx.bat`为`dx-orig.bat`
*   添加一个新的替换 dx，它通过以下方式调用：

视窗：`dx.bat`

```
@echo off
setlocal
set args=%*
for /f "delims=" %%i in ('perl "%~dp0dx.pl" %args%') do set args=%%i
call "%~dp0dx-orig.bat" %args%
endlocal 
```

Unix：`dx`

```
#!/bin/sh
dx-orig `perl dx.pl $@` 
```

# metadata - 文件时间戳文件存储的是什么？

> ID：12088377
> 
> 赞同：1
> 
> 时间：2012-08-23T09:12:00.833
> 
> 标签：metadata

文件中存储的信息是什么，关于创建、修改、上次打开和权限存储？我怎样才能得到这些信息？

![在此处输入图像描述](../Images/b632827440f6a3ab40fdef3fa0536cdd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:20:48.713

在[`inode`](http://en.wikipedia.org/wiki/Inode)并且可以通过[`stat`](http://linux.die.net/man/2/stat)调用检索

# asp.net-mvc - 在控制器中将 JSON 对象发送到我的 Ajax 方法

> ID：12088379
> 
> 赞同：0
> 
> 时间：2012-08-23T09:12:06.363
> 
> 标签：asp.net-mvc, json, jquery

我正在尝试使用 ajax 在我的控制器中调用一个方法并传递一个对象。当涉及到变量时，我可以很好地做到这一点，但似乎无法使用对象来做到这一点。该方法调用正常，但对象值始终为空。我也尝试过使用 .toJSON 方法，但收到此错误 Uncaught TypeError: Object function (a,b){return new d.fn.init(a,b,g)} has no method 'toJSON' ，是的，我有 JSON2包括

到目前为止，这是我的尝试：

```
var VoucherDetails = this.GetVoucherDetails();

    $.post("/Vouchers/GetVoucherPreviewTemplate", { "Voucher": VoucherDetails},
            function (data) {

            });

  function GetVoucherDetails()
    {
        var teet = $("#Title").val();      

        return { Title: teet };
    }

C#

  [HttpPost]
        public ActionResult GetVoucherPreviewTemplate(ENT_Voucher Voucher)
        {
            return Json("");
        } 
```

这是我的 ENT_Voucher 代码：

```
[Serializable]
    public class ENT_Voucher : ENT_VoucherEntityBase
    {   
        public int BusinessID { get; set; }
        public int? SiteID { get; set; }  
        public string Title { get; set; }    
        public string Description { get; set; }
        public string Code { get; set; }   
        public string Link { get; set; }
        public DateTime StartDate { get; set; }
        public DateTime ExpiryDate { get; set; }
        public string ImageLink { get; set; }
        public int Status { get; set; }
        public ENT_Business BusinessDetails { get; set; }
        public string VoucherTandC { get; set; }
        public int Type { get; set; }
        public string DaysRemaining { get; set; }
        public int RequestCount { get; set; }
        public bool IsPetoba { get; set; }

        public ENT_Voucher()
        {
            this.BusinessDetails = new ENT_Business();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:18:31.710

您可以将其作为 JSON 请求发送，该请求允许您发送任意复杂的对象：

```
var VoucherDetails = this.GetVoucherDetails();
$.ajax({
    url: '@Url.Action("GetVoucherPreviewTemplate", "Vouchers")',
    type: 'POST',
    contentType: 'application/json',
    data: JSON.stringify({ voucher: VoucherDetails }),
    success: function(result) {

    } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T21:40:55.453

如果您包含 JSON2.js，那么您想使用 JSON.stringify() 并将数据传递给它以在您的 AJAX 调用中序列化！

# mfc - Wow6432node 重定向 32 位 exe

> ID：12088380
> 
> 赞同：0
> 
> 时间：2012-08-23T09:12:11.633
> 
> 标签：mfc, registry, 32bit-64bit

我有一个 64 位应用程序，它使用一些 32 位图形 exes。虽然我正在为那个 32 位 exes 创建进程，但它会在 "HKEY_LOCAL_MACHINE\SOFTWARE\ **Wow6432Node** \MyApp" 中查找注册表路径。但由于我的应用程序是 64 位的，所有注册表项都在“HKEY_LOCAL_MACHINE\SOFTWARE\MyApp”中。结果 creatprocess fot 32 位图形 exe 失败。我的问题是“有什么办法让那些 32 位 exe 也在默认的 64 位注册表路径而不是 wow6432node 中查找注册表路径？”

PS 我无法将那些 32 位 exe 转换为 64 位，因为我没有这些 32 位图形 exe 的源代码。

请为我提供解决此问题的任何帮助。

问候..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:40:30.060

没有办法让那些 32 位 exe 也在默认的 64 位注册表路径而不是 wow6432node 中查找他们的注册表路径？”

唯一可能的解决方案是将 32 位 exe 移植到 64 位

# entity-framework-4 - 当表的所有字段不可为空但具有默认值时，我如何只更新部分字段

> ID：12088384
> 
> 赞同：0
> 
> 时间：2012-08-23T09:12:45.937
> 
> 标签：entity-framework-4, nullable, default-value

mysql 字段如下所示：

![](../Images/76c2b5a98d0a30d94b9b737f664a283c.png)

现有数据库上带有 mysql 的实体框架

我的应用程序是一个 mvc 4 项目，在现有数据库的 mysql 上使用 EF 4.4。

当表的所有字段都不可为空但具有默认值时，我如何只更新部分字段。当为部分字段创建或更新持久化到数据库时，EF 将自动为那些未明确指定的字段填充空值，并且我将收到异常。

我不想修改数据库。我能用这个做什么？谢谢你

编辑：

我的代码是这样的......您认为如何对其进行更改？

```
[HttpPost]
    public ActionResult Edit(Post_15 post)
    {
        if (ModelState.IsValid)
        {

            db.Entry(post).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(post);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:28:19.223

您必须为您的对象提供默认值（例如在构造函数中）。EF 不能很好地使用数据库默认值。使用默认更新 EF 始终为每列发送显式值。当您发送显式值时，不使用数据库的默认值。如果您未在应用程序中设置属性值，.NET 默认值将发送到数据库。

或者，您必须以完全不同的方式处理更新。您必须明确设置要更新的列，以确保 EF 不会更新其他列。

```
var entity = new YourEntity {
    Id = 123,
    ColumnToUpdate = "ABC"
};

objectContext.Attach(entity);
ObjectStateEntry entry = objectContext.ObjectStateManager.GetObjectStateEntry(entity);
entry.SetModifiedProperty("ColumnToUpdate");
objectContext.SaveChanges(); 
```

`ColumnToUpdate`即使有 20 个其他持久属性，此代码也会更新。

编辑：

DbContext 替代方案：

```
var entity = new YourEntity {
    Id = 123,
    ColumnToUpdate = "ABC"
};

dbContext.Entities.Attach(entity);
DbStateEntry<Entity> entry = dbContext.Entry(entity);
entry.Property(e => e.ColumnToUpdate).IsModified = true;
dbContext.SaveChanges(); 
```

旁注：只有 .NET 4.5 支持设置`IsModified`回 false。

# c# - 将 foreach 与索引结合

> ID：12088385
> 
> 赞同：1
> 
> 时间：2012-08-23T09:12:48.013
> 
> 标签：c#

> **可能重复：**
> [带有索引的 C# foreach](https://stackoverflow.com/questions/521687/c-sharp-foreach-with-index)

我喜欢在 C# 中使用 foreach 的简单性，但我经常需要一个索引。有没有办法将这些优雅地组合成一个简单的结构，而无需执行以下操作：

```
for(var i = 0; i<items.Count; i++) {
    var item = items[i]; 
```

或者

```
int i = 0;
foreach(var item in items) {
    i++; 
```

我会想象一些整洁的东西，例如：

```
foreach(var item in items;int index) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:14:46.410

是的，

我在 SO 上找到了一种简洁的扩展方法：

[带索引的 foreach](https://stackoverflow.com/questions/521687/c-sharp-foreach-with-index)

有点像这样（从以前的答案逐字）：

```
public static void Each<T>( this IEnumerable<T> ie, Action<T, int> action )
{
    var i = 0;
    foreach ( var e in ie ) action( e, i++ );
} 
```

并使用如下：

```
var strings = new List<string>();
strings.Each(( str, n ) =>
{
    // hooray can capture 'n' as well as 'str'
}); 
```

或者：

```
strings.Each((str, n) => Console.WriteLine(str)); 
```

# html - 如何在 php/html 中保留文本框选定的值

> ID：12088401
> 
> 赞同：0
> 
> 时间：2012-08-23T09:13:44.207
> 
> 标签：html, forms

我在 .php 中有一个类似于下面的表格。每当用户在列表框中选择或在我的表单的文本框中输入任何内容时，当他们单击提交时，它会在加载和检索数据后重置所选值。我想至少保留选定的值，直到它们离开页面。

```
<form action = "samefile.php" method = "post">
Enter Start Date <input type = '"text" name = "startdate" >     </br>
Enter End Date <input type = "'text" name = "enddate" >     </br>
Enter Organisation Name <input type = 'text" name = "organisation" >     </br>
submit <input type = '"submit" value = "Fetch Data" >     </br>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:22:22.430

只需回显帖子值：

```
 <input type="text" name="startdate" value="<?php echo isset($_POST['startdate']) ? htmlspecialchars($_POST['startdate']) : '' ?>" /> 
```

请记住使用`htmlspecialchars()`以避免代码注入。

# android - 我的自定义适配器 (android) 怎么了？

> ID：12088420
> 
> 赞同：1
> 
> 时间：2012-08-23T09:15:49.853
> 
> 标签：android, android-listview, android-adapter

我为我的 ListView 制作了一个适配器，如下所示：

```
SimpleAdapter adapter = new SimpleAdapter(this.getBaseContext(), listItem, R.layout.list_cell_icon, new String[] { "img", "title", "description" }, new int[] { R.id.img, R.id.title, R.id.description }) {

        @Override
        public boolean isEnabled (int position) {

            if(position == 1 || position == 2) {
                return false;
            }
            return true;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            View v = super.getView(position, convertView, parent);

            if(position == 1 || position == 2) {

                TextView tv = (TextView) v.findViewById(R.id.title);
                tv.setTextColor(Color.DKGRAY);
            }

            return v;
        }
    }; 
```

现在我想在列表中禁用两个项目，然后我想以深灰色显示文本。我的问题是位置 0 的行中的文本颜色也更改为深灰色。怎么可能 ？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:32:28.217

你需要添加这个：

```
TextView tv = (TextView) v.findViewById(R.id.title);    
if(position == 1 || position == 2) {
    tv.setTextColor(Color.DKGRAY);
} else {
    tv.setTextColor(Color.WHITE);
} 
```

原因是 getView 被多次调用，不一定按特定顺序调用，并且 getView 回收视图。因此，您的 TextView 对象很可能始终是同一个对象。因此，您必须将颜色设置回视图。或者，您可以使用 state 和 selected（如 TextView 上的 setEnabled(false)）

# c# - 查找一个多边形是否在另一个多边形内

> ID：12088423
> 
> 赞同：0
> 
> 时间：2012-08-23T09:15:54.620
> 
> 标签：c#, algorithm, geometry

我想通过给出每个顶点的点数组来确定一个多边形是否在另一个多边形内。有什么简单的方法可以做到这一点吗？ **编辑：**检查内部的最小点是否大于外部以及外部的最大点是否小于内部是不够的。这不是充分条件。证明： ![在此处输入图像描述](../Images/6ab3c89c0843888bdbd7947d7cb32b82.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:33:38.433

一旦您检查了多边形 A 的最小边界框位于多边形 BI 的边界框内，您就认为您将不得不检查 A 的每条边是否与 B 的所有边不相交。

我认为这是一种简单的方法，但我怀疑您确实想要一种更有效的聪明方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:45:27.603

我使用 Java2D 做了一些非常相似的事情，尤其是 Area 类。如果您想复制该功能，该类的代码是免费提供的。一个更简单的选择可能是查看这个库：[http](http://www.cs.man.ac.uk/~toby/alan/software/) ://www.cs.man.ac.uk/~toby/alan/software/它应该允许你做你想做的事或给你起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T15:15:09.160

1.  多边形 1 的某个点位于多边形 2 内

    你可以在这里使用光线投射

2.  多边形之间没有边-边相交

    对于大量边空间分区树可能会提高速度，对于少量边 N*M 枚举是可以的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T05:38:35.947

首先，使用轴对齐的边界框来查看它们是否彼此靠近。（基本上，在每个框周围绘制一个 XY 对齐的框，看看它们是否相交。这比多边形的情况要容易得多，并且通常可以节省大量时间。）

如果方框相交，您现在应该执行详细的相交测试。您需要绘制一条垂直于“外部”多边形的每一侧的线，并将它们的所有点都投影到线上。然后，检查内部多边形的结果点是否在从外部多边形投影的点之间。

我知道这个例子一开始很难形象化——我向对此领域感兴趣的人推荐这个关于碰撞检测的教程：

[http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/](http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/)

但是，如上所述，您的任务略有不同，因为您将投影到每一侧的垂直线上，并且您需要所有这些都包含该段。如果你想做很多这样的事情，我还建议你对投影和线性代数的概念有所了解。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-23T10:22:27.843

您的问题尚未确定-仅给出每个顶点的坐标不足以指定多边形。示例：画一个正方形并填充对角线。您的五个顶点是正方形的角和对角线交点处的点。从这些顶点可以构造四个*不同的*多边形：每一个都是使用原始图形的边构造的，同时从正方形中删除一条边并限制对角线（我希望这足够清楚）。

编辑：显然还不够清楚。令 a1、a2、a3、a4 为对应于正方形四个点的顶点（例如，从左上角顺时针方向），令 a5 为对应于正方形对角线交点的顶点。仅出于示例的目的，这里有两个适合上述顶点的多边形：1\. (a1,a2),(a2,a5),(a5,a3),(a3,a4),(a4,a1)。这应该看起来像一个面向右侧的吃豆人。2\. (a1,a2),(a2,a3),(a3,a4),(a4,a5),(a5,a1)。这应该看起来像一个面向左的吃豆人。

# java - 使用进度条

> ID：12088424
> 
> 赞同：0
> 
> 时间：2012-08-23T09:15:56.960
> 
> 标签：java, swing, look-and-feel, jprogressbar

> **可能重复：**
> [java中漂亮的进度条](https://stackoverflow.com/questions/8884297/nice-looking-progress-bar-in-java)

我使用`setBackground`and`setForeground`来设置 a 的颜色，`JProgressBar`但它们不起作用，颜色仍然是橙色。我无法改变它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:20:26.973

这可能是由于您安装的外观。这有帮助吗：[change-colors-for-jprogressbar-with-nimbus](https://stackoverflow.com/questions/7174420/change-colors-for-jprogressbar-with-nimbus)

# facebook - Facebook 打开图形对象链接到 Facebook 应用程序

> ID：12088427
> 
> 赞同：1
> 
> 时间：2012-08-23T09:16:00.497
> 
> 标签：facebook, web-applications, facebook-opengraph

我正在构建一个使用 Open Graph 的 Facebook 画布应用程序。因此，例如，该应用程序从[http://www.mysite.com/](http://www.mysite.com/)中提取内容，将发布到时间线的操作称为“Duncan在**我的应用程序上完成了****MyObject** ”

 **单击**我的应用**程序会在 Facebook 上打开应用程序页面。但是，单击**MyObject**链接会打开实际页面，其中我的所有元数据都添加到 Facebook www.mysite.com 之外

我真的只是希望两个链接都能在 Facebook 中打开应用程序。我在这里错过了一个技巧还是我执行重定向或其他什么的唯一解决方案？

我知道我需要让 Facebook 解析 mysite.com 才能获取元数据。但是，将 og:url 设置为我的应用程序的 url 并没有什么不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:38:47.800

我遇到了同样的问题。我最终制作了一个单独的 .jsp 文件，该文件在页面中写入了所有 og: 标签，并且在正文中它只包含：

```
<script>
    location.href = "<%=redirectUrl%>";
</script> 
```

redirectUrl 变量是我从原始请求的 URL 计算的字符串，它类似于“http://apps.facebook.com/xxxyyy?myParam=zzz”。当然，它可以是任何东西，可以是 PHP 或您使用的任何语言。

当您将操作发布到 Open Graph 时，请使用带有重定向的页面作为对象 URL。Facebook 会很好地解析 og 标签，当真正的浏览器读取页面时，它会将用户重定向到您的 Facebook 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:28:47.353

我有同样的问题，不确定我是否遗漏了一些非常明显的东西。

我有一个 PHP 文件，它遵循 Facebook 的示例文件。但是当单击时间轴故事上的对象时，我注意到以下 GET 参数：`fb_source=timeline_og`

因此，为了解决重定向问题，我将以下内容放在文件顶部，就在 PHP 标记内：

```
<?php
    if ($_GET['fb_source'] == 'timeline_og') {
        // clicked on link in timeline, so redirect to required URL
        header('Location: REDIRECT_URL_HERE');
    } 
```

（显然，替换`REDIRECT_URL_HERE`为您希望重定向到的任何 URL。）

希望有人会发现这很有用！**

# hbase - 在 HBase 中重用过滤器实例

> ID：12088428
> 
> 赞同：0
> 
> 时间：2012-08-23T09:16:01.940
> 
> 标签：hbase

有人知道 HBase 中的过滤器实例是否可以重用？
我的意思是，如果我需要，对于我的扫描，KeyOnlyFilter 或 SingleColumnValueFilter（这个具有在不同扫描之间不会改变的固定值）我可以实例化这些过滤器一次（例如作为我的 DAO 的实例成员）并重用他们在不同的扫描调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:18:24.867

过滤器实例可以重复使用，就像普通对象一样，只要列族和列限定符对于所有扫描都是相同的。

# java-me - j2me中的字符串到日期格式

> ID：12088429
> 
> 赞同：1
> 
> 时间：2012-08-23T09:16:03.940
> 
> 标签：java-me, lwuit

我有一个这样的字符串 `Wed, 22 Aug 2012 06:29:31 +0530`，现在我想将此字符串转换为日期格式，我需要显示日期`Wed, 22 Aug 2012`这样的日期并消除其他剩余的字符串？

我需要在我的 LWUIT 表单屏幕上显示日期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:03:44.630

```
String date = "Wed, 22 Aug 2012 06:29:31 +0530";
String shortDate = date.substring(0, 16); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T11:18:25.700

您需要使用 中的方法手动编写代码`java.util.Calendar`，我们在 Codename One 中做了一些格式化程序和本地化 API，因此您可以查看我们的代码以供参考或直接转到[Codename One](http://www.codenameone.com/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T16:13:48.700

对于此日期格式 "date_posted":"2012-04-19T16:45:33+01:00" 我使用以下代码。您可以根据需要对其进行自定义。

```
 try {
                String dateString = date_posted;
                String[] dateArray = Util.split(dateString, "T");
                String[] date = Util.split(dateArray[0], "-");
                String[] time = Util.split(dateArray[1], ":");
            Calendar calStart = Calendar.getInstance();
            calStart.set(Calendar.MONTH, Integer.parseInt(date[1]) - 1);
            calStart.set(Calendar.DAY_OF_MONTH, Integer.parseInt(date[2]));
            calStart.set(Calendar.YEAR, Integer.parseInt(date[0]));
            calStart.set(Calendar.HOUR_OF_DAY, Integer.parseInt(time[0]));
            calStart.set(Calendar.MINUTE, Integer.parseInt(time[1]));
            calStart.set(Calendar.MILLISECOND, 0);

            Date postDate = calStart.getTime();

            post_time = postDate.getTime();
        } catch (Exception ex) {
            Logger.err("fromJSON", ex);
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-02T16:41:06.680

我使用这样的东西：

```
String getDateString(Date date) {
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(date);

    int year = calendar.get(Calendar.YEAR);
    int month = calendar.get(Calendar.MONTH);
    int day = calendar.get(Calendar.DAY_OF_MONTH);
    int hour = calendar.get(Calendar.HOUR_OF_DAY);
    int minute = calendar.get(Calendar.MINUTE);
    int second = calendar.get(Calendar.SECOND);

    return new String(/*Any format you need*/);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T10:11:30.077

j2me 中没有将字符串转换为日期的特定方法。所以，这**根本不可能**。

# c# - 类属性是只读的（测试重构）

> ID：12088431
> 
> 赞同：1
> 
> 时间：2012-08-23T09:16:06.033
> 
> 标签：c#, .net, ado.net, nunit, system-testing

我继承了测试提供数据的 API 的代码。客户以 SQL 代码的形式提供预期结果。测试代码有一个实用程序类，其中包含用于将 ADO.NET 对象与 API 中的对象进行比较的 VerifyResult 的各种重载。它似乎不是很 OOP，所以我正在考虑重构。

这是一些伪代码：

```
[Test]
public void Book()
{
    DataRow expectedBook = 
        myTestUtility.GetBookUsingSqlForIsbn("978-0304359387");
    Book actualBook = API.GetBookForIsbn("978-0304359387");
    Assert.IsTrue(myTestUtility.VerifyResult(expectedBook, actualBook);
} 
```

在测试实用程序类中：

```
protected bool VerifyResult(DataRow expectedBook, Book actualBook)
{
    Assert.AreEqual(expectedBook["ISBN"],  
                    actualBook.ISBN, 
                    "Book ISBN does not match");

    Assert.AreEqual(expectedBook["AuthorName"], 
                    actualBook.AuthorName, 
                    "Book AuthorName does not match");
    …
} 
```

我的第一个重构是使用 API 对象中的值来构造一个 API 对象（例如 Book），然后编写一个自定义相等断言。但是，我并没有走多远：因为 API 只提供数据，它的类的属性是只读的（内部集），所以我无法创建具有自定义值的 Book 对象（API 都是使用继承的具体类，没有接口）。有没有办法绕过这个限制？

如果您可以提出完全不同的方法，请随意！

* * *

假设 API 类如下所示：

```
public class Point
{
    public int x { get; internal set; }
    public int y { get; internal set; }
}

public class Circle
{
    public int Radius { get; internal set; }
    public Point Pos { get; internal set; }
} 
```

是否可以继承这些 API 类型并使属性可写，同时允许将 API 的实例转换为新的子类型？

# c# - 如何获取附加到我的 aspx 页面的另一个 aspx 页面的代码文件

> ID：12088435
> 
> 赞同：1
> 
> 时间：2012-08-23T09:16:22.670
> 
> 标签：c#, asp.net, .net

我的问题是制作一个 aspx 文件的代码隐藏文件，即已经存在的 1.aspx 页 aspx.cs 可用于另一个页 aspx，而无需复制代码后面的任何代码。

即 1.aspx --> 代码文件为 1.aspx.cs。

现在 2.aspx --> 代码文件是 1.aspx.cs

在两个aspx页面中使用的控件具有相同Id的情况下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:20:13.673

老实说，如果您有这样的要求，您应该更好地将常见行为封装在可以由两个页面的专用类继承的基类中，或者创建包含代码的实用程序/业务类。

您还应该考虑使用用户控件。这可以帮助您在应用程序中创建可重用的可视化组件。

# java - BigInteger 没有限制是什么意思？

> ID：12088436
> 
> 赞同：57
> 
> 时间：2012-08-23T09:16:23.180
> 
> 标签：java, biginteger, integer-overflow

我查看了[与 Big Integer 有关的这个 stackoverflow 问题](https://stackoverflow.com/questions/2776400/biginteger-or-not-biginteger)，特别是我不明白这一行（斜体字）：

> 在 BigInteger 类中，*我没有任何限制*，并且那里有一些有用的函数，但是将漂亮的代码转换为与 BigInteger 类一起使用是非常令人沮丧的，特别是当原始运算符在那里不起作用并且您必须使用此类中的函数时.

我不知道我错过了什么，但要代表没有限制的东西，你需要无限的记忆吗？这里的诀窍是什么？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-08-23T09:18:23.713

没有*理论上*的限制。该类`BigInteger`为要求保存的所有数据位分配所需的内存。

但是，存在一些实际限制，由可用内存决定。还有进一步的技术限制，尽管你不太可能受到影响：一些方法假设这些位可以通过`int`索引来寻址，所以当你超过`Integer.MAX_VALUE`位时，事情就会开始中断。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-23T09:25:06.787

格雷厄姆对这个问题给出了很好的回答。我只想补充一点，你必须小心`valueOf`方法，因为它是使用`long`参数创建的，所以最大值是`Long.MAX_VALUE`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-23T09:31:13.520

是的，当我们需要具有任意精度的非常大的数字时使用它。请务必注意，“任意”精度或位数并不意味着“无限制”：它意味着计算中的位数或精度位数受内存和/或定义的精度限制我们指定的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-27T16:30:20.350

查看 BigInteger 类的源代码，您会看到（可以用 NetBean 完成）。一个数字将表示为一个 int 数组。例如，10113 将是 [1, 0, 1, 1, 3] （这并不是 BigInteger 类所做的，只是一个大数字模块如何工作的示例）。所以，从技术上讲，它唯一的限制是你的记忆。

# jqgrid - JQgrid获取行数（loadonce：true）

> ID：12088437
> 
> 赞同：0
> 
> 时间：2012-08-23T09:16:25.613
> 
> 标签：jqgrid, load

我有一个带有内联客户端搜索的 jqgrid。当数据库返回 0 条记录时，我试图隐藏网格并显示自定义消息。问题是现在当我使用过滤器时会发生同样的事情。我需要从后端响应中获取行数，并且以下行都不起作用。当页面加载时，我得到 5 和 5，当我过滤时，我得到 0 和 0。这是如何实现的？

```
 .jqGrid('getGridParam', 'records')
 .jqGrid('getGridParam', 'reccount')

var contratsAC=$("#ContratsAC");
contratsAC.jqGrid({
            url:'<?php echo base_url().'rest/AC_Rest/get_contrats/'?>',    
            mtype : "post",           
            datatype: "json",          
            colNames:['Nr dossier','Type','Nom','Statut','Date creation','Date derniere maj','Commentaires','Auteur'],   
            colModel:[  
                {name:'nr_dossier',index:'nr_dossier',search:false,  align:"center"},       
                {name:'type',index:'type',search:false, align:"center"},

                {name:'nomClient',index:'nomClient',search:false, align:"center"},
                {name:'statut',index:'statut',search: true, sortable: false,  width:180, stype:'select', 
                    searchoptions:{ value:statuts}, editable: false},
                {name:'date_cre',index:'date_cre',search:false,  align:"center"},
                {name:'dern_date_maj',index:'dern_date_maj',search:false, align:"center"},  
                {name:'commentaires',index:'commentaires',search:false, align:"center"}, 
                {name:'auteur',index:'auteur',search:false, align:"center"}                         
            ],
            rowNum:10,
            jsonReader: {
                 root: "rows", 
                  page: "page", 
                  total: "total", 
                  records: "records", 
                  repeatitems: false, 
                  id: "nr_dossier",
                  userdata: "userdata"
            },          
            width: 960,
            height: "100%",
            rowList:[10,20,30],
            pager: '#pager1',
            sortname: 'nr_dossier',
            viewrecords: true,
            rownumbers: true,
            gridview: true,
            loadonce: true,
            loadComplete: function(data){ 
                alert(contratsAC.jqGrid('getGridParam', 'records'));
                alert(contratsAC.jqGrid('getGridParam', 'reccount'));
                if (0==contratsAC.jqGrid('getGridParam', 'records'))
                {
                    contratsAC.jqGrid('GridUnload');
                    $("#contratsACNoDataMessage").html('<span>Aucun enregistrement a afficher.</span>');
                } 
                else $("#ContratsACContainer").show();
            },
            pagination:true,
            }).navGrid('#pager1',
                    {add: false, 
                    edit:false,
                    del:false});
contratsAC.jqGrid('filterToolbar',{searchOnEnter:true,stringResult: true}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:31:13.350

您可以尝试获取网格保存的数据数组的长度：

```
$("#ContratsAC").jqGrid('getGridParam', 'data').length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-23T16:35:55.540

下面将为您提供所有行 - 基于初始数据源

```
contratsAC.jqGrid('getGridParam', 'records'); 
```

要获取当前页面上的行数，让我们说过滤后，使用

```
contratsAC.jqGrid('getGridParam', 'reccount'); 
```

要在过滤后获取所有页面的所有记录，请使用下面

```
loadComplete: function (gridData) {
                    var isSearchPerformed = $grid.getGridParam("postData")._search;
                    if (isSearchPerformed) {
                        $("#spanFilterTotal").text(gridData.records);                        
                } 
```

# pentaho - pentaho 报表设计器 libFormulaErrorValue

> ID：12088443
> 
> 赞同：0
> 
> 时间：2012-08-23T09:16:41.583
> 
> 标签：pentaho

我有一个从查询数据中获取价值的公式

现在，如果查询数据为 0，我想跳过公式

例子：`[value1]-[value2]/[value1]*100`

如果 [value1] 为 0，则跳过公式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:12:45.210

首先，Pentaho Report Designer 内置了公式编辑器，在构建这些公式时可以大大简化您的生活。不确定从哪个版本开始可用，但在 3.6.1 中是肯定的。

同样在 Pentaho Wiki 中，您可能会发现一个描述公式表达式的有用页面：[http ://wiki.pentaho.com/display/Reporting/Formula+Expressions](http://wiki.pentaho.com/display/Reporting/Formula+Expressions)

至于您的特定问题，我认为这个公式应该有效：

=IF([value1] = 0; ""; [value1]-[value2]/[value1]*100)

每个公式都需要开始等号！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T05:20:19.970

通过观察您的公式，[value1] 字段存在于分母中，该字段可能有机会获得零（0）。这是逻辑错误。如果你处理那个，你可以克服这个错误。

对于您的情况，此公式将起作用。

```
= ( [value1]-[value2]/ IF(OR(ISEMPTYDATA([value1]); [value1] = 0)  ;1;[value1]) )*100 
```

# ios - UITableView reloadData 在另一个类中不起作用

> ID：12088446
> 
> 赞同：0
> 
> 时间：2012-08-23T09:17:05.173
> 
> 标签：ios, xcode, uitableview, reloaddata

我打电话有问题`reloadData`。我有 2 节课，我无法更新我的表。

我的`rootViewController.m`：

```
[self presentModalViewController:firstV animated:NO];

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *MyCellIdentifier = @"MyCellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyCellIdentifier];
    if(cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:MyCellIdentifier];
         cell.selectionStyle = UITableViewCellSelectionStyleGray;
        //cell.textLabel.text = @"dupa";
        //cell.textLabel.font = [ UIFont fontWithName: @"Arial" size: 50.0 ];
            }

    NSLog(@"xxx ===== %@",firstVC.xxx);

    UIImageView *imgView = [[UIImageView alloc]init];
    UILabel *rankLabel = [[UILabel alloc]init];
    UILabel *rankDetail = [[UILabel alloc]init];
    UILabel *cyclesLabel = [[UILabel alloc]init];
    UILabel *cyclesDetail = [[UILabel alloc]init];
    UILabel *approxLabel = [[UILabel alloc]init];
    UILabel *approxDetail = [[UILabel alloc]init];
    UILabel *leftP = [[UILabel alloc]init];
    UILabel *rightP = [[UILabel alloc]init];
    UILabel *leftQ = [[UILabel alloc]init];
    UILabel *rightQ = [[UILabel alloc]init];
    UILabel *timeLabel = [[UILabel alloc]init];
    UILabel *timeDetail = [[UILabel alloc]init];
    UILabel *freeProductLabel = [[UILabel alloc]init];
    UILabel *freeDetailLabel = [[UILabel alloc]init];

    NSString *approxString;
    NSString *leftPeqsString;
    NSString *rightPeqsString;
    NSString *leftQString;
    NSString *rightQString;

    switch (indexPath.row) {
        case 0:
            imgView.frame = CGRectMake(10.0, 15.0, 80.0, 80.0);
            imgView.image = [UIImage imageNamed:@"Ambassador@2x.jpeg"];
            imgView.layer.cornerRadius = 40;
            imgView.layer.masksToBounds = YES;
            //imgView.contentMode = UIViewContentModeScaleAspectFit;
            //cell.imageView.image = imgView.image;
            [cell.contentView addSubview:imgView];
            rankLabel.frame = CGRectMake(110.0, 45.0, 200.0, 50.0);
            rankLabel.text = firstVC.xxx;
            rankLabel.textColor = [UIColor orangeColor];
            rankLabel.font = [UIFont boldSystemFontOfSize:28];
            [cell.contentView addSubview:rankLabel];
            rankDetail.text = @"Your current rank:";
            rankDetail.frame = CGRectMake(110.0, 30.0, 200.0, 30.0);
            rankDetail.font = [UIFont boldSystemFontOfSize:16];
            [cell.contentView addSubview:rankDetail];
            //cell.textLabel.font = [UIFont systemFontOfSize:20];
            //cell.textLabel.textColor = [UIColor orangeColor];
            break;...` 
```

和`myFirstViewController.m`：

```
- (void)date:(NSString*)data
{
    ViewController *viewC = [[ViewController alloc]init];

    xxx = rank;
    NSLog(@"FVC rank xxx ==== %@", xxx);
    [viewC.tableView reloadData];

} 
```

为什么这不允许我更新我的表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:41:35.210

您需要在`rootcolntrollerview.h`（如下所示）中为 tableview 创建一个属性并将其合成`rootcolntrollerview.m`（`IBOutlet`如果您通过 creting tableview可以使用`xib`。否则您可以将其删除。）

```
@property (retain, nonatomic) IBOutlet UITableView *tableview_rootview; 
```

然后你可以`myfirstviewController.m`像下面这样重新加载数据：

```
[viewC.tableview_rootview reloadData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:34:12.397

`reloadData`没有被调用，因为 viewC 的视图没有被简单地加载到内存`[[ViewController alloc]init];`

中，因此 tableView 没有被初始化，因此没有为 tableView 调用 reloadData。

一旦您的 viewC 的视图至少出现在屏幕上，您就需要调用此行。

# git - 活动分支的 Git 拉取更改

> ID：12088449
> 
> 赞同：0
> 
> 时间：2012-08-23T09:17:19.613
> 
> 标签：git, github

问题很简单，如何在不使用完整命令的情况下为我的活动分支拉更改，`git pull origin <branch_name>`此命令必须有快捷方式，有吗？

```
git checkout -b feature_x
git push origin feature_x
git pull origin feature_x  # is there shortcut, keeping in mind this is active branch 
```

谢谢

**更新**

基于下面接受的答案，这是解释更多的输出

```
>git remote show origin
* remote origin
  Fetch URL: git@github.com:XXX/FooBar.git
  Push  URL: git@github.com:XXX/FooBar.git
  HEAD branch: master
  Remote branches:
    master       tracked
    feature_x    tracked
  Local branches configured for 'git pull':
    master       merges with remote master
    feature_x    merges with remote feature_x    
  Local refs configured for 'git push':
    master       pushes to master       (up to date)
    feature_x    pushes to feature_x    (up to date) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:37:35.937

`git push --set-upstream origin feature_x`将允许只是`git pull`一个简写`git pull origin feature_x`

# relational-database - 对用户名和密码进行哈希处理会产生任何安全优势吗？

> ID：12088453
> 
> 赞同：2
> 
> 时间：2012-08-23T09:17:33.363
> 
> 标签：relational-database, security, hash, password-encryption

对用户名和密码进行哈希处理会带来任何安全优势吗？我的意思是这个方案：

1.用户输入电子邮件地址 2.计算哈希（
电子邮件）地址
3.用户输入密码 计算哈希（密码）。
4.匹配值以指示登录成功或失败。

这是否会使破解的哈希与相应的用户匹配变得有点困难。

我不知道这是否已经被使用过，或者这个想法是否由于某种我没有想到的原因是不切实际的。我在搜索中没有找到任何东西，所以我在这里问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T09:23:52.493

这将使登录凭据更难破解，但这也意味着您将无法获得用户名的明文版本，这可能是您需要做的事情。

加强登录凭据安全性的最佳方法是对用户密码使用更强（即更慢）的加盐哈希算法，例如 bcrypt 或 PBKDF2。

请参阅[http://codahale.com/how-to-safely-store-a-password/](http://codahale.com/how-to-safely-store-a-password/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T09:22:01.170

我不是安全专家，但感觉应该增加一些安全性。但是，您可能很难以这种方式与您的用户交流。您不能通过电子邮件发送带有产品更新或月度发票的哈希。

# c++ - 你将如何支持 libQtCassandra 库中的超级列？

> ID：12088456
> 
> 赞同：0
> 
> 时间：2012-08-23T09:17:41.997
> 
> 标签：c++, cassandra, super-columns

我写了[libQtCassandra](http://snapwebsites.org/project/libqtcassandra)，当前版本不支持超级列。不添加该支持的一个原因是它破坏了库使用的方案，为用户提供了一种使用数组运算符 ([]) 访问和写入数据的方法。

如果您不熟悉，该库让您创建一个“上下文”（与 Ca​​ssandra 集群的连接），您可以从该上下文中编写如下内容：

```
// set value 123 in "column name" of "row key" of "column family":
context["column family"]["row key"]["column name"] = 123;
// retrieve that value:
int value = context["column family"]["row key"]["column name"]; 
```

所以……很简单。但是，如果我们引入超级列，我们会增加一个数组访问，这取决于是否存在超级列。你会怎么做？

你会使用函数来访问超级列吗？

```
context["column family"]["row key"].sc("super column")["column name"] = 123; 
```

或者你会让超级列像其他参数一样无缝工作？

```
context["column family"]["row key"]["super column"]["column name"] = 123; 
```

显然系统（列族）知道什么是什么。所以无论哪种方式都很容易实现，只是它使库变得更加复杂，以支持超级列的数组语法。

我有另一个想法是添加一个可以在指定行时使用的对象。但这看起来相当难看：

```
context["column family"][sc("row key", "super column")]["column name"] = 123; 
```

这更容易实现，但在查看最终代码时看起来不太好。

对于这样的问题，什么是更像 stl 或类似 boost 的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:52:35.390

Seems like introducing supercolumn support would only continue to encourage the use of a deprecated feature. Use of alternatives such as composites are a better approach to solving problems that push people toward supercolumns. I'm not sure the effort wouldn't actually be a movement in the wrong direction. In the meantime, if people MUST access supercolumns from a C++ app, they can do so using Thrift.

所以我的建议是讨论一种在 libQtCassandra 中添加复合支持的方法，因为它目前似乎不存在。通过这种方式，我们鼓励用户通过更轻松地访问正确的结构来做出更明智的数据模型选择。

# android - 如何像 iPhone 一样显示 Twitter 发帖对话框

> ID：12088457
> 
> 赞同：6
> 
> 时间：2012-08-23T09:17:42.543
> 
> 标签：android, twitter, twitter-oauth, twitter4j

我正在将 twitter 集成到我的应用程序中，并希望显示 iphone 中可用的 twitter 帖子对话框，如下图所示。

![在此处输入图像描述](../Images/5612ee195eafd256cee81c7c4c09d6bb.png)

我们可以在 Android 中有这个对话框吗？如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T09:23:49.890

我认为尝试将 UI 从一个平台复制到另一个平台是个坏主意。

我建议您使用共享意图：

[http://mobile.tutsplus.com/tutorials/android/android-sdk-implement-a-share-intent/](http://mobile.tutsplus.com/tutorials/android/android-sdk-implement-a-share-intent/)

[http://developer.android.com/training/sharing/send.html](http://developer.android.com/training/sharing/send.html)

它非常易于使用并与平台集成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T07:26:10.693

如果已安装，您可以通过从共享意图中查找 twitter 应用程序来做到这一点，但如果没有，您可以处理该情况并打开您的 twitter 应用程序页面，如下面的代码所示，因为我发现 twitter4j 难以集成并给出不一致的结果。

```
 Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
                    shareIntent.setType("text/plain");
                    shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "subject");
                    shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, " text";

                    final PackageManager pm = v.getContext().getPackageManager();
                    final List<ResolveInfo> activityList = pm.queryIntentActivities(shareIntent, 0);

                    boolean twtchk=false;

                    for (final ResolveInfo app : activityList) {

                        if ("com.twitter.android.PostActivity".equals(app.activityInfo.name)) {
                            final ActivityInfo activity = app.activityInfo;
                            System.out.println("package==="+activity.applicationInfo.packageName);
                            final ComponentName name = new ComponentName(activity.applicationInfo.packageName, activity.name);
                            shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);
                            shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
                            shareIntent.setComponent(name);
                            v.getContext().startActivity(shareIntent);
                            twtchk=true;
                            break;
                        }

                    }

                    if(!twtchk)
                    {
                        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://twitter.com/yourapp"));

                        startActivity(intent);
                    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T08:47:59.913

在 xml 中创建此视图并使用它。[这](http://www.javacodegeeks.com/2011/10/java-twitter-client-with-twitter4j.html)是使用 twitter4j 在 twitter 上发布字符串的教程

# vb.net - 如何从 VB.NET 调用 Magento API

> ID：12088459
> 
> 赞同：6
> 
> 时间：2012-08-23T09:17:49.270
> 
> 标签：vb.net, api, magento

Magento 有一个 API，似乎有些人正在通过 VB.NET 使用它，但在尝试了几个小时后我无法让它工作。

我在 Magento 1.7.0.2 上尝试让 VB.NET 应用程序与 API 一起工作。我正在使用符合 WS-I 的 Web 服务设置。

> 错误 1 ​​自定义工具错误：无法导入 WebService/Schema。无法从命名空间“urn:Magento”导入绑定“Mage_Api_Model_Server_Wsi_HandlerBinding”。命名空间“urn:Magento”中端口类型“Mage_Api_Model_Server_Wsi_HandlerPortType”的操作“catalogProductAttributeRemove”有以下语法错误：该操作没有匹配的绑定。检查 Binding 部分中的操作、输入和输出名称是否与 PortType 部分中的相应名称匹配。d:\Documents\Visual Studio 2010\Projects\Mage\Mage\My Project\Settings.settings 1 1 法师

如果我尝试将其添加为服务参考（而不是 Web 参考），我会收到一组不同的错误。

无法导入 wsdl:binding 无法导入 wsdl:port 无法导入 wsdl:portType

> 错误 5 自定义工具错误：无法为服务引用“ServiceReference1”生成代码。有关详细信息，请查看其他错误和警告消息。d:\Documents\Visual Studio 2010\Projects\Mage\Mage\Service References\ServiceReference1\Reference.svcmap 1 1 Mage
> 
> 警告 3 自定义工具警告：无法导入 wsdl:binding 详细信息：导入 wsdl:binding 所依赖的 wsdl:portType 时出错。wsdl:portType 的 XPath：//wsdl:definitions[@targetNamespace='urn:Magento']/wsdl:portType[@name='Mage_Api_Model_Server_Wsi_HandlerPortType'] 错误源的 XPath：//wsdl:definitions[@targetNamespace='urn: Magento']/wsdl:binding[@name='Mage_Api_Model_Server_Wsi_HandlerBinding'] d:\Documents\Visual Studio 2010\Projects\Mage\Mage\Service References\ServiceReference1\Reference.svcmap 1 1 Mage
> 
> 警告 4 自定义工具警告：无法导入 wsdl:port 详细信息：导入 wsdl:port 所依赖的 wsdl:binding 时出错。wsdl:binding 的 XPath: //wsdl:definitions[@targetNamespace='urn:Magento']/wsdl:binding[@name='Mage_Api_Model_Server_Wsi_HandlerBinding'] 错误源的 XPath: //wsdl:definitions[@targetNamespace='urn: Magento']/wsdl:service[@name='MagentoService']/wsdl:port[@name='Mage_Api_Model_Server_Wsi_HandlerPort'] d:\Documents\Visual Studio 2010\Projects\Mage\Mage\Service References\ServiceReference1\Reference.svcmap 1 1 法师
> 
> 警告 2 自定义工具警告：无法导入 wsdl:portType 详细信息：运行 WSDL 导入扩展时引发异常：System.ServiceModel.Description.XmlSerializerMessageContractImporter 错误：命名空间 urn:Magento 中名为 catalogProductAttributeRemoveRequest 的元素消息丢失。错误源的 XPath：//wsdl:definitions[@targetNamespace='urn:Magento']/wsdl:portType[@name='Mage_Api_Model_Server_Wsi_HandlerPortType'] d:\Documents\Visual Studio 2010\Projects\Mage\Mage\Service References\ ServiceReference1\Reference.svcmap 1 1 法师

有人可以给我关于如何拨打电话并获得结果的非常明确的说明/代码吗？我什至无法让初始配置正确。我已经下载了一些其他人在线提供的代码，但如果不起作用——可能是因为它是针对早期版本的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-09T08:19:18.267

终于得到了这个工作。

像往常一样添加您的网络服务（它将无法编译，但无论如何都会添加它）

打开 Magento.wsdl（或任何您的 VS 在您的 Web 参考中调用的 wsdl 文件）并完全删除对 catalogProductAttributeRemove 的调用。

```
 <!--wsdl:operation name="catalogProductAttributeRemove">
    <wsdl:documentation>Delete attribute</wsdl:documentation>
    <wsdl:input message="typens:catalogProductAttributeRemoveRequest" />
    <wsdl:output message="typens:catalogProductAttributeRemoveResponse" />
</wsdl:operation--> 
```

启动 Visual Studio 命令提示符并导航到您的项目，然后是“Web 引用”

类型：wsdl /language:VB /out:Reference.vb Magento.wsdl /namespace:com.yourwebservicename.www

这将正确生成您需要继续的 reference.vb 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T05:44:46.313

```
Function getHTTPStream() As String
    Dim myh As HttpWebRequest = _
    HttpWebRequest.Create("http://yourmagentoweb/soap/api/?wsdl")
    myh.Timeout = 30000
    myh.UserAgent = "Test"
    Dim myR As HttpWebResponse = myh.GetResponse()
    Dim myEnc As Encoding = Encoding.GetEncoding(1252)
    Dim mySr As StreamReader = New StreamReader(myR.GetResponseStream(), myEnc)

    Return mySr.ReadToEnd()
End Function 
```

该代码显然需要调整-我没有时间美化这些东西

* * *

来自 Abid Hussain 的链接

**1\. 使用 wdsl 工具，我通过调用创建了一个 .vb 源文件：**

> wsdl /language:VB /out:MageProxyClass.vb http:///api/v2_soap?wsdl

**2.之后我使用VB命令行编辑器将源文件编译成dll。**

> vbc /out:MageProxyClass.dll /t:library /r:System.XML.dll,System.Web.Services.dll MageProxyClass.vb

**3\. 最后我能够创建在我的 MageProxyClass.dll 中定义的 MagentoService 类的实例**

```
Private WithEvents msvc As New MagentoService() 
```

**4\. 示例：**

```
 Public Class main
    Private WithEvents msvc As New MagentoService()
    Private ssid As String
    Private Sub main_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        ListBox1.Items.Clear()
        ListBox1.Items.Add("Trying to connect")
        msvc.loginAsync("xxxx", "xxxxxxxxxxxxxxxx")
    End Sub

    Public Sub MageLoginComplete(ByVal sender As System.Object, ByVal e As loginCompletedEventArgs) Handles msvc.loginCompleted
        ListBox1.Items.Add("Login completed")
        ssid = e.Result
        ListBox1.Items.Add(String.Concat("Session ID: ", ssid))
    End Sub
End Class 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T20:33:16.987

你可能想试试这个例子

*   [http://www.dhmedia.com.au/blog/improved-net-soap-example](http://www.dhmedia.com.au/blog/improved-net-soap-example)

还可以在这里找到更详细的 Magento C# 库：

*   [http://code.google.com/p/cshalibformagexmlrpcapi/](http://code.google.com/p/csharlibformagexmlrpcapi/)

# javascript - 在动态元素上使用 .on() 和 e.stopPropagation()

> ID：12088460
> 
> 赞同：8
> 
> 时间：2012-08-23T09:17:56.063
> 
> 标签：javascript, javascript-events, jquery

我一直在尝试使用`stopPropagation()`.

```
$(".container").children().on('click',function(e){
  e.stopPropagation();    
});
$(".container").on("click",function(){
  alert("outside the box?");    
})​ 
```

[这是一个 jsFiddle 设置来演示它的功能](http://jsfiddle.net/2YNbp/)。当您单击白框外的任何位置时，应触发警报。

现在，我试图将相同的原则应用于动态创建的元素。据我了解，`on()`jQuery 中的事件分配方法应该允许它在不更改脚本的情况下运行。

[这是第二个 jsFiddle](http://jsfiddle.net/GsLtN/1/)，您必须首先单击链接来创建元素。完成此操作后，理论上相同的脚本将起作用，但事实并非如此。我对这种方法缺少什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T09:22:44.710

当项目被动态添加时，您应该将处理程序附加到肯定会存在的最近的父级 - 在您的情况下，这是`body`. 您可以使用[`on()`这种方式来实现](http://api.jquery.com/on/#direct-and-delegated-events)[`delegate()`](http://api.jquery.com/delegate/)曾经提供的功能：

> > $( *selector-for-parent* ).on( *events* , *selector-for-dynamic-children* , *handler* );

所以你重写的代码就是这样的：

```
$("body").on('click', '.container', function(e){
    var $target = $(e.target);
    if ($target.hasClass('container')) {
        alert("outside the box!");
    }
}); 
```

我过去常常[`e.target`](http://api.jquery.com/event.target/)查找实际触发事件的元素。在这种情况下，我通过检查它是否具有`container`类来识别该项目。

[jsFiddle 演示](http://jsfiddle.net/GsLtN/9/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T09:23:42.527

简而言之，您需要添加`on()`现有的父元素才能使其工作：

```
$('body').on('click', 'a', function(e){
    e.preventDefault();
    $('<div class="container"><div class="box"></div></div>').appendTo('body');
    $(this).remove();
});

$('body').on('click', '.container > *', function(e){
  e.stopPropagation();    
});

$('body').on('click', '.container', function(){
  alert("outside the box?");    
})​ 
```

代码：http: [//jsfiddle.net/GsLtN/5/](http://jsfiddle.net/GsLtN/5/)

有关更多详细信息，请查看官方网站上“直接和委托事件”部分的[“.on() ”](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T09:22:22.980

您需要将 绑定`.on()`到父级。

您要做的是 - 将处理程序绑定到侦听事件的父级，然后检查事件是否由与该选择器匹配的元素触发。

```
$("body").on("click", '.container',function(){
  alert("outside the box?");    
})​ 
```

[在这里](http://jsfiddle.net/mrobin/GsLtN/2/)更新小提琴

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T09:23:43.853

***[演示。](http://jsfiddle.net/GsLtN/4/)***

当您将事件处理程序绑定到元素 use`.on`时，您绑定的目标必须存在于文档中。

```
$('body').on('click', '.container > *', function(e){
  e.stopPropagation();    
});
$('body').on("click",'.container',function(){
  alert("outside the box?");    
})​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T09:24:33.990

根据以下文档[`jQuery.on()`](http://api.jquery.com/on/)：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用`.on()`.

您必须将事件绑定到父容器。也许是这样[的](http://jsfiddle.net/mhusaini/jpKCt/)。

# visual-studio-2010 - 如何在网站项目中添加上下文菜单条目？

> ID：12088469
> 
> 赞同：3
> 
> 时间：2012-08-23T09:18:32.717
> 
> 标签：visual-studio-2010, vsx, vsix

我无法为网站项目项添加上下文菜单条目。

**如何重现问题：**

1.  创建一个 VS 包项目
2.  转到 vsct 文件并将该`groups`部分替换为：

    ```
    <Group guid="guidVSPackage1CmdSet" id="MyMenuGroup" priority="0x0600">
       <Parent guid="guidSHLMainMenu" id="IDM_VS_MENU_TOOLS"/>
    </Group>

    <Group guid="guidVSPackage1CmdSet" id="MyMenuGroup" priority="0x0600">
       <Parent guid="guidSHLMainMenu" id="IDM_VS_CTXT_PROJNODE"/>
    </Group>

    <Group guid="guidVSPackage1CmdSet" id="MyMenuGroup" priority="0x0600">
       <Parent guid="guidSHLMainMenu" id="IDM_VS_CTXT_ITEMNODE"/>
    </Group>

    <Group guid="guidVSPackage1CmdSet" id="MyMenuGroup" priority="0x0600">
       <Parent guid="guidSHLMainMenu" id="IDM_VS_CTXT_FOLDERNODE"/>
    </Group>

    <Group guid="guidVSPackage1CmdSet" id="MyMenuGroup" priority="0x0600">
       <Parent guid="guidSHLMainMenu" id="IDM_VS_CTXT_SOLNNODE"/>
    </Group> 
    ```

3.  调试包并查看：这将为简单的 C# 项目中的解决方案、项目和项目项添加一个条目。但是当我创建一个 ASP.NET 网站项目（文件->新建->网站）时，除了解决方案项之外，我不会得到这些条目。

我确信这一定是可能的，因为 NuGet 具有网站项目项的条目。不幸的是，我无法从 NuGet 源代码中提取那段代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T14:54:35.910

过了一会儿，我找到了解决方案：（我不小心查看了 StyleCop 源代码：P）

```
<Group guid="guidVSPackage1CmdSet" id="MyMenuGroup" priority="0x0050">
  <Parent guid="guidSHLMainMenu" id="IDM_VS_CTXT_WEBFOLDER"/>
</Group>

<Group guid="guidVSPackage1CmdSet" id="MyMenuGroup" priority="0x0050">
  <Parent guid="guidSHLMainMenu" id="IDM_VS_CTXT_WEBITEMNODE"/>
</Group>

<Group guid="guidVSPackage1CmdSet" id="MyMenuGroup" priority="0x0050">
  <Parent guid="guidSHLMainMenu" id="IDM_VS_CTXT_WEBPROJECT"/>
</Group> 
```

这些没有记录在[MSDN](http://msdn.microsoft.com/en-us/library/bb163231%28v=vs.100%29)上。

无论如何，我很好奇 NuGet 是如何做到的，因为它们在`vsct`文件中没有任何内容，而是上下文菜单中的一个条目。

# r - 在r中的igraph中均匀地间隔顶点

> ID：12088473
> 
> 赞同：2
> 
> 时间：2012-08-23T09:18:43.320
> 
> 标签：r, spacing, igraph, vertices

我有以下图表

```
set.seed(1410)
df<-data.frame(
"site.x"=c(rep("a",3),rep("b",3),rep("c",3),rep("d",3)),
"site.y"=c(rep(c("e","f","g"),4)),
"bond.strength"=sample(1:100,12, replace=TRUE))

library(igraph)
df<-graph.data.frame(df)
V(df)$names <- c("a","b","c","d","e","f","g")
layOUT<-data.frame(x=c(rep(1,4),rep(2,3)),y=c(4:1,3:1))
E(df)[ bond.strength < 101 ]$color <- "red"
E(df)[ bond.strength < 67 ]$color <- "yellow"
E(df)[ bond.strength < 34 ]$color <- "green"
V(df)$color <- "white"
l<-as.matrix(layOUT)
plot(df,layout=l,vertex.size=10,vertex.label=V(df)$names,
edge.arrow.size=0.01,vertex.label.color = "black") 
```

![在此处输入图像描述](../Images/f69135ad2129de70737a691aba79176c.png)

我想沿着顶点 a 和 d 之间的垂直距离均匀分布顶点“ge”，以使我当前的图形（见下文）更漂亮。如您所见，这里非常拥挤。

![在此处输入图像描述](../Images/4959d1416db57970005f96f9233986e7.png)

此外，我想将两列顶点在 x 轴上靠得更近，但我注意到调整布局中的 x 坐标没有响应。例如，以下两个布局生成的图形看起来完全相同，尽管 x 坐标进行了剧烈调整。

```
layOUT<-data.frame(x=c(rep(1,4),rep(2,3)),y=c(4:1,3:1))

layOUT<-data.frame(x=c(rep(1,4),rep(100,3)),y=c(4:1,3:1)) 
```

感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:33:37.500

您的第二个问题更容易回答：igraph 将布局重新缩放为坐标系中由 (-1, -1) 和 (1,1) 跨越的矩形。如果您想避免这种情况，请传递`rescale=FALSE`给该`plot`函数——但在这种情况下，您需要确保坐标确实有意义并且不在绘图区域之外。

关于您的第一个问题：由于您是在`layOUT`变量中手动构建布局，因此没有什么可以阻止您手动调整 Y 坐标。首先，从 获取 X=1 的顶点的最小和最大 Y 坐标`layOUT`：

```
min.y <- min(layOUT$y[layOUT$x == 1])
max.y <- max(layOUT$y[layOUT$x == 1]) 
```

然后只需在 min.y 和 max.y 之间均匀地隔开 X 坐标为 2 的顶点的 Y 坐标：

```
vs.on.right <- which(layOUT$x == 2)
n <- length(vs.on.right)
layOUT$y[vs.on.right] <- (0:n)*(max.y-min.y)/n + min.y 
```

# ruby-on-rails - 捕获/克隆到达生产服务器的数据包并使用它们来测试登台服务器

> ID：12088475
> 
> 赞同：1
> 
> 时间：2012-08-23T09:18:44.323
> 
> 标签：ruby-on-rails, testing, socket.io, tcpdump

我们有一个在生产中非常复杂的应用程序，它涉及实时通信。主要组件是一个响应 http 请求的 Ruby on Rails 应用程序和一个处理实时通信部分的 socket-io 服务器。

我想做的是捕获/克隆进入生产的数据包，并使用它们在“真实”负载下的暂存系统上测试对我们应用程序关键部分的更新，而不会冒破坏生产的风险。我认为这可以通过两种方式实现。

**选项 1** - 即时克隆生产流量并将其发送到登台。

**选项 2** - 将生产流量样本存储并重播到登台。

在这两种情况下，我们可能都需要忽略暂存的响应，而是将它们记录下来或仅将它们发送给选定的客户端。

我一直在研究使用 tcpdump 和 tcpreplay 等一些 linux 工具来实现这一点。这当然看起来有可能，但在我一头扎进这个问题之前，我想检查一下是否有人以前做过这个，以及他们使用了什么样的方法。

# java - FileNameFilter 实现的 Java 正则表达式

> ID：12088479
> 
> 赞同：4
> 
> 时间：2012-08-23T09:19:00.543
> 
> 标签：java, regex

我需要扫描文件夹并过滤与特定正则表达式模式匹配的文件。

***FileNameFilter 的 accept 方法中的示例代码***

* * *

```
Scanner fileNameScanner = new Scanner(fileName);

Pattern mainPattern = Pattern.compile(this.pattern);

fileNameScanner.findInLine(mainPattern);

MatchResult result = fileNameScanner.match(); 
```

* * *

现在，我需要一个正则表达式来过滤匹配名称为 impl-2.0.xml 的文件的文件，同时它不应该匹配 impl-Test-2.0.xml。

我尝试了一些设置，但似乎不起作用。它也选择 impl-Test-2.0.xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:34:13.567

> 我很高兴`<one or more characters of any type>-<single digit>.<single digit>.xml`

“*任何类型的字符*”是正则表达式中的危险语句！如果我们通过假设您对任何字母或数字感到满意来限制这一点会更好。基于该假设，您希望：

```
Pattern p = Pattern.compile("\\w+-\\d\\.\\d\\.xml"); 
```

它将匹配 az、AZ、0-9 范围内的字符，后跟连字符、一位数字、句点、一位数字和`.xml`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:36:34.000

[在Regexr](http://regexr.com?31u01)上查看它的实际效果：

```
^\w+-\d\.\d\.xml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:54:42.237

**评论后编辑**

对于大小数量有限的绝对路径

`Pattern.compile(".*impl-[0-9]{1,2}\\.[0-9]{1,2}.xml");`

对于名称文件：

`Pattern.compile("impl-[0-9]+\\.[0-9]+.xml");`

**编辑 2**

```
final Pattern patt = Pattern.compile("^\\p{Alnum}+\\-[0-9]+\\.[0-9]+.xml$"); 
```

安慰

```
impl-3.0.xml
api-3.0.xml
x10-2.0.xml 
```

`^`如果您 grep 绝对路径，则可以用 Java 路径分隔符替换

# php - 使表单处理脚本更安全

> ID：12088487
> 
> 赞同：1
> 
> 时间：2012-08-23T09:19:27.780
> 
> 标签：php

我可以使用哪些步骤来使其更安全？

```
<?php
foreach ($_POST as $field=>$value)
{
$formcontent .= "$field: $value\n";
}
$formcontent .= 'User-Agent: '.$_SERVER['HTTP_USER_AGENT'];

$recipient = "****.***y@***********.co.uk";
$subject = "Event feedback form";
$mailheader = "From: web.form@**********.co.uk\r\n";
$mailheader .= "Reply-To: $email\r\n";
$mailheader .= "MIME-Version: 1.0\r\n";

mail($recipient, $subject, $formcontent, $mailheader) or die("Failure!");
header("location:http://www.**********.co.uk");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:25:06.630

在此处查看推荐的答案：[此 mail() 函数是否可以防止标头注入？](https://stackoverflow.com/questions/11040328/is-this-mail-function-safe-from-header-injection). 由于您没有存储在数据库中或使用附件，因此您的风险在于邮件标题中可能出现新行。如果您按照那里的说明进行操作，则可以过滤掉新行，就可以了。

希望有帮助！干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:23:59.970

您可能希望将[htmlentities](http://php.net/htmlentities)应用于 $value 以防止跨站点脚本。

```
$formcontent .= "$field: " . htmlentites($value) . "\n"; 
```

否则，没关系，因为您的值不会进入数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T09:24:48.373

使用[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)清理变量！

# javascript - 在drupaL 7中附加js文件以阻止？

> ID：12088490
> 
> 赞同：0
> 
> 时间：2012-08-23T09:19:38.017
> 
> 标签：javascript, drupal-7

我想将 JavaScript 文件附加到特定的块模块。我知道我需要添加 with `drupal_add_js()`，但我不确定在哪里放置此代码。

如果有人可以显示带有简单函数的 JavaScript 文件的代码`alert()`，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:23:05.850

将它添加到您的主题 pre_process 函数中，然后使用 Drupal add_js 和 get_path 方法将其指向正确的方向。

```
hook_preprocess_page(&$variables) {
    drupal_add_js(drupal_get_path('theme', 'THEME_NAME') .'/js/my_js_file.js');
    ...
} 
```

# c# - 在 awesomium 中执行 javascript 以单击 div

> ID：12088491
> 
> 赞同：3
> 
> 时间：2012-08-23T09:19:38.813
> 
> 标签：c#, javascript, winforms, awesomium

我在 C# winforms 应用程序中使用 Awesomium 来单击网页内的 div。

如果您直接在 google chrome 中键入以下脚本，则可以正常工作：

```
javascript: document.getElementById('ac_play').click(); 
```

但是当我尝试使用以下任一方法在 awesomium 中执行它时：

```
webControl1.ExecuteJavascript("document.getElementById('ac_play').click();"); 
```

或这个：

```
webControl1.LoadURL("javascript: document.getElementById('ac_play').click();"); 
```

它不工作。这让我想到 - Awesomium 是否支持“div clicks”？或者也许还有其他原因导致它不起作用？

我也尝试过执行代码：

*   在 LoadCompleted 事件上（确保页面完全加载）
*   通过在“addressBox1”（本机 awesomium“地址栏”控件）中手动键入脚本

像往常一样 - 没有任何工作。

**编辑：**

我已经在 GeckoFX 中测试了相同的 javascript，但它也无法在那里工作。有什么解决方法吗？

**编辑2**

Standart WebBrowser 控件完美执行脚本！（虽然它使用的是 IE5 左右......这就是为什么我希望看到 Awesomium 解决方案有效）。

PS它在webcontrol中工作，现在它不是;(我如何重置它？PPS我删除了IE中的缓存，但使用标准WebBrowser太不可靠了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-04T09:35:52.573

请记住，您必须使用as等待`DocumentReady`事件（不是- 因为那时 Awesomium 还没有准备好）`DocumentReadyState``Loaded``Ready`

```
private void WebControl_DocumentReady(object sender, DocumentReadyEventArgs e)
{
    if (e.ReadyState != DocumentReadyState.Loaded) return;
    //Here ExecuteJavascript should work
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T17:39:57.043

```
public void JsFireEvent(string getElementQuery, string eventName)
{
    webControl1.ExecuteJavascript(@"
                        function fireEvent(element,event) {
                            var evt = document.createEvent('HTMLEvents');
                            evt.initEvent(event, true, true ); // event type,bubbling,cancelable
                            element.dispatchEvent(evt);                                 
                        }
                        " + String.Format("fireEvent({0}, '{1}');", getElementQuery, eventName));
}

JsFireEvent("document.getElementById('ac_play')", "click"); 
```

[关联](http://answers.awesomium.com/questions/2601/javascript-click-on-img-o-a-tag-doesnt-works.html)

# facebook - Facebook 页面长期访问令牌

> ID：12088497
> 
> 赞同：0
> 
> 时间：2012-08-23T09:20:05.850
> 
> 标签：facebook, token

虽然 Facebook 文档似乎完全关于贬低离线访问令牌，但我似乎对自己的情况感到难过。我的访问令牌已减少到大约两个小时的生命周期，从 CRON 作业运行我的页面会造成混乱。直到上周，它工作了大约四个月。

这是我的代码。有什么想法可以在这里添加吗？我有 manage_pages 权限，正如我所说，它曾经可以正常工作。

```
try {
$page_info = $facebook->api("/$news_page?fields=access_token");
if ( !empty($page_info['access_token']) )   {
    $tkk = $page_info['access_token'];
    $r = mysql('database', "update facebook set access_token = '$tkk' where email='$news_email'");

    $args = array(
        'access_token'  => $page_info['access_token'],
        'message'       => $u,
        'link'          => $news_url,
        'description'   => $news_text,
        'name'          => $news_title,
        'picture'       => $image
    );

    $post_id = $facebook->api("/$news_page/feed","post",$args);
}
} catch (FacebookApiException $e) {
error_log($e);
$user = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:41:32.247

这已被Facebook[标记为已知错误](https://developers.facebook.com/bugs/341793929223330)。只需要坐下来等待:(

# asp.net - 会话值到文本框值

> ID：12088501
> 
> 赞同：0
> 
> 时间：2012-08-23T09:20:18.387
> 
> 标签：asp.net

如何调用 Session 并将其用作 Text Box Form 的值。我正在使用 asp.net

```
<form id="frmLog" name="frmLog" method="post" action="/Page/">
<input type="text" name="UserId" value="<%=Sessiopn["UserID"] %>">" />
</form> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:24:55.357

更正到这一点。你有一个打字错误。

```
<input type="text" name="UserId" value="<%=Session["UserID"] %>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:23:41.820

您对变量名有错误（没有 p）

会话 -> 会话

# extjs4 - 删除 Storeitem 而不向 ExtJS4 中的服务器发送删除请求

> ID：12088502
> 
> 赞同：0
> 
> 时间：2012-08-23T09:20:18.767
> 
> 标签：extjs4, extjs4.1

我想使用 删除 ExtJS4.1 中的 Storeitem `store.remove(item)`，但我不想向服务器发送删除请求。

在商店代理 api 中，我只定义了 read-Url：

`api: { read: '/daten/zhalter' }`

现在，当我删除该项目时，会引发 javascript 错误。我发现它的出现是因为我没有定义 destroy-url，当我定义一个时，一切都很好。

我的问题是：如何在不发送删除请求的情况下删除项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:47:18.573

我自己找到了答案。我`autosync`关闭了该命令：

```
quellStore.autoSync = 假；    
quellStore.remove（项目）；    
quellStore.autoSync = true;

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:23:49.270

您应该添加销毁属性：

> api: {destory: 'url/delete'}

然后使用：

> store.sync();

# jquery - 在 jquery poshytip 中调整字体大小

> ID：12088503
> 
> 赞同：1
> 
> 时间：2012-08-23T09:20:18.813
> 
> 标签：jquery, popup, mouseover, font-size

我有鼠标悬停时出现的 poshytips，其设计如下：

```
// Function to make poshytip table
    function maketip1(t) {
        // console.log(d)
        var d= t.properties.ID
        var num = 1
        var region_name = allData.metadata.region_names[d]
        var metric_name = allData.data[d][current_settings.surveys[num]][current_settings.variables[num]].name
        var value = String(allData.data[d][current_settings.surveys[num]][current_settings.variables[num]].value*100).substring(0,5)
        var table = '<table><tr><td><u><b>' + region_name + '</b></u></td><tr><td><u>' + metric_name + ': </u></td><td>' + value + '</td></tr></table>'
        return table;
    }

// Make poshytips pop up for reg-path1 class
    $('.reg-path1').poshytip({
        content: function() {
            return maketip1(this.__data__); 
        },
        className: 'tip-ihme',
        slide:      false,
        followCursor:   true,
        alignTo:    'cursor',
        alignX:     'center'
    }); 
```

我尝试将以下参数传递给 .poshytip 调用，没有任何更改：

```
fontSize = 25
fontSize = '25'
fontSize = '25px' 
```

我也尝试过创建一个与 .poshytip 调用中的 className 参数相对应的 css 类：

```
.tip-ihme {
    font-size: 25px;
} 
```

如何在弹出的 poshytips 中调整字体大小？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T21:17:48.847

在返回的表格中，在您的 html 代码之前包含以下标记：

```
<font size=3> 
```

在这种情况下：

```
var table = '<font size=3><table><tr><td><u><b>' + region_name + '</b></u></td><tr><td><u>' + metric_name + ': </u></td><td>' + value + '</td></tr></table>' 
```

# perl - Perl Net::SMTP 中的怪异

> ID：12088504
> 
> 赞同：0
> 
> 时间：2012-08-23T09:20:25.600
> 
> 标签：perl, email, smtp

在 for 循环中使用 Net::SMTP 时，我遇到了一些问题。第一次迭代有效，但在第二次迭代中，脚本因无法在未定义的值上调用方法“mail”而死...，该行称为

```
$smtp->mail('hacker@hacker.net'); #from. 
```

有任何想法吗？！谢谢你的时间！

```
use strict;
use warnings;

use Net::SMTP;

my $smtp;

#@data is defined and populated somewhere

foreach my $line (@data) {

  my @linearray = split /,/, $line;
  my $host = $linearray[2];

  $host =~ s/\r|\n//g;

  next unless ($host =~  m/([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3}).([0-9]{1,3})/); # skip if it's not an IP (i.e. it's the header row)
  print "Connecting to $host...";

  # create object
  $smtp = Net::SMTP->new(
    Hello => 'hacker.net',
    Timeout => 3,
    Host => $host,
    Debug => 1,
  );
  $smtp->mail('hacker@hacker.net'); #from
  my $tocheck = $smtp->recipient('my_email@sanitised.com'); #to
  if ($tocheck == 0) {
    print "$host is NOT an open relay\n";
    #$smtp->quit;
    next;
  }

  $smtp->data();
  $smtp->datasend("Test\n");
  $smtp->datasend("\n");
  $smtp->datasend("A simple test message\n");
  $smtp->dataend();
  $smtp->quit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:43:25.217

我猜你`$host`没有有效的 SMTP 服务器地址。正则表达式仅检查它是否*包含*某处可能是有效 IP 地址的内容。`999.999.999.999`例如，无效。空格也可能会破坏事物，因此`' 127.0.0.1 '`也不起作用。最后，该地址可能没有有效的 SMTP 服务器，即使它是合法的 IP 地址，因此您的构造器无论如何都可能失败。

此替代正则表达式检查*整个字符串*是否与每个字段中只有 0..255 个值的有效 IP 地址匹配。

```
/\A(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\z/ 
```

您应该检查构造函数的返回值，并在失败时发出警告：

```
$smtp = Net::SMTP->new(
  Hello => 'hacker.net',
  Timeout => 3,
  Host => $host,
  Debug => 1,
);
unless ($smtp) {
  warn "Unable to connect to to SMTP server '$host'";
  next;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:13:41.350

解决。这条尾巴在两腿之间稍稍。事实证明，已经就这个问题联系了给我的 IP 列表，因此有些人已经开始采取措施解决这个问题。一种这样的措施是使用与受信任中继不同的源 IP 阻止 TCP 端口 25（不是我的 IP，只是为了澄清）。因此，创建 Net::SMTP 只是失败了。因此，重新引入 Borodin 建议的块（我在尝试调试此问题时已将其删除）修复了所有问题。感谢您的帮助 - 非常感谢。

# mysql - 使用 group by、where 和 'flag' 优化对单个表的查询

> ID：12088507
> 
> 赞同：0
> 
> 时间：2012-08-23T09:20:26.863
> 
> 标签：mysql, sql, performance

我正在为反复使用的查询类型的性能而苦苦挣扎。任何帮助将不胜感激。

我有下表：

```
 item week type  flag   value
    1    1    5     0      0.93 
    1    1    12    1      0.58 
    1    1    12    0      0.92 
    1    2    6     0      0.47 
    1    2    5     0      0.71 
    1    2    5     1      0.22
    ...  ...  ...   ...    ... 
```

（完整的表有大约 10k 个不同的项目，200 个周，1k 种类型。标志是 0 或 1。总共大约 20M 行）

我想优化以下查询：

```
 select item, week, 
    sum(value) as total_value,
    sum(value * (1-least(flag, 1))) as unflagged_value
    from test_table 
    where type in (5,10,14,22,114,116,121,123,124,2358,2363,2381) 
    group by item, week; 
```

目前，我能得到的最快速度是使用（类型、项目、周）和引擎 = MyIsam 的索引。（我在标准桌面上使用 mysql）。

您有什么建议（指数、重新表述等）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T10:14:44.047

根据我的知识`GROUP BY`查询只能通过[覆盖索引进行完全优化。](https://stackoverflow.com/questions/11578241/is-there-any-way-to-check-the-performance-of-mysql-indexing/11578264#11578264)

在您的桌子上添加以下内容`covering index`并检查`EXPLAIN`：

```
ALTER TABLE test_table  ADD KEY ix1 (type, item, week, value, flag); 
```

在使用以下查询添加索引检查后`EXPLAIN`：

```
SELECT type, item, week,
    SUM(value) AS total_value,
    SUM(IF(flag = 1, value, 0)) AS unflagged_value
FROM test_table
WHERE type IN(5,10,14,22,114,116,121,123,124,2358,2363,2381)
GROUP BY type, item, week; 
```

您可能需要像这样修改您的查询：

```
SELECT item, week,
       SUM(total_value) AS total_value,
       SUM(unflagged_value) AS unflagged_value
FROM(
    SELECT type, item, week,
        SUM(value) AS total_value,
        SUM(IF(flag = 1, value, 0)) AS unflagged_value
    FROM test_table
    GROUP BY type, item, week
)a
WHERE type IN(5,10,14,22,114,116,121,123,124,2358,2363,2381)
GROUP BY item, week; 
```

请参阅查询执行计划。[SQLFIDDLE 演示在这里](http://sqlfiddle.com/#!2/bfad9/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:25:36.237

我认为您应该在表中只有两个索引

```
1\. An index on type (non clustered)
2\. A composite index on (item, week) in the same order (non clustered) 
```

# html - 如何重叠表格行？

> ID：12088508
> 
> 赞同：0
> 
> 时间：2012-08-23T09:20:26.957
> 
> 标签：html, css

是否可以仅使用 css 和 html 使表格行相互重叠？

请帮忙。页面在这里，当用户选择有条件休假时，他们会提示不同的附加字段来填写。但我只想知道是否可以将行设置为重叠，这样表格就不会太长。

[http://www.tritech.com.sg/consultants/intranet/leave_application/leave_form/index.php](http://www.tritech.com.sg/consultants/intranet/leave_application/leave_form/index.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:48:33.893

是的，可以使用 CSS 和 HTML 来允许元素重叠，并且有很多技术可以做到这一点，但是这样做会导致这些行的内容重叠。除非你真的想隐藏你的内容，否则它不是一个很好的节省空间的技术。最好减少行和/或单元格中的填充。

话说回来..

```
tr
{
    display:block;
    position:absolute;
    height:15px;
    top:0px;
} 
```

您需要将位置设置为阻止以阻止它们像表格行一样运行，然后根据您需要如何控制它们来定位相对或绝对位置。然后设置新的最高值以匹配。此样式会将所有表格行与表格顶部对齐。重要的是要注意表格中的单元格将不再受元素限制，这意味着它们将跳出表格，因此必须隐藏`using overflow:hidden;`

我希望这能解决您的问题，但我会敦促您考虑比这更好的选择。如果您不需要显示内容，则设置元素`display:none;`具有更好的效果，并且更容易切换内联或作为类。

如果我有示例代码要使用，PS 将是一个更好的例子。

# c# - 隐藏网格的问题

> ID：12088513
> 
> 赞同：-1
> 
> 时间：2012-08-23T09:20:51.790
> 
> 标签：c#, asp.net, radgrid

我有一个场景如下。有 3 个复选框。每个关联的 3 个文本框。在文本框中输入搜索值时会填充网格。在此网格上选择一行时，我需要隐藏网格并将所选值（一列）填充到另一个文本框中。我得到“对象引用未设置为对象的实例。”，当我实现隐藏网格的逻辑时。选中复选框，在搜索文本框中输入值，填充网格，选择一行，第二个文本框填充网格值，网格被隐藏->在此过程重复 2-3 次后，再次选中复选框会出现错误。请找到带有上述控件的标记。

```
<table width="500px">
       <tr>
           <td>
               <fieldset id="fssearch" runat="server">
                   <legend>Search </legend>
                   <table>
                       <tr>
                           <td>
                               <asp:CheckBox ID="CBFile" runat="server" Text="File No" OnCheckedChanged="CBFile_CheckedChanged"
                                   AutoPostBack="true" />
                           </td>
                           <td>
                               <asp:CheckBox ID="CBname" runat="server" Text="Patient Name" OnCheckedChanged="CBname_CheckedChanged"
                                   AutoPostBack="true" />
                           </td>
                           <td>
                               <asp:CheckBox ID="CBMobile" runat="server" Text="Mobile No" OnCheckedChanged="CBMobile_CheckedChanged"
                                   AutoPostBack="true" />
                           </td>
                       </tr>                    

                       <tr>                           
                           <td>
                            <asp:TextBox ID="RTFileS" onkeyup="KeyUp();" runat="server" OnTextChanged="RTFileS_TextChanged" Visible="false"></asp:TextBox>                                 
                           </td>
                           <td colspan="2">
                               <asp:TextBox ID="RTNameS" onkeyup="KeyUp();" runat="server" OnTextChanged="RTNameS_TextChanged" Visible="false"></asp:TextBox>                                 
                           </td>
                           <td>
                               <asp:TextBox ID="RTMobileS" onkeyup="KeyUp();" runat="server" OnTextChanged="RTMobileS_TextChanged" Visible="false"></asp:TextBox>                               
                           </td>                          
                       </tr>
                       <tr>
                           <td colspan="4">                                                                 
                               <telerik:RadGrid ID="gvPatientList" runat="server" AllowFilteringByColumn="True"
                                   AllowPaging="True" GridLines="None" OnSelectedIndexChanged="gvPatientList_SelectedIndexChanged" >
                                   <PagerStyle Mode="NextPrevAndNumeric" AlwaysVisible="true" />
                                   <GroupingSettings CaseSensitive="false" />
                                   <ItemStyle HorizontalAlign="Left" />
                                   <HeaderStyle HorizontalAlign="Left" />
                                   <AlternatingItemStyle HorizontalAlign="Left" />
                                   <ClientSettings EnablePostBackOnRowClick="true">
                                       <Selecting AllowRowSelect="true" />
                                   </ClientSettings>
                                   <MasterTableView AutoGenerateColumns="False" DataKeyNames="pt_regid">
                                       <CommandItemTemplate>
                                           <asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder>
                                       </CommandItemTemplate>
                                       <Columns>
                                           <telerik:GridBoundColumn HeaderText="Patient Name" UniqueName="pt_name" DataField="pt_name"
                                               AllowFiltering="false">
                                           </telerik:GridBoundColumn>
                                           <telerik:GridBoundColumn HeaderText="File No" UniqueName="pt_fileno" DataField="pt_fileno"
                                               AllowFiltering="false">
                                           </telerik:GridBoundColumn>
                                           <telerik:GridBoundColumn HeaderText="Mobile" UniqueName="pt_pmobileno" DataField="pt_pmobileno"
                                               AllowFiltering="false">
                                           </telerik:GridBoundColumn>
                                       </Columns>
                                   </MasterTableView>
                                   <HeaderContextMenu EnableImageSprites="True" CssClass="GridContextMenu GridContextMenu_Default">
                                   </HeaderContextMenu>
                               </telerik:RadGrid>                                   
                           </td>
                       </tr>
                   </table>
                   </fieldset>
           </td>
       </tr>
   </table> 
```

在网格上选择一行时，我将名称列值填充到文本框并隐藏网格，如下所示。

```
 protected void gvPatientList_SelectedIndexChanged(object sender, EventArgs e)
    {

        GridDataItem RegId = gvPatientList.SelectedItems[0] as GridDataItem;
         string regid = RegId.GetDataKeyValue("pt_regid").ToString();

        foreach (GridDataItem dataItem in gvPatientList.Items)
        {
            if (dataItem.Selected)
            {
                RCFName.Text = dataItem["pt_name"].Text;              
            }
        }
        gvPatientList.Visible = false;             

    } 
```

上面提到的复选框就像单选按钮和 javascript 一样如下

```
 <script language="CS" runat="server">
        private void makeRadioGroupFromCheckBoxes(IEnumerable<CheckBox> checkBoxes)
        {
            StringBuilder sb = new StringBuilder();
            foreach (CheckBox cb in checkBoxes)
            {
                foreach (CheckBox innercb in checkBoxes)
                {
                    if (innercb != cb)
                    {
                        sb.Append("document.getElementById('");
                        sb.Append(innercb.ClientID);
                        sb.Append("').checked = false;");
                    }
                }
                cb.Attributes["onclick"] = "if(this.checked){" + sb.ToString() + "}else{this.checked = true;}";

                sb = new StringBuilder();
            }
        }      
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                this.makeRadioGroupFromCheckBoxes(new CheckBox[] { CBFile, CBname, CBMobile });              
            }
        } 
```

网格在 textchanged 事件和 'onkeyup="KeyUp();' 上填充 文本框的功能，关联如下。aspx:

```
 <telerik:RadCodeBlock ID="RadCodeBlock1" runat="server">
        <script type="text/javascript">
            var timer = null;
            function KeyUp() {
                if (timer != null) {
                    clearTimeout(timer);
                }
                timer = setTimeout(LoadTable, 500);
            }
            function LoadTable() {
                $find("<%= RadAjaxManager1.ClientID %>").ajaxRequest("FilterGrid");
            }

        </script>
    </telerik:RadCodeBlock> 
```

后面的代码：

```
protected void RadAjaxManager1_AjaxRequest(object sender, Telerik.Web.UI.AjaxRequestEventArgs e)
   {
       if (e.Argument.IndexOf("FilterGrid") != -1)
       {
           gvPatientList.Rebind();
       }
   }

   protected void RTFileS_TextChanged(object sender, EventArgs e)
   {
       if (!string.IsNullOrEmpty(RTFileS.Text))
       {

           _scheduleService = new ScheduleService();
           clsSchedule clsschedule = new clsSchedule();
           string search = " where OldRegnNo like '" + RTFileS.Text + "%" + "'";
           gvPatientList.DataSource = _scheduleService.GetAllPatients(search);           
           gvPatientList.Rebind();
       }
   } 
```

在复选框的选中更改事件上，我使网格可见。

```
 protected void CBFile_CheckedChanged(object sender, EventArgs e)
   {
       if (CBFile.Checked)
       {
           RTFileS.Visible = true;
           gvPatientList.Visible = true;
           gvPatientList.MasterTableView.Visible = true;
           gvPatientList.Rebind();

       }
       else
       {
           RTFileS.Visible = false;
       }
   } 
```

Ajaxmanager如下：

```
 <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server" OnAjaxRequest="RadAjaxManager1_AjaxRequest">
       <AjaxSettings>
           <telerik:AjaxSetting AjaxControlID="gvPatientList">
               <UpdatedControls>
                   <telerik:AjaxUpdatedControl ControlID="gvPatientList" LoadingPanelID="RadAjaxLoadingPanel1" />
                   <telerik:AjaxUpdatedControl ControlID="RCFName" />                  
               </UpdatedControls>
           </telerik:AjaxSetting>
           <telerik:AjaxSetting AjaxControlID="RadAjaxManager1">
               <UpdatedControls>
                   <telerik:AjaxUpdatedControl ControlID="gvPatientList" LoadingPanelID="RadAjaxLoadingPanel1" />
               </UpdatedControls>
           </telerik:AjaxSetting> 
```

我希望隐藏/取消隐藏网格会给我带来错误。请就此提出您的想法。谢谢， 苏米亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:22:09.990

请尝试以下代码片段。您会收到错误，因为您尝试 ajaxify 可见的网格是错误的。

```
protected void Page_PreRender(object sender, EventArgs e)
    {
        if (gvPatientList.Visible)
        {
            RadAjaxManager1.AjaxSettings.AddAjaxSetting(gvPatientList, gvPatientList, RadAjaxLoadingPanel1);
            RadAjaxManager1.AjaxSettings.AddAjaxSetting(gvPatientList, RCFName);
        }

    } 
```

# php - PHP 返回无效请求错误

> ID：12088515
> 
> 赞同：1
> 
> 时间：2012-08-23T09:20:57.287
> 
> 标签：php, android

我正在将数据从 Android 设备保存到 MySQL。我的代码使用 localhost 可以正常工作，但是当我使用托管域尝试它时。它给了我和错误。

**返回错误**

```
ERROR
The requested URL could not be retrieved

While trying to process the request:

POST /insert.php HTTP/1.1
Transfer-Encoding: chunked
Content-Type: application/x-www-form-urlencoded
Host: mydomain.com
Connection: Keep-Alive
User-Agent: Apache-HttpClient/UNAVAILABLE (java 1.4)

The following error was encountered:
Invalid Request 
```

**AsyncTask 中的 Java 代码**

```
.
.
.
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("user_id", userId));
HttpPost httppost = new HttpPost("http://mydomain.com/insert.php");
HttpClient httpclient = new DefaultHttpClient();

UrlEncodedFormEntity urlEncodeFormEntity = new UrlEncodedFormEntity(nameValuePairs);
urlEncodeFormEntity.setChunked(true);

httppost.setEntity(urlEncodeFormEntity);
HttpResponse response = httpclient.execute(httppost);
.
.
. 
```

请帮我解决这个问题。它再次使用本地主机工作。

**编辑：**

**PHP 代码：这只是为了测试我的设备是否可以访问给定的 URL**

```
<?php
    echo "Ive been reached.";
    //Codes to connect DB and To Insert goes here
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:17:03.183

试试这个代码

```
 HttpClient httpclient = new DefaultHttpClient();
 HttpPost httppost = new HttpPost("http://exampple.com/insert-data.php");
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
 nameValuePairs.add(new BasicNameValuePair("id", "1"));
 try{
  httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
  ResponseHandler<String> responseHandler = new BasicResponseHandler();

  String response = httpclient.execute(httppost, responseHandler);

  String reverseString = response;

  Log.d("Mishu Complain",reverseString);
 } catch(Exception e){ // check error here  } 
```

要在日志中查找任何错误，您可以输入此代码

```
catch (Exception anyError) {
             Log.e("Mishu-Cn-Error", "exception",anyError);

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:44:29.653

我通过删除线解决了这个问题

```
urlEncodeFormEntity.setChunked(true); 
```

# php - GeoIP IPv4 数据库返回不正确的国家代码 - 需要 GeoIP 更新？

> ID：12088516
> 
> 赞同：0
> 
> 时间：2012-08-23T09:21:01.583
> 
> 标签：php, location, ip, geoip

我在 IPv4 数据库中使用以下代码，但是我注意到许多 IP 地址带有错误的国家代码。

是否有更新的 IPv4 二进制 GeoIP 数据库？

查看[http://maxmind.com/download/geoip/database/](http://maxmind.com/download/geoip/database/)似乎只有 IPv6 的更新。

```
include("geoip.inc");

$gi = geoip_open("/usr/local/share/GeoIP/GeoIP.dat",GEOIP_STANDARD);

echo geoip_country_code_by_addr($gi, "24.24.24.24") . "\t" .
     geoip_country_name_by_addr($gi, "24.24.24.24") . "\n";
echo geoip_country_code_by_addr($gi, "80.24.24.24") . "\t" .
     geoip_country_name_by_addr($gi, "80.24.24.24") . "\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:20:42.630

GeoIP 似乎*确实*更新了 IPv4 数据库，并且它们在[此处](http://www.maxmind.com/app/geolite)可用。他们说他们会在每个月的第一个星期二更新它并且它是免费的。

我可能使用的是旧版本的二进制数据库，更新后 IP 返回正确的国家代码。

# grails - 如何将 registerCustomEditors 用于多个日期？

> ID：12088519
> 
> 赞同：1
> 
> 时间：2012-08-23T09:21:03.993
> 
> 标签：grails, data-binding

好吧，这是我迄今为止尝试过的代码。

```
public class CustomDateEditorRegistrar implements PropertyEditorRegistrar {

    public void registerCustomEditors(PropertyEditorRegistry registry) {
        registry.registerCustomEditor(Date.class, new CustomDateEditor(new SimpleDateFormat("MM/dd/yyyy hh:mm a"), true))
        registry.registerCustomEditor(Date.class, new StructuredDateEditor(new SimpleDateFormat("MM/dd/yyyy"), true))
    }

} 
```

我正在使用一个日历 jQuery 插件和一个常规 grails DatePicker，如果我只使用第一个，我总是在常规 grails Date Picker 上遇到错误。如果我同时使用两者，我就不会再收到错误了。但是，日历只保存日期而不是时间？有任何解决这个问题的方法吗？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:19:53.663

你可能想看看这个：

[Grails 日期解组](https://stackoverflow.com/questions/963922/grails-date-unmarshalling)

和这个

[从控制器中的参数绑定 Grails 日期](https://stackoverflow.com/questions/2871977/binding-a-grails-date-from-params-in-a-controller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T11:57:21.530

我认为您不能为同一类型注册多个编辑器，因此我会编写自己的`MultiDateEditor`子类`CustomDateEditor`（或`PropertyEditorSupport`直接实现），它尝试使用多种格式绑定日期。然后你只需要注册`MultiDateEditor`：

```
public class CustomDateEditorRegistrar implements PropertyEditorRegistrar {

    public void registerCustomEditors(PropertyEditorRegistry registry) {
        registry.registerCustomEditor(Date.class, new MultiDateEditor(
                ["MM/dd/yyyy hh:mm a", "MM/dd/yyyy"]))
    }    
} 
```

# c# - 从 .net 网格视图中删除

> ID：12088520
> 
> 赞同：0
> 
> 时间：2012-08-23T09:21:08.593
> 
> 标签：c#, asp.net, .net, gridview

我希望以编程方式从`GridView`.

我已经实现了 gridview 的`OnRowDeleting="Delete_Record"`事件处理程序，当用户单击 GridView 上的删除链接时调用它，但是由于似乎没有选择行，所以删除的代码不起作用。

要进一步测试，我可以单击选择，选择行（注释掉选择后面的代码），然后如果我单击删除，代码运行良好。

有没有办法让该行被选为第一步`Delete_Record`？

```
GridViewRow row = gvResults.SelectedRow;
string id = row.Cells[1].Text;

ASB_DataDataContext db = new ASB_DataDataContext();
var delCase = from dc in db.Inputts
              where dc.counter == Convert.ToInt32(id)
              select dc;

foreach (var nCase in delCase)
{
    db.Inputts.DeleteOnSubmit(nCase);
    db.SubmitChanges();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:26:26.657

由于您正在使用该事件，因此您应该将所需的索引作为其中的一部分，`GridViewDeleteEventArgs e`就像说`e.RowIndex`

然后你可以访问你需要的参数`grid.Rows[e.RowIndex].Cells[1].Text`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:34:39.443

您可以通过如下所示的代码来实现

```
public void GridView1_Delete_Record (Object sender, GridViewDeleteEventArgs e)
{
    string id = gridView1.Rows[e.RowIndex].Cells[2].Text;

    ASB_DataDataContext db = new ASB_DataDataContext();
    var delCase = from dc in db.Inputts
              where dc.counter == Convert.ToInt32(id)
              select dc;

    foreach (var nCase in delCase)
    {
       db.Inputts.DeleteOnSubmit(nCase);
       db.SubmitChanges();
    }  Message.Text = "";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:37:30.347

设置`db.Inputts`为数据网格的数据源。只需在代码后添加下两行：

```
datagridView1.DataSource = null;
datagridView1.DataSource = db.Inputts; 
```

将 datasource 设置为 null 是为了从 datagrid 中清除以前的数据；

# iphone - MPMoviePlayer 在直播时变黑

> ID：12088522
> 
> 赞同：1
> 
> 时间：2012-08-23T09:21:26.740
> 
> 标签：iphone, cocoa-touch, mpmovieplayercontroller, http-live-streaming, mpmovieplayer

我正在使用 MPMoviePlayerController 在我的应用程序中播放实时流媒体视频。播放时，屏幕有时会变黑，但我能听到音频。为什么这样 ？. 当屏幕变黑时，我试图获得通知，但我很不幸。

谁能告诉我为什么直播会黑屏？MPMoviePlayer 变黑时如何获得通知？

请帮我 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:46:09.920

[HTTP Live Streaming 概述](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/FrequentlyAskedQuestions/FrequentlyAskedQuestions.html)有这个说法。

> 内容提供商为流选择的数据速率受目标客户端平台和预期网络拓扑的影响最大。流协议本身对可以使用的数据速率没有限制。当前的实现已经使用音频-视频流进行了测试，数据速率低至 64 Kbps，高达 3 Mbps 到 iPhone。建议使用 64 Kbps 的纯音频流作为通过慢速蜂窝连接传输的替代方案。

基本上，如果网络太慢而无法流式传输视频，则将使用纯音频模式。我找不到使用 MPMoviePlayerController 获取替代更改通知的方法。但是，您可以注册，`MPMovieMediaTypesAvailableNotification`这将使您知道音频/视频/两者是否可用（通过`movieMediaTypes`属性）。

```
enum {
   MPMovieMediaTypeMaskNone  = 0,
   MPMovieMediaTypeMaskVideo = 1 << 0,
   MPMovieMediaTypeMaskAudio = 1 << 1
};
typedef NSInteger MPMovieMediaTypeMask; 
```

我不完全确定它会在流媒体切换到仅音频时通知您，但您可以随时尝试。

# php - 将购物车从会话转移到数据库

> ID：12088526
> 
> 赞同：0
> 
> 时间：2012-08-23T09:21:51.683
> 
> 标签：php, mysql

我正在用 php/mysql 编写一个程序，其中登录的用户可以通过我存储在会话中的购物车订购商品。我想要实现的是从会话中获取此购物车信息，并在用户提交订单时将其放入我的数据库中。我的系统中不涉及付款信息。我的 php 知识是基础到中低级。

我的购物车页面显示了用户购物车中的商品，通过以下方式进行。

```
if($_SESSION['cart']) { //if the cart isn't empty
    //show the cart
    echo "<table width=\"100%\" border=\"0\" padding=\"3\" align=\"center\">";  //format the cart using a HTML table
        echo "<tr>";
            echo "<th align=\"center\"></th>";
            echo "<th align=\"center\">Quantity</th>";
            echo "<th align=\"center\">Item</th>";
            echo "<th align=\"center\">Price</th>";
        echo "</tr>";

        //iterate through the cart, the $product_id is the key and $quantity is the value
        foreach($_SESSION['cart'] as $item_id => $quantity) {   

            //get the name, description and price from the database - this will depend on your database implementation.
            //use sprintf to make sure that $product_id is inserted into the query as a number - to prevent SQL injection
            $sql = sprintf("SELECT title, price FROM food WHERE food_id = %d;", $item_id); 

            $result = mysql_query($sql);

            //Only display the row if there is a product (though there should always be as we have already checked)
            if(mysql_num_rows($result) > 0) {

                list($title, $price) = mysql_fetch_row($result);

                $line_cost = number_format($price * $quantity, 2);      //work out the line cost
                $total = number_format($total + $line_cost, 2);         //add to the total cost

                echo "<tr>";
                    //show this information in table cells
                    echo "<td align=\"center\"><a href=\"$_SERVER[PHP_SELF]?action=remove&id=$item_id\" data-role=\"button\" data-icon=\"minus\" data-iconpos=\"notext\" data-transition=\"none\">Remove Item</a></td>";
                    echo "<td align=\"center\">$quantity</td>";
                    echo "<td>$title</td>";
                    //along with a 'remove' link next to the quantity - which links to this page, but with an action of remove, and the id of the current product
                    echo "<td align=\"center\">$$line_cost</td>";
                echo "</tr>";

            }

        }

        //show the total
        echo "<tr>";
            echo "<th colspan=\"3\" align=\"right\" >Total</th>";
            echo "<td align=\"center\">$$total</td>";
        echo "</tr>";

        //show the empty cart link - which links to this page, but with an action of empty. A simple bit of javascript in the onlick event of the link asks the user for confirmation
        echo "<tr>";
            echo "<td colspan=\"4\" align=\"right\"><a href=\"/delete_cart.php\" data-role=\"button\" data-icon=\"delete\" data-iconpos=\"left\" data-rel=\"dialog\">Empty Cart</a></td>";
        echo "</tr>";

        echo "<tr>";
            echo "<td colspan=\"4\" align=\"center\"><a href=\"/order.php\" data-role=\"button\">Order</a></td>";
        echo "</tr>";
    echo "</table>";

}else{
    //otherwise tell the user they have no items in their cart
    echo "<p align=\"center\">You have no items in your shopping cart.</p>";

} 
```

然后在订单页面上，我再次检索购物车信息并从用户那里获得更多详细信息。下面是将订单信息提交到我的订单表的代码。

```
$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
$editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "submit_order")) {
$insertSQL = sprintf("INSERT INTO orders (user_id, `date`, total, info) VALUES (%s, %s, %s, %s)",
                   GetSQLValueString($_POST['user_id'], "int"),
                   GetSQLValueString($_POST['date'], "text"),
                   GetSQLValueString($_POST['total'], "text"),
                   GetSQLValueString($_POST['info'], "text"));

mysql_select_db($database_ngs_canteen, $ngs_canteen);
$Result1 = mysql_query($insertSQL, $ngs_canteen) or die(mysql_error());

$insertGoTo = "/ngs_canteen/submit.php";
if (isset($_SERVER['QUERY_STRING'])) {
$insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
$insertGoTo .= $_SERVER['QUERY_STRING'];
}
header(sprintf("Location: %s", $insertGoTo));
} 
```

我在将购物车会话中的项目输入数据库时​​遇到问题。我在此页面上插入用户 ID、总价、订单日期的其他表单工作正常，但我无法终生弄清楚如何提交购物车项目。

我已经尝试过这样的事情，但到目前为止还没有成功。

```
$result = @mysql_query($query);
if (@mysql_affected_rows($dbc) == 1) {

// Get the Order ID.
$oid = @mysql_insert_id($dbc);

// Insert the specific order contents into the database.
$query = "INSERT INTO order_items (order_id, food_id, quantity, price) VALUES (";foreach ($_SESSION['cart'] as $item_id => $value) {
$query .= "$oid, $food_id, {$value['quantity']}, {$value['price']})";
} 
```

任何帮助将不胜感激，即使是正确方向的指针。如果您需要任何额外的信息，请询问。

谢谢，杰克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:36:59.147

对于将来遇到与我相同的问题的任何人，经过大量修改，这里是让事情为我工作的代码。

```
$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
$editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "submit_order")) {
$insertSQL = sprintf("INSERT INTO orders (user_id, `date`, total) VALUES (%s, %s, %s)",
                   GetSQLValueString($_POST['user_id'], "int"),
                   GetSQLValueString($_POST['date'], "text"),
                   GetSQLValueString($_POST['total'], "text"));

mysql_select_db($database_ngs_canteen, $ngs_canteen);
$Result1 = mysql_query($insertSQL, $ngs_canteen) or die(mysql_error());

$order_id = mysql_insert_id();

if ($order_id) {
foreach ($_SESSION['cart'] as $item_id => $quantity) {
    $sql = sprintf("SELECT food_id, price FROM food WHERE food_id = %d;", $item_id); 
            $result = mysql_query($sql);
            if(mysql_num_rows($result) > 0) {
                list($food_id, $price) = mysql_fetch_row($result);
                $line_cost = number_format($price * $quantity, 2);                  
            }   
$query = sprintf("INSERT INTO order_items (order_id, food_id, quantity, cost) VALUES (%s, %s, %s, %s)",
    GetSQLValueString("$order_id", "int"),
    GetSQLValueString("$food_id", "int"),
    GetSQLValueString("$quantity", "int"),
    GetSQLValueString("$line_cost", "text"));

mysql_select_db($database_ngs_canteen, $ngs_canteen);
$Result1 = mysql_query($query, $ngs_canteen) or die(mysql_error());
}}

$insertGoTo = "/ngs_canteen/submit.php";
if (isset($_SERVER['QUERY_STRING'])) {
$insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
$insertGoTo .= $_SERVER['QUERY_STRING'];
}
header(sprintf("Location: %s", $insertGoTo));
} 
```

调用此代码后，曾经存储在会话中的用户购物车现在将完美地传输到您的数据库中。

# jquery - 没有在 jquery 上获取计数更新

> ID：12088529
> 
> 赞同：-1
> 
> 时间：2012-08-23T09:22:13.393
> 
> 标签：jquery

这是我的[jsFiddle](http://jsfiddle.net/sureshmonster/kLuff/5/)。我的计数在这里没有更新。谁能告诉我如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:25:59.590

添加

```
$('#CurrenPageId').text(next.index() + 1 + "/" + numberOfSlides); 
```

之后`next.show()`。或者

```
manageControls(next.index()) 
```

这里更新的小提琴：http: [//jsfiddle.net/kLuff/6/](http://jsfiddle.net/kLuff/6/)

但请注意，这`next.index()`仅适用于您的幻灯片项目是容器中的第一个项目。您可以将幻灯片项目包装到另一个容器中，这样`index()`会保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:27:59.963

```
$(".next").click(function(){
    var selected = $('.selected');
    selected.removeClass('selected');
    selected.hide();

    var next = selected.next(".slideritem");
    if(next.length === 0) {
        next = $(".slideritem").first();
    }

    manageControls(next.index());// update the count here
    next.addClass('selected');
    next.show();
}); 
```

演示：http: [//jsfiddle.net/kLuff/9/](http://jsfiddle.net/kLuff/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:29:18.560

看看这个：http: [//jsfiddle.net/karlroos/kLuff/8/](http://jsfiddle.net/karlroos/kLuff/8/)

# asynchronous - ObjXMLDoc.async = False

> ID：12088530
> 
> 赞同：-1
> 
> 时间：2012-08-23T09:22:17.410
> 
> 标签：asynchronous, vbscript

我正在写一个 vbscript。

' 创建 XML DOM 对象

```
Set ObjXMLDoc = CreateObject("Microsoft.XMLDOM")
ObjXMLDoc.async = False 
```

“ ObjXMLDoc.async = False ”是什么意思？

或者我可以忽略其含义并将这句话放在那里，将其视为......传统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:16:04.883

这意味着如果您使用该对象发出请求，脚本将等待直到结果完全返回，否则它会继续前进，您必须使用回调例程对结果执行某些操作或建立一个循环，您可以在其中检查一个时间间隔，如果结果是完整的。在继续之前阅读[http://msdn.microsoft.com/en-us/library/aa468547.aspx 。](http://msdn.microsoft.com/en-us/library/aa468547.aspx)

# android - 轮播问题

> ID：12088535
> 
> 赞同：0
> 
> 时间：2012-08-23T09:22:36.660
> 
> 标签：android

我正在使用轮播代码 Imade 5 classes 和 usd 与[http://www.codeproject.com/Articles/146145/Android-3D-Carousel](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)相同， 但是当我运行程序 wic 我让它给我并给我错误 R .layout.main main:main 不能是 reslt 或不是字段...我该如何解决这个问题？我在 Carousle 课上还有另一个问题：

```
int min = arr.getInteger(R.styleable.Carousel_minQuantity, MIN_QUANTITY); 
```

关于 styleabl 不能是结果或失败请我需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:27:40.637

像这样导入 R：导入 pakageName.R 例如（com.mm.name.R）；

# c++ - gmock 支持右值引用的解决方法

> ID：12088537
> 
> 赞同：10
> 
> 时间：2012-08-23T09:22:45.060
> 
> 标签：c++, gmock

gmock 不支持将右值引用作为模拟函数的参数（[问题报告](https://code.google.com/p/googletest/issues/detail?id=395)）。

例如以下代码将无法编译：

```
MOCK_METHOD1(foo,void(std::string&&)); 
```

我找不到有关 gmock 何时会为此添加支持的信息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T09:22:45.060

我想出了一个解决方法：使用非模拟函数`foo(std::string&& s){foo_rvr(s)}`将函数中继到模拟函数`foo_rvr(std::string)`。这是完整的程序。

```
#include <string>
#include <gtest/gtest.h>
#include <gmock/gmock.h>

class RvalueRef
{
public:
    virtual void foo(const std::string&)=0;
    virtual void foo(std::string&&)=0;
};

class MockRvalueRef : public RvalueRef
{
public:
    void foo(std::string&& s){foo_rvr(s);}
    MOCK_METHOD1(foo,void(const std::string&));
    MOCK_METHOD1(foo_rvr,void(std::string));
};

TEST(RvalueRef, foo)
{
    MockRvalueRef r;
    {
        ::testing::InSequence sequence;
        EXPECT_CALL(r,foo("hello"));
        EXPECT_CALL(r,foo_rvr("hi"));
    }

    std::string hello("hello");
    r.foo(hello);
    r.foo("hi");    
}

int main(int argc, char* argv[])
{
    ::testing::InitGoogleMock(&argc,argv);

    int rc=RUN_ALL_TESTS();

    getchar();
    return rc;
} 
```

# mysql - MySQL 语句中的 SUBSTR 两次；

> ID：12088545
> 
> 赞同：0
> 
> 时间：2012-08-23T09:22:57.690
> 
> 标签：mysql, character, substr, trailing

所以我的回答是这样的......“恭喜！您在*******赢得了松下音响系统。我们的呼叫中心将在***** **与您联系****." 我需要的是仅选择奖品（在本例中为 Panasonic Sound System" ）作为输出。不同奖品的人物不同。其他的有很多字符，只有 10 个字符。我需要运行一个选择语句，删除前面的“Congratulations! You have won a”和后面的“*********。我们的呼叫中心将在***** *****上与您联系。”并因此返回奖品；让我们调用我的表格条目，我的字段包含此文本，我们称之为响应；我已经运行 `SELECT SUBSTR(response,32) from entries; and I remove the leading characters before the prize.`***

 ***当我运行它时，我得到“Panasonic Sound System in the *******。我们的呼叫中心将在***** *****与您联系。”；

LEADING的字符长度是32，TRAILING是94。奖品不是固定的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:32:43.693

[SUBSTRING_INDEX](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_substring-index)在这里可能有用：

```
select 
substring_index(
substring_index(
"Congratulations! You have won a Panasonic Sound System in the *. Our call centre will contact you on ***."," a ",-1)," in the ",1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:53:51.973

如果您确信您的尾随和前导字符数始终保持不变，您可以使用[substr 的](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substr)用例：`SUBSTR(str,pos,len).`

`len`可以通过从原始字符串的长度中减去前导不需要的字符和尾随不需要的字符来确定。

```
set @test_string = "Congratulations! You have won a Panasonic Sound System in the ************************. Our call centre will contact you on *************************";
set @leading = 32;
set @trailing = 94;
select substr(@test_string, @leading, length(@test_string) - @leading - @trailing); 
```

例如：

```
mysql> select substr(@test_string, @trailing_chars, length(@test_string) - @leading_chars - @trailing_chars);
+------------------------------------------------------------------------------------------------+
| substr(@test_string, @trailing_chars, length(@test_string) - @leading_chars - @trailing_chars) |
+------------------------------------------------------------------------------------------------+
|  Panasonic Sound System                                                                        |
+------------------------------------------------------------------------------------------------+ 
```***

# javascript - jquery保存数据直到phonegap应用程序关闭？

> ID：12088547
> 
> 赞同：0
> 
> 时间：2012-08-23T09:22:59.823
> 
> 标签：javascript, jquery

有没有办法将数据写入在 phonegap 移动应用程序关闭时被擦除的存储中？我使用了 localStorage (html5)，但是当应用程序关闭时，这些数据不会被删除。我如何保存持续到应用程序关闭的数据并且我无法将其保存到变量中，因为我使用了很多 .js 文件和方法并且不想将所有这些变量与参数一起传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:31:35.347

尝试使用 cookie，或者如果数据对于 cookie 来说太大，也许[HTML 5 sessionStorage](http://www.w3schools.com/html5/html5_webstorage.asp)会有所帮助

# php - 使用 mysql_affected_rows 是否安全

> ID：12088552
> 
> 赞同：0
> 
> 时间：2012-08-23T09:23:20.057
> 
> 标签：php, mysql

是否可以使用 mysql_affected_rows 来获取用户更新时受影响的行数？如果有多个用户更新他们的密码，我需要知道每个用户更新是否成功。因此，如果 3 个用户同时进行更新，即使一个用户更新不成功，mysql_affected_rows 也可能返回 2。是这样吗？我无法同时测试多个用户。这是多么安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:26:03.847

它是安全的，并为您当前的数据库连接返回值（[mysql-affected-rows 函数](http://ua2.php.net/manual/en/function.mysql-affected-rows.php)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:25:02.173

它是安全的。它仅返回有关您自己连接中的最后一个查询的数据。

[PHP 文档](http://www.php.net/manual/en/function.mysql-affected-rows.php)（感谢[Fluffeh](https://stackoverflow.com/users/1450077/fluffeh)）：

> ***通过与link_identifier***关联的最后一个 INSERT、UPDATE、REPLACE 或 DELETE 查询获取受影响的行数。

由于它是 MySQL C API 的精简包装，我们还可以[检查](http://dev.mysql.com/doc/refman/5.1/en/mysql-affected-rows.html)：

> my_ulonglong mysql_affected_rows(MYSQL *mysql)

据我所知，它没有在任何地方明确说明，但它确实采用了连接标识符，[而且似乎](http://dev.mysql.com/doc/refman/5.1/en/getting-unique-id.html)一般模式是所有函数都返回有关特定连接的数据：

> 从多个客户端同时使用 LAST_INSERT_ID() 和 AUTO_INCREMENT 列是完全有效的。每个客户端都将收到客户端执行的最后一条语句*的*最后插入 ID 。

无论如何，如果您无法确定获得的结果是否属于您，那将是非常不可用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:27:53.477

如果您将连接的引用作为参数传递，它特定于该连接，因此即使有同时访问您的脚本的用户也可以安全使用 - 因为他们每个人都将使用单独的连接！请参阅[mysql_affected_rows 的文档](http://php.net/manual/en/function.mysql-affected-rows.php)。

但是请注意，整个 mysql 扩展已被弃用。考虑改用 MySQLi 或 PDO_MySQL！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T09:28:52.470

我用`mysql_query("SELECT ROW_COUNT();");`. 我总是发现它工作得更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T09:25:05.103

它是安全的，因为它是特定于连接的。

# ruby - Webistrano - Phusion 乘客 - 找不到 rake

> ID：12088554
> 
> 赞同：0
> 
> 时间：2012-08-23T09:23:26.317
> 
> 标签：ruby, nginx, passenger, webistrano

我在 Webistrano 中运行部署任务时遇到问题。仅当我使用 Phusion Passenger 从 Nginx 运行 Webistrano 时。

当我使用以下命令运行 Webistano 时，一切正常。

> ruby 脚本/服务器 -d -p 3000 -e 生产

但是当从 Phusion Passenger 运行它（使用“passenger-install-nginx-module”编译）并且我想做一个部署（应用程序正在运行）时，我的日志中出现以下错误：

```
/usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/spec_set.rb:90:in `materialize': Could not find rake-0.9.2.2 in any of the sources (Bundler::GemNotFound)
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/spec_set.rb:83:in `map!'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/spec_set.rb:83:in `materialize'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/definition.rb:127:in `specs'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/definition.rb:172:in `specs_for'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/definition.rb:161:in `requested_specs'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/environment.rb:23:in `requested_specs'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/runtime.rb:11:in `setup'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler.rb:107:in `setup'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/setup.rb:17 
```

我的捆绑宝石列表：

```
 Gems included by the bundle:
  * actionmailer (2.3.11)
  * actionpack (2.3.11)
  * activerecord (2.3.11)
  * activeresource (2.3.11)
  * activesupport (2.3.11)
  * bundler (1.1.5)
  * capistrano (2.6.0)
  * erubis (2.7.0)
  * exception_notification (2.3.3.0)
  * highline (1.6.13)
  * mocha (0.9.8)
  * mysql (2.8.1)
  * net-scp (1.0.4)
  * net-sftp (2.0.5)
  * net-ssh (2.5.2)
  * net-ssh-gateway (1.1.0)
  * open4 (0.9.3)
  * rack (1.1.3)
  * rails (2.3.11)
  * rake (0.9.2.2)
  * syntax (1.0.0) 
```

这是在我的 nginx.conf 中：

```
passenger_root /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.15;
passenger_ruby /usr/local/bin/ruby; 
```

我的特定服务器配置：

```
passenger_enabled on;
rails_env production; 
```

奇怪的是，使用 WeBrick 运行它只是正常工作，但通过 nginx 的乘客却不是。我不是很喜欢 Ruby，而且我真的不知道我应该从哪里开始寻找。

我从源代码安装 ruby​​，没有 rvm。

提前致谢！

编辑：

错误来自这一行：

> ruby 脚本/运行器 -e 生产'部署 = Deployment.find(1085); Webistrano::Deployer.new(deployment).invoke_task！'

从命令行执行时按方面工作，但通过 nginx/passenger 从应用程序内执行时不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:25:01.057

也许有点晚了，但我猜这个错误与它正在运行的用户有关。乘客在 Apache 用户下运行。Webistrano wiki 上讨论了一个与 git 类似的问题。

[https://github.com/peritor/webistrano/wiki/Installing-with-Phusion-Passenger](https://github.com/peritor/webistrano/wiki/Installing-with-Phusion-Passenger)

# javascript - 如何使应用程序加载独立于 Web 服务调用？

> ID：12088556
> 
> 赞同：1
> 
> 时间：2012-08-23T09:23:29.787
> 
> 标签：javascript, android, jquery, ajax, cordova

我创建了一个 phonegap 应用程序，它在初始化时调用 Web 服务（加载 index.html）。我正在使用

```
 $.ajax({
  type: "GET",
  url: "http://webserviceurl.com/service",
  cache: false,
  async: true, 
  success: onSuccess,
  error: onError,
  timeout: 40000
}); 
```

现在，如果 web 服务不可用，服务调用会等待 40 秒（我将限制设置为超时）并将控制权转移到 onError 消息，该消息又会显示一条简单的错误警报消息。

但我的问题是，应用程序显示一个空白屏幕并且在服务调用完成（40 秒）之前不显示 html 页面。我希望 web 服务调用在后端执行并且不影响实际应用程序的加载（我认为 async:true 会有所帮助，但事实并非如此）。

任何想法如何使我的应用程序独立于 web 服务调用？

**编辑** 这工作

```
function appReady(){
      // do the ajax here
}

document.addEventListener("deviceready", appReady, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:34:58.437

你能这样做吗

```
$(document).ready(function() {

$.ajax({
  type: "GET",
  url: "http://webserviceurl.com/service",
  cache: false,
  async: true, 
  success: onSuccess,
  error: onError,
  timeout: 40000
});

}); 
```

现在您的 ajax 查询将在文档准备好（完全加载）后进行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:33:24.893

只需在拨打电话之前设置您的页面。

# javascript - node.js 中 Jade 模板的全局变量

> ID：12088557
> 
> 赞同：5
> 
> 时间：2012-08-23T09:23:35.753
> 
> 标签：javascript, node.js, templates, global-variables, pug

我正在使用`node.js`模板`Jade`系统。

假设，我有这些路由规则：

```
// ./routes/first.js

exports.first = function(req, res)
{
    res.render('first', {
        author: 'Edward',
        title: 'First page'
    });
};

// ./routes/second.js

exports.second = function(req, res)
{
    res.render('second', {
        author: 'Edward',
        title: 'Second page'
    });
}; 
```

这些虚拟视图：

```
// ./views/first.jade

html
    head
        title #{author} &ndash; #{title}
    body
        span First page content

// ./views/second.jade

html
    head
        title #{author} &ndash; #{title}
    body
        span Second page content 
```

`author`对于两个视图，我如何通常声明变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:47:44.547

```
// ./author.js
module.exports = 'Edward';

// ./routes/first.js

exports.first = function(req, res)
{
    res.render('first', {
        author: require('../author'),
        title: 'First page'
    });
};

// ./routes/second.js

exports.second = function(req, res)
{
    res.render('second', {
        author: require('../author'),
        title: 'Second page'
    });
}; 
```

或者

```
// ./views/includes/head.jade
head
    title Edward &ndash; #{title}

// ./views/first.jade

html
    include includes/head
    body
        span First page content

// ./views/second.jade

html
    include includes/head
    body
        span Second page content 
```

或者

```
// ./views/layout.jade
html
    head
        title Edward &ndash; #{title}
    body
        block body

// ./views/first.jade

extends layout
append body
    span First page content

// ./views/second.jade

extends layout
append body
    span Second page content 
```

# visual-c++ - 使用平台工具集“Visual Studio 2012 (v110)”构建的 VC++ 程序能否在 Windows Server 2003/2008 上运行？

> ID：12088560
> 
> 赞同：0
> 
> 时间：2012-08-23T09:23:37.610
> 
> 标签：visual-c++, windows-server-2008, visual-studio-2012

使用平台工具集“Visual Studio 2012 (v110)”在 VS2012 中构建的程序可以在 Windows Server 2003/2008 上运行吗？

我热衷于利用所有新的 C++11 优点，但需要针对运行 VS2008 的机器。

如果默认情况下它不会运行，我应该进行哪些配置更改才能以该平台为目标并仍然受益于所有编译器的新功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:31:05.773

我已经对此进行了测试，可以回答**是**，只要路径上有 VC++11 可重新分发的 DLL，即*msvcp110.dll*、*msvcr110.dll*等，它们就会运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T16:39:31.020

要在 Windows Server 2003 上运行 VS2012 编译的 C++ 应用程序，您应该使用 Visuasl Studio 2012 Update 1 中包含的“v110_xp”平台工具集。根据[MSDN](http://msdn.microsoft.com/en-us/library/jj851139.aspx)：

> 包含在 Visual Studio 2012 Update 1 中的 Visual Studio 2012 - Windows XP (v110_xp) 平台工具集是包含在 Visual Studio 2010 中的 Windows 7 SDK 的一个版本，但它使用 Visual Studio 2012 C++ 编译器。它还将项目属性配置为适当的默认值——例如，用于下层目标的兼容链接器规范。**只有使用 vs110_xp 工具集创建的应用程序支持 Windows XP 和 Windows Server 2003**，但这些应用程序也可以支持 Windows Vista、Windows 7、Windows Server 2008、Windows 8 和 Windows Server 2012。

# html - MVC4项目图像不显示

> ID：12088565
> 
> 赞同：4
> 
> 时间：2012-08-23T09:23:47.517
> 
> 标签：html, asp.net-mvc, vb.net, asp.net-mvc-4, visual-studio-2012

我刚刚将我的第一个 MVC4 项目从我的开发机器部署到我的生产 IIS7.5 服务器，并且在让图像正确显示在服务器上时遇到了一些问题。

这可能是 IIS7 中的权限问题吗？

```
<input type="image" src="Content/Images/Product.png" runat="server" /> 
```

![在此处输入图像描述](../Images/47d6d5c9e3868e32c1621e2ad9b2bd96.png)

当我在桌面上运行它时，图像会正确显示，但是当我部署到服务器时，我会得到标准的断开链接图像。我已确认图像在服务器上的正确路径中。

我也尝试过更改 src 以使用波浪号`src="~/Content/Images/Product.png"`，但它仍然不起作用

这也开始影响 site.css 文件的加载

```
<head>
    <meta charset="utf-8" />
    <title>@ViewData("Title")</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.6.2.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/modernizr-2.0.6-development-only.js")" type="text/javascript"></script>
</head> 
```

在 Chrome 中，我收到一条错误消息，提示它未找到并且未在任何浏览器中加载，但我已确认它在磁盘上。 ![在此处输入图像描述](../Images/bfd54adfa8ca1aec7e640f4719e83547.png)

这里发生了一些奇怪的事情......

**网络配置**

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
  </configSections>
  <appSettings>
    <add key="webpages:Version" value="1.0.0.0"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880"/>
    </authentication>
    <pages controlRenderingCompatibilityVersion="4.0">
      <namespaces>
        <add namespace="System.Web.Helpers"/>
        <add namespace="System.Web.Mvc"/>
        <add namespace="System.Web.Mvc.Ajax"/>
        <add namespace="System.Web.Mvc.Html"/>
        <add namespace="System.Web.Routing"/>
        <add namespace="System.Web.WebPages"/>
      </namespaces>
    </pages>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/"/>
      </providers>
    </profile>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/"/>
      </providers>
    </membership>
    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/"/>
      </providers>
    </roleManager>
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection"/>
      </providers>
    </sessionState>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework"/>
  </entityFramework>
  <connectionStrings>
    <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-QSmartRectification-20120731104636;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-QSmartRectification-20120731104636.mdf"/>
  </connectionStrings>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="Synchronise" />
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://172.30.66.20/QSmart/Synchronise/" binding="basicHttpBinding"
        bindingConfiguration="Synchronise" contract="QSmartRectificationProvider.ISyncProvider"
        name="Synchronise" />
    </client>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T09:42:09.987

这可能是绝对路径的问题。如果页面是视图 ActionResult 并且应用了默认路由规则，那么您可以尝试“../../content/product.png”。或者，您可以使用帮助器 @Url.Content("~/content/product.png")。您始终可以使用浏览器检查绝对路径。

还要检查您的路由规则，看看它是否将内容文件夹映射到控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:30:14.230

你在哪里调用图像？如果您在“查看”文件夹之一中，您应该尝试 `src="../../Content/Images/Product.png"`

注意：每个`..`意味着一个文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:54:11.183

您是否尝试在前面添加“/”前缀？

```
<input type="image" src="/Content/Images/Product.png" runat="server" /> 
```

另一个猜测是您可能`RouteExistingFiles`在路由中将该属性设置为 true，因此没有加载 css 和图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T09:59:47.440

`server.MapPath("Images")+yourPhoto`您可以作为或作为`Mappath(".")+\\Images\\+`yourPhoto访问它

# java - Java 正则表达式仅匹配带有 www 的 url，而不是带有 http://www 的

> ID：12088572
> 
> 赞同：-1
> 
> 时间：2012-08-23T09:24:24.863
> 
> 标签：java, regex

基本上，如果文本类似于`"lalala www.test.com lala http://test66.com"`我需要一个正则表达式来制作它`"lalala http://www.test.com lala http://test66.com"`

谢谢

```
 String plain = "test lalala www.test.com lalaal jaja http://www.test.com";
    String str = "(?:(?:w{3}\.)(?:[a-zA-Z0-9/;\?&=:\-_\$\+!\*'\(\|\\~\[\]#%\.])+[\.com|\.edu|\.gov|\.int|\.mil|\.net|\.org|\.biz|\.info|\.name|\.pro|\.aero|\.coop|\.museum|\.cat|\.jobs|\.travel|\.arpa|\.mobi|\.ac|\.ad|\.ae|\.af|\.ag|\.ai|\.al|\.am|\.an|\.ao|\.aq|\.ar|\.as|\.at|\.au|\.aw|\.az|\.ax|\.ba|\.bb|\.bd|\.be|\.bf|\.bg|\.bh|\.bi|\.bj|\.bm|\.bn|\.bo|\.br|\.bs|\.bt|\.bv|\.bw|\.by|\.bz|\.ca|\.cc|\.cd|\.cf|\.cg|\.ch|\.ci|\.ck|\.cl|\.cm|\.cn|\.co|\.cr|\.cs|\.cu|\.cv|\.cx|\.cy|\.cz|\.de|\.dj|\.dk|\.dm|\.do|\.dz|\.ec|\.ee|\.eg|\.eh|\.er|\.es|\.et|\.eu|\.fi|\.fj|\.fk|\.fm|\.fo|\.fr|\.ga|\.gb|\.gd|\.ge|\.gf|\.gg|\.gh|\.gi|\.gl|\.gm|\.gn|\.gp|\.gq|\.gr|\.gs|\.gt|\.gu|\.gw|\.gy|\.hk|\.hm|\.hn|\.hr|\.ht|\.hu|\.id|\.ie|\.il|\.im|\.in|\.io|\.iq|\.ir|\.is|\.it|\.je|\.jm|\.jo|\.jp|\.ke|\.kg|\.kh|\.ki|\.km|\.kn|\.kp|\.kr|\.kw|\.ky|\.kz|\.la|\.lb|\.lc|\.li|\.lk|\.lr|\.ls|\.lt|\.lu|\.lv|\.ly|\.ma|\.mc|\.md|\.mg|\.mh|\.mk|\.ml|\.mm|\.mn|\.mo|\.mp|\.mq|\.mr|\.ms|\.mt|\.mu|\.mv|\.mw|\.mx|\.my|\.mz|\.na|\.nc|\.ne|\.nf|\.ng|\.ni|\.nl|\.no|\.np|\.nr|\.nu|\.nz|\.om|\.pa|\.pe|\.pf|\.pg|\.ph|\.pk|\.pl|\.pm|\.pn|\.pr|\.ps|\.pt|\.pw|\.py|\.qa|\.re|\.ro|\.ru|\.rw|\.sa|\.sb|\.sc|\.sd|\.se|\.sg|\.sh|\..si|\.sj|\.sk|\.sl|\.sm|\.sn|\.so|\.sr|\.st|\.sv|\.sy|\.sz|\.tc|\.td|\.tf|\.tg|\.th|\.tj|\.tk|\.tl|\.tm|\.tn|\.to|\.tp|\.tr|\.tt|\.tv|\.tw|\.tz|\.ua|\.ug|\.uk|\.um|\.us|\.uy|\.uz|\.va|\.vc|\.ve|\.vg|\.vi|\.vn|\.vu|\.wf|\.ws|\.xxx|\.ye|\.yt|\.yu|\.za|\.zm|\.zw](?:[a-zA-Z0-9/;\?&=:\-_\$\+!\*'\(\|\\~\[\]#%\.])*)";
    Pattern patt = Pattern.compile(str);
    Matcher matcher = patt.matcher(plain);
    plain = matcher.replaceAll("http://$1"); 
```

这是我尝试过的，但我无法正确转义字符串。除此之外，正则表达式本身比我需要的多一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:46:37.467

```
replaceAll(" www."," http://www"); would work, 
```

`如果www. 之前不是 ' ' 字符，则可以在这样的组中使用管道`"( |,|;|>)www."``

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:04:28.760

试试这个......

```
 String s = "lalala http://www.test.com lala http://test66.com";

    Pattern pat = Pattern.compile("\\b(((ht|f)tp(s?)\\:\\/\\/|~\\/|\\/)|www.)" + 
                    "(\\w+:\\w+@)?(([-\\w]+\\.)+(com|org|net|gov" + 
                    "|mil|biz|info|mobi|name|aero|jobs|museum" + 
                    "|travel|[a-z]{2}))(:[\\d]{1,5})?" + 
                    "(((\\/([-\\w~!$+|.,=]|%[a-f\\d]{2})+)+|\\/)+|\\?|#)?" + 
                    "((\\?([-\\w~!$+|.,*:]|%[a-f\\d{2}])+=?" + 
                    "([-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)" + 
                    "(&(?:[-\\w~!$+|.,*:]|%[a-f\\d{2}])+=?" + 
                    "([-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)*)*" + 
                    "(#([-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)?\\b");

    Matcher mat = pat.matcher(s);

        while(mat.find()){

                mat.replaceAll("http:");
            }

            System.out.println(s); 
````

# flash - Flex：为什么 SpriteVisualElement 不遵循布局？

> ID：12088573
> 
> 赞同：0
> 
> 时间：2012-08-23T09:24:27.240
> 
> 标签：flash, apache-flex

在下面的代码中，我在垂直布局中布局的滑块之前添加了一个 SpriteVisualElement。每当我编译和运行时，滑块总是将自己定位在精灵元素的前面而不是它的下面。这是一个闪存错误还是我做错了什么？这个问题有什么解决办法吗？

```
<s:layout>
    <s:VerticalLayout/>
</s:layout>
<s:SpriteVisualElement id="container" includeInLayout="true"/>
<s:HSlider/>

<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;
        protected function creationComplete_handler(event:FlexEvent):void
        {
            var canvas:Shape = new Shape();
            canvas.graphics.lineStyle(1,0);
            canvas.graphics.beginFill(0);
            canvas.graphics.drawRect(0,0,480,360);
            canvas.graphics.endFill();
            container.addChild(canvas);
        }
    ]]>
</fx:Script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:00:26.783

那是因为你`SpriteVisualElement`没有尺码。它`width`和`height`是`0`。您仍然可以看到黑色方块，因为它溢出了，但它没有被测量，因为它是一个纯 ActionScript 图形。

因此，要解决您的问题，只需给出`container`一个大小：

```
<s:SpriteVisualElement id="container" width="480" height="360" />
<s:HSlider/> 
```

`includeInLayout``true`默认情况下。

* * *

但是，如果您只想绘制一些形状，则最好使用 FXG。例如，您的矩形会变成这样：

```
<s:Rect width="480" height="360">
    <s:fill>
        <s:SolidColor color="0xff0000" />
    </s:fill>
    <s:stroke>
        <s:SolidColorStroke color="0x00ff00" weight="1" />
    </s:stroke>
</s:Rect>
<s:HSlider/> 
```

# jakarta-ee - 异常后提交事务 - 撤消 setRollbackOnly

> ID：12088574
> 
> 赞同：0
> 
> 时间：2012-08-23T09:24:27.620
> 
> 标签：jakarta-ee, transactions, ejb-3.0, eclipselink

在我的方法中，`@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)`有时会发生`org.eclipse.persistence.exceptions.DatabaseException`由于`SQLException`. 我捕捉到这个异常并通过另一个数据库查询来处理这种情况。但是，此查询未通过，因为由于异常， setRollbackOnly 已自动设置，此时我无法再提交事务。

在 Java SE 中，我会做一个明确的

```
manager.getTransaction().rollback();
manager.getTransaction().begin(); 
```

但是在应用程序服务器中，这当然是行不通的。

在这种情况下，我能否以某种方式让我的数据库更改提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:01:26.273

esej 的评论中给出的提示是解决方案：“在另一个带有 REQUIRES_NEW 注释的 bean 上调用方法。”

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:10:52.770

当您尝试启动新的全局事务而前一个事务既未提交也未回滚时，您将出现“调用例程等”错误。

为了解决这个问题，您应该执行以下操作：

当您捕获第一个异常时，不要将其留给容器将事务标记为“回滚”。您必须手动将事务标记为回滚。

# php - PHP/MySQL 每周轮值表

> ID：12088576
> 
> 赞同：0
> 
> 时间：2012-08-23T09:24:30.220
> 
> 标签：php, mysql, queue

我有一个按特定顺序排列的用户列表。例如，每周我想将队列的顺序增加一个

```
Week 1
User | Order
a    | 1
b    | 2
c    | 3

Week 2
User | Order
b    | 1
c    | 2
a    | 3 
```

等等...

有没有一种简单的方法可以只用 PHP 和 MySQL 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:40:26.020

设置每周 cron 作业：

1.  首先，您必须对所有行减去 1 个订单：`UPDATE TABLE SET Order = Order-1`
2.  然后你必须改变“0”值顺序：`UPDATE TABLE SET Order = MAX(Order)+1 WHERE Order = 0`

如果您对“订单”列中的“0”值有限制：

1.  首先，您必须更改“1”值顺序：`UPDATE TABLE SET Order = MAX(Order)+1 WHERE Order = 1`
2.  然后你必须对所有行减去 1 个订单：`UPDATE TABLE SET Order = Order-1`

# api - Magento SOAP API v2 将电子邮件设置为帐单地址

> ID：12088590
> 
> 赞同：2
> 
> 时间：2012-08-23T09:25:13.347
> 
> 标签：api, magento, soap

我正在使用[SOAP API v2将我的应用程序与](http://www.magentocommerce.com/api/soap/introduction.html)[Magento集成](http://www.magentocommerce.com/)

我需要将电子邮件设置为帐单地址。目前可以通过[`shoppingCartInfo`](http://www.magentocommerce.com/api/soap/checkout/cart/cart.info.html)API调用查看账单地址邮件（见`shoppingCartAddressEntity`字段说明），但是好像没有办法通过API调用*设置*[`shoppingCartCustomerAddresses`](http://www.magentocommerce.com/api/soap/checkout/cartCustomer/cart_customer.addresses.html)（没有这个字段`shoppingCartCustomerAddressEntity`）。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:09:50.573

尝试创建自定义客户地址属性，

您可以在此[链接1](http://www.magentocommerce.com/wiki/5_-_modules_and_development/how_to_add_custom_field_in_billing_and_shipping_address_in_frontend_and_backend)或[链接2上学习](http://www.jamiekahgee.com/2011/11/how-to-add-a-custom-magento-customer-address-attribute/)

之后你可以

```
$proxy = new SoapClient('http://magentohost/api/soap/?wsdl');
$sessionId = $proxy->login('apiUser', 'apiKey');

$shoppingCartId = $proxy->call( $sessionId, 'cart.create', array( 'magento_store' ) );

$arrAddresses = array(
    array(
        "mode" => "shipping",
        "firstname" => "testFirstname",
        "lastname" => "testLastname",
        "email" => "testEmail", // this is your custom attribute (email) on address.
        "company" => "testCompany",
        "street" => "testStreet",
        "city" => "testCity",
        "region" => "testRegion",
        "postcode" => "testPostcode",
        "country_id" => "id",
        "telephone" => "0123456789",
        "fax" => "0123456789",
        "is_default_shipping" => 0,
        "is_default_billing" => 0
    ),
    array(
        "mode" => "billing",
        "address_id" => "customer_address_id"
    )
);

$resultCustomerAddresses = $proxy->shoppingCartCustomerAddresses(
    $sessionId,
    array(
        $shoppingCartId,
        $arrAddresses,
    )
); 
```

# c# - 如何在表单中使用 aspx:dropdown 和数据源？

> ID：12088592
> 
> 赞同：0
> 
> 时间：2012-08-23T09:25:17.987
> 
> 标签：c#, asp.net, html

我正在做一个 Asp.net 项目，我需要填写一个包含两个两个字段的表格。比方说

```
<form>
 a_text <asp:TextBox ID="UserName" runat="server"/>

        <asp:CheckBox ID="TestCheckboxes" runat="server" CssClass="tb_sm" />

        <asp:DropDownList ID="DropDownList1" runat="server"  
            CssClass="ddlb" Width="210px" Height="30px"  DataSourceID="SqlDataSource2" 
            DataTextField="OrderPeriod" DataValueField="OrderPeriodID">
        </asp:DropDownList>

       <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$  ConnectionStrings:ProdDB %>" SelectCommand=" # Some Command">
     </asp:SqlDataSource>

     <asp:Button ID="ButtonSubmit" runat="server" Text="Done" />
</form> 
```

当我从数据库中选择一些值时，即使`OnSelectedIndexChanged`下拉列表中没有，它也会刷新页面。

我是新手`asp.net`。我应该如何填写表格。我如何获得与提交按钮关联的以下方法的值：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:28:24.747

1 您好，您在 DataSourceID="SqlDataSource2" 上出现错误

->`DataSourceID="SqlDataSource1"`

你必须选择好的SqlDataSource

尝试使用此代码

```
 <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" 
            CssClass="ddlb" Width="210px" Height="30px"  DataSourceID="SqlDataSource1" 
            DataTextField="OrderPeriod" DataValueField="OrderPeriodID">
        </asp:DropDownList>

        <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$  ConnectionStrings:ProdDB %>" SelectCommand=" # Some Command">
        </asp:SqlDataSource> 
```

2您可以通过以下方式获得价值

```
DropDownList1.Text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:27:22.543

清除查询的第一部分；它会刷新页面，因为您已将其`AutoPostBack`设置为 true`dropdownlist`

# xquery - 如何在 marklogic 中搜索与模式匹配的 URI 列表？

> ID：12088593
> 
> 赞同：3
> 
> 时间：2012-08-23T09:25:22.187
> 
> 标签：xquery, marklogic

我是 XML 数据库的新手，所以我需要一些有关 marklogic 和 xquery 的帮助。

我确实在数据库中记录了一些文档，当我按下探索按钮时，它们的 URI 出现并且看起来像（例如）：

`/firstDirectory/documentA.xml`

`/firstDirectory/documentB.xml`

`/secondDirectory/documentC.xml`

现在我想获取位于“firstDirectory”中的所有文档的 URI 列表。所以我需要这样的东西：

`List<URI> unknownXQueryFunction("/firstDirectory/");`

可悲的是，我在查看 MarkLogic API 时找不到我需要的功能。我用collection / document / document-uri / base-uri / directory尝试了一些东西，但没有一个成功:(

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T21:45:54.077

这会将目录查询应用于 cts:uris，这应该是比 cts:uri-match 更准确的方法，具体取决于目录的组织方式：

```
cts:uris((),'document' cts:directory-query('/firstDirectory/','infinity')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:49:06.247

如果您启用了 uri 词典，请尝试[cts:uris](http://developer.marklogic.com/pubs/5.0/apidocs/Lexicons.html#cts%3auris) ("/firstDirectory/", "document")。

# c - Malloc, Calloc 测试我的记忆极限

> ID：12088597
> 
> 赞同：2
> 
> 时间：2012-08-23T09:25:32.100
> 
> 标签：c, calloc

我正在尝试编写 ac 程序来测试我的系统上有多少内存。我打算在各种不同的条件下运行它：

1.  启用交换
2.  禁用交换并且过度使用 (/proc/sys/vm/overcommit_memory) 设置为 false
3.  禁用交换并且过度使用 (/proc/sys/vm/overcommit_memory) 设置为 true
4.  在系统上运行的虚拟机内部

我这样做是为了更多地了解内存分配在系统真实和虚拟内存的限制下如何表现。

我在具有 4GB RAM 和 8GB Swap 的机器上运行它。

我目前拥有的是这样的：

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    int *ptr;
    int mb = 1048576;
    long long int i;

    for (i = 0; i < 1000000000000; i++)
    {
        printf("Trying to allocate %lld MBytes\n", i * 10 * sizeof(int) );

        ptr = (int*) calloc(10 * mb, sizeof(int));
        if ( ptr == 0 ) {
            // clean up
            free(ptr);
            printf("Ran out of memory\n");
            return 1;
        }
    }
} 
```

我希望这将继续分配 40mb 的块（sizeof(int) 在我的系统上为 4）。Calloc 会将内存初始化为零。当没有更多可用内存时，它将终止程序并释放内存。

当我运行它时，它会继续超出我的记忆范围。它最终在打印以下行时死了：“尝试分配 5707960 MBytes。” （表示将近 6000 GB 的内存。）

任何人都可以弄清楚我要去哪里错了。

感谢@Blank Xavier 指出以这种方式分配时应考虑页面文件大小。

我修改了代码如下：

```
int main(void)
{
    int *ptr;
    int mb = 1048576;
    int pg_sz = 4096;

    long long int i;

    for (i = 0; i < 1000000000000; i++)
    {
        printf("Trying to allocate %lld MBytes\n", i * pg_sz * sizeof(int) / mb );

        ptr = (int*) calloc(pg_sz, sizeof(int));
        if ( ptr == 0 ) {
            // clean up
            free(ptr);
            printf("Ran out of memory\n");
            return 1;
        }
    }
} 
```

现在它轰炸了打印：

“尝试分配 11800 MB”

这就是我对 4GB Ram 和 8GB 交换的期望。顺便说一句，它在 4GB 之后打印速度要慢得多，因为它正在交换到磁盘。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:29:53.740

首先，一些建议：

> 请不要从 C 中的分配函数中转换返回值——这可能会掩盖某些几乎*肯定会*在某些时候咬你的错误（例如没有在指针和整数宽度不同的系统中定义原型）。
> 
> 分配函数返回`void *`完全能够被*隐式*转换为任何其他指针。

就您的实际问题而言，我将从前面的大量分配开始，确保它失败，至少在没有某些优化^((a))的系统上。

在这种情况下，你然后逐渐下台，直到第一个成功。这样，您不必担心管理信息会占用内存区域中的太多空间或内存碎片的可能性：您只需找到最大的单个分配即可立即成功。

换句话说，类似于以下伪代码：

```
allocsz = 1024 * 1024 * 1024
ptr = allocate_and_zero (allocsz)
if ptr != NULL:
    print "Need to up initial allocsz value from " + allocsz + "."
    exit
while ptr == NULL:
    allocsz = allocsz - 1024
    ptr = allocate_and_zero (allocsz)
print "Managed to allocate " + allocsz + " bytes." 
```

* * *

^((a))：至于为什么`calloc`在您的系统上返回的内存似乎比交换中的更多，GNU libc 将在某个阈值大小之上使用`mmap`而不是堆，因此您的分配不受交换文件大小的限制（它的后备存储在其他地方）。从`malloc`Linux下的文档：

> 通常，malloc() 从堆中分配内存，并根据需要调整堆的大小，使用 sbrk(2)。当分配大于 MMAP_THRESHOLD 字节的内存块时，glibc malloc() 实现使用 mmap(2) 将内存分配为私有匿名映射。

这是我上面的解决方案无法解决的问题，因为它的初始大规模分配也将高于阈值。

在物理内存方面，既然您已经在使用`procfs`，您可能应该只看一下内部`/proc/meminfo`。`MemTotal`应该为您提供可用的物理内存（可能*不是*完整的 4G，因为其中一些地址空间被盗用于其他目的）。

对于虚拟内存分配，将分配大小保持在阈值以下，以便它们从堆而不是`mmap`区域中出来。`malloc`Linux文档中的另一个片段：

> MMAP_THRESHOLD 默认为 128 kB，但可以使用 mallopt(3) 进行调整。

所以你的选择是用来`mallopt`增加阈值，或者稍微降低 10M 的分配大小（比如 64K）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T09:53:29.893

您不能通过巨大的分配来确定物理内存，然后减少分配大小直到成功。

这只会确定最大可用虚拟内存块的大小。

您需要循环，分配物理页面大小（也将是虚拟页面大小）的块，直到分配失败。使用这样一个简单的程序，您无需担心跟踪您的分配 - 操作系统将在程序退出时返回它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:38:31.363

好吧，程序按照您的意图进行，但是巨大的数字后面需要一个 LL，否则它会被编译器“随机”截断，编译器会将数字视为整数。

但是，当您释放指针时，它是一个空指针，它实际上不会做任何事情。它不会释放您分配的所有内存，因为您没有指向它的指针。

此外，如果您退出主循环，则从 main 中返回的内容是未定义的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-23T09:35:34.530

如果循环成功，您必须释放分配的内存

```
for (i = 0; i < 1000000000000; i++)
{
    printf("Trying to allocate %lld MBytes\n", i * 10 * sizeof(int) );

    ptr = (int*) calloc(10 * mb, sizeof(int));
    if ( ptr == 0 ) {
        printf("Ran out of memory\n");
        return 1;
    }
    else 
        free(ptr);
} 
```

# .net - .NET Rijndael 加密密钥太大？

> ID：12088602
> 
> 赞同：0
> 
> 时间：2012-08-23T09:25:45.153
> 
> 标签：.net, encryption, webforms, key, rijndael

我收到了一个带有密码的 SQL 服务器数据库。该数据库来自一个 .NET 网站。我正在将网站重建为 PHP，所以我想对密码使用自己的加密算法。为此，我尝试从源数据库中解密密码，但到目前为止还没有成功。

根据原始开发人员的说法，它使用 Rijndael 加密。键是数据库中的 blob 字段。我将它们导出并尝试使用 PHP 来解密密码。我没有成功，但在堆栈溢出的某个地方读到 PHP 和 .NET 实现它的方式有所不同。这只能通过更改 .NET 中的加密方式来解决，但这不是一种选择。

所以接下来我尝试创建一个小的 .NET Web 表单来解码密码。对于测试，我使用以下代码：

```
var iv = Encoding.UTF8.GetBytes("5F38D2742EFC59486F6CBDDAB3E46EC5");
var key = Encoding.UTF8.GetBytes("F88640BE83A6911472BA4AF9B9C37E2C2B3E78BCFECF4BC6ADE1E928441F6AD7");

var rijndael = new RijndaelManaged
{
    BlockSize = 256,
    IV = iv,
    KeySize = 256,
    Key = key
};
rijndael.Padding = PaddingMode.None;
var buffer = Convert.FromBase64String("D1jo49HH6cL4kZVVeIDyDbJGtO4+f2N9YIonOqRg6hM=");
var transform = rijndael.CreateDecryptor();
string decrypted;
using (var ms = new MemoryStream())
{
    using (var cs = new CryptoStream(ms, transform, CryptoStreamMode.Write))
    {
        cs.Write(buffer, 0, buffer.Length);
        cs.FlushFinalBlock();
        decrypted = Encoding.UTF8.GetString(ms.ToArray());
        cs.Close();
    }
    ms.Close();
}
Label1.Text = decrypted; 
```

顺便说一下，我已经更改了键，但字符数仍然相同。显然密钥的大小是 512 位而不是 256 位。但这不受 Rijndael 的支持。当我拿走一半密钥时，它不会产生任何错误，但当然不会给我正确的密码。

现在我注意到密钥是十六进制字符。我尝试使用诸如[http://www.string-functions.com/hex-string.aspx](http://www.string-functions.com/hex-string.aspx)之类的网络工具对其进行转换，但这并没有给我一个有效的字符串（只是一些奇怪的字符。所以我不确定是否这与它有什么关系，但如果是这样，如何转换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:24:09.057

错误在这两行：

```
var iv = Encoding.UTF8.GetBytes("5F38D2742EFC59486F6CBDDAB3E46EC5");
var key = Encoding.UTF8.GetBytes("F88640BE83A6911472BA4AF9B9C37E2C2B3E78BCFECF4BC6ADE1E928441F6AD7"); 
```

您的字符串文字中的内容似乎是十六进制字符串。这些应该通过依次获取每对字符并将它们转换为`byte`. 不幸的是，.NET 框架中没有内置函数来执行此操作，但是问题[如何将字节数组转换为十六进制字符串，反之亦然，在 C# 中](https://stackoverflow.com/questions/311165/how-do-you-convert-byte-array-to-hexadecimal-string-and-vice-versa-in-c)应该包含一些有用的提示来实现这一点。

相反，您当前的代码将依次获取每个字符，并计算一个或多个（好吧，在这种情况下，始终是一个）`byte`值，即该字符的 UTF8 值。

这是两个非常不同的操作，但是字符是/应该如何被消耗的差异是为什么你得到的字节数是你期望接收的字节数的两倍。

# java - 以编程方式从 Log4J FileAppender 访问文件

> ID：12088603
> 
> 赞同：0
> 
> 时间：2012-08-23T09:25:45.410
> 
> 标签：java, file, log4j, appender

我有一个使用 log4j 日志框架的 Java 应用程序。在我的应用程序中，我有几个模块，每个模块都创建自己的日志文件。我通过命令行启动我的应用程序，传递一个参数来告诉我的应用程序应该运行哪个模块。假设我有 3 个模块，所以每次启动一个模块时，都会创建所有 3 个日志文件，但只有一个包含信息（我刚刚启动的模块中的那个）。我已将每个 File Appender 设置为

```
...append = false 
```

这样每次我启动我的应用程序时，我都会有没有旧日志数据的新日志文件。

现在我有一个创建流程链的批处理文件，因此在批处理文件中，所有 3 个模块都在另一个之后被调用。但问题是：最后，前 2 个模块的日志文件是空的，只有最后一个模块将其日志存储在正确的日志文件中（当然这必须是这样，因为我将 append 选项设置为每个文件追加器）

我正在寻找以下解决方案：当我启动一个模块时，我想检查该模块的日志文件是否为空。如果是，那么我只需将日志记录数据附加到此文件中。如果文件中已经有数据，我想删除内容以存储当前的日志记录数据。所以最后当我调用所有 3 个模块（每次使用不同的参数启动应用程序 3 次）时，我希望填充所有 3 个日志文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:49:35.403

如果我理解正确，那么 RollingFileAppender 将为每个模块创建 3 个日志文件（假设我启动 3 个模块）所以假设我有以下模块，括号中包含适当的日志文件：

```
Module 1: -import (import.log)
Module 2: -parsing (parsing.log)
Module 3: -deletion (deletion.log) 
```

启动 modul 1 后，我将拥有以下文件 + 它们的大小：

```
import.log (size >0)
parsing.log (empty)
deletion.log (empty) 
```

目前在启动第二个模块后，我将拥有：

```
import.log (empty)
parsing.log (size >0)
deletion.log (empty) 
```

当我使用 RollingFileAppender 时，我会在启动第二个模块后得到以下内容：

```
import1.log (empty)
import.log (size >0)
parsing1.log (empty)
parsing.log (size >0)
deletion.log (empty) 
```

但是在启动可用的 3 个模块中的 2 个后，我想拥有以下内容

```
import.log (size >0)
parsing.log (size >0)
deletion.log (empty) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:11:37.107

每次运行程序模块时，您想要的是一个全新的日志文件。

您是否考虑过使用[RollingFileAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/RollingFileAppender.html)？在您在程序开始时`RollingFileAppender`使用的设置之后创建一个新的日志文件。`appender.rollOver();`您可以配置保留许多旧日志文件，而`appender.setMaxBackupIndex(int)`任何旧日志文件都将被删除。这将文件的管理委托给框架。

另一种方法是使用[DailyRollingFileAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/DailyRollingFileAppender.html)。您可以配置文件翻转的时间间隔。

# objective-c - Objective-C ARC __weak 变量引用触发警告“无法在自动变量上指定 __weak 属性”

> ID：12088604
> 
> 赞同：6
> 
> 时间：2012-08-23T09:25:46.163
> 
> 标签：objective-c, ios, automatic-ref-counting, objective-c++, weak-references

我有一个应用程序（仅限 ios5），它在方法内声明了一个在块内使用的弱变量来引用视图控制器的实例。

```
 QRCodeViewController * __weak weakSelf = self; 
```

问题是编译器显示警告说：

> __weak 属性不能在自动变量上指定

在那个应用程序中，我使用了很多弱引用，我从来没有看到过这样的警告，与其他类的唯一区别是这个类是在 .mm 文件中实现的，因为它使用 c++ 对象并且项目无法编译如果我将其保留为 .m。
我必须说代码似乎工作正常。
有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-01T12:58:26.503

面对同样的警告，我通过以下方式使用 __block 属性使其消失：

```
__block __weak MyViewController* weakSelf = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:13:25.703

我不确定为什么警告说`__weak`不能指定。AFAIK 应该可以指定它，即使`__weak`用于自动变量非常危险。

苹果文档说，如果你这样做，编译器会提供一个警告，但实际的警告文本似乎暗示该属性将被忽略，而不仅仅是使用它是危险的，而文档似乎暗示它是危险的，但它有效正如预期的那样（如果你真的明白会发生什么）。

您必须做一些实验来验证警告文本是否不合适或文档是否没有正确更新。

# crystal-reports - 水晶报告：无空白！我需要格式化我的地址

> ID：12088606
> 
> 赞同：0
> 
> 时间：2012-08-23T09:25:48.017
> 
> 标签：crystal-reports, formatting, crystal-reports-xi, crystal-reports-2010, street-address

对 CR 相当陌生，我正在寻求帮助，

基本上我想在包含以下字段的文本框中显示我的地址

```
{Company}
{AddLine1}
{AddLine2}
{ZIP} {City} {State}
{Country} 
```

当在数据库中输入所有字段时，我将所有这些都正确显示在文本框中。真正的问题在于邮编、城市、州际线。我需要将它们分开以使它们分开，所以我只是在每个之间插入了一个空格，但是当 ZIP 字段未填充到数据库中并且城市字段随后在预览中缩进时，空格会显示出来。如果未输入 ZIP 将被抑制，所以这不是问题，只是 zip、城市和州之间的空格。是否有在输入空格时显示空格以使地址间隔正确，但在未输入字段时也不显示空格以使该行不缩进？我认为这可能是我需要的公式？也许是这样的？

```
If IsNull ({customer.ZIP}) Then
{customer.CITY} + " " + {customer.STATE}
Else
{customer.ZIP} + " " + {customer.CITY} + " " + {customer.STATE} 
```

感谢您的帮助，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:27:03.633

也许这些水晶报告语法提示可以帮助你（在设计器中）

```
IsNull({Produits.Couleur})
InStr({Produits.Couleur}, " ") = 0 
```

一些函数被构建为相对于为空的上下文字段具有更好的格式：

```
PreviousIsNull, NextIsNull. 
```

一些文档可以帮助您喜欢[8.5 (2011, pdf) 的完整语法参考](http://www.dynalivery.com/customersupport/crystaldecisions/CR8_5Techref.pdf)。

# java - 这是一个有效的 HTTP 获取请求吗？

> ID：12088607
> 
> 赞同：2
> 
> 时间：2012-08-23T09:25:51.233
> 
> 标签：java, http

我正在与向我们的应用程序发送 HTTP-GET 请求的系统集成。使用 Jetty，需要几分钟的时间才能将某些东西拍打在一起。

我用 curl 测试了它（在请求中有必要的转义），一切都很顺利。我按要求收到了回复：

```
$ curl http://localhost:9100?field1=value1\&field2=value2\&field3=value3 
```

机器上的 TCP 转储显示请求通过：

```
GET /?field1=value1&field2=value2&field3=value3 HTTP/1.1
User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.13.1.0 zlib/1.2.3    libidn/1.18 libssh2/1.2.2
Host: xxx.xxx.xxx.xxx:9100
Accept: */* 
```

然而，生活从来没有那么简单。当我部署它以便我们可以真正开始与真实系统集成时，我的代码中的处理程序甚至没有被调用。Jetty 立即响应“HTTP/1.1 400 Bad Request”。TCP 转储显示以下内容：

```
GET ?field1=value1&field2=value2&field3=value3 HTTP/1.1 
```

就是这样......没有标题信息，就在上面。

我现在的问题是上面的请求是否真的有效。斜线是必需的吗？是否有任何标题条目是强制性的？

有任何想法吗？这是否意味着我必须重新设计轮子才能使其正常工作？

* * *

编辑：

我尝试使用 telnet 连接。在某些网络服务器的 GET 请求之后，似乎确实需要 / 。但是，似乎它们之间的处理方式不同。码头抱怨，谷歌运行的网络服务器抱怨......但是Apache是​​一个很好的例子。似乎不需要任何标题信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T09:31:22.157

[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616.html)提供了所有杂项细节：

[3.2.2](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.2.2)

> 如果 URL 中不存在 abs_path，则在用作资源的 Request-URI 时必须将其指定为“/”（第 5.1.2 节）。

[14.23](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.23)

> 客户端必须在所有 HTTP/1.1 请求消息中包含 Host 头字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T09:31:14.293

根据[HTTP1.1 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.23)，`Host:`header 字段是强制性的。~~不需要前导斜杠。~~事实证明，前导斜杠也是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:29:36.370

我看不出它有什么问题——~~斜线不应该是必需的~~。

我的立场是正确的，斜线是必需的。

# c# - Euler <=> Quaternion 之间的转换就像 Unity3d 引擎中一样

> ID：12088610
> 
> 赞同：4
> 
> 时间：2012-08-23T09:26:10.247
> 
> 标签：c#, math, unity3d, quaternions, euler-angles

我使用了两个示例（也来自此站点），但结果与 Unity 中的结果不同。

Quaternion.Euler 和 .eulerAngles 是 Unity 函数。FromQ 不执行奇点检查，FromQ2 执行。

结果：

```
eulers = (100,55,-11):
Quaternion.Euler(eulers) == (0.6, 0.4, -0.4, 0.5)
ToQ(eulers)); == (0.5, -0.4, 0.2, 0.7) // 0.5, -0.4 right but in wrong order

FromQ(ToQ(eulers)) == (55.0, 100.0, -11.0)
FromQ2(ToQ(eulers)) == (-55.5, -6.3, 71.0) // something right

Quaternion.Euler(eulers).eulerAngles == (80.0, 235.0, 169.0)
FromQ2(Quaternion.Euler(eulers)) == (65.8, 1.9, 99.8)
ToQ(eulers).eulerAngles == (70.0, 286.9, 341.4)
FromQ(Quaternion.Euler(eulers)) == (-65.8, 76.0, 4.6)

It must be:
FromQ() = FromQ2() = .eulerAngles,
ToQ() = Quaternion.Euler() 
```

代码在这里： http: [//pastebin.ru/eAlTHdYf](http://pastebin.ru/eAlTHdYf)

任何人都可以更正此代码吗？我需要返回与 Unity 函数返回的值相同的值的代码。

## **更新**

这是固定代码： http: [//pastebin.com/riRLRvch](http://pastebin.com/riRLRvch)。两个函数（FromQ 和 ToQ）都运行良好。但我有一个奇点的问题。它无法正确检测奇点。

```
For example (90, 0, 50) in quaternion is (0.6, -0.3, 0.3, 0.6).
test = x * y + z * w = 0 (must be close to 0.5 or -0.5) 
```

FromQ 不能计算出正确的结果，所以这里有奇点。(90, 50, 0) - (0.6, 0.3, -0.3, 0.6) 相同。

我只看到一种解决方案 - 将“测试”计算为 xw-yz。但我不确定这是否正确。

如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-25T14:38:39.323

我找到了解决方案

```
public static Quaternion ToQ (Vector3 v)
{
    return ToQ (v.y, v.x, v.z);
}

public static Quaternion ToQ (float yaw, float pitch, float roll)
{
    yaw *= Mathf.Deg2Rad;
    pitch *= Mathf.Deg2Rad;
    roll *= Mathf.Deg2Rad;
    float rollOver2 = roll * 0.5f;
    float sinRollOver2 = (float)Math.Sin ((double)rollOver2);
    float cosRollOver2 = (float)Math.Cos ((double)rollOver2);
    float pitchOver2 = pitch * 0.5f;
    float sinPitchOver2 = (float)Math.Sin ((double)pitchOver2);
    float cosPitchOver2 = (float)Math.Cos ((double)pitchOver2);
    float yawOver2 = yaw * 0.5f;
    float sinYawOver2 = (float)Math.Sin ((double)yawOver2);
    float cosYawOver2 = (float)Math.Cos ((double)yawOver2);
    Quaternion result;
    result.w = cosYawOver2 * cosPitchOver2 * cosRollOver2 + sinYawOver2 * sinPitchOver2 * sinRollOver2;
    result.x = cosYawOver2 * sinPitchOver2 * cosRollOver2 + sinYawOver2 * cosPitchOver2 * sinRollOver2;
    result.y = sinYawOver2 * cosPitchOver2 * cosRollOver2 - cosYawOver2 * sinPitchOver2 * sinRollOver2;
    result.z = cosYawOver2 * cosPitchOver2 * sinRollOver2 - sinYawOver2 * sinPitchOver2 * cosRollOver2;

    return result;
}

public static Vector3 FromQ2 (Quaternion q1)
{
    float sqw = q1.w * q1.w;
    float sqx = q1.x * q1.x;
    float sqy = q1.y * q1.y;
    float sqz = q1.z * q1.z;
    float unit = sqx + sqy + sqz + sqw; // if normalised is one, otherwise is correction factor
    float test = q1.x * q1.w - q1.y * q1.z;
    Vector3 v;

    if (test>0.4995f*unit) { // singularity at north pole
        v.y = 2f * Mathf.Atan2 (q1.y, q1.x);
        v.x = Mathf.PI / 2;
        v.z = 0;
        return NormalizeAngles (v * Mathf.Rad2Deg);
    }
    if (test<-0.4995f*unit) { // singularity at south pole
        v.y = -2f * Mathf.Atan2 (q1.y, q1.x);
        v.x = -Mathf.PI / 2;
        v.z = 0;
        return NormalizeAngles (v * Mathf.Rad2Deg);
    }
    Quaternion q = new Quaternion (q1.w, q1.z, q1.x, q1.y);
    v.y = (float)Math.Atan2 (2f * q.x * q.w + 2f * q.y * q.z, 1 - 2f * (q.z * q.z + q.w * q.w));     // Yaw
    v.x = (float)Math.Asin (2f * (q.x * q.z - q.w * q.y));                             // Pitch
    v.z = (float)Math.Atan2 (2f * q.x * q.y + 2f * q.z * q.w, 1 - 2f * (q.y * q.y + q.z * q.z));      // Roll
    return NormalizeAngles (v * Mathf.Rad2Deg);
}

static Vector3 NormalizeAngles (Vector3 angles)
{
    angles.x = NormalizeAngle (angles.x);
    angles.y = NormalizeAngle (angles.y);
    angles.z = NormalizeAngle (angles.z);
    return angles;
}

static float NormalizeAngle (float angle)
{
    while (angle>360)
        angle -= 360;
    while (angle<0)
        angle += 360;
    return angle;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-15T12:44:09.000

这个问题已经快三年了，但是我需要相同的代码，而这里发布的代码似乎不正确，所以我对其进行了调整，发现了这个：

```
public static Quaternion Euler(float yaw, float pitch, float roll) {
        yaw*=Mathf.Deg2Rad;
        pitch*=Mathf.Deg2Rad;
        roll*=Mathf.Deg2Rad;

        double yawOver2 = yaw * 0.5f;
        float cosYawOver2 = (float)System.Math.Cos(yawOver2);
        float sinYawOver2 = (float)System.Math.Sin(yawOver2);
        double pitchOver2 = pitch * 0.5f;
        float cosPitchOver2 = (float)System.Math.Cos(pitchOver2);
        float sinPitchOver2 = (float)System.Math.Sin(pitchOver2);
        double rollOver2 = roll * 0.5f;
        float cosRollOver2 = (float)System.Math.Cos(rollOver2);
        float sinRollOver2 = (float)System.Math.Sin(rollOver2);            
        Quaternion result;
        result.w = cosYawOver2 * cosPitchOver2 * cosRollOver2 + sinYawOver2 * sinPitchOver2 * sinRollOver2;
        result.x = sinYawOver2 * cosPitchOver2 * cosRollOver2 + cosYawOver2 * sinPitchOver2 * sinRollOver2;
        result.y = cosYawOver2 * sinPitchOver2 * cosRollOver2 - sinYawOver2 * cosPitchOver2 * sinRollOver2;
        result.z = cosYawOver2 * cosPitchOver2 * sinRollOver2 - sinYawOver2 * sinPitchOver2 * cosRollOver2;

        return result;
} 
```

根据一些快速测试，这匹配 Quaternion.Euler 100%

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T00:47:29.473

这可能只值得部分回答，但这里是“ToQ() = Quaternion.Euler()”：

```
public static Quaternion ToQ(Vector3 v)
{
    return ToQ(v.y,v.x,v.z);
}

public static Quaternion ToQ(float yaw, float pitch, float roll)
{
    yaw*=Mathf.Deg2Rad;
    pitch*=Mathf.Deg2Rad;
    roll*=Mathf.Deg2Rad;
    float rollOver2 = roll * 0.5f;
    float sinRollOver2 = (float)Math.Sin((double)rollOver2);
    float cosRollOver2 = (float)Math.Cos((double)rollOver2);
    float pitchOver2 = pitch * 0.5f;
    float sinPitchOver2 = (float)Math.Sin((double)pitchOver2);
    float cosPitchOver2 = (float)Math.Cos((double)pitchOver2);
    float yawOver2 = yaw * 0.5f;
    float sinYawOver2 = (float)Math.Sin((double)yawOver2);
    float cosYawOver2 = (float)Math.Cos((double)yawOver2);
    Quaternion result;
    result.w = cosYawOver2 * cosPitchOver2 * cosRollOver2 + sinYawOver2 * sinPitchOver2 * sinRollOver2;
    result.x = cosYawOver2 * sinPitchOver2 * cosRollOver2 + sinYawOver2 * cosPitchOver2 * sinRollOver2;
    result.y = sinYawOver2 * cosPitchOver2 * cosRollOver2 - cosYawOver2 * sinPitchOver2 * sinRollOver2;
    result.z = cosYawOver2 * cosPitchOver2 * sinRollOver2 - sinYawOver2 * sinPitchOver2 * cosRollOver2;

    return result;
} 
```

您问题的“FromQ”部分是另一回事。欧拉角[比较是个痛点](https://stackoverflow.com/questions/11103683/euler-angle-to-quaternion-then-quaternion-to-euler-angle)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-09T08:59:48.673

这是我的解决方案。这与 Unity 的 Quaternion.Euler 和 quaternion.eulerAngles 非常接近。差异足够小，以至于它们对任何应用程序都无关紧要。

```
public static Vector3 QuaternionToEuler(Quaternion q)
{
    Vector3 euler;

    // if the input quaternion is normalized, this is exactly one. Otherwise, this acts as a correction factor for the quaternion's not-normalizedness
    float unit = (q.x * q.x) + (q.y * q.y) + (q.z * q.z) + (q.w * q.w);

    // this will have a magnitude of 0.5 or greater if and only if this is a singularity case
    float test = q.x * q.w - q.y * q.z;

    if (test > 0.4995f * unit) // singularity at north pole
    {
        euler.x = Mathf.PI / 2;
        euler.y = 2f * Mathf.Atan2(q.y, q.x);
        euler.z = 0;
    }
    else if (test < -0.4995f * unit) // singularity at south pole
    {
        euler.x = -Mathf.PI / 2;
        euler.y = -2f * Mathf.Atan2(q.y, q.x);
        euler.z = 0;
    }
    else // no singularity - this is the majority of cases
    {
        euler.x = Mathf.Asin(2f * (q.w * q.x - q.y * q.z));
        euler.y = Mathf.Atan2(2f * q.w * q.y + 2f * q.z * q.x, 1 - 2f * (q.x * q.x + q.y * q.y));
        euler.z = Mathf.Atan2(2f * q.w * q.z + 2f * q.x * q.y, 1 - 2f * (q.z * q.z + q.x * q.x));
    }

    // all the math so far has been done in radians. Before returning, we convert to degrees...
    euler *= Mathf.Rad2Deg;

    //...and then ensure the degree values are between 0 and 360
    euler.x %= 360;
    euler.y %= 360;
    euler.z %= 360;

    return euler;
}

public static Quaternion EulerToQuaternion(Vector3 euler)
{
    float xOver2 = euler.x * Mathf.Deg2Rad * 0.5f;
    float yOver2 = euler.y * Mathf.Deg2Rad * 0.5f;
    float zOver2 = euler.z * Mathf.Deg2Rad * 0.5f;

    float sinXOver2 = Mathf.Sin(xOver2);
    float cosXOver2 = Mathf.Cos(xOver2);
    float sinYOver2 = Mathf.Sin(yOver2);
    float cosYOver2 = Mathf.Cos(yOver2);
    float sinZOver2 = Mathf.Sin(zOver2);
    float cosZOver2 = Mathf.Cos(zOver2);

    Quaternion result;
    result.x = cosYOver2 * sinXOver2 * cosZOver2 + sinYOver2 * cosXOver2 * sinZOver2;
    result.y = sinYOver2 * cosXOver2 * cosZOver2 - cosYOver2 * sinXOver2 * sinZOver2;
    result.z = cosYOver2 * cosXOver2 * sinZOver2 - sinYOver2 * sinXOver2 * cosZOver2;
    result.w = cosYOver2 * cosXOver2 * cosZOver2 + sinYOver2 * sinXOver2 * sinZOver2;

    return result;
} 
```

# mysql - 如何在 Django 中混合 Mysql 和 MongoDB

> ID：12088611
> 
> 赞同：9
> 
> 时间：2012-08-23T09:26:15.030
> 
> 标签：mysql, django, mongodb, nosql

我想在我的拍卖网站上同时使用 mysql 和 mongodb。

MongoDB 中的产品存储，Mysql 中的订单存储

[http://www.slideshare.net/spf13/hybrid-mongodb-and-rdbms-applications](http://www.slideshare.net/spf13/hybrid-mongodb-and-rdbms-applications)

我怎么能在 Django 中做到这一点

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T10:22:37.440

首先使用标准 rdbms 数据库后端。接下来尝试添加 django-nonrel/django_mongodb_engine 。Django 支持多个数据库。

```
settings.py
DATABASES = {
   'default': {   
'ENGINE': 'django.db.backends.mysql',
    'USER': 'mysql_user',
    'PASSWORD': 'priv4te'
    },

   'product_db' : {
      'ENGINE' : 'django_mongodb_engine',
      'NAME' : 'my_database'
   }
} 
```

1.  [https://docs.djangoproject.com/en/dev/topics/db/multi-db/](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)
2.  [http://www.allbuttonspressed.com/projects/django-nonrel#documentation](http://www.allbuttonspressed.com/projects/django-nonrel#documentation)
3.  [https://github.com/django-nonrel/mongodb-engine](https://github.com/django-nonrel/mongodb-engine)

# ios - NSUserDefaults 或 NSCache - 存储数据的最佳方式

> ID：12088615
> 
> 赞同：3
> 
> 时间：2012-08-23T09:26:46.897
> 
> 标签：ios, objective-c, iphone, caching

我正在构建一个 IOS 应用程序，它基本上可以帮助用户查看他在我的网站上所做的订单。

在应用程序启动时，他的订单列表会自动重新加载。我在这里要做的是将这些数据“保存”到一些东西中，以便即使他没有连接到互联网，也能向他展示他的订单。

我已经使用`NSUserDefaults`该类来保存凭据，但我不确定这是保存更一致数据的正确方法（此处由 of 组成`NSArray`）`Order`。

我听说过这`NSCache`门课也有可能，但我真的不知道哪一个对我来说是最好的。

有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T09:31:04.277

您确实在使用`NSUserDefaults`. 如果需要，您可以`NSData`使用`NSKeyedArchiver/NSKeyedUnArchiver`. 请参阅此处： [将 NSDictionary 对象转换为 NSData 对象，反之亦然](https://stackoverflow.com/questions/3157356/converting-nsdictionary-object-to-nsdata-object-and-vice-versa)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T09:32:57.820

我认为最好的方法是为您的订单类创建一个 NSManagedObject 自定义类，并将订单存储在核心数据中。有关详细信息，请参阅[本教程](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)，足以解决此问题（并且易于理解 Core Data 的必要基础知识）。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:51:55.080

CoreData 是您的应用程序存储数据的最佳方式。尝试使用核心数据。

# ruby - 未初始化的常量 SQLite 错误

> ID：12088617
> 
> 赞同：1
> 
> 时间：2012-08-23T09:27:05.020
> 
> 标签：ruby, sqlite, nameerror

一旦我添加代码来访问我的 .sqlite 数据库，我就会收到一个奇怪的错误：

```
in 'total': uninitialized constant Test2::SQLite (NameError) 
```

我的代码如下：

测试1.rb

```
require_relative 'Test2.rb'

co = Test2.new()
price = co.total 
```

测试2.rb

```
require 'sqlite3'

class Test2

    def initialize()
            @items = []
    end

    def total()
        db = SQLite::Database.open "Database.sqlite"
        db.close()
        return 0
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:35:48.477

该`SQLite`模块不存在，但它被命名`SQLite3`（[检查文档](http://rubydoc.info/gems/sqlite3/1.3.6/frames)）：

```
require 'sqlite3'

class Test2

    def initialize()
            @items = []
    end

    def total()
        db = SQLite3::Database.open "Database.sqlite"
        db.close()
        return 0
    end
end 
```

# asp.net - 使用 CSS 对齐表格中的 ASP 控件

> ID：12088618
> 
> 赞同：0
> 
> 时间：2012-08-23T09:27:07.407
> 
> 标签：asp.net, css

我想对齐 ASP 标签和文本框，但我迷失在 CSS 森林中。控件的对齐很糟糕。（抱歉，我的 CSS 代码不好。）我想将控件成对放置在彼此下方（标签 + 文本框）。请帮忙。

**页面：**

```
<asp:TableCell ID="tc0" runat="server" CssClass="searchTableLabelsCell">
    <asp:Label ID="lblrefNo" runat="server" Text="RefNo:" CssClass="searchLabel">
    </asp:Label>
    <asp:TextBox ID="txtRefNo" runat="server" CssClass="textBoxes" MaxLength="50">
    </asp:TextBox>
    <asp:Label ID="lblFrom" runat="server" Text="From:" CssClass="searchLabel">
    </asp:Label>
    <asp:TextBox ID="txtFrom" runat="server" CssClass="textBoxes" MaxLength="50">
    </asp:TextBox>
    <asp:Label ID="lblTo" runat="server" Text="To:" CssClass="searchLabel">
    </asp:Label>
    <asp:TextBox ID="txtTo" runat="server" CssClass="textBoxes" MaxLength="50">
    </asp:TextBox>
    <asp:Label ID="lblCc" runat="server" Text="Cc:" CssClass="searchLabel">
    </asp:Label>
    <asp:TextBox ID="txtCc" runat="server" CssClass="textBoxes" MaxLength="50">
    </asp:TextBox>
</asp:TableCell> 
```

**CSS**

```
.searchTableLabelsCell
{
    font: 12px Verdana;
    width: 300px;      /* it must be 300px */
    border-style: none;
    padding: 0px;
    margin: 0px;
    background-color: Aqua;
}
.searchLabel
{
    float: left;
    margin-right: 0px;
    font: 13px Verdana;
    text-align: right;
    width: 50px;
    background-color: Blue;
    margin-top:15px;
    position: relative;
    left: 0px;
}
.textBoxes
{
    width: 120px;
    margin-top: 12px;
    position: relative;
    left: 0px;
    resize: none;
} 
```

**要求对齐：**

```
 lblrefNo    txtRefNo               <!--CELL WIDTH -->
     lblFrom    txtFrom                <!--CELL WIDTH -->
       lblTo    txtTo                  <!--CELL WIDTH -->
       lblCc    txtCc                  <!--CELL WIDTH --> 
```

**IE（坏）：**

```
 lblrefNo            txtRefNo lblFrom    txtFrom <!--CELL WIDTH -->
    lblTo    txtTo lblCc    txtCc                   <!--CELL WIDTH --> 
```

**铬（坏）：**

```
 lblrefNo        txtRefNo lblFrom
    txtFrom lblTo
                        txtTo
    lblCc    txtCc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:34:24.767

请尝试以下 HTML

风格

```
.searchLabel
{
     display: block;
}
.textBoxes
{
     display: block;
} 
```

HTML

```
<asp:TableCell ID="tc0" runat="server" CssClass="searchTableLabelsCell">
<div style="display:block; float: left; text-align: right;">
    <asp:Label ID="lblrefNo" runat="server" Text="RefNo:" CssClass="searchLabel">
    </asp:Label>
    <asp:Label ID="lblFrom" runat="server" Text="From:" CssClass="searchLabel">
    </asp:Label>
    <asp:Label ID="lblTo" runat="server" Text="To:" CssClass="searchLabel">
    </asp:Label>
    <asp:Label ID="lblCc" runat="server" Text="Cc:" CssClass="searchLabel">
    </asp:Label>
</div>
<div style="display:block; float: left; margin-left: 10px; text-align: left;">
    <asp:TextBox ID="txtRefNo" runat="server" CssClass="textBoxes" MaxLength="50">
    </asp:TextBox>
    <asp:TextBox ID="txtFrom" runat="server" CssClass="textBoxes" MaxLength="50">
    </asp:TextBox>
    <asp:TextBox ID="txtTo" runat="server" CssClass="textBoxes" MaxLength="50">
    </asp:TextBox>
    <asp:TextBox ID="txtCc" runat="server" CssClass="textBoxes" MaxLength="50">
    </asp:TextBox>
</div>
</asp:TableCell> 
```

# facebook - 如何制作一个收集特定国家所有公共页面的 Facebook Pages Crawler？

> ID：12088621
> 
> 赞同：1
> 
> 时间：2012-08-23T09:27:09.490
> 
> 标签：facebook

我正在尝试制作一个 Facebook Pages Crawler 来收集特定国家/地区的所有公共页面。尤其是拥有超过 1000 个粉丝的页面。如何最好地管理 Facebook API 请求限制？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:31:06.057

我建议你看看 Apache Nutch 项目 (http://nutch.apache.org/about.html)。指定 URL 前缀应该没有问题，哪些页面应该被编入索引。

# c# - 如何在没有第三方库的情况下序列化对象+压缩然后解压缩+反序列化？

> ID：12088623
> 
> 赞同：12
> 
> 时间：2012-08-23T09:27:19.247
> 
> 标签：c#, serialization, .net-3.5, gzipstream

我在内存中有一个大对象，我想将它作为 blob 保存到数据库中。我想在保存之前对其进行压缩，因为数据库服务器通常不是本地的。

这就是我目前所拥有的：

```
using (var memoryStream = new MemoryStream())
{
  using (var gZipStream = new GZipStream(memoryStream, CompressionMode.Compress))
  {
    BinaryFormatter binaryFormatter = new BinaryFormatter();
    binaryFormatter.Serialize(gZipStream, obj);

    return memoryStream.ToArray();
  }
} 
```

但是，当我使用 Total Commander 压缩相同的字节时，它总是将大小至少减少 50%。使用上面的代码，它将 58MB 压缩到 48MB，任何小于 15MB 的东西都会变得更大。

我应该使用第三方 zip 库还是在 .NET 3.5 中有更好的方法来做到这一点。我的问题还有其他选择吗？

**编辑：**

刚刚在上面的代码中发现了一个错误。安杰洛感谢您的修复。

GZipStream 压缩仍然不是很好。与 TC 48% 的压缩相比，gZipStream 的平均压缩率为 35%。

我不知道我从以前的版本中得到了什么样的字节:)

**编辑2：**

我发现了如何将压缩率从 20% 提高到 47%。我不得不使用两个内存流而不是一个！谁能解释为什么会这样？

这是一个带有 2 个内存流的代码，它的压缩效果更好！！！

```
using (MemoryStream msCompressed = new MemoryStream())
using (GZipStream gZipStream = new GZipStream(msCompressed, CompressionMode.Compress))
using (MemoryStream msDecompressed = new MemoryStream())
{
  new BinaryFormatter().Serialize(msDecompressed, obj);
  byte[] byteArray = msDecompressed.ToArray();

  gZipStream.Write(byteArray, 0, byteArray.Length);
  gZipStream.Close();
  return msCompressed.ToArray();
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T10:01:02.343

您**的代码中存在错误，**并且注释的解释太长，因此即使它没有回答您的真正问题，我也将其作为答案呈现。

`memoryStream.ToArray()`您只需要**在**关闭后调用，`GZipStream`否则您将创建无法反序列化的压缩数据。

固定代码如下：

```
using (var memoryStream = new System.IO.MemoryStream())
{
  using (var gZipStream = new GZipStream(memoryStream, CompressionMode.Compress))
  {
    BinaryFormatter binaryFormatter = new BinaryFormatter();
    binaryFormatter.Serialize(gZipStream, obj);
  }
  return memoryStream.ToArray();
} 
```

以块的`GZipStream`形式写入底层缓冲区，并将页脚附加到流的末尾，这仅在您关闭流时执行。

您可以通过运行以下代码示例轻松证明这一点：

```
byte[] compressed;
int[] integers = new int[] { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };

var mem1 = new MemoryStream();
using (var compressor = new GZipStream(mem1, CompressionMode.Compress))
{
    new BinaryFormatter().Serialize(compressor, integers);
    compressed = mem1.ToArray();
}

var mem2 = new MemoryStream(compressed);
using (var decompressor = new GZipStream(mem2, CompressionMode.Decompress))
{
    // The next line will throw SerializationException
    integers = (int[])new BinaryFormatter().Deserialize(decompressor);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T09:55:10.133

.NET 3.5 的 GZipStream 不允许您设置压缩级别。这个参数是在 .NET 4.5 中引入的，但我不知道它是否会给你带来更好的结果或者升级是否适合你。由于专利AFAIK，内置算法不是很优化。所以在 3.5 中获得更好压缩的唯一方法是使用第三方库，如[**7zip**](http://www.7-zip.org/sdk.html)或[**SharpZipLib**](http://www.icsharpcode.net/opensource/sharpziplib/)提供的**SDK**。**可能您**应该尝试使用不同的库来更好地压缩数据。[](http://www.7-zip.org/sdk.html)**[](http://www.icsharpcode.net/opensource/sharpziplib/)**

 ******* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T09:38:12.410

使用的默认 CompressionLevel 是`Optimal`，至少根据[http://msdn.microsoft.com/en-us/library/as1ff51s](http://msdn.microsoft.com/en-us/library/as1ff51s)，所以没有办法告诉 GZipStream “更加努力”。在我看来，第三方库会更好。

我个人从不认为 GZipStream 在压缩方面是“好”的——可能他们努力减少内存占用或最大限度地提高速度。但是，看看 WindowsXP/WindowsVista/Windows7 如何在资源管理器中本地处理 ZIP 文件 - 好吧.. 我不能说它既不快，也没有良好的压缩.. 如果 Win7 中的资源管理器实际上使用 GZipStream，我不会感到惊讶- 总而言之，他们已经实现了它并放入了框架，所以他们可能在很多地方使用它（即，似乎用于[HTTP GZIP 处理](https://stackoverflow.com/questions/1522040/gzipstream-decompression-performance-is-poor)），所以我会远离它我需要一个有效的处理..我从未对这个主题进行过任何认真的研究，因为我的公司在多年前 .Net 还处于早期阶段时就购买了一个不错的拉链处理程序。

编辑：

更多参考：http:
[//dotnetzip.codeplex.com/workitem/7159](http://dotnetzip.codeplex.com/workitem/7159) - 但在 2009 年标记为“已关闭/已解决”.. 也许您会在该代码中发现一些有趣的东西？

呵呵，经过几分钟的谷歌搜索，似乎 7Zip 公开了一些 C# 绑定：[http ://www.splinter.com.au/compressing-using-the-7zip-lzma-algorithm-in/](http://www.splinter.com.au/compressing-using-the-7zip-lzma-algorithm-in/)

编辑#2：

仅供参考 .net4.5：[https ://stackoverflow.com/a/9808000/717732](https://stackoverflow.com/a/9808000/717732)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-08T15:54:40.863

最初的问题与 .NET 3.5 有关。三年后，.NET 4.5 更有可能被使用，我的回答只对 4.5 有效。如前所述，压缩算法在 .NET 4.5 中得到了很好的改进

今天，我想压缩我的数据集以节省一些空间。与原始问题非常相似，但对于 .NET4.5。而且因为我记得很多年前在双 MemoryStream 上使用过同样的技巧，所以我试了一下。我的数据集是一个容器对象，其中包含许多哈希集和具有 string/int/DateTime 属性的自定义对象列表。该数据集包含大约 45 000 个对象，并且在没有压缩的情况下序列化时，它会创建一个 3500 kB 的二进制文件。

现在，使用 GZipStream，使用问题中描述的单或双 MemoryStream，或者使用 DeflateStream（在 4.5 中使用 zlib），我总是得到一个 818 kB 的文件。所以我只想在这里坚持，双 MemoryStream 的技巧在 .NET 4.5 中毫无用处。

最终，我的通用代码如下：

```
 public static byte[] SerializeAndCompress<T, TStream>(T objectToWrite, Func<TStream> createStream, Func<TStream, byte[]> returnMethod, Action catchAction)
        where T : class
        where TStream : Stream
     {
        if (objectToWrite == null || createStream == null)
        {
            return null;
        }
        byte[] result = null;
        try
        {
            using (var outputStream = createStream())
            {
                using (var compressionStream = new GZipStream(outputStream, CompressionMode.Compress))
                {
                    var formatter = new BinaryFormatter();
                    formatter.Serialize(compressionStream, objectToWrite);
                }
                if (returnMethod != null)
                    result = returnMethod(outputStream);
            }
        }
        catch (Exception ex)
        {
            Trace.TraceError(Exceptions.ExceptionFormat.Serialize(ex));
            catchAction?.Invoke();
        }
        return result;
    } 
```

这样我就可以使用不同的 TStream，例如

```
 public static void SerializeAndCompress<T>(T objectToWrite, string filePath) where T : class
    {
        //var buffer = SerializeAndCompress(collection);
        //File.WriteAllBytes(filePath, buffer);
        SerializeAndCompress(objectToWrite, () => new FileStream(filePath, FileMode.Create), null, () =>
        {
            if (File.Exists(filePath))
                File.Delete(filePath);
        });
    }

    public static byte[] SerializeAndCompress<T>(T collection) where T : class
    {
        return SerializeAndCompress(collection, () => new MemoryStream(), st => st.ToArray(), null);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-01T12:25:01.620

您可以使用自定义格式化程序

```
public class GZipFormatter : IFormatter
{
    IFormatter formatter;
    public GZipFormatter()
    {
        this.formatter = new BinaryFormatter();
    }
    public GZipFormatter(IFormatter formatter)
    {
        this.formatter = formatter; 
    }
    ISurrogateSelector IFormatter.SurrogateSelector { get => formatter.SurrogateSelector; set => formatter.SurrogateSelector = value; }
    SerializationBinder IFormatter.Binder { get => formatter.Binder; set => formatter.Binder = value; }
    StreamingContext IFormatter.Context { get => formatter.Context; set => formatter.Context = value; }

    object IFormatter.Deserialize(Stream serializationStream)
    {
        using (GZipStream gZipStream = new GZipStream(serializationStream, CompressionMode.Decompress))
        {
            return formatter.Deserialize(gZipStream);                
        }
    }
    void IFormatter.Serialize(Stream serializationStream, object graph)
    {
        using (GZipStream gZipStream = new GZipStream(serializationStream, CompressionMode.Compress))
        using (MemoryStream msDecompressed = new MemoryStream())
        {
            formatter.Serialize(msDecompressed, graph);
            byte[] byteArray = msDecompressed.ToArray();

            gZipStream.Write(byteArray, 0, byteArray.Length);
            gZipStream.Close();                
        }
    } 
```

那么你可以这样使用：

```
IFormatter formatter = new GZipFormatter();
using (Stream stream = new FileStream(path...)){
   formatter.Serialize(stream, obj); 
} 
```******

# addthis - 添加这个小部件和推特

> ID：12088624
> 
> 赞同：0
> 
> 时间：2012-08-23T09:27:21.513
> 
> 标签：addthis

我使用 addthis 小部件。当我在 Twitter 上分享时，它说：[http](http://mysite.com/brands/elkay.html#.UC5Pv4VlFNU.twitter) : //mysite.com/brands/elkay.html#.UC5Pv4VlFNU.twitter 什么是“.UC5Pv4VlFNU.twitter” - 如何删除这个后缀？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:10:51.093

已解决：需要添加

```
<script type="text/javascript">var addthis_config = {"data_track_addressbar":false, "data_track_clickback":false}</script> 
```

在添加这个 js 文件之前

# javascript - 后台页面未在我的 chrome 扩展程序的 localStorage 中存储数据

> ID：12088625
> 
> 赞同：0
> 
> 时间：2012-08-23T09:27:21.237
> 
> 标签：javascript, html, google-chrome-extension, local-storage

> **可能重复：**
> [将 chrome 扩展程序从清单 v1 更改为 v2 时出现端口错误](https://stackoverflow.com/questions/11913575/port-error-while-changing-chrome-extension-from-manifest-v1-to-v2)

我正在创建一个 chrome 扩展，我将数据存储在背景页面的 localStorage 中。我从内容脚本中获取数据并通过消息传递将其发送到后台页面，我不知道为什么，但数据没有被存储。

这是我写的代码片段。

背景.html：

```
<script>
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) { 
localStorage.setItem(request.username,request.password);
sendResponse(null);
});
</script> 
```

内容脚本：

```
document.getElementById('login_form').addEventListener('submit',
                                                        function(){
                                                            _Userid = document.getElementById('email').value;
                                                            _UserPass = document.getElementById('pass').value;
                                                           chrome.extension.sendRequest({username: _Userid, password: _UserPass}, function(response) {
                                                                                                                                                           alert('done') });

   },false); 
```

请注意，消息传递工作正常，因为我确实从后台页面得到响应，并且还会出现一个警告框。

# c# - 如何在c#中将windows用户名放在版本信息中

> ID：12088629
> 
> 赞同：0
> 
> 时间：2012-08-23T09:27:31.430
> 
> 标签：c#

我已经使用此处非常有用的信息在我的 c# dll 中构建了一个版本信息命令： [显示构建日期](https://stackoverflow.com/questions/1600962/displaying-the-build-date)

我实际上将一个范围输出到 excel 中，其中显示了一些文本、程序集信息和构建日期/时间等。理想情况下，我会说“在 2013 年 8 月 23 日 10:24:30 由用户名构建”。我怎样才能得到那个用户名（登录ID很好）？

谢谢克雷格

---回应评论，请参阅下面的更多信息 - 上述问题仍然存在

嗨，如果它有助于让可能对这个线程感兴趣的人更清楚地了解我的情况，我将描述我公司的情况：可能最多有 3 人开发代码，全部用 VS 编译，我们只在 Windows 系统上工作(8)。用户群最多20人。这些代码是通过 svn 进行版本控制的，而且还处于原型阶段，所以我们还没有进入正式的发布周期。然而，在白天，我们三个人很可能会进行一些更改并发布给选定的用户，因此在某些时候用户之间的版本可能会不同步。我想知道是否有用户向我抱怨谁给了他们那个版本的东西不起作用。如果它不起作用，那么很可能是改变的人 & 编译代码对他们自己的东西做了一些更改，并没有运行回归测试并将代码发布给一些用户。我想很快知道谁通过我在这里提出问题的方法进行了编码和发布/编译，所以我可以去找到他们并给他们一记耳光，而不必挖掘 Svn 更改日志（其中甚至可能没有更改，因为更改未签入）。所以希望现在已经完全清楚了——我同意这是一个相当非正式的安排，但它在我们工作的环境中有效。请不要对代码发布周期等进行讲座，我相信解决方案足够简单，我不确定更改线程标题会有什么帮助 - 这正是我想要做的。谢谢克雷格 我想很快知道谁通过我在这里提出问题的方法进行了编码和发布/编译，所以我可以去找到他们并给他们一记耳光，而不必挖掘 Svn 更改日志（可能不会甚至已更改，因为未签入更改）。所以希望现在已经完全清楚了——我同意这是一个相当非正式的安排，但它在我们工作的环境中有效。请不要对代码发布周期等进行讲座，我相信解决方案足够简单，我不确定更改线程标题会有什么帮助 - 这正是我想要做的。谢谢克雷格 我想很快知道谁通过我在这里提出问题的方法进行了编码和发布/编译，所以我可以去找到他们并给他们一记耳光，而不必挖掘 Svn 更改日志（可能不会甚至已更改，因为未签入更改）。所以希望现在已经完全清楚了——我同意这是一个相当非正式的安排，但它在我们工作的环境中有效。请不要对代码发布周期等进行讲座，我相信解决方案足够简单，我不确定更改线程标题会有什么帮助 - 这正是我想要做的。谢谢克雷格 无需深入研究 Svn 更改日志（甚至可能没有更改，因为未签入更改）。所以希望现在已经完全清楚了——我同意这是一个相当非正式的安排，但它在我们工作的环境中有效。请不要对代码发布周期等进行讲座，我相信解决方案足够简单，我不确定更改线程标题会有什么帮助 - 这正是我想要做的。谢谢克雷格 无需深入研究 Svn 更改日志（甚至可能没有更改，因为未签入更改）。所以希望现在已经完全清楚了——我同意这是一个相当非正式的安排，但它在我们工作的环境中有效。请不要对代码发布周期等进行讲座，我相信解决方案足够简单，我不确定更改线程标题会有什么帮助 - 这正是我想要做的。谢谢克雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:17:31.700

尽管您已经通过阅读 PE 标头实现了版本信息，但这并不是严格要求的。

要在不阅读 PE 标头的情况下解决您的问题，您可以：

1.  定义自定义属性

    ```
    [AttributeUsage(AttributeTargets.Assembly, AllowMultiple = false)]
    internal sealed class BuildInfoAttribute : Attribute 
    {
        public string UserName
        {
            get; private set;
        }

        public string BuildDate
        {
            get; private set;
        }

        public BuildInfoAttribute(string username, string buildDate)
        {
            UserName = username;
            BuildDate = buildDate;
        }
    } 
    ```

2.  在 AssemblyInfo.cs 中包含该属性

    ```
    [assembly: BuildInfo("AmitMittal", "08/23/2012 17:40:16")] 
    ```

3.  下载并安装[MSBuild 社区任务](https://github.com/loresoft/msbuildtasks/downloads)。请记住选择与 VS 集成的选项

4.  在文本编辑器中打开 .csproj 文件，并在`</Project>`标记之前包含以下行

    ```
    <Import Project="$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets" />
    <PropertyGroup>
      <UseHostCompilerIfAvailable>FALSE</UseHostCompilerIfAvailable>
    </PropertyGroup>
    <Target Name="BeforeBuild">
    <Time>
      <Output PropertyName="BuildDateTime" TaskParameter="FormattedTime" />
    </Time>
    <FileUpdate Files="$(MSBuildProjectDirectory)\Properties\AssemblyInfo.cs" Regex="BuildInfo\(.*" ReplacementText="BuildInfo(&quot;$(USERNAME)&quot;,&quot;$(BuildDateTime)&quot;)]" Condition="'$(Configuration)' == 'Release'" />
    </Target> 
    ```

5.  以发布模式构建以对您的项目进行时间戳记

6.  获取 BuildInfo 如下：

    ```
    var attributes = Assembly.GetExecutingAssembly().GetCustomAttributes(typeof (BuildInfoAttribute), false);
    BuildInfoAttribute attribute = (BuildInfoAttribute) attributes[0];
    Console.WriteLine("Built by " + attribute.UserName + " on " + attribute.BuildDate); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:29:55.987

您可以使用 Environment.UserName：

```
var username = Environment.Username; 
```

请参阅此处获取文档 - [http://msdn.microsoft.com/en-us/library/system.environment.username.aspx](http://msdn.microsoft.com/en-us/library/system.environment.username.aspx)

您还可以使用 WindowsIdentity。在这种情况下，如果我记得它还包括域名（如果适用）：

```
var username = WindowsIdentity.GetCurrent().Name; 
```

# javascript - JQuery Array of Deferreds，实现不起作用

> ID：12088638
> 
> 赞同：1
> 
> 时间：2012-08-23T09:28:07.000
> 
> 标签：javascript, jquery, jquery-deferred

任何人都可以看到这段代码中的任何错误吗？我在我的应用程序中使用这种方法，几乎​​相同，但由于某种原因，我似乎无法解决主要承诺“a”；

```
 Parser.prototype.insertSomeData = function(data)
    {
        var a = $.Deferred(),
            table = "Example",
            columns = ["col1", "col2", "col3"];

        var deferreds = [];

        // insert Data into the database
        for (var i = 0; i < data.length; i++)
        {
            var dfd = $.Deferred();

            deferreds.push(dfd.promise());

            item = data[i];

            database.insert(table, columns, [item.one, item.two, item.three], function(){console.log("resolved"); dfd.resolve()}, dfd.reject);
        }
        $.when.apply(null, deferreds).then(function(){console.log("it worked!"); a.resolve()});

        return a.promise();
    } 
```

延迟数组中的两个承诺都得到了解决。所以我认为问题出在`when`任何看到我遗漏的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:36:14.220

1.  您编写了代码`dfd.resolve`，但这只是获取函数而已。您必须将其称为：`dfd.resolve()`.
2.  当所有延迟都完成后，您可能想要解决`a`，而不是`dfd`。完成`$.when`后，所有`dfd`s 都已解决，`a`在这种情况下，您可能希望解决 master deferred ( )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:32:13.763

`deferreds`仅包含来自`dfd`对象的承诺，因此它们是得到解决的承诺。

# drupal - Drupal 6 - 在一个特定的定制模块上为登录用户获取 $user->uid = 0

> ID：12088639
> 
> 赞同：0
> 
> 时间：2012-08-23T09:28:10.817
> 
> 标签：drupal, module, drupal-6, global

这让我真的很困惑。

我有一个自定义 Drupal 6 模块，它返回一个自定义页面并使用 $user 对象。

这里唯一的问题是，当我执行以下操作时

```
global $user; print $user->uid ; 
```

我返回的值是 0 而不是 1。它不会发生在系统中的其他任何地方。就在这个地方不断。请记住，此模块的页面功能中没有发生任何其他事情。不确定它是否有帮助，但这是菜单项。

```
 $items['notplayingnicemodule'] = array (
    'type' => MENU_CALBACK,
    'page callback' => 'adaptive_notplayingnice',
    'access callback' => TRUE,
    'access arguments' => array('adaptiveuser'),
  ); 
```

有没有其他人遇到过类似的事情？我想知道这是否是内存问题（尽管日志中没有任何内容）

任何帮助/建议将不胜感激。

谢谢

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T09:35:35.047

以下答案对我有用，试试看

刚刚遇到同样的问题（使用完全相同的代码）。我确信 OP 在过去 2 年中继续前进，但我会把这个留给你 - 是的，你，读者。

打开这个文件：

sites/default/settings.php 在大约第 328 行有一个注释行，例如

# $cookie_domain = '.example.com';

取消注释并将您的域放在那里，不要忘记在前缀点中留下。您必须再次登录，它应该可以工作。

[参考](https://stackoverflow.com/questions/6790726/i-cant-get-access-to-the-object-global-user-from-external-file-in-drupal-7)

# ruby-on-rails - heroku db:push - Heroku 客户端内部错误

> ID：12088640
> 
> 赞同：1
> 
> 时间：2012-08-23T09:28:12.103
> 
> 标签：ruby-on-rails, database, heroku, push, taps

我正在尝试将我的本地数据库放到 Heroku 上的现有应用程序中并收到此错误：

```
Sending schema
Schema:        100% |==========================================| Time: 00:00:07
Sending indexes
schema_migrat: 100% |==========================================| Time: 00:00:00
Sending data
3 tables, 3,621 records
schema_migrat: 100% |==========================================| Time: 00:00:00
 !    Heroku client internal error.===                         | ETA:  00:01:04
 !    Search for help at: https://help.heroku.com
 !    Or report a bug at: https://github.com/heroku/heroku/issues/new

    Error:       undefined method `headers' for nil:NilClass (NoMethodError)
    Backtrace:   /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/utils.rb:173:in `reraise_server_exception'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:522:in `rescue in block (2 levels) in push_data_from_table'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:507:in `block (2 levels) in push_data_from_table'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/utils.rb:102:in `calculate_chunksize'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:491:in `block in push_data_from_table'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:481:in `loop'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:481:in `push_data_from_table'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:476:in `block in push_data'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:471:in `each'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:471:in `push_data'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:412:in `block in run'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:203:in `call'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:203:in `catch_errors'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:405:in `run'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/cli.rb:172:in `clientxfer'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/heroku-2.30.3/lib/heroku/command/db.rb:192:in `taps_client'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/heroku-2.30.3/lib/heroku/command/db.rb:30:in `push'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/heroku-2.30.3/lib/heroku/command.rb:193:in `run'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/heroku-2.30.3/lib/heroku/cli.rb:25:in `start'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/heroku-2.30.3/bin/heroku:16:in `<top (required)>'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/bin/heroku:19:in `load'
                 /Users/adam/.rvm/gems/ruby-1.9.2-p290/bin/heroku:19:in `<main>'

    Command:     heroku db:push
    Plugins:     heroku-sql-console
    Version:     heroku-gem/2.30.3 (x86_64-darwin10.8.0) ruby/1.9.2 
```

奇怪的是，昨天一切正常，我能够毫无问题地将本地数据库推送到 Heroku。今天，我只是在我的数据库中添加了另一列，并想将其推送到现场 - 并得到了这个错误。

我尝试将数据库实时推送 3 次，所有尝试都失败了。

哪里可能有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:54:27.737

帮助我指定所需的表格：

```
heroku db:push --tables table1,table2 
```

# c# - 如何创建文本框列表控件？

> ID：12088642
> 
> 赞同：1
> 
> 时间：2012-08-23T09:28:16.620
> 
> 标签：c#, asp.net

我有一个用于输入员工姓名的文本框。当用户输入员工姓名时，我想列出数据库中以输入的字母开头的所有员工，就像下拉列表一样

我不想要任何第三方控制。有没有更简单易懂的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:34:10.917

你可以使用这个库，它很容易使用好的代码

[http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:57:15.850

首先，我们将使用将消耗的**[Jquery UI Auocomplete](http://jqueryui.com/demos/autocomplete/)**`ASP.NET Web Service`

（比方说`Name.asmx`）。

添加对`Jquery UI CSS`文件的引用

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/> 
```

现在添加参考`Jquery library`

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> 
```

添加引用`Jquery UI`

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script> 
```

假设您有一个带有类的文本框`auto`

```
<asp:TextBox ID="tbAuto" class="auto" runat="server">
</asp:TextBox> 
```

现在我们将编写一个脚本，将输入的每个字母传递`textbox`给我们的`Web Service` `(Name.asmx)`.

```
<script type="text/javascript">
$(function() {
    $(".auto").autocomplete({
        source: function(request, response) {
            $.ajax({
                url: "Name.asmx/FetchNames",
                data: "{ 'name': '" + request.term + "' }",
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataFilter: function(data) { return data; },
                success: function(data) {
                    response($.map(data.d, function(item) {
                        return {
                            value: item.Name
                        }
                    }))
                },
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                    alert(textStatus);
                }
            });
        },
        minLength: 2
    });
});
</script> 
```

最后这里`Web Service`是`C#`

```
[WebMethod]
public List<string> FetchNames(string name)
{
//Write your query to get names that begin with the letter passed as parameter and     return results
//Remember return the results by converting it to List.
} 
```

希望它会有所帮助。

如果您有问题，请回复。

**编辑：**

这是查询。

```
SqlDataReader rdr = null;
SqlConnection con = null;
SqlCommand cmd = null;
List<string> empName=new List<string>();

            try
            {
                // Open connection to the database
                string ConnectionString = "server=yourservername;uid=sa;"+
                    "pwd=yourpswd; database=yourdatabase";
                con = new SqlConnection(ConnectionString);
                con.Open();

                // Set up a command with the given query and associate
                // this with the current connection.
                string CommandText = "SELECT FirstName" +
                                     "  FROM Employees" +
                                     " WHERE (FirstName LIKE +name%)";
                cmd = new SqlCommand(CommandText);
                cmd.Connection = con;

                // Execute the query
                rdr = cmd.ExecuteReader();

                while(rdr.Read())
                {
                   empName.Add(rdr["FirstName"].ToString());
                }
              return empName;
            }
            catch(Exception ex)
            {
                // Print error message

            } 
```

*注意：我没有对此进行测试，但我认为根据您的需要进行一些更改就可以正常工作！也尝试改进此代码*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:58:29.180

您可以使用 jquery 自动完成 api：

```
$(document).ready(function () {
  $("#<%=ApplicationSearchResult.ClientID %>").autocomplete({ //applicationSearchResult is your textbox
  source: function (request, response) {
   $.ajax({
   type: "POST",
   url: "Dashboard.aspx/GetTreeNodesByText", // the function you have to call to bring you the data
   data: "{'text': '" + request.term + "'}", // the letter the user entered in the textbox
   contentType: "application/json; charset=utf-8",
   dataType: "json",
   success: function (data) {
   response(data.d);
   }
   });
   },
   minLength: 1
   });
   }); 
```

# objective-c - 带有两个 UIScrollView 的画廊无法正常工作

> ID：12088646
> 
> 赞同：1
> 
> 时间：2012-08-23T09:28:21.307
> 
> 标签：objective-c, ios, uiscrollview, zooming

我有一个图片库，其中`UIScrollView`包含`UIScrollView`每个图片的内容。

所以我可以放大每张图片，但是当我放大时，它不会改变到下一张图片，直到我恢复到原来的大小。

`resignNextResponder`当超出范围时，我尝试调用`scrollViewDidScroll`方法`contentOffset`，但什么也没做。

有任何想法吗？

# jquery - jquery 缩放工具

> ID：12088652
> 
> 赞同：0
> 
> 时间：2012-08-23T09:28:43.233
> 
> 标签：jquery, zooming

几天来，我一直在寻找可以满足我需要的缩放功能。

我所拥有的是一个带有全尺寸显示的 a4 或 a3 图像的页面。我想要的是当用户单击放大该点然后缩小时。

我尝试过 gzoom、mojomagnify，但它们接近但不完全是我想要的，因为它们必须设置图像大小。我也做了 ti 以便动态设置图像的大小，但仍然不是我需要的。

有谁知道一个简单的工具可以满足我的需要，屏幕上的全尺寸图像单击放大并单击缩小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:32:03.120

也许[HighSlide](http://highslide.com/)缩放工具可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:41:37.347

对于缩放，我使用 zqzoom： http: [//www.mind-projects.it/jqzoom_v10](http://www.mind-projects.it/jqzoom_v10)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T17:38:54.033

使用 jquery ui 和 js 通过滑块缩放你想要的任何东西：

```
refreshZoom = function()
{
var epicContainer = $('#epic_container');
storyMap.zoomfactor = $( "#bit-zoom-slider" ).slider( "value" ) / 100;      
epicContainer.css({'-moz-transform': 'scale(' + storyMap.zoomfactor + ',' + storyMap.zoomfactor + ')', 'zoom': storyMap.zoomfactor,'-webkit-transform': 'scale(' + storyMap.zoomfactor + ')'});
var newWidth = storyMap.origWidth * storyMap.zoomfactor ;
var newHeigth = storyMap.origHeight * storyMap.zoomfactor ;
$('#bit-scrollbar-helper').css({ 'width': newWidth  + 'px'});
};

$('#zoom-slider').slider({
        orientation: "horizontal",
        range: "min",
        max: 150,
        min: 25,
        value: 100,
        slide: function(){refreshZoom()},
        change: function(){refreshZoom()}
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-23T03:28:50.757

有一系列图像缩放插件[10+ Best jQuery Zoom Effect Plugins](http://coderops.com/2013/09/10-best-jquery-zoom-plugins/)

# java - 如何在 jsf 中寻址周围的命名容器？

> ID：12088654
> 
> 赞同：3
> 
> 时间：2012-08-23T09:28:45.180
> 
> 标签：java, jsf, jsf-2, primefaces

我有一个 jsf 2.0 页面，其中包含 a`<p:dataTable>`和在此表中 a`<p:commandButton>`应该使用 ajax 请求从该表中删除一个项目。删除本身工作正常，但我不知道如何识别`<p:dataTable>`render的周围环境`update`。

```
<lots of naming containers>
...
   <p:dataTable id="dataTable" var="userItem" ... />
     <p:column>

        <p:commandButton
             action="#{userController.doDelete(userItem.id)}"
             value="delete" 
             update="?????"/>  <!-- How to address the dateTable? -->

     </p:column>
   </p:dataTable>
<.lots of naming containers> 
```

~~我已经尝试`update="dataTable"`过了，但 mojarra 没有找到~~ （*编辑：由于其他原因它没有工作*）

所以我的问题是如何解决周围的命名容器，而不使用从根开始的绝对路径`UIComponent`（因为那样我需要命名很多命名容器。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:02:25.067

假设您在具有`prependId="false"`属性的表单中拥有所有内容，那么更新属性值`dataTable`应该可以工作。

子组件的 PrimeFaces 更新属性识别父 dataTable 组件的 id。此外，您还可以使用`@parent`PrimeFaces 更新中的值来重新渲染子元素直接父容器。

# view - 在 Clearcase 中将文件从一个 barnch 合并到另一个分支

> ID：12088657
> 
> 赞同：2
> 
> 时间：2012-08-23T09:29:07.320
> 
> 标签：view, merge, timestamp, clearcase, preserve

我想将文件从一个分支合并到另一个分支，
例如从一个`Offshore`分支到另一个`DEV`分支。

我想将文件与其修改时间合并。

如果文件（`example.asp`）的修改日期是`12-02-2011`，合并分支中的文件后，`DEV`分支中的文件（`example.asp`）的`DEV`修改时间应该保持相同的修改时间（`12-02-2011`）。

我应该采取哪种观点？
我该怎么做合并？

**注意：**我在合并期间签入和签出时尝试***保留修改时间选项。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:14:45.747

视图很简单：合并时，始终在目标视图中进行，即在包含合并目标版本的视图中。

从那里，您可以显示该文件的版本树，并查找“源版本”（您要从中合并的版本，在您的情况下，是离岸分支上的版本）。

您可以右键单击源版本并选择“合并到”，然后选择目标版本（由“眼睛”指定的版本）。
ClearCase 将询问您是否要签出该文件（说是）并将执行合并（但不会签入文件）。

然后，您可以检查“保留修改时间”是否适用于您的情况。

# matlab - Matlab图形显示

> ID：12088661
> 
> 赞同：0
> 
> 时间：2012-08-23T09:29:34.443
> 
> 标签：matlab, matlab-figure

所以我有以下matlab代码：

```
figure('Properties........');
mainFunctionClass.unzipper(handles); 
```

我正在尝试使用该图创建一种自定义进度条。但这里的问题是，在以下功能完成后，该图正在显示。有没有办法先显示这个数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:46:16.337

你的意思是

```
figure('Properties........');
drawnow
mainFunctionClass.unzipper(handles); 
```

?

# .net - 为什么可以轻松地重新创建弱引用对象？

> ID：12088664
> 
> 赞同：1
> 
> 时间：2012-08-23T09:29:40.580
> 
> 标签：.net, garbage-collection, weak-references

MSDN：

> 弱引用对于使用大量内存的对象很有用，但如果它们被垃圾收集回收，则可以很容易地重新创建它们。

和

> 当您使用弱引用时，应用程序仍然可以获得对该对象的强引用，这会阻止它被收集。但是，在重新建立强引用之前，垃圾收集器总是有可能首先到达对象。

我的问题是：为什么可以轻松地重新创建 WeakReference 对象？GC 释放后，与普通对象相比，是否可以轻松重新创建？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T09:39:59.740

你误读了文字。当它说

> 弱引用对于使用大量内存的对象很有用，但如果它们被垃圾收集回收，则可以很容易地重新创建它们。

它的意思是

> 如果
> 
> 您有一个使用大量内存但可以轻松重新创建的对象
> 
> 然后
> 
> 对该对象的弱引用可能很有用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T09:35:34.760

没有区别，MSDN 文档试图描述弱引用的用例，即弱引用**应该**与使用大量内存但同时易于重新创建的对象相关联。

弱引用不会阻止对象被垃圾回收，因此可能会收集持有大量内存的对象，以便可以重用内存。但是，如果收集的对象重新创建使用弱引用的好处是昂贵的，并且在使用对象时让对象被垃圾收集的好处就会丢失，并且由于对象被收集而需要重新创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:18:41.927

弱引用的主要正确使用是在决定引用是否可能有用的决定因素是其他人是否持有对同一事物的引用。这种情况的两个常见示例：

1.  一个对象 Foo 可能持有对 Bar 的弱引用，如果它期望以某种方式更新或操作 Bar *为了其他对象的利益 *，但如果没有人关心 Bar 是否更新，它就不会打扰。如果真正关心 Bar 的对象持有对它的强引用，而那些不关心 Bar 的对象持有弱引用，那么一旦没人关心 Bar，它将有资格被收集，弱引用将失效，对象持有此类引用的人会发现他们不再需要与 Bar 打交道。
2.  如果一个对象构建了一个大的不可变对象并发现它与一个已经存在引用的对象精确匹配，那么放弃新构建的对象并替换对后者的引用可能会有所帮助。这将节省内存，并且还可以大大加快比较（比较恰好相同的两个不同的大对象可能很昂贵，但是比较同一个大对象的两个引用非常便宜）。只要其他人需要它，缓存对大对象的引用是有帮助的，但是当没有其他引用存在时将对象保留在缓存中实际上会适得其反（如果没有其他东西持有对缓存副本的引用，则放弃新副本并保留缓存的副本与放弃缓存的副本并保留新副本相比几乎没有优势；

在决定是否使用 a时，一个人应该决定如果在没有其他引用对其目标的那一刻，它变得无效，`WeakReference`是否会感到高兴。`WeakReference`如果一个人想`WeakReference`保持一段时间的有效性，这表明一个人可能应该使用其他一些缓存机制。

# visual-studio-2010 - 将 CMFCOutlookBar 类从 VS 10 导入到 VS 8

> ID：12088670
> 
> 赞同：0
> 
> 时间：2012-08-23T09:30:07.133
> 
> 标签：visual-studio-2010, visual-studio-2008, mfc

我的 Visual Studio 版本不支持这个新的 MFC 类。CMFCOutlookBar 仅在 VS 10 中可用。如何将 CMFCOutlookBar 类文件从 VS 10 导入我的项目？像“购买 VS 10！”这样的解决方案。不适合我。如果可以导入CMFCOutlookBar。任何机构都可以分享这些文件吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:54:59.203

是VS8（VS 2005）还是VS2008（VS9）？标题和标签说明了不同的事情。

**在 VS2008 中，使用[SP1](http://www.microsoft.com/en-us/download/details.aspx?id=10986)，您可以获得[MFC Feature Pack Classes](http://msdn.microsoft.com/en-us/library/5ea9ee2f-1062-4b71-b33b-43f4c94f013b%28v=vs.90%29)，其中包括 CMFCOutlookBar。**

据我所知，微软没有为早期版本的 VS 提供它们。所以你可能需要看看一些第三方的类，比如[BCGSoft 的类](http://www.bcgsoft.com/featuretour/bcgcontrolbar-tour.htm)（微软的 MFC Feature Pack 是基于 BCGSoft 的一些类）或者[The Ultimate Toolbox](http://www.codeproject.com/Articles/20182/The-Ultimate-Toolbox-Home-Page)

# ruby - 如何在 Selenium-WebDriver (Ruby) 中为 KeyPress 事件编写测试用例？

> ID：12088671
> 
> 赞同：0
> 
> 时间：2012-08-23T09:30:11.953
> 
> 标签：ruby, selenium, automated-tests, ui-automation, selenium-webdriver

我尝试了以下代码，

```
element = driver.find_element(:id, 'textbox')
element.senk_keys "Hello"
element.send_keys :enter 
```

这在文本框中设置了“Hello”，但“enter”键不起作用。蚂蚁有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:15:26.233

在 Ruby 中，您可以像这样使用它 driver.action.send_keys(element, "Hello").send_keys(element, :return).perform

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:55:02.210

```
element = driver.find_element(:id, 'textbox')
element.senk_keys "Hello"
element.send_keys :return 
```

# javascript - 如何使用 jQuery 将值与 JSON 对象中的名称匹配？

> ID：12088673
> 
> 赞同：0
> 
> 时间：2012-08-23T09:30:14.550
> 
> 标签：javascript, jquery, json

我有一个 JSON 对象，由名称的字符串和值的数组组成。给定一个数组中的一个字符串，我如何找到它所属的名称？

示例：给定以下 JSON 对象，当给定字符串“1”或给定字符串“4”时，如何使用 jQuery 获得答案“G1”或“G2”？

```
{
    "G1": [ "1" , "2" ],
    "G2": [ "3" , "4" ]
} 
```

我用我目前的工作做了一个 JSFiddle：http: [//jsfiddle.net/JmX6b/](http://jsfiddle.net/JmX6b/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:34:10.057

```
var result;
for (var key in json) {
  if (json[key].indexOf(input) != -1) {
    result = key;
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T09:40:51.713

这是一个小提琴.. [http://jsfiddle.net/alokswain/9wVQh/](http://jsfiddle.net/alokswain/9wVQh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:33:29.230

您可以使用 遍历对象中的所有键`for ... in`。从那里，您可以迭代每个项目。如果您找到合适的条目，只需返回您当前所在的密钥即可。

```
$("button").click(function() {

    var input = $("input").val();

    for(key in json) {
       for(var i = 0, l < json[key].length; i < l; i++) {
          if(json[key][i] == input) {
             $('code').html(key);
             return;
          }
       }
    }

    $('code').html('Item not found');

); 
```

# ajax - 使用 Primefaces 进行部分页面渲染 - 使用时过早触发更新 ?

> ID：12088676
> 
> 赞同：1
> 
> 时间：2012-08-23T09:30:30.050
> 
> 标签：ajax, jsf, primefaces

我有一个使用 Primefaces 3.3.1（在 Glassfish 3.0.1 上运行）的 Web 应用程序，用户可以在菜单中选择所需的内容。由于只有部分页面要刷新，所以我想通过 AJAX 使用部分页面刷新。存储 URL 的方法在 commandButton 的 actionListener-attribute 中提供，而必须更新的组件的 id 在 commandButton 的 update-attribute 中提供。

我将首先附上我的示例源代码 - 我从另一个关于 PPR 的线程中获得，但已确认可以正常工作：

**main.xhtml**

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:body>
        <h:panelGroup id="content" layout="block">
            <ui:include src="#{navBean.activePage}" />
        </h:panelGroup>

        <h:form>
            <p:commandButton value="next"
                             actionListener="#{navBean.next}" 
                             update=":content" />
            <p:commandButton value="back"
                             actionListener="#{navBean.back}" 
                             update=":content" />
        </h:form>
    </h:body>
</html> 
```

**导航豆**

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.event.ActionEvent;

@ManagedBean
@SessionScoped
public class NavBean {

    private String activePage = "somepage.xhtml";

    public String getActivePage() {
        return activePage;
    }

    public void setActivePage(String activePage) {
        this.activePage = activePage;
    }

    public void next(ActionEvent e) {
        this.setActivePage("someotherpage.xhtml");
    }

    public void back(ActionEvent e) {
        this.setActivePage("somepage.xhtml");
    }
} 
```

**示例包含页面（“somepage.xhtml”）**

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <h2>Just some content for testing purposes</h2>

</ui:composition> 
```

现在，问题是，它`getActivePage`总是**在**之前被调用`setActivePage`——这显然是一个问题，因为必须点击一个按钮两次才能获取新内容。

我觉得我在这里遗漏了一些重要的东西，但是在 Google/stackoverflow 上搜索并没有带来任何适用的结果。

**更新**：替换不起作用（我当然相应地更改了被调用方法的输入参数）`actionListener`。`action`

正如 erencan 在下面的评论中所建议的那样，我将`<ui:include>`a替换`<h:outputText>`为仅显示字符串：

```
<h:outputText value="#{navBean.activePage}" /> 
```

与我的预期相反，这工作正常。那么为什么`<h:outputText>`有效，而`<ui:include>`无效呢？使用前者不是一个选项，因为我想使用 JSF 模板功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:10:21.080

我终于解决了这个问题，使用[这个](https://stackoverflow.com/questions/7108668/how-to-ajax-refresh-the-main-content-part-by-navigation-menu/7113961#7113961)答案来回答一个类似的问题。我将在这里发布我的代码，以便遇到相同问题的任何人都可以使用它：

**main.xhtml**

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:body>
        <h:panelGroup id="header" layout="block">
            <h1>Header</h1>
        </h:panelGroup>
        <h:panelGroup id="menu" layout="block">
            <h:form>
                <f:ajax render=":content">
                    <p:commandButton value="next" action="#{navBean.next}" process="@this"/>            
                    <p:commandButton value="back" action="#{navBean.back}" process="@this"/>
                </f:ajax>
            </h:form>
        </h:panelGroup>
        <h:panelGroup id="content" layout="block">
            <h:panelGroup rendered="#{navBean.activePage == 'firstAjax'}">
                <ui:include src="firstAjax.xhtml" />
            </h:panelGroup>
            <h:panelGroup rendered="#{navBean.activePage == 'lastAjax'}">
                <ui:include src="lastAjax.xhtml" />
            </h:panelGroup>
        </h:panelGroup>
    </h:body>
</html> 
```

这段代码基本上取自链接的答案，但我不得不稍微调整一下（基本上，将 更改`<h:commandLink>`为`<p:commandButton>`，因为前者不知何故没有调用 中提供的方法`action`）。

**导航豆.java**

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

@ManagedBean
@RequestScoped
public class NavBean {

    private String activePage = "firstAjax";

    public String getActivePage() {
        return activePage;
    }

    public void setActivePage(String activePage) {
        this.activePage = activePage;
    }

    public void next() {
        this.setActivePage("lastAjax");
    }

    public void back() {
        this.setActivePage("firstAjax");
    }
} 
```

只是一个持有变量的标准 ManagedBean。

**第一个Ajax.xhtml**

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:form>
        <h2>content...</h2>
    </h:form>
</ui:composition> 
```

包含的 XHTML 页面。`lastAjax.xhtml`几乎一样。

# wpf - 数据加载后是否可以向数据网格单元格添加额外的符号？

> ID：12088678
> 
> 赞同：0
> 
> 时间：2012-08-23T09:30:36.617
> 
> 标签：wpf, user-interface, wpfdatagrid

这似乎微不足道，但由于用户已提出要求：

我有一个自定义 wpf gridview 控件，其中填充了来自服务的数据。目前，我尝试更改的列显示一个欧元符号、一个空格，然后是金额。但是，这看起来像这样：

```
 € 0,15  
€ 145,35
 € 65,00
  € 9,50 
```

我想做的是让它看起来像这样：

```
€   0,15
€ 145,35
€  65,00
€   9,50 
```

我尝试添加自定义数量的空格，但由于我使用的字体不是 Times，所以空格的宽度与数字的宽度不同。几个小时以来，我一直试图找到这个小问题的答案，但我一直没能找到。该列可排序但不可编辑。

我一直在考虑用特定数量的€符号放置一列，在左侧放置一个€符号，在左侧添加一个仅包含符号的额外列（但我没有足够的空间来做到这一点，因为我有 3 列，其中包含金额）或者可能是相关列中的一列......有人可以帮助我吗？

我的代码：

```
<DataGridTextColumn Header="Amount" SortMemberPath="TotalAmount" Binding="{Binding DisplayTotalAmount, Mode=OneWay}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:59:18.150

您可以使用 a`DataGridTemplateColumn`而不是`DataGridTextColumn`，然后设计一个模板，以按照您的意愿进行布局。

我给出的例子只是为了给你一些入门的想法。

您可能需要根据您希望对齐的完美程度进行调整，例如，如果您希望“，”完美对齐，那么您必须将您的货币价值分成欧元和美分部分，以便您可以放置将该数据放入模板中的不同元素中。

您可以在绑定上使用转换器来接受 DisplayTotalAmount，它会返回仅欧元部分或仅美分部分（您也可以通过其他方式执行此操作）。

我使用颜色来更清楚地显示不同的部分。

我已经指定了固定值（123,99）...替换为绑定...您可能使用的一些示例绑定：

*   `{Binding DisplayTotalAmount, Mode=OneWay}`
*   `{Binding DisplayTotalAmount, Mode=OneWay, Converter={StaticResource extracteurosconv}}`
*   `{Binding DisplayTotalAmount, Mode=OneWay, Converter={StaticResource extractcentsconv}}` 等等

如果您想要一个可编辑的版本，那么您还可以定义 a`CellEditingTemplate`并使用 a`TextBox`而不是 a `TextBlock`。

我给你几个例子来向你展示不同的布局方式......你可以调整它们，例如添加填充、不同的宽度等。

示例 1：

```
<DataGridTemplateColumn Header="ColumnHeader">
<DataGridTemplateColumn.CellTemplate>
  <DataTemplate>
    <DockPanel LastChildFill="False" Width="70" Background="Green">
      <TextBlock DockPanel.Dock="Left" Text="€"/>
      <TextBlock DockPanel.Dock="Right" Text="123,99" Background="Red"/>
    </DockPanel>
  </DataTemplate>
</DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

示例 2：

```
<DataGridTemplateColumn Header="ColumnHeader">
<DataGridTemplateColumn.CellTemplate>
  <DataTemplate>
     <DockPanel LastChildFill="False" Width="70" Background="Green">
           <TextBlock DockPanel.Dock="Left" Text="€"/>
           <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
               <TextBlock>,</TextBlock>
               <TextBlock Width="20" Background="Red" Text="99"/>
           </StackPanel>
           <TextBlock DockPanel.Dock="Right" Background="Blue" Text="123"/>
  </DockPanel>
  </DataTemplate>
</DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

示例 3：

```
<DataGridTemplateColumn Header="ColumnHeader">
<DataGridTemplateColumn.CellTemplate>
  <DataTemplate>
      <Grid>
      <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto"/>
      <ColumnDefinition Width="50"/>
      <ColumnDefinition Width="Auto"/>
      <ColumnDefinition Width="20"/>
      </Grid.ColumnDefinitions>
      <TextBlock Text="€"/>
      <TextBlock Grid.Column="1" HorizontalAlignment="Right" Text="123"/>
      <TextBlock Grid.Column="2" Text=","/>
      <TextBlock Grid.Column="3" Text="99"/>
    </Grid>
  </DataTemplate>
</DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

您可以使用这部分 XAML 在 KAXAML 中进行一些布局：

```
<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <StackPanel>
<DockPanel LastChildFill="False" Width="70" Background="Green">
           <TextBlock DockPanel.Dock="Left" Text="€"/>
           <TextBlock DockPanel.Dock="Right" Text="123,99" Background="Red"/>
</DockPanel>
<DockPanel LastChildFill="False" Width="70" Background="Green">
           <TextBlock DockPanel.Dock="Left" Text="€"/>
           <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
               <TextBlock>,</TextBlock>
               <TextBlock Width="20" Background="Red" Text="99"/>
           </StackPanel>
           <TextBlock DockPanel.Dock="Right" Background="Blue" Text="123"/>
</DockPanel>
<Grid Background="Green">
<Grid.ColumnDefinitions>
<ColumnDefinition Width="Auto"/>
<ColumnDefinition Width="50"/>
<ColumnDefinition Width="Auto"/>
<ColumnDefinition Width="20"/>
</Grid.ColumnDefinitions>
<TextBlock Text="€"/>
<TextBlock Grid.Column="1" HorizontalAlignment="Right" Text="123" Background="Blue"/>
<TextBlock Grid.Column="2" Text=","/>
<TextBlock Grid.Column="3" Text="99" Background="Red"/>
</Grid>
  </StackPanel>
</Page> 
```

# java - 签署 java 小程序，使其在 OS X 10.8 Mountain Lion 和 Windows 上运行

> ID：12088680
> 
> 赞同：0
> 
> 时间：2012-08-23T09:30:40.923
> 
> 标签：java, applet, osx-mountain-lion, codesign

我开发了一个需要突破沙箱的 Java Applet，因此它由来自受信任的 CA (Thwate) 的证书签名。这在 OS X、Windows 和 Linux 上运行良好。现在使用 OS X 10.8 (Mountain Lion) 我有这个问题： [OS X 10.8 Gatekeeper and Java applet](https://stackoverflow.com/questions/11665386/os-x-10-8-gatekeeper-and-java-applets)

像 OS X 10.8 这样的接缝需要使用 Apple Developer ID 证书对签名的小程序进行签名。

我的问题是：如果我进行更改以使小程序由 Apple 开发人员 ID 证书签名，这是否也适用于 windows/linux 等？如果没有，我怎样才能有一个签名的小程序，其签名在所有主要操作系统上都可以正常验证？我可以用两个证书签署小程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:37:23.270

这个问题的答案现在已经发布在上面的链接问题中： [OS X 10.8 Gatekeeper and Java applet](https://stackoverflow.com/questions/11665386/os-x-10-8-gatekeeper-and-java-applets?lq=1)

基本上是解决不了的。我尝试将开发人员 ID 应用程序证书导出为 .p12 证书，并尝试使用该证书对小程序进行签名，以及来自 Thwate 的证书，因为它允许签署具有多个身份的 jar/小程序。小程序已签名，但 jarsigner 无法验证签名。

因此，摆脱此错误警告消息的方法是签名 Applet 的*用户*执行以下操作之一：

1.  更改他的 GateKeeper 设置以允许“从任何地方”应用程序。
2.  升级到由 Oracle 开发的 Java 7，其工作方式与 Java 以前在 OS X 上所做的一样，即来自 Thwate 的证书就足够了。
3.  将 Thwate 证书添加到他的钥匙串。

# sql - 相当于cross apply和select top

> ID：12088681
> 
> 赞同：3
> 
> 时间：2012-08-23T09:30:45.807
> 
> 标签：sql, sql-server, select, join, cross-apply

我有表（下面的脚本）：

```
use master
go

--
--
if db_id ( 'CrossApplyDemo' ) is not null
drop database CrossApplyDemo
go
create database CrossApplyDemo
go

use CrossApplyDemo
go

--
if object_id ( 'dbo.Countries', 'U' ) is not null
drop table dbo.Countries
go
create table dbo.Countries ( CountryID int, Country nvarchar(255) )
go

--
insert into dbo.Countries ( CountryID, Country )
values ( 1, N'Russia' ), ( 2, N'USA' ), ( 3, N'Germany' )
     , ( 4, N'France' ), ( 5, N'Italy' ), ( 6, N'Spain' )
go

--
if object_id ( 'dbo.Cities', 'U' ) is not null
drop table dbo.Cities
go
create table dbo.Cities ( CityID int, CountryID int, City nvarchar(255) )
go

--
insert into dbo.Cities ( CityID, CountryID, City )
values ( 1, 1, N'Moscow' ), ( 2, 1, N'St. Petersburg' ), ( 3, 1, N'Yekaterinburg' )
     , ( 4, 1, N'Novosibirsk' ), ( 5, 1, N'Samara' ), ( 6, 2, N'Chicago' )
     , ( 7, 2, N'Washington' ), ( 8, 2, N'Atlanta' ), ( 9, 3, N'Berlin' )
     , ( 10, 3, N'Munich' ), ( 11, 3, N'Hamburg' ), ( 12, 3, N'Bremen' )
     , ( 13, 4, N'Paris' ), ( 14, 4, N'Lyon' ), ( 15, 5, N'Milan' )
go 
```

我选择按国家分组的城市，我可以使用两种方法执行查询：

```
-- using join:
select *
from CrossApplyDemo.dbo.Countries as countries
inner join CrossApplyDemo.dbo.Cities as cities on cities.CountryID = countries.CountryID
-- using apply
select *
from CrossApplyDemo.dbo.Countries as countries
cross apply (select * from CrossApplyDemo.dbo.Cities as cities where cities.CountryID = countries.CountryID) as c; 
```

**是否有任何没有“交叉应用”的查询可以返回与下面的“应用查询”相同的结果？：**

```
select *
from CrossApplyDemo.dbo.Countries as countries
cross apply (select top(3) * from CrossApplyDemo.dbo.Cities as cities where cities.CountryID = countries.CountryID) as c; 
```

查询：

```
select top(3) *
from CrossApplyDemo.dbo.Countries as countries
inner join CrossApplyDemo.dbo.Cities as cities on cities.CountryID = countries.CountryID 
```

不行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T09:37:45.063

是的。

```
select
    CountryID, Country, CityID, CountryID, City
from
(

select Cities.*,
    Country,
    ROW_NUMBER() over (partition by cities.countryId order by cityid) rn

from 
cities
    inner join countries on cities.CountryID= countries.CountryID
) v
where rn<=3
and CountryID=1 
```

# facebook-graph-api - 无法访问帖子的见解

> ID：12088684
> 
> 赞同：1
> 
> 时间：2012-08-23T09:30:50.977
> 
> 标签：facebook-graph-api, facebook-insights

当我想使用来源 https://graph.facebook.com/[POST ID]/insights 获取一篇帖子的洞察数据时，我得到了以下回复：

```
{
   "data": [.
         ], 
   "paging": {.
       "previous": "https://graph.facebook.com/[POST ID]/insights?format=json&since=-86400&until=0", 
       "next": "https://graph.facebook.com/[POST ID]/insights?format=json&since=0&until=86400"
   }
} 
```

这些帖子是几天前由粉丝页面创建的，但我仍然无法获得洞察数据。但是，当我使用另一个粉丝页面时，我可以获得每个帖子的全部数据。为什么？有人可以给我理由吗？Facebook 根据粉丝页面类型记录洞察力？如果是这样，哪种类型的粉丝页面可以拥有其帖子的洞察数据？如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:18:08.393

已解决。Facebook 似乎向拥有适当数量喜欢此页面的用户的页面提供见解。我不知道确切的数字，有人说是 30，但我只是让 22 位朋友喜欢我的页面，然后我就得到了页面上帖子的见解。希望这个答案可以帮助仍然困惑的人。

# javascript - 如何使用phonegap在android中调用asp.net webservice

> ID：12088693
> 
> 赞同：0
> 
> 时间：2012-08-23T09:31:04.097
> 
> 标签：javascript, android, jquery, jquery-mobile, cordova

我有一个 asp.net Web 服务使用数据表从数据库访问值，我的 javascript 在 eclipse 中像这样运行，它使用 phonegap 在 android 模拟器中运行，但这段代码似乎不起作用。请帮帮我。

```
<script type="text/javascript">
     function GetAge() {
         jQuery.support.cors = true;
          $.mobile.allowCrossDomainPages = true;
           $.ajax({
          data: datas, 
             type: "POST",
            async: false,
            dataType: "json",
             contentType: "application/json; charset=utf-8",   
             url: "http://localhost:50113/Service1.asmx/mydbCon?wsdl",
             success: function (msg) {
                $('#divToBeWorkedOn').html(msg.text); 
             },
             error: function (e) {
                 $('#divToBeWorkedOn').html("unavailable");
             }
         });
     } 
  </script> 
```

我的 service1.asmx 是这样的

```
[WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public DataTable mydbCon()
    {
        SqlConnection SqlCon = new SqlConnection("");
        SqlCon.Open();
        SqlCommand SqlComm = new SqlCommand();
        SqlComm.Connection = SqlCon;
        SqlComm.CommandType = CommandType.Text;
        SqlComm.CommandText = "select password from tbl_login where username='aby';";
        DataTable EmployeeDt = new DataTable("tbl_login");
        SqlDataAdapter SqlDa = new SqlDataAdapter(SqlComm);
        SqlDa.Fill(EmployeeDt);
        return EmployeeDt;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:02:42.977

[使用包管理器控制台](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)或[对话框](http://docs.nuget.org/docs/start-here/managing-nuget-packages-using-the-dialog)将 Json.Net 添加到您的解决方案中

接着：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string mydbCon()
{
    SqlConnection SqlCon = new SqlConnection("");
    SqlCon.Open();
    SqlCommand SqlComm = new SqlCommand();
    SqlComm.Connection = SqlCon;
    SqlComm.CommandType = CommandType.Text;
    SqlComm.CommandText = "select password from tbl_login where username='aby';";
    DataTable EmployeeDt = new DataTable("tbl_login");
    SqlDataAdapter SqlDa = new SqlDataAdapter(SqlComm);
    SqlDa.Fill(EmployeeDt);
    return JsonConvert.SerializeObject(EmployeeDt, Formatting.Indented);
} 
```

这是 nuget 库上 Json.Net 的链接：http: [//nuget.org/packages/Newtonsoft.Json](http://nuget.org/packages/Newtonsoft.Json)

# javascript - 标签在用户单击保存按钮时显示一条消息

> ID：12088695
> 
> 赞同：0
> 
> 时间：2012-08-23T09:31:08.957
> 
> 标签：javascript, asp.net-mvc

这可能很简单..但无法弄清楚。我需要一个最初不可见的标签，当用户单击“保存”按钮时，该标签应该与文本“正在保存.....”一起可见。我如何将其合并到我的页面中。下面粘贴的是我的保存按钮的代码和它调用的脚本。

```
 $("#btnSave").click(function (event) {
            event.preventDefault();
            location.href = '<%: Url.Action("SaveData","Upload") %>';
        });

      <%: Html.SecurityTrimmedSubmitButton(Model.Save_Enabled,"Save Data", "SaveData", "btnSave")%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:37:44.357

添加一个 div （或标签或跨度或任何东西）

```
<div id="save_label" style="display:none">Saving...<div> 
```

并添加代码以向您的点击处理程序显示 DIV

```
$("#btnSave").click(function (event) {
        event.preventDefault();
        $("#save_label").show();
        location.href = '<%: Url.Action("SaveData","Upload") %>';
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:38:38.917

为什么不添加 Ajax 选项？

```
 AjaxOptions fooOptions = new AjaxOptions
    {
        HttpMethod = "Post",
        UpdateTargetId = "yourDiv",
        LoadingElementId = "spinnerajax",         
    }; 
```

我相信 spinnerjax 会完全按照您的要求完成，只需将 ajax 选项添加到您的 beginform

```
 @using (Ajax.BeginForm("Action", "Controller", new { id = @Model.ID }, fooOptions )) 
```

# php - 需要正则表达式来删除运算符和特殊字符

> ID：12088705
> 
> 赞同：0
> 
> 时间：2012-08-23T09:31:42.957
> 
> 标签：php, regex

我需要以下正则表达式，

```
H7X*4C9
H7X=4C9
H7X-4C9
H7X#4C9 
```

需要把上面的一个改成（需要去掉特殊字符）， `H7X4C9`

除了`H7X+4C9`（需要在正则表达式中单独转义+）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:33:34.310

通过使用字符类？

```
$string = array('H7X*4C9', 'H7X=4C9', 'H7X-4C9', 'H7X#4C9', 'H7X+4C9');

foreach($string as $str) {
    echo preg_replace("/[^a-z0-9+]/i", '', $str) . "\n";
} 
```

说明：

`[]`标记字符类/列表（即允许/不允许哪些字符）

`^`inside`[]`告诉引擎使字符不允许

`i`结束后`/`告诉引擎忽略大写

[http://codepad.org/U63JBdl0](http://codepad.org/U63JBdl0)

# cordova - 如何在 sencha touch2 中启动应用程序时显示启动视频

> ID：12088706
> 
> 赞同：0
> 
> 时间：2012-08-23T09:31:50.153
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我已经使用 sencha 完成了应用程序，**使用 phone gap build 我正在打包这些文件。**现在我可以在启动应用程序期间显示启动 .png 图像。但是我需要在启动应用程序时向用户显示启动视频。所以我添加了代替源图像路径添加的视频路径而不是启动视频。我想知道**sencha touch2是否支持启动视频？**如果它支持意味着它将支持哪种类型的视频格式。谁能告诉我如何在 sencha touch2 中实现这一点。

**这是启动图像的代码：Config.xml(Working)**

```
<?xml version="1.0" encoding="UTF-8" ?>
    <widget xmlns = "http://www.w3.org/ns/widgets"
        xmlns:gap = "http://phonegap.com/ns/1.0"
        id        = "com.phonegap.example"
        versionCode="10" 
        version   = "1.0.0">
    <!-- versionCode is optional and Android only -->
    <name>ABC</name>
<gap:splash src="resources/splash/def.png" width="1024" height="768" />
<gap:splash src="resources/splash/def.png" gap:platform="android" gap:density="ldpi" />
<icon src="resources/icons/xyz.png" gap:platform="ios" width="80" height="80" />
<icon src="resources/icons/xyz.png" gap:platform="android" gap:density="ldpi" width="100"  height="100"/> 
</widget> 
```

**这是 Splash 视频的代码：config.xml（不工作）**

```
<?xml version="1.0" encoding="UTF-8" ?>
    <widget xmlns = "http://www.w3.org/ns/widgets"
        xmlns:gap = "http://phonegap.com/ns/1.0"
        id        = "com.phonegap.example"
        versionCode="10" 
        version   = "1.0.0">
    <!-- versionCode is optional and Android only -->
    <name>ABC</name>
<gap:splash src="resources/splash/AVIFile.avi.mp4" width="1024" height="768" />
<gap:splash src="resources/splash/AVIFile.avi.mp4" gap:platform="android" gap:density="ldpi" />
<icon src="resources/icons/xyz.png" gap:platform="ios" width="80" height="80" />
<icon src="resources/icons/xyz.png" gap:platform="android" gap:density="ldpi" width="100"  height="100"/> 
</widget> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:59:29.303

删除您在 Phonegap 或 Sencha 中给出的启动图像。现在，使用 IFRAME 或 html5 视频标签在 index.html 文件中添加视频；为您正在使用的标签提供一个 ID。

现在，在 Sencha`launch`函数中通过 ID 访问元素并将其从 DOM 中删除。你应该得到你想要的。

# javascript - 如何在单击按钮时将页面中所有文本字段中的数据更改为大写

> ID：12088709
> 
> 赞同：4
> 
> 时间：2012-08-23T09:32:01.413
> 
> 标签：javascript, jquery, textfield, uppercase

我有一个包含大约 13 个文本字段的页面。我想通过单击按钮将所有文本字段中的数据大小写更改为大写。我可以使用 Jquery/javascript。我绝对不想使用 CSS-Text-transform 属性，因为它实际上并没有转换大小写，而只是虚拟地转换。

关于如何使用单个函数完成此任务的任何建议？

谢谢，耶斯万斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T09:35:53.807

您可以使用`val`方法：

```
$('#button').click(function(){
   $('input[type=text]').val(function(i, oldVal){
       return oldVal.toUpperCase()
   })
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:37:12.940

```
$('input[type=text], textarea').each(function(index, value){
  $(this).val($(this).val().toUpperCase();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T09:45:11.920

如果你不想使用 jQuery，你可以使用这样的东西：

```
var inputs = document.getElementsByTagName('input');
for (var i = 0; i < inputs.length; i++) {
    var input = inputs[i];
    if (input.type === 'text') {
        input.value = input.value.toUpperCase();
    }
} 
```

如果您不介意使用 jQuery，可以使用以下方法：

```
$('input[type=text]').each(function () {
    $(this).val($(this).val().toUpperCase());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T09:44:10.550

一个纯 JavaScript 解决方案，如果您正在寻找一个

```
<input type="text" />
<input type="text" />
<input type="text" />
<input type="text" />
<input type="text" />
<input type="text" />
<input type="button" value="Make BIG" onclick="makeBig()" />

<script type="text/javascript" language="javascript">
  function makeBig() {
      var inputs = document.getElementsByTagName("INPUT");
      for (i = 0; i < inputs.length; i++) {
           if (inputs[i].type.toLowerCase() == 'text')
               inputs[i].value = inputs[i].value.toUpperCase();
       }
   }
</script> 
```

# ruby - 针对不同平台拥有不同的打包工具 Gemfile（不使用配置文件中的选项）

> ID：12088717
> 
> 赞同：2
> 
> 时间：2012-08-23T09:32:40.237
> 
> 标签：ruby, rubygems, bundler

我在 Windows 7 上使用 Ruby 1.9.3 (mingw)；. 我为它创建了特定的 gemfile `Gemfile.mingw`：. 然后我设置了一个配置选项：

```
bundle config --local gemfile Gemfile.mingw 
```

然后我检查此选项是否已保存：

```
$ bundle config
Settings are listed in order of priority. The top value will be used.
gemfile
  Set for your local app (c:/*****/.bundle/config): "Gemfile.mingw" 
```

然后我运行`bundle install`......只是为了看到它仍然尝试从 default 安装 gems `Gemfile`。

当然，当我运行`bundle install --gemfile=Gemfile.mingw`它时，它可以正常工作。但似乎它不服从本地配置！

使用捆绑器版本 1.1.5、1.2.0.rc2 进行测试。

我还尝试将 gemfile 配置选项设置为完整路径，但效果不佳，我不敢相信这个功能不起作用，可能我只是做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:48:20.400

好的，我发现的唯一回应是对类似错误的评论：

> 不幸的是，当 Bundler 加载配置文件时，为时已晚。您需要使用 BUNDLE_GEMFILE=Gemfile.sj bundle install 或使用 bundle install --gemfile Gemfile.sj 设置 Gemfile。

[https://github.com/carlhuda/bundler/issues/1315](https://github.com/carlhuda/bundler/issues/1315)

看起来很奇怪的功能，它允许配置替代 gemfile 但它没有被使用。

# c# - 有什么方法可以加快这个更新？C#、SQL、T-SQL

> ID：12088719
> 
> 赞同：1
> 
> 时间：2012-08-23T09:32:52.630
> 
> 标签：c#, sql, winforms, tsql

SQL：

```
CREATE FUNCTION dbo.fnRandomForeNames ()
RETURNS VARCHAR(50) 
AS
BEGIN
RETURN  (
            SELECT TOP 1 [FirstName]
            FROM [tmp_ForeNames] 
            ORDER BY (SELECT new_id from GetNewID)
        )
END
GO 
```

dbo.fnRandomSurNames() 等的类似功能。

```
UPDATE Table1
SET firstname = dbo.fnRandomForeNames(),
    lastname = dbo.fnRandomSurNames(),
    address1 = dbo.fnRandomAddress1(),
    address2 = dbo.fnRandomAddress2(),
    address3 = dbo.fnRandomAddress3(),
    birthdate = DATEADD(DAY, ABS(CHECKSUM(NEWID()) % 3650), '1990-01-01') 
```

我的 C# 代码：

```
 private void RunThis(string connString, StreamReader sr)
    {
        sr.BaseStream.Position = 0;
        string sqlQuery = sr.ReadToEnd();
        using (SqlConnection connection = new SqlConnection(connString))
        {
            Server server = new Server(new ServerConnection(connection));
            server.ConnectionContext.StatementTimeout = 4200;
            server.ConnectionContext.ExecuteNonQuery(sqlQuery);
        }
        sr.Close();
    } 
```

...........

```
 RunThis(e.Argument.ToString(), _updateClaim); 
```

`e.Argument.ToString()`连接字符串在哪里。

脚本运行较早，`CREATE FUNCTION`运行时间非常短。此外，名称存储在 tmp 数据库中，这些名称是通过数组在 C# 中输入的。这些也需要很少的时间来运行。

表 1 包含大约 140,000 行，大约需要 140,000 行。14分钟完成。

我也尝试过使用参数化的 SQL 查询，跳过 tmp 表和 SQL 函数，而是创建 SQL 查询并从代码中执行它，如下所示：

```
UPDATE Table1
SET lastname = '{0}',
    firstname = '{1}',
    birthdate = DATEADD(DAY, ABS(CHECKSUM(NEWID()) % 3650), '1990-01-01'),
    address1 = '{2}',
    address2 = '{3}',
    address3 = '{4}'
    WHERE u_id = '{6}' 
```

还有一些 C#：

```
 using (SqlConnection connection = new SqlConnection(connString))
        {
            connection.Open();
            for (int i = 0; i < arraySize; ++i)
            {
                string updateString = string.Format(updateString2, GetRandomSurname(), GetRandomForeName(), GetRandomAddress1(), GetRandomAddress2(), GetRandomAddress3(), "", ids[i]);
                SqlCommand cmd = new SqlCommand(updateString, connection);
                cmd.CommandType = CommandType.Text;
                cmd.ExecuteNonQuery();
            }
        } 
```

后一种方法也需要 14 分钟以上。

关于如何减少更新表格所需时间的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:58:24.040

我的建议是考虑创建一个[表值函数](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)来返回一个包含这些随机值的表，而不是多次调用多个函数。像这样的东西：

```
create function dbo.fnRandomStuff
(
  @FirstName bit, 
  @LastName bit, 
  @address1 bit,
  @address2 bit,
  @address3 bit
)
RETURNS @RandomStuff TABLE 
(
    FirstName varchar(50) NULL, 
    LastName varchar(50) NULL, 
    address1 varchar(50) NULL, 
    address2 varchar(50) NULL, 
    address3 varchar(50) NULL
)
AS
BEGIN
  -- your code here to get the random stuff based on the 
  -- parameters passed

END 
```

然后，由于您要返回一个表，您可以加入该表，它将最大限度地减少您对函数进行的多次调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:49:36.363

由于功能的原因，第一次更新很慢。他们只是运行了太多次。

在第二种情况下，校验和可能需要太多时间。

只是一个提示，您可以尝试一下：

您如何看待在每个临时表上放置一个 IDENTITY 列的解决方案，只需给它们 id-s，然后只需要在 sql 中使用连接，并且只在 c# 中抛出一些随机值，如临时表的外键. 使用这些行，您可以先插入新的基于 id 的记录，然后在主表上只运行一次大更新。首先可能是矫枉过正，但我​​认为它可以取得更好的结果。过去我们使用类似的东西来预填充一些测试数据库。

PS：对不起，由于拼写错误和可读性，我使用了android手机：）

# load - 保存/写入/存储和读取/加载之间的语义差异？

> ID：12088721
> 
> 赞同：16
> 
> 时间：2012-08-23T09:32:58.943
> 
> 标签：load, save, store

我永远不知道在文件中写入/存储/保存某些内容的函数的正确名称是什么。我什么时候应该使用`save()`vs `store()`vs`write()`以及它们之间的含义有什么区别？

`store`如果我写入数据库、`write`文本文件和二进制数据，我想会使用它，对`save`吗？XML 文件呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T09:37:31.727

好吧，这取决于你。我个人使用`saveXXX()`and`loadXXX()`对于大多数此类代码，如何从技术上保存数据（文件、数据库等）并不重要。从应用程序的角度来看，它没有区别。保存的代码只需要将数据放入存储中，或多或少是持久的，它并不真正关心存储层是如何完成的。我只是建议坚持一个命名，基本上是为了简单和一致。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-26T11:39:59.453

我将`load`/`save`用于隐式知道或推断在何处获取或放置数据的方法，而明确地需要告诉方法`read`和方法。`write`我想这最终完全是武断的，但社区就何时使用哪个词达成共识会很高兴。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T09:35:02.593

我会这么说，`save`并且`store`或多或少可以互换。不过我更喜欢`save`。

`write`我解释为写出内容并且什么都不做，同时`save`也关闭文件。

# tsql - MS SQL 2008 R2 Queryanalyzer 在代码中成功运行。LOGO 应用程序中的失败 SQL 代码字段正在运行

> ID：12088724
> 
> 赞同：0
> 
> 时间：2012-08-23T09:33:20.693
> 
> 标签：tsql, sql-server-2008, subquery, query-analyzer

MS SQL 2008 R2 Queryanalyzer 在代码中成功运行。LOGO 应用程序中的失败 SQL 代码字段正在运行。

错误 ：

```
" The order by clause is invalid in views, inline functions,derived tables,subqueries and common table expressions,unless TOP or FOR XML is also specified" 
```

我的代码：

```
printf("goodbye world!");  /* his suicide note
                              was in C */

SELECT PLN.[DATE_] AS 'TARİH',
          CC.DEFINITION_ AS 'Cari Kodu',
          TANA.DONEM AS 'MNL_Dönem',
          CASE 
        WHEN TANA.Oda_Tipleri='1' THEN 'Tek Kişilik'
        WHEN TANA.Oda_Tipleri='2' THEN '2 kişilik'
        WHEN TANA.Oda_Tipleri='3' THEN '3 kişilik'
        WHEN TANA.Oda_Tipleri='4' THEN '4 kişilik'
        WHEN TANA.Oda_Tipleri='5' THEN '2 kişilik odada TEK kişi'
        WHEN TANA.Oda_Tipleri='6' THEN '3 kişilik odada 2 kişi'
    ELSE 'SEÇİLMEMİŞ'
 END 'Oda_Tipi',
CASE        WHEN TANA.Oda_Ozellik= '1'      THEN 'Dışa Bakan Oda ' 
        WHEN TANA.Oda_Ozellik= '2'  THEN 'Kurangleze Bakan Oda ' 
        WHEN TANA.Oda_Ozellik= '3'  THEN 'İçe Bakan Oda ' 
        WHEN TANA.Oda_Ozellik= '4'  THEN 'Arkaya Bakan Oda '
        WHEN TANA.Oda_Ozellik= '5'  THEN 'Öne Bakan Oda '
    ELSE 'SEÇİLMEMİŞ'
END Oda_Ozellik,

CASE
        WHEN TANA.Sene_Bilgisi = '1' THEN '2011/2012 ' 
        WHEN TANA.Sene_Bilgisi = '2' THEN '2012/2013 ' 
        WHEN TANA.Sene_Bilgisi = '3' THEN '2013/2014 ' 
        WHEN TANA.Sene_Bilgisi = '4' THEN '2014/2015 ' 
        WHEN TANA.Sene_Bilgisi = '5' THEN '2015/2016 ' 
        WHEN TANA.Sene_Bilgisi = '6' THEN '2016/2017 ' 
        WHEN TANA.Sene_Bilgisi = '7' THEN '2017/2018 ' 
        WHEN TANA.Sene_Bilgisi = '8' THEN '2018/2019 ' 
        WHEN TANA.Sene_Bilgisi = '9' THEN '2019/2020 ' 
    ELSE 'SEÇİLMEMİŞ'
END Sene_Bilgisi,
CASE 
        WHEN TANA.Donem_Bilgisi = '1' THEN 'Güz ' 
        WHEN TANA.Donem_Bilgisi = '2' THEN 'Bahar '
        WHEN TANA.Donem_Bilgisi = '3' THEN 'Yaz '  
    ELSE 'SEÇİLMEMİŞ'
END Donem_Bilgisi,

CASE 
        WHEN TANA.Burs_Tipi = '1' THEN 'YÖK' 
        WHEN TANA.Burs_Tipi = '2' THEN '%25 Yönmetim Bursu' 
        WHEN TANA.Burs_Tipi = '3' THEN '%50 Yönmetim Bursu' 
        WHEN TANA.Burs_Tipi = '4' THEN '%75 Yönmetim Bursu' 
        WHEN TANA.Burs_Tipi = '5' THEN '%100 Yönmetim Bursu' 
        WHEN TANA.Burs_Tipi = '6' THEN '%50 Yurt Kredisi' 
        WHEN TANA.Burs_Tipi = '7' THEN '%100 Yurt Kredisi' 
        WHEN TANA.Burs_Tipi = '8' THEN '%100 Yönetim Burdu Mezuniyete Kadar' 
        WHEN TANA.Burs_Tipi = '9' THEN '%50 Burs %50 Yurt Kredisi' 
    ELSE 'Burssuz veya Seçilmemiş'
END Cinsiyet_Tipi,  

CASE 
        WHEN TANA.Cinsiyet_Tipi = '1' THEN 'Erkek ' 
        WHEN TANA.Cinsiyet_Tipi = '2' THEN 'Kız ' 
    ELSE 'SEÇİLMEMİŞ'
END Cinsiyet_Tipi,
CASE 
        WHEN TANA.Uyruk= '0' THEN 'TC ' 
        WHEN TANA.Uyruk= '1' THEN 'Diğer ' 
        ELSE 'SEÇİLMEMİŞ'
END Uyruk,

PLN.[FICHEREF] As 'Sipariş Referansı',
SIP.SPECODE As 'Sip.ÖK',
SIP.FICHENO As 'Sip.No',
SIP.DOCODE As 'Sip.Belge No',
CASE WHEN (FAT.[FICHENO] IS NULL) THEN '0' WHEN (FAT.[FICHENO] IS NOT NULL) THEN FAT.[FICHENO] END AS 'Fatura No',
PLN.[TRCODE],
PLN.[TOTAL] AS 'PLN Taksit Tutarı',
CASE WHEN (FAT.[NETTOTAL] IS NULL) THEN '0' WHEN (FAT.[NETTOTAL] IS NOT NULL) THEN FAT.[NETTOTAL] END AS 'Kesilen.Fat.Tut',
CASE WHEN (PLN.[TOTAL]- FAT.[NETTOTAL] IS NOT NULL) THEN '0' WHEN (PLN.[TOTAL]- FAT.[NETTOTAL] IS NULL) THEN 'Faturalanmamış' END AS 'FARK',
CASE WHEN (FAT.[TOTALVAT] IS NULL) THEN '0' WHEN (FAT.[TOTALVAT] IS NOT NULL) THEN FAT.[TOTALVAT] END AS 'Kesilen KDV',
CASE WHEN (FAT.[TOTALVAT] IS NOT NULL) THEN '0' WHEN (FAT.[TOTALVAT]IS NULL) THEN ROUND((PLN.[TOTAL]-(PLN.[TOTAL]/1.08)),2) END AS 'KesileCEK KDV',
PLN.[CANCELLED] As 'İPTAL Durumu',
PLN.[MODIFIED],
PLN.[PAYNO] AS 'Öd.Pln.Satırı',
CASE WHEN (FAT.[TRACKNR] IS NULL) THEN 'Faturalanmamış' WHEN (FAT.[TRACKNR] IS NOT NULL) THEN FAT.[TRACKNR] END AS 'FAT.SIRA.NO'
FROM LG_011_01_PAYTRANS AS PLN 
LEFT OUTER JOIN LG_011_CLCARD CC ON
CC.LOGICALREF = PLN.CARDREF LEFT OUTER JOIN
LG_011_01_INVOICE AS FAT ON  PLN.FICHEREF=FAT.DOCTRACKINGNR AND FAT.TRACKNR=PLN.PAYNO     LEFT OUTER JOIN
LG_011_01_ORFICHE AS SIP ON  PLN.FICHEREF=SIP.LOGICALREF INNER JOIN
LG_XT1015_011 AS TANA ON CC.LOGICALREF=TANA.PARLOGREF
Where MODULENR=3 
ORDER BY  PLN.[DATE_] ASC 
```

此外，任何用于报告的应用程序、运行平稳的 t-sql 代码、queryanalzer。如果您可以从堆栈中识别出堆栈溢出错误，那么是否有可能转换数据？如何？您可以在视频中找到逐步解释的文档吗？

错误详情：
`cpu registers: eax = 0d3e2f60 ebx = 0d40ef98 ecx = 00000000 edx = 0042967e esi = 00000019 edi = 0012fc24 eip = 0042967e esp = 0012efa8 ebp = 0012f004`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:11:52.950

如果这是错误消息 - “Order by 子句在视图、内联函数、派生表、子查询和公用表表达式中无效，除非还指定了 TOP 或 FOR XML”，则应在中输入“TOP 100 PERCENT”使用“order”的语句的子句。

在你的情况下，我想它会是：

```
SELECT    TOP 100 PERCENT
          PLN.[DATE_] AS 'TARIH',
          CC.DEFINITION_ AS 'Cari Kodu',
          TANA.DONEM AS 'MNL_Dönem',
          CASE 
          ... 
```

# jquery - jQuery Masonry 不工作。

> ID：12088733
> 
> 赞同：5
> 
> 时间：2012-08-23T09:33:58.943
> 
> 标签：jquery, jquery-masonry

我让它工作，但由于某种原因它刚刚停止工作，我不知道我做了什么。盒子`divs`向左浮动，我只是不知道我哪里出错了。

**jQuery**

```
var $container = $('.work');            
$container.imagesLoaded(function(){                 
   $container.masonry({
      itemSelector: '.box',
      isAnimated: true,
      columnWidth: 250                  
   });
}); 
```

**HTML**

```
<div id="part-one" class="work">
   <div class="box col2"><img src="_assets/images/one.jpg" alt="" /></a></div>
   <div class="box col2"><img src="_assets/images/two.jpg" alt="" /></a></div>
   <div class="box col2"><img src="_assets/images/three.jpg" alt="" /></a></div>
   <div class="box col2"><img src="_assets/images/four.jpg" alt="" /></a></div>
   <div class="box col2"><img src="_assets/images/five.jpg" alt="" /></a></div>
</div> 
```

**CSS**

```
.work {
   margin-left:98px;
   top:0;
   max-width:1600px;
   padding-bottom:100px;
   position:absolute;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T11:11:00.470

移除您的`columnWidth`属性，Masonry 将使用第一个项目元素的宽度。（[文档](http://masonry.desandro.com/docs/options.html#columnwidth)）。

**看看这个[JSFiddle](http://jsfiddle.net/s8PhS/14/)。[http://jsfiddle.net/s8PhS/14/](http://jsfiddle.net/s8PhS/14/)**

如果您在 JSFiddle 中调整 HTML 容器的大小，它也会动态调整大小。我还添加了一些用于演示目的的
额外元素和不同高度的元素，您可以看到砌体插件启动并完美定位元素。`<div>``Odd Five element`

所以基本上，删除该属性`columnWidth: 250`并让 Masonry 动态拾取它。

在[JSFiddle](http://jsfiddle.net/s8PhS/14/)中，这似乎可以解决您的问题。

* * *

**提示**：我最近使用了同样的 jquery.masonry 插件，但也想对我的元素进行排序，我发现了这个名为[Isotope](http://isotope.metafizzy.co/)的神奇插件，它非常棒，而且更可定制。

[查看主页上的演示！](http://isotope.metafizzy.co/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:40:57.647

它似乎与 masonry column width 属性和可用于显示 div 的空间有关。尝试使用您的 jsfiddle 进行思考。祝你好运。

# android - ProgressDialog 在准备另一个 AlertDialog 时没有启动

> ID：12088741
> 
> 赞同：1
> 
> 时间：2012-08-23T09:34:19.500
> 
> 标签：android, progressdialog

我有一个 AlertDialog，其内容可能需要大约 5 秒来准备内容数据。在等待 AlertDialog 出现期间，我试图在等待它的同时添加一个 ProgressDialog，但不知何故 ProgressDialog 没有出现，它只在 AlertDialog 准备好前一秒钟闪烁。

感谢帮助。

```
final DialogFragment newFragment = setApplicationFragment.newInstance();
        pd = ProgressDialog.show(this, null, getString(R.string.loading), true, false);
        new Thread(new Runnable() {  
            public void run() {  
                newFragment.show(getFragmentManager(), "alert");
                pd.dismiss();  
                return;  
            }  
        }).start(); 
```

# regex - 当行的第一个单词与给定格式匹配时提取行 (PERL)

> ID：12088742
> 
> 赞同：0
> 
> 时间：2012-08-23T09:34:23.513
> 
> 标签：regex, perl, extract

我有一个文件，如示例文件 TEST.txt 所示

```
TEST.txt
top.s.1 { i go to home >85

jungle.lion and city }

dog7.1.e {dalmition <101

white and black }

cars_1.3.bmw_r { very good car =10

merc is merc.r.5_two } 
```

我想提取以具有**两个“。”的单词/字段开头的行。**. 示例输出如 OUT.txt 所示

```
OUT.txt
 top.s.1 { i go to home >85
 dog7.1.e {dalmition <101
 cars_1.3.bmw_r { very good car =10 
```

我尝试使用此正则表达式提取它

```
perl -ne '/^\w+.*?\.\w\.\d+.*?/ig && print' TEST.txt > OUT.txt 
```

它错过了匹配几个表达式。谁能帮我得到想要的？

注意：这只是一个示例输入文件，所以这个 oneliner 可能适用于此，但它不够准确，无法在我的原始文件中找到所有字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:54:18.503

您的正则表达式`/^\w+.*?\.\w\.\d+.*?/ig`需要一个字母数字字符串，后跟*任何长度的任何内容*，然后是一个点，一个字母数字，另一个点，然后是一些数字，然后是任何内容。修饰符是不必要的`/i`，因为模式中没有字母字符，并且`/g`是不必要的，因为`/^/`它只能匹配一次。

删除`.*?`并更改和更改`\w`它`\d+`应该`\w+`可以工作。

这将满足您的要求。它期望输入文件作为命令行参数

```
use strict;
use warnings;

while (<>) {
  print if /^\w+\.\w+\.\w+[^\w.]/;
} 
```

或作为命令行程序：

```
perl -ne 'print if /^\w+\.\w+\.\w+[^\w.]/' TEST.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:43:39.363

与`awk`：

```
awk '{if ($1 ~ /.*\..*\..*/) {print}}' TEST.txt 
```

测试在第一个字段上检查所需的模式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:04:23.460

如果您的主要目标是检查块的“标题”，我认为首先将标题和块解析为哈希是一个好主意。完成后，您可以根据需要检查句点的哈希键`.`：

```
> perl -MData::Dumper -nlwe 'if (/^\s*([\w.]+)\s*({\s*.*)/) { 
    $key = $1; $a{$key} = $2;
    } else { 
    $a{$key} .= $_ } }{ print Dumper \%a;' data.txt 
```

**输出：**

```
$VAR1 = {
      'cars_1.3.bmw_r' => '{ very good car =10merc is merc.r.5_two } ',
      'top.s.1' => '{ i go to home >85jungle.lion and city }',
      'dog7.1.e' => '{ dalmition <101white and black }'
}; 
```

密钥的后处理类似于：

```
@keys = grep /\..*\./, keys %a;   # 2 or more periods
@keys = grep /^[^.]*\.[^.]+\.[^.]*$/, keys %a;  # exactly 2 periods 
```

我选择使用视觉效果选项从块中删除换行符`-l`，但如果您认为它们应该保留，只需`-l`从命令行开关中删除。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-23T09:51:41.370

我会使用以下正则表达式：

```
perl -ne 'print if /^[^ .]*\.[^ .]*\./' 
```

即，在行的开头可以有任何不是空格或点的东西，甚至什么都不是，然后有一个点，而不是除了空格或点之外的任何东西，然后又是一个点。

# iphone - 如何从 uiwebview iphone 中提取浏览历史记录

> ID：12088745
> 
> 赞同：1
> 
> 时间：2012-08-23T09:34:25.047
> 
> 标签：iphone, uitableview, uiwebview, browser-cache

如何在 UIWebView Iphone 中获取浏览历史记录。UIWebView 记录浏览历史？如果是，如何将表格视图中显示的历史记录拉回为 Safari 。

请给我建议。任何建议。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T17:24:15.397

它实际上比创建自己的堆栈要简单得多（在我发现没有必要之前，我正打算这样做）。UIWebView 有方法：**goBack**、**goForward**、**canGoBack**和**canGoForward**。您可以执行以下操作。

使包含您的 UIWebView 的 ViewController 成为 UIWebViewDelegate 的委托：

为按钮创建 IBActions：

```
- (IBAction) browserBack: (id)sender
{
    [webBrowser goBack];
}

- (IBAction) browserForward: (id)sender
{
    [webBrowser goForward];
} 
```

创建您的后退和前进按钮并将它们链接到 IBActions 以及适当的 IBOutlets

最后添加 webViewDidFinishLoad 委托方法：

```
- (void) webViewDidFinishLoad: (UIWebView *)webView
{
    [mBackButton setEnabled: [webBrowser canGoBack]];
    [mForwardButton setEnabled: [webBrowser canGoForward]];
} 
```

请注意，这些按钮的启用和禁用取决于您当前位置是后退还是前进页面。

而已！您现在可以向后和向前浏览，并且这些按钮将自动显示或根据需要禁用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T09:44:48.393

这个方法会在 webview 加载请求时调用：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

将此请求保存到堆栈。这个堆栈是 Webview 的历史。

希望有所帮助:)

# bios - 定位 PCI 并口的基地址

> ID：12088750
> 
> 赞同：0
> 
> 时间：2012-08-23T09:34:52.517
> 
> 标签：bios, pci, parallel-port, pci-bus, plug-and-play

我正在为 DOS 开发一个应用程序。我需要通过并行端口进行通信。

目前我被困在如何确定哪个 PCI 功能的 BAR（基地址寄存器）包含该并行端口的基地址（即数据端口地址）？:?

准确地说，是否存在特定 BAR 将始终包含该并行端口的基地址的行业约定或标准或事实上的标准？

如果不是，那么我如何确定该 PCI 并行端口的基地址（无论是在 pci 扩展卡上还是集成在主板上）？

实际上我关心的是*PCI 扩展卡*上的并行端口。AFAIK，BIOS 不知道这些。BIOS 只会将资源分配给 pci 卡，仅此而已。因此，BDA 中可能没有此类并行端口的条目，因为 BIOS 制造商只知道他们的主板拥有的所有设备。

例如，在 PC 上，我在 pci 扩展卡上安装了 4 个并行端口，并且在主板上集成了 1 个并行端口。现在其他 2 个并行端口的条目在哪里？

这就是为什么 BIOS 似乎只包含集成在芯片组或主板上的*三个并行端口的条目。*所以，我认为我们必须读取 PCI BAR 以获取安装在主板上的 pci 扩展卡上的任何并行端口的基地址。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T03:27:04.147

基于内存的并行端口（包括串行端口）列表仅限于三个条目（最初在*IBM PC*中是 4 个）。*当即插即用*(PnP) 技术尚不存在时，它专为基于 ISA 的旧系统而设计。

在较新的系统上，应使用 BIOS PnP 功能来检测任何基于 PCI 的并行端口设备。这涉及扫描所有 PCI 设备以找到属于*Parallel Port*子类的*Communication Device*类。直接从[英特尔网站](http://download.intel.com/support/motherboards/desktop/sb/pnpbiosspecificationv10a.pdf)（PDF 文件）或从[ACPI 网站](http://www.acpi.info/links.htm)获取英特尔的*即插即用 BIOS 规范*。您将在该文档中找到如何访问 PnP BIOS 功能。

 **请注意，由于某些系统可能仍具有板载并行端口，因此您仍需要使用 BIOS 内存检测其存在。如果板载并行端口少于三个，则还应在该内存中列出其他基于 PCI 的并行端口。但是，建议假设它们不是，因为 BIOS 中可能存在错误。因此，结合内存和 PnP BIOS 的检测结果，然后删除任何重复项。

如果您想检测实际的并行端口以确保它存在并工作，请检查 VirtualBox 的 BIOS[汇编源代码](http://www.virtualbox.org/svn/vbox/trunk/src/VBox/Devices/PC/BIOS/orgs.asm)（最初来自*Bochs*的 BIOS）。具体来说，`detect_parport`功能。

**编辑：**有关 PCI 设备当前配置的更多详细信息。

PCI 设备的当前配置存储在*扩展系统配置数据*(ESCD) 中。这也被某些 BIOS称为*NVRAM 。**PnP BIOS 规范的函数0x41*和*0x42*中描述了检索其数据的方法。但是，ESCD 规范与 PnP BIOS 规范是分开的。你可以在[这里](http://www.singlix.com/trdos/escd.pdf)得到它（PDF文件）。

我在英特尔网站上找不到链接，抱歉。他们曾经提供这些旧规格，也可以从他们的网站上搜索到，但现在很难找到。我的仍然是 RTF 格式。PDF *ESCD*规范似乎是最后一个版本，与我的版本相同，即 1.02A 版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:23:58.610

如果在 BIOS 中配置了内置并行端口，则无法通过基地址将数据发送到 pci 并行端口，发送到该 pci 并行端口的一种方法是禁用 bios 中的并行端口...

我已经测试了这个场景，它在我身边运行良好。

但是如果你想使用多个端口，比如内置和pci并口，内置端口可以使用io基地址，但是对于pci并口，你需要知道pci并口制造商提供的驱动程序...如果它是系统提供的驱动程序，也许有一种方法可以通过公共 ioctl 或通过将驱动程序作为普通文件访问来挂钩他们的驱动程序..

我使用了在 Windows 7 上运行的通用端口。**

# javascript - 手风琴脚本冲突

> ID：12088755
> 
> 赞同：0
> 
> 时间：2012-08-23T09:35:06.810
> 
> 标签：javascript, jquery, html, css

这是手风琴的[演示](http://jsfiddle.net/a545y/15/)。它在小提琴中工作正常，但是当我将代码复制到 html 文件中时它不起作用。

这是HTML文件代码

编辑的 HTML

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link rel="stylesheet" href="horizontalaccordion.css" type="text/css" />
<script src="http://code.jquery.com/jquery-1.8.0.min.js" type="text/javascript"></script>
</head>

<body>

<div class="horizontalaccordion">
<ul>
    <li>
        <h3>Heading 1</h3>
        <div>Content For Panel 1.</div>
    </li>
    <li>
        <h3>Heading 2</h3>
        <div>Content For Panel 2.</div>
    </li>
    <li>
        <h3>Heading 3</h3>
        <div>Content For Panel 3.</div>
    </li>
    <li>
        <h3>Heading 4</h3>
        <div>Content For Panel 4</div>
    </li>
</ul>
</div>​ 
<script type="text/javascript">
    $(document).ready(function() {
 $('h3','.horizontalaccordion ul li').on('click',function() {
    $(this).closest('li').toggleClass('hover').siblings().removeClass('hover');
});​
});
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:42:15.467

如果您从某些行中删除一些特殊字符，它会起作用。在 vim 等真正的文本编辑器中打开你的 html 文件，你会看到。我在 vim 中看到类似`<200b>`符号的东西，如果我删除它们，它就可以正常工作。

只需复制以下内容：

```
<!DOCTYPE html>

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    <link rel="stylesheet" href="horizontalaccordion.css"
    type="text/css" />
    <script src="http://code.jquery.com/jquery-1.8.0.min.js" type="text/javascript"></script>
  </head>

  <body>
    <div class="horizontalaccordion">
      <ul>
        <li>
          <h3>Heading 1</h3>
          <div>Content For Panel 1.</div>
        </li>
        <li>
          <h3>Heading 2</h3>
          <div>Content For Panel 2.</div>
        </li>
        <li>
          <h3>Heading 3</h3>
          <div>Content For Panel 3.</div>
        </li>
        <li>
          <h3>Heading 4</h3>
          <div>Content For Panel 4</div>
        </li>
      </ul>
    </div>

    <script type="text/javascript">
      $(document).ready(function () {
        $('h3', '.horizontalaccordion ul li').on('click', function () {
          $(this).closest('li').toggleClass('hover').siblings().removeClass('hover');
        });
      });
    </script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:46:15.853

可能是您的 CSS 文件未正确加载，请确保您的 .css 文件靠近您的 .htm 文件，如果没有尝试下载 .js 文件并将 src 更改为下载位置。除此之外我没有看到任何问题

# mysql - 条件为空的情况下，如何进行所有选择

> ID：12088758
> 
> 赞同：-1
> 
> 时间：2012-08-23T09:35:29.520
> 
> 标签：mysql

我被困在mysql问题上。我的例子如下

```
select * from table where id <= (select id from another_table) 
```

如果 another_table 返回一些数字，但如果值为空怎么办。如果另一个表为空值，我想选择所有记录

IE

```
(select id from another_table) is null 
```

它应该变成或表现得像

```
select * from table where 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:40:22.263

您是否尝试过使用该[`COALESCE`](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_coalesce)功能？

```
select * from table where id <= coalesce((select id from another_table), N); 
```

其中“N”是可以存储在“id”列中的最大值，例如`2147483647`对于`INT`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:45:16.807

将子查询的结果存储在变量中将为您解决问题：

```
SELECT a.*
FROM table a, (SELECT @id:= (SELECT id FROM another_table LIMIT 1)) c
WHERE @id IS NULL OR id <= @id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:47:17.833

尝试这个：

```
select @id := (select max(id) from table);
select * from another_table where id 
         <(case when @id is null then id else @id end) 
```

# c# - 我可以重命名我的应用配置文件的文件扩展名吗？（.config 到 .xml）

> ID：12088768
> 
> 赞同：2
> 
> 时间：2012-08-23T09:36:00.620
> 
> 标签：c#, .net, xml, configuration

我在 VS 的 C# 项目中创建了一个应用程序配置文件。如果我编译并创建 .exe，我会将配置文件放入同一个文件夹中。没关系。我只是不想要名称**MyApp.exe.config**。我想将文件扩展名设置为 .xml，也许是**MyApp.exe.config.xml** - 有没有办法做到这一点？

有了 .xml，人们可以使用 notepad++ 之类的工具，并且 xml 语法高亮显示会自动出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:39:10.787

您可以更改配置文件：

```
AppDomain.CurrentDomain.SetData("APP_CONFIG_FILE", "[path]/MyApp.exe.config.xml"); 
```

有了这个，您还可以在不同的应用程序之间共享配置文件。

# flash - Flash 电影在页面刷新之前不会播放

> ID：12088772
> 
> 赞同：0
> 
> 时间：2012-08-23T09:36:46.957
> 
> 标签：flash, page-refresh

一个菜鸟查询！我在需要加载大小约为 115k 的图像和 mp3 声音的页面上有一个自加载 Flash 电影。我正在使用 greensock 平台（LoaderMax）来加载资产。当我在任何浏览器（chrome、FF、IE）中打开嵌入此 swf 的 HTML 页面时，几乎总是需要刷新页面才能真正开始播放 swf。尽管进度条确认 100% 成功下载了所需文件。如果我不刷新页面，电影根本不会播放。所以我目前正在使用 javascript 在使用 cookie 的初始页面加载 4 秒后刷新页面一次。但我希望有一些更好的方法来做到这一点，例如仅重新加载 Flash 内容等。各位大神能否提出更好的解决方法来解决这个问题？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:47:49.160

我对 Flash 了解不多，但就一般事件而言，听起来您的电影实际上是在内容下载之前开始播放的。它很可能会失败，因为内容尚未下载；同时内容不断加载。

因此，当您刷新页面时，将从缓存中提取内容并按照您的意愿播放电影。Id 会查找诸如“已加载”之类的回调事件，并在内容下载完成后处理该事件以开始播放电影。

请参阅此网址以获取更多建议：

[如何在 Flash 电影成功加载时捕获事件触发器？](https://stackoverflow.com/questions/430928/how-to-capture-an-event-trigger-when-a-flash-movie-successfully-loaded)

> 我要做的是使用 Actionscript 的 ExternalInterface 类，它允许您的 flash 播放器与包含 flash 文件的 html 文件中可用的 javascript 函数进行通信。您可以让您的 flash 文件调用一个 javascript 函数，该函数触发一个函数，告诉您的 javascript 处理脚本 flash 已准备好。这样做的好处是，当 javascript 接管时，您可以准确控制应该在 flash 文件中加载的内容。

# c# - 通过运行 silverlight 应用程序使用 web 服务

> ID：12088773
> 
> 赞同：0
> 
> 时间：2012-08-23T09:36:47.353
> 
> 标签：c#, silverlight, web-services, ria

我已经使用 SilverlightApplication.Web 项目中的 WCF Webservices (.svc) 和 RIA 域服务创建了一个 Silverlight 应用程序。用户必须输入用户名和密码进行识别。Web.config 只允许经过身份验证的用户访问 Web 服务。

我想编写一个 Office 加载项，它应该使用其中一些 Web 服务。

对于我的ria域服务的使用，我不知道....

对于 .svc 服务，我认为向我的 Office 加载项添加服务引用就可以了。不幸的是，如果它尝试添加对[http://mydomain.com/ServiceTest.svc](http://mydomain.com/ServiceTest.svc)的服务引用，我会收到 404 错误。有什么想法可以进行身份​​验证吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:27:25.027

我找到了一个不错的教程：

www.codewrecks.com/blog/index.php/2009/09/08/use-aspnet-membership-provider-with-a-wcf-svc-service/

# python - 在处理数据的同时更新网页

> ID：12088777
> 
> 赞同：0
> 
> 时间：2012-08-23T09:37:01.137
> 
> 标签：python, ajax, javascript-events, parallel-processing, pylons

我不确定在这个主题上要搜索什么。

我有一个 Pylons 后端，它遍历数据库中的电子邮件地址列表，然后将它们显示在网页上。我想做的是有一个加载部分（因为还有一些其他过程需要很长时间）来显示当前正在处理的电子邮件地址。

即
“当前处理：example@internet.com”
“当前处理：example2@internet.com”

我愿意使用任何可用的技术，尽管我怀疑 AJAX 会是答案。我只是有点不知道该怎么办，好像我给前端网页返回了一些东西，这个过程就结束了！必须有某种并行处理，但我不知道如何去做。那么如何在屏幕上显示正在处理的电子邮件地址呢？

**Python**

```
emails = [a,b,c]
for x in emails:
   return x 
```

**Javascript**

```
function displayProcess(email){
$('#emailDisplay').val(email)
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:42:59.037

你不要循环列表，因为在第一次返回时你的循环被打破了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:45:02.403

您应该使用某种作业队列来处理长期任务。[Celery](http://celeryproject.org/)在 Python 世界中非常流行。作业可以将他们的状态报告给某种快速和临时的数据存储，比如[Redis](http://redis.io)和 JavaScript 可以使用 AJAX 轮询这些状态，比如说，5 秒（我假设是否已经处理了一些事情并不重要 2或 5 秒前）。

**编辑**

澄清一下——在我描述的模型中，JavaScript 并不直接调用 Redis。它使用某种服务将所需数据转储到 JSON 或 XML。

# css - CSS：隐藏的html标签显示后位置中断

> ID：12088779
> 
> 赞同：1
> 
> 时间：2012-08-23T09:37:08.897
> 
> 标签：css, html

第一张图片：![在此处输入图像描述](../Images/390424a76f89bbb12750d8530faded3e.png)

第二张图片：![在此处输入图像描述](../Images/13339bf11b01a5b5a69e2c838e9d2200.png)

问题：为什么在第二张图片中显示隐藏的html标签后，黄色和绿色之间有一个空格，请帮忙？我应该如何解决这个问题？非常感谢。

这是我的html代码

```
<div id="login">
    <?php
    session_start();
    $errmsg = array();
    if(isset($_SESSION['errmsg'])&&is_array($_SESSION['errmsg'])&&count($_SESSION['errmsg'])>0){
        foreach($_SESSION['errmsg'] as $msg){
            echo '<p id="error"><img src="img/error.png" alt="Login error!">'.$msg.'</p>';
        }
        unset($_SESSION['errmsg']);
    }
    ?>
    <form method="post">
        <label for="email">Email:</label>
            <input id="email" type="email" name="email" required>
        <label for="pass">Password:</label>
            <input id="pass" type="password" name="pass" required>
            <input id="submit" type="submit" name="login" value="Login">
    </form>
    <?php
    include 'functions/functions.php';
    if(isset($_POST['login'])){
        $result=AuthenticateUser($_POST['email'],$_POST['pass']);
        if($result){

        }
        else
            $errmsg[]='Login error:please check your e-mail & password';
            session_regenerate_id();
            $_SESSION['errmsg'] = $errmsg;
            session_write_close();
            header('location:index.php');
            exit();
    }
    ?>
</div> 
```

这是我的css代码

```
label, input#pass, input#register{
    display:block;
}
p#error {
    color:#FF0000;
}
div#nav{
    background-image:url('../img/nav.png');
    background-repeat:no-repeat;
}
div#nav, a {
    text-decoration:none;
}
body {
    margin:0 auto;
    width:600px;
}
div#login, div#register {
    background-image:url('../img/form.png');
    background-repeat:repeat-y;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:40:51.797

它可能与`<p>`. 尝试更改`<p id="error">`为`<div id="error">`，看看是否可以解决它。您也可以尝试`margin-top:0px;`为`p#error`.

如果这些解决方案中的任何一个解决了它，那么问题是因为`<p>`标签的默认上边距值。保证金推低了开始`<div id="login">`并造成了差距。

# android - 自定义 Dialog 标题的布局

> ID：12088783
> 
> 赞同：2
> 
> 时间：2012-08-23T09:37:25.537
> 
> 标签：android, xml, dialog, title

我需要使用以下布局自定义自定义对话框的**标题区域：**

对话框标题.xml

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/text" 
    android:text="@string/tell_a_friend"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingLeft="8dip"
    android:paddingTop="12dip"
    android:paddingBottom="12dip"
    style="@style/bigTextWhite" />

</LinearLayout> 
```

我正在使用扩展 Dialog 的 CustomDialog 类创建我的对话框。

```
CustomDialog dialogTellAFriend = new CustomDialog(this, Constants.TELL_A_FRIEND_DIALOG);    
dialogTellAFriend.show(); 
```

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:55:09.233

您必须隐藏您的对话框标题并通过您的 xml 扩展整个对话框。我认为这个想法最适合你。

**隐藏对话框标题**

```
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

并**加载对话框的布局是**

```
dialog.setContentView(R.layout.logindialog); 
```

# google-analytics - 如何将值传递给自定义变量 Google Analytics？

> ID：12088787
> 
> 赞同：1
> 
> 时间：2012-08-23T09:37:32.557
> 
> 标签：google-analytics, google-analytics-api

我的疑问是我们是否需要将名称和值传递给该脚本，否则我们可以提供将存储在 Google Analytics Server 中的任何名称和值？

```
_gaq.push(['_setCustomVar',
          1,                   // This custom var is set to slot #1\.  Required parameter.
          'Items Removed',     // The name acts as a kind of category for the user activity.  Required parameter.
          'Yes',               // This value of the custom variable.  Required parameter.
          2                    // Sets the scope to session-level.  Optional parameter.
       ]);
     _gaq.push(['_trackEvent',
          'Shopping', // category of activity
          'Item Removal', // Action
       ]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:43:32.310

自定义变量的名称和值的格式非常自由，但我建议坚持使用字母数字。我从未尝试过元字符。

# javascript - 由于加载了modernizr，单击时表单未提交

> ID：12088792
> 
> 赞同：1
> 
> 时间：2012-08-23T09:37:44.017
> 
> 标签：javascript, html, forms, modernizr, zurb-foundation

我有一个网页，可让您更改其上用户的值。出于某种原因，可能很明显，但我忽略了，我无法单击提交按钮（并让它做任何事情）。这就是我所拥有的，页面上一次大约有五个用户，但在此之前所有表单标签都已关闭。据我所知，这都是有效的 html，但唉，我可能弄错了。

```
<tr>
    <form name="form2" id="form2" action="updateusers.php" method="post">
        <td><input type="hidden" name="username" value="jett"/>jett</td>
        <td><input type="text" name="fname" value="jett" /></td>
        <td><input type="text" name="lname" value="jel" /></td>
        <td><input type="text" name="reseller" value="0" /></td>
        <td><input type="text" name="resellerCut" value="0.0000" /></td>
        <td><input type="text" name="dealpercent" value="0" /></td>
        <td><input type="text" name="purchases" value="0" /></td>
        <td><input type="text" name="sales" value="0" /></td>
        <td><input type="submit" name="submit" value="submit" class="nice small radius blue button"/></td>
        <td><a href="deleteuser.php?uid=2" class="small red radius button" style="float:right; color:#fff; padding:0.3em">X</a></td>
    </form>
</tr> 
```

编辑：我已经做了进一步的调试。似乎问题不在于我的标记，尽管作为 bažmegakapa 我的标记已关闭。似乎触发它的是modernizr.foundation.js的加载。这扭曲了我的测试。但是，我不明白为什么只会在此页面上发生这种情况，并且整个站点都使用了modernizr，没有任何问题。我已将测试页面缩减为表单、表格和modernizr，它阻止了点击的发生。这是一个显示这种令人困惑的行为的 jsfiddle [http://jsfiddle.net/rg8y3/](http://jsfiddle.net/rg8y3/)

Modernizr 在此页面上没有特别使用，因此我很容易将其删除。然而，它会专门打破这种形式而不是其他形式，没有警告或错误抛出的事实是很奇怪的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:02:18.313

出现破坏表单提交的modernizr脚本部分与触摸事件检测有关：这部分与当前版本有很大不同。

当我从源代码尝试使用 2.5.2 版本的 jsfiddle 时，页面无法提交。

构建当前版本的modernizr（在[http://modernizr.com/download/#-touch-mq-cssclasses-addtest-teststyles-prefixes-ie8compat-load](http://modernizr.com/download/#-touch-mq-cssclasses-addtest-teststyles-prefixes-ie8compat-load)使用相同的选项）并包含该脚本有效。

检查： http: [//jsfiddle.net/jussinen/rg8y3/1/](http://jsfiddle.net/jussinen/rg8y3/1/)：如果您可以更新modernizr 脚本，那么您不需要删除它或对您的页面进行任何更改。

However, having said that, if you fix the broken markup as bažmegakapa pointed out, then the script works fine with the Modernizr script you've already got: check [http://jsfiddle.net/jussinen/rg8y3/2/](http://jsfiddle.net/jussinen/rg8y3/2/) .

# android - 如何在 Android 的偏好屏幕中定位偏好类别？

> ID：12088798
> 
> 赞同：0
> 
> 时间：2012-08-23T09:38:26.387
> 
> 标签：android, audio, preference, setting

我在通知区域实现了一个通知，可以单击它并转到声音设置首选项活动。此页面中有多个类别，我如何滚动到我想要的类别或首选项？如果我不注意并只是启动声音设置，我无法立即看到我想要的类别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:58:53.413

如果 SettingsActivity 是您的自定义活动，您可以

```
getListView().setSelection(i); 
```

如果您的意思是本机 android 声音设置，我认为您不能。

要滚动到某个类别，我认为您必须这样做

```
PreferenceCategory category = (PreferenceCategory)findPreference("you_category_key");
        for (int i = 0; i <  getPreferenceScreen().getRootAdapter().getCount(); i++){
            Object o = getPreferenceScreen().getRootAdapter().getItem(i);
            if (o instanceof PreferenceCategory ){
                if (o.equals(category)){
                    getListView().setSelection(i);
                }
            }
        } 
```

但不幸的是这段代码在onCerate和onResume中没有效果，不知道为什么。尝试在其他地方过去此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:45:43.333

试试这个，希望它会有所帮助。

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            Intent intent = new Intent(Settings.ACTION_SOUND_SETTINGS);
        startActivity(intent);

    } 
```

# php - 找不到 Symfony2 注销控制器

> ID：12088804
> 
> 赞同：1
> 
> 时间：2012-08-23T09:38:41.200
> 
> 标签：php, symfony, logout

我已经设法让登录在 Symfony2 中工作，但是 /logout 有问题。我收到一个异常，说它找不到路由的控制器。但是，我的印象是 Symfony 处理注销过程，就像它处理登录一样？

（部分）我的 security.yml 文件：

```
firewalls:
    login_firewall:
        pattern:    ^/login/
        anonymous:  ~
    secured_area:
        pattern:    ^/(dashboard|directories|login_check)/
        anonymous: ~
        form_login:
            login_path:  /login/
            check_path:  /login_check/
        logout:
            path:   /logout/
            target: / 
```

我的（相关）路线：

```
_login:
    pattern: /login/
    defaults: { _controller: NanoBundle:Login:index } 

_login_check:
    pattern: /login_check/

_logout:
    pattern: /logout/ 
```

--edit：注销按钮代码：

```
<a href="{{path('_logout')}}">Logout</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:56:47.667

我最终用这个 security.yml 部分修复了它：

```
 secured_area:
        pattern:    .*
        security: true
        form_login:
            login_path:  /login/
            check_path:  /login_check/
        logout:
            path: /logout/
            invalidate_session: true 
```

感谢大家为此提供帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:47:00.630

用这个 security.yml 部分修复它：

```
security:
    providers:
        fos_userbundle:
            id: fos_user.user_manager

encoders:
    FOS\UserBundle\Model\UserInterface: sha512

firewalls:
    main:
        pattern: ^/
        form_login:
            provider: fos_userbundle
            csrf_provider: form.csrf_provider
        logout:       true
        anonymous:    true

access_control:
    - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/admin/*, role: ROLE_ADMIN }
     # URL of FOSUserBundle which need to be available to anonymous users
    - { path: ^/_wdt, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/_profiler, role: IS_AUTHENTICATED_ANONYMOUSLY }

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: ROLE_ADMIN 
```

试试这个可能对你有帮助..:)

# android - 在 Android 应用程序中打开 PDF 而不使用库和在 Android 中安装的阅读器

> ID：12088807
> 
> 赞同：1
> 
> 时间：2012-08-23T09:38:51.293
> 
> 标签：android

我需要在我自己的应用程序中打开 PDF 进行阅读、渲染和注释，无需使用任何第三方工具或库，如 MuPDF 和 APV 查看器，在 webview 等中。

有没有办法在我的应用程序中打开 PDF 而无需使用上述方法。

请帮我 ！！！！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:00:21.743

没有任何库就无法读取 pdf，您可以使用 PDFViewer.jar 库将 pdf 读取到您的应用程序中，使用下面的 SO 链接的答案来使用 PDFViewer.jar 读取 PDF

[使用 PDFViewer.jar 阅读 PDF](https://stackoverflow.com/questions/11152956/example-of-code-to-implement-a-pdf-reader/11153601#11153601)

从下面的链接下载 Jar 文件。

[http://www.filecrop.com/pdf-viewer.jar.html](http://www.filecrop.com/pdf-viewer.jar.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:41:05.897

参考问题

[在 Android 上使用 Java 渲染 PDF 文件](https://stackoverflow.com/questions/2456344/display-pdf-within-app-on-android)

它将向您展示在 android 中打开 pdf 的最佳方法我不认为有一种方法可以在不使用上述任何一种的情况下打开

```
 public class MyPdfViewActivity extends Activity {

    @Override
 protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
WebView mWebView=new WebView(MyPdfViewActivity.this);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setPluginsEnabled(true);
mWebView.loadUrl("https://docs.google.com/gview?embedded=true&url="+LinkTo);
setContentView(mWebView);
 }
 } 
```

在没有 api 或安装 prog 的情况下打开的最佳方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-09T07:15:37.827

如果有一天它可以帮助某人，请发布此内容，为了在 android 中查看 pdf 文件，您可以使用[pdf.js](https://github.com/mozilla/pdf.js/)，这需要您将 web 相关文件添加到 assets 文件夹中，其中包括 index.html 中的 js 文件和通过将pdf文件的url作为查询参数传递来调用index.html并将其加载到webview中。

优点：用户无需离开 webview 您可以重复使用它来显示托管在服务器中或应用程序可用的 PDF，您也可以查看需要使用 cookie 登录的 pdf。缺点：应用程序大小会略有增加。

# javascript - typeof new Function() 总是“函数”？

> ID：12088814
> 
> 赞同：1
> 
> 时间：2012-08-23T09:39:11.980
> 
> 标签：javascript, object, constructor, cross-browser, typeof

`typeof new Number(1)`将返回`"object"`，与实例化字符串等相同。

使用构造函数是否安全，`typeof myVar === "function"`或者是否有任何浏览器会`"object"`在使用`Function`构造函数时返回（不知道他们为什么应该这样做，但也许有任何一个）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:42:14.517

我在所有应用程序中都使用它，而且我从来没有遇到过问题。使用是安全的。

[ECMAScript 定义](http://bclary.com/2004/11/07/#a-11.4.3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:41:41.847

你可以使用

```
if (myVar instanceof Function) 
```

反而。但是， myVar instanceof Object 也是如此，因为它是派生类型。我不确定这是否“更多”跨浏览器兼容，但我相当肯定它是 ecma 标准的一部分。

# qt - 项目需要编译两次才能复制文件

> ID：12088816
> 
> 赞同：1
> 
> 时间：2012-08-23T09:39:15.373
> 
> 标签：qt, build, qmake

我用 QT creator 创建了一个项目，并且手动修改了 qmakefile。问题是，当我修改某些东西时，我需要两次构建项目，因为第一次我有一些链接后复制问题。编译输出第一次说，在编译结束时（成功结束）：

```
cp ../../../configuration/options.xml ../../../bin cp /usr/lib/MyFramework/Debug/libMyFramework.so ../../../bin cp /usr/lib/MyFramework/Debug/libMyFrameworkRoutines.so ../../../bin
cp: omitting directory `../../../bin'
cp: cannot stat `cp': No such file or directory
cp: omitting directory `../../../bin'
cp: cannot stat `cp': No such file or directory 
```

而第二次它编译正确，我没有这个问题。

我的makefile如下

```
# Variables used in the project
SOURCES_PATH     = $$quote(../../../src/UpdateManager/sources)
HEADERS_PATH     = $$quote(../../../src/UpdateManager/headers)
DESTINATION_PATH = $$quote(../../../bin)

# Project configuration
QT       -= gui
TARGET    = UpdateManager
TEMPLATE  = lib
DEFINES  += UPDATEMANAGER_LIBRARY

# Copying to destination folder
DESTDIR = $$DESTINATION_PATH

# Headers paths used in the project
INCLUDEPATH += $$HEADERS_PATH

# Source files
SOURCES += \
    ../../../src/UpdateManager/sources/options.cpp \
    ../../../src/UpdateManager/sources/consolelog.cpp \
    ../../../src/UpdateManager/sources/updatemanager.cpp

HEADERS += \
    ../../../src/UpdateManager/headers/options.h \
    ../../../src/UpdateManager/headers/consolelog.h \
    ../../../src/UpdateManager/headers/updatemanager.h

OTHER_FILES += \
    ../../../configuration/options.xml

unix:!symbian {
    maemo5 {
        target.path = /opt/usr/lib
    } else {
        target.path = /usr/lib
    }
    INSTALLS += target
}

### EXTERNAL LIBRARIES ###

# my framework
MY_FRAMEWORK_HEADERS_PATH = $$quote(/usr/include/MyFramerork/)
MY_FRAMEWORK_LIBRARY_PATH = $$quote(/usr/lib/MyFramerork)
MY_FRAMEWORK_ROUTINES_HEADERS_PATH    = $$quote(/usr/include/MyFramerork/routines)

INCLUDEPATH += $$MY_FRAMEWORK_HEADERS_PATH
INCLUDEPATH += $$MY_FRAMEWORK_ROUTINES_HEADERS_PATH

LIBS += -L$$MY_FRAMEWORK_LIBRARY_PATH/Debug/ -lMyFramework
LIBS += -L$$MY_FRAMEWORK_LIBRARY_PATH/Debug/ -lMyFrameworkRoutines

# Copying needed files in out directory
unix{
  EXTERNAL_FILES += \
    ../../../configuration/options.xml \
    $$MY_FRAMEWORK_LIBRARY_PATH/Debug/libMyFramework.so \
    $$MY_FRAMEWORK_LIBRARY_PATH/Debug/libMyFrameworkRoutines.so

  for(FILE,EXTERNAL_FILES){
    QMAKE_POST_LINK += $$quote(cp $${FILE} $${DESTDIR})
  }
}

# Boost
LIBS += -lboost_thread 
```

我认为复制问题与此部分有关

```
# Copying needed files in out directory
unix{
  EXTERNAL_FILES += \
    ../../../configuration/options.xml \
    $$MY_FRAMEWORK_LIBRARY_PATH/Debug/libMyFramework.so \
    $$MY_FRAMEWORK_LIBRARY_PATH/Debug/libMyFrameworkRoutines.so

  for(FILE,EXTERNAL_FILES){
    QMAKE_POST_LINK += $$quote(cp $${FILE} $${DESTDIR})
  }
} 
```

因为在本节中，我复制了在输出中给我带来问题的文件。所有目录都存在。那么我在哪里错了，我该如何纠正它以便在第一个构建步骤中正确复制文件？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:24:05.490

如果我没记错的`DESTDIR`话，如果它不存在，将创建任何指定的目录。另一方面，您不能确定在目标链接结束后会发生这种情况。

所以你应该添加

```
QMAKE_POST_LINK += mkdir -p $${DESTINATION_PATH}
for(FILE,EXTERNAL_FILES){
   QMAKE_POST_LINK += && $$quote(cp $${FILE} $${DESTDIR})
} 
```

首先创建目标目录并在成功时复制。

**编辑：**有一个错误。如果没有像 && 这样的逻辑命令运算符（使用更合适的），它会将以下命令视为`mkdir`.

# ruby-on-rails - 与 HAML 相比，SLIM 快多少？

> ID：12088818
> 
> 赞同：3
> 
> 时间：2012-08-23T09:39:25.367
> 
> 标签：ruby-on-rails, performance, haml, benchmarking, slim-lang

我试图说服我的团队成员使用 SLIM 而不是 HAML，因为我更喜欢 SLIM 的语法。我得到承诺，如果它真的比我[在这里](https://github.com/stonean/slim#benchmarks)和[这里](https://gist.github.com/626215)阅读的 HAML 快得多，我们会改用 SLIM ，但我不知道这些基准测试有多新，所以我想知道是否有人有一些真实的生活经验这个话题？

我也不确定哪个基准（已编译、倾斜编译、缓存、未缓存）的意义最大，因为我不知道当 Rails 应用程序处于生产模式时（速度是最需要的）。

非常感谢您提供有关此主题的更多信息！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T19:27:56.483

Slim 在生产模式下大约快 5 到 10 倍。相关的基准是编译和倾斜编译模式。Uncached 与生产无关，因为它对解析器性能进行了基准测试。

# javascript - 新元素的 CSS 过渡

> ID：12088819
> 
> 赞同：38
> 
> 时间：2012-08-23T09:39:29.600
> 
> 标签：javascript, css, firefox, css-transitions

我找不到在新创建的 dom 元素上使用 css 转换的方法。

假设我有一个空的 html 文档。

```
<body>
    <p><a href="#" onclick="return f();">click</a></p>
</body> 
```

我也有这个CSS

```
#id {
    -moz-transition-property: opacity;
    -moz-transition-duration: 5s;
    opacity: 0;
}

#id.class {
    opacity: 1;
} 
```

而这个js

```
function f() {
    var a = document.createElement('a');
    a.id = 'id';
    a.text = ' fading in?';
    document.getElementsByTagName('p')[0].appendChild(a);
    // at this point I expect the span element to be with opacity=0

    a.className = 'class';
    // now I expect the css transition to go and "fade in" the a        

    return false;
} 
```

但是，正如您在[http://jsfiddle.net/gwxkW/1/](http://jsfiddle.net/gwxkW/1/)上看到的那样，当您单击该元素时会立即出现。

如果我尝试在 a 中设置类，`timeout()`我*经常会*找到结果，但对我来说，这似乎更像是 javascript 和 css 引擎之间的竞赛。有什么特定的事件要听吗？我尝试使用`document.body.addEventListener('DOMNodeInserted', ...)`，但它不工作。

如何在新创建的元素上应用 css 过渡？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-23T10:04:17.747

在 Firefox 中，这似乎是布局完成和 CSS 转换之间的竞赛。Chrome 更具可预测性。如果我在 a 上设置类名`setTimeout()`，Chrome 总是可以工作，Firefox 只有在`setTimeout()`时间很长的情况下才能工作。

在 Firefox 中使用此代码（即使使用`setTimeout()`），文本会立即显示：

```
function f() {
    var a = document.createElement('a');
    a.id = 'id';
    a.innerHTML = ' fading in?';
    document.getElementsByTagName('p')[0].appendChild(a);
    // at this point I expect the span element to be with opacity=0

    setTimeout(function() {
        a.className = 'fadeIn';
    }, 10);
    return false;
} 
```

但是，如果我通过请求一个只能在布局后返回的属性来强制重排，它就会开始在 Firefox 中工作：

```
function f() {
    var a = document.createElement('a');
    a.id = 'id';
    a.innerHTML = ' fading in?';
    document.getElementsByTagName('p')[0].appendChild(a);
    // at this point I expect the span element to be with opacity=0

    // request property that requires layout to force a layout
    var x = a.clientHeight;
    setTimeout(function() {
        a.className = 'fadeIn';
    }, 10);
    return false;
} 
```

此外，一旦我请求该属性强制布局，我什至可以删除该属性，`setTimeout()`并且动画在 Firefox 中有效。

```
function f() {
    var a = document.createElement('a');
    a.id = 'id';
    a.innerHTML = ' fading in?';
    document.getElementsByTagName('p')[0].appendChild(a);
    // at this point I expect the span element to be with opacity=0

    // request property that requires layout to force a layout
    var x = a.clientHeight;
    a.className = 'fadeIn';
    return false;
} 
```

您可以在 Chrome 和 Firefox 中看到最后一项工作：http: [//jsfiddle.net/jfriend00/phTdt/](http://jsfiddle.net/jfriend00/phTdt/)

而且，这里有一篇文章讨论了这种现象： http: [//gent.ilcore.com/2011/03/how-not-to-trigger-layout-in-webkit.html](http://gent.ilcore.com/2011/03/how-not-to-trigger-layout-in-webkit.html)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-06-30T13:13:12.927

在将元素附加到 DOM 之后，我找到了一种更好的方法来触发布局并使转换工作：

```
window.getComputedStyle(element).opacity; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-12-22T20:20:03.597

`requestAnimationFrame()`( [https://developer.mozilla.org/en-US/docs/Web/API/window.requestAnimationFrame](https://developer.mozilla.org/en-US/docs/Web/API/window.requestAnimationFrame) ) 似乎适用于 Firefox、Chrome 和 Safari。一个更可靠、更合乎逻辑的解决方案`setTimeout()`。对于较旧的浏览器（IE8），它需要一个 Polyfill（自然不会发生过渡，但 CSS 仍会更改）。

# eclipse - 在 Eclipse 中的源附件中搜索

> ID：12088820
> 
> 赞同：3
> 
> 时间：2012-08-23T09:39:30.007
> 
> 标签：eclipse

有没有办法在 Eclipse 中的一个特定源附件中进行搜索？

目前我正在做的是：

1.  在 Eclipse 中，右键单击我对源代码感兴趣的二进制 jar，在 Package Explorer 中，然后选择 Properties
2.  从对话框复制和粘贴源附件文件名
3.  创建一个新目录
4.  将源 jar 解压缩到该目录
5.  在 Emacs 中搜索该目录（是的，Emacs - 这意味着我不必将其添加为 Eclipse 中的新项目）

一定有更简单的方法！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T15:58:41.107

> 有没有办法在 Eclipse 中的一个特定源附件中进行搜索？

你的问题的答案是：不，不是直接的。请参阅 Eclipse 错误[#199994](https://bugs.eclipse.org/bugs/show_bug.cgi?id=199994)和[#23341](https://bugs.eclipse.org/bugs/show_bug.cgi?id=23341)。

我希望赏金旨在提供正确的答案，即使它可能不是您希望的答案。

如果至少您想避免使用两个工具（Eclipse 与 Emacs），那么您始终可以使用的解决方法是

*   创建一个虚拟项目，例如“JDK6（虚拟）”，
*   在其项目属性中停用 Java 构建器，以避免自动构建您不想要并且可能由于缺少依赖项而失败，
*   将源附件（例如*source.zip*）解压缩到虚拟项目的*src*文件夹中，
*   在包资源管理器中选择项目或其包之一，然后
*   *使用文本或 Java 搜索通过Ctrl-H*愉快地搜索，可能使用搜索选项“Scope: Selected resources”（注意：在第一次搜索操作期间对 JDK 等大型资源的初始索引可能需要一段时间，下一次将是快多了）。

我刚刚对此进行了测试，并且效果很好。:-)

您甚至可以选择虚拟项目的*src*文件夹作为库的源位置。与解压缩源 JAR/ZIP 相比，这可以加快诸如通过*F3的“打开声明”之类的操作。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-07T21:33:16.180

最近发现以下插件具有搜索链接源 jar 的 beta 支持：[https ://code.google.com/a/eclipselabs.org/p/instasearch/](https://code.google.com/a/eclipselabs.org/p/instasearch/)

您必须在首选项中启用搜索源 jar，因为默认情况下它是关闭的。根据您拥有多少资源，索引过程非常缓慢，但搜索速度非常快。

我有一个带有企业版 Alfresco（Explore、Share 和 SOLR）和 Alfresco Workdesk（Vanilla、Office 和 Mobile）的 Eclipse 工作区。在我 2011 年初的 MacBook Pro 上进行索引大约需要 8 分钟。搜索几乎是瞬间的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T22:39:42.640

是的，您可以将 m2eclipse 插件与 Java Maven 项目结合使用。[此视频](http://youtu.be/AbhGH0AybyU)的实际演示在 2:30 左右开始。下载源代码后，您可以在以下位置使用普通`Eclipse`搜索功能搜索源代码：

搜索 -> 文件... -> 文件搜索。

如果您需要 Maven`Eclipse`和 m2eclipse 插件的精彩介绍，请查看[此链接](http://obscuredclarity.blogspot.de/2012/04/hello-world-maven-m2eclipse-and-eclipse.html)。

# c# - 哪个微 ORM 为每个表生成一个代码文件

> ID：12088824
> 
> 赞同：0
> 
> 时间：2012-08-23T09:39:49.800
> 
> 标签：c#, database, micro-orm

我使用了 petapoco，但它在 1 个文件中都出现了问题。

我希望能够做更多的 rails 方式 - 每个类有 1 个生成的代码文件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:43:15.630

如果您使用[代码优先的实体框架](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)，您可以按照您认为合适的方式构建您的代码文件。

# gtk - 将项目动态添加到 Liststore 中的 CellRendererCombo：Pygtk

> ID：12088826
> 
> 赞同：1
> 
> 时间：2012-08-23T09:40:05.887
> 
> 标签：gtk, pygtk

我正在尝试`CellRendererCombo`动态添加项目。请参阅下面的代码。当我点击`'Samsung'`相应的项目时，会在组合框中列出。现在的问题是，当我单击 时`'LG'`，列出了与“Samsung”相对应的项目。简而言之，组合框显示的是先前选择的键的项目，而不是当前键的项目。

我该如何解决这个问题？

```
#!/usr/bin/env python

import gtk,os

class CellRendererCombo:
    def __init__(self):
        window = gtk.Window()
        window.set_default_size(200, 200)

        liststore_hardware = gtk.ListStore(str, str)
        liststore_hardware.append(["Television", "Samsung"])
        liststore_hardware.append(["Mobile Phone", "LG"])
        liststore_hardware.append(["DVD Player", "Sony"])

        treeview = gtk.TreeView(liststore_hardware)
        column_text = gtk.TreeViewColumn("Text")
        column_combo = gtk.TreeViewColumn("Combo")
        treeview.append_column(column_text)
        treeview.append_column(column_combo)

        cellrenderer_text = gtk.CellRendererText()
        column_text.pack_start(cellrenderer_text, False)
        column_text.add_attribute(cellrenderer_text, "text", 0)

        self.cellrenderer_combo = gtk.CellRendererCombo()
        self.cellrenderer_combo.set_property("editable", True)

        self.cellrenderer_combo.set_property("text-column", 0)
        column_combo.pack_start(self.cellrenderer_combo, False)
        column_combo.add_attribute(self.cellrenderer_combo, "text", 1)

        window.connect("destroy", lambda w: gtk.main_quit())
        self.cellrenderer_combo.connect("editing-started", self.populate_combo)
        self.cellrenderer_combo.connect("edited", self.combo_changed, liststore_hardware)

        window.add(treeview)
        window.show_all()

    def combo_changed(self, widget, path, text, model):
        model[path][1] = text

    def populate_combo(self,*args):
        liststore_manufacturers = gtk.ListStore(str)
        manufacturers={}
        manufacturers['Samsung'] = ["Samsung", "Item1","Item2", "Item3", "Item4"]
        manufacturers['LG'] = ["LG", "Item5", "Item6", "Item7", "Item8", "Item9",'Item10']
        manufacturers['Sony'] = ["Sony", "Item11", "Item12", "Item13", "Item14", "Item15",'Item16']

        catgry=self.cellrenderer_combo.get_property ("text") # read the content of combobox

        for item in manufacturers[catgry]:
            liststore_manufacturers.append([item])
        self.cellrenderer_combo.set_property("model", liststore_manufacturers)

#        
CellRendererCombo()
gtk.main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:10:47.260

问题解决了。问题是因为弹出的组合框上的模型是在`GtkCellEditable::editing-started`发出信号之前设置的。并且`editing-started`处理程序被设置为下一个弹出窗口`combobox`。

因此，我创建了另一种方法来捕获列表存储“已更改”信号，并编写了代码以`cellrendercombobox`在该方法中动态填充列表存储。

```
treeviewmodel = self.tree_view.get_model()
tree_selection = self.tree_view.get_selection()
tree_selection.connect("changed", self.onSelectionChanged)
......
def onSelectionChanged(self,tree_selection) :
    value=None
    (model, pathlist) = tree_selection.get_selected_rows()
    for path in pathlist :
        tree_iter = model.get_iter(path)
        value = model.get_value(tree_iter,0)
        print value
    if value:
        <code to populate the liststore> 
```

# c# - 如何在不使用成员资格的情况下在 asp.net MVC 3 中使用自定义授权和身份验证？

> ID：12088827
> 
> 赞同：-2
> 
> 时间：2012-08-23T09:40:07.570
> 
> 标签：c#, asp.net, asp.net-mvc-3

我是 Mvc 的新手，在过去的 4 天里我一直在努力寻找在 asp.net MVC 3 中自定义授权和身份验证的任何好的教程。

问题是：-

我们有自己的自定义用户主表和自定义角色主表。

现在我想知道我们如何使用现有的自定义用户表从登录页面验证特定用户，并在不使用会员资格的情况下为该登录用户分配权限，即角色主控的角色 ID。

当用户对控制器提出任何请求时，我想要的第二件事是，我想检查用户的会话是否为 Null，并且还想检查登录用户的角色 ID 是否有，该角色 ID 是否有权访问那个控制器与否。

并且还想实现基于角色的访问控制。例如：-

**角色 1 可以编辑角色 2 的帐户，角色 3
角色 2 只能编辑角色 3 的帐户。（仅限编辑角色 1 帐户）**

一种解决方案是制作不同的视图和控制器，但我不认为这是更好的解决方案。

请推荐！！！！

提前致谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:22:38.400

我最近为 MVC 编写了一个自定义登录解决方案。在我的情况下，我在对站点的第一个请求的查询字符串中获得了 SSO 票证。票证通过对票证服务的 Web 服务调用进行验证。

验证身份后，我设置了一个普通形式的身份验证 cookie，以便在每次后续调用中建立身份。

在我的例子中，我有一个自定义的 Identity 类，继承自`GenericIdentity`. 附加信息在表单身份验证票的用户数据部分中传递。我`Application_AuthenticateRequest`在 global.asax.cs 中有一个自己的函数，可以解包用户数据并设置身份。

如果您的表单身份验证票中没有任何特殊数据，我认为仅在成功身份验证时设置 cookie 就足够了 - 内置版本将负责检查票证并根据身份验证票设置请求的身份。

# android - Android SQLite 数据库无法正常工作

> ID：12088829
> 
> 赞同：0
> 
> 时间：2012-08-23T09:40:15.567
> 
> 标签：android, sqlite

我正在开发我的第一个 SQLite 数据库应用程序，经过两天的努力，我终于向专业人士寻求帮助。

`getNurseData`尝试在文本视图（方法）中显示数据时，我正在强制关闭。另外，我认为该`createEntry`方法也不起作用，因为在调用该方法之后，我尝试通过`setText("");`调用清除 EditText 控件，但控件未清除。

这是`DbCommunicator`课程：

```
package com.deadEddie.staffingmanagement;

import android.app.Dialog;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.widget.TextView;

public class DbCommunicator {
// create fields for nurses table
public static final String KEY_NURSE_ROWID = "_id";
public static final String KEY_LNAME = "_lName";
public static final String KEY_FNAME = "_fName";
public static final String KEY_EMAIL = "_eMail";
public static final String KEY_PHONE_PRIMARY = "_priPhone";
public static final String KEY_PHONE_SECONDARY = "_secPhone";
public static final String KEY_FTE = "_fte";
public static final String KEY_DUTY_STATUS = "Off Duty"; 

// create fields for rooms table
public static final String KEY_ROOM_ROWID = "_id";
public static final String KEY_TYPE_PATIENT = "_id";
public static final String KEY_OCCUPIED = "NO";
public static final String KEY_ROOM_NUMBER = "_id";

// database values
public static final String DATABASE_NAME = "Staffing_Assignments";
public static final String NURSE_TABLE = "Nurse_Table";
public static final String ROOM_TABLE = "Room_Table";
public static final int DATABASE_VERSION = 1;

private DbHelper databaseHelper;
private final Context dbContext;
private SQLiteDatabase sqldb;

private static class DbHelper extends SQLiteOpenHelper 
{

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    // create database if it does not already exist
    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + NURSE_TABLE + " (" + KEY_NURSE_ROWID
                + "INTEGER PRIMARY KEY AUTOINCREMENT " + KEY_LNAME
                + "TEXT NOT NULL" + KEY_FNAME + "TEXT NOT NULL" +    KEY_EMAIL
                + "TEXT NOT NULL" + KEY_PHONE_PRIMARY + "TEXT NOT NULL"
                + KEY_PHONE_SECONDARY + "TEXT" + KEY_DUTY_STATUS
                + "TEXT NOT NULL);");

        db.execSQL("CREATE TABLE " + ROOM_TABLE + " (" + KEY_ROOM_ROWID
                + " INTEGER PRIMARY KEY AUTOINCREMENT " + KEY_TYPE_PATIENT
                + " TEXT" + KEY_OCCUPIED + " TEXT NOT NULL" + KEY_ROOM_NUMBER
                + " TEXT NOT NULL);");
    } // onCreate

    // upgrade existing database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + NURSE_TABLE);
        db.execSQL("DROP TABLE IF EXISTS " + ROOM_TABLE);
        onCreate(db);
    }

} // DbHelper class

public DbCommunicator(Context c) {
    dbContext = c;
}

public void close() {
    databaseHelper.close();
}

public DbCommunicator open() throws SQLException {
    databaseHelper = new DbHelper(dbContext);
    sqldb = databaseHelper.getWritableDatabase();
    return this;
}

public long createEntry(String nurseLname, String nurseFname,
        String nurseEmail, String priPhone, String secPhone, String nurseFTE) {
    // TODO Auto-generated method stub
    ContentValues cvCreate = new ContentValues();
    cvCreate.put(KEY_LNAME, nurseLname);
    cvCreate.put(KEY_FNAME, nurseFname);
    cvCreate.put(KEY_EMAIL, nurseEmail);
    cvCreate.put(KEY_PHONE_PRIMARY, priPhone);
    cvCreate.put(KEY_PHONE_SECONDARY, secPhone);
    cvCreate.put(KEY_FTE, nurseFTE);

    return sqldb.insert(NURSE_TABLE, null, cvCreate);

}

public String getNurseData() {
    // TODO Auto-generated method stub
    String[] columns = new String[] { KEY_NURSE_ROWID, KEY_LNAME, KEY_FNAME, 
            KEY_EMAIL, KEY_PHONE_PRIMARY, KEY_PHONE_SECONDARY };
    Cursor c = sqldb.query(NURSE_TABLE, columns, null, null, null,
            null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_NURSE_ROWID);
    int iLname = c.getColumnIndex(KEY_LNAME);
    int iFname = c.getColumnIndex(KEY_FNAME);
    int iEmail = c.getColumnIndex(KEY_EMAIL);
    int iPriPhone = c.getColumnIndex(KEY_PHONE_PRIMARY);
    int iSecPhone = c.getColumnIndex(KEY_PHONE_SECONDARY);
    int iDutyStatus = c.getColumnIndex(KEY_DUTY_STATUS);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        result = result + " " + c.getString(iRow) + " "
                + c.getString(iLname) + " "
                + c.getString(iFname) + " "
                + c.getString(iPriPhone) + " " + c.getString(iSecPhone) + " "
                + c.getString(iEmail) + " " + c.getString(iDutyStatus) + "\n";
    }
    c.deactivate();
    c.close();
    return result;
}

}// DbCommunicator class 
```

这`NursingAssignments`是尝试从`getNurseData`方法中填充 TextView 的类：

```
package com.deadEddie.staffingmanagement;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class NursingAssignments extends Activity implements OnClickListener
{
Button addNurse;
Button removeNurse;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.nurse_assignments);
    displayNursingData();

    // set variable values and OnClickListeners
    addNurse = (Button) findViewById(R.id.btnAddToRoster);
    removeNurse = (Button) findViewById(R.id.btnRemoveFromRoster);
    addNurse.setOnClickListener(this);
    removeNurse.setOnClickListener(this);
}

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch (arg0.getId())
    {
    case R.id.btnAddToRoster:
        Intent add = new Intent("com.deadEddie.staffingmanagement.ADDNURSETOROSTER");
        startActivity(add);
        break;

    case R.id.btnRemoveFromRoster:  
        break;
    }
}

public void displayNursingData()
{
    TextView nurseRoster = (TextView) findViewById(R.id.tvSQLInfo);
    DbCommunicator info = new DbCommunicator(this);
    info.open();
    String data = info.getNurseData();
    info.close();
    nurseRoster.setText(data.toString());
}

} 
```

这是`AddNurseToRoster`类，它试图添加一个条目并清除 EditText 控件：

```
package com.deadEddie.staffingmanagement;

import android.app.Activity;
import android.app.Dialog;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class AddNurseToRoster extends Activity implements OnClickListener {
Button add;
Button cancel;
EditText lastName;
EditText firstName;
EditText eMail;
EditText primaryPhone;
EditText secondaryPhone;
EditText fte;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.add_nurse_to_roster);
    setControlValues();
}

private void setControlValues() {
    add = (Button) findViewById(R.id.btnAdd);
    cancel = (Button) findViewById(R.id.btnCancel);
    lastName = (EditText) findViewById(R.id.etFname);
    eMail = (EditText) findViewById(R.id.etEmail);
    primaryPhone = (EditText) findViewById(R.id.etPrimaryPhone);
    secondaryPhone = (EditText) findViewById(R.id.etSecondaryPhone);
    fte = (EditText) findViewById(R.id.etFTE);

} // setVariableValues

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.btnAdd:
        try {
            String nurseLname = lastName.getText().toString();
            String nurseFname = firstName.getText().toString();
            String nurseEmail = eMail.getText().toString();
            String priPhone = primaryPhone.getText().toString();
            String secPhone = secondaryPhone.getText().toString();
            String nurseFTE = fte.getText().toString();
            DbCommunicator database = new DbCommunicator(this);
            database.open();
            database.createEntry(nurseLname, nurseFname, nurseEmail,
                    priPhone, secPhone, nurseFTE);
            database.close();
            lastName.setText("");
            firstName.setText("");
            eMail.setText("");
            primaryPhone.setText("");
            secondaryPhone.setText("");
            fte.setText("");

        } catch (Exception e) {
            String error = e.toString();
            Dialog d = new Dialog(this);
            d.setTitle("An Error Has Occurred");
            TextView tv = new TextView(this);
            tv.setText(error);
            d.setContentView(tv);
            d.show();
        }
        break;

    case R.id.btnCancel:
        break;
    }
} // onClickView
} 
```

我收到了这个 Logcat 错误，但我不确定如何修复它。

```
08-23 14:31:25.156: E/AndroidRuntime(577): ERROR: thread attach failed
08-23 14:31:32.545: E/Database(583): Failure 1 (AUTOINCREMENT is only allowed on an INTEGER PRIMARY KEY) on 0x136ea8 when preparing 'CREATE TABLE Nurse_Table (_idINTEGER PRIMARY KEY AUTOINCREMENT, _lNameTEXT NOT NULL,_fNameTEXT NOT NULL_eMailTEXT NOT NULL,_priPhoneTEXT NOT NULL,_secPhoneTEXT,Off DutyTEXT NOT NULL);'.
08-23 14:31:32.555: E/AndroidRuntime(583): Uncaught handler: thread main exiting due to uncaught exception
08-23 14:31:32.565: E/AndroidRuntime(583): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.deadEddie.staffingmanagement/com.deadEddie.staffingmanagement.NursingAssignments}: android.database.sqlite.SQLiteException: AUTOINCREMENT is only allowed on an INTEGER PRIMARY KEY: CREATE TABLE Nurse_Table (_idINTEGER PRIMARY KEY AUTOINCREMENT, _lNameTEXT NOT NULL,_fNameTEXT NOT NULL_eMailTEXT NOT NULL,_priPhoneTEXT NOT NULL,_secPhoneTEXT,Off DutyTEXT NOT NULL);
08-23 14:31:32.565: E/AndroidRuntime(583):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
08-23 14:31:32.565: E/AndroidRuntime(583):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
08-23 14:31:32.565: E/AndroidRuntime(583):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
08-23 14:31:32.565: E/AndroidRuntime(583):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
08-23 14:31:32.565: E/AndroidRuntime(583):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-23 14:31:32.565: E/AndroidRuntime(583):  at android.os.Looper.loop(Looper.java:123)
08-23 14:31:32.565: E/AndroidRuntime(583):  at android.app.ActivityThread.main(ActivityThread.java:4363)
08-23 14:31:32.565: E/AndroidRuntime(583):  at java.lang.reflect.Method.invokeNative(Native Method)
08-23 14:31:32.565: E/AndroidRuntime(583):  at java.lang.reflect.Method.invoke(Method.java:521)
08-23 14:31:32.565: E/AndroidRuntime(583):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-23 14:31:32.565: E/AndroidRuntime(583):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-23 14:31:32.565: E/AndroidRuntime(583):  at dalvik.system.NativeStart.main(Native Method)
08-23 14:31:32.565: E/AndroidRuntime(583): Caused by: android.database.sqlite.SQLiteException: AUTOINCREMENT is only allowed on an INTEGER PRIMARY KEY: CREATE TABLE Nurse_Table (_idINTEGER PRIMARY KEY AUTOINCREMENT, _lNameTEXT NOT NULL,_fNameTEXT NOT NULL_eMailTEXT NOT NULL,_priPhoneTEXT NOT NULL,_secPhoneTEXT,Off DutyTEXT NOT NULL);
08-23 14:31:32.565: E/AndroidRuntime(583):  at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
08-23 14:31:32.565: E/AndroidRuntime(583):  at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1610)
08-23 14:31:32.565: E/AndroidRuntime(583):  at com.deadEddie.staffingmanagement.DbCommunicator$DbHelper.onCreate(DbCommunicator.java:52)
08-23 14:31:32.565: E/AndroidRuntime(583):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:106)
08-23 14:31:32.565: E/AndroidRuntime(583):  at com.deadEddie.staffingmanagement.DbCommunicator.open(DbCommunicator.java:87)
08-23 14:31:32.565: E/AndroidRuntime(583):  at com.deadEddie.staffingmanagement.NursingAssignments.displayNursingData(NursingAssignments.java:52)
08-23 14:31:32.565: E/AndroidRuntime(583):  at com.deadEddie.staffingmanagement.NursingAssignments.onCreate(NursingAssignments.java:21)
08-23 14:31:32.565: E/AndroidRuntime(583):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-23 14:31:32.565: E/AndroidRuntime(583):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
08-23 14:31:32.565: E/AndroidRuntime(583):  ... 11 more
08-23 14:31:32.575: E/dalvikvm(583): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

DDMS 输出：

```
[2012-08-23 09:04:17 - StaffingManagement] New emulator found: emulator-5556
[2012-08-23 09:04:17 - StaffingManagement] Waiting for HOME ('android.process.acore') to be launched...
[2012-08-23 09:05:14 - StaffingManagement] HOME is up on device 'emulator-5556'
[2012-08-23 09:05:14 - StaffingManagement] Uploading StaffingManagement.apk onto device 'emulator-5556'
[2012-08-23 09:05:14 - StaffingManagement] Installing StaffingManagement.apk...
[2012-08-23 09:05:24 - StaffingManagement] Success!
[2012-08-23 09:05:24 - StaffingManagement] Starting activity com.deadEddie.staffingmanagement.MainActivity on device emulator-5556
[2012-08-23 09:05:26 - StaffingManagement] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.deadEddie.staffingmanagement/.MainActivity } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:47:41.260

首先......你在create语句中的列应该用“，”分隔

```
db.execSQL("CREATE TABLE " + NURSE_TABLE + " (" + KEY_NURSE_ROWID + "INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_LNAME + "TEXT NOT NULL," + KEY_FNAME + "TEXT NOT NULL," + KEY_EMAIL + "TEXT NOT NULL," + KEY_PHONE_PRIMARY + "TEXT NOT NULL,"                 + KEY_PHONE_SECONDARY + "TEXT," + KEY_DUTY_STATUS                 + "TEXT NOT NULL);");

db.execSQL("CREATE TABLE " + ROOM_TABLE + " (" + KEY_ROOM_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_TYPE_PATIENT+ " TEXT," + KEY_OCCUPIED + " TEXT NOT NULL," + KEY_ROOM_NUMBER + " TEXT NOT NULL);"); 
```

我不认为这个 create 语句没有它会起作用......

# linux - Nagios - 连接被拒绝和套接字超时

> ID：12088830
> 
> 赞同：3
> 
> 时间：2012-08-23T09:40:19.750
> 
> 标签：linux, nagios

我需要监控 Windows 服务（如 CPU 负载、内存使用等），所以我安装了 Nagios 监控工具。安装完成并安装了“check_nt”插件。到目前为止，没有错误，但是在使用代理 NSClient++ 执行脚本时，“主机拒绝连接”错误仍然存​​在。

```
./check_nt -H 10.112.32.78 -p 1248 -v MEMUSE -w 80 -c 90
              Connection refused by host

./check_nt -H 10.112.32.78 -p 1248 -v MEMUSE -w 80 -c 90
              Socket timeout after 10 seconds 
```

* * *

我已经验证了 nagios 工作正常，如下所示。

```
/usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg

Nagios Core 3.4.1
Copyright (c) 2009-2011 Nagios Core Development Team and Community Contributors
Copyright (c) 1999-2009 Ethan Galstad
Last Modified: 05-11-2012
License: GPL

Website: http://www.nagios.org
Reading configuration data...
   Read main config file okay...
Processing object config file '/usr/local/nagios/etc/objects/commands.cfg'...
Processing object config file '/usr/local/nagios/etc/objects/contacts.cfg'...
Processing object config file '/usr/local/nagios/etc/objects/timeperiods.cfg'...
Processing object config file '/usr/local/nagios/etc/objects/templates.cfg'...
Processing object config file '/usr/local/nagios/etc/objects/localhost.cfg'...
   Read object config files okay...

Running pre-flight check on configuration data...

Checking services...
    Checked 8 services.
Checking hosts...
    Checked 1 hosts.
Checking host groups...
    Checked 1 host groups.
Checking service groups...
    Checked 0 service groups.
Checking contacts...
    Checked 1 contacts.
Checking contact groups...
    Checked 1 contact groups.
Checking service escalations...
    Checked 0 service escalations.
Checking service dependencies...
    Checked 0 service dependencies.
Checking host escalations...
    Checked 0 host escalations.
Checking host dependencies...
    Checked 0 host dependencies.
Checking commands...
    Checked 24 commands.
Checking time periods...
    Checked 5 time periods.
Checking for circular paths between hosts...
Checking for circular host and service dependencies...
Checking global event handlers...
Checking obsessive compulsive processor commands...
Checking misc settings...

Total Warnings: 0
Total Errors:   0

Things look okay - No serious problems were detected during the pre-flight check 
```

M nagios 新手，在此先感谢 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T18:17:24.840

连接被防火墙阻止，或者您的 Nagios 服务器不在“允许的主机”字段的 nsc.ini 文件中。确保在您的 Windows 防火墙上打开该端口，以及在您的 Nagios 服务器和客户端之间打开任何其他网络过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T13:18:59.540

通过在 Windows cmd 中发出以下命令，确保您要监视的 Windows 服务器/主机正在侦听 NRPE 的 5666 端口和 NT 的 12489 端口：

```
netstat -aon | findstr 5666
netstat -aon | findstr 12489 
```

可能是 Windows 防火墙也拒绝了这些端口上的连接，请看一下。

还将 Nagios 监控服务器的 IP 地址添加到位于此处的 NSClient++ 配置文件的 allowed_hosts 中：

```
C:\Program Files\NSClient++ 
```

此外，在安装 NSClient++ 期间，还有一个 check_nt 复选框，请确保在安装期间也检查了该复选框。

从 NSClient++ 编辑配置文件后，请确保重新启动 NSClient++ 服务。（在 services.msc 或 Start>Programs>NSClient++>Stop NSClient++ 然后 Start>Programs>NSClient++>Start NSClient++）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T18:24:39.317

[http://pc-freak.net/blog/monitoring-windows-hosts-with-nagios-on-debian-gnulinux/](http://pc-freak.net/blog/monitoring-windows-hosts-with-nagios-on-debian-gnulinux/)

根据您的 linux 风格，这些命令很容易在 Google 上搜索到。

安装必要的 nagios debian 软件包

apt-get install nagios-images nagios-nrpe-plugin nagios-nrpe-server nagios-plugins nagios-plugins-basic nagios-plugins-standard nagios3 nagios3-cgi nagios3-common nagios3-core

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-11T16:21:36.023

我刚刚在 centos 7 上遇到了这个问题。经过几个小时的搜索和与同一网络上的其他服务器比较后，我准备放弃了

我从字面上比较了两者之间的nrpe.cfg，肯定有允许主机的IP，并且所有插件都是rsync，权限都是一样的。我遇到的一个问题是远程登录到 nrpe 端口 5666

telnet working_server_ip 5666 有效

telnet not_working_server_ip 5666 连接被拒绝。

花了我一段时间，但我不知何故遇到了两个操作系统，一个是 centos6，另一个是 centos7。

如果你在 centos7 上安装 nrpe，请确保禁用防火墙，我不是在谈论 SELinux

systemctl 停止防火墙

然后再试一次

# postgresql - 用于 postgresql 的 cas config.yml

> ID：12088831
> 
> 赞同：0
> 
> 时间：2012-08-23T09:40:21.613
> 
> 标签：postgresql, cas, rubycas

当我使用 postgresql 配置 CAS 时，服务器无法启动

```
database:
  adapter: postgresql
  database: MyDB_development
  username: xxxxxxxxx
  password: xxxxxxxxx
  host: localhost

authenticator:
  class: CASServer::Authenticators::SQL
  database:
    adapter: postgresql
    database: MyDB_development
    username: xxxxxxxxx
    password: xxxxxxxxx
    host: localhost
  user_table: users
  username_column: username
  password_column: password 
```

我错过了什么吗？

**更新**

我正在使用`ubuntu 12.04`

我明白了：

```
>>> Redirecting RubyCAS-Server log to /var/log/casserver.log

>>> Running migrations to make sure your database schema is up to date...
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- pg (LoadError)
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from /var/lib/gems/1.8/gems/activesupport-3.0.17/lib/active_support/dependencies.rb:242:in `require'
        from /var/lib/gems/1.8/gems/activesupport-3.0.17/lib/active_support/dependencies.rb:225:in `load_dependency'
        from /var/lib/gems/1.8/gems/activesupport-3.0.17/lib/active_support/dependencies.rb:597:in `new_constants_in'
        from /var/lib/gems/1.8/gems/activesupport-3.0.17/lib/active_support/dependencies.rb:225:in `load_dependency'
        from /var/lib/gems/1.8/gems/activesupport-3.0.17/lib/active_support/dependencies.rb:242:in `require'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/connection_adapters/postgresql_adapter.rb:9:in `postgresql_connection'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/connection_adapters/abstract/connection_pool.rb:229:in `send'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/connection_adapters/abstract/connection_pool.rb:229:in `new_connection'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/connection_adapters/abstract/connection_pool.rb:237:in `checkout_new_connection'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/connection_adapters/abstract/connection_pool.rb:191:in `checkout'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/connection_adapters/abstract/connection_pool.rb:187:in `loop'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/connection_adapters/abstract/connection_pool.rb:187:in `checkout'
        from /usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/connection_adapters/abstract/connection_pool.rb:186:in `checkout'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/connection_adapters/abstract/connection_pool.rb:94:in `connection'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/connection_adapters/abstract/connection_pool.rb:317:in `retrieve_connection'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/connection_adapters/abstract/connection_specification.rb:97:in `retrieve_connection'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/connection_adapters/abstract/connection_specification.rb:89:in `connection'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/migration.rb:488:in `initialize'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/migration.rb:435:in `new'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/migration.rb:435:in `up'
        from /var/lib/gems/1.8/gems/activerecord-3.0.17/lib/active_record/migration.rb:417:in `migrate'
        from /var/lib/gems/1.8/gems/rubycas-server-1.1.1/bin/../lib/casserver/server.rb:276:in `init_database!'
        from /var/lib/gems/1.8/gems/rubycas-server-1.1.1/bin/../lib/casserver/server.rb:287
        from /var/lib/gems/1.8/gems/sinatra-1.3.3/lib/sinatra/base.rb:1328:in `configure'
        from /var/lib/gems/1.8/gems/rubycas-server-1.1.1/bin/../lib/casserver/server.rb:284
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from /var/lib/gems/1.8/gems/rubycas-server-1.1.1/bin/../lib/casserver.rb:10
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from /var/lib/gems/1.8/gems/rubycas-server-1.1.1/bin/rubycas-server:28
        from /usr/local/bin/rubycas-server:19:in `load'
        from /usr/local/bin/rubycas-server:19 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:15:36.390

从错误消息来看，您似乎忘记安装`pg`gem，因此在尝试访问 DB 连接器接口时启动失败。

# extjs4.1 - 如何在 ext4.1 中隐藏选项卡？

> ID：12088834
> 
> 赞同：2
> 
> 时间：2012-08-23T09:40:28.040
> 
> 标签：extjs4.1

如何动态隐藏选项卡面板的选项卡？

我正在使用该方法

```
 tabpanel.items.items[0].tab.setVisible(false); 
```

但是使用上述方法，它正在破坏该选项卡中的所有项目。

如何使用所有以前的项目隐藏/可见该选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:18:13.253

I used the following code and it works:

```
// get tab panel
var tabPanel = wnd.down('#myTabPanel');

if (showTab1) {
    tabPanel.down('#myTab1').show();
    tabPanel.down('#myTab2').hide();
} else {
    tabPanel.down('#myTab1').hide();
    tabPanel.down('#myTab2').show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T17:06:26.723

配置你`tabpanel`的：

```
autoDestroy: false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T12:59:35.053

您是否在选项卡项本身上尝试了 autoDestroy: false ？

# php - 相当于 PHP 的“内爆”

> ID：12088839
> 
> 赞同：34
> 
> 时间：2012-08-23T09:40:47.253
> 
> 标签：php, go, implode

什么是 PHP 的“内[爆](http://php.net/manual/en/function.implode.php)”的 Go 等价物？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-23T09:44:46.527

在标准库中：`strings.Join`

```
func Join(a []string, sep string) string 
```

[http://golang.org/pkg/strings/#Join](http://golang.org/pkg/strings/#Join)

干杯!

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-23T09:45:29.367

[加入](http://golang.org/pkg/strings/#Join)*字符串*库。它要求输入数组只能是字符串（因为 Go 是强类型的）。

这是手册中的一个示例：

```
s := []string{"foo", "bar", "baz"}
fmt.Println(strings.Join(s, ", ")) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-23T09:46:43.507

```
s := []string{"this", "is", "a", "joined", "string\n"};
strings.Join(s, " "); 
```

这对你有帮助吗？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-05T14:05:08.177

我记得，PHP 没有严格的类型。使用这样的东西可能不是最坏的主意。

```
package main

import (
    "fmt"
    "strings"
)

func Implode(glue string, args ...interface{}) string {
    data := make([]string, len(args))
    for i, s := range args {
        data[i] = fmt.Sprint(s)
    }
    return strings.Join(data, glue)
}

type S struct {
    z float64
}

func main() {

    v := Implode(", ", 1, "2", "0.2", .1, S{});
    fmt.Println(v)
} 
```

# php - 如何使用 array_combine 函数查找扩展名为 .txt 的文件并将它们放入蛋糕 php 表单选择输入元素中？

> ID：12088845
> 
> 赞同：-2
> 
> 时间：2012-08-23T09:41:09.490
> 
> 标签：php, cakephp

我想知道如何在包含 .txt 扩展名的目录中查找所有文件，然后使用结果创建一个 array_combine。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:04:38.340

如果要获取下拉选项的文本，则应使数组索引与关联值相同：

```
$files = glob($dir."/*.[tT][xX][tT]");
$correctFiles = array_combine($files,$files);
Choose text file: <?php echo $this->Form->select('textDrop', array('options' => $correctFiles, 'style' => 'width: 150px;', 'id' => 'textDrop')); ?> 
```

# c# - FindControl 与动态控件

> ID：12088846
> 
> 赞同：0
> 
> 时间：2012-08-23T09:41:20.890
> 
> 标签：c#, asp.net, web-applications, findcontrol

我想找到动态控件。示例： - 在我的 aspx 中：

```
<table id='vertragstypPVN_<%# Eval("Vertragstyp") %>' style="display: none" runat="server"> 
```

将生成表 ID，如：vertragstypPVN_Test1、vertragstypPVN_Test2 等。

*   在我的 aspx.cs 中，我想查找当前正在使用的表 id，但是方法 FindControl(string id) 需要静态字符串 id，我不知道如何处理动态的。任何的想法？。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:43:49.673

您必须将 runat="server" 添加到您的控件并修复您的控件的 UniqueId 才能找到控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:19:24.847

由于您自己生成动态表，因此您已经拥有了所有使用过的名称的列表。使用 Forms Collection 循环遍历所有表格并进行比较以找到正确的表格。

# java - 使用枚举静态变量创建了多少个副本

> ID：12088847
> 
> 赞同：0
> 
> 时间：2012-08-23T09:41:21.410
> 
> 标签：java, enums

我有枚举类

```
public enum CommandEnum {       

    ADD_ITEM {
        {
            this.command = new AddItemCommand();
        }
    };

    protected Command command;

    public Command getCurrentCommand() {
        return command;
    }
} 
```

以及试图获取特定命令的类

```
CommandEnum currentState = CommandEnum.valueOf(action.toUpperCase());
current = currentState.getCurrentCommand(); 
```

`AddItemCommand`例如，如果我调用此命令 4 次，则创建了多少类副本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:16:49.107

Enum 常量是 public static final 的，所以每次你只会得到一个对象。自己很容易发现它。

# c# - 以编程方式翻阅 Metro FlipView

> ID：12088848
> 
> 赞同：2
> 
> 时间：2012-08-23T09:41:26.073
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime

我希望 FlipView 在计时器上旋转其项目。计时器很简单，但是有没有办法让 FlipView 在代码中显示下一个项目（然后循环）？

这个问题的答案[为什么 FlipView 忽略 SelectedItem](https://stackoverflow.com/questions/10441408/why-does-flipview-ignore-selecteditem)似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:49:14.027

只需跳过 SelectedItem 属性并改用 SelectedIndex 即可。将其设置为 0 开始，然后将其增加一，直到达到等于列表中项目数减一的值，然后返回零。我刚刚对此进行了测试，它适用于在 XAML 中声明或绑定到 ItemsSource 属性的翻转视图项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:55:40.447

如果您通知 UI 属性已更改，它将起作用。您的 ViewModel 必须实现 INotifyPropertyChanged 并且该属性需要触发 PropertyChanged 事件

```
public class ViewModel : INotifyPropertyChanged
{
    private object _selectedItem;

    public object SelectedItem
    {
        get { return _selectedItem; }
        set 
        { 
            _selectedItem = value; 
            OnPropertyChanged("SelectedItem"); 
        }
    }
} 
```

您还可以使用示例应用程序附带的 BindableBase 类

```
public class ViewModel : BindableBase
{
    private object _selectedItem;

    public object SelectedItem
    {
        get { return this._selectedItem; }
        set { this.SetProperty(ref this._selectedItem, value); }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-08T08:33:39.047

这在某些情况下可能会有所帮助

```
flipView.SelectedIndex = -1;
flipView.SelectedIndex = desiredIndex; 
```

或者

```
flipView.SelectedItem = null;
flipView.SelectedItem = flipViewItem; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:57:06.943

出于某种原因，我需要为这些 FlipView 设置 SelectedIndex 和 SelectedItem。奇怪的行为：/（也许这是从 RP 到 RTM 的变化——我在 RTM 上。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-12T13:31:51.787

在 Windows 10 VS2017 中对于以下 XML 代码：

```
<FlipView Grid.Row="1" x:Name="fvMainControls">
    <FlipViewItem>
        <CheckBox Content="My Overlay" Height="21" Canvas.Left="191" Canvas.Top="164" Width="131"/>
    </FlipViewItem>
    <FlipViewItem>
        <Rectangle HorizontalAlignment="Left" Height="387" Margin="54,140,0,0" Stroke="Black" VerticalAlignment="Top" Width="206" Fill="#FF6A1717" FocusVisualPrimaryBrush="#FFA46767"/>
    </FlipViewItem>
</FlipView> 
```

这有效：

```
fvMainControls.SelectedIndex = 0          
fvMainControls.SelectedIndex = 1 
```

和

```
fvMainControls.SelectedItem = fvMainControls.Items(0)
fvMainControls.SelectedIndex = fvMainControls.Items(1) 
```

作品。拉维

# continuous-integration - CCNet vs Jenkins - 多分支的单点配置

> ID：12088853
> 
> 赞同：7
> 
> 时间：2012-08-23T09:41:38.057
> 
> 标签：continuous-integration, jenkins, build-process, cruisecontrol.net

我最近听到了很多关于 jenkins 的消息，它的 UI 很酷，易于设置，还有很多插件等。目前我正在使用 CCNet 进行 CI。我考虑迁移到 Jenkins 来看看它很酷的功能。

很快我意识到 Jenkins 缺少最重要的特性——单点配置——在一个地方定义所有常见的配置并将它们重用于多个项目。后来我发现 Jenkins 中有几个可用的选项，比如从现有项目中复制或使用 Jenkins Web API。

“从现有项目复制”的问题是，如果我在该项目中进行任何更改，它不会自动反映在从该项目复制的所有项目中。

有环境变量，但它们就像全局变量。

相反，CCNet 具有非常酷的“[配置预处理器](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Configuration%20Preprocessor)”功能，我相信这是 ccnet 的核心优势。

我的结论是 Jenkins 易于设置并且在您的项目很少的情况下很有用。随着项目数量的增加，维护 Jenkins 变得非常困难。第一次设置 CCNet 很困难，但一旦设置完成，任何人添加一个新项目都需要很少的努力。

所以我最后的想法是我不会迁移到詹金斯。

请分享您对此的看法，如果人们在迁移时遇到类似问题？我也想知道我的分析中是否遗漏了任何重要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:22:20.167

你应该试试[Templates Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Template+Project+Plugin)。评论不是很好，但它似乎正是您正在寻找的。

坦率地说，如果您对 CC.net 感到满意，我认为没有什么大的理由要搬家。如果您不满意，了解更多关于缺少的内容可能会让我们引导您正确的方式。

# java - 运行时出现 Http 错误代码 302

> ID：12088856
> 
> 赞同：0
> 
> 时间：2012-08-23T09:41:41.697
> 
> 标签：java, php, json

我使用这个 php 代码为某些任务编写 java 代码

```
$data_array =  array(
            'mail'=>'****.com',
            'profile_first_name' => 'Sidath'
            );
$json_data = json_encode($data_array);
$request = new HTTP_Request2('**************');
$request->setMethod(HTTP_Request2::METHOD_POST)
   ->addPostParameter(array(
        'data' => $json_data,   
    )
); 
```

这是我写的java代码

```
URL url = new URL("*******.xml");
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setDoOutput(true);
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Content-Type", "application/json;charset=UTF-8\"");

            String input = "{\"mail\":\"****@gmail.com\",\"profile_first_name\" : \"jjsjds\"}";

            OutputStream os = conn.getOutputStream();
            os.write(input.getBytes());
            os.flush(); 
```

运行此 java 代码后，它会给出 http 错误 302。但 php 代码工作正常。为什么这个 java 代码返回 302

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:11:59.483

您是否检查过您是否已通过身份验证？302 是重定向。它可能是登录页面。

# java - 任意精度的精确含义是什么？

> ID：12088857
> 
> 赞同：8
> 
> 时间：2012-08-23T09:41:45.637
> 
> 标签：java, biginteger, arbitrary-precision

对于某些人来说，这可能是一个非常简单的问题，但我想知道出现在[BigInteger的 JavaDoc 第一行中的](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/math/BigInteger.java#BigInteger.%3Cinit%3E%28long%29)*任意精度*的含义：

> 不可变*的任意精度*整数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T09:47:28.920

这意味着`BigInteger`使用尽可能多的空间来保存整个价值。

举`int`个例子。它具有固定数量的可用位。有了它，您可以保存`-2,147,483,648`和`2,147,483,647`（包括）之间的值。所以它是*固定精度*类型而不是*任意精度*类型。它不能存储超出此范围的值。

使用`BigInteger`，您就不会有这个问题，因为一旦分配的位不足以存储确切的值，`BigInteger`就会添加一些位，以便它可以再次处理该值。

*任意*实际上并不是真的，因为由于只有有限数量的可用内存，所以存在限制。该限制不是由`BigInteger`类给出的，而是由环境（VM/硬件/OS）给出的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-23T09:45:18.897

术语*固定精度*意味着内部表示中仅保留一定数量的有效数字。这意味着您将无法用大于某个阈值的幅度来表示*每个整数。*

对于*任意精度*的整数，整数可以根据需要（“任意大”）任意大，并且库会将所有数字保持在最低有效单位。（这显然受到计算机内存量的限制。）

# jquery - 在视图中触发动画

> ID：12088858
> 
> 赞同：0
> 
> 时间：2012-08-23T09:41:58.210
> 
> 标签：jquery, triggers, scroll

我正在构建一个网页，您可以在其中横向滚动或使用“新页面”按钮（注意；当您使用按钮时，您会快速滑过以前的页面，它不会加载新页面）。

当指定页面出现时，它应该会触发我用 flash 制作的动画。我通过 swiffy 对其进行了转换，并且可以正常工作。触发动画效果很好，但问题是：例如，当您按下按钮将引导您进入带有动画的页面之后的页面时，“页面”仍然会触发，因为它曾经在视图中。

现在我正在尝试使用 timeOut 来延迟动画，这样当你滚动它时，它不应该触发，除非你在页面上停留超过 X 秒。

这是我当前的脚本：

```
 var $AnimatieAan = false;
    var $Zichtbaar = false;
    $(window).scroll(function(){
        $e = $('#searchEngine');

        var visible = $(window).scrollLeft()+window.innerWidth>$e.offset().left&&$(window).scrollLeft()<$e.offset().left+$e.width();

            if(visible)
            {
                $Zichtbaar = true;
                var Timer = setTimeout(function()
                {
                    console.log('timerstart');

                    if($Zichtbaar)
                    {
                        //$Zichtbaar = true;
                        console.log($Zichtbaar)
                        $AnimatieAan = true;
                        $Zichtbaar = false;
                        if($AnimatieAan)
                        {
                            var stage = new swiffy.Stage(document.getElementById('searchEngine'), mexaleSearch);
                            stage.start();
                            console.log(visible);
                            $AnimatieAan = false;
                        }
                        else 
                        {
                            clearTimeout(Timer);

                            console.log('clearTimeout');
                            $Zichtbaar = false;
                            $AnimatieAan = false;
                            stage.stop();
                        }
                    }                       
                } , 2000 );
            } 
```

关于滚动如何工作的说明，工作版本在 www.mexale.com

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:20:16.883

这里有几个问题。

1.  因为`Timer`是处理程序中的局部变量，所以`scroll`每次滚动事件发生时，您都会得到一个全新的、完全不相关的变量。这意味着`Timer`不会记住从一个事件到下一个事件的值。要解决此问题，请在处理函数`var Timer`的范围之外创建一个。`scroll`

2.  如果结果是假的，`scroll`处理程序不会做任何事情。`visible`当用户滚动以使动画不可见时，您希望发生两件事：（a）应该取消超时；(b) 快速动画应该停止。相反，什么也没有发生，因为该`if (visible)`块没有`else`块。

3.  在代码显示的地方`if($AnimatieAan)`，变量`$AnimatieAan`始终为真。（我们之前只是将它设置为 true 两行。）所以`else`那里的块不能运行；不可能。

您在该`else`块中的代码看起来是正确的，但它肯定附加到了错误的`if`.

# jquery - 链接、输入和按钮样式的一致性

> ID：12088866
> 
> 赞同：0
> 
> 时间：2012-08-23T09:42:23.137
> 
> 标签：jquery, html, css, input, hyperlink

我想知道按钮、输入和链接之间的一致样式存在哪些资源。我知道[jQuery UI Button](http://jqueryui.com/demos/button/)，但这似乎是一个重量级的解决方案。有什么可以帮助我的吗？教程，生成器，插件等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:59:30.667

您可以查看[Foundation 3](http://foundation.zurb.com/docs/)样式

# java - 这个java类是不可变的吗？

> ID：12088869
> 
> 赞同：3
> 
> 时间：2012-08-23T09:42:29.877
> 
> 标签：java, immutability

我正在实现一个不可变类，其结构如下：

```
public final class A{
    private final B bOb;
    public A(){
        bOb = new B();
    }
    public A(A a){
        bOb = new B(a.bOb);
    }
    public A addData(Type data){ // Type - Integer,String,char,etc.
        A newA = new A(this); //making a copy of the object that is calling addData method
        newA.bOb.add(data);
        return newA;
    }
} 
```

这个实现正确吗？假设对象 bOb 是一个列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:48:48.243

您的实施：

```
public A addData(int data){
    A newA = new A(this);
    newA.bOb.add(data); // <--- bOb is mutable
    return newA;
} 
```

一个 bOb 正在被更改，因此如果您公开对 bOb 的任何直接访问，它可以被更改。（因为你没有暴露任何关于 bOb 的信息，所以这个场景没有意义。）

提示：

*   `Collections.emptyList()`返回一个不可变的列表。
*   `Collections.unmodifiableList()`返回给定列表的不可变浅拷贝。

考虑这个“更安全”的实现：

```
import java.util.*;

public final class A<T>{ //T must also be immutable (String, integer, char, ...)
    private final List<T> list;
    public A(){
        this.list = Collections.emptyList();
    }
    public A(List<T> list){
        this.list = Collections.unmodifiableList(list);
    }
    public A<T> addData(T data){
        List<T> shallowCopy = new ArrayList<T>(this.list);
        shallowCopy.add(data);
        return new A<T>(shallowCopy);
    }
    public List<T> getItems() {
        return this.list;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T09:49:35.080

它不是完全不可变的，因为 B 本身似乎是可变的（通过 add 方法）并且 A 包含 B 的实例。

但是，我认为它实际上是*不可变*的（即，从外部观察者的角度来看，它的行为就好像它是不可变的），前提是以下所有条件都是正确的：

*   `new B(B)`执行完整的深层副本`B`（如果不是，则`addData`可能会改变原始内容中的某些内容`B`）
*   您没有`bOb`通过任何其他方式泄露对
*   添加的元素本身是不可变的

您可以从有效地不可变中获得不可变性的大部分好处，所以我认为这种设计是可以的，只要`Type`它是不可变的 - 在构造过程中改变一个对象是可以的，前提是在您将引用传递给其他人之后它永远不会改变。一个很好的例子是`java.lang.String`- 在内部它包含一个可变数组，该数组在构造 String 时写入，但在那之后从未更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T09:47:05.990

如果`bOb`是一个列表并且它包含可变内容，那么不是。但似乎您仅用`int`作内容，这解决了问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T09:47:42.933

在这种形式下，是的，你的类是不可变的。

但是，这是一个微不足道的示例，实际上对任何事情都没有用，*因为您无法访问任何内部数据*。您需要注意的是不要让任何引用`bOb`从`A`. 如果添加返回的方法`bOb`，则需要返回 的*副本*，`bOb`以避免意外允许调用者更改 . 的任何内容`A`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T10:22:31.467

这取决于`B(B b)`构造函数的工作方式。如果它是一个复制构造函数，它应该对`b`字段进行深层复制。在这种情况下`A`是不可变的。

相反，如果构造函数只是简单地引用同一个`b`实例，对它的任何更改都会反映在`bOb`属性上，所以`A`类不是不可变的......

# sql - Nhibernate QueryOver 中的嵌套选择

> ID：12088874
> 
> 赞同：2
> 
> 时间：2012-08-23T09:42:53.640
> 
> 标签：sql, nhibernate, hql, queryover

在我搜索之后，我没有发现任何真正有用的东西可以帮助我弄清楚从哪里开始。

到目前为止，我只编写了相当简单的 nHibernate 查询，并且有一个相对复杂的 SQL 查询，我需要在 QueryOver (Icriteria) 中抽出，或者如果证明过于繁琐，则使用 HQL。请在下面找到查询：

```
Select aliasTable1.Id, AliasTable1.Time, 
       AlaisTable2.Version,
       (select top 1 secondAliasTable1.Time
          from Table1 secondAliasTable1
          where aliasTable1.Time < secondAliasTable1.Time
            AND secondAliasTable1.Time < (SELECT Top 1 thirdAliasTable1.Time from Table1 thirdAliasTable1 
                                            where thirdAliasTable1.Name = 'stringValue1'
                                              AND thirdAliasTable1.Id = aliasTable1.Id
                                              AND thirdAliasTable1.Time > aliasTable1.Time
                                            ORDER By thirdAliasTable1.Time)
            AND secondAliasTable1.Name = 'stringValue2'
            AND secondAliasTable1.Id = aliasTable1.Id
            ORDER BY secondAliasTable1.Time) As 'Endtime'
  from Table1 aliasTable1
    INNER JOIN Table2 aliasTable2 on AliasTable2.Id = aliasTable1.table2Id
  where alaisTable1.Name = 'stringValue2'
  ORDER BY alaisTable1.Time 
```

我在转换中遇到了这个查询真的碰壁了，所以我希望至少能得到一个让我继续前进的起点，如果不是一个完整的答案！

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:40:44.570

这将稍微取决于您的映射，但这样的事情应该可以工作：

```
Table1 aliasTable1 = null, secondAliasTable1 = null, thirdAliasTable1 = null;
Table2 aliasTable2 = null;

var result = session.QueryOver<Table1>(() => aliasTable1)
    .Where(p => p.Name == "stringValue1")
    .JoinQueryOver(p => p.Table2, () => aliasTable2)
    .SelectList(list => list
        .Select(() => aliasTable1.Id)
        .Select(() => aliasTable1.Time)
        .Select(() => aliasTable2.Version)
        .SelectSubQuery(
            QueryOver.Of<Table1>(() => secondAliasTable1)
                .Where(() => aliasTable1.Time < secondAliasTable1.Time)
                .WithSubquery.Where(() => secondAliasTable1.Time <
                    QueryOver.Of<Table1>(() => thirdAliasTable1)
                        .Where(() => thirdAliasTable1.Name == "stringValue1")
                        .And(() => thirdAliasTable1.Id == aliasTable1.Id)
                        .And(() => thirdAliasTable1.Time > aliasTable1.Time)
                        .SelectList(inner => inner
                            .Select(() => thirdAliasTable1.Time))                            
                        .OrderBy(() => thirdAliasTable1.Time).Asc()
                        .Take(1)
                        .As<DateTime>())
                .And(() => secondAliasTable1.Name == "stringValue2")
                .And(() => secondAliasTable1.Id == aliasTable1.Id)
                .SelectList(third => third
                    .Select(() => secondAliasTable1.Time))
                .OrderBy(() => secondAliasTable1.Time).Asc()
                .Take(1)))
    .OrderBy(() => aliasTable1.Time).Asc()
    .List<object[]>(); 
```

这会生成如下所示的 SQL：

```
SELECT this_.Id                            as y0_,
       this_.Time                          as y1_,
       aliastable1_.Version                as y2_,
       (SELECT TOP (1 /* @p0 */) this_0_.Time as y0_
        FROM   [Table1] this_0_
        WHERE  this_.Time < this_0_.Time
               and this_0_.Time < (SELECT TOP (1 /* @p1 */) this_0_0_.Time as y0_
                                             FROM   [Table1] this_0_0_
                                             WHERE  this_0_0_.Name = 'stringValue1' /* @p2 */
                                                    and this_0_0_.Id = this_.Id
                                                    and this_0_0_.Time > this_.Time
                                             ORDER  BY this_0_0_.Time asc)
               and this_0_.Name = 'stringValue2' /* @p3 */
               and this_0_.Id = this_.Id
        ORDER  BY this_0_.Time asc) as y3_
FROM   [Table1] this_
       inner join [Table2] aliastable1_
         on this_.Id = aliastable1_.Table1Id
WHERE  this_.Name = 'stringValue1' /* @p4 */
ORDER  BY this_.Time asc 
```

`.List<object[]>()`您也可以投影到您选择的 DTO（使用）`TransformUsing`。如果这看起来势不可挡，我强烈建议将每个分离`QueryOver`到它自己的变量中，然后从主查询中引用它们。

*更新：*如果你想使用`.TransformUsing`，你需要创建一个`null`结果对象并使用`.WithAlias()`：

```
Table1 aliasTable1 = null, secondAliasTable1 = null, thirdAliasTable1 = null;
Table2 aliasTable2 = null;
MyDTO dto = null;

var result = session.QueryOver<Table1>(() => aliasTable1)
    .Where(p => p.Name == "stringValue1")
    .JoinQueryOver(p => p.Table2, () => aliasTable2)
    .SelectList(list => list
        .Select(() => aliasTable1.Id).WithAlias(() => dto.Id)
        .Select(() => aliasTable1.Time).WithAlias(() => dto.Time)
        .Select(() => aliasTable2.Version).WithAlias(() => dto.Version)
        .SelectSubQuery(
            QueryOver.Of<Table1>(() => secondAliasTable1)
                .Where(() => aliasTable1.Time < secondAliasTable1.Time)
                .WithSubquery.Where(() => secondAliasTable1.Time <
                    QueryOver.Of<Table1>(() => thirdAliasTable1)
                        .Where(() => thirdAliasTable1.Name == "stringValue1")
                        .And(() => thirdAliasTable1.Id == aliasTable1.Id)
                        .And(() => thirdAliasTable1.Time > aliasTable1.Time)
                        .SelectList(inner => inner
                            .Select(() => thirdAliasTable1.Time))                            
                        .OrderBy(() => thirdAliasTable1.Time).Asc()
                        .Take(1)
                        .As<DateTime>())
                .And(() => secondAliasTable1.Name == "stringValue2")
                .And(() => secondAliasTable1.Id == aliasTable1.Id)
                .SelectList(third => third
                    .Select(() => secondAliasTable1.Time))
                .OrderBy(() => secondAliasTable1.Time).Asc()
                .Take(1)).WithAlias(() => dto.Time2))
    .OrderBy(() => aliasTable1.Time).Asc()
    .TransformUsing(Transformers.AliasToBean<MyDTO>())
    .List<MyDTO>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:03:29.157

使用 HQL，假设您已经将实体映射到表：

可以通过这种方式显式完成连接：

```
Select aliasTable1.Id, aliasTable2.Version
  from Table1 as aliasTable1
    JOIN aliasTable1.table2 as aliasTable2; 
```

另外，我不确定您是否可以在 HQL 的内部查询中使用 Top，因此您可以将它们更改为：

```
AND secondAliasTable1.Time < (SELECT max(thirdAliasTable1.Time) from Table1 as thirdAliasTable1 
                                where thirdAliasTable1.Name = 'stringValue1'
                                  AND thirdAliasTable1.Id = aliasTable1.Id
                                  AND thirdAliasTable1.Time > aliasTable1.Time) 
```

此外，如果您希望查询返回仅包含这 4 个属性（id、时间、版本和 endTime）的 DTO 列表，您应该查看 Transformers.aliasToBean()。

我曾经在这里写过一些东西：[http ://hordine.com/?p=1187](http://hordine.com/?p=1187)

# unity3d - 在 Unity3d 中从 WWW.texture 加载 GIF

> ID：12088876
> 
> 赞同：1
> 
> 时间：2012-08-23T09:43:07.770
> 
> 标签：unity3d

在我的游戏中，我从 Facebook 获取链接图像，然后使用 WWW.texture 下载图像。但是 WWW.texture 只支持 PNG 和 JPG，所以我无法加载 GIF 图像。

如何加载 GIF 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:53:18.250

使用标准 C# WebClient 下载到本地机器（我很确定它在 MONO 中受支持）：

```
//.. Imported from System.Net
WebClient client = new WebClient();
client.DownloadFile(@"http://www.facebook.com/superhappyimage.gif",@"C:\image.gif"); 
```

阅读 GIF 完全是另一个问题。您可以尝试第 3 方库[Stackoverflow：动画 GIF 库](https://stackoverflow.com/questions/8245089/advanced-gif-library)，或者您需要自己编写。我不记得 Unity 在其 API 中有 GIF 阅读，但也许这已经改变了。

最后，Unity 本身并不支持动画图像 (GIF)。解析 gif 后，您需要编写自己的自定义查看器。

[http://answers.unity3d.com/questions/13156/animated-gif-as-a-texture-on-iphone.html](http://answers.unity3d.com/questions/13156/animated-gif-as-a-texture-on-iphone.html)

# java - Java Class.newInstance 错误

> ID：12088880
> 
> 赞同：1
> 
> 时间：2012-08-23T09:43:18.557
> 
> 标签：java, class, interface, instantiation, derived-class

在下面的代码中，我得到 java.lang.InstantiationException

（下面是独立编译的精简代码 - 在我的应用程序中，我想维护一个 Enum->Class 映射，并在从文件中读取整数值时，实例化适当的类以查看映射）。

如何摆脱错误？有语法问题吗？我必须使用接口吗？我在这里的理解是有限的。

```
class Main {
    abstract class Base {
        Base() {};
        void print() {
            System.out.println("I am in Base");
        }
    }

    class D1 extends Base {
        D1() {};
        @Override 
        void print() {
            System.out.println("I am in D1");
        }
    }

    static Class<? extends Base> getMyClass() {
        return D1.class;
    }

    public static void main(String[] args) {
        try {
            Class<?> cc = getMyClass();
            Object oo = cc.newInstance();
            Base bb = (Base) oo; 
            bb.print();

        } catch (Exception ee) {
            System.out.println(ee);
        };
    }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T09:52:20.730

您的代码有两个问题：

*   `Base`并且`D1`是非静态内部类。这意味着他们可以访问其声明类 ( `Main`) 的字段和方法，因此他们应该持有对 的实例的引用`Main`。因此，它们的构造函数有一个类型的隐式参数，`Main`用于传递该引用。因此，它们没有无参数构造函数，您应该改用单参数构造函数：

    ```
    Object oo = cc.getConstructor(Main.class).newInstance(new Main()); 
    ```

    或者，您可以简单地将它们声明为`static`，或在外部声明它们`Main`- 在这种情况下，它们将无法访问成员，`Main`也不需要引用它。

*   的构造函数`D1`应该是`public`. 否则，您需要调用`setAccessible(true)`以使其可用于反射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:56:52.280

由于类`Base`和`D1`内部类同时它们都是非静态内部类，因此可以通过在 Main 类中创建对象内部类来访问它们的方法，并且您可以在 Main 构造函数中调用它们的方法，它看起来像这样..

```
class Main {   
      Main(){     
      D1 dd = new D1();  
      }  
      abstract class Base {  
          Base() {};  
          void print() {  
                System.out.println("I am in Base");  
          }  
      }
     class D1 extends Base {
          D1() {};
          @Override 
          void print() {
              System.out.println("I am in D1");
          }
     } 
```

}

希望这会帮助你..谢谢

# android - 通过听筒播放录制的文件

> ID：12088887
> 
> 赞同：0
> 
> 时间：2012-08-23T09:43:37.053
> 
> 标签：android, audio, user-interface, call, routes

我正在为 android 设计一个恶作剧应用程序，我想在其中显示好像有人打电话，然后当用户接听电话时，它应该播放录制的文件。除了我目前面临的两个问题之外，我已经完成了大部分事情。

1）当用户接听电话时，录音文件应该通过听筒播放（目前是通过扬声器自动播放）

2) 众所周知，每部手机的用户界面在接到电话时都会有所不同，所以我想确保在运行应用程序时，它应该使用手机的默认用户界面，以确保它看起来像一个真正的来电称呼。

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:23:17.093

对于您问题的第一部分：如果您使用 VOICE_CALL 流类型进行播放，您应该能够获得与语音呼叫相同的路由（即没有连接配件的耳机，如果连接了有线耳机等） .
要获得与语音通话相同的精巧声音，您应该将音频文件设为 8 kHz 单声道，最好是 AMR 编码。

# php - php中整数和浮点值的验证

> ID：12088894
> 
> 赞同：0
> 
> 时间：2012-08-23T09:44:08.110
> 
> 标签：php

我正在检查整数和浮点数的验证。preg('/^[0-9]+(.[0-9]+)?$/',$str) 这工作正常 12,12.05 但不适用于 .12

有什么建议么？

在此先感谢，库马尔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T09:46:08.633

做那个

```
preg('/^[0-9]*(\.[0-9]+)?$/',$str) 
```

`+`表示元素将重复一次或多次，`*`表示将重复零次或多次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:46:32.690

您可以使用[is_float](http://php.net/manual/en/function.is-float.php)和[is_int的组合](http://php.net/manual/en/function.is-int.php)

然而，两者都几乎被[is_numeric覆盖](http://www.php.net/manual/en/function.is-numeric.php)

```
<?php
$tests = array(
    "42", 
    1337, 
    "1e4", 
    "not numeric", 
    array(), 
    9.1
);

foreach ($tests as $element) {
    if (is_numeric($element)) {
        echo "'{$element}' is numeric", PHP_EOL;
    } else {
        echo "'{$element}' is NOT numeric", PHP_EOL;
    }
}
?> 
```

输出：

```
'42' is numeric
'1337' is numeric
'1e4' is numeric
'not numeric' is NOT numeric
'Array' is NOT numeric
'9.1' is numeric 
```

是浮动示例：

```
<?php
if (is_float(27.25)) {
    echo "is float\n";
} else {
    echo "is not float\n";
}
var_dump(is_float('abc'));
var_dump(is_float(23));
var_dump(is_float(23.5));
var_dump(is_float(1e7));  //Scientific Notation
var_dump(is_float(true));
?>
is float
bool(false)
bool(false)
bool(true)
bool(true)
bool(false) 
```

和 Is_int 示例：

```
<?php
if (is_int(23)) {
    echo "is integer\n";
} else {
    echo "is not an integer\n";
}
var_dump(is_int(23));
var_dump(is_int("23"));
var_dump(is_int(23.5));
var_dump(is_int(true));
?>
is integer
bool(true)
bool(false)
bool(false)
bool(false) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:46:07.623

是的，试试这个：

```
if((int) $str != $str)
{
    //error
}

if((float) $str != $str)
{
    //error
} 
```

这应该可以解决问题，我想它会比正则表达式更快。此外，您可以在那之后检查`(float) $str <= 0`-> 另一个错误等。

我会赌正则表达式用于更复杂的验证，其中使用标准例程您必须编写一些代码，例如电子邮件验证、掩码（模式）输入等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T09:47:37.247

```
<?php
$regex = '~^(\d+)|(\d+)?\.(\d+)$~';
$input = array( '12', '12.05', '.12' );

foreach( $input as $string ) {
    echo "Match " . ( preg_match( $regex, $string ) !== 0 ? "OK" : "NOT OK" ) . "\n";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T09:48:04.497

您可以使用PHP 的**is_float**和**is_int**函数来验证数字..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-01T12:30:39.783

我建议PHP 中的函数比函数`is_numeric`具有更好的**性能**`regex`。

`is_numeric`对所有这些项目返回 true：

1.  整数`$s = 123;`
2.  包含整数的字符串`$s = '123';`
3.  浮点整数`$s = 123.456;`
4.  没有前导零的浮点整数`$s = '.456';`
5.  负数`$s = '-.456';`

你可以在[这里](https://eval.in/294562)看到它的作用。

# android - Android：将 OnTouch 添加到动态行以制作 Intent

> ID：12088895
> 
> 赞同：0
> 
> 时间：2012-08-23T09:44:08.477
> 
> 标签：android, eclipse, android-intent

我已经制作了表格以动态创建行。我正在尝试制作 onTouch 事件，如果它触发然后使用意图移动到另一个活动。我不能让它工作它说：

**Intent 类型中的方法 setClass(Context, Class) 不适用于参数 (new View.OnTouchListener(){}, Class)**

我尝试将 THIS 更改为类的名称，但找不到。

这是代码

```
 TableRow row = new TableRow(this);
            row.setOnTouchListener(new OnTouchListener() {
                public boolean onTouch(View v, MotionEvent event) {
                    Log.d("TAREA_TOUCH", tarea.getIdtareasr() + " TO");

                    Intent intent = new Intent();
                    intent.setClass(this, EditarTarea.class);
                    intent.putExtra("id", tarea.getIdtareasr() + "");
                    startActivity(intent);

                    return true;
                }

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:51:31.490

```
intent.setClass(NameOfYourActivity.this, EditarTarea.class); 
```

或者

```
intent.setClass(NameOfYourActivity.getApplicationContext(), EditarTarea.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:06:09.623

```
intent.setClass(this, EditarTarea.class); 
```

这里的“this”指的是接口“OnTouchListener”的匿名实例。为了创建一个意图，我们需要传递 Activity 上下文。

正如 Braj 和 Alexis Cartier 所说，请使用：

```
intent.setClass(ClassName.this, EditarTarea.class); 
```

其中“ClassName”是指您当前的活动名称。

# regex - 正则表达式：从大字符串中删除除某个字符串之外的所有内容？

> ID：12088897
> 
> 赞同：0
> 
> 时间：2012-08-23T09:44:12.203
> 
> 标签：regex, replace

我有这个字符串：*这是我的大字符串*

我想从该字符串中删除除“这是我的”之外的所有内容。必须删除的部分不同，只有第一部分（这是我的）保持不变。我怎样才能使用正则表达式来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:52:42.777

如果您知道要在变量中包含的字符串，只需分配它。

对于您描述的情况，无需使用正则表达式（如，它没有意义）。

# html - 我如何给列表一个特定的高度，以便它们移动到它旁边的新列中？

> ID：12088901
> 
> 赞同：1
> 
> 时间：2012-08-23T09:44:21.193
> 
> 标签：html, css, html-lists

是否可以给列表（<ul>）一个特定的高度或类似的高度，如果项目太多，它只是将项目（<li>）移动到一个新列中？

我在这里说明了它：

[http://oi47.tinypic.com/2dqj5gg.jpg](http://oi47.tinypic.com/2dqj5gg.jpg)

红色框有一个特定的高度。当项目多于可用空间时，它应该简单地将它们移到下一行，就像在我的示例中使用“List7，List8，List9”一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:49:28.567

像这样使用 CSS column-count ：

```
ul {
    -moz-column-count: 2;
    -webkit-column-count: 2;
    column-count: 2;
}​ 
```

虽然它没有得到普遍支持，但受到挑战的浏览器会忽略它。对于他们来说，你必须做一些非语义的事情，比如手动将其拆分为多个 UL 并将它们浮动或同样可怕的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:50:31.943

是的，您可以使用`column-count`：

```
ul {
    -moz-column-count: 3;
    -webkit-column-count: 3;
    column-count: 3;
    height: 60px;
    width: 300px;
} 
```

尽管并非所有浏览器都支持此功能。您可以使用 javascript 插件来填充，或者只使用渐进增强（毕竟这是一个列表）。

[http://jsfiddle.net/ASDkz/](http://jsfiddle.net/ASDkz/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:49:29.993

一种快速的方法是使用`float`您的`li`标签，如下所示：

```
ul
{
    height: 100px;
    border: 1px solid #f00;
}

li
{
    float: left;
    border: 1px solid #0f0;
    width: 50px;
} 
```

但这将为您提供以下结构：

```
List1    List2    List3
List4    List5 
```

如果您特别需要您提供的图像中的结构，那么您可能需要使用 jQuery 查看一些动态渲染以获得完整的浏览器支持。

[示例 jsFiddle](http://jsfiddle.net/ze6R8/)

# .net - 哪个带有 MVC 4 的 .NET 框架？

> ID：12088902
> 
> 赞同：20
> 
> 时间：2012-08-23T09:44:24.203
> 
> 标签：.net, asp.net-mvc-4

我刚刚安装了 MVC 4 并正在考虑将它与 VS 2010 一起使用。我注意到在创建项目时默认情况下 .NET 框架是 4.0，但我正在查看的示例代码使用框架 4.5。如果我想利用 MVC 4 的所有功能，我需要安装框架 4.5，还是 4.0 就足够了？

编辑：似乎我会选择 4.0，虽然 4.5 会成为 VS2012 中的默认框架吗？如果是这样，我可能更愿意安装它以节省以后必须进行框架更改。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-23T09:49:30.670

查看 MVC4[下载页面](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=27419)。有一个要求部分说：

> 支持的操作系统：Windows 7、Windows Server 2003、Windows Server 2008、Windows Server 2008 R2、Windows Vista、Windows XP
> 
> 需要 .NET 4、ASP.NET 4、Visual Studio 2010 或 Visual Web Developer 2010 才能使用此功能的某些部分。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-11T23:50:02.870

您至少需要 .NET 4 和 Visual Studio 2010，但可以使用 ASP.NET 4.5 的更多功能。

VS2010 将仅支持 framework 4 功能，因此不支持 async/await。对于这些功能，您需要 ASP.NET 4.5。这也适用于 Web API，例如这需要 4.5：http: [//blogs.msdn.com/b/henrikn/archive/2012/03/03/async-mashups-using-asp-net-web-api。 aspx](http://blogs.msdn.com/b/henrikn/archive/2012/03/03/async-mashups-using-asp-net-web-api.aspx)

MVC4 中的标准控制器/视图场景将在 ASP.NET 4 上的 VS2010 中运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T09:57:22.027

如果您只是在编写应用程序，那么只需编写和编译即可。这会告诉你是否有你需要的东西。寿：

> 利用 MVC 的所有功能

听起来不太以用户为中心；）

也请帮自己一个忙，并将其部署到 IIS 作为您的开发服务器，而不是 Cassini 或现在所谓的任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T09:55:34.647

毫无疑问不需要安装 4.5 ( [mvc4-release-notes](http://www.asp.net/whitepapers/mvc4-release-notes) )。ASP.NET MVC 4 可用于框架版本 4.0 和 4.5。

# iphone - 清除表 SQLite iOS 中的所有行

> ID：12088906
> 
> 赞同：2
> 
> 时间：2012-08-23T09:44:37.173
> 
> 标签：iphone, objective-c, ios, sqlite

我需要你的帮助..如何从 sqlite db 中删除表中的所有行？请你能说如何一步删除所有行（不是一一）..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T09:47:29.547

执行此操作的普通 SQL 语法：

```
DELETE FROM tablename 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-23T12:46:17.540

可以使用[SQLite 文档处理任何 SQLite 语法查询](http://www.sqlite.org/lang.html)

对于在 iOS 中删除 sqlite 表行，以下代码

```
NSString *query = @"delete from yourTable";
const char *sqlStatement = [query UTF8String];
sqlite3_stmt *compiledStatement;
if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {
// Loop through the results and add them to the feeds array
while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
    // Read the data from the result row
    NSLog(@"result is here");
}

// Release the compiled statement from memory
sqlite3_finalize(compiledStatement); 
```

* * *

我想这解决了你的问题

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-23T11:47:22.520

如果你想从 SQL 表中删除所有行，然后去

```
DELETE FROM tablename 
```

如果你想一一删除行

```
DELETE FROM tablename WHERE id=2 
```

根据您的要求更改 id 或者您可以提及特定字段名称以及您要删除的行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-05T12:34:24.567

```
(void) DeleteRows {

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];

NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;
NSString *dbPath =[documentsDir stringByAppendingPathComponent:@"gym.db"];
BOOL success = [fileManager fileExistsAtPath:dbPath];
sqlite3_stmt *selectstmt;
if(!success)
{
    NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"gym.db"];
    success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];

    if (!success)
        NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
}

if (sqlite3_open([dbPath UTF8String], &contactDB) == SQLITE_OK) {
    //*************** insert value in database******************************\\

    NSString  *sql = [NSString stringWithFormat:@"delete from Offers"];
    const char *insert_stmt = [sql UTF8String];
    sqlite3_prepare_v2(contactDB,insert_stmt, -1, &selectstmt, NULL);
    if(sqlite3_step(selectstmt)==SQLITE_DONE)
    {
        NSLog(@"Delete successfully");
    }
    else
    {
        NSLog(@"Delete not successfully");

    }
    sqlite3_finalize(selectstmt);
    sqlite3_close(contactDB);
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-07T11:38:56.533

```
- (IBAction)deleteAll:(id)sender { 

   NSString *tableName=@"Contacts";
   NSString *qsql = [NSString stringWithFormat:@"DELETE FROM %@",
                      tableName];
   sqlite3_stmt *statement;
    if (sqlite3_prepare_v2( db, [qsql UTF8String], -1,
                           &statement, NULL) == SQLITE_OK)
        while (sqlite3_step(statement) == SQLITE_DONE){
                        NSLog(@"%@", @"deleted");
        }
    else {
    sqlite3_close(db);
    NSAssert(0, @"Failed to Delete");
    }
   sqlite3_finalize(statement);

  } 
```

# ios - 本地通知将于下个午夜触发

> ID：12088907
> 
> 赞同：0
> 
> 时间：2012-08-23T09:44:44.493
> 
> 标签：ios, uilocalnotification, nscalendar

我想在第二天凌晨 12 点安排本地通知。我无法将时间设置为 12 点。即使我将其设置为 12，它也不会设置为 12，而是需要一些其他时间。

```
NSCalendar *calendar = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:[NSDate date]]; 
NSLog(@"components %@",components); 
[components setHour:00]; 
[components setMinute:01]; 
[components setSecond:00]; 
```

我使用这个片段..我将 notification.fireDate 设置为

> [日历日期从组件：组件]；

但是当我记录日期时，它显示昨天的日期，时间为 3.42

# php - 如何清除css缓存

> ID：12088909
> 
> 赞同：2
> 
> 时间：2012-08-23T09:44:45.403
> 
> 标签：php, css

我正在通过 PHP 和 Godaddy apache 服务器构建我的[博客](http://www.bgmemo.com)，最近我遇到了一个问题，我无法清除资源管理器缓存，因此每次更改 style.css 时，我都必须更改 css 文件的名称。那么你能说出什么是错的或者我怎样才能清除 css 缓存？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T09:48:48.030

如果创建`version`基于文件修改时间，可以使浏览器自动清除缓存

例如：

```
$filename = '/css/style.css';
$fileModified = substr(md5(filemtime($filename)), 0, 6);
// $fileModified = filemtime($filename); // - with version as timestamp. 
```

和 HTML

```
<link rel="stylesheet" type="text/css" href="<?php echo $filename;?>?v=<?php echo $fileModified ; ?>"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T11:02:26.177

为您的 css 文件输入版本号，如下所示，

```
style.css?v=1 or style.css?v=1.1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T09:46:36.050

清除浏览器中的浏览历史缓存...这与 PHP 无关..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T09:48:08.297

```
<link href="style.css?t=[timestamp]" type="text/css" rel="stylesheet"> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T09:48:10.273

这是你要求的吗？

```
<link href="style.css?key=<?php echo time(); ?>" type="text/css" rel="stylesheet" /> 
```

最好只在本地或测试服务器上保持这样的状态 - 网站上线时删除 time() 部分

更新

或者`time()`您可以`key=<?php echo date('h'); ?>`按小时使用或根据需要进行更改。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T09:47:55.390

使用随机数作为 CSS 文件的参数。这是每次加载文件时在浏览器上缓存的最简单方法之一。

前任：

```
style.css?v=12345 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-23T10:00:41.337

只需在浏览器中按 Ctrl+F5 或其他组合清除缓存即可更新页面。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-04-27T10:26:26.397

对于 chrome：单击右上角的菜单按钮，单击设置，向下滚动到高级并单击它，然后单击“清除浏览数据”并勾选缓存的图像和文件。

# c++ - Makefile 中不存在“clean”规则，但 make clean 无论如何都会产生一些东西

> ID：12088913
> 
> 赞同：1
> 
> 时间：2012-08-23T09:44:55.800
> 
> 标签：c++, linux, makefile

我在 linux 上的构建过程有一个小问题。

无论出于何种原因，如果我发出“make clean”，Linux 会在我的代码中生成一个名为“clean”的文件。问题是我的项目的生成文件中没有“干净”部分。

看起来我的 make 从某个地方获取了错误的 Makefile，这可能与我的项目的 Makefile 发生冲突。

无论如何要知道查找哪个makefile？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:50:35.510

两个想法：

1.  使用`[--debug](http://www.gnu.org/software/make/manual/make.html#index-g_t_0040code_007b_002d_002ddebug_007d-728)`命令行选项让 make 程序告诉你更多关于它在做什么。
2.  尝试添加目标`[.PHONY](http://www.gnu.org/software/make/manual/make.html#Phony-Targets)`声明`clean`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:49:43.463

我建议使用[remake](http://bashdb.sourceforge.net/remake/)来调试你的 makefile。安装它然后运行`remake -x`甚至`remake -x -d`. （该`remake`实用程序是 GNU 几乎兼容的变体`make`）。

在您的情况下，缺少虚假`clean`目标会使`make`实用程序创建一个名为`clean`.

# compact-framework - 需要有关如何从外部文本文件中读取的帮助

> ID：12088914
> 
> 赞同：0
> 
> 时间：2012-08-23T09:44:58.020
> 
> 标签：compact-framework, pocketpc

我正在用 C# 为使用 Compact Framework 1.0 的袖珍电脑编写一个程序，我需要从文本文件中读取数据，但我不确定将文件放在哪里，因为该程序似乎无法找到该文件。我把它放在项目文件夹的根目录下，尝试读取的代码是：StreamReader streamReader = new StreamReader("products.txt");

我需要这几天才能工作，所以我非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:35:33.487

这可能是因为当您在 Visual Studio 环境中开发时，您的应用程序路径将如下所示：

> 项目名称\bin\Release\application.exe

部署时，您的应用程序路径将如下所示：

> 项目名称\application.exe

我发现解决这些问题的最佳方法是永远不要将支持文件与可执行文件放在同一目录中。

```
string apps = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
string docs = Environment.GetFolderPath(Environment.SpecialFolder.Personal); 
```

这将需要您进行更多的“记录保存”，但您的文件应该始终存在。

# ios - 错误：此类与键 y 的键值编码不兼容

> ID：12088917
> 
> 赞同：1
> 
> 时间：2012-08-23T09:45:10.973
> 
> 标签：ios, key-value-observing

这个观察者工作得很好

```
[self.tableView addObserver:self forKeyPath:@"contentOffset" options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld context:nil]; 
```

但这会产生错误。

```
[self.tableView addObserver:self forKeyPath:@"contentOffset.y" options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld context:nil];

 Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<NSConcreteValue 0x6e3eda0> valueForUndefinedKey:]: this class is not key value coding-compliant for the key y.' 
```

但为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:50:14.033

因为虽然`contentOffset`作为属性存在于您的类中，但它实际上是 a 的实例`CGPoint`，它只是一个常规的 C 结构，而不是 Objective-C 类，因此不符合 KVC。

在第二个示例中，您将其视为 Objective-C 类。

**更新**

这可能有点令人困惑，但回到你的例子：

```
self.contentOffset       // contentOffset is a property of the current class
self.contentOffset.y     // y is a member of the CGPoint structure of which contentOffset is an instance 
```

两者看起来一样，但一个是Objective-C风格，一个是C风格。C`struct`早于 Objective-C 并且不实现 KVC。请记住，Objective-C 是建立在 C 之上的，因此 C 中的所有内容也都在 Objective-C 中，但反之则不适用。访问一个 Objective-C 类属性恰好与访问一个结构的成员具有相同的语法。

您可能正在子类`UIScrollView`化，如果您检查适当的头文件，您可能会看到类似

```
@property (nonatomic, assign) CGPoint contentOffset; 
```

这`assign`意味着它是 C 数据类型。另请注意缺少`*`表示指针的 a 。

的声明`CGPoint`还确认它不是一个 Objective-C 类：

```
struct CGPoint {
  CGFloat x;
  CGFloat y;
};
typedef struct CGPoint CGPoint; 
```

如您所见，`CGPoint`不是派生自`NSObject`.

# java - 是否可以强制接口仅由枚举实现？

> ID：12088919
> 
> 赞同：11
> 
> 时间：2012-08-23T09:45:13.093
> 
> 标签：java, enums

我想知道是否可以强制接口由枚举实现。

我有以下界面：

```
public interface MobileApplication {
    String name();
} 
```

这应该由枚举来实现，因为我需要保证名称的唯一性。当我正在设计一个图书馆时，我不能信任图书馆用户，而且没有唯一的名称，我的图书馆根本无法工作。

我可以不用安全，只是想知道这是否可能。谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-23T09:51:19.703

不幸的是，您不能在编译时真正做到这一点。您可以通过要求类似and之类的方法来给出*提示，或者您可以在**运行时*检查它。`ordinal()``name()`

 *关于“我不能信任图书馆用户”：只要您在接口 JavaDoc 中记录需求，任何不遵循它的人都会得到他所支付的费用。

这就像有人没有正确实现一样`equals()`：`hashCode()`编译器不会强制执行它，但是如果你破坏它，那么依赖它们的类也会破坏。

你能得到的最接近的可能是这样的：

```
public interface EnumInterface<E extends Enum<E>> {
} 
```

实现看起来像这样：

```
public enum MyInterfaceImpl implements EnumInterface<MyInterfaceImpl> {
  FOO,
  BAR;
} 
```

这只是另一个*提示*，因为“恶意”开发人员仍然可以构建这样的类：

```
class NotAnEnum implements EnumInterface<MyInterfaceImpl> {
} 
```

总而言之，总会有误用任何库的方法。库作者的目标是让正确使用库比错误使用库*更容易。*你不需要让它*不可能*被错误地使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:49:47.170

不是真的，不。除非您要提供专门检查这一点的 Java 编译器插件。但即便如此，您图书馆的用户也需要愿意使用这样的插件。

因此，只有当库用户希望有一些静态辅助工具来防止错误时，使用自定义 Java 编译器插件的方法才有意义。如果您决定使用 Java 插件选项，[此链接可能会很有趣。](http://in.relation.to/10262.lace)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T09:51:29.213

> 我想知道是否可以强制接口由枚举实现。

不它不是。接口可以由任何类实现，您不能强制库的用户使用枚举。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T11:17:48.690

> 我想知道是否可以强制接口由枚举实现。

即使你可以，它也无济于事，因为

> 如果没有唯一的名称，我的库将根本无法工作。

```
enum A implements MobileApplication {
    ONE
}
enum B implements MobileApplication {
    ONE
}
enum C implements MobileApplication {
    ONE
} 
```

您有三个枚举值，都带有`name()`or `ONE`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-28T12:22:27.523

这不适用于所有应用程序案例，但制定一个使用泛型的库可能是人们未来编写库和研究这个问题的一种出路。

例如，我想编写一个库类 (SettingsManagerBase)，它一般管理我的应用程序“设置”，并希望保证唯一的键能够在代码中获取/设置这些设置。所以我定义了我的界面（在这里我还结合了接受答案的想法以获得额外的“安全性”，但严格来说这不是我的方法所必需的）：

```
// Part of my settings library
public interface SettingBase<E extends Enum<E>> {
    Object defaultValue();  // <-- Whatever interface is needed
} 
```

而我的实现：

```
// Part of my application that uses the settings library
public enum Setting implements SettingBase<Setting> {
    THEME,
    SHOW_DIALOGS,
    ...;

    @Override
    public Object defaultValue() { ... }  // <-- Required interface implementation, probably based on constructor arguments (not shown)
} 
```

现在的关键是，我们的设置管理器库类指定必须给它一个实现 SettingBase 的枚举（现在这是一个完全的保证）：

```
// Part of my settings library
public abstract class SettingsManagerBase<E extends Enum<E> & SettingBase<E>> {
    public void foo(E setting) {
        Object d = setting.defaultValue();  // We can safely use all methods from our interface
        String n = setting.name();          // We can safely use all enumeration methods, without needing to specify them manually in our interface or anything
    }
} 
```

设置管理器实现可以是：

```
// Part of my application that uses the settings library
public class SettingsManager extends SettingsManagerBase<Setting> {
    // If you need to override a function then E just turns into Setting
    public void foo(Setting setting) { ... }
} 
```

如果您需要与库类 (SettingsManagerBase) 中的通用 Enum 'E' 对应的类实例，则可以执行以下操作：

```
// Add to SettingsManagerBase
protected Class<E> mEnumClass;
public SettingsManagerBase(Class<E> enumClass) {
    mEnumClass = enumClass;
    // Now you can do things like call Enum.valueOf(...)
}

// Add to SettingsManager
public SettingsManager() {
    super(Setting.class);
} 
```

我知道这个答案似乎特定于我的用例，但是对于许多其他想要强制通过枚举实现接口的情况，实现这个想法应该不难。*

# ios - 处理自定义 SplitViewController 中的方向变化？

> ID：12088922
> 
> 赞同：0
> 
> 时间：2012-08-23T09:45:18.507
> 
> 标签：ios, uiviewcontroller, uiinterfaceorientation

我编写了一个自定义`SplitViewController`，它有一个主（自定义`UITableView`）和一个详细视图控制器，这在 iPad 的横向模式下完美运行。

当方向更改为纵向模式时，我想相应地调整主视图和详细视图的大小和位置，以免看起来不合适。

有人对我如何完成这项工作有任何想法吗？

更新 ：

我在我的自定义 SplitViewController 中编写了一个侦听器来寻找方向变化并将其连接到一个看起来像这样的选择器（resetViews :)

-（无效）重置视图{

```
 if(currentOrientation == UIDeviceOrientationPortrait || currentOrientation ==       UIDeviceOrientationPortraitUpsideDown){

    self.view.frame = CGRectMake(0, 0, 768, 1024);
    masterView.frame = CGRectMake(MASTER_VIEW_PORTRAIT_X,MASTER_VIEW_PORTRAIT_Y,MASTER_VIEW_WIDTH_PORTRAIT,MASTER_VIEW_HEIGHT_PORTAIT);
    detailView.frame = CGRectMake(DETAIL_VIEW_PORTRAIT_X, DETAIL_VIEW_PORTRAIT_Y, DETAIL_VIEW_WIDTH_PORTRAIT, DETAIL_VIEW_HEIGHT_PORTAIT);

}
if(currentOrientation == UIDeviceOrientationLandscapeRight || currentOrientation == UIDeviceOrientationLandscapeLeft){
    NSLog(@"IN Landscape");
    self.view.frame = CGRectMake(0, 0, 1024, 768);
   masterView.frame = CGRectMake(MASTER_VIEW_LANDSCAPE_X,MASTER_VIEW_LANDSCAPE_Y,MASTER_VIEW_WIDTH_LANDSCAPE,MASTER_VIEW_HEIGHT_LANDSCAPE);
    detailView.frame = CGRectMake(DETAIL_VIEW_LANDSCAPE_X,DETAIL_VIEW_LANDSCAPE_Y, DETAIL_VIEW_WIDTH_LANDSCAPE, DETAIL_VIEW_HEIGHT_LANDSCAPE);

} 
```

}

这在设置 viewControllers 的框架时工作正常。

但是 MasterViewController (UITableViewController) 必须在方向改变时动态改变其行的高度 (tableView.rowHeight)。我如何做到这一点而无需为每次方向更改重新加载整个 tableView ([tableView reloadData])？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:35:11.710

您是否尝试设置 autoresizingMasks 来指定视图所需的调整大小行为？像这样的东西应该与您描述的调整大小相匹配：

```
splitViewController.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoResizingFlexibleHeight;
masterViewController.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoResizingFlexibleHeight;
detailViewController.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoResizingFlexibleHeight; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T16:20:51.823

子类 UISplitViewController 并将您的 splitViewController 设置为该类。然后将此方法添加到您的 UISplitViewController 子类中：

```
-(BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation {
    return NO;
} 
```

如果您想要一种简单的方法来换出详细视图，请添加此方法：

```
-(void)setDetailControllerTo:(UIViewController *)detailController withNavControllerTitle:(NSString *)title {
[detailController view]; // this line forces the viewDidLoad method to be called

if (title) {
    UINavigationController *navController = [[UINavigationController alloc] init];
    [navController pushViewController:detailController animated:YES];
    detailController.title = title;

    NSArray *viewControllers=@[self.mainController.viewControllers[0],navController];
    self.mainController.viewControllers = viewControllers;
} else {
    NSArray *viewControllers=@[self.mainController.viewControllers[0],detailController];
    self.mainController.viewControllers = viewControllers;
} 
```

}

要调用此方法，请从 tableView:didSelectRowAtIndexPath: 方法中的主视图控制器执行类似的操作

```
FixedSplitViewController *splitController = (FixedSplitViewController*) self.splitViewController;

CurrentEventViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"CurrentEventViewController"];
// add any setup code here
[splitController setDetailControllerTo:controller withNavControllerTitle:@"Current Event"]; 
```

# android - Android：android设备中静态wifi ip有什么用？

> ID：12088924
> 
> 赞同：0
> 
> 时间：2012-08-23T09:45:18.783
> 
> 标签：android, eclipse, ip, wifi

将静态wifi ip地址设置到手机有什么用......它在通信中有什么特殊目的吗？它在套接字通信中是否有用

任何类型的帮助将不胜感激

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:47:58.060

静态 wifi ip 地址仅在内部 n/w 中有效，它不是您的公共 ip，唯一的用途是您在该 n/w 中的本地 ip 将保持不变，但将具有相应的动态/静态由 isp 作为公共 ip 地址提供

当然，这取决于您的路由器配置，如果它将该 IP 分配给其他设备，那么就会发生冲突

它仅用于在不自动分配 ip 的特殊 n/w 上进行配置

# java - Java Process.waitFor() 未按预期工作

> ID：12088930
> 
> 赞同：2
> 
> 时间：2012-08-23T09:45:37.010
> 
> 标签：java, runtime.exec

我正在尝试从 Java 启动 mySQL 的 msi 安装程序，如下所示：

```
Runtime run = Runtime.getRuntime();
Process sqlInstaller = run.exec(
    "rundll32 SHELL32.DLL,ShellExec_RunDLL msiexec /qb /i mysql-5.5.27-winx64.msi REBOOT=ReallySuppress");
sqlInstaller.waitFor();
System.out.println(sqlInstaller.exitValue()); 
```

该方法几乎立即返回，退出值为 0 并继续执行。但是，由于我的代码的下一部分继续创建一些表，我需要保证 mySQL 安装已成功完成。

任何关于如何实现这一点的想法，或者关于为什么`waitFor()`要如此行事的任何想法，都将受到欢迎。

# node.js - 是否可以在 go 中编写 node.js 插件？

> ID：12088937
> 
> 赞同：0
> 
> 时间：2012-08-23T09:45:48.597
> 
> 标签：node.js, go

我想这与是否可以从 go 可执行文件中以某种方式模仿 libuv 和其他 c/cpp 胶水有关。是否可以？如果是，您能否提供一些关于从哪里开始的指导？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:50:17.803

目前不可能（读起来*很复杂*）用 Go 构建共享对象，以便将它们动态链接到系统中。出于同样的原因，Go 只能通过 CGI 或 Fast-CGI 与其他 Web 服务器交互。

所以我的回答不会是*直接*的。也许您可以通过 IPC 和链接到节点的小型 C-“代理”来实现某些目标。

# java - SolrQuery 不返回少于 3 个字符的结果

> ID：12088938
> 
> 赞同：1
> 
> 时间：2012-08-23T09:45:52.533
> 
> 标签：java, solr, solr-query-syntax

我的代码如下：

```
SolrQuery query = new SolrQuery();
    query.setQuery(q.trim());
try {
        QueryResponse res = getSolrServer().query(query);
        return res.getResults();
    } catch (SolrServerException sse) {
        log.error(sse);
    } 
```

问题是，当我有超过 3 个字符的查询时，这会返回给我响应，例如，查询字符串“che”会响应结果，但是查询字符串“ch”会不返回任何响应。有没有办法可以覆盖 Solr Query 的 3 个字符的最小长度。

是导致问题的下面的 xml，如果是，我可以使用 java 以编程方式覆盖它吗

```
<analyzer type="index">
    <tokenizer class="solr.NGramTokenizerFactory" minGramSize="3" maxGramSize="50" />
    <filter class="solr.LowerCaseFilterFactory"/>
</analyzer> 
```

提前感谢您的帮助。

谢谢并恭祝安康，

瓦布哈夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:45:32.753

[NGramTokenizerFactory](http://lucidworks.lucidimagination.com/display/solr/Tokenizers) :-
默认行为。请注意，此标记器对整个字段进行操作。它不会破坏空白处的字段。结果，空格字符包含在编码中。

```
<analyzer>
  <tokenizer class="solr.NGramTokenizerFactory"/>
</analyzer> 
```

在：“嘿，伙计”

输出：“h”、“e”、“y”、“”、“m”、“a”、“n”、“he”、“ey”、“y”、“m”、“ma”、“一个”

因此，使用您的配置：- minGramSize="3" maxGramSize="50" 小于 3 的项目将被过滤

对于两个字母词，因为您在索引中没有这些词，所以这些词永远无法搜索。您需要将 minGramSize 更改为 2 以使其可搜索。

# php - 显示执行返回值

> ID：12088940
> 
> 赞同：0
> 
> 时间：2012-08-23T09:45:56.417
> 
> 标签：php, linux

我在 test.php 中使用此代码：

```
 <?php
     $con=mysql_connect('localhost','username','password');
     exec("awk commend",$out);
     foreach($out as $line)
     {
       echo $line;
     }
      mysql_close($con);
    ?> 
```

当我使用`php /var/www/html/test.php`它时，会给出执行结果。我该怎么做才能在浏览器中显示结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:57:39.273

如果 awk 失败，它可能会写入 stderr 而不是 stdout，而您只是打印 stdout。

尝试使用这个而不是你现在拥有的：

```
exec("awk commend 2>&1",$out); 
```

这会将 stderr 重定向到 stdout，因此您应该能够看到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:53:49.660

awk 程序的路径一定是无效的。检查[文件是否存在](http://fr.php.net/manual/en/function.file-exists.php)。

# c# - 放弃会话而不清除所有

> ID：12088941
> 
> 赞同：2
> 
> 时间：2012-08-23T09:46:05.073
> 
> 标签：c#, asp.net, session

**概述：** 我创建了一个具有客户区域和管理区域的系统。两个区域都有不同的登录页面。用户可以在管理区域以*用户 A*的身份登录，同时在客户区域以*用户 B的身份登录。*

当用户从客户或管理区域注销时，`Session.Abandon()`它会删除客户和管理区域中的会话，这**是我不希望发生的**

**问题：**我可以在注销时放弃会话而不影响其他区域的会话吗？（即：当我从客户区域注销时，我应该在管理区域保持登录状态）

**更新：**我知道`Session.Clear()`可以解决这个问题，但我担心它可能带来的安全风险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:51:55.860

编写检查会话的客户 ID 是否 > 0、用户名不为空且 ip 是否等于远程 ADDR 的函数。

将 customer_id、customer_username 和 IP（出于安全考虑）存储在会话中并仅清除它们。当您调用函数时，它将返回该用户未作为客户签名。

这同样适用于管理员。

没有必要破坏（放弃）会话，保持活动状态并存储其他信息。

```
public bool IsLoggedIn()
{
    // You will have to check for the keys, if they are present in the Session container, first.

    if(!Session.Containts("customer_id")
            || !Session.Contains("customer_username")
            || !Session.Contains("customer_ip"))
        return false;

    return Session["customer_id"] > 0
        && String.IsNullOrEmpty(Session["customer_username"])
        && Session["customer_ip"] = Request.ServerVariables("REMOTE_ADDR")
}

public void LogOut()
{
    Session.Remove("customer_id");
    Session.Remove("customer_username");
    Session.Remove("customer_ip");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:56:41.123

问题的核心是，通常对于**一个**ASP Web 应用程序，每个物理用户的浏览器**只有一个会话**(*)。如果不对站点/框架/服务器代码结构进行一些真正认真的修改，您将无法创建和维护多个并行会话。即使是页面和控件提供的“.Session”哈希图也总是显示相同的键/值..

您的网络应用程序的某些部分可能使用不同的键，从而模拟不相交的“层”或“模块”，但这仍然只是一个存储..

因此，如果您调用 Session-Abandon，您将失去一切 - 因为它只有一个会话......

您唯一能做的就是手动有选择地清除正确的条目，就像 Rolice 在这里并行回答一样：）

(*) 实际上，当您执行 Session-Abandon 时，您并没有删除/销毁会话。仍然只有一个会话。它刚刚忘记了所有数据，现在它是“空的”= 所以，就像新的一样。好吧，好吧，它可能会删除旧的 cookie，我不记得了，但是它们将在下一页呈现时立即用新的新密钥重新创建，所以......相当立即。

# lwuit - 不需要的后退按钮

> ID：12088943
> 
> 赞同：0
> 
> 时间：2012-08-23T09:46:07.810
> 
> 标签：lwuit, lwuit-form, lwuit-button

嗨伙计们

我是 LWUIT 的新手，我使用 TABS 在 LWUIT 中创建了一些表单...

当我转到任何列表时，我自动返回按钮`added at the bottom of tabs..` 谁能帮我删除这个返回按钮....？？？此后退按钮仅在单击第一页中包含的任何列表后出现，但是当我单击任何列表项时，它会移动到另一个页面但在另一个页面中`automatically this back button added...`

**删除 TABS 下的后退按钮...**

![在此处输入图像描述](../Images/ef919cf36679495037755dc913deb349.png)

提前谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:11:10.117

我认为 formObject.removeAllCommands(); 当您初始化表单时也应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:21:44.930

Lwiit 资源编辑器中的技巧

1.  在表单中选择一个按钮
2.  在右侧，您可以看到属性-> 命令-单击命令将打开一个对话框
3.  现在分配以下 Action = Back BackCommand = 勾选就可以了。

立即运行您的项目！

您的后退按钮将不可见。

![在此处输入图像描述](../Images/889c861e3bbe193d769b1974684fecf7.png)

# iphone - 应用程序 didFinishLaunchingWithOptions 或 applicationDidBecomeActive

> ID：12088958
> 
> 赞同：2
> 
> 时间：2012-08-23T09:47:06.403
> 
> 标签：iphone, ios, ios4

我想知道如何为用户提供从服务器下载内容的方式。

如果用户订阅一个月，我想每天为他们提供新的内容（歌曲）。但我不确定如何解决这个问题。

我是否需要`application didFinishLaunchingWithOptions`在 -`(void)applicationDidBecomeActive:(UIApplication *)application {`

对于这种情况，我应该使用哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:51:08.427

如果您计划在应用程序启动时开始新连接，那么您需要使用

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
} 
```

但是，`applicationDidBecomeActive`它更适合恢复您在应用程序后台运行时暂停的下载。在这里开始下载也是可以接受的。

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
} 
```

# sql - 合并未使用的时隙

> ID：12088959
> 
> 赞同：0
> 
> 时间：2012-08-23T09:47:12.980
> 
> 标签：sql, sql-server-2008

我有一个查询结果，例如

```
|----------------------------------------------|
|StaffId|BranchId|StartTime|EndTime |PatientId |
|----------------------------------------------|
|1      |1       |09:30:00 |09:35:00|Null      |
|1      |1       |09:35:00 |09:40:00|Null      |
|1      |1       |09:40:00 |09:55:00|1         |
|1      |1       |09:55:00 |10:00:00|Null      |
|1      |1       |10:00:00 |10:05:00|Null      |
|1      |1       |10:05:00 |10:20:00|2         |
|1      |1       |10:20:00 |10:25:00|NULL      |
|1      |1       |10:25:00 |10:40:00|3         |
|1      |1       |10:40:00 |10:45:00|Null      |
|1      |1       |10:45:00 |10:50:00|Null      |
|1      |1       |10:50:00 |10:55:00|Null      |
|1      |1       |10:55:00 |11:00:00|Null      |
|----------------------------------------------| 
```

但我希望能够对所有未使用的时间段（没有患者 ID 的时间段）进行分组，所以结果是

```
|----------------------------------------------|
|StaffId|BranchId|StartTime|EndTime |PatientId |
|----------------------------------------------|
|1      |1       |09:30:00 |09:40:00|Null      |
|1      |1       |09:40:00 |09:55:00|1         |
|1      |1       |09:55:00 |10:05:00|Null      |
|1      |1       |10:05:00 |10:20:00|2         |
|1      |1       |10:20:00 |10:25:00|NULL      |
|1      |1       |10:25:00 |10:40:00|3         |
|1      |1       |10:40:00 |11:00:00|Null      |
|----------------------------------------------| 
```

虽然不太确定如何执行此操作，但我们将不胜感激任何指导。不确定是否更容易，但查询的结果是通过使用 sql 与患者仅以 5 分钟间隔加入一个表来获得的

```
INSERT INTO @Results(BranchId, StaffId, StartTime, EndTime)
SELECT us.BranchId, us.StaffId, us.StartTime, us.EndTime
FROM @UnusedSlots us
    left join @Results r
        on (NOT ((r.StartTime >= us.EndTime)
            OR (r.EndTime <= us.StartTime))) AND
            (us.StaffId = r.StaffId)
    where r.BranchId is Null 
```

其中@UnusedSlots 是可用的 5 分钟时段，@Results 包含预订的时段（带有患者 ID）。如果有一种方法可以将合并构建到此语句中，那就更好了。

我以为我可以使用`Min(StartTime)`，`Max(EndTime)`如果我可以在没有 PatientId 的情况下隔离相邻的结果，但我不知道该怎么做，我会一直得到一个从 09:30 到 11:00 合并的结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:04:39.963

```
select 
    StaffId,
    BranchId,
    MIN(StartTime),
    MAX(EndTime),
    PatientId
from
(
select *,       
    ROW_NUMBER() over (order by starttime) 
      - ROW_NUMBER() over (partition by isnull(PatientID,-1) order by starttime) rn     
from @results
) v
group by staffid, branchid, patientid, rn
order by MIN (starttime) 
```

我不确定 @results 表中的 StaffID 和 BranchID 是否会有所不同，因此如果可以的话，您可能需要对其进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:16:32.183

您可以使用游标，但性能不会很好地扩展：

```
 create table #tempTimes (
        staffid int,
        branchid int,
        startTime datetime,
        endTime datetime,
        patientid int)

    insert into #temptimes values (1,1,'2012-09-09 09:30', '2012-09-09 09:35', null)
    insert into #temptimes values (1,1,'2012-09-09 09:35', '2012-09-09 09:40', null)
    insert into #temptimes values (1,1,'2012-09-09 09:40', '2012-09-09 09:45', null)
    insert into #temptimes values (1,1,'2012-09-09 09:45', '2012-09-09 09:55', 1)
    insert into #temptimes values (1,1,'2012-09-09 09:55', '2012-09-09 10:00', null)
    insert into #temptimes values (1,1,'2012-09-09 10:00', '2012-09-09 10:05', null)
    insert into #temptimes values (1,1,'2012-09-09 10:05', '2012-09-09 10:20', 2)

    declare @currentPeriodStart datetime
    declare @currentPeriodEnd datetime
    declare @startTime datetime
    declare @endTime datetime
    declare @lastEndTime datetime
    declare @patientId int

    declare myCurs cursor for select startTime, endTime, patientid from #tempTimes order by startTime 

    open myCurs

    fetch next from myCurs into @startTime, @endTime, @patientId

    while @@fetch_status = 0
    begin
        if @patientId is null
        begin
            if (@currentPeriodStart is null)
                set @currentPeriodStart = @startTime

            set @currentPeriodEnd = @endTime
        end else
        begin
            print   cast(@currentPeriodStart as nvarchar) + ' to ' + cast(@currentPeriodEnd as nvarchar)
            set @currentPeriodStart = null
        end

        fetch next from myCurs into @startTime, @endTime, @patientId
    end

    close myCurs
    deallocate myCurs 
```

# iphone - Groupon 风格刷卡器

> ID：12088961
> 
> 赞同：1
> 
> 时间：2012-08-23T09:47:17.380
> 
> 标签：iphone, view, swipe

有人可以建议 Groupon 在下面的视频中使用什么样的滑动视图以及如何创建类似的效果？

[视频链接](http://www.youtube.com/watch?v=R_NkdNA33oY)

非常感谢

麦克风

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-28T09:15:37.337

Tom Thorpe 提供了一个很好的例子： [https ://github.com/TomThorpe/UIScrollSlidingPages](https://github.com/TomThorpe/UIScrollSlidingPages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:10:42.823

看起来像一个分页的水平 UIScrollView，每个页面都有一个垂直的 UIScrollView，顶部有一个自定义的 UIPageControl 等效项。构建你自己的 UIPageControl 来像这样工作可能是一个合理的工作量。

# linux - 从 gvim 在现有 shell 中运行命令

> ID：12088976
> 
> 赞同：1
> 
> 时间：2012-08-23T09:47:49.593
> 
> 标签：linux, shell, vim, ipc

这一切都从一个外壳开始。例如我正在使用`urxvt`with `zsh`。在那里我用`gvim`. 在这种情况下，它是一个`LaTeX`文件。现在我需要执行一些命令（用于编译文档，例如`pdflatex`）。

我怎样才能让原始外壳从哪里`gvim`开始执行该命令？

如果`gvim`必须打开一个新的 shell*一次*，然后在该 shell 中执行指定命令 ( `pdflatex`) 的每个未来调用，这也是可以接受的，而我仍然可以手动输入它。

直接运行的问题`:!pdflatex`是，显示了输出，但是如果滚动时间过长，则无法滚动，并且在我按回车后，一切都消失了。

使用外壳的想法意味着默认情况下不必切换窗口焦点。所以通常我的命令的输出是可见的，但除非发生错误，否则我可以继续在`gvim`. 现在，如果每次我运行命令时都生成一个新的 shell，那么这种工作流程肯定是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:28:49.640

GVIM 不会保留启动它的 shell 的“句柄”，以允许它向它发送命令。由于它们是同步执行的，您也无法从 GVIM 启动 shell，在继续向其输入命令的同时继续在 GVIM 中工作。

恐怕您必须使用窗口管理器的功能来启动（然后重新激活）shell 窗口，并将命令作为击键发送给它。在 Windows 上，这可以通过`WshShell`'s`Run()`和方法来完成（例如在 VBScript 中）；Linux 上的窗口控制可能也有类似的机制。`AppActivate()``SendKeys()`

但是，如果您不介意在 GVIM 中使用该外壳*（*模拟，具有所有缺点），那么可以使用插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:26:02.573

您可能想使用[Conque](http://code.google.com/p/conque/)。它有缺点（可能很慢，更新不那么频繁等），但至少它可以满足您的期望。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T13:15:13.917

Vim Wiki 作为[这个秘诀，](http://vim.wikia.com/wiki/Compiling_LaTeX_from_Vim#Manual_setup)我认为它将通过完全消除对外部 shell 的需要来解决您的问题。在这里，如果源变暗：

```
let b:tex_flavor = 'pdflatex'
compiler tex
set makeprg=pdflatex\ \-file\-line\-error\ \-interaction=nonstopmode
set errorformat=%f:%l:\ %m 
```

基本上，您使用`:make`编译和快速修复窗口 ( `:copen`) 来列出错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T09:56:56.617

您可以通过调用在 vim 中运行 shell 命令`!command`。

对于您运行 pdflatex 的特定用例，我在我的 中添加了以下快捷方式`/etc/vimrc`：

```
:nmap <F5> :w<CR>:make<CR> 
```

`:make`将在当前目录中调用[gnu make](http://www.gnu.org/software/make/)，最终将调用`pdflatex`. 这是非常灵活的，因为相同的快捷方式会根据您所在的目录执行不同的操作（如果您使用 C 进行编码，它通常会调用`gcc`）。但是你必须精通make :)。

所以按 F5 可以保存我的文档并对其进行编译，并且现在可以节省我多年的打字时间 :)。

# google-chrome - WebRTC：允许 Chrome 通过 Chrome 扩展访问麦克风

> ID：12088980
> 
> 赞同：3
> 
> 时间：2012-08-23T09:47:59.993
> 
> 标签：google-chrome, microphone, webrtc

我是 WebRTC 的新手，并且玩了一下。但是每次我重新加载页面以查看代码的最新更改时，我都必须允许 Chrome 访问我的麦克风。现在我听说可以编写一个扩展程序（应用程序）来赋予这个特殊站点（现在是本地主机）始终访问麦克风的权限。其他将使用麦克风的站点不包含在此扩展程序中。

有谁知道这是否可能以及如何做到这一点？

感谢到目前为止

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:29:45.863

目前还不可能，但我们正在努力将其添加到即将发布的 Chrome 版本中。

# javascript - 如何更改动态添加的li item jquery mobile的主题？

> ID：12088981
> 
> 赞同：0
> 
> 时间：2012-08-23T09:47:59.510
> 
> 标签：javascript, jquery-mobile

我尝试更改选定的 li 项目，例如>

```
$("#subtypeId"+key+"").closest('li').attr('data-theme','e');
$("#subtypeId"+key+"").closest('li').attr('data-icon','plus'); 
```

但这似乎无法正常工作（主题属性在代码中更改，但颜色主题相同）。

是否有可能在没有混乱代码的情况下轻松完成（删除和替换项目）？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:11:38.113

您可以通过以下方式更改 JQM 数据图标和数据主题：

```
$("#subtypeId"+key+"").closest('li').jqmData('icon','plus');
$("#subtypeId"+key+"").closest('li').jqmData('theme','e'); 
```

BR，
托利斯

# android - 为什么不能在 Fragment 中使用 ViewPager？它实际上是

> ID：12088983
> 
> 赞同：37
> 
> 时间：2012-08-23T09:48:02.890
> 
> 标签：android, android-fragments, android-viewpager, commonsware

有一些信息是不可能在许多来源中使用`ViewPager`的，比如 Mark Murphy 的“ [The Busy Coders Guide for Android Developers](http://commonsware.com) ”，或者在 SO 上[这样的帖子。](https://stackoverflow.com/questions/7700226/display-fragment-viewpager-within-a-fragment/)我很困惑，因为我没有这样的问题，并且我成功地在我的. 唯一的区别是我不是在方法中而是在. 一切都很好。`Fragment``ViewPager``Fragment``ViewPager``onCreateView()``onActivityCreated()`

所以问题是 - 可能我只是不知道一些事情，并且出于某种原因不建议在其中进行 UI 实例化`onActivityCreated()`？但同样 - 一切正常。

这是类和xml的列表：

### 班级：

```
public class ViewPagerFragment extends Fragment {

    static final int NUM_ITEMS = 2;

    private ViewPagerAdapter mAdapter;
    private ViewPager mPager;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.view_pager_fragment, container, false);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        mAdapter = new ViewPagerAdapter(getFragmentManager());

        mPager = (ViewPager) getView().findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);
    }

    public static class ViewPagerAdapter extends FragmentPagerAdapter {
        public ViewPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int num) {
            if (num == 0) {
                return new ItemsListFragment();
            } else {
                return new FavsListFragment();
            }
        }

        @Override
        public int getCount() {
            return NUM_ITEMS;
        }
    }
} 
```

### 布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical">

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2014-10-30T13:39:24.300

要在片段中实现视图寻呼机，请使用**getChildFragmentManager()**而不是**getFragmentManager()**。您可以从**onCreateView()**或**onViewCreated(** **) 为 ViewPager 调用 setAdapter(** ) ，这不是问题。

 ****我希望这会对你们有所帮助。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-08-23T11:08:41.617

**更新**：由于最初编写了此答案，因此您现在可以嵌套片段，这意味着可以`ViewPager`为页面使用片段*并*位于片段本身中。[此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/Nested)演示了该技术。

我现在返回您定期安排的答案，完整呈现...

* * *

引用书中自己的话：

> 使用 ViewPager 的最简单方法是根据用户滑动将页面片段进出屏幕。这仅在 ViewPager 本身不包含在片段中时才有效，因为您不能将片段嵌套在其他片段中。

引用[Dianne Hackborn 的话](https://stackoverflow.com/questions/6847460/fragments-within-fragments/6847770#6847770)：

> 当前不支持嵌套片段。试图将一个片段放在另一个片段的 UI 中会导致未定义且可能会损坏的行为。

完全可以将 a`ViewPager`放在 a`Fragment`中，只要其内容*本身*`ViewPager` *不包含片段*即可。由于 Android Support 包提供的具体实现`PagerAdapter`使用片段，因此您必须滚动自己的无片段`PagerAdapter`才能将其`ViewPager`放入片段中。

我将努力在本书的下一版中更清楚地说明这一点（除非你是英国人，在这种情况下，我会努力使这一点更清楚:-)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-22T09:41:31.223

在为 ViewPager 初始化 SetionPageAdapter 时，使用“getChildFragmentManager()”。

> mSectionsPagerAdapter = new SectionsPagerAdapter(getChildFragmentManager());

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-30T10:23:09.450

可以尝试执行此代码并保存 view_pager_fragment.xml

```
<android.support.design.widget.AppBarLayout
    android:id="@+id/appBarLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar">

    <android.support.design.widget.TabLayout
        android:id="@+id/tab"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</android.support.design.widget.AppBarLayout>

<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    app:layout_behavior="@string/appbar_scrolling_view_behavior" /> 
```

查看PagerFragment

```
ViewPager viewPager;
TabLayout tabLayout;

@Nullable
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.tracks, container, false);

    viewPager = (ViewPager) view.findViewById(R.id.viewpager);
    tabLayout = (TabLayout) view.findViewById(R.id.tab);

    return view;
}

@Override
public void onActivityCreated(@Nullable Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    setupViewPager(viewPager);
    tabLayout.setupWithViewPager(viewPager);

    tabLayout.setOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {
        @Override
        public void onTabSelected(TabLayout.Tab tab) {

        }

        @Override
        public void onTabUnselected(TabLayout.Tab tab) {

        }

        @Override
        public void onTabReselected(TabLayout.Tab tab) {

        }
    });
}

private void setupViewPager(ViewPager viewPager) {
    ViewPagerAdapter viewPagerAdapter = new ViewPagerAdapter(getChildFragmentManager());``

    viewPager.setAdapter(viewPagerAdapter);
}

public class ViewPagerAdapter extends FragmentStatePagerAdapter {
    public ViewPagerAdapter(FragmentManager manager) {
        super(manager);
    }

    @Override
    public Fragment getItem(int position) {
        if(position == 0) return new SampleFragment();
        if(position == 1) return new SampleFragment2();
        if(position == 2) return new SampleFragment3();
        throw new IllegalStateException("Unexpected position " + position);
    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        if(position == 0) return "Tab 1";
        if(position == 1) return "Tab 2";
        if(position == 2) return "Tab 3";
        throw new IllegalStateException("Unexpected position " + position);
    }
} 
```****

# shell - 应用程序和外壳之间的区别

> ID：12088998
> 
> 赞同：3
> 
> 时间：2012-08-23T09:48:54.270
> 
> 标签：shell

我将在不久的将来就 Microsoft PowerShell 进行演示。作为对此的介绍，我想简要解释一下什么是[内核](http://en.wikipedia.org/wiki/Kernel_%28computing%29)和什么是[外壳](http://en.wikipedia.org/wiki/Shell_%28computing%29)。

现在我知道 shell 是一个软件，它允许你与内核通信并让它做一些事情。例如，Windows cmd.exe 是一个（命令行）shell。然而，Windows GUI 本身是一个（图形）外壳，因为它还用于告诉内核执行您希望它执行的操作。

在解释了什么是 shell 之后，我想澄清它与应用程序的不同之处，但我在这里有点呆。应用程序（例如 Word 或 Serious Sam）本身不是也告诉内核“做事”吗？您将如何解释应用程序或外壳之间的区别（或者您是否将应用程序视为外壳）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:52:38.037

这张图片可以解释一些事情。细节不多，但有助于基本理解。请参见

![Linux 架构](../Images/b41e5627c7d20d4563f5090a1b0c88d3.png)

还要详细说明，`applications`是使用 api 构建的高级组件，系统库，`application`层和层之间有一种`kernel`层。

[参考链接](http://www.penguintutor.com/linux/basic-shell-reference)

希望这可以帮助。