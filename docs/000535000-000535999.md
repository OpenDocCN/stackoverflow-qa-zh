# StackOverflow 问答 000535000-000535999

# svn - 如何使用 svn 中的属性进行条件结帐？

> ID：535002
> 
> 赞同：0
> 
> 时间：2009-02-11T00:52:21.173
> 
> 标签：svn, version-control, properties, svn-checkout

是否有可能根据 svn 版本文件的属性从存储库中签出？那将是一种特殊的稀疏结帐。例如，仅签出带有“svn:corelib”==“yes”的文件。

或者只是检查整个回购并稍后删除不需要的文件的唯一机会？例如，使用脚本为每个文件提取带有“svn propget svn:corelib”的道具并检查数据？

（第三个选项当然只是将 corelib-files 和 noncorelib-files 的 repos 分开。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T01:06:34.837

通过阅读[http://svnbook.red-bean.com/en/1.5/svn.advanced.props.html](http://svnbook.red-bean.com/en/1.5/svn.advanced.props.html)，Subversion 似乎无法做到这一点:-( 您可能必须搜索手动存储库以获取具有属性集的列表，然后将其签出。

如果将 corelib 和非 corelib 文件放在不同的存储库中，甚至是同一存储库中的不同目录树对您来说是合理的，那几乎可以肯定是最好和最有效的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-14T00:01:25.340

您可以在不签出的情况下查询文件的属性。您可以在收集要签出的文件名的 shell 脚本中使用此功能。

上市属性：

`svn proplist http://repo/path/to/file`

获取特定属性的值：

`svn propget svn:corelib http://repo/path/to/file`

如果您`propget`使用的文件没有请求的属性，您将得到一个空字符串。

# apache-flex - Flex 中的图像映射

> ID：535003
> 
> 赞同：2
> 
> 时间：2009-02-11T00:52:47.520
> 
> 标签：apache-flex, adobe, imagemap, flex-builder-3

有人有在 Flex 中做类似图像映射的例子吗？我不确定这是否是正确的术语，因为我还想做一些事情，比如突出图像的选定部分或显示一个指向它的弹出气泡。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-11T01:36:10.973

看看这个：[flexlib](http://code.google.com/p/flexlib/wiki/ComponentList) > ImageMap

# java - Unix 纪元时间到 Java Date 对象

> ID：535004
> 
> 赞同：97
> 
> 时间：2009-02-11T00:53:02.217
> 
> 标签：java, date, java-time

我有一个包含[UNIX Epoch time](https://en.wikipedia.org/wiki/Unix_time)的字符串，我需要将其转换为 Java Date 对象。

```
String date = "1081157732";
DateFormat df = new SimpleDateFormat(""); // This line
try {
  Date expiry = df.parse(date);
 } catch (ParseException ex) {
  ex.getStackTrace();
} 
```

标记线是我遇到麻烦的地方。我无法弄清楚 SimpleDateFormat() 的参数应该是什么，或者即使我应该使用 SimpleDateFormat()。

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2009-02-11T00:57:31.847

怎么样：

```
Date expiry = new Date(Long.parseLong(date)); 
```

编辑：根据[rde6173](https://stackoverflow.com/users/62195/rde6173)的回答并仔细查看问题中指定的输入，“1081157732”似乎是基于秒的纪元值，因此您需要将 parseLong() 的 long 乘以 1000 以进行转换到毫秒，这是 Java 的 Date 构造函数使用的，所以：

```
Date expiry = new Date(Long.parseLong(date) * 1000); 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2009-02-11T01:00:53.320

纪元是自 1970 年 1 月 1 日以来的**秒数。**

所以：

```
String epochString = "1081157732";
long epoch = Long.parseLong( epochString );
Date expiry = new Date( epoch * 1000 ); 
```

欲了解更多信息： [http ://www.epochconverter.com/](http://www.epochconverter.com/)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-12-23T21:43:09.173

# java.time

使用[`java.time`](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)Java 8 及更高版本中内置的框架。

```
import java.time.LocalDateTime;
import java.time.Instant;
import java.time.ZoneId;

long epoch = Long.parseLong("1081157732");
Instant instant = Instant.ofEpochSecond(epoch);
ZonedDateTime.ofInstant(instant, ZoneOffset.UTC); # ZonedDateTime = 2004-04-05T09:35:32Z[UTC] 
```

在这种情况下，您最好将[`ZonedDateTime`](http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html)其标记为[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)时区中的日期，因为 Epoch 是在Java 使用的[Unix 时间中以 UTC 定义的。](https://en.wikipedia.org/wiki/Unix_time)

[`ZoneOffset`](http://docs.oracle.com/javase/8/docs/api/java/time/ZoneOffset.html)包含一个方便的 UTC 时区常量，如上面最后一行所示。它的超类，[`ZoneId`](http://docs.oracle.com/javase/8/docs/api/java/time/ZoneId.html)可用于调整到其他时区。

```
ZoneId zoneId = ZoneId.of( "America/Montreal" ); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-02-11T00:56:24.267

```
long timestamp = Long.parseLong(date)
Date expiry = new Date(timestamp * 1000) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T01:23:11.987

更好的是，使用[JodaTime](http://joda-time.sourceforge.net/)。更容易解析字符串并转换成字符串。也是线程安全的。值得您花时间来实施它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-26T00:04:25.953

将秒时间戳转换为毫秒时间戳。您可以像这样使用 TimeUnit API 和整洁。

`long milliSecondTimeStamp = MILLISECONDS.convert(secondsTimeStamp, SECONDS)`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-02-11T00:57:51.003

嗯....如果我没记错的话，UNIX Epoch 时间实际上和

```
System.currentTimeMillis() 
```

所以写

```
try {
    Date expiry = new Date(Long.parseLong(date));
}
catch(NumberFormatException e) {
    // ...
} 
```

应该可以工作（并且比日期解析要快得多）

# delphi - 我在哪里可以找到 Delphi 的图像水印控件？

> ID：535010
> 
> 赞同：2
> 
> 时间：2009-02-11T00:55:04.787
> 
> 标签：delphi, image, watermark

Delphi有很好的图像水印控制吗？如果它可以同时接收文本和图像以插入基本照片中，那就太好了。

我也希望它是免费的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T06:18:12.480

我找不到任何预打包的控件。但是加水印一点也不难。您只需要使用 Alpha 混合在另一个图像上绘制一个图像。 [该](http://www.efg2.com/Lab/Library/Delphi/Graphics/Algorithms.htm)站点有一整节介绍 Delphi 中的 alpha 混合。它们提供了已实现它的图形库的链接。

但是，如果您使用的是 Delphi.NET，并且可以访问框架中的相关类，则可以使用仅使用框架方法的更简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-12T08:56:38.410

一起看看[Graphics32和](http://graphics32.org/wiki/)[GraphicEX](http://www.soft-gems.net/index.php?option=com_content&task=view&id=13&Itemid=33)。

或者看看[PascalMagick](http://wiki.lazarus.freepascal.org/PascalMagick)是否能解决问题。

# c# - 从 MbUnit 中的多个夹具运行单个单元测试

> ID：535011
> 
> 赞同：0
> 
> 时间：2009-02-11T00:55:09.653
> 
> 标签：c#, unit-testing, mbunit

无论如何要向 [TestFixture] 中的 [Test] 方法添加一个属性，以便只有该方法运行？这将类似于 [CurrentFixture] 属性可用于仅运行单个夹具的方式。我有时会问，当我测试模型时，我想分析正在执行的 sql，我只想专注于单个测试。目前我必须注释掉夹具中的所有其他测试。

**更新：**

下面是我用来启动测试的代码，我真的在寻找可以融入此代码的解决方案。

```
public static void Run(bool currentFixturesOnly) {
    using(AutoRunner auto = new AutoRunner()) {

        if(currentFixturesOnly) { // for processing [CurrentFixture]s only
            auto.Domain.Filter = FixtureFilters.Current;
        }

        auto.Verbose = true;
        auto.Run();
        auto.ReportToHtml();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-11T17:46:02.610

如果您使用像 TestDriven.Net、ReSharper 或 Icarus 这样的测试运行程序，那么您可以选择要运行的特定测试并运行它。如果您使用的是命令行工具，请考虑使用过滤器。

例如。

Gallio.Echo MyTestAssembly.dll /f:Name:TheNameOfTheParticularIWantToRun

# php - 在 PHP 中跟踪脚本执行时间

> ID：535020
> 
> 赞同：328
> 
> 时间：2009-02-11T00:58:31.033
> 
> 标签：php, performance

PHP 必须跟踪特定脚本使用的 CPU 时间量，以强制执行 max_execution_time 限制。

有没有办法在脚本内部访问它？我想在我的测试中包含一些关于实际 PHP 中消耗了多少 CPU 的日志记录（当脚本等待数据库时，时间不会增加）。

我正在使用 Linux 机器。

* * *

## 回答 #1

> 赞同：628
> 
> 时间：2012-02-15T06:37:08.817

如果您只需要挂钟时间，而不是 CPU 执行时间，那么计算起来很简单：

```
//place this before any script you want to calculate time
$time_start = microtime(true); 

//sample script
for($i=0; $i<1000; $i++){
 //do anything
}

$time_end = microtime(true);

//dividing with 60 will give the execution time in minutes otherwise seconds
$execution_time = ($time_end - $time_start)/60;

//execution time of the script
echo '<b>Total Execution Time:</b> '.$execution_time.' Mins';
// if you get weird results, use number_format((float) $execution_time, 10) 
```

请注意，这将包括 PHP 等待外部资源（例如磁盘或数据库）的时间，这些资源不用于`max_execution_time`.

* * *

## 回答 #2

> 赞同：263
> 
> 时间：2009-02-11T01:07:49.480

在 unixoid 系统上（以及在 Windows 上的 php 7+ 中），您可以使用[getrusage](http://php.net/getrusage)，例如：

```
// Script start
$rustart = getrusage();

// Code ...

// Script end
function rutime($ru, $rus, $index) {
    return ($ru["ru_$index.tv_sec"]*1000 + intval($ru["ru_$index.tv_usec"]/1000))
     -  ($rus["ru_$index.tv_sec"]*1000 + intval($rus["ru_$index.tv_usec"]/1000));
}

$ru = getrusage();
echo "This process used " . rutime($ru, $rustart, "utime") .
    " ms for its computations\n";
echo "It spent " . rutime($ru, $rustart, "stime") .
    " ms in system calls\n"; 
```

请注意，如果您为每个测试生成一个 php 实例，则不需要计算差异。

* * *

## 回答 #3

> 赞同：135
> 
> 时间：2013-08-27T00:01:30.890

talal7860 答案的较短版本

```
<?php
// At start of script
$time_start = microtime(true); 

// Anywhere else in the script
echo 'Total execution time in seconds: ' . (microtime(true) - $time_start); 
```

正如所指出的，这是“挂钟时间”而不是“CPU时间”

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2013-05-17T15:41:35.570

```
<?php
// Randomize sleeping time
usleep(mt_rand(100, 10000));

// As of PHP 5.4.0, REQUEST_TIME_FLOAT is available in the $_SERVER superglobal array.
// It contains the timestamp of the start of the request with microsecond precision.
$time = microtime(true) - $_SERVER["REQUEST_TIME_FLOAT"];

echo "Did nothing in $time seconds\n";
?> 
```

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2014-04-05T18:32:04.010

我从 phihag 答案中创建了一个 ExecutionTime 类，您可以立即使用它：

```
class ExecutionTime
{
     private $startTime;
     private $endTime;

     public function start(){
         $this->startTime = getrusage();
     }

     public function end(){
         $this->endTime = getrusage();
     }

     private function runTime($ru, $rus, $index) {
         return ($ru["ru_$index.tv_sec"]*1000 + intval($ru["ru_$index.tv_usec"]/1000))
     -  ($rus["ru_$index.tv_sec"]*1000 + intval($rus["ru_$index.tv_usec"]/1000));
     }    

     public function __toString(){
         return "This process used " . $this->runTime($this->endTime, $this->startTime, "utime") .
        " ms for its computations\nIt spent " . $this->runTime($this->endTime, $this->startTime, "stime") .
        " ms in system calls\n";
     }
 } 
```

用法：

```
$executionTime = new ExecutionTime();
$executionTime->start();
// code
$executionTime->end();
echo $executionTime; 
```

> 注意：在 PHP 5 中，getrusage 函数仅适用于 Unix-oid 系统。从 PHP 7 开始，它也可以在 Windows 上运行。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2013-01-29T19:11:53.763

developerfusion.com 上的 Gringod 给出了很好的答案：

```
<!-- put this at the top of the page --> 
<?php 
   $mtime = microtime(); 
   $mtime = explode(" ",$mtime); 
   $mtime = $mtime[1] + $mtime[0]; 
   $starttime = $mtime; 
;?> 

<!-- put other code and html in here -->

<!-- put this code at the bottom of the page -->
<?php 
   $mtime = microtime(); 
   $mtime = explode(" ",$mtime); 
   $mtime = $mtime[1] + $mtime[0]; 
   $endtime = $mtime; 
   $totaltime = ($endtime - $starttime); 
   echo "This page was created in ".$totaltime." seconds"; 
;?> 
```

来自（[http://www.developerfusion.com/code/2058/determine-execution-time-in-php/](http://www.developerfusion.com/code/2058/determine-execution-time-in-php/)）

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2017-11-22T21:40:21.510

如果您将秒输出格式化为：

```
echo "Process took ". number_format(microtime(true) - $start, 2). " seconds."; 
```

将打印

```
Process took 6.45 seconds. 
```

这比

```
Process took 6.4518549156189 seconds. 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2019-01-17T15:25:10.173

要显示分钟和秒，您可以使用：

```
 $startTime = microtime(true);
    $endTime = microtime(true);
    $diff = round($endTime - $startTime);
    $minutes = floor($diff / 60); //only minutes
    $seconds = $diff % 60;//remaining seconds, using modulo operator
    echo "script execution time: minutes:$minutes, seconds:$seconds"; //value in seconds 
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2009-02-11T01:06:14.383

最便宜和最肮脏的方法就是`microtime()`在代码中要进行基准测试的地方进行调用。在数据库查询之前和之后立即执行此操作，很容易从脚本执行时间的其余部分中删除这些持续时间。

提示：您的 PHP 执行时间很少会导致脚本超时。如果脚本超时，它几乎总是会调用外部资源。

PHP 微时间文档： [http ://us.php.net/microtime](http://us.php.net/microtime)

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2009-02-22T20:47:30.120

我认为你应该看看xdebug。分析选项将使您在了解许多与流程相关的项目方面处于领先地位。

[http://www.xdebug.org/](http://www.xdebug.org/)

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2020-03-18T21:05:36.417

# `$_SERVER['REQUEST_TIME']`

也检查一下。IE

```
...
// your codes running
...
echo (time() - $_SERVER['REQUEST_TIME']); 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2020-07-30T14:17:15.253

当 PHP 中有闭包功能时，我们为什么不从中受益呢？

```
function startTime(){
    $startTime = microtime(true);
    return function () use ($startTime){
        return microtime(true) - $startTime;
    };
} 
```

现在借助上述功能，我们可以像这样跟踪时间

```
$stopTime = startTime();
//some code block or line
$elapsedTime = $stopTime(); 
```

每次调用`startTime`函数都会启动一个单独的时间跟踪器。因此，您可以根据需要发起任意数量的活动，也可以在任何需要的地方阻止它们。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-09-27T11:10:48.077

我写了一个检查剩余执行时间的函数。

**警告：** Windows 和 Linux 平台上的执行时间计数不同。

```
/**
 * Check if more that `$miliseconds` ms remains
 * to error `PHP Fatal error:  Maximum execution time exceeded`
 * 
 * @param int $miliseconds
 * @return bool
 */
function isRemainingMaxExecutionTimeBiggerThan($miliseconds = 5000) {
    $max_execution_time = ini_get('max_execution_time');
    if ($max_execution_time === 0) {
        // No script time limitation
        return true;
    }
    if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN') {
        // On Windows: The real time is measured.
        $spendMiliseconds = (microtime(true) - $_SERVER["REQUEST_TIME_FLOAT"]) * 1000;
    } else {
        // On Linux: Any time spent on activity that happens outside the execution
        //           of the script such as system calls using system(), stream operations
        //           database queries, etc. is not included.
        //           @see http://php.net/manual/en/function.set-time-limit.php
        $resourceUsages = getrusage();
        $spendMiliseconds = $resourceUsages['ru_utime.tv_sec'] * 1000 + $resourceUsages['ru_utime.tv_usec'] / 1000;
    }
    $remainingMiliseconds = $max_execution_time * 1000 - $spendMiliseconds;
    return ($remainingMiliseconds >= $miliseconds);
} 
```

使用：

```
while (true) {
    // so something

    if (!isRemainingMaxExecutionTimeBiggerThan(5000)) {
        // Time to die.
        // Safely close DB and done the iteration.
    }
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-12-08T23:22:07.723

进一步扩展 Hamid 的答案，我编写了一个可以重复启动和停止的辅助类（用于在循环内进行分析）。

```
 class ExecutionTime
   {
      private $startTime;
      private $endTime;
      private $compTime = 0;
      private $sysTime = 0;

      public function Start(){
         $this->startTime = getrusage();
      }

      public function End(){
         $this->endTime = getrusage();
         $this->compTime += $this->runTime($this->endTime, $this->startTime, "utime");
         $this->systemTime += $this->runTime($this->endTime, $this->startTime, "stime");
      }

      private function runTime($ru, $rus, $index) {
         return ($ru["ru_$index.tv_sec"]*1000 + intval($ru["ru_$index.tv_usec"]/1000))
         -  ($rus["ru_$index.tv_sec"]*1000 + intval($rus["ru_$index.tv_usec"]/1000));
      }

      public function __toString(){
         return "This process used " . $this->compTime . " ms for its computations\n" .
                "It spent " . $this->systemTime . " ms in system calls\n";
      }
   } 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-08-05T06:17:55.613

**打印在页面底部居中的小脚本，以微秒精度**在服务器调用开始的脚本执行。

*为了不扭曲结果并与页面中的内容 100% 兼容，我使用了浏览器端的原生 JavaScript 片段来将结果写在页面上。*

```
//Uncomment the line below to test with 2 seconds 
//usleep(2000000);

$prec = 5; // numbers after comma
$time = number_format(microtime(true) - $_SERVER['REQUEST_TIME_FLOAT'], $prec, '.', '');
echo "<script>
    if(!tI) { 
        var tI=document.createElement('div');
        tI.style.fontSize='8px';
        tI.style.marginBottom='5px';
        tI.style.position='absolute';
        tI.style.bottom='0px';
        tI.style.textAlign='center';
        tI.style.width='98%';
        document.body.appendChild(tI);
    }
    tI.innerHTML='$time';
</script>"; 
```

另一种方法是使片段尽可能小，并使用样式表中的类对其进行样式设置。

1.  将`echo ...;`零件替换为以下内容：

    `echo "<script>if(!tI){var tI=document.createElement('div');tI.className='ldtme';document.body.appendChild(tI);}tI.innerHTML='$time';</script>";`

2.  在您的 CSS 中创建并填充`.ldtme{...}`类。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-12-10T22:31:15.990

您可能只想知道部分脚本的执行时间。对部分或整个脚本进行计时的最灵活方法是创建 3 个简单函数（此处提供了过程代码，但您可以通过在其周围放置类计时器{} 并进行一些调整来将其变成一个类）。此代码有效，只需复制并粘贴并运行：

```
$tstart = 0;
$tend = 0;

function timer_starts()
{
global $tstart;

$tstart=microtime(true); ;

}

function timer_ends()
{
global $tend;

$tend=microtime(true); ;

}

function timer_calc()
{
global $tstart,$tend;

return (round($tend - $tstart,2));
}

timer_starts();
file_get_contents('http://google.com');
timer_ends();
print('It took '.timer_calc().' seconds to retrieve the google page'); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-12-29T13:38:52.910

只是为了促成这次谈话：

*   如果测量针对不同 php 文件中的两个点 A 和 B 会发生什么？

*   如果我们需要不同的度量，例如基于时间、代码执行持续时间、外部资源访问持续时间，该怎么办？

*   如果我们需要在每个类别都有不同起点的类别中组织我们的测量怎么办？

您怀疑我们需要一些全局变量才能被类对象或静态方法访问：我选择第二种方法，这里是：

```
namespace g3;

class Utils {
   public function __construct() {}

   public static $UtilsDtStart = [];
   public static $UtilsDtStats = [];

   public static function dt() {
      global $UtilsDtStart, $UtilsDtStats;
      $obj = new \stdClass();
      $obj->start = function(int $ndx = 0) use (&$UtilsDtStart) {
         $UtilsDtStart[$ndx] = \microtime(true) * 1000;
      };
      $obj->codeStart = function(int $ndx = 0) use (&$UtilsDtStart) {
         $use = \getrusage();
         $UtilsDtStart[$ndx] = ($use["ru_utime.tv_sec"] * 1000) + ($use["ru_utime.tv_usec"] / 1000);
      };
      $obj->resourceStart = function(int $ndx = 0) use (&$UtilsDtStart) {
         $use = \getrusage();
         $UtilsDtStart[$ndx] = $use["ru_stime.tv_usec"] / 1000;
      };
      $obj->end = function(int $ndx = 0) use (&$UtilsDtStart, &$UtilsDtStats) {
         $t = @$UtilsDtStart[$ndx];
         if($t === null)
            return false;
         $end = \microtime(true) * 1000;
         $dt = $end - $t;
         $UtilsDtStats[$ndx][] = $dt;
         return $dt;
      };
      $obj->codeEnd = function(int $ndx = 0) use (&$UtilsDtStart, &$UtilsDtStats) {
         $t = @$UtilsDtStart[$ndx];
         if($t === null)
            return false;
         $use = \getrusage();
         $dt = ($use["ru_utime.tv_sec"] * 1000) + ($use["ru_utime.tv_usec"] / 1000) - $t;
         $UtilsDtStats[$ndx][] = $dt;
         return $dt;
      };
      $obj->resourceEnd = function(int $ndx = 0) use (&$UtilsDtStart, &$UtilsDtStats) {
         $t = @$UtilsDtStart[$ndx];
         if($t === null)
            return false;
         $use = \getrusage();
         $dt = ($use["ru_stime.tv_usec"] / 1000) - $t;
         $UtilsDtStats[$ndx][] = $dt;
         return $dt;
      };
      $obj->stats = function(int $ndx = 0) use (&$UtilsDtStats) {
         $s = @$UtilsDtStats[$ndx];
         if($s !== null)
            $s = \array_slice($s, 0);
         else
            $s = false;
         return $s;
      };
      $obj->statsLength = function() use (&$UtilsDtStats) {
         return \count($UtilsDtStats);
      };
      return $obj;
   }
} 
```

现在您所要做的就是调用属于特定类别的方法，并使用指示它的唯一组的索引：

```
File A
------
\call_user_func_array(\g3\Utils::dt()->start, [0]);   // point A
...
File B
------
$dt = \call_user_func_array(\g3\Utils::dt()->end, [0]);  // point B 
```

值`$dt`包含点 A 和 B 之间的挂钟持续时间的毫秒数。

估计运行 php 代码所花费的时间：

```
File A
------
\call_user_func_array(\g3\Utils::dt()->codeStart, [1]);   // point A
...
File B
------
$dt = \call_user_func_array(\g3\Utils::dt()->codeEnd, [1]);  // point B 
```

请注意我们如何更改在方法中传递的索引。

该代码基于当我们从函数返回对象/函数时发生的闭包效应（参见`\g3\Utils::dt()`示例中重复的内容）。

我在同一个测试文件中使用 php 单元和不同的测试方法进行了测试，到目前为止它表现良好！

希望对某人有所帮助！

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-09-12T11:55:24.707

作为替代方案，您可以将这一行放在代码块中并检查 php 日志，对于非常慢的功能，它非常有用：

```
trigger_error("Task done at ". strftime('%H:%m:%S', time()), E_USER_NOTICE); 
```

对于严重的调试使用 XDebug + Cachegrind，请参阅[https://blog.nexcess.net/2011/01/29/diagnosing-slow-php-execution-with-xdebug-and-kcachegrind/](https://blog.nexcess.net/2011/01/29/diagnosing-slow-php-execution-with-xdebug-and-kcachegrind/)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-02-15T16:43:19.913

有几种方法可以做到这一点，这里列出。但每个人都有自己的优点和缺点。而且（在我看来）所有较长答案的可读性都很糟糕。

因此，我决定将所有内容放在一个答案中，该答案易于使用和阅读。

## 用法

```
$start = get_timers();
for( $i = 0; $i < 100000; $i++ ){
  // Code to check
}
$end = get_timers();
display_timer_statistics( $start, $end ); 
```

## 函数定义

```
function display_timer_statistics( $start_timers, $end_timers ){

    // Settings
    $key_width = '100px';
    $decimals = 4;
    $decimals_wallclock = $decimals;
    $decimals_request_time_float = $decimals;

    // Variables
    $start_resource_usage_timer = $start_timers[0];
    $start_wallclock = $start_timers[1];
    $end_resource_usage_timer = $end_timers[0];
    $end_wallclock = $end_timers[1];

    // # User time
    // Add seconds and microseconds for the start/end, and subtract from another
    $end_user_time_seconds = $end_resource_usage_timer["ru_utime.tv_sec"]*1000;
    $end_user_time_microseconds = intval($end_resource_usage_timer["ru_utime.tv_usec"]/1000);
    $start_user_time_seconds = $start_resource_usage_timer["ru_utime.tv_sec"]*1000;
    $start_user_time_microseconds = intval($start_resource_usage_timer["ru_utime.tv_usec"]/1000);
    $total_user_time = ($end_user_time_seconds + $end_user_time_microseconds) - ($start_user_time_seconds + $start_user_time_microseconds);

    // # System time
    // Add seconds and microseconds for the start/end, and subtract from another
    $end_system_time_seconds = $end_resource_usage_timer["ru_stime.tv_sec"]*1000;
    $end_system_time_microseconds = intval($end_resource_usage_timer["ru_stime.tv_usec"]/1000);
    $start_system_time_seconds = $start_resource_usage_timer["ru_stime.tv_sec"]*1000;
    $start_system_time_microseconds = intval($start_resource_usage_timer["ru_stime.tv_usec"]/1000);
    $total_system_time = ($end_system_time_seconds + $end_system_time_microseconds) - ($start_system_time_seconds + $start_system_time_microseconds);

    // Wallclock
    $total_wallclock_time = number_format( ( $end_wallclock - $start_wallclock), $decimals_wallclock );

    // Server request_time_float
    $request_time_float = microtime(true) - $_SERVER["REQUEST_TIME_FLOAT"];
    $request_time_float = number_format( $request_time_float, $decimals_request_time_float );

    // Print
    $span_start = "<span style='width: $key_width; display: inline-block;'>";
    $span_end = "</span>";

    $output = "# RUNTIME AND TIMERS " . PHP_EOL ;
    $output .= PHP_EOL;
    $output .= $span_start . $total_user_time . $span_end . " User time (utime)" . PHP_EOL;
    $output .= $span_start . $total_system_time . $span_end . " System time (stime)" . PHP_EOL;
    $output .= PHP_EOL;
    $output .= $span_start . $total_wallclock_time . $span_end . " Wallclock" . PHP_EOL;
    $output .= PHP_EOL;
    $output .= $span_start . $request_time_float . $span_end . " REQUEST_TIME_FLOAT" . PHP_EOL . PHP_EOL . PHP_EOL;

    echo nl2br( $output );
}

function get_timers(){
    return [ getrusage(), microtime( true ) ];
} 
```

## 词汇表

全部来自[getrusage 的 PHP 文档](https://www.php.net/manual/en/function.getrusage.php)

*   挂钟 = 需要多长时间
*   `ru`= 资源使用
*   `utime`= 用户使用时间
*   `stime`= 使用的系统时间
*   `tv_sec`= 以秒为单位。
*   `tv_usec`= 以微秒为单位。
*   `tv`= ?? 不知道。

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2019-04-03T23:58:59.937

return microtime(true) - $_SERVER["REQUEST_TIME_FLOAT"];

# javascript - 替换或管理来自 ajax 请求的 json 数据

> ID：535028
> 
> 赞同：1
> 
> 时间：2009-02-11T01:01:30.683
> 
> 标签：javascript, jquery, json

我有一个页面，它发出 ajax 请求并以 json 格式获取数据。

在将其添加到 DOM 之前，我需要对这些数据进行排序，因此将其放入具有以下代码的对象中

```
function(data) {
  var birthDates = {};
  var uids = {};
  $.each(data.users, function() {

    if (!uids[this.uid]) {
      uids[this.uid] = [];
      uids[this.uid].push(this);
    }
    if (!birthDates[this.birthDate])
      birthDates[this.birthDate] = [];
    birthDates[this.birthDate].push(this);
  });
  for (var d in birthDates) {
    var date = d;
    $('div#holdDates').append('<ul class="dayList" id="' + date + '"><li class="date" >' + date + '</li></ul>');
    $.each(birthDates[date], function() {
      $('ul#' + date).append('<li class="show" id="' + this.uid + '">' + this.name + '</li>');
    });
  }

  $('li.show').click(function() {
        var getuid = $(this).attr('id');
        $showArr = uids[getuid];
        // now I can get the extended data about the user 
```

当页面第一次加载时，这一切都很好，但是我遇到了两个问题，都是由于发出第二个 ajax 请求 1）如果我发出相同的 ajax 请求（给出相同的变量，所以相同的数据再次返回），然后数据被两次添加到新创建的对象（uids 和birthDates）中，我不知道如何将其保持为唯一 2）有时（我无法做到调试找出原因）我没有从 uids 对象获得任何扩展的用户数据。（我在 li 点击后做的事情

有任何想法吗？我这样做有效率吗？我发现你不能清空你创建的对象很奇怪，但显然我正在阅读的所有内容都表明你不能。

## 添加

好吧，在发布这个之后，我接下来要做的是构建一个动态标签云，它依赖于返回的 json。所以，现在我又遇到了同样的问题。每次请求后，我都需要将云标记为新的。我真的希望有一种方法可以摆脱 javascript 中的“遗留”数据。

谢谢，皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-15T13:16:20.230

每次调用函数时，都会重新创建在函数（数据）中使用 var 关键字声明的所有内容。

你的问题的症状是什么？您是否真的查看了萤火虫中 uids 变量的值并看到项目被重复，或者您是否只是看到您的日期/名称在页面上加倍？

我怀疑这是因为在显示结果之前没有清除您正在调用 .append() 的 DOM 元素。

尝试添加到函数的开头：

```
$('div#holdDates').empty(); 
```

以及您的日期显示循环：

```
$('ul#'+date).empty(); 
```

为了更好地衡量，在功能开始时：

```
$('li.show').unbind('click'); 
```

# sql-server-2005 - 你如何让 sql server jdbc 调用存储过程使用服务器端游标？

> ID：535032
> 
> 赞同：1
> 
> 时间：2009-02-11T01:04:52.187
> 
> 标签：sql-server-2005, jdbc, cursor

我正在使用 JDBC 在 MSSql 2005 中调用存储过程。我希望结果集使用服务器端游标来限制客户端使用的内存量。我可以使用简单的查询并在连接上设置 SelectMethod=cursor 轻松地做到这一点。当我将该查询放入存储过程时，似乎返回了整个结果集，就好像连接是使用 SelectMethod=direct 创建的一样。

有没有办法让存储过程调用表现得像一个简单的查询。

我已经使用 MS SQL JDBC 驱动程序 1.1 和 1.2 进行了测试。在下面的示例中，totalMemory 的两个值之间的差异取决于结果的大小，而不获取任何行。

```
long totalMemoryUsed = java.lang.Runtime.getRuntime().totalMemory();
String sql = "{call ap_Select(?, ?, ?, ?)}";

CallableStatement cstmt = conn.prepareCall(sql,ResultSet.TYPE_FORWARD_ONLY,  
                           ResultSet.CONCUR_READ_ONLY);     
cstmt.setString(1,readAlldbnames );
cstmt.setString(2,readPublicDbnames);
cstmt.setString(3, whereClause);
cstmt.setString(4, " order by key5 ");

ResultSet a_resultSet = cstmt.executeQuery();
long totalMemoryUsedAfterQuery = java.lang.Runtime.getRuntime().totalMemory(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-04-15T05:22:13.533

到目前为止，我发现的唯一一件事就是从表中的存储过程中获取结果集，然后在表上使用服务器端游标并删除表......我希望我能找到比这更好的方法。

请让我知道是否可以将服务器端游标用于使用 JDBC 的存储过程调用。

谢谢，
萨亚利

# c# - Visual Studio 不生成代码来实例化自定义控件的实例

> ID：535037
> 
> 赞同：2
> 
> 时间：2009-02-11T01:07:27.547
> 
> 标签：c#, winforms, visual-studio-2008, .net-3.5

我使用 C#、.Net3.5 和 Visual Studio 2008 创建了一个自定义控件。

然后，我将该控件从工具箱中拖动到另一个控件中。

执行此操作后，当我尝试编译时，出现如下错误：

```
Error   1   Warning as Error: Field 'MyNamespace.MyControl._myCustomControl' is never assigned to, and will always have its default value null 
```

查看 Designer.cs 文件，这是因为 VS 从不生成以下代码：

```
this._rgReportGallery = new MyNameSpace.MyCustomControl(); 
```

该字段本身就在那里，并且将其添加到我要放入的控件中的代码，只是缺少实例化代码。

我可以手动添加该代码，一切似乎都可以正常工作，但是一旦重新生成了 Designer.cs 文件，它就会再次丢失。

我什至成功地添加了一个不同的自定义控件并生成了该代码。

有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-23T14:43:51.663

我遇到了这个问题，这里的回复帮助我找到了问题，我对组件可访问性和构造函数可访问性都使用了“内部”关键字。正如 Brent 在我上面的几篇文章中提到的那样，VS 设计器显然在生成实例化行时遇到了问题，除了公共构造函数之外的任何东西，所以永远不要在类可访问性和构造函数不是“公共”的情况下制作自定义用户控件。

顺便说一句，这发生在我的 Visual Studio 2005 上，我并不惊讶它也会发生在 Visual Studio 2008 上。它也可能发生在早期版本的 VS 上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T18:10:07.433

还要确保您的 UserControl 的构造函数是公开的。我在内部 UserControls 和 VS2008 SP1 WinForms 设计器代码生成方面遇到了问题。它未能像您提到的那样生成分配行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-11T15:16:34.263

您是否以任何方式调整了自定义控件的构造函数？控件的默认构造函数是无参数的，我知道过去在为需要参数的控件创建构造函数时遇到了麻烦。在这些情况下，我总是提供两个构造函数。这样，VS 中的设计模式就保留了无参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T22:30:38.093

尽管 .Designer.cs 文件看起来像简单的代码，但在该代码中玩耍是非常危险的，因为它很容易破坏 Windows 窗体设计器。我听说很多人只是放弃了 WinForms 设计器，因为他们说它不起作用。它确实很容易破解，但如果你不尝试在 .Designer.cs 文件中播放，它就像一个魅力。

如果您手动编辑了 Designer.cs 文件，它可能会解释为什么它不断地自我重写错误。很难知道如何解决它。如果您的 UI 不太难重做，我会重做它（无论您的主 .cs 文件中的什么内容都将保持不变）。否则，您可以查看一个类似的表格，了解它应该如何格式化（语句的顺序很重要）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-29T16:06:06.697

您有 Visual Studio 2008 的最新服务包吗？当您没有最新的服务包时，通常会发生这种情况。

# optimization - 我可以在 g++ 中控制寄存器分配吗？

> ID：535039
> 
> 赞同：5
> 
> 时间：2009-02-11T01:07:43.383
> 
> 标签：optimization, gcc, g++, inline, cpu-registers

我对 C++ 进行了高度优化，即使在远离热点的地方进行微小的更改，也可以将性能提高 20%。经过更深入的调查，结果证明（可能）在热点中使用的寄存器略有不同。我可以使用 always_inline 属性控制内联，但我可以控制寄存器分配吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T02:02:58.350

如果您真的想弄乱寄存器分配，那么您可以强制 GCC 在某些寄存器中分配局部和全局变量。

您可以使用如下的特殊变量声明来执行此操作：

```
 register int test_integer asm ("EBX"); 
```

也适用于其他架构，只需将 EBX 替换为目标特定的寄存器名称。

有关这方面的更多信息，我建议您查看 gcc 文档：

[http://gcc.gnu.org/onlinedocs/gcc-4.3.3/gcc/Local-Reg-Vars.html](http://gcc.gnu.org/onlinedocs/gcc-4.3.3/gcc/Local-Reg-Vars.html)

然而，我的建议是不要弄乱寄存器分配，除非你有**很好的理由**。如果您自己分配一些寄存器，则分配器可以使用的寄存器较少，您最终可能会得到一个比您开始使用的代码更糟糕的代码。

如果您的函数对性能至关重要，您可以在编译之间获得 20% 的性能差异，那么在 inline-assembler 中编写该东西可能是个好主意。

* * *

编辑：正如 strager 指出的那样，编译器不会被迫将寄存器用于变量。只有在使用变量时才强制使用寄存器。例如，如果变量无法通过优化通过，则不会使用它。该寄存器也可以用于其他变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-11T01:26:25.943

一般来说，所有现代编译器都会忽略 register 关键字。唯一的例外是（相对）最近添加的错误，如果您尝试获取已用 register 关键字标记的变量的地址。

我也经历过这种痛苦，最终找到解决它的唯一真正方法是查看输出程序集以尝试确定导致 gcc 加深的原因。您还可以做其他事情，但这取决于您的代码正在尝试做什么。我在一个非常大的函数中工作，其中包含大量计算的 goto 混乱，其中微小的（看似无害的）变化可能会导致灾难性的性能损失。如果你正在做类似的事情，你可以做一些事情来尝试缓解这个问题，但是细节有点恶心，所以我会放弃在这里讨论它们，除非它真的相关。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-02-11T01:15:57.370

这取决于您使用的处理器。或者我应该说，是的，您可以使用 register 关键字，但除非您使用没有管道和单核的简单处理器，否则这是不受欢迎的。如今，GCC 在寄存器分配方面可以做得比您做得更好。相信它。

# winapi - 在 Windows 上替代 system() 和 _popen()

> ID：535043
> 
> 赞同：3
> 
> 时间：2009-02-11T01:09:16.513
> 
> 标签：winapi

这与：[如何在 C++ 中读取 system() 调用的结果？](https://stackoverflow.com/questions/309491/how-do-i-read-the-results-of-a-system-call-in-c)

我正在尝试做完全相同的事情，只是我的程序需要将“带空格的多个参数”传递给命令。我需要命令行输出和进程的退出代码。

示例：使用 Textpad 的示例。我真正使用的应用程序在标准输出上打印东西。

```
 string command1 = "\"C:\Program Files\TextPad 5\Textpad.exe\" C:\readme0.txt";
string command2 = "\"C:\Program Files\TextPad 5\Textpad.exe\" \"C:\read me2.txt\"";
cout << system(command1.c_str()) << endl;
cout << system(command1.c_str()) << endl; 
```

* * *

输出：

0 'C:\Program' 不是内部或外部命令、可运行程序或批处理文件。

## 1

对系统的第一次调用通过，第二次调用失败并出现上述错误。Windows 中的 _popen 在 Windows 上的工作方式类似，因此在那里没有帮助。我可以在 Linux 上轻松做到这一点，因为我可以在参数中转义空格而无需使用引号。

另一种方法是编写大量非跨平台代码，如下所示：http: [//msdn.microsoft.com/en-us/library/ms682499 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms682499(VS.85).aspx)

但如果我想避免这种情况，在 Windows 上是否有 system() 和 _popen() 的替代方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T14:28:35.680

_popen() 和 system() 使用的最低级别的 Windows API 函数是 CreateProcess()。

然而 CreateProcess() 使用起来并不简单——尤其是当您想要获取进程的输出或写入进程的输入时。

CreateProcess() 肯定会使用包含空格字符的文件名（只要它们以您这样做的方式写在引号中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-09T04:15:06.300

I do this (note - this is VB.NET code), so I can write the output of the command to my log file (it's wrapped in a `RunCommand()` method):

```
 Try
    Dim myprocess As New Process()
    myprocess.StartInfo.FileName = "C:\Program Files\TextPad 5\Textpad.exe"
    myprocess.StartInfo.RedirectStandardOutput = True
    myprocess.StartInfo.UseShellExecute = False

    ' inArgs are the arguments on the command line to the program
    myprocess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden
    myprocess.StartInfo.Arguments = "C:\readme0.txt"

    ' the dir to set as default when the program runs
    Then myprocess.StartInfo.WorkingDirectory = "C:\Program Files\TextPad 5\"

    myprocess.Start()

    ' grab a reader to the standard output of the program
    procReader = myprocess.StandardOutput()

    ' read all the output from the process
    While (Not procReader.EndOfStream)
       procLine = procReader.ReadLine()

       ' write the output to my log
       writeNotes(procLine)
    End While

    procReader.Close()

 Catch ex As Exception
    ' Write the error to my log
    writeErrors("Couldn't execute command "C:\Program Files\TextPad 5\Textpad.exe", ex)
 End Try 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T01:27:13.007

下面解决路径中的空格问题。但是，捕获命令的输出要困难*得多*：

```
#include <string>
#include <cstdlib>
using namespace std;

int main() {
    string cmd = "\"c:\\program files\\notepad++\\notepad++.exe\"";
    system( cmd.c_str() );
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-06-01T01:35:46.957

一堆实用程序库已经使用了那块不可移植的代码，并用可移植的接口将其包装起来。例如，请参阅 Qt 的 QProcess。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-02-11T01:13:16.847

我认为[ShellExecute()](http://msdn.microsoft.com/en-us/library/bb762153(VS.85).aspx)是您正在寻找的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-02-11T07:05:24.693

永远不要在 Windows 中使用 system() ！只需重定向 i/o 句柄。

# ruby-on-rails - Rails 中的“Printf”测试

> ID：535047
> 
> 赞同：0
> 
> 时间：2009-02-11T01:13:41.900
> 
> 标签：ruby-on-rails, ruby, testing, command-line

我是 Rails 的新手，我知道它内置了诸如单元测试之类的东西。但我有兴趣做一些更简单的测试，这些测试相当于你在 C 中的“printf”。所以我正在测试一个我编写的登录页面并想跟踪代码以查看每一行（如我的 find 方法）返回的内容。我尝试使用“puts”输出，但在命令行中没有得到任何东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-11T01:46:40.917

我一直使用 puts 语句以及 ruby​​ 调试器！这很棒。

在 Rails 中，你可以做几件事。我在我的代码中添加了“puts”，当我在命令行运行脚本/服务器时，输出出现在我的 Terminal.app 中。我正在运行 Mac，但我确信有类似的方法可以在您选择的平台上跟踪您的应用程序的活动。

另一种选择是使用 logger 语句。你可以打电话

```
logger.debug("My #{variable}") 
```

并在您的 log/development.log 文件中找到这些语句。

此外，如果您在 *nix 系统上运行，您可以使用“tail”命令一次跟踪写入日志的最后一条语句。

```
tail -f log/development.log 
```

这样你就可以写下你的陈述，并在它们发生时看到它们。有几个级别的日志记录：

```
logger.warn
logger.info
logger.debug
logger.fatal 
```

每个环境（开发、测试、生产）都将确定将调用什么“级别”的日志记录，因此您可以在开发过程中随意使用 logger.debug 编写日志语句，但是当您基于部署时不会编写这些日志语句在默认日志级别上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-11T01:39:30.903

用户是这样的：

```
logger.info "method called with #{params.inspect}" 
```

（您可以将任何变量放入#{}）

一旦你玩得开心，请查看 ./script/console 和 ruby​​-debug

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T01:16:07.793

你熟悉 ruby​​-debug 吗？

1.  安装`ruby-debug`宝石。
2.  使用 -u 选项启动服务器。

    脚本/服务器 -u

3.  `debugger`在您想要停止的代码中放置一条语句。
4.  您将拥有对变量的控制台访问权限以及单步执行代码的能力。

查看[ruby​​-debug 文档](http://bashdb.sourceforge.net/ruby-debug/)以获取更多详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T01:52:10.217

我以前做过这个 - 对于Passenger，你没有脚本/服务器的输出，所以我写了这个：

```
# extras/sexy_logging.rb
module SexyLogging
  def log(text)
    return true if RAILS_ENV == 'production'

    string = "\e[0;32mLog:\e[m #{text}"

    (100 - string.length).times do 
      string << ' '
    end
    string << "(#{caller.first})"

    logger.debug string
  end
end

ActiveRecord::Base.send               :include, SexyLogging
ActionController::Base.send           :include, SexyLogging 
```

然后你可以写

```
log variable 
```

或者

```
log 'Testing user'

tail -f log/development.log |grep Log: 
```

并且只看到你正在记录的内容，逐行和颜色。

# regex - awk 是否支持量词 - 我想要 [0-9]{6,6}

> ID：535052
> 
> 赞同：4
> 
> 时间：2009-02-11T01:17:15.467
> 
> 标签：regex, awk

gawk 似乎不匹配六位数字段 - 或使用 {n,m} 量词的 n 位数字段

它确实匹配 [0-9][0-9][0-9][0-9][0-9][0-9] 好的。

似乎也不支持 \d\d​​\d\d\d\d 。

我是否需要打开扩展的 reg ex，或者它只是不支持。

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-11T01:31:08.583

您需要指定“ `--re-interval`”（或“ `-W re-interval`”）标志以利用此行为。

```
echo 12345 | gawk --re-interval '/[0-9]{5}/{print}{}'
12345
echo 12345 | gawk --re-interval '/[0-9]{6}/{print}{}'
<no output> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-11T01:35:59.460

对 Pax 的响应进行最小扩展，`--posix`也可以实现这种行为。此外，您是正确的 gawk 不支持字符类转义（如`\d`），但它确实支持`[[:digit:]]`语法。

# http - 哪些浏览器默认使用 http/1.1？

> ID：535053
> 
> 赞同：10
> 
> 时间：2009-02-11T01:19:54.430
> 
> 标签：http, browser, protocols

任何人都知道我在哪里可以查找该信息？我很确定 IE 4 默认启用了“使用 HTTP 1.1”参数，并关闭了“通过代理连接使用 HTTP 1.1”。[从这里](http://www.microsoft.com/technet/archive/ie/reskit/ie4/Part2/part2b.mspx?mfr=true)得到这个信息。我假设以后的版本也会启用“使用 HTTP 1.1”。旧版本的 IE 怎么样？Firefox、Opera、Safari 等呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-10-20T16:17:51.583

过去 10-13 年所有常见的桌面浏览器（Netscape/Mozilla、Internet Explorer 等）都支持 HTTP/1.1。Internet Explorer 3.0 和 Netscape 2.0 至少早在 1996 年就支持它（[维基百科同意这一点](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)）。

特别值得注意的是，HTTP HOST 标头需要 HTTP/1.1，如果您想在单个 IP 地址上为不同域的不同网站提供服务，则需要使用 HTTP/1.1。因此，如果 HTTP 客户端不支持它，用户将无法访问许多网站。

大约 9 年前，我遇到了一个不支持它的旧智能手机浏览器，但这是我能想到的最后一个例子，我什至听说过一个不支持的 HTTP 客户端。

我想说的是，即使你做了一些相当深奥的事情，今天也不需要真正考虑缺乏对 HTTP/1.1 的客户端支持（尽管我仍然记得 10 多年前这是一个令人头疼的技术支持问题，试图让人们从 Netscape 1.x 升级）。

如果您正在编写代理，您可能需要考虑它，但即使如此，我也看不出它会导致任何现实世界的问题，因为它对于现代浏览来说非常重要。如果有人正在运行与 Mosaic 1.0 或 Netscape 1.1 一样旧的（或有限的）浏览器，那么他们在访问内容时可能会遇到更大的问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-02-11T01:27:34.973

大多数现代网络浏览器（至少 IE 从版本 5 开始，Firefox 从版本 2 开始）甚至没有使用HTTP/1.1 以外*的任何选项。*好吧，他们可能会，但它会被很好地隐藏起来。

*编辑*：在谷歌上找到了这个，它提供了部分信息： [http](http://schroepl.net/projekte/mod_gzip/browser.htm) ://schroepl.net/projekte/mod_gzip/browser.htm 根据那个页面，IE4+、Netscape 6+、Opera 4+和（我收集）所有版本的 Firefox支持 HTTP 1.1。

# php - 如何开始使用版本控制和 PHP

> ID：535056
> 
> 赞同：35
> 
> 时间：2009-02-11T01:21:04.037
> 
> 标签：php, version-control

我完全不知道版本控制。只是它在很多方面都非常有用。

我发现了一些相关的问题，但没有一个是从一开始就开始的。

我是我工作中唯一使用 Mac OS X 的开发人员，并且传统上只使用 FTP。

任何人都可以帮助我进行与 PHP 项目相关的版本控制（有关系）吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2009-02-11T02:57:08.360

是的，试试看，值得。你使用的语言并不重要。它对我来说和 PHP 一起工作得很好，对你也一样。

**好处**

如果您是唯一的开发人员，那么没有版本控制确实更容易。但是，您会发现使用版本控制系统有很大的好处。一些最简单的好处将是：

1.  回到项目后，永远不会想知道您的最新版本是什么（不再有 myproject090201-archive2-final6.zip）
2.  不要害怕开始一些重大的重构，如果你在文件上犯了错误，你只会回滚到最新版本
3.  如果您的项目中的某些内容停止工作并且您感觉它在某一时刻有效，您可以轻松地测试一些以前的版本并查看工作版本和非工作版本之间的差异，以找出破坏代码的原因
4.  对你当前项目的额外备份，如果不在你的机器上就更好了……当然，备份你的版本控制系统的额外点，我们从来不会太谨慎，你不想当月重启- 长期项目，你呢？

**选择**

正如有些人所说，您的版本控制系统有几个选择，我想您会想要一个免费的开始。有一些优秀的商业产品，但免费的没有什么好羞愧的。所以这里有一些非常流行的免费版本控制系统：

*   [颠覆](http://subversion.tigris.org/)（也称为 SVN）
*   [吉特](http://git-scm.com/)
*   [水银](http://www.selenic.com/mercurial/wiki/)
*   [市场](http://bazaar-vcs.org/)

**集中式与分布式**

Subversion 已经存在了一段时间，它被归类为“集中式”。这意味着每个人都会去获取最新版本并将他们的最新工作提交到一个中央系统，通常是在另一个系统上，尽管它可以很容易地在你自己的机器上。这是一个容易理解的过程。

其他三个称为“分布式”。有很多不同的可能流程，因为它是一个更灵活的系统，这就是为什么这三个新人如今在很多人相互交互的开源项目中获得了很大的吸引力。基本上，您是在自己的计算机上使用自己的修订版，根据需要制作尽可能多的副本，并决定在其他计算机上与其他人共享哪些版本。

趋势似乎肯定是朝着分布式系统发展，但由于这些系统是较新的，它们仍然缺少使用户真正易于使用的 GUI 工具，并且您有时可能会发现文档更轻一些。另一方面，这一切似乎都在迅速得到纠正。

在您的情况下，当您独自工作时，可能不会有太大的不同，尽管您会听到集中式和分布式系统的优点，但您可以毫无问题地使用其中一个或另一个.

**工具**

如果您绝对需要 Mac 的 GUI 工具，那么我会选择 SVN 来启动源代码控制。有两种非常好的产品（商业）：

*   [版本](http://versionsapp.com/)
*   [基石](http://www.zennaware.com/cornerstone/)

在我看来，还有一些[其他的](http://osx.iusethis.com/tag/subversion)（比如免费的[svnX](http://www.lachoseinteractive.net/en/community/subversion/svnx/features/)）变得有点陈旧和不友好，但无论如何这可能会很有趣。

如果您不介意不使用 GUI 工具，在终端的帮助下，您将能够使用上述任何系统通过几个简单的命令行来完成所有相同的事情。

**起点**

在任何情况下，您都需要一些起点。

*   对于 Subversion，您的第一站必须是他们的免费书，即[带有 Subversion 的版本控制](http://svnbook.red-bean.com/)。每天花几个小时来阅读这些章节，这将是很好的投资时间。即使您不想专门使用 Subversion，介绍章节也是一本不错的读物，因为它会让您更好地理解版本控制。

*   对于分布式系统，我对 Mercurial 很感兴趣，但它是一个容易燃烧的主题，所以我会让你在那里做出自己的选择。但是，如果您最终看到 Mercurial，请查看[这篇博](http://blog.medallia.com/2007/02/a_guided_tour_of_mercurial.html)文，如果您已经有点习惯于版本控制，那么它对我来说是一个很好的入门工具，可以让您在几分钟内掌握并运行基础知识一般来说。无论如何，请访问[Mercurial 的主页](http://www.selenic.com/mercurial/wiki/)并查看该页面的“入门”部分。

**结论**

试一试，花一天时间用一些伪造的文件试一试。尝试重命名文件和目录、擦除、移动东西、提交二进制文件与文本文件、解决冲突并恢复到旧版本以掌握它。这些通常是您在使用版本控制时会遇到的最初几个障碍，如果是在非生产项目中，这将是无痛的。

在任何情况下，这都是非常值得学习的东西，这将有助于您的个人项目，以及如果您最终在当前工作或下一份工作中与其他开发人员一起工作。

祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-11T01:27:31.713

代码的类型无关紧要。

一个开源和流行的版本控制系统是 Subversion，这里有一个很好的概述/[手册](http://svnbook.red-bean.com/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-11T02:12:50.573

我使用[Git](http://git-scm.com/)进行 PHP 开发。

它快速、灵活、可靠、干净（CVS 和 SVN 创建了很多我个人不喜欢的隐藏文件夹）。

它的分布式特性允许以您想要的方式工作（有或没有中央存储库）。

你可以在这里找到更多关于它的信息：

*   [吉特魔术](http://www-cs-students.stanford.edu/~blynn/gitmagic/)
*   [速度基准](http://git.or.cz/gitwiki/GitBenchmarks)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-11T01:34:54.033

此外，您可以获取 Eclipse PDT（PHP 插件）并在 IDE 中使用 Subclibse。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-11T04:15:22.947

对于与我合作的另一位开发人员，版本运行良好。此外，如果您使用 Textmate，SVN 包提供了 Subversion 工作流程大部分所需的几乎所有内容。我很喜欢。

[Project Plus](http://ciaranwal.sh/projectplus)插件更进一步，通过在项目树中的版本化文件中添加小的不显眼的标记，一目了然地显示项目中文件的状态。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-11T02:35:52.827

如果您使用的是 Mac，请帮自己一个忙并选择 Versions，这是一个设计精美（功能强大）的 Subversion GUI。在跳转到命令行之前，您最好学习术语并了解 Subversion 如何使用 GUI 工作。一旦您能够提交代码的修订并运行更新以获取其他人的工作，然后回去阅读红豆书（这确实是学习 Subversion 的最佳方式）。

[http://versionsapp.com/](http://versionsapp.com/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-11T04:27:08.677

使用集市[http://bazaar-vcs.org/](http://bazaar-vcs.org/)

它非常好，您可以在几分钟内开始使用它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-11T01:36:29.787

也可以查看其他选项 - Miscrosoft 的[TFS](http://en.wikipedia.org/wiki/Team_Foundation_Server)（这不仅用于源代码控制系统，还用于缺陷跟踪、项目管理等）、[Bazaar](http://en.wikipedia.org/wiki/Bazaar_(software))、[Git](http://en.wikipedia.org/wiki/Git_(software))是流行的。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-02-11T01:38:47.550

Alex，版本控制（有些人会因为这句话而责备我）不是一件小事，即使是非常有经验的开发人员也会陷入困境。最常见的挫折原因是特定产品的限制（Visual Source Safe 是一个著名的产品），以及团队成员没有遵循相同的流程，或者根本不了解流程。这不应该阻止您使用源代码控制工具 - 情况恰恰相反。只有了解工具的作用和原因，才能有效地使用工具。

我建议您研究 CVS。它已经存在很多年了，安装、设置和使用都相对简单，虽然大多数平台都有可用的 GUI 客户端，但从命令行学习它可能会提供对其功能的最佳访问。

# iphone - 如何在 iPhone SDK 中添加 NSDebug.h 和使用 NSZombie

> ID：535060
> 
> 赞同：15
> 
> 时间：2009-02-11T01:24:41.190
> 
> 标签：iphone, cocoa, cocoa-touch, debugging

我想为我的 iPhone 应用启用 NSZombies。

我已经在网上阅读了几篇文章，但我仍然不确定确切的程序。

我知道我必须设置环境变量，我已经这样做了：

```
NSZombieEnabled = YES
NSDebugEnabled = YES
NSDeallocateZombies = NO 
```

我认为（我不确定），我必须导入 NSDebug.h。当我在我的项目中检查 Foundation Framework 的标头时，没有 NSDebug.h。

经过一番研究，我在 iPhoneSimulator Foundation Framework 中找到了它们。所以（我不确定这是否正确），我将 iPhoneSimualtor Foundation Framework 导入到我的项目中。我注意到文件仍然没有显示在项目窗口中，即使我可以在 Finder 中找到它。（这是正常行为吗？）。

所以我打开 main 并添加：

```
#ifdef TARGET_IPHONE_SIMULATOR
#import <Foundation/NSDebug.h>
#endif 
```

我也不确定这是否正确。在此之后，我仍然无法让 NSZombie 工作（除非我误解了它应该做什么）我期待看到“NSZombie 发送了一个版本......”或其他内容的日志。但我什么也没看到

我敢肯定，我只是做得不对，将不胜感激。谢谢

另外值得注意的是，我还启用了：

```
NSMallocStacklLogging = YES
MallocStackLoggingNoCompact = YES 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-02-11T11:52:17.890

您是否正确设置了环境变量？分步指南是

1.  双击 Xcode 项目的 Executables 组中的可执行文件。
2.  单击参数选项卡。
3.  在“要在环境中设置的变量：”部分中，创建一个名为“NSZombieEnabled”的变量并将其值设置为“YES”。

你不需要#import NSDebug.h

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-02-11T03:18:57.107

您不必包含 NSDebug.h 或导入任何特殊框架即可使用 NSZombies。基本上，在您的环境变量中打开它们，然后，如果您尝试向 dealloc'd 对象发送消息，那么您将在控制台中看到以下内容：

`2009-02-10 21:17:08.546 MyApp[16926:20b] *** -[CFString _cfTypeID]: message sent to deallocated instance 0x4babc0`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-04-10T01:54:43.233

-1 到苹果。调试版本应该在开箱即用的完整检测下运行（可以选择退出）。另请参阅[http://www.cocoadev.com/index.pl?NSZombieEnabled](http://www.cocoadev.com/index.pl?NSZombieEnabled)以获得开发和调试程序的人感兴趣的其他内容。

# c# - 实体框架中的 SqlMethods.DateDiffMonth

> ID：535063
> 
> 赞同：3
> 
> 时间：2009-02-11T01:26:52.523
> 
> 标签：c#, entity-framework

有谁知道实体框架中 SqlMethods.DateDiffMonth 的替代品是什么。

这是我尝试使用它时遇到的错误。

LINQ to Entities 无法识别方法 'Int32 DateDiffMonth(System.DateTime, System.DateTime)' 方法，并且此方法无法转换为存储表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-11-17T11:47:06.130

目前看来，您需要使用有效调用 SQLServer DATEDIFF 方法的 eSQL 语句来表达这一点

例如：

```
db.entity.Where("SqlServer.DATEDIFF('MONTH', [start date], [end date]) = 1"); 
```

（有关更多信息，请参见[此处](http://social.msdn.microsoft.com/forums/en-US/adodotnetentityframework/thread/f32f3311-350d-4c2d-a4fd-c801918d36b1/)）

但是，当 .NET Framework 4.0 版发布时（或者，如果您喜欢使用 beta 软件，现在可以使用它！:) 您应该能够使用新的[SqlFunctions 类的](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.sqlfunctions%28VS.100%29.aspx)[DateDiff 方法](http://msdn.microsoft.com/en-us/library/dd466229%28VS.100%29.aspx)，它是新[系统](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient%28VS.100%29.aspx)的一部分.NET 4.0 中的[.Data.Objects.SqlClient 命名空间](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient%28VS.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T17:48:37.103

由于您使用的是 LINQ to Entities，因此最好的方法是使用以下内容：

```
var query = query.Where(e => DateTime.Today >= EntityFunctions.TruncateTime(e.StartDateTime)
&& DateTime.Today <= EntityFunctions.TruncateTime(e.EndDateTime)); 
```

# visual-c++ - dll 大小（调试和发布）

> ID：535066
> 
> 赞同：4
> 
> 时间：2009-02-11T01:26:58.140
> 
> 标签：visual-c++, dll, debugging, release

我在其他讨论中读到，与调试 dll 相比，Release dll 的大小减小了。但是为什么我制作的dll的大小是相反的：Release dll比Debug dll大。会不会造成问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-11T01:30:29.630

它不会引起问题，它可能是编译器在发布版本中“内联”更多项目并创建更大的代码。这一切都取决于代码本身。

没什么好担心的。

编辑：如果你真的担心而不是担心速度，你可以打开优化大小。或者关闭自动内联，看看你有什么不同。

编辑：更多信息，您可以使用 `dumpbin /headers` 查看 dll 变大的位置

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-17T06:05:29.250

发布 DLL 比调试 DLL 大多少？

您的调试 DLL 可能看起来很小，因为您正在生成 PDB 符号文件（因此调试符号实际上不在*DLL*文件中）。或者，如果您无意中将调试符号编译到您的 Release DLL 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-17T06:07:42.257

这可能是由循环展开等性能优化引起的 - 如果它有很大不同，请检查您的 Release 链接器设置以确保您没有静态编译任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T01:35:37.730

如果您的应用程序执行高性能任务，性能可能会受到影响。如果标记选项以生成包含调试信息的代码，则发布版本甚至可以大于调试版本。但这也取决于您使用的编译器。

# jquery - 当我选择“更多”时“变成”文本框的数字下拉菜单

> ID：535072
> 
> 赞同：1
> 
> 时间：2009-02-11T01:28:57.527
> 
> 标签：jquery, html, asp.net-mvc

我需要创建一个下拉列表，其中包含数字 0 到 10，以及底部的“--More--”选项。如果用户选择“--More--”，那么我希望下拉菜单“变成”一个文本框，这样他们就可以输入一个数值。

无论使用哪种输入方法，我都希望回发的字段名称具有相同的表单值。如果用户没有javascript，我最好希望它降级 - 要么不显示“更多”选项，要么只使用文本框。

我正在使用 ASP.NET MVC - 换句话说，我正在寻找的解决方案不需要使用一些特殊的服务器端技术。虽然我已经在使用 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T01:40:02.727

尝试这个：

HTML：

```
<input class="numberEntry" name="howMany" type="text" /> 
```

jQuery：

```
$(document).ready(function() {

    // get the name from the existing text entry input
    var numberEntryName = $(".numberEntry").attr("name");

    // create some new HTML to replace our input with
    var numberSelector = '';

    // make the select box
    numberSelector += '<select name="' + numberEntryName + '">';
    for (var i = 0; i <= 10; i++)
    {
        numberSelector += '<option value="' + i + '">' + i + '</option>';
    }
    // add the more link
    numberSelector += '<option value="MORE">- More -</option>';

    numberSelector += '</select>';

    // now grab the existing input field so we can display it later when
    // the user clicks on the more link
    var numberEntryHtml = $(".numberEntry").wrap("<div>").html();

    // replace the existing input field with our new HTML
    $(".numberEntry").replaceWith(numberSelector);

    // add a click event to the more link so that we'll show our
    // old text input field when "more" is clicked
    $("select[name=" + numberEntryName + "]").bind("change", function(e) {
        if ($(this).val() == "MORE")
            $(this).replaceWith(numberEntryHtml);
    });

}); 
```

此代码未经测试，但它应该让您了解设计模式。

# jsf - Facelets：如何将 ui:insert 值作为 html 属性传递？

> ID：535076
> 
> 赞同：8
> 
> 时间：2009-02-11T01:31:34.447
> 
> 标签：jsf, facelets

我正在尝试在 Facelets/JSF 环境中完成一个小调整。我几乎不知道所有这些是如何组合在一起的。

我在各个页面上定义了一个值作为“标题”

```
<ui:define name="title">PageUID_123</ui:define> 
```

在另一页上，我引用了这个：

```
<ui:insert name="title"/> 
```

我可以很好地将html标签包裹在插入物周围，但我需要能够将“title”的值作为另一个元素的属性输出。我的最终目标是让它像这样在 html 中呈现：

```
<meta name="pageid" content="PageUID_123"/> 
```

如果我尝试将插入标记放在 content="" 位中，则会引发解析错误。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T06:59:54.410

我面前没有工作环境，但我相信你不想让你使用`<ui:define>`，而是你想使用`<ui:param>`然后使用`${x}`或`#{x}`（或忘记哪个或如果重要的话）将它们拉出来。

因此，对于您的示例，您将拥有：

```
<ui:param name="title" value="PageUID_123" /> 
```

进而：

```
<meta name="pageid" content="${title}"/> 
```

我唯一担心的是你正在使用 include 来拥有漂亮的模板，即

模板：

```
<html>
    <head>
        <meta name="pageid" content="${title}"/>
    </head>
    <body>
        <ui:insert name="content" />
    </body>
</html> 
```

内页：

```
<html xmlns="...so many">
    <ui:param name="title" value="PageUID_123" />
    <ui:define name="content">
        <!-- content goes here -->
    </ui:define>
</html> 
```

我真的不知道那会不会飞...

**编辑：**你可能想尝试`${title}`或`#{title}`只是为了踢你现在做的方式，它可能只是工作。

# embedded - 替代莱迪思的 GAL 和 ispGAL 芯片

> ID：535080
> 
> 赞同：0
> 
> 时间：2009-02-11T01:33:35.753
> 
> 标签：embedded, gal

上学期我上了一门关于嵌入式硬件编程的课程，主要使用 Lattice 和 ABEL 的 GAl 芯片对其进行编程。我想在课外继续这个有趣的事情，但我发现由于购买程序员的高成本，成本过高。

是否有任何免费或低成本的方法可以编程类似于 GAL 芯片的东西？请不要推荐 AVR 或 PIC 芯片，因为我的主要项目是我想用更小的芯片实际编程和构建 CPU。

我研究过 ispGAL 芯片，但为它们编程 ISP（至少是 USB）的电缆是 150 美元或更多。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T02:44:06.223

试试 Xilinx 评估板，教育版的很便宜。而且你是学生！

我猜根据 AUD 价格，150 美元大约 100 美元加上所有工具。

这有点贵，但芯片足够大，可以在门中做整台计算机。评估板有以太网、PS/2、串口、USB 和 VGA：它们都连接到门阵列！

*真的很*便宜，滑道？

[http://research.cs.berkeley.edu/project/slipway/](http://research.cs.berkeley.edu/project/slipway/)

# html - HTML 菜单帮助

> ID：535083
> 
> 赞同：0
> 
> 时间：2009-02-11T01:34:34.317
> 
> 标签：html

我有一个带有如下菜单的页面设计：

```
Cat1    |     Cat2    |    Cat 3    |    Cat 4 
```

当我悬停Cat2这个词时，整个Cat2框的bgcolor变为蓝色。此外，整个单元格需要可点击并链接到其他页面。

我可以在没有符号“|”的情况下做到这一点 通过更改表格单元格的 bgcolor 并将“a tag”的宽度设置为 100%，将“a tag”的高度设置为 30px。但我想不出添加分隔符“|”的方法 在里面。

有没有人对此有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-11T01:37:53.420

在 CSS 中放置一个左边框？还是必须是文字条形字符？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T03:02:55.523

这满足了所有要求；竖线必须比链接的高度短。

使用 < a > 上的背景图像而不是使用边框或竖线 (|) 可能最容易实现这一点。

我确实尝试过在链接内使用跨度的东西，这会比 A 的全高短，但我无法让它干净地呈现。

您还可以将管道添加到 HTML 本身、跨度内，并在悬停时隐藏它们。

我知道这在所有浏览器中都不能正常工作，但黑客和变通方法是额外的。:P

编辑:: 我添加了@Fistandantilus 的相邻选择器。使 HTML 更清晰。

```
 <html>
    <head>
        <title>Menu Test</title>

    <style type="text/css" media="screen">
        ul.menu { 
            display:block;
            margin:0; 
            padding:0;
            height:30px;
        }
        ul.menu li {
            display:block;
            width:100px;
            height:30px;
            float:left;

        }        

        ul.menu li a{
            width:100%;
            height:30px;
            line-height:30px;
            display:block;
            text-align:center;
            border-left:1px solid transparent;
        }
        ul.menu li + li a { 
            border-left:1px solid #000;
        }

        ul.menu li a:hover {
            background-color:#0f0;
            border-left:1px solid transparent;
        }
        ul.menu li:hover + li>a  {
            border-left:1px solid transparent;

        }

    </style>
    </head>

    <body>
        <ul class="menu">
            <li><a href ="#">item</a></li>
            <li><a href ="#">item</a></li>
            <li><a href ="#">item</a></li>
            <li><a href ="#">item</a></li>
            <li><a href ="#">item</a></li>
            <li><a href ="#">item</a></li>
            <li><a href ="#">item</a></li>

        </ul>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T02:17:08.737

您可以在 CSS 中使用相邻的兄弟选择器，通过将样式应用于基于紧接在它们之前的元素的元素，您可以创建菜单分隔符。

```
.menu a {
    text-decoration: none;
    padding: 10px;
}
.menu a + a {
    border-left:solid 1px black;
} 
```

通过使用这种方法，您可以通过指定 class="menu" 轻松地将这种样式应用于您的任何菜单。

```
<div class="menu">
    <a href="#">Questions</a>  
    <a href="#">Tags</a> 
    <a href="#">Users</a> 
    <a href="#">Badges</a>
    <a href="#">Unanswered</a>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T01:46:50.260

你不需要使用表格，CSS 是你的朋友！

我不是网页设计师，我的 html/css 技能有点生疏，但是你想要这样的东西吗？

```
<html>

<head>

<style type="text/css">
#menu {
text-align: center;
}
#menu a {
text-decoration: none;
padding: 5px 40px;
}
#menu a:hover {
background-color: blue;
color: white;
}
</style>

</head>

<body>

<div id="menu">
<a href="#">Cat 1</a> |
<a href="#">Cat 2</a> |
<a href="#">Cat 3</a> |
<a href="#">Cat 4</a>
</div>

</body>

</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T02:40:26.607

导航菜单应在语义上标记为列表。对于这样的菜单，使用无序列表是一种非常常见的做法。请参阅[Listamatic 上的此示例，了解](http://css.maxdesign.com.au/listamatic/horizontal32.htm "Fat Erik 5s 简单的管道列表")构建的基础。要使背景颜色大于文本，您只需在`<a>`标签周围添加填充。

# vb.net - 使用 VB.net 以编程方式更改 Windows 窗体上控件的位置？

> ID：535087
> 
> 赞同：10
> 
> 时间：2009-02-11T01:35:43.550
> 
> 标签：vb.net

单击 Button1 时，我需要将 label1 的 location 属性从 (50, 50) 更改为 (50, 70)。这应该很容易，但我无法让它工作。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-07-10T16:06:08.350

你也可以这样做：

```
label1.Location = new Point(x,y); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-02-11T01:42:12.940

你在尝试什么？我发现最简单的方法是分别设置 Top 和 Left 属性：

```
label1.Left = 50;
label1.Top = 70; 
```

设置 Location.X 和 Location.Y 可能会导致编译时错误，因为 Location 的类型是“Point”，一种值类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-02T09:27:04.913

就这样吧。

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Label1.Location = New Point(50, 70)
End Sub 
```

是的，只需复制和粘贴。

# objective-c - if (variable) 是否与 Objective-C 中的 if (variable != nil) 相同

> ID：535120
> 
> 赞同：7
> 
> 时间：2009-02-11T01:47:08.497
> 
> 标签：objective-c, iphone

我在我的 iPhone 项目的这条线上得到一个 EXC_BAD_ACCESS (SIGBUS)：

```
if (timeoutTimer) [timeoutTimer invalidate]; 
```

让我难过的是我不明白那条线是如何崩溃的，因为 if 语句是为了检查 nil。我是否误解了 Objective-C 的工作方式，或者崩溃语句中的行号有时有错误的行？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-02-11T01:53:48.653

仅仅因为一个变量被设置为一个非值`nil`并不意味着它指向一个有效的对象。例如：

```
id object = [[NSObject alloc] init];
[object release];
NSLog(@"%@", object); // Not nil, but a deallocated object,
                      // meaning a likely crash 
```

您的计时器可能已经被删除（或者可能根本没有创建？）但变量没有设置为 nil。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-11-13T20:07:40.120

我刚刚遇到了一个类似的问题，所以这是另一个可能导致像你这样的检查失败的例子。

就我而言，我从这样的字典中获取值：

```
NSString *text = [dict objectForKey:@"text"]; 
```

后来，我使用了这样的变量：

```
if (text) {
    // do something with "text"
} 
```

这导致了`EXC_BAD_ACCESS`错误和程序崩溃。

问题是我的字典`NSNull`在对象具有空值的情况下使用值（它已从 JSON 反序列化），因为`NSDictionary`不能保存 nil 值。我最终像这样解决它：

```
NSString *text = [dict objectForKey:@"text"];
if ([[NSNull null] isEqual:text]) {
    text = nil;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-02-11T01:49:19.430

他们应该是一样的。也许行号实际上是不正确的。

在你的代码中寻找其他可能的错误，看看你是否找到任何东西。

# css - 如何根据 css 类将项目放置在不同的（已经存在的）列中？

> ID：535125
> 
> 赞同：1
> 
> 时间：2009-02-11T01:48:30.787
> 
> 标签：css

**这不是关于如何在 css 中创建列的问题 - 所以请不要给我任何 css 来做这件事。为了便于阅读，我只是在这里排除了它。**

我在 css 中创建了两列，我想根据一些 css 类在其中放置项目。我认为这是可能的，但我不确定如何。

```
<DIV id="col1">
   <!-- I want to display everything with 'women' here -->
</DIV>

<DIV id="col2">
   <!-- I want to display everything with 'men' here -->
</DIV>

<!-- this content is dynamically generated in a loop (PHP/ASP.NET)-->
<DIV id="products">
    <DIV class="women">
       Women's product 1        
    </DIV>
    <DIV class="men">
       Men's product 1        
    </DIV>
    <DIV class="men">
       Men's product 2        
    </DIV>
</DIV> 
```

**编辑：**只是为了确保我不想将产品列表复制到 col1 和 col2 中。我想移动它们。我只想要每个项目的一次可见副本。

所以我有两列 - 或页面上的区域 - 无论如何 - 对此无关紧要。

我想使用 css 将所有内容`.products.women`放在第 1 列中。

我想使用 css 将所有内容`.products.men`放在第 2 列中。

我怎样才能做到这一点。这些事情是关于我对 css 的限制，但我知道我可以使用一些聪明的东西。

目前，我正在两个单独的 for 循环中渲染到列中。我想摆脱这个有两个原因：

*   我不想保持 2 个相同的 for 循环 - 也不想将该逻辑移到其他地方
*   我想制作一个“iphone”友好的版本，我认为这会更容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-11T01:59:45.643

你不能用 CSS*精确地*做你所要求的。但是你可以做 .women { float: left } .men { float: right}，这可能也差不多。

不过，这对于您的基本问题来说是一种创可贴，即未能将您的表示逻辑与您的控制逻辑分开。与其在表示逻辑中使用两个相同的 for 循环，不如在其外部使用一个用于构建两个数组的 for 循环，然后您的表示逻辑应该以实际上对其有益的方式使用每个循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T02:52:58.247

CSS 它是一种用于描述（现有）内容呈现的语言。您要求以编程方式复制或复制其中的一些内容。

您可以使用 ASP/PHP 选择任何语言来生成该内容的多个副本，或者使用 javascript 复制-移动-更改它。

实际上 javascript 似乎适合您的情况。

**编辑：**您在这里有一个类似的先前问题：[使用 css 复制 html 元素](https://stackoverflow.com/questions/349322/using-css-to-duplicate-html-elements)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T04:47:26.553

有趣的是（但是，在这一点上，完全没用），这不仅在 CSS3 高级布局模块（又名模板布局）的当前草案中是可能的，而且规范包含一个示例[，展示了如何做到这一点](http://www.w3.org/TR/css3-layout/#position)（最后一个示例在部分3.4)。所以如果你能忍受等十五年左右...

# .net - LINQ Join On Between 子句

> ID：535132
> 
> 赞同：5
> 
> 时间：2009-02-11T01:52:10.373
> 
> 标签：.net, linq-to-sql, tsql

我在将一个 LINQ 查询组合在一起时遇到了一些问题，该查询将基于邮政编码连接一个表。我需要根据客户的邮政编码是否位于由 ZIPBEG 和 ZIPEND 列确定的邮政编码范围内来加入表格。

T-SQL 看起来像这样：

```
JOIN [ZipCodeTable] [zips] 
    ON [customer].[zipcode] BETWEEN [zips].[ZIPBEG] AND [zips].[ZIPEND]

-- or

JOIN [ZipCodeTable] [zips] 
    ON [zips].[ZIPBEG] <= [customer].[zipcode] 
        AND [zips].[ZIPEND] >= [customer].[zipcode] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-11T01:56:45.107

您不能在此条件下专门连接，唯一官方支持的连接是基于相等的连接，您在 T-SQL 中的条件不符合。

相反，您必须执行笛卡尔积，然后根据适当的条件进行过滤：

```
from c in customers
from z in zips
where
  z.ZipBeg <= c.ZipCode && c.ZipCode <= z.ZipEnd
select
  c 
```

# java - 使用 SP 克隆数据库记录的最佳方法

> ID：535135
> 
> 赞同：0
> 
> 时间：2009-02-11T01:53:49.450
> 
> 标签：java, sql, stored-procedures, db2

我必须编写代码来克隆具有其他表中关联数据的数据库条目并为其分配一个新 ID。简化后，我有一个主表，其键为 ID，子表说 SUB1，ID 为 FK，MAIN 中的每个条目都有多个记录。
我想将 MAIN 中特定 ID 的数据复制到新记录中，将 ID 更新为新值，以允许现有条目及时保留为快照，新条目成为正在进行的新工作。

我正在寻找使用存储过程，并且想知道是否可能/建议拥有一个调用其他 SP 来执行工作的高级 SP？

例如

```
 CREATE PROCEDURE CopyNewVersion (IN oldID)
    ...
    BEGIN
    --copy main record details for passed in oldID, 
    --return the new ID thats been allocated
      CALL CopyNewMainRecord(IN oldID, OUT newID )
    --copy all SUB1 records for oldID to newID
      CALL CopyNewSub1Records(IN oldID, IN newID)
    --Declare a cursor to return the details in MAIN for newID
    END 
```

我看到 CopyNewSub1Records 类似于

```
 CREATE PROCEDURE CopyNewSub1Records (IN oldID, IN NewID)
    ...
    BEGIN
      --select all records in SUB1 with FK oldID
      --sp opens a cursor for return 
      CALL GetSUB1Records(oldID)
      for each returned record in the cursor resultset
        --insert into SUB1 values(newID, other data for this row,....)
        CALL CreateSUB1Record(row details)
    END 
```

所以我的问题是，是否可以将来自 CopyNewMainRecord 的 newID 的 OUT 与 IN 中的 CopyNewSub1Records 相同，并且我可以在调用插入 SP 时使用来自 CopyNewSub1Records 中的 Get SP 的多行的结果集进行循环吗？

我目前正在等待 DB Admin 授予在我们的 DB2 环境中创建 SP 的权利，所以这就是为什么我要问而不是尝试这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T03:28:54.400

我对 DB2 不太熟悉，但我认为直接插入比尝试使用跨范围的游标要好得多。

将复制主存储过程的输出参数作为其他存储过程的输入对我来说非常有意义。

作为我将如何创建 CopyNewSub1Records 的示例，我将执行以下操作：（请原谅任何语法问题......就像我说的，我不使用 DB2 - 你如何知道列中的参数？）

```
CREATE PROCEDURE CopyNewSub1Records (IN oldID, IN NewID)
BEGIN
     INSERT INTO Sub1
     (
          ID,
          SubID,
          Col1,
          Col2
     )
     SELECT
          NewID,
          SubID,
          Col1,
          Col2
     FROM
          Sub1
     WHERE
          ID = oldID
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T03:45:15.720

我从未使用过 DB2，但它不支持触发器吗？

听起来你想要做的是建立一个审计表。我以前在 SQL Server 中做过这个，并且做得正确，它可能非常有用。您应该能够通过谷歌搜索“DB2 Audit Trigger”或类似的东西找到一些好的信息。

# jquery - JQuery，为标签设置属性

> ID：535140
> 
> 赞同：7
> 
> 时间：2009-02-11T01:57:13.357
> 
> 标签：jquery, attributes

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-02-11T02:44:34.820

> 为 HTML 锚元素“a”设置“hash”属性

<a> 元素 (HTMLLinkElement) 已经具有 DOM Level 0`hash`属性。它像 window.location.hash 一样用于读取或设置元素的`href`.

Setting `a.hash`，无论是直接设置还是通过 jQuery 的`attr()`包装器设置，都只是在链接的 URL 中设置锚名称。您*可以*通过调用 DOM 方法故意说您想要一个实际的属性`a.setAttribute('hash', value)`，但由于长期存在的错误混淆了属性和属性，这在 IE6/7 中不起作用。

这是向元素添加自定义非标准属性的问题之一，您永远不知道它何时会与现有名称发生冲突。HTML5 会建议您将自定义属性限制为以“data-”开头的名称，但总的来说，如果可以的话，最好找到另一种存储数据的方式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-11T02:01:40.913

可能您的问题是标签没有任何`hash`属性。`<a>`也许您正在寻找`name`属性，或者您想更改链接中的哈希值`href`，在这种情况下，您必须解析链接文本并使用正则表达式替换哈希值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T02:53:12.583

设置哈希的另一个选项。这仅适用于表达式返回 a 元素的情况。这是因为 hash 是实际 dom 元素的属性。

```
$(expr).each(function() {
  this.hash = value;
}); 
```

如果您需要测试以查看其是否为 a 标签，请使用此

```
$(expr).is('a').each(function() {
  this.hash = value;
}); 
```

如果您实际上想要附加一些自定义属性，我建议您使用 data 方法添加值

```
$(expr).data('myHash', value); 
```

# javascript - 如何在页面 Javascript 准备好处理它们之前禁用 AJAX-y 链接？

> ID：535141
> 
> 赞同：2
> 
> 时间：2009-02-11T01:57:20.407
> 
> 标签：javascript, prototype, shopping-cart

我正在为我的网站实现一个购物车，使用伪 AJAX 灯箱式效果。（它实际上并没有在请求之间调用服务器——一切都只是原型魔法来更新显示的值。）

对于没有 Javascript 的用户来说，还有一个半优雅的后备行为：如果他们点击添加到购物车，他们会被带到一个（场外，不太理想的交互）购物车。

但是，启用了 Javascript 的用户在加载页面然后立即点击添加到购物车也会被从页面中删除。我想让 Javascript 将它们延迟一段时间，然后在准备好后执行显示购物车行为。或者，在 Javascript 准备好之前完全忽略点击可能也是可行的。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-11T02:25:07.127

我现在使用 jQuery b/c 执行此操作，我隐约记得 jQuery 负责处理的浏览器差异：

尝试

$(document).ready(function() { // 把你所有的 jQuery 优点都放在这里。});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T02:04:06.540

你的代码真的那么慢，这是一个问题吗？我敢打赌，没有人会在加载页面后不久购买您的产品。在任何合理的情况下，用户都会在与页面交互之前等待页面加载，尤其是对于像购买这样的事情。

但是要回答您的原始问题，您可以禁用普通代码中的链接，然后使用`document.observe("dom:loaded", function() { ... })`调用重新启用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T02:09:41.220

您可以尝试将链接隐藏在 css 中，然后在页面加载时显示它们。

```
<script type="text/javascript">
  document.write('<link rel="stylesheet" type="text/css" href="someCssThatHidesLinks.css" />');

  window.onLoad = function() {
    //show links
  }

</script> 
```

这样，如果您的用户没有 javascript，那么他们的链接仍然处于活动状态，否则如果他们有，那么链接将被隐藏，直到您加载并激活它们。以前从未这样做过，但我认为如果您想保留故障安全页面的功能，这应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T02:24:31.310

> 但是，启用了 Javascript 的用户在加载页面然后立即点击添加到购物车也会被从页面中删除。

你什么时候开始你的脚本？如果您正在使用文档加载，它将在初始化之前等待所有图像下载，这确实会给用户一个点击购买的机会。

如果您在 DOM 准备就绪时触发 JS 增强，只需将 <script> 放在页面底部，或者使用框架提供的 DOMContentLoaded 样式事件，链接应该足够快地适应用户不太可能先点击按钮。

如果您真的非常想延迟在第一次被解析的元素和正在加载的文档之间的点击，您可以编写如下内容：

```
<script>
    function methodcall(obj, name) {
        return function() {
            obj[name].call(obj);
        };
    }
</script>
...
<a href="nonjsversion" onclick="setTimeout(methodcall(this, 'click'), 500); return false;">Buy</a>
... 
```

这样它就会在那里旋转轮询（并且在 IE 上，内存泄漏），直到链接的真正点击处理程序到位。虽然它非常难看，而且很脆弱，如果你的脚本由于某种原因中断（而且它是 JavaScript，所以很可能在某些时候，在某些浏览器上，它会中断），你的按钮就会中断。此问题适用于依赖稍后运行的 JavaScript 启用先前禁用的操作的所有潜在解决方案。

对于企业来说，没有什么比购买按钮坏了更糟糕的了。

# php - 在 PHP5 中用多个/不同的值搜索和替换多个值？

> ID：535143
> 
> 赞同：32
> 
> 时间：2009-02-11T01:57:53.340
> 
> 标签：php, arrays, string, replace

是否有一个内置的 PHP 函数可以用一个数组替换字符串中的多个值，该数组准确地指示用什么替换什么？

例如：

```
$searchreplace_array = Array('blah' => 'bleh', 'blarh' => 'blerh');
$string = 'blah blarh bleh bleh blarh'; 
```

结果将是：'bleh blerh bleh bleh blerh'。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2009-02-11T02:01:34.267

您正在寻找[`str_replace()`](http://www.php.net/str_replace).

```
$string = 'blah blarh bleh bleh blarh';
$result = str_replace(
  array('blah', 'blarh'), 
  array('bleh', 'blerh'), 
  $string
); 
```

**// 附加提示：**

而且，如果您遇到了示例中的关联数组，则可以像这样将其拆分：

```
$searchReplaceArray = array(
  'blah' => 'bleh', 
  'blarh' => 'blerh'
);
$result = str_replace(
  array_keys($searchReplaceArray), 
  array_values($searchReplaceArray), 
  $string
); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-21T09:13:09.600

```
$string = 'blah blarh bleh bleh blarh';
$trans = array("blah" => "blerh", "bleh" => "blerh");
$result = strtr($string,$trans); 
```

您可以查看[手册](http://php.net/manual/en/function.strtr.php)以获取详细说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T02:00:47.733

`str_replace()`这样做。

您可以查看[手册](http://php.net/manual/en/function.str-replace.php)以获取更详细的说明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-18T14:30:25.240

万一有人正在寻找用不同的值（每次出现）替换相同的字符串。例如，用数组中的数字++ OR值替换所有**## -**

```
$split_at = '##';
$string = "AA ##  BB ##  CC ##  DD";
$new_string = '';
// echo $string;
$replace_num = 1;
$replace_arr = ['first' , 'second' , 'third'];
$split_at_cnt = substr_count($string, $split_at);
for ($split=0; $split <= $split_at_cnt; $split++)
{
    $new_string .= str_replace('##', ($replace_num++)." : ".$replace_arr[$split], substr( $string, 0, strpos($string, $split_at)+strlen($split_at)));
    $string = substr($string, strpos($string, $split_at)+strlen($split_at));
}

echo $new_string; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T02:02:31.520

对于您所拥有的，只需将该数组`str_replace`作为搜索和替换传递（`array_keys`如果您想保持数组原样，请在搜索参数上使用）。

# c# - .NET：ListView 忧郁？

> ID：535148
> 
> 赞同：4
> 
> 时间：2009-02-11T02:01:49.070
> 
> 标签：c#, .net, vb.net, winforms, listview

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T02:21:35.513

这是一个有趣的。

我认为唯一可以做到这一点的是，如果 ListView 没有意识到 ListItem 已经更改了它的“Selected”值，因此不会更新其选定的项目集合。

.SelectedItems 属性不一定在每次获取属性时生成 - 如果您反映 System.Windows.Forms 程序集：

```
 if (this.selectedListViewItemCollection == null)
    {
        this.selectedListViewItemCollection = new SelectedListViewItemCollection(this);
    }
    return this.selectedListViewItemCollection; 
```

所以我倾向于认为你得到了一个过时的 selectedListViewItemCollection。

我会尝试而不是在 Item 级别更改 Selected 属性，而是尝试将所选索引添加到 ListView 的 .SelectedIndices 属性中，看看是否有效。这样，ListView 不依赖于获取 ListViewItem 更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T02:27:08.043

我相信您还必须调用 ListView.Select() 才能触发 SelectedIndexChanged 事件。

```
lvPept.SelectedItems.Clear()
lvPept.Items(6).Selected = True
lvPept.Select()
Dim newLen As Integer = lvPept.SelectedItems.Count 
```

# iphone - UIPicker 在横向模式下调整大小

> ID：535164
> 
> 赞同：9
> 
> 时间：2009-02-11T02:15:16.263
> 
> 标签：iphone, cocoa-touch, landscape

我正在尝试在横向模式下开发一个带有 UIPicker 的应用程序，占用（几乎）屏幕的整个宽度（带有 5 个或 6 个组件）。你能告诉我如何设置 UIPicker 的大小吗？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-09-14T06:03:43.570

实际上，我几乎为每个应用程序调整了我的选择器的大小。我不喜欢它们占据整个屏幕。这是我正在使用的方法：（请注意，我还将选择器旋转为水平）

在 viewDidLoad .....

```
picker = [[UIPickerView alloc] initWithFrame:CGRectZero];
picker.delegate = self;
picker.dataSource = self;
picker.showsSelectionIndicator = NO;

//Resize the picker, rotate it so that it is horizontal and set its position
CGAffineTransform rotate = CGAffineTransformMakeRotation(-1.57);  
rotate = CGAffineTransformScale(rotate, .46, 2.25);
CGAffineTransform t0 = CGAffineTransformMakeTranslation(3, 22.5);
picker.transform = CGAffineTransformConcat(rotate,t0);
[self.view addSubview:picker];
[picker release]; 
```

然后，我想为我的视图添加一个背景图像，覆盖 UIPicker 的灰色条（现在位于顶部和底部）：

```
//Create the overlay to superimpose ontop of the picker
//In this case, the image is the size of the screen with a transparent area the size of the //UIPickerView cut out in the middle

UIImageView *uiiv = [[UIImageView alloc] 
                     initWithImage:[UIImage                                 imageNamed:@"problem_bg.png"]];
uiiv.userInteractionEnabled = NO;
uiiv.opaque = YES; //for performance
[self.view addSubview:uiiv];
[uiiv release]; 
```

UIPickerView 委托方法：

```
-(UIView *) pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)rowforComponent:(NSInteger)component reusingView:(UIView *)view
 {

    UIView *viewForRow = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 280)] autorelease];
    UIImageView *img = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"myimage.png"]];

    img.frame = CGRectMake(0, 0, 102,280);
    img.opaque = YES;
    [viewForRow addSubview:img];
    [img release];
    UILabel *label;

    UIFont *font = [ UIFont fontWithName:@"Helvetica"  size:20];

    label = [[[UILabel alloc] initWithFrame:CGRectMake(10, 20, 270, 100)] autorelease];

    label.text = @"I am a label";
    label.textAlignment = UITextAlignmentCenter;
    label.textColor = [UIColor blackColor];
    label.font = font;
    label.backgroundColor = [UIColor clearColor];
    label.opaque = NO;
        [viewForRow addSubview:label];

    CGAffineTransform rotate = CGAffineTransformMakeRotation(1.57);  
        [viewForRow setTransform:rotate]; 
    return viewForRow;

} 
```

这提供了一个更小、具有漂亮外观和感觉的水平选择器。我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-09-08T18:40:39.103

您可以通过在 TextEdit 中打开 .xib 文件并更改 UIPickerView 的大小来编辑大小。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-11T02:20:46.983

你不能。UIPickerView 的大小是恒定的。

**更新：**事实证明你**可以**调整 UIPickerView 的大小。诀窍是将它放在另一个（较小的）UIView 中，并调整该视图的大小。我还没试过这个。

**更新 2：**此方法不会调整 UIPickerView 的大小，而是裁剪它。它可能是也可能不是您正在寻找的东西，但是 AFAIK，没有办法真正调整 UIPickerView 的大小，这已经很接近了。它看起来没*那么*糟糕。

**更新 3（姗姗来迟）：**从 SDK 3.0 开始，UIPickerView 可以使用 initWithFrame 或 setFrame 完全调整大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-06-30T22:53:46.733

我与调整选取器视图大小的相同问题作斗争。经过一些研究和头痛之后，您可以轻松做到：

1.  忘记界面生成器！我认为如果没有界面构建器，您可以更好地使用 UI。
2.  在您的控制器中覆盖加载视图方法。

    ```
    -(void)loadView
    {
            //create your view
     self.view = [[UIView alloc] initWithFrame:CGRectZero];
     // create a default sized pickerView
     pickerView = [[UIPickerView alloc] initWithFrame:CGRectZero];
     pickerView.delegate = self;
     pickerView.dataSource = self;
     pickerView.showsSelectionIndicator = YES;

      // Get its frame
     CGRect pickerFrame = pickerView.frame;

       // Set it to what ever you like, I use a default screen height times a shrink factor like 0.75 for 3/4 of its original size
     pickerFrame.size.width = screenWidth*pickerShrinkFactor;
     pickerFrame.size.height =  pickerHeight*pickerShrinkFactor;
     // You can also set the upper left corner of the picker
     pickerFrame.origin.x = 0;
     // Set the picker frame to new size and origin
            pickerView.frame = pickerFrame;
            // Add it to your view
     [self.view addSubview:pickerView];

    } 
    ```

祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-01-02T19:11:01.647

The answer is in:

```
-(UIView *) pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view { 
```

Since with:

```
- (NSString*)pickerView:(UIPickerView*)pv titleForRow:(NSInteger)row forComponent:(NSInteger)component 
```

Makes it work (that is: sideways with scaled label) of course

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-11T02:22:11.317

我相当确定 UIPicker 有一种尺寸，您无法更改。有兴趣听到不同的声音。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-12-23T06:56:31.803

没问题（我刚注册）。顺便说一句，我刚刚意识到，当我发布我的答案时，该方法`(UIView *) pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent ....` 丢失了 row 和 forComponent 之间的空间。因此，请确保您的委托正确，否则它将无法正常工作。

# .net - 使用虚拟 PC 2007 SP1 时无法映射串口

> ID：535165
> 
> 赞同：1
> 
> 时间：2009-02-11T02:15:24.797
> 
> 标签：.net, windows-vista, hardware, windows-server-2003, virtual-pc

我正在编写一个与串行端口通信以控制设备的应用程序。开发环境位于托管在 Windows Vista 机器上的虚拟化 Windows 2003 R2 机器上。当我尝试通过虚拟 PC 映射 COM 端口以便它们可以在虚拟机中使用时，我在机器开始启动后立即收到以下错误：

*尝试在您的物理计算机上打开以下 COM 端口时出错：\.\COM2 在此端口可以连接到您的虚拟机之前，您必须验证设备已连接到该端口并且它没有被其他设备使用过程。*

我尝试将串行端口重新映射到虚拟机上的不同端口，还尝试更改主机上的端口配置......没有骰子......

我不能 100% 确定串行端口是否正常工作，但我不确定如何测试它们，除非编写应用程序来这样做。任何帮助将非常感激。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T02:38:35.987

> 除了编写应用程序之外，我不确定如何测试它们。

曾经有一个叫做超级终端的程序，用于打开串口，通过打开的端口交互发送/接收数据。该程序不再随 Vista 一起提供，但[本文](http://windowshelp.microsoft.com/Windows/en-us/help/e864444f-44d5-4206-a848-dcd6972594931033.mspx)建议您可以在网上找到一份副本并使用它。

像[http://www.google.ca/search?hl=en&q=device+manager+serial+port](http://www.google.ca/search?hl=en&q=device+manager+serial+port)这样的搜索建议如果您有串行端口，那么您应该在设备管理器中看到它。如果您没有串行端口，则可能需要在 BIOS 中启用它。请注意，鼠标使用的串行端口不会显示为串行端口。如果您的计算机上不存在 COM1，请尝试其他类似 COM1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T03:40:54.903

感谢您的快速回复，克里斯。我想我已经弄清楚了。事实证明，您显然必须将设备连接到映射的 COM 端口，以便 VM 成功使用该端口。我最终编写了一个快速应用程序来测试端口并在主机系统上找到它。然后我获取了这些知识并将那个端口（并且只有那个端口）映射到了虚拟机...... Viola！有用！

# sql - MSSQL 中处理加密数据的最佳实践

> ID：535175
> 
> 赞同：2
> 
> 时间：2009-02-11T02:20:42.380
> 
> 标签：sql, sql-server, sql-server-2005, sql-server-2008, encryption

我的用户数据库中有一些我希望加密的数据。大多数数据需要在请求时解密，但也有可以保持加密的密码（过去我们会使用*pwdcompare*，但我相信现在已经过时了）。

我已按照[此处](http://www.kodyaz.com/articles/sql-server-2005-database-encryption-step-by-step.aspx)的步骤操作，因此我现在已成功加密我的数据。

我不明白的是在运行时打开主密钥以加密/解密数据的正确方法。如果我想使用存储过程来检索加密数据，我该如何打开主密钥？我是否使用存储的 proc 参数传递主密钥的密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-18T11:03:09.337

据我了解，您应该创建一次主密钥（您可以在安装过程中执行此操作），这是第一次也是最后一次需要密码。之后，使用主密钥创建**没有密码的**加密密钥（对称或非对称）并使用它来加密/解密您的数据。您不必为其提供密码，您所需要的只是使用您的加密密钥并对其拥有 CONTROL 权限。唯一的问题是您的 DBA 也可以拥有它:)

请参阅本文：[在 SQL Server 2005 数据库中使用非对称加密和数字签名](http://aspnet.4guysfromrolla.com/articles/022807-1.aspx)

# html - HTML问题：表单导致换行之前（Rails button_to）

> ID：535185
> 
> 赞同：1
> 
> 时间：2009-02-11T02:26:06.063
> 
> 标签：html, ruby-on-rails, forms

button_to 在 HTML 中会在它之前引起换行符。我[找到了一种可行的解决方法](http://ror.leewbutler.com/2008/04/xdressed-clickables.html)，但这并不理想，因为按钮不是真正的按钮。有没有其他方法可以避免表格前换行？

这是生成的 HTML

```
<a href="/last_page">Back</a> | 
<form method="post" action="/next_page" class="button-to">
<div><input type="submit" value="Continue" /></div>
</form> 
```

**来自 CSS 方面或 Rails 方面的任何帮助都会有帮助！**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2010-03-10T20:18:02.287

只影响 button_to 类及其内部 div：

```
.button_to {
  display: inline;
}

.button_to div {
  display: inline;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-11T02:37:27.550

button_to 创建一个 HTML <form> 元素，它是 HTML 中的块元素。如果你给表单一个类或 id，你构建你的 css 选择器来获取表单并使用：

```
form {
display: inline
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-11T02:36:41.220

从外面的某个地方得到它。高兴地：

```
.button-to { display:inline-block;} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-12T06:08:09.750

确保该 div 的 CSS 设置为

```
display: inline; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-05T13:57:48.030

这些选项都不适用于 Rails 3.2.3 ！我在[http://www.deploymentzone.com/2011/12/07/button_to-urlhelpers-all-in-a-row/找到了一个可行的解决方案](http://www.deploymentzone.com/2011/12/07/button_to-urlhelpers-all-in-a-row/)

这里是：

```
/* ./app/assets/stylesheets/button_to.css.scss */

form.button_to {
    margin:0;
    padding:0;
    display:inline;
}

form.button_to div, form.button_to div input {
    display:inline;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-23T15:15:11.617

您仍然必须为 div 和表单指定内联。

```
分区 {
  显示：内联；
}

.button-to {
  显示：内联；
}

```

如果在 div 中也指定了 class="button-to" 不是更好吗？还是我错过了什么？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-05T07:27:31.957

button_to 在按钮周围生成一个表单和一个 div。因此，如果您不限制按钮之前的容器宽度，则按下按钮将占用 100% 的宽度。

```
<% @post.bids.each do |bid| %>
  <p>
    <div style="float: left; width: auto;"><%= bid.user.email %></div>   
    <%= button_to "Offer Bid", offer_bid_post_bid_path(@post, bid), :action => "offer_bid" %>
  </p>
<% end %> 
```

# asp.net - 向 LINQ to SQL 生成的类添加新方法

> ID：535190
> 
> 赞同：10
> 
> 时间：2009-02-11T02:30:58.877
> 
> 标签：asp.net, linq, linq-to-sql

我是 LINQ 的新手。我只是将所有数据库表拖到 LINQ to SQL dbml 中的设计器上。我所有的关系都是正确的，并且在设计师中看起来不错。我能够使用简单的 LINQ 代码提取数据。我现在想添加自己的方法，但如果（何时）需要重新生成我的 dbml，我不想破坏我的更改。我猜我只是创建一个新的类文件并设置生成类的部分类。它是否正确？例如，我有一个名为**SystemUser**的生成类，其中包含***SystemUserId、Username、Password、PersonId、SecurityQuestionId、SecurityQuestionResponse***列。我想添加一个名为***void Authenticate()的方法和一个名为******bool Authenticated***的新属性*. 基本上我想将用户名和密码传递给***Authenticate()***并根据找到匹配的用户等设置***Authenticated***属性。我将在哪里以及如何执行此操作？*

 ** * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-11T02:43:53.353

LINQ 生成的类是部分类，这意味着您可以通过创建自己的[部分类](http://msdn.microsoft.com/en-us/library/bb882671.aspx)或[部分方法](http://msdn.microsoft.com/en-us/library/bb546176.aspx)来扩展它们。

在您的情况下，您可以为 SystemUser 创建一个部分类，然后在其中添加您的方法。如果重新生成 DBML 文件，它们将不会被覆盖。

就像是：

```
public partial class SystemUser
{
    public bool Authenticated { get; set; }

    void Authenticate()
    {
        //Perform custom logic here.
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-11T02:36:36.257

看看使用 Partial 类......它可能非常适合您的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T02:36:43.997

如果您只是希望您的类有一个新方法，那么您是正确的创建一个新文件并使用部分类。

# windows - 对终端仿真器进行编程，里面有什么？

> ID：535212
> 
> 赞同：3
> 
> 时间：2009-02-11T02:41:00.193
> 
> 标签：windows, bash, shell, development-environment, console2

这与关于 cmd.exe的更好的~~shell~~终端/gui 接口的[问题](https://stackoverflow.com/questions/473839)有些相关

 ~~在我寻找更好的~~shell~~终端的过程中，我遇到的唯一有用的东西是[Console2](http://sourceforge.net/projects/console/)，其他替代品不是免费的，而且通常不会提供比 Console2 更多的东西来让它们物有所值。

我不禁想，“怎么会”？~~shell~~终端对程序员来说是一个非常有价值的工具，但是没有人来尝试比 cmd.exe 做得更好（除了@console2 的家伙）？

当然，设计一个~~命令行 shell~~终端模拟器不可能是一项艰巨的任务*！*

有没有人试过写一个~~shell~~终端模拟器？这里面是什么？那里有任何资源（例如，如果我想编写自己的 shell）？

### 更新

2009 年 7 月 17 日

我重新表述了这个问题，我所说的“shell”实际上被称为终端模拟器（至少在 linux 世界中）。我最近才意识到这一点，所以我想我应该重新审视这个问题并解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-11T02:59:39.277

Microsoft的[PowerShell](http://www.microsoft.com/windowsserver2003/technologies/management/powershell/default.mspx "电源外壳")怎么样？AFAIK 它是免费的，并在 shell 中为您提供 C# 功能，以及大量其他功能。但是，它确实需要 NET 框架......

我还不会认可它，因为我还没有真正使用过它，但它在我的清单上......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-11T02:51:20.637

Windows 有很多 shell，Cygwin 下的 bash 是我用得最多的，而且它当然是免费的。说实话，cmd.exe 自从 MSDOS 的批处理文件处理器以来已经走过了漫长的道路。它实际上非常强大，但在 bash 的后端仍然不是一个疙瘩:-)。

您**应该**尝试编写一个命令行 shell，这对您来说是一种教育。如果您想要的只是一个程序启动器，那么做基础知识并不难。

但是，如果您想要一个真正的 shell 的所有功能，包括完整的编程语言、作业控制、管道、输出重定向和（严重）太多其他要列出的东西，我们可能暂时不会收到您的来信. 除非你突然抬起头来问我们关于 shell 应该如何做这个或那个的深奥问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-11T05:58:54.803

如果你是 Windows 用户，我的赌注是未来的 Powershell。

根据 MS，PowerShell 将默认安装在 Windows Server 08 R2 (WS08R2) 和 Windows 7 上。

我自己使用过 Powershell，发现它非常有用，如果您熟悉 .NET，那么它就更容易了。

在此处下载一个[两页的参考文档](http://www.microsoft.com/downloads/details.aspx?familyid=df8ed469-9007-401c-85e7-46649a32d0e0&displaylang=en&tm)，这就是您开始所需的全部内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-13T20:36:51.073

> I mean the gui-interface part that displays the text,

Ah! you mean what we call a "pseudo-tty" or a "terminal emulator" in unix. In windows, I guess it is called a "console host". I do not use windows, but I heard that console2 is very good. Seems there are others:

*   [http://www.powershellanalyzer.com/](http://www.powershellanalyzer.com/)
*   [http://powershellide.com/](http://powershellide.com/)
*   [http://www.codeplex.com/PoshConsole](http://www.codeplex.com/PoshConsole)

and, of course, for real programmers, you have the shell mode of (x)emacs :-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-13T20:42:39.980

只需使用 cygwin 并使用 PuTTY 登录即可。比标准控制台好多了。:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-11T02:43:57.223

呃... Unix 命令外壳到 Windows 的所有端口呢？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-11T03:08:24.310

此外，Python（或 perl）可以完全取代 shell。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-27T01:44:40.590

You might want to try [Take Command Console](http://www.jpsoft.com/), formerly 4NT, formerly 4DOS.

Quick summary of points you might care about:

*   Command line editing with filename completion, history, and **cut & paste**
*   Integrate PERL, Ruby, REXX, **Python**, and any Active Scripting language
*   Fast - 20-200% **faster output display** than the standard Windows console
*   Integrated file explorer - examine directories, **drag and drop files**
*   Upwardly compatible with CMD.EXE with literally thousands of additions

Not free (except trial version) and not open source. I haven't tried it myself, but I was a 4DOS junkie back in the day, before Cygwin.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-27T07:20:08.350

如果您需要方便的终端 - 试试[ConEmu](http://code.google.com/p/conemu-maximus5/)（我是作者）。它是一种 Windows 控制台窗口增强（本地终端仿真器），它将多个控制台和简单的 GUI 应用程序呈现为一个具有数十种功能的可定制选项卡式 GUI 窗口。

[另一个答案和评论](https://stackoverflow.com/a/10904494/1405560)

# c# - 确定连接是否已断开

> ID：535213
> 
> 赞同：0
> 
> 时间：2009-02-11T02:41:32.173
> 
> 标签：c#, .net, javascript, file-upload, handler

我连接到`.NET`处理程序以使用`YAHOO.util.Connect.asyncRequest`.

然后处理程序抛出异常，因为文件太大。当抛出异常时，请求连接立即被切断，这意味着没有调用 asyncRequest 的 javascript 回调，并且不会通知用户图像上传失败。

有什么方法可以检测到连接已断开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-11T04:22:07.953

您是否在提供 YUI 对象的回调对象中提供了“失败”字段？见[http://developer.yahoo.com/yui/connection/#async](http://developer.yahoo.com/yui/connection/#async)

我很惊讶在您的错误情况下没有调用失败过程。我会向 YUI 提交一个错误。还可以使用 Fiddler，这样您就可以准确地观察 TCP 流上正在发生的事情。

作为 asyncRequest 的替代方案，它可以 a) 提供更好的用户体验（尤其是如果您的用户正在上传大文件） b) 可以更好地处理您的错误情况，请查看 YUI 上传的小部件。

一旦你让它工作，它就会做得非常好。见 [http://developer.yahoo.com/yui/uploader/](http://developer.yahoo.com/yui/uploader/)

# jquery - jQuery ajax 方法使用回调更新元素类

> ID：535218
> 
> 赞同：2
> 
> 时间：2009-02-11T02:44:04.057
> 
> 标签：jquery, ajax, callback

我想在单击图像时触发一个函数，该函数将访问一个向其传递参数的 URL，然后使用我从 URL 返回的值更新包含 div 的类。

有人可以帮我写代码吗？

我的 DOM 看起来像：

```
<div class="c1"><img src="/images/hello.jpg"/></div> 
```

我的网址是[http://www.example.com/ajax/image.aspx?className=c1](http://www.example.com/ajax/image.aspx?className=c1)。

因此，我想使用 ajax 请求访问该 url，并将当前类名传递给它，然后它将返回 eg `c2`。然后我将 div 的类更新为`c2`使用回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T03:05:42.147

这是假设您从服务中返回的唯一纯文本。在您的问题中包含返回内容格式的示例可能会很有用。我也不确定你是否需要 removeClass 函数，但我还是添加了它。

```
$('c1 > img').click(function() {
  var img = $(this);
  $.get('http://www.example.com/ajax/image.aspx?className=c1', null, function(data){
    img.closest('div').removeClass('c1').addClass(data);
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T23:00:17.080

This assumes that the div starts out with only one class. If it has more than one, you're going to need to do some work to get the class you're after.

```
$('img').click(function() {
  var $img = $(this);
  var $div = $(this).parent();
  var divClass = $div.attr('class');
  var url = 'http://www.example.com/ajax/image.aspx';

  $.ajax({
    'type' : 'get', // change if needed
    'dataType' : 'text', // data type you're expecting
    'data' : { 'className' : divClass },
    'url' : url,
    'success' : function(newClass) {
      $div.removeClass(divClass); // if needed
      $div.addClass(newClass);
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T03:17:18.360

我假设您希望在每次新点击（c1，c2，c3，...）时继续更新课程？

```
var classname = 'c1';
$('div.' + classname + ' > img').click(function() {
  var div = $(this).closest('div');
  var url = 'http://www.example.com/ajax/image.aspx?className=' + classname;
  $.get(url, null, function(data){
    div.removeClass(classname).addClass(data);
    classname = data;
  });
}); 
```

此外，您可能希望对整个 div 而不仅仅是图像进行点击检查：

```
var classname = 'c1';
$('div.' + classname).click(function() {
  var div = $(this);
  var url = 'http://www.example.com/ajax/image.aspx?className=' + classname;
  $.get(url, null, function(data){
    div.removeClass(classname).addClass(data);
    classname = data;
  });
}); 
```

# c++ - 为什么我不能将此对象推送到我的 std::list 上？

> ID：535223
> 
> 赞同：4
> 
> 时间：2009-02-11T02:46:17.717
> 
> 标签：c++, linked-list, loops

~~刚开始用 C++ 编程。~~

我创建了一个 Point 类、一个 std::list 和一个迭代器，如下所示：

```
class Point { 
public:
    int x, y;
    Point(int x1, int y1)
    {
        x = x1;
        y = y1;
    }
};

std::list <Point> pointList;
std::list <Point>::iterator iter; 
```

然后我将新点推送到 pointList 上。

现在，我需要遍历 pointList 中的所有点，所以我需要使用迭代器进行循环。这就是我搞砸的地方。

```
for(iter = pointList.begin(); iter != pointList.end(); iter++)
{
    Point currentPoint = *iter;
    glVertex2i(currentPoint.x, currentPoint.y);
} 
```

 ~~* * *

## 更新

你们是对的，问题不在于我迭代列表。看来问题出在我试图将某些内容推送到列表时。

确切的错误：

> mouse.cpp：在函数`void mouseHandler(int, int, int, int)': mouse.cpp:59: error: conversion from`Point*' 中请求非标量类型“Point”

这些行是：

```
 if (button == GLUT_LEFT_BUTTON && state == GLUT_DOWN)
{
    Point currentPoint = new Point(x, y);
    pointList.push_front(currentPoint);

} 
```

Point* 到非标量类型 Point 之间的转换是什么？我只是想创建新点并将它们推到这里的列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-11T02:50:48.767

一些东西..

*   您是否尝试过`iter->x`而`iter->y`不是复制该值？
*   你提到的错误很难理解。您不是试图通过迭代器获取 x 和 y，而是将迭代器数据复制到新点。

编辑：

根据 OP 中的新信息。您正在尝试新建一个非指针对象，然后尝试将该点填充到仅接受对象的向量中。您要么必须使向量成为指针向量并记住在后面删除它们，要么在堆栈上创建新点并使用标准分配将它们复制到向量中。试试这个：

```
if (button == GLUT_LEFT_BUTTON && state == GLUT_DOWN)
{
    Point currentPoint = Point(x, y);
    pointList.push_front(currentPoint);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-11T03:03:19.440

那应该是一段有效的代码。

```
#include <iostream>
#include <list>

class Point { 
public:
    int x, y;
    Point(int x1, int y1)
    {
        x = x1;
        y = y1;
    }
};

int main()
{
    std::list<Point> points;

    points.push_back(Point(0, 0));
    points.push_back(Point(1, 1));
    points.push_back(Point(2, 2));

    std::list<Point>::iterator iter;

    for(iter = points.begin(); iter != points.end(); ++iter)
    {
        Point test = *iter;
        std::cout << test.x << ", " << test.y << "; ";
    }
    std::cout << std::endl;

    return 0;
} 
```

使用此代码：

```
jasons-macbook41:~ g++ test.cpp
jasons-macbook41:~ ./a.out
0, 0; 1, 1; 2, 2; 
jasons-macbook41:~ 
```

尽管我不会像您的代码那样创建 Point 的临时副本。我会像这样重写循环：

```
for(iter = points.begin(); iter != points.end(); ++iter)
{
    std::cout << iter->x << ", " << iter->y << "; ";
} 
```

迭代器在语法上类似于指针。

编辑：鉴于您的新问题，请从施工线上删除“新”。那是创建一个指向 Point 的指针，而不是堆栈上的 Point。这将是有效的：

```
Point* temp = new Point(0, 0); 
```

或这个：

```
Point temp = Point(0, 0); 
```

而你最好选择后者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T03:00:39.040

如果已经有一个要应用于整个列表的函数，则 std::for_each 是要走的路，例如，

```
std::for_each(pointList.begin(), pointList.end(), myGreatFunction); 
```

如果您必须编写 for 循环，则如下所示：

```
std::list<Point>::iterator itEnd = pointList.end();
for(std::list<Point>::iterator itCur=pointList.begin(); itCur != itEnd; ++itCur) {
    yourFunction(itCur->x, itCur->y);
} 
```

笔记：

*   由于返回类型（引用与值/副本），++itCur 可能比 itCur++ 更有效

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T03:07:14.687

非标量问题是因为您将 Point 指针（运算符 new 的返回值）分配给 Point 堆栈对象（因为它不是代码中的 Point*）。

我建议说

```
 Point currentPoint(x, y);
    pointList.push_front(currentPoint); 
```

请注意，currentPoint 将被*复制*到您的列表中；Point 的隐式生成的复制构造函数（因为您没有在类中声明 Point(const Point& other) 构造函数，编译器为您做了一个）会将 currentPoint.x 和 currentPoint.y 复制到列表中；在这种情况下，这很好。点小，所以复制成本低，而且它只包含两个整数，所以直接复制整数是可以的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-11T04:46:46.117

**这个答案是指问题的编辑版本。**

正如 gbrandt 在其答案的编辑版本中所说，您的问题是您正在尝试动态分配 的实例，`Point`然后将其分配给`Point` *对象*而不是*指向* `Point`. 的结果`new`是指向 的*指针* `Point`，而不是`Point`对象——在这种情况下，您真正​​想要的是后者，您可以在没有 的情况下创建它`new`：

```
Point currentPoint(x, y);
pointList.push_front(currentPoint); 
```

因为`list<T>::push_front()`将对象的*副本*推送到`Point`列表中，所以这里不需要做任何动态分配。尽可能避免动态分配会更安全，因为它很容易导致内存泄漏——例如，下面的替代代码编译和工作，导致内存泄漏，因为指向的对象`currentPoint`从不`delete`d：

```
Point *currentPoint = new Point(x, y);
pointList.push_front(*currentPoint);      // Notice the "*" 
```

当然，您可以`delete currentPoint;`在最后添加以消除泄漏，但是当基于堆栈的分配更快更简单地完成工作时，为什么要使用慢速动态分配呢？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-11T03:02:33.420

*如果您不想使用 std::foreach*，这是我通常处理此类循环的方法：

```
for (iter curr = pointListObject.begin(), end = pointListObject.end(); curr != end; ++curr)
{
    glVertex2i(curr->x, curr->y);
} 
```

请注意以下几点：

*   pointListObject 是 pointList 的一个实例；如果你使用类（pointList 类型，而不是pointList的*实例），你会遇到麻烦，但编译器会抱怨很多。*与 iter 相同。如果你将类型名和实例名分开，它只会让事情更容易理解。
*   像这样对迭代器进行联合初始化可以让您将 end 的初始化保持在循环内（有利于范围界定），同时保持每个循环的执行成本低。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-11T03:24:25.567

您是从 .cpp 文件中将此代码剪切并粘贴到 SO 中，还是重新输入？从您的错误消息的声音中，我猜原始代码说

```
glVertex2i(iter.x, iter.y); 
```

正如 gbrandt 指出的那样，它没有正确取消引用迭代器。

我将重写循环如下：

```
std::list<Point>::const_iterator iter = pointList.begin();
const std::list<Point>::const_iterator end = pointList.end();

for (; iter != end; ++iter) {
  const Point& p = *iter;
  glVertex2i(p.x, p.y);
} 
```

主要更改是使用 const_iterators 而不是非常量，因为您的循环不打算修改列表内容。然后，只获取一次 begin() 和 end() 的值，使用 preincrement，并将迭代器解引用一次到 const 引用中。这样您就没有复制，您的原始代码复制了 *iter 引用的 Point 对象，并且您避免了两次取消引用迭代器以获得尽可能高的效率。

现在，对于一些未经请求的 OpenGL 建议，我还要指出，顶点数组可能是比立即模式 (glVertex*) 调用更好的选择。

希望这可以帮助...

# java - 取字符串 "asdxyz\n" 并将 \n 替换为 ascii 值

> ID：535227
> 
> 赞同：0
> 
> 时间：2009-02-11T02:48:58.957
> 
> 标签：java, apache-flex, compiler-construction

我不想用 /u000A 替换它，不想让它看起来像“asdxyz/u000A”

我想用实际的换行符替换它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T02:54:22.127

只需使用[`String.replace()`](http://java.sun.com/javase/6/docs/api/java/lang/String.html#replace(java.lang.CharSequence,%20java.lang.CharSequence))：

```
newtext = text.replace("\\n", "\n"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-11T03:38:20.913

根据您对[Natso 的回答](https://stackoverflow.com/questions/535227/take-string-asdxyz-n-and-replace-n-with-the-ascii-value/535235#535235)，您似乎对正在发生的事情有一个根本的误解。两个字符序列`\n`不是换行符。但这是我们在代码中*表示*该字符的方式，因为实际字符很难看到。编译器知道，当它在字符串文字的上下文中遇到该两个字符序列时，它应该将它们解释为真正的换行符，其 ASCII 值为 10。

如果您将该两个字符序列打印到控制台，您将看不到它们。相反，您会看到光标前进到下一行。那是因为编译器已经用换行符替换了这两个字符，所以它实际上是发送到控制台的换行符。

如果您的程序*输入*包含反斜杠和小写*N*，并且您想将它们转换为换行符，那么[Zach 的答案](https://stackoverflow.com/questions/535227/take-string-asdxyz-n-and-replace-n-with-the-ascii-value/535239#535239)可能就足够了。但是，如果您希望您的程序在输入中允许使用真正的反斜杠，那么您将需要某种方式让输入表明反斜杠后跟小写*N*确实应该是这两个字符。通常的方法是在反斜杠前面加上另一个反斜杠，将其*转义*。如果您在这种情况下使用 Zach 的代码，您最终可能会将三个字符序列`\\n`转换为由反斜杠后跟换行符组成的两个字符序列。

读取使用反斜杠转义的字符串的可靠方法是从输入的开头开始一次解析一个字符。将字符从输入复制到输出，除非遇到反斜杠。在这种情况下，也要检查下一个字符是什么。如果是另一个反斜杠，请将一个反斜杠复制到输出。如果它是小写*N*，则将换行符写入输出。如果它是任何其他角色，那么无论您定义什么都是正确的。（示例包括将整个输入视为错误而拒绝，假装反斜杠不存在，以及省略反斜杠和后面的字符。）

如果您尝试在调试器中观察变量的内容，则调试器可能会检测到换行符将其转换*回*两字符序列`\n`。因此，如果您单步调试代码试图找出其中的内容，您可能会成为调试器帮助的牺牲品。在大多数情况下，它确实很有帮助。程序员通常想知道字符串中有哪些字符。他们不太关心这些角色将如何出现在屏幕上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T02:51:31.150

使用“(char)(10)”代码生成真正的 ascii 值。

```
newstr = oldstr.replaceAll("\\n",(char)(10));

// -or-

newstr = oldstr.replaceAll("\\n","" + ((char)(10))); 
```

//（已经有一段时间）

# labview - 如何在LabVIEW的文本框指示器和滑块中显示值？

> ID：535228
> 
> 赞同：3
> 
> 时间：2009-02-11T02:49:32.857
> 
> 标签：labview

有没有办法链接LabVIEW前面板上的两个指示器，使它们始终具有相同的值？现在我每次都将两者设置为相同的值，但如果有一种方法可以设置一个来镜像另一个，那就容易多了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-11T09:35:13.397

您可以使数字显示可见。右键单击滑块并从可见项目中选择“数字显示”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-11T09:37:33.483

有几种方法可以实现这一点，具体取决于您尝试显示数据的方式。

如果您只是尝试更新滑块并使文本框指示器显示数值，则右键单击滑块并选择“可见项目 - > 数字显示”，您将有一个显示滑块值的数字指示器。然后可以根据需要重新定位。您应该看看这是否满足您的要求，因为其他方法会增加您的框图的复杂性。

另一种方法是使用网络共享变量并绑定数据，尽管我认为从你的问题来看这将是过度杀戮。

您还可以创建一个事件结构来查找滑块的值更改事件并相应地更新文本指示器。您必须小心如何更新滑块，因为仅将值连接到滑块不会触发事件以使用链接到滑块的属性节点以获取属性“值（信号）”。同样，这可能超出您的应用程序的顶部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T04:44:26.823

严格来说，不，您不能自动执行此操作。您可以做的是设置一个事件结构，并为两个控件中的每一个使用 Value Changed 事件来更新另一个。只需意识到滑块在用户滑动时会多次触发值更改事件，而不是最后一个事件。但是，在这种情况下，这可能是您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-12T22:29:29.890

我认为这并不容易，但是有一些可能性（如所讨论的）。一般的问题是为什么？您在两个地方有一个具有相同信息的指标。（或者它们是实际控件？）如果您有两个指示器，只需将端子彼此相邻放置，只需记住当您更改两者之一（通过本地或通过参考）以模仿其双胞胎的动作。

为这两个控件使用值更改事件应该可以工作，请记住，如果您不直接处理该事件，您可能会遇到竞争条件。

可以进一步描述为什么您需要两个控件来执行相同的操作/值吗？

吨

# php - 当网站遇到错误时阻止自动生成的电子邮件泛滥的技术

> ID：535240
> 
> 赞同：2
> 
> 时间：2009-02-11T02:54:44.887
> 
> 标签：php, email, error-handling, error-reporting

对于我当前的 Web 开发项目，我正在实施一个后端系统，该系统将标记错误并自动向管理员发送一封电子邮件，其中包含有关所发生事件的详细信息。捕获错误并使用适当的错误信息生成电子邮件非常简单；但是当人们考虑某些错误类型时会出现问题，特别是如果该站点被频繁访问。

考虑几个例子：

1.  意外的数据库中断，导致 Web 服务器上的所有脚本都无法连接。如果说数据库服务器需要 2 分钟（120 秒）才能重新联机，并且 Web 服务器以 10/秒的速率接收*唯一*请求，那么在数据库服务器重新联机所需的时间内，管理员会发送电子邮件将被 1200 封相同的电子邮件淹没，所有这些电子邮件都在尖叫着无法连接到数据库。
2.  某处脚本中的错误设法通过测试偷偷摸摸，并且是完全搞砸内容生成的各种错误，并且仅在特定的情况下发生（例如每 100 个请求一次）。再次使用 10/秒的*唯一*请求率意味着管理员将每 10 秒收到关于相同错误的相同电子邮件，直到它被修复。

**我可以使用哪些方法/策略来防止这种情况发生？（我只对监控脚本产生的错误感兴趣，基础设施问题超出了这个解决方案的范围）**

我将假设我几乎总是可以使用传递给[set_error_handler](http://ca.php.net/manual/en/function.set-error-handler.php)设置的错误处理程序回调的一些值的摘要来唯一地识别错误。

第一个也可能是最明显的解决方案是在数据库中记录，并且仅在自上次发生后经过合理的最短时间后才发送电子邮件。这不是理想的方法，尤其是在数据库导致问题的情况下。另一种解决方案是在发生错误时将文件写入磁盘，并检查自上次修改文件以来是否经过了合理的最短时间段。**除了我描述的两种方法之外，还有什么机制可以解决这个问题吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-11T03:00:41.287

为什么不简单地将它们全部发送出去，然后将它们收集并存储在接收端的数据库中。这样，您就可以绕过数据库成为服务器问题的可能性。

此外，在我看来，更大的优势是您不会随意丢弃有价值的取证数据。事后分析非常重要，任何类型的过滤都可能使其变得异常困难或不可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T02:59:02.490

您是否尝试过研究像 SiteScope 这样的监控软件？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T04:17:16.860

我所做的是监控错误日志，并每 5 分钟发送一次摘要。我想这是因为我的高质量代码（相对于一个不受欢迎的应用程序！），但我并没有受到太多麻烦：PI 基本上从头到尾读取日志文件，解析错误消息，并在时间戳 < 我上次运行作业的时间，然后发送一封简单的电子邮件。

这工作得很好。但是，如果您经常使用 POST，那么通过将 apache 访问日志与您的 php 错误日志相关联，您可以获得的信息量是有限的。我记得读过有关从 apache 中将 POST 记录到文件的模块，但不记得具体细节。

但是，如果您愿意使用错误处理程序在某处进行写入，那可能是最好的，因为您可以访问更多信息。ip、会话 id（以及任何可能影响设置的用户信息，例如分页或其他）、函数参数（debug_backtrace 或其他任何内容）... 编写每个错误，仅在出现新错误时或在错误发生后发送消息已被确认（如果您愿意编写这样的系统）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T15:35:35.713

您应该继续生成所需的任何日志文件。但与其自己发送电子邮件，不如将日志连接到像[Nagios](http://www.nagios.org/)这样的监控系统。让监控解决方案决定何时提醒管理员以及多久提醒一次。

# audio - WAVE PCM 数据的声压显示

> ID：535246
> 
> 赞同：5
> 
> 时间：2009-02-11T02:57:28.687
> 
> 标签：audio, wav, pcm, directsound

数字声音正在使用 DirectSound 设备播放。有必要以分贝为单位显示声音活动 - 就像模拟设备一样。

从 WAVE PCM 数据（44100 Hz，16 位）计算声压的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T03:06:42.223

如果您只需要声压的“概念”，您可以简单地计算信号某些时间范围内的对数能量：每 N 个样本拆分一次信号，计算 10*log(sum(xn**2)) 其中x 是 N 个样本，您会得到一个 dB 域中的值。如果您需要精确地显示一个度量（即您的 0 dB 匹配说一个 mixtable 0dB），它有点复杂。

有关更多详细信息，请参见此处：

[http://music.columbia.edu/pipermail/music-dsp/2002-April/048341.html](http://music.columbia.edu/pipermail/music-dsp/2002-April/048341.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T10:32:34.740

声压是单位面积力的量度。要确定这一点，您必须了解有关播放音频的扬声器的信息。[您可以使用cournape](https://stackoverflow.com/users/11465/cournape)提出的算法获得相对于任意参考（与[听力阈值](http://en.wikipedia.org/wiki/Auditory_threshold)相反）的分贝水平。

计算一个时间间隔内的[平均信号功率](http://en.wikipedia.org/wiki/Root_mean_square)，计算以 10 为底的对数并乘以 19。平均功率是通过在该间隔内平均每个样本的平方来计算的。请注意，正值和负值是必需的（即它必须是[交流信号](http://en.wikipedia.org/wiki/Alternating_current)）。因此，请确保 PCM 值是浮点数、2 的补码或相应地偏移无符号值。

此外，通过应用[Parseval 定理](http://en.wikipedia.org/wiki/Parseval%27s_theorem)和[傅里叶变换](http://en.wikipedia.org/wiki/Fourier_transform)，您还可以生成[不同频段](http://www.soundtechnology.com/rta_dm.gif)的信号电平。

# c# - 面向 C# ASP.NET 开发人员的 SharePoint

> ID：535255
> 
> 赞同：24
> 
> 时间：2009-02-11T03:02:13.090
> 
> 标签：c#, asp.net, sharepoint

我被要求在接下来的几周内在[SharePoint](http://en.wikipedia.org/wiki/Microsoft_SharePoint)中创建一个网站，而我对 SharePoint 完全陌生。

有没有人有关于如何使用自定义[SQL Server](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)数据库进行一些基本操作（例如创建自定义表单、使用基本[CRUD操作）的任何好的示例/教程？](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)

还有什么方法可以在 ASP.NET 中编码（带有[代码隐藏](http://en.wikipedia.org/wiki/ASP.NET#Code-behind_model)页面），但使用 SharePoint 外观和身份验证的东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-11T08:39:24.327

SharePoint与您习惯的*不太一样。*我的两个主要抱怨是：

**部署：**

如果您的要求是针对单个生产站点（没有暂存/测试/开发站点），那么最好的选择可能是使用[SharePoint Designer](http://en.wikipedia.org/wiki/Microsoft_Office_SharePoint_Designer)并直接在生产站点上将内容组合在一起（是的，我知道它很脏）。

如果您需要那些其他环境，您应该为所有内容生成部署包（没有 xcopy 部署）。部署包是[PITA](http://en.wiktionary.org/wiki/PITA)恕我直言，*很*容易出错。

**IIS**

SharePoint 基本上接管了您的[IIS](http://en.wikipedia.org/wiki/Internet_Information_Services)安装，并引入了一套新的规则来确定事物的位置等。一个陷阱是“幻影”文件。即，每当使用 SharePoint Designer 更改文件时，该文件都会备份到数据库中，并且从现在起 IIS 将只使用数据库中的文件，因此更改文件系统中的文件没有任何用处。

**总结一下：**

以我的拙见，如果您正在创建一个正常运行时间并不那么重要的网站，并且您可以承受在生产中犯错的风险，那么 SharePoint 对设计师来说已经足够好了。如果您正在创建一个[CMS](http://en.wikipedia.org/wiki/Content_management_system)站点，您需要代码在投入生产之前通过多个环境（使用[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)），我想没有其他基于 .NET 的 CMS 做得更差。您将花费大量时间研究如何让部署例程为您工作，并且您将花费大量时间处理与“幻影”文件相关的问题

祝你好运。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-11T04:01:37.550

Technet 拥有大量用于 SharePoint 产品的[虚拟实验室。](http://technet.microsoft.com/en-us/virtuallabs/bb512933.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-11T03:25:35.377

首先要记住的是，SharePoint 只是一个 ASP.NET 应用程序。它有大量的框架，并且内置了各种东西，比如安全性等。但从您的角度来看，您可以只构建一个 Web 控件，然后基本上将其直接部署到服务器上。查看 MikeG 的[这篇文章](http://sharepoint.microsoft.com/blogs/mikeg/Lists/Posts/Post.aspx?List=1b3bbb8f-4b5a-4f72-94c4-94cb80bc3866&ID=1066)，尤其是 CodePlex 上的[SmartPart](http://www.codeplex.com/smartpart)。这将帮助您轻松启动和运行。由于您使用的是标准 Web 控件，因此您可以访问 CodeBehind。需要注意的是，您的程序集必须部署到 GAC 或在配置文件中授予完全信任 - SmartPart 将帮助您完成。

SharePoint Designer 只是重新命名的 FrontPage。它非常可以帮助您处理一些基本的东西，如果这是偶尔发生的事情，可能值得研究。但是，如果您要从事任何类型的长期工作，我强烈建议您参加有关开发 SharePoint 应用程序的课程。它可能是一头野兽，您可能会发现自己陷入流沙的速度比您想象的要快。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-11T04:02:38.530

Microsoft 的 SharePoint 开发网站是一个很好的开始，可以让您朝着正确的方向前进，网址为[http://www.mssharepointdeveloper.com/](http://www.mssharepointdeveloper.com/)。这将使您在了解学习工作中需要优先考虑的内容方面取得很大进展。

要回答您的第二个问题，简而言之：是的，您可以创建使用代码隐藏的页面，就像常规的 ASP.net 一样。较长的答案有点超出此处的范围，因为它需要更好地了解 SharePoint 如何处理母版页、自定义页面以及 SharePoint 中的布局或应用程序页面概念。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-11T04:08:28.033

获取 Ted Pattison 的书[Inside Microsoft Windows SharePoint Services 3.0](https://rads.stackoverflow.com/amzn/click/com/0735623201)。如果您要进行任何共享点开发，这是绝对*必须的。*

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-12T17:25:43.973

我们通过组合 SmartParts（如上所述）来构建我们的 Sharepoint 应用程序，用于更简单的应用程序和 _Layout 应用程序，用于更复杂的东西。

_layout 应用程序可让您构建传统的 ASP.NET Web 应用程序，并将其直接放入 Sharepoint。这是一个帮助您入门的链接。

[http://msdn.microsoft.com/en-us/library/bb418732.aspx](http://msdn.microsoft.com/en-us/library/bb418732.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-11T03:11:51.213

也许最快速、最简单的入门方法是使用 Microsoft Office 版本之一中的 SharePoint Designer 应用程序。如果您只需要创建简单的表单，Microsoft InfoPath 将继续使用。然后我会继续购买一本关于 SharePoint 开发的书，因为它是一个广阔的领域。[频道 9](http://channel9.msdn.com/)也是 SharePoint 位的一个很好的资源。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-12T19:13:06.087

我大约 3 个月前才开始使用 SharePoint。我使用 Pilothouse Consulting SharePoint 培训 DVD ( [http://www.pilothouseconsulting.com/dvd/sharepoint-training-dvd-development-benefits.html](http://www.pilothouseconsulting.com/dvd/sharepoint-training-dvd-development-benefits.html) ) 学习了所有基础知识并为 SharePoint 打下了良好的基础。它非常有帮助，所有用于开发的教程、演示和代码示例都是用 C# 编写的。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-02-11T08:15:05.693

加快速度的最快方法是使用**smartpart**。它允许您构建 ASP.NET 用户控件并将它们部署在 sharepoint 中。

[http://www.codeplex.com/smartpart/Release/ProjectReleases.aspx?ReleaseId=10697](http://www.codeplex.com/smartpart/Release/ProjectReleases.aspx?ReleaseId=10697)

Sharepoint 设计器/CAML： - 非常适合初学者应用程序。

视觉工作室工具：

*   痛苦的
*   记录非常糟糕
*   虫子缠身
*   非常繁重的部署周期..

IMO 微软必须想出更好的东西。在那之前，smartpart 很棒。

# iphone - 是否可以在 iPhone 上安装第三方应用程序？如果不是，如何控制？

> ID：535262
> 
> 赞同：2
> 
> 时间：2009-02-11T03:04:51.120
> 
> 标签：iphone, app-store

我可以绕过 Apple 并为用户提供应用程序，还是他们强迫你通过它们？如何？只是合法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T03:14:18.070

除了 App Store（和越狱）之外，Apple 还提供了两种官方途径来在 iPhone 上安装应用程序。

1.  Enterprise Distribution：专为公司内部用户设计
2.  Ad Hoc Distribution：允许您的应用程序安装在多达 100 部 iPhone 上

来源：http: [//developer.apple.com/iphone/program/distribute.html](http://developer.apple.com/iphone/program/distribute.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T17:20:23.293

对于未越狱的手机，分发规则由 iPhone 的代码签名系统执行。手机不会运行任何未经 Apple 签名的应用程序，获得应用程序签名的唯一方法是将其放入应用程序商店或使用临时分发。

Ad-hoc 是有效的，但对于多个设备来说非常耗时，因为您必须为要将应用程序分发到的每个设备获取唯一的设备 ID。然后，您为该设备签署应用程序并发送副本以及配置文件。一些批处理是可能的——您可以在同一个 ad-hoc 构建中获得多达 100 个设备。但是，如果/当 Apple 发现您正在这样做时，他们会关闭您的 iPhone 开发者帐户（因为违反规则），然后您将无法再生成任何配置文件。

去年，当 Apple 拒绝了他们的应用程序 (Podcaster) 时，一位开发人员尝试使用 ad-hoc 方法。他们声称在苹果关闭它们之前已经售出了 1100-1200 份。

越狱手机没有此限制，但由您决定 (a) 市场是否足够大，以及 (b) 是否有足够多的人愿意为您的应用付费。我不知道答案——很可能对两者都是“是”——但不要只是假设它们是真实的，而没有进行足够的调查以做出合理的预测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T03:15:51.577

如果您想在不通过 App Store 的情况下将应用程序分发到手机，您必须为特定手机的每个应用程序副本签名。如果您需要更广泛的分布，您的所有客户端电话都必须“越狱”。一旦手机被越狱，它将接受任何安装申请。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T03:18:50.680

您可以通过[Cydia](http://www.appleiphoneapps.com/2008/07/how-to-use-cydia-a-walkthrough/)为越狱的 iPhone / iPod 提供应用程序。Cydia 使用类似于 Debian 的[apt](http://packages.debian.org)的系统。基本上允许用户添加自定义“源”（存储库）并安装这些源提供的应用程序。

显然，这不受 Apple 支持或批准，因为它绕过了 App Store 及其 App 审批流程。

# c# - C# 中的线程和 GUI 元素

> ID：535266
> 
> 赞同：2
> 
> 时间：2009-02-11T03:05:57.810
> 
> 标签：c#, multithreading, user-interface

我正在尝试制作一个基本的 IRC 客户端...但我的问题是让文本显示在 RTF 框中而不会滞后

我决定使用线程，并且我想在线程中更新 RTF 框，但我不能因为它给了我关于 RTF 框元素不是静态的错误？

有什么见解吗？如果你们想要的话，我会粘贴代码

好的，这里是代码（做编辑碰撞？）

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net.Sockets;
using System.IO;
using System.Threading;
using System.Net;

namespace IrcClient
{
    public partial class mainWindow : Form
    {
        static IRC client;
        static string newLine, oldLine;

        public mainWindow()
        {
            InitializeComponent();
        }

        private void main()
        {

        }

        private void mainWindow_Load(object sender, EventArgs e)
        {
            client = new IRC("irc.freenode.net" ,6667, "jimi__hendrix");
            new Thread(new ThreadStart(update)).Start();

        }

        private static void update()
        {
            newLine = client.sr.ReadLine();

            Thread.Sleep(50);
        }

        private void btnSend_Click(object sender, EventArgs e)
        {
            client.privmsg(inputBox.Text);
            messageBox.AppendText(inputBox.Text + "\n");
            inputBox.Text = "";
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            if (newLine != oldLine)
            {
                messageBox.AppendText(newLine + "\n");
                oldLine = newLine;
            }
        }
    }

    class IRC
    {
        TcpClient connection;
        NetworkStream stream;
        public StreamWriter sw;
        public StreamReader sr;
        string nick;

        public IRC(string server, int port, string Nick)
        {
            try
            {
                connection = new TcpClient(server, port);
                stream = connection.GetStream();
                sr = new StreamReader(stream);
                sw = new StreamWriter(stream);
                nick = Nick;
                sw.WriteLine("PASS " + "caruso11");
                sw.Flush();
                sw.WriteLine("NICK " + nick);
                sw.Flush();
                sw.WriteLine("USER Jimi__Hendrix 8 irc.freenode.net :Jimi__Hendrix");
                sw.Flush();
            }

            catch (Exception e)
            {
                MessageBox.Show(e.ToString());
            }
        }

        public void privmsg(string msg)
        {
            sw.WriteLine(msg);
            sw.Flush();
        }

        public void parse(string msg)
        {

        }
    }
} 
```

一些方法是空白的，一些代码可以清理，但我想先完成这个......另外，还有由 Visual Studio 生成的设置窗口的代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-11T03:11:58.013

通常，由于 Windows 的限制，尝试从主线程以外的线程更新控件是行不通的。如果您需要从工作线程调用 RTF 框上的方法或设置属性，您可能需要使用[Invoke](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invoke(VS.71).aspx)或[BeginInvoke](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)。这可能如下所示：

```
void MyThreadMethod()
{
    // stuff
    this.rtfBox.BeginInvoke( (MethodInvoker)(()=> this.rtfBox.Text = "foo") );
    // stuff
} 
```

**编辑**：正如其他人指出的那样，如果由于控件不是静态的错误而实际上无法*编译，则您可能试图从静态函数中引用成员变量，这是非法的。*发布代码将有助于缩小问题范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T03:11:24.863

我相信您正在使用 Windows 窗体。查看有关[它](http://www.yoda.arachsys.com/csharp/threads/winforms.shtml)的文本，在使线程直接访问表单元素之前，您必须注意一些注意事项。

如果这不完全是您的问题，请详细说明问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T03:12:30.243

**规则**：你不应该从另一个线程访问一个窗口。

使用这种技术：

*   从您的线程引发事件以更新 RTF（使用所需的文本等数据）
*   在 GUI 线程上使用以下内容：
*   使用“InvokeRequired”属性来验证调用是否来自 GUI 线程
*   使用 Invoke 方法（为此您需要一个委托）

BeginInvoke 也可以，但唯一的问题是它并不能真正保证立即启动（它使用线程池）。我更喜欢使用 Invoke 方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T03:16:53.447

其他人已经提到你遇到的问题是什么，以及如何解决它。

并不是说拥有一个单独的工作线程是一个坏主意，由于性能原因*需要*多个线程似乎很奇怪。似乎对于像 IRC 客户端这样简单的东西，您应该能够在一个线程上完成所有操作，而不会出现任何 UI 迟缓。也许您可以发布一些代码，以便我们可以看到问题的根源是什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T03:11:03.367

RichTextBox 位于 UI 线程上，因此除非您位于 UI 线程上，否则您将无法访问 RichTextBox。你是如何加载内容的？内容有多大？延迟是来自加载内容还是 RTF 框解析它？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-11T03:14:29.363

您可能引用了表单的成员变量，而不是静态变量，因此出现了错误。

无论如何这是一个非常错误的方法，因为 UI 元素只能从 UI 线程更新，否则你会得到一个跨线程操作异常。因此，您需要对 UI 线程上的 set-text 方法执行 Invoke()，这最终也会“滞后”。

不确定“滞后”是什么意思，您可以尝试使您的父表单双缓冲以减少闪烁。

# ruby-on-rails - How do you ActiveRecord query caching at the application level?

> ID：535270
> 
> 赞同：2
> 
> 时间：2009-02-11T03:07:20.117
> 
> 标签：ruby-on-rails, activerecord

ActiveRecord query caching is enabled when a controller's action is invoked. I also know that you can do something like this to temporarily enable caching for a given Model for a given code block:

```
User.cache do  
    ....
end 
```

But is there a way to enable query caching for other contexts (e.g. when a script is run under the rails environment using ./script/runner)?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-11T03:43:30.933

An ActiveRecord query cache lives only for the duration of a particular action (i.e. request). If you want a cached object to survive longer or be used between processes you need to look at something like memcached.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T06:08:21.413

[This plugin](http://github.com/ferblape/query_memcached) will persist the query cache using memcached.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T08:12:54.173

A simple solution is to wrap the code given to `script/runner` in a block, directly on the commandline:

```
script/runner "User.cache { ... }" 
```

Notice the caching is not simply for the `User` model, but for all queries performed within the codeblock.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-14T16:12:37.033

To get query caching when running a script you need to wrap any code with:

```
ActiveRecord::Base.connection.cache do
  your_code_here
end 
```

It looks like rails automatically sets the query cache for normal calls to Actions, but you have to do it manually in other contexts.

# lisp - 复合布尔测试的 Clojure（或 Lisp）等价物

> ID：535277
> 
> 赞同：21
> 
> 时间：2009-02-11T03:11:13.647
> 
> 标签：lisp, clojure, boolean

在 C++ 中，我会写这样的东西：

```
if (a == something && b == anotherthing)
{
   foo();
} 
```

我认为 Clojure 等价物是这样的是否正确：

```
(if (= a something)
    (if (= b anotherthing)
        (foo))) 
```

还是有另一种方法来执行我错过的逻辑“和”？正如我所说，后一种形式似乎工作正常——我只是想知道是否有一些更简单的方法来执行逻辑与。在 Clojure Google Group 上搜索“boolean”、“logical”和“and”会发现太多结果，没有太多用处。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-02-11T03:13:32.377

在 Common Lisp 和 Scheme 中

```
(and (= a something) (= b another) (foo)) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-02-11T08:32:29.913

在 Common Lisp 中，以下也是一个常见的习语：

```
(when (and (= a something) (= b another))
  (foo)) 
```

将此与 Doug Currie 使用的答案进行比较`(and ... (foo))`。语义是相同的，但是根据 的返回类型`(foo)`，大多数 Common Lisp 程序员会更喜欢其中一个：

*   在返回布尔值`(and ... (foo))`的情况下使用。`(foo)`

*   在返回任意结果`(when (and ...) (foo))`的情况下使用。`(foo)`

证明规则的一个例外是程序员知道这两个习语的代码，但`(and ... (foo))`无论如何还是故意编写的。:-)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2010-10-29T15:16:00.873

在 Clojure 中，我通常会使用类似的东西：

```
(if 
  (and (= a something) (= b anotherthing))
  (foo)) 
```

显然可以更简洁（例如 Doug 的回答），但我认为这种方法更适合人们阅读 - 特别是如果代码的未来读者具有 C++ 或 Java 背景！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-10-29T16:20:40.327

这真的很酷！`(and x y)`是一个宏——您可以在 clojure.org 上查看[源代码](http://github.com/clojure/clojure/blob/b578c69d7480f621841ebcafdfa98e33fcb765f6/src/clj/clojure/core.clj#L693)——它扩展为`(if x y false)`等价于：

```
if (x) {
  if (y) {
    ...
  }
} else {
  false
} 
```

`(or x y)`相似但相反。

# vb.net - 如何将 VB 的 Double 转换为 COBOL 的 COMP-3？

> ID：535303
> 
> 赞同：1
> 
> 时间：2009-02-11T03:21:19.130
> 
> 标签：vb.net, cobol

这里有人知道如何将 VB Double 转换为 Cobol S9(15)V99 Comp-3 数据类型吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-11T03:27:12.313

如果不需要在同一个程序中完成，在我看来，找到一个 VB*和*COBOL 都能理解的通用格式会更容易。

那将是文本。换句话说，最简单的解决方案可能是将数字作为文本“3.14159”写入文件，并让 COBOL 代码以该格式读取它并将`MOVE`其写入`COMP-3`字段？

如果这不可能，那`COMP-3`是一个相当简单的 BCD 类型。无论如何，我会将数字转换为字符串，然后一次将两个字符转换为字节数组。

S9(15)V99 需要 18 个 nybble（一个 nybble 是 4 位，或半个八位字节）来存储：

*   整数位（十五个 nybbles）。
*   小数位（两个 nybbles）。
*   标志（一个nybble）。

小数点不需要空格，因为 a`V`是隐含的小数，而不是真实的小数。

所以数字`3.14`将表示为字节：

```
00 00 00 00 00 00 00 31 4C 
```

唯一棘手的一点是最后的符号 nybble （`C`用于正面和`D`负面）。

这是我在 Excel VBA 中编写的一些代码（不幸的是，我没有在这台机器上安装 VB），它向您展示了如何做到这一点。makeComp3() 函数应该可以很容易地转移到一个真正的 VB 程序中。

宏测试程序输出值`0`,`49`和分别`76`是 hex`00`和`31`( is )。`4C``00314C``+3.14`

第一步（在所有声明之后）是将双精度数乘以十的相关幂，然后将其转换为整数，从而使双精度数成为隐含的​​小数：

```
Option Explicit

' makeComp3\. '
'   inp is the double to convert. '
'   sz is the minimum final size (with sign). '
'   frac is the number of fractional places. '

Function makeComp3(inp As Double, sz As Integer, frac As Integer) As String
    Dim inpshifted As Double
    Dim outstr As String
    Dim outbcd As String
    Dim i As Integer
    Dim outval As Integer
    Dim zero As Integer
    zero = Asc("0")

    ' Make implied decimal. '
    inpshifted = Abs(inp)
    While frac > 0
        inpshifted = inpshifted * 10
        frac = frac - 1
    Wend
    inpshifted = Int(inpshifted) 
```

接下来，我们将其制成正确大小的字符串，以便于处理：

```
 ' Get as string and expand to correct size. '
    outstr = CStr(inpshifted)
    While Len(outstr) < sz - 1
        outstr = "0" & outstr
    Wend
    If Len(outstr) Mod 2 = 0 Then
        outstr = "0" & outstr
    End If 
```

然后我们一次处理该字符串两个数字，并将每一对组合成一个输出 nybble。最后一步是处理最后一个数字和符号：

```
 ' Process each nybble pair bar the last. '
    outbcd = ""
    For i = 1 To Len(outstr) - 2 Step 2
        outval = (Asc(Mid(outstr, i)) - zero) * 16
        outval = outval + Asc(Mid(outstr, i + 1)) - zero
        outbcd = outbcd & Chr(outval)
    Next i

    ' Process final nybble including the sign. '    
    outval = (Asc(Right(outstr, 1)) - zero) * 16 + 12
    If inp < 0 Then
        outval = outval + 1
    End If

    makeComp3 = outbcd & Chr(outval)
End Function 
```

这只是测试工具，尽管它可能与更多测试用例有关:-)

```
Sub Macro1()
    Dim i As Integer
    Dim cobol As String

    cobol = makeComp3(3.14159, 6, 2)
    For i = 1 To Len(cobol)
        MsgBox CStr(Asc(Mid(cobol, i)))
    Next i
End Sub 
```

# communication - 客户参与敏捷开发的最佳实践？

> ID：535314
> 
> 赞同：4
> 
> 时间：2009-02-11T03:31:57.450
> 
> 标签：communication, agile, collaboration

我们需要让我们的客户开发合作伙伴参与我们的开发过程。我们或多或少地遵循敏捷方法。一些客户合作伙伴相距遥远，而另一些则更近。我们需要尽量减少差旅费用。

我们的客户在医疗保健领域，往往很忙、价格昂贵且难以安排。

哪些实践和技术有助于支持客户参与？我们正在使用电话、电话会议和电子邮件。我们对利用 wiki 技术感到好奇，并且很想听听对其他人有用的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T04:33:00.270

客户是在同一个隔间还是在地球的另一端并不重要，除了通信延迟 - 关键因素是*可用性*。

几天忙于回复您的电子邮件的客户将导致您的迭代延迟或失败

客户对敏捷有两个关键承诺：

1.  可以及时回答问题
2.  在迭代期间不要改变他们的想法/优先级

客户*必须*承诺就可用性达成合理的服务水平协议 (SLA)，例如 1 小时响应时间或 24 小时响应时间等，并且您需要根据滞后因素调整所有估计和时间表。如果客户不承诺或不遵守，则取消迭代并重新计划，再次将客户的承诺置于首位。不要*只是*“猜测”您认为客户可能想要什么。

底线：没有客户承诺，敏捷*就行不通*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-11T07:14:07.183

我对敏捷方法的体验主要针对桌面应用程序。当我们的客户在远程时，我们会花时间让工程师到客户现场配置/安装演示设备。工程师与客户一起制定测试和演示设置/计划，以提供客户认为复制部署环境的重要方面但将演示系统与现有基础架构隔离的环境（以便我们可以在需要时推送更新）。工程师还设置了部署系统，将我们的应用程序转移到生产环境中，这样我们就可以在不现场的情况下“部署”。我们的应用程序可以自我更新（对于每个版本或每个构建），我们会仔细检测版本以记录*所有*错误并将所有崩溃作为错误提交给我们的错误跟踪器。这样我们至少知道出了什么问题，即使我们不知道什么是对的。

对于出现在客户测试平台上的每个版本/构建，我们都会提供一个（简短的）截屏视频，由项目负责人或主要开发人员讲述，演示任何新功能。发行说明包含我们希望客户考虑的任何长期问题或问题（即无法通过电话或电子邮件立即解决的问题），应用程序会为用户显示这些说明。

最后，可能也是最重要的，我们在*我们的*日历服务器上为客户和/或客户的联络人提供一个帐户，并配置他们的日历应用程序以使用该帐户。然后这是双向的——我们可以与客户安排时间（现场、电话、电子邮件等），他们也可以与我们的开发人员做同样的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-11T05:03:07.870

一种选择：在“客户合作伙伴”站点安装客户代理，当这些客户可用时，该代理可以提取您需要的信息。让这些代理建立稳固的关系，让他们能够代表客户的观点。他们的时间都是你的。当出现他们无法回答的问题时，他们可以随时联系您的客户合作伙伴——即使是在咖啡生产线上。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-11T06:14:52.660

敏捷中客户的全部意义在于与开发人员进行开放和自由的对话（即即时反馈）。如果您的实际客户无法提供此服务，那么您需要一个可以担任此角色的中介/代理。您*不需要* **实际**的客户，您只需要能够很好地代表客户利益以满足客户需求的人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-11T03:38:16.983

只是一些想法：

如果您确实选择使用 Wiki，请确保它支持整个 wiki 范围的“最近更改”列表，并且最好是特定于用户的列表。人们与开发人员的距离越近，就越有可能将电子邮件作为他们使用计算机的隐喻。如果他们不能立即告诉他们什么时候有新的东西可以看到，他们永远不会去探索它。您最好还需要向他们表明您需要他们注意事项的方法，否则他们会像对待 CC 一样对待更改。

我非常相信创建交互的视频屏幕截图（叙述）并将它们分发给用户。与真实的演示不同，客户不需要打断他们，他们可以一遍又一遍地倒带和重新观看相同的交互，关注小细节。

最后，如果您确实分发原型，请确保派人（或至少一个屏幕共享会话）来查看原型是如何使用的。上下文设计是有效的。您可以指望人们以与您期望的方式不同的方式使用您的原型，并且您必须了解他们如何使用它才能真正了解问题所在，即使他们没有报告问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-11T04:12:27.463

您是否考虑过类似[LogMeIn](http://logmeinsolutions.com/)的东西。

这将允许客户登录到您网络上已经运行您的应用程序的 PC，或者允许您在他们的一台计算机上安装/更新应用程序。

这将解决远程客户问题，还将支持敏捷过程中持续不断的客户反馈要求。

我在以前的公司使用它来提供技术支持，但没有理由（除了可能的成本）它不适用于您的情况。

这也是实际了解用户如何使用您的应用程序的好方法，因此可以找出哪些有效，哪些无效。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-11T04:13:33.950

首先，确保您有产品经理或产品负责人关闭开发人员。此人将管理与客户的关系。

然后，产品经理可以在每次迭代结束时向客户展示产品，并在开发人员需要反馈以实施用户故事时询问客户问题。

当您参与其中时，您可以从客户那里获得积极的反馈，这真是令人惊讶。

我们没有使用 wiki，大部分交流是通过电子邮件、电话和屏幕共享应用程序完成的（我们使用的是 GoToMeeting，但有很多替代方案）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-11T04:59:50.593

您可能应该在一个地方与每个人一起进行一次开球。面对面的时间是无价的。这包括所有开发人员。准备一些元计划问题，但也有足够的时间来交流。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-11T09:58:19.037

我认为，对于高度依赖客户参与的敏捷流程的大多数定义，您已经错过了“最佳实践”，这将是针对现场的，最好是始终在场的“团队内”客户。所以我想我们正在寻找“下一个最佳实践”。:)

有可能在现场引入“代理客户”。我不得不承认对代理客户的价值持怀疑态度。我担心在组合中引入某种二流和其他不必要的业务分析师功能的风险，增加的信噪比和可能出现乱码的消息。它还存在让忙碌的真实客户减少参与流程的风险，这可能会导致不满。我想知道是否有最近退休的具有良好领域知识的人可以担任顾问？

与远程客户的通信带宽惊人地低于面对面，这是我直到开始与另一个国家的用户打交道时才完全意识到的。即使是视频，损失也很大。

你的迭代有多长？计划迭代有多难？是否更容易进行更长的迭代并以更少的频率完成更多的计划，或者减少迭代长度并进行更小但更频繁的计划会议？是否涉及一位以上的客户

在每次迭代结束时，您是否有可用且可用的构建？在下一次计划会议之前，相关用户是否有时间进行实践？通过频繁发货来保持用户参与从表面上看似乎是一个好主意，这可能为小频繁迭代（一周？两周？）

wiki 的想法可能会奏效：您看过[FIT 框架](http://fit.c2.com/)吗？这是一种集成的验收测试/wiki，可能有助于从远程客户那里获得验收测试。我想我还希望提供某种（单独或集成的）“项目仪表板”，可能会定期推送给关键客户以及按需提供。用它来代替白板上的便利贴、大可见图表等。有许多开源或低成本的选项可以提供服务——编写自己的简单替代方案也不必太耗时或太昂贵。

最重要的是，请记住，“敏捷”是一种包罗万象的标签，用于强调[敏捷宣言](http://agilemanifesto.org/)中所支持的价值观和原则。在一种情况下被认为是“最佳”的东西在另一种情况下可能并非如此。如果您了解这些原则并定期以批判的眼光审查您的方法，那么您可能会足够接近适合您情况的最佳实践应用程序。

我已经有一段时间没有看它了，但是作者名单上有 Beck 和 Fowler，在[规划极限编程](https://rads.stackoverflow.com/amzn/click/com/0201710919)中应该有一些有用的东西。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-09-29T01:57:53.883

在我之前的职位@drchrono.com，我汇总了来自全国 20,000 名临床医生的数据/反馈/迭代请求。做到这一点的最好方法是宣传像 uservoice.com 这样的网站。我与有时 50 到 100 名医生（医生直接从我们的网站注册）举行了“每日现场网络演示”。在这些演示中，我将展示我们当前的产品并宣传用户的声音，以将他们的反馈转化为对我们的开发团队有用的工具。所有这些都是远程完成的，并导致经常性收入增长总体增长 1,400%。

# c++ - 检查值存在于 std::map - C++

> ID：535317
> 
> 赞同：31
> 
> 时间：2009-02-11T03:35:22.670
> 
> 标签：c++, iterator, find, stdmap

我知道*find方法在**std::map*中找到提供的键并将迭代器返回到元素。反正有没有找到值并获得元素的迭代器？我需要做的是检查 std::map 中是否存在指定的值。我通过循环地图中的所有项目并进行比较来做到这一点。但我想知道有没有更好的方法。

这是我写的

```
bool ContainsValue(Type_ value)
{
    bool found = false;
    Map_::iterator it = internalMap.begin(); // internalMap is std::map
    while(it != internalMap.end())
    {
        found = (it->second == value);
        if(found)
            break;
        ++it;
    }
    return found;
} 
```

**编辑**

如何在内部使用另一个存储值、键组合的地图。所以我可以调用 find 吗？*std::map 中的find()*是否进行顺序搜索？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-02-11T03:46:00.257

您可以使用[boost::multi_index](http://www.boost.org/doc/libs/1_37_0/libs/multi_index/doc/index.html)创建[双向映射](http://www.boost.org/doc/libs/1_37_0/libs/multi_index/doc/examples.html)- 您可以使用该对的任一值作为键来进行快速查找。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-24T21:52:52.687

如果您可以访问出色的[boost](http://www.boost.org/)库，那么您应该使用[boost::multi_index](http://www.boost.org/doc/libs/1_37_0/libs/multi_index/doc/index.html)来创建Mark 所说的[双向映射。](http://www.boost.org/doc/libs/1_37_0/libs/multi_index/doc/examples.html)与 std::map 不同，这允许您通过键或值进行查找。

如果您只有 STL 可以使用以下代码，则可以解决问题（模板可用于 mapped_type 支持 operator== 的任何类型的地图）：

```
#include <map>
#include <string>
#include <algorithm>
#include <iostream>
#include <cassert>

template<class T>
struct map_data_compare : public std::binary_function<typename T::value_type, 
                                                      typename T::mapped_type, 
                                                      bool>
{
public:
    bool operator() (typename T::value_type &pair, 
                     typename T::mapped_type i) const
    {
        return pair.second == i;
    }
};

int main()
{
    typedef std::map<std::string, int> mapType;

    mapType map;

    map["a"] = 1;
    map["b"] = 2;
    map["c"] = 3;
    map["d"] = 4;
    map["e"] = 5;

    const int value = 3;

    std::map<std::string, int>::iterator it = std::find_if( map.begin(), map.end(), std::bind2nd(map_data_compare<mapType>(), value) );

    if ( it != map.end() )
    {
        assert( value == it->second);
        std::cout << "Found index:" << it->first << " for value:" << it->second << std::endl;
    }
    else
    {
        std::cout << "Did not find index for value:" << value << std::endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-02-11T03:53:55.930

> 如何在内部使用另一个存储值、键组合的地图。所以我可以调用 find 吗？

是的：维护两张地图，一张地图使用一种类型的键，另一张使用另一种。

> std::map 中的 find() 是否进行顺序搜索？

不，这是对排序树的二分搜索：它的速度是 O(log(n))。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-02-11T03:46:55.200

查看 boost 的双向映射： http: [//www.boost.org/doc/libs/1_38_0/libs/bimap/doc/html/index.html](http://www.boost.org/doc/libs/1_38_0/libs/bimap/doc/html/index.html)

它让两个值都像一个键一样起作用。

否则，迭代是要走的路。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-07-13T19:21:39.987

试试这个功能：

```
template <class Map, class Val> typename Map::const_iterator MapSearchByValue(const Map & SearchMap, const Val & SearchVal)
{
    Map::const_iterator iRet = SearchMap.end();
    for (Map::const_iterator iTer = SearchMap.begin(); iTer != SearchMap.end(); iTer ++)
    {
        if (iTer->second == SearchVal)
        {
            iRet = iTer;
            break;
        }
    }
    return iRet;
} 
```

我认为它很有用

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-03-08T13:15:19.477

您所要求的正是[std::find](http://en.cppreference.com/w/cpp/algorithm/find)所做的（不是成员函数）

```
template< class InputIt, class T >
InputIt find( InputIt first, InputIt last, const T& value ); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-11T03:40:47.413

不，您必须遍历 std::map 并手动检查所有值。根据您要执行的操作，您可以将 std::map 包装在一个简单的类中，该类还将所有插入到映射中的值缓存在易于搜索且不允许重复的内容中，例如 std ：：放。不要从 std::map 继承（它没有虚拟析构函数！），而是包装它以便您可以执行以下操作：

```
WrappedMap my_map< std::string, double >;
my_map[ "key" ] = 99.0;
std::set< double > values = my_map.values(); // should give back a set with only 99.0 in it 
```

滚动您自己的替代方法是使用 Boost 双向地图，可以在下面的帖子或 Google 中轻松找到。

这真的取决于你想做什么，你想多久做一次，以及滚动你自己的小包装类与安装和使用 Boost 相比有多难。我喜欢 Boost，所以这是一个很好的方法 - 但是制作你自己的包装类有一些很好和完整的东西。您的优势在于可以直接了解操作的复杂性，并且您可能不需要 Boost 双向映射提供的值 => 键的完整反向映射。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-06T09:39:56.937

这不是一个最好的选择，但在用户在初始化时分配默认值（如 0 或 NULL）的少数情况下可能很有用。

```
Ex.
< int , string >
< string , int > 
< string , string > 

consider < string , string >
mymap["1st"]="first";
mymap["second"]="";
for (std::map<string,string>::iterator it=mymap.begin(); it!=mymap.end(); ++it)
{
       if ( it->second =="" ) 
            continue;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-16T00:54:01.473

我正在添加这个答案，如果有人来这里寻找 c++11 及更高版本..

```
 //DECLARE A MAP
    std::map<int, int> testmap;

    //SAMPLE DATA
    testmap.insert(std::make_pair(1, 10));
    testmap.insert(std::make_pair(2, 20));
    testmap.insert(std::make_pair(3, 30));
    testmap.insert(std::make_pair(4, 20));

    //ELEMENTS WITH VALUE TO BE FOUND
    int value = 20;

    //RESULTS
    std::map<int, int> valuesMatching;

    //ONE STEP TO FIND ALL MATCHING MAP ELEMENTS
    std::copy_if(testmap.begin(), testmap.end(), std::inserter(valuesMatching, valuesMatching.end()), [value](const auto& v) {return v.second == value; }); 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2010-12-01T19:16:55.317

可能我不完全理解您要完成的工作。但是为了简单地测试一个地图是否包含一个值，我相信你可以使用`std::map`内置的`find`.

```
bool ContainsValue(Type_ value)
{
    return (internalMap.find(value) != internalMap.end());
} 
```

# c# - 在结构上隐藏无参数构造函数

> ID：535328
> 
> 赞同：38
> 
> 时间：2009-02-11T03:40:59.847
> 
> 标签：c#, .net, struct

是否可以在 C# 中向用户隐藏无参数构造函数？

我想强迫他们总是使用带参数的构造函数

例如这个位置结构

```
public struct Position
{
    private readonly int _xposn;
    private readonly int _yposn;

    public int Xposn
    {
        get { return _xposn; }
    }

    public int Yposn
    {
        get { return _yposn; }
    }

    public Position(int xposn, int yposn)
    {
        _xposn = xposn;
        _yposn = yposn;
    }        
} 
```

我只希望用户能够通过指定 x 和 y 坐标来更新位置。

但是，无参数构造函数始终可用。

我不能将其设为私有。甚至将其定义为公开的。

我已阅读此内容： [为什么我不能为 .NET 中的结构定义默认构造函数？](https://stackoverflow.com/questions/333829/why-cant-i-define-a-default-constructor-for-a-struct-in-net)

但它并没有真正帮助。

如果这是不可能的 - 检测我被传递的位置是否具有值的最佳方法是什么？

明确检查每个属性字段？有没有更流畅的方法？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-02-11T07:33:16.933

不，你不能这样做。正如您所说，以前曾提出过[类似](https://stackoverflow.com/questions/333829)的问题-我认为答案很清楚，您无法做到。

您*可以* [为 struct 创建私有无参数构造函数](http://codeblog.jonskeet.uk/2008/12/10/value-types-and-parameterless-constructors)，但不能在 C# 中。然而，即使你这样做了，它并没有真正的帮助 - 因为你可以轻松地解决它：

```
MyStruct[] tmp = new MyStruct[1];
MyStruct gotcha = tmp[0]; 
```

这将是 MyStruct 的默认值——“全零”值——无需调用构造函数。

诚然，您可以轻松地将 Validate 方法添加到您的结构中，并在每次收到一个作为参数时调用该方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-11T03:47:53.777

不，无法隐藏。结构不能重新定义零参数构造函数，因此不能重新定义它的可见性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-11T03:47:34.217

一个结构实际上是一个关于内存将如何放置的声明。

即使你使用一个对象，对象指针也会被声明，不管它是否为空。

不能隐藏构造函数的原因是该结构要求 CLR 可以在内部创建它，因为它必须这样做。

您可以将此结构转换为对象以完成此任务。还是使用静态分析来确保在使用之前对其进行初始化？

```
struct point
{
   int xpos;
   int ypos;
} 
```

有一个不可变对象的谷歌，这似乎是你所追求的。我相信他们正在寻求将此功能（但不是在 C# 4 中）添加到语言本身，因为这是一个常见的要求。这里有特定的结构需要吗？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-11T05:42:52.083

您不能使用私有无参数构造函数创建结构，甚至不能声明无参数构造函数。您必须将其更改为课程。不允许结构声明无参数构造函数。

来自MSDN 上的[Structs 教程：](http://msdn.microsoft.com/en-us/library/aa288471(VS.71).aspx)

结构可以声明构造函数，但它们必须带参数。为结构声明默认（无参数）构造函数是错误的。结构成员不能有初始化器。始终提供默认构造函数来将结构成员初始化为其默认值。

从MSDN 上的[C# 规范：](http://msdn.microsoft.com/en-us/library/aa664471(VS.71).aspx)

**11.3 类和结构的区别**

结构在几个重要方面与类不同：

*   结构是值类型（第 11.3.1 节）。
*   所有结构类型都隐式继承自 System.ValueType 类（第 11.3.2 节）。对结构类型变量的赋值会创建一个被赋值的值的副本（第 11.3.3 节）。
*   结构的默认值是通过将所有值类型字段设置为其默认值并将所有引用类型字段设置为空而产生的值（第 11.3.4 节）。装箱和拆箱操作用于在结构类型和对象之间进行转换（第 11.3.5 节）。
*   这对结构的含义是不同的（第 11.3.6 节）。
*   结构的实例字段声明不允许包含变量初始值设定项（第 11.3.7 节）。
*   **不允许结构声明无参数实例构造函数（第 11.3.8 节）。**
*   不允许结构声明析构函数（第 11.3.9 节）。

# python - 在 python 中使用线程练习

> ID：535331
> 
> 赞同：2
> 
> 时间：2009-02-11T03:42:33.977
> 
> 标签：python, multithreading, image-manipulation

我知道 Python 有一个[全局锁](http://docs.python.org/c-api/init.html#thread-state-and-the-global-interpreter-lock)，并且我已经阅读了 Glyph 对[python multithreading](https://stackoverflow.com/questions/203912/does-python-support-multiprocessor-multicore-programming/204150#204150)的解释。但我还是想试试看。作为一项简单（概念上）的任务，我决定做的是对图片进行水平和垂直边缘检测。

这是正在发生的事情（伪代码）：

```
for pixels in picture:
    apply sobel operator horizontal
for pixels in picture:
    apply sobel operator vertical 
```

[关于 sobel 运算符](http://en.wikipedia.org/wiki/Sobel_operator)的信息。

这两个循环可以完全独立运行，因此是多线程的主要候选者。（在任何非常大的图片上运行这两个循环可能需要 10 多秒）。但是，当我尝试`threading`在 python 中使用该模块时，由于全局锁，它需要两倍的时间。我的问题是我是否应该放弃在 python 的两个线程中执行此操作并尝试使用另一种语言的所有希望？如果我可以继续前进，我应该使用什么模块？如果不是，我应该尝试什么语言？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-11T04:10:34.207

Python 2.6 现在包括[**mulitprocessing**](http://docs.python.org/library/multiprocessing.html)模块（以前是旧版本 Python 上的[**处理模块）。**](http://pyprocessing.berlios.de/doc/index.html)

**它与线程**模块具有基本相同的接口，但将执行启动到单独的进程而不是线程中。与线程模块方法相比，这使 Python 可以利用多个内核/CPU，并且可以很好地扩展 CPU 密集型任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-11T03:50:21.260

如果 sobel 运算符受 CPU 限制，那么您将不会从多线程中获得任何好处，因为 python 没有利用多核。

可以想象，您可以拆分多个进程，但我不确定这对于处理单个图像是否实用。

10 秒似乎不会浪费太多时间。如果您因为要处理许多图像而担心时间，那么运行多个进程并让每个进程处理图像的单独子集可能会更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-11T07:50:58.187

我也推荐使用 NumPy。它不仅可能会更快，而且如果你使用线程，就不会有全局锁。

我还建议按照 Jay 的建议使用多处理。

无论如何，如果你真的想练习线程，我建议在 C 中使用 PThreads。PThreads 在基本情况下使用起来非常简单，并且可以在所有地方使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T04:24:28.120

像 Sobel 算子这样的大容量矩阵运算肯定会通过（正确）使用[Matlab/Octave](http://www.mathworks.com/company/newsletters/news_notes/clevescorner/winter2000.cleve.html)实现显着的速度提升。[NumPy](http://www.scipy.org/NumPy_for_Matlab_Users)可能会为矩阵/数组操作提供类似的加速。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-13T13:18:03.107

Python mutliprocessing is the right choice if you want to practice parallel programming with Python. If you don't have Python 2.6 (which you don't if you're using Ubuntu for example), you can use the [Google code backported](http://code.google.com/p/python-multiprocessing/) version of multiprocessing. It is part of PyPI, which means you can easily install it using EasyInstall (which is part of the python-setuptools package in Ubuntu).

# c# - 新的 Web 服务主机 0.0.0.0？

> ID：535333
> 
> 赞同：1
> 
> 时间：2009-02-11T03:43:39.153
> 
> 标签：c#, asp.net, web-services, host

谁能告诉我为什么当我在 asp.net 项目中创建一个新的 Web 服务时它会告诉我主机是 0.0.0.0？这也不允许我测试 web 服务，因为它来自与主机不同的 IP（显然不是 0.0.0.0）。这到底是怎么回事？我配置错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T03:49:38.297

这是您自己的网络服务吗？

Web 服务的位置在代码中。在您的服务类上方，您应该看到类似这样的内容

[WebService(Namespace = " [http://yourserver:yourport/](http://yourserver:yourport/) ")]

确保它指向正确的位置 - 假设您的服务已部署到服务器。

无论哪种方式，在客户端项目中，将您的 Web 引用指向正确的位置并刷新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T04:21:59.797

通常，0.0.0.0 表示它绑定到主机上的所有 IP 地址。我不确定为什么这会导致问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-02T07:52:27.543

我以前见过这种情况：一个 ASP.NET Web 服务，只要使用 ASP.NET Web 表单、SOAPUI 或任何客户端调用方法，它就会重定向到 0.0.0.0。

我建议您尝试重新安装 asp.net（在命令提示符下，使用 aspnet_regiis -u 卸载，并使用 aspnet_regiis -i 重新安装）和/或重新启动机器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-24T14:52:59.310

终于找到了答案（至少对我来说 - 64bit Vista）。编辑主机并注释掉 ::1 localhost 行

IE

```
#::1 本地主机

```

然后重新启动。

# javascript - HTML / CSS自动编号标题？

> ID：535334
> 
> 赞同：16
> 
> 时间：2009-02-11T03:45:03.113
> 
> 标签：javascript, html, css

有没有办法（理想情况下很容易）在 HTML/CSS 中使标题和部分自动编号？也许是一个 JS 库？

或者这是在 HTML 中很难做到的事情？

我正在寻找企业 wiki 的应用程序，但我们希望能够像在文字处理器中一样使用标题编号。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-02-11T04:06:12.347

绝对可以使用 css 计数器 - 只要确保您注意浏览器兼容性......：

这将使 h2 得到 1.、2.、h3 得到 1.1、2.1、2.2 等...

```
<style>
   body{counter-reset: section}
   h2{counter-reset: sub-section}
   h3{counter-reset: composite}
   h4{counter-reset: detail}

   h2:before{
     counter-increment: section;
     content: counter(section) " ";
   }
   h3:before{
     counter-increment: sub-section;
     content: counter(section) "." counter(sub-section) " ";
   }
   h4:before{
     counter-increment: composite;
     content: counter(section) "." counter(sub-section) "." counter(composite) " ";
   }
   h5:before{
     counter-increment: detail;
     content: counter(section) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";
   }
   </style> 
```

正如 lpfavreau 所说，这与我相信[的另一个问题相同。](https://stackoverflow.com/questions/349060/report-section-style-list-numbering-in-css)

另请注意，使用 css*不会*更改标题（例如，所选文本将为您提供不带数字的标题）。这可能是可取的，也可能不是可取的。lpfavreau 的（已接受）答案将为您提供用于修改标题文本的 jquery 代码。

有关详细信息，请参阅[MDN：使用 CSS 计数器](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Lists_and_Counters/Using_CSS_counters)。

## 第三方编辑

我[用上面的css创建了一个例子](http://plnkr.co/edit/iBNtm5g3tOzvG0CFQhKR?p=preview)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-11T04:05:20.380

2016 年更新。请参阅下面[斯蒂芬的回答](https://stackoverflow.com/a/535390/35935)，了解 CSS 中的正确方法。当浏览器和库不同时，我的回答在 2009 年是有意义的。我们现在生活在一个全新的世界中，这里介绍的方法已经过时了。我要把它留给那些仍然生活在由 IE7 和眼泪组成的企业缩影中的可怜人。

* * *

如果您想知道如何在 CSS 中执行此操作，请参阅[另一个问题，答案可能就是您正在寻找的。](https://stackoverflow.com/questions/349060/report-section-style-list-numbering-in-css)但是标题也有一个很好的建议，这取决于您的 HTML 文档是如何制作的。

应该注意的是，正如 Triptych 在另一条评论中所说，这只有在您可以控制使用哪些浏览器并且使用 CSS 的内部工具时才有意义，因为例如修改 HTML 会很困难。对此 CSS 功能的支持是有限的。

当然，使用[jQuery](http://jquery.com/)之类的东西来进行增量也很容易。像这个未经测试的片段：

```
$(document).ready(function() {
  $('h1').each(function(index) {
    $(this).html((index + 1) + '. ' + $(this).html());
  });
}); 
```

当然，不要忘记在您的文档中包含 jquery.js 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-11T04:03:09.420

最简单的方法是编号列表

```
<ol>
<li> Section
    <ol>
      <li>Nested one</li>
      <li>Nested two</li>
    </ol>
</li>
<li>Section</li>
<li>Section</li>
<li>Section</li>
<ol> 
```

将是这样的：

1.  第
    I. 嵌套一个
    II. 嵌套两个

2.  部分
3.  部分
4.  部分

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T03:49:02.823

可以在服务器端或使用 JavaScript 完成。不知道有任何预制脚本可以做到这一点。

至少不可能使用 HTML/CSS - 除非您手动将所有数字添加到标题中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T04:02:08.907

可以使用 HTML 本身使用有序列表实现自动编号，并在必要时嵌套它们。下面是一个活生生的例子的链接，这个例子是我在谷歌上快速搜索后找到的。

[http://archive.corewebprogramming.com/Chapter2/Nested-Ordered-Lists.html](http://archive.corewebprogramming.com/Chapter2/Nested-Ordered-Lists.html)

也可以使用无序列表和 CSS，如下例所示：

[http://print.wordpress.com/2006/02/22/css-beautifully-numbered-lists/](http://print.wordpress.com/2006/02/22/css-beautifully-numbered-lists/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-11T04:10:23.537

列表可以做到这一点，为什么不是其他元素？[http://www.w3.org/TR/CSS2/generate.html#scope](http://www.w3.org/TR/CSS2/generate.html#scope)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-11T04:44:56.667

```
<ol>
  <li>Heading 1</li>
  <li>Heading 2</li>
  <li>Heading 3</li>
</ol> 
```

# php - 在 PHP 中使用正则表达式找出子域

> ID：535336
> 
> 赞同：3
> 
> 时间：2009-02-11T03:45:54.720
> 
> 标签：php, regex, pcre

抱歉，如果这不是一个适合作为堆栈溢出问题的挑战，但我对正则表达式有点陌生。

我的问题是，对于下面的所有示例，返回字符串“token”的正则表达式是什么？

*   token.domain.com
*   token.domain.com/
*   token.domain.com/index.php
*   token.domain.com/folder/index.php
*   token.domain.com/文件夹/子文件夹
*   token.domain.com/folder/subfolder/index.php
*   **（编辑后添加）**
*   域名.com
*   domain.com/

我试图在 preg_replace 函数中使用，以便从 $_SERVER['SERVER_NAME'] 变量中找出当前页面的子域。

提前谢谢你，标题

**编辑说明：**抱歉，混乱和 sebnow ，我编辑了我的问题，我最初的意思是，但忘了写，这将在没有任何子域的情况下工作 - 在这种情况下它会返回一个空刺或 NULL

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-11T04:12:13.593

```
preg_replace('/^(?:([^\.]+)\.)?domain\.com$/', '\1', $_SERVER['SERVER_NAME']) 
```

**编辑：**以下输出对您有什么作用：

```
<?php
    echo preg_replace('/^(?:([^\.]+)\.)?domain\.com$/', '\1', "sean.domain.com") . "<br />";
    echo preg_replace('/^(?:([^\.]+)\.)?domain\.com$/', '\1', "titel.domain.com") . "<br />";
    echo preg_replace('/^(?:([^\.]+)\.)?domain\.com$/', '\1', "domain.com") . "<br />";
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-11T04:05:19.773

以下正则表达式将捕获句号（子域）和域的其余部分之前的任何字符串：

```
^([^.]+)\..*$ 
```

不过，我认为不需要正则表达式来执行此操作。用句号分割并获得第一个元素会容易得多：

```
list($subdomain, $rest) = explode('.', $_SERVER['SERVER_NAME'], 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T03:51:46.547

如果你想使用 preg_replace()，那么：

```
preg_replace('/\..*/', '', $_SERVER['SERVER_NAME']) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-08T16:41:06.030

```
preg_match('@^([a-zA-Z0-9]*\.)?([a-zA-Z0-9]+)\.([a-zA-Z]{2,4})$@',$_SERVER["HTTP_HOST"], $matches); 
```

# c# - 如何避免 Windows Workflow (WF) 中的 Name-itis？

> ID：535339
> 
> 赞同：1
> 
> 时间：2009-02-11T03:46:37.743
> 
> 标签：c#, .net, workflow-foundation

我刚开始与 WF 合作，我发现真正烦人的是你必须说出很多东西。IMO，程序员每天处理的最困难的事情之一就是为事物构造好名字，而 WF 似乎将这一点发挥到了极致。

以 WF IfElse 活动为例。如果我用原始 C# 编码（不使用 WF），它看起来像这样：

```
if( x == 0 )
{
    // ...
}
else if( x < 10 )
{
    // ...
}
else if( x < 100 )
{
    // ...
}
else
{
    // ...
} 
```

现在上面的 C# 代码简单明了。相反，如果我要定义一个使用 IfElse 活动执行相同操作的 Windows 工作流，首先**我必须命名每个 if 块**：例如

*   ifXEquals0
*   ifXLessThan10
*   ifXLessThan100

最重要的是，我必须在每个 if 语句中**命名每个条件：例如**

*   x等于0
*   x小于10
*   x小于100

这不仅乏味，而且难以维护（例如，如果条件改变）并且容易出错（当条件改变时您忘记更改名称）。

问题（据我所知）是 WF 将每个编程构造分解为需要名称的工作流属性。

现在，由于我仍在学习 WF，而且我不想听起来像是什么都知道……我想问你们。难道我做错了什么？在创建 WF 工作流程时，有没有办法避免这种名称问题？这是 Windows WF 特有的问题，还是其他工作流引擎也有同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T14:02:29.120

> 问题（据我所知）是 WF 将每个编程构造分解为需要名称的工作流属性。

实际上，您需要使用不同名称的原因是因为在您的工作流中表示的 if-else 语句的每个部分实际上都是一个单独的 IfElseBranchActivity，而不仅仅是工作流的一个属性，因此必须唯一命名。

就维护而言，看看使用规则集来帮助自己进行实际的布尔测试。这可能会使以后更容易修改。

# jquery - 跨浏览器的 jQuery DOM 操作

> ID：535344
> 
> 赞同：0
> 
> 时间：2009-02-11T03:48:27.443
> 
> 标签：jquery, html, debugging

我正在使用这个 jQuery 片段

```
$("a").html("<img> alt='example' src='example.jpg> </img>") 
```

`img`在标签内动态添加`a`标签。（注意， src='example,jpg 没有单引号）。

在Firefox中，`img`标签出现了，但在IE和opera`img`中没有出现标签，所以我花了2个小时试图找出原因？然后终于发现了“关闭单引号问题”。

是否有任何工具可以防止此类错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T03:57:34.923

我认为你的一些片段被吃掉了，否则它不会做任何事情。考虑到这是动态代码，唯一能够发现此类错误的工具将是一些支持 javascript 的验证器。

避免此错误的一种方法是使用 jQuery 设置 src 属性：

```
var img = $("<img>");
img.src = "example.jpg";
$("a").append(img); 
```

这样，您的文本编辑器可能会发现不匹配的情况，否则在评估 JS 时会出现错误。

# windows - 如何让分叉管道在 Windows 上的 Perl 中工作？

> ID：535353
> 
> 赞同：5
> 
> 时间：2009-02-11T03:54:36.443
> 
> 标签：windows, perl, fork, pipe

我正在尝试将 Perl 脚本从 Unix 移植到 Windows，但由于 open 函数中不支持分叉管道，我几乎不可能有时间让它工作。这是代码：

```
sub p4_get_file_content {
    my $filespec = shift;
    return 'Content placeholder!' if ($options{'dry-run'});
    debug("p4_get_file_content: $filespec\n");
    local *P4_OUTPUT;
    local $/ = undef;
    my $pid = open(P4_OUTPUT, "-|");
    die "Fork failed: $!" unless defined $pid;
    if ($pid == 0) { # child
        my $p4 = p4_init();
        my $result = undef;
        $result = $p4->Run('print', $filespec);
        die $p4->Errors() if $p4->ErrorCount();
        if (ref $result eq 'ARRAY') {
            for (my $i = 1; $i < @$result; $i++) {
                print $result->[$i];
            }
        }
        $p4->Disconnect();
        exit 0;
    }
    my $content = <P4_OUTPUT>;
    close(P4_OUTPUT) or die "Close failed: ($?) $!";
    return $content;
} 
```

错误是：

```
'-' is not recognized as an internal or external command,
operable program or batch file. 
```

有谁知道如何使这项工作？谢谢！

麦克风

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-11T04:03:21.040

我知道这不是您问题的直接答案，但看起来您是在 Perl 的 Perforce 之上编写一些脚本？如果是这样，您可能会发现现有的库已经可以满足您的需求，并且可以省去很多麻烦，或者至少给您一些示例代码可以使用。

例如：

*   [**P4Perl**](http://public.perforce.com/guest/tony_smith/perforce/API/Perl/index.html)
*   [**P4::服务器**](http://search.cpan.org/~srvance/P4-Server-0.11.1/lib/P4/Server.pm)
*   [**P4::C4**](http://search.cpan.org/~wsnyder/P4-C4-2.041/lib/P4/C4.pm)

**编辑**：现在我知道你在做什么我猜你正在尝试将 p42svn 移植到 Windows，或者至少让它与 Windows 兼容。有关此确切问题的讨论，请参阅[**此线程**](http://p42svn.tigris.org/ds/viewMessage.do?dsForumId=4900&dsMessageId=40586)。建议（未经测试）是尝试使用**[http://perldoc.perl.org/perlfork.html](http://perldoc.perl.org/perlfork.html)**中“ *Forking pipe open() not yet implemented* ”下列出的代码示例来显式创建管道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T04:03:47.467

它不会按原样工作。你需要找到另一种方法来完成它正在做的事情。看起来不需要叉管，但很难说，因为我不知道 p4 是什么，而且你的很多代码都被尖括号解释丢失了。

# excel - 在 Excel 2003 中键入时实现搜索

> ID：535355
> 
> 赞同：0
> 
> 时间：2009-02-11T03:54:58.160
> 
> 标签：excel

我有一个包含数千条记录的 Excel 工作表。当您在 Excel 上键入应用程序时，我会找到/实现搜索。是否有任何 Excel 插件可以做到这一点？还是我需要使用 VB 来编写代码。如果是这样，我该怎么做？谢谢。

例如，当用户在文本框中输入搜索词时，我想突出显示并跳转到第一个匹配的单元格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-01-27T06:46:48.810

使用 VBA 和表单非常简单...

在常规模块中输入以下内容：

```
Public Sub FindAsYouType()

    UserForm1.Show (False)

End Sub 
```

并在您的代码中使用类似以下内容：

```
Private Sub txtFind_Change()
    Dim strFind As String
    Dim wks As Worksheet
    Dim varFound As Variant
    Set wks = ActiveWorkbook.ActiveSheet
    Set varFound = wks.UsedRange.Find(Me.txtFind, , , , , , True)
    If Not varFound Is Nothing Then varFound.Select
End Sub

Private Sub txtFind_KeyDown(ByVal KeyCode As MSForms.ReturnInteger, ByVal Shift As Integer)
    If KeyCode = vbKeyReturn Then Unload Me
End Sub 
```

我希望这对其他人有帮助！:-)

# c# - 是否有 .NET 文化相关的“今天”字符串？

> ID：535360
> 
> 赞同：0
> 
> 时间：2009-02-11T03:57:11.633
> 
> 标签：c#, .net, datetime, monthcalendar

我正在编写一个月历样式的控件，并且需要显示一个指示今天日期的字符串。所以在英语文化机器上它会显示`'Today : 11/02/2009'`.

如果碰巧使用了不同的文化，例如法语，那么我想用法语单词来表示“今天”。

.NET 平台是否将此词作为文化信息的一部分公开，以便我可以自动检索它？我找不到任何暴露的东西，但也许我没有找对地方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T05:27:27.050

老..但仍然有用（几岁？VB6旧）。

基本上，Windows 在 Comctl32.dll 中保留了“Today”的本地化版本。您可以使用 aa loadstringex 调用来找出它：

```
Private Const IDM_TODAY As Long = 4163
Private Const IDM_GOTODAY As Long = 4164

Public Function GetTodayLocalized(ByVal LocaleId As Long) As String
    Static hComCtl32 As Long
    Static hComCtl32Initialized As Boolean
    Static hComCtl32MustBeFreed As Boolean

    Dim s As String

    If Not hComCtl32Initialized Then
        hComCtl32 = GetModuleHandle("Comctl32.dll")
        If hComCtl32 <> 0 Then
            hComCtl32MustBeFreed = False
            hComCtl32Initialized = True
        Else
            hComCtl32 = LoadLibrary("Comctl32.Dll")
            If Not hComCtl32 = 0 Then
                hComCtl32MustBeFreed = True
                hComCtl32Initialized = True
            End If
        End If
    End If

    If hComCtl32Initialized = False Then
        s = "Today"
    Else
        s = LoadStringEx(hComCtl32, IDM_TODAY, LocaleId)
        If s = "" Then
            s = "Today"
        End If
    End If

    If hComCtl32MustBeFreed Then
        FreeLibrary hComCtl32
        hComCtl32MustBeFreed = False
        hComCtl32Initialized = False
        hComCtl32 = 0
    End If

    s = Replace(s, "&", "")
    If Right(s, 1) = ":" Then
        s = Left(s, Len(s) - 1)
    End If

    GetTodayLocalized = s
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-11T04:02:49.920

[这](http://msdn.microsoft.com/en-us/goglobal/bb688124.aspx#e5e)是 .Net 本地化的非常全面的概述。

简而言之，DateTime 结构的方法将根据系统区域设置格式化日期。您可以通过指定自己的语言环境来覆盖默认语言环境。

编辑：对不起，我误读了你的问题。不，没有这样的事情。您可以使用翻译网站来获取您需要支持的“今天”的翻译，并将它们保存在代码中的字典中。但是，经过仔细检查，我根本不建议这样做，因为生成的字符串“Today: xx/xx/xxx”在其他语言中可能会让人感到尴尬。虽然德语版本：“Heute: 11.2.2009”或法语“Aujourd'hui: 11.2.2009”在日历中似乎可以正常工作，但我不能说中文或日文。这说明了当您认为本地化只是翻译时可能遇到的问题。

# asp.net-ajax - ASP.Net Ajax 性能比较

> ID：535364
> 
> 赞同：0
> 
> 时间：2009-02-11T03:58:47.993
> 
> 标签：asp.net-ajax

是否有任何信息显示这三种在没有完整回发的情况下发送和接收数据的方式之间的性能差异（主要是发送和接收的字节数）：

UpdatePanel
PageMethod
Web Service

通过 Web 服务，我的意思是从 javascript 调用 Web 服务中的方法，类似于调用 PageMethod 的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-11T06:09:50.020

[这篇 MSDN 杂志文章](http://msdn.microsoft.com/en-us/magazine/cc163363.aspx)有很多我认为您正在寻找的答案。

# function - 你会定义什么函数？

> ID：535365
> 
> 赞同：0
> 
> 时间：2009-02-11T03:59:26.823
> 
> 标签：function, terminology

如果你被告知要编写一个例程，你会把它当作编写函数或伪代码还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-11T04:06:32.890

不要吹毛求疵，但有时“功能”和“常规”之间存在语义差异。例如，在 VB 函数中返回值而（子）例程没有。

在问题的上下文中，“例程”一词似乎仅表示一段代码（任何形式，包括伪代码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T04:23:15.517

听起来您遇到的问题不一定是“例程/函数的定义是什么”。也许我误解了一些事情，但真正的问题似乎是你无法从对话的上下文中判断你是被要求编写工作代码（即“函数”）还是一些算法模型（即“伪代码”） ”）。如果是这种情况，您最好的做法可能是要求更清楚地了解您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T04:03:05.927

在编程中，“例程”和“函数”一般是同义词。正如 Ben 所指出的，在某些语言中，返回值的例程和不返回值的例程之间存在语法差异。但在概念上它们基本上是一样的。

# asp.net - Viewstate 仅在 IE 中失败

> ID：535366
> 
> 赞同：3
> 
> 时间：2009-02-11T03:59:38.883
> 
> 标签：asp.net, viewstate

我有一个页面，其中包含一些搜索字段来查询数据库并显示结果。视图状态需要保留下拉列表中的项目列表。

在 Firefox (3) 和 Chrome 中一切正常，但在 Internet Explorer 中失败，但只是有时（某些操作，例如重置表单，实际上只是使用一些查询字符串参数执行 response.redirect）...... Viewstate 被转储到 URL 上，并引发错误页面。

有没有人遇到过这个？也许一些关于什么可能导致在 IE 中发生这种情况的指针？

多谢，

格雷格

**更新：**

在进一步调查中，我确定实际错误是这样的：

“viewstate MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保配置指定相同的 validationKey 和验证算法。不能在集群中使用 AutoGenerate。”

一些可能有帮助的更多信息：这是由托管在内容管理系统 (Umbraco) 中的用户控件引起的，这可能与将视图状态传递给页面的原因有关（因为控件包含在CMS 中的更大页面）。我将对此进行进一步调查，但任何其他建议将不胜感激。

欢呼格雷格

**更新 2：**

任何人都可以建议为什么这只发生在 IE（而不是 FF 或 Chrome）中？如果其他浏览器可以很好地处理它，这似乎不太可能是控件更改或机器键或我在该地方阅读的其他建议的问题。

**任何想法 IE 的不同之处可能导致此失败？**

**解决方案：**

原来这是一个非常愚蠢的问题——我在 CMS 中使用了错误的主模板，因此有 2 个表单标签。去掉多余的form标签，问题解决！

非常感谢bendewey 帮助我解决了这个问题（请参阅bendewey 帖子中的评论）。

那是我生命中的 4 个小时，我很想回来……但很高兴我现在可以继续前进。再次感谢 Stack Overflow 社区 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T04:19:35.620

您的视图状态发布到 URL 似乎有点奇怪。如果您有一些使用 GET 方法而不是默认的 asp.net 页面级表单标记的自定义表单标记，则会发生这种情况。

如果您需要一个带有 GET 方法的表单标签，我会在 Page 声明中设置 EnableViewState="false" 并设置某种列表缓存。这是一个示例，但您可以在线找到更好的示例（特别是执行双重检查锁定的示例）。这样，您可以在每次回发时调用它，而不必担心在视图状态中存储任何内容。

```
List<string> getCachedFields()
{
    var searchFields = Cache["searchFields"] as List<string>;
    if (searchFields == null)
    {
        searchFields = GetFieldsFromDbOrSomewhereExpensive();
        Cache["searchFields"] = searchFields;
    }
    return searchFields;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T04:53:18.457

我们已使用此博客的[建议](http://ddkonline.blogspot.com/2008/04/validation-of-viewstate-mac-failed.html)解决了此问题。请看一下...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-06T11:57:00.047

我必须`EnableViewStateMac="false"`从`<pages>`元素中删除以避免 IE 中的错误。

# apache-flex - 用 Flexbuilder 维护一个用 Flash 设计的 Web 应用程序是否可行

> ID：535373
> 
> 赞同：2
> 
> 时间：2009-02-11T04:02:32.353
> 
> 标签：apache-flex, flash, flexbuilder, mxml, maintenance

我星期一开始了一份新工作，部分工作描述是维护外包的 Flash 网页，这些网页只包含丰富的 UI 表单和很少的动画。我对 Flash 或 Flex 没有任何经验，但作为一名程序员，Flex IDE 似乎更适合我，这让我想到了我的问题：

**我可以在 Flexbuilder IDE 中维护用 Flash 开发的 Web 应用程序吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T08:57:32.690

所以首先 Flexbuilder IDE 基于 Eclipse IDE...您可以下载实际的 Flex Builder IDE 或安装适用于 Eclipse 的 Flex 插件。它们几乎相同，除了使用 eclipse 可以将它用于大量其他类型的开发项目（即 java）。

那么，您真正要问的是“我可以使用 Eclipse IDE 维护在 Flash 中开发的 Web 应用程序吗？”

答案是肯定的和否定的。当然你可以使用eclipse来维护代码和类库。我建议您查看 Eclipse 的[FDT 插件](http://fdt.powerflasher.com/)（支持 AS2 和 3）。或者，只要您尝试维护的项目是 Actionscript 3，您仍然可以使用 flex builder 插件并创建一个纯 Actionscript 3。

我说是和否的原因是，如果你有一个 Flash 项目，那么很有可能（但不能保证）你将拥有包含动画、资产甚至​​代码的 FLA 文件。如果是这种情况，那么您不能使用 Eclipse 来管理这些文件。

基本上......如果有类，那么我会使用 eclipse 和某种形式的插件来维护这些，而 fla 不幸的是它是适合你的 Flash IDE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T16:39:04.393

是的你可以。flex builder 对此非常有效。一般来说，如果你没有做很多设计工作，你应该坚持使用 flex builder。

# xml - 如何处理 xslt 脚本代码示例？

> ID：535383
> 
> 赞同：0
> 
> 时间：2009-02-11T04:03:56.453
> 
> 标签：xml, xslt, xerces

我在使用记事本、UltraEdit 或发布到网络的帮助文本创建的 XSLT 脚本中遇到致命错误[http://www.w3.org/2006/xqt-errors#XPTY0004 。](http://www.w3.org/2006/xqt-errors#XPTY0004)这些工具没有显示任何奇怪的字符，但是除非我手动编辑输入，否则脚本会中断，因此它们都在一行上（通常需要重新创建每个空白字符）。剪切'n'粘贴代码示例很乏味。(XERCES?) 解析器是否解释了这些工具中未显示的一些非法字符？

我尝试添加`<?xml version="1.0" encoding="UTF-8"?>`为脚本的第一行，但这没有帮助。任何可以解释为什么 XML 解析器无法通过[http://www.w3.org/2005/xqt-errors#XPTY0004](http://www.w3.org/2005/xqt-errors#XPTY0004)的人（尝试链接）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-11T07:31:11.853

您可以在那些不被渲染的工具中获得的唯一可能的字符是 CR，因为您正在 Windows 上工作。尝试使用允许您只使用没有 CR 的新行的文本编辑器（Jedit 就是一个示例）

# php - PHP 中的完全面向对象的框架

> ID：535385
> 
> 赞同：17
> 
> 时间：2009-02-11T04:04:54.797
> 
> 标签：php, frameworks, oop

我想在 PHP 中创建一个 100% 面向对象的框架，完全没有过程编程，并且一切都是对象。很像 Java，只是它将在 PHP 中完成。

关于这个东西应该有什么特性的任何指针，它是否应该使用任何现有的设计模式，比如 MVC？如何为数据库中的每个表创建对象，以及如何显示 HTML 模板等？

请不要链接到现有框架，因为我想自己做这件事，主要是作为学习练习。您**将**因为链接到现有框架作为您的答案并说“这就是您想要的”而被否决。

我想要的一些功能是：

*   非常简单的 CRUD 页面生成
*   基于 AJAX 的分页
*   如果可能的话，基于 Ajax 的表单验证，或者非常简单的表单验证
*   可排序表
*   能够使用 PHP 编辑 HTML 模板

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-02-24T21:53:30.803

我已经经历了你列表中的许多问题，所以让我来看看我是如何处理它的。我也是 OOP 上瘾者，并且发现对象技术非常灵活、强大且优雅（如果做得正确的话）。

**MVC** - 是的，毫无疑问，MVC 是 Web 应用程序的标准。这是一个有据可查且易于理解的模型。此外，它在应用程序级别上的作用与 OOP 在类级别上的作用相同，也就是说，它使事物分离。MVC 的一个很好的补充是[拦截过滤器](http://java.sun.com/blueprints/corej2eepatterns/Patterns/InterceptingFilter.html)模式。它有助于为预处理和后处理请求和响应附加过滤器。常见用途是记录请求、基准测试、访问检查、缓存等。

**数据库表/行的OOP 表示**也是可能的。我每天都使用[DAO](http://java.sun.com/blueprints/corej2eepatterns/Patterns/DataAccessObject.html)或[ActiveRecord 。](http://martinfowler.com/eaaCatalog/activeRecord.html)ORM 问题的另一种方法是[Row Data Gateway](http://martinfowler.com/eaaCatalog/rowDataGateway.html)和[Table Data Gateway](http://martinfowler.com/eaaCatalog/tableDataGateway.html)。这是 TDG 利用接口的[示例实现。](https://tigermouse.svn.sourceforge.net/svnroot/tigermouse/lib/model/table-gateway/TableGateway.class.php)`ArrayAccess`

**HTML 模板**也可以表示为对象。我将 View 对象与 Smarty 模板引擎结合使用。我发现这种技术非常灵活、快速且易于使用。表示视图的对象应该实现`__set`方法，以便每个属性都传播到 Smarty 模板中。此外`__toString`，应实现方法以支持视图嵌套。参见示例：

```
$s = new View();
$s->template = 'view/status-bar.tpl';
$s->username = "John Doe";
$page = new View();
$page->template = 'view/page.tpl';
$page->statusBar = $s;
echo $page; 
```

内容`view/status-bar.tpl`：

```
<div id="status-bar"> Hello {$username} </div> 
```

内容`view/page.tpl`：

```
<html>
<head>....</head>
<body>
    <ul id="main-menu">.....</ul>
    {$statusBar}
    ... rest of the page ...
</body>
</html> 
```

这样你只需要`echo $page`和内部视图（状态栏）就会自动转换成HTML。在这里查看[完整的实现](https://tigermouse.svn.sourceforge.net/svnroot/tigermouse/view/core-views/View.class.php)。顺便说一句，使用拦截过滤器之一，您可以使用 HTML 页脚和页眉包装返回的视图，因此您不必担心从控制器返回完整页面。

是否使用 Ajax 的问题在设计时应该不重要。该框架应该足够灵活以支持 Ajax。

**表单验证**绝对是可以以 OO 方式完成的事情。[使用复合模式](http://www.dofactory.com/Patterns/PatternComposite.aspx)构建复杂的验证器对象。复合验证器应该遍历表单字段并分配简单的验证器并给你是/否的答案。它还应该返回错误消息，以便您可以更新表单（通过 Ajax 或页面重新加载）。

另一个方便的元素是自动翻译类，用于更改数据库中的数据以适合用户界面。例如，如果您在 db 中有 INT(1) 字段表示布尔状态，并在 HTML 中使用导致空字符串或`"on"`_POST 或 _GET 数组的复选框，则您不能只将一个分配给另一个。拥有将数据更改为适用于 View 或 db 的翻译服务是一种清理数据的干净方式。此外，即使在非常复杂的转换过程中（例如[将 Wiki 语法](https://tigermouse.svn.sourceforge.net/svnroot/tigermouse/lib/translation/)转换为 HTML），翻译类的复杂性也不会乱扔您的控制器代码。

也可以使用面向对象的技术来解决**i18n问题。**我喜欢使用`__`函数（双下划线）来获取本地化消息。该函数不是执行查找并返回消息，而是为我提供了一个[代理](http://en.wikipedia.org/wiki/Proxy_pattern)对象并预先注册消息以供以后查找。一旦 Proxy 对象被推入 View 并且 View 被转换为 HTML，i18n 后端会查找所有预先注册的消息。这样，只运行一个查询来返回所有请求的消息。

**访问控制**问题可以使用业务委托模式来解决。我在我的[另一个 Stackoverflow 答案](https://stackoverflow.com/questions/228672/php-access-control-system/325805#325805)中描述了它。

最后，如果您想使用完全面向对象的现有代码，请查看[Tigermouse 框架](http://tigermouse.epsi.pl/)。页面上有一些 UML 图，可以帮助您了解事物的工作原理。请随时接管这个项目的进一步开发，因为我没有更多的时间来处理它。

有一个很好的黑客！

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-02-11T05:02:08.780

现在有被否决的风险，同时作为一个正在开发自己的框架的人，我觉得有必要告诉你至少要获得一些使用现有框架的经验。不一定要有大量经验，也许可以为每个流行的教程做一些初学者教程。

考虑到构建一个好的框架需要花费大量时间，相比之下，花时间研究你喜欢和厌恶现有解决方案的地方将显得苍白无力。您甚至不需要只看 php 框架。Rails、Django 等都很受欢迎是有原因的。

建立一个框架是有回报的，但你需要一个清晰的计划和对手头任务的理解，这就是研究的用武之地。

您的问题的一些答案：

*   是的，它可能应该使用 MVC，因为模型视图控制器范式可以很好地转化为 Web 应用程序的世界。
*   要从数据库表中的记录创建模型，请查看 ORM 和 Active Record 模式。我所知道的现有研究实现包括 Doctrine，更多可以通过在此处搜索找到。
*   对于任何与 AJAX 相关的内容，我建议使用 jQuery 作为起点，因为它使 AJAX 非常容易启动和运行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-11T05:33:51.370

创建自己的框架是一种很好的方式来了解可能在其他框架的底层发生的一些事情。如果你像我一样是一个完美主义者，这给了你一个很好的借口来为每一个小细节苦恼（例如，该对象应该被称为 X 还是 Y，我应该为此使用静态方法还是实例方法）。

我写了自己的（前一段时间几乎完全是 OO 框架），所以这是我的建议：

*   如果您以前使用过其他框架，请考虑您喜欢/不喜欢什么，并确保您的框架能够准确地满足您的需求。
*   我个人喜欢 MVC 模式，没有它我不会做一个项目。如果你喜欢 MVC，就去做吧，如果你不介意的话。
*   如果你想做 JavaScript/AJAX 的东西，请使用 JavaScript 库。从头开始编写你自己的 JavaScript 会教你一些关于 DOM 和 JavaScript 的一般知识，但最终它是在浪费时间，而是专注于让你的应用程序/框架更好。
*   如果您不想大规模采用其他框架，请查看是否有其他您喜欢并且可能想要使用的开源组件，例如[Propel](http://propel.phpdb.org/trac/)、[Smarty](http://www.smarty.net/manual/en/)、[ADOdb](http://phplens.com/adodb/)或[PEAR 组件](http://pear.php.net/)。编写自己的框架并不一定意味着从头开始编写所有内容。
*   在有意义的地方使用设计模式（例如，可能使用单例访问数据库），但不要沉迷于它们。最终做任何你认为产生最整洁代码的事情。
*   最后，通过深入研究一点[Ruby on Rails 哲学](http://en.wikipedia.org/wiki/Ruby_on_Rails#Philosophy_and_design)，我学到了很多东西，你可能永远不会使用 RoR（我没有），但其中一些概念（尤其是约定优于配置）确实引起了我的共鸣，并真正影响了我的想法。

最终，除非您的需求很特殊，否则大多数人如果采用现有的框架会更有效率。但是[重新发明轮子确实教会了你更多关于轮子的知识。](http://www.codinghorror.com/blog/archives/001145.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-02-11T04:20:22.280

冒着听起来油嘴滑舌的风险，在我看来，这就像任何其他软件项目一样，从这个意义上说：

您需要清楚地定义您的需求，包括动机和优先级：

*   为什么要这样做？您希望实现的主要好处是什么？如果答案是“速度”，您可能会做一件事；如果答案是“易于编码”，您可能会做另一件事；如果答案是“学习经验”，您可能会做一件事

*   您要解决的主要问题是什么？哪些是最重要的？安全？简单的 UI 生成？可扩展性？

“它应该具有哪些功能”的答案实际上取决于对上述问题的答案。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-02-27T02:12:48.963

以下是我的建议：

1.  停止你正在做的事情。
2.  已经干到死了。
3.  单击这个[Zend Framework](http://framework.zend.com)或那个[CakePHP](http://cakephp.org/)或者甚至这个[Recess Framework](http://www.recessframework.org/)。

现在，我的理由：

> ...如果您曾经与开发人员合作过，那么您就已经与喜欢无缘无故地重新发明轮子的开发人员合作过。这是一种非常非常常见的故障模式。
> 
> ......他们会开始写成百上千种你能想象到的最糟糕的语言......
> 
> ......“哦，我要创建自己的框架，创建我自己的一切，”这一切都会比你出去得到的东西更糟糕......

来自[StackOverflow 播客#3](https://stackoverflow.fogbugz.com/default.asp?W56)。

因此，为自己节省一些时间，并为人们解决一些问题，例如让人们在猫的垃圾箱需要清洁时自动更新 Twitter 的网络应用程序。“面向对象的PHP框架”的问题就解决了。无论您使用什么框架，都不会像**今天**可用的任何免费提供的、完全支持的框架一样可靠、有用或功能丰富。

这并不意味着你不能有学习经验，但为什么要在黑暗中做，创建一个框架会变成无用的代码块，让你没有任何东西可以展示你的时间？开发一个供人们使用和享受的网络应用程序，我认为您会发现这种体验非常有益且具有**教育**意义。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-11T04:10:54.470

我的朋友，我为你准备了完美的链接：http: [//nettuts.com/tutorials/php/creating-a-php5-framework-part-1/](http://nettuts.com/tutorials/php/creating-a-php5-framework-part-1/)。这是我看过的一个很棒的教程，它并不太压倒性。另外看看那个网站的 PHP 部分，我看到了一篇关于 CRUD 的文章。至于 AJAX 看看别处，但你必须从某个地方开始，而且这个教程很棒。

注意：本教程有 3 个部分，我认为它在第二部分中提出了 MVC，但使用其他方法开始第一部分。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-11T06:53:12.443

正如 Jim Ohalloran 所说，编写自己的框架可以让您很好地了解其他框架是如何做事的。

也就是说，在此之前我已经编写了一个数据访问层，几乎完全抽象掉了任何 SQL。应用程序代码可以请求相关对象，抽象层做了很多魔术，只在需要时获取数据，不需要重新获取，仅在更改时保存，并支持将一些对象放在不同的数据库中。它还支持复制数据库，尊重复制滞后，并具有智能收集对象。它也是高度可扩展的：核心是参数驱动的，我可以用大约 15 行代码添加一个全新的对象——并且免费获得所有的魔力。

我还编写了一个 CRUD 布局引擎，该引擎用于相当大比例的网站。核心是参数驱动的，因此一旦您编写了参数列表，它就可以运行列表和编辑任何页面。它利用上面的对象层自动进行分页、保存新删除支持等。它本身并不是面向对象的，但它本来可以做到的。

换句话说，PHP 中的面向对象框架不仅是可能的，而且非常高效。这都是在 PHP 4 中，顺便说一句，我遇到了几次 PHP 4 对象的可能性。:-)

我从来没有到达过调用对象的中央调度，但我并不遥远。不过，我已经使用过几个可以做到这一点的框架，而且文件布局很快就会变得很麻烦。出于这个原因，我会选择一个调度系统，它只需要它的复杂程度就够了。一个简单的动作/视图（无论如何几乎都是 MVC）应该让你走得更远。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-02-23T16:55:36.517

我最初开始创建自己的框架，与您的理念相似。然而，几个月后，我意识到我正在重新创作已经完成了很多次的作品。最后，我找到了一个易于扩展的开源框架，并将其用作我自己开发的基础。

我自己实现的功能：

*   MVC 架构
*   认证对象
*   数据库访问类
*   URL重写配置
*   分页类
*   电子邮件类
*   加密

看了又想的特征，算了！我将建立在其他人之上：

*   缓存类
*   表单验证类
*   FTP类
*   插件能力类

当然，编写一个优于开源选项的框架是可能的，但你为什么要打扰呢？

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-02-27T02:53:35.837

确实有些开发人员无缘无故地重新发明轮子。但是，因为周围已经有很好的框架并不意味着自己做一个是浪费时间。不久前我开始使用它，除了锻炼之外，我并没有打算将它用于任何用途。我强烈建议这样做。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-02-12T01:10:51.710

我在一个新框架中寻找的一个巨大的卖点是它可以让编写*可测试的*代码变得容易。

我们通常使用 Zend 框架，它非常棒，但尝试对基于 ZF 的代码进行单元测试/测试驱动并不缺乏自虐。

如果你能提供一个框架，用允许我们编写可测试代码的东西替换 ZF 的 MVC 部分，同时仍然允许我们使用 ZF 的库部分，我会 - 毫不夸张地说 - 给你买杯啤酒。

如果你放弃 AJAX，我会给你买两瓶啤酒。OO PHP 框架和 JavaScript 框架之间存在巨大的鸿沟。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-02-27T05:00:25.630

> 请不要链接到现有框架

我不会，我出于学习目的开始编写自己的，并查看了一些主流框架，即使我的知识有限，也看到其中有很多错误和坏主意。
它们是由核心开发人员而非最终用户构建的。

我绝不是说我可以比“大男孩”写得更好，但我（我想像你们中的大多数人一样）可以指出为什么他们做的一些事情很糟糕，即使只是因为他们不是最终用户/非开发者友好...

我想知道您的框架在 6 年之后的表现如何？
你还在努力吗？你停了吗？

* * *

## 您是否应该编写自己的框架

这对您来说可能有点晚了，但对于其他任何人来说，编写自己的框架是为了*学习目的而*做的一件很棒的事情。

但是，如果你想写一个不是学习目的的，因为你不能写出你正在使用的那个，或者因为它太臃肿，那么不要！
相信我，不要受到侮辱，如果您是一个知识渊博的开发人员，能够成功地做到这一点，您就不会在这里考虑它！

去年我想学习 OOP/类，以及更高级的 PHP。
编写自己的框架是我做过的最好的事情（实际上我还在做），因为我学到的东西比我预期的要多得多。

一路走来，我学到了（仅举几例）：

*   [OOP/Classes](http://php.net/manual/en/language.oop5.php)附带的许多最佳实践——例如依赖注入、SRP
*   设计模式，它可以帮助您编写代码和构建系统，使许多事情变得合乎逻辑和简单。有关示例，请参见[Wiki - SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)
*   [命名空间](http://php.net/manual/en/language.namespaces.php)
*   [PHP 错误处理](http://php.net/manual/en/book.errorfunc.php)和提供的所有功能
*   [对MVC](https://stackoverflow.com/search?q=[php]%20mvc)的更强大（和更好）的理解，以及如何适当地应用它（因为没有明确的使用方法，只有指南和最佳实践）。
*   [自动加载](http://php.net/manual/en/language.oop5.autoload.php)（面向 OOP 的类）
*   更好的代码编写风格和更结构化的布局，以及更好的评论技巧
*   [命名约定](https://softwareengineering.stackexchange.com/questions/196416/whats-the-dominant-naming-convention-for-variables-in-php-camelcase-or-undersc)（即使基于常见做法，自己制作也很有趣）。

还有许多其他基本的 PHP 东西，你总是在阅读某些东西时偶然遇到。

所有这些不仅极大地提高了我对 PHP 及其附带的东西的掌握，达到了更高级的水平，而且还提高了一些商业/广泛使用的方法和原则。
这一切都增强了我对使用 PHP 的信心，这反过来又使它更容易学习。

* * *

## 为什么要编写一个框架来学习所有这些

刚开始时，您会学习基础知识 - A（变量），然后是 B（如何编写基本函数）等。
但是当您尝试学习更高级的东西时，很快就会学习和使用D和E，你还必须学习和理解F、G、H和J，要知道那些你必须知道K、L和M，而要知道L和M的部分你首先需要理解N和哦...

它变成了一个雷区，因为试图学习一件事会带来首先学习其他一些东西的需要，而那些其他的东西往往会带来理解其他各种东西的需要。
最后你离你开始的地方一英里远，你的头脑发麻并从中射出火花，大约 20 个选项卡都打开了各种高级 PHP 东西，没有一个是你 100% 满意的。

但是随着时间的推移，通过练习和最肯定的奉献精神，它会全部到位，你会回顾代码，甚至是文件/类的集合，然后想“我写了那个......”？

**编写框架对解决这个“雷区”有很大帮助，因为：**

*   我有特定的任务要做，这带来了学习和实施其他事情的需要，但具体的事情。这让我可以一次专注于更少的事情，即使有些事情分支到其他各种事情，你也可以把它卷回到你开始的地方，因为你正在做一些特定的事情。您可以通过任何学习来做到这一点，但如果您没有目标或专注于特定任务，您很容易分心并迷失在需要学习的事物中。
*   我有一些实际的工作要做。经常阅读关于动物类的教程，以及猫和狗类如何扩展动物等，可能会令人困惑。当您在*自己的* 框架中有一个现实生活中的任务时，例如我如何管理 XYZ，那么您可以了解类如何更轻松地工作，因为您有反复试验和您理解的可靠需求，因为您创建了需求！不仅仅是理论式的阅读，通常没有任何意义。
*   当我大吃一惊时，我可以放下它，尽管因为它是我的框架（一开始是我的弗兰肯斯坦的怪物：P）我想继续前进，因为它很有趣，并且是学习和分类下一阶段的个人目标，解决我遇到的问题等。

你可以随心所欲。这可能不是最佳实践，但只要您*尝试*学习最佳实践，随着时间的推移，您会有所改进，并且可能比仅仅阅读教程更容易，因为您可以控制自己做什么以及如何做某事。

* * *

## 等等，我不应该重新发明轮子

嗯，首先，你不能重新发明轮子，这是不可能的，因为你只会造一个轮子。

当人们说“不要重新发明轮子”时，他们的意思当然是“已经有框架了”，而且公平地说，它们是由熟练的开发人员编写的。
这并不是说这些框架没有问题或问题，但总的来说，它们非常可靠、安全且编写良好。

但是对于编写自己的框架，该声明是荒谬的！

为学习目的编写自己的框架非常有用。即使您打算将其用于商业用途或用于您自己的网站，您也不仅仅是“重新发明了轮子”，您还做了其他事情。
您的框架不会像其他框架一样，它不会有很多特性和功能，这可能是您的主要优势！

只要您了解最佳安全实践等，因为您可以认为您正在编写一个很棒的系统，它非常快并且没有其他框架所具有的所有*臃肿*，但实际上您在一些人可以爬进的地方存在漏洞...... .

但是一个你不在互联网上使用的学习项目是理想的——或者最终使用它，当你足够先进*知道*它是安全的时！

综上所述，您应该编写自己的框架 IF：

*   你很快就不需要它了！这需要很多时间，因为有很多方面需要考虑、学习，而且反复试验会导致重构（一开始很多！）
*   您愿意阅读、编码、测试、更改、阅读、编码和阅读更多内容。互联网上有很多关于高级 PHP 的好建议，其中大部分一开始都令人震惊，比如阅读所有设计模式。但它们最终是有意义的，最终会帮助你解决你面临的问题，以及如何在你的框架内做事。
*   愿意投入时间，并不断努力改进，并朝着最佳实践迈进，尤其是在安全方面。速度问题不应该是小型框架的问题，此外，如果您有一个相当不错的系统，您通常可以重构并提高速度。通常，如果您遇到严重的速度问题，则意味着您选择了密集操作，通常可以通过不同的方式来解决。

.

如果没有以前的经验或 PHP 的高级知识，您可能会花一些时间编写框架，进一步的阅读和知识会告诉您您的方法有偏差，因此您可能会删除所有内容并重新开始。
不要为此灰心丧气。
我正是这样做的，因为我在第一个月中学到了很多高级模式和做事方式，最终我发现重构并不好，而采用全新方法的空白画布是唯一的选择。

然而，这很令人高兴，因为我看到了一个更好的结构形成，我不仅可以看到一个更好的框架基础开始出现，而且意识到这是因为我对高级 PHP 有了更好的理解。

去做就对了！只需确保在编写一些代码之前就已经制定了想要它做什么的计划。
说真的，在纸上写下你将如何加载错误检查，你会自动加载，还是在需要时包含文件？你打算有一个集中的加载机制，在你需要的时候实例化类，还是其他方法？

无论你做什么，无论你处于什么阶段，如果你要进入新的领域，首先要计划好。当你碰壁时，你会很高兴，可以回到你的计划，并意识到稍微偏离你的*计划*就会解决它。
否则，您最终只会一团糟，并且没有计划或方法来重新设计它以解决您面临的当前问题或要求。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-08-29T09:53:17.600

您正在寻求构建与我工作了几年完全相同的东西，结果就是敏捷工具包。

## 非常简单的 CRUD 页面生成

```
$page->add('CRUD')->setModel('User'); 
```

## 基于 AJAX 的分页

所有分页和许多其他事情都是通过对 AJAX 和对象重载的原生支持来实现的。下面的代码显示了一个带有随机标签的主题按钮。如果单击显示新号码，则重新加载按钮。

```
$b=$page->add('Button')->setLabel(rand(1,50));
$b->js('click')->reload(); 
```

## 如果可能的话，基于 Ajax 的表单验证，或者非常简单的表单验证

所有表单验证都是基于 AJAX 的。来自服务器的响应是一个 JavaScript 链，它指示浏览器突出显示错误消息或重定向到下一页或执行任何其他 JavaScript 操作。

## 可排序表

当您真正可以重新加载对象时，表格排序和分页具有非常直观和简单的实现。

## 能够使用 PHP 编辑 HTML 模板

这似乎不合时宜，而且是错误的做法。模板在 VCS 中更好。

# c# - 如何使用 C# 创建 IM 机器人

> ID：535397
> 
> 赞同：9
> 
> 时间：2009-02-11T04:10:10.073
> 
> 标签：c#, bots, instant-messaging

有没有一种简单的方法可以在多个即时通讯网络（aim、gtalk、yim 等）上创建即时通讯机器人，可以接受和解释发送给它的特定命令以执行服务器相关任务？

比方说，我有一个管理 RSS 提要的网站。我想向 IM 机器人发送命令以向我的收藏添加另一个提要。IM 机器人会将我的屏幕名称与我之前在网站上设置的帐户相关联。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-02-11T05:07:54.647

[我使用XMPP](http://en.wikipedia.org/wiki/Xmpp) (Jabber) 协议为我的公司做了一些内部机器人，我使用了[agsXMPP SDK](http://www.ag-software.de/index.php?page=agsxmpp-sdk)和[Jabber.NET](http://code.google.com/p/jabber-net/)客户端库，我一直在寻找与 YIM、AIM 和 Windows Live Messenger 一起使用的 APIS 但我发现只有 COM 公开的 APIS，.NET 没有...

但是我想到了一个想法，使用 XMPP 协议，您可以使用 IM 网关配置本地服务器，允许用户通过您的服务器使用其他协议访问网络

我用的是eJabberd，你可以安装各种[传输网关](http://www.ejabberd.im/tutorials-transports)来连接其他IM协议（[AIM](http://www.ejabberd.im/pyaimt)、[MSN](http://delx.net.au/projects/pymsnt/docs/user.html)、[ICQ](http://www.ejabberd.im/pyicqt)、[GTalk](http://www.ejabberd.im/google-talk) ...

对于 GTalk，您可以使用我提到的库[直接连接...](http://www.ag-software.de/index.php?page=google-talk)

示例 ICQ 网关：

![](https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Wie_ein_Jabber-Transport_funktioniert.svg/800px-Wie_ein_Jabber-Transport_funktioniert.svg.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-11T05:03:59.040

这个问题的简短回答是肯定的，这可以很容易地完成。发送和接收 IM 从您希望通信的网络发送、接收和解释请求，并且每个主要 IM 协议都有可用的库，以使这更容易。

对于 messenger，您可以尝试[DotMsn](http://www.xihsolutions.net/dotmsn)库，我过去曾使用过它，但当时它还很新，我没有使用它，所以我不能保证它的质量。

Jabber 使用开放标准的 XMMP 协议，因此必然有大量可用的客户端库。

如果我没记错的话，Google Talk 使用此协议或其修改版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-11T04:52:08.927

我没有使用 c# 的经验，但我使用 PHP 为 AIM 和 Gtalk 编写了一个。如果您正在寻找一种更简单的方式来编写 IM 机器人，那么[http://www.imified.com/是最好的起点。](http://www.imified.com/)

基本上你在 imified.com 创建一个帐户。命名您的机器人并链接脚本。每当向机器人发送消息时，imified.com 都会自动运行此脚本。

这是一个[链接](http://www.labnol.org/internet/tutorial-create-bot-for-gtalk-yahoo-messenger/4354/)，您可以开始使用！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-12-22T02:53:19.560

我们为 MSN/Yahoo/ICQ/AIM/GTalk/Jabber 提供专业的 .NET/COM/VCL 库。如果您愿意，请查看[http://www.imcomponents.com/ 。](http://www.imcomponents.com/)

# ios - 是否可以使用 Hackintosh 开发 iPhone 应用程序？

> ID：535403
> 
> 赞同：41
> 
> 时间：2009-02-11T04:11:58.167
> 
> 标签：ios, macos

> **可能重复：**
> [Hackintosh 上的 iPhone 开发](https://stackoverflow.com/questions/644225/iphone-development-on-hackintosh)

我真的很想开始，但是那些 Mac 很贵……尤其是对于像我这样的非美国人。

我正在考虑尝试在 VMWare 中运行 OS X。但这会禁止我进行 iPhone 开发吗？我很乐意购买一份 OS X 来给 Apple 应有的...

谢谢， 马基尔

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2009-02-11T04:50:18.247

答案是**肯定**的。

要开发 iPhone 应用程序，您需要**iPhone SDK**，而这又需要 Mac OS X 版本 10.5 (Intel)。如果你能在你的 OS X 安装中满足这个要求，那么你就可以构建 iPhone 应用程序。您是否可以轻松地测试它们取决于安装中的 USB 支持。

Mac Mini 售价 599 美元这一事实与问题无关，它的价格是相对的。对一个人来说便宜的东西可能对另一个人来说并不便宜（特别是因为 OP 说他不在美国，那里的价格可能远远超过 599 美元）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-02-11T05:02:38.870

是的，有可能。但是，问题是 iPhone SDK 会频繁更新，并且需要更新版本的 Mac OS X - 更新 hackintosh 很痛苦（您可以在 MacMini 上进行更好的开发，而不是浪费时间进行升级），而且您永远不知道您的 hackintosh 何时无法启动！

USB、音频是我在 hackintosh 中看到的另一个问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-11T05:39:19.343

这绝对是可能的，如果您购买这些部件的目的是在它们上运行 OS X，这甚至没有那么难。

人们遇到的大多数困难和不兼容问题都是由于试图在他们已经拥有的硬件上试用 OS X。他们可能有一个需要 Voodoo 内核的 AMD 系统，他们可能有一个 Radeon 4xxx，它只能在没有硬件加速的 VESA 模式下工作。当然，这些东西是可以工作的，而且它一直在变得越来越容易，但它需要更多的努力，而且这也是大部分问题的来源。

一旦你让你的 Hybrid Mac 工作（我亲切地喜欢这样称呼它们），它仍然不会像理想的（注意：不是实际的！）Mac 拥有体验那样完全无痛。但是，只要有一点常识，您就可以以一半或更少的价格获得更多的计算机。

编辑：至于在 PC 上的 VM 中运行 OS X，它真的不是很好。让它完全启动是一个巨大的麻烦，即使那样它作为一个环境也不是很可用，通常没有工作声音/LAN/等。您可以获得 OS X 的完整 VMWare 映像，这些映像甚至可能无法在不同的虚拟化环境中运行！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-02-11T04:22:59.263

从技术上讲：是的。法律上：没有。OSX EULA 不允许这样做。

请注意，拥有适合您工作的工具很重要，在非 Apple 硬件上运行 OSX 的未知数可能会导致未来出现问题。假设你已经有了键盘、鼠标和显示器，Mac Mini 的价格并不贵，只要 599 美元。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-06-14T03:01:16.680

我知道它会起作用，如果你能安装该死的东西并且你能够让 USB 工作。

我目前拥有一台 G4 mac mini 和一台第二代英特尔 IMac（不得不卖掉它来支付账单）。我支付了我的 iphone 开发许可证，购买了第二代 touch，启动了我的 mini，下载了 iphone sdk ......哦，不，你需要 10.5。购买并安装了 10.5...哦不，您需要一个英特尔 mac。强制安装 sdk，应用程序非常适合模拟器，但这是什么，我无法签署我的代码。更多黑客攻击......哦，不，配置错误。连接touch，无法挂载dev分区。我现在没有工作，没有钱，也没有办法发布我的应用程序来赚钱。

哦，是的，我将尝试在 vmware 中安装 hackintosh，但这只是因为我破产了。此外，我不会再买一个 mini，因为我的 g4 mini 售价 599 美元（过去），但一旦我完成了它的使用，我就花了 1000 多美元（200 美元的售后 1gig ram 升级，99 美元的键盘/鼠标，150 美元的显示器， ETC）。当然，现在更好的硬件更便宜，但迷你镍币会让你死。帮自己一个忙，买一个 macbook，那将是我的下一次购买。

而关于这一切的有趣和/或最糟糕的部分是，我什至不喜欢 OSX 或 iphone/touch。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-11T05:51:59.970

我试过了，但我没有在 VMware 中成功运行 OS/X。我确实知道有人在 hackintosh 上成功开发了 iPhone 应用程序，但是设置你的 hackintosh 是相当困难的。

我在同一条船上，在我知道我对工具链感到满意之前，我不想为 Mac 掏腰包，我想感受一下使用我当前的硬件进行 iPhone 开发。有兴趣听听别人的经历。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-03-14T16:24:36.600

我（通过一些努力）能够将 OS X、雪豹以及开发工具安装到我的 IBM X61 上，并且没有遇到任何问题，也没有在其上开发 iPhone 应用程序。我的操作系统可以正常运行。注意：我为我的项目购买了 Snow Leopard 的零售版。

为什么？我的时间比金钱多。如果我不得不再次选择并且我有 1500 美元的豆子（+税，+无论如何）来购买 mac book pro，我会拥有，因为它肯定不“简单”。但我没有。

但是现在我已经完成了，我拥有了一台非常酷的 IBM MacBook :) 并且为取得的成就感到非常自豪。在这个过程中我也学到了很多东西。是地狱吗？是的..值得吗？是的...

希望有帮助！

* * *

## 回答 #8

> 赞同：-9
> 
> 时间：2009-02-11T04:21:14.617

[**Mac Mini**](http://www.apple.com/macmini/)**售价 599 美元**，配备OS X（**单独售价 129 美元**）。Mac Mini 的规格并不令人惊叹，但它们非常实用。我只是无法证明通过购买便宜的地下室 PC 并将其作为 Hackintosh 运行来节省几百美元（最大）是合理的。你失去了从 Apple 获得支持的所有能力，你无法保证它将来不会破坏兼容性，而且你极不可能获得与真实 Mac 相同的相对无缝体验。

最重要的是，无论您节省多少钱，您最终都可能会为此付出代价/后悔。我同时拥有一台 Mac Mini 和一台 Macbook，与我过去购买或制造的任何 PC 相比，我对这两者的体验都更好。我只是不建议为了几百美元而试图结束这一点。哎呀，如果你把 VMWare（189 美元）和 Leopard（129 美元）加上甚至便宜的 PC 的成本加起来，你已经非常接近 Mac Mini，所以我认为这不值得。

# .net - XmlDocument - ParentNode 和 DocumentType 为空

> ID：535412
> 
> 赞同：0
> 
> 时间：2009-02-11T04:16:46.767
> 
> 标签：.net, xmldocument, system.xml

在 .NET 中，如果您将 LoadXml() 放入 XmlDocument 对象，然后 ParentNode 和 DocumentType 为空，这意味着什么？

另外，我得到这个作为 xmldoc.FirstChild.Value 的答案：
`version="1.0" encoding="utf-8"`

这是正确的吗？我已经有一段时间没有做过任何 XML DOM 的东西了。该文件采用 UTF-8 编码。认为这应该不是问题。我的文档有简单的真/假验证方法吗？

**更新：**
如果 NodeType 是 Element 你如何返回“标签名称”？

**当前想法：**
xmldoc.ChildNodes[1].Name；

我注意到 Name 属性是 Get only。如果您想将根标签换成其他东西（比如“feed”到“container”），但想要比 XSLT 更轻量级的东西，而不是简单的文本/替换，那么最好使用什么工具。仍然希望看到一个 LINQ to XML 示例。感谢大家的帮助。自从我查看 .NET 中的 XML 内容以来，猜想它比我想象的要长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T04:49:26.157

从 MSDN 文档中，[XmlDocument.ParentNode](http://msdn.microsoft.com/en-us/library/ms162375.aspx)始终返回 null - 文档本身是根，因此它没有父级。[DocumentType](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.documenttype.aspx)属性返回您的示例没有的 DOCTYPE 标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T13:33:49.503

根元素始终可以通过 XmlDocument.DocumentElement 属性访问。根元素的名称可以使用 XmlDocument.DocumentElement.LocalName 字符串属性来确定。

如果要重命名根元素，最好使用 XmlDocument 的另一个实例，使用 XmlDocument.CreateNode 添加根元素，随意命名，然后循环原始文档根元素的子元素并使用 CloneNode (bool deep) 方法，结合 XmlNode.ImportNode 方法将原始文档的其余部分复制到新文档。

# python - Python libraries to construct classes from a relational database? (ORM in reverse)

> ID：535426
> 
> 赞同：3
> 
> 时间：2009-02-11T04:22:19.983
> 
> 标签：python, database, orm

Are there any Python object-relational mapping libraries that, given a database schema, can generate a set of Python classes? I know that the major libraries such as [SQLObject](http://www.sqlobject.org/), [SQLAlchemy](http://www.sqlalchemy.org/), and [Django](http://www.djangoproject.com/)'s internal SQL ORM library do a very good job of creating a DB schema given a set of classes, but I'm looking for a library that works in reverse.

There is a [related question for Perl libraries](https://stackoverflow.com/questions/362929/is-there-a-perl-orm-with-database-reverse-engineering) on Stack Overflow.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-11T04:27:42.997

[SQLAlchemy extension to create a python code model from an existing database](http://code.google.com/p/sqlautocode/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-11T05:07:00.217

Django had an [inspectdb](http://docs.djangoproject.com/en/dev/ref/django-admin/#inspectdb) command that creates models.py files out of your database.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-11T05:31:21.300

SQLAlchemy can actually do what you want. You can either define the mappings yourself manually using the mapper facility, or auto-generate them using [reflection](http://www.sqlalchemy.org/docs/05/metadata.html#reflecting-tables).

It's not absolutely necessary to build the database using the metadata facility, you can always use an existing one instead.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-11T04:40:16.867

[Geniusql](http://www.aminus.net/geniusql) (and [Dejavu](http://www.aminus.net/dejavu), its big federated brother) can do that quite well. See "[Automatic Table Classes](http://www.aminus.net/geniusql/chrome/common/doc/trunk/modeling.html)" for the former and "[Automatic Unit Classes](http://www.aminus.net/dejavu/chrome/common/doc/trunk/modeling.html#autoclass)" for the latter.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-23T22:19:04.350

You can give [algen](https://github.com/danishabdullah/algen) a try:

> Generate opnionated python ORM classes from yaml schema for sqlalchemy

# .net - Web客户端软件工厂（WCSF）和智能客户端软件工厂（SCSF）的演示者可以分享吗？如何分享？

> ID：535427
> 
> 赞同：0
> 
> 时间：2009-02-11T04:22:28.750
> 
> 标签：.net, mvp, wcsf, scsf, presenter

Web客户端软件工厂（WCSF）和智能客户端软件工厂（SCSF）都使用MVP模式。

**M** -Model 可以共享。

**V** -View 必须不同，因为两者都在不同的平台（桌面/Web）上。

我想知道**P** -Presenter 是否可以共享，或者我是否可以两者以及如何共享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T06:06:56.033

一般来说，不，这不是模式的工作方式。Model 是可重用的部分，V + C/P 的组合构成了应用层，因此根据定义是特定于应用程序的。

如果您的 Presenters 中的逻辑看起来应该可以在不同的应用程序中重用，那么您应该看看如何将其下推到您的领域层，并使其成为您模型的一部分。

[这](http://ctrl-shift-b.com/2007/08/interactive-application-architecture.html)是关于该主题的最佳文章之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-25T14:51:55.743

在大多数情况下，我同意sliderhouserules。演示者根据业务规则操作 UI 组件，因此将在一定程度上针对 UI 平台特定于平台。据我了解，您希望通过两个不同的 UI 平台显示相同的应用程序。尽管此应用的业务规则可能在两个平台上保持相同，但 UI 呈现方式会有所不同。

因此，也许您应该考虑创建一个共享库，您的演示者制定的通用业务逻辑可以在每个应用程序的特定于 UI 的演示代码中重用。我认为这可以大大减少特定于平台的代码。

# c# - Linq-to-Sql：递归获取孩子

> ID：535436
> 
> 赞同：5
> 
> 时间：2009-02-11T04:27:41.577
> 
> 标签：c#, sql, linq, linq-to-sql, common-table-expression

我有一个 Comment 表，它有一个 CommentID 和一个 ParentCommentID。我正在尝试获取评论的所有子项的列表。这是我目前所拥有的，我还没有测试过。

```
private List<int> searchedCommentIDs = new List<int>();
// searchedCommentIDs is a list of already yielded comments stored
// so that malformed data does not result in an infinite loop.
public IEnumerable<Comment> GetReplies(int commentID) {
    var db = new DataClassesDataContext();
    var replies = db.Comments
        .Where(c => c.ParentCommentID == commentID 
            && !searchedCommentIDs.Contains(commentID));
    foreach (Comment reply in replies) {
        searchedCommentIDs.Add(CommentID);
        yield return reply;
        // yield return GetReplies(reply.CommentID)); // type mis-match.
        foreach (Comment replyReply in GetReplies(reply.CommentID)) {
            yield return replyReply;
        }
    }
} 
```

2个问题：

1.  有什么明显的方法可以改善这一点吗？（除了可能使用 CTE 在 sql 中创建视图。）
2.  为什么我不能`IEnumerable <Comment>`向 IEnumerable屈服`<Comment>`，只能向`Comment`它自己屈服？
3.  无论如何在这种情况下使用 SelectMany 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-11T04:41:30.013

我可能会使用 UDF/CTE，或者（对于非常深的结构）手动执行相同操作的存储过程。

请注意，如果您可以更改架构，则可以将此类递归结构预先索引到索引/范围树中，以便您执行单个 BETWEEN 查询 - 但树的维护成本很高（即查询变得便宜，但插入/更新/delete 变得昂贵，或者您需要延迟的计划任务）。

* * *

Re 2 - 你只能`yield`在枚举中指定类型（`T`in `IEnumerable<T>`/ `IEnumerator<T>`）。

**如果**方法返回`yield`，您可以选择- 这有意义吗？`IEnumerable<Comment>` **`IEnumerable<IEnumerable<Comment>>`**

 **改进：

*   可能是使用 CTE 递归方法的*udf*（保持可组合性，而不是存储过程）
*   使用`using`, 因为`DataContext`是`IDisposable`...

所以：

```
using(var db = new MyDataContext() ) { /* existing code */ } 
```

*   [LoadWith](http://msdn.microsoft.com/en-us/library/bb534268.aspx)值得一试，但我不确定我是否有希望......
*   搜索到的 id 列表作为一个字段是有风险的 - 我想你没问题，只要你不调用它两次......就个人而言，我会在私有支持方法上使用一个参数......（即通过递归调用之间的列表，但不在公共 API 上）

# c - 在 Unix 环境中，有没有办法以编程方式调用 C 中的哪个？

> ID：535438
> 
> 赞同：1
> 
> 时间：2009-02-11T04:30:14.893
> 
> 标签：c, unix

对于 C 语言的项目，我们需要在 Unix 服务器上构建一个 shell。

它需要能够执行 Unix 原生的功能，而不是 bash（或任何其他 Unix shell）。

我正在编写一种方法，希望能够概括对命令的调用。变成一般功能：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/wait.h>
#include <string.h>
#include <limits.h>

void execCmd(char* cmd,char* options)
{
   char directory[MAX_CANON] = "/bin/"; //currently is just set to /bin
   char* toExec = strcat(directory,cmd); 
```

我想将变量“目录”设置为我正在调用的 Unix 命令的正确目录。

所以，从本质上讲，我希望能够使用 char directory[MAX_CANON] = which(cmd); 之类的东西。

这样 which 函数将返回我试图调用的命令的目录。

如果您觉得这不是一个好的解决方案，请推荐其他方式。

谢谢

编辑：我想最坏的情况我可以做一个巨大的 if-else 语句，根据 cmd 参数设置“目录”vbl。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-11T04:41:09.813

你要的是命令'which'，即

```
me@stackoverflow:~$ which which
/usr/bin/which 
```

在 linux 上，它是一个 shell 脚本，所以看一看。

但是，我不认为这是制作 UNIX shell 所必需的。如果你输入

```
man 3 exec 
```

您会发现 execlp() 和 execvp() 负责在 PATH 中搜索给定命令并执行它的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T04:42:54.800

为了在本地实现这一点，我会：

*   用于`getenv`获取`PATH`
*   将其解析`PATH`为候选组件列表（`strtok`因为它的所有故障都是经典工具），
*   对于每个`PATH`组件：形成`/possible/path/to/cmd`并使用`stat`族函数来测试该文件是否存在以及用户是否具有执行权限。继续直到找到它或用完`PATH`...

**编辑：**您可能也想关注符号链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T04:43:57.950

并不是说我不知道​​，但是您可以模仿辅助函数上的哪些功能。我需要在 PATH 环境变量中的所有路径中搜索一个名为您的命令的文件，然后检查该文件是否是可执行文件，那么您可能找到了您的可执行文件。

要获取 PATH 变量，您可以使用 getenv()。您需要使用 strtok() 将其拆分。要搜索目录，您可以使用 opendir()，如下所示：

```
#include <sys/types.h>
#include <dirent.h>

...
    DIR *dir;
    struct dirent *dp;
...
    if ((dir = opendir (".")) == NULL) {
        perror ("Cannot open .");
        exit (1);
    }

    while ((dp = readdir (dir)) != NULL) {
    }
... 
```

在 readdir() 函数手册页上检查 dirent struct。

# c++ - C++ iostream 的自定义操纵器

> ID：535444
> 
> 赞同：11
> 
> 时间：2009-02-11T04:34:32.527
> 
> 标签：c++, string, iostream

我想为 ostream 实现一个自定义操纵器，以对插入到流中的下一个项目进行一些操作。例如，假设我有一个自定义操纵器*报价*：

```
std::ostringstream os;
std::string name("Joe");
os << "SELECT * FROM customers WHERE name = " << quote << name; 
```

操纵器*引用*将引用*名称*来产生：

```
SELECT * FROM customers WHERE name = 'Joe' 
```

我该如何实现呢？谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-02-11T06:29:25.667

将操纵器添加到 C++ 流中特别困难，因为无法控制操纵器的使用方式。可以将新的语言环境注入到流中，该流安装了一个控制如何打印数字的方面 - 但不控制如何输出字符串。然后问题仍然是如何将引用状态安全地存储到流中。

使用命名空间中定义的运算符输出字符串`std`。如果你想改变它们的打印方式，同时保持操纵器的外观，你可以创建一个代理类：

```
namespace quoting {
struct quoting_proxy {
    explicit quoting_proxy(std::ostream & os):os(os){}

    template<typename Rhs>
    friend std::ostream & operator<<(quoting_proxy const& q, 
                                     Rhs const& rhs) {
        return q.os << rhs;
    }

    friend std::ostream & operator<<(quoting_proxy const& q, 
                                     std::string const& rhs) {
        return q.os << "'" << rhs << "'";
    }

    friend std::ostream & operator<<(quoting_proxy const& q, 
                                     char const* rhs) {
        return q.os << "'" << rhs << "'";
    }
private:
    std::ostream & os;
};

struct quoting_creator { } quote;
quoting_proxy operator<<(std::ostream & os, quoting_creator) {
    return quoting_proxy(os);
}
}

int main() {
    std::cout << quoting::quote << "hello" << std::endl; 
} 
```

哪个适合用于`ostream`. 如果你想概括，你也可以把它做成一个模板，也可以用 accept`basic_stream`代替 plain `string`。在某些情况下，它与标准操纵器具有不同的行为。因为它通过返回代理对象来工作，所以它不适用于像这样的情况

```
std::cout << quoting::quote; 
std::cout << "hello"; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-11T06:24:51.420

试试这个：

```
#include <iostream>
#include <iomanip>

// The Object that we put on the stream.
// Pass in the character we want to 'quote' the next object with.
class Quote
{
    public:
        Quote(char x)
            :m_q(x)
        {}
    private:
        // Classes that actual does the work.
        class Quoter
        {
            public:
                Quoter(Quote const& quote,std::ostream& output)
                    :m_q(quote.m_q)
                    ,m_s(output)
                {}

                // The << operator for all types. Outputs the next object
                // to the stored stream then returns the stream. 
                template<typename T>
                std::ostream& operator<<(T const& quoted)
                {
                    return m_s << m_q << quoted << m_q;
                }

            private:
                char            m_q;
                std::ostream&   m_s;
        };
        friend Quote::Quoter operator<<(std::ostream& str,Quote const& quote);

    private:
        char    m_q;
};

// When you pass an object of type Quote to an ostream it returns
// an object of Quote::Quoter that has overloaded the << operator for
// all types. This will quote the next object and the return the stream
// to continue processing as normal.
Quote::Quoter operator<<(std::ostream& str,Quote const& quote)
{
    return Quote::Quoter(quote,str);
}

int main()
{
    std::cout << Quote('"') << "plop" << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-11T05:03:52.597

**[编辑：正如 Benôit 在评论中指出的那样，“真正的操纵器语义”（即持续引用状态）也可以通过包装而不是从它派生来实现*。 ]*`std::ostream`**

据我所知，如果不从或类似的类派生新类，或者将此类类包装在另一个将大多数方法转发到其包含的对象的类中，则无法直接完成此操作*。*这是因为，对于您提供的代码示例，您需要以某种方式修改iostreams 层次结构中某处（或可能定义的任何位置）中定义的行为。您还需要使用（有点难看的）工具来记录一个布尔标志，该标志持有当前的引用状态。查找，并找出如何做到这一点。`std::ostream``std::ostream``std::ostream& operator<<(std::ostream&, std::string const&)``std::string``ios_base``ios_base::xalloc()``ios_base::iword()``ios_base::pword()`

但是，如果您愿意使用以下语法：

```
os << "SELECT * FROM customers WHERE name = " << quote(name); 
```

这可以使用全局函数（当然在适当的命名空间中）非常简单地完成。

`quote`这种语法的优点是引用不是持久的，这意味着当函数设置格式化标志并忘记将其设置回其原始值时，它不能“泄漏” 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T07:28:47.477

或者只是使用[OTL](http://otl.sourceforge.net/)，它基本上已经为 SQL 实现了一个流接口，与您的示例非常相似。

# linq - 谁购买了 linqpad 的自动补全功能？

> ID：535445
> 
> 赞同：20
> 
> 时间：2009-02-11T04:35:02.743
> 
> 标签：linq, linqpad

谁购买了 Linqpad 的自动补全[功能](http://www.linqpad.net/)？我知道它只有 19 美元，但如果值得，我想听听你的意见......它有任何错误吗？它真的有助于加快您的 linq 查询开发吗？是否有任何限制或任何让您感到沮丧的特定事情？

任何想法表示赞赏....

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-03-12T20:14:04.343

我刚刚购买了 LINQPad 中的自动完成功能，到目前为止，它的性能完全符合预期，看起来和感觉非常像 Visual Studio（例如，自动完成选项卡的工作方式完全相同）

需要注意的是，自动完成功能仅适用于 C# 模式，因此 VB 和 SQL 模式无法从该功能中受益。

此外，当使用 C# 语句模式时，自动补全适用于已声明的对象（任何时候`.`输入“”），并且它也适用于类型声明（即使用`new`关键字时），但在启动某些语句时不会出现自动补全（例如开始一个`while`循环。

需要明确的是，我对 LINQPad 的自动完成功能非常满意。请记住，如果有疑问，请按 Ctrl+Space！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-12-28T16:31:45.877

刚买了自动完成版本并强烈推荐它...我想回应 Kit 对 .Dump() 方法的评论...一旦你看到它使用了几次，它就变得非常有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-12-02T23:05:32.280

我买它是为了支持作者，并不是因为我需要这个功能本身。

# php - 如何创建临时 url 以防止 php 中的盗链？

> ID：535452
> 
> 赞同：4
> 
> 时间：2009-02-11T04:40:46.163
> 
> 标签：php

我希望建立一个简单的上传站点，在输入验证码后将生成视频文件的临时 URL。我需要保护文件的真实位置，所以它们不能直接热链接。基于时间的 url，在 x 分钟后过期似乎是最好的选择，但我不确定实际的实现。

有小费吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T04:49:08.980

使您的网址如下所示：

[http://myvid.com/video?id=1×tamp=12341561234&hash=1203941h23jk479sdf87sdf](http://myvid.com/video?id=1&timestamp=12341561234&hash=1203941h23jk479sdf87sdf)

其中 timestamp 是 unix 时间戳，而 hash 是 md5 哈希，例如附加到服务器上的秘密字符串的时间戳。

然后，当您播放该视频时，检查时间戳字段是否有效（通过使用哈希），然后检查时间戳的年龄。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-11T05:46:09.547

Yegor，他们使用 Mod Rewrite。因此，当有人输入 www.domain.com/video/1234567890/theLongHashCode 时，您在 .htaccess 中写入该 url 应被视为 video.php?timestamp=12341561234&hash=1203941h23jk479sdf87sdf

这使您可以防止显示实际的 url。

mod重写的一些来源：[http ://www.modrewrite.com/](http://www.modrewrite.com/)

考虑到您在 Apache 上启用了 mod_rewrite 模块，您需要放入 .htaccess 文件中的内容：

```
RewriteEngine On
RewriteRule ^video/([0-9]+)/(.*)  video.php?timestamp=$1&hash=$2 
```

这只需要 2 个值：时间戳和哈希。视频 ID 未发送。我什至不会发送时间戳。对于临时 url，我只生成一个哈希，将它与时间戳一起存储在数据库中。所以当有人访问一个 url 时，我会从数据库中查找哈希值。如果哈希存在，那么我将数据库中的时间戳与当前时间进行比较，如果在时间限制内，则认为url有效，否则无效并写入页面“此链接已过期”。

所以我会让网址看起来像： [http ://hsbsitez.com/video/thehashcodehere](http://hsbsitez.com/video/thehashcodehere)

使用以下 .htaccess 文件来解释该 url。

```
RewriteEngine On
RewriteRule ^video/(.*)  video.php?hash=$1 
```

其中 video.php 是检查哈希是否存在于数据库中的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T16:20:29.880

```
header('Content-Type: application/force-download');

$fileee = 'filename.zip';
$file_Location = "/..yourfolder/" . $fileee;

header('Content-Length:' . filesize($file_Location));
header("Content-Disposition: inline; filename=\"".$fileee."\"");

$file_Pointer = fopen($fileLocation,"rb");
fpassthru($file_Pointer); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T09:23:46.920

### 使用方法设置为 PUT 的 FORM

您是否考虑过使用带有 PUT 方法的表单？这正是 PUT 设计的一种情况 - 无法使用相同的 URL 重新访问页面。只需创建一个包含一些隐藏字段的简单表单，您就可以创建一个提交它的 javascript 链接。这样，您就不必担心用户试图修改链接或将链接保留在他们的历史记录中。

例子：

```
<form id="myform" method="put" action="viewimage.php">
<input type="hidden" name="id" value="uniquevalue" />
<input type="hidden" name="filename" value="foo.jpg" />

<a href="javascript:myFunctionToInvokeSumit()">Image foo.jpg</a>
</form> 
```

从表面上看，没有人能够重新访问图像而不需要做一些超出典型用户的 HTTP 魔术。但是，为了进一步验证图像是否仅在单击后启动，您可以在会话中注册 id 并为其添加时间戳，然后在查看图像时检查时间戳。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-19T00:19:07.090

我建议不要通过 php 打印整个文件，因为它是资源消耗（甚至*`fpassthru`*）。还有另一种选择 - 使用自己的脚本生成对`temporary url`=>`original url`和[rewritemap prg](http://httpd.apache.org/docs/2.4/rewrite/rewritemap.html#prg)。但是这个选项应该小心使用。

# java - 关于错误详情

> ID：535463
> 
> 赞同：1
> 
> 时间：2009-02-11T04:47:01.950
> 
> 标签：java

我是Java的初学者。在运行 java 应用程序时，我得到了下面提到的错误。为什么会出现这个错误？

```
#
# An unexpected error has been detected by Java Runtime Environment:
#
#  Internal Error (exceptions.cpp:367), pid=2552, tid=2532
#  Error: ExceptionMark destructor expects no pending exceptions
#
# Java VM: Java HotSpot(TM) Client VM (10.0-b22 mixed mode, sharing windows-x86)
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x00385800):  JavaThread "main" [_thread_in_vm, id=2532, stack(0x00390000,0x003e0000)]

Stack: [0x00390000,0x003e0000]
[error occurred during error reporting (printing stack bounds), id 0xc0000005]

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::StubRoutines (1)
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::StubRoutines (1)
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::StubRoutines (1)
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::StubRoutines (1)

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x029c6000 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=2648, stack(0x02c70000,0x02cc0000)]
  0x029b8000 JavaThread "CompilerThread0" daemon [_thread_blocked, id=2876, stack(0x02c20000,0x02c70000)]
  0x029b6c00 JavaThread "Attach Listener" daemon [_thread_blocked, id=1464, stack(0x02bd0000,0x02c20000)]
  0x029b6000 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=1248, stack(0x02b80000,0x02bd0000)]
  0x029b1800 JavaThread "Finalizer" daemon [_thread_blocked, id=4084, stack(0x02b30000,0x02b80000)]
  0x029ad400 JavaThread "Reference Handler" daemon [_thread_blocked, id=4068, stack(0x02ae0000,0x02b30000)]
=>0x00385800 JavaThread "main" [_thread_in_vm, id=2532, stack(0x00390000,0x003e0000)]

Other Threads:
  0x029ac000 VMThread [stack: 0x02a90000,0x02ae0000] [id=4064]
  0x029e1400 WatcherThread [stack: 0x02cc0000,0x02d10000] [id=2656]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 960K, used 271K [0x228d0000, 0x229d0000, 0x22db0000)
  eden space 896K,  30% used [0x228d0000, 0x22913ea8, 0x229b0000)
  from space 64K,   0% used [0x229b0000, 0x229b0000, 0x229c0000)
  to   space 64K,   0% used [0x229c0000, 0x229c0000, 0x229d0000)
 tenured generation   total 4096K, used 0K [0x22db0000, 0x231b0000, 0x268d0000)
   the space 4096K,   0% used [0x22db0000, 0x22db0000, 0x22db0200, 0x231b0000)
 compacting perm gen  total 12288K, used 23K [0x268d0000, 0x274d0000, 0x2a8d0000)
   the space 12288K,   0% used [0x268d0000, 0x268d5cd0, 0x268d5e00, 0x274d0000)
    ro space 8192K,  62% used [0x2a8d0000, 0x2add2a60, 0x2add2c00, 0x2b0d0000)
    rw space 12288K,  52% used [0x2b0d0000, 0x2b7186e0, 0x2b718800, 0x2bcd0000)

Dynamic libraries:
0x00400000 - 0x00423000     C:\Program Files\Java\jre1.6.0_06\bin\javaw.exe
0x77cc0000 - 0x77d75000     C:\WINDOWS\system32\ntdll.dll
0x77e60000 - 0x77f50000     C:\WINDOWS\system32\kernel32.dll
0x77f50000 - 0x77feb000     C:\WINDOWS\system32\ADVAPI32.dll
0x77340000 - 0x773d1000     C:\WINDOWS\system32\RPCRT4.dll
0x77d80000 - 0x77e11000     C:\WINDOWS\system32\USER32.dll
0x773e0000 - 0x77425000     C:\WINDOWS\system32\GDI32.dll
0x7c340000 - 0x7c396000     C:\Program Files\Java\jre1.6.0_06\bin\msvcr71.dll
0x6d7c0000 - 0x6da10000     C:\Program Files\Java\jre1.6.0_06\bin\client\jvm.dll
0x76b40000 - 0x76b6d000     C:\WINDOWS\system32\WINMM.dll
0x6d270000 - 0x6d278000     C:\Program Files\Java\jre1.6.0_06\bin\hpi.dll
0x76bf0000 - 0x76bfb000     C:\WINDOWS\system32\PSAPI.DLL
0x6d770000 - 0x6d77c000     C:\Program Files\Java\jre1.6.0_06\bin\verify.dll
0x6d310000 - 0x6d32f000     C:\Program Files\Java\jre1.6.0_06\bin\java.dll
0x6d7b0000 - 0x6d7bf000     C:\Program Files\Java\jre1.6.0_06\bin\zip.dll

VM Arguments:
jvm_args: -Dfile.encoding=Cp1252 
java_command: com.screen.Splash
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=C:\Program Files\Java\jdk1.6.0_06\bin;.;
CLASSPATH=C:\Program Files\Java\jdk1.6.0_06\bin;.;
PATH=C:/Program Files/Java/jre1.6.0_07/bin/client;C:/Program Files/Java/jre1.6.0_07/bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\Microsoft Visual Studio\Common\Tools\WinNT;C:\Program Files\Microsoft Visual Studio\Common\MSDev98\Bin;C:\Program Files\Microsoft Visual Studio\Common\Tools;C:\Program Files\Microsoft Visual Studio\VC98\bin;C:\Program Files\Java\jdk1.6.0_06\bin;.;
USERNAME=sun
OS=Windows_NT
PROCESSOR_IDENTIFIER=x86 Family 6 Model 8 Stepping 3, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows XP Build 2600 Service Pack 2, v.2096

CPU:total 1 (1 cores per cpu, 1 threads per core) family 6 model 8 stepping 3, cmov, cx8, fxsr, mmx, sse

Memory: 4k page, physical 261616k(53616k free), swap 633092k(297116k free)

vm_info: Java HotSpot(TM) Client VM (10.0-b22) for windows-x86 JRE (1.6.0_06-b02), built on Mar 25 2008 01:22:05 by "java_re" with MS VC++ 7.1

time: Tue Feb 10 16:59:05 2009
elapsed time: 0 seconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-11T05:21:17.297

您也在运行 jre1.6.0_07 - 但您的类路径和 java_home 指向

JAVA_HOME=C:\Program Files\Java\jdk1.6.0_06\bin;.; CLASSPATH=C:\Program Files\Java\jdk1.6.0_06\bin;.;

这种混合路径可能会导致运行时出现一些问题。

我建议卸载所有版本的java（看起来你有几个）并升级到最新版本。然后确保所有变量都指向那个单一版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T04:58:27.960

您是否在 IE 7 中运行一些 Web 应用程序？我见过很少有类似的崩溃发布在互联网上。如果是这种情况，请尝试使用其他浏览器。

可能的占用可以是，

*   如果您在 IE 下运行某些应用程序，请尝试其他浏览器然后 IE
*   尝试卸载 JRE/JDK，然后从头开始安装新的。**选择发布版本，而不是 beta**。并且这次请**不要在程序文件下做**，**选择没有空格的路径**。虽然，**空格不能成为崩溃的原因**

在此之后不应发生崩溃。如果它仍然存在，请按照错误消息中的建议进行报告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T05:22:30.993

内部错误应始终提交给 Sun。无论您的代码多么糟糕，它们都不应该发生。Sun 提交的网页是[这里](http://bugs.sun.com/)或[这里](http://java.sun.com/webapps/bugreport/crash.jsp)。

只要确保它尚未被报告并且您可以轻松地复制它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T08:42:04.133

如果您不时或多次遇到此问题，则可以将错误记录到 sun。另外，如果可能的话，我建议您升级您的 JVM 版本，因为这是 sun 首先建议的。

# php - 什么时候*不*使用准备好的语句？

> ID：535464
> 
> 赞同：34
> 
> 时间：2009-02-11T04:47:10.763
> 
> 标签：php, mysql, pdo, prepared-statement

我正在重新设计一个使用最小数据库的 PHP 驱动的网站。原始版本使用“pseudo-prepared-statements”（执行引用和参数替换的 PHP 函数）来防止注入攻击并将数据库逻辑与页面逻辑分离。

用使用 PDO 和实际准备好的语句的对象替换这些临时函数似乎很自然，但是在阅读了它们之后，我不太确定。PDO 似乎仍然是一个好主意，但准备好的语句的主要卖点之一是能够重用它们……我永远不会。这是我的设置：

*   这些陈述都非常简单。大多数都是形式`SELECT foo,bar FROM baz WHERE quux = ? ORDER BY bar LIMIT 1`。该批次中最复杂的语句只是三个这样的选择与`UNION ALL`s 连接在一起。
*   每个页面命中*最多*执行一个语句并且只执行一次。
*   我在一个托管环境中，因此对通过亲自进行任何“压力测试”来抨击他们的服务器持谨慎态度。

鉴于使用准备好的语句至少会使我正在进行的数据库往返次数增加一倍，我最好避免使用它们吗？我是否可以`PDO::MYSQL_ATTR_DIRECT_QUERY`在保留参数化和注入防御优势的同时避免多次数据库访问的开销？或者，与执行我不应该担心的未准备好的查询相比，准备好的语句 API 使用的二进制调用是否表现得足够好？

**编辑：**

感谢所有好的建议，伙计们。这是我希望我可以将多个答案标记为“已接受”的地方——许多不同的观点。不过，最终，我必须对[rick给予应有的回报……如果没有他的回答，即使](https://stackoverflow.com/questions/535464/when-not-to-use-prepared-statements/537834#537834)*听从*了每个人的建议，我也会幸福地离开并做完全错误的事情。:-)

它是模拟的准备好的语句！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-02-11T05:39:45.273

*当今软件工程的规则：*如果它不会为您做任何事情，请不要使用它。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-02-11T17:13:07.417

我想你想要 PDO::ATTR_EMULATE_PREPARES。这会关闭本机数据库准备语句，但仍允许查询绑定以防止 sql 注入并保持 sql 整洁。据我了解， PDO::MYSQL_ATTR_DIRECT_QUERY 完全关闭查询绑定。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-02-11T17:39:20.410

什么时候*不*使用准备好的语句？当您在数据库连接消失之前只运行一次语句时。

什么时候*不*使用绑定查询参数（这实际上是大多数人使用准备好的语句来获取的）？我倾向于说“从不”，我真的很想说“从不”，但现实情况是大多数数据库和一些数据库抽象层在某些情况下不允许你绑定参数，所以你'被迫在这些情况下不使用它们。但是，任何其他时候，它都会使您的生活更简单，并且您的代码可以更安全地使用它们。

我不熟悉 PDO，但我敢打赌，如果您不想准备，它会提供一种运行参数化查询的机制，该查询使用同一函数调用中给出的值，然后作为单独的步骤运行。（例如，类似`run_query("SELECT * FROM users WHERE id = ?", 1)`或类似的东西。）

此外，如果您深入了解，大多数数据库抽象层都会准备查询，然后运行它，即使您只是告诉它执行静态 SQL 语句。因此，无论如何避免显式准备，您可能不会节省前往 db 的行程。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-02-11T09:58:19.113

准备好的语句被成千上万的人使用，因此经过了很好的测试（因此可以推断它们是相当安全的）。您的自定义解决方案仅供您使用。

您的自定义解决方案不安全的可能性非常高。使用准备好的语句。您必须以这种方式维护更少的代码。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-02-11T15:35:56.993

准备好的语句的好处如下：

*   每个查询只编译一次
*   mysql 将使用更高效的传输格式将数据发送到服务器

但是，准备好的语句仅在每个连接中持续存在。除非您使用连接池，否则如果您每页只执行一条语句，则不会有任何好处。简单的查询也不会从更有效的传输格式中受益。

我个人不会打扰。伪准备语句可能对它们可能提供的安全变量引用有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-11T09:12:00.487

老实说，我认为你不必担心。但是，我记得很多 PHP 数据访问框架都支持准备语句模式和非准备语句模式。如果我没记错的话，PEAR:DB 确实在当年。

我遇到了和你一样的问题，我有自己的保留意见，所以我最终没有使用 PDO，而是编写了自己的轻量级数据库层，它支持准备和标准语句，并在两者中执行正确的转义（防止 sql 注入）案例。我对 prepare 的其他抱怨之一是，有时将一些不可逃避的输入附加到诸如 ... WHERE id IN (1, 2, 3 ...) 之类的语句中会更有效。

我对 PDO 的了解还不够，无法告诉您使用它还有哪些其他选择。但是，我确实知道 PHP 具有可供它支持的所有数据库供应商使用的转义功能，并且您可以在您坚持使用的任何数据访问层之上滚动您自己的小层。

# java - OCaml 中的经典单例实现

> ID：535481
> 
> 赞同：1
> 
> 时间：2009-02-11T04:55:13.367
> 
> 标签：java, singleton, ocaml, design-patterns

我正在尝试在 OCaml 中概念化 Singleton 设计模式（qua Java），并且曾经看到实例提到函子或模块，我在 GoF 工作的概念证明中都没有使用它们。基本上，我想使用 OCaml 重新创建以下功能：

```
public class Singleton
{
 private static Singleton UniqueInstance; 
 private Singleton(){}
 public static Singleton getInstance()
 {
  if(UniqueInstance==null)UniqueInstance=new Singleton();
  return UniqueInstance;
 }
} 
```

如果没有模块或函子，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-12T03:53:50.540

你能解释一下*为什么*模块解决方案不适合你吗？模块确实是执行其他语言中的单例操作的自然方式。

一般来说，GOF 风格的模式在 OCaml 中基本上是不相关的。事实上，对象在 OCaml 中基本上是不相关的。具有 OO 背景的人通常认为他们应该从使用 OCaml 中的 OO 功能开始，但这是一个错误。大多数用其他语言的对象解决的问题都是用 OCaml 中的参数多态性、代数数据类型和模块来解决的。函子是一个稍微高级一点的话题，而对象也很遥远。在您熟练掌握该语言的其余部分之前，您不应该接触对象系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-11T20:10:27.377

Ocaml 中的对象不能有静态/全局方法。你可以试试，[立即对象](http://caml.inria.fr/pub/docs/manual-ocaml/manual005.html#ss:immediate-objects)。警告，我认为您仍然可以执行 obj.copy 来获取对象的副本，并且每次对其进行评估时，它们都会返回一个新对象（因此您不能将参数传递给对象，但是您可以通过一些封装和全局布尔值，但现在您正在处理模块）。当然，如果你只有这样的例子，

```
let p = object 
   val mutable x = 0
   method get_x = x
   method move d = x <- x + d
end 
```

`p`将被评估一次，并且您每次都可以访问它。当然， p#copy 会为你搞砸。模块是通往这里的路。Ocaml 的 OO 功能不像其他语言那样“强大”。这当然不是项目的目标，它的模块系统*非常*强大。

模块*是*（全局）单例。你真的不需要写任何东西来构建它们。它们隐含在语言中。例如，如何记录到文件：

```
---logging.ml
(* default channel to log *)
let log_channel = ref stdout

(* set the log to a channel *)
let set_log_chan chan = log_channel := chan

(* timestamp of log -- kinda heavy weight, but just for kicks *)
let get_log_prequel () = 
    let time = Unix.localtime (Unix.time ()) in
    (* format the time data into "y/m/d - h:m:s" format *)
    Printf.sprintf  "%d/%02d/%02d - %02d:%02d:%02d"
                    (time.Unix.tm_year+1900) time.Unix.tm_mon time.Unix.tm_mday
                    time.Unix.tm_hour time.Unix.tm_min time.Unix.tm_sec

(* log a string to the channel *)
let log_string str =
    output_string (!log_channel) ((get_log_prequel ())^":\t"^str^"\n")

---logging.mli
set_log_chan : in_channel -> unit
log_string : string -> unit 
```

我想你明白这里的意思。单例是隐式的，对吗？确实没有像在对象中那样的实例化——但这有点像你在单例中想要的。您只需开始在其他文件中使用它，例如`Logging.log_string "parsed file "^file_name^" successfully."`，等，任何地方，并且您始终使用相同的频道。

使用函子，您可以组合模块以增加多样性。就像指定一个模块/函数来生成输出的前传等等。

# mysql - mysql主/从故障转移

> ID：535484
> 
> 赞同：0
> 
> 时间：2009-02-11T04:56:22.397
> 
> 标签：mysql, high-availability, failover

是否有任何产品可以使 mysql 主/从故障转移过程更容易？可以自动发生的事情，而不是手动修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:40:28.533

[... 稍后 ... ;）

你说什么“更容易”？MySQL 有很多解决方案：

*   MySQL 集群，带有 NDB 引擎（高可用性解决方案，但有一些限制：没有外键）
*   MySQL Master/Slave 拥有自己的复制系统
*   MySQL 通过 DRBD 和心跳复制。

关于这个主题有很多材料： [对数据库的故障转移支持](https://stackoverflow.com/questions/6304968/failover-support-for-a-db)，甚至更多：[MySQL 的扩展解决方案（复制、集群）](https://stackoverflow.com/questions/189903/scaling-solutions-for-mysql-replication-clustering)

MySQL 集群是一个开箱即用的解决方案，但复制不是很难设置。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T05:14:17.050

实际的故障转移位可以通过 heartbeat 进行管理（Linux HA 项目的一部分； http: [//linux-ha.org/](http://linux-ha.org/)），我听说 MySQL Enterprise 抓取包中有一些工具可以帮助管理复制，虽然我自己从来没有用过。

# xcode - 用 tar 覆盖文件

> ID：535508
> 
> 赞同：0
> 
> 时间：2009-02-11T05:17:46.510
> 
> 标签：xcode, tar, overwrite

我试图 tar 一个文件并最终覆盖它。我在 Xcode 中工作，我想知道是否有办法让我恢复被覆盖的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-11T05:21:14.130

除非您将其保存在其他地方，否则不太可能。对不起

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T05:34:50.137

是的，从你的备份中，当然，你经常经常做，对吧？

再想一想，你可能没有，所以你很不走运。

我将此视为改变您的备份做法的机会:-)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T06:06:29.980

如果您的意思是您在 tar 存档中添加了两次相同的文件，那么您很可能可以恢复它：tar 永远不会覆盖，它会附加。并且在提取它时提取可能导致覆盖的两者。

如果您的意思是您从 tar 存档中提取了一个文件并在此过程中覆盖了另一个文件，那么不幸的是，您唯一的机会就是备份。也许 Time Machine 在您的 Mac 上运行，或者您正在使用 SCM 执行开发任务。

# c# - 关闭 .Net winforms 应用程序并删除可执行文件的最佳方法是什么

> ID：535509
> 
> 赞同：2
> 
> 时间：2009-02-11T05:19:11.560
> 
> 标签：c#, .net, winforms, shutdown

我需要关闭我的应用程序，然后删除可执行文件。我通过启动低优先级批处理作业然后立即关闭 exe 来做到这一点。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-11T05:29:53.110

有来自[sysinternals的 PendMoves 和](http://www.sysinternals.com/)[MoveFile](http://technet.microsoft.com/en-us/sysinternals/bb897556.aspx)实用程序。根据文档，您可以使用 movefile 通过指定一个空目标在下次启动时删除文件：

```
movefile your.exe "" 
```

此实用程序通常用于删除顽固的恶意软件，但我不确定它是否会在关闭后立即删除您的应用程序，或者仅在下次重新启动时删除。

该实用程序使用[MoveFileEx API](http://msdn.microsoft.com/en-us/library/aa365240(VS.85).aspx)，因此如果您愿意，可以使用该 API 来实现相同的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-11T05:35:21.727

只要您不在 Windows 95/98/ME 上，MoveFileEx 就可以工作（我希望不是...）。但是，您不能删除您的 exe 所在的文件夹。如果这不是问题，请遵循 Ryan 的建议。

这篇[文章](http://209.85.173.132/search?q=cache:ALWXe59AiI0J:www.catch22.net/tuts/selfdel+.net+deleting+executable&hl=en&ct=clnk&cd=1&gl=us)基本上记录了做你想做的每一种方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T05:37:25.560

只要可执行文件中的任何代码都在内存中，就无法将其删除，但您可以尝试其他一些操作：

*   告诉[`MoveFileEx`](http://msdn.microsoft.com/en-us/library/aa365240(VS.85).aspx)将删除推迟到下次重新启动是安装/卸载代码通常使用的一种方法。
*   使用[任务计划程序](http://msdn.microsoft.com/en-us/library/aa383614(VS.85).aspx)安排`cmd.exe /c del c:\path\myprog.exe`从现在开始运行 60 秒，然后立即退出，以便有机会成功。
*   批处理文件运行良好，实际上可以删除自己，因为批处理文件在行之间关闭。

如果您使用的是批处理文件方法，请考虑以下内容：

```
:loop
ping -n 6 127.0.0.1
del /y %1
if exist %1 goto :loop
del byebye.bat 
```

这里的`ping`命令被滥用来插入延迟，因为`sleep`它不是 Windows 上的标准命令。该循环使批处理能够等待它的时间，直到它可以实际删除可执行文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T05:36:20.710

可能的方法

1.  启动脚本以在退出时删除应用程序，尽管这可能会留下脚本

2.  下次机器重新启动时使用 RunOnce 键删除可执行文件，我认为它也适用于登录和注销，但我不确定。

# computer-science - “以编程方式”做/确定某事是什么意思？

> ID：535510
> 
> 赞同：44
> 
> 时间：2009-02-11T05:19:12.607
> 
> 标签：computer-science, terminology

以编程方式。（以编程方式替代）

我从未使用过它，但我经常在问题中看到它，即“如何以编程方式确定 [在此处插入任务]”。Firefox 立即告诉我这两个词都不是真实的（至少，它无法识别它们）。除了在这里，我也从未见过它们在任何地方使用过。

1）“以编程方式”做/确定某事是什么意思？

2）为什么这么多人问如何“以编程方式”做/确定某事？难道不是*假设*，如果您在编程帮助板上询问如何做某事，您是在询问如何“以编程方式”做这件事吗？

3）为什么我从未在其他任何地方看到“以编程方式”这个词？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-02-11T05:22:50.023

以编程方式做某事通常意味着您可以使用源代码来完成它，而不是通过直接的用户交互或宏。

例如，考虑调整列大小以适应 Excel 的问题。

您可以通过在列之间双击来手动执行此操作，但这需要用户交互。

您可以使用 excel 宏记录器，但这相当复杂。

或者，您可以使用 VBA 编写可以做到这一点的代码。

我怀疑它实际上在字典中。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-02-11T05:22:29.290

以编程[方式是一个真正的词](http://dictionary.reference.com/browse/programmatically)。来自另一本随机词典：[Compact OED online](http://www.askoxford.com/concise_oed/programmatic?view=uk)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-02-11T07:00:15.547

在 .NET 中，“以编程方式”通常意味着在代码中而不是在模板、标记、配置或 xml 中做某事。

例如，在 ASP.NET 页面中，您可以在 ASPX 标记中添加一个文本框：

```
<asp:TextBox runat="server" /> 
```

或者您可以在 ASPX.cs 代码隐藏中以编程方式添加控件：

```
this.Controls.Add(new TextBox()); 
```

同样，您可以通过编辑 App.config 文件中的 xml 手动更改配置，也可以编写代码以编程方式修改配置。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-02-11T05:48:48.167

更多定义网址：

[http://www.wordwebonline.com/en/PROGRAMMATICALLY](http://www.wordwebonline.com/en/PROGRAMMATICALLY)

[http://www.merriam-webster.com/dictionary/programmatically](http://www.merriam-webster.com/dictionary/programmatically)

[http://www.thefreedictionary.com/programmatically](http://www.thefreedictionary.com/programmatically)

[http://encyclopedia2.thefreedictionary.com/programmatically](http://encyclopedia2.thefreedictionary.com/programmatically)

[http://dictionary.zdnet.com/definition/programmatically.html](http://dictionary.zdnet.com/definition/programmatically.html) **[不活跃]**

[http://en.wiktionary.org/wiki/programmatically](http://en.wiktionary.org/wiki/programmatically)

[http://www.pcmag.com/encyclopedia_term/0,2542,t=programmatically&i=49823,00.asp](http://www.pcmag.com/encyclopedia_term/0,2542,t=programmatically&i=49823,00.asp)

[http://dictionary.reference.com/browse/programmatically](http://dictionary.reference.com/browse/programmatically)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-02-11T07:04:06.193

[http://www.merriam-webster.com/dictionary/programmatically](http://www.merriam-webster.com/dictionary/programmatically)

“程序化”是副词。它是对动词的描述。在这种情况下，这意味着某些事情将由程序完成，而不是由手动的人工操作完成。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-02-11T05:28:15.923

1.  执行执行它的代码。暗示以前编写过代码。
2.  可能在大多数情况下，这对人类来说是相对容易做的事情，挑战在于实现自动化。您描述的假设可能适用，也可能不适用。
3.  我不知道。我在很多情况下都见过很多次。顺便说一句，我断然否认单词必须在某人的列表中某处才能成为“真实单词”的想法，尤其是当它是从众所周知的根源明确构造时，例如在“程序化”的情况下。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-11T06:14:07.077

**1）“以编程方式”做/确定某事是什么意思？**

我从你的第二个问题中假设你已经知道了这个问题的答案；）。*

**2）为什么这么多人问如何“以编程方式”做/确定某事？不是假设，如果您在编程帮助板上询问如何做某事，那么您是在询问如何“以编程方式”完成它？**

是的，但使用这个词并没有害处！

**3）为什么我从未在其他任何地方看到“以编程方式”这个词？**

你还不够认真！[http://www.google.com/search?q=programmatically](http://www.google.com/search?q=programmatically)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-11T05:22:13.240

1.  用程序/代码来完成它。示例：以编程方式吃三明治意味着您编写了一个吃三明治的程序。
2.  我同意。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-11T05:23:23.237

我认为人们（包括我自己）使用术语“以编程方式”来指代在源代码（例如 C#）中执行的功能，与以声明方式完成的功能（例如 XAML）不同。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-02-11T06:53:58.137

1.  以编程方式做某事是通过执行程序代码来做某事
2.  不要假设。它使 U 和 ME 成为 A** :) 事实是，许多人可以提出与编程无关的问题（例如“我如何在 linux 中覆盖只读文件？”）
3.  通常情况下，事情是否以编程方式完成是很清楚的。因此，这个词经常是多余的，没有被使用。在这里，人们希望确保他们被理解，并且他们的问题没有以错误的方式得到回答（“我如何以编程方式覆盖 linux 中的只读文件？”将引发与 2 中的答案不同的答案.)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-02-11T08:15:17.270

最好使用以下代码来描述我“以编程方式”或有时“以程序方式”使用的方式：

```
int[] arr = new int[] { 1, 2, 3, 4, 5 }; 
```

以编程方式做同样的事情是：

```
int[] arr = new int[5];
for (int i = 1; i < 6; i++)
  arr[i] = i + 1; 
```

现在虽然是一个非常有限的示例，但如果数组有数百或数千个元素，您更愿意键入什么。在现实世界的情况下，一次最好使用哪个通常有利有弊，但是对于复杂的操作，通常如果“以编程方式”完成事情会更有效。

也许一个更好的例子是 的值![alt 圆周率](https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Pi-symbol.svg/10px-Pi-symbol.svg.png)。![alt 圆周率](https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Pi-symbol.svg/10px-Pi-symbol.svg.png)您可以简单地输入数字 3.141592653589793238，但如果您需要精确到小数点后 100 位，则很难输入。您将改为使用一个函数，可能类似于![替代功能](https://upload.wikimedia.org/math/7/3/c/73c17e25d41aa13c7aee401025a807a8.png).

** 参考维基百科[http://en.wikipedia.org/wiki/Pi](http://en.wikipedia.org/wiki/Pi) *

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-08-17T19:00:04.013

在 iPhone 开发的情况下，以编程方式基本上意味着不使用 Interface Builder。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2010-04-21T22:39:25.550

非程序化：

[如何配置 WCF 以通过 Internet 使用 x509 证书？](https://stackoverflow.com/questions/335719/how-can-i-configure-wcf-to-use-x509-certificates-over-the-internet)

编程： [以编程方式和全局添加自定义 WCF 客户端端点行为扩展](https://stackoverflow.com/questions/1195022/programmatically-and-globally-adding-a-custom-wcf-client-endpoint-behavior-extens)

基本上相同的问题，回答不同的方式，各有利弊。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-02-11T05:46:40.607

正如其他人所说，这意味着以代码的形式为特定问题寻求解决方案。这在现代时代尤其重要，在这个时代，GUI 无处不在，操作系统很大，功能无数。以人类的身份手动查找特定信息或执行特定操作可能非常容易，但是作为代码如何执行此操作不太明显，需要研究。

例如，考虑如何删除文件并将其移动到 Windows 中的回收站。手动，这很简单，在资源管理器中选择文件并点击删除。或者将文件拖到回收站。在代码中，执行此操作的方式并不直观。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-02-11T06:10:24.467

开发人员通常会尽可能准确地陈述问题。他们试图陈述环境、语言，以及他们已经知道的任何其他内容。问题越准确，答案就越准确。但是当他们不能说明任何事情时（比如他们只想知道是否有 API 调用来做某事），他们只会询问如何以编程方式进行。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-02-11T08:56:15.503

我主要在上下文中使用这个词[davogenes](https://stackoverflow.com/questions/535510/what-does-it-mean-to-do-determine-something-programmatically-and-why-is-the-term/535719#535719)和[ash](https://stackoverflow.com/questions/535510/what-does-it-mean-to-do-determine-something-programmatically-and-why-is-the-term/535862#535862)解释它。

但是我想补充一点，在这种情况下，同义词将是“动态的”，因为您可以在运行时而不是在设计时添加控制元素。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-02-11T09:23:44.703

对我来说，这是在设计器中工作或在代码中工作（运行时）之间的区别。

您可以在设计模式下做很多事情，将数据源设置为数据网格并布局列和设置颜色以及许多其他事情，而无需执行任何代码。如果我想知道如何在代码中执行它而不是在设计模式中设置它，我会问如何“以编程方式”执行它。

我的 5 美分。

# .net - 在 IEnumerable 中按长度排序项目 ?

> ID：535531
> 
> 赞同：0
> 
> 时间：2009-02-11T05:28:44.033
> 
> 标签：.net, linq

我有一个`IEnumerable<T>`集合，其中包含 Name 和 FullName 作为项目。里面有大约 5000 件物品。

我想显示按长度排序的全名，因此首先显示最长的名称到最短的名称。我怎样才能以最优化的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-11T07:05:17.547

这个答案实际上与spoon16 的答案相同，但没有使用查询表达式。我通常不会对单个操作使用查询表达式（例如，*只是*一个排序，或者*只是*一个过滤器，或者*只是*一个投影）。我认为看到替代方案会很好:)

```
var orderedList = nameList.OrderByDescending(x => x.FullName.Length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T05:31:46.133

了解更多关于您的数据结构究竟是什么样子的信息会有所帮助。但我认为这个 LINQ 查询应该可以帮助您入门。

```
var orderedItems = from name in nameList
                   order by name.FullName.Length descending
                   select name; 
```

这是一整套[LINQ Order By 示例](http://msdn.microsoft.com/en-us/vcsharp/aa336756.aspx)。

# php - Wordpress host IP changed

> ID：535534
> 
> 赞同：36
> 
> 时间：2009-02-11T05:30:32.923
> 
> 标签：php, wordpress

I've got a Wordpress site on our home intranet that has run into trouble now that the IP address has changed - The index page loads, but not the CSS and I can't log in to the site administration panel.

Unfortunately I am a bit behind on backups. Is there a way to get Wordpress to refer to the new IP address?

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2009-02-12T21:34:22.317

You have two places to update this (well three, but we'll stick with the two).

***If*** you can still log into your admin section, type the following for your URI /wp-admin/options.php - so for example, if your site is [http://localhost](http://localhost) then your full URL will be [http://localhost/wp-admin/options.php](http://localhost/wp-admin/options.php). Once you've logged into your site you should see two fields (well you'll see a lot of fields), but you'll want to look for the two with URL's in them - the Site URL and the Blog URL (in WP 2.7 the fields are labeled "home" and "siteurl", not sure on the other versions).

Or, you can log into MySQL database and run the following.

```
Select * from wp_options where option_name IN('siteurl','home'); 
```

I just ran this today on one of my installs. If you're option_value is set to your localhost - you can then run the following:

```
update wp_options set option_value='http://www.yourblogname.com' where option_name = 'siteurl';
update wp_options set option_value='http://www.yourblogname.com' where option_name = 'home'; 
```

This should update your table structure.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-02-12T17:04:38.033

You have to change the 'home' and 'siteurl' in the settings. Since you cannot open the admin side of wordpress, open the database in phpMyAdmin(or something similar).

The options can be found in the 'wp_options' table(wp_ prefix might be different). Find the necessary setting using this query...

```
SELECT * FROM `wp_options` WHERE `option_name` IN ('siteurl', 'home') 
```

Change the values of both the options to the new IP.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2011-04-12T18:29:27.207

To temporarily be able to login, use this code in your wp-config.php:

```
define('WP_HOME','http://example.com');
define('WP_SITEURL','http://example.com'); 
```

or you can add this to your theme's functions.php:

```
update_option('siteurl','http://example.com/');
update_option('home','http://example.com/'); 
```

**Warning**: Updating the SQL database will be required in order for installed plugins to use the new URL/hostname. So if you use plugins modifying the database is required.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T05:43:15.513

I ran into this problem once. Loginto your DB and check your wp_options (if wp_ is your table prefix) and then search for all records and replace your old ip with new.

Possible columns to have the old ip would be 'permalinks' etc.. Sorry I cant see my blog's table structure now otherwise I would have posted the correct column name.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-11T06:02:29.913

I ran into this problem before when I was migrating a site from test to production. Conveniently, MySQL has a string replace function.

Try something like this:

```
UPDATE wp_posts SET post_content = REPLACE(post_content,"http://localhost","http://www.myblog.com") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-29T12:44:53.830

Be careful for the link: https or http !!

in the command line:

```
mysql -u root -p 
```

in the SQL, set new IP for xxxx

> mysql> use wordpress;
> 
> mysql> select * from wp_options where option_id=1;
> 
> mysql> update wp_options set option_value="http://xxxx" where option_id=1; exit

Restart server

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-10T20:48:49.473

Possibly [WordPress.org's coverage of this issue](https://codex.wordpress.org/Changing_The_Site_URL) was not available at the time the other answers here were written, but as of now I find it more complete and easier to follow.

In my case, the method of modifying `wp-config.php` was only partially successful. The *Relocate method* described in the above web page ultimately succeeded.

Here is a synopsis of [WordPress.org's coverage](https://codex.wordpress.org/Changing_The_Site_URL):

> ```
> 1 Changing the Site URL
>     1.1 Edit wp-config.php
>     1.2 Edit functions.php
>     1.3 Relocate method
>         1.3.1 Code function
>         1.3.2 Steps
>     1.4 Changing the URL directly in the database
> 2 Moving Sites
>     2.1 Altering Table Prefixes
>     2.2 Changing Template Files
>     2.3 Changing the Config file
>     2.4 Verify the Profile
>     2.5 Changing the .htaccess file
>     2.6 Additional items of note
>         2.6.1 Important GUID Note
>     2.7 Multi-site notes
>     2.8 wp-cli 
> ```

# asp.net-mvc - ASP.NET MVC RC 刷新文档的最佳站点

> ID：535535
> 
> 赞同：2
> 
> 时间：2009-02-11T05:30:57.803
> 
> 标签：asp.net-mvc

我试图弄清楚如何使用 ASP.NET MVC，似乎学习它的唯一方法是通过阅读博客文章。Scott Gu 和 Phil Haak 是我想到的两个。我遇到的问题是他们编写的很多文档在当时都是相关的，并且在最新版本中不起作用。

有没有地方只有 RC 的文档？查找 MVC RC 文档的最佳位置是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-11T05:41:13.490

也许这有帮助：[http ://stephenwalther.com/blog/archive/2009/01/27/a-guide-to-learning-asp.net-mvc-release-candidate-1.aspx](http://stephenwalther.com/blog/archive/2009/01/27/a-guide-to-learning-asp.net-mvc-release-candidate-1.aspx)

# c# - XNA 是否提供音频输入（线路输入）？

> ID：535547
> 
> 赞同：2
> 
> 时间：2009-02-11T05:37:02.690
> 
> 标签：c#, xna

XNA 是否提供从线路输入的音频输入方式？我查看了[MSDNA 网站，但在音频](http://msdn.microsoft.com/en-us/library/bb195038.aspx)*输入*上找不到任何内容。如果确实有可能，那么一段代码或一个教程网站会很棒。

编辑：我需要从音频线路中进行缓冲读取。我对实现不太感兴趣，而是它是否具有低延迟。

此外，开发将实施到仅限 PC 的游戏中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-11T06:25:24.460

我认为所有的声音文件都需要通过 XACT 编译才能在 XNA 中使用。

因此，要么您掌握 DirectSound 并查看以下示例：\Samples\Managed\DirectSound\CaptureSound

...或者您可以与 winmm.dll 互操作。这家伙做了一个小例子来说明如何做到这一点：http: [//www.codeproject.com/KB/audio-video/cswavrec.aspx](http://www.codeproject.com/KB/audio-video/cswavrec.aspx)

这家伙写了更多关于枚举所有录音设备的文章：http: [//www.codeproject.com/KB/cs/Enum_Recording_Devices.aspx](http://www.codeproject.com/KB/cs/Enum_Recording_Devices.aspx)

希望能帮助到你！

编辑：

我不确定你想用你的音频流做什么，所以本教程可能也很有趣：http: [//nyxtom.vox.com/library/post/recording-audio-in-c.html](http://nyxtom.vox.com/library/post/recording-audio-in-c.html)

编辑2：他说的话（在评论中）

```
 |
        |
        V 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-11T20:54:59.470

要回答您的问题，不，您不能通过 XNA API 访问音频线路输入。您必须查看其他一些库，例如[Port Audio](http://code.google.com/p/portaudiosharp/)，它可以让您访问此类功能。但是，您将被限制在 Windows 上运行（即没有 xbox 或 zune）。

*免责声明：不确定端口音频是否特别具有此功能，因为我刚刚通过谷歌快速找到了它。只是试图说明您必须使用其他一些 API。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-12T07:47:21.163

如果您正在考虑做一个仅限 Windows 的项目，您当然可以捕获来自 XNA 框架外部的代码的音频并用相同的方式播放。由于 XNA 内容管理器的工作方式，您将无法使用常规播放方法，因为内容管理器在编译时将所有内容转换为 .xnb 文件并从那里读取它们。不过，没有什么能阻止您使用标准 Windows API 调用进行游戏。那时你不会真的有一个 XNA 项目，但我认为区别并不那么重要，因为无论如何你都不希望与其他平台兼容。

# diff - 是否有任何开源二进制文件不同？

> ID：535564
> 
> 赞同：4
> 
> 时间：2009-02-11T05:49:35.373
> 
> 标签：diff

有时，我需要对文件进行二进制比较，但是有没有开源工具可以做到这一点？

[UltraCompare](http://www.ultraedit.com/products/ultracompare.html)可以，但它是一种商业产品。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-11T05:57:37.850

[我在搜索中找到了一个名为VBinDiff](http://www.cjmweb.net/vbindiff/)的开源产品，但我没有任何直接的经验。它似乎是跨平台的（Linux 和 Windows），并且包含二进制文件和源代码包。祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-11T05:58:13.370

[bsdiff](http://www.freebsd.org/cgi/man.cgi?query=bsdiff&sektion=1&manpath=FreeBSD%205.5-RELEASE)和[xdelta](https://en.wikipedia.org/wiki/Xdelta)是立即浮现在脑海中的两个。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-11T06:03:35.480

GNU [diffutils](http://www.gnu.org/software/diffutils/)带有一个名为的程序`cmp`，它会告诉您两个二进制文件不同的第一个偏移量。不幸的是，它的作用远不止于此。

或者，您可以对每个文件进行 hexdump 并将其通过管道传输到您最喜欢的文本差异工具中：

```
diff <(hexdump -v -e '1/1 "%02x\n"' binfile1) <(hexdump -v '1/1 "%02x\n"' binfile2) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-11T05:55:29.150

颠覆*必须*知道如何。它支持二进制对象的增量更改记录。

最坏的情况，您可以查看他们的源代码库...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T06:02:04.843

标准 GNU [diff](https://en.wikipedia.org/wiki/Diff)显示两个文件是否不同。您可能希望查看[xdelta](https://en.wikipedia.org/wiki/Xdelta)以跟踪更改（可能是 SCM 工具使用的）。

我想，要查看文件中的更改，您可以对这两个文件进行[hexdump](http://linux.die.net/man/1/hexdump)并进行比较。

# powershell - powershell 交换：if then 语句的语法？

> ID：535568
> 
> 赞同：0
> 
> 时间：2009-02-11T05:50:33.310
> 
> 标签：powershell, exchange-server

在我的脚本中，我试图测试真假。这个语法不正确吗？

```
$pdaout = ""
if ($pda.ActiveSyncEnabled.tostring() -like "True") {$pdaout = "TRUE"}
if ($pda.ActiveSyncEnabled.tostring() -like "False") {$pdaout = "-"}

write-host $pdaout 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-11T08:16:39.980

似乎直接检查布尔值而不是使用 ToString() 会更好：

```
$pdaout = ""

if ($pda.ActiveSyncEnabled -eq $True) { $pdaout = "TRUE" }
else { $pdaout = "-" }

write-host $pdaout 
```

[这是来自Windows Powershell 团队](http://blogs.msdn.com/powershell/archive/2006/12/24/boolean-values-and-operators.aspx)的博客文章：布尔值和运算符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T08:14:01.500

应该是，除了可能是`tostring()`函数（用于`toString()`确保区分大小写没有问题）

[**`elseif`**](http://www.microsoft.com/technet/scriptcenter/topics/winpsh/convert/ifthen.mspx)另外，如果第一个测试成功，您可能希望避免进行第二次测试：

```
if ($pda.ActiveSyncEnabled.toString() -like "True") {$pdaout = "TRUE"}
elseif ($pda.ActiveSyncEnabled.toString() -like "False") {$pdaout = "-"} 
```

# c# - 如何泛化我的字典 等效扩展方法？

> ID：535572
> 
> 赞同：0
> 
> 时间：2009-02-11T05:51:27.630
> 
> 标签：c#, generics

为两个字典创建通用等价函数的最佳方法是什么，它们的键和值都是值类型？

现在我有一个字典`<`字符串 bool>，并创建了一个扩展方法（我认为）用于测试两个字典`<`字符串 bool> 之间的等价性。

我想让它更通用。我的第一个想法是让它像这样：

```
public static bool EquivalentTo<K, V>(this IDictionary<K, V> lhs, 
                                           IDictionary<K, V> rhs) 
        where K: struct 
        where V: struct
    { } 
```

但是，这不起作用，因为字符串是不可变的引用类型，而不是值类型。

那么，如何对字典`<`字符串 bool> 的原始等效测试进行泛型化呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T06:31:20.763

为什么要首先限制`K`并`V`成为值类型？我建议你只是删除约束。不过，关于字典有一些“有趣”的事情——两个字典碰巧有相同的条目，但使用不同的相等比较器等效吗？`IDictionary<,>`不幸的是，没有相等比较器属性，因此您可能需要提供等价方法。您需要考虑在这里等价的含义。

例如，两个具有不区分大小写的相等比较器的字典可能有 { "FOO", true } 和 { "foo", true } - 在某种程度上它们是等价的，但在某种程度上它们不是。这取决于您要使用等价关系的目的。

编辑：这是一个在大多数情况下应该没问题的示例，但如果两个字典以不同方式处理键，则可能会产生奇怪的结果：

```
public static bool EquivalentTo<TKey, TValue>(
     this IDictionary<TKey, TValue> first,
     IDictionary<TKey, TValue> second)
{
     return first.EquivalentTo(second, EqualityComparer<TValue>.Default);
}

public static bool EquivalentTo<TKey, TValue>(
     this IDictionary<TKey, TValue> first,
     IDictionary<TKey, TValue> second,
     IEqualityComparer<TValue> valueComparer)
{
    if (first == second)
    {
        return true;
    }
    if (first == null || second == null)
    {
        return false;
    }
    if (first.Count != second.Count)
    {
        return false;
    }
    foreach (var firstKeyValue in first)
    {
        TValue secondValue;
        if (!second.TryGetValue(firstKeyValue.Key, out secondValue) ||
            !valueComparer.Equals(firstKeyValue.Value, secondValue))
        {
            return false;
        }
    }
    return true;
} 
```

未经测试，但如果它符合您的要求，请告诉我...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T06:12:15.757

我想不出一种方法可以在单个构造中完全满足您的要求。您可以有显式使用字符串而不是类型的模板参数的重载，因此您最终会得到 3 个重载：

```
public static bool EquivalentTo<string, V>(this IDictionary<string, V> lhs, 
                                                IDictionary<string, V> rhs) 
    where V: struct
{ }
public static bool EquivalentTo<K, string>(this IDictionary<K, string> lhs, 
                                                IDictionary<K, string> rhs) 
    where K: struct
{ }
public static bool EquivalentTo<K, V>(this IDictionary<K, V> lhs, 
                                           IDictionary<K, V> rhs) 
    where K: struct 
    where V: struct
{ } 
```

我很确定这不是你要找的，但我没有更好的主意。

# c# - 类型初始化程序异常 - C#

> ID：535590
> 
> 赞同：0
> 
> 时间：2009-02-11T06:02:23.377
> 
> 标签：c#, asp.net, .net-2.0

```
namespace X{  public static class URLs
{
    public static TabController tabIdLookUp = new TabController();
    public static string DASHBOARD_AUDIT_PAGE = tabIdLookUp.GetTabByName("View My Safety", 2).TabID.ToString();
    public static string URL_GENERATE_WITH_MID(String TabName, int PortalId){        {
        return tabIdLookUp.GetTabByName(TabName, PortalId).TabID.ToString();
    }
}} 
```

...在我的用户控件中，我这样做：

```
Response.Redirect("/" + X.URLs.URL_GENERATE_WITH_MID("test", 1)); // this causes the error 
```

错误是：“X.URLs”的类型初始化程序引发了异常。---> System.NullReferenceException：对象引用未设置为对象的实例。在 X.URLs..cctor()

无法调试，因为它可以在我的本地机器上运行，但会在服务器上引发该错误。

有任何想法吗？

PS问题最终变成了一个微不足道的 NUllReferenceException - GetTabByName() 正在返回 NULL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-11T06:20:32.523

与其让“DASHBOARD AUDIT PAGE”的初始化程序直接引用 tabIdLookUp，为什么不在静态构造函数中初始化这两个变量，看看是否能修复错误？

```
namespace X{  public static class URLs
{
    public static TabController tabIdLookUp;
    public static string DASHBOARD_AUDIT_PAGE;
    public static string URL_GENERATE_WITH_MID(String TabName, int PortalId){        {
        return tabIdLookUp.GetTabByName(TabName, PortalId).TabID.ToString();
    }

    static URLs() {
        tabIdLookUp = new TabController();
        DASHBOARD_AUDIT_PAGE = tabIdLookUp.GetTabByName("View My Safety", 2).TabID.ToString();
    }
}} 
```

Another problem you could be having is if GetTabByName is returning a NULL reference, you're not protecting against that and just referencing the .TabID property. You should probably ensure that you're getting back a valid reference before referring to the property.

# c++ - 有什么与 c++/游戏开发者交流的好地方吗？

> ID：535592
> 
> 赞同：6
> 
> 时间：2009-02-11T06:03:26.417
> 
> 标签：c++, communication

我是一名在韩国工作的游戏程序员。
我最近开始使用 Stackoverflow，发现它对我有很大帮助。
此外，我认为与其他开发人员交流是学习和提高自己的好方法。
Stackoverflow 是我所知道的唯一可以交流的网站（尤其是英语）。

还有其他与游戏开发人员（或 C++ 程序员、网络程序员）交流（提问/回答/交谈）的好地方吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-11T06:04:32.653

[Gamedev.net](http://www.gamedev.net)拥有庞大的游戏开发者社区，以及与游戏编程相关的大量优秀文章和资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-11T06:08:17.450

[Beyond3D.com](http://www.beyond3d.com/)是游戏开发者和游戏爱好者经常光顾的另一个好网站（和[论坛）。](http://forum.beyond3d.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-11T06:33:20.353

人们常常因为 IRC 的自负而诋毁它，更不用说对促进垃圾邮件恐怖主义的异教徒进行的持续战争了。尽管有这些挫折，但它通常是一个很好的信息来源。通常，如果我带着学习的热情和对建议的开放态度去那里，我通常会发现一个人坐在家里很无聊，愿意花时间教别人他们热爱的事情。

我建议登录 irc.freenode.net 并寻找与游戏相关的频道。如果您找不到一个（这是一个相当长的列表），请跳转到 C++ 频道并询问任何人是否知道专门针对 C++ 游戏开发的好频道。

但请注意……有时某些频道可能会很容易点击。如果有人对你粗鲁，不要把它当作私人的。

# debugging - 最大的windbg宠物烦恼

> ID：535596
> 
> 赞同：1
> 
> 时间：2009-02-11T06:06:27.890
> 
> 标签：debugging, windbg

与微软的 windbg 调试器有关的最大烦恼是什么？

（注意：如果我忽略未抛光的 UI，我实际上真的很喜欢 windbg。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T06:27:09.543

第一次尝试停靠窗口几乎总是错误的停靠类型，直到：我移动鼠标恰到好处。为什么没有VS2008的对接提示？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T06:10:09.303

当您尝试使用单击拖动选择比其物理窗口宽的行上的文本时的荒谬行为。

我需要复制/粘贴到错误报告中的历史窗口片段通常比物理窗口宽。我已经习惯了三次单击的解决方法，以至于我发现自己试图在其他（表现良好的）应用程序中滥用三次单击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T06:11:14.493

当焦点位于源窗口中时，按键将被忽略。这不像您可以从 windbg 内部编辑源代码。至少有 Alt-1 解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T06:14:27.217

.kdfiles 通过 1394 连接复制新二进制文件的速度非常慢。大型 dll 最多可能需要一分钟。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-03-17T15:03:00.080

无法使用按键从输出窗口切换到命令窗口，我读到“Alt+1”应该可以工作，但并非总是如此，所以我总是不得不使用鼠标。此外，有时它不记得我告诉它不要每次都问我是否要在退出时保存工作区。

# ruby - Ruby 电子邮件检查 (RFC 2822)

> ID：535600
> 
> 赞同：7
> 
> 时间：2009-02-11T06:07:37.450
> 
> 标签：ruby, regex, email

有谁知道 Ruby 中用于验证电子邮件地址是否采用正确的 RFC 2822 电子邮件格式的正则表达式是什么？

我想做的是：

```
string.match(RFC_2822_REGEX) 
```

其中“RFC_2822_REGEX”是验证我的字符串是否为有效 RFC 2882 格式的正则表达式。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-02-07T20:02:54.943

您可以使用[邮件](http://rubygems.org/gems/mail "邮件")gem 根据 RFC2822 解析任何字符串，如下所示：

```
def valid_email( value )
  begin
   return false if value == ''
   parsed = Mail::Address.new( value )
   return parsed.address == value && parsed.local != parsed.address
  rescue Mail::Field::ParseError
    return false
  end
end 
```

这将检查是否提供了电子邮件，即返回`false`空地址并检查该地址是否包含域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-11T06:37:33.183

[http://theshed.hezmatt.org/email-address-validator](http://theshed.hezmatt.org/email-address-validator)

是否基于 RFC2822 规则进行正则表达式验证（它也是一个正则表达式的怪物），它还可以检查域在 DNS 中是否有效（具有 MX 或 A 记录），并进行测试交付以验证域的 MX将接受给定地址的消息。最后两项检查是可选的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T06:13:29.217

试试 [这个：](http://tfletcher.com/lib/)

# c# - 如何防止 DataRow 单元格值被重置？

> ID：535606
> 
> 赞同：0
> 
> 时间：2009-02-11T06:11:03.917
> 
> 标签：c#, ado.net

我们正在为我们的 Web 应用程序创建一个演示模式。我们将通过创建与真实客户相关联的新用户来解决此问题，显示他们的所有数据，但将某些字段过滤为不可识别的（姓名、重要号码等...）

**这里奇怪的部分是数据被正确过滤为我调用第一个函数的标准“显示一个”页面。当我尝试在列表页面上调用第二个时，过滤器不起作用。** 我已经逐步完成了这些函数，似乎在第一个函数中，正在设置值，但是当 foreach 迭代到下一行时，它们被重置回原始值。

List mask 是应该被屏蔽的列名列表，在模型中静态定义。

```
public static void ApplyDemoMask(DataRow row, List<string> mask)
{
    foreach (DataColumn column in row.Table.Columns)
    {
        if (mask.Contains(column.ColumnName))
        {
            if (column.ColumnName == "ClientName")
                row[column] = "Demo Client";
            // More fields follow...
        }
    }
}

public static void ApplyDemoMask(FindResponse response, List<string> mask)
{
    foreach (DataRow row in response.ResultTable.Rows)
        ApplyDemoMask(row, mask);
} 
```

我感谢可以提供的任何帮助。出于某种原因，我对 System.Data 有点愚蠢。

编辑：如果有帮助，当我的调试器落在第二个函数中的“}”上时，row["ClientName"] 应该是"Demo Client"，但是 response.ResultTable.Rows[0]["ClientName"]是“原始客户”。奇怪的！

编辑：绑定到我的网格时，我必须指定列名。一方面，我们正在使用 ASP.NET MVC，并且正在使用我们编写的自定义控件来帮助我们从 ASP.NET 过渡。其次，我们有很多模板字段。不能对这个 Web 应用程序与一个相当大的 WinForms 业务线应用程序共享代码进行任何巨大的、彻底的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-11T06:36:36.133

尝试添加呼叫

```
Row.AcceptChanges() 
```

中的`ForEach`声明之后`ApplyDemoMask`。

您的数据网格似乎绑定到*当前*版本的行，而不是*建议*的版本。*以下是有关数据表*中数据行的行状态的一些参考。

*   [CodeSnip：使用 AcceptChanges 方法更改数据表中的数据](http://aspalliance.com/857)。

*   [如何：检查更改的行](http://msdn.microsoft.com/en-us/library/czb9z269.aspx)。

*   [DataRow..::.BeginEdit 方法](http://msdn.microsoft.com/en-us/library/system.data.datarow.beginedit.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T08:09:51.620

也许您多次删除并添加了相同的记录。所以你正在更新已删除的。将第二种方法更改为：

```
public static void ApplyDemoMask(FindResponse response, List<string> mask)
{
    foreach (DataRow row in response.ResultTable.Rows)
    {
        if (row.RowState != DataRowState.Deleted)
        {
            ApplyDemoMask(row, mask);
        }
    }
} 
```

或者像这样：

```
public static void ApplyDemoMask(FindResponse response, List<string> mask)
{
    response.ResultTable.AcceptChanges();
    foreach (DataRow row in response.ResultTable.Rows)
    {
        ApplyDemoMask(row, mask);
    }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T16:14:36.137

**我是一个心不在焉的白痴！**

查看 ResultTable 的定义...

```
public DataTable ResultTable { get { return this[_resultKey]; } }
public DataTable this[string tableName]
{
    get { return _data.Tables[tableName].DefaultView.ToTable(); }
} 
```

我正在对 DataTable 的 DefaultView.ToTable() 进行更改，当再次返回读取 ResultTable 时它丢失了。我完全忘记了这种行为以及我们内部的 FindResponse 类是如何工作的。这对我们的应用程序很有意义，所以我只是添加了一个类似的 BaseTable 访问器，它不通过 DataTable.DefaultView 过滤，对此进行了更改，一切正常。

感谢您的回复，很抱歉我没有提供足够的信息。

# css - CSS能否根据语言选择不同的默认字体和大小

> ID：535616
> 
> 赞同：38
> 
> 时间：2009-02-11T06:15:04.970
> 
> 标签：css, unicode

我有以下 CSS 片段：

```
INPUT{ font-family: Raavi; font-size: 14px;} 
```

当文本框包含一些像这样的旁遮普语脚本时，效果很好：ਪੰਜਾਬੀ

但是用户可能会输入英文，而我宁愿使用不同大小的 Verdana 字体，因为 Raavi 字体中的英文字母真的很时髦，而且大小是错误的。

所以我的问题可以表述为：

*   基于输入的 CSS 中是否有任何类型的条件字体系列和大小选择
*   无论如何，CSS 是否需要了解输入语言？

所以我可以创建以下 PSEUDO_CSS：

```
INPUT{ EN-font-family: Verdana; EN-font-size: 12px; PA-font-family; Raavi; EN-font-size: 14px;} 
```

或者

```
INPUT.EN{ font-family: Verdana; font-size: 12px;}
INPUT.PA{ font-family: Raavi; font-size: 14px;} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2011-06-26T22:20:15.603

这在 CSS3 中得到了解决，这无助于与旧浏览器的兼容性，但在混合使用不同字体的希腊文和拉丁文文本时，它适用于我。下面是一个来自 CSS 字体模块工作草案的示例：

```
@font-face {
    font-family: BBCBengali;
    src: url(fonts/BBCBengali.ttf) format("opentype");
    unicode-range: U+00-FF, U+980-9FF;
} 
```

该`unicode-range`位是魔术键：它告诉浏览器仅对这个特定的 Unicode 字符块使用这个 font-face 语句。如果浏览器找到该范围内的字符，则使用该字体；对于超出该范围的字符，它会按照通常的默认模式回退到下一个最具体的 CSS 语句。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-02-11T06:33:01.570

```
input { font-family: Verdana, Raavi, sans-serif; font-size: 14px;} 
```

这*应该*适用于您的目的：

*   如果文本是英文，则两种字体都应包含字形，首选 Verdana
*   如果文本是旁遮普语，Verdana 不应该包含字形，所以浏览器应该回退到 Raavi

如果所有浏览器都能正常运行，我不肯定，但这是它们根据 CSS 规范应该做的事情。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-02-11T06:21:42.800

一个纯 CSS 解决方案可能很简单：

```
input[lang=en] {
  font-family:Verdana;
  font-size:12px;
}

input[lang=pa] {
  font-family:Raavi;
  font-size:14px;
} 
```

但是设置`lang`输入元素的属性仍然取决于您。

不幸的是，与大多数*花哨*的CSS 功能一样，[属性选择器](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)并非 100% 在当今的浏览器阵列中工作。在我看来，最好的选择是为每种语言使用一个类并将其分配给输入元素。

更新：

根据您的要求，这里有一个使用 vanilla JavaScript 的简单方法示例。肯定会有改进，但这“有效”。

```
<style type="text/css">
  .lang-en {
    font-family:Verdana;
    font-size:12px;
  }

  .lang-pa {
    font-family:Raavi;
    font-size:14px;
  }
</style>

<form>
  <input type="text" onkeyup="assignLanguage(this);" />
</form>

<script type="text/javascript">
  function assignLanguage(inputElement) {
    var firstGlyph = inputElement.value.charCodeAt(0);

    if((firstGlyph >= 65 && firstGlyph <= 90) || (firstGlyph >= 97 && firstGlyph <= 122)) {
      inputElement.setAttribute('lang', 'en');
      inputElement.setAttribute('xml:lang', 'en');
      inputElement.setAttribute('class', 'lang-en');
    } else {
      inputElement.setAttribute('lang', 'pa');
      inputElement.setAttribute('xml:lang', 'pa');
      inputElement.setAttribute('class', 'lang-pa');
    }
  }
</script> 
```

此示例在输入字符*后*触发。然后它检查它是否落在被认为是“英语”的范围之间，并相应地分配属性。它设置`lang`、`xml:lang`和`class`属性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-11T09:36:19.477

在维护多语言网站时，通常的做法是为每种语言使用单独的 CSS 文件。这是可取的，因为您需要调整的不仅仅是字体。您经常需要调整间距以匹配语言中字符串的长度。此外，您可能需要调整页面的一些基本格式，以使其对语言用户更自然。

强有力的答案是国际化，而不是仅仅满足于不同的字体，因为最终你会发现字体选择是不够的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-25T09:18:24.250

在您的 html 标记中，您具有该 lang 属性。（只是**lang='en'**或**lang='en-EN'**）

我们可以在 CSS 中使用它。

如果我们想为不同语言的 p 标签提供特定的 CSS，

```
p:lang(en-EN){
} 
```

我们需要添加的相应样式。

这是我们可以为不同语言提供特定 css 的方式。

例子

```
html{font-family: Raavi; font-size: 14px;}
html:lang(en-EN){font-family: Verdana; font-size: 12px;} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-11T06:26:05.067

CSS如何知道输入语言？

恐怕唯一的解决方案是找到一个 unicode 字体，这两种字体看起来都很漂亮。如果您的远程阅读器没有安装它，这远非完美。也许 Arial Unicode MS。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-11T09:02:02.650

正如迈尔斯所说，目前唯一可靠的解决方案是按所需顺序列出字体。

希望 Zack 指出的（正确）解决方案可能会被更多浏览器正确支持。

但即便如此，您也有责任用适当的 lang 属性标记各个部分。

没有什么可以可靠地检测任何文本的语言。

# c# - 访问 Web 服务的模式

> ID：535620
> 
> 赞同：0
> 
> 时间：2009-02-11T06:17:14.840
> 
> 标签：c#, web-services, design-patterns

我需要访问一个 Web-svc，运行一堆查询并将数据保存到存储中作为分析的一部分。除此之外，还有一个网站可以查询数据存储并显示这些数据。

我们每个月都会添加这样的功能。如何减少编写的样板代码量。

1.  添加 web svc 引用
2.  在提供者层包装方法以处理异常
3.  准备请求
4.  发送请求
5.  在本地存储数据。
6.  通过 aspx 检索和显示数据。

这是一种痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T06:42:46.197

我发现有两件事对减少场景的繁琐编码很有用
- [WCF 业务线适配器 SDK](http://www.microsoft.com/biztalk/technologies/wcflobadaptersdk.mspx)：这为构建 WCF 适配器（基本上就像 BizTalk 适配器）提供了一个非常强大的基础。第一次有点难，但后来添加它会好得多。
- [p&p Web Service Factory](http://www.codeplex.com/servicefactory)：这对数据库非常有用，特别是因为它提供了一些很棒的向导来进行自动生成。并不是说你不能用它来做其他事情。

# shell - wget 错误会破坏 shell 脚本 - 如何防止这种情况发生？

> ID：535623
> 
> 赞同：0
> 
> 时间：2009-02-11T06:20:09.607
> 
> 标签：shell, error-handling, wget

我有一个巨大的文件，其中包含许多指向要下载的各种类型文件的链接。每一行都是一个下载命令，例如：

wget 'URL1'

wget 'URL2'

...

有成千上万的。

不幸的是，有些 URL 看起来真的很难看，例如： [http](http://www.cepa.org.gh/archives/research-working-papers/WTO4%20(1)-charles.doc) ://www.cepa.org.gh/archives/research-working-papers/WTO4%20 (1)-charles.doc 它在浏览器中打开正常，但令人困惑wget。

我收到一个错误：

./tasks001.sh：第 35 行：意外标记“1”附近的语法错误

./tasks001.sh：第 35 行：`wget' [http://www.cepa.org.gh/archives/research-working-papers/WTO4%20(1)-charles.doc](http://www.cepa.org.gh/archives/research-working-papers/WTO4%20(1)-charles.doc) ''

我已经尝试过使用 URL 和“URL”两种方式来指定要下载的内容。

有没有办法让这样的脚本在无人看管的情况下运行？如果它只是跳过它无法下载的文件，我很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T14:46:48.047

不要（ab）使用外壳。

将您的 URL 保存到某个文件（比如说 my_urls.lst）并执行以下操作：

```
wget -i my_urls.lst 
```

Wget 将自行处理报价等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T06:33:06.393

我认为您需要在 URL 周围使用双引号 (") 而不是单引号 (')。

如果这仍然不起作用，请尝试转义括号字符`(`并`)`使用反斜杠：`\(`和`\)`

你用的是哪个外壳？重击？zsh？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T06:35:28.523

这并不能完全回答您的问题，但是：

以下两个命令都直接在 bash shell 中工作：

```
wget "http://www.cepa.org.gh/archives/research-working-papers/WTO4%20(1)-charles.doc" 
```

和

```
wget 'http://www.cepa.org.gh/archives/research-working-papers/WTO4%20(1)-charles.doc' 
```

你能检查一下其中任何一个对你有用吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T06:36:42.123

似乎正在发生的事情是您的外壳正在使用 ( 字符。我会尝试在您的 URL 周围使用双引号 " 而不是单引号 '。

如果你想抑制错误，你可以在 unix 下使用 >/dev/null 来重定向标准输出或 2> /dev/null 来重定向标准错误。在其他操作系统下，它可能是别的东西。

# php - 在另一个 PHP 页面中退出 PHP 脚本

> ID：535626
> 
> 赞同：1
> 
> 时间：2009-02-11T06:21:00.167
> 
> 标签：php, include, quit

我正在尝试为我正在编写的 PHP 脚本实现缓存，但我一直遇到以下问题。我希望脚本包含在其他 PHP 页面中，但是当我尝试传递缓存文件并退出嵌入脚本时，它会同时退出脚本和父页面，但不会解析父页面上的其余代码. 有关示例，请参见下面的代码。

**索引.php**

```
<?php
  echo "Hello World!<br />";

  include("file2.php");

  echo "This line will not be printed";
?> 
```

**文件2.php**

```
<?php
  $whatever = true;

  if ($whatever == true) {
    echo "file2.php has been included<br />";
    exit; // This stops both scripts from further execution
  }

  // Additional code here
?> 
```

如果上面的 index.php 被执行，你会得到以下输出：

```
Hello World! 
file2.php has been included 
```

但是，我试图让它看起来像这样：

```
Hello World! 
file2.php has been included
This line will not be printed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-11T09:49:08.683

在包含的文件中使用`return;`，而不是`exit;`- 这只会停止该脚本的执行。

请注意，您还可以使用它向父脚本返回值，例如

文件1.php

```
<?php
echo 'parent script';
$val = include('file2.php'); //$val will equal 'value'
echo 'This will be printed'; 
```

文件2.php

```
<?php
echo 'child script';
return 'value'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-11T06:31:24.710

只需将“此处的附加代码”包装在 else 语句中？

```
<?php
  $whatever = true;

  if ($whatever == true) {
    echo "file2.php has been included<br />";
  } else {
    // Additional code here
  }
?> 
```

否则我不确定你在说什么。**exit**命令总是终止整个当前的执行——不仅仅是当前文件的执行（没有命令）

## 编辑

感谢 PHLAK、tomhaigh、MichaelM 和 Mario 的评论和帖子，我自己今天学到了一些东西——你*确实可以使用***return**命令终止单个包含文件的执行。多谢你们！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T06:34:49.960

为什么不把file2.php的内容封装成一个函数呢。这样您就可以在需要时从函数中返回，并且其余的执行不会停止。例如：

**文件2.php**

```
<?php
    // this function contains the same code that was originally in file2.php
    function exe() 
    {
        $whatever = true;
        if ($whatever)
        {
            echo "file2.php has been included <br />";
            // instead of exit, we just return from the function
            return;
        }
     }

     // we call the function automatically when the file is included
     exe();
?> 
```

让 index.php 保持原样，您应该会看到您想要实现的输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T09:56:35.763

我个人尽量避免 if-else 条件并使用（不确定是否有一个创造的术语但是）提前退出拦截条件。

**索引.php**

```
<?php
echo 'header';
include 'content.php';
echo 'footer';
?> 
```

**内容.php**

```
<?php
if ($cached)
{
    echo cached_version();
    return; // return is not just for functions, in php...
}

//proceed with echoing whatever you want to echo if there's no cached version.
...
...
?> 
```

# testdriven.net - TestDriven.NET 可以与 VS Express 一起使用吗？

> ID：535628
> 
> 赞同：9
> 
> 时间：2009-02-11T06:21:33.800
> 
> 标签：testdriven.net

TestDriven.NET 可以与 VS Express 一起使用吗？

编辑：是的，我刚刚安装它并注意到它不起作用。它看起来像一个非常酷的程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-11T06:27:11.400

根据 TestDriven.NET 的[发行说明](http://www.testdriven.net/downloads/ReleaseNotes.html)，在 2.8 (2.08) 中删除了对 Visual Studio Express 版本的支持。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-11T06:27:43.923

我有一个模糊的回忆，TestDriven 的作者对微软威胁要撤销他的 MVP 身份感到不安，除非他将其修改为仅适用于非免费版本的 VS。

有关所有血腥细节，请参见[此处](http://www.theregister.co.uk/2007/06/05/microsoft_mvp_threats/)。

首页声明它“支持所有版本的 Microsoft Visual Studio”，但发行说明另有说明：

`"Jamie Cansdale and Microsoft Corporation have agreed to concentrate on working together on future releases of TestDriven.Net for Microsoft's officially extensible editions of Visual Studio, as opposed to spending time litigating their differences."`

不幸的是，官方可扩展版本不包括免费版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-11T06:28:17.497

[看起来不像](http://testdriven.net/overview.aspx)（看右下角）

我似乎记得微软坚持认为它不适用于 Express 版本，以及一些关于此的博客文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-13T15:39:20.827

小提示：TestDriven.Net 3.9 的个人版确实适用于 VS 2015 社区版。

# sharepoint - 如何在 MOSS 中找到所有共享服务提供者的默认爬取帐户

> ID：535632
> 
> 赞同：1
> 
> 时间：2009-02-11T06:23:44.637
> 
> 标签：sharepoint, service, moss, shared

找到哪些是用于在 MOSS 中的农场中的所有共享服务提供商进行爬网的默认爬网帐户的最佳方法是什么，如果有人能告诉我使用共享服务提供商数据库，我会更喜欢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-12T22:47:56.867

获得一个 SSP 的价值很容易：

```
ServerContext serverCtx = ServerContext.Default;
SearchContext searchCtx = SearchContext.GetContext(serverCtx);
Content content = new Content(searchCtx);
Console.WriteLine(content.DefaultGatheringAccount); 
```

诀窍是为所有 SSP 获取它。据我所知，没有一个公共 API 可以列出农场的所有 SSP。显然有一个私人的，因为：

```
stsadm -o enumssp -all 
```

返回所有 SSP 的列表。所以你的选择是：

1.  解析 stsadm 命令的结果以获取 SSP 名称
2.  遍历系统中的所有 SPWebApplication 对象并使用它来查找它们所属的 SSP
3.  使用反射调用 MOSS 的密封私有 API，以找出 Farm 中 SSP 的名称。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-02-12T15:26:10.047

由于农场中应该只有几个 SSP，因此最简单的方法是检查每个 SSP 的 Web 管理屏幕。

通过数据库进行检查是有问题的，因为 SharePoint SSP 数据库可以存储在不同的机器上。

# ruby - 在大数据流中查找电子邮件地址

> ID：535644
> 
> 赞同：4
> 
> 时间：2009-02-11T06:28:14.203
> 
> 标签：ruby, regex, email-validation

**仍未解决:(**   [2 月 11 日]

我有一个充满随机数据的大文本文件，并想从中提取所有电子邮件地址。

我想在 Ruby 中执行此操作，使用如下伪代码：

```
monster_data_string = "asfsfsdfsdfsf  sfda **joe@example.com** sdfdsf"
monster_data_string.match(EMAIL_REGEX) 
```

**有谁知道我将使用什么 Ruby 电子邮件正则表达式来完成此操作？**

*请记住，我正在寻找**Ruby**的答案。我已经尝试了许多通过谷歌搜索找到的正则表达式，但其中大多数会导致 Ruby 运行时错误，指出“+”和“* ”等字符无效/无法识别。*

我已经尝试过的是：

```
monster_data_string.match(/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i) 
```

但我收到 Ruby 错误，指出“+”是无效字符

提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-09-21T06:34:55.663

看这个...

```
f =  File.open("content.txt")
content = f.read    
r = Regexp.new(/\b[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}\b/)     
emails = content.scan(r).uniq                                    
puts YAML.dump(emails) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-12T10:31:32.610

如果您收到有关正则表达式的错误消息`+`或`*`在正则表达式中无效，那么您做错了什么。这是 Ruby 中的有效正则表达式，尽管它不是您想要的：

```
/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i 
```

一方面，如果您试图从“随机”文本中提取地址，您不想将正则表达式锚定到行的开头和结尾 ( `^`and )。`$`但是一旦你摆脱了锚点，你的正则表达式将匹配`**joe@example.com`你的测试字符串，我认为你不想要。这个来自[Regular-Expressions.info](http://www.regular-expressions.info/email.html)的正则表达式做得更好，但请阅读该页面以获取有关调整它以满足您的特定需求的提示。

```
/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i 
```

最后（您可能已经知道这一点），您不会想使用该`match()`方法，因为它只会找到第*一个*匹配项。试试`scan()`吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-12T00:10:45.317

你得到什么样的运行时错误消息？是否将正则表达式视为无效，还是由于目标字符串太大而导致中断？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T13:54:23.353

鉴于不可能使用正则表达式解析每个有效的电子邮件地址，因此您有两种选择：

制作一个匹配尽可能多的有效电子邮件地址的正则表达式，并忍受一些有效但很少使用的电子邮件地址形式可能会被忽略的事实。

或者

制作一个匹配任何“可能是”电子邮件地址的正则表达式，然后忍受误报

在验证网页上的用户注册电子邮件地址时，我使用第二种方法清除明显错误的电子邮件地址

从 Ruby Cookbook 收集，其中有一个关于电子邮件地址验证的非常好的部分：

```
valid = '[^ @]+'
/^#{valid}@#{valid}\.#{valid}/ 
```

显然有一个由 Paul Warren 编写的 6343 字符的 Perl 正则表达式，它做得非常好，也适用于 Ruby，但即使这样也不是万无一失的（我认为它也可能对性能有一些影响）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-12T08:53:55.730

尝试帮助你到达那里（虽然不是很优雅，我承认）：

我认为开始和结束锚（^ 和 $）没有帮助。您可能还想过滤星号？：

```
irb(main):001:0> mds = "asfsfsdfsdfsf  sfda **joe@example.com** sdfdsf"
  => "asfsfsdfsdfsf  sfda **joe@example.com** sdfdsf"
irb(main):003:0> mds.match(/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i)
  => nil
irb(main):004:0> mds.match(/([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})/i)
  => #<MatchData "**joe@example.com" 1:"**joe" 2:"example.com">
irb(main):005:0> mds.match(/([^@\s*]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})/i)
  => #<MatchData "joe@example.com" 1:"joe" 2:"example.com"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-09-25T04:02:35.633

更妙的是，

```
require 'yaml'

content = "asfsfsdfsdfsf  sfda **joe@example.com.au** sdfdsf cool_me@example.com.fr"

r = Regexp.new(/\b([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9.-]+?)(\.[a-zA-Z.]*)\b/)     
emails = content.scan(r).uniq                                    
puts YAML.dump(emails) 
```

会给你

```
    ---
    - - 乔
      - 例子
      - .com.au
    - - 让我冷静一下
      - 例子
      - .com.au
```

# parsing - 对于初学者来说，什么是好的“真实”编程示例？

> ID：535646
> 
> 赞同：0
> 
> 时间：2009-02-11T06:28:26.293
> 
> 标签：parsing, expression, math

我一直在浏览 Bjarne Stroustrup 的新的编程入门书籍，[Programming: Principles and Practice Using C++](http://www.research.att.com/~bs/programming.html)。它适用于大学一年级计算机科学和工程专业的学生。

在本书的早期，他通过一个有趣的扩展示例来创建一个桌面计算器，在该示例中，他最终在一系列基于语法的协同递归函数中实现了算术表达式求值器（将括号表达式和运算符优先级考虑在内）。

这是一个非常有趣的例子，尽管对于很多初学者来说可以说是复杂的一面。

我想知道这个特定示例的其他内容：通过了解如何实现表达式解析器来学习编程会激发和激励您，还是会因为所有的细节和复杂性而使您气馁？

对于初学者，还有其他好的“真实”编程示例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-11T07:17:14.337

当我第一次学习编程时，我用过的最好的例子是从头开始构建一个文本冒险游戏。基础知识只需要知道如何在屏幕上显示文本、从键盘接收输入以及基本的流控制。但是由于文本冒险总是有空间添加更多的功能/谜题/任何东西，它们可以很容易地适应探索你正在学习的任何语言的各个方面。

当然，并不是每个人都觉得游戏比计算器更有趣。这真的取决于程序员。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-12T21:03:15.150

首先，让我说，认知心理学家已经在许多研究中证明，学习中最重要的因素是求知欲**。**

如果你想学习编程，你需要找到一个能激发你理解欲望的领域。寻找可以通过编程解决的挑战。

当其他人提出你感兴趣的东西时，我同意他们的看法。游戏似乎是一个共同点。当我回顾我学习编程的经历时（很多年前），涉及到数学问题和一个简单的游戏。

但是，直到我创建了一个有用的小程序来帮助业务人员解决实际问题时，我才认为我真正理解了软件的力量。我有一个巨大的动力，因为我有一个“客户”。我没有得到报酬，但客户需要这个程序。与这种情况相关的是真诚的痛苦（我必须更快地完成我的工作）。

所以我的建议是与你认识的人交谈，询问他们有什么小烦恼或与计算机相关的障碍。然后尝试修复它。它可能是一个简单的 Web 小部件，可以减少办公室工作人员的重复性手动任务。

我早期最好的作品之一是帮助一家小印刷厂（大约 1985 年没有软件），该印刷厂在估算工作方面苦苦挣扎，以产生不会亏本的提案。我问了销售女士和运营经理的很多问题。显然，一个共同的痛点与一个我可以自动化的非常简单的计算相交。我花了几天时间来学习 Lotus 1-2-3（适合年轻人的电子表格），足以编写一些宏。我很受鼓舞。我有激情。我看到了我可以有所作为的地方。最重要的是，这促使我学习了一些简单的编程。

拥有真实的人、真实的问题和非常简单的解决方案可能是您作为初级程序员所需的灵感。不要试图编写会计系统。只需将某人的沮丧中的一小部分带走即可。你可以在这个成功的基础上再接再厉。

所以，我不会专注于技术（还）。不要担心，“我这样做是最有效的方式吗？” 初学者的主要目标是取得成功，无论多小，并建立信心。

顺便说一句，Lotus 1-2-3 宏集成长为一个完整的工作跟踪系统。非常古老，功能有限，但让那个小印刷店更有利可图。

创造你的动力，激发你的欲望，培养你对编程的热情，就像艺术家用一团粘土揭开杰作一样。并坚持不懈。遇到障碍时不要放弃。有时我们都会被难住。这些是最好的学习时刻，因为人类从失败中学到的东西多于成功。

祝你好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-11T06:33:06.563

**我认为制作像俄罗斯方块**文本版本这样的小游戏将是进入编程世界的好方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T07:09:49.657

棋盘游戏的设计和编码都很有趣，因为它们有多种形式和困难

从井字游戏到跳棋到垄断，它为教育目的重新发明了轮子！

我能想到的最好的建议是从你感兴趣的领域中挑选一些东西，因为为了编码而编码可能会削弱你的决心

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T06:31:30.937

从小处着手。做你感兴趣的例子。每次都稍微伸展一下自己。对每一步都感到舒服，直到你有信心知道自己在做什么，然后下次再努力一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-11T06:32:51.197

我认为任何示例程序都可以帮助您学习一门新语言，但是初学者应该尝试使用在现实世界中易于理解的东西，例如抵押计算器或类似的东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-11T06:33:21.663

我认为答案是这取决于正在学习如何编程的人。

像算术表达式求值器这样的东西的一个好处是它是一个可以开始很小的项目（使其仅使用“X SYMBOL Y”格式，其中 X 和 Y 是个位数，SYMBOL 必须是加号) 然后您将功能慢慢扩展到复杂系统的地步。

但是，对于不太了解计算机（硬盘、内存等）概念的人来说，这可能不是一个很好的入门项目。

试着想想你在电脑上做的一些重复性的事情，并且可以很容易地自动化。然后尝试想出如何制作一个为您自动执行该任务的程序。它可以是任何东西，无论是每 15 分钟弹出一个提醒以伸展你的腿，还是定期清理你的临时目录。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-11T06:34:18.277

这项任务的问题在于它很复杂，与现实生活无关。我不需要另一个计算器。

但是有一次我有一张 CD，CD 的中心附近有划痕，里面有很多有价值的 JPEG 文件。我从磁盘的未划痕部分转储了数据，但所有文件系统肯定都丢失了。所以我写了一个程序来分析转储并将其分成文件。这不是很简单，但却是一个不错且令人兴奋的文件 IO 编程练习。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-11T06:36:09.613

示例可能比您尝试自己编写的内容更复杂。跟随别人做某事比自己做更容易。像这个计算器这样的真实示例可能是向某人介绍一种语言的好方法。例如，Practical Common Lisp 从一个内存数据库（我认为是 CD）的示例开始，并将其用作探索语言部分的跳板。

我更喜欢看到随着时间的推移构建的真实示例，而不是许多简单的“Hello World”程序。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-12T20:35:17.653

我一直发现，实现某种游戏足以激励学习语言的各种特性。尤其是纸牌游戏，因为它们通常具有简单的规则集来实现，但从抽象的角度来看却足够复杂。

不过，我同意其他所有人的观点：找到你感兴趣的事物的例子。不是每个人都是游戏迷，但像抵押计算器这样的东西会更有趣。

# c++ - 在 C++ 中实现 C++ 线程库

> ID：535648
> 
> 赞同：4
> 
> 时间：2009-02-11T06:29:26.917
> 
> 标签：c++, multithreading

我是一名 java 程序员，但目前正在使用 c++ 语言。与 java 不同，c++ 没有定义任何线程实用程序。在 C++ 中实现多线程应用程序对我来说有点困难。有没有人可以使用 C++ 实现他自己的线程库？你必须能够掌握一些汇编语言的概念吗？我在很多场合都试图从操作系统的特定功能创建一个线程，但我总是失败。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-11T06:31:52.043

鉴于您的专业水平，也许 Boost Threads 会有所帮助？

[http://www.boost.org/doc/libs/1_37_0/doc/html/thread.html](http://www.boost.org/doc/libs/1_37_0/doc/html/thread.html)

在回答您的其他问题时，您当然可以实现自己的线程库。不，您不需要了解任何汇编语言，但是没有 C 标准库函数可以帮助您，您需要使用操作系统特定的库。例如，在 Windows 上，您使用[beginthreadex](http://msdn.microsoft.com/en-us/library/kdzttdcb(VS.80).aspx) CRT 函数，该函数最终调用[CreateThread](http://msdn.microsoft.com/en-us/library/ms682453(VS.85).aspx) Win32 系统调用，但在许多 unix 上，您将使用[pthread_create](http://opengroup.org/onlinepubs/007908799/xsh/pthread_create.html)。

除了启动线程之外，您可能还需要一些同步原语，Boost 库也在这方面[提供。](http://www.boost.org/doc/libs/1_37_0/doc/html/thread/synchronization.html)如果你想自己动手，在 Windows 上查看[CreateMutex](http://msdn.microsoft.com/en-us/library/ms682411(VS.85).aspx)、[WaitForSingleObject](http://msdn.microsoft.com/en-us/library/ms687032.aspx)和[ReleaseMutex](http://msdn.microsoft.com/en-us/library/ms685066(VS.85).aspx)或[CriticalSection](http://msdn.microsoft.com/en-us/library/ms682530.aspx)函数，在 unix 上查看[pthread_mutex_init](http://www.opengroup.org/onlinepubs/007908775/xsh/pthread_mutex_init.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-11T07:56:12.323

我建议您使用现有的多平台库作为 Boost、ACE、POCO、QT ......

ACE 有相当多的线程类，最简单的使用可能是 ACE_Task_Base。您从它继承并提供*int svc()*方法的实现。*这是在您激活*线程时调用的方法。

```
class WorkerThread : public ACE_Task_Base
{
public:
   int svc() { ... }
};
int main()
{
   WorkerThread worker;
   worker.activate();
   worker.wait();
} 
```

使用 POCO，您必须使用 Runnable 接口，并且用法与使用 Java 线程所获得的接近（如果您实现 Runnable，而不是扩展 Thread）：

```
class Worker : public Poco::Runnable { ... };
int main() 
{ 
   Worker worker;
   Poco::Thread thr;
   thr.start( worker );
   thr.join();
} 
```

Boost 线程（推荐）略有不同。它依赖于定义的 operator() 而不是实现/扩展接口。您创建一个线程，向它传递一个实现 operator()() 的对象。线程通过调用该方法开始。好的部分是与 boost::bind 结合起来创建一个假函子（对象实现 operator()）非常简单：

```
class X { public: void method( int argument ); }
int main()
{
   X x;
   boost::thread thr( boost::bind( &X::method, &x, 100 ) );
   thr.join();
} 
```

该片段将创建一个 X 类型的对象。使用 bind，您可以创建一个函子，该函子包装对应用于对象 x 的方法 X::method 的调用，并将其传递 100 作为方法参数。

虽然这与 Java 的角度最不同，但它也是最灵活的方法，因为您可以将线程模型与实际工作代码分离。无需适合特定的界面。这也是即将推出的标准线程接口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-11T08:26:33.593

除了其他人提到的库之外，还有 Intel 的[Threading Building Blocks](http://threadingbuildingblocks.org)。它是来自英特尔的开源（GPL2 与链接异常）跨平台库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T07:53:33.483

Pthread 可以在 C++ 中使用。我通常只是在它们周围写一些简单的包装器。

此外，如果您只是想创建一堆低级循环，请查看 OpenMP。它非常容易使用。

我有一个小 C++ 项目，这里有一个线程库。目的非常具体，但也许可以作为示例。

[http://github.com/mikelikespie/reccage](http://github.com/mikelikespie/reccage)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-11-06T03:54:50.177

另一个易于使用、独立于平台的并发 HEADER ONLY 库：

[https://github.com/zlateski/zi_lib/tree/master/zi/concurrency/](https://github.com/zlateski/zi_lib/tree/master/zi/concurrency/)

示例在测试目录下

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-11T06:42:21.627

如果您使用的是 POSIX 系统，例如 Linux 或 Unix[甚至是 windows](http://technet.microsoft.com/en-us/library/bb463209.aspx)，您可以使用 pthread

如果您被困在没有 .NET 的 Windows 机器上，我认为您别无选择，只能学习 win32 线程。当然，管子上有很多“win32 线程库”。

[促进](http://www.boost.org/doc/libs/1_37_0/doc/html/thread.html)

[代码项目](http://www.codeproject.com/KB/threads/cthread.aspx)

[源锻造](http://sourceforge.net/projects/openthreads)

我怀疑大多数大型代码存储库都有某种自定义实现......

win windows 最简单的选择可能是使用更容易处理的 .NET 线程。[您可以免费拥有 Visual C++ .NET](http://www.microsoft.com/express/vc/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-11T06:45:58.670

以下 URL 声明“用于 C++ 的独立于平台的多线程和同步库”

[http://zthread.sourceforge.net/](http://zthread.sourceforge.net/)

祝你好运。

# java - 如何覆盖保存在上下文目录中的文件

> ID：535649
> 
> 赞同：0
> 
> 时间：2009-02-11T06:29:29.410
> 
> 标签：java, html, xml, jsp

我创建了两个文件 1)index.html 2)player.jsp 我正在使用 Tomcat 服务器。在 index.html 中，我在表单中创建了一些复选框并分配了值...单击提交后，我将这些值转发给 player.jsp...在 player.jsp 中，我动态生成了一个名为 "generate.xml" 的 xml 文件。此 XML 文件根据用户请求进行更改。对于每个新的请求 xml 文件都应该被覆盖。如果在表单中选中一个复选框，generate.xml 中的结构将在一个表单中如果在表单中选中两个复选框，则 generate.xml 中的结构将是另一种形式。我在 jsp 页面中嵌入了一个 flash 播放器，它以 generate.xml 作为输入并相应地播放歌曲...... player.jsp 的代码是

```
<%@ page import="java.io.*" %>
<%@ page contentType="text/html;charset=ISO-8859-1" %> 
<%
int iLf = 10;
char cLf = (char)iLf;
String myfile = application.getRealPath("/") + "generate.xml";

File outputFile = new File(myfile);
outputFile.createNewFile();
FileWriter outfile = new FileWriter(outputFile);
outfile.write(" <?xml version='1.0' encoding='UTF-8'?> "+cLf);
outfile.write(" <playlist version='1' xmlns = 'http://xspf.org/ns/0/' > " +cLf);
outfile.write(" <title>My Band Rocks Your Socks</title> "+cLf); 
outfile.write("<trackList>"+cLf); 
%>
 <%! String[] sports; %>
 <%
    sports = request.getParameterValues("sports");

    out.println("<html><body><h1>hello</h1></body></html>");

    if (sports != null)
    { 
         for (int i = 0; i < sports.length; i++)
         { 
              // outfile.writeln (sports[i]); 
              String total=sports[i];
              String[] sa=total.split("[,]");
              // String[] sub=new String();
              outfile.write("<track>"+cLf);
              for (int j=0;j<sa.length;j++)
              {
                // outfile.writeln(sa[j]);
                // outfile.writeln("sa["+j+"]="+sa[j]);
                if( j == 0)
                {
                     outfile.write("<location>" + sa[0] +"</location>"+cLf); 
                }
                else if (j == 1)
                     {
                        outfile.write("<image>" + sa[1] +"</image>"+cLf); 
                     }
                     else if( j==2)
                          {
                            outfile.write("<title>" + sa[2] +"</title>"+cLf);
                          }

               }// end of inner for loop()       
               outfile.write("</track>"+cLf);
         //outfile.writeln();
      }// end of outer for()
    } 
    //else outfile.writeln ("<b>none<b>");

  outfile.write(" </trackList> "+cLf);
  outfile.write(" </playlist> "+cLf);
  outfile.close();

  %>
<object type="application/x-shockwave-flash" width="400" height="170"
          data="xspf_player.swf?playlist_url=generate.xml">
          <param name="movie" value="xspf_player.swf?playlist_url=generate.xml" />

</object> 
```

* * *

我的问题是在我的本地系统中，所有这些都工作正常，每次新请求都会覆盖 generate.xml ...我创建 ROOT.war 并在提交第一个请求时将此文件上传到 www.eatj.com根据请求创建的 generate.xml 文件.. 对于下一个请求，此 generate.xml**不是 OVERWRITTEN**。播放器正在获取由第一个请求生成的所有新请求的 generate.xml 文件。请帮助我对代码进行任何更改，以便我可以覆盖以前生成的 xml 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T06:49:23.373

*getRealPath()*方法在*war*下不起作用，并且会返回*null*，AFAIR。您必须使用相对路径才能使其工作。*Request.getResourceAsStream()*是一个更好的选择。出于这个原因，非常不鼓励使用*getRealPath() 。*

**[已编辑]**

找到了一个确认我的疑问[的 coderanch 线程。](http://www.coderanch.com/t/211165/JSF/java/getRealPath-Depricated)

# regex - 为基于 Web 的邮件列表存档编写 Gmail 样式“隐藏引用的文本”

> ID：535655
> 
> 赞同：8
> 
> 时间：2009-02-11T06:31:47.440
> 
> 标签：regex, email, parsing

我正在开发一个以线程格式（除其他外）解析和显示电子邮件消息的 Web 应用程序。电子邮件可能来自任意数量的不同邮件客户端，采用文本或 HTML 格式。

鉴于大多数人倾向于置顶帖子，我希望能够以类似于 Gmail 的方式（例如“显示引用的文本”）隐藏电子邮件回复中的重复消息。

确定消息的哪一部分是回复具有一定的挑战性。就个人而言，我在回复时在引用文本的开头使用“>”分隔符。我创建了一个正则表达式来查找这些行并在它们周围包裹一个 div 以允许一些 JS 隐藏或显示此文本块。

然后我注意到 Outlook 默认不使用“>”字符，它只是在回复上方添加一个标题块，其中包含标题的摘要（发件人、主题、日期等）。回复没有动静。我可以对此进行匹配并隐藏电子邮件的其余部分，并假设它是最高报价。

然后我查看了 Thunderbird，它使用“>”表示文本，使用`<blockquote`> 表示 HTML 邮件。我还没有研究过 Apple Mail 的功能、Notes 的功能以及其他数百万邮件客户端的功能。

我会为那里的每个客户编写一个特殊的正则表达式吗？还是我缺少什么？

非常感谢任何建议、示例代码或指向第三方库的指针！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T08:10:52.443

很难复制 gmail 的做法，因为它不关心它是否被引用，就像 Zac 所说的那样，它似乎只关心差异。

实际上很难 100% 地做到这一点。纯文本电子邮件是“有损”的，您完全可以发送

```
> Here is my long line that is over 74 chars (email line length limit) 
```

可以将其编码为

```
> Here is my long line that is over 74 chars (email=
 line length limit) 
```

然后被*解码*为

```
> Here is my long line that is over 74 chars (email
line length limit) 
```

使其与内联回复无法区分。

这是电子邮件，所以变化很大。电子邮件通常以 74 个字符换行，并且编码方案可能不同。它是一个真正的 PITA。如果您可以访问 HTML 版本，您可能会更幸运地找到引用标签等。另一个想法是解析纯文本和 html 版本以尝试确定边界。

此外，最好只针对特定的客户端黑客进行计划。它们在结构和标题内容方面都以不同的方式构建 mime 消息。

编辑：我是根据编写电子邮件处理系统的经验以及看到几个人试图做你正在做的事情的经验说的。它总是只得到“好的”结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T06:39:01.150

据我所知，gmail 不关心前缀行或部分标题，除了忽略它们。如果文本行在线程中较早出现，然后再次出现，则认为它被引用。因此，例如，如果您发送多条消息并且不更改您的签名，则该签名被视为被引用。如果您已经处理了 '>' 前缀，那么一个简单的 diff 应该可以完成其余的大部分工作。没必要花里胡哨。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T06:38:36.800

我想我要做的第一件事是去掉所有的空白，或者将每个单词之间的空白减少到 1，以及两个块中的特殊字符，然后在新的块中查找旧的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-12-02T18:37:43.990

这是一个 mozdev 项目，可能对偶然发现此页面并寻找 Thunderbird 解决方案的其他人有所帮助：

[http://quotecollapse.mozdev.org/](http://quotecollapse.mozdev.org/)

# asp.net - 如何将输入类型 = 文本转换为跨度

> ID：535665
> 
> 赞同：0
> 
> 时间：2009-02-11T06:34:06.157
> 
> 标签：asp.net

有没有办法在 ASP.Net 中将 Input type=text 转换为 Span

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-11T06:44:32.980

您确实应该提供有关您想要执行此操作的场景的更多信息，但这里有几个通用的。

# 做服务器端

```
if(ChangeTextToSpan) { //some condition to check, could be a query string or what ever
  this.Label1.Text = this.TextBox1.Text;
  this.Label1.Visible = !this.TextBox1.Visibile = false;
} 
```

# 做客户端

```
function swapTextBox(changeTextToSpan) {
  if(changeTextToSpan) { //again, do a condition
    var span = document.getElementById('<%= this.Label1.ClientID %>');
    var txt = document.getElementById('<%= this.TextBox1.ClientID %>');

    span.innerHTML = txt.value;
    span.style.display = 'inline';
    txt.style.display = 'none';
  }
}

setTimeout(10000, swapTextBox(true)); //after 10 seconds it'll swap 
```

# c# - jQuery 对话框在服务器端重定向后不起作用

> ID：535670
> 
> 赞同：0
> 
> 时间：2009-02-11T06:35:04.470
> 
> 标签：c#, asp.net, javascript, jquery, jquery-ui

我有一个 ASP.NET 网站，它使用 jQuery 对话框向用户展示下载条款对话框。一旦用户同意对话框中的条款，我将执行服务器端回发，该回发向另一个网站上的页面发出 Response.Redirect 调用，该页面负责将下载提供给浏览器。问题是一旦调用了 Response.Redirect，就不能再显示对话框。

我使用以下代码在 document.ready 事件中初始化对话框：-

```
$("#terms-dialog").dialog({
  modal: true,
  autoOpen: false,
  autoResize: false,
  height: 420,
  width: 500,
  overlay: {
    opacity: 0.5,
    background: "black"
  }
}); 
```

显示对话框的代码如下：-

```
function showTermsDialog(snippetid, title, agreement, url)
{
  $("#terms-dialog-text").html(agreement);
  $("#terms-dialog-controls").attr("style", "display: block;");
  $("#<%= this.SnippetID.ClientID %>").attr("value", snippetid);
  $("#<%= this.DownloadUrl.ClientID %>").attr("value", url);
  $("#terms-dialog").data("title.dialog", title); 
  $("#terms-dialog").dialog("open");
} 
```

此代码允许我多次成功显示对话框，但在 Response.Redirect 调用之后，对 dialog("open") 的调用不再有效。

有没有人做过类似于我在这里尝试做的事情？或者，如果有人可以提供任何 jQuery 对话框调试技巧，我们也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-14T23:08:33.757

该问题似乎是由我的对话框使用的扩展功能引起的，该功能将 jQuery 对话框定位到页面的表单部分，以确保服务器端回发能够正常工作。我更改了此代码的行为，改为简单地关闭对话框，然后使用以下命令手动调用服务器端回调

```
<%= this.Page.ClientScript.GetPostBackEventReference(btnAgree, "") %>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-12T00:07:49.367

不幸的是，我不能说任何可能的原因，但是在您的位置上，我尝试从一些调试代码开始，使用诸如控制台和断点之类的[Firebug工具。](http://www.getfirebug.com/)也许会发生某种 var 初始化或类似错误。希望这个技巧能对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-12T09:52:39.537

您可能做错了几件事。

首先是对话框的初始化，你把它放在这里了吗？在

```
$(document).ready( function() { ... } ); 
```

如果没有，你应该。假设您确实重定向了用户，并且在该重定向中您重定向到上一页（具有对话框的页面），因此 (document).ready 再次启动并初始化对话框。

但是，使用 ASP.NET，你不应该像现在这样做，考虑一个简单的表单，给你和用户。

在 jQuery 中使用 .load 你可以加载一个不同的页面，所以让我们假设你在对话框中有一个名为“我同意”的按钮，它为用户提供了请求的文件：

```
$(document).ready( function() {
  $("#terms-dialog").dialog({
    modal: true,
    autoOpen: false,
    autoResize: false,
    height: 420,
    width: 500,
    overlay: {
      opacity: 0.5,
      background: "black"
    },
    buttons: {
      I do not agree: function() { $(this).dialog('close'); }
      I agree: function() { 
        GetFileIfCookieExist("myfile.xls");
        $(this).dialog('close'); 
      }
    }
  });
});

function GetFileIfCookieExist(file) {
  // create cookie here
  $.load("getFile.aspx", { "f": file }, function() {
    // you can show a "loading" image
  });
} 
```

在您的 getFile.aspx 中，删除除第一行之外的所有 HTML 代码，并在代码隐藏 Page_Load 事件中处理请求并使用 Response.Write 方法写回文档，例如：

```
Response.Clear(); 
Response.AddHeader("content-disposition", "attachment;filename=" + Request["f"]);
Response.Charset = "";
Response.ContentType = "application/vnd.xls";

System.IO.StringWriter stringWrite = new System.IO.StringWriter();
stringWrite = AppendMyFile();

Response.Write(stringWrite.ToString());
Response.End(); 
```

记得在请求中创建一个 cookie 并检查 aspx 页面中的 cookie，如果它不存在那是因为用户强制下载它，然后在将文件发送回用户之前删除 cookie。

cookie 只是一种确保可信度的策略，但它并非完美无缺，因为您需要用户启用 cookie（就像 Hotmail 所做的那样，以便您在其网站上阅读电子邮件），您可以使用 Session 对象或您可以想到的其他方法关于。

这只是为了让您更好地了解您可以完成的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-25T10:48:12.780

当我们从页面发送请求时，jquery 脚本成功执行，但是当我们在发送重新查询的同一页面上进行响应时，jquery 脚本没有执行。这就是你的弹出窗口不显示的原因

# wpf - WPF 触发器

> ID：535671
> 
> 赞同：6
> 
> 时间：2009-02-11T06:35:08.213
> 
> 标签：wpf, xaml, datatrigger

当我为单元格获得的值是某种类型时，我正在尝试设置一个触发器来显示一个文本块。

我已经成功地在同样的情况下显示了一张图片，但是在这种情况下我不想要一张图片，而是一些文字。

已注释掉行以进行测试。尝试使其工作。注释掉的代码有效！里面的文本块 text=xxx 没有。

这是我的尝试

```
<wpfToolkit:DataGridTemplateColumn Header="P" Width="20">
    <wpfToolkit:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <!-- <DataTemplate.Triggers> -->
            <!-- <DataTrigger Binding="{Binding PrecedenceIndicator}" Value="1"> -->
            <TextBlock Text="XXX" />
            <!-- </DataTrigger> -->
            <!-- <DataTrigger Binding="{Binding PrecedenceIndicator}" Value="2"> -->
            <!-- <Setter TargetName="cablePrecedenceIndicatorImage" Property="Source" Value="Resources\Images\small_exclamation_mark.png"/> -->
            <!-- </DataTrigger> -->
            <!-- </DataTemplate.Triggers> -->
        </DataTemplate>
    </wpfToolkit:DataGridTemplateColumn.CellTemplate>
</wpfToolkit:DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-11T15:53:12.957

将 DataTemplate 的内容设置为 TextBlock 并根据触发器设置可见性。我不确定第二个 DataTrigger 的用途是什么，因为它指的是当前范围内不存在的目标名称，所以我不知道它是如何适应的。

```
<DataTemplate>
    <TextBlock x:Name="block" Text="XXX" Visibility="Collapsed"/>
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding PrecedenceIndicator}" Value="1">
            <Setter TargetName="block" Property="Visibility" Value="Visible"/>
        </DataTrigger>
        <!--<DataTrigger Binding="{Binding PrecedenceIndicator}" Value="2">
            <Setter TargetName="cablePrecedenceIndicatorImage" Property="Source" Value="Resources\Images\small_exclamation_mark.png"/>
        </DataTrigger>-->
    </DataTemplate.Triggers>
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T22:01:33.820

杰出的 ！谢谢大家:)

这就是我最终的结果。如果 PrecedenceIndicator =1，则显示 !，如果 PrecedenceIndicator =2，则显示 !!。

```
<wpfToolkit:DataGridTemplateColumn Header="A" Width="20">
    <wpfToolkit:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock>
                <TextBlock x:Name="block1" Text="&#x21;" Visibility="Collapsed"/>
                <TextBlock x:Name="block2" Text="&#x21; &#x21;" Visibility="Collapsed"/>
            </TextBlock>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding PrecedenceIndicator}" Value="1">
                    <Setter TargetName="block1" Property="Visibility" Value="Visible"/>
                </DataTrigger>
               <DataTrigger Binding="{Binding PrecedenceIndicator}" Value="2">
                    <Setter TargetName="block2" Property="Visibility" Value="Visible"/>
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </wpfToolkit:DataGridTemplateColumn.CellTemplate>
</wpfToolkit:DataGridTemplateColumn> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T07:22:26.897

您需要根据触发器将 DataTemplate 的类型从图像更改为文本框。

```
<DataTemplate>
    <ContentPresenter x:Name="Presenter" />

    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding PrecedenceIndicator}" Value="1">
            <Setter TargetName="Presenter" Property="Content">
                <Setter.Value>
                    <TextBlock Text="XXX" />
                </Setter.Value>
            </Setter>
        </DataTrigger>
        <DataTrigger Binding="{Binding PrecedenceIndicator}" Value="2">
            <Setter TargetName="cablePrecedenceIndicatorImage" Property="Source" Value="Resources\Images\small_exclamation_mark.png"/>
        </DataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

# javascript - 小部件 - Iframe 与 JavaScript

> ID：535676
> 
> 赞同：54
> 
> 时间：2009-02-11T06:36:31.250
> 
> 标签：javascript, iframe, widget

我必须开发一个第三方网站将使用的小部件。这不是要部署在社交网站中的应用程序。我可以给站点人员一个链接，用作 iframe 的 src，或者我可以将其开发为 JavaScript 请求。

有人可以告诉我这两种方法（IFrame 与 JS）之间的权衡吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2011-03-04T23:41:55.600

我正在搜索同样的问题，发现这篇有趣的文章： http:
[//prettyprint.me/prettyprint.me/2009/05/30/widgets-iframe-vs-inline/](http://prettyprint.me/prettyprint.me/2009/05/30/widgets-iframe-vs-inline/)

> 小部件是可以轻松添加到任何网页的小型 Web 应用程序。它们有时被称为小工具，并广泛用于越来越多的网页、博客、社交网站、个性化主页，如 iGoogle、我的雅虎、netvibes 等。在这个博客中，我使用了几个小部件，比如右侧的 RSS 计数器它显示了有多少用户订阅了这个博客（别担心，它会增长，这是一个新博客 ;-) ）。从某种意义上说，小部件很棒，因为它们是可重复使用的小型功能，即使是非程序员也可以利用它来丰富他们的网站。
> 
> 我已经编写了几个这样的小部件，包括可以嵌入到任何网站的“原始”小部件，以及结构化的 iGoogle 小工具、worpress*、打字板和博客小部件，因此我很乐意分享我的经验。
> 
> 作为小部件作者，对于在客户端运行的小部件（简单的可嵌入 HTML 代码），您可以选择在 iframe 中编写小部件，或者简单地将页面内联并使其成为托管页面 dom 的一部分。这篇文章的其余部分讨论了这两种方法的优缺点。
> 
> 它在技术上是如何完成的？如何使用 iframe 或如何实现内联小部件？
> 
> iframe 更容易实现。以下示例呈现一个简单的 iframe 小部件：http://my-great-widget.com/widgwt' width="100" height="100" frameborder='0'>
> 
> frameborder='0' 用于确保 ifrmae 没有边框，使其在页面上看起来更自然。[http://my-great-widget.com/widget](http://my-great-widget.com/widget)负责将 小部件内容作为完整的 HTML 页面提供。
> 
> 内联小工具可能如下所示：
> 
> function createMyWidgetHtml() { return "Hello world of widgets"; } document.getElementById('myWidget').innerHTML = createMyWidgetHtml(); 如您所见，函数 createMyWidgetHtml() 它负责创建实际的小部件内容，并且不一定要与服务器对话才能做到这一点。在 iframe 示例中，必须有一个服务器。在内联示例中，不需要服务器，但如果需要，可以从服务器获取数据，这实际上是一种非常常见的情况，小部件通常会调用服务器端代码。使用内联方法服务器端代码通过按需 javascript 调用。
> 
> 因此，总而言之，在 iframe 案例中，我们只需放置一个 iframe HTML 代码并将 iframe 的源指向一个服务器位置，该服务器位置实际上为小部件的内容提供服务。在内联案例中，我们使用 javascript 在本地创建内容。您当然可以将 iframe 与 javascript 的使用以及内联方法与服务器端调用的使用结合起来，您不受此限制，但路径开始不同。
> 
> 那么有什么大不了的呢？有什么不同？有几个重要的区别，所以这里开始这篇文章有趣的部分。
> 
> 安全。iFrame 小部件更安全。
> 
> 小工具会带来哪些风险，谁实际上处于危险之中？该网站的用户和该网站的声誉处于危险之中。
> 
> 对于内联小工具，浏览器认为小工具代码代码的来源来自托管站点。假设您正在浏览您最喜欢的邮件应用程序[http://my-wonderful-email.com](http://my-wonderful-email.com)，并且此邮件应用程序安装了一个小部件，该小部件显示来自 [http://great-clock-widgets.com/的时钟](http://great-clock-widgets.com/). 如果该小部件被实现为内联小部件，则浏览器认为该小部件的代码源自 my-wonderful-email.com 而不是来自 great-clock-widgets.com，因此它将让小部件的代码最终访问 cookie由 my-wonderful-email.com 拥有，小部件的邪恶作者将窃取您的电子邮件。重要的是要意识到浏览器并不关心 javascript 文件的托管位置。只要代码在同一个框架上运行，浏览器就会将所有代码视为框架域的起源。因此，作为用户，您会因失去对电子邮件帐户的控制而受到伤害，而 my-wonderful-email 会因失去声誉而受到伤害。
> 
> 如果在 iframe 中实现了相同的时钟并且 iframe 源与页面源不同（这是常见的情况，例如页面源是 my-wonderful-email.com 而小工具源是 great-clock-widgets .com) 那么浏览器将不允许时钟小部件访问页面 cookie，也不允许访问托管文档的任何其他部分，包括主机页面 dom。这样更安全。事实上，像 iGoogle 这样的个人主页甚至不允许内嵌小工具，只允许使用 iframe 小工具。（仅在极少数情况下允许使用内嵌小工具，只有在经过 iGoogle 团队彻底检查以确保它们没有恶意之后）
> 
> 总而言之，iframe 小部件更安全。但是，它们的功能也受到更多限制。接下来，我们将讨论您在功能上失去了什么。
> 
> 外观 在外观和感觉的战斗中，内联小工具（通常是**）获胜。它们的好处是可以使它们看起来是页面的一部分。它们可以从页面继承 CSS 样式，包括字体、颜色、文本大小等。Iframe、OTHO 必须从头开始定义它们的 CSS，因此它们很难很好地融入页面。
> 
> 但更重要的是 iframe 必须声明它们的大小。在向页面添加 iframe 时，您必须包含 width 和 height 属性，如果不这样做，浏览器将使用一些默认设置。现在，如果您的小部件是一个时钟小部件，它很容易 b/c，您确切地知道您想要它的大小，但在许多情况下，您不提前知道您的小部件将占用多少空间。例如，如果您正在创作一个显示某种列表的小部件，并且您不知道该列表将有多长或每个项目将有多宽。通常在 HTML 中这没什么大不了的，因为 HTML 是一种基于声明的语言，所以你需要做的就是告诉浏览器你想显示什么，浏览器会为它找出一个合理的布局，但是对于 iframe，情况并非如此；使用 ifrmaes 浏览器要求您准确地告诉它 iframe 的大小是多少，它不会自己弄清楚。对于想要使用 iframe 的小部件作者来说，这是一个真正的问题——如果您需要太多空间，页面中就会出现空白，如果您指定的页面太少，页面中就会有滚动条，上帝禁止。
> 
> 外观和感觉明智，内联获胜。但请注意，这实际上取决于您的小部件应用程序。如果您只想做一个时钟，那么您也可以使用 iframe。
> 
> 服务器端与客户端 IFrmaes 要求您指定 src URL，因此在使用 iframe 实现小部件时，您必须具有服务器端代码。这对某些人来说可能是一个限制和头痛（拥有服务器、域名等、处理负载、支付网络账单等），但对其他人来说，这实际上是支持 iframe b/c 的一点，它让你完全编写你的服务器端技术中的小部件，因此您可以编写大量代码，实际上几乎所有代码都使用您最喜欢的服务器端技术，无论是 asp.net、django、ror、jsp、struts、perl 还是其他恐龙。在实现内联小工具时，您会发现自己越来越多地练习 JavaScript Ninja。
> 
> 那么决策算法是什么？小部件作者：如果小部件可以实现为 iframe，则更喜欢 iframe，只是为了保护用户的安全和信任。如果一个小部件需要内联（并且媒体允许，例如不是 iGoogle 和朋友）使用内联但不敢利用用户的信任！
> 
> 小部件安装程序：在您的博客中安装小部件时，您不会在小部件上看到“用户安全”功能区。您如何判断小部件是否安全？我可以建议两种选择：1）信任供应商 2）阅读代码。要么您信任小部件提供者并安装它，要么您花时间阅读它的代码并确定它是否值得信赖。现实情况是，大多数网站所有者不费心阅读代码，甚至没有意识到他们将用户置于风险之中，因此小部件提供商被盲目信任。在许多情况下，这不是问题，因为博客通常不会保存有关其读者的个人信息。我怀疑一旦很少有高调的漏洞利用，事情就会开始改变（我希望它永远不会发生）。
> 
> 用户：Usres 被蒙在鼓里。就像网站所有者安装的小部件上没有“对用户安全”的功能区一样，也没有“使用安全”的网站，基本上用户被蒙在鼓里，不知道，即使他们有技术技能，无论是否他们使用的网站包含小部件，这些小部件是否内联以及它们是否是恶意的。尽管理论上训练有素的开发人员可以在浏览器中运行代码并将其电子邮件帐户丢失给黑客之前预先检查代码，但是这是不切实际的，并且不应期望大量用户会这样做。IMO 这是一个不幸的情况，我只希望攻击者不会找到利用它的方法，并毁灭网络上美妙的开放小部件文化。
> 
> 快乐的小部件人！
> 
> *   一些博客平台的小部件结构有些不同，有时它们可​​能同时具有功能相关的小部件和插件，但就这里的讨论而言，我将愚蠢地使用术语小部件来讨论“原始”类型由客户端javascript代码组成**虽然在大多数情况下您希望小部件从托管页面继承样式以使其看起来与其一致，但有时您实际上不希望小部件从页面继承样式，所以在这个案例 iFrames 让你从头开始你的 CSS。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-15T19:09:52.623

为什么不两者都做？

我更喜欢为第三方网站提供如下脚本：

```
 <script type="text/javascript" src="urlToYourScript"></script> 
```

您服务器上的文件如下所示：

```
document.writeln('<iframe src="pathToYourWidget" 
name="MagicIframe" width="300" height="600" align="left" scrolling="no" 
marginheight="0" marginwidth="0" frameborder="0"></iframe>'); 
```

更新：

使用指向服务器上 url 的 iframe 的一个缺点是，如果有人单击服务器上指向服务器的 url，则不会生成“真实”反向链接。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-03-04T23:59:25.130

我敢肯定，许多开发人员/网站所有者会喜欢一种 Javascript 解决方案，他们可以根据自己的需要设置样式，而不是使用`iframe`. 如果我要包含来自第三方的组件，我宁愿通过 Javascript 来完成，因为我会有更多的控制权。

就易用性而言，两者在简单性方面相似，因此没有真正的权衡。

另一种想法是，确保您获得托管此域名的任何域的 SSL 证书，如果页面是通过 SSL 提供的，则相应地写出包含语句。如果您的网站所有者有使用 SSL 的理由，他们肯定会喜欢这一点，因为 Firefox 和其他浏览器会在提供混合安全/不安全内容的页面时抱怨。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-03-15T22:54:13.057

如果小部件可以嵌入到 iframe 中，则托管站点的前端性能会更好，因为 iframe 不会阻止内容下载。但是，正如其他人所评论的那样，使用 iframe 还存在其他缺点。

如果您确实使用 javascript 实现，请在开发时考虑[前端性能最佳实践](http://developer.yahoo.com/performance/rules.html)。特别是，您应该查看[Non blocking javascript loading](http://www.yuiblog.com/blog/2008/07/22/non-blocking-scripts/)。谷歌分析和其他 3rd 方小部件提供商支持这种加载方法。如果您可以在页面底部加载 javascript，这也会有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-11T06:59:31.070

很高兴知道它不会部署在社交网站中......只会留下网络的其余部分;-)

最有用的取决于您的小部件。IFrame 和 javascript 通常用于完全不同的目的，并且可以混合使用（即 iframe 中的 javascript，或创建 iframe 的 javascript）。

*   IFrame 有大小问题；如果它应该完全适合页面，您是否知道它在所有浏览器上呈现相同，数据不会溢出它的容器等？
*   IFrame 很简单。它们可以是简单的静态 HTML 页面。
*   使用 IFrame 时，您可以非常清楚地公开您的小部件。
*   但是话又说回来，为什么不让您的第三方网站在给定的 url 中简单地包含 HMTL？然后可以在需要时/如果需要，扩展 HTML 以包含 javascript。
*   纯 Javascript 允许更大的灵活性，但代价是一些复杂性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-02T15:41:48.363

iframe 的一大优点：所有 CSS 和 JS 都与主机页面分离，因此您现有的 CSS 可以正常工作。（如果您希望主机站点对您的内容进行样式设置以适应，那当然是减号。）

iframe 的最大缺点：它们具有固定的宽度和高度，如果您的内容较大，则会出现滚动条。

# .net - 最佳实践：我应该如何在 C#（格式/类型）中存储设置？

> ID：535685
> 
> 赞同：13
> 
> 时间：2009-02-11T06:42:32.827
> 
> 标签：.net, configuration, settings

现在我很好奇在.net 中存储/加载设置的可能性是什么。例如，我需要存储不同数据库的用户名/密码等，还需要存储一些选项等。

我的想法是创建 [Seriazable] 类并将其保存到文件中......

你有什么建议？.net 等有什么可能性？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-02-11T08:00:27.430

.NET Framework 提供了一些用于存储和加载应用程序和/或用户设置的机制。有关基础知识，请参阅“ [MSDN：使用 C# 中的设置](http://msdn.microsoft.com/en-us/library/aa730869(VS.80).aspx)”。

要加密配置文件中的一些敏感数据，您还可以使用 .NET Framework 的一些标准功能。有关简短介绍，请查看“[使用受保护的配置加密配置信息](http://msdn.microsoft.com/en-us/library/53tyfkaw.aspx)”和“[在 .NET app.config 文件中加密密码](http://weblogs.asp.net/jgalloway/archive/2008/04/13/encrypting-passwords-in-a-net-app-config-file.aspx)”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-11T06:48:08.977

存储和加载设置最常见的方法是使用某种 XML 数据，创建一个 [Serializable] 类并将序列化的类输出到 XML 文件是可行的，但您必须牢记以下几点：

1.  您将无法控制输入数据——因为 XML 文件可以在您的应用程序之外进行编辑，所以可能会加载完全无意义的数据
2.  当 XML 中缺少节点时，您会希望有合理的默认值。这可能是由手动编辑或将旧版本的类加载到新版本中引起的。
3.  如果不使用某种非对称加密算法，我个人会非常犹豫将任何密码存储在配置文件中的任何位置。如果我发现一个程序将我的密码以纯文本形式存储在 XML 文件中，我将停止使用该程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-11T08:13:48.117

如果要存储**应用程序配置设置**，可以利用 App.Config 或 Web.Config 文件中的“AppSettings”，具体取决于它是 Windows 应用程序还是 Web 应用程序。我相信读取配置值的语法是

```
string configValue = Configuration.AppSettings["ConfigValueName"]; 
```

配置文件将如下所示

```
<configuration> 
  <appSettings>
    <add key="ConfigValueName" value="ABC"/>
  </appSettings>
</configuration> 
```

可能还有很多其他的东西。

如果您需要在系统中存储**有关用户**或其他重复实体的信息，您将需要构建一个数据库并编写代码以将数据持久化到数据库中/从数据库中读取数据。

您可以使类可序列化并自动将其序列化为 XML 或二进制，或者您可以使用 SQL 数据库。访问数据库有许多 .net 技术，只需查找 ADO.net、LINQ 和 Entity Framework。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T07:12:54.923

您可以将资源文件用于不太敏感的信息。对于用户名/密码，您需要使用加密的文本文件，或使用[CSP](http://en.wikipedia.org/wiki/Cryptographic_Service_Provider_-_23k)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-25T16:10:08.380

我建议在你需要的地方存储 App.Config，一个 Ini 文件......然后使用库**Config.Net**：*一个全面的易于使用且功能强大的 .NET 配置库，完全覆盖了单元测试并在数千个野外测试服务器和应用程序*。在 GitHub 中找到它：[https ://github.com/aloneguid/config](https://github.com/aloneguid/config)

因此，您可以将设置放在一个地方，然后，如果需要，可以移动到另一个地方。

# c++ - 将 int[5][5] 类型的变量传递给需要 int** 的函数

> ID：535688
> 
> 赞同：1
> 
> 时间：2009-02-11T06:43:47.397
> 
> 标签：c++, c, multidimensional-array

我想通过将硬编码数组传递给它来测试一个采用运行时分配的多维数组的函数。

该函数的签名为`void generate_all_paths(int** maze, int size)`，数组定义为`int arr[5][5] = {REMOVED}`。

我不确定如何正确强制该函数的数组（或者如果这是不可能的）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T06:48:19.617

不幸的是，这个多维数组主题让许多 C++ 程序员感到困惑。好吧，这是解决方案：

```
void generate_all_paths(int (*maze)[5], int size); 
```

这就是函数声明的样子。另一种但完全等效的方法是

```
void generate_all_paths(int maze[][5], int size); 
```

两者都在创建一个参数，该参数是指向 5 个整数数组的指针。然后，您可以将 5 个整数的数组数组传递给该函数：

```
generate_all_paths(arr, 5); 
```

因为您的数组的第一个元素是一个由 5 个整数组成的数组，所以当传递给该函数时，它将自动（隐式）转换为指向该第一个元素的指针。

在评论中，您已经表明您已绑定到`int**`，因为您的内部和外部维度都必须具有运行时值。不能再使用多维数组了。然后，出于测试目的，您可以创建一个指针数组，如下所示：

```
int store[5 * 5] = { ..... };
int *arr[5] = { store, store + 5, store + 10, store + 15, store + 20 }; 
```

然后，实际上，您可以让您的函数接受一个`int**`. 由于数组的第一个元素是 a `int*`，它将`int**`自动转换为 a 。另一种方法是将数据保存在二维数组中，但只是创建一个由指向该数组的指针构成的“视图”：

```
int *arr[5] = { store[0], store[1], store[2], store[3], store[4] }; 
```

store 是你的`int[5][5]`数组。由于`store[n]`访问了该二维数组的第n个子数组，其元素类型为`int`，其指针转换类型为`int*`，将再次兼容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-23T20:11:31.630

你可以写：

```
void display(char **a) 
```

然后使用`a[i][j]`来引用其中的元素。

该声明的`char **`意思是“指向整数的指针”。将其分解为步骤：

```
char *b = a[i]; 
```

这为您提供了指向数组数组中第`i`' 个数组的第一个元素的指针。

```
char c = b[j]; 
```

这会让你得到`j`数组中的第 ' 个元素`b`。

您将遇到的下一个问题是分配这样的数组数组。

```
char **arrayOfArrays = new char *[10];

for (int n = 0; n < 10; n++)
    arrayOfArrays[n] = new char[20]; 
```

这分配了一个由 10 个数组组成的数组，每个“子”数组有 20 个字符。

在 C/C++ 中，数组访问语法只是一种检索距离指针一定距离的值的方法。

```
char *p = "Hello";

char *pl = p + 2;   // get pointer to middle 'l'
char l = *pl;       // fetch

char o = p[4];      // use array syntax instead 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-23T20:10:05.767

> 还有，为什么数组是保留字？

它不是。您可能正在使用 Visual Studio，因为它在 C++/CLI 中用作本机托管类型，因此它显示为关键字。但是，这与 C++ 无关，Visual Studio 在这方面具有误导性。

至于您的问题：您可以简单地传递一个指向指针的指针，然后直接传递您的嵌套数组（*前提是您正在使用动态分配的数组*）：

```
void display(char** array) … 
```

也就是说，您的函数假定一个固定的、已知的数组长度和一些其他细节。最好使用嵌套的`std::vector`, 或`std::string`（例如）。使用这些现有的数据类型会使您的生活*更*轻松。

```
void display(std::vector<std::string> const& array) {
    for (size_t i = 0; i < array.length(); ++i)
        cout << array[i] << endl;
} 
```

为了利用这一点，您的调用代码也需要更改以使用这些数据结构而不是`char`s 上的普通 C 数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-23T20:12:45.527

`void display(char ** array)` 应该管用。我也不认为它是标准 C/C++ 中的保留字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T06:55:19.740

`arr`是指向您拥有的多维数组的指针，实际上是指向`int`. 现在，由于您的函数接受指向指针的`int`指针，因此您需要获取`arr`using:的地址`&arr`并将其传递给函数，以便您拥有以下代码：

强制数组：传递`&arr`给函数。要在 func 中引用数组：`*maze[x][y]`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-24T00:49:16.123

最好的方法是使用指针，但 Borland C++ 承认将数组作为函数的参数传递。看这段代码（包括：iostream 和 conio）：

```
////////////////////////////////////////////

void ReceivedArray(char x[5]){

for (int i=0; i<5; i++ )
cout << x[i];

}

void main(){

char *x = new char[5];

for (int i=0; i<5; i++ )
x[i]='o';

ReceivedArray(x);
getchar();
}

///////////////////////////////////////////////////////////////

For passing 2D arrays (oops! some lines in spanish, sorry!):

(includes: iostream, stdlb, stdio and math)

/////////////////////////////////////////////////

using namespace std;

void ver(int x[][20]){
for(int i=0; i<15; i++)  {
  for(int j=0; j<20; j++) {
   cout<< x[i][j] <<" ";       }
   cout << "\n";        }

}

void cambiar0(int x[][20]){ int n[255];
   for (int i=255; i>=0; i--)
    n[255-i]=i;

for(int i=0; i<15; i++)
  for(int j=0; j<20; j++)
      for(int k=0; k<255; k++)
       if(x[i][j]==n[k])  {
          x[i][j]=k; break;  }  
}

int main(int argc, char* argv[]){
int x[15][20]; char a; 

for(int i=0; i<15; i++)
  for(int j=0; j<20; j++)
   x[i][j]=rand()%255;

  cout << "¿desea ver la matriz? s/n ";
 cin >> a;
 if(a=='s') ver(x);

 cambiar0(x);

 cout << "\n\n";
 cout << "¿desea ver la matriz? s/n ";
 cin >> a;
 if(a=='s') ver(x);

system("PAUSE"); return 0;
}

/////////////////////////////////// 
```

希望这就是你的意思。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-24T01:19:33.973

Earwicker 的回答遗漏了一个重要的事实。他提出的是数组数组。首先，这会浪费指针数组的内存（“char **arrayOfArrays = new char *[10]”是 this 的创建点）。对于第二个字符数组可能不是连续的内存块，这通常是一个问题。C++ 中唯一的解决方法是创建一维数组并在需要时计算索引。

```
char *b = new char[width*height]; 
```

然后你可以像这样引用元素x，y（x沿宽度，y沿高度）

```
char c=b[width*y+x]; 
```

This may be however a bit slower than the solution above (measured on GCC 3.4.5), so if you are not interested in continuous memory (for example you always access the elements with [][], never by adding integer to a pointer and dereferencing it), then you should use the array af arrays. However, if you are interested in having the continuous memory, e.g. to pass it as initializer to an std::string object or to send it as a whole through a network, you should use the second one.

# c# - 关于 C# 中的 ActiveRecord 设计模式的建议

> ID：535689
> 
> 赞同：1
> 
> 时间：2009-02-11T06:43:54.057
> 
> 标签：c#, design-patterns, api

我正在编写针对嵌入式数据库的 BSD 许可 mini-ORM（支持 ese、sqlite 和 sqlce 开箱即用）

在去年使用 Rails 进行了大量工作之后，我一直在考虑在 C# 中实现 Active Record 模式。

我想出了一些演示代码，想知道界面设计是否合理。

干得好：

```
// first param is the class, second is the primary key
public class Order : ActiveRecord<Order,int> {
    BelongsTo<Customer> Customer { get; set; }

    [PrimaryKey(AutoIncrement=true)]
    public int Id { get; set; }

    public string Details { get; set; }
} 

[Index("FirstName", "LastName")]
[Index("LastName", "FirstName")] 
public class Customer : ActiveRecord<Customer,int> 
{

    public HasMany<Order> Orders { get; set; }

    [PrimaryKey(AutoIncrement=true)]
    public int Id { get; set; }

    [ColumnInfo(MinLength=4, MaxLength=255, Nullable=false)]
    public string FirstName { get; set; }

    [ColumnInfo(MinLength=4, MaxLength=255, Nullable=false)] 
    public string LastName { get; set; }

    public string Comments { get; set; }
}

[TestClass]
public class TestActiveRecord {

    public void Demo() 
    {
        var customer = Customer.Build();
        customer.FirstName = "bob";
        customer.LastName = "doe";

        var order = customer.Orders.Build();
        order.Details = "This is the first order"; 
        customer.Save();

        var customer2 = Customer.Find(customer.Id);

        Assert.AreEqual(1, customer2.Orders.Count); 
    }
 } 
```

抱歉，这是一个问题中的多个问题……您能想到此 API 的任何更改吗？有没有致命的缺陷？是否有任何定义类似接口的开源 ORM？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-11T06:46:02.960

城堡[活动记录](http://castleproject.org/activerecord/index.html)项目。

虽然它不是 Active Record 模式的严格实现，但它工作得很好。奖励是您将在此过程中获得一些使用 NHibernate 的经验。

作为一个编写了自己的非常简单的 OR/M 的人，只是在场景变得更复杂时才发现它缺乏，我强烈建议您认真研究 Caste ActiveRecord 和 NHibernate，除非您将其作为学习经验.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T17:40:17.627

活动记录中介

创建一个继承自这个 AR 类的存储库类。然后你不会破坏你的层次结构，并且你实现了一个存储库模式和你的 AR 模式！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-22T17:41:47.907

有人可以为我可以用来学习的非常简单的 activerecord 类提供代码吗？查看 Castle 和 SubSonic 等项目的源代码有点让人不知所措。我想学习活动记录模式以了解它是如何工作的。我知道我建造的任何东西与 Castle 或 SubSonic 相比都不算什么，但我认为学习体验会很棒。

我查看了 Hayden ActiveRecord，但似乎找不到源。他网站上大多数与活动记录相关的帖子都相当陈旧。

谢谢。

编辑：对不起，我应该为此创建一个新问题......

# cocoa-touch - 使用 Cocoa Touch 的两个异步 NSURLRequest

> ID：535695
> 
> 赞同：0
> 
> 时间：2009-02-11T06:47:38.010
> 
> 标签：cocoa-touch

我正在使用[此处](http://developer.apple.com/documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)显示的示例- 清单 1-5 来请求 URL 的内容，并且一切正常。现在我的问题是，当第一个请求被发送时，我想从第二个网页请求内容，我的问题是，即使我为第二个请求和连接复制那里的所有内容，并为 NSMutableData 创建另一个应该保存的变量第二个请求的数据，我只是将第二个请求数据填充到 *receivedData 中（即原始的第一个请求 NSMutableData）

就像我为第二个请求添加代码的那一刻，只有第二个请求正在执行......

有谁知道如何修改链接示例中的代码，以便我可以发出两个单独的请求？

免责声明：现在学习objective-C，我的背景是C#/VB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T07:15:43.280

如果您使用“self”作为两个请求的委托，那么您将获得两个请求的回调，并且您很可能只将字节写入单个 receivedData 对象。您需要做的是创建一个新类作为委托并为每个请求创建一个新的类实例，或者如果您想继续使用“self”作为委托，请确保您查看“连接”参数传递给委托方法。这将指示回调属于哪个连接，允许您将数据写入适当的 receivedData 对象。

# .net - 如何将多个数据表合并为一个？

> ID：535702
> 
> 赞同：1
> 
> 时间：2009-02-11T06:51:00.310
> 
> 标签：.net, database, datatable

我有多个作为数据表打开的 excel 文件，我想在 .net 中合并所有这些数据表单个 DataTable。

例如，Apr09.xls、May09.xls、Jun09.xls

都有数据如下

Apr09.xls

```
EMPCODE,PresentDays
0001   ,30
0002   ,21 
```

May09.xls

```
EMPCODE,PresentDays
0001   ,25
0002   ,30 
```

新的数据表如下

```
EMPCODE,PresentDays
0001   ,30
0002   ,21
0001   ,25
0002   ,30 
```

如何创建这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T06:53:04.970

Datatable.Merge 可以按如下方式使用

```
For Each fileName As String In Directory.GetFiles("C:\\TEMP\\", "*.xls")
    Dim connectionString As String = String.Format("Provider=Microsoft.Jet.OLEDB.4.0; data source={0}; Extended Properties=""Excel 8.0;HDR=NO;IMEX=1;""", fileName)
    Dim adapter As New OleDbDataAdapter("SELECT * FROM [Sheet1$]", connectionString)
    Dim ds As New DataSet
    adapter.Fill(ds, "anyNameHere")
    Dim TempTable As DataTable
    TempTable = ds.Tables.Item("anyNameHere")
    table1.Merge(TempTable)
    MsgBox(fileName)
Next
DataGridView1.DataSource = table1
MsgBox(table1.Rows.Count) 
```

# nhibernate - 设置强制缓存刷新？

> ID：535704
> 
> 赞同：1
> 
> 时间：2009-02-11T06:52:45.487
> 
> 标签：nhibernate

如何从数据库中重新读取一些（类）项目？我已经阅读过一次并进行了相同的更新，我不会保存更新。现在我需要从数据库中收集一个完整的新项目。

我注意到有一个名为 SetForceCacheRefresh 的函数，但是如何将它与 CreateCriteria 一起使用？

// 垫子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-12T00:19:42.520

```
 IList<T> list = null;
             using (Repository rep = new Repository())
             {
                IQuery iqry = rep.Session.CreateQuery(hql);                    
                iqry.SetForceCacheRefresh(true);
                list = iqry.List<T>();
             } 
```

注意：在调用 List() 之前，将 SetForceCacheRefresh(true) 设置为刷新。

# sharepoint - 我们是否应该将 SharePoint WF 主机用于包含外部（到 SharePoint）数据源的工作流？

> ID：535709
> 
> 赞同：1
> 
> 时间：2009-02-11T06:54:26.467
> 
> 标签：sharepoint, sharepoint-2007, workflow-foundation

我们需要构建几个需要相当高级的工作流功能的应用程序。计划是将数据存储在 SQL Server 中，使用 Windows Workflow Foundation 作为工作流引擎，并使用 Flex 或 Silverlight 等 RIA 技术构建前端。

我们已经设置了 Sharepoint 2007，并且我们中的一些人（包括我）有一些创建自定义 Sharepoint 工作流的经验，这些工作流可以处理 Sharepoint 列表中的数据。

我的问题是，将 Sharepoint 用于工作流程是否有意义，而实际数据存储在 Sharepoint 之外的单独数据库中？我们需要 Sharepoint 的任务、身份验证和电子邮件功能，但是我们的数据模型有点复杂，所以我们宁愿不将数据存储在 Sharepoint 中。我们宁愿不要从头开始使用 Workflow Foundation，因为 Sharepoint 已经为我们提供了我们需要的 90% 的功能。

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T07:28:40.347

我认为这是将 SharePoint 用作平台的一个很好的示例。我没有看到以您描述的方式使用它的任何概念问题。我将 SharePoint 视为一个开发平台。您可能要记住的一件事是，如果您想让工作流继续处理单独数据库中发生的事件，您可能必须更新例如来自外部程序的工作流任务项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T07:44:08.203

您的用例非常合适，并且 SharePoint 为其增添了巨大价值。我强烈建议使用 SharePoint 来托管您的工作流。

我开发了许多 SharePoint 托管的 WF 工作流，我遇到的唯一真正的问题是调用长时间运行的 Web 服务（异步操作），因为 SharePoints WF 主机对其可以侦听事件的外部提供程序的类型有一些限制。

我开发的解决方案（起初有点破解，但最终对我的客户有一些价值）是创建一个位于 SharePoint 外部的服务代理 (WCF)，并将调用路由到远程服务并等待他们的回应。在进行该异步调用的同时，并行活动将创建与异步操作关联的 SharePoint 任务。然后 WF 将在 OnTaskCompleted 活动上停止，这会导致 WF 资源被释放并将状态持久保存到 SQL。由于长时间运行的操作会返回状态更新或完成通知，外部服务将更新相关的 SharePoint 任务。一旦任务被标记为完成，WF 就会脱水并继续执行。这种方法的巧妙之处在于，我可以创建一个仪表板，显示在 SharePoint 之外进行的所有长期运行进程的状态。最后，我将所有这些东西打包成一个复合活动，这样它就不会弄乱我漂亮的工作流程图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T18:27:41.667

我同意 SP 可以提供一个不错的 WF 引擎，但让我问一下……您是否在 SharePoint 中存储任何内容？（任务、数据源等）

我问是因为运行自己的 WF 引擎可能同样容易（而且更合适）。如果您正在运行所有原生 WF 功能，并且只需要一个引擎，您可以编写一个可以启动工作流的快速控制台应用程序。

如果您将 SP 用于WF 以外的*任何东西*，那么我绝对同意使用 SP。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T16:49:04.993

SharePoint 非常适合这种情况。我建议使用业务数据目录 (BDC) 来访问外部数据源。它主要通过使您的数据源可搜索以及提供 OOB Web 部件以通过主子关系、过滤和丰富的 API 显示数据来提供巨大的好处。

我会提醒不要让工作流过于复杂，而是使用较小的工作流、InfoPath 和用户操作将过程分解为多个阶段，以促进整个过程。这就是 SharePoint 真正发挥作用的地方，因为您可以使用仪表板（如果它对您的方案有意义）以及协作、批准......将流程阶段的可见性插入到组织中的其他人身上。这样的例子不胜枚举。

# linq-to-sql - LINQ 结果集问题

> ID：535712
> 
> 赞同：0
> 
> 时间：2009-02-11T06:57:21.093
> 
> 标签：linq-to-sql, caching, datacontext

我使用 LINQ 构建了一个站点，它已经开始显示它带来的结果的问题。

查询得出的结果并不反映数据库中的数据，它们反映的是旧版本的数据库。

在所有创建 LINQ 数据上下文的地方，它都被正确地处理掉了。该站点中使用的示例代码如下所示

```
 using (DataClassesDataContext context = new DataClassesDataContext()) 
 {
     return (<query here>).Distinct().ToList();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T07:21:19.957

调试时在运行时检查生成的 SQL，并根据您的数据库检查结果...

还要检查你的连接字符串，也许你的 DataContext 正在连接到另一个数据库......

# c++ - 您如何理解错误：无法从 'int []' 转换为 'int []'

> ID：535713
> 
> 赞同：4
> 
> 时间：2009-02-11T06:57:30.780
> 
> 标签：c++, arrays, visual-studio-2005, pointers, error-code

编译以下代码时：

```
void DoSomething(int Numbers[])
{
    int SomeArray[] = Numbers;
} 
```

VS2005 编译器报错 C2440: 'initializing' : cannot convert from 'int []' to 'int []'

我知道它实际上是在尝试将指针投射到一个不起作用的数组。但是你如何向学习 C++ 的人解释这个错误呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-11T07:06:14.283

说有类型和不完整类型：

```
struct A; 
```

是结构体的不完整类型，称为 A。而

```
struct A { }; 
```

是一个名为 A 的结构的完整类型。第一个的大小尚不清楚，而第二个的大小是已知的。

有像上面的结构这样的不完整的类类型。但也有不完整的数组类型：

```
typedef int A[]; 
```

那是一个不完整的数组类型，称为 A。它的大小尚不清楚。您不能从中创建数组，因为编译器不知道数组有多大。但是您可以*使用*它来创建一个数组，*前提*是您立即对其进行初始化：

```
A SomeArray = { 1, 2, 3 }; 
```

现在，编译器知道该数组是一个具有 3 个元素的 int 数组。如果您尝试使用指针初始化数组，编译器将不会比以前更聪明，并且会拒绝，因为这不会给它要创建的数组的大小。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-11T09:12:14.933

在试图使错误消息更有帮助时，编译器实际上是在混淆事情。即使`Numbers`参数被声明为一个数组，C/C++ 并不（不能）实际上传递一个数组——`Numbers`参数实际上是一个指针。

所以错误真的应该说`"cannot convert from 'int *' to 'int []'"`

但随后会有混乱——“嘿，`int*`表达中没有涉及”，有人可能会说。

出于这个原因，最好避免使用数组参数——将它们声明为指针，因为无论如何这就是你真正得到的。对学习 C/C++ 的人的解释应该让他们明白数组参数是虚构的——它们实际上是指针。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-11T09:46:39.313

您需要向您要帮助的人解释三件事：

1.  **数组不能按值传递给 C++ 中的函数。** 要执行您想做的事情，您需要将数组的起始地址传递给`DoSomething()`，以及在单独的`int`（好吧`size_t`，但我不会这么说）参数中传递数组的大小。`myArray`您可以使用表达式获取某个数组的开始地址`&(myArray[0])`。由于这是很常见的事情，C++ 允许您只使用数组的名称——例如`myArray`——来获取其第一个元素的地址。（这可能是有用的还是令人困惑的，这取决于你看它的方式。）为了让事情变得更加混乱，C++ 允许你指定一个数组类型（例如`int Numbers[]`) 作为函数的参数，但它暗中将该参数视为声明为指针（`int *Numbers`在本例中）——您甚至可以`Numbers += 5`在内部进行操作`DoSomething()`以使其指向从第六个位置开始的数组！

2.  **当你`SomeArray`在 C++ 中声明一个数组变量时，你必须要么提供一个明确的大小，要么提供一个“initialiser list”**，它是一个逗号分隔的大括号之间的值列表。编译器不可能根据您尝试初始化它的另一个数组来推断数组的大小，因为...

3.  **您不能将一个数组复制到另一个数组中，或者在 C++ 中从另一个数组初始化一个数组。** 因此，即使参数`Numbers`实际上是一个数组（例如大小为 1000）而不是指针，并且您指定了大小`SomeArray`（再次说为 1000），该行`int SomeArray[1000] = Numbers;`也是非法的。

* * *

要做你想做的事`DoSomething()`，首先问问自己：

1.  我需要更改 中的任何值`Numbers`吗？
2.  如果是这样，我是否要阻止调用者看到这些更改？

如果任何一个问题的答案都是“否”，那么您实际上不需要首先制作副本`Numbers`——只需按原样使用它，而无需制作单独的`SomeArray`数组。

If the answer to both questions is "Yes", you will need to make a copy of `Numbers` in `SomeArray` and work on that instead. In this case, you should really make `SomeArray` a C++ `vector<int>` instead of another array, as this really simplifies things. (Explain the benefits of vectors over manual dynamic memory allocation, including the facts that they *can* be initialised from other arrays or vectors, and they will call element constructors when necessary, unlike a C-style `memcpy()`.)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-11T07:35:12.780

当我试图解释某事时，我总是试图降低到最低水平，然后从那里建立起来。这就是我喜欢学习的方式，我发现如果你从他们所知道的基础开始，然后从那里开始，人们会更自在。

在这种情况下，我可能会从以下内容开始：

> 编译器正在尝试进行赋值，因为您编写了一个赋值操作。在 C++ 中，您不能直接分配给数组，因为它没有内置的赋值运算符（任何类型的，数组只支持初始化器和索引）。因为 C++ 支持类型的重载运算符，所以编译器会为“assigned-to”类型寻找一个重载的赋值运算符，该类型将“assigned-from”类型作为其参数。由于 int[] 也没有将 int[] 作为参数的重载运算符，因此编译器在该行出错，并且错误告诉您为什么编译器无法处理该行。

是的，这可能有点过头了，而只是说一些关于大小、不完整类型等的知识。我意识到它也不完整（例如：没有讨论初始化程序分配与正常分配等）。但是，我的目标通常是让人们自己找到下一个答案，为此，您通常需要列出得出答案的思考过程。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-11T07:00:12.257

也许你的答案可能是，“因为编译器不知道数组有多大。”

如果有明确的数组大小（为了清楚起见，可能使用 typedef），您的示例可能会起作用，然后您可以在引入可变大小分配时解释指针。

# vb.net - 随机浏览图像（动画）

> ID：535715
> 
> 赞同：0
> 
> 时间：2009-02-11T06:59:30.540
> 
> 标签：vb.net, picturebox

我试图制作一个在文件夹中显示图片的程序。每张图片的路径都存储在数据库中。我的问题是它只显示存储在数据库中的最后一张图片，而不是所有图片。

代码是：

```
Private Sub Form3_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        Me.Timer1.Enabled = True

End Sub

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

    Try
        Dim ctr As Integer = 0
        Dim pic As String
        Dim sqlconn As New SqlConnection("data source=NMPI_2;initial catalog=IPCS; " & _
                             "password=rhyatco; " & _
                             "persist security info=True; " & _
                             "user id= rhyatco;" & _
                             "packet size=4096")
        sqlconn.Open()
        Dim query As String = "Select picture from Bpicture"
        Dim sqlcomm As New SqlCommand(query, sqlconn)
        Dim reader As SqlDataReader
        reader = sqlcomm.ExecuteReader

        While reader.Read
            pic = reader("picture").ToString
            Me.PictureBox1.Image = Image.FromFile(pic)
            Me.PictureBox1.SizeMode = PictureBoxSizeMode.StretchImage
        End While

    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-11T07:04:47.563

它总是会显示最后一个图像，因为您正在检索整个表并使用 While 循环检索所有记录。最后一张图片永远是赢家。

有两种可能的解决方案：

**一**，从数据库中随机检索一张图像。检查这个[stackoverflow线程](https://stackoverflow.com/questions/19412/how-to-request-a-random-row-in-sql)如何随机选择一行。此解决方案的警告是您每次都调用数据库。

**二**，从数据库中检索所有图像，将数据存储在集合中，并从集合中随机选择一张图像。此解决方案的警告是，可能有太多图像无法存储在内存中的集合中，在这种情况下，您必须使用 One。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T07:08:06.400

好吧，我看到您提供的问题是您正在运行查询并在每次计时器触发时遍历结果集中的所有行。

我认为您真正想要的是在表单加载时下载一次结果集，然后在计时器上切换您正在查看的图片。

一遍又一遍地轮换它们的一种方法是下载列表并将它们填充到文件名队列中，然后在计时器上执行以下操作（抱歉，我的示例是在 C# 中）：

```
string fileName = imageFileNameQueue.Dequeue();
PictureBox1.Image = Image.FromFile(fileName);
imageFileNameQueue.Enqueue (fileName); // Put the file back at the back of the queue 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-02-11T07:22:40.937

对现有解决方案的一个简单更改就是以一定的概率跳出 while 循环。此解决方案的一个问题是查询结果中较晚的图像比较早的图像显示的可能性要小得多。

我没有做过任何 VB，所以我正在通过 Google 进行编码，但是您需要在某处创建 Random 的实例：

```
Dim rand as new Random() 
```

然后在你的 while 循环中，拉出一个随机数，看看你是否应该停止：

```
While reader.Read
    ...
    If rand.Next(10) > 8 Then
       Exit While
    End If
End While 
```

编辑：您还应该移动代码以将 Image 和 SizeMode 设置出 while 循环，以便在您决定图像后只设置一次。

# c# - 具有初始化块的 Java 匿名内部类的 C# 等效项

> ID：535720
> 
> 赞同：2
> 
> 时间：2009-02-11T07:02:36.557
> 
> 标签：c#, java, class, initialization, anonymous-class

在 Java 中，我喜欢使用诸如

```
List<String> list = new ArrayList<String>() {{add("foo");}}; 
```

有没有办法在 C# 的 1 行中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-11T07:19:16.733

这称为*集合初始化程序*，它是 C# 3.0 的一部分。

除了列表之外，您还可以初始化更复杂类型的集合，只要它们实现 IEnumerable 并为集合初始化程序中的每个元素提供适当的 Add 方法。例如，您可以使用如下`Add(key, value)`方法`Dictionary<TKey, TValue>`：

```
var dict = new Dictionary<string, int> 
{ 
    {"first", 10 }, 
    {"second", 20 }
}; 
```

更多细节可以在 C# in Depth 的第 8 章中找到，可以从[Manning 的网站](http://manning.com/skeet)免费下载。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-11T07:07:26.327

我认为你想要的是一个数组初始化器

```
List<string> list = new List<string>() { "foo" }; 
```

多个项目应以逗号分隔

```
List<string> list = new List<string>() { "foo","bar","bas"}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-11T07:04:46.083

您可以在 .NET 3.5 中设置属性值：

```
List<string> list = new List<string> () { Property = Value, Property2 = Value2 }; 
```

或者初始化一个数组：

```
List<string> list = new List<string> () { "value1", "value2" }; 
```

但是，您不能以这种方式调用方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T07:20:26.247

如果您只需要处理将对象添加到集合中，那么集合初始化器工作得很好，但如果您需要执行更多静态初始化，您可以使用称为静态构造器的东西，它的工作方式与 java 中的静态初始化器相同

[这](http://www.c-sharpcorner.com/UploadFile/cupadhyay/StaticConstructors11092005061428AM/StaticConstructors.aspx)格式很差，但似乎涵盖了它

# ruby - Ruby 最大整数

> ID：535721
> 
> 赞同：93
> 
> 时间：2009-02-11T07:03:51.280
> 
> 标签：ruby, fixnum

我需要能够确定 Ruby 中的系统最大整数。任何人都知道如何，或者是否可能？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2009-04-10T00:12:25.657

```
FIXNUM_MAX = (2**(0.size * 8 -2) -1)
FIXNUM_MIN = -(2**(0.size * 8 -2)) 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2009-02-11T07:23:15.290

当整数溢出时，Ruby 会自动将整数转换为大整数类，因此（实际上）它们的大小没有限制。

如果您正在寻找机器的大小，即 64 位或 32 位，我[在 ruby​​-forum.com 找到了这个技巧](http://www.ruby-forum.com/topic/177435)：

```
machine_bytes = ['foo'].pack('p').size
machine_bits = machine_bytes * 8
machine_max_signed = 2**(machine_bits-1) - 1
machine_max_unsigned = 2**machine_bits - 1 
```

* * *

如果您正在寻找 Fixnum 对象的大小（整数小到可以存储在单个机器字中），您可以调用`0.size`以获取字节数。我猜在 32 位版本上应该是 4，但我现在无法测试。此外，最大的 Fixnum 显然是`2**30 - 1`(或`2**62 - 1`)，因为一位用于将其标记为整数而不是对象引用。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-02-11T23:59:47.793

阅读友好手册？谁愿意这样做？

```
start = Time.now
largest_known_fixnum = 1
smallest_known_bignum = nil

until smallest_known_bignum == largest_known_fixnum + 1
  if smallest_known_bignum.nil?
    next_number_to_try = largest_known_fixnum * 1000
  else
    next_number_to_try = (smallest_known_bignum + largest_known_fixnum) / 2 # Geometric mean would be more efficient, but more risky
  end

  if next_number_to_try <= largest_known_fixnum ||
       smallest_known_bignum && next_number_to_try >= smallest_known_bignum
    raise "Can't happen case" 
  end

  case next_number_to_try
    when Bignum then smallest_known_bignum = next_number_to_try
    when Fixnum then largest_known_fixnum = next_number_to_try
    else raise "Can't happen case"
  end
end

finish = Time.now
puts "The largest fixnum is #{largest_known_fixnum}"
puts "The smallest bignum is #{smallest_known_bignum}"
puts "Calculation took #{finish - start} seconds" 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-02-11T07:18:10.387

在 ruby​​ 中，Fixnums 会自动转换为 Bignums。

要找到可能的最高 Fixnum，您可以执行以下操作：

```
class Fixnum
 N_BYTES = [42].pack('i').size
 N_BITS = N_BYTES * 8
 MAX = 2 ** (N_BITS - 2) - 1
 MIN = -MAX - 1
end
p(Fixnum::MAX) 
```

无耻[地从红宝石谈话](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/149748)中扯下来。在那里查看更多详细信息。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-03-24T10:06:05.940

自 Ruby 2.4 以来没有最大值，因为 Bignum 和 Fixnum 统一为 Integer。请参阅[功能 #12005](https://bugs.ruby-lang.org/issues/12005)

```
> (2 << 1000).is_a? Fixnum
(irb):322: warning: constant ::Fixnum is deprecated
=> true

> 1.is_a? Bignum
(irb):314: warning: constant ::Bignum is deprecated
=> true

> (2 << 1000).class
=> Integer 
```

不会有任何溢出，会发生内存不足。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-27T07:42:42.987

正如@Jörg W Mittag 指出的那样：在 jruby 中，固定 num 大小始终为 8 个字节长。此代码片段显示了真相：

```
fmax = ->{
  if RUBY_PLATFORM == 'java'
    2**63 - 1
  else
    2**(0.size * 8 - 2) - 1
  end
}.call

p fmax.class     # Fixnum

fmax = fmax + 1  

p fmax.class     #Bignum 
```

# c# - 如何使用 Dynamic Linq 命名字段？

> ID：535741
> 
> 赞同：4
> 
> 时间：2009-02-11T07:11:54.100
> 
> 标签：c#, asp.net, linq, dynamic, dynamic-linq

我有一个巨大的动态查询，但我希望选择语句不输出列名，而是自定义值。例如，如果我在做一个普通的 Linq 查询，我可以这样做：

```
var v = from p in db.items select new { name = p.item_name, price = p.item_price }; 
```

这会给我很好的 '.name' 和 '.price' 访问器

但如果我使用的是 Dyanmic Linq，我可以这样做：

```
var v = db.items.Select("new (item_name,item_price)"); 
```

工作正常，但是

```
var v = db.items.Select("new (name=item_name,price=item_price)"); 
```

我收到一个错误： *“类型‘项目’中不存在属性或字段‘名称’”*

这可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-11T08:05:09.587

好的，想通了，这就是所需要的：

```
var v = db.items.Select("new (item_name as name,item_price as price)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-02-01T12:59:01.583

你也可以试试这个。

```
var v = db.items.Select("new(it[\"item_name\"]  as name,it[\"item_price\"] as price)"); 
```

# database - 存储过程与 .net 应用程序中的复杂处理

> ID：535742
> 
> 赞同：4
> 
> 时间：2009-02-11T07:12:21.960
> 
> 标签：database, performance, stored-procedures, star-schema

我们正在使用 SQL Server 数据库在 .net 3.5 中构建一个新应用程序。该数据库相当大，大约有 60 个表，其中包含数据负载。.net 应用程序具有将数据从数据输入和第三方系统导入此数据库的功能。

数据库中的所有数据都可用后，系统必须进行大量计算。计算逻辑相当复杂。计算所需的所有数据都在数据库中，输出也需要存储在数据库中。每周都会进行数据收集，并且需要每周进行计算以生成所需的报告。

由于上述情况，我正在考虑使用存储过程进行所有这些计算。问题是我们还需要数据独立性，而存储过程将无法为我们提供。但是，如果我一直在.net 中通过查询数据库来完成所有这些工作，我认为它无法快速完成工作。

例如，我需要查询一个表，该表将返回 2000 行，然后对于每一行我需要查询另一个表，该表将返回 300 个结果，而不是每行我需要查询多个表（大约 10 个）以获得所需数据，进行计算并将输出存储在另一个表中。

现在我的问题是我应该继续使用存储过程解决方案并忘记数据库独立性，因为性能很重要。我也认为如果我们使用存储过程解决方案，开发时间会少很多。如果任何客户想要在 oracle 数据库上使用此解决方案（因为他们不想维护另一个数据库），那么我们将存储过程移植到 oracle 数据库并维护两个版本以供将来任何更改/增强。同样，其他客户可能会要求其他数据库。

* * *

我上面提到的 2000 行是产品 skus。我提到的 300 行是我们要计算的不同属性，例如处理成本、运输成本等。我提到的 10 个表包含有关货币换算、单位换算、网络、区域、公司、售价、每人售出数量的信息天等。生成的表将所有信息存储为星型模式，用于分析和报告目的。目标是获取有关产品的任何详细信息，以便了解产品销售的哪些属性正在花费我们的钱以及我们可以在哪里进行改进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-11T18:48:38.713

我不会考虑在数据库以外的任何地方进行数据操作。

大多数人尝试使用循环算法处理数据库数据。如果您需要真正的速度，请将您的数据视为一组行，您可以在一次更新中更新数千行。我已经将新手程序员编写的许多游标循环重写为单个更新语句，从而大大提高了执行时间。

你说：

> 我需要查询一个表，该表将返回 2000 行，然后对于每一行，我需要查询另一个表，该表将返回 300 个结果，而不是每行我需要查询多个表（大约 10 个）以获取所需的数据

从您的问题来看，您似乎没有使用连接，并且您已经在循环思考。即使您确实打算循环，最好编写一个查询来加入所有必要的数据，然后循环它。记住 update 和 insert 语句可能有非常复杂的查询来驱动它们。包含在 CASE 语句、派生表、条件连接 (LEFT OUTER JOIN) 中，您几乎可以在单个更新/插入中解决任何问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-11T07:19:30.400

好吧，没有任何关于您在这些表格中拥有哪些数据的具体细节，只是餐巾纸计算的背面显示您正在谈论在您提供的示例中处理超过 600 万行信息（2,000 行 * 300 行 *（1 行* 10 张桌子））。

所有这些行是不同的，还是 10 个表的查找信息具有相对较低的基数？换句话说，是否可以编写一个程序，将内存中的 10 个查找表中的信息，然后只处理内存中的 300 行结果集来执行计算？

另外，我会担心可伸缩性——如果您在存储过程中执行此操作，则可以保证它是一个受单个数据库服务器速度限制的串行过程。如果您有多个客户端程序副本的可能性，每个副本处理 2,000 个初始记录集的一部分，那么您可以并行执行一些计算，也许可以加快您的整体处理时间，并使其可扩展以适应何时您的初始记录集大 10 倍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T07:39:14.487

在 C# 中编程计算代码之类的东西往往更容易且更易于维护。此外，通常将 SQL Server 上的处理保持在最低限度是一种很好的做法，因为数据库是最难扩展的。

话虽如此，从您的描述看来，存储过程方法是可行的方法。当计算代码依赖于大量数据时，将数据移出服务器进行计算会更加昂贵。因此，除非您有优化相关数据的合理方法（例如缓存查找表？），否则您很可能会发现它更痛苦，那么不使用存储过程是值得的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-02-16T01:56:51.460

每次都存储过程，但正如 KM 在这些存储过程中所说，将这些迭代保持在最低限度，也就是说在 SQL 中使用连接，关系数据库非常擅长连接。

数据库可扩展性将是一个小问题，尤其是当您听起来像是在批处理中执行这些计算时。

除了最琐碎的 CRUD 应用程序之外，数据库独立性实际上并不存在，因此，如果您最初的要求是让这一切都与 SQL Server 一起工作，那么请利用 RDBMS 提供的工具（毕竟您的客户将花费大量金钱）在上面）。如果（这是一个很大的如果）后续客户端真的不想使用 SQL Server，那么您将不得不硬着头皮用另一种存储过程的方式对其进行编码。但是正如您所确定的：“如果我一直在 .net 中通过查询数据库执行所有这些操作，我认为它无法快速完成工作。” 您已经将这样做的费用推迟到需要时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-16T02:12:56.520

我会考虑在 SQL Server Integration Services (SSIS) 中执行此操作。我将计算放入 SSIS，但将查询保留为存储过程。这将为您提供数据库独立性 - SSIS 可以通过 ODBC 连接处理来自任何数据库的数据 - 以及高性能。只有简单的 SELECT 语句会在存储过程中，并且这些是 SQL 标准中最有可能在多个数据库产品中相同的部分（假设您坚持使用标准形式的查询）。

# python - 如何在 Jinja 中创建包含模板后面的值的标签？

> ID：535743
> 
> 赞同：3
> 
> 时间：2009-02-11T07:12:34.427
> 
> 标签：python, templating, jinja2

我正在使用 Jinja2，我正在尝试创建几个可以一起工作的标签，这样如果我有一个看起来像这样的模板：

```
{{ my_summary() }}
... arbitrary HTML ...
{{ my_values('Tom', 'Dick', 'Harry') }}
... arbitrary HTML ...
{{ my_values('Fred', 'Barney') }} 
```

我最终会得到以下结果：

```
This page includes information about <b>Tom</b>, <b>Dick</b>, <b>Harry</b>, <b>Fred</b>, and <b>Barney</b>.
... arbitrary HTML ...
<h1>Tom, Dick, and Harry</h1>
... arbitrary HTML ...
<h1>Fred and Barney</h1> 
```

换句话说，页面开头的 my_summary() 包含页面稍后提供的信息。它应该足够聪明，可以考虑到`include`and`import`语句中出现的表达式。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-11T10:55:22.750

免责声明：我不知道 Jinja。

我的猜测是你不能（容易）做到这一点。

我建议以下替代方案：

*   将 Tom、Dick 等值作为变量从外部传递给模板。
*   让您的自定义标签将值作为参数。
*   我不知道你的情况是什么“外部”。如果模板用于 Web 应用框架，“外部”可能是控制器方法。
*   例如：

模板：

```
{{ my_summary(list1 + list2) }}
... 任意 HTML ...
{{ my_values(list1) }}
... 任意 HTML ...
{{ my_values(list2) }}

```

控制器：

```
def a_controller_method（请求）：
    返回渲染模板（'模板文件名'，{
        'list1'：['迪克'，'汤姆'，'哈利']，
        'list2'：['弗雷德'，'巴尼']}）

```

*   如果从外部传递值不可行，我建议您在模板顶部定义它们，如下所示：

```
{% set list1 = ['Dick', ...] %}
{% set list2 = ['Fred', ...] %}
{{ my_summary(list1 + list2) }}
... 任意 HTML ...
{{ my_values(list1) }}
... 任意 HTML ...
{{ my_values(list2) }}

```

# .net - 错误： .ColumnName 和 .ColumnName 具有冲突的属性：DataType 属性不匹配

> ID：535749
> 
> 赞同：19
> 
> 时间：2009-02-11T07:16:50.903
> 
> 标签：.net, vb.net, excel, datatable

我正在尝试使用 DataTable.Merge() 选项合并多个 excel 文件

```
 For Each fileName As String In Directory.GetFiles("C:\TEMP\.", "*.xls")
        Dim connectionString As String = String.Format("Provider=Microsoft.Jet.OLEDB.4.0; data source={0}; Extended Properties=""Excel 8.0;HDR=NO;IMEX=1;""", fileName)
        Dim adapter As New OleDbDataAdapter("SELECT * FROM [Sheet1$]", connectionString)
        Dim ds As New DataSet
        adapter.Fill(ds, "anyNameHere")
        Dim TempTable As DataTable
        TempTable = ds.Tables.Item("anyNameHere")
        table1.Merge(TempTable)
        MsgBox(fileName)
    Next
    DataGridView1.DataSource = table1
    MsgBox(table1.Rows.Count) 
```

但是在合并时会出现以下错误

```
<target>.ColumnName and <source>.ColumnName have conflicting properties: DataType property mismatch. 
```

这是因为 excel 中的一列被读取为文本，另一列被读取为双精度，而两者都有数值。

为了避免这种情况，我还在连接字符串中提到了 IMEX=1，但仍然出现此错误。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-02-11T07:24:16.473

在 Merge 中使用 MissingSchemaAction.Ignore 作为 MissingSchemaAction 参数

```
table1.Merge(TempTable, True, MissingSchemaAction.Ignore) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-11T07:22:10.720

如果列是数字，请更正将该列视为文本的 xls 文件。
当您合并数据时，您不希望列在结构上相同吗？

# linux - Linux 中合理数量的 inotify 监视是多少？

> ID：535768
> 
> 赞同：54
> 
> 时间：2009-02-11T07:25:08.763
> 
> 标签：linux, inotify, lsyncd

我正在开发一个守护进程，它通过 inotify 监视文件事件，以在访问文件时触发各种类型的事件。我读过手表有点贵，因为内核存储了每个被监视文件的完整路径名。

多少块手表会太多？

编辑：大多数情况下，我想知道..你有没有看到过明显的性能冲击，如果有的话，它发生在多少只手表上？是的，我必须递归地监视/（但是它是一个最小的引导系统）。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2011-08-17T11:14:08.643

AFAIK内核不存储路径名，而是存储inode。然而，在 32 位系统上，每个 Watch 有 540 个字节。在 64 位上翻倍。

我从 Lsyncd 知道（也许你想看看？）拥有一百万块手表的人。它只吃一千兆字节的内存。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-02-11T07:39:25.110

您可以通过读取`/proc/sys/fs/inotify/max_user_instances`（最大 inotify “对象”数）和`/proc/sys/fs/inotify/max_user_watches`（最大观察文件数）找到系统限制，所以如果超过这些数字，那就太多了；-) 最大观察数通常是几万或更高——在我的系统上，262143——这可能比你需要的多，除非你试图查看文件系统中的每个文件，但你不应该这样做。我想说，尽量不要使用比你需要的更多的 inotify 手表，除非你注意到性能显着下降，否则不要担心。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2021-04-20T02:56:22.873

`/proc/sys/fs/inotify/max_user_watches`是**当前****每个用户**的最大观看次数。

从历史上看，内核默认为 8192，但鉴于许多 Linux 发行版对其内核构建进行了相当多的定制，这可能并非在每个 Linux 系统上都是如此。最近的内核更改 [1]`max_user_watches`根据系统拥有的 RAM 量动态选择范围 [8192, 1048576] 中的默认值。（5.11 是第一个包含此更改的内核版本。）

AFAICT，`root`可以更改为 2147483647 (2 ^(31)`max_user_watches` -1) 或以下的任何值，只要您确信您有足够的 RAM 来支持该数量的手表。

[1] [https://github.com/torvalds/linux/commit/92890123749bafc317bbfacbe0a62ce08d78efb7](https://github.com/torvalds/linux/commit/92890123749bafc317bbfacbe0a62ce08d78efb7)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-10T21:49:02.650

我的资料：

```
[foo@caffeine ~]# cat /var/log/lsyncd.status | grep Inotify
Inotify watching 293208 directories

[foo@caffeine ~]# cat /proc/sys/fs/inotify/max_user_watches
1048576 
```

lsyncd 使用大约 130M 的内存。

我使用 lsyncd 使一些目录与灾难恢复服务器保持同步。

主服务器上没有性能损失/惩罚。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-03-17T08:00:17.307

这取决于你有多少内存

虽然 524288 是可以观看的最大文件数，但如果您处于内存特别受限的环境中，您可能希望降低该数字。每个文件监视占用 540 字节（32 位）或 ~1kB（64 位），因此假设消耗了所有 524288 个监视，导致上限约为 256MB（32 位）或 512MB（64 位） .

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-02-11T07:35:37.053

1000 亿万亿可能太多了。[Kernel Korner - inotify 的介绍中](http://www.linuxjournal.com/article/8478)提到了“成千上万的手表”，所以至少这个数字应该不是问题。

# c# - ASP.NET：GRIDVIEW：如何删除一行中的整个文本

> ID：535769
> 
> 赞同：1
> 
> 时间：2009-02-11T07:25:36.297
> 
> 标签：c#, asp.net, gridview

我需要在 GridView 的 RowDataBound 事件中连续删除整个文本（甚至是文本/单元格之间的空格）。是否可以？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-11T07:32:38.667

C＃

在 RowDataBound 事件上

```
e.Row.Style.Value = "text-decoration:line-through;" 
```

这就是您的 GridView 的渲染方式，它可以工作！

```
<table>
<tr style="text-decoration:line-through;">
<td>some text</td>
<td>some text</td>
</tr>
<tr style="text-decoration:line-through;">
<td>some text</td>
<td>some text</td>
</tr>
<tr style="text-decoration:line-through;">
<td>some text</td>
<td>some text</td>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-11T07:31:14.613

是的，您可以将所有行单元格的内容放入 <strike> 标记中。例子，

```
row.Cell[0].Text = "<strike>cell content from row.DataItem</strike>"; 
```

但它只会打击单元格中的文本。如果您将 cellpadding 和 cellspacing 设置为行的表格，那么它现在可能看起来不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:55:12.597

```
function oprt_OnRowDataBound(e) {
    if (e.dataItem.IsDeleted == true) {
        e.row.style.textDecorationLineThrough = true;
    };
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-29T09:52:11.860

或者只是在 Grid 视图 RowDataBound 事件中写入下面的颜色，它将在 Grid 视图中删除整行

```
If DataBinder.Eval(e.Row.DataItem, "Notes") <> "" Then
                e.Row.ForeColor = Color.Red
                e.Row.Font.Strikeout = True
End If 
```

它对我很好

# visual-studio - 为什么条件断点会在调试时降低应用程序的执行速度？

> ID：535779
> 
> 赞同：7
> 
> 时间：2009-02-11T07:32:25.673
> 
> 标签：visual-studio, debugging, conditional-breakpoint

当我在VS2005中使用条件断点而不是使用临时代码来检查特定条件时，我注意到它需要更多时间并且执行速度降低了！！你知道为什么吗？以及如何解决这个问题？

示例：

```
 int sequence = atoi(m_SequenceNumber.GetAscii());
    if( sequence == 392914)//temporary code to check to step into code
    {
        int x = 0;//I put breakpoint here
    } 
```

前面的代码将比我使用条件断点（序列 == 392914）更快地执行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-11T07:52:49.087

使用内存观察点比使用条件断点更好（如果可能）。条件断点（正如其他人指出的那样）必须在每次执行指针越过该点时运行额外的代码，以确定它是否会中断 - 显然这需要额外的时间。某种类型的内存观察点可以使用某些特殊的硬件寄存器——你可以设置多少个可以加速的观察点是有限制的，但如果你可以使用它们，几乎不会有速度损失。

使用断点窗口设置内存观察点。您不是在一行代码上设置它，而是在内存中的一个地址上设置它。这表明了明显的限制，它仅适用于您实际上可以获取地址的东西，例如全局变量和动态分配的内存区域（使用`new`等）。您可以观看多少内存是有限的（基于 CPU，我认为您可能会获得或多或少的特殊寄存器分配）。

我现在实际上并没有坐在 VS 前面，但粗略地说，您在断点窗口中单击鼠标右键并选择“新数据断点”之类的内容。然后输入内存地址和大小（以字节为单位）。每当值更改时，您的观察点就会触发。这对于找出内存损坏问题特别有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-11T08:07:43.950

我过去也遇到过这个问题，但从未真正找到在大循环中继续使用条件断点而不影响性能的方法。我确实了解到您可以插入一些类似这样的临时代码，这些代码不会影响性能并且会导致 VS 中断（与条件断点的行为相同）。

```
if ( condition ) Debugger.Break(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-11T09:02:26.517

想想如果您正在编写调试器，您将如何实现条件断点。调试器唯一有机会评估条件的时间是断点被命中时。因此，即使断点就您而言是有条件的，但就处理器而言，每次执行指令时都会遇到断点。调试器获得控制权并执行以下操作：

*   确定断点是有条件的
*   计算表达式
*   如果表达式为假，调试器继续执行
*   否则，调试器会将控制权交给您

因此，即使您从未看到断点命中（因为不满足条件），调试器也可能会处理断点并每秒评估条件数千次（或者可能更多次）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T07:35:42.483

我认为这是因为执行条件需要时间。它仍然比手动步进必要的次数要快得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T07:45:29.230

编译器可以优化（至少一点）添加的临时代码。条件断点可能会跳转到一些 Visual Studio 代码，这些代码将手动检索所需信息以了解它是否真的需要暂停。

这可以以某种方式解释为什么需要更多时间。但我只是猜测。

# c# - .NET 3.5 - 从 WPF 应用程序异步多次调用 Web 服务

> ID：535788
> 
> 赞同：1
> 
> 时间：2009-02-11T07:35:35.337
> 
> 标签：c#, web-services, asynchronous

继我之前的问题 [link text][1] 之后，我遇到了一个新问题。

我有一个将调用 Web 服务的 WPF 应用程序。通过按下“GO”按钮将异步调用此 Web 服务。结果可能需要 30 秒左右才能返回。

问题是我希望用户能够多次单击“GO”按钮来发出多个请求。

我*不*想要的是每次按下按钮时客户端都打开与 Web 服务的新连接。Web服务方法很简单：

调用执行请求（int executionID）

此方法只返回一个标志，指定执行请求的成功或失败。

现在，如果可能的话，我真的不想在客户端对这些请求进行排队，因为已经在服务器上建立了一个队列。实现这一目标的最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T07:41:16.540

如果您使用 WCF 与您的 Web 服务进行通信，那么您可以控制连接的打开/关闭：

1.  拥有一个通用 WCF 连接（可能是窗口范围的全局变量）
2.  每次单击 Go 按钮时，检查连接是否打开。如果没有打开连接，如果是则无事可做。
3.  在某个逻辑点（关闭窗口，执行一些意味着不会单击 Go 的操作）关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T06:59:18.640

我最终只是使用 BackGroundWorkers 来触发 Web 服务请求。我认为我们仍在以这种方式打开多个连接，但是请求的数量并不大，我们正在考虑更改我们的架构，以便发送到队列处理程序的一个主请求可以启动所有其他请求。

如果我有更多时间来解决这个问题，我认为 WCF 将是最好的选择。

# iphone - TouchXML 无法在 iPhone 上解析 YQL 结果 XML

> ID：535791
> 
> 赞同：0
> 
> 时间：2009-02-11T07:37:33.210
> 
> 标签：iphone, xml, parsing, touchxml

问题 1：有没有人使用过 TouchXML，我在解析具有 & 甚至 & 之类的字符的 rssfeed 时遇到问题 解析器将 url 作为输入，并且似乎不解析 XML 内容。NSXMLParser 对于相同的提要 URL 没有这样的问题。问题 2：NSXMLParse 的另一个问题是当 foundCharacter() 方法找到“\n”时，即使是这样的调用

```
if([currentElementValue isEqualToString:@"\n"])
return;

currentElementValue = [currentElementValue stringByReplacingOccurrencesOfString:@"\n" withString:@""]; 
```

这两行似乎都没有消除 \n 字符。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-02-27T03:43:09.637

您需要转义换行符序列

XML中有一个“\n”作为字符串，但上面的行正在寻找作为OSX中换行符的字节码（我认为是0x0A）。

您需要查找 "\\n" ，它是字符序列*backslash-n*。

```
[currentElementValue stringByReplacingOccurrencesOfString:@"\\n" withString:@""] 
```

会给你你想要的！

# c - 命令行处理库 - getopt

> ID：535792
> 
> 赞同：6
> 
> 时间：2009-02-11T07:37:53.553
> 
> 标签：c, getopt

有人可以帮助我使用 getopt 功能吗？

当我主要执行以下操作时：

```
char *argv1[] = {"testexec","-?"};
char *argv2[] = {"testexec","-m","arg1"};
int  cOption;
/* test for -? */

setvbuf(stdout,(char*)NULL,_IONBF,0);
printf("\n argv1 ");
while (( cOption = getopt (2, argv1, "m:t:n:fs?")) != -1) {
    switch(cOption){
        case 'm':
            printf("\n -m Arg : %s \n",optarg);
            break;
        case '?':
            printf("\n -? Arg ");
            break;
        case 'n':
            printf("\n -n Arg : %s \n",optarg);
            break;
    }
}

printf("\n argv2 ");

while (( cOption = getopt (3, argv2, "m:t:n:fs?")) != -1) {
    switch(cOption){
        case 'm':
            printf("\n -m Arg : %s \n",optarg);
            break;
        case '?':
            printf("\n -? Arg : %s \n",optarg);
            break;
        case 'n':
            printf("\n -n Arg : %s \n",optarg);
            break;
    }
} 

```

我在使用旧 libc 版本的 rhel3 上运行此代码。我不知道准确的说是哪一个。

现在的问题是 getopt 第二次无法使用 argv2。但是，如果我用 argv1 注释掉第一个 getopt 调用，它就可以工作。

有人可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-11T07:45:22.583

argv1 和 2 必须以 0 结尾：

```
char* argv1[] = {"par1", "par2", 0}; 
```

*编辑*：好的，我阅读了 getopt 手册页，发现了这个：

> 变量 optind 是 argv 中要处理的下一个元素的索引。系统将此值初始化为 1。调用者可以将其重置为 1 以重新开始扫描相同的 argv，或者在扫描新的参数向量时。

因此，在 getopt 的两个调用之间设置 optind=1 可以使其按预期工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-11T07:48:20.720

该`getopt()`函数使用一些全局变量（如`optind`and `optarg`）来存储调用之间的状态信息。处理完一组选项后，这些变量中会留下数据，这些数据会导致下一组选项出现问题。您可能会尝试`getopt`通过清除变量来重置调用之间的状态，但我不确定这是否会起作用，因为该函数可能会使用其他未记录的变量，并且您永远不会知道您是否已全部获取; 此外，它绝对是不可移植的（即，如果`getopt()`更改的实现，您的代码会中断）。有关详细信息，请参见[手册页](http://linux.die.net/man/3/getopt)。如果可以的话，最好不要`getopt()`在给定程序中使用超过一组参数。

我不确定是否有一个实际的函数来重置`getopt`的状态（或者可能是函数的可重入版本，它可以让你将状态存储在你自己的变量中）......我似乎记得曾经看到过类似的东西，但我现在找不到它：-/

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-01T12:54:37.180

如手册页所述：

“扫描多个参数向量或多次重新扫描同一向量的程序，并希望在 optstring 的开头使用 GNU 扩展，例如 '+' 和 '-'，或在两次扫描之间更改 POSIXLY_CORRECT 的值，必须通过将 optind 重置为 0 而不是传统值 1 来重新初始化 getopt()。（重置为 0 会强制调用内部初始化例程，该例程重新检查 POSIXLY_CORRECT 并检查 optstring 中的 GNU 扩展。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T08:04:32.397

您有什么理由不使用 getopt_long() 代替吗？在大多数平台上，getopt() 只是调用 _getopt_long() 并带有一个开关来禁用长参数。我所知道的（仍在使用的）几乎所有平台都是这种情况，包括 Linux、BSD 甚至像 HelenOS 这样的新兴操作系统——我知道，我是将 getopt 移植到它的 libc 的人 :)

至少在他们习惯使用它之前，使用您的程序的任何人都更容易拥有较长的选项。

getopt_long() 将允许您使用两个（或更多）选项索引，它们在处理完参数后可以保持“活动”，只有内部（全局，不可重入）的索引必须重新设置，这没什么大不了交易。

这使您可以轻松地将参数计数与两次调用中实际传递的选项数量进行比较，并具有许多其他好处。请考虑不要使用过时的接口。

看看getopt.h，你会明白我的意思。

# pdf - 如何合并显示在同一页面上的两个 PDF 页面？

> ID：535794
> 
> 赞同：27
> 
> 时间：2009-02-11T07:38:37.670
> 
> 标签：pdf, pdf-generation

我正在寻找一种免费工具，该工具允许重新排列 PDF 文档的页面并在每张纸上组合多个页面。第一部分（重新排列）很容易被许多工具解决（我使用[PyPDF](http://pybrary.net/pyPdf/)）。

问题在于第二个要求：将两个（或更多）页面组合​​成一个页面。例如，取两页（A 和 B），将它们旋转、缩放并组合成一个页面，如下所示

```
------       ------            ------
|     |      |      |          |     |
|  A  |      |  B   |          | a   |
|     |      |      |          |     |
|     |      |      |  --->    ------
|     |      |      |          |     |        
|     |      |      |          | b   |        
|     |      |      |          |     |        
------       ------            ------ 
```

该解决方案需要在 Linux 上运行，最好也可以在 Windows 上运行。我正在寻找带有 Python 或 Perl 绑定的控制台应用程序或库。

**编辑**有[pdfnup](http://pypi.python.org/pypi/pdfnup/0.3.3)库，它应该完全执行这种转换，并且是跨平台的，但是由于类似于[this](http://two.pairlist.net/pipermail/reportlab-users/2008-December/007819.html)的错误，我无法使用它。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2010-07-22T13:29:53.530

这是我为PDF找到的工具的摘要（我想找到psup和psbook的等价物）

*   创建小册子：pdfbook、pdf-tools（命令：pdfbklt）
*   合并 PDF 文件：pdfmerge、pdfjam（命令：pdfjoin）
*   旋转页面：pdfjam（命令：pdf90）
*   每张多页：pdfjam（命令：pdfnup）
*   创建海报（每页多张）：pdfposter

从我的包管理器：

*   pdf工具：[http ://search.cpan.org/dist/Text-PDF](http://search.cpan.org/dist/Text-PDF)
*   pdfbook：[http ://www.ctan.org/tex-archive/support/pdfbook/](http://www.ctan.org/tex-archive/support/pdfbook/)
*   pdfmerge：[https ://github.com/dmaphy/pdfmerge](https://github.com/dmaphy/pdfmerge)
*   pdfjam：[http ://go.warwick.ac.uk/pdfjam](http://go.warwick.ac.uk/pdfjam)
*   pdfposter：[http ://pdfposter.origo.ethz.ch/](http://pdfposter.origo.ethz.ch/)

创建 A6 小册子：

```
pdfbook -2 -p a5 infile.pdf outfile.pdf 
```

pdf-tools 包含：

*   pdfbklt：创建小册子
*   pdfrevert：删除对 PDF 文件的一层更改，尝试最大化输出文件的大小（以考虑线性化 PDF）。
*   pdfstamp：将给定字符串添加到给定位置、字体和大小的 infile .pdf 文件。

还有多价的：http: [//multivalent.sourceforge.net/Tools/index.html](http://multivalent.sourceforge.net/Tools/index.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-02-11T08:07:55.167

在 Linux 上，您可以将 PDF 文件转换为 Postscript 并使用`psnup`. 调用它的确切方法取决于您希望将页面组合在一起的确切方式，是否希望它们旋转，要使用的纸张尺寸等，但它会是这样的：

```
pdf2ps infile.pdf infile.ps
psnup -2 infile.ps outfile.ps
ps2pdf outfile.ps outfile.pdf 
```

根据您可用的工具，您可能有更有效的方法来执行此操作 -`psnup`当然不是唯一的方法，但它是一个相对知名的程序（无论如何在 Linux 上）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T12:02:59.627

如果您使用 Linux，您可以使用[BookletImposer](http://kjo.herbesfolles.org/bookletimposer/)将多个 PDF 页面放在一个页面上。

对于 Ubuntu 用户，此工具可在 Ubuntu 软件中心获得。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-13T11:43:15.020

查看这个使用[Multivalent](http://multivalent.sourceforge.net/index.html)强加 PDF 页面的[答案](https://stackoverflow.com/questions/465271/gluing-imposition-pdf-documents/466110#466110)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-02-05T11:13:01.863

在回答您的问题时，您需要一个 PDF 的“拼版”工具，这是一种将 PDF 页面图像排列到特定阵列上以创建新的单个 PDF 页面的工具的一种奇特方式。想象一下，这就像排版报纸。您在特定固定尺寸（以厘米为单位）的页面上定义了一个插槽数组，该数组具有一定数量的列宽，一定数量的行深。然后你用pdf源文件中的页面从上到下，从左到右填充这些空槽。在 OP 的情况下，他们想要创建一个页面，由两个 8.5x11 页面组成，这些页面排列成一个 1x2 数组（1 列，2 行）。他们的页面将按以下顺序放入数组中：1,2。因此，您将第一页（pdf 的第 1 页）放入数组的第一个插槽（第 1 列，第 1 行），

如何使用该工具来实现这一点：下载旧版本的 Multivalent。注意作者从最新版本中删除了好的工具类，没有解释，所以你必须使用旧的。这是截至 02/12 的工作链接： [http](http://code.google.com/p/pdfsizeopt/downloads/detail?name=Multivalent20060102.jar) ://code.google.com/p/pdfsizeopt/downloads/detail ?name=Multivalent20060102.jar 为简单起见，我将 jar 文件重命名为 m.jar。不言而喻，您需要安装 JRE 才能使其工作，但我会把它放在那里。将 m.jar 添加到您的 Java 类路径环境变量（用于脚本）或使用 -cp 选项和相对路径（如下所示）运行命令行语法。请注意，我在下面的示例中从安装目录的命令行运行它。否则提供来自根目录的绝对路径（如 c:\1\bin\m.jar）。

这是一个示例，它将完全完成 OP 发布的内容： C:\1\bin>java -cp m.jar tool.pdf.Impose -dim 1x2 -verbose -papersize "21.59x55.88cm" -layout "1,2 " 你的文件名.pdf

请注意，-dim 选项在 Columns x Rows 中创建数组。-papersize 在这里以厘米为单位指定，但如果您需要英寸，只需将英寸乘以 2.54 即可得到厘米。-layout 选项为您提供要填充阵列中空槽的顺序，从上到下和从左到右填充。在这种情况下，我们希望 pdf 的第一页在顶部，第二页在底部，所以我们的参数是“1,2”。最后一个参数是您的实际源文件。完成后，该工具将输出一个名为 yourfilename-up.pdf 的文件。

希望有帮助。

——马特·茨韦尔

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-11T08:35:59.560

查看 PyPDF 的源代码，尤其是 rotateClockwise() 方法。必须有写页面内容的地方。在内容之前插入“q”运算符（保存状态）和“cm”（具有缩放矩阵的正确参数），然后插入“Q”运算符（恢复状态）。

有关运算符和页面结构的说明，请参阅[PDF 文档](http://www.adobe.com/devnet/pdf/)（滚动到底部以获取一些有用的链接）。

不要忘记向 PyPDF 发送补丁 :)

[编辑] 您可能还想检查包含 pdfnup 命令的[pdfjam 源。](http://www2.warwick.ac.uk/fac/sci/statistics/staff/academic/firth/software/pdfjam)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-13T11:55:57.393

这是一个 perl 函数，我用来从 3rd 方应用程序中获取一个充满 prn 文件的目录并创建一个合并的 pdf。

```
sub runMerged($)
{
    my($path) = @_;

    print "Generating merged PDFs for $path\n";

    my @files = sort(getFiles($path, ".prn\$"));
    if (scalar(@files))
    {
        open(MERGE, ">$path/merged.prn");
        for (my $i = 0; $i < scalar(@files); $i++)
        {
            print MERGE "^L\n" if ($i > 0);

            open(FN, "$path/" . $files[$i]);
            while (my $line = <FN>)
            {
                print MERGE $line;
            }
            close(FN);
        }

        chdir("$BASE_PATH/txt2pdf");
        print `./txt2pdf.pl $path/merged.prn`;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-09-30T17:00:38.427

这周我也有类似的需求。但是我需要在 A3 纸（纵向）中“两次”重复每个 A4 页面（横向），然后再切成两半。

我发现了一个 Acrobat 插件，它具有大量的拼版功能，非常适合我的需求，并且功能齐全的 30 天试用版。

希望对其他人有帮助。
[http://www.pdfsnake.com/](http://www.pdfsnake.com/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-09T07:59:00.200

我和你有同样的问题，这就是我所做的：

1.  将pdf文件中的所有页面提取为一个单独的文件
2.  在 irfanView（带有插件）中，我创建了一个垂直的“全景”图像
3.  将pdf文件拖到图像部分
4.  点击创建
5.  “图像”是由所有页面作为一个非常长的垂直图像创建的
6.  您可以导出为 PDF，质量几乎没有损失。
7.  享受

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-07T09:57:36.713

这是一个脚本，用于在两倍大小的纸张（A4，纵向）上重复页面（如 A5，横向）两次：

```
#!/bin/bash
INPUTFILE=$*
PAGENUM=`pdftk ${INPUTFILE} dump_data | grep NumberOfPages | cut -d : -f 2  | cut -d " " -f 2`
PAGES=`seq 1 ${PAGENUM}`
DUPAGES=`for i in ${PAGES} ; do echo $i $i | tr "\n" " " ; done`
OUTPUT1=`basename ${INPUTFILE} .pdf`.dup.pdf
OUTPUT2=`basename ${INPUTFILE} .pdf`.double.pdf
pdftk ${INPUTFILE} cat ${DUPAGES} output ${OUTPUT1}
pdfjam --nup 1x2 ${OUTPUT1} --outfile ${OUTPUT2} 
```

它不是很优雅。它可以在没有第二个 pdftk 调用的情况下完成，并且它不适用于包含空格的文件。但它适用于多页pdf。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-02-09T08:33:10.510

使用 Adob​​e Acrobat XI Pro，打开第一个文档。编辑，选择“拍摄快照”，然后单击要复制的内容的上角并拖动到对角。在 Paint 中打开一张干净的床单。单击油漆中的清洁表并控制 V 将第一个文档粘贴到清洁表中。对要在同一页面上组合的第二个项目重复此操作，除了将第二个项目临时放置在油漆表中的第一个项目下。然后拖动第二个项目将其放置在油漆表中您需要的位置。保存油漆表文件，您就完成了！

# xml - 转换 XML 流中的特殊字符

> ID：535801
> 
> 赞同：0
> 
> 时间：2009-02-11T07:41:16.523
> 
> 标签：xml, string, mfc

我有一个 XML 流，其中包含特殊字符，例如 ' 存储在 CString 对象中。除了替换流中的单个字符来转换这些特殊字符之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-11T08:56:29.510

唯一需要转义的字符是“ < > &。

但我建议使用标准 XML 库。这不仅会处理转义，还会处理许多其他问题（编码、实体、验证等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T07:49:39.063

坦率地说，我没有看到其他选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T08:19:23.563

如果可以，请在编写器中安装过滤器。这允许您逐个字符地编写流 char 并在遇到特殊字符时替换它们（使您不必分配第二个字符串对象）。

尝试一次输出尽可能多的字符串字符，因为在循环中为每个字符调用 write() 代价高昂。而是使用这个伪代码：

```
int start = 0;
for (int i=0; i<str.length(); i++) {
    char c = str.getChar(i);
    String emit = null;
    switch (c) {
    case '<': emit = "&lt;"; break;
    case '>': emit = "&gt;"; break;
    case '\'': emit = "&apos;"; break;
    case '"': emit = "&quot;"; break;
    }
    if (emit != null) {
        write(str,start,i);
        start = i;
        write(emit);
    }
}
if (start != str.length()) {
    write(str);
} 
```

在常见情况下，循环将遍历字符串一次（速度很快）并调用一次 write()。

如果无法在编写器中安装过滤器，则可以使用相同的代码过滤字符串。在常见情况下，您只需返回输入字符串。在 中`if (emit != null)`，您可以然后分配一个新副本。但由于这只会在字符串中有特殊字符时发生，所以这比为每个字符串创建一个副本要便宜得多。

# .net - 在 WinForms 中使用自定义 WPF 控件

> ID：535812
> 
> 赞同：17
> 
> 时间：2009-02-11T07:46:57.883
> 
> 标签：.net, wpf, winforms

我将不得不为 WinForms 应用程序构建一个自定义控件。但在不久的将来，同样的控件将不得不在 WPF 应用程序中使用。

我已经在一个控制器类中编写了所有逻辑，我可以将其用于 WinForms 和 WPF（我只会做一些数据绑定，仅此而已），但当然开发和维护一次控件会更容易.

那么我可以在 WPF 中构建控件，然后将它们放在 WinForms 表单上吗？我的项目目前有 3.0 作为他们的目标框架。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-02-11T08:45:13.407

是的你可以！

在 WinForms 中使用 ElementHost 并在里面添加 WPF 控件（这里的最佳做法是创建一个 WPF 用户控件并将您的控件添加到用户控件中）

而在 WPF 中，如果要使用 WinForms 用户控件，请使用 WindowsFormsHost

*   [WPF 互操作：“空域”和窗口区域概述](http://msdn.microsoft.com/en-us/library/aa970688.aspx)
*   [Windows 窗体和 WPF 属性映射](http://msdn.microsoft.com/en-us/library/ms751565.aspx)
*   [如何：使用 ElementHost 在 Windows 窗体中托管 Windows Presentation Foundation 控件](http://msdn.microsoft.com/en-us/library/ms754008.aspx)
*   [演练：在 Windows Presentation Foundation 中托管 Windows 窗体控件](http://msdn.microsoft.com/en-us/library/ms751761.aspx)

# php - 如何检查在 PHP 中注册了哪个会话？

> ID：535813
> 
> 赞同：0
> 
> 时间：2009-02-11T07:47:16.573
> 
> 标签：php, session, web-applications

我正在创建一个站点，并且正在使用会话来管理用户登录状态。当用户登录时，我为用户创建一个会话 ID，如下所示：

```
$_SESSION['username'] = "username"; 
```

如何检查用户是否已登录，如果已登录，该用户是谁？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-11T07:54:43.217

如果在您验证了您正在写入会话 superglobal 的用户之后`$_SESSION['username']`，[您](http://www.php.net/manual/en/reserved.variables.session.php)需要做的就是仔细检查会话用户名的存在：

```
 session_start()
 if (empty($_SESSION['username'])) {
      // user is not logged in
 } 
```

找出谁登录就像检查您存储在`$_SESSION['username']`我们之前检查的变量中的用户名一样简单。如果您想从数据库结果或其他信息中保存他们的真实姓名，只需将该信息也转储到`$_SESSION['data_type']`数组中。

会话变量应该在 24 分钟（我认为是 PHP 默认）不活动后自动过期，在这种情况下，您应该期望用户再次登录。如果您想立即注销用户，请查看[session_destroy()](http://www.php.net/manual/en/function.session-destroy.php)。

# wpf - 反向数据触发器？

> ID：535817
> 
> 赞同：1
> 
> 时间：2009-02-11T07:49:32.213
> 
> 标签：wpf, triggers

我可以使用 DataTrigger 和类似这样的东西根据基础数据对象的属性触发我的 ListBoxItem 模板上的属性设置

```
<DataTrigger Binding="{Binding Path=IsMouseOver}" Value="true">
  <Setter TargetName="ItemText" Property="TextBlock.TextDecorations" Value="Underline">
  </Setter>
</DataTrigger> 
```

但是如果我想做相反的事情呢？我的意思是根据我的 ListBoxItem 的属性值在基础数据对象上设置一个属性值。就像是：

```
<Trigger Property="IsMouseOver" Value="True">
  <Setter Property="MyClass.IsHilited" Value="True"></Setter>
</Trigger> 
```

有没有这样的机制，或者处理这种情况的推荐方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-11T14:32:17.740

我认为您可以使用[EventSetter](http://msdn.microsoft.com/en-us/library/system.windows.eventsetter.aspx)在 XAML 中执行 Josh G 在代码中建议的操作。也许为`MouseEnter`and`MouseLeave`事件创建一个，并为每个事件设置适当的控件样式？

**更新**：您可以像这样设置事件：

```
<ListBox>
    <ListBox.Resources>
        <Style TargetType="{x:Type ListBoxItem}">
            <EventSetter Event="MouseEnter" Handler="OnListBoxItemMouseEnter" />
            <EventSetter Event="MouseLeave" Handler="OnListBoxItemMouseLeave" />
        </Style>
    </ListBox.Resources>
    <ListBoxItem>Item 1</ListBoxItem>
    <ListBoxItem>Item 2</ListBoxItem>
    <ListBoxItem>Item 3</ListBoxItem>
    <ListBoxItem>Item 4</ListBoxItem>
    <ListBoxItem>Item 5</ListBoxItem>
</ListBox> 
```

Style为所有定义的`MouseEnter`和`MouseLeave`事件注册`ListBoxItems``ListBox.`

然后在文件后面的代码中：

```
private void OnListBoxItemMouseEnter(object sender, RoutedEventArgs e)
{
    ListBoxItem lvi = sender as ListBoxItem;
    if(null != lvi)
    {
        lvi.Foreground = new SolidColorBrush(Colors.Red);
    }
}

private void OnListBoxItemMouseLeave(object sender, RoutedEventArgs e)
{
    ListBoxItem lvi = sender as ListBoxItem;
    if(null != lvi)
    {
        lvi.Foreground = new SolidColorBrush(Colors.Black);
    }
} 
```

这些处理程序将鼠标悬停在项目上时将文本的颜色设置`ListBoxItem`为红色，并在鼠标离开项目时将其设置为黑色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T13:58:00.833

WPF 触发器旨在引起视觉变化。触发器中的 Setter 对象会导致控件上的属性更改。

如果您想响应一个事件（如 EventTrigger），您总是可以简单地在代码中订阅该事件，然后在处理程序中设置数据属性。

您可以通过这种方式使用 MouseEnter 和 MouseLeave。例如：

```
listBox.MouseEnter += listBox_MouseEnter;
listBox.MouseLeave += listBox_MouseLeave;

void listBox_MouseEnter(object sender, MouseEventArgs e)
{
    listBox.MyClass.IsHilited = true;
}

void listBox_MouseLeave(object sender, MouseEventArgs e)
{
    listBox.MyClass.IsHilited = false;
} 
```

您可以将数据对象的属性绑定到控件上的某些属性，如下所示：

```
Binding myBind = new Binding("IsHilited");
myBind.Source = listBox.DataContext;
listBox.SetBinding(listBox.IsEnabled, myBind); 
```

但是，您不能在绑定中使用 IsMouseOver。

如果您创建自定义控件，您可以更灵活地将这样的绑定构建到控件中。您可以创建自定义依赖属性并将其与 DependencyPropertyChanged 处理程序中的数据属性同步。然后，您可以使用 WPF 触发器设置此依赖项属性。

这是一个例子：

```
public static readonly DependencyProperty IsHilitedProperty =
    DependencyProperty.Register("IsHilited", typeof(bool), typeof(CustomListBox),
    new FrameworkPropertyMetadata(false, new PropertyChangedCallback(OnIsHilitedChanged)));

public double IsHilited
{
    get
    {
        return (bool)GetValue(IsHilitedProperty);
    }
    set
    {
        SetValue(IsHilitedProperty, value);
    }
}

private static void OnIsHilitedChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
{
    CustomListBox box = obj as CustomListBox;

    if (box != null)
        box.MyClass.IsHilited = box.IsHilited;

   // Or:
   // Class myClass = box.DataContext as Class;
   // myClass.IsHilited = box.isHilited;
}

<Trigger Property="IsMouseOver" Value="True">
    <Setter Property="IsHilited" Value="True"/>
</Trigger> 
```

# java - 带有带外数据的 Java 套接字

> ID：535820
> 
> 赞同：5
> 
> 时间：2009-02-11T07:51:47.467
> 
> 标签：java, sockets, out-of-band

有人知道如何使用 Java 套接字接收（如何知道您收到）带外数据吗？特别是我已经阅读了[sendUrgentData](http://java.sun.com/j2se/1.4.2/docs/api/java/net/Socket.html#sendUrgentData(int))和[setOOBInline](http://java.sun.com/j2se/1.5.0/docs/api/java/net/Socket.html#setOOBInline(boolean))的文档，其中指出：

> 请注意，仅提供有限的支持来处理传入的紧急数据。特别是，不提供传入紧急数据的通知，并且没有能力区分正常数据和紧急数据，除非由更高级别的协议提供。

但我仍然希望有人有解决方案:-)

更多细节：

我正在通过套接字发送序列化对象，但我并没有真正看到如何在流中找到插入的“随机”OOB字节（除了当我尝试反序列化时Java会给我一个异常的事实目的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-11T16:05:38.310

它看起来像 Java，一直到 Java 6（我没有研究 Java 7，因为我不知道他们是否已经确定要使用什么）而且看起来 Java 根本不提供任何支持以带外方式读取紧急 TCP 信息。到目前为止，看起来这是一个深思熟虑的选择。

但是，我**确实**找到了一位用户，他使用 JNI[实现了自己的](http://www.geocities.com/SiliconValley/Vista/2013/JavaOOB.html)解决方案，成功地从流中读取了紧急数据。这个 hack 非常古老，可能适用于最近的 JDK，也可能不适用。我自己没有试过这个！您的里程可能会有所不同。:) 但希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-11-03T00:04:46.840

Tomcat 有一个维护的 JNI 套接字实现，它可以以 OOB 方式读取紧急数据包。

# java - 我是否必须在 Apache Tiles 的每个图块中包含库？

> ID：535821
> 
> 赞同：2
> 
> 时间：2009-02-11T07:52:17.823
> 
> 标签：java, apache, jakarta-ee, web-applications, tiles

我在我的网络应用程序中使用 Tiles。我在瓷砖中有一个标准布局（standard.jsp）。在standard.jsp 之上有很多包含，涉及标签库等。

让我们做一个简化的例子。

标准.jsp：

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ include file="/WEB-INF/jsp/includes/include.jsp" %>

<html>

<head>
    <tiles:insertAttribute name="head" flush="false"/>
</head>

<body>
    <tiles:insertAttribute name="body" flush="false"/>
</body>    

</html> 
```

身体.jsp：

```
<div id="body-div">
    <p>Hello, <c:out value="${forname}" />!</p>
</div> 
```

这打印：

```
Hello, ! 
```

在瓷砖中，我想使用标签，但它不起作用。仅当我将包含添加到 tile-jsp 时，它才有效。

body.jsp 包括：

```
<%@ include file="/WEB-INF/jsp/includes/include.jsp" %>

<div id="body-div">
    <p>Hello, <c:out value="${forname}" />!</p>
</div> 
```

这打印：

```
Hello, John! 
```

有没有更好的方法来做到这一点，或者我必须将所有包含添加到每个使用的 jsp 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T09:47:00.047

您不需要所有包含都存在于每个磁贴中，但磁贴中的每个使用的标签库都必须明确包含在使用磁贴中。

例如：在您的示例中，使用 C JSTL 库的每个图块至少应`<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>`包含包含

# excel - 如何在不使用存储过程等的情况下通过 Ado.net 从模式中查找表名？

> ID：535825
> 
> 赞同：0
> 
> 时间：2009-02-11T07:54:46.150
> 
> 标签：excel, ado.net, schema

我正在尝试使用数据表从 excel 文件中读取数据。

命令“select * from [Sheet1$]”工作正常，但如果 excel 文件有不同名称的工作表，则会出错。

所以现在我需要知道如何使用 ADO.Net 找到架构中可用的表名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-11T08:08:47.457

以下函数将返回给定位置的表名（例如，excel表）或返回空白

```
Private Function GetTableName(ByVal ConnectionString As String, ByVal TableNumber As Integer) As String
    Dim i As Integer
    Dim dtXlsSchema As DataTable
    Dim myConn As New OleDbConnection
    myConn.ConnectionString = ConnectionString
    myConn.Open()
    dtXlsSchema = myConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, _
                      New Object() {Nothing, Nothing, Nothing, "TABLE"})

    If TableNumber > dtXlsSchema.Rows.Count Then
        Return ""
    Else
        Return dtXlsSchema.Rows(TableNumber - 1).Item("Table_Name").ToString
    End If
End Function 
```

# sql - 将局部变量的内容写回结果集列？

> ID：535827
> 
> 赞同：0
> 
> 时间：2009-02-11T07:58:25.830
> 
> 标签：sql, stored-procedures, db2

是否可以通过使用存储过程将整数列值从结果集中提取到局部变量中，在那里对其进行操作，然后将其写回结果集的列？

如果是这样，语法会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T08:30:48.887

以下几行应该可以解决问题。

```
DECLARE @iSomeDataItem INT

SELECT @iSomeDataItem = TableColumName
FROM TableName
WHERE ID = ?

--Do some work on the variable
SET @iSomeDataItem = @iSomeDataItem + 21 * 2

UPDATE TableName
    SET TableColumName = @iSomeDataItem
WHERE ID = ? 
```

这种实现的缺点是它只对特定记录进行操作，但这可能是您想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T19:02:33.080

为什么不只在更新语句中进行操作？您无需将其加载到变量中、对其进行操作然后保存。

```
update TableName
SET TableColumnName=TableColumnName + 42 /* or what ever manipulation you want */
WHERE ID = ? 
```

还，

```
@iSomeDataItem + 21 * 2 
```

是相同的：

```
@iSomeDataItem + 42 
```

函数的想法是一个不必要的额外步骤，除非以下大多数情况是正确的：

1) 你需要在很多地方使用这个计算 2) 计算很复杂 3) 计算可以改变

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-19T10:15:40.597

感谢您的回复，我采取了另一种方式并在不使用程序的情况下解决了问题。核心问题是使用各种列值计算日期，列值要转换为正确的格式。通过在选择中使用大的“case - when”语句解决了这个问题。

再次感谢... ：-）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T10:54:35.453

您正在寻找的可能更像是可以在 SQL 中使用的用户定义函数，就像任何其他内置函数一样。

不确定这在 DB2 中是如何工作的，但对于 Oracle，它会是这样的：

```
Create or replace Function Decrement (pIn Integer) 
return Integer
Is
Begin
  return pIn - 1;
end; 
```

您可以在 SQL 中使用它，例如

```
Select Decrement (43)
From Dual; 
```

应该返回“最终答案”（42）。

希望这可以帮助。

# c# - 在 C# 中读取结构数组

> ID：535831
> 
> 赞同：2
> 
> 时间：2009-02-11T08:00:19.990
> 
> 标签：c#

我在[这里](https://stackoverflow.com/questions/2384/read-binary-file-into-a-struct-c/534819#534819)看到过，并且还在谷歌上搜索“marshal”几种将字节数组转换为结构的方法。

但是我正在寻找的是是否有一种方法可以一步从文件中读取结构数组（好的，无论内存输入）？

我的意思是，从文件加载结构数组通常需要比 IO 时间更多的 CPU 时间（使用 BinaryReader 读取每个字段）。有什么解决方法吗？

我正在尝试尽快从文件中加载大约 400K 结构。

谢谢

巴勃罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T08:22:41.777

您可能对以下 URL 感兴趣。

[http://www.codeproject.com/KB/files/fastbinaryfileinput.aspx](http://www.codeproject.com/KB/files/fastbinaryfileinput.aspx)

否则我会想到如下伪代码：

一次读取二进制数据并转换回结构..

```
public struct YourStruct
{ 
    public int First;
    public long Second;
    public double Third;
}

static unsafe byte[] YourStructToBytes( YourStruct s[], int arrayLen )
{
    byte[] arr = new byte[ sizeof(YourStruct) * arrayLen ];
    fixed( byte* parr = arr )
    { 
        * ( (YourStruct * )parr) = s; 
    }
    return arr;
}

static unsafe YourStruct[] BytesToYourStruct( byte[] arr, int arrayLen )
{
    if( arr.Length < (sizeof(YourStruct)*arrayLen) )
        throw new ArgumentException();
    YourStruct s[];
    fixed( byte* parr = arr )
    { 
        s = * ((YourStruct * )parr); 
    }
    return s;
} 
```

现在您可以一次从文件中读取 bytearray 并使用 BytesToYourStruct 转换回结构

希望你能实现这个想法并检查......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T08:24:06.813

我在这个网站上找到了一个潜在的解决方案 - [http://www.eggheadcafe.com/software/aspnet/32846931/writingreading-an-array.aspx](http://www.eggheadcafe.com/software/aspnet/32846931/writingreading-an-array.aspx)

它基本上说像这样使用二进制格式化程序：

FileStream fs = new FileStream("DataFile.dat", FileMode.Create); BinaryFormatter 格式化程序 = new BinaryFormatter(); formatter.Serialize(fs, somestruct);

我还从这个站点发现了两个问题 -[从字节数组中读取 C# 中的 C/C++ 数据结构](https://stackoverflow.com/questions/2871/reading-a-c-c-data-structure-in-c-from-a-byte-array) 和 [如何编组结构数组 - (.Net/C# => C++)](https://stackoverflow.com/questions/31854/how-to-marshal-an-array-of-structs-net-c-c)

我以前没有这样做过，我自己是一个 C# .NET 初学者。我希望这个解决方案有所帮助。

# html - 需要：支持源代码控制的轻量级免费 HTML 编辑器

> ID：535834
> 
> 赞同：1
> 
> 时间：2009-02-11T08:00:53.467
> 
> 标签：html, version-control, ide

我们不是在做真正的网络开发。我们从我们的设计师那里获得我们的 HTML，并让我们的网络应用程序生成这些 HTML（带有一些特定的内容）。简单地说，我们不使用任何主要的 Web 开发基础设施（ASP、PHP、JSP 等）。话虽如此，我们有时确实需要编辑 HTML、JavaScript 和 CSS 文件，而且我厌倦了使用石头和石头并且没有适当的备份。我正在寻找的是一个相当简单的编辑器，可以处理这些类型的文件，最重要的是 - 将**支持源代码控制**，并且是免费的（或非常便宜）。

我一直在研究 Aptana，这似乎有点矫枉过正。它有很多我们可以不用的功能，这让它太重了。VWD express 更轻巧，但没有源代码控制集成。可能还有一百万个其他 HTML 编辑器，但我找不到满足基本要求的一个 - 相对轻量级，支持源代码控制并且（几乎）免费。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T08:23:53.037

不完全是您想要的，但您可以尝试将[Notepad++](http://notepad-plus.sourceforge.net/uk/site.htm)与[TortoiseSVN](http://tortoisesvn.tigris.org/)结合使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T08:12:21.520

[日食](http://www.eclipse.org/)还不错。它在开发人员中也很受欢迎，并且可以编辑 HTML。

为什么支持源代码控制是一项要求？我发现好的源代码控制的地方不在编辑器中。编辑器只是碍事，只实现了一部分功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T08:06:25.433

[NetBeans](http://www.netbeans.org)可以编辑任何东西，是免费的、跨平台的，并且直接支持 CVS、Subversion 和 Mercurial 版本控制系统。尽管它比我所知道的任何具有同等功能的竞争对手都轻，但它并不完全是轻量级的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T08:19:19.617

在 Wikipedia 的[HTML 编辑器比较](http://en.wikipedia.org/wiki/Comparison_of_HTML_editors)页面中挑选你的毒药。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T19:43:11.477

[Revisionator](http://revisionator.com)是一个基于云的html 编辑器，内置源代码控制。它甚至可以对不同版本进行所见即所得的差异化和合并。

# terminology - 你怎么称呼那些你必须一直检查的小烦人的情况？

> ID：535840
> 
> 赞同：0
> 
> 时间：2009-02-11T08:05:32.630
> 
> 标签：terminology

您如何称呼那些必须检查的小烦人情况，例如“这是某人第一次输入记录/删除链表中的最后一条记录（在c实现中）/ ...”？

我知道的唯一术语不是很好地翻译为“最终案例”。它有更好的名字吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-02-11T08:06:00.130

边缘案例。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-02-11T08:09:24.243

角落案例

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-11T08:13:17.837

我曾经有过的教授将它们称为*边界情况*或*特殊情况*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T08:17:41.273

我使用术语特殊情况

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T08:08:08.427

我称之为工作;-)。

因为他们付钱给我。

但是边缘情况（如前所述）可能是一个更正确的名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-11T08:16:44.567

我称他们为“小鬼”。但是，老实说，我不再关心链表一了。

因为内存很便宜，所以我总是实现列表，以便一个空列表包含两个特殊节点，第一个和最后一个。

搜索时，我从 first->next 到 last->prev 进行迭代（所以我没有查看前哨第一个/最后一个节点）。

当我插入时，我使用相同的限制来查找插入点——这保证我永远不会在第一个或最后一个之后插入，所以我只需要使用“中间插入”的情况。

当我删除时，它是相似的。因为你不能删除第一个或最后一个节点，所以删除代码也只需要使用“insert-in-the-middle”的情况。

当然，那只是我懒惰。另外，反正我不再做很多 C 工作了，而且我有一个庞大的代码库可以利用，所以我实现新链表的日子已经一去不复返了。

# sqlite - 可以用 AM/PM 将 24 小时时间字符串格式化为 12 小时时间字符串吗？

> ID：535855
> 
> 赞同：5
> 
> 时间：2009-02-11T08:13:11.847
> 
> 标签：sqlite

我以 %H:%M 字符串格式（例如“15:43”）将一些时间值存储在 sqlite 中，但我想用 AM/PM 指标将它们格式化为 12 小时格式（例如“3:43下午”）。这对 sqlite 是否可行（如果可以，如何），还是我需要在我的应用程序代码中执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-11T08:18:20.087

一些伪代码可以帮助您：

```
if (hourpart of time >= 12)
    subtract 12 from hours
    append string " pm"
else // hourpart < 12
    append string " am"
end if 
```

在 SQL 中，您可以使用[CASE](http://doc.ddart.net/mssql/sql70/ca-co.htm)语法来完成此操作。

* * *

仔细看问题后：

```
SELECT (CASE HOUR(myTimeColumn) >= 12 WHEN 1 THEN
         ((HOUR(myTimeColumn) - 12) + '-' + MINUTE(myTimeColumn) + ' pm')
       ELSE
         (HOUR(myTimeColumn) + '-' + MINUTE(myTimeColumn) + ' am')
       AS AmPmTime,
       someOtherColumn
FROM myTable 
```

我不完全确定所有这些都是有效的 SQLite 语法，但您应该能够纠正这些错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-11T08:51:35.873

除非您使用自己的[自定义函数](http://www.sqlite.org/c3ref/create_function.html)扩展 sqlite，否则您必须这样做是代码。

sqlite 的[strftime](http://www.sqlite.org/lang_datefunc.html)日期格式化功能仅支持其 C 对应物的一小部分，不足以解决您的问题。[sqlite](http://www.sqlite.org/lang.html)也缺少像 IF 或 CASE 这样的选择结构，这使得简单的 if/else 变得不可能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-01-29T19:26:35.253

这里介绍了一些特殊情况。我使用 'now' 作为来源，但您可以为您的字符串调整它：

```
select
  CASE 
  --For 00:05, for example.
  WHEN (strftime('%H', 'now', 'localtime') - 12) = -12
  THEN  '12:' || strftime('%M', 'now', 'localtime') ||' '|| 'AM'
  --For 12:05, for example.
  WHEN (strftime('%H', 'now', 'localtime') - 12) = 0
  THEN '12:' || strftime('%M', 'now', 'localtime') ||' '|| 'PM'
  --other am time
  WHEN (strftime('%H', 'now', 'localtime') - 12) < 0
  THEN  strftime('%H', 'now', 'localtime') ||':'||
    strftime('%M', 'now', 'localtime') ||' '|| 'AM'
  ELSE
  --other pm time
    (cast(strftime('%H', 'now', 'localtime') as integer) - 12) ||':'||
    strftime('%M', 'now', 'localtime') ||' '|| 'PM'
  END here_you_go_usa; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T08:29:27.923

在您的应用程序中执行此操作。将其以正常的 24 小时格式存储在数据库中。在数据库中，它可以存储为日期条目而不是字符串（如果我错了，请纠正我）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T08:53:07.133

正如 PoweRoy 建议的那样，这属于应用程序。

建议在通信中使用的任何类型的存储数据都使用标准的、区域设置不敏感的格式：[http ://www.mihai-nita.net/article.php?artID=20051025a](http://www.mihai-nita.net/article.php?artID=20051025a)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-06T15:53:23.830

这是一个**有效的..**感谢托马斯

```
SELECT 
    PatientName, 
    CASE WHEN 
        StrFTime('%H', AppointmentTime) % 12 = 0 THEN 12
        ELSE StrFTime('%H', AppointmentTime) % 12 END 
    || ':' ||
        StrFTime('%M', AppointmentTime)
    || ' ' ||
    CASE WHEN
        StrFTime('%H', AppointmentTime) > 12 THEN 'PM'
        ELSE 'AM' END   
    `APP_TIME`
From Patients; 
```

**输出**
Abdul Salim，下午 12:05

# algorithm - 迷宫问题的非指数解？

> ID：535859
> 
> 赞同：14
> 
> 时间：2009-02-11T08:13:58.647
> 
> 标签：algorithm, complexity-theory, time-complexity, np-complete

给定一个 *n 大小的多头无环图，其中每个节点最多有三个子节点和三个父节点，是否存在一个非指数算法来识别是否存在一个 n 长度路径，其中没有两个节点共享相同的值，并且每个一个集合的值被占？

基本上，我有一个 n*n 迷宫，其中每个空间都有一个随机值 (1..n)。我需要找到包含每个值的 n 个节点的路径（从顶部到底部）。

现在我正在使用深度优先搜索，但那是`T(n) = 3T(n-1) + O(1)`一个`O(3^n)`非理想的解决方案。

确认我的恐惧，或指出我正确的方向将不胜感激。

编辑：为了让这个更具体一点，这里是一个带有解决方案的迷宫（使用深度优先解决方案解决）。

```
1 2 5 5 4
 1 5 1 3 5
 4 1 2 3 2
 5 5 4 4 3
 4 2 1 2 4
S3, 5, 1, 3, 4, 2, F4
S3, 5, 1, 3, 4, 2, F2
S3, 5, 1, 3, 4, 2, F4
S3、5、3、2、4、1、F3
S3、5、3、2、4、1、F3
S3、5、3、2、4、1、F3
S4, 5, 3, 2, 4, 1, F3
S4, 5, 3, 2, 4, 1, F3
S4, 5, 3, 2, 4, 1, F3
S4, 5, 1, 3, 4, 2, F4
S4、5、1、3、4、2、F2
S4, 5, 1, 3, 4, 2, F4
S5、4、3、2、5、1、F3
总共 13 条路径`
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-17T09:09:26.453

这个问题是NP完全的，因此不知道是否存在多项式时间解。（在实践中可能很容易的标准附加条件*等都*适用。）一种可能的减少来自 3SAT。

假设我们有一个 3SAT 实例，例如 (a ∨ b ∨ c) ∧ (¬a ∨ ¬b ∨ ¬c)。我将展示如何使用“小工具”来构建您的问题的实例。在开始之前，将 3SAT 问题改写为 (a1 ∨ b1 ∨ c1) ∧ (¬a2 ∨ ¬b2 ∨ ¬c2) 以及 a1 = a2, b1 = b2, and c1 = c2; 即，使变量的每次出现都是唯一的，但随后添加相同变量的不同出现必须相等的条件。

首先，我们确保您必须选择第一行中的数字 0，以便我们以后可以将其用作您必须避免的“哨兵”。

```
 0   0   0 
```

现在，我们构建一个执行 a1 = a2 规则的小工具：（`_`这里的下划线是每次使用这个小工具时的一个新的唯一编号）

```
 0   _   0 
 a1  0  ¬a1
 a2  0  ¬a2 
```

由于第一行，您必须避免使用 0。这意味着您要么选择路径“a1, a2”，要么选择路径“¬a1, ¬a2”；前者对应于（有点令人困惑）将 a 设置为 false，而后者对应于将 a 设置为 true。这是因为我们的子句小工具真的很简单，因为我们只是简单地写下子句，例如（`_`这里每次都是一个新变量）：

```
 0   _   0 
 a1  b1  b2 
```

或者

```
 0   _   0 
¬a1 ¬b1 ¬b2 
```

最后，由于您只使用了 a1 和 ¬a1 等中的一个，我们让您拿走您没有使用的那些：

```
 0   _   0 
 a1 ¬a1  0 
```

现在，这并不完全奏效，因为 a1 和 ¬a1 中的一个可能已在变量选择小工具中使用，而另一个可能已在子句中使用。`@i`因此，我们为您可以使用的每个子句包含一个新变量，而不是其中一个变量。所以如果变量 a1 出现在第 1 条中，我们有

```
 0   _   0 
 a1 ¬a1  @1 
```

这是原始 3SAT 子句翻译的完整输出（突出显示对应于将 a 和 b 设置为 true、c 为 false 并从第一个子句中选择 a 的路径），左侧是数字，右侧是光泽。小工具被重新排序（第一个子句小工具，然后是每个变量，相等小工具，然后是未使用的小工具），但这并不重要，因为它们无论如何都是独立的。

```
0       0  <    0               .       .  <    .       
0       8  <    0               .       _  <    .       
2  <    4       6               a1 <    b1      c1      
0       16 <    0               .       _       .       
11      13      15 <            -a2     -b2     -c2<    
0       17 <    0               .       _  <    .       
2       0       3  <            a1      .       -a1<    
10      0       11 <            a2      .       -a2<    
0       18 <    0               .       _  <    .       
2       3       1  <            a1      -a1     @1 <    
0       19 <    0               .       _       .       
10 <    11      9               a2 <    -a2     @2      
0       20 <    0               .       _  <    .       
4       0       5  <            b1      .       -b1<    
12      0       13 <            b2      .       -b2<    
0       21 <    0               .       _  <    .       
4  <    5       1               b1 <    -b1     @1      
0       22 <    0               .       _  <    .       
12 <    13      9               b2 <    -b2     @2      
0       23 <    0               .       _  <    .       
6  <    0       7               c1 <    .       -c1     
14 <    0       15              c2 <    .       -c2     
0       24 <    0               .       _  <    .       
6       7  <    1               c1      -c1<    @1      
0       25 <    0               .       _  <    .       
14      15      9  <            c2      -c2     @2 < 
```

（如果您希望整个事情是方形的，只需在每行的末尾添加一堆零。）很有趣的是，无论您如何解决这个问题，从本质上讲，您都在解决 3SAT 问题。

在我的帖子末尾是一个仓促编写的 Perl 程序，它从表单的输入中生成您的一个问题

```
a b c
-a -b -c 
```

问题的结果实例中的变量数为`11C + V + 1`。给程序`-r`开关以产生光泽而不是数字。

```
# Set useful output defaults
$, = "\t"; $\ = "\n";

# Process readability option and force sentinel
my $r = "0";
if( $ARGV[0] =~ /-r/ ) { shift; $r = "."; }
print $r, $r, $r;

# Clause gadgets
my( %v, %c, $m, $c );
$m = 1;
while( <> ) {
    my( @v, @m );
    $c = $m++;
    chomp; @v = split;
    for my $v ( @v ) {
        push @{$v{strip($v)}}, -1; # hack, argh!
        push @m, ($r ? $v.@{$v{strip($v)}} : $m + neg($v));
        $c{($r ? (strip($v).@{$v{strip($v)}}) : $m)} = $c;
        $v{strip($v)}->[-1] = ($r ? (strip($v).@{$v{strip($v)}}) : $m);
        $m += 2 unless $r;
    }
    print $r, newv(), $r;
    print @m;
}

# Variable gadget
for my $v ( sort keys %v ) {
    # Force equal
    print $r, newv(), $r;
    for my $n ( @{$v{$v}} ) {
        print $n, $r, ($r ? "-".$n : $n+1);
    }

    # Unused
    for my $n ( @{$v{$v}} ) {
        print $r, newv(), $r;
        print $n, ($r ? "-".$n : $n+1), ($r ? "\@".$c{$n} : $c{$n});
    }
}

# Strip leading -
sub strip {
    my( $v ) = @_;
    return substr $v, neg($v);
}

# Is this variable negative?
sub neg {
    my( $v ) = @_;
    return "-" eq substr( $v, 0, 1 );
}

# New, unused variable
sub newv {
    return "_" if $r;
    return $m++;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-11T08:23:55.267

我很确定这可以在多项式时间内完成。我将从一个空集开始，然后从上到下循环遍历行。我将跳过任何类型的代码，向您展示每一步的状态是什么样的，您应该能够从那里组合一个算法。我很确定最好的情况比使用广度优先搜索的变体并跟踪表中当前良好路径的 O(n^2) 略差。

**编辑：**如果这仍然不够快，您可以通过应用[Harlequin 的优化](https://stackoverflow.com/questions/535859/non-exponential-solution-to-maze-problem/536189#536189)来改进它。

例如：

1 2 3
3 2 1
1 2 1

状态 0：R = 0 // 行 P = {} // 路径集

```
// {{Path so far}, Column}

P' = {
    {{1}, 0}
    {{2}, 1}
    {{3}, 2}
}

P = P' 
```

状态 1：R = 1 // ROW P = { {{1}, 0} {{2}, 1} {{3}, 2} }

```
P' = {
    {{1 3}, 0}
    {{1 2}, 1}
    {{2 3}, 0}
    {{2 1}, 2}
    {{3 2}, 1}
    {{3 1}, 2}
} 
```

状态 2：R = 2 P = { {{1 3}, 0} {{1 2}, 1} {{2 3}, 0} {{2 1}, 2} {{3 2}, 1} { {3 1}, 2} }

```
P' = {
    {{1 3 2}, 1}
    {{2 3 1}, 0}
    {{3 2 1}, 0}
    {{3 2 1}, 2}
    {{3 1 2}, 1}
} 
```

结果：
路径计数：5
S1 1 3 2 F2
S2 2 3 1 F1
S3 3 2 1 F1
S3 3 2 1 F3
S3 3 1 2 F2

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-11T09:08:18.780

你可以试试[蚁群优化](http://en.wikipedia.org/wiki/Ant_colony_optimization)。它很快就会产生非常接近完美解决方案的非常好的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T10:04:03.390

[Kevin Loney 解决方案的](https://stackoverflow.com/questions/535859/non-exponential-solution-to-maze-problem/535885#535885)一项优化可能是合并在同一列中包含相同元素的部分路径。如果您想知道最后解决方案的数量，则必须注意与路径合并的数量。

示例：在您的 5x5 示例中，当您到达第三行时，第三列有三个通向它的路径，其中包含 (1 2 5) 以某种顺序。您不必从这一点单独遵循这些，但可以合并它们。如果您想知道最后解决方案的数量，您只需调整路径数据结构，例如三个（1（1 2 5））将合并为（3（1 2 5））。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T08:23:57.500

查找 A* 搜索。这是你的朋友。

# javascript - 使用 slideToggle 展开列表

> ID：535868
> 
> 赞同：0
> 
> 时间：2009-02-11T08:17:09.840
> 
> 标签：javascript, jquery, html

我有一个像这样的无序列表：

```
 <a href="#" id="myList-toggle">Show the rest</a> 

 <ul id="myList">
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
<li>Item 4</li>
<li>Item 5</li>
<li>Item 6</li>
<li>Item 7</li>
<li>Item 8</li>
<li>Item 9</li>
<li>Item 10</li>
</ul> 
```

和这个 jQuery 代码：

```
 var list = $('#myList li:gt(4)');
    list.hide();
     $('a#myList-toggle').click(function() {
        list.slideToggle(400);
        return false;
   }); 
```

问题是它会滑动每个单独的 li 项目，我需要滑动列表的其余部分，就像我会滑动整个列表一样。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-11T13:04:17.543

您的方法不起作用，因为它会找到带有 height: auto 的高度。

经过多次失败和尝试，我想出了一些几乎可行的方法。

您对我的代码有什么意见吗，我将不胜感激。

如果我希望相同的链接再次折叠列表，我该怎么做

```
<head>
   <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.1/jquery.min.js"></script>

 <script type="text/javascript">
  $(document).ready(function() {

        var list = $('ul#myList');   
        var original_height = list.height(); 
        list.css({height:$('#myList li').height()*5});

$('a#myList-toggle').click(function() {
list.animate({height:original_height}) 
       return false;
    }); 

      });
</script> 

<style type="text/css">
ul#myList {
    overflow: hidden;
}
</style>
</head>
<body>

 <a href="#" id="myList-toggle">Show the rest</a> 

 <ul id="myList">
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
<li>Item 4</li>
<li>Item 5</li>
<li>Item 6</li>
<li>Item 7</li>
<li>Item 8</li>
<li>Item 9</li>
<li>Item 10</li>
</ul> 

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-11T18:55:02.303

非常笨拙的解决方案恕我直言，但如果它对你有用 - 它对你有用......

单击同一链接以折叠和展开列表：

```
$(document).ready(function() {

        var list = $('ul#myList');   
        var original_height = list.height();
        var new_height = $('#myList li').height()*5;
        list.css({height:new_height});

        $('a#myList-toggle').click(function() {
        if( list.height() == original_height ) {
            list.animate({height:new_height});
        } else {
            list.animate({height:original_height});
        }
        return false;
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T08:55:47.033

快速且不那么脏的方式：用`div`元素和`slideToggle('#myList div.wrapper')`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T12:01:31.550

你可以给一个高度来`UL`标记`overflow:hidden`。然后你`animation({height:auto})`用来显示所有。否则，您没有任何可行的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-12T16:35:46.743

简单地切换列表而不是元素有什么问题？

```
 $(function(){
    var listheight = $("#mylist").height();
    $("a#myList-toggle").toggle(function(){
        $("#mylist").slideToggle();
    },function(){$("#mylist").animate({height:listheight})});
    }); 
```

# html - 外语字符集

> ID：535879
> 
> 赞同：1
> 
> 时间：2009-02-11T08:22:12.307
> 
> 标签：html, xhtml, character-encoding

我目前正在做一些带有乌尔都语、波斯语和简体中文字符的 HTML。我在网上寻找关于使用什么字符集的好资源时遇到问题：

```
<meta http-equiv="Content-Type" content="text/html; charset=???" /> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-11T08:27:17.740

UTF-8 可以在 Unicode 标准中以任何语言对任何字符进行编码，与 ASCII 兼容，并且现在得到了很好的支持。几乎没有理由不将它用于所有事情。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-11T08:31:28.103

我建议使用 UTF-8，它可以编码任何 Unicode 字符。

但除了在文档本身中声明编码之外，更重要的是您的代码实际上是用 UTF-8 编码的。因此，为自己准备一个可以正确处理此编码的编辑器，并在 HTTP 标头中声明该编码，因为它具有[更高的优先级](http://www.w3.org/TR/html4/charset.html#spec-char-encoding)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-11T08:28:06.350

[UTF-8](http://en.wikipedia.org/wiki/UTF-8)

# ruby - 使用 Ruby 进行自动化测试：从下拉列表中选择一个选项

> ID：535880
> 
> 赞同：1
> 
> 时间：2009-02-11T08:22:38.140
> 
> 标签：ruby, testing, selenium

我使用 Ruby（Selenium 框架）编写自动化测试，我需要知道如何从下拉列表中选择一个选项。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-17T14:15:36.920

基于[floehopper 的回答](https://stackoverflow.com/questions/535880/automated-test-with-ruby-select-an-option-from-drop-down-list/538254#538254)：

```
selenium.addSelection(locator, value)
or
selenium.select(locator, value) 
```

你几乎肯定想要 "id=my_select_box_id" （带引号）`locator`，尽管其他 CSS 选择器也可以。 `value`是要`option`选择的文字文本值（不是显示值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T19:00:44.567

我想你想要这个命令：-

```
select(selectLocator, optionLocator) 
```

*   selectLocator 标识下拉列表
*   optionLocator 标识列表中的选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-09-17T09:34:27.163

最简单的方法：`select(selectLocator,optionLocator)`如上所述。

`selectLocator`：下拉对象的 `optionLocator`名称或 xpath ：要选择的下拉选项的名称或 xpath

例如

```
@selenium.select "Language", "label=Ruby" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T08:29:28.517

听起来您正在在这里编写功能测试。选择它本身可能对您没有多大好处。您需要提交表单以测试控制器。:) 它可能会帮助回答的人知道您正在使用哪个测试框架，因为有几个可供选择。如果您使用的是 RSpec，[请查看此截屏视频](http://railscasts.com/episodes/71-testing-controllers-with-rspec)。

希望无论如何都会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T09:20:40.640

除了功能测试之外，如果您正在寻找更像真实应用程序的东西，请查看[WebRat](http://github.com/brynary/webrat/tree/master)。对于非 AJAX 集成测试，它有一个非常好的 DSL 用于选择您的 DOM 并针对它们采取适当的操作。（链接点击表格填写等）。

另一方面，如果您的 App 是您只想对其进行验收测试的外部 Web App，您还可以检查[Selenimum](http://seleniumhq.org/)或[Watir](http://wtr.rubyforge.org/)。

请注意，WeRat 是基于 Web 框架的，因为 Selenimum 和 Watir 使用浏览器直接与您的 Web 应用程序交互（就像真实用户一样）。

# .net - 如何使 .NET 可执行文件在 64 位框架上运行

> ID：535889
> 
> 赞同：3
> 
> 时间：2009-02-11T08:24:25.000
> 
> 标签：.net, 64-bit

我有一个默认为 32 位的可执行文件。它没有源代码，我想在系统上同时保留 32 位和 64 位框架。有没有办法让该可执行文件在 64 位 .NET 框架上运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-11T08:32:34.187

使用 corflags 工具翻转“64 位如果可用就可以”标志

这篇[博客文章](http://blogs.msdn.com/joshwil/archive/2005/05/06/415191.aspx)通过示例和一些进一步的链接对此进行了解释。

如果您使用 VS 2005 及更高版本重新编译源代码，您可以更改设置以使其愿意以 64 位运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T08:38:52.987

如果可执行文件是用 .NET 编写的并且都是托管代码，那么在 64 位下运行它应该没有问题。x64 的 .Net-Framework 带有用于 32 位和 64 位代码的 CLR。

考虑阅读 Scott Hanselman 的这篇博文，它涵盖了这个问题：

[回归基础：围绕 x86 和 x64 以及 .NET Framework 和 CLR 的 32 位和 64 位混淆](http://www.hanselman.com/blog/BackToBasics32bitAnd64bitConfusionAroundX86AndX64AndTheNETFrameworkAndCLR.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T08:26:29.223

你有源代码还是只有exe？

如果您有源代码，您可以将其编译为 64 位，如果您没有，您可以使用反射器获取源代码并将其重新编译为 64 位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T08:34:08.800

如果您的应用程序需要在 32 位和 64 位系统上运行，一个好方法是配置编译器以强制二进制文件在 32 位模式下运行。这将强制任何 64 位系统以 32 位仿真模式运行您的应用程序。（项目属性->构建->目标平台->“x86”而不是“任何CPU”）

否则，您必须提供应用程序的两个二进制版本：一个 32 位二进制和一个 64 位二进制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T08:41:50.780

Scott Hanselman 最近[在博客](http://www.hanselman.com/blog/BackToBasics32bitAnd64bitConfusionAroundX86AndX64AndTheNETFrameworkAndCLR.aspx)中谈到了这一点。

> 编写托管代码是一种无需担心任何 x86（32 位）与 x64（64 位）细节的好方法。编写托管代码，编译，它可以在任何地方工作。

所以实际上，如果你为“任何 CPU”构建它，它应该在 64 位操作系统上自动以 64 位模式运行。但是只有在所有代码都被管理的情况下，你才能做到这一点。您应该阅读博客条目以了解详细信息。

# sql-server - 在 SQL Server 存储过程中验证日期参数

> ID：535893
> 
> 赞同：2
> 
> 时间：2009-02-11T08:25:56.573
> 
> 标签：sql-server, validation, stored-procedures, date

我编写了一个接收日期参数的存储过程。`American`我担心的是日期格式和`British`日期格式之间会有混淆。确保日期之间没有歧义的最佳方法是什么，例如`02/12/2008`. 一种可能性是用户以诸如`20081202 (yyyymmdd)`. 有没有办法在不使用子字符串的情况下验证这一点？或者，日期可以输入为`02-Dec-2008(dd-mmm-yyyy)`，但再次验证并非易事，不使用英语的用户可能会遇到问题。

进一步的前三个答案。. . 一个问题是我希望这个存储的过程可以在没有前端的情况下直接调用，因此不能在过程之外进行验证。将日、月和年作为单独的参数是个好主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-11T08:28:44.057

如果您在存储过程中使用参数，则不会有任何问题：

```
create proc dbo.Sproc
    @date datetime
as
    ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-11T08:29:58.547

如果您将参数声明为`DATETIME`SQL Server 中的类型或其他类型的日期/时间类型之一，那么您应该这样做，那么就没有歧义；它代表特定的日期和时间。您正在谈论的验证类型应该发生在存储过程之外，而不是内部。

* * *

好的，从您的评论和编辑来看，问题似乎出在人们调用 SP 的方式上，而不是实际上在其中。为此，您只需要训练您的用户使用可排序的日期格式，即

```
yyyy-MM-dd HH:mm:ss 
```

然后没有歧义。任何被允许*靠近*数据库的人都应该注意本地化问题，并且在输入日期时应该始终使用像这样的明确格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-20T16:46:01.370

我最终为日期获取了一个字符串参数，并要求用户输入月份作为单词。我通过将输入转换为日期来检查输入是否为有效日期。为确保月份以单词形式输入，我使用类似比较器将输入字符串与“%Jan%”或“%Feb%”或“%Mar%”等进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T08:35:28.767

如果您的 proc 接受日期作为日期时间参数，那么您几乎无法验证所需的格式是 ddmmyyyy 而不是 mmddyyyy。这完全取决于用户如何输入日期以及如何将日期传递给 SQL。

例如：在网页上，我可以添加这样的参数

```
command.Parameters.AddWithValue("@mydate",mydateVar.ToString("dd/MM/yyyy")); 
```

或者

```
command.Parameters.AddWithValue("@mydate",mydateVar.ToString("MM/dd/yyyy")); 
```

只要字符串可以正确地转换为日期，SQL 就会插入它给定的内容。它不会知道您要使用的格式，因此它会尝试转换为系统默认格式。

尽管可能不适用于您的情况，但我使用的一个解决方案是让用户以 dd-MMM-yyyy 格式在您拥有的任何前端中输入所有日期。然后我可以在插入数据库之前确定格式。我在任何地方都使用这种格式，以在整个应用程序中保持相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T09:50:45.030

您说您希望在没有前端的情况下直接调用此存储过程，并且不能选择在过程之外进行验证。

在那种情况下，用户将直接插入数据，我也相信在这种情况下它仅供内部使用（因为将直接调用存储的过程）

所以我认为你有两个选择

1.  如果您有纪律严明的用户，您可以同意其中一种[安全格式](https://stackoverflow.com/questions/469417/best-way-to-parse-datetime-to-sql-server/469491#469491)：ISO yyyyddmm 或 ISO8601 yyyy-mm-dd Thh:mm:ss:mmm 如果您还需要时间部分
2.  否则取 3 个参数：年、月、年并在存储过程中执行一些验证

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-11T21:00:44.307

我说要一个日期时间并训练他们使用日期的 ODBC 规范形式，如下例所示：

```
EXECUTE uspMyProc {d '2009-02-11'} 
```

如果您将必须解析的日期（无论是字符串还是年、月和日）作为单独的整数参数，那么您必须处理超出月和年范围的天数。一些功能可以让您在当天自动前进或后退。因此，当天发送 0 并获取上个月的最后一天的技巧。其他人返回错误。但是自己处理这些东西可能不值得重新发明轮子。

如果您绝对必须这样做，因为新手将直接运行它（为什么新手会直接运行存储过程？），我将采用三个单独的参数并将连接的日期作为格式 YYYY-MM-DD 的字符串通过 ISDATE 传递给验证参数，如果无效则退出。

# vb.net - 获取 IDE 和 SATA 的 H/D 序列号（不是卷序列号）

> ID：535902
> 
> 赞同：2
> 
> 时间：2009-02-11T08:28:54.977
> 
> 标签：vb.net, serial-number

如何在 VB.NET 中读取 IDE 和 SATA 驱动器的硬盘序列号？（我不想要卷序列号）。

如果可能，如果没有管理权限，应该为 XP 和 Vista 收集此信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T20:13:24.857

您可以像这样使用[WMI](http://msdn.microsoft.com/en-us/library/aa394582.aspx)（Windows 管理规范）：

```
Dim mos As New ManagementObjectSearcher("SELECT * FROM Win32_PhysicalMedia")

For Each mo As ManagementObject In mos.Get()
    Dim serial As String = mo("SerialNumber").ToString()
Next 
```

虽然，我读过一些使用 WMI 没有返回序列号的情况。实现此目的的另一种方法是通过平台调用服务 (PInvoke)。

[本文](http://addressof.com/blog/posts/392.aspx)包含一个下载，其中作者实现了[CreateFile()](http://msdn.microsoft.com/en-us/library/aa363858(VS.85).aspx)和[DeviceIoControl()](http://msdn.microsoft.com/en-us/library/aa363216(VS.85).aspx)，以通过 VB .NET 中的 Interop 服务提取驱动器信息。

要使用上述任何一种方法，您都需要管理员权限，可以在[此处](http://www.winsim.com/diskid32/diskid32.html)找到一个似乎可以规避此问题的实用程序。如果您喜欢冒险，C++/Win32[源代码](http://www.winsim.com/diskid32/diskid32.cpp)可供您仔细阅读。（查看函数“ReadPhysicalDriveInNTWithZeroRights()”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-16T11:53:41.893

```
Public Function getHardDiskSerialNo()
    Dim serial As String

    Dim hd As New ManagementObjectSearcher("SELECT * FROM Win32_PhysicalMedia")
    For Each dvs As ManagementObject In hd.Get()
        serial = dvs("SerialNumber").ToString()

    Next
    Return serial

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T18:07:01.943

这是获取硬盘序列号的代码

```
 Dim HDD_Serial As String

    Dim hdd As New ManagementObjectSearcher("select * from Win32_DiskDrive")

    For Each hd In hdd.Get

        HDD_Serial = hd("SerialNumber")
        MsgBox(HDD_Serial)
    Next 
```

希望能帮助到你。

# css - 为什么我的 CSS 存在特异性问题？

> ID：535903
> 
> 赞同：2
> 
> 时间：2009-02-11T08:29:04.087
> 
> 标签：css, css-selectors

有人能解释一下为什么在这个例子中第一条规则不是第二条吗？根据我的CSS特异性知识，第二种更具体，应该使用。但是所有浏览器都先使用。

### 例子：

> [http://apblog.lv/misc/css_spec/example2.html](http://apblog.lv/misc/css_spec/example2.html)

### CSS：

```
table.data .negative {
  /* css specificity: 0,0,2,1 */
  color: red;
}
table.data tr.inactive td {
  /* css specificity: 0,0,2,3 */
  color: gray; /* this should be used */
} 
```

### HTML：

```
<table class="data">
  <tr class="inactive">
    <td><span class="negative">should be gray</span></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-11T08:32:04.563

你`<span class="negative">`是最里面的元素，具有显示风格的元素也是如此。您`<td>`可能有不同的颜色设置，如果您在跨度之外添加文本，您将看到它是灰色的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-11T15:24:24.040

所有关于更高特异性规则的[赌注都失败了，因为它针对的是 TD 而不是 SPAN。](http://iamacamera.org/default.aspx?id=95 "CSS Specificity for Poker Players")你必须知道什么时候折叠它们。:-)

* * *

**编辑**

您在评论中声明您没有看到这里提到的概念： [`http://www.w3.org/TR/CSS21/cascade.html#cascade`](http://www.w3.org/TR/CSS21/cascade.html#cascade)

...确实如此。你会在这里找到几段： [`http://www.w3.org/TR/CSS21/cascade.html#inheritance`](http://www.w3.org/TR/CSS21/cascade.html#inheritance)

其中指出，

> > “...如果没有为 [子元素] 分配颜色，则 [子元素] 将继承父元素的颜色...当发生继承时，元素继承计算值。来自父元素的计算值变为孩子的指定值和计算值”

在您的示例中，继承原则不适用，因为 CSS 规则直接针对 color 属性的 SPAN 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-12T23:25:01.877

两条规则都适用。

如果您认为当您沿着 DOM 树的分支向下走时正在应用规则，那么您会在 TD 处找到一个停靠点，而当您到达 SPAN 元素时，.negative 规则会覆盖它。

更具体地说，第二条规则适用于 TD 及其所有子元素，默认情况下，颜色属性可以传播到其中，但是当渲染引擎到达 SPAN 时，第一条规则进入场景并覆盖颜色值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T08:34:25.307

span 在 td 内部，所以第一个选择器实际上更具体。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T08:34:33.247

您的类未按预期工作的原因是您在 HTML 中定义类的方式，而不是 CSS。如果您注意到，`inactive`该类被设置在包含`<tr>`元素中，然后被`<span>`“否定”类覆盖。如果您希望`inactive`应用的颜色样式高于一切，请在颜色定义后添加一个 !important：

```
 table.data tr.inactive td {
      /* css specificity: 0,0,2,3 */
      color: gray !important; /* this should be used */
 } 
```

无论如何，这将覆盖`negative`样式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-11T08:36:08.203

这似乎`table.data tr.inactive td`更具体，但实际上`table.data .negative`是因为它调用元素的类，而不是一般元素`td`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-11T08:47:55.490

这与css优先级没有直接关系。两个规则都适用，对 td 无效，对 span 为负，但 span 元素在 html structore (DOM) 中的 td 元素“上方”，因此会覆盖 td。在跨度之外添加一个文本，您将看到两个规则都被使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-11T15:28:37.900

您已经正确计算了每条规则的特异性，并且第二条规则的特异性高于第一条规则的特异性。**但是**特异性仅用于“对具有相同重要性和来源的规则进行排序......”（[http://www.w3.org/TR/CSS21/cascade.html#cascading-order](http://www.w3.org/TR/CSS21/cascade.html#cascading-order)）换句话说，特异性是平局断路器，在这种情况下，没有要打破的领带。

# wpf - 使用 WPF Outlook 样式控件通知用户的 Windows 服务不可见

> ID：535905
> 
> 赞同：0
> 
> 时间：2009-02-11T08:29:16.270
> 
> 标签：wpf, wcf, windows-services, remoting

***更新：***我们仍在工作中使用 XP，我的解决方案正在运行，但现在知道 Vista 及更高版本具有隔离会话，我将实施 WCF IPC...

我有一个 Windows 服务需要通知用户发生某种类型的事件。我认为类似于电子邮件通知消息的东西是有意义的。使用 WPF 做这样一个简单的 UI 也是有意义的。这将使我能够学习一些基础知识。

我运行一个线程：

```
Thread thread = new Thread(new ThreadStart(RunUserNotificationOnIndependantThread));
thread.SetApartmentState(ApartmentState.STA);
thread.Start(); 
```

然后我设置对象并调用调用 DoubleAnimation.BeginAnimation 的方法

```
private void RunUserNotificationOnIndependantThread()
    {
        UserNotificationWithImage test = new UserNotificationWithImage();

        test.Title = _title;
        test.Url = _url;
        test.Message = _message;

        test.LoadUserNotification();
    }

    public void LoadUserNotification()
    {
        Rect workAreaRectangle = System.Windows.SystemParameters.WorkArea;
        Left = workAreaRectangle.Right - Width - BorderThickness.Right;
        Top = workAreaRectangle.Bottom - Height - BorderThickness.Bottom;

        _fadeInAnimation.Completed += new EventHandler(_fadeInAnimation_Completed);

        // Start the fade in animation
        BeginAnimation(UserNotificationBase.OpacityProperty, _fadeInAnimation);
    } 
```

调试器到达 BeginAnimation(...) 并且没有出现任何窗口。这甚至可能还是我在尝试这个时做错了什么？？？

UserNotification 代码基于 Nicke Andersson 的博客：[WPF Desktop Alert blog](http://nickeandersson.blogs.com/blog/2007/12/a-wpf-desktop-a.html)

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-11T10:23:52.280

在 XP 上，与桌面交互的服务有两个严重的问题需要克服 - 没有用户登录时该怎么办和有多个用户登录时该怎么办（快速用户切换和终端服务是最常见的两种登录方式一个以上的用户）。

在 Vista 上，出于安全原因，服务在它们自己的隔离桌面上运行，因此您显示的任何 UI 都将在任何用户无法访问的特殊桌面上运行。

您应该编写一个在用户桌面上运行的小 Gui 程序，并使用某种类型的 IPC（Remoting、Soap、Rest、命名管道、文件，任何您喜欢的）与服务通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T08:50:56.107

一般来说，我根本不推荐 Windows 服务直接与用户的桌面交互。举个简单的例子，出现问题是因为服务可能在任何用户登录之前启动。我的建议是创建一个小型应用程序，它通过用户会话启动并通过 IPC（进程间通信）（如 WCF）与 Windows 服务通信。

但是，如果您确实想尝试让它运行，我的提示是为该服务打开“允许与桌面交互”，我似乎记得这个开关在 Vista 下根本不起作用，但其他人应该确认.

亚历克斯

# c - C : POSIX 线程库测试套件

> ID：535908
> 
> 赞同：5
> 
> 时间：2009-02-11T08:29:40.480
> 
> 标签：c, multithreading, unit-testing, posix, test-suite

我正在开发一个实现用户级线程的线程库（我有类似 pthread_setscope 的东西）并且我正在寻找一组测试以避免为我实现的每个函数（互斥锁、条件等）编写一个测试...... )

有谁知道这样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T10:16:40.130

这是[OpenGroup POSIX 线程测试套件](http://www.opengroup.org/testing/testsuites/vsthover.htm)：

> 测试套件可以在以下模式下运行：
> 
> *   POSIX 1003.1-1996 模式，仅涵盖 Pthreads。
> *   UNIX 98 模式，涵盖 Pthreads 和 XSH5 扩展
> *   POSIX 1003.1-2003 模式
> *   UNIX 03 模式
> 
> 这允许在开发线程实现期间轻松使用测试套件，例如最初您可能只想运行 POSIX 1003.1-1996 子集。
> 
> 断言计数如下：
> 
> *   POSIX 96 模式：PTHR.hdr 286、PTHR.os 445
> *   UNIX98 模式：PTHR.hdr 365、PTHR.os 563

还有[IEEE POSIX 认证测试套件](http://get.posixcertified.ieee.org/docs/testsuites.html)。

最后你可以看看[Open POSIX Test Suite](http://posixtest.sourceforge.net/)。

# vba - 使用 VBA 在 Excel 中动态生成表单

> ID：535913
> 
> 赞同：4
> 
> 时间：2009-02-11T08:31:32.613
> 
> 标签：vba, excel

我正在尝试寻找或开发一些 VBA 来动态生成表单字段（标签和文本框）。

源数据是隐藏的 Excel 工作表上的表格。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T08:43:45.970

您可以使用 Add 方法在 Forms Controls 集合中生成新项目，该方法使用其 CLSID 指定控件的类型。

这篇文章[Dynamic Excel Forms using VBA](http://database.ittoolbox.com/groups/technical-functional/excel-l/dynamic-excel-forms-using-vba-1101469)有一些示例代码。

# java - 在 JUnit TestCase 中查找测试方法的数量

> ID：535929
> 
> 赞同：5
> 
> 时间：2009-02-11T08:38:36.217
> 
> 标签：java, junit

有没有办法知道测试用例中测试方法的数量？

我想要做的是有一个测试用例来测试几个场景，对于所有这些我只会做一次数据 setUp() 。同样，我想在所有测试方法结束时进行一次清理（tearDown（））。

我正在使用的当前方法是为文件中存在的测试方法的数量维护一个计数器，并在 tearDown 方法中递减它们，并在计数达到 0 时进行清理。但无论何时都需要注意这个计数器添加了新的测试方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T08:41:46.863

而不是使用 setup/teardown 您可能应该使用带有 [@BeforeClass](http://junit.org/apidocs/org/junit/BeforeClass.html)和 @AfterClass 注释的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-11T08:44:14.750

您可以通过 JUnit4 中的 @BeforeClass 和 @AfterClass 执行此操作：http: [//junit.org/apidocs/org/junit/BeforeClass.html](http://junit.org/apidocs/org/junit/BeforeClass.html)

沃尔克

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-05T07:12:22.357

这是我为查找 JUnit 项目中的所有测试用例而编写的一段代码。它所做的是读取文件（在代码中提到的包下）并使用反射API，找到带有注释“@Test”的测试用例以及以“test”开头但没有@Test注释的测试用例

```
public class TestCaseCount {

      private static List<Class> getClasses(String packageName)
          throws ClassNotFoundException, IOException {
        ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
        assert classLoader != null;
        String path = packageName.replace('.', '/');
        Enumeration<URL> resources = classLoader.getResources(path);
        List<File> dirs = new ArrayList<File>();
        while (resources.hasMoreElements()) {
          URL resource = resources.nextElement();
          dirs.add(new File(resource.getFile()));
        }

        ArrayList<Class> classes = new ArrayList<Class>();
        for (File directory : dirs) {
          classes.addAll(findClasses(directory, packageName));
        }
        return classes /* .toArray(new Class[classes.size()]) */;
      }

      private static List<Class> findClasses(File directory, String packageName)
          throws ClassNotFoundException {
        List<Class> classes = new ArrayList<Class>();
        if (!directory.exists()) {
          return classes;
        }

        File[] files = directory.listFiles();
        for (File file : files) {
          if (file.isDirectory()) {
            assert !file.getName().contains(".");
            classes.addAll(findClasses(file, packageName + "." + file.getName()));
          } else if (file.getName().endsWith(".class")) {
            classes.add(Class.forName(packageName + '.'
                + file.getName().substring(0, file.getName().length() - 6)));
          }
        }
        return classes;
      }

      public static void main(String args[]) {

        ArrayList<Class> classes = new ArrayList<Class>();

        try {
          // Feature1 Test Cases
          classes.addAll(TestCaseCount.getClasses("mypackage.feature1.tests"));

          // Feature2 Test Cases
          classes.addAll(TestCaseCount.getClasses("mypackage.feature2.tests1"));
          classes.addAll(TestCaseCount.getClasses("mypackage.feature2.tests2"));

          // Feature3 Test Cases
          classes.addAll(TestCaseCount.getClasses("mypackage.feature3.tests"));

        } catch (Exception e) {
          e.printStackTrace();
        }

        int testcaseCount = 0;
        for (Class cl : classes) {
          System.out.println("Test Class Name : " + cl.getName());

          Method[] methods = cl.getDeclaredMethods();

          for (Method method : methods) {
            Annotation[] annotations = method.getDeclaredAnnotations();
            if (annotations.length == 0 && method.getName().startsWith("test")) {
              testcaseCount++;
            } else {
              for (Annotation annotation : annotations) {
                if (annotation.annotationType().toString()
                    .equals("interface org.junit.Test")) {
                  testcaseCount++;
                }
              }
            }
          }
        }
        System.out.println("Total Test Cases " + testcaseCount);
      }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-12T09:33:05.403

使用和计数测试的简短`@BeforeClass`示例。`@AfterClass``@Before`

```
public class CountTest {
  static int count;

  @BeforeClass
  public static void beforeClass() {
    count = 0;
  }

  @Before
  public void countUp() {
    count++;
  }

  @AfterClass
  public static void printCount() {
    System.out.println(count + " tests.");
  }

  @Test
  public void test1() {
    assertTrue(true);
  }
  // some more tests 
```

输出将是，例如：

> 5个测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T08:58:38.150

如果您使用的是 Junit4 并且其他人给出的建议是正确的。但是，如果您使用早期版本，则使用此技术来实现您想要的 -

您可以为所有那些您只想设置和拆卸一次的测试定义一个套件。看看 junit.extensions.TestSetup 类。您需要执行这些套件，而不是执行您的测试类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-11T09:49:07.373

junit 3 的一个解决方案是在每个测试中调用一个特殊的 setup 方法来检查一个静态标志。如果未设置标志，则运行全局设置。如果是，请跳过设置。

如果要并行运行测试，请确保正确同步全局设置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-29T12:29:45.707

**在TestWatcher**上使用**@Rules**您可以记下 count 和许多其他内容，例如方法名称等。您可以覆盖这些方法并使用 .

```
@Override   
public Statement apply(Statement base, Description description){
    return super.apply(base, description);  
}

@Override   
protected void failed(Throwable e, Description description) {
    failed.add(description);
    LogUtil.error("[FAILED] "+description.getMethodName()+" [Test Failed]"+e.getMessage());
    super.failed(e, description);
}

@Override   
protected void finished(Description description) {      
    LogUtil.info("[FINISHED] "+description.getMethodName());
    super.finished(description);
}

@Override    
protected void skipped(AssumptionViolatedException e,Description description) {
    LogUtil.error("[FAILED] Test Failed due to Assumption Voilation "+e.getMessage());
    super.skipped(e,description);
}

@Override
protected void starting(Description description) {
    LogUtil.info("-----------------------------------------------------------");
    LogUtil.info("[STARTED]  "+description.getMethodName());
    super.starting(description);
}

@Override
protected void succeeded(Description description) { 
    passed.add(description);
    LogUtil.info("[PASSED] "+description.getMethodName());
    super.succeeded(description);
} 
```

在您的 Junit 测试用例中使用

```
@Rule
public TestRule watcher = new TestWatcherChild(); 
```

# wpf - 上下文相关的 RoutedUICommand.CanExecute，执行

> ID：535931
> 
> 赞同：0
> 
> 时间：2009-02-11T08:39:23.093
> 
> 标签：wpf, routed-commands

我有一个 RoutedUICommand，可以通过 UI 中的各个位置进行访问。如全局Keyboardshortcut、Menu、ContextMenu或Button。要在 RoutedUICommand.CanExecute 和 RoutedUICommand.Execute 方法中执行的代码取决于所使用的 UI 元素。我怎样才能实现这种差异化。我在想我可以使用 (Can)ExecutedRoutedEventArgs.Source 或 OrigianlSource 但源始终相同。它是主根窗口。这通常是如何实现的？我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T10:31:53.230

如果您需要根据调用该命令的 UI 来运行不同的代码，那么您可能做错了什么。

如果您只是通过击键做某事或打开对话框，要求从菜单中获取更多信息，您应该将其分成两个命令（如 MS Office“打印”和“快速打印”命令）。

如果您确实必须对每个 UI 元素做不同的事情，那么您不会从使用命令中获得任何好处，并且应该考虑使用老式的事件处理程序，至少元素特定的代码与元素相关联，而不是存储在中央所有包含“执行”代码。

如果您选择忽略我上面的建议，请查看 CommandParameter 属性，您可以为每个 UI 元素设置不同的参数值，至少有了它您可以保持 UI/Logic 分离命令被设计的错觉提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T09:59:23.197

通常，对于不同的“目标”，您可以有不同的 CommandBinding 实现——每个“源”具有不同的行为是不寻常的。

你能举一个你正在尝试做的例子吗？

# c - 如何使用可选值在 XSLT 中模拟 C 枚举

> ID：535938
> 
> 赞同：5
> 
> 时间：2009-02-11T08:42:30.683
> 
> 标签：c, xslt

我正在尝试进行生成 C 代码的 XSLT 转换，应转换以下 XML：

```
<enum name="anenum">
  <enumValue name="a"/>
  <enumValue name="b"/>
  <enumValue name="c" data="10"/>
  <enumValue name="d" />
  <enumValue name="e" />
</enum> 
```

它应该转换为一些 C 代码，如下所示：

```
enum anenum {
   a = 0,
   b = 1,
   c = 10,
   d = 11,
   e = 12
} 
```

或者（因为 C 预处理器将处理求和）：

```
 enum anenum {
       a = 0,
       b = 1,
       c = 10,
       d = c+1,
       e = c+2
    } 
```

我的 XSLT 的核心如下所示：

```
<xsl:for-each select="enumValue">
  <xsl:value-of select="name"/>
  <xsl:text> = </xsl:text>
  <xsl:choose>
    <xsl:when test="string-length(@data)&gt;0">
      <xsl:value-of select="@data"/>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="position()-1"/>
    </xsl:otherwise>
  </xsl:choose>
  <xsl:text>, 
```

（为简单起见，我跳过了一些“最后一个元素没有逗号”的代码）

此示例不会为**d**和**e生成正确的值**

我一直试图让它为变量**d**和**e**工作，但到目前为止我没有成功。

使用如下结构：

```
<xsl:when test="string-length(preceding-sibling::enumValue[1]/@datavalue)&gt;0">
    <xsl:value-of select="preceding-sibling::enumValue/@data + 1"/>
</xsl:when> 
```

...仅适用于指定值之后的第一个（在本例中为**d**）。

谁能帮我？我可能在程序上想太多了……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-11T18:30:15.857

**使用键的非递归解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:strip-space elements="*"/>
 <xsl:output method="text"/>

 <xsl:key name="koffsetEnums" match="enumValue[@data]"
  use="generate-id()"/>

    <xsl:template match="enum">
      enum <xsl:value-of select="@name"/> {
      <xsl:apply-templates select="enumValue"/>
      }
    </xsl:template>

    <xsl:template match="enumValue">
      <xsl:value-of select="concat(@name, ' = ')"/>

      <xsl:variable name="voffsetValueId" select=
       "generate-id((. | preceding-sibling::enumValue)
                                            [@data][last()]
                  )"/>

      <xsl:choose>
        <xsl:when test="not($voffsetValueId)">
          <xsl:value-of select="concat(position(),'&#xA;      ')"/>
        </xsl:when>
        <xsl:otherwise>
          <xsl:variable name="vinitOffset" select=
           "key('koffsetEnums', $voffsetValueId)/@data"
           />

           <xsl:value-of select=
            "$vinitOffset
            +
               count(preceding-sibling::enumValue)
             -
               count(key('koffsetEnums', $voffsetValueId)/preceding-sibling::enumValue)
            "
            />
           <xsl:text>&#xA;      </xsl:text>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:template>

</xsl:stylesheet> 
```

**当对最初提供的 XML 文档应用上述转换时**：

```
<enum name="anenum">
    <enumValue name="a"/>
    <enumValue name="b"/>
    <enumValue name="c" data="10"/>
    <enumValue name="d" />
    <enumValue name="e" />
</enum> 
```

**产生所需的结果**：

```
enum anenum {
      a = 1
      b = 2
      c = 10
      d = 11
      e = 12

      } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-12T17:49:01.687

**使用键的更好解决方案，避免大多数使用前面的兄弟轴**：

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:strip-space elements="*"/>
    <xsl:output method="text"/>
<!--                                              -->   
    <xsl:key name="ksimpleEnValues" match="enumValue[not(@data)]"
     use="generate-id(preceding-sibling::enumValue[@data][1])"/>
<!--                                              -->       
    <xsl:template match="enum">
    enum <xsl:value-of select="@name"/>
         {      
          <xsl:apply-templates select=
           "key('ksimpleEnValues', '')
           "/>
           <xsl:apply-templates select="enumValue[@data]"/>
         }
    </xsl:template>
<!--                                              -->
    <xsl:template match="enumValue">
      <xsl:param name="pOffset" select="0"/>
        <xsl:value-of select=
         "concat(@name, ' = ', position()+$pOffset,'&#xA;      ')"/>
    </xsl:template>
<!--                                              -->
    <xsl:template match="enumValue[@data]">
        <xsl:value-of select=
         "concat(@name, ' = ', @data,'&#xA;      ')"/>
<!--                                              -->
      <xsl:apply-templates select=
           "key('ksimpleEnValues', generate-id())">
       <xsl:with-param name="pOffset" select="@data"/>
      </xsl:apply-templates>
  </xsl:template>       
</xsl:stylesheet> 
```

**当应用于最初提供的 XML 文档时**：

```
<enum name="anenum">
    <enumValue name="a"/>
    <enumValue name="b"/>
    <enumValue name="c" data="10"/>
    <enumValue name="d" />
    <enumValue name="e" />
</enum> 
```

**产生想要的结果**：

```
enum anenum
 {      
  a = 1
  b = 2
  c = 10
  d = 11
  e = 12
 } 
```

**说明**：

1.  命名的键`ksimpleEnValues`索引所有`enumValue`不具有该`data`属性的元素。索引由`enumValue`具有`data`属性的第一个前面元素的 generate-id() 值完成。

2.  因此`key('ksimpleEnValues', someId)`，包含所有`enumValue`元素的节点集`enumValue`其 generate-id() 等于`someId`，并且所有这些`enumValue`元素都在 next 之前`enumValue`具有`data`属性，如果存在的话。

3.  key('ksimpleEnValues', '') 是所有元素的节点集，这些`enumValue`元素之前没有具有属性的`enumValue`元素。`data`

4.  匹配的模板`enumValue`带有一个可选参数`$pOffset`，其中将传递具有此属性`data`的前一个`enumValue`元素的属性值，否则默认值为`$pOffset`0。

5.  `enumValue`具有属性的模板匹配元素`data`生成其枚举值（@name = @data），然后将模板应用于其自身和具有属性`enumValue`的下一个（如果存在）之间的所有元素。属性的值作为参数传递，当从其处理产生输出时，它将被添加到每个选定元素的相对位置。`enumValue``data``data``$pOffset``enumValue`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T09:22:18.683

您不能更改 xsl 中的“变量”，但可以使用递归。除非绝对紧急，否则不要使用前面的兄弟谓词，因为它们会影响你的表现。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <xsl:template match="/" >
        <xsl:call-template name="printEnum">
            <xsl:with-param name="value" select="0"/>
            <xsl:with-param name="position" select="1"/>
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="printEnum">
        <xsl:param name="position"/>    
        <xsl:param name="value" select="0"/>
        <xsl:variable name="node" select="/enum/enumValue[$position]"/>
        <xsl:variable name="enumValue">
            <xsl:choose>
                <xsl:when test="$node/@data">
                    <xsl:value-of select="$node/@data"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="$value + 1"/>
                </xsl:otherwise>
            </xsl:choose>       
        </xsl:variable>     
        <xsl:value-of select="concat($node/@name, ' = ', $enumValue, ' , ')"/>
        <xsl:if test="/enum/enumValue[$position + 1]">
            <xsl:call-template name="printEnum">
                <xsl:with-param name="value" select="$enumValue"/>
                <xsl:with-param name="position" select="$position + 1"/>
            </xsl:call-template>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

# web-services - 将富域对象公开为服务

> ID：535939
> 
> 赞同：0
> 
> 时间：2009-02-11T08:42:40.433
> 
> 标签：web-services, domain-driven-design, mvp, n-tier-architecture

我一直在努力思考如何将我的域对象公开给客户端。无论我使用的是富客户端还是使用 Web，我都想使用 MVP 和存储库模式。

我想要了解的是如何公开我的存储库和模型，它们将在服务器上。是否可以通过 Web 服务公开具有状态的复杂业务对象，或者我是否必须使用与语言/平台无关的专有技术，如 .Net 远程处理、EJB、COM+、DCOM 等？

其他一些限制是我不想每次我想执行操作时都必须不断地从数据库中加载复杂的域对象或通过网络传递它。一些复杂的逻辑可能是屏幕的某些区域可能会根据用户权限以及对象的状态被禁用或不可见。验证和错误消息信息也需要显示给用户。我希望能够在逻辑上调用我的许多域对象操作，就好像它在同一台机器上运行一样。

有了网络，您就可以自由发挥。您不必跨服务边界公开您的对象，因此您可以根据需要使它们变得丰富。我正在尝试创建一个丰富的 N-teir 架构，当调用该模型的客户端在另一台机器上时它可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-11T08:54:26.833

您可以通过 REST 或 Web 服务像任何其他对象一样公开您的域对象。我认为关键是要了解您必须在一次调用中公开提供业务价值的服务，这些服务不一定会 1:1 映射到您的存储库。因此，虽然您在服务器上可能期望单个服务调用使用多个存储库并执行各种聚合，但您在任何类型的 Web 服务上公开的内容应该或多或少是完整的结果。您在服务上公开的操作不应公开单独的存储库，而应专注于提供给定业务价值的有意义的操作。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-11T09:03:33.363

您可以将 SOAP 格式化程序用于 .Net 远程处理，但生成的服务可能很难作为服务使用，而且它肯定会非常健谈。

如果您希望将您的域模型作为服务使用，则应将其设计为服务。

正如领域驱动设计中所述，服务是无状态的，因此它不会直接暴露您的对象。您的服务应该公开提供有意义的业务操作的方法，这些操作将作为一个单元执行。

通常认为客户端中的模型处于不同的有界上下文中，因为它的关注点与服务器上的模型略有不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-22T18:24:55.237

> 我想要了解的是如何公开我的存储库和模型，它们将在服务器上。是否可以通过 Web 服务公开具有状态的复杂业务对象，或者我是否必须使用与语言/平台无关的专有技术，如 .Net 远程处理、EJB、COM+、DCOM 等？

一个好的领域模型将是高度行为化的，并且围绕问题领域（以及您与领域专家的讨论）进行设计，因此我反对将其设计为暴露给远程消费者（与从数据库中设计它的方式相同）或 GUI 首先是一个坏主意）。

相反，我会考虑使用 REST 或消息传递之类的样式，并决定要公开的接口，然后映射到域/从域映射。因此，如果您使用 REST，您将设计您的资源和 API（URL、表示等），然后您需要从域模型中实现它。

如果这变得不自然，那么您总是可以拥有多个模型，例如将单独的只读表示特定模型映射到同一数据源（或包装复杂的行为域模型）是我使用过多次的方法.

> 其他一些限制是我不想每次我想执行操作时都必须从数据库中加载复杂的域对象或通过网络传递它

查看 HTTP 中的缓存并支持资源的多种表示，还要查看数据访问解决方案中的缓存。

> 验证和错误消息信息也需要显示给用户。我希望能够在逻辑上调用我的许多域对象操作，就好像它在同一台机器上运行一样。

您可以将其表示为资源，或者更可能查看 HTTP 状态代码和您希望在这些情况下使用的响应正文。

# javascript - 检查浏览器缓存中的 js 文件

> ID：535940
> 
> 赞同：13
> 
> 时间：2009-02-11T08:43:30.760
> 
> 标签：javascript, http, web-applications, browser, caching

如何检查用户缓存中的 javascript 文件。如果他刷新页面或在一段时间后访问该站点。我不需要再次下载那个 js 文件。关闭站点后是否清理 js 文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-11T08:48:27.410

是否缓存 javascript 文件取决于您的 Web 服务器的设置方式、用户浏览器的设置方式以及服务器和用户之间的任何 HTTP 代理服务器的设置方式。您可以控制的唯一一点是服务器的设置方式。

如果您希望 javascript 被缓存的最佳机会，那么您的服务器需要使用 javascript 文件发送正确的 HTTP 标头。具体如何操作取决于您使用的 Web 服务器。

以下是一些可能有帮助的链接：

阿帕奇 - [http://httpd.apache.org/docs/2.0/mod/mod_expires.html](http://httpd.apache.org/docs/2.0/mod/mod_expires.html)

IIS - [http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/0fc16fe7-be45-4033-a5aa-d7fda3c993ff.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/0fc16fe7-be45-4033-a5aa-d7fda3c993ff.mspx?mfr=true)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-11T08:48:40.280

浏览器会自动查看它自己缓存中的内容。但是，您可以使用多种机制来控制它。

查看各种 HTTP 缓存标头，例如：

*   最后修改
*   过期
*   电子标签

当涉及到客户端缓存时，Expires 标头是其中最关键的。如果您设置了一个遥远的未来 Expires 标头（例如，10 年），浏览器将不会（理论上）不再向服务器查找该文件。当然，当文件内容更改时，您需要一种更改文件名的方法。大多数人通过在文件路径中添加内部版本号来管理它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-11T08:49:23.380

浏览器将为您处理缓存。

缓存何时清空部分取决于浏览器设置，部分取决于您发送的标头。如果您设置了`Expires`标头，则浏览器在文件过期之前不应重新请求该文件。阅读有关[HTTP 标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)的内容可能会对您有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-27T17:54:33.387

只有**当 Javascript 文件来自同一个域**afaik 时，才能检查 Javascript 文件是否被缓存。

然后你可以像这样检查它：

```
try {
    await fetch("https://YOUR-DOMAIN.org/static/build/js/YOUR-FILE.js",
             {method:'Head',cache:'only-if-cached',mode:'same-origin'});
} catch (error) {
    console.error(error);
} 
```

**如果它被缓存**，你会得到一个`200`返回，否则会抛出一个错误。

 **# parallel-processing - 计算公式结果的最佳方法？

> ID：535953
> 
> 赞同：0
> 
> 时间：2009-02-11T08:49:38.327
> 
> 标签：parallel-processing, formula, rpn

我目前有一个可以包含 100 个用户定义公式的应用程序。目前，我使用反向波兰符号来执行计算（将值和变量推入堆栈，然后将它们从堆栈中弹出并进行评估）。开始并行化此过程的最佳方法是什么？我应该看功能语言吗？

计算是在数字数组上执行的，例如，简单的 A+B 实际上可能意味着 100 次加法。我目前正在使用 Delphi，但这不是未来的要求。我将使用最适合这项工作的工具。公式也可能相互依赖，例如，我们可能有一个公式 C=A+B 和第二个公式 D=C+A。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T09:54:36.640

在不了解更多信息的情况下，我建议尽可能采用 SIMD 风格的方法。也就是说，创建线程来计算单个数据集的所有公式。尝试划分公式的计算以并行化它们不会产生太大的速度改进，因为能够将计算拆分为适合线程的离散单元所需的逻辑将难以编写且更难正确，开销将取消出任何速度增益。它也将很快遭受收益递减的影响。

现在，如果您有一组适用于多组数据的公式，那么并行化会变得更容易并且可以更好地扩展。每个线程对一组数据进行所有计算。每个 CPU 核心创建一个线程，并设置其与每个核心的亲和性。每个线程实例化公式评估代码的一个实例。创建一个加载单个数据集并将其传递给空闲线程的主管。如果没有线程空闲，则等待第一个线程完成其数据处理。当所有数据集都处理完毕并且所有线程都完成后，然后退出。使用这种方法，线程数多于 CPU 上的内核数并没有任何优势，因为线程切换速度很慢，并且会对整体速度产生负面影响。

如果您只有一个数据集，那么这不是一项简单的任务。这将需要解析评估树的分支而不依赖于其他分支，并将这些分支耕种为在每个核心上运行的单独线程并等待结果。然后，您会遇到同步数据和确保数据一致性的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-13T16:50:13.160

假设您的公式（方程式）不是循环的，否则您不能“​​仅仅”评估它们。如果您有像 A = B + C 这样的矢量化方程，其中 A、B 和 C 是数组，让我们在概念上将它们拆分为组件上的方程，这样如果数组大小为 5，则该等式被拆分为

```
a1 = b1 + c1
a2 = b2 + c2
...
a5 = b5 + c5 
```

现在假设这一点，您有大量关于简单量（无论是整数、有理数还是其他）的方程。

如果您有两个方程 E 和 F，假设 F 的右侧提到 E 的左侧，则 F 依赖于 E，例如

```
E: a = b + c
F: q = 2*a + y 
```

现在要了解如何计算这个，你总是可以使用随机迭代来解决这个问题（这只是解释中的一个中间步骤），遵循这个算法：

```
1 while (there is at least one equation which has not been computed yet)
2   select one such pending equation E so that:
3     for every equation D such that E depends_on D:
4       D has been already computed
5   calculate the left-hand side of E 
```

无论您如何在线上进行选择，此过程都会以正确的答案结束 // 2。现在很酷的是，它也很容易并行化。您可以在任意数量的线程中运行它！您需要的是一个并发安全队列，它包含那些先决条件（那些方程所依赖的）已被计算但尚未自行计算的方程。每个线程一次（线程安全地）从这个队列中弹出一个方程，计算答案，然后检查现在是否有新的方程，以便计算出它们的所有先决条件，然后添加这些方程（线程安全）到工作队列。完毕。

# greasemonkey - 如何创建在远程页面中定义的类的对象？

> ID：535959
> 
> 赞同：3
> 
> 时间：2009-02-11T08:53:08.850
> 
> 标签：greasemonkey

例如，在远程网页中，有这样一段代码：

```
<script>
function foo(){
this.bar = 0;
} 
```

在我的greasemonkey 脚本中，我想创建一个此类的对象：

```
var _foo= unsafeWindow['foo'];
new _foo(); 
```

然后我得到一个非法值错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-04T07:11:24.037

这是如何做到的：

```
var _foo = eval('(' + unsafeWindow.foo.toSource() + ')');
var x = new _foo(); 
```

由于 Greasemonkey 执行不同的安全区域或沙盒，可能需要此解决方法，但我不完全确定。

# c# - 合并msi和exe

> ID：535966
> 
> 赞同：31
> 
> 时间：2009-02-11T08:55:58.827
> 
> 标签：c#, deployment

我的部署项目创建了一个 .msi 文件和一个 .exe 文件。是否可以将它们合并为一个.exe？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-02-11T09:17:21.473

是的，您可以创建包含 MSI 和 setup.exe 引导程序文件的自解压安装程序。

我认为使用 WinZip 可以做到这一点，或者您可以使用 Windows 附带的 IExpress。以下是如何[使用 IExpress 创建自解压可执行文件](http://www.petri.co.il/create_executable_with_iexpress.htm)的指南。您可以使用 IExpress 向导或手动编写配置文件，然后您可以在安装项目的后期构建步骤中执行该文件，例如通过调用

```
IExpress /N /Q MySetup.sed 
```

示例配置文件如下所示：

```
[Version]
Class=IEXPRESS
SEDVersion=3
[Options]
PackagePurpose=InstallApp
ShowInstallProgramWindow=1
HideExtractAnimation=1
UseLongFileName=1
InsideCompressed=0
CAB_FixedSize=0
CAB_ResvCodeSigning=0
RebootMode=N
InstallPrompt=%InstallPrompt%
DisplayLicense=%DisplayLicense%
FinishMessage=%FinishMessage%
TargetName=%TargetName%
FriendlyName=%FriendlyName%
AppLaunched=%AppLaunched%
PostInstallCmd=%PostInstallCmd%
AdminQuietInstCmd=%AdminQuietInstCmd%
UserQuietInstCmd=%UserQuietInstCmd%
SourceFiles=SourceFiles
[Strings]
InstallPrompt=
DisplayLicense=
FinishMessage=
TargetName=MySetup.exe
FriendlyName=My cool application
AppLaunched=CMD /C setup.exe
PostInstallCmd=
AdminQuietInstCmd=
UserQuietInstCmd=
FILE0="setup.exe"
FILE1="MySetup.msi"
[SourceFiles]
SourceFiles0=
[SourceFiles0]
%FILE0%=
%FILE1%= 
```

然而，对于自解压安装程序方案，有一点需要注意。由于另一个修复，这些场景被VS2008 SP1 创建的引导程序 (setup.exe)[破坏。](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=369138)有关解决方法，请参阅以下线程：[http](http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/3731985c-d9cc-4403-ab7d-992a0971f686/?ffpr=0) ://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/3731985c-d9cc-4403-ab7d-992a0971f686/?ffpr=0 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-10T16:25:17.343

[我喜欢它，你可以在这个链接](http://www.petri.co.il/create_executable_with_iexpress.htm)上看到如何使用 IExpress ！

我看到的唯一问题是我在 Windows Vista 64 位上生成了一个安装程序，我试图将生成的 .exe 安装在具有 Windows Server 2008 32 位的服务器中，但它引发了有关处理器类型的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-11-14T08:31:16.683

另一种选择可能是带有 sfx 插件的 7zip：[http](http://www.7-zip.org/download.html) ://www.7-zip.org/download.html或 WinZip 自解压器：http: [//www.winzip.com/prodpagese.htm](http://www.winzip.com/prodpagese.htm)

# jquery - 'Destination DIV' 在简单的 jQuery AJAX 调用中消失

> ID：535967
> 
> 赞同：1
> 
> 时间：2009-02-11T08:56:07.187
> 
> 标签：jquery, ajax

**编辑：**重要提示：遇到此问题的任何人都极不可能遇到与我完全相同的问题-请查看下面的答案以获取我非常晦涩的解决方案。然而，有一些有用的回应可能适用于其他人的情况。如果您遇到类似的问题，祝您好运。

* * *

我有一个非常简单的 jQuery AJAX 调用：

```
$("#cart").load("/woops/store/cartsummary"); 
```

这将返回（通过 ASP.NET MVC 操作）一些非常简单的 HTML：

```
<DIV>something</DIV> 
```

在我的页面上，我有一个目标 DIV，最初填充了一些 HTML：

```
<div class="padding15" id="cart">
   <% RenderCart(ViewData.Model.CartItems); %>
</div> 
```

问题是当调用返回原始#cart div 时，它会消失而不是被替换。如果我查看 Chrome 中的 DOM，它完全是空的。肯定会返回正确的 HTML，因为我在 Fiddler 中看到了它。

此外，这段代码有效（但显然不是我想要的，因为它是附加的）：

```
$.get("/woops/store/cartsummary", {}, function(data) {
    $("#cart").append(data); 
}); 
```

我想我只是在做一些愚蠢的事情——但我正在从 Microsoft AJAX 切换到 jQuery，我认为我误解了一些小的基本问题。我的 DIV 去哪儿了？

（顺便说一句：'woops' 是一个虚拟目录，以确保我的网站在开发过程中没有根相对链接）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T09:41:03.663

Wow! Well that was crazy.

Turns out the problem is because of this code that I have in an included JS file:

```
 jQuery.fn._init = jQuery.fn.init
 jQuery.fn.init = function(selector, context) {
     if (typeof selector === 'string') {
         return jQuery.fn._init(selector, context).data('selector', selector);
     }
     return jQuery.fn._init(selector, context);
 }; 
```

I am using jQuery 1.2.6.

The code above came from this post [How do I get a jQuery selector's expression as text?](https://stackoverflow.com/questions/500246/how-do-i-get-a-jquery-selectors-expression-as-text). i think the author since rewrote it, but its breaking this for some strange reason.

The DIV just disappears - but i got thrown because replaceWith() DID work and so did append(). I guess some of the other methods mus internally being tripped up by this but those two werent.

Thanks for everyones quick suggestions. I'm sure they'll help out others some point.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T09:01:47.453

```
append 
```

不会取代你的 div。它将数据粘贴在 div 的后面。

你可以试试

```
replaceWith( content ) 
```

反而。

[jQuery 文档中的 replaceWith](http://docs.jquery.com/Manipulation/replaceWith#content)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T08:58:20.410

尝试

```
$.get("/woops/store/cartsummary", {}, function(data) {
    $("#cart").html(data); 
}); 
```

（[jQuery 文档](http://docs.jquery.com/Attributes/html#val)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T09:00:52.450

也许试试这个？

```
$.get("/woops/store/cartsummary", {}, function(data) {
    $("#cart").html(data); 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T09:04:10.117

检查您的 div 的 ID，确保将正确的 ID 传递给 jquery。

# .net - Lambda 表达式导致弱引用的目标不能是 GC？

> ID：535972
> 
> 赞同：2
> 
> 时间：2009-02-11T08:57:38.290
> 
> 标签：.net, lambda, weak-references

```
namespace Test
{
    class Test
    {
        delegate void HandleMessage(string message);

        public void handleMessage(string message){}

        static void Main(string[] args)
        {
            HandleMessage listener1 = new Test().handleMessage;
            WeakReference w1 = new WeakReference(listener1);

            HandleMessage listener2 = (message) => { };
            WeakReference w2 = new WeakReference(listener2);

            Console.WriteLine("w1.Target:\t[" + w1.Target + "]");
            Console.WriteLine("w2.Target:\t[" + w2.Target + "]");

            listener1 = null;
            listener2 = null;
            GC.Collect();
            Console.WriteLine("after GC");

            Console.WriteLine("w1.Target:\t[" + w1.Target + "]");
            Console.WriteLine("w2.Target:\t[" + w2.Target + "]");

            Console.ReadLine();
        }
    }
} 
```

为什么 GC 后 w2.Target 不为空？

```
    w1.Target：[Test.Test+HandleMessage]
    w2.Target：[Test.Test+HandleMessage]
    GC后
    w1.目标：[]
    w2.Target：[Test.Test+HandleMessage]

```

**编辑**

感谢所有的答案，Brian Rasmussen 和 Jon Skeet 你的答案是正确的。现在我彻底明白了这是怎么回事，所以我又写了一个例子来让一切更清楚。

以下示例表明：

如果 Test#create() 没有引用任何实例属性或方法，那么编译器将创建“private static HandleMessage CS$<>9__CachedAnonymousMethodDelegate1”，就像 Jon Skeet 所说的那样 - 当你使用相同的lambda 表达式多次。

如果 Test#create() 确实引用了实例属性或方法，如下例调用 this.ToString(); 那么编译器无法创建静态方法来替换实例方法的逻辑，所以在GC之后可以收集HandleMessage实例。

```
namespace Test
{
    class Test
    {
        public delegate void HandleMessage(string message);

        public void handleMessage(string message)
        {
        }

        public HandleMessage create()
        {
            return (message) => { 
                //this.ToString(); 
            };
        }       

        static void Main(string[] args)
        {
            HandleMessage listener1 = new Test().handleMessage;
            WeakReference w1 = new WeakReference(listener1);

            HandleMessage listener2 = new Test().create();//(message) => { };
            WeakReference w2 = new WeakReference(listener2);

            Console.WriteLine("w1.Target:\t[" + w1.Target + "]");
            Console.WriteLine("w2.Target:\t[" + w2.Target + "]");

            listener1 = null;
            listener2 = null;
            GC.Collect();
            Console.WriteLine("after GC");

            Console.WriteLine("w1.Target:\t[" + w1.Target + "]");
            Console.WriteLine("w2.Target:\t[" + w2.Target + "]");

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-11T09:39:33.277

它与 lambda 无关。对于匿名委托，可以观察到相同的行为。因此，如果您将代码更改为

```
HandleMessage listener2 = delegate(string message) => { }; 
```

你得到相同的结果。

在第一种情况下，您在 Test 的实例上有一个实例方法。由于您在为空时没有对此实例的其他引用`listener1`，因此它可能会被收集。

在第二种情况下，匿名方法必须放在某种类型上（因为方法不能单独存在）。在这种情况下，编译器将匿名方法作为静态方法放置在您的`Test`类中。此外，引用存储在`Test`类型的静态成员中。因此`Type`也有对该方法的静态引用，这就是它在集合中存在的原因。

查看 IL 以了解事物的连接方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-11T09:26:14.993

lambda 表达式缓存在类的静态字段中 - 当我编译它时，它位于`CS$<>9__CachedAnonymousMethodDelegate1`. 当您多次使用相同的 lambda 表达式时，这会提高效率，但这意味着它不会被垃圾收集。

查看生成的 IL 以了解我的意思。

如果 lambda 表达式捕获任何变量，我不相信它会被缓存（因为它不可能！）。因此，如果您更改代码以使用：

```
string x = "hello";
HandleMessage listener2 = message => Console.WriteLine(x); 
```

然后你会看到`w2.Target`垃圾收集后变为空。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-02-11T09:21:55.550

force-collect-memory 的常见模式是：

```
GC.Collect();
GC.WaitForPendingFinalizers();
GC.Collect(); 
```

此外，GC 可以免费不收集东西 :)

# python - python sleep == IDE锁死

> ID：535973
> 
> 赞同：1
> 
> 时间：2009-02-11T08:57:38.527
> 
> 标签：python, ide, lockup

当我的脚本休眠 50 秒时，我的 IDE 锁定，这很烦人。我无法切换选项卡、查看源代码、键入代码等。它发生在 pylde 和 pyscripter 中，我没有尝试过其他 IDE。我能做些什么来解决这个问题？我实际上在做

```
for i in range(0, timeInSeconds): time.sleep(1) 
```

希望IDE每秒更新一次，但看起来不是这样。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-11T09:10:55.717

我假设您是从 IDE 中运行代码？

运行代码时，您的 IDE 可能会阻塞。寻找某种可能控制该行为的设置，否则我认为您唯一的选择就是更改 IDE。（或者，从 IDE 外部运行您的代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T09:16:57.777

你可以配置在外部运行你的脚本吗？我不知道具体的 IDE，但我会尝试为调试脚本生成不同的进程，而不是在 IDE 下运行它们。如果这没有帮助，那么这是 IDE 的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T09:19:59.720

问题是你的IDE不是python。我不经常使用睡眠，我刚刚在[Eric IDE](http://eric-ide.python-projects.org/)上尝试过，您可以在代码运行和睡眠时*使用*您的 IDE。如果无法设置您的 IDE 并且您需要它，请考虑更改 IDE 或从控制台运行您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T14:05:59.953

就个人而言，我认为您永远不应该在与您的 IDE 相同的循环中执行代码。由于大多数 IDE 运行 GUI 主循环，阻止它会导致用户界面完全冻结。这只是自找麻烦，我会针对这两个 IDE 提出错误报告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-13T01:38:46.270

我怀疑 IDE 处于循环等待脚本完成的问题。

这本身不是问题，只要 IDE 处于此循环中时仍会处理任何用户生成的消息。

但我怀疑在这种情况下出现问题的是 IDE 只是在没有处理和消息的情况下运行循环，因此用户界面似乎被锁定。

IDE 需要更改为在循环中处理 GUI 消息，或者需要创建一个线程来运行脚本。然后线程将在后台运行，GUI 将保持响应。

例如[Zeus for Windows](http://www.zeusedit.com) IDE 使用后台线程方法，它没有这个问题。

# windows - 处理 Windows 批处理脚本中的引号

> ID：535975
> 
> 赞同：70
> 
> 时间：2009-02-11T08:57:54.500
> 
> 标签：windows, batch-file, quotes, scripting

在 Windows 批处理文件中，当您执行以下操作时：

> `set myvar="c:\my music & videos"`

该变量`myvar`与包含的引号一起存储。老实说，我觉得这很愚蠢。引号只是说明字符串的开始和结束位置，而不是作为值本身的一部分存储。
我怎样才能防止这种情况发生？

谢谢。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2011-12-20T21:34:28.370

```
set "myvar=c:\my music & videos" 
```

注意引号在 myvar 之前开始。其实就是这么简单。旁注： myvar 之后不能回显，除非它用引号括起来，因为 & 将被读取为命令分隔符，但它仍然可以作为路径工作。

[http://ss64.com/nt/set.html](http://ss64.com/nt/set.html)在“变量名可以包含空格”下

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-10-20T12:25:37.263

这是正确的方法：

```
set "myvar=c:\my music & videos" 
```

引号不会包含在变量值中。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2009-02-11T13:12:18.710

这取决于您要如何使用该变量。如果您只想使用不带引号的变量值，您可以使用延迟扩展和字符串替换，或者使用以下`for`命令：

```
@echo OFF
SETLOCAL enabledelayedexpansion

set myvar="C:\my music & videos" 
```

正如 andynormancx 所说，由于字符串包含`&`. 或者你可以用 来逃避它`^`，但我认为引号更干净一些。

如果您使用带有字符串替换的延迟扩展，您将获得不带引号的变量值：

```
@echo !myvar:"=!
>>> C:\my music & videos 
```

您还可以使用以下`for`命令：

```
for /f "tokens=* delims=" %%P in (%myvar%) do (
    @echo %%P
)
>>> C:\my music & videos 
```

但是，如果要在命令中使用变量，则必须使用带引号的值或将变量的值括在引号中：

1.  使用字符串替换和延迟扩展来使用不带引号的变量值，但在命令中使用变量：

    ```
    @echo OFF
    SETLOCAL enabledelayedexpansion

    set myvar="C:\my music & videos"
    md %myvar%
    @echo !myvar:"=! created. 
    ```

2.  使用`for`命令来使用不带引号的变量的值，但是在命令中使用变量时必须用引号括起来：

    ```
    @echo OFF
    set myvar="C:\my music & videos"

    for /f "tokens=* delims=" %%P in (%myvar%) do (
        md "%%P"
        @echo %%P created.
    ) 
    ```

长话短说，`&`在批处理文件中使用包含嵌入空格和/或 s 的路径或文件名确实没有干净的方法。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-02-11T09:28:21.540

使用脚本。

许多个月前（即大约 8 年左右）我正在从事一个大型 C++/VB6 项目，并且我有各种批处理脚本来完成部分构建。

然后有人指给我看[Joel 测试](http://www.joelonsoftware.com/articles/fog0000000043.html)，我特别喜欢第 2 点，并着手将我所有的小构建脚本整合到一个构建脚本中。. .

它几乎让我心碎，让所有这些小脚本一起工作，在不同的机器上，设置略有不同，天哪，这太可怕了——尤其是设置变量和参数传递。它真的很脆，最轻微的东西都会打破它，需要 30 分钟的调整才能重新开始。

最终——我可能很固执——**我把所有的东西都扔了进去**，大约一天**后用 JavaScript 重新编写了它**，用 CScript 从命令提示符运行它。

我没有回头。虽然现在是 MSBuild 和 Cruise Control，但如果我需要做一些稍微涉及批处理脚本的事情，我会使用 jscript。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-11-11T09:11:44.253

Windows 命令解释器允许您在整个 set 命令周围使用引号（在从 NT 4.0 到 Windows 2012 R2 的每个 Windows NT 版本中都有效）

你的脚本应该写成如下：

```
@echo OFF

set "myvar=C:\my music & videos" 
```

然后您可以根据需要在变量周围加上引号。

使用 CMD 提示符有时看起来很深奥，但命令解释器实际上在遵守其内部逻辑方面表现得非常可靠，您只需要重新考虑一下。

事实上，set 命令根本不需要你使用引号，但是你进行变量赋值的方式和不使用引号的 , 方法都会导致你的变量周围有额外的空格，这很难调试脚本时请注意。

例如，以下两个在技术上都是有效的，但你可以有尾随空格，所以这不是一个好习惯：

```
set myvar=some text   
set myvar="some text" 
```

例如，以下两种方法都是在 Windows 命令解释器中设置变量的好方法，但双引号方法更好：

```
set "myvar=Some text"
(set myvar=Some value) 
```

这两者都没有解释变量将完全具有您正在寻找的数据。

**strong text** 但是，出于您的目的，只有引用的方法才能有效工作，因为您使用的是保留字符

因此，您将使用：

```
set "myvar=c:\my music & videos" 
```

但是，即使变量 IS 正确设置为该字符串，当您 ECHO 字符串时，命令解释器会将 & 符号解释为关键字，以指示接下来的另一个语句。

所以如果你想从变量中回显字符串，仍然需要告诉 CMD 解释器它是一个文本字符串，或者如果你不希望引号显示你必须执行以下操作之一：

用引号回显变量：

```
Echo."%myvar%" 
```

回显不带引号的变量：

```
Echo.%myvar:&=^&%
<nul SET /P="%myvar%" 
```

在上述两种情况下，您可以很好地回显不带引号的字符串。下面的示例输出：

```
C:\Admin>    Echo.%myvar:&=^&%
C:\my music & videos

C:\Admin>    <nul SET /P="%myvar%"
C:\my music & videos
C:\Admin> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-11T09:11:04.187

尝试使用转义字符'^'，例如

```
set myvar=c:\my music ^& videos 
```

扩展 myvar 时要小心，因为 shell 可能不会将 & 视为文字。如果上述方法不起作用，请尝试在字符串中插入插入符号：

```
set myvar=c:\my music ^^^& videos 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-16T18:09:35.620

两种解决方案：

1.  不要在路径名（目录或文件名）中使用对命令解释器来说特殊的空格或其他字符。如果您只使用字母、数字、下划线和连字符（以及在扩展名之前的一个句点来识别文件类型），您的脚本编写工作将变得无比简单。

    多年来，我编写并收集了大量工具，包括一个重命名文件的 DOS 实用程序。（它开始只是从文件名中删除空格，但演变成可以替换文件名中的字符或字符串的东西，甚至是递归的。）如果有人感兴趣，我会让我长期被忽视的网站启动并运行并发布这个和其他。

    也就是说，变量不仅仅用于保存路径名，所以......

2.  正如其他人已经指出的那样，**SET "myvar=c:\my music & videos"**是此类变量值的正确解决方法。（是的，我说的是解决方法。我同意您最初倾向于仅引用值（“我的音乐和视频”）更直观，但正如他们所说，它就是这样。

# c# - 带有 AND 运算符的 LINQ 子查询不显示任何结果

> ID：535981
> 
> 赞同：3
> 
> 时间：2009-02-11T09:00:23.807
> 
> 标签：c#, linq, linq-to-xml

我又来了……我有一个 XML 文件，其中包含我想查询不同属性的不同类别。

```
 <item>      
            <title>Industries</title>      
            <category type="Channel">Automotive</category>      
            <category type="Type">Cars</category>      
            <category type="Token">Article</category>      
            <category type="SpecialToken">News</category>      
            <guid>637f0dd7-57a0-4001-8272-f0fba60feba1</guid>
        </item> 
```

在 SQL 中，我会写类似的东西。

```
select * from articles where channel = 'Automative' AND type = 'Cars' etc. etc. 
```

我怎样才能用 linq 做到这一点？我尝试了以下查询，但它返回 null。如果我将这两个属性与“或”|| 操作员我会得到结果，但如果一个项目同时符合两个条件，则会得到所有双重结果。

```
var articleList = (from item in doc.Descendants("item")

                         from _category in item.Elements("category")
                         where _category.Value == valueCboChannel && _category.Attribute("domain").Value == "Channel"
                         && (_category.Value == valueCboSubChannel && _category.Attribute("domain").Value == "SubChannel")

                         select new
                         {

                             Title = item.Element("title").Value,
                             Guid= item.Element("guid").Value,
                             description = item.Element("description").Value,
                             link = item.Element("link").Value
                         }).ToList();

            ListView1.DataSource = articleList;
            ListView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-11T09:17:26.810

我会使用扩展方法来简化它来进行棘手的查找：

（更新 12/02/09 以排除空元素）

```
static string CategoryValue(this XElement element, string type)
{
    var category = element.Elements("category").FirstOrDefault(
        c => (string)c.Attribute("type") == type
            && !string.IsNullOrEmpty(c.Value)); // UPDATE HERE
    return category == null ? null : category.Value;
}

static void Main()
{
    XDocument doc = XDocument.Parse(xml);
    var qry = from item in doc.Descendants("item")
              where item.CategoryValue("Channel") == "Automotive"
              && item.CategoryValue("Type") == "Cars"
              select item;
    foreach (var node in qry)
    {
        Console.WriteLine(node.Element("guid").Value);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-12T15:26:19.283

感谢您的提示，我设法以某种方式使其工作，但仅在扩展方法中使用“.First”。

我现在面临的问题是如何获取 xml 文件中有 NULL 值的所有值。基本上，xml 可能如下所示。因此，如果我使用“First”，那么当然会选择第一个空的，因此不会显示。有没有办法跳过 NULL 值？

```
<item>
    <title>Industries</title>
    <category type="Channel"></category> 
    <category type="Channel">Automotive</category> 
    <category type="Type"></category>     
    <category type="Type">Cars</category>     
    <category type="Token">Article</category>       
    <category type="SpecialToken">News</category>       
    <guid>637f0dd7-57a0-4001-8272-f0fba60feba1</guid>  
</item> 
```

这里是当前的扩展方法

```
 public static string CategoryValue(this XElement item, string type)
    {
        var category = item.Descendants("category").First(c => (string)c.Attribute("type") == type);
        return category == null ? null : category.Value;

    } 
```

# timezone - 关于区分 UTC 和 GMT 的常见做法是什么？

> ID：535984
> 
> 赞同：11
> 
> 时间：2009-02-11T09:00:37.567
> 
> 标签：timezone, utc

我今天努力在维基百科上查找，终于发现了[UTC 和 GMT 之间的区别。](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)从技术上讲，似乎 GMT != UTC 因为你不知道它是 UTC 还是 UT1 被引用。然而实际上，人们可以互换使用这些术语来表示相同的时区。

不久前，我建议我们将我公司的一个应用程序的用户界面更改为显示 UTC 而不是 GMT。

为了确保我们的数据库没有计算 GMT 和 UTC 之间的潜在秒数差异，我运行了以下查询并验证它们都只是作为同一时区的别名。

```
select now() AT TIME ZONE 'GMT', now() AT TIME ZONE 'UTC';
          timezone          |          timezone          
----------------------------+----------------------------
 2009-02-11 08:46:11.643032 | 2009-02-11 08:46:11.643032
(1 row) 
```

你怎么看？那里有足够多的用户了解 UTC 吗？使用较旧但更常用的术语会更好吗？或者我应该只做一个 UTC/GMT 吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-02-11T09:02:12.913

普通人无需担心 GMT 和 UTC 之间的几秒钟差异。差异只对天文学家和时间书呆子很重要。

我见过很少有软件可以区分。大多数软件最终交替使用标签“GMT”和“UTC”。通常，它仅表示“以精确小时（或半/四分之一小时）删除本地时区偏移后的时钟时间”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-09-25T08:55:44.417

在大多数情况下，没有人会担心 GMT 和 UTC 之间的亚秒级技术差异。

但是，写下时间以 UTC 而不是 GMT 表示避免了一个混淆来源：格林威治（以及整个英国）目前是 GMT+01:00，因为夏令时 (DST)。

GMT+01:00 并不意味着在英国提前 1 小时，因为人们可能会错误地认为。由于 DST，GMT+01:00 目前是英格兰的准确时间。将其声明为 UTC+01:00 有助于避免这种混淆。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-11T09:03:42.240

就个人而言，在我想到 GMT 之前，我会先想到 UTC 一词。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-13T20:17:07.290

我在 UTC 之前想到 GMT，但我也住在 GMT (+/-0)

# apache - 在低规格 CPU 上使用哪个？

> ID：535988
> 
> 赞同：1
> 
> 时间：2009-02-11T09:01:41.730
> 
> 标签：apache, nginx, lighttpd, litespeed

我有一个专用服务器，我只是其中的用户。

处理器：AMD Sempron 3100+ 内存：1GB DDR I

我正在为网站使用 PHP。它主要用于下载内容和上传等。

我目前使用的是 apache，它占用了太多的处理器。

所以我遇到了几个比 apache 更好的东西。我需要知道哪一个适合下载/上传，nginx，lighttpd 或 litespeed？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T09:06:18.303

在我看来，它很难击败 apache，也许看看启用禁用 mod_deflate 等可能会加快你的速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T09:10:50.147

看看[lighttpd 与 apache 的基准测试](http://www.howtoforge.com/benchmark-apache2-vs-lighttpd-static-html-files)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T10:27:07.360

我在机器中使用 PHP 作为 AMD Geode LX800（500 MHz，256 MiB 的 RAM）的“低端”，使用 Debian 安装和 Debian 提供的 Apache 2、PHP5 和 PostgreSQL 软件包。一般来说，大多数事情都运行良好，但您希望处理冗长的操作（例如，避免使用 GD 扩展调整大图像的大小）并始终注意通常看起来“容易”的隐含操作成本。我的特定应用程序正在为大约 25 个并发客户端提供服务而没有性能问题，并且在我的测试中，它在多达 100 个并发客户端的情况下保持了不错的每次请求时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T19:45:28.483

您可能会发现安装[APC](http://pecl.php.net/package/APC)会有很大帮助。如果没有它或其他字节码缓存，Apache 将不得不在每次调用时重新编译 PHP 文件。虽然它不需要太多努力，但它确实以惊人的速度加起来。您会惊讶于 APC 的 64MB（1024Mb 中并不算多）对您的系统有多大帮助，这取决于您实际运行的代码量（您可能只需要 APC 的一半或四分之一）。

如果它是一个繁忙的站点，那么使用[Yslow](http://developer.yahoo.com/yslow/)对其进行优化也会有所帮助，同时将静态内容（如图像）从 Apache 服务器中移开也是如此。正是在这里，Nginx 可以对页面时间和内存使用进行小而快速的改进。我自己就使用了这种单独的图像服务器的技术，效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T09:09:59.400

您可能想尝试 Nginx 对 php-cgi 实例的反向代理请求。没有比这更斯巴达的了。但我同意 Paul 的观点，就可维护性/可配置性而言，Apache 很难被击败。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-11T09:10:02.130

我的猜测是您的性能问题与 PHP 代码有关，而不是 Apache。所以看看你是否可以优化你的 PHP 代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-11T09:10:40.383

[Zeus](http://www.zeus.com)是一款针对 *Ahem*“静态内容”行业的高性能 Web 服务器。它将以最少的资源提供圣经卷宗的文件。我相信它使用异步 I/O，并且在普通硬件上非常快。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-11T09:17:20.273

我会推荐 Apache 但只有 2.2.x

[这是一个已完成的小基准测试。](http://www.webhostingtalk.com/showthread.php?t=527963)正如你所看到的，服务于 php，Apache 2.2.2 比 lighty 更好

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-11T09:17:32.033

当然，我建议使用 lighttpd。我在不同的重负载服务器上使用它，它有很大帮助！****~~~~*