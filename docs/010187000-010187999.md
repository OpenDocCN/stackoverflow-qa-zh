# StackOverflow 问答 10187000-10187999

# c# - 将折线放在一切之上

> ID：10187002
> 
> 赞同：0
> 
> 时间：2012-04-17T07:30:19.990
> 
> 标签：c#, windows-phone-7, graph, plot, polyline

我正在开发自己的绘图库，但遇到了问题。我有以下代码将我的折线放在 windowsphone 页面上：

```
System.Windows.Deployment.Current.Dispatcher.BeginInvoke(() =>
{
    graph.AddSinglePoint(x);
    graph.Update();
    LayoutRoot.UpdateLayout();
}); 

LayoutRoot.Children.Add(graph.line); 
```

（它在开始调用中，因为我在计时器超时（毫秒）调用的 timer_tick void 内执行此操作

唯一的问题是，当我想让我的图表在表格上的位置较低时（例如 y= 300 + 实际的 Y 值）。它将我表格上的所有内容都降低了 300。我想到的是以下内容：

> 布局：页面标题
> 
> 一些填充（列表框、复选框等）
> 
> 在底部：我的图表（折线）

我该如何完成这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:39:54.073

您需要了解[Silverlight 布局系统](http://msdn.microsoft.com/en-us/library/cc645025%28VS.95%29.aspx)，屏幕上每个元素的位置由它所在的面板决定。一些面板，例如`StackPanel`，“堆叠”他们的每个孩子，这样两个项目就不能重叠。而其他人喜欢`Grid`并`Canvas`允许重叠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T07:44:09.577

如果您使用`Grid`for`LayoutRoot`您必须设置图表的行和列：

```
 Grid.SetRow(graph,2);
   Grid.SetColumn(graph,...); 
```

我个人会以不同的方式进行操作，并为我的图形使用单独的控件，例如 a `Canvas`，因此布局如下所示：

```
Layout: Page Title
Some filling (listboxes, checkboxes, etc)
At the bottom: Canvas 
```

然后将图表添加到 Canvas 而不是`LayoutRoot`. `Canvas`您可以通过依赖属性`Top`和绝对坐标将控件定位在 a 中`Left`。

# android - RequestFactory 失败，出现“UnexpectedException: No RequestContext for operation LPZEK7DlYkoG1$NQ5MjHlmuRChk="

> ID：10187003
> 
> 赞同：1
> 
> 时间：2012-04-17T07:30:24.213
> 
> 标签：android, gwt, annotations, gwt2, requestfactory

你们能帮我解释为什么我有这个例外吗？

我将 RequestFactory 代理和上下文接口提取到单独的 jar 中，因此我可以在 GWT 客户端和 Android 客户端中使用它（详细信息在**[此处](https://stackoverflow.com/questions/10185057/gwt-compiler-cant-find-sources-of-depending-module-in-intellij-idea)**）

不幸的是，RF 在第一次调用时就在服务器上引发了异常。例外是：

```
com.google.web.bindery.requestfactory.server.UnexpectedException: No RequestContext for operation LPZEK7DlYkoG1$NQ5MjHlmuRChk=
    at com.google.web.bindery.requestfactory.server.ServiceLayerDecorator.die(ServiceLayerDecorator.java:216)
    at com.google.web.bindery.requestfactory.server.ResolverServiceLayer.resolveRequestContext(ResolverServiceLayer.java:154) 
```

下面是我的工厂界面。正如你所看到的，我不得不替换`Service`注释，`ServiceName`因为我不想将所有带有 Guice 注入的自定义定位器编译为将在移动设备上运行的 jar。

```
public interface AdminRequestFactory extends RequestFactory
{
    // @Service(value = UserServiceDao.class, locator = InjectingServiceLocator.class)
    @ServiceName(value = "com.blah.courierApp.server.dao.UserServiceDao", locator = "com.blah.courierApp.server.inject.InjectingServiceLocator")
    public interface GaeUserServiceContext extends RequestContext
    {
        public Request<String> createLogoutURL(String destinationURL);
        public Request<GaeUser> getCurrentUser();
    }

    // @Service(value = OrderDao.class, locator = InjectingServiceLocator.class)
    @ServiceName(value = "com.blah.courierApp.server.dao.OrderDao", locator = "com.blah.courierApp.server.inject.InjectingServiceLocator")
    public interface OrderRequestContext extends RequestContext
    {
        Request<List<OrderProxy>> listAll();
        Request<Void> delete(Long id);
        Request<Void> createOrder(OrderProxy order);
        Request<OrderProxy> findOrderById(long id);
        Request<Void> updateOrderState(long id, StateType newStateType);
    }

    GaeUserServiceContext contextUserService();
    OrderRequestContext contextOrder();
} 
```

当我编译它时，RF Annotation Tool 给出了以下警告：

```
Cannot fully validate context since domain type com.blah.courierApp.server.dao.UserServiceDao is not available.
You must run the ValidationTool as part of your server build process.
Add @SuppressWarnings("requestfactory") to dismiss. 
```

So when the exception thrown under the debugger on the server I see that instance of `com.google.web.bindery.requestfactory.vm.impl.Deobfuscator` has empty `operationData` field which is being initialized by `DeobfuscatorBuilder` class that was generated by RequestFactory annotation tool.

So... I decompiled that class and found this:

```
public final class AdminRequestFactoryDeobfuscatorBuilder extends Deobfuscator.Builder
{
  public AdminRequestFactoryDeobfuscatorBuilder()
  {
    withRawTypeToken("w1Qg$YHpDaNcHrR5HZ$23y518nA=", "com.google.web.bindery.requestfactory.shared.EntityProxy");
    withRawTypeToken("8KVVbwaaAtl6KgQNlOTsLCp9TIU=", "com.google.web.bindery.requestfactory.shared.ValueProxy");
    withRawTypeToken("FXHD5YU0TiUl3uBaepdkYaowx9k=", "com.google.web.bindery.requestfactory.shared.BaseProxy");
    withRawTypeToken("5vjE9LUy$l0uvi4kMYpS3JA1WEE=", "com.blah.shared.model.GaeUser");
    withRawTypeToken("8KVVbwaaAtl6KgQNlOTsLCp9TIU=", "com.google.web.bindery.requestfactory.shared.ValueProxy");
    withRawTypeToken("5a7OV4PSV$1xemsooKLfEQ4g5yY=", "com.blah.shared.proxies.OrderProxy");
    withRawTypeToken("neR_xIhE5oZsc0HbnkAMa8A88yw=", "com.blah.shared.proxies.OrderStateProxy");
    withRawTypeToken("t6gMQWDROJnYvqYhNURV8pd$sn4=", "com.blah.shared.proxies.OrganizationProxy");
    withRawTypeToken("1o45xgS$5bIkBKF4wlR8oMw_FSo=", "com.blah.shared.proxies.PersonProxy");
    withRawTypeToken("FXHD5YU0TiUl3uBaepdkYaowx9k=", "com.google.web.bindery.requestfactory.shared.BaseProxy");
  }
} 
```

It didn't generated tokens for factory. Therefore there are no calls to `Deobfuscator.Builder.withOperation` because of which my server can't find context when calls comes from the client.

**Questions are:**

*   Why doesn't RequestFactory Annotation Tool generate tokens for factory (operations) ?
*   How can I fix it ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:11:55.763

Well, it was pretty tricky... But debugging in RF Annotation Tool helped :)

Turns out you **have to** have domain classes that you refer to in `@ServiceName` in classpath of RF Annotation Processor. It creates chicken-and-egg problem. You have to compile `SharedClasses` module to compile main module but you have to compile domain classes from main module to compile `SharedClasses` module.

Here is what I did:

*   Disabled RF annotation processing for SharedClasses module.
*   In RF annotation processor **of main module** I explicitly specified RF factory that has to be processed using parameter `rootOverride = com.blah.shared.factories.AdminRequestFactory`

It sucks that I have hardcoded full qualified class name in project settings though.

If you guys know more elegant method please let me know.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T21:36:02.830

I too hit the same problem. Basically I have 3 GWT modules 1\. Main module and in the second module I have the requestFactory, server domain classes and the client side proxy values. I am pretty much sure that your solution is what I need to put in place. However I am confused how to specify the rootOverride in the maven build phase. Any pointers in the structure of pom.xml would be immensely helpful.

# r - RGTK2开发的精炼GUI

> ID：10187008
> 
> 赞同：1
> 
> 时间：2012-04-17T07:30:32.167
> 
> 标签：r, gtk2

我正在使用 R 和 GTK2 开发一个 GUI，并创建了一些如图所示的东西。

这是脚本：

```
library(RGtk2)

rm(list=ls())

window.master <- gtkWindow("toplevel",show=FALSE)
window.master$setDefaultSize(1024,768)
window.master$set(title="Window Name")

forms.notebook <- gtkNotebook()
forms.notebook$setTabPos("top")

form1.notebook <- gtkNotebook()
form1.notebook$setTabPos("top")

form1.boxp1.y3 <- gtkVBox(FALSE,3)

form1.framep1y1 <- gtkFrame("AAA")
form1.boxp1y1.2y <- gtkVBox(FALSE,2)
form1.boxp1y1.y1.4x <- gtkHBox(FALSE,4)
form1.boxp1y1.y1.4x$packStart(gtkLabel("BBB"),FALSE,FALSE)
form1.boxp1y1.y1.4x$packStart(gtkEntry(),TRUE,TRUE)
form1.boxp1y1.y1.4x$packStart(gtkLabel("CCC"),FALSE,FALSE)
form1.boxp1y1.y1.4x$packStart(gtkEntry(),TRUE,TRUE)
form1.boxp1y1.y2.4x <- gtkHBox(FALSE,4)
form1.boxp1y1.y2.4x$packStart(gtkLabel("DDD"),FALSE,FALSE)
form1.boxp1y1.y2.4x$packStart(gtkEntry(),TRUE,TRUE)
form1.boxp1y1.y2.4x$packStart(gtkLabel("EEE"),FALSE,FALSE)
form1.boxp1y1.y2.4x$packStart(gtkEntry(),TRUE,TRUE)
form1.boxp1y1.2y$add(form1.boxp1y1.y1.4x)
form1.boxp1y1.2y$add(form1.boxp1y1.y2.4x)
form1.framep1y1$add(form1.boxp1y1.2y)

form1.framep1y2 <- gtkFrame("FFF")
form1.boxp1y2.2y <- gtkVBox(FALSE,2)
### 1nd row ###
form1.boxp1y1.y1.6x <- gtkHBox(FALSE,6)
form1.boxp1y1.y1.6x$packStart(gtkLabel("GGG"),FALSE,FALSE)
form1.boxp1y1.y1.6x$packStart(gtkEntry(),TRUE,TRUE)
form1.boxp1y1.y1.6x$packStart(gtkLabel("HHH"),FALSE,FALSE)
form1.boxp1y1.y1.6x$packStart(gtkEntry(),FALSE,FALSE)
form1.boxp1y1.y1.6x$packStart(gtkLabel("III"),FALSE,FALSE)
form1.boxp1y1.y1.6x$packStart(gtkEntry(),FALSE,FALSE)
### 2nd row ###
form1.boxp1y1.y2.4x <- gtkHBox(FALSE,4)
form1.boxp1y1.y2.4x$packStart(gtkLabel("JJJ"),FALSE,FALSE)
form1.boxp1y1.y2.4x$packStart(gtkEntry(),TRUE,TRUE)
form1.boxp1y1.y2.4x$packStart(gtkLabel("KKK"),FALSE,FALSE)
form1.boxp1y1.y2.4x$packStart(gtkEntry(),TRUE,TRUE)
### 3nd row ###
form1.boxp1y1.y3.4x <- gtkHBox(FALSE,4)
form1.boxp1y1.y3.4x$packStart(gtkLabel("LLL"),FALSE,FALSE)
form1.boxp1y1.y3.4x$packStart(gtkEntry(),TRUE,TRUE)
form1.boxp1y1.y3.4x$packStart(gtkLabel("MMM"),FALSE,FALSE)
form1.boxp1y1.y3.4x$packStart(gtkEntry(),TRUE,TRUE)

form1.boxp1y2.2y$add(form1.boxp1y1.y1.6x)
form1.boxp1y2.2y$add(form1.boxp1y1.y2.4x)
form1.boxp1y2.2y$add(form1.boxp1y1.y3.4x)
form1.framep1y2$add(form1.boxp1y2.2y)

form1.framep1y3 <- gtkFrame("NNN")
form1.boxp1y3.2y <- gtkVBox(FALSE,2)
### 1nd row ###
form1.boxp1y3.y1.6x <- gtkHBox(FALSE,6)
form1.boxp1y3.y1.6x$packStart(gtkLabel("OOO"),FALSE,FALSE)
form1.boxp1y3.y1.6x$packStart(gtkEntry(),TRUE,TRUE)
form1.boxp1y3.y1.6x$packStart(gtkLabel("PPP"),FALSE,FALSE)
form1.boxp1y3.y1.6x$packStart(gtkEntry(),FALSE,FALSE)
form1.boxp1y3.y1.6x$packStart(gtkLabel("QQQ"),FALSE,FALSE)
form1.boxp1y3.y1.6x$packStart(gtkEntry(),FALSE,FALSE)
### 2nd row ###
form1.boxp1y3.y2.2x <- gtkHBox(FALSE,2)
form1.boxp1y3.y2.2x$packStart(gtkCheckButton("RRR"),TRUE,TRUE)
form1.boxp1y3.y2.2x$packStart(gtkCheckButton("SSS"),TRUE,TRUE)

form1.boxp1y3.2y$add(form1.boxp1y3.y1.6x)
form1.boxp1y3.2y$add(form1.boxp1y3.y2.2x)
form1.framep1y3$add(form1.boxp1y3.2y)

form1.boxp1.y3$packStart(form1.framep1y1,FALSE,FALSE)
form1.boxp1.y3$packStart(form1.framep1y2,FALSE,FALSE)
form1.boxp1.y3$packStart(form1.framep1y3,FALSE,FALSE)

form1.boxp2.ud <- gtkVBox(FALSE,2)
form1.framep2f1 <- gtkFrame("TTT")
form1.framep2f2 <- gtkFrame("UUU")
form1.boxp2.ud$add(form1.framep2f1)
form1.boxp2.ud$add(form1.framep2f2)

form1.boxp3.ud <- gtkVBox(FALSE,1)
form1.framep3f1 <- gtkFrame("VVV")
form1.boxp3.ud$add(form1.framep3f1)

form1.boxp4.ud <- gtkVBox(FALSE,1)
form1.framep4f1 <- gtkFrame("WWW")
form1.boxp4.ud$add(form1.framep4f1)

form1.boxp5.ud <- gtkVBox(FALSE,1)
form1.framep5f1 <- gtkFrame("XXX")
form1.boxp5.ud$add(form1.framep5f1)

form1.notebook$add(form1.boxp1.y3)
form1.notebook$add(form1.boxp2.ud)
form1.notebook$add(form1.boxp3.ud)
form1.notebook$add(form1.boxp4.ud)
form1.notebook$add(form1.boxp5.ud)
forms.notebook$add(form1.notebook)
window.master$add(forms.notebook)

window.master$show() 
```

我有几个问题：

1.  如何更改选项卡名称？（我不能到处使用 Page1,Page2,Page3）
2.  如何在每行/框架之间添加间隔？
3.  我想将数据框中的信息显示到`gtkEntry`字段中，我想我需要给出`gtkEntry`字段的标签，我该怎么做？

谢谢。

![在此处输入图像描述](../Images/9a6b495e9c5dbc8a4f1681c99d5034c4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:39:59.327

几个答案：

*   **如何更改选项卡名称？（我不能到处使用 Page1,Page2,Page3）：**

    而不是与选项一起`form1.notebook$add(form1.boxp1.y3)`使用。看`form1$appendPage()``tab.label``?gtkNotebookAppendPage`

*   **如何在每行/框架之间添加间隔？**

    对于这样的布局，您应该使用`gtkTable`. 因为`gtkVBox`您可以使用`setSpacing`(`?gtkBoxSetSpacing`和/或`padding`在打包时使用。

*   **我想将数据框中的信息显示到 gtkEntry 字段中，我想我需要给出 gtkEntry 字段的标签，我该怎么做？**

不知道你想在这里做什么。我猜你想 a) 命名你的`gtkEntry`对象，然后设置它们的文本。如果您将您的姓名与您的数据框协调起来，这可以很快完成。例如，使用列表存储条目（来自您的 BBB 标签）：

```
 l <- list()
 form1.boxp1y1.y1.4x$packStart(l$BBB <- gtkEntry(),TRUE,TRUE) ## BBB from your label 
```

等等

然后假设您的数据框有一个 BBB 列（以及其他列），您可以执行类似的操作

```
sapply(names(l), function(i) l[[i]]$setText(your_dataframe[1,i])) 
```

或者，如果您不喜欢这么多 [，您可以使用：

```
mapply(gtkEntrySetText(l, your_dataframe[1, names(l)]) 
```

# android - 使用 Root 权限从 /data/ 备份 mmssms.db

> ID：10187010
> 
> 赞同：0
> 
> 时间：2012-04-17T07:30:38.203
> 
> 标签：android

我正在尝试为自己编写一个 Android 应用程序，它将简单地将位于 /data/data/com.android.providers.telephony/databases/mmssms.db 的文件复制到我的 sdcard 上的某个位置，/sdcard/test/mmssms。 D b

设备已root，应用程序已被授予超级用户访问权限，但该文件从未实际复制过。目标目录确实存在，并且应用程序的 SDK 为 1.5。以下是用于执行备份的命令。

```
Runtime.getRuntime().exec("su");

Runtime.getRuntime().exec("mount -o rw,remount -t yaffs2 /data/data/com.android.providers.telephony/databases /data");

Runtime.getRuntime().exec("chmod -R 777 /data/data/com.android.providers.telephony/databases");

Runtime.getRuntime().exec("cp /data/data/com.android.providers.telephony/databases/mmssms.db /sdcard/test/mmssms.db"); 
```

Manifest xml 中使用了以下权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

我只想知道我能做些什么来复制 /data/ 目录中的那个文件和其他文件。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:07:49.847

我有完全相同的问题，我似乎无法让它在应用程序中工作。不过，关于您的代码片段的一些有用说明：

*   将这些命令作为对 Runtime.getRuntime().exec() 的单独调用运行是没有意义的，因为每次调用 exec 都会启动一个具有与您的应用程序相同权限的新子进程。运行 exec("su") 不会为以下命令（mount、chmod 等）授予 root 权限，因为它们是新进程。您需要改为执行 exec("su -c 'command'")

*   运行“mount -o rw ....”应该不是必需的，因为您只是从这个分区读取，而不是写入它。

我很想看看是否有人解决了这个问题。使用 ES 文件资源管理器（具有 root 访问权限）复制文件没有问题。我还可以通过 USB 使用来自 PC 的根 ADB shell 复制文件。我的应用程序还在 Manifest.xml 中设置了 WRITE_EXTERNAL_STORAGE 权限。

# c# - 如何为 MYSQL 存储过程设置日志记录

> ID：10187011
> 
> 赞同：1
> 
> 时间：2012-04-17T07:30:40.763
> 
> 标签：c#, mysql, asp.net-mvc-3, debugging, logging

我目前正在使用 MVC3(C#) 并调用 MYSQL 存储过程。我已经开发了很多，但没有任何日志记录设置。我想知道如何将 MYSQL 日志记录设置到特定目录。我想监视错误并调试我的存储过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:38:21.940

Check out the following article from Dr.Dobb's journal: [Debugging MySQL Stored Procedures](http://www.drdobbs.com/database/218100564)

# apache - 带有slach isuee的.htaccess

> ID：10187015
> 
> 赞同：3
> 
> 时间：2012-04-17T07:30:41.207
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我得到了这个代码：

```
 RewriteEngine On
    RewriteRule   ^!(.+)$  user.php?user=$1 [L] 
```

当我进入时效果很好

```
 'www.example.com/![username]' 
```

但是当我进入

```
 'www.exaple.com/![username]/' 
```

比我的网页想要从目录中加载所有数据、图像、css 文件、javascript 的：

```
 '/![username]/' 
```

目录我怎么能忽略我的htaccess中的最后一个slach？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:42:16.833

```
 RewriteEngine On
 RewriteRule   ^!(.+)[/]?$  user.php?user=$1 [L] 
```

应该为你做。URL 末尾的斜杠是可选的，带有`[/]?`.

**编辑：**

我知道你需要什么。您的站点正在从相对位置加载 CSS、JS、图像等；因此，如果您使用的是在 URL 中模拟文件夹的重写器，您的资源不会被探测加载。在这种情况下，您需要将错误的 URL（带有尾部斜杠）重定向到正确的 URL，而不使用尾部斜杠，如下所示：

```
 RewriteEngine On
 RewriteRule   ^!([^/]*)/$  /!$1 [R=301,L]
 RewriteRule   ^!(.+)$  user.php?user=$1 [L] 
```

...未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:35:59.780

您可以使用“rtrim”在 php 中删除末尾的 /

[http://php.net/manual/en/function.rtrim.php](http://php.net/manual/en/function.rtrim.php)

# php - 在php中使用zend框架添加自定义类型？

> ID：10187016
> 
> 赞同：0
> 
> 时间：2012-04-17T07:30:45.577
> 
> 标签：php, zend-framework

我无法使用 zend 框架添加新类型。我试过这个

```
$server = new Zend_Soap_Server('http://localhost/CycleProphet/amember/ws/index/wsdl');

$server->addComplexType('AMemberUser');

class AMemberUser
{
    public $UserId;
    public $FirstName;
    public $LastName;
} 
```

类型已添加，但为空。我使用这篇文章[http://framework.zend.com/manual/en/zend.soap.wsdl.html#zend.soap.wsdl.types.add_complex](http://framework.zend.com/manual/en/zend.soap.wsdl.html#zend.soap.wsdl.types.add_complex)，但这对我没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:44:55.400

在您发表评论后，我决定重写我的答案并使用 wsdl 为您提供一些解决方案：

```
<?php

require_once('Zend/Soap/Client.php');
require_once('Zend/Soap/Server.php');
require_once('Zend/Soap/Wsdl.php');
require_once('Zend/Soap/AutoDiscover.php');

class SoapController extends AppController 
{    
    public function zendclientAction()
    {
        $_client = new Zend_Soap_Client('http://localhost/php5_testapp/soap/zendserver?wsdl');
        $_ret = $_client->addNumbers(3, 5);

        echo('<pre>');
        var_dump($_ret);
        echo('<pre>');
        die();
    }

    public function zendserverAction()
    {
        if(isset($_GET['wsdl'])) {
            $_autod = new Zend_Soap_AutoDiscover();
            $_autod->setClass('MySoapServerClass');
            $_autod->handle();
        }
        else {
            $_server = new Zend_Soap_Server('http://localhost/php5_testapp/soap/zendserver?wsdl');
            $_server->setClass("MySoapServerClass");
            $_server->handle();
        }

        exit;
    }
}

/**
 * My Soap Server Class
 */
class MySoapServerClass {

    /**
     * This method adds two numbers
     * 
     * @param integer $a
     * @param integer $b
     * @return string
     */
    public function addNumbers($a, $b) {

        return 'Outcome is: ' . ($a + $b);
    }
} 
```

现在你可以添加任何你想要的类！但请记住 - 您的课程应该有很好的文档记录，因为 WSDL 文件是基于此生成的。

希望能帮助到你！

# php - 带有自定义 C++ 库的 PHP 扩展

> ID：10187017
> 
> 赞同：2
> 
> 时间：2012-04-17T07:30:46.627
> 
> 标签：php, c++, c, xcode

我在 C 中创建了一个 PHP 扩展，但我想在我自己的 C++ 动态库中提供我的程序的所有功能（我将在 Xcode 中编程）。

我的问题是如何在我的 php 扩展中链接（和使用）我的 c++ dynlib 中的函数（它将充当我的 c++ 库的包装器）。我需要在 config.m4 中修改什么才能链接到我的 c++ 库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:42:00.437

为您的 C++ 库编写一个 C 包装器接口，然后为此制作 PHP 扩展。

对于 C 接口，您将类声明为“结构”，即使它们是具有私有方法的 C++ 类。无论如何，您都不会公开细节，您只使用前向声明。

所有公共方法都通过带有指针的自由函数公开，您可以通过 Create 方法创建实例并使用 Destroy 方法销毁它们。

因此，您实际上是在与“C 库”进行交互，但实现是在 C++ 中。

请注意，您应该输入：

```
#ifdef __cplusplus
extern "C" {
#endif 
```

在标题的顶部（在方法之前但在包含守卫之后）和

```
#ifdef __cplusplus
}
#endif 
```

在它们的末尾（在方法之后但在包含守卫之前）

因为您必须使用 C++ 编译器实际构建包装库，因为它将通过调用库中的 C++ 函数来实现。

请注意，您可以使您的 C 包装器成为使用另一个库的新库，或者是同一库的一部分。

另一种方法是使用 PHP 包装宏，它本质上也创建了绑定，但会为您完成大部分工作。看

[http://devzone.zend.com/1435/wrapping-c-classes-in-a-php-extension/](http://devzone.zend.com/1435/wrapping-c-classes-in-a-php-extension/)

这还将向您展示如何处理该`config.m4`文件。

# java - 通过 Java 套接字进行服务器间通信

> ID：10187027
> 
> 赞同：2
> 
> 时间：2012-04-17T07:31:40.727
> 
> 标签：java, sockets

我有聊天客户端服务器应用程序，我们正在扩展它。所以我需要在两个聊天服务器之间进行服务器间通信。

> 问题是：假设有两台服务器 A 和 B。现在假设客户端 C1 与服务器 A 进行 TCP 连接，客户端 c2 与服务器 B 进行 TCP 连接。那么问题是：作为同一个应用程序，客户端 C1 和 c2 应该能够识别每个其他已登录并在线可用，但这不会发生，因为没有服务器间通信。
> 
> 可能的解决方案 1 是：使用 TCP 连接将服务器 A 和服务器 B 登录到对方。在这里，我可以通过 TCP 连接将登录 XML 消息（字符串）和 DataInputStream 转发到其他服务器。所以每次登录都会转移到另一台服务器，以便每个服务器都可以访问每个客户端，并且客户端 C1 可以看到客户端 C2 已登录（在线），反之亦然。
> 
> 解决方案 1 的问题是：假设现在客户端 C1 可以看到客户端 C2 在线可用，并且客户端 C1 向客户端 C2 发送消息。将会发生什么是服务器 A 将尝试为在服务器 B 而不是服务器 A 上建立的客户端 C2 写入 DatainputStream。这是代码将在此处中断的问题，服务器 A 将无法向客户端 C2 发送消息.

任何输入将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:10:01.337

你可以看看 IRC 服务器是如何实现这种功能的。我相信您只需要编写另一台服务器，它将您的服务器作为客户端处理并向它们发出请求，以便找到具体的用户。

[https://www.rfc-editor.org/rfc/rfc2810](https://www.rfc-editor.org/rfc/rfc2810)

# c# - 使用 Facebook C# SDK 从代码中获取 AccessToken

> ID：10187030
> 
> 赞同：1
> 
> 时间：2012-04-17T07:32:06.977
> 
> 标签：c#, facebook-c#-sdk

对于 Facebook C# SDK 5.0 版，我们在哪里使用

```
FacebookOAuthClient result = new FacebookOAuthClient();
dynamic tokenResult = oAuthClient.ExchangeCodeForAccessToken(code); 
```

我已将我的 Facebook C# SDK 升级到 6.0 版，现在没有`FacebookOAuthClient`.
它只是`FacebookClient`现在。

OAUth 跳舞的新功能是`access_token`什么`code`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:39:19.953

FacebookOAuthClient 在 v6 中被移除。[您可以在http://csharpsdk.org/docs/faq.html](http://csharpsdk.org/docs/faq.html)找到 v6的替代方法。

```
var fb = new FacebookClient();
dynamic result = fb.GetAsync("oauth/access_token", new {
    client_id     = "app_id",
    client_secret = "app_secret",
    redirect_uri  = "http://yoururl.com/callback",
    code          = "code"      
}); 
```

# cakephp - 如何在 cakephp 中为大写表命名控制器文件

> ID：10187042
> 
> 赞同：2
> 
> 时间：2012-04-17T07:33:22.543
> 
> 标签：cakephp, uppercase

惠。我想为以大写和缩写命名的表制作控制器和模型。

例如，表名是 PS_DEPT_TBL

1) 控制器文件名是什么？是 PSDEPTTBL_controller.php 吗？下面的代码似乎不适用于控制器。

```
class PSDEPTTBLController extends AppController {

    var $uses = 'PS_DEPT_TBL';
    var $scaffold ;

} 
```

2) 我将模型文件命名为 PSDEPTTBL.php 并将其编码如下。

```
class PSDEPTTBL extends AppModel {

    var $useTable = 'PS_DEPT_TBL';

} 
```

但是错误表明该表没有任何控制器。我是 cakephp 的新手。帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:12:38.653

你的控制器**不需要**和你的表一样被调用。您的模型也是如此。

这个怎么样：

```
// ThingsController.php
class ThingsController extends AppController
{
    var $uses = array('Thing');
}

// Thing.php
class Thing extends AppModel
{
    var $useTable = 'PS_DEPT_TBL';
}

// Config/routes.php
Router::connect(
    '/PSDEPTTBL/:action/*', array('controller' => 'things')
); 
```

这里的关键思想是使您的代码可读。如果您有一个遗留数据库，您可以为自己做的最好的事情就是将其全部隐藏在所有模型中。

# python - 将 TIMIT 数据库中的 Nist Wav 文件读入 python numpy 数组

> ID：10187043
> 
> 赞同：1
> 
> 时间：2012-04-17T07:33:23.817
> 
> 标签：python, numpy, scipy, speech-recognition

这可能吗？？使用来自 scikits.audiolab 的 wavread 时，我似乎遇到了这个错误：

```
x86_64.egg/scikits/audiolab/pysndfile/matapi.pyc in basic_reader(filename, last, first)
     93             if not hdl.format.file_format == filetype:
     94                 raise ValueError, "%s is not a %s file (is %s)" \
---> 95                       % (filename, filetype, hdl.format.file_format)
     96 
     97             fs = hdl.samplerate

ValueError: si762.wav is not a wav file (is nist) 
```

我猜它无法读取 NIST wav 文件，但有没有另一种方法可以轻松地将它们读入 numpy 数组？如果不是，那么读取数据的最佳方法是什么？

可能重写 audiolab wavread 以识别 nist 标头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T07:58:33.437

回答我自己的问题，因为想通了，但是您可以使用 scikits.audiolab 中的 Sndfile 类，它支持多种读写文件格式，具体取决于您拥有的 libsndfile。然后你只需使用：

```
from scikits.audiolab import Sndfile, play
f = Sndfile(filename, 'r')
data = f.read_frames(10000)
play(data) # Just to test the read data 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-03T20:19:07.190

为了扩展 J Spen 的答案，在使用[scikits.audiolab](https://scikits.appspot.com/audiolab)时，如果您想读取整个文件，而不仅仅是指定数量的帧，您可以使用类的`nframes`参数`Sndfile`来读取整个内容。例如：

```
from scikits.audiolab import Sndfile, play
f = Sndfile(filename, 'r')
data = f.read_frames(f.nframes)
play(data) # Just to test the read data 
```

我在文档中找不到对此的任何引用，但它在源代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-10T07:30:14.123

与上述答案相比，还有另一种读取多种格式音频文件的替代方法，例如 .wav、.aif、.mp3 等。

```
import matplotlib.pyplot as plt
import soundfile as sf
import sounddevice as sd
# https://freewavesamples.com/files/Alesis-Sanctuary-QCard-Crotales-C6.wav
data, fs = sf.read('Alesis-Sanctuary-QCard-Crotales-C6.wav')
print(data.shape,fs)
sd.play(data, fs, blocking=True)
plt.plot(data)
plt.show() 
```

输出：

```
(88116, 2) 44100 
```

[![在此处输入图像描述](../Images/ac6d2c41a1f8c7d20a31c75b0240946e.png)](https://i.stack.imgur.com/HeeXu.png)

# c# - 如何获取 System.Drawing.Graphics 对象绘制的图像？

> ID：10187047
> 
> 赞同：3
> 
> 时间：2012-04-17T07:33:35.223
> 
> 标签：c#, graphics, system.drawing

请参阅以下方法：

```
void Paint(System.Drawing.Graphics g)
{
//How can I start record what 'g' will draw to an image object?
g.DrawLine(0,0,50,50);
g.DrawImage(...);
..
..
etc.

} 
```

现在我怎样才能得到关于“g”画了什么的图像？
谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:40:10.220

你可以试试...

```
using (Graphics g=Graphics.FromImage(inImage)) 
{ 
  g.Clear(Color.White); 
  g.DrawLine(0,0,50,50); 
} 
```

然后，这将在图像上绘制线条。只要确保图像足够大...

您还可以通过覆盖 OnPaint 事件并从 eventArgs 获取图形对象来直接绘制到表单上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T07:54:55.343

你可以做这个

```
Bitmap bmp;
...
{
 InitializeComponent();
 bmp = new Bitmap(this.Width,this.Height,Graphics.FromHwnd(this.Handle));
}

void Paint(object sender, System.Windows.Forms.PaintEventArgs e)
{
  Graphics g = Graphics.FromImage(bmp);
  g.DrawLine(0,0,50,50);
  ..
  .. 
  e.Graphics.DrawImage(bmp,0,0);
} 
```

# java - 基于 JPA 注释生成 ERD（实体关系图）的工具

> ID：10187048
> 
> 赞同：16
> 
> 时间：2012-04-17T07:33:39.133
> 
> 标签：java, orm, erd

我正在使用 ormlite 编写 java 代码。我想知道是否可以从我的代码中的 JPA 注释生成 ERD。基本上，我需要反过来：[如何将基于实体的图转换为 JPA java 代码](https://stackoverflow.com/questions/8202231/how-can-i-transform-entity-based-diagram-to-a-jpa-java-code)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-31T22:41:12.947

IntelliJ IDEA (Ultimate) 为 ER-Diagram 生成器提供 JPA。

![上下文菜单](../Images/5e6c707fabc2af1df37df1d9509de3d0.png)

在 Persistence 工具窗口中，选择适当的节点。然后使用上下文菜单选择“ER 图”。

![示例 ER 图](../Images/d7eb1cd6cc1c35fb532ad934cdac96f3.png)

请注意，JPA 方面必须链接到模块，并且 UML 插件应该处于活动状态。

# asp.net - 更改 WCF System.ServiceModel.ClientBase 的 Endpoint.Binding 不起作用

> ID：10187052
> 
> 赞同：2
> 
> 时间：2012-04-17T07:34:12.877
> 
> 标签：asp.net, wcf, endpoint

我正在使用以编程方式配置的 WCF 客户端 (System.ServiceModel.ClientBase)。此 WCF 客户端使用 CustomBinding 进行配置，默认情况下它具有 TextMessageEncodingBindingElement。

现在，当我尝试切换到 Mtom 编码时，我更改了客户端的 Endpoint.Binding 属性，它工作正常。Endpoint.Binding 属性显示它已更改。

不幸的是，当我执行 WCF 服务公开的一种方法时，它仍然使用 TextMessageEncoding，我不知道为什么。

我已经让它工作了，通过构造一个新的 ClientBase 并在构造函数中传递新的 EndPointBinding ：

```
socialProxy = new SocialProxyClient(SocialProxyClientSettings.SocialProxyMTomEndPointBinding, new EndpointAddress(SocialProxyClientSettings.SocialProxyEndPointAddress)); 
```

但是当我尝试这个时它不起作用：

```
socialProxy.Endpoint.Binding = SocialProxyClientSettings.SocialProxyMTomEndPointBinding; 
```

这些是我对 EndPointBindings 的定义：

```
public static TextMessageEncodingBindingElement TextMessageEncodingBindingElement
{
    get
    {
        if (_textMessageEncodingBindingElement == null)
        {
            _textMessageEncodingBindingElement = new TextMessageEncodingBindingElement() { MessageVersion = MessageVersion.Soap11 };
            _textMessageEncodingBindingElement.ReaderQuotas = new System.Xml.XmlDictionaryReaderQuotas()
            {
                MaxDepth = 32,
                MaxStringContentLength = 5242880,
                MaxArrayLength = 204800000,
                MaxBytesPerRead = 5242880,
                MaxNameTableCharCount = 5242880
            };
        }
        return _textMessageEncodingBindingElement;
    }
}

public static MtomMessageEncodingBindingElement MtomMessageEncodingBindingElement
{
    get
    {
        if (_mtomMessageEncodingBindingElement == null)
        {
            _mtomMessageEncodingBindingElement = new MtomMessageEncodingBindingElement();
            _mtomMessageEncodingBindingElement.MaxReadPoolSize = TextMessageEncodingBindingElement.MaxReadPoolSize;
            _mtomMessageEncodingBindingElement.MaxWritePoolSize = TextMessageEncodingBindingElement.MaxWritePoolSize;
            _mtomMessageEncodingBindingElement.MessageVersion = TextMessageEncodingBindingElement.MessageVersion;
            _mtomMessageEncodingBindingElement.ReaderQuotas.MaxDepth = TextMessageEncodingBindingElement.ReaderQuotas.MaxDepth;
            _mtomMessageEncodingBindingElement.ReaderQuotas.MaxStringContentLength = TextMessageEncodingBindingElement.ReaderQuotas.MaxStringContentLength;
            _mtomMessageEncodingBindingElement.ReaderQuotas.MaxArrayLength = TextMessageEncodingBindingElement.ReaderQuotas.MaxArrayLength;
            _mtomMessageEncodingBindingElement.ReaderQuotas.MaxBytesPerRead = TextMessageEncodingBindingElement.ReaderQuotas.MaxBytesPerRead;
            _mtomMessageEncodingBindingElement.ReaderQuotas.MaxNameTableCharCount = TextMessageEncodingBindingElement.ReaderQuotas.MaxNameTableCharCount;
        }
        return _mtomMessageEncodingBindingElement;
    }
} 
```

有人可以解释为什么以编程方式更改 Endpoint.Binding 不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:08:20.563

我相信在ClientBase的构建过程中，原来的Binding是用来创建一些辅助对象的。稍后更改绑定不会更改这些辅助对象。

要在构建后进行任何调整，您可能需要自定义绑定行为，您可以根据需要调整绑定的内部。在构造中使用它，以便为您以后的更改准备所有帮助对象。像往常一样，您只需要一种简单的行为改变，但您还需要编写辅助帮助类来支持您的一种行为改变。

有关CustomBinding 问题的讨论，请参阅 SO 线程：[使用 Visual Studio 2010 的 .NET 4.0 中的 ONVIF 身份验证。](https://stackoverflow.com/questions/5638247/onvif-authentication-in-net-4-0-with-visual-studios-2010)

请参阅博客文章：[在 WCF 客户端代理中支持 WS-I 基本配置文件密码摘要](http://benpowell.org/supporting-the-ws-i-basic-profile-password-digest-in-a-wcf-client-proxy/) 有关可让您动态更改用户名令牌的自定义行为的示例。

也许可以做类似的事情来让您动态控制本地端点绑定。

**更新：** 在 StackOverflow 中阅读更多内容，以及它链接到的页面，我相信我已经找到了您正在寻找的答案。

对于 PasswordDigestBehavior：请参阅：[带有 Visual Studios 2010 的 .NET 4.0 中的 ONVIF 身份验证](https://stackoverflow.com/questions/5638247/onvif-authentication-in-net-4-0-with-visual-studios-2010) 和：[http ://benpowell.org/supporting-the-ws-i-basic-profile-password-digest-in-a-wcf-client-proxy /](http://benpowell.org/supporting-the-ws-i-basic-profile-password-digest-in-a-wcf-client-proxy/)

对于本地 NIC 绑定：请参阅：[指定要与 WCF 客户端一起使用的传出 IP 地址](https://stackoverflow.com/questions/3249846/specify-the-outgoing-ip-address-to-use-with-wcf-client)

```
// ASSUMPTIONS:
//  1: DeviceClient is generated by svcutil from your WSDL.
//  1.1: DeviceClient is derived from
//           System.ServiceModel.ClientBase<Your.Wsdl.Device>
//  2: serviceAddress is the Uri provided for your service.
//
private static DeviceClient CreateDeviceClient(IPAddress nicAddress,
                                               Uri serviceAddress,
                                               String username,
                                               String password)
{
    if (null == serviceAddress)
        throw new ArgumentNullException("serviceAddress");

    //////////////////////////////////////////////////////////////////////////////
    // I didn't know how to put a variable set of credentials into a static
    //  app.config file.
    // But I found this article that talks about how to set up the right kind
    //  of binding on the fly.
    // I also found the implementation of PasswordDigestBehavior to get it all to work.
    //
    // from: https://stackoverflow.com/questions/5638247/onvif-authentication-in-net-4-0-with-visual-studios-2010
    // see: http://benpowell.org/supporting-the-ws-i-basic-profile-password-digest-in-a-wcf-client-proxy/
    //
    EndpointAddress serviceEndpointAddress = new EndpointAddress(serviceAddress);
    HttpTransportBindingElement httpBinding = new HttpTransportBindingElement();
    if (!String.IsNullOrEmpty(username))
    {
        httpBinding.AuthenticationScheme = AuthenticationSchemes.Digest;
    }
    else
    {
        httpBinding.AuthenticationScheme = AuthenticationSchemes.Anonymous;
    }
    var messageElement = new TextMessageEncodingBindingElement();
    messageElement.MessageVersion =
       MessageVersion.CreateVersion(EnvelopeVersion.Soap12, AddressingVersion.None);

    CustomBinding bind = new CustomBinding(messageElement, httpBinding);

    ////////////////////////////////////////////////////////////////////////////////
    // from: https://stackoverflow.com/questions/3249846/specify-the-outgoing-ip-address-to-use-with-wcf-client
    //  Adjust the serviceEndpointAddress to bind to the local NIC, if at all possible.
    //
    ServicePoint sPoint = ServicePointManager.FindServicePoint(serviceAddress);
    sPoint.BindIPEndPointDelegate = delegate(
            System.Net.ServicePoint servicePoint,
            System.Net.IPEndPoint remoteEndPoint,
            int retryCount)
    {
        // if we know our NIC local address, use it
        //
        if ((null != nicAddress)
            && (nicAddress.AddressFamily == remoteEndPoint.AddressFamily))
        {
            return new System.Net.IPEndPoint(nicAddress, 0);
        }
        else if (System.Net.Sockets.AddressFamily.InterNetworkV6 == remoteEndPoint.AddressFamily)
        {
            return new System.Net.IPEndPoint(System.Net.IPAddress.IPv6Any, 0);
        }
        else // if (System.Net.Sockets.AddressFamily.InterNetwork == remoteEndPoint.AddressFamily)
        {
            return new System.Net.IPEndPoint(System.Net.IPAddress.Any, 0);
        }
    };
    /////////////////////////////////////////////////////////////////////////////

    DeviceClient client = new DeviceClient(bind, serviceEndpointAddress);

    // Add our custom behavior
    //  - this requires the Microsoft WSE 3.0 SDK file: Microsoft.Web.Services3.dll
    //
    PasswordDigestBehavior behavior = new PasswordDigestBehavior(username, password);
    client.Endpoint.Behaviors.Add(behavior);

    return client;
} 
```

# mongodb - 如何在 MongoTemplate 中使用非操作员

> ID：10187057
> 
> 赞同：1
> 
> 时间：2012-04-17T07:34:34.553
> 
> 标签：mongodb

我被这个问题困扰了很久。有一个包含 phone_num 列的集合，除了列值不是 12563254154 之外，我如何查询文档

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:52:02.167

使用 $ne 运算符 [http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24ne](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24ne) 例如

db.things.find( { phone_num : { $ne : 12563254154 } } );

# sql - 如何在分页中删除重复项

> ID：10187066
> 
> 赞同：0
> 
> 时间：2012-04-17T07:35:20.710
> 
> 标签：sql, sql-server, sql-server-2005

表 1 和表 2：

[表 1 和表 2 http://aftabfarda.parsfile.com/1.png](http://aftabfarda.parsfile.com/1.png)

```
SELECT     *
FROM         (SELECT DISTINCT dbo.tb1.ID, dbo.tb1.name, ROW_NUMBER() OVER (ORDER BY tb1.id DESC) AS row
FROM         dbo.tb1 INNER JOIN
                      dbo.tb2 ON dbo.tb1.ID = dbo.tb2.id_tb1) AS a
WHERE     row BETWEEN 1 AND 7
ORDER BY id DESC 
```

结果：

[结果... http://aftabfarda.parsfile.com/3.png](http://aftabfarda.parsfile.com/3.png)

（id 11 重复 3 次）

我怎样才能有这个输出：

```
ID  name    row
--  ------  ---
11  user11  1
10  user10  2
9   user9   3
8   user8   4
7   user7   5
6   user6   6
5   user5   7 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:44:49.317

您可以在使用子查询`distinct`之前申请：`row_number`

```
select  *
from    (
        select  row_number() over (order by tbl.id desc) as row
        ,       *
        from    (
                select  distinct t1.ID
                ,       tb1.name
                from    dbo.tb1 as t1
                join    dbo.tb2 as t2
                on      t1.ID = t2.id_tb1
                ) as sub_dist
        ) as sub_with_rn
where   row between 1 and 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:17:26.083

[作为@Andomar 建议的](https://stackoverflow.com/questions/10187066/how-do-i-remove-duplicates-in-paging/10187173#10187173)替代方案，您可以先使用`DENSE_RANK`而不是对`ROW_NUMBER`行进行排名（在子查询中），*然后再*应用`DISTINCT`（在外部查询中）：

```
SELECT DISTINCT
  ID,
  name,
  row
FROM (
  SELECT
    t1.ID,
    t1.name,
    DENSE_RANK() OVER (ORDER BY t1.ID DESC) AS row
  FROM dbo.tb1 t1
    INNER JOIN dbo.tb2 t2 ON t1.ID = t2.id_tb1
) AS a
WHERE row BETWEEN 1 AND 7
ORDER BY ID DESC 
```

相似，但不完全相同，尽管两者都可能归结为相同的查询计划，但我不确定。我认为值得测试。

而且，当然，您也可以尝试使用*半*连接而不是正确连接，以 any`IN`或的形式`EXISTS`，首先防止重复：

```
SELECT
  ID,
  name,
  row
FROM (
  SELECT
    ID,
    name,
    ROW_NUMBER() OVER (ORDER BY ID DESC) AS row
  FROM dbo.tb1
  WHERE ID IN (SELECT id_tb1 FROM dbo.tb2)
  /* Or:
  WHERE EXISTS (
    SELECT *
    FROM dbo.tb2
    WHERE id_tb1 = dbo.tb1.ID
  )
  */
) AS a
WHERE row BETWEEN 1 AND 7
ORDER BY ID DESC 
```

# android - Android 包括布局文件（参考 id）

> ID：10187069
> 
> 赞同：1
> 
> 时间：2012-04-17T07:35:30.170
> 
> 标签：android, android-layout

我正在尝试将现有布局包含在另一个布局文件 (xml) 中。要定位这些布局，我需要为包含的布局提供一个 id，以便我能够引用它，例如

我正在使用以下布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/bar"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
        ...
</RelativeLayout> 
```

我将此布局包含在另一个布局中，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/container"
    android:background="@drawable/bg"
    >
    <include android:id="@id/bar" layout="@layout/bar"/>  

    <ScrollView 
        android:id="@+id/scrollView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/bar"
        >
        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
        android:gravity="center">
       ...
      </LinearLayout>
   </ScrollView>
</RelativeLayout> 
```

这工作正常，我的 ScrollView 位于我的栏下方，我可以单击栏，而单击事件不会被 ScrollView 拦截。

当我尝试在不同的布局文件中执行相同操作时，它说它找不到资源@id/bar：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/layoutContainer2"
    >

    <include android:id="@id/bar" layout="@layout/bar"/>

    <ScrollView 
        android:id="@+id/scrollview2"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:layout_below="@id/bar"
        >
        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:gravity="center">
        ...
</LinearLayout>
</ScrollView>
</RelativeLayout> 
```

有人知道这是为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:39:43.763

更改`android:id="@id/bar"`为`android:id="@+id/someId"`

# javascript - iframe 和绝对定位元素

> ID：10187070
> 
> 赞同：1
> 
> 时间：2012-04-17T07:35:38.323
> 
> 标签：javascript, iframe, position, absolute

我对 iframe 内的绝对定位元素有一个小问题。

所以我有一个页面，在页面上我有一个带有小游戏的 iframe。游戏中有一个人，这个人有绝对定位的瞳孔。学生们正在用javascript移动。一切正常，但如果我打开该页面，然后继续浏览不同选项卡中的其他页面，我回来后学生会在其他地方而不是以前（完全是眼睛。）

有更多的元素绝对定位在该 iframe 中，并且没有一个有相同的问题，我猜这是因为 Javascript 动画。有人遇到过类似的问题吗？很抱歉，但由于很多原因，我无法在此处发布该页面。

我可以为学生动画发布脚本：

```
function eyes_sides(){
    $('.eyes').animate({
            left:parseInt($('.eyes').css('left'))-9
        },{duration:1500});
    $('.eyes').animate({
            left:parseInt($('.eyes').css('left'))
        },{duration:1000});
}

function eyes_roll(){
    $('.eyes').animate({
        left:parseInt($('.eyes').css('left'))-7,
        top:parseInt($('.eyes').css('top'))-18
      },{duration:1800});
    $('.eyes').animate({
        left:parseInt($('.eyes').css('left')),
        top:parseInt($('.eyes').css('top'))
      },{duration:1300});
    }

function animate_eyes(){
      var animation = random_number(1,2);
      //alert(animation);
      switch(animation){
        case 1:
          eyes_roll();
          break;
        case 2: 
          eyes_sides();
          break;  
      }
      var delay = random_number(4000,12000);          
      window.animateEyes = setTimeout(function(){animate_eyes()},delay);
    } 
```

该脚本并不完美，但可以满足要求。

我在想是什么可能导致问题，也许在标签不活动时与该动画运行的某种程度上连接？也许添加“onBlur”和“onFocus”来停止/开始动画会有所帮助？

谢谢你的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:13:30.460

此代码应该停止动画。至少它会触发`onblur`你的`IFRAME`. 你会很容易弄清楚如何重新开始动画。

我不熟悉 jQuery，但您可以“翻译”代码。

```
window.onload=function (){
    var ifr=document.getElementById('your_iframe');
    (function (x){x.onblur=function (){clearTimeout(x.contentWindow.animatedEyes);return;}}(ifr));
    return; 
} 
```

# jquery - 扩展似乎在 jquery 插件中不起作用

> ID：10187071
> 
> 赞同：1
> 
> 时间：2012-04-17T07:35:42.730
> 
> 标签：jquery

我正在创建一个基本的 jquery 插件，但扩展似乎不起作用..

我以以下方式调用插件

```
 $('#ccontainer').slide("/json/service.json",6000,700,'true','true','right','800px'); 
```

## 插入

```
(function($) {

$.fn.slide = function(settings) {

    var options = {
        service : '',
        slideAnimationTime : 5000,
        slideSpeed : 800,
        onHoverPause : 'true',
        autoSlide : 'true',
        direction : 'right',
        width : ''
    };

    $.extend(options , settings);
    console.log(options.slideSpeed); //doesn't show up new settings as 700 in above case but instead shows old value 800 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:38:54.710

我认为您需要显式传入一个对象，例如：

```
$('#container').slide({
   service: "/json/service.json",
   slideAnimationTime: 6000,
   slideSpeed: 700,
   ... // the rest of properties
}); 
```

# python - 如何在 Windows 上并排安装 Python 2.7.3 32 位和 64 位

> ID：10187072
> 
> 赞同：32
> 
> 时间：2012-04-17T07:35:43.520
> 
> 标签：python, win64

我有 Windows Vista 64。

我有一些需要 Python 2.7.3 64 位的项目和其他需要 Python 2.7.3 32 位的项目（因为某些扩展在 64 位中不起作用）。

如何防止 Python 2.7.3 MSI 安装程序（32 或 64 机器人）删除其他版本。

使用 Python 2.7.2 并肩为我工作没有问题。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-16T16:02:32.700

这似乎在 Windows 7 64 位上对我有用。选择一个版本作为您的默认安装，例如 64 位，然后先安装它。在做任何其他事情之前安装其他版本。

指定不同的安装目录并在`Customize Python 2.7.3`屏幕中选择`Register Extensions`并选择`Entire feature will be unavailable`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T07:53:21.950

您通常可以并排安装多个 Python 版本。在 Windows 中安装时，除了文件安装之外，还会更新注册表，以便任何后续的包/工具安装都可以枚举当前 m/c 中的所有 Python 安装。 ~~如果安装是针对相同版本但不同位数的，只会出现问题。因为注册表路径**SOFTWARE\Python\Pythoncore\**不区分位数和错误修复，如果您安装具有不同错误修复或不同位数的相同版本 ，您最终会覆盖**InstallPath**和**PythonPath 。**~~

解决方案

~~*   为不同的位数安装两个不同的版本。~~
*   ~~每次要在位数之间切换时，准备一个脚本来更新注册表项。我碰巧在[effbot](http://effbot.org/zone/python-register.htm)中偶然发现了一个简单的类似脚本来完成这项工作。~~

**更新**

正如 Ruediger Jungbeck 指出他可以看到两个不同的注册表项，我突然想起了 Vista 之后的一个重要变化。在 64 位系统上，为了能够从 32 位和 64 位应用程序访问注册表项，Windows 在重要节点处拆分注册表。对于 64 位应用程序，它是本机注册表路径，但对于 32 位应用程序，它是 WoW6432Node。因此，当运行 Python\Tools\extension 的 32 位版本时，它只会看到 Wow6432Node。64 位应用程序将只能看到本机节点。有 API 可以访问跨位节点，但这超出了这个问题的范围。总而言之，Windows 通过拆分节点来智能地处理 32 位和 64 位应用程序，这将允许 32 位扩展透明地访问 32 位 Python 安装。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-06T05:32:26.270

在安装第二个 python 时，对于注册扩展选择“整个功能将不可用”选项。Python 64 安装路径将在注册表中“HKLM:SOFTWARE\Python\PythonCore\2.7\InstallPath”

Python 64 位 PythonPath 将位于“HKLM:SOFTWARE\Python\PythonCore\2.7\PythonPath”

Python 32 安装路径将在注册表中“HKLM:SOFTWARE\Wow6432Node\Python\PythonCore\2.7\InstallPath”

Python 32 位 PythonPath 将位于“HKLM:SOFTWARE\Wow6432Node\Python\PythonCore\2.7\PythonPath”

![使用禁用扩展自定义 Python](../Images/305b9e4525a799ca9f0654c9128e4afd.png)

# c# - WPF 绑定到具有可观察集合的自定义类

> ID：10187074
> 
> 赞同：-6
> 
> 时间：2012-04-17T07:35:45.233
> 
> 标签：c#, wpf, data-binding, observablecollection

我正在寻找一些关于使用 ObervableCollection 绑定到自定义类的一般 WPF/C# 信息。我目前有一个与“BindingExpression 路径错误”有关的错误...“找不到属性”。任何指针都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:07:56.190

听起来您还没有分配 DataContext。下面是一个简短的例子。

假设您的自定义类看起来像这样：

**代码：**

```
public class Foo
    {
         private ObservableCollection<string> _names;
         public ObservableCollection<string> Names 
         { 
             get{ return _names;} 
             set
             { 
                  _names = value;

             } 
         }
    } 
```

你的 XAML 看起来像

**XAML：**

```
<ListBox Name="lstNames" ItemsSource="{Binding Names}"/> 
```

在后面的代码中设置您的 DataContext。

```
lstNames.DataContext = new Foo(); 
```

这是一个非常简单的版本，可以满足您的需求。你真的应该看看[Binding to Collections](http://msdn.microsoft.com/en-us/library/ms752347.aspx#binding_to_collections)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:47:52.437

有两个原因，可能会出现。首先 - 您在 xaml 上输入了错误的属性名称。第二 - 你忘了设置`DataContext`你的`View`.

# visual-studio-2010 - Team Foundation Server：构建到固定位置

> ID：10187076
> 
> 赞同：0
> 
> 时间：2012-04-17T07:35:50.637
> 
> 标签：visual-studio-2010, tfs, tfsbuild

是否可以使用 Team Foundation Build Services 将构建定义的最新构建放入固定的 UNC 文件路径。

通常，构建定义会在路径中添加一些变量，例如日期或构建编号，以使其唯一。我试图在我的定义中删除它们以获得固定路径，但构建失败并出现目标已存在于服务器上的错误。

为什么我要构建到固定位置：我想这样做，以便测试我的应用程序的团队对最新构建有一个固定位置，并且可以例如在其上放置一个快捷方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:40:04.743

最佳做法是将固定放置位置作为根文件夹，并将内部版本号添加到路径中。这将帮助您区分从构建定义执行的不同构建版本。如果您有固定的位置，那么如果您想获取以前执行的构建二进制文件以防最新构建中断，您会怎么做？

如果您仍然想使用固定位置，那么您可以修改构建过程模板以在构建过程中删除固定文件夹，这样您就不会得到目的地已经存在的错误。

# php - getLoginUrl 随机不工作

> ID：10187079
> 
> 赞同：3
> 
> 时间：2012-04-17T07:36:08.173
> 
> 标签：php, facebook, login, facebook-php-sdk

我有一个 Facebook 应用程序，我在其中使用 PHP SDK 授权用户。它大部分时间都有效，但有时它不起作用，我不明白为什么。

我正在使用下面的代码。首先，我检查我是否有用户以及是否有有效的令牌（通过请求“/me”）。如果是这样，我退出并显示应用程序。如果没有，我会生成一个链接`getLoginUrl()`并显示它。

当它不起作用时，脚本会继续显示此链接。没有错误消息，没有信息为什么它不工作。

我尝试打印`$_GET`变量，我看到 Facebook 将两个查询参数附加到我的 URL：“状态”和“代码”。有人知道它们是什么吗？

还有任何想法为什么下面的脚本不起作用？有什么我可以检查以确保它始终有效吗？

```
$fb_ = new Facebook(array(
    'appId'  => 'appid',
    'secret' => 'secret',
)); 

$userId = $fb_->getUser();
$errorMessage = null;

if ($userId) {
    try {
        $user_ = $fb_->api('/me');
        if (isset($user_['error_code'])) {
            $errorMessage = isset($user_['error_msg']) ? self::$user_['error_msg'] : 'An unknown error occurred';
            $errorMessage .= ' (' . $user_['error_code'] . ')';
            $user_ = null;
        }
    } catch (FacebookApiException $e) {
        $errorMessage = $e->getMessage();
        $user_ = null;
    }
}

if ($user_) return;

$loginUrl = $fb_->getLoginUrl(array(
    'scope' => 'publish_stream,publish_actions'
));

echo '<!doctype html>';
echo '<html xmlns:fb="http://www.facebook.com/2008/fbml">';
echo '<head>';
echo '<title>' . t('Login to Facebook application') . '</title>';
echo '</head>';
echo '<body>';
if ($errorMessage) echo t('Error: %1', $errorMessage) . '<br/>';
echo t('Please login with Facebook first: %1', '<a href="' . $loginUrl . '">' . t('Login with Facebook') . '</a>');
echo '</body>';
echo '</html>';
die(); 
```

**编辑：**

根据要求，这是 oauth 请求：

```
Request URL:https://www.facebook.com/dialog/oauth?client_id=142896759165492&redirect_uri=http%3A%2F%2Fmxcclient.emarkethink.net%2Flogin&state=ebe253fa859a96e76332935901c32c&scope=publish_stream%2Cpublish_actions
Request Method:GET
Status Code:302 Found 
```

我从 Facebook 得到的回应是：

```
Cache-Control:private, no-cache, no-store, must-revalidate
Content-Length:0
Content-Type:text/html; charset=utf-8
Date:Tue, 17 Apr 2012 07:47:38 GMT
Expires:Sat, 01 Jan 2000 00:00:00 GMT
Location:http://mxcclient.emarkethink.net/login?state=ebe2785a859a96e76332935901c32c&code=AQAN-0ZXg_apegtybid642HOXbU2n5MNl8fYWcPGXiCoFyG7ogJpr53aKBaQKNKz-2wTtPQLpbJd8jAA1fkyw4Kw40Ssylc0b3kFrhnexGJgID8JX-pJEQvKC6wLYL93lQzrA6qFRnS2R6pd0dq-xGLy3YQ-6INC0vQyN_Qhi00M3oAo95b2IeBg4_11E#_=_
P3P:CP="Facebook does not have a P3P policy. Learn why here: http://fb.me/p3p"
Pragma:no-cache
Set-Cookie:locale=en_US; expires=Tue, 24-Apr-2012 07:47:38 GMT; path=/; domain=.facebook.com
X-Cnection:close
X-Content-Type-Options:nosniff
X-FB-Debug:Wnqw6loUBt4vRR21t7Btve/FPWWrfeoXDxhgiHA=
X-XSS-Protection:0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:46:30.007

好的，终于发现了问题所在：

*   它在 Internet Explorer 上不起作用，因为应用程序在 iframe 中运行并且没有设置 P3 策略。

*   它在 Google Chrome 上不起作用，因为第三方 cookie 被阻止（在 iframe 中运行的应用程序被视为“第三方”）。

因此，在这两种情况下，登录都是成功的，但无法保存授权令牌，这意味着以下请求失败。

# css - 文档类型和部分

> ID：10187081
> 
> 赞同：2
> 
> 时间：2012-04-17T07:36:26.077
> 
> 标签：css, html, layout, doctype

我遇到了这个，我不确定它为什么会发生......

以下面的 html 为例，它会按照 CSS 的指示显示部分的灰色区域。但是，当我`<!Doctype html>`在第一行中包含它时，它就崩溃了。此外，下面的代码在 IE9 中根本不起作用。为什么？提前谢谢了。

```
<html>
<head>

<style type="text/css">
.sec_class{
        width:50%;
        height:15%;
        border:1px black solid;
        padding:0px;
        position:relative;
        background-color:grey;
}
    </style>
</head>

<body>

<section class = 'sec_class'></section>
<section class = 'sec_class'></section>
<section class = 'sec_class'></section>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:39:13.793

你`section`的 s 基本上没有高度，因为`height`百分比 ( `height: 15%;`) 中给出的总是[相对于父母的高度](http://webdesign.about.com/od/csstutorials/f/set-css-height-100-percent.htm)。`body`在您的情况下高度为零，其中 15% 仍然为零。

这应该有助于：

```
html, body { height: 100%; }​ 
```

[jsFiddle 演示](http://jsfiddle.net/bazmegakapa/TeYk7/)

*请务必始终包含文档类型。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:39:36.107

为了使 IE 样式 HTML5 标记 ( `section`, `nav`...) 您必须使用 polyfill，因为默认情况下它不能。您可以使用：[http ://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

它只是一个必须包含在 HTML 中的 JS 文件（使用 IE 条件注释）：

```
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

你也不应该使用单引号：

```
<section class="sec_class"></section> 
```

此外，当然，如果您要在`section`元素上设置潜在高度，那么他的父级也必须具有定义的高度。在你的情况下，没有 15% 的高度（`body`没有高度）是……没有。

# c++ - 为什么这段代码不能在 g++ 中编译

> ID：10187082
> 
> 赞同：7
> 
> 时间：2012-04-17T07:36:38.803
> 
> 标签：c++, templates, g++

下面给出的示例代码未在 g++ 中编译。但它正在视觉工作室工作。是否可以在g ++中的模板类中使用模板成员函数

```
class Impl
{
public:
        template<class I>
        void Foo(I* i)
        {

        }
};

template<class C>
class D
{
public:
        C c;
        void Bar()
        {
                int t = 0;
                c.Foo<int>(&t);
        }
};

int main()
{
        D<Impl> d;
        d.Bar();
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T07:44:36.727

`C`因为所讨论的语句取决于模板参数，所以编译器在实例化之前不允许自省。你必须告诉它你的意思是一个函数模板：

```
c.template Foo<int>(&t); 
```

如果您不放在`template`那里，则该陈述是模棱两可的。为了理解，想象以下内容`C`：

```
class C { const int Foo = 5; }; 
...
c.Foo<int>(&t); 
```

在编译器看来，就好像您将 a`const int`与 an`int`进行比较，并将其结果与 : 的某个地址进行`&t`比较`(c.Foo<int) > &t`。

**然而，真正的解决方案**是在函数调用中省略显式模板参数，只需执行以下操作：

```
c.Foo(&t); 
```

即使在这样的 a`C`具有非模板成员函数的情况下也是正确的`Foo(int)`。通常，编写模板代码时要尽可能少地假设（但不能少）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T07:40:59.973

`Foo()`是一个依赖于模板的名字，所以需要`template`在调用前面放：

```
template<class C>
void D<C>::Bar()
{
    int t = 0;
    c.template Foo(&t);
} 
```

# php - MySQL - 获取层次结构中的顶级父 ID

> ID：10187088
> 
> 赞同：4
> 
> 时间：2012-04-17T07:37:05.837
> 
> 标签：php, mysql, database

这是我的表结构...

表：**position_hierarchy_level**

```
id parent_position_id position_id
 1 1                  2
 2 2                  3
 3 3                  4
 4 4                  5
 5 5                  6
 6 6                  7
 7 7                  8
 8 8                  9
 9 9                  10
 10 10                11
 11 11                12
 12 12                13
 13 13                14
 14 14                15 
```

`parent_position_id`我的查询`position_id`是：

```
select `parent_position_id` from `position_hierarchy_level` where position_id= 15; 
```

但是我怎样才能得到某个的最高父级`position_id`呢？例如，15 个中最靠前的`parent_position_id`将`position_id`是`1`.

有没有一种方便的方法可以使用单个查询来获取这个值？还是我需要在 PHP 中创建一个循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T07:59:01.493

除非有 15 个或更多连接，否则您的数据库结构不会让您这样做。您正在使用*邻接列表模型*。尝试使用[*嵌套集模型*](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

这是[一个](http://www.sitepoint.com/hierarchical-data-database-2/)使用 php的示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T08:00:07.857

试试这个：

```
DELIMITER $$

CREATE FUNCTION getTopParentPositionId(positionId INT) RETURNS INT DETERMINISTIC 
BEGIN
    DECLARE x INT;
    DECLARE y INT;
    SET x = positionId;
    sloop:LOOP
        SET y = NULL;
        SELECT parent_position_id INTO y FROM position_hierarchy_level WHERE position_id = x;
        IF y IS NULL THEN
            LEAVE sloop;
        END IF;  
        SET x = y;
        ITERATE sloop;
    END LOOP;
    RETURN x;
END $$

DELIMITER ; 
```

然后：

```
SELECT getTopParentPositionId( 5 ); 
```

显然，[你不是唯一一个](https://stackoverflow.com/questions/7031469/how-to-properly-loop-in-a-stored-function-on-mysql)研究这种解决方案的人：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T07:41:25.087

看起来同样的问题： [Recursive PHP function for adjacency-list display](https://stackoverflow.com/questions/4242276/recursive-php-function-for-adjacency-list-display)

对 mysql 使用单个查询可能会有所不同。也许你可以用一个存储过程来解决这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T07:52:24.473

如果我理解正确并且您希望最高 position_id 为 parent_position_id 1 等等...

1\. 将 parent_position_id 设置为自动递增

2\. 按 position_id desc 从 table order 中选择 position_id 并将它们放入数组中

3\. 截断表

4\. 将数组插入表

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T07:58:10.213

> 有没有一种方便的方法可以使用单个查询来获取它？

我认为不，请[在此处](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)查看 MySQL 中的分层查询

> 我需要在 PHP 中创建循环语句吗？

我想是的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-17T08:03:57.137

使用此表结构，您拥有的最佳选择是 php 结束时的循环。

如果表结构是您可以自由更改的（以防项目尚未*生效*），您可能需要查看名为`Closure Tables`. [您可以在本文](http://karwin.blogspot.com/2010/03/rendering-trees-with-closure-tables.html)中找到如何使用/设置的简单示例。

无论如何，您应该能够在[SQL Antipatterns](http://pragprog.com/book/bksqla/sql-antipatterns)书中找到更多关于该主题的信息。

# android - 检查互联网连接是否在android上传输数据

> ID：10187094
> 
> 赞同：-1
> 
> 时间：2012-04-17T07:37:58.173
> 
> 标签：android, gprs

我想检查数据连接（EDGE）是否在android中传输数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:17:45.323

使用 TelephonyManager 的 getDataActivity() 如果它的值非零，则存在网络流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:37:59.993

TelephonyManager tm = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);

# javascript - 如何为 Dreamweaver 图像翻转制作缓动效果？

> ID：10187095
> 
> 赞同：-1
> 
> 时间：2012-04-17T07:38:01.033
> 
> 标签：javascript, jquery, css, dreamweaver, rollover-effect

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:19:47.983

您是否正在寻找专门的（跨平台）Javascript 解决方案？

如果没有，您可以在纯 CSS3 中轻松完成。虽然 IE 对`transitions`. 丁：

您可以尝试像这样设置 CSS：

```
div.roller { width: 50px; height: 50px; border: solid 1px green;}

div.roller div { -webkit-transition: all 1s ease-in-out; width: 50px; height: 50px; }

div.off, div.roller:hover div.over { opacity: 1.0; }

div.roller:hover div.off, div.over { opacity: 0; }

.off { background-color: red; position: absolute;}

.over { background-color: yellow; } 
```

添加浏览器特定的前缀`transitions`，我只是`-webkit-`为了方便使用。

您可以将图像设置为`.off`和`.over`div 的背景，将它们嵌入其中，甚至使用`img`标签代替`div`标签。

确保将元素设置为初始向上状态 ,`.off`以`position: absolute`使其堆叠在向下状态 , 之上`.over`。

像这样的html：

```
<div class="roller" >
    <div class="off">off</div>
    <div class="over">over</div>
</div>​ 
```

[在这里](http://jsfiddle.net/jpJUv/)摆弄它。

# node.js - Selenium and Node.js: simple idea. Is it possible?

> ID：10187096
> 
> 赞同：0
> 
> 时间：2012-04-17T07:38:18.897
> 
> 标签：node.js, csv, selenium-ide

For work I need to extract data from websites and write this data in in a CSV file, at this stage I'm using Selenium and Perl (and this very powerful couple) but yesterday I thinked to this solution:

Selenium IDE ---via JS--->Web app on Node.js Webserver------> CSV

Do you think is it possible? Or there is another "elegant" solutions?

The idea is general, so I can use for data storage, but the testers can use this for improving their tests using the stored variables, so it's for general purpose.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:05:40.507

For purpose of scraping you can use `jsdom` module like shown here

[http://blog.nodejitsu.com/jsdom-jquery-in-5-lines-on-nodejs](http://blog.nodejitsu.com/jsdom-jquery-in-5-lines-on-nodejs)

for purpose of generating CSV this module is nice

[https://github.com/koles/ya-csv](https://github.com/koles/ya-csv)

But there are easier ways to do it like using Mechanize in Perl, Ruby, Python

# html - Perl script that extracts data from HTML table

> ID：10187100
> 
> 赞同：-6
> 
> 时间：2012-04-17T07:38:30.747
> 
> 标签：html, perl, html-table, html-parsing

I need a Perl script to parse a simple HTML table with 2 columns.

The table includes: column 1 Name of the user and column 2 the time that he/she has been online.

I need to get the data as: Name Time_online

I have tried [HTML::TreeBuilder](http://search.cpan.org/perldoc/HTML%3a%3aTreeBuilder) and [HTML::Parser](http://search.cpan.org/perldoc/HTML%3a%3aParser) but without result.

I want somehow to get and manipulate this data. THANK YOU!

```
<h1>Users currently online</h1>
<table class="list-table" cellpadding="3" cellspacing="1" summary="Data for online_users">
<thead>
<tr class="list-header">
<th class="list-table" id="online_users_name">
User name
</th>
<th class="list-table" align="right" id="online_users_online_time_pretty">
Online time        
</th>
    </tr>
    </thead>  

    <tbody>
              <tr class="odd"> 
              <td class="list-table" headers="online_users_name">
                <a href="Link">Jack Boauldwin</a>
              </td>

              <td class="list-table" align="right" headers="online_users_online_time_pretty">
                11 minutes
              </td>
            </tr>
        <tr class="even">  

              <td class="list-table" headers="online_users_name">
                <a href="Link">Sarah James</a>
              </td>

              <td class="list-table" align="right" headers="online_users_online_time_pretty">
                1 minutes
              </td>            
          </tr>

              <tr class="odd">

              <td class="list-table" headers="online_users_name">
                <a href="Link">Greg Brown</a>
              </td>

              <td class="list-table" align="right" headers="online_users_online_time_pretty">
                0 minutes
              </td>

          </tr>    
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T08:43:22.703

使用[HTML::TableExtract](http://p3rl.org/HTML::TableExtract)。

# java - php urlencode 和 java urlencode 一样吗？

> ID：10187107
> 
> 赞同：3
> 
> 时间：2012-04-17T07:39:11.253
> 
> 标签：java, php, urlencode, encode

在 PHP 中：</p>

```
php -r "echo urlencode('["IM"]'); " 
```

结果是`%5BIM%5D`

但是在java中

```
String text = URLEncoder.encode('["IM"]',"UTF-8");
System.out.println("text" + text); 
```

结果是`text%5B%22IM%22%5D`

这两个函数有什么区别？如何实现一个java代码来完成php的相同功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:51:45.900

```
String text = URLEncoder.encode('[IM]',"UTF-8");
System.out.println("text" + text); 
```

给`%5BIM%5D`

```
echo urlencode('["IM"]'); 
```

给`%5B%22IM%22%5D`

```
echo urlencode('[IM]'); 
```

给`%5BIM%5D`

```
echo urlencode('[\"IM\"]'); 
```

给`%5B%5C%22IM%5C%22%5D`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:44:00.157

尝试逃避内部 qoutes

```
php -r "echo urlencode('[\"IM\"]'); " 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T07:55:41.160

```
php -r "echo urlencode('["IM"]'); " 
```

结果是 %5BIM%5D 因为函数 urlencode 实际上只将字符串`[IM]`作为其输入。在java中

```
String text = URLEncoder.encode('["IM"]',"UTF-8"); 
```

传递的字符串实际上是：`["IM"]`它生成的值是引号`%22`的编码字符串。`"`

# asp.net-mvc-3 - MVC3 db.SaveChanges() INSERT 语句错误

> ID：10187110
> 
> 赞同：1
> 
> 时间：2012-04-17T07:39:32.703
> 
> 标签：asp.net-mvc-3

我也在关注 MVC 音乐商店。[http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-9](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-9)

当我创建 orderDetails 时，出现内部异常错误。

你能帮我看看是什么意思吗？

"INSERT 语句与 FOREIGN KEY 约束 \"FK_OrderDetails_Product\" 冲突。冲突发生在数据库 \"rentalDB\"、表 \"dbo.Product\"、列 'productId' 中。\r\n语句已终止。 "

我需要签入 SQL Server 吗？我不知道为什么会发生错误..

你能给我一些建议吗？我给你一些我的代码。

请帮我。谢谢。

```
public int CreateOrder(Order order)
    {
        decimal orderTotal = 0;

        var cartItems = GetCartItems();

        // Iterate over the items in the cart, adding the order details for each
        foreach (var item in cartItems)
        {
            var orderDetail = new OrderDetails
            {
                productId = item.Product.productId,
                orderId = order.orderId,
                unitPrice = item.priceValue,
                rentalPeriod = item.rentalPeriod,
                startDate = item.dateCreated.AddDays(2),
                endDate = item.dateCreated.AddDays(2 + item.rentalPeriod),
                quantity = item.count
            };

            // Set the order total of the shopping cart
            orderTotal += (item.count * item.priceValue);

            db.OrderDetails.Add(orderDetail);

        }

        // Set the order's total to the orderTotal count
        order.total = orderTotal;

        // Save the order
        db.SaveChanges(); //I have error in here!!!

        // Empty the shopping cart
        EmptyCart();

        // Return the OrderId as the confirmation number
        return order.orderId;
    } 
```

这是视图模型

```
public class ShoppingCartViewModel
{
    public List<Cart> CartItems { get; set; }
    public decimal CartTotal { get; set; }
} 
```

这是购物车

```
public class Cart
{
    [Key]
    public int recordId { get; set; }
    public string cartId { get; set; }
    public int productId { get; set; }
    public decimal priceValue { get; set; }
    public int count { get; set; }
    public int rentalPeriod { get; set; }
    public DateTime dateCreated { get; set; }
    public virtual Product Product { get; set; }
} 
```

这是产品

```
 public class Product
{
    [Key] public int productId { get; set; }

    [Required(ErrorMessage = "Please select category")]
    public int categoryId { get; set; }

    [Required(ErrorMessage = "Please fill in model name")]
    [DisplayName("Model name")]
    public String model { get; set; }

    [DisplayName("Description")]
    public String description { get; set; }

    [DisplayName("Original price")]
    public decimal price { get; set; }

    [Required(ErrorMessage = "Please fill in stock of product")]
    [DisplayName("Stock")]
    public int stock { get; set; }
    public virtual Category Category { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:59:18.700

我没有在 OrderDetails 中设置 FK..

这就是我之前遇到的错误。

当我在 OrderDetails 和 Order 之间创建 FK 时，它将起作用。

# ios - 在 CoreMotion 中从地面获取参考 CMAttitude（aTtitude，而不是 aLtitude）

> ID：10187120
> 
> 赞同：3
> 
> 时间：2012-04-17T07:40:12.153
> 
> 标签：ios, core-motion

我想获得基于地面水平的参考 CMAttitude，例如，绘制水平线。

实际上，我可以通过随时获取参考姿态并使用multiplyByInverseOfAttitude 来获得与之前姿态相比的手机旋转来旋转我的视图。没关系。

但我无法找到如何在一开始就获得它。我主要处于纵向模式，IOS5，并使用 CMAttitudeReferenceFrameXTrueNorthZVertical（因为我也使用 CoreLocation）。

我查看了气泡水平仪或茶壶样本（使用加速器），但没有找到简单的答案或样本来解决我的设备运动姿态问题。我可能错过了一些东西。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:25:45.960

我自己的答案。

实际上，考虑使用参考态度，我是错误的。我只需要从 deviceMotion 对象中可用的重力计算旋转角度，如下所示：

```
 double rotation = atan2(dm.gravity.x, dm.gravity.y) - M_PI; 
```

# c# - .Net 服务中的线程句柄泄漏（不是 win32 线程。即在任务管理器中不可观察）

> ID：10187125
> 
> 赞同：0
> 
> 时间：2012-04-17T07:40:42.277
> 
> 标签：c#, .net, debugging

我正在尝试调试 .Net 服务中的句柄泄漏，但我对线程句柄泄漏感到困惑。有人可以描述一下这是怎么发生的吗？任务管理器在每个测试周期后仅报告 22 个活动线程，但句柄数不断增加。

我在每个测试周期之后和获取句柄计数之前发送一条消息强制 GC。

当然，还有一个事件句柄泄漏，但这更容易解释/修复。

```
D:\log\SEEService>handle -p 82080 -s

Handle v3.46
Copyright (C) 1997-2011 Mark Russinovich
Sysinternals - www.sysinternals.com

Handle type summary:
  ALPC Port       : 8
  Desktop         : 1
  Directory       : 3
  EtwRegistration : 35
  Event           : 97397
  File            : 36
  IoCompletion    : 3
  Key             : 38
  KeyedEvent      : 1
  Mutant          : 9
  Section         : 23
  Semaphore       : 15
  Thread          : 22845
  Timer           : 5
  Token           : 1
  TpWorkerFactory : 4
  WindowStation   : 2
Total handles: 120426 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:05:00.457

This link might still be relevant: [Thread handle leak](https://connect.microsoft.com/VisualStudio/feedback/details/430646/thread-handle-leak). Have you tried calling `GC.WaitForPendingFinalizers()` after `GC.Collect()`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:23:32.400

我发现了这个错误 :) 我从执行路径中删除了一个和一个模块，并找到了“坏”模块。它是一个通信模块，它是经典的“将对象添加到列表，但未删除”错误 :) 线程句柄 ++ 无法被 GC 处理，因为列表包含对对象的引用。谢谢回复

# html - 以下 HTML 标记的更好做法是什么？

> ID：10187126
> 
> 赞同：1
> 
> 时间：2012-04-17T07:40:43.670
> 
> 标签：html

我试过`<strong><em>webpage</em></strong>`和`<strong><em>webpage</strong></em>`。它们都以相同的方式显示相同的内容。但是，我觉得其中一种做法在可读性和防止错误/错误方面更好。你对此有何看法？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T07:42:28.177

浏览器是一个宽容的软件，所以它不会`scream`，`curse`或者`swear`当你做类似的时髦的东西时，而是试图理解它并显示相同的东西。

当然，第一种形式更好，为了可读性，并且对于爬取您的网站的蜘蛛更有意义，事实上，我会说第二种形式是无效的 HTML

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T07:42:59.673

```
<strong><em>webpage</em></strong> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T07:47:49.937

标签应该是嵌套的，所以首先关闭内部标签，然后外部 => 您的第一个表单是唯一有效的表单。

`<strong>`顺便说一句，你真的需要`<em>`一个元素吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T07:44:22.660

```
<strong><em>webpage</em></strong> 
```

您正在打开一个强标签，然后在强标签内打开一个 em 标签，因此您应该在强标签之前关闭 em 标签。

# c++ - 我如何初始化一个值为结构的类的私有成员静态映射？

> ID：10187131
> 
> 赞同：4
> 
> 时间：2012-04-17T07:41:13.437
> 
> 标签：c++, data-structures, map, static

我有一个类，其私有成员是静态映射：

```
Class Devices
{   
    ...
    private:
    struct DevicePair
    {
       int nCtr;
       bool isToAdd;
    };
    DevicePair m_DevPair;
    static map <string, DevicePair> m_SYSdeviceMap;    
}; 
```

为什么我不能只在 cpp 文件中执行此操作？

```
map <string, DevicePair> Devices::m_SYSdeviceMap; 
```

**如何在 cpp 文件中初始化它？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:42:29.007

有了这条线：

```
map<string, Devices::DevicePair> Devices::m_SYSdeviceMap; 
```

此外，作为一种良好的编码习惯，请`using namespace std;`从标题中删除 ，并限定您对 map - 的使用`std::map`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T07:52:53.170

您不能使用您所说的声明，因为它不知道`DevicePair`该范围内的内容，您必须`Devices::`在它之前

顺便说一句，私有静态通常是一个坏主意，通常最好将此实例隐藏在 .cpp 文件的“匿名命名空间”部分中，编译单元中的函数（通常是类成员）可以看到它但不是外部文件。

原因是它是您向类的所有用户公开的实现细节。

在您的情况下，这`DevicePair`在您的班级中是私有的，并且您不能简单地移动它，因为它在 m_DevPair 的标头中是必需的。

当然，如果你需要你的类是线程安全的，你需要一个互斥锁等来控制对映射的访问（除非它全部在一个线程中初始化，然后只能由多个线程读取）。互斥锁当然会在您的匿名命名空间中（几乎可以肯定应该是）。

我仍然会重新考虑你的设计。

# android - 在 Android 中滑动页面时要向单选按钮添加什么事件侦听器？

> ID：10187132
> 
> 赞同：0
> 
> 时间：2012-04-17T07:41:20.503
> 
> 标签：android, android-widget, android-ui, android-button

![页面控制器](../Images/84fa2eec38730658889dd5da3beef916.png)

我正在开发页面控制器应用程序。我的逻辑涉及将自定义单选按钮放在一页的底部。

当用户滑动页面以移至下一个时，我想在单选按钮上创建一个侦听器。我不知道如何做到这一点。我附上了一张图片来传达我的想法。

任何想法将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:26:47.177

[看这个例子](http://viewpagerindicator.com/)

你必须通过这个例子。它有不同类型的 TabIndicator。所以阅读它并使用它。希望对你有帮助

# silverlight - 将 Silverlight 与 ADFS 被动联合使用时出现令牌超时问题

> ID：10187134
> 
> 赞同：1
> 
> 时间：2012-04-17T07:41:58.637
> 
> 标签：silverlight, wif, adfs

我正在使用 Silverlight、WIF 和 ADFS 的被动联合身份验证。我遵循了培训工具包示例[http://msdn.microsoft.com/en-us/identitytrainingcourse_silverligthandidentity2010_topic2](http://msdn.microsoft.com/en-us/identitytrainingcourse_silverligthandidentity2010_topic2)

一切正常。声明回来了，用户通过了身份验证，等等。它与 RIA 服务一起工作得很好。

使用该应用程序 1 小时后出现问题。令牌似乎变得无效，并且从 Silverlight 客户端到域服务的所有后续调用都失败了。

我检查了 ADFS 设置，它们都是默认设置。

*   Get-ADFSRelyingPartyTrusts 显示 TokenLifetime = 0
*   Get-ADFSProperties 显示 SsoLifetime = 480（我假设为 8 小时）。

我正在使用培训工具包中包含的程序集：**SL.IdentityModel** & **SL.IdentityModel.Server**。

在线我看到人们提到设置*新鲜度值*，但这似乎并不适用，因为一切都是由 SL.IdentityModel.Server 服务自动设置的。

# eclipse - 以编程方式影响视角的加载顺序

> ID：10187137
> 
> 赞同：0
> 
> 时间：2012-04-17T07:42:15.807
> 
> 标签：eclipse, eclipse-plugin, perspectives

因此，我正在开发一个 Eclipse 插件，其中包括基于源代码分析的自定义视图。大多数时候，它工作得很好。但是，如果我在该视图打开的情况下退出 Eclipse，当我重新打开它时，它会遇到错误，`IWorkbenchWindow.getActivePage()`或者`IWorkbenchPage.getEditorReferences()`返回 null。这种不一致似乎是因为~~视图在 Eclipse 退出时具有焦点，并且是 Eclipse 在启动时尝试重建的第一件事。~~重点是非窗口外壳（我不完全理解这一点，但这就是[所说](http://wiki.eclipse.org/FAQ_How_do_I_find_the_active_workbench_page?)的）。是否有一种解决方法，以便我可以确保 Eclipse`IWorkbenchWindow`在我的自定义插件之前完全加载它，而不管 Eclipse 关闭时的焦点是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:17:52.780

您可以考虑改用该网站：`getSite().getPage()`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:22:35.523

Tonny Madsen 在评论中指出，在视图中，我可以从 访问活动页面`getSite().getPage()`，从而解决了问题。

# javascript - Facebook 评论导致 iPhone 和 iOS 版 Safari 中出现 javascript 错误

> ID：10187139
> 
> 赞同：3
> 
> 时间：2012-04-17T07:42:17.537
> 
> 标签：javascript, iphone, mobile-safari, facebook-comments, x-frame-options

我对 Facebook 评论有疑问，它不适用于 iPhone 版 Safari。Facebook 评论在大多数浏览器中运行良好，但在 iPhone 上的 Safari 中出现 Javascript 错误。

我在这里创建了一个最小的测试用例，它显示了问题： [http ://www.pvv.ntnu.no/~andrearo/fotball.html](http://www.pvv.ntnu.no/~andrearo/fotball.html)

我在 iPhone 上的 Safari 中收到以下错误消息：

**“拒绝显示文档，因为 X-Frame-Options 禁止显示”。**

有人可以就如何让这个 Facebook 评论在 iPhone 版 Safari 上工作提供一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-25T18:56:24.800

几年前有人问过这个问题，但我最近遇到了同样的问题并找到了解决方案。似乎评论标签需要有 data-href 标签来防止这种情况。

如果您使用：

```
<div class="fb-comments"></div> 
```

大多数平台将使用当前页面 url 并且没有问题。

对于 iOS，请使用：

```
<div class="fb-comments" data-href="https://www.google.com/"></div> 
```

当然，使用适当的 URL，评论可以正常工作。

希望这可以帮助。

# c# - 在多个后台工作线程中捕获类 (Emgu) 问题

> ID：10187145
> 
> 赞同：0
> 
> 时间：2012-04-17T07:43:04.980
> 
> 标签：c#, multithreading, emgucv

我有一个简单的 Winforms 应用程序，它允许用户同时选择多个视频（文件）并运行后台工作线程来循环浏览 BW 中的每个视频。在下面粘贴了代码，我在这一行得到一个 NullReferenceException 作为“无法从...创建捕获”

```
Capture _capture = new Capture(videoFileName) 
```

在 processVideo 方法中。

注意：如果我选择一个视频，相同的代码可以正常**工作**。所以 Capture 类的多个实例存在一些问题。

我希望 ProcessVideo 方法有新的 Capture 实例并单独打开它。关于我可能做错了什么的任何想法？

```
 private void openVideoToolStripMenuItem_Click(object sender, EventArgs e)
        {
            try
            {
                OpenFileDialog ofd = new OpenFileDialog();
                ofd.Filter = "Video | *.AVI;*.MPEG;*.WMV;*.MP4;*.MOV;*.MPG;*.MPEG;*.MTS;*.FLV";
                ofd.Multiselect = true;
                if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
                {
                    string[] videos = ofd.FileNames;
                    if (videos != null)
                    {

                        BackgroundWorker[] bw = new BackgroundWorker[videos.GetLength(0)];
                        int n = 0;
                        foreach (string video in videos)
                        {
                            bw[n] = new BackgroundWorker();
                            bw[n].DoWork += new DoWorkEventHandler(bw_DoWork);
                            bw[n++].RunWorkerAsync(video);
                        }
                    }
                }
            }
            catch (NullReferenceException excpt)
            {
                MessageBox.Show(excpt.Message);
            }

        }

        void bw_DoWork(object sender, DoWorkEventArgs e)
        {
            string filename = (string)e.Argument;
            ProcessVideo(filename);
        }

       private void ProcessVideo(string videoFileName)
        {

            Capture _capture = new Capture(videoFileName);
             UInt64 TOTAL_FRAMES = Convert.ToUInt64(_capture.GetCaptureProperty(Emgu.CV.CvEnum.CAP_PROP.CV_CAP_PROP_FRAME_COUNT));
                for (UInt64 n = 0; n < TOTAL_FRAMES; n++)
                {
                    using (Image<Bgr, Byte> img1 = _capture.QueryFrame())
                    {

//do something with the frame

                }
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:17:42.367

我建议您更新 Sourcesafe 服务包，它可能会对您有所帮助

[我认为您的代码很完美，没有任何问题。

您在创建对象时遇到错误，它清楚地看到文件格式可能不受支持或可能是内部错误问题。]

让我知道在进行更新后它是否有效。

问候红色

# node.js - 浏览器无法使用 express 获取 socket.io.js 文件

> ID：10187146
> 
> 赞同：11
> 
> 时间：2012-04-17T07:43:04.917
> 
> 标签：node.js, express

我对 socket.io 示例有疑问。我的浏览器无法获取 socket.io.js 文件（控制台出现 404 错误）。

有效的代码：

*服务器.js*

```
var app = require('express').createServer()
  , io = require('socket.io').listen(81);

app.listen(80);

app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

*索引.html*

```
<script src="http://192.168.1.104:81/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://192.168.1.104:81');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
</script> 
```

但是这个不是：

*服务器.js*

```
var app = require('express').createServer()
  , io = require('socket.io').listen(app);

app.listen(80);

app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

*索引.html*

```
<script src="http://192.168.1.104:80/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://192.168.1.104:80');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
</script> 
```

在这种情况下，我的浏览器无法获取 socket.io.js 文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T08:24:27.530

**编辑**：在下一个“编辑”之前，以下所有文字都是错误的。留在那里当痕迹……

你应该知道一件事，你应该做的两件事 + 所有需要[的 Express 文档都在这里](http://expressjs.com/guide.html#configuration)：

1.  快速过滤/处理对节点服务器的每次访问。这意味着当您尝试访问您的 socket.io 脚本文件时，Express 会尝试在您声明的路由中找到它，但您没有这样做（而且您没有这样做是对的）。
2.  最重要的是：在 express 中声明一个静态的、非“计算的”文件夹，您将在其中放置所有静态文件（css、客户端脚本、图像）：

    `app.use('/static', express.static(__dirname + '/static'));`

    这条线一定要放在you `app.configure`call,之前`app.use(app.router)`（其实我是先放的）

    我喜欢这个 /static/scripts ；/静态/css；/static/img 文件夹组织，但你可以自由地适应你的需要。

3.  将 socket.io 脚本文件的链接更改为相对路径（可选但强烈建议）：`src='/static/scripts/socket.io/socket.io.js'`

**编辑**：我错了，非常非常错误，对此我深表歉意。Socket.io 生成所需的不同路径/文件，您不必声明它们，也不必复制任何客户端脚本文件。

请尝试将`<script src="http://192.168.1.104:81/socket.io/socket.io.js"></script>`客户端线路切换到正常的相对线路，`<script src="/socket.io/socket.io.js"></script>`因为这是您的代码和快速指南代码之间的唯一区别。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-19T18:07:49.073

您使用的是哪个**Express 版本？**

API 已从 Express 2.x 更改为 3.x，因此答案在[Migrating from 2.x to 3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x) wiki的**Socket.IO 兼容性**部分：

*Socket.IO 的`.listen()`方法将`http.Server`实例作为参数。
**从 3.x 开始**， 的返回值`express()`不是`http.Server`实例。要让 Socket.IO 与 Express 3.x 一起工作，请确保您手动创建`http.Server`实例并将其传递给 Socket.IO 的`.listen()`方法：*

```
var app = express()
  , http = require('http')
  , server = http.createServer(app)
  , io = require('socket.io').listen(server);

server.listen(3000); 
```

# web-services - 如何通过 Web 服务查找非 jta-data-source/jta-data-source

> ID：10187148
> 
> 赞同：1
> 
> 时间：2012-04-17T07:43:06.883
> 
> 标签：web-services, jakarta-ee, jpa, websphere-7

调用我的 Web 服务时出现以下错误：

```
org.apache.openjpa.persistence.ArgumentException: A JDBC Driver or DataSource class name must be specified in the ConnectionDriverName property. 
```

Webservice 类基本上是尝试使用 JPA 插入数据，并且基于上述错误消息，EntityManager 似乎无法访问数据源条目，如下所示：

```
<persistence-unit name="TEST_P" transaction-type="RESOURCE_LOCAL"> 
        <provider>
        com.ibm.websphere.persistence.PersistenceProviderImpl
        </provider>
        <non-jta-data-source>java:comp/env/jdbc/DATA</non-jta-data-source>
        <class>jpa.WSTGHandler</class>
            <properties>

        </properties>
    </persistence-unit> 
```

我还在 web.xml 中定义了数据源条目，如下所示：

```
 <resource-ref>
        <res-ref-name>java:comp/env/jdbc/DATA</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
        <res-sharing-scope>Shareable</res-sharing-scope>
    </resource-ref> 
```

在 In Servlet 中嵌入 JPA 代码可以成功定位数据源。我怎样才能让 Web 服务以同样的方式工作？

PS：我使用的是 Websphere 7、JPA 1.2 版和 JAX-WS

根据要求，在 Web 服务方法中调用以下类，即 beginTransaction()

```
public class EntityManagerHelper {

    private static final EntityManagerFactory emf; 
    private static final ThreadLocal<EntityManager> threadLocal;
    private static final Logger logger;

    static {
        emf = Persistence.createEntityManagerFactory("TEST_P");         
        threadLocal = new ThreadLocal<EntityManager>();
        logger = Logger.getLogger("TEST_P");
        logger.setLevel(Level.FINE);
    }

    public static EntityManager getEntityManager() {
        EntityManager manager = threadLocal.get();      
        if (manager == null || !manager.isOpen()) {
            manager = emf.createEntityManager();
            threadLocal.set(manager);
        }
        return manager;
    }

     public static void closeEntityManager() {
        EntityManager em = threadLocal.get();
        threadLocal.set(null);
        if (em != null) em.close();
    }

    public static void beginTransaction() {
        getEntityManager().getTransaction().begin();
    }

    public static void commit() {
        getEntityManager().getTransaction().commit();
    }  

    public static void rollback() {
        getEntityManager().getTransaction().rollback();
    } 

    public static Query createQuery(String query) {
        return getEntityManager().createQuery(query);
    }

    public static void log(String info, Level level, Throwable ex) {
        logger.log(level, info, ex);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:46:12.870

问题解决了。这只是 res-ref-name 中的一个错字:)

# r - 仅提取R中表的某些行

> ID：10187149
> 
> 赞同：0
> 
> 时间：2012-04-17T07:43:08.007
> 
> 标签：r

我有一个这种格式的表格：

![表的片段](../Images/8a26f54c4bcf8aae3c55d060c46d3ccf.png)

我正在尝试编写一个 R 脚本，该脚本将从表中“提取”例如具有 c2==1、（c2 和 c3）== 1、（c2 和 c4）==1、（c1 和 c2 和c3)==1，依此类推...这样最后我将有一个列表，其中包含每个案例的 Counts 值。

具有 c2 == 1 的列的示例列表： C2<-c(4, 42, 12, ...)

我尝试过这种方式：totalC2<-table[table[c1]]，如果我使用 table$c1 == 1 它也不起作用。

谁能给我一个如何解决这个问题的建议？

我忘了提到该表来自函数：vennCounts()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:34:29.397

在输出中，您将命名为具有相应计数的列表。但也许使用更清晰和直接的解决方案可以获得相同的结果。让我们拭目以待其他答案。

```
# data simulation
c1 <- sample(c(0,1), 10, replace=T)
c2 <- sample(c(0,1), 10, replace=T)
c3 <- sample(c(0,1), 10, replace=T)
c4 <- sample(c(0,1), 10, replace=T)
Counts <- sample(1:100, 10)
df <- data.frame(c1, c2,c3, c4, Counts)

f <- function(y) {
  idx <- apply(df[,y, drop=F], 1, function(x) all(x == 1))
  df[idx, "Counts"]
}

out <- list()
l <- sapply(1:4, function(x) {combn(x=c("c1", "c2", "c3", "c4"), m=x, simplify=F)})
l <- unlist(l, recursive=F)
for (x in l) {
  out[[paste(x, collapse="")]] <- f(x)
} 
```

# android - 在不同时间安排多条短信

> ID：10187152
> 
> 赞同：0
> 
> 时间：2012-04-17T07:43:25.867
> 
> 标签：android, alarmmanager, scheduler

我想在不同时间安排多条短信，为此我已将姓名、号码和消息保存在数据库中。
我已经计算了时间差并将其传递给警报管理器。对于单个数据，一切正常。当我安排两条或更多条短信时，只会发送最后一条短信。

其背后的原因是什么，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:43:58.343

使用警报管理器......将您的额外数据（短信文本，地址）作为额外的意图并安排它

# jquery - 通过 div:hovers 加载 Jquery 循环？

> ID：10187153
> 
> 赞同：1
> 
> 时间：2012-04-17T07:43:26.647
> 
> 标签：jquery, html, hover, cycle, carousel

我有一个 div:hover 脚本设置[http://jsfiddle.net/4wb5P/6/](http://jsfiddle.net/4wb5P/6/)（在 StackOverflow 成员 bfrohs 的帮助下，谢谢！），但我想让悬停状态在页面加载时开始并循环浏览所有产品悬停状态（通过jquery，我假设，或者在浏览器之间运行良好的东西）。所以我一直试图让循环状态像这样：

1.  Onload：以默认的“悬停以了解更多”状态开始
2.  2 秒后，循环到“产品 1 悬停状态”并停留 2-3 秒
3.  循环到“产品 2 悬停状态”并停留 2-3 秒
4.  循环到“产品 3 悬停状态”并停留 2-3 秒
5.  然后从产品 1 开始，无限期地遍历所有产品。

如果用户要翻转任何悬停状态，它将停止循环并保持专注于该悬停（只要指针停留在该图块上）。一旦用户将指针移开，循环将从步骤 1 重新开始。

我假设一些 Jquery 会被使用，但这就是它让我明白的地方。任何帮助将不胜感激，或者任何指向从哪里开始插件等的指针将不胜感激。请参阅下面的当前代码：http: [//jsfiddle.net/4wb5P/6/](http://jsfiddle.net/4wb5P/6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:52:54.007

看我的例子小提琴：http: [//jsfiddle.net/bAtCS/1/](http://jsfiddle.net/bAtCS/1/)

```
$(function() {

    var hoverprod = $('.hover_product'), len = hoverprod.length, intv;
    (function iterativehover(i) {
        hoverprod.removeClass('hover').eq(i).addClass('hover');
        intv = setTimeout(function() {
            iterativehover((i === len - 1)? 0 : i + 1)
        }, 3000);
    }(0));

    hoverprod.on('mouseenter', function() {
       clearInterval(intv);
       hoverprod.removeClass('hover');
    });

}); 
```

我在你使用 :hover 伪类的任何地方都插入了一些新的 CSS 规则。这个循环永远运行，直到`mouseenter`事件发生。

如果您想要初始延迟，只需像这样包装代码

```
var rotateDivs = function() {
    var hoverprod = $('.hover_product'), len = hoverprod.length, intv;
    (function iterativehover(i) {
        hoverprod.removeClass('hover').eq(i).addClass('hover');
        intv = setTimeout(function() {
            iterativehover((i === len - 1)? 0 : i + 1)
        }, 3000);
    }(0));

    hoverprod.on('mouseenter', function() {
       clearInterval(intv);
       hoverprod.removeClass('hover');
    });
};

$(function() {
    setTimeout(rotateDivs, 3000);
}); 
```

# android - Android 应用应使用哪个 Internet Radio API

> ID：10187156
> 
> 赞同：7
> 
> 时间：2012-04-17T07:43:32.213
> 
> 标签：android, api, streaming

您好，我想创建一个可以广播电台的 Android 应用程序。我在 google 上搜索，主要发现了两个 API。

1.streamfinder.com API（显示它有10000个电台数据和流）

2.ShoutCast API（显示全球40000多个电台）

但是我读到了一个查询，即 ShoutCast 停止为其 API 提供开发密钥：
[Internet Radio Streaming API](https://stackoverflow.com/questions/9658703/internet-radio-streaming-api)。
任何人都可以建议，哪个API应该用于互联网广播流媒体。

# java - 在没有填充的情况下使用 CTR 模式的正确方法是什么？

> ID：10187157
> 
> 赞同：0
> 
> 时间：2012-04-17T07:43:42.833
> 
> 标签：java, aes

```
import java.io.*;
import java.security.MessageDigest;
import java.security.Security;
import java.util.Arrays;

import javax.crypto.Cipher;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;
public class NewKey{
public static void main(String[] args) throws Exception {
    Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());
    String username = "username@teleparadigm.org";
    String userdata = "depression"+" "+"headache";
    // Get the Key
    byte[] key = (username).getBytes();
    MessageDigest sha = MessageDigest.getInstance("SHA-256");
    key = sha.digest(key);
    key = Arrays.copyOf(key, 16); 

    SecretKeySpec secretKeySpec = new SecretKeySpec(key, "AES");    
    System.out.println("key used is "+username);
    System.out.println("encrypted key used is "+key);

    Cipher cipher = Cipher.getInstance("AES/CTR/NoPadding", "BC");
    final byte[] IV = {-85, -67, -5, 88, 28, 49, 49, 85,114, 83, -40, 119, -65, 91, 76, 108};// Hard coded for now
    final IvParameterSpec ivSpec = new IvParameterSpec(IV);

    System.out.println("Derived AES key is: " +secretKeySpec.toString().getBytes().length );

    cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec,ivSpec);
    byte[] encrypted = cipher.doFinal((userdata).getBytes());                                              
    System.out.println("encrypted userdata: " + encrypted);

    cipher.init(Cipher.DECRYPT_MODE, secretKeySpec,ivSpec);
    byte[] original = cipher.doFinal(encrypted);
    String originalString = new String(original);
    System.out.println("Original userdata: " + originalString );
}
} 
```

我已经为初始化向量（IV）使用了一些值，并且想知道使用 AES CTR 模式的正确方法是什么？

```
key = Arrays.copyOf(key, 16); 
```

上述声明的目的是什么？建议我进行一些更改以增强程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:11:54.237

正确的方法是生成一个随机 NONCE（`IvParameterSpec`Java 使用它，但它实际上是一个 NONCE）并将其与密文一起发送。您应该使用 PBKDF2 来派生密码，并且您不应该使用`getBytes()`或`new String(byte[])`因为它使用平台的默认编码而不是明确定义的编码。

# netbeans - 如何在 NetBeans IDE 7.1 中禁用本地历史记录功能？

> ID：10187158
> 
> 赞同：4
> 
> 时间：2012-04-17T07:43:49.160
> 
> 标签：netbeans, ide, netbeans-7

NetBeans IDE 具有内置的本地历史记录功能，可在`C:\Users\USER\.netbeans\7.1\var\filehistory`（Windows 路径）中创建数千个文件。有什么办法可以禁用此功能？

我在选项*后找到了清理本地历史记录文件，*但我不知道将其设置为 0 是否会禁用本地历史记录。任何帮助，将不胜感激。

![在此处输入图像描述](../Images/790267cefe4a0eeff149d5c812f307c9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:46:50.257

它是一个插件：

工具 -> 插件 -> 已安装 -> 选择“本地历史记录”，然后单击“停用”。

![在此处输入图像描述](../Images/6ecba07bae1d1740de71aad9157e14e1.png)

# sql - SQL-如何找到前 1 行？

> ID：10187161
> 
> 赞同：0
> 
> 时间：2012-04-17T07:44:00.570
> 
> 标签：sql, sql-server-2008

我必须找到每个帐户的第一行有效日期

```
account    dt_effective
-------------------------
1    14-04-2012
1    15-04-2012
2    13-02-2011
2    11-03-2012
3    1-01-2010
3    02-02-2010
3    05-01-2012 
```

答案必须是：

```
account     dt_effective
-------------------------
1    14-04-2012
2    13-02-2011
3    1-01-2010 
```

你能帮我查询一下吗？

*更新了问题*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:46:24.507

你可以试试

```
SELECT account, MIN(dt_effective) FROM your_table
GROUP BY account 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:46:47.347

```
SELECT account, MAX(dt_effective)
FROM [table]
GROUP BY account 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T07:49:06.853

```
SELECT account, MAX(dt_effective)
FROM yourTableName
GROUP BY account 
```

如果您需要输入的第一个生效日期，只需将 max 更改为 min

```
SELECT account, MIN(dt_effective)
FROM yourTableName
GROUP BY account 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T07:47:08.737

尝试这个：

```
select account, MAX(dt_effective) from table group by account; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T07:58:04.880

我已经尝试了下面提到的查询并按预期工作。

```
 DECLARE @T TABLE(ACCOUNTID INT, ACCOUNTDATE DATETIME)
INSERT INTO @T
VALUES(1,    CONVERT(DATE,'14-04-2012',105))
INSERT INTO @T
VALUES(1,    CONVERT(DATE,'15-04-2012',105))
INSERT INTO @T
VALUES(2,    CONVERT(DATE,'13-02-2011',105))
INSERT INTO @T
VALUES(2,    CONVERT(DATE,'11-03-2012',105))
INSERT INTO @T
VALUES(3,    CONVERT(DATE,'1-01-2010',105))
INSERT INTO @T
VALUES(3,   CONVERT(DATE,'02-02-2010',105))
INSERT INTO @T
VALUES(3,    CONVERT(DATE,'05-01-2012',105))

SELECT * FROM @T

SELECT ACCOUNTID, MAX(ACCOUNTDATE) FROM @T
GROUP BY ACCOUNTID 
```

# java - 计算 STS 中的代码行数和类数

> ID：10187162
> 
> 赞同：1
> 
> 时间：2012-04-17T07:44:02.327
> 
> 标签：java, eclipse, sts-springsourcetoolsuite

您是否知道 SpringSource Tool Suite 2.9.1 的任何工作插件，它将显示工作区中所选项目的行数和类数？

我知道 Eclipse 有 Metrics2 插件，但我发现它不适用于最新的 STS 版本（[链接](https://stackoverflow.com/q/1043666/913093)）。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-10T01:20:55.873

使用 STS 3.6.4，它可以完美运行。确保：

1.  您已选择指标视图。意见-其他。
2.  选择 Java 透视图。必要时重置它以显示包结构。
3.  在要分析的项目中-properties-metrics-enable
4.  如果项目本身没有，请重建项目......

# c# - 将 wav 文件混合并转换为一个 mp3 文件

> ID：10187165
> 
> 赞同：1
> 
> 时间：2012-04-17T07:44:15.320
> 
> 标签：c#, naudio, lame

我有 2 个 wav 文件。它应该使用 naudio 和 lame.exe 将它们转换为一个 mp3 文件。请注意，应通过**混合**2 个 wav 文件（**而不是串联**）来创建 wav 文件。

*两个 wav 文件 => 一个 mp3 文件*

```
 private void MixWavFiles(string[] inputFiles, string outFileName)
        {
            int count = inputFiles.GetLength(0);
            WaveMixerStream32 mixer = new WaveMixerStream32();
            WaveFileReader[] reader = new WaveFileReader[count];
            WaveChannel32[] channelSteam = new WaveChannel32[count];
            mixer.AutoStop = true;

            for (int i = 0; i < count; i++)
            {
                reader[i] = new WaveFileReader(inputFiles[i]);
                channelSteam[i] = new WaveChannel32(reader[i]);
                mixer.AddInputStream(channelSteam[i]);
            }
            mixer.Position = 0;
            WaveFileWriter.CreateWaveFile(outFileName, mixer);

        }

private string ConvertWavToMp3(string wavFileName)
        {
            string mp3FileName = Path.ChangeExtension(wavFileName, "mp3").Replace(Directory.GetCurrentDirectory(), "c:");
            string commandLine = " -V2 " + wavFileName + " " + mp3FileName;

            var lamaProcessInfo = new ProcessStartInfo();
            lamaProcessInfo.Arguments = commandLine;
            lamaProcessInfo.FileName = WavToMp3ConverterFileName;
            lamaProcessInfo.WindowStyle = ProcessWindowStyle.Minimized;

            using (var lamaProcess = Process.Start(lamaProcessInfo))
            {

                lamaProcess.WaitForExit();
                int exitCode = lamaProcess.ExitCode;
                lamaProcess.Close();
            }
            return mp3FileName;
        } 
```

好吧，我就是这样做的：

1.  首先，我使用 NAudio 混合 2 个 wav 文件并获得一个混合 wav 文件。
2.  然后我使用 lame.exe 将此 wav 文件转换为 mp3 文件。

在第二步`exitCode` 总是等于`1`，这意味着有一个错误。所以我无法将 wav 文件（混合）转换为 mp3（结果）文件。

但是，如果我将两个 wav 文件中的每一个转换为两个 mp3 文件，它就可以正常工作！和`exitCode` 等于`0`。所以我有一个结论`commandLine`，将一个（混合）wav 文件转换为 mp3 文件是错误的。或者混合 wav 格式错误，但不太可能，因为它可以由 winamp 播放。

有没有人有什么建议？

# powershell - PowerShell 和可执行文件

> ID：10187172
> 
> 赞同：0
> 
> 时间：2012-04-17T07:44:40.750
> 
> 标签：powershell

每次我在 PowerShell 中运行应用程序 (.exe) 时，程序都会在命令提示符中运行，而不是像使用脚本那样执行它。

```
Invoke-Item MyProgram.exe 
```

我认为 PowerShell 应该替换命令提示符，但 PowerShell 会打开命令提示符，然后运行程序。有什么方法可以让 PowerShell 完全取代命令提示符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:07:53.300

> 我认为 PowerShell 应该取代命令提示符

它是，所以你为什么不做`MyProgram.exe`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:11:17.337

您的问题非常模糊，简而言之，它将取决于程序，因为`Invoke-Item`默认情况下使用 Windows 默认文件关联的东西。

我打赌使用`& MyProgram.exe`而不是`Invoke-Item MyProgram.exe`会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T12:05:48.257

您是否尝试过 Start-Process Program.exe -NoNewWindow

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-01T05:54:16.637

我从另一个问题得到了答案：

```
Start-Process .\MyProgram.exe -NoNewWindow -Wait 
```

# c# - 这个 Ribbon 控件叫什么？

> ID：10187176
> 
> 赞同：1
> 
> 时间：2012-04-17T07:44:57.973
> 
> 标签：c#, wpf, wpf-controls

以下类型的按钮叫什么？我正在尝试复制 Windows 7 WordPad 应用程序。

![在此处输入图像描述](../Images/b9b02227904790007b172641933f7db5.png)

我尝试使用 RibbonButton，但它根本没有相同的样式。

我在 .NET 4.5 beta 中使用 WPF 和 C#，默认包含 Ribbon 接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:14:13.177

使用 a`RibbonControlGroup`并添加`RibbonButton`s。

# java - SMS Logger：如何监控传入/传出的短信活动？

> ID：10187180
> 
> 赞同：2
> 
> 时间：2012-04-17T07:45:32.917
> 
> 标签：java, android, sms, broadcastreceiver, contentobserver

我正在尝试创建 android (Froyo 2.2) SMS 日志记录应用程序。使用许多教程，我制作了应用程序的主要部分，它就像一个魅力！基本上它读取最后一条短信（发送或接收），通过电话号码获取联系人姓名，将毫秒 unixtime 转换为日期并在屏幕上显示结果。

现在我想删除 GUI，修改该代码，以便该应用程序将监视手机是否有任何传入/传出的短信活动，如果有，它将启动提到的代码并将结果保存到文件中。

我希望整个应用程序对用户完全透明/隐身（在后台工作）。我怀疑我必须以某种方式使用 ContentObserver 类，但我在实现方面遇到了一些问题（即使开始）。

你能帮忙吗？

当前代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.PhoneLookup;
import android.widget.TextView;
import android.net.Uri;
import android.database.Cursor;
import java.util.Date;

public class SMSLog extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView tv = new TextView(this);

        Uri uriSMS = Uri.parse("content://sms/");
        Cursor cur = getContentResolver().query(uriSMS, null, null, null, null);
        cur.moveToNext();

        String body = cur.getString(cur.getColumnIndex("body"));   
        String add = cur.getString(cur.getColumnIndex("address"));
        String time = cur.getString(cur.getColumnIndex("date"));
        String protocol = cur.getString(cur.getColumnIndex("protocol"));       

        String contactName = "";
        Uri personUri = Uri.withAppendedPath( ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(add));  
        Cursor c = getContentResolver().query(personUri, new String[] { PhoneLookup.DISPLAY_NAME }, null, null, null );  
        if( c.moveToFirst() ) {  
            int nameIndex = c.getColumnIndex(PhoneLookup.DISPLAY_NAME);  
            contactName = c.getString(nameIndex); 
        }
        c.close();
        cur.close();

        String out = "";
        Date d = new Date(Long.valueOf(time)); 

        if (protocol == null)
            out = "Sending to: "+ contactName + " <"+add +">\nDate: "+d +"\nBody: "+body+"\n\n";
        else 
            out = "Received from: "+ contactName + " <"+add +">\nDate: "+d +"\nBody: "+body+"\n\n";

        tv.setText(out);
        setContentView(tv);

    }
} 
```

# android - android在哪里保存加密文件

> ID：10187182
> 
> 赞同：1
> 
> 时间：2012-04-17T07:45:55.477
> 
> 标签：android, storage, encryption

我想开发一个应用程序，让用户保护他们的文件/文件夹。它与现有的应用程序非常相似，用户可以选择要隐藏的文件，并且只能从我的受密码保护的应用程序中访问这些文件。

我有足够的关于加密算法的资源。我的疑问是：

1.  我应该在哪里保存我的加密文件。它应该在我的应用程序文件夹中。但是如果我在手机内部存储上创建这个文件夹，那不会导致内存限制。我的应用程序允许用户添加图像/视频或任何其他文件来保护。如果我将文件夹保留在 sd 卡上，问题是它将限制应用程序只能在带有 sd 卡的手机上运行。其他人也可以访问sd卡的内容（我在这里吗？）

2.  下一个疑问是，如果我删除保护，我会看到大多数应用程序会在其先前的文件夹中恢复。它是如何实现的。是否像保留映射表一样进行恢复？

请帮我解答我的问题。非常感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:12:53.513

根据我对同一问题的调查，Android系统中没有内置加密存储。因此，我建议您采用以下方法：

1.  使用任何算法加密文件内容。请参见[此处（1）](https://stackoverflow.com/questions/5432275/encrypted-storage-on-an-android-ipad)、[此处（2）](http://www.androidsnippets.com/encryptdecrypt-strings)和[此处（3）](http://www.java2s.com/Tutorial/Java/0490__Security/UsingCipherOutputStream.htm)。

2.  在创建文件时使用[`MODE_PRIVATE`](http://developer.android.com/reference/android/content/Context.html#MODE_PRIVATE)，例如，[`openFileOutput(String, int)`](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)

# mysql - MySQL 错误：1146 和 1051

> ID：10187185
> 
> 赞同：0
> 
> 时间：2012-04-17T07:46:18.090
> 
> 标签：mysql, administration

当我尝试进行备份时，我是 MySql 的新手，这给我一个错误

```
mysqldump: Got error: 1146: 
Table doesn't exist when using LOCK TABLES 
```

当我试图放弃那个问题表时，它给了我一个

```
error 1051 mysql
unable to drop the table. 
```

我已经尝试了一切，但没有用。

由于它仍处于开发阶段，我决定放弃那个有问题的数据库并创建一个新的。

这也做不到。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:24:16.927

尝试删除下表的 .frm .myi 和 .myd 文件。如果该表使用 MyISAM 存储引擎或 .frm 和 .ibd 文件，如果该表使用 InnoDB 存储引擎

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:47:28.817

它解释了。该表不存在。您是否选择了活动数据库模式？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T08:41:25.277

尝试**删除**此表，然后再次创建（有时会有所帮助）。也尝试通过**mysqlcheck**修复数据库。

# javascript - javascript 就地 HTML 元素

> ID：10187186
> 
> 赞同：2
> 
> 时间：2012-04-17T07:46:23.013
> 
> 标签：javascript, jquery, sorting, in-place

继续使用[javascript 类型的 HTML 元素](https://stackoverflow.com/questions/10186192/javascript-sort-of-html-elements)

我想对不同`<ol>`（最终在`<div>`）中的元素进行排序，排序最好是就地而不是`unwrap()`，`sort()`并且`wrap`

HTML

```
<ol class="table" style="display: block; ">
    <li class="menu__run">I</li>
    <li class="menu__run">IXX</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
</ol>
<ol class="table">
    <li class="menu__run">I</li>
    <li class="menu__run">IXX</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__test">st</li>
    <li class="menu__test">st</li>
    <li class="menu__test">st</li>
</ol> 
```

javascript

```
var sort_by_name = function(a, b) {
    return a.innerHTML.toLowerCase().localeCompare(b.innerHTML.toLowerCase());
}

var list = $(".table > li").get();
list.sort(sort_by_name);
for (var i = 0; i < list.length; i++) {
    list[i].parentNode.appendChild(list[i]);
}​ 
```

我寻找的结果是

```
<ol class="table" style="display: block; ">
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
</ol>
<ol class="table">
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">I</li>
    <li class="menu__run">IXX</li>
    <li class="menu__run">IXX</li>
    <li class="menu__test">st</li>
    <li class="menu__test">st</li>
    <li class="menu__test">st</li>
</ol> 
```

假设 a,b 是 DOM 元素，并且 a 在列表中的位置低于 b（在文档中的位置较低）并且 value(a) > value(b) 然后 a 和 b 将在文档中切换。不管 a 和 b 可能不是兄弟姐妹。

[http://jsfiddle.net/yqd3w/7/](http://jsfiddle.net/yqd3w/7/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T08:02:36.890

要通过减少比较来加快任务速度，您可以执行以下操作：

```
$(".table").each(function(){
    var list = $(this).children().get().sort(sort_by_name);
    for (var i = 0; i < list.length; i++)
        this.appendChild(list[i]);
}​); 
```

...虽然它不影响结果。

* * *

编辑：好的，我知道了：

```
var $t = $(".table");
var list = $t.children().get().sort(sort_by_name);
$t.map(function() {
    return {t:this, l:this.childNodes.length};
}).each(function(i, o) {
    $(o.t).append(list.splice(0, o.l));
}); 
```

# tablet - avd中的Android设备无法正常工作

> ID：10187189
> 
> 赞同：0
> 
> 时间：2012-04-17T07:46:33.030
> 
> 标签：tablet, android

我刚买了这款便宜的安卓平板电脑，希望它能与安卓 avd 一起用于调试应用程序。

但是我明白了！[1]：[http ://dl.dropbox.com/u/38208073/and.png](http://dl.dropbox.com/u/38208073/and.png)

我正在使用安卓平板电脑 [2]：[http ://www.mytabletpc.pk/buy-p607-apex_flyer_tablet_pc-in-lahore-price](http://www.mytabletpc.pk/buy-p607-apex_flyer_tablet_pc-in-lahore-price)

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T21:03:28.030

非常清楚地回答对于 Linux，您需要设置 UDEV 以支持制造商的身份，或者您需要使用 sudo 重新启动 adb。

要正确执行此操作，请执行以下操作：

lsusb 并寻找您的平板电脑：

总线 002 设备 008：ID 04e8:6860 Samsung Electronics Co., Ltd 请注意 ID。

然后转到 /etc/udev/rules.d 并在该文件中创建一个名为 androiddevelopment.rules 的新文件，将其放入：

SUBSYSTEM=="usb", ATTRS{idVendor}=="xxxx", OWNER="yyyy", GROUP="zzzz" 其中 xxxx 是 ID 的第一部分（在我的示例中为 04e8），yyyy owner 是您的用户名和zzzz 是你的组。

然后重启udev：

sudo service udev restart 这应该允许 Linux 自动允许您的用户连接到该设备。

参考： [当我尝试测试我的应用程序时，Eclipse 无法识别我的安卓平板电脑？](https://stackoverflow.com/questions/9312457/eclipse-wont-recognize-my-android-tablet-when-i-try-to-test-my-app)

# php - PHP excel阅读器无法从命令提示符读取excel文件

> ID：10187191
> 
> 赞同：0
> 
> 时间：2012-04-17T07:46:45.990
> 
> 标签：php, excel

我有一个需要读取 excel 文件的应用程序。我已经使用来自[http://code.google.com/p/php-excel-reader/downloads/list](http://code.google.com/p/php-excel-reader/downloads/list)的插件 excel-file-reader 完成了这项工作。现在我需要我的应用程序在后台进程中读取 excel 文件，并且我选择从 windows 命令提示符运行 php 文件。但是当我这样做时，命令提示符中的结果是文件名 person2.xls 不可读，但是当我从浏览器运行 php 文件时，它可以读取 excel 文件。这是我的代码，可帮助您理解我的意思。

```
<?php
require_once 'php-excel-reader\excel_reader2.php';
$db=pg_connect('host=localhost dbname=hris user=postgres password=Abcd1234');
$table='lin_people';
$dataExcel = new Spreadsheet_Excel_Reader('person2.xls');
$baris = $dataExcel->rowcount($sheet_index=0);
$model=$table;
$fieldsArray=pg_query('SELECT column_name FROM information_schema.columns WHERE table_name="'.$model.'"');
//$fieldsArray=Set::extract('/0/'.$model,$fieldsArray);
$fieldNames=array_keys($fieldsArray[0][$model]);
$tanda=false;
for($batas=0;$batas<count($fieldNames);$batas++)
{
    if($fieldNames[$batas]!='id')
    {
        if($tanda==false)
        {
            $fields[$batas]=$fieldNames[$batas];
        }
        else
        {
            if($batas!=count($fieldNames)-1)
            {
                $fields[$batas]=$fieldNames[$batas+1];
            }   
        }
    }
    else
    if($fieldNames[$batas]=='id')
    {
        $fields[$batas]=$fieldNames[$batas+1];
        $tanda=true;
    }
}

$sukses = 0;
$gagal = 0;

for($i=2;$i<=$baris;$i++)
{
    if(!empty($dataExcel))
    {
        $this->$model->create();
        for($y=0;$y<count($fields);$y++)
        {
            if($y==0)
            {
                pg_query('INSERT INTO '.$model.' ('.$fields[$y].') VALUES("'.$dataExcel->val($i,$y+1).'")');
            }
            else
            {
                $currID=pg_query('SELECT id FROM '.$model.' ORDER BY id desc LIMIT 1');
                pg_query('INSERT INTO '.$model.' ('.$fields[$y].') VALUES("'.$dataExcel->val($i,$y+1).'") WHERE id='.$currID);
            }
                            //$this->$model->set($fields[$y],$dataExcel->val($i,$y+1));
        }
    }
                    //$this->$model->save();
    if('dataExcel')
    {
        $sukses++;
    }
    else
    {
        $gagal++;
    }

} 
```

?>

当我从命令提示符运行 php 文件时，如何让这个 php 文件读取 excel 文件？请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:58:11.040

这可能有帮助，也可能没有帮助。我觉得这是两件事之一：

1.  文件权限。
2.  无法识别的 Mime 类型。

它可能是第二个，但这里有两个解决方案：

```
chmod("person2.xls",0777);
$dataExcel = new Spreadsheet_Excel_Reader('person2.xls');
chmod("person2.xls",0644); 
```

如果这不起作用，您可能需要包含一个[mime 类型库](http://php.net/manual/en/book.mime-magic.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:48:29.333

命令提示符使用 Windows 以外的其他字符编码（字符格式）。也许这就是您的问题所在。例如，如果您尝试将 Excel 电子表格保存为 CSV 或 TEXT，您会发现 2 种文件类型：一种用于 windows，另一种用于 DOS。

希望它有帮助...

# c# - 使用 Regex 对象检查指定的字符串模式进行查询

> ID：10187200
> 
> 赞同：0
> 
> 时间：2012-04-17T07:47:50.330
> 
> 标签：c#, regex

我正在学习 C#，并且我有一个小型测试程序，其中控制台应该接收一个数字作为输入，而不是字母字符。

```
string inputString;

        string pattern = "[A-Za-z]*";
        Regex re = new Regex(pattern);

        inputString = Console.ReadLine();

        while(re.Match(inputString).Success)
        {
            Console.WriteLine("Please stick to numerals");
            inputString = Console.ReadLine();
        }
        Console.WriteLine(inputString); 
```

问题是编译器不区分字母字符或数字。

任何建议也许代码似乎是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T07:52:39.017

我不是 RegEx 过度使用的粉丝，所以这里有一个你可以随时尝试的替代方案......

```
public bool IsNumeric(string input)
{
    foreach(char c in input)
    {
       if(!char.IsDigit(c))
       {
          return false;
       }
    }

    return true;
} 
```

您可以按如下方式使用它...

```
while(!IsNumeric(inputString))
{
   Console.WriteLine("Please stick to numerals");
   inputString = Console.ReadLine();
} 
```

...当然，如果您想要 RegEx，我相信有人会很快解决您的问题；）

* * *

感谢 Eli Arbel 通过下面的评论，如果您愿意/能够使用[LINQ 扩展方法，您甚至可以缩短此方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)：

```
public bool IsNumeric(string input)
{
   return input.All(x => char.IsDigit(x));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T07:58:24.643

问题是由于量词，它`string pattern = "[A-Za-z]*";`也会匹配 0 个字符。`*`

如果您只想检查字符串中是否有字母，只需使用

```
string pattern = "[A-Za-z]"; 
```

但当然这只是匹配 ASCII 字母。更好的方法是使用 Unicode 属性

```
string pattern = @"\p{L}"; 
```

`\p{L}`将匹配任何具有“字母”属性的 Unicode 代码点。

**笔记：**

我希望您知道这不是仅检查数字，而是检查输入中是否有字母。这当然会接受不是数字和字母的字符！

如果你只想**检查数字**，你应该去@musefan's answer或以这种方式使用正则表达式

```
string inputString;

string pattern = @"^\p{Nd}+$";
Regex re = new Regex(pattern);

inputString = Console.ReadLine();

while (!re.Match(inputString).Success) {
    Console.WriteLine("Please stick to numerals");
    inputString = Console.ReadLine();
}
Console.WriteLine(inputString); 
```

`\p{Nd}`或`\p{Decimal_Digit_Number}`：除表意文字外的任何文字中的数字 0 到 9。

有关 Unicode 属性的更多信息，请参阅[www.regular-expressions.info/unicode](http://www.regular-expressions.info/unicode.html#prop)。

下一个替代方法是**检查输入中是否有“不是数字”**：

```
string pattern = @"\P{Nd}";
...
while (re.Match(inputString).Success) { 
```

您只需要更改模式，如果输入中有一个非数字，`\P{Nd}`则否定`\p{Nd}`并且将匹配。

# r - R 脚本耗尽内存 - Microsoft HPC 集群

> ID：10187202
> 
> 赞同：0
> 
> 时间：2012-04-17T07:47:59.063
> 
> 标签：r, hpc, rscript

我有一个带有以下源代码的 R 脚本：

```
genofile<-read.table("D_G.txt", header=T, sep=',')
genofile<-genofile[genofile$"GC_SCORE">0.15,]
cat(unique(as.vector(genofile[,2])), file="GF_uniqueIDs.txt", sep='\n') 
```

D_G.txt 是一个巨大的文件，大约 5 GB。

现在，计算是在 Microsoft HPC 集群上执行的，因此，如您所知，当我提交作业时，它会在不同的物理节点上“拆分”；就我而言，每个都有 4 GB 的 RAM 内存。

好吧，经过一段时间后，我收到了臭名昭著的错误`cannot allocate vector of size xxx Mb`消息。我尝试使用限制可用内存的开关：

```
--max-memory=1GB 
```

但没有任何改变。

我已经尝试了 32 位和 64 位的 Rscript 2.15.0，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:50:43.463

您的数据集应该适合一个节点的内存这一事实并不意味着在对其执行分析时也意味着它适合内存。经常分析导致数据复制。此外，您身边的一些低效编程也可能会增加内存使用量。设置开关和限制 R 的内存使用只会让事情变得更糟。它不限制*实际*内存使用量，它限制*最大*内存使用量。并且使用 32 位操作系统在内存方面总是有点想法，因为使用 32 位操作系统的单个进程可以寻址的最大内存小于 4 GB。

如果没有更多详细信息，很难进一步帮助您解决此问题。一般来说，我建议将数据集切割成越来越小的部分，直到你成功为止。我假设您的问题是令人尴尬的并行，并且进一步切割您的数据集不会改变任何输出。

# c# - 从数据库中删除项目，但不删除与此相关的其他项目

> ID：10187207
> 
> 赞同：-2
> 
> 时间：2012-04-17T07:48:26.600
> 
> 标签：c#, entity-framework-4.1

我的文章课上有这个：

```
 public int GalleryID { get; set; }
    public virtual Gallery Gallery { get; set; } 
```

这是我的画廊课：

```
public class Gallery
{

    public int GalleryId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Photo> Photos { get; set; }
} 
```

当我在存储库中删除画廊时：

```
 public virtual void Delete(int id)
    {
        T entity = dbset.Find(id);
        dbset.Remove(entity);
        dataContext.SaveChanges();
    } 
```

我也删除了文章，但这不是我想要的。我想保留文章（只是可能将galleryId 设置为0 a 并将gallery 设置为null。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:53:04.503

在您的文章中使外键可以为空

```
public int? GalleryID { get; set; } 
```

删除图库时，您需要清除其文章收藏

```
public void DeleteGallery(int id)
{
    var entity = dataContext.Galleries
                .Include(e => e.Articles)  // include your child object collection
                .First(e => e.Id == id);

    dataContext.Galleries.Articles.Clear();  // this removes the reference to the parent
    dataContext.Galleries.Remove(entity);

    dataContext.SaveChanges();
} 
```

见这里[EF 4.1 RC：奇怪的级联删除](https://stackoverflow.com/questions/5402964/ef-4-1-rc-weird-cascade-delete)

# javascript - 如何使用单击事件 jquery 处理模糊事件

> ID：10187211
> 
> 赞同：0
> 
> 时间：2012-04-17T07:49:03.450
> 
> 标签：javascript, jquery, html, css

我有一个像这样的 html 标记

```
<li id="fSearch" class="alwsShown">
            <div class="dark overflowHidden" id="fSearchBg">
                            <input type="text" id="filter" name="" style="width:140px" tabindex="1" class="fullWidth opt resetBorderNShd resetShd" value="" autocomplete="off" title="Search" value=""/>
             <span id="stopSearch" class="imgSprite stopSearch displayNone poAbs"></span>
            </div>

          </li> 
```

用过的jQuery

```
var test = function() {
    var self = this,
    $filter = $("#filter"),
    $fSearchBg = $("#fSearchBg"),
    $stopSearch = $(".stopSearch");
    // Blur
    $filter.blur(function() {
      $filteranimate({
        width: "140px"
      }, 200, function() {
        $fSearchBg.removeClass("light").addClass("dark");
        $stopSearch.hide();
      });
    });
    $stopSearch.click(function(event){
      $filter.val("");
      $(this).hide('fast');
      event.preventDefault()
      event.stopPropagation();

    });
    // Focus
    $filter.focus(function() {
      // animate
      $filter.animate({
        width: "285px"
      }, 200);
      $fSearchBg.removeClass("dark").addClass("light");
    });

  }); 
```

在我的情况下，我的输入框的宽度为 140 像素，当用户关注输入框时，我将其设置为 284 像素的动画，当我单击任何地方时，我正在处理模糊事件。现在我的要求是当我点击十字图标时输入框中有一个十字图标，我必须执行一些任务但我不想在点击十字图标时触发模糊。如果已经存在模糊事件，请建议我如何处理点击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:56:07.420

如果您可以检测到图标单击设置一些全局 javascript 标志，如

```
iconclicked = true; 
```

在 blur 方法中使用此图标单击，如果为 true，则返回

# iphone - Facebook SDK：发布到墙上只对我可见以用于测试目的？

> ID：10187215
> 
> 赞同：1
> 
> 时间：2012-04-17T07:49:22.883
> 
> 标签：iphone, ios, facebook, ipad

当我使用适用于 iOS 的 Facebook SDK 测试我的代码时，我所有的朋友都可以看到我在墙上的所有帖子。出于我所有的测试目的，我希望能够限制帖子。在 Facebook 页面/首选项/应用程序中，我可以设置“以我自己的名义发帖”的可见性。当我将其更改为“只有我”时，将新内容发布到我的墙上不再起作用（->“请求 didFailWithError”）。

此外，在每次将新版本部署到我的 iPad 后，此首选项将重置回默认值。

因此我想问你，是否可以直接在我的 iOS 应用程序中进行设置？谢谢你的帮助。

编辑：

搞不定。当我输出我的请求时，我得到了这个 NSLog：

```
> Request didLoad: {
>     actions =     (
>                 {
>             link = "https://www.facebook.com/1608527xxx/posts/3278287008xxx";
>             name = Comment;
>         },
>                 {
>             link = "https://www.facebook.com/1608527xxx/posts/3278287008xxx";
>             name = Like;
>         }
>     );
>     application =     {
>         id = 274053732670xxx;
>         name = "iPad App";
>     };
>     comments =     {
>         count = 0;
>     };
>     "created_time" = "2012-04-17T11:12:46+0000";
>     from =     {
>         id = 160x527xxx;
>         name = "MyName";
>     };
>     icon = "https://s-static.ak.facebook.com/rsrc.php/v1/yzwe/r/StEh3RhPvjk.gif";
>     id = "1xx08527xxx_3278287008xxx";
>     link = "https://www.facebook.com/photo.php?fxxxxxxxx";
>     message = "test caption";
>     name = "iPad App Photos";
>     "object_id" = 32782867xxxxx;
>     picture = "https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/xxxxxx70_s.jpg";
>     privacy =     {
>         description = Friends;
>         value = "ALL_FRIENDS";
>     };
>     type = photo;
>     "updated_time" = "2012-04-17T11:12:46+0000";

-(void) postPhoto:(UIButton*)button{

    UIImage *uploadImage = [UIImage imageNamed:@"testImage"];

    NSDictionary *dictPrivacy = [NSDictionary dictionaryWithObjectsAndKeys:@"CUSTOM",@"value", @"SELF", @"friends", nil];

    //SBJSON* jsonWriter = [[SBJSON alloc] init];
    SBJSON* jsonWriter = [SBJSON new];
    NSString* privacyJSONStr =  [jsonWriter stringWithObject:dictPrivacy];
    NSLog(@"stringPrivacy: %@", privacyJSONStr);

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   uploadImage, @"source", 
                                   @"test caption", @"message", 
                                   privacyJSONStr, @"privacy",
                                   nil];

    [self.facebook requestWithGraphPath:@"/me/photos" andParams:params andHttpMethod:@"POST" andDelegate:(id)self];
    } 
```

有什么帮助吗？谢谢（许可状态：）

> NSArray *permissions = [[NSArray alloc] initWithObjects: @"read_stream", @"publish_stream", @"user_photos", nil];

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:57:04.287

我通常只在 facebook 上使用一个没有朋友的测试用户。为我工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:49:49.760

您可以为您在 iOS 应用中发布的每个帖子设置隐私。使用关键字“隐私”引用此页面。

[https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

![在此处输入图像描述](../Images/9bd10384c8459b6df7b893e5984eafe8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T19:06:49.410

有一个用于创建测试用户的 API，Facebook 每个应用最多支持 500 个测试用户：http: [//developers.facebook.com/docs/test_users/](http://developers.facebook.com/docs/test_users/)

# java - 将数据从 Java 导出到 MS Excel 的最佳方法

> ID：10187218
> 
> 赞同：12
> 
> 时间：2012-04-17T07:49:30.860
> 
> 标签：java, excel

我在互联网上搜索将数据从我的 Java 桌面应用程序导出到 Excel 的答案，我遇到了[Apache POI API](https://poi.apache.org/)。然后我发现 JDBC 可以工作，然后我偶然发现了[JExcel](http://jxls.sourceforge.net/)。它们都一样好，还是我应该专注于其中最好的，它是什么？

干杯。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-09T11:16:35.323

为什么这么复杂？

只需 TAB 分隔您的列并将输出写入带有“.xls”扩展名的纯文本文件？

这样，您需要做的就是打开生成的“.xls”文件。即使它实际上只是一个 TAB 分隔的文本文件，Excel 也会打开它并自动将每个选项卡视为一个新列。

坦率地说，不知道为什么人们仍然使用 csv 文件。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-20T04:40:16.723

我可能会迟到回答这个问题，但我想你的正确选择是 Jxls。我在我的模块中遇到了类似的情况，我必须保留某个模板，如徽标、颜色、col-span、固定列......所以编写单独的 java 代码并设计它非常忙碌。

Jxls 核心是 poi，在语法上类似于 jstl，您只需在 excel 中将 bean 的数组列表映射到所需的列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:17:13.900

如果导出的excel文件很大，可能会出现内存不足的异常。（是我之前遇到的问题，不知道现在有没有改善。）

最简单的方法是导出为 CSV 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-16T22:22:22.800

最好的方法是对列进行制表符分隔，对行进行 \n 分隔。另存为 .xls。

完美的解决方案:) ty Zeb

# xml - Spring WebFlow - 在编译时添加流 XML 配置检查

> ID：10187220
> 
> 赞同：0
> 
> 时间：2012-04-17T07:49:41.437
> 
> 标签：xml, spring-webflow

有没有办法在编译时检查 XML 配置的完整性？或者在最坏的情况下，在应用程序启动时？

我所说的理智不仅是验证和格式良好，而且还包括表达式属性中格式良好的方法名称（不一定存在，但至少检测到丢失的括号）。

提前致谢，

弗洛朗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:16:11.170

为了从编译/构建的角度解决它，Spring webflow 有一个基本的[AbstractXmlFlowExecutionTests](http://static.springsource.org/spring-webflow/docs/2.0.x/javadoc-api/org/springframework/webflow/test/execution/AbstractXmlFlowExecutionTests.html)测试类，您可以扩展它以编写流集成测试。如果由于 xsd 验证错误或其他 xml 格式错误导致 xml 无法解析，您编写的任何测试方法都会*引发 FlowModelBuilderException*（“无法解析 XML...”）异常。使用此实用程序对流程进行单元测试并使其成为构建的一部分是非常好的做法。

对于使用自定义 spring bean 的流程中的任何评估，您可能需要覆盖 registerMockFlowBeans 或 configureFlowBuilderContext，并提供 bean 的模拟/测试实现。javadoc 有一个简单的例子。

# java - what are the new features introduced in java5?

> ID：10187221
> 
> 赞同：-2
> 
> 时间：2012-04-17T07:49:43.920
> 
> 标签：java, java-5

Can anyone explain what are the new features introduced in java5 over older versions of java with some simple examples to understand the concept.?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:51:40.097

从 oracle 页面阅读： http: [//docs.oracle.com/javase/1.5.0/docs/relnotes/features.html](http://docs.oracle.com/javase/1.5.0/docs/relnotes/features.html)

# android - Android Activity transfer not happening in a single time

> ID：10187222
> 
> 赞同：0
> 
> 时间：2012-04-17T07:49:45.553
> 
> 标签：android

Hello i build a small app using Android, in this app i built two activity and now when i click on my button(name of button New Game) of first activity to switch on second activity, it do nothing, but when i click on this button again it changes the activity. I want this in one click here i am posting code of my both activity please help me. Thanks in advance source code of first activity

```
public class TTTActivity extends Activity implements OnClickListener {
public int result;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    View newButton = findViewById(R.id.new_button);
    newButton.setOnClickListener(this);        

    View exitButton = findViewById(R.id.exit_button);
    exitButton.setOnClickListener(this);

}
private void quitApplication()
{
    finish();
}
private void startGame(){
    startActivity(new Intent(this, Game.class));
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.new_button:
        //startNewGameConfirm();
        startGame();
        break;
    case R.id.exit_button:
        quitApplication();
        break;

    }

} 
```

}

Source code of game activity

```
public class Game extends Activity {
private final int GAME_VICTORY = 0x1;
private final int GAME_DEFEAT = 0x2;
private final int GAME_TIE = 0x3;
private final int GAME_CONTINUES = 0x4;
private final float UNIQUE_MAX_WEIGHT=0.85f;
static final int ACTIVITY_SELECTION = 1;

private float[] w;  
private int[] c;        
private int[][] PosTable;   
private Button[] buttons;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.game);

    buttons = new Button[9];

    buttons[0] = (Button) findViewById(R.id.Button01);
    buttons[0].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(0);
        }
    });
    buttons[1] = (Button) findViewById(R.id.Button02);
    buttons[1].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(1);
        }
    });
    buttons[2] = (Button) findViewById(R.id.Button03);
    buttons[2].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(2);
        }
    });
    buttons[3] = (Button) findViewById(R.id.Button04);
    buttons[3].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(3);
        }
    });
    buttons[4] = (Button) findViewById(R.id.Button05);
    buttons[4].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(4);
        }
    });
    buttons[5] = (Button) findViewById(R.id.Button06);
    buttons[5].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(5);
        }

    });
    buttons[6] = (Button) findViewById(R.id.Button07);
    buttons[6].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(6);
        }
    });
    buttons[7] = (Button) findViewById(R.id.Button08);
    buttons[7].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(7);
        }
    });
    buttons[8] = (Button) findViewById(R.id.Button09);
    buttons[8].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            btnClicked(8);
        }
    });

    Button button = (Button) findViewById(R.id.Button10);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            buttonsEnable(true);
           beginPlay();
        }
    });

  startActivityForResult(new Intent(Game.this, TTTActivity.class), ACTIVITY_SELECTION);

    DisplayMetrics dm = getApplicationContext().getResources().getDisplayMetrics();
    float h = (float) (dm.heightPixels - (100.0)*dm.density);
    float w = dm.widthPixels;
    for(int i=0;i<9;i++) {
        buttons[i].setHeight((int) (h/3));
        buttons[i].setWidth((int) (w/3));
    }
}
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    beginPlay();
    if (requestCode == ACTIVITY_SELECTION) {
        if (resultCode == RESULT_OK) {
            Bundle extras = data.getExtras();
            if (extras.getString("result").equals("CPU")) cpuPlay();
        }
    }
}
private void beginPlay() {
    //initializations start 
    w=new float[9];
    c=new int[9];
    InitTable();
    w[0]=0.7f;
    w[1]=0.4f;
    w[2]=0.7f;
    w[3]=0.4f;
    w[4]=0.7f;
    w[5]=0.4f;
    w[6]=0.7f;
    w[7]=0.4f;
    w[8]=0.7f;
    //c[i] : 0 for empty, 1 for cpu, 2 for user
    for(int i=0;i<9;i++)
        c[i]=0;
    //initializations done

    //now we play!
    for(int i=0;i<9;i++)
        updateBtn(i);
}

private void cpuPlay() {
    //computer plays first
    int cpos=getDecision();
    if (cpos == -1) {
        Toast toast = Toast.makeText(getApplicationContext(), "GAME OVER", Toast.LENGTH_SHORT);
        toast.show();
        return;
    }
    c[cpos]=1;
    updateBtn(cpos);
    int gstatus = CheckGameStatus();
    if (gstatus == GAME_VICTORY) {
        Toast toast = Toast.makeText(getApplicationContext(), "Congrts You Won", Toast.LENGTH_SHORT);
        toast.show();
    }
    else if (gstatus == GAME_DEFEAT) {
        Toast toast = Toast.makeText(getApplicationContext(), "Sorry, You Lost", Toast.LENGTH_SHORT);
        toast.show();
    }
    else if (gstatus == GAME_TIE) {
        Toast toast = Toast.makeText(getApplicationContext(), "Its a TIE, press reset to play again", Toast.LENGTH_SHORT);
        toast.show();
    }
    else if (gstatus == GAME_CONTINUES) {
        //user plays
    }
}
private void updateBtn(int i) {
    if(c[i]==0)
        buttons[i].setText(" ");
    else if(c[i]==1)
        buttons[i].setText("O");
    else
        buttons[i].setText("X");
}
private int CheckGameStatus() {
    int s = 0;
    //check horizontal
    if(c[0]==2&&c[1]==2&&c[2]==2) {s = GAME_VICTORY;}
    if(c[3]==2&&c[4]==2&&c[5]==2) {s = GAME_VICTORY;}
    if(c[6]==2&&c[7]==2&&c[8]==2) {s = GAME_VICTORY;}
    if(c[0]==1&&c[1]==1&&c[2]==1) {s = GAME_DEFEAT;}
    if(c[3]==1&&c[4]==1&&c[5]==1) {s = GAME_DEFEAT;}
    if(c[6]==1&&c[7]==1&&c[8]==1) {s = GAME_DEFEAT;}
    //check vertical
    if(c[0]==2&&c[3]==2&&c[6]==2) {s = GAME_VICTORY;}
    if(c[1]==2&&c[4]==2&&c[7]==2) {s = GAME_VICTORY;}
    if(c[2]==2&&c[5]==2&&c[8]==2) {s = GAME_VICTORY;}
    if(c[0]==1&&c[3]==1&&c[6]==1) {s = GAME_DEFEAT;}
    if(c[1]==1&&c[4]==1&&c[7]==1) {s = GAME_DEFEAT;}
    if(c[2]==1&&c[5]==1&&c[8]==1) {s = GAME_DEFEAT;}
    //check diagonal
    if(c[0]==2&&c[4]==2&&c[8]==2) {s = GAME_VICTORY;}
    if(c[2]==2&&c[4]==2&&c[6]==2) {s = GAME_VICTORY;}
    if(c[0]==1&&c[4]==1&&c[8]==1) {s = GAME_DEFEAT;}
    if(c[2]==1&&c[4]==1&&c[6]==1) {s = GAME_DEFEAT;}

    if (s != 0) {
        buttonsEnable(false);
        return s;
    }

    boolean box_empty = false;
    for(int i=0;i<9;i++) {
        if (c[i] == 0) box_empty = true;
    }
    if (box_empty) {    //if any box is empty -> game continues
        return GAME_CONTINUES;
    }
    else {  //else there is tie
        buttonsEnable(false);
        return GAME_TIE;
    }
}

private void buttonsEnable(boolean b) {
    for(int i=0;i<9;i++)
        buttons[i].setEnabled(b);
}

private void btnClicked(int i) {
    if(c[i]!=0) {
        Toast toast = Toast.makeText(getApplicationContext(), "Position occupied", Toast.LENGTH_SHORT);
        toast.show();
    }
    else {
        //all OK
        c[i] = 2;
        updateBtn(i);
        int gstatus = CheckGameStatus();
        if (gstatus == GAME_VICTORY) {
            Toast toast = Toast.makeText(getApplicationContext(), "Congrats You Won", Toast.LENGTH_SHORT);
            toast.show();
        }
        else if (gstatus == GAME_DEFEAT) {
            Toast toast = Toast.makeText(getApplicationContext(), "Sorry, You Lost", Toast.LENGTH_SHORT);
            toast.show();
        }
        else if (gstatus == GAME_TIE) {
            Toast toast = Toast.makeText(getApplicationContext(), "Its a TIE, press reset to play again", Toast.LENGTH_SHORT);
            toast.show();
        }
        else if (gstatus == GAME_CONTINUES) {
            cpuPlay();
        }
    }
}

private int getDecision() {
    for(int i=0;i<9;i++)
        for(int j=0;j<9;j++) {
            if(c[i]==1&&c[j]==1)    //place 'o' to win
                if(PosTable[i][j]!=-1)  //if we have 3 in a row
                    if(c[PosTable[i][j]]==0)    //if position is free
                        return PosTable[i][j];
            if(c[i]==2&&c[j]==2)    //place 'o' to prevent user's victory
                if(PosTable[i][j]!=-1)  //if we have 3 in a row
                    if(c[PosTable[i][j]]==0)    //if position is free
                        return PosTable[i][j];
        }

    if(c[0]==1&&c[8]==0) return 8;
    if(c[2]==1&&c[6]==0) return 6;
    if(c[8]==1&&c[0]==0) return 0;
    if(c[6]==1&&c[2]==0) return 2;
    Random r=new Random();
    boolean exist07=false;
    boolean[] free=new boolean[9]; //will hold the free positions
    for(int i=0;i<9;i++)
        free[i]=false;
    for(int i=0;i<9;i++)
        if(c[i]==0) {   //free ??
            free[i]=true;   //add position to free
            if(w[i]==UNIQUE_MAX_WEIGHT) return i;
        }
    //more than 1 positions with same weight
    for(int i=0;i<9;i++)
        if(free[i]) //if position is free
            if(w[i]==0.7f) exist07=true;
    if(exist07)
        for(int i=0;i<9;i++)
            if(free[i]) //if position is free
                if(w[i]==0.4f) free[i]=false;

    int j=0;
    int rn=0;
    int[] tmp;
    for(int i=0;i<9;i++)
        if(free[i]) j++;
    if(j!=0) {
        tmp=new int[j];
        rn=r.nextInt(j);
        j=0;
        for(int i=0;i<9;i++)
            if(free[i]) tmp[j++]=i;
        return tmp[rn];
    }
    else {
        return -1; //else GAME OVER
    }
}
private void InitTable() {

    PosTable=new int[9][9];
    for(int i=0;i<9;i++)
        for(int j=0;j<9;j++)
            PosTable[i][j]=-1;
    PosTable[0][1]=2;
    PosTable[0][2]=1;
    PosTable[0][3]=6;
    PosTable[0][4]=8;
    PosTable[0][6]=3;
    PosTable[0][8]=4;
    PosTable[1][2]=0;
    PosTable[1][4]=7;
    PosTable[1][7]=4;
    PosTable[2][4]=6;
    PosTable[2][5]=8;
    PosTable[2][6]=4;
    PosTable[2][8]=5;
    PosTable[3][4]=5;
    PosTable[3][5]=4;
    PosTable[3][6]=0;
    PosTable[4][5]=3;
    PosTable[4][6]=2;
    PosTable[4][7]=1;
    PosTable[4][8]=0;
    PosTable[5][8]=2;
    PosTable[6][7]=8;
    PosTable[6][8]=7;
    PosTable[7][8]=6;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:55:52.983

我在`onCreate()`你的游戏活动中找到了这个：

```
 startActivityForResult(new Intent(Game.this, TTTActivity.class), ACTIVITY_SELECTION); 
```

所以你有了

TTTActivity----点击开始---->游戏（活动）--onCreate--->再次启动TTTActivity！

您的游戏没有显示，但它会立即 ping 回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:36:46.197

在你的 Game.java 中使用它

`startActivityForResult(new Intent(Game.this, Game.class), ACTIVITY_SELECTION);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T07:57:08.407

我终于明白了，这段代码有一些错误

```
startActivityForResult(new Intent(Game.this, TTTActivity.class), ACTIVITY_SELECTION); 
```

应该是这样的。

```
startActivityForResult(new Intent(Game.this, Game.class), ACTIVITY_SELECTION); 
```

实际上，它需要将活动从自身变为自身。所以它对我来说绝对没问题。顺便说一句，非常感谢所有试图提供帮助的人。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T07:56:32.307

添加此代码...

```
 Button newButton = (Button)findViewById(R.id.new_button);
    newButton.setOnClickListener(this);        

    Button exitButton =(Button) findViewById(R.id.exit_button);
    exitButton.setOnClickListener(this); 
```

我不认为你想`'startActivityForResult(new Intent(Game.this, TTTActivity.class), ACTIVITY_SELECTION);` 在`oncreate()`

# clojure - 如何使用类型提示创建具有可变数量参数的 Clojure 多方法？

> ID：10187223
> 
> 赞同：0
> 
> 时间：2012-04-17T07:49:48.633
> 
> 标签：clojure, multimethod

我正在尝试使用类型提示来区分两个单参数方法。

例如，add-vertex 包装了一个 Java 方法，该方法可以采用可变数量的 args，所以在这里我试图让 add-vertex 采用零、一个或两个 args...

```
(defmulti add-vertex (fn [& args] (map class args)))
(defmethod add-vertex [] (add-vertex nil nil))
(defmethod add-vertex Integer [id] (add-vertex id nil))
(defmethod add-vertex Map [props] (add-vertex nil props))
(defmethod add-vertex [Integer Map] [id props]
  ((let [vertex (. *g* addVertex id)]
    (when props
      (apply set-props vertex (interleave (map name (keys props)) (vals props))))
    vertex))) 
```

请注意，有两个单参数函数——每个函数采用不同的类型（id 是 Java Integer，props 是 Java Map）。我是 Clojure 的新手，所以我怀疑我这样做完全错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:08:36.183

这是您要执行的操作的代码：

```
(defmulti add-vertex (fn [& args] (map class args)))
(defmethod add-vertex [] [] (add-vertex nil nil))

;; You could also use java.lang.Integer here, but numbers are Longs by default
(defmethod add-vertex [java.lang.Long] [id] 
                                       (add-vertex id nil))

;; I assume you are using a clojure map ie {:1 2}
(defmethod add-vertex [clojure.lang.PersistentArrayMap] [props] 
                                                        (add-vertex nil props))

(defmethod add-vertex [java.lang.Long clojure.lang.PersistentArrayMap] [id props] ...) 
```

但是正如你所看到的，这对课程来说非常混乱。

另一种解决方案可能是执行以下操作：

```
(defn dispatch-fn
  ([] :empty)
  ([a] (cond
         (number? a) :number
         (map? a)    :map
         :else       :error))
  ([a b] (if (and (number? a) (map? b))
             :number-and-map
             :error))
  ([a b & args] :error))

(defmulti add-vertex dispatch-fn)
(defmethod add-vertex :empty [] (add-vertex nil nil))
(defmethod add-vertex :number [id] (add-vertex id nil))
(defmethod add-vertex :map [props] (add-vertex nil props))
(defmethod add-vertex :number-and-map [id props] ...)
(defmethod add-vertex :error [& args] ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:13:57.280

您没有使用类型提示，而是将类文字编写为将评估调度函数的值。您的问题是您没有将**所有**类型都包含在一个向量中——即使只有一个。

我强烈建议您[阅读](http://clojure.org/multimethods)多方法。

# java - How can I set a simple multi-line ItemReader and configure bulk operations job to be resumable?

> ID：10187227
> 
> 赞同：0
> 
> 时间：2012-04-17T07:50:15.400
> 
> 标签：java, spring, spring-batch

I am trying to accomplish a simple task of:

1.  Read a text file that contains SQL queries separated by ";".
2.  Perform each query in a separate transaction
3.  Be able to restart/resume the execution from the first query that failed.

I tried to do this with spring-batch.(version 2.1.8.RELEASE) The problems I am facing are as follows:

I failed to configure a simple out-of-the-box `ItemReader` that would read several lines up to ";" and aggregate them before passing to the `ItemWriter`.

I do not need a `FieldSetMapper` I simply do not have no fields. My input is a text file containing SQL queries. Each query can take 1 or more lines and the queries are separated by a semicolon. Seems like it is impossible to define an `LineMapper` inside a `ItemReader` without specifying a `FieldSetMapper` to a complex bean (I tried to set a `BeanWrapperFieldSetMapper` to map to `java.lang.String` but failed due the exception described below).

**Question 1:** why do I need a `FieldSetMapper` with the `prototypeBeanName` set to a complex object if all I want is to append all the lines in a single `String` before passing it to the `ItemWriter`? When I configure the `fieldSetMapper`'s property `prototypeBeanName` to refer to the `java.lang.String` I get an Exception saying that the number of names is not equal to the number of values. I debugged the spring-batch code and found that there are 2 values mapped to a single name: **name**=%SOME_NAME% **values**={%MY_SQL_QUERY%, ";"} and the Exception is thrown by `AbstractLineTokenizer.tokenize()` line 123

**Question 2**: Can the line aggregation be achieved by using out-of-the box spring-batch `ItemReaders` if yes, how they need to be configured? Do I miss something in my configuration? (see below)

configuration:

```
<bean id="basicParamsIncrementer" class="com.linking.core.exec.control.BasicJobParamsIncrementer" />

<batch:job id="rwBatchJob" restartable="true" incrementer="basicParamsIncrementer">
    <batch:step id="processBatchStep">
        <batch:tasklet transaction-manager="transactionManager" >
            <batch:chunk reader="batchFileItemReader" writer="sqlBatchFileWriter" 
                   commit-interval="1" />
        </batch:tasklet>
    </batch:step>
</batch:job>

<bean id="batchFileItemReader" class="org.springframework.batch.item.file.FlatFileItemReader">
    <property name="resource"
        value="classpath:/bat.sql.txt" />
    <property name="recordSeparatorPolicy" ref="separatorPolicy" />

    <property name="lineMapper">
        <bean class="org.springframework.batch.item.file.mapping.DefaultLineMapper">
            <property name="lineTokenizer" ref="sqlTokenizer" />
            <property name="fieldSetMapper" ref="sqlFieldSetMapper" />
        </bean>
    </property>
</bean>

<bean id="separatorPolicy" class="com.linking.core.SemiColonRecordSeparatorPolicy" />

<bean id="sqlTokenizer" class="org.springframework.batch.item.file.transform.DelimitedLineTokenizer">
    <property name="delimiter" value=";" />
    <property name="names" value="sql,eol"/>
</bean>

<bean id="sqlFieldSetMapper" class="org.springframework.batch.item.file.mapping.BeanWrapperFieldSetMapper">
    <property name="prototypeBeanName" value="sql" />
</bean>

<bean id="sql" class="com.linking.core.model.SQL" scope="prototype" /> 
```

`com.linking.core.model.SQL` is a simple class having 2 members of type `String`: sql (for the query) and `eol` (for the ';') It is used to overcome the situation that the `AbstractItemReader` returns all the lines up to the separator (as a `String`) and also the separator (in my case ";") as `values`.

**Question 3:** In case the job that runs a bulk of SQL queries using just a single step reader-writer approach fails in the middle how can I resume/restart the job from the 1st failed query? Should I do it programatically by analyzing last run or can it be achieved by context configuration of the job-step and the related out-of-the-box spring-batch beans?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T21:20:04.890

对于问题 3，我会做几件事

*   在项目阅读器中，您可以将“saveState”之类的属性传递给 true
*   将“commit-interval”设置为合适的值
*   配置Spring批处理DB，这样可以保存状态

如果以上都设置好了，并且你不使用“next”作为工作实例，它将从你离开的地方继续！

# pycharm - How to make PyCharm always show line numbers

> ID：10187228
> 
> 赞同：268
> 
> 时间：2012-04-17T07:50:33.820
> 
> 标签：pycharm, jetbrains-ide

I cannot seem to be able to find the setting to enable line numbers for *all* files, but I have to always right click and enable this on per file basis.

There must be a global setting for this, right?

* * *

## 回答 #1

> 赞同：349
> 
> 时间：2012-04-17T07:55:02.633

2.6 及更高版本：
PyCharm（最左侧菜单）-> 首选项...-> 编辑器（左下部分）-> 常规-> 外观-> 显示行号复选框

[![在此处输入图像描述](../Images/3dd9e4100e7d3cfbc3a1c23b5bd05c23.png)](https://i.stack.imgur.com/aeNGC.png)

2.5 及以下版本：
设置 -> 编辑器 -> 常规 -> 外观 -> 显示行号复选框

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2014-11-20T19:38:09.877

**对于**Windows 上的 4.0、4.5版

*文件 -> 设置*

然后，

*编辑器 -> 常规 -> 外观 -> 显示行号*

**对于Mac OSX 上**的 4.0 版****

 **PyCharm-->首选项

然后，

编辑器-->常规-->外观-->复选框：“显示行号”

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-11-21T04:21:51.303

对于 3.0 版（社区版）：

文件 -> 设置 -> 编辑器（在 IDE 设置下） -> 外观 -> 选中“显示行号”

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2014-07-03T13:54:41.643

PyCharm 版本 3.4.1（***对于项目中的所有文件***）：

> 文件 -> 首选项 -> 编辑器（IDE 设置） -> 外观 -> 标记“显示行号”

PyCharm 版本 3.4.1（***仅适用于项目中的现有文件***）：

> 查看 -> 活动编辑器 -> 显示行号

![图片](../Images/d3dc42c0f87108e5e0d8ad27413dd2c3.png)

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-11-21T23:48:11.557

对于 2.6 及更高版本，对话框位于“首选项”对话框中，使用 Cmd ',' 访问：

PyCharm（最左侧菜单）-> 首选项...-> 编辑器（左下部分）-> 外观-> 显示行号复选框

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-04-07T08:44:02.553

v. 社区 5.0.4 (linux)：文件 -> 设置 -> 编辑器 -> 常规 -> 外观 -> 现在检查“显示行号”，确认 w。好的，瞧 :)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-26T13:52:44.560

**使用搜索栏**

1.  按 2 次`Shift`
2.  粘贴`/editor /appearance/` 然后
3.  点击`Show line numbers`切换按钮

* * *

**适用于 Windows 和 Linux**

> ```
> File | Settings | Editor | General | Appearance 
> ```

**对于 macOS**

> ```
> IntelliJ IDEA | Preferences | Editor | General | Appearance 
> ```

* * *

**使用快捷方式**

> ```
> Ctrl+Alt+S 
> ```

然后

***编辑器 > 常规 > 外观***

单击显示行号切换按钮。

* * *

[Pycharm官方文档（外观）](https://www.jetbrains.com/help/idea/settings-editor-appearance.html)**

# scala - 使用 Scala 中的引用调用带有 args 的函数

> ID：10187230
> 
> 赞同：0
> 
> 时间：2012-04-17T07:50:42.443
> 
> 标签：scala

考虑以下代码：

```
object HelloIntelliScala {
  def main(args : Array[String]) = {
    println(callAnyFunc(funcWithNoArgs))

    val l = callAnyFuncWithArgs("bingo") (funcWithArgs)
    println(l)

    val l2 = callAnyFuncWithArgs(21) (funcWithArgs2)
    println(l2)

  }

  type noArgCallBack = () => Any

  def funcWithArgs(inp : String) : Any = {
    println("Func with arg called, arg value is: " + inp)
    "Hello " + inp + "!"
  }

  def funcWithArgs2(inp : Int) : Any = {
    println("Func with arg called, arg value is: " + inp)
    "Hello, integer " + inp + "!"
  }

  //how do i call this function?
  def funcWithArgs3(inp : Int, name : String) : Any = {
    println("Func with 2 args called, arg values are: " + (inp, name))
    "Hello, multiple args " + (inp, name) + "!"
  }

  def funcWithNoArgs() : Any = {
    println("Function with no args was called!")
    "Hello NO_ARGS"
  }

  def callAnyFunc(callback : noArgCallBack) : Any = {
    callback();
  }

  def callAnyFuncWithArgs[A, B](arg : A)(f : A => B) : Any = {
    f(arg);  //how do I pass variable args here
  }
} 
```

我需要一种通用的方法来调用任何带参数的函数，就像没有参数的函数一样。请注意，要传入的参数列表可以是可变的，我们在编译时不知道参数类型。此外，我确实需要 Any 返回类型，因为我需要将此值用于后期处理。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:11:10.843

Scala 没有抽象方法的数量。或者，换句话说，如果不为每个 arity 编写样板文件，就无法做到这一点。

[幸运的是，Miles Sabin 用Shapeless](https://github.com/milessabin/shapeless#readme)编写了所有样板文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T09:51:58.037

我想你想要这样的东西：

```
def funcWithArgs(args: String*) = args foreach println
def callAnyFuncWithArgs[A, B]
  (args: A*)(f: (A*) => B) = f(args: _*) 
```

然后调用 funcWithArgs 作为部分应用函数：

```
callAnyFuncWithArgs("bingo")(funcWithArgs _) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T08:02:33.237

这可能适用于函数柯里化......看看这里： http: [//www.codecommit.com/blog/scala/function-currying-in-scala](http://www.codecommit.com/blog/scala/function-currying-in-scala) 然后你可以包装函数来调用柯里化函数（ Function.curried) 并在某个时候简单地填充 args 然后调用它

# asp.net - 带字典的 Gridview

> ID：10187231
> 
> 赞同：0
> 
> 时间：2012-04-17T07:50:44.133
> 
> 标签：asp.net, database, gridview, dictionary

我创建了一个字典

```
Dictionary<Department,bool> dict= new Dictionary<Department,bool>(); 
```

这里的部门是一个类，我有`Id,Name and Code`部门。并在`bool`上午发送此人是否`HOD`存在。

我正在将记录添加到此词典中，例如

```
dict.Add(department,chkHOD.checked); 
```

此处记录已成功添加到 Dictionary 中，之后将 Dictionary 绑定到 GridView 之类的

```
gridDept.Datasource=dict;
gridDept.Databind(); 
```

现在插入的记录在gridview中显示得很好。在此之后，我将这些记录存储在我数据库的“StaffDepartments”表中。我在“Staffdepartments”表中有 3 列

```
1.StaffId(PK - has link with the Staff table)
2.DepartmentId(PK - has link with the Department table)
3.IsHOD. 
```

这里记录在数据库中存储良好。将记录添加到数据库中没有问题。

我在这里有一些问题

* ***1.如何在添加之前检查DepartmentId是否已经存在于Dictionary中。2.在编辑人员详细信息时，如何通过选中 Gridview 行中的复选框从字典中删除选定部门。（这里的记录来自数据库，所以当我单击删除按钮时，记录应该在数据库中删除以及）* ***

如果它是一个列表而不是字典，我可以通过

```
int departmentId = (int)gridDept.DataKeys[row.RowIndex].Values["DepartmentId"]; 
```

但是在字典中我不知道如何对键和值对做同样的事情......有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:53:27.860

> 如何在添加之前检查 DepartmentId 是否已经存在于 Dictionary 中。

你*可以*使用这个：

```
if (!dict.Keys.Any(d => d.DepartmentId == department.DepartmentId))
    dict.Add(department,chkHOD.checked); 
```

但这里有些不对劲。如果您的真正键是`DepartmentId`而不是`Department`（对象身份），则应将其设为字典中的键。例如，您可以定义一个辅助类：

```
public class DepartmentBindingHelper
{
    public int DepartmentId { get; set; }
    public Department Department { get; set; }
    public bool Checked { get; set; }
} 
```

然后像这样定义一个字典：

```
var dict = new Dictionary<int, DepartmentBindingHelper>(); 
```

并以这种方式将对象添加到字典中：

```
if (!dict.ContainsKey(department.DepartmentId))
    dict.Add(department.DepartmentId, new DepartmentBindingHelper
    {
        DepartmentId = department.DepartmentId,
        Department = department,
        Checked = chkHOD.checked
    }); 
```

然后您可以只将值集合绑定到网格：

```
gridDept.Datasource = dict.Values;// it's an IEnumerable<DepartmentBindingHelper>
gridDept.Databind(); 
```

并且您从行中检索的代码`DepartmentId`无需更改即可工作：

```
int departmentId = (int)gridDept.DataKeys[row.RowIndex].Values["DepartmentId"]; 
```

# jquery - AJAX 从另一个域获取（Dropbox）

> ID：10187232
> 
> 赞同：1
> 
> 时间：2012-04-17T07:50:45.933
> 
> 标签：jquery, ajax, cross-domain

我正在编写一个简单的 PDF 时事通讯阅读器，为了简单起见，文件和提要托管在 Dropbox 公共文件夹中。我这样做是为了让编写时事通讯的人无需网站管理员即可更新文件和提要。

我遇到的问题是，当我尝试从 Dropbox 中提取提要（原子）时，我遇到了跨域错误。

我了解阻止跨脚本请求背后的目的，但是否可以为这个文件创建非服务器端解决方法和/或异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:53:46.240

也许您应该对此使用 JSONP 方法：

*   [http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)
*   [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

不要将提要存储在 Dropbox 上，存储一个 JSON 文件并使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:02:43.677

据我所知，由于所有安全问题，没有办法做到这一点，这也因不同的浏览器而异。如果您可以做到这一点，那么使用您的服务器进行单点联系通常是最好的方式。

# java - 背包动态规划

> ID：10187234
> 
> 赞同：3
> 
> 时间：2012-04-17T07:51:08.273
> 
> 标签：java, dynamic-programming, knapsack-problem

这是一个典型的背包问题，需要动态规划，并且对物品的供应没有限制。我一直在为我的班级研究这个，我尝试了几个小时的算法，但我仍然没有到达那里。

```
public static int fitBackPack(int[] W, int[] V, int T){
    int[] Opt = new int[T+1];
    Opt[0]=0;
    for (int i=1; i<=T; i++){
        int localMax=0;
        int globalMax=0;
        for (int j=0; j<W.length; j++){
            if (W[j]<=i){
                localMax = (T%W[j]<=W[j]) ?  V[j] : V[j]+Opt[T-W[j]];
                globalMax = (localMax>=globalMax) ? localMax : globalMax;
            }
        }
        Opt[i]=globalMax;
    }
    //debugging purposes
    for (int k=0; k<Opt.length; k++){
        System.out.println("Opt["+k+"] = "+Opt[k]);
    }
    return Opt[T];
} 
```

该方法应该采用 W 和 V 的排序数组，分别包含项目的权重和值，以及表示最大权重的整数 T。对于我的输出，直到 T=21 之前的一切都有效，但是，在那之后它似乎就像一个贪心算法一样工作，这完全不是我所希望的。任何提示将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T01:21:31.683

提示： (x % y <= y) == true

时不时地通过您的条件和测试用例的真值表将帮助您找到这些。最好还是为一般用途和边缘情况设置一些自动化测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T01:40:11.520

由于你的算法表现得像一个贪心算法，你的问题可能在于计算`localMax`（因为贪心算法寻找最高的局部值）。通过查看您的代码，您似乎`localMax`走错了路。提示，见`Math.max()`函数。

# arrays - 如何使 J2ME 中的 char 数组在 C++ 中用作 char

> ID：10187235
> 
> 赞同：1
> 
> 时间：2012-04-17T07:51:11.930
> 
> 标签：arrays, file, java-me, text-files

*标题可能不准确，但我希望阅读这篇文章您能理解我想要做什么。*

我好心困在这里。Java ME 中的新功能，不幸的是，如您所知，它比 Java SE 减少了方法。

我想要完成的是：我有一个 txt，其中的数字用空格分隔。我想把它们放在一个数组中，当一个人将用空格分隔的数字放入一个数组时，它可以“表现得像 C++ 中的一个普通数组”。

现在在 J2ME 中我所做的（使用 Netbeans）是：我把 txt 放到一个流中。后来将流发送到一个字节数组，最后我将它转换为一个字符数组。

假设原始 txt 是：98 2 12 13

部分代码是：

```
InputStream is = getClass().getResourceAsStream("models.txt");
try{

   int st_pk1_len = is.available();

   byte st_pk1[] = new byte[st_pk1_len];

   is.read(st_pk1);

   char st_pk1_char[] = new String(st_pk1).toCharArray();

   System.out.println(st_pk1_char); 
```

我打印的是：98 2 12 13

虽然，我的问题是，当我想访问索引 0 时，我只得到数字 9 而不是 98。如果我试图到达数字 12，我将指针指向 3，但我得到的是一个空白空间，依此类推。

我已经搜索并尝试了不同的方法，但没有找到将其再次转换为原始数字的方法。

这可能是我的一个愚蠢的错误，也可能是我没有想到的。

**这个问题没有简单的解决方案吗？**

* * *

**更新**它现在正在工作！Array 用作“常规”c++ char 数组。如果其他人需要它或遇到我同样的问题，它的外观如下：

```
InputStream is = getClass().getResourceAsStream("st_pk1.txt");
int st_pk1_len = is.available(); 
byte st_pk1[] = new byte[st_pk1_len]; 
is.read(st_pk1); 
char st_pk1_char[] = new String(st_pk1).toCharArray(); 
String PreSplitted = new String(st_pk1); 
String AftSplit[] = Split(PreSplitted, " "); 
```

如果你想检查：`System.out.println(AftSplit[n]);`

对于拆分方法，我使用了 Gnat 帖子中的第二个链接。 [在 J2ME 中拆分文本](https://stackoverflow.com/questions/10120014/split-text-in-j2me)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:12:34.140

您可以将 char 数组视为字符串，其中包含用空格分隔的标记：`new String(st_pk1)`为您执行此操作。

之后，您需要将其拆分，如其他几个 Stack Overflow 问题中所述：

*   [如何在 J2ME 中拆分字符串？](https://stackoverflow.com/questions/200746/how-do-i-split-strings-in-j2me)
*   [在 J2ME 中拆分文本](https://stackoverflow.com/questions/10120014/split-text-in-j2me)

# iphone - 执行 select 语句时出现未知错误

> ID：10187236
> 
> 赞同：1
> 
> 时间：2012-04-17T07:51:18.977
> 
> 标签：iphone, sqlite

在 AppDelegate 中，我检索了数据库的路径：

```
NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDirectory=[paths objectAtIndex:0];
self.sqlFile=[[NSString alloc]init];
self.sqlFile=[documentDirectory stringByAppendingPathComponent:@"AnimalData.sqlite"]; 
```

在我必须从数据库中选择值的视图控制器之一中，代码：

```
NSString *trimString=[appDelegate.mainBreedSelected stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

NSString *selectSQL=[NSString stringWithFormat:@"select breed from AnimalsTable where mainBreed=\"%@\"",trimString];
sqlite3_stmt *selectStatement;
const char *select_stmt=[selectSQL UTF8String];
if (sqlite3_open([appDelegate.sqlFile UTF8String],&database)==SQLITE_OK)
{
    sqlite3_prepare_v2(database,select_stmt,-1,&selectStatement,NULL);
    if (sqlite3_step(selectStatement)==SQLITE_DONE)
    {
        while(sqlite3_step(selectStatement) == SQLITE_ROW)
        {
            NSString *animalBreed = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectStatement, 2)];
            NSLog(@"Breed:%@",animalBreed);
        }
    }
    else
        NSAssert1(0, @"Error while deleting. '%s'", sqlite3_errmsg(database));
    sqlite3_finalize(selectStatement);
    sqlite3_close(database);
}
else
    NSLog(@"Database cannot be opened"); 
```

我收到错误消息：

> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“选择时出错。'未知错误''

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:14:29.387

```
 select breed from AnimalsTable where mainBreed=\"%@\"",trimString 
```

您正在选择表格中的一列，但

```
 NSString *animalBreed = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectStatement, 2); 
```

在那里你想得到第 3 列，所以将 2 更改为 0，如下所示：

```
 NSString *animalBreed = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectStatement, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:44:49.117

我已经更改了代码：

```
if (sqlite3_open([appDelegate.sqlFile UTF8String], &database) == SQLITE_OK) {
    NSLog(@"%@",appDelegate.sqlFile);
    NSString *trimString=[appDelegate.mainBreedSelected stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    NSString *select_sql=[NSString stringWithFormat:@"select breed from AnimalsTable where mainBreed='%@'",trimString];
    const char *sql = [select_sql UTF8String];
    sqlite3_stmt *selectstmt;
    if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {

        while(sqlite3_step(selectstmt) == SQLITE_ROW) {

            NSString *animalBreed = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 0)];
            NSLog(@"Breed:%@",animalBreed);
        }
    }
}
else
    sqlite3_close(database); 
```

它正在工作！感谢上帝！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T08:21:38.300

不应该

```
sqlite3_prepare_v2(database,select_stmt,-1,&selectStatement,NULL); 
```

它应该是

```
sqlite3_prepare_v2(database,[selectSQL UTF8String],-1,&selectStatement,NULL); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T08:24:07.940

试试这个并检查你的数据库路径： -

```
NSString *trimString=[appDelegate.mainBreedSelected stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

sqlite3 *database;

NSString *selectSQL=[NSString stringWithFormat:@"select breed from AnimalsTable where mainBreed ='%@'",trimString];
sqlite3_stmt *selectStatement;
if (sqlite3_open([appDelegate.sqlFile UTF8String],&database)==SQLITE_OK) 
   {
        sqlite3_prepare_v2(database,[selectSQL cStringUsingEncoding:NSUTF8StringEncoding],-1,&selectStatement,NULL);
        if (sqlite3_step(selectStatement)==SQLITE_DONE) 
            {
         while(sqlite3_step(selectStatement) == SQLITE_ROW) 
             {
            NSString *animalBreed = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectStatement, 0)];
            NSLog(@"Breed:%@",animalBreed);
             }
        }
        else
         NSAssert1(0, @"Error while deleting. '%s'", sqlite3_errmsg(database));
         sqlite3_finalize(selectStatement);
        sqlite3_close(database);
    }
    else
     NSLog(@"Database cannot be opened"); 
```

并在 fetch 数据库中检查您的列号`sqlite3_column_text(selectStatement, 0)];`

# asp.net - 尝试读取 Excel 文件 ASP.net 时出现 COM 互操作异常

> ID：10187237
> 
> 赞同：0
> 
> 时间：2012-04-17T07:51:20.223
> 
> 标签：asp.net, excel, exception, com, interop

我有一个非常简单的 ASP.net 4.0 应用程序，它允许用户从一个常见的 Excel 文件中读取数据。Excel 文件位于应用程序本身内，即它位于服务器端根目录下方的文件夹中。

我正在使用以下代码使用 Excel 数据填充数据集：

```
public DataTable GetExcelData(string ExcelFilePath)
    {
        DataTable dt = new DataTable();
        string OledbConnectionString = string.Empty;
        OleDbConnection objConn = null;
        OledbConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + ExcelFilePath + ";Extended Properties=Excel 8.0;";
        objConn = new OleDbConnection(OledbConnectionString);

        if (objConn.State == ConnectionState.Closed)
        {
            objConn.Open();
        }

        string resName = "'";
        string depName = department;
        resName += userLastName + ", " + userFirstName + "'";
        OleDbCommand objCmdSelect = new OleDbCommand("Select * from [" + depName + "$A3:Q10000] where Resource=" + resName, objConn);
        OleDbDataAdapter objAdapter = new OleDbDataAdapter();
        objAdapter.SelectCommand = objCmdSelect;
        DataSet objDataset = new DataSet();
        objAdapter.Fill(objDataset, "ExcelDataTable");
        dt = objDataset.Tables[0];
        addSumRow(dt);
        objConn.Close();
        return objDataset.Tables[0];
    } 
```

在此之后，我将数据集附加到 Gridview，仅此而已。

现在，当我在本地主机上运行应用程序时，显示 Excel 数据没有问题，但是，在部署到我们的 Web 服务器后，应用程序失败并出现以下错误：

> 指定的域不存在或无法联系。
> 
> 说明：执行当前 web >request 期间发生未处理的异常。请查看堆栈跟踪以获取有关错误的更多信息以及它在代码中的来源。
> 
> 异常详细信息：System.Runtime.InteropServices.COMException：指定的域>不存在或无法联系。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。>有关异常起源和位置的信息可以使用 >下面的异常堆栈跟踪来识别。

很感谢任何形式的帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:11:25.593

你可以尝试的几件事

1>禁用匿名访问并启用身份模拟 2>确保 Excel 文件路径正确

# c# - 移动请求检测和重定向到 Asp 中的移动页面（活动服务器页面）

> ID：10187243
> 
> 赞同：1
> 
> 时间：2012-04-17T07:51:43.383
> 
> 标签：c#, javascript, asp.net, vbscript

我有一个已经在 asp（Active Server Pages）中创建的 Web 应用程序，现在该 Web 应用程序模块的一部分被转换为移动站点（通常批准或拒绝发票）所以每当请求来自我想要的移动设备时将请求传输到移动站点，那么我如何在我的 asp 登录中检测到设备，以便我可以将请求重定向到移动登录页面...？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:54:20.433

您将需要查看您获得的用户代理。如[本](https://stackoverflow.com/questions/7034697/how-can-i-detect-if-the-request-is-coming-from-a-mobile-browser-in-my-asp-net-mv)SO Thread 中所述：

```
private static string[] mobileDevices = new string[] {"iphone","ppc"
                                                      "windows ce","blackberry",
                                                      "opera mini","mobile","palm"
                                                      "portable","opera mobi" };

public static bool IsMobileDevice(string userAgent)  
{  
    // TODO: null check
    userAgent = userAgent.ToLower();  
    return mobileDevices.Any(x => userAgent.Contains(x));
} 
```

更新：我对 ASP 了解不多，但我认为[这](https://stackoverflow.com/questions/2836203/detect-mobile-user-agent-from-classic-asp-and-redirect-on-session-start)应该让你走上正轨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:10:11.457

您可以为此使用[Mobile ESP](http://blog.mobileesp.com/?page_id=2)库。甚至移植到[ASP Classic](https://bitbucket.org/mbarrero/mobileesp-classic-asp) ;)。

使用了 ASP Classic 端口几次，效果很好。

# c# - 使用 NCalc 的数学表达式

> ID：10187245
> 
> 赞同：0
> 
> 时间：2012-04-17T07:51:47.710
> 
> 标签：c#, ncalc

我正在尝试理解表达式库 NCalc。

[http://ncalc.codeplex.com](http://ncalc.codeplex.com)

如果我有如下脚本，

```
SET A = CLOSE - OPEN;
SET B = A>0.5 AND CLOSE > HIGH 
If(HIGH > 5, ROC(CLOSE), B) 
```

**CLOSE**是双精度列表， **OPEN**是双精度列表， **HIGH**是双精度列表

AND **ROC**是一个自定义函数，它将任何双精度列表作为输入参数并返回一个列表作为输出。

如果我可以使用 NCalc 库来解析这个脚本，有人可以建议我吗？我在 Codeplex 网站上找不到任何文档。

有什么地方可以获得 NCalc 的帮助文件或文档吗？

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:28:01.763

是的你可以。前两个将非常简单，第三个您只需要创建自定义 IF 和 ROC 函数

# iframe - 是否可以强制用户喜欢应用程序？

> ID：10187250
> 
> 赞同：0
> 
> 时间：2012-04-17T07:52:31.463
> 
> 标签：iframe, facebook-like

是否可以在应用程序（iframe）中添加一个喜欢按钮以确保用户喜欢该应用程序而不是“拥有”该应用程序的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:56:47.797

是的。你可以。但是用户必须安装您的应用程序才能访问用户的喜欢。需要许可`user_likes`。

# python - 在 TestApp 和 Pyramid 中测试 AJAX 帖子

> ID：10187254
> 
> 赞同：2
> 
> 时间：2012-04-17T07:52:47.180
> 
> 标签：python, ajax, pyramid

我正在尝试为 ajax 视图编写测试...视图配置如下：

```
@view_config(name='new', context='resource.Events', renderer='json',
             request_method='POST', xhr=True)
def event_view(self):
    # ... 
```

在我的测试中，我想创建一个 ajax 帖子，所以我尝试：

```
extra_environ = {'X_REQUESTED_WITH' : 'XmlHttpRequest'}
# also tried setting HTTP_X_REQUESTED_WITH

self.testapp.post('/events/new', params=post_params, extra_environ=extra_environ) 
```

但是帖子永远不会被路由到我的视图。request.is_xhr 参数永远不会设置为 True。

应该是某个地方的简单答案，但我在任何文档或其他地方都找不到它。谁能推荐如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:11:21.490

看起来我没有正确封装“xmlhttprequest”。需要是：

```
extra_environ = {'HTTP_X_REQUESTED_WITH' : 'XMLHttpRequest'} 
```

在代码中找到了这个：

webob/request.py 第 472 行

不幸的是，需要为此挖掘代码。也感到惊讶的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-30T07:58:51.793

在我的情况下，在发布请求中设置**xhr=True就足够了。**

```
self.testapp.post('/events/new', params=post_params, xhr=True) 
```

# php - preg_replace 正则表达式不匹配

> ID：10187259
> 
> 赞同：1
> 
> 时间：2012-04-17T07:53:04.513
> 
> 标签：php, regex

我有一个字符串

```
abcd : 12
<br />
cc : 25
<br />
some : 0
<br />
make : 02.36
<br />
Kk : 11.00
<br />
mm : 0 
```

我想删除所有有`: 0`

我试试

```
$ragid  = "|<br />s*(.*?) : 0 s*(.*?)<br />|i"; 
$text=preg_replace($ragid,"",$text); 
```

但它替换了所有字符串的开头`<br />`和结尾`<br />`

它不符合我想要的完美。有什么解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:05:32.900

This should do it:

```
preg_replace('/(^|<br\s*\/?>)\s*(.*?)\s*:\s*0(\s+|$)/i', '', $str); 
```

**EDIT**
And [here is the output](http://pastie.org/private/mp4xrqcixtj06qrpmxtmtg) after doing a quick test.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:48:03.777

如果您使用 PCRE 的多行模式（`m`-modifier ），每行很容易：

```
~^.*$~m 
```

这将使`^`行首和行尾匹配`$`。

`: 0`因此，要匹配末尾包含的所有行：

```
~^(.*: 0$\n?)~m 
```

如果您需要更多的行尾兼容性，您可以使用`\R`而不是`\n`使行尾可配置。该选项`(*ANYCRLF)`还暗示了内容`^`和`$`含义：

```
~(*ANYCRLF)^(.*: 0$\R?)~m 
```

例子：

```
$str = <<<STR
abcd : 12
<br />
cc : 25
<br />
some : 0
<br />
make : 02.36
<br />
Kk : 11.00
<br />
mm : 0
STR;

echo preg_replace('~(*ANYCRLF)^(.*: 0$\R?)~m', '', $str); 
```

输出：

```
abcd : 12
<br />
cc : 25
<br />
<br />
make : 02.36
<br />
Kk : 11.00
<br /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:01:10.647

我认为您正在寻找的表达是这样的：`/.* : 0\n/i`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T08:08:16.810

干得好：

```
$text = preg_replace('~<br />\s[^:]* : 0\s?~', '', $text); 
```

# mysql - 在语句末尾使用“IDENFIFIED BY”时出现mysql错误

> ID：10187262
> 
> 赞同：1
> 
> 时间：2012-04-17T07:53:14.317
> 
> 标签：mysql, mysql-error-1064

我正在按照说明在 MySQL-Client-Version 中设置数据库的权限：5.1.61

这是我应该输入的语句：

```
GRANT SELECT, INSERT, DELETE, UPDATE, CREATE, DROP, ALTER, INDEX on 'databasename'.* 
TO 'username'@'localhost' IDENFIFIED BY 'password'; 
```

显然我改变了名字，但保留了引号。

错误是 - 错误 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 ''databasename' 附近使用的正确语法。* TO 'username'@'localhost' IDENFIFIED BY 'password'' 在第 1 行

这里出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T07:54:26.613

使用`IDENTIFIED BY`而不是`IDENFIFIED BY`.

# mysql - 如何在sql select查询中添加整数值？

> ID：10187276
> 
> 赞同：0
> 
> 时间：2012-04-17T07:54:31.703
> 
> 标签：mysql

我正在做一个我的 sql 查询所在的项目

```
SELECT Name 
FROM techer_reg 
LIMIT 3 
```

**如何添加一个整数值而不是 3？**

从某种意义上说，这个选择查询应该是这样的：

```
SELECT Name 
FROM techer_reg 
LIMIT (My integer value) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T07:55:42.657

尝试使用参数：

```
using (SqlConnection con = new SqlConnection(strConnect))
{
con.Open();
int myLimit = 4;
using (SqlCommand com = new SqlCommand("SELECT Name FROM techer_reg LIMIT @LM", con))
    {
    com.Parameters.AddWithValue("@LM", myLimit);
    using (SqlDataReader reader = com.ExecuteReader())
        {
        while (reader.Read())
            {
            int id = (int)reader["iD"];
            string desc = (string)reader["description"];
            Console.WriteLine("ID: {0}\n    {1}", iD, desc);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:11:45.527

程序：

```
DELIMITER $

create PROCEDURE getData(limit INT)
begin
   SET @limit= limit;
   PREPARE exec_statment FROM "SELECT Name FROM techer_reg LIMIT limit ?;";
   EXECUTE exec_statment USING @limit;
   DEALLOCATE PREPARE exec_statment;
end$

DELIMITER ; 
```

并使用

```
call getData(3) 
```

# facebook - Facebook 应用政策：激励用户使用 Facebook 社交渠道

> ID：10187278
> 
> 赞同：0
> 
> 时间：2012-04-17T07:54:32.947
> 
> 标签：facebook

这可能是一个有争议的话题。

我有一个刚刚被 Facebook 封禁的应用，被举报该应用违反了 Facebook 应用政策（VI.1）

> 您的应用程序将内容隐藏或激励用户使用 Facebook 社交渠道。(FPP IV.1)

这是 Facebook 应用程序流程：

1.  单击“页面选项卡应用程序”图标
2.  进入登陆页面，查看用户是否安装App；如果没有安装，请安装应用程序
3.  进入查看页面，查看用户是否喜欢某个Fans页面，分享到墙&发送好友请求；如果没有，用户将不允许进入下一步。
4.  下一页是问卷；用户必须完成问卷才能进入下一步
5.  最后一页是感谢页面

整个想法是，用户必须完成流程才能进入幸运抽奖（奖品将颁发给获胜者）。

我的问题是，如何避免违反规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:35:36.830

这很简单......

你告诉用户他**必须**喜欢一个页面，分享到他的墙上并邀请他的朋友，所有这些都是你“强迫”用户通过才能使用你的应用程序的社交渠道。

您可以要求您的用户喜欢您的页面，您可以要求他们邀请他们的朋友（或者更好的是在他们的朋友加入时为他们提供更好的体验），但您不能（这是违反政策的）激励他们这样做说“这样做或不使用该应用程序”

# jquery - $(这个 +"选择器") ？$("img",this) 可能吗？

> ID：10187280
> 
> 赞同：35
> 
> 时间：2012-04-17T07:54:39.357
> 
> 标签：jquery

我正在尝试在 $(this) 选择器中“选择”一个 img。我知道我可以通过使用找到它，`.find('img')`但这可能吗：

`$("img",this)`?

做到这一点的最佳方法是什么？

原来代码

```
<a class="picture" href="test.html">
    <img src="picture.jpg" alt="awesome">
</a> 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-04-17T07:58:58.603

> 做到这一点的最佳方法是什么？

两者`$(this).find('img')`和`$('img', this)`是等价的。

从文档：

> 在内部，选择器上下文是用 .find() 方法实现的，所以 $('span', this) 等价于 $(this).find('span')。

[http://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T07:57:16.860

这是一种完美合理的做法。

所以你会喜欢：

```
$('a').click( function() {
   //if the element dosent change you can use this
   //var src = $('img', this).attr('src');
   //else use $(this)
   var src = $('img', $(this)).attr('src');
   alert(src);
   return false;
}); 
```

见：http: [//jsfiddle.net/xYmwV/](http://jsfiddle.net/xYmwV/)

实际上没有区别，因为在这两种方法中，您都加载了 dom 元素并对其进行搜索。你的方式当然是“更干净”和更简单，但可能更令人困惑:)

一种更快的方法是`$(this).children()`因为它不必搜索元素，而是直接在 DOM 中搜索。但它消除了脚本的灵活性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-17T07:59:14.583

是的，你可以这样做......无论如何它们是等价的，所以这只是你的“句法品味”的问题：

> 在内部，选择器上下文是用 .find() 方法实现的，所以 $('span', this) 等价于 $(this).find('span')。

[http://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-17T08:01:07.183

没关系，选择你喜欢的那个，这主要是一个风格的选择。

jQuery`$(selector, context)`通过在幕后执行`$(context).find(selector)`or（如果`context`已经是 jQuery 实例）来处理表单`context.find(selector)`，因此理论上`find`表单的效率***稍高***一些，但实际上并不重要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T07:57:25.843

为什么不能用`.find('img')`？它对我有用：http: [//jsfiddle.net/nnmEY/](http://jsfiddle.net/nnmEY/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T07:57:35.280

> 我正在尝试在 $(this) 选择器中“选择”一个 img。

```
var myImg = $(this).find("img"); 
```

# c# - 覆盖表适配器中的连接 - UpdateCommandConnection 方法

> ID：10187282
> 
> 赞同：0
> 
> 时间：2012-04-17T07:54:48.017
> 
> 标签：c#, visual-studio-2008, data-access-layer, tableadapter

我需要覆盖新表适配器中的连接，因为它们当前正在使用开发期间使用的连接字符串。（VS2008）。

例如，以现有的表适配器 Orders 为例，连接字符串会被覆盖：

```
ta.UpdateCommandConnections(conn);
ta.OrderInsert(OrderId, .... etc etc) 
```

我的问题是如何创建 UpdateCommandConnections 方法？看起来我好像错过了创建表适配器的一步 - 通过设计器......

```
using DataLibrary.DAL.dalOrdersTableAdapters;
using System;

namespace DataLibrary.DAL {

    partial class dalOrders
    {
        public class GlobalQueriesTableAdapter : QueriesTableAdapter
        {
            public void UpdateCommandConnections(string sConnString)
            {
                foreach (System.Data.IDbCommand idbCommand in CommandCollection)
                    idbCommand.Connection.ConnectionString = sConnString;
            }
        }
    }
} 
```

当我手动将上面的 UpdateCommandConnection 函数（我还必须在该过程中添加 .cs 文件）添加到我自己的一个表适配器时，它无法识别由设计器添加的 CommandCollection 或 QueriesTableAdapter（在现有的 Orders 中）它的定义在 dalOrders.Designer.cs 文件中）。

创建表适配器时我错过了哪些步骤？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:58:32.120

只是为了澄清事情...

在上面的示例中，QueriesTableAdapter 是表适配器的名称，因此将其修改为我的表适配器的名称（或将我的表适配器重命名为 QueriesTableAdapter）就可以了。

# c++ - 以下代码中有哪个错误？

> ID：10187283
> 
> 赞同：-1
> 
> 时间：2012-04-17T07:54:53.983
> 
> 标签：c++, string

这是一小段代码，用于测试给定字符串中是否有空格

```
#include<string>
#include<iostream>
#include<cctype>
using namespace std;
//performs string operations
void string_get()
{
    string text;
    cout<<" enter string "<<endl;
    getline(cin,text);
    string::size_type position=text.find(' ');
    if(position!=string::npos)
    {
        if(text.find(' ',position+1)!=string::npos)
        {
            cout<<" contains at least two spaces "<<endl;

        }
        else
        {
            cout<<" contains less then two spaces "<<endl;

        }
            }

    else
    {

        cout<<" no spaces "<<endl;
    }

    }

int main()
{

    string_get();

    return 0;
} 
```

当我运行这段代码并输入一些字符串时，它工作正常，但是有这样的问题，即它说这段代码中有错误，我被要求修复它，但我看不到哪个错误在这里？也许是字符串是NULL？还是字符串不包含任何空格？我必须考虑哪种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:20:55.663

问这个问题的人可能认为`pos`论据`find`需要在范围内`[0, length)`。然而，从标准 21.3.6.3/2 来看，情况并非如此：

> 返回： 如果函数可以确定 xpos 的此类值，则返回 xpos。否则，返回 npos。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:29:18.003

有一个小错误。可能没有可用的输入。您没有检查`getline(cin,text);`. 这不太可能发生；你需要有例如输入重定向和一个空的输入文件。

# javascript - 下拉而不是href

> ID：10187286
> 
> 赞同：0
> 
> 时间：2012-04-17T07:55:11.010
> 
> 标签：javascript, jquery, html, drop-down-menu, href

我想将此输入更改为下拉菜单。

```
<a href="#" onclick="$('#pb1').progressBar(5);">5</a> |
<a href="#" onclick="$('#pb1').progressBar(60);">60</a> |
<a href="#" onclick="$('#pb1').progressBar(100);">100</a> 
```

下拉示例...（不起作用）

```
<form action="#" name="progress" onclick="$('#pb1').progressBar(10);">
   <select name="dropdown">
    <option name="radOne" value="$('#pb1').progressBar(5);" selected>5</option>
    <option name="radOne" value="$('#pb1').progressBar(60);">60</option>
    <option name="radOne" value="$('#pb1').progressBar(100);">100</option>
   </select>
</form> 
```

谁能帮我改变这个结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:57:26.557

这就是你应该这样做的方式。

```
 <select name="dropdown" onchange="$('#pb1').progressBar(this.value);">
    <option name="radOne" value="5" selected>5</option>
    <option name="radOne" value="60">60</option>
    <option name="radOne" value="100">100</option>
   </select> 
```

即使像 show 一样，也不鼓励使用内联事件处理程序。更好的方法是

```
document.getElementByid("selectboxid").onchange = function() {
    $('#pb1').progressBar(this.value);
}; 
```

但是，既然你已经在使用 jQuery

```
$("#selectboxId").change(function() {
    $('#pb1').progressBar(this.value);
}); 
```

# python - 在 Python 2.7.3 中使用字典作为 switch 语句

> ID：10187288
> 
> 赞同：3
> 
> 时间：2012-04-17T07:55:20.430
> 
> 标签：python, switch-statement, dictionary

`switch`我喜欢通过将布尔值设置为键来使用字典作为语句的一种形式。例子：

```
>>> def f(a):
...      return {True: -a, a==0: 0, a > 0: a}[True]
... 
>>> f(-3)
3
>>> f(3)
3
>>> f(0)
0 
```

该键`True`用作`else`/`default`情况，仅当没有其他键被评估为时才返回`True`。我猜这假设了某种迭代字典的评估顺序。

[现在查看Python 团队](http://mail.python.org/pipermail/python-list/2012-April/1290792.html)最新发布公告的以下摘录，了解最新版本的分支 2.6、2.7、3.1 和 3.2：

> 哈希随机化导致 dicts 和 set 的迭代顺序是不可预测的，并且在 Python 运行中会有所不同。Python 从未保证 dict 或 set 中键的迭代顺序，建议应用程序永远不要依赖它。从历史上看，dict 迭代顺序在不同版本之间并没有经常改变，并且在 Python 的连续执行之间始终保持一致。因此，一些现有的应用程序可能依赖于 dict 或 set 排序。

这是否意味着不再可能使用 dicts 作为 switch 调用？或者也许我应该使用任何其他类（比如`OrderedDict`或其他东西）？或者也许我完全关闭了，它根本不应该影响这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T08:00:54.393

您误解了此代码的工作原理。

您的字典只有两个键：`True`和`False`。键可能有多个冲突值，`True`但在字典初始化时会得到解决。

字典查找没有迭代。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T08:00:56.203

哈希随机化不会影响您的应用程序。它应该只影响依赖于字典中键的迭代顺序的应​​用程序。

也就是说，我发现你的技术比简单的`if..elif`链更晦涩，效率也更低（构建一个新的字典并不便宜）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T08:00:16.730

您使用字典对条件进行哈希处理的方式不会受到排序的影响。您严格使用键来访问字典，并且顺序对您来说并不重要，因为您没有迭代键/值。因此，您对字典的特定用法不受 Python 的字典哈希随机化的影响。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-17T08:06:33.113

假设字典是按从左到右的顺序构建的，这可能仍然有效。关于无序迭代的要点是关于构建字典后的遍历，而不是构建过程本身，无论如何，您是在对其进行索引，而不是对其进行迭代。

但坦率地说，依赖这种行为并不是一个好主意。它很脆弱，因为它依赖于假定的行为（尽管规范中可能有一些东西可以保证这一点）并且非常令人困惑，这在很大程度上是因为案例的评估顺序实际上是从右到左（即右-最真实的案例获胜）。一个更容易理解的解决方案如下：

```
return ( a if a > 0  else
         0 if a == 0 else
        -a) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-17T08:10:13.817

首先，意识到您的代码或多或少等同于：

```
def f(a):
    d = {}
    d[True] = -a
    d[a==0] = 0
    d[a>0] = a
    return d[True] 
```

考虑到这一点，您的问题的答案变得显而易见。

你为什么要为这种晦涩难懂的语法而不是更简单的东西而烦恼？ *甚至*这个更具可读性：

```
def f(a):
    return a if a > 0 else 0 if a == 0 else -a 
```

您似乎误解了您的代码真正在做什么的事实应该清楚地表明您做错了什么。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-17T08:04:29.960

This is a very dirty code, the line with the dictionary takes minutes to read (although I work with Python for 3 years), and this will be very hard to debug. The next developer (read: yourself in half a year) will not be able to read this.

switch construct can be replaced with a dict of callbacks, if you need them:

```
 {value1: one_func, value2: another_func, value3: third_func} 
```

If you need only True/False, you don't need any structure:

```
return one_func() if check else another_func() 
```

In many cases, switch can be replaced with a chain of if ... return:

```
if check:
    return one_func()

return another_func() if another_check else third_func() 
```

All these are much more readable and debuggable.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-17T08:01:40.960

您没有在示例中使用迭代，因此您的代码是安全的。

但是，您的解决方案有点奇怪，`boolean`因为密钥不是很可读。

你为什么不试试：

```
switch = {
   choice1: func1
   choice1: func2
   ...
} 
```

和：

```
switch[variable]() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-17T08:07:41.303

只有在您执行以下操作时，这才会影响您：

```
 mydict.values()[0] 
```

并依靠这一点始终保持相同的价值。您引用的文档说不能保证会发生这种情况。

但是，您的代码有一个问题需要考虑，这与短路有关。如果你这样做：

```
if a == 0:
     return 0
elif a > 0:
     return a
else:
     return -a 
```

或者，更简洁（但可以说可读性较差）`return 0 if a == 0 else a if a > 0 else -a`，并且 a 为 0，则`a > 0`永远不会被评估（即使你没有`return`超过它也不会被评估）。*您的字典每次*都需要评估您给它的每个键作为条件。尝试使用字典调度而不是链式`if`s 的唯一原因是效率，但是在键不是恒定的并且整个 dict 可预计算的情况下，您可能会输得很惨。

# spring-data-mongodb - 来自 spring mongo 的 dropDatabase

> ID：10187291
> 
> 赞同：2
> 
> 时间：2012-04-17T07:55:29.863
> 
> 标签：spring-data-mongodb, mongodb-java

我想在我的集成测试之前在我的 mongo 中删除数据库。是否可以通过 spring mongo 做到这一点？

如果它现在不可用，是否可以从 spring mongo 以某种方式获取 com.mongodb.DB 对象，所以我可以调用它的 dropDatabase() ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-07-04T00:44:07.840

以防万一有人需要信息，请注意自 3.0 以来 MongoDatabase api 中没有 dropDatabase() 方法，因此您必须改为编写以下代码：

`mongoTemplate.getDb().drop();`

[>>来源<<](http://api.mongodb.com/java/current/com/mongodb/client/MongoDatabase.html "见 MongoDatabase api")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-05T06:12:48.473

我正在使用的一个稍微干净的解决方案是使用 MongoDbFactory 对象，如下所示：

```
mongoDbFactory.getDb().dropDatabase(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T15:09:19.580

终于找到了！

从 mongodb 外壳：

```
> db.dropDatabase
function () {
    if (arguments.length) {
        throw "dropDatabase doesn't take arguments";
    }
    return this._dbCommand({dropDatabase:1});
} 
```

结合[mongoOperations 的 executeCommand](http://static.springsource.org/spring-data/data-mongo/docs/current/api/org/springframework/data/mongodb/core/MongoOperations.html#executeCommand%28java.lang.String%29)：

```
@Autowired private MongoOperations ops;

@BeforeMethod
public void dropDb() {
    this.ops.executeCommand("{dropDatabase:1}");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-10T07:15:39.920

mongoTemplate.getDb().dropDatabase();

# scheduled-tasks - 任务计划程序启动任务的问题

> ID：10187292
> 
> 赞同：67
> 
> 时间：2012-04-17T07:55:31.447
> 
> 标签：scheduled-tasks

我在我的 Windows 2008 R2 机器上安排了一个任务，但它未能触发并在日志（事件日志）中出现以下错误。

**错误：**

任务计划程序无法为用户“SAFFRON3\cb_admin”启动“\Hyatt_International_Distribution”任务。附加数据：错误值：2147943645。

由于“LUAIsElevatedToken”中发生错误，任务计划程序无法启动任务引擎“”进程。命令=“taskeng.exe”。附加数据：错误值：2147943645。

**完整的错误如下：**

日志名称：Microsoft-Windows-TaskScheduler/Operational Source：Microsoft-Windows-TaskScheduler 日期：2012 年 4 月 16 日上午 9:59:59 事件 ID：101 任务类别：任务启动失败级别：错误关键字：
用户：系统计算机： xyz 描述：任务计划程序无法为用户“SAFFRON3\cb_admin”启动“\Distribution”任务。附加数据：错误值：2147943645。 **事件 Xml：**

```
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
  <System>
    <Provider Name="Microsoft-Windows-TaskScheduler" Guid="{de7b24ea-73c8-4a09-985d-5bdadcfa9017}" />
    <EventID>101</EventID>
    <Version>0</Version>
    <Level>2</Level>
    <Task>101</Task>
    <Opcode>101</Opcode>
    <Keywords>0x8000000000000000</Keywords>
    <TimeCreated SystemTime="2012-04-16T14:59:59.950Z" />
    <EventRecordID>101476</EventRecordID>
    <Correlation />
    <Execution ProcessID="336" ThreadID="1216" />
    <Channel>Microsoft-Windows-TaskScheduler/Operational</Channel>
    <Computer>xyz</Computer>
    <Security UserID="S-1-5-18" />
  </System>
  <EventData Name="TaskStartFailedEvent">
    <Data Name="TaskName">\Distribution</Data>
    <Data Name="UserContext">SAFFRON3\cb_admin</Data>
    <Data Name="ResultCode">2147943645</Data>
  </EventData>
</Event> 
```

任务设置为：如果用户登录或未登录，则运行，具有最高权限，电源：在交流电源时启动，允许任务按需运行。

该任务几乎每天都正确运行，但昨天失败了。有什么特别的原因吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-04-17T08:03:09.883

On properties,

Check whether radio button is selected for

```
Run only when user is logged on 
```

If you selected for the above option then that is the reason why it is failed.

so change the option to

```
Run whether user is logged on or not 
```

**OR**

In other case, user might have changed his/her login credentials

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2015-03-12T14:48:49.853

我的任务设置为`Run only when user is logged on`，即使我登录并手动启动它，它对我来说也失败了。用户已经设置为我了。无需更改密码等。

我通过单击“更改用户”并再次选择自己来解决它。

我怀疑这可能是由 AD 更改用户 SID 或某种程度引起的。也许 IT 正在 AD 中进行一些用户管理，谁知道呢。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-26T14:39:09.193

我通过打开 exe 文件本身的属性解决了这个问题。在“兼容性”选项卡上，有一个权限级别复选框，显示“以管理员身份运行”

*即使我的帐户具有管理权限，当我从任务计划程序启动它时它也不起作用。*

我取消选中该框并再次从调度程序启动它并且它工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T19:12:25.873

据我所知，您需要为域帐户提供适当的“用户权限”，例如“作为批处理作业登录”。您可以在当地政策中查看。此外，您可能有一个域 GPO 正在覆盖您的本地策略。我敢打赌，如果您将此域帐户添加到该计算机的本地管理员组中，您的问题就会消失。几篇文章供您检查：

[http://social.technet.microsoft.com/Forums/en/windowsserver2008r2general/thread/9edcb63a-d133-45a0-9e8c-f1b774765531](http://social.technet.microsoft.com/Forums/en/windowsserver2008r2general/thread/9edcb63a-d133-45a0-9e8c-f1b774765531) http://social.technet.microsoft.com/Forums/lv/winservergen/thread/68019b24 -78a5-4db0-a150-ada921930924 [http://sqlsolace.blogspot.com/2009/08/task-scheduler-task-does-not-run-error.html?m=1](http://sqlsolace.blogspot.com/2009/08/task-scheduler-task-does-not-run-error.html?m=1) http://technet.microsoft.com /en-us/library/cc722152.aspx

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-05T18:57:23.073

*   右键单击任务计划程序中的任务
*   单击“操作”选项卡
*   点击编辑
*   删除“开始于”文本框中路径周围的引号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-10T08:50:14.087

检查您是否正在计划任务以触发可执行 (.exe) 或批处理 (.bat) 文件。如果您已计划打开任何其他文件（例如 .txt 或 .docx 文件），则该文件不会打开。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-30T08:00:17.393

我遇到了同样的问题。我尝试了兼容性选项，但在 Windows 10 中它不显示兼容性选项。以下步骤为我解决了这个问题：

1.  我确保运行任务的帐户对要执行的文件具有完全访问权限。（执行了任务，仍然没有运行）
2.  我`taskschd.msc`是管理员
3.  我添加了运行任务的帐户（无论是否记录）
4.  我执行了任务，现在它工作了！

`taskschd.msc`因此，即使我的帐户是管理员帐户，以某种方式将任务设置为普通用户也不起作用。

希望这可以帮助任何有同样问题的人

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-09T11:55:55.100

我的任务也未能启动。

我不仅指定了可执行文件的路径，还指定了可执行文件的文件夹路径（选项卡“操作”|编辑|文本框“开始于”）来解决它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-09T12:46:18.793

谢谢大家，我也有同样的问题。我有一项任务通过未链接到特定人员的通用用户帐户运行。这个用户以某种方式注销了虚拟机，当我试图修复它时，我以我的身份而不是那个用户登录。

使用该用户重新登录可以解决问题！

# git - 显示提交 A 已打开且未提交 B 的所有分支？

> ID：10187302
> 
> 赞同：7
> 
> 时间：2012-04-17T07:56:19.413
> 
> 标签：git, branch

我有多个分支，并且发现了一个提交 A，它在系统中引入了一个错误。这随后由其中一个分支上的提交 B 修复并合并回 master，但当时它并没有被挑选到所有有问题的分支。

我想知道是否有一个命令会显示所有有提交 A 但没有提交 B 的违规分支？

我一直在使用以下内容来确定分支上是否存在提交

```
$ git branch -r --contains=A 
```

但我想尝试添加到其中以包含类似的内容

```
$ git branch -r --contains=A ^--contains=B 
```

作为旁注，我已经检查并且没有其他包含相同更改的提交，即它没有被挑选到任何其他分支，但是一些分支有提交 B，它们在合并后与 master 分歧和一些不要在引入提交 B 之前它们已经存在的地方。

此外，如果已修复问题的提交（在本例中为提交 B）被挑选到已经提供不同提交 SHA 的多个分支上，则检查多个提交的能力将很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:01:18.473

你有没有试过这个：

```
diff <(git branch -r --contains=A) <(git branch -r --contains=B) 
```

它远非完美，但它可能会有所帮助。

# c# - Reactive Extensions 安装包不包含 ReactiveUI 库

> ID：10187303
> 
> 赞同：-2
> 
> 时间：2012-04-17T07:56:21.503
> 
> 标签：c#, system.reactive, reactiveui

我想尝试 ReactiveUI，但是 Rx 安装包不包含 ReactiveUI。我猜 ReactiveUI 在一些独立的安装包中，但我找不到它。任何人都可以分享 Microsoft 是否不再支持 ReactiveUI 的信息吗？如果是，请给我一个 ReactiveUI 库的链接。

先感谢您！

UPD：我在[http://www.reactiveui.net/](http://www.reactiveui.net/)上找到了一个示例应用程序。它包含 ReactiveUI dll，但我想获得官方的 ReactiveUI 构建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T18:36:43.277

ReactiveUI 不是 Microsoft 项目 - 获取 ReactiveUI 官方二进制文件的最佳方式是通过 NuGet 包，该包还将引入正确版本的 Reactive Extensions。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T08:40:59.427

如果您访问您提到的网站[http://www.reactiveui.net/](http://www.reactiveui.net/)，底部有一个“下载”按钮。这为您提供了一个示例应用程序*和*ReactiveUI 库。

您可以在下面找到您提到的 dll`ReactiveUI 2.2.0.0 Sample\ReactiveUI.Sample\ReactiveUI.Sample\bin\Debug\`

或者，当然，从他们的[github](http://github.com/xpaulbettsx/ReactiveUI)获取源代码并自己编译它们。

PS我发现所有这些都没有事先了解这个库。也许这更像是谷歌的一个问题，而不是这个网站？

# java - 为什么 ormlite 有自己的注解？

> ID：10187304
> 
> 赞同：1
> 
> 时间：2012-04-17T07:56:22.853
> 
> 标签：java, jpa, ormlite

从我在 ormlite 中看到的内容来看，它已经实现了它的注释以及 JPA 标准注释。首先，设计新的注释集的原因是什么？其次，如何使用标准注释，如`@Entity`等，而不是 ormlite 特定的注释。现在，我没有为这些实体定义错误。我需要一个jar文件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T17:32:16.217

@DataNucleus 是正确的。 [ORMLite](http://ormlite.com/)不是完全兼容的 JPA 实现。ORMLite 的许多特性不能很好地与 JPA 注释映射，并且更容易创建我自己的集合。JPA 也是一个*非常*大的规范，我不希望大部分注释生成`UnsupportedOperationException`或突然失败。最后，我试图编写一个具有 0 个依赖项的 ORM 库。

综上所述，我对改进 ORMLite 的 JPA 兼容性*很*感兴趣，所以如果您对如何使其更好有任何建议，请将它们发送到[开发人员邮件列表](https://groups.google.com/forum/?fromgroups#!forum/ormlite-dev)。我很想改进它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T09:02:14.563

因为它不是真正的 JPA 实现，只是为了方便而使用 JPA 注释。显然，通过使用它，您会失去 JPA 本身提供的可移植性，但是对于非常特定的情况，它可能具有一些优势

# javascript - canvas.toDataURL() 抛出安全异常，尽管图像是本地的

> ID：10187306
> 
> 赞同：2
> 
> 时间：2012-04-17T07:56:39.180
> 
> 标签：javascript, jquery, security, google-chrome, canvas

这是我处理向画布添加图像的代码。这样做是创建一个 Uploadify 实例，它将 SVG 文件上传到本地 [root]/uploads 文件夹。然后它将该图像广告到三个不同尺寸的画布上。绝不会使用 http:// 地址引用图像。对图像路径的所有引用都是~~本地~~相对的。

```
 var folder = '/uploads';
    var fullpath = folder + '/' + $('input#canonical').val() + ".svg";
    $('#file_upload').uploadify({
        'uploader': '/uploadify/uploadify.swf',
        'script': '/uploadify/uploadify.php',
        'cancelImg': '/uploadify/cancel.png',
        'folder': folder,
        'fileExt': '*.svg',
        'fileDesc': 'SVG files',
        'scriptData':   {'rename': $('input#canonical').val() + ".svg"},
        'onAllComplete': function(){
            $('#upload-wrap').hide();

            var img = new Image();
            img.onload = function(){

                var ar = img.width / img.height;
                var swidth = ( ar >= 1 ) ? small : small * ar;
                var mwidth = ( ar >= 1 ) ? medium : medium * ar;
                var lwidth = ( ar >= 1 ) ? large : large * ar;

                var sheight = ( ar <= 1 ) ? small : small / ar;
                var mheight = ( ar <= 1 ) ? medium : medium / ar;
                var lheight = ( ar <= 1 ) ? large : large / ar;

                var sc = sCanvas.getContext('2d');    
                var mc = mCanvas.getContext('2d');   
                var lc = lCanvas.getContext('2d');    

                scObj.css({width:swidth, height: sheight});
                mcObj.css({width:mwidth, height: mheight});
                lcObj.css({width:lwidth, height: lheight});

                sc.drawImage(img,0,0,swidth,sheight);
                mc.drawImage(img,0,0,mwidth,mheight);
                lc.drawImage(img,0,0,lwidth,lheight);
            };
            img.src = fullpath;
        }
    }); 
```

当我尝试调用 canvas.toDataUrl() 时，我`Uncaught Error: SECURITY_ERR: DOM Exception 18`在控制台中遇到了问题。有没有办法解决这个问题？如果您需要更多信息，请与我们联系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T14:41:40.697

> 绝不会使用 http:// 地址引用图像。对图像路径的所有引用都是本地的。

这就是问题所在。您不能以这种方式使用本地文件。这里有一点[了解 Canvas 图像安全规则。](http://simonsarris.com/blog/480-understanding-the-html5-canvas-image-security-rules)

如果允许画布将本地文件绘制到自身，那么它可能会绘制本地驱动器上的文件（对您私有），获取其 imageData，并将该文件上传到服务器，从而有效地窃取图像。我们不能这样，所以“本地文件破坏原始干净”规则已经到位。

您实际上可以在 Chrome 中关闭该规则：

`C:\Users\theUser\AppData\Local\Google\Chrome\Application\chrome.exe --allow-file-access-from-files`

但这应该只用于调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T07:28:06.827

这与此处描述的问题相同：[Rasterizing an in-document SVG to Canvas](https://stackoverflow.com/questions/8158312/rasterizing-an-in-document-svg-to-canvas)

基本上，将任何 SVG 添加到画布都会污染画布，并且无法再在其上调用 toDataURL()。显然，Firefox 12 修复了这个问题，但 Chrome 尚未修复它。

# android - 延迟加载（异步）图像时如何防止图库对齐页面

> ID：10187310
> 
> 赞同：1
> 
> 时间：2012-04-17T07:56:57.860
> 
> 标签：android, image, asynchronous, gallery, lazy-loading

我遇到了一个大问题，我[在 ListView 中使用延迟加载图像](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)来在显示带有一些文本和图像的视图的图库上的基本适配器上实现延迟加载。图库已启用分页，并且已禁用投掷系统。

```
@Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
        float distanceY) {
    // TODO Auto-generated method stub
    return false;
} 
```

如果我开始滚动并且下一个视图中有图像，则图库将在图像加载时自行重置（它将捕捉/页面到占据大部分屏幕的视图）。画廊无法使用，您必须非常努力才能在图像加载和重置发生之前进入下一个视图。我已经实现了一个按钮系统来切换到下一个视图，但我需要快速解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:14:15.273

看到这个问题：[当从它的孩子请求无效时，Gallery 上的奇怪动画](https://stackoverflow.com/questions/8527006/weird-animation-on-gallery-when-a-invalidate-is-requested-from-its-children)

我们所做的是缓存图像并在可用时加载它们，如果没有则使用`AsyncTask`. 但是，如果这对您不起作用，那么该问题的解决方案可能会。

# php - 哪个语句是内存/处理器高效的？

> ID：10187320
> 
> 赞同：0
> 
> 时间：2012-04-17T07:57:38.843
> 
> 标签：php, memory-management, processing-efficiency

我没有更好的理由来改写这个问题，你可能会建议我一个。大多数时候，我在 php 中重复使用一个变量，我想知道哪个是内存/处理器高效的。例如

**案例A**

```
 $string_var ='1,2,4,5,6,7,8';
 $array_var  =explode(',',$string_var); 
```

**案例B**：重复使用相同的变量（字符串变量并重新声明为数组对象）

```
 $array_var ='1,2,4,5,6,7,8';
 $array_var  =explode(',',$array_var); 
```

我的问题不是从代码可读性的角度来看。我想知道哪一种在内存和处理器利用率方面是有效的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:02:48.800

```
$string_var ='1,2,4,5,6,7,8';
$array_var  =explode(',',$string_var); 
```

这将使用更多内存将字符串和数组都保留在内存中。如果您覆盖原始变量，则先前存储的内容将在某个时候被垃圾收集，从而释放内存。在实践中，它可能没有任何真正的区别，因为这些值不会立即被垃圾收集，如果你的变量有合理的范围，它们应该很快就会超出范围。

它在*处理时间*上几乎没有区别。

选择在逻辑上更有意义的事情。如果您不再需要`$string_var`，则无需将其作为单独的变量保留。尽量整理你的命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:01:13.193

每次创建新变量时，都会为该变量分配一点内存。因此 2 个变量将占用大约两倍的内存。最好使用与仅使用 1 个变量所需的内存相同的变量**案例 B。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:01:46.163

它们都会以相同的方式影响处理器。**但是，案例 B**中的内存使用量会更低，因为您会将现有变量更新为新数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T08:06:59.760

如果这不是 PHP，而是像 C 这样的“低级”语言，答案将非常简单：

1.  速度上会稍微高效一些（直接将结果重写到内存中的目标位置，跳过重写指针）
2.  在内存方面会稍微更有效率（保存操作右侧和左侧之间结果的临时位置在操作后立即释放，仅永久分配一个变量。）

由于 PHP 是一种脚本语言，我只能说 B 从长远来看可能会稍微节省内存，但数量确实微不足道。除此之外，所有的赌注都没有了，写一个基准。

# javascript - Childbrowser插件iOS错误

> ID：10187325
> 
> 赞同：2
> 
> 时间：2012-04-17T07:58:20.620
> 
> 标签：javascript, cordova, backbone.js, requirejs

```
webView:decidePolicyForNavigationAction:request:frame:decisionListener: 
delegate: <NSRangeException> *** -[JKArray objectAtIndex:]: index (1) 
beyond bounds (1) 
```

那是我收到的错误。我有这个。

```
e.preventDefault();
var cb = ChildBrowser.instal();
if(!cb){ plugins.childBrowser.showWebPage("http://google.com"); } 
```

我正在使用 Backbone、require 和 Cordova

# cmake - CMake 中组件的不同配置集

> ID：10187328
> 
> 赞同：0
> 
> 时间：2012-04-17T07:58:26.733
> 
> 标签：cmake

我有一个带有两个子项目、一个库和一个使用它的应用程序的 CMake 项目。该应用程序需要几个构建配置（自定义值`CMAKE_CONFIGURATION_TYPES`）。但是对于图书馆来说，这些配置之间没有区别。是否可以修改子项目中的配置集并仍然在父项目或兄弟项目中使用它的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:50:01.230

嗯，你有没有在图书馆项目中尝试过这样的事情：

```
if(CMAKE_BUILD_TYPE STREQUAL "Your_custom_config")
  set(CMAKE_BUILD_TYPE "Release")
endif() 
```

# postgresql - 在 jboss 中指定 PostgreSQL 的路径

> ID：10187331
> 
> 赞同：0
> 
> 时间：2012-04-17T07:58:33.820
> 
> 标签：postgresql, jboss, datasource

我在 jboss 中使用 PostgreSQL 作为数据库。但是我在我的系统上给 jboss 关于 PostgreSQL 的最大信息是

```
<jndi-name>PostgresDS</jndi-name>
    <connection-url>jdbc:postgresql://localhost:5432/postgres</connection-url>
    <driver-class>org.postgresql.Driver</driver-class> 
```

JBoss 如何知道 postgresql 在系统中的位置？任何我没有指定路径信息的地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:28:44.280

您没有指定连接到数据库服务器的“路径”。

在您的配置中，您告诉 JBoss PostgreSQL 与 JBoss (localhost) 在同一台机器上运行，并且它通过端口 5432 接受连接。

JBoss 不需要知道 PostgreSQL 的“位置”。他们将通过 TCP 连接相互交谈。

不知道数据的物理存储位置是拥有数据库*服务器*的目的之一。

# xmpp - Liferay 的聊天小部件

> ID：10187333
> 
> 赞同：0
> 
> 时间：2012-04-17T07:58:57.017
> 
> 标签：xmpp, chat, liferay, liferay-6

谁能推荐一个聊天客户端解决方案来集成在 Liferay 中，支持聊天室并与 OpenFire 等 XMPP 服务器一起使用？显然，可定制的越多越好，如果可能的话，也可以在当前页面中显示，例如本地 Liferay。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:45:10.390

Please try Spark as your chat client, You can customize it.

# gwt - addvaluechangedHandler 在 gwt 中触发两次。我应该使用什么替代方法？

> ID：10187339
> 
> 赞同：0
> 
> 时间：2012-04-17T07:59:17.763
> 
> 标签：gwt, date

我正在使用以下代码。但`addvaluechangedHandler`在 gwt 中触发两次。我应该使用什么其他方法以便它只发生一次？

```
calendar.addValueChangeHandler(new ValueChangeHandler<Date>() {  
    @Override
    public void onValueChange(ValueChangeEvent<Date> event) {

        Date newDate = calendar.getValue();
        newDate.setDate(newDate.getDate()+1);       
        if ((newDate.before(todaysDate))) {
            Window.alert("You can not choose past dates before " +todaysDate);
            calendar.setValue(null);
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:25:25.260

请参阅[http://code.google.com/p/google-web-toolkit/issues/detail?id=4785](http://code.google.com/p/google-web-toolkit/issues/detail?id=4785)

解决方法似乎是：

```
public class DateBoxOneEvent extends DateBox {
  @Override
  public void setValue(Date date, boolean fireEvents) {
    if (date != null) {
      date.setHours(0);
      date.setMinutes(0);
      date.setSeconds(0);
    }
    super.setValue(date, fireEvents);
  }
} 
```

# python - 用于从文本文件中删除空格的 Jython 代码

> ID：10187341
> 
> 赞同：0
> 
> 时间：2012-04-17T07:59:23.740
> 
> 标签：python, jython

我正在尝试编写用于从文本文件中删除空格的 jython 代码。我有以下情况。我有一个文本文件

```
STARTBUR001 20120416
20120416MES201667 20120320000000000201203210000000002012032200000000020120323000000000201203240000000002012032600000000020120327000000000201203280000000002012032900000000020120330000000000

20120416MES202566 2012030500000000020120306000000000201203070000000002012030800000000020120309000000000201203100000000002012031100000000020120312000000000201203130000000002012031400000000020

20120416MES275921 20120305000000000201203060000000002012030700000000020120308000000000201203090000000002012031000000000020120311000000000201203120000000002012031300000000020120314000000000

END 0000000202 
```

这里所有的行都是单行。但我想要的是

```
STARTBUR001 20120416
20120416MES201667 20120320000000000201203210000000002012032200000000020120323000000000201203240000000002012032600000000020120327000000000201203280000000002012032900000000020120330000000000
20120416MES202566 2012030500000000020120306000000000201203070000000002012030800000000020120309000000000201203100000000002012031100000000020120312000000000201203130000000002012031400000000020
20120416MES275921 20120305000000000201203060000000002012030700000000020120308000000000201203090000000002012031000000000020120311000000000201203120000000002012031300000000020120314000000000
END 0000000202 
```

所以总而言之，我想从第二行开始检查，直到遇到 END 并删除每行末尾的所有空格。

有人可以指导我编写这段代码吗？

尝试过：

```
srcfile=open('d:/BUR001.txt','r')
trgtfile=open('d:/BUR002.txt','w')
readfile=srcfile.readline()
while readfile:
    trgtfile.write(readfile.replace('\s',''))
    readfile=srcfile.readline()
srcfile.close()
trgtfile.close() 
```

谢谢， 马赫什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:47:02.817

您可以使用这些特殊行以特殊值开头的事实：

```
line = srcfile.readline()
while line:
    line2 = line
    if not line2.startswith('START') and not line2.startswith('END'):
        line2 = line2.replace(' ','')
    trgtfile.write(line2)
    line = srcfile.readline() 
```

另请注意，`readline()`结果字符串以`\n`（或在输入文件末尾为空）结尾，并且此代码从行中删除所有空格，而不仅仅是行尾的空格。

如果我理解您的示例，您想要的只是删除空行，因此不要逐行读取文件，而是一次读取它：

```
content = srcfile.read() 
```

然后从内容中删除空行：

```
while '\n\n' in content:
    content = content.replace('\n\n', '\n') 
```

# objective-c - 以编程方式重用 IBOutlet

> ID：10187342
> 
> 赞同：0
> 
> 时间：2012-04-17T07:59:28.550
> 
> 标签：objective-c, ios, cocoa, uiview, iboutlet

我在 IB 中创建了一个带有一些标签和自定义颜色的 UIView，并将其链接为 IBOutlet，这样我就可以在我的 viewController 中访问它。

```
@property (strong, nonatomic) IBOutlet UIView *tile; 
```

虽然我想在一个循环中创建更多这个出口：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    int i = 0;
    while (i <= 9) {
        UIView *cTile = [self.tile copy];
        [self.view addSubview:cTile];
        i += 1;
    }
} 
```

所以我试图复制这个`tile`插座，然后将复制的视图添加到主视图。显然这无法完成并返回错误。

是否有可能实现这种行为并重新使用/复制 IBOutlet？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:04:55.453

我不认为你想做的事情是可能的，因为 UIView 不符合 NSCopying 协议。

最好的办法是将你的“tile”创建为 UIView 子类或为它创建一个 nib，然后你可以根据需要多次重新加载它。

# groovy - 如何在 Groovy 中编码 URL？

> ID：10187344
> 
> 赞同：78
> 
> 时间：2012-04-17T07:59:44.873
> 
> 标签：groovy, urlencode, url-encoding

Groovy 中有一种 URLEncode 吗？

我找不到任何 String → String URL 编码实用程序。

示例：`dehydrogenase (NADP+)`→`dehydrogenase%20(NADP%2b)`

*（`+`而不是`%20`也可以接受，因为[某些](http://www.opinionatedgeek.com/dotnet/tools/urlencode/Encode.aspx)实现会这样做）*

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-04-17T08:11:08.353

你可以使用`java.net.URLEncoder`.

在上面的示例中，括号也必须进行编码：

```
def toEncode = "dehydrogenase (NADP+)"
assert java.net.URLEncoder.encode(toEncode, "UTF-8") == "dehydrogenase+%28NADP%2B%29" 
```

您还可以向字符串的元类添加一个方法：

```
String.metaClass.encodeURL = {
   java.net.URLEncoder.encode(delegate, "UTF-8")
} 
```

并简单`encodeURL()`地调用任何字符串：

```
def toEncode = "dehydrogenase (NADP+)"
assert toEncode.encodeURL() == "dehydrogenase+%28NADP%2B%29" 
```

# javascript - AJAX：如何从 AJAX 方法后面的 C# 代码调用 javascript 函数

> ID：10187345
> 
> 赞同：1
> 
> 时间：2012-04-17T07:59:48.013
> 
> 标签：javascript, asp.net, ajax, scriptmanager

我需要从 ajax 方法后面的 c# 代码调用一个 javascript 函数（**CommentButtonShow()**）。我无法做到这一点。

以下是 C# ajax 方法，

```
[AjaxMethod(HttpSessionStateRequirement.ReadWrite)]
public string CheckPassword()
{
  ScriptManager.RegisterClientScriptBlock(this, GetType(), "ScriptManager1", "javascript:CommentButtonShow();", true);
} 
```

下面是javascript函数，

```
 function CommentButtonShow() {
        $("#ctl00_mainContentPlaceHolder_divEmailFriends").removeClass('hidden').addClass('show'); 
    } 
```

请帮帮我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:28:59.227

您可以`CommentButtonShow()`在 ajax 调用成功事件内的 javascript 中调用函数。您不能在 Web 方法中调用 javascript 函数。如果它是回发，您的代码将起作用，但对于 ajax 回调它不会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T15:51:12.260

我正在回答这个问题，以便为那些不熟悉这种 cilent 端和服务器端脚本的人提供更多信息，并在对他们做一些有趣的工作时混淆:)

这绝对不可能从 C#（服务器端）代码中调用 Javascript（客户端）函数。我的意思是，即使你真的不能用地球上的任何编程语言将 javascript 调用回服务器端代码！

这很简单。服务器端代码呈现客户端代码。由于客户端代码（html/javascript）驻留在浏览器中，因此您没有任何 javascripts 挂钩，至少可以在服务器端获取它然后调用。但是对于 Asp.Net 为您提供了一个实际上将客户端 HTML 控件（大多数 HTML 标记）转换为服务器端控件（如 .net 框架支持）的钩子，然后您可以访问它们的属性和一些仅在服务器调用的方法-边。这并不意味着您有 javascript 事件等。无论您对这些服务器端控件做什么，都只会在服务器端发生，并且在该控件的最终代码发送到浏览器进行渲染之前，所有相关内容都已完成。这就是为什么当呈现此类控件的 html 时，您会看到一个典型的基于 .net 的 ID 生成，它看起来像 _ctr01 等。

无论如何，使用 Ajax（在客户端），您仍然可以使用 Ajax.Net 和/或 Ajaxpro (ajaxpro.info) 或自定义 javascript lib (jquery) 调用服务器端方法。

我希望这只会有助于理解你在做什么实际上是不可能的。我仍然不会将您的问题评为负面，因为它确实会帮助许多新来者了解事情是如何运作的，以及经历过这个问题的人是如何做到正确的。

我希望它非常公平地使用这个论坛来提供帮助每个人而不是否定他们的观点而不让他们知道他们在问/回答是对/错的信息。

非常感谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T06:36:47.653

我们可以从 JQuery AJAX 调用中调用代码隐藏中的方法，并根据状态是错误还是成功，将执行相应的方法。

```
 function MyMethod() {
    $.ajax({
    type: "POST",
    url: "CodeBehind.aspx/ClearData",
    contentType: "application/json;charset=utf-8",
    data: '',
    dataType: "json",
    success: function (data, textStatus) {
        closePopUpwindow1();
    },
    error: function (data, textStatus) {
        closePopUpwindow2();
    }
});}

    [WebMethod]
   public static void ClearData(){
 Page.SetGridSessionData(gridID, null);
} 
```

如果服务器端方法成功执行，则执行 closePopUpwindow1 方法，否则将执行 closePopUpwindow2 方法。

# linux - Xvfb 没有启动

> ID：10187346
> 
> 赞同：0
> 
> 时间：2012-04-17T07:59:59.783
> 
> 标签：linux, centos, xvfb

我正在尝试在 CentOS6 上启动 xvfb。但是在我输入命令启动 xvfb 后不久，我遇到了以下错误。

```
(EE) AIGLX error: swrast exports no DRI extension
(EE) GLX: could not load software renderer 
```

我输入的命令在这里：

```
Xvfb :1 -screen 0 1280x1280x24 & 
```

有谁知道这个错误的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T21:44:30.887

作为根运行

> yum install mesa-dri-drivers

# linux - 使用 epoll 进行异步连接和断开连接（Linux）

> ID：10187347
> 
> 赞同：8
> 
> 时间：2012-04-17T08:00:02.893
> 
> 标签：linux, sockets, asynchronous, tcp, epoll

我需要使用 epoll for Linux 为 tcp 客户端异步连接和断开连接。有分机。Windows 中的函数，例如 ConnectEx、DisconnectEx、AcceptEx 等...

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-17T16:07:10.243

做一个非阻塞的 connect()，假设套接字已经变成非阻塞的：

```
int res = connect(fd, ...);
if (res < 0 && errno != EINPROGRESS) {
    // error, fail somehow, close socket
    return;
}

if (res == 0) {
    // connection has succeeded immediately
} else {
    // connection attempt is in progress
} 
```

对于第二种情况，connect() 因 EINPROGRESS 失败（并且仅在这种情况下），您必须等待套接字可写，例如，对于 epoll，指定您正在此套接字上等待 EPOLLOUT。一旦你得到通知它是可写的（使用 epoll，*也*期望得到一个 EPOLLERR 或 EPOLLHUP 事件），检查连接尝试的结果：

```
int result;
socklen_t result_len = sizeof(result);
if (getsockopt(fd, SOL_SOCKET, SO_ERROR, &result, &result_len) < 0) {
    // error, fail somehow, close socket
    return;
}

if (result != 0) {
    // connection failed; error code is in 'result'
    return;
}

// socket is ready for read()/write() 
```

根据我的经验，在 Linux 上，connect() 永远不会立即成功，您总是必须等待可写性。但是，例如，在 FreeBSD 上，我已经看到非阻塞 connect() 到 localhost 立即成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-15T09:14:20.127

从经验来看，在检测非阻塞连接时，epoll 与 select 和 poll 有点不同。

使用 epoll：

进行 connect() 调用后，检查返回码。

如果无法立即完成连接，则向 epoll 注册 EPOLLOUT 事件。

调用 epoll_wait()。

如果连接失败，您的事件将被 EPOLLERR 或 EPOLLHUP 填充，否则将触发 EPOLLOUT。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T21:19:02.133

我在这里有一个“完整”的答案，以防其他人正在寻找这个：

```
#include <sys/epoll.h>
#include <errno.h>
....
....
int retVal = -1;
socklen_t retValLen = sizeof (retVal);

int status = connect(socketFD, ...);
if (status == 0)
 {
   // OK -- socket is ready for IO
 }
else if (errno == EINPROGRESS)
 {
    struct epoll_event newPeerConnectionEvent;
    int epollFD = -1;
    struct epoll_event processableEvents;
    unsigned int numEvents = -1;

    if ((epollFD = epoll_create (1)) == -1)
    {
       printf ("Could not create the epoll FD list. Aborting!");
       exit (2);
    }     

    newPeerConnectionEvent.data.fd = socketFD;
    newPeerConnectionEvent.events = EPOLLOUT | EPOLLIN | EPOLLERR;

    if (epoll_ctl (epollFD, EPOLL_CTL_ADD, socketFD, &newPeerConnectionEvent) == -1)
    {
       printf ("Could not add the socket FD to the epoll FD list. Aborting!");
       exit (2);
    }

    numEvents = epoll_wait (epollFD, &processableEvents, 1, -1);

    if (numEvents < 0)
    {
       printf ("Serious error in epoll setup: epoll_wait () returned < 0 status!");
       exit (2);
    }

    if (getsockopt (socketFD, SOL_SOCKET, SO_ERROR, &retVal, &retValLen) < 0)
    {
       // ERROR, fail somehow, close socket
    }

    if (retVal != 0) 
    {
       // ERROR: connect did not "go through"
    }   
}
else
{
   // ERROR: connect did not "go through" for other non-recoverable reasons.
   switch (errno)
   {
     ...
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-03T07:46:22.860

我已经尝试过 Sonny 的解决方案，并且 epoll_ctl 将返回无效参数。所以我认为也许正确的方法如下：

1.创建socketfd和epollfd

2.使用epoll_ctl将socketfd和epollfd与epoll事件关联起来。

3.做连接（socketfd，...）

4.检查返回值或errno

5.如果errno == EINPROGRESS，做epoll_wait

# python - 我是否需要数据库视图？

> ID：10187348
> 
> 赞同：1
> 
> 时间：2012-04-17T08:00:03.787
> 
> 标签：python, django

我有这些模型：

```
class Company(models.Model):
    name=models.CharField(max_length=100)
    description=models.TextField()
    #some more fields

class Product(models.Model):
    name=models.CharField(max_length=100)
    company=models.ForeignKey(Company)
    #some more fields

class Category(models.Model):
    parent=models.ForeignKey('self',null=True,blank=True)
    name=models.CharField(max_length=100)
    products=models.ManyToManyField(Product,null=True,blank=True)
    #some more fields 
```

因为你可以看到每个公司都有一个产品列表，每个产品属于一些类别，我将获取每个公司使用的类别列表，`company pk`最佳实践是什么？我应该定义一个数据库视图吗？我该怎么做这个？

注意：我从未在 django 中使用过数据库视图，我搜索过它，这对我来说听起来并不容易！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:20:06.967

我总是尽量避免使用数据库视图、存储过程和一般“存在”在数据库本身而不是应用程序代码库中的东西，原因很简单，它很难维护（而且你也说再见与数据库无关的应用程序）。

我的建议是坚持使用 django orm（它可以做很多事情），并且只有在您无法获得体面的性能或者您需要通过存储过程/视图提供的一些高级功能时才使用该解决方案。

在 django 中使用视图非常简单。

假设您有 1 个要查询的视图，您在数据库上创建视图，然后使用与视图的列（名称和类型）匹配的字段编写模型。

**更新**：然后您需要将表名称设置为元类定义中的视图名称。

之后，您需要告诉 django 不要在上面写，也不要尝试为视图模型创建表，幸运的是有一个 conf：

```
class ViewModel(models.Model):
    ... view columns ...

    class Meta():
        db_table = 'view_name'
        managed = False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:36:55.530

我不知道你为什么认为你需要一个数据库视图。通常，您不会将它们与 Django 一起使用，因为您通过 ORM 在 Python 中执行所有逻辑。

要获取公司的类别列表，您可以执行以下操作：

```
categories = Category.objects.filter(products__company=my_company) 
```

`my_company`您感兴趣的 Company 实例在哪里。

# objective-c - 一次性从多个 NSArray 记录中填充 NSTableView

> ID：10187355
> 
> 赞同：0
> 
> 时间：2012-04-17T08:00:23.720
> 
> 标签：objective-c, cocoa, nstableview

如果我有一对多的关系，我将如何使用在 NSArray 中找到的此类数据填充 NSTableView？

假设我有一个名为“Alphabet”的数据项，我希望当用户从列表中选择它时，返回值：

```
-(id)tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex 
```

是不同行中的字母，一个在另一个之下。

可以这样做吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:43:43.527

您需要分配一个对象作为表视图`datasource`并让该对象符合`NSTableViewDataSource`协议，或者您需要使用`NSArrayController`和 Cocoa 绑定。

如果您使用数据源，请实现该`numberOfItemsInTableView:`方法并返回`count`您的数组。您还必须实施`-tableView:objectValueForTableColumn:row:`：

```
-(id)tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex
{
    if(rowIndex > -1)
    {
        return [yourArray objectAtIndex:rowIndex];
    }
    return nil;
} 
```

# java - 在 java (JPA) 中选择查询

> ID：10187358
> 
> 赞同：0
> 
> 时间：2012-04-17T08:00:33.583
> 
> 标签：java, jpa, playframework

我正在使用 JPA 和 playframework 选择 JAVA 中的记录，如下所示：

```
EntityManager em = JPA.em();
List<News> resultUrl = News.find("link", url).fetch();
 if (resultUrl.isEmpty()) { //check if it is exist
} 
```

但我想选择具有两个条件的记录，如下所示：

```
where link='url' and name='joe' 
```

我怎样才能做到这一点？感谢您的帮助。最好的祝愿。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:16:07.027

利用：

```
Query q = em.createQuery("FROM News n WHERE n.link=:url and n.name=:name");
q.setParameter("url", "url").setParameter("name", "joe");
List<News> resultUrl = q.getResultList(); 
```

...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T08:47:32.883

使用 Play 的一种方法是

```
List<News> resultUrl = News.find("byLinkAndName", url, "joe").fetch();
 if (resultUrl.isEmpty()) { //check if it is exist
} 
```

其他：

```
List<News> resultUrl = News.find("link = ? and name = ?", url, "joe").fetch();
 if (resultUrl.isEmpty()) { //check if it is exist
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T08:48:02.870

我的建议是定义一个命名查询：

```
@Entity
@NamedQueries({
    @NamedQuery(name = News.FIND_BY_URL_AND_NAME, query = "Select n FROM News as n WHERE n.url=:" + News.PARAM_URL + " AND n.name=:" + News.PARAM_NAME)
})
public class News {
    public static final String FIND_BY_URL_AND_NAME = "News.findByUrlAndName";
    public static final String PARAM_URL = "url";
    public static final String PARAM_NAME = "name";

    //CONTINUE
} 
```

然后你这样称呼它：

```
Query query = em.createNamedQuery(News.FIND_BY_URL_AND_NAME);
query.setParameter(News.PARAM_URL, "url");
query.setParameter(News.PARAM_NAME, "name");
List<News> news = query.getResultList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T08:13:44.000

看看 CriteriaBuilder、CriteriaQuery 和 Predicate：

```
EntityManager em = JPA.em();
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<T> criteriaQuery = cb.createQuery(News.class);
Root<T> root = criteriaQuery.from(News.class);
criteriaQuery.select(root);

List<Predicate> ps = new ArrayList<Predicate>();
ps.add(sb.equal(root.get("link", url));
ps.add(sb.equal(root.get("name", "joe"));

criteriaQuery.where(cb.and(ps.toArray(new Predicate[0])));

List<News> resultUrl = em.createQuery(criteriaQuery).getResultList(); 
```

问候

# ipad - 在应用内打开另一个应用，然后关闭并返回调用应用

> ID：10187359
> 
> 赞同：1
> 
> 时间：2012-04-17T08:00:44.033
> 
> 标签：ipad, document, in-app

已经搜索了高低，似乎通过任何传统方式都无法做到这一点，但是，有谁知道是否有可能：

1) 通过应用程序（应用程序 1）打开文件（例如页面）。这将在 iPad 上启动 Pages 应用程序。

2）编辑文档，保存并关闭

3）关闭操作将用户返回到调用应用程序（应用程序 1）。

可以做到吗？

感谢您的任何帮助或指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:40:13.847

由于限制和操作系统的沙盒概念（至少没有越狱设备），这不能在 iOS 上完成。

# transactions - SOA 中的事务管理

> ID：10187360
> 
> 赞同：4
> 
> 时间：2012-04-17T08:00:46.923
> 
> 标签：transactions, soa, distributed-transactions, business-process-management, orchestration

SOA 服务应该是自包含的服务，但实际上我们需要编排这些服务来执行某些业务/流程。

现在，为了使流程和数据保持一致，我们需要确保所有服务都已执行或没有执行。

一种实现方式是为每个服务实现“补偿”逻辑，并在流程/先前服务中出现问题时调用它。

有没有更好的方法或一些标准来做同样的事情，例如，取出事务上下文并实现类似 2 阶段提交的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:00:04.260

它确实取决于您正在访问的服务。在某些情况下，您将无法进行补偿，而在其他情况下，您将无法控制交易，而在其他情况下，您将别无选择。

补偿处理程序和 2 阶段提交（XA 事务）都是管理事务的有效机制。

考虑您正在连接的服务，以及它们提供的支持类型。例如，如果您有大量的 Web 服务，您可能没有 XA 提供给您的事务控制，但它们可能具有用于反转操作的机制。

在一个完美的世界中，您将有 2 阶段提交，这将减少所需的补偿，但接口就是接口，就像人与人之间的沟通一样，沟通会有所不同，没有一个完美的解决方案。

在设计界面时，将事务控制和补偿恢复作为界面设计的一部分考虑，您将因创建有用的界面而受到赞扬（或至少不会受到批评）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:11:04.320

您可以使用 WS-BPEL 2.0 规范中定义的故障处理程序和补偿处理程序（该标准提供了一种描述和协调 Web 服务之间交互的方法），因此它以标准方式将业务逻辑与补偿逻辑分开。

*   [链接](http://docs.oasis-open.org/wsbpel/2.0/wsbpel-specification-draft.html#_Toc143402893)到 BPEL 规范中的错误处理
*   关于如何在 BPEL 中编写补偿处理程序的[博客文章](http://ddweerasiri.blogspot.com/2011/09/writing-bpel-compensation-handler.html)

# php - 简单的 DOM 和 Sony.co.za？

> ID：10187364
> 
> 赞同：1
> 
> 时间：2012-04-17T08:01:09.300
> 
> 标签：php, simpledom

几个星期以来，我一直在各种页面上运行我的简单 dom 脚本，但从未遇到任何问题。现在，今天，当我尝试：

```
$html = file_get_html('http://www.sony.co.za/product/dsc-wx10'); 
```

我得到：

```
( ! ) Warning: file_get_contents(http://www.sony.co.za/product/dsc-wx10) 
[function.file-get-contents]: failed to open stream: HTTP request failed!
 in C:\XXXXXXX\simplephpdom\simple_html_dom.php on line 70 
```

当以下工作时，可能导致我无法成功输入上面的代码：

```
 $html = file_get_html('http://www.google.com');
 $html = file_get_html('http://www.whatever.com'); 
```

我可以通过我的浏览器访问索尼页面。据我了解，上面的代码连接到端口 80，就像我一样。所以我很难相信我被封锁了。而且，我从第一天就被阻止了。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:05:15.827

该站点似乎永远延迟了包含 PHP 用户代理的请求。听起来像是一个非常**非常**糟糕的阻止爬虫的尝试。

解决方案很简单：使用 curl 发送请求并指定“普通”用户代理。

* * *

更新：显然它还阻止空/丢失的用户代理：

```
> nc www.sony.co.za 80
nc: using stream socket
GET / HTTP/1.0
Host: www.sony.co.za
User-Agent: Mozilla Firefox

HTTP/1.0 301 Moved Permanently
... 
```

对比

```
> nc www.sony.co.za 80
nc: using stream socket
GET / HTTP/1.0
Host: www.sony.co.za
[no response] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:37:58.147

我可以看到你正在使用`simple_html_dom`（[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)）......而不是使用`file_get_html`你可以`str_get_html`使用`curl`

```
include 'simple_html_dom.php';
$url="http://www.sony.co.za/product/dsc-wx10";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 2);
curl_setopt($ch, CURLOPT_TIMEOUT, 60);
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.9) Gecko/20071025 Firefox/2.0.0.9");
$exec = curl_exec ($ch);
$html = str_get_html($exec);
var_dump($html); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:19:15.850

您需要设置用户代理（标题），然后它可以工作：

```
$options = array(
    'http' => array(
            'user_agent' => 'Mozilla Firefox'
    )
);
$context = stream_context_create($options);
$url = 'http://www.sony.co.za/product/dsc-wx10';
$str = file_get_contents($url, 0, $context);
$html = str_get_html($str); 
```

简单的 HTML DOM 需要您为它完成工作（从远程服务器加载字符串），我通常会说您应该`DOMDocument`代替那个“简单”的 HTML DOM 库，因为它更好地集成和更强大（并且实际上可以工作):

```
$options = array(
    'http' => array(
            'user_agent' => 'Mozilla Firefox'
    )
);
$context = stream_context_create($options);
libxml_set_streams_context($context);
$url = 'http://www.sony.co.za/product/dsc-wx10';
$doc = DOMDocument::loadHTMLFile($url); 
```

# .net - DisplayMemberPath 连接

> ID：10187375
> 
> 赞同：23
> 
> 时间：2012-04-17T08:02:08.387
> 
> 标签：.net, wpf, combobox

我正在尝试将两个值绑定到 ComboBox 显示值，但我不知道该怎么做。

这种方式行不通：

```
cboRegion.DisplayMemberPath = "idregion" + "description"; 
```

有谁知道如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-04-17T08:10:16.747

不幸的是，这是不可能的`DisplayMemberPath`。您有以下选择：

*   **指定数据模板**

    ```
    <ComboBox>
      <ComboBox.ItemTemplate>
        <DataTemplate>
          <TextBlock>
            <TextBlock.Text>
              <MultiBinding StringFormat="{}{0}: {1}">
                <Binding Path="idregion"/>
                <Binding Path="description"/>
              </MultiBinding>
            </TextBlock.Text>
          </TextBlock>
        </DataTemplate>
      </ComboBox.ItemTemplate>
    </ComboBox> 
    ```

    ^(（如果您想知道 StringFormat 属性中的空括号，请参阅：[{} 括号在 Binding 语法的 StringFormat 部分中的含义是什么？](https://stackoverflow.com/q/7980885/87698)）)

*   **将属性或字段添加到您的数据源**。如何做到这一点取决于您的数据源：

    如果您的组合框绑定到 DataTable，请添加 DataColumn 并在循环中填充其值。或者，更改您的 SQL 并将连接的值添加到您的`SELECT`子句。

    如果您的组合框绑定到 POCO 或实体框架对象，请添加一个返回串联的属性。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-17T08:07:58.617

您需要使用`DataTemplate`：

```
<ComboBox Name="cboRegion">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock>
                <Run Text="{Binding idregion}" />
                <Run Text="{Binding description}" />
            </TextBlock>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-30T21:20:38.127

您可以创建一个视图，连接两个字段，然后在您的 itemssource 属性中引用新视图之后（并在更新您的实体框架模型之后），然后在 c# 中的 DisplayMemberPath 属性中引用连接的字段名称

# c# - User control with custom properties

> ID：10187377
> 
> 赞同：2
> 
> 时间：2012-04-17T08:02:26.590
> 
> 标签：c#, wpf, xaml, user-controls, wpf-controls

I'm trying to create a UserControl which is a legend of a graph item, I've defined it so it has a label with the graph name, a check box which define whether we show it or not and a rectangle with the graph color.

The xaml is defined like this:

```
<UserControl x:Class="Resources.LegendItem"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d">
    <UserControl.Template>
        <ControlTemplate>
            <StackPanel Margin="1,0,0,0" Orientation="Horizontal">
                <CheckBox Name="cb" IsChecked="{TemplateBinding IsGraphVisible}" >
                    <StackPanel Margin="1,0,0,0" Orientation="Horizontal">
                        <Rectangle Name="rec" RadiusX="2" RadiusY="2" Height="10" Width="10" />
                        <Label Name="lab" Content="{TemplateBinding GraphName}" />
                    </StackPanel>
                </CheckBox>
            </StackPanel>
        </ControlTemplate>
    </UserControl.Template>
</UserControl> 
```

and the cs file is:

```
namespace Resources
{
    public partial class LegendItem : UserControl
    {
        public static readonly DependencyProperty IsGraphVisibleProperty = DependencyProperty.Register("IsGraphVisible", typeof(Boolean), typeof(LegendItem));
        public static readonly DependencyProperty GraphNameProperty = DependencyProperty.Register("GraphName", typeof(String), typeof(LegendItem));

        public bool IsGraphVisible
        {
            get { return (bool)GetValue(IsGraphVisibleProperty); }
            set { SetValue(IsGraphVisibleProperty, value); }
        }

        public string GraphName
        {
            get { return (string)GetValue(GraphNameProperty); }
            set { SetValue(GraphNameProperty, value); }
        }

        public LegendItem()
        {
            InitializeComponent();
        }

    }
} 
```

But when I compile it, I get an error "Cannot find the static member 'IsGraphVisibleProperty' on the type 'Control'." Any help would be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:18:33.927

You do not need a template at all. `UserControl` allows the XAML to be declared directly. You can't set the template in a `UserControl`:

```
<UserControl x:Class="Resources.LegendItem" x:Name="MyControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d">

        <StackPanel Margin="1,0,0,0" Orientation="Horizontal">
            <CheckBox Name="cb" IsChecked="{Binding ElementName=MyControl, Path=IsGraphVisible}" >
                <StackPanel Margin="1,0,0,0" Orientation="Horizontal">
                    <Rectangle Name="rec" RadiusX="2" RadiusY="2" Height="10" Width="10" />
                    <Label Name="lab" Content="{Binding ElementName=MyControl, Path=GraphName}" />
                </StackPanel>
            </CheckBox>
        </StackPanel>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:06:45.900

You need to specify `TargetType="{x:Type Resources.LegendItem}"` on your `ControlTemplate`, otherwise it defaults to being a template for `Control` and you get that error.

# javascript - 10秒后Javascript自动关闭弹出窗口

> ID：10187382
> 
> 赞同：0
> 
> 时间：2012-04-17T08:02:46.537
> 
> 标签：javascript, timer

我想制作一个带有广告的 javascript 弹出窗口，然后在 10 秒后关闭，我在互联网上搜索了任何可以做到这一点的东西，但我找不到任何东西。

我不是一个非常过期的 javascript 程序员。

```
<script type="text/javascript">

$(document).ready(function() {  

        var id = '#dialog';

        //Get the screen height and width

        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set heigth and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //transition effect     
        $('#mask').fadeIn(1000);    
        $('#mask').fadeTo("slow",0.8);  

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        $(id).css('top',  winH/2-$(id).height()/2);
        $(id).css('left', winW/2-$(id).width()/2);

        //transition effect
        $(id).fadeIn(2000);     

    //if close button is clicked
    $('.window .close').click(function (e) {
        //Cancel the link behavior
        e.preventDefault();

        $('#mask').hide();
        $('.window').hide();
    });     

});

</script> 
```

最好的祝福，

杰普小号

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:08:28.773

这应该可以解决问题：

```
setTimeout(function() {
    $(id).hide();
}, 10000); 
```

# eclipse - Hover Text for Zest GraphViewer

> ID：10187385
> 
> 赞同：0
> 
> 时间：2012-04-17T08:02:52.897
> 
> 标签：eclipse, eclipse-plugin, zest

I'd like to be able to modify the hover text on a node in the zest graph viewer. Does anybody know how to do this programmatically?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:40:25.147

您的 GraphViewer 必须有一个`LabelProvider`可以实现`IEntityStyleProvider`哪个方法`public IFigure getTooltip(Object entity)`可以实现。我认为没有别的事可做。

# tfs - Generate MSI as part of TFS build

> ID：10187386
> 
> 赞同：3
> 
> 时间：2012-04-17T08:02:53.167
> 
> 标签：tfs, msbuild, installation

I want to create MSI build package as part of a TFS build.

What options there are?

**i know about:**

1.  install VS on TFS server (http://geekswithblogs.net/jakob/archive/2010/05/14/building-visual-studio-setup-projects-with-tfs-2010-team-build.aspx)

2.  Use 3rd party software on tfs

I do not wish to rely on 3rd party software or install vs 2010 on server as i have no licence to spare

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T08:05:17.573

Wix: [http://wix.sourceforge.net/](http://wix.sourceforge.net/)

It can be invoked using MsBuild. I am using it quite successfully in one of my projects

This page gives some info on what is needed [http://wix.sourceforge.net/manual-wix3/authoring_first_msbuild_project.htm](http://wix.sourceforge.net/manual-wix3/authoring_first_msbuild_project.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:26:34.257

您应该以与本地相同的方式在 TFS Build 上创建 MSI 构建包。

如果您还没有任何东西，我强烈建议您查看 Wix 并使用它。然而，Wix 主要是为 MSI 生成低级包。

如果您对安装向导有复杂的需求，您可以依靠 InstallShield 来完成工作。通过使用 InstallShield (IS)，您有两个选择：

1.  创建一个与 Windows Installer（构建 .msi 的技术）100% 兼容的部署项目，不多不少。通过这样做，您可以使用 Team Build 轻松构建您的 IS 项目。
2.  创建一个具有 IS 风格的部署项目（带有安装引导程序），您必须部署所需的 IS 运行时才能成功构建。

但是，我强烈建议您不要选择基于持续集成约束创建部署包的方式，如果您必须在构建代理上安装第 3 方，就这样吧，这不会是最困难的事情. （特别是如果那些是你可以克隆的虚拟机）

# c#-4.0 - Remove same repeated points from list with lambda expressions

> ID：10187387
> 
> 赞同：1
> 
> 时间：2012-04-17T08:03:05.530
> 
> 标签：c#-4.0, lambda

I have a list of float points as following:

```
wayPoints = (new PointF[] { 
new PointF(18, 0), 
new PointF(18,0), 
new PointF(55, 155),
new PointF(55, 155),
new PointF(55, 155),
new PointF(55, 155),
new PointF(55, 0),
new PointF(55, 230)}).ToList(); 
```

I want to use Lambda Expressions in which the same points removed from list but one of those same points stays in the list

Output:

```
wayPoints = 
(new PointF[] { 
 new PointF(18, 0),
 new PointF(55, 155),
 new PointF(55, 0),
 new PointF(55, 230)}
).ToList(); 
```

How should I write my commands in Lambda Expressions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:15:04.763

[Distinct](http://msdn.microsoft.com/de-de/library/bb348436.aspx)删除重复项：

```
var distinctPoints = wayPoints.Distinct(); 
```

然而，结果将只包含一个 PointF(18, 0)，即使是像 {(18, 0), (10, 10), (18, 0)} 这样的序列。我不确定您是否要保留那些不连续的点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:06:43.757

如果只是一个点列表，那么你可以这样做（不需要先做一个数组和`ToList()`）：

```
var wayPoints = new List<PointF>{ 
    new PointF(18, 0), 
    new PointF(18,0), 
    new PointF(55, 155),
    new PointF(55, 155),
    new PointF(55, 155),
    new PointF(55, 155),
    new PointF(55, 0),
    new PointF(55, 230)
}; 
```

如果你想要独特的点。您可以使用`Distinct`. 像这样：

```
var wayPoints = (new PointF[] { 
new PointF(18, 0), 
new PointF(18,0), 
new PointF(55, 155),
new PointF(55, 155),
new PointF(55, 155),
new PointF(55, 155),
new PointF(55, 0),
new PointF(55, 230)}).ToList();
var uniquePoints=wayPoints.Distinct().ToList(); 
```

# c++ - template class with STL container member

> ID：10187388
> 
> 赞同：0
> 
> 时间：2012-04-17T08:03:06.333
> 
> 标签：c++, templates, stl, visual-studio-2005

I'm writing a template class that uses a std::multimap as a member, and getting compile errors.

LocTree.h:

```
#pragma once
#include <map>

template <class Loc, class T>
class LocTree
{
public :
         typedef std::multimap<typename Loc, typename T> TreeType;

        LocTree( void );
        ~LocTree( void ) { };
private :
        TreeType db;
}; 
```

LocTree.cpp:

```
#include "StdAfx.h"
#include "LocTree.h"

LocTree< class Loc, class T>::LocTree()
{
} 
```

The compile error (from VC2005) :

```
Error     1     error C2079: 'std::pair<_Ty1,_Ty2>::first' uses undefined class 'Loc'     c:\program files (x86)\microsoft visual studio 8\vc\include\utility     53
Error     2     error C2079: 'std::pair<_Ty1,_Ty2>::second' uses undefined class 'T'     c:\program files (x86)\microsoft visual studio 8\vc\include\utility     54 
```

I know I could put the function definitions in the .h but I'm hoping to keep them separate, if it's legal to do so. How do I fix this (probably newbie) problem?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T08:04:56.157

Your constructor definition should be:

```
template<class Loc, class T>
LocTree<Loc,T>::LocTree()
{
} 
```

Also, hoping to keep them separate... - don't - you're wasting your time. The only way to keep them separate is to have a definition in a different header which you also include. So, technically, they are separate, but the implementation is still visible.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T08:43:00.640

两点。第一个是：什么是：

```
typedef std::multimap<typename Loc, typename T> TreeType; 
```

应该是什么意思？我看不到那里在`typename`做什么；我想你只是想要：

```
typedef std::multimap<Loc, T> TreeType; 
```

其次，在类外定义类模板的成员函数时，语法为：

```
template <typename Loc, typename T>
LocTree<Loc, T>::LocTree()
{
} 
```

换句话说，您必须重复该`template<...>`子句。（无论你使用`typename`还是`class`in`<...>`都无所谓。因为它不必是一个类，我认识的大多数人都喜欢`typename`，因为这更接近于它的意思。）

至于保持实现分离：C++ 中的模板在这方面有些破损。您无法避免编译器依赖性。但是，您仍然希望将实现与定义分开。通常的技术是将模板实现放在一个单独的文件中（`.tcc`例如），并从头文件中包含它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T08:23:17.877

将模板的实现分开并不是一件容易的事。

一般是做不到的。也就是说，它不能在模板化参数可能是“任何东西”的情况下完成。

对于模板化参数的特定有限子集，可以这样做，例如，如果您有如下模板：

```
template< bool B > class Foo; 
```

然后您可以指定：

```
extern template class Foo<true>;
extern template class Foo<false>; 
```

这被称为“实例化”模板，并向编译器指定存在值 true 和 false 的实现，在其他地方实现。

这也可以在模板化参数是类型并且仅限于特定子集的情况下完成。

然后在编译单元中定义模板实现，然后再次使用与上面相同的方法实例化模板，但不使用“extern”一词。

我已经在生产代码中这样做了，因为您正在创建一个成员函数来为数据库存储过程调用设置参数值，其中只允许非常有限的参数类型子集。如果您的类型是一个非常有限的子集，那么如果这有助于解耦代码并隐藏许多实现细节（在随后在数据库中完成实现的情况下，这是非常值得做的），那么继续做同样的事情。

有一个“中间”的地方，你在另一个头文件中提供实现，我经常看到`_i.h`或类似的约定，然后你实例化模板，仅在必要时包括这个头文件。因此，如果您创建一个类 Foo 然后在标题中使用我的 foo 类 in`Foo.h`和 in的“extern”声明`Foo.cpp`，用于实现和实例化`#include`的文件。`_i.h`

至于语法，在模板实现文件中使用：

```
template<class Loc, class T>
LocTree<Loc,T>::method(...)
{
  ...
} 
```

# java - Simple Java proxy server - google search error

> ID：10187389
> 
> 赞同：1
> 
> 时间：2012-04-17T08:03:07.987
> 
> 标签：java, http, proxy

I've written simple HTTP proxy server everything works except google search, Im reciving "net::ERR_EMPTY_RESPONSE" error in google chrome, and "Connection closed by remote server" in Opera. I don't have anymore ideas how to solve it. Could you help me?

```
import java.io.*;
import java.nio.ByteBuffer;
import java.nio.CharBuffer;
import java.nio.channels.*;
import java.nio.charset.*;
import java.net.*;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.*;

public class Server <Parametr>{

private Calendar current;
private DateFormat dformat;
private int localport = 0;
private int remoteport = 80;
private String remoteAddress = "127.0.0.1";
private Proxy proxy; 
private ServerSocketChannel servsocketchannel; 
private boolean local = false;

public Server(int port){
    setServerPort(port);
    openServerPort();
    checkAndSetRemoteProxyServer();
    dformat = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
    current = Calendar.getInstance();   
    createServerSocketAndTalk();
}

public void setServerPort(int port){
    this.localport = port;
}

public void setProxyAddressAndPort(int port, String address){
    this.remoteport = port;
    this.remoteAddress = address;
}

public void openServerPort(){
    try {
        servsocketchannel = ServerSocketChannel.open();
        servsocketchannel.socket().bind(new java.net.InetSocketAddress(localport));
    } catch (BindException exc) {
        System.out.println("Server isn't started, local port is blocked or used, check firewall or set new port");

    } catch (IOException e){
        System.out.println("Server isn't started, local port is blocked or used, check firewall or set new port");
    }
}

public void checkAndSetRemoteProxyServer(){
    boolean ERROR = false;
    Socket proxysocketchannel = null;
    try {
        proxysocketchannel = new Socket(remoteAddress, remoteport);     
    } catch (UnknownHostException ex) { 
        System.out.println("Proxy server address is probably offline, please provide new server address --- RUNNING LOCAL PROXY MODE");
        ERROR = true;
    } catch (IOException exc) {         
        System.out.println("Connecting to the proxy server failed, please review address and port --- RUNNING LOCAL PROXY MODE");
        ERROR = true;
    }   

    if(!ERROR){
        System.out.println("Proxy state - online");
        proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(remoteAddress, remoteport)); 
        System.out.println("Initialization successful - waiting for clients ");
    }
    else{
        System.out.println("Problem with proxy connection, check your settings or set new proxy address --- RUNNING LOCAL PROXY MODE");
        System.out.println("Proxy local mode initialization successful - waiting for clients ");
        local = true;
    }               
}

    public void createServerSocketAndTalk(){        
        try {
            while(servsocketchannel.isOpen()){              
                Runnable r = new ClientHandler(servsocketchannel.accept());
                Thread t = new Thread(r);
                t.start();              
            }
        }catch(NotYetBoundException exc){
            System.out.println("Server not started local port is already used, please choose new local port");      
        }catch (AsynchronousCloseException ex) {
            System.out.println("Server Closed");
        }
        catch (IOException e) { 
            e.printStackTrace();
        }
    }

 class ClientHandler implements Runnable{

        SocketChannel client = null;

        private static final int BUFFER_SIZE = 32768;

        public ClientHandler(SocketChannel client){
            this.client = client;
        }

        @Override
        public void run() {
            letsTalk();
            try {
                this.finalize();
            } catch (Throwable e) {
                e.printStackTrace();
            }
        }           

        public void letsTalk(){

                while(true){

                        if(client.socket().isClosed()){
                            break;
                        }

                        BufferedReader clientin = null;
                        DataOutputStream clientout = null;                      

                        try {
                            clientin = new BufferedReader(new InputStreamReader(client.socket().getInputStream()));                         
                            clientout = new DataOutputStream(client.socket().getOutputStream());
                        } catch (IOException e) {
                            System.out.println("Error with client connection");                         
                            break;                      
                        }                          

                           String inputline;
                           String url = "";

                           try {
                            while((inputline = clientin.readLine()) != null){
                                    System.out.println(inputline);
                                   StringTokenizer readerclient = new StringTokenizer(inputline);
                                   if(readerclient.nextToken().equals("GET")){                                     
                                      url = readerclient.nextToken();
                                      System.out.println("Requested URL:  " + url);
                                      break;
                                   }        
                                   if(readerclient.nextToken().equals("POST")){
                                       System.out.println("POST");
                                   }
                            }
                        } catch (IOException e) {
                            System.out.println("URL REQUEST ERROR");
                            e.printStackTrace();
                        } catch (NullPointerException exc){

                        }

                           try {
                            URL reqURL = new URL(url);
                            URLConnection connection = null;
                            if(local){
                                connection = reqURL.openConnection();
                            }
                            else {
                                connection = reqURL.openConnection(proxy);
                            }
                            connection.setDoInput(true);
                            connection.setDoOutput(false);

                            InputStream is = null;
                            is = connection.getInputStream();

                             byte by[] = new byte[ BUFFER_SIZE ];
                             int index = is.read( by, 0, BUFFER_SIZE );

                                while ( index != -1 ){
                                  clientout.write( by, 0, index );
                                  index = is.read( by, 0, BUFFER_SIZE );
                                }

                                clientout.flush();

                           }catch(Exception ex){

                           }

                          try {
                            clientin.close();
                            clientout.close();
                        //  client.close();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }

                }
    }   

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:50:03.337

我找到了解决方案。您必须将以下内容添加到`URLConnection`

```
connection.setRequestProperty("User-Agent", "Mozilla/4.0 (compatible; MSIE 5.5; Windows NT 5.0; H010818)"); 
```

# .net - Why do Panel elements only receive mouse or stylus events if a Background is defined?

> ID：10187396
> 
> 赞同：3
> 
> 时间：2012-04-17T08:03:43.360
> 
> 标签：.net, wpf

According to [http://msdn.microsoft.com/de-de/library/system.windows.controls.panel.background.aspx](http://msdn.microsoft.com/de-de/library/system.windows.controls.panel.background.aspx)

> Panel elements do not receive mouse or stylus events if a Background is not defined. If you need to handle mouse or stylus events but do not want a background for your Panel, use Transparent.

So my question is: *Why?* Does anybody know the reasoning for this behavior?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:41:07.560

原因是输入基于[Visual Layer 中的命中测试](http://msdn.microsoft.com/en-us/library/ms752097.aspx)。请特别参阅*命中测试支持*部分。

命中测试仅在 Visual 的呈现内容（即呈现的几何图形）上成功。当您设置它的`Background`属性时，Panel 最终会将填充的 RectangleGeometry 渲染为背景。

# c# - How can you display textbox1 value in textbox2 using keystokes

> ID：10187401
> 
> 赞同：0
> 
> 时间：2012-04-17T08:04:03.517
> 
> 标签：c#, winforms, visual-studio-2010

I have 2 textbox (textbox 1 & textbox 2 ); the textbox1 has numeric value such as $1,000\. Now when i am in textbox2 and if i hit keystrokes like (= or + or pageup or pagedown etc...) the textbox1 value should appear in textbox2.

The reason behind this is to enable customers improve speed in processsing/ filling data.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:07:38.713

如何使用如下函数在 textbox2 上添加 keyPress 事件：

```
 private void textbox2_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (e.KeyChar == '+')
        {
            textbox2.Text = textbox1.Text;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:08:14.080

你可以试试这个：

```
protected void textbox2_TextChanged(object sender, EventArgs e)
{
  if(textbox2.Text=="+"||textbox2.Text=="=")
  textbox2.Text=textbox1.Text;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T08:10:00.620

我不知道我是否明白你需要什么，无论如何试试这个：

```
private void textBox2_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.PageDown ||
        e.KeyCode == Keys.PageUp ||
        e.KeyCode == Keys.Oemplus ||
        e.KeyCode == Keys.Add ||
        (e.KeyCode == Keys.D0 && e.Shift))
    {
        textBox2.Text = textBox1.Text;
        e.Handled = true;
        e.SuppressKeyPress = true;
    }
} 
```

# android - 网格视图参数

> ID：10187403
> 
> 赞同：0
> 
> 时间：2012-04-17T08:04:13.643
> 
> 标签：android, android-gridview, onitemclicklistener, android-adapter

我有一个 Gridview，它填充了来自互联网的数据。其中一个参数是元素的 id - 我的目标是以某种方式存储此 id 以便在 onItemClickListener 方法中使用它。首先在活动中我使用自定义组件提取数据，然后我使用它适配器的方法：

`public View getView(int position, View convertView, ViewGroup parent)`

我应该在哪里以及如何保持网格元素和实际数据 ID 之间的关系，因此，例如，当我单击网格元素时，会启动具有适当 id 参数的活动。

ps ID 未显示在gridview 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:24:12.103

创建一个自定义对象（类）并将所有值存储在 ArrayList 中，将其传递给自定义适配器以在 getView() 方法中显示数据。

在 click 方法上，您可以轻松地从 ArrayList 中获得单击的位置对象。

# c# - 在 IIS 托管的 WCF 服务中保存文件

> ID：10187415
> 
> 赞同：0
> 
> 时间：2012-04-17T08:05:19.663
> 
> 标签：c#, wcf, iis, .net-4.0, save

### 问题

当使用 IIS 中托管的 WCF 服务中的方法使用*绝对*文件名（例如`C:/tinkiwinki/dipsy.lala`）[`System.Drawing.Image.Save(Stream, ImageCodecInfo, EncoderParameters)`](http://msdn.microsoft.com/en-us/library/ms142148.aspx)在服务器中保存图像时，它不会保存图像，甚至不会引发异常。

### 背景

我们有一个辅助类，它有一个`SaveJpeg`方法：

```
public class Tools
{
    public static void SaveJpeg(string path, Image img, int quality)
    {
        if (quality < 0 || quality > 100)
            throw new ArgumentOutOfRangeException("Quality must be between 0 and 100.");

        EncoderParameter qualityParam =
            new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, quality);

        ImageCodecInfo jpegCodec = GetEncoderInfo("image/jpeg");

        EncoderParameters encoderParams = new EncoderParameters(1);
        encoderParams.Param[0] = qualityParam;

        img.Save(path, jpegCodec, encoderParams);
    }
} 
```

我们在这样的 WCF`OperationContract`方法中使用它：

```
string destDirectory = ServerDataFilePath.ImagesPath + @"\" + uploadID.ToString();
if (!Directory.Exists(destDirectory))
    Directory.CreateDirectory(destDirectory);
Tools.SaveJpeg(destDirectory + @"\" + fileName, img, 50); 
```

静态`ServerDataFilePath.ImagesPath`定义如下：

```
public class ServerDataFilePath
{
    public static string ImagesPath{ get { return ConfigurationManager.ConnectionStrings["ImagesPath"].ConnectionString; } }
} 
```

`ConnectionString`它从*Web.config*文件中检索的位置：

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <clear />
    <add name="ImagesPath" connectionString="C:\testServerImagesPath\"/>
  </connectionStrings>
</configuration> 
```

### 问题

当我们在本地运行它时它工作得很好，但是当我们使用 IIS 在我们的测试服务器中部署它时，它不会保存图像并且不会抛出任何异常。为什么会这样？

### 一些约束

代码采用 C#，框架 4，在 Visual Studio 2010 Professional 中构建。该服务部署在 IIS 中的 Microsoft Windows Server 2003 R2 中，服务类型为 .NET 4 中的 WCF。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T08:16:47.953

您的 Web 应用程序在 IIS 上运行的帐户很可能没有该`C:\tinkiwinki`文件夹的写入权限。

# cakephp - CakePHP - Prevent model data being save in a saveMany call when certain fields are blank

> ID：10187418
> 
> 赞同：0
> 
> 时间：2012-04-17T08:05:34.937
> 
> 标签：cakephp, cakephp-2.0

I have scenario where I have 3 different models data being saved from one form, by means of the saveAll pass through method in CakePHP 2.x

The models on the form are:

1.  Project
2.  ProjectImage
3.  ProjectAttachment

1 and 2 are saving perfectly, but I am having problems with the ProjectAttachment fields. If you look at the following image, the fields in question are at the bottom right, highlighted by a red frame: [http://img.skitch.com/20120417-bnarwihc9mqm1b49cjy2bp13cf.jpg](http://img.skitch.com/20120417-bnarwihc9mqm1b49cjy2bp13cf.jpg)

**Here is the situation:**

I have named the fields as follows: *ProjectAttachment.0.project_id*, *ProjectAttachment.0.name* .... *ProjectAttachment.6.project_id* etc where the numbers are relative to the already present amount of attachments the user has added, as there is no limit. So if the user has ALREADY added 6 documents, the field would be called *ProjectAttachment.7.id* and so on. This is because of the naming convention when using the saveAll method.

I have made use of two hidden fields, one to store the user ID, the other to store the project ID.

The problem is that if the user does not fill in the Document Title and select a file to upload, the form fails! If I remove all validation rules, the form no longer fails BUT a blank ProjectAttachment record is inserted.

I suspect the problem may also be that the project_id and user_id fields (that are hidden) already have values in them?

I gave it some thought, and came up with a simple concept: In my controller, before the saveAll call, I would check to see if a blank Document Title field was submitted, and if so, I would completely eliminate the relevant array entry from the **$this->request->data['ProjectAttachment']** array, but this did not seem to work.

To clarify, I am not looking for validation rules. If the user decides they only want to upload images and not touch the ProjectAttachment form, them the saveAll operation must not fail, it must simple not attempt to save the blank fields in the form, if this is at all possible.

Any suggestions?

Kind regards, Simon

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:11:32.407

好吧，似乎解决方案比我最初想象的要简单得多！我部分在正确的轨道上，如果遇到任何空白字段，我必须取消设置**$this->request->data数组中的变量****ProjectArray**键。

 **我这样做如下：

```
 if(!empty($this->request->data['ProjectAttachment'])){
        foreach($this->request->data['ProjectAttachment'] as $key => $value){
            if(is_array($value) && array_key_exists('upload_file', $value)){
                if($value['upload_file']['name'] == ''){ // Blank document file
                    unset($this->request->data['ProjectAttachment']);
                }
            }
        }
    } 
```

我希望有人发现这以某种形式有用。

亲切的问候，西蒙**

# html - 如何不在我的图像周围显示这个蓝框？

> ID：10187422
> 
> 赞同：2
> 
> 时间：2012-04-17T08:05:44.190
> 
> 标签：html, css

我有一个图像，它是一个弹出日历的链接，其中显示器在我的图像周围呈现一个蓝色框架，因为我将它作为一个链接，使光标在悬停时变为一只手： ![在此处输入图像描述](../Images/2b99b303196ce1f70eef02bfe739d994.png)

HTML在哪里

```
<div class="fl20">Depositionsdatum:</div>
<div class="fl40"><input type="text" size="10" name="depositionsdatum"
      id="depositionsdatum" value="">&nbsp;<a href="#"><img src="images/cal.gif" width="16"
      height="15" alt="" onclick="javascript:openCalWin('620','300','depositionsdatum')"></a></div> 
```

CSS是

```
 .avnamn {
color:arial #90002b;
font-size:140%;
display:inline;
vertical-align:3%;
margin-left:1%;
}

.b {
border:1px solid #000;
}

.Webdings {
font-family:Webdings;
}

ul {
margin-top:0;
}

.mt3 {
margin-top:-3px;
}

.mt5p {
margin-top:5px;
}

.fontS80 {
font-size:80%;
}

.link {
color:#036;
text-decoration:underline;
cursor:pointer;
font-weight:700;
}

.link_sm {
color:#036;
text-decoration:underline;
font-size:70%;
cursor:pointer;
}

.smallg {
font-size:75%;
color:#555;
}

.ssmall {
font-size:65%;
font-weight:700;
color:#555;
}

.small60 {
font-size:60%;
}

.small50 {
font-size:50%;
color:#333;
}

.smallb {
font-size:85%;
}

table {
display:inline;
}

h1 {
font-size:130%;
display:inline;
}

h2 {
font-size:100%;
display:inline;
}

h4 {
font-size:70%;
display:inline;
}

.hthin {
font-size:125%;
}

.th {
text-align:left;
}

td,th {
font-size:75%;
vertical-align:text-top;
}

.td_link {
cursor:pointer;
}

.td40 {
height:40px;
}

.td60 {
height:60px;
}

.thkant {
border-top:1px solid #000;
border-bottom:1px solid #000;
font-size:70%;
text-align:left;
}

.bb {
border-bottom:1px solid #000;
}

.bbV {
border-bottom:1px solid #FFF;
}

.TB_bt,.TB_nb,.TB_db,.TB_bb {
background-color:#efefdc;
}

.hk {
background-color:#d9ddb3;
}

.hknot {
background-color:#f9faf2;
}

.TB_bt {
border-top:1px solid #FFF;
}

.TB_bt5 {
border-top:5px solid #FFF;
}

.TB_bb {
border-bottom:1px solid #999;
}

.TB_bb2 {
border-bottom:2px solid #c1c1b3;
}

.TB_db {
border-bottom:1px solid #000;
border-top:1px solid #000;
}

.TB_tb {
border-top:2px solid #efefdc;
}

.TB_bo_hk {
border-top:1px solid #efefdc;
}

.TB_bo2 {
border:1px solid #efefdc;
}

.TB_bo2B {
border-top:2px solid #c1c1b3;
border-left:3px solid #efefdc;
border-right:3px solid #efefdc;
border-bottom:2px solid #c1c1b3;
}

.TD_bo {
border-right:1px solid #c1c1b3;
width:9%;
font-size:70%;
text-align:center;
}

.TD_bo2 {
border-right:0;
width:9%;
font-size:70%;
text-align:center;
}

.ytb {
border-left:3px solid #efefdc;
border-right:3px solid #efefdc;
}

.datum {
font-size:70%;
padding-right:5px;
vertical-align:text-top;
}

.sub {
background:#EAEAEA;
}

.sub_meny,.sub_meny_r,.sub_meny_active,.sub_meny_sm {
font-size:70%;
padding-left:20px;
padding-right:20px;
vertical-align:text-top;
}

.sub_meny_sm {
font-size:60%;
vertical-align:middle;
padding-left:10px;
padding-right:10px;
}

.sub_meny_r {
float:right;
font-size:70%;
padding-left:8px;
padding-right:8px;
}

.sub_meny_rm {
margin-top:4px;
}

.sub_meny_active {
font-weight:700;
}

.flikkant1 {
background-image:url(../images/fl1k.jpg);
background-position:center;
z-index:-1;
}

.inl_namn {
font-weight:700;
font-size:70%;
color:#000;
text-decoration:none;
}

.tr {
text-align:right;
}

.g1 {
background-color:#FFF;
line-height:20px;
}

.g2 {
background-color:#EEE;
line-height:20px;
}

.g3 {
background-color:#DCDCDC;
line-height:20px;
font-weight:700;
font-size:100%;
}

.g4 {
background-color:#CCC;
line-height:20px;
}

.popup {
background-color:#FFF;
font-size:70%;
border-color:#000;
border-style:groove;
border-width:2px;
padding:0;
}

.popupN {
background-color:#F0F0E3;
color:#000;
width:100%;
display:inline;
font-weight:700;
height:auto;
border-bottom:1px solid #000;
padding:2px;
}

.pin {
padding:6px;
}

.fl10,.fl20,.fl30,.fl40,.fl50,.fl60,.fl70,.fl80,.fl90,.fl100 {
padding-bottom:4px;
color:#000;
}

.over {
background-color:#EFEFDC;
line-height:20px;
}

.half {
line-height:50%;
}

.quarter {
line-height:25%;
}

.lh10 {
line-height:10%;
}

.checkmargin {
margin-right:25px;
}

.checkmarginL {
margin-left:25px;
}

.pusher {
padding-left:15px;
}

.pusherR {
margin-right:40px;
}

.rand3 {
background-color:#FFF;
line-height:3px;
}

.rand1 {
background-color:#FFF;
line-height:1px;
}

.whiteborder {
color:#fff;
border:4px solid #fff;
margin:10px;
padding:10px;
}

#details {
width:580px;
color:#fff;
}

.column1 {
color:#000;
width:500px;
border:0;
float:left;
margin:0;
padding:0;
}

.column2 {
color:#000;
border:0;
width:80px;
float:right;
margin:0;
padding:0;
}

.f200 {
color:#000;
}

.f210 {
color:#000;
float:left;
}

.inp_sel {
width:80%;
}

.form-bg {
background:#eeefdf;
width:1080px;
overflow:hidden;
}

.data-bar {
border-bottom:1px solid #fbfbf7;
display:inline-block;
padding:10px;
}

.left {
float:left;
width:200px;
}

.right {
float:right;
width:700px;
}

.data-box {
width:650px;
height:100px;
border:1px solid #cbcbcb;
}

#table td {
margin:120px;
}

.personName {
float:left;
width:300px;
}

.otherDetails {
float:right;
width:300px;
}

.readonly,.TB_nbA {
background-color:#CCC;
}

a:link,a:visited,a:hover,a:active {
color:#000;
text-decoration:none;
}

.fontS75,.small {
font-size:75%;
}

h3,h5 {
font-size:80%;
display:inline;
font-family:"Arial Unicode MS", Arial, Helvetica, sans-serif;
}

.TB_bo,.b2 {
border:2px solid #efefdc;
} 
```

我希望图像像在同一页面上的另一个位置一样呈现： ![在此处输入图像描述](../Images/dfa46895af0d55c54edab92404a0fb23.png) 这里没有蓝框，代码几乎相同：

```
<div id="datum" class="fl20">Datum ingivningsdag:</div>
        <div class="fl20"><input type="text" name="ingivningsdag" 
    id="ingivningsdag" value="2012-04-11">&nbsp;<a href="#"><img src="images/cal.gif" alt="" width="16" height="15" border="0" onclick="javascript:openCalWin('620','300','ingivningsdag')"></a></div> 
```

为什么它在一个地方而不是另一个地方工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T08:07:38.627

代码不相同。

请注意，第二个实例已`border="0"`设置。您要么需要将其设置为 IMG 元素的属性，要么（首选）使用 CSS 选择器来设置`border:none`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T08:12:47.133

您应该在询问之前匹配两个代码，答案就在您面前。;)

在第一个代码中没有边框 =“0”

在第二个代码中有一个border="0"

应用这个 CSS

```
 a img
    {
        border: 0;
        outline:0;(for removing dotted borders  from image and links.You gonna need this in future )
    } 
```

或在第一个代码上应用border="0"。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T08:07:41.413

只需`border=0`在图像上设置，或者在 HTML 中像这样：

```
<img src="images/cal.gif" width="16" height="15" alt="" border="0" onclick="javascript:openCalWin('620','300','depositionsdatum')"></a>` 
```

或 CSS：

```
a img
{
    border: 0;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-17T08:08:43.130

这会做到：

```
a img {
   border: none;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-17T08:09:26.233

您将图像包裹在锚点中，因此它是具有边框的链接。

```
a img { border:none; } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-17T08:10:46.457

`<img />`默认边框为 1px。`border: 0;`在您的样式表中设置或`border="0"`在您的`<img />`标签中使用内联。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-17T11:56:22.157

使用这个 css-

```
a img {border:none;outline:0;} 
```

如果需要，您也可以使用它-

```
a:hover, a:active, a:focus {outline:0;} 
```

# objective-c - 是否可以在 appCode 中自动将方法声明到头文件（.h）中？

> ID：10187424
> 
> 赞同：1
> 
> 时间：2012-04-17T08:05:56.217
> 
> 标签：objective-c, appcode

我有使用 appCode。

当我在 @implementation 文件中编写方法时，我想通过 appCode 的某些功能将方法自动声明到 heder 文件中。

例如）我在@implementation 文件中编写了一个方法。

```
@implementation myClass
- (void)testMethod{
}
@end 
```

自动将方法声明到@interface 文件中。

```
@interface myClass
- (void)testMethod;  <== automatically insert.
@end 
```

如何通过appcode的功能自动将方法声明到头文件中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T08:44:03.263

在 testMethod 名称处使用插入光标，调用 Opt+Enter 并从列表中选择“Declare method in interface”。

# java - 解决方法 Firefox 更新插件

> ID：10187428
> 
> 赞同：0
> 
> 时间：2012-04-17T08:06:08.830
> 
> 标签：java, unit-testing, firefox, selenium, webdriver

我想知道如何在 Firefox 更新时摆脱许多更新屏幕（插件兼容性......）。我在 Java 中使用 WebDriver。使用自定义 firefox 配置文件对我来说没有问题，我已经尝试过使用一些自定义 prefs.js。但没有效果。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:42:19.490

这个偏好呢？

[http://kb.mozillazine.org/Extensions.checkCompatibility](http://kb.mozillazine.org/Extensions.checkCompatibility)

此外，除非需要扩展，否则请尝试在 Firefox 的“安全模式”中启动，从而完全禁用扩展，例如在 C# 中

```
FirefoxProfile profile = new FirefoxProfile();
FirefoxBinary binary = new FirefoxBinary();
binary.StartProfile(profile, "-safe-mode"); 
```

我知道您使用的是 Java，但 Java 绑定中也存在 StartProfile 方法，我希望这就是您所追求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:42:13.820

如果您从自定义配置文件开始，您需要在配置文件文件夹中保留 prefs.js、cert8.db、cert_override.txt 文件。你只需要这些。现在对于您的插件问题，请确保 prefs.js 不包含任何指向 Firefox 旧版本的首选项。如果您使用与您正在测试的版本不同的 firefox 版本创建 firefox 配置文件，则会发生这种情况。

# javascript - 按下删除键时无法触发按键事件

> ID：10187431
> 
> 赞同：19
> 
> 时间：2012-04-17T08:06:37.300
> 
> 标签：javascript, dom-events, keyevent

我发现删除键不会`keypress`在 Chrome 中触发事件，而其他键可以工作。这个问题在 Firefox 中没有出现，只是在 Chrome 中出现，为什么？这是我的代码：

```
document.addEventListener('keypress', function (e) {
     console.log(e);
}, false); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-17T08:29:08.243

使用`keydown`或`keyup`代替，它捕获删除键（以及其他按键没有，请参阅[http://www.quirksmode.org/js/keys.html](http://www.quirksmode.org/js/keys.html)）

```
document.addEventListener('keydown', function (e) {
     console.log(e);
}, false); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T07:00:58.720

`keypress`（Del、End、Home 等）的事件不会在 **IE、Chrome 和 safari**中触发。它只在**Firefox 中有效。**.

因此您可以使用`keyup`or`keydown`事件，因为该`keypress`事件是针对真实（可打印）字符的。`"keydown"`在较低级别处理，因此它将捕获所有非打印键，如 DEL、End 等

# eclipse - Android Eclipse 看不到库的类

> ID：10187438
> 
> 赞同：1
> 
> 时间：2012-04-17T08:07:00.497
> 
> 标签：eclipse, admob, mobclix

我的 Eclipse 中有大约 5 个项目，所有项目都可以正常工作和编译，但自从上次 eclipse 和 sdk 更新以来，我遇到了 mobclix 和 admob 库的一个奇怪错误：

**应用程序编译正常，没有任何错误，但是当我打开任何带有广告的活动时，它会崩溃！**

错误：

`E/AndroidRuntime(22504): Caused by: java.lang.ClassNotFoundException: com.mobclix.android.sdk.MobclixMMABannerXLAdView in loader dalvik.system.PathClassLoader[/data/app/com.rvanavr.app.apk]`

我花了一天时间试图修复这个错误： - 删除/添加库 - 清理项目 - 重新安装 sdk - 重新安装一切

有人遇到过这个错误吗？真的需要你们的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:43:37.683

是的，我昨天遇到了同样的问题，发现问题可能与 ANT 如何在 eclipse 下构建项目有关。在我升级 Eclipse ADT 插件后，我也开始看到这个问题，并且还获得了 Android SDK 的最新更新（API 版本 10 和 15）。因此，一般基于其他stackoverflow问题，我如下所述升级了eclipse，问题就消失了。我理解的方式是 Eclipse 的构建系统在最终构建中没有包含 mobclix.jar，并且没有报告任何错误或警告来提醒这一事实。这是我升级eclipse的方法：

Eclipse Help Menu -> Install New Software，弹出这个窗口： ![安装新的eclipse软件](../Images/c60c1fdc8d9ece7fe05f93ffd36203cb.png)

选择“The Eclipse Project Updates”——我使用的是 3.7 版（Indigo）。然后点击“全选”，然后点击“完成”。所有不是最新的 Eclipse 组件都将升级到最新的。然后它会要求你重新启动 Eclipse。当我这样做并重建我的项目时，我对 mobclix.jar 和未定义的类没有任何问题。

顺便说一句，升级后，这是我的 Eclipse 版本（如果您想将当前版本与我的版本进行比较）：

版本：Indigo Service Release 2 内部版本 ID：20120216-1857

# javascript - jQuery 插件无法使用 Chrome（有时）。在Firefox中运行良好

> ID：10187439
> 
> 赞同：-1
> 
> 时间：2012-04-17T08:07:00.917
> 
> 标签：javascript, jquery, google-chrome

我在网站上添加了一个显示日历的插件，用户可以选择几天。它在 Firefox 上运行良好，但不能在 Chrome 和 Opera 上运行。奇怪的是，我把插件隔离在另一个网站上，就用这段代码：

```
<title>jQuery Datepicker</title>
<style type="text/css">
    @import "jquery.datepick.css";
</style>
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="jquery.datepick.js"></script>
<script type="text/javascript" src="jquery.datepick.lang.min.js"></script>
<script type="text/javascript" src="jquery.datepick-es.js"></script>

<script type="text/javascript">
     $(function() {
        $('#popupDatepicker').datepick({multiSelect: 999, monthsToShow: 2,dateFormat: 'yyyy/mm/dd', showTrigger: '<button id="showcal" type="button" class="trigger    ">' +
     '<img src="img/calendar.gif" alt="Calendario"></button>'});
         //$.datepick.regional['es']));
 });

</script>
</head>
<body>

<p>A popup datepicker <input type="text" id="popupDatepicker"></p> 
```

这是使插件工作的最少代码，它在 Chrome 中工作（插件站点在这里）[1](http://keith-wood.name/datepick.html)

问题是当我在完整的网站上实现它时，它不起作用。它是包含相同库的相同代码，但显然是其他代码。

我检查了萤火虫，它没有返回任何错误，所以我有点迷茫。

以防万一，我的 Chrome 版本是 18.0.1025.162，但应该不相关。

有什么问题？

最后一件事：是否有任何一种适用于所有浏览器的 javascript 标准？

非常感谢您提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:14:49.603

[jQuery UI](http://jqueryui.com/)具有出色的日期选择器，并且可以与大多数浏览器兼容。

# android - 如何在 Android 设备和 PC 之间创建多个蓝牙套接字连接？

> ID：10187442
> 
> 赞同：1
> 
> 时间：2012-04-17T08:07:09.320
> 
> 标签：android, sockets, bluetooth

```
UUID u = UUID.fromString(MY_UUID);
BluetoothSocket btsoc = device.createRfcommSocketToServiceRecord(u);
btsoc.connect(); 
```

这将创建与 PC 的蓝牙连接。我可以创建另一个具有不同 UUID 的套接字连接吗？在普通套接字中，我们可以通过一个 IP 地址上的端口号来区分它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:54:37.117

是的，您可以使用不同的 UUID 创建许多连接。您可以查看此问题（[多个蓝牙连接](https://stackoverflow.com/questions/3943182/multiple-bluetooth-connection)）以获取更多详细信息。

;)

# testing - 没有运行后端的 Spring-WS 2.0 单元测试

> ID：10187444
> 
> 赞同：0
> 
> 时间：2012-04-17T08:07:18.963
> 
> 标签：testing, maven, integration, spring-ws, easymock

我希望能够在开发过程中进行一些单元测试，以便在扩展/更改给定 Web 服务（端点）的工作方式时捕获潜在的错误。

我一直在研究 EasyMock，这似乎是一种可行的方法 - 但是！...我正在使用 maven (2.0.9) 并想使用 mvn test 进行测试，但这需要我的后端正在运行或者我使用 EasyMock - 然后要求我可以连接到数据库（因此这也需要一些模拟）。我目前拥有的网络服务都从后端库中检索数据......

由于我有 15 个左右的 Web 服务被组织的不同部分以不同的版本使用，我非常希望能够测试更改不会破坏旧版本。

我不敢相信我是第一个遇到这个问题的人，所以任何提示、提示或类似的东西都会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:37:24.337

经过基于评论的谈话：P，实际上似乎没有问题。关键是要了解某些组件的依赖项（如数据库）只是其真正的实现依赖项，而不是其接口的一部分。模拟是关于提供替代实现，以满足交互的需要。

通常，正如您所提到的，在单元测试时，您在后端依赖的所有东西都需要被模拟（或通常加倍），无论这些东西到底是什么。如果您依赖某个外部端点，则必须模拟它。如果你依赖 RDBMS，你也可以模拟它，但可能更好的测试替身在这里是假的而不是模拟，所以你可以使用一些内存数据库（如 HSQL 或 H2），假设你没有使用特定于供应商的, 代码中的原生 SQL。事实上，您仍然提供一些自己的、通常简化的某些接口的实现，但现在您为此使用模拟框架。前段时间，开发人员编写自己的手工模拟类。即使在今天，在没有 mocking 框架的帮助下制作自己的 mock 有时确实是个好主意。

顺便说一句，还有两件事。如果你也考虑做一些集成测试，Spring WS 从 2.0 版本开始`spring-ws-test`通过提供非常流畅的 API 提供了很好地支持这一点的模块。有关更多信息，请查看 Spring WS 文档，如果您有兴趣。第二件事，如果您只是从一般模拟开始，还可以考虑使用 Mockito。在我看来，它也非常好。老实说，EasyMock 是我个人模拟 lib 的默认选择，但我发现 Mockito 同样简单而强大。据我所知，它也受到许多开发人员的青睐，现在它可能更性感：P。

# java - 如何使用 Netty 在单个端口上编写多协议处理程序？

> ID：10187445
> 
> 赞同：3
> 
> 时间：2012-04-17T08:07:27.030
> 
> 标签：java, tcp, binary, ascii, netty

我是 Netty 的新手，我想知道当 TCP 客户端有时发送可变长度的二进制记录（十六进制）并且有时发送可变长度的 ASCII 记录时如何读取/处理传入的 TCP 数据，这些记录都不是由回车分隔的或换行。

TCP 客户端正在发送字节流，如下所示：

1.  以“$”开头但字节数不定且不以任何字符结尾的二进制字节流，以及

2.  以 '(' 开头并以 ')' 结尾的 ASCII 字节流，但字节数不同且不以任何字符结尾

两组记录都到达同一个端口。

我需要如何编写基于 Netty 的 TCP 服务器来处理/读取两者？

提前致谢。

库纳尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T08:25:40.827

查看[端口统一示例](http://static.netty.io/3.5/xref/org/jboss/netty/example/portunification/package-summary.html)。它完全符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:03:25.903

首先，不要将所有内容混合在一起 '$' 是一个字符，在大多数编码中它可以由一个字节表示，但对于普通字符来说几乎不是这种情况（在 UTF-8 中，字符是可变长度编码并且可以使用1、2 或 3 个字节）。

这取决于您的流的长度。

1）最简单的解决方案，如果它可以**放入**发送者的内存中，是**使用具有两个字段标题的帧**：

*   一个字节的类型（字节或字符串）
*   2 字节（例如使用无符号 Int16）表示帧的长度（数据字节数）。

比，您可以使用 FrameDecoder 来接收和解码整个帧。

2）如果您的流很大并且**无法放入内存中**，您有两种解决方案：

*   **将您的流拆分为帧**（由于每个帧的标题而有一点开销）
*   使用Channel.close **()**事件通知**EndOfStream**（这更容易，但如果您需要创建新连接并一次又一次地进行握手，这可能会导致一些延迟问题......

在每种情况下，Netty 都为流式传输字符串提供了一些**StringEncoder**和**StringDecoder**。还有一些带有各种有用标头的**FrameDecoder**和**FrameEncoder 。**

# mongodb - 在 MongoDB reduce 中查找查询

> ID：10187463
> 
> 赞同：0
> 
> 时间：2012-04-17T08:08:33.273
> 
> 标签：mongodb, mapreduce

我有两个集合：一个是来自设备的原始数据，一个是设备配置

我使用 map reduce 来处理来自设备的原始数据。我需要在 reduce 步骤中获取配置参数。

是否可以 ？

提前致谢

**更新：** 我有很多数据每天要处理 400000 个文档和大约 4000 个配置文档。因此我必须在两个集合之间进行连接并将其注入 map/reduce ？这是最好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T08:16:15.713

不，Map/reduce 应该始终使用调用它的集合数据。如果您需要配置数据，则必须在调用 map/reduce 之前确保它位于原始设备数据中。由于 m/r 只是在服务器端执行的 JavaScript，因此在技术上可以查询其他集合，但它可能会中断（想到分片）。

# css - 导航/菜单显示在幻灯片后面的 Internet Explorer 中

> ID：10187464
> 
> 赞同：0
> 
> 时间：2012-04-17T08:08:41.963
> 
> 标签：css

自 2 天以来，我一直在研究解决方案，但我找不到问题所在。问题是我的导航/菜单位于标题中的幻灯片后面，并且仅在 IE 中。所有其他浏览器工作正常。

这是网址：[http ://ditzinger.de/wordpress/bahntechnik/](http://ditzinger.de/wordpress/bahntechnik/)

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:05:00.163

将较高的`z-index`值设置为具有位置的子菜单类......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:17:49.590

```
In Internet Explorer positioned elements generate a new stacking context, 
starting with a z-index value of 0\. Therefore z-index doesn’t work correctly. 

giving the parent element a higher z-index actual fixes the bug. 
```

[http://brenelz.com/blog/squish-the-internet-explorer-z-index-bug/](http://brenelz.com/blog/squish-the-internet-explorer-z-index-bug/)

# jquery - Jquery - 如果宽度小于 767 则更改 href

> ID：10187467
> 
> 赞同：2
> 
> 时间：2012-04-17T08:08:56.110
> 
> 标签：jquery, attributes, mobile-devices

我目前正在开发一个响应式网站。我开发了一个 jquery 脚本来更改链接中的 href 属性。

```
$("a.modal").attr("href", "https://secured.sirvoy.com/book.php?c_id=1602&h=ea3a7c9286f068fb6c1462fad233a5e0") 
```

它工作得很好 - 但我希望它只针对屏幕宽度小于 767 像素的设备（移动设备）。

这个脚本应该可以工作，但我真的不能让它工作。

```
<script type="text/javascript">
$(document).ready(function(){
if ($(window).width() < 767) {
$("a.modal").attr("href", "https://secured.sirvoy.com/book.php?c_id=1602&h=ea3a7c9286f068fb6c1462fad233a5e0")
}
});
</script> 
```

链接到网页。

[http://visbyfangelse.se.linweb63.kontrollpanelen.se/rum-priser/](http://visbyfangelse.se.linweb63.kontrollpanelen.se/rum-priser/)

它是我要更改的粉红色按钮的链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T08:15:14.597

实际上，问题在于您的其余代码。为你让我挖掘它而感到羞耻。:P

```
$('a[name=modal]').click(function(e) {
    //Cancel the link behavior
    e.preventDefault();
    // etc etc. 
```

因此，您会因为 preventDefault 而阻止 href 触发。为什么不在这里打补丁：

```
$('a[name=modal]').click(function(e) {
    //Cancel the link behavior
    e.preventDefault();
    if ($(window).width() < 767)
    {
        // I'm assuming you'd get this dynamically somehow;
        location.href="https://secured.sirvoy.com/book.php?c_id=1602&h=ea3a7c9286f068fb6c1462fad233a5e0";
        return;
    }
    // etc etc. 
```

* * *

已添加 | 帮助 OP 使他的项目工作的功能全文：

```
$('a[name=modal]').click(function(e) {
    //Cancel the link behavior

    e.preventDefault();
    if ($(window).width() < 767)
    {
        // I'm assuming you'd get this dynamically somehow;
        location.href="https://secured.sirvoy.com/book.php?c_id=1602&h=ea3a7c9286f068fb6c1462fad233a5e0";
        return;
    }
    //Get the A tag
    var id = $(this).attr('href');

    //Get the screen height and width
    var maskHeight = $(document).height();
    var maskWidth = $(window).width();

    //Set height and width to mask to fill up the whole screen
    $('#mask').css({'width':maskWidth,'height':maskHeight});

    //transition effect     
    $('#mask').fadeIn(1000);    
    $('#mask').fadeTo("slow",0.8);  

    //Get the window height and width
    var winH = $(window).height();
    var winW = $(window).width();

    //transition effect
    $(id).fadeIn(2000); 

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:12:07.773

你可以使用[window.matchmedia](https://developer.mozilla.org/en/DOM/window.matchMedia)

```
if (window.matchMedia("(max-width:768px)").matches) {
   $("a.modal").attr("href", "...");
} 
```

有关兼容性列表，请参阅[http://caniuse.com/matchmedia](http://caniuse.com/matchmedia)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T06:30:42.140

此脚本将帮助您检测所有浏览器的屏幕尺寸

```
var viewportwidth;
var viewportheight;

//Standards compliant browsers (mozilla/netscape/opera/IE7)
if (typeof window.innerWidth != 'undefined')
{
    viewportwidth = window.innerWidth,
    viewportheight = window.innerHeight;
}

// IE6
else if (typeof document.documentElement != 'undefined'
&& typeof document.documentElement.clientWidth !=
'undefined' && document.documentElement.clientWidth != 0)
{
    viewportwidth = document.documentElement.clientWidth,
    viewportheight = document.documentElement.clientHeight;
}

//Older IE
else
{
    viewportwidth = document.getElementsByTagName('body')[0].clientWidth,
    viewportheight = document.getElementsByTagName('body')[0].clientHeight;
} 
```

警报（视口宽度+“〜”+视口高度）；

# asp.net-mvc - 在 ASP.NEt MVC 3 中的 Html.BeginForm() 中传递 DropDownList 的 SelectedValue

> ID：10187469
> 
> 赞同：3
> 
> 时间：2012-04-17T08:09:00.970
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, html-helper, html.beginform

这是我的查看代码：

```
@using(Html.BeginForm(new { SelectedId = /*SelectedValue of DropDown*/ })) {

 <fieldset>

     <dl>
       <dt>
           @Html.Label(Model.Category)
       </dt>
       <dd>
        @Html.DropDownListFor(model => Model.Category, CategoryList)
       </dd>
    </dl>

 </fieldset>
 <input type="submit" value="Search" />

} 
```

如代码所示，我需要将`dropdown`选定的值传递给`BeginForm()`Html 帮助器中的操作。你的建议是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T08:11:50.390

提交表单时将传递所选值，因为下拉列表由`<select>`元素表示。您只需要调整您的视图模型，使其具有一个名为`SelectedId`例如您将绑定下拉列表的属性：

```
@using(Html.BeginForm() )
{
    <fieldset>
        <dl>
            <dt>
                @Html.LabelFor(x => x.SelectedId)
            </dt>
           <dd>
                @Html.DropDownListFor(x => x.SelectedId, Model.CategoryList)
           </dd>
        </dl>
    </fieldset>

    <input type="submit" value="Search" />
} 
```

这假设以下视图模型：

```
public class MyViewModel
{
    [DisplayName("Select a category")]
    public int SelectedId { get; set; }

    public IEnumerable<SelectListItem> CategoryList { get; set; }
} 
```

这将由您的控制器处理：

```
public ActionResult Index()
{
    var model = new MyViewModel();
    // TODO: this list probably comes from a repository or something
    model.CategoryList = new[]
    {
        new SelectListItem { Value = "1", Text = "category 1" },
        new SelectListItem { Value = "2", Text = "category 2" },
        new SelectListItem { Value = "3", Text = "category 3" },
    };
    return View(model);
}

[HttpPost]
public ActionResult Index(MyViewModel model)
{
    // here you will get the selected category id in model.SelectedId
    return Content("Thanks for selecting category id: " + model.SelectedId);
} 
```

# wordpress - 在 wordpress 网站被黑后只显示白页

> ID：10187475
> 
> 赞同：-1
> 
> 时间：2012-04-17T08:09:45.360
> 
> 标签：wordpress, rackspace-cloud

最近一个客户网站在 Rackspace 上被黑了，从那以后我一直试图恢复网站上的某些项目。

我已经清理了所有内容并进行了框架升级。

现在，当我尝试安装新东西、进行更改或只是发布更新时，它会在成功后呈现一个白页......

我已经禁用了我所有的插件，但仍然是同样的问题。

你们中是否有人经历过这种情况，您可以采取哪些步骤来恢复这种情况......

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:00:39.257

好的，所以我设法找到了一些有用的好技巧。

最终禁用了所有插件，重新安装了 wordpress，以下文件中存在一些问题。

`wp-config.php`,`pluggable.php`和`class.wp-scripts.php`- 所有这些都错过了结束`?>`

并确保您的主题`functions.php`文件没有任何空格。

# asp.net - 输入按钮导致RequiredFieldValidator触发

> ID：10187480
> 
> 赞同：3
> 
> 时间：2012-04-17T08:10:10.963
> 
> 标签：asp.net, requiredfieldvalidator, input-button-image

我的页面上有一个动态创建的输入按钮，每次按下它时，它都会为电子邮件地址中的空白字段触发RequiredFieldValidator。有没有办法覆盖它？

输入代码：

```
<input class=\"hledat\" id=\"searchbutton\" type=\"image\" src=\"search-button.gif\" value=\"{0}\" onclick=\"search('{1}');\" onkeypress=\"search('{1}');\"/>" 
```

验证器代码：

```
<asp:TextBox runat="server" ID="txtEmail" ClientIDMode="Static" Width="98%" />
<asp:RequiredFieldValidator runat="server" ControlToValidate="txtEmail" ErrorMessage="email"
    Display="dynamic" ValidationGroup="newsletter" />
<asp:RegularExpressionValidator runat="server" ControlToValidate="txtEmail" ErrorMessage="email"
    ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" Display="dynamic"
    ValidationGroup="newsletter" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:29:31.740

通过编写**runat="Server"**属性使其成为服务器端按钮，并根据您的要求创建**CausesValidation="true|false"**。如果你做假，它不会验证。如果它解决了问题，请告诉我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:11:37.927

> 我的页面上有一个动态创建的输入按钮，每次按下它时，它都会为电子邮件地址中的空白字段触发RequiredFieldValidator。有没有办法覆盖它？

[**HtmlButton.CausesValidation 属性**](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlbutton.causesvalidation%28v=vs.71%29.aspx)

## 标记

`<button causesvalidation="false" /><button ID="StateQueryButton" CausesValidation="False" runat="server"> Submit </button>`

* * *

> 是的，我想让它回发

**[HtmlButton.OnServerClick 方法](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlbutton.onserverclick%28v=vs.80%29.aspx)**

## 代码背后

```
protected void FancyBtn_Click(object sender, EventArgs e)
{  

} 
```

## 标记

`<button causesvalidation="false" /><button ID="StateQueryButton" CausesValidation="False" OnServerClick=" FancyBtn_Click" runat="server" > Submit </button>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:29:36.067

尝试将**runat="server"**添加到输入按钮，如图所示：

*****注意*** *runat="server"。虽然 asp:button 的呈现方式可能类似，但如果您真正想要的是 HTML 按钮输入，则可以使用它。是的，ASP.NET 将在服务器端获取价值。*****

 **```
<input type="button" runat="server" id="btnTest" value="change" onclick="doPostBack('btnTest', '');"/> 
```**

# c# - 将 pdf 文件与书签合并

> ID：10187483
> 
> 赞同：5
> 
> 时间：2012-04-17T08:10:26.247
> 
> 标签：c#, pdf, merge, itext, pdf-generation

我正在尝试合并很多pdf，并且对于每个pdf我想添加一个书签（pdf的名称），我发现了合并pdf的不同技术，但它们都不能只添加书签，例如。itextsharp 添加一章，然后是该章的书签，我不想更改 pdf 的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T04:59:49.137

使用 itextsharp 你可以做到。我通过以下方法做到这一点：

```
MergePdfFiles(string outputPdf, string[] sourcePdfs) {
    PdfReader reader = null;
    Document document = new Document();
    PdfImportedPage page = null;
    PdfCopy pdfCpy = null;
    int n = 0;
    int totalPages = 0;
    int page_offset = 0;
    List < Dictionary < string, object >> bookmarks = new List < Dictionary < string, object >> ();
    IList < Dictionary < string, object >> tempBookmarks;
    for (int i = 0; i <= sourcePdfs.GetUpperBound(0); i++) {
        reader = new PdfReader(sourcePdfs[i]);
        reader.ConsolidateNamedDestinations();
        n = reader.NumberOfPages;
        tempBookmarks = SimpleBookmark.GetBookmark(reader);
        if (i == 0) {
            document = new iTextSharp.text.Document(reader.GetPageSizeWithRotation(1));
            pdfCpy = new PdfCopy(document, new FileStream(outputPdf, FileMode.Create));
            document.Open();
            SimpleBookmark.ShiftPageNumbers(tempBookmarks, page_offset, null);
            page_offset += n;
            if (tempBookmarks != null)
                bookmarks.AddRange(tempBookmarks);
            //  MessageBox.Show(n.ToString());
            totalPages = n;
        } else {
            SimpleBookmark.ShiftPageNumbers(tempBookmarks, page_offset, null);
            if (tempBookmarks != null)
                bookmarks.AddRange(tempBookmarks);
            page_offset += n;
            totalPages += n;
        }
        for (int j = 1; j <= n; j++) {
            page = pdfCpy.GetImportedPage(reader, j);
            pdfCpy.AddPage(page);
        }
        reader.Close();
    }
    pdfCpy.Outlines = bookmarks;
    document.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:18:24.243

尝试[Docotic.Pdf 库](https://bitmiracle.com/pdf-library/)来完成这项任务。

这是执行您所描述的示例代码：

```
public static void combineDocumentsWithBookmarks()
{
    string[] names = new string[] { "first.pdf", "second.pdf", "third.pdf" };

    using (PdfDocument pdf = new PdfDocument())
    {
        int targetPageIndex = 0;
        for (int i = 0; i < names.Length; i++)
        {
            string currentName = names[i];

            if (i == 0)
                pdf.Open(currentName);
            else
                pdf.Append(currentName);

            pdf.OutlineRoot.AddChild(currentName, targetPageIndex);
            targetPageIndex = pdf.PageCount;
        }

        // setting PageMode will cause PDF viewer to display
        // bookmarks pane when document is open
        pdf.PageMode = PdfPageMode.UseOutlines;
        pdf.Save("output.pdf");
    }
} 
```

该示例将不同的文档组合成一个 PDF 并创建书签。每个书签都指向原始文档的第一页。

免责声明：我为开发 Docotic.Pdf 库的公司工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-24T08:07:39.933

```
public string MergeFiles(string outputPath)
{
    if (string.IsNullOrEmpty(outputPath))
        throw new NullReferenceException("Path for output document is null or empty.");

    using (Document outputDocument = new Document())
    {
        using (PdfCopy pdf = new PdfCopy(outputDocument, new FileStream(outputPath, FileMode.Create)))
        {
            outputDocument.Open();
            // All bookmarks for output document
            List<Dictionary<string, object>> bookmarks = new List<Dictionary<string, object>>();
            // Bookmarks of the current document
            IList<Dictionary<string, object>> tempBookmarks;
            int pageOffset = 0;

            // Merge documents and add bookmarks
            foreach (string file in Files)
            {
                using (PdfReader reader = new PdfReader(file))
                {
                    reader.ConsolidateNamedDestinations();
                    // Get bookmarks of current document
                    tempBookmarks = SimpleBookmark.GetBookmark(reader);

                    SimpleBookmark.ShiftPageNumbers(tempBookmarks, pageOffset, null);

                    pageOffset += reader.NumberOfPages;

                    if(tempBookmarks != null)
                        // Add bookmarks of current document to all bookmarks 
                        bookmarks.AddRange(tempBookmarks);

                    // Add every page of document to output document
                    for (int i = 1; i <= reader.NumberOfPages; i++)
                        pdf.AddPage(pdf.GetImportedPage(reader, i));
                 }
             }

             // Add all bookmarks to output document
             pdf.Outlines = bookmarks;
         }
    }

    return outputPath;
} 
```

我通过使用 foreach 循环遍历 pdf 并使用语句优化了*Md Kamruzzaman Sarker 的答案。*像这样对我来说看起来更干净，但所有功劳都归他所有。

# java - 将 TCP 流量重定向到另一个目的地

> ID：10187488
> 
> 赞同：0
> 
> 时间：2012-04-17T08:10:45.453
> 
> 标签：java, traffic, socketserver

我有一个游戏客户端。这与这个游戏有关。我正在尝试设置一个套接字服务器来拦截到游戏服务器的所有流量（游戏通过使用套接字运行）

我的问题是我需要将我的计算机产生的所有流量重定向到游戏服务器 ip + 端口到 127.0.0.1 以使其连接到我自己首先创建的套接字服务器。

我知道我可以使用 Windows 主机文件，但这会重定向所有流量。我只希望重定向 1 个端口（具有 TCP 流量的端口）如果 HTTP 流量也被重定向，它会破坏一切。

我正在使用 Windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:52:10.350

也许[Privoxy](http://en.wikipedia.org/wiki/Privoxy)可以帮助你。它是 Internet Junkbuster 的继任者，如以下[问题](https://stackoverflow.com/questions/332651/forwarding-only-on-a-single-port-8080-to-localhost-windows-possible)的答案中所述。

# android - 如何使用 Android NDK 编译具有成员函数的结构？

> ID：10187491
> 
> 赞同：0
> 
> 时间：2012-04-17T08:11:02.880
> 
> 标签：android, c++, struct, compiler-errors, android-ndk-r5

> **可能重复：**[结构成员函数中的“{'标记之前的](https://stackoverflow.com/questions/4247615/expected-or-attribute-before-token-in-struct-memb)
> [预期'：'，'，'，';'，'}'或'**属性'”**](https://stackoverflow.com/questions/4247615/expected-or-attribute-before-token-in-struct-memb)

我正在用 android ndk-build 编译一个 C++ 库。当代码具有其中定义了成员函数的结构时，我会遇到编译错误。此代码与其他编译器一起编译。

示例代码：

```
typedef struct
{
    boolean current;
    int a;
    boolean IsCurrent() const
    {
      return current;
    }
} sampleStruct; 
```

我得到的错误是 - “错误：预期'：'，'，'，';'，'}'或'**属性**'在'const'之前”如果我摆脱const，错误是 - “错误：预期' :', ',', ';', '}' or ' **attribute** ' before '{' token"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:13:52.610

建议：

1.  替换`boolean`为`bool`, 因为那是 C++ 的布尔类型。
2.  确保您没有使用 C 编译器进行编译。

风格建议：请注意，这`typedef struct { ... } name;`是 C++ 中过时的做法。只需 write `struct name { ... };`，它使您能够编写构造函数和析构函数。

# objective-c - NSManagedObjectModel 用 mergeModelFromBundles 初始化：nil 在 SenTestCase 中找不到模型

> ID：10187496
> 
> 赞同：2
> 
> 时间：2012-04-17T08:11:16.580
> 
> 标签：objective-c, ios, core-data, sentestingkit

我正在尝试在 SenTestCase 中使用 CoreData。问题是找不到的 NSManagedObjectModel。我试图通过在应用程序包中搜索 mom 文件来使用 URL 对其进行初始化，但我找不到它。这就是为什么我切换到：

```
NSManagedObjectModel *objectModel = [NSManagedObjectModel mergedModelFromBundles:nil]; 
```

这确实可以正常工作，但仅在主应用程序中。如果我尝试在 SenTestCase 中运行它，则返回的 objectModel 没有任何实体：

```
(gdb) po objectModel
(<NSManagedObjectModel: 0xab72480>) isEditable 0, entities {
}, fetch request templates {
} 
```

我不得不承认，我不知道生成 mom 文件需要什么样的设置。我已将 .xcdatamodeld 文件添加到应用程序目标和测试目标中的已编译源列表中。

以下代码在应用程序 ViewController viewDidLoad 方法中正常工作，但在 SenTestCase 类的测试用例中无法正常工作：

```
- (void)testCoreData {
    NSManagedObjectModel *objectModel = [NSManagedObjectModel mergedModelFromBundles:nil];

    NSManagedObjectContext *context = [[NSManagedObjectContext alloc] init];

    NSPersistentStoreCoordinator *coordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: objectModel];
    [context setPersistentStoreCoordinator: coordinator];

    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    url = [url URLByAppendingPathComponent:@"TestDatabase"];

    NSLog(@"Path: %@", url);

    NSError *error;

    NSPersistentStore *newStore = [coordinator addPersistentStoreWithType:NSSQLiteStoreType
                                                        configuration:nil
                                                                  URL:url
                                                              options:nil
                                                                error:&error];

    if (newStore == nil) {
        NSLog(@"Store Configuration Failure\n%@",
              ([error localizedDescription] != nil) ?
              [error localizedDescription] : @"Unknown Error");
    }

    TaskSet *taskSet = [NSEntityDescription insertNewObjectForEntityForName:@"TaskSet" 
                                                 inManagedObjectContext:context];
    taskSet.taskSetId = @"1234";

    NSLog(@"TaskSet: %@", taskSet);
    NSError *saveError;
    if ([context save:&saveError]) {
        NSLog(@"Store Saved successfully");
    } else {
        NSLog(@"Store not saved! Error: %@", saveError);
    }
} 
```

错误：

```
Catchpoint 3 (exception thrown).Unknown.m:0: error: -[ControllerTest testCoreData] : +entityForName: could not locate an entity named 'TaskSet' in this model. 
```

在 SenTestCase 中运行和在 viewDidLoad 中运行有什么区别？我需要做什么才能将核心数据模型编译成测试用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T22:29:02.857

这个问题之前已经回答过：[Unit Test can't find Core Data model file](https://stackoverflow.com/questions/5662947/unit-test-cant-find-core-data-model-file)

归功于 Luther Baker 指出 SenTestCases 没有使用主 Bundle。如果要将数据写入文件，则必须使用他的回答中描述的标识符创建包。

# spring - SpringMethodInvocationBean：参数是一个接口

> ID：10187497
> 
> 赞同：0
> 
> 时间：2012-04-17T08:11:16.783
> 
> 标签：spring, stored-procedures, el

```
<bean id="arrayDescriptor"
    class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject">
        <value>oracle.sql.ArrayDescriptor</value>
    </property>
    <property name="targetMethod">
        <value>createDescriptor</value>
    </property>
    <property name="arguments">
        <list>
            <value>UDB_NAME</value>
            <value>#{database.getConnection()}</value>
        </list> 
    </property>
</bean> 
```

我似乎无法使该方法起作用，因为它需要（String，java.sql.Connection）的参数而不是获取（String，org.basic.datasource.PoolableConnection）。

是否可以在 EL 上进行类型转换？我有研究这是不可能的。我可以使用另一个 spring api 来运行方法和参数吗？是否可以在接口处在 Spring 中实例化？我有研究，这是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:01:19.847

首先是[`ArrayDescriptor.createDescriptor()`](http://docs.oracle.com/cd/E16338_01/appdev.112/e13995/oracle/sql/ArrayDescriptor.html)requires `DataSource`，而不是连接。我猜`database`代表`DataSource`，试试：

```
<value>#{database}</value> 
```

甚至：

```
<ref bean="database"/> 
```

使用 Java 配置并避免这种 XML 地狱怎么样？

```
@Configuration
public class Cfg {

    @Resource
    private DataSource database;

    @Bean
    public ArrayDescriptor arrayDescriptor() {
        return ArrayDescriptor.createDescriptor("UDB_NAME", database);
    }
} 
```

# events - 在 GWT 面板之间转发鼠标事件

> ID：10187500
> 
> 赞同：1
> 
> 时间：2012-04-17T08:11:47.293
> 
> 标签：events, gwt, mouse, panel, forwarding

我有几个 GWT 面板在 LayoutPanel 中相互叠加。我的底部面板需要鼠标事件，但这些被顶部面板捕获。有没有办法防止面板下沉事件，让这些事件被堆栈中较低的面板捕获？

谢谢，

乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:28:00.233

有 CSS 属性[`pointer-events: none`](https://developer.mozilla.org/en/CSS/pointer-events)，但在 IE 和 Opera 中不起作用。对于那些（至少），我认为你必须：

1.  暂时隐藏较高层，
2.  找到将在较低层中定位的元素（使用[`$doc.elementFromPoint`](http://msdn.microsoft.com/en-us/library/ie/ms536417%28v=vs.85%29.aspx)来自 JSNI），
3.  然后取消隐藏更高的层。
4.  在其上[触发](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/dom/client/DomEvent.html#fireNativeEvent%28com.google.gwt.dom.client.NativeEvent,%20com.google.gwt.event.shared.HasHandlers%29)[合成事件](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/dom/client/Document.html#createClickEvent%28int,%20int,%20int,%20int,%20int,%20boolean,%20boolean,%20boolean,%20boolean%29)

别担心，隐藏/取消隐藏对用户来说是察觉不到的（浏览器甚至不会渲染它）

# javascript - GridView asp .net中的日期范围验证

> ID：10187508
> 
> 赞同：0
> 
> 时间：2012-04-17T08:12:16.610
> 
> 标签：javascript, jquery, asp.net, c#-4.0

我的 GridView 中有两列，即开始日期和结束日期。我在 ItemTemplate 部分为他们使用 Ajax 的 CalendarExtender。

那么，验证 start date 不应大于 end date 的最佳方法是什么。现在，任何控件验证的每次选择更改都应提示用户输入无效值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:18:53.397

最好的方法是将 Javascript 函数连接到日历扩展器。该事件是 OnClientDateSelectionChanged = "CheckDate" 并使用 Microsoft AJAX 查找其他控件。您可以将此应用于 Gridview DataBound 事件中的每个日历扩展程序。

```
function CheckDate(sender, args)
        {
           var Calendar_EndDate = $find(EndDateCalendarExtender.ClientID);
           Calendar_EndDate._startDate = sender._selectedDate;
        } 
```

希望能帮助到你。

# c - 对象创建：指向值类型对象内动态分配的数据的指针——好还是坏？

> ID：10187509
> 
> 赞同：4
> 
> 时间：2012-04-17T08:12:28.367
> 
> 标签：c

我有一个简单的结构：

```
typedef struct {
    int width, height;
    unsigned char *pixels;
} image; 
```

哪个 API 更好？

```
image *imagecreate(int w, int h) {
    image *img = malloc(sizeof(image));
    img->width = w;
    img->height = h;
    img->pixels = calloc(w * h, 3);
    return img;
}

void imagefree(image *img) {
    free(img->pixels);
    free(img);
} 
```

或者

```
image imagecreate(int w, int h) {
    image img;  
    img.width = w;
    img.height = h;
    img.pixels = calloc(w * h, 3);
    return img;
}

void imagefree(image *img) {
    free(img->pixels);
    img->width = img->height = 0;
} 
```

?

为这样一个小结构做一个额外的 malloc() 似乎有点矫枉过正，它只是一个指向真正动态分配数据的指针的包装器。但另一方面，在值类型中隐藏指向动态分配内存的指针（对我而言）感觉不自然。人们可能会认为您不必释放它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:39:02.563

你在谈论API。因此，**让您的客户容易正确使用和难以错误使用**是至关重要的。

**选项 #2 的小改进**

例如，如果我是您的第二个 API 的用户：

```
image imagecreate(int w, int h);
void imagefree(image *img); 
```

我什至可能不会注意到需要调用`imagefree`，因为`imagecreate`返回一个对象，而不是指向对象的指针，而`imagefree`需要一个指针。我可能认为这`imagefree`只是`delete image`堆分配对象的包装。所以我不会将它用于“堆栈”对象。

因此，这更好：

```
image imagecreate(int w, int h);
void imagefree(image img); 
```

虽然您在内部有一个堆分配的成员`image`，但您将其隐藏在这些 API 中，这很好。而且它们具有一致的“外观”，更好，更不容易出错。

**那么选项#1呢？**

至于您的第一个选择，那更好吗？这取决于（取决于个人）。至于我，我更喜欢选项#1。

```
image *imagecreate(int w, int h);
void imagefree(image *img); 
```

*为什么？*

虽然我们没有办法通过 C++ 中的 RAII 之类的析构函数强制资源自动销毁，但通常会更加关注看到从 API 返回的“指针”的 C 程序员（我们对指针很敏感，不是吗？ ? ;)。他们很可能一直在问自己：内部是动态分配的`imagecreate`吗？我需要通过其他 API 释放它吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:17:01.500

不同之处在于您`struct`在第一种情况下是动态分配的，而在第二种情况下是自动分配的。这是个人喜好、编码标准和意见的问题。第二种方式对我来说似乎更安全，因为它少了一种`free`记住要做的事情，但既然你`free`无论如何都必须这样做 - 并不那么重要。

请注意，在第二种情况下，`struct`将复制到返回值中。您似乎很好地处理了其中的指针，但它在那里是潜在的地雷。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:07:07.470

我会选择第一个。假设你的结构中有一个描述符'char name[100]'，你的第二个将使用 100 字节的堆栈空间，它必须由操作系统处理，而第一个内存由你自己处理（使用自写的垃圾收集器而不是标准的malloc），您可以随意移动对象的句柄，而不必照顾有限的堆栈空间。

# c - 理解 C 中的指针

> ID：10187510
> 
> 赞同：1
> 
> 时间：2012-04-17T08:12:28.533
> 
> 标签：c, pointers

我正在尝试学习 C 中的指针，但与以下概念混淆：

```
char *string = "hello"
char *string2; 
```

之间的主要区别是什么：

```
A.) *string2 = string; 
```

然后

```
B.) string2 = "bye"; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T16:11:56.493

一些图片可能会有所帮助。

假设以下内存映射（地址完全是任意的，不反映任何已知架构）：

```
项目地址 0x00 0x01 0x02 0x03
---- -------- ---- ---- ---- ----
“你好” 0x00501234 'h' 'e' 'l' 'l'
                0x00501238 'o' 0x00   
“再见” 0x0050123A 'b' 'y'
                0x0050123C 'e' 0x00 0x?? 0x??
                ...
字符串 0x80FF0000 0x00 0x50 0x12 0x34
字符串2 0x80FF0004 0x?? 0x?? 0x?? 0x??

```

这显示了声明后的情况。 `"hello"`并且`"bye"`是字符串文字，存储为`char`内存中“某处”的数组，以便它们在程序的生命周期内可用。请注意，尝试修改字符串文字的内容会调用未定义的行为；您不想将字符串文字（或类似`string`的指针表达式评估为字符串文字的地址）作为参数传递给`scanf`, `strtok`,`fgets`等 函数。

`string`是指向 的指针`char`，包含字符串文字的地址`"hello"`。 `string2`也是一个指向 的指针`char`，它的值是不确定的（`0x??`表示一个未知的字节值）。

当你写

```
string2 = "bye"; 
```

您将`"bye"`(0x0050123A) 的地址分配给`string2`，因此我们的内存映射现在如下所示：

```
项目地址 0x00 0x01 0x02 0x03
---- -------- ---- ---- ---- ----
“你好” 0x00501234 'h' 'e' 'l' 'l'
                0x00501238 'o' 0x00   
“再见” 0x0050123A 'b' 'y'
                0x0050123C 'e' 0x00 0x?? 0x??
                ...
字符串 0x80FF0000 0x00 0x50 0x12 0x34
字符串2 0x80FF0004 0x00 0x50 0x12 0x3A

```

看起来很简单，对吧？

现在让我们看一下声明

```
*string2 = string; 
```

这里有几个问题。

首先，题外话 - C 中的声明以*表达式*的类型为中心，而不是对象。 `string2`是指向字符的指针；要访问字符值，我们必须使用一元运算符*取消引用* ：`string2``*`

```
char x = *string2; 
```

*表达式* 的类型`*string2`是`char`，所以声明变成

```
char *string2; 
```

通过扩展，*表达式* `string2`的类型是`char *`，或指向 的指针`char`。

所以当你写

```
*string2 = string; 
```

您正在尝试将 ( ) 类型的值分配给( `char *`)类型`string`的表达式。那是行不通的，因为and不是兼容的类型。此错误出现在翻译（编译）时。如果你写过`char``*string2``char *``char`

```
*string2 = *string; 
```

那么两个表达式都有 type `char`，并且赋值是合法的。

但是，如果您还没有分配任何东西`string2`，它的值是不确定的；它包含一个随机位串，该位串可能对应于一个有效的可写地址，也可能不对应。尝试服从随机的、可能无效的指针值会调用未定义的行为；它可能看起来工作正常，它可能会彻底崩溃，它可能会在两者之间做任何事情。这个问题直到运行时才会出现。更好的是，如果您将字符串文字分配`"bye"`给`string2`，那么您会遇到上述问题；您正在尝试修改字符串文字的内容。同样，这是一个直到运行时才会出现的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T08:29:34.957

其他回答者做出了一些微妙的推论，错过了新手的 POV。

```
char *string = "hello"; 
```

声明一个指针变量，该变量被初始化为指向一个字符数组（传统上很好的类型匹配）。

该声明

```
*string = "hello"; 
```

取消引用应该是指针变量的内容并将值分配给指向的位置。（它不是一个变量声明；必须在它上面的某个地方完成。）但是，因为`string`有类型——`char *`所以`*string`有类型`char`——并且赋值的右侧是一个带有指针值的表达式，所以存在类型不匹配。这可以通过两种方式解决，具体取决于语句的意图：

```
string = "hello";     /* with "char *" expressions on both sides */ 
```

或者

```
*string = 'h';        /* with "char" expressions on both sides */ 
```

第一个重新分配`string`以指向包含一系列字符 ( `hello\000`) 的内存。第二个赋值将 指向的字符更改`string`为`char`value `h`。

诚然，这是一个稍微令人困惑的主题，*所有* `C`程序员在学习掌握时都会经历一些痛苦。 *指针声明语法与语句中的相同文本的效果略有不同（尽管相关）。* 获得更多的练习和经验，编写和编译涉及指针的表达式，最终我的话会变得完全有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:20:09.207

AC字符串只是一个字符数组。像上面这样的 C 字符串文字`"hello"`可以被视为“返回”指向字符数组第一个元素的指针，`{ 'h', 'e', 'l', 'l', 'o' }`.

因此，`char *string = "bye"`有意义而`char string = "bye"`没有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T08:14:23.640

编辑后：

不同之处在于 A) 不会编译，如果编译，它是**未定义的行为**，因为您取消引用未初始化的指针。

另外，请不要在发布后大幅更改您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T08:17:04.090

`*string`可以读作“任何`string`指向”，即`char`. 分配`"bye"`给它没有意义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T08:24:52.180

`char *`是指向字符的指针。诸如此类`"hello"`的文字返回指向字符串第一个字符的指针。因此， 指向 string 的第一个字符`string = "bye"`是有意义的。`string``"bye"`

`*string`另一方面， 是所指向*的字符*`string`。它不是一个指针，而是一个 8 位整数。这就是为什么分配`*string = "bye"`没有意义并且可能会导致分段错误，因为存储的内存段`"bye"`是只读的。

# c++ - 使用来自不同线程的 posthreadmessage()

> ID：10187514
> 
> 赞同：1
> 
> 时间：2012-04-17T08:12:48.200
> 
> 标签：c++, windows, multithreading

我不太确定这是否是正确的方法（我是一个爱好者）。我想将消息发布到循环 GetMessage() 并根据消息执行某些操作的工作线程。我知道我必须将 posthreadmessage() 与该工作线程的句柄一起使用。

这是我的问题：

我可以用吗

```
PostThreadMessage(idWorkerThread, WM_COMMAND, (WPARAM)0, (LPARAM)0)) 
```

来自多个不同的线程？我知道这可能会导致消息同时从不同的线程写入工作线程消息队列。这是一个问题还是很好？本质上我想要一个 N->1 线程间通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:20:12.587

PostThreadMessage 是线程安全的，所以你会没事的。这是一个很好的方法。另一种选择是让线程等待事件或条件变量，并具有将事件推送到具有适当同步的队列的功能。

# sql - 在 Pervasive SQL 11 中透视表

> ID：10187515
> 
> 赞同：0
> 
> 时间：2012-04-17T08:12:55.310
> 
> 标签：sql, pervasive

我查看了类似的主题并尝试了一些自我加入，但不明白如何申请。

在 Pervasive SQL 11 中有这样的表：

```
kit|part

1 | 21

1 | 22

1 | 23

1 | 24

2 | 30

2 | 31   
.... 
```

想连续退回这个

```
1 | 21 | 22 | 23 | 24

2 | 30 | 31 
```

相关零件的数量从 1 到 30+ 不等，每个套件只能返回 1 行

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:15:29.893

不需要自加入，只需一个带有（假设 MySQL）[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)的 GROUP BY ：

```
SELECT kit, GROUP_CONCAT(part)
FROM table
GROUP BY kit 
```

您可以选择排序，或添加分隔符：

```
SELECT kit, GROUP_CONCAT(DISTINCT part ORDER BY part ASC SEPARATOR ' ')
FROM table
GROUP BY kit 
```

但是，如果您希望将结果放在单独的列中，则无法在 MySQL 中编写动态自连接，自动连接足够的时间来拥有所有表，并且 MySQL 不支持枢轴。其他（R）DBMS 可能会。

# jquery - 淘汰赛和 jqTransform

> ID：10187517
> 
> 赞同：2
> 
> 时间：2012-04-17T08:13:04.503
> 
> 标签：jquery, knockout.js, jqtransform

我目前在我的一个项目中使用 Knockout JS，我遇到的问题与表单元素有关。基本上由 knockout.js 操作的输入（文本、复选框、收音机等）也应该“使用”jqTransform。
我已经尝试在 (document).ready 中触发 jqtransform，但显然无法正常工作 - dohhh！我还在论坛的某个地方读到这（[http://knockoutjs.com/documentation/template-binding.html#note_3_usin](http://knockoutjs.com/documentation/template-binding.html#note_3_usin) ...）可能是我的解决方案。仍然无法应用 jqTransform。
这个论坛上有没有人一起使用这两个脚本，如果是，你是如何让它工作的:)？或者，如果附近有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:12:11.347

你不能一起使用它的原因是因为 jqTransform 从字面上替换了 input[type=checkbox] 你有一个“A”（链接）元素，你对所有的淘汰赛绑定都一无所知，甚至不关心移动您的输入已有的事件处理程序和属性。

源代码说明了一切：[https ://github.com/jcamenisch/jqTransform/blob/master/jqtransformplugin/jquery.jqtransform.js](https://github.com/jcamenisch/jqTransform/blob/master/jqtransformplugin/jquery.jqtransform.js)

# java - Eclipse JDT 编译器可以增量编译Java Source 并通知编译了哪些类？

> ID：10187518
> 
> 赞同：0
> 
> 时间：2012-04-17T08:13:14.910
> 
> 标签：java, eclipse-jdt

现在我想实现这个案例：

如果修改了java源文件，我将java源文件动态编译为类文件。然后我想知道哪些类被重新编译，以便我可以重新定义和重新加载它们。

或者有人有更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:42:29.223

我认为您应该使用[资源更改侦听器](http://www.eclipse.org/articles/Article-Resource-deltas/resource-deltas.html)

# .net - 如何在 Fiddler2 中拦截服务到服务的调用？

> ID：10187520
> 
> 赞同：3
> 
> 时间：2012-04-17T08:13:33.123
> 
> 标签：.net, wcf, debugging, fiddler

在我的 Windows 7 机器上，我有两个 Web 应用程序（托管 WCF 服务）托管在 IIS 7.5 下。

在 Fiddler 中，我可以看到从桌面应用程序到 Web 应用程序的所有调用。但是，我没有看到从一项服务到另一项服务或一项服务通过互联网调用其他网站的任何呼叫。

**如何让 Fiddler 拦截服务到服务（也是互联网服务）调用？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:32:42.527

在您的 Internet Explorer 中将 fiddler 配置为代理 - 这将使整个机器的设置全局化（如果您在设置中允许，Fiddler 可以自动执行此操作）。

接下来尝试捕获流量（确保您正在捕获来自所有进程的流量）。如果您仍然看不到来自您的服务的流量，请检查：

*   从客户端调用服务时使用外部地址。当客户端调用部署在本地计算机上的服务或站点时，客户端必须使用您的 IP 地址或计算机名称调用服务。你不能使用 localhost / 127.0.0.1 - 这些调用永远不会被代理
*   您没有在 IE 中配置任何代理绕过地址或检查本地地址绕过
*   `useDefaultWebProxy`您不会覆盖应用程序中的代理设置 - 例如通过在 WCF 绑定配置中关闭或通过在`system.net`配置中设置代理。

最后，您可以尝试将其添加到您的客户端配置中（但这是默认配置）：

```
<system.net>
  <defaultProxy enabled="true" />
</system.net> 
```

默认情况下，您只会看到 HTTP 流量。HTTPS 将需要额外的配置。

# android - ActionBarSherlock：如何访问主页按钮视图？

> ID：10187523
> 
> 赞同：6
> 
> 时间：2012-04-17T08:13:40.510
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 ActionBarSherlock 并想要与 Google Maps 所知的主页按钮类似的功能。

![谷歌地图中的主页按钮](../Images/5e9c1d1aceb44c5afb23043f713349de.png)

当使用这段代码按下主页按钮时，我已经设法打开了一个 QuickAction ( [http://code.google.com/p/simple-quickactions/ )：](http://code.google.com/p/simple-quickactions/)

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
       View anchor = findViewById(R.id.text); // how do I get the home button view here?
       quickAction.show(anchor);
       return true;
    }
    return false;
} 
```

但是，我使用活动的简单 TextView 作为锚点（R.id.text）。如何从那里的 ActionBar 检索主页按钮视图？

哦，和`findViewById(android.R.id.home)`或`findViewById(item.getItemId())`两者都返回空值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T08:35:10.207

您无法访问主视图，因为它存在于内容视图之上和窗口装饰中。

谷歌在内容视图中存在的 pre-Honeycomb 设备上使用自定义操作栏。这就是允许他们制作此自定义下拉菜单的原因。在 Honeycomb 和更新版本上，他们在系统操作栏中使用高度定制的列表导航版本。

由于您使用的是 ActionBarSherlock，因此您有两个选择：

1.  选择更新样式的导航并自定义内置列表导航。
2.  提供一个模仿主视图的自定义导航视图（例如，其中包含您的应用程序图标）。使用此自定义视图，您将能够提供可以附加自定义弹出菜单的锚点。

# git - 按时间顺序排列的分支列表？

> ID：10187524
> 
> 赞同：7
> 
> 时间：2012-04-17T08:13:41.580
> 
> 标签：git

有没有办法让你的（本地）分支列表按最后一次提交的日期排序（可能还有提交的 id）？当您像我一样拥有大量分支时，仅查看分支列表（不检查日志）即可查看您最近的工作有时会很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T05:03:39.567

您可以按照[如何获取按最近提交排序的 git 分支列表中的说明进行操作？](https://stackoverflow.com/q/5188320/608457)但更简单的方法是安装 gitk ，它完全符合您的要求。Gitk 提供的视图可以显示所有分支或仅显示您希望按某个字段排序的分支，例如上次提交、作者、标题等。

学习它真的很容易。[这是 gitk Guide to理解 gitk](https://stackoverflow.com/questions/1570535/guide-to-understanding-gitk)的另一个相关问题？

# windows-phone-7 - Windows Phone 7 GetDistanceTo() 返回不正确的距离

> ID：10187528
> 
> 赞同：0
> 
> 时间：2012-04-17T08:14:08.747
> 
> 标签：windows-phone-7, geolocation

我正在开发一个小型 Windows Phone 应用程序。我将用户的当前位置存储在数据库中。

这是检索存储在数据库中的当前位置的代码。

```
public void watcher_PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
{
    CurrentLatitude = e.Position.Location.Latitude.ToString(); 
    CurrentLongitude = e.Position.Location.Longitude.ToString();
} 
```

如果他在距离他保存的位置 400 米以下，我们需要允许用户做一些活动。

我正在使用以下代码来计算距离。

```
internal double GetDistanceTo(GeoCoordinate ClientLocation)
{
    double distanceInMeter;

    GeoCoordinate currentLocation = new GeoCoordinate(Convert.ToDouble(watcher.Position.Location.Latitude.ToString()), Convert.ToDouble(watcher.Position.Location.Longitude.ToString()));
    distanceInMeter = currentLocation.GetDistanceTo(ClientLocation);

    return distanceInMeter;
} 
```

ClientLocation ：是保存在数据库中的位置。

所以我的问题是，即使用户站在保存在数据库中的同一位置（低于 1 米），它也会提供非常大的距离。

示例坐标（从设备中提取）

保存在数据库中

> 纬度：29.8752546310425 经度
> ：73.8865985870361

当前坐标

> 纬度：29.8734102249146 经度
> ：73.9049253463745
> 
> 距离 1780.45

有人可以建议我这里有什么问题或更好的方法来获取两个坐标之间的距离吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:20:40.960

根据[boulter.com](http://boulter.com/gps/distance/?from=29.8734102249146,%2073.9049253463745&to=29.8752546310425,%2073.8865985870361&units=m)的说法，从 A 到 B 的距离为 1.11 英里。那大约是 1780 米，所以我看不出问题出在哪里。阅读有关经纬度计算的[可移动类型](http://www.movable-type.co.uk/scripts/latlong.html)帮助。

# ruby - 使用新数据渲染当前页面

> ID：10187536
> 
> 赞同：1
> 
> 时间：2012-04-17T08:14:46.090
> 
> 标签：ruby, ajax, ruby-on-rails-3

这是我的简单 ajax 代码。

发出了请求，我得到了响应，但我的视图没有用新数据呈现。我得到一个带有新 html 的新页面，我要求渲染它而不是在当前页面中渲染。

控制器 -

```
 def list
    @users = User.find(:all)
    end

    def show
    respond_to do |format|
    format.html {   render :partial => "ajaxshow" }
    format.js
    end
    end 
```

看法 -

```
<% @users.each do |c| %>
<%= link_to c.user_id, {:action => :show, :user_id => c.user_id, :remote => true } %>
<% end %> 
```

部分的 -

```
# cat _ajaxshow.html.erb
<div  align="left" id="user_ajax">
<table width="1000px">
<tr><th>User ID</th><th>First</th><th>Last</th><th>ID</th><th>Email</th></tr>
</table> 
```

日志 -

```
Started GET "/users/show?remote=true&user_id=someuser" for 10.10.10.10 at 2012-04-17 04:01:09 -0400
Processing by UsersController#show as HTML
  Parameters: {"remote"=>"true", "user_id"=>"someuser"}
  Rendered users/_ajaxshow.html.erb (0.3ms)
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.0ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:32:52.767

您需要有一个`.js.erb`用于`User`控制器操作的文件，该文件将通过调用来`format.js`调用。

`show.js.erb`使用中

```
$('#some_div_id').html($('<%= render :partial => "ajaxshow" %>')) 
```

无论如何，你行动的目的对我来说似乎是模糊的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:34:28.450

您的 link_to 不会触发 ajax 调用

```
 <%= link_to c.user_id, {:action => :show, :user_id => c.user_id, :remote => true } %> 
```

先把上面的代码改一下

```
 <%= link_to c.user_id, {:action => :show, :user_id => c.user_id }, { :remote => true, :method => :get } %> 
```

# amazon-ec2 - apache+mod_wsgi 与 pyramid&pyramid_beaker 的文件权限问题

> ID：10187538
> 
> 赞同：0
> 
> 时间：2012-04-17T08:14:48.997
> 
> 标签：amazon-ec2, mod-wsgi, file-permissions, pyramid, beaker

我正在尝试建立一个金字塔应用程序。我正在使用 wsgi 和 apache2。

我不断收到内部服务器错误，并且 apache 日志的内容是

```
 mod_wsgi (pid=11200): Exception occurred processing WSGI script '/home/ubuntu/modwsgi/env/pyramid.wsgi'.
 Traceback (most recent call last):
   File "/home/ubuntu/modwsgi/env/lib/python2.6/site-packages/pyramid-1.3-py2.6.egg/pyramid/router.py", line 191, in __call__
     request._process_response_callbacks(response)
   File "/home/ubuntu/modwsgi/env/lib/python2.6/site-packages/pyramid-1.3-py2.6.egg/pyramid/request.py", line 243, in _process_response_callbacks
     callback(self, response)
   File "/home/ubuntu/modwsgi/env/lib/python2.6/site-packages/pyramid_beaker-0.6.1-py2.6.egg/pyramid_beaker/__init__.py", line 26, in session_callback
     self.persist()
   File "/home/ubuntu/modwsgi/env/lib/python2.6/site-packages/Beaker-1.6.3-py2.6.egg/beaker/session.py", line 706, in persist
     self._session().save()
   File "/home/ubuntu/modwsgi/env/lib/python2.6/site-packages/Beaker-1.6.3-py2.6.egg/beaker/session.py", line 400, in save
     **self.namespace_args)
   File "/home/ubuntu/modwsgi/env/lib/python2.6/site-packages/Beaker-1.6.3-py2.6.egg/beaker/container.py", line 622, in __init__
     util.verify_directory(self.file_dir)
   File "/home/ubuntu/modwsgi/env/lib/python2.6/site-packages/Beaker-1.6.3-py2.6.egg/beaker/util.py", line 85, in verify_directory
     os.makedirs(dir)
   File "/usr/lib/python2.6/os.py", line 150, in makedirs
     makedirs(head, mode)
   File "/usr/lib/python2.6/os.py", line 157, in makedirs
     mkdir(name, mode)
 OSError: [Errno 13] Permission denied: 'beaker_dir' 
```

我可以使用简单的 pserve 来提供页面并`wget http://localhost:6543/user/form`在终端上运行。它适用于下载表单。但是在浏览器上我得到了 500 错误。

我正在使用 EC2 来托管应用程序。

在 app:main 节中，我使用以下代码：

```
session.type = file
session.data_dir = beaker_dir
session.key = mvc
session.encrypt_key = mysecretencryptionkey
session.validate_key = mysecretvalidationkey
session.cookie_on_exception = true 
```

非常感谢阅读

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T01:07:41.253

为以下内容提供绝对路径：

```
session.data_dir = beaker_dir 
```

当前的工作目录可以是任何东西，通常是'/'，所以路径是错误的。

# c# - 为什么 (float)1.11111111 = 1.11111116 在 C# 中？

> ID：10187540
> 
> 赞同：2
> 
> 时间：2012-04-17T08:14:55.347
> 
> 标签：c#, floating-point

为什么`(float)1.11111111 = 1.11111116`在 C# 中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T08:16:44.027

[浮点数具有 7 位精度](http://msdn.microsoft.com/en-us/library/b1e65aza(v=vs.100).aspx)，只是实际数字的近似值；相等和其他运算符并不总是像*您*期望的那样工作，尽管它们工作得非常好。

必读链接：[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

[浮点数上的`Epsilon`属性](http://msdn.microsoft.com/en-us/library/system.single.epsilon.aspx)可用于帮助缓解浮点值的非常小的分数问题，尽管我从未使用过它。我承认我对浮点数的经验是有限的。

如果您需要更高的精度，[`double`则更大](http://msdn.microsoft.com/en-us/library/678hzkk9(v=vs.100).aspx)，精度为15-16 位。如果您需要更高的精度，特别是跨基数为 10 的数字（例如用于货币计算），请使用`decimal`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T08:17:16.660

因为浮点数**不是**一个精确的值：[维基百科](http://en.wikipedia.org/wiki/Floating_point#Representable_numbers.2C_conversion_and_rounding)解释得很清楚。还要确保您在 6:00 到 10:00 左右观看[Jon Skeet 的视频](http://vimeo.com/7403673)。简而言之：对连续值使用[浮点数](http://msdn.microsoft.com/en-US/library/b1e65aza%28v=vs.80%29.aspx)/[双精度数，对离散值使用](http://msdn.microsoft.com/en-US/library/678hzkk9%28v=vs.80%29.aspx)[小数](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.80%29.aspx)/[整数](http://msdn.microsoft.com/en-US/library/5kzh1b5w%28v=vs.80%29.aspx)等。

# android - Android 服务更新表；如何获取对应的 ListView 进行更新？

> ID：10187541
> 
> 赞同：0
> 
> 时间：2012-04-17T08:14:55.863
> 
> 标签：android, android-listview, android-service

假设我有一个长期运行的服务来监控外部设备的网络。每当它在网络中发现一个新设备时，它就会在本地 SQLite 数据库中的表中添加一行，并且每当它检测到已知设备上的状态发生变化时，它都会更新表中的相应行。（顺便说一句，无法预测这些发现和更新的频率或频率——外部网络向自己的鼓手进军！）

现在，假设我有一个 Activity（在同一进程中），其中包含由上述表支持的 ListView。在 ListView 最初填充的那一刻，它当然与后备表同步——但过了一会儿（或两个，或三个），由于外部设备网络的变化，表发生了变化，由服务。

Service 通知 Activity 需要刷新 ListView 的最佳方式是什么，即在 Cursor 上调用 requery()，然后在适配器上调用 notifyDataSetChanged()？

我在这里看到了一些关于 SO 的帖子，其中的方法似乎是“在 Activity 上注册广播接收器，并从服务发送广播 Intent”——但这对于本地服务来说似乎有点矫枉过正。没有更简单的方法吗？

例如，我在想，由于我可以通过 Binder 对象获取本地 Service 对象的句柄，因此我可以向 Activity 注册某种回调，以便在需要时由服务调用。这听起来可行吗？（或者我会进入死胡同吗？）

期待您的见解。

米

# ivy - 通过 build.xml 配置 Ivy 2.2.0 而不是在机器上安装它

> ID：10187543
> 
> 赞同：0
> 
> 时间：2012-04-17T08:15:04.403
> 
> 标签：ivy

我想使用 ivy 2.2.0 jar 而不是在我的机器上安装 ivy，因为当有人从 svn 导入我的项目时，它会为我添加到 Ivy 库的 jar 提供错误。

我通过选项添加常春藤库添加了 ivy.xml 来构建路径。我如何通过 build.xml 配置它而不是添加常春藤库选项..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:20:46.927

您想在没有 ivy.jar 文件的情况下使用 Ivy？这是不可能的。

但是，您可以让用户更轻松。Ant 可以在第一次使用时自动为您下载 Ivy。在接下来的时间里，只需将 Ivy 本身添加为项目的依赖项，例如，您就可以轻松推出 Ivy 的更新。

对于引导程序（使用普通 Ant 获得 Ivy），请参阅另一个 SO question 的[答案。](https://stackoverflow.com/a/9855381/396730)

# iphone - 我可以对 iOS 上生成的 pdf 文件中的图像使用 JPEG 压缩吗？

> ID：10187549
> 
> 赞同：5
> 
> 时间：2012-04-17T08:15:22.780
> 
> 标签：iphone, ios, ipad, pdf

目前我正在处理我有很多 1024x768 图像的 pdf 文件的问题，并且正在尝试优化 pdf 的文件大小，但我认为目前唯一足够好的解决方案是使用 jpeg 压缩来压缩图像。问题是我没有找到任何使用 iOS API 的方法。我错过了什么，有办法吗？我欢迎就如何使用其他方式优化 pdf 提出建议（降低图像的分辨率对我来说不是一个好的解决方案）。

**编辑：**如果有人知道另一个用于在 iOS 上生成 pdf 的 API - 将不胜感激链接。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T20:16:34.680

实际上你可以使用 UIImageJPEGRepresentation。但还有一步，然后使用 JPEG 数据提供程序来绘制图像：

```
NSData *jpegData = UIImageJPEGRepresentation(sourceImage, 0.75);
CGDataProviderRef dp = CGDataProviderCreateWithCFData((__bridge CFDataRef)jpegData);
CGImageRef cgImage = CGImageCreateWithJPEGDataProvider(dp, NULL, true, kCGRenderingIntentDefault);
[[UIImage imageWithCGImage:cgImage] drawInRect:drawRect]; 
```

在绘制到 PDF 上下文时，这对我很有效。0.75 的压缩质量将我的载有图像的 PDF 的大小减少了大约 75%，而且看起来还不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T16:00:51.430

如果有人感兴趣，我通过使用免费的 pdf 库 - libHaru 找到了我的问题的解决方案。它为我提供了将 JPEG 压缩图像添加到生成的 pdf 文件所需的功能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-17T08:32:45.947

如果您想压缩图像，可以使用[UIImageJPEGRepresentation](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImageJPEGRepresentation)

```
NSData * UIImageJPEGRepresentation (
   UIImage *image,
   CGFloat compressionQuality
); 
```

您可以使用 jpeg 转换/压缩 PNG 图像

```
NSData *someImageData = UIImageJPEGRepresentation(pngImage, 0.6); // quality 0.6 (60%) (from 0.0-1.0).
UIImage *newCompressedJPG = [UIImage imageWithData:someImageData]; 
```

但我认为这不会减少您的 PDF 大小。因为当您将 UIImage 放置到您的 pdf 时，RAW 图像会被放置（据我所知）。

**更新 1：** 它的可压缩性从 0.0 到 1.0 不等（感谢[Leena](https://stackoverflow.com/users/1045055/leena)）

# google-chrome - 如何避免镀铬的钟声

> ID：10187551
> 
> 赞同：0
> 
> 时间：2012-04-17T08:15:32.423
> 
> 标签：google-chrome, noise

当我在 chrome 中拖放一些时，它总是会发出一些噪音，你可以在你的 chrome 中尝试一下：点击一些空白的地方，然后拖动，然后释放鼠标，它会发出声音。我真的很讨厌它，我看到一些页面没有铃声，我认为它可以避免使用 javascript，谁能告诉我？

# python - Windows 上 Python 3 中的 PyGObject

> ID：10187552
> 
> 赞同：17
> 
> 时间：2012-04-17T08:15:41.627
> 
> 标签：python, windows, installation, python-3.x, pygobject

有谁知道是否可以在 Windows 上为 Python 3 安装 PyGObject/Gtk+3？我在 gnome 的网站上找到了 Python 2 的安装程序（[here](http://ftp.gnome.org/pub/GNOME/binaries/win32/pygobject/)），还有几条声明它适用于 Python 3（例如， [here](http://readthedocs.org/docs/python-gtk-3-tutorial/en/latest/install.html)），但没有安装程序。编译指令似乎都使用了jhbuild，据我所知是一个linux工具。我是否需要编译 PyGObject 才能使其工作，如果需要，如何？或者有没有更简单的方法？指南或操作指南会很棒，但似乎不存在这样的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-11T11:33:20.740

由于这是该主题中评分最高的问题，因此我想更新答案。这是适用于 Windows 32 位的可用安装程序：

它包含完整的类似 SDK 的包。并完成图书馆收藏。[http://sourceforge.net/projects/pygobjectwin32/files/pygi-aio-3.10.2-win32_rev10-setup.exe/download](http://sourceforge.net/projects/pygobjectwin32/files/pygi-aio-3.10.2-win32_rev10-setup.exe/download)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:43:43.170

不久前我搜索了同样的东西。我真的找不到太多信息，但[这个其他帖子](https://stackoverflow.com/questions/7275322/how-to-install-pygi-python-gobject-introspection-on-windows/7283395#comment15677015_7283395.)

我最终放弃了 GTK+ 并改用了真正独立于操作系统的 xwpython

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-30T08:23:44.057

你有没有尝试过官方的 pypi 页面[https://pygobject.readthedocs.io/en/latest/getting_started.html](https://pygobject.readthedocs.io/en/latest/getting_started.html)

我能够安装 GTK

# jquery - 在 Div 加载或淡入或淡出时显示加载器

> ID：10187553
> 
> 赞同：-3
> 
> 时间：2012-04-17T08:15:48.850
> 
> 标签：jquery, html, fadein, fadeout, loader

我有一个使用带有 div 的 jQuery 淡入/淡出动画的网页。网页的每个部分都由淡入效果加载，并且站点永远不会导航到新网页。我正在寻找每次淡入/淡出生效时显示的加载图像。我该如何编程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:28:26.440

我一直使用[这个链接](http://ajaxload.info/)来生成加载图像......

然后最快的方法是显示和隐藏一个带有加载图像的 DIV，或者在 jQuery 中向 DIV 添加和删除一个类。

在 CSS 中，该类可以将图像作为背景图像应用到 DIV 并将其集中。

```
$('#yourDiv').fadeOut('slow', function() 
{
     // Code to hide or show loading image
});` 
```

# javascript - 如何从 JavaScript 调用 Objective-c 函数？

> ID：10187554
> 
> 赞同：0
> 
> 时间：2012-04-17T08:15:50.473
> 
> 标签：javascript, iphone, xcode

我正在尝试制作一个 iphone 应用程序。在那个应用程序中，我使用的是 Javascript。我想知道从 Javascript 调用目标 C 函数函数是可能的。如果是，那么我们该怎么做呢？如果没有，那么还有其他选择吗？

谢谢阿坎莎

我有这个java脚本代码。所以每当我输入“onPlayerStateChange”函数时，我想打开一个文件并在这个文件中写入一些事件。但我无法在 javascript 中打开和写入文件，因为我不知道文件的位置。使用objective-c，我可以在documentsDirectory 中打开和写入数据，但我不确定javascript。所以我想在objective-C .m文件中的“onPlayerStateChange”中调用一个函数。每当我输入“onPlayerStateChange”函数时，该函数就会写入文件。

现在可以提出什么建议吗？

```
<!DOCTYPE HTML>
<html>
<body>
<div id="player"></div>
<script>
    //Load player api asynchronously.
    var tag = document.createElement('script');
    tag.src = "http://www.youtube.com/player_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    var done = false;
    var player;
    function onYouTubePlayerAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: 'JW5meKfy3fY',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
    }
    function onPlayerReady(evt) {
        evt.target.playVideo();
    }
    function onPlayerStateChange(evt) {
        if (evt.data == YT.PlayerState.PLAYING && !done) { // NEED TO ADD FILE OPERATION HERE
            setTimeout(stopVideo, 6000);
            done = true;
        }
    }
    function stopVideo() {
        player.stopVideo();
    }
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:18:17.957

是的，您可以使用[HTML](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/cl/UIWebView) /JS 上下文和在

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

您可以捕获请求并调用 obj-c 方法。或者您创建与 Appcelerator 相同的解决方案：[https ://stackoverflow.com/a/2471774/644629](https://stackoverflow.com/a/2471774/644629)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:11:07.573

您不能像在 JAVA/ANDROID 中那样直接执行此操作。参考下面我的回答

[iOS UIWebView Javascript - 插入数据 - 接收回调？](https://stackoverflow.com/questions/7681918/ios-uiwebview-javascript-insert-data-receive-callbacks/7682794#7682794)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:07:08.270

您可以创建一个目标 c 模块并将其导入您的应用程序并从 JavaScript 调用它。这是你要找的：

[http://developer.appcelerator.com/doc/mobile/iphone/module_sdk](http://developer.appcelerator.com/doc/mobile/iphone/module_sdk)

# android - 读取android清单文件

> ID：10187556
> 
> 赞同：1
> 
> 时间：2012-04-17T08:16:00.977
> 
> 标签：android, file, manifest

有什么方法可以读取/解析android清单文件，就像我们对原始文件夹中的文件执行的操作一样，如下所述：

[http://eagle.phys.utk.edu/guidry/android/writeSD.html](http://eagle.phys.utk.edu/guidry/android/writeSD.html)

getResources.ReadManifest..类似这样的东西？？

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T08:43:14.233

如前所述，您可以将`PackageManager`用于此目的。有几种方法可以返回一个或多个`PackageInfo`对象，这些对象又包含一个公共字段[`ActivityInfo[] activities`](http://developer.android.com/reference/android/content/pm/PackageInfo.html#activities)，前提是您也指示它......请阅读下文。

该文档提到以下内容：

> 包含在 下的所有标签的数组，如果没有，则为 null。仅当设置了标志 GET_ACTIVITIES 时才填写。

因此，请确保在请求信息时提供该特定标志；例如，使用 时[`getPackageInfo(...)`](http://developer.android.com/reference/android/content/pm/PackageManager.html#getPackageInfo%28java.lang.String,%20int%29)，请执行以下操作：

```
getPackageInfo("your.package.name", PackageManager.GET_ACTIVITIES) 
```

如果您需要检索更多详细信息，可以将多个标志“或”在一起：

```
getPackageInfo("your.package.name", PackageManager.GET_ACTIVITIES | PackageManager.GET_RECEIVERS) 
```

**编辑：**

或者，如果找不到请求，您也可以使用[`getActivityInfo(android.content.ComponentName, int)`](http://developer.android.com/reference/android/content/pm/PackageManager.html#getActivityInfo%28android.content.ComponentName,%20int%29)并捕获`NameNotFoundException`将抛出的`Activity`，但通常这被认为是“滥用”异常。

无论如何，由你决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T08:18:32.420

[在 OP 的评论后编辑]：您可以使用 Android 的 PackageManaer [http://developer.android.com/reference/android/content/pm/PackageManager.html](http://developer.android.com/reference/android/content/pm/PackageManager.html) 来获取有关 Android 理解的清单文件内容的信息。

# ios4 - iPhone/Objectivec-C 浮点除法输出不正确

> ID：10187562
> 
> 赞同：0
> 
> 时间：2012-04-17T08:16:11.563
> 
> 标签：ios4

在 IOS 程序中，我试图除以一些浮点值，但结果不正确

```
float a = 179.891891;
float b = 8.994595;
NSLog(@"Result %f",a/b); 
```

在将两个（a/b）相除时，我得到的输出是 20.0000 而不是 19.9999989993991 。我试过使用 double 而不是 float 但仍然是同样的问题。当我从一些计算中获得它时，“b”的值会不断变化。我需要结果非常精确，因为某些计算还需要它，并且 20.0000 而不是 19.9999989993991 对我得到的最终输出有很大的影响。

对此的任何帮助都会非常棒:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:28:59.167

我不知道在 Objective C 中，但在 C 中，你应该进行强制转换： (float)(a/b) 。否则它是整数除法。

# url - 忽略 Magento 中的斜线

> ID：10187564
> 
> 赞同：0
> 
> 时间：2012-04-17T08:16:19.987
> 
> 标签：url, magento, slash

我在 page.xml 中创建了一个菜单，它看起来像这样：

```
<reference name="primary.menu">
<action method="addLink" translate="label title">
<label>Test</label>
<url>test.html</url>
<title>Test</title>
<prepare>1</prepare>
<urlParams/>
<position>10</position>
<liParams>dark-gray</liParams>
<aParams></aParams>
<beforeText></beforeText>
<afterText></afterText>
</action>
................... 
```

用于 primary.menu 块的类是从 Magento 的核心扩展 Mage_Page_Block_Template_Links 类。

问题是，当我单击此链接时，它会转到不起作用的“www.mydomain.com/test.html/”。我的问题是我应该怎么做才能阻止最后一个“/”显示在 url 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T18:23:00.337

我认为这`<prepare>1</prepare>`是在构建您的 URL 查询（在没有专门的帮助程序来提供 URL 的情况下），因此在您的 URL 前面加上域（这是您想要的），但它也附加了一个斜杠（它是你不想要的）

1.  要么创建一个帮助程序来提供“正确”的 URL。
2.  如果页面是 Magento CMS 页面，请使用该帮助程序**（首选）**
3.  使用`<prepare/>`和`<url>/test.html</url>` *（黑客警报！）*

### 使用 Magento CMS 助手添加链接

```
<action method="addLink" translate="label title before_text" module="cms">
  <label>Test</label>
  <url helper="cms/page/getPageUrl">
    <page_id>1</page_id>
  </url>
  <title>Test</title>
  <prepare/>
  <urlParams/>
  <position>10</position>
  <li/>
  <a/>
  <before_text/>
  <after_text/>
</action> 
```

# visual-studio-2012 - 是否有适用于 VS 2012 的表达式树可视化工具？

> ID：10187567
> 
> 赞同：15
> 
> 时间：2012-04-17T08:16:44.817
> 
> 标签：visual-studio-2012, expression-trees, visualizer

是否有适用于 VS 2012 的表达式树可视化工具？搜索了一下发现到处都是 VS 2008，而且新的 VS 2012 在安装目录中没有 Visualizers 文件夹。或者，我是否遗漏了一些我应该能够打开的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T12:46:58.830

您可以做的是修复 vs 2010 的可视化器，使其在 2012 年工作。这很容易。只需从此项目获取源代码： http: [//exprtreevisualizer.codeplex.com/](http://exprtreevisualizer.codeplex.com/)并将 ExpressionTreeViewer 项目的 DebuggerVisualizers 程序集引用更改为：

`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ReferenceAssemblies\v2.0\Microsoft.VisualStudio.DebuggerVisualizers.dll`

以便它适用于最新版本的 vs2012。之后将结果复制到

`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers`

它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:38:06.300

不，但你有 DebugView，在调试模式下，有一个具有相同属性的类的代理，并添加了一个 DebugView。就是文字之类的。此外，Mono.Linq.Expressions 有一个用于编写 C# 代码的表达式的文本编写器，请查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T20:50:27.533

当我再次出现这个问题时，我似乎弄错了 *.dll。我使用该解决方案创建了一个 GitHub 存储库。我包含了一个构建和编译的 *.dll，可以通过单击[此文件](https://github.com/Feddas/ExpressionTreeVisualizer/blob/master/ExpressionTreeVisualizer.dll)上的“查看原始文件”来下载。

将此 *.dll 复制到您选择的可视化工具目录。我用`C:\Users[CurrentUser]\Documents\Visual Studio 2013\Visualizers`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-12-18T22:08:48.753

（免责声明：我是相关可视化工具的作者。）

我[为 Visual Studio 编写了一个调试可视化工具](https://github.com/zspitz/ExpressionTreeVisualizer)：

![调试可视化工具](../Images/7ada8862e2d6ac674fb6c6389da6b4b0.png)

# iphone - 在 iPad / iPhone 上删除 CSS 边距

> ID：10187568
> 
> 赞同：0
> 
> 时间：2012-04-17T08:16:44.883
> 
> 标签：iphone, css, ipad, margin

在一个电子商务网站上，我在具有 4 个替代产品视图的页面上设置了链接（它们是添加到购物篮下方的 4 个小图像）在 iPhone 或 iPad 上，第 4 个图像的右边距没有被删除所以它进入下一行。

基本上每个图像都有 10px 的右边距，然后最后一个具有“end”类的图像的右边距为“0px！important”。

这在网络浏览器中运行良好，但在 iPad / iPhone 上，没有应用 0px 右边距。

我有一种感觉，这将是一个简单的，但我只是看不到它，提前感谢任何帮助。

**编辑**我已经添加了下面的代码，并且还设置了我遇到问题的页面的精简版本：[链接](http://emmashome.co.uk/small/)，它是右侧底部的 4 个小图像。

以下是图像的 HTML：

```
<div class="image-additional">
    <img alt="" title="" src="larchblue-cr-55x55.jpg" class="thumb ">
    <img alt="" title="" src="larchgreen-cr-55x55.jpg" class="thumb ">
    <img alt="" title="" src="larchpink-cr-55x55.jpg" class="thumb ">
    <img alt="" title="" src="larchyellow-cr-55x55.jpg" class="thumb end">
</div> 
```

这是CSS：

```
.image-additional {
    width: 268px;
    margin-top: 13px;
    clear: both;
    position: absolute;
    bottom: 0;
    overflow: hidden;
}

.image-additional img {
    border: 1px solid #E7E7E7;
    margin-right: 10px;
}

.image-additional img.end, .image-additional img:last-child { 
        margin-right: 0px !important;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:24:37.547

尝试为您的移动目标使用 :last-child 伪元素。

```
.img:last-child {
  margin-right: 0px;
} 
```

注意：它适用于除 IE8 及以下版本之外的任何地方。

# asp.net - 在共享托管环境中压缩来自 asp.net 服务器的 json 响应

> ID：10187570
> 
> 赞同：2
> 
> 时间：2012-04-17T08:16:48.053
> 
> 标签：asp.net, json, iis, web-config, gzip

我的托管服务器在共享托管环境中是godaddy。由于共享托管环境，我无权访问 IIS 设置。

出于多种目的，我向 ajax 请求发送 json 响应

我在 web.config 文件中设置了以下内容

```
<httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
            <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll"/>
            <dynamicTypes>
                <add mimeType="text/*" enabled="true"/>
                <add mimeType="message/*" enabled="true"/>
                <add mimeType="application/javascript" enabled="true"/>
        <add mimeType="application/json" enabled="true"/>
                <add mimeType="*/*" enabled="false"/>
            </dynamicTypes>
            <staticTypes>
                <add mimeType="text/*" enabled="true"/>
                <add mimeType="message/*" enabled="true"/>
                <add mimeType="application/javascript" enabled="true"/>
        <add mimeType="application/json" enabled="true"/>
                <add mimeType="*/*" enabled="false"/>
            </staticTypes>
        </httpCompression> 
```

我可以将我的 .aspx 页面压缩，但它不会压缩 json 响应。如何压缩 json 响应..??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-30T06:24:35.610

我认为答案是您需要自己的 VPS 服务器（如果您有预算的话）或您自己的专用服务器。然后你可以修改 IIS7 的 applicationHost.config

# lambda - ExpressionTree 调试器可视化工具和 VS2010

> ID：10187571
> 
> 赞同：1
> 
> 时间：2012-04-17T08:16:52.117
> 
> 标签：lambda, expression

我无法获取旧的 VS2008 ExpressionTree 调试器可视化器示例，该示例可在此处获得：[http ://code.msdn.microsoft.com/Visual-Studio-2008-C-d295cdba](http://code.msdn.microsoft.com/Visual-Studio-2008-C-d295cdba)

使用 VS2010。

我了解该示例是为旧版本的 .NET 构建的，因此需要使用最新的 VS2010 DebuggerVisualizers.dll 重新编译。

所以这就是我所做的

1.  从上面的链接下载 VS2008 示例：http: [//code.msdn.microsoft.com/Visual-Studio-2008-C-d295cdba](http://code.msdn.microsoft.com/Visual-Studio-2008-C-d295cdba)
2.  在 VS2010 中打开的项目
3.  将项目更改为目标 .NET4.0
4.  将引用更改为指向 DebuggerVisualizers.dll 的此位置：C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ReferenceAssemblies\v2.0\Microsoft.VisualStudio.DebuggerVisualizers.dll
5.  构建项目，检查我是否可以实际可视化表达式树。在从样本修改的独立项目中一切正常
6.  将 ExpressionTreeVisualizer.dll 复制到以下位置

    ...\Documents\Visual Studio 2010\Visualizers ...\Program Files\Microsoft Visual Studio 10.0\Common7\Packages\Debugger\Visualizers

但我根本看不到 VS2010 中的调试器可视化器。

任何人都知道我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:53:22.357

好的，我设法找出这里发生了什么。也就是说，您必须为您希望使用的每种类型的调试器可视化工具放置一个单独的程序集级属性。

不幸的是，它似乎不够聪明，无法通过遍历继承树来知道这一点。所以我做了一切，但修改了源代码以在示例代码中的类“ExpressionTreeVisualizer”中包含以下属性

```
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(Expression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(BinaryExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(BlockExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(ConditionalExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(ConstantExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(DebugInfoExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(DefaultExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(DynamicExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(GotoExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(IndexExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(InvocationExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(LabelExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(LambdaExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(ListInitExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(LoopExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(MemberExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(MemberInitExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(MethodCallExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(NewArrayExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(NewExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(ParameterExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(RuntimeVariablesExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(SwitchExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(TryExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(TypeBinaryExpression), Description = "Expression Tree Visualizer")]
[assembly: DebuggerVisualizer(typeof(ExpressionTreeVisualizerForVisualStudio2010), typeof(ExpressionTreeVisualizerObjectSource), 
    Target = typeof(UnaryExpression), Description = "Expression Tree Visualizer")] 
```

# javascript - 远程 JavaScript 的安全性（cornify 和其他复活节彩蛋）

> ID：10187573
> 
> 赞同：0
> 
> 时间：2012-04-17T08:17:03.047
> 
> 标签：javascript, html

我想提供一项服务，用户可以购买（1 欧元左右）虚拟复活节彩蛋并将它们放入他们的网站。这种复活节彩蛋的内容可能是cornify按钮、手表、访客柜台等。此外，每个复活节彩蛋或噱头都应该有一个唯一的id，以便可以收集和交换它们。

现在我有点担心安全性，因为在某些情况下小部件需要与我的服务器通信（例如访客计数器），在其他情况下脚本应该能够控制 dom（角化按钮）。但我担心，没有人会包含那个远程脚本。但是很多人只是使用cornify.js 脚本。

**你能给我一些关于如何实施该服务的提示/想法吗？**

以下是我已有的一些想法：

*   [像这里](http://alexmarandon.com/articles/web_widget_jquery/)一样使用 JSONP
*   使用像 facebook 这样的 iframe，如果它必须与网站通信，请确保它像[这里描述的那样安全](http://wordpress.tv/2011/08/31/mike-adams-developing-secure-widgets-secure-iframe-communication-in-a-pre-postmessage-world/)
*   根本不使用远程 javascript

谢谢！

# c++ - FreeLibrary 阻止了我的应用程序

> ID：10187575
> 
> 赞同：2
> 
> 时间：2012-04-17T08:17:06.960
> 
> 标签：c++, dll

今天是个好日子！

我写了一些dll，我在我的项目中使用。在类的构造函数中我加载库`lib = LoadLibrary(L"library.dll");`，在析构函数中我使用释放它 `if (lib) FreeLibrary(lib);`

有时应用程序在调用 FreeLibrary 时会阻塞，我做错了什么？

我实现了 dllMain 但这并不能解决我的问题 =(

在 .h 文件中

```
BOOL WINAPI DllMain( HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpReserved );

extern "C" {
    static projector::CProjCorrectionsClient* corrections;

    void DLLPROJECTOR_EXPORT CorrectionsInit    (const char* configFile);
    void DLLPROJECTOR_EXPORT CorrectionsApply   ();
} 
```

在cpp文件中

```
BOOL WINAPI DllMain( HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpReserved )
{
    switch( fdwReason )
    {
        case DLL_PROCESS_ATTACH:
            qDebug() << "DLL_PROCESS_ATTACH";
            corrections = new projector::CProjCorrectionsClient();
            break;

        case DLL_THREAD_ATTACH:
            break;

        case DLL_THREAD_DETACH:
            break;

        case DLL_PROCESS_DETACH:
            qDebug() << "DLL_PROCESS_DEATTACH";
            delete corrections;
            qDebug() << "Corrections delete success";
            break;
    }
    qDebug() << "Out side dllmain switch";
    return TRUE; 
} 
```

在控制台上，我看到以下消息：

DLL_PROCESS_ATTACH 输出端 dllmain 开关 <...> 尝试释放库 DLL_PROCESS_DEATTACH 更正删除成功 输出端 dllmain 开关

FreeLibrary 调用和应用程序冻结后没有消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T08:42:10.970

确保您没有等待 DLL_PROCESS_DETACH 中的某个线程。

当调用 DllMain 时，系统获取内部临界区，如果你的代码在 DllMain 中等待某个线程 T 完成，这可能会导致死锁，这个线程在完成时也会想做 DLL_PROCESS_DETACH，但由于获取了系统临界区，它会无限等待造成僵局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T08:30:17.687

问题应该是 - 'dll 做错了什么？'。如果由于引用计数已达到零而要卸载库，则 FreeLibrary 将为 dll 提供清理的机会，并将使用 DLL_PROCESS_DETACH 调用 DllMain。也许尝试调试 dll 以查看此事件发生时发生的情况。此外，如果 DLL 中有任何可以运行析构函数的静态数据，那么问题可能就在那里。

# java - Java中各种线程同步选项有什么区别？

> ID：10187577
> 
> 赞同：5
> 
> 时间：2012-04-17T08:17:17.420
> 
> 标签：java, multithreading, synchronization, locking, mutex

有人可以解释 Java 中各种同步方法之间的各种差异吗？

*   同步块（如监视器？）
*   锁 - Java 并发 lock.lock()/lock.unlock()
*   信号量..？
*   Object.wait() & Object.notify() （比如 Mutex？）
*   其他类

所以我真的很想知道常用的不同 Java 同步选项是什么，以及它们如何映射到“传统”/理论互斥体、信号量、锁和监视器。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:51:34.560

我将对每个进行简要说明：

*   同步块是您的平均关键部分。没有给予太多控制。一次只能有一个线程获取锁，当同步作用域结束时会自动释放。
*   锁是同步块的更灵活版本。根据实现，它们可能是可重入的，也可能支持`tryLock`仅在空闲时尝试获取锁的操作，否则立即返回。锁需要显式解锁。
*   信号量基本上是一种锁，但具有多个线程可能同时进入临界区的附加功能。它在更一般的“许可”概念上运行，其中一个信号量可能有多个线程想要获取的许可。一个线程可以获取一个或多个许可并且可以恢复一个或多个许可。它允许更多地根据“可用资源”而不是“需要保护的代码”来考虑同步。
*   `wait / notify`大致相当于条件变量的概念。同样，它们必须受到同步块的保护，并且只有在被用作监视器的对象上持有锁时才调用它们才能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:26:26.347

Java 原生支持线程和同步。同步线程的本机（或低级）方法是使用同步块和方法（== 临界区），`wait()`并且`notify()`.

这种技术允许你做任何你想做的事情，但不幸的是，这种方式有时非常冗长。Doug Lea 最初在 Apache 项目下开发了并发包。然后这个软件包被 Sun Microsystems 采用。这个包提供了更方便的 API。

查看这篇文章了解更多详情：[http ://docs.oracle.com/javase/tutorial/essential/concurrency/](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

# php - 获取地址并在 php 中创建静态谷歌地图

> ID：10187579
> 
> 赞同：1
> 
> 时间：2012-04-17T08:17:27.850
> 
> 标签：php, google-maps

嗨，我有一个地址，每行由标签分隔，例如 span 或 p，我使用 jQuery 去除标签（我的想法是在整行中获取地址），然后使用谷歌地图静态版本将地址链接到正确的地图，当我复制谷歌地图代码和地址并将其粘贴到谷歌地图中时，它可以正常工作（即它会显示正确的地图）但我需要更进一步并将其显示为图像，如果我将代码包装在图像标签中，例如：

```
<img src='<?php function to bring address ?>' alt='' /> 
```

然后我去预览它，当我查看图像的源时，它显示了我之前在 jquery 中剥离的标签。

任何人都可以对此有所了解吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:25:40.043

看看这个：http: [//imagine-it.org/google/staticmap/encodemymap.php](http://imagine-it.org/google/staticmap/encodemymap.php)和 [http://static-maps-generator.appspot.com/](http://static-maps-generator.appspot.com/)

# git - *git svn clone* 后文件丢失

> ID：10187580
> 
> 赞同：0
> 
> 时间：2012-04-17T08:17:33.317
> 
> 标签：git, svn, version-control

我有一个 SVN 存储库，并且想从现在开始使用 git。

我尝试用 2 种方法克隆 repo。

1.  普通SVN结帐
2.  git svn 克隆

第一种方法做得很好。一切都很好，项目编译。但是，当我尝试第二种方法时。我发现 repo 中缺少一些文件，因此无法编译。

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:27:33.583

您的 svn 存储库是否使用[svn:external](http://www.simplisticcomplexity.com/2008/03/05/cleanly-migrate-your-subversion-repository-to-a-git-repository/)？

有关迁移过程的更多详细信息，请参阅[本文](http://www.ultrasaurus.com/sarahblog/2009/02/moving-from-svn-to-git/)。

# javascript - 单选按钮事件处理

> ID：10187581
> 
> 赞同：1
> 
> 时间：2012-04-17T08:17:34.793
> 
> 标签：javascript, dojo, radio-button, dom-events

我有一个单选按钮，只要未选择（选中）单选按钮中的特定值，我想禁用文本字段。我正在使用 dojo 的单选按钮。你能帮我解决这个问题吗？

```
 <dt><label for="Records_Size">Test Run Size</label></dt>
    <dd>
        <input id="Records_All" type="radio" dojoType="dijit.form.RadioButton" name="SourceQuery" checked 
        value="All"></input>
        <label for="Records_All">All input records</label>
    </dd>
    <dt>&nbsp;</dt>
    <dd>
        <span><input id="Records_Query" type="radio" dojoType="dijit.form.RadioButton" name="SourceQuery" 
        value="Query" ></input>
        <label for="Records_Query">Limit input records to:</label></span><span>&nbsp;<input type="text"
        dojoType="dijit.form.TextBox" id="Row_Count" style="width: 25px;" value="10"/></span>
    </dd> 
```

![我的 UI 上的单选按钮](../Images/687cc1812c408a98fb9da2398132402b.png)

基本上，我需要一个在此按钮失去焦点时触发的事件和一个在它重新获得焦点时触发的事件，但这两个事件的处理方式不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:21:12.417

如果您想要纯粹的客户端活动，那么...

```
<script>
function ManageTextBox(el){
    t=document.getElementById('Row_Count');
    if (el.value=='Query') {t.disabled=false}
       else {t.disabled=true}
    }
</script>

<dt><label for="Records_Size">Test Run Size</label></dt>
<dd>
    <input id="Records_All" type="radio" dojoType="dijit.form.RadioButton" name="SourceQuery" checked
    value="All" onchange="ManageTextBox(this)"></input>
    <label for="Records_All">All input records</label>
</dd>
<dt>&nbsp;</dt>
<dd>
    <span><input id="Records_Query" type="radio" dojoType="dijit.form.RadioButton" name="SourceQuery" 
    value="Query" onchange="ManageTextBox(this)"></input>
    <label for="Records_Query">Limit input records to:</label></span><span>&nbsp;<input type="text"
    dojoType="dijit.form.TextBox" id="Row_Count" style="width: 25px;" value="10"/ disabled></span>
</dd> 
```

请注意，每个单选按钮都有一个`onchange`属性，并且因为“全部”单选按钮开始时已选中，所以文本框需要开始`disabled`。更改单选按钮的值会调用根据按钮的新值更改文本框状态的函数。

[http://jsfiddle.net/LyStj/](http://jsfiddle.net/LyStj/)

# python - OpenCV（python）基本和基本矩阵不同意

> ID：10187582
> 
> 赞同：3
> 
> 时间：2012-04-17T08:17:39.067
> 
> 标签：python, opencv, computer-vision, camera-calibration

我尝试使用 OpenCV（python 接口）校准立体相机。我首先使用 calibrateCamera2 分别校准了两个摄像头，然后将参数输入到 stereoCalibrate

```
cv.StereoCalibrate(object_points, image_points_left, image_points_right, \
               point_counts, intrinsic_left, distortion_left,\
               intrinsic_right, distortion_right, \
               (IMGRES_X,IMGRES_Y), R, T, E, F, \
               term_crit=(cv.CV_TERMCRIT_ITER+cv.CV_TERMCRIT_EPS, 100, 1e-8),\
               flags=cv.CV_CALIB_FIX_INTRINSIC) 
```

我使用极线约束检查结果（如 OpenCV 书中所述），得到的*平均*误差约为 0.0039。

原则上，我应该能够将基本矩阵和基本矩阵与我的相机矩阵联系起来。所以我要做的是：

```
Mr = asarray(intrinsic_right,dtype=float64)
Ml = asarray(intrinsic_left,dtype=float64)
E = asarray(E)
F = asarray(F)
F2 = dot(dot(inv(Mr).T,E),inv(Ml)) 
```

然而，得到的矩阵 F2 一点也不像 F。有什么明显的我做错了吗？非常感谢您的帮助。

**编辑：** dot 和 inv 来自 numpy。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:13:16.603

StereoCalibrate() 返回的 E 和 F 矩阵是正确的。F 是按比例定义的，因此如果您要比较返回的 F 和从 E 计算的 F 矩阵，您需要对它们进行归一化以确保两者处于相同的比例。所以当你看它们时，它们看起来是一样的。StereoCalibrate() 标准化返回的 F，因此您需要标准化计算的 F2，正如您在评论之一中所指出的那样。我希望这可以更清楚地说明您为什么需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:51:30.053

我向您推荐 The [Fundamental Matix Song](http://danielwedge.com/fmatrix/) ...

但说真的，也许它是点积中的“标准化”？标准的 numpy`dot`函数似乎可以正确地将矩阵拆分为单独的行和列向量以进行乘法运算。

例如，如果我这样做：

```
A = mat(random.rand(3,3))
B = mat(random.rand(3,3))
dot(A,B) == A*B 
```

相反，我想知道它是否有助于执行直接的矩阵乘法：

```
F2 = np.linalg.inv(Mr.T) * E * np.linalg.inv(Ml) 
```

（注意我在这里使用 numpy 矩阵）

# c - 尝试使用 OpenCV 在 C 中编译的问题

> ID：10187583
> 
> 赞同：1
> 
> 时间：2012-04-17T08:17:41.400
> 
> 标签：c, opencv, compiler-errors, arm

我正在尝试在 ARM 中使用 OpenCV 编译 C 代码。当我尝试编译时，我正在使用下一个标志

```
-L/usr/lib
-lpthread
-lrt
-l
-I/usr/local/include/opencv
-I/usr/local/include
-L/usr/local/lib
-lopencv_core
-lopencv_imgproc
-lopencv_highgui
-lopencv_ml
-lopencv_video
-lopencv_features2d
-lopencv_calib3d
-lopencv_objdetect
-lopencv_contrib
-lopencv_legacy
-lopencv_flann 
```

我得到这个错误：

```
cannot find -lopencv_core
cannot find -lopencv_imgproc
cannot find -lopencv_flann 
```

我的`pkg-config` `--cflags`opencv：

```
-I/usr/local/include/opencv -I/usr/local/include 
```

和`pkg-config` `--libs`opencv：

```
-L/usr/local/lib -lopencv_core -lopencv_imgproc -lopencv_highgui -lopencv_ml -lopencv_video -lopencv_features2d -lopencv_calib3d -lopencv_objdetect -lopencv_contrib -lopencv_legacy -lopencv_flann 
```

这里有什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:55:44.947

您的编译行暗示您正在链接到静态库，因此您需要 .a 文件而不是 .so （.shared 对象）。看：

[链接到静态/动态库。](http://yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)

可能有用的信息。虽然面向 linux，但它不是特定于 linux 的。我假设您使用的是 gcc 而不是 llvm，尽管编译器标志可能相同。

# delphi - 在delphi中进行服务自安装

> ID：10187585
> 
> 赞同：18
> 
> 时间：2012-04-17T08:17:43.627
> 
> 标签：delphi, service

有谁知道如何在 Delphi 中制作服务应用程序，通过运行 exe 文件自行安装。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-17T08:20:10.683

使用`TService`该类创建的 Delphi 服务会生成支持自注册的可执行文件。像这样称呼它：

```
serviceexefilename.exe /install 
```

自然，您需要提升权限才能使其正常工作，就像安装服务的任何机制一样。

在另一个方向使用`/uninstall`来扭转过程。用于`/silent`使注册过程，好吧，沉默。

如果您希望自定义安装过程，您可以提供事件处理`BeforeInstall`程序`AfterInstall`、、、、。例如，一个常见的用途是为您的服务提供描述，因为基本代码没有。`BeforeUninstall``AfterUninstall``AfterInstall``TService`

# facebook-graph-api - Graph API 和好友信息

> ID：10187587
> 
> 赞同：1
> 
> 时间：2012-04-17T08:17:48.827
> 
> 标签：facebook-graph-api, permissions

我在使用 Graph API 访问一些朋友的信息时遇到了一些问题。

我希望能够检索有关我的应用程序用户（我为其获取访问令牌）和他的朋友的生日、位置和关系的信息。

为此，在从用户获取访问令牌的 oauth 请求中，我对范围参数使用以下权限：user_location、friends_location、user_birthday、friends_birthday、user_relationships、friends_relationships

然后，使用在此过程中获得的访问令牌 (ACCESSTOKEN)，我向 Graph API 发出请求。

如果我打电话给“https://graph.facebook.com/me?fields=id,name,username,location,birthday,relationship_status,significant_other&access_token=ACCESSTOKEN”它工作正常，答案包含我想要的所有信息。

但是，如果我调用“https://graph.facebook.com/AFRIENDOFMINE?fields=id,name,username,location,birthday,relationship_status,significant_other&access_token=ACCESSTOKEN”，则答案不包含有关生日、位置和关系的信息，它仅包含 id、name 和 username 字段。

我知道权限“user_XXX”和“friends_XXX”可以用来做我想做的事，但我不知道我是否理解错了。谁能帮我？提前致谢！

# django - Django 模板标签加载

> ID：10187590
> 
> 赞同：1
> 
> 时间：2012-04-17T08:18:04.973
> 
> 标签：django, django-templates

快速提问，伙计们，

只需说我有以下代码：

```
 {% for i in c.targetItems %}
        <tr> {% include "transfers/matching/_process_match_format.html" %} </tr>
        {% endfor %} 
```

在“_process_match_format.html”中，我使用了自定义模板标签。我必须将它加载到这个包含文件中，而不是它的父页面，否则它似乎不可用。django 是只加载一次自定义标签还是在每次循环时都加载它？

此外，有没有办法在父页面中加载标签并使其可用于任何包含？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:48:01.437

根据[Django 文档](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#include)：“这意味着包含的模板之间没有共享状态——每个包含都是一个完全独立的渲染过程。”。似乎每次`include`调用它都会加载标签。

有一种方法可以为所有模板加载标签，您需要将它们添加到内置模板标签中：[默认为所有视图加载 Django 模板标签库](https://stackoverflow.com/questions/1184983/load-a-django-template-tag-library-for-all-views-by-default)

# java - EJB 1.1 和磁盘 io

> ID：10187599
> 
> 赞同：1
> 
> 时间：2012-04-17T08:19:17.463
> 
> 标签：java, ejb, disk

我有一个关于 EJB 1.1 的问题（是的，真的那么老...... - 请不要骗我......）

所以问题是老问题之一：为什么我不应该在 EJB 中执行磁盘 io？尤其是阅读文件。

更准确地说，这个用例：它只需要一个文件作为某些特殊数据导出的模板。所以它是：

*   一个文件
*   很少改变（例如在特殊的维护时间内）
*   很少阅读
*   没有重载

有什么理由，为什么不从磁盘读取该模板文件？当我尝试在 EJB 中执行磁盘 io 时，是否有任何技术限制，例如 ForbiddenOperationException。我已经进行了测试，阅读和传输工作正常。这种行为在 EJB 2.x 或 3.x 中是否不同？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:31:01.587

此限制在规范中允许 EJB 集群，如果 EJB 是自包含的并且不依赖于文件系统等外部环境，这将更容易。

访问文件系统应该可以正常工作，但是，如果您真的想遵守规范，您可以将文件捆绑在 EJB jar 中并使用[`Class.getResourceAsStream`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:14:45.150

为什么不将其作为 blob 存储在数据库中？

然后你可以有一个管理员 webapp 从浏览器更改它

你可以使用 ldap 来认证/授权 webapp

哎呀，抱歉让生活变得如此复杂

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:36:11.363

来自[EJB 限制](http://java.sun.com/blueprints/qanda/ejb_tier/restrictions.html)：

> 不允许企业 bean 访问文件主要是因为文件不是事务性资源。允许 EJB 访问文件系统中的文件或目录，或者使用文件描述符，会损害组件的可分发性，并且会带来安全隐患。

您可以将文件打包到 JAR 中，以便您可以使用`getResource()`或`getResourceAsStream()`& 来读取它，并且可以独立更改、重新部署。

否则，如果您当前的方法没有遇到任何问题，那么它很好，但根据规范不推荐。

# svn - SVN如何忽略目录

> ID：10187600
> 
> 赞同：0
> 
> 时间：2012-04-17T08:19:21.140
> 
> 标签：svn, directory, ignore

我目前正在打字，这有效...

```
svn propset svn:ignore IgnoreMe C:\test\IgnoreMe 
```

但我想知道是否有一种方法可以在目录之前不指定“IgnoreMe”来说明它。就像只是陈述路径一样，比如......

```
svn propset svn:ignore C:\test\IgnoreMe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:25:09.380

这不是现在`svn:ignore`应该起作用的。您不能在被忽略的项目中设置该属性——如果您将其从版本控制中删除，则无法为其分配版本控制属性！

您必须在父目录中设置属性：

```
svn propset svn:ignore IgnoreMe C:\test\ 
```

也允许使用通配符：

```
svn propset svn:ignore Ignore* C:\test\
svn propset svn:ignore * C:\test\ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:27:22.540

您不会忽略 SVN 中的绝对目录，而是忽略相对于当前目录的目录或更一般的模式。

如果您在目录 * *C:\test**中，则需要发出

```
svn propset svn:ignore IgnoreMe 
```

忽略目录**C:\test\IgnoreMe**

# java - JSOUP 中的用户代理？

> ID：10187603
> 
> 赞同：6
> 
> 时间：2012-04-17T08:19:31.053
> 
> 标签：java, jsoup

我总是在`JSOUP`代码中随处可见。

`Useragent`设置为 Mozilla 。

如果我想将它设置为**谷歌浏览器或歌剧怎么办？**

```
Jsoup.connect(url)
      .userAgent("Mozilla"); 
```

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T08:29:18.200

去那里 ：

[http://www.useragentstring.com/pages/Opera/](http://www.useragentstring.com/pages/Opera/) 或 [http://www.useragentstring.com/pages/Chrome/](http://www.useragentstring.com/pages/Chrome/)

并得到你喜欢的那个。

例如：

```
Jsoup.connect(url).userAgent("Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52"); 
```

# php - 遍历对象并转换为数组类型

> ID：10187604
> 
> 赞同：3
> 
> 时间：2012-04-17T08:19:31.110
> 
> 标签：php, xml

我有一个 XML 类，它读取 XML 文件并允许像这样访问它

```
<config>
    <directory>
        <mvc>
             <model>model</model>
        </mvc>
    </directory>
</config>

echo $xml->config->directory->mvc->model 
```

（假设对象已传递给变量`$xml`）

输出

```
model 
```

我想将每个父/子/值节点变成一个数组。所以

```
echo $xmlArr['config']['directory']['mvc']['model']

echo's model 
```

我在使用`foreach`循环设置的过程中，但后来意识到如果 XML 文件具有深层嵌套节点，那么我的 foreach 语句将只涵盖这么多级别。XML 文件是一个我无法解释的动态变量，需要一个动态方法才能递归地遍历节点并将它们作为数组索引附加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:25:17.640

你可以看看[php.net](http://php.net/manual/de/book.xml.php)。

对于每个深度级别，您可以在循环中创建一个数组，并在迭代后将其附加到主数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:29:44.817

在 PHP 中，您可以使用`xml_parse_into_struct`方法将 XML 结构转换为数组

**参考：**

[http://www.php.net/manual/en/function.xml-parse-into-struct.php](http://www.php.net/manual/en/function.xml-parse-into-struct.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:26:33.773

看一下这个：

[http://www.phpbuilder.com/manual/en/function.get-object-vars.php](http://www.phpbuilder.com/manual/en/function.get-object-vars.php)

# etl - 如何使用 pentaho 水壶从一组行中找到唯一值？

> ID：10187605
> 
> 赞同：1
> 
> 时间：2012-04-17T08:19:51.990
> 
> 标签：etl, pentaho, kettle

我有一张去规范化的表格。我想从该表的一个特定列中选择所有值，并将该列中的唯一值加载到单独的表中。

如何使用 Pentaho Spoon 做到这一点？请注意，我是 Spoon 的新手。我一生中只尝试过 hello world 转换。

我有一个名为“Employees”的表，它有很多列如下（我在这里没有给出不相关的列）：

```
+-------------------------------------------------------+

                           Employees
+-------------------------------------------------------+

employee_number | employee_name | deputed_branch | phone

+-------------------------------------------------------+ 
```

现在我只想将唯一的分支名称移动到`branches`使用 Spoon 命名的新表中。

“分支”表如下所示：

```
+-------------------------------------------------------+

                           branches
+-------------------------------------------------------+

| branch_id | branch_name 

+-------------------------------------------------------+ 
```

其中 branch_id 将是唯一的并自动递增。

要连接`Employees`和`branches`表格，我将使用`Employee_branch`由`employee_number`和`branch_id`列组成的表格。

谁能告诉如何做到这一点？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T16:16:54.290

你不能在sql中做到这一点吗？

从员工中选择不同的 deputed_branch

如果不; 然后使用唯一行步骤（不是必须对数据进行排序）或逐步分组。（也排序）

或者; 如果行数低，则按内存分组（数据不需要排序）

# c# - WinForms 应用程序中的异常处理行为，它使用模态对话框

> ID：10187606
> 
> 赞同：9
> 
> 时间：2012-04-17T08:19:52.293
> 
> 标签：c#, winforms, exception-handling

我遇到过这样的情况。WinForms 应用程序有两种形式。主窗体有一个按钮，当用户单击它时，会显示模态对话框。对话框表单也有一个按钮，当用户单击它时，会引发异常。

当应用程序在调试器下运行并自行运行时，异常处理会**有所不同。**这是重现此行为的最少代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            using (var dialog = new Form2())
            {
                dialog.ShowDialog();
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("Oops! " + ex.Message);
        }
    }
}

public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        throw new NotImplementedException();
    }
} 
```

调试时，引发异常会关闭对话框，Form1.button1_Click 中的异常处理程序会处理异常。

运行应用程序本身时，引发异常**不会**关闭对话框。取而代之的是调用默认的 Application.ThreadException 处理程序。

为什么（以及为什么）行为会有所不同？怎样才能使它们相互协调？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T08:32:06.803

在你的 Program.Main() 中试试这个：

```
[STAThread]
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.SetUnhandledExceptionMode(UnhandledExceptionMode.ThrowException);
    Application.Run(new Form1());
} 
```

原因与 Windows 窗体程序集在 Visual Studio 托管进程之外运行的方式有关。看到这个：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)

如果将上面的代码行设置为：

```
Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException); 
```

并在 VS 中运行它，您将看到默认行为是什么 - 一旦您跳过代码中的初始异常，将显示您所引用的对话框。默认值只是不同，具体取决于您是在托管模式下运行还是在独立模式下运行。

好吧，MS链接中涵盖了“为什么”-错误发生在事件处理程序中，该处理程序位于不同的线程上。默认行为是区别对待，仅在 WinForms 下。如果在调用对话框之后放置此行：

```
throw new Exception("Bah!"); 
```

并保持 CatchException 上的行为，您将看到它按照您的预期进入您的异常处理程序。只有事件处理程序中的异常处理方式不同。希望有帮助。

# wireshark - RTP over GTP 与 PCMU 内容 - 剖析

> ID：10187607
> 
> 赞同：0
> 
> 时间：2012-04-17T08:20:01.043
> 
> 标签：wireshark, pcm

Wireshark 如何剖析 GTP-u 内容？

如果我没有 ipsec，GTP-U 中的内容是否也会加密？

如 Wireshark 所示，我有一些 GTP 隧道的 G711 PCMU 内容，但我看到到处都有两个内容相同的数据包，但 IP 不同。

我无法理解这是如何被剖析的，内容是否真的被加密了，因为通常 PCMU 内容的帧大小是 160 字节，没有 RTP 标头，但在这里我只看到没有标头的 32 字节。

任何人对此 GTP-U 内容有任何想法，或者可以向我提供一些文件或资源来理解相同的内容吗？

谢谢尼丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:43:35.750

GTP-U 没有为有效载荷指定加密；它按原样封装。

要了解 GTP，请参阅[3GPP TS 29.060](http://www.3gpp.org/ftp/Specs/html-info/29060.htm)。

# hibernate - 是否可以使用 envers 查找属性的最后更改

> ID：10187608
> 
> 赞同：0
> 
> 时间：2012-04-17T08:20:04.557
> 
> 标签：hibernate, audit

我对 Envers 很陌生，我可以看到如何获取某个实体的修订列表，但是是否可以搜索特定属性的更改？

我想为我的实体找到以前版本的“名称”属性。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:26:18.170

Hibernate 可能不支持此功能。您可以尝试使用数据库触发器添加 AUDIT TRIAL 功能，或者也可以使用 Hibernate 事件来实现。但数据需要存储在单独的表中。

# git - 是否可以让 Gerrit 随机挑选审稿人？

> ID：10187610
> 
> 赞同：5
> 
> 时间：2012-04-17T08:20:08.783
> 
> 标签：git, gerrit

是否可以让 Gerrit 随机挑选审稿人？

如果通过配置 Gerrit 无法实现，是否可以通过 Git 命令/脚本来实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T08:47:40.587

您不能将 gerrit 配置为分配随机审阅者，也不能配置默认审阅者/每个项目。请参阅[上游](http://code.google.com/p/gerrit/issues/detail?id=681)问题。

但是，您可以使用查询 API 来获取所有打开的评论请求，然后您可以遍历 JSON 数据并从某个组中找到没有活跃评论者的请求

```
ssh gerrit.server gerrit query --format=JSON status:open NOT reviewerin:<your group> 
```

然后，您可以使用 set-reviewers API 添加审阅者：

```
ssh gerrit.server gerrit set-reviewers --add <name> <ChangeId Received From Above> 
```

# python - 如何让 Django unittest 将数据提交/保存到数据库

> ID：10187616
> 
> 赞同：3
> 
> 时间：2012-04-17T08:20:36.240
> 
> 标签：python, django, unit-testing

我正在为 django 调试一个大型单元测试测试，并且想使用我的常规调试工具来完成它：

1.  通过runserver查看django admin中的db
2.  手动查看数据库。

两者都不起作用，因为 unittest 尚未提交它正在运行测试的 db 端的事务。

显而易见的解决方案似乎是告诉 unittest 不要使用事务，或者让它以某种方式提交。另一种方法是创建一个自定义设置文件，让 runserver 连接到事务。但是第一个想法似乎应该很容易。有任何想法吗？我正在使用 MySQL 和 django 1.3.1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T08:33:00.753

考虑将[`TransactionTestCase`](https://docs.djangoproject.com/en/1.10/topics/testing/tools/#transactiontestcase)其用作测试用例的父类，而不是`TestCase`. `TransactionTestCase`不使用 的事务行为`TestCase`，因此您可以在需要检查数据库状态的地方提交。

此外，如果您的单元测试太大以至于您需要在其运行时检查其数据库状态，那么您可能做错了。单元测试应该只测试一件事和一件事，并且任何时候的状态都应该是相当明显的。有关编写良好单元测试的一些极好的建议，请参阅 Carl Meyer 在 Pycon 2012 上关于[Django 测试的演讲。](http://pyvideo.org/video/699/testing-and-django)

# string - Bash 将输出解析为变量

> ID：10187617
> 
> 赞同：3
> 
> 时间：2012-04-17T08:20:40.797
> 
> 标签：string, bash, awk, jpeg

我正在尝试将我的照片分类为纵向和横向。我想出了一个打印 jpeg 大小的命令：

```
identify -format '%w %h\n' 1234.jpg 
1067 1600 
```

如果我在 bash 脚本中使用它来将所有风景图片移动到另一个文件夹，我希望它类似于

```
#!/bin/bash
# loop through file (this is psuedo code!!)
for f in ~/pictures/
do
 # Get the dimensions (this is the bit I have an issue with)
 identify -format '%w %h\n' $f | awk # how do I get the width and height?
 if $width > $hieght
  mv ~/pictures/$f ~/pictures/landscape/$f
 fi
done 
```

一直在查看 awk 手册页，但我似乎找不到语法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T08:27:01.713

您可以使用`array`：

```
# WxH is a array which contains (W, H)
WxH=($(identify -format '%w %h\n' $f))
width=${WxH[0]}
height=${WxH[1]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T08:32:16.350

你不需要AWK。做这样的事情：

```
identify -format '%w %h\n' $f | while read width height
do
    if [[ $width -gt $height ]]
    then
        mv ~/pictures/$f ~/pictures/landscape/$f
    fi
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T08:27:12.083

```
format=`identify -format '%w %h\n' $f`;
height=`echo $format | awk '{print $1}'`;
width=`echo $format | awk '{print $2}'`; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-17T15:07:31.387

傻瓜，现在是“doh，明显的”：

```
# use the identify format string to print variable assignments and eval
eval $(identify -format 'width=%w; height=%h' $f) 
```

# mysql - 在mysql中编写查询

> ID：10187619
> 
> 赞同：-3
> 
> 时间：2012-04-17T08:20:42.290
> 
> 标签：mysql

这就是我要检索的内容：“查找在教授某些课程的每个房间中任教的教职员工的姓名”

我的桌子是：

```
CREATE TABLE FACULTY (
  fid NUMERIC(6) NOT NULL,
  fname VARCHAR(20),
  dept VARCHAR(5),
  PRIMARY KEY (fid),
  FOREIGN KEY (fid)
  references STUDENT (sid)
 );
CREATE TABLE CLASS(
  cnum VARCHAR(6),
  meets_at TIME,
  room VARCHAR(6),
  fid NUMERIC(6) ,
  PRIMARY KEY (cnum),
  FOREIGN KEY (fid)
  references FACULTY (fid)     
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:30:26.203

你应该用谷歌搜索关键字“LEFT JOIN”

# c - 如何将表存储到链表中？

> ID：10187620
> 
> 赞同：-1
> 
> 时间：2012-04-17T08:20:54.243
> 
> 标签：c, list, linked-list, huffman-code

所以，我做了一点阅读并咨询了朋友的帮助。我想我明白了吗？实际上，我在项目中的部分只是将字符和频率表存储到一个链表中。我已经写下了一些代码，如果有人可以改进它，是否有可能。

示例输入 .txt 文件（字符和频率表）：
B1
D3
E7
J9

结构：

```
struct node {
  char info;
  int freq;
  struct node * next;   
  struct node * left, *right, *father;
};

typedef struct node * nodeptr;

nodeptr getnode(){  
return malloc(sizeof(struct node));
} 
```

主程序（直到将表存储到链表中的部分）：

```
string input;
nodeptr list = NULL;
FILE *fopen();
int c;
list = fopen("Huffman Table.txt","r");
c = getc(input) ;
while (c!= EOF)
{
    putchar(c);
    c = getc(input);
}
getch();
fclose(input);

for (node * row = table; row != NULL; row = row->next){
fprintf(file, "%s %i %i", row->info, row->freq);
} 
```

不过，我不确定这部分：

```
for (node * row = table; row != NULL; row = row->next) 
```

我应该改用这个吗？

```
for(i=0;i<strlen(input);i++){ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:44:50.487

我不认为

`for (node * row = table; row != NULL; row = row->next)` 会起作用，因为您应该在第一个分号之前传递一个作业。

你在做什么是……我真的不知道……

`for(i=0;i<strlen(input);i++){`

会更好。但我不确定，因为我不知道应该保存什么字符串输入以及您如何使用*行*和*表*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:44:58.180

使用的 for 循环（在语法上）完全没问题，而且并不少见。但是，什么是“表”指针？它是您列表的根目录吗？小评论 - 如果您创建了“nodeptr”typedef，您应该在那里使用它。这就是它的用途。我担心您的代码的其他一些部分

1.  你说它应该是一个链表，那么为什么你的结构有“父亲”指针？在我看来，它更像一棵树。如果这不是意图，请删除该字段。

2.  我不确定我是否理解你写的最后一段代码。如果要将列表的内容写入文件，则应使用上面提到的 for 循环。

至于对这段代码的总体改进（对我来说这看起来像是一个家庭作业，我想应该这样标记），就是使用 std::list<>。但是，只有在允许您使用 C++ 而不是 C 编写代码的情况下，才能这样做。

# windows-server-2008 - IIS 中的多个绑定会减慢所有其他站点的速度

> ID：10187623
> 
> 赞同：0
> 
> 时间：2012-04-17T08:21:07.847
> 
> 标签：windows-server-2008, iis-7.5

在 IIS 7.5 中的 Windows 2008 服务器上，我们有大约 60 个网站。

这些网站中的大多数只有几个绑定......

*   example1.com
*   www.example1.com

但是我们有一个网站，有近 160 个不同域的绑定。

在过去的几天里，我们所有的网站都开始变慢了；但是，当我们关闭带有大量绑定的站点时，一切都会正常运行。

该绑定数量将如何影响整个服务器的速度？有没有办法限制站点可能使用的服务器资源？

# ios - osx 上的“I Space”和“D Space”是什么以及它们之间的区别

> ID：10187624
> 
> 赞同：2
> 
> 时间：2012-04-17T08:21:23.397
> 
> 标签：ios, macos, ptrace

在 sys/ptrace.h 中，我看到了类似的内容：

```
@define PT_READ_I  1 /* read world in child's I space*/
@define PT_READ_D  2 /* read world in child's D space*/
@define PT_READ_U  3 /* read world in child's user structure*/ 
```

什么是“I 空间”、“D 空间”和“用户结构”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:25:39.027

引用手册页：

> 传统上， ptrace() 允许机器具有不同的指令和数据地址空间，这就是为什么有两个请求：从概念上讲，PT_READ_I 从**指令空间** 读取，而 PT_READ_D 从**数据空间**读取。在当前的 NetBSD 实现中，这两个请求**完全相同。**

现在关于 PT_READ_U：

> 该空间包含有关进程的寄存器和其他信息；它的布局与系统中的**用户结构**相对应。

# python - 在没有路由焦点的情况下将滚动事件路由到 wxPython 中的 ScrolledPanel

> ID：10187625
> 
> 赞同：3
> 
> 时间：2012-04-17T08:21:24.070
> 
> 标签：python, scroll, focus, wxpython

所以我有一个包含多个 wx.Panel 的框架，其中包含一个 wx.TextCtrl 和一个 wx.lib.scrolledpanel.ScrolledPanel。当鼠标悬停在 wx.Panel 上时，我想将任何鼠标滚动事件路由到 ScrolledPanel（因此无论是 TextCtrl 还是面板，它们中的任何一个都不一定具有焦点） -*无需*将焦点从之前拥有的任何控件上移开。

例如，我之前找到的解决方案是让鼠标在 ScrolledPanel 上的任何移动都赋予它焦点 - 但是这个路由焦点远离了 TextCtrl。

我尝试在 wx.Panel 上绑定 EVT_MOUSEWHEEL，但是当我抓取 event.GetWheelDelta() 或 event.GetWheelRotation() 时，这似乎没有任何作用

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-12T18:58:02.167

在该 ScrolledPanel 上的每个 wx.Panel 上，当鼠标在其上移动时，您必须绑定一个事件以将焦点设置到 ScrolledPanel。

```
class ListItem(wx.Panel):
    def __init__(self, parent):
        super(ListItem, self).__init__(parent)

        self.Bind(wx.EVT_MOTION, self.OnMouseMotion)

        #Add all your other objects to this panel as normal

    def OnMouseMotion(self, event):
        panel = event.GetEventObject().GetParent()        
        panel.SetFocus() 
```

如果您没有为滚动面板上的每个列出的面板创建一个类，您也可以在线执行此操作：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T03:15:04.543

取消绑定滚动窗口焦点事件是否有效？

```
 self.scrollwin.Unbind(wx.EVT_SET_FOCUS)
    self.scrollwin.Unbind(wx.EVT_KILL_FOCUS) 
```

# regex - Apache 位置匹配通配符 URL

> ID：10187627
> 
> 赞同：2
> 
> 时间：2012-04-17T08:21:34.087
> 
> 标签：regex, linux, apache, vhosts, locationmatch

我的 VHOST 目前看起来像：

```
<VirtualHost *:80>
     DocumentRoot /data/sites/example_deploy
     ServerName deploy.example.co.uk
     <Directory "/data/sites/example_deploy">
        Options +SymLinksIfOwnerMatch
        AllowOverride All
        Order allow,deny
        Allow from all

        AuthUserFile /data/confs/svn/htpasswd
        AuthName "Example deployment example testing"
        AuthType Basic
        Require valid-user
    </Directory>
</VirtualHost> 
```

我们有一个采用不同参数的 URL /api。例子是：

*   /api/testing-bot-response/1234842823
*   /api/sql-deploy-response/stage/172bUd7s

我们试图实现的是 /api/* 不需要有效用户，并且在发出请求之前满足 HTaccess。URL 可能由 2 个以上的参数组成。

我已经研究过这个主题并发现我需要使用 LocationMatch 并传递 Satisfy 参数，但是我不确定应该如何形成正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-30T17:13:08.683

我已经解决了这个问题。诀窍是使用`LocationMatch`. 看下面的代码：

```
$<LocationMatch "/api/*"> 
    order allow,deny 
    allow from all 
    Satisfy any 
</LocationMatch> 
```

# session - 为同一窗口中的不同选项卡创建不同的会话

> ID：10187629
> 
> 赞同：0
> 
> 时间：2012-04-17T08:21:46.480
> 
> 标签：session, jakarta-ee, struts2, session-state

如何为同一窗口中的不同选项卡创建不同的会话？

我正在尝试，但它总是在 Struts2 应用程序的不同窗口中使用相同的会话？

我已经更改了两个 cookie，但会话保持不变。

它的 struts2 java 应用程序。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:00:56.670

@user1126046**这是不可能的**，
如果你想在同一个窗口中为不同的选项卡创建不同的会话，你需要通过动态编写 URL 来强制用户使用你的应用程序的单个实例（同一实例的不同 URL（URL 编码） ,`SessionID`在这种情况下不起作用）。
除非您想在每个请求中通过 GET 或 POST 传递数据，否则您不能这样做。

**但是**：我们可以通过分配一个 Window-Id（使用[Apache MyFaces Orchestra](http://myfaces.apache.org/orchestra/index.html)、Spring MVC、jsf）来实现，请参阅[此答案](https://stackoverflow.com/questions/4479995/managing-webapp-session-data-controller-flow-for-multiple-tabs/4480310#4480310)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:38:29.663

我真的不知道你的问题到底是什么，但如果你想要每个标签的“不同会话”之类的东西，你可以看看这个[http://code.google.com/p /struts2-对话/](http://code.google.com/p/struts2-conversation/)。

它是我自己维护的插件。我经常发布，但它们是向后兼容的。但同样，我不确定你到底需要什么，所以我不知道这是否足够。

# android - 手机重启后Android sdcard没有出现

> ID：10187630
> 
> 赞同：0
> 
> 时间：2012-04-17T08:21:46.393
> 
> 标签：android, android-sdcard

我在我的 HTC Desire S 中遇到了一个关于 android sdcard 的奇怪的事情，我有一个应用程序在 onCreate 函数中有一些对 sdcard 的操作，并且这个应用程序将在手机启动时启动。

现在我安装了这个应用程序，然后重新启动手机，当手机重新启动时，我的应用程序崩溃了，我发现它是由 sdcard 为空引起的。我对此一无所知。是我的错吗？还是android在应用程序启动之前没有准备好sdcard？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:25:13.873

您必须等待 sdcard 安装`ACTION_MEDIA_MOUNTED`在您的意图中。

当手机启动时，SD卡可能需要一些时间才能准备好（文件系统检查、错误恢复等）

# android - 再次单击我的应用程序图标时如何停止活动

> ID：10187633
> 
> 赞同：0
> 
> 时间：2012-04-17T08:22:14.353
> 
> 标签：android, android-activity

![当我单击培训图标时，它会显示名为 Home 的按钮](../Images/3e6fee9e8ccb1cfb390005d82369f6f3.png)

当我单击培训图标时，它会显示名为 Home 的按钮。

![在此处输入图像描述](../Images/13ca6be601ba7429c71428a0290feb31.png)

当我单击主页按钮时，它会显示如下主屏幕。

![在此处输入图像描述](../Images/0a00c313d00e6c4acb7bc0b20d8c749f.png)

我的应用程序当前运行正常，我想关闭应用程序，并且当我单击应用程序图标（培训）时必须显示主屏幕。我该怎么做..？

![在此处输入图像描述](../Images/82c2b4f6f0e98b672afe37053ac8ed81.png)

实际上，我的布局中有一个按钮，当按下按钮时，我正在显示带有以下代码的主屏幕。

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
startMain.addCategory(Intent.CATEGORY_HOME);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

它显示主屏幕，我的后台服务已启动。当我单击启动器图标时，我想停止我的应用程序中的所有操作。我的问题是再次单击我的应用程序图标时如何停止活动。

对不起英语不好..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:25:42.417

如果您的应用程序仅包含一个活动，那么当用户重新单击启动器图标时它已经停止（因为他必须退出应用程序）。如果这不是您的情况，我们需要更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:28:00.623

穿上`finish();`方法`onResume()`。

当然，如果您需要做其他事情，只需将您的代码放在`finish();`.

它应该做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:31:12.507

也许您可以检查您的服务是否正在运行，或者使用静态 int 计数器更脏。让计数器在你的`onCreate()`. 现在您可以检查您的 apk 的第二次启动

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T08:39:28.580

在您的活动中使用它。当您退出应用程序时，它将停止操作并销毁应用程序。当您再次单击应用程序图标时，它将启动新活动。

```
@Override
protected void onDestroy() {
    android.os.Process.killProcess(android.os.Process.myPid());
} 
```

# c# - 如何使用 NHibernate 实现保存/丢弃功能？

> ID：10187636
> 
> 赞同：1
> 
> 时间：2012-04-17T08:22:28.770
> 
> 标签：c#, nhibernate, mvvm

我有一个使用 MVVM 模式的 WPF 应用程序，其中 ViewModel 调用执行所有保存/更新/获取/删除内容的查询。例如，我这样做是因为很容易修改查询以交换存储系统。

如果数据被即时存储/删除，应用程序运行良好，但客户端需要一个保存按钮，所以我必须记住（或 Nhibernate）进行了哪些更改。我不想让会话打开很长时间，所以我不知道最好的方法。你知道任何可行的模式/架构吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:12:24.457

这对我来说适用于一个简单的应用程序：

*   视图模型的开放会话
*   如果不使用事务则 Flushmode.Never （防止查询刷新）
*   使用生成客户端 id 的 id 生成器（hilo，guidcomb，...）
*   不要在 CRUD 之后使用 Flush
*   检查`session.IsDirty`以启用保存按钮
*   如果保存 -> 刷新（）或提交
*   如果取消 -> 处理会话或回滚

然后 NH 将在刷新时发送所有操作

# client - 如何为自定义播放器使用客户端 ID

> ID：10187637
> 
> 赞同：0
> 
> 时间：2012-04-17T08:22:29.453
> 
> 标签：client, soundcloud

我在我也出售的自定义播放器中使用 soundcloud API。到目前为止，我告诉每个客户注册一个新应用程序并添加他自己的客户 ID。这是必要的还是我也可以在代码中包含我的客户 ID？由于安全问题，当其他用户拥有我的客户 ID 时，我问这个问题。

问候， 拉斐尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:02:04.937

client_id 通常是公开的，并且可能被其他人重用，没有办法阻止这种情况。

您的案例听起来可以在自定义播放器中包含一个通用 client_id 而不是每个站点一个。

# ldap - 如何在 Thunderbird 中显示 LDAP 联系人的 sAMAccountName 或别名？

> ID：10187638
> 
> 赞同：0
> 
> 时间：2012-04-17T08:22:29.983
> 
> 标签：ldap, thunderbird

`sAMAccountName`属性是 Active Directory 唯一的用户名标识符，有时也存在于`alias`属性中。

问题是 Thunderbird (11.0.1) 没有在界面中显示任何这些 LDAP 字段。

我怎样才能让它显示这些字段，因为我发现它们对于在电子邮件地址不包含您的用户名的系统中识别用户至关重要。

为什么 StackOverflow 上有这个问题：因为该解决方案需要一些编码，因为我找不到任何已经实现的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:07:15.627

似乎有一种方法可以在没有真正编码的情况下实现这一点：

转到编辑 > 首选项 > 高级 > 常规 > 配置编辑器：

`ldap_2.servers.default.attrmap.NickName = sAMAccountName`

现在您将看到域登录名（用户名）作为昵称。

当您单击传入的电子邮件时，如果只有某人会知道如何使 Thunderbird 查找 LDAP。

# android - Android GridView 垂直边框

> ID：10187641
> 
> 赞同：1
> 
> 时间：2012-04-17T08:23:00.513
> 
> 标签：android, gridview, android-gridview

我试图让我的片段之间的边界显示在`GridView`. 我将背景色设置`GridView`为白色，片段的背景色设置为黑色。然后我插入了这些代码行：

```
int border = 2; // px
view.setColumnWidth((dm.widthPixels / 2)-(4*border));
view.setNumColumns(2);
view.setHorizontalSpacing(border);
view.setVerticalSpacing(border); 
```

`view`是我的`GridView`。

结果是整体左侧`GridView`以及顶部和底部片段之间的边界很好。但是顶部的两个片段之间没有边界。

这是我的声明`GridView`：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/overview"
    android:stretchMode="columnWidth"
    android:clipChildren="true" >

</GridView> 
```

可能有人可以帮忙。

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T22:07:48.453

好吧，我在之前的评论中试图解释的是：与其`GridView`调整你想要的间距，你为什么不尝试让网格项目来处理它呢？一个简单的解决方案是通过将适当的可绘制对象设置为您正在使用/传递到`GridView`' 的适配器的布局文件的背景 - 换句话说：您用于网格项目的布局，在您的情况下将是你提到的片段。

一个简单的例子：

采取`GridView`：

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white"
    android:numColumns="4" /> 
```

以及用于其中项目的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/grid_background"
    android:gravity="center"
    android:text="Text"
    android:textColor="@android:color/white" /> 
```

最后，来自背景可绘制的魔法：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">    
    <stroke android:width="5dp" android:color="@android:color/white" />    
    <padding android:bottom="5dp" android:left="5dp" android:right="5dp"
        android:top="5dp" />    
    <solid android:color="@android:color/black" />    
</shape> 
```

结果将是：

![带有“边框”的网格视图](../Images/e84b4db43249956eb7b195dcc99e5834.png)

顺便说一句，我不确定为什么水平和垂直间距参数对你不起作用。当我使用它们时，我可以获得与上图非常相似的效果：

`GridView`：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white"
    android:horizontalSpacing="10dp"
    android:numColumns="4"
    android:verticalSpacing="10dp" /> 
```

项目布局（只需将较早的背景资源换成固定颜色）：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/black"
    android:gravity="center"
    android:text="Text"
    android:textColor="@android:color/white" /> 
```

结果：

![另一个带有“边框”的网格视图](../Images/63b221d2ee673c92c29956ab20ea286f.png)

希望这对您有所帮助。

# actionscript-3 - 在 Actionscript 错误中找不到类

> ID：10187645
> 
> 赞同：0
> 
> 时间：2012-04-17T08:23:28.563
> 
> 标签：actionscript-3, apache-flex, adobe, flash, mxml

我正在尝试从[http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf61c8a-7ff4.html运行程序](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf61c8a-7ff4.html)

我正在使用 Adbobe builder 4.6 版我遇到这个问题 WAVwriter class not found when I import com.adobe.audio.format.WAVWriter;

还有 var outputFile:File = File.desktopDirectory.resolvePath("recording.wav"); 找不到文件类型。。

如何解决此错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:55:56.633

Exactly as Adnan Doric said. And if you want to output your file using Flash Player runtime (instead of AIR), you should use **flash.net.FileReference** class. Calling its dowload() method will pop up an external dialog which can be used to save your file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:37:34.137

**File**是一个 AIR 类，请确保您的项目适用于桌面或移动 (AIR)。如果没有，您可以通过转到**File/New/Flex Project...**并选中**Desktop**复选框来创建新的桌面项目（对于移动设备，请选择**Flex Mobile Project**）。

关于**WAVWriter**，请确保您链接了相关来源。

# cakephp - CakePHP Shell，如何使用控制器动作

> ID：10187650
> 
> 赞同：1
> 
> 时间：2012-04-17T08:23:51.817
> 
> 标签：cakephp, cakephp-2.1

使用蛋糕 2.1.1。我正在尝试做一个 cron 作业来执行来自控制器的操作。哪种方法是正确的？我有一个带有名为 admin_test 的操作的 OffersController。我希望每 2 小时运行一次此操作。目前我在 app/Console/command/SyncapiShell.php 中做了一个 shell：

```
class SyncapiShell extends AppShell {
    public $uses = array('Offer');

    public function main() {
       $this->Offer->admin_test();
    }
} 
```

但是我在尝试执行 shell 时遇到 SQLSTATE[42000] 语法错误或访问冲突。我还在使用管理路由、身份验证组件和 ACL。外壳是如何工作的？它忽略了身份验证和 acl 权限？通常，admin_test 操作只能由特定的经过身份验证的用户访问。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T08:31:14.240

不，这不是正确的做法，但更有可能表明您的应用架构不好。你应该有胖模型和微型控制器。

Shell:uses 将像控制器的 uses 属性和加载模型一样工作。在控制器中，您应该使用模型关联，而不是使用使用加载数千个模型。

重构您的控制器方法并将代码移动到 Offer 模型中。

![千层蛋糕](../Images/e57a5c5e264e3fd1572ca5e9623f6fc1.png)

为什么外壳需要身份验证或管理员路由？顾名思义，shell 是一个 shell 程序，而不是一个网站。身份验证基本上由操作系统和运行脚本的用户完成。无论如何，只有有权访问 shell 的人才能运行它。

# node.js - Express 3.0 req.flash？

> ID：10187651
> 
> 赞同：13
> 
> 时间：2012-04-17T08:23:52.267
> 
> 标签：node.js, coffeescript, express

***- 编辑 -***

我写了一些中间件来做到这一点：[https ://npmjs.org/package/flashify](https://npmjs.org/package/flashify)

* * *

所以自 Express 3.0 发布以来，更改已删除 req.flash()

[https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)（来源）

所以这是我现在的问题。他们建议在本地使用 req.session.messages 来显示 flash。

因此，要使视图可以访问会话，我们必须执行以下操作：

注意：在咖啡脚本中

```
app.locals.use (req,res) ->
    res.locals.session = req.session 
```

我们如何从视图访问会话数据然后清除它？视图渲染后我们无法清除会话的内容，但我们无法清除它，因为它不会到达视图，所以我有点迷失了如何解决这个问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-02T02:37:56.493

您可以使用[connect-flash](https://github.com/jaredhanson/connect-flash)中间件将 req.flash() 功能添加回 express 3.0。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-18T20:53:08.347

我相信他们只是将 req.flash 移至 req.session.messages

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-14T15:10:06.740

从上面蒂姆的链接：

*这个中间件是从 Express 2.x 中提取的，在 Express 3.x 删除了对闪存的直接支持之后。connect-flash 将此功能带回 Express 3.x 以及任何其他中间件兼容的框架或应用程序。+1 彻底的可重用性。*

Express 2.x migrate to 3.x[页面](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)说明如下：

*   `req.flash()`（只使用会话：`req.session.messages = ['foo']`或类似的）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-19T06:04:22.837

除了[`connect-flash`](https://github.com/jaredhanson/connect-flash)and [`express-flash`](https://github.com/RGBboy/express-flash)，还有 just [`flash`](https://github.com/expressjs/flash)，它是由 expressjs 团队制作的（我认为这是一个奖励）。使用超级简单：

## 安装：

```
npm i flash 
```

## 应用程序.js：

```
app.use(session()); // session middleware
app.use(require('flash')());

app.use(function (req, res) {
  // flash a message
  req.flash('info', 'hello!');
  next();
}) 
```

## view.jade:

```
while message = flash.shift() // consume messages as jade reads them
  a.alert(class='alert-' + message.type)
    p= message.message 
```

注意上面的代码是如何*改变*它们的；如果您只是读取数组，则闪存消息会一直挂在会话中（这对于重定向*非常有用）。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-24T04:29:11.957

安装 connect-flash 中间件，需要它，然后

`app.use(flash())`并注意它应该出现在之前`app.use(express.session...)`

# php - PHP S3 上传进度

> ID：10187653
> 
> 赞同：8
> 
> 时间：2012-04-17T08:23:56.223
> 
> 标签：php, amazon-s3

这已经发生了很多次，但我仍然有点困惑。很多答案只涉及谈论上传进度条，而不是从 S3 上传中获得实际的上传进度。

我已经阅读了许多问题并找到了许多软件，但我仍然没有更深入地理解 S3 上传的基本问题。

有没有一种方法可以在了解上传进度的同时上传到 S3，而不必先使用我自己的应用服务器资源将文件存储在 temp 目录中？

我是否必须先将文件存储在自己的服务器上，然后再推送到 S3？我听说人们谈论一次将流传输到 S3（一次一个块），但我不确定这涉及到什么。想象一下，我在 HTML 页面中从客户端上传，我将如何从多部分中逐块流式传输文件？（我没有看到任何示例，只有当文件已经在您的系统上并且您知道有点无用的块时的示例）。

API 文档中当然有一个上传进度的示例，但同样假设文件首先在您的服务器上，并且不是来自用户提供的另一台计算机。

编辑：我最初的想法是制作一个 PHP 脚本，它可以每隔一段时间 ping AWS 一次，以获得上传进度。我正在查看 API 以查看它们是否支持类似的东西，但 atm 没有运气。让我知道如果有什么...

进一步编辑：闪存是唯一的方法吗？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-04-29T21:14:38.937

**是**的，在 AWS PHP SDK v3 中是可能的。

```
$client = new S3Client(/* config */);

$result = $client->putObject([
    'Bucket'     => 'bucket-name',
    'Key'        => 'bucket-name/file.ext',
    'SourceFile' => 'local-file.ext',
    'ContentType' => 'application/pdf',
    '@http' => [
        'progress' => function ($downloadTotalSize, $downloadSizeSoFar, $uploadTotalSize, $uploadSizeSoFar) {
            printf(
                "%s of %s downloaded, %s of %s uploaded.\n",
                $downloadSizeSoFar,
                $downloadTotalSize,
                $uploadSizeSoFar,
                $uploadTotalSize
            );
        }
    ]
]); 
```

这在 AWS docs- [S3 配置部分](https://docs.aws.amazon.com/aws-sdk-php/v3/guide/guide/configuration.html#progress)进行了解释。它通过公开 GuzzleHttp 的`progress`可调用属性来工作，[如此 SO answer](https://stackoverflow.com/a/34923682/1325575)中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:04:26.413

经过大量搜索，我发现这个问题的简单答案是否定的。

基本上是做到这一点的最佳方法，正如我从亚马逊自己的编码（他们在 AWS S3 控制台上的小上传小部件）中发现的那样，只有通过首先发送到另一台服务器才能真正获得上传进度，PHP 可以读取该服务器以获取进度信息.

这将使用您自己的应用程序服务器 /tmp 目录作为垫脚石创建一个“直通”策略。这似乎是首选方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:36:04.130

是的，您可以通过分段上传：[http ://docs.aws.amazon.com/AmazonS3/latest/dev/UsingMPphpAPI.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingMPphpAPI.html)

分段上传是一个三步过程：启动上传，上传对象分段，上传所有分段后，完成分段上传。收到完整的分段上传请求后，Amazon S3 会根据上传的部分构造对象，然后您可以像访问存储桶中的任何其他对象一样访问该对象。

[http://docs.aws.amazon.com/AmazonS3/latest/dev/mpuoverview.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/mpuoverview.html)

我将很快亲自执行此操作，但这是您需要开始的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T15:58:51.207

AWS PHP SDK 有一个代码示例，它们在上传到 S3 时显示上传进度。我不确定它是否对小文件有效，但对于流式传输它确实有效。

您可以查看更多信息 - [http://aws.amazon.com/sdkforphp/](http://aws.amazon.com/sdkforphp/)

在某种程度上，如果他们正在显示进度——我们当然可以在 jquery 等 Javascript 框架的帮助下以进度条的形式获得它。

我很快就会开始工作，并且一定会发布一个教程。干杯!

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-03-30T08:47:57.867

是的，你可以通过像这样修改 s3.php 来做到这一点，

```
<?php
class S3Withprogressbar {
// ACL flags
const ACL_PRIVATE = 'private';
const ACL_PUBLIC_READ = 'public-read';
const ACL_PUBLIC_READ_WRITE = 'public-read-write';
private static $__accessKey; // AWS Access key
private static $__secretKey; // AWS Secret key
public static $_uploadProgressFileName="" ;//uploadProgressFileName
public function __construct($accessKey = null, $secretKey = null) {
if ($accessKey !== null && $secretKey !== null)
self::setAuth($accessKey, $secretKey);
}
public static function setAuth($accessKey, $secretKey) {
self::$__accessKey = $accessKey;
self::$__secretKey = $secretKey;
}
public static function listBuckets($detailed = false) {
$rest = new S3Request('GET', '', '');
$rest = $rest->getResponse();
if ($rest->error === false && $rest->code !== 200)
$rest->error = array('code' => $rest->code, 'message' => 'Unexpected HTTP status');
if ($rest->error !== false) {
trigger_error(sprintf("S3Withprogressbar::listBuckets(): [%s] %s", $rest->error['code'], $rest->error['message']), E_USER_WARNING);
return false;
}
$results = array(); //var_dump($rest->body);
if (!isset($rest->body->Buckets)) return $results;
if ($detailed) {
if (isset($rest->body->Owner, $rest->body->Owner->ID, $rest->body->Owner->DisplayName))
$results['owner'] = array(
'id' => (string)$rest->body->Owner->ID, 'name' => (string)$rest->body->Owner->ID
);
$results['buckets'] = array();
foreach ($rest->body->Buckets->Bucket as $b)
$results['buckets'][] = array(
'name' => (string)$b->Name, 'time' => strtotime((string)$b->CreationDate)
);
} else
foreach ($rest->body->Buckets->Bucket as $b) $results[] = (string)$b->Name;
return $results;
}
public static function getBucket($bucket, $prefix = null, $marker = null, $maxKeys = null) {
$rest = new S3Request('GET', $bucket, '');
if ($prefix !== null && $prefix !== '') $rest->setParameter('prefix', $prefix);
if ($marker !== null && $prefix !== '') $rest->setParameter('marker', $marker);
if ($maxKeys !== null && $prefix !== '') $rest->setParameter('max-keys', $maxKeys);
$response = $rest->getResponse();
if ($response->error === false && $response->code !== 200)
$response->error = array('code' => $response->code, 'message' => 'Unexpected HTTP status');
if ($response->error !== false) {
trigger_error(sprintf("S3Withprogressbar::getBucket(): [%s] %s", $response->error['code'], $response->error['message']), E_USER_WARNING);
return false;
}
$results = array();
$lastMarker = null;
if (isset($response->body, $response->body->Contents))
foreach ($response->body->Contents as $c) {
$results[(string)$c->Key] = array(
'name' => (string)$c->Key,
'time' => strToTime((string)$c->LastModified),
'size' => (int)$c->Size,
'hash' => substr((string)$c->ETag, 1, -1)
);
$lastMarker = (string)$c->Key;
//$response->body->IsTruncated = 'true'; break;
}
if (isset($response->body->IsTruncated) &&
(string)$response->body->IsTruncated == 'false') return $results;
// Loop through truncated results if maxKeys isn't specified
if ($maxKeys == null && $lastMarker !== null && (string)$response->body->IsTruncated == 'true')
do {
$rest = new S3Request('GET', $bucket, '');
if ($prefix !== null) $rest->setParameter('prefix', $prefix);
$rest->setParameter('marker', $lastMarker);
if (($response = $rest->getResponse(true)) == false || $response->code !== 200) break;
if (isset($response->body, $response->body->Contents))
foreach ($response->body->Contents as $c) {
$results[(string)$c->Key] = array(
'name' => (string)$c->Key,
'time' => strToTime((string)$c->LastModified),
'size' => (int)$c->Size,
'hash' => substr((string)$c->ETag, 1, -1)
);
$lastMarker = (string)$c->Key;
}
} while ($response !== false && (string)$response->body->IsTruncated == 'true');
return $results;
}
public function putBucket($bucket, $acl = self::ACL_PRIVATE) {
$rest = new S3Request('PUT', $bucket, '');
$rest->setAmzHeader('x-amz-acl', $acl);
$rest = $rest->getResponse();
if ($rest->error === false && $rest->code !== 200)
$rest->error = array('code' => $rest->code, 'message' => 'Unexpected HTTP status');
if ($rest->error !== false) {
//trigger_error(sprintf("S3Withprogressbar::putBucket({$bucket}): [%s] %s", $rest->error['code'], $rest->error['message']), E_USER_WARNING);
return false;
}
return true;
}
public function deleteBucket($bucket = '') {
$rest = new S3Request('DELETE', $bucket);
$rest = $rest->getResponse();
if ($rest->error === false && $rest->code !== 204)
$rest->error = array('code' => $rest->code, 'message' => 'Unexpected HTTP status');
if ($rest->error !== false) {
trigger_error(sprintf("S3Withprogressbar::deleteBucket({$bucket}): [%s] %s",
$rest->error['code'], $rest->error['message']), E_USER_WARNING);
return false;
}
return true;
}
public static function inputFile($file, $md5sum = true) {
if (!file_exists($file) || !is_file($file) || !is_readable($file)) {
trigger_error('S3Withprogressbar::inputFile(): Unable to open input file: '.$file, E_USER_WARNING);
return false;
}
return array('file' => $file, 'size' => filesize($file),
'md5sum' => $md5sum !== false ? (is_string($md5sum) ? $md5sum :
base64_encode(md5_file($file, true))) : '');
}
public static function inputResource(&$resource, $bufferSize, $md5sum = '') {
if (!is_resource($resource) || $bufferSize <= 0) {
trigger_error('S3Withprogressbar::inputResource(): Invalid resource or buffer size', E_USER_WARNING);
return false;
}
$input = array('size' => $bufferSize, 'md5sum' => $md5sum);
$input['fp'] =& $resource;
return $input;
}
// Modified Function with one more  parameter $uploadProgressFileName
public static function putObject($input, $bucket, $uri, $acl = self::ACL_PRIVATE, $metaHeaders = array(), $contentType = null,$uploadProgressFileName) {
if ($input == false) return false;
$rest = new S3Request('PUT', $bucket, $uri);
// Set public variable value($uploadProgressFileName) in S3Request class  
$rest->uploadProgressFileName = $uploadProgressFileName;
if (is_string($input)) $input = array(
'data' => $input, 'size' => strlen($input),
'md5sum' => base64_encode(md5($input, true))
);
// Data
if (isset($input['fp']))
$rest->fp =& $input['fp'];
elseif (isset($input['file']))
$rest->fp = @fopen($input['file'], 'rb');
elseif (isset($input['data']))
$rest->data = $input['data'];
// Content-Length (required)
if (isset($input['size']) && $input['size'] > 0)
$rest->size = $input['size'];
else {
if (isset($input['file']))
$rest->size = filesize($input['file']);
elseif (isset($input['data']))
$rest->size = strlen($input['data']);
}
// Content-Type
if ($contentType !== null)
$input['type'] = $contentType;
elseif (!isset($input['type']) && isset($input['file']))
$input['type'] = self::__getMimeType($input['file']);
else
$input['type'] = 'application/octet-stream';
// We need to post with the content-length and content-type, MD5 is optional
if ($rest->size > 0 && ($rest->fp !== false || $rest->data !== false)) {
$rest->setHeader('Content-Type', $input['type']);
if (isset($input['md5sum'])) $rest->setHeader('Content-MD5', $input['md5sum']);
$rest->setAmzHeader('x-amz-acl', $acl);
foreach ($metaHeaders as $h => $v) $rest->setAmzHeader('x-amz-meta-'.$h, $v);
$rest->getResponse();
} else
$rest->response->error = array('code' => 0, 'message' => 'Missing input parameters');
if ($rest->response->error === false && $rest->response->code !== 200)
$rest->response->error = array('code' => $rest->response->code, 'message' => 'Unexpected HTTP status');
if ($rest->response->error !== false) {
//trigger_error(sprintf("S3Withprogressbar::putObject(): [%s] %s", $rest->response->error['code'], $rest->response->error['message']), E_USER_WARNING);
return false;
}
return true;
}
// Modified Function with one more  parameter $uploadProgressFileName
public static function putObjectFile($file, $bucket, $uri, $acl = self::ACL_PRIVATE, $metaHeaders = array(), $contentType = null,$uploadProgressFileName) {
return self::putObject(S3Withprogressbar::inputFile($file), $bucket, $uri, $acl, $metaHeaders, $contentType,$uploadProgressFileName);
}
public function putObjectString($string, $bucket, $uri, $acl = self::ACL_PRIVATE, $metaHeaders = array(), $contentType = 'text/plain') {
return self::putObject($string, $bucket, $uri, $acl, $metaHeaders, $contentType);
}
public static function getObject($bucket = '', $uri = '', $saveTo = false) {
$rest = new S3Request('GET', $bucket, $uri);
if ($saveTo !== false) {
if (is_resource($saveTo))
$rest->fp =& $saveTo;
else
if (($rest->fp = @fopen($saveTo, 'wb')) == false)
$rest->response->error = array('code' => 0, 'message' => 'Unable to open save file for writing: '.$saveTo);
}
if ($rest->response->error === false) $rest->getResponse();
if ($rest->response->error === false && $rest->response->code !== 200)
$rest->response->error = array('code' => $rest->response->code, 'message' => 'Unexpected HTTP status');
if ($rest->response->error !== false) {
trigger_error(sprintf("S3Withprogressbar::getObject({$bucket}, {$uri}): [%s] %s",
$rest->response->error['code'], $rest->response->error['message']), E_USER_WARNING);
return false;
}
$rest->file = realpath($saveTo);
return $rest->response;
}
public static function getObjectInfo($bucket = '', $uri = '', $returnInfo = true) {
$rest = new S3Request('HEAD', $bucket, $uri);
$rest = $rest->getResponse();
if ($rest->error === false && ($rest->code !== 200 && $rest->code !== 404))
$rest->error = array('code' => $rest->code, 'message' => 'Unexpected HTTP status');
if ($rest->error !== false) {
trigger_error(sprintf("S3Withprogressbar::getObjectInfo({$bucket}, {$uri}): [%s] %s",
$rest->error['code'], $rest->error['message']), E_USER_WARNING);
return false;
}
return $rest->code == 200 ? $returnInfo ? $rest->headers : true : false;
}
public static function setBucketLogging($bucket, $targetBucket, $targetPrefix) {
$dom = new DOMDocument;
$bucketLoggingStatus = $dom->createElement('BucketLoggingStatus');
$bucketLoggingStatus->setAttribute('xmlns', 'http://s3.amazonaws.com/doc/2006-03-01/');
$loggingEnabled = $dom->createElement('LoggingEnabled');
$loggingEnabled->appendChild($dom->createElement('TargetBucket', $targetBucket));
$loggingEnabled->appendChild($dom->createElement('TargetPrefix', $targetPrefix));
// TODO: Add TargetGrants
$bucketLoggingStatus->appendChild($loggingEnabled);
$dom->appendChild($bucketLoggingStatus);
$rest = new S3Request('PUT', $bucket, '');
$rest->setParameter('logging', null);
$rest->data = $dom->saveXML();
$rest->size = strlen($rest->data);
$rest->setHeader('Content-Type', 'application/xml');
$rest = $rest->getResponse();
if ($rest->error === false && $rest->code !== 200)
$rest->error = array('code' => $rest->code, 'message' => 'Unexpected HTTP status');
if ($rest->error !== false) {
trigger_error(sprintf("S3Withprogressbar::setBucketLogging({$bucket}, {$uri}): [%s] %s",
$rest->error['code'], $rest->error['message']), E_USER_WARNING);
return false;
}
return true;
}
public static function getBucketLogging($bucket = '') {
$rest = new S3Request('GET', $bucket, '');
$rest->setParameter('logging', null);
$rest = $rest->getResponse();
if ($rest->error === false && $rest->code !== 200)
$rest->error = array('code' => $rest->code, 'message' => 'Unexpected HTTP status');
if ($rest->error !== false) {
trigger_error(sprintf("S3Withprogressbar::getBucketLogging({$bucket}): [%s] %s",
$rest->error['code'], $rest->error['message']), E_USER_WARNING);
return false;
}
if (!isset($rest->body->LoggingEnabled)) return false; // No logging
return array(
'targetBucket' => (string)$rest->body->LoggingEnabled->TargetBucket,
'targetPrefix' => (string)$rest->body->LoggingEnabled->TargetPrefix,
);
}
public static function setAccessControlPolicy($bucket, $uri = '', $acp = array()) {
$dom = new DOMDocument;
$dom->formatOutput = true;
$accessControlPolicy = $dom->createElement('AccessControlPolicy');
$accessControlList = $dom->createElement('AccessControlList');
// It seems the owner has to be passed along too
$owner = $dom->createElement('Owner');
$owner->appendChild($dom->createElement('ID', $acp['owner']['id']));
$owner->appendChild($dom->createElement('DisplayName', $acp['owner']['name']));
$accessControlPolicy->appendChild($owner);
foreach ($acp['acl'] as $g) {
$grant = $dom->createElement('Grant');
$grantee = $dom->createElement('Grantee');
$grantee->setAttribute('xmlns:xsi', 'http://www.w3.org/2001/XMLSchema-instance');
if (isset($g['id'])) { // CanonicalUser (DisplayName is omitted)
$grantee->setAttribute('xsi:type', 'CanonicalUser');
$grantee->appendChild($dom->createElement('ID', $g['id']));
} elseif (isset($g['email'])) { // AmazonCustomerByEmail
$grantee->setAttribute('xsi:type', 'AmazonCustomerByEmail');
$grantee->appendChild($dom->createElement('EmailAddress', $g['email']));
} elseif ($g['type'] == 'Group') { // Group
$grantee->setAttribute('xsi:type', 'Group');
$grantee->appendChild($dom->createElement('URI', $g['uri']));
}
$grant->appendChild($grantee);
$grant->appendChild($dom->createElement('Permission', $g['permission']));
$accessControlList->appendChild($grant);
}
$accessControlPolicy->appendChild($accessControlList);
$dom->appendChild($accessControlPolicy);
$rest = new S3Request('PUT', $bucket, '');
$rest->setParameter('acl', null);
$rest->data = $dom->saveXML();
$rest->size = strlen($rest->data);
$rest->setHeader('Content-Type', 'application/xml');
$rest = $rest->getResponse();
if ($rest->error === false && $rest->code !== 200)
$rest->error = array('code' => $rest->code, 'message' => 'Unexpected HTTP status');
if ($rest->error !== false) {
trigger_error(sprintf("S3Withprogressbar::setAccessControlPolicy({$bucket}, {$uri}): [%s] %s",
$rest->error['code'], $rest->error['message']), E_USER_WARNING);
return false;
}
return true;
}
public static function getAccessControlPolicy($bucket, $uri = '') {
$rest = new S3Request('GET', $bucket, $uri);
$rest->setParameter('acl', null);
$rest = $rest->getResponse();
if ($rest->error === false && $rest->code !== 200)
$rest->error = array('code' => $rest->code, 'message' => 'Unexpected HTTP status');
if ($rest->error !== false) {
trigger_error(sprintf("S3Withprogressbar::getAccessControlPolicy({$bucket}, {$uri}): [%s] %s",
$rest->error['code'], $rest->error['message']), E_USER_WARNING);
return false;
}
$acp = array();
if (isset($rest->body->Owner, $rest->body->Owner->ID, $rest->body->Owner->DisplayName)) {
$acp['owner'] = array(
'id' => (string)$rest->body->Owner->ID, 'name' => (string)$rest->body->Owner->DisplayName
);
}
if (isset($rest->body->AccessControlList)) {
$acp['acl'] = array();
foreach ($rest->body->AccessControlList->Grant as $grant) {
foreach ($grant->Grantee as $grantee) {
if (isset($grantee->ID, $grantee->DisplayName)) // CanonicalUser
$acp['acl'][] = array(
'type' => 'CanonicalUser',
'id' => (string)$grantee->ID,
'name' => (string)$grantee->DisplayName,
'permission' => (string)$grant->Permission
);
elseif (isset($grantee->EmailAddress)) // AmazonCustomerByEmail
$acp['acl'][] = array(
'type' => 'AmazonCustomerByEmail',
'email' => (string)$grantee->EmailAddress,
'permission' => (string)$grant->Permission
);
elseif (isset($grantee->URI)) // Group
$acp['acl'][] = array(
'type' => 'Group',
'uri' => (string)$grantee->URI,
'permission' => (string)$grant->Permission
);
else continue;
}
}
}
return $acp;
}
public static function deleteObject($bucket = '', $uri = '') {
$rest = new S3Request('DELETE', $bucket, $uri);
$rest = $rest->getResponse();
if ($rest->error === false && $rest->code !== 204)
$rest->error = array('code' => $rest->code, 'message' => 'Unexpected HTTP status');
if ($rest->error !== false) {
trigger_error(sprintf("S3Withprogressbar::deleteObject(): [%s] %s", $rest->error['code'], $rest->error['message']), E_USER_WARNING);
return false;
}
return true;
}
public static function __getMimeType(&$file) {
$type = false;
// Fileinfo documentation says fileinfo_open() will use the
// MAGIC env var for the magic file
if (extension_loaded('fileinfo') && isset($_ENV['MAGIC']) &&
($finfo = finfo_open(FILEINFO_MIME, $_ENV['MAGIC'])) !== false) {
if (($type = finfo_file($finfo, $file)) !== false) {
// Remove the charset and grab the last content-type
$type = explode(' ', str_replace('; charset=', ';charset=', $type));
$type = array_pop($type);
$type = explode(';', $type);
$type = array_shift($type);
}
finfo_close($finfo);
// If anyone is still using mime_content_type()
} elseif (function_exists('mime_content_type'))
$type = mime_content_type($file);
if ($type !== false && strlen($type) > 0) return $type;
// Otherwise do it the old fashioned way
static $exts = array(
'jpg' => 'image/jpeg', 'gif' => 'image/gif', 'png' => 'image/png',
'tif' => 'image/tiff', 'tiff' => 'image/tiff', 'ico' => 'image/x-icon',
'swf' => 'application/x-shockwave-flash', 'pdf' => 'application/pdf',
'zip' => 'application/zip', 'gz' => 'application/x-gzip',
'tar' => 'application/x-tar', 'bz' => 'application/x-bzip',
'bz2' => 'application/x-bzip2', 'txt' => 'text/plain',
'asc' => 'text/plain', 'htm' => 'text/html', 'html' => 'text/html',
'xml' => 'text/xml', 'xsl' => 'application/xsl+xml',
'ogg' => 'application/ogg', 'mp3' => 'audio/mpeg', 'wav' => 'audio/x-wav',
'avi' => 'video/x-msvideo', 'mpg' => 'video/mpeg', 'mpeg' => 'video/mpeg',
'mov' => 'video/quicktime', 'flv' => 'video/x-flv', 'php' => 'text/x-php'
);
$ext = strToLower(pathInfo($file, PATHINFO_EXTENSION));
return isset($exts[$ext]) ? $exts[$ext] : 'application/octet-stream';
}
public static function __getSignature($string) {
return 'AWS '.self::$__accessKey.':'.base64_encode(extension_loaded('hash') ?
hash_hmac('sha1', $string, self::$__secretKey, true) : pack('H*', sha1(
(str_pad(self::$__secretKey, 64, chr(0x00)) ^ (str_repeat(chr(0x5c), 64))) .
pack('H*', sha1((str_pad(self::$__secretKey, 64, chr(0x00)) ^
(str_repeat(chr(0x36), 64))) . $string)))));
}
}
final class S3Request {
private $verb, $bucket, $uri, $resource = '', $parameters = array(),
$amzHeaders = array(), $headers = array(
'Host' => '', 'Date' => '', 'Content-MD5' => '', 'Content-Type' => ''
);
public $fp = false, $size = 0, $data = false, $response;
public $uploadProgressFileName;
function __construct($verb, $bucket = '', $uri = '') {
$this->verb = $verb;
$this->bucket = strtolower($bucket);
$this->uri = $uri !== '' ? '/'.$uri : '/';
if ($this->bucket !== '') {
$this->bucket = explode('/', $this->bucket);
$this->resource = '/'.$this->bucket[0].$this->uri;
$this->headers['Host'] = $this->bucket[0].'.s3.amazonaws.com';
$this->bucket = implode('/', $this->bucket);
} else {
$this->headers['Host'] = 's3.amazonaws.com';
if (strlen($this->uri) > 1)
$this->resource = '/'.$this->bucket.$this->uri;
else $this->resource = $this->uri;
}
$this->headers['Date'] = gmdate('D, d M Y H:i:s T');
$this->response = new STDClass;
$this->response->error = false;
$this->response->body  = false; 
$CI =& get_instance();
$CI->load->helper('file');
}
public function setParameter($key, $value) {
$this->parameters[$key] = $value;
}
public function setHeader($key, $value) {
$this->headers[$key] = $value;
}
public function setAmzHeader($key, $value) {
$this->amzHeaders[$key] = $value;
}
//:callback function for upload progress.
public function progressCallback_new_curl($new,$download_size, $downloaded_size, $upload_size, $uploaded_size )
{
ob_start();
static $previousProgress = 0;
if ( $upload_size == 0 )
$progress = 0;
else
$progress = round( $uploaded_size * 100 / $upload_size );
if ( $progress > $previousProgress)
{
flush();
$previousProgress = $progress;
$new_file_path = FCPATH.'upload/'.$this->uploadProgressFileName.'.txt'; // modify this line to point to the actual location of the file
write_file($new_file_path, $progress."\n");
// Check for Cancel upload text file and if exists return 1 to interrupt curl upload process.
$cancel_path=FCPATH.'upload/cancel_'.$this->uploadProgressFileName.'.txt';
if(file_exists($cancel_path)){
unlink($cancel_path);
if(file_exists($new_file_path)){
unlink($new_file_path);
}
return 1;
}
}        
ob_flush();
flush();                         
}
public function progressCallback_old_curl($download_size, $downloaded_size, $upload_size, $uploaded_size )
{
ob_start();
static $previousProgress = 0;
if ( $upload_size == 0 )
$progress = 0;
else
$progress = round( $uploaded_size * 100 / $upload_size );
if ( $progress > $previousProgress)
{
flush();
$previousProgress = $progress;
$new_file_path = FCPATH.'upload/'.$this->uploadProgressFileName.'.txt'; // modify this line to point to the actual location of the file
write_file($new_file_path, $progress."\n");
// Check for Cancel upload text file and if exists return 1 to interrupt curl upload process.
$cancel_path=FCPATH.'upload/cancel_'.$this->uploadProgressFileName.'.txt';
if(file_exists($cancel_path)){
unlink($cancel_path);
if(file_exists($new_file_path)){
unlink($new_file_path);
}
return 1;
}  
}
ob_flush();
flush(); 
}
public function getResponse() {
$query = '';
if (sizeof($this->parameters) > 0) {
$query = substr($this->uri, -1) !== '?' ? '?' : '&';
foreach ($this->parameters as $var => $value)
if ($value == null || $value == '') $query .= $var.'&';
else $query .= $var.'='.$value.'&';
$query = substr($query, 0, -1);
$this->uri .= $query;
if (isset($this->parameters['acl']) || !isset($this->parameters['logging']))
$this->resource .= $query;
}
$url = (extension_loaded('openssl')?'https://':'http://').$this->headers['Host'].$this->uri;
//var_dump($this->bucket, $this->uri, $this->resource, $url);
// Basic setup
$curl = curl_init();
curl_setopt($curl, CURLOPT_USERAGENT, 'S3/php');
curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($curl, CURLOPT_URL, $url);
//:callback function call for upload progress.
curl_setopt($curl, CURLOPT_NOPROGRESS, false);
if (!defined('PHP_VERSION_ID') || PHP_VERSION_ID < 50500) {
curl_setopt($curl, CURLOPT_PROGRESSFUNCTION,  array($this, 'progressCallback_old_curl'));
} else {
curl_setopt($curl, CURLOPT_PROGRESSFUNCTION,  array($this, 'progressCallback_new_curl'));
}
// Headers
$headers = array(); $amz = array();
foreach ($this->amzHeaders as $header => $value)
if (strlen($value) > 0) $headers[] = $header.': '.$value;
foreach ($this->headers as $header => $value)
if (strlen($value) > 0) $headers[] = $header.': '.$value;
foreach ($this->amzHeaders as $header => $value)
if (strlen($value) > 0) $amz[] = strToLower($header).':'.$value;
$amz = (sizeof($amz) > 0) ? "\n".implode("\n", $amz) : '';
// Authorization string
$headers[] = 'Authorization: ' . S3Withprogressbar::__getSignature(
$this->verb."\n".
$this->headers['Content-MD5']."\n".
$this->headers['Content-Type']."\n".
$this->headers['Date'].$amz."\n".$this->resource
);
curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
curl_setopt($curl, CURLOPT_HEADER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, false);
curl_setopt($curl, CURLOPT_WRITEFUNCTION, array(&$this, '__responseWriteCallback'));
curl_setopt($curl, CURLOPT_HEADERFUNCTION, array(&$this, '__responseHeaderCallback'));
// Request types
switch ($this->verb) {
case 'GET': break;
case 'PUT':
if ($this->fp !== false) {
curl_setopt($curl, CURLOPT_PUT, true);
curl_setopt($curl, CURLOPT_INFILE, $this->fp);
if ($this->size > 0)
curl_setopt($curl, CURLOPT_INFILESIZE, $this->size);
} elseif ($this->data !== false) {
curl_setopt($curl, CURLOPT_CUSTOMREQUEST, 'PUT');
curl_setopt($curl, CURLOPT_POSTFIELDS, $this->data);
if ($this->size > 0)
curl_setopt($curl, CURLOPT_BUFFERSIZE, $this->size);
} else
curl_setopt($curl, CURLOPT_CUSTOMREQUEST, 'PUT');
break;
case 'HEAD':
curl_setopt($curl, CURLOPT_CUSTOMREQUEST, 'HEAD');
curl_setopt($curl, CURLOPT_NOBODY, true);
break;
case 'DELETE':
curl_setopt($curl, CURLOPT_CUSTOMREQUEST, 'DELETE');
break;
default: break;
}
// Execute, grab errors
if (curl_exec($curl))
$this->response->code = curl_getinfo($curl, CURLINFO_HTTP_CODE);
else
$this->response->error = array(
'code' => curl_errno($curl),
'message' => curl_error($curl),
'resource' => $this->resource
);
@curl_close($curl);
// Parse body into XML
if ($this->response->error === false && isset($this->response->headers['type']) &&
$this->response->headers['type'] == 'application/xml' && isset($this->response->body)) {
$this->response->body = simplexml_load_string($this->response->body);
// Grab S3 errors
if (!in_array($this->response->code, array(200, 204)) &&
isset($this->response->body->Code, $this->response->body->Message)) {
$this->response->error = array(
'code' => (string)$this->response->body->Code,
'message' => (string)$this->response->body->Message
);
if (isset($this->response->body->Resource))
$this->response->error['resource'] = (string)$this->response->body->Resource;
unset($this->response->body);
}
}
// Clean up file resources
if ($this->fp !== false && is_resource($this->fp)) fclose($this->fp);
return $this->response;
}
private function __responseWriteCallback(&$curl, &$data) {
if ($this->response->code == 200 && $this->fp !== false)
return fwrite($this->fp, $data);
else
$this->response->body .= $data;
return strlen($data);
}
private function __responseHeaderCallback(&$curl, &$data) {
if (($strlen = strlen($data)) <= 2) return $strlen;
if (substr($data, 0, 4) == 'HTTP')
$this->response->code = (int)substr($data, 9, 3);
else {
list($header, $value) = explode(': ', trim($data));
if ($header == 'Last-Modified')
$this->response->headers['time'] = strtotime($value);
elseif ($header == 'Content-Length')
$this->response->headers['size'] = (int)$value;
elseif ($header == 'Content-Type')
$this->response->headers['type'] = $value;
elseif ($header == 'ETag')
$this->response->headers['hash'] = substr($value, 1, -1);
elseif (preg_match('/^x-amz-meta-.*$/', $header))
$this->response->headers[$header] = is_numeric($value) ? (int)$value : $value;
}
return $strlen;
}
}
?> 
```

# iphone - 在 iOS 中，如何创建具有预定义可点击区域的自定义控件？

> ID：10187658
> 
> 赞同：0
> 
> 时间：2012-04-17T08:24:26.433
> 
> 标签：iphone, ios, xcode

我需要创建一个形状不规则的自定义控件，并且只有该形状的可见区域具有可点击区域。例如“星”。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:30:54.890

我认为您正在寻找的是不规则形状的 UIButtons，这里有一个很好的教程：[不规则形状的 UIButtons](http://iphonedevelopment.blogspot.com/2010/03/irregularly-shaped-uibuttons.html)

另一种方法是`Quartz`在函数中使用和绘制按钮形状`drawRect`，之前有人问过这个问题并在这里得到了答案：[Custom UIButton Shape without using an image](https://stackoverflow.com/questions/6190073/custom-uibutton-shape-without-using-an-image)

PS：下次尝试先尝试谷歌，有大量的教程和如何做这些事情:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:34:39.993

只需执行命中[测试方法](https://stackoverflow.com/questions/1220354/uiscrollview-horizontal-paging-like-mobile-safari-tabs)来检查触摸是否在您的“星”中

```
- (UIView *) hitTest:(CGPoint) point withEvent:(UIEvent *)event {
  if ([self pointInside:point withEvent:event]) {
    return scrollView;
  }
  return nil;
} 
```

# css - 动态重新缩放的 div 网格

> ID：10187659
> 
> 赞同：0
> 
> 时间：2012-04-17T08:24:27.033
> 
> 标签：css

我想得到以下布局：

```
[ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ] 
```

其中每个`[ ]`最多应为 300x150px，但根据需要缩小到边界框，以保持纵横比。

```
.field {
    width: 16%;
}

.field .placeholder{
    float: left;
    width: 300px;
    height: 150px;
} 
```

我尝试在 div 中添加一个占位符 div，但这并没有真正帮助，它给了我类似的东西

```
[ ]
[ ]
[ ]
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:26:27.677

尝试使用 max-width 和 max-height css 属性，并将宽度和高度设置为百分比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:39:42.387

你在找什么吗？

[http://jsfiddle.net/codef0rmer/mNkEj/](http://jsfiddle.net/codef0rmer/mNkEj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:48:29.773

看起来我需要一张桌子。

```
td { width: 1%; } 
```

照顾水平相等，但我仍然有垂直间距的问题。

# java - 抛出异常有什么用

> ID：10187668
> 
> 赞同：5
> 
> 时间：2012-04-17T08:24:51.607
> 
> 标签：java

有人可以解释一下 java 中 throws Exception 的用途吗？它只是用来表示该方法会抛出指定的异常吗？调用方法需要捕获指定的异常吗？

那么我们可以使用 try-catch 块来捕获异常而不是 throws 吗？

它与投掷有何不同？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T08:26:41.983

Java 使用显式异常处理——除了[`RuntimeException`](http://docs.oracle.com/javase/6/docs/api/java/lang/RuntimeException.html)s，每个抛出的异常 [由方法本身，或者它调用的方法声明它`throws`]——必须在方法签名中处理或声明。

它提供了安全性，因为当您调用一个方法时，您确切地知道可能发生哪些错误，然后您可以使用`try/catch`块在本地处理这些错误，或者将其声明为方法签名*的一部分。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-17T08:36:11.227

尽管@amit 已经给出了很好的答案，但我只想添加一些东西。

*那么我们可以使用 try-catch 块来捕获异常而不是 throws 吗？*

我认为你的这部分问题没有得到回答。实际上，您是在询问是否应该为异常定义“透明”的方法，或者捕获方法中抛出的异常。

答案是这取决于您的应用程序。通常有 2 种情况需要在方法中捕获异常。

1.  您与异常有关，因此您的流程取决于抛出异常的事实。例如，如果您正在读取文件并且发生 IO 错误，则您正在尝试再次从文件中读取。
2.  您不希望将在应用程序的特定层上引发的异常暴露给更高级别的层。在这种情况下，您可能会用 try 块包装您的代码，并用其他级别的异常包装抛出的异常：

    try { // 一些代码 } catch(IOException e) { throw new ApplicationLevelException(e); }

在大多数其他情况下，您可能希望对异常透明并在一个知道如何处理它们的单个点上捕获所有异常。例如显示面向客户的错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:30:04.097

关键字表示该`throws`方法可以抛出异常。
当您认为调用者想要进行自己的异常处理时，您应该使用它，否则您应该使用 try-catch 块并在 catch 块中返回指定的错误值，例如`indexOf()`（从数组）返回 -1 而不是抛出一个例外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T08:31:58.473

简而言之，如果您对特定异常使用 try-catch 块，则您正在处理该异常。如果您在方法上指定 throws，则表示该方法可以抛出此类异常（而不是在其自身内部处理它），并且调用者有责任处理该异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T08:34:58.650

如果你添加`throws`到一个方法，这意味着这个方法**可以**`Exception`向调用它的方法抛出一个。

例如：

```
public void method1() throws Exception {
    ...
    throw new Exception();
    ...
}

public void method2() {
    try {
        method1();
    catch(Exception e) {
        ...
    }
} 
```

如果您不告诉您必须使用和处理`throw`的方法。`Exception``try``catch`

有关异常处理的更多信息，请参阅文档： [http ://docs.oracle.com/javase/tutorial/essential/exceptions/](http://docs.oracle.com/javase/tutorial/essential/exceptions/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T11:29:10.790

虽然已经给出了正确的答案，但我想补充一点，每当使用 try-catch 块时，都会创建一个新线程来处理异常。当在主线程和 try-catch 块线程中执行的活动导致任何冲突时，这有时可能会导致问题。

因此，最好使用 throws 子句声明您的 API 方法以引发异常，并在使用您的 API 的应用程序中处理异常。

使用 try-catch 块是最后的选择！;)

# google-maps - 谷歌地图不填

> ID：10187672
> 
> 赞同：-1
> 
> 时间：2012-04-17T08:25:16.237
> 
> 标签：google-maps

我有一个问题：在我网站的一个页面上，我使用了谷歌地图，问题是它没有填充 100% 的 div - 地图填充了大约 20% 的 div。我尝试了几件事，但我无法解决这个问题。对于解决此问题的任何帮助，我将不胜感激！您可能会在以下位置看到问题：[http](http://travulum.com) ://travulum.com （请单击“菜单”，而不是“旅行视频”并单击其中一个旅行视频 - 谷歌地图第一次以 100% 填充 div，但如果您单击第二个旅行视频 - 第二次谷歌地图没有以 100% 填充 div 等等.....我使用这个脚本：

```
function updatePlayer(video_data){

    $('#map_canvas').empty().removeAttr('style');

    var BigPlayer = $('#bambuserPlayer').empty();

    if(typeof video_data !== 'undefined'){

        var map_center = new google.maps.LatLng(parseFloat(video_data.lat), parseFloat(video_data.lon));

        var myOptions =  {       

            zoom:10,

            center: map_center,

            mapTypeId: google.maps.MapTypeId.HYBRID,

            streetViewControl: false,

            panControl: false

        };

        map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

        var marker = new google.maps.Marker({

            position: map_center,

            map: map,

            icon: createMarkerIcon('archived')

        });

        var url = 'http://embed.bambuser.com/broadcast/' + video_data.id;

        BigPlayer.html('<iframe width="450" height="450" src="'+ url +'" frameborder="0" ></iframe>');

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:06:10.730

尝试在一些 CSS 中设置地图的大小。我签入了 FireBug，确实地图占据了 id="map_canvas" 的其他空 div 的整个空间

```
 #map_canvas { height: 400px; width: 600px; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:38:06.853

如果您隐藏了地图 div，则需要调用`map.checkResize()`以告知 API 您更改了父容器的大小。

# haskell - 如何改进这个 Haskell 函数来评估 RPN 表达式？

> ID：10187683
> 
> 赞同：4
> 
> 时间：2012-04-17T08:26:19.890
> 
> 标签：haskell, functional-programming

这是我想出的：

```
solveRPNWrapper :: (Read a, Integral a) => String -> a
solveRPNWrapper str = solveRPN [] $ words str

calcFunction :: String -> String -> String -> String
calcFunction "+" x y = show $ read x + read y
calcFunction "-" x y = show $ read x - read y
calcFunction "*" x y = show $ read x * read y
calcFunction "/" x y = show $ read x / read y
calcFunction op x y = error $ "Unknown operator: " ++ op ++ "."

isOperator :: String -> Bool
isOperator "+" = True
isOperator "-" = True
isOperator "*" = True
isOperator "/" = True
isOperator _ = False

solveRPN :: (Read a, Integral a) => [String] -> [String] -> a
solveRPN [] (x:[]) = read x
solveRPN [] (x:y:xs) = solveRPN (x:y:[]) xs
solveRPN stack (x:xs)
         | isOperator x =
           let z = calcFunction x (last (init stack)) (last stack)
           in solveRPN (init (init stack)) (z:xs)
         | otherwise = solveRPN (stack ++ [x]) xs
solveRPN stack [] = error $ "Badly formatted expression: Stack contains " ++ show stack 
```

虽然它确实有效......

```
*Main>  solveRPNWrapper "10 4 3 + 2 *  -"
-4 
```

...我可以看到这不是惯用的（肯定在操作符位中有很多重复，并且读取/显示似乎是多余的），并且约束也可能被搞砸了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T09:29:52.600

1.  将堆栈的类型更改为`Integral a => [a]`. 这不仅消除了对无处不在的需求，`read`而且`show`还揭示了原始代码中隐藏的类型错误。您使用的是小数除法 ( `/`) 而不是整数除法 ( `div`)。

2.  反转堆栈。列表更容易从前面操作，因此将其用作堆栈的顶部。这也让我们可以在堆栈上使用模式匹配来轻松地从堆栈顶部挑选元素，而不是乱用`last`and `init`。这也更有效率。

3.  为运算符使用查找表。这进一步减少了重复，我们可以直接将相应的 Haskell 函数（`+`、、`div`等）存储在表中。

这是我进行这些更改后的最终结果：

```
solveRPNWrapper :: (Read a, Integral a) => String -> a
solveRPNWrapper str = solveRPN [] $ words str

solveRPN :: (Read a, Integral a) => [a] -> [String] -> a
solveRPN [result] [] = result
solveRPN (y : x : stack) (token : tokens)
  | Just f <- lookup token operators = solveRPN (f x y : stack) tokens
solveRPN stack (token : tokens) = solveRPN (read token : stack) tokens
solveRPN stack [] = error $ "Badly formatted expression: Stack contains " ++ show (reverse stack)

operators :: Integral a => [(String, a -> a -> a)]
operators = [("+", (+)), ("-", (-)), ("*", (*)), ("/", div)] 
```

您也可以使用折叠而不是递归，但这需要向包装器添加更多错误处理。我也会考虑使用 just`Integer`而不是`Integral a => a`，但这只是更改类型签名的问题。

`Either`为了健壮性，使用纯粹的错误处理形式（如or`Maybe`代替 using`error`和 use`reads`而不是`read`处理格式错误的输入）可能也是一个好主意。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T10:12:08.613

其他人已经告诉了您几乎所有内容以改进您的代码。我只是想补充一点，《*Learn You a Haskell* , [Functioanlly Solve Problems](http://learnyouahaskell.com/functionally-solving-problems) 》一书中有一章写得非常好，它的第一部分准确地解释了如何使用`foldl`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-17T09:28:52.273

如果你定义

```
data Token a = Literal a
             | Operator (a -> a -> a) 
```

写一个合适的

```
parseToken :: String -> Token a 
```

并重写`solveRPN`以使用此签名

```
solveRPN :: [a] -> [Token a] -> a 
```

然后变得有些琐碎`isOperator`，`calcFunction`您可以避免所有乏味的`read`ing和`show`ing。

但是，您必须停止捏造除法问题：`/`仅适用于`Fractional`(not `Integral`) 类型。到目前为止，您一直在逃避它，因为您每次都在从字符串转换为字符串，因此当您进行除法时，数字已转换为小数类型。您必须决定是否要使用`div`或`quot`替代，或者是否要使用小数类型。

（另外，`parseToken`and的结果`solveRPN`应该被包裹在里面`Maybe`（或一个`Either`类型），这样你就可以指示失败`Nothing`而不是抛出异常。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-17T09:38:29.480

## 有效地使用列表（简单）

使它更惯用的一个简单方法是反转`stack`（这使它更像一个真正的堆栈），它允许您使用模式匹配并使代码更高效，因为在列表头部附加/读取是一个`O(1)`操作，最后这样做是`O(n)`：

```
solveRPN :: (Read a, Integral a) => [String] -> [String] -> a
solveRPN [] (x:[]) = read x
solveRPN [] (x:y:xs) = solveRPN (y:x:[]) xs -- push them on backwards
solveRPN stack@(s1:s2:rest) (x:xs) -- pattern match on stack with length >= 2
         | isOperator x =
           let z = calcFunction x s2 s1
           in solveRPN rest (z:xs)
         | otherwise = solveRPN (x:stack) xs
solveRPN stack (x:xs) -- last case: list with a single element
         | isOperator x = error "Stack too small"
         | otherwise = solveRPN (x:stack) xs 
```

## 使用类型系统（重要！）

您正在使用字符串来封装输入堆栈上的两种可能类型：操作和数字，这允许无效输入，惯用的 Haskell 将利用类型系统，以便函数始终具有定义的结果（即所有函数都是总的） .

最好使用 ADT（代数数据类型）来封装可能的操作，并`Either`以类型安全的方式区分操作和文字：

```
data Operation = Plus | Minus | Times | Divide

-- conversion function
readStackVar :: (Read a) => String -> Either Operation a
readStackVar "+" = Left Plus
readStackVar "-" = Left Minux
readStackVar "*" = Left Times
readStackVar "/" = Left Divide
readStackVar other = Right . read $ other 
```

这使您可以很好地编写`isOperator`（尽管现在实际上没有必要）：

```
isOperator :: Either Operation a -> Bool
isOperator (Left _) = False
isOperator _ = True 
```

`calcFunction`现在是类型安全的（注意类型没有`Either`），并且不可能进行无法识别的操作：

```
calcFunction :: (Integral a) => Operation -> a -> a -> a
calcFunction Plus = (+)
calcFunction Minus = (-)
calcFunction Times = (*)
calcFunction Divide = div -- integral division 
```

使用这些我们可以重写`solveRPN`（注意我们已经避免了`solveRPN` 通过使用 where 子句传递一个空列表）：

```
solveRPN :: (Read a, Integral a) => [Either Operation a] -> a
solveRPN xs = go [] xs
   where
     go :: (Read a, Integral a) => [a] -> [Either Operation a] -> a
     go [] [] = error "Empty"
     go (x:xs) [] = x -- finished all the input
     go [] (x:y:xs) = go (y:x:[]) xs -- start the stack in reverse order

     go (s1:s2:rest) ((Left op):xs) = go ((calcFunction op s1 s2) : rest) xs -- operation   
     go stack ((Right x):xs) = go (x:stack) xs -- literal 
```

请注意，我已经能够在`Left`and `Right`of上使用模式匹配`Either`来区分操作和文字。（我们可以（并且应该）做的另一件事是 make `solveRPN`return `Maybe a`，这样可以通过返回来指示错误，通过返回来指示`Nothing`成功`Just x`。）

这像这样使用：

```
solveRPN . map readStackVar . words $ "1 2 + 3 *" 
```

（警告：我还没有实际测试过这个，所以可能有拼写错误和小逻辑错误）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T14:07:03.243

您可以使用`Map`键值对或仅使用键值对来存储操作：

```
ops = [("+",(+)),("-",(-)),("/",(/)),("*",(*))]

calcFunction :: String -> String -> String -> String
calcFunction op x y = go $ lookup op ops where
  go (Just f) = show $ read x `f` read y
  go Nothing = error $ "Unknown operator: " ++ op ++ "."

isOperator :: String -> Bool
isOperator op = elem op $ fst $ unzip ops 
```

# webdriver - 带线程的 webdriver 2.20

> ID：10187685
> 
> 赞同：0
> 
> 时间：2012-04-17T08:26:22.353
> 
> 标签：webdriver

我正在尝试使用 java 中的线程来测试基于 webdriver 2.20 的代码。由于某种原因 new FirefoxDriver() 抛出异常。

无法在 45000 毫秒内绑定到锁定端口 7054 构建信息：版本：'2.20.0'，修订：'16008'，时间：'2012-02-27 19:03:04' 系统信息：os.name：'Windows Vista', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0' 驱动信息: driver.version: FirefoxDriver

仅当我使用线程时才会发生这种情况。我在不使用线程的情况下运行相同的代码，然后它工作得非常好。

我怎样才能解决这个问题 ？

最好的，罗汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-03T11:46:20.267

为此，请使用[RemoteWebDriver](http://www.seleniumhq.org/docs/04_webdriver_advanced.jsp#remotewebdriver)并启动本地[selenium 服务器](http://www.seleniumhq.org/download/)。它能够同时管理端口和启动多个 WebDriver 实例。WebDriver 初始化应如下所示：

```
WebDriver driver = new RemoteWebDriver(
                            new URL("http://localhost:4444/wd/hub"), 
                            DesiredCapabilities.firefox()); 
```

# c# - 如何使用子网格上的网格线将嵌套的网格视图导出到 excel/word

> ID：10187692
> 
> 赞同：0
> 
> 时间：2012-04-17T08:26:59.960
> 
> 标签：c#, asp.net, visual-studio-2010

我已经尝试在不同的论坛上发布问题，但仍然没有回复.. 有人真的可以帮助我吗？我已经尝试了我在导出嵌套网格视图时收集的大多数编码。但是它们中的大多数给了我相同的输出。实际上我想要的是非常“简单”

代码（excel）

```
protected void Export(GridView gridView)
{
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", "StaffAppraisal.xls"));
    HttpContext.Current.Response.ContentType = "application/vnd.ms-excel";

    //  Create a table to contain the grid
    Table table = new Table();

    //  include the gridline settings
    table.GridLines = gridView.GridLines;

    //  add the header row to the table
    if (gridView.HeaderRow != null)
    {
        PrepareControlForExport(gridView.HeaderRow);
        gridView.HeaderRow.Style.Add("background-color", "");
        table.Rows.Add(gridView.HeaderRow);
    }

    //  add each of the data rows to the table

    foreach (GridViewRow row in gridView.Rows)
    {
        PrepareControlForExport(row);
        table.Rows.Add(row);
    }

    //  add the footer row to the table
    if (gridView.FooterRow != null)
    {
        PrepareControlForExport(gridView.FooterRow);
        table.Rows.Add(gridView.FooterRow);
    }

    for (int i = 0; i <= gridView.Rows.Count; i++)
    {
        table.Rows[i].Cells[0].Visible = false;
    }

    using (StringWriter stringWriter = new StringWriter())
    {
        using (HtmlTextWriter htmlWriter = new HtmlTextWriter(stringWriter))
        {
            //  render the table into the htmlwriter
            table.RenderControl(htmlWriter);

            //  render the htmlwriter into the response
            HttpContext.Current.Response.Write(stringWriter.ToString());
            HttpContext.Current.Response.End();
        }
    }
} 
```

代码（字）

```
public static void Export(GridView gridView)
{
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", "StaffAppraisal.doc"));
    HttpContext.Current.Response.ContentType = "application/ms-word";
    //  Create a table to contain the grid
    Table table = new Table();

    //  include the gridline settings
    table.GridLines = gridView.GridLines;

    //  add the header row to the table
    if (gridView.HeaderRow != null)
    {
        PrepareControlForExport(gridView.HeaderRow);
        table.Rows.Add(gridView.HeaderRow);
    }

    for (int j = 0; j < gridView.Columns.Count; j++)
    {
        //Apply style to Individual Cells
        gridView.HeaderRow.Cells[j].Style.Add("background-color", "black");
    }

    //  add each of the data rows to the table
    foreach (GridViewRow row in gridView.Rows)
    {
        PrepareControlForExport(row);
        table.Rows.Add(row);
    }

    //  add the footer row to the table
    if (gridView.FooterRow != null)
    {
        PrepareControlForExport(gridView.FooterRow);
        table.Rows.Add(gridView.FooterRow);
    }

    for (int i = 0; i <= gridView.Rows.Count; i++)
    {
        table.Rows[i].Cells[0].Visible = false;
    }

    using (StringWriter stringWriter = new StringWriter())
    {
        using (HtmlTextWriter htmlWriter = new HtmlTextWriter(stringWriter))
        {
            //  render the table into the htmlwriter
            table.RenderControl(htmlWriter);

            //  render the htmlwriter into the response
            HttpContext.Current.Response.Write(stringWriter.ToString());
            HttpContext.Current.Response.End();
        }
    }
} 
```

下面的图片是从excel导出的...

![导出到excel](../Images/2808aae0856502851fb76d031295b4f8.png)

下面的图片是从word中导出的...

![导出到word](../Images/ed10a2eb4df23d44e8de5b4ef768cda9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:55:06.557

omg 经过这么多天的测试，我终于找到了解决方案：添加`CellSpacing="2"`到 gridview 设计中，仅此而已。

# wordpress - 我需要更改 buddypress 主题（wordpress）中的功能

> ID：10187693
> 
> 赞同：0
> 
> 时间：2012-04-17T08:27:00.193
> 
> 标签：wordpress, function, buddypress

我正在使用 buddypress 主题 [buddyboss] ( [http://buddyboss.com/](http://buddyboss.com/) )。主要原因是这个主题能够管理图片库（效果很好）。

我现在想在成员循环中调用该图片功能。其中一位 buddyboss-admins 告诉我：

> “您将需要 buddy_boss_pics.php 中的函数。具体而言，您需要使用函数 buddyboss_pics_screen_picture_grid_content() 从第 285 行开始。您需要编辑文件以使用成员循环，因为它当前使用 display_user_id。”

这是函数的外观：

```
function buddyboss_pics_screen_picture_grid_content()
{
    global $bp, $wpdb, $bbpics;

    $wpdb->show_errors = BUDDY_BOSS_DEBUG;

    $img_size = is_active_sidebar( 'Profile' ) ? 'buddyboss_pic_med' : 'buddyboss_pic_wide';

    $gallery_class = is_active_sidebar( 'Profile' ) ? 'gallery has-sidebar' : 'gallery';

    $user_id = $bp->displayed_user->id;
    $activity_table = $wpdb->prefix."bp_activity";
    $activity_meta_table = $wpdb->prefix."bp_activity_meta";

    $pages_sql = "SELECT COUNT(*) FROM $activity_table a INNER JOIN $activity_meta_table am ON a.id = am.activity_id WHERE a.user_id = $user_id AND meta_key = 'bboss_pics_aid'";

    $bbpics->grid_num_pics = $wpdb->get_var($pages_sql);

    $bbpics->grid_current_page = isset( $_GET['page'] ) ? (int) $_GET['page'] : 1;

    // Prepare a SQL query to retrieve the activity posts 
    // that have pictures associated with them
    $sql = "SELECT a.*, am.meta_value FROM $activity_table a INNER JOIN $activity_meta_table am ON a.id = am.activity_id WHERE a.user_id = $user_id AND meta_key = 'bboss_pics_aid' ORDER BY a.date_recorded DESC";

    buddy_boss_log("SQL: $sql");

    $pics  = $wpdb->get_results($sql,ARRAY_A);

    $bbpics->grid_pagination = new BuddyBoss_Paginated( $pics, $bbpics->grid_pics_per_page, $bbpics->grid_current_page );

    buddy_boss_log("RESULT: $pics");

    // If we have results let's print out a simple grid
    if ( !empty( $pics ) )
    {
        $bbpics->grid_had_pics = true;
        $bbpics->grid_num_pics = count( $pics ); 
```

任何帮助都会很棒，因为我真的需要这样做！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:05:31.980

未经测试 - 但试试这个：

在成员循环中，寻找

```
 <?php
             /***
              * If you want to show specific profile fields here you can,
              * but it'll add an extra query for each member in the loop
              * (only one regadless of the number of fields you show):
              *
              * bp_member_profile_data( 'field=the field name' );
              */
            ?> 
```

在关闭 php 标记之前添加这个？>

```
 buddyboss_pics_members_loop( bp_get_member_user_id() ); 
```

将 buddyboss_pics_screen_picture_grid_content() 函数复制到成员循环的底部。

将其放在php标签之间并将名称更改为 buddyboss_pics_members_loop( $user_id )

并注释掉或删除 $user_id = $bp->displayed_user->id;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:00:30.873

这里的 buddyboss_pics_screen_picture_grid_content() 函数主要是使用 user_id 并从数据库中获取图像。

很简单，您已经在 member-loop.php 文件的 while 循环中调用了该函数： `buddyboss_pics_screen_picture_grid_content(bp_member_user_id())`

这里传递这个函数的参数member_user_id。

小编辑`buddyboss_pics_screen_picture_grid_content()`下面的主要功能：

以下变化：

```
function buddyboss_pics_screen_picture_grid_content($user_id = null)
{

    //Remove this code
    $user_id = $bp->displayed_user->id;

    //Put new Code
    if (empty($user_id)) {
        $user_id = $bp->displayed_user->id;
    } else {
        $user_id = $user_id;
    }

} 
```

# ios - 在 Core Data 中使用 Cascade 规则删除托管对象的性能注意事项

> ID：10187695
> 
> 赞同：7
> 
> 时间：2012-04-17T08:27:10.200
> 
> 标签：ios, performance, core-data, cascading-deletes, object-relationships

我在 SO 中进行了搜索，但没有找到任何建议来提高在处理关系时删除 Core Data 中的托管对象的性能。

场景非常简单。![在此处输入图像描述](../Images/a9552b29974ad567c70314af37dca4f4.png)

如您所见，存在三个不同的实体。每个实体都与下一个实体级联。例如，`FirstLevel`有一个名为`secondLevels`to的关系`SecondLevel`。从`FirstLevel`to的删除规则`SecondLevel`是**Cascade**而从`SecondLevel`to的删除规则`FirstLevel`是**Nullify**。`SecondLevel`在和之间应用相同的规则`ThirdLevel`。

当我想删除整个图表时，我执行如下方法：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"FirstLevel" inManagedObjectContext:context];
[fetchRequest setEntity:entity];

NSError *error = nil;
NSArray *items = [context executeFetchRequest:fetchRequest error:&error];
[fetchRequest release];    

// delete roots object and let Core Data to do the rest...
for (NSManagedObject *managedObject in items) {
    [context deleteObject:managedObject];
} 
```

利用**级联**规则，图被删除。这对少数对象快速有效，但会降低许多对象的性能。另外，我认为（但我不太确定）这种类型的删除对磁盘执行了很多往返，我错了吗？

所以，我的问题如下：如何在不利用**级联**规则和提高性能的情况下删除图形，但同时保持图形一致性？

先感谢您。

**编辑**

我无法删除整个文件，因为我的模型中有其他实体。

**编辑 2**

我发布的代码包装在子类的`main`方法中`NSOperation`。此解决方案允许在后台执行删除阶段。由于我利用了**级联规则**，因此删除是以半自动方式执行的。`FirstLevel`我只通过发布代码中的 for 循环删除根对象，即项目。这样Core Data就为我做剩下的事情了。我想知道的是：是否可以绕过半自动删除操作并手动执行而不丢失图形一致性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T13:48:18.580

对于遍历和删除数据库中的对象所花费的时间，您无能为力。但是，您可以在后台执行此操作，这样 UI 就不会被阻止。

例如，类似（代码假定为 ARC - 并且只是输入 - 未编译）......

```
- (void)deleteAllLevelsInMOC:(NSManagedObjectContext*)moc
{
    // Create a context with a private queue, so access happens on a separate thread.
    NSManagedObjectContext *context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    // Insert this context into the current context hierarchy
    context.parentContext = context;
    // Execute the block on the queue of the context
    context.performBlock:^{
            NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"FirstLevel"];
            // This will not load any properties - just object id
            fetchRequest.includesPropertyValues = NO;
            // Iterate over all first-level objects, deleting each one
            [[context executeFetchRequest:fetchRequest error:0] 
                enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
                [context deleteObject:obj];
            }];
            // Push the changes out of the context
            [context save:0];
    }];
} 
```

请注意，您可以将 RootLevel 对象添加到您的数据模型中，并赋予它与第一级对象的一对多关系。然后，（只要你只有一个根对象）你所要做的就是删除那个根对象，它会删除 CoreData 中的所有其他内容。如果您有很多 FirstLevel 对象，那将是要走的路。

或者，您可以将“新”上下文直接连接到持久存储，进行更改，并让其他上下文监视更改通知。

顺便说一句，如果您使用 UIManagedDocument，您可以免费获得这种背景，因为已经有一个父上下文在其自己的队列上运行，并且对主上下文的所有更改都传递给父上下文以实际执行数据库工作。

**编辑**

您可以手动执行此操作，但您必须关闭级联规则。我发现我希望 CoreData 为我做尽可能多的事情。它减少了我的错误余地。

如果您已经在后台线程中删除，那么您如何看待性能问题？您必须在删除期间进行查询......这意味着您正在使用完成所有工作的 MOC。

你应该从 UIManagedDocument 中吸取教训。你应该有一个在私有队列上运行的 MOC。它完成了所有真正的工作。您有一个子 MOC，它只是将工作传递给该工作队列。

如果您实际上是在查询不在您要删除的图形中的对象，它们可能会被持久存储协调器的序列化属性挂起。如果是这种情况，您应该考虑单独的协调员，或者只有两个商店。

这样，您可以根据需要删除图表中的对象，同时仍然响应对其他对象的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:26:34.237

我通常按​​照此处所述打开 Core Data SQL 跟踪：http `-com.apple.CoreData.SQLDebug 1`: [//useyourloaf.com/blog/2010/3/11/debugging-core-data-on-the-iphone.html](http://useyourloaf.com/blog/2010/3/11/debugging-core-data-on-the-iphone.html) 这有助于检查 Core Data 所做的事情期待它在幕后做。

您是否确保 [moc save:...] 需要这么长时间，而不是实际的 fetchrequest 来获取要删除的对象？如果是这种情况，您可以批量获取（然后删除）那些第一级对象。

# button - 使用 vb.net 更改 gridview 内的按钮文本

> ID：10187702
> 
> 赞同：0
> 
> 时间：2012-04-17T08:27:43.457
> 
> 标签：button, gridview

我是 vb.net 的新手。我有一些问题如何实现这个..我有gridview，按钮会根据列状态而改变..如果它的状态是“阻止”，按钮将是“解除阻止”，如果状态是空白，按钮将是“堵塞”。**我的另一个问题是单击按钮后，选定的行按钮将在数据库中更新，如果用户单击“阻止”，则将状态更改为已阻止，然后该按钮将再次更改为“取消阻止”按钮，反之亦然。**非常感谢您的帮助..

状态 | 解除封锁/封锁

（空白）| 块（按钮）

受阻| 阻止（应该是取消阻止按钮）

这段代码有什么问题..为什么它不起作用？

```
<asp:BoundField DataField="AllowStatus" 
        HeaderText="" ReadOnly="True" 
        SortExpression="AllowStatus"> 
        <ItemStyle Width="300px" />
    </asp:BoundField>
    <asp:TemplateField HeaderText="Block/Unblock">
            <ItemTemplate>
                <asp:Button ID="BlockButton" runat="server" CausesValidation="false" CommandName="" Text="Block" />
            </ItemTemplate>
    </asp:TemplateField>

Protected Sub GridView1_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) ' Handles GridView1.RowDataBound **<<ooops my mistake I comment out this >.< ..that's why it's not working**
        If e.Row.RowType = DataControlRowType.DataRow Then
            Dim allowstatus As String = (DataBinder.Eval(e.Row.DataItem, "AllowStatus")).ToString
            Dim btn As Button = DirectCast(e.Row.FindControl("BlockButton"), Button)
            If allowstatus = "Blocked" Then
                btn.Text = "Unblocked"
            End If
        End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:43:32.583

处理 GridView1_RowDataBound 事件。根据列的值（阻塞/空字符串），使用 FindControl 定位按钮并将其文本更改为阻塞/解除阻塞

# c# - C#、Windows 窗体、LinkLabel 列

> ID：10187707
> 
> 赞同：2
> 
> 时间：2012-04-17T08:28:12.373
> 
> 标签：c#, windows, forms, datagridview, linklabel

谁能为我提供一个创建自定义datagridview列控件的工作示例，其中包含一个链接标签？首先，我不能使用 LinkColumn，因为我需要在同一个单元格中有多个可点击的链接。由于我缺乏知识，在互联网上找到的例子（相信我，我已经搜索了几个小时）并没有完全帮助。我需要在这个模型中实现类似的东西：

```
| People   | Files            |
|----------|------------------|
| Person A | File 1, File 2   |
| Person B | File 1           | 
```

其中文件 1、人员 A 的文件 2 和人员 B 的文件 1 都是不同的 URL，不需要自定义文本，只需“文件 1”、“文件 2”等。理想的情况是我的自定义单元格可以使用 List<\string> UrlList 之类的参数进行数据绑定，其中该列表的元素将是指向该文件下载位置的 URL，当单击合适的文件时，它将在浏览器窗口中启动。谁能帮我解决这个问题，或者只是将我指向比 Microsoft 提供的日历列示例更近的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T18:36:19.987

你可以有两个不同的数据网格

当您选择一行时，只需用所有文件填充另一个数据网格

在单元格单击事件中，只需从人员列中获取值并使用相关文件填写其他网格。

您可以使用此获取值 `DataGridView1.SelectedRows(0).Cells(0).Value`

当您单击包含所需文件的单元格时，您可以使用类似这样的方式打开它。

```
String webAddress = "http://www.google.com/"
Process.Start(webAddress) 
```

# command-line - 需要 Xcopy 命令来复制和重命名所有文件

> ID：10187708
> 
> 赞同：0
> 
> 时间：2012-04-17T08:28:13.193
> 
> 标签：command-line, xcopy

我需要一个“Xcopy”或任何复制命令来将文件从源复制到目标并重命名文件。

例如

源目录：C:\Source\

源目录中的文件：textfile.txt；xml文件.xml；html文件.htm

目标目录：C:\Destination\

目标目录中的文件： textfile.txt.abc ；xmlfile.xml.abc; htmlfile.htm.abc

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T09:23:30.187

使用 xcopy 命令。

将您的源指定为文件夹（末尾的反斜杠），该命令将使用开关递归操作`/E`

```
xcopy "c:\source\" "c:\destination\" /E 
```

文件夹内容将递归复制到“c:\destination\”

最后，使用`ren`命令重命名您的文件夹：

```
ren "c:\source\destination" "copiedfolder" 
```

您完成的批处理文件将如下所示：

```
xcopy "c:\source\" "c:\destination\" /E
ren "c:\source\destination" "copiedfolder" 
```

如另一个答案所述，目标文件夹必须存在。如果没有，请考虑使用 mkdir 命令！

请注意，请尝试输入 xcopy /? 有关命令的扩展帮助。/？适用于许多标准 Windows 命令。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T09:29:13.370

假设您使用的是 Windows Vista/7 左右，

```
copy C:\Source\*.* C:\Destination\*.*.tmp 
```

目标文件夹必须存在，否则复制将失败。它不会递归地进行复制，但在您的示例中它可以完美运行！

# windows-phone-7 - 如何使用两个枢轴或像一个一样的全景项目？

> ID：10187709
> 
> 赞同：0
> 
> 时间：2012-04-17T08:28:15.430
> 
> 标签：windows-phone-7

我想创建一个像 Peole 一样的程序。在那里，您可以在两个全景项目中观看最近的通话。他们是怎么做到的？因此，我在两个全景项目中使用例如堆栈或包装面板，当您转到下一页时，也会有来自第一页的堆栈面板。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:37:23.297

人脉中心的“最近”选项卡只是一个 PanoramaItem。

您应该使用`WrapPanel`with `Orientation`set to`Horizontal`来获得这种效果。

# jquery - jquery如何动态改变文本区域的高度？

> ID：10187717
> 
> 赞同：1
> 
> 时间：2012-04-17T08:28:51.943
> 
> 标签：jquery

我有一个文本区域，当用户单击按钮时，该文本区域由 jquery 动态填充。

我想发生的是，一旦填充了文本区域，它的高度就会扩大，以便可以看到其中的所有文本？

这是文本区域：

```
<textarea type="text" id="notes" name="notes" value="" class="txt" style="width: 97%;"></textarea> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:33:16.830

您最好使用 jquery 插件来调整 textarea 的高度。我个人推荐这个： [http ://www.jacklmoore.com/autosize](http://www.jacklmoore.com/autosize)

# jquery - Jquery 中的下拉菜单

> ID：10187718
> 
> 赞同：2
> 
> 时间：2012-04-17T08:28:55.410
> 
> 标签：jquery

你好朋友我已经尝试了以下代码，你可以在这里看到[http://jsfiddle.net/QCdz4/](http://jsfiddle.net/QCdz4/)我想编写下拉菜单的代码，以便在它不工作`click()`时出现和消失，`mouseout()`请帮助我提前谢谢

jQuery

```
<script>
    $(document).ready(function(){
        $('.click ul').css({display:'none', position:'absolute'});
        $('.click').click(function() {
            $(this).children('ul').slideDown(200);
            $(this).on('mouseout', function() {
                $(this).children('ul').slideUp(200);
            })
        })
    })
</script> 
```

HTML

```
<div class="click">
    click
    <ul>
        <li><a href="#">one</a></li>
        <li><a href="#">two</a></li>
        <li><a href="#">three</a></li>
        <li><a href="#">four</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:33:53.000

您需要 mouseleave 而不是 mouseout，因为当您从父元素悬停到子元素时也会触发 mouseout。位于父元素上方的子元素（读取：z-index）。在这种情况下，将光标从父元素移动到子元素将触发 mouseout 事件，但不会触发 mouseleave 事件。只有当您将光标从父级和子级移开时，才会触发 mouseleave 元素。

```
$(document).ready(function(){

   $('.click ul').css({display:'none', position:'absolute'});

   $('.click').on('click', function(){
       $("ul", $(this)).slideDown(200);
   }).on('mouseleave', function(){
       $("ul", $(this)).slideUp(200);
   });   

}) 
```

更新：可以在这里找到一篇非常好的文章，其中包含非常清晰的现场演示：[jquery 中 mouseout 和 mouseleave 之间的区别](http://www.mkyong.com/jquery/different-between-mouseout-and-mouseleave-in-jquery/)。（查看带有子元素的正方形。右下角的那个）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:16:59.267

用这个

```
$(document).ready(function(){
    $('.click ul').css({display:'none', position:'absolute'});
$('.click').click(function(){

     $(this).children('ul').slideDown(200);
})

$('.click ul').hover(
  function () {
    // do nothing
  }, 
  function () {
    $('.click ul').slideUp(200);
  }
);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:31:57.160

您以错误的方式链接您的功能。

```
$('.click').click(function(){
     $(this).children('ul').slideDown(200);
}).on('mouseout', function(){
    $(this).children('ul').slideUp(200);
}); 
```

改进上面的代码，

```
$('.click').on('click', function(){
     $("ul", $(this)).slideDown(200);
}).on('mouseout', function(){
    $("ul", $(this)).slideUp(200);
}); 
```

* * *

**更新**

为确保光标在元素外后触发事件，您必须使用 mouseleave 而不是 mouse out

```
$('.click').on('click', function(){
     $("ul", $(this)).slideDown(200);
}).on('mouseleave', function(e){
        $("ul", $(this)).slideUp(200);
}); 
```

[演示](http://jsfiddle.net/QCdz4/4)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T08:35:13.253

将 mouseout 事件的绑定移到 click 事件的绑定之外

```
$(document).ready(function(){ 
```

$('.click ul').css({display:'none', position:'absolute'});

$('.click').click(function(){

```
 $(this).children('ul').slideDown(200); 
```

}) $('.click').on('mouseout', function(){

$(this).children('ul').slideUp(200); })

})​</p>

# python - wxPython 的 AGW AUI 的优点/缺点是什么？

> ID：10187722
> 
> 赞同：4
> 
> 时间：2012-04-17T08:29:07.047
> 
> 标签：python, wxpython

我们目前在我们的程序中使用**[wx.aui](http://wiki.wxwidgets.org/WxAUI)**模块。我被告知我们可以使用模块**[wx.lib.agw.aui](http://xoomer.virgilio.it/infinity77/AGW_Docs/index.html)**，它是一个纯 python 版本。

使用 agw.aui 模块代替 wxPython 提供的标准 aui 有什么优缺点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T14:06:36.650

除了 cfedermann 提到的，AGW 的实现也经常更新。作者接受补丁和新功能请求。这只是更活跃的时期。另外，因为它是纯 Python，使用它的开发人员可以更容易地破解它以满足他们自己的特定需求，而不是使用 C++ 版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T08:56:02.890

`wx.lib.agw.aui` is a re-implementation of `wx.aui` using only Python code.

It was created *"because wx.aui has a decade-old bug related to toolbars opened on wxTrac which has never been fixed."* (Source: [http://permalink.gmane.org/gmane.comp.python.wxpython/83540](http://permalink.gmane.org/gmane.comp.python.wxpython/83540))

The disadvantage may be the reduced speed as a pure Python implementation may be slower than C/C++ code.

# html - 检查是否有使用 Delphi 的 HTML 代码中的对象属性值

> ID：10187735
> 
> 赞同：6
> 
> 时间：2012-04-17T08:29:58.840
> 
> 标签：html, delphi, delphi-7

如何使用 Delphi 检查 HTML 代码中是否有输入对象属性值？

```
there isn't value attribute.
<input name="input1" type="text"/>
there is value attribute.
<input name="input1" type="text" value=""/> 
```

我试过以下

```
 if WebBrowser1.OleObject.Document.GetElementByID('input1').getAttribute('value')<>nil then
       ShowMessage('value attribute is available')
     else
       ShowMessage('value attribute isn"t available') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-27T15:28:20.233

我想我会把这个作为一个答案，因为我花了一段时间整理一些代码来调查对 q 的评论中所说的内容，我想我不妨分享一下这种努力和结果，不是我所期待的。

从下面的结果看来，您无法判断输入标记是否具有来自 MSHTML DOM 的“值”属性，因为如果 HTML 源中没有物理存在，DOM 会“合成”一个。不确定这是否是 OP 希望的答案，但如果您想在代码中设置 Input 元素的“值”，至少可以省去插入新属性节点的麻烦。如果 otoh，您确实需要知道源中是否存在 value 属性，即原始 q，那么您需要另一个解析器，可能是自制的 - 如果页面格式符合 XML，则可能是 XML 解析器。

下面的示例显示 DOM 报告： a) 存在 value 属性，即使源 HTML (Input1) 中不存在任何值属性；b) 一个名为“value”的属性，即使它的节点值为空（Input2）；c) Input1 和 Input2 在 DumpNode 例程中应用的基础上彼此无法区分。

鉴于此部分 DFM 中的 HTML：

```
object moHtml: TMemo
  [...]
  Lines.Strings = (
    '<html>'
    '  <body>'
    '    <p>This has no value attribute.'
    '    <input name="input1" type="text"/>'
    '    <p>This has an empty value attribute.'
    '    <input name="input2" type="text" value=""/>'
    '    <p>This has a value attribute.'
    '    <input name="input3" type="text" value="already has a value"' +
      '/>'
    '  </body>'
    '</html>') 
```

下面的代码报告：

```
Node name: INPUT
     value: 
  147: type: >text<
  158: value: ><
  160: name: >input1<
Node name: INPUT
     value: 
  147: type: >text<
  158: value: ><
  160: name: >input2<
Node name: INPUT
     value: 
  147: type: >text<
  158: value: >already has a value<
  160: name: >input3< 
```

代码：

```
procedure TForm1.DumpItems;
var
  E : IHtmlElement;
  D : IHtmlDomNode;

  procedure DumpNode(ANode : IHtmlDomNode);
  var
    Attrs : IHtmlAttributeCollection;
    A : IHtmlDomAttribute;
    V : OleVariant;
    i : Integer;
  begin
    Log('Node name', ANode.nodeName);
    V := ANode.nodeValue;
    if not VarIsNull(V) and not VarIsEmpty(V) then
      Log('     value', V)
    else
      Log('     value', '');

    Attrs := IDispatch(ANode.Attributes) as IHtmlAttributeCollection;
    for i := 0 to Attrs.length - 1 do begin
      V := i;
      A := IDispatch(Attrs.item(V)) as IHtmlDomAttribute;
      V := A.nodeValue;
      if (CompareText(A.nodeName, 'Name') = 0) or (CompareText(A.nodeName, 'Input') = 0) or (CompareText(A.nodeName, 'Type') = 0) or (CompareText(A.nodeName, 'Value') = 0) then begin
        if not VarIsNull(V) and not VarIsEmpty(V) then
          Log('  ' + IntToStr(i) + ': ' + A.nodeName, '>' + V + '<')
        else
          Log('  '  + IntToStr(i) + ': '+ A.nodeName, '')
        end;
    end;

  end;

begin
  D := IDispatch(WebBrowser1.OleObject.Document.GetElementByID('input1')) as  IHtmlDomNode;
  DumpNode(D);

  D := IDispatch(WebBrowser1.OleObject.Document.GetElementByID('input2')) as  IHtmlDomNode;
  DumpNode(D);

  D := IDispatch(WebBrowser1.OleObject.Document.GetElementByID('input3')) as  IHtmlDomNode;
  DumpNode(D);
end;

procedure TForm1.Log(const ALabel, AValue : String);
begin
  Memo1.Lines.Add(ALabel + ': ' + AValue);
end;

procedure TForm1.btnLoadClick(Sender: TObject);
var
  V : OleVariant;
  Doc : IHtmlDocument2;
begin
  WebBrowser1.Navigate('about:blank');
  Doc := WebBrowser1.Document as IHTMLDocument2;
  V := VarArrayCreate([0, 0], varVariant);
  V[0] := moHtml.Lines.Text;
  Doc.Write(PSafeArray(TVarData(v).VArray));
  Doc.Close;
end;

procedure TForm1.btnDumpClick(Sender: TObject);
begin
  DumpItems;
end; 
```

# coldfusion - ColdFusion 因未知原因无法删除文件

> ID：10187737
> 
> 赞同：3
> 
> 时间：2012-04-17T08:30:05.633
> 
> 标签：coldfusion, coldfusion-9

我正在尝试删除并重新创建测试文件，但出现以下错误。谁能告诉我为什么会这样？

**错误：**

```
ColdFusion could not delete the file e:\sample\test2.html for an unknown reason. 
```

**代码：**

```
<cfif FileExists("e:\sample\test2.html")>
   <cffile action="delete"file="e:\sample\test2.html"><br>
   <p>deleted the file </p>
<cfelse>
   <p>Sorry, can't delete the file - it doesn't exist.</p>
</cfif>

<cfset createObject("java", "java.lang.Thread").sleep(JavaCast("int", 90000))>
<cfsavecontent variable="HTML">
    <cfinclude template="noticeEmail.cfm">
</cfsavecontent>        

<cffile action="WRITE"  attributes = "normal" nameconflict="Overwrite"  
      file="e:\sample\test2.html" output="#HTML#"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:11:44.310

我要检查的第一件事是运行 ColdFusion 的用户的权限。
我不知道您是如何运行 CF 或在什么样的环境中运行的，但假设这是一个本地开发环境，在 Windows 机器上并且正在将 ColdFusion 作为服务运行：

*   在服务管理器中找到 ColdFusion 服务（开始 -> 运行 -> services.msc）
*   右键单击 ColdFusion 服务，然后在登录选项卡中查找“以谁的身份运行。（该服务可以根据其安装方式命名，但查找“ColdFusion 9 应用程序服务器”，任何以 JRun 开头的内容）或宏媒体）
*   如果这不是本地系统，那么您需要确认用户具有对 e:\sample\test2.html 的读/写访问权限

其他可能导致错误的事情，另一个程序是否可以锁定此文件，文件在创建后发生了什么（是否仅通过 ColdFusion 创建）

您还可以发布您收到的实际错误吗？
如果是“抱歉，无法删除文件 - 它不存在”。然后这是由于您在顶部进行的检查以确认文件是否存在。

最后，您在上面粘贴的代码似乎每行都缺少第一个字符，值得修复此问题，以便其他人可以更轻松地复制和粘贴代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T15:21:54.257

我遇到了同样的问题，尽管我找到的答案都没有适用。虽然我的文件通过了 FileExists 测试，但实际删除仍然失败。我正在使用变量构建文件名：

```
<cfset sFilename = REQUEST.SubscriberWebFiles
                        & form.SubscriberID & "\Attachments\" 
                        & qryAttachmentsTrash.AttachmentName> 
```

我用 Trim 包装了代码：

```
<cfset sFilename = Trim(REQUEST.SubscriberWebFiles
                       & form.SubscriberID & "\Attachments\" 
                       & qryAttachmentsTrash.AttachmentName)> 
```

问题神奇地消失了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:23:04.233

您可以使用此代码通过 ColdFusion 删除 MS Word 文档

```
<cfif FileExists( WordFilePath &".doc")>
   <cffile action="delete"
       file="#WordFilePath#.doc">
<cfelse>
    Sorry, can't delete the file - it doesn't exist.
</cfif> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T18:57:25.803

您的 Web 服务器/操作系统可能会保留该文件。您可以尝试在不打开文件的情况下创建文件，然后查看是否将其删除吗？因此，只需创建一个文件，然后立即将其删除。

# asp.net - ASP.NET 帖子不起作用

> ID：10187738
> 
> 赞同：0
> 
> 时间：2012-04-17T08:30:11.237
> 
> 标签：asp.net, telerik

我第一次编写一些 ASP.NET 代码时偶然发现了一个奇怪的错误。当我单击按钮发布时，它会这样做，但没有任何参数。

代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="Login.aspx.cs" Inherits="SingTelAPI.Login" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <table style="width:100%;">
        <tr>
            <td>
                &nbsp;</td>
            <td>
                &nbsp;</td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td>
                &nbsp;</td>
            <td>
                <table style="width:100%;">
                    <tr>
                        <td>
                            &nbsp;</td>
                        <td align="center">
                            <asp:Label ID="Label4" runat="server" Text="Login" Font-Bold="True" 
                                Font-Names="Verdana" ForeColor="#CC0000" Font-Size="Large"></asp:Label>
                        </td>
                        <td>
                            &nbsp;</td>
                    </tr>
                    <tr>
                        <td>
                            &nbsp;</td>
                        <td>
                            &nbsp;</td>
                        <td>
                            &nbsp;</td>
                    </tr>
                    <tr>
                        <td>
                            &nbsp;</td>
                        <td>
                            <asp:Panel runat="server" DefaultButton="SubmitBtn" ID="Panel1">
                                <table style="width:100%;">
                                    <tr>
                                        <td class="style1">
                                            <asp:Label ID="Label9" runat="server" Font-Bold="True" Font-Names="Verdana" 
                                            ForeColor="#0066FF" Text="Inupt Details:"></asp:Label>
                                        </td>
                                        <td>
                                        &nbsp;</td>
                                        <td>
                                        &nbsp;</td>
                                    </tr>
                                    <tr>
                                        <td class="style1">
                                            <asp:Label ID="Label5" runat="server" Text="Email:"></asp:Label>
                                        </td>
                                        <td>
                                            <telerik:RadTextBox ID="Email" runat="server" Skin="Default">
                                            </telerik:RadTextBox>
                                        </td>
                                        <td>
                                            <asp:CustomValidator ID="EmailValidator" runat="server" 
                                            ErrorMessage="Please Enter Email" Font-Bold="True" Font-Names="Verdana" 
                                            ForeColor="#00CC66" ControlToValidate="Email" ValidateEmptyText="True" 
                                            ValidationGroup="LoginValidation"></asp:CustomValidator>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="style1">
                                            <asp:Label ID="Label6" runat="server" Text="Password:"></asp:Label>
                                        </td>
                                        <td>
                                            <telerik:RadTextBox ID="Password" Runat="server" Skin="Default">
                                            </telerik:RadTextBox>
                                        </td>
                                        <td>
                                            <asp:CustomValidator ID="PasswordValidator" runat="server" 
                                                ControlToValidate="Password" ErrorMessage="Please Enter Password" Font-Bold="True" 
                                                Font-Names="Verdana" ForeColor="#00CC66" ValidateEmptyText="True" 
                                                ValidationGroup="LoginValidation"></asp:CustomValidator>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="style1" colspan="3">
                                           <hr /></td>
                                    </tr>
                                    <tr>
                                        <td class="style1">
                                            <telerik:RadButton ID="SubmitBtn" runat="server" 
                                                Skin="Default" Text="Login" ValidationGroup="LoginValidation" 
                                                Width="120px">
                                            </telerik:RadButton>
                                        </td>
                                        <td>
                                            <asp:Label ID="ResultsLabel" runat="server" ForeColor="#339933"></asp:Label>
                                        </td>
                                        <td>
                                            &nbsp;</td>
                                    </tr>
                                </table>
                            </asp:Panel>
                        </td>
                        <td>
                            &nbsp;</td>
                    </tr>
                </table>
            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td>
                &nbsp;</td>
            <td>
                &nbsp;</td>
            <td>
                &nbsp;</td>
        </tr>
    </table>
</asp:Content> 
```

和 .cs 文件：

```
public partial class Login : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            string email = HttpContext.Current.Request["Email"];
            Label9.Text = email;
        }
    }
} 
```

由于某种原因，它会将 Label9 的文本更改为“”。首先我认为问题在于我没有安装telerik，所以我安装了它。但这并没有改变任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:34:39.780

我会检查实际上发布到页面的所有字段，因为我怀疑`Email`实际上不是`Email`。

在 asp.net 中，尤其是主页面和内容页面，输入的 id 和名称是动态更改的。

因此，电子邮件可能会变成类似的东西`ctl00_ContentPlaceHolder1_Email`。

话虽如此，您不应该需要使用该`Request`对象来访问发布回 .net 页面的字段。您可以直接访问这些值。

例如

```
Label9.Text = this.Email.Text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:34:44.987

控件的 ID 在发送到客户端时会发生变化，因此 PostBack`HttpContext`很可能没有带有 ID 的字段`"Email"`。

试试这个：

```
if (IsPostBack)
{
 string email = Email.Text; //Email refers to <telerik:RadTextBox ID="Email"/>
 Label9.Text = email;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T08:39:23.463

您似乎没有附加按钮的事件处理程序，因此将其更改为：

```
<telerik:RadButton ID="SubmitBtn" runat="server"  Skin="Default" 
    OnClick="RadButton1_Click" Text="Login" ValidationGroup="LoginValidation"  Width="120px">
</telerik:RadButton> 
```

并在代码隐藏中处理它：

```
protected void RadButton1_Click(Object sender, EventArgs e)
{
    String email = Email.Text;
} 
```

删除 Page_Load 中的部分，因为它是多余的。

# php - 将用户数据从js发送到php

> ID：10187741
> 
> 赞同：0
> 
> 时间：2012-04-17T08:30:36.390
> 
> 标签：php, javascript, session

我正在编写一个应用程序，它在客户端上有 JS，在服务器上有 php，在服务器上打开会话及其“在 php 脚本中”我通过从 DB 检索并存储在 `$_SESSION["uID"]` 最初的唯一 ID 识别每个用户我认为这在将用户数据从 javascript 发送到 php 时就足够了，因为会话将处理识别问题，并且每个用户请求都将由其自己的会话接收，因此没有用户会话会与另一个会话冲突..我对吗？还是我必须使用另一种技术？
我必须将用户ID从js发送到php吗？或者在php中声明就足够了？
我是否必须使用会话 ID 或其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:35:17.230

通过 js 发送用户 ID 会使您的应用程序不安全。任何人都可以成为任何人。如果会话由cookies设置，在php端使用该会话就足够了。您不必通过 js 发送会话 ID，因为它会由您的浏览器通过 cookie 自动发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:35:58.770

可以肯定的是，一旦在 php 脚本的开头调用 session_start()，您将能够访问 $_SESSION["uID"]。如果你已经为用户提供了一个唯一的 uID，你只需要在 php.ini 中使用它。此外，如果您使用 uID 从 js 到 php 进行一些调用，将存在巨大的安全漏洞，因为 javascript 很容易受到干扰，并且可能传递“错误”的 uID。所以是的，我会坚持你所说的，我的结论是：是的，在 php 中声明就足够了 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:35:49.820

花一些时间阅读会议。

当你测试它时发生了什么？

通常会话 id 是通过 cookie 传输的。cookie 应该在 xmlhttp 请求中发送到服务器。Cookie 是通过 HTTP 请求在浏览器上设置的。

可以通过其他方式发送会话 id，并通过 javascript 设置会话 cookie - 但是在您了解基础知识之前，对此的解释将没有多大意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T08:39:30.097

Php 让客户端将会话 ID 存储为 cookie，该 cookie 在每次请求时发送。但是，如果用户不保留 cookie，会话将被取消。更糟糕的是，如果用户从不安全的位置登录，攻击者可能会获得他的会话 ID，系统会错误地将他识别为受害者。

The truth is there is no absolute way to identify a client. A session id good enough for most cases, but if you need an extra layer of security, use accounts in combination with IP checking and sessions.

# email - 邮件附件上传的流程是怎样的？

> ID：10187742
> 
> 赞同：0
> 
> 时间：2012-04-17T08:30:52.987
> 
> 标签：email, file-upload

我想知道在发送邮件期间“附加文件”是如何工作的？
当用户选择要发送的文件时，会显示一个进度条。
选择文件当时存储在客户端浏览器中或上传到服务器端的位置。
单击发送后，该文件是传输到接收方邮件还是发送该文件的链接？
到目前为止，有人可以让我清楚地了解整个概念吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:37:02.270

常规文件上传输入没有进度指示。这些在提交表单时发送文件。

当您有上传指示时，这表明该文件在发送实际电子邮件之前已“预先”上传到您的邮件托管服务器。在发送电子邮件时，上传的文件链接将被发送到服务器，实际文件将附加在他们的系统中。

# firefox - Greasemonkey 无法识别也无法安装本地脚本

> ID：10187750
> 
> 赞同：3
> 
> 时间：2012-04-17T08:31:20.027
> 
> 标签：firefox, installation, greasemonkey

我无法安装新的`*.user.js`本地脚本。我使用 Firefox 11.0 和 Greasemonkey 0.9.18。

当我打开（Firefox - 文件 - 打开）`.user.js`本地磁盘上的文件时，它不会被识别为 Greasemonkey 用户脚本。

但是，如果我输入`.user.js`文件的 URL，Greasemonkey 会识别并安装它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:31:16.123

有几件事会导致这种情况：

1.  脚本是否在系统`temp`路径中？（如`echo %temp%`在 Windows 命令行上运行所报告的那样。）
    有一个未报告的“功能”，即脚本不会从该位置安装，而是从其他文件夹安装。

2.  是否已经存在另一个同名脚本？
    从脚本管理器中卸载它。

3.  Firefox 的运行时状态在调试脚本时可能会被破坏，无论是在每个选项卡上还是在程序范围内。尝试打开一个新标签并集中安装。

4.  像这样重启：

    1.  关闭火狐。使用任务管理器确保所有 Firefox 进程都已停止。他们可能需要几分钟。如果您使用任务管理器杀死一个进程，那么最好在`CHKDSK`之后运行。
    2.  `gm_scripts`在您的[Firefox 配置文件文件](http://support.mozilla.org/en-US/kb/Profiles#w_how-do-i-find-my-profile)夹中找到该文件夹​​。
    3.  删除您正在处理的脚本的子文件夹以及弹出的任何重复或杂散。
    4.  重启火狐。
    5.  重新安装您正在处理的 GM 脚本。

5.  按照[GM 故障排除指南中的“更大的问题”说明进行操作](http://wiki.greasespot.net/Troubleshooting_%28Users%29#Bigger_Problems)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T12:27:56.087

我在这里遇到了同样的问题。在阅读了 Brock Adams 的回答后，我意识到我的文件夹被命名为“GM_scripts”，所以我更改了文件夹名称，再次尝试并成功了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T08:55:08.987

卸载和安装 greasymonkey 对我有用。所有以前的脚本都会自动恢复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-23T19:16:23.497

遇到了同样的问题，这里没有提到解决方案，我只需在文件浏览器中右键单击脚本并“使用...打开”firefox 即可安装我的脚本。脚本安装对话框弹出并完成。目前没有其他方法对我有用。

# mysql - Mysql Lock 等待超时错误

> ID：10187755
> 
> 赞同：2
> 
> 时间：2012-04-17T08:32:03.473
> 
> 标签：mysql, ruby-on-rails-3

我正在处理 Mysql 中真正的大数据。其中一张表包含大约 400 万行，在这些行上不断更新查询。

此更新查询一直顺利执行，直到一段时间后，但随着行数的增加，它给我带来了锁等待超时错误的严重问题。

我搜索了它的解决方案，我得到的唯一解决方案是增加，`innodb_lock_wait_timeout`但我在某处读到这实际上是解决该错误的错误选择。

任何人都可以帮助我如何在不增加 的情况下解决这个问题`innodb_lock_wait_timeout`，我正在寻找其他解决方案，因为增加变量 time_out 会在整个数据库中增加它，但我只想增加一个有这么多记录的表的事务时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:01:47.420

“此查询在 cron 作业的帮助下发生，数千个查询同时发生在同一张表上”

这就是问题所在。cron作业是有罪的一方而不是mysql。我认为你最近达到了临界点。您需要将数据组合成较少数量的查询。类似于以下内容：

```
INSERT INTO users
(userid, total_received_credits, credit_amount, credit_amount) , 
values(51016 , 2.0, 2.0,  '2012-04-17 16:39:50'), 
(44016 , 3.0, 3.0,  '2012-04-17 16:39:50'), 
(11116 , 2.0, 2.0,  '2012-04-17 16:39:50') 
ON DUPLICATE KEY update total_received_credits = VALUES(total_received_credits) , 
total_received_credits = VALUES(total_received_credits), 
total_received_credits = VALUES(total_received_credits), 
credit_amount = VALUES(credit_amount) 
```

# android - 向网页发送短信？

> ID：10187762
> 
> 赞同：-3
> 
> 时间：2012-04-17T08:32:30.430
> 
> 标签：android, asp.net, windows-phone-7, sms

我想向我的网站发送 SMS 文本消息，以便帖子显示在页面上。有哪些服务可以存储消息或将它们作为 CSV 或其他方式发送到网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:39:59.157

我不确定您在标签中提到的 android、asp.net 和 windows phone 所要求的语言。

asp.net 解决方案 [http://www.c4sms.com/codeExamples.asp](http://www.c4sms.com/codeExamples.asp)

对于安卓 [http://developer.android.com/reference/android/telephony/SmsManager.html](http://developer.android.com/reference/android/telephony/SmsManager.html)

对于 windows-phone-7 [http://www.developer.nokia.com/Community/Wiki/How_to_send_an_SMS_in_Windows_Phone_7](http://www.developer.nokia.com/Community/Wiki/How_to_send_an_SMS_in_Windows_Phone_7)

# ajaxcontroltoolkit - AjaxToolKit 模态弹出窗口在 sharepoint 2010 中不起作用

> ID：10187767
> 
> 赞同：1
> 
> 时间：2012-04-17T08:32:48.537
> 
> 标签：ajaxcontroltoolkit

```
 <asp:Content ID="Main" ContentPlaceHolderID="PlaceHolderMain" runat="server">

        <style type="text/css">
        .ModalPopupBG
{
    background-color: #666699;
    filter: alpha(opacity=50);
    opacity: 0.7;
}

.HellowWorldPopup
{
    min-width:200px;
    min-height:150px;
    background:white;
}
    </style>
<asp:button id="Button1" runat="server" text="Button" />

<ajx:modalpopupextender id="ModalPopupExtender1" runat="server" 
    cancelcontrolid="btnCancel" okcontrolid="btnOkay" 
    targetcontrolid="Button1" popupcontrolid="Panel1" 
    popupdraghandlecontrolid="PopupHeader" drag="true" 
    backgroundcssclass="ModalPopupBG">
</ajx:modalpopupextender>

<asp:panel id="Panel1" style="display: none" runat="server">
    <div class="HellowWorldPopup">
                <div class="PopupHeader" id="PopupHeader">Header</div>
                <div class="PopupBody">
                    <p>This is a simple modal dialog</p>
                </div>
                <div class="Controls">
                    <input id="btnOkay" type="button" value="Done" />
                    <input id="btnCancel" type="button" value="Cancel" />
        </div>
        </div>
</asp:panel>

</asp:Content> 
```

我把上面的代码放在了sharepoint中，我还在母版页中更改了ajaxtoolkit scriptmanager。但是代码仍然不起作用。我在.net平台上试过它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:12:12.350

现在问题已经解决了，我使用的是 Ajaxtoolkit 3.5 和 sharepoint 2010。由于 sharepoint 2010 使用 4.0 .Net 版本和使用 3.5 .Net 版本构建的 Toolkit 存在兼容性问题，所以我参考了 Ajaxtoolkit 3.0 。问题已解决

# ruby-on-rails - Rails，来自日期时间字段的日期搜索查询。为什么这个不起作用？

> ID：10187771
> 
> 赞同：0
> 
> 时间：2012-04-17T08:33:07.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我是这个 Rails 世界的新手，如果错误太明显，我很抱歉。

我正在构建一个搜索表单。我设法比较了字符串。但是，我正在为约会而苦苦挣扎。

这是以下形式：

```
= select_datetime Date.today, :prefix => :search_start_date 
```

这是我正在尝试的查询（注意：事件中有效列中的开始日期）

```
 @events = @events.where("start_date > ?", "%#{params[:search_start_date]}%") 
```

因为一个是日期，另一个是日期时间，我虽然必须投射它们。但是，我尝试过的任何事情都没有奏效。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:56:46.897

您可以将参数放在 Time 对象中：

```
@time = Time.new(params[:search_start_date][:year], params[:search_start_date][:month],params[:search_start_date][:day] , params[:search_start_date][:hour], params[:search_start_date][:minute])
@events = Event.where("start_date > ?", @time) 
```

它应该工作。但是，您应该将 start_date 设置为 datetime 类型。事实上，如果您有一个日期为 2012 年 4 月 17 日的事件，并且您正在寻找在 2012 年 4 月 17 日 9:00 之后开始的@events，则不会显示该事件。仅显示从 4 月 18 日及之后开始的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:42:27.757

你能试试这个它会给你更好的结果吗

```
 @time = params[:search_start_date]+" "+"00:00:00"

 @events = @events.where("start_date > ?", @time) 
```

试试看，它会给你带来大于 00:00:00 的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:24:42.667

尝试使用 parse ：

```
 @events = @events.where("start_date > ?", "%#{Date.parse(params[:search_start_date])}%") if !params[:search_start_date].nil? 
```

# windows-phone-7 - 如果在拍照时按下返回，WP7 Camera CaptureImage 不会返回

> ID：10187774
> 
> 赞同：1
> 
> 时间：2012-04-17T08:33:15.920
> 
> 标签：windows-phone-7, camera

我正在尝试使用自动对焦功能编写一个基本的相机应用程序来处理条形码。如果我在相机聚焦时按下回，它会进入一个空白屏幕并挂在那里 - 不会引发异常。我已将问题追溯到 CaptureImage() 方法，我可以看到它被调用，但 OnCaptureImageAvailable 方法从未被调用。即使我没有在 OnNavigatedFrom 方法中解开 OnCaptureImageAvailable，也会发生这种情况。

```
 protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedFrom(e);
        _camera.AutoFocusCompleted -= OnCameraAutoFocusCompleted;
        _camera.CaptureImageAvailable -= OnCaptureImageAvailable;
        _camera.Initialized -= OnCameraInitialized;
        _camera.Dispose();
        _camera = null;
    }

    private void InitializeCamera()
    {
        _camera = new PhotoCamera();
        _camera.Initialized += OnCameraInitialized;
        viewfinderBrush.SetSource(_camera);
    }

    void OnCameraInitialized(object sender, EventArgs e)
    {
        _camera.Initialized -= OnCameraInitialized;
        _camera.AutoFocusCompleted += OnCameraAutoFocusCompleted;
        _camera.CaptureImageAvailable += OnCaptureImageAvailable;

        _camera.FlashMode = FlashMode.Off;
        _camera.Focus(); 
    }

    private void OnCameraAutoFocusCompleted(object sender, EventArgs e)
    {
        _camera.CaptureImage();
    }

    private void OnCaptureImageAvailable(object sender, ContentReadyEventArgs e)
    {
        if (_camera != null && e.ImageStream != null)
            ScanBarcode(e);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:47:40.957

我会尝试`viewfinderBrush`在您的 OnNavigatedFrom 中清除源代码。

也尽量不要`_camera`在那里处理，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:00:10.377

问题是您将转到上一页并在相机忙于“_camera.CaptureImage();”中捕获图像时处置相机。

保留两个布尔标志怎么样：“doBack”和“captureCompleted”。

然后，当 OnCameraAutoFocusCompleted 事件触发时不要返回：

```
private void OnCameraAutoFocusCompleted(object sender, EventArgs e)
    {
        _camera.CaptureImage();
    } 
```

当按下返回键时，设置 doBack 标志并忽略，除非设置了 captureCompleted：

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {
        if (!captureCompleted)
        {
            this.doBack = true;
            e.Cancel = true;
        }

        base.OnBackKeyPress(e);
    } 
```

然后，当 OnCameraCaptureCompleted 事件触发时，如果设置了 doBack 标志，则设置 captureCompleted 标志并转到上一页（并处置相机）：

```
private void OnCameraCaptureCompleted(object sender, EventArgs e)
    {
        this.captureCompleted = true;

        if (doBack)
        { 
            this.Dispatcher.BeginInvoke(delegate()
            {
                NavigationService.GoBack();
            });
        }
    } 
```

# jquery - 如何在拆分的 js/coffee 文件中使用 Url Helper

> ID：10187778
> 
> 赞同：0
> 
> 时间：2012-04-17T08:33:45.653
> 
> 标签：jquery, asp.net-mvc, coffeescript

当我在 ASP.NET MVC 视图中编写 javascript 代码时，我可以使用 @Url.Content() 来生成引用路径。

最近在玩coffeescript，使用[MINDSCAPE Web WorkBench](http://www.mindscapehq.com/products/web-workbench)在Visual Studio中生成js文件。

但是，当我将所有 js 文件拆分为多个文件时，我无法使用 Url 助手，因此我必须将 '/Dashboard/User/12' 之类的 url 路径硬编码到咖啡文件中。

有什么解决方法可以让我在拆分的 js/coffee 文件中使用 url 助手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:24:49.713

您可以在 html 元素上使用 html5`data-*`属性，并且可以从您的 js 文件中访问它们

**html**

```
<li class='elem' data-url='example.com'>something</li> 
```

**Javascript**

```
$('.elem').data('url') // return example.com 
```

这就是不显眼的 Javascript 的想法，将所需的信息放在 html 文档中，而不在其中放置 Javascript 代码

* * *

如果您使用 html 助手并想使用，`data-*` [请查看](https://stackoverflow.com/questions/2339096/is-there-a-way-to-create-an-actionlink-with-html-5-data-attributes/5068110#5068110)

# node.js - 从命令行部署 Windows Azure 应用程序？

> ID：10187779
> 
> 赞同：0
> 
> 时间：2012-04-17T08:33:47.743
> 
> 标签：node.js, command-line, azure

我查看了 smarx 的[noderole](https://github.com/smarx/noderole) / [packanddeploy](https://github.com/smarx/packanddeploy)并想在本地对其进行测试，然后将其部署到 Azure，但没有使用 Visual Studio。我怎么能那样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:49:50.927

您可以使用 Windows Azure 门户或使用 PowerShell 进行部署。首先，您需要使用 **cspack.exe**创建服务包，就像在 smarx 的**packanddeploy**中找到的一样（更多信息：http: [//msdn.microsoft.com/en-us/library/windowsazure/gg432988.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg432988.aspx)）

获得包后，您可以通过 Windows Azure 门户上传它或使用 PowerShell cmdlet。培训工具包附带一个使用 PowerShell 部署的练习：[练习 2：使用 PowerShell 管理 Windows Azure 应用程序](http://msdn.microsoft.com/en-us/gg271300 "练习 2：使用 PowerShell 管理 Windows Azure 应用程序")

# oracle - Oracle 10.2：具有零星性质的无效游标

> ID：10187782
> 
> 赞同：0
> 
> 时间：2012-04-17T08:34:19.570
> 
> 标签：oracle, cursor

我正在处理的应用程序中的存储过程偶尔会生成 ORA 01001：无效游标错误。当错误发生时，许多用户会点击此错误作为响应，一段时间后，它会自行纠正，一切都会恢复正常。

[官方文档（ Oracle 10g Documentation](http://docs.oracle.com/cd/B19306_01/server.102/b14219/e900.htm#sthref409)）中没有提到这个ORA01001错误。但我可以看到来自 Oracle 10g 的错误。我定期监控最大打开游标，没有任何问题。生成错误的存储过程点是一个简单的 SELECT（使用隐式游标）。

编辑：以下是代码：

```
l_sql_point:=12; 
If l_country_id='RU' 
Then select count(*) into l_rub_count from lcs_currency where currency_cd='RUB'; 
End If; 
Begin 
  select group_id into l_group from lcs_country where country_id=l_country_id; 
Exception when no_data_found 
  Then p_lcs_err_cd:='LCD1001'; 
       p_lcs_err_text:='Invalid Country Code - '||l_country_id; 
        p_err_text:='Invalid Country Code - '||l_country_id; --  return ret_result_set; 
End; 
```

我收到以下错误：`xxsql_point:12----ORA-01001: invalid cursor`

感谢您的宝贵帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:37:34.803

根据我的经验，在以下情况下会发生 ORA-01001 无效游标错误：

*   您尝试打开一个已经存在的打开游标
*   您尝试在光标关闭或尚未打开时访问光标属性

检查你的代码库，看看是否有任何游标没有关闭并且你正试图再次重新打开。

# php - 在php中将数组从一个页面传递到另一个页面

> ID：10187792
> 
> 赞同：0
> 
> 时间：2012-04-17T08:34:42.350
> 
> 标签：php

如何在 php 中将数组值从一个页面传递到另一个页面并在另一个页面中检索该数组的值。我已经使用 array_push 函数使用如下循环在数组中插入数据库的值。

```
array_push($file_names,$row['sVoiceFileName']))); 
```

现在，我想将 $file_array 变量传递到另一个页面。我尝试了下面的代码来传递数组但不起作用。它只在 url 中显示 Array。

```
echo "<a href='download.php?voice=". $file_names."'> ". "Download All"."</a>"; 
```

有没有其他方法可以将数组传递到另一个页面或使用 post 方法。以及如何在另一个页面中检索值。在这里，我尝试将数组中包含的所有文件下载为 zip。为此我有功能

```
function zipFilesAndDownload($file_names,$archive_file_name,$file_path) 
```

在另一个页面中。我需要将 $file_names 数组传递给该函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:40:39.833

那这个呢？

```
echo "<a href='download.php?voice=". impode(';', $file_names)."'> ". "Download All"."</a>";

function zipFilesAndDownload($file_names,$archive_file_name,$file_path)
{
$file_names = explode(';', $file_names);
} 
```

implode/explode 你也可以用 json_encode/json_decode、serialize/unserialize 替换，只是根据你的意愿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:41:10.923

您可以使用例如函数[序列化](http://php.net/manual/en/function.serialize.php)

并将返回的结果作为 POST 或 GET 参数传递

然后将`unserialize`函数应用于该值，您将获得原始数组

# jquery - 将数组传递给 Asp Web 服务

> ID：10187794
> 
> 赞同：0
> 
> 时间：2012-04-17T08:34:50.297
> 
> 标签：jquery, asp.net

我有数组需要将该数组传递给我的 ASP.Net Webservice

我的数组如下所示：

```
{
    "lists" [
        {"F0":"LpSeries", "F1":"Description"},
        {"F0":"Second","F1":"StringValue"}
    ]
} 
```

我使用这样的javascript：

```
$.ajax({
    type: "POST",
    contentType: "application/json",
    data: jsonText,
    url: "LPService.asmx/GetDataTableFromArray",
    dataType: "json",
    success: function (data) {
        alert(data.d);
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        debugger;
    }
}); 
```

在网络服务中，我这样写

```
[WebInvoke(Method = "POST", UriTemplate = "")]
public DataTable X(RootObject root)
{
    DataTable dt = new DataTable();
    return dt;
    // do something with your root objects or its child objects...

    //return new HttpResponseMessage(HttpStatusCode.Created);
} 
```

在这里，我为根对象创建了一个类，它看起来像这样

```
public class RootObject
{
    public List<Result> Results { get; set; }
}

public class Result
{
    public string F0 { get; set; }
    public string F1 { get; set; }
    public string F2 { get; set; }
    public string F3 { get; set; }
    public string F4 { get; set; }
    public string F5 { get; set; }
    public string F6 { get; set; }
    public string F7 { get; set; }
} 
```

我无法获得价值。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:43:32.280

尝试这样做：

```
var myArray1 = new Array();    
var myArray2 = new Array();    
data: "{'myArray1':"+JSON.stringify(myArray1)+",'myArray2':"+JSON.stringify(myArray2)+"}", 
```

在您的网络方法中：

```
[System.Web.Services.WebMethod]
public static string SavePage(List<string> myArray1, List<string> myArray2)
{
return myArray1;
} 
```

# macos - 在 MacOS X 上使用多显示器全屏清洁 OpenGL 支持

> ID：10187796
> 
> 赞同：3
> 
> 时间：2012-04-17T08:34:54.720
> 
> 标签：macos, opengl, fullscreen, glut

我正在开发基于 OpenGL 的应用程序。我一直在使用 GLUT 来设置屏幕，但遇到了问题。

连接第二台显示器时，我想设置另一个带有另一个视口的窗口，但使用 glut 我只能设置一个跨越两个显示器的全屏视图。

我的问题是，如何在 MacOSX 下设置两个全屏窗口，我需要使用什么？看起来这在 GLUT 下是不可能的，我需要使用 X11 还是可以使用一些更原生的框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:56:40.270

您应该使用带有 NSOpenGLView 的 NSWindow 或带有手动关联的 NSOpenGLContext 的 NSView 作为其内容视图。这是带有示例代码的[Apple 文档。](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/OpenGL-MacProgGuide/opengl_fullscreen/opengl_cgl.html)在该示例中，它使用`[NSScreen mainScreen]`. 您可以检查返回的数组`[NSScreen screens]`并选择不同的屏幕。

# sql - SQL：将更新与分组结合起来？

> ID：10187799
> 
> 赞同：0
> 
> 时间：2012-04-17T08:35:01.330
> 
> 标签：sql, group-by, hsqldb

我有两张桌子：

`events`：

```
mac | na
----------
abc | (null)
abc | (null)
def | (null) 
```

`enrichments`：

```
mac | na  | timestamp
---------------------
abc | na1 | 1
abc | na2 | 2
abc | na3 | 3
def | na4 | 1 
```

现在我想`events.na`用 中的值更新列`enrichments.na`，其中`mac`匹配，并且是那个特定`timestamp`的最大值。`timestamp``mac`

对于此示例，结果将是：

```
abc | na3
abc | na3
def | na4 
```

最有效的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:45:01.597

这应该适用于使用公用表表达式的 SQL Server

```
create table events (mac nvarchar(3), na nvarchar(3))
insert into events values ('abc',null);
insert into events values ('abc',null);
insert into events values ('def',null);

create table enrichments (mac nvarchar(3), na nvarchar(3), timestamp int)
insert into enrichments values ('abc','na1',1)
insert into enrichments values ('abc','na2',2)
insert into enrichments values ('abc','na3',3)
insert into enrichments values ('def','na4',1)

with latestEnrichment (mac, latestTimestamp) as
    (select mac, MAX(timestamp)
    from    enrichments
    group by mac)
update  events
set     na = en.na
from    events e join enrichments en on e.mac = en.mac
        join latestEnrichment le on en.timestamp = le.latesttimestamp and
        en.mac = le.mac 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:16:52.163

```
UPDATE events AS e
SET na = 
    ( SELECT n.na
      FROM enrichments AS n
      WHERE n.mac = e.mac
      ORDER BY n.timestamp DESC
      FETCH FIRST 1 ROWS ONLY
    ) 
```

# .net - IntelliLock 1.5 试图加载格式不正确的程序。（来自 HRESULT 的异常：0x8007000B）

> ID：10187800
> 
> 赞同：1
> 
> 时间：2012-04-17T08:35:04.967
> 
> 标签：.net, prism, intellilock

在 IntelliLock 1.5 中，我的 dll 的 prism 模块之一停止加载（统一）后，错误消息是：“尝试加载格式不正确的程序。（HRESULT 异常：0x8007000B）”</p>

首先，我引用了包含一些共享对象的可移植库（.net，Silverlight 4）。错误类似于“无法加载引用的库 System.Windows”，尽管可移植库中没有 UI，也没有引用 System.Windows dll。但是经过半天的调整 IntelliLock 并试图找出问题所在，统一性开始下降，出现“尝试加载格式不正确的程序。（HRESULT 异常：0x8007000B）”错误。

首先，我想到了引用可移植 dll 的问题。我用普通的.net 替换了这个库，但错误仍然是一样的。

我正在使用 .Net 4 客户端配置文件。WPF，C#，棱镜 4，统一。

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:23:10.403

我们前段时间遇到了类似的（??）问题，所以我建议：

1）检查是否所有依赖项都满足。运行 DependencyWalker 并检查是否有红线 - 没有遗漏（请阅读一些文档，因为有时它会将 IEShims.dll 标记为丢失**但您不需要它**） - 正确使用**正确****版本**的 DependecyWalker (x86/x64)补偿

 **2）Denis Kucherov 已经很难过：检查父和/或子（依赖）对象是**如何编译的。**一旦我们尝试在 x64 位机器上使用默认编译为“任何 CPU”的 .NET 项目，通过引用为 x86 编译的 C++ DLL 加载 - 不行 -> 异常、异常、崩溃......

3)*核心级别*- 从 Sysinternals 运行[进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645)并检查是否有任何丢失/未找到的错误（如果有）。有时这是一个冗长的列表...

我猜你试图加载的 DLL 实际上加载正常，但它本身依赖于其他一些不存在的 DLL

PS您提到.Net客户端配置文件-只需使用完整的.NET Framework尝试一次并检查它是否有帮助-如果有帮助-仔细检查目标comp中安装的.NET客户端配置文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:04:29.397

正如 Rup 所建议的，这完全是一个 InTelliLock 错误。我设法通过禁用某些库的锁定设置来克服它。好消息是问题在于锁定逻辑而不是混淆。花了几天时间来解决问题。

我仍然没有得到支持团队的任何答复，正如之前所说，我实际上并没有预料到。**

# android - 具有多行 android API 级别 8 的 EditText

> ID：10187802
> 
> 赞同：2
> 
> 时间：2012-04-17T08:35:10.297
> 
> 标签：android, android-layout, android-edittext

我有一个问题：
使用这个 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical">
    <EditText android:id="@+id/nomenota"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>
    <EditText android:id="@+id/corponota"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:inputType="textMultiLine"/>
    <TableLayout   
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
        <TableRow >
        <Button android:id="@+id/visualizza_notaOK"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/notaOK"/>
        <Button android:id="@+id/nota_annulla"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/nuovanotaannulla"/>
    </TableRow>
</TableLayout> 
```

我的活动显示如下：
![在此处输入图像描述](../Images/0ed731eb875e1fd63a1b71bd0ceca7ff.png)

如您所见，我的消息正文以一个大的编辑文本为中心，我不想要这个结果。
我想要的结果就像这个链接：[我想要实现的布局链接](http://www.google.it/imgres?q=notepad%20android&hl=it&sa=X&biw=1280&bih=705&tbm=isch&prmd=imvnsa&tbnid=mEaGtT4AndO8IM:&imgrefurl=http://www.androidtapp.com/ak-notepad/&docid=Wedo4L2DuIs1DM&imgurl=http://cdn.androidtapp.com/wp-content/uploads/2009/01/ak-notepad-new-note.jpg&w=480&h=320&ei=hCqNT9vLOs3OswaPgZmXCQ&zoom=1&iact=rc&dur=570&sig=102238338620115758561&page=1&tbnh=140&tbnw=210&start=0&ndsp=20&ved=1t:429,r:0,s:0,i:66&tx=105&ty=90)

有人可以帮助我吗？
提前致谢。
马可。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T08:59:12.167

在edittext中应用此属性`android:gravity="top"`

# cocoa - 使用 IKImageBrowserView 快速查看

> ID：10187803
> 
> 赞同：2
> 
> 时间：2012-04-17T08:35:11.070
> 
> 标签：cocoa, quicklook, ikimagebrowserview

我知道可以将 IKImageBrowserView 设置为控制 QuickLook 面板，但是如何以编程方式显示该面板？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T19:38:43.943

```
[ik.window makeFirstResponder:ik];
QLPreviewPanel *panel = [QLPreviewPanel sharedPreviewPanel];
[panel updateController];
[panel makeKeyAndOrderFront:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T19:24:08.547

只要您的`-[IKImageBrowserItem imageRepresentationType]`退货`IKImageBrowserNSURLRepresentationType`或`IKImageBrowserPathRepresentationType`，您所要做的就是设置 `-[IKImageBrowserView setCanControlQuickLookPanel:YES]` ，然后您将获得 QuickLook 支持。

但是，如果 dataSoure 返回项既不是 URL 也不是路径，您还必须`QLPreviewItem`在子类中实现协议`IKImageBrowserView`并返回自定义单元格的请求 URL。

请参阅：[IKImageBrowserView 类参考](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/IKImageBrowserView/IKImageBrowserView_Reference.html)以获取更多详细信息

# c# - 如何从列表视图生成 xml 文件？

> ID：10187808
> 
> 赞同：0
> 
> 时间：2012-04-17T08:35:30.007
> 
> 标签：c#, xml, visual-studio-2010, listview

我有一个列表视图，其中包含 `Details`视图模式下的数据。所以现在我的任务是备份我从列表视图中选择的数据并创建 .xml 文件。我创建了一个“导出”按钮并在`export_Click`事件处理程序中放置了一个打开“SaveFileDialog”的代码。现在任何人都可以为我提供逻辑实现从`"export_Click`“事件处理程序”中的列表视图中选择的数据创建 .xml 文件的任务。这是现有应用程序中使用的列表视图代码位。

```
public class TrevoListView : System.Windows.Forms.ListView, IEditable
public class BaseLVItem : System.Windows.Forms.ListViewItem
      public TrevoListView ListView
      {
         get{ return t_listView; }
      } 
```

如果我通过使用 foreach 循环进行迭代，我将得到如下所示的每个对象，但我真的坚持我可以为创建 xml 做些什么逻辑？

```
foreach(BaseLVItem item in ListView.SelectedItems) 
```

还有一件事，listivew 中显示的所有数据都来自父 xml 文件。服务器将序列化这些 xml 并将其发送到 GUI 以在列表视图等控件中显示，我们还有 dataschema "TrevoDataSchema.xsd" 我需要在辅助`export_Click`事件处理程序中使用 XDocument 或任何其他逻辑吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:44:17.383

您可以使用 LINQ to XML 中的 XDocument 并从 ListItems 创建一个 XML 文件，如本答案所示[https://stackoverflow.com/a/4067146/64497](https://stackoverflow.com/a/4067146/64497)

并使用

```
XDocument.Save(filename) 
```

要保存 xml 文件，`filename`这里是返回的名称`SaveFileDialog`

# html - 如何在我的列表项之间插入间距？

> ID：10187812
> 
> 赞同：3
> 
> 时间：2012-04-17T08:36:05.787
> 
> 标签：html, css

嗨，我想在这两个块之间添加空间： ![在此处输入图像描述](../Images/90f734755e91c131836654c3e734c93c.png)

我当前的显示几乎是正确的，但它没有块之间的空间： ![在此处输入图像描述](../Images/01dda09e3026b2fbb4d3d615a01e642d.png)

代码是

```
<div class="data-box">   
            <div class="personName"><strong>    
                1\. Joey Tempest&nbsp;
             </strong></div> 
        <div class="otherDetails"></div> 

        <table border="0"><tr><td></td><td>Telefon</td><td></td></tr>
        <tr><td></td><td>Fax</td><td></td></tr>
        <tr><td></td><td>E-post</td><td></td></tr>
        <tr><td>Sverige                                           </td><td>Referens</td><td></td></tr>
        </table> 

    </div>  

    <div class="clear"></div>
    <div class="fl10"></div>

        <div class="data-box">   
            <div class="personName"><strong>    
                2\. Tone Norum&nbsp;
             </strong></div> 
        <div class="otherDetails"></div> 

        <table border="0"><tr><td></td><td>Telefon</td><td></td></tr>
        <tr><td></td><td>Fax</td><td></td></tr>
        <tr><td></td><td>E-post</td><td></td></tr>
        <tr><td>Sverige                                           </td><td>Referens</td><td></td></tr>
        </table> 

    </div> 
```

我可以只插入一个`<br>`，然后会出现一个空格。这是一个好的解决方案吗？ ![在此处输入图像描述](../Images/a58099e4aba6b5fc957188f0833ea956.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:42:16.813

不，添加`<br />`不是一个好的解决方案。你应该给你的数据框div提供margin-bottom：

```
div.data-box{
    margin-bottom: 10px;
} 
```

如果你需要最后一个 div 没有边距，你也可以定义它。

这是工作小提琴（抱歉缺乏设计，您没有指定css代码。） [http://jsfiddle.net/DCuKm/1/](http://jsfiddle.net/DCuKm/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:39:01.437

为您的部门添加保证金。

```
.data-box {
    margin-bottom: 10px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T08:42:50.810

我认为您想为`data-box`div 添加底部边距。

IE

```
div.data-box {
    margin-bottom: 5px;
} 
```

这通常是比休息更好的解决方案，因为它更灵活。

见：http: [//jsfiddle.net/6PZnC/](http://jsfiddle.net/6PZnC/)

# session - Zope 2 冲突较少的会话管理器

> ID：10187813
> 
> 赞同：2
> 
> 时间：2012-04-17T08:36:07.503
> 
> 标签：session, zope, zodb

Zope2 会话文档：“冲突错误将由 Zope 自动重试，最终用户永远不会看到。”

然而，尽管我认为我拥有适合高流量部署的最佳设置（ZEO 上会话数据的临时存储，由四个客户端共享，具有相同设置的 zope 实例），最终用户仍然会收到数据库冲突错误。

搜索邮件列表，这似乎是 Zope 基于 OOBTree 实现会话数据的常见问题。有人建议使用 repoze.session，但自 2009 年以来就不受支持。

修复 BTree / TransientObject 冲突错误的任何其他方法？我是否必须更改 session_data 的默认设置（数据对象超时值、超时分辨率、最大子对象数）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T13:43:43.533

[我认为您最好的选择是通过Products.BeakerSessionDataManager](https://pypi.python.org/pypi/Products.BeakerSessionDataManager)将会话实现切换为使用 Beaker 。它是默认 Zope2 会话管理器的直接替代品，但在高负载下性能要好得多，而且肯定不会受到 ConflictErrors 的影响。

# android - 如何在新屏幕中为 android webview 打开 url 并在返回键时返回上一页？

> ID：10187817
> 
> 赞同：1
> 
> 时间：2012-04-17T08:36:34.070
> 
> 标签：android, webview, android-webview, android-browser

为了我自己的理解，我正在尝试学习和实现 android Webview。

作为其中的一部分，我希望我的 Webview 表现得像 android 浏览器。这样每个网址都可以在新屏幕中启动。

例如，如果单击页面 A 上的某个 url，那么它应该在新屏幕中打开，单击此屏幕上的任何 url 将启动新屏幕，依此类推。

我想像默认浏览器一样导航回返回键上的上一页。

如果有人以前这样做过，我需要关于我的方法的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:50:41.917

返回上一页的按钮是 .goback() 和

```
@Override   
public void onBackPressed(){
if(history is not null)
webview.goBack();
    else
     finish();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T09:19:12.510

检查[这一点](https://stackoverflow.com/a/10121273/1075066) 并做一些事情，只需使用带有标志“开始新活动”和动作作为 action.view 的意图

# python - 如何在 Python 中获取当前 URL 或将 BeautifulSoup 附加到当前 URL

> ID：10187818
> 
> 赞同：1
> 
> 时间：2012-04-17T08:36:44.840
> 
> 标签：python, beautifulsoup

我是 Python 新手，我正在尝试使用 BeautifulSoup 解析 HTML 页面并提取一些内容。我遇到的问题是我需要解析的 URL 是动态的，所以我不能像 BeautifulSoup 展示的所有示例一样将它硬编码到 urllib2.urlopen 中。

我试图使用 SELF 从浏览器中提取当前 URL，但我无法让它工作。谁能发布一个示例，说明如何使用 SELF 从浏览器中提取当前 URL，或者如何将 BeautifulSoup 附加到当前 URL？

任何帮助将不胜感激。

到目前为止，这是我的代码：

```
import os
import time

import win32api
import win32com.client
import win32con

from pywinauto import application

class A(object):
  def __init__(self):
    self.x = self.request.url

  def method_a(self):
    print self.x

#start IE with a start URL of what was passed in
app = application.Application()
app.Start(r"c:\program files\internet explorer\iexplore.exe %s"% "http://www.cyclestreets.net/journey")
time.sleep(3)
#ie = app.window_(title_re = "CycleStreets Cycle journey planner")
ie = app.window_(title_re = ".*CycleStreets.*")

a = A()
a.method_a() 
```

当我运行它时，我收到一条消息说 AttributeError: 'A' object has no attribute 'request'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-25T04:30:46.590

您可以使用 urllib 获取当前 url，参见下面的示例：

```
from urllib import request,response
url = "http://www.example.com"
response=request.Request(url,headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.71 Safari/537.36'})
print(response.get_full_url()) 
```

这可能对你有帮助！......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:57:43.430

想想你已经有点糊涂了。在你的“A”类中，你有这个：

```
class A(object):
  def __init__(self):
    self.x = self.request.url 
```

您在其中将 x 的值设置为 init 函数中的 self.request.url。这就是抱怨，因为此时您的对象中不存在 self.request 。

# web - HypeDNS 等应用程序如何解析自定义域和标准域？

> ID：10187820
> 
> 赞同：1
> 
> 时间：2012-04-17T08:37:00.923
> 
> 标签：web, dns

如果您不知道，[HypeDNS](https://wiki.projectmeshnet.org/HypeDNS)是[一个用 Perl 编写的应用程序](http://svn.mg2.org/projects/pco/browser/trunk/net/node_info/script/hypedns.pl)，可将 .hype 域解析为 Hyperboria 节点。我想知道的是如何解析这些自定义 .hype 域以及如何解析标准域（.com、.net、.org 等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:46:41.463

> 服务器首先查找存储在 NodeInfo 数据库中的名称，如果找到，则返回地址（如果反转，则返回名称！） 匆忙！如果未找到该域，或者它是对 A 记录 (IPv4) 的请求，则该查询将被转发到 Mikey 的本地名称服务器 ns03.mg2.org 或 ns04.mg2.org。

事实证明，HypeDNS 转发 DNS 请求，这意味着如果它无法解析查询，它将转发给其他服务器，然后返回它们的响应。

# android - Android：倒计时和格式化时间

> ID：10187822
> 
> 赞同：0
> 
> 时间：2012-04-17T08:37:03.800
> 
> 标签：android, time, countdown

我有一个以毫秒为单位的数据，并且使用 CountDown 类我会以这种格式显示时间：天：小时：分钟：秒。如果我做毫秒 / 1000 我有总秒 如果我做 (毫秒 / 1000) / 60 我有总分钟等但是我怎样才能以这种格式显示倒计时：2天：21小时：56分钟：00秒

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:33:26.867

我认为您需要使用 mod (%) 运算符从每个部门中提取余数。

这个怎么样：

```
final long SEC_PER_DAY = 24 * 60 * 60;
final long SEC_PER_HOUR = 60 * 60;
final long SEC_PER_MIN = 60;

public void onTick(long millis) {
    long tot_sec   = millis/1000;
    long rem_days  = tot_sec / SEC_PER_DAY;
    long rem_hours = (tot_sec % SEC_PER_DAY) / SEC_PER_HOUR;
    long rem_mins  = ((tot_sec % SEC_PER_DAY) % SEC_PER_HOUR) / SEC_PER_MIN;
    long rem_secs  = ((tot_sec % SEC_PER_DAY) % SEC_PER_HOUR) % SEC_PER_MIN;

    // and then format as you please...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:50:33.897

您应该使用 DateFormat 或 SimpleDateFormat，请参阅[http://developer.android.com/reference/java/text/DateFormat.html](http://developer.android.com/reference/java/text/DateFormat.html)

首先，您应该将毫秒转换为日期。

```
Date date = new Date();
date.setTime(millis); 
```

然后您可以使用 DateFormat 将时间戳格式化为人类可读的字符串。

# javascript - 为什么 splice() 方法会改变其他数组的值？

> ID：10187824
> 
> 赞同：3
> 
> 时间：2012-04-17T08:37:15.957
> 
> 标签：javascript, arrays, splice

我有一个数组说

```
var list = ["first", "second"]; 
```

现在我将列表分配给其他一些变量说

```
var temp = list; 
```

**现在当我在列表**上使用拼接时

```
list.splice(0,1); 
```

现在，当我检查列表的值时，它显示

```
list = ["second"] 
```

另外，当我检查 temp 的值时，它会说

```
temp = ["second"] 
```

我想知道为什么会这样？为什么**temp**的值会改变？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T08:39:04.663

当您像`var temp = list`创建`temp`对`list`. 因此，由于就地[`splice`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)更改`list`数组，您也在更改`temp`

使用[slice](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)代替它返回数组的副本，就像这样

```
var temp = list.slice(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:42:18.367

JS中的一个常见错误

这是一个指针，而不是对象的克隆：

```
var temp = list; 
```

如果要实际复制对象，有几种方法。最简单的就是将其与自身连接：

```
var temp = list.concat([]);
// or
var temp = list.slice(); 
```

请注意，这有点危险，它只能从数组中获取基值。克隆对象和创建“完美”数组克隆有更高级的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T08:42:56.110

[片](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)

应该做的伎俩：

`var temp = list.slice(0);`

关于对象克隆，请看这里[How do clone an Array of Objects in Javascript？](https://stackoverflow.com/questions/597588/how-do-you-clone-an-array-of-objects-in-javascript)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T08:48:37.650

您可以使用原型方法来添加此功能。

```
Object.prototype.clone = function() {
  var newObj = (this instanceof Array) ? [] : {};
  for (i in this) {
    if (i == 'clone') continue;
    if (this[i] && typeof this[i] == "object") {
      newObj[i] = this[i].clone();
    } else newObj[i] = this[i]
  } return newObj;
}; 
```

然后允许您执行此操作：

```
var a = [1,2,3];

var b = a.clone();

a[1] = 5;

console.log(a); //1,5,3
console.log(b); //1,2,3 
```

免责声明：无耻地从这里借来（整篇文章值得一读）： http: [//my.opera.com/GreyWyvern/blog/show.dml/1725165](http://my.opera.com/GreyWyvern/blog/show.dml/1725165)

# apache2 - Apache 2：多个网站共享同一个域

> ID：10187828
> 
> 赞同：0
> 
> 时间：2012-04-17T08:37:44.970
> 
> 标签：apache2, virtualhost

目前我已经设置了一个运行在 ubuntu 11.04 上的 apache 2 网络服务器，使用乘客服务于 rails 应用程序。因此，我有多个将在该服务器上运行的应用程序。

我只获得了 1 个 IP 地址 (111.222.333.444)，无法自行为子域创建 CNAME。

**问题 ：**

有没有办法配置 apache2 可以通过这种方式访问​​多个应用程序：

111.222.3333.4444/app1 => 这将指向 app1
111.222.3333.4444/app2 => 这将指向 app2
111.222.3333.4444/app3 => 这将指向 app3

感谢人们！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-11T12:43:58.800

您可以使用 apache vhost 通过域名或端口号指向每个应用程序

[https://httpd.apache.org/docs/2.0/vhosts/examples.html](https://httpd.apache.org/docs/2.0/vhosts/examples.html)

# windows-phone-7 - WP7 Listpicker 未显示所有项目

> ID：10187829
> 
> 赞同：2
> 
> 时间：2012-04-17T08:37:54.680
> 
> 标签：windows-phone-7, silverlight-toolkit, listpicker

我有一个项目需要将字符串列表绑定到 listpicker 控件。绑定完成后（在 Loaded 或 OnNavigatedTo 事件中），listpicker 打开以显示绑定的项目，但有些项目随机丢失（在全屏模式下）。当列表选择器开始关闭时，丢失的项目似乎出现了。不知道为什么会发生这种情况 - 是列表选择器错误还是我绑定不正确？我正在使用 2011 年 11 月发布的 silverlight 工具包。

PS：使用少量项目（最多10个）时似乎不会发生此问题

请使用以下代码重新创建问题

主页 XAML

```
 <TextBlock Text="Time of Day" Grid.Row="0" Margin="12,0,0,0" Style="{StaticResource PhoneTextNormalStyle}" />
        <toolkit:ListPicker x:Name="TimesOfDayList" Grid.Row="1" SelectionMode="Multiple" FullModeHeader="Time of Day"
                                    ExpansionMode="FullScreenOnly" ItemsSource="{Binding TimesOfDay}" 
                                    Margin="12,0,12,12">
            <toolkit:ListPicker.FullModeItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding}" Margin="24,0,0,0" Style="{StaticResource PhoneTextLargeStyle}" />
                </DataTemplate>
            </toolkit:ListPicker.FullModeItemTemplate>
        </toolkit:ListPicker>
    </Grid> 
```

后面的主页代码

```
private MainPageViewModel _viewModel;

    public MainPage()
    {
        InitializeComponent();
        Loaded += MainPage_Loaded;
        TimesOfDayList.SummaryForSelectedItemsDelegate = TimesOfDaySummary;
    }

    void MainPage_Loaded(object sender, System.Windows.RoutedEventArgs e)
    {
        _viewModel = new MainPageViewModel();
        DataContext = _viewModel;
    }

    private string TimesOfDaySummary(IList items)
    {
        string itemNames = string.Empty;

        if (items != null && items.Count > 0)
        {
            var itemsList = items.Cast<string>().AsQueryable();
            foreach (var item in itemsList)
            {
                if (item != itemsList.Last())
                    itemNames += item + ", ";
                else
                    itemNames += item;
            }
        }

        return itemNames;
    } 
```

视图模型类

```
public class MainPageViewModel : INotifyPropertyChanged
{
    public MainPageViewModel()
    {
        TimesOfDay = new List<string>
                          {
                              "12:00 AM",
                              "12:30 AM",
                              "01:00 AM",
                              "01:30 AM",
                              "02:00 AM",
                              "02:30 AM",
                              "03:00 AM",
                              "03:30 AM",
                              "04:00 AM",
                              "04:30 AM",
                              "05:00 AM",
                              "05:30 AM",
                              "06:00 AM",
                              "06:30 AM",
                              "07:00 AM",
                              "07:30 AM",
                              "08:00 AM",
                              "08:30 AM",
                              "09:00 AM",
                              "09:30 AM",
                              "10:00 AM",
                              "10:30 AM",
                              "11:00 AM",
                              "11:30 AM",
                              "12:00 PM",
                              "12:30 PM",
                              "01:00 PM",
                              "01:30 PM",
                              "02:00 PM",
                              "02:30 PM",
                              "03:00 PM",
                              "03:30 PM",
                              "04:00 PM",
                              "04:30 PM",
                              "05:00 PM",
                              "05:30 PM",
                              "06:00 PM",
                              "06:30 PM",
                              "07:00 PM",
                              "07:30 PM",
                              "08:00 PM",
                              "08:30 PM",
                              "09:00 PM",
                              "09:30 PM",
                              "10:00 PM",
                              "10:30 PM",
                              "11:00 PM",
                              "11:30 PM"
                          };
    }

    private List<string> _timesOfDay;
    public List<string> TimesOfDay
    {
        get { return _timesOfDay; }
        set
        {
            if(_timesOfDay != value)
            {
                _timesOfDay = value;
                OnPropertyChanged("TimesOfDay");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:44:21.990

我复制了您的代码并遇到了同样的问题。只需`Style="{StaticResource PhoneTextLargeStyle}"`从

```
<DataTemplate>
<TextBlock Text="{Binding}" Margin="24,0,0,0" />
</DataTemplate> 
```

看起来它解决了这个问题。然而，这是一种奇怪的行为，它的来源来自 Style 属性。

我将尝试其他可能性，如果我能找到其他信息，我会告诉你。

问候，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:15:58.570

我已经向项目 [http://www.codeplex.com/Download?ProjectName=silverlight&DownloadId=375366](http://www.codeplex.com/Download?ProjectName=silverlight&DownloadId=375366)提交了一个补丁， 描述如下：

导航到完整的选择器页面时存在竞争条件，其中具有动画 RotationX 属性以旋转它们的项目可能在调用 UpdateOutOfViewItems 委托之前已移出屏幕。

因此，某些项目可以保持 -90 的 RotationX。

我的解决方案是在创建动画时将视图中的项目列表传递给 UpdateOutOfView 项目，而不是在委托最终运行时收集可见的项目。

[http://www.codeplex.com/Download?ProjectName=silverlight&DownloadId=375366](http://www.codeplex.com/Download?ProjectName=silverlight&DownloadId=375366)是修复错误所需的更新 ListPickerPage.xaml.cs 文件。

# java - 如何将 JRDataSource 用于 jasper 报告

> ID：10187833
> 
> 赞同：2
> 
> 时间：2012-04-17T08:38:15.627
> 
> 标签：java, spring, jasper-reports

以前我将连接对象发送到*`fillReport()`*of*`JasperFillManager`*类。它工作正常，它也在生成数据。下面是我用于数据库连接的代码。

```
Connection conn = null; 
Class.forName("com.mysql.jdbc.Driver"); 
conn = (Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/dbname", "username", "password"); 
```

但是现在我不想将连接对象传递给*`fillReport()`*我想传递JRDataSource。我怎样才能做到这一点？如何*`JRDataSource`*在我的 spring 配置文件中使用 mysql 数据库信息进行配置？谁能告诉我。

我正在使用`iReport 4.5.0`和`Spring 3.0.5 RELEASE`。如果你想要更多的信息，我会给你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T07:44:21.563

您可以使用 conn 从数据库中获取结果集。然后，您将使用 JRResultSetDataSource 来实例化数据源。

```
 Connection con = getConnection();
        PreparedStatement statement = con.prepareStatement(jdbcString.toString());
        ResultSet rs = statement.executeQuery();
        jrDataSource = new JRResultSetDataSource(rs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T06:11:59.530

```
JasperReport report 
   = (JasperReport)JRLoader.loadObject(
       "F:\\Tomcat 7.0\\webapps\\ivmreports\\jasper\\FailedInsertionEventsPDF.jasper");
// Map<String, Object> parameterMap = new HashMap<String, Object>();
JasperPrint print = JasperFillManager.fillReport(report, parameterMap, reportData); 
```

这里报告数据是`JRDatasource`

# iphone - 如何在另一个数组变量中传递两个数组变量以在iphone中搜索

> ID：10187834
> 
> 赞同：0
> 
> 时间：2012-04-17T08:38:16.857
> 
> 标签：iphone, objective-c

我有两个数组，我将这两个数组插入另一个数组，用于在 tableview 单元格上显示数据，但如何从第一个数组中获取名称并从第二个数组中报告

例如：我正在这样做

```
NSMutableArray *myArray = [[NSMutableArray alloc]      initWithObjects:self.ListOfname,self.ListOfpeople,nil];

    [self.list addObjectsFromArray:myArray]; 
```

在 myArray 中，我在这里传递了两个数组第一个 listofname 和第二个 listofpeople

我的 self.ListOfname 数组变量值来自这个类 Namecontroler.m 我的 self.ListOfpeople 数组变量值来自这个类 Peoplecontroller.m

所以我的问题是如何检索此类值并通过一个数组在 tableview 单元格上打印我在 indexpath 的行的单元格上执行此操作这适用于显示值

```
Namecontrooler*Name=(Namecontrooler*)[self.list  objectAtIndex:indexPath.row];
Peoplecontroller*people=(Peoplecontroller*)[self.list objectAtIndex:indexPath.row]; 
```

在这里我没有得到如何在 tableview 单元格中显示两个类值请在这里帮助我如何做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:52:51.543

我认为你的 self.list 只包含两个对象 1>ListOfName 2>ListOfPeople 。所以在访问 indexPath.row 索引处的对象之前，首先取出你想要的两个对象，然后参考 indexPath.row 取出对象特定对象。

# java - Spring MVC 响应体

> ID：10187835
> 
> 赞同：0
> 
> 时间：2012-04-17T08:38:21.483
> 
> 标签：java, web-services, spring, rest, spring-mvc

[遵循Krams](http://krams915.blogspot.co.uk/2011_02_26_archive.html)的例子。下面返回什么，Person 对象会根据提交请求的标头转换为 JSON 还是 XML？

```
 @RequestMapping(value = "/person", 
           method = RequestMethod.POST, 
           headers="Accept=application/xml, application/json")
 public @ResponseBody Person addPerson(@RequestBody Person person) {
     logger.debug("Provider has received request to add new person");

     // Call service to here
     return personService.add(person);
    } 
```

因此，当我将数据作为 json 提交时，我会返回 json，对于 xml 也是如此。还是发生了其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:40:50.823

这取决于`Accept`http请求标头。如果是 json，你会得到 json，如果是 xml，你会得到 xml。

这正是您的代码的这一部分所说的。：

```
....
headers="Accept=application/xml, application/json")
... 
```

您可以发送一种 mime 类型并毫无问题地接收另一种类型。

**编辑**

`headers`和`produces`/`consumes`参数都只说明请求映射**可以**产生/消耗什么。他们不强制任何特定的序列化。请求/响应的类型完全由请求标头决定。如果调度程序没有找到与请求标头匹配的`produces`和`consumes`（或标头）映射，您将收到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T21:03:50.180

@RequestMapping 的“headers”、“produces”和“consumes”参数是拼图的一部分。它们帮助框架路由传入请求，并根据标头中的值区分请求。

这个难题的另一部分是在应用程序中配置的一组[MessageConverters 。](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/remoting.html#rest-message-conversion)示例中的控制器处理程序方法只是返回一个对象，框架需要知道如何将对象转换为某种文本表示形式（即 XML 或 JSON）。MessageConverters 用于入站端（在使用@RequestBody 注释的参数上）和出站端（当方法返回值使用@ResponseBody 注释时）。框架根据传入请求的媒体类型选择适当的 MessageConverter。

在 Spring XML 配置文件中使用 <mvc:annotation-driven> 命名空间时，或在 Java Config 类上使用 @EnableMvc 注解时，支持 JSON 和 XML 并自动配置的 MessageConverters。

# c# - C# .net 4 中的 XML 解析

> ID：10187836
> 
> 赞同：0
> 
> 时间：2012-04-17T08:38:23.247
> 
> 标签：c#, xml-parsing

我有以下 xml 如何读取 xml 以获取这样的 Sura 节点列表

* * *

```
var Suras = XMLNodes **//how to use xpath to load xmlnodes of sura**

foreach (var sura in suras)
{
    var ayas =  sura. **//how to use xpath to load xmlnodes of aya for this sura node**
} 
```

* * *

XML

```
<?xml version="1.0" encoding="utf-8" ?>
<quran>
  <sura index="1" name="الفاتحة">
    <aya index="1" text="In the name of Allah, the Entirely Merciful, the Especially Merciful."/>
    <aya index="2" text="[All] praise is [due] to Allah, Lord of the worlds -"/>
  </sura>
  <sura index="114" name="الناس">
    <aya index="1" text="Say, &quot;I seek refuge in the Lord of mankind,"/>
    <aya index="2" text="The Sovereign of mankind."/>
    <aya index="3" text="The God of mankind,"/>
    <aya index="4" text="From the evil of the retreating whisperer -"/>
    <aya index="5" text="Who whispers [evil] into the breasts of mankind -"/>
    <aya index="6" text="From among the jinn and mankind.&quot;"/>
  </sura>
</quran> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:41:02.583

您是否*特别*想使用 XPath？我只是使用 LINQ to XML：

```
XDocument doc = XDocument.Load("file.xml");
var suras = doc.Root.Elements("sura");
foreach (var sura in suras)
{
    var ayas = suras.Elements("aya");
    ...
} 
```

# powershell - 从 PowerShell 向用户授予 SeServiceLogonRight

> ID：10187837
> 
> 赞同：11
> 
> 时间：2012-04-17T08:38:25.663
> 
> 标签：powershell

在我目前正在编写的脚本中，我创建了一个专用用户来启动我们内部开发的一些 Windows 服务。为了启动这些服务，我们的“专用”用户需要 SeServiceLogonRight 权限。目前，我使用 ntrights.exe 通过我的 PowerShell 脚本中的以下调用来分配该权限：

```
{.$global:RootInstallDir\..\Common\SupportTools\ntrights.exe -m $env:COMPUTERNAME -u $HealthLinkUser +r SeServiceLogonRight } 
```

但是，我对此并不满意。使用 PowerShell 必须有一种更简洁的方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-10-04T16:34:34.817

该脚本包含运行良好且没有任何依赖关系的函数：

[https://gallery.technet.microsoft.com/scriptcenter/Grant-Revoke-Query-user-26e259b0](https://gallery.technet.microsoft.com/scriptcenter/Grant-Revoke-Query-user-26e259b0)

除此之外，这是您问题的具体解决方案：

```
function Add-ServiceLogonRight([string] $Username) {
    Write-Host "Enable ServiceLogonRight for $Username"

    $tmp = New-TemporaryFile
    secedit /export /cfg "$tmp.inf" | Out-Null
    (gc -Encoding ascii "$tmp.inf") -replace '^SeServiceLogonRight .+', "`$0,$Username" | sc -Encoding ascii "$tmp.inf"
    secedit /import /cfg "$tmp.inf" /db "$tmp.sdb" | Out-Null
    secedit /configure /db "$tmp.sdb" /cfg "$tmp.inf" | Out-Null
    rm $tmp* -ea 0
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-17T09:19:10.633

这对我有用。您可以决定哪个更干净；-) 关键是 LsaAddAccountRights windows API 函数。

```
Add-Type @'
using System;
using System.Collections.Generic;
using System.Text;

namespace MyLsaWrapper
{
    using System.Runtime.InteropServices;
    using System.Security;
    using System.Management;
    using System.Runtime.CompilerServices;
    using System.ComponentModel;

    using LSA_HANDLE = IntPtr;

    [StructLayout(LayoutKind.Sequential)]
    struct LSA_OBJECT_ATTRIBUTES
    {
        internal int Length;
        internal IntPtr RootDirectory;
        internal IntPtr ObjectName;
        internal int Attributes;
        internal IntPtr SecurityDescriptor;
        internal IntPtr SecurityQualityOfService;
    }
    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    struct LSA_UNICODE_STRING
    {
        internal ushort Length;
        internal ushort MaximumLength;
        [MarshalAs(UnmanagedType.LPWStr)]
        internal string Buffer;
    }
    sealed class Win32Sec
    {
        [DllImport("advapi32", CharSet = CharSet.Unicode, SetLastError = true),
        SuppressUnmanagedCodeSecurityAttribute]
        internal static extern uint LsaOpenPolicy(
        LSA_UNICODE_STRING[] SystemName,
        ref LSA_OBJECT_ATTRIBUTES ObjectAttributes,
        int AccessMask,
        out IntPtr PolicyHandle
        );

        [DllImport("advapi32", CharSet = CharSet.Unicode, SetLastError = true),
        SuppressUnmanagedCodeSecurityAttribute]
        internal static extern uint LsaAddAccountRights(
        LSA_HANDLE PolicyHandle,
        IntPtr pSID,
        LSA_UNICODE_STRING[] UserRights,
        int CountOfRights
        );

        [DllImport("advapi32", CharSet = CharSet.Unicode, SetLastError = true),
        SuppressUnmanagedCodeSecurityAttribute]
        internal static extern int LsaLookupNames2(
        LSA_HANDLE PolicyHandle,
        uint Flags,
        uint Count,
        LSA_UNICODE_STRING[] Names,
        ref IntPtr ReferencedDomains,
        ref IntPtr Sids
        );

        [DllImport("advapi32")]
        internal static extern int LsaNtStatusToWinError(int NTSTATUS);

        [DllImport("advapi32")]
        internal static extern int LsaClose(IntPtr PolicyHandle);

        [DllImport("advapi32")]
        internal static extern int LsaFreeMemory(IntPtr Buffer);

    }
    /// <summary>
    /// This class is used to grant "Log on as a service", "Log on as a batchjob", "Log on localy" etc.
    /// to a user.
    /// </summary>
    public sealed class LsaWrapper : IDisposable
    {
        [StructLayout(LayoutKind.Sequential)]
        struct LSA_TRUST_INFORMATION
        {
            internal LSA_UNICODE_STRING Name;
            internal IntPtr Sid;
        }
        [StructLayout(LayoutKind.Sequential)]
        struct LSA_TRANSLATED_SID2
        {
            internal SidNameUse Use;
            internal IntPtr Sid;
            internal int DomainIndex;
            uint Flags;
        }

        [StructLayout(LayoutKind.Sequential)]
        struct LSA_REFERENCED_DOMAIN_LIST
        {
            internal uint Entries;
            internal LSA_TRUST_INFORMATION Domains;
        }

        enum SidNameUse : int
        {
            User = 1,
            Group = 2,
            Domain = 3,
            Alias = 4,
            KnownGroup = 5,
            DeletedAccount = 6,
            Invalid = 7,
            Unknown = 8,
            Computer = 9
        }

        enum Access : int
        {
            POLICY_READ = 0x20006,
            POLICY_ALL_ACCESS = 0x00F0FFF,
            POLICY_EXECUTE = 0X20801,
            POLICY_WRITE = 0X207F8
        }
        const uint STATUS_ACCESS_DENIED = 0xc0000022;
        const uint STATUS_INSUFFICIENT_RESOURCES = 0xc000009a;
        const uint STATUS_NO_MEMORY = 0xc0000017;

        IntPtr lsaHandle;

        public LsaWrapper()
            : this(null)
        { }
        // // local system if systemName is null
        public LsaWrapper(string systemName)
        {
            LSA_OBJECT_ATTRIBUTES lsaAttr;
            lsaAttr.RootDirectory = IntPtr.Zero;
            lsaAttr.ObjectName = IntPtr.Zero;
            lsaAttr.Attributes = 0;
            lsaAttr.SecurityDescriptor = IntPtr.Zero;
            lsaAttr.SecurityQualityOfService = IntPtr.Zero;
            lsaAttr.Length = Marshal.SizeOf(typeof(LSA_OBJECT_ATTRIBUTES));
            lsaHandle = IntPtr.Zero;
            LSA_UNICODE_STRING[] system = null;
            if (systemName != null)
            {
                system = new LSA_UNICODE_STRING[1];
                system[0] = InitLsaString(systemName);
            }

            uint ret = Win32Sec.LsaOpenPolicy(system, ref lsaAttr,
            (int)Access.POLICY_ALL_ACCESS, out lsaHandle);
            if (ret == 0)
                return;
            if (ret == STATUS_ACCESS_DENIED)
            {
                throw new UnauthorizedAccessException();
            }
            if ((ret == STATUS_INSUFFICIENT_RESOURCES) || (ret == STATUS_NO_MEMORY))
            {
                throw new OutOfMemoryException();
            }
            throw new Win32Exception(Win32Sec.LsaNtStatusToWinError((int)ret));
        }

        public void AddPrivileges(string account, string privilege)
        {
            IntPtr pSid = GetSIDInformation(account);
            LSA_UNICODE_STRING[] privileges = new LSA_UNICODE_STRING[1];
            privileges[0] = InitLsaString(privilege);
            uint ret = Win32Sec.LsaAddAccountRights(lsaHandle, pSid, privileges, 1);
            if (ret == 0)
                return;
            if (ret == STATUS_ACCESS_DENIED)
            {
                throw new UnauthorizedAccessException();
            }
            if ((ret == STATUS_INSUFFICIENT_RESOURCES) || (ret == STATUS_NO_MEMORY))
            {
                throw new OutOfMemoryException();
            }
            throw new Win32Exception(Win32Sec.LsaNtStatusToWinError((int)ret));
        }

        public void Dispose()
        {
            if (lsaHandle != IntPtr.Zero)
            {
                Win32Sec.LsaClose(lsaHandle);
                lsaHandle = IntPtr.Zero;
            }
            GC.SuppressFinalize(this);
        }
        ~LsaWrapper()
        {
            Dispose();
        }
        // helper functions

        IntPtr GetSIDInformation(string account)
        {
            LSA_UNICODE_STRING[] names = new LSA_UNICODE_STRING[1];
            LSA_TRANSLATED_SID2 lts;
            IntPtr tsids = IntPtr.Zero;
            IntPtr tdom = IntPtr.Zero;
            names[0] = InitLsaString(account);
            lts.Sid = IntPtr.Zero;
            Console.WriteLine("String account: {0}", names[0].Length);
            int ret = Win32Sec.LsaLookupNames2(lsaHandle, 0, 1, names, ref tdom, ref tsids);
            if (ret != 0)
                throw new Win32Exception(Win32Sec.LsaNtStatusToWinError(ret));
            lts = (LSA_TRANSLATED_SID2)Marshal.PtrToStructure(tsids,
            typeof(LSA_TRANSLATED_SID2));
            Win32Sec.LsaFreeMemory(tsids);
            Win32Sec.LsaFreeMemory(tdom);
            return lts.Sid;
        }

        static LSA_UNICODE_STRING InitLsaString(string s)
        {
            // Unicode strings max. 32KB
            if (s.Length > 0x7ffe)
                throw new ArgumentException("String too long");
            LSA_UNICODE_STRING lus = new LSA_UNICODE_STRING();
            lus.Buffer = s;
            lus.Length = (ushort)(s.Length * sizeof(char));
            lus.MaximumLength = (ushort)(lus.Length + sizeof(char));
            return lus;
        }
    }
    public class LsaWrapperCaller
    {
        public static void AddPrivileges(string account, string privilege)
        {
            using (LsaWrapper lsaWrapper = new LsaWrapper())
            {
                lsaWrapper.AddPrivileges(account, privilege);
            }
        }
    }
}
'@

[MyLsaWrapper.LsaWrapperCaller]::AddPrivileges("andy", "SeServiceLogonRight") 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-22T22:39:23.203

这确实应该是对安迪回答的评论，但我没有需要评论的代表。

提供的代码将访问已释放的内存——这可能“工作”（有时）但总是不好的做法。请参阅我对有关相同代码问题的另一个问题的回答：[为什么 LsaAddAccountRights 可能返回 STATUS_INVALID_PARAMETER？](https://stackoverflow.com/questions/1147914/why-might-lsaaddaccountrights-return-status-invalid-parameter/14469248#14469248)

似乎这段代码已经流传了好几年了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-30T18:06:19.190

使用 C# 调用系统 DLL 过程的 P/Invoke 技术基本相同，但这个示例可能更容易理解：

```
$code = @"
using System;
using System.Runtime.InteropServices;

 public class TokenManipulator
 {

  [DllImport("advapi32.dll", ExactSpelling = true, SetLastError = true)]
  internal static extern bool AdjustTokenPrivileges(IntPtr htok, bool disall,
  ref TokPriv1Luid newst, int len, IntPtr prev, IntPtr relen);

  [DllImport("kernel32.dll", ExactSpelling = true)]
  internal static extern IntPtr GetCurrentProcess();

  [DllImport("advapi32.dll", ExactSpelling = true, SetLastError = true)]
  internal static extern bool OpenProcessToken(IntPtr h, int acc, ref IntPtr
  phtok);

  [DllImport("advapi32.dll", SetLastError = true)]
  internal static extern bool LookupPrivilegeValue(string host, string name,
  ref long pluid);

  [StructLayout(LayoutKind.Sequential, Pack = 1)]
  internal struct TokPriv1Luid
  {
   public int Count;
   public long Luid;
   public int Attr;
  }

  internal const int SE_PRIVILEGE_DISABLED = 0x00000000;
  internal const int SE_PRIVILEGE_ENABLED = 0x00000002;
  internal const int TOKEN_QUERY = 0x00000008;
  internal const int TOKEN_ADJUST_PRIVILEGES = 0x00000020;

  public static bool AddPrivilege(string privilege)
  {
   try
   {
    bool retVal;
    TokPriv1Luid tp;
    IntPtr hproc = GetCurrentProcess();
    IntPtr htok = IntPtr.Zero;
    retVal = OpenProcessToken(hproc, TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, ref htok);
    tp.Count = 1;
    tp.Luid = 0;
    tp.Attr = SE_PRIVILEGE_ENABLED;
    retVal = LookupPrivilegeValue(null, privilege, ref tp.Luid);
    retVal = AdjustTokenPrivileges(htok, false, ref tp, 0, IntPtr.Zero, IntPtr.Zero);
    return retVal;
   }
   catch (Exception ex)
   {
    throw ex;
   }
  }

  public static bool RemovePrivilege(string privilege)
  {
   try
   {
    bool retVal;
    TokPriv1Luid tp;
    IntPtr hproc = GetCurrentProcess();
    IntPtr htok = IntPtr.Zero;
    retVal = OpenProcessToken(hproc, TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, ref htok);
    tp.Count = 1;

    tp.Luid = 0;
    tp.Attr = SE_PRIVILEGE_DISABLED;
    retVal = LookupPrivilegeValue(null, privilege, ref tp.Luid);
    retVal = AdjustTokenPrivileges(htok, false, ref tp, 0, IntPtr.Zero, IntPtr.Zero);
    return retVal;
   }
   catch (Exception ex)
   {
    throw ex;
   }
  }

 }
"@

add-type $code

"`nInitial privileges"
whoami /priv | Select-String "SeRestorePrivilege"
whoami /priv | Select-String "SeBackupPrivilege"
whoami /priv | Select-String "SeTakeOwnershipPrivilege"

"`nAdding privileges"
#Activate necessary admin privileges to make changes without NTFS perms
[void][TokenManipulator]::AddPrivilege("SeRestorePrivilege") #Necessary to set Owner Permissions
[void][TokenManipulator]::AddPrivilege("SeBackupPrivilege") #Necessary to bypass Traverse Checking
[void][TokenManipulator]::AddPrivilege("SeTakeOwnershipPrivilege") #Necessary to override FilePermissions 
whoami /priv | Select-String "SeRestorePrivilege"
whoami /priv | Select-String "SeBackupPrivilege"
whoami /priv | Select-String "SeTakeOwnershipPrivilege"

"`nRemoving privileges just added before terminating"
[void][TokenManipulator]::AddPrivilege("SeRestorePrivilege") #Necessary to set Owner Permissions
[void][TokenManipulator]::AddPrivilege("SeBackupPrivilege") #Necessary to bypass Traverse Checking
[void][TokenManipulator]::AddPrivilege("SeTakeOwnershipPrivilege") #Necessary to override 
whoami /priv | Select-String "SeRestorePrivilege"
whoami /priv | Select-String "SeBackupPrivilege"
whoami /priv | Select-String "SeTakeOwnershipPrivilege" 
```

这让我很困惑，并且有很多以“使用第 3 方”应用程序结尾的论坛主题示例。如果 .Net 包含这个必要的功能会很好，但是尽管此代码示例很长，但重现起来非常简单:) 干杯，Barnaby

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-03T16:52:16.487

这就是我解决它的方法：

依据：[本文](http://www.morgantechspace.com/2013/11/Set-or-Grant-Logon-As-A-Service-right-to-User.html)

你可以从这里下载[碳](http://get-carbon.org/)

首先导入 Carbon 模块如下：

```
Import-Module -Name $Path_To_Carbon -Global -Prefix CA

[array]$UserPrivileges = Get-CAPrivileges -Identity $UserName;
[bool]$LogOnAsAServiceprivilegeFound = $false;

if ($UserPrivileges.Length > 0)
{
    if ($UserPrivileges -contains "SeServiceLogonRight")
    {
        $LogOnAsAServiceprivilegeFound = $true;
    }
}

if ($LogOnAsAServiceprivilegeFound -eq $false)
{
    Grant-CAPrivilege -Identity $UserName "SeServiceLogonRight"
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-01-20T12:11:35.563

这些天（PowerShell 5.1 及更高版本）您可以使用它`Add-LocalGroupMember`来添加和`Get-LocalGroupMember`检查。例如，要添加用户并执行（基本）验证，您可以使用以下内容：

```
$addGroup = "SeServiceLogonRight"
$HealthLinkUser = "whatever"
Add-LocalGroupMember -Group "$addGroup" -Member "$HealthLinkUser"
if(Get-LocalGroupMember -Group "$addGroup" -Member "$HealthLinkUser")
{
    Write-Host "Added:`tMember: `"$HealthLinkUser`" to group: `"$addGroup`""
}
else
{
    Write-Host "ERROR: Unable to add:`tMember: `"$HealthLinkUser`" to group: `"$addGroup`""
} 
```

# ios - 有没有一种方法可以从 Interface Builder 中声明一个可用的自定义关系？

> ID：10187840
> 
> 赞同：1
> 
> 时间：2012-04-17T08:38:55.210
> 
> 标签：ios, xcode, ios5, uiviewcontroller

iOS 5 支持自定义复合视图控制器，很像内置的（标签栏、导航控制器）。但是，我无法弄清楚您应该如何设置自定义父视图控制器和子视图控制器之间的关系。我希望能够声明一个关系并将其连接到 Interface Builder 中，因为它可以使用内置的。

有没有办法做到这一点？

# php - 在php中同时控制同一用户名的多个登录

> ID：10187846
> 
> 赞同：1
> 
> 时间：2012-04-17T08:39:09.763
> 
> 标签：php, codeigniter

如果第一次登录已经存在，如何阻止使用相同用户名的第二次登录。[会话未清除]..当有人使用相同的用户名登录某个地方时，我想销毁以前的会话。系统只允许一个实例具有一个用户 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:28:51.020

您可以通过多种方式做到这一点。

最简单的方法是将会话 ID、IP 地址、日期时间和用户 ID 存储在同一个表中。

每次刷新页面时，您必须检查会话 ID 是否等于我们存储在数据库表中的值，然后我们必须继续.....

现在假设用户通过另一个系统登录，那么我们必须在上表中更新该系统的会话。

所以previos登录不起作用......这样你的问题就解决了......

谢谢，塔伦马尔帕尼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:58:58.573

您可以使用标志 0 和 1。每次用户登录时更新并将其值设置为 1。然后当用户注销或会话到期时再次更新并将其设置为零。并且当再次尝试使用此 id 检查标志状态登录时。如果它是 1 则阻止它，否则允许他。

# mysql - 将实体传播/分布到多个表中，而不是单个表中

> ID：10187849
> 
> 赞同：1
> 
> 时间：2012-04-17T08:39:21.290
> 
> 标签：mysql, database, database-design, query-optimization, database-optimization

为什么有人会通过执行以下操作将实体（例如*user*）分配到多个表中：

```
user(user_id, username)
user_tel(user_id, tel_no)
user_addr(user_id, addr)
user_details(user_id, details) 
```

你从这个数据库设计中得到什么加速奖励吗？这是非常违反直觉的，因为看起来执行链连接来检索数据听起来比使用选择投影要糟糕得多。

当然，如果只使用 user_id 和 username 来执行其他查询，那是一种加速，但值得吗？那么，真正的优势在哪里，以及适合这种数据库设计策略的兼容工作场景是什么？

**后期编辑：**在这篇文章的细节中，请假设一个完整的、唯一的实体，其属性在数量上没有变化（例如，汽车只有一种颜色，而不是两种，用户只有一个用户名/社交 sec 编号/入学编号/home address/email/etc.. 也就是说，我们处理的不是一对多关系，而是一对一、完全一致的实体描述。在上面的示例中，就是这种情况其中单个表已被“拆分”为与其拥有的非主键列一样多的表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:43:24.000

通过以这种方式拆分用户，您在每个用户的用户中恰好有 1 行，它链接到 user_tel、user_details、user_addr 中的每行 0-n 行

这反过来意味着这些可以被认为是可选的，和/或每个用户可能有多个链接到他们的电话号码。总而言之，这是一个比硬编码更具适应性的解决方案，因此用户始终拥有最多 1 个地址、最多 1 个电话号码。

另一种方法是使用 ie`user.telephone1` `user.telephone2`等，但是这种方法违反 3NF（[http://en.wikipedia.org/wiki/Third_normal_form](http://en.wikipedia.org/wiki/Third_normal_form)） - 本质上，您引入了很多列来存储相同的信息

**编辑**

根据 OP 的附加编辑，假设每个用户将精确地拥有每个电话、地址、详细信息的 0 或 1，并且**不再**有，那么将这些信息存储在单独的表中是矫枉过正的。将列 user_id、username、tel_no、addr、details 存储在单个用户表中会更明智。

如果没记错的话，这在 3NF 内完全没问题。您说这不是关于正常形式的，但是如果每条数据都被认为与该特定用户直接相关，那么将它放在表中就可以了。

如果您稍后将表扩展为具有电话 1、电话 2（例如），那么这将违反 1NF。如果您有重复的字段（即多个用户共享一个地址，这是完全合理的），那么这违反了 2NF 反过来又违反了 3NF

关于违反 2NF 的这一点很可能是有人这样做的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:38:57.350

这个设计的作者可能认为在这样的“稀疏”结构中存储 NULL 可以比在单个表中“内联”更有效。这个想法可能是存储行，例如`(1 , "john", NULL, NULL, NULL)`在表`(1 , "john")`中`user`，而在其他表中根本没有行。为此，NULL 的数量必须大大超过非 NULL（并且必须以正确的方式“混合”），否则这种设计很快就会变得更加昂贵。

此外，如果您不断选择*单列*，这可能会有所帮助。通过将列拆分为单独的表，您可以从存储角度使它们“更窄”，并*在这种特定情况下*降低 I/O （但不是一般情况下）。

在我看来，这种设计的问题远远超过了这些好处。

# gwt - 什么通过请求工厂发送到服务器

> ID：10187851
> 
> 赞同：0
> 
> 时间：2012-04-17T08:39:23.567
> 
> 标签：gwt, requestfactory

我很难理解请求工厂向服务器发送的内容。我有一个方法

```
Request<NodeProxy> persist(NodeProxy node) 
```

NodeProxy 是来自树状结构的对象（具有子节点和一个父节点，均为 NodeProxy 类型）。我只更改了节点中的一个属性并称为持久化。

现在的问题是发送到服务器的内容是什么？在这里的码头[https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory](https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory) 有：
“在客户端，RequestFactory 跟踪已修改的对象并仅将更改发送到服务器，这导致非常轻量级的网络有效负载。”

在同一个 Dock 中，在实体关系一章中，也有这样的内容：
“RequestFactory 在单个请求中自动发送整个对象图。”

我想知道我应该如何理解这一点。

我的问题：我的树结构可以变得非常大，比如说 50 个节点。问题是对于一个属性的更新方法

```
public IEntity find(Class<? extends IEntity> clazz, String id) 
```

在课堂里

```
public class BaseEntityLocator extends Locator<IEntity, String> 
```

为图中的每个对象调用这是不可接受的。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:10:24.470

您面临的问题是 RequestFactory`edit()`在获取属性时会自动代理，并且在构建请求有效负载时存在一个错误，即使您自己没有调用 getter，也会以这种方式隐式编辑整个代理图。该错误有很多影响，包括's
中的误报：[http ://code.google.com/p/google-web-toolkit/issues/detail?id=5952](http://code.google.com/p/google-web-toolkit/issues/detail?id=5952)`RequestContext``isChanged()`

我非常希望这将在 GWT 2.5 中得到修复（将在接下来的几周内完成）。

# javascript - 动态视图编译和渲染 express.js

> ID：10187858
> 
> 赞同：0
> 
> 时间：2012-04-17T08:40:01.490
> 
> 标签：javascript, node.js, express

有没有办法即时编译和渲染 .jade 视图，例如。如果它存储在数据库中，或者是否必须首先将其写入文件系统，或者是否可以挂钩到视图系统来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:55:38.193

What I know is that Express/Jade allow template modification without restarting the server.

Also, instead of trying to hook Express to render a string, why don't you simply [use jade directly](https://github.com/visionmedia/jade#readme) and send it to the client ? Few untested, pourly ordered lines of code to help :

```
var jade = require('jade');    

app.get('/', function(req, res){
    var fn = jade.compile('string of jade');
    res.send(fn(locals));
}); 
```

# php - PHP：发送到结果页面的链接

> ID：10187861
> 
> 赞同：0
> 
> 时间：2012-04-17T08:40:27.660
> 
> 标签：php, html

我正在学习 PHP：

一个人会得到一个结果页面。我想让这个人能够将结果页面（通过链接）发送到他们给定的电子邮件（表单）。该链接不会保持不变，因为结果页面将特定于该人/可能的会话？

结果页面只是一个 html 脚本，其中包含已通过预测模型运行的序列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:43:26.560

将结果存储在数据库中。构建一个 php 页面，该页面将根据 GET 变量从数据库中获取该数据。向用户提供带有适当 GET 变量的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:38:21.177

最好的方法是在 URL 本身中包含搜索词。

例如，如果它是一个搜索词，它很容易是：

```
http://www.yoursite.com/search.php?term=search+term 
```

只需在 PHP 中将其处理为：

```
<?php
$term = $_GET['term'];
/* blah blah, process the search and echo results */
?> 
```

您甚至可以利用分页，并将页面放在 URL 本身中，这样当用户返回链接时，它会将他们带回他们通过电子邮件发送链接的位置。剩下的就看你了。

# ios - 单击按钮时显示图像

> ID：10187863
> 
> 赞同：0
> 
> 时间：2012-04-17T08:40:32.607
> 
> 标签：ios, xcode, button, keyboard

我已经构建了这个键盘，在图片中你可以看到它，它是 1 号，但我希望它变成 2 号。

我写了每个按钮的标题，所以按钮 A 的标题是 A，当单击它时，它将在我在那些空框上方的大标签中显示 A，空框是 UIview。

有人知道我必须使用不同的图层以哪种方式使这个工作吗？或者其他什么，因为我不知道。

希望有人能告诉我这是图片：

[http://img213.imageshack.us/img213/4500/questionow.png](http://img213.imageshack.us/img213/4500/questionow.png)

谢谢

**编辑**

这就是我现在得到的.h

```
 IBOutlet UIImageView *imageview1;
    IBOutlet UIImageView *imageview2;
    IBOutlet UIImageView *imageview3;
    IBOutlet UIImageView *imageview4;
    IBOutlet UIImageView *imageview5;
    IBOutlet UIImageView *imageview6;
}

-(IBAction)showA;
-(IBAction)showB;
-(IBAction)showC;
-(IBAction)showD;
-(IBAction)showE;
-(IBAction)showF;
-(IBAction)showG;
-(IBAction)showH;
-(IBAction)showI;
-(IBAction)showJ;
-(IBAction)showK;
-(IBAction)showL;
-(IBAction)showM;
-(IBAction)showN;
-(IBAction)showO;
-(IBAction)showP;
-(IBAction)showQ;
-(IBAction)showR;
-(IBAction)showS;
-(IBAction)showT;
-(IBAction)showU;
-(IBAction)showV;
-(IBAction)showW;
-(IBAction)showX;
-(IBAction)showY;
-(IBAction)showZ; 
```

.m

```
-(IBAction)showA {

UIImage *img = [UIImage imageNamed:@"A.png"];

[imageview1 setImage:img];

}

-(IBAction)showB {

UIImage *img = [UIImage imageNamed:@"B.png"];

[imageview1 setImage:img];  

} 
```

等等。

在空框上得到 UIImageview 并且第一个字母显示得很好

看了一些关于可变数组的教程，但仍然不确定如何将它植入我的代码中。

它会是一个带有 imagevie1、2、3、4、5、6 的可变数组吗？

希望你能再次帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:45:32.027

这更多是关于组织您的想法，而不是实际的技术内容。

1）检查填充了多少个盒子，这样你就知道下一个要填充的盒子是什么。

2）有办法访问每个盒子。

**编辑 1：构建数据源**

这只是开始的一种方式：

1) 首先创建一个 NSMutableArray。

2）当你点击任何按钮时，使用你的 NSMutableArray 的大小，你可以自动知道图像应该放在哪里：

```
myArray count = 0 => UIImageView 0 needs to be filled
myArray count = 1 => UIImageView 1 needs to be filled
myArray count = 2 => UIImageView 2 needs to be filled
myArray count = 3 => UIImageView 3 needs to be filled 
```

# php - PHP + MongoDB：尝试将多维数组插入 MongoDB 时出错

> ID：10187866
> 
> 赞同：1
> 
> 时间：2012-04-17T08:40:47.433
> 
> 标签：php, mongodb, multidimensional-array, insert, mongodb-php

我正在为我的硕士论文开发一个测试应用程序，我正在尝试创建一个非常简单的博客来展示使用 MongoDB 的一些优点、缺点、特性等。

我创建了一个小的随机帖子生成器，它应该生成一个包含帖子的数组以及它应该包含的所有内容，用于 MongoDB 中的博客文章文档。

我的数组如下所示：

```
array
  'author' => 
    array
      'name' => string 'Shaine Coffey' (length=13)
      'email' => string 'Lars_Cherry@.com' (length=16)
  'post' => string 'Vivamus non lorem vitae odio sagittis semper. Nam tempor diam natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aenean eget magna. Suspendisse tristique neque venenatis lacus. Etiam bibendum fermentum metus. Aenean sed pede nec ante blandit viverra. Donec tempus, lorem fringilla ornare placerat, orci lacus vestibulum lorem, sit amet ultricies sem magna nec quam. Curabitur vel lectus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec dignissi'... (length=570)
  'date' => string 'Wed Mar 28 02:52:23 +0000 2007' (length=30)
  'rating' => int 0
  'comments' => 
    array
      0 => 
        array
          'name' => string 'Finn Hale' (length=9)
          'email' => string 'Magee_Huffman@.net' (length=18)
          'upVotes' => int 52
          'downVotes' => int 88
          'comment' => string 'augue malesuada malesuada. Integer id magna et ipsum cursus vestibulum. ligula. Aenean gravida nunc sed pede. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Proin vel arcu eu odio tristique pharetra. Quisque ac libero nec ligula consectetuer rhoncus. Nullam velit dui, semper et, lacinia vitae, sodales at, velit. Pellentesque ultricies dignissim lacus. Aliquam rutrum lorem ac risus. Morbi metus. Vivamus euismod urna. Nullam lobortis quam' (length=479)
      1 => 
        array
          'name' => string 'Axel Hall' (length=9)
          'email' => string 'Phillip_Simmons@.org' (length=20)
          'upVotes' => int 99
          'downVotes' => int 31
          'comment' => string 'mauris, aliquam eu, accumsan sed, facilisis vitae, orci. Phasellus dapibus ut, pellentesque eget, dictum placerat, augue. Sed molestie. Sed id risus quis diam luctus lobortis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos. Mauris ut quam vel sapien imperdiet ornare. In faucibus. Morbi vehicula. Pellentesque tincidunt tempus risus. Donec egestas. Duis ac arcu. Nunc mauris. Morbi non sapien molestie orci tincidunt adipiscing. Mauris molestie pharetra nibh. Aliquam '... (length=554)
      2 => 
        array
          'name' => string 'Laith Rowland' (length=13)
          'email' => string 'Graham_Nicholson@.net' (length=21)
          'upVotes' => int 15
          'downVotes' => int 73
          'comment' => string 'iaculis enim, sit amet ornare lectus justo eu arcu. Morbi Suspendisse eleifend. Cras sed leo. Cras vehicula aliquet libero. Integer in magna. Phasellus dolor elit, pellentesque a, facilisis non, bibendum sed, est. Nunc laoreet lectus quis massa. Mauris vestibulum, neque sed dictum eleifend, nunc risus varius orci, in consequat enim diam vel arcu. Curabitur ut odio vel est tempor bibendum. Donec felis orci,' (length=409)
  'tags' => 
    array
      0 => string 'War' (length=3)
      1 => string 'Freedom' (length=7) 
```

一切都是随机生成的，例如评论的数量可能会随着标签的数量而变化。

当我尝试在 MongoDB 中运行插入代码时，我收到错误警告：MongoCollection::insert() 期望参数 1 是数组或对象

我的插入代码如下所示：

```
for($i=0; $i<$n; $i++) {
    $post = BlogPosts();

    foreach ($postas $id => $item) {
        $collection->insert($item);
    }
} 
```

我已经进入了 MongoDB 数据库和集合，就像这样（在我的 PHP 文件的顶部）：

```
$mongo = new Mongo();
$db = $mongo->insert_test;
$collection = $db->testing; 
```

我怀疑我的错误在于我如何创建我的数组，但我似乎无法找到错误在哪里。当我将其编码为 JSON 时，它已正确验证。

另一件事是，当我在集合“testing”中查看我的 MongoDB 数据库“insert_test”时，我得到了很多条目（文档），但它们被“拆分”了，例如，“标签”在一个文档中，“评论”在另一个中，依此类推。

对于我的错误的任何帮助或建议将不胜感激。

真诚的感谢
- Mestika

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:35:28.200

它看起来非常像你想做的

```
$collection->insert($post); 
```

代替：

```
foreach ($postas $id => $item) {
   $collection->insert($item);
} 
```

你没有说你的 var_dump 显示什么变量。是 $post 还是 $item？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:01:13.627

在调用 $collection->insert($item); 之前，请执行 var_dump($item)。这应该可以准确地告诉您要插入集合中的内容。您很可能会发现它不是数组或对象。

# jquery - 使第一个导航项在手风琴菜单中开始关闭

> ID：10187870
> 
> 赞同：0
> 
> 时间：2012-04-17T08:40:53.040
> 
> 标签：jquery, jquery-ui-accordion

我做了这个教程：

[http://michaeljacobdavis.com/tutorials/statesavingaccordion.html](http://michaeljacobdavis.com/tutorials/statesavingaccordion.html) 这里是演示页面： http: [//michaeljacobdavis.com/tutorials/statesavingaccordion/statesavingaccordion.html#1](http://michaeljacobdavis.com/tutorials/statesavingaccordion/statesavingaccordion.html#1)

我把它连接得很好，但是当用户第一次访问该站点时，我不希望第一个菜单项打开（关于）。我希望关闭所有主菜单项，以便用户在单击一个之前无法看到子导航项。我试过但无法弄清楚如何做到这一点 - 请帮忙。下面是代码 - 关于部分总是在网站首次打开时打开 - 我希望它关闭。

```
<script type="text/javascript">
jQuery().ready(function(){
$('#navbar').accordion({
    autoHeight: false,
    navigation: true,
    header: '.navbaritem'
});

$(".navbaritem").click(function(event){
      window.location.hash=this.hash;
 });    
});
</script>

    <div id="navbar">
<div id="logo"> <a href="index.html"><img src="images/logo.png" width="234" height="191" border="0" /></a></div>    
<div class="navitemback">
<a class="navbaritem" href="#about" title="First Menu Item" name="about">about</a>
<div>
    <p><a href="#why">why we do it</a></p>
    <p><a href="#press">press/awards</a></p>
    <p><a href="#bio">bio</a></p>
</div>
</div>

<div class="navitemback">
<a class="navbaritem" href="#commercial" title="Second Menu Item" name="commercial">commercial</a>
<div>
    <p><a href="#olivers">olivers</a></p>
    <p><a href="#lemonade">lemonade</a></p>
    <p><a href="#court">court</a></p>
    <p><a href="#macks">macks</a></p>
</div>
</div>

<div class="navitemback">
<a class="navbaritem" href="#residential" title="Third Menu Item" name="residential">residential</a>
    <div>
    <p><a href="#city">city</a></p>
    <p><a href="#states">states</a></p>
    <p><a href="#country">country</a></p>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:27:43.477

这应该有效：

```
$('#navbar').accordion({
    autoHeight: false,
    navigation: true,
    header: '.navbaritem',
    active: false,
    collapsible: true 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:33:06.270

Hiya**演示**:) [http://jsfiddle.net/aCeyn/](http://jsfiddle.net/aCeyn/)

你也可以不这样做`collapsible`：

希望这可以帮助！有一个美好的，干杯！

如果您想进一步阅读其他属性或代码，请参见此处： http: [//michaeljacobdavis.com/tutorials/statesavingaccordion/jquery-ui.min.js](http://michaeljacobdavis.com/tutorials/statesavingaccordion/jquery-ui.min.js)

哦，您也可以随意使用 jsfiddle 并设置样式供您使用！

**jQuery代码**

```
$(document).ready(function(){
    $('#testMenu').accordion({
        autoHeight: false,
        navigation: true,
        header: '.testMenuItem',
        active: false
    });

    $(".testMenuItem").click(function(event){
          window.location.hash=this.hash;

     });    

});​ 
```

# php - 用户名/电子邮件垃圾邮件列表？

> ID：10187881
> 
> 赞同：1
> 
> 时间：2012-04-17T08:41:48.303
> 
> 标签：php, mysql, spam, spam-prevention

我在寻找用户名和垃圾邮件列表。当用户尝试注册时，我想检查他们输入的用户名或电子邮件是否在用户名/电子邮件垃圾邮件列表中，如果是，则将该帐户标记为可疑垃圾邮件并手动验证会员资格。

它背后的后端不是我的问题，我只是想知道是否有人知道我可以导入 MySQL 数据库以便将其实现到我的注册脚本中的此类垃圾邮件列表？

我知道有 Askimet，但我认为这更倾向于评论表单，另外我不想将数据发送给第三方以验证某些内容是否可能是垃圾邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:47:17.413

您的问题不是垃圾邮件帐户。用于发送垃圾邮件的垃圾邮件帐户不太可能用于注册服务。

您想要使用的是验证码服务（例如 reCAPTCHA - [http://www.google.com/recaptcha/captcha](http://www.google.com/recaptcha/captcha)），这将有助于减少机器人尝试注册您的网站的机会。这不是万无一失的，有许多替代方法（例如隐藏的 ID 字段和自定义标题） - 但这是一个开始。

然后您想使用电子邮件验证注册系统 - 这需要用户实际检查他们的电子邮件并单击验证链接，以确认电子邮件地址是真实的。否则，您只会让人们使用“Fake@fake.com”注册，而您的系统实际上不会知道他们是假的……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:45:10.773

看看[DNSBL](http://www.dnsbl.info/)。这是一项可以满足您的需求的服务。（不确定您是否可以下载他们的数据库，或者每次您想知道它是否是一个以垃圾邮件而闻名的地址时都必须查询他们）。

# ruby - 检查它是红宝石的早晨还是下午

> ID：10187882
> 
> 赞同：4
> 
> 时间：2012-04-17T08:41:48.607
> 
> 标签：ruby

如果 Time.new 是上午，如果是下午，我如何打印上午

00:00 - 12:00

12:00 - 00:00

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T08:53:58.160

如果您将经常进行此测试，则另一种可能性（不是我提倡随意修补猴子）：

```
class Time
  def morning?
    hour < 12
  end
  def afternoon?
    hour >= 12
  end
end

puts Time.now.morning? ? 'morning' : 'afternoon' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-17T08:52:00.467

```
(0..11).include?(Time.now.hour) ? 'morning' : 'afternoon' 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-17T08:49:49.057

这个怎么样：

```
puts Time.now.hour < 12 ? 'morning' : 'afternoon' 
```

这相当于：

```
if Time.now.hour < 12
  puts 'morning'
else
  puts 'afternoon'
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-12T18:54:52.013

```
def get_time_of_day(hour)
    if (hour >= 5 and hour <= 9)
      return "early_morning"
    elsif (hour > 9 and hour <= 11)
      return "late morning"
    elsif (hour > 11 and hour <= 13)
      return "early afternoon"
    elsif (hour > 13 and hour <= 16)
      return "late afternoon"
    elsif (hour > 16 and hour <= 19)
      return "evening"
    end
end

# example call
get_time_of_day(DateTime.now.hour) 
```

# stylesheet - reStructuredText 样式

> ID：10187887
> 
> 赞同：5
> 
> 时间：2012-04-17T08:42:09.323
> 
> 标签：stylesheet, restructuredtext, rst2pdf

我找到了[rst2pdf的](https://github.com/rst2pdf/rst2pdf)[本指南](http://lateral.netmanagers.com.ar/static/manual.pdf)，以了解如何在生成的 pdf 文档中设置 reStructuredText 文件的样式。例如，在我的 JSON 样式表中包含以下内容，它已成功应用于*整个*文档：

 *```
"pageSetup" : {
    "size": "A4",
    "width": null,
    "height": null,
    "margin-top": "2cm",
    [...]
    "margin-gutter": "0cm"
} 
```

特定样式如何仅应用于特定类？例如，如何将特定字体应用到`h1`类？我的直接困难源于我不确定它是否实际上被称为`h1`, `H1`,`header1`或`Header1`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T21:07:31.643

该[`rst2pdf.py`手册](http://ralsina.me/static/manual.pdf)在样式名称方面的信息似乎不是很丰富。但是，关于样式的部分（第 8 章）有这个例子：

```
["heading1" , {
  "parent": "normal",
  "fontName": "Tuffy_Bold",
  "fontSize": 18,
  "keepWithNext": true,
  "spaceAfter": 6
}], 
```

因此，这似乎`heading1`是合适的样式名称。

需要注意的一件事是

> 如果您的文档需要样式表中未定义的样式，它将打印警告并改用正文。

因此，假设您在生成文档时没有收到任何警告，则必须在默认样式表中设置样式，因此请查看此内容以了解所使用的样式名称。

您可以使用 rst2pdf 打印默认样式表

```
rst2pdf --print-stylesheet 
```

如果要添加样式，只需创建一个样式表，（或获取标准样式表并对其进行修改）并使用 -s 选项传递它

```
rst2pdf mydoc.txt -s mystyles.txt 
```*

# jquery - 具有特定形状的 div

> ID：10187895
> 
> 赞同：0
> 
> 时间：2012-04-17T08:42:38.653
> 
> 标签：jquery, html, css

我需要创建一个水平导航栏，其形状类似于此链接中“团队”和“合作”div 中使用的形状。是否存在一个图书馆？[关联](http://hitmo-studio.com/#hitmo)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:08:42.353

该网站使用背景图像来实现外观，更具体地说，它使用了一种称为[sprite](http://css-tricks.com/css-sprites/)（或 CSS sprites）的技术。

该技术本质上只是使用包含多个图像的一个图像，每个图像单独使用。使用单个图像的`background-position`规则允许您从本质上选择要使用的大图像的哪一部分。该技术的主要目的是减少 HTTP 请求的数量，以加快页面的加载速度。

请参考[http://css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)以获得更好的解释。

这是他们在您链接到的网站上使用的精灵：

[http://hitmo-studio.com/images/sprites-set-1.png](http://hitmo-studio.com/images/sprites-set-1.png)

您可以看到精灵图像顶部的四个框。这是第二个盒子（团队）如何使用精灵图像的正确部分的示例

```
.list-c li.team a {
background-position: -246px 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:05:55.507

你不需要一个库，它只是 CSS。

在您链接到该站点的页面中，似乎使用[图像精灵](http://hitmo-studio.com/images/sprites-set-1.png)作为背景图像来创建扭曲（插入/外置三角形）形状的错觉，但可以使用可以处理伪元素的兼容浏览`::before`器来模拟这种错觉`::after`：

```
.box {
    width: 150px; /* or whatever */
    height: 150px;
    background-color: #f90; /* adjust to your taste */
    padding: 0.5em;
    position: relative; /* required to position the pseudo elements */
    margin: 0 auto; /* used to move the box off the edge of the page, adjust to taste */
}

.box::before {
    content: ''; /* required in order for the ::before to be visible on the page */
    position: absolute;
    top: 50%;
    left: 0;
    margin: -25px 0 0 0; /* to position it vertically centred */
    border-right: 25px solid transparent;
    border-bottom: 25px solid transparent;
    border-top: 25px solid transparent;
    border-left: 25px solid #fff; /* forms the triangular shape on the left */
}

.box::after{
    content: '';
    position: absolute;
    top: 50%;
    right: 0;
    margin: -25px -50px 0 0;
    border-right: 25px solid transparent;
    border-bottom: 25px solid transparent;
    border-top: 25px solid transparent;
    border-left: 25px solid #f90;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/a3LNF/1/)。

请注意，使用这种方法存在问题：

1.  页面的背景无法通过左侧的三角形显示（因为它是纯白色），如果您制作该三角形，`transparent`那么您将通过边框看到，但只能看到`.box` `div`元素的背景颜色。

2.  定位`::before`和`::after`伪元素`position: absolute`意味着这些元素出现在`div`. 所以你可能需要调整`padding`那个`div`和`border-width`伪元素来减少这个问题，这只是一个演示。

# sockets - 谁能指导我或建议如何为通过 HTTP 的实时媒体服务器流式传输创建客户端

> ID：10187896
> 
> 赞同：2
> 
> 时间：2012-04-17T08:42:39.423
> 
> 标签：sockets, live, h.264, tcpclient, rtsp

任何人都可以指导我或建议如何使用套接字创建客户端，以便通过 HTTP 进行实时媒体服务器流式传输，因为我尝试了很多但没有成功。

```
#define WIN32_LEAN_AND_MEAN

#include <windows.h>
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdlib.h>
#include <stdio.h>
#include<conio.h>

// Need to link with Ws2_32.lib, Mswsock.lib, and Advapi32.lib
#pragma comment (lib, "Ws2_32.lib")
#pragma comment (lib, "Mswsock.lib")
#pragma comment (lib, "AdvApi32.lib")

//************All Declarations**********//
#define DEFAULT_BUFLEN 512000
#define DEFAULT_PORT "8000"

int __cdecl main(int argc, char **argv) 
{
    WSADATA wsaData;
    SOCKET ConnectSocket = INVALID_SOCKET;
    struct addrinfo *result = NULL,
        *ptr = NULL,
        hints;
    char *sendbuf = "this is a test";
    char recvbuf[DEFAULT_BUFLEN];
    int iResult;
    int recvbuflen = DEFAULT_BUFLEN;

    // Validate the parameters
    if (argc != 2) {
        printf("usage: %s server-name\n", argv[0]);
        getch();
        return 1;
    }

    // Initialize Winsock
    iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
    if (iResult != 0) {
        printf("WSAStartup failed with error: %d\n", iResult);
        getch();
        return 1;
    }

    ZeroMemory( &hints, sizeof(hints) );
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_protocol = IPPROTO_TCP;

    // Resolve the server address and port
    iResult = getaddrinfo(argv[1], DEFAULT_PORT, &hints, &result);
    if ( iResult != 0 ) {
        printf("getaddrinfo failed with error: %d\n", iResult);
        WSACleanup();
        getch();
        return 1;
    }

    // Attempt to connect to an address until one succeeds
    for(ptr=result; ptr != NULL ;ptr=ptr->ai_next) {

        // Create a SOCKET for connecting to server
        ConnectSocket = socket(ptr->ai_family, ptr->ai_socktype, 
            ptr->ai_protocol);
        if (ConnectSocket == INVALID_SOCKET) {
            printf("socket failed with error: %ld\n", WSAGetLastError());
            WSACleanup();
            getch();
            return 1;
        }

        // Connect to server.
        iResult = connect( ConnectSocket, ptr->ai_addr, (int)ptr->ai_addrlen);
        if (iResult == SOCKET_ERROR) {
            closesocket(ConnectSocket);
            ConnectSocket = INVALID_SOCKET;
            continue;
        }
        break;
    }

    freeaddrinfo(result);

    if (ConnectSocket == INVALID_SOCKET) {
        printf("Unable to connect to server!\n");
        WSACleanup();
        getch();
        return 1;
    }

    // Send an initial buffer
    /*iResult = send( ConnectSocket, sendbuf, (int)strlen(sendbuf), 0 );
    if (iResult == SOCKET_ERROR) {
        printf("send failed with error: %d\n", WSAGetLastError());
        closesocket(ConnectSocket);
        WSACleanup();
        getch();
        return 1;
    }*/

    printf("Bytes Sent: %ld\n", iResult);

    // shutdown the connection since no more data will be sent
    iResult = shutdown(ConnectSocket, SD_SEND);
    if (iResult == SOCKET_ERROR) {
        printf("shutdown failed with error: %d\n", WSAGetLastError());
        closesocket(ConnectSocket);
        WSACleanup();
        getch();
        return 1;
    }

    // Receive until the peer closes the connection
    do {

        iResult = recv(ConnectSocket, recvbuf, DEFAULT_BUFLEN, 0);
        if ( iResult > 0 )
            printf("Bytes received: %d\n", iResult);
        else if ( iResult == 0 )
            printf("Connection closed\n");
        else
            printf("recv failed with error: %d\n", WSAGetLastError());

    } while( iResult > 0 );

    // cleanup
    getch();
    closesocket(ConnectSocket);
    WSACleanup();

    return 0;
} 
```

我尝试了上面的代码，它适用于我创建的服务器。问题是我正在通过 http 从实时媒体服务器流式传输传输流文件，但是当我尝试从客户端代码接收数据时，我能够连接到特定的 url，但无法接收任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:06:11.407

对您来说最简单的解决方案是使用 liveMedia 的[openRTSP](http://www.live555.com)[客户](http://www.live555.com/openRTSP/)端作为起点。它几乎可以归结为实现整个 RTSP 堆栈以及通过 TCP 连接交错媒体。通过将“-T”作为命令行参数传递，您可以将 openRTSP 配置为通过 TCP 上的 RTSP 进行流式传输。然后，您可以基于 openRTSP 编写自己的应用程序，然后您可以根据需要处理传入的媒体样本。

我建议您**不要**自己从套接字级别实现此功能。您需要实现 RTSP、RTP、RTCP、RTSP over HTTP 隧道、SDP、各种 RTP 有效负载格式，例如 H.264。您上面与套接字相关的代码段并没有开始接触表面。

如果您想查看协议交换的样子，请使用wireshark 嗅探从openRTSP 到RTSP 服务器的流量。您还可以在 liveMedia 上找到 RTSP 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:40:37.557

如果它通过 HTTP，您首先必须发送一个 HTTP 请求（然后解析响应）。[例子](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Example_session)。

您没有收到任何东西，因为服务器正在等待请求。

# java - 成功执行servlet后如何在jsp中生成成功警报？

> ID：10187898
> 
> 赞同：1
> 
> 时间：2012-04-17T08:42:53.667
> 
> 标签：java, javascript, jsp, servlets

我有一个 jsp 页面，其中包含一个调用 servlet 的表单，在通过 servlet hot 将数据插入数据库以在页面上向用户显示成功警报之后？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:48:00.730

您可以使用 AJAX 异步调用 servlet 并具有成功回调函数（参见 jQuery 示例：[http](http://api.jquery.com/category/ajax/) ://api.jquery.com/category/ajax/ ）

或者，您使用老式方式使用同步 Post 加载成功页面，或者在同一页面上使用例如声明您已成功的查询参数来执行此操作。然后可以使用它来激活您的 JSP（或您喜欢的任何模板语言）中的脚本块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:14:58.033

您可以使用 javascript 警报框。见[http://www.w3schools.com/js/js_popup.asp](http://www.w3schools.com/js/js_popup.asp)

# css - 扩展内表以适应周围环境

> ID：10187901
> 
> 赞同：1
> 
> 时间：2012-04-17T08:43:00.663
> 
> 标签：css, internet-explorer-7

`<td>`我在标签中有一个表格。

`<td>`如果周围较大，内表应扩大其高度。

jsfiddle 示例适用于 FF（黑色边框与绿色边框的高度相同），但不适用于 IE7（黑色边框太小）。

不幸的是，我需要嵌套表（不能使用浮点数）并且需要支持 IE7。

[http://jsfiddle.net/qJTgw/3/](http://jsfiddle.net/qJTgw/3/)

```
<table>
    <tr>
        <td style="height: 100%; min-height: 100%">
            <table style="border: 2px solid black; height: 100%; min-height: 100%"><tr><td>foo</td></tr></table>
        </td>
        <td style="border: 2px solid green">BIG<br>BIG<br>BIG<br>BIG</td>
    </tr>
</table> 
```

我尝试了一个 jQuery 解决方案，但改变高度需要 10 秒，因为页面上有很多内表。纯 CSS 解决方案会更好。

更新：边框有颜色来显示我的意思。在我真正的问题中，有一个背景图像（虚线）应该与周围的 td 一样高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:06:19.413

也许也增加高度`table`：

```
<table style="height: 100%; min-height: 100%"> 
```

# c# - ILSpy 中显示的奇数类成员语法

> ID：10187903
> 
> 赞同：8
> 
> 时间：2012-04-17T08:43:02.353
> 
> 标签：c#, syntax, destructor, ilspy

我正在使用[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)在 XNA 框架中查找一些 dll并遇到了这个问题：

```
class KerningHelper
{
    private void !KerningHelper()
    {
        ((IDisposable)this).Dispose();
    }
} 
```

**上面的感叹号是什么意思？**这是 ILSpy 的问题，还是其他问题？

请注意，该类有一个单独的析构函数：`private unsafe void ~KerningHelper()`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T09:00:35.093

正如评论所述，感叹号是终结器方法的 C++/CLI 标记。与显式处理对象时调用的传统 C++ 析构函数 (~) 不同，终结器由垃圾收集器线程调用。[您可以在此处](http://msdn.microsoft.com/en-us/library/ms177197%28v=vs.100%29.aspx)查看官方详细信息。

我希望 ILSpy 将 to 转换`!KerningHelper()`为`~KerningHelper()`，因为 C++/CLI 终结器等效于 C# 的析构函数 - 这是一种在 GC 到达它时发生的非确定性方法，与 C++/CLI 的显式 ~destructor 不同，它在您调用`delete`或调用时调用进行了显式的 Dispose 调用。

# javascript - 使用 Javascript 在 WebView 中填写表单

> ID：10187908
> 
> 赞同：14
> 
> 时间：2012-04-17T08:43:23.547
> 
> 标签：javascript, android, android-webview

我正在尝试从 Android 中的 Webview 填充 Webforms。我已经在这里找到了这段代码：[Fill fields in webview automatically](https://stackoverflow.com/questions/7961568/fill-fields-in-webview-automatically)

```
String username = "cristian";
webview.loadUrl("javascript:document.getElementById('username').value = '"+username+"';"); 
```

不幸的是，我不明白我必须在哪里打开我要填写的页面。

```
setContentView(R.layout.web);
final WebView mWebView = (WebView) findViewById(R.id.webview);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.loadUrl(url);
String user="u";
String pwd="p";
mWebView.loadUrl("javascript:document.getElementById('username').value = '"+user+"';document.getElementById('password').value='"+pwd+"';"); 
```

当我以这种方式尝试时，会显示该站点，但表单中没有任何值。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-08-20T10:11:26.850

Android 4.4 新的 WebView 使用`loadUrl("javascript:")`方法有问题，参数字符串在执行前会被 url-decode。您可以尝试使用`evaluateJavascript()`API >= 19 和`loadUrl()`API < 19。下面的代码对我有用。

```
 mWebView.loadUrl(url)
    WebSettings settings = mWebView.getSettings();
    settings.setJavaScriptEnabled(true);

    String js = "javascript:document.getElementById('username').value = '"+user+"';document.getElementById('password').value='"+pwd+"';";
    mWebView.setWebViewClient(new WebViewClient() {

        @Override
        public void onPageFinished(WebView view, String url) {
            super.onPageFinished(view, url);

            if (Build.VERSION.SDK_INT >= 19) {
                view.evaluateJavascript(js, new ValueCallback<String>() {
                    @Override
                    public void onReceiveValue(String s) {

                    }
                });
            } else {
                view.loadUrl(js);
            }
       });
    } 
```

请参考：[loadUrl("javascript:....") 行为在 Android 4.4 中发生了不兼容的变化](https://code.google.com/p/android/issues/detail?id=69969)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-12T15:40:23.057

您应该在页面加载后填写这些值。这是使用您的代码的示例：

```
mWebView.loadUrl(url);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.setWebViewClient(new WebViewClient() {
    public void onPageFinished(WebView view, String url) {
        String user="u";
        String pwd="p";
        view.loadUrl("javascript:document.getElementById('username').value = '"+user+"';document.getElementById('password').value='"+pwd+"';");
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-19T21:22:21.710

只需启用 DomStorage 并将 "var x=" 写入字符串：

```
webview.getSettings().setJavaScriptEnabled(true);
web.getSettings().setDomStorageEnabled(true);

webview.loadUrl(urlString);
webview.setWebViewClient(new WebViewClient(){

public void onPageFinished(WebView view, String url){  
super.onPageFinished(view, url);
String js = "javascript:var x=document.getElementById('username').value = '"+user+"';var y=document.getElementById('password').value='"+pass+"';";

if (Build.VERSION.SDK_INT >= 19) {
        view.evaluateJavascript(js, new ValueCallback<String>() {
            @Override
            public void onReceiveValue(String s) {

            }
        });
    } else {
        view.loadUrl(js);
    }

view.loadUrl(js);
}
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-03T09:05:18.393

我遇到了同样的问题，在对stackOverflow进行了不同的解释之后，我成功地让我的工作正常了。

这是我的方法

```
webView.loadUrl(url);
        webView.getSettings().setDomStorageEnabled(true);
        webView.setWebViewClient(new WebViewClient(){
            public void onPageFinished(WebView view, String url) {
                String email="email@email.jp";

                //view.loadUrl("javascript:document.getElementById('email').value = '"+email+"'");
                view.loadUrl("javascript:document.forms[0].email.value = '"+email+"';");
                Log.d("email", "can not add email");
            }
        }); 
```

2 件事：1）你需要添加这一行`webView.getSettings().setDomStorageEnabled(true);`（参考：[Android WebView 总是为 loadUrl 上的 javascript getElementById 返回 null](https://stackoverflow.com/questions/25602117/android-webview-always-returns-null-for-javascript-getelementbyid-on-loadurl/25606090#25606090)）

2）您需要使用它来访问您的php代码中的变量，`view.loadUrl("javascript:document.forms[0].email.value = '"+email+"';");` 正如您在我的代码中看到的那样，我使用了@gnpaolo提出的解决方案，但它对我不起作用，所以我评论它并使用这个。（参考：[如何将字符串注入 Android WebView](https://stackoverflow.com/questions/19554907/how-to-inject-a-string-into-android-webview)）

最后，只想补充一点，您不需要创建特殊的 javascript。

另一件事`forms[0]`是变量在 php 表单中的位置，就我而言，我有用户的电子邮件，所以我写了`view.loadUrl("javascript:document.forms[0].email.value = '"+email+"';");`

希望，这可以帮助其他人。

# c# - 通过字符串修剪字符串

> ID：10187910
> 
> 赞同：1
> 
> 时间：2012-04-17T08:43:25.297
> 
> 标签：c#

如何通过整个字符串而不是单个字符列表来修剪字符串？

我想删除`&nbsp;`HTML 字符串开头和结尾的所有空格和空格。但是方法`String.Trim()`确实只有字符集的重载，而不是字符串集。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T08:47:42.837

您可以使用`HttpUtility.HtmlDecode(String)`并使用结果作为输入`String.Trim()`

[MSDN 上的HttpUtility.HtmlDecode MSDN 上的](http://msdn.microsoft.com/en-us/library/system.web.httputility.htmldecode.aspx)
[HttpServerUtility.HtmlDecode](http://msdn.microsoft.com/en-us/library/hwzhtkke.aspx)（您可以通过[Page.Server](http://msdn.microsoft.com/en-US/library/system.web.ui.page.server.aspx)属性访问的包装器）

```
string stringWithNonBreakingSpaces;
string trimmedString =  String.Trim(HttpUtility.HtmlDecode(stringWithNonBreakingSpaces)); 
```

**注意：**此解决方案将解码输入中的所有 HTML 字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T08:45:30.367

Trim 方法默认从当前字符串中删除所有前导和尾随空白字符。

编辑：编辑后问题的解决方案：

```
string input = @"  &nbsp; <a href='#'>link</a>  &nbsp; ";
Regex regex = new Regex(@"^(&nbsp;|\s)*|(&nbsp;|\s)*$");
string result = regex.Replace(input, String.Empty); 
```

这将删除所有尾随和前导空格和`&nbsp;`. 您可以将任何字符串或字符组添加到表达式中。如果您要修剪所有选项卡，则正则表达式将简单地变为：

```
Regex regex = new Regex(@"^(&nbsp;|\s|\t)*|(&nbsp;|\s|\t)*$"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T08:56:09.390

Use RegEx, as **David Heffernan** said. It is rather easy to select all spaces at the start of string: `^(\ |&nbsp;)*`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T08:49:31.790

不确定这是否是您要找的东西？

```
 string str = "hello &nbsp;";
   str.Replace("&nbsp;", "");
   str.Trim(); 
```

# javascript - 回车的跨浏览器keydown处理？

> ID：10187918
> 
> 赞同：1
> 
> 时间：2012-04-17T08:43:51.580
> 
> 标签：javascript, jquery, cross-browser

我正在寻找一种跨浏览器解决方案来处理回车，从文本框中提交输入。

我目前的问题是火狐...

javascript事件未定义

```
<input id="myinput" type="text" onkeydown="press();" value="X"/>

<script type="text/javascript">
function press() {
    if (event.keyCode == 13) {
    // do something
    }
}
<script> 
```

我可以使用jquery。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T08:47:18.833

从哪里来`event`？:-)

这是您正在寻找的解决方案：

```
// First, change the HTML to:
<input id="myinput" type="text" onkeydown="return press( event );" value="X" />

// Then, on the JS part:
function press( e ) {
    var evt = e || window.event
    // "e" is the standard behavior (FF, Chrome, Safari, Opera),
    // while "window.event" (or "event") is IE's behavior
    if ( evt.keyCode === 13 ) {
        // Do something

        // You can disable the form submission this way:
        return false
    }
} 
```

请注意`return`在此函数和 HTML 事件中的使用以防止表单提交（这是在表单字段中按 [Enter] 时的默认行为）。

但是，我建议删除 HTML 中的 javascript 部分，然后直接使用：

```
document.getElementById('myinput').onkeydown = function( e ) {
    // Your code
} 
```

这使您可以拥有[不显眼的javascript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

对于 jQuery 方式，这将是以下内容：

```
$('#myinput').on( 'keydown', function( e ) {
    // jQuery normalizes the "e" parameter, so you can use:
    if ( e.keyCode === 13 ) {
        // Do something
    }
} ) 
```

PS：`event`其实和 是一样的`window.event`，这才是IE的正确用法。不过，这不是其他浏览器（FF、Chrome ......）使用的标准。这就是为什么我们使用提供的技巧（作为参数传递的`var evt = e || window.event`地方`e`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:58:54.780

first of all, you must define `event` for the use in FF/Chrome/Opera/.. in the function definition **and** in the function call. (`onkeydown`)

HTML:

```
<form method="POST" action="/">
<input id="myinput" type="text" onkeydown="return press( event )" value="X"/>
</form> 
```

JavaScript:

```
function press(e) {
    // IE uses "window.event", others pass the event as argument
    var evt = e || window.event;
    if (evt.keyCode == 13) {
        // do something
        alert("enter!");

        return false;
    }
} 
```

Note the use of `return` in both the function definition **and** the function call in the HTML markup. It **prevents the form from submitting**, which is the *default behaviour when you hit enter* in an input inside a form.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:49:47.720

```
$('#myinput').keypress(function(e){
      if(e.which == 13){
         //do something.
         e.preventDefault();
       }  
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T08:49:52.937

您需要声明将传递给您的函数的事件参数：

```
function press(event) {
    if (event.keyCode == 13) {
    // do something
    }
} 
```

# c++ - 二叉树节点子节点的有效选择

> ID：10187921
> 
> 赞同：0
> 
> 时间：2012-04-17T08:44:00.363
> 
> 标签：c++, binary-tree

我有以下代码：

```
 NodePtr bestChild = (diff < 0) ? node->child1 : node->child2;
        NodePtr otherChild = (diff < 0) ? node->child2 : node->child1; 
```

有没有更有效的方法来设置 bestChild 和 otherChild 变量？

**注意：** `diff`是`float`和比较是相当长的操作。

我也尝试了以下解决方案：

```
 NodePtr bestChild = (diff < 0) ? node->child1 : node->child2;
        NodePtr otherChild = (bestChild == node->child2) ? node->child1 : node->child2; 
```

在这种情况下，我不会进行比较，但我不确定这是不是最好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:47:19.543

任何一个：

```
NodePtr bestChild, otherChild;
if (diff < 0)
{
    bestChild = node->child1;
    otherChild = node->child2;
}
else
{
    bestChild = node->child2;
    otherChild = node->child1;
} 
```

或者

```
NodePtr children[2] = (diff < 0) ? {node->child1, node->child2} : {node->child2, node->child1}; 
```

**或者保持原样，因为编译器可能会为您执行此操作。**

# sql-server - 使用目标中的架构更改将数据从源迁移到目标

> ID：10187922
> 
> 赞同：0
> 
> 时间：2012-04-17T08:44:00.500
> 
> 标签：sql-server

作为这个问题的后续，我有一个奇怪的场景，其中源数据库的表将只有 5 列的数据，而目标包含一个额外的列，该列不为空且具有默认值。如果我们使用上面提到的任何工具，它将源与目标进行比较，然后给出查询以将新数据插入到目标上，但部署失败，因为它没有插入新引入的非空列。关于如何检查架构差异的任何想法

# java - 服务器返回 HTTP 响应代码：403 用于 URL：我正在 JEditorPane 上显示网页

> ID：10187923
> 
> 赞同：4
> 
> 时间：2012-04-17T08:44:01.500
> 
> 标签：java, swing, awt

我试图在 JEditorPane 上显示网页，但出现错误

```
JEditorPane editor = new JEditorPane(url); 
```

下面是我锻炼的代码。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.Authenticator;
import java.net.HttpURLConnection;
import java.net.InetSocketAddress;
import java.net.PasswordAuthentication;
import java.net.Proxy;
import java.net.URL;
import java.net.URLConnection;

import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JScrollPane;

import com.sun.org.apache.xml.internal.security.utils.Base64;

public class webpageDisplay {

    /**
     * @param args
     * @throws IOException 
     */

    static class MyAuthenticator extends Authenticator {
        public PasswordAuthentication getPasswordAuthentication() {
            // I haven't checked getRequestingScheme() here, since for NTLM
            // and Negotiate, the usrname and password are all the same.
            System.err.println("Feeding username and password for " + getRequestingScheme());
            return (new PasswordAuthentication("UserId","Password".toCharArray()));
        }
    }

    public static void main(String[] args) throws IOException {
        System.getProperties().put( "proxySet", "true" ); 
        System.setProperty("http.proxyHost", "I given proxy host");
        System.setProperty("http.proxyPort", "8080");
        Authenticator.setDefault(new MyAuthenticator());
        URL url=new URL("http://www.google.com");
        HttpURLConnection  uc = (HttpURLConnection) url.openConnection ();
        uc.addRequestProperty("User-Agent","Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)");
        uc.connect();
            JEditorPane editor = new JEditorPane(url);
            editor.setEditable(false);
            JScrollPane pane = new JScrollPane(editor);
            JFrame f = new JFrame("HTML Demo");
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.getContentPane().add(pane);
            f.setSize(800, 600);
            f.setVisible(true);

    }

} 
```

这是我得到的错误

```
Exception in thread "main" java.io.IOException: Server returned HTTP response code: 403 for URL: http://www.google.com
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:45)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:39)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:515)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1291)
    at java.security.AccessController.doPrivileged(AccessController.java:251)
    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(HttpURLConnection.java:1285)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:939)
    at javax.swing.JEditorPane.getStream(JEditorPane.java:823)
    at javax.swing.JEditorPane.setPage(JEditorPane.java:429)
    at javax.swing.JEditorPane.<init>(JEditorPane.java:256)
    at webpageDisplay.main(webpageDisplay.java:48)
Caused by: java.io.IOException: Server returned HTTP response code: 403 for URL: http://www.google.com
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1236)
    at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:384)
    at javax.swing.JEditorPane.getStream(JEditorPane.java:788)
    ... 3 more 
```

请让我知道如何解决此问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:34:20.060

虽然我不知道您使用代理做什么，但作为一个答案，我会将其引用直接包含在连接打开中。即，而不是将其声明为系统属性，以确保您有效地使用它。它会给出类似的东西：

```
SocketAddress proxySocketAdress= new InetSocketAddress("Proxy IP address", 8080);
Proxy proxy=new Proxy(Proxy.Type.HTTP,proxySocketAdress);
HttpURLConnection  uc = (HttpURLConnection) url.openConnection(proxy); 
```

我希望这有帮助，

高炉

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-11T05:07:06.460

`http.agent`通过更改属性，我能够欺骗 Google 认为我是不同的浏览器。403 立即解决。

您可以通过在其余代码之前运行以下行来执行此操作：

```
System.setProperty("http.agent", "Mozilla/5.0"); 
```

我想还有其他可以设置`http.agent`的东西会起作用，但这对我有用，所以我不理会它。我从这个问题的答案中制定了它： [Setting user agent of a java URLConnection](https://stackoverflow.com/questions/2529682/setting-user-agent-of-a-java-urlconnection)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T08:47:22.757

请参阅[HTTP 403](http://en.wikipedia.org/wiki/HTTP_403)。

> 在万维网上使用的 HTTP 中，**403 Forbidden**是当用户请求服务器不允许他们访问的网页或媒体时，Web 服务器返回的 HTTP 状态代码。换句话说，服务器可以访问，但*服务器拒绝允许访问该页面。*

（片刻之后..）

```
URL url=new URL("http://www.google.com"); 
```

啧啧，真是惊喜。[好吧，那是讽刺。;) ]

谷歌因成为人们无法连接的“示例 URL”而臭名昭著。这主要是因为他们没有提供他们的努力以供“任何旧应用程序”使用。有一个（非常受限的）Google API 大约 5 分钟，但很久以前就撤回了。

我看到代码对它是什么做了一些“捏造”。这显然不足以愚弄谷歌。（坦率地说，我不打算花精力去想办法绕过这些保护措施——如果谷歌不希望他们的页面在你的应用程序中提供，那是他们的事。）

# r - 最小但快速的加权最小二乘回归

> ID：10187924
> 
> 赞同：1
> 
> 时间：2012-04-17T08:44:03.070
> 
> 标签：r, linear-regression

我知道过去曾提出过类似的问题，但我的问题与加权回归有关，其中只需要系数。计算应该尽可能快。我知道 ls.fit 和一些 Rcpp 包函数是这里的选项。但是，对于执行加权回归的最快、最小化方式的共识是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:25:45.490

首先，计算线性代数以获得您需要的术语（本网站范围之外的问题；如果您需要帮助，请尝试 stats.stackexchange.com）。然后快速运行该计算。根据计算的外观，您的方法会有所不同。

加快速度的可能方法：

*   安装优化的 BLAS
*   购买集群并使用并行计算
*   购买显卡并使用 gpu-tools

# .net - VB.NET 代码中的 SQL 查询

> ID：10187926
> 
> 赞同：2
> 
> 时间：2012-04-17T08:44:06.897
> 
> 标签：.net, sql, vb.net, visual-studio

我有一个项目，我们直接在代码中使用 SQL 查询。

```
Dim strSQL As String = "SELECT P.NAME, C.ID, C.NAME" +
         "FROM PERSONS P " + 
"INNER JOIN CITIES " +
"ON P.IDCITY = C.ID" +
"WHERE P.ID = {0}" 
```

使用“”和“+”格式化这样的查询有点烦人有没有办法编写脚本“As Is”（来自 SQL 文件），而不重新格式化它？

我会用

```
strSQL = My.Resources.SELECT_PERSON_WITH_CITY 
```

但在调试中我看不到/修改原始查询。

我知道，我知道，这不是直接使用 SQL 的最佳实践，但是，我使用我所拥有的。

**PS。**

正如 Conor Gallagher 提到的，在 C# 中有一种方法可以实现这一点：

```
string x = @"
  my 
  name 
  is {0}";
string y = string.Format(x, "jimmy"); 
```

有人知道**VB.NET 等价物**吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T09:00:49.953

我相信 vb.net 中的答案实际上是否定的，如果不使用 " 和 + 等，您不能在 vb.net 中创建多行字符串。在 C# 中，您可以使用 "@" 转义字符跨越多行字符串。位像这样：

```
string x = @"
  my 
  name 
  is {0}";
string y = string.Format(x, "jimmy"); 
```

但是 VB.Net 没有等价物。

**更新**

根据下面[D.. 的](https://stackoverflow.com/users/86762/d)评论，Xml Literals 可以解决这个问题。请参阅[http://www.codeproject.com/Articles/292152/Mutliline-String-Literals-in-VB-NET](http://www.codeproject.com/Articles/292152/Mutliline-String-Literals-in-VB-NET)

基本上，根据链接，您可以使用 Xml Literals 执行类似这样的巧妙操作：

```
Dim sourceText As String =
    <string>
        Imports Microsoft.VisualBasic
        Imports System
        Imports System.Collections
        Imports Microsoft.Win32
        Imports System.Linq
        Imports System.Text
        Imports Roslyn.Compilers
        Imports System.ComponentModel
        Imports System.Runtime.CompilerServices
        Imports Roslyn.Compilers.VisualBasic

        Namespace HelloWorld
          Module Program
            Sub Main(args As String())
              Console.WriteLine("Hello, World!")
            End Sub
          End Module
        End Namespace
    </string> 
```

**更新 2**

一直在玩这个。XmlLiterals 实际上非常好！如果您想将变量添加到循环中，您可以执行以下操作：

```
Dim x As String
Dim y As String
y = "Jimmy"

x = <string>
        Select *
        From Person
        Where Person.FirstName = <%= y %>
    </string> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T08:47:04.417

您必须使用`SQLParameters`，而不是手动格式化您的查询！！

```
Dim con AS New SqlConnection("...")
Dim cmd As New SqlCommand(
    "SELECT P.NAME, C.ID, C.NAME FROM PERSONS P " +
    "INNER JOIN CITIES ON P.IDCITY = C.ID " +   
    "WHERE P.ID = @id", con)
cmd.Parameters.AddWithValue("@id" , your_id) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T08:49:59.167

我使用[brijpad](http://techbrij.com/brijpad/)复制长 SQL 查询，粘贴到左侧，高级选项卡 > 单击文本到 VB.NET，它将生成等效的 VB.NET 字符串并在我们的代码中使用它。

如果有任何参数，我使用“自定义格式”来生成命令参数语法。

```
mycmd.Parameters.AddWithValue("@Par" , parVal) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T08:53:58.940

[http://www.dpriver.com/pp/sqlformat.htm](http://www.dpriver.com/pp/sqlformat.htm)

对我来说最好的辅助代码格式化程序。您只需粘贴长 SQL 语句，它就会为 vbnet 生成可复制的代码。它不仅支持VBNet，还支持C#、PHP、Delphi等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T10:26:59.440

您真的*应该*在代码中使用[参数化查询](https://stackoverflow.com/questions/542510/how-do-i-create-a-parameterized-sql-query-why-should-i)而不是原始 SQL，而是为您的问题提供可能的答案：

您可以使用一个`StringBilder`类来添加改进的格式：

```
 Dim sb As New StringBuilder()
    With sb
        .Append("SELECT P.NAME, C.ID, C.NAME")
        .Append("  FROM PERSONS P ")
        .Append("  INNER JOIN CITIES ")
        .Append("    ON P.IDCITY = C.ID")
        .Append("  WHERE P.ID = {0}")
        Debug.WriteLine(sb.ToString)
    End With 
```

我创建了自己的 DataAccess 类，该类对此进行了扩展，并允许我连接查询并在每行末尾添加一个空格，以防我忘记添加一个空格（如您的示例所示）：

```
Class DataAccess
    Private _queryString As New StringBuilder(String.Empty)

    Public Sub QryAdd(ByVal query As String)
        _queryString.Append(query.TrimEnd + " ")
    End Sub

    Public ReadOnly Property QryStr As String
        Get
            Return _queryString.ToString.TrimEnd()
        End Get
    End Property
End Class 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T08:51:10.000

你可以这样做 ：

```
Dim strSQL As String = "SELECT P.NAME, C.ID, C.NAME FROM PERSONS P INNER JOIN CITIES ON P.IDCITY = C.ID WHERE P.ID = {0}"
Dim formattedSQL As String = String.Format(strSQL,your_id) 
```

**String.Format**将用 your_id 替换占位符“{0}”，your_id 是所选人员的 id。

# facebook - 使 FB Like 按钮将用户带到 FB 页面

> ID：10187935
> 
> 赞同：2
> 
> 时间：2012-04-17T08:44:36.993
> 
> 标签：facebook, facebook-like

单击我网站上的 Facebook Like 按钮时，我希望将用户的浏览器带到我的 Facebook 页面。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:49:51.490

这个有可能。

如果您使用 Javascript SDK 订阅 facebook 事件[http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

然后订阅 edge.create 事件，然后触发一些 js 来执行此操作：

```
 FB.Event.subscribe('edge.create',
    function(response) {
        window.location = "http://facebook.com/mypage";
    }
); 
```

希望这可以帮助

# amazon-ec2 - 确定请求延迟

> ID：10187938
> 
> 赞同：3
> 
> 时间：2012-04-17T08:44:47.493
> 
> 标签：amazon-ec2, go, latency

我正在努力在 Go 中本地创建一个 Pastry 版本。从[设计](http://research.microsoft.com/en-us/um/people/antr/PAST/pastry.pdf)[PDF]：

> 假设应用程序提供了一个功能，允许每个 Pastry 节点确定具有给定 IP 地址的节点到自身的“距离”。具有较低距离值的节点被认为是更可取的。应用程序应根据其选择的邻近度度量来实现此功能，使用诸如跟踪路由或 Internet 子网映射之类的网络服务，以及适当的缓存和近似技术以最小化开销。

我试图找出从 Go 中以编程方式确定两个 EC2 实例之间“接近度”（即网络延迟）的最佳方法。不幸的是，我对低级网络不够熟悉，无法区分我可以使用的不同类型的请求。谷歌搜索没有提出任何测量 Go 延迟的建议，一般延迟技术似乎总是 Linux 二进制文件，我希望以减少依赖项的名义避免这种情况。有什么帮助吗？

另外，我[注意到](https://stackoverflow.com/questions/4490168/amazon-ec2-latency)两个 EC2 实例之间的延迟应该在 1 毫秒的范围内。虽然我计划在 EC2 上使用该实现，但假设它可以在任何地方使用。延迟是否通常如此糟糕，以至于我应该努力确保两个节点的网络接近？请记住，大多数 Pastry 请求可以以集群中服务器数量的 16 为基数提供服务（因此对于 10,000 台服务器，平均大约需要 3 个请求才能找到正在搜索的密钥）。例如，从 EC2 的亚太地区到 EC2 的美国东部地区的延迟是否足以证明增加节点时延迟检查引入的复杂性和开销是合理的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T22:03:12.177

网络中一个常见的距离度量是计算数据包到达其目的地所需的**跳数（中间的节点跳数）。**您引用的文本中也提到了该指标。即使对于您提到的低延迟环境（EC2“本地”），这也可以为您提供足够的距离值。

对于 go 逻辑本身，人们会认为**[`net`](http://golang.org/pkg/net/#Dial)包**就是你要找的东西。事实上，**对于延迟测试（ICMP ping）**，您可以使用它来创建 IP 连接

```
conn, err := net.Dial("ip4", "127.0.0.1") 
```

创建您的**ICMP 包**结构和数据，然后发送。（参见[ICMP 上的 Wikipedia 页面](https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol#ICMP_segment_structure)；IPv6 需要不同的格式。）不幸的是，您不能像使用 TCP 和 UDP 那样直接创建 ICMP 连接，因此您必须自己处理包结构。

由于`conn`type[`Conn`](http://golang.org/pkg/net/#Conn)是 a `Writer`，然后您可以将您的数据（您定义的 ICMP 数据）传递给它。

在**ICMP 类型**字段中，您可以指定消息类型。值 8、1 和 30 是您要查找的值。8 对于您的回显请求，回复将是类型 1。也许 30 可以为您提供更多信息。

不幸的是，为了**计算网络跳数**，您将需要 IP 数据包标头字段。这意味着，您将不得不**构建自己的 IP 数据包**，这`net`似乎不允许。

检查 的[来源`Dial()`](http://golang.org/src/pkg/net/dial.go?s=2299:2340#L81)，它使用`internetSocket`未导出/公开的 。我不确定我是否遗漏了什么，但似乎没有简单的方法来构建您自己的 IP 数据包以发送，并具有可自定义的标头值。您必须进一步检查如何使用该代码/概念`DialIP`发送包，`internetSocket`并复制和调整该代码/概念。或者，您可以使用 cgo 和系统库来构建您自己的包（虽然这会增加更多的复杂性）。

如果您打算使用**[IPv6](https://en.wikipedia.org/wiki/IPv6_packet#Fixed_header)**，则（还）必须研究[ICMPv6](https://en.wikipedia.org/wiki/ICMPv6)。这两个软件包的 v4 版本具有不同的结构。

* * *

所以，我建议使用简单的延迟（定时 ping）作为简单的（r）实现，然后在以后/之后添加节点跳，如果你需要的话。如果你有两个地方，也许你也想结合这两个（更少的跳跃并不意味着更好；想想长的海外电缆等）。

# rsync - Rsync以前的半复制文件？

> ID：10187941
> 
> 赞同：0
> 
> 时间：2012-04-17T08:44:49.587
> 
> 标签：rsync

我发现`rsync`在以下两种情况下表现不同：

(1) 使用 using 复制所有文件`rsync`，然后`rsync`再次使用会很快（跳过所有文件）；

(2)`cp`用于复制文件，然后使用 rsync 会很慢（或者可能是重新运行？）

所以我的困惑是“是否会`rsync`在文件上生成任何内部内容以便它可以引用以避免重复检查？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:56:38.673

`rsync -a` (in archive mode, which I presume you ran) retains all attributes of a file, including creation/modification time. `cp` does not. I suppose something in the file attributes that's different when you use `cp`, probably a later modification time, in the destination files, made `rsync` think they are newer files, so it either recopied them or had to check the contents.

# html - 使添加的元素可拖动

> ID：10187944
> 
> 赞同：0
> 
> 时间：2012-04-17T08:45:00.893
> 
> 标签：html

我正在使用一个可点击的图标，一旦你点击它。它将在 div 中添加另一个图标，我想将创建的图标设置为可拖动的，并且从检查元素中它是可拖动的，但我无法将它拖动到我的屏幕上。有人可以检查似乎是什么问题吗？

HTML：

```
<div id = icon>
<img class="icon" src="../../Pictures/bulb.png" width="50" height="50"/>
<img class="icon" src="../../Pictures/snow.png" width="50" height="50"/>
</div> 
```

脚本

```
$(function () {
 $('.icon').click(function () { DrawImage($(this).attr('src')); });
});
function DrawImage(a) {
    image = document.createElement('img');
    image.setAttribute('class', 'drag');
    image.setAttribute('src', a);
    image.setAttribute('draggable', 'true');
    image.setAttribute('style', 'position:relative; top:0px; left:0px;');
    image.height = 50;
    image.width = 50;
    $('#icon').append(image);
} 
```

在我的 html 头上添加了这个

```
 <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery-ui-1.8.11.js")"></script> 
```

更新：

通过克隆图像元素并为其分配一些属性来修复它

```
var iconnew = $(iconimg).clone();
iconnew.attr({ "id": "clone"});
iconnew.css({'top':mouseY, 'left':mouseX})
iconnew.appendTo('#drag').draggable({ containment: '#bg' }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:21:28.077

当您将图像元素附加到 DOM 时，我认为您实际上并没有在图像元素上启用可拖动功能。您可以尝试将 DrawImage 函数更改为：

[http://jsfiddle.net/qDZsb/](http://jsfiddle.net/qDZsb/)

# android - 如何在 Android 应用程序中在 Google Plus 上发布图像

> ID：10187949
> 
> 赞同：3
> 
> 时间：2012-04-17T08:45:15.637
> 
> 标签：android, image, post, camera, google-plus

我已在 android 应用程序中将图像发布到**Google Plus帐户。**我用相机拍了一张照片，我想把它发布到我的 google+ 帐户上。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T20:59:52.003

您可以指定 MediaStore Uri（类似于**content://media/external/images/media/42**）而不是文件系统上的绝对路径。

这是一个使用相机拍照并使用该图像触发 ACTION_SEND 意图的示例。如果安装了 Google+ 应用程序，用户将能够发布他们从 Google+ 应用程序拍摄的图像。

```
public class MyActivity extends Activity {
  ...
  static final int IMAGE_REQUEST = 0;

  protected void pickImage() {
    Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(intent, IMAGE_REQUEST);
  }

  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == IMAGE_REQUEST) {
      Uri uri = data.getData();

      Intent intent = new Intent(Intent.ACTION_SEND);
      intent.setType("image/png");
      // uri looks like content://media/external/images/media/42
      intent.putExtra(Intent.EXTRA_STREAM, uri);
      startActivity(Intent.createChooser(i , "Share"));
    }
  }
} 
```

# windows-phone-7 - 使用 http 请求的 Windows phone Web 服务调用

> ID：10187950
> 
> 赞同：0
> 
> 时间：2012-04-17T08:45:22.970
> 
> 标签：windows-phone-7, windows-phone-7.1

在我提出网络请求时遇到问题之前的一段时间。当我多次调用同一个网络服务时，我得到了相同的数据集。似乎网络库缓存了 http 请求响应。最初我在标头中添加了 NO-CACHE，但它不起作用。因此我添加了一个时间戳字段作为一种可行的解决方法。但我想知道是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:10:33.940

您能否在请求的 URL 末尾添加时间戳？例如`http://somewhere.com/Request?2012-04-17-10-09-31`或`http://somewhere.com/Request?param=val&ts=2012-04-17-10-09-31`

# iphone - Iphone中的Plist序列化？

> ID：10187951
> 
> 赞同：0
> 
> 时间：2012-04-17T08:45:26.293
> 
> 标签：iphone

我有一个使用此代码的 iPhone 应用程序。

```
NSPropertyListFormat plistFormat;
NSDictionary *payloadDict = [NSPropertyListSerialization 
                       propertyListWithData:subscriptionProduct.receipt 
                                    options:NSPropertyListImmutable 
                                     format:&plistFormat 
                                       error:nil]; 
```

我在哪里正确获取subscriptionProduct.receipt，reciept 是一个nsdata，它在subscriptionProduct 类中声明。但是在转换之后，当我尝试打印payloadDict 时，它被定义为null。任何人都可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:08:13.547

尝试从方法中获取错误并显示它：

```
NSPropertyListFormat plistFormat;
NSError *parseError;
NSDictionary *payloadDict = [NSPropertyListSerialization 
                       propertyListWithData:subscriptionProduct.receipt 
                                    options:NSPropertyListImmutable 
                                     format:&plistFormat 
                                      error:&parseError]; 

NSLog(@"payloadDict = %@", payloadDict);
NSLog(@"parseError = %@", parseError); 
```

如果`parseError`是`nil`，则属性列表序列化*认为*它正确读取了数据。如果没有，它的内容应该告诉你去哪里看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:23:09.967

您的评论似乎说您要构造一个`NSDictionary`存储对象的新对象`subscriptionProduct.receipt`。

你可以这样做：

```
NSMutableDictionary *payloadDict = [NSMutableDictionary dictionary];

// Always check if values are nil before adding them to a dictionary.
if (subscriptionProduct.receipt)
    [payloadDict setObject:subscriptionProduct.receipt forKey:@"receipt"]; 
```

如果您想稍后加载收据，可以这样做：

```
NSData *receiptData = [payloadDict objectForKey:@"receipt"]; 
```

# xcode - 自定义表格视图单元格必须是原型单元格而不是静态单元格吗？

> ID：10187960
> 
> 赞同：0
> 
> 时间：2012-04-17T08:45:55.087
> 
> 标签：xcode, uitableview

我一直在谷歌搜索，似乎只能找到如何将自定义单元格创建为原型单元格的示例。

我的问题是：我可以将自定义表格视图单元格创建为静态单元格吗？

提前致谢！前夕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:20:41.010

不，在 Storyboard 中，您可以通过将对象拖入单元格来编辑您想要的单元格。

您只需要创建一个新的 UITableViewCell 类并在 Storyboard 中使用该类，如果需要将所有内容连接起来并使用以下方法：

```
#import "YourTableViewCell.h"
- (YourTableViewCell *)tableView:(YourTableViewCell *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

....

    [self configureCell:cell atIndexPath:indexPath];

}

- (void)configureCell:(YourTableViewCell *)cell atIndexPath:(NSIndexPath  *)indexPath 
```

# grails - Intellij IDEA 无法评估 Groovy 表达式

> ID：10187961
> 
> 赞同：0
> 
> 时间：2012-04-17T08:45:59.750
> 
> 标签：grails, groovy, intellij-idea

有时 Idea 无法评估 Groovy 表达式并引发错误：`java.lang.IllegalArgumentException : Invalid method`. 您可以在屏幕上检查它 - 实验变量存在并且应该显示它......有![在此处输入图像描述](../Images/b88c0ae953f40c538beba307dc693d06.png)
什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:47:23.283

我认为问题可能出在 deguger 使用的对象 toString 方法中。

# c# - 无法使用 MVC 4 beta 修改表中的记录但我可以添加记录

> ID：10187962
> 
> 赞同：0
> 
> 时间：2012-04-17T08:46:13.340
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我是 MVC 框架的新手。我正在使用 MVC 4 beta，现在遇到了一些麻烦。我用谷歌搜索了很多，但找不到解决我的问题的方法，所以在这里我希望有人能提供帮助。我的问题是我有两个数据库

```
 Database1 db1=new Database1();
   Database2 db2=new Database2();

   tbl1 tb1=new tbl1(); /// from db1
   tbl2 tb2=new tbl2(); // from db2 
```

两个表具有相同的属性，除了在 db2 中不包含任何属性的任何关系。

这是我的代码

```
 public bool Save(int id=0){
   tb1 = db1.tbl1.Single(tr => tr.id == id);

   tb2.a=tb1.a;
   tb2.b=tb1.b;
   tb2.c=tb1.c;
   tb2.d=tb1.d;
   tb2.e=tb1.e;

    if (db2.tbl1.SingleOrDefault(tr => tr.rid == id) == null)
            {
                db2.tbl1.AddObject(tb2); /// This works perfectly fine
            }
            else
            {

                db2.tbl1.Attach(tb2); /// This gives me an error Object Reference does not set to an instance of an object 
                db2.ObjectStateManager.ChangeObjectState(tb2, EntityState.Modified);

            }
            db2.SaveChanges();
   } 
```

有趣的是，我在另一个控制器上使用了相同的方法，它的工作原理就像一个魅力。任何建议为什么会发生以及如何解决它都会非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:34:23.993

我用谷歌搜索了很多，并在 MSDN 上找到了解决方案。这是我如何解决我刚刚删除该行的问题

```
 db2.tbl1.Attach(tb2); 
```

它就像一个魅力。

这是对这里发生的事情的一些解释，当我在 DB 中搜索记录是否存在时，如果它存在，那么它会自动附加到 DBcontext，因此您只需像这样更改 DB 的状态

```
 db2.ObjectStateManager.ChangeObjectState(tb2, EntityState.Modified); 
```

并保存记录。

```
 db2.SaveChanges(); 
```

如果在数据库中没有找到记录，那么您必须将新的 dbcontext 添加到 db2 作为 db2.AddObject(tb2);

并保存记录。

我希望这会对某人有所帮助。

里亚萨特

# c# - 通过键入选择组合框中的项目

> ID：10187963
> 
> 赞同：43
> 
> 时间：2012-04-17T08:46:32.473
> 
> 标签：c#, winforms, combobox

我有一个组合框，里面有数百个项目。用户必须能够在组合框中键入文本。当用户键入文本时，必须选择或列出以键入值开头的项目。用户必须能够连续打字。我的组合框 DropDownStyle 是 DropDownList

例如：通过键入在组合框中选择名称时，它只允许一个字母。因此，如果我输入“A”，它将跳转到以“A”开头的第一个字母。当我连续键入时，组合框选定的项目会根据当前按键发生变化。如果我按“As”，组合框会查看以“s”开头的项目。

我正在使用 Win Forms。

提前致谢..

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-04-18T04:35:47.727

```
comboBox1.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDown;
comboBox1.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
comboBox1.AutoCompleteSource = AutoCompleteSource.ListItems; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T08:55:17.983

您必须连接到 TextChanged 事件。当文本更改时，过滤列表（使用 DataView）并获取第一个结果的文本，将组合框的文本设置为该文本。当然，您必须检查您的处理程序，以确定是否处理该事件（当您更改文本时，将触发另一个 TextChanged 事件）。当然，您还希望突出显示他们输入的文本，并将插入符号放在适当的位置。

# c++ - boost::details::pool::pthread_mutex 和 boost::details::pool::null_mutex

> ID：10187966
> 
> 赞同：1
> 
> 时间：2012-04-17T08:46:53.180
> 
> 标签：c++, boost, pthreads, mutex

`boost::details::pool::pthread_mutex`和有什么区别`boost::details::pool::null_mutex`。

我看到在最新的 boost 版本 - 1.42 中，该类 `boost::details::pool::pthread_mutex`已被删除。我应该改用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:40:50.597

`boost::details::pool::null_mutex`是一个什么都不做的互斥体（锁总是立即成功）。当您不使用线程时，它是合适的。Boost 池库根据以下代码段选择它将使用哪种互斥锁来同步对临界区的访问，以及互斥锁类型的 typedef `boost\pool\detail\mutex.hpp`：

```
#if !defined(BOOST_HAS_THREADS) || defined(BOOST_NO_MT) || defined(BOOST_POOL_NO_MT)
  typedef null_mutex default_mutex;
#else
  typedef boost::mutex default_mutex;
#endif 
```

换句话说，如果配置说不涉及线程（对于整个 Boost，或者特别是对于池库），那么`null_mutex`将使用 （这基本上是一个 nop）。

如果要支持线程，则将`boost::mutex`使用来自 Boost 线程库的类型（如果您的系统使用 pthread，它将是基于 pthread 的互斥锁）。

# javascript - getJSON() JavaScript 函数未调用

> ID：10187969
> 
> 赞同：0
> 
> 时间：2012-04-17T08:46:59.703
> 
> 标签：javascript, json, jsp

我正在尝试使用 json 对象从 jsp 文件传输数据。

这是我的 JavaScript 代码：

```
// action when item file is clicked
$("li span.file").click(function(){

// get the ID
alert(' Forward the url when clicked WITH ID => ' + $(this).attr('id'));

$.getJSON('BomItemToJSON', function(data) {
    alert('entered getJSON()');
    $.each(data, function(i, item) {
        alert('entered each()');
        var id = item.id;
        var description = item.description;

        alert('description: ' + description);

        formObject = document.forms['itemForm'];
        formObject.elements['itemId'].value = id;
        formObject.elements['itemDescription'].value = description;

        alert('done with javascirpt');
    });
});

}); 
```

这是我的 Servlet，应该由 JavaScript 调用：

```
public class BomItemToJSON extends HttpServlet {

private static final long serialVersionUID = 1L;

@PersistenceContext(unitName = "xxx")
public EntityManager em;

@Resource
UserTransaction utx;

    Logger logger = Logger.getLogger(this.getClass().getCanonicalName());

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    System.out.println("bom item to json servlet has been called.");
    try {
        utx.begin();
    } catch (NotSupportedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SystemException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    //int id = Integer.parseInt(request.getParameter("id"));
    BomHandling bh = new BomHandling(em, utx);

    BomItem item = bh.getBomItem(63788);
    Gson gson = new Gson();
    String json = gson.toJson(item);

    System.out.println("Json: " + json);

    response.setContentType("text/plain");
    response.setCharacterEncoding("UTF-8");
    response.getWriter().write(json);

    try {
        utx.commit();
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (RollbackException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (HeuristicMixedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (HeuristicRollbackException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SystemException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

}

这是我映射 Servlet 的 web.xml：

```
 <servlet>
  <display-name>BomItemToJSON</display-name>
  <servlet-name>BomItemToJSON</servlet-name>
  <servlet-class>com.xxx.servlets.BomItemToJSON</servlet-class>
 </servlet>

<servlet-mapping>
  <servlet-name>BomItemToJSON</servlet-name>
  <url-pattern>/BomItemToJSON</url-pattern>
 </servlet-mapping> 
```

当我单击该项目时，我会收到一条警报，提示“使用 id 单击时转发 url”。但似乎没有调用 getJSON() 函数。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:00:59.833

一些调试提示可以找到缺少的内容：

1.  为 Firefox 使用 Firebug（我仍然发现其他等价物不太好）
2.  使用 console.log("text") 而不是警报，它们没有那么具有破坏性。记住在它们闯入 IE 等时删除它们/将它们注释掉。
3.  使用 Firebug 脚本选项卡中的调试器检查您的代码是否首先到达 getJson 函数。您还可以调试回调函数。
4.  使用 net 选项卡查看您的 /BomItemToJSON url 是否被调用以及向浏览器提供什么响应。

另外，我个人喜欢只在 jQuery 中使用 $.ajax 函数，而不是它们的简写形式。

# wpf - WPF 用户控件性能与窗口性能问题

> ID：10187970
> 
> 赞同：1
> 
> 时间：2012-04-17T08:47:02.817
> 
> 标签：wpf

我正在制作一个应用程序以在 Canvas 上动态添加用户控件并将它们拖动。首先，我用画布制作了一个窗口以将它们拖入，一切正常。然后我用窗口中的代码制作了一个用户控件。我将控件添加到新窗口，一切仍然正常。

现在我尝试将我的控件添加到主应用程序中，性能非常慢。控件仍然跟随鼠标，但速度很慢。该应用程序确实有几个其他用户控件。这种巨大的性能冲击来自哪里，我该如何避免呢？cpu 只使用 50%，当它运行良好时，它达到了 100%。

谢谢你的帮助

大卫

编辑：我解决了这个问题。通过移动用户控件，图像 url 中出现错误，导致应用程序无法顺利运行。

通过更改网址，一切恢复正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:15:26.667

我已经用 JoshSmiths DragCanvas 来做这种事情。它工作得很好，没有滞后。
[乔什史密斯 DragCanvas @ CodeProject](http://www.codeproject.com/Articles/15354/Dragging-Elements-in-a-Canvas)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T06:39:37.470

我解决了这个问题。通过移动用户控件，图像 url 中出现错误，导致应用程序无法顺利运行。

通过更改网址，一切恢复正常。

如果您遇到突然的性能问题，请务必检查您的网址。

# jquery - jquery 选择每个 ul 的第一个 lis

> ID：10187975
> 
> 赞同：1
> 
> 时间：2012-04-17T08:47:14.317
> 
> 标签：jquery

我需要在这个结构中选择每个 ul 的第一个 lis：

```
<div>
    <ul>
        <li></li>
        <li></li>
        <li></li>
    </ul>
    <ul>
        <li></li>
        <li></li>
        <li></li>
    </ul>
</div> 
```

我有这个选择器：`container.find('div > ul > li:first')`但是 jquery 引擎首先解析`div > ul > li`，然后根据`:first`. 但我想要每个 ul 的第一个 li，例如：`div > ul > (li:first)`。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T08:49:09.353

你想要`:first-child`选择器：

> **描述：选择作为其父元素的第一个子元素的所有元素。**
> 
> *虽然 :first 只匹配一个元素，但 :first-child 选择器可以匹配多个：每个父元素一个。这相当于:nth-child(1)。*

参考：[http ://api.jquery.com/first-child-selector/](http://api.jquery.com/first-child-selector/)

**例子：**

```
container.find('div ul > li:first-child'); 
```

*或者，如果您有多个级别的`ul`包含`li`'s：*

```
container.find('div > ul > li:first-child'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:53:05.963

您正在寻找 jQuery 的 each() 函数：

[http://api.jquery.com/each/](http://api.jquery.com/each/)

```
$("#yourdiv ul").each(function(){
    $(this).find("li:first");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:46:10.983

```
$("#mydiv ul").each(function(){
 $('li:eq(0)',this);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T08:54:34.420

在 li 元素上使用“first-child”选择器

$("ul li:first-child")

# android - 如何在一个按钮上启动两个异步任务单击一个活动android

> ID：10187981
> 
> 赞同：0
> 
> 时间：2012-04-17T08:47:36.563
> 
> 标签：android, android-asynctask

我正在开发一个应用程序，我需要`AsyncTask`在同一个活动中单击一次按钮调用两个 s。怎么做？

任何帮助表示赞赏。也请提供一些代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T08:55:52.153

Nothing fancy, just start them one by one, they are async anyway.

```
private class TaskA<A,B,C> extends AsyncTask{}
private class TaskB<A,B,C> extends AsyncTask{}

onClick(View v){
    (new TaskA()).execute();
    (new TaskB()).execute();
} 
```

# redmine - Redmine 及相关问题

> ID：10187990
> 
> 赞同：2
> 
> 时间：2012-04-17T08:48:05.460
> 
> 标签：redmine, redmine-plugins

有没有办法以“相关问题”状态导出票证？

据我所知，我没有机会导出有关问题的信息。

谢谢，

马里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:28:54.653

目前没有办法，除非你想直接去数据库。如果你想在 java 中这样做，你可以在谷歌代码上使用 redmine-java-model。

# objective-c - 在实现中使用 __weak 修改参数的存储

> ID：10187993
> 
> 赞同：7
> 
> 时间：2012-04-17T08:48:12.117
> 
> 标签：objective-c, memory-management, automatic-ref-counting, objective-c-blocks

`__weak`在方法的实现签名中使用存储修饰符是否有效？特别是如果它不是方法的公共签名的一部分？例如：

```
- (UIView *)tableView:(__weak UITableView *)tableView viewForHeaderInSection:(NSInteger)sectionIndex
{
    UIView *view = [ABHeaderView view];
    view.actionBlock = ^{
        [tableView doSomething];
    }
    // ...
    return view;
} 
```

这是否正确`tableView`用作弱指针？或者我真的应该做类似的事情`__weak *weakTableView = tableView;`并`weakTableView`在块内使用吗？

我没有收到任何警告或错误，并且 clang 静态分析器不会引发任何警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:59:07.673

当涉及动态调度和覆盖时，不要指望存储修饰符或属性被“动态”尊重（1）。

此方法在 UIKit 中正式声明。使用 ARC 时编译器可能会出错，因为它可能会在调用时将选择器与原始声明匹配。也就是说，您的声明对 UIKit 不可见，如果它也被编译为 ARC，UIKit 会将其视为默认/强。如果声明不匹配，或者即使它们在客户端+调用者翻译中不可见，也可能发生这种情况。

参数类型/属性不是选择器的一部分，也不是动态分配的。ARC 在这里应该假设是强的，并且*调用者*持有引用。这个特定的例子可能不会导致运行时错误，但这是一个有问题的做法，我认为可以找到错误。[我已经在这个答案中](https://stackoverflow.com/questions/7770872/deep-copy-of-dictionaries-gives-analyze-error-in-xcode-4-2/7770914#7770914)证明了这一点。从根本上说，这是一个类似的概念。

动态 objc 调度的简单规则：在重新声明、定义和覆盖时始终匹配原始声明的签名。唯一可能的例外是不会改变签名的 C 兼容限定符（我见过的 ObjC 程序中非常*不常见的做法）。*

(1) 从技术上讲，它不是覆盖，而是协议方法的实现。无论如何，sig 应该是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:19:39.937

`__strong`或`__weak`存储修饰符是您内部实现的一部分，据我所知。它们不会影响方法调用者生成的代码，所以我认为你现在很安全，将来很可能。

不过，我确实认为它的风格很差，因此您将引用复制到弱引用的建议似乎是一个很好的解决方案。

# vb.net - 在 DataRow 中循环 DataColumns

> ID：10187998
> 
> 赞同：2
> 
> 时间：2012-04-17T08:48:32.627
> 
> 标签：vb.net, dataset

我正在将数据表内容转换为字符串，假设数据集有 12 行和 8 列。最后，字典包含 12 行或 96 列。下面的代码有什么问题，如何重置行？

蒂亚。

```
 Dim ds As DataSet = ClsDB.GetDataSet(sql)

    If Not ds Is Nothing AndAlso ds.Tables.Count > 0 Then
        Dim row As New List(Of KeyValuePair(Of String, String))
        Dim dict As New List(Of KeyValuePair(Of Integer, Object))
        Dim dt As DataTable = ds.Tables(0)
        Dim i As Integer = 0 

        For Each dr As DataRow In dt.Rows 
            For Each dc As DataColumn In dt.Columns
                row.Add(New KeyValuePair(Of String, String)(dc.ColumnName, IIf(Not IsDBNull(dr.Item(dc.ColumnName)), dr.Item(dc.ColumnName), "")))
            Next
            dict.Add(New KeyValuePair(Of Integer, Object)(i, row))
            i += i 
        Next

        Return New JavaScriptSerializer().Serialize(dict)
    Else
        Return "No Data"
    End If 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T13:52:41.370

您应该`row`为each 重新初始化`dr`，实际上您不需要在循环`row`之外声明。`dr`

```
For Each dr As DataRow In dt.Rows
    Dim row As New List(Of KeyValuePair(Of String, String))   // <<-         
    For Each dc As DataColumn In dt.Columns                 
        row.Add(...
    Next             
    dict.Add(...
Next 
```