# StackOverflow 问答 10726000-10726999

# c# - 将引用存储在另一个变量中

> ID：10726010
> 
> 赞同：5
> 
> 时间：2012-05-23T18:46:14.870
> 
> 标签：c#, .net, reference

我一直在搜索，但我找不到任何方法可以在某个变量中存储对另一个变量的引用。我正在尝试创建一个类来撤消用户所做的事情；

```
class UndoAction
{
    public object var;
    public object val;
    public UndoAction(ref object var, object val)
    {
        this.var = var;
        this.val = val;
    }

    public static List<UndoAction> history = new List<UndoAction>();
    public static void AddHistory(ref object var, object val)
    {
        history.Add(new UndoAction(ref var, val));
    }
} 
```

我想你可以在这里看到我想要实现的目标。

我遇到的问题；

```
this.var = var; 
```

不存储引用，而是引用的“var”的值。如何存储引用本身，以便我可以简单地运行；

```
this.var = val; 
```

在我的情况下“撤消”一个动作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T18:51:17.033

标准安全 C# 根本不支持这一点。底层框架几乎包含所有必要的概念，但它们并未在 C# 语言中公开。但即便如此，这样的引用也不能存储在字段中。

您可以拥有的最好的方法是将其包装在某个使用委托的类中。相比之下，这显然相当昂贵，但除非您在紧密循环中修改内容，否则这可能就足够了：

```
class VarRef<T>
{
    private Func<T> _get;
    private Action<T> _set;

    public VarRef(Func<T> @get, Action<T> @set)
    {
        _get = @get;
        _set = @set;
    }

    public T Value
    {
        get { return _get(); }
        set { _set(value); }
    }
} 
```

然后像这样使用它：

```
var myVar = ...
var myVarRef = new VarRef<T>(() => myVar, val => { myVar = val; });

...

myVarRef.Value = "47";
Console.WriteLine(myVar); // writes 47 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T20:41:39.643

你走错路了。装箱/拆箱不是您需要的，您需要保存对象引用和特定属性以及该属性的值。

不要试图建立一个完全通用的系统，可以撤销人类的创造。从简单开始。

首先使用诸如... IUndoable 之类的界面设置某些对象。

使用 [UnduableProperty] 之类的属性标记某些属性 使用 INotifyPropertyChange 接口并使用 PropertyChanged 事件。当一个属性改变时，监听它，检查它是否可以撤销，并保存它的值。

不要害怕使用反射，但如果可以解决速度问题，请尽量避免使用它。

保存对象，保存属性，保存值。创建一个管理器对象来管理撤消过程。

如果您在保存复杂结构的值时遇到问题，请不要忘记 ISerializable。

祝你好运。

# java - Quartz_Spring_Tomcat 示例

> ID：10726011
> 
> 赞同：0
> 
> 时间：2012-05-23T18:46:17.280
> 
> 标签：java, spring, quartz-scheduler, tomcat7

这就是我所拥有的：

石英 2.1.3

春天 3.1.1

雄猫 7.0

我有一个非网络应用程序，它与石英（使用 crontrigger）和 spring 一起运行良好。现在我需要这个应用程序启用网络（基于简单 JSP 的应用程序）。我已经搜索了网络，但可以找到示例。

任何人都可以给我指出一个简单的 HOWTO/网页吗？我不想对现有的 spring+quartz 应用程序进行任何更改，但只需要在此之上添加一些 web 层。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:53:58.693

我之前使用过[appfuse](http://appfuse.org/display/APF/AppFuse+QuickStart)来运行一个像样的样板应用程序。过去，他们允许您自定义示例应用程序中使用的框架。我相信你仍然可以做到这一点。

# css - 如何制作这个按钮是 CSS with Angled , Drop shadow, Inset shadow，宽度灵活

> ID：10726013
> 
> 赞同：4
> 
> 时间：2012-05-23T18:46:21.163
> 
> 标签：css, webkit, mobile-webkit

如何使这个按钮是具有角度、阴影、插入阴影的 CSS，宽度灵活？

![在此处输入图像描述](../Images/5e38a55ec23dc7b5c72f632673a9135f.png)

我试图在这里制作它[http://jsfiddle.net/jitendravyas/6RsnN/](http://jsfiddle.net/jitendravyas/6RsnN/)但不知道如何给它角度以及如何在它周围创建切口边框。

并且按钮的宽度应该是灵活的。

我只为 iphone 制作这个，所以允许使用完整的 CSS3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T22:18:09.977

## [最终结果](http://dabblet.com/gist/2777220)是：

[纯 css 蓝色按钮 http://img832.imageshack.us/img832/8258/664d7b5656434db68cbee8b.png](http://img832.imageshack.us/img832/8258/664d7b5656434db68cbee8b.png)

## [灵活性](http://dabblet.com/gist/2782854)的展示：

![在此处输入图像描述](../Images/209fd2685562f3793c194ec54cd530ca.png) 虽然我试着做一个像图片中的按钮，但有些部分可能不一样。将其视为*概念验证*。

这个按钮可以是纯`CSS` ~~的，只有用这个标记有很多额外~~的标记：

```
<a class="btn">
    <span class="triangle"></span>
    <span class="btn_inner">
        <span class="triangle"></span>
        Back
    </span>
</a> 
```

使用 box-shadow 创建三角形的主要技巧包括几个步骤：

*   **步骤 1**。创建元素'.triangle' - 它将是真正三角形的包装。

*   **步骤 2**。应用`position: absolute;`，修复其`width`和`height`：
    红色背景色仅用于演示
    ![第4步](../Images/02ad6ec72546408e19e8161e99b35bf1.png)

*   **步骤 3**。**创建大方形元素 '.triangle::before' - 在第 6 步**之后它将是“真正的”三角形

***   **第 4 步**。转动 45 度 ( `transform: rotate(45deg)`)。

    *   **步骤 5**。添加盒子阴影。
    第 3 步之后的结果是：
    ![第三步](../Images/27520647c510a92f1a79673382e5cddc.png)

    *   **步骤 6**。添加`overflow: hidden;` ***Ta-dum！***
    ![第 5 步](../Images/e08bf65ae8c6f5230d37ab38e7f33fb2.png)** 

 **就`.tag_inner`用同样的伎俩，但`box-shadow`应该不是`inset`但正常。

请注意，如果您要使用此技巧，请始终检查`vendor`必须使用哪些前缀，并将没有前缀的属性放在最后一个位置。

**更新：**使标记更加语义化——三角形技巧只有一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:28:34.177

这是您的角度，但由于它已经是边框，因此您不能在其上添加边框：

```
body {padding:40px; background-color: #1693da;}
.input {
    display:block;
    text-decoration:none;
    padding:10px 60px;    
    background:#117ebb;
    font-size:60px;
    color:#fff;
    border-radius: 20px;
    box-shadow: 0px 10px 0px #003355;
    position:relative;
}

.input:after {
    position:absolute;
    top:0;
    left:-32px;
    content:" ";
    width: 0;
    height: 0px;
    border-top: 45px solid transparent;
    border-bottom: 45px solid transparent;
    border-right:45px solid #117ebb;
} 
```**

# c# - Castle Active Record - 在初始化之前指定要加载的程序集

> ID：10726014
> 
> 赞同：0
> 
> 时间：2012-05-23T18:46:22.593
> 
> 标签：c#, castle-activerecord

我们计划的框架分为多个模块，负责单个工作单元，它们不应该相互了解。

但是，每个模块都可以有自己的域对象（我知道城堡文档更喜欢一个程序集）。

我知道您可以在 Initialize 之后使用以下方法添加程序集：

```
ActiveRecordStarter.RegisterAssemblies(typeof(SomeModuleSpecificClass).Assembly); 
```

但是，如果需要，我希望每个模块都注册自己，并且在很久以后才真正初始化城堡。

目前，它并不像首先启动 ActiveRecord 那样简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:42:23.683

我们有相同的，我从来没有看到任何关于只有一个带有商业对象的程序集。我只是分析了启动目录中的所有程序集，并从中加载/初始化了所有可能的 AcitveRecord 类型。您还可以定义一个字符串列表来识别和加载您的 main/starup-assembly (*.exe) 设置中的程序集或应扫描的目录列表。或者所有这些。

问候 Juy Juka

# .net - VB.NET 4.0 中的类属性

> ID：10726016
> 
> 赞同：2
> 
> 时间：2012-05-23T18:46:25.243
> 
> 标签：.net, vb.net

我被指派记录一些新代码，但我不知道下面的代码是如何工作的。这是`Sub`公开课的新内容。

我猜“r”代表行，但是这三个属性是如何获取数据的呢？我在代码中找不到任何有助于阐明这一点的内容。

```
Protected Sub New(ByVal r As DataRow)
    UserID = r.Field(Of Int32)("userID")
    OfficialGroupID = r.Field(Of Guid?)("officialGroupID")
    WorkID = r.Field(Of Int32)("workID")
End Sub 
```

这里发生了什么？

[（我是 .NET 的新手，来自[ASP Classic](http://en.wikipedia.org/wiki/Active_Server_Pages)。）]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:49:01.677

这是一个构造函数 - 它获取传递给它的 DataRow（“r”），并使用该行中的字段值来初始化其属性。

基本上，当创建此类型时，您必须传递一个`DataRow`已经初始化的（并且具有所有值）。对象的三个属性（`UserID`、`WorkID`和`OfficialGroupID`）将从行的“userID”、“workID”等字段中获取它们的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:51:09.990

`r`是一个[DataRow](http://msdn.microsoft.com/en-us/library/system.data.datarow.aspx)。它有一个扩展方法`.Field`：

```
WorkID = r.Field(Of Int32)("workID") 
```

这意味着：设置`WorkID`为数据行中名为“workID”的列的值，该值的类型为`Int32`.

# joomla - Joomla 1.5 调用 get_path('admin_html') 返回 Null

> ID：10726019
> 
> 赞同：0
> 
> 时间：2012-05-23T18:46:33.817
> 
> 标签：joomla, joomla1.5

在 admin.categories.php 文件的第 18 行有

```
require_once( JApplicationHelper::getPath( 'admin_html' ) ); 
```

助手库文件没有被修改，它仍然读取

```
function getPath( $varname, $user_option=null )
$check = ( ( $varname == 'mod0_xml' ) || ( $varname == 'mod1_xml' ) );

if ( !$user_option && !$check ) {
    $user_option = JRequest::getCmd('option');
} else {
    $user_option = JFilterInput::clean($user_option, 'path');
}

$result = null;
$name   = substr( $user_option, 4 );
...    
case 'admin_html':
    $path   = DS.'components'.DS. $user_option .DS.'admin.'. $name .'.html.php';
    $result = JApplicationHelper::_checkPath( $path, -1 );
    break; 
```

所以它最终会构建一个路径'/components//admin..html.php'，因为 $name 和 $user_option 变量都是空的，对吧？然后检查路径失败，在失败期间返回 null。据我所知，这些代码都没有被修改过。那么给了什么？有人指出我正确的方向吗？

这导致的问题是它在无法打开所需文件时引发致命错误。所以我无法打开类别管理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T00:08:41.497

因此，当您`Category Manager`从`Content`菜单中选择时，使用和`getPath()`调用。`$varname == 'admin_html'``$user_option == null`

这意味着第一个`if()`为真（因为`null`等于`false`和`$check`是`false`）`$user_option`被设置为`com_categories`（的结果`JRequest::getCmd('option'); line`）

然后`$name`设置为`'categories'`，因此当`switch()`获取到`admin_html`它设置`$path`为的情况时`/components/com_categories/admin.categories.html.php`（假设本地目录分隔符设置为`/`）。

因为这是正确的路径，并且该文件通常包含在 J1.5 安装中，所以出现了其他问题（或文件已被删除/删除）

# python - 谷歌图表 y 轴值

> ID：10726022
> 
> 赞同：14
> 
> 时间：2012-05-23T18:46:41.497
> 
> 标签：python, charts, google-visualization

我有一组配对数据：

```
[(x_1,y_1), (x_2,y_2), (x_3, y_3)] 
```

我想`XYChart`使用python[`GChartWrapper`](https://code.google.com/p/google-chartwrapper/)库来制作它，这样y轴值就是数据的转换。

一个简单的例子是一个日志图，其侧面有实际值，*例如*，如果`y_1`、`y_2`和`y_3`表示`log_10`值，那么该图将按原样绘制它们，但 y 轴上的标签可以是`10^{y_1}`、`10^{y_2}`和`10^{y_3}`。

我已经尝试过解决`chxr`这个问题，但这不起作用，因为改变的不仅仅是轴上的标签，而是整个轴。例如，如果我有上面的日志，并且我的 y 值为`0`, `1`, `2`。我希望图表看起来相同，但标签改为`10^0`, `10^1`, `10^2`,*即* `1`, `10`, `100`。但是因为 gchart 想要保留比例，所以它会尝试将其变成范围所在的位置，`0 -> 100`而不仅仅是更改标签。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:33:22.177

尝试使用`chxl`更改轴的标签，但不更改范围。[API chxl](https://developers.google.com/chart/image/docs/chart_params#axis_labels)

# html - 如何在我的网站上显示特殊字符？

> ID：10726028
> 
> 赞同：0
> 
> 时间：2012-05-23T18:47:10.883
> 
> 标签：html

我目前正在一个连接数据库并带来信息的网站上工作，其中一些信息具有特殊字符，因为它是波兰语，例如，在数据库中我有这个 ę 我在我的网站上打印出来，我已经添加了元

```
<meta charset="ISO-8859-2"> 
```

但不起作用，只有当我写 & #281; 这是不实用的，需要做很多工作，我的问题是，如果有人这样做，得到字符，比如ę，然后就这样打印出来？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:52:49.633

确保：

*   数据确实在 ISO-8859-2 中
*   数据不会被数据库的配置损坏
*   HTTP标头没有声称数据以不同的方式编码
*   无论您用来将数据从数据库中提取出来，都不会对其进行转码

您还应该放弃 ISO-8859-2（因为它*非常*传统）并转向 UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:50:25.800

使用 Unicode 实体。&#xxxx; 其中 xxxx 是字符的 Unicode 值。

# java - 刷新 Swing GUI

> ID：10726034
> 
> 赞同：0
> 
> 时间：2012-05-23T18:47:31.487
> 
> 标签：java, swing, user-interface, repaint

我有一个包含瓷砖的板，而瓷砖包含障碍物。障碍物可以是几种类型之一（墙壁、激光……）。

每一轮游戏我都会执行棋盘，棋盘会执行所有的障碍。一旦执行了障碍并且发生了某些变化，GUI 就会收到通知并刷新受影响的图块。

在 GUI 中，tile 是一个包含重叠图像 (JLabels) 的 OverLayLayout，因此所有重叠图像都是可见的。

现在的问题是当我执行它们时，它会很快，你什么也不会发生。例如，您没有看到激光束出现，播放器将被损坏，但您没有看到它发生...

所以我试图让游戏等待例如 500 毫秒，以便用户可以看到 GUI 更新。我尝试过（但可能做错了）：计时器、摆动计时器、倒计时……但我似乎无法让它工作。有想法该怎么解决这个吗？或者也许是等待的替代方案？

提前致谢！

**更新：** 板内执行如下所示：

```
Iterator<Obstacle> it = obstacles.iterator();
while (it.hasNext())
    it.next().execute(this);

CountDownLatch countDown = new CountDownLatch(1);
setChanged();
notifyObservers(countDown);
countDown.await(); 
```

GUI板的更新功能（被通知）如下所示：

```
final CountDownLatch countDown = (CountDownLatch) arg;
SwingUtilities.invokeLater(new Runnable(){
   public void run() {
      try {
        updateUI();
        wait(500);
      } catch (InterruptedException ex) { }
            countDown.countDown();
   }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T19:15:41.930

没有看到你的代码，就很难发现问题；我怀疑您正在阻止事件调度线程。

这个基于瓷砖的[游戏](http://robotchase.sourceforge.net/)使用一个实例`javax.swing.Timer`来动画播放。按`A`启用动画，然后单击一个空闲方块查看效果。您也许可以根据您的游戏调整该方法。

# visual-studio - 如何在 Visual Studio 2008 的绘图编辑器中将 .GIF 或 .PNG 文件中的像素设置为透明？

> ID：10726046
> 
> 赞同：12
> 
> 时间：2012-05-23T18:48:31.013
> 
> 标签：visual-studio, visual-studio-2008, png, gif

我的图形艺术家给了我一个 .PNG 文件，然后是与 .GIF 相同的文件。当我保存它时，透明背景像素实际上被设置为白色像素。有一次，我认为 VS 可以使用调色板中的这个粉色/鲑鱼复古电视小图标来制作透明颜色，但它不再显示了。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-12-10T13:08:52.170

使用 Visual Studio 编辑器打开文件 gif/png

在属性窗口中选择支持 alpha 通道的格式，即 32bpp BGRA

现在使用橡皮擦工具将这些像素设置为透明。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-03-22T12:35:50.760

在 Visual Studio 2015 图像编辑器中，我找到了一种使用橡皮擦工具执行此操作的简单方法。

1.  首先用图片中没有的足够独特的颜色填充您想要透明的背景（我认为这不是真的必要，经过一些试验......这取决于您尝试）。
2.  然后选择用于“选择相似颜色区域”的工具。
3.  然后点击你用新颜色填充的背景。只有您需要透明的区域才会被选中。
4.  现在使用具有尽可能多的大小（属性中的擦除宽度）的橡皮擦工具来轻松擦除不透明的背景。橡皮擦不会擦除您需要的图片。

然后点击图片外部，清除选择，得到透明背景的图片！与仅使用橡皮擦工具相比，此方法只需几秒钟即可完成。有时，您可能需要对图片进行润色，因为可能会清除所需图像的一些小部分。

**注意：**您必须将格式设置为“32bpp BGRA”才能执行此操作。

**编辑**：我发现你甚至不需要橡皮擦工具。第3步后，按delete，后台就消失了！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-04T04:15:09.987

在 VS 2013 图像编辑器中，以下内容适用于我：

选择 View-Toolbars-Image Editor 这样就可以看到工具栏了

从工具栏中选择橡皮擦。在属性窗口中设置擦除宽度为1

现在单击（“擦除”）像素会将其设置为透明

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-28T15:44:28.723

VS 橡皮擦工具正在工作，但对我的图像来说花费的时间太长了。当我上传 png 版本时，这个工具自动使我的白色背景透明。

[https://www.bonanza.com/background_burner](https://www.bonanza.com/background_burner)

1.  在页面上拖放图像（然后页面对图像进行一些处理）
2.  单击右下角的绿色下载按钮并选择.png（透明背景）

优点：

*   自由的
*   超级快
*   在线工具，无需下载

缺点：

*   图片至少需要 100 x 100 像素

我只是将它用于 Intranet Web 应用程序，所以我不需要花太多时间或让它质量上乘。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-04T07:14:48.510

如果您有权访问 Microsoft Visio，则可以导入/创建您想要具有一些透明像素的图形对象，对其进行一些更改或不进行更改，然后另存为类型 .png 文件。

点击另存为 PNG 后，会出现输出选项弹出窗口。

它为您提供了一个勾选框来选择透明度颜色（即您想要透明的颜色）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-09T22:11:14.140

在 VS2019 图像编辑器中，您还可以使用键盘上的“M”键根据颜色选择图像的区域，然后使用删除键。

# java - java中time_wait连接增加的原因是什么？

> ID：10726049
> 
> 赞同：3
> 
> 时间：2012-05-23T18:48:38.193
> 
> 标签：java, serversocket

```
 class LogWriter implements Runnable {

Socket client;

private static ThreadLocal<Date> date = new ThreadLocal<Date>() {
@Override
protected Date initialValue() {
    return new Date();
};
};

private static ThreadLocal<SimpleDateFormat> formatter = new ThreadLocal<SimpleDateFormat>() {
@Override
protected SimpleDateFormat initialValue() {
    return new SimpleDateFormat("yyyy_MM_dd");
};
};

public LogWriter(Socket client) {
this.client = client;
}

public void run() {
try {
    write(this.client.getInputStream(), new File(
        CentralizedLogging.logsDir + File.separator
            + client.getInetAddress().getHostName() + "_"
            + getFormattedDate() + ".log"));
    this.client.close();
} catch (Exception e) {
    try {
    e.printStackTrace();
    write(new ByteArrayInputStream(e.getMessage().getBytes()),
        new File(CentralizedLogging.logsDir + File.separator
            + "centralLoggingError.log"));
    } catch (IOException io) {

    }
}
}

  public synchronized void write(InputStream in, File file)
    throws IOException {
RandomAccessFile writer = new RandomAccessFile(file, "rw");
writer.seek(file.length()); // append the file content into existing if it not exist creating a new one.
writer.write(read(in));
writer.close();
}

public static byte[] read(InputStream in) throws IOException {
ByteArrayOutputStream out = new ByteArrayOutputStream();
int read = -1;
byte[] buffer = new byte[1024];
read = in.read(buffer);
do {
    out.write(buffer, 0, read);
} while((read = in.read(buffer)) > -1);
return out.toByteArray();
} 
```

主要方法

```
 public static void main(String[] args) throws InterruptedException,
    IOException {
// CentralizedLogging centralLogServer = new CentralizedLogging(args[0],Integer.parseInt(args[1]));
// new Thread(centralLogServer).start();
long start = System.currentTimeMillis() + 1000 * 20 * 60;
while(start >= System.currentTimeMillis()) {
    Socket client = new Socket("bharathi-1397", 10000);
    OutputStream os = client.getOutputStream();
    DataOutputStream outToServer = new DataOutputStream(os);
    outToServer
        .write("Centralized Logging is working......".getBytes());
    client.close();
}
} 
```

我正确关闭了连接。但是 time_wait 连接正在增加。我从我的终端拍了一张快照，我发布了其中的一部分。我错过了什么吗？

```
 tcp6       0      0 127.0.0.1:46146         127.0.0.1:10000         TIME_WAIT   -               
 tcp6       0      0 127.0.0.1:57645         127.0.0.1:10000         TIME_WAIT   -               
 tcp6       0      0 127.0.0.1:47961         127.0.0.1:10000         TIME_WAIT   -               
 tcp6       0      0 127.0.0.1:56716         127.0.0.1:10000         TIME_WAIT   -               
 tcp6       0      0 127.0.0.1:49469         127.0.0.1:10000         TIME_WAIT   -               
 tcp6       0      0 127.0.0.1:54078         127.0.0.1:10000         TIME_WAIT   -               
 tcp6       0      0 127.0.0.1:51626         127.0.0.1:10000         TIME_WAIT   -               
 tcp6       0      0 127.0.0.1:50143         127.0.0.1:10000         TIME_WAIT   -               
 tcp6       0      0 127.0.0.1:59214         127.0.0.1:10000         TIME_WAIT   -               
 tcp6       0      0 127.0.0.1:54192         127.0.0.1:10000         TIME_WAIT   -               
 tcp6       0      0 127.0.0.1:53436         127.0.0.1:10000         TIME_WAIT   -               
 tcp6       0      0 127.0.0.1:54547         127.0.0.1:10000         TIME_WAIT   -               
 tcp6       0      0 127.0.0.1:55032         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:51273         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:48381         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:47532         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:56811         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:55293         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:56664         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:49242         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:51225         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:59265         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:59378         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:47997         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:47955         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:59453         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:48092         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:52462         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:59579         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:54921         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:55675         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:51140         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:57321         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:51656         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:54740         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:53600         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:59862         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:54766         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:59062         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:55702         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:50942         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:53732         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:52757         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:56430         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:49179         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:48689         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:53313         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:51161         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:57033         127.0.0.1:10000         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:58607         127.0.0.1:10000         TIME_WAIT   - 
```

它会对我的服务器造成任何问题吗？这是什么原因？.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:20:11.007

> 我正在正确关闭连接，但 time_wait 连接正在增加。我错过了什么吗？

内核使用`TIME_WAIT`它来确保您的 TCP 流不会重复使用可能仍有数据包从远程端发送到它的端口。根据`TIME_WAIT`网络设置，时间通常设置为数据包最长使用期限的两倍。

如果您正在获得许多新连接，那么您会看到端口数量在`TIME_WAIT` 增加，但在某些时候它应该会稳定下来，除非连接速率也在增加。要做的一件事是对所有`TIME_WAIT`行进行 grep，对它们进行排序并查看端口号是否正在更改。如果正在添加新端口而旧端口脱落，那么一切都很好。

要尝试的一件事是确保您的客户正在发起`close()`呼叫。那将留`TIME_WAIT`在客户端而*不是*服务器上。[请参阅这个关于服务器](http://www.serverframework.com/asynchronousevents/2011/01/time-wait-and-its-design-implications-for-protocols-and-scalable-servers.html)的优秀页面[`TCP`及其含义`TIME_WAIT`](http://www.serverframework.com/asynchronousevents/2011/01/time-wait-and-its-design-implications-for-protocols-and-scalable-servers.html)。

由于您的服务器似乎正在向客户端发送文件（如果我正确阅读了您的代码），您应该考虑将协议更改为如下所示。这将导致客户端首先关闭，因此大多数`TIME_WAIT`s 将位于每个客户端上。

1.  服务器先发送文件的长度
2.  服务器发送文件
3.  客户端读取长度
4.  客户端读取文件字节
5.  客户发送“得到它”
6.  客户关闭
7.  服务器读取客户端的“得到它”消息
8.  服务器关闭

您是否看到关于让客户制作第`close()`一个@kannan 的内容？如果服务器正在发送文件，那么我会让它发送文件，然后等待客户端发送“得到它”消息。然后客户端可以读取文件，读取 EOF 标记，发送“得到它”，然后立即关闭。

另外，顺便说一句，您应该`try ... finally`在代码中使用模式。就像是：

```
public void run() {
    try {
        write(this.client.getInputStream(), new File(
            CentralizedLogging.logsDir + File.separator
            + client.getInetAddress().getHostName() + "_"
            + getFormattedDate() + ".log"));
    } catch (Exception e) {
        try {
            e.printStackTrace();
            write(new ByteArrayInputStream(e.getMessage().getBytes()),
                new File(CentralizedLogging.logsDir + File.separator
                + "centralLoggingError.log"));
        } catch (IOException io) {
        }
    } finally {
        // always close in the finally
        this.client.close();
    }
} 
```

# delphi - 为什么编译器会跳过分配变量

> ID：10726052
> 
> 赞同：7
> 
> 时间：2012-05-23T18:48:49.367
> 
> 标签：delphi, delphi-7

我有以下程序：

```
procedure GetDegree(const num : DWORD ; var degree : DWORD ; min ,sec : Extended);
begin
  degree := num div (500*60*60);
  min := num div (500*60) - degree *60;
  sec := num/500 - min *60 - degree *60*60;
end; 
```

在度变量被分配后，调试器跳到过程的末尾。这是为什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-23T18:52:31.193

这是一个优化。变量`min`和`sec`通过值传递。这意味着调用者看不到对它们的修改，并且对这个过程是私有的。因此编译器可以确定分配给它们是没有意义的。分配给变量的值永远无法读取。因此编译器选择节省时间并跳过分配。我希望您打算像这样声明程序：

```
procedure GetDegree(const num: DWORD; var degree: DWORD; var min, sec: Extended); 
```

正如我在上一个问题中所说，使用`Extended`. 使用其中一种标准浮点类型会更好，`Single`或者`Double`. 甚至使用`Real`映射到的泛型`Double`。

此外，您已声明`min`为浮点类型，但计算计算的是整数。在这方面，我对您上一个问题的回答是相当准确的。

* * *

我建议您创建一个记录来保存这些值。传递三个单独的变量会使您的函数接口非常混乱并破坏封装。这三个值只有在整体考虑时才有意义。

```
type
  TGlobalCoordinate = record
    Degrees: Integer;
    Minutes: Integer;
    Seconds: Real;
  end;

function LongLatToGlobalCoordinate(const LongLat: DWORD): TGlobalCoordinate;
begin
  Result.Degrees := LongLat div (500*60*60);
  Result.Minutes := LongLat div (500*60) - Result.Degrees*60;
  Result.Seconds := LongLat/500 - Result.Minutes*60 - Result.Degrees*60*60;
end;

function GlobalCoordinateToLongLat(const Coord: TGlobalCoordinate): DWORD;
begin
  Result := Round(500*(Coord.Seconds + Coord.Minutes*60 + Coord.Degrees*60*60));
end; 
```

# ruby-on-rails - 在 Rails 的数据库中将用户输入保存为 xml 文件

> ID：10726053
> 
> 赞同：2
> 
> 时间：2012-05-23T18:48:52.807
> 
> 标签：ruby-on-rails, database, file, save, paperclip

我在“流”模型上有一个 form_tag，它接受用户输入，如下所示：

```
<%= form_tag('/generate_xml', :method=>'post') do %>
 <p>
 Content:<br />
   <%= text_field_tag "content" %>
 </p>
 <p>
   <%= submit_tag 'Submit' %>
 </p>
<% end %> 
```

generate_xml 动作如下：

```
def generate_xml
 @content = params[:content]
 builder = Nokogiri::XML::Builder.new do |xml|
 xml.streams {
  xml.content {
   xml.name { xml.text @content }
  }
 }
 end

 file = File.new('dir.xml','w')
 file.puts builder.to_xml
 file.close
end 
```

虽然我可以生成一个文件**dir.xml** ，但我*不希望这个文件存储在本地，而是直接存储在数据库*中。我该怎么做？到目前为止，我已经尝试使用回形针在“Stream”模型（我想存储 xml 文件的地方）中生成与文件相关的列，但我坚持如何动态生成文件并将其保存到数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:47:57.130

您可以将 xml 内容存储为字符串。

因此，请执行 rails 迁移以将字符串列添加到表中。

```
rails g model UserContent xml:string 
```

然后将其作为字符串存储在那里：

```
uc = UserContent.create(:xml => builder.to_xml) 
```

# macos - 如何在 Mac OS Lion 上的 QT Creator 中编译 32 位可执行文件

> ID：10726057
> 
> 赞同：1
> 
> 时间：2012-05-23T18:49:24.163
> 
> 标签：macos, flash, qt, qt-creator

如此错误报告中所述：[https](https://bugs.webkit.org/show_bug.cgi?id=84983) : //bugs.webkit.org/show_bug.cgi?id=84983，在 Mac OS 10.6 上由 QT creator 4.7.4 或 4.8.0 编译的 64 位可执行文件将崩溃或显示 no查看包含 Flash 内容的页面时的 Flash 内容。

但是，我没有看到在 Mac 的 QT 4.8.0 中编译 32 位可执行文件的任何选项。唯一可用的工具链选择是 64 位 gcc 和 64 位 clang。尽管检测到 32 位工具链，但它们不能作为选择。也许，QT 4.8 只提供了 64 位库，所以我们必须编译 64 位可执行文件？

我是否必须重建 QT 源代码才能获得 Mac 的 32 位 QT？以前有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:52:33.867

您可以使用 ./configure -universal 选项获得通用支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:34:13.520

是的。您必须从源代码构建它才能获得 32 位库。预构建的 Qt 库只有 64 位。

只需按照构建[步骤](http://doc-snapshot.qt-project.org/4.8/install-mac.html)并将 -arch i386 添加到您的配置选项中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-22T22:19:35.533

使用以下配置命令构建仅 32 位版本的 QT

```
./configure -platform macx-clang-32 
```

以下命令会将 QT 安装到 /usr/local/Qt-xyz

```
sudo make install 
```

然后使用 clang-32 和你新安装的 QT 添加一个新的工具链

# javascript - 如何在 Visual Studio 2010 中维护 JavaScript 类库？

> ID：10726060
> 
> 赞同：1
> 
> 时间：2012-05-23T18:49:33.337
> 
> 标签：javascript, visual-studio-2010

我是 Visual Studio 的新手。简而言之，我想做的是避免一直将我经常使用的 .js 实用程序类复制到我的项目中。

当我经常使用 Flash 时，我可以将所有类文件（实用程序等）放在某个文件夹中，然后我可以告诉 Flash 那个文件夹，这样在任何项目中，我都可以引用这些类而无需将它们单独复制到我的项目文件夹中（通过导入语句）。

有没有办法让我在 VS2010 中使用这个工作流程进行 JavaScript 开发？或者我应该遵循其他任何最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:25:42.350

我将我的javascript（至少是可以常用的js代码）作为资源放在类库中，然后用HttpModule提供。它运行良好，我只有一个地方有通用脚本，唯一的缺点是当你更改 javascript 时必须编译项目，而一些开发人员不习惯并且他们不喜欢它:)

因此，只需将 javascript 文件添加到类库并在构建操作中将其标记为嵌入式资源（在解决方案资源管理器中右键单击 js 文件），然后使用 HttpHandler 或通用 ashx 处理程序为其提供服务。您将必须通过该处理程序有一些代码“询问”您的脚本，我通过 Page.RegisterClientScriptInclude 从需要客户端上的 Javascript 代码的同一个类库代码执行此操作。您可以使用以下方法从类库中获取当前页面实例：

```
 if (HttpContext.Current.Handler is Page)
    Page currPage = (Page)HttpContext.Current.Handler; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:55:50.833

在 Visual Studio 中，您可以设置项目模板。在该模板中，您可以包含所有基本项目设置和文件。

[http://msdn.microsoft.com/en-us/library/zfzh36t7.aspx](http://msdn.microsoft.com/en-us/library/zfzh36t7.aspx)

# c# - C#中进程的多线程

> ID：10726061
> 
> 赞同：0
> 
> 时间：2012-05-23T18:49:34.360
> 
> 标签：c#, asp.net, .net, multithreading, sql-server-2005

我有以下代码运行以启动我的表计算（表计算触发了一些返回数千行的查询）。当我的应用程序只运行一个实例时，一切都很好，但是 2 或更多然后服务器减慢完成并且我开始收到错误。

我应该把这段代码变成线程吗？这是怎么做的？

```
private static object _lock = new object();

private void RunTable(string outputType, string _outputDataType) {

        Server.ScriptTimeout = 300;

        string returnCode = string.Empty;
        lock (_lock)
        {
            using (SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["MainDll"].ToString()))
            {
                connection.Open();
                using (SqlCommand command = new SqlCommand(sql.ToString(), connection))
                {
                    command.CommandType = CommandType.Text;
                    command.CommandTimeout = 300;
                    returnCode = (string)command.ExecuteScalar();
                    Dispose();
                }
                Dispose();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:59:32.833

首先：如果您看到错误，请告诉我们您看到了什么错误。

第二：您正在读取多少数据（即您可以将所有数据加载到 RAM 中）？

第三：如果你不能一次加载所有数据，那么尝试使用`SqlDataReader`连续从数据库中读取。

关于多线程：这真的取决于你的瓶颈在哪里。如果您的瓶颈在于从数据库读取，那么通过多线程处理您将不会获得太多收益（特别是如果您的数据库不允许并发访问）。一旦从数据库中获取数据，您**就可以**`SqlDataReader`使用线程来处理数据，并且当您必须使用 an 时效果特别好，因为您正在逐条读取数据。

# javascript - 用于从单击的列表元素的 id 定义变量的 Javascript

> ID：10726063
> 
> 赞同：0
> 
> 时间：2012-05-23T18:49:40.847
> 
> 标签：javascript, variables

我正在寻找定义一个变量：

```
var alumniName = // id from a list ( example: <li id="JoeJohnson">Joe Johnson</li> ). 
```

我希望变量与访问者点击的内容相匹配。（例子：

```
<li id="JoeJohnson">Joe Johnson</li>  
// when a visitor clicks on the name Joe Johnson... the variable = JoeJohnson

<li id="FredSmith">Fred Smith</li>
// when a visitor clicks on the name Fred Smith... the variable = FredSmith 
```

ETC... ）

非常感谢任何帮助-谢谢-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:56:47.540

我们不得不对您的设置做出一些假设......但是在这里采取一个高峰，看看这是否有意义。不需要图书馆。

HTML

```
<ul id="myList">
<li data-name='Joe Johnson'>Joe Johnson</li>
<li data-name='Fred Smith'>Fred Smith</li>
</ul> 
```

Javascript

```
var list = document.getElementById('myList'),
    alumniName;

Array.prototype.forEach.call(list.getElementsByTagName('li'), function(item) {
    item.onclick = function() {
        alumniName = this.getAttribute('data-name');
        // or if you feel you still want to use ID's to store the values (spaces are not allowed) you can just ref this.id
    };
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:56:37.670

您只能在点击发生时将变量设置为与点击相关的内容。使用[事件监听器](https://developer.mozilla.org/en/DOM/element.addEventListener)：

```
var recentClickedId = null; // init, nothing clicked on now
// let this happen onload, i.e. when the DOM is available:
document.body.addEventListener("click", function(event){
    var el = event.target;
    if (el.nodeName.toLowerCase() == "li")
         recentClickedId = el.getAttribute("id");
}, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:53:55.823

试试这个 HTML：

```
<ul>
<li data-name='Joe Johnson'>Joe Johnson</li>
<li data-name='Fred Smith'>Fred Smith</li>
</ul> 
```

JavaScript（在身体负载时调用）：

```
var alumniName = '';
var liElems = document.getElementsByTagName('li');

for (var i=0; i<liElems.length; i++)
{
    liElems[i].onclick = function(){  
        alumniName = this.getAttribute('data-name');
        alert(alumniName);
    };

} 
```

# asp.net - 离线模式下的谷歌分析

> ID：10726066
> 
> 赞同：3
> 
> 时间：2012-05-23T18:49:50.970
> 
> 标签：asp.net, google-analytics, offline

我使用 asp.net 开发了一个 Intranet 应用程序。现在这个网络应用程序将在火车上使用。我已经在我的网站中实施了 Google Analytics。现在火车上没有足够的互联网连接，所以我的客户希望我在离线模式下进行谷歌分析。因此，一旦互联网可用，应用程序会将所有保存的数据发布到 Google。

现在我不知道我将如何实现这一目标。如果有人有任何想法或任何此类软件，请帮助我。

# c# - 隐式类型的限制

> ID：10726069
> 
> 赞同：8
> 
> 时间：2012-05-23T18:50:01.683
> 
> 标签：c#, types

Jon Skeet 在他的书中提到了对隐式类型的 7 个限制。我需要澄清最后两个：

**A.**您希望变量具有的类型是初始化表达式的编译时类型。
**B.**初始化表达式不涉及被声明的变量。

本书涵盖的材料与发布顺序相同（C# 2 在 C# 3 之前）。此时尚未引入 C# 4，因此我假设**A**不指`dynamic`. 那么，什么时候编译时类型会不同于初始化表达式的执行时类型呢？

至于**B**，初始化表达式何时可以涉及被声明的变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:41:22.603

关于**B**，Henk 给出了一个完美的答案（编辑：它现在已被删除），尽管我发现它`int x = x = 1;`编译起来很奇怪。（我会认为*x*在初始化程序之后才被认为是声明的。哦，好吧。）他的回答是：

```
int x = x = 1;   // Compiles
var y = y = 2;   // Does not compile 
```

关于**A**和您关于编译时间类型何时与执行时间类型不匹配的问题，这是一个它们会有所不同的示例：

```
var foo = fooFactory.GetFoo(); 
```

...并且 fooFactory 上的该方法实现为 ....

```
public FooBase GetFoo() {
    return new FooSubtype();
} 
```

在这里，*foo*的类型是 FooBase（可能是接口、抽象类或未密封的具体类），并且（不进行强制转换）只有它的特性可用。显然，FooSubtype 实现或继承自 FooBase。

在这里可以看出*foo*在运行时持有的类型，只是因为我展示了 GetFoo() 的实现，但编译器不会检查它。事实上，实现甚至可能不可用（可能在另一个程序集中）或者它可能会有所不同（可能是虚拟的）。为了确定 GetFoo() 的编译时类型，因此*只有*方法声明是相关的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T19:14:22.740

我对**A**的想法：

这并不是说编译时间与执行类型不同，因为即使执行类型与编译类型不同（就像在任何返回类型为抽象类型的方法中一样），您也不能在执行时声明变量无论如何都要显式键入。

但是您可能希望使用更抽象的静态类型声明变量，即使可以在编译时定义*真正的动态类型。*考虑例如：

```
ISomething a = new MyOwnSomething(); 
```

你为什么想做这个？如果您明确地`MyNewSomething`实现`ISomething`了，那么您将不得不进行强制转换才能像`ISomething`在 var 上声明的 if 一样使用它。这里演员阵容仍然完成，但你看不到相当丑陋的：

```
var a = new MyOwnSomething();
((ISomething)a).Whatever(); 
```

一个更人为的例子是初始化代码可以稍后更改，但是您要确保从此时起您只`a`用作一个`ISomething`，并且永远不会看到`MyOwnSomething`类型的详细信息，或者它可能正在实现的其他接口，以便初始化类型的更改不会破坏代码。

# maven - 为什么我的构建在使用 jaxws-maven-plugin 时会失败？

> ID：10726073
> 
> 赞同：0
> 
> 时间：2012-05-23T18:50:23.500
> 
> 标签：maven, jaxb, jax-ws, xjc

根据我的阅读，我相信 XJC 参数用于自定义 o/p Java 文件。我们在 jaxws-maven-plugin 中使用了这些。我在添加 jaxb-xjc jar 时找不到“MaskingClassLoader”的问题。

在 jaxws-maven-plugin 中，除了 '-Xcollection-setter-injector' 和 '-Xboolean-getter' 之外，提供的 xjc 参数之一是 '-Xybdisplay' 。当我尝试执行 'wsimport' 时，出现错误

```
[信息] jaxws:wsimport 参数：[-s, D:\HeartBeat_Admin\test\testmodel\target\jaxws\wsimport\java, -d, D:\HeartBeat_Admin\test\testmodel\target\classes, -extension, -Xnocompile , -B-verbose, -B-extension, -B-Xcollection-setter-injector, -B-Xboolean-getter, -B-Xybdisplay, D:\HeartBeat_Admin\test\testmodel\src\main\wsdl\test.wsdl ]
使用 java.util.ServiceLoader
[ybdisplay] XJC Plugin 类 com.sun.tools.xjc.addon.DisplayPlugin 实例化
[ybdisplay] 解析参数 -Xybdisplay
解析 WSDL...

[信息] --------------------------------------------- -------------------------

[信息] 构建失败
[信息] --------------------------------------------- -------------------------
[INFO] 总时间：18.265s
[INFO] 完成于：2012 年 5 月 23 日星期三 23:35:11 IST
[INFO] 最终内存：63M/63M
[信息] --------------------------------------------- -------------------------
[错误] 无法在项目 testmodel 上执行目标 org.codehaus.mojo:jaxws-maven-plugin:1.12:wsimport (profile)：执行错误：wsimport [-s, D:\HeartBeat_Admin\test\testmodel\target\jaxws\ wsimport\java，-d，D:\HeartBeat_Admin\test\testmodel\target\classes，-extension，-Xnocompile，-B-verbose，-B-extension，-B-Xcollection-setter-injector，-B-Xboolean- getter, -B-Xybdisplay, D:\HeartBeat_Admin\test\testmodel\src\main\wsdl\test.wsdl] -> [帮助 1]
[错误]
[错误] 要查看错误的完整堆栈跟踪，请使用 -e 开关重新运行 Maven。
[错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。
[错误]
[错误] 有关错误和可能的解决方案的更多信息，请阅读以下文章：
[错误] [帮助 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException

```

-e 和 -X 没有多大帮助。我试图在 xsd 中搜索术语“ybdisplay”，但无法理解问题所在或自定义的工作原理。删除 xjc 参数 'ybdisplay' 会导致一个错误，指出我需要为自定义启用它。

在 XSD 中，我们有以下内容

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xmlns:ybmeta="http://www.yellowbook.com/bp/model/meta"
        xmlns:tns="http://www.yellowbook.com/bp/model/types"
        xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
        xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
        targetNamespace="http://www.yellowbook.com/bp/model/types"
        elementFormDefault="unqualified"
        attributeFormDefault="unqualified" jxb:version="2.0" jxb:extensionBindingPrefixes="ybmeta xjc">

<!-- Use our specific bindings -->
<xsd:annotation>
    <xsd:appinfo>
        <jxb:bindings schemaLocation="test.xsd">
            <jxb:schemaBindings>
                <jxb:package name="com.test.model.api"/>
            </jxb:schemaBindings>
        </jxb:bindings>
    </xsd:appinfo>
</xsd:annotation> 
```

我不确定以上是否与 xjc 参数 'ybdisplay' 相关。请指导我 xjc 的工作以及如何调试此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:51:09.667

这与 XJC args 无关。如果它对任何人有帮助，则问题是由于内存耗尽引起的。我修改了 MAVEN_OPTs 中的堆大小，一切正常。

# php - 奇怪的行为 - $_SERVER['SCRIPT_NAME'] 值返回 404.php

> ID：10726077
> 
> 赞同：0
> 
> 时间：2012-05-23T18:50:44.127
> 
> 标签：php, .htaccess, unix

我遇到了一个非常奇怪的事件。我最近在我的 .htaccess 文件中添加了以下行：

```
ErrorDocument 404 /404.php 
```

这是文件中唯一的一行。

我有一个 php 函数，当用户访问该站点时记录 $_SERVER['SCRIPT_NAME'] 的值，以跟踪他们在站点上所采用的条目 url 和路径。在我添加 .htaccess 行之前，$_SERVER['SCRIPT_NAME'] 的值一直是正确的。现在，当用户访问该站点时，它将 404.php 显示为 $_SERVER['SCRIPT_NAME'] 的值。当他们转到另一个页面时，页面名称第一次在 $_SERVER['SCRIPT_NAME'] 中是正确的，但随后将值替换为 404.php。

有什么想法会导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:18:23.473

显然在 hostgator.com 他们的服务器默认 404 页面设置为 404.shtml。

所以为了纠正这个问题，我在我的 .htaccess 文件中添加了以下内容：

```
RewriteEngine on
RewriteRule ^(.*)\.shtml$ $1.php 
```

# asp.net - 如何在 ASP.NET 的 gridview 中为每个标题列添加标题

> ID：10726079
> 
> 赞同：2
> 
> 时间：2012-05-23T18:51:01.590
> 
> 标签：asp.net, visual-studio-2010, gridview, tooltip

我正在使用 ASP.NET，我有一个 gridview，我需要在每个标题列中放置一个标题，标题将显示在 moseover ..... ............我是否必须将字段转换为 TemplateField

像这样的东西：

```
 <asp:BoundField DataField="ID_Dossier" HeaderText="ID_Dossier" ReadOnly="True" 
  SortExpression="ID_Dossier" title="Trier par identifiant des dossiers " /> 
```

这是我的gridbiew：

```
 <asp:GridView ID="DossierGV" runat="server" AllowPaging="True" 
                            AllowSorting="True" DataSourceID="DossierPF" AutoGenerateColumns="False" 
                            DataKeyNames="ID_Dossier">
                          <Columns>
                              <asp:TemplateField ShowHeader="False" >
                                  <ItemTemplate>
                                      <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" 
                                          CommandName="Select" Text="Ajouter" title="Ajouter les information de finance aux ce dossier"></asp:LinkButton>
                                  </ItemTemplate>
                              </asp:TemplateField>
                              <asp:BoundField DataField="ID_Dossier" HeaderText="ID_Dossier" ReadOnly="True" 
                                  SortExpression="ID_Dossier" title="Trier par identifiant des dossiers " />
                              <asp:BoundField DataField="ID_Entreprise" HeaderText="ID_Entreprise"  
                                  SortExpression="ID_Entreprise" />
                              <asp:BoundField DataField="Date_Depot" HeaderText="Date_Depot" 
                                  SortExpression="Date_Depot"  />
                              <asp:BoundField DataField="Type_Etude" HeaderText="Type_Etude" 
                                  SortExpression="Type_Etude" />
                              <asp:BoundField DataField="Dernier_Type" HeaderText="Dernier_Type" 
                                  SortExpression="Dernier_Type"  />
                              <asp:BoundField DataField="Eligibile" HeaderText="Eligibile" 
                                  SortExpression="Eligibile" />
                              <asp:BoundField DataField="Fiche_Information" HeaderText="Fiche_Information" 
                                   />
                              <asp:BoundField DataField="Buletin_Adhesion" HeaderText="Buletin_Adhesion" 
                                   />
                              <asp:BoundField DataField="Fiche_Renseignment" HeaderText="Fiche_Renseignment" 
                                   />
                              <asp:BoundField DataField="Attestation" HeaderText="Attestation" 
                                  />
                              <asp:BoundField DataField="ID_Cabinet" HeaderText="ID_Cabinet" 
                                  SortExpression="ID_Cabinet"  />
                              <asp:BoundField DataField="Montant_Demander" HeaderText="Montant_Demander" 
                                  SortExpression="Montant_Demander" />
                              <asp:BoundField DataField="Duree" HeaderText="Duree" SortExpression="Duree" />
                              <asp:BoundField DataField="Porcentage_Taux" HeaderText="Porcentage_Taux" 
                                  SortExpression="Porcentage_Taux" />
                              <asp:BoundField DataField="Nom_Giac" HeaderText="Nom_Giac" 
                                  SortExpression="Nom_Giac" />
                          </Columns>
                      </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:23:52.620

我认为 ASP.NET 中没有办法，但您始终可以在 CSS 中执行此操作，只需在模板上使用 HeaderStyle-CssClass 即可。

更新：

好吧，我错了，ASP.NET 确实支持这个功能，你只需要在你的 TemplateField 中使用一个 HeaderTemplate。

```
<asp:TemplateField SortExpression="Subnet" HeaderText="Subnet">
   <HeaderTemplate>
       <asp:Label ID="SubnetHeader" ToolTip="My Tip to you" runat="server" Text="Label"></asp:Label>
   </HeaderTemplate>

   <ItemTemplate >  
       <asp:Label ID="lblSubnet" runat="server" Text='<%# Bind("Subnet") %>' ></asp:Label>       
   </ItemTemplate>
</asp:TemplateField> 
```

# sharepoint - 使用工作流编辑自定义列表项

> ID：10726084
> 
> 赞同：0
> 
> 时间：2012-05-23T18:51:17.573
> 
> 标签：sharepoint, sharepoint-2010

嗨，我创建了两个自定义列表，L1 和 L2 具有相同的列，如下所示。

```
Title(Single line of text)
Name(Single line of text) 
```

我编写了一个工作流，使用工作流的“复制列表项”操作将新创建的项目从 L1 复制到 L2。现在，当使用工作流在 L1 中更新项目时，我想更新 L2 中的相应项目。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:12:43.100

您是否尝试在不编写任何代码的情况下使用 Sharepoint 设计器来做到这一点？

如果是这样，我想您可以尝试使用变量来识别另一个列表中的项目，如在此处向工作流部分***添加条件中所述***[：http: //office.microsoft.com/en-us/sharepoint-designer-help/在工作流程中使用变量-HA010240415.aspx#BM1](http://office.microsoft.com/en-us/sharepoint-designer-help/use-variables-in-workflows-HA010240415.aspx#BM1)。

您还可以在此处找到类似问题的一些解释：http: [//social.msdn.microsoft.com/Forums/en/sharepointworkflow/thread/99f623f1-ef1b-42bf-abbe-4f4b2e7b2ded](http://social.msdn.microsoft.com/Forums/en/sharepointworkflow/thread/99f623f1-ef1b-42bf-abbe-4f4b2e7b2ded)以及有关更新项目的一些信息：[http ://www.documentmanagementworkflowinfo.com/workflow/use-update-list-item-action-sharepoint-designer-workflow.htm](http://www.documentmanagementworkflowinfo.com/workflow/use-update-list-item-action-sharepoint-designer-workflow.htm)。

# haskell - 如何让 Parsec 让我调用`read` :: Int？

> ID：10726085
> 
> 赞同：2
> 
> 时间：2012-05-23T18:51:18.773
> 
> 标签：haskell, parsec

我有以下，类型检查：

```
p_int = liftA read (many (char ' ') *> many1 digit <* many (char ' ')) 
```

现在，正如函数名所暗示的，我希望它给我一个 Int。但如果我这样做：

```
p_int = liftA read (many (char ' ') *> many1 digit <* many (char ' ')) :: Int 
```

我收到这种类型的错误：

```
Couldn't match expected type `Int' with actual type `f0 b0'
In the return type of a call of `liftA'
In the expression:
    liftA read (many (char ' ') *> many1 digit <* many (char ' ')) ::
      Int
In an equation for `p_int':
    p_int
      = liftA read (many (char ' ') *> many1 digit <* many (char ' ')) ::
          Int 
```

有没有一种更简单、更简洁的方法来解析可能有空格的整数？或者有办法解决这个问题？

最终，我希望这成为以下内容的一部分：

```
betaLine = string "BETA " *> p_int <*> p_int  <*> p_int <*>
           p_int <*> p_parallel <*> p_exposure <* eol 
```

这是解析如下所示的行：

```
BETA  6 11 5 24 -1 oiiio 
```

所以我最终可以调用一个需要这些值的 BetaPair 构造函数（一些作为 Int，一些作为其他类型，如 [Exposure] 和 Parallel）

（如果你好奇，这是一个文件格式的解析器，它代表蛋白质中的氢键 β 链对等。我无法控制文件格式！）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T19:45:25.243

> 如何让 Parsec 让我打电话`read :: Int`？

第二个答案是“不要使用读取”。

使用`read`等同于重新解析您已经解析的数据 - 因此在 Parsec 解析器中使用它是一种代码味道。解析自然数足够无害，但`read`与 Parsec 具有不同的失败语义，并且它是针对 Haskell 的词法语法量身定制的，因此将其用于更复杂的数字格式是有问题的。

如果您不想麻烦地定义 a`LanguageDef`和使用 Parsec 的`Token`模块，这里是一个不使用 read 的自然数解析器：

```
-- | Needs @foldl'@ from Data.List and 
-- @digitToInt@ from Data.Char.
--
positiveNatural :: Stream s m Char => ParsecT s u m Int
positiveNatural = 
    foldl' (\a i -> a * 10 + digitToInt i) 0 <$> many1 digit 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T18:55:26.993

`p_int`是产生 的解析器`Int`，因此类型将是`Parser Int`或相似¹。

```
p_int = liftA read (many (char ' ') *> many1 digit <* many (char ' ')) :: Parser Int 
```

或者，您可以键入`read`函数，`(read :: String -> Int)`以告诉编译器表达式具有哪种类型。

```
p_int = liftA (read :: String -> Int) (many (char ' ') *> many1 digit <* many (char ' ')) :: Int 
```

至于更清洁的方式，请考虑替换`many (char ' ')`为`spaces`.

¹ `ParsecT x y z Int`，例如。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-22T04:28:45.840

你可能会发现

```
Text-Megaparsec-Lexer.integer :: MonadParsec s m Char => m Integer 
```

做你想做的事。

vanilla parsec 库似乎缺少一些明显的解析器，这导致了“包含电池”的 parsec 衍生包的兴起。我想 parsec 维护者最终会得到更好的。

[https://hackage.haskell.org/package/megaparsec-4.2.0/docs/Text-Megaparsec-Lexer.html](https://hackage.haskell.org/package/megaparsec-4.2.0/docs/Text-Megaparsec-Lexer.html)

更新

或使用香草秒差：

```
Prelude Text.Parsec Text.Parsec.Language Text.Parsec.Token> parse ( integer . makeTokenParser $ haskellStyle ) "integer" "-1234"
Right (-1234) 
```

# jquery - 清除 jquery ui 自动完成的缓存

> ID：10726089
> 
> 赞同：13
> 
> 时间：2012-05-23T18:51:39.427
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我想我已经阅读了关于这个问题的所有 stackoverflow 和谷歌结果，它们似乎都指的是第一个 jquery 自动完成插件，而不是当前的 jquery ui 自动完成。

强制自动完成结果从数据源而不是缓存列表更新的方法是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-23T18:55:59.847

jquery ui 自动完成不做任何缓存。缓存发生在浏览器级别。为防止它发生，请使用`$.ajaxSetup`.

```
$.ajaxSetup({ cache: false }); 
```

`cache: false`如果您不想全局禁用缓存，您也可以向 source 选项提供一个函数来为您执行 ajax 请求。

```
source: function(request, response) {
    $.ajax({
        url: "url.php",
        dataType: "json",
        cache: false,
        type: "get",
        data: { term: request.term }
    }).done(function(data) {
        response(data);
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-13T08:33:21.867

您还可以将随机[缓存破坏参数](https://www.virendrachandak.com/techtalk/cachebuster-code-in-javascript/)添加到 jQuery UI 使用的源 URL。如果那里已经有缓存破坏参数，jQuery UI 足够聪明，可以处理附加 term 参数。

# cuda - CUDA中的HAAR小波变换

> ID：10726090
> 
> 赞同：4
> 
> 时间：2012-05-23T18:51:40.177
> 
> 标签：cuda, haar-wavelet

我试图在 CUDA 中为一维数组实现 HAAR 小波变换。

## 算法

我在输入数组中有 8 个索引

在这种情况下`if(x_index>=o_width/2 || y_index>=o_height/2)`，我将有 4 个线程，它们应该是 0、2、4、6，我计划用它们中的每一个处理输入中的两个索引。

我计算 avg.EG：如果我的线程 id 为 '0'-则 avg 为 (input[0]+input[1])/2 ，然后同时我得到输入 [0] 的差异 -其余线程的平均值等。

现在重要的是输出的位置。我为输出创建了一个单独的 thread_id，因为使用索引 0、2、4、6 会在将输出放置在正确的索引中造成困难。

我的 avgs 应该放在前 4 个索引中，即输出的 0、1、2、3，而 o_thread_id 应该是 0、1、2、3。同样，为了在 4、5、6、7 处放置差异，我将 0、1、2、3 与 '4' 相加，如代码所示

## 问题

我的输出全为零！！！无论我改变什么，我都会得到它。

## 代码

```
__global__ void cal_haar(int input[],float output [],int i_widthstep,int o_widthstep,int o_width,int o_height)
{

    int x_index=blockIdx.x*blockDim.x+threadIdx.x;
    int y_index=blockIdx.y*blockDim.y+threadIdx.y;

    if(x_index>=o_width/2 || y_index>=o_height/2) return;

    int i_thread_id=y_index*i_widthstep+(2*x_index);
    int o_thread_id=y_index*o_widthstep+x_index;

    float avg=(input[i_thread_id]+input[i_thread_id+1])/2;
    float diff=input[i_thread_id]-avg;
    output[o_thread_id]=avg;
    output[o_thread_id+4]=diff;

}

void haar(int input[],float output [],int i_widthstep,int o_widthstep,int o_width,int o_height)
{

    int * d_input;
    float * d_output;

    cudaMalloc(&d_input,i_widthstep*o_height);
    cudaMalloc(&d_output,o_widthstep*o_height);

    cudaMemcpy(d_input,input,i_widthstep*o_height,cudaMemcpyHostToDevice);

    dim3 blocksize(16,16);
    dim3 gridsize;
    gridsize.x=(o_width+blocksize.x-1)/blocksize.x;
    gridsize.y=(o_height+blocksize.y-1)/blocksize.y;

    cal_haar<<<gridsize,blocksize>>>(d_input,d_output,i_widthstep,o_widthstep,o_width,o_height);

    cudaMemcpy(output,d_output,o_widthstep*o_height,cudaMemcpyDeviceToHost);

    cudaFree(d_input);
    cudaFree(d_output);

} 
```

以下是我的主要功能：-

```
void main()
{
    int in_arr[8]={1,2,3,4,5,6,7,8};
    float out_arr[8];
    int i_widthstep=8*sizeof(int);
    int o_widthstep=8*sizeof(float);
    haar(in_arr,out_arr,i_widthstep,o_widthstep,8,1);

    for(int c=0;c<=7;c++)
    {cout<<out_arr[c]<<endl;}
    cvWaitKey();

} 
```

你能告诉我哪里出了问题，它给了我零作为输出吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T20:35:45.653

您的代码的问题是以下情况：

```
if(x_index>=o_width/2 || y_index>=o_height/2) return; 
```

给定`o_height = 1`，我们有`o_height/2 = 0`( `o_height`is `int`，所以我们在这里有整数除法和向下舍入)，所以没有线程执行任何操作。为了实现你想要的，你可以在这里做浮点算术，或者使用`(o_height+1)/2`and `(o_width+1)/2`: 它会用“算术”舍入执行除法（你将有`( x_index >= (8+1)/2 /*= 4*/ && y_index >= (1+1)/2 /*= 1*/ )`）

此外，当您在 Y 维度上有超过 1 个线程时，寻址存在问题，因为那时您`i_thread_id`和`o_thread_id`计算将是错误的（`_withstep`以字节为单位的大小，但您将其用作数组索引）。

# c# - 如何从表单中隐藏外键值

> ID：10726095
> 
> 赞同：1
> 
> 时间：2012-05-23T18:51:59.257
> 
> 标签：c#, .net, asp.net-mvc-3, entity-framework, foreign-keys

我的数据库中有一个名为 Review 的表，我使用实体框架制作了具有读/写操作和视图的 ReviewController。所以这都是脚手架代码。

这是我的编辑页面。

```
@model UniversityApp.Models.Review
@{
    ViewBag.Title = "Edit";
}

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Review</legend>

    @Html.HiddenFor(model => model.ReviewID)

    <div class="editor-label">
        @Html.LabelFor(model => model.MovieID, "Movie")
    </div>
    <div class="editor-field">
        @Html.DropDownList("MovieID", String.Empty)
        @Html.ValidationMessageFor(model => model.MovieID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.UserID, "User")
    </div>
    <div class="editor-field">
        @Html.DropDownList("UserID", String.Empty)
        @Html.ValidationMessageFor(model => model.UserID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Rating)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Rating)
        @Html.ValidationMessageFor(model => model.Rating)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Description)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Description)
        @Html.ValidationMessageFor(model => model.Description)
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

如您所见，脚手架机制为外值键添加了编辑器。我不希望用户在进行评论后能够手动更改用户 ID 或电影 ID，因此我删除了此代码。但是在编辑评论条目时，我在数据库 SaveChanges() 上收到此错误：

> 无法插入外键值，因为对应的主键值不存在。[外键约束名称= Review_User]

为了保留旧的用户 ID 和电影 ID 值，我应该在我的编辑操作中做什么？

这是 ReviewController 中编辑操作的代码：

```
public ActionResult Edit(int id)
{
    Review review = db.Reviews.Find(id);
    ViewBag.MovieID = new SelectList(db.Movies, "MovieID", "Title", review.MovieID);
    ViewBag.UserID = new SelectList(db.Users, "UserID", "UserName", review.UserID);
    return View(review);
}

[HttpPost]
public ActionResult Edit(Review review)
{
    if (ModelState.IsValid)
    {
        db.Entry(review).State = EntityState.Modified;
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    ViewBag.MovieID = new SelectList(db.Movies, "MovieID", "Title", review.MovieID);
    ViewBag.UserID = new SelectList(db.Users, "UserID", "UserName", review.UserID);
    return View(review);
} 
```

**编辑 ：**

我已经尝试了描述的方法，但我仍然遇到问题。现在我得到的错误消息是： **发生了引用完整性约束冲突：定义引用约束的属性值在关系中的主体对象和依赖对象之间不一致。**我不知道我做错了什么。在这行代码上触发了错误：

```
db.Entry(review).State = EntityState.Modified; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:56:55.897

在您不希望模板自动生成视图中的列的 ViewModel 中使用此注释您的属性

```
[ScaffoldColumn(false)]
public int ReviewID; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T19:21:05.223

除了 cd smith 的非常好的建议，如果您不想以这种方式装饰您的视图模型，您还可以添加一个隐藏字段，这看起来像：

```
@Html.HiddenFor(x => x.Review_UserID) 
```

等等，对于您希望在表单上拥有但不可见的每个 FK。当然，这类似于`[ScaffoldColumn(false)]`装饰器的工作方式，当然，添加`[HiddenInput(DisplayValue = false)]`属性会为您显式执行此操作。

# macos - 在 Windows 之间决定是否启动 mac 应用程序

> ID：10726096
> 
> 赞同：2
> 
> 时间：2012-05-23T18:51:59.457
> 
> 标签：macos, cocoa, window

我有一个 Login.xib 和一个 Main.xib，如果你登录一次，我会将令牌存储到一个文件中。如果这个带有令牌的文件存在，我想显示主窗口而不是登录，因为我已经知道它是哪个用户。

我可以在哪里以及如何决定应该显示哪个窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:04:31.123

*我会在您的应用程序委托applicationDidFinishLaunching:*方法中检查此文件是否存在。

如果文件存在则显示主窗口，否则显示登录窗口。

**编辑**

作为对您的评论的回应，您需要研究[NSWindowController](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nswindowcontroller_Class/Reference/Reference.html)类的使用。基本上，每个要控制的窗口都有一个*NSWindowController对象。*

您还需要更改应用程序中的一些内容以更改加载主窗口的默认行为，这将根据您是否正在制作基于文档的应用程序而有所不同。

如果您的应用程序不是基于文档的，您的应用程序“知道”加载 main.xib，因为这是在应用程序的 info.plist 文件中设置的。基本上，当您的应用程序启动时，它会在 info.plist 文件中查找需要加载的 nib 并加载它。通常，主笔尖包含一个菜单和一个窗口。只需删除窗口并在单独的 nib 中重新创建它即可在默认情况下停止窗口加载。

如果您的应用程序是基于文档的，那么情况会有所不同。您将有一个 NSDocument 子类，它应该有一个名为*windowNibName*的方法，该方法返回要加载的 nib 文件的名称。删除此方法，而是覆盖*makeWindowControllers*以返回您的*NSWindowController*对象。还有比这更多的内容，但这[应该](https://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/DocBasedAppProgrammingGuideForOSX/KeyObjects/KeyObjects.html#//apple_ref/doc/uid/TP40011179-CH3-SW8)可以帮助您入门，其余的超出了您最初问题的范围。

# c++ - 如何为 Syslink 控制处理 NM_CLICK

> ID：10726099
> 
> 赞同：2
> 
> 时间：2012-05-23T18:52:18.743
> 
> 标签：c++, winapi, visual-c++, native, win32gui

做了很多研究，试图弄清楚如何让它正常工作。我读到如果您过滤 WM_NOTIFY -> NM_CLICK，它将捕获系统链接的实际单击事件。麻烦的是它捕捉到了事件，尽管它陷入了无休止的递归中，并且在几秒钟内你就有了数百个浏览器窗口，或者链接打开了。

**采取的步骤**：

1.  在对话框中创建 Syslink
2.  为Syslink控制链接添加标题并将IDD更改为IDC_LINK1
3.  过滤 NM_CLICK 事件的 WM_NOTIFY

    ```
     case WM_NOTIFY:
      //case NM_CLICK:
      switch(LOWORD(wParam))
      {
          case NM_CLICK:
             switch(LOWORD(wParam))
         {
                 case IDC_LINK1:
                     // Standard ShellExecute with added check for IsLinkCtrl to make sure its the right kind of control.
                     OpenLink(hWndDlg, LOWORD(wParam));            
             break;
         }
         break;
      }
      break; 
    ```

我想我真正的问题是我该如何正确地做到这一点？我没有看到任何很好的例子来说明如何正确过滤 Syslink 以将链接作为 url 执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T22:22:01.283

澄清一下，我不认为您使用的是托管 C++，因为我不确定您为什么将 NM_CLICK 通知代码称为事件。此外，您不必捕获任何东西，您没有处理任何异常，您只是在处理 WM_NOTIFY 消息。

无论如何，我不确定您为什么会遇到这种特殊行为，因为我看不到您在代码片段之外做了什么，但我知道是什么原因造成的。在我们的代码片段中，您使用 wParam 来确定通知代码，这是不正确的。此控件不使用 wParam。要确定通知代码，您应该执行以下操作：

```
 NMHDR* pHeader = (NMHDR*)lParam;

    switch (pHeader->code) 
```

**pHeader->code**保存您应该使用的通知代码值，**pHeader->hwndFrom**是被单击控件的句柄。

此外，您再次使用 LOWORD(wParam) 并将其作为参数传递给函数调用。你没有展示你在这个函数中做了什么，但我可以得出结论，代码也不正确。相同的 lParam 是指向 NMLINK 结构的指针。这个结构的第一个成员是上面提到的 NMHDR，下一个成员是 LITEM 结构，应该用来确定 URL 是什么。

```
 NMLINK* pNMLink = (NMLINK*)lParam;
    LITEM iItem = pNMLink->item; 
```

**item.szUrl**是您应该在调用 ShellExecute 调用打开时使用的 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T18:48:35.253

我找到了一种成功的方法来让它工作而不需要递归。消息循环似乎一直在连续循环中读取，如果您不使用正确的结构进行过滤，它将陷入无限递归。这对我有用。如果你有更好的输入，请做插件。

要采取的正确步骤。

1.  创建 WM_NOTIFY 消息过滤事件。
2.  使用 NMHDR 创建 Switch 语句以解析 NM_CLICK 的代码。
3.  检查 wParam 以识别正在单击的正确控件。
4.  执行与 ShellExecute 的链接。

使用了以下代码。

```
 case WM_NOTIFY:
           //NMHDR* pHeader = (NMHDR*)lParam;
           //NMLINK* pNMLink = (NMLINK*)lParam;
           //LITEM iItem = pNMLink->item;
           switch(((NMHDR *)lParam)->code)
           {
               case NM_CLICK:
               { // Included to avoid "case" skip statements.
                   times++;

                   NMLINK* pNMLink = (NMLINK*)lParam;
                   LITEM iItem = pNMLink->item;
                   // Custom OutputDebugString
                   winapi::Output("NM_CLICK: Fired %d time%s!\n", times, (times <= 1) ? L"" : L"s");
#ifdef DEBUG
                   assert(iItem.szID);
                   MessageBox(NULL, (LPCWSTR)lParam, L"Assert", MB_OK|MB_ICONINFORMATION);
#endif
                   if(wParam == IDC_LINK1)
                   {
                       winapi::Output("Success!");
                       OpenLink(hWndDlg, LOWORD(wParam));
                   } 
```

**注意**：如果您依赖包含 HTML 属性（链接或此处）的链接来提供 Shellexecute 其 url 路径，请使用 NMLINK 结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T18:06:28.533

任何一个

1.  您的`OpenLink`函数导致发送另一条消息（很可能），或者

2.  这不是唯一`OpenLink`被调用的代码，或者

3.  `WM_NOTIFY`您不是从，而是从上述案例的失败中获得此代码，或者

4.  `DefWindowProc`即使您已经处理了它，您仍会调用该消息。

尝试

```
 break; // make sure there's no fall-through here
  case NM_CLICK:
     switch(LOWORD(wParam))
     {
         case IDC_LINK1:
             // Standard ShellExecute with added check for IsLinkCtrl to make sure its the right kind of control.
             OpenLink(hWndDlg, LOWORD(wParam));            
             return TRUE; // handled, don't pass to DefWindowProc
     }
     break; 
```

# jquery - 在递归循环中运行函数之间等待

> ID：10726104
> 
> 赞同：-1
> 
> 时间：2012-05-23T18:52:36.003
> 
> 标签：jquery, sharepoint

我创建了一个递归循环来使用 SPServices 删除 SharePoint 列表中的项目。我设置了 5 秒的超时时间；但是由于某种原因，它一次只删除 2 个项目，然后执行等待而不是删除批处理，然后重复该功能。

请在下面找到我的代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.SPServices/0.7.1a/jquery.SPServices-0.7.1a.min.js"></script>
<script type="text/javascript">

    $(document).ready(function () {
        $intStart = 1;
        $intCount = 10;
        $intEnd = 40;

        $("input[class='buttonpush']").click(function () {
            var looper = function () {
                if ($intStart < $intCount && $intStart < $intEnd) {
                    $().SPServices.SPUpdateMultipleListItems({
                        webURL: "http://widgettest",
                        listName: "TestList",
                        CAMLQuery: "<Query><Where><And><Gt><FieldRef Name='ID' /><Value Type='Counter'>" + $intStart + "</Value></Gt><Lt><FieldRef Name='ID' /><Value Type='Counter'>" + $intCount + "</Value></Lt></And></Where></Query>",
                        batchCmd: "Delete",
                        valuepairs: [],
                        debug: false,
                        completefunc: function (xData, Status) {
                            $intStart = $intStart + 5;
                            $intCount = $intCount + 5
                            setTimeout(looper, 5000);
                        }
                    });
                }
                else { 
                }
            }
            looper();
        });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:46:29.787

好的，现在您显示了对 的初始调用`looper()`，逻辑似乎没有任何问题。 `looper()`应该运行 8 次，直到`$intStart`等于 41。这些是您可能无法获得预期的 looper() 连续运行次数的原因：

1.  你得到一个错误`$().SPServices.SPUpdateMultipleListItems()`并且`completeFunc`没有像你期望的那样被执行。
2.  您的代码中的其他内容正在操作全局变量的值`$intStart`，`$intCount`或者`$intEnd`它们在您运行时意外更改，因此循环不会像预期的那样运行尽可能多的迭代。
3.  在运行过程中，您会在某处得到一个 javascript 异常，`looper()`这会导致执行停止。

要对此进行调试，只需在调用之前放置一个独特的`console.log()`语句，然后在调用之前放置另一个语句`$().SPServices.SPUpdateMultipleListItems()`，`completeFunc`这样您就可以准确地知道它在停止之前已经走了多远。

对代码的其他一些观察：

1.  `$intStart`总是小于，`$intCount`因为它开始较少并且两者都增加 5，所以你不需要`if`语句的那部分。
2.  `$`除非您暗示某种特殊类型的变量，否则不习惯在 javascript 变量前面加上符号。这不是这里的情况，只是阻碍了熟悉 javascript 的人对 javascript 的可读性。
3.  您的变量`$intStart`，`$intCount`或者`$intEnd`可能不应该是全局变量，并且在所有情况下都不应隐式声明或意外声明全局变量。如果您的意思是让它们成为全局变量，则使用 . 将它们声明为全局范围内的全局变量`var`。如果您的意思是让它们在某个范围内是本地的，那么在该范围内声明它们。
4.  因为您的变量是全局变量并且一次只初始化一个`document.ready()`，所以您的按钮只能在第一次工作。第二次推送时它永远不会做任何事情。
5.  您的代码在运行时不受用户再次按下按钮的保护`looper()`（这将导致启动重复请求）。

这是您的 CAMLQuery 前两次的内容：

```
<Query>
    <Where>
        <And>
            <Gt>
                <FieldRef Name='ID' />
                <Value Type='Counter'>1</Value>
            </Gt>
            <Lt>
                <FieldRef Name='ID' />
                <Value Type='Counter'>10</Value>
            </Lt>
        </And>
    </Where>
</Query>"    

<Query>
    <Where>
        <And>
            <Gt>
                <FieldRef Name='ID' />
                <Value Type='Counter'>6</Value>
            </Gt>
            <Lt>
                <FieldRef Name='ID' />
                <Value Type='Counter'>15</Value>
            </Lt>
        </And>
    </Where>
</Query>" 
```

这对我来说看起来不正确。第一次，您要求处理 > 1 && < 10。第二次，您要求处理 > 6 && < 15。

第二次不应该是 > 9 && < 18 以获得尚未处理的新的吗？

# java - 用于计算活动呼叫的更快算法

> ID：10726107
> 
> 赞同：4
> 
> 时间：2012-05-23T18:52:51.103
> 
> 标签：java, algorithm, optimization

我们正在为呼叫中心实施密度报告。结果必须显示为表格，每天有一行显示当天**同时**活动的最大呼叫数。

我们正在构建 UI 背后的库。合约指定我们接收当天的通话次数和两个整数数组，一个是开始时间，一个是每次通话的结束时间，例如：

对于给定的一天，只收到两个电话：一个从时间 20 到 30，另一个从 10 到 20。同时呼叫的最大数量是 1。

另一方面，再过一天，也接到两个电话，一个从 10 到 45，另一个从 15 到 40，那么同时呼叫的最大数量是 2。

Web服务的合同是这样的

```
public static int GetMaxDensity(int N, int[] X, int[] Y) 
```

数据看起来像这样（假设当天接到 3 个电话）。第一个从 10 到 25，第二个从 12 到 30，第三个从 20 到 23。

```
N = 3, 
X = {10, 12, 20}
Y = {25, 30, 23} 
```

回报必须是：3。

我已经实现了这个解决方案：

```
public static int GetMaxDensity(int N, int[] X, int[] Y) 
{
  int result = 0;
  for (int i = 0; i < N; i++) 
  {
      int count = 0, t = X[i];
      for (int j = 0; j < N; j++) 
      {
        if (X[j] <= t && t < Y[j])
        count++;
      }
      result = Math.max(count, result);
   }
   return result;
} 
```

当呼叫数量高达 1000（周末）但在工作日内数量很大并且计算时间很长（> 5 分钟）时，它的效果很好。我现在的原因可能是我的解决方案是使用两个嵌套循环，但我对复杂算法没有太多经验，所以我的问题是：

鉴于我只需要同时调用的最大数量（不是时间也不是调用者），如果有一个，这可能是执行此计算的更快方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T19:08:32.220

随着 N 的增长，您的时间会迅速增长 (N*N)。一个简单的解决方案（如果您的时间间隔为午夜后的几分钟）是创建一个包含 1440 个整数的数组，其中包含一天中每一分钟的呼叫计数变化。然后您可以从 0 到 N-1 循环一次，并且对于每个元素，通过在调用开始时增加值并在结束时减少值来调整该时间点的调用计数增量的计数。之后，只需查看计数以获得最大值。对于较大的 N 值，这应该快得多。

由于 1440 是一个常数（对于最后一步），并且不需要对输入进行排序，因此这应该具有线性时间复杂度。该算法的运行时间不受平均调用长度的影响。

```
public static int GetMaxDensity(int N, int[] X, int[] Y) {
    int rangeStart = Integer.MAX_VALUE;
    int rangeEnd = Integer.MIN_VALUE;
    for(int i=0; i<N; i++) {
        if (X[i] < rangeStart) rangeStart = X[i];
        if (Y[i] > rangeEnd) rangeEnd = Y[i];
    } 
    int rangeSize = rangeEnd - rangeStart + 1;
    int[] histogram = new int[rangeSize];
    for (int t = 0; t < rangeSize; t++) histogram[t] = 0;
    for (int i = 0; i < N; i++) {
        histogram[X[i]-rangeStart]++;
        histogram[Y[i]-rangeStart]--;
    }
    int maxCount = 0;
    int count = 0;
    for (int t = 0; t < rangeSize; t++) {
        count += histogram[t];
        if (count > maxCount) maxCount = count;
    }
    return maxCount;        
} 
```

相比之下，N=50,000 且随机调用长度在 1 到 40 分钟之间，问题中的算法使用了 29,043 毫秒，而该算法使用了 8 毫秒。我在 c# 中运行了这些测试，但它们应该与 Java 产生的结果相当。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T19:25:38.210

请允许我提出一个不同的算法。鉴于每天最多有 24*60 = 1440 分钟，为什么不制作一个直方图数组来计算每分钟同时调用的数量。

```
public static int GetMaxDensity(int N, int[] X, int[] Y) 
{
  int[] h = new int[1440];
  // loop through all calls
  for (int i=0; i<N ; i++){
    addIt(X[i], Y[i], h);
  }

  // find max
  int m = 0;
  for(int i =0 ; i<1440; i++){
    if (h[i]>m)
      m = h[i];
  }
  return m;
}

// counting for one call
public static void addIt(int x, int y, int[] h){
  for ( int i=x;i<y;i++){
    h[i]++;
  }
} 
```

复杂度为 O(m*n)，其中 m 是调用的平均长度。由于调用的数量可能远远超过 1000，所以运气好的话，这个算法在实践中会更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T19:43:29.170

按开始时间对所有呼叫进行排序。遍历列表并保留按结束时间排序的“活动呼叫”列表。应该看起来像这样：

```
public class DensityReport {

  static int count;

  static class Call {
    public Call(int x, int y) {
      double f = 0.1/(++count);
      start = x + f;
      end = y + f;
    }
    double start;
    double end;
  }

  public static int getMaxDensity(int n, int[] x, int[] y) {
    // Calls sorted by start time
    TreeSet<Call> calls = new TreeSet<Call>(new Comparator<Call>() {
      public int compare(Call c1, Call c2) {
        return c1.start < c2.start ? -1 : c1.start > c2.start ? 1 : 0;
      }
    });

    // Add all calls to the sorted set.
    for (int i = 0; i < n; i++) {
      calls.add(new Call(x[i], y[i]));
    }

    int max = 0;
    // Active calls sorted by end time
    TreeSet<Call> activeCalls = new TreeSet<Call>(new Comparator<Call>() {
      public int compare(Call c1, Call c2) {
        return c1.end < c2.end ? -1 : c1.end > c2.end ? 1 : 0;
      }
    });

    for (Call call: calls) {
      // Remove all calls that end before the current call starts.
      while(activeCalls.size() > 0 && activeCalls.first().end < call.start) {
        activeCalls.pollFirst();
      }
      activeCalls.add(call);
      if (activeCalls.size() > max) {
        max = activeCalls.size();
      }
    }
    return max;
  }
} 
```

运行时间应该是 O(n log n)

PS：如果我们可以假设呼叫已经按开始时间排序，则应该可以简化这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T19:12:54.130

您的算法非常慢，因为它实际上测试了所有可能的情况，即 O(n^2)。

假设您的电话在您收到电话时是有序的，这里是一个 O(n) 算法：[编辑：应该对第二个数组进行排序]

```
 int max;
    int i=0,j=0,count=0;
    while(i<n && j<n){
        if(x[i]<y[j]){ //new call received
            count++;
            max = count>max? count:max;
            i++;
        }else if(x[i]==x[j]){ //receive new call at the same time of end call
            i++;
            j++;
        }else { //call ended
            count--;
            j++;
        }
    }
    return max;
  } 
```

[**注意**：此代码很可能会抛出数组索引超出范围错误，但应该足以证明这个想法，以便您可以实现其余部分]

如果调用未排序，则算法为 O(n lg n)：

```
array_of_calldata a = x union y
a.sort();
foreach(calldata d in a){
    if (d is new call) count++;
    else count--;
}
return max_value_of_count; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T19:09:44.513

使用两个列表，将 X[i] Y[i] 对添加到这些列表中。第一个列表按呼叫开始时间排序，第二个列表按结束时间排序。遍历列表，仅步进最低时间列表。

```
class Call {
    int start;
    int end;
}

Call callsSortedOnStart[];
Call callsSortedOnEnd[];

int indexStart = 0;  // Position in the array
int indexEnd = 0;

int nCalls = 0;      // Current density of calls
int maxCalls = 0;    // Maximum density of calls

while(indexStart < callsSortedOnStart.length && indexEnd < callsSortedOnEnd.length) {
    while(callsSortedOnStart[indexStart].start <= callsSortedOnEnd[indexEnd].end) {
        indexStart++;
        nCalls++;
    }
    maxCalls = max(maxCalls, nCalls);

    while(callsSortedOnStart[indexStart].start > callsSortedOnEnd[indexEnd].end) {
        indexEnd++;
        nCalls--;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T19:10:42.937

制作一系列通话事件。呼叫事件只是一个具有时间字段和启动字段的结构，其值为 +1 或 -1 用于呼叫开始和呼叫结束。按时间字段排序此数组（如果时间相等，则使用第二个字段，结束事件在开始事件之前）。初始化 CurrentCalls = 0。迭代数组，将 StartEnd 字段添加到 CurrentCalls。数组扫描期间 CurrentCalls 的最大值是您所需要的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-23T19:35:06.757

按开始时间对持续时间进行排序。这样，当您的内部循环中的开始时间超出外部循环提供的范围时，您可以`break`使用内部循环。

# templates - 模板约束中的 ElementType

> ID：10726109
> 
> 赞同：1
> 
> 时间：2012-05-23T18:52:55.513
> 
> 标签：templates, d

[std.range.ElementType](http://dlang.org/phobos/std_range.html#ElementType)应该如何在模板约束中使用？

我是这样想的，但我错了

```
import std.range;
auto f(T)(T x)
    if (ElementType!(T) is uint) // adding this line causes lot of error messages 
                                // first of which is:  found ')' when expecting '.' following uint
{
    return x;
}
f(map!"a"([1,2,3,4])); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:38:45.777

**is**表达式与is*运算*符不同。关于 is 表达式的文档在这里：[http](http://dlang.org/expression.html#IsExpression) ://dlang.org/expression.html#IsExpression 。*is*运算符对值进行按位比较，而**is**表达式比较类型（并进行疯狂的模式匹配）。你的约束应该这样写：

```
auto f(T)(T x)
     if (is(ElementType!(T) == uint)) 
```

或者，如果您还想匹配任何可隐式转换为 uint 的内容：

```
auto f(T)(T x)
     if (is(ElementType!(T) : uint)) 
```

此外，我已经修复了您对 ElementType 的调用，添加了“！” 在适当情况下; ElementType 是一个模板，而不是一个函数。

# python - CherryPy :: 嫁接 wsgigateway 与将其添加到路由调度程序

> ID：10726112
> 
> 赞同：0
> 
> 时间：2012-05-23T18:53:21.490
> 
> 标签：python, wsgi, cherrypy

我是cherrypy的新手，并且正在将代码从pylons移动到cherrypy ...我有一个WSGIGateway对象，我将它移植到我的cherrypy树上。

```
cherrypy.tree.graft(mygatewayobj, '/foo/') 
```

我也有一个路线调度员

```
dispatcher.connect(route = '/foo', name ='foocontroller', controller = mygatewayobj) 
```

我是否应该为网关同时连接两个连接，或者这种冗余是否可能导致我意外的、无错误消息的崩溃？另外，如果我确实需要嫁接，应该

```
/foo/ or /foo? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:36:44.057

与 相比，性能`routesDispatcher.connect()`很差`cherrypy.graft.tree()`。

我为cherrypy做了一些基准测试，得到的结果完全出乎意料。`RouteDispatcher`当您尝试使用cherrypy 的机制来路由URL时，RPS 下降到近一半。使用时我能够获得大约 2500 RPS，`cherrypy.graft.tree()`而使用路由调度程序时 RPS 下降到大约 1100。

我的建议是使用它，`cherrypy.graft.tree()`因为它允许您在不进行配置更新的情况下即时添加 URL，而且速度也快得多。

# javascript - IE 8 中的 execScript 尝试/捕获异常

> ID：10726113
> 
> 赞同：1
> 
> 时间：2012-05-23T18:53:22.640
> 
> 标签：javascript

我在 try/catch 块中使用 execScript 来执行一段字符串化的 JavaScript。如果字符串在 execScript 中存在 javascript 错误，则在随后重新加载页面时，将在 IE 8 的 catch 块中返回以下错误：

“错误：由于错误 80020101，无法完成操作。”

是否有任何其他方法可以在 IE 8 中全局评估 javascript，不会引发像上面那样的一般错误。我知道使用 eval 将不起作用，因为它不会在全局上下文中评估 javascript。

下面是关于我的代码的一些设置，fn 是要评估的字符串：

```
// fn is defined somewhere above this code

function globalEvaluation() {
    if(document.defaultView) {
       document.defaultView.eval.call(undefined, fn);
    } else if (document.parentWindow) {
        document.parentWindow.execScript(fn);
    } 
}

return function() {
    try {
         globalEvaluation();
    } catch(e) {
       // do some error handling
       // in IE 8 I get the 80020101 error
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:29:57.507

我已经看到当 IE 的脚本引擎遇到无效的 javascript 时会发生此错误（我最近的示例：尝试通过 COM 直接通过 SHDocVw.dll 调用无效的 javascript 或不存在的函数）。所以我将该错误消息解释为 IE8 只是简单地认为你正在给它喂一些无效的东西并且无论如何都会窒息。

这可能是问题吗？[IE 8 defaultView 等效](https://stackoverflow.com/questions/2297217/ie-8-defaultview-equivalent)虽然`document.defaultView.eval.call`在 IE9 中对我来说似乎仍然可以正常工作。

我的猜测是 有一个错误`fn`，也许某些东西仍然超出范围？如果你传递一些它认为无效的东西，我相信它总是会抛出那个无用的错误。是否`fn`自行进行任何空值检查/错误处理？

# vb.net - Richtextbox 占据表单宽度的一半

> ID：10726115
> 
> 赞同：1
> 
> 时间：2012-05-23T18:53:27.807
> 
> 标签：vb.net, visual-studio-2010

我在表单上有 2 个 Richtextboxws。我需要每个文本框占据表单宽度和全高的一半。另外，即使在屏幕上更改了表单大小，我也需要这些文本框来保持上述比例。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:10:02.867

将 a`TableLayoutPanel`与默认的 2 列一起使用，删除最后一行，这样您就只有 1 行。默认情况下，列 SizeType 设置为 50%，因此两列都会按比例增长和缩小。

在 TableLayoutPanel 控件的每个面板中放置一个 RichTextBox 控件。

设置`DockStyle=Fill`TableLayoutPanel 和两个 RichTextBox 控件。

# python - send_mail 工作，而 EmailMultiAlternatives.send 不工作

> ID：10726116
> 
> 赞同：1
> 
> 时间：2012-05-23T18:53:33.733
> 
> 标签：python, django, django-email

我觉得这很奇怪。这段代码不会发送两封电子邮件。使用 send_mail 的第一种方法是工作查找。使用 EmailMultiAlternatives 时不会发送任何消息。我已经调试了 user.email，并且它使用了失败的电子邮件地址，以防万一。此代码从管理命令运行。

```
send_mail("test", "test", "test@test.com", ["my@email.com"])                                                                    
msg = EmailMultiAlternatives(
             self.TITLE,
             self.generate_text_content(cans, cants, "week"),
             settings.NOREPLY_EMAIL, [user.email])
msg.attach_alternative(self.generate_html_content(cans, cants, "week")
                    ,"text/html")
msg.send(fail_silently=False) 
```

# php - 使用php发布和提取

> ID：10726117
> 
> 赞同：2
> 
> 时间：2012-05-23T18:53:40.037
> 
> 标签：php, post, curl, extract

我对php真的很陌生，这就是我想要做的。

我有一个表格：

```
<form method="post" action="something.com/get.php">

<tr height="5">
<td valign="top" style='font-family:verdana;font-size:8pt;'><br/>
<br/>Number: <br/>
<input type="text" name="number" size="20" maxlength="100" />
<input type="submit" name="submit"/> 

</form> 
```

现在 get.php 位于其他服务器上

发送帖子数据后，我在“get.php”上得到类似的东西

```
 <table border="1" cellpadding="2" cellspacing="2" width="400">

<tr>
        <td>33721</td>
</tr> 
```

现在我的问题和问题是我不想透露 get.php 的位置。

因此，由于我是 php 或任何类型的网络编程的新手，我不知道该怎么做。

我的想法是如果我可以制作一个 php 文件来获取帖子数据。

然后我的表单将其传递到主页，然后从主页中提取包含。

并将其显示给用户，我尝试了一些像 header 和 curl 这样的东西。

但非真正起作用可能是因为我是新手，现在我无法对“get.php”的主页进行任何更改，所以我必须找到另一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:53:44.250

我建议您需要使用 Apache 的 mod_rewrite 将 url 重写为其他内容。

因此，您可以通过将表单提交到的 url 隐藏脚本的位置，如下所示：

something.com/get

然后可以由 mod_rewrite 重写，如下所示：

重写规则 ^/get$ /path-to-script/get.php

这样您就可以将脚本放在任何地方。然后，您可以拒绝通过 url 访问脚本。因此，如果有人尝试直接访问 get.php，他们将收到来自 apache 的禁止错误消息。

因此，在您的虚拟主机中，您将拥有以下内容：

重写引擎开启

RewriteRule ^/get$ /path-to-script/get.php [L]

RewriteRule ^/path-to-script/get.php - [F,NS]

这有效地做的是将'/get'形式的url重写为/path-to-script/get.php，如果有人试图直接访问/path-to-script/get.php（通过地址栏），禁止它。

这样，您可以将 get.php 放在不明显的地方，也可以阻止人们访问它。

我意识到如果你说你是新手，这可能会很复杂，但你可能想研究一下。

# django - 如何在django的模板标签中调用方法时传递“请求”参数

> ID：10726118
> 
> 赞同：1
> 
> 时间：2012-05-23T18:53:40.247
> 
> 标签：django, django-views, django-templates, django-ajax-selects

我陷入了一个非常奇怪的境地。在 templatetag/somefile.py 中定义了两个方法，命名为：**ajax_print_widget**和**render_widget**

```
 def ajax_print_widget(request, template, context1 ):
 if request.is_ajax():
     q = request.GET.get( 'q' )
     if q is not None:
         data = {
             'results': context1,
         }
         import pdb; pdb.set_trace()
         return render_to_response( template, data, 
                                    context_instance = RequestContext( request ) )

 @register.simple_tag
 def render_widget(widget_settings):
     widget = widget_settings.get_widget()
     template_name = widget.template_name
     context = widget.context(widget=widget_settings)
     t =  get_template("widgets/%s" % template_name)
     return ajax_print_widget(t,context) 
```

我的主要动机是使用 Ajax 传递数据（因为我正在检查 ajax_print_widget 方法）并将其呈现给模板，其余的事情将由 jquery 在给定的模板名称中处理。要执行此操作，我正在执行以下步骤：

我通过写作尝试了这一点：

```
return ajax_print_widget(request, t, context) 
```

但它显示一个错误，即请求不是全局变量（这很明显），如果我将其余代码粘贴在上面，那么它会显示另一个错误，即 ajax_print 需要 3 个参数并给出 2 个（对）现在我我没有得到任何提示来解决这个问题，并且没有通过请求它对我不起作用。

除此之外，我对模板标签有疑问。我什至搜索了这个 render_widget 方法，但我没有在任何文件中找到它被调用的地方。能否请您告诉我模板标签的意义。在模板标签中定义的方法是从某个地方调用的，或者为什么我们在模板标签中写这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T19:06:16.620

如果您[`django.core.context_processors.request`](https://docs.djangoproject.com/en/1.3/ref/templates/api/#django-core-context-processors-request)在`TEMPLATE_CONTEXT_PROCESSORS`设置中启用（默认情况下不在其中）并将标签更改为，`takes_context=True`那么您可以在模板标签中获取请求。[https://docs.djangoproject.com/en/1.3/howto/custom-template-tags/#simple-tags](https://docs.djangoproject.com/en/1.3/howto/custom-template-tags/#simple-tags)

```
@register.simple_tag(takes_context=True)
def render_widget(context, widget_settings):
    request = context.get('request')
    # Rest of the tag goes here 
```

请注意，这还要求您的模板使用`RequestContext`.

# ruby-on-rails - 有没有更好的方法来忽略\n？

> ID：10726125
> 
> 赞同：0
> 
> 时间：2012-05-23T18:54:21.813
> 
> 标签：ruby-on-rails, syntax

我的测试开始失败，因为我`debugger`在 XML 预期块之后添加了一个。现在它`\n`在我的测试失败的语句末尾产生一个单曲。而且我似乎无法摆脱它，无论如何我删除或移动我的文本。

然后我写了这个让它通过：

```
 expected = <<-XML
    <?xml version="1.0" ?>
    <?qbxml version="5.0" ?>
    <QBXML>
      <QBXMLMsgsRq onError="continueOnError">
      </QBXMLMsgsRq>
    </QBXML>
    XML
  assert_equal expected.gsub(/\n/,'').gsub(' ',''), result.gsub(/\n/,'').gsub(' ','')
  #assert_equal expected.strip, result 
```

否则，注释掉的那个曾经可以工作。我在这里缺少一些愚蠢的明显感觉吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:26:40.060

您可以`\s`在正则表达式中使用来替换换行符和空格字符，它更具可读性：

```
assert_equal expected.gsub(/\s/,''), result.gsub(/\s/,'') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:29:05.783

我不会比较字符串，这很糟糕。

相反，我会比较对象表示。

尝试使用：Hash#from_xml 并比较哈希值。

# php - 不显示错误页面

> ID：10726128
> 
> 赞同：0
> 
> 时间：2012-05-23T18:54:26.890
> 
> 标签：php, codeigniter

我试图弄清楚为什么当用户ID 和/或registrationKey 未放入URL 时，它不会显示404 错误页面。应该发生的是，当加载激活控制器时，它应该查看 userID 和 registrationKey 是否在 URL 中，如果没有，则转到错误页面。

网址：siteurl.com/cms/activate/1/d87f0d8a7f0a8

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 

class Activate extends CI_Controller { 

public function __construct()
{
    parent::__construct();
    $this->load->model('users/usersmodel');
}

public function index($userID = NULL, $registrationKey = NULL)
{
    //Config Defaults Start
    $msgBoxMsgs = array();//msgType = dl, info, warn, note, msg
    $cssPageAddons = '';//If you have extra CSS for this view append it here
    $jsPageAddons =  '';//If you have extra JS for this view append it here
    $metaAddons = '';//Sometimes there is a need for additional Meta Data such in the case of Facebook addon's
    $siteTitle = '';//alter only if you need something other than the default for this view.
    //Config Defaults Start

    //examples of how to use the message box system (css not included).
    //$msgBoxMsgs[] = array('msgType' => 'dl', 'theMsg' => 'This is a Blank Message Box...');

    /**********************************************************Your Coding Logic Here, Start*/

    if( !is_numeric($userID) || !preg_match('/^[A-Za-z0-9]+$/', $registrationKey) ) 
    {
        show_404();
    } 
    else 
    {
        $registrationDetails = $this->usersmodel->getRegistrationDetails($userID);
        if (!is_null($registrationDetails))
        {
            $regKeyDate = $registrationDetails->registrationKeyDate;

            if ($this->usersmodel->activateUser($userID, $registrationKey))
            {
                $message = 'User was activated successfully! You may now login!';                
            }
            else
            {
                $message = 'User was not activated successfully! Please try again with the right credentials!';  
            }
        }
        else
        {
            $message = 'Two or more days have passed since you registered! You will need to register again!';    
        }
        $bodyContent = $this->config->item('defaultTemplate') ."/usermanagement/forms/activate";//which view file  
    }

    $this->data['message'] = $message;
    $bodyType = "full";//type of template   

    /***********************************************************Your Coding Logic Here, End*/

    //Double checks if any default variables have been changed, Start.
    //If msgBoxMsgs array has anything in it, if so displays it in view, else does nothing.      
    if(count($msgBoxMsgs) !== 0)
    {
        $msgBoxes = $this->msgboxes->buildMsgBoxesOutput(array('display' => 'show', 'msgs' =>$msgBoxMsgs));
    }
    else
    {
        $msgBoxes = array('display' => 'none');
    }

    if($siteTitle == '')
    {
        $siteTitle = $this->metatags->SiteTitle(); //reads 
    }

    //Double checks if any default variables have been changed, End.

    $this->data['msgBoxes'] = $msgBoxes;
    $this->data['cssPageAddons'] = $cssPageAddons;//if there is any additional CSS to add from above Variable this will send it to the view.
    $this->data['jsPageAddons'] = $jsPageAddons;//if there is any addictional JS to add from the above variable this will send it to the view.
    $this->data['siteTitle'] = $siteTitle;//defaults can be changed via models/metatags.php
    $this->data['bodyType'] = $bodyType;
    $this->data['bodyContent'] = $bodyContent;
    $this->load->view($this->config->item('defaultTemplate') .'/usermanagement/index', $this->data);
}

}

/* End of file activate.php */ 
/* Location: ./application/controllers/activate.php */ 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:59:58.107

我认为代码看起来不错，但您可能需要自己解决一些问题。如果您不通过 URI 传递参数并且未调用 show_404() 函数，那么您需要查看这些变量包含的内容。由于任一用户ID 不是数字或registrationKey 不仅仅是字母数字。如果你`var_dump`在声明它们之前，并且没有在你的 URI 中传递参数，会发生什么？

# android - （找不到 id 参考）没有资源与给定名称匹配

> ID：10726130
> 
> 赞同：12
> 
> 时间：2012-05-23T18:54:34.083
> 
> 标签：android, android-layout, android-xml

我在相对布局中有以下内容。

```
<TextEdit
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@id/buttonA"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_toLeftOf="@id/buttonA" />

<Button
    android:id="@+id/buttonA"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:text="@string/message" >
</Button> 
```

Eclipse 分别在 android:layout_alignBottom="@id/buttonA" 和 android:layout_toLeftOf="@id/buttonA" 行给了我这些错误：

错误：错误：未找到与给定名称匹配的资源（在“layout_alignBottom”处，值为“@id/buttonA”）。

错误：错误：未找到与给定名称匹配的资源（在“layout_toLeftOf”处，值为“@id/buttonA”）。

将 @id/buttonA 替换为 @+id/buttonA 会删除此 Eclipse 错误消息。这是正确的做法吗？如果是这样，为什么会这样呢？@+id 不会创建一个新的 id 吗？我不想要一个新的身份证。我想使用按钮对象中引用的那个。处理这个问题的最佳方法是什么？

多谢你们。-乔

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-23T18:56:41.453

使用`@+id`是正确的方法。`@+id`创建一个新的 id，但前提是该名称的 ID 尚不存在。

如果您不想这样做，对于这种特殊的简单情况，只需`TextEdit`将`Button`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-09T10:44:27.500

您尝试用作**参考的布局应在用作参考之前定义，**即用作“layout_toLeftOf”。

这就像你必须在使用它之前在 java 中声明一个变量。声明然后使用它...

如果您需要在文件中定义之前提及 id，那么您需要**使用** `@+id/textView1` **而不是** `@id/textView1`

# android - 安卓上的 OSGI

> ID：10726134
> 
> 赞同：0
> 
> 时间：2012-05-23T18:55:09.060
> 
> 标签：android, osgi, apache-felix

我读了很多关于 OSGI 和 Android 的想法，但我的问题仍未得到解答。我目前正在开发一个小型桌面应用程序，基本上使用 Equinox 作为 OSGI 实现。对于通用功能，我创建了一个自己的 OSGI-Bundle 并使用服务注册表来获取实现，其余的都是正常的 pojo。

我想问一下它可以在带有 apache-felix 的 android 上运行正常的 OSGI-Bundles 吗？

我问是因为我试图在 android 上启动 apache felix，但我仍然遇到异常：java.lang.NoClassDefFoundError: org/apache/felix/main/Main

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:53:25.657

看看[EZDroid](http://www.ezdroid.com/)

（还要注意 ProSyst 有一个[android OSGi 框架](http://www.prosyst.com/index.php/de/html/content/49/mBS-Mobile-for-Android/)，但我不确定它是否是你问的 Felix）

一些链接：

*   [http://luminis-technologies.com/technologies/ezdroid/](http://luminis-technologies.com/technologies/ezdroid/)
*   [http://felix.apache.org/site/presentations.data/Apache%20Felix%20on%20Androids.pdf](http://felix.apache.org/site/presentations.data/Apache%20Felix%20on%20Androids.pdf)
*   [http://felix.apache.org/site/presentations.data/OSGi%20on%20Google%20Android%20using%20Apache%20Felix.pdf](http://felix.apache.org/site/presentations.data/OSGi%20on%20Google%20Android%20using%20Apache%20Felix.pdf)
*   [http://lsd.luminis.nl/osgi-on-google-android-using-apache-felix/](http://lsd.luminis.nl/osgi-on-google-android-using-apache-felix/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T12:22:29.410

您是否使用了正确版本的 Apache-Felix？在 Android 上需要将所有 jar 初步转换为 dex 格式。这是 Android 的 Dalvik VM 能够理解的唯一格式，否则您最终会得到这个 java.lang.NoClassDefFoundError。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T07:58:23.673

关于 Felix 在 Android 上的位置，将其放在 /data 文件夹和 /sdcard 中存在显着差异。不太熟悉 Felix for Android 的最新端口，但他们可能需要一些基于位置的权限。我建议在此处发布 Logcat 的一部分，但您观察到的例外情况除外，以便尝试为您提供解决方案。正如你所说，由于你的包不依赖于 Felix 特定的 API，我建议你检查 ProSyst OSGi Runtime for Android。它可在 Android 市场免费获得：[OSGi Mobile](http://play.google.com/store/apps/details?id=com.prosyst.mbs.mobile.android)。您可以将捆绑包放在 sdcard 上，然后通过 UI 安装它们。希望有帮助！

# javascript - 输入对象的问题

> ID：10726140
> 
> 赞同：1
> 
> 时间：2012-05-23T18:55:30.427
> 
> 标签：javascript, jquery, html

我正在尝试创建一个练习，用户必须从单选按钮列表中选择正确的答案。如果用户不认为最初的答案是正确的，“推荐”单选按钮只会提出更多选项。此 javascript 代码从其自己的 .js 文件运行并链接到 .html 页面。但是，当我按下任何单选按钮（输入）时，似乎什么都没有发生，我找不到问题所在。有人看到什么吗？

注意：我还没有把反馈部分放进去，bu

这是Javascript代码：

```
//setup client case questions
    $('.clientCase input').click(function(){
        var multipleChoiceElement$ = $(this).closest('.clientCase');

        if(this.value!=="2"){ //If a button that isn't the referral is clicked
            multipleChoiceElement$.find('.feedback').show();
            multipleChoiceElement$.find('input').prop('disabled',true);
        }

        if(this.value == "1"){ //the correct answer
            multipleChoiceElement$.find('.answeredCorrectly').show();
        }
        else if(this.value=="2"){//value of 2 means its the referral
            multipleChoiceElement$.find('#clientCaseIS').show();
        }
        else{//the incorrect answer
            multipleChoiceElement$.find('.answeredIncorrectly').show();
        }       
}); 
```

以下是该部分的相关 HTML 代码：

```
 <!-- Start of multiple choice question -->
       <div class="clientCase">
         <ul class="outline">
         <div id="clientCasePIL"><strong>PIL: Primary Inspection Line</strong>
           <div class="fancyBox">
            <li><strong>1\. Admission</strong></li>
            <ul style="list-style-type:none">
             <li><div class="answerOption"><label for="question1A">Verbal</label></div>
              <div class="inputAndIdContainer"><input type="radio" name="question1" value="0" id="question1A"> A.</div></li>
             <li><div class="answerOption">
               <label for="question1B">Stamp</label></div>
              <div class="inputAndIdContainer"><input type="radio" name="question1" value="1" id="question1B"> B.</div></li>
              <li><div class="answerOption">
                <label for="question1C">Document</label></div>
              <div class="inputAndIdContainer"><input type="radio" name="question1" value="0" id="question1C"> C.</div></li><p/>
             <li><div class="answerOption">
               <label for="PILRefusal"><strong>Refusal</strong></label></div>
              <div class="inputAndIdContainer"><input type="radio" name="question1" value="0" id="PILRefusal"> 2.</div></li>
              <li><div class="answerOption">
                <label for="ISReferral"><strong>Referral</strong></label></div>
              <div class="inputAndIdContainer"><input type="radio" name="question1" value="2" id"ISReferral"> 3.</div></li></ul>
             </div>
            </div>

        <div id="clientCaseIS"><strong>Immigration Secondary</strong>
            <div class="fancyBox">
            <li><strong>1\. Admission</strong></li>
            <ul style="list-style-type:none">
             <li><div class="answerOption"><label for="question1D">Verbal</label></div>
              <div class="inputAndIdContainer"><input type="radio" name="question1" value="0" id="question1D"> A.</div></li>
             <li><div class="answerOption">
               <label for="question1E">Stamp</label></div>
              <div class="inputAndIdContainer"><input type="radio" name="question1" value="0" id="question1E">
              B.</div></li>
              <li><div class="answerOption">
                <label for="question1F">Document</label></div>
              <div class="inputAndIdContainer"><input type="radio" name="question1" value="0" id="question1F">
              C.</div></li><p/>
              <li><div class="answerOption">
               <label for="ISRefusal"><strong>Refusal</strong></label></div>
              <div class="inputAndIdContainer"><input type="radio" name="question1" value="0" id="ISRefusal"> 2.</div></li></ul>
            </div>
          </div>
        </ul>

        <div class="feedback">
               <div class="answeredCorrectly">Correct</div>
               <div class="answeredIncorrectly">Incorrect</div>
                  <div class="answer">
                  <strong>Answer:</strong> The feedback goes here
          </div>
       </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:04:22.137

您可能希望将函数包装在 a`$(document).ready();`中，以便单击处理程序附加到 DOM 中的元素：

```
$(document).ready(function() {

    $('.clientCase input').click(function(){
        // etc..
    });    

}); 
```

否则，只要您有正确的初始样式，一切似乎都按预期工作。

*   [**演示**](http://jsfiddle.net/paislee/ZxkQW/)

# asp.net - 可重复使用的性能监视器模板

> ID：10726142
> 
> 赞同：1
> 
> 时间：2012-05-23T18:55:35.003
> 
> 标签：asp.net, performance, monitoring

我在服务器 2008 R2 下有一个性能监视器模板，用于监视保存为 XML 文件的 IIS 服务器。我有几个其他服务器，我想使用相同的模板。我该如何加载这些设置？最后，我正在尝试使用基本的 ASP.net 计数器获得基线。收集这些信息的最佳时间是多长，我在想一个月？任何想法或最佳实践将不胜感激。

# php - 页面返回时标签错误刷新

> ID：10726143
> 
> 赞同：0
> 
> 时间：2012-05-23T18:55:48.507
> 
> 标签：php, css, tabs, return

我将要讨论的两个页面是[VelocityMicro.com/Cruz.php](http://www.velocitymicro.com/cruz.php)和[VelocityMicro.com/PC.php](http://www.velocitymicro.com/pc.php)（我在 Firefox 中查看它们）

我的问题是，在 Cruz.php 上，当您单击后面的一个选项卡（例如“R100 系列”）时，单击一个附件（比如说“8GB SD 卡”）——该页面将链接到我想要的位置它也是……当您点击返回按钮时，它会将您带回到最后打开的“R100 系列”选项卡。没关系。它应该是这样的。

但是，在 PC.php 上，它将带​​您回到第一个选项卡“游戏”，而不是您上次查看的选项卡。我需要它返回上次查看的标签；与 Cruz.php 的方式相同。因此，假设您继续使用 PC.php，选择“服务器”选项卡。选择服务器。它链接到服务器页面。但是您想点击“返回”按钮并让“服务器”选项卡仍然处于活动状态......

有没有人知道为什么 PC.php 会有不同的行为？

它们引用相同的 js 文件，它们的 css 样式文件可能不同，但实际上是相同的（复制和粘贴匹配，除了不同的 div 高度、选项卡数、其他表面高度/宽度的东西）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:29:09.970

在每个页面上创建您自己的“返回”按钮，将用户导航回最后一个活动选项卡。这可能是您最好的选择，因为它可以让您完全控制其在所有浏览器中实现的功能和一致性。

# scope - 一系列函数的 CoffeeScript 范围问题

> ID：10726144
> 
> 赞同：1
> 
> 时间：2012-05-23T18:55:49.457
> 
> 标签：scope, coffeescript

CoffeeScript 新手在这里。我对已推送到数组然后在类的成员函数中执行的函数的范围有一个奇怪的问题。基本上，似乎`this`没有正确设置。

```
class TestClass
    constructor: ->
        @functions = [] # my array of functions
        @member = "hello there! come find me!"
    update: =>
        func() for func in @functions

testClass = new TestClass
testClass.functions.push( -> 
    str = "could i find @member? " + @member? + "; this's keys: " + Object.keys(this)
    console.log(str)
)
testClass.update() 
```

结果？奇怪的是，它是：

```
could i find @member? false; this's keys: 
top,location,window,external,chrome,v8Locale,document,$,jQuery,CoffeeScript 
```

似乎调用函数的上下文是错误的。我认为通过将瘦箭头函数推到我的数组上，当调用该函数时，它将采用调用它的上下文 ( `update`，在哪里`this`)`testClass`如果我这样做，一切都会正常工作：

```
 update: =>
        func.call(this) for func in @functions 
```

但这似乎不是很符合 CoffeeScript 的习惯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:59:55.780

通过使用细箭头创建函数，您正在创建一个匿名函数，`this`该函数将绑定到`window`对象而不是调用它的上下文。 `this`除非两个函数碰巧绑定到同一个上下文，否则不会在函数调用中保持它的值。

我可以想出几种方法来解决这个问题，虽然它们都不是特别难看，但也没有一个特别优雅。

首先，您提出的解决方案是在更新函数中绑定函数。第二个类似，但将绑定移动到其他地方：

```
class TestClass
    ...
    addFunc: (func) ->
        @functions.push( => func.call( @ ) )

testClass.addFunc( -> ... ) 
```

第三种选择是使用类似[underscore.js](http://underscorejs.org/#bind)中的 bind 函数的东西在它被创建时将函数绑定到 TestClass。尽管这可能最终会比其他两个选项更混乱。

# objective-c - 当用户在iphone的pickerview中选择行时如何在uibutton中显示数据

> ID：10726147
> 
> 赞同：0
> 
> 时间：2012-05-23T18:56:00.670
> 
> 标签：objective-c, ios, cocoa-touch

我是 iphone 新手，我对选择器视图有一点疑问，即当我在选择器视图中选择一行时，我采用选择器视图并在其中存储一些数据，该行中的文本应该显示在我放置的 uibutton 中，但问题是文本中的前三个字母只显示。我不知道为什么这是我写的下面的代码

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{
    if([pickerView isEqual:selectBookPickerView]){
    NSString *booksTitle = [[NSString alloc] initWithFormat:@"%@",[booksArray objectAtIndex:row]];
    selectBook.titleLabel.text = booksTitle; 
    }
    else
    {
    NSString *chapterTitle = [[NSString alloc] initWithFormat:@"%@",[chaptersArray objectAtIndex:row]];
        startChapter.titleLabel.text = chapterTitle; 

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T22:42:54.190

简单的解决方案是将此代码放在 if 语句之后：

```
[selectBook sizeToFit] 
```

这将自动将按钮调整为文本的大小。

# php - 另... 500 内部服务器 PHP

> ID：10726151
> 
> 赞同：0
> 
> 时间：2012-05-23T18:56:18.803
> 
> 标签：php, sql

在 SO 中阅读了几乎所有的错误 500 内部问题，但仍然无法弄清楚我的应用程序是什么。

这是我收到的错误消息..

```
Server error
The website encountered an error while retrieving http://www.pixeltouch.no/book/register.php. It may be down for maintenance or configured incorrectly.
Here are some suggestions:
Reload this webpage later.
HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request. 
```

我已经查看了一段时间的代码，但仍然找不到问题。

这里有运气吗？

这是我的 login.php

```
 <?php 
 include('/core/inc/init.inc.php');

$errors = array();

if (isset($_POST['username'], $_POST['password'])){
    if(empty($_POST['username'])){
        $errors[] = 'The username cannot be empty.';    
    }
        if(empty($_POST['password'])){
        $errors[] = 'The password cannot be empty.';
    }
//Log in
    if (valid_credentials($_POST['username'], $_POST['password']) == false ){
        $errors[] = 'Username / Password incorrect.';
    }
        if (empty($errors)){
            $_SESSION['username'] = htmlentities($_POST['username']);
            $_SESSION['uid'] = fetch_user_id($_SESSION['username']);

            header("Location: profile.php?uid=" . $_SESSION['uid']);
                die();
                echo $_SESSION['uid'];
        }
}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
<title>Pixeltouch</title> 

<link rel="stylesheet" type="text/css" href="ext/style.css" />

</head> 
<body> 
<div id="page-wrap"> 
<div id="main-content"> 
<br/>
<?php include_once('template/head.inc.php');
?>
<div id="menu"> 

<?php include_once('template/nav.inc.php');
?> 

</div> 
<!-- SKRIVBOX-->

<div>
<?php 
if(empty($errors) == false){
?>
<ul>

<?php

foreach ($errors as $error) {
    echo "<li>$error</li>";
}

?>
</ul>

<?php

}else{
echo 'Need an account ? <a href="register.php">Register here</a>'; 
}

?>

</div>
<br/>
<form method="post" action="" >
<p>
<label for="username">Username:</label>
<input type="text" name="username" id="username" value="<?php if (isset($_POST['username'])) echo  htmlentities($_POST['username']); ?>" />
</p>
<p>
<label for="password">Password: </label>
<input type="password" name="password"  id="password" />
</p>
<p>
<input type="submit" value="Login" />
</p>

</form>

<!-- SKRIVBOX END-->
</div> 

<?php include_once('template/foot.inc.php');
?>
</div>
</body>
</html> 
```

还有我的 Init.inc.php 文件

```
 <?php
 session_start();

 mysql_connect("SERVER", "USERNAME", "PASSW") or die(mysql_error()) ; 
 mysql_select_db("pixeltouch2") or die(mysql_error()) ;

 $path = dirname(__FILE__);
 include("{$path}/user.inc.php");

 ?>

                                    <!--Registration/Login (START)-->
 <?php 

 $exceptions = array('register', 'login', 'user_list', 'profile', 'edit_profile');

 $page = substr(end(explode('/', $_SERVER['SCRIPT_NAME'])), 0, -4);

 if(in_array($page, $exceptions) == false){
    if (isset($_SESSION['username']) == false){
    header('Location: login.php');
    die();
    }
  }
 ?>

                                    <!--Registration/Login (END)--> 

                                        <!--User Profile (START)-->
 <?php
 $_SESSION['uid'] = 1;

 ?>

                                        <!--User Profile (END)--> 
```

我从 webb 托管商那里得到了错误日志，上面写着

> [2012 年 5 月 24 日星期四 11:31:24] [错误] 警告：include(/core/inc/init.inc.php) [function.include]：无法打开流：/home/3 中没有这样的文件或目录/p/pixeltouch/www/book/login.php 在第 2 行，引用：[http](http://www.pixeltouch.no/book/login.php) : //www.pixeltouch.no/book/login.php [2012 年 5 月 24 日星期四 11:31:24] [错误] PHP 警告： include() [function.include]：无法在 /home 中打开 '/core/inc/init.inc.php' 以包含 (include_path='.:/usr/local/php5.2-suphp/lib/php') /3/p/pixeltouch/www/book/login.php 在第 2 行，参考： [http](http://www.pixeltouch.no/book/login.php) : //www.pixeltouch.no/book/login.php [Thu May 24 11:31:24 2012] [错误] PHP致命错误：在第 22 行的 /home/3/p/pixeltouch/www/book/login.php 中调用未定义函数 valid_credentials()，引用者：[http ://www.pixeltouch.no/book/login.php](http://www.pixeltouch.no/book/login.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:02:03.020

我相信问题出在这里：

```
include('/core/inc/init.inc.php'); 
```

前导的“/”试图包含服务器根目录中的文件。尝试不使用 /。在这种情况下，路径应该相对于 register.php 所在的目录。

# javascript - 如何在 firebug 命令中选择一个 div id？

> ID：10726153
> 
> 赞同：2
> 
> 时间：2012-05-23T18:56:30.680
> 
> 标签：javascript, jquery, syntax, firebug

我有一个这样定义的html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
...
</head>    
<body>
<div id="nav">
    <a href="/">home</a> |
    {% if user.is_authenticated %}      
        <a href="/save/">submit</a> | <a href="/user/{{ user.username}}/"{{ user.username }}</a> | <a href="/logout/">logout</a>
    {% else %}
          <a href="/login">login</a> | <a href="/register/">register</a>    
    {% endif %}
</div>
</body>
</html> 
```

在 Firebug 控制台中，我键入以下内容来隐藏导航类：

```
$("#nav").hide() 
```

但是当我运行它时，我收到以下错误消息：

```
TypeError: $("#nav") is null

$("#nav").hide()     with(_...e() }; (line 2) 
```

nav 显然在那里，我什至可以在 Firebug 的 HTML 选项卡中看到它，我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T20:59:28.283

**你错过了 jQuery**

添加

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

`<head></head>`标签之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T21:05:42.313

看起来您还没有加载任何库，例如 jQuery，并且正在使用 Firefox 版本，`$`该版本被定义为`document.getElementById`

从 id中删除`#`，它应该按预期为您提供 DOM 节点。或者将库加载为 jQuery :)

# postgresql - Postgres - 使用递归 - 获取父名称列

> ID：10726159
> 
> 赞同：0
> 
> 时间：2012-05-23T18:56:44.097
> 
> 标签：postgresql, recursive-query, self-reference

我有一张桌子：

```
CREATE TABLE cell
(
  cellpk serial NOT NULL,
  cellname character varying NOT NULL,  
  parent integer NOT NULL,
  CONSTRAINT cellpk PRIMARY KEY (cellpk)
) 
```

```
单元格A --> 子单元格A1 --> 子子单元格A1
      |--> subcellA2 --> subsubcellA2   

```

我想在同一行中获取单元格及其父级的名称。

就像是-

```
亚细胞A1 - 细胞A
亚细胞A2 - 细胞A
subsubcellA1- subcellA1
subsubcellA2- subcellA2

```

我有一个查询，它给出了父 ID 而不是单元名称。我怎样才能得到父母的名字而不是身份证。

```
WITH RECURSIVE cell_child as
(
SELECT fp.* FROM cell as fp WHERE fp.parent = '111'
 UNION ALL
 SELECT f.*
   FROM
     cell as f
 JOIN cell_child as fc
 ON (f.parent = fc.cellpk)     
 )     
 select * from cell_child as cc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:02:21.787

尝试加入原始表：

```
WITH RECURSIVE cell_child AS (
  SELECT fp.* FROM cell as fp WHERE fp.parent = '111'
  UNION ALL
  SELECT f.* FROM cell AS f
    JOIN cell_child as fc ON f.parent = fc.cellpk
 )     
 SELECT cc.*, parent.cellname
   FROM cell_child AS cc
   LEFT JOIN cell AS parent ON parent.cellpk = cc.parent; 
```

# sql-server-2008 - Reporting Services 字符串连接问题

> ID：10726162
> 
> 赞同：6
> 
> 时间：2012-05-23T18:56:50.277
> 
> 标签：sql-server-2008, reporting-services

我正在尝试编写一个表达式来连接一个字符串，但是当我保存报告时收到一条错误消息。可能是什么问题呢？谢谢你的帮助。

```
=Fields!address.Value&","&Fields!city.Value&","&Fields!zipcode.Value&","&Fields!state.Value 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T20:00:40.917

.Value 必须与 & 用空格分开，否则将不起作用。

# html - 有什么区别 和 在 HTML 中？

> ID：10726164
> 
> 赞同：5
> 
> 时间：2012-05-23T18:56:55.397
> 
> 标签：html, tags, formatting

> **可能重复：**
> [在普通标签上使用 XHTML 右斜杠 (/)？](https://stackoverflow.com/questions/2373866/using-the-xhtml-closing-slash-on-normal-tags)
> [自闭标签在 HTML5 中有效吗？](https://stackoverflow.com/questions/3558119/are-self-closing-tags-valid-in-html5)

我正在审查很多 HTML 代码以及合成 HTML 的 JavaScript，我注意到如果标签内有一些没有内容的标签，那么有两种方法可以指定它。要么像这样：

```
<div id="container"></div> 
```

或像这样：

```
<div id="container" /> 
```

两者有什么区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T19:06:11.763

浏览器将无效标记标准化为有效形式：

`<div />`是技术上无效的标记 (HTML 5)，因为`div`它不是自闭合标记。

浏览器会将其规范化为`<div>`.

请注意，这与**XML**处理自闭合标记与闭合标记的方式不同。

自闭合标签没有子标签，也没有内部文本的值（null）：

```
<foo /> 
```

封闭标签没有子标签，也没有内部文本（空字符串）：

```
<foo></foo> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T19:02:15.483

`<div id="container"/>`是编写不包含内容的标签的正确 XHTML 方式。通常这些是`<img/>`、`<br/>`等。 `<div>`旨在在其中包含内容，这样说`<div id="container"/>`虽然可以接受，但似乎可读性较差。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-23T19:00:26.230

第一个示例是严格的 HTML，而第二个示例是严格的 xHTML。

在 HTML5 之前，当您必须指定使用的是 HTML 还是 xHTML 时，使用错误的语法会导致验证错误，有时还会出现渲染问题。使用 HTML5 doctype 会有所不同。

其次，第二个示例是自闭合标签之一，在本例中为空`div`，但 xHTML 规范中的许多标签都支持该标签，包括`img`、`link`、`meta`以及其他任何可能为空的标签。

# android - 片段选项卡和不同的布局

> ID：10726169
> 
> 赞同：2
> 
> 时间：2012-05-23T18:57:18.943
> 
> 标签：android, fragment, screen-orientation

所以现在android中标签的标准似乎是在FragmentActivity中使用一个tabhost，然后将每个标签作为Fragment。我在这里遇到的问题是，似乎具有相同 FragmentActivity（平板电脑或横向模式）的侧面片段或让一个 Fragment 使用第二个 Fragment 启动另一个 FragmentActivity（如果它是小型设备或旋转）的整个系统不会工作，因为您不能为每个选项卡设置 FragmentActivity。那么我如何实现在标签上放置片段的主要优势点呢？

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T19:25:19.043

是的，您可以为每个选项卡设置 fragmentActivity。

这是 PagerAdapter 的示例：

```
public class ExamplePagerAdapter extends FragmentPagerAdapter {

    public ExamplePagerAdapter(FragmentManager fm) {
        super(fm);
        // TODO Auto-generated constructor stub
    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public Fragment getItem(int position) {
        Fragment f = null;
        switch(position){
        case 0:
        {
        f = new ArrayListFragment();
        // set arguments here, if required
        Bundle args = new Bundle();
        f.setArguments(args);
        break;
        }
        case 1:
        {
            f = new PrincipalFragment();
            // set arguments here, if required
            Bundle args = new Bundle();
            f.setArguments(args);
            break;
        }
        case 2:
        {   
            f = new ViewFragment();
            // set arguments here, if required
            Bundle args = new Bundle();
            f.setArguments(args);
            break;
        }   
        default:
          throw new IllegalArgumentException("not this many fragments: " + position);
        }

        return f;

} 
```

}

您可以使用它来调用每个片段的每个活动。

```
public class PrincipalFragment extends Fragment {

    private int mNum;
    private EditText et;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mNum = getArguments() != null ? getArguments().getInt("num") : 1;
    }

    /**
     * The Fragment's UI is just a simple text view showing its
     * instance number.
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.scrollview, container, false);

        ImageView i = (ImageView)v.findViewById(R.id.imageView1);
          ImageView i2 = (ImageView)v.findViewById(R.id.imageView2);

          ImageView i4 = (ImageView)v.findViewById(R.id.imageView4);
          ImageView i5 = (ImageView)v.findViewById(R.id.imageView5);

          ImageDownloader.Mode mode = ImageDownloader.Mode.CORRECT;
          ImageDownloader imageDownloader = new ImageDownloader();
          imageDownloader.download(URLnames.URLS[1], i);
          imageDownloader.download(URLnames.URLS[2], i2);
          imageDownloader.download(URLnames.URLS[3], i4);
          imageDownloader.download(URLnames.URLS[4], i5);

        return v; 
```

和上面的例子一样，我称之为布局滚动视图，所以当你要创建 scrollview.xml 时，你需要指定细节。

新建 > android xml 文件 > 选择布局类型 > 下一步 > 选择特定配置（您可以按密度、方向等使用...）> 完成。

现在 eclipse 将为每个特定配置创建一个不同的文件夹，并在您运行不同的屏幕尺寸或 sdkversion 时自行管理它。

阅读[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)了解更多信息。

不知道如何正确实现 tabscroll？访问这个答案：[Actionbarsherlock + 选项卡 + 多片段？](https://stackoverflow.com/questions/10082163/actionbarsherlock-tabs-multi-fragments)

在片段活动中，您可以创建一个案例来选择屏幕方向或将其放在 AndroidManifest.xml 中。

# c# - Lucene Hightlighter 有时会莫名其妙地返回空白片段

> ID：10726171
> 
> 赞同：6
> 
> 时间：2012-05-23T18:57:38.697
> 
> 标签：c#, lucene.net

在过去的几天里，我一直在研究一个 Lucene 文档搜索程序，到目前为止，一切都进展顺利。我正在尝试使用`Lucene.Net.Highlight.Highlighter`该类来显示我的搜索结果的相关片段，但它不能始终如一地工作。**大多数**情况下，调用`Highlighter.GetBestFragments()`完全符合我的预期（显示带有给定查询字符串的相关文本片段），但有时它只返回一个空字符串。

我已经三次检查了我的输入，我可以验证我正在使用的查询字符串是否存在于输入文本中，但是荧光笔有时只是任意返回一个空字符串。问题是可重现的；使用相同查询时，返回空白片段的文档将继续返回空白片段，而具有合法片段的文档继续具有合法片段。

但是，问题不是特定于文档的。一些查询为文档返回有效片段，而其他查询为同一文档返回空字符串。该问题似乎也与我的分析仪无关；无论我使用 a`StandardAnalyzer`还是`SnowballAnalyzer`.

经过数小时的探索，我无法在失败的查询/文档中找到任何模式与那些有效的模式。**请记住，这发生在使用完全相同的查询**从 Lucene 索引中专门拉回的文档上。这意味着`Searcher`能够在目标文档中找到相关的查询字符串，但`Highlighter`不是。

这是Lucene中的错误吗？如果是这样，我该如何解决它？

我的代码：

```
private static SimpleHTMLFormatter _formatter = new SimpleHTMLFormatter("<b>", "</b>");
private static SimpleFragmenter _fragmenter = new SimpleFragmenter(50);
...
{
    using (var searcher = new IndexSearcher(analyzerInfo.Directory, false))
    {
        QueryParser parser = new QueryParser(Lucene.Net.Util.Version.LUCENE_29, "Text", analyzerInfo.Analyzer);
        parser.SetMultiTermRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY_REWRITE);

        //build query
        BooleanQuery booleanQuery = new BooleanQuery();
        booleanQuery.Add(new TermQuery(new Term("PageNum", "0")), BooleanClause.Occur.MUST);
        booleanQuery.Add(parser.Parse(searchQuery), BooleanClause.Occur.MUST);
        Query query = booleanQuery.Rewrite(searcher.GetIndexReader());

        //get results from query
        ScoreDoc[] hits = searcher.Search(query, 50).ScoreDocs;
        List<DVDoc> results = hits.Select(hit => MapLuceneDocumentToData(searcher.Doc(hit.Doc))).ToList();

        //add relevant fragments to search results (shows WHY a certain result was chosen)
        QueryScorer scorer = new QueryScorer(query);
        Highlighter highlighter = new Highlighter(_formatter, scorer);
        highlighter.SetTextFragmenter(_fragmenter);
        foreach (DVDoc result in results)
        {
            TokenStream stream = analyzerInfo.Analyzer.TokenStream("Text", new StringReader(result.Text));
            result.RelevantFragments = highlighter.GetBestFragments(stream, result.Text, 3, "...");
        }

        //clean up
        analyzerInfo.Analyzer.Close();
        searcher.Close();

        return results;
    }
} 
```

（注意：`DVDoc`本质上只是一个结构，它存储有关找到的文档的信息。该方法`MapLuceneDocumentToData`将 Lucene`Document`转换为我的自定义`DVDoc`类，那里没有魔法。）

由于每个人都喜欢示例输入和输出：

*   [GetBestFragments 工作示例](http://pastebin.com/EauefAak)
*   [GetBestFragments 不工作的示例](http://pastebin.com/1dTtSB6b)

我正在使用 Lucene.NET 版本 2.9.4g。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T13:35:31.917

默认情况下，荧光笔只会处理文档的前 51200 个字符。

要增加此限制，请设置该`MaxDocCharsToAnalyze`属性。

[http://lucene.apache.org/core/old_versioned_docs/versions/2_9_2/api/contrib-highlighter/org/apache/lucene/search/highlight/Highlighter.html#setMaxDocCharsToAnalyze(int)](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_2/api/contrib-highlighter/org/apache/lucene/search/highlight/Highlighter.html#setMaxDocCharsToAnalyze(int))

# java - 检查文件是否已被复制

> ID：10726175
> 
> 赞同：0
> 
> 时间：2012-05-23T18:58:00.207
> 
> 标签：java, file-io, io, file-handling

我正在编写一个小程序来复制文件。程序检查要复制的文件是否已经复制到目标位置。

为了验证是否存在相同的文件，我比较了以下两件事：

1.  文件的大小（源文件和目标文件）。
2.  上次修改的时间戳。

但是，我在 Java 中执行此操作时遇到以下问题：

1.  当使用 Java IO（输入/输出流）复制文件时，File.length 不会返回相同的数字（相差 1）。
2.  使用 Java IO 复制文件时，复制文件的最后修改时间戳是当前日期/时间，而不是原始日期/时间。

请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:04:40.117

1.  如果大小不同，则代码中存在错误。我可以假设您正在处理文本文件并且没有正确处理换行符。如果要*复制*文件，则应使用字节。显然这只是假设：您还没有发布任何代码。
2.  这是对的。新文件只是原始文件的副本。它的最后修改日期是*该*文件最后一次修改的日期，即您完成编写它的日期。改变是使用 `File.setLastModifed()`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T19:04:14.550

通常你会计算原始文件的 MD5 和并将其与目标文件的 MD5 和进行比较，如果它们相等，那么你很高兴。

其他简单的技术是复制文件并在复制时附加一个后缀，在复制它的过程完成后，删除文件名上的后缀，这样在这种情况下您只需检查文件是否存在。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T19:05:12.317

您还需要复制属性，我知道 Files 类有一个复制属性选项：[http ://docs.oracle.com/javase/tutorial/essential/io/copy.html](http://docs.oracle.com/javase/tutorial/essential/io/copy.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T19:05:35.033

要将一个文件复制到另一个文件中，您可以使用任何类，但我不明白为什么 id 必须使用时间戳来检查文件是否已被复制。

您可以检查目标文件和源文件的内容，如果它们匹配，则复制文件，否则不复制文件

另一种方法是使用文件类的 lastModified 方法......第一个似乎是更好的选择

# wordpress - 对照 Wordpress DB 中所有用户的电话号码检查用户名

> ID：10726177
> 
> 赞同：0
> 
> 时间：2012-05-23T18:58:06.213
> 
> 标签：wordpress, metadata

`http://example.com/wp-signup.php`如何检查数据库中的用户名（用户在尝试注册时选择的）和所有用户的电话号码是否匹配？如果没有匹配，那么我们让他们使用该电话号码注册。如果有匹配项，那么我想显示具有电话号码的用户的用户名与用户尝试注册的用户名（格式为 18186665555）匹配，并要求他们使用该用户名登录，也许还包括一个“忘记密码”，以防用户忘记此帐户的密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:20:59.093

像这样的东西，你必须自己调整它：

```
<?php
$username = $_POST['username'];
$user_id = $wpdb->get_var( $wpdb->prepare( "SELECT ID FROM $wpdb->users where user_login = '$username';" ) );

// you can check if no rows were returned here, which means the username does not exist in database

$key = 'phone_number';
$single = true;
$user_phone = get_user_meta($user_id, $key, $single); // get his phone number assumed you are saving it during registration

?> 
```

# mongodb - 如何findAndModify嵌套数组中的值

> ID：10726178
> 
> 赞同：10
> 
> 时间：2012-05-23T18:58:08.447
> 
> 标签：mongodb

下面是一个示例文档。

```
 {
        "_id" : ...,
        "inprogress" : true,
        "name" : "Biz report",
 "inviteCode" : [
         {
                 "key" : "4fbd2b4b265a3",
                 "status" : "1"
         },
         {
                 "key" : "4fbd2b4b265b5",
                 "status" : "1"
         },
         {
                 "key" : "4fbd2b4b265b9",
                 "status" : "1"
         },
         {
                 "key" : "4fbd2b4b265bc",
                 "status" : "1"
         },
         {
                 "key" : "4fbd2b4b265c0",
                 "status" : "1"
         }
 ]
    } 
```

根据文档，我可以使用修饰符对象作为更新参数，但似乎更新参数不包括我想要更新的女巫字段的过滤器。我只能使用`$set:{name:"xxx"}`但我不能指定要在嵌套数组中更新哪个元素。如何设置密钥为“4fbd2b4b265a3”的邀请代码列的“状态”字段？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T19:14:59.550

您可以使用 $ 位置运算符：[http ://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)

在你的情况下：

```
db.collection.update( { inviteCode: { $elemMatch: { key: "4fbd2b4b265a3" } } },
    { $set: { 'inviteCode.$.status': '2' } } ) 
```

'$' 实际上是一个变量，其值设置为数组中第一个匹配项的索引。

# c# - 应用不活动后如何更新 MPNS 频道 URI

> ID：10726182
> 
> 赞同：5
> 
> 时间：2012-05-23T18:58:41.197
> 
> 标签：c#, windows-phone-7, push-notification, windows-phone-7.1, mpns

当我的应用程序处于非活动状态时，存储的通知通道 URI 可能会过时——即停止、墓碑化或休眠。在一段时间不活动后使用我的 Web 服务更新频道 URI 的最佳做法是什么？

Web 上的各种文章都提到“检索”URI 以便将其发送到 Web 服务。但据我所知，我的应用程序学习频道 URI 的唯一方法是通过`ChannelUriUpdated`on 事件`HttpNotificationChannel`，并且引发该事件不在我的控制之下。MPNS 可能在我的应用处于非活动状态时更改了 URI。如果应用程序无法响应`ChannelUriUpdated`，则 URI 在我的应用程序和我的 Web 服务中都会过时。

可能`HttpNotificationChannel.Find`保证返回的频道始终具有最新的频道 URI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T11:54:44.320

请[在此处](http://azure.microsoft.com/en-us/documentation/articles/mobile-services-windows-phone-get-started-push/)遵循此更新的文档。它的作用是，在插入通道 uri 时执行脚本，检查通道 URI 是否存在，如果存在则不插入记录，否则插入记录。因此，一旦设备的通道 uri 到期，在这种情况下，将向设备提供一个新的通道 uri，比较不匹配并插入新的通道 uri。通过这样做，设备总是会收到通知。

注意：- 要利用该功能，您必须在每次应用启动时发送插入。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:50:16.097

一般的最佳实践是在应用启动时请求当前频道 Uri。在应用程序中，您应该跟踪返回的最后一个值（跨应用程序调用）以及它是否已更改为上传到您的 Web 服务。

# jira - 是否对开发人员在 Jira 中的许多项目中所做的工作有一个全面的了解？

> ID：10726183
> 
> 赞同：0
> 
> 时间：2012-05-23T18:58:44.190
> 
> 标签：jira

Jira 目前有很多项目。一些开发人员可能在这些项目中有任务或问题。是否有使用 Jira 或 Grasshopper 的大图来显示所有开发人员以及他们正在做什么？

或者，有没有办法查看所有项目以及每个项目正在处理的任务数量？我们目前正在使用 Jira 和 Grasshopper。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T03:44:56.343

有一个小工具-“[进行中的问题](http://confluence.atlassian.com/display/JIRA/Adding+the+In+Progress+Gadget)”，它显示了所有项目中所有“进行中”状态的问题。但它不会按开发人员对数据进行排序。

[您可能会在“二维过滤器统计](http://confluence.atlassian.com/display/JIRA/Adding+the+Two-Dimensional+Filter+Statistics+Gadget)”小工具中找到更好的使用方式，该小工具带有“正在进行的所有问题”过滤器（如果您还没有，则需要创建它）并将受让人/项目用作轴数据。

您还可以对所有项目使用“[活动流](http://confluence.atlassian.com/display/JIRA/Adding+the+Activity+Stream+Gadget)”来查看最新活动。

# php - PHPUnit 致命错误和 include_path

> ID：10726186
> 
> 赞同：0
> 
> 时间：2012-05-23T18:58:50.957
> 
> 标签：php, phpunit

我刚刚使用 MacPorts 在我的 Mac OSX 上安装了 PHP 和 PEAR，然后使用 PEAR 安装了 PHPUnit。当我尝试运行 PHPUnit 时，我收到以下错误消息：

```
$ phpunit StackTest.php
PHP Warning:  require_once(File/Iterator/Autoload.php): failed to open stream: No such file or directory in /opt/local/lib/php/PHPUnit/Autoload.php on line 45

Warning: require_once(File/Iterator/Autoload.php): failed to open stream: No such file or directory in /opt/local/lib/php/PHPUnit/Autoload.php on line 45
PHP Fatal error:  require_once(): Failed opening required 'File/Iterator/Autoload.php' (include_path='.:/php/includes:/usr/local/php5/lib/php:/opt/local/lib/php/pear') in /opt/local/lib/php/PHPUnit/Autoload.php on line 45

Fatal error: require_once(): Failed opening required 'File/Iterator/Autoload.php' (include_path='.:/php/includes:/usr/local/php5/lib/php:/opt/local/lib/php/pear') in /opt/local/lib/php/PHPUnit/Autoload.php on line 45 
```

好的，所以文件`File/Iterator/Autoload.php`不在 my 中`include_path`，所以我尝试了

```
$ ls -l /opt/local/lib/php/File/Iterator/Autoload.php
-rw-r--r--  1 root  admin  2682 May 23 14:38 /opt/local/lib/php/File/Iterator/Autoload.php

$ phpunit --include-path /opt/local/lib/php StackTest.php
PHP Warning:  require_once(File/Iterator/Autoload.php): failed to open stream: No such file or directory in /opt/local/lib/php/PHPUnit/Autoload.php on line 45

Warning: require_once(File/Iterator/Autoload.php): failed to open stream: No such file or directory in /opt/local/lib/php/PHPUnit/Autoload.php on line 45
PHP Fatal error:  require_once(): Failed opening required 'File/Iterator/Autoload.php' (include_path='.:/php/includes:/usr/local/php5/lib/php:/opt/local/lib/php/pear') in /opt/local/lib/php/PHPUnit/Autoload.php on line 45

Fatal error: require_once(): Failed opening required 'File/Iterator/Autoload.php' (include_path='.:/php/includes:/usr/local/php5/lib/php:/opt/local/lib/php/pear') in /opt/local/lib/php/PHPUnit/Autoload.php on line 45 
```

它仍然无法正常工作，并且它不包括它应该是的新路径。有人知道我能做些什么吗？（如果我能提供帮助，我宁愿不修改我的`php.ini`文件，因为它是只读的，而且我对 PHP 还很陌生，不想以我不理解的方式破坏它。）谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:12:40.113

仍然没有答案为什么`--include-path`命令行不起作用，所以这就是我所做的：

```
$ which phpunit
/opt/local/bin/phpunit

$ sudo emacs /opt/local/bin/phpunit 
```

计划是修改`php.ini`文件，所以首先我必须弄清楚哪个`php.ini`是正在初始化`phpunit`的 . 如果有人有更好的方法来做到这一点，我很高兴听到。`phpunit`我在开始标记之后添加了以下行到代码中`<?php`：

```
echo php_ini_loaded_file(); 
```

现在，当我运行时`phpunit`，我得到以下（此处截断）输出：

```
/opt/local/etc/php5/php.iniPHP Warning:  require_once(File/Iterator/Autoload.php): failed to open stream: No such file or directory in /opt/local/lib/php/PHPUnit/Autoload.php on line 45... 
```

然后：

```
$ sudo emacs /opt/local/etc/php5/php.ini 
```

我搜索了`include_path`指令并附`:/opt/local/lib/php`加到末尾。所以现在，`phpunit`工作，虽然我不知道我是否在我的设置方面破坏了其他任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T19:11:25.830

一种侵入性较小的方法（不永久更改 php.ini）是在失败的脚本中包含以下行：`set_include_path("/opt/local/lib/php/");` 您包含的位置可能略有不同。如果这不起作用，请在如下文件夹结构中搜索名为 Autoload.php 的文件：File/Iterator/Autoload.php 并使用 File 的路径作为`set_include_path()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T20:06:17.383

我在安装 Windows 时遇到了类似的问题，但我不确定在 OSX 上是否存在同样的问题。我发现 PEAR 安装在用于启动程序的批处理文件中创建了错误的路径。

标准安装会导致安装的批处理文件出现错误。pear.bat 批处理文件的最后一个脚本行需要将 include_path 括在单引号中 ("include_path='%VARIABLE%'")。

我所做的更改是：

```
"%PHP_PEAR_PHP_BIN%" -C -d memory_limit="-1" -d safe_mode=0 -d register_argc_argv="On" -d auto_prepend_file="" -d auto_append_file="" -d variables_order=EGPCS -d open_basedir="" -d output_buffering=1 -d "include_path='%PHP_PEAR_INSTALL_DIR%'" -f "%PHP_PEAR_INSTALL_DIR%\pearcmd.php" -- %1 %2 %3 %4 %5 %6 %7 %8 %9 
```

我不确定您在安装时是否遇到与上述问题类似的问题。

如果做不到这一点，我在 Windows 7 上的 PHPUnit 批处理文件是

```
if "%PHPBIN%" == "" set PHPBIN=C:\Program Files (x86)\PHP\php.exe
if not exist "%PHPBIN%" if "%PHP_PEAR_PHP_BIN%" neq "" goto USE_PEAR_PATH
GOTO RUN
:USE_PEAR_PATH
set PHPBIN=%PHP_PEAR_PHP_BIN%
:RUN
"%PHPBIN%" "C:\Program Files (x86)\PHP\phpunit" %* 
```

# actionscript-3 - FLEX：HTMLText 段落标签添加额外的换行符

> ID：10726188
> 
> 赞同：1
> 
> 时间：2012-05-23T18:58:54.327
> 
> 标签：actionscript-3, apache-flex, adobe

好吧，所以我有一个有点奇怪的问题。我正在使用 RichTextEditor 并允许用户重新调整它的大小。所有控件都被剥离到一个主工具栏上，这样 RichTextEditor 看起来就像一个带有文本的框。我有一个问题，当我保存编辑器生成的 htmltext 然后稍后重新渲染它时，它总是在文本末尾添加一个额外的换行符。我发现这是由于段落标签造成的，因为我希望用户能够对齐文本，所以我必须保留它。有谁知道如何在不去除所有格式的情况下去除最后一个换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:15:21.960

我对此进行了修复，基本上涉及剥离最后一个结束段落标签`</P>`。RichTextEditor 很丑:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T18:54:18.113

这绝对是一个错误，它是通过设置“htmlText”属性而不是“text”属性来触发的。无论您是在代码中分配它，还是让设计人员通过检查文本字段属性中的“呈现为 html”按钮来设置“htmlText”而不是“文本”，都会发生这种情况。另外值得注意的是，这只发生在“输入”类型的文本字段上。如果您从“动态”类型的文本字段开始，然后将“类型”设置为“输入”（还必须将“可选择”设置为 true，否则光标将不可见（另一个错误）），您将看到额外的行出现在右侧在你的眼前。同样，这不会影响动态文本字段，只会影响那些处于输入模式的字段。

尽管 htmlText 属性在这两种情况下都是相同的，无论您将“Hello”之类的字符串分配给 text 还是 htmlText（生成的 htmlText 值都相同），但仅在设置 htmlText 属性时才会出现额外的行。

具体来说，当您将 htmlText 设置为实际包含 html 段落标签的字符串时，就会发生这种情况。如果只是给 htmlText 分配一些文本，比如“Hello”，就不会出现问题。另一方面，如果您分配了 htmlText`<p>Hello</p>`或将 htmlText 分配给了自身（您需要这样做以保留 html 并强制内部指标立即更新），那么就会出现问题。有人提到，如果你省略了结束`</p>`标签，就不会出现问题，这是真的。`<a>Hello</a>`分配类似的东西也不会触发问题，这也是事实。

**所以总而言之，这个问题只有在将*自动调整大小*、*多行*、*输入类型文本字段的**htmlText*属性设置为包含标签的值时才会出现。***`<p></p>`***** ***它不会发生在动态文本字段中，也不会发生在未自动调整大小的输入文本字段上，也不会发生在那些自动调整大小但未`<p>`为 htmlText 分配标签的文本字段中。***

 ***要重现此问题，请在设计器中设置一个文本字段并确保打开背景和轮廓以便您可以看到字段的大小，然后它将是单行高（多行文本字段），如预期（假设它足够宽）。如果您然后转到代码并设置`txtfld.htmlText = txtfld.htmlText`（将其设置为自身），则仅将 htmlText 属性分配（为其自己的相同值）会导致添加额外的行。并且 htmlText 的值实际上是相同的，它实际上并没有隐藏额外的`<p>`标签或任何东西......它只是显示了这个不应该存在的尾随返回。正如预期的那样，当您在文本字段的 Flash 属性中选中“呈现为 html”时，也会发生同样的事情，这似乎导致它设置了 htmlText 而不是文本，并导致问题出现。

实际上不可能有两种渲染模式，因为它在技术上总是渲染 htmlText（即 htmlText 总是有一个值，并且您总是可以使用 setTextFormat 设置文本的某些段的文本格式，该格式最初是用“文本”分配的，这不会触发某种切换到“html呈现模式”或类似的东西。

这种行为似乎严格来说是分配 htmlText 属性的结果。

避免它的唯一方法（除了设置 htmlText、读回值、剥离最后一个`</p>`标签并重新分配它）是将所有文本字段初始化为纯“文本”，然后通过调用手动应用格式设置文本格式（文本格式，开始索引，结束索引）。

如原始问题帖子中所述，此错误的真正灾难是您无法保存和恢复 TextField 的 htmlText 值，因为将 htmlText 设置为包含 html 的字符串（特别是 p 标签）会导致这一额外的行补充说，如果您特别希望文本字段的大小正确，您可能会打开自动调整大小，特别是当这个问题出现并确保大小不正确时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:44:58.967

我对 flex html 文本组件也有类似的头痛。Flex 对许多 html 案例没有适当的支持。你会一直看到额外的`<p>`填充`<li>`。哎呀，甚至不支持`<ul>`标签。如果普通文本中有换行符，flex 会在标签末尾附加额外的填充，删除此换行符将删除额外的填充。

但是，您可能想使用这样的东西：[http ://code.google.com/p/flex-htmlfilter/](http://code.google.com/p/flex-htmlfilter/)***

# apache - mod_rewrite：使规则适用于子域和子文件夹

> ID：10726190
> 
> 赞同：0
> 
> 时间：2012-05-23T18:59:07.400
> 
> 标签：apache, subdomain, subdirectory, mod-rewrite

# 元数据

## 我的服务器设置

具有通配符子域和可选前缀 www 的共享主机。我不能接触 httpd.conf 并且有有限的 .htaccess 指令，尽管 RewriteRule 等适用。

我使用每个目录的 .htaccess 文件。

## 我的服务器布局

**大多数**子文件夹（阅读：一些用于 gfx 等）是独立的应用程序，f.ex：URL 缩短器，图像上传站点。

## 通常的 PHP 控制器设置

要操作应用程序，请使用 f.ex。查看已上传的特定文件，我阅读了该文件`$_SERVER['QUERY_STRING']`以便使用 URI，例如`http://s.domain.com/?image.jpg`从存储位置检索它。

*此设置可能因应用程序而异。*

# 问题

## 我有的

### 例子

**网址缩短器：**

`http://s.domain.com/?xy7r`OR`http://www.domain.com/s/?xy7r`从数据库中检索散列并重定向用户。

**图片上传器：**

`http://d.domain.com/?xy7r.png`或`http://www.domain.com/d/?xy7r.png`重定向到`http://d.domain.com/u/xy7r.png`

*（注意：www. 在所有情况下都是可选的）*

## 我想要的是

调整我现有的应用程序以使用 Apache 的 mod_rewrite。

### 例子

**网址缩短器：**

`http://s.domain.com/xy7r`或者`http://www.domain.com/s/xy7r`

**图片上传器：**

`http://d.domain.com/xy7r.png`或者`http://www.domain.com/d/xy7r.png`

## 我的方法

起初我像一个快乐的黑客一样添加 RewriteRules 并且一切正常，然后我注意到因为它们是为 URI 设计的，`http://sub.domain.com`所以它们不适用于`http://www.domain.com/sub`.

我决定尝试设置条件，以便规则适用于两种 URI 情况。所以我使用 Google-FUd 并阅读规范、文档和教程。我不完全理解这个指令，但我认为我在网上也没有找到任何合适的解决方案或类似的问题。

然后我放弃了，并认为我会将第二个 URI 语法 ( `http://www.domain.com/sub/`) 重定向到首选的 ( `http://sub.domain.com`) *(Also `http://www.sub.domain.com`)*，然后应用我现有`RewriteRule`的

## 到目前为止我的 .htaccess

*（仅适用于**URL Shortener**，因为在我开始工作之前我没有继续前进）*

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^s\.domain\.com$ [NC]  # Exclude correct URI
RewriteCond %{HTTP_HOST} !^$  # Exclude old HTTP requests
RewriteCond %{REQUEST_URI} ^/s($|/.*$)  # Rewrite bad URI
RewriteRule ^.* http://s.domain.com/$1 [R=permanent]  # Redirect to correct URI

RewriteCond %{REQUEST_URI} !^/fonts/  # Exclude system folder
RewriteCond %{REQUEST_URI} !^/index.php  # Exclude system file
RewriteCond %{REQUEST_URI} !^/style.css  # -||-
RewriteCond %{REQUEST_URI} !^/script.js  # -||-
RewriteCond %{REQUEST_URI} !^/short.php  # -||-
RewriteRule ^(.+)$ http://s.domain.com/?$1  # Rewrite to actual URI 
```

## 我得到了什么

URI 就像`http://s.domain.com/xy7r`工作一样，前面加 www. 也是如此，但是`http://www.domain.com/s/xy7r`URI 语法只是重定向到`http://s.domain.com`并忽略**xy7r**部分。

# 问题

我是在正确的轨道上还是有更好/更正确的方法来做到这一点？我一直在尝试理解该`RewriteBase`指令，但我根本不理解它，并尝试诸如`RewriteBase /s/`or`s`或`/s`不满足之类的值。

无论如何，我处于句号，我不知道如何进行。任何帮助表示赞赏！

谢谢！

`</WOT>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:31:48.713

对于第一组规则，替换

```
RewriteCond %{REQUEST_URI} ^/s($|/.*$)  # Rewrite bad URI
RewriteRule ^.* http://s.domain.com/$1 [R=permanent]  # Redirect to correct URI 
```

和

```
RewriteRule ^s/?(.*) http://s.domain.com/$1 [L,R=302] 
```

# ruby-on-rails - 批量分配 2 级深？

> ID：10726197
> 
> 赞同：2
> 
> 时间：2012-05-23T18:59:59.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的模型看起来像这样（对于这个问题，精简到最低限度）：

```
class Translation < ActiveRecord::Base
  has_many :array_resources
end
class ArrayResource < ActiveRecord::Base
  attr_accessible :array_items
  has_many :array_items
  accepts_nested_attributes_for :array_items
end 
```

现在，在我的`Translation`模型中，我有一个调用方法`array_resources.build(params)`，其中`params`是一个哈希数组，其中每个哈希还包含一个`:array_items`键，映射到另一个哈希数组。

不幸的是，我收到以下错误：

> ProjectsController#create 中的 ActiveRecord::AssociationTypeMismatch
> 
> ArrayItem(#69835262797660) 预期，得到 Hash(#18675480)

我读到的所有其他答案都谈到了使用`accepts_nested_attributes_for`，但我已经这样做了。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:33:06.570

您不应该`array_items`直接分配给嵌套属性，而是`array_items_attributes`.

您应该可以`:array_items_attributes`访问：

```
class ArrayResource < ActiveRecord::Base
  attr_accessible :array_items_attributes 
```

然后在您的参数哈希中使用 key`:array_items_attributes`而不是`:array_items`.

# c# - WinForm C# 以编程方式在 resx 中嵌入图像

> ID：10726200
> 
> 赞同：1
> 
> 时间：2012-05-23T19:00:08.073
> 
> 标签：c#, winforms, resx

我将 VS 2005 用于 Windows 应用程序。

过去在 UI 表单中添加了代码，使得表单不再在设计器中打开。

我现在必须在 System.Windows.Forms.ImageList 中添加一个图标。

现在它只是通过以下方式从 InitilizedComponent() 中的资源文件中添加图像，我相信这最初是由设计器生成的。

this.MyimageListToolbar.ImageStream = ((System.Windows.Forms.ImageListStreamer)(resources.GetObject("MyimageListToolbar.ImageStream")));

为了添加我的新图标，我可以简单地说

图标 myIcon = new Icon(@"mypath/myicon.ico"); this.imgLstToolbar.Images.Add(myIcon);

但问题是我必须在安装项目中包含这个 ico 文件，以便在安装这个软件时复制它。这是不可取的。安装应用程序时，不会复制添加到 imagelist 工具栏的所有其他图像。

有没有一种方法可以在不使用设计器的情况下以编程方式添加图标或添加图标，并且仍然将其包含在资源文件中，这样我就不必复制 ico 文件来运行 exe。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:09:48.980

您可以像这样将图标添加到“资源文件”中。

右键单击文件夹“资源”->“添加”->“现有项目...”

# php - 从 jQuery load() 结果中剥离 HTML

> ID：10726202
> 
> 赞同：1
> 
> 时间：2012-05-23T19:00:14.167
> 
> 标签：php, jquery, html

这是[该问题的解决方案的后续行动。](https://stackoverflow.com/questions/7072832/use-getelementbyid-on-non-current-html-document)

我正在使用 jQuery 的`load()`函数将 div 标记中的标题从我的站点中的一个页面拉到另一个页面。这非常有效。

问题是，`load()` *也*拉动了 div 标签本身，这是我不想要的，因为它会像源页面一样通过 CSS 进行格式化。

这是PHP：

```
function get_team_articles($team_id, $feat=0) {
    .
    .
    .
    while ($row = mysql_fetch_assoc($r)) {
        $page = explode('_', $row['page_id']);
        (is_numeric($page[1]))
            ? $pre = 'wk_'
            : $pre = '';
        $arr[] =    $page[0] . " | " . $pre . $page[1] . ": " . "
                    <a linked_div='news_header'
                    linked_path='../news/" . $page[0] . "/" . $pre . $page[1] . "/" . $page[1] . "_" . $page[2] . ".html'
                    href='index.php?view=news&yr=" . $page[0] . "&wk=" . $page[1] . "&pg=" . $page[2] . "'></a>";
    }

    $articles = implode('<br/>', $arr);
    return $articles;
} 
```

注意我的 jQuery 中使用的锚标记中的`linked_div`and属性：`linked_path`

```
function set_team_headlines(){
    $('#section-articles > a').each(function() {
        var a = $(this);
        a.load(a.attr('linked_path') + ' #' + a.attr('linked_div'));
    });
} 
```

显然，我不能在 PHP 中去除锚标记中的 HTML 标记，因为服务器在加载时没有锚标记中的文本；所以我假设我需要在`load()`调用后删除 jQuery 中的 HTML ......这就是我不知道该怎么做的事情。:)

我*想要*的结果是：

```
<a href="...">My headline</a> 
```

我*得到*的结果是：

```
<a href="..."><div id="news_header">My headline</div></a> 
```

希望这是有道理的。我想我提供了比我需要的更多的细节。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:02:59.050

`.load`在选择器中向下导航一层

```
a.load(a.attr('linked_path') + ' #news_header'); 
```

如果您的 news_header id 不是唯一的，则通过该 id 选择无效（ID 必须是唯一的！）

要解决该问题，请使用以下命令：

```
a.load(a.attr('linked_path') + ' #' + a.attr('linked_div') + ' div'); 
```

**编辑：**
`.load`实际上在附加 html 而不是附加目标元素的子元素时包含目标元素。我会转向使用`$.get()`.

```
$.get(a.attr('linked_path')).done(function(html) {
    a.text($(html).filter("#news_header").text());
}); 
```

# .htaccess - 匹配 htaccess 中的 URL

> ID：10726203
> 
> 赞同：0
> 
> 时间：2012-05-23T19:00:15.790
> 
> 标签：.htaccess

我有这个 htaccess 文件：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9]+:/.)$ result.php?u=$1
RewriteRule ^([a-zA-Z0-9]+:/.)/$ result.php?u=$1 
```

我想要做的是，将 http://example.com/http://google.com 重写[为](http://example.com/http://google.com)http://example.com/result.php?u=http://google.com[但](http://example.com/result.php?u=http://google.com)我只需获得“在此服务器上找不到请求的 URL”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:56:02.943

试试这个：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9:/\.]+)$ http://example.com/result.php?u=$1 
```

# c++ - 如何开始编写自己的 IP 类协议？

> ID：10726208
> 
> 赞同：8
> 
> 时间：2012-05-23T19:00:44.060
> 
> 标签：c++, c, networking, ip, protocols

所以我的问题是，是否有可能编写一个与 Internet 协议相同的协议，如果可以，我该如何开始？并且不要说“互联网协议不够好？”，是的，只是看看是否可能：P

我想知道更多关于如何，只是为了学习协议是如何完成的。我有一些编程经验，但没有网络协议之类的经验。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T19:06:14.413

简短的回答是肯定的——它已经完成了，并且可以再次完成。

已完成的示例包括 DECnet、NetBIOS、Appletalk 和 ATM。虽然我不确定它是否完全按照预期实现（尽管 DECNet 非常接近），但标准的 OSI 7 层网络模型最初*是*作为实际实现的模型（即，意图是人们会实现那些层，并且您可以通过将您选择的每一层的实现插入在一起来构建一个完整的网络堆栈）。

当然，今天我们大多数人认为的 IP 实际上是 IPv4——正如您可能从版本号中猜到的那样，它有前辈（以及后继者，IPv6）。

编辑：至于你是*如何*做到的：几乎和其他任何事情一样。我会先写一些关于你的动机的东西——你想完成什么，它应该支持什么样的操作，等等。然后开始研究最简单的设计，你可以弄清楚它可能会做你想做的事。然后，当您使用它并遇到问题时，请弄清楚它们是否源于糟糕的实现，还是设计本身的缺陷。根据需要修改一个或两个，尽量保持其演变的连贯性和可理解性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:06:18.413

简而言之：是的，这是可能的。在更高级别（即 OSI 第 7 层）上，它每天都完成。如果你想实现下一个 IP，你只需要：

*   特殊硬件（对于实际的物理实现，假设您的协议与 IP 有很大不同）
*   支持您的协议的您喜欢的操作系统的设备驱动程序
*   也许是一个高级 API 来促进实现

编辑：看到另外两个人打败了我；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T19:06:06.887

> 是否可以编写与 Internet 协议相同的协议？

是的，可以编写自己的 IP 堆栈，但是除非你是编程和网络方面的专家级别，否则要真正去做（并且实际上做对了）是非常困难的

# python - python gv vs pygrsphviz

> ID：10726211
> 
> 赞同：1
> 
> 时间：2012-05-23T19:01:00.237
> 
> 标签：python, graphviz, pygraphviz

蟒蛇菜鸟在这里。

我试图找出哪个模块的学习曲线较小。gv 模块作为与 graphviz 或 pygraphviz 的语言绑定提供。

pygraphviz 是否在内部使用 gv 保证我安装两者？

[http://www.graphviz.org/pdf/gv.3python.pdf](http://www.graphviz.org/pdf/gv.3python.pdf)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T00:32:27.593

使用[`networkx`](http://networkx.github.io/)它是 Python 中广泛接受的图形包，以及它的`pydot`或`matplotlib`接口，特别是内联绘图功能。另请参阅[此问题](https://stackoverflow.com/questions/4596962/display-graph-without-saving-using-pydot/18522941#18522941)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:36:32.887

我喜欢[`pydot`](http://code.google.com/p/pydot/)然后使用输出将其通过管道传输到 graphviz（点）或使用内置的 spawn 方法。在我看来，它有一个更简单的界面。

# c# - 在 C# 应用程序和 php 应用程序之间共享字符串资源文件

> ID：10726214
> 
> 赞同：2
> 
> 时间：2012-05-23T19:01:11.370
> 
> 标签：c#, php, web-applications, resx, resource-files

作为我正在进行的项目的一部分，我们正在设计一个包含两个组件的 Web 应用程序。第一个组件是用 C# 编写的应用程序，它在客户端的 PC 上运行并将信息推送到 Web 服务器。第二个组件是一个用 php 编写的 Web 应用程序，它运行在 Web 服务器上，因此客户端可以远程查看 C# 应用程序推送的数据。

我的问题是，在两个应用程序之间共享字符串资源文件的最佳方式是什么？我们需要这种行为，因为许多术语同时出现在 c# 应用程序和网页的用户界面中。

# core-data - 使用 Core Data 创建粘合表？

> ID：10726215
> 
> 赞同：0
> 
> 时间：2012-05-23T19:01:20.080
> 
> 标签：core-data, ios5

假设我有一个名为“车库”的实体和一个名为“汽车”的实体。

在 SQL 中，我可能会创建第三个表（有时称为粘合表），它只有两个字段“GarageID”“CarID”

这样我就可以将某些汽车与某些车库联系起来。

Core Data 建模器将如何处理这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:09:57.143

你说的是多对多关系。CoreData 支持这样的模型。只需在两个实体中创建相互设置为“对多”的关系。就这样。

# mfc - 如何将项目添加到 MFC CListCtrl 对象，以便它们的图标以从上到下的顺序显示？

> ID：10726216
> 
> 赞同：2
> 
> 时间：2012-05-23T19:01:23.423
> 
> 标签：mfc, sequences, clistctrl

我正在使用 Visual Studio C++ 2008 v 3.5 SP1（带有功能包）。

通过 将项目添加到 MFC`CListCtrl`对象后`InsertItem()`，在大多数视图模式中，它们的图标以相反的行顺序显示，但正确的列顺序。我没有使用“报告”( `LV_VIEW_DETAILS`) 模式，所以我提到的行和列是指图标在网格或布局中的排序方式。

我这样添加它们：

```
for (int i = 0; i < item_count; ++i)
    list_ctrl.InsertItem (i, item_arr[i].text, i); 
```

并希望它们看起来像这样：

```
icon 0
icon 1
icon 2
:
icon N-2
icon N-1 
```

（其中图标 # 匹配其项目 # 并且 N 是`item_count`）。

但是，在“大图标”、“小图标”和“平铺”( `LV_VIEW_ICON`, `LV_VIEW_SMALLICON`, `LV_VIEW_TILE`) 模式下，它们看起来像这样：

```
icon N-1
icon N-2
:
icon 2
icon 1
icon 0 
```

它们仅在“列表”( `LV_VIEW_LIST`) 模式下以正确的顺序出现，但随后它们水平排列和滚动：

```
icon 0  icon 1  icon 2  ..  icon N-2  icon N-1 
```

（它们是否全部出现在单行/列中仅仅是图标和控件的相对大小/尺寸的函数。）似乎我可以有垂直方向但相反的顺序，或者正确的顺序但错误的方向！

我如何以我想要的方式得到东西？我在文档或论坛中没有看到任何关于此的内容 - 仅关于按文本排序项目（我不想要）或在详细信息/报告模式下排序列的顺序（我不想要）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:59:43.207

在花了太多时间之后，我们终于想通了：我需要将`OwnerDrawFixed`属性（返回）更改为`False`! 现在它按预期工作。

# scala - 用隐式模拟部分类型参数推断？

> ID：10726222
> 
> 赞同：4
> 
> 时间：2012-05-23T19:01:57.980
> 
> 标签：scala

我正在Scala中制作一个简单的依赖注入框架，用于构造函数注入。这个想法是 DI 的对象会将其所需的服务像常规参数一样放入其构造函数中，并实现一个类型类，该类确定它们的哪些参数是从容器中获取的，哪些是由用户在实例化时传递的。

所以，它应该看起来像：

```
trait Container {
  private singletons: Map[Class, AnyRef]
  def getSingleton[T: Manifest] =
    singletons(implicitly[Manifest[T]].erasure).asInstanceOf[T]
  ... methods for adding singletons, etc ...
}

class Foo(arg: String, svc: FooService) {
  ...
}

trait Constructor[T] { ??? }    

object FooConstructor extends Constructor[Foo] {
  def construct(arg: String)(implicit container: Container) =
    new Foo(arg, container.getSingleton[FooService])
} 
```

现在基本上我希望能够有一个名为 的方法`construct`，我可以调用它`construct[Foo]("asd")`并获取一个新实例`Foo`with`"asd"`传递给构造函数，并`FooService`从本地容器获取并传递给构造函数。这个想法是它应该以类型安全的方式获取`Constructor`类型类的实例`Foo`，知道它应该具有的参数的数量和类型。另外，这是最难的部分，我不想写出参数的类型——只是要构造的对象。

我尝试了几件事：

```
trait Constructor1[T, A] {
  def construct(arg: A): T
}

trait Constructor2[T, A1, A2] {
  def construct(arg1: A1, arg2: A2): T
}

def construct[T, A](arg1: A): T = implicitly[Constructor1[T, A]].construct(arg1)

... 
```

但是这种方法不起作用，因为似乎为了“召唤”`Constructor`类型类实例，我们需要编写参数的类型，这是很多讨厌的样板：

```
construct[Foo, String]("asd") // yuck! 
```

有没有办法使用类型类（或其他任何东西）来部分推断类型参数？我们`Foo`在`Constructor`实例定义中定义了构造函数参数的类型，所以如果我们可以调用实例，我们应该能够调用`construct`并获得正确的参数类型。问题是无需指定构造函数类型参数即可获取该实例。我为此尝试了很多不同的想法，我觉得凭借 Scala 的强大功能和一系列技巧，我必须*有*一种方法可以编写`construct[Foo]("asd")`并且让参数列表是类型安全的。有任何想法吗？

更新：感谢 Miles Sabin 的出色回答 + 稍作修改，这是一种只需要一个类型参数并且适用于所有不同参数列表长度的方法。这是一种非常简单的方式来轻松地连接依赖关系，而无需反射成本：

```
trait Constructor1[T, A] { def construct(arg1: A)(implicit c: Container): T }
trait Constructor2[T, A, B] { def construct(arg1: A, arg2: B)(implicit c: Container): T }

implicit object FooConstructor extends Constructor1[Foo, String] {
  def construct(arg1: String)(implicit c: Container) = 
    new Foo(arg1, c.getSingleton[FooService])
}

implicit object BarConstructor extends Constructor2[Bar, String, Int] {
  def construct(arg1: String, arg2: Int)(implicit c: Container) = 
    new Bar(arg1, arg2, c.getSingleton[FooService])
}

class Construct[T] {
  def apply[A](arg1: A)(implicit ctor: Constructor1[T, A], container: Container) =
    ctor.construct(arg1)
  def apply[A, B](arg1: A, arg2: B)(implicit ctor: Constructor2[T, A, B], container: Container) =
    ctor.construct(arg1, arg2)
}

def construct[T] = new Construct[T]

construct[Foo]("asd")
construct[Bar]("asd", 123) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T09:01:19.693

Scala 中的类型参数推断是全有或全无的事情：如果您为类型参数块显式提供任何类型参数，那么您必须全部提供它们。因此，如果您只想提供一组类型参数中的一部分，则必须安排它们属于单独的类型参数块。

在这种情况下，方法是将`construct`方法分成两个阶段：第一个阶段，它接受一个显式类型参数并返回一个类似函数的值；第二个，它将类似函数的值应用于您希望为其推断类型的参数。

事情可能会这样，

```
// Function-like type
class Construct1[T] {
  def apply[A](arg1: A)(implicit ctor : Constructor1[T, A]): T =
    ctor.construct(arg1)
}

def construct[T] = new Construct1[T] 
```

调用的结果`construct[Foo]`是 type 的值`Construct1[Foo]`。这有一个`apply`带有类型参数的方法，可以推断，以及一个隐式参数，其类型由`T`和确定`A`。您现在要进行的调用看起来像，

```
construct[Foo].apply("asd")  // T explicit, A inferred as String 
```

Scala 的语义糖化规则在`apply`这里适用，这意味着这可以重写为，

```
construct[Foo]("asd") 
```

这正是您想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T06:19:20.563

```
trait Construct[T, A] {
 def apply(arg: A): T
}

class Constructor[T]{
  def apply[A](arg : A)(implicit construct : Construct) = construct(arg)
}

object Constructor {
 def apply[T] = new Constructor[T]
}

Constructor[T]("arg") 
```

# asp.net - 您如何调整控件的大小以使它们在 asp:Table 中均匀对齐？

> ID：10726223
> 
> 赞同：0
> 
> 时间：2012-05-23T19:01:58.583
> 
> 标签：asp.net, .net

我正在开发一个网站，并试图创建一个正确对齐的数据输入表单。使用表格结构，我期望控件正确对齐，但无济于事。我一直在使用 <asp:TableCell> 控件的 ColumnSpan 属性来使 Title 字段跨越整个表单的宽度。

Title <asp:TextBox> 的 width 属性设置为“100%”，但 First Name 和 Last Name 框具有特定大小的像素宽度。

这是我当前代码的结果：

![布局截图](../Images/a3dd6d4998db60ec3a1a31d5d271d35a.png)

和代码本身：

```
<asp:Table runat="server">
    <asp:TableRow>
        <asp:TableCell>
            First Name:&nbsp;&nbsp;
        </asp:TableCell>
        <asp:TableCell>
            <asp:TextBox ID="FirstNameTextBox" runat="server" Width="150px" />
        </asp:TableCell>
        <asp:TableCell>
            &nbsp;&nbsp;Last Name:&nbsp;&nbsp;
        </asp:TableCell>
        <asp:TableCell>
            <asp:TextBox ID="LastNameTextBox" runat="server" Width="150px" />
        </asp:TableCell>
    </asp:TableRow>
    <asp:TableRow>
        <asp:TableCell>
            Title:
        </asp:TableCell>
        <asp:TableCell ColumnSpan="3">
            <asp:TextBox ID="TitleTextBox" runat="server" Width="100%" />
        </asp:TableCell>
    </asp:TableRow>
</asp:Table> 
```

如您所见，布局很简单。不幸的是，它似乎占用了头发太多的空间。任何关于删除标题 <asp:TextBox> 上的额外空间以便它们完美对齐的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T04:49:01.960

将此 css 与 100% 宽度的文本输入一起使用

```
box-sizing: border-box;
-webkit-box-sizing:border-box;
-moz-box-sizing: border-box; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:58:15.360

右对齐您的姓氏文本框。这样，您的标题文本框将与名字文本框的左侧和姓氏文本框的右侧齐平。

**编辑**

我确信它与填充有关。我进行了快速搜索，并在这里为您找到了可能的解决方案：[宽度为 100% 的 HTML 输入文本框溢出表格单元格](https://stackoverflow.com/questions/2371105/html-input-textbox-with-a-width-of-100-overflows-table-cells)。

我很想知道这是否能解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:58:02.717

**解决方案：**

```
<asp:Table runat="server">
    <asp:TableRow>
        <asp:TableCell>
            First Name:&nbsp;&nbsp;
        </asp:TableCell>
        <asp:TableCell Width="150px">
            <asp:TextBox ID="FirstNameTextBox" runat="server" Width="100%" />
        </asp:TableCell>
        <asp:TableCell Width="10px" />
        <asp:TableCell>
            Last Name:&nbsp;&nbsp;
        </asp:TableCell>
        <asp:TableCell Width="150px">
            <asp:TextBox ID="LastNameTextBox" runat="server" Width="100%" />
        </asp:TableCell>
    </asp:TableRow>
    <asp:TableRow>
        <asp:TableCell>
            Title:
        </asp:TableCell>
        <asp:TableCell ColumnSpan="4">
            <asp:TextBox ID="TitleTextBox" runat="server" Width="100%" />
        </asp:TableCell>
    </asp:TableRow>
</asp:Table> 
```

我将宽度定义更改为在 <asp:TableCell> 上，并为空白区域添加了 10px 列。然后，通过将 TextBoxes 的宽度设置为 100%，它消除了空间；奇怪但简单的解决方案。

![解决方案截图](../Images/65e50b2f2b763a1919f808ee22555025.png)

# powershell-remoting - 我如何 PSRemote 启动 procdump 使其在会话结束后仍然存在

> ID：10726225
> 
> 赞同：1
> 
> 时间：2012-05-23T19:02:04.983
> 
> 标签：powershell-remoting

我可以通过以下方式在 unix 上启动持久进程：

```
nohup process & 
```

在我关闭我的 bash 会话后，它将继续运行。我似乎无法对 Windows 上的 PowerShell 远程处理做同样的事情。我可以打开与服务器的 PSRemote 会话并启动一个进程，但是一旦我关闭该会话，它就会死掉。我的假设是这是强沙盒的好处，但这是我宁愿以某种方式解决的好处。有任何想法吗？

到目前为止，我已经尝试过：

```
$exe ='d:\procdump.exe'
$processArgs = '-ma -e -t -n 3 -accepteula w3wp.exe d:\Dumps'
1) [System.Diagnostics.Process]::Start($exe,$processArgs)
2) Start-Job -ScriptBlock {param($exe,$processArgs) [System.Diagnostics.Process]::Start($exe,$processArgs)} -ArgumentList ($exe,$processArgs)
3) start powershell {param($exe ='d:\procdump.exe', $processArgs = '-ma -e -t -n 3 -accepteula w3wp.exe d:\Dumps') [System.Diagnostics.Process]::Start($exe,$processArgs)}
4) start powershell {param($exe ='d:\procdump.exe', $processArgs = '-ma -e -t -n 3 -accepteula w3wp.exe d:\Dumps') Start-Job -ScriptBlock {param($exe,$processArgs) [System.Diagnostics.Process]::Start($exe,$processArgs)} -ArgumentList ($exe,$processArgs)} 
```

该程序一直运行，直到我关闭会话，然后收割 procdump。procdump 最酷的地方在于它会自行终止，我想让它继续运行以利用这一事实。

我一直在远程启动 ADPlus，保持会话打开，然后终止会话以终止捕获。这有点方便，但它需要大量的轮询、检查和决定什么时候是在填满硬盘驱动器之前终止捕获过程的正确时机，但在捕获足够多的转储之后才能使用。我可以让 procdump 在等待适当的触发器时无限期地运行，当它捕获到足够的数据时，它就会死掉。这是可爱的。

在我终止远程会话后，我只需要让 procdump 继续运行。创建一个 procdump 计划任务并启动它可能不值得，但这是我剩下的最后一个想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:42:14.413

这是直接不可能的。间接地，是的，可以远程创建和启动任务或服务，但不能简单地将进程推入 SYSTEM 空间。

我通过生成本地作业来启动远程作业并在所需的时间段内保持活动状态来解决我的问题。本地作业保持远程会话打开，然后在适当的时间终止，如果我碰巧关心，本地父进程能够继续不间断地运行并使用 ReceiveJob 获取远程 procdump 的返回值。

# database - 注册、Xcode 和数据库

> ID：10726230
> 
> 赞同：0
> 
> 时间：2012-05-23T19:02:23.440
> 
> 标签：database, xcode, uialertview

我真的不知道从哪里开始或使用什么代码等，所以只想看看你们中的一个人是否可以把我推向正确的方向。

基本上在我的应用程序上，当用户第一次打开应用程序时，我想要一个警报提示他们使用他们的电子邮件和姓名进行注册，并将这些信息发送到数据库。但是一旦他们提示过一次，下次他们打开应用程序时，我不想显示这个..

任何帮助家伙！？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:10:42.537

如果我们谈论网络应用程序，我唯一能想到的就是使用 cookie，但是您有一个用于手机的应用程序，那么我会使用一些现金内存，在其中写入您将在每次应用程序启动时检查的值。

但是您需要知道，这只能在用户删除内存之前有效。

所以你走在好的路上，但如果你理解我的话，你想做的事情并不是 100% 可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:14:32.530

您的应用程序可以具有通过 NSUserDefaults 对象访问的用户首选项。您可以检查首选项是否存在，如果找不到，请执行注册，然后创建该首选项，以便将来跳过注册……假设数据库事务成功。

想到的另一个选项是使用远程数据库进行验证，但这取决于您在网络不可用时要执行的操作。

# android - 在 Android 设备上运行 DumpRenderTree

> ID：10726231
> 
> 赞同：1
> 
> 时间：2012-05-23T19:02:34.657
> 
> 标签：android

我一直在尝试在 Android 中运行 DumpRenderTree 测试（在我运行 ICS 的 Android 设备上），但无法弄清楚如何运行它。文档很少，我发现的唯一其他线程（接近我的问题）是：

[你如何将 Android Instrumentation 测试推送到模拟器/设备？](https://stackoverflow.com/questions/1520503/how-do-you-push-android-instrumentation-tests-to-emulator-device)

这是我运行此命令时的 ddms 输出：

```
05-23 11:59:07.118: INFO/TestRunner(10253): started: warning(junit.framework.TestSuite$1)
05-23 11:59:07.118: INFO/TestRunner(10253): failed: warning(junit.framework.TestSuite$1)
05-23 11:59:07.118: INFO/TestRunner(10253): ----- begin exception -----
05-23 11:59:07.118: INFO/TestRunner(10253): junit.framework.AssertionFailedError: No tests found in com.android.dumprendertree.LayoutTestsAutoTest
05-23 11:59:07.118: INFO/TestRunner(10253):     at junit.framework.Assert.fail(Assert.java:47)
05-23 11:59:07.118: INFO/TestRunner(10253):     at junit.framework.TestSuite$1.runTest(TestSuite.java:263)
05-23 11:59:07.118: INFO/TestRunner(10253):     at junit.framework.TestCase.runBare(TestCase.java:127)
05-23 11:59:07.118: INFO/TestRunner(10253):     at junit.framework.TestResult$1.protect(TestResult.java:106)
05-23 11:59:07.118: INFO/TestRunner(10253):     at junit.framework.TestResult.runProtected(TestResult.java:124)
05-23 11:59:07.118: INFO/TestRunner(10253):     at junit.framework.TestResult.run(TestResult.java:109)
05-23 11:59:07.118: INFO/TestRunner(10253):     at junit.framework.TestCase.run(TestCase.java:118)
05-23 11:59:07.118: INFO/TestRunner(10253):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
05-23 11:59:07.118: INFO/TestRunner(10253):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
05-23 11:59:07.118: INFO/TestRunner(10253):     at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:537)
05-23 11:59:07.118: INFO/TestRunner(10253):     at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1551)
05-23 11:59:07.118: INFO/TestRunner(10253): ----- end exception -----
05-23 11:59:07.126: INFO/TestRunner(10253): finished: warning(junit.framework.TestSuite$1)
05-23 11:59:07.126: INFO/TestRunner(10253): started: warning(junit.framework.TestSuite$1)
05-23 11:59:07.126: INFO/TestRunner(10253): failed: warning(junit.framework.TestSuite$1)
05-23 11:59:07.126: INFO/TestRunner(10253): ----- begin exception -----
05-23 11:59:07.126: INFO/TestRunner(10253): junit.framework.AssertionFailedError: No tests found in com.android.dumprendertree.LoadTestsAutoTest
05-23 11:59:07.126: INFO/TestRunner(10253):     at junit.framework.Assert.fail(Assert.java:47)
05-23 11:59:07.126: INFO/TestRunner(10253):     at junit.framework.TestSuite$1.runTest(TestSuite.java:263)
05-23 11:59:07.126: INFO/TestRunner(10253):     at junit.framework.TestCase.runBare(TestCase.java:127)
05-23 11:59:07.126: INFO/TestRunner(10253):     at junit.framework.TestResult$1.protect(TestResult.java:106)
05-23 11:59:07.126: INFO/TestRunner(10253):     at junit.framework.TestResult.runProtected(TestResult.java:124)
05-23 11:59:07.126: INFO/TestRunner(10253):     at junit.framework.TestResult.run(TestResult.java:109)
05-23 11:59:07.126: INFO/TestRunner(10253):     at junit.framework.TestCase.run(TestCase.java:118)
05-23 11:59:07.126: INFO/TestRunner(10253):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
05-23 11:59:07.126: INFO/TestRunner(10253):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
05-23 11:59:07.126: INFO/TestRunner(10253):     at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:537)
05-23 11:59:07.126: INFO/TestRunner(10253):     at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1551)
05-23 11:59:07.126: INFO/TestRunner(10253): ----- end exception -----
05-23 11:59:07.126: INFO/TestRunner(10253): finished: warning(junit.framework.TestSuite$1) 
```

我应该在运行它之前进行一些测试吗？任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T06:41:02.630

显示渲染树的一个棘手方法是**`about:debug.render.file`**在股票 android 浏览器的 URL 栏中输入。

然后你可以找到一个在**`/mnt/sdcard/renderTree.txt`**.

同样，**`about:debug.dom.file`**结果是 DOM 树输出。

# bash - Bash 脚本 rsync: rsync: link_stat (blah) failed: No such file or directory (2)

> ID：10726236
> 
> 赞同：30
> 
> 时间：2012-05-23T19:02:46.593
> 
> 标签：bash, scripting, rsync

我正在尝试为我的本地（Mac OS X）机器编写一个简单的 bash 脚本，以将文件从我机器上的目录移动到远程机器。这条线失败了：

```
rsync --verbose  --progress --stats --compress --rsh=ssh \
      --recursive --times --perms --links --delete \
      --exclude "*bak" --exclude "*~" \
      /repository/* $DEV_SERVER:$REMOTE_DIR 
```

`$DEV_SERVER`并且`$REMOTE_DIR`是之前定义的，我附和它们以验证它们是否准确。

我得到的错误是：

```
rsync: link_stat /Users/myusername/mycurrentdirectory failed: No such file or directory (2) 
```

这里要注意的是`/repository`，它使用的是我的工作目录，而不是使用定义的目录（位于机器的根目录中）。这是什么原因造成的？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-08-06T08:57:03.353

检查您的`\`字符在行尾是否没有空格。这将导致 BASH 无法正确解释换行，从而出现上述 rsync 错误。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-17T09:38:46.400

从源位置删除'*'，如果你在最后指定'/'，rsync 知道在目录内部查找

像那样：

```
rsync --verbose  --progress --stats --compress --rsh=ssh --recursive --times --perms --links --delete --exclude "*bak" --exclude "*~" /repository/ $DEV_SERVER:$REMOTE_DIR 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-17T13:19:43.753

我在做一些 rsync 工作时遇到了同样的错误。我有错误的字符来指定我必须从其他地方复制和粘贴命令得到的选项：

```
− 
```

而不是下面的正确字符：

```
- 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-23T19:51:08.797

这：

```
rsync --verbose  --progress --stats --compress --rsh=ssh \
  --recursive --times --perms --links --delete \
  --exclude "*bak" --exclude "*~" \
  /repository/* $DEV_SERVER:$REMOTE_DIR 
```

应该是这样的：

```
rsync --verbose  --progress --stats --compress --rsh=ssh --recursive --times --perms --links --delete --exclude "*bak" --exclude "*~" /repository/* $DEV_SERVER:$REMOTE_DIR 
```

Bash 对`\`字符的解释与命令行不同，或者后面可能有一个隐含的非空白字符。

# extjs4 - ExtJS 重复出现神秘的 FireBug 错误

> ID：10726237
> 
> 赞同：7
> 
> 时间：2012-05-23T19:02:46.447
> 
> 标签：extjs4, firebug, extjs4.1

在调试 ExtJS 4 时（尝试了 4.1.0 和 4.1.1 版本），FireBug 反复显示以下错误：`An invalid or illegal string was specified http://docs.sencha.com/ext-js/4-1/extjs/ext-all.js Line 18`. 尽管指定了该选项，但它不会因错误而中断。此外，我的代码或 ext-debug.js 和它的加载器似乎都没有真正调用 ext-all.js。

这个错误大约每分钟一次记录到 Firebug 的控制台，这很烦人。困扰我的是我无法让错误消失。这是一个 FireBug 错误吗？一个 ExtJS 错误？外星人？如何调试调试器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:43:18.857

我之前遇到过同样的问题，我已经通过删除`JS`文件末尾的特殊字符来解决它！（`app.js`我认为）

这很奇怪，但问题来自隐藏的特殊字符，例如：**零宽度非连接**符或**从右到左标记**。

打开另一个 JS 文件，但**不要**在那里复制/粘贴您的代码。再写一遍，看看有没有问题。

如果您有一些数据，请不要忘记检查您的**数据。**正如本文解释的问题：[http ://www.ashorlivs.fr/javascript-jquery/article/an-invalid-or-illegal-string-was](http://www.ashorlivs.fr/javascript-jquery/article/an-invalid-or-illegal-string-was)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:23:49.800

对于一般调试，请参阅此链接[http://www.sencha.com/learn/debugging-ext-js-applications/](http://www.sencha.com/learn/debugging-ext-js-applications/) 您也可以在开发模式下使用 ext-all-dev.js。在萤火虫之上还有另一个优秀的工具，在这个链接[http://www.illuminations-for-developers.com/](http://www.illuminations-for-developers.com/)

PS：我还没有弄清楚如何发表评论。我想它会在我获得更多积分/声誉时出现。因此将其添加为答案。谢谢。

# java - NoClassDefFoundError：与 Glassfish 的文件打包有关？

> ID：10726238
> 
> 赞同：0
> 
> 时间：2012-05-23T19:02:52.053
> 
> 标签：java, jakarta-ee, glassfish, ejb

我有这个网络服务：

```
 /**
     * Web service operation
     */
    @WebMethod(operationName = "executeCleanAndValidateExtractedDate")
    public boolean executeCleanAndValidateExtractedDate()
    {
        try
        {
            CleanAndValidateExtractedData cav = new CleanAndValidateExtractedData();
            Transformation transformation = new DefaultTransformation();
            Step s1 = transformation.addStep(cav);          
            return transformation.execute();
        }
        catch (RuntimeException ex)
        {
            Logger.getLogger(ExecuteKeymark.class.getName()).log(Level.SEVERE, null, ex);
            return false;
        }
        catch(Exception ex)
        {
            Logger.getLogger(ExecuteKeymark.class.getName()).log(Level.SEVERE, null, ex);
            return false;
        }
    } 

```

当我尝试执行它时，我得到一个异常：

```
javax.ejb.EJBException
    在 com.sun.ejb.containers.BaseContainer.processSystemException（BaseContainer.java:5193）
    在 com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5091)
    在 com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4879)
...
引起：java.lang.NoClassDefFoundError: com/medallion/etl/impl/AbstractStepSupport

```

我很困惑为什么它可以找到那个类。它在运行时可用，但不再可用。我需要做一些特别的事情来部署它，以便它可以访问 Glassfish 中的类吗？

编辑：附加的POM文件

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.dv</groupId>
<artifactId>WS_3</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>ejb</packaging>

<name>WS_3</name>

<properties>
    <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>com.medallion</groupId>
        <artifactId>keymark.filemonitorEJB</artifactId>
        <version>1.0-ALPHA</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>com.medallion</groupId>
        <artifactId>etl</artifactId>
        <version>1.0-ALPHA</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <compilerArguments>
                    <endorseddirs>${endorsed.dir}</endorseddirs>
                </compilerArguments>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ejb-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <ejbVersion>3.1</ejbVersion>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${endorsed.dir}</outputDirectory>
                        <silent>true</silent>
                        <artifactItems>
                            <artifactItem>
                                <groupId>javax</groupId>
                                <artifactId>javaee-endorsed-api</artifactId>
                                <version>6.0</version>
                                <type>jar</type>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:09:31.443

确保将所需的 jar 文件捆绑在 war/ear 文件中，以便它们在运行时可用，而不仅仅是在编译时可用。

# c# - 如何关闭应用栏（Windows 8 Metro）

> ID：10726243
> 
> 赞同：8
> 
> 时间：2012-05-23T19:03:06.870
> 
> 标签：c#, xaml, windows-8, windows-runtime, appbar

当我点击底部应用栏中的图标时，它保持打开状态。单击按钮时我需要关闭它。我怎样才能做到这一点？

我正在使用 C#、XAML。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T20:46:23.080

设置 IsOpen=false。这应该足够了。

# c++ - Boost 套接字问题

> ID：10726244
> 
> 赞同：1
> 
> 时间：2012-05-23T19:03:10.443
> 
> 标签：c++, boost-asio

首先，我想声明我是 C++ 的初学者，并且总体上是 boost，尽管我确实有一些使用 Java 和 C# 等语言的经验。

话虽如此，我在通过 Boost TCP 套接字传输数据时遇到了问题。我正在使用这段代码：

发送：

```
tcp::socket s(io_service);
        boost::asio::connect(s, iterator);
        string response = static_cast<ostringstream*>( &(ostringstream() << arg1) )->str() 
            + "," + static_cast<ostringstream*>( &(ostringstream() << arg2) )->str()
            + "," + static_cast<ostringstream*>( &(ostringstream() << arg3) )->str()
            + "," + static_cast<ostringstream*>( &(ostringstream() << arg4) )->str()
            + "," + static_cast<ostringstream*>( &(ostringstream() << arg5) )->str()
            + "," + static_cast<ostringstream*>( &(ostringstream() << arg6) )->str();

        //pad the rest
        while (response.length() < max_length)
        {
            response += ' ';
        }
        boost::asio::write(s, boost::asio::buffer(response, sizeof(response))); 
```

读书：

```
tcp::acceptor a(io_service, tcp::endpoint(tcp::v4(), port));
    while(true)
    {
        socket_ptr sock(new tcp::socket(io_service));
        a.accept(*sock);
        boost::thread t(boost::bind(session, sock));
    }
...
void session(socket_ptr sock)
{
    char data[max_length];
    size_t length;
    try
    {
        while(true)
        {           
            boost::system::error_code error;
            //size_t length = sock->read_some(boost::asio::buffer(data), error);
            length = boost::asio::read(*sock, boost::asio::buffer(data, sizeof data));
            std::cout << "Length " << length << endl;
            if (error == boost::asio::error::eof)
            {
                break; // Connection closed cleanly by peer.
            }
            else if (error)
            {
                throw boost::system::system_error(error); // Some other error.
            }

        }
    }
    catch (std::exception& e)
    {
        std::cout << data << endl;  
        string message = e.what();
        if(std::string::npos != message.find(END_OF_FILE))
        {
            domeSomethingWithTheData(data); 
            memset(data, 0, sizeof data);
        }
        else
        {
            std::cout << data <<endl;
            std::cerr << "Exception in thread: " << e.what() << "\n";
        }
    }
} 
```

我无法理解的是，无论我使用什么（`boost::asio::read`或`sock->read_some`），我都不会得到超过 32 个字符的数据。我尝试将缓冲区的大小增加到`2048`，但问题仍然存在。

缓冲区总是包含超过 32 个字符（其中大部分是垃圾），但我假设这些字符实际上并不是从客户端发送的，而是来自服务器端缓冲区的实际分配，因为`std::cout << "Length " << length`打印出 32。

任何有关我如何从客户端向服务器发送任意数量的字符的信息都将不胜感激。

编辑：

在 Rafal Rawicki 提供的指针之后，我现在正在使用以下代码：

```
 boost::asio::streambuf buffer;
    boost::asio::read_until(*sock, buffer, '\n');
    std::istream is(&buffer);
    std::string line;
    std::getline(is, line); 
    std::cout << line << std::endl; 
```

客户端保持不变，唯一的例外是我`\n`在最后添加了一个。然而，这会产生很多`End of file`异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:56:34.660

这实际上不是您问题的答案。但是一个简短的建议。

你的字符串连接代码太残忍了！

```
string response = static_cast<ostringstream*>( &(ostringstream() << arg1) )->str() 
        + "," + static_cast<ostringstream*>( &(ostringstream() << arg2) )->str()
        + "," + static_cast<ostringstream*>( &(ostringstream() << arg3) )->str()
        + "," + static_cast<ostringstream*>( &(ostringstream() << arg4) )->str()
        + "," + static_cast<ostringstream*>( &(ostringstream() << arg5) )->str()
        + "," + static_cast<ostringstream*>( &(ostringstream() << arg6) )->str(); 
```

对于每个 arg 你创建一个 new `ostringstream`，将值写入它，然后你**不必要地**取消引用它，然后你**不必要地**将它转换为它已经拥有的类型。最后，您使用字符串连接来构建最终字符串。

这种字符串连接既不高效，也不复杂（需要临时对象、一些浪费的分配等等）。

`ostringstream`是字符串连接和格式化的正确工具，它高效且复杂。

长话短说，你的代码应该是这样的：

```
ostringstream oss;
oss << arg1 << "," << arg2 << "," << arg3 << "," << arg4 << "," << arg5 << "," << arg6;
string response = oss.str(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T19:12:55.003

[`boost::asio::read`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/reference/read/overload1.html)您使用应该读取数据，直到缓冲区已满或发生错误。

`boost::asio::socket::read_some`应该从套接字读取**一些数据。**

要读取所需的数据量，您可以：

*   尝试使用 boost::asio::read 。
*   使用这些函数的多次调用来读取越来越多的数据
*   用于[`read_until`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/reference/read_until.html)将数据读取到预期的分隔符
*   使用这个[`boost::asio::read`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/reference/read/overload3.html)重载，它接受一个参数`completion_condition`，例如字节数。

此外，请查看Boost.Asio[的同步操作问题，](https://stackoverflow.com/q/9200005/13767)并考虑改用异步操作。

编辑：我错过了客户端代码中不正确的缓冲区初始化。的使用`boost::asio::read`是正确的。

你不能像这样初始化缓冲区：

```
boost::asio::buffer(response, sizeof(response)); 
```

因为`sizeof`返回`std::string`结构的大小，而不是整个字符串。在我的机器上它总是 8。使用：

```
boost::asio::buffer(response); 
```

# c# - 一个列表的复杂合并 进入另一个

> ID：10726245
> 
> 赞同：2
> 
> 时间：2012-05-23T19:03:16.817
> 
> 标签：c#, .net, linq

我需要返回按时间顺序排列的警报列表。下面的方法 1 就是这样做的。

我还需要获取某种警报类型的警报，如果 AlertTypeID = {1,2,3,6,8,9,x}，则按 CreateDate 返回这些警报并按月排序。下面的方法 2 就是这样做的。

现在，我需要将方法 2 的结果插入到方法 1 的结果中。尽管方法 2 返回的项目是按月份组织的，但我们只关心最近的。只有方法 2 中最近的子组项目需要遵循方法 1 返回的项目的时间顺序。该子组项目将确定子组 2 中其余每月项目的放置位置。

最后一个要求是必须删除重复项。如果从子组警报返回的项目，则它不能也存在于主要组警报中。

下面我提供了一个我想要达到的效果的说明：

```
december alert 1 (12/23/2012)
december alert 2 (12/21/2012)
december alert 3 (12/20/2012)
december subalert 1 (12/19/2012)
december subalert 2 (12/18/2012)
december subalert 3 (12/04/2012)
december subalert 4 (12/01/2012)
december alert 4 (12/18/2012)
december alert 5 (12/12/2012)
november alert 1 (11/22/2012)
november alert 2 (11/16/2012)
november subalert 1 (11/14/2012)
november subalert 2 (11/08/2012)
november alert 3 (11/12/2012) 
```

代码：

1.  日期时间的所有警报

    ```
    List<Alert> result = new List<Alert>();
    using(NeuroLabLinqDataContext dc = conn.GetContext())
    {
        IEnumerable<Alert> alerts = (from a in dc.Alerts
                                     where a.AccountID == AccountID
                                     orderby a.CreateDate descending
                                     select a).Take(40);
        result = alerts.ToList();
    }
    return result; 
    ```

2.  按月划分的警报类型

    ```
    List<Alert> result = new List<Alert>();
    int[] alertTypes = {1,2,3,4,5,6,7,8,9};

    using (NeuroLabLinqDataContext dc = conn.GetContext())
    {
        IEnumerable<Alert> alerts = (from a in dc.Alerts
                                     where a.AccountID == AccountID &&
                                     alertTypes.Contains(a.AlertTypeID)
                                     orderby ((DateTime)a.CreateDate).Month ascending
                                     select a).ToList();
    }

    return result; 
    ```

最终 select 语句的分组应如下所示：

```
 select new { Date = alerts.CreateDate, 
              Message = alerts.Message, 
              Type = alert.AlertTypeID, 
              RecentActivity = [if from method 2, then true] }; 
```

**更新：更新方法**

```
 public List<Alert> GetAlertsByAccountID(Int32 AccountID, params int[] alertTypes)
        {

            List<Alert> result = new List<Alert>();

            using (NeuroLabLinqDataContext dc = conn.GetContext())
            {
                var all = (from a in dc.Alerts
                           where a.AccountID == AccountID
                           orderby a.CreateDate descending
                           select a);

                int abc = all.Count();

                var first = all
                    .Where(a => a.AccountID == AccountID) && !alertTypes.Contains(a.AlertTypeID))
                    .OrderByDescending(a => a.CreateDate)
                    .GroupBy(a => a.CreateDate.Date)
                    .ToDictionary(g => g.Key);

                var firstKeys = first.Keys.Cast<DateTime>()
                    .ToList().OrderBy(k => k);

                var second = all
                    .Where(a => a.AccountID == AccountID) && alertTypes.Contains(a.AlertTypeID))
                    .OrderBy(a => a.CreateDate.Month)
                    .GroupBy(a => a.CreateDate.Month)
                    .ToDictionary(g => firstKeys
                        .First(k => k > g.OrderByDescending(a => a.CreateDate)
                        .FirstOrDefault().CreateDate));

                var combined = first
                    .GroupJoin(
                        second,
                        fk => fk.Key,
                        sk => sk.Key,
                        (d, l) => d.Value
                            .Union(l.SelectMany(i => i.Value).ToArray()))
                    .SelectMany(i => i);

                    result = combined.ToList(); 
            }

            return result;

        } 
```

多亏了约翰，我走得更远了。目前，我收到以下错误：

> 序列不包含匹配元素

在这一行（我很确定）：

```
.First(k => k > g.OrderByDescending(a => a.CreateDate) 
```

对于它的价值，这是我的警报表中的数据的样子。

```
AlertID AccountID   CreateDate  Timestamp   AlertTypeID    Message
122 5   2008-03-11 20:48:07.983 0x00000000000128FB  9        sdfs
123 1   2008-03-11 20:48:39.957 0x00000000000128FE  8        sdfsd
124 5   2008-03-11 20:48:39.977 0x00000000000128FF  8        sdfs
125 5   2008-03-11 20:48:40.017 0x0000000000012901  8        asdfa
126 1   2008-03-12 22:57:42.160 0x00000000000130B3  4        sfsf
127 5   2008-03-12 22:57:42.337 0x00000000000130B4  4        sdfsd
128 5   2008-03-13 09:42:14.237 0x0000000000013889  4        sdfsd
129 5   2008-03-13 09:42:31.957 0x000000000001388B  4        sdfsd
130 5   2008-03-13 09:42:45.397 0x000000000001388D  5        asdfsdf
131 1   2008-03-16 14:52:17.197 0x0000000000014822  9        asdfsdf
132 1   2008-04-12 15:25:17.330 0x000000000001B582  3        sfasdf
133 5   2008-04-12 15:25:17.700 0x000000000001B583  3        dfsfds
134 6   2008-04-14 08:37:03.273 0x000000000001BD87  3        aasfsd
135 6   2008-04-14 08:37:15.270 0x000000000001BD89  3        fhfsdf
136 6   2008-04-14 08:38:45.120 0x000000000001BD8B  2        ghsdgd
137 6   2008-04-14 08:41:30.407 0x000000000001BD9A  4        fghsdfg
138 6   2008-04-14 08:42:30.800 0x000000000001BD9C  4        gfsdf
139 6   2008-04-14 08:42:43.763 0x000000000001BD9E  5        sdfsdf
140 6   2008-04-14 08:49:25.450 0x000000000001BDAA  9        sdfasdfa
141 6   2008-04-14 08:49:34.237 0x000000000001BDAC  9        sdfasdf
142 1   2008-04-14 08:50:23.380 0x000000000001BDAF  8        sdfhdfhsg
143 6   2008-04-14 08:50:23.567 0x000000000001BDB0  8        dgasdf
144 5   2008-04-14 08:50:23.690 0x000000000001BDB1  8        dgasdf
145 6   2008-04-14 08:50:23.747 0x000000000001BDB2  8         dgasdf
147 1   2008-06-24 14:22:41.183 0x00000000000222E6  14       dgasdf
148 5   2008-06-24 14:22:41.617 0x00000000000222E7  14       dgasdf
149 6   2008-06-24 14:22:41.623 0x00000000000222E8  14       dgasdf
150 1   2008-06-24 20:11:57.757 0x0000000000022AB3  13     dgasdf
151 5   2008-06-24 20:11:57.947 0x0000000000022AB4  13       dgasdf
152 6   2008-06-24 20:11:57.953 0x0000000000022AB5  13       dgasdf
153 1   2008-07-03 18:41:51.067 0x0000000000028888  14       dgasdf
154 5   2008-07-03 18:41:51.230 0x0000000000028889  14        dgasdf
155 6   2008-07-03 18:41:51.237 0x000000000002888A  14        dgasdf
156 1   2008-07-03 18:46:17.873 0x000000000002888D  14       dgasdf
157 5   2008-07-03 18:46:17.937 0x000000000002888E  14       dgasdf
158 6   2008-07-03 18:46:17.940 0x000000000002888F  14        dgasdf 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:28:46.600

关键是将两组分解成字典，使用第一个列表中的日期作为字典的键，并选择第二个列表项日期之后最接近的键作为第二个字典的键。

一旦你有了两个字典，每个字典都使用类型和子类型的公共键值，你可以做 a`GroupJoin`并`SelectMany`在排序列表中获取结果。

（*请注意，答案是基于一个稍微不同的早期版本的问题，我不会花时间更新答案，因为我认为基本问题已经在这个答案中得到说明和解决）

***更新 2*** 我意识到您在 First() 调用中看到的问题是您的某些子警报项可能比任何其他会导致您的异常的警报项更新。我通过使用 向第一个字典添加一个“代理”键来解决这个问题`DateTime::MaxValue`，然后我不再从第一个列表中过滤掉子警报，我只是`.Distinct()`在最终结果上使用来删除重复项

使用 linqpad 我模拟了这个问题并使用字典解决了它`GroupJoin`

```
var all = new []{
    new {date = DateTime.Parse("2012-12-23"), type = "alert", value = 1, accountId = 333 },
    new {date = DateTime.Parse("2012-12-21"), type = "alert", value = 2, accountId = 333 },
    new {date = DateTime.Parse("2012-12-20"), type = "alert", value = 3, accountId = 333 },
    new {date = DateTime.Parse("2012-12-18"), type = "alert", value = 4, accountId = 333 },
    new {date = DateTime.Parse("2012-12-12"), type = "alert", value = 5, accountId = 333 },
    new {date = DateTime.Parse("2012-11-22"), type = "alert", value = 1, accountId = 333 },
    new {date = DateTime.Parse("2012-11-16"), type = "alert", value = 2, accountId = 333 },
    new {date = DateTime.Parse("2012-11-12"), type = "alert", value = 3, accountId = 333 },
    new {date = DateTime.Parse("2012-12-19"), type = "subalert", value = 1, accountId = 333 },
    new {date = DateTime.Parse("2012-12-18"), type = "subalert", value = 2, accountId = 333 },
    new {date = DateTime.Parse("2012-12-04"), type = "subalert", value = 3, accountId = 333 },
    new {date = DateTime.Parse("2012-12-01"), type = "subalert", value = 4, accountId = 333 },
    new {date = DateTime.Parse("2012-11-14"), type = "subalert", value = 1, accountId = 333 },
    new {date = DateTime.Parse("2012-11-08"), type = "subalert", value = 2, accountId = 333 },  
/*add*/ new {date = DateTime.Parse("2012-12-25"), type = "subalert", value = 9, accountId = 333 },  
};

var first = all
    .Where(a=>a.accountId == 333 /* removed && type != "alert" */)
    .OrderByDescending(a=>a.date)
    .GroupBy(a=>a.date.Date)
    .ToDictionary(g=>g.Key);

var firstKeys = first.Keys
    .Cast<DateTime>()
    .Union(new []{DateTime.MaxValue}) /* added this 'surrogate' key */
    .OrderBy(k=>k)
    .ToArray();

var second = all
    .Where(a=>a.accountId == 333 && a.type == "subalert")
    .OrderBy(a=>a.date.Month)
    .GroupBy(a=>a.date.Month)
    .ToDictionary(g=>firstKeys.First(k=>k > g.OrderByDescending(a=>a.date).FirstOrDefault().date));

var combined = first
    .GroupJoin(
        second,
        fk=>fk.Key,
        sk=>sk.Key,
        (d,l)=>d.Value
            .Union(l.SelectMany(i=>i.Value).ToArray()))
    .SelectMany(i=>i)
    .Distinct(); /* Added this to remove duplicates */

combined.Dump(); 
```

产生：

![更新结果](../Images/bf29ea6f492b6d29d283807fa081dccf.png)

# excel - 从 excel/openoffice 单元格中动态提取第一个、最后一个单词（然后是一些！）

> ID：10726247
> 
> 赞同：0
> 
> 时间：2012-05-23T19:03:28.893
> 
> 标签：excel, excel-formula, openoffice-calc

单元格内容：

Epson/Epson TM 系列耗材/H5000;Epson/Epson TM 系列耗材/H5200;Epson/Epson TM 系列耗材/U590;Epson/Epson TM 系列耗材/930;Epson/Epson TM 系列耗材/U925;Epson/Epson TM 系列耗材/U950

我需要使用以下规则提取结果单元格：第一个单词，任何分号之前的最后一个单词，重复，用分号替换逗号。可能有 4、27 或 0 个分号（或介于两者之间的任何数字）

上述字段将导致输出 Epson H5000、Epson H5200、Epson U590、Epson 930、Epson U925、Epson U950

如果结果值以某种方式按字母顺序排序，那么奖励积分和道具的数量会非常惊人

A 列的长度约为 28000 个值。B列的结果很好。

如果有人对从哪里开始解决这个问题有任何想法，我已经没有想法了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:10:37.743

我假设您不能轻松地以另一种格式获取数据。那将是最好的解决方案。

我还假设您的“单词”总是用斜杠分隔。在 Excel 中，我会为此任务编写一个 VBA 函数。像这样的东西：

```
Option Explicit

Function GetPrinterModels(r As Range) As String
    Dim arr() As String, arr2() As String
    arr = Split(r.Value, ";")

    Dim results() As String
    ReDim results(0 To UBound(arr))

    Dim i As Integer
    For i = 0 To UBound(arr)
        arr2 = Split(arr(i), "/")
        ' If words can also be separated by spaces:
        'arr(i) = Replace(arr(i), "/", " ")
        'arr2 = Split(arr(i), " ")
        results(i) = arr2(0) & " " & arr2(UBound(arr2))
    Next

    GetPrinterModels = Join(results, ", ")
End Function 
```

至于排序，你靠自己。您想在函数的最后一行`results`调用数组之前对其进行排序。`Join`遗憾的是，VBA 没有内置`Sort`函数，但网上有大量现成的排序函数。

# hash - 如何在 C# 中对 CFMX_COMPAT 进行哈希处理

> ID：10726248
> 
> 赞同：1
> 
> 时间：2012-05-23T19:03:40.827
> 
> 标签：hash, coldfusion, cryptography

现有的 Coldfusion 网站将转换为 dot net。

在 Coldfusion 代码中，密码使用 hash() 函数进行哈希处理，没有算法：

```
SomePassword = '#hash(fldPassword)#' 
```

我找到[了这个文件](http://cfdocs.org/hash)，说默认加密是

> CFMX_COMPAT：生成与 ColdFusion MX 和 ColdFusion MX 6.1（默认）生成的哈希字符串相同的哈希字符串。

有一些文章实际上告诉我如何解密。

> 据 Macromedia 称，ColdFusion 加密函数使用基于 XOR 的算法，该算法利用基于用户作为参数传递给函数的种子的伪随机 32 位密钥。生成的数据是 UU 编码的。
> 
> 您需要先对编码值进行 uudecode [http://www.eggheadcafe.com/printsear...asp?linkid=351](http://www.eggheadcafe.com/printsear...asp?linkid=351)
> 
> 然后使用加密的密钥对其进行异或。 [http://www.java2s.com/Code/CSharp/La...deamessage.htm](http://www.java2s.com/Code/CSharp/La...deamessage.htm)
> 
> 如果你没有钥匙 - 你在浪费你的时间。

但是，如何让它发挥作用？我不认为有任何关键。我能看到的只有`'#hash(fldPassword)#'`. 请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:44:16.830

如果我正确阅读了文档，CFMX_COMPAT 散列只是 MD5。

所以：

```
byte[] hash = MD5.Create().ComputeHash(fldPassword); 
```

验证您是否可以访问 ColdFusion 安装应该很容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T19:47:32.640

> 有一些文章实际上告诉我如何解密。

散列和加密不是一回事。加密可以反转。如果您有正确的密钥等，您可以恢复原始值。而散列是一种单程旅行。一旦散列，就无法恢复原始值。（嗯......理论上。一些较弱的散列算法已被破坏。）所以你不能“解密”一个散列值。但是您可以复制混淆的结果字符串。

> 我找到了这个文档，说默认加密是CFMX_COMPAT

实际上它是指默认*算法*。但是，我不太确定描述是否正确。（*编辑：正如 Rasmus 正确指出的那样，它确实说默认是 MD5*）但是，CF9/7 无论如何都默认为 MD5。即使算法是`CFMX_COMPAT`. 因此，无论哪种情况，C# 中的简单 MD5 散列都会给您相同的结果。

即这些都产生相同的结果，即`098F6BCD4621D373CADE4E832627B4F6`。

```
 #hash("test")#
    #hash("test", "cfmx_compat")#
    #hash("test", "md5")# 
```

# html - FRAMESET 中链接的 HTTP_REFERER 在不同的计算机上发送不同的值？

> ID：10726251
> 
> 赞同：2
> 
> 时间：2012-05-23T19:03:53.797
> 
> 标签：html, http-headers, frames

我有一个`<frameset>`包含两个`<frame>`标签：导航框架（A）和内容框架（B）

```
-------------------------
| | |
| | |
| | |
| 一个 | 乙|
| | |
| | |
| | |
-------------------------

```

```
 <FRAMESET rows="*" cols="130,*" border=0>
    <FRAME scrolling="no" name="navFrame" FrameBorder=0 src="navFrame.aspx">
    <FRAME src="" name="mainFrame"></FRAME>
  </FRAMESET> 
```

页面被调用`main.aspx`，而 A 面被调用`navFrame.aspx`。当我单击导航框架中的链接时，它会加载框架 B 中的内容。

B 的内容页面之一使用`Request.ServerVariables("HTTP_REFERER")`，但是此值`navFrame.aspx`在某些计算机和`main.aspx`其他计算机上。

两台计算机都使用了嵌入式网络浏览器，该浏览器是另一个软件产品的一部分（javascript 告诉我它的 IE7），所以我认为这不是浏览器版本的问题。

而且我不确定它是否重要，但内容页面是位于另一个域上的 https 页面，它使用外部 URL 来访问它。

什么决定了`HTTP_REFERER`框架窗口中的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:01:44.773

首先：*HTTP_REFERER* 不可靠。

该值取决于客户端（网络浏览器）向服务器发送的*引用标头。*由于它既可以被操纵，也可以被技术问题混合，因此不能被信任。例如，使用*引用者*保护表单将不起作用，因为垃圾邮件发送者可以操纵 GET 和 POST 值，伪造他们喜欢的任何引用者。

我最好的建议是：某些浏览器提供禁用发送 *HTTP_REFERER* 的选项，您可能想再看看您的 Web 浏览客户端（和/或您的应用程序*嵌入*的浏览客户端）的配置。

# android - 编辑文本背景

> ID：10726253
> 
> 赞同：0
> 
> 时间：2012-05-23T19:04:01.443
> 
> 标签：android, android-edittext

我有一张小尺寸的图片，想将背景设置为 EditText。我可以制作一张只在一个轴上拖动的图片，例如 x，而不会损失质量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:08:16.073

是的，您可以将其转换为 9-patch 图像并在图像上定义可拉伸区域。 [http://developer.android.com/guide/developing/tools/draw9patch.html](http://developer.android.com/guide/developing/tools/draw9patch.html)

# twitter-bootstrap - 禁用其中一种 Twitter Bootstrap 响应式布局

> ID：10726271
> 
> 赞同：16
> 
> 时间：2012-05-23T19:05:44.807
> 
> 标签：twitter-bootstrap

我想禁用其中一种响应式布局。无论第二小的布局在切换到移动视图之前是什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T20:02:21.230

如果您从 LESS 文件编译，这很容易。打开`responsive.less`并在“ `MEDIA QUERIES`”下注释掉或删除`@import`您不想要的任何布局的声明。例如，如果您不希望平板电脑成为普通桌面之一，代码将如下所示：

```
// MEDIA QUERIES
// ------------------

// Phones to portrait tablets and narrow desktops
@import "responsive-767px-max.less";

// Tablets to regular desktops
// @import "responsive-768px-979px.less"; // commented this out because I don't like it

// Large desktops
@import "responsive-1200px-min.less"; 
```

之后只需重新编译`bootstrap.less`，您就应该完成了。

另一方面，如果您没有编译`bootstrap.less`并`bootstrap-responsive.css`直接使用，则可以搜索特定设备的媒体查询并删除/注释掉该部分。

例如，移除纵向平板电脑看起来像（in `bootstrap-responsive.css`）：

```
/* some CSS code above this */

.hidden-desktop {
  display: none !important;
}

/* comment out the following rule entirely in order to disable it */
/*
@media (max-width: 767px) {
  .visible-phone {
    display: inherit !important;
  }
  .hidden-phone {
    display: none !important;
  }
  .hidden-desktop {
    display: inherit !important;
  }
  .visible-desktop {
    display: none !important;
  }
}*/ /* stop commenting out, we want everything below this */

@media (min-width: 768px) and (max-width: 979px) {
  .visible-tablet {
    display: inherit !important;
  }

/* More CSS code follows */ 
```

要找出哪个`@media`查询对应于哪个设备宽度，请查看[http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)；媒体查询与它们对应的设备大小一起在那里给出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T21:57:07.947

作为 spinarrow 使用 LESS 时执行此操作的一种改进，[将](https://stackoverflow.com/users/342886/spinningarrow)and 设置`@gridColumnWidth768`为`@gridGutterWidth768`匹配`@gridColumnWidth`，`@gridGutterWidth`如下所示：

```
@gridColumnWidth768: @gridColumnWidth;
@gridGutterWidth768: @gridGutterWidth; 
```

作为一项规则，我尽量不理会供应商文件，只在万不得已时才编辑它们。这使我无需编辑核心引导文件即可解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T18:37:07.517

*   在引导调用之后调用你的 CSS。
*   在您的 css 复制行中，跨 css 形成您想要的布局并将其放置在您的 css 中。
*   将媒体查询更改为这样的内容（最大宽度是您想要坚持的宽度）：

```
@media (max-width: 1200px) {
    .row {
        margin-left: -30px;
        *zoom: 1;
    }
    .row:before,
    .row:after {
        display: table;
        content: "";
        line-height: 0;
    }
    .row:after {
        clear: both;
    }
    [class*="span"] {
        float: left;
        margin-left: 30px;
    }
    .container,
    .navbar-static-top .container,
    .navbar-fixed-top .container,
    .navbar-fixed-bottom .container {
        width: 1170px;
    }
    .span12 {
        width: 1170px;
    }
    .span11 {
        width: 1070px;
    }
    .span10 {
        width: 970px;
    }
    .span9 {
        width: 870px;
    }
    .span8 {
        width: 770px;
    }
    .span7 {
        width: 670px;
    }
    .span6 {
        width: 570px;
    }
    .span5 {
        width: 470px;
    }
    .span4 {
        width: 370px;
    }
    .span3 {
        width: 270px;
    }
    .span2 {
        width: 170px;
    }
    .span1 {
        width: 70px;
    }
    .offset12 {
        margin-left: 1230px;
    }
    .offset11 {
        margin-left: 1130px;
    }
    .offset10 {
        margin-left: 1030px;
    }
    .offset9 {
        margin-left: 930px;
    }
    .offset8 {
        margin-left: 830px;
    }
    .offset7 {
        margin-left: 730px;
    }
    .offset6 {
        margin-left: 630px;
    }
    .offset5 {
        margin-left: 530px;
    }
    .offset4 {
        margin-left: 430px;
    }
    .offset3 {
        margin-left: 330px;
    }
    .offset2 {
        margin-left: 230px;
    }
    .offset1 {
        margin-left: 130px;
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-08T21:49:40.420

如果你不编译 LESS，我发现最好的方法是进入 bootstrap.css 并注释掉你不想激活的大小。CSS 组织得非常好，禁用其中一种尺寸似乎不会影响其他任何东西。

（当然，在更新 Bootstrap 时，您必须小心不要重新启用它们。）

# android - android seekbar thumb（scrubber control）按下时剪辑

> ID：10726273
> 
> 赞同：3
> 
> 时间：2012-05-23T19:05:54.500
> 
> 标签：android, custom-controls, offset, seekbar, clipping

我在使用自定义搜索栏拇指（又名洗涤器控件）时遇到问题。每当我按下它时，拇指就会被剪断，然后一旦我拖动它就会消失。我已经在搜索栏的右侧和左侧添加了填充以容纳末端的拇指。此图显示了在不同进展阶段和两端空闲时发生的情况：

![搜索栏拇指剪裁](../Images/76023f64920f547bb549267f385796f4.png)

我还尝试向搜索栏添加拇指偏移：`android:thumbOffset="0dp"`。结果是按下时不再剪裁，但现在擦洗器控件不会移动到任一侧栏的最末端。此图显示了带有 thumbOffset 的搜索栏：

![在此处输入图像描述](../Images/4416b889118b0568baa44ce7ba9b754e.png)

所有的scrubber 控件drawable 的大小都相同，因此当状态变为按下时，图像大小不会改变大小。是否有某种方法可以在按下时不进行剪辑并且仍然让擦洗器控件移动到栏的最末端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T17:04:09.333

尝试将`padding`AND your设置`thumbOffset`为拇指宽度的一半。即如果你的拇指宽度是 30，设置`padding="15dp"`和`thumbOffset="15dp"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:32:50.603

为 SeekBar 使用 PaddingLeft 和 PaddingRight 以及 thumbOffset 属性。

# regex - 如何在word中搜索句子的第一个单词

> ID：10726274
> 
> 赞同：1
> 
> 时间：2012-05-23T19:05:55.547
> 
> 标签：regex, ms-word, replace

我有以下脚本，它将找到一个句点后跟 2 个或更多空格，但我正在寻找的是能够找到一个句子的第一个单词，如果它是“医疗”，那么它会改变它。我希望利用这个脚本，但我已经可以判断它是否是段落的第一个单词，它会被遗漏，而且我不知道如何让它正确搜索“。医疗”

```
 With Selection.Find
    .ClearFormatting
    .Highlight = False
    .Replacement.ClearFormatting
    .Replacement.Highlight = True
    .Text = (\.)( {2,9})
    .Replacement.Text = "\1 "
    .Forward = True
    .Wrap = wdFindContinue
    .Format = True
    .MatchWildcards = True
    .Execute Replace:=wdReplaceAll
End With 
```

我最终在[链接](https://stackoverflow.com/questions/3096523/make-the-first-letter-bold-on-each-sentence-in-ms-word-document)上找到了另一个帖子并想出了这个：

```
 Dim i As Integer
Dim doc As Document
Set doc = ActiveDocument

For i = 1 To doc.Sentences.Count
    If doc.Sentences(i).Words(1) = "Medical " Then
        doc.Sentences(i).Words(1) = "Medical (needs removal) "
    End If
    If doc.Sentences(i).Words(1) = "Dental " Then
        doc.Sentences(i).Words(1) = "Dental (needs removal) "
    End If
    If doc.Sentences(i).Words(1) = "Life " Then
        doc.Sentences(i).Words(1) = "Life (needs removal) "
    End If
    If doc.Sentences(i).Words(1) = "Vision " Then
        doc.Sentences(i).Words(1) = "Vision (needs removal) "
    End If
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:14:52.757

这是该代码块的一个片段：

```
 .Text = (\. )( )+Medical
    .Replacement.Text = \1XX 
```

XX = 任何您想将“医疗”一词更改为的内容。

`(\. )`匹配一个句子的结尾。

`( )+`匹配无关的空格。

这应该既可以解决您的多个空间问题，也可以将 Medical 更改为您想要的任何内容。

*我没有测试过这个。请谨慎使用。*

# linux - Mono下无法加载RemObjects.InternetPack

> ID：10726276
> 
> 赞同：1
> 
> 时间：2012-05-23T19:06:04.967
> 
> 标签：linux, mono, delphi-prism, oxygene

我用 Delphi Prism 在 Windows 7 上编写了一个程序。我拿了可执行文件并尝试在单声道下的 Linux 上运行它。此时，单声道引发了以下错误。这是否意味着 RemObjects 组件仅适用于 windows 环境？如果不是，您如何解决此异常？

**无法加载文件或程序集“RemObjects.InternetPack，版本=2.0.47.845，Culture=neutral，PublicKeyToken=3df3cad1b7aa5098”或其依赖项之一。未处理的异常：System.TypeLoadException：发生类型加载异常。**

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T12:38:48.657

您需要`RemObjects InternetPack`在 Linux 机器上部署和注册。它不是默认运行时的一部分。

可以将其想象为`Delphi Win32`使用运行时包构建应用程序。当您将应用程序部署到其他机器时，您还必须部署运行时包。

部署`.NET`包是一个完全不同的问题（并不是真正的`Delphi`或`Prism`相关的）。您可能想先在这里搜索 SO，如果您没有找到现有答案，请发布一个新问题。

# random - 计算机可以是随机的吗？

> ID：10726286
> 
> 赞同：-2
> 
> 时间：2012-05-23T19:06:38.823
> 
> 标签：random, numbers, computer-science, theory

只是今天早些时候进入我脑海的一个随机想法..

是否有可能（使用我们今天拥有的技术）让计算机（没有人工帮助）随机选择 1 到 10 之间的数字（关键字是随机的）而不基于任何等式或公式（也不是基于时间/日期/等）

深思熟虑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:10:09.463

如果没有真正不切实际的真正专用硬件（例如盖革计数器），则并非如此。计算机使用[伪随机数生成器](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)来弥补这一点。对于大多数目的而言，这通常“足够好”。

然而，对于安全应用程序，需要[密码安全的伪随机数生成器](http://en.wikipedia.org/wiki/Pseudorandom_number_generator#Cryptographically_secure_pseudorandom_number_generators)（真是满嘴！）。这些仍然是伪随机的，但比简单的随机数生成器更难预测。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T19:10:40.347

请参阅有关硬件生成的随机数生成器的 wiki 文章...本质上是一个提供随机数据的物理过程，就像抛硬币一样，但要快得多。

[https://en.wikipedia.org/wiki/Hardware_random_number_generator](https://en.wikipedia.org/wiki/Hardware_random_number_generator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T19:17:34.930

> 选择一到十之间的数字（关键字是随机的），不基于任何方程式或公式（也不基于时间/日期/等）

这在最严格的意义上是不可能的。我认为这对你来说也是显而易见的。
拥有最好的随机生成器的 Linux 使用用户的击键加上其他变量和当前时间的组合来产生随机数。
但这也是“公式”的一种形式。

# c - 将 char** 传递给函数，不会改变它的值，还是这样？

> ID：10726287
> 
> 赞同：0
> 
> 时间：2012-05-23T19:06:42.777
> 
> 标签：c, linux, arrays, ubuntu

我将动态分配的变量传递给函数，从该函数返回后，当我在代码上运行输入时，其中一些输入会使程序崩溃。

正如你所看到的，我测试了`argv`数组，两次，一次在结束时`divide`，另一次在我返回之后`divide`。在第一次检查中，我得到了`argv`from index `0`to的所有值`argc` ，但在`2nd`检查中（从`divide`back into返回后`main`） index`0`使`for`循环崩溃。

所以很明显我做错了什么，知道什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:14:11.577

```
argv =(char**) realloc(argv, (current+1)*sizeof(char*)); 
```

这可能是罪魁祸首。调用`realloc()`可以分配一个新的（可能更大的）内存块，将旧块中的数据复制到该内存块中，然后释放旧块。问题不在于您要更改`argv`in的值，`main()`而在于您*没有*更改它。您正在释放它指向的块，而无需更新 main()`argv`以指向新块。

# javascript - 在 Javascript 中预加载图像

> ID：10726289
> 
> 赞同：3
> 
> 时间：2012-05-23T19:06:54.650
> 
> 标签：javascript, image, web, gallery, photos

我创建了一个简单的照片库查看器，我想在后台预加载图像，然后在完成后运行一个函数。

我的问题是，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:08:54.647

```
var image = new Image();
image.src = "http://foo.com/myimage.jpg";

//if you have a div on the page that's waiting for this image...
var div = getElementById("imageWrapperDiv");

//you can set it on the image object as the item to draw into...
image.myDiv = div;

image.onload = function(){
  //do whatever you're going to do to display the image

  //so in this example, because I have set this objects myDiv property to a div on the page
 // I can then just populate that div with an img tag.
 //it's not the most elegant solution, but you get the idea and can improve upon it easily
  this.myDiv.innerHTML = "<img src='" +  this.src  +"'>";
} 
```

一旦图像加载，它就在浏览器的缓存中，因此，如果您使用 src 属性，您可以在页面上的任何位置绘制它，它会立即显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-27T15:12:53.797

要预加载图像，请使用`<link>`标签并添加`preload`到`rel`-attribute：

`<link rel=preload href=path/to/the/image.jpg as=image>`

或者在Javascript中：

```
var preImg = document.createElement('link')
preImg.href = 'path/to/image.jpg'
preImg.rel = 'preload'
preImg.as = 'image'
document.head.appendChild(preImg) 
```

> 元素的 rel 属性的 preload 值允许您在 HTML 中编写声明性获取请求，指定页面加载后很快需要的资源，因此您希望在页面加载生命周期的早期开始预加载，在浏览器的主要渲染机制启动。这确保了它们更早可用，并且不太可能阻塞页面的第一次渲染，从而提高性能。

文档：[https ://developer.mozilla.org/en-US/docs/Web/HTML/Preloading_content](https://developer.mozilla.org/en-US/docs/Web/HTML/Preloading_content)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T19:11:58.467

与典型的 Javascript 函数相比，我喜欢这种 CSS 方法：

把它放在你的 CSS 文件中：

```
div#preload { display: none; } 
```

将其放在 HTML 文档的底部：

```
<div id="preload">
   <img src="http://domain.tld/image-01.png" width="1" height="1" alt="Image 01" />
   <img src="http://domain.tld/image-02.png" width="1" height="1" alt="Image 02" />
   <img src="http://domain.tld/image-03.png" width="1" height="1" alt="Image 03" />
</div> 
```

此方法可确保您的图像已预加载并可用于文档中的其他位置。请记住使用与预加载图像相同的路径。

[http://perishablepress.com/pure-css-better-image-preloading-without-javascript/](http://perishablepress.com/pure-css-better-image-preloading-without-javascript/)

# playframework - 是否有更好的 Play 单元测试运行器可以让您运行单独的测试？

> ID：10726294
> 
> 赞同：4
> 
> 时间：2012-05-23T19:07:46.880
> 
> 标签：playframework, playframework-1.x

有没有办法在 Play 1.x 中运行单个测试（不仅仅是测试类）？

捆绑的测试运行器只允许您选择测试类。

# objective-c - Xcode 4.3.2 中的 UINavigationBar 和 UITableView

> ID：10726297
> 
> 赞同：-1
> 
> 时间：2012-05-23T19:08:15.117
> 
> 标签：objective-c, ios, uitableview, uinavigationcontroller, uitabbarcontroller

您是否注意到在创建 UITableView 时不再设置 UINavigationBar，即使在给它一个标题或按钮之后也是如此？

现在我对如何在我的 UITableView 上放置一个导航栏感到很生气。似乎真的不可能。我试图向我的 tableView 添加一个带有导航栏的子视图，但似乎毫无价值，因为当我向下滚动时，导航栏会向下滚动并且它不应该向下滚动。

关于如何实施它的任何想法？

**编辑**

好吧，和往常一样，我继续使用 File -> New -> File.. -> UITableView。然后我设置了一些代码，当我写的时候

```
self.navigationItem.title = @"MyTitle";
self.navigationController.navigationBar.barStyle = UIBarStyleBlackOpaque; 
```

并尝试在模拟器上进行测试，没有出现导航栏。

我的初始化代码：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = @"TabTitle";
        self.tabBarItem.image = [UIImage imageNamed:@"img.png"];
        self.view.backgroundColor = [UIColor scrollViewTexturedBackgroundColor];

    }
    return self;
} 
```

我无法解释为什么它不再出现。我还尝试创建一个新项目并从出现导航栏的项目中导入我的类，但那里的结果也相同。

**编辑2***

该应用程序是一个基于选项卡的应用程序。这是从用于设置 tabBar 的 App 委托中获取的代码。

```
 UIViewController *viewController1, *viewController4;
    UITableViewController *viewController2, *viewController3;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        viewController1 = [[FirstViewController alloc] initWithNibName:@"First_iPhone" bundle:nil];
        viewController2 = [[Tips alloc] initWithNibName:@"Table" bundle:nil];
        viewController3 = [[Favorites alloc] initWithNibName:@"Test_iPhone" bundle:nil];
        viewController4 = [[SecondViewController alloc] initWithNibName:@"Second_iPhone" bundle:nil];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:58:26.277

您正在初始化一个`UITabBarController`并将 4 设置`UIViewControllers`为相应的`UITabbarViewControllers`. 由于其中两个是正常的`UIViewControntroller`，两个是正常的，`UITableViewController`所以不能有导航栏。您必须将 viewController 加载到您希望导航栏形成的位置`UINavigationController`。正确的方法是（假设 vc3 是您想要导航栏的地方）：

```
UIViewController *viewController1, *viewController4;
UITableViewController *viewController2, viewController3;
UINavigationController *vc3NavController;
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    viewController1 = [[FirstViewController alloc] initWithNibName:@"First_iPhone" bundle:nil];
    viewController2 = [[Tips alloc] initWithNibName:@"Table" bundle:nil];
    viewController3 = [[Favorites alloc] initWithNibName:@"Test_iPhone" bundle:nil];
    vc3NavController = [[UINavigationController alloc] initWithRootViewController:viewController3];        
    viewController4 = [[SecondViewController alloc] initWithNibName:@"Second_iPhone" bundle:nil];
} 
```

然后加载 vc3NavController 而不是 viewController3 作为相应的选项卡。所以你有： UITabBarController -> UINavigationController -> YourViewController

也许[创建导航界面](https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html#//apple_ref/doc/uid/TP40011313-CH2-SW27)也会对您有所帮助。

# jquery - jQuery CSS 行为

> ID：10726299
> 
> 赞同：0
> 
> 时间：2012-05-23T19:08:21.310
> 
> 标签：jquery, css, overflow

对以下代码有一点麻烦。本质上我有一个高度为 40px 的 div 容器，当我点击它时，它会平滑地增长到 320px - 这很好用，但是当 div 增长到全高时，我希望溢出属性从它的静态状态改变隐藏的，可见的。

```
$(document).ready(function() {
    $('#join').click(function() {
        $('#join').animate({ height: "320px" }, 500);
        $('#join').css('overflow', 'visible');
    })
});​ 
```

它确实可以看到几秒钟，然后消失，我也希望它在 div 长到全高后发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T19:10:34.967

在`animate`回调函数中应用样式。见下文，

```
$(this).animate({height:"320px"}, 500, function () { //this <- #join
   $(this).css('overflow', 'visible');
}); 
```

**完整代码：**

```
$(document).ready(function() {
   $('#join').click(function() {
       $(this).animate({height:"320px"}, 500, function () {
            $(this).css('overflow', 'visible');
       });
   });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T19:10:31.493

然后将其作为回调传递：

```
$(this).animate({height:"320px"}, 500, function(){
    $(this).css('overflow', 'visible')
}); 
```

**完整代码：**

```
$(document).ready(function() {
    $('#join').click(function() {
        $(this).animate({
            height: "320px"
        }, 500, function() {
            $(this).css('overflow', 'visible');
        });
    });
});​ 
```

# javascript - Require 和 Backbone - 动态加载 jQuery mobile

> ID：10726302
> 
> 赞同：1
> 
> 时间：2012-05-23T19:08:30.147
> 
> 标签：javascript, backbone.js, requirejs

我正在开发一个使用 Backbone 和 RequireJS（使用 Backbone 样板）的应用程序。

我想做的是检测用户是否在移动设备上（当前使用 Modernizr 来检查触摸），如果是，**则**加载 jQuery Mobile 的 css 和 js，并将其应用于所有模块及其模板。

我不确定使用 RequireJS 的最佳方法。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:00:37.967

编辑：重新阅读您的问题后，我不确定这是您的要求。对不起，噪音。

我目前处于类似情况。您可以在 Backbone 的 View/Router/Model/Etc 原型上设置属性，它们将向下过滤链。因此，例如：

```
//Assuming we're in 'mobile' mode, you'd do this in whatever code gets loaded.
Backbone.View.prototype.useMobileView = true; 
```

然后，如果 this.useMobileView == true，您可以做任何必要的事情。例如：

```
ResponsiveView = Backbone.View.extend({

getTemplate: function () {
    if(this.useMobileView) {
        return this.mobileTemplate;
    } else {
        return this.template;
    }
}

});

SomeView = ResponsiveView.extend({

    render: function () {
        var template = this.getTemplate();
        //do stuff
    }

}); 
```

# php - 如何在 cakephp 中获取 $_SESSION 值

> ID：10726305
> 
> 赞同：5
> 
> 时间：2012-05-23T19:08:42.720
> 
> 标签：php, session, cakephp

我正在从位于**example.com/corephp/**的核心 php 应用程序设置用户会话，现在我想将此用户重定向到cakephp 中的**example.com**（主站点）。

如何保留从核心 php 应用程序到 cakephp 应用程序的用户会话？

我从核心 php 应用程序中尝试设置`$_SESSION['user'] = someone`并`$_SESSION['token'] = token`尝试从 cakephp 中检索该值，但它没有用。

我试图用谷歌搜索，但没有合适的答案。

提前致谢。

- - - - - - - - - - - 编辑

我试过添加 session_name('CAKEPHP'); 到核心 php 应用程序。以及试图将我的蛋糕应用程序的安全级别从中降低到低。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:15:59.323

没有测试，但试试这个。

在您的 corephp 应用程序中：

```
$_SESSION['Auth']['User'] = $someone; 
```

我的理由是它会设置 $_SESSION，但也许 CakePHP 出于某种原因无法识别它。所以我们使用 Cake 的 API 正确设置它：

在 CakePHP 中

```
$this->Session->write('Auth.User', $_SESSION['Auth']['User']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T23:06:20.947

始终使用会话包装器。这就是他们的目的

在控制器中：http: [//book.cakephp.org/2.0/en/controllers/components.html#using-components](http://book.cakephp.org/2.0/en/controllers/components.html#using-components)

在视图中：http: [//book.cakephp.org/2.0/en/core-libraries/helpers/session.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/session.html)

其他地方： [http ://book.cakephp.org/2.0/en/development/sessions.html#reading-writing-session-data](http://book.cakephp.org/2.0/en/development/sessions.html#reading-writing-session-data)

永远不要使用 $_SESSION 访问它，你应该没问题（cake 会为你启动会话并在后台处理很多事情）。

如果您共享会话，请确保您同样设置会话名称。两者也应该使用相同的会话类型（可能是 php）。

# javascript - 在 JSF 登录对话框中使用 jQuery/Javascript 重置密码

> ID：10726307
> 
> 赞同：1
> 
> 时间：2012-05-23T19:08:46.453
> 
> 标签：javascript, jquery, jsf

我需要有关如何使用 jQuery / Javascript 在使用`JSF`+`PrimeFaces`对话框登录错误后重置密码的建议。

```
<p:dialog header="Login" id="loginDlgId" widgetVar="loginDlg" >
    <h:form id="loginForm">
        <h:panelGrid columns="2">
            <h:outputLabel for="username" value="Username:" />
            <p:inputText value="#{loginBean.username}" id="username" required="true" label="username" />
            <h:outputLabel for="password" value="Password:" />
            <h:inputSecret value="#{loginBean.password}" id="password" required="true" label="password" />
            <p:commandButton value="Login" id="loginDlgButton" update=":loginButtonForm" 
                                action="#{loginBean.login}" 
                                oncomplete="handleLoginRequest(xhr, status, args)"/>
        </h:panelGrid>
    </h:form>
</p:dialog>
<script type="text/javascript">
    function handleLoginRequest(xhr, status, args) {
        if(args.validationFailed || !args.loggedIn) {
            jQuery('#loginDlgId').effect("shake", { times:3 }, 100);
            if (!args.validationFailed) {
                $('#loginForm:password').html('');  // this doesn't have any effect
                jQuery('#loginForm:password').text('');   // this doesnt' have any effect, too
            }
        }
    }
</script> 
```

如您所见，在 Javascript 函数中，`handleLoginRequest`我做了 2 次努力来重置密码文本，但没有结果（而且似乎也没有错误）。此外，任何在这种情况下使用 jQuery 的链接/参考，都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:15:57.000

`\\`在前面加上`:`

您的选择器应如下所示`'#loginForm\\:password'`

INMO`'#loginForm\\:password'`比`"#loginForm :password"`（但这是我个人的想法）更有效（更快）

**解释**

> :（冒号）的存在会导致 JQuery 出现问题。因此，我们需要在冒号前使用两个 \ 字符来转义 :（冒号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:09:30.717

`#loginForm`在选择器之间和之间放置一个空格`:password`，并使用[`val`](http://api.jquery.com/val/)方法重置密码值：

```
$("#loginForm :password").val(""); 
```

选择器中的空格实际上是`:password`在`#loginForm`.

# spotify - 使用 cocoalibspotify for iOS 获取艺术家列表

> ID：10726308
> 
> 赞同：1
> 
> 时间：2012-05-23T19:08:51.073
> 
> 标签：spotify, cocoalibspotify-2.0

我想快速获得用户“图书馆”或播放列表中的艺术家姓名列表。有没有一种简单/异步的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T20:21:49.140

看看包含在 CocoaLibSpotify 中的示例项目“Guess the Intro”。该项目中的方法`waitAndFillTrackPool`显示了如何获取用户播放列表中所有曲目的列表。

获得该列表后，您可以执行以下操作从他们那里获取艺术家，将他们放在一组以减少重复项，然后等到他们加载完毕。

```
NSArray *artists = [theTrackPool valueForKeyPath:@"@unionOfArrays.artists"];
NSArray *uniqueArtists = [[NSSet setWithArray:artists] allObjects];

[SPAsyncLoading waitUntilLoaded:uniqueArtists then:^(NSArray *loadedArtists) {
    // Artists are loaded!
    // Log a list of artist names...
    NSLog(@"%@", [loadedArtists valueForKey:@"name"]);
}]; 
```

# android - 在我删除一些行后向表中插入一个新行。sqlite

> ID：10726309
> 
> 赞同：0
> 
> 时间：2012-05-23T19:08:53.433
> 
> 标签：android, database, sqlite

我很确定这是一个已知问题，并且有一些关于此的信息，但我找不到正确的答案。

基本上，我有一个 SQLite 表，我希望用户能够在他认为合适的时候删除和插入行。用户可以插入行并删除它们，但问题是 - 如果用户删除，让我们说第 3 行（位置 = 2），那么在删除之后，他将无法在那里插入新行。我收到错误 19 - #define SQLITE_CONSTRAINT 19 /* 由于违反约束而中止 */

那么，我怎样才能删除一行，然后将行重新排列为连续的而没有任何间隙？否则，解决此问题的最佳方法是什么？

这是我的代码：

```
package android.GUI;

import android.GUI.R.string;

public class DBAdapter {

    public static final String KEY_ROWID = "_id";
    public static final String KEY_DATE = "Date";
    public static final String KEY_DAY = "Day";
    public static final String KEY_HOURS = "Hours";
    public static final String KEY_START = "Start";
    public static final String KEY_END = "End";
    public static final String KEY_TOTAL_HOURS = "TotalH";
    public static final String KEY_TOTAL_MINUTES = "TotalM";

    private static final String TAG = "DBAdapter";
    int dbSumHours;
    int dbSumMinutes;

    private static final String DATABASE_NAME = "shifts6";
    private static final String DATABASE_TABLE = "newtimeDate6";
    private static final int DATABASE_VERSION = 2;

    private static final String DATABASE_CREATE = "create table newtimeDate6 (_id integer primary key autoincrement, "
            + "Date text not null, Hours text not null, TotalH text not null, TotalM text not null, Day text not null, Start text not null, End text not null )";

    private final Context context;

    private static DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx) {

        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    // opens the database
    public DBAdapter open() throws SQLException {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    // closes the database
    public static void close() {
        DBHelper.close();

    }

    // insert a Shift into the database
    public long insertTitle(String Date, String Hour, int TotalH, int TotalM,
            String Day, int ID, String Start, String End) {

        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_DATE, Date);
        initialValues.put(KEY_ROWID, ID);
        initialValues.put(KEY_HOURS, Hour);
        initialValues.put(KEY_TOTAL_HOURS, TotalH);
        initialValues.put(KEY_TOTAL_MINUTES, TotalM);
        initialValues.put(KEY_DAY, Day);
        initialValues.put(KEY_START, Start);
        initialValues.put(KEY_END, End);

        return db.insert(DATABASE_TABLE, null, initialValues);

    }

    public void addToDBTotal(String Date, String Hour, int TotalH, int TotalM,
            String Day, int ID, String Start, String End) {
        dbSumHours = dbSumHours + TotalH;
        dbSumMinutes = dbSumMinutes + TotalM;
        String hour = Hour;
        String date = Date;

        long id = insertTitle(Date, Hour, dbSumHours, dbSumMinutes, Day, ID,
                Start, End);

    }

    // deletes a particular Shifts
    public boolean deleteTitle(long rowId) {
        Boolean deleted = db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;

        return deleted;

    }

    public void deleteAll() {
        this.open();
        this.db.delete(DATABASE_TABLE, null, null);
        Main.C = 1;
    }

    // retrivs all titles
    public Cursor getAllShifts() {

        return db.query(DATABASE_TABLE, new String[] { KEY_ROWID, KEY_DATE,
                KEY_HOURS, KEY_DAY, KEY_START, KEY_END }, null, null, null,
                null, null);

    }

    public Cursor getSumHours() {

        return db.query(DATABASE_TABLE, new String[] { KEY_TOTAL_MINUTES, KEY_TOTAL_HOURS },
                null, null, null, null, null);

    }

    public static class DatabaseHelper extends SQLiteOpenHelper {

        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(DATABASE_CREATE);

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            Log.w(TAG, "Upgrading database from version " + oldVersion + "to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS shifts");
            onCreate(db);

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:23:10.850

您必须关闭自动增量，然后自己管理行和行 ID 号。删除后，您必须读出其后的每一行，将其删除并重新插入前一行，重复直到结束。

现在，为什么没有差距如此重要？

处理它的最好方法是不这样做。它的额外周期（快乐生活）并没有给你带来任何好处。

# grails - 在 Grails 中使用 HTTP 状态代码呈现 JSON 的简单方法

> ID：10726318
> 
> 赞同：22
> 
> 时间：2012-05-23T19:09:36.157
> 
> 标签：grails, groovy

有没有明确`"text/json"`指定的速记方法？

```
def remoteError = {     
  render( status: 500, contentType: "text/json"){
      error( exception: "a remote exception occurred")
  }
} 
```

我尝试使用`as JSON`...没有返回内容，但状态码是正确的...

```
render( status: 500, exception: params.exception) as JSON 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-23T20:25:06.210

If you use a converter parameter to [render](http://grails.org/doc/latest/ref/Controllers/render.html) then you cannot specify any other parameter such as status like you normally would when using gsp views. You can however set the response status prior to calling render:

```
response.status = 500
render([error: 'an error occurred'] as JSON) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-14T01:33:22.287

```
render(status:500,text:(errors as JSON).toString(),contentType: 'application/json') 
```

# apache - 如何让 mod_rewrite 删除文件扩展名和重定向某些 URL？

> ID：10726320
> 
> 赞同：0
> 
> 时间：2012-05-23T19:09:44.677
> 
> 标签：apache, .htaccess, mod-rewrite

所以我试图让 mod_rewrite 做一些不同的事情，但我并不完全同意它。我想：

1.  从 URL 中删除文件扩展名（在本例中为 .shtml）
2.  像这样重写某些 URL：

    ```
    /dashboard       -> /ui/dashboard/index.shtml
    /dashboard/      -> /ui/dashboard/index.shtml
    /dashboard/list  -> /ui/dashboard/list.shtml
    /dashboard/list/ -> /ui/dashboard/list.shtml
    /workspace       -> /ui/workspace/index.shtml
    /workspace/      -> /ui/workspace/index.shtml
    /account/manage  -> /ui/account/manage.shtml
    /account/manage/ -> /ui/account/manage.shtml 
    ```

3.  添加或删除尾部斜杠（我不在乎，只要它是一致的）

我目前拥有的东西让我完成了大约 90% 的路程。在我的 .htaccess 文件中，我有以下内容：

```
DirectoryIndex index.shtml index.html index.htm

<IfModule mod_rewrite.c>

  Options +FollowSymlinks
  RewriteEngine On
  RewriteBase /

  # Get rid of the /ui/ in the URLs
  RewriteRule ^(account|workspace|dashboard)([a-zA-Z0-9\-_\.\/]+)?$ /ui/$1$2 [NC,L]

  # Add the trailing slash
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/|#(.*))$
  RewriteRule ^(.*)$ $1/ [R=301,L]

  # Remove the shtml extension
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME}.shtml -f
  RewriteRule ^([^\.]+)/$ $1\.shtml

</IfModule> 
```

现在我遇到的问题是双重的：

首先，如果我尝试访问上面第 2 步中列出的目录中列出的索引页面之一，只要我使用尾部斜杠，就可以，但如果我省略尾部斜杠，则 URL 会错误地重写（页面仍然加载，但是）。例如

```
/dashboard/   remains /dashboard/ in the address bar.
/dashboard    rewrites to /ui/dashboard/ in the address bar. 
```

如何让这些 index.shtml 页面保持地址栏一致？

其次，当我尝试访问其中一个重写目录中的目录索引以外的页面时，并且我包含一个尾部斜杠，它会给我一个 404 错误。例如：

```
/dashboard/list/ 
```

抛出 404 错误：

```
The requested URL /ui/dashboard/list.shtml/ was not found on this server. 
```

非常感谢您提供的任何帮助以使其正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:00:13.660

所以我想出了一种适合我需要的方法。这是我想出的 .htaccess ，内联评论：

```
# Match URLs that aren't a file
RewriteCond %{REQUEST_FILENAME} !-f

# nor a directory
RewriteCond %{REQUEST_FILENAME} !-d

# if it's the index page of the directory we want, show that and go no further
RewriteRule ^(account|workspace|dashboard)/?$ /ui/$1/index.shtml [L]

# If we've gotten here, we're dealing with something other than the directory index.
# Let's remove the trailing slash internally
# This takes care of my second issue in my original question
RewriteRule ^(.*)/$ $1 [L]

# Do the rewrite for the the non-directory-index files. 
RewriteRule ^(account|workspace|dashboard)([a-zA-Z0-9\-_\.\/]+)?$ /ui/$1$2 [L] 
```

不确定这是否是最有效的方法，但它可以满足我的需求。以为我会在这里分享它，以防它帮助其他人。

# makefile - 如何确保目标在生成文件中的所有其他构建规则之前运行？

> ID：10726321
> 
> 赞同：8
> 
> 时间：2012-05-23T19:09:46.610
> 
> 标签：makefile

我有一个 C++ 项目，其中包含所有其他 C++ 文件所依赖的生成文件。我试图在任何其他编译开始之前强制生成和编译该文件。通常它就像将该文件放在`all:`目标中一样简单，但复杂的是我的 Makefile 也是由构建系统生成的，我只能将片段附加到 Makefile，而不是一般编辑它。

那么，有没有办法通过依赖或其他方式强制生成的文件目标首先运行？我想过使用这样的东西：

```
cpp_files := $(wildcard src/*.cpp)
$(cpp_files): generated_file.cpp
generated_file.cpp:
    # generate the file here 
```

但这似乎不起作用。作为参考，我的源目录结构是这样的，所以我需要递归收集cpp文件：

```
src/
|---file1.cpp
|---file2.cpp
|---subdir1/
    |---file3.cpp

gen/
|---generated_file.cpp 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-23T20:47:35.747

如果您确定这确实是您想要的，这里有一种方法：为一个虚拟文件制定一个规则，makefile 将`include`.

```
.PHONY: dummy
dummy:
    # generate the file here

-include dummy 
```

无论您指定什么目标，Make 都会首先运行`dummy`规则，然后自行重启。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T19:41:11.417

实际上，其他`cpp`文件不依赖于生成的文件（就 Make 规则而言）。依赖关系图仍然如下所示：

```
program
 |
 ^- file1.o
 |   ^- file1.c
 |
 ^- file2.o
 |   ^- file2.c
 |
 ^- generated_file.o
     ^- generated_file.c
         ^- <generator prerequisites> 
```

您的源文件只能依赖于某种生成的头文件（如果它是`#include`由这些源生成的）。

如果您只需要生成一个`cpp`文件，那么以下 makefile 就足够了：

```
srcs := $(wildcard src/*.cpp src/*/*.cpp)

gen_file := gen/generated_file.cpp
srcs += $(gen_file)

objs := $(srcs:.cpp=.o)

.PHONY : all
all : program

program : $(objs)
    @$(LD) ...

%.o : %.c
    @$(CC) ...

$(gen_file) :
    # generate the file here 
```

## UPD。

基于[Beta 的回答](https://stackoverflow.com/a/10727593/545027)进行了一点改进。

```
-include generator-task
.PHONY : generator-task

generator-task : $(gen_files)

$(gen_files) : $(gen_prerequisites)
    # generate the file here 
```

而不是在每次调用 Make 时运行生成器，这只会在其先决条件之一发生变化时重新生成文件。

# sql - 使用 Rails 中的连接表进行 SQL 连接

> ID：10726322
> 
> 赞同：0
> 
> 时间：2012-05-23T19:09:47.077
> 
> 标签：sql, postgresql, join, jointable

所以，我不确定为这些表进行连接的最佳方法是什么。我想使用 JOIN，因为我相信它比将所有三个表都放在 FROM 上要快。所以，如果我有三张桌子......

```
Table1
--id
--data

Table2
--id
--data

Table1_Table2
--table1_id
--table2_id 
```

如何使用连接表对这些数据进行连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:19:04.820

在子句中提及所有表`FROM`也是一种连接，隐式连接。不建议使用它，因为它可能会导致所涉及的表的笛卡尔积，以防您忘记在`WHERE`子句中添加谓词。

查看[Wikipedia JOIN 文章](http://en.wikipedia.org/wiki/Join_%28SQL%29)以及Jeff Atwood 撰写的关于连接的这篇[非常不错的博文。](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

我认为您对`INNER JOIN`表格之间的关系感兴趣，尽管存在其他变体。试试这个：

```
SELECT t1.*, t2.*
  FROM Table1 t1
  INNER JOIN Table1_Table2 tt ON t1.id = tt.table1_id
  INNER JOIN Table2 t2 ON t2.id = tt.table2_id; 
```

我从选择列表中跳过了 Table1_Table2 列，因为那里没有什么特别之处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:25:45.830

虽然上述解决方案有效，但您可能想尝试一下 rails-way 解决方案

由于您需要一个仅包含参与表的主键的连接表，因此您可以循环进入[has_and_belongs_to_many](http://railscasts.com/episodes/47-two-many-to-many)关联。它的作用与幕后的 SQL 查询相同，是一种更简洁的解决方案。如果您想向连接表添加更多列，您还可以**通过**关联（也在链接的 railscasts 中解释）查看has_many。

# c - 可以分解 md5 以跨多个内核/线程运行吗？

> ID：10726325
> 
> 赞同：12
> 
> 时间：2012-05-23T19:09:59.443
> 
> 标签：c, md5

在计算大文件的 md5 和时，我看到一个 cpu 核心无论花费多长时间都跳到 100%，而其他所有核心都处于空闲状态。

我对 md5 的初步理解是整个过程是完全线性的，其中值依赖于之前读取的所有值，我们无法使其成为多线程。这是真的？

或者有没有办法将文件分成多个部分，使用多核计算多个部分的*<something> ，然后将这些**<something>*值组合到最终的 md5 中？

我们用来计算 md5sum 的库是[http://libmd5-rfc.sourceforge.net/](http://libmd5-rfc.sourceforge.net/)，但如果可以跨多个核心打破 md5sum 以更快地完成，我会切换到另一个库。

（注意：改成 md5 以外的东西不是问题，也不能因为这个接口的其他封闭系统而做。这个问题也不是关于使用 md5 的安全性的问题。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T19:23:19.297

不，您不能在文件级别将其拆分。MD5 在遍历数据时保持一个状态。

# haskell - Haskell - 将文本文件导入列表类型

> ID：10726328
> 
> 赞同：0
> 
> 时间：2012-05-23T19:10:05.037
> 
> 标签：haskell, file-io

我是haskell的初学者。我有一个`.txt`格式如下的文件：

```
Company A, 100, 1000 
```

我需要将每一行导入到一种类型的列表中：

```
type GerCred = [(String, Int, Int)] 
```

我怎么做？

**更新**

这是我到目前为止所尝试的：

```
type GerCred = [(String,Int,Int)]
type GerCarb = [(String,Int)]

readGerCredList :: File -> IO GerCred
readGerCredList fname = do contents <- readFile fname return(read contents) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:43:43.360

把问题分解成小块。

首先，弄清楚如何将文件读入一个大字符串（提示，寻找返回“IO String”的东西）

然后弄清楚如何获取该字符串并将其拆分为行（提示：行）。

然后弄清楚如何获取每一行并将其拆分为字段（提示：span，stripPrefix）

然后弄清楚如何将每个字段转换为您需要的类型（提示：读取）。

然后弄清楚如何将它们放在一起（提示：地图）

不要忘记字符串只是一个 [Char]。

保罗。

# android - 没有收到从我的服务到我的活动的广播

> ID：10726330
> 
> 赞同：2
> 
> 时间：2012-05-23T19:10:10.753
> 
> 标签：android, service, broadcastreceiver

我查看了许多关于从服务向活动发送消息的帖子，但我无法让它发挥作用。我的接收器永远不会被调用。如果 Activity 不在前台，这有关系吗？

这是我的场景 - 我将 Web 服务器作为服务运行。当网络服务器收到带有播放列表链接的 URL 时，我需要向充当媒体播放器的我的 Activity 发送一条消息。媒体播放器将读取播放列表并开始按顺序播放歌曲、视频等。

我不希望该服务启动媒体播放器活动的新实例，因为有时它可能会发送快进或暂停等命令。

从我的网络服务器服务：

```
private void sendMessage() {

  Log.d("juice NonoHTTPD sender", "Sending message from Hub Web Server to Hub Player");

  Intent intent = new Intent();
  intent.putExtra(HubPlayer.ACTIVITY_PARAM_HOST, sAppHost);
  intent.putExtra(HubPlayer.ACTIVITY_PARAM_PORT, sAppPort);
  intent.putExtra(HubPlayer.ACTIVITY_PARAM_TYPE, sAppType);
  intent.putExtra(HubPlayer.ACTIVITY_PARAM_URL, sAppPath);    
  intent.setAction("com.jigawattlabs.hubplayer.play");
  appContext.sendBroadcast(intent);
} 
```

从我的活动：

```
public class HubPlayer extends Activity implements
OnBufferingUpdateListener, OnCompletionListener,
OnPreparedListener, OnVideoSizeChangedListener, SurfaceHolder.Callback 
{
private IntentFilter intentFilter = new IntentFilter("com.jigawattlabs.hubplayer.play");

MyBroadcastReceiver mReceiver = new MyBroadcastReceiver();

@Override
public void onCreate(Bundle bundle) {
    super.onCreate(bundle);

    setContentView(R.layout.mediaplayer_2);

    registerReceiver(mReceiver , intentFilter);

}

public class MyBroadcastReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        extras = intent.getExtras();

        sHost = extras.getString(ACTIVITY_PARAM_HOST);
        sPort = extras.getString(ACTIVITY_PARAM_PORT);
        sType = extras.getString(ACTIVITY_PARAM_TYPE);
        sXMLURL = extras.getString(ACTIVITY_PARAM_URL);

        DebugMsg("received broadcast in MyBroadcastReceiver.");
        processInputRequest();
    }
}
} 
```

尽管似乎没有必要将其放入清单中，因为我在代码中注册了 BroadcastReceiver，但我还添加了一个意图过滤器：

```
 <activity android:label="Media Hub Player" android:launchMode="singleTask"
        android:screenOrientation="unspecified"
        android:name=".HubPlayer" >
        <intent-filter>
            <action android:name="com.jigawattlabs.hubplayer.play" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>            
    </activity> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:11:00.240

好的，我有一个解决方法，但我希望有更好的方法。这是我所做的

*   如果服务需要向活动发送消息，它会检查活动是否正在运行
*   如果活动正在运行，它会像上面一样执行 sendBroadcast
*   如果活动没有运行，我会执行 StartActivity 并传递与 sendBroadcast 相同的信息
*   从活动中，我从已注册的 BroadcastReceiver 或从 onResume 上传递的意图（如果调用 StartActivity）中获取意图。

这是检查活动是否正在运行的代码

```
public boolean isHubRunning() 
{ 
    boolean isServiceFound = false;

    ActivityManager activityManager = (ActivityManager)appContext.getSystemService (Context.ACTIVITY_SERVICE); 
    List<RunningTaskInfo> services = activityManager.getRunningTasks(Integer.MAX_VALUE); 
    isServiceFound = false; 
    for (int i = 0; i < services.size(); i++) 
    { 
        //DebugMsg(services.get(i).topActivity.toString());
        if (services.get(i).topActivity.toString().contains("juicemediahub.HubPlayer")) 
        {
            isServiceFound = true;
        }
    } 
    DebugMsg("Hub Player Running = " + String.valueOf(isServiceFound));
    return isServiceFound; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T07:26:20.807

如果您想始终获得意图，您应该给我们一个接收者。在您的清单中定义它，它将始终捕获您的广播，活动是否正在运行。就像是：

```
<receiver android:name=".StartOnUser">
    <intent-filter>
        <action android:name="android.intent.action.USER_PRESENT" />
    <category android:name="android.intent.category.HOME" />
    </intent-filter>
</receiver> 
```

# highcharts - 将 Ember 绑定与 highcharts 集成

> ID：10726339
> 
> 赞同：3
> 
> 时间：2012-05-23T19:10:30.440
> 
> 标签：highcharts, ember.js

我有一个用 ember.js 编写的 javascript 应用程序，并希望将包含各种统计数据的日期数组绑定到一些图表机制。我一直在尝试没有运气的highcharts。我已设法通过 setInterval 函数对其进行更新，但不确定如何合并 highcharts 对象和 ember 对象以允许绑定/计算属性。

我刚刚开始使用 ember，我感谢任何正确方向的帮助/指示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T19:16:58.127

有一个 JSFiddle 说明了如何将 Highcharts 与 Ember.js 一起使用，请参阅[http://jsfiddle.net/Bt2xy/12/](http://jsfiddle.net/Bt2xy/12/)。

***编辑***：我找到了相应的线程[http://highslide.com/forum/viewtopic.php?f=9&t=15397](http://highslide.com/forum/viewtopic.php?f=9&t=15397)，所以 JSFiddle 的功劳归用户**@mbloem**和**@hfrntt (Slawek Kolodziej)**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-04T17:53:31.873

这是上面小提琴的工作版本，带有 Ember rc6 和 Highcharts 2：http: [//jsfiddle.net/qmmvx/2/](http://jsfiddle.net/qmmvx/2/)

对于 Highcharts 3，选项结构发生了一些变化（并打破了以前的小提琴），但想法保持不变。

将依赖项更改为：

```
http://code.highcharts.com/2.2.4/highcharts.js 
```

# maven-3 - maven3 多模块子groupId

> ID：10726341
> 
> 赞同：3
> 
> 时间：2012-05-23T19:10:32.657
> 
> 标签：maven-3, pom.xml, multi-module

在 maven3 中，如果我将多模块项目中子模块的 groupId 指定为与​​父模块相同，则会收到警告。现在我不确定这是否表明我应该使用不同的 groupId 或者我是否应该省略它以使用父 groupId。

根据[http://maven.apache.org/guides/mini/guide-naming-conventions.html](http://maven.apache.org/guides/mini/guide-naming-conventions.html)

*确定 groupId 粒度的一个好方法是使用项目结构。也就是说，如果当前项目是一个多模块项目，它应该将一个新的标识符附加到父级的 groupId。例如。org.apache.maven、org.apache.maven.plugins、org.apache.maven.reporting*

这让我相信每个孩子都应该有一个与父母不同的 groupId。那是对的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T04:50:29.410

来自[Maven 文档](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)

> 如果我们希望您的模块的 groupId 和/或版本与其父模块相同，您可以在其 POM 中删除模块的 groupId 和/或版本标识。这允许模块继承 groupId 和/或其父 POM 的版本。

警告是让用户知道这一点并避免出现拼写错误`groupId`或`versionId`.

# ruby-on-rails - OmniAuth 身份验证失败！timeout: Timeout::Error，执行过期

> ID：10726345
> 
> 赞同：1
> 
> 时间：2012-05-23T19:10:41.470
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter, devise, omniauth

将 OmniAuth 1.1.0 与 Devise 2.0.4 一起使用时，我在尝试连接到 Twitter 时遇到此错误：

```
Started GET "/users/auth/twitter" for 127.0.0.1 at 2012-05-23 14:50:23 -0400
(twitter) Callback phase initiated.
(twitter) Callback phase initiated.
(twitter) Authentication failure! timeout: Timeout::Error, execution expired 
```

然后导致 OmniAuth 调用

```
Processing by Users::OmniauthCallbacksController#failure as HTML 
```

不过有趣的是，我将用户信息作为`request.env["omniauth.auth"]`. 也就是说，request.env 包含用户的真实 Twitter 个人资料数据——即使 OmniAuth 说它已经超时。有人可以向我提供有关这里发生了什么的线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:30:45.333

我最初分别从版本 0.4.7 和 1 升级到带有 Devise 2.0.4 的 OmniAuth 1.1.0，所以我解决这个问题的方法是首先回滚我的更改，然后重做 gems 的更新。我认为是对我的 Gemfile 进行了一些手动修改，才搞砸了这个。

如果您在升级时收到有关机架依赖项的投诉，请尝试从您的 Gemfile 中删除有关 sinatra 的块（不是提到 sinatra 作为依赖项的行，而是提到 sinatra 及其依赖项的块），然后运行捆绑安装或更新什么的。

# html - URL参数打开两页的PDF（并排）

> ID：10726350
> 
> 赞同：1
> 
> 时间：2012-05-23T19:11:01.393
> 
> 标签：html, url, pdf

指定浏览器打开两页（并排）的 PDF 的参数是什么？

我找到了有关缩放和书签的文档，但没有找到两页以上的文档。

> [http://example.org/doc.pdf#pagemode=bookmarks&zoom=50](http://example.org/doc.pdf#pagemode=bookmarks&zoom=50)

谢谢。

# cocos2d-iphone - Cococs2d 和 Arc

> ID：10726352
> 
> 赞同：1
> 
> 时间：2012-05-23T19:11:07.833
> 
> 标签：cocos2d-iphone, automatic-ref-counting

我刚刚开始使用 Cocos2d for iPhone 进行开发。而且我意识到在使用 Cocos2d 模板创建新项目时没有“使用自动引用计数”复选框。我的 Xcode 是 4.3.1，iOS 5。我仍然可以省略保留和发布，还是必须使用旧样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T23:00:02.603

您必须先在 Build Settings 下启用 ARC，然后才能使用它。对于 cocos2d，您至少需要 v1.0.1（可能需要一些手动修复）或 v1.1 或 v2.0。然后按照我[关于在 cocos2d 项目中启用 ARC 的教程进行操作](http://www.learn-cocos2d.com/2012/04/enabling-arc-cocos2d-project-howto-stepbystep-tutorialguide/)。

您也可以只[使用 Kobold2D 进行 cocos2d 开发](http://www.kobold2d.com)。ARC 已在所有模板项目中启用。

# python - 检查字符串的条件

> ID：10726353
> 
> 赞同：1
> 
> 时间：2012-05-23T19:11:11.033
> 
> 标签：python, string

假设我有一个字符串，我想检查这个字符串的很多条件。例如：

1.  它的大小为 x
2.  没有空格
3.  最后一个字母是数字字符

1-3中的所有条件都可以在函数中以常规标准方式完成（如果这个和那个等）

但是......我将如何以一种好的 python 风格的方式在一行中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T19:24:01.240

您可以使用一个简单的`if`条件`any`：

```
s='fdsfgsgsfds9'
if len(s)==7 and not any(c.isspace() for c in s) and s[-1].isdigit():
    pass 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T19:15:37.310

它可能比它的价值更复杂，但您可以使用正则表达式检查所有这些条件。

例如，如果您想要的大小是 8 个字符，您可以使用以下命令检查所有三个条件：

```
if re.match(r'\S{7}\d$', text):
    print 'all conditions match' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T19:16:12.573

一种方法是使用正则表达式（假设`x`为 10）：

```
if re.match(r"\S{10}(?<=\d)$", mystring):
    # Success! 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T19:15:49.080

尝试类似的东西

```
import re
def test(s):
    return len(s)>=x and re.match("^\S*\d$", s) 
```

这将测试字符串的长度是否至少为`x`，并且它是一个非空格字符序列，最后是一个数字字符。

# google-chrome - InstallShield：检测安装在 PRQ 中的 Chrome

> ID：10726356
> 
> 赞同：2
> 
> 时间：2012-05-23T19:11:23.777
> 
> 标签：google-chrome, installshield-2012

我正在使用 InstallShield 2012，并且我将 Chrome 作为可再发行组件包含在内，我想检测是否安装了 Chrome。问题是 chrome.exe 安装到用户的 appdata 文件夹中，并且先决条件对话框没有给我选择 AppDataFolder 的选项

谢谢

# iphone - 越界时的 iOS 锁定视图或 uiwebview

> ID：10726357
> 
> 赞同：0
> 
> 时间：2012-05-23T19:11:28.707
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

当您点击视图超出范围时，iOS 有一个漂亮的效果。然后，当您释放它时，视图将返回到先前设置的位置。但是，我需要修复和元素不允许这样做！我需要修复 webview 位置（不滚动）或视图。谢谢！

# javascript - javascript unshift 参数返回意外结果

> ID：10726358
> 
> 赞同：3
> 
> 时间：2012-05-23T19:11:29.740
> 
> 标签：javascript, node.js

```
router.route = function (alias, pattern, action, constraints) {
   if (2 === arguments.length)
     Array.prototype.unshift.call(arguments, undefined)

   console.log(arguments)
}

router.route('/artist/:id', function () {})

{ '0': undefined,
  '1': '/artist/:id',
  '2': [Function],
  '3': undefined,
  '4': undefined,
  '5': undefined,
  '6': undefined,
  '7': undefined,
  '8': undefined,
  '9': undefined,
  '10': undefined,
  '11': undefined,
  '12': undefined,
  '13': undefined,
  '14': undefined,
  '15': undefined,
  '16': undefined,
  '17': undefined,
  '18': undefined,
  '19': undefined } 
```

我基本上想要做的是使“别名”参数成为可选的，但我试图找到一种不这样做的方法。

```
if (2 === arguments.length) {
  action = pattern
  pattern = alias
  alias = undefined
} 
```

所以 unshift() 基本上可以工作，我得到了相同的结果。 `alias = undefined` `pattern = '/artist/:id'` `action = function () {}`

但问题是，我突然在参数数组的末尾添加了 17 个“未定义的”。

这会影响性能吗，有人知道为什么会这样吗？

## 编辑

我在原来的问题中不小心写了 Array.prototype.unshift(arguments, undefined) 而不是 Array.prototype.unshift.call(arguments, undefined) ，非常抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:18:27.443

如果由于资源超时而存在那些未定义的位置，那么是的，性能将受到影响。如果它只是一个空数组索引，那么 No 它不会影响性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:19:14.770

如果我理解正确，您不只是想删除数组的第一个元素吗？

如果是这样，您可以这样做：

```
var args = Array.prototype.shift.call(arguments); 
```

# mercurial - 我如何告诉（本地）mercurial 服务器未发布？

> ID：10726360
> 
> 赞同：11
> 
> 时间：2012-05-23T19:11:37.903
> 
> 标签：mercurial, bitbucket, mercurial-phases

当我无权访问远程文件时，如何告诉 mercurial 远程服务器（例如在[bitbucket上）未发布？](http://bitbucket.org)`.hg/hgrc`

## 背景

最新版本的 mercurial 有一个[阶段](https://www.mercurial-scm.org/wiki/Phases)概念，允许人们跟踪哪些变更集已共享（`public`），哪些未共享（ `draft`）。[`rebase`](https://www.mercurial-scm.org/wiki/RebaseExtension)在变更集上允许进行存储库更改操作`draft`，但不允许`public`变更集，因为其他人可能依赖于后者。

`public`默认情况下，将变更集推送到公共服务器会将其阶段更改为阶段。

告诉 mercurial 服务器未发布的[记录方法是在](https://www.mercurial-scm.org/wiki/Phases#Publishing_Repository)*服务器上*的文件中添加一个`[phases]`部分：`.hg/hgrc`

 *```
[phases]
publish = false 
```

在我看来，应该有一种方法可以在我的一个本地`hgrc`文件中包含一行，说明特定服务器未发布，但我找不到任何文档来建议如何发布。也许这种行为可以用钩子定制？

## 参考

*   [https://www.mercurial-scm.org/wiki/Phases](https://www.mercurial-scm.org/wiki/Phases)
*   [水银相简介](http://www.logilab.org/blogentry/88203)
*   [推送到审查存储库后，在 rebase 上“abort: can't rebase immutable changeset”](https://stackoverflow.com/questions/9810987)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T11:28:41.750

目前没有办法做到这一点，希望它永远不会发生。

原因如下：
如果您允许本地存储库覆盖远程存储库配置，那么您只会使整个阶段机制变得无用。这些阶段的重点是防止用户执行可能“破坏”同步流的操作。
接收者有责任描述如何使用接收到的变更集。如果您颠倒该逻辑，允许发件人覆盖这些设置，那么，您如何确保两个发件人将使用相同的配置？如果配置不同，应该保留哪一个？应该如何在接收器上标记变更集？

在某种程度上，这就像本地存储库能够在未经授权的情况下将变更集推送到远程一样，只需在本地覆盖远程配置即可。*

# python - 在读取二进制文件时 seek ( )

> ID：10726361
> 
> 赞同：3
> 
> 时间：2012-05-23T19:11:38.780
> 
> 标签：python, binary-data, seek

我是 Python 的超级初学者；我宁愿被扔进深渊。一点背景知识：我们正在读取的文件来自声纳成像相机；目前我正在尝试读取写入文件的属性，例如日期、文件名、帧数、光束数等。首先，我想读取 FILE 标题。然后，对于每一帧，我想读入 FRAME 标题。我需要读取文件头已停止的帧头......我相信我需要 seek() 才能做到这一点。这是我目前拥有的代码，用于读取文件头（成功完成）并从帧头信息结束的位置开始：

编辑代码：

```
import math, struct
def __init__(didson):
    print "this better work"

def get_file_header(data,offset=0):
    fileheader={}
    winlengths=[1.125,2.25,4.5,9,18,36]
    fileheader['filetype']=struct.unpack("3s",didson_data[0:3])
    fileheader['fileversion']=struct.unpack('B',didson_data[3:4])[0]
    fileheader['numframes']=struct.unpack('l',didson_data[4:8])
    fileheader['framerate']=struct.unpack('l',didson_data[8:12])
    fileheader['resolution']=struct.unpack('i',didson_data[12:16])
    fileheader['numbeams']=struct.unpack('i',didson_data[16:20])
    fileheader['samplerate']=struct.unpack('f',didson_data[20:24])
    fileheader['samplesperchannel']=struct.unpack('l',didson_data[24:28])
    fileheader['receivergain']=struct.unpack('l',didson_data[28:32])
    fileheader['windowstart']=struct.unpack('i',didson_data[32:36])
    fileheader['winlengthsindex']=struct.unpack('i',didson_data[36:40])
    fileheader['reverse']=struct.unpack('l',didson_data[40:44])
    fileheader['serialnumber']=struct.unpack('l',didson_data[44:48])
    fileheader['date']=struct.unpack("10s",didson_data[48:58])
    #fileheader['???']=struct.unpack('26s',didson_data[58:84])
    fileheader['idstring']=struct.unpack("33s",didson_data[84:117])
    #fileheader['????2']=struct.unpack('235s',didson_data[117:352])
    fileheader['framestart']=struct.unpack('i',didson_data[352:356])
    fileheader['frameend']=struct.unpack('i',didson_data[356:360])
    fileheader['timelapse']=struct.unpack('i',didson_data[360:364])
    fileheader['recordInterval']=struct.unpack('i',didson_data[364:368])
    fileheader['radioseconds']=struct.unpack('i',didson_data[368:372])
    fileheader['frameinterval']=struct.unpack('i',didson_data[372:376])

    return fileheader

def num_datagrams(didson_data):
    assert(len(didson_data) % datagram_size==0)
    return len(didson_data)/datagram_size

def get_offset(datagram_number):
    return datagram_number * datagram_size

def didson_print(fileheader):
    print fileheader
    for key in fileheader:
        print ' ',key, fileheader[key]

def main():
    didson_file=open('C:/vprice/DIDSON/DIDSON Data/test.ddf', 'rb')
    didson_data=didson_file.read()
    print 'Number of datagrams:', num_datagrams(didson_data)
    didson_print(datagram)

if __name__=='main':
    main() 
```

现在如果我运行“main”，我可以逐行阅读吗？我不确定它是否是每行一个值...我基本上逐个字节地计算出哪些标头值位于何处。

任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:20:14.540

您将文件的全部内容读入`didson_data`，然后将文件处理程序`didson_file`恢复为零，并且不再使用它，因为您将所有字段从文件中拆分出来，`didson_data`而不是单步执行文件中的行/块，所以当然是您的第二个`.tell()`仍将位于零位，因为自从您寻求零位以来，您没有移动任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:01:50.647

为什么不继续一口气读取所有标题，而不是整个文件。然后您的文件将准备好开始读取标头之后的数据。它看起来像改变`read`从：

```
didson_data=didson_file.read()

pos=didson_file.seek(0,0) 
```

只是：

```
didson_data=didson_file.read(377) 
```

只会这样做，将位置保留在十进制偏移量 377 处，就在 frameinterval 标头之后。

没有理由为了节省这么少的内存而使事情变得更加复杂。

以可变块读取文件其余部分并跟踪您所在位置的更通用解决方案是使用您自己的函数。它可以读取大小足以容纳最大数据元素的文件，计算出数据元素的实际大小，将数据元素保存为字符串，查找（函数开始时文件中的传入偏移量）+ (刚刚检索到的数据元素的长度），然后返回数据元素字符串。

基本上：

您将被要求越过标题，然后反复调用

```
def get_chunk(fileobject):
    result = fileobject.read(1024)
    if len(result) == 0: # End of file
        return Null
    ## Determine what this is = thing 
    fileobject.seek(fileobject.tell()-1024+len(thing)
    return thing 
```

直到它返回一个 Null

```
 while True:
        the_thing = get_chunk(didson_file)
        if not the_thing: # It's a Null--it's the end of the file
            return
        # process the_thing
# End the program 
```

一旦你通过了标题，你将不得不以某种方式解析一个对象，并确定它有多长。get_chunk 函数可以返回 Python 中不同类型的对象。只需查看 the_think 的类型，*#process the_thing* 部分就可以为不同类型的数据做不同的事情。

* * *

对于真正的二进制文件，不应使用 readlines 函数。数据中的任何换行都是偶然的，因此您不希望使用它们来拆分文件。然而，查看 readlines 函数的想法是一个很好的想法——但你必须调整你从中学到的东西，而不是从中复制。我假设它是一个生成器函数，这是一个很酷的想法，并且可以记住从函数的一次调用到下一次调用的各种状态。但是由于您只需要记住您在文件中的位置，因此这种事情可以工作并且更易于理解（但时间效率稍低）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T20:34:32.187

如果您的文件是二进制数据，并且只有几兆字节，您可能希望一次读取整个文件。这就是你现在正在做的事情`didson_file.read()`。

如果文件是文本数据，按行组织，有一个很好的习惯用法，您可以使用它方便地一次处理一行：

```
with open("my_file_name") as f:
    for line in f:
        do_something_with_line(line) 
```

实际上，由于您拥有需要解析的那些结构，因此很明显您正在读取二进制文件。在这种情况下，您应该吞下整个东西（如果内存使用不是问题），或者分块读取它（更复杂，但会降低内存使用）。

# javascript - Javascript 表单验证器与数学 CAPTCHA 冲突

> ID：10726362
> 
> 赞同：0
> 
> 时间：2012-05-23T19:11:56.780
> 
> 标签：javascript, html, forms, math, captcha

这是带有数学验证码的基本电子邮件表格。验证码有效，但表单验证器无效。当我说表单验证器时，我指的是必需的“姓名”和“电子邮件”字段。如果我删除验证码，表单验证器就可以正常工作。我认为表单验证器的 js 代码和 Captcha 的 js 代码在某种程度上相互冲突。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>EiP - Contact Us</title>

<script type="text/javascript">
// Form validator for the required Name and Email fields
function MM_validateForm() { //v4.0
  if (document.getElementById){
    var i,p,q,nm,test,num,min,max,errors='',args=MM_validateForm.arguments;
    for (i=0; i<(args.length-2); i+=3) { test=args[i+2]; val=document.getElementById(args[i]);
      if (val) { nm=val.name; if ((val=val.value)!="") {
        if (test.indexOf('isEmail')!=-1) { p=val.indexOf('@');
          if (p<1 || p==(val.length-1)) errors+='- '+nm+' must contain an e-mail address.\n';
        } else if (test!='R') { num = parseFloat(val);
          if (isNaN(val)) errors+='- '+nm+' must contain a number.\n';
          if (test.indexOf('inRange') != -1) { p=test.indexOf(':');
            min=test.substring(8,p); max=test.substring(p+1);
            if (num<min || max<num) errors+='- '+nm+' must contain a number between '+min+' and '+max+'.\n';
      } } } else if (test.charAt(0) == 'R') errors += '- '+nm+' is required.\n'; }
    } if (errors) alert('The following error(s) occurred:\n'+errors);
    document.MM_returnValue = (errors == '');
} }
</script>
</head>
<body>  
    <p>Do you have a question or comment about EiP? We want to hear from you as your feedback is critical to our success.</p>
    <p class="required">*Required info</p>
    <form action="contactus.html" method="post" name="contactform" id="contactform" onsubmit="return checkform(this);MM_validateForm('name','','R','email','','RisEmail');return document.MM_returnValue">
    <p class="allforms">Full Name<span>*</span></p>
    <input name="name" type="text"  id="name"/>                        
    <p class="allformsRt">Email Address<span>*</span></p>
    <input type="text" name="email" id="email" />
    <p class="allforms">Company</p>
    <input name="company" type="text"  id="company" />
    <p class="allformsRt">Phone Number</p>
    <input type="text" name="phone" id="phone" />
    <p class="allforms">How can we help?</p>
    <textarea name="application" cols="35" rows="5" title="title" label="label" style="float:left">Type your questions, comments, feedback</textarea>
    <label for="code" style="float:left; clear:both">Write code below > <span id="txtCaptchaDiv" style="color:#F00"></span><!-- this is where the script will place the generated code --> 
    <input type="hidden" id="txtCaptcha" /></label><!-- this is where the script will place a copy of the code for validation: this is a hidden field -->
    <input type="text" name="txtInput" id="txtInput" size="30" style="float:left; clear:both" /> 
    <input name="Submit" type="submit" value="Contact Us" style="float:left; clear:both" />
        </form>

<script type="text/javascript">
//Generates the captcha function    
    var a = Math.ceil(Math.random() * 9)+ '';
    var b = Math.ceil(Math.random() * 9)+ '';       
    var c = Math.ceil(Math.random() * 9)+ '';  
    var d = Math.ceil(Math.random() * 9)+ '';  
    var e = Math.ceil(Math.random() * 9)+ '';  

    var code = a + b + c + d + e;
    document.getElementById("txtCaptcha").value = code;
    document.getElementById("txtCaptchaDiv").innerHTML = code;  
</script>

<script type="text/javascript">
function checkform(theform){
    var why = "";

    if(theform.txtInput.value == ""){
        why += "- Security code should not be empty.\n";
    }
    if(theform.txtInput.value != ""){
        if(ValidCaptcha(theform.txtInput.value) == false){
            why += "- Security code did not match.\n";
        }
    }
    if(why != ""){
        alert(why);
        return false;
    }
}

// Validate the Entered input aganist the generated security code function   
function ValidCaptcha(){
    var str1 = removeSpaces(document.getElementById('txtCaptcha').value);
    var str2 = removeSpaces(document.getElementById('txtInput').value);
    if (str1 == str2){
        return true;    
    }else{
        return false;
    }
}

// Remove the spaces from the entered and generated code
function removeSpaces(string){
    return string.split(' ').join('');
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:41:11.780

你的`onsubmit`部分不能以这种方式完成。如果安全代码是正确的，则您返回 的不是假的，因此在调用检查所需字段`undefined`的函数之前提交表单。`MM_validateForm`

从标记中删除`onsubmit=...`部分并将以下代码添加到您的站点

```
<script type="text\javascript">
    window.onload = function() {
        var form = document.getElementsByTagName("form")[0];    // get the form
        form.onsubmit = function() {
            if (checkform(this) != false) {
                MM_validateForm('name', '', 'R', 'email', '', 'RisEmail');
                return document.MM_returnValue;
            } else {
                return false;
            }
        };
    }
</script> 
```

[**演示**](http://jsfiddle.net/WYzus/)

# c# - 根据文本框中的值自动填充下拉列表

> ID：10726364
> 
> 赞同：1
> 
> 时间：2012-05-23T19:12:04.347
> 
> 标签：c#, jquery, asp.net-mvc, json, asp.net-mvc-3

我有一个简单的密码重置表单，它有一个用户名字段，下面是一个安全问题的下拉列表。

我想要工作的是当用户输入一个有效的用户名时，当他们从文本框中失去焦点时，我想要它，以便下拉列表将填充我的数据库中找到的用户安全问题。

这是我的 HTML

```
 <div class="editor-field">
        @Html.TextBoxFor(model => model.userName, new { @Id = "forgotPassUserName" })
        @Html.ValidationMessageFor(model => model.userName)
    </div>

    <div class="editor-field">
    @{
        List<SelectListItem> securityquestionvalues = new List<SelectListItem>();
    }
        @Html.DropDownListFor(model => model.securityQuestion, securityquestionvalues, new { @Id = "forgotPassSecurityQuestions" }) 
```

这是我的 jQuery/JS

```
<script type="text/javascript">
$(function () {
    $("#forgotPassUserName").change(function () {
        var selectedValue = $(this).val();
        $.getJson("LoginRegisterController/ForgotPasswordDropDownList", { user: selectedValue }, function (result) {
            var selectList = $("#forgotPassSecurityQuestions");
            selectList.add(result, null);

        });
    });
}); 
```

下面是控制器中被上面的 getJSON 调用的方法：

```
 public ActionResult ForgotPasswordDropDownList(string userName)
    {
        var db = IoC.ResolveObjectContextelearningCommon();

        var rep = db.GetRepository<EmployeeReg>();

        List<EmployeeReg> user = rep.Find(o => o.Login == userName).ToList();

        List<SelectListItem> questionList = new List<SelectListItem>();

        if (user[0].secureQuestion1 != null)
        {
            questionList.Add(new SelectListItem { Text = user[0].secureQuestion1, Value = user[0].secureQuestion1 });
        }

        if (user[0].secureQuestion2 != null)
        {
            questionList.Add(new SelectListItem { Text = user[0].secureQuestion2, Value = user[0].secureQuestion2 });
        }

        return Json(questionList, JsonRequestBehavior.AllowGet);
    } 
```

很遗憾。这对我不起作用。不幸的是，当我尝试在 getJSON 方法处设置断点时出现错误。问题似乎在那里。

**编辑**

我像这样将我的 getJSON 方法更改为 .ajax

```
<script type="text/javascript">
$(function () {
    $("#forgotPassUserName").change(function () {
        var selectedValue = $(this).val();
        var url = '<%= Url.Action("ForgotPasswordDropDownList", "LoginRegisterController") %>';
        $.ajax({
            type: "GET",
            url: url,
            data: { userName: selectedValue },
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (result) {
                alert("testing");
            }
        });
    });
}); 
```

仍然没有弹出警报....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:17:40.267

以下行不正确：

```
selectList.add(result, null); 
```

您需要一个`for`循环来将它们添加到选择列表中，例如：

```
selectList.html(""); //empty the options first

for (var i = 0; i < result.length; i++)
{
    selectList.append("<option value='" + result[i].Value  + "'>" 
        + result[i].Text  + "</option>");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:33:13.737

要在更改事件上触发事件，请使用 blur event 。

```
$("#forgotPassUserName").blur( 
```

这将正确触发更改事件

# database - heroku db:push-它会复制我的开发数据库并覆盖生产数据库吗？

> ID：10726365
> 
> 赞同：1
> 
> 时间：2012-05-23T19:12:07.320
> 
> 标签：database, heroku, production

我将我的应用程序部署到 heroku 服务器并推送数据库内容。几天后，我对应用程序的开发版本进行了一些更新，但没有对开发数据库进行任何更改。生产数据库发生了变化，它与我正在开发的数据库不同。

我想将我的应用程序的更改推送到服务器，但我担心

```
heroku push master 
```

命令可能会用开发数据库覆盖生产数据库。

在我推送更改之前。我想问这个。它会覆盖我的生产数据库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:23:26.393

除非您重新播种，否则推送不会覆盖数据。但是，如果您有迁移，如果您在生产环境中运行 db 迁移，则会更改生产数据库数据模型。但是，如果您不运行 db:migrate，则不应该运行。

在任何一种情况下，它都不应该覆盖您现有的数据，除非您的迁移以某种方式清除表或删除表/列等。

# javascript - 使用 Javascript 调整图像大小

> ID：10726366
> 
> 赞同：-2
> 
> 时间：2012-05-23T19:12:08.303
> 
> 标签：javascript

我正在使用这个[网络摄像头插件](http://www.xarg.org/project/jquery-webcam-plugin/)，在捕获图像（默认为 320x240）后，我想将图像大小调整为 100x100（用于个人资料图片捕获）。
我尝试使用缩放，但它正在裁剪图像而不是调整图像大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:46:19.693

您可以使用 img 标签本身来调整图像的大小

```
<img src='./imagename.jpg' style="display: inline; width: 100px; height: 100px"> 
```

这是你想要的吗？你也可以做java脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:28:58.570

这是调整图像大小的代码。

在这里，'this' 代表图像。变量最大宽度 = 320；// 图像的最大宽度 var maxHeight = 240; // 图像的最大高度 var ratio = 0; // 用于纵横比 var width = $(this).width(); // 当前图像宽度 var height = $(this).height(); // 当前图像高度

```
 // Check if the current width is larger than the max
    if(width > maxWidth){
        ratio = maxWidth / width;   // get ratio for scaling image
        $(this).css("width", maxWidth); // Set new width
        $(this).css("height", height * ratio);  // Scale height based on ratio
        height = height * ratio;    // Reset height to match scaled image
        width = width * ratio;    // Reset width to match scaled image
    }

    // Check if current height is larger than max
    if(height > maxHeight){
        ratio = maxHeight / height; // get ratio for scaling image
        $(this).css("height", maxHeight);   // Set new height
        $(this).css("width", width * ratio);    // Scale width based on ratio
        width = width * ratio;    // Reset width to match scaled image
    } 
```

# version-control - CVS 可以处理的最大文件大小是多少？

> ID：10726371
> 
> 赞同：0
> 
> 时间：2012-05-23T19:12:28.110
> 
> 标签：version-control, cvs

我正在尝试使用大约 1GB 的文件。此文件不断更改并提交到存储库，并由其他用户频繁更新。而且这个文件在未来的日子里只会变得更大。

问题是自 1GB 以来提交或更新文件需要很长时间。我查找了有关 CVS 文件大小限制的信息，发现信息很少，并且与交换内存有关。

有解决办法吗？使文件更快移动的最佳解决方案是什么？它与交换空间或 CVS 配置有关吗？

非常感谢任何帮助/建议/方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T02:11:29.003

交换空间或 CVS 配置不会解决您的问题。您在其他版本控制软件（例如 TFS、SNV、SourceAnywhere）中也会遇到同样的问题。

您的文件太大，您应该找到另一种方法将其拆分为较小的文件。顺便说一句，这个文件的类型是什么？如果是编译后的二进制文件，可以考虑保留源代码。

# vim - 在 Vim 中自动注释新行仅用于块注释

> ID：10726373
> 
> 赞同：16
> 
> 时间：2012-05-23T19:12:34.770
> 
> 标签：vim, comments, autoformatting

`.{cpp,h}`当我在文件中的单行注释末尾开始新行时，`vim`会自动对其进行注释。例如：

```
// This is a comment<CR>
// | <- Cursor is moved to `|`, `//` is automatically inserted. 
```

我不确定这是插件还是设置。我在 my 中看不到任何看起来会执行此操作的内容`~/.vimrc`，并且加载的插件在下面列出。

我*喜欢*这种`/* */`风格的*多行*注释，但我不希望我*的单行*注释默认运行在多行上。

*哪个设置（或插件）可以做到这一点，我可以只为这种评论类型*关闭它吗？

`:scriptnames`给出了这个：

```
 1: /Users/simont/.vimrc
  2: /usr/local/share/vim/vim73/syntax/syntax.vim
  3: /usr/local/share/vim/vim73/syntax/synload.vim
  4: /usr/local/share/vim/vim73/syntax/syncolor.vim
  5: /usr/local/share/vim/vim73/filetype.vim
  6: /usr/local/share/vim/vim73/ftplugin.vim
  7: /usr/local/share/vim/vim73/syntax/nosyntax.vim
  8: /Users/simont/repositories/config-files/vim/colors/solarized.vim
  9: /usr/local/share/vim/vim73/plugin/getscriptPlugin.vim
 10: /usr/local/share/vim/vim73/plugin/gzip.vim
 11: /usr/local/share/vim/vim73/plugin/matchparen.vim
 12: /usr/local/share/vim/vim73/plugin/netrwPlugin.vim
 13: /usr/local/share/vim/vim73/plugin/rrhelper.vim
 14: /usr/local/share/vim/vim73/plugin/spellfile.vim
 15: /usr/local/share/vim/vim73/plugin/tarPlugin.vim
 16: /usr/local/share/vim/vim73/plugin/tohtml.vim
 17: /usr/local/share/vim/vim73/plugin/vimballPlugin.vim
 18: /usr/local/share/vim/vim73/plugin/zipPlugin.vim
 19: /usr/local/share/vim/vim73/scripts.vim
 20: /usr/local/share/vim/vim73/ftplugin/vim.vim
 21: /usr/local/share/vim/vim73/syntax/vim.vim 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T19:17:49.033

```
au FileType c,cpp setlocal comments-=:// comments+=f:// 
```

在你的 vimrc 中，应该在`//`不影响块注释的情况下，在 {cpp,h} 文件中。

要在当前缓冲区中临时尝试，请使用：

```
:setlocal comments-=:// comments+=f:// 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T20:41:46.233

这种与特定文件类型相关的配置通常是通过文件类型插件设置的。`.cpp`Vim 附带了许多用于常见文件类型（例如 ）的文件类型。您可以使用 . 检查缓冲区的文件类型`:set ft?`。

`'comments'`正如 pb2q 所说，开始新行后继续评论的设置来自 option 。默认文件类型为`.{cpp,h}`“cpp”，`'comment'`选项设置为`$VIMRUNTIME/ftplugin/c.vim`，因为`cpp.vim`位于同一目录中。从`c.vim`文件中：

```
 " Set 'comments' to format dashed lists in comments.
  setlocal comments=sO:*\ -,mO:*\ \ ,exO:*/,s1:/*,mb:*,ex:*/,:// 
```

该`comments`选项是`{flags}:{string}`, 和标志的列表，`f`并`O`避免扩展注释新行。

从[Vim 常见问题解答](http://vimhelp.appspot.com/vim_faq.txt.html#faq-26.6)：

```
 You can use an autocommand triggered on the FileType event:

      au Filetype * set formatoptions=xyz

  This should at least be after "filetype on" in your vimrc. Best is to put
  it in your "myfiletypefile" file, so that it's always last.

  If you want to override a setting for a particular filetype, then create a
  file with the same name as the original filetype plugin in the
  ~/.vim/after/ftplugin directory For example, to override a setting in the
  c.vim filetype plugin, create a c.vim file in the ~/.vim/after/ftplugin
  directory and add your preferences in this file. 
```

所以创建`~/.vim/after/ftplugin/c.vim`文件

```
 setlocal comments-=://
  setlocal comments+=fO:// 
```

应该解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-21T18:21:55.450

您可以使用在 FileType 事件上触发的自动命令：

```
 au Filetype * set formatoptions=xyz 
```

这至少应该在你的 vimrc 中的 "filetype on" 之后。最好是把它放在你的“myfiletypefile”文件中，这样它就一直在最后。

如果要覆盖特定文件类型的设置，则在 ~/.vim/after/ftplugin 目录中创建一个与原始文件类型插件同名的文件 例如，覆盖 c.vim 文件类型插件中的设置，在 ~/.vim/after/ftplugin 目录中创建一个 c.vim 文件，并在此文件中添加您的首选项。所以创建文件 ~/.vim/after/ftplugin/c.vim

setlocal comments-=:// setlocal comments+=fO://

# java - Spring、JSP、Ajax 和 JQuery 我应该如何为我的项目建模？

> ID：10726374
> 
> 赞同：0
> 
> 时间：2012-05-23T19:12:36.237
> 
> 标签：java, jquery, ajax, spring, spring-mvc

Spring、JSP、Ajax 和 JQuery 我应该如何为我的项目建模？

过去我做过 Spring/Java 编程，我把每个屏幕都做成了一个 JSP 文件。所以每次我需要它来显示一个新屏幕时，我都会调用服务器并加载一个新的 JSP。

现在使用 JQUERY。

我在想使用 JQuery 会让我减少我拥有的 JSP 页面的数量。我可以拥有 JSP 页面，然后使用 JQuery 使用 DIV 更改屏幕，使其看起来像新页面而无需访问服务器，唯一的问题是如何显示这个？任何简单的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:28:22.727

我正在为我的爱好项目做的事情。我的主文件中有一组 div 。div 其余部分的数据位于单独的 html 文件（1 个文件/div）中。当我必须第一次显示 div 时，我使用 Ajax 加载文件，如果需要，在单独调用 servlet 时加载 div 所需的动态数据。JS 也被分隔在多个文件中。这样，没有一个文件太大或“上帝”文件。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:20:46.880

我会推荐你​​以前的方法。将大量代码放入单个 JSP 页面将使其非常难以维护。但是，如果您真的想采用新方法，则可以简单地使用

```
$('myDiv').hide(); 
```

和

```
$('myDiv').show(); 
```

`myDiv`将是您要显示/隐藏的整个部分的父级

# vb.net - 在没有 ID 的 Web 浏览器中调用 Click 事件？

> ID：10726380
> 
> 赞同：2
> 
> 时间：2012-05-23T19:13:05.290
> 
> 标签：vb.net, webbrowser-control, getelementbyid

如何在没有元素 id 的 vb Web 浏览器中调用 click 事件？你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:55:19.837

1.  获取要在`HtmlElement`对象中单击的 HTML 控件。您没有 ID，因此无法使用`GetElementById`，但还有许多其他方法可以帮助您获取您感兴趣的元素。请参见下面的示例。
2.  使用`InvokeMember`对象上的方法单击它。

这是一个例子：

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim elements = WebBrowser1.Document.GetElementsByTagName("input")   '' or whatever tag it is
    For Each element As HtmlElement In elements
        '' test here if this is the element of your interest.
        '' e.g.
        If element.GetAttribute("className") = "someclass" Then
            element.InvokeMember("click")   '' if found, click it!
            Exit For
        End If
    Next
End Sub 
```

# javascript - JQuery滑块在拖动时滚动一个div？

> ID：10726381
> 
> 赞同：0
> 
> 时间：2012-05-23T19:13:05.807
> 
> 标签：javascript, jquery, jquery-ui

我有一个基本的滑块和一个基于滑块偏移的溢出 div。为此，我使用它；

```
slide: function(e, ui) {
            $("#myDiv").animate({left: ui.value * -1}, 500);
        },
        stop: function(e, ui) {
            $("#myDiv").animate({left: ui.value * -1}, 500);
        },
        change: function(e, ui) {
            $("#myDiv").css({left: ui.value * -1});
        } 
```

如果我单击滑块上的某个位置或使用鼠标滚轮/箭头键，这将非常有用。但是，如果我左右拖动滑块并将其放在某处，则 div 会继续滚动，来回跳跃。一旦我释放鼠标，它并没有真正“捕捉”。

是否有一些更清洁的方法可以做到这一点，以便它实际上可以跟踪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:53:37.840

只是修改你的代码

```
slide: function(e, ui) {
        // here replace the delay / remove animation and place div in exact position
        $("#myDiv").animate({left: ui.value * -1}, 0);
    },
    stop: function(e, ui) {
        $("#myDiv").animate({left: ui.value * -1}, 500);
    },
    change: function(e, ui) {
        $("#myDiv").css({left: ui.value * -1});
    } 
```

# android - android：历史编辑文本

> ID：10726384
> 
> 赞同：1
> 
> 时间：2012-05-23T19:13:15.570
> 
> 标签：android, android-widget

* * *

第一个总结：

```
class A extends AutoCompleteTextView {
   public A() {
      setOnKeyListner( ... new OnKeyLisnter() ... ); //listener 1
   }
}
A obj;
obj.setOnKeyListener( ... new OnKeyListner() ... ); //listner 2 
```

是否可以同时调用两个听众？现在我只收到来自监听器 2 的消息。

* * *

我正在尝试使用从 AutoCompleteTextView 派生的历史构建一个编辑文本。该类有一个 ArrayAdapter，它会在按下回车键时自行更新。到现在为止还挺好。但是当从这个类创建的对象想要做的不仅仅是将文本添加到数据库中时，我需要使用另一个 onKeyListener。如果这样做，则不会调用原始侦听器。按下回车键时，有没有办法让两者都被调用？

```
class HistoryEditText extends AutoCompleteTextView {
    ArrayAdapter<String> adapter;
    public HistoryEditText(Context ctx) {
        super(ctx);
        setMaxLines(1);
        setOnKeyListener(new aCommand());
        List<String> myList = new LinkedList<String>();
        adapter = new ArrayAdapter<String>(ctx,R.layout.lvtext, myList);
        setAdapter(adapter);
    }
    private class aCommand implements OnKeyListener {
        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
                    (keyCode == KeyEvent.KEYCODE_ENTER)) {
                String str = getText().toString();
                setText(" ");
                adapter.add(str);
                adapter.notifyDataSetChanged();
                return true;
            }
            return false;
        }
    }
} 
```

别的地方：

```
 HistoryEditText cmdField = new HistoryEditText(ctx);
   cmdField.setOnKeyListener(... another listener ... ) 
```

我尝试在其中一个侦听器中返回 false ，但没​​有奏效。此外，我不想使用接口将两个侦听器合并为一个。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:38:25.360

这里的类似问题可能会有所帮助。基本上总结是没有，你不能。

[Android - 两个 onClick 监听器和一个按钮](https://stackoverflow.com/questions/4618929/android-two-onclick-listeners-and-one-button)

他使用了一些肮脏的技巧来解决它，但他几乎完全做了你不想做的事情。

# c# - 使用 Raphael.js 从 gridview 行获取坐标以在画布上绘制

> ID：10726387
> 
> 赞同：0
> 
> 时间：2012-05-23T19:13:26.487
> 
> 标签：c#, javascript, asp.net, raphael

我必须根据行的状态绘制一些形状。为了让他们在 IE 中工作，我必须使用 Raphael javascript 库。我将 ASP.NET 和 C# 用于代码隐藏。绘制的方法是通过坐标，我怎样才能得到行的坐标，这样我就可以在gridview之外，在它的旁边画一些东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:49:33.237

我建议为此使用 jQuery。jQuery api 有一个`.position()`, 和`.offset()`方法，它会给你一个 top 和 left 值。有关详细信息，请参阅[jQuery 教程](http://docs.jquery.com/Tutorials)、[.position()](http://api.jquery.com/position/)和[.offset()](http://api.jquery.com/offset/)。

**编辑**

如果 jQuery 不是你的包，那么我发现了一篇帖子，其中包含一个用 JavaScript 完成的示例函数：[Dynamically retrieve Html element (X,Y) position with JavaScript](https://stackoverflow.com/questions/442404/dynamically-retrieve-html-element-x-y-position-with-javascript)。

# awk - 如何使用 awk 打印特定的 NR

> ID：10726388
> 
> 赞同：0
> 
> 时间：2012-05-23T19:13:29.963
> 
> 标签：awk

我需要打印出一条特定的记录，即尾部的 3d，即 NR == total NR-2。我一直在尝试这样做将近一个小时，但仍然无法正常工作，所以这就是我所拥有的：

```
cat myfile | grep mystring | awk 'END {NR == $(NR-2); print $0}' 
```

这给了我最后一个 NR，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:24:24.220

`awk`处理每一行并在完成后将其丢弃，您必须手动保存它[注意您`NR == $(NR-2)`检查行数是否等于最后一行中的（行数 - 2）th 字段]。最简单的方法是将它们全部存储起来，但这不是非常有效的内存，所以我们可以只存储我们看到的最后三个。实际上最简单的方法是使用`head`and `tail`：

```
grep mystring myfile | tail -n3 | head -n1 
```

或与`awk`：

```
awk '/mystring/{three = two; two = one; one = $0} END{print three}' myfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:23:08.140

有2种可能性。

您可以使用命令[tac](http://man.cx/tac)（而不是 cat）来反转文件（从尾部到头部）并打印第三个

或使用缓冲区将最后 x 个结果放入内存

# android - 如何在 Google-TV Sony 3.2 Android 程序中运行 HLS 流时停止（隐身）URL 抑制

> ID：10726389
> 
> 赞同：1
> 
> 时间：2012-05-23T19:13:38.313
> 
> 标签：android, http-live-streaming, google-tv, android-logcat, incognito-mode

编辑：根据我下面的评论，我已经能够将我的测试扩展到其他 Honeycomb 3.2 和 ICS 设备。实际上，在所有情况下，URL 都会出现，因此我可以验证自适应流。因此，这只是 Sony Blueray 的问题（当时，它是我唯一的自适应流媒体支持设备）。由于这不是 3.2+ 操作系统的问题，但只有一个制造商设备，所以自适应流测试不是问题，我可以撤回此支持请求。

我遇到了在 locat/DDMS 中阻止和抑制 URL 的问题。我正在尝试做的是验证我的 HLS 自适应流是否真的在适应。我打算如何做到这一点是监视 logcat 并观察被拾取的段。我遇到的问题是 URL 被抑制所以我不能看看发生了什么。这是我在 Logcat 中看到的一个片段。

05-15 14:05:03.499: D/AVAPIMediaPlayer(247): AVAPIMediaPlayer 构造
05-15 14:05:03.503: D/AVAPIMediaPlayer(247): initCheck 调用
**05-15 14:05:03.503: D/AVAPIMediaPlayer(247 ): SetDataSource <BLOCKED>**
05-15 14:05:03.503: D/AVAPIMediaPlayer(247): surfaceChangedCallback: 调用 setVideoRectangle 这个 0x66901738, x 480, y 180, w 1440, h 680
05-15 14:05:03.507: D /AVAPIMediaPlayer(247): 为 mime 类型 video/mp2t 创建播放器核心
05-15 14:05:03.507: D/AVSettingsBridge(247): prepare, handle:c560b6c8f9, type:0
05-15 14:05:03.507: I /AVSettingsBridge(247): IAVSettingsBridgeImpl::registerCb, 地图大小:0->1
**05-15 14:05:03.511: I/LiveSession(247): onConnect <URL 抑制>**
**05-15 14:05:03.511: I/NuHTTPDataSource(247): 连接到 <URL 抑制> @0**

现在我很快将这些追溯到 chrome 框架和隐身模式。一些框架来源：[http](http://androidxref.com/source/s?defs=kFlagIncognito&project=frameworks) ://androidxref.com/source/s?defs=kFlagIncognito&project=frameworks 。

```
81     if (!(mFlags & kFlagIncognito)) {
 82         LOG_PRI(ANDROID_LOG_INFO, LOG_TAG, "connect to %s @%lld", uri, offset);
 83     } else {
 84         LOG_PRI(ANDROID_LOG_INFO, LOG_TAG,
 85                 "connect to <URL suppressed> @%lld", offset); 
```

我还在 Android 3.0 中找到了一个参考资料：“浏览器包含让用户更有效地导航和组织的新功能。多个选项卡取代了浏览器窗口，新的“隐身”模式允许匿名浏览”。

我认为它可能默认进入隐身模式？

现在，我不是编码员，只是在为丢在我腿上的代码苦苦挣扎，但我突然意识到在 setDataSource(Context context, Uri uri) 或相关的 HTTP 标头中的某个地方可能有一个可以设置的标记/标志打开或关闭隐身模式。经验丰富的**Android**程序员可能很快就能弄清楚。

任何人都可以帮忙吗？

如果有帮助，我在下面有其他参考资料。

* * *

在我们的代码中引用：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent receivedIntent = this.getIntent();
    receivedIntent = this.getIntent();
    String title = receivedIntent.getExtras().getString("label");
    String subtitle = receivedIntent.getExtras().getString("subtitle");
    String description = receivedIntent.getExtras().getString("description");
    String URI = receivedIntent.getExtras().getString("URI");
    String imagePrefix = receivedIntent.getExtras().getString("imagePrefix");
    setContentView(R.layout.video_page);

    String fileName = Environment.getExternalStorageDirectory().toString() + "/CamaroPit/" + imagePrefix  + ".mp4";
    File file = new File(fileName);
    if (!file.exists()) {
        fileName = Environment.getExternalStorageDirectory().toString() + "/CamaroPit/alschevrolet.mp4";
    }

    Log.d("GTV", "Video to play: " + fileName);
    TextView textTitle = (TextView) findViewById(R.id.video_page_title);
    textTitle.setText(title);
    TextView textSubtitle = (TextView) findViewById(R.id.video_page_subtitle);
    if (subtitle.equals("subtitle")) {
        subtitle = "Check out \""+ title + "\" and really get a feel for your Camaro.";
    }
    textSubtitle.setText(subtitle);
    TextView textDescription = (TextView) findViewById(R.id.video_page_description);
    textDescription.setText(description);
    this.getWindow().setFormat(PixelFormat.TRANSPARENT);
    final VideoView vView = (VideoView) findViewById(R.id.page_view);
    vView.setMediaController(new MediaController(this));
    vView.setVideoURI(Uri.parse(URI));
    vView.requestFocus();      
}

 item.setOnClickListener(new OnClickListener() {
@Override
public void onClick(View view) {
    final VideoView vView = (VideoView) GTVHomeScreenSetup.this.homeScreen.findViewById(R.id.gtv_video_view);
    MediaController mC = new MediaController(GTVHomeScreenSetup.this.homeScreen);
    vView.setMediaController(mC);
    mC.setAnchorView(vView);

    VideoData clickedVideo = currentVideoList.get(item.position);

    vView.setVideoURI(Uri.parse(homeScreen.getVideoURI(clickedVideo, cPath)));
    vView.start();

    item.requestFocus();
    for (ImageItemView item : GTVHomeScreenSetup.this.imageItems) {
        item.unSelect();
    }
    item.select(); 
```

* * *

**来自框架的其他参考：**

PS：它不会让我将超链接作为超链接发布。

// HTTPBase.h (http://androidxref.com/source/xref/frameworks/base/media/libstagefright/include/HTTPBase.h)

```
 28 struct HTTPBase : public DataSource {
 29     enum Flags {
 30         // Don't log any URLs.
 31         kFlagIncognito = 1
 32     }; 
```

// HTTPLiveSource.h (http://androidxref.com/source/xref/frameworks/base/media/libmediaplayerservice/nuplayer/HTTPLiveSource.h)

```
 struct NuPlayer::HTTPLiveSource : public NuPlayer::Source {
 30     HTTPLiveSource(
 31             const char *url,
 32             const KeyedVector<String8, String8> *headers,
 33             bool uidValid = false,
 34             uid_t uid = 0);
 35 
 36     virtual void start();
 37 
 38     virtual status_t feedMoreTSData();
 39 
 40     virtual sp<MetaData> getFormat(bool audio);
 41     virtual status_t dequeueAccessUnit(bool audio, sp<ABuffer> *accessUnit);
 42 
 43     virtual status_t getDuration(int64_t *durationUs);
 44     virtual status_t seekTo(int64_t seekTimeUs);
 45     virtual bool isSeekable();
 46 
 47 protected:
 48     virtual ~HTTPLiveSource();
  51     enum Flags {
 52         // Don't log any URLs.
 53         kFlagIncognito = 1,
 54     };
 55 
 56     AString mURL;
 57     KeyedVector<String8, String8> mExtraHeaders;
 58     bool mUIDValid;
 59     uid_t mUID;
 60     uint32_t mFlags; 
```

//HTTPLiveSession.h (http://androidxref.com/source/xref/frameworks/base/media/libstagefright/include/LiveSession.h#36)

```
 33 struct LiveSession : public AHandler {
 34     enum Flags {
 35         // Don't log any URLs.
 36         kFlagIncognito = 1,
 37     };
 38     LiveSession(uint32_t flags = 0, bool uidValid = false, uid_t uid = 0); 
```

AwesomePlayer 140 隐身​​ = 0x8000，

PreviewPlayerBase.h 132 隐身= 32768，

//PreviewPlayerBase.cpp (http://androidxref.com/source/xref/frameworks/media/libvideoeditor/lvpp/PreviewPlayerBase.cpp)

```
247 status_t PreviewPlayerBase::setDataSource_l(
248         const char *uri, const KeyedVector<String8, String8> *headers) {
249     reset_l();
250 
251     mUri = uri;
252 
253     if (headers) {
254         mUriHeaders = *headers;
255 
256         ssize_t index = mUriHeaders.indexOfKey(String8("x-hide-urls-from-log"));
257         if (index >= 0) {
258             // Browser is in "incognito" mode, suppress logging URLs.
259 
260             // This isn't something that should be passed to the server.
261             mUriHeaders.removeItemsAt(index);
262 
263             mFlags |= INCOGNITO;
264         }
265     }
266 
267     if (!(mFlags & INCOGNITO)) {
268         LOGI("setDataSource_l('%s')", mUri.string());
269     } else {
270         LOGI("setDataSource_l(URL suppressed)");
271     }
272 
273     // The actual work will be done during preparation in the call to
274     // ::finishSetDataSource_l to avoid blocking the calling thread in
275     // setDataSource for any significant time.
276 
277     return OK;
278 }
279  

 30 struct ChromiumHTTPDataSource : public HTTPBase {
 31     ChromiumHTTPDataSource(uint32_t flags = 0);
 32 
 33     virtual status_t connect(
 34             const char *uri,
 35             const KeyedVector<String8, String8> *headers = NULL,
 36             off64_t offset = 0);
 37 
 38     virtual void disconnect();
 39 
 40     virtual status_t initCheck() const;
 41 
 42     virtual ssize_t readAt(off64_t offset, void *data, size_t size);
 43     virtual status_t getSize(off64_t *size);
 44     virtual uint32_t flags(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:09:36.113

我们通常使用[M0n0wall](http://m0n0.ch/wall/)。只需下载、刻录 DVD，然后在 2 端口 PC 上从它启动。一个连接到网络，另一个连接到您的 Google TV。然后，您可以随心所欲地限制网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T16:42:27.833

由于该问题与单个制造商设备隔离，因此不再阻止自适应流式传输。事实上，如果 Sony BLueray 无法适应视频流，这仍然可能是一个问题，但需要将其转发给 Sony。感谢大家的时间。

# android - 总是在 UI 线程上调用 onSharedPreferenceChanged

> ID：10726397
> 
> 赞同：1
> 
> 时间：2012-05-23T19:14:15.720
> 
> 标签：android, sharedpreferences

我有一个单例类，它注册了一个偏好更改侦听器，例如：

```
PreferenceManager.getDefaultSharedPreferences(context.getApplicationContext())
            .registerOnSharedPreferenceChangeListener(
                    preferencesChangeListener); 
```

当某些偏好发生变化时，我的`onSharedPreferenceChanged`方法将通知感兴趣的组件有关事件。这些感兴趣的组件之一更新`ListAdapter`. 我收到一些异常，表明此列表适配器正在由不是 UI 线程的线程修改。

我查看了更改适配器数据的代码路径，没有发现任何问题。我唯一的怀疑是，`onSharedPreferenceChanged`在 UI 线程上没有调用首选项更改侦听器。

文档表明此方法是[在 UI 线程上调用的](http://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html#onSharedPreferenceChanged%28android.content.SharedPreferences,%20java.lang.String%29)

> 此回调将在您的主线程上运行。

有没有人见过不是这种情况的情况？我在应用程序上下文中注册了我的偏好更改侦听器是否重要？

**更新**：这是堆栈跟踪。除此以外，数组大小始终为 0。这就是我查看共享首选项侦听器的原因，因为这是我清除适配器中数据的唯一代码路径。该索引不为零，因此表明之前有数据。

```
> java.lang.IndexOutOfBoundsException: Invalid index 51, size is 0
at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
at java.util.ArrayList.get(ArrayList.java:311)
at com.palta.earthquake.EarthquakeAdapter.getItem(EarthquakeAdapter.java:56)
at com.palta.earthquake.EarthquakeAdapter.getView(EarthquakeAdapter.java:86)
at android.widget.AbsListView.obtainView(AbsListView.java:1294)
at android.widget.ListView.makeAndAddView(ListView.java:1727)
at android.widget.ListView.fillUp(ListView.java:682)
at android.widget.ListView.fillGap(ListView.java:628)
at android.widget.AbsListView.trackMotionScroll(AbsListView.java:2944)
at android.widget.AbsListView.onTouchEvent(AbsListView.java:2065)
at android.widget.ListView.onTouchEvent(ListView.java:3315)
at android.view.View.dispatchTouchEvent(View.java:3765)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:905)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:944)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:944)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:944)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:944)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:944)
at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1701)
at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1116)
at android.app.Activity.dispatchTouchEvent(Activity.java:2093)
at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1685)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1802)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:143)
at android.app.ActivityThread.main(ActivityThread.java:4914)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:52:59.720

您是否在 Android <=2.2 上运行该应用程序？如果是，`commit()`则 2.3 中的实现发生了变化，因此它总是在主线程中执行（因此`onSharedPreferenceChanged()`也是如此），但在 2.2 中没有。

看到[这个线程](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/QjXxJuMyIq8)。

# android - ListVew 需要的建议

> ID：10726399
> 
> 赞同：0
> 
> 时间：2012-05-23T19:14:23.553
> 
> 标签：android, listview, onlongclicklistener

我的活动有一个`ListView`。现在假设您有一个长类型变量“id_item_clicked”。还有一个类型的变量，`ListView`即 'list' 。现在假设您长时间单击列表视图中的一个项目。将 `id_item_clicked = list.getId();`长时间单击的项目的 id 初始化为变量 id_item_clicked？有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:18:23.663

`getId()`将检索 ListView 本身的 ID，而不是您长按的视图。 [View.getId() 的文档](http://developer.android.com/reference/android/view/View.html#getId%28%29)

如果您想获取您长时间按下的视图的 ID，我建议[`OnItemLongClickListener`](http://developer.android.com/reference/android/widget/AdapterView.OnItemLongClickListener.html)在您的活动中实现一个并使用其中的 ID 参数

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T19:21:28.063

列表中的每个项目都有一个位置。您可以将 setOnItemLongClickListener 用于列表视图，以获取被长按的内容。

无论如何，有关 listView 的更多提示，请观看此视频： [http ://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

# svn - SVN 从一个分支复制到另一个分支

> ID：10726405
> 
> 赞同：0
> 
> 时间：2012-05-23T19:14:43.653
> 
> 标签：svn

我对 SVN 有一个典型的问题。我在这个存储库中进行了搜索，但它们不是我的问题。

我以这种方式设置了svn。

```
"     |--- New development branch
trunk ------------ ---------------------Development Branch
    "        |--base tag-----|release tag 
```

我目前正在努力`Development Branch`并做了很多改变。管理员现在创建了`New development branch`复制所有内容`base tag`，现在要求我`New development branch`用于进一步的开发。

我的问题是如何将所有文件复制到`New development branch`然后开始使用当前工作目录中的新分支[我仍然有没有签入和工作状态的文件]。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:18:58.233

您要查找的内容称为*merge*。它将接受您的更改并将比 new-dev 中的更新（来自 base-tag）中的更改应用到该分支。

*注意*：如果 base-tag 或 new-dev 有修改，因为 base-tag 是从主干复制的，您可能会遇到一些必须手动解决的冲突（对同一文件/文件夹的编辑冲突）。大多数时候这应该不是问题，因为 svn 将能够弄清楚如何合并更改

# database - 无法创建数据源，“列 'TABLE_CAT' 不属于表 Tables

> ID：10726406
> 
> 赞同：5
> 
> 时间：2012-05-23T19:14:45.680
> 
> 标签：database, visual-studio-2010, visual-studio-2005, odbc, advantage-database-server

我正在尝试将数据源添加到我的 Visual Studio 项目中，但是它总是给我一个错误：

```
Column 'TABLE_CAT' does not belong to table Tables. 
```

我在 vs2005 和 vs2010 中都遇到了同样的错误。根据我的阅读，这个错误是由不兼容 ODBC 3.0 的 ODBC 驱动程序引起的，但是[根据 Sybase 的说法，我拥有的驱动程序是 odbc3.0 兼容的。](http://www.sybase.com/products/databasemanagement/advantagedatabaseserver/odbc-driver)（我有版本 10.10.00.28）。

作为旁注，我**可以**很好地查询数据库。我只是无法创建数据源。

这是错误的图像： ![这是我的错误](../Images/55cda2e8c47457d47b363bfa2348eae1.png)

谢谢你的帮助。

**编辑：**

以下是我采取的步骤：

*   1）[安装Advantage ODBC驱动程序：（](http://devzone.advantagedatabase.com/dz/content.aspx?Key=20&Release=16&Product=14&Platform=14) 我的电脑和我访问的服务器都是64位的）
*   2) 在数据源 (ODBC) 中设置我的 ODBC 连接
*   3）在VS中，数据源（左侧）->添加新数据源
*   4) 点击“数据库”
*   5) 点击“数据集”
*   6) 选择 ODBC 数据源，选择“myODBC”，提供我的登录信息
*   7）按“测试连接”->成功
*   8) 按确定。然后我得到错误。

我还尝试了 32 位驱动程序、.Net 数据提供程序，并尝试“连接到数据库”而不是在 VS 中添加数据源。都给我同样的错误。但是，我可以很好地查询，如果我在 C# 应用程序中使用连接字符串，它就可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:21:38.637

您遇到的问题出在您使用的 ODBC 驱动程序中。Visual Studio 2005 连接到支持 ODBC 3.0 api 并且特别是实现 SQLInfo 方法的 ODBC 数据源。您在问题报告中的表现表明您的驱动程序要么是低级的（即 3.0 之前的版本），要么是某些可选的 ODBC 功能没有实现。

应提供 ODBC 2.0 backwords 兼容性。或者应该提供一种选择 ODBC 2.0 的方法作为 ODBC 3.0 的替代方案。以下是报告相同问题的其他一些链接：

1.  [http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=544499&SiteID=1](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=544499&SiteID=1)
2.  [http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=504729&SiteID=1](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=504729&SiteID=1)
3.  [http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=85821&SiteID=1](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=85821&SiteID=1)
4.  [http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=132156&SiteID=1](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=132156&SiteID=1)

[资源](http://connect.microsoft.com/VisualStudio/feedback/details/123248/odbc)

# ios - 有人可以帮助我了解 XCode 的工作原理吗？

> ID：10726407
> 
> 赞同：0
> 
> 时间：2012-05-23T19:14:46.203
> 
> 标签：ios, xcode

我已经学习 Python 大约一年了，但我想我会尝试 iOS 编程，所以我买了一本教程[书](http://www.informit.com/store/product.aspx?isbn=0321699424)。不幸的是，这本书使用了一个过时的 XCode 版本。显然，书中使用的 ES1REnderer 类文件不再是默认类。所以，我查看了 Apple 的开发者网站，看看他们是否可以帮助我，但他们只有 XCode 4 的教程，而且由于我没有 Lion，我使用的是 XCode 3.2.6。所以我的问题是，我应该将 ES1Renderer 类文件中的所有代码放入 View Controller 类中，还是应该找到一个新教程？我是 iOS 编码的新手，一般来说是 Objective C，所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:22:13.720

坚持使用最新版本的 xcode，每当您从书中看到不推荐使用的方法时，请查看苹果的文档以查看替代方法。

# php - 使用 PHP 对 XML 进行排序，返回 JSON

> ID：10726410
> 
> 赞同：1
> 
> 时间：2012-05-23T19:14:54.740
> 
> 标签：php, xml, json, sorting, xpath

我想知道是否有更好的方法可以做到这一点。我正在从提要中读取 XML，对节点进行排序（因为创建它的人都不能......），然后以 JSON 形式返回（因为这是一个 AJAX 调用，并且在 JavaScript 中解析 XML 很糟糕）。

我一直在使用[如何对多维 XML 文件进行排序？](https://stackoverflow.com/questions/3998722/how-to-sort-a-multi-dimensional-xml-file)，但是我在对排序的 XML 进行 json 编码时遇到了一个问题（没有作为 JSON 返回到 JavaScript），我认为这是从 xpath 中的“作业”向下钻取。

我绕过它的方式感觉很脏，所以我想知道是否有更好的解决方案。我发现打印 json_encode($xml) 与 json_encode($jobs) 的不同之处仅在于 $jobs 字符串需要一个 '{"Job": [xxx] }' 包装器，所以我只是将那里的东西连接起来工作......但感觉很不对劲！

我的PHP代码如下；我很想知道是否有人有更优雅的解决方案！

```
// curls in rss feed
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, "https://overdriveinteractive.applicantstack.com/feed/jobs");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$output = curl_exec($ch);
curl_close($ch);

// loads xml
$xml = simplexml_load_string($output, 'SimpleXMLElement', LIBXML_NOCDATA);

// adds timestamp date field for sorting
foreach($xml->Job as $job) {
    $job->addChild('date', strtotime($job->DateCreated));
}

// sorts xml
$jobs = $xml->xpath('/Openings/Job');
xsort($jobs, 'date', SORT_DESC);

echo '{"Job":' . json_encode($jobs) . '}';

function xsort(&$nodes, $child_name, $order=SORT_ASC) {
    $sort_proxy = array();

    foreach ($nodes as $k => $node) {
        $sort_proxy[$k] = (string) $node->$child_name;
    }

    array_multisort($sort_proxy, $order, $nodes);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:38:03.747

这应该有效：

```
json_encode(array("Job" => $jobs)); 
```

# css - 具有 CSS 粘性页脚 + 960 网格布局的重叠块

> ID：10726413
> 
> 赞同：0
> 
> 时间：2012-05-23T19:15:02.257
> 
> 标签：css, sticky-footer, 960.gs

我下载[了 CSS 粘页脚](http://www.cssstickyfooter.com/)和[960 网格系统](http://960.gs)代码。

粘性页脚按预期工作 - 如果内容窗格为空，则页脚会粘在视口底部，当页脚已满时会向下推。

我在 960 网格系统中使用 css 粘性页脚代码，但是当侧边栏内的内容展开并到达页脚时，页脚与侧边栏内容的末尾重叠：

[http://noseyparka.me.uk/sandbox/](http://noseyparka.me.uk/sandbox/)

知道我哪里出错了，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:39:17.273

您误用了 StickyFooter，您的包装器缺少附加级别的定义，以保护正文内容不与页脚重叠。

为了解决这个问题，将`main`id 添加到 body-content 级别（在我们的例子中是 960gs 容器）以适应：

```
<div id="wrap">
    <div class="container_12" id="main">
        <!-- ... -->
    </div>
</div> 
```

**参考：**

*   [StickyFooter 的 HTML 结构](http://www.cssstickyfooter.com/html-code.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:18:59.110

如果您像这样向容器添加边距底部

```
.container_12 {
    margin-bottom: 100px;
    } 
```

`#footer`这将弥补`margin-top: -100px`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T20:29:03.313

链接似乎很好。好像你修好了。它在页脚中嵌入了我要建议的 css：clear:both。

# php - 使用远程 xdebug 配置 NetBeans 7.1.2。客户端：OSX 10.7 远程：服务器 2003 SP2

> ID：10726418
> 
> 赞同：2
> 
> 时间：2012-05-23T19:15:54.723
> 
> 标签：php, netbeans, xdebug, remote-debugging, netbeans-7

正如标题所述，我的问题是我无法让 NetBeans 连接到远程调试会话。我的设置如下：

带有 netbeans 的客户端：
Mac OSX 10.7
Netbeans 7.1.2
防火墙已禁用

带有 WAMP 的服务器：
WAMP 版本 2.2
Server 2003 SP2
防火墙已禁用

php.ini:
zend_extension = c:\wamp\bin\php\php5.3.10\ext\php_xdebug-2.2.0-5.3-vc9.dll

```
[xdebug]  
xdebug.remote_enable=1  
xdebug.remote_handler=dbgp  
xdebug.remote_connect_back=1  
xdebug.remote_port=9000 
```

当我查看 PHPInfo 时，它指出：
“该程序使用 Zend 脚本语言引擎：Zend Engine v2.3.0，版权所有 (c) 1998-2012 Zend Technologies with Xdebug v2.2.0，版权所有 (c) 2002-2012，德里克·雷森斯（Derick Rethans）

但我看不到 xdebug 的其他条目。（根据[http://wiki.netbeans.org/HowToConfigureXDebug](http://wiki.netbeans.org/HowToConfigureXDebug)我应该看到另一个 xdebug 部分？）

当我运行“xdebug.org Tailored Installation Instructions”时，我得到：

定制安装说明摘要
Xdebug 已安装：2.2.0
服务器 API：Apache 2.0 处理
程序 Windows：是 - 编译器：MS VC9 - 架构：x86
Zend 服务器：无
PHP 版本：5.3.10
Zend API nr：220090626
PHP API nr：20090626
调试构建：否
线程安全构建：是
配置文件路径：C:\WINDOWS
配置文件：C:\wamp\bin\apache\Apache2.2.21\bin\php.ini
扩展目录：c:\wamp\bin\php\php5。 3.10\ext
你已经在运行最新的 Xdebug 版本
但是这里有说明

在这一点上，欢迎提出任何建议。我不确定还能尝试什么。正如您从 phpini 中看到的那样，我启用了 xdebug.remote_connect_back - 我知道这可能是一个安全问题，但应该简化设置。我还运行了这里建议的 php 脚本：[https](https://blogs.oracle.com/netbeansphp/entry/howto_check_xdebug_installation) ://blogs.oracle.com/netbeansphp/entry/howto_check_xdebug_installation ，它只是没有输出。

提前致谢，

詹姆士。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:07:39.780

你绝对应该试试 Codebug [http://codebugapp.com](http://codebugapp.com) OSX 的 Xdebug 客户端

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:32:41.983

**清单：**

*   您是否重新启动（停止-等待-启动）您的 apache 服务器？

*   你有没有把“运行配置”中的“项目URL”配置成一个执行php的页面？

*   服务器的防火墙是否允许访问端口 9000？

# google-app-engine - 使用 Search API 检测数百万文本项的抄袭

> ID：10726423
> 
> 赞同：1
> 
> 时间：2012-05-23T19:16:09.777
> 
> 标签：google-app-engine

我正在开发一个需要剽窃检测的应用程序。我想知道是否可以以任何方式使用新的搜索 API 或应用程序引擎中的任何其他 API（如预期搜索）来完成数百万实体的这项任务？

如果没有，建议的 python 库是什么？

具体来说，我需要检测提交给课程作业的解决方案之间的相似性。它们可以是程序甚至文本，但通常不会超过几段。

我知道 Winnowing 算法（顺序散列），但这里的问题是搜索数百万提交的作业（不是少数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T01:25:31.523

您可以使用全文搜索 API 搜索文档语料库；这取决于全文搜索的常见注意事项：您可以搜索单个术语和确切的短语，但没有内置的“模糊性” - 不会返回接近匹配的内容（除非处理“短语”和“短语”和“短语”是同一个词）。

当然，抄袭检测比仅仅找到候选文档要复杂得多。您最好的选择可能是使用 TF-IDF 之类的东西来查找输入文本中最重要的单词，使用全文搜索 API 查找包含这些单词的一组候选文档，然后在对候选人的记忆。

# image - 计算图像像素

> ID：10726426
> 
> 赞同：-2
> 
> 时间：2012-05-23T19:16:12.883
> 
> 标签：image, opencv

所有图像都有像素（x，y）

1.  我想知道如何计算图像中的 x 和 y 像素

2.  图像中的像素数

任何人都可以帮助我使用opencv c ++做到这一点

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:18:30.890

如果您的图像是`IplImage`，它将具有属性`width`和`height`，分别对应于 x 和 y 方向的像素数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T21:31:57.823

这是一个很好的教程，可以解决所有基本的 opencv 问题，例如查找宽度、高度：[http ://www.cs.iit.edu/~agam/cs512/lect-notes/opencv-intro/opencv-intro.html](http://www.cs.iit.edu/~agam/cs512/lect-notes/opencv-intro/opencv-intro.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:48:28.677

正如 Gnosophilon 指出的那样，如果您的图像是 opencv IplImage，那么您可以直接访问图像中的像素数。

```
int nImageType = CV_LOAD_IMAGE_COLOR;
IplImage *pImage = cvLoadImage("myImage.bmp", nImageType); 

int nNumberOfPixelInImage = pImage->imageSize; 
```

或者你可以这样做：

```
int nNumberOfPixelInImage = pImage->width * pImage->height; 
```

如果您查看 IplImage 结构的文档，您会发现很多关于图像的信息。

但请注意，结构元素“pImage->nSize”显然不是您要寻找的——这是结构本身的大小，而不是图像。

# tsql - TSQL 执行这个微小的 SELECT 查询的最简单方法是什么？

> ID：10726430
> 
> 赞同：0
> 
> 时间：2012-05-23T19:16:18.997
> 
> 标签：tsql, select

我试图找出执行一些查找的最干净的方法。我在这里有一个满是员工的索引表，然后是一个更大的工单表，它在几个地方使用了他们的 EmployeeID - 谁制作了工单，谁最后更新了它，以及谁关闭了它。我试图找出最简单的方法来在 SELECT 查询中提取他们的每个名字，而不是每次都做一个小的子查询，这就是我现在正在做的事情。

我为自己做了这个小练习，试图简化这个问题：

```
 CREATE TABLE NameLookup
    (
        NameIndex INT PRIMARY KEY CLUSTERED IDENTITY(1,1),
        Name VARCHAR(10)
    );

    CREATE UNIQUE NONCLUSTERED INDEX NameIdx ON dbo.NameLookup ([Name])
    WITH (IGNORE_DUP_KEY = OFF);

    CREATE TABLE BunchaNames
    (
        PK INT PRIMARY KEY CLUSTERED IDENTITY(1,1),
        NameOne INT FOREIGN KEY REFERENCES dbo.NameLookup(NameIndex),
        NameTwo INT FOREIGN KEY REFERENCES dbo.NameLookup(NameIndex),
        NameThree INT FOREIGN KEY REFERENCES dbo.NameLookup(NameIndex)
    );

    INSERT INTO NameLookup(Name)
    VALUES ('Bill'), ('Phil'), ('Jill'), ('Gil'), ('Fred'); 
```

所以现在，我想从 BunchaNames 中选择 NameOne、NameTwo 和 NameThree，并在 NameLookup 中显示这些名称。最简单/正确的方法是什么？是这个吗？非常感谢您的帮助！

```
 SELECT (SELECT Name FROM NameLookup WHERE NameIndex = bn.NameOne) AS NameOne,
            (SELECT Name FROM NameLookup WHERE NameIndex = bn.NameTwo) AS NameTwo,
            (SELECT Name FROM NameLookup WHERE NameIndex = bn.NameThree) AS NameThree
    FROM BunchaNames bn 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:33:35.133

为什么不使用左连接

```
select n1.Name as firstName, n2.Name as secondName, n3.Name as thirdName
from BunchaNames as bn
left join NameLookup as n1 
     on bn.NameOne=n1.nameIndex
left join NameLookup as n2  
     on bn.NameTwo=n2.nameIndex
left join NameLookup as n3  
     on bn.NameThree=n3.nameIndex 
```

# gcc - nasm 和 gcc：32 位链接失败（64 位 Mac OS X）

> ID：10726434
> 
> 赞同：1
> 
> 时间：2012-05-23T19:16:46.143
> 
> 标签：gcc, assembly, nasm, ld, i386

我刚刚用`nasm`这种方式编译了一个汇编文件：

```
$ nasm -f elf somefile.asm -o somefile.o 
```

之后我想链接`somefile.o`到一个程序`gcc`

```
$ gcc -m32 somefile.o -o someprogramm 
```

但是链接文件会打印以下错误：

```
ld: warning: ignoring file somefile.o, file was built for unsupported file format which is 
not the architecture being linked (i386)
Undefined symbols for architecture i386:
  "_main", referenced from:
     start in crt1.10.6.o
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:53:04.413

您遇到的问题是您正在创建一个与 Mac OS X 对象格式不兼容的 32 位 Linux(ELF) 对象文件。尝试将“-f elf”切换为“-f macho32”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:38:36.113

一段时间后，我决定将*Linux*用于此类程序，因为它具有更大的灵活性。*您可以在Virtual Box*等虚拟机上使用 Linux 。

# magento - Magento中禁用和删除客户的代码位置？

> ID：10726435
> 
> 赞同：0
> 
> 时间：2012-05-23T19:16:46.470
> 
> 标签：magento

我们可以在magento中**禁用** **客户吗？**如果是，相同的代码位置在哪里？

另外，从 Magento**删除**客户的代码/文件位置在哪里？

相同的**文件/函数**名称是什么？

我们如何在该页面上禁用或删除**客户 ID**？

在后端，我们可以通过**两种方式删除客户**-：

```
1\. By selecting multiple customer &  then submit action as delete
2\. Opening each indivual customer & then delete that customer 
```

这两个代码/功能是否相同？如果没有，请为我提供两种方式的代码/文件位置。

请指导我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T23:55:49.583

`Mage_Core_Model_Abstract()->delete($id)`.

# mysql - 嵌套集：检索多个路径

> ID：10726438
> 
> 赞同：2
> 
> 时间：2012-05-23T19:16:59.153
> 
> 标签：mysql, sql-order-by, nested-sets

是否可以从 MySQL 嵌套集中检索多个路径？重点是 where 条件的第二行。

```
SELECT parent.name
FROM nested_category AS node,
    nested_category AS parent
WHERE node.lft BETWEEN parent.lft AND parent.rgt
    AND node.name = 'Name1' OR node.name = 'Name2'
ORDER BY node.lft; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:20:54.270

是的当然。

在`SQL`,`OR`的优先级低于`AND`，因此您需要将查询重写为：

```
SELECT  parent.name
FROM    nested_category AS node
JOIN    nested_category AS parent
ON      node.lft BETWEEN parent.lft AND parent.rgt
WHERE   node.name IN ('Name1', 'Name2')
ORDER BY
        node.lft; 
```

这个查询效率很低，`MySQL`因为连接条件不是 sargable。

您可能希望将集合存储为`LineString`并使用空间索引来加快查询速度。

有关详细信息，请参阅我的博客中的此条目：

*   [**邻接表与嵌套集：MySQL**](http://explainextended.com/2009/09/29/adjacency-list-vs-nested-sets-mysql/)

# .htaccess - 在 301 重定向期间删除查询字符串

> ID：10726439
> 
> 赞同：0
> 
> 时间：2012-05-23T19:17:10.650
> 
> 标签：.htaccess, mod-rewrite, redirect

我正在尝试 301 以下网址

```
http://www.site.com/reviews/4f64d2862c16bf4ae40000b4?sort=all-positive 
```

至

```
http://www.site.com/reviews 
```

通过使用

```
RewriteRule ^reviews/([a-fA-f0-9]+)?$ http://www.site.com/reviews [L,R=301] 
```

但这将我重定向到

```
http://www.site.com/reviews?sort=all-positive 
```

如何在评论 ID 之后删除所有查询字符串？基本上是问号和它之后的一切。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:29:29.677

您必须使用此 RewriteRule：`RewriteRule ^reviews/([a-fA-F0-9]+)?$ http://www.site.com/reviews/$1? [L,R=301]` $1 将 id 放在 url 的末尾，“？” 删除查询。

我也将“Af”更改为“AF”，但我认为这没有必要。

**编辑** SO中已经有一个类似的问题：[mod_rewrite: remove query string from URL?](https://stackoverflow.com/questions/3457022/mod-rewrite-remove-query-string-from-url)

# objective-c - 如何动态放置地图注释？

> ID：10726444
> 
> 赞同：2
> 
> 时间：2012-05-23T19:17:43.490
> 
> 标签：objective-c, xcode, mapkit

我正在创建带有多个注释的地图，但我不知道如何动态（我在 CoreData 中有它们）。

我用这段代码修复它们：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    CLLocation *userLoc = mapView.userLocation.location;
    CLLocationCoordinate2D userCoordinate = userLoc.coordinate;

    NSLog(@"user latitude = %f",userCoordinate.latitude);
    NSLog(@"user longitude = %f",userCoordinate.longitude);

    mapView.delegate=self;

     NSMutableArray* annotations=[[NSMutableArray alloc] init];

    CLLocationCoordinate2D theCoordinate1;
    theCoordinate1.latitude = 43.82078;
    theCoordinate1.longitude = 15.307265;

    CLLocationCoordinate2D theCoordinate2;
    theCoordinate2.latitude = 44.91035917;
    theCoordinate2.longitude = 14.65576172;

    MyAnnotation* myAnnotation1=[[MyAnnotation alloc] init];

    myAnnotation1.coordinate=theCoordinate1;
    myAnnotation1.title=@"Rohan";
    myAnnotation1.subtitle=@"in the city";

    MyAnnotation* myAnnotation2=[[MyAnnotation alloc] init];

    myAnnotation2.coordinate=theCoordinate2;
    myAnnotation2.title=@"Vaibhav";
    myAnnotation2.subtitle=@"on a Bridge";

    [mapView addAnnotation:myAnnotation1];
    [mapView addAnnotation:myAnnotation2];

    [annotations addObject:myAnnotation1];
    [annotations addObject:myAnnotation2];

    NSLog(@"%d",[annotations count]);
    //[self gotoLocation];//to catch perticular area on screen
    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;

    // Walk the list of overlays and annotations and create a MKMapRect that
    // bounds all of them and store it into flyTo.
    MKMapRect flyTo = MKMapRectNull;
    for (id <MKAnnotation> annotation in annotations) {
        NSLog(@"fly to on");
        MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
        MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);
        if (MKMapRectIsNull(flyTo)) {
            flyTo = pointRect;
        } else {
            flyTo = MKMapRectUnion(flyTo, pointRect);
            //NSLog(@"else-%@",annotationPoint.x);
        }
    }

    // Position the map so that all overlays and annotations are visible on screen.
    mapView.visibleMapRect = flyTo;

    UIBarButtonItem* temp=[[UIBarButtonItem alloc] init];
    temp.title=@"Back";
    self.navigationItem.backBarButtonItem=temp;
    //[temp release];
} 
```

PS如果您需要额外的代码，请告诉。

感谢帮助

**更新：**

**地点.h**

```
...
@interface Locations : NSManagedObject

@property (nonatomic, retain) NSDecimalNumber * lat;
@property (nonatomic, retain) NSDecimalNumber * lon;
... 
```

**更新 2：**

这是我将注释“固定”的示例代码。

[http://dl.dropbox.com/u/77033905/stackoverflow/Map.zip](http://dl.dropbox.com/u/77033905/stackoverflow/Map.zip)

如何在数组上添加此注释？定义这个位置（坐标，标题，数组中的子标题并将它们添加到地图中。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:40:08.033

位置实例将是您的注释

```
[mapView addAnnotations:locationArray]; 
```

**位置.h**

```
...
@interface Locations : NSManagedObject <MKAnnotation>{
    CLLocationCoordinate2D coordinate;
}

@property (nonatomic, retain) NSDecimalNumber * lat;
@property (nonatomic, retain) NSDecimalNumber * lon;
... 
```

**位置.m**

```
...
- (CLLocationCoordinate2D)coordinate
{
coordinate.latitude = [self.lat doubleValue];
coordinate.longitude = [self.lon doubleValue];
return coordinate;
}

- (NSString *)title
{
return @"yourTitle";
}

- (NSString *)subtitle
{
return @"yourSubtitle";
} 
```

这是你想要的吗？

# c# - DateTime.Now 和 DirectoryInfo.LastWriteTime 的格式/类型之间可能存在的区别？

> ID：10726450
> 
> 赞同：1
> 
> 时间：2012-05-23T19:18:36.893
> 
> 标签：c#, .net, sql, ssis

我正在编写一个脚本作为 SSIS 包的一部分，该包正在更新 SQL Server 数据库中的一些条目。有两列，比如说 A 和 B，都是类型`datetime`，我设置`DateTime.Now`为 A 列值和`info.LastWriteTime`B 列值。

A 列更新正常，但是当它尝试更新 B 列时出现错误。我的理解是这两个语句都返回一个`DateTime`对象，那么为什么会`info.LastWriteTime`给出一个错误，而不是`DateTime.Now`呢？

**更新**：

`info`变量是从 中获得的`DirectoryInfo info = new DirectoryInfo(path)`。

给出的实际错误如下：

[DirectoryHistoryTable [39]] 错误：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80004005。OLE DB 记录可用。来源：“Microsoft SQL Server Native Client 10.0” Hresult：0x80004005 描述：“无效的日期格式”。

[DirectoryHistoryTable [39]] 错误：输入“OLE DB 目标输入”(52) 上的输入列“LastModifiedDate”(75) 存在错误。返回的列状态为：“转换失败，因为数据值溢出了指定类型。”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:39:28.403

SQL Server[`datetime`](http://msdn.microsoft.com/en-us/library/ms187819.aspx)列接受 1753 年 1 月 1 日到 9999 年 12 月 31 日之间的日期。

如果文件系统条目（在本例中为目录）不存在，则`LastWriteTime`a可能会返回 1601 年 1 月 1 日午夜 12:00 的日期。`DirectoryInfo`确保您正在获取文件系统中确实存在的目录的目录信息对象。

此行为记录在 MSDN 中[`FileSystemInfo.LastWriteTime`](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.lastwritetime.aspx)，从中`DirectoryInfo`继承：

> 如果 FileSystemInfo 对象中描述的文件不存在，则此属性将返回 1601 年 1 月 1 日午夜 12:00，协调世界时 (UTC)，调整为本地时间。

* * *

附带说明一下，如果您需要一个接受更广泛的日期时间值的列，那么您可以使用[`datetime2`](http://msdn.microsoft.com/en-us/library/bb677335.aspx)SQL Server 最新版本中可用的数据类型，如果我没记错的话，自 2008 版本以来。此数据类型支持从公元 1 月 1 日到 9999 年 12 月 31 日的日期。

# php - 仅使用 PHPDoc 查找错误

> ID：10726451
> 
> 赞同：2
> 
> 时间：2012-05-23T19:18:51.350
> 
> 标签：php, phpdoc

如何在不生成完整文档的情况下运行 PHPDoc 来获取错误列表？

我正在尝试为我的 IDE 编写一个插件，该插件根据 PHPDoc 生成的错误验证文件。但是，我不需要它来解决制作文档的麻烦。

我找不到这个选项`phpdoc`。或者，我可以使用 PHPCodeSniffer 来嗅探我们的这些违规行为。phpdoc 的规则是否以嗅探器形式提供？

示例错误（我意识到其中一些已经可以作为嗅探器使用，但希望它们在一个地方）：

*   My_Class 类没有简短描述
*   myMethod() 的 Docblock 中缺少参数 $input

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-23T22:09:56.247

[根据 phpdoc.org](http://www.phpdoc.org/docs/latest/for-users/validating-documentation-in-your-code.html)，您可以使用以下命令生成错误清单：

```
$ phpdoc -d [SOURCE] -t [TARGET] --template checkstyle 
```

[该链接](http://www.phpdoc.org/docs/latest/for-users/validating-documentation-in-your-code.html)还提供了几种替代方法来执行此操作。

# signalr - SignalR 连接/断开集线器爆炸

> ID：10726453
> 
> 赞同：5
> 
> 时间：2012-05-23T19:18:58.877
> 
> 标签：signalr

[也在这里](https://github.com/SignalR/SignalR/issues/417)作为一个问题打开了这个，但希望有人看到这个..

我有一个实现 IConnected/IDisconnect 的非常简单的集线器。在一个独立的项目中，这个集线器的测试结果很好。

当我将它放到我已经有一些其他集线器的实际项目中时，添加它会导致没有集线器可用（确认没有集线器出现在 /signalr/hubs 中）。然后我在这个集线器中注释掉 IConnected/IDisconnect 并重新编译，它与其余部分一起显示。重新添加接口打破了这一切。

有没有人见过这个？是否缺少某些配置或什么？

```
public class ChatHub : Hub, IConnected, IDisconnect
{
    public void Test(string message)
    {

    }

    public System.Threading.Tasks.Task Connect(IEnumerable<string> groups)
    {
        this.Clients.onNewUserOnline(Context.ConnectionId);
        return new Task(() => { });
    }

    public Task Reconnect(IEnumerable<string> groups)
    {
        this.Clients.onNewUserOnline(Context.ConnectionId);
        return new Task(() => { });
    }

    public Task Disconnect()
    {
        this.Clients.onUserOffline(Context.ConnectionId);
        return new Task(() => { });
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T02:39:33.833

这是指向类似问题的链接。 [有没有办法获取 Signalr 集线器组中的连接数？](https://stackoverflow.com/questions/9979524/is-there-a-way-to-get-number-of-connections-in-signalr-hub-group)

如果那没有帮助您可以查看 SignalR 0.5.1 中的新连接状态内容

**连接状态更改**

SignalR 连接对用户来说一直是一个黑盒子，这使得很难检测到底层连接状态的变化。我们在 JavaScript 和 .NET 客户端中公开了一个新的 stateChanged 事件。这使您可以侦听状态更改并以不同的方式对其做出反应。这是一个示例，如果连接进入重新连接状态并且 10 秒后没有恢复，则向用户显示一条消息：

```
var chat = $.connection.chat;
var timeout = null;
var interval = 10000;
chat.addMessage = function (msg) {
    $('#messages').append('<li>' + msg + '</li>');
};
$.connection.hub.stateChanged(function (change) {
    if (change.newState === $.signalR.connectionState.reconnecting) {
        timeout = setTimeout(function () {
            $('#state').css('backgroundColor', 'red')
                .html('The server is unreachable...');
        }, interval);
    } else if (timeout && change.newState === $.signalR.connectionState.connected) {
        $('#state').css('backgroundColor', 'green')
            .html('The server is online');
        clearTimeout(timeout);
        timeout = null;
    }
});
$.connection.hub.start(); 
```

# python - 合并对父目录的调用后，如何在 appengine 中启用模板缓存？

> ID：10726458
> 
> 赞同：1
> 
> 时间：2012-05-23T19:19:08.860
> 
> 标签：python, django, google-app-engine

当 Django 模板中的扩展标签无法引用父目录中的基本模板时，我的问题就开始了。这个问题[1](https://stackoverflow.com/questions/4994913/app-engine-default-django-version-change)对问题有很好的回答，但是它禁用了appengine中默认的template.render函数提供的隐式模板缓存。

答案的作者还提到，实现这个模板缓存会相当简单，但我觉得篡改这种功能会在未来产生错误。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:38:11.073

我们所有的模板目录都是一个模板目录的子文件夹，所以我们只需要让加载器首先查看那里。

我没有测试这是否/如何破坏模板缓存，但它不会改变行为 AFAICT。

我们通过使用这样的模块扩展基本加载器来做到这`alternative_path.py`一点：

```
class Loader(filesystem.Loader):
"""
Looks for templates in an alternative path.

Allows a template to extend a template which is located in a specified views path.
"""

is_usable = True
__view_paths = None

def __init__(self, views_path):
    if Loader.__view_paths is None:
        Loader.__view_paths = [views_path]

def get_alternative_template_sources(self, template_name):
    for template_dir in Loader.__view_paths:
        try:
            yield safe_join(template_dir, template_name)
        except UnicodeDecodeError:
            # The template dir name was a bytestring that wasn't valid UTF-8.
            raise
        except ValueError:
            # The joined path was located outside of this particular
            # template_dir (it might be inside another one, so this isn't
            # fatal).
            pass

def get_template_sources(self, template_name, template_dirs):
    return itertools.chain(
        filesystem.Loader.get_template_sources(self, template_name, template_dirs),
        Loader.get_alternative_template_sources(self, template_name)) 
```

然后在同一个模块中：

`_loader = Loader`

然后在`main.py`：

```
def main():
    views_path = os.path.join(os.path.dirname(__file__), 'templates')
    settings.TEMPLATE_LOADERS = (('web.rich.templates.alternative_path.Loader', views_path),
                             'django.template.loaders.filesystem.Loader',
                             'django.template.loaders.app_directories.Loader') 
```

# ember.js - “无法对不在 DOM 中的 Metamorph 执行操作” - 仅在 <= IE8 中

> ID：10726460
> 
> 赞同：3
> 
> 时间：2012-05-23T19:19:19.213
> 
> 标签：ember.js

使用 Ember 0.9.7.1

当我的应用程序启动并进入第一个状态时，在 IE8 及以下版本中出现此错误。我有一个相当大的应用程序，所以我不确定我是否可以在 jsFiddle 中重现，但我会尝试在下面展示相关的部分。

我在 GitHub 上查看过这些类似的问题，但我认为两者都没有准确描述我做错了什么（它必须是我......对吗？:)）

[https://github.com/emberjs/ember.js/issues/752](https://github.com/emberjs/ember.js/issues/752)
[https://github.com/emberjs/ember.js/issues/447](https://github.com/emberjs/ember.js/issues/447)

我的应用程序的初始视图由状态管理器创建/加载，如下所示：

```
SYOS.stateManager = Em.StateManager.create({

    enableLogging: true,
    rootElement: #syos-root,
    initialState: 'noSectionSelected',

    noSectionSelected: Ember.ViewState.create({

        view: SYOS.SelectSectionView,

        chooseSection: function (manager, context) {

            manager.goToState('sectionSelected');

        }

    }),
<snip> 
```

该视图基本上定义为：

```
SYOS.SelectSectionView = Em.View.extend({

templateName: 'selectSectionView',
sectionsBinding: 'SYOS.sectionController.sections'
}); 
```

模板的精简版本如下所示：

```
<script type="text/x-handlebars" data-template-name="selectSectionView">

<h2>Some markup</h2>

<table class="select-sect" cellspacing="0">
{{#each sections}}
    {{#view SYOS.SelectSectionRowView sectionBinding="this" tagName="tr"}}
    <td class="sect">{{section.name}}</td>
    {{/view}}
{{/each}}
</table>

</script> 
```

如果有帮助，这个模板直接在我的 html 中定义。

当我加载页面时，控制台日志显示：

```
日志：STATEMANAGER：输入 noSectionSelected
SCRIPT438：对象不支持此属性或方法
ember-0.9.7.1.min.js，第 10 行字符 30680
SCRIPT5022：无法对不在 DOM 中的 Metamorph 执行操作。
ember-0.9.7.1.min.js，第 13 行字符 29412
SCRIPT5022：抛出异常但未捕获
ember-0.9.7.1.min.js，第 13 行字符 16607

```

使用 IE 的调试器 (eww) 中断第一个错误，我可以看到错误*似乎*发生在 #each metamorph 标记上。它打破了这一行：

```
g.prototype.checkRemoved=function(){if(this.isRemoved())throw new Error("Cannot perform operations on a Metamorph that is not in the DOM.")} 
```

因为 this.isRemoved() 返回 true。在调试器中检查`this`我看到`this.start`== "metamorph-6-start"。如果我在工作浏览器中搜索那个变形标记，它似乎是`#each`我模板中块的开始标记。

sectionBinding 是一个从 jQuery .ajax 调用加载的数组，所以最初它是 [] ，然后使用`this.get('sections').pushObject(section);`while 在我的控制器中循环 ajax 调用的结果来填充。

在此状态下，我没有进行任何动态视图的附加或删除，它只需要在它们从 ajax 服务调用返回时加载视图并绑定这些部分。

任何人都可以在这个问题上指出我正确的方向吗？谢谢！

编辑：更新到 Ember 0.9.8.1，现在控制台中少了一个错误：

```
日志：STATEMANAGER：输入 noSectionSelected
SCRIPT5022：无法对不在 DOM 中的 Metamorph 执行操作。
ember-0.9.8.1.min.js，第 14 行字符 4051
SCRIPT438：对象不支持此属性或方法
ember-0.9.8.1.min.js，第 10 行字符 31677

```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T21:48:19.100

跟进这件事，让任何谷歌员工在那里我必须做些什么来解决这个问题。

简而言之 - 我通过完全修改我的视图以及如何将它们添加到应用程序来解决这个问题。

我强烈建议任何对 Ember 应用程序感到奇怪的人使用 Ember 的 Debug 版本运行他们的应用程序。控制台中提供的断言和反馈非常宝贵。

我实际上有两个问题：

1）在`#each`上面的表格中，我有一个和另一个`#each`我使用绑定车把助手的地方（在[http://codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds /](http://codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds/)并且非常非常有用）。

由于它嵌套得太深，我不得不调用我的绑定助手 using `{{ boundHelper this}}`，这似乎真的把事情搞砸了。Chrome、Firefox 和 IE9 似乎并没有对此感到窒息——不知道为什么。但基本上使用绑定助手`this`最终将 a 传递`''`给 normalizePath，并导致此断言失败

```
function normalizePath(path) {
  Ember.assert('must pass non-empty string to normalizePath()', path && path!==''); 
```

我通过将 boundHelper 更改为对值数组或单个值起作用来解决此问题，因此我可以将其编写为`{{boundHelper colors}}`并在我的帮助程序中循环而不是使用`#each`.

2）所以，一个问题下来了，但仍然得到原来的变形错误。清除另一个错误后，我现在可以判断变形错误完全来自另一个视图。

`#view`我使用帮助程序在我的 HTML 中定义了 2 个嵌套视图。不知何故，嵌套视图导致父级重新渲染。同样，Ember 的调试版本是一个很好的工具来跟踪它，因为它在控制台中记录了一条关于它的消息。

我不是 100% 确定为什么会出现这样的问题，但似乎在重新渲染期间，变形标记不存在并且它很适合。这看起来确实可能是 Ember 中的一个错误，但更有可能的是我只是没有按照“Ember 方式”做某事。与 Ember 一样好，它也很容易让你的脚离开 :)

我最终将这些内联视图制作成 Handlebars 模板，并将视图附加到 Ember App.ready 函数中的 DOM。这清除了所有错误，IE 7 和 8 现在可以无错误地呈现应用程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-19T05:14:56.917

当我在 HTML 注释中发现一些把手代码时，我刚刚解决了这个问题。有问题的代码可能刚刚被删除或包含在把手注释中，如下所示：

```
{{!--
    <h1>{{myTitle}}</h1>
--}} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-10T16:26:29.860

我遇到了这个问题，因为我们试图这样做：

```
<input size="16" type="text" valueBinding="{{deadline}}"> 
```

事实上它应该是：

```
<input size="16" type="text" {{bindAttr valueBinding="deadline"}}> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-10T23:03:47.163

我今天刚刚遇到这个问题，希望我的经验对其他人有所帮助。我们看到了相同的错误消息，并且在删除了所有注释掉的车把代码后，将此引用更改为显式的 #each 对象名称，但没有任何效果。

事实证明，如果您嵌套 #with 和 #each 多次，视图可能会有点不稳定：

```
{{#with view.content.project as project}}
    //set some project fields
    {{#each job in project.jobs}}
        {{#with job}}
            // set job some fields
        {{#/with}}
        {{#each task in job.tasks}}
            {{#with task}}
                // set tasksome fields
            {{#/with}}
        {{/each}}
    {{/each}}
{{/with}} 
```

我们发现，如果我们在第一个 #each 之前使用 (#with view.content.project as project) 关闭项目，错误就会消失。我不确定为什么这是一个问题，但是，也许这会帮助其他人解决同样的问题。

有效的代码：

```
{{#with view.content.project as project}}
    //set some project fields
{{/with}}
{{#each job in project.jobs}}
    {{#with job}}
        // set job some fields
    {{#/with}}
    {{#each task in job.tasks}}
        {{#with task}}
            // set tasksome fields
        {{#/with}}
    {{/each}}
{{/each}} 
```

# jsf - 如何将参数传递给渲染属性？

> ID：10726462
> 
> 赞同：2
> 
> 时间：2012-05-23T19:19:44.223
> 
> 标签：jsf, primefaces, el

我尝试像这样将参数传递给方法 admin：

```
<p:toolbarGroup align="right" rendered="#{loginBean.admin('dataread'}">
                            <h:form>
                                <p:commandButton value="manage users" ajax="false"
                                                 icon="ui-icon-document" action="/admin/manageUsers.xhtml?faces-redirect=true"/>
                            </h:form>
                        </p:toolbarGroup> 
```

我的托管 Bean 中的代码是这样的

```
public boolean isAdmin(String role){
          FacesContext facesContext = FacesContext.getCurrentInstance();
          HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
          return request.isUserInRole("admin");                
          } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T21:30:15.290

```
rendered="#{loginBean.admin('dataread'}" 
```

您在那里缺少`)`一个 EL 语法错误，这会导致该值未被识别为 EL 表达式，因此被视为普通的香草字符串，该字符串将在`rendered`属性中默认为 boolean `true`。此外，当指定 action 表达式`#{bean.method()}`而不是 value 表达式`#{bean.property}`时，您应该指定完整的方法名称，因此`isAdmin()`而不是`admin()`.

总而言之，这应该这样做：

```
rendered="#{loginBean.isAdmin('dataread')}" 
```

* * *

**与具体问题**无关**`HttpServletRequest`， EL 范围中已经可以使用`#{request}`，所以这也应该不需要支持 bean 样板：**

 **```
rendered="#{request.isUserInRole('admin')}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T21:30:45.873

**正确的语法**：

```
rendered="#{loginBean.isAdmin('dataread')}"> 
```

代替

```
rendered="#{loginBean.admin('dataread'}" 
```

**确保您的 EL 支持此类功能**：

```
 <dependency>
      <groupId>org.glassfish.web</groupId>
      <artifactId>el-impl</artifactId>
      <version>2.2</version>
 </dependency> 
```

查找包含有关在 JSF 中传递参数的教程的更多信息：

*   [如何在方法表达式中传递参数 - JSF 2.0](http://www.mkyong.com/jsf2/how-to-pass-parameters-in-method-expression-jsf-2-0/)

*   [将参数从 JSF 页面传递到支持 bean 的 4 种方法](http://www.mkyong.com/jsf2/4-ways-to-pass-parameter-from-jsf-page-to-backing-bean/)**

# .net - Linq 查询结果分为两个对象

> ID：10726464
> 
> 赞同：1
> 
> 时间：2012-05-23T19:19:58.080
> 
> 标签：.net, linq, linq-to-sql

我目前有以下 linq，它运行并获取两个强类型对象（DAL.Driver 和 DAL.Licence）。但是，我想将结果转换为包含 BLL.Driver 和 BLL.Licence 对象的单个 DriverODSJoined 对象。

```
public class DriverODSJoined
{
    public BLL.Driver driver { get; set; }
    public BLL.Licence licence { get; set; }

    public static void GetData()
    {
        DAL.DriverDataContext dataContext = new DAL.DriverDataContext();

        var query = (from d in dataContext.drivers
                     join c in dataContext.licences on d.licence_id equals c.id into t1
                     from t2 in t1.DefaultIfEmpty()
                     select new { Driver = d, Licence = t2 });
    }
} 
```

对于一个类对象的链接查询，我会这样做：

```
query.Select(a => new BLL.Driver.Driver()
        {
            id = a.Driver.id
            etc
        }).ToList(); 
```

因此，要填充 DriverODSJoined 列表，我想我会做这样的事情：

```
 query.Select(a => new BLL.Driver.DriverODSJoined()
        {
            driver.id = a.Driver.id,
            licence.id = t2.id
        }).ToList(); 
```

但是它不起作用。我该如何做才能得到一个 List ，每个 List 都包含一个 BLL.Driver 和 BLL.Licence 对象的实例？

谢谢，理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:17:48.543

不久之后我想通了，当然我必须先实例化包含对象中的每个对象，然后再将值分配给它们的成员变量。所以这里是一个例子：

```
List<DriverODSJoined> list = query.Select(a => new DriverODSJoined()
{ 
    driver = new Driver()
    { 
        address1 = a.driver.address1
    },
    check = new BLL.DVLA.Licence()
    {
        id = a.licence.id 
    } 
}).ToList(); 
```

# iphone - 使用 AVPlayer 循环播放一小段视频，然后向后播放

> ID：10726469
> 
> 赞同：2
> 
> 时间：2012-05-23T19:20:24.173
> 
> 标签：iphone, objective-c, ios, ipad, avfoundation

在我的应用程序中，我有一个`AVPlayer`用于播放、擦除等视频文件。我正在尝试实现以下功能，但还没有提出一个好的解决方案......

假设视频文件长 3000 帧，播放头位于第 1000 帧。当用户按下“播放”按钮时，我希望视频播放以第 1000 帧为中心的 10 帧部分，即第 995 帧- 1005。当播放器到达第 995 帧或第 1005 帧时，我希望播放反向。换句话说，帧顺序是：

1000-1001-1002-1003-1004-1005-1004-1003-1002-1001-1000-999-998-997-996-995-996-997-998-999-1000

并无限重复。

我首先尝试使用`-addBoundaryTimeObserverForTimes:queue:usingBlock:`来定义视频部分的起点和终点，并在块中切换播放器速率的符号。这*有时会*起作用，但是当视频部分很小时，最终会“错过”其中一个边界，并且视频将继续沿该方向播放，直到到达文件的开头或结尾。

我试图通过添加另一个时间观察器来缓解这种情况，`–addPeriodicTimeObserverForInterval:queue:usingBlock:`它会检查是否错过了边界并重置循环播放。*同样，这有时*会起作用，但如果播放区域的开始或结束也恰好是视频文件的第一帧或最后一帧（分别），则会失败。

*然后*，我尝试设置一个回调，`AVPlayerItemDidPlayToEndTimeNotification`以便在播放到视频文件的边界时再次重置播放。再一次，这*有时*会起作用，但最终会停止播放或导致播放在远离文件末尾的方向无限期地播放。

我不知道该怎么做。我可以创建一个`AVMutableComposition`来模拟效果，但是还有很多其他对象取决于视频播放器的确切时间，这需要对应用程序进行重大检查才能实现一个完整的单独处理系统来模拟适当的视频来自作曲的玩家时间（我现在不太愿意这样做）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:04:13.673

我想我会在你的情况下做的是你的第二个选择：

使用 addPeriodicTimeObserverForInterval:queue:usingBlock，但为了缓解您描述的问题，请在剪辑的前面和结尾添加一秒钟的空白视频（如果您可以控制剪辑资源）——无论是在源。

如果你不能这样做，我认为查看 AVMutableComposition 可能是有意义的（在合成的前面和后面添加一个空剪辑），然后再次使用 addPeriodicTimeObserverForInterval:queue:usingBlock 就像你指示的那样。

# r - ggplot 在许多数据框上更改标题

> ID：10726470
> 
> 赞同：4
> 
> 时间：2012-05-23T19:20:42.013
> 
> 标签：r, ggplot2

我有许多数据帧，它们是相同类型分析的输出，但参数不同。我想用 绘制数据框`ggplot`，更改主标题以指定使用的不同参数。

我考虑将数据框放入列表中并使用`lapply`. 但我不知道如何在`lapply`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T02:02:56.623

你可以试试这样的

```
parameters = data.frame(p1=letters[1:5], p2=round(rnorm(5),2))
l = replicate(5, data.frame(x=1:10, y=rnorm(10)), simplify=FALSE)
names(l) = do.call(paste, c(parameters, sep=","))

plot_one = function(x)
  ggplot(data = l[[x]]) + geom_path(aes(x, y)) +
   opts(title = x)

plots = lapply(names(l), plot_one)

do.call(gridExtra::grid.arrange, plots) 
```

![在此处输入图像描述](../Images/52cbbe3287af7a3dcb4ef140b279e2df.png)

# linux - 加入多个文件

> ID：10726471
> 
> 赞同：20
> 
> 时间：2012-05-23T19:20:45.227
> 
> 标签：linux, join, sed

我正在使用标准连接命令来连接两个基于 column1 的排序文件。命令是简单的 join file1 file2 > output_file。

但是如何使用相同的技术加入 3 个或更多文件？join file1 file2 file3 > output_file 上面的命令给了我一个空文件。我认为 sed 可以帮助我，但我不太确定如何？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-23T19:24:06.083

`man join`：

```
NAME
       join - join lines of two files on a common field

SYNOPSIS
       join [OPTION]... FILE1 FILE2 
```

它仅适用于**两个**文件。

如果你需要加入三个，也许你可以先加入前两个，然后加入第三个。

尝试：

```
join file1 file2 | join - file3 > output 
```

应该加入这三个文件而不创建中间临时文件。`-`告诉 join 命令从其中读取第一个输入流`stdin`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-15T07:46:57.210

`join`可以通过递归构造 s 的管道来连接多个文件（N>=2） ：

```
#!/bin/sh

# multijoin - join multiple files

join_rec() {
    if [ $# -eq 1 ]; then
        join - "$1"
    else
        f=$1; shift
        join - "$f" | join_rec "$@"
    fi
}

if [ $# -le 2 ]; then
    join "$@"
else
    f1=$1; f2=$2; shift 2
    join "$f1" "$f2" | join_rec "$@"
fi 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-06-22T12:08:56.717

我知道这是一个老问题，但供将来参考。如果您知道要加入的文件具有此处问题中的模式，例如，`file1 file2 file3 ... fileN` 那么您可以使用此命令简单地加入它们

```
cat file* > output 
```

其中输出将是按字母顺序连接的一系列连接文件。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-09-26T08:13:47.573

我为此创建了一个函数。第一个参数是输出文件，其余参数是要连接的文件。

```
function multijoin() {
    out=$1
    shift 1
    cat $1 | awk '{print $1}' > $out
    for f in $*; do join $out $f > tmp; mv tmp $out; done
} 
```

用法：

```
multijoin output_file file* 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-29T07:43:26.137

虽然有点老问题，但这就是你如何用一个来做到这一点`awk`：

```
awk -v j=<field_number> '{key=$j; $j=""}  # get key and delete field j
                         (NR==FNR){order[FNR]=key;} # store the key-order
                         {entry[key]=entry[key] OFS $0 } # update key-entry
                         END { for(i=1;i<=FNR;++i) {
                                  key=order[i]; print key entry[key] # print
                               }
                         }' file1 ... filen 
```

该脚本假定：

*   所有文件都有相同数量的行
*   输出的顺序与第一个文件的顺序相同。
*   文件不需要在字段中排序`<field_number>`
*   `<field_number>`是一个有效的整数。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-23T19:23:58.220

该`man`页面`join`声明它仅适用于两个文件。因此，您需要创建中间文件，然后将其删除，即：

```
> join file1 file2 > temp
> join temp file3 > output
> rm temp 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-23T19:23:35.187

Join在一个公共字段上连接**两个文件的行。**如果你想加入更多 - 成对做。首先加入前两个文件，然后将结果与第三个文件等加入。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-25T15:50:59.553

假设您有四个文件 A.txt、B.txt、C.txt 和 D.txt：

```
~$ cat A.txt
x1 2
x2 3
x4 5
x5 8

~$ cat B.txt
x1 5
x2 7
x3 4
x4 6

~$ cat C.txt
x2 1
x3 1
x4 1
x5 1

~$ cat D.txt
x1 1 
```

加入文件：

```
firstOutput='0,1.2'; secondOutput='2.2'; myoutput="$firstOutput,$secondOutput"; outputCount=3; join -a 1 -a 2 -e 0 -o "$myoutput" A.txt B.txt > tmp.tmp; for f in C.txt D.txt; do firstOutput="$firstOutput,1.$outputCount"; myoutput="$firstOutput,$secondOutput"; join -a 1 -a 2 -e 0 -o "$myoutput" tmp.tmp $f > tempf; mv tempf tmp.tmp; outputCount=$(($outputCount+1)); done; mv tmp.tmp files_join.txt 
```

结果：

```
~$ cat files_join.txt 
x1 2 5 0 1
x2 3 7 1 0
x3 0 4 1 0
x4 5 6 1 0
x5 8 0 1 0 
```

# objective-c - Cocos2d 将变量从一个类转移到另一个类

> ID：10726474
> 
> 赞同：0
> 
> 时间：2012-05-23T19:21:01.950
> 
> 标签：objective-c, ios, class, cocos2d-iphone

目前我正在尝试使用整数来声明设置是启用还是禁用，我面临的问题是尝试在另一个类中使用该变量，以便我可以传输要在实际游戏。我的问题是我该怎么做？如果您有答案，您还可以举例说明如何实施。

谢谢你的时间，

基督教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:18:19.610

如果它是全局变量，您可以创建某种具有所需实例的 GlobalData 类。

如果它只是您游戏的设置，您可以创建将存储所需设置的类/结构，然后将该类/结构传递给您的关卡的构造函数。喜欢

```
GameSetting setting; // some structure
setting.numberOfEnemies = 10;
setting.anyOtherField = 1;
....
CCScene* gameScene = [MyGameScene sceneWithSetting:setting];
[[CCDirector sharedDirector] replaceScene:gameScene]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T21:43:43.763

根据 Morion 所说的，看看这些：[单身人士](http://getsetgames.com/2009/08/30/the-objective-c-singleton/)

他们很适合这样的事情。它们将允许您创建一个“全局类”，您可以从中访问如下变量：`[[MySingleton instance] myVariable];`从游戏中的任何位置。该链接将解释如何设置一个。

单例可能更有条理且易于使用，但 Morion 的方式很可能更快。

# c# - 如何引用列表中的项目 by Key rather than index? I have a class that contains a List<> of objects. For this example I will say the objects are a basic class as below: public class City { private string 问问题 user1350555 问问题 2012-05-23T19:21:03.253 276 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a class that contains a List<> of objects. For this example I will say the objects are a basic class as below: public class City { private string name; private string country; public string Name { get { return name; } set { name = value; } } } Normally I would refer to these objects like so: List <city>theList = new List<city>(); City theCity = theList[0]; What I would like to do is refer to the list as follows: List <city>theList = new List<city>(); City theCity = theList["London"]; Where London is the name property of one of the cities. How do I achieve this? At present I have been constructing "find" type methods that return me the city in question. What I need is to be able to refer by Key. You can use LINQ: List <city>theList = new List<city>(); City theCity = theList.FirstOrDefault( x => x.Name == "London" ); c#listkey 4 4 回答 4 This answer is useful 9 Basically, it sounds like you want a Dictionary <string, city="">instead of a List<city>. You can easily create this with LINQ: var dictionary = list.ToDictionary(city => city.Name); You can use a list and search through it (as per Ethan's answer) if you really want to preserve the order, but if you only need to look up by name, then a dictionary is what you want. 于 2012-05-23T19:23:03.993 回答 This answer is useful 3 You write a wrapper List class CityList and overload the [] operator. public class City { private string name; private string country; public City(string cityName) { Name = cityName; } public string Name { get { return name; } set { name = value; } } } public class CityList : CollectionBase { public CityList() : base () { } public City this[int index] { get { return (City)List[index]; } set { List[index] = value; } } public City this[string name] { get { int index = this.IndexOf(name); if (index < 0 || index >= this.List.Count) return null; // or assert return (City)List[index]; } set { int index = this.IndexOf(name); if (index > 0 || index >= this.List.Count) return; // or assert List[index] = value; } } public virtual int IndexOf(City city) { return List.IndexOf(city); } public virtual int IndexOf(string name) { if (name == null) return -1; for (int i = 0; i < List.Count; i++) { if (((City)List[i]).Name.ToLower() == name.ToLower()) return i; } return -1; } public virtual void Insert(int index, City city) { List.Insert(index, city); } public virtual int Add(City city) { return base.List.Add(city); } } class Program { static void Main() { City NewYork = new City("New York"); City Boston = new City("Boston"); City Tampa = new City("Tampa"); CityList cities = new CityList(); cities.Add(NewYork); cities.Add(Boston); cities.Add(Tampa); Console.WriteLine(cities["Boston"].Name); // prints "Boston" Console.ReadKey(); } } There might be a slicker way to do it now so you don't need the casting. This is like .NET 2.0 code. 于 2012-05-23T19:23:14.850 回答 This answer is useful 3 您可以使用 LINQ： List <city>theList = new List<city>(); City theCity = theList.FirstOrDefault( x => x.Name == "London" ); 于 2012-05-23T19:22:55.037 回答 This answer is useful 0 How about System.Collections.ObjectModel.KeyedCollection? http://msdn.microsoft.com/en-us/library/ms132438.aspx 于 2012-05-24T05:32:33.230 回答 Related 2 debugging - 手动运行 glibc 内存损坏测试 1 jquery - 检查多个输入字段jQuery的内容 2 xml - 使 XSLT 1.0 创建 XML 时考虑到模式 1 python - dict.get() 的 Python 命名空间等价物 1 vb.net - 从 Windows 窗体 (VSTO) 中的命令按钮清除 Excel 工作表的内容 1 elasticsearch - 将 NEST 与 Elastic Search 一起用于集合 0 google-geocoding-api - 使用 Google 地理编码 API（版本 3）时加拿大邮政编码错误 2 jquery - 基于 Body ID 的 Jquery 活动状态 2 android - 为什么我的位置为空？- 安卓 3 javascript - 在 wkhtmltopdf 中调试 javascript Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</city></city></city></string,></city></city></city></city></city></city>

> ID：10726475
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, list, key

I have a class that contains a `List<>` of objects. For this example I will say the objects are a basic class as below:

```
public class City
{
    private string name;
    private string country;

    public string Name
    {
        get
        {
            return name;
        }
        set
        {
            name = value;
        }
    }
} 
```

Normally I would refer to these objects like so:

```
List<City> theList = new List<City>();
City theCity = theList[0]; 
```

What I would like to do is refer to the list as follows:

```
List<City> theList = new List<City>();
City theCity = theList["London"]; 
```

Where London is the name property of one of the cities.

How do I achieve this? At present I have been constructing "find" type methods that return me the city in question. What I need is to be able to refer by Key.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T19:23:03.993

Basically, it sounds like you want a `Dictionary<string, City>` instead of a `List<City>`. You can easily create this with LINQ:

```
var dictionary = list.ToDictionary(city => city.Name); 
```

You can use a list and search through it (as per Ethan's answer) if you really want to preserve the order, but if you *only* need to look up by name, then a dictionary is what you want.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T19:23:14.850

You write a wrapper List class CityList and overload the [] operator.

```
public class City
{
    private string name;
    private string country;

    public City(string cityName)
    {
        Name = cityName;
    }

    public string Name
    {
        get
        {
            return name;
        }
        set
        {
            name = value;
        }
    }
}

public class CityList : CollectionBase
{
    public CityList() : base ()
    {
    }

    public City this[int index]
    {
        get
        {
            return (City)List[index];
        }
        set
        {
            List[index] = value;
        }
    }

    public City this[string name]
    {
        get
        {
            int index = this.IndexOf(name);
            if (index < 0 || index >= this.List.Count) return null; // or assert

            return (City)List[index];
        }
        set
        {
            int index = this.IndexOf(name);
            if (index > 0 || index >= this.List.Count) return; // or assert
            List[index] = value;
        }
    }

    public virtual int IndexOf(City city)
    {
        return List.IndexOf(city);
    }

    public virtual int IndexOf(string name)
    {
        if (name == null) return -1;

        for (int i = 0; i < List.Count; i++)
        {
            if (((City)List[i]).Name.ToLower() == name.ToLower())
                return i;
        }
        return -1;
    }

    public virtual void Insert(int index, City city)
    {
        List.Insert(index, city);
    }

    public virtual int Add(City city)
    {
        return base.List.Add(city);
    }
}

class Program
{
    static void Main()
    {
        City NewYork = new City("New York");
        City Boston = new City("Boston");
        City Tampa = new City("Tampa");

        CityList cities = new CityList();
        cities.Add(NewYork);
        cities.Add(Boston);
        cities.Add(Tampa);

        Console.WriteLine(cities["Boston"].Name); // prints "Boston"

        Console.ReadKey();
    }
} 
```

There might be a slicker way to do it now so you don't need the casting. This is like .NET 2.0 code.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T19:22:55.037

您可以使用 LINQ：

```
List<City> theList = new List<City>();
City theCity = theList.FirstOrDefault( x => x.Name == "London" ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T05:32:33.230

How about `System.Collections.ObjectModel.KeyedCollection`?

[http://msdn.microsoft.com/en-us/library/ms132438.aspx](http://msdn.microsoft.com/en-us/library/ms132438.aspx)

# asp.net - ASP.NET 应用程序在访问网络驱动器时获取 system.unauthorizedaccessexception

> ID：10726477
> 
> 赞同：2
> 
> 时间：2012-05-23T19:21:07.533
> 
> 标签：asp.net, security, iis, sharepoint-2010

我正在尝试从 ASP.NET 页面访问网络驱动器。从技术上讲，它是一个 SharePoint 应用程序页面 (_layouts/mycompany/mypage.aspx)，但我相信原理是相同的。

```
string filePath = @"\\companyshare\temp\test.txt";
FileStream fs = new FileStream(filePath, FileMode.Open, FileAccess.Read); 
```

当我点击上面代码中的第二行时，我得到了错误：

> 拒绝访问路径“\companyshare\temp\test.txt”。

此站点的应用程序池在域帐户 (MYCOMPANY\adminacct) 下运行。MYCOMPANY\adminacct 有权访问文件 \companyshare\temp\test.txt。通过使用 MYCOMPANY\adminacct 凭据登录服务器并使用代码中的相同路径导航到文件，我已经确认了这一点。

我正在运行 IIS 7.5

**问题**

即使应用程序池帐户可以访问文件夹和文件，为什么上面的代码仍然被拒绝访问？

有没有办法确认我的代码实际上正在尝试使用我认为它正在使用的凭据访问该文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:27:08.467

要进行调试，我首先尝试的是在 web.config 中使用模拟，以强制 ASP.NET 进程以您自己的身份运行，或者您可以保证可以访问 UNC 文件路径的帐户。

```
<identity impersonate="true" userName="yourDomain\yourAccountName" password="xyz" /> 
```

就个人而言，我会选择在应用程序中使用模拟而不是 IIS 应用程序池中的凭据，但这就是我。

这是[一篇关于服务器进程标识和调试的好文章，](http://www.eggheadcafe.com/tutorials/asp-net/1f12cd61-6bb3-4ffd-bac1-124d40837006/aspnet-request-identity--an-analysis.aspx)我用过几次。

# spring-mvc - Spring Security+MVC注解非法参数异常

> ID：10726478
> 
> 赞同：3
> 
> 时间：2012-05-23T19:21:08.797
> 
> 标签：spring-mvc, spring-security, spring-annotations

我正在使用弹簧 MVC 和弹簧安全性。

我有注释驱动的控制器并试图向它添加安全注释。

控制器代码：

```
@Controller
public class SomeController implements MessageSourceAware {

    @Secured("ROLE_ADMIN")
    @RequestMapping(value = "/somepage", method = RequestMethod.GET)
    public String getPage(HttpServletRequest request, ModelMap model) {
        // logic
        return ADMIN_VIEW_NAME;
    }
```

我的`spring-security.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:security="http://www.springframework.org/schema/security"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <security:global-method-security secured-annotations="enabled" />

    <security:http auto-config="true" use-expressions="true" access-denied-page="/denied">

        <security:intercept-url pattern="/login" access="permitAll"/>
        <!--<security:intercept-url pattern="/admin" access="hasRole('ROLE_ADMIN')"/>-->

        <security:form-login
                login-page="/login"
                authentication-failure-url="/login?error=true"
                default-target-url="/index"/>

        <security:logout
                invalidate-session="true"
                logout-success-url="/login"
                logout-url="/logout"/>

    </security:http>

    <!-- Declare an authentication-manager to use a custom userDetailsService -->
    <security:authentication-manager>
        <security:authentication-provider user-service-ref="authManager">
            <security:password-encoder ref="passwordEncoder"/>
        </security:authentication-provider>
    </security:authentication-manager>

    <!-- Use a SHA encoder since the user's passwords are stored as SHA in the database -->
    <bean class="org.springframework.security.authentication.encoding.ShaPasswordEncoder" id="passwordEncoder"/>

    <!-- A custom service where Spring will retrieve users and their corresponding access levels  -->
    <bean id="authManager" class="some.package.AdminManager"/>

</beans>
```

当我尝试打开安全页面时，出现以下错误：

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: object is not an instance of declaring class
HandlerMethod details: 
Controller [$Proxy139]
Method [public java.lang.String SomeController.getPage(javax.servlet.http.HttpServletRequest,org.springframework.ui.ModelMap)]
Resolved arguments: 
[0] [type=org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestWrapper] [value=SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.connector.RequestFacade@7a31c825]]]
[1] [type=org.springframework.validation.support.BindingAwareModelMap] [value={}]
```

如果我删除安全注释并取消注释以下行`spring-security.xml`：

```
<security:intercept-url pattern="/admin" access="hasRole('ROLE_ADMIN')"/>
```

一切正常。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T21:08:14.707

移动

```
<security:global-method-security secured-annotations="enabled" /> 
```

从 spring-security.xml 到主调度器 servlet 引用的 xml 文件，通常类似于 servlet-context.xml 或 application-context.xml

见这里 [http://static.springsource.org/spring-security/site/faq/faq.html#faq-method-security-in-web-context](http://static.springsource.org/spring-security/site/faq/faq.html#faq-method-security-in-web-context)

另外，我认为您需要将' proxy-target-class="true" '添加到 global-method-security 注释中，例如

```
<security:global-method-security secured-annotations="enabled" proxy-target-class="true"/> 
```

# android - Android TextView 选框

> ID：10726481
> 
> 赞同：0
> 
> 时间：2012-05-23T19:21:27.907
> 
> 标签：android, marquee

如果文本太长，我想缩短文本并在末尾添加“...”。这是我想剪辑文本的示例：

![在此处输入图像描述](../Images/99d076839ac85fa022b0a058c50331dd.png)

我尝试了多种代码变体（TruncateAt.END、.setLines(4)、...），但我认为这应该可行：

```
textv.setMaxLines(4);
textv.setEllipsize(TruncateAt.MARQUEE); 
```

但结果是这样的：

![在此处输入图像描述](../Images/b17fecde19077dc08be0c4d9ed3ee976.png)

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:38:12.720

您可以获取字符串的子字符串，并将其用作最大长度，并在末尾添加 ...。

```
int MAX_LENGTH=40;
if(inString.length > MAX_LENGTH)
    View.setText(inString.subString(0,MAX_LENGTH) + "..."; 
```

我希望这会帮助你...

# python - Tornado URL 查询参数

> ID：10726486
> 
> 赞同：44
> 
> 时间：2012-05-23T19:21:51.480
> 
> 标签：python, tornado

我一直在玩 Tornado，我写了一些看起来不太好的代码。

我正在编写一个应用程序来存储食谱作为示例。这些是我的处理程序：

```
handlers = [
    (r"/recipes/", RecipeHandler),
    (r"/recipes", RecipeSearchHandler), #so query params can be used to search
] 
```

这导致我写这个：

```
class RecipeHandler(RequestHandler):      
    def get(self):
        self.render('recipes/index.html')

class RecipeSearchHandler(RequestHandler):    
    def get(self):
        try:
            name = self.get_argument('name', True)
            self.write(name)
        # will do some searching
        except AssertionError:
            self.write("no params")
            # will probably redirect to /recipes/ 
```

有没有更好的方法来处理这些 URL 而无需尝试/例外？我希望 /recipes 和 /recipes/ 显示相同的内容，而 /recipes?name=something 会进行搜索，最好是不同的处理程序。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-23T19:39:10.547

GET 请求有更好的方法。github上的tornado源码中有一个[demo](https://github.com/facebook/tornado/blob/master/demos/blog/blog.py#L87)

```
# url handler
handlers = [(r"/entry/([^/]+)", EntryHandler),]

class EntryHandler(BaseHandler):
    def get(self, slug):
        entry = self.db.get("SELECT * FROM entries WHERE slug = %s", slug)
        if not entry: raise tornado.web.HTTPError(404)
        self.render("entry.html", entry=entry) 
```

任何与正则表达式匹配的“文本”都将作为 slug 参数传递给 EntryHandler 的 get 方法。如果 url 不匹配任何处理程序，用户将收到 404 错误。

如果你想提供另一个后备，你可以使参数可选

```
(r"/entry/([^/]*)", EntryHandler),

class EntryHandler(BaseHandler):
    def get(self, slug=None):
        pass 
```

**更新：**

> +1 链接。但是，如果我想像这样进行搜索，此 URL 模式是否会扩展到包含更多参数... /recipes?ingredient=chicken&style=indian – colinjameswebb

是的，它确实。

```
handlers = [
     (r'/(\d{4})/(\d{2})/(\d{2})/([a-zA-Z\-0-9\.:,_]+)/?', DetailHandler)
]

class DetailHandler(BaseHandler):
    def get(self, year, month, day, slug):
        pass 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-12-18T04:01:00.413

`get_argument`允许您提供默认值：

```
details=self.get_argument("details", None, True) 
```

如果提供了，那么如果没有提供参数，则不会发生异常

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-12-22T05:52:36.300

龙卷风也有一个`get_arguments`功能。它返回具有给定名称的参数列表。如果不存在，则返回一个空列表 ( `[]` )。我发现这种方式更干净，可以清理您的 Web 服务输入而不是`try..catch`块。

**示例：**
假设我有以下 URL 处理程序：

`(r"/recipe",GetRecipe)`

和请求处理程序：

```
class GetRecipe(RequestHandler):
    def get(self):
        recipe_id = self.get_arguments("rid")
        if recipe_id == []:
            # Handle me
            self.set_status(400)
            return self.finish("Invalid recipe id")
        self.write({"recipe_id":self.get_argument("rid")}) 
```

`recipe_id`list 也将保存该值，但我发现`self.get_argument`这种方式使用起来很方便。

现在查看结果：

```
curl "http://localhost:8890/recipe" -v

*   Trying 127.0.0.1...
* Connected to localhost (127.0.0.1) port 8890 (#0)
> GET /recipe HTTP/1.1
> User-Agent: curl/7.35.0
> Host: localhost:8890
> Accept: */*
> 
< HTTP/1.1 400 Bad Request
< Content-Length: 17
< Content-Type: text/html; charset=UTF-8
* Server TornadoServer/1.1.1 is not blacklisted
< Server: TornadoServer/1.1.1
< 
* Connection #0 to host localhost left intact
Invalid recipe id

curl "http://localhost:8890/recipe?rid=230" -v
*   Trying 127.0.0.1...
* Connected to localhost (127.0.0.1) port 8890 (#0)
> GET /recipe?rid=230 HTTP/1.1
> User-Agent: curl/7.35.0
> Host: localhost:8890
> Accept: */*
> 
< HTTP/1.1 200 OK
< Content-Length: 20
< Etag: "d69ecb9086a20160178ade6b13eb0b3959aa13c6"
< Content-Type: text/javascript; charset=UTF-8
* Server TornadoServer/1.1.1 is not blacklisted
< Server: TornadoServer/1.1.1
< 
* Connection #0 to host localhost left intact
{"recipe_id": "230"} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-02-04T22:14:30.320

如果您想使用更动态的过滤方法（而不是硬编码的 URL），您可以`self.request.arguments`在请求处理程序中使用所有传递的 URL 参数/参数。

```
class ApiHandler(RequestHandler):
    def get(self, path):
        filters = self.request.arguments
        for k,v in filters.items():
            # Do filtering etc... 
```

请参阅[http://www.tornadoweb.org/en/stable/httputil.html#tornado.httputil.HTTPServerRequest.arguments](http://www.tornadoweb.org/en/stable/httputil.html#tornado.httputil.HTTPServerRequest.arguments)

# gtk - SWF 结束时关闭 gtk 应用程序 (NPAPI)

> ID：10726487
> 
> 赞同：1
> 
> 时间：2012-05-23T19:21:51.693
> 
> 标签：gtk, flash, npapi

有没有办法知道我的闪存何时以 NPAPI 结束（如标志）。当我的闪光灯完成显示时，我想关闭我的应用程序。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T04:13:38.523

NPAPI 插件在托管它的浏览器关闭时结束，而不是相反。您可能能够做到这一点的唯一方法是让您的 SWF 通知 javascript，然后执行类似于 window.close() 的操作

# javascript - var 存在还是 var 获取值语法？

> ID：10726490
> 
> 赞同：0
> 
> 时间：2012-05-23T19:22:13.597
> 
> 标签：javascript

我在 underscore.js 源代码中遇到了以下代码行：

```
function (obj, iterator, context) {
  iterator || (iterator = _.identity);
  ...
} 
```

该语法是否等效于：

```
if (!iterator) {
  iterator = _.identity;
} 
```

除了将语句减少到一行之外，使用前一种语法是否有任何性能优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:24:26.253

是的，它在功能上与此等价。

这样做的唯一好处是你的支票少了两行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:35:15.820

这是[布尔短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)的效果。基本上，布尔表达式的求值在其结果确定后立即停止：

```
true || func() 
```

在这种情况下，永远不会调用 func()，因为无论它返回什么，整个表达式的值仍然是`true`.

```
false && func() 
```

同样，在这种情况下 func() 也根本没有被调用，因为无论它返回什么，表达式都将保持`false`.

# windows-runtime - 从 Metro 应用程序访问非 Metro COM DLL

> ID：10726492
> 
> 赞同：1
> 
> 时间：2012-05-23T19:22:16.753
> 
> 标签：windows-runtime, visual-studio-2012

我知道你不应该这样做，但不幸的是，考虑到 WinRT 库的初期和缺乏对 3rd 方控件的支持，我没有其他可能的解决方案，只能尝试使用我们当前的图表库地铁应用。

我们无意通过 App Store 分发该应用程序。我们手动选择并加载我们的应用程序以供客户使用。

我看过一些文章，其中可以通过手动加载适用的 DLL 来成功地从 Metro 应用程序内部手动调用 MessageBoxA，这些 DLL 在系统上仍然可用。

我们的图表控件作为 COM DLL 分发。如果我尝试正常连接 Metro，Metro 会爆炸，这是我所期望的。

我很好奇是否有任何方法可以从 Metro 应用程序中手动调用此 DLL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:03:50.410

我自己没有对此进行测试，但我认为它可能会起作用：

如果您对在 Windows 应用商店中发布您的应用程序不感兴趣，您可以尝试将您的 COM DLL 包含在您的应用程序包中，并手动实例化您的 COM 对象。

该过程在[这篇文章](https://www.amyuni.com/forum/viewtopic.php?f=13&t=2438)中进行了解释。它基本上是关于使用[LoadLibrary](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)和[GetProcAddress](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)来检索`DllGetClassObject`每个 COM dll 包含的函数，并使用 COM 类的 GUID 来获取实例。

在您的情况下，如果您将项目创建为 Windows 应用商店应用程序，则功能 LoadLibrary 将不可用，但您仍然可以改用[LoadPackageLibrary](http://msdn.microsoft.com/en-us/library/windows/desktop/hh447159%28v=vs.85%29.aspx)。

# html - 在 HTML5 Canvas 中创建平台，移动球

> ID：10726494
> 
> 赞同：0
> 
> 时间：2012-05-23T19:22:40.060
> 
> 标签：html, canvas, physics

我是画布新手，对 Javascript 有基本的了解。我正在开发一个（看似）简单的游戏，其中一个球从屏幕的左上角沿着一个平台滚动。 ![球的形象](../Images/33a9ab54a427ce3708a1a2d9b9205cc9.png)

所以球需要应用某种物理（我想），这样它不仅可以从右向左移动，而且还具有重力和从平台上掉下来的能力。

我不确定如何创建平台或球物理。我意识到这是一个非常笼统的问题——我并不是要别人为我编程——但我只是想我会四处看看，看看是否有人能在正确的方向上给我一个很好的推动。我在这里有点迷路了。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T22:49:03.970

看看[Box2DJS](http://box2d-js.sourceforge.net/index2.html)，它是一个用于画布的 JavaScript 物理引擎。它是非常流行的 C++ 物理引擎[Box2D](http://code.google.com/p/box2d/)的一个端口（更准确地说，它是[ActionScript 3.0](http://box2dflash.sourceforge.net/)版本的一个端口，它本身就是原始版本的一个端口）。

ActionScript 3.0 版本有大量资源可供您使用，因为 JavaScript 语法和 ActionScript 语法基本相同。JavaScript 版本也有一些演示。这个[hello world 演示](http://savagelook.com/demos/box2djs/helloworld.html)可能包含您开始所需的一切（右键单击查看源代码）。

# c++ - 如何将用 C++ 编写的 Qt4 小部件实现到一些 Python 代码中？

> ID：10726496
> 
> 赞同：0
> 
> 时间：2012-05-23T19:22:55.507
> 
> 标签：c++, python, qt4, pyqt4

在我尝试使用 PyQt4 创建 GUI（文档查看器）时，未能重现现有程序的质量，有人建议我应该使用那些现有程序的 Qt4 小部件（准确地说是 Okular），而不是重新发明轮子.

很公平，但是那些 Qt4 小部件是用 C++ 编写的：我应该如何从 Python 端调用它们？它是否需要我学习 C（在这种情况下，我宁愿花更多时间来找出一个完全 Pythonic 的解决方案）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:03:51.587

`Qt`不是用 C 编写的，它是用 C++ 编写的，[`Okular`](https://projects.kde.org/projects/kde/kdegraphics/okular/repository).

不幸的是，让 C++ 库与 python 一起工作并不像通过`ctypes`. 为此，您需要围绕 C++ API 编写一些包装代码以使其正常工作。
一些方法可以做到这一点：

*   [`sip`](http://www.riverbankcomputing.co.uk/software/sip/intro)- 由 PyQt 使用
*   [`shiboken`](http://www.pyside.org/docs/shiboken/)- 由 PySide 使用
*   [`cython`](http://wiki.cython.org/WrappingCPlusPlus)也可以用来封装C++，不知道和Qt配合好不好用

# c# - 如何下载具有自定义扩展名的 zip 文件？

> ID：10726497
> 
> 赞同：0
> 
> 时间：2012-05-23T19:22:57.810
> 
> 标签：c#, .net, wpf, silverlight

大多数印度公司阻止许多网站和下载，例如 zip 和 exe 文件。我找到了一个在 Google Docs 扩展中探索 zip 文件的解决方案，它适用于大多数 zip 文件格式，但是一个一个下载或复制文件非常冗长。

如何使用 C# 从具有备用扩展名的 URL 下载 zip 文件？

我不是在寻找代理。仅适用于网站的解决方案也是可以接受的。我将在我的网站上进行这些更改，然后该网站将允许用户使用其他扩展名下载文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:30:51.627

不确定你到底在做什么，但你总是可以下载文件的字节，然后你需要什么，包括用新的文件扩展名保存它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:39:11.627

`WebClient`使下载文件变得非常容易。

```
string query = "http://website.com/my.zip"
string output = "C:/Downloads";
using (var client = new WebClient())
{
    client.DownloadFile(query, output);
    return true;
} 
```

# javascript - MSIE 在 .mouseup() 事件之前无法识别所选项目的更新

> ID：10726498
> 
> 赞同：0
> 
> 时间：2012-05-23T19:22:59.157
> 
> 标签：javascript, jquery, internet-explorer

我有一个带有几个`<select>`列表的设置，允许您`<options>`根据选择的内容在 s 上执行各种功能。最初我在`<select>`s 上有一个 .change() 事件处理程序，它首先在列表中找到选定的元素并相应地更新我的控制按钮的状态。（某些功能对于列表中的某些项目应该不可用）。

但是，MSIE<=8 中 .change() 的奇怪行为导致我改为听箭头键按下和鼠标点击。我以为我快到了，但似乎所有版本的 MSIE 通过 v9 至少处理 mouseup() 和 click() 事件与所有其他浏览器不同。

我在这里有一个小提琴：http: [//jsfiddle.net/mjbmZ/4/](http://jsfiddle.net/mjbmZ/4/)

src 转载如下：

html:

```
<select id='select' size='10' multiple='multiple'>
    <option value='asdf'>Opt 1</option>
    <option value='asdf2'>Opt 2</option>
    <option value='asdf3'>Opt 3</option>
</select> 
```

javascript:

```
var selectList = $("#select");

var getCurrent = function (e) {
    currentSelections = selectList.find(':selected');
    var vals = [];
    for (var x = 0; x < currentSelections.length; x += 1) {
        vals.push($(currentSelections[x]).html());
    }
    console.log(e, vals.join(', '));
}

selectList.click( function () {
    getCurrent('click: ');
});
selectList.mouseup( function () {
    getCurrent('mouseup: ');
}); 
```

当您用鼠标单击任何选项时，上面的代码会将所选选项的文本记录到控制台......或者它应该这样做。

在 MSIE 中，.mouseup() 报告最后一次单击*之前选择的内容。*所有其他主要浏览器都做对了。那么为什么不全部使用 .click() 呢？

好吧，在除 MSIE 之外的所有浏览器中，如果您在选择多个选项时按住鼠标，.click() 事件根本不会触发。试一试：将鼠标放在 Opt1 上，单击，向下拖动以突出显示另一个选项，然后释放。没有 .click() 被解雇！

无论如何，我希望这是有道理的。我真的很想规范浏览器之间的行为，但现在我似乎被迫在以下之间做出选择：

1) 使用 .change()，它不会注册通过 MSIE<9 中的键盘选择的选项

或者

2) 使用 .keyup() 事件 + .click() 或 .mouseup()，两者都不能在浏览器之间保持一致

有人有想法么？

**[编辑]**

我已经删除了所有的`.keyup()`、`.mouseup()`和`.click()`事件。浏览器之间的行为太不一致了。我已经恢复到`.change()`，但需要注意的是：

在这种情况下，我会进行特征检测`.addEvent`并附加一个监听器`'onchange'`。这解决了我`.change()`在旧版本的 MSIE 中没有触发 jQuery 时遇到的所有问题：

1) 通过键盘进行选择

2）通过单击拖动进行多项选择

这里有一个更新的小提琴：http: [//jsfiddle.net/mjbmZ/11/](http://jsfiddle.net/mjbmZ/11/)对于任何感兴趣的人。更新后的代码是这样实现的：

```
var selectList = $("#select");

var getCurrent = function (e) {
    currentSelections = selectList.find(':selected');
    var vals = [];
    for (var x = 0; x < currentSelections.length; x += 1) {
        vals.push($(currentSelections[x]).html());
    }
    console.log(e, vals.join(', '));
}

selectList.click( function () {
    getCurrent('click: ');
});
selectList.mouseup( function () {
    getCurrent('mouesup: ');
});
selectList.change( function () {
    getCurrent('change: ');
});
if (selectList[0].attachEvent) {
    selectList[0].attachEvent('onchange', function () {
        getCurrent('onchange: ');
    });
} 
```

如果您在 MSIE<9 中使用键盘移动选择项，您可以看到只有“onchange”事件正在触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:16:12.563

我尝试了 change() 并且它在 IE/Mozilla/Chrome 中工作

```
var selectList = $("#select");

var getCurrent = function(e) {
    currentSelections = $("#select :selected");
 vals = [];
    for (var x = 0; x < currentSelections.length; x += 1) {
        vals.push($(currentSelections[x]).html());
    }
    console.log(e, vals.join(', '));
}

selectList.change(function() {
    getCurrent('click: ');
}); 
```

这是 jsfiddle [http://jsfiddle.net/mjbmZ/5/的链接](http://jsfiddle.net/mjbmZ/5/)

# javascript - 使用 Javascript runat="server" 解析的数据向 html 表添加行

> ID：10726501
> 
> 赞同：1
> 
> 时间：2012-05-23T19:23:05.817
> 
> 标签：javascript, html, dom, html-table

我在这里遇到了一个小问题。我有一个`<script language ="JavaScript" runat="server">`从网站读取表格、解析数据并将其存储在二维数组中的代码。它工作正常；我可以使用 Response.Write 显示数据。

现在，我想使用数组中的数据来构建我自己的表格并在浏览器中显示它。我以为我会添加：

```
</head> 
<body onload="tableCreator();">
<table id="table" border="1">
    <tr> 
    <td id="Document Number">Document Number</td>
    <td id="Document Link">Document Link</td>
    <td id="Date Filed">Date Filed</td>
    <td id="Date Entered">Date Entered</td>
    <td id="Date Terminated">Date Terminated</td>
    <td id="Description">Description</td>
    </tr>
</table> 
<body> 
</html> 
```

脚本结束后，但这是问题开始的地方。我不知道在哪里插入`tableCreator()`函数。如果我在 (script language ="JavaScript" runat="server") 代码中执行此操作（以便能够使用数组的数据），则不会调用该函数。当我将标签更改为 (script language ="JavaScript") (no runat="server") 时，该函数被调用，但脚本没有运行（我有多个 Response.Write 并且什么都没有，但表是正在打印）

```
function tableCreator () {
  var table = document.getElementById("table");
  var rowCount = table.rows.length;
  var row;
  row = table.insertRow(rowCount);
  var cell1 = row.insertCell(0);
  cell1.innerHTML = "1";
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:30:11.543

您混淆了服务器端代码和客户端代码。

JavaScript 无法访问在服务器上创建的二维数组（添加`runat="server"`到您的`script`标签不会让您访问服务器端变量）。您需要以服务器端语言序列化数组，然后使其可供客户端访问（隐藏字段可以很好地解决此问题）。

或者，如果您有数据服务器端，为什么要在客户端创建表。只需在页面加载时在服务器端创建表。

# javascript - 使用 $(this) 获取被点击的元素

> ID：10726509
> 
> 赞同：1
> 
> 时间：2012-05-23T19:23:26.567
> 
> 标签：javascript, jquery

嘿，我有这个愚蠢的问题，我希望你能帮助我解决它。我有一些“a”元素，我只想在单击时添加一个活动类。

我试过这个：

```
<a href="javascript:mifunction()"></a>

js:
function mifunction(){
 $(this).addClass('active');
} 
```

但它不起作用，所以我尝试了这个：

```
<a></a>

js:
$('a').click(function() {
  $(this).addClass('active');               
}); 
```

它也不起作用。当我混合两者时它才起作用。但是用户必须双击该元素，这不是一个选项：

```
<a href="javascript:mifunction()"></a>
js:

function mifunction(){
 $('a').click(function() {
   $(this).addClass('active');              
 });
} 
```

你知道如何解决这个问题吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:27:20.153

它在这里与您的第二个示例一起工作：

*   [## 演示](http://jsfiddle.net/wJjJu/4/) 

可能您需要将 jQuery 代码包装在：

```
$(function() {

  $('a').click(function() {
     $('a.active').removeClass('active'); // you may also want to remove previous
     $(this).addClass('active');               
  });

}); 
```

还要确保在 HTML 中包含 jQuery 库路径：

```
<script type="text/javascript" src="/path/jQuery.min.js"></script> 
```

**或者：**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

## 编辑：

*（链接是动态添加的）*

```
$(function() {

  $('a').on( 'click', function() {
     $('a.active').removeClass('active'); // you may also want to remove previous
     $(this).addClass('active');               
  });

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T19:26:28.967

您正在混合和匹配使用 DOM 和 JavaScript 的新旧方式。

这

```
$('a').click(function() {
    $(this).addClass('active');
} 
```

应该可以正常工作。

把它放在里面`$(document).ready(function() {});`

所以..从字面上看应该是这样的：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('a').click(function() { 
            $(this).addClass('active');
        });
    });
</script>
<a>Click me</a> 
```

* * *

此外，如果你只是想设计样式.. 你可以通过 CSS
For Active: `a:active { color: orange; }`
For Visited:`a:visited { color:green; }`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T19:57:21.537

您的问题必须存在于其他地方，因为这很好用：

```
$('a').click(function () {
   $(this).addClass('active'); 
});​ 
```

如果您要动态创建锚点，则应`.on()`改为使用：

```
$('#container').on('click', 'a', function () {
    $(this).addClass('active'); 
}); 
```

示例`.on()`：http: [//jsfiddle.net/jbabey/bqgFN/1/](http://jsfiddle.net/jbabey/bqgFN/1/)

文档`.on()`：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T19:25:53.273

尝试像下面那样做，

```
<a class="link" href="javascript:void(0)"></a>

$(function () {
   $('.link').click (function () {
      $(this).addClass('active');
   });
}); 
```

# ruby-on-rails - Instagram gem：获取带有特定主题标签的照片

> ID：10726510
> 
> 赞同：4
> 
> 时间：2012-05-23T19:23:29.703
> 
> 标签：ruby-on-rails, instagram

是否可以仅从使用 instagram gem 的用户那里选择带有特定主题标签的图片？在文档中找不到主题标签选择。如果有，请举个例子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T19:56:35.323

不能直接做。Instagram API 本身不允许您进行这样的调用 - 您必须查询特定用户的照片或查询标签，而 gem 没有提供解决方法。

所以，首先查询用户：

```
 @results = Instagram.user_recent_media(1907035, {access_token: t.token, count: 60})  # 60 appears to be the max 
```

然后保留带有您想要的标签的照片。在结果中，每个元素都有一个“标签”数组。例如`@results.first["tags"]`返回第一张照片的标签数组。

这是进行典型查询的详细记录代码：

[https://github.com/Instagram/instagram-ruby-gem/blob/master/lib/instagram/client/users.rb](https://github.com/Instagram/instagram-ruby-gem/blob/master/lib/instagram/client/users.rb)

# javascript - 修改 mootools lazyload 以使用类作为容器而不是 id

> ID：10726518
> 
> 赞同：0
> 
> 时间：2012-05-23T19:24:08.827
> 
> 标签：javascript, mootools, lazy-loading

下面是标准的 mootools 延迟加载代码。我需要修改代码以接受 div 类作为延迟加载容器而不是 div ID。有什么想法吗？将 ID 与 Ajax 结合使用会阻止延迟加载正常工作，因为页面不会重新加载，因此它认为具有相同 ID 的新加载内容是该 ID 的第二个实例，而不是相同的元素。谢谢。

```
 var LazyLoad = new Class({

        Implements: [Options,Events],

        /* additional options */
        options: {
            range: 100,
            elements: ".lazy",
            container: "post-list",
            mode: "vertical",
            realSrcAttribute: "data-src",
            useFade: true
        },

        /* initialize */
        initialize: function(options) {

            // Set the class options
            this.setOptions(options);

            // Elementize items passed in
            this.container = document.getElementById(this.options.container);
            this.elements = $$(this.options.elements);

            // Set a variable for the "highest" value this has been
            this.largestPosition = 0;

            // Figure out which axis to check out
            var axis = (this.options.mode == "vertical" ? "y": "x");

            // Calculate the offset
            var offset = (this.container != window && this.container != document.body ? this.container : "");

            // Find elements remember and hold on to
            this.elements = this.elements.filter(function(el) {
                // Make opacity 0 if fadeIn should be done
                if(this.options.useFade) el.setStyle("opacity",0);
                // Get the image position
                var elPos = el.getPosition(offset)[axis];
                // If the element position is within range, load it
                if(elPos < this.container.getSize()[axis] + this.options.range) {
                    this.loadImage(el);
                    return false;
                }
                return true;
            },this);

            // Create the action function that will run on each scroll until all images are loaded
            var action = function(e) {

                // Get the current position
                var cpos = this.container.getScroll()[axis];

                // If the current position is higher than the last highest
                if(cpos > this.largestPosition) {

                    // Filter elements again
                    this.elements = this.elements.filter(function(el) {

                        // If the element is within range...
                        if((cpos + this.options.range + this.container.getSize()[axis]) >= el.getPosition(offset)[axis]) {

                            // Load the image!
                            this.loadImage(el);
                            return false;
                        }
                        return true;

                    },this);

                    // Update the "highest" position
                    this.largestPosition = cpos;
                }

                // relay the class" scroll event
                this.fireEvent("scroll");

                // If there are no elements left, remove the action event and fire complete
                if(!this.elements.length) {
                    this.container.removeEvent("scroll",action);
                    this.fireEvent("complete");
                }

            }.bind(this);

            // Add scroll listener
            this.container.addEvent("scroll",action);
        },
        loadImage: function(image) {
            // Set load event for fadeIn
            if(this.options.useFade) {
                image.addEvent("load",function(){
                    image.fade(1);
                });
            }
            // Set the SRC
            image.set("src",image.get(this.options.realSrcAttribute));
            // Fire the image load event
            this.fireEvent("load",[image]);
        }
    });

    /* do it! */
        window.addEvent("domready",function() {
            var lazyloader = new LazyLoad({/*
                onScroll: function() { console.warn("scroll!"); },
                onLoad: function(img) { console.warn("load!", img); },
                onComplete: function() { console.warn("complete!"); }
                */
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:28:12.617

在`initialize`函数中，替换：

```
// Elementize items passed in
this.container = document.getElementById(this.options.container);
this.elements = $$(this.options.elements); 
```

和：

```
// Elementize items passed in
this.container = $$(this.options.container)[0];
this.elements = $$(this.options.elements); 
```

然后您可以将任何选择器字符串（如`'.yourClass'`，但也`'.some[complex=selector]'`）作为`container`类选项。匹配该选择器的第一个元素将用作容器。让我知道它是否有效。

# android - 如何获取 ImageView 的来源以便更改它？

> ID：10726519
> 
> 赞同：21
> 
> 时间：2012-05-23T19:24:09.217
> 
> 标签：android, imageview, drawable

我知道仅使用更改 ImageView 资源并不是什么大不了的事`myImageView.setImageResource(mynewImageDrawable)`

但我想做的是在更改之前检查当前的 ImageSource。

基本上，我想使用 imageViews 实现我自己的组单选按钮。所以每次点击任何 imageView 时，onclicked 事件方法都会改变我组的图像资源。

并为我糟糕的英语感到抱歉。

问候，红海

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-23T19:27:39.403

没有`getDrawableId`功能，因此您需要在`ImageView`更改其可绘制对象时执行诸如设置标签之类的操作。例如，将drawable id设置为标签，`ImageView`这样你就可以从标签中获取drawable id。

### 怎么做？

我会说 90% 的时间，你的视图上不会有任何标签，所以最简单的方法是假设你的标签是唯一的标签：

```
myImageView.setTag(R.drawable.currentImage);    //When you change the drawable
int drawableId = (Integer)myImageView.getTag(); //When you fetch the drawable id 
```

### 如果我的视图中已经有标签怎么办

Android 视图可以同时托管多个标签，只要它们具有唯一标识符即可。您需要[创建一个唯一的 id](http://developer.android.com/guide/topics/resources/more-resources.html#Id)资源并将其作为第一个参数添加到`setTag`方法调用中。留下这样的代码：

```
myImageView.setTag(R.id.myTagId, R.drawable.currentImage); //Set
int drawableId = (Integer)myImageView.getTag(R.id.myTagId); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-08T11:35:22.547

要获取图像源，您可以使用`Drawable.ConstantState`. 例如，在我的问题中，我正在实现一个按钮单击来更改 ImageView。我创建了两个`Drawable.ConstantState`对象并进行了比较。代码如下：

```
ImageView myImg=(ImageView) findViewById(R.id.myImg);
        Drawable.ConstantState imgID = myImg.getDrawable().getConstantState();
        Drawable.ConstantState imgID2 = getDrawable(R.drawable.otherImage).getConstantState();
        if(imgID!=imgID2)
        {
            // Block of Code
        }
        else // Other Block of Code 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T19:41:21.700

您是说您打算检查资源 id 以确定是否选择了单选按钮？虽然这可能可行，但它不是一个很好的设计。一般来说，您希望将模型与视图分开（也称为[模型-视图-控制器](http://en.wikipedia.org/wiki/Model_view_controller)范式）。为此，您可以让您的单选按钮组为所选项目维护一个索引，并将您的每个项目存储在一个列表中。选择项目后，您可以确定其索引、更新组的模型，然后更新 UI 以反映该更改。

并不是说您提出的建议*行不通*，它只是设计不佳并导致可维护性差（例如，如果资源名称发生更改）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-13T12:20:02.217

实际上，经过我的尝试，我发现有一种方法可以在不需要标签属性的情况下获取 imageView 的来源。

```
Integer src = attrs.getAttributeResourceValue(
                    "http://schemas.android.com/apk/res/android", "src", -1); 
```

第一个参数是命名空间，`android`是`src`属性名。此方法如果找到则返回图像资源 ID，否则将返回 -1；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-29T14:27:03.800

如果你想得到`src`drawable，使用以下方法：http `ImageView`: [//developer.android.com/reference/android/widget/ImageView.html#getDrawable()](http://developer.android.com/reference/android/widget/ImageView.html#getDrawable())

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-27T14:24:02.293

你可以使用这个。

```
 private Drawable colocaImgen(String nombreFile) {
    Drawable res1 = null;
    String uri1 = null;
    try {
        //First image
        uri1 = "@drawable/" + nombreFile;
        int imageResource1 = getResources().getIdentifier(uri1, null,getApplicationContext().getPackageName());
        res1 = getResources().getDrawable(imageResource1);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        //int imageResource1 = context.getResources().getIdentifier(uri1, null, context.getApplicationContext().getPackageName());
        res1 = getResources().getDrawable(R.drawable.globo2);// Default image
    }
    return res1;
} 
```

然后

```
((ImageView) findViewById(R.id.youNameFile)).setImageDrawable(colocaImgen("NameFile")); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-05T12:34:43.717

我有同样的问题，这是我的工作解决方案：

```
public void engLayoutExpand(View view) {
    ImageView iv = (ImageView) view;

    // One way:
    Bitmap bm1 = ((BitmapDrawable) iv.getDrawable()).getBitmap();
    Bitmap bm2 = ((BitmapDrawable) getResources().getDrawable(R.drawable.baseline_expand_less_black_36)).getBitmap();

    if (bm1 == bm2) {
        iv.setImageResource(R.drawable.baseline_expand_more_black_36);
    }

    // Other way
    Drawable.ConstantState cs1 = iv.getDrawable().getConstantState();
    Drawable.ConstantState cs2 = getResources().getDrawable(R.drawable.baseline_expand_less_black_36).getConstantState();

    if ( cs1 == cs2) {
        iv.setImageResource(R.drawable.baseline_expand_more_black_36);
    }

} 
```

# java - Java 打印 SLDDRW(solidworks) 文件

> ID：10726527
> 
> 赞同：1
> 
> 时间：2012-05-23T19:24:35.903
> 
> 标签：java, printing, solidworks

我的一个朋友要我做一个简单的程序，打印一些文件。

这些文件的格式为 .SLDDRW (Solidworks)

如果该软件安装在机器上，那么是否有任何简单的方法可以打印文件。我只是不，它是某种 CAD 程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:50:58.227

.SLDPRT - Solidworks 3d 模型文件

.SLDASM - Solidworks 3d 装配文件、参考零件和装配文件

.SLDDRW - Solidworks 2d 工程图文件、参考零件和装配体文件

如果您安装了 Solidworks，您只需使用打印命令。甚至还有一个批处理打印机，您可以在其中选择要打印的文件集合，然后将它们全部打印出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:22:01.397

SolidWorks 有一个 API。您可以将 API 与 C# 或 VB 一起使用。如果需要，我可以帮助这个程序。

# scala - Scala：是否可以将类型参数限制为非抽象的？

> ID：10726528
> 
> 赞同：3
> 
> 时间：2012-05-23T19:24:48.827
> 
> 标签：scala, generics, type-bounds

Scala：是否可以将类型参数限制为非抽象的？

除了类型参数和抽象类型成员的视图边界、上限和下限之外，是否还有其他约束？例如，在我熟悉的 C# 中，您有额外的通用约束：

where T: Class //不确定 T<: AnyRef 是否包含在 Scala 中

其中T：接口

其中 T：结构

where U: T //裸类型约束

where T: new () //这确保了类型参数是非抽象的，并允许在泛型类中实例化该类型的对象。

最后一个特别重要，因为它允许您构造未知类型，但遗憾的是您只能禁止无参数构造函数。

=:= <:< 和 <%< 只能用于方法参数吗？

作为对评论的回应，该问题的直接触发因素是需要“T：new()”约束或某种等效机制。

```
class ExampleClass[T <: AnyRef] {
  val example: T = new T()//Won't compile as the compiler  
} //doesn't know if such a constructor exists 
```

某些 C# 约束的使用特定于 C# 的需要。例如，人们一直想要的 C# 中没有的一个限制是“T: numericType” 这个问题已经在 Scala 中解决了。我仍然非常了解 Scala 语言，所以除了上述内容之外，我只是想明确说明在 Scala 语法的这个方面哪些工具是可用的，哪些工具不可用，即使我没有确切地知道我可能想如何在 Scala 上下文中使用它们。

我不确定这是否完全相关，但有时编译器（Eclipse 2.1.0.M1 和 Eclipse 3.7.2）似乎不允许我实例化未知元素类型的集合。下面的代码现在似乎编译得很好。所以我想知道规则是什么：

```
abstract class Descrip [T <: DTypes]()
{      
  val hexs: MutableList[T#HexT] = new  MutableList[T#HexT] //compiles fine
  val sides: MutableList[T#SideT] = new MutableList[T#SideT] //compiles fine
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:12:25.413

的需要`new T()`通常通过使用`Manifest`s 来解决。例如这段代码编译：

```
class ExampleClass[T: Manifest] {
  val example: T = manifest[T].erasure.newInstance().asInstanceOf[T]
} 
```

缺点是，如果实例化的`T`for`ExampleClass`没有无参数构造函数，它将在运行时失败......

关于`Numeric`,`Ordering`等，它们是*类型类*并且是标准库的一部分，而不是语言的一部分。您可以构建自己的类型类。的情况`Manifest`很特殊，因为它确实得到了语言的支持以提供隐式对象。

# mongodb - Mongo 映射/减少大型集合的减速

> ID：10726529
> 
> 赞同：3
> 
> 时间：2012-05-23T19:24:57.097
> 
> 标签：mongodb, mapreduce

我们有一个看似简单的 map/reduce 作业，它每天都会记录数据。在开发服务器上，我们可以在非常多的文档上运行这个作业，大约 1M，大约需要一分钟，没有问题。我们将作业转移到生产服务器，即 Amazon EC2 服务器，该作业将以非常快的速度遍历大约 50% 的行，然后抓取其余数据。浏览几十万个文档可能需要几个小时，而不是预期的一两分钟。所以我希望我们在 map/reduce 工作中犯了一个明显的错误。

这是一个示例输入文档：

```
{
    “_id”：ObjectId（“4f147a92d72b292c02000057”），
    “cid”：25，
    “IP”：“123.45.67.89”，
    "b" : "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.7 (KHTML, like Gecko) Chrome/16.0.912.63 Safari/535.7",
    “r”：“”，
    "l" : "en-US,en;q=0.8",
    "ts" : ISODate("2012-01-16T19:29:22Z"),
    “s”：0，
    “简历”：“4f143a5fd72b292d7f000007”，
    “C” ： ””
}

```

我们只查询 _id 的范围。

这是地图代码：

```
功能（） {
    变量浏览器 = {}
    ,推荐人 = {};
    浏览器[this.b] = {
        “计数”：1
    };
    推荐人[this.r] = {
        “计数”：1
    };
    变量 objEmit = {
        “计数”：1
        ,'浏览器' : 浏览器
        ,'推荐人' : 推荐人
    };
    var date = this._id.getTimestamp();
    date.setHours(0);
    date.setMinutes(0);
    date.setSeconds(0);
    发射（{'cv'：this.cv，'date'：日期，'cid'：this.cid}，objEmit）；
};

```

这是减少代码：

```
功能（键，发射）{
    变量总计 = 0
    ,浏览器 = {}
    ,推荐人 = {};
    for (var i in emits) {
        总计 += 发出 [i].count;
        for (var key in emits[i].browsers) {
            如果（发射[i].browsers.hasOwnProperty（键））{
                !(browsers[key]) && (browsers[key] = { count : 0 });
                browsers[key].count += emits[i].browsers[key].count;
            }
        }
        for (var key in emits[i].referrers) {
            if (emits[i].referrers.hasOwnProperty(key)) {
                !(referrers[key]) && (referrers[key] = { count : 0 });
                referrers[key].count += emits[i].referrers[key].count;
            }
        }
    }
    return {'count'：总数，'browsers'：浏览器，'referrers'：referrers}
};

```

没有最终确定，我们将 map/reduce 作业输出到现有集合，并将“合并”选项设置为 true。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:34:11.543

由于它是在开发和生产中运行的相同代码，并且您已经在非常大的集合上在开发中运行它并且它很快返回，所以您怀疑您的代码可能有问题的任何特定原因？

您是否有可能在 Micro 实例上运行？如果您不知道，[Micro 实例会限制平均 CPU 使用率](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/concepts_micro_instances.html)，这可能会通过导致大量数据堆积而不被允许处理来破坏您的 Map-Reduce 活动（I/O 没有被限制）以同样的方式，因此不断出现，然后 Linux 内核将大部分时间用于管理它并使事情变得更糟）。

从 Micro 切换到 Small，即使 CPU 速度较低，也可能对您有所帮助，因为您有一个恒定的 CPU 周期“流”可以使用（就像普通机器一样），并且 MongoDB 的内部调度可能会更好地适应。

这在以前可能不是问题，因为正常的查询“尖峰”持续时间不足以导致 CPU 限制开启。

# asp.net - 使用 BaseHREF 在 ASP.net 中提交表单以更正 URL

> ID：10726532
> 
> 赞同：0
> 
> 时间：2012-05-23T19:25:18.087
> 
> 标签：asp.net, url, post, webforms, base-tag

出于不可避免的设计原因，在我的顶层标签中，`MasterPage`我有：

```
<base href="http://127.0.0.1/" /> 
```

我遇到困难的页面的 URL 是：

```
http://127.0.0.1/store/checkout 
```

在这`content page`我有控制权：

```
<asp:Button runat="server" Text="Payment ▶" /> 
```

但是，当单击时，它将表单发布到：

```
http://127.0.0.1/checkout 
```

这会引发 404，因为它不是`store/checkout`应有的。

我该如何解决这个问题，以便将表单发布到正确的 URL，并且它**必须**优雅地降级，以便如果 JS 被禁用，它将正确发布，这就是为什么不幸的是我不能接受任何 Javascript 解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:36:56.787

嗬！我已经为此苦苦挣扎了好几天，只是偶然发现了答案。

在母版页上，我创建了一个新方法：

```
public void changeFormAction(string Action)
{
    MainForm.Action = Action;
} 
```

然后从我调用的内容页面：

```
Master.changeFormAction("/store/checkout"); 
```

这解决了它！

# google-maps - google maps api v3如何按最近距离排名

> ID：10726533
> 
> 赞同：8
> 
> 时间：2012-05-23T19:25:18.687
> 
> 标签：google-maps, search, rank

有谁知道如何使用此处提到的按距离搜索选项排名？ [https://developers.google.com/maps/documentation/javascript/places#place_search_requests](https://developers.google.com/maps/documentation/javascript/places#place_search_requests)

在请求选项中列出这个似乎不起作用。这是我与此相关的代码部分：

```
var request = {
  location: coords,
  //radius: 30000,
  keyword: ['puma, retail'],
  types: ['store'],
  rankBy: google.maps.places.RankBy.DISTANCE
};

service = new google.maps.places.PlacesService(map);
service.search(request, callback);

function callback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
        for (var i = 0; i < results.length; i++) {
            createMarker(results[i]);
                            listResults(results[i]);
        }
    } 
} 
```

如果我包含半径，代码将定位并列出结果，但结果未按距离升序列出。谷歌的文档说，如果使用 rankBy 选项，也不需要半径。我错过了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-14T08:32:49.610

您不能同时使用 radius 和 RankBy.DISTANCE 属性。因此，您有两种选择：

1）按半径搜索，然后在您自己的代码中按距离对结果进行排序。

例子：

```
var request = {
               location: coords,
               radius: 30000,
               keyword: ['puma, retail'],
               types: ['store']
               };
service = new google.maps.places.PlacesService(map);
service.search(request, callback);

function callback(results, status) {
         if (status == google.maps.places.PlacesServiceStatus.OK) {
          for (var i = 0; i < results.length; i++) {
           sortresults(results[i]);//sortresult uses haversine to calcuate distance and then arranges the result in the order of distance
           createMarker(results[i]);
           listResults(results[i]);
       }
   } 
} 
```

选项 2：按 RankBy.Distance 搜索，然后使用半径限制结果。同样，您需要使用半正弦公式来计算距离。

```
var request = {
               location: coords,
               rankBy: google.maps.places.RankBy.DISTANCE,
               keyword: ['puma, retail'],
               types: ['store']
               };
service = new google.maps.places.PlacesService(map);
service.search(request, callback);

function callback(results, status) {
         if (status == google.maps.places.PlacesServiceStatus.OK) {

           for (var i = 0; i < results.length; i++) {
           d= distance(coords,results[i].latlng)
           if(d<rd)
            {createMarker(results[i]);
             listResults(results[i]);
            }
           }
   } 
}

//Returns Distance between two latlng objects using haversine formula
distance(p1, p2) {
 if (!p1 || !p2) 
  return 0;
 var R = 6371000; // Radius of the Earth in m
 var dLat = (p2.lat() - p1.lat()) * Math.PI / 180;
 var dLon = (p2.lng() - p1.lng()) * Math.PI / 180;
 var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
 Math.cos(p1.lat() * Math.PI / 180) * Math.cos(p2.lat() * Math.PI / 180) *
 Math.sin(dLon / 2) * Math.sin(dLon / 2);
 var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
 var d = R * c;
 return d;
 } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-28T03:18:32.263

遇到了同样的问题。根据此来源： [http](http://www.geocodezip.com/v3_GoogleEx_place-search.html) ://www.geocodezip.com/v3_GoogleEx_place-search.html 我能够这样制定查询：

```
var request = {
location: gps,
types: ['food'], //You can substitute "keyword: 'food'," (without double-quotes) here as well.
rankBy: google.maps.places.RankBy.DISTANCE, //Note there is no quotes here, I made that mistake.
key: key 
}; 
```

Var key 是 API 密钥，它不是必需的，但添加以供以后使用。GPS是：

```
var gps = new google.maps.LatLng(location.lat,location.lon); 
```

最后，我做了你所做的所有事情，除了我在一张我不打算使用的地图上添加了边界。为此我做了：

```
var bounds = new google.maps.LatLngBounds(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-09T22:03:35.880

您不能同时使用 radius + rankBy 属性。

如果您需要最近的位置，请选择一些类型，并设置 rankBy 属性。

```
places.nearbySearch({
                        location: LatLng,
                        types: placeTypes,
                        rankBy: google.maps.places.RankBy.DISTANCE
                    },
                    function (results) {
                        // process the results, r[0] is the closest place
                    }
                ); 
```

你可以在哪里设置这样的placeTypes

```
var placeTypes = [
'accounting',
'airport',
'amusement_park',
'aquarium',
'art_gallery',
'atm',
'bakery',
'bank',
'bar',
'beauty_salon',
'bicycle_store',
'book_store',
'bowling_alley',
'bus_station',
'cafe',
'campground',
'car_dealer',
'car_rental',
'car_repair',
'car_wash',
'casino',
'cemetery',
'church',
'city_hall',
'clothing_store',
'convenience_store',
'courthouse',
'dentist',
'department_store',
'doctor',
'electrician',
'electronics_store',
'embassy',
'establishment',
'finance',
'fire_station',
'florist',
'food',
'funeral_home',
'furniture_store',
'gas_station',
'general_contractor',
'grocery_or_supermarket',
'gym',
'hair_care',
'hardware_store',
'health',
'hindu_temple',
'home_goods_store',
'hospital',
'insurance_agency',
'jewelry_store',
'laundry',
'lawyer',
'library',
'liquor_store',
'local_government_office',
'locksmith',
'lodging',
'meal_delivery',
'meal_takeaway',
'mosque',
'movie_rental',
'movie_theater',
'moving_company',
'museum',
'night_club',
'painter',
'park',
'parking',
'pet_store',
'pharmacy',
'physiotherapist',
'place_of_worship',
'plumber',
'police',
'post_office',
'real_estate_agency',
'restaurant',
'roofing_contractor',
'rv_park',
'school',
'shoe_store',
'shopping_mall',
'spa',
'stadium',
'storage',
'store',
'subway_station',
'synagogue',
'taxi_stand',
'train_station',
'travel_agency',
'university',
'veterinary_care',
'zoo' 
```

];

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-20T08:02:34.527

请注意，在当前的 Api Doc 上 PlacesService 类的“搜索”方法**不可用**。

[https://developers.google.com/maps/documentation/javascript/reference?hl=it#PlacesService](https://developers.google.com/maps/documentation/javascript/reference?hl=it#PlacesService)

您必须选择：

*   附近搜索（每页检索 20 个结果，最多 3 页）
*   雷达搜索（检索 200 个结果，但细节较少）
*   文本搜索（类似于附近的搜索）

**如果你选择 RankBy.DISTANCE 你不能设置半径**

```
var request = {
  location: vLatLng,
  //radius: vRaggio,
  rankBy: google.maps.places.RankBy.DISTANCE,
  keyword: ['puma, retail'],
  types: ['store']
}

placesService.nearbySearch(request, function (data, status, placeSearchPagination) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
  //...
  // do your stuffs with data results
  //...
  if (placeSearchPagination && placeSearchPagination.hasNextPage) {
    placeSearchPagination.nextPage();
  } 
}); 
```

如果要根据距离半径限制数据，可以使用此功能检查结果是否太远。

```
function checkRadiusDistance(place,centerLatLng,radius) {
  return google.maps.geometry.spherical.computeDistanceBetween(place.geometry.location, centerLatLng) < radius;
}); 
```

请注意，这也是**获取特定半径内地点**的唯一方法，因为当您指定“ *rankBy:google.maps.places.RankBy.PROMINENCE* ”和“ *radius=xx* ”时，placesService 还会为您提供**定义区域之外的结果**.

# c++ - 如何在 Linux 上从源代码安装 TBB 并使其工作

> ID：10726537
> 
> 赞同：14
> 
> 时间：2012-05-23T19:25:29.337
> 
> 标签：c++, linux, compilation, installation, tbb

我想知道如何从源代码安装 TBB 并使其在 Linux 系统上运行。我在使用它时遇到了一些问题，如果我通过包管理器安装 TBB，这些问题不会出现。

在 TBB 网页中，有一些关于如何执行此操作的指南，例如设置`LD_LIBRARY_PATH`和`CPATH`变量，或获取`tbbvars.sh`文件。即使我这样做，当我尝试编译一个示例时`g++`说`tbb`找不到。

所以我的问题是，是否有一种简单的方法来设置所有内容（编译源代码，我应该设置哪些变量......）以便使用 TBB？

谢谢。

**注意：**问这个问题时的库版本号是 2（如果我没记错的话）。我已经亲自测试了最高版本 4.1 的解决方案，但我认为它应该也适用于当前版本`4.2 (update 3)`，因为构建方法保持不变。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-26T19:27:33.047

我带来了解决方案。我会把它贴在这里，这样它可以帮助其他人解决这个问题。

1.  下载最新的稳定源代码并解压，即在`~/tbbsrc`

2.  在里面，输入`make`。它应该开始编译 tbb 库和内存分配器。

3.  标题在`~/tbbsrc/include`

4.  里面`~/tbbsrc/build`会有两个新文件夹，一个用于发布版本，另一个用于调试版本。这些文件夹被命名为`architecture_ldVersion_g++Version_kernelVersion`.

5.  我建议设置一些变量，例如在您的`~/.bashrc`文件中，例如：

```
TBB_INSTALL_DIR = $HOME/tbbsrc
TBB_INCLUDE = $TBB_INSTALL_DIR/include
TBB_LIBRARY_RELEASE = $TBB_INSTALL_DIR/build/RELEASE_FOLDER
TBB_LIBRARY_DEBUG = $TBB_INSTALL_DIR/build/DEBUG_FOLDER 
```

6.  让我们尝试一个简单的例子：

```
// main.cpp
#include "tbb/task_scheduler_init.h"

int main(int argc, char* argv[]) {
    // tbb::task_scheduler_init init(tbb::task_scheduler_init::automatic);
    // implicit tbb::task_sheduler_init::automatic
    tbb::task_scheduler_init init;
    return 0;
} 
```

7.  例如，使用发布版本进行编译：

```
g++ main.cpp -I$TBB_INCLUDE -Wl,-rpath,$TBB_LIBRARY_RELEASE -L$TBB_LIBRARY_RELEASE -ltbb 
```

> 注意：使用`-Wl,-rpath,$TBB_LIBRARY_RELEASE`，我们告诉动态链接器在哪里找到`libtbb.so`

8.  那应该可以正常工作！

最好的祝福！

**Apple clang 5.1 的安装：** [感谢 rwols 提供的信息]

而不是键入`make`，键入`make compiler=clang`或`make compiler=clang stdlib=libc++`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-06-02T14:27:38.243

[https://github.com/wjakob/tbb](https://github.com/wjakob/tbb)似乎是要走的路。

```
git clone https://github.com/wjakob/tbb.git
cd tbb/build
cmake ..
make -j
sudo make install 
```

# entity-framework - 在应用程序代码中执行的代码优先迁移

> ID：10726538
> 
> 赞同：0
> 
> 时间：2012-05-23T19:25:31.113
> 
> 标签：entity-framework, code-first

我想在应用程序启动时执行我的类（从 DbMigration 扩展）。

目前我在启动中有以下代码：

Database.SetInitializer(new MigrateDatabaseToLatestVersion()); 数据库.初始化（假）；

这工作正常，并调用我正在创建与数据库的连接的配置。唯一我不知道的是我的 DbMigration 类是如何执行的，以便在服务器上执行数据库更改。

这段代码执行没有任何问题：

```
public class Configuration : DbMigrationsConfiguration<CustomerDbContext>
    {
        public Configuration()

         {
            PgSqlConnectionInfo connectionInfo =
                PgSqlConnectionInfo.CreateConnection(
                    "User Id=postgres;Password=postgres;Host=localhost;Port=5432;Database=etera;Schema=dev;");
            TargetDatabase = connectionInfo;
            SetSqlGenerator(connectionInfo.GetInvariantName(), new PgSqlEntityMigrationSqlGenerator());
        }

    } 
```

它不执行以下代码 - 它应该创建表：

```
public class CreateBlogTable : DbMigration
    {
        public override void Up()
        {
            CreateTable(
                "Blogs",
                c => new
                         {
                             BlogId = c.Int(nullable: false, identity: true),
                             Name = c.String(unicode: false),
                         })
                .PrimaryKey(t => t.BlogId);
        }

        public override void Down()
        {
            DropTable("Blogs");
        }
    } 
```

# python - 无需替换的内存高效随机数迭代器

> ID：10726540
> 
> 赞同：4
> 
> 时间：2012-05-23T19:25:42.750
> 
> 标签：python, random, numpy, itertools

我觉得这应该很容易，但经过多次搜索和尝试，我无法找到答案。基本上我有大量的物品，我想以随机顺序抽样而不更换。在这种情况下，它们是二维数组中的单元。我将用于较小数组的解决方案无法转换，因为它需要改组内存数组。如果我必须抽样的数量很小，我也可以随机抽样项目并保留我尝试过的值的列表。不幸的是，我经常不得不对所有细胞中的很大一部分进行采样，就像所有细胞一样多。

我想要创建的是一个迭代器，它使用迭代工具、numpy 和/或随机的某种组合来产生下一个随机单元（x 和 y 索引）。另一种可能的解决方案是创建一个迭代器，该迭代器将产生 0 和 (x_count * y_count) 之间的下一个随机数（无需替换），我可以将其映射回一个单元格位置。这两者似乎都不容易完成。

感谢您的任何建议！

这是我目前的解决方案。

```
import numpy as np
import itertools as itr
import random as rdm

#works great
x_count = 10
y_count = 5

#good luck!
#x_count = 10000
#y_count = 20000

x_indices = np.arange(x_count)
y_indices = np.arange(y_count)

cell_indices = itr.product(x_indices, y_indices)
list_cell_indices = list(cell_indices)
rdm.shuffle(list_cell_indices)

for i in range(25):
    print list_cell_indices[i] 
```

因此，根据当前的响应和我尝试翻译我一无所知的 perl，我知道我能做的最好的事情如下：

```
import numpy as np
import itertools as itr
import random as rdm

x_count = 10000
y_count = 5000

sample_count = 10000
keep_probability = 0.01

tried_cells = set()
kept_cells = set()

while len(kept_cells) < sample_count:
    x = rdm.randint(0, x_count)
    y = rdm.randint(0, y_count)

    if (x, y) in tried_cells:
        pass
    else:
        tried_cells.add((x, y))
        keep = rdm.random() < keep_probability
        if keep:
            kept_cells.add((x,y))

print "worked" 
```

在大多数情况下，使用的处理时间和内存并没有那么糟糕。也许我可以检查平均细胞 keep_probability 和 sample_count 并在困难的情况下抛出错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T23:26:36.967

我相信，如果*不*使用大量辅助存储来存储接近`R * C`. 虽然有一些巧妙的方法可以减少小样本量的存储量，但如果您希望对超过三分之一的数据集进行采样，最好只创建一个单独的列表。`random.sample`是为此目的的自然选择；坦率地说，我只是将你的二维 numpy 数组的扁平版本直接传递给它。（除非您也需要索引，在这种情况下，随机采样整数并将它们转换为坐标，la [hexparrot](https://stackoverflow.com/a/10728868/577088)的解决方案是一种合理的方法。）

```
>>> a = numpy.arange(25).reshape((5, 5))
>>> random.sample(a.ravel(), 5)
[0, 13, 8, 18, 4] 
```

如果您查看 的实现[`random.sample`](http://hg.python.org/cpython/file/2.7/Lib/random.py#l290)，您会发现对于较小的样本量，它已经大致完成了上面 perl 代码所做的事情——跟踪集合中先前选择的项目并丢弃集合中已经存在的选择。对于更大的样本量，它会创建输入的副本——这比更大值的集合更节省内存，因为集合比每个存储项目的列表占用更多的空间——并且稍微修改了[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)，停止当它有`sample_size`项目时（即它不会打乱整个列表，所以它比你自己打乱整个列表更有效。）

`random.sample`基本上，我敢打赌，除非你用 c 编写代码，否则你不会做得比自己滚动的更好。

*但是*——我确实发现了这个，你可能会觉得很有趣：[`numpy.random.choice`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.choice.html). 这似乎以 c 速度进行随机抽样，有或没有替换。捕获？这是 Numpy 1.7 的新功能！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T22:41:46.707

这种方法怎么样。我首先创建 x*y 数组并将其重塑为二维。然后，知道每个单元格可以由一个整数唯一标识，得到一个从 0 到 (x*y) 的样本。

```
import numpy

x_count = 10000
y_count = 20000

x_indices = numpy.arange(x_count)
y_indices = numpy.arange(y_count)

large_table = numpy.arange(y_count * x_count).reshape(y_count, x_count)
print large_table

def get_random_item(sample_size):
    from random import sample
    for i in sample(xrange(y_count * x_count), sample_size):
        y,x = divmod(i, y_count)
        yield (x,y)

for x,y in get_random_item(10):
    print '%12i   x: %5i y: %5i' % (large_table[x][y],  x,y) 
```

返回：

（首先模拟您通过产品创建的现有二维阵列）

```
[[        0         1         2 ...,      9997      9998      9999]
 [    10000     10001     10002 ...,     19997     19998     19999]
 [    20000     20001     20002 ...,     29997     29998     29999]
 ..., 
 [199970000 199970001 199970002 ..., 199979997 199979998 199979999]
 [199980000 199980001 199980002 ..., 199989997 199989998 199989999]
 [199990000 199990001 199990002 ..., 199999997 199999998 199999999]] 
```

然后，它返回 2-dim 坐标，可以简单地通过 array[x][y] 将其转换为您的单元格内容

```
 154080675   x: 15408 y:   675
   186978188   x: 18697 y:  8188
   157506087   x: 15750 y:  6087
   168859259   x: 16885 y:  9259
    29775768   x:  2977 y:  5768
    94167866   x:  9416 y:  7866
    15978144   x:  1597 y:  8144
    91964007   x:  9196 y:  4007
   163462830   x: 16346 y:  2830
    62613129   x:  6261 y:  3129 
```

sample() 声明它“用于无替换的随机抽样”，并且这种方法遵循建议“这对于从大量人口中抽样特别快速且节省空间：sample(xrange(10000000), 60)。” 在 python[随机](http://docs.python.org/library/random.html)页面上找到。

我注意到，虽然我使用 get_random_item() 作为生成器，但底层的 sample() 仍然在生成一个完整的列表，所以内存使用仍然是 y*x + sample_size，但它运行得非常快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T19:43:33.637

您已经在使用 O(N=R*C) 内存，因此您不妨为迭代器使用 O(N) 内存。复制所有元素并对它们进行随机排序，就像对一维情况所做的那样。如果您要访问每个元素，这只是一个合理的做法，您说这是您的情况。

*（记录在案：否则，记忆并不是一个糟糕的问题，因为你只需要“记住”你以前在哪里。因此你可以保留你已经访问过的索引列表。如果你曾经这样做过这很糟糕计划访问每个元素，因为如果使用不断增长的黑名单来实现拒绝采样可能会花费很长时间。（您也可以使用递减的白名单来实现它，这相当于第一个解决方案。）*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T23:22:40.510

您已经说过，您的网格中的大多数单元格的测试可能会失败。如果是这种情况，随机抽样单元格可能不是一个好主意，因为您将很难在不使用大量内存的情况下跟踪您已经检查过的单元格。

相反，您最好将测试应用于整个网格并从通过它的元素中选择一个随机元素。

此函数返回一个通过测试的随机元素（如果都失败，则返回 None）。它使用很少的内存。

```
def findRandomElementThatPasses(iterable, testFunc):
    value = None
    passed = 0

    for element in iterable:
        if testFunc(element):
            passed += 1
            if random.random() > 1.0/passed:
                value = element

    return value 
```

你可以这样称呼它：

```
e = findRandomElementThatPasses((x,y) for x in xrange(X_SIZE)
                                      for y in xrange(Y_SIZE),
                                someFunctionTakingAnXYTuple) 
```

如果您使用的是 Python 3，请使用 range 而不是 xrange。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T19:38:11.707

在 perl 你可以做这样的事情：

```
# how many you got and need
$xmax = 10000000;
$ymax = 10000000;
$sampleSize = 10000;

# build hash, dictionary in python
$cells = {};
$count = 0;
while($count < $sampleSize) {
  $x = rand($xmax);
  $y = rand($ymax);
  if(! $cells->{$x}->{$y}) {
    $cells->{$x}->{$y}++;
    $count++;
  }
}
# now grab the stuff
foreach ($x keys %{$cells}) {
  foreach ($y keys %{$cells->{$x}}) {
    getSample($x, $y);
  }
} 
```

没有重复，相当随机，记忆力也不大。

# sql - Oracle rownum < [n] 替代方案？对此事的认知？

> ID：10726542
> 
> 赞同：3
> 
> 时间：2012-05-23T19:25:49.293
> 
> 标签：sql, oracle

据我了解，rownum 在查询后应用于整个结果集。这意味着如果我想使用 rownum 限制结果，它仍然会首先查询所有内容。我有一个包含十万条记录的用户表。我也在开发一个网站来搜索这个表并返回一个结果集。不幸的是，请求者希望我包含仅搜索姓氏的功能。

想象一下可能会回来的“琼斯”、“白人”、“布朗”。我想带回不超过 200 条记录，有没有更好的方法来代替使用 rownum？我对何时应用 rownum 的理解是否正确？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T19:29:44.997

```
SELECT  *
FROM    (
        SELECT  *
        FROM    mytable
        WHERE   lastname = 'Jones'
        ORDER BY
                id
        )
WHERE   rownum <= 200 
```

或者

```
SELECT  *
FROM    (
        SELECT  *, ROW_NUMBER() OVER (ORDER BY id) rn
        FROM    mytable
        WHERE   lastname = 'Jones'
        )
WHERE   rn <= 200 
```

后者速度较慢，`9i`但​​在`10g+`.

> 据我了解，rownum 在查询后应用于整个结果集

`rownum`不会。只要满足该子句的每条记录被`WHERE`提取（但在它们被排序之前），就会应用。

实际上，这里需要嵌套查询，因为`ROWNUM`在`ORDER BY`.

两者`ROWNUM`和`ROW_NUMBER()`都需要优化。如果您在 上有一个索引`(lastname, id)`，则查询将使用该索引并在返回第 200 条记录后停止（您将`COUNT(STOPKEY)`在计划中看到 a ）。

还有一个常见的警告`ROWNUM`和分页。这个查询：

```
SELECT  *
FROM    (
        SELECT  *
        FROM    mytable
        WHERE   lastname = 'Jones'
        ORDER BY
                id
        )
WHERE   rownum BETWEEN 201 AND 400 
```

永远不会返回任何东西，因为`ROWNUM`它本身就是`WHERE`条件的一部分。引擎只是不能返回第一行，因为它会有`ROWNUM = 1`不满足`WHERE`子句的。

要解决此问题，您必须双重嵌套查询：

```
SELECT  *
FROM    (
        SELECT  q.*, ROWNUM AS rn
        FROM    (
                SELECT  *
                FROM    mytable
                WHERE   lastname = 'Jones'
                ORDER BY
                        id
                ) q
        )
WHERE   rn BETWEEN 201 AND 400 
```

这也将优化为a `COUNT(STOPKEY)`。

# c# - 使属性在 DataGridView 中可见但在 PropertyGrid 中不可见？

> ID：10726543
> 
> 赞同：6
> 
> 时间：2012-05-23T19:25:52.207
> 
> 标签：c#, properties, datagridview, hide, propertygrid

假设我有一个想要在 DataGridView 中显示的属性，但在 PropertyGrid 中显示同一对象时却没有。我知道我可以使用`[Browsable(false)]`，但这在两个视图中都隐藏了它。我也可以做一个`gridView.Columns["blah"].Visible = false;`，但这与我想要的相反，因为它隐藏在 DataGridView 中而不是 PropertyGrid 中。有什么办法可以逆转吗？（创建一个全新的 DataTable 只是为了保存相同的数据减去一个字段，而是将所有内容重新绑定到该数据表 - 这确实是一种做事的方式。）或者，我可以接受一个向 DataGridView 添加一列的解决方案这在实际课程中不存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T15:05:24.107

可以通过使用 PropertyGrid 的 BrowsableAttributes 属性来解决此问题。首先，创建一个新属性，如下所示：

```
public class PropertyGridBrowsableAttribute : Attribute
{
    private bool browsable;
    public PropertyGridBrowsableAttribute(bool browsable){
        this.browsable = browsable;
    }
} 
```

然后将此属性添加到您希望在 PropertyGrid 中显示的所有属性：

```
[DisplayName("First Name"), Category("Names"), PropertyGridBrowsable(true)]
public string FirstName {
    get { return ... }
    set { ... }
} 
```

然后像这样设置 BrowsableAttributes 属性：

```
myPropertyGrid.BrowsableAttributes = new AttributeCollection(
    new Attribute[] { new PropertyGridBrowsableAttribute(true) }); 
```

这只会在您的属性网格中显示属性属性，并且 DataGridView 仍然可以访问所有属性，只需更多的编码工作。

我仍然会选择 Tergiver 并将这种行为称为错误，因为 Browsable 属性的文档清楚地说明了它仅用于属性窗口。

[（归功于http://www.mycsharp.de/wbb2/thread.php?postid=234565](http://www.mycsharp.de/wbb2/thread.php?postid=234565)上的用户“maro” ）

# jquery - 使用 Active Social for DotNetNuke 更改选项卡后的 jQuery 重新绑定

> ID：10726545
> 
> 赞同：0
> 
> 时间：2012-05-23T19:25:56.603
> 
> 标签：jquery, ajax, dotnetnuke

我正在使用第三方选项卡控件，它是名为 Active Social 的 DotNetnuke 模块的一部分，我没有相关文档。问题是当我更改选项卡时，我丢失了一个 js (masonry.js)，它设置了选项卡中加载的内容的样式。我需要重新绑定脚本但没有成功

这是我到目前为止所拥有的。

我正在使用我在以前的项目中使用过的重新绑定方法

```
function BindControlEvents() {
        //jQuery is wrapped in BindEvents function so it can be re-bound after each callback.
        var $container = $('.addMasonry');
        $container.imagesLoaded(function () {
            $container.masonry({
                itemSelector: '.explore-image',
                columnWidth: 10,
                isFitWidth: true
            });

        });

    }
    //Initial bind
    $(document).ready(function () {
        BindControlEvents();
    }); 
```

// 重新绑定回调 var prm = Sys.WebForms.PageRequestManager.getInstance();

```
 prm.add_endRequest(function () {
        BindControlEvents();
    }); 
```

但是，当更改选项卡时，这不会重新绑定。所以我在页面上创建了一个按钮

```
 <li><a onclick="BindControlEvents();" href="#">re-bind</a></li> 
```

选项卡更改后单击此按钮将重新绑定我的脚本。

我假设的下一步是找到告诉我标签已完成加载但到目前为止我没有成功的事件

我尝试选择选项卡容器并在 .load() 和 .ajaxComplete() 上运行 BindControlEvents 函数，但仍然没有成功。

是否有任何其他方法可以找出选项卡何时完全加载。我知道我可能不会付出太多努力，但这就是我所知道的。

谢谢您的帮助

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T23:25:55.677

也许有一个没有被截获的部分回发，尝试在你的 js 中添加以下内容，在 jquery init 之外：

```
 <script type="text/javascript">
    Sys.Application.add_load(BindControlEvents);

    function BindControlEvents() {
    [...]
    </script> 
```

希望这会有所帮助，人。

# node.js - 文档中的 Mongoose Mongo 额外字段

> ID：10726551
> 
> 赞同：0
> 
> 时间：2012-05-23T19:27:04.693
> 
> 标签：node.js, mongodb, mongoose

所以我正在使用 Mongoose ODM。我有一个集合，文档中基本上有一个字段。也许我稍后会添加更多。所以当我插入时，它插入得很好并且数据在那里但是很多其他字段也是如此，比如：isNew、error、activePaths、states 等......看起来像 Mongoose 对象数据，但不确定它为什么会进入。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:41:12.720

该数据确实是 Mongoose 为其正确操作插入的数据。该数据用于例如：进行验证，仅在必要时进行保存（简单地说：当 1 个或多个“路径”脏时），“预保存”挂钩的注册等。

不过不用担心，因为 mongoose 保留的字段不会持久化到 mongoDB。（使用 mongo CLI 或其他工具检查数据库中的实际内容）

您可以随时检查`yourdocument._doc`哪些保留了计划保存到 mongo 的实际字段。

# android - ExpandableListView onChildClick 如何获取点击了视图的哪一部分的信息

> ID：10726554
> 
> 赞同：0
> 
> 时间：2012-05-23T19:27:23.920
> 
> 标签：android, expandablelistview

我在获取已单击视图的哪一部分的信息时遇到问题。我将子行项目定义为：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"    
  android:id="@+id/child_view"
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="@dimen/row_height"
        android:background="@color/app_white" >

        <CheckBox
            android:id="@+id/checkbox"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_marginRight="@dimen/row_margin"
            android:button="@drawable/checkbox_states"
            android:focusable="false" />
    </RelativeLayout>

    <View
        android:id="@+id/view"
        android:layout_width="fill_parent"
        android:layout_height="10dp"
        android:background="@android:color/transparent"
        android:focusable="false"  />   

</LinearLayout> 
```

在 Activity 我需要定义 onChildClick

```
public boolean onChildClick(ExpandableListView parent, View v, int groupPosition,
            int childPosition, long id) {
Log.e(LOGTAG, "onChildClick: v.getTag: " + v.getTag() + " groupPos: " + groupPosition
                + " childPosition: " + childPosition + " rowId: " + id);

        if (v instanceof LinearLayout) {
            View view = ((LinearLayout) v).getChildAt(1);
            if (view != null) {
                if (view.getTag() != null) {
                    Log.e(LOGTAG, "onChildClick: view.isSelected: "+view.isSelected());
                    Log.e(LOGTAG, "onChildClick: view.isPressed: "+view.isPressed());
                    Log.e(LOGTAG, "onChildClick: view.getTag: " + view.getTag());
                    return true;
                }
            }
        } 
```

正如我所看到的，视图始终是 LinearLayout。如果单击视图或相对布局，我如何获取信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:49:44.597

onChildClick() 将始终返回被单击的整个子行。如果你想知道是否点击了 RelativeLayout，那么你需要添加一个 onCLickListener 到那个。

# uml - 如何使用 Atlas 转换语言获得工具可读的 XMI

> ID：10726556
> 
> 赞同：0
> 
> 时间：2012-05-23T19:27:33.427
> 
> 标签：uml, transformation, m2m, xmi, metamodel

我是 Atlas 转换语言的初学者，并且已经在基于严重元模型的转换模型方面做了一些步骤。现在我想将基于metamodel1的指定模型转换为基于uml-metamodel的uml-model。我遇到的问题是我想要一个 xmi 文件，我可以用我的 uml 工具（它是 Magic Draw）读取它。我在哪里可以获得一个 uml 元模型，我可以在 ATL 中使用它来生成机器可读的 xmi 文件。我目前的所有方法都没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:18:53.750

这里的问题不是 ATL。您获得的 XMI 文件是否可以被 MagicDraw 读取取决于您用作转换目标的 UML 元模型。

ATL 转换生成模型，这些模型如何存储为 XMI 文件不依赖于 ATL，而是依赖于目标模型的元模型。

您应该首先检查 MagicDraw 是否可以读取使用任何可用的 Eclipse UML 工具创建的 UML 模型，如果可以，那么您可以在准备转换时使用该元模型

# java - IBM WebSphere JAX-RPC 客户端压缩

> ID：10726560
> 
> 赞同：0
> 
> 时间：2012-05-23T19:27:44.827
> 
> 标签：java, web-services, compression, websphere, jax-rpc

有谁知道我在哪里可以找到支持使用客户端处理程序压缩来自客户端的 JAX-RPC Web 服务请求的文档？我正在寻找使用 gzip 压缩请求，我尝试过，

```
SOAPMessage.setProperty(SOAPMessage.CHARACTER_SET_ENCODING, "gzip") 
```

但得到“java.io.UnsupportedEncodingException：gzip”错误。

谢谢，

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:53:36.490

[请参阅http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.base.doc/info/](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/rwbs_httptransportprop.html)中的 com.ibm.websphere.websphere.webservices.http.requestContentEncoding [aes/ae/rwbs_httptransportprop.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/rwbs_httptransportprop.html) - 有一个用于出站 http 请求的 http 传输级别属性

# html - CSS将子div扩展到只有背景的父级？

> ID：10726561
> 
> 赞同：2
> 
> 时间：2012-05-23T19:27:47.083
> 
> 标签：html, css

我已经没有这个想法了，所以寻找一些帮助来让它工作。或者也许确认它是不可能的，并建议我应该怎么做！

我正在重新设计一个 wordpress 网站的样式，并在主要内容的左侧和右侧添加了 siv，以定位边框的外部图像。

我的问题是我无法让 div 扩展到父级的高度！

这是布局：

```
<div class="content_botbg">
<div class="content_bg_left"></div>
<div class="content_res"></div>
<div class="content_bg_right"> </div>
<br style="clear:both">
</div> 
```

和CSS：

```
.content_botbg {
background: none repeat-x scroll center bottom transparent;
border-bottom: 0 solid #EFEFEF;
margin: 0 auto;
min-height: 600px;
padding: 0;
text-align: left;
width: 988px;
}

.content_bg_left {
    background: url("images/content-container-left.png") repeat-y scroll 0 0 transparent;
    float: left;
    width: 24px;
}

.content_res {
    background: url("images/transparent_background.png") repeat scroll 0 0 transparent;
    float: left;
    margin: 0 auto;
    padding: 20px 0 30px;
    width: 940px;
}

.content_bg_right {
    background: url("images/content-container-right.png") repeat-y scroll right center transparent;
    float: left;
    width: 23px;
} 
```

希望有人能帮忙，因为我一直在扯头发。

谢谢，

瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:31:40.500

尝试添加位置：相对于父 div

然后，您需要为孩子指定宽度和高度。

最后，添加一个特殊情况的 div (class="content_bg_IE") 以扩展其他 div 以应对 ever-non-compliant-IE 的情况

例如：

```
<html>
<head>
<style>
.content_bg_IE   { height:600px; width:0px; }
.content_botbg {
  background: none repeat-x scroll center bottom transparent;
  position:relative;
  border-bottom: 0 solid #EFEFEF;
  margin: 0 auto;
  min-height: 600px;
  padding: 0;
  text-align: left;
  width: 988px;
}

.content_bg_left {
    background: url("images/content-container-left.png") repeat-y scroll 0 0 transparent;
    min-height: 600px;
    float: left;
    width: 24px;
}

.content_res {
    background: url("transparent_background.png") repeat scroll 0 0 transparent;
    min-height: 600px;
    float: left;
    margin: 0 auto;
    padding: 20px 0 30px;
    width: 940px;
}

.content_bg_right {
    background: url("images/content-container-left.png") repeat-y scroll right center transparent;
min-height: 600px;
    float: left;
    width: 23px;
}
</style>
</head>
<body>
hello world!
<div class="content_botbg">
<div class="content_bg_left"><div class="content_bg_IE"></div></div>
<div class="content_res"><div class="content_bg_IE"></div></div>
<div class="content_bg_right"><div class="content_bg_IE"></div></div>
<br style="clear:both">
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T01:47:22.207

它应该通过移除浮动并使用一些绝对定位来工作（[参见小提琴](http://jsfiddle.net/CXRqT/1/)）。似乎您的右侧也应该`width: 24px`基于您的整体`width`，但我将其保持在`23px`（根据您的代码），因此它`1px`在小提琴示例中存在差距，但如果它关闭，则很容易纠正。

**HTML**

```
<div class="content_botbg">
<div class="content_bg_left"></div>
<div class="content_res"></div>
<div class="content_bg_right"> </div>
</div> 
```

**CSS**

```
.content_botbg {
   border-bottom: 0 solid #EFEFEF;
   margin: 0 auto;
   padding: 0;
   text-align: left;
   width: 988px;
   position: relative; /* added */
}

.content_bg_left {
    background: url("images/content-container-left.png") repeat-y scroll 0 0 transparent;
    position: absolute; /* replaced float */
    top: 0; /* added */
    bottom: 0; /* added */
    left: 0; /* added */
    width: 24px;
    min-height: 600px; /* moved from content_botbg */
}

.content_res {
    background: url("images/transparent_background.png") repeat scroll 0 0 transparent;
    /* removed float */
    margin: 0 auto;
    padding: 20px 0 30px;
    width: 940px;
}

.content_bg_right {
    background: url("images/content-container-right.png") repeat-y scroll right center transparent;
    position: absolute; /* replaced float */
    top: 0; /* added */
    bottom: 0; /* added */
    right: 0; /* added */
    width: 23px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T20:17:23.857

您必须添加`position:relative`到父级，然后执行`height:100%`：

```
.content_botbg {
    position:relative;
    background: none repeat-x scroll center bottom transparent;
    border-bottom: 0 solid #EFEFEF;
    margin: 0 auto;
    min-height: 600px;
    padding: 0;
    text-align: left;
    width: 988px;
} 
```

然后为孩子们：

```
.content_bg_left, .content_bg_right, .content_res {
    height:100%;
} 
```

结果将与此类似：http: [//jsbin.com/arere4](http://jsbin.com/arere4)

[您可以在http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)找到有关等高列的更多信息

此外，您可以使用 jQuery 来实现相同的效果，类似于：http: [//jsfiddle.net/ULUJX/](http://jsfiddle.net/ULUJX/)

# javascript - IE8/IE7/IE6 似乎将通过 JQuery 插入的锚标记视为块级元素

> ID：10726563
> 
> 赞同：1
> 
> 时间：2012-05-23T19:27:58.837
> 
> 标签：javascript, jquery, html, css

我正在使用 CSS 将`small`段落中的元素绝对定位到所述段落的旁边。那里没有问题。

`small`然后，我希望使用 javascript 在元素之前插入一个链接的上标数字。

基本上，改变这个：

```
<p>
    <small> ... </small>
</p> 
```

对此：

```
<p>
    <sup>
        <a href="#article1_note1">1</a>
    </sup>
    <small class="note" id="article1_note1"> ... </small>
</p> 
```

这是 IE8 或更早版本中布局中断的地方。（据我所知，它也可能在 IE9 中崩溃，但我只有 XP 框可用于测试。）

消除过程表明`a`标签是最终罪魁祸首。这些浏览器似乎将其视为块级元素。在样式规则中添加 a`display: inline`似乎并不能解决这个问题。

奇怪的是，如果我将生成的源代码保存为静态 HTML 文档，它在相同的浏览器中显示得很好。

据我所知，这个问题是由锚标签通过 JS/JQuery 动态插入引起的。

这是我创建的 jsFiddle 测试页面：

[http://jsfiddle.net/D6SMH/show/](http://jsfiddle.net/D6SMH/show/)

这是一个删除了脚本并将 HTML 替换为后者生成的 HTML 的版本：

[http://jsfiddle.net/VJT2N/show/](http://jsfiddle.net/VJT2N/show/)

两者在 Firefox、Chrome 和 Safari 中的显示相同。只有后一种硬编码版本在 IE 违规者中正确显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:56:29.740

您需要在 jQuery 中正确关闭 html 标签。

```
notes.eq(j).before('<sup><a href="#' + noteid + '">' + (j+1) + '</a></sup>'); 
```

[http://jsfiddle.net/D6SMH/2/](http://jsfiddle.net/D6SMH/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:17:50.787

这可能是因为您的 CSS 声明为 vertical-align: super; 为了处理这个请求，它可能会将您的标签转换为块元素。您可能希望在条件样式表中查看另一种解决方法（负边距顶部等）。

# c# - WP7 中的 BackgroundPlayer 问题

> ID：10726566
> 
> 赞同：0
> 
> 时间：2012-05-23T19:28:05.423
> 
> 标签：c#, windows-phone-7

我在我的 wp7 项目中播放流音频时遇到问题。

在解决方案中，我添加了新的 BackgroundPlayer 项目并添加了对一般项目的引用。我的 AudioPlayer.cs 看起来接下来：

```
public class AudioPlayer : AudioPlayerAgent
{
    public static List<AudioTrack> Playlist = new List<AudioTrack>();
    public static int CurrentTrackPlayed;
    private void PlayTrack(BackgroundAudioPlayer player)
    {
        player.Track = Playlist[CurrentTrackPlayed];
        player.Play();
    }
    private void PlayNext(BackgroundAudioPlayer player)
    {
        if (++CurrentTrackPlayed >= Playlist.Count)
            CurrentTrackPlayed = 0;
        PlayTrack(player);
    }
    private void PlayBack(BackgroundAudioPlayer player)
    {
        if (--CurrentTrackPlayed < 0)
            CurrentTrackPlayed = Playlist.Count - 1;
        PlayTrack(player);
    }
    private static volatile bool _classInitialized;

    public AudioPlayer()
    {
        if (_classInitialized) return;
        _classInitialized = true;
        Deployment.Current.Dispatcher.BeginInvoke(delegate
                                                      {
                                                          Application.Current.UnhandledException += AudioPlayerUnhandledException;
                                                      });
    }
    private static void AudioPlayerUnhandledException(object sender, ApplicationUnhandledExceptionEventArgs e)
    {
        if (System.Diagnostics.Debugger.IsAttached)
        {
            System.Diagnostics.Debugger.Break();
        }
    }
    protected override void OnPlayStateChanged(BackgroundAudioPlayer player, AudioTrack track, PlayState playState)
    {
        switch (playState)
        {
            case PlayState.TrackEnded:
                PlayNext(player);
                break;
            case PlayState.TrackReady:
                player.Play();
                break;
            case PlayState.Shutdown:
                // TODO: обработайте здесь состояние отключения (например, сохраните состояние)
                break;
        }

        NotifyComplete();
    }
    protected override void OnUserAction(BackgroundAudioPlayer player, AudioTrack track, UserAction action, object param)
    {
        MessageBox.Show(action.ToString());
        switch (action)
        {
            case UserAction.Play:
                PlayTrack(player);
                break;
            case UserAction.Stop:
                player.Stop();
                break;
            case UserAction.Pause:
                player.Pause();
                break;
            case UserAction.FastForward:
                player.FastForward();
                break;
            case UserAction.Rewind:
                player.Rewind();
                break;
            case UserAction.Seek:
                player.Position = (TimeSpan) param;
                break;
            case UserAction.SkipNext:
                PlayNext(player);
                break;
            case UserAction.SkipPrevious:
                PlayBack(player);
                break;
        }

        NotifyComplete();
    }
    protected override void OnError(BackgroundAudioPlayer player, AudioTrack track, Exception error, bool isFatal)
    {
        if (isFatal)
        {
            Abort();
        }
        else
        {
            NotifyComplete();
        }

    }
} 
```

在我的一般项目中，首先我将新的音轨添加到播放列表对象：

```
AudioPlayer.Playlist = audios.Select(a => new AudioTrack(new Uri(a.Url, UriKind.Absolute), a.Title, a.Artist, null, null)).ToList();
                AudioPlayer.CurrentTrackPlayed = 0; 
```

接下来我尝试使用以下代码播放歌曲：

```
private void PlaySound(Audio a, Shape r)
    {
        try
        {
            if (_lastSelector != null)
                _lastSelector.Fill = Application.Current.Resources["PhoneInverseBackgroundBrush"] as SolidColorBrush;
            if (searchBox.Visibility == Visibility.Visible)
                Store.CurrentAudioIndex = _searched.IndexOf(a);
            else if (_isAudios)
                Store.CurrentAudioIndex = _audios.IndexOf(a);
            else if (_isRecommendations)
                Store.CurrentAudioIndex = _recommendations.IndexOf(a);
            BackgroundAudioPlayer.Instance.Play();
            if (r != null)
            {
                r.Fill = VKMobile.Resources.AccentBrush;
                _lastSelector = r;
            }
        }catch(Exception e)
        {
            MessageBox.Show(e.Message);
        }
    } 
```

但它不起作用，播放没有开始

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:27:24.463

我没有对其进行测试，但经过一些分析后，我建议至少进行以下两项更改：

第一个是使用；

```
 AudioPlayer.Playlist.AddRange( .... ); //no ToList() copy needed. 
```

第二个是我认为错误的根源，在将新的 AudioTracks 添加到播放列表后，未设置 Singleton Backgroundplayer Track。

尝试添加这样的东西：

```
player.Track = Playlist[CurrentTrackPlayed]; 
```

* * *

我建议进行一些其他更改，例如在您的控制方法中删除 BackgroundPlayer 播放器参数。

它是一个单例，所以只有一个实例。因此静态属性名称为 Instance。

您可以在整个 AudioPlayer 类中相当简单地使用它，并将您想要的功能封装得更紧密：

```
public static void AddAndPlayTrack(AudioTrack trackToPlay)
    {
        BackgroundAudioPlayer.Instance.Track = trackToPlay;
        Playlist.Add(trackToPlay);
        CurrentTrackPlayed = Playlist.LastIndexOf(trackToPlay);
    } 
```

# asp.net - Asp.Net ListView LinqDataSource 以声明方式绑定子对象

> ID：10726567
> 
> 赞同：0
> 
> 时间：2012-05-23T19:28:09.387
> 
> 标签：asp.net, binding, declarative, linqdatasource

我有一个带有 LinqDataSource 的 ListView。在编辑模板中，我们需要编辑主要对象和相关（1 对 1）子对象。

在过去，我已经为所有这些使用了代码并手动处理了更新，但我想知道是否有一种声明方式可以让 LinqDataSource 为我处理它。

进一步来说：

1.  有没有办法以声明方式将子对象绑定到我们的编辑输入，如果是这样，语法是什么？

2.  有没有办法以声明方式将 LinqDataSource 项（“MyLinqObject”）绑定到 DropDownList 的选定项/值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:41:16.900

自己有这个。子对象很简单`<%# Bind("MyChildObjectTypeName.MyChildObjectPropertyName") %>'>`。

出现了 DropDown 问题，因为由于某种原因 Intellisense 没有在 DropDownList 声明标记中显示“SelectedValue”属性。

当然，只要添加它就可以正常工作。

```
SelectedValue='<%# Bind("PropertyName") %>'> 
```

# jquery - 从已加载的内容中触发和加载新内容

> ID：10726576
> 
> 赞同：1
> 
> 时间：2012-05-23T19:28:56.390
> 
> 标签：jquery, ajax, jquery-load

我正在尝试加载一些内容，这些内容是通过单击带有 id# 的标签触发的，该标签已经在加载的内容中。

目前我首先使用这个（波纹管）来加载内容，运行一个 nivo 滑块，然后我在尝试加载新内容时遇到了麻烦

```
$(document).ready(function() {
$("#pegasus-tile, #o-w").click(function(){
    $("#proj-content").load("projects/pegasus.html", function(){

        $('<div id="slider" class="nivoSlider"></div>');
        $('#slider').nivoSlider({effect: 'sliceUpDown'}),

    $("#next-pegasus").click(function(){
        $("#proj-content").load("projects/bg-app.html");        

        });
      });
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:31:21.357

`.empty`在下一个之前运行`.load`

```
$(document).ready(function() {
    $("#pegasus-tile, #o-w").click(function(){
        $("#proj-content").empty().load("projects/pegasus.html", function(){
            $('<div id="slider" class="nivoSlider"></div>');
            $('#slider').nivoSlider({effect: 'sliceUpDown'}),
    $("#next-pegasus").click(function(){
        $("#proj-content").empty().load("projects/bg-app.html");        

        });
      });
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:32:52.047

看看 .live() 函数。

您的代码不起作用，因为具有 id next-pegasus 的元素是动态添加的，并且默认的 .click()-Listener 无法“看到”该元素。要使其工作，请为 #next-pegasus 元素实现 click-Listener，如下所示：

```
$('#next-pegasus').live('click', function() {
    // do the same stuff here ...
}); 
```

编辑：

请改用 .on() 函数，因为不推荐使用 .live()。

# sql - SQL 代理作业：确定它已经运行了多长时间

> ID：10726585
> 
> 赞同：10
> 
> 时间：2012-05-23T19:30:01.263
> 
> 标签：sql, sql-server, sql-server-2008, sql-agent-job

**情景**

某些 SQL 代理作业计划在一天中每隔几分钟运行一次。

有时它会错过下一个时间表，因为它仍在按上一个时间表运行。

每隔一段时间，一项工作可能会“挂起”。这不会产生失败（因为作业还没有停止）。发生这种情况时，可以手动停止作业并在下次运行时正常工作。它旨在从中断的地方重新开始。

**什么是最有效的方法...？**

我想要一种方法来确定名为“JobX”的 SQL 代理作业当前正在运行多长时间（以秒为单位）。如果它当前没有运行，我们可以返回零。

这样，如果作业的运行时间超过某个阈值，我可以停止作业。

我假设可以使用 xp_sqlagent_enum_jobs 和 sysjobhistory 的组合，但我很好奇是否有更好的解决方案......并且希望可以从你们其他人已经遇到并解决的障碍中受益。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-23T19:45:46.940

该解决方案将起作用：

```
SELECT DATEDIFF(SECOND,aj.start_execution_date,GetDate()) AS Seconds
FROM msdb..sysjobactivity aj
JOIN msdb..sysjobs sj on sj.job_id = aj.job_id
WHERE aj.stop_execution_date IS NULL -- job hasn't stopped running
AND aj.start_execution_date IS NOT NULL -- job is currently running
AND sj.name = 'JobX'
and not exists( -- make sure this is the most recent run
    select 1
    from msdb..sysjobactivity new
    where new.job_id = aj.job_id
    and new.start_execution_date > aj.start_execution_date
) 
```

这是一个更一般的检查，取决于系统表。如果您更喜欢自定义路线，则可以将作业插入到您创建的作业日志表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T04:40:46.510

```
/**** FOR CURRENTLY RUNNING JOBS ****/
SELECT j.name AS Job_Name,DATEDIFF(ss,a.start_execution_date ,GETDATE ())   
FROM msdb.dbo.sysjobactivity a INNER JOIN msdb.dbo.sysjobs j 
ON a.job_id =j.job_id
WHERE CONVERT(DATE,a.start_execution_date )=CONVERT(DATE,GETDATE ())
AND a.stop_execution_date IS NULL

/*This code will give u the Name of currently running jobs and for how much time it is running & after that u can add filters to it as u wish*/
/*Thanks in advance*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-24T02:43:02.530

您手动执行的操作听起来像是所谓的“看门狗循环”。基本上，启动和/或监视代理作业的 SQL 作业，如果需要，将其杀死。

[下面的代码取自这里](http://cc.davelozinski.com/code/sql-watchdog-loop-start-monitor-sql-agent-jobs)，应该会有所帮助，如果它们已经运行了很长时间，则无需手动监视和终止作业：

```
/****************************************************************
--This SQL will take a list of SQL Agent jobs (names must match),
--start them so they're all running together, and then
--monitor them, not quitting until all jobs have completed.
--
--In essence, it's an SQL "watchdog" loop to start and monitor SQL Agent Jobs
--
--Code from http://cc.davelozinski.com/code/sql-watchdog-loop-start-monitor-sql-agent-jobs
--
****************************************************************/
SET NOCOUNT ON 

-------- BEGIN ITEMS THAT NEED TO BE CONFIGURED --------

--The amount of time to wait before checking again 
--to see if the jobs are still running.
--Should be in hh:mm:ss format. 
DECLARE @WaitDelay VARCHAR(8) = '00:00:20'

--Job timeout. Eg, if the jobs are running longer than this, kill them.
DECLARE @TimeoutMinutes INT = 240

DECLARE @JobsToRunTable TABLE
(
    JobName NVARCHAR(128) NOT NULL,
    JobID UNIQUEIDENTIFIER NULL,
    Running INT NULL
)

--Insert the names of the SQL jobs here. Last two values should always be NULL at this point.
--Names need to match exactly, so best to copy/paste from the SQL Server Agent job name.
INSERT INTO @JobsToRunTable (JobName, JobID, Running) VALUES ('NameOfFirstSQLAgentJobToRun',NULL,NULL)
INSERT INTO @JobsToRunTable (JobName, JobID, Running) VALUES ('NameOfSecondSQLAgentJobToRun',NULL,NULL)
INSERT INTO @JobsToRunTable (JobName, JobID, Running) VALUES ('NameOfXSQLAgentJobToRun',NULL,NULL)

-------- NOTHING FROM HERE DOWN SHOULD NEED TO BE CONFIGURED --------

DECLARE @ExecutionStatusTable TABLE
(
    JobID UNIQUEIDENTIFIER PRIMARY KEY, -- Job ID which will be a guid
    LastRunDate INT, LastRunTime INT, -- Last run date and time
    NextRunDate INT, NextRunTime INT, -- Next run date and time
    NextRunScheduleID INT, -- an internal schedule id
    RequestedToRun INT, RequestSource INT, RequestSourceID VARCHAR(128),
    Running INT,    -- 0 or 1, 1 means the job is executing
    CurrentStep INT, -- which step is running
    CurrentRetryAttempt INT, -- retry attempt
    JobState INT -- 0 = Not idle or suspended, 1 = Executing, 2 = Waiting For Thread,
                     -- 3 = Between Retries, 4 = Idle, 5 = Suspended, 
                     -- 6 = WaitingForStepToFinish, 7 = PerformingCompletionActions
)

DECLARE @JobNameToRun NVARCHAR(128) = NULL
DECLARE @IsJobRunning BIT = 1
DECLARE @AreJobsRunning BIT = 1
DECLARE @job_owner sysname = SUSER_SNAME()
DECLARE @JobID UNIQUEIDENTIFIER = null
DECLARE @StartDateTime DATETIME = GETDATE()
DECLARE @CurrentDateTime DATETIME = null
DECLARE @ExecutionStatus INT = 0
DECLARE @MaxTimeExceeded BIT = 0

--Loop through and start every job
DECLARE dbCursor CURSOR FOR SELECT JobName FROM @JobsToRunTable
OPEN dbCursor FETCH NEXT FROM dbCursor INTO @JobNameToRun
WHILE @@FETCH_STATUS = 0
BEGIN
    EXEC [msdb].[dbo].sp_start_job @JobNameToRun
    FETCH NEXT FROM dbCursor INTO @JobNameToRun
END
CLOSE dbCursor
DEALLOCATE dbCursor

print '*****************************************************************'
print 'Jobs started. ' + CAST(@StartDateTime as varchar)
print '*****************************************************************'

--Debug (if needed)
--SELECT * FROM @JobsToRunTable

WHILE 1=1 AND @AreJobsRunning = 1
BEGIN

    --This has to be first with the delay to make sure the jobs
    --have time to actually start up and are recognized as 'running'
    WAITFOR DELAY @WaitDelay 

    --Reset for each loop iteration
    SET @AreJobsRunning = 0

    --Get the currently executing jobs by our user name
    INSERT INTO @ExecutionStatusTable
    EXECUTE [master].[dbo].xp_sqlagent_enum_jobs 1, @job_owner

    --Debug (if needed)
    --SELECT 'ExecutionStatusTable', * FROM @ExecutionStatusTable

    --select every job to see if it's running
    DECLARE dbCursor CURSOR FOR 
        SELECT x.[Running], x.[JobID], sj.name 
        FROM @ExecutionStatusTable x 
        INNER JOIN [msdb].[dbo].sysjobs sj ON sj.job_id = x.JobID
        INNER JOIN @JobsToRunTable jtr on sj.name = jtr.JobName
    OPEN dbCursor FETCH NEXT FROM dbCursor INTO @IsJobRunning, @JobID, @JobNameToRun

    --Debug (if needed)
    --SELECT x.[Running], x.[JobID], sj.name 
    --  FROM @ExecutionStatusTable x 
    --  INNER JOIN msdb.dbo.sysjobs sj ON sj.job_id = x.JobID
    --  INNER JOIN @JobsToRunTable jtr on sj.name = jtr.JobName

    WHILE @@FETCH_STATUS = 0
    BEGIN
        --bitwise operation to see if the loop should continue
        SET @AreJobsRunning = @AreJobsRunning | @IsJobRunning

        UPDATE @JobsToRunTable
        SET Running = @IsJobRunning, JobID = @JobID
        WHERE JobName = @JobNameToRun

        --Debug (if needed)
        --SELECT 'JobsToRun', * FROM @JobsToRunTable

        SET @CurrentDateTime=GETDATE()

        IF @IsJobRunning = 1
        BEGIN -- Job is running or finishing (not idle)

            IF DATEDIFF(mi, @StartDateTime, @CurrentDateTime) > @TimeoutMinutes
            BEGIN     
                print '*****************************************************************'
                print @JobNameToRun + ' exceeded timeout limit of ' + @TimeoutMinutes + ' minutes. Stopping.'
                --Stop the job
                EXEC [msdb].[dbo].sp_stop_job @job_name = @JobNameToRun
            END
            ELSE
            BEGIN
                print @JobNameToRun + ' running for ' + CONVERT(VARCHAR(25),DATEDIFF(mi, @StartDateTime, @CurrentDateTime)) + ' minute(s).'
            END
        END

        IF @IsJobRunning = 0 
        BEGIN
            --Job isn't running
            print '*****************************************************************'
            print @JobNameToRun + ' completed or did not run. ' + CAST(@CurrentDateTime as VARCHAR)
        END

        FETCH NEXT FROM dbCursor INTO @IsJobRunning, @JobID, @JobNameToRun

    END -- WHILE @@FETCH_STATUS = 0
    CLOSE dbCursor
    DEALLOCATE dbCursor

    --Clear out the table for the next loop iteration
    DELETE FROM @ExecutionStatusTable

    print '*****************************************************************'

END -- WHILE 1=1 AND @AreJobsRunning = 1

SET @CurrentDateTime = GETDATE()
print 'Finished at ' + CAST(@CurrentDateTime as varchar)
print CONVERT(VARCHAR(25),DATEDIFF(mi, @StartDateTime, @CurrentDateTime)) + ' minutes total run time.' 
```

# ruby-on-rails - Ruby on Rails Tutorial(3.2)第7章练习清单7.32 rspec问题

> ID：10726589
> 
> 赞同：0
> 
> 时间：2012-05-23T19:30:13.167
> 
> 标签：ruby-on-rails

添加**清单 7.32中提供的 rspec 测试后，rspec 无法使用****find_by_email**方法返回 User 对象。rspec 测试失败并显示一条消息“ ***NoMethodError: undefined method name for nil:NilClass*** ”，这实际上告诉我它找不到用户，因此没有返回用户对象。任何关于为什么这种特定的查找器方法失败而其他方法工作的任何见解都会有所帮助。

我使用第 7 章示例部分开头提供的信息添加了一个用户，该部分指定名称为“ **Rails Tutorial** ”，电子邮件为“ **example@railstutorial.org** ”。我还更改了 rspec *have_selector*方法以匹配HTML *h1*标记中的用户*名，而不是 HTML**标题*标记。如果我使用其他查找器方法（例如**User.first**或**User.find(1)）** ，则 rspec 测试通过，但在我使用**User.find_by_email("example@railstutorial.org")时失败**********. 如果我打开一个 Rails 控制台（开发模式），我可以使用 find_by_email 方法返回正确的用户。如果我打开 Rails 控制台（测试模式），则数据库中没有用户。我运行`bundle exec rake db:test:prepare`并重新运行它，但 rspec 测试仍然失败。我可以在将规范更改为使用*User.first*并打印出*名称*和*电子邮件*时打印出正确的结果，`pp user.name, user.email`但是在尝试使用**User.find_by_email("example@railstutorial.org")**时 rspec 会丢失。********

 ******# 环境

红宝石 1.9，轨道 3.2.3，Ubuntu 10.04

## 宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'bootstrap-sass','2.0.0'
gem 'bcrypt-ruby','3.0.1'

group :development, :test do
  gem 'sqlite3'
  gem 'rspec-rails','2.9.0'
  gem 'annotate', '~> 2.4.1.beta'
end

group :test do
  gem 'capybara','1.1.2'
  gem 'factory_girl_rails','1.4.0'
end

#Javascript runtime for Linux
gem 'therubyracer' 

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

## 用户模型

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password
  before_save { self.email.downcase! }
  validates :name, presence: true, length: {maximum:20}
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, 
                    format:     { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false}
  validates :password, length: {minimum:6}
  validates :password_confirmation, presence: true
end 
```

## user_pages rspec（片段）

```
describe "signup" do
  before { visit signup_path }
  let(:submit) { "Create my account" }
  describe "with invalid information" do
    it "should not create a user" do
      expect { click_button submit }.not_to change(User, :count)
    end
    describe "after submission" do
      before { click_button submit }
      it { should have_selector('title',text: 'Sign up') }
      it { should have_content('error') } 
    end
  end
  describe "with valid information" do
    before do
      fill_in "Name", with: "Example User"
      fill_in "Email", with: "user@example.com"
      fill_in "Password", with: "foobar"
      fill_in "Confirmation", with: "foobar"
    end
    it "should create a user" do
      expect { click_button submit }.to change(User, :count).by(1)
    end
    describe "after saving the user" do
      before { click_button submit }
      let(:user) { User.find_by_email("example@railstutorial.org") }
      it { should have_selector('h1', text: user.name) #error with name on NilClass!
      it { should have_selector('div.alert.alert-success', text: 'Welcome')}
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:45:40.283

您使用 email= 填写表单，`user@example.com`但尝试使用 email= 在您的数据库中查找用户`example@railstutorial.org`。使它们相同。******

# php - 如何在 php 中使用 preg_replace() 替换给定的字符串？

> ID：10726593
> 
> 赞同：-2
> 
> 时间：2012-05-23T19:30:37.203
> 
> 标签：php

我正在尝试通过以下代码替换字符串

```
$find2 = array ('/is/', '/working/'); 
 $replace2 = array ('to', 'work');
 $data="During the day, Damien is working";
 echo  preg_replace ($find2, $replace2, $data); 
```

输出是

> 白天，达米安上班

但我希望结果是

> 达米安上班

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:32:55.773

您应该将“白天”替换为“”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:36:46.767

要删除`During the day, Damien is working`，您可以使用以下命令：

```
$data = str_ireplace('During the day, Damien is working', 'Damien to work', $data); 
```

以便：

```
$data = "During the day, Damien is working";
$data = str_ireplace('During the day, Damien is working', 'Damien to work', $data);
echo $data; 
```

将回显（输出）：

```
Damien to work 
```

按照你的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T19:42:57.007

**代码：**

```
$data="During the day, Damien is working";
echo preg_replace("/.*,(.*)/i","$1",$data); 
```

**输出：**

> 达米安在工作

会工作。它会将“任何东西，字符串”删除为“字符串”。删除“，”之前的所有内容以及“，”。

* * *

对于您的代码，您希望数据数组替换这两件事+据我所知，您还需要替换它。所以，

**代码：**

```
$find2 = array ('/is/', '/working/',"/.*,(.*)/"); 
 $replace2 = array ('to', 'work',"$1");
 $data="During the day, Damien is working";
 echo  preg_replace ($find2, $replace2, $data); 
```

**输出：**

> 达米安上班

# java - bufferedImage.getRGB(x, y) 不产生 alpha

> ID：10726594
> 
> 赞同：16
> 
> 时间：2012-05-23T19:30:41.117
> 
> 标签：java, colors, rgb, bufferedimage

我有一个 BufferedImage `i`，我想从**包含 alpha 值**的某个像素中获取[颜色](https://docs.oracle.com/javase/7/docs/api/java/awt/Color.html)。使用和坐标来识别像素。`image` **`x``y`**

 **这是我尝试过的：

```
Color c = new Color(i.getRGB(x, y)); 
```

出于某种原因，新颜色对象包含正确的 RGB，但 alpha 丢失了。

我究竟做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-23T19:46:56.880

`Color`您使用的单参数构造函数会丢弃 alpha 信息。改用双参数版本并传入`true`for `hasalpha`：

```
Color c = new Color(i.getRGB(x, y), true); 
```

相关的[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html)：

> `Color(int rgb)`
> 
> 创建具有指定组合 RGB 值的不透明 sRGB 颜色，该值由位 16-23 中的红色分量、位 8-15 中的绿色分量和位 0-7 中的蓝色分量组成。
> 
> `Color(int rgba, boolean hasalpha)`
> 
> 创建具有指定组合 RGBA 值的 sRGB 颜色，该值由 24-31 位中的 alpha 分量、16-23 位中的红色分量、8-15 位中的绿色分量和 0-7 位中的蓝色分量组成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T19:50:06.770

Alpha没有丢失。

您必须使用 (int,boolean) 构造函数来获取像素信息并使用布尔值指定它是否具有 alpha 值，或者使用具有 4 个值 Red、Green、Blue 和 Alpha 的构造函数。

[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html#Color%28int,%20int,%20int,%20int%29)中的 (int,int,int,int) 构造函数信息

为了缩短代码，您始终可以替换以下所有代码， `Color color = new Color(i.getRGB(x, y), true);` 这些代码告诉颜色构造函数像素信息确实包含 Alpha 值。

[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html#Color%28int,%20boolean%29)中的 (int,boolean) 构造函数信息

请注意，有时在检索 alpha 时，以下方式可能会返回 -1，在这种情况下，这意味着它会循环回 255，因此您必须执行 256-1 才能获得实际的 alpha 值。此片段演示如何加载图像并在特定坐标（在本例中为 0,0）获取该图像的颜色。以下示例可以向您展示如何检索包括 alpha 在内的每个颜色值，并将其重建为新颜色。

```
import java.awt.Color;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import javax.imageio.ImageIO;

public class main {

    public static void main(String [] args){
        BufferedImage image = null;
        try {
            image = ImageIO.read(new URL("image.png"));
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        int pixel = image.getRGB(0, 0);

        int alpha = (pixel >> 24) & 0xff;
        int red = (pixel >> 16) & 0xff;
        int green = (pixel >> 8) & 0xff;
        int blue = (pixel >> 0) & 0xff;

        Color color1 = new Color(red, green, blue, alpha);

        //Or use
        Color color2 = new Color(image .getRGB(0, 0), true);

    }
   } 
```

BufferedImages getRGB(int,int) [JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#getRGB%28int,%20int%29)如您所见：

`Returns an integer pixel in the default RGB color model (TYPE_INT_ARGB) and default sRGB colorspace. Color conversion takes place if this default model does not match the image ColorModel. There are only 8-bits of precision for each color component in the returned data when using this method.`

这意味着还检索了 Alpha 值。**

# html - 如何编辑 DisclosurePanel 标题的颜色

> ID：10726595
> 
> 赞同：0
> 
> 时间：2012-05-23T19:30:46.007
> 
> 标签：html, css, gwt

我正在使用 GWT 在我的网页上展示披露面板。我已经成功创建并展示了面板，但标题的颜色是蓝色的。这是典型的链接颜色。我找到了函数 getHeaderTextAccessor() 但这只能编辑文本而不是标题的样式。如何更改颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:01:25.230

如果 GWT 表示 Google Webkit Toolkit（我对这两个术语都不熟悉），那么根据这个[链接](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/DisclosurePanel.html)，只需使用其中一个 css 规则。它应该改变颜色，希望如此。

```
.gwt-DisclosurePanel { the panel's primary style }
.gwt-DisclosurePanel-open { dependent style set when panel is open }
.gwt-DisclosurePanel-closed { dependent style set when panel is closed }
.header { the header section }
.content { the content section } 
```

（来自上面的链接）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:34:03.177

导航到您的“公共”文件夹并在其中创建一个 style.css 文件并添加

```
.myDisclosurePanel {
    background-color: #000000
 } 
```

然后在同一个“公共”文件夹中添加该行

```
<link ref="stylesheet" type="text/css" href="style.css""> 
```

在节中。然后在您的代码中将样式“myDisclosurePanel”应用于披露面板对象

```
.setStyleName("myDisclosurePanel"); 
```

# c# - Crystal 报告错误的引用

> ID：10726597
> 
> 赞同：0
> 
> 时间：2012-05-23T19:30:52.427
> 
> 标签：c#, visual-studio-2010, crystal-reports

我已经下载了这个安装程序：http: [//downloads.businessobjects.com/akdlm/cr4vs2010/CRforVS_13_0.exe](http://downloads.businessobjects.com/akdlm/cr4vs2010/CRforVS_13_0.exe)应该为 CR 安装所有 ddls，但是在尝试制作报告文档时我收到一个错误，因为缺少参考，我添加了对创建的所有 CR ddl VS 的引用：

![在此处输入图像描述](../Images/ff1d9c75e5939368723d46991675dfb8.png)

CrystalDecisions.CrystalReports 没有“引擎”库，只有一个没有元素的“模板引擎”。我应该安装其他东西吗？:S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T23:46:13.750

原来安装程序（或者可能是 VS）没有使 dll 对 VS 或类似的东西可见，我不得不浏览这些 dll 并手动添加它们，奇怪的是有些库确实显示了，而另一些则没有

# iphone - 自定义键盘 - 将数字放在字符顶部

> ID：10726599
> 
> 赞同：1
> 
> 时间：2012-05-23T19:30:56.117
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uikeyboard

我想在字符顶部绘制一个带有数字的自定义键盘。它应该看起来像所附的屏幕截图。知道如何实现这一目标吗？

![在此处输入图像描述](../Images/0de29120545f2e11218113a2e93bf13e.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T20:55:41.333

您使用 UITextField 的 inputAcessoryView 属性在默认键盘上方添加带有数字的视图，您必须绘制数字键：

**@property（读写，保留） UIView *inputAccessoryView**

此属性的默认值为 nil。当文本视图成为第一响应者时，将视图分配给此属性会导致该视图显示在标准系统键盘上方（或自定义输入视图上方，如果提供的话）。例如，您可以使用此属性将自定义工具栏附加到键盘。

# c++ - 如何使用更通用的数据结构？

> ID：10726600
> 
> 赞同：4
> 
> 时间：2012-05-23T19:31:01.297
> 
> 标签：c++, parsing

我正在尝试创建一个允许有限的用户定义替换规则的文本解析器。

也就是说，我正在从 DOS ASCII 文件中读取代码，其中的顺序很重要，并且必须保持行号。有了这个输入，我想应用用户定义的替换规则（用这个字符串交换那个字符串，如果我们看到这个字符串后面跟着那个字符串执行这个翻译，等等）。

输出也是一个格式化的 DOS ASCII 文件。

大多数规则都是直接替换以牙还牙的类型替换，但是，在某些情况下，我想定义一个规则，例如如果 A 在将来的任何时候跟随 B，请应用此规则。

为此，我使用了这样的结构树：

```
struct node {
    list<string> common;  // the text which is not affected by conditions
    string condition;     // matching this string selects the left, otherwise the right
    node *lptr, *rptr;    // pointers to the child nodes, if needed
}; 
```

每当我遇到这样的规则时，我都可以在忽略和应用规则的情况下维护输出，延迟决定使用哪个规则，直到它明确解决。

这有点浪费内存，但似乎是避免两次传递输入数据的最佳方法（输入数据的大小未知，但可能小于 1 兆）。

当然，可能存在这样一种情况，即在一个或两个子节点中触发这种类型的不同规则，这就是树结构的原因。

没有限制必须在父母之前决定孩子，可能父母只能在孩子的一个分支上决定。遇到 EOF 将决定任何未决定的孩子在错误的方向。

所以很明显，在倒带和折叠节点时我必须小心。

这个一般问题有更简单的解决方案吗？有没有办法以比我的树更有效的方式使用标准库容器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:50:26.280

听起来你应该尝试正则表达式。这是关于选择库的讨论链接：[C++ RegEx Library Choice](https://stackoverflow.com/questions/181624/c-what-regex-library-should-i-use)。Boost是一种流行的方法。

另外，您是否考虑过使用另一种语言来解决问题？Python 拥有大量有用的库，包括一个用于正则表达式的库（import re）。如果它在您的驾驶室中，您可能会发现它比 C++ 解决方案更容易。

最后，考虑为输入文件使用“已定义”的文本格式，而不是自定义格式。XML 是一个不错的选择。在 XML 树中嵌套规则可能更容易。C++ 你可以使用 The Expat XML Parser（Python 是 xml.etree.ElementTree）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:49:13.880

您可能想查看 NFA 和 DFA，即非确定性有限状态自动机和确定性有限状态自动机。这两种方法是编写解析器的最常见且通常非常有效的方法。

节点中其实不需要存储数据，否则会四处传递，浪费内存。更好的方法是分配一个变量（比如 int state = 0）来跟踪当前的解析状态。根据当前状态和输入，您的算法将改变状态。状态总是向前发展，但是如果某个条件不匹配（称为“回溯”），您可以告诉您的算法返回到某个先前的状态。

例如，如果 "ab" 和 "ac" 是两个有效输入，则在解析 "ac" 时，算法可能如下所示：

```
char is 'a' ==> go to state.checkB
char is not 'b' ==> go back to state.checkA
checkB was already done ==> go to state.checkC
char is 'c' ==> DoSomething(); 
```

需要大量文章和图表才能完全解释所有内容，希望这会给您一些进一步了解的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T21:38:25.940

假设“文本解析器”是指您试图压缩具有相同含义的单词和短语以简化对命令的反应。

在这种情况下，根据旧的文本冒险程序，使用规则查找表的简单左右解析器将在这里工作。

除非我误解了您的问题域，否则您的解决方案似乎设计过度。

# svn - 如何使用 svn log 查找最后一次签到？

> ID：10726604
> 
> 赞同：1
> 
> 时间：2012-05-23T19:31:18.083
> 
> 标签：svn

我正在尝试使用 svn 来查找使用“svn log”的签入，但似乎 svn log 以某种方式受到限制。我从源代码树的根目录开始，执行“svn log -l 10”，它为我提供了修订版 958 - 949 的修订信息。但是，如果我执行“svn log -r HEAD:900 -l 10”，我得到修订版 998 - 989 的修订版信息。这是为什么呢？对我来说似乎倒退了-“svn log -l 10”应该给出最新的10，对吗？为什么我需要所有其他参数才能完成这项工作？如果我执行“svn log -r HEAD”，我只会得到一个日志条目。我希望能够获取所有日志条目，然后我可以 grep 结果。一定有更简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:38:50.427

我也经历过同样的事情。我通过在“svn log”之前执行“svn up”来解决它。我对此的理解是，svn 只会列出它对服务器的了解，而不知道您的提交（它只推送它们，它没有缓存它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:57:23.860

```
~$ svn help log
log: Show the log messages for a set of revision(s) and/or file(s).
usage: 1\. log [PATH]
       2\. log URL[@REV] [PATH...]

  1\. Print the log messages for a local PATH (default: '.').
     The default revision range is BASE:1. 
```

因此，按照设计，它从`BASE`. 如果您使用路径，则**不会。** `HEAD`

```
 2\. Print the log messages for the PATHs (default: '.') under URL.
     If specified, REV determines in which revision the URL is first
     looked up, and the default revision range is REV:1; otherwise,
     the URL is looked up in HEAD, and the default revision range is
     HEAD:1. 
```

> 如果我执行“svn log -r HEAD”，我只会得到一个日志条目。我希望能够获取所有日志条目，然后我可以 grep 结果。

无论如何，不​​要限制：

```
 svn log HEAD:1 
```

# kerberos - kinit 如何知道 KDC 在哪里？

> ID：10726607
> 
> 赞同：5
> 
> 时间：2012-05-23T19:31:28.637
> 
> 标签：kerberos

我已经构建并安装了 MIT kerberos 代码。

我也让它在一台机器上工作（用 sserver 和 sclient 测试）。我这样做是为了开发一个使用 kerberos 进行身份验证的应用程序作为测试台。我的问题是 kinit 如何知道将 kerberos 请求发送到哪里？在多机环境中进行测试需要一些设置吗？是否需要进行 DNS 调用？DNS 条目（如果使用）是如何创建的？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T19:06:09.087

事实证明，每个客户端主机都需要一个 /etc/krb5.conf 文件，该文件告诉客户端 KDC 所在的位置。（我在这里说的是 Linux/Unix。）

谢谢。

# javascript - 如何访问img

> ID：10726608
> 
> 赞同：0
> 
> 时间：2012-05-23T19:31:31.787
> 
> 标签：javascript, jquery

```
<li class="jcarousel-item jcarousel-item-horizontal jcarousel-item-1 jcarousel-item-1-horizontal" 
    style="float: left; list-style: none; width: 139px; " jcarouselindex="1">
    <a target="_parent" href="/index.php?option=com_community&amp;view=profile">
    <img class="cloudcarousel" src="http://jomsocial.projectstatus.in//landing-page/images/slide_001.png" alt="">
    </a>
</li>

<li class="jcarousel-item jcarousel-item-horizontal jcarousel-item-2 jcarousel-item-2-horizontal"
    style="float: left; list-style: none; width: 139px; " jcarouselindex="2"> 
    <a href="#"><img class="cloudcarousel" src="http://jomsocial.projectstatus.in//landing-page/images/slide_002.png" alt="">
    </a>
</li> 
```

我想在 JQuery 中访问两个图像。我想知道如何访问它们。例如

```
(.jcarousel-item jcarousel-item-horizontal jcarousel-item-1 jcarousel-item-1-horizontal img).roate() 
```

剂量有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:34:52.397

```
$(".cloudcarousel"); 
```

这会给你两个图像。每个`<img>`都有 CSS 类`cloudcarousel`，所以上面会选择两者。如果您想更具体地确保它们是图像，请使用：

```
$("img.cloudcarousel"); 
```

这将保证它们是`<img>`元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:33:46.913

具有类名的相对`<li>`元素，`.jcarousel-item`您可以使用以下方式获取图像：

```
$(".jcarousel-item img") 
```

为了从具有类名的列表中访问图像，`.jcarousel-item-1`并且`.jcarousel-item-2`只有您可以使用：

```
$(".jcarousel-item-1 img, .jcarousel-item-2 img") 
```

或单独如第一个示例中所述：

```
$(".jcarousel-item-1 img")
$(".jcarousel-item-2 img") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T19:36:46.570

这个也应该做的伎俩。

```
$(".cloudcarousel"); 
```

# fonts - 为什么我的 ExtendScript 无法访问 `app.activeDocument.fonts` 返回给我的某些字体的 `name` 属性？

> ID：10726609
> 
> 赞同：2
> 
> 时间：2012-05-23T19:31:34.060
> 
> 标签：fonts, adobe, extendscript, adobe-indesign

我正在制作一个 ExtendScript 脚本，它遍历 InDesign 文档中使用的所有字体并提醒它们的名称。这是代码

```
var usedFonts = app.activeDocument.fonts;
var nbUsedFonts = usedFonts.length;
var i;
for (i = 0; i < nbUsedFonts; ++i) {
  alert(usedFonts.item(i).name);
} 
```

但是，对于某些字体，当我访问它们的`name`属性时，脚本会崩溃（对象无效）。我可以为所有字体访问而不会崩溃的唯一属性是该`isValid`属性，它使我能够确定那些我无法访问该`name`属性的字体都拥有`isValid === false`，而访问`name`不会导致问题的所有字体都拥有`isValid === true`。

令我惊讶的是，如果我手动将光标放在使用有问题字体之一的文本中，它的名称会显示为正常的*字体选择器*或其他名称。

为什么我无法访问`name`某些由返回给我的字体的属性`app.activeDocument.fonts`？

**笔记：**

以下是一些有问题的字体：

*   Electra LH，斜体
*   Electra LH、Bold Small Caps 和 Oldstyle Figures
*   Electra LH，老式人偶
*   Ocean Sans MT, Light OsF

这些字体可以正常工作：

*   Ocean Sans MT，浅斜体 OsF
*   Ocean Sans MT, Semibold SC
*   Ocean Sans MT，Light SC
*   Ocean Sans MT，光
*   Electra LH, Small Caps & Oldstyle Figures
*   Electra LH，草书
*   Electra LH，大胆的老式人物

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T12:10:26.227

问题可能来自缺少字体，您可以先尝试检查这些，看看是否能解决您的问题：

```
var usedFonts = document.fonts;
for(var i = 0; i < usedFonts.length; i++){

    if(usedFonts[i].status != FontStatus.INSTALLED){
        //You can't rely on font.name if the font is missing
        var fontName = usedFonts[i].fontFamily+" "+usedFonts[i].fontStyleName;
    }else{
        var fontName = usedFonts[i].name;
    }
} 
```

# c - 关于找到两个元素的数组之间的最小差异的困惑

> ID：10726611
> 
> 赞同：0
> 
> 时间：2012-05-23T19:31:43.170
> 
> 标签：c, optimization

我遇到了一个帖子[找到两个数组之间的最小差异](https://stackoverflow.com/questions/4412170/find-the-minimum-difference-between-two-arrays)
并使用我试图解决 SPOJ 问题的概念 - [http://www.spoj.pl/problems/ACPC11B](http://www.spoj.pl/problems/ACPC11B) 但奇怪的是我得到了 WA（错误答案）！！！ ！

然后我尝试了简单的方法..
使用两个for循环..
计算每个元素之间的差异......
然后我得到了AC。！！！！

谁能告诉我为什么这种方法
if (|A[i+1] - B[j]| < |A[i] - B[j+1]|) 然后递增 i，否则在这种情况下递增 j 失败？ ？？？

编辑：我忘了提到，当我实现第一种方法时，我已经对两个数组执行了 qsort ......
同样在 SPOJ 问题中，不需要差异最小的元素的索引。只需要最小差异！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:35:50.360

第一个链接中的方法仅在两个数组都已排序时才有效。SPOJ 问题涉及未排序的数组。这就是为什么该方法不起作用的原因。如果您对数组进行排序，您可以应用第一种方法，但是您需要跟踪原始索引（即排序前每个值的位置）。这可以通过将每个值转换为 (value, index) 对然后对这些对进行排序来实现。这样，您将获得 O(m log m + n log n) 解决方案，而不是蛮力（但正确） O(mn) 解决方案（其中 m 和 n 是数组长度）。

**编辑**根据您发布的代码，我有不同的答案。你的循环条件是错误的。例如， if `i == (x - 1)`but `j != (y - 1)`，循环将执行，您将`a[x]`与`b[j]`. 这是 的非法下标`a`。此外，这是否应该读取与 SPOJ 中描述的相同的输入？我看不到您在哪里阅读测试用例的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:04:23.717

您不会比较数组的第一个元素。也就是说，如果最小差是 | `a[0]-b[0]`| 并且在任何其他元素对之间不会出现这种差异，您不会发现它，因为您的比较以 | 开头 `a[1]-b[0]`| 和 | `a[0]-b[1]`|。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:46:29.197

这就是我认为应该做的事情（基于你的代码），基本上你的代码没有检查2个案例：

首先，当最小值介于数组中的第一个值之间时。

第二个是我们检查了一个数组中的每个值，但第二个数组中仍然有值。（考虑情况 a[0,1,2], b[-1,-2,-3,-5,-6,2]）

```
#include <stdlib.h>
#include <stdio.h>
#include <time.h>

int comp(const void * a,const void * b)
{
    if (*(int*)a==*(int*)b)
        return 0;
    else if (*(int*)a < *(int*)b)
        return -1;
    else
        return 1;
}

int main()
{
    int x,y;
    printf("x: ");
    scanf ("%d", &x);
    int a[x];
    srand(time(NULL));
    for (int i = 0; i < x; i++)
    {
        a[i] = rand() % 30 - 15;
        //scanf ("%d", &a[i]);
        printf ("%d\n",a[i]);
    }

    printf("y: ");
    scanf ("%d", &y);

    int b[y];
    for (int i = 0; i < y; i++)
    {
        b[i] = rand() % 30 - 15;
        //scanf ("%d", &b[i]);
        printf ("%d\n",b[i]);
    }

    qsort(a,x,sizeof(int),comp) ;
    qsort(b,y,sizeof(int),comp) ;
    int i = 0, j = 0;
    int * inc; // using a pointer to select which var to increment. Avoid repeating code, optional and subjective approach.
    int minimum = abs(a[0]-b[0]); // Set min to be a[0] - b[0] which is never checked in the loop

    /* Added the min > 0 condition to avoid looping unnecessarily and avoid the break statement
    Changed the condition from && to || in order to handle the second case
    Changed the != to < which is more restrictive */
    while (minimum > 0 && (i < (x - 1) || j < (y - 1)))
    {

        int z;
        if ( i == x-1) // we've reached the end of a, inc j automatically
        {
            inc = &j;
            z = abs(a[i]-b[j+1]);
        }
        else if ( j == y -1 ) // we've reached the end of b, inc i automatically
        {
            inc = &i;
            z = abs(a[i+1]-b[j]);
        }
        else // here's the original loop, rewritten to shorten the code
        {
            int zi = abs(a[i+1]-b[j]);
            int zj = abs(a[i]-b[j+1]);
            if ( zi < zj)
            {
                inc = &i;
                z = zi;
            }
            else
            {
                inc = &j;
                z = zj;
            }
        }
        if ( z < minimum)
        {
            minimum = z;
        }

        (*inc)++;
    }
    printf("min: ");
    printf ("%d\n", minimum);
    return 0;

} 
```

# mysql - GROUP BY 从特定日期时间开始？

> ID：10726614
> 
> 赞同：0
> 
> 时间：2012-05-23T19:31:51.663
> 
> 标签：mysql, group-by, aggregate

我正在尝试对观察表中的结果进行分组。我的表每隔几秒就包含一次库存值。我希望能够每 2 小时、4 小时、8 小时等显示一次有关股票的汇总信息，但我需要这些时间段从下午 5 点开始。例如，如果数据从 2012 年 5 月 23 日 17:45:34 开始，则第一次观察将从 23 日 17:00:00 开始，直到 23 日 19:00:00，以此类推。我可以根据时间间隔对数据进行分组，但我不知道如何将开始时间设置为下午 5 点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:38:03.370

为什么不在`where`子句中添加条件。花点时间（从您的日期时间开始）并检查以确保它大于 17:00:00。如果是在下午 5 点之前，请不要在计算中使用它。

**编辑**您提到您已经完成了分组。如何在您在 where 子句中添加子查询的最后一天下午 5 点开始（不确定语法）：

```
where datetimeCol >= (select min(date(datetimeCol) + time(5pm)) from tableUsed where previousUsedConditions or id = outerTable.Id) 
```

**编辑**

我知道您有一个更复杂的分组，但是（在 tsql 中）这是我使用 where 语句所想到的。

```
declare @tempTable table (mydate smalldatetime)
insert into @tempTable 
    values('2012-05-23 04:37:04.900'),
        ('2012-05-23 18:37:04.900'),
        ('2012-05-24 04:37:04.900'),
        ('2012-05-25 05:37:04.900')     

select * 
from @tempTable as tbl
group by mydate 

select (cast(cast((select min(temp.myDate) from @tempTable as temp) as DATE) as datetime) + cast(cast( '17:00:00.0000000' as time)as datetime))  as 'This is the time that is getting filtered by below'

select * 
from @tempTable as tbl
where tbl.mydate > (cast(cast((select min(temp.myDate) from @tempTable as temp) as DATE) as datetime) + cast(cast( '17:00:00.0000000' as time)as datetime)) 
```

这给出了以下结果：

```
(4 row(s) affected)
mydate
-----------------------
2012-05-23 04:37:00
2012-05-23 18:37:00
2012-05-24 04:37:00
2012-05-25 05:37:00

(4 row(s) affected)

This is the time that is getting filtered by below
--------------------------------------------------
2012-05-23 17:00:00.000

(1 row(s) affected)

mydate
-----------------------
2012-05-23 18:37:00
2012-05-24 04:37:00
2012-05-25 05:37:00

(3 row(s) affected) 
```

# jquery - 循环中的jquery

> ID：10726624
> 
> 赞同：2
> 
> 时间：2012-05-23T19:32:50.110
> 
> 标签：jquery, loops

我得到了这个网站上非凡的 chapses 和 chapesses 的帮助，才走到了这一步：

```
$(document).ready(function () {
    $('#join').click(function () {
        $(this).animate({
            height: "320px"
        }, 500, function () {
            $(this).css('overflow', 'visible');
        });
    })
    $('#joinClose').click(function () {
        $('#join').animate({
            height: "40px"
        }, 500, function () {
            $(this).css('overflow', 'hidden');
        });
    });
}); 
```

我的 div 从它的静态高度 40px 增长到点击后的 320 并将溢出设置为可见 - 可爱。但是我添加了一个按钮来恢复。它有点工作，但一旦它达到正常大小，它就会再次增长！我对编码很陌生 - 我需要在某个地方停下来吗？！？！？！

多谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T19:36:01.030

如果`joinClose`是 的子级`join`，则需要`stopPropagation`on`joinClose`以防止它传播到`join`.

```
$('#joinClose').click(function(e) {
    e.stopPropagation();
    ... 
```

# algorithm - 如何找到一小组顶点，使得图中从开始节点到结束节点的所有路径都至少包含这些顶点中的一个

> ID：10726625
> 
> 赞同：2
> 
> 时间：2012-05-23T19:32:50.413
> 
> 标签：algorithm, graph, path, set, vertex

在具有起始节点和结束节点的有向图中，如何找到一个小的（不一定是最小的）节点集 S 使得从起始节点到结束节点的每条可能路径都包含至少一个设置 S。请注意，图形可能有循环。我知道这可能是 NP 难的。

1.  有没有一种近似的方法可以从图中找到一个或几个这样的 S？

2.  或者给定一个集合 S，我如何验证 S 是一个解决方案？（图循环似乎使验证非常复杂。）

谢谢。

PS：这个问题类似于Minimum k-path vertex cover problem。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:08:08.793

对于 (2)，您可以通过从图中删除所有有问题的节点然后查看是否仍然存在 s/t 路径来轻松验证集合是否具有此属性。如果是这样，那么一定有一些路径不包含您的集合中的任何节点。如果不是，则每条路径都必须包含该集合中的至少一个节点。

不过，我不确定（1）。

希望这可以帮助！

# php - mysql 字符串逗号分隔，如 %which 导致结果？%

> ID：10726626
> 
> 赞同：3
> 
> 时间：2012-05-23T19:32:50.910
> 
> 标签：php, sql, string

我有一个非常复杂的问题，我和我的同事今天已经讨论了很长时间，我们似乎无法得到答案，想知道这里是否有人有我们错过的好主意。

```
$tags=mysql_real_escape_string($_GET["tags"]);
$tags="SELECT * FROM i WHERE tip LIKE '%".$tags;
$tags=str_replace(",","%' OR tip LIKE '%",$tags);
$tags=$tags."%'";
$qtags = mysql_query($tags) or die(mysql_error()); 
```

例如：$tags='word,phrase,term,foo,bar,anything'

标签是从用户编写的段落中提取的，然后与存储在“i”（sql 数据库）中的段落进行比较。

我们面临的问题是如何识别是什么/哪个“标签”（标签字符串之外）导致了结果。

示例：生成的段落就像字符串 $tags 中的标签 'foo'，它是 'word,phrase,term,foo,bar,anything' 我们如何确定 foo 是原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:37:44.073

你可以尝试这样的事情：

```
SELECT
    CASE WHEN tip LIKE '%foo%' then 'foo'
         WHEN tip LIKE '%bar%' then 'bar'
         WHEN tip LIKE '%anything%' then 'anything'
    END as MatchedTag,
    i.*
FROM i
WHERE tip LIKE '%foo%'
   OR tip LIKE '%bar%'
   OR tip LIKE '%anything%' 
```

它需要`$tags`像您当前的查询一样从您的变量生成。

# python-2.7 - 使用简单安装的 Python db2 安装

> ID：10726630
> 
> 赞同：1
> 
> 时间：2012-05-23T19:33:07.727
> 
> 标签：python-2.7, easy-install

我想为 Python 安装 python db2 包，但我无法安装它。

我已经安装了easy_install，并且能够成功导入easy_install。

我的 easy_install 位置：c:/python27/lib/site-packages/

我的 db2 egg 位置 c:/python27/ibm_db-1.0.5-py2.7-win32.egg

我的安装命令在 shell 中会是什么样子，

我试过这个命令，它给了我无效的错误，

```
>>> easy_install.py c:\python27\ibm_db-1.0.5-py2.7-win32.egg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:45:27.507

尝试这个：

```
C:\Python27\Scripts\easy_install -H None -f c:\python27\ibm_db-1.0.5-py2.7-win32.egg ibm_db 
```

# cakephp - CakePHP 多语言

> ID：10726632
> 
> 赞同：0
> 
> 时间：2012-05-23T19:33:17.337
> 
> 标签：cakephp, multilingual

你好我有两个问题。

首先我想在我的网站上有两种语言，当用户点击标志来改变语言时。问题是我不想使用扩展名为 .po 的语言文件来实现它，因为所有数据都写在数据库中。如果没有 CakePHP 的框架，我将传递一个 GET 变量，例如 ?lang=en，我可以读取正确的记录。如果我在 CakePHP 中使用相同的逻辑，那么我需要在控制器内的所有函数中包含这个变量，我的链接将类似于 /product/en/2。（但是在默认语言中发生的事情我也必须包括在内......）所以我的主要问题是我是否可以使用另一种解决方案（例如 SESSION ）来处理这个问题，但是当用户单击另一种语言时如何更改 SESSION 变量？ ??

我的主菜单确实有类似的问题，我想将我的菜单包含在 default.ctp 文件的标题中（它也是动态的），我该如何实现？哪个是默认文件的主控制器？? ? （为了实现从数据库中读取值的功能）。

很抱歉，我的英语很重要，但我是 CakePHP 的新手，并且在 MVC 逻辑方面很一般，所以我对我以前用普通 PHP 编写的方式有点困惑。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:37:47.303

使用名为 params 的蛋糕进行语言设置和路由器将 /lang:eng 重写为 /eng/。

您可以在 AppController::beforeFilter() 中检查、设置和更改此设置以及会话。这是您的主控制器，所有其他控制器都从该控制器继承。

阅读做得很好的官方文档通常很有帮助：请参阅[http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html#localization-in-cakephp](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html#localization-in-cakephp)它准确地描述了我的内容已经写到这里了。

# android - 使用 Zxing 库扫描 Android QR 码会崩溃

> ID：10726633
> 
> 赞同：1
> 
> 时间：2012-05-23T19:33:20.843
> 
> 标签：android, zxing, qr-code, scanning

我已将 zxing 库集成到我的应用程序中以扫描 QR 码。当我按下按钮并启动 zxing 扫描活动时，应用程序崩溃并在 logcat 上显示以下消息，

```
05-24 02:17:24.037: E/AndroidRuntime(516): FATAL EXCEPTION: main

05-24 02:17:24.037: E/AndroidRuntime(516): java.lang.RuntimeException: Unable to start activity 
ComponentInfo{com.code.looknmove/com.google.zxing.client.android.CaptureActivity}: android.content.res.Resources$NotFoundException: File res/xml/preferences.xml from 
drawable resource ID #0x7f050000

05-24 02:17:24.037: E/AndroidRuntime(516):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)

05-24 02:17:24.037: E/AndroidRuntime(516):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)

05-24 02:17:24.037: E/AndroidRuntime(516):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)

05-24 02:17:24.037: E/AndroidRuntime(516):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)

05-24 02:17:24.037: E/AndroidRuntime(516):  at android.os.Handler.dispatchMessage(Handler.java:99)

05-24 02:17:24.037: E/AndroidRuntime(516):  at android.os.Looper.loop(Looper.java:123)

05-24 02:17:24.037: E/AndroidRuntime(516):  at android.app.ActivityThread.main(ActivityThread.java:4627)

05-24 02:17:24.037: E/AndroidRuntime(516):  at java.lang.reflect.Method.invokeNative(Native Method)

05-24 02:17:24.037: E/AndroidRuntime(516):  at java.lang.reflect.Method.invoke(Method.java:521)

05-24 02:17:24.037: E/AndroidRuntime(516):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)

05-24 02:17:24.037: E/AndroidRuntime(516):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)

05-24 02:17:24.037: E/AndroidRuntime(516):  at dalvik.system.NativeStart.main(Native Method)

05-24 02:17:24.037: E/AndroidRuntime(516): Caused by: android.content.res.Resources$NotFoundException: File res/xml/preferences.xml from drawable resource ID #0x7f050000

05-24 02:17:24.037: E/AndroidRuntime(516):  at android.content.res.Resources.openRawResourceFd(Resources.java:860)

05-24 02:17:24.037: E/AndroidRuntime(516):  at com.google.zxing.client.android.BeepManager.buildMediaPlayer(BeepManager.java:97)

05-24 02:17:24.037: E/AndroidRuntime(516):  at com.google.zxing.client.android.BeepManager.updatePrefs(BeepManager.java:60)

05-24 02:17:24.037: E/AndroidRuntime(516):  at com.google.zxing.client.android.BeepManager.<init>(BeepManager.java:49)

05-24 02:17:24.037: E/AndroidRuntime(516):  at com.google.zxing.client.android.CaptureActivity.onCreate(CaptureActivity.java:165)

05-24 02:17:24.037: E/AndroidRuntime(516):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)

05-24 02:17:24.037: E/AndroidRuntime(516):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)

05-24 02:17:24.037: E/AndroidRuntime(516):  ... 11 more

05-24 02:17:24.037: E/AndroidRuntime(516): Caused by: java.io.FileNotFoundException: This file can not be opened as a file descriptor; it is probably compressed

05-24 02:17:24.037: E/AndroidRuntime(516):  at android.content.res.AssetManager.openNonAssetFdNative(Native Method)

05-24 02:17:24.037: E/AndroidRuntime(516):  at android.content.res.AssetManager.openNonAssetFd(AssetManager.java:426)

05-24 02:17:24.037: E/AndroidRuntime(516):  at android.content.res.Resources.openRawResourceFd(Resources.java:857)

05-24 02:17:24.037: E/AndroidRuntime(516):  ... 17 more 
```

我无法检测到实际问题是什么。所以需要一些帮助来解决这个问题，以检测它出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:18:37.520

问题是您已将我们所有的`android/`代码复制并粘贴到您的项目中，并且并不真正了解您复制的内容。*强烈*建议不要以这种方式复制我们的应用程序。如果您是 Android 新手，那么尝试重用我们的代码可能太复杂了。

1.  删除您复制的所有代码`android/`和`core/`
2.  添加`android-integration/`
3.  根据[http://code.google.com/p/zxing/wiki/ScanningViaIntent使用 3 行代码实现条码扫描](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-16T15:27:09.923

同样的问题，通过此链接修复：

[michalu zxing条码](http://michalu.eu/wordpress/scanning-and-generating-barcodes-using-zxing-library-on-android/)

作为库，使用他的 zxing 库，您可以从页面底部的链接下载。这个对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:07:25.287

我在使用 Zxing 库时遇到了同样的问题，我通过这种技术解决了它

在清单文件中提供启动器活动的完整路径，例如“PacakageName.StartActivity”

# javascript - 你如何在 Javascript 中映射替换字符，类似于 Perl 中的 'tr' 函数？

> ID：10726638
> 
> 赞同：41
> 
> 时间：2012-05-23T19:33:53.417
> 
> 标签：javascript, perl, character-encoding, transliteration

我一直在试图弄清楚如何将字符串中的一组字符映射到另一个类似于`tr`Perl 中的函数的集合。

我发现[这个站点显示了 JS 和 Perl 中的等效函数](http://www.lemoda.net/perl/perl-js/perl-js.html)，但遗憾的是没有等效函数。

Perl 中的`tr`(transliteration) 函数将字符一对一映射，因此

```
 data =~ tr|\-_|+/|; 
```

会映射

```
 - => + and _ => / 
```

如何在 JavaScript 中有效地做到这一点？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-23T19:46:58.350

没有内置的等价物，但您可以通过以下方式接近[`replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)：

```
data = data.replace(/[\-_]/g, function (m) {
    return {
        '-': '+',
        '_': '/'
    }[m];
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-23T20:44:50.547

我不能保证“高效”，但这使用正则表达式和回调来提供替换字符。

```
function tr( text, search, replace ) {
    // Make the search string a regex.
    var regex = RegExp( '[' + search + ']', 'g' );
    var t = text.replace( regex, 
            function( chr ) {
                // Get the position of the found character in the search string.
                var ind = search.indexOf( chr );
                // Get the corresponding character from the replace string.
                var r = replace.charAt( ind );
                return r;
            } );
    return t;
} 
```

对于长字符串的搜索和替换字符，可能值得将它们放在哈希中并让函数从中返回。即 tr/abcd/QRST/ 变成哈希 { a: Q, b: R, c: S, d: T }，回调返回 hash[ chr ]。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-07T14:12:37.087

方法：

```
String.prototype.mapReplace = function(map) {
    var regex = [];
    for(var key in map)
        regex.push(key.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&"));
    return this.replace(new RegExp(regex.join('|'),"g"),function(word){
        return map[word];
    });
}; 
```

一个完美的例子：

```
var s = "I think Peak rocks!"
s.mapReplace({"I think":"Actually","rocks":"sucks"})
// console: "Actually Peak sucks!" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-06T01:34:51.733

这个函数，类似于它在 Perl 中的构建方式。

```
function s(a, b){ $_ = $_.replace(a, b); }
function tr(a, b){ [...a].map((c, i) => s(new RegExp(c, "g"), b[i])); }

$_ = "Εμπεδοκλης ο Ακραγαντινος";

tr("ΑΒΓΔΕΖΗΘΙΚΛΜΝΟΠΡΣΤΥΦΧΩ", "ABGDEZITIKLMNOPRSTIFHO");
tr("αβγδεζηθικλμνοπρστυφχω", "abgdezitiklmnoprstifho");
s(/Ξ/g, "X"); s(/Ψ/g, "Ps");
s(/ξ/g, "x"); s(/ψ/g, "Ps");
s(/ς/g, "s");

console.log($_);
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T19:36:51.880

`a`这会将所有s映射到`b`和所有`y`到`z`

```
var map = { a: 'b', y: 'z' };
var str = 'ayayay';

for (var i = 0; i < str.length; i++)
    str[i] = map[str[i]] || str[i]; 
```

编辑：

显然你不能用字符串来做到这一点。这是一个替代方案：

```
var map = { a: 'b', y: 'z' };
var str = 'ayayay', str2 = [];

for (var i = 0; i < str.length; i++)
    str2.push( map[str[i]] || str[i] );
str2.join(''); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-23T19:51:46.380

在 Perl 中，也可以写成

```
tr{-_}{+/} 
```

作为

```
my %trans = (
   '-' => '+',
   '_' => '/',
);

my $class = join '', map quotemeta, keys(%trans);
my $re = qr/[$class]/;

s/($re)/$trans{$1}/g; 
```

后一个版本肯定可以在 JS 中实现而不会有太多麻烦。

（我的版本缺少 Jonathan Lonowski 解决方案的重复。）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-24T22:22:46.600

我想要一个允许传递自定义地图对象的函数，所以我根据[Jonathan Lonowski](http://Jonathan%20Lonowski)的回答编写了一个函数。如果您尝试替换特殊字符（需要在正则表达式中转义的那种），您将不得不做更多的工作。

```
const mapReplace = (str, map) => {
  const matchStr = Object.keys(map).join('|');
  if (!matchStr) return str;
  const regexp = new RegExp(matchStr, 'g');
  return str.replace(regexp, match => map[match]);
}; 
```

它是这样使用的：

```
const map = { a: 'A', b: 'B', d: 'D' };
mapReplace('abcde_edcba', map);
// ABcDe_eDcBA 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-16T15:21:07.497

这是一个函数，它接收文本 orig dest 并在文本中替换 dest 中相应位置的每个字符。

对于必须仅用一个替换多个字符或反之亦然的情况，Is 不够好。从葡萄牙语文本中删除重音还不够好，这是我的用例。

```
function tr(text, orig, dest) {
    console.assert(orig.length == dest.length);
    const a = orig.split('').map(i=> new RegExp(i, 'g'));
    const b = dest.split('');
    return a.reduce((prev, curr, idx) => prev.replace(a[idx], b[idx]), text );
} 
```

如何使用它：

```
var port  = "ÀÂÃÁÉÊÍÓÔÕÜÚÇáàãâêéíóõôúüç";
var ascii = "AAAAEEIOOOUUCaaaaeeiooouuc";
console.log(tr("não têm ações em seqüência", port, ascii)) ; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-17T19:54:13.087

类似于 Jonathan Lonowski 的回答，但有文字支持，而不仅仅是单个 tr 字符

```
"aaabbccddeeDDDffd".replace( /(a|cc|DDD|dd)/g, m => ({'a':'B', 'cc':'DDD', 'DDD':'ZZZ', dd:'QQ'}[m]) ) 
// RESULT: "BBBbbDDDQQeeZZZffd" 
```

# jpa - 在 eclipselink 中启用静态编织

> ID：10726641
> 
> 赞同：4
> 
> 时间：2012-05-23T19:34:04.273
> 
> 标签：jpa, eclipselink, rcp

当我运行使用 jpa 的 rcp 应用程序时，我收到以下警告消息：

```
[EL Info]: 2012-05-23 22:29:26.841--ServerSession(20341825)--EclipseLink, version: Eclipse Persistence Services - 2.3.2.v20111125-r10461
[EL Warning]: 2012-05-23 22:29:27.338--ServerSession(20341825)--Reverting the lazy setting on the OneToOne or ManyToOne attribute [infoid] for the entity class [class org.company.management.entity.Employee] since weaving was not enabled or did not occur.
[EL Warning]: 2012-05-23 22:29:27.339--ServerSession(20341825)--Reverting the lazy setting on the OneToOne or ManyToOne attribute [groupid] for the entity class [class org.company.management.entity.Employee] since weaving was not enabled or did not occur.
[EL Warning]: 2012-05-23 22:29:27.339--ServerSession(20341825)--Reverting the lazy setting on the OneToOne or ManyToOne attribute [employeeSchedule] for the entity class [class org.company.management.entity.Employee] since weaving was not enabled or did not occur.
[EL Warning]: 2012-05-23 22:29:27.34--ServerSession(20341825)--Reverting the lazy setting on the OneToOne or ManyToOne attribute [employeescheduleid] for the entity class [class org.company.management.entity.EmployeeScheduleInfo] since weaving was not enabled or did not occur.
[EL Warning]: 2012-05-23 22:29:27.34--ServerSession(20341825)--Reverting the lazy setting on the OneToOne or ManyToOne attribute [scheduleid] for the entity class [class org.company.management.entity.EmployeeSchedule] since weaving was not enabled or did not occur.
[EL Warning]: 2012-05-23 22:29:27.34--ServerSession(20341825)--Reverting the lazy setting on the OneToOne or ManyToOne attribute [employeeid] for the entity class [class org.company.management.entity.EmployeeSchedule] since weaving was not enabled or did not occur.
[EL Warning]: 2012-05-23 22:29:27.341--ServerSession(20341825)--Reverting the lazy setting on the OneToOne or ManyToOne attribute [employee] for the entity class [class org.company.management.entity.EmployeeInfo] since weaving was not enabled or did not occur.
[EL Info]: 2012-05-23 22:29:27.556--ServerSession(20341825)--bundleresource://29.fwk31583837:2_Management login successful 
```

我想启用延迟加载。

我的 persistence.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="Management" transaction-type="RESOURCE_LOCAL">
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
<class>org.company.management.entity.EmployeeGroup</class>
<class>org.company.management.entity.Company</class>
<class>org.company.management.entity.Employee</class>
<class>org.company.management.entity.Schedule</class>
<class>org.company.management.entity.EmployeeInfo</class>
<class>org.company.management.entity.EmployeeSchedule</class>
<class>org.company.management.entity.EmployeeScheduleInfo</class>

<properties>
  <property name="javax.persistence.jdbc.url" value="jdbc:derby:.cafedb;create=true"/>
  <property name="javax.persistence.jdbc.password" value="vodbomb"/>
  <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver"/>
  <property name="javax.persistence.jdbc.user" value="root"/>

  <property name="eclipselink.ddl-generation" value="create-tables" />
</properties>
</persistence-unit>
</persistence> 
```

我有一个构建脚本“build.xml”来进行静态编织：

```
<project name="Management" basedir=".">
<target name="define.task" description="New task definition for toplink static weaving">
<taskdef name="weave" classname="org.eclipse.persistence.tools.weaving.jpa.StaticWeaveAntTask">
</taskdef>
</target>    
<target name="weaving" description="perform weaving" depends="define.task"
<weave  source="${basedir}/src/org/company/management/entity"
                target="${basedir}/src/org/company/management/entity/woven.jar"
                persistenceinfo="${basedir}/META-INF/persistence.xml">     
</weave>
</target>
</project> 
```

当我运行 ant 脚本“build.xml”时，我遇到了这个错误：

```
Buildfile: C:\Users\J\workspace\org.company.management\build.xml
define.task:
weaving:

BUILD FAILED
C:\Users\J\workspace\org.company.management\build.xml:13: Exception [EclipseLink-40007]     (Eclipse Persistence Services - 2.3.2.v20111125-r10461):     org.eclipse.persistence.exceptions.StaticWeaveException
Exception Description: An exception was thrown while weaving:     C:\Users\J\workspace\org.company.management\src\org\company\management\entity
Internal Exception: Exception [EclipseLink-40001] (Eclipse Persistence Services -     2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.StaticWeaveException
Exception Description: An exception was thrown while trying to open an archive from     URL: file:/C:/Users/J/workspace/org.company.management/META-INF/persistence.xml 
Internal Exception: java.util.zip.ZipException: error in opening zip file

Total time: 242 milliseconds 
```

如何启用静态编织？？？我一团糟

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:47:41.277

[如何在 Netbeans 中使用 Eclipse-Link JPA 应用静态编织 Ant 任务？](https://stackoverflow.com/questions/10431819/how-to-apply-static-weaving-ant-task-with-eclipse-link-jpa-in-netbeans)

结合问题和答案，您将获得有效的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:35:52.330

我认为您的问题是源应该是 jar，而不是目录。尝试给它一个已编译类的 jar。

看，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Performance/Weaving/Static_Weaving](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Performance/Weaving/Static_Weaving)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T18:03:34.550

**[使用DALI SETTINGS](http://www.eclipse.org/webtools/dali/docs/3.2/user_guide/whats_new002.htm)**在 Eclipse 中打开它。请注意，我必须打开 Projects->Build Automatically 设置，否则它会不断重建文件！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T14:38:46.750

您在persistance.xml 中缺少静态编织声明：

```
<properties>
    ...
    <property name="eclipselink.weaving" value="static"/>
    ...
</properties> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-12T14:42:49.273

您需要在 persistence.xml 中拥有该属性

```
<property name="eclipselink.weaving" value="static"/> 
```

如果您愿意，可以使用展开的目录结构而不是 jar 文件。

当persistenceinfo位置中有空格时我遇到了问题，所以我在编织它们之前将我的persistence.xml文件移动到要编织的类文件的位置。

# sql-server - 如何查找全文目录的名称

> ID：10726644
> 
> 赞同：1
> 
> 时间：2012-05-23T19:34:25.057
> 
> 标签：sql-server, sql-server-2005

我使用 SQL Server 2005，我有一个使用全文目录的数据库。

我需要删除全文目录，但我不知道它的名称，所以我想知道如何找到它的名称。

任何想法谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:38:57.303

试试这个：

```
USE [YourDbName]

select * from sys.fulltext_catalogs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:45:50.567

你需要`sys.fulltext_catalogs`像这样查询

```
select name,is_default from sys.fulltext_catalogs 
```

默认一个将有`is_default = 1`

有关更多信息，请参见此处[http://msdn.microsoft.com/en-us/library/ms188779.aspx](http://msdn.microsoft.com/en-us/library/ms188779.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T19:45:12.953

我喜欢这篇文章的解决方案：

```
select * from sysfulltextcatalogs 
```

为我工作 MS SQL 2000 和 2005

[http://social.msdn.microsoft.com/Forums/en-US/sqldatabaseengine/thread/83b66b90-2b67-4c81-8b7e-3fda500fbb57](http://social.msdn.microsoft.com/Forums/en-US/sqldatabaseengine/thread/83b66b90-2b67-4c81-8b7e-3fda500fbb57)

# c++ - _tcsncpy_s() 覆盖旧内容？

> ID：10726646
> 
> 赞同：2
> 
> 时间：2012-05-23T19:34:28.687
> 
> 标签：c++, strcpy

是否在字符串上多次使用 _tcsncpy_s() 会覆盖旧内容？还是它创建新内容然后指向新内容？作为一个简单的例子，如果我有：

```
 LPTSTR myString = new TCHAR[MAX_PATH];
    LPTSTR copiedString1 = "Hello";
    LPTSTR copiedString2 = "Rock";
    _tcsncpy_s(myString,MAX_PATH,copiedString1,5); //1
    //delete [] myString; //3
    //LPTSTR myString = new TCHAR[MAX_PATH]; //3
    _tcsncpy_s(myString,MAX_PATH,copiedString2,4); //2 
```

我在 1 处理解：我们有 myString --> 'H' 'e' 'l' 'l' 'o'

但是在第 2 点： 'R' 'o' 'c' 'k' 是否被复制到 'H' 'e' 'l' 'l' 上，而 'o' 仍然存在？还是它现在指向内存中的一个新区域？我需要像 3 那样删除并重新创建 myString 吗？如果我先复制了String2，然后复制了String1，该怎么办？会发生什么不同的事情吗？还有什么可能有用的知道吗？

感谢您的宝贵时间，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:54:10.310

> 但是在第 2 点： 'R' 'o' 'c' 'k' 是否被复制到 'H' 'e' 'l' 'l' 上，而 'o' 仍然存在？

是的。阅读[文档](http://msdn.microsoft.com/en-us/library/5dae5d43%28v=vs.80%29.aspx)：

> 这些函数尝试将 strSource 的前 D 个字符复制到 strDest，其中 D 是 count 和 strSource 长度中的较小者。如果这些 D 字符将适合 strDest（其大小以 numberOfElements 给出）并且仍然为空终止符留出空间，则复制这些字符并附加终止空；否则，将 strDest[0] 设置为空字符并调用无效参数处理程序，如参数验证中所述。

现在，对于您的其他问题：

> 还是它现在指向内存中的一个新区域？

不，`mystring`is 仍然是指同一个数组。

> 我需要像 3 那样删除并重新创建 myString 吗？

也许。取决于你想做什么。如果您想要两个字符串的副本，那么是的，您将需要两个字符数组（静态或动态）。

> 如果我先复制了String2，然后复制了String1，该怎么办？

在这种情况下，你会得到`Rock`你的字符串。

> 会发生什么不同的事情吗？

操作后出现不同的字符串`mystring`，所以是的。

> 还有什么可能有用的知道吗？

你想连接这两个字符串吗？如果是这样，请使用连接函数，例如`strcat`. 另外，请注意以下划线开头的函数是非标准的、供应商特定的函数，因此不可能完全移植。尝试使用标准定义的函数（例如`strncpy`、`strcat`等`strncat`）。

MS 世界中的`_t`前缀函数通常是根据您的项目设置切换到相应函数的适当 ASCII/Unicode 版本的宏（即是否定义了`UNICODE`/`_UNICODE`预处理器宏）。

最后，字符串复制和连接`n`之间的变化从源中读取最多`n`字符。这种设计允许程序员编写安全代码（从而[防止缓冲区溢出](https://buildsecurityin.us-cert.gov/bsi/articles/knowledge/coding/316-BSI.html)）。

哦，在我们忘记之前，如果您使用的是 C++，您应该忘记所有关于 C 风格的字符串操作，并简单地切换到更简洁、更易于使用`std::string`（或`std::wstring`视情况而定）。字符串复制通过简单的赋值（即`=`足够）发生，并且连接同样是惯用的（即`+=`足够）。有关更多信息，请查看[文档](http://www.sgi.com/tech/stl/basic_string.html)。

# java - GlassFish 扩展通用类加载器使用的 JAR

> ID：10726648
> 
> 赞同：2
> 
> 时间：2012-05-23T19:34:50.257
> 
> 标签：java, jakarta-ee, glassfish, classloader

我正在将几个应用程序从 JBoss 4 迁移到 GlassFish 3.1.x。这些应用程序中的每一个都使用相同的 API，该 API 提供了每个应用程序使用的公共类和接口。让我们称之为`CoreAPI.jar`。

`CoreAPI.jar`放到`<domain>/lib`GlassFish的目录下，由通用类加载器加载。

现在假设每个应用程序都从 CoreAPI 扩展了一个类（不是抽象的），称为`Version`：

```
public class Version {
    public String getVersion() { return null; }
} 
```

该方法`getVersion()`在 API 本身的多个位置调用，每个使用 API 的应用程序负责扩展类并提供如下版本：

```
public class MyAppVersion extends Version {
    private static final String VERSION = "1.0";

    @Override
    public String getVersion() { return VERSION; }
} 
```

当我将应用程序部署到捆绑在 WAR 或 EAR 中的 GlassFish 时，无论何时`getVersion()`从父类调用 API，我都会得到一个`java.lang.NullPointerException`- 它似乎找不到子类。

`CoreAPI.jar`如果与 WAR 捆绑在一起并从目录中删除，则可以正确找到子类`<domain>/lib`，但我不能这样做，因为许多应用程序需要它作为共享库。

有没有办法让共享库“看到”已部署应用程序中的子类？

谢谢！

**澄清：** 我无权更改 CoreAPI

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T22:46:03.537

> 有没有办法让共享库“看到”已部署应用程序中的子类？

不可以。应用程序类加载器是普通类加载器的后代，类加载器只能看到它们的父类，而不能看到它们的依赖项。

这通常是在公共类尝试`Class.forName("com.app.ImplementationClass")`在实际位于公共库中的代码中执行类似操作时发现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T22:18:33.430

为了在所有应用程序之间共享库，您应该使用该`$GLASSFISH_HOME/glassfish/lib`文件夹。当您通过更新工具将附加组件安装到 GlassFish 时，您甚至可能会注意到它会将第三方 jars 复制到此文件夹，以便所有应用程序都可以使用它。

要共享域下的所有应用程序，您可以将其放入`$GLASSFISH_HOME/glassfish/domains/your-domain/lib`文件夹中，就像您所做的那样。

为了测试您所描述的内容，我创建了 2 个 Maven 项目：

*   一个名为 version 的 java 项目（CoreAPI 的模拟）
*   一个名为 web-version 的 web 项目（将扩展 CoreAPI 的人）

java项目包含你的非抽象CoreAPI类：

```
package com.acme.version;

public class Version
{
    public String getVersion() { return null; }
} 
```

在 web 版本的项目中，我添加了一个提供的范围依赖项，`version-1.0.jar`因此它可以被编译，但是一旦它出现在 Glassfish /lib 文件夹中，它就不会被添加到项目中。

然后 web-version 项目具有`Version`我用于测试的类的扩展版本：

```
package com.acme.web.controller;

import com.acme.version.Version;

public class ExtendedVersion extends Version
{
    private static final String VERSION = "1.0";

    @Override
    public String getVersion ()
    {
        return VERSION;
    }

    @Override
    public String toString()
    {
        return getVersion();
    }
} 
```

然后我这样做了：

*   构建版本项目并将生成的 jar 复制到上述`$GLASSFISH_HOME/glassfish/lib` 文件夹中。

*   创建了一个包含`ExtendedVersion`实例的控制器并部署了应用程序。它`1.0`在网页中输出。

> 有没有办法让共享库“看到”已部署应用程序中的子类？

好吧，这有点奇怪，因为正在加载共享库。似乎由于某种原因您的子类不是。（日志中是否还有其他相关异常？）

我认为根据您的描述，这个问题甚至可能与您在 JBoss x GlassFish 转换中的其他依赖关系有关，而不是与您的子类化或类加载方法有关。

# java - 如何在 BitSet 缓冲区的开头添加一个位？

> ID：10726650
> 
> 赞同：4
> 
> 时间：2012-05-23T19:34:54.290
> 
> 标签：java, bitset

我正在使用一个 BitSet 缓冲区，其中我有大约 500 位，我想在缓冲区的开头添加大约 10 位，我的意思是在索引 0 处，所以应该移动缓冲区的其余部分，但我看不到“ add" 有点只写方法，所以如果我已经有一点，它将被替换，不添加。有什么方法可以做到这一点，或者我必须将所有内容复制到一个临时 BitSet，添加我的 10 位，然后添加我的 500 位？

谢谢 ：）

PD：对不起，我的英语不好也请不要更正:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T19:38:04.883

没有复制就无法在前面插入位。

也许你可以颠倒你的位的顺序`BitSet`？如果你这样做了，那意味着你现在将位附加到集合的末尾，这*可以*很便宜地完成。

或者，您可以封装 a `Deque`of `BitSet`s。然后在前面插入位可以通过在前面插入一个新`BitSet`的来完成`Deque`。

# magento - Magento 块重写不起作用

> ID：10726652
> 
> 赞同：0
> 
> 时间：2012-05-23T19:35:11.920
> 
> 标签：magento, rewrite, block

我只是想用另一个在同一位置创建的社区扩展块重写。

我想扩展块： **Belvg_Stores_Block_Front**

使用： **Belvg_Stores_Block_StoreLocator**

类头代码：

```
class Belvg_Stores_Block_StoreLocator extends Belvg_Stores_Block_Front 
```

Config.xml 代码（我添加了重写部分）：

```
<blocks>
    <stores>
    <class>Belvg_Stores_Block</class>
</stores>
<rewrite>
    <stores_front>
    Belvg_Stores_Block_StoreLocator
    </stores_front>
    </rewrite>
</blocks> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:41:34.077

你很近。尝试这个;

```
<blocks>
    <stores>
        <class>Belvg_Stores_Block</class>
        <rewrite>
            <front>Belvg_Stores_Block_StoreLocator</front>
        </rewrite>
    </stores>
</blocks> 
```

# java - 默认情况下，JSF 会生成不可用的 ID，这些 ID 与 Web 标准的 CSS 部分不兼容

> ID：10726653
> 
> 赞同：10
> 
> 时间：2012-05-23T19:35:14.727
> 
> 标签：java, html, jsf, web-standards

活跃的 JSF（或 Primefaces）用户能否解释为什么默认情况下会发生这种情况，为什么没有人对此做任何事情：

```
<p:commandLink id="baz" update=":foo:boop" value="Example" /> 
```

这会生成无法在没有 hack 的情况下在 JavaScript 或 CSS 中使用的标记，通常应被视为无效：

```
<a href="javascript:void(0);" id=":foo:bar:baz">Example</a> 
```

这里的`id=":bar:baz:foo"`属性包含冒号，至少从 CSS 角度来看，这不是该属性的有效字符。

虽然根据规范该属性可能是有效的，但它无法与现实世界的 JavaScript 和 CSS 实现一起使用。

简而言之，`id`JSF 中的默认属性生成不适用于前端开发。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-23T19:44:49.583

之所以`:`选择 ，是因为这是唯一可以保证最终用户不会在 JSF 组件 ID 中意外使用它的合理分隔符（已[验证](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#setId%28java.lang.String%29)）**，并且**可以通过使用`\`.

请注意，[HTML4 规范](http://www.w3.org/TR/html4/types.html#h-6.2)说冒号是和属性中的**有效值。**因此，您对它与“网络标准”不兼容的抱怨毫无用处。`id``name`

> **ID**和**NAME**标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

唯一的问题是，这`:`是 CSS 选择器中的一个特殊字符，需要转义。JS 本身对冒号没有任何问题。`document.getElementById("foo:bar")`作品非常好。唯一可能的问题是在 jQuery 中，因为它使用 CSS 选择器语法。

如果你真的需要，那么你总是可以`:`通过将`javax.faces.SEPARATOR_CHAR`上下文参数设置为 eg`-`或`_`如下来更改默认分隔符。您只需要保证您自己不会在 JSF 组件 ID 中的任何地方使用该字符*（*它尚未经过验证！）。

```
<context-param>
    <param-name>javax.faces.SEPARATOR_CHAR</param-name>
    <param-value>-</param-value>
</context-param> 
```

顺便说一句，它在`_`JSF 自动生成的 ID（*如* 否则 JSF 将在查找命名容器子项时遇到问题。`j_id1` *[`NamingContainer`](http://docs.oracle.com/javaee/6/api/javax/faces/component/NamingContainer.html)*

 *我只是不推荐它。从长远来看，它是令人困惑和脆弱的。再想一想，普通 JSF webapp 中的独特元素本身通常已经不在表单或表格中。它们通常只代表主要的布局方面。我想说，从一般的 HTML/CSS 角度来看，这是一个糟糕的设计。只需通过可重用的 CSS 类名而不是 ID 来选择它们。如果您真的需要，您可以始终将其包装在纯 HTML 中`<div>`，或者`<span>`JSF 不会预先添加其 ID。

### 也可以看看：

*   [HTML 中 id 属性的有效值是什么？](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)
*   [是否可以更改 JSF 中的元素 id 分隔符？](https://stackoverflow.com/questions/2142929/is-it-possible-to-change-the-element-id-separator-in-jsf)
*   [如何使用 jQuery 选择 JSF 组件？](https://stackoverflow.com/questions/7927716/how-to-select-primefaces-ui-or-jsf-components-using-jquery)
*   [如何在 CSS 选择器中使用带有冒号“：”的 JSF 生成的 HTML 元素 ID？](https://stackoverflow.com/questions/5878692/how-to-use-jsf-generated-html-element-id-in-css-selectors)
*   [将 JavaScript 集成到 JSF 复合组件中，干净的方式](https://stackoverflow.com/questions/12615556/integrate-javascript-in-jsf-composite-component-the-clean-way)*

# jquery - JQuery：两个功能缩放和交换，但缩放保留原始图像

> ID：10726655
> 
> 赞同：0
> 
> 时间：2012-05-23T19:35:18.910
> 
> 标签：jquery, html

我有两个 Jquery 函数，一个显示图像的缩放/细节，另外两个显示缩略图中的多个图像。它们都起作用，直到您交换图像，然后显示新图像但旧图像仍在缩放功能中。我想我还需要更新新的缩放功能，但我不知道该怎么做。你如何强制重新加载或刷新功能？

```
<script type="text/javascript">
    jQuery(document).ready(function($){
    $('#image').addimagezoom() 
        magnifiersize: [300,300] 
    });

    jQuery(document).ready(function($){
    $("li.tmb-all a").click(function() {
        var mainImage = $(this).attr("href"); //Find Image Name
        $("#image").attr('src', mainImage);
        return false;       
    });
    })

</script> 
```

相关HTML：

```
<div id="main_image">
  <img alt="available in 10 colors" id="image" itemprop="image" src="/products/440/large/custom-woven-1.jpg" width="400" />
</div>
    </div>
      <!-- no need for thumnails unless there is more then one image -->
<ul id="product-thumbnails" class="thumbnails" data-hook>
  <li class="tmb-all" id="tmb-440"><a href="/spree/products/440/large/custom-woven-1.jpg"><img alt="Custom-woven-wristbands-1" src="/products/440/mini/custom-woven-1.jpg" /></a></li>
  <li class="tmb-all" id="tmb-442"><a href="/spree/products/442/large/custom-woven-2.jpg"><img alt="Custom-woven-wristbands-2" src="/products/442/mini/custom-woven-2.jpg" /></a></li>
  <li class="tmb-all" id="tmb-439"><a href="/spree/products/439/large/custom-woven-3.JPG"><img alt="Custom-woven-wristbands-3" src="/products/439/mini/custom-woven-3.JPG" /></a></li>
  <li class="tmb-all" id="tmb-441"><a href="/spree/products/441/large/custom-woven-4.jpg"><img alt="Custom-woven-wristbands-4" src="/products/441/mini/custom-woven-4.jpg" /></a></li>
</ul>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:10:52.137

您可以尝试在点击中添加放大代码：

```
$('#image').addimagezoom() 
    magnifiersize: [300,300] 
});

$("li.tmb-all a").click(function() {
    var mainImage = $(this).attr("href"); //Find Image Name
    $("#image").attr('src', mainImage);
    $('#image').addimagezoom() 
      magnifiersize: [300,300] 
    });
    return false;       
}); 
```

插件通常也有一种自我毁灭的方法，如果它这样做了，你也许可以做一些事情，比如`$('#image').destroy().addimagezoom() magnifiersize: [300,300] });` 假设它实际上支持它（查看文档）。

# html - 如何克制每一个 评论框中的元素？

> ID：10726656
> 
> 赞同：0
> 
> 时间：2012-05-23T19:35:22.230
> 
> 标签：html, css

这是我的评论列表的 html 代码：

```
<div id='commentbox'>
    <ul id='holder'>        
        <li class='comment'><span class='commenter'>commenter1: </span>
            <span class='commsg'>blabla1</span>
        </li>    
        <li class='comment'><span class='commenter'>commenter2: </span>
            <span class='commsg'>blabla2</span>
        </li>
        <li class='comment'><span class='commenter'>commenter3: </span>
            <span class='commsg'>blablaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa3</span>
        </li>
        <li class='comment'><span class='commenter'>commenter4: </span>
            <span class='commsg'>blabla4</span>
        </li>    
    </ul>
</div> 
```

这是CSS：

```
.comment{
    border-style:solid;
    width:500px;
}
.commsg{
    font-size: 12px;
    color: #333333;
    font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
}
.commenter{
    font-family: 'Gill Sans', Verdana;
    font-size: 11px;
    line-height: 14px;
    text-transform: capitalize;
    letter-spacing: 1px;
    font-weight: bold;
} 
```

我的问题是，如果我插入像第三条这样的大评论，它就会超出`<li>`边界。我怎样才能有一定的评论宽度？

问题解决了。谢谢你们俩。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:39:06.693

要使没有任何空格的长文本转到下一行，您必须将以下样式添加到您的评论容器中：

```
word-wrap: word-break; 
```

这将自动打破对元素来说太大的单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:45:22.577

在 Firefox 中，您当前的标记和样式应该可以正常工作。问题是，您的测试评论中没有空格，因此它被视为一个单词。浏览器不够智能，无法像文字处理器那样用破折号分解单词。

看看这个[小提琴](http://jsfiddle.net/BGEz9/)。注意巨大的评论。它包裹得很好，并保持`<li>`原样。

现在看看这个[小提琴](http://jsfiddle.net/BGEz9/1/)。看看当单词中没有空格时，它是如何重叠的。浏览器不知道还能用它做什么。

一种解决方法是滚动`.comment`元素的溢出：

```
overflow-x:scroll; 
```

见[小提琴](http://jsfiddle.net/BGEz9/3/)。缺点是每个元素上的滚动条，看起来不太好，但如果有一个没有空格的大单词（例如超链接等），至少可以完成工作。

# android - NPE 使用 AQuery 处理 JSON AsynchTask

> ID：10726658
> 
> 赞同：1
> 
> 时间：2012-05-23T19:35:34.720
> 
> 标签：android, json, android-asynctask

我是第一次使用[Android-Query](http://code.google.com/p/android-query/)，我知道它（为您处理异步任务？）并简化/减少了代码编写。如果我对异步任务有误，请纠正我。

另外，如果我错了，请帮我写下面的方法，以便在另一个线程上；无论我怎么做，我都无法让它工作。

我得到以下 NPE：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.andaero.app/com.andaero.app.MainActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
at android.app.ActivityThread.access$600(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)at dalvik.system.NativeStart.main(Native Method)
--->Caused by: java.lang.NullPointerException
at com.andaero.app.utili.AsyncJSON.async_list_array(AsyncJSON.java:24)
at com.andaero.app.MainActivity.onCreate(MainActivity.java:84)
at android.app.Activity.performCreate(Activity.java:4465)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

在我的 MainActivity 中：

```
import com.androidquery.AQuery;
import com.androidquery.callback.AjaxCallback;
import com.androidquery.callback.AjaxStatus;
 ...
 AQuery aq;
 String json = null;

public class MainActivity extends Activity implements AnimationLayout.Listener
{
 @Override
 public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ...
        AsyncJSON.async_list_array();
    }
} 
```

我的 AsyncJSON 类：

```
 public class AsyncJSON
 {
    static AQuery aq = null;
    static JSONArray jArray;
    String json = null;

public static void async_list_array()
{

String url = "http://192.168.1.34/Andaero/php/regulatory_list.php";
aq.ajax(url, JSONArray.class, new AjaxCallback<JSONArray>()
{

    @Override
    public void callback(String url, JSONArray json, AjaxStatus status)
    {

    if (json != null)
    {

    // successful ajax call, show status code, json content
    //jsonListCallback(json);
    Toast.makeText(aq.getContext(), status.getCode() + ":" + json.toString(), Toast.LENGTH_LONG).show();

    } else
    {

    // ajax error, show error code
    Toast.makeText(aq.getContext(), "Error:" + status.getCode(), Toast.LENGTH_LONG).show();
    }
    }
});
} 
```

我直接从他们的示例中获取了这段代码，但我看不出我有什么问题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:20:24.710

看起来你从未初始化过`aq`，所以它是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T06:16:59.100

在主要活动中

```
aq=new AQuery(this);
AsyncJSON.async_list_array(aq); 
```

在 AsyncJson 类中

```
static AQuery maq;
public static void async_list_array(AQuery aq)
{
    maq=aq;
    String url="http://192.168.1.34/Andaero/php/regulatory_list.php";

    maq.ajax(url, JSONArray.class, new AjaxCallback<JSONArray>(){
        @Override
        public void callback(String url,JSONArray json,AjaxStatus status)
        {
            if(json!=null)
            {
                Toast.makeText(maq.getContext(), status.getCode()+":"+json.toString(), Toast.LENGTH_LONG).show();
            }
            else
            {
                Toast.makeText(maq.getContext(), "Error:"+status.getMessage(), Toast.LENGTH_LONG).show();
            }
        }
    });

} 
```

在您的清单文件中添加 Internet 权限。

还要检查网络连接。

# php - 在php中显示错误消息

> ID：10726659
> 
> 赞同：0
> 
> 时间：2012-05-23T19:35:40.253
> 
> 标签：php

想要显示错误消息作为表单操作的结果。例如

```
<form action=a.php
      input .....
</form>
<span.....>
<?php 
    $variable(Initially the value of this variable null according to the result of form value will change)
?>
</span> 
```

对于特定条件，我想在 a.php 页面中设置 $variable 的值并使用`header();`. 但`$variable`不改变。如何从 a.php 更改 $variable ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:38:22.277

PHP 变量不是持久的，当您将浏览器重定向到另一个位置时，脚本的执行将终止，您会丢失所有变量及其值。阅读PHP 文档中的[会话处理](http://bg.php.net/manual/en/book.session.php)，了解在请求之间存储持久数据的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:40:30.533

这个问题不是很清楚，但听起来你需要这个：

```
if(isset($variable) AND $variable != '') echo "<span>$variable</span>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T20:02:28.090

使用会话变量。

在每个文件的头部放置 `session_start();`

在此之后，您分配您需要跨文档访问的变量，如下所示：`$_SESSION['variable'];`

在使用 header() 之前定义会话变量；然后插入类似的东西：

`if (isset($_SESSION['variable'])){ print $_SESSION['variable']; unset($_SESSION['variable']); }`

# forms - 用 pdftk 填写后保持 pdf 表单可编辑

> ID：10726664
> 
> 赞同：4
> 
> 时间：2012-05-23T19:36:05.930
> 
> 标签：forms, pdf, pdftk

我正在使用 pdftk 填写表单，但输出表单不可编辑，当我在 acrobat 阅读器上打开它时，我收到一条错误消息：“此文档在 Adob​​e Reader 中启用了扩展功能，该文档已更改，因为它已创建，并且无法再使用扩展功能。”

是否可以保持文档可编辑？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T09:33:53.130

不可以。AFAIK 要在 Adob​​e Reader 中编辑 PDF，必须由 Adob​​e Acrobat 进行数字签名。显然，使用 pdftk 操作 PDF 会更改 PDF，因此签名不再有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-15T10:33:43.237

要摆脱 Adob​​e 数字签名，只需从 PDF 中“提取”签名即可。

```
pdftk signed.pdf cat output notsigned.pdf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T01:07:08.280

我有一个 pdf 文档，无论我在添加表单数据时是否使用“flatten”命令，都会生成此错误。

我将 pdf 文档加载到 Adob​​e Acrobat（版本 9，不知道是否相关）并选择 File | 保存副本。有了新副本，我可以使用 pdftk 添加表单字段而不会出现错误。

使用 flatten 会产生文本。没有展平，我在 Adob​​e Reader 中获得了一个可编辑的表单，其中填充了数据。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-27T14:51:55.450

删除`flatten`将使表单可编辑。

`flatten`只能给出一个输入 PDF，它只会使输出 pdf 文件变平，使其无法编辑。

句法 ：

对于可编辑的 pdf 作为输出 - `"passthru("<dir> $pdf_fill $fdf output - "); "`

随着展平 -`passthru("<dir> $pdf_fill $fdf output - flatten ");`

# ruby-on-rails - 如何在嵌套路由中使用 Friendly_id 中的 slug？

> ID：10726665
> 
> 赞同：2
> 
> 时间：2012-05-23T19:36:11.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-routes, friendly-id

在编辑和创建时，我很难在嵌套路线中制作来自 Friendly_id 的 slug？这些路线看起来很适合表演。

```
http://0.0.0.0:3000/test/tester2 
```

这是我尝试编辑 tester2 时得到的 URL：

```
http://0.0.0.0:3000/2/tester2/edit 
```

我想看到的是：

```
http://0.0.0.0:3000/test/tester2/edit 
```

这是我的代码。

团队.rb

```
class Team < ActiveRecord::Base
  extend FriendlyId
  friendly_id :name, use: :slugged
  has_many :videos
  ...
end 
```

视频.rb

```
class Video < ActiveRecord::Base
  extend FriendlyId
  friendly_id :title, use: :slugged
  belongs_to :team
  ...
end 
```

路线.rb

```
...
resources :teams, :path => '', :except => [:index] do 
  resources :videos, :path => '', :except => [:index] do
    get 'full_res_download'
    get 'web_download'
  end
end
... 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T14:20:00.680

我认为如果您使用它作为您的 url 助手，它会起作用：

```
edit_team_video_path(@video.team, @video) 
```

如果你明确地给它 id，那就是它会使用的东西。

# objective-c - xcode中的EXC_BAD_ACCESS试图从另一个类调用方法

> ID：10726669
> 
> 赞同：1
> 
> 时间：2012-05-23T19:36:29.737
> 
> 标签：objective-c, xcode, cocos2d-iphone

嗨，我在代码中遇到了 EXC_BAD_ACCESS，

我正在尝试在类 PurchaseTowerMenuLayer 中运行一个方法，方法来自 UnitDatabase 类：

PurchaseTowerMenuLayer.m:

```
delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
// getUnitDatabase returns UnitDatabase class from GameScene class

[[[delegate getGameScene] getUnitDatabase] createUnit:@"t01"]; //EXC_BAD_ACCESS happens here 
```

单位数据库.m：

```
-(void)createUnit:(NSString *)unitID
{

typeString = [unitID substringWithRange:NSMakeRange(0,1)];
numberString = [unitID substringWithRange:NSMakeRange(1,2)];

Unit *unit;

if(unitID == @"t00")
    [unit setUnitID:unitID];

etc...
} 
```

我在做什么来得到这个错误？它应该是什么样子？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:17:01.063

好的，首先将调用分开`[[[delegate getGameScene] getUnitDatabase] createUnit:@"t01"];`三行，例如

```
GameScene* scene = [delegate getGameScene];
UnitDatabase* unitDatabase = [scene getUnitDatabase];
[unitDatabase createUnit:@"t01"]; 
```

这将允许您查明哪个调用发出了`EXC_BAD_ACCESS`，如果您愿意，您可以在之后将它们折叠回来。

在您确定哪一行发出错误之后，通常需要找到您没有调用的地方`[[MyClass alloc] init];`。例如，如果`getGameScene`或`getUnitDatabase`返回不是`alloc`'d/ `init`'d 的对象（或者`delegate`同样如此），那么您要确保至少在返回它们之前这样做。

如果没有看到更多代码，我就无能为力了，但是这些错误通常是这样的。确保分配并初始化作为其他对象成员保留的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:57:23.180

看起来你还没有分配或初始化`unit`。尝试更改`Unit *unit;`为：

`Unit *unit = [[Unit alloc] init];`

添加，当然，如果您不使用 ARC，请确保释放/自动释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T20:05:33.183

此外，作为将来的参考，每当您遇到类似尝试的情况时，请尝试找出导致错误的特定代码行。在这种情况下，我很确定这不是你`PurchaseTowerMenuLayer.m`的问题 - 它是方法内部的东西`createUnit`。即使这样也可能不够准确——它可能是十级深度的系统调用。在寻求帮助之前，您应该尝试确定类似的事情 - 在许多情况下，它会帮助您自己找到答案。而且更早。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T21:11:51.397

编辑您的方案并启用 NSZombie 以获得更明确的错误

# android - 显示 1920x1080 内容的 Android 浏览器

> ID：10726673
> 
> 赞同：1
> 
> 时间：2012-05-23T19:36:48.520
> 
> 标签：android

我已经构建了浏览器应用程序并尝试显示 1920x1080 网页。我正在使用 ICS 4.0.3 和外部 1080p 屏幕，但 android 本身似乎无法使用超过 1280x800 的分辨率，即使它在显示设置中将分辨率声明为 1080p。这是一个常见问题吗？有支持 1080p 输出的安卓 ICS 版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:45:35.107

[ASUS Transformer Pad Infinity](http://eee.asus.com/eeepad/transformer-infinity/features/)和[Acer A700](http://www.engadget.com/2012/01/08/acer-iconia-tab-a700-hands-on/)均支持 1080p。此外，[Google TV](http://www.google.com/tv/)在 Android 版本上运行并[支持 1080p](http://www.google.com/tv/features.html)。我怀疑您的设备根本不支持以 1080p 运行，而只是放大其输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:31:06.487

标准的 android 内核无法以如此高分辨率为帧缓冲区分配所需的内存。

# python - 将元类规则应用于所有后代而不是直接元类类

> ID：10726676
> 
> 赞同：1
> 
> 时间：2012-05-23T19:37:09.800
> 
> 标签：python, abstract-class, metaclass, class-members

让我从定义我的目标开始：

1.  启用没有默认值的抽象类成员（不是属性、方法或实例成员）的定义（不是 None 或其他一些魔法值，但如果未实现则抛出错误）。

2.  为 (1) 服务，创建一个可重用的抽象机制，使创建具有抽象成员的类变得微不足道，并且代码尽可能简洁。

3.  能够将抽象类成员附加到父类（作为子类、元类或通过任何其他方式），其中在定义具体子类之前不需要定义抽象成员。

到目前为止我得到了什么：

元类库.py：

```
class AbstractRequiredClassMembersMetaclass(type):

    def __new__(cls, name, bases, attrs):

        missed_members = []
        for class_member in cls.REQUIRED_CLASS_MEMBERS:
            if class_member not in attrs:
                missed_members.append(class_member)
        if missed_members:
            raise NotImplementedError('Class missing required members %s.' % missed_members)
        return super(AbstractRequiredClassMembersMetaclass, cls).__new__(cls, name, bases, attrs)

class _MakeRequiredClassMemebersMetaclass(object):

    existing_classes = {}

    def __call__(self, name, required_members):

        if name in _MakeRequiredClassMemebersMetaclass.exisiting_classes:
            if required_members != _MakeRequiredClassMemebersMetaclass.exisiting_classes[name].REQUIRED_CLASS_MEMBERS:
                raise RuntimeError('Class of name %s already defined with different required_members.' % name)
        else:
            NewClass = type(name, (AbstractRequiredClassMembersMetaclass,), {'REQUIRED_CLASS_MEMBERS' : required_members})
            _MakeRequiredClassMemebersMetaclass.exisiting_classes[name] = NewClass
        return _MakeRequiredClassMemebersMetaclass.exisiting_classes[name]

make_required_class_members_metaclass = _MakeRequiredClassMemebersMetaclass() 
```

Goods.py（用于说明的实现）：

```
from metaclass_lib import make_required_class_members_metaclass

class AbstractGood(object):

    __metaclass__ = make_required_class_members_metaclass('AbstractGoodMeta', ('unit_measure',))

    def __init__(self):

        self.unit_price = None

    def total_cost(self, number_of_units):

        return self.unit_price * self.number_of_units

class DeliGood(AbstractGood):

    unit_measure = 'lbs'

    def __init__(self):

        self.sandwich_counter_product = False

class RefridgeratedGood(AbstractGood):

    unit_measure = 'package'

    def __init__(self):

        self.freezer_safe = False
        self.optimal_temp = '35' 
```

这不起作用，因为元类在创建`AbstractGood` `type`对象期间阻塞。问题是我希望所有具体商品都定义类成员，但我不想在任何抽象基础中定义类成员。我能想到的就是让元类只`in attrs`检查关键字是否不在`name`（ex `if 'Abstract' not in name`）中，但这看起来很笨拙和脆弱。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T08:03:54.513

也是一种 hack，但比检查名称更可靠。您知道抽象基类没有基类（或者`object`在 python 2 中只有类型）。所以你可以检查一下:)

```
class AbstractBase(object):
   class __metaclass__(type):
        def __new__(mcs, name, bases, dict_):
           if bases[0] is not object: # hack to not apply these on AbstractBase
                assert 'unit_measure' in dict_
           return type.__new__(mcs, name, bases, dict_)

class DeliGood(AbstractBase):
    unit_measure = 'lbs' 
```

# sql - SQL选择具有不同日期的相同字段

> ID：10726677
> 
> 赞同：0
> 
> 时间：2012-05-23T19:37:19.377
> 
> 标签：sql

我有一个查询，我需要使用 MS SQL Server 2008 运行一些数据。基本上我有 3 个唯一字段，还有 3 个需要在时间范围内重复。这样我将在主 select 语句中有三个子查询。我一直在尝试仅使用一个子查询使其正常工作，然后复制 n 粘贴其他两个并更改日期范围。

这是我想出的 SQL，但它给了我一个错误。我正在尝试使用子查询，因为我没有创建过程的权限。

```
SELECT
mon.description as ScriptName,
up0.pageseqnum as PageSeq,
usd.DisplayName as PageName,

--This subquery is the one week old data for the Response Time, Page Weight, and Number of Objects.
(SELECT
ROUND(AVG(CAST(up1.ResponseTime AS FLOAT)* 0.001),3) AS ResponseTime,
ROUND(AVG(CAST(up1.numbytes AS FLOAT)* 0.001), 3) AS NumberofKilobytes,
CONVERT(INT,AVG(up1.numobj),0) AS NumberOfObjects
FROM
table0 AS up1
WHERE
up1.Monitor_Id = up0.Monitor_id
AND up1.TestTime BETWEEN DATEADD(HOUR,4,'2012-05-14 00:00:00') AND DATEADD(HOUR,4,'2012-05-21 00:00:00')
AND ISNULL(up1.ContentMatchStatus,'0')= 0
AND up1.UserScriptStatus = 0
AND up1.TimeoutStatus = 0
AND up1.ResponseTime > 0
) AS CurrentWeek

FROM
table0 (nolock) AS up0
JOIN table1 usd ON up0.Monitor_Id=usd.monitor_id
and up0.PageSeqNum=usd.PageSeqNum
JOIN table3 mon on up0.Monitor_Id = mon.Monitor_id

WHERE
up0.Monitor_Id in (1, 2, 3, 4, 5, 6, 7, 8 ,9 ,10)

GROUP BY up0.Monitor_Id, mon.Description, up0.PageSeqNum, usd.DisplayName
ORDER BY mon.Description ASC; 
```

我希望结果集应该有这些列，并且我可以在本周之后再添加前两周的数据！请滚动查看我所说的结果。

```
                                | CurrentWeek (子查询) | OneWeekOld (子查询) |
脚本名称 | 页面序列 | 页面名称 | 响应时间 | 千字节数 | 对象数 | 响应时间 | 千字节数 | 对象数 |
测试1 | 0 | 主页 | 1.2 | 50.23 | 56 | 1.2 | 50.23 | 56 |
测试1 | 1 | 出售 | 2.2 | 50.23 | 56 | 1.2 | 50.23 | 56 |
测试1 | 2 | 烘烤 | 3.2 | 50.23 | 56 | 1.2 | 50.23 | 56 |
测试1 | 3 | 蛋糕 | 4.2 | 50.23 | 56 | 1.2 | 50.23 | 56 |
测试2 | 0 | 主页 | 1.2 | 50.23 | 56 | 1.2 | 50.23 | 56 |
测试2 | 1 | 出售 | 2.2 | 50.23 | 56 | 1.2 | 50.23 | 56 |
测试2 | 2 | 烘烤 | 3.2 | 50.23 | 56 | 1.2 | 50.23 | 56 |

```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:46:34.560

尝试这样的事情：

```
SELECT  mon.description as ScriptName,
        up0.pageseqnum as PageSeq,
        usd.DisplayName as PageName,
        wk.ResponseTime,
        wk.NumberofKilobytes,
        wk.NumberOfObjects

FROM
table0 (nolock) AS up0
JOIN table1 usd ON up0.Monitor_Id=usd.monitor_id
and up0.PageSeqNum=usd.PageSeqNum
JOIN table3 mon on up0.Monitor_Id = mon.Monitor_id
CROSS APPLY (   SELECT  up1.Monitor_Id,
                        ROUND(AVG(CAST(up1.ResponseTime AS FLOAT)* 0.001),3) AS ResponseTime,
                        ROUND(AVG(CAST(up1.numbytes AS FLOAT)* 0.001), 3) AS NumberofKilobytes,
                        CONVERT(INT,AVG(up1.numobj),0) AS NumberOfObjects
                FROM table0 AS up1
                WHERE up1.TestTime BETWEEN DATEADD(HOUR,4,'2012-05-14 00:00:00') AND DATEADD(HOUR,4,'2012-05-21 00:00:00')
                AND ISNULL(up1.ContentMatchStatus,'0')= 0
                AND up1.UserScriptStatus = 0
                AND up1.TimeoutStatus = 0
                AND up1.ResponseTime > 0 
                GROUP BY up1.Monitor_Id) wk

WHERE up0.Monitor_Id in (1, 2, 3, 4, 5, 6, 7, 8 ,9 ,10)
AND up0.Monitor_Id = up1.Monitor_Id
ORDER BY mon.Description ASC; 
```

如果您将架构发布在 sqlfiddle.com 上会更容易，然后我可以针对它编写查询以返回您需要的内容。

另外我假设您使用的是 SQL Server，因此使用了 APPLY。请说明您正在使用的数据库系统。

# crystal-reports - 水晶页码

> ID：10726680
> 
> 赞同：1
> 
> 时间：2012-05-23T19:37:41.143
> 
> 标签：crystal-reports

因此，我正在制作一份需要能够传真并在需要时提供封面的报告。我添加了一个封面作为总页数的报告标题。有一个页眉生成 [page n of m]，但使用“if (pageNumber=1) then true”阻止在报表页眉上显示。由于我不希望 [page n of m] 包含封面页数，因此决定手动制作 m 页 n。当它在页面上打印时，数字是浮点格式而不是 int，我该如何解决这个问题。这是我正在使用和输出的水晶语法。

```
numbervar n := PageNumber - 1;
numbervar m := TotalPageCount -1;
stringvar page := "Page " + toText(int(n)) + " of " + toText(int(m));
page 
```

输出：“第 1.00 页，共 3.00 页”

我最初尝试在报告标题后重置页数，但这使得封面上的 [totalPageCount] 为 1 而不是 4。

感谢您的帮助，大卫 K。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:44:57.260

而不是 ToText(int(n)，只需使用 ToText(n, 0)。

[您可以在此处](http://publib.boulder.ibm.com/infocenter/radhelp/v7r5/index.jsp?topic=/com.businessobjects.integration.eclipse.designer.doc/html/topic629.html)找到有关 ToText 不同语法的信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:46:09.453

为什么您不使用来自部分专家的内置“重置页码”功能？

或者只是在做：

```
"Page " + toText(PageNumber - 1,0) + " of " + toText(TotalPageCount -1,0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-12T08:36:47.893

您可以使用“重置页码后”功能 - 从部分专家然后在您的组更改后重置。只是为了让你的生活变得更好：*

# ios - RubyMotion >> 如何将变量转换为特定类型？

> ID：10726681
> 
> 赞同：2
> 
> 时间：2012-05-23T19:37:42.263
> 
> 标签：ios, types, casting, nsmutableurlrequest, rubymotion

由于 RubyMotion 似乎在编译时进行了大量类型转换，因此我无法将正确的 dataType 传递给 NSMutableURLRequest POST 请求。它期待 NSData，但我不知道如何在不引发错误的情况下向 NSData 键入 NSString 变量。如果不进行类型转换，我们的 SOAP 服务器将无法正确接收数据，并且我得到可怕的（且模糊的）“根级别的数据无效。第 1 行，位置 1”错误。

**这是有问题的行：**

```
postXML = "<xml><whatever>hey</whatever></xml>"
postData = ( postXML as NSData ).dataUsingEncoding( NSUTF8StringEncoding, allowLossyConversion: true );

request = NSMutableURLRequest.alloc.init
request.setURL( NSURL.URLWithString( "https://services.sbx1.cdops.net/v4.3/SubscriberServicePox.svc/Login" ) )
request.setHTTPMethod( "POST" )

request.setValue( "application/xml", forHTTPHeaderField: "Content-Type" )
request.setHTTPBody( postData, dataUsingEncoding:NSUTF8StringEncoding )

theConnection = NSURLConnection.alloc.initWithRequest( request, delegate:self ) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T21:10:48.817

您对正在发生的事情的理解有一些漏洞，所以让我们分解一下。

```
postXML = "<xml><whatever>hey</whatever></xml>"
postData = ( postXML as NSData ).dataUsingEncoding( NSUTF8StringEncoding, allowLossyConversion: true ); 
```

我不确定你从哪里得到`( postXML as NSData )`的，但它无效并且没有意义。[是在NSString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html) not`dataUsingEncoding:allowLossyConversion:`上声明的 Objective-C 方法。正确的调用方式是这样的`NSData`

```
postData = postXML.dataUsingEncoding(NSUTF8StringEncoding, allowLossyConversion: true) 
```

Ruby 运动不`type conversions`适合你，Ruby 不适合，Objective-C 也不适合。如果您向一个类的实例发送一条消息，该实例不响应您发送的消息，您将崩溃/引发异常。

你打电话时

```
postXML.dataUsingEncoding(NSUTF8StringEncoding, allowLossyConversion: true) 
```

您没有进行类型转换，而是将消息发送`dataUsingEncoding:allowLossyConversion:`到`NSString`. 这将导致返回一个全新的全新对象（ 的实例`NSData`）。

# ios - 使用 ABAddressBook.GetPerson 检索 ABPeoplePickerNavigationController 返回的 ABPerson

> ID：10726683
> 
> 赞同：2
> 
> 时间：2012-05-23T19:37:56.897
> 
> 标签：ios, xamarin.ios, abaddressbook

我正在使用 ABPeoplePickerNavigationController 来允许用户从他们的通讯录中选择一个 ABPerson。我从那个联系人那里导入了一些数据。

我想更新该 ABPerson 中的一个字段，以表明我已经从该 ABPerson 导入了数据（我目前将其保存在 Note 字段中 - 有没有更好的方法？）

但是我从 SelectPerson 事件 (ABPeoplePickerSelectPersonEventArgs.Person) 中返回的对象与通讯簿“分离”。

我希望做的是：

```
 var book = new ABAddressBook();
        var p = book.GetPerson(e.Person.GetProperty(ABPersonProperty.ID));
        p.Note = "foo";
        book.Save(); 
```

但我找不到合适的房产。

我在某处读到有一个 kABUIDProperty 并希望这是 GetPerson 想要的 int，但我在 ABPerson 上找不到它。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:03:28.680

这对我来说很好：

```
 var book = new ABAddressBook();
    var p = book.GetPerson(e.Person.Id);
    p.Note = "TEST";
    book.Save(); 
```

# extjs - 隐藏时如何强制ExtJs面板保持宽度

> ID：10726690
> 
> 赞同：2
> 
> 时间：2012-05-23T19:38:22.847
> 
> 标签：extjs, extjs4

我在使用 extjs 面板时遇到以下问题。

我有一个带有 hbox 布局的父面板，在它的子面板中，我有另一个带有 hbox 布局的面板。最初子面板是隐藏的，我只在某些情况下显示它。

问题是隐藏的孩子的宽度= 0，所以它不保持可见时的宽度。但即使它被隐藏，我也需要它具有相同的宽度。

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T21:18:50.093

不要在子面板上调用 hide()，试试这个：

```
childPanel.getEl().setOpacity(0); //0 to hide, 1 to show 
```

这样面板总是在那里，您只需控制可见性。它不会在隐藏/显示时弄乱您的布局。

# jquery - javascript 到 Jquery 的转换

> ID：10726691
> 
> 赞同：2
> 
> 时间：2012-05-23T19:38:23.247
> 
> 标签：jquery

给定一个 HTML 片段

```
<img id="progress" src="http://ajaxify.com/run/sum/progress/progress.gif" class="notWaiting"/> 
```

传统的 JavaScript 方式，代码工作：

```
function submitWord() {
    // Show progress indicator and clear existing results
    $("progress").classname="waiting"; 
```

但是在 jquery 方式下，下面的代码不起作用：

```
function submitWord() {

 // Show progress indicator and clear existing results
  $("#progress").toggleClass("notWaiting waiting"); 
```

另外，我已经尝试过`addClass`，甚至做了类似的事情

```
$("#progress").removeClass().addClass("waiting"); 
```

只是为了确保首先删除默认类，但也无济于事。

**更新：**这里是 JSfiddle 版本。 [http://jsfiddle.net/EVbh2/1/](http://jsfiddle.net/EVbh2/1/)

**更新 2：**
现在上面的问题是我引用 JQuery 文件本身。但我仍然面临代码问题。我尝试将所有代码转换为 jquery，但它不起作用。这是一个新的[FIDDLE](http://jsfiddle.net/pcXE3/12)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:10:21.893

这有效：

```
$("#progress").removeClass("notWaiting").addClass("waiting"); 
```

这也可以，但它会清除所有其他类，并且唯一的类将是“等待”：

```
$("#progress").attr("class","waiting"); 
```

这也将起作用，并且可能是最简单的：

```
$("#progress").toggleClass("notWaiting waiting"); 
```

**更新**

看了你的小提琴之后，你的问题实际上是你忘记在你的“单词”选择器中放一个#。我还更改了您的 keyup 函数以使用 jquery 等效项。

这有效：

[http://jsfiddle.net/wuXL2/3/](http://jsfiddle.net/wuXL2/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:26:26.570

Your jsFiddle demo is *not* correct jQuery code. In jQuery, the `$` returns a jQuery object, not a DOM element. Because of this, you can't set properties the same way. So you cannot do this:

```
$("word").onkeyup = function(){
}; 
```

You need to call the `keyup` method:

```
$('#word').keyup(function(){  // Note the '#'
}); 
```

Also:

```
$("results").innerHTML = ""; 
```

Should be:

```
$("#results").html("");  // Note the '#' 
```

As for changing classes:

```
$("#progress").toggleClass("notWaiting waiting"); 
```

This is correct, and works 100% in jQuery. If it doesn't work, then something else is wrong (like the incorrect jQuery code, and the fact that your jsFiddle had MooTools selected).

Fixed demo: [http://jsfiddle.net/EVbh2/3/](http://jsfiddle.net/EVbh2/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T17:12:59.410

问题出在 chrome 上。在 IE 中它工作得很好。

# jquery - 比较检查的产品并在下一页显示它们

> ID：10726692
> 
> 赞同：-1
> 
> 时间：2012-05-23T19:38:32.800
> 
> 标签：jquery, html, jsp

我有一个场景，在一个页面中，我有一个产品列表，用户可以在其中检查任何要比较的产品。然后我必须收集检查产品的数据并在下一页进行比较。我必须在 jquery 中执行此操作

谁能给我关于如何处理这些情况的建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:51:26.233

1 输出带有复选框的产品列表。他们将在表单提交后去请求。2 在下一页进行比较。

# c# - 用户控制开关

> ID：10726695
> 
> 赞同：3
> 
> 时间：2012-05-23T19:38:42.967
> 
> 标签：c#, user-controls

有两个不同的用户控件共享一些公共属性。我想做的是根据外部标志在这两者之间切换。

```
UserControl u1, u2;

if(flag)
{
    u1 = u1 as ControlType1;
    u2 = u2 as ControlType1;
}
else
{
    u1 = u1 as ControlType2;
    u2 = u2 as ControlType2;
}

SomeMethod(u1.SelectedItemName, u2.SelectedItemName); 
```

由于 UserControl 没有名为“SelectedItemName”的属性，因此代码不会引发错误。

我目前所做的是，我在 UserControl 上添加了一个扩展方法，该方法使用反射获取“SelectedItemName”，并通过调用 u1.SelectedItemName() 而不是 u1.SelectedItemName; 来获取值。

我的问题是什么是一种简单的方法来解决这个问题而不使用扩展/也许是正确的方法。请注意，我不想在 if 语句中重复 SomeMethod(a,b) 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T19:42:52.430

我的建议是让这两个`UserControl`类都实现共享接口或从共享基类派生。然后，您可以针对基类或接口进行开发，而完全不用担心标志/开关。

```
IYourUserControl u1, u2;

SomeMethod(u1, u2); 
```

如果 SomeMethod 定义为：

```
void SomeMethod(IYourUserControl one, IYourUserControl two) { // ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T19:40:58.070

试试这个：

```
UserControl u1, u2;

if(flag)
{
    u1 = u1 as ControlType1;
    u2 = u2 as ControlType1;
    SomeMethod((u1 as ControlType1).SelectedItemName, (u2 as ControlType1).SelectedItemName);
}
else
{
    u1 = u1 as ControlType2;
    u2 = u2 as ControlType2;
    SomeMethod((u1 as ControlType2).SelectedItemName, (u2 as ControlType2).SelectedItemName);
} 
```

或者，如果您创建一个`BaseControlType`包含`SelectedItemName`和扩展的内容`ControlType1`，`ControlType2`您可以这样做：

```
UserControl u1, u2;

if(flag)
{
    u1 = u1 as ControlType1;
    u2 = u2 as ControlType1;
}
else
{
    u1 = u1 as ControlType2;
    u2 = u2 as ControlType2;
}

SomeMethod((u1 as BaseControlType).SelectedItemName, (u2 as BaseControlType).SelectedItemName); 
```

# ios - 在 iOS 上查找文档目录的替代方法

> ID：10726701
> 
> 赞同：2
> 
> 时间：2012-05-23T19:39:09.843
> 
> 标签：ios

通常，在 iOS 上查找文档目录的答案涉及如下代码：

```
+ (NSString *) applicationDocumentsDirectory 
{    
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    return basePath;
} 
```

但是，我发现了一个替代版本：

```
+ (NSString *)applicationDocumentsDirectory
{
    return [@"~/Documents" stringByExpandingTildeInPath];
} 
```

我有什么理由不能使用它吗？也许将来 Documents 目录可能不在主目录中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:00:35.657

> 我有什么理由不能使用它吗？也许将来 Documents 目录可能不在主目录中？

我想你在这里回答了你自己的问题。

第一种方法询问操作系统 Documents 目录在哪里并且什么都不做。

第二种方法假定 Documents 目录的位置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T19:45:17.097

那这个呢

```
NSString *resourcePath = [[NSBundle mainBundle] resourcePath]; 
```

# javascript - document.vulnerable 有什么作用？

> ID：10726704
> 
> 赞同：1
> 
> 时间：2012-05-23T19:39:20.873
> 
> 标签：javascript, xss

我越来越多地防止 xss 攻击，我这样做的方法之一是发现和修复漏洞。我注意到在我记录的许多攻击中都看到了 document.vulnerable。

我似乎找不到太多关于此的文档，所以我想知道它有什么作用或它的用途是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T19:49:14.747

AFAIK 这只是一种测试攻击是否有效的方法。您尝试将包含的脚本`document.vulnerable = true`注入页面，然后转到该页面并查看是否设置了 document.vulnerable。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T19:51:15.857

据我所知，这只是 XSS 漏洞测试设置的标志。我基于我所见过的所有测试

> ...生成的 HTML 页面设置特定的 JavaScript 值 (document.vulnerable=true)，然后该工具将该页面标记为易受给定 XSS 的攻击...

在这个 FF 插件的文档中看到：[https ://addons.mozilla.org/en-US/firefox/addon/xss-me/](https://addons.mozilla.org/en-US/firefox/addon/xss-me/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T19:49:32.507

我不认为它有任何作用，它只是在文档对象上设置一个名为`vulnerable`.

当您看到 HTML 代码时：`<IMG SRC="javascript:document.vulnerable=true;">`在查看 XSS 攻击时，这只是在说“允许在此处插入 JavaScript 代码是危险的”。

# perl - Perl：确定输入是文件还是目录

> ID：10726707
> 
> 赞同：1
> 
> 时间：2012-05-23T19:39:48.697
> 
> 标签：perl, file, compare, subdirectory

我目前正在编写一个程序，该程序最终将比较两个目录中的文件并显示每个文件中已更改的功能。但是，在检查目录中的内容是文件还是子目录时遇到了问题。现在，当我检查它是否只是带有 -d 检查的目录时，它不会捕获任何子目录。我在下面发布了我的部分代码。

```
opendir newDir, $newDir;
my @allNewFiles = grep { $_ ne '.' and $_ ne '..'} readdir newDir;
closedir newDir;

opendir oldDir, $oldDir;
my @allOldFiles = grep { $_ ne '.' and $_ ne '..'} readdir oldDir;
closedir oldDir;

foreach (@allNewFiles) {
    if(-d $_) {
        print "$_ is not a file and therefore is not able to be compared\n\n";
    } elsif((File::Compare::compare("$newDir/$_", "$oldDir/$_") == 1)) {
        print "$_ in new directory $newDirName differs from old directory $oldDirName\n\n";
        print OUTPUTFILE "File: $_ has been update. Please check marked functions for differences\n";
        print OUTPUTFILE "\n\n";
        print OUTPUTFILE "+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=\n\n";
    } elsif((File::Compare::compare("$newDir/$_", "$oldDir/$_") < 0)) {
        print "$_ found in new directory $newDirName but not in old directory $oldDirName\n";
        print "Entire file not printed to output file but instead only file name\n";
        print OUTPUTFILE "File: $_ is a new file!\n\n";
        print OUTPUTFILE "+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=\n\n";
    }
 }

foreach (@allOldFiles) {
    if((File::Compare::compare("$newDir/$_", "$oldDir/$_") < 0)) {
        print "$_ found in old directory $oldDirName but not in new directory $newDirName\n\n";
    }
 } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T19:53:12.190

正如[perldoc -f readdir](http://perldoc.perl.org/functions/readdir.html)所说：

> 如果您打算从 readdir 中对返回值进行文件测试，则最好在有问题的目录之前添加。否则，因为我们没有 chdir 那里，它会一直在测试错误的文件。

```
if(-d "$newDir/$_") { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T20:00:49.850

使用[路径::类](http://search.cpan.org/~kwilliams/Path-Class-0.25/)

```
use strict;
use warnings;
use Path::Class;

my @allNewFiles = grep { !$_->is_dir } dir("/newDir")->children; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T19:51:33.620

使用递归调用首先获取文件列表，然后对它们进行操作。

```
my $filesA = {};
my $filesB = {};

# you are passing in a ref to filesA or B so no return is needed.
sub getFiles {
  my ($dir, $fileList) = @_;

  foreach my $file (glob("*")) {
    if(-d $file) {
      getFiles($dir . "/" . $file, $fileList); # full relative path saved
    } else {
      $fileList{$dir . "/" . $file}++;         # only files are put into list
    }
  }
}

# get the files list
my $filesA = getFiles($dirA);
my $filesB = getFiles($dirB);

# check them by using the keys from the 2 lists created. 
```

# haskell - 秒差类型的问题

> ID：10726708
> 
> 赞同：4
> 
> 时间：2012-05-23T19:40:07.897
> 
> 标签：haskell, parsec

在为特定的计算生物学文件格式编写解析器时，我遇到了一些麻烦。

这是我的代码：

```
betaLine = string "BETA " *> p_int <*> p_int  <*> p_int <*> p_int <*> p_direction <*> p_exposure <* eol

p_int = liftA (read :: String -> Int) (many (char ' ') *> many1 digit <* many (char ' '))

p_direction = liftA mkDirection (many (char ' ') *> dir <* many (char ' '))
            where dir = oneStringOf [ "1", "-1" ]

p_exposure = liftA (map mkExposure) (many (char ' ') *> many1 (oneOf "io") <* many (char ' ')) 
```

现在，如果我注释掉 betaLine 的定义，一切都会编译，并且我已经成功测试了单独的解析器 p_int、p_direction 和 p_exposure。

但是，当存在 betaLine 方程时，我会收到一个我不太理解的类型错误。我对应用程序 <*> 的理解是错误的吗？最终，我希望它返回 Int -> Int -> Int -> Int -> Direction -> ExposureList，然后我可以将其提供给 BetaPair 的构造函数。

类型错误是：

```
Couldn't match expected type `a5 -> a4 -> a3 -> a2 -> a1 -> a0'
            with actual type `Int'
Expected type: Text.Parsec.Prim.ParsecT
                 s0 u0 m0 (a5 -> a4 -> a3 -> a2 -> a1 -> a0)
  Actual type: Text.Parsec.Prim.ParsecT s0 u0 m0 Int
In the second argument of `(*>)', namely `p_int'
In the first argument of `(<*>)', namely `string "BETA " *> p_int' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T20:14:36.637

**tl;博士**：你想要这个表达：

```
betaLine = string "BETA " *> (BetaPair <$> p_int <*> p_int  <*> p_int <*> p_int <*> p_direction <*> p_exposure) <* eol 
```

阅读下面的*原因*。

* * *

再一次，这在一定程度上是一个优先问题。您当前的线路是做什么的：

```
string "BETA " *> p_int <*> p_int ... 
```

...是它创建了一个这样的解析器：

```
(string "BETA " *> p_int) <*> (p_int) ... 
```

不过，这不是主要问题，事实上，如果解析器的其余部分是正确的，上述语义错误的解析器仍然会产生正确的结果。但是，正如您所说，您对如何工作有一点误解`<*>`。它的签名是：

```
(<*>) :: Applicative f => f (a -> b) -> f a -> f b 
```

如您所见，该函数应该获得一个包装在函子中的函数作为第一个参数，然后**使用**包装在第二个参数中的函子中的值应用该函数（因此是**应用**函子）。当您`p_int`在函数开头将其作为第一个参数时，它是 a`Parser Int`而不是 a `Parser (a -> b)`，因此不会检查类型。

事实上，它们不能用来检查目标是否是你用推理陈述的；你想`betaLine`成为一个`Parser (Int -> Int -> Int -> Int -> Direction -> ExposureList)`，但这对你有什么帮助？你得到一个需要 4 `Int`s, a `Direction`and的函数`ExposureList`，当你将该函数提供给 a 的构造函数时`BetaPair`，它应该神奇地构造 a`BetaPair`出来吗？请记住，函数关联到右侧，因此如果`BetaPair`构造函数具有类型：

```
Int -> Int -> Int -> Int -> Direction -> ExposureList -> BetaPair 
```

...这与以下内容不同：

```
(Int -> Int -> Int -> Int -> Direction -> ExposureList) -> BetaPair 
```

它实际上是这个意思：

```
Int -> (Int -> (Int -> (Int -> (Direction -> (ExposureList -> BetaPair))))) 
```

您可以改为将其`betaLine`设为 a `Parser BetaPair`，这样会更有意义。您可以使用`<$>`运算符，它是`fmap`（在函数箭头下）的同义词，它允许您将`BetaPair`构造函数提升到`Parser`函子，然后使用应用函子接口将单个参数应用于它。该`<$>`函数具有以下类型：

```
(<$>) :: Functor f => (a -> b) -> f a -> f b 
```

在这种情况下，您要提升的第一个参数是`BetaPair`构造函数，它将类型转换为“函数”的类型组件`a`，产生这个特定的签名：`b``BetaPair`

```
(<$>) :: (Int -> (Int -> (Int -> (Int -> (Direction -> (ExposureList -> BetaPair)))))) 
      -> f Int -> f (Int -> (Int -> (Direction -> (ExposureList -> BetaPair)))) 
```

如您所见，`<$>`这里将做的是将一个函数作为左参数，并将一个包装在仿函数中的值作为右参数，并将包装的参数应用于函数。

作为一个更简单的示例，如果您有`f :: Int -> String`，则以下表达式：

```
f <$> p_int 
```

... 将解析一个整数，`f`将该整数作为参数应用函数，并将结果包装在函子中，因此上面的表达式具有 type `Parser String`。`<$>`在这个位置的类型是：

```
(<$>) :: (Int -> String) -> Parser Int -> Parser String 
```

因此， using`<$>`将第一个参数应用于您的构造函数。那么你如何处理其他争论呢？好吧，这就是`<*>`in 的用武之地，我认为您从类型签名中了解了它的作用：如果您将其使用链接起来，它将通过展开右边的函子。所以，再举一个更简单的例子；假设您有一个函数`g :: Int -> Int -> String`和以下表达式：

```
g <$> p_int <*> p_int 
```

该`g <$> p_int`表达式会将 的结果应用于`p_int`的第一个参数`g`，因此该表达式的类型是`Parser (Int -> String)`。然后`<*>`应用下一个参数，具体类型为`<*>`：

```
(<*>) :: Parser (Int -> String) -> Parser Int -> Parser String 
```

所以，上面整个表达式的类型是`Parser String`。

等效地，对于您的情况，您可以在这种情况下让`BetaPair`成为您`g`的，产生以下模式：

```
BetaPair <$> one <*> parser <*> per <*> argument <*> to <*> betaPair 
```

如上所述，生成的解析器因此是：

```
betaLine = string "BETA " *> (BetaPair <$> p_int <*> p_int  <*> p_int <*> p_int <*> p_direction <*> p_exposure) <* eol 
```

# c# - 比较没有时间的日期 Lambda

> ID：10726710
> 
> 赞同：2
> 
> 时间：2012-05-23T19:40:11.707
> 
> 标签：c#, linq

我认为这段代码会中断，因为 SubmittedDt 和 DateTimeToday 中有时间。如何解决此问题以仅按日期而不是时间进行过滤。

```
 DailyOrder todaysOrderNotReset = dailyOrders.Where(x => x.SubmittedDt == DateTime.Today && x.IsResetDone == false).First(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T19:42:02.097

```
x.SubmittedDt 
```

应该

```
x.SubmittedDt.Date 
```

...虽然你并不真正需要`Where`因为 First（或 FirstOrDefault）应该处理你想要的。

```
dailyOrders.First(x => x.SubmittedDt.Date == DateTime.Today && x.IsResetDone == false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T19:42:53.197

试试这个

```
DailyOrder todaysOrderNotReset = dailyOrders.Where(x => x.SubmittedDt.Date == DateTime.Today && x.IsResetDone == false).First(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T19:50:32.527

```
DateTime today = DateTime.Today;
DailyOrder todaysOrderNotReset = dailyOrders.First(x => 
    x.SubmittedDt.Date == today && x.IsResetDone == false); 
```

在将当前日期/时间与项目集合进行比较时，您最好首先将当前日期/时间读入本地变量，然后使用该一致值进行比较。否则，您会冒很小的风险，即当前日期/时间会在执行过程中发生变化并产生意想不到的结果。

# javascript - 自定义单选按钮和复选框

> ID：10726712
> 
> 赞同：0
> 
> 时间：2012-05-23T19:40:15.297
> 
> 标签：javascript, jquery, css, jquery-plugins, checkbox

我正在尝试将自定义图像用于复选框和单选按钮。到目前为止，我已经找到了一个[css/javascript](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)解决方案、20 个插件的各种列表或 JQuery UI。由于很多解决方案都是几年前的，而且很多插件看起来已经死了，现在有没有解决方案，或者仍然有很多分散的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:44:46.807

我猜你想要一个更好的方法，那就是 jQuery：

**HTML**

```
<!-- Style these: -->
<a class="radio" id="radio1" onclick="radio('1');">something cool</a>
<a class="radio" id="radio2" onclick="radio('2');">radio2 (or checkbox)</a>
<a class="radio" id="radio3" onclick="radio('3');">radio3 (or checkbox)</a>

<input id="radionumber" type="hidden" value="0" /> 
```

**Javascript**

```
function radio(n) {
   $('#radio'+n).click();
   $('.radio').removeClass('selectedRadio');
   $(this).addClass('selectedRadio');
   $('#radionumber').val( $(this).attr('id').substring(5); );
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T20:03:13.747

[http://uniformjs.com/](http://uniformjs.com/)有一组漂亮的表单元素，并且除了 ie6 之外都与浏览器兼容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T20:08:59.203

几乎所有你想要的表单元素，然后是一些：[https ://github.com/jquery/jquery-ui](https://github.com/jquery/jquery-ui)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-30T16:18:29.557

这是我为帮助像你这样的人而做的事情：

## 单选按钮：

```
window.onload = function() {
  var radioButtonGroups = document.getElementsByClassName('radioGroupContainer');
  for (var i = 0; i != radioButtonGroups.length; i++) {
    var radioButtons = radioButtonGroups[i].getElementsByClassName('radioButtonContainer');
    for (var i = 0; i != radioButtons.length; i++) {
      radioButtons[i].onclick = function() {
        var value = this.children[0].getAttribute('name');
        for (var i = 0; i != radioButtons.length; i++) {
          radioButtons[i].children[0].setAttribute('class', 'radioButtonDot');
        }
        this.children[0].setAttribute('class', 'radioButtonDotActive');
        this.parentNode.setAttribute('name', value);
      };
    }
  }
};
```

```
/*
* Created by William Green.
* Questions or comments? Email william.green@protonmail.com
* I would appreciate credit for this code if you use it; but it is not required.
* Last updated July 26, 2015
* Created July 26, 2015
*
*/

.radioButtonContainer {
  background-color: #eee;
  padding: 5px;
  -moz-border-radius: 3px;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  display: table;
  margin-top: 5px;
  margin-bottom: 5px;
}
.radioButtonContainer .radioButtonDot {
  width: 16px;
  height: 16px;
  background-color: transparent;
  border: 1px solid #000;
  display: inline-block;
  vertical-align: middle;
  -moz-border-radius: 50%;
  -webkit-border-radius: 50%;
  border-radius: 50%;
  -o-transition: all .5s ease;
  -moz-transition: all .5s ease;
  -webkit-transition: all .5s ease;
  -ms-transition: all .5s ease;
  transition: all .5s ease;
}
.radioButtonContainer .radioButtonDotActive {
  width: 16px;
  height: 16px;
  background-color: #1396DE;
  border: 1px solid transparent;
  display: inline-block;
  vertical-align: middle;
  -moz-border-radius: 50%;
  -webkit-border-radius: 50%;
  border-radius: 50%;
  -o-transition: all .5s ease;
  -moz-transition: all .5s ease;
  -webkit-transition: all .5s ease;
  -ms-transition: all .5s ease;
  transition: all .5s ease;
}
.radioButtonContainer .radioButtonLabel {
  background-color: transparent;
  display: inline-block;
  vertidal-align: middle;
  border: 0;
}
```

```
<div class="radioGroupContainer" id="radioChoicesOne">
  <div class="radioButtonContainer">
    <div class="radioButtonDot" name="optionOne"></div>
    <input type="button" class="radioButtonLabel" value="Option One">
  </div>
  <div class="radioButtonContainer">
    <div class="radioButtonDot" name="optionTwo"></div>
    <input type="button" class="radioButtonLabel" value="Option Two">
  </div>
  <div class="radioButtonContainer">
    <div class="radioButtonDot" name="optionThree"></div>
    <input type="button" class="radioButtonLabel" value="Option Three">
  </div>
</div>

<div id="radioButtonGroupOneValue"></div>
<input type="button" value="Get radio button value..." onclick="document.getElementById('radioButtonGroupOneValue').innerHTML = document.getElementById('radioChoicesOne').getAttribute('name');">
```

## 复选框：

```
window.onload = function() {
  var checkboxes = document.getElementsByClassName('checkbox');
  for (var i = 0; i != checkboxes.length; i++) {
    if (checkboxes[i].hasAttribute('name') == false) {
      checkboxes[i].setAttribute('name', 'notChecked');
    } else {
      if (checkboxes[i].getAttribute('name') == 'checked') {
        checkboxes[i].setAttribute('name', 'checked');
        checkboxes[i].children[0].className = 'checkboxDotActive';
      }
    }

    checkboxes[i].onclick = function() {
      if (this.getAttribute('name') == 'checked') {
        this.setAttribute('name', 'notChecked');
        this.children[0].className = 'checkboxDot';
      } else {
        this.setAttribute('name', 'checked');
        this.children[0].className = 'checkboxDotActive';
      }
    };
  }
};
```

```
/*
* Questions or comments? Please email william.green@protonmail.com
* Credit for this project goes to William Green (me).
* Created July 25, 2015
* Last updated July 25, 2015
* I would like appropriate credit for this code, although it is not required.
*
* Thank you for looking, hope you find it useful.
* Please come back, since I may be adding more features to the code to allow for advanced functionality.
*
* PLEASE NOTE THAT THE 'checkboxDot' DIV MUST COME BEFORE ANY OTHER INNER MARKUP.
* IT MUST COME IMMEDIATELY AFTER THE PARENT DIV! IT WILL NOT WORK OTHERWISE!!!
*
* Thank you for showing interest in this code!
*/

/*IMPORTANT STYLES... THE STYLES LATER ARE NOT DIRECTLY RELATED THE THE CHECKBOXES*/

.checkbox {
  background-color: #eee;
  border-radius: 3px;
  padding: 5px;
  display: table;
}
.checkbox input {
  outline: none;
  border: 0;
  background-color: transparent;
  display: inline-block;
  vertical-align: middle;
}
.checkbox .checkboxDot {
  background-color: transparent;
  border: 1px solid #000;
  display: inline-block;
  vertical-align: middle;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  -o-transition: all .5s ease;
  -moz-transition: all .5s ease;
  -webkit-transition: all .5s ease;
  -ms-transition: all .5s ease;
  transition: all .5s ease;
}
.checkbox .checkboxDotActive {
  background-color: #01A1DB;
  border: 1px solid transparent;
  display: inline-block;
  vertical-align: middle;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  -o-transition: all .5s ease;
  -moz-transition: all .5s ease;
  -webkit-transition: all .5s ease;
  -ms-transition: all .5s ease;
  transition: all .5s ease;
}
/*END IMPORTANT STYLES*/

/*START IRRELEVANT STYLES*/

.valueButton {
  margin-top: 10px;
}
/*END IRRELEVANT STYLES*/
```

```
<h1>Javascript, html, and css checkboes -- best browser support ever!</h1>

<h3>Normal checkbox</h3>

<div id="checkboxOne" class="checkbox">
  <div class="checkboxDot"></div>
  <input type="button" value="Item 1">
</div>
<div id="checkboxOneStatus"></div>
<input type="button" class="valueButton" onclick="document.getElementById('checkboxOneStatus').innerHTML = document.getElementById('checkboxOne').getAttribute('name');" value="Is it checked?">

<h3>Checked by default</h3> 
<div id="checkboxTwo" class="checkbox" name="checked">
  <div class="checkboxDot"></div>
  <input type="button" value="Item 2">
</div>
<div id="checkboxTwoStatus"></div>
<input type="button" class="valueButton" onclick="document.getElementById('checkboxTwoStatus').innerHTML = document.getElementById('checkboxTwo').getAttribute('name');" value="Is it checked?">
```

# python - 使用 __import__ 进行动态模块加载有什么影响？

> ID：10726714
> 
> 赞同：1
> 
> 时间：2012-05-23T19:40:29.173
> 
> 标签：python, import

在我的应用程序中，我有：

```
...
folder_a/
    __init__.py
    a.py
    folder_b/
        __init__.py
        b1.py 
        b2.py
        ... 
```

我需要根据一个变量从 动态加载模块，`folder_b`比如. 为此，在 中，我这样做：`a.py``module_from_b``a.py`

```
mymodule = __import__("folder_b.%s" % module_from_b, globals(), locals(), fromlist=["*"]) 
```

由于这将存在于一个循环中，即被多次调用，我想知道它是否对性能有任何影响，或者其他什么？如果是这样，有没有办法在保留动态模块加载能力的同时减轻它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:48:25.017

我从来没有对它进行基准测试，但我相信导入（无论是动态的还是静态的）一个之前已经导入正在运行的解释器（即使是完全不相关的代码）的模块应该非常便宜。它真正要做的应该是一些（成功的）字典查找。

导入一个新模块当然会运行模块中的所有代码，加上文件系统搜索来找到它。

因此，如果您从一组相对较小的模块中重复导入动态选择的模块，那么只要您可以容忍第一次使用每个特定模块时的延迟（多少延迟取决于您的模块）；过了一会儿，几乎所有你要导入的模块都已经被导入了，所以`__import__`调用会变得很便宜。

您可能会考虑另一种设计：如果您需要的总模块集是预先知道的（静态或动态），您可以在循环之前预导入它们以“预热”Python 的导入模块集。如果 b 中没有很多不会使用的模块，您可以导入 b's 中的所有内容`__init__.py`。

这样，导入延迟将在启动时得到解决，您可以`getattr`在 b 包上使用来动态获取您的模块，而不是需要使用`__import__`. 如果您要加载如此多的模块以至于您*想*在循环中分散导入成本，或者如果您有很多模块但只需要相对较少的数量并且很难知道哪些模块在前面，那么这不是一个好的选择时间。

还有另一种可能更好的方法，如果在您确定要导入哪个模块的地方选择一些常量字符串（而不是从配置文件或用户输入中读取的内容），则该方法将起作用。与其将模块的名称向前传递以最终在其他地方导入，为什么不在那里导入模块并将**模块本身**传递给最终在其他地方使用呢？作为一个虚构的例子，因为我不知道你在做什么，而不是：

```
for module_name in ['b1', 'b2', 'b3', 'b4']:
    function_using_module(module_name)

def function_using_module(module_name):
    module = __import__(...)
    ... 
```

你可以这样做：

```
from folder_b import b1, b2, b3, b4

for module in [b1, b2, b3, b4]:
    function_using_module(module)

def function_using_module(module):
    ... 
```

模块和其他任何东西一样都是对象，因此您可以将它们存储在列表或对象中，或者您对名称所做的任何事情中。直接传递模块通常比传递名称作为模块的代理然后导入它们更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T00:04:43.493

它完全没有区别 import 语句`__import__()`在字节码中表示为调用。以下两个是[等价](http://docs.python.org/library/functions.html#__import__)的。

```
import spam
spam = __import__('spam', globals(), locals(), [], -1) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T20:07:30.180

如果您可能会多次执行此操作，为什么不检查该模块是否已存在于您当前的命名空间中，如果不存在则导入它。

```
if 'module_I_need_to_load' not in dir():
    from b import module_I_need_to_load
# Or you can look in vars() instead if you have a
# hell of a lot of modules loaded up as dir is a 
# list and vars is a dictionary which will have a
# faster lookup time when you start having a lot of
# elements
if 'module_I_need_to_load' not in vars():
    from b import module_I_need_to_load 
```

# jsf-2 - primefaces selectOneMenu 在应该时不起作用

> ID：10726716
> 
> 赞同：3
> 
> 时间：2012-05-23T19:40:33.710
> 
> 标签：jsf-2, primefaces, selectonemenu

这个奇怪的问题让我失去了好几天，我仔细检查了所有内容，但我的 selectOneMenu 根本不起作用，我不明白为什么。

所以这是我的代码：

我的jsf

```
<p:selectOneMenu id="entityType"  
      value="#{entityBean.entity.type}" 
      style="width:240px;" 
      converter="entityTypeConverter"
      valueChangeListener="#{entityBean.entityTypeListener}"
      required="true">
      <f:selectItems value="#{entityBean.typeList}"
              var="et"
              itemLabel="#{et.name}"
              itemValue="#{et}" />
</p:selectOneMenu> 
```

我的转换器：

```
 @FacesConverter("entityTypeConverter")
    public class EntityTypeConverter implements Converter {
        public Object getAsObject(FacesContext context, UIComponent component, String value) {
            if (value == null || value.length() == 0) {
                return null;
            }
            Long id = Long.parseLong(value);

            return EntityType.findEntityType(id);
        }

        public String getAsString(FacesContext context, UIComponent component, Object value) {

            return value instanceof EntityType ? ((EntityType) value).getId().toString() : "";
        }
    } 
```

它在我创建时按预期工作（它传递所选值），但是当我尝试编辑实体时，所选类型实际上从未被选中。我尝试使用 primefaces 3.1.1 和 3.2，但在查看/编辑模式下我无法获得选定的值。

我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T02:23:08.827

如果`equals()`您的`EntityType`类的方法丢失或损坏，则可能会发生这种情况。鉴于`id`您的类中有一个属性`EntityType`似乎足以唯一地标识实例，因此以下最小实现应该为您完成：

```
@Override
public boolean equals(Object other) {
    return (other instanceof EntityType) && (id != null)
        ? id.equals(((EntityType) other).id)
        : (other == this);
}

@Override
public int hashCode() {
    return (id != null)
        ? (this.getClass().hashCode() + id.hashCode())
        : super.hashCode();
} 
```

`hashCode()` is just mandatory as per `equals()` [contract](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29).

# php - 如何更新正则表达式以不考虑 or ( | ) 语句中的顺序或如何模拟：

> ID：10726720
> 
> 赞同：1
> 
> 时间：2012-05-23T19:40:46.300
> 
> 标签：php, regex

这个正则表达式

```
(<link\s+)((rel="[Ii]con"\s+)|(rel="[Ss]hortcut [Ii]con"\s+))(href="(.+)")(.+)/> 
```

效劳于

```
<link rel="icon" href="http://passets-cdn.pinterest.com/images/favicon.png" type="image/x-icon" />
<link rel="shortcut icon" href="http://css.nyt.com/images/icons/nyt.ico" />
<link rel="shortcut icon" href="http://cdn.sstatic.net/careers/Img/favicon.ico?36da6b" />
<link rel="Shortcut Icon" href="/favicon.ico" type="image/x-icon" /> 
```

但不适用于切换 href 和 rel 属性的位置：

```
 <link href="/phoenix/favicon.ico" rel="shortcut icon" type="image/x-icon" /> 
```

我怎样才能更新它，以便不订购 or 语句

以便

```
aa || bb 
```

效果一样好

```
bb || aa 
```

在这里测试：

[http://regexpal.com/](http://regexpal.com/)

我只想从 favicon 标签中提取路径...我选择不使用库。

**Stema 的不同形式的回答：**

```
<link\s+
    (
        ?=[^>]*rel="
        (
            ?:[Ss]hortcut\s
        )
        ?[Ii]con"\s+
    )
    (
        ?:[^>]*href="
        (
            .+?
        )"
    ).*
/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T19:47:09.043

你不能，不是用一个正则表达式。好吧，你实际上可以，但它真的不值得，你最终会得到一个不可读的正则表达式。

匹配`/<link\s([^>]+rel="(shortcut\s+)?icon"[^>]*)>/i`，然后将捕获的部分与 匹配`/\shref="([^"]+)"/i`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T19:58:17.470

您可以通过积极的前瞻性来做到这一点

```
<link\s+(?=[^>]*rel="(?:[Ss]hortcut\s)?[Ii]con"\s+)(?:[^>]*href="(.+?)").*/> 
```

[在 Regexr 上](http://regexr.com?31202)查看

您将在第一个捕获组中找到路径。

这里的问题是，前瞻不匹配任何东西。因此，您可以检查标签中的某个位置是否存在`rel="(?:[Ss]hortcut\s)?[Ii]con"`，如果找到此模式，它将匹配该`href`部分并将链接放入捕获组 1。

`(?=[^>]*rel="(?:[Ss]hortcut\s)?[Ii]con"\s+)`这是[积极的前瞻性断言](http://www.regular-expressions.info/lookaround.html)。这由`?=`组开始时的 表示。

`[^>]`是一个否定字符类，它匹配除 . 之外的任何字符`>`。我用它来确保它不会通过`>`标签的关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T19:45:34.833

您可以使用一个正则表达式来定位图标标签，并使用第二个正则表达式来拉取路径。

如果您的第二个正则表达式解析的唯一文本是单个标记，则它可以很简单，`/href="(.+)"/`并且标记内的属性顺序无关紧要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T19:45:31.253

我建议使用 PHP 的[SimpleXML](http://php.net/manual/en/book.simplexml.php)。

```
$html = '<link href="/phoenix/favicon.ico" rel="shortcut icon" type="image/x-icon" />';
$xml = new SimpleXMLElement($html);
echo $xml->attributes()->href; 
```

# backbone.js - 骨干关系：如何放入关系集合和模型？

> ID：10726721
> 
> 赞同：4
> 
> 时间：2012-05-23T19:40:51.643
> 
> 标签：backbone.js, backbone-relational

我有以下情况，我认为处理它的最好方法是使用`Backbone relation`.
如果有其他解决方案，请纠正我。

我有一个系列 (1) 和一个模型 (2)。
收集结果如 (3) 和模型结果如 (4)。

最后，视图应如下所示 (5)。

我的问题是：
1）可以用来`Backbone relation`处理这种情况吗？
2）如果是，我应该如何重写`FeedsCollection`以自动获取所需的数据`UserModel`？

* * *

(1)

```
// FeedsCollection
var FeedsCollection = Backbone.Collection.extend({
    url: "http://localhost/feeds"
}); 
```

* * *

(2)

```
// User Model
var UserModel = Backbone.Model.extend({
    url: "http://localhost/user"
}); 
```

* * *

(3) feedsCollection结果

```
//feedsCollection.toJSON(); 

[
   {id:1, message: "something one", creator_id: 100},
   {id:2, message: "something two", creator_id: 101},
] 
```

* * *

(4) userModel 结果

```
userModel = new UserModel({id: 100});
userModel.fetch();
userModel.toJSON(); // {id:100, name: "jhon"}

userModel = new UserModel({id: 101});
userModel.fetch();
userModel.toJSON(); // {id:101, name: "herry"} 
```

* * *

(5) 最后查看结果应该是这样的：

```
[
    {message: "something one", creator_id: 100, name: "jhon"},
    {message: "something two", creator_id: 101, name: "herry"},
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:28:45.250

您是否考虑过直接从服务器返回用户名。这样 url "/feeds" 就会返回：

```
[
    {message: "something one", creator_id: 100, name: "jhon"},
    {message: "something two", creator_id: 101, name: "herry"},
] 
```

如果您只想在消息附近显示用户名，这似乎是一个简单的解决方案。我不知道你服务器的后端是什么，但我相信这可以有效地完成。

所以回答你的问题：

> 1）可以使用主干关系来处理这种情况吗？

可能你可以使用插件来解决这种情况，但我不建议引入插件来解决这个特定的例子。对我来说，向服务器查询用户模型似乎效率低下，只是为了显示他们的名字。然而，在不同的情况下，这可能是合适的。

无论如何，如果您决定加载带有插件或不带插件的用户模型。您必须提出一些问题才能确定它是否值得：

1.  这将产生多少查询？每个用户一个可能太多了。
2.  如果您通过一个请求加载所有用户模型，服务器将返回多少个用户模型？所有用户可能都太多了。所以你只需要加载需要的。
3.  服务器将返回多少数据？你真的需要所有用户的属性吗？

所以总而言之，我仍然认为您直接从服务器返回用户的名称，并且仅在您需要的不仅仅是名称时才加载特定的用户模型。

# ios - 确定 iPhone 设备中音频处理的延迟

> ID：10726724
> 
> 赞同：1
> 
> 时间：2012-05-23T19:41:03.267
> 
> 标签：ios, audio, playback

我想创建一个应用程序来记录音频，处理它并立即播放（所有 3 都立即发生），但我找不到任何 iOS 设备的硬件规格关于这个问题。事情可能吗？如果是，你建议从哪里开始？最重要的是，我在哪里可以找到这些规格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:50:13.813

查看远程IO。迈克尔·泰森 (Michael Tyson) 写了一系列著名的关于此的文章，请点击此处。.

[http://atastypixel.com/blog/using-remoteio-audio-unit/](http://atastypixel.com/blog/using-remoteio-audio-unit/)

我可以在 iPhone 4S 上将往返延迟（使用[MLS样本测量）降低到 12 毫秒，并在信号路径中进行相当大量的 DSP 处理。](http://en.wikipedia.org/wiki/Maximum_length_sequence)祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:37:28.000

不可能。唯一的低级公共 iOS 音频 API 是基于缓冲区回调的，最小的缓冲区长度为几毫秒，因此总是会产生非零延迟。

# android - 嵌套权重不利于性能

> ID：10726726
> 
> 赞同：2
> 
> 时间：2012-05-23T19:41:15.323
> 
> 标签：android, android-layout

这是我的布局，我收到了底部 2 个按钮的这条消息，即使我只为布局中的另一个小部件设置了权重，它不是按钮的父级（messageText 小部件）。我究竟做错了什么？谢谢。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
<LinearLayout
    android:orientation="horizontal"
    android:layout_marginTop="10dip"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <TextView  
        android:layout_marginLeft="10dip"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:text="@string/status_label"
        android:textStyle="bold"
        android:textSize="20dip"
        android:textColor="#FEFF80"/>
    <TextView  
        android:id="@+id/statusText"
        android:layout_marginLeft="10dip"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:text="@string/unsent"
        android:textSize="20dip"
        android:textColor="#FEFF80"/>
</LinearLayout>
<TextView
    android:layout_width="fill_parent"
    android:layout_marginTop="10dip"
    android:layout_height="1dip"
    android:background="#FEFF80"/>
<TextView  
    android:layout_marginTop="10dip"
    android:layout_marginLeft="11dip"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/message_number_caption"
    android:textSize="15dip"/>
<EditText
    android:id="@+id/messageNumber"
    android:inputType="phone"
    android:layout_marginTop="10dip"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="10dip"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"/>
<TextView  
    android:layout_marginTop="30dip"
    android:layout_marginLeft="11dip"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/message_text_caption"
    android:textSize="15dip"/>
<EditText android:inputType="text"
    android:id="@+id/messageText"
    android:layout_marginTop="10dip"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="10dip"
    android:layout_weight="1.0"
    android:layout_width="fill_parent" 
    android:layout_height="0dip"/>
<LinearLayout
    android:orientation="horizontal"
    android:layout_marginTop="10dip"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <Button
        android:id="@+id/sendButton"
        android:layout_marginLeft="10dip"
        android:layout_marginRight="10dip"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.5" 
        android:text="@string/send_button_label"
        android:textSize="15dip"/>
    <Button
        android:id="@+id/resetButton"
        android:layout_marginLeft="10dip"
        android:layout_marginRight="10dip"
        android:layout_width="0dip" 
        android:layout_height="wrap_content" 
        android:layout_weight="0.5"
        android:text="@string/reset_button_label"
        android:textSize="15dip"/>
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:03:59.037

你没有做错任何事，它只是一个警告。Android 视图引擎解释您的 XML 并构建视图对象。Google 决定在一个布局内嵌套权重（即具有`android:layout_weight`属性的视图），在另一个布局内会导致视图引擎性能不佳，他们建议您不要这样做。

如果有另一种方法可以在不使用`andorid:layout_weight`属性的情况下实现您正在构建的布局，那么最好这样做。否则，您的视图可能会加载缓慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T19:59:56.700

您指定了一个权重为 1 的编辑文本 (@+id/messageText) - 您的意思是这样做是因为该线性布局中的其他小部件没有权重吗？

然后在下面，您有一个线性布局，其中包含两个合法使用权重的按钮。

注意这是一个非常简单的布局，所以你可能没问题。如果您的层次结构更深，布局和小部件更多，那么您更有可能看到速度变慢。

# sql-server - 如何从字符串创建 t-sql

> ID：10726727
> 
> 赞同：0
> 
> 时间：2012-05-23T19:41:18.250
> 
> 标签：sql-server, tsql, sql-server-2000

我有一个这样声明的字符串变量：

```
declare @myGeniuses as nvarchar(8000);
set @myGeniuses = ' in (1,2,3)'; 
```

我想在 select 语句中应用我的变量，如下所示：

```
select * from GENIUSES where GeniusId @myGeniuses 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:43:35.667

```
declare @t nvarchar(max)
set @t='select * from GENIUSES where GeniusId'+ @myGeniuses

exec @t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:44:25.493

你会做...

```
exec ('select * from GENIUSES where GeniusId' + @myGeniuses) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T19:44:51.800

您将需要使用 sp_executesql 来实现该结果，这使您可以将查询语句作为字符串传递并执行它。

有关更多详细信息，请参见：http: [//msdn.microsoft.com/en-us/library/ms188001.aspx](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

示例用法：

```
DECLARE @sql AS NVARCHAR(MAX); 
DECLARE @filter AS NVARCHAR(500); 
SET @filter = ' in (1,2,3)'; 
SET @sql = 'select * from GENIUSES where GeniusId' + @filter; 
EXECUTE sp_executesql @sql; 
```

# jquery-mobile - jquery mobile中的可折叠内容

> ID：10726731
> 
> 赞同：3
> 
> 时间：2012-05-23T19:41:31.487
> 
> 标签：jquery-mobile

我在具有列表视图的页面顶部有一个简单的可折叠内容元素。html 工作正常。

我的问题是，如果用户打开可折叠块，我希望它在用户离开或返回页面时自动关闭。可折叠块始终保持用户离开它的状态——打开。我不知道如何关闭它。我已经搜索了几天，但找不到确切的场景。我发现的大多数解决方案都处理页面的动态加载，它们对于我来说有点太高级了，无法理解。

我知道这可能是一件简单的事情，但我对 jquery mobile 还是很陌生。我不知道如何将代码绑定到 html 元素或将其放置在哪里，所以请用一些小步骤来帮助我。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T20:42:06.460

嗨，在我的 jqm Web 应用程序中，我以编程方式关闭可折叠块，如下所示：

$('.ui-collapsible').trigger('collapse');

您应该像这样绑定 pageshow 事件：

```
$('#your_page_id').bind('pageshow', function(){

            $('.ui-collapsible').trigger('collapse');

       }); 
```

例如你可以试试这个[jsFiddle](http://jsfiddle.net/CjwtD/ "jsFiddle")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T17:03:15.943

这适用于 jQM 1.4：

```
$('#yourdivId').collapsible('collapse'); 
```

可以这样做：

```
$(document).on("pageshow", "#yourpageId", function () {
  $('#yourdivId').collapsible('collapse');
}) 
```

# c# - 如何从外部设置 DataGrid 的 DataSource？

> ID：10726734
> 
> 赞同：0
> 
> 时间：2012-05-23T19:41:45.863
> 
> 标签：c#, wpf, wpf-controls

我正在 WPF 中开发一个控件，我的控件包含一些其他 WPF 控件，例如标签、按钮和一个 DataGrid。所以，我一直在尝试做的是创建一个依赖属性，允许我从容器控件外部获取我的 dataGrid 的 DataSource。

到目前为止，我有这个代码：

```
public static readonly DependencyProperty dataSourceProperty = DependencyProperty.Register(
                                                                            "DataSource",
                                                                            typeof(object),
                                                                            typeof(MyCustomControl));
    public object DataSource
    {
        get
        {
            return (object)GetValue(dataSourceProperty);
        }
        set
        {
            SetValue(dataSourceProperty, value);
        }
    } 
```

但我不知道我必须在哪里编写这段代码：

```
 myDataGrid.ItemsSource = DataSource; 
```

我的意思是，我需要的是，在我的 xaml 文件中，能够做到这一点：

```
<MyCustomControl Name="MyControl" DataSource={Binding MyData}/> 
```

我希望你能帮助我。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:02:54.013

假设当前表单的 datacontext 有一个属性 MyData，你只需要以下内容：

```
<MyCustomControl Name="MyControl" DataContext={Binding MyData}/> 
```

在您的自定义控件中，您可以使用以下方法绑定到 MyData：

```
<DataGrid ItemsSource = "{Binding}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:40:29.270

经过几个小时的研究，我找到了解决问题的方法：

因为我需要从容器控件访问嵌套控件依赖属性，所以我这样做了：

```
public static readonly DependencyProperty itemsSourceProperty = ItemsControl.ItemsSourceProperty.AddOwner(
                                                                        typeof(MyCustomControl), 
                                                                        new FrameworkPropertyMetadata(
                                                                            ItemsSourcePropertyChangedCallback));

    public System.Collections.IEnumerable ItemsSource
    {
        get
        { return (System.Collections.IEnumerable)GetValue(itemsSourceProperty); }

        set
        { SetValue(itemsSourceProperty, value); }
    }

    private static void ItemsSourcePropertyChangedCallback(DependencyObject controlInstance, DependencyPropertyChangedEventArgs args)
    {
        MyCustomControlraceUIGridControlInstance = (MyCustomControl)controlInstance;  
        raceUIGridControlInstance.extendedDataGrid.ItemsSource = (System.Collections.IEnumerable)args.NewValue;            
    } 
```

之后，您可以在 XAML 中编写：

```
<MyCustomControl Name=mycustomControl ItemsSource="{Binding YourData}" /> 
```

您可以使用任何嵌套控件依赖项属性来执行此操作。

# html - 如何在 Tumblr 帖子中居中对齐分享按钮

> ID：10726735
> 
> 赞同：1
> 
> 时间：2012-05-23T19:41:47.807
> 
> 标签：html, tumblr

我正在尝试将 twitter 分享和 facebook 分享按钮居中对齐，以使其与布局设计的其余部分保持一致，但我不知道该怎么做。我的主题是来自 Tumblr 的 Eames 主题。我想让它们彼此相邻，居中对齐。谢谢你的帮助！

www.alysonk.com

这是我的编码。

```
<a href="https://twitter.com/share" class="twitter-share-button" data-url="{Permalink}" data-text="      {PhotoAlt}" data-via="alysonkdotcom">Tweet</a>
<script>
    !function(d,s,id){
        var js,fjs=d.getElementsByTagName(s)[0];
        if(!d.getElementById(id)){
            js=d.createElement(s);
            js.id=id;
            js.src="//platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);
        }
    }(document,"script","twitter-wjs");
</script>
<fb:like send="false" layout="button_count" width="450" show_faces="false" font="verdana"></fb:like> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:58:32.290

我不确定你到底要什么，但通常你可以这样：http: [//jsfiddle.net/k2cks/](http://jsfiddle.net/k2cks/)

对于那些在不去 jsfiddle 的情况下寻找答案的人：

```
<div style="text-align:center;">
    <a href="#">Tweet</a> <a href="#">Like</a>
</div>​ 
```

基本上，在它周围放一个 div 并使用 . 使文本与中心对齐`text-align:center;`。这是你要找的吗？你能澄清一下吗？

**编辑：**另一个 jsfiddle，其示例类似于您需要的示例：http: [//jsfiddle.net/k2cks/1/](http://jsfiddle.net/k2cks/1/)您可能还必须使元素`display:inline;`也位于同一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T22:10:47.570

你可以：

在链接周围加上 a`div`并给链接一个`display:inline;`样式，

```
<div style="text-align:center;">
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="{Permalink}" data-text="      {PhotoAlt}" data-via="alysonkdotcom">Tweet</a>
    <script>
        !function(d,s,id){
            var js,fjs=d.getElementsByTagName(s)[0];
            if(!d.getElementById(id)){
            js=d.createElement(s);
            js.id=id;
            js.src="//platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);
        }
        }(document,"script","twitter-wjs");
    </script>
    <fb:like send="false" layout="button_count" width="450" show_faces="false" font="verdana"></fb:like>
</div> 
```

或者

（更复杂和迂回，但可能有帮助）

尝试将它们放在`div`标签内并为其设置样式，`margin:0 auto 0 auto;width:INSERT WIDTH HERE;`然后使用`float:left;`.

您还可以通过提供`div`背景颜色来使其在视觉上更有帮助。然后你可以稍后把它取下来。

```
<div style="margin:0 auto 0 auto; width:INSERT WIDTH HERE;">
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="{Permalink}" data-text="      {PhotoAlt}" data-via="alysonkdotcom" style="float:left;">Tweet</a>
    <script>
        !function(d,s,id){
            var js,fjs=d.getElementsByTagName(s)[0];
            if(!d.getElementById(id)){
            js=d.createElement(s);
            js.id=id;
            js.src="//platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);
        }
        }(document,"script","twitter-wjs");
    </script>
    <fb:like send="false" layout="button_count" width="450" show_faces="false" font="verdana" style="float:left;"></fb:like>
</div> 
```

**回答更新：** 我认为这可能是 tubmlr 的样式问题...您可能无法修复它...您也可以尝试为这些元素中的每一个赋予相对位置并移动它们直到它起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-05T10:13:51.477

它非常简单地将您的代码放入`div`标签中`align="center"`

```
<div align="center">

"Your code mentioned above"

</div> 
```

你可以访问[我的不倒翁](http://murreepakistan.tumblr.com)查看 addthis 与对齐中心。

# ruby-on-rails - 将来自索引页面的请求放入 Rails

> ID：10726736
> 
> 赞同：0
> 
> 时间：2012-05-23T19:41:48.087
> 
> 标签：ruby-on-rails

我正在制作一个有一堆照片的网站，每张照片下面都有一个按钮，上面写着 Upvote。我希望该按钮提交更新数据库中的字段的 PUT 请求。我目前有这个代码：

```
<% @users.each do |user| %>
    <%= image_tag user.avatar.url(:thumb) %>
    <% form_for (@user) do |f| %>
    <input name="commit" type="submit" value="Upvote">
    <% end %>
<% end %> 
```

我希望它在用户单击 upvote 按钮时调用 PUT 请求，更新值，然后重定向到同一页面。我无法弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:48:40.733

首先你的代码是错误的：替换`form_for(@user)`为`form_for(user)`

其次，由于`user`对象已经存在，它将默认为`PUT`. 所以你无事可做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:50:06.210

如果你想给一个用户投票（不是图片？）然后把它放在你的 user_controller.rb 文件中：

```
def upvote
  @user = User.find(params[:user])
  @user.upvote
end 
```

在你的 app/models/user.rb

```
def upvote
  self.votes += 1
  self.save
end 
```

在你的 config/routes.rb

```
resources :user do
  put :upvote
end 
```

未经测试，但应该给你一个起点。

# android - Android - 带小数点分隔符的数字键盘

> ID：10726746
> 
> 赞同：3
> 
> 时间：2012-05-23T19:42:44.360
> 
> 标签：android, decimal, android-softkeyboard, numeric

我有一个以编程方式创建的edittext（所以不是在xml中），我想在用户按下它时启动一个数字键盘。问题是我希望这个键盘也包含小数分隔符 (.)。

我尝试了很多东西，但似乎没有任何效果

最终的 EditText 输入 = new EditText(this);

input.setKeyListener(new DigitsKeyListener()); // 这给出了没有小数点分隔符的数字 input.setInputType(InputType.TYPE_CLASS_NUMBER); // 这给出了没有小数点分隔符的数字 input.setInputType(InputType.TYPE_CLASS_PHONE);// 这给出了第二页中所有数字和小数点分隔符的电话键盘。这不是我想要的

我知道有一种方法可以实现自定义键盘：

[http://android-developers.blogspot.com/2009/04/creating-input-method.html](http://android-developers.blogspot.com/2009/04/creating-input-method.html)

[http://developer.android.com/resources/samples/SoftKeyboard/index.html](http://developer.android.com/resources/samples/SoftKeyboard/index.html)

但这似乎很痛苦，我首先在寻找更快的替代方案。

我想要的只是以下之一： 1\. 启动包含小数点分隔符的数字键盘 2\. 启动标准键盘，但在数字“页面”中设置 以上可能吗？先感谢您！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-30T13:10:03.967

我已经使用以下代码显示了键盘：

```
 // Set an EditText view to get user input
    final EditText input = new EditText(this);
    alert.setView(input);
    input.setInputType((InputType.TYPE_CLASS_NUMBER + InputType.TYPE_NUMBER_FLAG_DECIMAL)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T19:53:32.303

您所描述的内容没有键盘，至少没有您可以作为普通输入类型获得的键盘。即使您制作了自定义键盘，这也不是处理此问题的好方法，因为用户每次想要使用您的应用程序时都必须切换键盘。

此外，您无法在“数字页面”上明确打开文本键盘，因为并非所有 Android 键盘甚至都有单独的数字页面。这是在每台设备上高度定制的。

我的第一个建议是使用普通的文本键盘，让用户决定哪种键盘最适合。

我的第二个建议是使用您需要的特定键的按钮/视图在屏幕上构建一个数字键盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T19:56:35.550

就这样吧。

```
if (editText.getText().matches("^[0-9]+(\.[0-9]{1,2})?$")) {
            System.out.println("It is decimal number");
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-18T12:04:01.197

```
new DigitsKeyListener(false, true) 
```

将给出一个十进制输入键盘

# wordpress - 在 Wordpress 上使用自定义后置类型过滤类别

> ID：10726760
> 
> 赞同：0
> 
> 时间：2012-05-23T19:43:51.800
> 
> 标签：wordpress, custom-post-type

我在一个找不到任何解决方案的问题上被困了几个小时……事情是这样的：

我在 worpress 上注册了 4 个自定义帖子类型，它们都使用我之前配置的相同类别。这些帖子类型没有自定义类别。首先，我想列出这些类别，但它必须链接到其页面中引用的自定义帖子类型。

例如：Page-Blog -> 类别列表在该帖子类型（在本例中为博客）上指向该类别的帖子的链接。

我不知道你是否明白我想要什么，但我已经在很多网站上浏览过网络，寻找一种我什至不知道是否有可能拥有的解决方案......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:52:08.407

试试这个插件[http://wordpress.org/extend/plugins/cat-post-type/](http://wordpress.org/extend/plugins/cat-post-type/)，它可以解决你的问题

您可以按类别和标签选择自定义帖子类型

# c# - 如何使用 azure、wcf、asp.net 和 json 创建应用程序

> ID：10726761
> 
> 赞同：2
> 
> 时间：2012-05-23T19:43:53.640
> 
> 标签：c#, asp.net, json, wcf, azure

我对 azure、wcf、asp.net 和 json 还很陌生。我有使用 WPF 的经验。

我想在 Azure 云上创建一个服务。对这项服务有一些要求：

**Authentication/ASP.net/Session：** 当应用程序（例如 WPF 应用程序、WP app/whatever）希望使用该服务时，它必须进行身份验证 - 并在会话的其余部分进行身份验证。身份验证是使用 windows live id 完成的（我想这就是 asp.net 的来源？）。

**WCF：**我想使用 WCF 服务来公开方法。如何在用户登录之前“隐藏”世界的 WCF 服务？

**Json：**因为我想将它用于（希望将来）WPF 应用程序、WP 应用程序、android 应用程序、iphone 应用程序等。我想使用 Json。

**Azure：**我想在 azure 上托管 i all。

首先，我只想使用以下内容创建一个 wpf 应用程序：

1.  用户登录/注册
2.  asp.net/wcf 验证并启动会话。（我不知道如何认证）
3.  用户编写一个字符串并将其与 json/http 一起传递给 WCF 服务（http 暂时可以，除非 https 在验证时更容易）
4.  WCF 服务返回 "Hello from azure:" + 用户写的字符串

我对建议和想法持开放态度。

我需要帮助的是教程、演练、示例、指导等，以帮助我开始这个项目。我浏览了一些教程、示例等，但总是缺少组件。

有人可以指出我正确的方向/提供一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:48:51.663

我建议阅读一些[Windows Azure 教程](http://www.windowsazure.com/en-us/develop/net/tutorials/web-app-with-sql-azure/)。主要的 .NET Web App 教程（链接）向您展示了如何处理 1 和 2，[多层应用程序教程](http://www.windowsazure.com/en-us/develop/net/tutorials/multi-tier-application/)很好地涵盖了 3 和 4（尽管我不相信使用 JSON）。一旦你理解了这一点，它应该很容易适应你的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:55:19.487

这是我对如何开始的看法：

**Authentication/ASP.net/Session：** - 使用 Azure，您可以使用 ACS 使用基于 OpenID 的身份验证，[因此](http://acs.codeplex.com/)请在这方面使用 ACS。对于 ASP.NET 会话特定要求，您可以使用[Windows Azure 缓存](http://msdn.microsoft.com/en-us/library/windowsazure/gg278356.aspx)，这对于此类场景来说是最佳且经济高效的。

**WCF**：好的场景，您可以使用 ASP.NET（和/或 MVCx）Web 角色让用户访问您的站点，然后使用 OpenID 对他们进行身份验证，一旦身份验证，您就可以让他们访问 WCF 端点或者您希望通过设置这个在您的[ACS 配置](https://www.windowsazure.com/en-us/develop/net/how-to-guides/access-control/)中。

**JSON**：您当然可以[在 ASP.NET 中使用 JSON](http://pozitive.net/2011/02/11/json-asp-net-mvc-and-jquery-working-with-untyped-json-made-easy/)。您可以使用 jQuery 来控制 UI，然后让它通过 AJAX/JSON 调用命令。它还允许您使用新内容更新页面，而无需刷新页面。可以有更多的方式来使用它。

**Windows Azure: : 现在确定您对**[Windows Azure](https://www.windowsazure.com/en-us/develop/net/fundamentals/intro-to-windows-azure/)了解多少，但您应该具备 SDK、部署过程等的基本知识。

最后，您可以尝试以下方法：

1.  用户登录/注册 > **ASP.NET MVC Web 角色**
2.  asp.net/wcf 验证并启动会话。>>**将 ACS 与 OpenID 一起使用**
3.  用户编写一个字符串并将其与 json/http 一起传递给 WCF 服务 >**有一个用于[在网页上输入字符串](http://msdn.microsoft.com/en-us/library/windowsazure/gg651126)的接口，并通过 HTTP 或 HTTPS 将其传递给 WCF，具体取决于您的绑定方式）**
4.  [WCF 服务返回](http://msdn.microsoft.com/en-us/library/windowsazure/gg651130)" Hello from azure:" + 用户写的字符串

希望这可以帮助！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T23:19:14.963

[关于会话状态：正如我在这个](https://stackoverflow.com/a/5839382/272109)StackOverflow 答案中提到的，您有多种选择。@Avkash 指出了一种选择，即使用 Windows Azure 缓存。您需要注意，作为多租户服务的缓存对您的缓存消耗具有特定的每小时限制。根据用户需求/负载，您可能会超过每小时配额并且在下一小时之前无法访问缓存（这意味着您需要计划拥有比最初需要的更大的缓存）。有关缓存和相关配额的更多信息，请[点击此处](http://msdn.microsoft.com/en-us/library/windowsazure/hh697522.aspx)。请注意，128MB 缓存的起价为 45 美元。

您还可以通过 SQL Azure 管理会话状态。这没有交易配额，100MB 的起价为 4.99 美元。请参阅 Nate Totten 的关于使用 SQL Azure 获取会话状态的[博客文章。](http://blog.ntotten.com/2011/08/03/windows-azure-tools-1-4-released/)

# android - 将 android 上的音频转换为 mp3 或 AAC

> ID：10726762
> 
> 赞同：5
> 
> 时间：2012-05-23T19:43:55.930
> 
> 标签：android, audio, mp3, aac

我正在从麦克风录制音频并将其保存为 .mp4 - 它是 AMR 格式。如何将此音频转换为 mp3 或 AAC？我看到了[这篇](https://stackoverflow.com/questions/3641920/how-to-encode-a-wav-to-a-mp3-on-a-android-device/)文章，但我不明白 - 我是 android 新手。

是否有一些适用于 mp3 的简单的 android 库？我用谷歌搜索了一整天，什么也没找到。也许一些好人可以在这篇文章中解释并给出完整的例子，数百人将不胜感激！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:54:08.697

您可能可以使用[http://www.javazoom.net/mp3spi/mp3spi.html](http://www.javazoom.net/mp3spi/mp3spi.html)来做到这一点。我不确定您在哪里寻求帮助，但 StackOverflow 上有大量关于此的文章。您不必只搜索 android 的东西。你正在使用java。

例如： [对 Java 的 MP3/声音库有什么好的建议吗？](https://stackoverflow.com/questions/86083/any-good-recommendations-for-mp3-sound-libraries-for-java)

[Java 中的 MP3 编码](https://stackoverflow.com/questions/316612/mp3-encoding-in-java)

[http://openinnowhere.sourceforge.net/lameonj/](http://openinnowhere.sourceforge.net/lameonj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-10T14:08:16.567

你能避免录制到 AMR（有损格式），而是录制原始 PCM 样本吗？然后将这些 PCM 样本直接发送到 AAC 或 MP3 编码器将为您提供更好的质量。先做 AMR 然后做 AAC 会丢失两次信息。

# java - 在电子邮件中发送交互式表单

> ID：10726764
> 
> 赞同：2
> 
> 时间：2012-05-23T19:44:00.830
> 
> 标签：java, php, .net, email

是否可以在电子邮件中发送任何表格，哪个收件人可以填写并按 Enter 提交表格？

最好我们正在寻找 Outlook 客户，因此表单必须在 Outlook 电子邮件中打开，并且可以通过电子邮件或表单提交来回复。

表单将包含 5-6 个字段，例如输入、选择、单选？

最后一个选项将是托管云服务器来查看电子邮件中的 html 表单并将其提交到云服务器？这行得通吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:47:32.307

最简洁的答案是不。大多数电子邮件客户端（包括 Outlook）禁用电子邮件中的表单作为安全措施。最好的解决方案是在电子邮件中添加一个链接（文本、图像等），以打开包含表单的网页。

# ruby-on-rails - 一行我不理解的 Ruby 代码给了我一个批量赋值错误

> ID：10726765
> 
> 赞同：0
> 
> 时间：2012-05-23T19:44:01.170
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我目前正在阅读 Rails 3 In Action。这本书创建了一个应用程序，可以在其中创建项目，并且可以为每个项目创建票证。它创建了 3 个模型：

项目：

```
 class Project < ActiveRecord::Base
      attr_accessible :name
      validates :name, presence: true
      has_many :tickets, :dependent => :destroy
    end 
```

票：

```
 class Ticket < ActiveRecord::Base
      belongs_to :project
      belongs_to :user
      attr_accessible :description, :title
      validates :title, presence: true
      validates :description, presence: true, :length => { :minimum => 10 }
    end 
```

和用户：

```
 class User < ActiveRecord::Base
      devise :database_authenticatable, :registerable, :confirmable,
             :recoverable, :rememberable, :trackable, :validatable
      attr_accessible :email, :password, :password_confirmation, :remember_me
    end 
```

现在，当我将以下行添加到 ticket_controller 中的创建操作时：

```
 @ticket = @project.tickets.build(params[:ticket].merge!(:user => current_user)) 
```

我得到这个错误`Can't mass-assign protected attributes: user`。现在我真的不明白什么是合并！正在做什么以及为什么 :user 被传入或为什么我收到错误。我知道通常我必须将 mass-assignment 属性包含到 attr_accessible: 方法中。但是这次属性是一个类，所以我不知道如何处理。

帮助，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:47:28.803

将此添加到您的 Ticket 模型中应该可以工作。您必须指定要在单个表单中使用的嵌套属性。

```
attr_accessible :description, :title, :user     
accepts_nested_attributes_for :questions 
```

[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T21:11:54.100

```
@ticket = @project.tickets.build(params[:ticket])
@ticket.user = current_user 
```

除非有理由需要在一行中使用它？在这种情况下可能

```
@ticket = @project.tickets.build(params[:ticket].merge!(:user_id => current_user.id)) 
```

# xpath - xpath 来选择在列中有几个特定值的 tr

> ID：10726768
> 
> 赞同：4
> 
> 时间：2012-05-23T19:44:09.287
> 
> 标签：xpath

我有一个包含多行的表，我正在尝试使用 xpath 来查找每一列中包含特定值的行。例如，我希望“foo”在第 1 列，“bar”在第 2 列，“baz”在第 3 列。

我可以使用什么 xpath 来获取包含这些特定列中这三个特定值的行？

例如，给定下表，我希望能够只取回在其预期列中具有三个预期值的一行

```
<table>
  <tr><td>foo</td><td>bar</td><td>xxx</td></tr>
  <tr><td>xxx</td><td>bar</td><td>baz</td></tr>
  <tr><td>foo</td><td>bar</td><td>baz</td></tr>
  <tr><td>bar</td><td>baz</td><td>foo</td></tr>
  <tr><td>foo</td><td>xxx</td><td>baz</td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-23T19:58:09.397

这可以解决问题（假设`table`元素是当前上下文节点）：

```
 tr[(td[1] = 'foo') and (td[2] = 'bar') and (td[3] = 'baz')] 
```

`td[1]`选择第一个`td`孩子、`td[2]`第二个孩子等。然后将条件与`and`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T20:04:10.703

这也可以解决问题......我相信有更快的方法来获得你想要的东西，但不使用 xpath ..

//tr[td[1][text()='foo'] and td[2][text()='bar'] and td[3][text()='baz']]

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T19:48:14.297

您可以`directorypath\[name="value"]\...`在搜索时使用

# php - 基本 PHP：在命令中使用变量

> ID：10726785
> 
> 赞同：1
> 
> 时间：2012-05-23T19:45:26.883
> 
> 标签：php

我对 PHP 很陌生，我在 WordPress 中工作，但我不认为这个问题是 WordPress 特有的。基本上，我运行了一个返回一些数字的 MySQL 查询。在 WordPress 中，您可以使用名为 wp_list_pages() 的函数来准确说明您想要包含哪些页面，如下所示：

```
 wp_list_pages('include=161,164,167,171,172,173,174,185,188,135,141,&title_li='); 
```

三位数字都是邮政ID。我想做的是以编程方式生成这些数字，而不是硬编码它们。所以，我使用以下内容：

```
 $results = $wpdb->get_results("SELECT * FROM [table] WHERE [column] LIKE [string] ");
foreach($results as $returned_id) {$pagelist.=$returned_id->post_id.",";} 
```

这很好用（括号中的所有内容都替换为实际信息）。它基本上只是在与我的 SQL 查询匹配的数字的 $pagelist 变量中创建一个列表。如果我要运行“echo $results”，输出将是“161,164,167...”等，这是硬编码版本的确切列表。

我现在想用编程版本替换硬编码版本 - 我想它应该是这样的

```
wp_list_pages('include=$pagelist'); 
```

但这不起作用。我想将该示例中的 $pagelist 替换为该变量的内容。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T19:47:24.073

**选项1**

如果要评估变量，则需要使用双引号。

```
wp_list_pages("include=$pagelist") 
```

或者

```
wp_list_pages("include={$pagelist}") 
```

**选项 2**

使用字符串连接

```
wp_list_pages('include=' . $pagelist); 
```

**选项 3**

采用[`sprintf`](http://php.net/manual/en/function.sprintf.php)

```
wp_list_pages(sprintf('include=%s',$pagelist)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:47:14.223

在 PHP 中，变量只在双引号中查找，而不是您发现的。所以使用 " 而不是 '

```
wp_list_pages("include=$pagelist"); 
```

您可以做的另一件事是将变量与带有 . 像这样：

```
wp_list_pages('include='.$pagelist); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T19:47:47.220

你试过了吗：

```
wp_list_pages('include=' . $pagelist); 
```

或者

```
wp_list_pages("include={$pagelist}"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T19:47:52.310

要引用字符串中的变量，您需要使用双引号。

# objective-c - 将 XML 存储解析为 NSArray

> ID：10726793
> 
> 赞同：0
> 
> 时间：2012-05-23T19:45:52.907
> 
> 标签：objective-c, ios, xml, cocoa-touch, nsarray

我正在尝试解析 XML 并将 XML 的一个元素中的 URL 存储到 NSArray 中。到目前为止，这是我的代码：

```
 NSURL *url = [NSURL URLWithString:@"http://www.316apps.com/LakesideDocs/podcasttrial.xml"];

   NSData *xmlData = [[NSMutableData alloc] initWithContentsOfURL:url];
   NSError *error;
   GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:xmlData 
                                                          options:0 error:&error];

   NSArray *channels = [doc.rootElement elementsForName:@"channel"];
   for (GDataXMLElement *channel in channels) {            

       NSArray *items = [channel elementsForName:@"item"];
       for (GDataXMLElement *item in items) {

           NSString *articlePoint = [item valueForChild:@"link"];
           NSArray *linkarray = [[NSArray alloc] initWithObjects:articlePoint, nil];

           NSLog(@"%@", linkarray);

       }

   } 
```

对于 NSLog 我希望：

```
TabBarSample[40191:fb03] (
    (
    "http://domain.com/image1.jpg"
 ),
(
"http://domain.com/image2.jpg"
)
) 
```

但我得到：

```
TabBarSample[40191:fb03] (
"http://domain.com/image1.jpg"
)
TabBarSample[40191:fb03] (
"http://domain.com/image2.jpg"
) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:51:50.790

每个循环都创建一个新数组：

```
 NSArray *linkarray = [[NSArray alloc] initWithObjects:articlePoint, nil]; 
```

相反，您希望在 llop 之外有一个 NSMutableArray 并在每个循环期间添加一个对象

```
 NSMutableArray *linkarray = [NSMutableArray array];
   NSArray *items = [channel elementsForName:@"item"];
   for (GDataXMLElement *item in items) {

       NSString *articlePoint = [item valueForChild:@"link"];
       [linkarray addObject:articlePoint];

       NSLog(@"%@", linkarray);

   } 
```

如果增加的数组让您感到困惑，您应该将 NSLog 放在 for 循环之后：

```
 NSMutableArray *linkarray = [NSMutableArray array];
   NSArray *items = [channel elementsForName:@"item"];
   for (GDataXMLElement *item in items) {

       NSString *articlePoint = [item valueForChild:@"link"];
       [linkarray addObject:articlePoint];
   }

   NSLog(@"%@", linkarray);
   NSLog(@"count: %d", [linkarray count]); 
```

# c# - 出生日期自定义范围数据注释不起作用（打破页面）

> ID：10726801
> 
> 赞同：0
> 
> 时间：2012-05-23T19:47:01.733
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2, data-annotations

我有一个自定义数据注释验证器来验证出生日期是否在从今天起 150 年之间。

这是我的自定义数据注释：

```
public class DateOfBirthRange : RangeAttribute
{
    public DateOfBirthRange()
        : base(typeof(DateTime), DateTime.Now.AddYears(-150).ToShortDateString(), DateTime.Now.ToShortDateString()) { }
} 
```

像这样使用它：

```
[Required(ErrorMessage = "BirthDate is required.")]
[DisplayName("Birth Date")]
[DateOfBirthRange(ErrorMessage = "BirthDate must be between {1:M/d/yyyy} and {2:M/d/yyyy}")]
public DateTime BirthDate { get; set; } 
```

这是一个非常奇怪的问题，因为我返回的错误与数据注释无关。在我看来，这会导致错误：

```
<%: Html.DropDownListFor(m => m.JuniorSenior, (IEnumerable<SelectListItem>)ViewData["seniority"], new { @class = "input-small" })%> 
```

`**ERROR:** The ViewData item that has the key 'JuniorSenior' is of type 'System.String' but must be of type 'IEnumerable'.`

这个错误很奇怪，因为那部分代码工作得很好。**同样奇怪的是，仅当输入的日期在距今天 150 年之前时才会发生此错误。** 因此，仅当出生日期验证失败时才会发生该错误。在调试时，我注意到一旦我删除了自定义数据注释，一切正常并且没有遇到错误。

`**So that leads me to assume the problem is in my data annotation.**`

这是我的控制器代码，以防你想看看我想要做什么。

```
[HttpPost]
        public ActionResult Save(PatientModel patModel, FormCollection values)
        {
            // remove white space form text box fields
            patModel.FirstName = values["FirstName"].Trim();
            patModel.LastName = values["LastName"].Trim();
            patModel.Initials = values["Initials"].Trim();
            patModel.StreetAddress1 = values["StreetAddress1"].Trim();
            patModel.StreetAddress2 = values["StreetAddress2"].Trim();
            patModel.PostalCode = values["PostalCode"].Trim();

            if (ModelState.IsValid)
            {
                try
                {
                    // Pull the long form of the gender into the model.
                    if (!String.IsNullOrEmpty(values["genders"]))
                    {
                        patModel.Gender = values["genders"];
                    }
                    // Profile is valid, save it.
                    if (_Service.SaveProfile(Session["username"].ToString(), Session["password"].ToString(), patModel))
                        ViewData["SaveProfile"] = true;
                    else
                        ViewData["SaveProfile"] = false;
                }
                catch (Exception ex)
                {
                    logger.Error("Function Name: Save  Message: " + ex.Message + "");
                }
            }
            IntializeSelectLists(patModel);
            if (patModel.Title == "Select")
                patModel.Title = "";
            if (patModel.JuniorSenior == "Select")
                patModel.JuniorSenior = "";
            return View("Index", patModel);
        } 
```

我的 IntializeSelectLists 函数：

```
public void IntializeSelectLists(PatientModel pm)
        {
            seniority = new[] { "Select", "Jr.", "Sr." };
            List<SelectListItem> JuniorSenior = new List<SelectListItem>();
            foreach (string item in seniority)
            {
                SelectListItem alb = new SelectListItem { Text = item, Value = item };
                JuniorSenior.Add(alb);
            }
            ViewData["seniority"] = JuniorSenior;
        } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:47:37.090

在撞了我的头之后，我终于发现了问题所在。

在我`IntializeSelectLists()`的列表之前，我正在填充性别`JuniorSenior`列表。事实证明，`pm.Gender`返回 null 并因此导致异常。

它崩溃的原因`m.JuniorSenior`是因为我在`m.Gender`. 所以`m.JuniorSenior`总是 null 因为代码没有到达填充`m.JuniorSenior`.

```
patModel.Gender = values["genders"].Trim(); 
```

我通过在我的`Save()`.

感谢所有花时间帮助我的人:)

# google-apps-script - Google Docs 电子表格（应用程序脚本）：在电子表格之间复制数据而不重复

> ID：10726806
> 
> 赞同：2
> 
> 时间：2012-05-23T19:47:28.257
> 
> 标签：google-apps-script

我在 Google Docs for Spreadsheets（应用程序脚本）中构建了一段代码，用于将记录从一个电子表格传输到另一个电子表格。

```
function myFunction() {
    // Get Spreadsheets
    var source = SpreadsheetApp.openById("spreadsheetKeySource");
    var target = SpreadsheetApp.openById("spreadsheetKeyTarget");

    // Set Sheets
    var source_sheet = source.getSheetByName("Sheet1");
    var target_sheet = target.getSheetByName("Sheet1");

    // Get target last row
    var last_row = target_sheet.getLastRow();

    // Set Ranges
    var source_range = source_sheet.getRange("A1:B1");
    var target_range = target_sheet.getRange("A"+(last_row+1)+":B"+(last_row+1));

    // Fetch values
    var values = source_range.getValues();

    // Save to spreadsheet
    target_range.setValues(values);
} 
```

我需要知道是否可以从源中获取内容并循环访问它，并且只添加目标中不存在的记录。显然，此功能不足以达到此目的，我希望有人可以将我推向正确的方向，甚至提供代码片段作为示例。到目前为止，我在谷歌或这里找不到任何有用的东西...... :(

谢谢你的帮助

**编辑**

我能够完成这个。范围发生了变化，现在我必须从具有多个工作表的多个电子表格中获取数据，以仅获取电子邮件并将它们添加到主电子邮件电子表格中。这是我创建的代码，希望它对其他人也有帮助。

我实际上是在打开 masterSpreadsheet 并添加了一个菜单按钮来运行此脚本时运行此脚本。

```
/**
* Updates the master spreadsheet with the set source spreadsheets and pages
**/
function updateMasterSpreadsheet() {
  //  var sourceSpreadsheetsArray = new Array();
  var sourceSpreadsheetsObject = new Object;

  // Add Spreadsheet IDs and sheet names that need to be copied from
  sourceSpreadsheetsObject['sourceSpreadsheet1Key'] = new Array("Sheet1");
  sourceSpreadsheetsObject['sourceSpreadsheet2Key'] = new Array("Sheet1");

  // Open master spreadsheet
  var target = SpreadsheetApp.openById("masterSpreadsheetKey");

  // Open master sheet
  var target_sheet = target.getSheetByName("Sheet1");

  // Loop through all source spreadsheets
  for (var id in sourceSpreadsheetsObject) {
    // Open source spreadsheet
    var source = SpreadsheetApp.openById(id);

    // Loop through and process each sheet
    for (var sheetID in sourceSpreadsheetsObject[id]) {
      // Open source spreadsheet sheet
      var source_sheet = source.getSheetByName(sourceSpreadsheetsObject[id][sheetID]);

      // Process sheet
      _updateMasterSpreadsheet(source_sheet, target_sheet);
    } // END - source sheets loop 

  } // END - source spreadsheets loop

  // Add last updated
  target_sheet.getRange("B1").setValue(new Date());
}

/**
* Performs the actual copy into the master spreadsheet
**/
function _updateMasterSpreadsheet(source_sheet, target_sheet) {
  // Get target last row
  var last_row = target_sheet.getLastRow();  

  // Get Source Range
  var source_range = source_sheet.getDataRange();

  // Fetch Source Values
  var source_data = source_range.getValues();  

  //Iterate over all cells, looking for non-empty ("") cells
  for (var row in source_data) {

    // check if empty
    if (source_data[row][0]!= "") {
      // Fetch data in the sheet (do this in the loop to ensure that we check all newly added items)
      var target_range = target_sheet.getDataRange();
      var target_data = target_range.getValues();  

      // Set flags
      var found = false;
      var stop = false;

      // Process loop
      while(found == false && stop == false) {
        // Check for duplicates
        for (var tmpRow in target_data) {
          if (source_data[row][0] == target_data[tmpRow][0]) {
            found = true;
            break;
          }
        }

        // If no duplicate, add to sheet
        if (!found) {
          last_row++;
          target_sheet.getRange("A"+last_row).setValue(source_data[row][0]);
        }

        // Prevent infinite loop
        stop = true;
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:29:39.020

Google Apps 脚本文档中的本教程应该可以帮助您：

[教程：删除电子表格中的重复行](https://developers.google.com/apps-script/articles/removing_duplicates)

Apps 脚本库中还有一个名为“删除重复项”的脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:25:43.010

One of our more experience people (which is plenty) may have a different take on it, but I'd guess you'd have to compare the two line-by-line. That would work only assuming the contents haven't been manually changed in either sheet.

What is it you're attempting to do? If you describe your use case, then we may be able to provide other thoughts...

# php - 匹配优先级怪异的正则表达式

> ID：10726811
> 
> 赞同：1
> 
> 时间：2012-05-23T19:47:45.767
> 
> 标签：php, regex

在 php 中编写变形脚本时，我遇到了一个奇怪的（至少对我而言）行为。似乎我的正则表达式包含许多不同的词尾模式匹配第二个可接受的选项，即使第一个完全没问题。

完整的表达是这样的（你真的不需要注意这个）：

```
([kpt])\1([aou])$|(?:(n)t)?([auo])$|([aeou][^aeiouyäö]+[aeiou])$|([auo][^aeiouyäö]+)$|([^aeiouyäö])(?!\6)([^aeiouyäö])(e)$|((?:[auo]i|[auo])[^aeiouyäö]*)([aeiouyäö])\10$ 
```

不用说，我先是怀疑自己是不是哪里搞错了，于是我把表情一点一点地淡化，终于到了这个阶段：

```
([aeiou])$|(.+)$ 
```

字面意思应该是“匹配字符串末尾的一个元音并将其用作反向引用 1，或者如果失败，则在字符串末尾之前多次匹配任何字符并将其用作反向引用 2”

当与字符串一起使用时，`foo`我希望使用表达式 ( `([aeiou])$`) 的第一部分。相反，使用了第二个，这让我感到困惑。

如果删除量词，则使用第一个选项。我猜这与表达式部分的贪婪或特异性有关，尽管我认为表达式是从左到右测试的。

有人可以向我解释这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:51:38.683

> 匹配字符串末尾的一个元音 [...] 或者**如果失败**，则在字符串末尾匹配任意次数的任意字符 [...]

不，不是这个意思。正确的解释是：

> 匹配**较长的**：
> 
> *   字符串末尾的一个元音
> *   字符串结束前任意次数的任意字符
> 
> （我不知道是否明确规定了平局规则。）

# google-app-engine - Google 应用引擎一致性父/子成员

> ID：10726813
> 
> 赞同：1
> 
> 时间：2012-05-23T19:47:48.217
> 
> 标签：google-app-engine, consistency

在文档中，有大量关于“最终”一致性的信息。但是，我想知道与父/子值的一致性是什么。小例子

```
@Entity
class Parent {
    ...
    String parentName;
    Child child = new Child(parentName);
}

@Entity
class Child {
    ...
    String parentName;

    Child(String parentName) {
        this.parentName = parentName;
    }
} 
```

如果我要更新 Parent 中的“parentName”字段，是否也可以在 Child 中更新它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:25:32.037

If by parent/child you mean these two entities are created in the same entity group, then yes you can update both entities in a single transaction, and the update will be atomic and strongly consistent. (This entity group relationship is not fully specified in your code sample: you have to create the entities with appropriate keys.)

# monodevelop - 在 MonoMac 中何时使用 MainWindow 以及何时使用 MainWindowController

> ID：10726814
> 
> 赞同：3
> 
> 时间：2012-05-23T19:47:51.977
> 
> 标签：monodevelop, xib, monomac

我刚刚开始在 MonoMac 和 MonoDevelop 3.0 上进行开发，我真的很困惑我应该在哪里路由我的 IBOutlets 和操作。在所有样本中，`MainWindowController`用于将所有东西连接起来。但是，除了改用之外，我什么也做不了`MainWindow`。

另外，我有点被甩了，因为在几个示例`MainWindowController`中显示为笔尖的子文件夹。但是当我新建一个解决方案时，它会显示为它自己的文件。

任何帮助表示赞赏

编辑：我将项目上传到 GitHub：[https ://github.com/ucsbmrf/MonoMacTest](https://github.com/ucsbmrf/MonoMacTest)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:47:58.643

大多数问题可能源于您在网上找到的大多数教程仍然引用旧版本的 MonoDevelop、XCode 和 IB。可以在[这篇文章](http://tufnelltech.blogspot.ca/2012/01/hello-os-x-from-c-five-steps.html)中找到设置测试项目的新工作流程，其中考虑了在 v4.2+ 中将 Interface Builder 合并到 XCode 中的更改。

# dependency-injection - 使用 Ninject 手动满足对现有对象的依赖

> ID：10726821
> 
> 赞同：3
> 
> 时间：2012-05-23T19:48:10.323
> 
> 标签：dependency-injection, ninject

我在一个项目中成功地使用了 Ninject，我可以有这样的类：

```
public class MyServiceConsumer
{
    [Inject]
    public void IPropertyInjectedService { get; set; }

    private IConstructorInjectedService _conSvc;

    public MyServiceConsumer(IConstructorInjectedService conSvc)
    {
        _conSvc = conSvc;
    }
} 
```

如果我执行 kernel.Get<MyServiceConsumer>() ，则依赖项将得到满足，一切都会好起来的。但是在启动应用程序的一种情况下，我已经有一个现有的对象，我想将它传递给内核，让内核在该现有实例上进行属性注入。

如何将现有对象传递给 Ninject 内核以满足属性注入依赖项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T20:12:09.890

弄清楚了。我正在寻找的语法是：

```
kernel.Inject(myExistingInstanceWithDependencies); 
```

# arrays - 如何旋转 3 维数组 actionscript 3

> ID：10726824
> 
> 赞同：0
> 
> 时间：2012-05-23T19:48:24.293
> 
> 标签：arrays, actionscript-3, multidimensional-array

我有一个像这样的 3 维数组（我有对象而不是 0）：

```
var array:Array =
  [
    [
      [0,0],[0,0],[0,0]
    ],
    [
      [0,0],[0,0],[0,0]
    ],
    [
      [0,0],[0,0],[0,0]
    ],
    [
      [0,0],[0,0],[0,0]
    ]
  ]; 
```

每个数组位置都包含一个放置在 3D 空间中的对象，要定位它，您只需要：array[zPos][yPos][xPos]。

是否有允许我在 Z、Y 和/或 X 轴上将阵列旋转 90 度的库或函数？

注意：记住数组可能是不规则的。

编辑：

我不认为我已经说清楚了。我不想在 3D 空间中移动对象，我只想知道它们在那里。我想要做什么来操作数组。

我找到了解决问题的部分方法，但我相信可以对其进行优化。我开发了一个公式来按 Z 轴旋转多个数组。这是代码：

```
var arr1:Array = 
[
    [
        [  0,   1,   2,   3],
        [010, 011, 012, 013]
    ],
    [
        [100, 101, 102, 103],
        [110, 111, 112, 113]
    ],
    [
        [200, 201, 202, 203],
        [210, 211, 212, 213]
    ]
];
var arr2:Array = new Array;

for (var i:int = 0; i < arr1.length; i++) 
{
    arr2.push(new Array);
    for (var j:int = 0; j < arr1[i][0].length; j++) 
    {
        arr2[i].push(new Array);
        for (var k:int = 0; k < arr1[i].length; k++) 
        {
            arr2[i][j].push(0);
        }
    }
}

for (i = 0; i < arr1.length; i++) 
{
    for (j = 0; j < arr1[i].length; j++) 
    {
        for (k = 0; k < arr1[i][j].length; k++) 
        {
            arr2[i][k][arr1[i].length - j - 1] = arr1[i][j][k];
        }
    }
} 
```

您是否知道通过 Y 轴或 X 轴旋转多个数组的其他库公式？非常感谢，对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:50:16.513

我相信你需要重新考虑你的设计。将对象放在这样的数组中并尝试旋转它们将是一个明确的性能杀手。

对于多维数组旋转、整数或数字，正确的方法是使用旋转矩阵。您会在许多流行的 actionscript 引擎（如 alternativa3d、away3d 等）中找到类似 3D 操作的函数。

# php - MySQL - 向表中添加列？

> ID：10726830
> 
> 赞同：0
> 
> 时间：2012-05-23T19:49:17.640
> 
> 标签：php, mysql, sql

我正在对我的网站进行第一次重大更新。它有一个现有的帖子表。如果我在表中添加两列，我能否将旧数据导入到更新后的表中？

编辑：我的意思是列。哎呀。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T19:50:55.013

你的意思是两列？如果它们可以为空，那么您应该能够导入不包含这些列的旧数据。您只需要通过确保指定要插入的确切列来仔细编写您的插入语句。这是一个很好的做法，无论如何都应该这样做（感谢布鲁诺的提示）。

例子：

```
INSERT INTO table1 (Col1, Col2, Col3)
SELECT Col1, Col2, Col3
FROM sourceTable 
```

代替

```
INSERT INTO table1
SELECT *
FROM sourceTable 
```

如果这两个新列不可为空，那么您可以尝试使用文字附加一些虚拟数据，以使插入工作。

例子：

```
INSERT INTO table1 (Col1, Col2, Col3, NewCol1, NewCol2)
SELECT Col1, Col2, Col3, '', ''
FROM oldDataTable 
```

或者，您可以创建一个同样有效的默认约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:52:17.683

首先导入数据，然后添加新列。或者您可以插入两列，注意它们不能为空，然后导入旧数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T19:52:44.093

我假设你的意思是如果你在表中添加两列？

是的，您应该能够使用`INSERT`语句插入现有数据，因为新列可以为空，或者您为这些列设置默认值。

# javascript - jQuery 从选择选项机制中切换选择

> ID：10726831
> 
> 赞同：0
> 
> 时间：2012-05-23T19:49:21.593
> 
> 标签：javascript, jquery, toggle, jquery-events

我正在尝试通过选择选项进行切换。我在切换两个以上时遇到困难。我的目标是能够通过选择选项切换至 4。例如类别和子类别。这是我在[jsfiddle](http://jsfiddle.net/uA7XD/64)中的示例。

```
<script type="text/javascript">
    var op = $("#tables option[value='options']:selected");
    var os = $("#tables option[value='Example2']:selected");
    if (op.length)
        $("#something").show();
    else
        $("#something").hide();
    if (op == ("#something").show())
             $("#something2").show();
    else
        $("#something2").hide();

}​
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:55:00.587

这是您正在寻找的设计模式吗？

```
if your object is not selected
    if your parent is selected
        you are also selected
    else
        you are selected
else
    you are now unselected 
```

此逻辑适用于任何深度的递归。

编辑：假设每个菜单都是 ul。您必须调整选择器。这只是一种方法。如果您有事件触发可见性，或者您有 ui 重排问题，则不是最好的。

```
clickyclicky = function(event) {
    var $target = $(event.currentTarget);
    if (!$target.hasClass("selected")) {
        // hide the old target and its parents
        var $oldTarget = $('.selected');
        $oldTarget.removeClass("selected").hide().parents('ul').hide();
        // show the new target and its parents
        $target.show().addClass("selected").parents('ul').show();
    } else {
        // hide the target
        $target.removeClass("selected").hide();
        // move the selected token to the parent.
        $parent = $target.parent().parent(); // assuming an ul/li tree pattern.
        if ($parent.is('ul')) {
            $parent.addClass("selected");
        }
    }
} 
```

我没有测试过这段代码，它只是一个一般参考。

编辑：这是小提琴：http: [//jsfiddle.net/uA7XD/76/](http://jsfiddle.net/uA7XD/76/)

# entity-framework - 如何将我自己的约定添加到 EF 4.3（使列大写）

> ID：10726835
> 
> 赞同：4
> 
> 时间：2012-05-23T19:49:38.643
> 
> 标签：entity-framework, c#-4.0, entity-framework-4

是否可以将我自己的约定添加到 Entity Framework 4.3？

在4.1版本之前是可以的，像这样

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    base.OnModelCreating(modelBuilder);

    modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    modelBuilder.Conventions.Add<UppercaseColumnNameConvention>();  // Own convention
} 
```

但是在 v4.1 之后 Add 方法是内部的。

我需要数据库中的所有列都为大写而不更改 POCO 对象，并且如果可能的话，不使用属性。b/o 有很多实体，这将很难重命名所有字段或添加属性`[Column("UPPERCASENAME")]`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T23:06:00.050

目前不支持可插拔约定。[实体框架中的](https://stackoverflow.com/questions/5681662/pluggable-conventions-in-entity-framework)这个线程可插入约定仍然有效。您可以在 OnModelCreating 方法中使用 HasColumnName() 方法配置列名。如果您不想手动执行此操作，您可以将其自动化（例如使用反射）并对模型中的所有实体执行此操作。是的，这远非理想。

# sql-server - 需要验证我是否理解 SQL 逻辑

> ID：10726836
> 
> 赞同：1
> 
> 时间：2012-05-23T19:49:43.313
> 
> 标签：sql-server, logic

我想知道我是否正确解码了这个 SQL 逻辑。这是SQL：

```
,[hrs].[Hours] - SUM(CASE WHEN [UnitState].[UnitStateType] <> 'ACTIVE' THEN [Allocation].[AllocatedEnergyMwh] ELSE 0 END / CAST([Unit].[NetDependableCapacity] AS FLOAT)) AS SH 
```

我将其解释为：

```
if [UnitState].[UnitStateType] does not equal active then SH equals the sum of [Allocation].[AllocatedEnergyMwh] / 
    (float)[Unit].[NetDependableCapacity].  

else SH = [hrs].[Hours] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:54:11.600

它很接近，但您错过了 [hrs].[Hours] - 第一个案例部分。

```
if [UnitState].[UnitStateType] does not equal active
    then SH equals [hrs].[Hours] minus the sum of [Allocation].[AllocatedEnergyMwh] / (float)[Unit].[NetDependableCapacity].  

else SH = [hrs].[Hours] minus (0)/[Unit].[NetDependableCapacity] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:55:11.480

不完全是。

SH没有*别的*了。else 只影响 sum 聚合。更准确地说，它说：

```
SH = hours -
 (the sum of AllocatedEnergyMwh where StateType != ACTIVE) / NetDependableCapacity 
```

else 仅用于忽略 sum 中的活动 AllocatedEnergyMwh。在这些情况下，它通过设置 AllocatedEnergyMwh = 0 来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T19:56:15.943

如果 [UnitState].[UnitStateType] 不等于 active 则

[hrs].[Hours] 减去 sum([Allocation].[AllocatedEnergyMwh] / [Unit].[NetDependableCapacity])

否则

[hrs].[Hours] 减去 sum(0/[Unit].[NetDependableCapacity]) --> 含义 [hrs].[Hours] - 0

# java - 在 TreeSet 中查找相等元素

> ID：10726839
> 
> 赞同：0
> 
> 时间：2012-05-23T19:49:45.210
> 
> 标签：java, treeset

我正在开发一些元素的历史视图。每个元素都有一个开始和结束日期。期间可能不重叠，因此每个开始日期必须等于或晚于其前任的结束日期。如果结束日期为空，则元素从其开始日期一直处于活动状态，直到已知结束日期为止。

出于测试目的，我创建了这个类：

```
public class Entry implements Comparable<Entry>
{
    Integer start;
    Integer end;

    public Entry(Integer s, Integer e)
    {
        start = s;
        end = e;
    }

    @Override
    public boolean equals(Object obj)
    {
        if (obj instanceof Entry)
        {
            return compareTo((Entry) obj) == 0;
        }
        return false;
    }

    @Override
    public int compareTo(Entry o)
    {
        if (o.end != null // other ends before or when this starts
                && (o.end.equals(start) || o.end < start ))
        {
            return 1;
        }
        if (end != null // other starts after or when this ends
                && (o.start.equals(end) || o.start > end ))
        {
            return -1;
        }
        return 0;
    }
} 
```

我使用 TreeSet 对元素进行排序。现在我遇到的问题是我无法获得当前活动或第一个到来的元素。

查看 JavaDoc 天花板方法应该可以解决问题：

> 返回此集合中大于或等于给定元素的最小元素，如果没有这样的元素，则返回 null。

但是，这不起作用。

在一个测试用例中，我创建了一个带有一堆条目的 TreeSet：

```
TreeSet<Entry> ts = new TreeSet<Entry>();
ts.add(new Entry(1, 3));
ts.add(new Entry(3, 5));
ts.add(new Entry(5, 7));
ts.add(new Entry(7, 9));
ts.add(new Entry(9, 11));
ts.add(new Entry(11, 13));
ts.add(new Entry(13, 15)); 
```

然后我使用以下代码获得天花板：

```
ts.ceiling(new Entry(5, null)); 
```

我期望的结果是开始 5 和结束 7 的条目（“相等”条目）。然而，结果是开始 7 和结束 9 的条目（更大的条目）。两个结果都等于或大于给定元素。但由于 JavaDoc 提到它返回最少的元素，我希望 5-7 条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:06:29.613

您正在定义什么是最少的元素（通过定义`compareTo`）。

你自己在说：

> “两个结果相等”

因此，当 API 引用最小元素时，它指的*是有序集合中*的参数之后或等于（ceil）的元素。现在打印您的订购集：

[(1, 3), (3, 5), (5, 7), (7, 9), (9, 11), (11, 13), (13, 15)]

因此，上限首先查找等于`5, null`（意味着`compareTo`返回 0）的元素，如果找到，则返回该元素。您有两个相等的元素（因此无需再寻找一个）。

*这*就是天花板方法文档所指的，集合中的顺序（不是通过设置某种新的比较）。

> 公共E天花板(E e)
> 
> 返回*此集合中*大于或等于给定元素的最小元素

请参阅[TreeSet#ceiling(E e) API](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html#ceiling%28E%29)

所以它找到一个`5, 7`or `7,9`（两者都等于`5, null`）并返回它首先找到的那个，这是`7,9`根据实现的。

TreeSet 实际上是幕后的树结构（doh），它在该树中的哪个节点命中两个相等的节点取决于实现的细节和可能的插入顺序。

您的 compareTo/equals 不遵守正常/推荐的规则（对于尝试使用它们的 Tree 肯定是不利的）。如果 A 和 B 相等且 C 和 B 相等，则 A 和 C 应该相等，而compareTo 函数*不是*这种情况。

# png - 尝试编写 16 位 PNG

> ID：10726841
> 
> 赞同：1
> 
> 时间：2012-05-23T19:49:55.497
> 
> 标签：png, tiff, libpng

我正在从相机捕捉图像，我有两个功能可以保存 16 位（！）图像，一个是 PNG 格式，一个是 TIFF 格式。你能解释一下为什么PNG是一个非常嘈杂的图像吗？像这样：

PNG功能：

```
 bool save_image_png(const char *file_name,const mono16bit& img)
{
    [...]
        /* write header */
        if (setjmp(png_jmpbuf(png_ptr)))
                abort_("[write_png_file] Error during writing header");

        png_set_IHDR(png_ptr, info_ptr, width, height,
                     bit_depth,PNG_COLOR_TYPE_GRAY , PNG_INTERLACE_NONE,
                     PNG_COMPRESSION_TYPE_BASE, PNG_FILTER_TYPE_BASE);

        png_write_info(png_ptr, info_ptr);

        /* write bytes */
        if (setjmp(png_jmpbuf(png_ptr)))
                abort_("[write_png_file] Error during writing bytes");

    row_pointers = (png_bytep*) malloc(sizeof(png_bytep) * height);

        for (y=0; y<height; y++)
            row_pointers[y] = (png_byte*) malloc(png_get_rowbytes(png_ptr,info_ptr));
     for (y = 0; y < height; y++)
     {
             row_pointers[y] = (png_bytep)img.getBuffer() + y * width*2;
     }

        png_write_image(png_ptr, row_pointers);

        /* end write */

  [...]           

} 
```

和 TIFF 功能：

```
 bool save_image(const char *fname,const mono16bit& img)
{
  [...]

  for(y=0; y<height; y++) {
    if((err=TIFFWriteScanline(tif,(tdata_t)(img.getBuffer()+width*y),y,0))==-1)
      break;
  }

  TIFFClose(tif);

  if(err==-1) {
    fprintf(stderr,"Error writing to %s file\n",fname);
    return false;
  }
  return true;

//#endif //USE_LIBTIFF
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-09-27T17:30:22.100

`png_set_swap`什么也没做。您必须实际翻转图像每个像素中的字节。

如果您在 PC 上并且拥有 SSSE3 或更新版本，一个好方法是`_mm_shuffle_epi8`指令，使用`_mm_setr_epi8`.

如果您在 ARM 上并且有 NEON，请改用`vrev16q_u8`指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:53:52.700

也许你有一个字节顺序问题。尝试添加：

```
png_set_swap(png_ptr); 
```

在保存图像之前

# jquery - 带有 JQuery animate 的 Ken Burns 效果不适用于 Firefox 和 Opera

> ID：10726842
> 
> 赞同：1
> 
> 时间：2012-05-23T19:50:00.240
> 
> 标签：jquery, firefox

我正在尝试使用 JQuery 实现 Ken Burns（平移和缩放图片），但这不适用于 Firefox（12.0）和 Opera：

```
 var endCss = {
     'background-position-x': '-20px',
     'background-position-y': '-200px',
     'background-size': '1100px'
 };
 var frame = $('#myid');
 frame.animate(endCss, 1000); 
```

背景大小确实会改变，但它的位置不会改变。

有谁可以判断我做错了什么或者我是否在前面关闭一个错误？

PS：这在 Chrome 和 Safari 中运行良好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:45:05.523

Firefox 和 Opera 不支持`background-position-x`or `background-position-y`- 这些不是规范。

不确定这是否会有所帮助，因为您可能希望在每个步骤中都进行更改`x`，`y`但这里有一个信息丰富的答案：[Animate background position y in Firefox with Jquery](https://stackoverflow.com/questions/10449474/animate-background-position-y-in-firefox-with-jquery)

# ruby-on-rails - Rake 错误运行任务：“未定义的方法'Task' for main:Object rake 0.9.2.2

> ID：10726853
> 
> 赞同：3
> 
> 时间：2012-05-23T19:50:40.280
> 
> 标签：ruby-on-rails, rake

我正在尝试运行我编写的示例任务。我已将包含代码的文件放在`lib/tasks`并命名为`test.rake`.

任务代码为：

```
Task :sayHello do
    puts "Hello World"
end 
```

当我尝试运行它时，出现以下错误：

```
/lib/tasks/test.rake:2:in `<top (required)>': undefined method `Task' for main:Object (NoMethodError)
from -e:1:in `load'
from -e:1:in `<main>' 
```

我尝试运行“工具-> 运行 Rake 任务”，但在给定任务中找不到我的任务。此外，当我`rake -T`从控制台调用时，我的任务未列出。

我用谷歌搜索了这个错误，但我看到的所有相关错误都发生在 rake 0.9.0.0 而不是 0.9.2.2

我试图放入一个命名空间，这会导致以下错误：

```
undefined method `namespace' for main:Object 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:54:29.413

它是`task`（即方法），而不是`Task`（即类）。你必须定义你的任务

```
task :sayHello do
    puts "Hello World"
end 
```

这很重要，因为 Ruby 始终区分大小写。

# c++ - 外部静态库

> ID：10726855
> 
> 赞同：0
> 
> 时间：2012-05-23T19:50:57.130
> 
> 标签：c++, qt, external

该库称为 mod.lib，我使用以下行链接该库。我还包括它的头文件。不知道出了什么问题，但是当我尝试在代码中使用它们时，它一直给我库函数的未定义引用错误。

```
win32: CONFIG (release, debug|release): LIBS += -LC:/Users/J/proj -lmod
INCLUDEPATH += C:/Users/J/proj
DEPENDPATH += C:/Users/J/proj
win32: PRE_TARGETDEPS += C:/Users/J/proj/mod.lib 
```

谢谢回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:04:49.550

利用

```
LIBS += -L/C:/Users/J/proj -lmod 
```

代替

```
LIBS += -LC:/Users/J/proj -lmod 
```

添加库的正确方法是

```
LIBS += -L/path/to -lyourmodule 
```

# c# - 如何在此 JSON 字符串中获取数组中的属性？

> ID：10726856
> 
> 赞同：1
> 
> 时间：2012-05-23T19:50:58.020
> 
> 标签：c#, .net, json

在下面的 JSON 字符串中，如何访问“datastreams”数组中的“at”和“current_value”属性的值？

在此示例中，只有一个数据流，但实际上可能有很多。我需要通过“id”属性访问数据流。一旦我弄清楚这个问题，我计划使用带有 id == 的 where 子句到所需数据流的 id。

我尝试使用[此处](http://www.slickthought.net/post/2012/04/16/Heads-Up-Working-with-JSON-on-Windows-8.aspx)讨论的方法，在“Windows 8 中的 JSON – 一种更简单的方法”下，但它不起作用。

在此代码中，`json`包含从我正在调用的服务返回的 JSON。`prop`填充有`JsonArray`. `current`导致异常，内部消息为“未找到 JSON 值”

```
var json = JsonObject.Parse(responseBodyAsText);
var prop = json.GetNamedArray("datastreams");

var current = from p in prop
    select new
    {
       datastream = p.GetObject().GetNamedString("datastreams"),
       datetime = p.GetObject().GetNamedString("at"),
       value = p.GetObject().GetNamedString("current_value")
    }; 
```

这是 JSON 字符串：

```
{
   "title":"X",
   "status":"X",
   "creator":"X",
   "datastreams":
      [
         {
            "at":"x",
            "max_value":"X",
            "current_value":"X",
            "id":"X",
            "min_value":"X"
         }
      ],
   "location":{"exposure":"x","domain":"x","disposition":"x","lat":X,"lon":-X},
   "created":"X",
   "tags":["X"],
   "feed":"X",
   "private":"X",
   "id":X,
   "description":"X",
   "version":"X",
   "updated":"X"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:58:25.363

> 数据流 = p.GetObject().GetNamedString("数据流")

上面的代码应该返回一个对象数组。您需要遍历对象数组以检查每个对象的“at”和“current_value”属性的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:04:58.670

数据流返回一个数组，正如您可以通过 [ ] 注意到的那样：

```
datetime = datastream[0].at
value = datastream[0].current_value 
```

# c# - 为什么调用GetManifestResourceNames时资源名存在时GetManifestResourceStream返回null？

> ID：10726857
> 
> 赞同：58
> 
> 时间：2012-05-23T19:51:05.070
> 
> 标签：c#, asp.net

我有一个 Web 应用程序项目。我生成了 DLL 并将其导入另一个项目。我实施了`VirtualPathProvider`.

我关注了这个网站： http: [//support.microsoft.com/kb/910441/en-us](http://support.microsoft.com/kb/910441/en-us?spid=8940&sid=global) ?spid=8940&sid=global ，一切正常，直到我添加另一个站点管理员。

1.  我添加`site_export.master`并将其构建操作更改为嵌入式资源。
2.  我更改了我的页面以使用新的站点管理员。
3.  `GetManifestResourceStream()``null`加载时返回`site_export.master`。
4.  我打电话`GetManifestResourceNames()`来检查`site_export.master`DLL中是否存在，它确实存在。它在列表中。所有名称空间都匹配。我没有在这里列出名称空间。

为什么不能`GetManifestResourceStream()`加载我的新的`site_export.master`？它加载`site.master`得很好。我知道我的 DLL 已加载，因为我可以看到 DLL 中的其他文件。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-05-27T09:53:53.583

记住以下问题...

*步骤 1*。将操作设置为嵌入式资源，请参阅

[C# 的 GetManifestResourceStream 问题](http://adrianmejia.com/blog/2011/07/18/cs-getmanifestresourcestream-gotcha)

*步骤 2*。使用`namespace.resourcename`见[GetManifestResourceStream() 返回 null ？](http://nullfork.blogspot.com/2011/09/getmanifestresourcestream-returns-null.html)

实际上，如果访问另一个程序集中的私有资源并且调用者没有`ReflectionPermission`带有`ReflectionPermissionFlag.MemberAccess`标志，则此方法返回 null。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2014-03-16T21:16:54.940

侧面提示。为了确保您在正确的程序集中并具有正确的名称：转储并评估目标程序集中的所有可用资源

```
string[] names = assembly.GetManifestResourceNames(); 
```

（就我而言，我滥用了另一个程序集中的命名空间）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-10-21T07:07:25.800

我这样做是为了让它工作：

**第 1 步：**选择资源（在我的例子中为 CRDF.xsl）并右键单击 > 属性。将 Build Action 设置为“EmbeddedResource”，将 Logical Name 设置为您选择的名称，例如 CRDFXSL。

**第 2 步：**更改您的源代码，如下所示：

```
Assembly _assembly;
  _assembly = Assembly.GetExecutingAssembly();         
  xslStream = _assembly.GetManifestResourceStream("CRDFXSL");
  _xmlReader = XmlReader.Create(xslStream); 
```

因此，一切都很顺利..

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-08T11:56:27.617

提示和警告：如果项目文件中的“程序集名称”和“默认命名空间”不匹配，则 GetManifestResourceStream 也将返回 null。GetManifestResourceNames 仍然返回程序集的名称，但在加载清单期间将不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-31T17:19:45.897

尝试这个：

```
Dim ctx As Windows.ApplicationModel.Resources.Core.ResourceContext = New Windows.ApplicationModel.Resources.Core.ResourceContext()
ctx.Languages = {Globalization.CultureInfo.CurrentUICulture.Name}
Dim rmap As Windows.ApplicationModel.Resources.Core.ResourceMap = Windows.ApplicationModel.Resources.Core.ResourceManager.Current.MainResourceMap
Dim res = rmap.GetValue("Assets/sample.png", ctx)
Dim resFile = Await res.GetValueAsFileAsync 
```

`Windows.ApplicationModel.Resources.Core.ResourceManager.Current.MainResourceMap`列出所有资源。

# active-directory - 相当于 DirectoryEntry.Invoke 的 UserPrincipal？

> ID：10726858
> 
> 赞同：3
> 
> 时间：2012-05-23T19:51:07.957
> 
> 标签：active-directory, directoryservices

我正在更新与我们应用程序中的 AD 交互的代码。当前代码使用 ActiveDs 接口。我正在更改代码以使用 System.DirectoryServices.AccountManagement 命名空间。我们的应用程序允许用户存储密码提示。这存储在 AD 中的用户定义参数下。我知道我可以用这个`DirectoryEntry.Invoke("put")`方法做到这一点。

无论如何要使用 UserPrincipal 执行此操作，还是我需要先调用该`GetUnderlyingObject`方法然后再`DirectoryEntry.Invoke("put")`调用？

任何建议/意见将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T20:22:58.317

该类是可扩展的，因此您可以在您的用户主体上`UserPrincipal`“显示”更多底层对象的属性。`DirectoryEntry`

使用 MSDN 文章[Managing Directory Security Principals in the .NET Framework 3.5](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)中解释的可扩展性技术，*您*还应该能够在`DirectoryEntry`扩展`UserPrincipal`类。

# c# - DataTable 作为 Web 服务 asmx for SharePoint 中方法的返回数据类型

> ID：10726860
> 
> 赞同：1
> 
> 时间：2012-05-23T19:51:08.713
> 
> 标签：c#, web-services, sharepoint

我从 SharePoint 创建了一个 Web 服务以返回两个值，但我无法使用 DataTable 作为该方法的返回类型。

如何使此方法在 a 中返回两个差异值（差异数据类型）`List<>`？

```
[WebMethod(EnableSession=true, Description=" Get All sites in the Site Collection.")]
public List<string> GetAllSites(string InputSitecollectionUrl)
{
    List<string> w = new List<string>();
    using (SPSite TargetsiteCollection = new SPSite(InputSitecollectionUrl))
    {
        SPWebCollection allWebs = TargetsiteCollection.AllWebs;
        foreach (SPWeb web in allWebs)
        {
            string WebUrl = web.Url;
            string WebTitle = web.Title;

            w.Add(WebUrl);
            w.Add(WebTitle);
        }
    }
    return w;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:00:11.447

而不是返回 a`List<string>`你可能想要使用 a`List<KeyValuePair<T1, T2>>`

```
var w = new List<KeyValuePair<string, string>>();
foreach (SPWeb web in allWebs)
{
    w.Add(new KeyValuePair<string, string>(web.Url, web.Title));
}

return w; 
```

您可以在 KeyValuePair 类型约束中指定适合您需要的任何类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T14:11:48.497

```
DataSet set = new DataSet("sites");
        DataTable table1 = new DataTable("site");
        table1.Columns.Add("SiteUrl");
        table1.Columns.Add("SiteTitle");

        // Create a DataSet and put both tables in it.
        using (SPSite TargetsiteCollection = new SPSite(InputSitecollectionUrl))
        {
            SPWebCollection allWebs = TargetsiteCollection.AllWebs;
            foreach (SPWeb web in allWebs)
            {
                string WebUrl = web.Url;
                string WebTitle = web.Title;
                table1.Rows.Add(WebUrl, WebTitle);
            }
            set.Tables.Add(table1);

        }
        return set; 
```

# ajax - 将 Select 与数据表列过滤和 MVC 服务器端处理一起使用

> ID：10726862
> 
> 赞同：2
> 
> 时间：2012-05-23T19:51:15.347
> 
> 标签：ajax, asp.net-mvc, datatables

我一直在使用 JQuery 插件数据表和 .NET MVC3 框架开发一个项目。我正在使用 AJAX 控制器进行服务器端处理。我也一直在使用“columnfiltering”数据表插件来进行单独的列过滤。它适用于文本输入和数字范围。我在选择时遇到问题。我可以显示一个选择字段，我什至知道如何以这种方式为其提供特定选项

```
 $('#example').dataTable()
      .columnFilter({
        aoColumns: [ { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  }
    }); 
```

但我想让选择从表中的数据中自动填充。有什么方法可以做到这一点，我知道我可以创建另一个 ajax 控制器并使用 JQuery 来访问该控制器以提供我想要的数据，但我更愿意将它包装到我已经拥有的表控制器中。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-16T16:13:49.807

如果您从 MVC 控制器返回 json，则可以使用 fnServerParams，如下所示：

```
return Json(new
{
    param.sEcho,
    iTotalRecords = baseqry.TotalRecordCount,
    iTotalDisplayRecords = baseqry.TotalRecordCount,
    aaData = result,
    selectListData = MySelectlistData
}, JsonRequestBehavior.AllowGet); 
```

`aaData`填充数据表的数据在哪里，`selectListData`选择列表的数据在哪里。

在数据表初始化代码中，您会得到如下`selectListData`值：

```
"fnServerData": function (sSource, aoData, fnCallback) {
    $.getJSON(sSource, aoData, function (json) {
        var selectlist = json.selectListData;
    }
    fnCallback(json); // this call populates the datatable
}); 
```

# linux - Raspberry Pi 上的 Linux 内核模块错误

> ID：10726865
> 
> 赞同：1
> 
> 时间：2012-05-23T19:51:34.810
> 
> 标签：linux, kernel-module, raspberry-pi

我有一台小型树莓派计算机，我第一次尝试创建内核模块。我已经下载了源代码，并设法编译了我的测试模块，但是当我尝试加载它时，我得到了这个错误：

```
insmod: error inserting 'hello.ko': -1 Invalid module format 
```

当我查看 dmesg 时，我看到了这个错误：

```
hello: version magic '3.1.9+ mod_unload modversions ARMv6 p2v8 ' should be '3.1.9+ mod_unload modversions ARMv6 ' 
```

谁能指出我正确的方向，我不确定它告诉我什么？

干杯卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:53:55.960

听起来您下载的内核源代码与您的 Pi 上安装的内核不匹配。

你是从哪里下载的？

要为您的内核获取正确的源代码，请在命令行中键入以下内容：

```
sudo apt-get install linux-source 
```

这应该为您的内核下载正确的内核源代码（它是一个元包）。您现在应该会在下面看到一个`/lib/modules/`与您的内核版本匹配的目录（键入时打印出的版本`uname -r`）

重新编译并链接你的代码——通过在你的 Makefile 中有这样一行来确保你选择了正确的内核源代码：

```
all:
    make -C /lib/modules/$(shell uname -r)/build M=${PWD} modules 
```

您新编译的 .ko 模块现在应该与您的内核匹配，并且可以毫无怨言地插入。

祝你好运！

# java - 有没有办法通过 jndi 传递文件位置 标签？

> ID：10726866
> 
> 赞同：1
> 
> 时间：2012-05-23T19:51:36.257
> 
> 标签：java, spring, jndi

我在 spring-config.xml 中声明了以下属性

```
<util:properties id="ldap" location="classpath:com/company/project/resources/some_configuration.properties"/> 
```

然后我在服务实现中使用 spring 注释将属性中包含的值注入到一些成员变量`@Value`中（这种方法是迄今为止我在服务实现中使用的最干净/最优雅的方法，如果可能的话我不想更改）。

这种布局的问题是我必须修改属性文件并为每个部署环境（质量、生产等）重新生成应用程序战争，并且服务器管理员希望`some_configuration.properties`通过 JNDI 配置路径（应用程序服务器是 JBoss）

如何通过`<util:properties />`标签中的 jndi 传递文件位置？

任何帮助和建议将不胜感激

**编辑：** 如果有人提出一个我可以做类似事情的解决方案，那就太好了：

`<util:properties id="ldap" location="jndi:url/some_configuration.properties"/>`

或类似的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-30T00:42:34.983

旧帖子，但这可能对其他人有用：

```
<jee:jndi-lookup id="ldapProps" jndi-name="your/jndi" resource-ref="true"/>
<util:properties id="ldap" location="file://#{ldapProps}/some_configuration.properties" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T20:37:16.510

我正在寻找类似的东西，这个答案将帮助您使用 PropertyPlaceholderConfigurer：[https](https://stackoverflow.com/a/3486315/439427) ://stackoverflow.com/a/3486315/439427 。

高温高压

* * *

在您的情况下，您需要`PropertyPlaceholderConfigurer`在 bean 中配置，然后您只需要进行以下更改：

```
<util:properties id="ldap"
  location="classpath:x/y/z/resources/${environment}.properties"/> 
```

where`${environment}`将由这样的环境变量设置：`-Denvironment=dev`

# php - PHP / HTML 为具有父 ID 和子 ID 的网上商店类别创建下拉列表

> ID：10726868
> 
> 赞同：0
> 
> 时间：2012-05-23T19:51:43.567
> 
> 标签：php, html

我现在正忙于制作一个具有不同类别以及不同父 ID 的网上商店。我的数据库结构如下：

id - 姓名 - 父母 ID：

1 - 游戏 - 0

2 - 电影 - 0

3 - 类型 - 1

4 - 类型 - 2

5 - 行动 - 3

6 - 历史 - 4

现在在管理部分中，当我想添加一个类别时，我想在下拉列表中显示我的所有类别，但我希望将父级和子级分开。是否有捷径可寻？

问候埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:01:18.977

我不确定您所说的“希望将父 ID 和子 ID 分开”是什么意思。了解 a 中的元素`select`只不过是一个显示值和一个数据值，而数据值将与字段名称一起发送到服务器。

所以`select`不能真正区分多种数据值。例如，每个`option`人都不能有多个 ID。您所能做的就是格式化您的显示值以包含 ID（例如您使用“1 - 游戏 - 0”等），并决定哪个数据值应该`option`是`select`.

您*可以*做的一件事是[使用](http://htmlhelp.com/reference/html40/forms/optgroup.html)[标签](http://htmlhelp.com/reference/html40/forms/optgroup.html)`option`对元素进行分组。像这样的东西：[`optgroup`](http://htmlhelp.com/reference/html40/forms/optgroup.html)

```
<select name="myOptions">
  <optgroup label="Category 1">
    <option value="1">First Choice</option>
    <option value="2">Second Choice</option>
    <option value="3">Third Choice</option>
  </optgroup>
  <optgroup label="Category 2">
    <option value="4">Fourth Choice</option>
    <option value="5">Fifth Choice</option>
  </optgroup>
  <optgroup label="Category 3">
    <option value="6">Sixth Choice</option>
    <option value="7">Seventh Choice</option>
  </optgroup>
</select> 
```

在验证中，浏览器不应该允许用户选择一个组，他们必须选择一个实际的选项。所以你不应该担心这个。这确实为更分层地显示您的值提供了一些额外的灵活性。但是，请理解在这种情况下只允许一级选项嵌套。（所以一个`optgroup`不能包含另一个`optgroup`。）

# .net - 通过 ClickOnce 升级 SQL 实例

> ID：10726871
> 
> 赞同：5
> 
> 时间：2012-05-23T19:51:51.070
> 
> 标签：.net, sql-server, clickonce

我有一个通过 ClickOnce 部署的 Winforms 应用程序，它具有 SQL Server 2005 Express 的先决条件。我想将其更改为 SQL Server 2008 R2 Express。

我正在查看`package.xml`for SQL Server 2008 R2 Express 并注意到以下几行：

```
<!-- Defines an upgrade installation (x86) -->
-<Command Arguments="/q /hideconsole /action=Upgrade /instancename=SQLEXPRESS 
                     /IAcceptSqlServerLicenseTerms /skiprules=RebootRequiredCheck" 
          PackageFile="SQLEXPR32_x86_ENU.EXE" 
          EstimatedInstallSeconds="420" EstimatedInstalledBytes="225000000"> 
```

这*似乎*暗示升级是可能的。但是，尝试此操作时失败，提示我卸载现有`SQLEXPRESS`实例。

有谁知道这是否可能？也许我做错了什么？我是否只需要加倍努力并编写卸载现有 SQL 实例的代码？有没有人处理过类似的事情？

PS 这是否属于[数据库管理员](https://dba.stackexchange.com/)（[https://dba.stackexchange.com/](https://dba.stackexchange.com/)）？鉴于我的问题的 ClickOnce 上下文，我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:58:11.867

不久前我也必须这样做。我所做的就是完全按照您描述和编写 SQLExpress 的卸载代码。

但是我是在应用程序的启动模块中完成的，我检查了已安装的版本，运行它的卸载，然后再次检查（以防用户取消），然后重新启动应用程序。

Clickonce 看到缺少必需的先决条件并开始安装..

很啰嗦，但确实奏效了。

我已经改用 SQL Everywhere（调用 SQL Compact），它只是一个 DLL，因此可以使用应用程序自己的代码进行升级，而不会造成这种混乱。我们的本地数据库很小（它的数据缓存来自一个网络服务）。这可能不够大或不够强大 f

# cuda - cuda 代码在发布模式下产生不正确的结果

> ID：10726872
> 
> 赞同：1
> 
> 时间：2012-05-23T19:51:58.370
> 
> 标签：cuda

我的 CUDA 代码在调试模式下产生正确的结果。但是，在发布模式下，相同的代码会产生垃圾结果。线程之间的同步在调试模式和发布模式之间会表现不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:37:14.837

Code generated with -O0 results in less optimal code and significantly more global and local memory accesses which may be hide a race condition. If you think you may have a race condition in shared memory you can try to the new CUDA 5.0 preview memory checker which supports some forms of race condition detection. Your best bet is to look for any location where you shared memory between two threads and determine if you are missing a thread fence of sync threads.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:59:35.280

我认为，您遇到了比赛条件问题。您可以重新组织代码并在需要的地方添加同步。在调试模式下，您的线程通常按顺序执行，您不会遇到此问题。

# ruby-on-rails - rails：使用在另一个模块中定义的类

> ID：10726875
> 
> 赞同：0
> 
> 时间：2012-05-23T19:52:21.163
> 
> 标签：ruby-on-rails, class, methods, scope

当我尝试运行我的应用程序时，出现以下错误：

```
uninitialized constant RegistrationsController::User_serial 
```

在我的 config/application.rb 中，我有：

```
config.autoload_paths += %W(#{config.root}/lib)
config.autoload_paths += Dir["#{config.root}/lib/**/"] 
```

在我的 registrations_controller.rb 中，我有以下内容：

```
class RegistrationsController < Devise::RegistrationsController
  ........

def create
    @user = User.new(params[:user])

    user_serial_local = User_serial.new #initialize class defined in lib/my_tools.rb
    date_time_local = Date_formatter.new
    ...... 
```

在 lib/my_tools.rb 中，我定义了一些类：

```
class User_serial
  def self.calculate(first,last)
    first_3 = first[0..2]
    last_4 = last[0..3]
    time = Time.now.to_i
    return first_3 + last_4 + time.to_s
  end 
end

class Date_formatter
  def self.datetime
    return Time.now.strftime("%Y-%m-%d %H:%M:%S")
  end
end 
```

有很多关于覆盖类的引用，以及有关如何确保包含放在 lib 文件夹中的任何内容的说明（在我的代码中遵循）。为什么我会收到错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:07:02.800

为了让 Rails 的魔法加载工作，它需要能够仅根据类名找到定义类/模块的文件。

这反过来意味着要遵守 rails 的命名约定，并将内容放在 rails 期望的地方：UserSerial 应该在 user_serial.rb 中定义。您可能可以让 User_serial 作为类名工作，但 rails 永远不会在 my_tools.rb 中查找该类。

# linux - Unix 到 linux 迁移 - unix2dos

> ID：10726879
> 
> 赞同：1
> 
> 时间：2012-05-23T19:52:27.527
> 
> 标签：linux, unix, migration

我正在将我的代码从 UNIX 迁移到 LINUX，并且我知道 unix2dos 命令在 SUSE 11.0 中不可用。请让我知道是否

```
alias unix2dos='recode lat1..ibmpc' 
```

会有和unix2dos一样的效果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:57:58.483

我不确定重新编码，但`sed -i 's/$/\r/'`会做与`unix2dos`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T22:09:13.040

使用`recode`似乎有风险，它用于转换字符集，而不仅仅是更改换行符。我没用过`recode`，但我担心如果文件是用 UTF-8 而不是 Latin1 编码的，你可能会破坏你的文件。

我不知道在 SUSE 中找到了哪些软件包，但也许有一种替代方法`unix2dos`，例如`todos`（在 Debian 上，在 package 中找到`tofromdos`）。

按照其他建议使用`sed`应该效果很好。如果您真的担心性能，您可以将`sed`的性能与`awk '{print $0 "\r"}'`- 我不能确定在您的情况下哪个会更快，但是在您的文件样本上测量两者并没有什么坏处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T22:14:45.853

将文件加载到 vim 中，然后

`:set ff=dos` -- 更改 DOS 行尾 (CRLF)

`:set ff=unix`-- 对 unix 行尾 (LF) 的更改

# javascript - 使用 jQuery 回滚 SELECT 更改

> ID：10726882
> 
> 赞同：4
> 
> 时间：2012-05-23T19:52:39.173
> 
> 标签：javascript, jquery, firefox, select, cross-browser

我希望用户能够确认他们在选择控件中所做的选择，或者如果他们取消则回滚到以前的值。以下在 Chrome/Safari 中运行良好，但无论我尝试什么，我都无法让它在 Firefox（在 Mac 上）中运行。

**HTML：**

```
<select id='my-select'>
<option value="client">Client</option>
<option selected="selected" value="assistant">Assistant</option>
<option value="manager">Manager</option>
</select> 
```

**JS：**

```
$('#my-select').focus(function() {
    //Store old value
    $(this).data('lastValue',$(this).val());
});
$('#my-select').change(function(e) {

    var lastRole = $(this).data('lastValue');
    var newRole = $(this).val();

    if(confirm("Change user's role from "+lastRole+" to "+newRole+"?"))
    {
        // The control may remain in focus, so we update lastValue here: 
       $(this).data('lastValue',newRole);

        // Do stuff
    }
    else {
        $(this).val(lastRole);
    }
});​ 
```

**小提琴：http:** [//jsfiddle.net/yxzqY/13/](http://jsfiddle.net/yxzqY/13/)

* * *

该问题可以证明如下：

1.  选择“经理”
2.  单击“取消”（所选值 =“助手”）
3.  再次选择“经理”
4.  单击“取消”（选定值 = ***Chrome中的“助手”，选定值 =*** ***FireFox 中***的“经理” ）

我只是被难住了——不知道如何在 Firefox 中使用它，或者如何解决跨浏览器的差异行为。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T20:23:03.067

为什么需要`focus`事件？我认为 Firefox 的问题在于，`focus`当您在实际事件之前从下拉菜单中选择元素时，事件也会触发`change`。

我认为您不需要使代码过于复杂。尝试将`focus`事件更改为数据值的默认初始化。像这样的东西：

```
$('#my-select').each(function() {
    $(this).data('lastValue', $(this).val());
}); 
```

它应该可以正常工作。

**演示：http:** [//jsfiddle.net/yxzqY/17/](http://jsfiddle.net/yxzqY/17/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T20:16:28.990

确定了一个解决方案，如果不是确切的原因 - 当控件通过多项选择保持焦点时，该问题与 Firefox 的行为有关 - 如果您在选择后删除焦点，它将正常运行。

答案是`$(this).blur();`在更改处理程序的末尾添加。

[http://jsfiddle.net/yxzqY/16/](http://jsfiddle.net/yxzqY/16/)

```
$('#my-select').focus(function() {
    //Store old value
    $(this).data('lastValue',$(this).val());
});
$('#my-select').change(function(e) {

    var lastRole = $(this).data('lastValue');
    var newRole = $(this).val();

    if(confirm("Change user's role from "+lastRole+" to "+newRole+"?"))
    {
        // Do stuff
    }
    else {
        $(this).val(lastRole);
    }
    // IMPORTANT!: Firefox will not act properly without this:
    $(this).blur();
}); 
```

# python - Python fcntl 模块在不同的 Linux 内核上是否不同？

> ID：10726883
> 
> 赞同：1
> 
> 时间：2012-05-23T19:52:39.190
> 
> 标签：python, fcntl

我有一个 Python 脚本，它使用 Python fcntl 模块通过文件系统调用进行锁定。

该脚本在 Ubuntu 10.10 版本上运行良好。

但是如果我在 Centos 6.2 主机上运行相同的脚本，脚本会出现以下错误：

*AttributeError：“模块”对象没有属性“F_WRLCK”*

实际代码是：

```
 if Cmd['mode'] == 'r':
        lockType = fcntl.F_RDLCK
    else:
        lockType = fcntl.F_WRLCK 
```

在 Centos 主机上，脚本炸弹在最后一行。

为什么 fcntl 模块在 Centos 6.2 内核上没有 F_WRLCK 属性，但在 Ubuntu 上却有？

仅供参考，Ubuntu 10.10 和 Centos 6.2 都在运行 Python 2.6.6。

有解决方法或解决方案吗？我需要使用 fcntl 而不是群发。

# php - PHP SESSION 变量每次重新加载都会被删除

> ID：10726886
> 
> 赞同：1
> 
> 时间：2012-05-23T19:52:53.883
> 
> 标签：php, session, web, reload

有谁知道什么会导致 $_SESSION 变量被清除？

session 变量用于跟踪购物车中的产品。在开发和生产服务器上一切正常。

突然之间，生产服务器丢失了会话变量 - 没有更新任何更改。生产服务器由 1&1 托管。

我添加了一些调试信息，打印 GET、POST 和 SESSION 的内容。网站链接：http: [//niehues-gmbh.de](http://niehues-gmbh.de)

任何购物车按钮都会更新 SESSION 变量但任何重新加载和其他链接都会删除 SESSION

我确实在 index.php 的开头调用 session_start() 来加载所有其他内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:08:02.087

小心标签。如果有人在另一个选项卡中加载产品详细信息，浏览器会将其视为重新加载或链接，并且正如您所说，会话在这些时间被清除。最好将您的购物车存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:41:08.707

我通过保持 HTML / PHP 标准解决了这个问题。

如果我没记错的话，那么在页眉函数之前有空格会导致页面无法正常工作。

# java - 你会建议什么搜索算法或数据结构？

> ID：10726889
> 
> 赞同：1
> 
> 时间：2012-05-23T19:53:06.647
> 
> 标签：java, algorithm, search, sorting

我有很多`SortedSet<Long>`结构：

```
1, 2, 5, 8, 10, 35, 77, ...
5, 9, 35, 50, 132, ...
2, 4, 8, 15, 17, 23, ...
... hundreds of thousands of such rows... 
```

我需要找到一个数字，比如说，`50`。在这个例子中（如果只有三组）它是`77`. 集合的数量是巨大的 - 数十万。你会建议什么算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:57:55.203

如果我理解正确，这是我的想法：

```
Collection<SortedSet<Long>> sets = //...

long minAfter50 = Long.MAX_VALUE;
for (SortedSet<Long> set : sets) {
    final Long first = set.tailSet(51L).first();
    minAfter50 = Math.min(minAfter50, first);
} 
```

这是想法：

*   遍历所有输入集
*   裁剪所有小于或等于 50 的值
*   取裁剪集的第一个参数（保证大于 50）
*   计算上一步收集的最小值

更新（基于*@beerbajay*评论）：如果 SortedSet 实际上是 a `TreeSet`，则以下代码可能会执行得更好。此外，我确保每组中都有任何大于 50 的值：

```
long minAfter50 = Long.MAX_VALUE;
for (TreeSet<Long> set : sets) {
    final Long higher = set.higher(50L);
    if (higher != null && higher < minAfter50) {
        minAfter50 = higher;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T20:01:50.317

如果这就是您允许的所有预计算，那么您唯一能做的就是在每个 SortedSet 上调用 tailSet 并找到最小值。

如果您允许一些额外的数据结构，最简单的做法是跟踪所有集合的并集，然后您只需调用 tailSet 即可。

我怀疑这也不是你想要的答案。也许您可以更好地描述您的限制条件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T20:01:33.193

set 实现为二叉搜索树，最大的数总是在最后。您可以更轻松地搜索大于 50 的数字，始终获得每组中大于 50 的第一个数字。

# machine-learning - 预测 SMO 中的标称值

> ID：10726891
> 
> 赞同：0
> 
> 时间：2012-05-23T19:53:08.983
> 
> 标签：machine-learning, weka, svm

我正在使用 SMO 对标称值进行分类。在我构建分类器之后，我需要预测类，但是分类实例（weka.classifiers.Classifier.classifyInstance）只返回双精度数。

如何使用双数获得原来的名义班级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:21:42.653

假设您在 Java 代码中调用 weka 类，您需要知道在内部，Weka 将所有值作为双精度值处理。

当您创建 时`Attribute`，您向它传递一个字符串数组，其中列出了可能的标称值。该`double`分类返回的是原始数组中所选属性的索引。因此，如果您的代码如下所示：

```
String[] attributeValues = {"a", "b", "c"};
Attribute a = new Attribute("attributeName", attributeValues); 
```

并`classifyInstance()`返回 2，然后它选择的类将是`attributeValues[2]`或“c”。

# php - 使用 xmlhttp 加载的选择不会随表单一起发送

> ID：10726892
> 
> 赞同：0
> 
> 时间：2012-05-23T19:53:09.653
> 
> 标签：php, javascript, html

我正在为一个小型书签网站开发 chrome 扩展。扩展弹出窗口使用浏览器当前 url、标题、选定文本填充表单。问题是，我通过对网络服务器的 javascripts xmlhttp 调用在表单中加载了一个带有选择选项的 div。

当我发送表单时，选择选项中的选定选项不会与表单的其余部分一起发送。

表格：

```
<form action="removed" method="post" enctype="multipart/form-data" name="popup_form">
        <span class="input_header">Titel</span>
        <input class="calendar_add_form_Date" type="text" name="title">

        <span class="input_header">URL</span>
        <input class="calendar_add_form_Date" type="text" name="url">

                <span class="input_header">NOTE</span>
      <textarea id="note" name="note" style="height: 60px;"></textarea>

      <span class="input_header">Tags</span>
      <input class="calendar_add_form_Date" type="text" id="tags" name="tags">
      <div id="url"></div>

</div>
</div>

<div id="popup_footer"><input class="btn btn_blue" style="" value="&nbsp;Add&nbsp;" type="submit"/>

<div id="sets">
</div> 
```

稍后阅读

javascript调用：

```
function loadSets()
{
var xmlhttp;
  xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange=function()
  {
    if(xmlhttp.readyState==4 && xmlhttp.status==200)
    {
      document.getElementById("sets").innerHTML=xmlhttp.responseText;
    }
  }
  xmlhttp.open("POST","link[1]",true);
  xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
  xmlhttp.send();
} 
```

链接 [1] 输出以下内容：

```
<select name="sets">
<option value="1">One</option>
<option value="2">Two</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:09:16.587

我在您的 HTML 中看到`</div>`的 s 多于s 。`<div>`我怀疑您生成的 HTML 无效，并且该`<form>`元素被隐式关闭的时间比您希望的要早 - 因此，您注入的元素不在表单中。

在 Chrome 的“检查元素”之类的东西中查看生成的 DOM 树可能是有益的。

# sql - 获取存储过程 sqlplus 的执行计划

> ID：10726893
> 
> 赞同：0
> 
> 时间：2012-05-23T19:53:10.570
> 
> 标签：sql, oracle, plsql, sqlplus

所以我对使用 sqlplus 并查看执行计划相当陌生。我通常做的是以下内容：

```
set timing on;
set autotrace on;
"sql statement goes here" 
```

我知道这通常是针对简单/单独的 sql 语句完成的，而您不能对存储过程执行相同的操作。

但我想知道是否要从存储过程中取出所有 sql 语句并将它们放入脚本中并一个接一个地运行。或者只是运行整个过程。有没有办法可以将每个执行计划记录到 txt 文件中，以便查看它们。

或者有没有办法查看存储过程的执行计划？

非常感谢任何帮助或建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T01:31:17.823

我还没有尝试过，但我认为你可以。[DBMS_XPLAN.DISPLAY_CURSOR](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_xplan.htm#i998364)使用 sql_id。您必须在过程中查找 DML 语句的 sql_id，这可能有点麻烦，但我认为它们应该在缓存中保留足够长的时间。

如果您尝试分析 PL/SQL 块的性能，您可能还想查看[DBMS_PROFILER](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_profil.htm)。

# c# - 正则表达式姓氏，名字到名字，姓氏

> ID：10726897
> 
> 赞同：-3
> 
> 时间：2012-05-23T19:53:33.377
> 
> 标签：c#, .net

我需要 2 个正则表达式，其中一个输入是：

```
LastName, FirstName 
```

结果应该是

```
FirstName, LastName 
```

第二个正则表达式应该只给我名字

如果您认为我需要担心 Jr、Sr、II 等，请告诉我。如果是这样，可能需要更复杂的 Regex。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T19:56:24.267

使用`String.Split(",")`并反转结果数组。

有关更复杂的名称解析代码，请查看此处： http:
[//www.codekeep.net/snippets/a57fa506-0afe-4b60-8033-3589eb776315.aspx](http://www.codekeep.net/snippets/a57fa506-0afe-4b60-8033-3589eb776315.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T20:02:34.450

```
var input = "LastName, FirstName";
var result = string.Join(",", input.Split(',').Reverse()); 
```

对于正确的空格：

```
var input = "LastName, FirstName";
var result = string.Join(", ", input.Split(',').Select(s => s.Trim()).Reverse()); 
```

# javascript - JavaScript中的随机字母数字字符串？

> ID：10726909
> 
> 赞同：256
> 
> 时间：2012-05-23T19:54:32.160
> 
> 标签：javascript, random

在 JavaScript 中生成随机字母数字（大写、小写和数字）字符串以用作可能唯一标识符的最短方法（在合理范围内）是什么？

* * *

## 回答 #1

> 赞同：397
> 
> 时间：2012-09-19T20:40:12.513

我刚刚发现这是一个非常好的和优雅的解决方案：

```
Math.random().toString(36).slice(2) 
```

关于此实现的注意事项：

*   这将产生一个长度介于 0 到 12 个字符之间的字符串，通常为 11 个字符，因为浮点字符串化会删除尾随零。
*   它不会生成大写字母，只会生成小写字母和数字。
*   因为随机性来自`Math.random()`，所以输出可能是可预测的，因此不一定是唯一的。
*   即使假设是一个理想的实现，输出也最多有 52 位的熵，这意味着在生成大约 70M 的字符串后，您可以预期会出现重复。

* * *

## 回答 #2

> 赞同：336
> 
> 时间：2012-05-23T20:13:58.367

如果您只想允许特定字符，您也可以这样做：

```
function randomString(length, chars) {
    var result = '';
    for (var i = length; i > 0; --i) result += chars[Math.floor(Math.random() * chars.length)];
    return result;
}
var rString = randomString(32, '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'); 
```

这是一个 jsfiddle 来演示：http: [//jsfiddle.net/wSQBx/](http://jsfiddle.net/wSQBx/)

另一种方法是使用一个特殊的字符串来告诉函数使用什么类型的字符。你可以这样做：

```
function randomString(length, chars) {
    var mask = '';
    if (chars.indexOf('a') > -1) mask += 'abcdefghijklmnopqrstuvwxyz';
    if (chars.indexOf('A') > -1) mask += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    if (chars.indexOf('#') > -1) mask += '0123456789';
    if (chars.indexOf('!') > -1) mask += '~`!@#$%^&*()_+-={}[]:";\'<>?,./|\\';
    var result = '';
    for (var i = length; i > 0; --i) result += mask[Math.floor(Math.random() * mask.length)];
    return result;
}

console.log(randomString(16, 'aA'));
console.log(randomString(32, '#aA'));
console.log(randomString(64, '#A!')); 
```

小提琴：http: [//jsfiddle.net/wSQBx/2/](http://jsfiddle.net/wSQBx/2/)

或者，要使用如下所述的 base36 方法，您可以执行以下操作：

```
function randomString(length) {
    return Math.round((Math.pow(36, length + 1) - Math.random() * Math.pow(36, length))).toString(36).slice(1);
} 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2015-06-18T20:49:18.747

JAR.JAR.beans 提出的另一种答案变体

```
(Math.random()*1e32).toString(36) 
```

通过更改乘数`1e32`，您可以更改随机字符串的长度。

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2017-06-19T04:33:10.920

更新：单行解决方案，随机 20 个字符（字母数字小写）：

```
Array.from(Array(20), () => Math.floor(Math.random() * 36).toString(36)).join(''); 
```

或者用 lodash 更短：

```
_.times(20, () => _.random(35).toString(36)).join(''); 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2014-02-25T23:51:44.017

或者以 Jar Jar 的建议为基础，这是我在最近的一个项目中使用的（以克服长度限制）：

```
var randomString = function (len, bits)
{
    bits = bits || 36;
    var outStr = "", newStr;
    while (outStr.length < len)
    {
        newStr = Math.random().toString(bits).slice(2);
        outStr += newStr.slice(0, Math.min(newStr.length, (len - outStr.length)));
    }
    return outStr.toUpperCase();
}; 
```

采用：

```
randomString(12, 16); // 12 hexadecimal characters
randomString(200); // 200 alphanumeric characters 
```

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2016-07-04T16:58:22.353

这个更干净

```
Math.random().toString(36).substr(2, length) 
```

例子

```
Math.random().toString(36).substr(2, 5) 
```

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2018-01-04T00:33:08.533

我认为以下是允许给定长度的最简单的解决方案：

```
Array(myLength).fill(0).map(x => Math.random().toString(36).charAt(2)).join('') 
```

这取决于箭头函数语法。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2017-06-21T14:07:31.770

```
function randomString(len) {
    var p = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
    return [...Array(len)].reduce(a=>a+p[~~(Math.random()*p.length)],'');
} 
```

概括：

> 1.  创建一个我们想要的大小的数组（因为在 javascript.js 中没有`range(len)`等价物。
> 2.  对于数组中的每个元素：从中选择一个随机字符`p`并将其添加到字符串中
> 3.  返回生成的字符串。

一些解释：

`[...Array(len)]`

Array(len) 或 new Array(len)[创建一个带有未定义指针的数组](https://stackoverflow.com/a/5501711/1907998)。单线将更难实现。[Spread 语法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator)方便地定义了指针（现在它们指向未定义的对象！）。

`.reduce(`

[在这种情况下，将数组缩减](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)为单个字符串。[reduce 功能在大多数语言中都很常见](https://en.wikipedia.org/wiki/Fold_(higher-order_function))，值得学习。

`a=>a+...`

我们正在使用[箭头函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)。

`a`是*累加器。*在这种情况下，它是我们完成后要返回的最终结果字符串（你知道它是一个字符串，因为 reduce 函数的第二个参数，*initialValue*是一个空字符串：） `''`。所以基本上：用 转换数组中的每个元素`p[~~(Math.random()*p.length)]`，将结果附加到`a`字符串并`a`在完成后给我。

`p[...]`

`p`是我们从中选择的字符串。您可以像索引一样访问字符串中的字符（例如，`"abcdefg"[3]`给我们`"d"`）

`~~(Math.random()*p.length)`

[`Math.random()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random)返回 [0, 1) 之间的浮点数`Math.floor(Math.random()*max)` [是在 javascript 中获取随机整数的事实标准](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random#Getting_a_random_integer_between_two_values)。[`~`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#Bitwise_NOT)是 javascript 中的按位 NOT 运算符。 `~~`是一种更短，可以说有时更快，而且绝对更有趣的表达方式`Math.floor(` [这里有一些信息](https://stackoverflow.com/a/5971774/1907998)

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2014-06-30T19:01:05.353

32 个字符：

```
for(var c = ''; c.length < 32;) c += Math.random().toString(36).substr(2, 1) 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2016-04-26T07:54:09.617

使用 lodash：

```
function createRandomString(length) {
        var chars = "abcdefghijklmnopqrstufwxyzABCDEFGHIJKLMNOPQRSTUFWXYZ1234567890"
        var pwd = _.sampleSize(chars, length || 12)  // lodash v4: use _.sampleSize
        return pwd.join("")
    }
document.write(createRandomString(8))
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.min.js"></script>
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2012-05-23T19:56:26.963

随机字符：

```
String.fromCharCode(i); //where is an int 
```

随机整数：

```
Math.floor(Math.random()*100); 
```

把它们放在一起：

```
function randomNum(hi){
    return Math.floor(Math.random()*hi);
} 
function randomChar(){
    return String.fromCharCode(randomNum(100));
}
function randomString(length){
   var str = "";
   for(var i = 0; i < length; ++i){
        str += randomChar();
   }
   return str;
}
var RandomString = randomString(32); //32 length string 
```

小提琴：http: [//jsfiddle.net/maniator/QZ9J2/](http://jsfiddle.net/maniator/QZ9J2/)

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2017-04-19T18:38:28.287

随机密钥生成器

keyLength 参数是您想要的键的字符长度

```
function keyGen(keyLength) {
    var i, key = "", characters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    var charactersLength = characters.length;

    for (i = 0; i < keyLength; i++) {
        key += characters.substr(Math.floor((Math.random() * charactersLength) + 1), 1);
    }

    return key;
}

keyGen(12)
"QEt9mYBiTpYD" 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-01-19T18:26:58.397

当我看到这个问题时，我想到了何时必须生成 UUID。我不能相信代码，因为我确信我在 stackoverflow 上找到了它。如果您不想要字符串中的破折号，请取出破折号。这是功能：

```
function generateUUID() {
    var d = new Date().getTime();
    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c) {
        var r = (d + Math.random()*16)%16 | 0;
        d = Math.floor(d/16);
        return (c=='x' ? r : (r&0x7|0x8)).toString(16);
    });
    return uuid.toUpperCase();
} 
```

小提琴：http: [//jsfiddle.net/nlviands/fNPvf/11227/](http://jsfiddle.net/nlviands/fNPvf/11227/)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-05-19T08:36:14.347

```
var randomString = function(length) {
  var str = '';
  var chars ='0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz'.split(
      '');
  var charsLen = chars.length;
  if (!length) {
    length = ~~(Math.random() * charsLen);
  }
  for (var i = 0; i < length; i++) {
    str += chars[~~(Math.random() * charsLen)];
  }
  return str;
}; 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-08-10T13:03:14.777

这个函数应该给出一个任意长度的随机字符串。

```
function randString(length) {
    var l = length > 25 ? 25 : length;
    var str = Math.random().toString(36).substr(2, l);
    if(str.length >= length){
        return str;
    }
    return str.concat(this.randString(length - str.length));
} 
```

我已经通过以下成功的测试对其进行了测试。

```
function test(){
    for(var x = 0; x < 300000; x++){
        if(randString(x).length != x){
            throw new Error('invalid result for len ' + x);
        }
    }
} 
```

我选择 25 的原因是因为实际上返回的字符串`Math.random().toString(36).substr(2, 25)`长度为 25。这个数字可以根据需要更改。

此函数是递归的，因此调用具有非常大值的函数可能会导致`Maximum call stack size exceeded`. 通过我的测试，我能够获得长度为 300,000 个字符的字符串。

通过将字符串作为第二个参数发送给函数，可以将此函数转换为尾递归。我不确定 JS 是否使用 Tail 调用优化

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-05-16T14:52:38.360

很好很简单，而且不限于一定数量的字符：

```
let len = 20, str = "";
while(str.length < len) str += Math.random().toString(36).substr(2);
str = str.substr(0, len); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-05-08T08:28:16.973

这是一个生成随机字符串字母表的简单代码。看看这段代码是如何工作的。

`go(lenthOfStringToPrint);`- 使用此函数生成最终字符串。

```
var letters = {
  1: ["q","w","e","r","t","y","u","i","o","p","a","s","d","f","g","h","j","k","l","z","x","c","v","b","n","m"],
  2: ["Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"]
},i,letter,final="";
random = (max,min) => {
  return Math.floor(Math.random()*(max-min+1)+min);
}
function go(length) {
  final="",letter="";
  for (i=1; i<=length; i++){
    letter = letters[random(0,3)][random(0,25)];
    final+=letter;
  }
  return final;
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-09-25T13:54:13.280

可以只使用 lodash [uniqueId](https://lodash.com/docs/4.17.15#uniqueId)：

```
 _.uniqueId([prefix='']) 
```

> 生成唯一 ID。如果给出了前缀，则将 ID 附加到它上面。

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2016-06-16T22:01:39.617

使用 md5 库：[https ://github.com/blueimp/JavaScript-MD5](https://github.com/blueimp/JavaScript-MD5)

最短的方法：

`md5(Math.random())`

如果要将大小限制为 5：

`md5(Math.random()).substr(0, 5)`

# ruby-on-rails - Corey Haines 在 GoGaRuCo 2011 上使用了哪些测试工具和方法？

> ID：10726912
> 
> 赞同：7
> 
> 时间：2012-05-23T19:54:57.900
> 
> 标签：ruby-on-rails, ruby, testing

在[GoGaRuCo 2011 的这段视频中](http://lanyrd.com/2011/gogaruco/shmhw/)，Corey Haines 展示了一些使 Rails 测试套件更快的技术。我将其总结如下：

*   将尽可能多的代码放在 Rails 应用程序之外，放入其他模块和类中
*   单独测试这些，没有加载 Rails 的开销
*   在 Rails 应用程序中使用它们

不过，有几件事我不明白。

*   他交替使用`rspec`和`spn`或运行测试`spna`（例如，大约在 3:50）。是`spn`一种众所周知的工具吗？
*   在他对非 Rails 类和模块的测试中，他包含了正在测试的模块或类，但我没有看到他包含类似`spec_helper`. 他如何获得 Rspec？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-23T20:50:05.837

很抱歉造成混乱。`spn`并且`spna`是我将我的非 Rails 代码添加到 rspec 的加载路径的别名。`-I path_to_code`除了在命令行上添加 a 之外，它们并没有什么特别之处。

这些天来，我在我的文件中添加了这样的`.rspec`内容：

```
-I app/mercury_app 
```

然后我可以`require 'object_name'`在我的规格顶部做简单的事情。

至于不包括`spec_helper`：这是真的，我没有。当您使用 执行规范文件时`rspec <path_to_spec_file>`，它会被解释，因此您不需要`rspec`明确要求。

这些天来，对于我的数据库规范，我还构建了一个`active_record_spec_helper`需要 active_record，建立到测试数据库的连接，并设置`database_cleaner`；这让我可以在我的规范文件顶部简单地要求我的模型。这样，我可以针对 db 测试 AR 代码，而无需加载我的整个应用程序。

我在使用这些技术的地方工作的客户有兴趣支持一些关于此的博客文章，因此希望它们将在 6 月中旬开始发布。

# html - 我可以在 HTML5 中嵌入一个原子提要吗？ 标签？

> ID：10726916
> 
> 赞同：2
> 
> 时间：2012-05-23T19:55:17.713
> 
> 标签：html, rss, atom-feed

我希望能够显示来自嵌入在 html 网页上的 atom 提要的信息。我认为这可能与 HTML5`<embed>`标签是可能的，例如：

```
 <object data="https://github.com/cboettig.atom" width="200" height="200">
    <embed src="https://github.com/cboettig.atom" width="200" height="200"> </embed>
    Loading...
    </object> 
```

但没有运气。有什么建议么？这可以在没有一些[额外的 javascript](http://www.bloggermint.com/2012/01/easiest-way-to-embed-rssatom-feed-on-any-web-page/)的情况下完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:24:51.980

如果提要具有 .xml 扩展名，您的代码将可以工作并且嵌入原始数据。

我不确定您是要嵌入原始提要数据，还是经过解析和格式化的提要数据。提要解析必须在客户端或服务器端完成。如果您不想使用 javascript，则可以在服务器端解析提要。如果我的猜测是正确的，并且您想在 Jekyll 支持的网站上显示提要，那么 Rails 有一个很棒的提要解析宝石，称为[feedzirra](https://github.com/pauldix/feedzirra)。

# c# - Resharper 将自动属性转换为完整属性

> ID：10726918
> 
> 赞同：29
> 
> 时间：2012-05-23T19:55:27.627
> 
> 标签：c#, .net, visual-studio-2010, properties, resharper

我在这里发现[了相反的情况](http://www.jetbrains.com/resharper/webhelp/Refactorings__Convert_Property_to_Auto-Property.html)，但我需要经常从自动属性更改为完整属性 - 是否可以自动化（也许还有一个快捷方式）：

## 从自动属性

```
public string FirstName { get; set; } 
```

## 带有支持字段的属性

```
 private string _firstName;

    public string FirstName
    {
        get
        {
            return _firstName;
        }
        set
        {
            _firstName = value;
        }
    } 
```

*显然，然后我会进一步更改整个属性...*

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-23T19:58:23.723

将光标放在属性名称上，然后等待一两秒钟。按 Resharper 热键序列（Alt-Enter），第二个选项应该是“To property with backing field”，这是您想要的。

或者，您可以单击左边距中的“锤子”图标以获取该选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T14:37:30.263

要使其工作（ALT-Enter），您必须配置 resharper 键盘模式。VS -> 工具 -> 选项 -> ReSharper -> 常规 -> 选项 -> 键盘和菜单 -> Resharper 键盘架构 -> Visual Studio

# python - 当类状态无效时会引发什么错误？

> ID：10726919
> 
> 赞同：36
> 
> 时间：2012-05-23T19:55:30.663
> 
> 标签：python, exception

在 Python 类中，如果在运行该方法之前必须更改类的某些其他属性，我应该从实例方法中引发什么类型的错误？

我来自 C# 背景，我会使用`InvalidOperationException`“当方法调用对对象的当前状态无效时引发的异常”，但我在 Python 中找不到等效的[内置异常](http://docs.python.org/library/exceptions.html)。

当问题出在函数参数上时，我一直在引发`ValueError`（“当内置操作或函数接收到具有正确类型但值不适当的参数时引发”）。我想这在技术上是参数的无效值`self`；这是正确的治疗方法吗？例如，这是惯用的：`raise ValueError("self.foo must be set before running self.bar()")`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-23T20:39:34.310

`ValueError`在这种情况下最好提出。对于 python，您应该更喜欢使用[内置的异常类型](http://docs.python.org/library/exceptions.html)而不是创建自己的异常类型。仅当您期望需要捕获它并且行为与捕获内置类型时的行为非常不同时，您才应该创建新的异常类型。在这种情况下，不应该出现这种情况——您不希望看到这种情况，因为这表明使用相关类时出现错误。为此，仅仅为了让它有另一个名字而创建一个新类型是不值得的——这就是你传递给的消息字符串`ValueError()`的用途。

是否有可能重组你的班级，使这种无效状态是不可能的？

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-09-04T12:40:33.687

我发现`RuntimeError`最适合表示无效状态的所有内置异常。

请参阅这个如何在 CPython 中使用它的示例：

```
Python 2.7.10 (default, Jul 13 2015, 12:05:58)
[GCC 4.2.1 Compatible Apple LLVM 6.1.0 (clang-602.0.53)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from threading import Thread
>>> Thread().join()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/Cellar/python/2.7.10_2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py", line 938, in join
    raise RuntimeError("cannot join thread before it is started")
RuntimeError: cannot join thread before it is started 
```

重要的是要注意，即使 CPython 实现本身在库之间使用特定异常类型方面也不一致。有时会`ValueError`被使用，但是在我看来，Python 文档中的描述表明它的使用是为其他情况保留的。`RuntimeError`是一个更普遍的例外，当一段代码即使给出正确的输入也不能正确运行时，应该使用它，这有点类似于对象处于无效状态时的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T20:12:36.480

```
class InvalidOperationException(Exception):
    pass

SYS_STATE = 1

def something_being_run():
    if SYS_STATE < 2:
        raise InvalidOperationException 
```

你的意思是这样的吗？我看不出你为什么不应该对异常进行子类化来创建自己的异常类型，但这可能只是我的旧 Oracle PL/SQL Dev 出来了......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T20:46:10.147

我认为 pythonic 的方式不是让对象处于这样一种状态，即尽管处于错误状态，方法调用也不会崩溃。这些是最难发现的错误，因为程序最终崩溃的地方并不是错误发生的地方。

例如。

```
class PseudoTuple(object):
    """
The sum method of PseudoTuple will raise an AttributeError if either x or y have
not been set
"""
    def setX(self, x):
        self.x = x

    def setY(self, y):
        self.y = y

    def sum(self):
        """
In the documentation it should be made clear that x and y need to have been set
for sum to work properly
"""
        return self.x + self.y

class AnotherPseudoTuple(PseudoTuple):
     """
For AnotherPseudoTuple sum will now raise a TypeError if x and y have not been 
properly set
"""
    def __init__(self, x=None, y=None):   
        self.x = x
        self.y = y 
```

不应该做的是

```
class BadPseudoTuple(PseudoTuple):
    """
In BadPseudoTuple -1 is used to indicate an invalid state
"""
    def __init__(self, x=-1, y=-1):
        self.x = x
        self.y = y

    def sum(self):
        if self.x == -1 or self.y == -1:
            raise SomeException("BadPseudoTuple in invalid state")
        else:
            return self.x + self.y 
```

我认为这属于pythonic的座右铭：

> 请求宽恕比获得许可更容易

如果异常状态是可以预期在正常执行过程中发生的事情，而不是由于滥用类而导致的用户错误，那么您应该创建自己的异常似乎是合理的。StopIteration 和迭代器就是一个例子。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-28T03:04:18.053

`ValueError`对我来说还可以，但我认为`AssertionError`更合适。基本上，它违反了 API 设计者的断言。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-23T20:49:36.463

我认为你应该[`ValueError`](http://docs.python.org/library/exceptions.html#exceptions.ValueError)在问题出在函数参数上时提出问题，就像你正在做的那样，[`AttributeError`](http://docs.python.org/library/exceptions.html#exceptions.AttributeError)当问题出在必须设置的属性上时。

此外，您可以对 进行子类化`AttributeError`以制作更具体的异常，但我认为没有必要。您的错误消息的`AttributeError`异常很清楚。

# api - 自动 API 包装器/生成器

> ID：10726920
> 
> 赞同：3
> 
> 时间：2012-05-23T19:55:30.790
> 
> 标签：api, generator

我正在考虑使用 Galaxy Project 作为 Lucene 的前端。这是一门关于搜索的介绍性大学课程，因此并非每个人都有编程经验。即使有编程经验，真正重要的不是实现，而是数据的编程转换。Galaxy 为使用各种配置和数据转换的显式假设检验提供了一个很好的界面。

我们正在使用 Get/REST/SOA 接口 + [Meemoo](http://meemoo.org/)和大量 JS，但我们必须从头开始构建所有内容。但是 Galaxy 的批处理接口允许我们将学习模块扩展到解析器。

无论如何，Galaxy 的各种模块都可以通过命令行进行交互，这些模块只是[XML 配置文件](http://wiki.g2.bx.psu.edu/Admin/Tools/Tool%20Config%20Syntax#A.3Ccommand.3E_tag_set)：

```
<command interpreter="python">sorter.py -i $input -o $out_file1 -cols $column</command> 
```

是否有任何框架可以用来从现有的命令行 API 生成 XML 文件？我知道我可以做正则表达式，但这需要像手动创建 API 的子集一样长的时间来构建......

抱歉，如果这太基本了，“自动 API 包装器”等会导致搜索结果不佳：/

谢谢！

# coldfusion - 设置 CFIF 的问题

> ID：10726924
> 
> 赞同：0
> 
> 时间：2012-05-23T19:55:42.190
> 
> 标签：coldfusion, if-statement

```
<cfoutput query="allOutcomes" maxrows="10">
  <div class="galleryOutcome">
    <cfset thisPhoto = uploads.listPhotobyOutcomeID(#outcomeID#)>
    <h3>#lastname#, #firstname#</h3>
    <cfloop query="thisPhoto" >
      <cfif isdefined(filename)>

        <div class="gallerythumb">
          <a href="javascript: thumbExpand('#fileName#')"><img src="documents/uploads/PHOTOS/#filename#" alt="#filename#" border="0"  width="200"/></a>
        </div>

      <cfelse>
        <p> NO PHOTOS </p>
      </cfif>
    </cfloop>

  </div><div class="clear"></div><br /><br />
  <div onClick="javascript: thumbHide()" id="thumbexpand" style="display:none; left:670px;; height:0px; position:fixed; top:100px;">                    
  </div>

</cfoutput> 
```

我一直在努力使#lastname# 和#firstname# 如果没有与之关联的照片就不会显示。我尝试做一个 cfif 来检查文件名是否已定义，但它似乎不起作用。它返回一个错误说：

“函数 IsDefined 的参数 1，现在是（图像的文件路径），必须是语法上有效的变量名。”

有小费吗？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-23T20:05:16.140

首先，`IsDefined`需要一个变量的*名称*。当您省略引号或使用 # 符号时，您正在传递变量*值*。正确的语法是：

```
 <cfif IsDefined("variableName")> 
```

但是，查询列始终存在。所以无论如何它都不会产生正确的结果。相反，您应该测试`FileExists`. 如果需要，使用 expandPath 生成绝对物理路径

```
 <cfif FileExists( ExpandPath("/path/to/images/"& thisPhoto.fileName) )>
        it exists. do something ...
   <cfelse>
        no photo
   </cfif> 
```

**编辑：**正如 Busches 在评论中提到的那样，通常[`structKeyExists`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fbb.html)比`IsDefined`它的结果更精确。有些人可能会争辩说它也有更好的性能。但在大多数情况下，任何差异都可以忽略不计。提高准确性是 IMO 更令人信服的原因。

```
<cfif structKeyExists( scopeOrStruct, "variableName")> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T20:05:02.180

`isDefined`将变量的名称作为字符串，而不是变量本身。改变

```
<cfif isdefined(filename)> 
```

到

```
<cfif isdefined("filename")> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T20:05:11.250

采用`<cfif len(filename)>`

我猜文件名是列之一？在查询对象中，null 用空字符串表示，所以`len()`可以。

# java - 使用正则表达式的 JSP 文本处理

> ID：10726925
> 
> 赞同：2
> 
> 时间：2012-05-23T19:55:52.410
> 
> 标签：java, regex

我有大量 (>1500) JSP 文件正在尝试转换为 JSPX。我正在使用一个工具来解析格式正确的 JSP 并转换为 JSPX，但是，我的 JSP 并不都是格式正确的 :)

我的解决方案是预处理 JSP 并转换不整洁的代码，以便该工具正确解析它们。我要解决的主要问题是未引用的属性值。例子：

```
<INPUT id="foo" size=1>
<input id=body size="2"> 
```

我当前用于查找这些的正则表达式是（Java 字符串格式）：

```
"(\\w+)=([^\"' >]+)" 
```

我的替换字符串是（Java 字符串格式）：

```
"$1=\"$2\"" 
```

这很好用，除了一些模式，它们都涉及内联脚本。例如：

```
<INPUT id=foo value="<%= someBean.method("a=b") %>"> 
```

在这种情况下，我的模式匹配字符串文字“a=b”，我不想这样做。我想要发生的是正则表达式会忽略 <% 和 %> 之间的任何内容。是否有一个正则表达式可以做我想做的事情？

编辑：更改为标题以澄清我不是试图用正则表达式解析 HTML / JSP...我正在做一个简单的句法转换来准备解析的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T01:40:07.333

基于在 scriptlet 中没有不带引号的属性值的假设，以下构造可能对您有用：

**注意：**这种方法很脆弱。仅供参考。

```
import java.util.regex.*;

public class test{
  public static void main(String args[]){
    String s = "<INPUT id=foo abbr='ip ' name =  bar color =\"blue\" value=\" <%= someBean.method(\" a = b \") %>\" nickname =box  >";
    Pattern p = Pattern.compile("(\\w+)\\s*=\\s*(\\w+[^\"'\\s])");
    Matcher m = p.matcher(s);
    while (m.find())
    { 
      System.out.println("Return Value :"+m.group(1)+"="+m.group(2));
    }
 }
} 
```

输出：

```
Return Value:id=foo
Return Value:name=bar
Return Value:nickname=box 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:46:24.610

如果一个句子包含任意数量的匹配标记（例如双引号），则该句子属于上下文无关语言，它根本无法使用旨在处理常规语言的 Regex 进行解析。

可能有一些简化假设（例如，没有不匹配的双引号，并且只有一定数量的双引号等）允许使用正则表达式，或者您需要考虑使用（创建）词法分析器/解析器上下文无关语言的一个例子。[ANTLR](http://www.antlr.org/)是一个很好的工具。

# perl - Perl - 测试作为成员变量的哈希引用中键的存在

> ID：10726927
> 
> 赞同：1
> 
> 时间：2012-05-23T19:56:06.287
> 
> 标签：perl, hash, exists

我收到以下代码的错误“不是 HASH 引用”。测试作为类成员变量的哈希引用中存在的正确方法是什么？

```
package TestClass;

sub new {
    my ($class) = @_;

    my $self = {
        _ht => \{}
    };

    bless $self, $class;
    return $self;
}

sub itemExists {
    my ($self, $key) = @_;
    my $itemExists = 0;

    if(exists $self->{_ht}->{$key}) { # ERROR HERE: Not a HASH reference
        $itemExists = 1;
    }

    return $itemExists;
}

1;

# ------------------------------------------
package Main;

my $t = new TestClass();
$t->itemExists('A') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T19:58:47.403

在您的构造函数中，您初始化`$self->{_ht}`为`\{}`，这是对 hashref 的引用。将其更改为

```
sub new {
    my ($class) = @_;

    my $self = {
        _ht => {}   # backslash removed
    };

    bless $self, $class;
    return $self;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T19:59:11.650

`$self->{_ht}`不是对哈希的引用。它是对标量的引用。该标量是对哈希的引用。

你要：

```
my $self = {
    _ht => \{},
};

if (exists ${ $self->{_ht} }->{$key})  # Scalar deref added 
```

或者更有可能：

```
my $self = {
    _ht => {},  # Ref to scalar removed
};

if (exists $self->{_ht}->{$key}) 
```

# sql - 来自实例的 SQL 查询计数

> ID：10726936
> 
> 赞同：3
> 
> 时间：2012-05-23T19:56:55.753
> 
> 标签：sql, sql-server

我有一个包含公共汽车和学生注册信息的表格：

```
CREATE TABLE [dbo].[BusSignupInstance](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [StudentId] [int] NOT NULL,
    [BusId] [int] NOT NULL
) ON [PRIMARY] 
```

以下是一些示例数据：

```
Id  StudentId   BusId
1   1   1
2   2   1
3   3   1
4   1   2
5   4   2
6   1   3
7   5   3 
```

我想要总线 ID 的总数。在这种情况下将是：

```
BusId    Num of Students
1      2 (student id 2, 3)
2      1 (student id 4)
3      2 (student id 1, 5) 
```

结果以报名顺序为准，如果学生1报名3次，只有最后一次有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T19:58:07.167

```
SELECT  busId, COUNT(*)
FROM    (
        SELECT  busId, studentId,
                ROW_NUMBER() OVER (PARTITION BY studentId ORDER BY id DESC) rn
        FROM    busSignupInstance
        ) q
WHERE   rn = 1
GROUP BY
        busId 
```

# jquery - 如何快速解除绑定事件的绑定？

> ID：10726937
> 
> 赞同：0
> 
> 时间：2012-05-23T19:57:11.367
> 
> 标签：jquery

我已经绑定了几个这样的事件：

```
$('#window-overlay').on('click', overlayClickHandler);
$clickedObj.on('click', overlayClickHandler); 
```

有没有一些简单的方法，如果我点击这些东西之一，点击事件会从另一个东西中删除？删除它`#window-overlay`很简单，但是 $clickedObj 是`if`块中的一个变量，所以以后可能很难弄清楚处理程序绑定到哪个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:03:13.420

维护一个要取消绑定事件的 jquery 对象数组，根据您的情况，您可以遍历数组并取消绑定必要的对象...您可以使用简洁的 json 结构作为数组值来帮助您区分不同的绑定事件..类似

```
{
eventType: "click",
category: "myCategory1",
object: jqueryObject //or store the  selector if you want to keep a low memory footprint..
} 
```

类别基本上用于对相关事件进行分组，以便您仅取消绑定必要的事件。

我不确定是否有更简单的选择，但这是一种方法，至少它比找到所有带有事件绑定的控件要好

# asp.net-mvc-3 - 在asp.net mvc 3上将数据从视图传递到控制器

> ID：10726944
> 
> 赞同：0
> 
> 时间：2012-05-23T19:57:48.170
> 
> 标签：asp.net-mvc-3, c#-4.0, view, controller

我在将数据从视图传递到控制器时遇到问题，我的视图是用我的视图模型“TimeLineModel”强类型的，在第一个视图中，我从控制器上的操作传递给这个视图我的视图模型

```
public ActionResult confirmation(long socialbuzzCompaignId)
    {

      return View(new TimeLineModel() { socialBuzzCompaignId = socialbuzzCompaignId, BuzzMessages = model });

    } 
```

有了这个，我可以从我的操作中获取信息并将其显示在视图中，但是我有其他操作 POST，我不会让我的视图模型做一些 traitement

```
 [HttpPost]
    public ActionResult confirmation(TimeLineModel model)
    {

    } 
```

我可以获得模型的一些属性，但在其他情况下没有，例如我可以获得模型的属性“socialBuzzCompaignId”，但其他属性如“IEnumerable BuzzMessages”我无法获得它，我现在不知道为什么！这是我观点的内容

```
 @model Maya.Web.Models.TimeLineModel   
  @{
       ViewBag.Title = "confirmation";
    }
  @using (Html.BeginForm())
   {
     <h2>confirmation</h2>
       <fieldset>                       
          @foreach (var msg in Model.BuzzMessages)
          {                      
            <div class="editor-label">
              @msg.LongMessage
           </div>
           <br />
      }

    <p>
        <input type="submit" value="Save" />
    </p>

  </fieldset>

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:25:30.190

就像任何 HTML POST 方法一样，您必须以某种方式将数据返回给控制器。只是简单地“显示”页面上的数据并不会重新绑定它。

您必须将数据放入适当的模型属性名称的输入（或将回发的控件）中。

因此，如果您有一个名为 FirstName 的模型属性，并且您希望在 POST 上将此数据重新绑定到模型，则必须通过将“输入隐藏”（或回发的类似控件）与FirstName 的 ID 将在 POST 上将该属性重新绑定到模型。

希望能解释一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T12:39:08.263

```
@foreach (var msg in Model.BuzzMessages)
{                      
    <div class="editor-label">
        @msg.LongMessage
        <input type="hidden" name="BuzzMessages.LongMessage" value="@msg.LongMessage" />
    </div>
} 
```

它将发布 LongMessages 数组。获取如下值：

```
[HttpPost]
public ActionResult confirmation(TimeLineModel model, FormCollection collection)
{
    var longMessages = collection["BuzzMessages.LongMessage"];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T14:36:00.460

您需要在表单元素中包含 BuzzMessages 属性。由于它不可编辑，您可能想要使用隐藏。有两种方法可以做到这一点。最简单的不是`foreach`循环，而是`for`循环并按索引插入它们。

```
@for (int i =0; i<Model.BuzzMessages.Count(); i++v)
{                      
    <div class="editor-label">
          @Model.BuzzMessages[i].LongMessage
          @Html.HiddenFor(m => m.BuzzMessages[i].LongMessage);
    </div>
       <br />
} 
```

但要做到这一点，您需要在视图模型中使用 IList 而不是 IEnumerable 来按索引访问。

或者，您可以创建一个以 BuzzMessages 类命名的编辑器模板（无论它的名称是什么）。

```
@model BuzzMessagesClass

@Html.HiddenFor(m => m.LongMessages)
<!-- Include other properties here if any --> 
```

然后在你的主页

```
@Html.EditorFor(m => m.BuzzMessages) 
```

如果编辑器模板的细节让您感到困惑，请查看[http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/](http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/)或搜索堆栈溢出。

# ios - 是否可以在 iPad 应用程序中嵌入 C 编译器？

> ID：10726945
> 
> 赞同：-4
> 
> 时间：2012-05-23T19:57:48.560
> 
> 标签：ios

我很快就要出差了，我希望能够在我的 iPad 上用 C 语言进行开发。我知道 Apple 不会让这样的应用程序进入商店，但它对我很有用。所以问题是如何将 C 编译器放入应用程序中，以及如何能够在那里运行程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:01:08.413

我建议使用 SSH 连接应用程序连接到可以访问 C 编程环境和编译器的计算机。这确实需要使用第二台计算机，但设置起来并不难，并且还允许访问其他实用程序。我过去在我的 iPhone 上使用过这个，所以我可以确认它有效。App Store 上有许多 SSH / VPN 应用程序，但我不能特别推荐一款用于 iPad。与 Code2Go 应用程序不同，这可以是免费的。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:14:00.113

首先，您需要越狱您的 iDevice（网上有很多分步教程），然后启动 Cydia 商店，在 Cydia 中查找“开发”部分并`GNU C Compiler`安装在您的 iDevice 中安装编译器后，建立 ssh 连接（在 Windows 上使用 Putty 或在 linux 上的终端中输入 ssh）在您喜欢的编辑器中编辑源代码并通过 ssh 上传它们（在 Windows 上使用 WinSCP 或在终端中输入 scp在 Linux 上）

上传文件后，在您已经在 iDevice 上建立的 ssh 会话中调用编译命令，您应该能够在设备中编辑/上传/编译/修复或运行您的程序，而不受 Apple 限制

如果您需要有关整个过程的更多详细信息，请发表评论

# javascript - 动态加载视图，telerik mvc

> ID：10726962
> 
> 赞同：1
> 
> 时间：2012-05-23T19:58:47.060
> 
> 标签：javascript, jquery, asp.net-mvc, telerik, telerik-mvc

我正在尝试使用`$.ajax()`. 我有查看**人员**的操作：**Index**，**Create**，**Delete**。页面**Create**有一个**Telerik MVC 网格**。当我在页面**索引**并**加载**页面**创建**时出现问题，使用**ajax 调用**替换当前页面的内容。页面已完全加载，但**网格不起作用**，`$('#gridname').data('tGrid')`返回**undefined**。

JavaScript 代码示例。

```
$.ajax({
    url: '/Person/Create',
    contentType: 'application/html; charset=utf-8',
    type: 'GET',
    dataType: 'html',
    cache: false,
    success: function (data) {
        $('#main').html($(data).fadeIn(fade));
    }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:23:02.010

我多次遇到这个问题。问题是，当呈现局部视图上的 Telerik 控件时，它会添加一个`script`带有初始化控件所需的 JavaScript 的标签。如果`script`您使用`$.ajax`. 尝试以下操作：

```
$('#main').load('/Person/Create'); 
```

`jQuery.load`不串出`script`标签。

编辑：

看起来不仅仅是`load`. Telerik 在这里有一篇关于它的文章：

[http://www.telerik.com/help/aspnet-mvc/using-with-partial-views-loaded-via-ajax.html](http://www.telerik.com/help/aspnet-mvc/using-with-partial-views-loaded-via-ajax.html)

基本上，您需要确保页面中引用了 Telerik 脚本（因为它们不会被自动添加）并且您必须使用 ajax 来绑定数据。

# java - java XMLSerializer 避免复杂的空元素

> ID：10726974
> 
> 赞同：3
> 
> 时间：2012-05-23T19:59:57.557
> 
> 标签：java, xmlserializer

我有这个代码：

```
 DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    DOMImplementation impl = builder.getDOMImplementation();
    Document xmldoc = impl.createDocument(null, null, null);

    Element root = xmldoc.createElement("root");
    Element textElement = xmldoc.createElement("text");
    Text textNode = xmldoc.createTextNode("");
    root.appendChild(textElement);
    textElement.appendChild(textNode);

    OutputFormat of = new OutputFormat("XML","UTF-8",true);
    of.setIndent(1);
    of.setIndenting(true);

    ByteArrayOutputStream stream = new ByteArrayOutputStream();

    XMLSerializer serializer = new XMLSerializer(stream, of);
    // As a DOM Serializer
    serializer.asDOMSerializer();
    serializer.serialize(root);

    System.out.println(stream.toString()); 
```

我要安慰一下：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <text/>
</root> 
```

但是，我想得到这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <text></text>
</root> 
```

有谁知道，如何设置 XMLSerializer 以避免复杂的空元素？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T21:20:17.097

**结果：**我认为这是不可能的。XMLSerializer 不支持这样的配置。

**分析：**`serializer.serialize(root)`调用时， 会调用[BaseMarkupSerializer的serialize(Element)](http://grepcode.com/file/repository.jboss.org/maven2/xerces/xerces/2.4.0/org/apache/xml/serialize/BaseMarkupSerializer.java#BaseMarkupSerializer.serialize%28org.w3c.dom.Element%29)方法。它定义了您传递给序列化的节点类型并选择适当的方式来处理它。

当涉及到文本节点时，它会调用[XMLSerializer 的 serializeElement(Element)](http://grepcode.com/file/repository.jboss.org/maven2/xerces/xerces/2.4.0/org/apache/xml/serialize/XMLSerializer.java#XMLSerializer.serializeElement%28org.w3c.dom.Element%29)方法：

```
// If element has children, then serialize them, otherwise
// serialize en empty tag.       
if (elem.hasChildNodes()) {
    //... irrelevant code...
    endElementIO( null, null, tagName );
} else {
    //... irrelevant code...
    _printer.printText( "/>" ); // <------ HARDCODED, NON-CONFIGURABLE
    //... irrelevant code...
} 
```

**问题：** 如您所见，关闭空元素的方式是硬编码且不可配置的（如果您从源代码中查找完整的代码片段）。

**解决方案：** 由于 XMLSerializer 不是最终的，您可以通过扩展它并覆盖它的方法来创建自己的序列化器。其中一种方式将发生变化：

```
_printer.printText( "/>" ); 
```

到

```
_printer.printText( "</" );
_printer.printText( elem.getTagName() );
_printer.printText( ">" ); 
```

**意见：** 我不确定是否没有干净的解决方案，我认为这个解决方案是最后的解决方案。无论如何，您应该通过源和/或文档查看更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:56:15.043

我在 XMLSerializer 上遇到了同样的问题，它不允许渲染自定义空标签。我的解决方案是扩展原始 XMLSerializer 代码并覆盖 serializeElement 方法：

我复制了原始代码并更改了结束打印部分：

**protected void serializeElement(Element elem) 抛出 IOException** ...

```
if (isSelfClosingElement(elem))
    _printer.printText("/>");
else
_printer.printText("></" + elem.getTagName() + ">"); 
```

其中**isSelfClosingElement**包含一个自关闭元素列表

**注意：**另外，您需要复制**printAttribute()**和**printNamespaceAttr()**方法，因为它被标记为私有而不是受保护。

# c# - 如何为属性定义别名

> ID：10726977
> 
> 赞同：7
> 
> 时间：2012-05-23T20:00:01.880
> 
> 标签：c#, .net, linq-to-sql, c#-4.0, .net-3.5

我想为生成的代码中的属性生成别名。到目前为止，我所能做的就是：

```
partial class Purchase
{
    public User Customer
    {
        get
        {
            return this.User;
        }

        set
        {
            this.User = value;
        }
    }
} 
```

我想知道是否还有其他方法可以在 C# 中定义别名。该类`Purchase`由 Linq-to-SQL 生成

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-04-12T20:18:29.337

如果您希望使用 newtonSoft 使用不同的属性名称将信息发送到 JSON，您可以使用

```
 [JsonProperty("alias_name")]
 public type YourProperty {get;set;} 
```

如果您不希望您的对象遵循 C# 约定并与要接收或发送的 JSON 对象匹配，这可以帮助您

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T20:01:16.297

不，在 C# 中是不可能的。属性名称是您可以为其定义的单个标识符。

不知道这是否是您要搜索的内容：

但是您可以定义（比如说）a `Dictionary<string,object>`where`Key`是*属性*名称并且`value`是属性的值。通过这种方式，您可以定义动态属性现金，并*在运行时*更改属性名称和值。

或者可以使用[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)，如果您使用`C# 4.0`

# c++ - 通过本机字符串创建 BSTR（使用 _bstr_t 包装器）时，如何设置长度？

> ID：10726978
> 
> 赞同：1
> 
> 时间：2012-05-23T20:00:03.623
> 
> 标签：c++, string, com, bstr, null-terminated

创建[`BSTR`](http://msdn.microsoft.com/en-us/library/ms221069%28v=vs.85%29)（用作包装类）时，[`_bstr_t`](http://msdn.microsoft.com/en-us/library/zthfhkd6%28v=VS.71%29.aspx)我必须使用[. `_bstr_t`](http://msdn.microsoft.com/en-us/library/9k3ebasf%28v=vs.80%29)由于 a`BSTR`是可能包含空字符的长度前缀字符串，因此必须有可能使用本地字符串创建这样的字符串，而不依赖于给定本地字符串的空终止。

举个例子：

```
wchar_t* pwNativeString = L"abc\0def\0\0ghi\0\0\0"; // + automatic "\0"

// Now I want to create a BSTR using _bstr_t by this string.
_bstr_t spBSTR = _bstr_t(pwNativeString); 
```

问题是构造函数依赖于`pwNativeString`. 所以结果`BSTR`只是`"abc"`而已。所以我的问题是：*如何创建一个`BSTR`或`_bstr_t`并传递一个指向具有特定长度的数组的指针？*下面是一个伪代码示例：

```
_bstr_t spBSTR = _bstr_t(pwNativeString, 15); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:08:39.310

用于[`SysAllocStringLen`](http://msdn.microsoft.com/en-us/library/f98bff39-bc5f-4a81-85d7-d5228e20fbc8%28VS.85%29)分配`BSTR`，然后使用两个参数的`_bstr_t`构造函数从中创建一个`_bstr_t`对象。如果您将第二个参数设置为`true`，那么您需要在[`SysFreeString`](http://msdn.microsoft.com/en-us/library/8f230ee3-5f6e-4cb9-a910-9c90b754dcd3%28VS.85%29)之后调用。否则，该`_bstr_t`对象拥有该字符串并将为您释放它。

```
BSTR bstrIn = SysAllocStringLen(L"abc\0def\0\0ghi\0\0\0", 15);
_bstr_t spBSTR(bstrIn, false); 
```

# symfony - Symfony2，如何使用 --fixtures 选项加载固定装置？

> ID：10726979
> 
> 赞同：22
> 
> 时间：2012-05-23T20:00:06.823
> 
> 标签：symfony

我需要一个 Symfony2 中以下命令的示例：

```
php app/console doctrine:mongodb:fixtures:load --fixtures=/path/to/fixture 
```

不知道怎么设置`--fixtures=/path/to/fixture`。我可以一起加载，但我不能只为一个新夹具做这件事！

/path/to/fixture 应该是什么格式？

我也试过这个`--fixtures=src/PMI/UserBundle/DataFixtures/ORM/FeatureFixtures`，但我每次都得到这个：

```
 [InvalidArgumentException]                             
  Could not find any fixtures to load in:                               
  - src/PMI/UserBundle/DataFixtures/ORM/FeatureFixtures 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-02-20T21:01:25.630

我知道这很旧，但其他人已经问过了，这些答案可能不涵盖其他一些问题。

您只需要指定文件夹，而不是文件。在上面的问题中，不清楚 FeatureFixtures 是 php 文件还是实际上是一个文件夹。如果这只是一个 php 文件而不是文件夹，它可能会失败。这是加载夹具的正确方法，假设 FeatureFixtures 是一个带有夹具的 php 文件：

```
doctrine:fixtures:load --fixtures=src/PMI/UserBundle/DataFixtures/ORM --append 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-12T13:47:54.307

您可以使用真实路径定义夹具。

```
php app/console doctrine:fixtures:load --fixtures=src/MyBundle/DataFixtures/ORM/LoadMyFixturesData.php 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T20:26:32.543

这不是必需的，但如果你想手动指定应该加载固定类的目录，你可以使用这个：

例如，如果我在 symfony 目录中执行命令

```
--fixtures=/src/yourBundle/fixture 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-05T09:47:21.380

从 DoctrineFixturesBundle 3.1 版开始，您需要使用`doctrine:fixtures:load --group=FeatureFixtures`.

# objective-c - 从 NSURLConnection 接收数据后如何返回数据

> ID：10726982
> 
> 赞同：1
> 
> 时间：2012-05-23T20:00:16.167
> 
> 标签：objective-c, cocoa, nsurlconnection

我有一个登录方法。在我使用 NSURLConnection 登录的方法内部，我希望返回 NSData 响应。问题是我在连接实际获取数据之前返回了 NSData 。

```
- (NSData*)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
[responseData appendData:data]; //responseData is a global variable
NSLog(@"\nData is: %@", [[[NSString alloc] initWithData:responseData     
encoding:NSUTF8StringEncoding]autorelease]);//this works
isLoaded = YES; //isLoaded is a BOOL
}

- (NSData*)login:(NSString*)username withPwd:(NSString*)password{  
isLoaded = NO;
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request   
delegate:self];

if(connection){
    NSLog(@"Connected");
}
 while(isLoaded = NO){
[NSThread NSSleepForTimeInterval: 1]; 
}
isLoaded = NO;
return responseData;
} 
```

程序卡在while循环中，但是没有while循环，程序可以从服务器检索数据，只是该方法似乎在委托方法更改之前返回了responseData。

所以我的问题是我怎样才能做到，只有在服务器完成后该方法才会返回 responseData ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:49:05.157

除非另有说明，否则 NSURLConnection 会异步加载 URL。它使用委托回调来更新有关 URL 下载进度的委托。

具体来说，利用 NSURLConnection 委托的 connectionDidFinishLoading: 方法。一旦加载了所有数据，您的 NSURLConnection 对象就会调用它。您可以在此方法中返回数据。

您可以同步加载数据，但最终可能会阻塞 UI。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T21:54:46.080

你应该重构你的代码。

您正在使用异步调用（很好），但您尝试同步处理它（不太好 - 如果不使用单独的线程）。

要使用异步行为，您需要一个回调，在可可时尚中，这通常是一个委托方法（或者可能是更新代码的块）。其实是你的`connection:didReceiveData`。此方法将使用返回的数据——而不是您开始请求的数据。因此，通常启动异步请求的方法不会返回任何内容——当然也不会，预期从请求中返回的内容。

```
- (void)login:(NSString*)username withPwd:(NSString*)password
{  
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
}

//Note: you cannot change the delegate method signatures, as you did (your's returns an NSData object)
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
    [self.responseData appendData:data]
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{ 
    //Now that the connection was successfully terminated, do the real work.
} 
```

看看这个[苹果示例代码](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T20:05:16.507

您可以使用同步请求方法

```
- (NSData*)login:(NSString*)username withPwd:(NSString*)password
{  
   NSError *error = nil;
   NSURLResponse *response = nil;

   NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]

   return responseDate;
} 
```

文档： [https](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLConnection/sendSynchronousRequest:returningResponse:error) ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLConnection/sendSynchronousRequest:returningResponse:error ：

# asp.net - TextBox 在 ASP.NET 中没有获得价值

> ID：10726983
> 
> 赞同：0
> 
> 时间：2012-05-23T20:00:17.150
> 
> 标签：asp.net

我为作者的个人信息设计了一个表格。所有文本框都获得价值，并且它们的值在回发后（当我单击保存按钮时）仍然存在，但是文本框和下拉列表没有获得价值，并且在回发后它们的值被清除。HTML 代码：

```
<table width="100%" cellpadding="0" cellspacing="0">
            <tr>
                <td  height="35" colspan="2" bgcolor="#E1DED9" style="border-left-style: 3">
                    <strong>&nbsp;Personal Information</strong></td>
            </tr>
            <tr>
                <td  height="25" bgcolor="#F3F3E9" class="style13" style="padding-left: 5px" >
                    Title:</td>
                <td height="20" bgcolor="#F3F3E9" style="padding-top: 3px; padding-bottom: 2px">
                    <asp:TextBox ID="txtTitle" runat="server" BorderColor="#DFDFC6" 
                        BorderStyle="Solid" Height="18px" Width="50px"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td bgcolor="#F3F3E9" class="style13" height="25" style="padding-left: 5px" >
                    First Name:</td>
                <td bgcolor="#F3F3E9" style="padding-top: 3px; padding-bottom: 2px">
                    <asp:TextBox ID="txtFirstName" runat="server" BorderColor="#DFDFC6" 
                        BorderStyle="Solid" Height="18px"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td  height="25" bgcolor="#F3F3E9" class="style13" style="padding-left: 5px" >
                    Middle Name:</td>
                <td height="20" bgcolor="#F3F3E9" style="padding-top: 3px; padding-bottom: 2px">
                    <asp:TextBox ID="txtMidName" runat="server" BorderColor="#DFDFC6" 
                        BorderStyle="Solid" Height="18px"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td  height="25" bgcolor="#F3F3E9" class="style13" style="padding-left: 5px" >
                    Last Name:</td>
                <td height="20" bgcolor="#F3F3E9" style="padding-top: 3px; padding-bottom: 2px">
                    <asp:TextBox ID="txtLastName" runat="server" BorderColor="#DFDFC6" 
                        BorderStyle="Solid" Height="18px"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td  height="25" bgcolor="#F3F3E9" class="style13" style="padding-left: 5px" >
                    Gender:</td>
                <td height="20" bgcolor="#F3F3E9" style="padding-top: 3px; padding-bottom: 2px">
&nbsp;&nbsp;
                    <asp:RadioButton ID="rdbMale" runat="server" Text="Male" GroupName="Gender" />
&nbsp;
                    <asp:RadioButton ID="rdbFemale" runat="server" Text="Female" 
                        GroupName="Gender" />
                </td>
            </tr>
            <tr>
                <td  height="25" bgcolor="#F3F3E9" class="style13" style="padding-left: 5px" >
                    Phone:</td>
                <td height="20" bgcolor="#F3F3E9" style="padding-top: 3px; padding-bottom: 2px">
                    <asp:TextBox ID="txtPhone" runat="server" BorderColor="#DFDFC6" 
                        BorderStyle="Solid" Height="18px"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td  height="25" bgcolor="#F3F3E9" class="style13" style="padding-left: 5px" >
                    Degree:</td>
                <td height="20" bgcolor="#F3F3E9" style="padding-top: 3px; padding-bottom: 2px">
                    <asp:DropDownList ID="ddlDegree" runat="server">
                        <asp:ListItem>BS</asp:ListItem>
                        <asp:ListItem>MSc</asp:ListItem>
                        <asp:ListItem>PhD</asp:ListItem>
                        <asp:ListItem>Prof</asp:ListItem>
                    </asp:DropDownList>
                    <asp:CheckBox ID="ckbIsStudent" runat="server" Text="Student" />
                </td>
            </tr>
            <tr>
                <td  height="25" bgcolor="#F3F3E9" class="style14" >
                    </td>
                <td bgcolor="#F3F3E9" class="style15" 
                    style="padding-top: 3px; padding-bottom: 2px">
                    </td>
            </tr></table> 
```

代码背后：

```
 protected void btnFinish_Click(object sender, EventArgs e)
    {
        MembershipUser user = Membership.GetUser();
        ProfileCommon userProfile = Profile.GetProfile(user.UserName);
        userProfile.Title = txtTitle.Text;
        userProfile.FirstName = txtFirstName.Text;
        userProfile.MiddleName = txtMidName.Text;
        userProfile.LastName = txtLastName.Text;
        if (rdbMale.Checked==true)
            userProfile.Gender = "Male";
        else if (rdbFemale.Checked==true)
            userProfile.Gender = "Female";
        userProfile.Phone = txtPhone.Text;
        userProfile.Degree = ddlDegree.SelectedValue.ToString();
        if (ckbIsStudent.Checked)
            userProfile.IsStudent = true;
        else
            userProfile.IsStudent = false;
        userProfile.Save();
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-24T14:34:12.777

我在 Page_Load() 中编写了以下代码，问题就解决了。

```
 if (!Page.IsPostBack)
        {
            txtTitle.Text = Profile.Title;
            txtFirstName.Text = Profile.FirstName;
            txtMidName.Text = Profile.MiddleName;
            txtLastName.Text = Profile.LastName;
            if (Profile.Gender == "Male")
                rdbMale.Checked = true;
            else if (Profile.Gender == "Female")
                rdbFemale.Checked = true;
            txtPhone.Text = Profile.Phone;
            ddlDegree.Text = Profile.Degree;
        } 
```

if (!Page.IsPostBack) 是我的答案！谢谢各位大佬...

# html - xsl 聚合或子查询

> ID：10726985
> 
> 赞同：2
> 
> 时间：2012-05-23T20:00:37.433
> 
> 标签：html, xml, xslt

对于具有以下结构的 XML 文件

```
 <?xml version="1.0" encoding="UTF-8">
 <farm xmlns:my="mynamespace.com" >
   <pen>
    <sheep> 3 </sheep>
    <cow> 3</cow>
    <pig> 2</pig>
    <chicken> 5</chicken>
   </pen>
  <pen>
    <sheep> 12 </sheep>
    <cow> 1</cow>
    <pig> 2</pig>
    <chicken> 4</chicken>
   </pen>
  <pen>
    <sheep> 4 </sheep>
    <cow> 4</cow>
    <pig> 1</pig>
    <chicken> 2</chicken>
   </pen>
 </farm> 
```

我有一个 xsl 样式表，它遍历每个笔节点（for-each），为每种动物类型（即羊、牛、猪和鸡）生成一个 id 并计算总数。生成如下表

```
ANIMAL   | VALUE
-----------------
pig      |  5
cow      |  8
sheep    | 19
chickens | 11 
```

现在我想按值列对这个结果集进行排序 是否可以使用 XSL 执行相当于子查询的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T12:03:00.393

**这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kAnimalByName" match="pen/*" use="name()"/>

 <xsl:template match="/*">
     <table border="1">
      <thead>
          <tr>
           <td>Animal</td>
           <td>Total</td>
          </tr>
      </thead>
      <tbody>
       <xsl:apply-templates select=
        "/*/pen/*
           [generate-id()
           =
            generate-id(key('kAnimalByName', name())[1])
            ]">
         <xsl:sort select="sum(/*/pen/*[name() = name(current())])"
                   data-type="number"/>
       </xsl:apply-templates>
      </tbody>
     </table>
 </xsl:template>

 <xsl:template match="pen/*">
  <tr>
   <td><xsl:value-of select="name()"/></td>
   <td>
     <xsl:value-of select="sum(/*/pen/*[name() = name(current())])"/>
   </td>
  </tr>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<farm xmlns:my="mynamespace.com" >
    <pen>
        <sheep> 3 </sheep>
        <cow> 3</cow>
        <pig> 2</pig>
        <chicken> 5</chicken>
    </pen>
    <pen>
        <sheep> 12 </sheep>
        <cow> 1</cow>
        <pig> 2</pig>
        <chicken> 4</chicken>
    </pen>
    <pen>
        <sheep> 4 </sheep>
        <cow> 4</cow>
        <pig> 1</pig>
        <chicken> 2</chicken>
    </pen>
</farm> 
```

**产生想要的正确结果：**

```
<table border="1">
   <thead>
      <tr>
         <td>Animal</td>
         <td>Total</td>
      </tr>
   </thead>
   <tbody>
      <tr>
         <td>pig</td>
         <td>5</td>
      </tr>
      <tr>
         <td>cow</td>
         <td>8</td>
      </tr>
      <tr>
         <td>chicken</td>
         <td>11</td>
      </tr>
      <tr>
         <td>sheep</td>
         <td>19</td>
      </tr>
   </tbody>
</table> 
```

**解释**： 正确使用**[Muenchian 方法进行分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:29:49.800

这个样式表...

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="html" indent="yes" encoding="UTF-8"
   doctype-public="-//W3C//DTD HTML 4.01//EN"
   doctype-system="http://www.w3.org/TR/html4/strict.dtd" />

 <xsl:template match="/">
 <HTML><head><title>Summary of Chattels</title></head>
 <BODY>
 <xsl:choose>
  <xsl:when test="count( farm/pen/*[namespace-uri()='']) != 0">
   <table style="border: 1px solid #808080">
    <tr><th>ANIMAL</th> <th>VALUE</th></tr>
    <xsl:for-each-group select="farm/pen/*[namespace-uri()='']" group-by="local-name()" >
      <xsl:sort select="sum( current-group())" data-type="number" order="ascending" />
      <xsl:sort select="local-name()" data-type="text" order="ascending" />
      <tr><td><xsl:value-of select="local-name()" /></td>
          <td><xsl:value-of select="sum( current-group())" /></td></tr>
    </xsl:for-each-group>
   </table>
  </xsl:when>
  <xsl:otherwise>
   <p>There are no chattels.</p>
  </xsl:otherwise>
 </xsl:choose>   
 </BODY>
 </HTML>
 </xsl:template>

</xsl:stylesheet> 
```

将为给定的示例文件生成此 html ...

```
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Summary of Chattels</title>
   </head>
   <BODY>
      <table style="border: 1px solid #808080">
         <tr>
            <th>ANIMAL</th>
            <th>VALUE</th>
         </tr>
         <tr>
            <td>pig</td>
            <td>5</td>
         </tr>
         <tr>
            <td>cow</td>
            <td>8</td>
         </tr>
         <tr>
            <td>chicken</td>
            <td>11</td>
         </tr>
         <tr>
            <td>sheep</td>
            <td>19</td>
         </tr>
      </table>
   </BODY>
</HTML> 
```

如果你想要文本输出，调整文本将是一个简单的练习。

如果农场是空的，你会得到这个输出......

```
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Summary of Chattels</title>
   </head>
   <BODY>
      <p>There are no chattels.</p>
   </BODY>
</HTML> 
```

# c# - 更改 @RenderBody 以指向不同的 View MVC3

> ID：10726986
> 
> 赞同：6
> 
> 时间：2012-05-23T20:00:37.540
> 
> 标签：c#, asp.net-mvc-3

默认情况下，MVC3 应用中_Layout.cshtml 中的@RenderBody 指向~/Views/Home/Index。

```
 @RenderBody() 
```

该集合在哪里，如何将其更改为指向 ~/Views/Account/Logon？或者我想要的任何地方。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:11:06.270

它并不指向那个观点，它只是呈现给它的观点

您的应用程序启动并进入路由的默认操作，可以在`Global.asax`

`/Account/LogOn`如果您愿意，可以将其修改为默认值

```
public class MvcApplication : System.Web.HttpApplication {

    public static void RegisterGlobalFilters(GlobalFilterCollection filters) {
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes) {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        //routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" });

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Account", action = "LogOn", id = UrlParameter.Optional } // Parameter defaults
        );
    }

    protected void Application_Start() {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T20:10:27.393

RenderBody 默认不指向`~/Views/Home/Index`. 它呈现由执行的控制器操作返回的视图。并且由于在路由定义中的 Global.asax 中，默认操作配置为索引，因此呈现的是此视图。

因此，您所要做的就是修改您的路由配置，以便在 Account 控制器上的默认操作是登录：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Account", action = "LogOn", id = UrlParameter.Optional } // Parameter defaults
); 
```

现在，当您导航到 时`/`，将执行控制器的 LogOn 操作，该操作`Account`本身将呈现`~/Views/Account/LogOn.cshtml`视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T02:57:29.917

你应该`@RenderPage`改用。点击此[链接](http://www.dotnetcurry.com/ShowArticle.aspx?ID=636)了解更多信息。

# android - Android BitmapDrawable setTileModeX 在 TextView 上不起作用

> ID：10726990
> 
> 赞同：6
> 
> 时间：2012-05-23T20:00:53.800
> 
> 标签：android, android-layout, background, android-xml

我有一个`TextView`只能水平重复的位图。我想设置我的 textview 的背景并仅在 X 轴上重复它。环顾四周后，我发现您只能通过代码而不是 XML 来做到这一点。我创建了一个`BitmapDrawable`使用:,

```
BitmapDrawable bg = new BitmapDrawable(r, BitmapFactory.decodeResource(r, R.drawable.my_drawable));
bg.setTileModeX(Shader.TileMode.REPEAT);
setBackgroundDrawable(bg); 
```

然而，即使采用这种方式，drawable 也会在 Y 轴上重复。这是在 Honeycomb 3.2 中。

有人可以对此有所了解，也许可以提供一个工作示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:33:57.833

//尝试这个

```
BitmapDrawable bg = new BitmapDrawable(r, BitmapFactory.decodeResource(r,R.drawable.my_drawable));

        int width = view.getWidth();
        int intrinsicHeight = bd.getIntrinsicHeight();
        Rect bounds = new Rect(0,0,width,intrinsicHeight);
       bg.setTileModeX(Shader.TileMode.REPEAT);
        bg.setBounds(bounds);
        Bitmap bitmap = Bitmap.createBitmap(bounds.width(), bounds.height(), bg.getBitmap().getConfig());
        Canvas canvas = new Canvas(bitmap);
        bg.draw(canvas);
        BitmapDrawable bitmapDrawable = new BitmapDrawable(bitmap);
yourTxtView.setBackgroundDrawable(bg); 
```

// 也试试这个

```
bg.setTileModeX(1); //Repeats the bitmap in both direction.
bg.setTileModeY(-1);//Do not tile the bitmap. This is the default value. 
```

# php - PHP 与 ASP.NET 静态变量

> ID：10726993
> 
> 赞同：7
> 
> 时间：2012-05-23T20:01:13.177
> 
> 标签：php, asp.net, static

ASP.NET 中的静态变量今天让我措手不及。然后我吓坏了，因为这意味着要么我对网络世界中的静态变量有根本的误解，要么 ASP.NET 不像我想象的那样行事。

所以在 ASP.NET

```
public class MyClass {
    public static bool myVar = true;    
} 
```

如果 ASPUserA 设置`MyClass.myVar = false`系统上的每个其他用户都会经历这些变化。所以， ASPUserB 会有`myVar`= `false`。我的来源： [http ://www.foliotek.com/devblog/avoid-static-variables-in-asp-net/](http://www.foliotek.com/devblog/avoid-static-variables-in-asp-net/)

```
class MyClassPHP {
    public static $myVar = false;
} 
```

如果 PHPUserA 设置`MyClass::$myVar = true`这是否意味着系统上的每个用户都会经历这些变化？？？

谢谢你。

* * *

经过进一步研究，我这样做了；

```
class MyClassPHP {
    public static $myVar = 0;
} 
```

然后我让访问页面的用户这样做

```
MyClassPHP::$myVar++;
echo MyClassPHP::$myVar; 
```

它始终是 1。无论我刷新多少次或同时连接多少次...... WOHHH 这是一个很好的结论，否则我搞砸了！

* * *

ASP.NET 更新

经过进一步的研究和测试，我发现了这一点。

```
public partial class MyPage : System.Web.UI.Page
{
    public static int myInt = 0;

    protected void Page_PreInit(object sender, EventArgs e)
        myInt++;
    }

} 
```

然后我的页面就可以显示了`myInt`。

`myInt`当我刷新页面时，在浏览器（Firefox 和 chrome）之间逐渐变高。所以这并不重要，如果你`class`是`static`。仅当您有静态变量时才重要。它们的应用范围很广。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T20:10:48.383

在 IIS 中运行时：

静态变量不是“页面”特定的。它是“AppDomain”特定的。与“页面”的唯一关系是变量的路径（可以这么说）（例如 MyProject.MyPage.MyVariable）。因为您的应用程序的所有用户都在同一个 AppDomain（即同一个 IIS 应用程序文件夹）中运行，所以他们都将使用同一个静态变量。所以...最终您的用户将看到彼此的信息，因为他们都共享一个静态变量。

然而，PHP 会跟踪每个用户实例的静态数据，所以我想你可以称它们为“远离单例危险区域更安全”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:06:22.430

不，PHP 不像 ASP.NET 那样愚蠢（它真的那么做吗？）。PHP 中的静态变量是每个实例的（它不像 ASP.NET 那样整个页面都是一个实例，每个用户都有自己的 PHP 实例）。

如果 2 个用户访问一个 PHP 页面，并且在一个页面`MyClass::$myVar = true`上运行，则不会影响另一个用户。

# android - 请帮忙，当按下任何按钮关闭时，我无法找到错误的应用程序

> ID：10726997
> 
> 赞同：-1
> 
> 时间：2012-05-23T20:01:21.743
> 
> 标签：android

```
package my.medai;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MediaplayerexampleActivity extends Activity {
    Button play, pause;
    MediaPlayer mp;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        MediaPlayer.create(this, R.raw.alone);
        play = (Button) findViewById(R.id.button1);
        pause = (Button) findViewById(R.id.button2);
        play.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                mp.start();

            }
        });
        pause.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {mp.stop();}});

    }
} 
```

我是 prgraming 的新手。这是 java xml 只包含两个通过拖放生成的按钮，当按下任何或两个按钮时，应用程序会意外关闭

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:05:38.193

很可能`mp`是 null，因为它没有被分配，导致 NullPointerException。这一行：

```
MediaPlayer.create(this, R.raw.alone); 
```

应该看起来像

```
mp = MediaPlayer.create(this, R.raw.alone); 
```

*由于`MediaPlayer.create()`可以在创建播放器失败时返回 null，因此您还应该添加一些额外的 null 检查，以确保安全*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T20:06:57.733

利用

```
setContentView(R.layout.main);
mp =MediaPlayer.create(this, R.raw.alone); 
```

代替

```
setContentView(R.layout.main);
MediaPlayer.create(this, R.raw.alone); 
```