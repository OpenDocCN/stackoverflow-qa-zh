# StackOverflow 问答 10955000-10955999

# .net - 使用 REST API 在 .NET 中创建 Rally 用户

> ID：10955006
> 
> 赞同：1
> 
> 时间：2012-06-08T19:31:38.750
> 
> 标签：.net, rally

我想使用以下 C# 代码创建一个新的 Rally 用户

```
DynamicJsonObject newUser = new DynamicJsonObject();
newUser["FirstName"] = "Joe";
newUser["LastName"] = "Developer";
newUser["UserName"] = "joejoe@joejoe.com";
newUser["DisplayName"] = "The developer";
CreateResult createResult = restApi.Create("User", newUser); 
```

但它总是失败，有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:20:37.940

感谢 MilkyWayJoe 提醒我查看附加的错误消息

事实证明，“EmailAddress”是必需的，尽管它可能类似于上面的“UserName”字段

```
newUser["EmailAddress"] = "joejoe@joejoe.com" 
```

这解决了问题

# ruby-on-rails-3 - csv 文件的上传功能 (Rails/AJAX) - 我应该采取什么方法？

> ID：10955007
> 
> 赞同：0
> 
> 时间：2012-06-08T19:31:46.783
> 
> 标签：ruby-on-rails-3

我正在构建一个 Rails 应用程序，用户应该能够将 csv 文件上传到数据库。我对 Rails 相当陌生，如果有人能引导我朝着正确的方向制作这样的功能，我将不胜感激。上传方法应使用 AJAX，以支持此流程（无需重定向/刷新页面）：

1：用户上传文件。2：文件被保存在数据库中。3：已保存文件的前几行从数据库中提取出来并显示以供用户参考。

# php - 使用 ajax 将 JSON 发送到 PHP

> ID：10955017
> 
> 赞同：33
> 
> 时间：2012-06-08T19:32:21.770
> 
> 标签：php, jquery, ajax, json

我想将一些json格式的数据发送到php并在php中进行一些操作。我的问题是我无法通过 ajax 将 json 数据发送到我的 php 文件。请帮助我该怎么做。这个方法我试过了。。

```
<script>
$(function (){
 $("#add-cart").click(function(){
    var bid=$('#bid').val();
    var myqty=new Array()
    var myprice=new Array()

    qty1=$('#qty10').val();
    qty2=$('#qty11').val();
    qty3=$('#qty12').val();

    price1=$('#price1').val();
    price2=$('#price2').val();
    price3=$('#price3').val();

    var postData = 
                {
                    "bid":bid,
                    "location1":"1","quantity1":qty1,"price1":price1,
                    "location2":"2","quantity2":qty2,"price2":price2,
                    "location3":"3","quantity3":qty3,"price3":price3
                }
    var dataString = JSON.stringify(postData);

    $.ajax({
            type: "POST",
            dataType: "json",
            url: "add_cart.php",
            data: {myData:dataString},
            contentType: "application/json; charset=utf-8",
            success: function(data){
                alert('Items added');
            },
            error: function(e){
                console.log(e.message);
            }
    });
});
});
</script> 
```

在 PHP 中我使用：

```
if(isset($_POST['myData'])){
 $obj = json_decode($_POST['myData']);
 //some php operation
} 
```

在 php 文件中添加 print_r($_POST) 时，它会在 firebug 中显示 array(0) {}。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-08T19:35:31.650

失去`contentType: "application/json; charset=utf-8",`. 您不是将 JSON 发送到服务器，而是发送一个普通的 POST 查询（恰好包含一个 JSON 字符串）。

那应该使您拥有的工作。

事情是，你根本不需要使用`JSON.stringify`或`json_decode`在这里。做就是了：

```
data: {myData:postData}, 
```

然后在 PHP 中：

```
$obj = $_POST['myData']; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-08T19:35:21.527

那是因为`$_POST`预先填充了表单数据。

要获取 JSON 数据（或任何原始输入），请使用[`php://input`](http://php.net/manual/en/wrappers.php.php).

```
$json = json_decode(file_get_contents("php://input")); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-06-13T09:47:42.063

使用 json 和 ajax 将 javascript obj 发送到 php：

js：

```
var dataPost = {
   "var": "foo"
};
var dataString = JSON.stringify(dataPost);

$.ajax({
   url: 'server.php',
   data: {myData: dataString},
   type: 'POST',
   success: function(response) {
      alert(response);
   }
}); 
```

在 php 中使用该对象：

```
$obj = json_decode($_POST["myData"]);

echo $obj->var; 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-11-23T12:02:03.203

**如果要通过`$_POST`变量**获取值，则不应将 contentType 指定为`"application/json"`，而应使用默认值`"application/x-www-form-urlencoded; charset=UTF-8"`：

JavaScript：

```
var person = { name: "John" };

$.ajax({
    //contentType: "application/json", // php://input
    contentType: "application/x-www-form-urlencoded; charset=UTF-8", // $_POST
    dataType : "json",
    method: "POST",
    url: "http://localhost/test/test.php",
    data: {data: person}
})
.done(function(data) {  
    console.log("test: ", data);
    $("#result").text(data.name);
})
.fail(function(data) {
    console.log("error: ", data);
}); 
```

PHP：

```
<?php

// $_POST

$jsonString = $_POST['data'];

$newJsonString = json_encode($jsonString);
header('Content-Type: application/json');
echo $newJsonString; 
```

**否则，如果您想将 JSON 从 JavaScript 发送到 PHP：**

JavaScript：

```
var person = { name: "John" };

$.ajax({
    contentType: "application/json", // php://input
    //contentType: "application/x-www-form-urlencoded; charset=UTF-8", // $_POST
    dataType : "json",
    method: "POST",
    url: "http://localhost/test/test.php",
    data: person
})
.done(function(data) {  
    console.log("test: ", data);
    $("#result").text(data.name);
})
.fail(function(data) {
    console.log("error: ", data);
}); 
```

PHP：

```
<?php

$jsonString = file_get_contents("php://input");
$phpObject = json_decode($jsonString);

$newJsonString = json_encode($phpObject);
header('Content-Type: application/json');
echo $newJsonString; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-08T19:36:25.097

我相信你可以尝试这样的事情：

```
var postData = 
            {
                "bid":bid,
                "location1":"1","quantity1":qty1,"price1":price1,
                "location2":"2","quantity2":qty2,"price2":price2,
                "location3":"3","quantity3":qty3,"price3":price3
            }
$.ajax({
        type: "POST",
        dataType: "json",
        url: "add_cart.php",
        data: postData,
        success: function(data){
            alert('Items added');
        },
        error: function(e){
            console.log(e.message);
        }
}); 
```

json 编码应该自动发生，并且你的帖子的转储应该给你类似的东西：

```
array(
    "bid"=>bid,
    "location1"=>"1",
    "quantity1"=>qty1,
    "price1"=>price1,
    "location2"=>"2",
    "quantity2"=>qty2,
    "price2"=>price2,
    "location3"=>"3",
    "quantity3"=>qty3,
    "price3"=>price3
) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-08T19:49:18.210

只需删除：

```
...
//dataType: "json",
url: "index.php",
data: {myData:postData},
//contentType: "application/json; charset=utf-8",
... 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-23T09:42:24.130

您正在尝试使用 js 对象格式发送 js 数组。

而不是使用

```
var a = new array();
a['something']=... 
```

尝试：

```
var a = new Object();
a.something = ... 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-25T03:54:07.127

我知道已经有一段时间了，但以防万一有人仍然需要它：

我需要传递的 JSON 对象：

```
0:{CommunityId: 509, ListingKey: "20281", Type: 10, Name: "", District: "", Description: "",…}
1:{CommunityId: 510, ListingKey: "20281", Type: 10, Name: "", District: "", Description: "",…} 
```

阿贾克斯代码：

```
data: JSON.stringify(The-data-shows-above),
type: 'POST',
datatype: 'JSON',
contentType: "application/json; charset=utf-8" 
```

和 PHP 方面：

```
json_decode(file_get_contents("php://input")); 
```

它对我有用，希望它可以帮助！

# java - 如何比较两个意图是否相等

> ID：10955018
> 
> 赞同：1
> 
> 时间：2012-06-08T19:32:23.663
> 
> 标签：java, android, android-intent

现在我有一个`LinkedList`Intents 来`IntentService`跟踪`Service`. 我发现该`contains()`方法永远不会返回 true，即使对于相同的 Intent。我还需要做些什么来比较两个 Intent 吗？

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    if(queue.contains(intent)){
                    //Never reaches here
        intent.setAction(NO_ACTION);
    }
    queue.push(intent);
    return super.onStartCommand(intent, flags, startId);
} 
```

发送 Intent 的示例代码：

```
 Intent i = new Intent(context, NodeIndexService.class);
    i.setAction(NodeIndexService.REFRESH);
    i.putExtra(NodeIndexService.TYPE, indexType);
    i.putExtra(NodeIndexService.RESULT_RECEIVER, receiver);
    context.startService(i); 
```

使用此代码一个接一个发送的两个 Intent 应该是相同的，不是吗？上下文没有改变，额外的东西也是一样的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T22:54:42.547

有一种方法可以专门比较意图 - filterEquals()： http: [//developer.android.com/reference/android/content/Intent.html#filterEquals](http://developer.android.com/reference/android/content/Intent.html#filterEquals(android.content.Intent) (android.content.Intent )

使用此方法时，看起来具有相同数据、类别和操作的意图将被视为相等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T20:08:47.217

您需要定义自己的`equals`方法来满足您的平等标准，无论它们是什么。

根据[`Intent`API 文档](http://developer.android.com/reference/android/content/Intent.html)，该`equals`方法由`Object`--simple 身份定义。

这或多或少是标准的 Java 基础；查看该类是否定义了自己的相等性，如果没有，则需要创建自己的 - 需要注意的是，无论实例所在的环境也可能*检查*相等性，因此实现`equals`和`hashCode` *正确*是值得的。

（如果你定义一个`equals`，你会想要定义一个`hashCode`完整性。）

* * *

您的代码*专门*创建了新的意图——就是这样`new`做的。

您正在创建两个对象：对象标识意味着查看两个引用是否引用*完全相同的 object*，而不是任意*属性*是否相同。如果要根据任意标准进行比较，`equals`则需要定义自己的方法来进行您关心的比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-17T22:30:04.857

[`Intent.toUri(0)`](https://developer.android.com/reference/android/content/Intent.html#toUri(int))您可以使用并比较结果字符串将意图转换为 URI 。只有当它们具有相同的操作、类别、类型、标志、包、组件和附加功能时，它们才会相等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T19:56:51.517

你能做这样的事情吗？

```
Object ob1 = (Object) intent1;
Object ob2 = (Object) intent2;

if(ob1.equals(ob2)) 
```

* * *

只有当关于它们的一切都相同时，上述内容才会成为现实

您想比较意图的任何特定部分吗？

* * *

```
 if(intent1.getAction().equals(intent2.getAction()) && intent1.getType().equals(intent2.getType()) &&
    intent1.getExtras().equals(intent2.getExtras())) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-17T20:45:17.347

在这里，我使用比较器比较了两个意图（在使用 FEST 的单元测试中）：

```
import static org.fest.assertions.api.Assertions.assertThat;

assertThat(intentOne).usingComparator(new IntentComparator()).isEqualTo(intentTwo);

private static class IntentComparator implements Comparator<Intent> {
    @Override
    public int compare(Intent left, Intent right) {
        return left.filterEquals(right) ? 0 : 1;
    }
} 
```

# javascript - 组合功能

> ID：10955022
> 
> 赞同：0
> 
> 时间：2012-06-08T19:32:26.080
> 
> 标签：javascript, jquery, jquery-animate, toggle, slide

我尝试结合一些这样的功能，但对我不起作用。

1.  面板将显示 1 秒
2.  面板向上滑动
3.  幻灯片 Btn 将在很短的时间内离开视口
4.  结束：在右侧位置滑动 Btn 显示

[jsFiddle](http://jsfiddle.net/Fhy3E/2/)

```
$(document).ready(function(){

    $(".btn-slide").click(function(){
        $("#panel").slideToggle("slow");
        $(this).toggleClass("active"); return false;
    });

    $('#panel').html('This text will dissapear after 3 seconds.');
    timeout = setTimeout(function () {
        $('#panel').animate({marginTop: '-450px'}, 500);
    },

    function aha() {
        $('.btn-slide').animate({marginTop:'-40px'}, 350);
        $('.btn-slide').animate({marginTop:'470px'}, 350);
    }), 1000)

});​ 
```

我需要你的帮助，拜托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:35:35.393

将回调绑定到 slideToggle 函数作为参数。

```
$("#panel").slideToggle("slow",function(){
   ..do this when the slide has completed
}); 
```

# python - Mac OS X 上的 python 模块搜索路径是如何确定的？

> ID：10955024
> 
> 赞同：7
> 
> 时间：2012-06-08T19:32:58.837
> 
> 标签：python, macos, pythonpath, sys.path

导入非内置模块时，解释器在`sys.path`. `sys.path`从这些位置初始化（[http://docs.python.org/library/sys.html#sys.path](http://docs.python.org/library/sys.html#sys.path)）：

1.  包含输入脚本的目录（或当前目录）
2.  蟒蛇路径
3.  依赖于安装的默认值

虽然前两个来源是直截了当的，但任何人都可以解释第三个是如何工作的，以及影响它的可能性是什么？

尽管我对通用解决方案感兴趣，但我的具体问题是：

*   我已经安装了[Enthought 发行版 7.2 32-bit](http://www.enthought.com/)，然后[是 Scipy-Superpack](http://fonnesbeck.github.com/ScipySuperpack/)。现在，enthought python 尝试从 numpy 导入`/Library/Python/2.7/`，这是 superpack 安装它们的地方，而不是从 enthought 站点包中导入。
*   `wxPython`使用创建的应用程序`py2app` `-A`与`sys.path`使用 启动应用程序时不同`python start_app.py`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T04:08:33.907

第三个源的基础是在编译时（或者更准确地说是配置时）设置的，具体取决于平台。然后在运行时通过`.pth`文件等对其进行扩展和添加（一旦编译 Python 可执行文件以影响第三个源，您就可以执行此操作）。

Python 文档的此页面包含有关文件如何`.pth`工作的所有信息，以及有关如何`sys.path`从构建时设置等构建的更多信息。 [http://docs.python.org/library/site.html](http://docs.python.org/library/site.html)

我不确定你为什么要专门影响第三个来源，当你可以影响整个`sys.path`. 总之，影响的三种方式`sys.path`（无需重新编译 Python 或修补源代码）是：

1.  通过 PYTHONPATH 环境变量。
2.  通过创建`.pth`文件并将它们放到 Python 扫描包的地方。（有关详细信息，请参阅前面的链接。）
3.  以编程方式，通过导入`sys`然后附加或前置`sys.path`

    ```
    import sys
    sys.path.insert(0, '/this/path/will/be/considered/first') 
    ```

希望这三种方法中的一种可以帮助您做您想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:43:38.667

在 Mac OS X 10.7.5 系统上，我还遇到了 Enthought python 正在 /Library/Python/2.7/ 中寻找模块的问题。显然，这是由位于 /Library/Python/2.7/site-packages 中的文件 easy-install.pth 引起的。更改此文件的扩展名后，Enthought python 导入了 Enthought 模块（来自 /Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages）。

# java - 代码不等待用户输入？

> ID：10955028
> 
> 赞同：2
> 
> 时间：2012-06-08T19:33:23.477
> 
> 标签：java, input, console

我必须为我的计算机科学课做一个项目。问题是：

图书馆的顾客最多可以借三本书。因此，赞助人有一个名字和最多三本书。一本书有作者和书名。设计和实现两个类，Patron 和 Book，来表示这些对象和以下行为：

*   客户端可以用标题和作者实例化一本书
*   客户可以检查但不能修改书名或作者
*   客户可以询问顾客是否借过一本书（由书名标识）。
*   客户可以告诉顾客归还给定的书（由标题标识）。
*   客户可以告诉顾客借一本给定的书。

Patron 类应该为每本书使用一个单独的实例变量（总共三个）。这些变量中的每一个最初都是空的。借书时，读者会查找不为空的变量。如果没有找到这样的变量，则该方法返回 false。如果找到空变量，则将其重置为新书并且该方法返回 true。类似的考虑适用于其他方法。使用方法 aString.equals(aString) 比较两个字符串是否相等。确保为您的类包含适当的 toString 方法并使用测试程序对其进行测试。

这是我的`Client`课程，其中包含`main`方法： http: [//pastebin.com/JpxCT2F6](http://pastebin.com/JpxCT2F6)

现在我的问题是，当我运行程序时，程序不会等待用户输入。以下是 Eclipse 控制台中出现的内容：

```
Please enter title of book 1: 
s
Please enter author of book 1: 
e
Please enter title of book 2: 
f
Please enter author of book 2:
t
Please enter title of book 3: 
g
Please enter author of book 3:
d
Which book would you like to check for?
s
The patron has taken out the book s
Would you like to return a book? (1 yes or 2 no)
1
Which book would you like to return?
Sorry, could not find the book 
Would you like to take out a book? (1 yes or 2 no)
2
Invalid option
Which book would you like to check for?
The patron does not have  taken out
Would you like to return a book? (1 yes or 2 no) 
```

如您所见，控制台在“您想归还哪本书？”之后不会等待用户输入。相反，它需要一个空白值。后来在代码中，我输入了“2”，这意味着不返回任何书，而是给我一个无效的输入输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:40:00.343

nextLine 吃掉换行符。nextInt 将其留在输入缓冲区中，并且下一个 readLine 立即终止。

快速修复：对所有内容使用 readLine，然后从读取的字符串中解析 int。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:42:21.537

您`nextInt()`在代码的第 71 行使用，它得到用户提供的整数答案。然后使用`nextLine()`which 使[该扫描仪前进到当前行并返回被跳过的输入。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine%28%29). 被跳过的输入只是前一次调用中的换行符`nextInt()`（它不会读取整行，只读取 int）。

您可以通过在需要输入之前调用一次来跳过此`input.nextLine()`操作，或者使用`nextLine()`代替`nextInt()`并将字符串转换为整数值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T19:43:48.837

你只需要转到下一行。input.nextLine();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T21:10:44.803

您可以使用`nextInt();`使输入停止并等待响应。

# android - 重复警报通知 (Android)

> ID：10955032
> 
> 赞同：0
> 
> 时间：2012-06-08T19:33:41.417
> 
> 标签：android, notifications, alarmmanager

这行得通吗？

```
 public void setRepeatingAlarm() {

    ArrayList<Integer> AlarmDays = datasource.getDays();
    final int _id = (int) System.currentTimeMillis();

    Log.d("AlarmManageDebt", String.valueOf(AlarmDays));

    for (int i : AlarmDays) {

        Calendar cal = Calendar.getInstance();
        if (cal.get(Calendar.SECOND) >= 30)
            cal.add(Calendar.MINUTE, 1);
        cal.set(Calendar.SECOND, Integer.valueOf(i));

        Intent intent = new Intent(this, TimeAlarm.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(this, _id,
                intent, PendingIntent.FLAG_CANCEL_CURRENT);
        am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                60 * 1000, pendingIntent);
    }
} 
```

我有一个用于pendingIntent的唯一ID，警报中唯一不同的是“i”变量，它根据数据库行给它新的秒数（最终，这将是一个每日通知，“i”将代表一天，而不是一秒钟。但这是出于测试目的。我已经确认在“i”中传递了正确的数据。我只是不确定这是否会产生三个不同的警报？

那么我在这里创建多个警报吗？还是每个循环都有效地替换了刚刚创建的循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:53:39.583

仅根据文档所说的，我想您将只有一个 AlarmManager：

“如果这个 Intent 计划已经有一个警报（两个 Intent 的相等性由 filterEquals(Intent) 定义），那么它将被删除并替换为这个。” [http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

这里是如何确定意图平等：http: [//developer.android.com/reference/android/content/Intent.html#filterEquals](http://developer.android.com/reference/android/content/Intent.html#filterEquals(android.content.Intent) (android.content.Intent )

基于此，我会说不，即使您有 PendingIntent 的唯一 ID。

# c++ - 通过 CreateProcessW 使用“mkdir”创建的目录名称中的垃圾？

> ID：10955044
> 
> 赞同：0
> 
> 时间：2012-06-08T19:34:48.920
> 
> 标签：c++, c, winapi

运行以下代码后，一切都按照我的意愿进行，除了文件夹显示：test2﷽﷽ꮫꮫꮫꮫﻮﻮﻮ</p>

这里发生了什么？

```
 std::string arrString[3] = {" /C mkdir C:\\Users\\Andrew\\Desktop\\test1"," /C mkdir C:\\Users\\Andrew\\Desktop\\test2"," /C mkdir C:\\Users\\Andrew\\Desktop\\test3"};
            LPWSTR cmd =L"C:\\Windows\\System32\\cmd.exe";
            int i;

            for(i=0; i<3; i++)
            {
                STARTUPINFO info={sizeof(info)};
                PROCESS_INFORMATION processInfo;
                vector<wchar_t> cmdline(arrString[i].begin(), arrString[i].end());
                CreateProcessW(cmd, &cmdline[0], NULL, NULL, TRUE, 0, NULL, NULL, &info, &processInfo);
                OutputDebugStringW(L"My output\nstring.");
            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T19:38:40.600

`cmdline`未正确 ASCIIZ 终止。您可以检查这是否是仅添加结尾 0 的原因（注意：未经测试和快速破解）：

```
cmdline.push_back(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:03:14.977

正如其他人所说，您没有将一个以空字符结尾的字符串传递给`CreateProcessW()`，这就是为什么您最终会在文件夹名称中包含额外的字符。在单独的注释中，您应该使用而不是使用`CreateProcessW()`to invoke 。然后你可以从to完全摆脱。`mkdir``CreateDirectoryW()``arrString``std::string``std::wstring``std::vector`

# javascript - 带有 404 错误的 Javascript 图像预加载

> ID：10955047
> 
> 赞同：1
> 
> 时间：2012-06-08T19:34:59.313
> 
> 标签：javascript, jquery

我试图在这里预加载一些图像。但我需要的是在数组中预加载一些图像，并显示进度。

这是有效的，但它给了我控制台中的**GET 404（未找到）**。但它的工作。我能做些什么来避免这个警告？

谢谢！

```
function start(id) {
    var images = new Array();
    images[0] = "http://www.travelblog.org/Wallpaper/pix/tb_fiji_sunset_wallpaper.jpg";
    images[1] = "http://www.fantasy-and-art.com/wp-content/gallery/abstract-wallpapers/lion_hd_wallpaper.jpg";
    images[2] = "http://hidefwallpaper.org/wp-content/gallery/1_apple_wallpaper_02/90831582ea8e018759044f2820b518d1.jpg";
    imageObj = new Image();
    imageObj.src = images[id];
    imageObj.onload = function() {
        if (id == images.length) {
            alert('Carregou tudo');
        }
        if (id < images.length) {
            start(id + 1);
            alert(id);
        }
    }
}
start(0);​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T19:48:51.050

您对 start 函数的递归调用执行了太多次，这就是为什么您会收到 404 消息的原因，因为没有索引等于数组长度的数组元素。数组是从零开始的。因此，例如，当您`if (id < images.length) {`在 id 为 2 时调用时，您将 id 增加到 3 并再次调用 start，但是没有图像 [3]。

试试这个：

```
var images = new Array();
images[0] = "http://www.travelblog.org/Wallpaper/pix/tb_fiji_sunset_wallpaper.jpg";
images[1] = "http://www.fantasy-and-art.com/wp-content/gallery/abstract-wallpapers/lion_hd_wallpaper.jpg";
images[2] = "http://hidefwallpaper.org/wp-content/gallery/1_apple_wallpaper_02/90831582ea8e018759044f2820b518d1.jpg";

function start(id) {
    imageObj = new Image();
    imageObj.src = images[id];
    imageObj.onload = function() {
        if (id == images.length) {
            console.log('Carregou tudo');
        }
        if (id < (images.length-1)) {
            start(id + 1);
        }
    }
}
start(0);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:41:15.327

首先设置图像数组......然后。

```
for(var i = 0; i < images.length; i++){
    imgsrc = images[i];
    var obj = new Image();
    obj.src = imgsrc;
    obj.id = i;
    obj.onload = function(){
       if(this.id == images.length-1){
          alert('Carregou tudo');
       }
    }
} 
```

# asp.net-mvc-3 - II6 文件上传在 MVC 中存储为 0x0000...在 SQL 数据库中

> ID：10955051
> 
> 赞同：1
> 
> 时间：2012-06-08T19:35:16.567
> 
> 标签：asp.net-mvc-3, file, google-chrome, iis-6, sql-server-2000

我在将文件上传到数据库时遇到了一些问题。我将在下面发布我的代码片段。

我要上传到的表具有以下结构：

```
[IDEnsayo] int NOT NULL,
[Nombre] varchar(256) NULL,
[Tipo] varchar(256) NULL,
[Longitud] int NULL,
[Contenido] image NULL 
```

这是课

```
public class Archivo
{

    public string Nombre { get; set; }
    public string Tipo { get; set; }
    public long Longitud { get; set; }
    public byte[] Contenido { get; set; }

} 
```

我可以使用我的应用程序上传文件而不会出现任何错误，但是在数据库中，文件在“Contenido”中存储为“0x0000000000000000......”。与文件相关的所有其他信息都正确上传。

这是我的控制器代码：

```
public ActionResult Add(Ensayo Ensayo, HttpPostedFileBase uploadFile)
{
  var ensayo = new Ensayo { IDEnsayo = Ensayo.IDEnsayo};
  ensayo.Archivo.Longitud = uploadFile.ContentLength;
  ensayo.Archivo.Nombre = uploadFile.FileName;
  ensayo.Archivo.Tipo = uploadFile.ContentType;

  byte[] tempFile = new byte[uploadFile.ContentLength];
  uploadFile.InputStream.Read(tempFile, 0, uploadFile.ContentLength);

  ensayo.Archivo.Contenido = tempFile;
  ensayo.SaveArchivo();
// 
```

**其他注意事项**：

1.  我使用：MVC3 + SQL Server 2000。
2.  当我在测试环境（本地计算机+数据库服务器）中使用该应用程序时，没有问题。文件存储正确。
3.  当我在生产环境（Web 服务器 + 数据库服务器）中使用该应用程序时，文件未正确保存。
4.  生产服务器上的 IIS6

***更新***

IE9 可以，但 Chrome 不行。

这是我的提交表单代码：

```
@using (Html.BeginForm("Add", "Archivos",FormMethod.Post, new { id = "attachment",      enctype = "multipart/form-data" }))
    {         
        @Html.HiddenFor(x => Model.IDEnsayo)
        <input type="file" name="uploadFile" id="uploadFile" />

    <input type="submit" value="Guardar" class="t-button"/>

    } 
```

如果有人可以提供帮助/建议，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:49:05.577

根据您最后的评论，您的文件上传问题很可能与 IIS6 有关，实际上与 SQL Server 无关。如果没有正确配置 IIS6，它有一个愚蠢的文件上传大小限制。

请查看：[在 iis6 中增加文件上传大小限制](https://stackoverflow.com/questions/383781/increase-file-upload-size-limit-in-iis6)

更具体地针对您的情况：[http ://www.banmanpro.com/support2/File_Upload_limits.asp](http://www.banmanpro.com/support2/File_Upload_limits.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:59:05.600

问题是 Chrome 的版本（21.0.1171.0 DEV）。Chrome 的开发版本和使用 Windows 身份验证和上传文件的 IIS6 存在问题。

如果您使用 Chrome 21 dev 提交表单，则提交的文件内容将全为零。

我下载**了19.0.1084.56m**稳定版，问题解决了。

更多信息[http://code.google.com/p/chromium/issues/detail?id=128574](http://code.google.com/p/chromium/issues/detail?id=128574)

# python - 递归模块导入和重新加载

> ID：10955057
> 
> 赞同：17
> 
> 时间：2012-06-08T19:35:48.143
> 
> 标签：python, reload, python-import

有人可以解释为什么执行以下代码：

文件“ **hello.py** ”：

```
import hello
print "hello"
hello = reload(hello) 
```

执行为`python hello.py`打印以下内容？

```
hello
hello
hello
hello 
```

为什么是4次？我知道当一个模块已经被导入时，它不会再次被导入，但是即使它已经被加载，重新加载也会强制重新加载一个模块。我本来期望结果是无限的“你好”打印。

必须发生什么才`reload`不会重新加载模块？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-08T19:47:34.813

`python hello.py`(A) 运行代码一次，当 (A) 调用时`import hello`，代码再次运行 (B)，当 (A) 和 (B) 调用`reload(hello)`时，代码再运行两次，总共运行四次。

通常，在程序的生命周期中，模块的代码将在以下时间执行：

*   一次，如果它是主模块
*   当它被任何模块（包括它自己）**第一次导入时**
*   `reload()`在模块上调用任何时间

至于为什么`reload()`不递归调用，有一个提前退出点指向 PyImport_ReloadModule() 函数（CPython，文件是 import.c）来防止这种情况：

[http://svn.python.org/view/python/trunk/Python/import.c?view=markup#l2646](http://svn.python.org/view/python/trunk/Python/import.c?view=markup#l2646)

```
 ...
    existing_m = PyDict_GetItemString(modules_reloading, name);
    if (existing_m != NULL) {
        /* Due to a recursive reload, this module is already
           being reloaded. */
        Py_INCREF(existing_m);
        return existing_m;
    }
    ... load module code is below here 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-08T19:56:58.267

`reload`保留当前正在重新加载的模块的列表（实际上是一个字典），以避免递归地重新加载模块。

见[http://hg.python.org/cpython/file/e6b8202443b6/Lib/imp.py#l236](http://hg.python.org/cpython/file/e6b8202443b6/Lib/imp.py#l236)

因此，这没有记录在案，但我认为您可能可以依靠它保持这种情况。

# heroku - 在 Heroku 从 Django 发送电子邮件并且没有空闲的工作人员

> ID：10955062
> 
> 赞同：0
> 
> 时间：2012-06-08T19:36:14.430
> 
> 标签：heroku, backgroundworker, sendmail

我在 heroku 中有一个 django 应用程序，有时我需要做的一件事就是发送电子邮件。

这是使用工人的典型用例。Heroku 为工作人员提供支持，但我必须让它们一直运行（或手动启动和停止它们），这很烦人。

我想使用一次性流程来发送每封电子邮件。我首先想到的一种可能性是使用 IronWorker，因为我认为我可以简单地将作业添加到 IronWorker 的队列中，它会以 15 分钟的延迟执行，这对我来说没问题。

问题是对于 Ironworker，我需要将所有模块及其依赖项放入一个 zip 文件中才能运行该作业，因此在我的电子邮件用例中，当我使用“django.core.mail.message”中的“EmailMultiAlternatives”时"，我需要在我的 zip 文件中包含所有 django 框架才能使用它。

根据[此链接](https://stackoverflow.com/questions/3039639/can-a-heroku-app-add-remove-dynos-or-workers-to-from-itself)，可以从应用程序中添加/删除工作人员。是否可以从应用程序启动一次性流程？

有没有人有更好的解决方案？

提前致谢

# mysql - 带有 MySQL 的 Ruby 服务器

> ID：10955072
> 
> 赞同：0
> 
> 时间：2012-06-08T19:37:51.103
> 
> 标签：mysql, ruby-on-rails, ruby, ajax, windows-7

所以，我正在编写一个基本的应用程序，带有一个 html5/jquery 前端和一个 ruby​​ 后端。我从未使用过 ruby​​ 后端，并且想知道我将如何去做。我将使用 MySQL，非常类似于 Apache/MySQL/PHP，但没有 PHP。我最终需要将应用程序放在某种 Web 服务器上。现在我只需要一些本地的东西，这样我就可以开发它。那么，是否有用于 ruby​​ 而不是 php 的 WAMP？我一直在阅读，Ruby on Rails 似乎是我正在寻找的东西，但我真的不确定。

那么，我需要学习什么样的平台才能做到这一点。如果可能的话，我想使用 ajax（ruby 后端）。我该如何设置我的环境。

抱歉，如果我的问题有些模糊，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:51:12.000

IMO [railsinstaller](http://railsinstaller.org/)是在 Windows 上入门的方式。

对于开始使用 Rails 本身，[Hartl 的 Rails 教程](http://ruby.railstutorial.org/)很棒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:03:46.947

当我在 Windows 上使用 Rails 进行开发时，我使用了 Dave Newton 所说的 rails 安装程序。对于本地开发，您可以使用捆绑的数据库 SQLite 和捆绑的 WEBrick 服务器，这意味着您不需要安装 Apache 或 MYSQL。如果你真的想要，[XAMPP](http://www.apachefriends.org/en/xampp.html)可以帮助我在 Windows 上提供 MYSQL 和 Apache 服务。

# c# - 简单注入器：跨同一图的服务注入相同的 UnitOfWork 实例

> ID：10955077
> 
> 赞同：8
> 
> 时间：2012-06-08T19:38:25.127
> 
> 标签：c#, .net, entity-framework-4, dependency-injection, simple-injector

我有多个服务，每个服务都使用[Simple Injector](http://simpleinjector.codeplex.com) IoC 容器`UnitOfWork`注入到构造函数中。

目前我可以看到每个`UnitOfWork`实例都是一个单独的对象，这很糟糕，因为我正在使用实体框架并且需要跨所有工作单元的相同上下文引用。

如何确保`UnitOfWork`每个解析请求都将相同的实例注入所有服务？命令完成后，我`UnitOfWor`将由外部命令处理程序装饰器保存。

请注意，这是一个通用库，将用于 MVC 和 Windows 窗体，如果可能的话，最好为这两个平台提供通用解决方案。

代码如下：

```
// snippet of code that registers types
void RegisterTypes()
{
    // register general unit of work class for use by majority of service layers
    container.Register<IUnitOfWork, UnitOfWork>();

    // provide a factory for singleton classes to create their own units of work 
    // at will
    container.RegisterSingle<IUnitOfWorkFactory, UnitOfWorkFactory>();

    // register logger
    container.RegisterSingle<ILogger, NLogForUnitOfWork>();

    // register all generic command handlers
    container.RegisterManyForOpenGeneric(typeof(ICommandHandler<>),
        AppDomain.CurrentDomain.GetAssemblies());

    container.RegisterDecorator(typeof(ICommandHandler<>),
        typeof(TransactionCommandHandlerDecorator<>));

    // register services that will be used by command handlers
    container.Register<ISynchronisationService, SynchronisationService>();
    container.Register<IPluginManagerService, PluginManagerService>();
} 
```

下面一行的预期结果是创建一个对象，该对象在整个构建的对象图中具有一个共享的 UnitOfWork 实例：

```
var handler = Resolve<ICommandHandler<SyncExternalDataCommand>>(); 
```

以下是我的服务：

```
public class PluginManagerService : IPluginSettingsService
{
    public PluginManagerService(IUnitOfWork unitOfWork)
    {
        this.unitOfWork = unitOfWork;
    }

    private readonly unitOfWork;

    void IPluginSettingsService.RegisterPlugins()
    {
       // manipulate the unit of work
    }
}

public class SynchronisationService : ISynchronisationService
{
    public PluginManagerService(IUnitOfWork unitOfWork)
    {
        this.unitOfWork = unitOfWork;
    }

    private readonly unitOfWork;

    void ISynchronisationService.SyncData()
    {
       // manipulate the unit of work
    }
}

public class SyncExternalDataCommandHandler
    : ICommandHandler<SyncExternalDataCommand>
{
    ILogger logger;
    ISynchronisationService synchronisationService;
    IPluginManagerService pluginManagerService;

    public SyncExternalDataCommandHandler(
        ISynchronisationService synchronisationService, 
        IPluginManagerService pluginManagerService, 
        ILogger logger)
    {
        this.synchronisationService = synchronisationService;
        this.pluginManagerService = pluginManagerService;
        this.logger = logger;
    }

    public void Handle(SyncExternalDataCommand command)
    {
        // here i will call both services functions, however as of now each
        // has a different UnitOfWork reference internally, we need them to 
        // be common.
        this.synchronisationService.SyncData();
        this.pluginManagerService.RegisterPlugins();
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-09T14:55:55.517

您需要哪种注册取决于应用程序的类型。由于您谈论的是两个不同的框架（MVC 和 WinForms），因此两者都有不同的注册。

对于 MVC 应用程序（或一般的 Web 应用程序），最常见的做法是在[每个 Web 请求的基础](http://simpleinjector.codeplex.com/wikipage?title=ObjectLifestyleManagement#PerWebRequest "简单注入器 - 文档 - 对象生活方式管理 - 每个 Web 请求")上注册工作单元。例如，以下注册将在单个 Web 请求期间缓存工作单元：

```
container.Register<IUnitOfWork>(() =>
{
    var items = HttpContext.Current.Items;

    var uow = (IUnitOfWork)items["UnitOfWork"];

    if (uow == null)
    {
        items["UnitOfWork"] = uow = container.GetInstance<UnitOfWork>();
    }

    return uow;
}); 
```

此注册的缺点是未处置工作单元（如果需要）。Simple Injector有[一个扩展包](http://simpleinjector.codeplex.com/wikipage?title=ObjectLifestyleManagement#PerWebRequest "简单注入器 - 文档 - 对象生活方式管理 - 每个 Web 请求")`RegisterPerWebRequest`，它为容器添加扩展方法，它将自动确保实例在 Web 请求结束时被释放。使用此软件包，您将能够进行以下注册：

```
container.RegisterPerWebRequest<IUnitOfWork, UnitOfWork>(); 
```

这是一个快捷方式：

```
container.Register<IUnitOfWork, UnitOfWork>(new WebRequestLifestyle()); 
```

另一方面，Windows 窗体应用程序通常是单线程的（单个用户将使用该应用程序）。我相信每个表单都有一个工作单元并不罕见，它在表单关闭时被处理，但是使用命令/处理程序模式，我认为最好采用更加面向服务的方法。我的意思是，最好将其设计为可以将业务层移动到 WCF 服务，而无需对表示层进行更改。您可以通过让您的命令仅包含原语和（其他）[DTO](http://en.wikipedia.org/wiki/Data_transfer_object "维基百科 - 数据传输对象")来实现这一点。因此，不要将 Entity Framework 实体存储到您的命令中，因为这会使命令序列化变得更加困难，并且会在以后导致意外。

当你这样做时，在命令处理程序开始执行之前创建一个新的工作单元会很方便，在该处理程序执行期间重用相同的工作单元，并在处理程序成功完成时提交它（并始终释放它） . 这是[Per Lifetime Scope 生活方式](http://simpleinjector.codeplex.com/wikipage?title=ObjectLifestyleManagement#PerLifetimeScope "简单注入器 - 文档 - 对象生活方式管理 - 每个生活方式范围")的典型场景。有[一个扩展包](http://simpleinjector.codeplex.com/wikipage?title=ObjectLifestyleManagement#PerLifetimeScope "简单注入器 - 文档 - 对象生活方式管理 - 每个生活方式范围")，可以为容器添加`RegisterLifetimeScope`扩展方法。使用此软件包，您将能够进行以下注册：

```
container.RegisterLifetimeScope<IUnitOfWork, UnitOfWork>(); 
```

这是一个快捷方式：

```
container.Register<IUnitOfWork, UnitOfWork>(new LifetimeScopeLifestyle()); 
```

然而，注册只是故事的一半。第二部分是决定何时保存工作单元的更改，以及在使用 Lifetime Scope 生活方式的情况下，该范围的开始和结束位置。由于您应该在命令执行之前显式启动生命周期范围，并在命令执行完成时结束它，因此最好的方法是使用命令处理程序装饰器，它可以包装您的命令处理程序。因此，对于表单应用程序，您通常会注册一个额外的命令处理程序装饰器来管理生命周期范围。这种方法在这种情况下不起作用。看看下面的装饰器，但请注意*它是不正确的*：

```
private class LifetimeScopeCommandHandlerDecorator<T>
    : ICommandHandler<T>
{
    private readonly Container container;
    private readonly ICommandHandler<T> decoratedHandler;

    public LifetimeScopeCommandHandlerDecorator(...) { ... }

    public void Handle(T command)
    {
        using (this.container.BeginLifetimeScope())
        {
            // WRONG!!!
            this.decoratedHandler.Handle(command);
        }
    }
} 
```

这种方法*不起作用*，因为修饰的命令处理程序是在生命周期范围开始**之前创建的。**

我们可能会尝试如下解决这个问题，但这也不正确：

```
using (this.container.BeginLifetimeScope())
{
    // EVEN MORE WRONG!!!
    var handler = this.container.GetInstance<ICommandHandler<T>>();

    handler.Handle(command);
} 
```

尽管`ICommandHandler<T>`在生命周期范围内请求 an ，确实`IUnitOfWork`为该范围注入了 an ，但容器将返回一个（再次）用`LifetimeScopeCommandHandlerDecorator<T>`. 因此，调用`handler.Handle(command)`将导致递归调用，最终会出现堆栈溢出异常。

问题是依赖关系图在我们开始生命周期范围之前就已经构建好了。因此，我们必须通过推迟构建图的其余部分来打破依赖图。保持应用程序设计整洁的最佳方法是将装饰器更改为代理并将工厂注入其中，该工厂将创建它应该包装的类型。`LifetimeScopeCommandHandlerProxy<T>`看起来像这样：

```
// This class will be part of the Composition Root of
// the Windows Forms application
private class LifetimeScopeCommandHandlerProxy<T> : ICommandHandler<T>
{
    // Since this type is part of the composition root,
    // we are allowed to inject the container into it.
    private Container container;
    private Func<ICommandHandler<T>> factory;

    public LifetimeScopeCommandHandlerProxy(Container container,
         Func<ICommandHandler<T>> factory)
    {
        this.factory = factory;
        this.container = container;
    }

    public void Handle(T command)
    {
        using (this.container.BeginLifetimeScope())
        {
            var handler = this.factory();

            handler.Handle(command);        
        }
    }
} 
```

通过注入委托，我们可以延迟创建实例的时间，并通过这样做我们延迟依赖图（其余部分）的构建。现在的诀窍是注册这个代理类，它会注入包装的实例，而不是（当然）再次注入自己。Simple Injector 支持将`Func<T>`工厂注入到装饰器中，因此您可以简单地使用`RegisterDecorator`and 在这种情况下甚至是`RegisterSingleDecorator`扩展方法。

请注意，注册装饰器（和此代理）的顺序（显然）很重要。由于这个代理启动了一个新的生命周期范围，它应该包装提交工作单元的装饰器。换句话说，更完整的注册将如下所示：

```
container.RegisterLifetimeScope<IUnitOfWork, UnitOfWork>();

container.RegisterManyForOpenGeneric(
    typeof(ICommandHandler<>),
    AppDomain.CurrentDomain.GetAssemblies());

// Register a decorator that handles saving the unit of
// work after a handler has executed successfully.
// This decorator will wrap all command handlers.
container.RegisterDecorator(
    typeof(ICommandHandler<>),
    typeof(TransactionCommandHandlerDecorator<>));

// Register the proxy that starts a lifetime scope.
// This proxy will wrap the transaction decorators.
container.RegisterSingleDecorator(
    typeof(ICommandHandler<>),
    typeof(LifetimeScopeCommandHandlerProxy<>)); 
```

以相反的方式注册代理和装饰器意味着`TransactionCommandHandlerDecorator<T>`它将依赖于`IUnitOfWork`与依赖图的其余部分不同的东西，这意味着对该图中的工作单元所做的所有更改都不会被提交。换句话说，您的应用程序将停止工作。因此，请务必仔细查看此注册。

祝你好运。

# ios - iOS Unity Asset Bundle 下载限制 - 粒子效果、动画和动画资源

> ID：10955078
> 
> 赞同：1
> 
> 时间：2012-06-08T19:38:27.073
> 
> 标签：ios, animation, bundle, unity3d, particles

在 Unity 官方网站（[本文](http://unity3d.com/support/documentation/Manual/iphone-Downloadable-Content)）上，他们提供了在 iOS 设备上创建和保存可下载资产包的说明列表。以下摘录给我带来了一些问题：

> 请注意：可下载内容中包含的任何游戏脚本也必须存在于主可执行文件中。

[这篇文章](https://stackoverflow.com/questions/9580940/does-apple-allow-to-download-opengl-shaders-in-ios-game-at-runtime)是我在该主题上找到的最接近的答案，但是据我所知，着色器动态执行代码，而动画资产和粒子是从已经在 Unity 游戏引擎中编译的代码执行的。

粒子、角色动画和动画资产是否被 Apple 视为“游戏脚本”？我想将这些以及一些静态资产（例如纹理和网格）作为可下载内容包含在我的游戏中。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T19:41:27.770

我不确定我是否在这里遵循了您的问题，并且我从未使用过应用内购买。但是我正在使用 Unity 和 iPad 进行开发，我**可以**[毫无问题地**下载**](http://answers.unity3d.com/questions/470240/using-async-webrequest-getresponse.html)AssetBundles ，所以...

> 粒子、角色动画和动画资产是否被 Apple 视为“游戏脚本”？

所有这些都可以在以后通过下载资产包“添加”。但也许你需要在 Apple 的购买系统之外进行这种控制，即使在使用它时也是如此。只需要制作一个包装器。

# ios - 无法从 UIImagePickerController 获取图像

> ID：10955084
> 
> 赞同：0
> 
> 时间：2012-06-08T19:38:43.350
> 
> 标签：ios, ios5, uiimagepickercontroller

我检查了几个教程，据我所知我的代码是正确的，但最后我没有得到图像。我没有收到任何错误，但我尝试设置的屏幕上的图像仍然是空白的。

这是我的头文件

```
@interface homeViewController : UIViewController<UIImagePickerControllerDelegate, UINavigationControllerDelegate>

@property (weak, nonatomic) IBOutlet UIImageView *avatarImage;
@property (weak, nonatomic) IBOutlet UIButton *photoButton;

@property (nonatomic, retain) UIImagePickerController *imgPicker;

- (IBAction)setPhoto;

@end 
```

这是相关的方法

```
- (IBAction)setPhoto 
{
    self.imgPicker = [[UIImagePickerController alloc] init];
    self.imgPicker.sourceType=UIImagePickerControllerSourceTypeCamera;
    self.imgPicker.delegate=self;
    self.imgPicker.allowsEditing = YES;
    self.imgPicker.showsCameraControls=YES;

    [self presentModalViewController:self.imgPicker animated:YES];
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker 
{ 
    [picker dismissModalViewControllerAnimated:YES]; 
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:UIImagePickerControllerEditedImage];

    self.avatarImage = [[UIImageView alloc] init];
    self.avatarImage.image = image;
    [self dismissModalViewControllerAnimated:YES];
} 
```

当我在这里放置断点时：[self dismissModalViewControllerAnimated:YES]; 我看到 image 变量有一个值，但是 self.avatarImage 有一个 0x00000000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T19:51:34.367

由于您指定`allowsEditing = NO`了您需要使用`UIImagePickerControllerOriginalImage`info 键。

Note: it may be that 'EditedImage' defaults to 'OriginalImage' if no editing occurs. In that case your 'image' variable will be valid and the display of the UIImageView in self.avatarView will be the culprit.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:44:46.953

您使用了错误的委托方法。采用

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

您使用的委托方法在 iOS 3.0 中已弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T08:43:33.707

The lines

```
[picker dismissModalViewControllerAnimated:YES];
[picker release]; 
```

Have to appear before using the info dictionary.

# sql - DB2 中的存储过程

> ID：10955093
> 
> 赞同：-1
> 
> 时间：2012-06-08T19:39:30.957
> 
> 标签：sql, stored-procedures, db2

我有一个以以下内容开头的存储过程：

```
CREATE PROCEDURE somename.tablename (IN P_DATE DATE,
                                            OUT P_ROWS_TO_INSERT INTEGER) 
```

有人可以解释一下 IN 和 OUT 参数调用的目的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:46:16.507

所以 SQL`OUT`参数允许存储过程将数据值传回给调用者。`IN`param 是您添加到存储过程的参数。

基本示例：

```
DECLARE
   V_OUT INTEGER;
BEGIN
  EXECUTE SomeName('22.2.2000', V_OUT);
  DBMS_OUTPUT.PUT_LINE('OUT is: ' || V_OUT);
END; 
```

# css - jquery mobile 和 MVC - 有 3 个彼此相邻的列表，没有 ui-grid 或表格

> ID：10955095
> 
> 赞同：0
> 
> 时间：2012-06-08T19:39:39.663
> 
> 标签：css, asp.net-mvc, model-view-controller, jquery-mobile

我在设置 3 个列表以在 jQuery Mobile 中并排放置时遇到问题。不幸的是，我不能使用 ui-grid，因为我有一个隐藏它们的脚本，并且基于 0-3 的数字（这是另一个列表），将出现相同数量的列表（我让列表动态居中） . 另外，我不能使用 data-role="fieldcontain" 因为根据我的老板，每个列表都应该有圆形边缘（中间列表有锋利的边缘）。这是我的代码：

```
<div class="centerplease">
   <div id="A1">
   @Html.DropDownListFor(x => x.ChildAge_A1, ChildAge,
   new { data_mini = "true", data_inline = "true", data_icon = "false"})</div>

   <div id="A2">
   @Html.DropDownListFor(x => x.ChildAge_A2, ChildAge,
   new { data_mini = "true", data_inline = "true", data_icon = "false"})</div>

   <div id="A3">
   @Html.DropDownListFor(x => x.ChildAge_A3, ChildAge,
   new { data_mini = "true", data_inline = "true", data_icon = "false"})</div> 
</div> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:24:43.500

这个小提琴可能会有所帮助：

[http://jsfiddle.net/dhavaln/y8JAs/](http://jsfiddle.net/dhavaln/y8JAs/)

我已经放置了以下 css 来将选择框对齐在一起。

```
.ui-select{
    float: left;
    width: 33%;
}​ 
```

# asp.net - 连接字符串

> ID：10955096
> 
> 赞同：1
> 
> 时间：2012-06-08T19:39:51.223
> 
> 标签：asp.net, visual-studio

你能帮我理解这段代码用简单的英语做什么吗？这是初学者。先感谢您。

```
<connectionStrings>
<add name="BalloonShopConnection" connectionString="Server=(local)\Sql➥
Express; Database=BalloonShop; User=balloonshop; Password=ecommerce" ➥
providerName="System.Data.SqlClient" />
<remove name="LocalSqlServer"/>
<add name="LocalSqlServer" connectionString="Server=(local)\SqlExpress;➥
Database=BalloonShop; User=balloonshop; Password=ecommerce" providerName=➥
"System.Data.SqlClient" />
</connectionStrings> 
```

这是来自一个教程。我涵盖了本书前半部分的所有内容，但这似乎很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T19:48:46.053

您的应用程序的 web.config 只是您的应用程序获得的配置设置的一部分。总配置是您的 web.config 和 machine.config 文件以及 IIS 中定义的设置的组合。这一行：

```
<remove name="LocalSqlServer"/> 
```

意味着在其他地方定义了一个名为 LocalSqlServer 的连接字符串，您可能从 web.config 以外的其他地方获得。因此，在您的 web.config 中，他们明确删除了您将获得的其他 LocalSqlServer 连接字符串，并将其替换为该行下方定义的连接字符串。该更改仅影响您的应用程序。这在这里解释：[http ://weblogs.asp.net/jgalloway/archive/2012/01/17/10-things-asp-net-developers-should-know-about-web-config-inheritance-and-overrides .aspx](http://weblogs.asp.net/jgalloway/archive/2012/01/17/10-things-asp-net-developers-should-know-about-web-config-inheritance-and-overrides.aspx)

如果删除标签不存在，并且该连接字符串也被定义在链的上层，您的应用程序将使用上层定义的那个，而忽略 web.config 中定义的那个（这可能会很混乱！）。这就是需要删除标签的原因。

另请参阅： [使用 inheritInChildApplications 避免子 Web 应用程序中的 web.config 继承](https://stackoverflow.com/questions/782252/avoid-web-config-inheritance-in-child-web-application-using-inheritinchildapplic)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:43:19.270

您添加名称 BalloonShopConnection 的连接字符串。您的 sql 服务器名称（本地）\SqlExpress；你的数据库是 BalloonShop 用户是 balloonshop 所以你添加第二个非常相似的:)

# html - 如何同时发布到多个网址？

> ID：10955097
> 
> 赞同：3
> 
> 时间：2012-06-08T19:39:55.483
> 
> 标签：html, expressionengine

我们的网站使用 EE 托管。我的任务是添加到我们的“联系我们”表格中，以便将其发布到外部销售线索生成系统 (hubspot)

我们获得了一个发布到的 URL，当我最终找到相关表单的 html 时，我注意到它已经指向另一个销售线索系统。我不想删除此网址。可以同时发两个帖子吗？

```
<form action="https://www.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" method="POST" 

http://yoursite.yourportal.hubspot.com/?app=leaddirector&FormName=X 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T19:45:20.443

你不能用一个请求来做到这一点。使用 XMLHTTP 对象或 JQuery.post(); 具有不同的 URL 和相同的数据。只需发送多个请求。或者，您可以将一个请求发送到您的服务器，PHP 可以将其发送到其他页面以及其他服务器，从而规避 javascript 的同源策略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T19:51:32.627

你可以给你的表单一个id，而不是一个提交类型的btton，你有一个带有id的常规按钮（在这个例子中，id是提交）然后使用jquery在点击按钮时执行类似的操作：

```
$("button#submit").click(function() {
    $.post("https://www.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8", $("form#id").serialize(), function(data){
        //DO something
    });

    $.post("http://yoursite.yourportal.hubspot.com/?app=leaddirector&FormName=X", $('form#id').serialize(), function(data){
        //DO something 
    });
}); 
```

# javascript - 使用 javascript 从 collection_select、RoR 获取多个选定选项

> ID：10955105
> 
> 赞同：0
> 
> 时间：2012-06-08T19:40:19.837
> 
> 标签：javascript, ruby-on-rails, collections, flot, multiple-select

我在我的 Ruby on Rails 应用程序中有一个视图，其中右侧有两个 collect_select，其中一个是用户列表，另一个是具有：multiple => true 的对象列表。当用户选择了一个用户和至少一个对象时，我想在右侧显示一个图表，其中包含用户以及已选择的任何对象（可能使用 gem Flot）。我已经看到如何使用 selected_index 获取选定的对象，但我很难理解在允许多个选择时如何获取所有选定对象的数组。我希望在没有提交按钮或任何东西的情况下在 javascript 中完成所有操作，但这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:15:26.273

我终于找到了自己的答案。要在 javascript 中获取所有选定的对象，例如在 id 为“user_id”的 collection_select 中，您只需要使用：

```
$("#user_id option:selected").each(function() {

    // Do whatever with $(this).text() or $(this).val() for each option.

}); 
```

# regex - 在Perl中第n个字符的位置/索引处拆分字符串（或正则表达式匹配）？

> ID：10955107
> 
> 赞同：3
> 
> 时间：2012-06-08T19:40:41.723
> 
> 标签：regex, string, perl, split

有一个类似措辞的问题，但我认为这略有不同。

基本上，假设我有这个字符串：

" `aa{bb{dccd`"

在这里，我想在最后一个大括号处拆分字符串`{`；并将零件作为数组返回。我可以使用以下方法轻松找到该字符的位置（从 0 开始的索引）`rindex`：

```
perl -e '
$aa="aa{bb{dccd" ;
$ri = rindex($aa, "{") ;
print "$ri\n"; '

5 
```

...鉴于我不是 Perl 编码器，我首先想到的是使用类似~~`$str = split($aa, 3)`~~. 不幸的是，这不是正确的语法——[`split`](http://perldoc.perl.org/functions/split.html)将正则表达式作为第一个参数（匹配的内容），将字符串作为第二个参数——并且它不使用整数位置索引作为参数。

我发现了类似[Perl Guru 论坛的帖子：Perl Programming Help: I​​ntermediate: split or splice string on char count?](http://perlguru.com/gforum.cgi?post=50399;guest=5386615) ，建议`substr`在类似的上下文中使用；但是，我必须根据`substr`上面的示例编写两个 s 来填充列表，因此我宁愿听到有关 substr 的替代方案。

基本上，如果匹配第 N 个字符的位置的问题可以表示为正则表达式匹配，那么`split`它也可以工作 - 所以这将是我的主要问题。但是，我也很想知道是否有 Perl 内置函数可以接受指定字符位置的整数列表/数组，并返回包含拆分部分的数组。

编辑：

总结以上内容-我想要字符索引，因为我想将它们打印出来以进行调试；同时，使用它们将字符串拆分为数组 - 但不使用`substr`s.

EDIT2：我刚刚意识到我从 OP 中遗漏了一些东西——也就是说，在我正在处理的问题中，我必须首先检索字符索引（通过 rindex 或其他方式）；然后我必须对它们进行计算（因此它们可能会增加或减少） - 只有这样我才应该拆分字符串（基于新的索引值）。可能是我最初的示例太简单了，并没有过多地表达对索引/字符位置的关注（*更不用说我首先想到的`split`暗示字符索引 - 但我真的不记得它来自哪种编程语言从`:)`*)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T19:42:49.737

```
my ($pre, $post) = split /\{(?!.*\{)/s, $s; 
```

或者

```
my ($pre, $post) = $s =~ /^(.*)\{(.*)/s; 
```

第二个可能更好。

如果您需要 的索引`{`，请使用`length($pre)`. （使用第二种解决方案，您还可以使用`$-[2] - 1`. 参见`@-`and `@+`in [perlvar](http://perldoc.perl.org/perlvar.html)。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T19:53:51.657

你写了：

> 我也很想知道是否有 Perl 内置函数可以接受指定字符位置的整数列表/数组，并返回包含拆分部分的数组。

要创建一个接受偏移列表并生成具有这些拆分位置的子字符串列表的函数，请将偏移转换为长度并将它们作为参数传递给`unpack`.

*Perl Cookbook*`&cut2fmt`的第 1 章中有一个函数可以做到这一点。以下是摘录，经作者许可在此转载：

 *> > 有时您更愿意将数据视为在特定列中被分割。例如，您可能希望在位置 8、14、20、26 和 30 之前放置切口。这些是每个字段开始的列号。尽管您可以计算出正确的`unpack`格式是`"A7 A6 A6 A6 A4 A*"`，但这对于非常懒惰的 Perl 程序员来说太费脑筋了。让 Perl 为您解决。使用以下`cut2fmt`功能：

```
sub cut2fmt {
      my(@positions) = @_;
      my $template   = '';
      my $lastpos    = 1;
      foreach $place (@positions) {
          $template .= "A" . ($place - $lastpos) . " ";
          $lastpos   = $place;
      }
      $template .= "A*";
      return $template;
  }

  $fmt = cut2fmt(8, 14, 20, 26, 30);
  print "$fmt\n";

  A7 A6 A6 A6 A4 A* 
```

所以你会使用它的方式是这样的：

```
$fmt = cut2fmt(8, 14, 20, 26, 30);
@list = unpack($fmt, $string); 
```

或直接作为

```
@list = unpack(cut2fmt(8, 14, 20, 26, 30), $string); 
```

我相信这就是你所要求的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T19:42:42.580

这里有一些方法：

```
split /.*\K{/, $str;
split /{(?!.*{)/, $str;
$str =~ /(.*){(.*)/; 
```

`/regex/s`如果字符串可以跨越多行，则使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T19:58:39.820

使用方法`rindex`是`substr`根据`{`.

请注意，这包括`{`后缀部分中的 。要排除它，您将`$i + 1`在第二次`substr`通话中使用。

```
my $str = "aa{bb{dccd";

my $i = rindex $str, '{';
my $pref = substr $str, 0, $i;
my $suff = substr $str, $i;

print $pref, "\n";
print $suff, "\n"; 
```

**输出**

```
aa{bb
{dccd 
```

* * *

**更新**

我刚刚读到您希望避免`substr`并在一次操作中进行拆分。`unpack`会为你做的，像这样

```
my $str = "aa{bb{dccd";

my $i = rindex $str, '{';

my ($pref, $suff) = unpack "A$i A*", $str;

print $pref, "\n";
print $suff, "\n"; 
```

与前面的代码具有相同的输出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T21:19:04.033

我仍然不明白这有什么困难。您是否不想丢弃大括号（或您的分隔符）？@Qtax 解决方案的这些改编将大括号留在第一个或第二个子字符串中：

```
# split before the brace
split /.*\K(?=\{)/, $str;
split /(?=\{(?!.*\{))/, $str;
$str =~ /(.*)(\{.*)/;

# split after the brace
split /.*\{\K)/, $str;
split /(?<=\{(?!.*\{))/, $str;
$str =~ /(.*\{)(.*)/; 
```

（我知道没有必要避开大括号，但我认为这样阅读会更容易一些。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T19:50:22.640

是的，我会发布这个作为答案，这就是我得到的。

感谢这些资源：

*   [在 Perl 中拆分字符串](http://www.perlmonks.org/?node_id=682907)
*   [正则表达式 - 简单的用户指南和教程](http://www.zytrax.com/tech/web/regex.htm)

...我了解了“大括号”正则表达式运算符，`{n}`它“*匹配前面的字符或字符范围，n 次精确*”。因此，我可以匹配`/.{5}(.)/`：

```
perl -e '
$aa="aa{bb{dccd" ;
$aa =~ /.{5}(.)/  && print "--${1}--\n"; '

--{-- 
```

这会选择前 5 个“任意”字符 - 然后选择并打印下一个字符。或者：

```
/               # start regex
 {              # match "{" character
  {5}           # repeat previous five times
     (.)        # select into match group (the $1) next character
        /       # end regex 
```

所以，最后，我可以使用`rindex`来执行这样的拆分：

```
perl -e '
$aa="aa{bb{dccd" ;
$ri = rindex($aa, "{") ;
$aa =~ /.{$ri}(.)/  && print "--${1}--\n";
@res = split(/^.{$ri}(.)/, $aa);
print join("; ", @res) . "\n"; '

--{--
; {; dccd 
```

.. 但鉴于这也需要在开始时进行一些捕获，所以这里有其他变体：

```
@res = split(/^(.{$ri})(.)/, $aa);

--{--
; aa{bb; {; dccd

@res = split(/^(.{$ri})./, $aa);

--{--
; aa{bb; dccd 
```

...这两者都对我有用 - 除了我有一个空白作为第一项，我想一次性摆脱它（不调用额外的`splice`），但不知道如何:)

干杯!*

# jquery - 关闭 Twitter 引导模式时，向对象原型添加方法会导致错误

> ID：10955124
> 
> 赞同：4
> 
> 时间：2012-06-08T19:42:27.540
> 
> 标签：jquery, twitter-bootstrap

我有一个非常奇怪的问题。

我正在使用 Twitter Bootstrap 2。我在页面上有一个模态对话，我正在这样打开它：

`$('#rights-dialogue).modal();`

我还向`Object.prototype`对象添加了一个自定义函数，如下所示：

`Object.prototype.foo = function (a) {};`

单击模态对话框中的`x`按钮时，对话框关闭，但黑色背景仍然存在，并且在 jQuery 事件处理代码中出现一个奇怪的 jQuery 错误：

`Uncaught TypeError: Cannot read property 'origType' of undefined`

如果我从`foo()`函数中删除所有参数，则不会出现此错误，并且一切正常。

这是一个说明问题的 jsfiddle：http: [//jsfiddle.net/nicholascloud/r6T8z/5/](http://jsfiddle.net/nicholascloud/r6T8z/5/)。

我**不知道**这里发生了什么。

* * *

编辑：我注意到的其他一些事情。

Object.prototype 上的方法名称似乎并不重要。任何**带参数的**方法都会导致此错误。如果添加的方法不带参数，则不会发生错误。

当 jQuery 将事件侦听器`keyup.dismiss.modal`从 DOM 中分离出来时，就会发生错误。

我已经用 jQuery 1.7.1 和 1.7.2 确认了这个错误，但我怀疑它是 Twitter Bootstrap 问题，而不是 jQuery 本身。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T21:40:12.750

这与 jQuery 和扩展 Object.prototype 有关。

看到这个问题：[Javascript 中的原型对象破坏了 jQuery？](https://stackoverflow.com/questions/1827458/prototyping-object-in-javascript-breaks-jquery)

本质上，您应该避免扩展 Object.prototype，但请参阅答案以获取更多详细信息。

# c# - 为什么要使用序列化

> ID：10955125
> 
> 赞同：6
> 
> 时间：2012-06-08T19:42:31.977
> 
> 标签：c#, asp.net, serialization

我见过几个具有可序列化属性的示例，如下所示：

```
[Serializable()]
            public class sampleClass
            {
                public int Property1{ get; set; }
                public string Proerty2{ get; set; }

                public sampleClass() { }
                public sampleClass(int pr1, int pr2)
                {
                    pr1 = pr1;
                    Name = pr2.ToString();
                }
            } 
```

我从来没有很好地理解它是如何工作的，但是来自[msdn](http://msdn.microsoft.com/en-us/library/ms233843.aspx)：

> 序列化允许开发人员保存对象的状态并根据需要重新创建它，提供对象的存储以及数据交换。通过序列化，开发人员可以执行以下操作，例如通过 Web 服务将对象发送到远程应用程序、将对象从一个域传递到另一个域、将对象作为 XML 字符串通过防火墙传递，或者维护安全性或用户特定跨应用程序的信息。

但问题是，在我的代码示例中，我认为它没有用。只是一个用于从数据库中检索数据的对象，没什么特别的。关于何时使用和何时不使用序列化还有哪些其他用途。例如，我应该总是使用序列化，因为它更安全吗？这种方式会变慢吗？

**更新：感谢所有好的答案**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T19:46:09.677

当您想将数据表示移入或移出流程边界时，序列化非常有用。

将对象保存到磁盘是您将在许多教程中看到的一个简单示例。

更常见的是，序列化用于将数据传入和传出 Web 服务，或者将数据持久化到数据库或从数据库中传出。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-09T01:21:48.907

几个答案已经涵盖了您可能希望一般使用序列化的原因。您似乎还想知道为什么特定类具有属性`[Serializable]`，并且想知道为什么会这样做。

对于 ASP.NET，默认的会话状态存储`InProc`允许您将任何对象存储为引用并将其保留在堆上。这是存储会话状态的最佳执行方式，但是，它仅适用于您使用单个工作线程或者如果工作线程发生更改（不太可能）可以自动重建所有会话状态的情况。对于其他状态存储模式 (`StateServer`和`SQL Server`)，所有会话状态对象都必须是可序列化的，因为 ASP.NET 引擎将首先使用二进制序列化对这些对象进行序列化，然后再将它们发送到存储介质。

在您的情况下，您可能正在使用`InProc`. 仍然将会话状态中使用的所有类标记为`Serializable`并以这种方式测试它们的一个原因是您将来可能需要更改它（例如，使用 Web Farm）。如果您在设计会话状态类时没有考虑到这一点，那么将来进行迁移将非常困难。

此外，仅仅因为您可以删除该`Serializable`属性并且程序在一个环境中“工作”并不意味着它将在另一个环境中工作。例如，它可能在 Visual Studio 测试 Web 服务器（始终使用`InProc`会话状态模式）实例下，甚至在开发 IIS 实例中都能正常工作，但随后，生产 IIS 实例可能设置为使用不同的存储模式。

这些环境/配置差异不一定限于 ASP.NET 应用程序。有其他应用程序引擎可以做到这一点，甚至独立的应用程序也可以做到（构建这种可配置的环境并不难）。

最后，您可能正在使用可能被不同应用程序使用的库。有些可能需要以可序列化的方式存储状态，而另一些可能不需要。

由于这些因素，至少在构建库时，考虑使用`[Serializable]`. 请记住，这会增加测试这些类的工作量，并且对可以序列化的内容有限制（即，包含套接字引用或打开文件引用的类可能不是序列化的良好候选者，因为无法序列化打开的外部资源）所以不要过度使用它。

你问使用`[Serializable]`是否会更慢。不，不会的。此属性对性能没有直接影响。但是，如果改变应用环境来序列化对象，那么是的，性能会受到影响。序列化和反序列化的行为比仅将对象存储在堆上要慢。[请注意，可以编写一些例程来查找`Serializable`属性，然后选择序列化，但这很少见；通常它类似于 ASP.NET，由管理员或用户决定是否要更改存储介质。]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T19:50:54.480

您提供的 MSDN 引用解释了序列化何时有用：用于传输或存储数据。写入文件是序列化，并且需要序列化才能通过网络发送对象。

如果您只是在单个应用程序中填充对象，可能来自数据库，那么确实：序列化根本不是问题。对序列化类进行映像对安全性或性能没有影响：如果您不需要它，请不要担心。

另请注意，这`[Serializable]`主要与 相关`BinaryFormatter`，但实际上还有更多的序列化程序。例如：您可能希望通过 JSON 或 XML 公开您的对象——这两者都需要序列化，但都不需要`[Serializable]`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T19:54:15.043

简单示例：假设您有一个自定义形状来存储应用程序设置。

```
namespace My.Namespace
{
    [Serializable]
    public class Settings
    {
        public string Setting1 { get; set; }

        public string Setting2 { get; set; }
    }
} 
```

然后，您可以拥有一个 xml 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<Settings>
  <Setting1>Foo</Setting1>
  <Setting2>Bar</Setting2>
</Settings> 
```

使用 XmlSerializer 您可以简单地序列化和反序列化您的设置。

如果您希望将形状填充到 ASP.NET ViewState 中，那么您的形状也必须是可序列化的

这些是非常基本的示例，但证明了它的用处

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T17:19:42.187

> 关于何时使用和何时不使用序列化还有哪些其他用途。

让我举一个实际的例子。在我的一个应用程序中，我获得了请求和响应文件的`XML`模式（文件） 。我需要解析请求文件，处理并将信息保存回几个表中。稍后我需要相应地准备响应文件并将其发送回我们的客户。`XSD``XML``XML``XML`

我曾经根据模式`Xsd2Code`生成`C#`类。所以解析请求`XML`文件只是简单的将其**反序列化为**生成的请求类对象。然后我可以访问对象的属性，就像它出现在请求`XML`文件中一样。虽然生成响应`XML`文件只是从我在代码中填充的生成响应类对象进行**序列化。**这样我就可以使用 C# 对象而不是`XML`文件。我希望这是有道理的。

> 例如，我是否应该总是使用序列化，因为它更安全

我认为这与安全性没有任何关系。

# javascript - Javascript 构造函数似乎正在丢失数据

> ID：10955129
> 
> 赞同：1
> 
> 时间：2012-06-08T19:43:06.603
> 
> 标签：javascript, canvas, constructor

所以，我有一个启动画面的构造函数。我正在使用画布图形（下面的 ctx 是对画布元素的 2d 上下文的引用），但是当我尝试获取上下文的本地副本时，我似乎丢失了它。有人知道为什么它在哪里变得不确定吗？（见下文）

```
function SplashScreen(_ctx)
{
    this.loadScene = function()
    {
        this.img = new Image();
        this.img.onload = this.render;
        this.img.src = 'art/SplashScreen.png';
    };

    this.unloadScene = function()
    {
        delete this.img;
        this.img = null;
        CollectGarbage();
    };

    this.render = function()
    {
        alert(this.ctx);//<--------------undefined
        alert(this.img);//<--------------undefined
        this.ctx.drawImage(this.img,0,0);
    };

    alert(_ctx);    //<--------------properly defined
    this.ctx = _ctx;
    alert(this.ctx);//<--------------properly defined
    return this;
} 
```

这里是我调用 SplashScreen 的地方（注意：下面来自 main.js，上面来自 splashscreen.js）：

```
var ctx;

var scene_Splash;
var currentScene;

function main()
{
  ctx = document.getElementById('canvas').getContext('2d');
  alert(ctx); //<-------fine and defined
  scene_Splash = new SplashScreen(ctx);
  changeScene(scene_Splash, null, null);
}

function changeScene(_newScene, _transition, _time)
{
  currentScene = _newScene;

  currentScene.loadScene();
} 
```

进一步扩展，这里是 index.html 文件中引用这些脚本的部分：

```
<html>
 <head>
    <script language="JavaScript" type="text/javascript" src="splashscreen.js"></script>
    <script language="JavaScript" type="text/javascript" src="main.js"></script>
 </head>
 <body onload="main()">
   <canvas id="canvas" width="640" height="960"></canvas>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:48:25.157

对我来说很好：

```
function SplashScreen(_ctx)
{
    this.loadScene = function()
    {
        this.img = new Image();
        this.img.onload = this.render;
        this.img.src = 'art/SplashScreen.png';
    };

    this.unloadScene = function()
    {
        delete this.img;
        this.img = null;
        CollectGarbage();
    };

    this.render = function()
    {
        alert('in render: ' + this.ctx);
    };

    alert(_ctx);    //<--------------properly defined
    this.ctx = _ctx;
    alert(this.ctx);//<--------------properly defined
    return this;
}

var c = new SplashScreen(1);
c.render(); // in render: 1 
```

确保使用`new`关键字实例化对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:22:02.997

尝试：

```
this.img.onload = this.render.bind(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T20:16:33.193

当您将函数绑定到事件处理程序时，它会被调用，就好像它是您附加处理程序的元素的属性一样；该函数不知道它曾经是某个其他任意对象的属性。

解决此问题的常用方法是使用一个或多个闭包来捕获您希望在处理事件处理程序期间可用的变量的值。

根据规范，您应该能够使用 handleEvent 方法而不是函数传递对象。然后以预期的方式调用此方法，即函数作为对象的属性调用。我知道这目前适用于 Firefox，但我不知道它是否适用于其他浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T20:39:24.447

Esailija 发现了一直困扰我的问题，其他人也指出了这一点，但这是第一个：

> @Zahel 没有调用它，而是将其作为事件侦听器添加到图像的 onload 事件中。然后浏览器在加载图像时调用它，并将此设置为图像，该图像显然没有 .img 或 .ctx 属性。– 埃塞利亚

# objective-c - 用远程 .plist 覆盖本地 .plist 文件

> ID：10955130
> 
> 赞同：1
> 
> 时间：2012-06-08T19:43:09.740
> 
> 标签：objective-c, plist

我的应用程序在启动时加载本地`list.plist`文件。

然后它有一个 refreshTable 按钮，可以从我的网站获取远程版本的 .plist 文件。

```
App Launch
    local list.plist loads
       user hits refreshList button
          local list.plist is overwritten by remote list.plist
             local list.plist updated until remote list.plist updates again 
```

初始化数据的方法：

```
 //Remote data 
    list = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://mywebsite.com/list.plist"]];
    NSSortDescriptor *descriptor = [[[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)] autorelease];
    sortedList = [[list sortedArrayUsingDescriptors:[NSArray arrayWithObject:descriptor]] retain];

    //Local data
    NSString *localPath = [[NSBundle mainBundle] pathForResource:@"list" ofType:@"plist"];
   localList = [[NSMutableArray alloc] initWithContentsOfFile:localPath];
    NSSortDescriptor *localDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)] autorelease];
    localSortedList = [[localList sortedArrayUsingDescriptors:[NSArray arrayWithObject:localDescriptor]] retain]; 
```

这是刷新的方法：

```
- (void) refreshTable:(id)sender

{  
   //Remote .plist 
   list = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://mywebsite.com/list.plist"]];
    NSSortDescriptor *descriptor = [[[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)] autorelease];
   sortedList = [[list sortedArrayUsingDescriptors:[NSArray arrayWithObject:descriptor]] retain];
    [self.tableView reloadData];
    //now write remote plist to local plist
} 
```

下载远程 plist 后，如何覆盖本地 plist？

我正在考虑清空包含本地 plist 的本地数组并用远程数组填充它，我这样做了：

我按照我想的方式解决了：

```
 //Remote .plist 
    list = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://phillipapps.com/mntlion/list.plist"]];
    NSSortDescriptor *descriptor = [[[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)] autorelease];
    sortedList = [[list sortedArrayUsingDescriptors:[NSArray arrayWithObject:descriptor]] retain];

    NSLog(@"list: %@",list);
    [localList removeAllObjects];
    [localList addObjectsFromArray:list];
    localSortedList = [[localList sortedArrayUsingDescriptors:[NSArray arrayWithObject:descriptor]] retain];
    NSLog(@"locallist: %@",localList);
    [self.tableView reloadData]; 
```

它可以工作，但是我怎样才能`localList`用 的内容来写`list`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T23:41:18.190

所以......在聊天中查看了几个小时后，我们解决了问题。

```
- (NSArray*)readPlist
{
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *plistPath = [[documentPaths lastObject] stringByAppendingPathComponent:@"localFile.plist"];

    NSFileManager *fMgr = [NSFileManager defaultManager];
    if (![fMgr fileExistsAtPath:plistPath]) {
        plistPath = [[NSBundle mainBundle] pathForResource:@"template" ofType:@"plist"];
    }
    return [NSArray arrayWithContentsOfFile:plistPath];
}

- (void)writePlist:(NSArray*)arr
{
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *plistPath = [[documentPaths lastObject] stringByAppendingPathComponent:@"localFile.plist"];

    NSFileManager *fMgr = [NSFileManager defaultManager];
    if (![fMgr fileExistsAtPath:plistPath])
        [fMgr removeItemAtPath:plistPath error:nil];

    [arr writeToFile:plistPath atomically:YES];
} 
```

初始化 ivar：

```
self.plistArray = [self readPlist]; 
```

从服务器加载新的后`plist`，您必须调用此代码：

```
self.plistArray = [NSArray arrayWithContentsOfURL:[NSURL URLWithString:@"http://mywebsite.com/list.plist"]];
[self writePlist:plistArray]; // e.g. for caching
[self.tableView reloadData]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T23:38:57.267

在我的应用程序中，我所做的几乎与您正在寻找的完全一样。您无法写入 NSBundle，因此步骤如下：

1.  尝试从缓存目录加载plist，如果成功则转到3。

2.  从包中加载 plist

3.  检查加载的 plist 是否是最新的（或者，通过按下按钮触发进一步的步骤）

4.  下载新的 plist

5.  保存到缓存目录

代码看起来像这样：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *cache = [paths objectAtIndex:0];

ratios = [NSDictionary dictionaryWithContentsOfFile:[cache stringByAppendingPathComponent:@"devices.plist"]];
if (ratios == nil) {
    ratios = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"devices" ofType:@"plist"]];
}

NSString *device = [[UIDevice currentDevice] machine];
NSDictionary *d = [ratios objectForKey:device];
if (d!=nil) {
    pixelInchRatio = [[d objectForKey:@"pixelInchRatio"] doubleValue];
    bezelWidth = [[d objectForKey:@"bezelWidth"] doubleValue];
    bezelHeight = [[d objectForKey:@"bezelHeight"] doubleValue];
} else if (fetch) {
    [[[[RulerDimensionDownload alloc] init] autorelease] startDownload];
} 
```

然后在下载器中保存如下：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *cache = [paths objectAtIndex:0];

[[NSFileManager defaultManager] createDirectoryAtPath:cache withIntermediateDirectories:YES attributes:nil error:nil];
[ratios writeToFile:[cache stringByAppendingPathComponent:@"devices.plist"] atomically:YES]; 
```

一些解释：

每个示例中的前几行，路径和缓存定义，只是获取应用程序缓存目录的位置。我用它来存储我是我的 plist 的最新版本。

因此，在加载代码中，我首先尝试从缓存目录加载 plist。如果失败（比率为空），我会从我的应用程序包中加载它（这是我随应用程序提供的 plist 版本）。

之后，我检查 plist 是否包含所需的信息。（plist 对每种设备类型都有一个定义。如果设备不在 plist 中，那么我知道我需要尝试更新 plist）

如果 plist 已过期，我将使用我编写的类开始下载：RulerDimensionDownload。完成下载后，我将文件保存到缓存目录中。然后，下次需要加载 plist 时，它将首先加载，并且永远不会查看已发送的 plist。（我还用新的 plist 发送通知）

# generics - 无法解析具有类型约束的简单 F# 运行时泛型函数

> ID：10955133
> 
> 赞同：2
> 
> 时间：2012-06-08T19:43:17.353
> 
> 标签：generics, f#, inline, type-inference

我有一个带有一个通用参数的基本函数：

```
let func<'T> (x:'T when 'T : (static member op_Explicit: 'T -> float) ) =
   float x 
```

为什么会出现错误：“声明的类型参数 'T 不能在此处使用，因为类型参数无法在编译时解析”

在这个例子中，我提供了一个通用参数并限制它能够显式地转换为浮点数，并且所有的函数都被转换为浮点数，那么问题是什么？我已经阅读了所有与 F# 中的泛型相关的 MSDN 文档，但它们似乎只是绕圈子，与我在 Visual Studio 中看到的行为不符。据我了解，使用单引号语法`'T`适用于运行时泛型，而不是编译时泛型。

这让我想到了另一个问题。我经常看到有`'T`和`^T`没有`inline`. 这与有关这些语法定义的 MSDN 文档背道而驰。我错过了什么吗？

此外，从文档来看，似乎应该能够自动推断出`op_Explicit`对类型的约束，而无需任何类型注释：`'T`

```
let func x =
   float x 
```

但在这种情况下`x`推断出的类型是。`int`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T20:19:15.557

Here's a quickie-summary that may help out.

You use `inline` and `^T` and member constraints to author weird code 'for all types T that have this ad-hoc API set'; this is code that cannot be authored directly in .NET (e.g. you can't write it in C#), and it must be `inline` because the F# compiler can inline/hard-code the specific type at each individual call site. This is a very advanced feature, and so you're unlikely to find too many docs/samples about it (and the error diagnostics are not always great).

You use `'T` for normal generics, e.g. the usual generic stuff you do in C#. This is a mainline scenario.

Note that in both cases, it is often possible(/better/easier) to let F# infer types and genericity for you, rather than spelling it out. E.g.

```
let inline f x = float x 
```

and the hover-tip in Visual Studio over `f` shows that the appropriate constraint has been inferred.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:08:55.773

感谢@ildjarn，我找到了答案：

来自[http://msdn.microsoft.com/en-us/library/dd548046](http://msdn.microsoft.com/en-us/library/dd548046)：

> 静态解析的类型参数主要与成员约束结合使用，成员约束是允许您指定类型参数必须具有特定成员或成员才能使用的约束。没有办法通过使用常规泛型类型参数来创建这种约束。

似乎 Visual Studio 应该给出一个不同的错误，然后，例如：“成员约束不能在此处使用，因为 'T 不是静态解析的类型”或“成员约束只能与静态解析的类型参数一起使用。 "

# android - 如何在一个活动中写入文本文件并在另一个活动中读取该文件？

> ID：10955134
> 
> 赞同：1
> 
> 时间：2012-06-08T19:43:17.687
> 
> 标签：android, file, read-write

我可以在 SAME 活动中写入然后读取文本文件，但是在从另一个 Activity 写入文本文件后，我无法读取它。

***例如：*** **活动 A**创建并写入文本文件。**活动 B**读取该文本文件。

我使用此代码写入**Activity A**中的文本文件：

```
FileOutputStream fos = null;
        OutputStreamWriter osw = null;
        try 
        {
            fos = openFileOutput("user_info.txt", Context.MODE_WORLD_WRITEABLE);
            osw = new OutputStreamWriter(fos);
            osw.write("text here");
            osw.close();
            fos.close();
        } 
        catch (FileNotFoundException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

然后我使用此代码尝试读取由**Activity A**创建的相同文本文件，但我得到`FileNotFoundException`：

```
 try 
            {
                FileInputStream fis = openFileInput("user_info.txt");
                InputStreamReader isr = new InputStreamReader(fis);
                BufferedReader buff = new BufferedReader(isr);
                String line;
                while((line = buff.readLine()) != null)
                {

                    Toast.makeText(this, line, Toast.LENGTH_LONG).show();
                }
            } 
            catch (FileNotFoundException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
            catch (IOException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

有谁知道我为什么得到`FileNotFoundException`？

是路径问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:21:47.600

这肯定是一个路径问题。你可以这样写

```
fpath=Environment.getExternalStorageDirectory().getAbsolutePath()+"/"+"yourdirectory";

File custdir=new File(fpath);
if(!custdir.exists())
        {
            custdir.mkdirs();

        }
                    File savedir=new File(custdir.getAbsolutePath());
                    File file = new File(savedir, filename);

                    if(file.exists())
                    {
                        file.delete();
                    }
                    FileOutputStream fos;
                    byte[] data = texttosave.getBytes();
                    try {
                        fos = new FileOutputStream(file);
                        fos.write(data);
                        fos.flush();
                        fos.close();
                        Toast.makeText(getBaseContext(), "File Saved", Toast.LENGTH_LONG).show();
                        finish();
                    } catch (FileNotFoundException e) {
                        Toast.makeText(getBaseContext(), "Error File Not Found", Toast.LENGTH_LONG).show();
                        Log.e("fnf", ""+e.getMessage());
                        // handle exception
                    } catch (IOException e) {
                        // handle exception
                        Toast.makeText(getBaseContext(), "Error IO Exception", Toast.LENGTH_LONG).show();
                    } 
```

你可以读到

```
String locatefile=Environment.getExternalStorageDirectory().getAbsolutePath()+"/"+"yourdirectory"+"/filename";

try {
            br=new BufferedReader(new FileReader(locatefile));
                     while((text=br.readLine())!=null)
    {
        body.append(text);
        body.append("\n");

    }
 } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

 } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:04:43.200

真的不知道你的应用程序是如何构建的，但是，你得到的错误似乎是一个路径问题，你确定两个活动都在同一个文件夹中吗？如果没有，您需要为文本文件设置绝对路径（如：“/home/user/text.txt”）或相对路径（如：“../text.txt”）。如果您不确定，请尝试使用以下命令打印 Activity 的当前路径

```
new File(".").getAbsolutePath(); 
```

而且，虽然我不能说我是 Android 专家，但你确定你的文件需要 Context.MODE_WORLD_WRITEABLE 吗？如果除了您的应用程序之外没有其他应用程序正在读取或写入它，那应该没有必要，对吧？

# python - wxPython ScrolledWindow 不向右或向下滚动

> ID：10955135
> 
> 赞同：0
> 
> 时间：2012-06-08T19:43:18.130
> 
> 标签：python, wxpython, scrolledwindow

我有一个 wx.ScrolledWindow 用于在其中显示图像。我设置了鼠标和键盘事件，以便当用户按住空格键并拖动鼠标时，ScrolledWindow 应该随着鼠标移动而移动，显示图像的不同部分。我可以让 ScrolledWindow 向上和向左滚动，但不能向右或向下滚动。这是一个奇怪的错误，我无法弄清楚。有没有人有任何想法？

以下代码应将 Scrollbar 增加或减少 1。我通过查找 Scrollbar 的初始位置（init_pos_x 和 init_pos_y）然后使用 Scroll(x, y) 方法更新位置来做到这一点。

我通过使用（我认为这可能是问题）获得了初始坐标：

```
init_pos_x, init_pos_y = self.scroll.GetViewStart() 
```

previous_x 和 previous_y 是用户鼠标的先前位置。x 和 y 是用户鼠标的新位置。

```
if self.previous_y < y: # Scroll up (user drags down)
    self.scroll.Scroll(init_pos_x, init_pos_y - 1)
elif self.previous_y > y: # Scroll down (user drags up)
    self.scroll.Scroll(init_pos_x, init_pos_y + 1)
elif self.previous_x < x: # Scroll left (user drags right)
    self.scroll.Scroll(init_pos_x - 1, init_pos_y)
elif self.previous_x > x: # Scroll right (user drags left)
    self.scroll.Scroll(init_pos_x + 1, init_pos_y) 
```

重申一下，这仅适用于向上滚动和向左滚动。是否有任何理由该方法不适用于向下滚动和向右滚动？

编辑：向下滚动和向右滚动的条件正在执行，但它什么也没做。

谢谢

# html - HTML5 语义网络元素 - 为什么我应该在内部应用程序中使用它们

> ID：10955139
> 
> 赞同：5
> 
> 时间：2012-06-08T19:43:46.073
> 
> 标签：html, semantics

为什么要在内部应用程序中使用 HTML5 语义 Web 元素？语义元素似乎有利于搜索引擎检测哪些元素特定于导航、文章等。如果我在仅客户端的基于 HTML 的应用程序中使用这些元素，我将获得什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T19:45:48.930

可能的收获：

*   可读性
*   可访问性
*   轻量级应用
*   更少的网络限制（更小的文件大小）
*   更容易扩展
*   更容易培训第二个开发人员以适应
*   有机会练习开发外部网站的良好习惯

可能的缺点：

*   没有任何？

* * *

基本上，

```
<header>
    <hgroup>
        <h1>Logo and Application Title</h1>
        <h2>Clever Slogan</h2>
    </hgroup>

    <nav>
        <ul>
            <li>Home</li>
            <li>About</li>
            <li>Contact</li>
            <li>Test</li>
            <li>Stuff</li>
        </ul>
    </nav>
</header> 
```

看起来比...

```
<div id="header">
    <div class="top_logo">
        <h1>Logo and Application Title</h1>

        <h2>Clever Slogan</h2>
    </div>

    <div class="navigation">
        <ul>
            <li>Home</li>
            <li>About</li>
            <li>Contact</li>
            <li>Test</li>
            <li>Stuff</li>
        </ul>
    </div>
</div> 
```

还有款式

```
<style type="text/css">
    header hgroup {}
    header nav li {}
</style> 
```

看起来比

```
<style type="text/css">
    #header .top_logo {}
    #header .navigation li {}
</style> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T19:49:18.663

Some users who use accessibility features like a screenreader will be able to use your site much more easily. This also goes for device-specific-accessibility features, such as the iOS screen reader.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T19:47:15.993

可访问性。例如，您可能有需要屏幕阅读器的视障用户。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T19:54:18.893

**Ease of development**

The gain is small in your context, so the "fun" and "ease" that semantic web elements offer may be the main reason.

I prefer coding and maintaning an application like this:

```
<nav>
    ...
</nav>
<article>
    <h2>Article's title</h2>
</article> 
```

than:

```
<div class="navigation">
    ...
</div>
<div class="article">
    <h2>Article's title</h2>
</div> 
```

It's even better when using CSS selectors:

```
$("nav").show();
$("article figure")... 
```

**Update**

Also, you can use specific functionalities that may be useful in your context, for example:

*   audio/video integration

*   time tags (open a date in a calendar)

Example:

```
<time datetime="1982-07-18">Priyanka Chopra’s birthday</time> 
```

*   locations (some browser could offer to open a map or give directions)

Example:

```
<location lat=51.502064 long=-0.131981>London SW1A 4WW</location> 
```

# unix - 使用脚本进行数据操作

> ID：10955141
> 
> 赞同：-1
> 
> 时间：2012-06-08T19:43:54.390
> 
> 标签：unix

我有以下格式的数据：

```
Key1:Value1 Key2:Value2 Key3:Value3  
A  
B   
C   
D  
Key1:Value4 Key2:Value5 Key3:Value6  
A1  
B1  
C1   
Key1.. 
```

等等。键的数量总是三个，并且顺序相同。原始数据集中的值 A、B、C、D 之间没有多余的线。

我想以格式输出

```
Value3, A B C D   
Value6, A1 B1 C1   
.  
.  
. 
```

关于脚本的任何想法我都可以用来完成这项工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:46:07.960

正则表达式可以为您提供帮助，但取决于通常的值类型，您可以将其编写为与 Key3 匹配：[Pattern to match value] 并绘制它，然后可以手动抓取下一个 Key1 之前的所有连续行for 循环并停止，直到您到达新的关键行并为每个部分重复。

伪代码：

```
current_key = ""
while !EOF:
    line = next_line()
    if line has regular expression for "Key3: Value":
        process for Value
        current_key = Value
    else 
        process line as a regular ABCD value and print or whatever 
```

没有太多的错误检查，但希望这有助于你继续前进。

# cocos2d-iphone - Box2D 小口袋孔创建

> ID：10955145
> 
> 赞同：0
> 
> 时间：2012-06-08T19:45:00.770
> 
> 标签：cocos2d-iphone, box2d

我有一个关于我正在使用 box2D 和 cocos2D 制作的游戏的简单问题。我昨天开始使用物理引擎，所以我对它的使用和功能相当缺乏经验。我的游戏涉及使用加速度计在屏幕上滚动一个球。我想在地面上添加孔，如果球滚入，则需要通过加速度计获得更大的加速度才能逃离孔袋。我玩弄了摩擦、线性阻尼、修改加速度计的重力矢量，并尝试增加吸引力，但我没有取得太大的成功，其中一些并不能很好地模拟我想要发生的事情。基本上我只想创建一些传感器，并为它们提供一个球可以落入的小口袋的属性。非常感谢任何提示和建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:52:53.677

您可以在每一帧中获取球的 y 位置，如果它低于某个阈值，则它在一个洞中。基于此，如果球在洞中，请降低灵敏度。当球出洞时，将灵敏度恢复正常。

至于创建孔，请使用 Vertex Helper 创建与您的精灵相对应的主体。

如果您需要更多解释，请随时询问。

详细说明：

![例子](../Images/21e98f342152a6e9b74c20934cb6d5f5.png)

现在，基本上在图片中，我正在描绘我之前试图描述的内容。如果玩家的 Y 位置低于某个点，您真正需要做的就是更改倾斜灵敏度。我只是以50为例。

一些伪代码：

```
- (void)update:(ccTime)dt
{
    if (player.position.y >= 50) { //If the player's y position is above or equal to 50
        if (sensitivity != normalSensitivity) { //We don't need to set it every frame, so lets check
            sensitivity = normalSensitivity;
        }
    }
    if (player.position.y < 50) { //If player's position is below our threshold of 50
        if (sensitivity != limitedSensitivity) { //Check so we don't set the sensitivity every frame
            sensitivity = limitedSensitivity;
        }
    }
} 
```

现在，就 Vertex Helper 而言，它是一个开源工具（我相信），它可以帮助您为自定义形状定义顶点，然后可以将其直接复制并粘贴到您的 box2d 或花栗鼠 cocos2d 项目中。它可以喜欢[这里](https://github.com/jfahrenkrug/VertexHelper "这里")。

我建议四处搜索有关如何使用它的教程。它非常简单，但您可能需要快速参考才能开始。

最后，要记住的是，box2d 只能处理凸形，不能处理凹形。凸形是一种形状，其中不可能在不穿过形状本身的情况下从任何顶点画线到另一个顶点。基本上是没有凹痕的东西。

![凸与凹](../Images/dd48b34a5563fa1d3c9cf61facf4e88a.png)

我希望这会有所帮助。我不确定我是否能比我更详细，但如果您有更具体的问题，请随时提问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:02:54.077

我建议你使用 Level Helper 。它是创建基于物理的游戏的绝佳工具。

你可以在[这里找到](http://www.levelhelper.org/)

# python - 使用 GIL 作为线程池

> ID：10955150
> 
> 赞同：0
> 
> 时间：2012-06-08T19:45:20.220
> 
> 标签：python, multithreading, multiprocessing, gil

注意：我缺乏对这个主题的教育，所以我可能会做出一些幼稚的假设。

假设您有一个执行阻塞 I/O 的函数。您需要运行此功能 n 次。

如果您要简单地生成 n 个线程（使用 threading 模块）并同时启动它们，那么简单地使用 GIL 来管理线程（基于 I/O）而不是使用 multiprocessing.pool 模块是否可行管理子流程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T19:46:48.193

将实现细节用作代码的核心功能是一种不好的做法。[GIL 是 CPython 的一个实现细节，在其他实现](http://wiki.python.org/jython/WhyJython)中不存在。

使用旨在做你想做的事情的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:20:45.017

GIL 在这里有什么意义？你期望从中得到什么？

您可以生成 n 个线程并让它们都执行阻塞 I/O，而无需 GIL。

如果你想“管理”线程——例如，加入所有线程以便你知道什么时候完成——你仍然需要明确地这样做；GIL 没有帮助。

# php - 您如何使用 jquery 通过 ajax 发布元素值？

> ID：10955154
> 
> 赞同：1
> 
> 时间：2012-06-08T19:45:47.873
> 
> 标签：php, jquery, ajax, post

我可以将字符串发布到 PHP 文件，但是当我尝试在表单中选择一个输入字段以将其中的值发布到 PHP 文件时，它不起作用。我是否正确选择了输入字段中的值？

.js

```
$.post("js/data.php", {postid: form.postid.value},
            function(output){
                $("#gotpostid").html(output).show();
            }).fail(function(x,y,z){ 
                $("#gotpostid").html(x + "<br />" + y + "<br />" + z)
            }); 
```

索引.php

```
<div class="post">
<form name="form"><input type="text" name="postid" value="1234" />
</div> 
```

如果我只是这样做`{postid: "some text"}`，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:48:10.050

尝试以下操作：

```
<input type="text" name="postid" id="postid" value="1234" /> 
```

并通过做来获取价值

```
value of postid is $("#postid").val() instead form.postid.value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:48:21.530

采用

```
 $('input[name="postid"]').val(); 
```

代替

```
form.postid.value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T19:48:24.277

而不是`form.postid.value`，尝试`$('[name="postid"]').val()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T19:53:18.773

试试这些。

```
$.post("js/data.php", {postid: document.getElementById("postid").value}, 
```

或者

```
$.post("js/data.php", {postid: $("input[name='postid']")[0].value}, 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T19:49:08.147

你可以尝试这样发送：

```
 $.post("js/data.php", $(this).serialize(),
        function(output){
            $("#gotpostid").html(output).show();
        }).fail(function(x,y,z){ 
            $("#gotpostid").html(x + "<br />" + y + "<br />" + z)
        }); 
```

这样您就可以将表单中的所有值发送到 php，而不必再担心了

# ajax - 没有信息的骨干收集获取错误

> ID：10955159
> 
> 赞同：1
> 
> 时间：2012-06-08T19:45:50.987
> 
> 标签：ajax, rest, backbone.js

在获取我正在使用的骨干集合时，我遇到了一个奇怪的问题。在我的代码的一个特定实例中，我执行了一次提取（在代码的其他区域中我是如何做的，一切正常），提取似乎永远不会到达服务器，并且开发人员工具将请求显示为红色，并带有状态/文本字段中的单词（已取消）。

我已经将它引入了主干同步方法，我看到 $.ajax 正在构建，一切看起来都很好。有没有人遇到过这个问题？

如果有帮助，这是我的代码，这是一个调用两个 .ashx 服务以首先检查文件是否存在然后打开它的函数。对我不起作用的部分是“me.collection.fetch()。

```
openDocument: function () {
        var me = this,
                fileId = me.model.get('id'),
            userId = Dashboard.Data.Models.UserModel.get("UserInfo").User_ID,
            fileRequest = '/genericHandlers/DownloadFile.ashx?id=' + fileId + '&userId=' + userId,
            fileCheck = '/genericHandlers/CheckFileExistance.ashx?id=' + fileId + '&userId=' + userId;

        //hide tooltip
        me.hideButtonTooltips();

        // Check for file existance
        $.ajax({
            url: fileCheck
        })
        .done(function (data) {
            if (data && data === "true") {

                document.location.href = fileRequest;

                me.collection.fetch();

            } else if (!!data && data === "false") {
                "This file is no longer available.".notify('error');
            }
        })
        .fail(function (data) {
            "Something went wrong during the File Existance check".notify('error');
            "Something went wrong during the File Existance check".log(userId, 'error', 'Docs');
        });
    }, 
```

我的收藏：

```
// docsCollection.js - The collection of ALL the documents available to a given user

// Document Collection
Dashboard.Collections.DocsCollection = Backbone.Collection.extend({

    model: Dashboard.Models.DocumentUploadModel,

    url: function () {
        return 'apps/docs/Docs/' + this.userId;
    },

    initialize: function (options) {
        this.userId = options.userId;
        this.deferredFetch = this.fetch();

    },

    comparator: function (model) {
        return -(new Date(model.get('expirationDate')));
    },

    getDaysSinceViewedDocuments: function () { 
        return this.filter(function (model) {
            return model.get('daysSinceViewed') !== null;
        });
    },

    getNewDocuments: function () { 
        return this.filter(function (model) {
            return model.get('isNew');
        });
    },

    getExpiredDocuments: function () { 
        return this.filter(function (model) {
            return model.get('isExpired');
        });
    }

}); 
```

和我的模型：

```
Dashboard.Models.DocumentUploadModel = Backbone.Model.extend({
    defaults: {
        fileArray: [],
        name: '',
        description: '',
        accesses: [],
        tags: [],
        expirationDate: ''
    },

    initialize: function () {

            this.set({
                userId: Dashboard.Data.Models.UserModel.get("UserInfo").User_ID,
                expirationDate: (this.isNew()) ? buildExpirationDate() : this.get('expirationDate')
            }, { silent: true });

        function buildExpirationDate() {
            var date = new Date((new Date()).getTime() + 24 * 60 * 60 * 1000 * 7),
                    dateString = "{0}/{1}/{2}".format(date.getMonth() + 1, date.getDate(), date.getFullYear());

            return dateString;
        }

    },

    firstFile: function () {
        return this.get('fileArray')[0];
    },

    validate: function (attributes) {
        var errors = [];

        if (attributes.name === '' || attributes.name.length === 0)
            errors.push({
                input: 'input.txtName',
                message: "You must enter a name."
            });

        if (attributes.description === '' || attributes.description.length === 0)
            errors.push({
                input: 'textarea.taDescription',
                message: "You must enter a description."
            });

        if (errors.length > 0)
            return errors;

        return;
    },

    sync: function (method, model, options) {
        var formData = new FormData(),
                files = model.get("fileArray"),
                $progress = $('progress'),
                success = options.success,
                error = options.error;

        // Nothing other than create or update right now
        if (method !== "create" && method !== "update")
            return;

        // Build formData object
        formData.append("name", model.get("name"));
        formData.append("description", model.get("description"));
        formData.append("accesses", model.get("accesses"));
        formData.append("tags", model.get("tags"));
        formData.append("expirationDate", model.get("expirationDate"));
        formData.append("userId", model.get("userId"));
        formData.append("isNew", model.isNew());

        // if not new then capture id
        if (!model.isNew())
            formData.append('id', model.id);

        for (var i = 0; i < files.length; i++) {
            formData.append('file', files[i]);
        }

        xhr = new XMLHttpRequest();

        xhr.open('POST', '/genericHandlers/UploadDocsFile.ashx');

        xhr.onload = function () {
            if (xhr.status === 200) {
                if (success)
                    success();
            } else {
                if (error)
                    error();
            }
        }

        if ($progress.length > 0) {
            xhr.upload.onprogress = function (evt) {
                var complete;

                if (evt.lengthComputable) {
                    // Do the division but if you cant put 0
                    complete = (evt.loaded / evt.total * 100 | 0);
                    $progress[0].value = $progress[0].innerHTML = complete;
                }
            }
        }

        xhr.send(formData);
    },

    upload: function (changedAttrs, options) {
        this.save("create", changedAttrs, options);
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:30:46.253

`document.location.href`在尝试获取集合之前，您正在分配一个值：

```
document.location.href = fileRequest;
me.collection.fetch(); 
```

更改`document.location.href`将更改整个页面，并且在此过程中，任何当前正在运行的 JavaScript 都将被关闭，因此我不希望您`me.collection.fetch()`被执行。

# android - 如何在布局中实现两个空视图

> ID：10955175
> 
> 赞同：0
> 
> 时间：2012-06-08T19:47:13.467
> 
> 标签：android, android-layout

我对每个选项卡上`TabHost`的`TabWidget`哪个主机都有一个 ListView 的视图。我需要`empty`为每个 ListView 提供一个视图。那是在每个选项卡上，如果相应的 ListView 没有项目，我需要显示另一个视图。

如果我在布局 xml 文件中有一个带有`@android:id/empty`id 标记的视图的选项卡，那么它工作得很好。但是如何为每个选项卡完成相同的事情呢？

我更喜欢使用最少编码的简单解决方案。我希望 Android 支持类似`@android:id/empty1`and的东西`@android:id/empty2`，但事实并非如此。

更新：已经解决了。自定义 ID 也适用于空视图。这是我的误解，只有具有特定 ID 的预配置 Android 视图才能用作空视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:01:18.607

经过短暂的调查，我发现自定义 ID 也适用于空视图。这是我的误解，只有具有特定 ID 的预配置 Android 视图才能用作空视图。

# c# - 绑定链错误

> ID：10955176
> 
> 赞同：1
> 
> 时间：2012-06-08T19:47:13.717
> 
> 标签：c#, wpf, binding, ivalueconverter

我注意到 WPF 中的一个小问题。如果你在一个链中双向绑定属性，那么在`(A <-> B, B <-> C, C <-> D ...)`你引入两个或更多转换器之前一切都很好。

现在，使用一个转换器，它仍然可以工作，但是当您在链中添加两个转换器时`(A <x> B, B <-> C, C <x> D ...)`，如果属性变化足够快，它可能会陷入无限循环。

似乎 WPF 在避免无限递归方面非常聪明，但如果变化来得太快，它会阻碍任何阻碍你的东西，并进入无穷大。

我注意到这一点是在我为自己的颜色编辑器制作原型时。我希望通过一个位图来完成颜色选择，该位图交叉色调和亮度，以及另一个滑块饱和度。为了确保滑块同步，我需要与转换器绑定（往返颜色）。现在，我遇到了计算问题，所以我创建了一个管理转换但只在需要时才这样做的类，并将所有内容绑定到该类。问题是当我在我的控制之外绑定时，如果用户真的快速移动调色板，我会遇到无限递归。

我将其追溯到一个有趣的效果。转换器（当设置为两种方式时）将向前触发，然后快速返回以反映任何转换损失。但是，当与另一个执行相同操作的转换器链接时，它们会无休止地来回弹跳，就像乒乓球一样。

这只发生在转换器被触发得足够快的情况下。所以我猜我溢出了一些计算递归堆栈的值。

**有没有其他人注意到这种效果，当人们对控件的“结果值属性”使用绑定时，如何避免此类问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:06:38.277

如果您的转换器不准确（例如，有数字计算），那么您将不得不以类似于此的方式打破链......

**用于通知属性**

代替：

```
public double MyProperty
{
    get
    {
        return _myProperty;
    }
    set
    {
        if (value != _myProperty)
        {
            _myProperty = value;
            NotifyPropertyChanged("MyProperty");
        }
    }
} 
```

采用：

```
public double MyProperty
{
    get
    {
        return _myProperty;
    }
    set
    {
        if (Abs(value - _myProperty) / (Max(Abs(value), Abs(_myProperty)) + double.Epsilon) > MyEpsilon)
        {
            _myProperty = value;
            NotifyPropertyChanged("MyProperty");
        }
    }
} 
```

或者类似的不准确比较，这样不准确就不会造成无限循环。

**对于依赖属性**

使用`Register(String, Type, Type, PropertyMetadata, ValidateValueCallback)`and`PropertyMetadata(Object, PropertyChangedCallback, CoerceValueCallback)`定义 CoerceValueCallback 以防止小的更改（使用与上述相同的算法）。

# ios - 从表 XIB 中识别和导航到 Storyboard 视图控制器

> ID：10955179
> 
> 赞同：0
> 
> 时间：2012-06-08T19:47:28.133
> 
> 标签：ios, xcode, uitableview, navigation, storyboard

*回复：iOS5 开发*

我目前有一个大型的 Storyboard-web 视图控制器，它们都继承了相同的基本类，使用不同的图像/标题进行区分。

一个例子是：

10 个具有相同根类的不同 VC，分布在故事板上。用户将这些 VC 中的两个“收藏”到*收藏*（可变）数组中。

该数组采用最喜欢的 VC 标题的值并加载到表视图中。

有没有一种方法可以将 VC 标题与某种标签相关联，该标签可用于从表视图单元格选择中与相关 VC 相连接？

**简而言之，有没有一种方法可以为 VC 分配 ID（类似于标签），然后可以将其链接到每个 VC 名称的字典/数组，以便用户可以在表中选择这样的标题并与相关 VC 绑定?**

注意：表格视图是 XIB，有问题的 VC 是故事板

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:51:16.087

当您在 IB 中选择 VC 时，打开属性检查器。在那里你会看到在一般的“视图控制器”标签下有一个“标识符”字段，你可以使用这个字符串从代码中实例化：

```
[storyboard instantiateViewControllerWithIdentifier:@"YourVCIdentifier"]; 
```

# java - servlet 3.0 vs node.js 用于彗星通知

> ID：10955180
> 
> 赞同：2
> 
> 时间：2012-06-08T19:47:28.957
> 
> 标签：java, node.js, servlets, comet

我正在开发一个将实时通知推送给用户彗星风格的网络应用程序。我当前的解决方案使用 Servlet 3.0。一般的想法是

1.  请求的 AsyncContext 被放入应用范围 Map，
2.  单个后台线程等待队列上的通知
3.  如果是通知，则将其推送到 Map 中相应的 AsyncContext。

我正在使用带有 NIO 连接器的 Tomcat 7.0。一般来说，我使用的方法与此非常相似：[http ://www.javaworld.com/javaworld/jw-02-2009/jw-02-servlet3.html?page=3](http://www.javaworld.com/javaworld/jw-02-2009/jw-02-servlet3.html?page=3)

我还没有机会探索 node.js。我的大多数用例（可能）可能不会从 node.js 中受益，但也许这个彗星通知会。

据我了解，两种解决方案都不会请求一个线程，因此两个系统都应该扩展。

我的问题是，使用 Servlet 3.0 异步模式或 Node.js 扩展彗星的一般优缺点是什么？

# java - JSF2.0 复合为每个传递的值添加一个丰富的选项卡

> ID：10955182
> 
> 赞同：0
> 
> 时间：2012-06-08T19:47:36.280
> 
> 标签：java, jsf-2, composite-component

我正在使用 JSF 2.0 复合来拥有一种模板并最小化我的 xhtml 工作，例如我有这个复合 xhtml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:rich="http://richfaces.org/rich"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:cc="http://java.sun.com/jsf/composite"
  >

<cc:interface>

    <cc:attribute name="tableHeadder" />
    <cc:attribute name="fechaValueInicial" />
    <cc:attribute name="fechaValueFinal" />
    <cc:attribute name="nombreSelectOne" />
    <cc:attribute name="valueSelectOne" />
<cc:attribute name="valueSelectList" />
    <cc:attribute name="nombreCommandButton" />
    <cc:attribute name="firstTabName" />
    <cc:attribute name="firstTabValue" />
    <cc:attribute name="secondTabName" />
    <cc:attribute name="secondTabValue" />
    <cc:attribute name="thirdTabName" />
    <cc:attribute name="thirdTabValue" />
    <cc:attribute name="funcionCommandButton" 
        method-signature="java.lang.String action()" />

</cc:interface>

<cc:implementation>

  <a4j:status onstart="#{rich:component('statPane')}.show()"
                onstop="#{rich:component('statPane')}.hide()" />

      <h:form>

        <rich:panel header="#{cc.attrs.tableHeadder}">
            <rich:messages/>

            <div>
                <div>
                    <h:outputText value="Del:"/>
                    <rich:calendar datePattern="dd/MMMM/yyyy" popup="true" mode="ajax"
                                   required="true"
                                   requiredMessage="Selecciona una fecha inicial"
                                   locale="es" value="#{cc.attrs.fechaValueInicial}" />
                    <h:outputText value="Al:"/>
                    <rich:calendar datePattern="dd/MMMM/yyyy" popup="true" mode="ajax"
                                   required="true"
                                   requiredMessage="Selecciona una fecha final"
                                   locale="es" value="#{cc.attrs.fechaValueFinal}" />

                    <br/><br/>

                    <h:outputLabel value="#{cc.attrs.nombreSelectOne}" />
                    <h:selectOneMenu
                        value="#{cc.attrs.valueSelectOne}">
                        <f:selectItems value="#{cc.attrs.valueSelectList}" />
                    </h:selectOneMenu>
                    <br/><br/>

                    <h:commandButton value="#{cc.attrs.nombreCommandButton}" actionListener="#{cc.attrs.funcionCommandButton}" />
                </div>

            </div>
            <br/><br/><br/><br/>

            <rich:tabPanel switchType="server">
                <rich:tab header="#{cc.attrs.firstTabName}">
                    <ui:include src="#{cc.attrs.firstTabValue}" />
                </rich:tab>
                <rich:tab header="#{cc.attrs.secondTabName}">
                    <ui:include src="#{cc.attrs.secondTabValue}" />
                </rich:tab>
                <rich:tab header="#{cc.attrs.thirdTabName}">
                    <ui:include src="#{cc.attrs.thirdTabValue}" />
                </rich:tab>

            </rich:tabPanel>

            <ui:include src="../../waitPopup.xhtml" />

        </rich:panel>
    </h:form>

</cc:implementation> 
```

并以这种方式实现它：

```
<html xmlns="http://www.w3.org/1999/xhtml"   
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:rich="http://richfaces.org/rich"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:CT="http://java.sun.com/jsf/composite/CompositeTemplates"
  >

<h:head>
    <title>Reporte de Recepcion de Leche</title>
</h:head>

<body>

    <CT:reportes
        tableHeadder="Reporte Recepcion de Leche"
        fechaValueInicial="#{lecheReporteProveedoresVB.fechaInicial}"
        fechaValueFinal="#{lecheReporteProveedoresVB.fechaFinal}"
        nombreSelectOne="Proveedores: "
        valueSelectOne="#{lecheReporteProveedoresVB.proveedor}"
        valueSelectList="#{CatalogoProveedoresLecheSI.selectList}"
        nombreCommandButton="Consultar"
        funcionCommandButton="#{lecheReporteProveedoresVB.consultar()}"
        firstTabName="Recepcion por Dia"
        firstTabValue="../../leche/lecheReporteProveedoresDia.xhtml"
        secondTabName="Recepcion por Mes"
        secondTabValue="../../leche/lecheReporteProveedoresMes.xhtml"
        thirdTabName="Recepcion por Proveedores"
        thirdTabValue="../../leche/lecheReporteProveedoresRecibido.xhtml"/>

</body> 
```

我想，而不是声明 firstTab secondTab thirdTab，只给出例如 3 个 firstTab 值，并且复合创建 3 个richTab 组件，这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T06:29:37.877

好吧，您可以做的一件事是动态使用和创建选项卡..第一种方法（您可以改进它..）将做​​这样的事情..

在您的组件中：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:rich="http://richfaces.org/rich"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:cc="http://java.sun.com/jsf/composite"
  >
<cc:interface>

    <cc:attribute name="tableHeadder" />
    <cc:attribute name="fechaValueInicial" />
    <cc:attribute name="fechaValueFinal" />
    <cc:attribute name="nombreSelectOne" />
    <cc:attribute name="valueSelectOne" />
<cc:attribute name="valueSelectList" />
    <cc:attribute name="nombreCommandButton" />

    <cc:attribute name="tabList" />

    <cc:attribute name="funcionCommandButton" 
        method-signature="java.lang.String action()" />

</cc:interface>

<cc:implementation>

  <a4j:status onstart="#{rich:component('statPane')}.show()"
                onstop="#{rich:component('statPane')}.hide()" />

      <h:form>

        <rich:panel header="#{cc.attrs.tableHeadder}">
            <rich:messages/>

            <div>
                <div>
                    <h:outputText value="Del:"/>
                    <rich:calendar datePattern="dd/MMMM/yyyy" popup="true" mode="ajax"
                                   required="true"
                                   requiredMessage="Selecciona una fecha inicial"
                                   locale="es" value="#{cc.attrs.fechaValueInicial}" />
                    <h:outputText value="Al:"/>
                    <rich:calendar datePattern="dd/MMMM/yyyy" popup="true" mode="ajax"
                                   required="true"
                                   requiredMessage="Selecciona una fecha final"
                                   locale="es" value="#{cc.attrs.fechaValueFinal}" />

                    <br/><br/>

                    <h:outputLabel value="#{cc.attrs.nombreSelectOne}" />
                    <h:selectOneMenu
                        value="#{cc.attrs.valueSelectOne}">
                        <f:selectItems value="#{cc.attrs.valueSelectList}" />
                    </h:selectOneMenu>
                    <br/><br/>

                    <h:commandButton value="#{cc.attrs.nombreCommandButton}" actionListener="#{cc.attrs.funcionCommandButton}" />
                </div>

            </div>
            <br/><br/><br/><br/>

            <rich:tabPanel switchType="server">
               <ui:repeat var="tab" value="#{cc.attrs.tabList}" >
                 <rich:tab header="#{tab.header}">
                    <ui:include src="#{tab.src}" />
                 </rich:tab>
               </ui:repeat>

            </rich:tabPanel>

            <ui:include src="../../waitPopup.xhtml" />

        </rich:panel>
    </h:form>

</cc:implementation> 
```

现在..您应该创建一个 POJO 来保存选项卡数据：

公共类 TabData 实现可序列化 {

```
 private static final long serialVersionUID = 1L;

  private String header;
  private String src;

  public TabData(String header, String src) {
      this.header = header;
      this.src = src;
  }

  /* getters & setters */ 
```

}

在你的bean中..只需添加一个列表并填充它......

```
...

private List<TabData> tabs = new ArrayList<TabData>();

@PostConstrunct
public void init() {
   tabs.add(new TabData("Recepcion por Dia","../../leche/lecheReporteProveedoresDia.xhtml"));
   ...
}

/* Getter & Setter */ 
```

最后..使用组件：

```
<CT:reportes
        tableHeadder="Reporte Recepcion de Leche"
        fechaValueInicial="#{lecheReporteProveedoresVB.fechaInicial}"
        fechaValueFinal="#{lecheReporteProveedoresVB.fechaFinal}"
        nombreSelectOne="Proveedores: "
        valueSelectOne="#{lecheReporteProveedoresVB.proveedor}"
        valueSelectList="#{CatalogoProveedoresLecheSI.selectList}"
        nombreCommandButton="Consultar"
        funcionCommandButton="#{lecheReporteProveedoresVB.consultar()}"
        tabList="#{bean.tabs}" /> 
```

我从来没有真正用 Richfaces 尝试过这种方法，我用它来创建 jQuery，它工作得很好..再次，你可以改进这个..

问候

# c# - Linq to objects C# 嵌套类

> ID：10955185
> 
> 赞同：-2
> 
> 时间：2012-06-08T19:48:05.790
> 
> 标签：c#, linq-to-objects

```
public class parent
{
    public string abc { get; set; }
    public childclass pos { get; set; }
}

public class childclass
{
    public string value { get; set; }
} 
```

我目前正在阅读父类的合集

```
var obj =
(from dia in parent
    select new
    {
        abc = dia.abc,
        pos = new childclass()
        {
            value = dia.pos.value
        },
    })
.ToList(); 
```

如何使用 linq to object 读取嵌套类子类，这块不起作用

```
pos = new childclass()
{
    Value = dia.pos.Value
}, 
```

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:55:40.083

C# 区分大小写。`value`您班级中的字段`childClass`有一个小写的“v”。您的 LINQ 语句使用大写的“V”引用它。

试试下面的代码：

```
var obj = (from dia in parent
            select new
            {
                abc = dia.abc,
                pos = new childclass()
                {
                    value = dia.pos.value // 'Value' has been changed to 'value'
                },
            }).ToList(); 
```

这是我运行的一个测试，以验证更新的 LINQ 语句是否有效：

```
var parents = new List<parent>()
{
    new parent{abc = "abc", pos = new childclass{ value = "value" }}
};
var obj =
            (from dia in parents // changed to 'parents' to match my variable above
            select new
            {
                abc = dia.abc,
                pos = new childclass()
                {
                    value = dia.pos.value
                },
            }).ToList();

foreach (var par in obj)
{
    Console.WriteLine(par);
} 
```

结果输出是：

`"{ abc = abc, pos = ProgrammingTestBed.Program+childclass }"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:04:12.780

它工作得很好，我认为你的问题是区分大小写的

课程：

```
public class Parent
{
    public string Abc { get; set; }

    public Childclass Pos { get; set; }
}

public class Childclass
{
    public string Value { get; set; }
} 
```

采用：

```
var parent = new List<Parent> {                
    new Parent { Abc = "abc1", Pos = new Childclass { Value = "Value1" } },
    new Parent { Abc = "abc2", Pos = new Childclass { Value = "Value2" } }
};

var obj =(from dia in parent select new {
                abc = dia.Abc,
                pos = new Childclass()
                {
                    Value = dia.Pos.Value
                },
        }).ToList(); 
```

# java - Netbeans 应用程序运行非常缓慢

> ID：10955186
> 
> 赞同：4
> 
> 时间：2012-06-08T19:48:05.837
> 
> 标签：java, netbeans

我目前正在为学校做作业，我已经完成了编程，但我遇到了一个大问题。

当我在 netbeans IDE 中运行程序时，一切都按应有的方式运行，并且非常流畅。

但是当我尝试运行 Jar 文件时，它会滞后，我的计时器每秒需要 3-5 秒。

在导出 Jar 文件之前我应该​​检查什么，还是我以错误的方式运行它？

它在我的 Windows 7 64 位系统、Ubuntu 12 64 位、Ubuntu 11 64 位和 Windows 7 32 位系统上执行相同的操作。所以它不是操作系统问题。而且我确实有新的 java 运行时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:04:58.950

我的第一个想法是 Netbeans 可能会为您的程序运行 jvm 并具有更多内存。尝试使用增加的 jvm 内存设置运行您的 jar。`java -jar -Xmx512m yourjar.jar`当您在命令行运行时，您知道它是诸如 -Xmx512m 之类的 java 选项之一。

这里的另一个猜测是，Netbeans 可能正在执行您的纯 .class 文件，而不是一个打包的 jar 文件。如果您可以打印出类路径，则可以尝试以与 netbeans 相同的方式执行它。最终可能需要部署多个 jar 文件以避免此问题。您是否在代码中使用了许多其他 jar 文件？

这是基于我使用 eclipse 的经验，并让它在 IDE 中执行的操作与导出的 jar 文件不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:12:55.703

默认情况下，JAR 可能是使用压缩构建的。手动构建您的 JAR 并指定`0`选项（无 ZIP 压缩）。值得一试。

有关创建 JAR 时可用选项的更多详细信息，请参见[此处。](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/jar.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T21:05:31.387

如果您有 Eclipse INDIGO 版本，只需右键单击项目节点并单击导出，然后在 java 部分下选择“可运行 JAR 文件”单击下一步然后完成并完成！！！:)

# android - 我们可以在 Android 上的不同片段上重用布局 xml 吗？

> ID：10955188
> 
> 赞同：0
> 
> 时间：2012-06-08T19:48:07.263
> 
> 标签：android, xml, layout, fragment

我有一个 3 页的寻呼机，我只是在其中设置了背景图像。而不是创建 page1.xml、page2.xml 和 page3.xml。我可以只创建 page.xml 并通过代码设置背景吗？这是一个好的解决方案还是对android实时加载图像不利？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T23:45:12.217

当然，您可以在 onCreate() 方法中设置背景图像：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_layout);
    findViewById(R.id.my_root).setBackgroundResource(R.drawable.my_image); 
```

或者，如果您更喜欢，可以使用主题

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setTheme(R.style.my_theme);
    setContentView(R.layout.my_layout); 
```

然后在您的自定义主题中设置 windowBackground 。

# php - 基本 PHP - SQL 查询中的条件连接

> ID：10955195
> 
> 赞同：0
> 
> 时间：2012-06-08T19:48:29.863
> 
> 标签：php

我在我认为应该是一些相当简单的 PHP 方面遇到了一些麻烦。它在 WordPress 内部运行，但问题不应该是 WordPress 特定的。$wpdb->get_results() 只是一种无需使用连接字符串即可查询 WordPress 数据库的方法。我还使用了几个 $_GET 命令。

这是我到目前为止所拥有的：

```
$Data = $wpdb->get_results("SELECT *
    FROM database.table
    WHERE sem.MonthNum >= " .$_GET["minMonth"]. "
    AND sem.MonthNum <= " .$_GET["maxMonth"]. "
    AND sem.Year  >= " .$_GET["minYear"]. "
    AND sem.Year <= " .$_GET["maxYear"]. "); 
```

只要填充了 $_GET，这将起作用。我想添加一种默认值，如果 $_GET 为空，则设置一个数字，如果它不为空，则获取该数字。类似于...的东西

```
$Data = $wpdb->get_results("SELECT *
    FROM database.table
    WHERE sem.MonthNum >= " if(!$_GET){echo 1;} else {echo ".$_GET[\"minMonth\"]. "} " 
```

但这对我不起作用......可能是一些愚蠢的 PHP 语法错误，我不确定所有的 echo 语句和其他引号中的引号等等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T19:50:47.353

对于您的每个变量，请执行以下操作：

```
$minMonth = isset($_GET["minMonth"]) ? intval($_GET["minMonth"]) : 1;
... 
"WHERE sem.MonthNum >= " .minMonth. " 
```

intavl() 调用会将 $_GET 值转换为整数（如果它还没有），这将保护您免受 SQL 注入安全问题的影响。如果您需要对字符串做类似的事情，请改用 mysql_escape_string() 之类的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T19:52:08.133

您可以为每个变量添加一个变量，例如：

```
// If not set $minMonth is set to 1
$minMonth = (isset($_GET['minMonth']) ? $_GET['minMonth'] : 1); 
```

对其他变量也这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T19:54:54.497

您可以在查询中直接使用 Scott 和 David show 等简写符号：

```
$Data = $wpdb->get_results("SELECT *
FROM database.table
WHERE sem.MonthNum >= ".(!isset($_GET['minMonth'])?'1':$_GET['minMonth'])."
AND... 
```

不过，您确实需要先清理变量，否则您很容易被 SQL 注入。

# ruby-on-rails - 使用“rails server”命令后如何使用相同的终端窗口？

> ID：10955196
> 
> 赞同：0
> 
> 时间：2012-06-08T19:48:32.373
> 
> 标签：ruby-on-rails, ruby, terminal, pid

好的，这是我的问题。我输入“rails s”，然后我的终端不允许我输入任何命令。所以我必须启动一个新的终端窗口，这很烦人。

另一方面，我可以输入分离的“rails s -d”，然后在需要时停止服务器是很痛苦的。（而不是使用 control+c，我必须找到 PID 并使用 kill -9 PID）

本人非专业人士，如有任何建议，不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T19:58:10.770

我不相信有办法做你特别要求的事情。

但是，我使用[Iterm2](http://www.iterm2.com/#/section/home)，它允许我通过拆分 iTerm2 窗口或创建多个选项卡在一个窗口中打开多个终端窗口。这样我就可以使持有 rails server 的终端和我的 development.log 尾部非常小，除非它们发生了一些有趣的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:55:03.297

我使用屏幕，您也可以使用 TMUX，但它们是终端中的窗口管理器，您可以在同一个终端窗口中创建多个窗口 :)

在 WikiVS 上阅读它们可能会对您有所帮助:) [http://www.wikivs.com/wiki/Screen_vs_tmux](http://www.wikivs.com/wiki/Screen_vs_tmux)

屏幕：[http:](http://www.gnu.org/software/screen/) //www.gnu.org/software/screen/ TMUX：[http ://tmux.sourceforge.net/](http://tmux.sourceforge.net/)

因此，您可以轻松切换和维护相同的终端窗口。您显然不能使用与运行服务器的完全相同的窗口，但它足够接近而无需搜索 PID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T20:01:55.567

您可以键入：`rails s &`。我不确定这是否是你的意思。

# r - R 函数因不相关的图例错误消息而停止

> ID：10955197
> 
> 赞同：0
> 
> 时间：2012-06-08T19:48:43.330
> 
> 标签：r, function, plot, warnings, legend

我编写了一个包含多个子函数的函数。子功能都与下面的完全一样：

```
Lfunction <- function(mydata, mydata.hex) {

mydata.Lest <- Lest(mydata)

mydata.hex.Lest <- Lest(mydata.hex)

pdf(file="Lplot.pdf")

plot(mydata.Lest, xlim=c(0,200), ylim=c(0,200), main="L Function", xlab="Distance Between Particles (r)", ylab=expression(paste(L(r))), legend = legend(x=165, y=30, c("CSR", "mydata", "mydata.hex"), lty = c(2,1,4), col = c("red", "black","blue"), border = "black"))

plot(mydata.hex.Lest, xlim=c(0,200), ylim=c(0,200), add = TRUE, lty = c(4,2), col = c("blue", "red"))

dev.off()

} 
```

它基本上只是为我的两个点模式（mydata 和 mydata.hex）绘制 F 函数，并将图像作为 PDF 导出到我计算机上的指定文件夹。

出于某种原因，我收到以下错误消息：

> !is.null(legend) && legend 中的错误：'x && y' 中的 'y' 类型无效

现在，每次我更改 F、G、J、K、L 或 PCF 函数图上的图例时，我都会收到此消息。我认为这无关紧要，因为它仍然会生成图表，并且在我指定的位置。

问题是这个错误导致我的大函数（它运行大约 10 个函数，如上所示）停止评估。大函数如下所示：

```
GenPDFs <- function(file_name){
mydata <- CreatePPP(file_name)
mydata.hex <- GenHexLat()
Density(mydata)
Lfunction(mydata, mydata.hex)
LfunctionGDS(mydata, mydata.hex)
Ffunction(mydata, mydata.hex)
FfunctionGDS(mydata, mydata.hex)
Gfunction(mydata, mydata.hex)
GfunctionGDS(mydata, mydata.hex)
Jfunction(mydata, mydata.hex)
Kfunction(mydata, mydata.hex)
KfunctionGDS(mydata, mydata.hex)
PCFfunction(mydata, mydata.hex)
#for (i in 1:30) {
#   dev.off()
#   }
} 
```

因此，我必须手动将值输入到每个函数中。

有谁知道如何摆脱这个警告信息？有什么办法可以将其关闭或否定它的出现？或者，如果您收到此错误消息，您知道如何解决吗？出于某种原因，无论我使用什么语法，它都会产生此错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:05:04.497

您能否将函数调用传递给情节的（可能）不存在的“传奇”参数？试试这个：

```
pdf(file="Lplot.pdf")
  plot(mydata.Lest, xlim=c(0,200), ylim=c(0,200), main="L Function", 
          xlab="Distance Between Particles (r)", ylab=expression(paste(L(r))),  
          lty = c(2,1,4), col = c("red", "black","blue"), border = "black"))
  legend(x=165, y=30, c("CSR", "mydata", "mydata.hex")
  plot(mydata.hex.Lest, xlim=c(0,200), ylim=c(0,200), add = TRUE, 
           lty = c(4,2), col = c("blue", "red"))
dev.off() 
```

# javascript - 如何使用茉莉花测试具有 setTimeout 的函数？

> ID：10955201
> 
> 赞同：53
> 
> 时间：2012-06-08T19:49:02.450
> 
> 标签：javascript, jquery, unit-testing, settimeout, jasmine

我需要为一个内部有调用的函数编写一个测试`setTimeout()`，但我找不到我应该怎么做。

这是功能

```
// Disables all submit buttons after a submit button is pressed.
var block_all_submit_and_ajax = function( el ) {
    // Clone the clicked button, we need to know what button has been clicked so that we can react accordingly
    var $clone = $( el ).clone();
    // Change the type to hidden
    $clone.attr( 'type', 'hidden' );
    // Put the hidden button in the DOM
    $( el ).after( $clone );
    // Disable all submit button. I use setTimeout otherwise this doesn't work in chrome.
    setTimeout(function() {
         $( '#facebook input[type=submit]' ).prop( 'disabled', true );
     }, 10);
    // unbind all click handler from ajax
    $( '#facebook a.btn' ).unbind( "click" );
    // Disable all AJAX buttons.
    $( '#facebook a.btn' ).click( function( e ) {
        e.preventDefault();
        e.stopImmediatePropagation();
    } );
}; 
```

这是我的测试

```
it( "Disable all submit buttons", function() {
    // Get a button
    var $button = $( '#ai1ec_subscribe_users' );
    // Call the function
    utility_functions.block_all_submit_and_ajax( $button.get(0) );
    // check that all submit are disabled
    $( '#facebook input[type=submit]' ).each( function( i, el ) {
        console.log( 'f' );
        expect( el ).toHaveProp( 'disabled', true );
    } );
} ); 
```

我试过使用`jasmine.Clock.useMock();`，`jasmine.Clock.tick(11);`但我无法让事情正常工作，测试永远不会通过

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-06-08T20:16:39.520

整体方法因您的 Jasmine 版本而异。

### 茉莉花1.3

您可以使用`waitsFor`：

```
it( "Disable all submit buttons", function() {
    // Get a button
    var $button = $( '#ai1ec_subscribe_users' );
    // Call the function
    utility_functions.block_all_submit_and_ajax( $button.get(0) );

    // Wait 100ms for all elements to be disabled.
    waitsFor('button to be disabled', function(){
        var found = true;
        // check that all submit are disabled
        $( '#facebook input[type=submit]' ).each( function( i, el ) {
            if (!el.prop('disabled')) found = false;
        });
        return found;
    }, 100);
}); 
```

`waits`如果您确切知道需要多长时间，您也可以使用：

```
it( "Disable all submit buttons", function() {
    // Get a button
    var $button = $( '#ai1ec_subscribe_users' );
    // Call the function
    utility_functions.block_all_submit_and_ajax( $button.get(0) );

    // Wait 20ms before running 'runs' section.
    waits(20);

    runs(function(){
        // check that all submit are disabled
        $( '#facebook input[type=submit]' ).each( function( i, el ) {
            expect( el ).toHaveProp( 'disabled', true );
        });
    });
}); 
```

还有第三种方法可以做到这一点，不需要`waits`,`waitsFor`和`runs`。

```
it( "Disable all submit buttons", function() {
    jasmine.Clock.useMock();

    // Get a button
    var $button = $( '#ai1ec_subscribe_users' );
    // Call the function
    utility_functions.block_all_submit_and_ajax( $button.get(0) );

    jasmine.Clock.tick(10);

    // check that all submit are disabled
    $( '#facebook input[type=submit]' ).each( function( i, el ) {
        expect( el ).toHaveProp( 'disabled', true );
    });
}); 
```

### 茉莉花2.0

您可以使用`done`, 测试回调：

```
it( "Disable all submit buttons", function(done) {
    // Get a button
    var $button = $( '#ai1ec_subscribe_users' );

    utility_functions.block_all_submit_and_ajax( $button.get(0) );

    setTimeout(function(){
        // check that all submit are disabled
        $( '#facebook input[type=submit]' ).each( function( i, el ) {
            expect( el ).toHaveProp( 'disabled', true );
        });

        // Let Jasmine know the test is done.
        done();
    }, 20);
}); 
```

您可以模拟计时器行为：

```
it( "Disable all submit buttons", function() {
    jasmine.clock().install();

    // Get a button
    var $button = $( '#ai1ec_subscribe_users' );
    // Call the function
    utility_functions.block_all_submit_and_ajax( $button.get(0) );

    jasmine.clock().tick(10);

    // check that all submit are disabled
    $( '#facebook input[type=submit]' ).each( function( i, el ) {
        expect( el ).toHaveProp( 'disabled', true );
    });

    jasmine.clock().uninstall()
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-10T10:28:14.150

自 Jasmine 2 以来，语法发生了变化：http: [//jasmine.github.io/2.0/introduction.html#section-Asynchronous_Support](http://jasmine.github.io/2.0/introduction.html#section-Asynchronous_Support)

您现在可以简单地将`done`回调传递给`beforeEach`、`it`和`afterEach`：

```
it('tests something async', function(done) {
    setTimeout(function() {
        expect(somethingSlow).toBe(true);
        done();
    }, 400);
}); 
```

更新：既然写了这篇文章，现在也可以使用`async/await`这将是我的首选方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-11-16T20:01:34.383

对于任何在谷歌上搜索的人，可以找到更好的答案[计时器测试](https://masimplo.com/posts/testing-rxjs5-async-methods-in-angular2/)

```
import { fakeAsync, tick, discardPeriodicTasks } from '@angular/core/testing';

it('polls statusStore.refreshStatus on an interval', fakeAsync(() => {
  spyOn(mockStatusStore, 'refreshStatus').and.callThrough();
  component.ngOnInit();
  expect(mockStatusStore.refreshStatus).not.toHaveBeenCalled();
  tick(3001);
  expect(mockStatusStore.refreshStatus).toHaveBeenCalled();
  tick(3001);
  expect(mockStatusStore.refreshStatus).toHaveBeenCalledTimes(2);
  discardPeriodicTasks();
 })); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-08T20:17:31.967

I've never done any testing with jasmine, but I think I understand your problem. I would restructure the code a little to allow for you to wrap the function being called in a proxy function like this:

Modify your code that is being test to extract the setTimeout code into another function:

Original Code:

```
// Disables all submit buttons after a submit button is pressed. 
var block_all_submit_and_ajax = function( el ) { 
    // Clone the clicked button, we need to know what button has been clicked so that we can react accordingly 
    var $clone = $( el ).clone(); 
    // Change the type to hidden 
    $clone.attr( 'type', 'hidden' ); 
    // Put the hidden button in the DOM 
    $( el ).after( $clone ); 
    // Disable all submit button. I use setTimeout otherwise this doesn't work in chrome. 
    setTimeout(function() { 
        $( '#facebook input[type=submit]' ).prop( 'disabled', true ); 
    }, 10); 
    // unbind all click handler from ajax 
    $( '#facebook a.btn' ).unbind( "click" ); 
    // Disable all AJAX buttons. 
    $( '#facebook a.btn' ).click( function( e ) { 
        e.preventDefault(); 
        e.stopImmediatePropagation(); 
    } ); 
}; 
```

Modified Code:

```
// Disables all submit buttons after a submit button is pressed. 
var block_all_submit_and_ajax = function( el ) { 
    // Clone the clicked button, we need to know what button has been clicked so that we can react accordingly 
    var $clone = $( el ).clone(); 
    // Change the type to hidden 
    $clone.attr( 'type', 'hidden' ); 
    // Put the hidden button in the DOM 
    $( el ).after( $clone ); 
    // Disable all submit button. I use setTimeout otherwise this doesn't work in chrome. 
    setTimeout(disableSubmitButtons, 10); 
    // unbind all click handler from ajax 
    $( '#facebook a.btn' ).unbind( "click" ); 
    // Disable all AJAX buttons. 
    $( '#facebook a.btn' ).click( function( e ) { 
        e.preventDefault(); 
        e.stopImmediatePropagation(); 
    } ); 
};

var utilityFunctions =
{
  disableSubmitButtons : function()
  {
    $( '#facebook input[type=submit]' ).prop( 'disabled', true ); 

  }
} 
```

Next I would modify the testing code like this:

```
it( "Disable all submit buttons", function() { 
    // Get a button 
    var $button = $( '#ai1ec_subscribe_users' ); 

    var originalFunction = utilityFunctions.disableSubmitButtons;
    utilityFunctions.disableSubmitButtons = function()
    {
        // call the original code, and follow it up with the test
        originalFunction();

        // check that all submit are disabled 
        $( '#facebook input[type=submit]' ).each( function( i, el ) { 
            console.log( 'f' ); 
            expect( el ).toHaveProp( 'disabled', true ); 
        }); 

        // set things back the way they were
        utilityFunctions.disableSubmitButtons = originalFunction;
    }

    // Call the function 
    utility_functions.block_all_submit_and_ajax( $button.get(0) ); 
}); 
```

# c - 如何分配和重用 Haskell 中的 C 结构？

> ID：10955202
> 
> 赞同：3
> 
> 时间：2012-06-08T19:49:05.557
> 
> 标签：c, haskell, ffi, allegro, hsc2hs

特别是，我正在尝试通过编写与 Allegro 游戏库的绑定来学习 Haskell 的外部函数接口。在 Allegro 的原生 C 中，主事件循环如下所示：

```
// initialize event struct
ALLEGRO_EVENT event;

// main loop
while (running) {
    if (al_get_next_event(event_queue, &event)) {
        // process event here ...
    }
} 
```

使用 ghc 和 hsc2hs，我可以编写一个外部函数调用，例如：

```
foreign import ccall "allegro5/allegro.h al_get_next_event"
    alGetNextEvent :: EventQueue -> Ptr (Event) -> IO (CInt) 
```

where`EventQueue`是指向不透明结构的指针，并且`Event`是`Storable`基于 C 的实例`ALLEGRO_EVENT`。

理想情况下，对于面向用户的 Haskell 函数，我希望有一个类型签名，例如

```
getNextEvent :: EventQueue -> Maybe Event 
```

这将抽象出初始化`ALLEGRO_EVENT`结构和布尔返回值。

我的问题是，我应该如何编写这个函数来最大化内存效率？我可以`Event`在方法内部分配一个新指针并使用它，但由于我正在处理基于 C 的数据，我想确保我正在重新使用现有空间而不是不断分配新结构。我还想避免让用户 malloc 结构并将其传递给每个调用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T19:54:23.373

通常，如果它是本地范围的数据，您将使用

*   [阿洛卡](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Foreign-Marshal-Alloc.html)

如果数据范围更长，

*   [mallocForeignPtr](http://hackage.haskell.org/packages/archive/base/4.3.0.0/doc/html/Foreign-ForeignPtr.html#4)

是个不错的选择，因为速度很快，可以附加finalizers，不用自己清理。

GHC 运行时会为您最大限度地重用空间，因此不必担心效率问题，例如将可变内存缓冲区固定到位。让 GC 来处理。

# android - 列表视图中的 Android 进度条始终是不确定的

> ID：10955204
> 
> 赞同：8
> 
> 时间：2012-06-08T19:49:08.353
> 
> 标签：android

我正在尝试为 ListView 中的项目设置固定进度。我只在 ListView 中看到一个不确定的旋转圆圈......我做错了什么？（我确定答案很简单......我只是没有看到它）

对于以下适配器布局 xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:orientation="vertical"
    >
<TextView
        android:id="@+id/some_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        />
<ProgressBar
        android:id="@+id/some_progress"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        /> 
```

代码：

```
public class SomeListAdapter extends ArrayAdapter<MyItem> {

private static class ViewHolder {
    TextView nameTextView;
    ProgressBar valueProgressBar;
}

public BestChoiceListAdapter(Context context, List<MyItem> items) {
    super(context, R.layout.list_item, items);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    View view = convertView;
    if (view == null) {
        LayoutInflater vi = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = vi.inflate(R.layout.list_item, null);

        holder = new ViewHolder();
        holder.nameTextView = (TextView) view.findViewById(R.id.some_text);
        holder.valueProgressBar = (ProgressBar) view.findViewById(R.id.some_progress);

        view.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    MyItem optionItem = getItem(position);

    holder.nameTextView.setText(optionItem.getOptionName());
    int progress = (int) (optionItem.getOptionValue());

    holder.valueProgressBar.setProgress(progress);

    return view;
}
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-08T20:00:40.230

最简单的方法是对其应用水平样式：

```
<ProgressBar
    android:id="@+id/some_progress"
    style="@android:style/Widget.ProgressBar.Horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    /> 
```

这将设置您需要手动添加以应用确定进度模式的所有属性。

如果您很好奇，如果您想单独应用属性，这就是系统样式的样子：

```
<style name="Widget.ProgressBar.Horizontal">
    <item name="android:indeterminateOnly">false</item>
    <item name="android:progressDrawable">@android:drawable/progress_horizontal</item>
    <item name="android:indeterminateDrawable">@android:drawable/progress_indeterminate_horizontal</item>
    <item name="android:minHeight">20dip</item>
    <item name="android:maxHeight">20dip</item>
</style> 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:51:03.783

[将不确定模式](http://developer.android.com/reference/android/widget/ProgressBar.html#attr_android%3aindeterminate)更改为false！

```
<ProgressBar
    android:id="@+id/some_progress"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:indeterminate="false"
    /> 
```

# signal-processing - FFT 的理想域是什么？

> ID：10955207
> 
> 赞同：0
> 
> 时间：2012-06-08T19:49:37.427
> 
> 标签：signal-processing, fft

我正在使用 Jtransforms 库，它似乎对我的目的来说很快。

在这一点上，我认为我对 FFT 的工作原理有了很好的了解，所以现在我想知道是否有任何形式的标准域用于音频可视化，如频谱图？

感谢 android 在 2.3 中的原生 FFT，我一直使用字节作为范围，尽管我仍然不清楚它是否已签名。（我知道java没有无符号字节，但谷歌本机实现了这些功能，波形是PCM 8bit无符号）

但是，我正在调整我的应用程序以使用麦克风音频和 2.1 电话。此时，无论是 [-128, 127] 还是 [0, 255]，输入域都在字节范围内，这似乎不再是最佳选择。

我希望我的 FFT 函数的范围是 [0,1] 以便我可以轻松地对其进行缩放。

那么我应该使用 [-1, 1] 还是 [0, 1] 的域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T19:52:54.247

本质上，输入域无关紧要。最多，它会导致原始数据的偏移和缩放变化，这将分别转化为 bin #0 上的偏移和频域结果的整体缩放变化。

至于将您的 FFT 输出限制为 [0,1]；这基本上是不可能的。通常，FFT 输出会很复杂，无法操纵您的输入数据，从而将输出限制为正实数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:14:00.520

如果您使用[DCT](http://en.wikipedia.org/wiki/Discrete_cosine_transform)而不是[FFT](http://en.wikipedia.org/wiki/Fft) ，您的输出范围将是真实的。（了解差异并确定 DCT 是否适合您的应用。）

实数的 FFT 实现（作为输入域）使用输出范围的一半样本（因为当输入为实数时只有偶数结果），因此每个样本都有实部和虚部的事实不会影响结果的大小（与源的大小相比）很多（输出大小为 ceil(n/2)*2）。

# javascript - jquery - 附加内容时转义引号问题

> ID：10955208
> 
> 赞同：0
> 
> 时间：2012-06-08T19:49:40.240
> 
> 标签：javascript, jquery, escaping

我正在尝试使用以下代码段：

```
$('#thirdPartyCheckoutButtons').prepend('<a href="https://www.resellerratings.com" onclick="window.open("https://seals.resellerratings.com/landing.php?seller=myID","name","height=760,width=780,scrollbars=1"); return false;"><img style="border:none;" src="//seals.resellerratings.com/seal.php?seller=myID" oncontextmenu="alert("Copying Prohibited by Law - ResellerRatings seal is a Trademark of All Enthusiast, Inc."); return false;" /></a><img src="https://www.myurl.com/hdsd834k.png"  style="float: left;margin-left: 180px;">'); 
```

它根本不显示..我尝试了很多报价差异，我不明白！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T19:51:18.510

内内双引号破坏了您的 onclick 属性值。用单引号替换它们并转义它们。

```
...onclick="window.open(\'https://seals.resellerratings.com/landing.php?seller=myID\',\'name\',\'height=760,width=780,scrollbars=1\'); return false;"... 
```

同样的事情发生在你的 oncontextmenu 事件上，执行相同的修复。

```
...oncontextmenu="alert(\'Copying Prohibited by Law - ResellerRatings seal is a Trademark of All Enthusiast, Inc.\'); return false;" />... 
```

完整代码：

```
$('#thirdPartyCheckoutButtons').prepend('<a href="https://www.resellerratings.com" onclick="window.open(\'https://seals.resellerratings.com/landing.php?seller=myID\',\'name\',\'height=760,width=780,scrollbars=1\'); return false;"><img style="border:none;" src="//seals.resellerratings.com/seal.php?seller=myID" oncontextmenu="alert(\'Copying Prohibited by Law - ResellerRatings seal is a Trademark of All Enthusiast, Inc.\'); return false;" /></a><img src="https://www.myurl.com/hdsd834k.png"  style="float: left;margin-left: 180px;">');​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T20:00:44.140

prepend() 函数中的字符串由单引号分隔。这意味着您在该字符串中键入的每个单引号都必须用 . 但是，这不是你的问题。您的问题在于无效的 HTML。这就是你所拥有的：

```
$('#thirdPartyCheckoutButtons').prepend('<a href="https://www.resellerratings.com" onclick="window.open("https://seals.resellerratings.com/landing.php?seller=myID","name","height=760,width=780,scrollbars=1"); return false;"><img style="border:none;" src="//seals.resellerratings.com/seal.php?seller=myID" oncontextmenu="alert("Copying Prohibited by Law - ResellerRatings seal is a Trademark of All Enthusiast, Inc."); return false;" /></a><img src="https://www.myurl.com/hdsd834k.png"  style="float: left;margin-left: 180px;">'); 
```

如果您注意到所有 HTML 属性值都由双引号分隔。但是，在您的 onclick="" 事件中，您再次使用双引号。您可以使用 ESCAPE 单引号来补救这种冲突。您的 oncontextmenu="" 事件中也有同样的问题。

```
$('#thirdPartyCheckoutButtons').prepend('<a href="https://www.resellerratings.com" onclick="window.open(\'https://seals.resellerratings.com/landing.php?seller=myID\',\'name\',\'height=760,width=780,scrollbars=1\'); return false;"><img style="border:none;" src="//seals.resellerratings.com/seal.php?seller=myID" oncontextmenu="alert(\'Copying Prohibited by Law - ResellerRatings seal is a Trademark of All Enthusiast, Inc.\'); return false;" /></a><img src="https://www.myurl.com/hdsd834k.png"  style="float: left;margin-left: 180px;">'); 
```

将来避免此问题的最简单方法是在 jQuery 函数调用之外构建字符串 (HTML)，然后将字符串作为变量传入。

# css - 为什么 CSS 高度会在这个 jsFiddle 示例中产生间隙？

> ID：10955209
> 
> 赞同：0
> 
> 时间：2012-06-08T19:49:40.160
> 
> 标签：css

看到这个jsFiddle ...

[http://jsfiddle.net/M4FAr/](http://jsfiddle.net/M4FAr/)

CSS：

```
a {display:inline-block;background:gold}
a > * {display:inline-block;margin:0}
p {width:auto;line-height:30px;background:yellowgreen}
div {width:30px;height:30px;background:orangered}​ 
```

HTML：

```
<a>
    <p>left</p>
    <div></div>
</a>​ 
```

现在，为什么设置`height:30px`在右侧会在左侧`div`上方产生间隙？`p`我该如何摆脱它？

我只希望容器`a`高度为 30 像素，仅此而已。另外，我希望它的孩子排队。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:52:02.907

一个简单的`a > * {float:left}`解决了我的问题...

```
a {display:inline-block;background:gold}
a > * {margin:0;float:left}
p {line-height:30px;background:yellowgreen}
div {width:30px;height:30px;background:orangered}​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T19:58:18.397

也许这可以解决问题：

```
p {
   vertical-align:top;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-08T20:11:07.343

因为`<p>`和`<div>`都是内联元素，所以它们与基线对齐。

在你的情况下`<div>`，它没有文本，因此它的基础是它的基线。

在你的情况下`<p>`，它的基础将是垂直居中文本的基线。

有多种方法可以应用`vertical-align`来覆盖默认对齐方式。

# wpf - 组合框在 Windows XP 中为空，但在 Windows 7 中没有

> ID：10955210
> 
> 赞同：1
> 
> 时间：2012-06-08T19:49:45.990
> 
> 标签：wpf, combobox, windows-xp

我已经编写了这个 WPF，其中我有绑定到 ObservableCollection 对象的组合框。当我在 Windows 7 中运行应用程序时，绑定工作得很好，一切都很好。当我在 WindowsXP 中运行它时，一切看起来都不错，但下拉菜单是空的。任何人都有这方面的经验，你有没有以某种方式解决它？

这是用于此的 XAML（它的一部分）：

```
<StackPanel x:Name="spUnrecRxItems">
    <Border BorderBrush="Silver" CornerRadius="3,3,3,3" BorderThickness="0,3,0,0" Height="Auto" 
                    HorizontalAlignment="Left" Margin="23,6,0,0" Width="200" Background="#FFEFEEEE">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <TextBlock Name="tbUR1" Foreground="#FFDE2226" FontSize="14" FontWeight="Bold" 
        TextWrapping="Wrap" Width="Auto" HorizontalAlignment="Left" FontFamily="Arial" Grid.Row="0" 
        Margin="10,10,0,0" Text="{Binding DrugName}" />
            <TextBlock Foreground="#FF484747" HorizontalAlignment="Left" 
           Margin="10,0,0,0"  FontSize="12" Text="{Binding FillMinMaxDate}" Grid.Row="1" />
            <TextBlock Foreground="#FF484747" HorizontalAlignment="Left" 
           Margin="10,0,0,0"  FontSize="12" Text="{Binding PhysiciansName}" Grid.Row="2" />
            <TextBlock ForceCursor="False" Foreground="#FF707170" HorizontalAlignment="Left" 
       Margin="10,0,0,0" Name="tbSourceCount" VerticalAlignment="Top" FontSize="12" 
               MouseDown="tbSource_MouseDown" Text="{Binding SourceCount, StringFormat=Source ({0})}" Grid.Row="3">
            </TextBlock>
        </Grid>
    </Border>
    <Expander x:Name="expManualRec" Background="DarkGray" Width="180" HorizontalAlignment="Center">
        <Expander.Header>
            <TextBlock HorizontalAlignment="Center" Text="Reconcile" Foreground="White" />
        </Expander.Header>
        <Grid Height="Auto">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <ComboBox x:Name="cboReconType" HorizontalAlignment="Center" Margin="8 0 0 0" Width="160" Height="Auto" Grid.Row="1" 
              SelectionChanged="cboReconType_SelectionChanged" ItemsSource="{Binding RelativeSource={RelativeSource AncestorType=ItemsControl}, Path=DataContext.ReconTypes}" />
            <ComboBox x:Name="cboRecReason" HorizontalAlignment="Center" Margin="8 0 0 0" Width="160" Height="Auto" Grid.Row="2"
                  SelectedValue="{Binding code}">
                <ComboBox.Style>
                    <Style TargetType="ComboBox">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding ElementName=cboReconType, Path=Text}" Value="Create A Question">
                                <Setter Property="ComboBox.Visibility" Value="Hidden" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding ElementName=cboReconType, Path=Text}" Value="No Action">
                                <Setter Property="ComboBox.Visibility" Value="Visible" />
                                <Setter Property="ItemsSource" Value="{Binding RelativeSource={RelativeSource AncestorType=ItemsControl}, Path=DataContext.ReconReasons}" />
                                <Setter Property="DisplayMemberPath" Value="description" />
                                <Setter Property="SelectedValuePath" Value="code" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding ElementName=cboReconType, Path=Text}" Value="Previous Questionnaire">
                                <Setter Property="ComboBox.Visibility" Value="Visible" />
                                <Setter Property="ItemsSource" Value="{Binding RelativeSource={RelativeSource AncestorType=ItemsControl}, Path=DataContext.InterviewQuestionnaires}" />
                                <Setter Property="DisplayMemberPath" Value="QuestionnaireName" />
                                <Setter Property="SelectedValuePath" Value="interviewquestionnaire_id" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding ElementName=cboReconType, Path=Text}" Value="">
                                <Setter Property="ComboBox.Visibility" Value="Visible" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ComboBox.Style>
            </ComboBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T06:27:48.717

这可能是由于某种样式而发生的，看起来组合框的文本前景色变成白色并且看起来是空的。

您应该使用 Snoop 来确认这一点，并找出您的应用程序中是否有任何样式将组合框项目的前景颜色设置为某些系统颜色或白色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T12:37:49.373

我在这里很新，在 WPF 的新工作中只有 8 个月的经验。

我在 Windows 8 中有相同的场景编码，但 Windows 7 和 XP 不会在我的程序中加载 ComboBox 列表。

最后我想通了：我使用 EF6 从 SQL Server 数据库中获取数据，但是在那个 Combobox 列表中，我使用了 SQL（我在 EF 中的表从数据库更新时遇到了一些问题，只是想做一些事情工作，所以我将 SQL 与 SQLConnection 和 SQLCommand 一起使用。）现在我让 EF 做到了，Win7 和 WinXP 计算机也在按照我计划的那样做。

# c# - 流利的 NHibernate 装饰实体

> ID：10955212
> 
> 赞同：2
> 
> 时间：2012-06-08T19:50:10.857
> 
> 标签：c#, fluent-nhibernate, poco

使用 POCO 和 Fluent NHibernate，我希望能够获取像 User 这样的对象并能够赋予它各种属性。我希望这些对象能够专注于它们的属性，而不是常见的属性。目前，我有一个 AuditableEntity，我可以从中派生，使我的实体能够拥有像 CreatedDateTime 和 ModifiedDateTime 这样的审核属性，但我也希望能够消除为每个对象实现我的 Id 的需要，Id 应该能够成为其他一些基础对象的一部分，所以我可以说这个对象有一个 Guid Id，这个有一个 int id，这个没有 Id。目前，我的用户对象如下所示：

用户.cs

```
namespace ZeroBase.Domain.Entities
{
public class User : AuditableEntity<User>
{
    public virtual Guid Id { get; set; }
    public virtual string Username { get; set; }
    public virtual string Password { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual string EmailAddress { get; set; }
    public virtual IEnumerable<Comment> Comments { get; set; }
}
} 
```

我的 UserMap 看起来像这样：

用户地图.cs

```
namespace ZeroBase.Infrastructure.Data
{
public class UserMap : AuditMap<User>
{
    public UserMap()
    {
        Id(x => x.Id)
            .Column("Id")
            .GeneratedBy.Guid();
        Map(x => x.Username);
        Map(x => x.Password);
        Map(x => x.FirstName);
        Map(x => x.LastName);
        Map(x => x.EmailAddress);
        HasMany(x => x.Comments);
        Table("Users");
    }
}
} 
```

有没有办法在某种通用基类中处理 Id 创建，并且仍然有一个单独的类，对象可以继承该类以成为可审计的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:08:57.077

您是否正在使用`AuditableEntity`没有 id 的课程？`Entity`暗示这个类有一个身份。基于此，我会说您可以将 Id 属性添加到 AuditableEntity。

如果您将它用于没有标识的类，例如值对象，我将创建另一个基类。这样的事情有意义吗？

```
class Entity {
    Guid Id { get; set; } 

    public Entity() {
        Id = Guid.NewGuid();
    }
}

interface IAuditable<T> {
    DateTime CreatedAt {get; set; }
    // ...
}

class AuditableEntity<T> : Entity, IAuditable<T> {
    DateTime CreatedAt { get; set; }
}

class AuditableValueObject<T> : IAuditable<T> {
    DateTime CreatedAt { get; set; }
}

// Class that has both an identity and is auditable
class User : AuditableEntity<User> {
    // ..
}

// Class without an identity but auditable
class Money : AuditableValueObject<Money> {
    // ..
}

// Class with an identity but not auditable
class Customer : Entity {
    // ..
} 
```

* * *

*注意：实体、值对象等是[领域驱动设计](http://en.wikipedia.org/wiki/Domain-driven_design)(DDD) 的术语。*

# jquery - AJAX JSONP 调用自动添加回调参数。如何删除它？

> ID：10955213
> 
> 赞同：11
> 
> 时间：2012-06-08T19:50:11.767
> 
> 标签：jquery, ajax, jsonp

我的服务很少 - 带有干净的 URL

并且在调用每个服务时，都会检查 URL 模式。

现在正在使用 JSONP 技术从另一台服务器通过 AJAX 调用这些 URL。

但是，在调用时，它会自动添加服务 URL`callback`和`_(timestamp)`参数。

通过添加删除时间戳参数`cache : true`。但不能删除回调参数。

这是我的 AJAX 调用代码-

```
$.ajax({
        type: 'GET',
        url : "http://test.com/test/services/getFollowMeHistory/1/1/50",
        dataType:'jsonp',
        cache : true,
        crossDomain : true,
        //jsonpCallback : false,

        error : function(XMLHttpRequest, textStatus, errorThrown) {
            alert("Error occured while loading Loads."+textStatus);
            }
        });
}); 
```

它将 URL 调用为 -`http://test.com/test/services/getFollowMeHistory/1/1/50?callback=false`并且从服务端获取 404。

我的服务将数据作为**callbackMethod( {..JSON RESPONSE...} )**返回。所以，它会自动`function callbackMethod(data)`在我的脚本中调用。我的 URL 中不需要那个回调参数。

只需`?callback=...`要从 URL 中删除部分

请帮忙。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-08T19:57:37.477

你应该设置`jsonp: false`而不是`jsonpCallback: false`. 您还应该将`jsonpCallback`选项显式设置为您希望从服务接收的回调名称。

参考：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T19:59:18.697

1.  如果将缓存设置为`true`ie 会缓存请求响应，所有后续的 JSONP 调用都不会返回新数据。

2.  没有回调 JSONP 是不可用的，因为没有办法读取响应。回调是 JSONP 的重点。

3.  您的服务器必须设置为处理 JSONP 请求。您发送的网址不会影响客户端。所以你的问题必须在服务器端。这是你应该处理它的地方。使这不是 jQuery 问题。

如果您正在使用自定义回调试试这个，但自定义回调与删除回调不同：

```
 jsonpCallback : "callbackMethod" 
```

# vim - Vim 文件类型检测

> ID：10955214
> 
> 赞同：5
> 
> 时间：2012-06-08T19:50:12.267
> 
> 标签：vim

Vim 可以检测包含内容但还没有名称（尚未保存）的缓冲区的文件类型吗？`:filetype detect`没有多大作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T20:10:32.303

大多数文件类型是通过它们的文件名（和/或位置）来检测的，有些（主要是那些带有`#!`shebang 行的）是通过它们的内容来检测的。

如果您还不想保存缓冲区，但有检测，您可以通过`:file name.ext`. 然后，检测通孔`:filetype detect`将起作用。

如果您只想快速突出显示语法（和相应的文件类型设置），只需通过`:setf name`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T06:53:18.040

您可以手动执行此操作。

```
:set filetype=EXT 
```

请注意，EXT 是您想要的文件类型的扩展名，不一定是语言本身的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T19:54:21.627

正如帮助`vim`所说，它在某些情况下有效，例如，如果您键入

```
#!/bin/sh 
```

然后它将检测为`sh`脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T19:57:05.887

如果文件包含`#!`在线第一行，这很容易。

例如：

```
" finish if the filetype was detected
if did_filetype()
    finish
endif

" Ruby & Python ftplugins
if getline(1) =~ '^#!.*ruby'
    setfiletype ruby
elseif getline(1) =~ '^#!.*python'
    setfiletype python
endif 
```

# c# - c# .net interop beforesave 不触发

> ID：10955215
> 
> 赞同：1
> 
> 时间：2012-06-08T19:50:14.900
> 
> 标签：c#, .net, excel, visual-studio-addins, excel-interop

基本上我想创建一个excel管理软件，客户可以将他们的excel文件直接保存到数据库中。为了实现这一点，我尝试用某个模板或文件打开一个excel工作表，然后让用户修改它，当用户保存他们的工作时，它会自动将excel程序保存到数据库中。

所以到目前为止我所做的是在保存之前测试事件并且它没有触发：

```
 static void Main()
    {
        System.Windows.Forms.Application.EnableVisualStyles();
        System.Windows.Forms.Application.SetCompatibleTextRenderingDefault(false);
        //Application.Run(new LoginForm());

        Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");

        Microsoft.Office.Interop.Excel.Application a = new 
                              Microsoft.Office.Interop.Excel.Application();

        Workbook wb = a.Workbooks.Open("\\\\doctor-pc\\excel\\test1.xlsx", 
                  Type.Missing, false, Type.Missing, Type.Missing, Type.Missing, 
                    Type.Missing,
            Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
            Type.Missing, Type.Missing, Type.Missing);

        wb.BeforeSave += new WorkbookEvents_BeforeSaveEventHandler(wb_BeforeSave);

        a.Visible = true;

    }

    static void wb_BeforeSave(bool SaveAsUI, ref bool Cancel)
    {
        MessageBox.Show("Save");
    } 
```

有人可以帮我弄这个吗？

我不能使用应用程序级插件，因为我只想让行为影响程序打开的文档，我不能使用文档级插件，因为程序可能会打开很多种类的文件和模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:10:16.227

1.  您需要维护对`wb`变量的实时引用（例如，通过将其提升到字段）。如果`Workbook`实例超出范围并被垃圾收集，那么它的事件将永远不会被触发。

2.  您需要保持您的 .NET 应用程序打开，以便能够接收和处理`BeforeSave`事件。您可以通过创建一个`EventWaitHandle`阻塞`Main`方法直到由`wb_BeforeSave`事件处理程序发出信号来实现这一点。

# list - 在 item.update 之后，SharePoint 列表项简要显示为由“系统帐户”编辑

> ID：10955216
> 
> 赞同：1
> 
> 时间：2012-06-08T19:50:20.647
> 
> 标签：list, sharepoint, sharepoint-2007, postback

我有一个在 SharePoint 2007 上运行的类似购物车的应用程序。

我正在对列表项运行一个非常标准的更新程序：

```
 using (SPWeb web = site.OpenWeb())
            {
                web.AllowUnsafeUpdates = true;
                SPList list = web.Lists["Quotes"];
                SPListItem item = list.GetItemById(_id);
                item["Title"] = _quotename;
                item["RecipientName"] = _quotename;
                item["RecipientEmail"] = recipientemail;
                item["IsActive"] = true;
                item.Update();
                site.Dispose();
            } 
```

此项目正确更新，但它短暂显示为由系统帐户修改。如果我等待一秒钟并刷新页面，它会再次显示为由 CurrentUser 修改。

这是一个问题，因为在 Page_Load 上，我正在检索标记为活动的项目并且被列为由 CurrentUser 修改。这意味着当用户更新他的列表时，当 PostBack 完成时，它显示他没有活动项目。

是 web.AllowUnsafeUpdates 吗？这是必要的，因为我之前遇到过安全错误。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:04:48.123

First off, it's not AllowUnsafeUpdates. This simply allows modifying of items from your code.

It's a bit hard to tell what's going on without understanding more of the flow of your application. I would suggest though that using Modified By to associate an item to a user may not be a great idea. This means, as you have discovered, that any modification by the system or even potentially an administrator will break that link.

I would store the current user in a custom field. That should solve your problem and would be a safer design choice.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:29:18.760

可能有一些其他代码在事件接收器中运行并更新项目。因为事件接收器在系统用户帐户的上下文中运行，如果您从事件接收器更新项目，修改字段将显示：系统帐户已修改项目。

# java - 使用硬件加速创建表单应用程序

> ID：10955217
> 
> 赞同：0
> 
> 时间：2012-06-08T19:50:21.940
> 
> 标签：java, wpf, swing, awt, hardware-acceleration

javax.awt、javax.swing 或 windows 窗体组件是否支持硬件加速？WPF 是在表单应用程序上使用硬件加速的唯一方法吗，WPF 的最佳替代方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:31:58.237

您必须使用现代框架才能享受硬件加速。WPF/Silverlight 是 Microsoft 的解决方案，但它们仅适用于 .NET。您可以查看其他供应商的解决方案，例如 Embarcadero 的 FireMonkey。

AWT、Swing、WinForms 太旧了，无法支持。但是由于 HTML 5 的兴起，Web 应用程序比大多数桌面应用程序更容易和更早地获得硬件加速，因为 Internet Explorer/Firefox/Google Chrome 等 Web 浏览器已经支持它。

# svn - “svn: Can't read stdin: End of file found”会在 shell 中崩溃文件读取

> ID：10955220
> 
> 赞同：0
> 
> 时间：2012-06-08T19:50:43.120
> 
> 标签：svn, shell

全部

我正在逐行读取文件。每行都是一个带有特定存储库路径的 svn update 命令。我的代码如下所示：

```
 while read line
    do
        eval $line 2> /tmp/outputfile            
        egrep -e "svn: Target path .* does not exist" /tmp/outputfile > /dev/null && echo $line >> /tmp/result
    done < $SVN_TMP_FILE 
```

基本上我想记录查找过时目录的命令。

但是在 while 循环期间可能会发生冲突，在提示符中显示以下内容：

```
Conflict discovered in 'blablabla'.
Select: (p) postpone, (df) diff-full, (e) edit,
    (mc) mine-conflict, (tc) theirs-conflict,
    (s) show all options: svn: Can't read stdin: End of file found 
```

它终止循环，此后的命令将不会被执行和记录。我的第一个线索是显示错误（无法读取标准输入）会导致读取行的过程崩溃，因为两者可能共享标准输入。关于如何避免这种终止的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:58:55.417

您可以将冲突解决指定为更新命令的一部分。摘自 $ `svn help update`：

```
 --accept ARG             : specify automatic conflict resolution action
                            ('postpone', 'working', 'base', 'mine-conflict',
                            'theirs-conflict', 'mine-full', 'theirs-full',
                            'edit', 'launch')
                            (shorthand: 'p', 'mc', 'tc', 'mf', 'tf', 'e', 'l') 
```

所以 a`$ svn up --accept tf`会接受来自“他们的”的所有更改。

# php - PHP 尴尬的函数声明

> ID：10955221
> 
> 赞同：3
> 
> 时间：2012-06-08T19:50:47.227
> 
> 标签：php

> **可能重复：**
> [用 & 符号启动 PHP 函数是什么意思？](https://stackoverflow.com/questions/1676897/what-does-it-mean-to-start-a-php-function-with-an-ampersand)

最近我偶然发现了这段代码：

```
public static function &get_instance()
{
return self::$instance;
} 
```

这种函数声明`&get_instance()`是什么意思？函数名可以是变量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T19:54:13.873

它是单例模式的一部分，在旧式代码中。

Singleton 是一种用于确保类只有一个实例的模式。（从技术上讲，它可以用来确保任何类都有一定数量的实例，但这个数量几乎总是一个。）它是四人帮模式之一，你可以找到关于它的使用和滥用的无休止的讨论。通过网络。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T19:58:18.650

这意味着`get_instance()`通过引用返回的结果。由于自 PHP 5 以来对象总是通过引用，因此编写这样的代码不再有意义。顺便说一句，这`public`也特别令人好奇，因为这意味着这是 PHP 5 代码。

# bash - 我不明白bash中bind -P的输出

> ID：10955230
> 
> 赞同：2
> 
> 时间：2012-06-08T19:51:15.747
> 
> 标签：bash

我不明白`bind -P`命令的输出。字符是什么意思-

```
"\C-g", "\C-x\C-g", "\e\C-g 
 "\e-", "\e0", "\e1", "\e2", "\e3", ... 
```

请解释。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:07:57.480

*   `"\C-g"`- `Ctrl`- `g`- 中止
*   `"\C-x\C-g"`- `Ctrl`- `x`- `Ctrl`- `g`- 中止
*   `"\e\C-g`- `Esc`- `Ctrl`- `g`- 中止
*   `"\e-"`- `Esc`- `-`- 计数参数以负数开头
*   `"\e0"`- `Esc`- `0`- 计数参数的数字
*   `"\e1"`- `Esc`- `1`- 一样
*   `"\e2"`- `Esc`- `2`- 一样
*   `"\e3"`- `Esc`- `3`- 一样

查看[`man readline`](http://linux.die.net/man/3/readline)更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T20:09:55.677

根据 bash 的[手册页](http://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html)，`-P`开关执行以下操作：

```
List current Readline function names and bindings. 
```

Readline 是一个与 bash （通常）[集成的库。](http://www.gnu.org/software/bash/manual/bashref.html#Readline-Interaction)`-P`因此，开关中的绑定是运行相关的 readline 函数所必需的*键盘组合。*因此，例如：

```
... snip ...
beginning-of-line can be found on "\eOH", "\e[H".
call-last-kbd-macro is not bound to any keys
capitalize-word is not bound to any keys
character-search is not bound to any keys
character-search-backward is not bound to any keys
clear-screen is not bound to any keys
complete can be found on "\C-i".
... snip ... 
```

这表明该函数`complete`绑定到组合键，该组合键`"\C-i"`是 control-i 的简写。`\C`诸如此类的字符是显示为控制代码的元键。

# javascript - jquery删除前置元素不起作用

> ID：10955233
> 
> 赞同：2
> 
> 时间：2012-06-08T19:51:30.470
> 
> 标签：javascript, jquery

基本上，我想要两个功能。第一个前置一个`div`包含一些 ajax 数据的元素和一个可以触发关闭功能的按钮。第一个函数做了我想做的一切，除了我在应用属性时遇到问题，单击该`onclick`属性会触发删除功能。

但除此之外，我还无法开始`remove function`工作。

如果你能帮助我做得更好，我将不胜感激。

```
function displayCrRef(refPid, refFs, pidOfReferringP) {

    $.get("crRefParaExtract.php", {
        pid: refPid,
        fs: refFs
    }, function(data) {

        $("#pwrap_" + pidOfReferringP).prepend("<div id='#crRef_" + refPid + "' style='float: left;  width: 350px; margin-right: 60px; padding: 10px; background-color: #E6EDE8'>" + "<a id='crossRefRemoveButton'>Return to normal text</a>" + data + "</div>");

    });
    var rmFxnParam = "'" + refPid + "'";
    $("#crossRefRemoveButton").attr("onclick", "removeCrossRef(" + rmFxnParam + ")");
    $("#" + pidOfReferringP).css({
        float: 'left',
        width: '425px'
    });
    $("#menu_" + pidOfReferringP).css({
        float: 'none',
        clear: 'both'
    });
   }

   function removeCrossRef(refPid) {
       $("#crRef_" + refPid).remove();

   }​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T19:54:12.220

以 开头的 id`#`无效。我相信您将 id 值与 jQuery 的 CSS 选择器混淆了。

`[hashTag] + [ID of Element] = CSS ID Selector`

这应该有效：

```
function displayCrRef(refPid, refFs, pidOfReferringP) {

    ...
    // Remove the hash tag here: id='crRef_" + refPid + "'
    $("#pwrap_" + pidOfReferringP).prepend("<div id='crRef_" + refPid + "' style='float: left;  width: 350px; margin-right: 60px; padding: 10px; background-color: #E6EDE8'>" + "<a id='crossRefRemoveButton'>Return to normal text</a>" + data + "</div>");
    ...

}

function removeCrossRef(refPid) {
    $("#crRef_" + refPid).remove();
}​ 
```

附加信息

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

参考：[http ://www.w3.org/TR/html4/types.html](http://www.w3.org/TR/html4/types.html)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-08T19:53:32.653

```
$("#crossRefRemoveButton").addEventListener('click',function(){
   removeCrossRef(rmFxnParam);
}); 
```

# mysql - MySQL：不正确的查询或数据库结构错误？

> ID：10955235
> 
> 赞同：1
> 
> 时间：2012-06-08T19:51:33.900
> 
> 标签：mysql, database, database-design

这是用于电影在线商店的 mi 数据库的结构：

![在此处输入图像描述](../Images/02ed2a7505b07dcb10c7d9a466f249a7.png)

这些是创建它的sql语句

**电影**

```
CREATE TABLE `movies` (
  `id_movie` varchar(4) NOT NULL default '',
  `nom_movie` varchar(30) default NULL,
  `detall_movie` text,
  `precio_movie` varchar(6) default NULL,
  `img_rut_movie` varchar(50) default NULL,
  PRIMARY KEY  (`id_movie`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

**杰诺斯**

```
CREATE TABLE `genres` (
  `id_genre` varchar(3) collate utf8_bin NOT NULL default '',
  `nom_genre` varchar(20) collate utf8_bin default NULL,
  PRIMARY KEY  (`id_genero`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

**电影基因**

```
CREATE TABLE `movie_genre` (
  `id_movie` varchar(4) collate utf8_bin default NULL,
  `id_genre` varchar(3) collate utf8_bin default NULL,
  FOREIGN KEY(id_movie) REFERENCES movies(id_movie),
  FOREIGN KEY(id_genero) REFERENCES generos(id_genero)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

例如，我想展示属于“动作”类型的电影：

```
SELECT nom_movie FROM movies, genres, movie_genre WHERE genres.nom_genre = 'action'; 
```

但它显示超过 1200 个结果！！，即重复 36 次电影表中托管的 36 部电影。

我希望你能帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:55:10.207

即使使用 Distinct 也是一个低效的查询。我建议一个适当的内部连接。这应该这样做：

```
select 
  m.nom_movie 
FROM 
  movies 
inner join
  movie_genre mg
on
  m.id_movie=mg.id_movie 
inner join 
  genres g 
on 
  mg.id_genre=g.id_genre 
where 
  g.nom_genre = 'action'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:56:12.937

```
SELECT movies.nom_movie
FROM movies, genres, movie_genre
WHERE
    movies.id_movie = movie_genre.id_movie
    and movie_genre.id_genre = genre.id_genre
    and genres.nom_genre = 'action'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T19:57:53.173

结构很完美，就用这个查询。

```
 SELECT nom_movie FROM movies, genres, movie_genre WHERE genres.nom_genre = 'action' AND genres.id_genre= movie_genre.id_genre AND movie_genre.id_movie=movies.id_movie ; 
```

# ajax - 如果一开始就全部加载，是否可以将 SlickGrid 的 DataView 与数据库中的数据一起使用？

> ID：10955242
> 
> 赞同：0
> 
> 时间：2012-06-08T19:51:49.050
> 
> 标签：ajax, database, json, slickgrid

简单的问题，但我不确定答案。基本上我知道，如果您使用 AJAX 动态/延迟加载页面，那么您不能使用 dataview。

但是，我已经使用使用 dataview 的原型构建了很多功能，并且我想将它与真正的数据库连接一起使用（现在它都是来自 for 循环的假数据）。是否可以将我的所有数据从数据库加载到客户端计算机上，然后使用数据视图进行所有排序等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T03:32:07.583

dataView 的数据是一个 JS 数组。它也可以是 JSON 数组。如何加载该数组取决于您。我个人会使用 AJAX（可能是 $.get）来填充这个数组并在 dataView 中设置它。使用 AJAX 在加载或提交时获取完整数组，然后在 dataView 中设置此数组。AJAX 控制器（它可以支持您可能正在使用的任何框架 - Struts/SpringMVC/GWT/等）可用于从您的数据库中获取并为您格式化此数组。也可以使用 Jackson 等库将数据转换为标准 JSON 格式。

我个人使用了 jQuery-SlickGrid-JSON-SpringMVC 模型——我认为所有这些都可以很好地协同工作。如果你想走这条路，看看这个精彩的教程：http: [//krams915.blogspot.com/2011/01/spring-mvc-3-and-jquery-integration.html](http://krams915.blogspot.com/2011/01/spring-mvc-3-and-jquery-integration.html)

不过在这里重申一点 - SlickGrid 中的数据可以使用 JSON 数组加载 - 可以以您喜欢的任何方式填充。

希望这可以帮助！

# tfs - 如何在构建期间阻止 TFS 获取代码？

> ID：10955245
> 
> 赞同：1
> 
> 时间：2012-06-08T19:52:14.887
> 
> 标签：tfs, get, workflow, tfsbuild

我正在使用 TFS 2010。我希望在已经构建的解决方案上执行一些任务。我不想“获取”任何代码，只需留下那里的代码。在我的工作流程或其他任何事情中，是否有任何东西可以阻止 TFS 获取任何代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:01:20.350

我找到了解决方案：不要在 xaml 工作流中使用“SyncWorkspace”任务。

# c# - 为什么 NHibernate 在我向集合中添加一项时会删除并重新创建集合中的所有关联？

> ID：10955251
> 
> 赞同：7
> 
> 时间：2012-06-08T19:52:33.920
> 
> 标签：c#, nhibernate, nhibernate-mapping

我正在使用 NHibernate 进行一些测试，目前我有两个映射实体**Orders**和**Products**。与往常一样，**Order**具有**Products**集合，我将其映射为：

```
<bag name="Products" cascade="all" lazy="true">
  <key column ="Order_ID" />
  <many-to-many class="Product" column="Product_ID" />
</bag> 
```

在 C# 方面：

```
public virtual IList<Product> Products
{
    get { return _Products; }
    set { _Products = value; }
}
private IList<Product> _Products = new List<Product>(); 
```

如果我在数据库中有一个持久**订单**（约翰的订单），其**Products**集合中有一些项目（一个苹果、一个橙子和一个椰子），我尝试向集合中添加一个新项目（一个香蕉）我可以看到从 NHibernate 正在执行如下操作的 SQL 输出中：

```
INSERT INTO Products_Table (Product_Name, Product_ID) VALUES ('Banana', @Banana_ID)
DELETE FROM Products WHERE Order_ID = @Johns_Order_ID
INSERT INTO Products (Order_ID, Product_ID) VALUES (@Johns_Order_ID, @Apple_ID)
INSERT INTO Products (Order_ID, Product_ID) VALUES (@Johns_Order_ID, @Orange_ID)
INSERT INTO Products (Order_ID, Product_ID) VALUES (@Johns_Order_ID, @Coconut_ID)
INSERT INTO Products (Order_ID, Product_ID) VALUES (@Johns_Order_ID, @Banana_ID) 
```

而不是简单地做这样的事情：

```
INSERT INTO Products_Table (Product_Name, Product_ID) VALUES ('Banana', @Banana_ID)
INSERT INTO Products (Order_ID, Product_ID) VALUES (@Johns_Order_ID, @Banana_ID) 
```

那么，当我只想在其中插入新产品时，为什么 NHibernate 会从**Products表中删除所有关联以重新创建它们？**如何避免？

提前致谢！

PS：我尝试使用此[SO Question中建议的](https://stackoverflow.com/questions/2311849/how-to-force-nhibernate-not-to-update-all-objects-in-collection)**逆**映射属性，但即使新产品已保存，它与订单的关联也不会。

**编辑：**

这是我用来修改产品列表的代码：

```
Order order = session.Load<Order>(orderId);
order.Products.Add(new Product() { Name = "Banana" });
using (ITransaction transaction = session.BeginTransaction())
{
    session.Update(order);
    transaction.Commit();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T21:14:05.153

SO上有一个类似的问题：[NHibernate Many-To-Many Is Deleting All Associations Before Inserting](https://stackoverflow.com/questions/1837601/nhibernate-many-to-many-is-deleting-all-associations-before-inserting)

从 NHibernate 的[文档](http://www.nhforge.org/doc/nh/en/index.html#performance-collections-taxonomy)：

> 包是最坏的情况。由于包允许重复的元素值并且没有索引列，因此可以不定义主键。NHibernate 无法区分重复的行。NHibernate 通过完全删除（在单个 DELETE 中）并在集合发生更改时重新创建集合来解决此问题。这可能是非常低效的。

# excel - 在excel图表中输入公式

> ID：10955256
> 
> 赞同：3
> 
> 时间：2012-06-08T19:53:07.580
> 
> 标签：excel, vba, charts, textbox

我想使用 VBA 在 Excel 图表上填充文本框。我试过这个：

```
 ActiveSheet.ChartObjects("Chart 1").Chart.Shapes(1).Formula = "Sheet1!A1" 
```

它不起作用，但这确实：

```
 ActiveSheet.ChartObjects("Chart 1").Chart.Shapes(1).Select
 Selection.Formula = "=Sheet1!A1" 
```

可能我需要在 and 之间放置一些东西`Shapes(1)`，`.Formula`但我找不到。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T02:54:10.277

请注意，第二个公式（有效的公式）在工作表名称前包含一个等号：

“=Sheet1！A1”

而第一个没有：

“表 1！A1”

# php - 使用 php 计算 zip 文件中的特定文件类型

> ID：10955258
> 
> 赞同：0
> 
> 时间：2012-06-08T19:53:11.307
> 
> 标签：php

我希望能够使用 PHP 计算 zip 文件中的某种文件类型。

我有 zip 文件，其中包含的文件具有 .ppml 扩展名，并且需要在不解压缩的情况下找出每个文件中有多少个文件。

在此先感谢您的帮助。

# javascript - 基于书签链接的重定向

> ID：10955268
> 
> 赞同：1
> 
> 时间：2012-06-08T19:53:53.590
> 
> 标签：javascript, asp.net-mvc, redirect, anchor

我有一个正在迁移到不同系统的旧 Web 应用程序，我需要确保将现有 URL 重定向到新系统。（我正在使用 ASP.NET MVC2。）

通常，我可以重定向到新站点的主页。但是，如果 URL 链接到特定项目，它们将使用 HTML 书签，如下所示：

```
http://server/old-system/#itemID
```

我有一个查找文件和翻译功能，可以从“itemID”转到重定向 URL，我可以使用 RedirectResult 完成重定向。

但是如何将锚标记作为查询字符串参数发送到服务器（锚标记不在 HTTP 请求中发送）？我假设我需要某种客户端 javascript 来调用单独的服务器方法，但我不确定如何进行翻译。

（注意，这样做的全部原因是客户可能已经存储了一个项目的书签链接。）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T20:29:16.317

如果`http://server/old-system/#itemID`是您系统中的一个页面，您可以在 javascript 中进行快速翻译。

```
window.location.href.replace('#','?link='); 
```

或获取值并链接到另一个页面。

```
window.location = "http://server?itemID="+window.location.hash.replace('#',''); 
```

# objective-c - 连接时 CocoaAsyncSocket 崩溃

> ID：10955269
> 
> 赞同：0
> 
> 时间：2012-06-08T19:53:55.473
> 
> 标签：objective-c, ios, sockets, ios5, gcdasyncsocket

我已将我的网络代码分隔在一个单独的类 IBStore 中。该代码非常简单，并且基于提供的示例：

```
#import <UIKit/UIKit.h>
#import "GCDAsyncSocket.h"

@interface IBStore : UIViewController
{
    GCDAsyncSocket *socket;
}
- (void)connect;
- (void)socket:(GCDAsyncSocket *)sender didConnectToHost:(NSString *)host port:(UInt16)port;
- (void)socket:(GCDAsyncSocket *)sock didWriteDataWithTag:(long)tag;
- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag;
@end 
```

和：

```
#import "IBStore.h"

@interface IBStore ()
@end

@implementation IBStore

- (void)connect
{
    socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];    

    NSError *err = nil;
    if (![socket connectToHost:@"127.0.0.1" onPort:80 error:&err]) // Asynchronous!
    {
        // If there was an error, it's likely something like "already connected" or "no delegate set"
        NSLog(@"Connection error: %@", err);
    }
} 
```

这是从主视图控制器实例化 IBStore 的方式：

```
- (IBAction)connect:(id)sender {
    IBStore *client = [[IBStore alloc]init];
    [client connect];
} 
```

不幸的是，`didConnectToHost`应用程序在执行时没有执行，而是在 GCDAsyncSocket.m 中崩溃（挂起）`socket4FD = socket(AF_INET, SOCK_STREAM, 0);`

任何关于为什么会发生这种情况的想法都将受到高度赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:11:20.817

我的错误是在方法中声明和实例化 IBStore 类`connect`。现在，我已将 IBStore *client 声明为实例变量，它运行良好。

# solr - 如何在 Solr DataImportHandler 中转义变量中的单引号？

> ID：10955271
> 
> 赞同：1
> 
> 时间：2012-06-08T19:54:13.187
> 
> 标签：solr, dataimporthandler

我有一个 DataImportHandler 用于从 SQL 数据库导入数据。根实体，`Foo`有许多`Bar`s。该`Bar`表`Foo.Name`用作其外键。某些 Foo 名称中包含单引号 - 例如`STW's`.

实体的导入查询`Bar`类似于：

```
select name from Bar where Foo_Name = ${Foo.Name} 
```

但是，当 Foo.Name 包含单引号时，导入失败并出现 SQL 异常`Incorrect syntax near 's`。

我试过用它包装参数，`escapeSql(${Foo.Name})`但它似乎没有被调用——正在执行的 sql 是`where Foo_Name = 'escapeSql(STW's)'`

`Foo.Name`当它们包含单引号时，如何正确逃避以避免出现问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:00:51.450

我认为正确的语法是：

```
Foo_Name = '${escapeSql(Foo.Name)}' 
```

因为`escapeSql`是 solr 函数，而不是普通的 sql 函数。

# python - 用python转换id3版本

> ID：10955274
> 
> 赞同：0
> 
> 时间：2012-06-08T19:54:15.263
> 
> 标签：python, id3

我一直在寻找几个小时，但什么也没找到。我已经有了返回 ID3 版本的方法，但是如果还没有，我想将其转换为 ID3v2.2。iTunes 可以做到这一点（右键单击，转换 ID3），但它是一个庞大的解决方案，我希望将此功能简化到我的 python 脚本中。

Python

```
from tagger import *
audio = ID3v2('example.mp3')      
id3_version = audio.version
if id3_version != '2.2':
  #convert it to 2.2 
```

# asp.net-mvc-3 - 如何使用自定义界面在 MVC3 中上传多个文件？

> ID：10955278
> 
> 赞同：3
> 
> 时间：2012-06-08T19:54:23.780
> 
> 标签：asp.net-mvc-3, file-upload

我正在努力解决这个问题。

我需要做的是当用户单击文本时弹出文件浏览器窗口（此文本将替换通常文件输入上按钮的功能），然后当他们选择文件时，文件名（以及我的其他信息）假设）需要插入到页面的不同部分。用户应该能够通过单击相同的文本并选择另一个文件来继续添加更多文件。

通过单击插入文件名和其他信息的区域中的图标，应该能够从上传队列中删除文件。我还没有决定是否应该在表单提交之前或与表单一起上传它们。

无论如何，我觉得我将不得不使用某种 Flash 插件，因为仅使用 js/jquery 和 MVC3 听起来几乎是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:01:28.470

您可能需要检查 HTML5 FileReader API - 可以在[此处](http://www.html5rocks.com/en/tutorials/file/dndfiles/)找到示例。它甚至可以通过将文件拖放到页面上的指定元素来上传文件。

浏览器并没有广泛支持（具体来说，IE10应该支持，但IE9肯定不支持，你可以[在这里](http://caniuse.com/filereader)查看浏览器兼容性）但确实提供了所需的功能。

# android - 在 BroadcastReceiver 中使用 getWindowManager()

> ID：10955287
> 
> 赞同：43
> 
> 时间：2012-06-08T19:55:17.490
> 
> 标签：android, broadcastreceiver

我正在尝试在`getWindowManager()`内部使用`BroadcastReceiver`，但出现此错误：

“该`getWindowManager()`类型的方法未定义`MyReceiver`”

我只需要得到`display.getWidth()`和`display.getHeight()`

有什么提示吗？非常感谢。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-08-14T15:16:27.580

只需要上下文的简单代码

```
 DisplayMetrics metrics = new DisplayMetrics();
        WindowManager windowManager = (WindowManager) context
                .getSystemService(Context.WINDOW_SERVICE);
        windowManager.getDefaultDisplay().getMetrics(metrics); 
```

更多信息转到[文档](http://developer.android.com/reference/android/view/WindowManager.html)

或者你可以使用这个

```
context.getResources().getDisplayMetrics() 
```

但阅读文档

> 返回对此资源对象有效的当前显示指标。返回的对象应被视为**只读**。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-06-08T21:14:28.063

`getWindowManager()`是一种方法`Activity`。您不能使用此方法。请使用`getSystemService()`来检索`WindowManager`，如[文档中](http://developer.android.com/reference/android/view/WindowManager.html)[所述`WindowManager`](http://developer.android.com/reference/android/view/WindowManager.html)。

# log4j - log4j 中的 Logger 和 Appender

> ID：10955288
> 
> 赞同：0
> 
> 时间：2012-06-08T19:55:18.210
> 
> 标签：log4j

我已经按如下方式配置了 Logger 和 Appender。我面临的问题是我没有在每个 FileAppender 中获得指定的阈值日志级别，这意味着每个 FileAppender 都有跟踪级别的输出，而不是为每个 FileAppender 配置的阈值级别，尽管 consoleAppender 在日志级别方面工作正常。

```
#Configuring multiple logger and appender
log4j.rootLogger=trace,consoleA,file1A,file2A

log4j.appender.consoleA=org.apache.log4j.ConsoleAppender
log4j.appender.consoleA.Target=System.out
log4j.appender.consoleA.Threshold=ERROR
log4j.appender.consoleA.layout=org.apache.log4j.PatternLayout
log4j.appender.consoleA.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

#File1 Appender
log4j.appender.file1A=org.apache.log4j.RollingFileAppender
log4j.appender.file1A.File=C:\\loging.log
log4j.appender.file1A.MaxFileSize=1MB
log4j.appender.file1A.MaxBackupIndex=1
log4j.appender.file1A.Threshold=WARN
log4j.appender.file1A.layout=org.apache.log4j.PatternLayout
log4j.appender.file1A.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

#File2 Appender
log4j.appender.file2A=org.apache.log4j.RollingFileAppender
log4j.appender.file2A.File=C:\\loging2.log
log4j.appender.file2A.MaxFileSize=1MB
log4j.appender.file1A.Threshold=DEBUG
log4j.appender.file2A.MaxBackupIndex=1
log4j.appender.file2A.layout=org.apache.log4j.PatternLayout
log4j.appender.file2A.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:37:57.240

您的配置中有几个拼写错误。首先，我认为级别应该在 CAPS 中。

```
log4j.rootLogger=TRACE,consoleA,file1A,file2A 
```

您还定义了 file1A 阈值两次，但没有定义 file2A 的阈值

```
log4j.appender.file1A.Threshold=WARN
log4j.appender.file1A.Threshold=DEBUG 
```

# php - 我可以用一个 SQL 查询来做到这一点吗？

> ID：10955296
> 
> 赞同：1
> 
> 时间：2012-06-08T19:55:53.263
> 
> 标签：php, mysql, sql

好的，我有一个这样的表：

```
id  query  results  ip
---------------------------------
1   milk   17       10.10.10.1
2   milk   17       10.10.10.1
3   milk   17       10.10.10.2
4   bread  8        10.10.10.2
5   bread  8        10.10.10.2
6   cheese 12       10.10.10.1 
```

我现在有这个查询：

```
SELECT COUNT(DISTINCT(id)) as cnt, query, results, ip
FROM table
GROUP BY query
ORDER BY results ASC
LIMIT 20 
```

此查询返回以下结果：

```
count  query  results
---------------------
2      bread  8
1      cheese 12
3      milk   17 
```

我需要扩展该查询（或完全重做）以返回类似的内容，最好将嵌套数组中的 IP 作为查询数组的一部分：

```
query  count  results  ip
--------------------------------
bread  2      8        10.10.10.2 (2)
cheese 1      12       10.10.10.1 (1)
milk   3      17       10.10.10.1 (2)
                       10.10.10.2 (1) 
```

我将使用 php 输出它，将带有该计数的 IP 列表附加到查询计数显示（单击以显示/隐藏填充信息的模式）。

任何获得我需要的数据的方向或帮助都会很棒！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T20:05:14.820

不，你不能得到那个结果。你有两个选择：

1.  在自己的行中获取每个 IP 地址并智能地循环遍历 PHP 中的结果。

2.  使用[GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat) MySQL 函数将 IP 地址连接到一个字段中，并解析该字段以在 PHP 中将它们分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T20:05:29.480

它不会是一个嵌套数组，但你可以有类似的东西

```
SELECT query, results, ip, COUNT(ip) AS cnt
FROM table
GROUP BY query, ip
ORDER BY results ASC
LIMIT 20 
```

你在哪里分组查询和 ip

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T20:07:29.013

像这样的东西可能是你需要的：

```
SELECT COUNT(DISTINCT(id)) as cnt, query, results, ip
FROM table
GROUP BY query, ip
ORDER BY results ASC
LIMIT 20 
```

这会给你这样的结果：

```
query   count  results  ip
----------------------------------
bread   2      8        10.10.10.2
cheese  1      12       10.10.10.1
milk    2      17       10.10.10.1
milk    1      17       10.10.10.2 
```

不幸的是，您不能使用嵌套数组，但这非常接近。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T20:17:03.253

[group_concat()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)可以很好地解决这个问题。但请记住在 group_concat() 中使用 distinct(ip)。

以下是我尝试过的来自 mysql 的工作查询。

```
SELECT COUNT(DISTINCT(id)) as cnt, query, results, GROUP_CONCAT(DISTINCT(ip)) 
FROM table
GROUP BY query 
ORDER BY results ASC LIMIT 20;

+-----+--------+---------+----------------------------+
| cnt | query  | results | group_concat(distinct(ip)) |
+-----+--------+---------+----------------------------+
|   2 | bread  |       8 | 10.10.10.2                 |
|   1 | cheese |      12 | 10.10.10.1                 |
|   3 | milk   |      17 | 10.10.10.1,10.10.10.2      |
+-----+--------+---------+----------------------------+ 
```

当我在 group_concat 中运行没有 distinct(ip) 的查询时：

```
SELECT COUNT(DISTINCT(id)) as cnt, query, results, group_concat(ip) 
FROM table 
GROUP BY query 
ORDER BY results ASC LIMIT 20;

+-----+--------+---------+----------------------------------+
| cnt | query  | results | group_concat(ip)                 |
+-----+--------+---------+----------------------------------+
|   2 | bread  |       8 | 10.10.10.2,10.10.10.2            |
|   1 | cheese |      12 | 10.10.10.1                       |
|   3 | milk   |      17 | 10.10.10.1,10.10.10.1,10.10.10.2 |
+-----+--------+---------+----------------------------------+ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-08T20:35:04.087

对此的答案（尽管有许多相反的说法）是“是的，你可以，使用派生表”：

```
SELECT
  SUM(cnt) as cnt,
  query, results,
  GROUP_CONCAT(ip SEPARATOR '\n') AS ip
FROM (
  SELECT
    query, results,
    COUNT(DISTINCT(id)) as cnt,
    CONCAT(ip, '(', COUNT(ip), ')') AS ip
  FROM test
  GROUP BY query, ip
) t
GROUP BY query
ORDER BY results ASC
LIMIT 20 
```

[样品](http://sqlfiddle.com/#!2/3c2b3/25)...

The one thing you *cannot* do is have PHP understand that the value of `ip` is an array with no other interference. However, you could do [this slightly nasty thing](http://sqlfiddle.com/#!2/3c2b3/27) to dynamically construct the data into JSON, and then it can simply be passed to `json_decode()` in PHP to easily convert it to a PHP vector type.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-08T20:05:33.200

试试这个：

```
SELECT COUNT(DISTINCT(id)) as cnt, query, results, GROUP_CONCAT(ip) AS ip
FROM table
GROUP BY query
ORDER BY results ASC
LIMIT 20 
```

`GROUP_CONCAT`将`ip`字段组合成一个逗号分隔的字符串。

# zend-framework - 使用一个提交按钮发送两个表单

> ID：10955302
> 
> 赞同：0
> 
> 时间：2012-06-08T19:56:21.313
> 
> 标签：zend-framework

我这里有个小问题。我有两种形式，Login.php 和 Captcha.php。

我的登录表单包含电子邮件、密码和一个提交按钮。我的验证码表格包含验证码。

我需要同时有效的登录表单和验证码，带有提交按钮（登录表单）。但验证码表单无法识别控制器中的此按钮。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:03:43.687

首先，您应该从同一个表单中发布验证码和数据。但是，您可以使用这个 js 来完成这项工作：

```
document.forms["login-form"].onsubmit=function(){
document.forms["captcha-form"].submit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:00:01.750

为一种形式做这项工作是可以的，

对于两个表单，像往常一样提交第一个表单并使用 java 脚本（打开一个新链接）提交第二个表单或通过 ajax 调用 url！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T20:01:02.813

Html 不允许您从一个按钮提交两个表单。然而，Javascript 可以做到这一点。 [这](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)可能会帮助您弄清楚。

# x86 - 我应该压栈，使用寄存器还是变量？

> ID：10955304
> 
> 赞同：1
> 
> 时间：2012-06-08T19:56:28.350
> 
> 标签：x86, stack, x86-64, inline-assembly, cpu-registers

我需要保留一个寄存器的值（[ar]ax，即）。它在函数调用后被修改，但该值需要稍后使用。我想到了三种方法（示例是 64 位）：

1.将其推入堆栈：

```
__asm__ ("pushq %rax\n\t"
         "call function\n\t"
         "popq %rax"); 
```

2.将其保存在寄存器中：

```
__asm__ ("movq %%rax, %%some_register\n\t"
         "call function\n\t"
         "movq %%some_register, %%rax"
         : : : "%some_register"); 
```

3.将其保存在变量中：

```
unsigned long var;
__asm__ ("movq %%rax, %0" : "=m" (var) : : );
function();
__asm__ ("movq %0, %%rax" : : "m" (var) : ); 
```

目前，我正在使用#1。它在我的特定情况下按预期工作，但我担心将它推入堆栈可能是一件坏事™。我最担心的是：编译器不“知道”它被推送。由于它似乎占用了堆栈帧的一些空间，而这相当有限，这通常会导致麻烦。

将其保存在寄存器中可防止编译器将其用于自己的需要。这在 x86-64 上可能不是什么大问题，与 x86 相比，这里有许多额外的寄存器。但是如果我需要在 x86 上使用它，那可能会影响性能，因为那里的寄存器数量要有限得多。

将其保存到变量可能是最佳选择。而且由于编译器可能会将变量保存在堆栈上 && 甚至分配一个寄存器，所以它可能不会那么慢。但这确实使代码看起来很奇怪，以及一个可能让其他人摸不着头脑的额外变量。

所以问题是：哪种解决方案是最好的，即 Right Thing™ 应该做什么？或者也许还有一些我没有想到的方法来保存它 - 那些会更好？

注意：如果重要的话，该函数不接受变量并且不返回任何内容；寄存器中的值不能简单地通过一些“更高级别”的解决方案来保存，因此是内联汇编；它必须是 [er]ax ；我还没有测试第三种解决方案，所以它可能有点不准确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T17:40:25.420

在解决方案 2 中，认为寄存器不会被破坏是大胆的，尤其是在优化时。解决方案 1 的唯一缺点是您将无法展开堆栈（如果您需要调试函数调用堆栈），因为堆栈帧之间的唯一链接是推送的 [er]bp，在这种情况下它不再是与 [er] sp 一致。我肯定会选择更清晰的解决方案 3。当然它为一些混淆目的添加了一个局部变量，但至少它不会欺骗 ABI！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:05:09.893

None of your methods are correct, you can not safely keep something in a register outside of an asm statement. If you wish to pass a value between asm statements you must store it in a variable, GCC will keep it in the register if can, if not it will save it somewhere.

# seo - 像 shirt7 或 shirtseven 这样的网址 - 有趣，谷歌是否理解书面数字

> ID：10955305
> 
> 赞同：-1
> 
> 时间：2012-06-08T19:56:30.330
> 
> 标签：seo

您好，我们正在寻找可以找到的最佳域名。我们有一个产品，人们总是搜索“shirt 7”。域名 shirt7.com 被占用，但我们可以声明“shirtseven.com”

当有人搜索“shirt 7”时，谷歌会将“shirtseven.com”排名更低、更高或相等（所有其他元素相同）

或者换句话说，声称“shirtseven.com”是个好主意吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:53:36.750

没有简短的答案。;)

这将取决于内容、shirtseven.com 和 shirt7.com 上的关键字 shirt 7 的重量。

一个例子是 7 up（饮料），搜索“7 up”和“seven up”都给出了相似的结果，但顺序不同，这是因为一些网站更强调短语“7up”而其他网站短语“七起来”。

您可以声明 shirtseven.com 只是您需要记住用户将或可能使用这两种方式来搜索该网站。如果您确信用户总是通过 shirt 7 搜索您的网站，请确保您在您的网站上强烈使用该关键字。

# javascript - 根据指定长度的输入文本从数据库中动态填充选择框

> ID：10955306
> 
> 赞同：0
> 
> 时间：2012-06-08T19:56:32.480
> 
> 标签：javascript, jquery, html

我需要能够根据输入文本值动态填充 html 选择。一旦文本框值超过 8 个字符，这需要自动触发。用户不必按 Tab 或单击即可查看填充的值。这是我到目前为止所拥有的，但这仅在文本框失去焦点时才会触发。

```
//Html code
<input id=InputText name=InputText onblur="populateListBox();" onchange="CheckInputLength();" onkeydown="CheckInputLength();" value="" onfocus="this.select();"> 
```

//Javascript代码

```
function CheckInputLength()
{
    if($("#InputText").val().length >= 8)
        populateListBox();
}

function populateListBox()
{   
            $.get("???", function( data ) {
                $('#listBox').children().remove();
                var options = data;

                $("#listBox").append( options );
                $("#listBox").html( data );

            });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:58:21.460

我会检查 Select2 听起来它具有您正在寻找的所有功能以及一些功能：http: [//ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)

```
$("#InputText").select2({
  minimumInputLength: 8,
  ajax: {
    url: "???",
    // your other options
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:00:18.683

```
$('#InputText').keypress(function (event) {
    var $inputText = $(this);
    // Before keypress.
    setTimeout(function () {
        // After keypress.
        if ($inputText.val().length >= 8) { populateListBox(); }
    }, 0);
}); 
```

# sql-server - T-SQL：增加产品浏览次数的存储过程

> ID：10955307
> 
> 赞同：1
> 
> 时间：2012-06-08T19:56:40.673
> 
> 标签：sql-server, sql-server-2008, tsql, stored-procedures, transactions

我是 sql 的初学者，我需要编写一个 SP 来增加产品视图计数。当用户在网站上搜索时，我们希望增加搜索返回的所有产品的计数器。我发现我的 SP 存在两个问题：

1.  它使用光标
2.  它开始了很多交易

SP 被许多线程同时调用。在我实现它之后，我得到了很多超时异常。我的计数表如下所示：

ProductsViewsCount(ProductId int, Timestamp datetime, ViewType int, Count int)

Tiemstamp 列四舍五入到调用 SP 的 .net 代码中最接近的小时。基本上我会按小时计算观看次数。

SP 看起来像这样：

```
 CREATE PROCEDURE [dbo].[IncrementProductsViews]
    -- Add the parameters for the stored procedure here
    @ProductsIds as varchar(max) = '', --CSV ids of products that were returned by search
    @ViewType int,
    @Timestamp datetime
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    DECLARE @id int 
    DECLARE idsCursor CURSOR FOR 
        SELECT Data FROM dbo.Split(@ProductsIds,',')

    OPEN idsCursor
    FETCH NEXT FROM idsCursor INTO @id
    WHILE @@FETCH_STATUS = 0
    BEGIN
        BEGIN TRAN
            UPDATE dbo.ProductsViewsCount SET Count = Count + 1 
                WHERE ProductId = @id AND ViewType = @ViewType AND Timestamp = @Timestamp
            if @@rowcount = 0
            BEGIN
                INSERT INTO dbo.ProductsViewsCount (ProductId, Timestamp, ViewType, Count) 
                    VALUES (@id, @Timestamp, @ViewType, 1)
            END
        COMMIT TRAN     
        FETCH NEXT FROM idsCursor INTO @id
    END     
    CLOSE idsCursor   
    DEALLOCATE idsCursor
    select 1
END 
```

我能以更有效的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:00:50.210

您可以在集合操作而不是游标上执行此操作：

```
CREATE PROCEDURE [dbo].[IncrementProductsViews]
    -- Add the parameters for the stored procedure here
    @ProductsIds as varchar(max) = '', --CSV ids of products that were returned by search
    @ViewType int,
    @Timestamp datetime
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    ;WITH CTE AS
    (
        SELECT *
        FROM dbo.ProductsViewsCount
        WHERE ViewType = @ViewType AND [Timestamp] = @Timestamp
    )

    MERGE CTE AS A
    USING (SELECT * FROM dbo.Split(@ProductsIds,',')) B
    ON A.ProductId = B.Data 
    WHEN MATCHED THEN UPDATE SET A.[Count] = B.[Count] + 1
    WHEN NOT MATCHED BY TARGET THEN
    INSERT(ProductId, [Timestamp], ViewType, [Count])
    VALUES(Data, @Timestamp, @ViewType, 1);

    SELECT 1 -- I don't know why this is here
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:29:29.297

使用 SQL Server 2008，您有一个不错的新选项 (http://technet.microsoft.com/en-us/library/bb510625(SQL.100).aspx)：

```
with ProductViewsCountSelect as (select * from ProductViewsCount where ViewType = @ViewType and [Timestamp] = @Timestamp)
merge into ProductViewsCountSelect
    using (select data, count(*) as cnt from dbo.split('A,B,C,A', ',') group by data) d on ProductViewsCountSelect.ProductId = d.data
    when matched   
        then update set ProductViewsCountSelect.Count = ProductViewsCountSelect.count + cnt
    when not matched 
         then insert (ProductId, [TimeStamp], ViewType, [Count]) values( d.data, @TimeStamp, @ViewType, cnt); 
```

# xml - 为什么在 vb.net 中构建 XML 文档时会出现此错误

> ID：10955309
> 
> 赞同：0
> 
> 时间：2012-06-08T19:56:46.543
> 
> 标签：xml, vb.net

我正在尝试构建一个 Web 服务，它应该从现有的 XML 中构建一个新的 XML。

代码如下：

```
 <WebMethod(CacheDuration:=0, Description:="GroveHallFromRss")> _
    Public Function GroveHallFromRss() As XmlDocument
        Dim webClient As System.Net.WebClient = New System.Net.WebClient()
        Dim ourUrl As String = "http://123.example.org/RSSSyndicator.aspx?type=N&range=currentyear&expire=Y&location=2-7-165&rssid=18"

    Dim stream AS Stream
    stream = webClient.OpenRead(ourUrl)
    Dim xmlDocument AS XmlDocument = new XmlDocument()
        xmlDocument.Load(stream)

        Dim myXml As XmlDocument = new XmlDocument()
        Using writer As XmlWriter = myXml.CreateNavigator().AppendChild()
            writer.WriteStartDocument()
            writer.WriteStartElement("document")
            For Each item As System.Xml.XmlElement In xmlDocument.Item("item")
                writer.WriteStartElement("event")
                writer.WriteElementString("title", item.Item("title").Value)
                writer.WriteElementString("link", item.Item("link").Value)
                writer.WriteElementString("description", item.Item("description").Value)
                writer.WriteEndElement()
            Next
            writer.WriteEndElement()
            writer.WriteEndDocument()
        End Using

        Return myXml 
```

它给了我这样的错误：

> System.NullReferenceException：对象引用未设置为对象的实例。在 Portal.GroveHallFromRss()

问题似乎在以下范围内：

> 对于每个项目作为 System.Xml.XmlElement 在 xmlDocument.Item("item")

但我不确定是什么原因造成的。谢谢！

这是 XML：

```
<rss version="2.0">
-
<channel>
-
<title>
title 123
</title>
<cf:treatAs>list</cf:treatAs>
<link>http://123/default.aspx</link>
<description>RSS Feed 123 Events Calendar</description>
-
<item>
<title>New 123 (6/18/2012)</title>
-
<link>
http://123.aspx?view=EventDetails&eventidn=9751&information_id=19501&type=&rss=rss
</link>
-
<description>
<table cellpadding="5" cellspacing="0" border="0"><tr><td valign="top"><table cellpadding="0" cellspacing="0" border="0"><tr><td style="padding-bottom:1px;"><b>Start Date:</b>&nbsp;</td><td style="padding-bottom:1px;">6/18/2012</td><td>&nbsp;<b>Start Time:</b>&nbsp;</td><td>8:00 AM</td></tr><tr><td><b>End Date:</b>&nbsp;</td><td>6/18/2012</td><td>&nbsp;<b>End Time:</b>&nbsp;</td><td>4:00 PM</td></tr></table><br />123<br />Room: 123<br /><br />nil</td></tr></table>
</description>
<pubDate>Mon, 18 Jun 2012 12:00:00 GMT</pubDate>
<category>06/18/2012</category>
</item>
+
<item>
<title>123 Orientation (6/19/2012)</title>
-
<link>
http://123/EventList.aspx?view=EventDetails&eventidn=9770&information_id=19539&type=&rss=rss
</link>
-
<description>
<table cellpadding="5" cellspacing="0" border="0"><tr><td valign="top"><table cellpadding="0" cellspacing="0" border="0"><tr><td style="padding-bottom:1px;"><b>Start Date:</b>&nbsp;</td><td style="padding-bottom:1px;">6/19/2012</td><td>&nbsp;<b>Start Time:</b>&nbsp;</td><td>8:00 AM</td></tr><tr><td><b>End Date:</b>&nbsp;</td><td>6/19/2012</td><td>&nbsp;<b>End Time:</b>&nbsp;</td><td>4:00 PM</td></tr></table><br />123<br />Room: 106<br /><br />nil</td></tr></table>
</description>
<pubDate>Tue, 19 Jun 2012 12:00:00 GMT</pubDate>
<category>06/19/2012</category>
</item>
-
<item>
<title>123 (6/20/2012)</title>
-
<link>
http://123/EventList.aspx?view=EventDetails&eventidn=9789&information_id=19577&type=&rss=rss
</link>
-
<description>
<table cellpadding="5" cellspacing="0" border="0"><tr><td valign="top"><table cellpadding="0" cellspacing="0" border="0"><tr><td style="padding-bottom:1px;"><b>Start Date:</b>&nbsp;</td><td style="padding-bottom:1px;">6/20/2012</td><td>&nbsp;<b>Start Time:</b>&nbsp;</td><td>8:00 AM</td></tr><tr><td><b>End Date:</b>&nbsp;</td><td>6/20/2012</td><td>&nbsp;<b>End Time:</b>&nbsp;</td><td>4:00 PM</td></tr></table><br />123 Grove Hall<br />Room: 106<br /><br />nil</td></tr></table>
</description>
<pubDate>Wed, 20 Jun 2012 12:00:00 GMT</pubDate>
<category>06/20/2012</category>
</item>

</channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:31:21.460

**发布的 xml 格式不正确。**

具体来说，某些`link`元素包含无效字符。有效的 Xml 仅允许将 & 字符 ( `&`) 作为 xml 实体的一部分，因此您必须在链接元素中对 url 进行编码，以便 url 的查询参数如下所示（作为示例）：

> &eventidn=9770

代替：

> &eventidn=9770

Xml 解析规则*要求*xml 解析器将格式正确的错误视为致命错误，因此您的 XmlDocument 对象必须抛出异常并且无法继续完成文档。

阅读其他答案，您似乎还没有阅读任何链接元素，因此您可能还有另一个问题，但请记住我的话：解决另一个问题，这个问题正在等着您。如果你真的很幸运，xml 的编码是正确的，这只是你用来查看它的任何工具的效果，但这总是值得检查的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:00:48.987

如果它在那条线上失败，那么很可能`xmlDocument.Item("item")`是空的。

您处于错误的节点级别。您正在比树更靠前的位置搜索“项目”。您需要获取该项目附加到的节点才能通过 Item() 访问它。您也许可以使用路径，例如“rss/channel/item”。不完全确定该语法。但这是您的问题，您在文档级别而不是在它附加到的节点级别搜索项目。这就像试图在一回合内离开 3 个转弯处。

希望这可以帮助。

编辑：我将您的 xml 加载到 XMLDocument 中并抓取如下项目：

```
Sub Main()
    Dim xdoc As XmlDocument

    xdoc = New XmlDocument()
    xdoc.Load(Environment.GetFolderPath(Environment.SpecialFolder.Desktop) & "\test.xml")

    For Each e As XmlElement In xdoc.DocumentElement.SelectSingleNode("channel")
        If e.Name = "item" Then
            MsgBox("I am an item")
        End If
    Next

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T20:44:22.277

您正在迭代的某些节点`foreach`可能是元素以外的其他东西（如空格和其他）。作为人类，您只看到元素，而不是文档中的其他“技术”节点。

只需检查`item`不是`null`并正常执行其余循环即可。

注意：`item As System.Xml.XmlElement`并不意味着您将`XmlElement`在循环中仅获得 -s ，而是运行时将尝试将当前 xml 节点转换为`XmlElement`. 如果这种转换的结果是`null`，这意味着当前节点不是一个`XmlElement`并且应该在处理中被跳过。

# math - 距离坐标 N 度范围内的边界框

> ID：10955313
> 
> 赞同：0
> 
> 时间：2012-06-08T19:56:52.450
> 
> 标签：math, geospatial, latitude-longitude, bounding-box

给定一个坐标，构造一个与该坐标相差 +/- N 度的边界框。边界框将由 lat_min、lat_max、lng_min 和 lng_max 确定。我在 Java 中有以下代码（假设所有输入都以度为单位）：

```
static class BoundingBox
{
    private final double lat_min;
    private final double lng_min;
    private final double lat_max;
    private final double lng_max;

    public BoundingBox(double lat, double lng, double N)
    {
        this.lat_min = lat - N;
        this.lat_max = lat + N;
        this.lng_min = lng - N;
        this.lng_max = lng + N;
    }

    public boolean contains(double lat, double lng)
    {
        if (lat_max < lat)
            return false;

        if (lat_min > lat)
            return false;

        if (lng_max < lng)
            return false;

        if (lng_min > lng)
            return false;

        return true;
    }
} 
```

这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:58:45.233

边界框是包含给定对象的矩形棱柱。[最小边界框](http://en.wikipedia.org/wiki/Minimum_bounding_box)是体积或表面积最小的边界框。

# mysql - 我可以在数据库运行时修改 cnf 文件吗？

> ID：10955316
> 
> 赞同：0
> 
> 时间：2012-06-08T19:57:10.840
> 
> 标签：mysql

我有一个需要一个新的 Innodb 文件的 mysql 数据库。我知道需要关闭数据库，修改cnf并重新启动数据库。当前有一个流程可以关闭数据库以进行夜间冷备份。我的问题是，我现在可以在数据库启动时修改 cnf 文件并期待今晚晚些时候重新启动以获取更改吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:01:09.730

当然——MySQL 不会写入配置文件。只需确保在重新启动时就在身边，以确保它在新配置下正确恢复！

# android - 一个按钮的两个 OnClickListeners

> ID：10955318
> 
> 赞同：-1
> 
> 时间：2012-06-08T19:57:28.600
> 
> 标签：android, event-handling, buttonclick, onclicklistener

我将如何去创建多个`OnClickListener`一对一`Button`。假设我有一个应用程序，它在第一次单击时开始录制音频，在下次单击时停止录制。我该怎么做呢？

我尝试使用两个`OnClickListeners`，但没有奏效。

**编辑**

我正在尝试对我当前的应用程序进行更多实现。如果正在录制音频，我正在尝试在运行时更改按钮上的文本。我希望按钮上的文字说录音.. 1 秒后它应该说录音...。这应该在音频录制的整个过程中发生。我尝试实现这一点，但我无法让它工作。这是我的代码：

```
audio.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {

 if(audioRecording == false){
     audio.setText("Recording..");
     startRecording(); 
     audioRecording = true;

        while(!audio.isPressed()){
          audio.setText("Recording...");
         try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        attachVoice.setText("Recording..");
          }

 }

 else{
     audio.setText("Press to Record");
     stopRecording(); 
     audioRecording = false;

 }

    }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T20:02:31.143

你可以用很多方法做到这一点，关键是你必须以某种方式保存应用程序的状态。这是一个简单的例子：

```
boolean audioRecording = false;

public void onButtonClick(View v){
     if(audioRecording){
         stopRecording();
         audioRecording = false;
     } else {
         recordAudio();
         audioRecording = true;
     }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T20:01:43.320

只需实现一个标志，以便您知道自己处于什么状态：

```
boolean status = true;
//...

//the Button OnCLickListener callback
public void onClick(View v) {
     if (status) {
        //start the player
        status = false;
     } else {
        // stop the player
        status = true;
     }
} 
```

**编辑 ：**

看看下面的代码是否有帮助：

```
boolean playerStatus = true;
boolean updaterStatus = true;
String[] recStrings = { "Recording..", "Recording.........." };
int i = 0;

// ...
b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                final Button b = (Button) v;
                if (playerStatus) {
                    playerStatus = false;
                    // start player
                    updaterStatus = true;
                    updateButton(b);
                } else {
                    // end player
                    playerStatus = true;
                    updaterStatus = false;
                    b.setText("Not recording");
                }
            }
        }); 
```

和`updateButton`方法：

```
private void updateButton(final Button btn) {
        if (updaterStatus) {
            btn.setText(recStrings[i % 2]);
            i++;
            btn.postDelayed(new Runnable() {

                @Override
                public void run() {
                    updateButton(btn);
                }

            }, 1000);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T20:14:43.497

对于您所解释的按钮应该是两个状态按钮，例如复选框，您可以更改与复选框关联的可绘制对象，请在此处查找：

[http://www.anddev.org/tutorial_change_look_of_checkbox-t4553.html](http://www.anddev.org/tutorial_change_look_of_checkbox-t4553.html)

基本上使用 onClick 方法中的复选框，您可以检查复选框是否被单击并执行一种方法，否则执行另一种方法

```
 @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(((CheckBox)v).isChecked())
            method1();
        else
            method2();
    }

    private void method2() {
        // TODO Auto-generated method stub

    }

    private void method1() {
        // TODO Auto-generated method stub

    } 
```

# jsf - 如何避免 ICEfaces 中的自动页面刷新？

> ID：10955319
> 
> 赞同：1
> 
> 时间：2012-06-08T19:57:32.527
> 
> 标签：jsf, icefaces, page-refresh

每次单击按钮，数据表都会刷新。我需要更改什么以避免刷新数据表？

```
<ice:dataTable id="dataList" style="width:100%;border-width:0px"
    columnWidths="30px, 100px;" border="1"
    value="#{bookService.model}" var="row" rows="25">

    <ice:column id="columnId">
        <f:facet name="header">
            <ice:outputText value="Lfd-Nr"></ice:outputText>
        </f:facet>
        <center>
            <ice:outputText value="#{row.lfdNr}"></ice:outputText>
        </center>
    </ice:column>

    <ice:column id="columnTitle">
        <f:facet name="header">
            <ice:outputText value="Anrede" />
        </f:facet>
        <center>
            <ice:outputText value="#{row.anrede.anredeText}" />
        </center>
    </ice:column>
</ice:dataTable>

<h:form id="formtest">
    <ice:commandButton id="btn" value="Click" />
</h:form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T08:39:15.360

如何使用应该在 jsf 生命周期中“退出”的[ajax 按钮（而不是提交表单）？](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=commandButton&skin=blueSky)

```
<a4j:commandButton value="click"> 
```

或从您那里调用一些方法`@ManagedBean`并重新渲染选定的组件（例如`form`）：

```
<a4j:commandButton value="click" render=":form" execute="#{bean.some_method}"/> 
```

**更新：（**打开一个新窗口）

```
<a4j:commandButton value="new" onclick="window.open('new.xhtml','newWindow','width=600, height=600');"/> 
```

# vba - 在当前电子邮件正文中打开 .rtf 附件并粘贴内容

> ID：10955322
> 
> 赞同：3
> 
> 时间：2012-06-08T19:57:47.923
> 
> 标签：vba, ms-access, outlook, automation

我们有一个 Access 数据库，它使用该`SendObject`方法将报告导出为电子邮件的附件。

我需要做的是打开附件，复制文本（带格式）并将其粘贴到生成的电子邮件正文中并删除文件。

我有删除附件并打开它的代码，但我不确定如何复制 Word 文档中的所有内容并将其粘贴回原始电子邮件。

任何帮助将不胜感激！如果有更简单的方法，请告诉我。

```
Sub olAttachmentStrip()
  Dim strFilename As String
  Dim strPath As String
  Dim olItem As Outlook.MailItem
  Dim olAtmt As Outlook.Attachments
  Dim olInspector As Outlook.Inspector
  Dim appWord As Word.Application
  Dim docWord As Word.Document

  strPath = "C:\temp\"

  Set olInspector = Application.ActiveInspector
  If Not TypeName(olInspector) = "Nothing" Then
    If TypeName(olInspector.CurrentItem) = "MailItem" Then
        Set olItem = olInspector.CurrentItem
        Set olAtmt = olItem.Attachments
            olAtmt.Item(1).SaveAsFile strPath & olAtmt.Item(1).DisplayName
            strFilename = strPath & olAtmt.Item(1).DisplayName
            'olAtmt.Item(1).Delete
    Else
    MsgBox "Something went horribly wrong."
    End If
  End If

  Set appWord = CreateObject("Word.Application")
  appWord.Visible = False 
  Set docWord = appWord.Documents.Open(strFilename)
  Stop  '<==  This is where I'm stuck!
  Set docWord = Nothing
  Set appWord = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T04:30:00.620

由于您已经有了提取附件的代码。下一步是简单地打开文件，复制完整的文本并将其粘贴到当前电子邮件中。

试试这个（**尝试和测试**）

```
Option Explicit

Sub Sample()
    Dim doc As Object, sel As Object
    Dim oWord As Object, oDoc As Object, wRng As Object

    '~~> Establish an EXCEL application object
    On Error Resume Next
    Set oWord = GetObject(, "Word.Application")

    '~~> If not found then create new instance
    If Err.Number <> 0 Then
        Set oWord = CreateObject("Word.Application")
    End If
    Err.Clear
    On Error GoTo 0

    '~~> Open the Attachement
    Set oDoc = oWord.Documents.Open(FileName:="C:\MyDocument.rtf", ConfirmConversions:=False, _
        ReadOnly:=False, AddToRecentFiles:=False, PasswordDocument:="", _
        PasswordTemplate:="", Revert:=False, WritePasswordDocument:="", _
        WritePasswordTemplate:="", Format:=0, XMLTransform:="", _
        Encoding:=1200)

    '~~> Get the comeplete text and copy it
    Set wRng = oDoc.Range
    wRng.Copy

    '~~> Close word Doc
    oDoc.Close

    '~~> Paste it in active email
    Set doc = ActiveInspector.WordEditor
    Set sel = doc.Application.Selection
    sel.Paste

    '~~> Clean up
    Set wRng = Nothing: Set oDoc = Nothing: Set oWord = Nothing
End Sub 
```

# objective-c - UIPickerViewDelegate 方法没有被调用

> ID：10955323
> 
> 赞同：0
> 
> 时间：2012-06-08T19:57:50.650
> 
> 标签：objective-c, ios, uitableview, uipickerview, uipickerviewcontroller

我创建了一个自定义视图，其中包含 a`UIPickerView`和 a`UITableViewCell`以显示选择器中当前选择的内容。My`PickerViewController`被设置为选择器的`delegate`和`dataSource`，并且我已经实现了`numberOfComponentsInPickerView:`、`pickerView: numberOfRowsInComponent:`和`pickerView: titleForRow: forComponent:`，但是当程序运行时选择器显示为空白，并且由于`NSLog`在方法中放置了调用，我发现这些方法永远不会被调用. 我不知道问题是什么，因为选择器似乎与`PickerViewController`.

对于我想要实现的基本功能，请查看 iOS 日历应用程序中的“开始和结束”视图。我试图准确地模仿这一点，但只使用一个`UITableViewCell`而不是三个。

**PickerViewController.h**

```
#import <UIKit/UIKit.h>

@interface PickerViewController : UIViewController

@property (weak, nonatomic) IBOutlet UITableViewCell *pickerSelection;
// Property to dynamically determine what content to display in the picker.
@property (nonatomic) BOOL userIsChoosingClass;

@end 
```

**viewDidLoad**

```
- (void)viewDidLoad {
    [super viewDidLoad];
    NSLog(self.thePicker.delegate.description);
    if (self.userIsChoosingClass) {
        self.pickerSelection.textLabel.text = @"Class";
    } else {
        self.pickerSelection.textLabel.text = @"Major";
    }
} 
```

**选取器视图数据源方法**

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView
numberOfRowsInComponent:(NSInteger)component {
    size_t numberOfRows = 0;

    if (self.userIsChoosingClass) {
        numberOfRows = [self.brain classChoicesForSignUp].count;
    } else {
        numberOfRows = [self.brain majorChoicesForSignUp].count;
    }

    return numberOfRows;
} 
```

**选择器视图委托方法**

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row
            forComponent:(NSInteger)component {
    NSLog(@"Picker view delegate method called");
    NSString *title;

    if (self.userIsChoosingClass) {
        title = [[self.brain classChoicesForSignUp] objectAtIndex:row];
    } else {
        title = [self.majorChoices objectAtIndex:row];
    }

    return title;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:21:12.500

如果您的 numberOfRows... 数据源方法返回 0，那么您的委托方法将永远不会被调用 - 如果选择器认为它没有任何要显示的行，它将不会询问行的标题。

# sql-server - TSQL 索引碎片查询返回令人困惑的数据

> ID：10955329
> 
> 赞同：1
> 
> 时间：2012-06-08T19:58:17.460
> 
> 标签：sql-server, tsql, fragmentation

我有一个非常简单的标准查询来显示数据库中索引的碎片，如下所示：

```
SELECT  DB_NAME(DB_ID()) AS DatabaseName,
    OBJECT_NAME(ddips.[object_id]) AS TableName,
    ind.[name] AS IndexName,
    ddips.index_type_desc AS IndexType,
    ddips.avg_fragmentation_in_percent AS FragmentationPercentage,
    ddips.fragment_count AS FragmentCount,
    ddips.avg_fragment_size_in_pages AS AvgFragmentSizeInPages,
    ddips.page_count AS [PageCount]
FROM    sys.dm_db_index_physical_stats (DB_ID(), null, null, null, null) AS ddips
    INNER JOIN sys.indexes ind on ind.[object_id] = ddips.[object_id]
ORDER BY ddips.avg_fragmentation_in_percent DESC 
```

然而，当我运行它时，我看到完全相同的数据 - 相同的表名、索引名和索引类型 - 以不同百分比的碎片返回多次。下面是一个例子：

![碎片化](../Images/f1593e31a8ae5527facaa0600534c0d9.png)

我不明白这些结果。当我在 SSMS 中打开表时，打开索引，然后转到 Fragmentation 页面，它告诉我最低的数字 1.71% 是碎片。所有这些其他碎片数字来自哪里？谁能帮助解释这些结果？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:14:41.157

您正在两个视图中对 object_id 进行连接，这不是唯一值。object_id 值的多次出现意味着多行连接。您需要将 index_id 包含到连接条件中。编辑：是的，马丁史密斯说的！

# objective-c - 不同方法中的变量值

> ID：10955335
> 
> 赞同：0
> 
> 时间：2012-06-08T19:58:32.597
> 
> 标签：objective-c, variables

我的问题很简单（对不起我的英语，我说西班牙语）

我有

```
NSString *ClaseUsuario; 
```

和

```
@property (strong, nonatomic) NSString *ClaseUsuario; 
```

我有一个方法可以改变我的变量的值

```
-(IBAction)setLabelEdad{
int val=(int)[botonEdad value];
if(val>0 && val<22){ClaseUsuario=@"C";}
if(val>=22 && val<35){ClaseUsuario=@"B";}
if(val>=35){ClaseUsuario=@"A";}

NSLog(ClaseUsuario);

} 
```

但我的问题是，当我从另一种方法调用我的变量时，答案是 NULL

```
-(IBAction)VerOfertas{
NSLog(@"%@%@",@"Ofertas usario tipo: ",ClaseUsuario);   
} 
```

我需要保存上面方法分配的值，请帮忙！非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:07:50.747

这里有几件事要解决：

为您的属性使用前导小写字母：`claseUsuario`. 这对 KVC 很重要。

根本不要声明 ivar。只需使用

```
@syntheisze claseUsuario=_claseUsuario; 
```

（注意前导下划线。除非您正在为非常旧的系统编写代码，否则很少有理由再显式声明实例变量。）

除了 in`init`和`dealloc`，始终使用访问器。所以应该是这样`self.claseUsuario = @"C";`。这将确保内存管理正常工作。

一般来说，你`NSLog`应该是这种形式：

```
NSLog(@"Ofertas usario tipo: %@", self.claseUsuario); 
```

不要`IBAction`用前导命名你的`set`。这可能会使 KVC 感到困惑，因为它看起来像一个访问器。

问题的可能实际原因`setLabelEdad`是从未调用过，或者您`claseUsuario`在其他地方清除，或者您正在查看错误的对象。放置一个断点`setLabelEdad`来测试这些。

# performance - GPU 的计算能力是否受到限制？

> ID：10955337
> 
> 赞同：0
> 
> 时间：2012-06-08T19:58:44.723
> 
> 标签：performance, parallel-processing, cuda, hardware, gpu

抱歉标题含糊。

我编写了一个内核来模拟 3D 热传递。我遇到的问题是在 8 核 Dell Studio XPS 上并行运行的程序版本超过了我的 GTS-240 GPU。我尝试了很多方法来让它运行得更快，但我得出的结论是，只是计算本身太大了。计算大约有 35 个 FLOP，我只是为模拟中的每个单元启动一个线程。尽管如此，我在 GPU 上只能获得大约 3340 万个单元/秒，而在 CPU 上只能获得 4040 万个/秒。据我了解，GPU 擅长于这样的任务，每个时间步有 170 万个单元，每个单元都需要对它们进行计算。

每次计算我也有 28 个数组访问，都在普通的 GPU 内存中。

这是计算。我不会发布真实的东西——这不是最高机密，只是没有必要。以“f”为前缀的变量是浮点数，“i”表示整数。

```
f_celldata[iA] =(-f_constA[iA-iB] * (f_mutA[iA] - f_mutA[iA-iB]) / f_constB[iA-1] + 
                  f_constA[iA]    * (f_mutA[iA+iB] - f_mutA[iA]) / f_constB[iA]) * (1.0 / f_constB[iA]) + 
                 (-f_constA[iA-iC] * (f_mutA[iA] - f_mutA[iA-iC]) / f_constB[iA-1] + 
                   f_mutA[iA] * (f_constA[iA+*iC] - kern_T_mat[linOffset]) / kern_dy_e[y]) * (1.0  /kern_dy_c[y]) + 
                  (-f_constA[iA-1] * (f_mutA[iA] - f_mutA[iA-1]) / f_constB[iA-1] + 
                    f_constA[iA] * (f_mutA[iA+1] - f_mutA[iA]) / f_constB[iA]) * (1.0 / f_constB[iA]); 
```

显然，当我在这里写下这篇文章时，我有点草率。实际上，计算尽可能简单，还有更多变量，在这里，为了简单起见，我做了同样的计算。

我希望在 GPU 编程方面比我更有经验的人能给我一些建议。计算量是否太大而无法使用 GPU 进行？单独的单个计算（数组访问和 FLOP 一起）每个时间步需要 35 毫秒。这或多或少是典型的吗？我真的不明白我怎样才能让它更快。特斯拉的工作会更快吗？大约快多少？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T23:23:47.040

不，GPU 在进行更大计算的能力方面不受限制。

没有看到实际代码很难确定。您提供的示例唯一明显错误的是 1.0/x 部分。“1.0”是双精度，NVIDIA GPU的双精度浮点性能远低于单精度。此外，它甚至不应该在您的 GTS 240 上编译，因为它是计算能力 1.1，并且根本不支持双精度。

无论如何，您看到的性能几乎可以肯定是由于全局内存瓶颈。200 系列没有强大的缓存功能，您必须采取特殊措施来优化内存访问。（这部分适用于较新的 GPU，但程度较小。）您需要了解代码的内存访问模式并尽量减少全局内存访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:04:00.767

GPU上有一个内存层次结构。您希望确保您的内存访问尽可能快，因为您的 IO 带宽似乎是瓶颈。

您可能希望研究纹理内存以改进空间局部性和缓存。

![在此处输入图像描述](../Images/f26cdc101341ca0e550d410cd8c1ae8d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T21:48:39.953

![费米记忆架构](../Images/014e8b7a1ede8f9deb7bb60682d49016.png)

作为@tskuzzy 发布的内存图的替代方案，我从 Nsight 分析器中获取了它。它显示了 Fermi 上的内存架构的概述，包括哪些内存空间支持每种类型的指令（最接近内核的行）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T17:34:03.200

GPU 在某些事情上做得非常好，而在某些事情上做得非常糟糕。诀窍是编写代码以利用他们做得好的地方，并尽可能少地做他们做得不好的事情。

我怀疑，但由于您没有提供任何代码，因此无法判断您的瓶颈与 GPU 进行计算的速度无关。它将是以下之一：

*   您将大部分时间花费在将数据移入/移出 GPU 上。
    *   即您的内核很简单，几乎不需要时间来执行，但是加载源数据并返回结果需要时间。
    *   GPU 喜欢在单个数据集上完成大量工作。
*   您正在使 GPU 与 CPU 同步工作，而您的 CPU 受限。
    *   如果你有一个 CPU 循环等待 GPU 完成，准备下一组工作，然后再次启动 GPU，那么很容易在 CPU 上遇到瓶颈。最好利用 GPU 正在工作的时间为 GPU 准备下一组工作，而不是仅仅等待。
*   您没有要求足够的并行线程来完成这项工作。
    *   GPU 速度很快，因为它可以运行数百个线程。不是因为一个线程很快（不是）。
    *   如果你不能利用这一点，那就没有意义了。
*   您正在使用慢速类型的内存来存储变量。
    *   GPU 具有各种内存类型，这些内存类型具有不同的访问速度。小型、本地和快速；大型、全球性但缓慢。
    *   经常访问的变量希望尽可能快地存储在内存中。

可能令人惊讶的是，它不太可能是内核，而是会显示很多问题的主机代码，并且代码确实很重要。

# r - 在 R 中寻找一种更好的方法来按字段的一部分进行分组

> ID：10955340
> 
> 赞同：2
> 
> 时间：2012-06-08T19:58:48.277
> 
> 标签：r

我一直在寻找 R 中的一个命令，它允许我按字段中的一部分而不是整个字段进行分组。我想出了一个可行的解决方法，但它有点麻烦和笨拙。这是一个测试数据框

```
name.list = data.frame(Name=c("jeff banks", "phil lender", "jeff brooks",
"barbara holcomb", "danny jefferson"),Age=c(27,34,25,45,32))
name.list 
```

这是输出

```
 Name Age
1      jeff banks  27
2     phil lender  34
3     jeff brooks  25
4 barbara holcomb  45
5 danny jefferson  32 
```

我想识别其中包含“jeff”的所有名称整体，以便我可以将其用作一个组或分配一个虚拟变量。换句话说，附加到我的数据框是这样的：

```
 Name Age   Jeff.field
1      jeff banks  27       1
2     phil lender  34       0
3     jeff brooks  25       1
4 barbara holcomb  45       0
5 danny jefferson  32       1 
```

我想出了这个解决方案，但它不是很优雅

```
name.list2=name.list[grep("jeff",name.list$Name),]
name.list2$jeff.field=rep(1,dim(name.list2)[1])

name.list3=name.list[-grep("jeff",name.list$Name),]
name.list3$jeff.field=rep(0,dim(name.list3)[1])

name.list4=rbind(name.list2,name.list3)
name.list4 
```

这让我得到了这个数据框

```
 Name Age jeff.field
1      jeff banks  27          1
3     jeff brooks  25          1
5 danny jefferson  32          1
2     phil lender  34          0
4 barbara holcomb  45          0 
```

有谁知道更基本的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:05:11.760

干得好：

```
name.list$jeff.field <- grepl("jeff", name.list$Name)
name.list[order(name.list$jeff.field), ]

             Name Age jeff.field
2     phil lender  34      FALSE
4 barbara holcomb  45      FALSE
1      jeff banks  27       TRUE
3     jeff brooks  25       TRUE
5 danny jefferson  32       TRUE 
```

# c++ - Eclipse CDT C++ NULL 未解析

> ID：10955343
> 
> 赞同：1
> 
> 时间：2012-06-08T19:59:10.520
> 
> 标签：c++, eclipse-cdt

相关：[Eclipse CDT“无法解析符号 NULL”](https://stackoverflow.com/questions/7433448/eclipse-cdt-symbol-null-could-not-be-resolved)

我的印象是这`NULL`是 C++ 中的标准宏，不需要包含任何标题。另一方面，Eclipse 认为它不存在。

有什么方法可以提醒 Eclipse 我处于 C++ 模式而不是该文件的 C 模式，因此对 NULL 问题闭嘴？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T19:59:59.227

> 我的印象是 NULL 是 C++ 中的标准宏。

它是，但它不是语言的一部分。您仍然需要包含`<cstddef>`or`<cstdlib>`等​​。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T20:05:23.903

[为什么未声明 NULL？](https://stackoverflow.com/questions/924664/why-is-null-undeclared)

引用自该问题的最佳答案。

> NULL 不是 C 或 C++ 语言中的内置常量。事实上，在 C++ 中它或多或少已经过时了，只需使用普通文字 0 代替，编译器将根据上下文做正确的事情。
> 
> 否则，添加
> 
> ```
> #include <stddef.h> 
> ```
> 
> 获取 NULL 定义。
> 
> 更新：我有错误的标题，现在更正。谢谢！（引自 Unwind）

# https - 从安全网站获取数据

> ID：10955348
> 
> 赞同：0
> 
> 时间：2012-06-08T20:00:02.750
> 
> 标签：https

我正在开发一个项目，该项目需要通过解析每个网站的 html 并从标题标签和元描述中获取内容来提取每个网站的标题和描述。我成功并解析了来自普通网站的数据，但我的代码无法使用`https`协议打开网站，也无法解析其中的数据。我的代码有什么办法可以打开那些在 https 上运行的网站，如 blogger.com、irctc.co.in 等？

# extjs - 网格上的 ExtJS 4 “渲染器”列

> ID：10955349
> 
> 赞同：10
> 
> 时间：2012-06-08T20:00:05.400
> 
> 标签：extjs, extjs4.1

我有一个应该在列上执行渲染器的网格，但它不显示任何内容，也不识别记录。

**看法**

```
Ext.define('Ab.view.maquina.MaquinaList', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.maquinalist',
    store: 'Maquinas',
    tbar: [
        { text: _('Agregar'), action:'add'},
        { text: _('Editar'), action: 'upd'},
        { text: _('Eliminar'), action: 'del'}
    ],
    columns: [
        { text: _('Nombre'), flex: 1, dataIndex: 'nombre' },
         { text: _('Estado'), flex: 1, dataIndex: 'estado'},
        { text: _('Marca'), flex: 1, dataIndex: 'codigo', renderer: function(value, record){this.renderMarca(value, record)}} 
    ],
    renderMarca: function(value,record){
             console.log(value);  < show value
             console.log(record.get('nombre')); < error 
             return value; < don't show value on the column

    }    
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-08T20:42:34.457

记录没有正确记录在那里，因为渲染器函数的参数与您尝试使用的参数不同。来自[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-renderer](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-renderer)：

```
renderer: function (value, metaData, record, row, col, store, gridView) { 
```

您也没有从渲染器内部返回值。这解决了这两个问题：

```
{ 
  text: _('Marca'), 
  flex: 1, 
  dataIndex: 'codigo', 
  renderer: function(value, metaData, record, row, col, store, gridView){
    return this.renderMarca(value, record);
  }
} 
```

# xml - VB中的XML序列化

> ID：10955359
> 
> 赞同：0
> 
> 时间：2012-06-08T20:00:51.790
> 
> 标签：xml, xml-serialization

我有一个类“产品”。每个产品都有一个名称。它由“小部件”列表组成。每个小部件都有一个编号。每个 Widget 又包含一个 Widget 列表（可变深度）。最后有一个或多个“套接字”，每个“套接字”都有一个 SocketID 和一个长度。换句话说，最后一个 Widget 不是由另一个 Widget 组成，而是由 Sockets 组成。我想要的 XML 输出看起来像[这样](http://screencast.com/t/n4HZQuXhZJp)。

我已经尝试了我能想到的任何技巧来定义我的类 Product 以进行序列化（ArrayList、List(of Widget)、XMLInclude 等以实现该结果 - 没有成功。以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:07:03.977

在这里，您可以列出类（对象）的属性及其值。因此，在这一步之后，您只需将它们保存在您喜欢的格式的简单文本文件中。

```
Imports System.Reflection

Public Class Form1
    Inherits System.Windows.Forms.Form

#Region " Windows Form Designer generated code "

    Public Sub New()
        MyBase.New()

        'This call is required by the Windows Form Designer.
        InitializeComponent()

        'Add any initialization after the InitializeComponent() call

    End Sub

    'Form overrides dispose to clean up the component list.
    Protected Overloads Overrides Sub Dispose(ByVal disposing As Boolean)
        If disposing Then
            If Not (components Is Nothing) Then
                components.Dispose()
            End If
        End If
        MyBase.Dispose(disposing)
    End Sub

    'Required by the Windows Form Designer
    Private components As System.ComponentModel.IContainer

    'NOTE: The following procedure is required by the Windows Form Designer
    'It can be modified using the Windows Form Designer.  
    'Do not modify it using the code editor.
    Friend WithEvents lvwProperties As System.Windows.Forms.ListView
    <System.Diagnostics.DebuggerStepThrough()> Private Sub InitializeComponent()
        Me.lvwProperties = New System.Windows.Forms.ListView
        Me.SuspendLayout()
        '
        'lvwProperties
        '
        Me.lvwProperties.Dock = System.Windows.Forms.DockStyle.Fill
        Me.lvwProperties.FullRowSelect = True
        Me.lvwProperties.HeaderStyle = System.Windows.Forms.ColumnHeaderStyle.Nonclickable
        Me.lvwProperties.Location = New System.Drawing.Point(0, 0)
        Me.lvwProperties.Name = "lvwProperties"
        Me.lvwProperties.Size = New System.Drawing.Size(292, 273)
        Me.lvwProperties.Sorting = System.Windows.Forms.SortOrder.Ascending
        Me.lvwProperties.TabIndex = 0
        Me.lvwProperties.View = System.Windows.Forms.View.Details
        '
        'Form1
        '
        Me.AutoScaleBaseSize = New System.Drawing.Size(5, 13)
        Me.ClientSize = New System.Drawing.Size(292, 273)
        Me.Controls.Add(Me.lvwProperties)
        Me.Name = "Form1"
        Me.Text = "Properties"
        Me.ResumeLayout(False)

    End Sub

#End Region

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        ' Make column headers.
        lvwProperties.Columns.Clear()
        lvwProperties.Columns.Add("Property", 10, HorizontalAlignment.Left)
        lvwProperties.Columns.Add("Type", 10, HorizontalAlignment.Left)
        lvwProperties.Columns.Add("Value", 10, HorizontalAlignment.Left)

        ' List the properties.
        ' Use the class you want to study instead of Form1.
        Dim property_value As Object
        Dim properties_info As PropertyInfo() = _
            GetType(Form1).GetProperties()
        lvwProperties.Items.Clear()
        For i As Integer = 0 To properties_info.Length - 1
            With properties_info(i)
                If .GetIndexParameters().Length = 0 Then
                    property_value = .GetValue(Me, Nothing)
                    If property_value Is Nothing Then
                        ListViewMakeRow(lvwProperties, _
                            .Name, _
                            .PropertyType.ToString, _
                            "<Nothing>")
                    Else
                        ListViewMakeRow(lvwProperties, _
                            .Name, _
                            .PropertyType.ToString, _
                            property_value.ToString)
                    End If
                Else
                    ListViewMakeRow(lvwProperties, _
                        .Name, _
                        .PropertyType.ToString, _
                        "<array>")
                End If
            End With
        Next i

        ' Size the columns to fit the data.
        lvwProperties.Columns(0).Width = -2
        lvwProperties.Columns(1).Width = -2
        lvwProperties.Columns(2).Width = -2

        ' Size the form.
        Dim new_wid As Integer = 30
        For i As Integer = 0 To lvwProperties.Columns.Count - 1
            new_wid += lvwProperties.Columns(i).Width
        Next i
        Me.Size = New Size(new_wid, Me.Size.Height)
    End Sub

    ' Make a ListView row.
    Private Sub ListViewMakeRow(ByVal lvw As ListView, ByVal item_title As String, ByVal ParamArray subitem_titles() As String)
        ' Make the item.
        Dim new_item As ListViewItem = lvw.Items.Add(item_title)

        ' Make the sub-items.
        For i As Integer = subitem_titles.GetLowerBound(0) To subitem_titles.GetUpperBound(0)
            new_item.SubItems.Add(subitem_titles(i))
        Next i
    End Sub
End Class 
```

# mysql - 尝试在 Mac OSX Lion 上安装 mysql 客户端 gem 时出现 Rails 错误

> ID：10955360
> 
> 赞同：0
> 
> 时间：2012-06-08T20:01:02.430
> 
> 标签：mysql, ruby-on-rails, database-connection

我已经通过 MAMP 设置了 mysql 服务器。

但是在尝试安装 mysql Rails 客户端（gem install mysql2）时，出现以下错误：

> ```
>  ERROR: Failed to build gem native extension.
>     /Users/krisgandhi/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
>     checking for mysql_query() in -lmysqlclient... no
>     checking for main() in -lm... yes
>     checking for mysql_query() in -lmysqlclient... no
>     checking for main() in -lz... yes
>     checking for mysql_query() in -lmysqlclient... no
>     checking for main() in -lsocket... no
>     checking for mysql_query() in -lmysqlclient... no
>     checking for main() in -lnsl... no
>     checking for mysql_query() in -lmysqlclient... no
>     checking for main() in -lmygcc... no
>     checking for mysql_query() in -lmysqlclient... no
>     *** extconf.rb failed ***
>     Could not create Makefile due to some reason, probably lack of necessary libraries and/or headers.  Check the mkmf.log file for more details.  You may need configuration options. 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:04:56.353

我认为你应该从 MAMP 中删除 mysql。并尝试：

```
brew install mysql 
```

或者从这里安装，找到合适的 dmg：

[http://dev.mysql.com/downloads/mysql/](http://dev.mysql.com/downloads/mysql/)

# sql - SQL Server 异常值筛选器

> ID：10955363
> 
> 赞同：0
> 
> 时间：2012-06-08T20:01:06.443
> 
> 标签：sql, sql-server, statistics

我正在寻找一种方法来对 SQL Server 中的一列数据执行基本的异常值过滤。

### 背景

我有一个日志表，其中包含各种操作以及这些操作发生的时间。我正在寻找一些围绕两种不同日志事件类型之间平均时间的数据。我正在使用一个简单的查询（`DATEDIFF`在时间戳之间使用）来捕获这些事件之间的持续时间。目前，我使用一个`AVG`函数来获取这两个事件发生的所有配对实例的平均时间。

### 问题

我想在使用以下方法进行平均之前对数据集执行异常值过滤：

```
Y is an outlier if Y < (Q1 - 1.5 * IQR) 
    OR
Y is an outlier if Y > (Q3 + 1.5 * IQR)

Where Q1 is the first quartile boundary value, 
      Q3 is the third quartile boundary value,
      and IQR is Q3 - Q1. 
```

我的问题是首先 - 在 SQL 中确定四分位数的最佳方法是什么，其次是 - 有没有一种方法可以将其存储为它自己的聚合函数来过滤然后平均？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T21:32:37.677

假设您使用的是 SQL Server 2005 或更高版本，因为您想要做的事情需要窗口函数。

```
select t.*
from t cross join
     (select min(y) as q1, max(y) as q3, max(y) - min(y) as iqr
      from (select y,
                   row_number() over (order by y) as seqnum,
                   count(*) over (partition by null) as total
            from t
           ) t
      where seqnum = cast(total*0.25 as int) or seqnum = cast(total*0.75 as int)
     ) qs
 where (y < q1 - 1.5*iqr) or (y > q3 + 1.5*iqr) 
```

关于这是如何工作的一些注释。qs 子查询显式计算四分位数——通过对行进行排序（按 y）并获取数据中 25% 和 75% 的行的值。请注意，比较会将序列号与总行数乘以该分数*转换回整数*。

group by 只是将这些值放在一行中，用于每次计算。where 子句是您要申请排除的逻辑。

# menu - 如何制作一个开始静态然后随您滚动的菜单？

> ID：10955371
> 
> 赞同：0
> 
> 时间：2012-06-08T20:01:49.737
> 
> 标签：menu, static, scroll, floating, motion

如何创建一个从静态开始的菜单，然后当您到达页面中的某个点时开始滚动？

例子：

[http://techcrunch.com/](http://techcrunch.com/)

[http://www.beyonceonline.com](http://www.beyonceonline.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T21:46:12.273

我猜想将菜单设置为 head 标签中的固定 div，使内容成为 100%x100% 动态 div，顶部边距为 50px（菜单高度不应超过 50px，但这只是我的意见），然后设置菜单 z-index= 1; 并且内容z-index= -1；在你的 CSS 中。

# scala - 用于集成 TDD/BDD 的 Play 2.0 数据库模型生成

> ID：10955373
> 
> 赞同：2
> 
> 时间：2012-06-08T20:01:59.367
> 
> 标签：scala, playframework, playframework-2.0

我们正在使用 Scala 中的 Play 2.0 框架做我们的第一个项目。我们想知道是否有一个（或多个）现有的最佳实践或库来从集成和端到端测试的“给定”部分生成测试数据？

例如，在 Rails 世界中，可能有一个 cucumber step `GIVEN there are 10 users who like chocolate`，它在后台将使用 FactoryGirl 或类似的库在数据库中生成这些模型；然后，您可以指望在测试运行之间自动清空测试数据库，并且测试在与实际应用程序不同的数据库实例中运行。

在使用 Play 2.0 的 Scala 世界中，我们正在考虑在 MySQL 上使用 Anorm。我们是否应该对我们的测试进行特殊处理以使用内存数据库（注意清除它），并编写代码来简单地在 GIVEN 块中创建和持久化案例类？

同样，Play“进化”是否会自动运行以在测试内存数据库中生成生产模式？

感谢您帮助避免在这里重新发明轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:28:47.850

自从我提出这个问题以来，我们已经确定了以下工作流程：

*   为模型使用带有案例类的 ScalaQuery 0.10.0-M1
*   `FakeApplication`与内存数据库一起用于单元和功能测试
*   使用真实的本地 MySQL 数据库进行集成和端到端测试
*   正如在这个问题中提出的那样，我们正在为每个 GIVEN 保留模型
    *   对于单元测试和功能测试，使用H2内存数据库，每个测试都有一个新的DB，非常好，速度快，与其他测试隔离，不需要清理
    *   对于集成和端到端测试，使用本地 MySQL 数据库，测试共享一个数据库。我们目前对每个 GIVEN 使用随机数据，以便测试不会相互影响，并定期清除我们的本地数据库

到目前为止，这个过程对我们来说效果很好，有一些问题是其他 StackOverflow 问题的主题（*待办事项：链接到这些问题在这里*）

回答我上面的问题：**是**的，每次启动内存数据库时都会运行演变。

# html - 输入类型提交仅在 chrome 中不起作用

> ID：10955376
> 
> 赞同：2
> 
> 时间：2012-06-08T20:02:21.087
> 
> 标签：html, google-chrome, cross-browser

我看过几个关于简单的问题

```
<input type="submit" /> 
```

按钮在 chrome 中不起作用，但我仍然没有找到解决方案。该按钮或表单的 onsubmit 没有附加 js/jq。此外，我说它不能在 chrome 和 webkit 中工作，因为它在 safari 以及 ie 和 ff 中工作。

有没有人找到关于如何处理这个错误的明确答案？

编辑：由于 b* 原因，这被否决了，所以这里是 chrome 控制台的屏幕截图，它抛出了导致*我*修复的错误。 ![在此处输入图像描述](../Images/e9f09cf38a91fc488a13813b9707c4a9.png)

我会把我的代表带回 tyvm :P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:19:00.257

好的，所以我找到了导致我的这个问题的实例崩溃的原因。使用 chrome 的控制台，我注意到我错误地使用了名为“size”的输入 type=text。这导致 chrome 抛出错误并且无法继续提交。我将 input[name="size"] 移出表单，它工作正常。我本可以更改该输入框的名称，但这需要我在很多情况下更改它，并且与该框相关的 ajax 并不关心它是否被命名为 size

教训：chrome 不喜欢输入的命名大小

就这些

# matlab - K 表示当肘部图是平滑曲线时找到肘部

> ID：10955378
> 
> 赞同：7
> 
> 时间：2012-06-08T20:02:29.863
> 
> 标签：matlab, cluster-analysis, k-means, variance

我正在尝试使用以下代码绘制 k 的肘部：

```
load CSDmat %mydata
for k = 2:20
    opts = statset('MaxIter', 500, 'Display', 'off');
    [IDX1,C1,sumd1,D1] = kmeans(CSDmat,k,'Replicates',5,'options',opts,'distance','correlation');% kmeans matlab
    [yy,ii] = min(D1');      %% assign points to nearest center

    distort = 0;
    distort_across = 0;
    clear clusts;
    for nn=1:k
        I = find(ii==nn);       %% indices of points in cluster nn
        J = find(ii~=nn);       %% indices of points not in cluster nn
        clusts{nn} = I;         %% save into clusts cell array
        if (length(I)>0)
            mu(nn,:) = mean(CSDmat(I,:));               %% update mean
            %% Compute within class distortion
            muB = repmat(mu(nn,:),length(I),1);
            distort = distort+sum(sum((CSDmat(I,:)-muB).^2));
            %% Compute across class distortion
            muB = repmat(mu(nn,:),length(J),1);
            distort_across = distort_across + sum(sum((CSDmat(J,:)-muB).^2));
        end
    end
    %% Set distortion as the ratio between the within
    %% class scatter and the across class scatter
    distort = distort/(distort_across+eps);

        bestD(k)=distort;
        bestC=clusts;
end
figure; plot(bestD); 
```

`bestD`（簇内方差/簇间方差）的值是

```
[
0.401970132754914
0.193697163350293
0.119427184084282
0.0872681777446508
0.0687948264457301
0.0566215549396577
0.0481117619129058
0.0420491551659459
0.0361696583755145
0.0320384092689509
0.0288948343304147
0.0262373245283877
0.0239462330460614
0.0218350896369853
0.0201506779033703
0.0186757121130685
0.0176258625858971
0.0163239661159014
0.0154933431470081
] 
```

该代码改编自 Lihi Zelnik-Manor，2005 年 3 月，加州理工学院。

聚类内方差与聚类间方差的绘图比率是一条平滑曲线，其拐点像曲线一样平滑，绘制`bestD`数据如上。我们如何找到此类图表的拐点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:27:28.880

I think that it is better to use only your "within class distortion" as optimization parameter:

```
%% Compute within class distortion
muB = repmat(mu(nn,:),length(I),1);
distort = distort+sum(sum((CSDmat(I,:)-muB).^2)); 
```

Use this **without** dividing this value by "distort_across". If you calculate the "derivate" of this:

```
unexplained_error = within_class_distortion;
derivative = diff(unexplained_error);
plot(derivative) 
```

The derivative(k) tells you how much the unexplained error has decreased by adding a new cluster. I suggest that you stop adding clusters when the decrease on this error is less than ten times the first decrease you obtained.

```
for (i=1:length(derivative))
    if (derivative(i) < derivative(1)/10)
         break
    end
end
k_opt = i+1; 
```

In fact the method to obtain the optimum number of clusters is application dependent, but I think that you can obtain a good value of k using this suggestion.

# c++ - 初始化 1000 个地图元素

> ID：10955382
> 
> 赞同：3
> 
> 时间：2012-06-08T20:02:41.277
> 
> 标签：c++, dictionary, std

正如我们可以将向量初始化为：

```
 vector<int> var1(2000,1); 
```

是否可以初始化地图；

```
 map<int, int>var2; 
```

对于 2000 个变量...我要初始化的原因有两个：

1.  如果我将来访问一个元素，例如 map[100]..我想要那个 map[100]=0
2.  第二个原因是我使用了一个最低优先级队列，它使用 map 的第二个值进行比较，即存储在 map[0]...map[100] 中的值。
3.  我不想使用向量，因为我的索引确实偏斜，这会导致大量空间浪费......即我的索引是 map[0]、map[30]、map[56]、map[100]、地图[120]、地图[190]等

有什么方法可以为 1000 个变量初始化映射...我也愿意使用任何其他数据结构。

也是初始化地图的传统方式，即

```
 map<int, int> m = map_list_of (1,2) (3,4) (5,6) (7,8); 
```

上述方法在我的情况下不起作用......还有其他方法吗？请帮助

编辑：我不能使用 for 循环：

这样，由于我的密钥分布是倾斜的，因此我不想要密钥保持固定。本质上以这种方式应用for循环与vector相同，这是我不想要的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:14:17.430

您可以使用代理而不是`int`地图中的 来执行此操作，如下所示：

```
#include <iostream>
#include <map>

using namespace std;

struct surrogate_int {
    int val;
    surrogate_int() : val(1) {}
    surrogate_int& operator=(const int v) { val=v; }
    operator const int() { return val; }
};

int main() {
map<int,surrogate_int> m;
    m[5] = 5;
    m[7] = 7;
    m[9] = 9;
    for (int i = 0 ; i != 10 ; i++) {
        cout << i << ":" << m[i] << endl;
    }
return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:05:39.727

您可以使用循环的老式方法：

```
map<int, int> var2;
for (int = 0; i < 1000; ++i) {
  var2[i] = 0;
} 
```

另一方面，如果该键在地图中尚不存在，则使用下标符号 ( `var2[x]`) 将添加该值及其默认值 (0 表示)。`int`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T20:21:10.803

您可能希望定义自己的具有嵌入优先级的数据类型（可能默认为 0），并定义一个使用该优先级对您类型的对象进行排序的比较器。就像是

```
class MyType {
  int val;
  int priority;
  MyType(int val, int priority = 0): val(val), priority(priority) {}
  bool operator<(MyType const& other) { return priority < other.priority; }
} 
```

然后，您可以创建该类型的优先级队列，完全避免使用映射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T20:23:15.680

提升::分配：

///来自[http://www.boost.org/doc/libs/1_35_0/libs/assign/doc/index.html](http://www.boost.org/doc/libs/1_35_0/libs/assign/doc/index.html)

```
#include <boost/assign/list_inserter.hpp> // for 'insert()'
#include <boost/assert.hpp> 
#include <string>
using namespace std;
using namespace boost::assign; // bring 'insert()' into scope

{
    map<string,int> months;  
    insert( months )
        ( "january",   31 )( "february", 28 )
        ( "march",     31 )( "april",    30 )
        ( "may",       31 )( "june",     30 )
        ( "july",      31 )( "august",   31 )
        ( "september", 30 )( "october",  31 )
        ( "november",  30 )( "december", 31 );
    BOOST_ASSERT( months.size() == 12 );
    BOOST_ASSERT( months["january"] == 31 );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T20:25:25.540

~~你根本不需要做任何事情。当您用于`operator[]`访问以前未插入的键时，会创建一个新值，初始化为 0 并返回一个引用。根本不需要初始化。~~

~~另~~请注意，当您将元素插入地图时，键是固定的，因此如果您决定插入 100 个元素，则键将是固定的，这在大多数用例中会使初始化无用。

我会避免初始化地图的复杂性，而是有一个辅助函数替换`operator[]`为：

```
int &getValue( std::map<int,int>& m, int key ) {
    return *m.insert( std::make_pair(key,1) ).first;
} 
```

无需预先分配节点。诀窍是`insert`如果该值已存在于地图中，则相当于查找，但如果该元素不存在，则将添加该元素。如果之前不存在，尝试插入 a`pair<int,int>(key,1)`将插入到容器中，但如果它已经存在，则将保持该值不变。`1`因为`insert`返回一个迭代器，我们可以使用它来获取对存储值的引用。

使用*就像*通过以下方式访问一样简单`operator[]`：

```
int x = getValue( mymap, 31 ); // 1 if 31 was not present in the map, else
                               // the value stored there.
getValue(mymap,31) = 5;        // Ugly, I know... but still simpler than providing
                               // an extra type, and preinitializing the container 
```

# powershell - 尝试使用 $ 变量参数化命令时出错

> ID：10955383
> 
> 赞同：1
> 
> 时间：2012-06-08T20:02:46.043
> 
> 标签：powershell, powershell-2.0, powershell-ise

我正在尝试使用以下代码片段执行命令：

```
foreach($package in (Get-Childitem *.dtsx | select-object -expand Name))
{
    DTUTIL /COPY SQL;"\$package" /DESTSERVER "$global:SSISServer" /FILE "$package" /Q
} 
```

但是，这样做会导致以下错误消息：

```
You must provide a value expression on the right-hand side of the '/' operator.
At C:\Projects\RiskOptix\Code\Deployment\BuildAll.ps1:267 char:39
+         DTUTIL /COPY SQL;"\$package" / <<<< DESTSERVER "$global:SSISServer" /FILE "$package" /Q
+ CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException
+ FullyQualifiedErrorId : ExpectedValueExpression 
```

我也试过

```
& DTUTIL "/COPY SQL;'\" + [System.IO.Path]::GetFileNameWithoutExtension($package) + "' /DESTSERVER '$global:SSISServer' /FILE $package" 
```

但现在这给了我

```
Microsoft (R) SQL Server SSIS Package Utilities
Version 10.50.1600.1 for 32-bit
Copyright (C) Microsoft Corporation 2010\. All rights reserved.

At least one of the DTS, SQL, or File options must be specified. 
```

但至少命令运行了，但它似乎没有收到我发送给它的任何参数......我猜我在这里忽略或未能掌握 PowerShell 的基本概念。我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:12:43.350

试试看`Invoke-Expression`：

```
Invoke-Expression "DTUTIL /COPY SQL;`"\$package`" /DESTSERVER `"$global:SSISServer`" /FILE `"$package`" /Q" 
```

首先评估整个字符串，然后像普通命令一样将结果传递给powershell

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T23:09:35.637

将变量作为参数传递给命令时，不需要引用它们。话虽如此，看起来您的命令中有一个流氓分号。分号在 PowerShell 中是可选的，但如果存在，则用作命令分隔符。在这种情况下，您需要引用带有分号的参数，或者为该参数创建一个变量：

```
Get-Childitem *.dtsx | 
    Select-Object -expand Name |
    ForEach-Object { DTUTIL /COPY "SQL;\$package" /DESTSERVER $global:SSISServer /FILE $package /Q 
```

我从来没有使用过`diutil`，所以不知道命令参数或语法。

# javascript - CSS3 关键帧动画是否比属性过渡更平滑？

> ID：10955389
> 
> 赞同：0
> 
> 时间：2012-06-08T20:03:28.417
> 
> 标签：javascript, css, mobile-safari, css-transitions, zepto

我有一个移动网络应用程序，它使用 Zepto 在页面之间创建过渡。动画在桌面上非常流畅，但在我的 iPhone 4 上却很不稳定。动画是否比过渡效果更好？除了控制粒度之外，动画和过渡之间有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:59:43.423

这不是一个过渡与动画的问题——这是一个变换与属性更改的问题。

内容可以通过多种不同的方式在屏幕上移动：最常见的两种是位置属性（left、top、margin-left、scroll-position 等）的变化和变换。在 iOS 上，现在在版本 5 中，位置属性更改在 CPU 上以像素增量完成 - 没有子像素补间，因此移动，特别是在较旧的非视网膜显示器上是生涩的。

相比之下，变换（尤其是 3D 变换）是在 GPU 上完成的，因此您可以获得非常平滑的运动和亚像素补间。

（请注意，一些桌面浏览器会进行 GPU 加速的位置属性更改——比如 IE9——所以这两种方法在视觉上没有区别）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:09:55.407

我不是专家，但我认为这是浏览器处理动画的方式。

它可能需要更复杂和扩展的方式来处理多状态动画提供，而不是简单的 2 状态转换。

# android - 正确处理精灵表的android调整大小

> ID：10955398
> 
> 赞同：0
> 
> 时间：2012-06-08T20:04:14.797
> 
> 标签：android, algorithm, image-processing, sprite-sheet

我有一些我正在开发的游戏的 1 行精灵表。我只在文件夹中提供它们`drawable-xhdpi`，我让操作系统在其他密度上为我调整大小。

这种方法会出现以下问题：

我有一个`1750`宽度精灵表（`xhdpi`宽度），包含`5`状态。所以每个单独的精灵都有宽度`1750 / 5 = 350`。开启`hdpi`时，它会调整大小`1313`，因此每个单独的精灵都有宽度`1313 / 5 = 262.6`。但是，这实际上是`262`，因为 android 不允许您在其中使用浮点数，所以`Rect`您必须`source`将`drawBitmap`.

这样做的问题是我无法正确提取单个精灵：绘制它们时，每个连续的精灵都会向右移动一点，这是我不想要的。有没有办法解决这个问题？我试过了，如果我手动调整它们的大小并在`1315`中提供这个调整大小的版本，它会起作用`drawable-hdpi`，但这会大大增加 APK 的大小，我不想这样做。

**注意 1：**每个单独的精灵在每一侧都被很多透明度包围（两边的数量相同）。我可以承受失去这种透明度的一两个像素，我只是不能让中间的不透明部分移位。

**注 2：**这不仅发生在`xhdpi -> hdpi`. 调整到其他密度等级时，同样的问题仍然存在。解决方案必须是通用的：对于任何调整大小系数（或至少`6/8`,`4/8`和`3/8`），对于任何宽度和任何数量的单个精灵。

为了更好地了解问题，假设这是需要绘制（自动调整大小的精灵）的空间：

```
| _ _ _ _ _ _ _ _ _ _ | 
```

这是第一帧的绘制方式（取自`0 * 262 to 0 + 262`精灵表，`*`代表我关心的非透明部分）：

```
| _ _ _ _ * * _ _ _ _ | 
```

这是第二帧的绘制方式（取自`1 * 262 to 262 + 262`精灵表）：

```
| _ _ _ _ _ & & _ _ _ | 
```

什么时候应该：

```
| _ _ _ _ & & _ _ _ _ | 
```

对于每个连续的帧，依此类推（至少我认为每个连续的帧。效果在实际设备上不太明显，但它就在那里）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:08:44.783

即使您手动调整精灵表的大小，您也会遇到这个问题。最简单的方法是为每个构建生成正确大小的精灵表（或者它不存在）。您需要将 spritesheet 的每一帧作为单独的、正确居中且尺寸尽可能大的图像文件。

现在，您可以使用[ImageMagick 的 CLI](http://www.imagemagick.org/script/command-line-tools.php)了。使用 shell 脚本

1.  [将每个大图像调整](http://www.imagemagick.org/script/convert.php)为精灵表所需的高度（缩放宽度以保持纵横比）
2.  使用[Montage](http://www.imagemagick.org/script/montage.php)命令生成您的精灵表。请注意，巧妙编写的脚本甚至可以生成矩形精灵表。

现在应该没有问题了。：） 希望这可以帮助。

# mysql - 不能将连接数据留在临时表中

> ID：10955399
> 
> 赞同：0
> 
> 时间：2012-06-08T20:04:17.053
> 
> 标签：mysql, join, left-join

我正在尝试将一些数据连接到临时表的右侧，但它没有按预期运行 - 当我离开它时，它不仅仅保留左侧的行......

```
CREATE TEMPORARY TABLE wploc
SELECT wp.name wpname, wp.id wpid, l.name lname, l.id lid 
FROM workplaces wp
JOIN locations l ON wp.id = l.workplace_id
ORDER BY wp.id;

SELECT * from wploc 
```

这给出了 390 个结果 - 我想要返回的唯一结果，并且我想加入来自不同表的更多结果，但是当我这样做时，我会从右侧的表中获得所有结果：

```
CREATE TEMPORARY TABLE wploc
SELECT wp.name wpname, wp.id wpid, l.name lname, l.id lid 
FROM workplaces wp
JOIN locations l ON wp.id = l.workplace_id
ORDER BY wp.id;

SELECT * from wploc
LEFT JOIN employees e ON wploc.lid = e.location_id 
```

这给出了`e`表中的所有结果，就好像我将它加入到`workplaces`表中一样。

我如何让`e`结果只显示已经存在的值`wploc`（即我在上面创建临时表的位置的 390 个结果）？

# html - CSS透明度使文本透明

> ID：10955400
> 
> 赞同：0
> 
> 时间：2012-06-08T20:04:19.283
> 
> 标签：html, css

任何能弄清楚为什么这不起作用的人的奖励道具。出于某种原因，我的文本“即内容、菜单、页脚”继承了不透明度，而不是处于 1 不透明度并且完全可见。

我已经将它设置为一个类和 ID，因为我已经尝试了这两种方式，并且实际上是 CSS 的初学者

```
<style type="text/css">
div#page {
  border:0px solid purple;
  width:700px;
  margin:0 auto;
  padding:5px;
  text-align:left;
  background-image:url('images/layout.jpg');
}
div {
  text-align:center;
}
div#header {
  border:2px solid red;
  width:695px;
  height:30px;
}
div#mostpop {
  border:2px solid black;
  width:195px;
  float:Right;
  margin:10px 0px 10px 5px;
  height:245px;
  background-color:#ffffff;
  opacity:0.7;
  filter:alpha(opacity=60); /* For IE8 and earlier */
}
div#recent {
  border:2px solid black;
  width:195px;
  float:Right;
  margin:10px 0px 10px 0px;
  height:245px;
  position: relative;
  left: 204px;
  top: 255px;
  background-color:#ffffff;
  opacity:0.7;
  filter:alpha(opacity=60); /* For IE8 and earlier */
}
div#content {
  border:2px solid black;
  width:495px;
  margin:10px 0 10px 0px;
  min-height:500px;
  background-color:#ffffff;
  opacity:0.7;
  filter:alpha(opacity=60); /* For IE8 and earlier */
}
div#footer {
  border:2px solid black;
  width:695px;
  height:30px;
  background-color:#ffffff;
  opacity:0.7;
  filter:alpha(opacity=60); /* For IE8 and earlier */
div.recent p
  {
  margin:30px 40px;
  font-weight:bold;
  color:#000000;
  opacity:1;
}
div.content p
  {
  margin:30px 40px;
  font-weight:bold;
  color:#000000;
  opacity:1;
}
div.mostpop p
  {
  margin:30px 40px;
  font-weight:bold;
  color:#000000;
  opacity:1;
}
div.footer p
  {
  margin:30px 40px;
  font-weight:bold;
  color:#000000;
  opacity:1;
}
div.header p
  {
  margin:30px 40px;
  font-weight:bold;
  color:#000000;
  opacity:1;
}
</style>
<div id="page">
 <!--<div id="header">Header</div>-->
 <div class="mostpop" id="mostpop"><p>Menu</p></div>
 <div class="recent" id="recent"><p>Menu</p></div>
 <div class="content" id="content"><p>Content</p></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T20:08:49.010

不透明度应始终从其父级继承。如果你有一个不透明度为 50% 的 div，然后你将 div 中的一些内容也设置为 50%，那么生成的内部 div 总体上将是 25%，我不完全确定，但我不认为它是可以使子元素比其父元素更不透明。

如果你只是想让 div 有一个透明的背景，那么你根本不需要使用 opacity，你可以使用`background: rgba(255, 255, 255, 0.5);`半透明的白色，同时保持前景文本颜色不变。旧版本的 IE 也有解决方法，但它应该适用于 ie9。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:21:49.113

CSS 不透明度有点不稳定——一旦你在一个元素上设置了特定的不透明度，该元素的所有子元素都被迫至少假设相同的不透明度。您无法使用子样式覆盖来解决此问题。

标准的解决方法是创建两个元素，并使用 z-index 将第二个元素绝对“置于”第一个元素之上。较低的元素获得您的部分透明度，较高的元素获得您的不透明样式。

```
<div style="position: relative">
   <div id="transparency" style="position: absolute; top: 0; left: 0">... transparent stuff here </div>
   <div id="regular_content" style="position: absolute; top:0;left:0;z-index:1">...</div>
</div> 
```

# css - Firefox 中的 svg 圆角剪裁（在 ie9 和 chrome 中工作正常）

> ID：10955401
> 
> 赞同：1
> 
> 时间：2012-06-08T20:04:35.447
> 
> 标签：css, firefox, svg, rounded-corners

如果有人可以帮助我解决以下问题，我将不胜感激：

当圆角添加到 svg 画布时，chrome 和 ie9 都正确执行剪切。然而，Firefox (v13.0) 会忽略圆角。我可以在 svg 中手动进行剪辑，但我想知道是否有更好的解决方案。

这是代码：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <svg id="paper" version="1.1" width="300" height="300" style="border-radius: 20px; background-color: red;">
        <rect x="0" y="0" width="400" height="400" fill="blue">
    </svg>
</body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:46:43.793

您也可以只使 svg rect 具有相同的圆角。

```
<svg id="paper" version="1.1" width="300" height="300" style="border-radius: 20px; background-color: red;">
  <rect id="background" width="100%" height="100%" rx="20" fill="red"/>
</svg> 
```

或者，如果您需要剪辑，就像您建议的那样：

```
<!DOCTYPE html>
<html>
<body>
<svg id="paper" version="1.1" width="300" height="300" clip-path="url(#clip)">
    <defs>
        <clipPath id="clip">
            <rect id="background" width="100%" height="100%" rx="20" fill="red"/>
        </clipPath>
    </defs>
    <rect width="100%" height="100%" fill="red"/>
</svg>
</body>
</html> 
```

# windows-8 - 屏幕关闭时 WinRT 应用程序能否继续运行？

> ID：10955403
> 
> 赞同：5
> 
> 时间：2012-06-08T20:04:53.160
> 
> 标签：windows-8, windows-runtime

屏幕关闭时 WinRT 应用程序能否继续运行？

我知道 WinRT 应用程序可以创建一个后台任务，即使在应用程序未运行时也会定期执行。方便，但不是我要的。我要问的是，当用户单击电源按钮并调用 Connected Standby 时，应用程序可以做些什么来保持活动状态。它可以要求一些特殊的能力吗？

示例 - 在 Windows Phone 中，有一个方便的*跑步和步行*应用程序，可以在运行时跟踪“你在哪里” - 然后记录你的距离等。即使屏幕关闭！打开屏幕，“我在哪里”地图是最新的。这种类型的应用程序在 WinRT 中是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:29:22.417

你为什么不使用后台任务来模拟你想要实现的目标。当用户再次启动应用程序时，您可以通过查看后台进程更新的商店将信息填充到最新数据中。只是一个想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T19:28:07.807

我最近一直在研究同样的事情，不幸的是，WinRT 似乎无法实现您想要做的事情。

# python - 如果没有分配值，如何为变量分配值，但是如果分配了值，则保留该值？

> ID：10955404
> 
> 赞同：1
> 
> 时间：2012-06-08T20:04:52.943
> 
> 标签：python, variables, recursion, python-2.7

我目前正在定义一个递归函数。它的目标是从最低到最高排序。当它开始时，我希望 A 等于 0，但我希望每次通过循环时值都增加一。这可能吗？这是到目前为止的功能。

```
def my_sort(number):
    if a is None:
        a=0
        b=1
    separated = number.split(',')
    if separated[a]<= separated[b]:
        while separated[0]<=separated[1]:
            a = a+1
            b = b+1
            my_sort(number)
        while separated[0]>separated[1]:
            my_sort(number)

    else:
        new=0
        separated[a] = new
        separated[a].replace(separated[a],separated[b])
        separated[b].replace(separated[b],new)

user_input= input("values to sort")
user_input= my_sort(user_input)
print user_input 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:10:49.087

更好的方法是将“a”和“b”作为参数传递给 my_sort()。然后你的初始调用是`my_sort(user_input, 0, 1)`，你的递归调用是`my_sort(number, a+1, b+1)`.

如果您不喜欢将 'a' 和 'b' 传递给 my_sort()，则定义`my_sort_helper()`使用 'a' 和 'b' 作为参数并将 my_sort 实现为`my_short_helper (input, 0, 1)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T20:47:09.743

回答你的问题只是：`a = a or 0`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T18:17:58.253

基于@GoZoner 的方法，我建议将`numbers`字符串预先拆分为一个列表并将其传递给您的`my_sort`函数而不是原始字符串。这样，对于递归，您可以使用参数的一部分调用它，如`nums[2:]`.

此外，由于`b`will always equal `a + 1`，您不需要它。

最后的建议：不要将排序结果分配给`user_input`. 一旦你改变它，它应该被称为别的东西。

# ruby-on-rails - 在 Rails 3.0 应用程序中，我无法在电子邮件中嵌入图像

> ID：10955406
> 
> 赞同：2
> 
> 时间：2012-06-08T20:04:57.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image, email

我正在尝试获取要在电子邮件中显示的 QR 码图像。我曾尝试在 SO 应用类似问题的解决方案，但无法使它们的任何变体起作用。我不想从网站上下载它。

在我的 user_mailer.rb 中：

```
 def email_qrcode(from_whom, to_addy)
    @from_whom = from_whom
    @to_addy = to_addy
    attachments["qrcode.png"] = File.read(Rails.root + "public/images/qrcode.png")
    mail( :to => to_addy, :from => @from_whom.email, :subject => "QR Code" )
  end 
```

在我的 email_qrcode.html.erb 中：

```
 <body>
    <p>Here is the QR Code:</p> 
    <p><img src="cid:qrcode.png"></p>
  </body> 
```

显示的电子邮件内容：

```
Here is the QR Code: (followed by the little blue question mark indicating no image) 
```

它也作为附件包含在内，但必须双击它才能打开它，这会破坏便利因素。

谢谢你的帮助。

* * *

## 更新：

良好的营销是为了消除所有障碍，使潜在客户更容易。无需查找并单击另一个链接即可显示 QR 码的次数越多，结果就越好。所以，要明确...

1.  附件在那里。在某些电子邮件客户端 Web 邮件服务器中，它甚至会显示为电子邮件下方的附件。但是，许多（也许大多数……不确定）电子邮件客户端和网络邮件服务器不会显示附件，除非您单击它们以打开它们……再次单击（障碍）。
2.  此外，许多客户端和网络邮件服务器会阻止图像的下载和显示，而无需单击链接以批准图像的显示。但是，其中许多客户端和服务器不会阻止嵌入在电子邮件中的图像。换句话说，放入下载图像的链接会增加显示被阻止的可能性，需要点击（潜在客户的障碍）才能打开图像。

## 另一个更新：解决方案

user_mailer.rb：

```
attachments.inline["qrcode"] = {
                                :data => File.read("#{Rails.root.to_s + '/public/images/qrcode.png'}"),
                                :mime_type => "image/png",
                                :encoding => "base64"
                              } 
```

email_qrcode.html.erb：

```
<%= image_tag( attachments['qrcode'].url, :id => 'qrcode' ) %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T04:47:24.703

在您的`email_qrcode`方法中，尝试更改：

`attachments.["qrcode.png"]`

到

`attachments.inline["qrcode.png"]`.

这应该让你朝着正确的方向前进。

# google-chrome - 获取当前选项卡并将其传递给 Chrome 扩展程序中的变量

> ID：10955408
> 
> 赞同：0
> 
> 时间：2012-06-08T20:04:59.973
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试创建一个返回当前选项卡 url 的函数：

```
function tabURL() {
var url="";
chrome.tabs.getSelected(null, function(tab) {url = tab.url;});
return url;
} 
```

当我使用：

```
chrome.tabs.getSelected(null, function(tab) {alert(tab.url);}); 
```

Chrome 会显示 url，但如果我在 chrome 控制台中使用我的函数，该函数会返回“”。

有没有办法将 tab.url 传递给一个变量，然后返回这个变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T21:00:22.443

`chrome.tabs.getSelected`是**异步**的。这意味着当回调函数被调用时，`return url`“已经发生”。

你有两种选择来达到预期的效果。

1.  正确重写您的代码，以正确实现异步方面（具体细节取决于您的扩展的实现）。
    请注意，自 Chrome 16 起`getSelected`已[弃用](http://code.google.com/chrome/extensions/whats_new.html#16)并替换为。[`chrome.tabs.query`](http://code.google.com/chrome/extensions/tabs.html#method-query)

2.  [`chrome.tabs.onUpdated`](http://code.google.com/chrome/extensions/tabs.html#event-onUpdated)使用（添加 tabID + URL）、[`chrome.tabs.onRemoved`](http://code.google.com/chrome/extensions/tabs.html#event-onRemoved)（删除过时条目）和[`chrome.tabs.onActivated`](http://code.google.com/chrome/extensions/tabs.html#event-onActivated)（设置当前活动选项卡）维护当前 URL 的散列。

代码 2：

```
// Our hash
var tabIdToURL = {};
var currentTabId = -1;
// Add changes to the hash (tab creation, tab's page load)
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    tabIdToURL[tabId] = tab.url; // also available as tab.id and changeInfo.url
});
// Remove entries from closed tabs
chrome.tabs.onRemoved.addListener(function(tabId) {
    delete tabIdToURL[tabId];
});
// Set the ID of the current active tab
chrome.tabs.onActivated.addListener(function(activeInfo) {
    currentTabId = activeInfo.tabId;
});

// Usage, based on the question's function
function getURL() {
    return tabIdToURL[currentTabId] || '';
} 
```

# java - 使用 RSA 加密的数据长度非常大

> ID：10955414
> 
> 赞同：1
> 
> 时间：2012-06-08T20:05:19.133
> 
> 标签：java, rsa, bouncycastle

我希望加密数据与我的原始文本具有相同的长度，因为我必须遵守长度的约束。我正在使用`BouncyCastle`.

这是我生成密钥对的代码：

```
KeyPairGenerator keyGen = KeyPairGenerator.getInstance("RSA");
keyGen.initialize(512);
KeyPair keypair = keyGen.genKeyPair();
PublicKey pub = keypair.getPublic();
byte[] pubs = pub.getEncoded(); 
```

这是我要加密的代码：

```
Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1PADDING");
PublicKey pk = KeyFactory.getInstance("RSA").generatePublic(new X509EncodedKeySpec(pubs));
cipher.init(Cipher.ENCRYPT_MODE, pk);
byte[] cipherBytes = cipher.doFinal(plainArray); 
```

编码后的数据很大，怎么做才能和原始数据一样小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:23:10.607

没什么，至少不是关于 RSA。RSA 需要一定数量的填充以确保安全，并且由于任何压缩方法都将数据视为随机数据，因此您也无法对其进行压缩。

当然，您不应该直接使用 RSA 直接加密数据，而应该加密一个随机会话/数据密钥。但即便如此，您仍会将加密的会话密钥作为开销。

您可以使用椭圆曲线密码术删除非对称加密数据/密钥的一些位（其输出是密钥大小最小值的两倍，但密钥大小要小得多以达到相同的安全级别）。EC 密码学并不适合温顺，它有很多复杂性。

顺便说一句，512 位 RSA 被认为是不安全的。至少使用 1024 或遵守[http://www.keylength.com/](http://www.keylength.com/)上列出的 ECRYPT II 或 NIST 建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:26:08.800

如果您可以保密密钥，则可以使用 AES 等对称密码系统。如果在 CFB 模式下使用，它可以适应任何位长度。即#bits 输入和输出是相同的。

RSA 和 ElGamal（主要的公钥密码系统）即使在您选择的 512 位时也可以在几个小时内被破解。1024 - 4096 位是正常的。除非您的对手仅限于使用 1990 年代的硬件，否则少于 512 位是毫无价值的。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T14:49:45.940

RSA 的本质是在加密和解密中使用幂运算。

基本上，对于 public key**`e`**和 private key **`d`**，你接收一条消息**`m`**，然后你得到一个压缩消息等于**`c=m^e`**并修改它**`n`**。然后你用它解密**`m=c^d`**并再次修改它**`n`**（mod意味着取余数）。

如果你想一想，关于某事力量的信息会产生更大的数字。因为你做了一个 mod **`n`**，所以你最终得到的数字最多是**`n-1`**. **`n`**是密钥长度。

所以基本上，无论你接收什么消息，你都会加密到**`n`**. 消息必须小于**`n`**。

但是必须使用填充方案将消息转换为整数（以便您可以进行幂运算）。这种填充方案可能需要少于 n 位。因此，您最终会得到比被加密数据大小更大的文件。此外，最后一个块可能小于**`n`**位，但会加密为 size **`n`**。

# character - 到达某个 Y 坐标时重置玩家位置

> ID：10955420
> 
> 赞同：0
> 
> 时间：2012-06-08T20:05:46.383
> 
> 标签：character, coordinates, physics, reset

我的问题是，每当我的角色到达某个 Y 坐标时，我希望他的位置重置为（目的地 x，目的地 y）。这是我到目前为止所拥有的，但它不起作用。所有其他代码都有效，但每当我走到某个 Y 坐标时，它什么都不做。我将某个 Y 坐标的布尔值命名为“死亡”。

```
 boolean death = false;

    if (jumper.getPosition().y == 1.0f ) {
        death = true;
    } 
```

这是我尝试重置它的地方：

```
 if (death == true) {
        create();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:20:34.207

你不能把它简化为：

```
if (jumper.getPosition().y == 1.0f ) {
    // Print something here
    create();
} 
```

如果它不起作用，可能是因为条件不正确......所以您很可能希望确保类型相同，以便您可以正确比较并且您正在访问您实际想要访问的对象。（如果你正在做 1，你可能想要同时制作两个整数，因为浮点数很有趣，而且有些值没有很好地表示，所以如果你在它上面做一堆计算，你可以很容易地抛出值）。

# jquery - 我想在我的 jQuery 数据表插件中添加复选框

> ID：10955421
> 
> 赞同：1
> 
> 时间：2012-06-08T20:05:50.160
> 
> 标签：jquery, ruby-on-rails, ruby, datatables, checkbox

我在[这里看过这个 railscast](http://railscasts.com/episodes/340-datatables)

在那一集中，Ryan bates 展示了数据值。并创建一个单独的类来将 JSON 数据发送到浏览器。我也做过同样的事情。但是，不是所有的 get 元素，我还想在我的表中添加复选框。我尝试了许多不同的方法来做同样的事情。但是，复选框不会出现在数据表列中。出现的只是与复选框相对应的“真”或“假”值。

我在数据表论坛上发布了这个问题，但没有收到非常有用的答案。

这是我在服务器端的课程代码：

```
class ListingsDatatable
  delegate :params, :h, :link_to, :number_to_currency, to: :@view

  def initialize(view)
    @view = view
  end

  def as_json(options = {})
    {
      sEcho: params[:sEcho].to_i,
      iTotalRecords: Listing.count,
      iTotalDisplayRecords: listings.total_entries,
      aaData: data
    }
  end

private

  def data
    listings.map do |listing|
      [
        h(listing.id),
        link_to(listing.name, listing),
        h(listing.telephone),
        h(listing.fax),

        #This is the code I tried but no checkboxes, instead
        # if the following is included then no data shows in the table
        #check_box_tag('checked?', listing.checked),
        #check_box_tag('collected', listing.collected),
        #check_box_tag('digitized', listing.digitized),
        #check_box_tag('in db?', listing.in_database)

        #if I include the following, 
         #these are boolean values stored in the listings table
        #which generate "true" or "false" in the columns. This works to show the boolean    values. Checkboxes dont.   
        h(listing.keep),
        h(listing.checked),
        h(listing.collected),
        h(listing.digitized),
        h(listing.in_database)
      ]
    end
  end

  def listings
    @listings ||= fetch_listings
  end

  ......... 
```

这是 index.html.erb 文件

```
<h3><%= link_to 'Click here to create a new Listing', new_listing_path %></h3>

<table id="listings" class="display" data-source="<%= listings_url(format: "json")%>">
<thead>
  <tr>
  <th>id</th>
  <th>name</th>
  <th>telephone</th>

  <th>Keep this listing?</th>
  <th>Checked</th>
  <th>Collected?</th>
  <th>Digitized?</th>
  <th>in DB?</th>
  </tr>
</thead>

<tbody>

</tbody>
</table>

<br /> 
```

这是 Javascript 文件 Listings.js

```
//#JQuery

//Initialize the datatable
$(document).ready(function()
{
  var oTable = $('#listings').dataTable(
  {
    "sPaginationType":  "full_numbers",
    "bJQueryUI": true,
    "bSortClasses": false,
    "sScrollX": "90%",
    "bScrollCollapse": true,
    "sDom":  '<"top"iflp<"clear">>rt<"bottom"iflp<"clear">>',
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": $('#listings').data('source')
  });
}); 
```

有人可以帮助我了解如何让复选框显示在这些列中

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:26:33.230

所以我想不出一种方法来使用 datatables.net 进行这项工作。文档含糊不清。但是，我意识到这可能是设计使然，因为他们提供数据表 jquery 作为免费选项，但他们有一个可编辑的数据表，这是一个商业产品。由于无法完成这项工作，我选择在 4 小时内实现我自己的可编辑表格。我不再使用数据表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:29:14.620

您应该重新考虑使用 dataTables，但是，请查看此链接 --> [http://www.javascriptsource.com/forms/check-all.html](http://www.javascriptsource.com/forms/check-all.html)。

我目前正在我正在处理 www.demo.welllocators.com/search2.php 的网站上使用代码

# php - 当我尝试在同一个文件上使用 imagefronpng() 时，PHP GD 创建了一个 PNG 文件并失败

> ID：10955422
> 
> 赞同：3
> 
> 时间：2012-06-08T20:05:54.190
> 
> 标签：php, image-processing, png, gd

我正在使用 PHP GD 库来处理一些图像以创建 meme 生成器。我以前从未使用过任何语言的图像处理。

首先，我通过 POST 上传一张图片，并根据我设置的最大宽度和高度参数使用 GD 调整它的大小。调整大小的图像保存到服务器，并在下一页显示给用户，并带有用于设置标题的表单。此表单包含所有字幕信息：字幕文本、字体大小和每个字幕的 xy 位置。

回到服务器，使用来自标题表单的数据，我从在上一步中调整大小的文件创建 GD 资源并添加标题。

它就像 .gif 和 .jpg/.jpeg 文件的魅力一样，但是当我使用 PNG 文件时它失败了。当我调整上传文件的大小时，它被正确保存，但是在第二步，当我尝试使用调整大小的文件创建 GD 资源时，它会抛出此错误： Message: imagecreatefrompng() [function.imagecreatefrompng]: './images/ tmp/Phineas_talks_to_Perry1.png' 不是有效的 PNG 文件

我猜这与第一次创建文件的过程（调整大小）有关。不是文件不存在，我每次都仔细检查。然后我把它下载回我的电脑，用 Picassa 打开它就可以了。

我正在使用 CodeIgniter 的 Apache 服务器（Go Daddy 共享主机）。

这是我使用的两个函数的代码，它们包含在一个类中：（评论是西班牙语，请随意忽略它们）

```
class Imageprocessing
{
    public function __construct()
    {
        $this->ci =& get_instance();
        $this->ci->load->helper('file');
    }

public function resize( $path, $overwrite = false, $destination = null, $name = null )
{
    $output = 0;        

    //Si están seteados los parámetros de ancho y altura máximos
    if( isset( $this->max_W ) && isset( $this->max_H ) )
    {
        //Si la ubicación que recibimos es un archivo válido
        if( is_file( $path ) )
        {
            //Si el archivo es de tipo imagen
            if( $this->is_image( $path ) )
            {                    
                $pathinfo = pathinfo( $path );
                $ext = $pathinfo['extension'];
                $file = $pathinfo['filename'];            
                $dir = $pathinfo['dirname'] . '/';

                //Creando el recurso de imagen GD, usando la función apropiada según el mime type
                if( $ext == 'jpeg' || $ext == 'jpg' )
                {
                    $src = imagecreatefromjpeg( $path );
                }
                elseif( $ext == 'png' )
                {
                    $src = imagecreatefrompng( $path );
                }
                elseif( $ext == 'gif' )
                {
                    $src = imagecreatefromgif( $path );
                }

                //determinando el ancho y alto actual de la imagen
                $W = imageSX( $src );
                $H = imageSY( $src );

                //Si alguno de los dos parámetros excede el máximo permitido, calculamos las nuevas dimensiones de la imagen
                if( $W > $this->max_W || $H > $this->max_H )
                {        
                    //Si la foto es más alta que ancha
                    if( $W < $H )
                    {

                        /*Redimensionamos la altura al máximo permitido
                        /*Calculamos la proporción en que varió la altura y disminuimos el ancho en esa misma proporción
                        */
                        $new_H = $this->max_H;                            
                        $new_W = $W * ( $this->max_H / $H );
                    }
                    elseif( $W > $H )
                    {
                        /*Redimensionamos el ancho al máximo permitido
                        /*Calculamos la proporción en que varió el ancho y disminuimos la altura en esa misma proporción
                        */
                        $new_W = $this->max_W;                            
                        $new_H = $H * ( $this->max_W / $W );
                    }
                    else
                    {
                        $new_W = $this->max_W;
                        $new_H = $this->max_W;
                    }

                    //determinando la carpeta de destino y el nombre del nuevo archivo
                    if( $overwrite )
                    {
                        $destination = $path;
                    }
                    else
                    {
                        if( ! isset( $destination ) || empty( $destination ) )
                        {
                            $destination = $dir;
                        }
                        //si $destination no es un directorio válido
                        elseif( ! is_dir( $destination ) )
                        {
                            $destination = $dir;                        
                        }

                        if( ! isset( $name ) || empty( $name ) )
                        {
                            $destination .= "{$file}_" . (int) $new_W . 'x' . (int) $new_H . ".{$ext}";
                        }
                        else
                        {
                            //filtrar para que sea un nombre de archivo válido
                            $destination .= filter_var( str_replace( ' ', '_', $name ), FILTER_SANITIZE_URL ) . ".{$ext}";
                        }
                    }                    

                    //creamos la nueva imagen, redimensionada                        
                    $dst = imagecreatetruecolor( $new_W, $new_H );
                    imagecopyresampled( $dst, $src, 0, 0, 0, 0, $new_W, $new_H, $W, $H );

                    //según el mime
                    if( $ext == 'jpg' || $ext = 'jpeg' )
                    {
                        $success = imagejpeg( $dst, $destination, 100 );
                    }
                    elseif( $ext == 'png' )
                    {
                        $success = imagepng( $dst, $destination );
                    }
                    elseif( $ext == 'gif' )
                    {
                        $success = imagegif( $dst, $destination );
                    }

                    if( $success )
                    {
                        $output = array( 'src' => $destination, 'width' => $new_W, 'height' => $new_H );
                    }

                    unset( $src, $dst );

                }
                else
                {
                    $output = -1;
                }                    
            }
            else
            {
                $error = 'Debes usar un archivo de imagen';
            }                
        }
        else
        {
            $error = 'Debes especificar una ubicación de archivo válida';
        }
    }
    else
    {
        $error = 'Para usar la función ' . __METHOD__ . ' de la clase ' . __CLASS__ . ' se deben especificar los parámetros de ancho máximo permitido ( max_W ) y altura máxima permitida ( max_H )';
    }

    if( isset( $error ) && ! empty( $error ) )
    {
        trigger_error( $error, E_USER_WARNING );
    }

    return $output;
}    

public function caption( $path, $captions, $overwrite = false, $destination = null, $name = null )
{

    $output = false;

    if( is_file( $path ) )
    {
        if( $this->is_image( $path ) )
        {
            if( is_array( $captions ) )
            {                
                $pathinfo = pathinfo( $path );
                $ext = $pathinfo['extension'];                    
                $file = $pathinfo['filename'];                    
                $dir = $pathinfo['dirname'] . '/';

                //Creando el recurso de imagen GD, usando la función apropiada según el mime type
                if( $ext == 'jpeg' || $ext == 'jpg' )
                {
                    $src = imagecreatefromjpeg( $path );
                }
                elseif( $ext == 'png' )
                {
                    $src = imagecreatefrompng( $path );
                }
                elseif( $ext == 'gif' )
                {
                    $src = imagecreatefromgif( $path );                
                }

                $color = imagecolorallocate( $src, 255, 255, 255 );

                foreach( $captions as $caption )
                {
                    imagefttext( $src, $caption['font-size'], 0, $caption['x'], $caption['y'] + $caption['font-size'], $color, './fonts/impact.ttf', $caption['text'] );
                }

                if( $overwrite )
                {
                    $destination = $path;                    
                }
                else
                {
                    if( ! isset( $destination ) || empty( $destination )  )
                    {
                        $destination = $dir;
                    }
                    elseif( ! is_dir( $destination ) )
                    {
                        $destination = $dir;
                    }

                    if( ! isset( $name ) || empty( $name )  )
                    {
                        $destination .= "{$file}_caption.{$ext}";
                    }
                    else
                    {
                        //filtrar para que sea un nombre de archivo válido
                        $destination .= filter_var( str_replace( ' ', '_', $name ), FILTER_SANITIZE_URL ) . ".{$ext}";
                    }
                }

                //según el mime
                if( $ext == 'jpg' || $ext = 'jpeg' )
                {
                    $success = imagejpeg( $src, $destination, 100 );
                }
                elseif( $ext == 'png' )
                {
                    $success = imagepng( $src, $destination );
                }
                elseif( $ext == 'gif' )
                {
                    $success = imagegif( $src, $destination );
                }

                if( $success )
                {
                    $output = array( 'src' => $destination, 'width' => (int) imageSX( $src ), 'height' => (int) imageSY( $src ) );
                }

                unset( $src );

            }
            else
            {
                $error = 'Los captions deben ingresarse como un array';
            }
        }
        else
        {
            $error = 'Se debe usar un archivo de imagen';
        }
    }
    else
    {
        $error = 'Se debe usar un archivo válido';
    }

    if( isset( $error ) && ! empty( $error ) )
    {
        trigger_error( $error, E_USER_WARNING );
    }

    return $output;        

}    

} 
```

你对这有什么问题有任何想法吗？

编辑：您可以尝试我到目前为止在此地址中所做的事情，再次忽略西班牙语，只需上传文件并尝试。谢谢你！

为了让脚本调整图片大小，它必须大于 640x480

[http://unmillondemascotas.org/meme/](http://unmillondemascotas.org/meme/)

问题肯定出在图像创建过程中。我手动将图像上传到服务器并硬编码字幕过程，它成功了，它创建了一个新的 PNG 文件。然后我尝试再次为同一个文件添加标题，但它失败了。所以，我在编写新的 PNG 文件时一定做错了什么，但我不知道它是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:42:54.130

我对来自 PhpThumb (GD) 保存的图像有同样的问题，因为“输入”图像可以采用任何格式。我修复了它，只是确保保存的图像确实是 PNG 文件：

> $image->save($path, "PNG");

问候。

# java - 如何在 play 2.0.1 中更改上传的文件目录？

> ID：10955424
> 
> 赞同：2
> 
> 时间：2012-06-08T20:05:57.963
> 
> 标签：java, playframework, playframework-2.0

我试图在我的 application.conf 文件中指定 attachments.path 属性，但这没有任何效果。

在 play 2.0.1 的文档中，我没有找到任何解释如何更改上传文件目录的内容。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T10:25:31.533

虽然没有这样的变量，`application.conf`但您可以轻松地添加它并在您的方法中使用。随心所欲地调用它，即：

新行`application.conf`：

```
myUploadPath = "/home/your-account/some/custom/upload/folder/" 
```

根据[文档样本](http://www.playframework.org/documentation/2.0.1/JavaFileUpload)：

```
public static Result upload() {
    MultipartFormData body = request().body().asMultipartFormData();
    MultipartFormData.FilePart picture = body.getFile("picture");
    if (picture != null) {
        String fileName = picture.getFilename();
        String contentType = picture.getContentType();
        File file = picture.getFile();

        // added lines
        String myUploadPath = Play.application().configuration().getString("myUploadPath");
        file.renameTo(new File(myUploadPath, fileName));

        return ok("file saved as " + myUploadPath + fileName);
    } else {
        flash("error", "Missing file");
        return redirect(routes.Application.uploadform());
    }
} 
```

使用这种方法，您可以甚至应该`filename clash`在重命名之前执行检查，以防止随机覆盖。

# ruby-on-rails - 将'../foo'重命名为asset_path('foo')的脚本

> ID：10955426
> 
> 赞同：2
> 
> 时间：2012-06-08T20:06:01.640
> 
> 标签：ruby-on-rails, regex, macros, textmate, replace

这不仅限于 Rails 开发人员，但我认为自 Rails 3.1 以来必须这样做是很常见的。

我正在寻找一个脚本/某种方法来替换表单中的所有内容

`'../foo/BLAHBLAH'`

到`<%= asset_path 'BLAHBLAH' %>`

其中`foo`是资产类型的名称，所以它可以是`images`或`fonts`。

有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:09:55.693

您可以通过全局搜索和替换来做到这一点。

在*Textmate*中，您可以点击`Command-Shift-F`进入项目范围的搜索。然后搜索`\.\.\/images\/(.*?)[\)'"]`并替换为`<%= asset_path('$1') %>`

使用*`find`它`sed`*是一个简单的单线：

`find PROJECT_DIR -type f -name "*.html" -exec sed -i -e 's/\.\.\/images\/\([^)'\''"]*\)/<%= asset_path("\1")/g' {} \;`

在*Vim*中你可以这样做：

```
:args ./**
:argdo %s/\.\.\/images\/(.*?)[\)'"]/<%= asset_path('\1')/g 
```

# r - 将参数传递给闭包（？）

> ID：10955427
> 
> 赞同：2
> 
> 时间：2012-06-08T20:06:17.060
> 
> 标签：r, closures

我正在尝试创建一个封闭函数，它将：

*   处理一些数据，
*   `cat()`该数据的结果，
*   根据结果​​请求用户输入（即，通过`readline()`）`cat()`，
*   然后返回一个函数，其中返回函数的参数默认值之一是输入的值`readline()`。

此外，我希望返回函数的参数的其余默认值是用户可解释的。也就是说，我不希望默认值是隐藏在父环境中的变量的变量名（这个规定排除了简单的参数传递）。具体来说，我想`arg()`返回实际评估的数字等。

我在下面编写了这个解决方案，但感觉很笨拙和尴尬。有没有更优雅的方法来解决这个问题？

```
top <- function(year=1990, n.times=NULL){

if(is.null(n.times)){
    ###in the real function, data would be processed here
    ###results would be returned via cat and
    ###the user is prompted return values that reflect a decision
    ###made from the processed data
    n.times <- as.numeric(readline("how many times?"))
}

out <- function(year, n.times){
    ###in the real function, this is where most of the work would happen
    rep(year, n.times)
}

###this entire section below is clunky.
if( !identical( names(formals()), names(formals(out)) ) ){
     stop("internal error: mismatching formals")

}

pass.formals <- setdiff( names(formals()), "n.times")

formals(out)[pass.formals] <- formals()[pass.formals]
formals(out)$n.times <- n.times
out

}

x <- top()
x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T23:08:21.930

对我来说，它看起来一般都可以；只有几件事我会做不同的事情。

是否有任何理由表明 和 的参数`top()`似乎`out()`以某种方式对应？即，你需要`identical`支票吗？不确定，所以我把它拿出来了。这似乎可以满足您的要求，并且稍微短一些：

```
top <- function(year=1990, n.times=NULL){
    if (is.null(n.times)) {
        n.times <- as.numeric(readline("how many times?"))
    }

    out <- function(year, n.times) {
        rep(year, n.times)
    }

    out.formals = formals(out)
    out.formals['n.times'] = n.times
    formals(out) = out.formals

    out
} 
```

**编辑：**如果你想使用超级 R 魔法，你可以写

```
top <- function(year=1990, n.times=NULL){
    if (is.null(n.times)) {
        n.times <- as.numeric(readline("how many times?"))
    }

    `formals<-`(
        function() {
            rep(year, n.times)
        },
        value=list(year=alist(x=)$x, n.times=n.times)
    )
} 
```

**编辑**：您也可以使用 DWin 建议的东西（尽管我无法使用它`substitute`）：

```
 out = function(year, n.times) {
        rep(year, n.times)
    }
    `formals<-`(out, v=`[[<-`(formals(out), 'n.times', n.times)) 
```

或使用`bquote`：

```
 eval(bquote(
        function(year, n.times=.(n.times)) {
            rep(year, n.times)
        }
    )[-4L]) 
```

你有很多选择。

# php - 如何追踪 PHP 崩溃？

> ID：10955429
> 
> 赞同：4
> 
> 时间：2012-06-08T20:06:20.813
> 
> 标签：php, mysql, apache, crash

我正在尝试追查我的 Apache PHP 崩溃的原因。我希望有某种设置、工具或其他东西来帮助追踪导致这些 php 崩溃的代码、配置或问题。

在我的 Windows 事件日志中，我有（显示 apache 崩溃，但由 php 引起）：

```
Faulting application httpd.exe, version 2.2.21.0, time stamp 0x4e6b3136, faulting module php5ts.dll, version 5.3.8.0, time stamp 0x4e537a04, exception code 0xc0000005, fault offset 0x0000c7d7, process id 0xbf4, application start time 0x01cd45afc42f0b7d. 
```

该应用程序在 Windows Server 2008 机器 (xampp) 上使用 Apache、PHP 和 MySQL。

这是我的 Apache 日志中的崩溃：

```
[Fri Jun 08 15:56:34 2012] [notice] Parent: child process exited with status 3221225477 -- Restarting.
[Fri Jun 08 15:56:35 2012] [notice] Digest: generating secret for digest authentication ...
[Fri Jun 08 15:56:35 2012] [notice] Digest: done
[Fri Jun 08 15:56:35 2012] [notice] Apache/2.2.21 (Win32) PHP/5.3.8 configured -- resuming normal operations
[Fri Jun 08 15:56:35 2012] [notice] Server built: Sep 10 2011 11:34:11
[Fri Jun 08 15:56:35 2012] [notice] Parent: Created child process 1220
[Fri Jun 08 15:56:35 2012] [notice] Digest: generating secret for digest authentication ...
[Fri Jun 08 15:56:35 2012] [notice] Digest: done
[Fri Jun 08 15:56:35 2012] [notice] Child 1220: Child process is running
[Fri Jun 08 15:56:35 2012] [notice] Child 1220: Acquired the start mutex.
[Fri Jun 08 15:56:35 2012] [notice] Child 1220: Starting 150 worker threads.
[Fri Jun 08 15:56:35 2012] [notice] Child 1220: Starting thread to listen on port 80.
[Fri Jun 08 15:56:35 2012] [notice] Child 1220: Starting thread to listen on port 80.
[Fri Jun 08 15:57:37 2012] [notice] Parent: child process exited with status 3221225477 -- Restarting.
[Fri Jun 08 15:57:37 2012] [notice] Digest: generating secret for digest authentication ...
[Fri Jun 08 15:57:37 2012] [notice] Digest: done
[Fri Jun 08 15:57:37 2012] [notice] Apache/2.2.21 (Win32) PHP/5.3.8 configured -- resuming normal operations
[Fri Jun 08 15:57:37 2012] [notice] Server built: Sep 10 2011 11:34:11
[Fri Jun 08 15:57:37 2012] [notice] Parent: Created child process 3932
[Fri Jun 08 15:57:38 2012] [notice] Digest: generating secret for digest authentication ...
[Fri Jun 08 15:57:38 2012] [notice] Digest: done
[Fri Jun 08 15:57:38 2012] [notice] Child 3932: Child process is running
[Fri Jun 08 15:57:38 2012] [notice] Child 3932: Acquired the start mutex.
[Fri Jun 08 15:57:38 2012] [notice] Child 3932: Starting 150 worker threads.
[Fri Jun 08 15:57:38 2012] [notice] Child 3932: Starting thread to listen on port 80.
[Fri Jun 08 15:57:38 2012] [notice] Child 3932: Starting thread to listen on port 80. 
```

关于我应该尝试什么的任何想法，或者追溯到什么代码的工具/技术等可能会导致这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:23:49.947

由于 XAMPP 的 Apache（适用于 Windows）是使用[winn_nt](http://httpd.apache.org/docs/2.2/en/mod/mpm_winnt.html) MPM（多线程）+ 线程安全 PHP 构建的，因此您可能遇到了所谓的 PHP 线程安全版本所固有的问题（有关更多信息，请参阅[这篇非常好的帖子](https://stackoverflow.com/a/5978844/1446005)信息）。这可以解释为什么在单用户模式下运行时从未遇到错误。

如果 Uku Loskit 的建议有任何好处，请告诉我们。如果没有，我建议在这样的多用户环境中切换到 Prefork + 非线程安全的 PHP 设置。

因为必须在编译时选择 MPM，所以您需要：

*   自己编译 Apache（技术上可行，但在 Windows 上相当痛苦，据我记得）
*   找到一个不是 XAMPP 的发行版，它是用 prefork 构建的（我不知道）

也许您最好尝试使用[FastCGI](http://www.fastcgi.com/drupal/node/3)运行 PHP （这个额外的层基本上通过为每个线程启动一个单独的 PHP 进程来隔离服务器线程，[等等](http://www.fastcgi.com/drupal/node/6?q=node/16#S6)）。这应该可以让你很容易地验证我最初的假设。

附带说明：我看不出在 Windows Server 上安装 Apache 的意义。您可能需要考虑使用 IIS，可选择使用 FastGCI（请参阅[此处](http://www.iis.net/learn/application-frameworks/install-and-configure-php-applications-on-iis/using-fastcgi-to-host-php-applications-on-iis)的说明），或者（更好地）切换到基于 Linux 的堆栈。

# xml - 如何使用记事本++从xml文件中提取数据？

> ID：10955431
> 
> 赞同：15
> 
> 时间：2012-06-08T20:06:25.690
> 
> 标签：xml, notepad++

我有一个带有结构的 xml 响应（例如组 > 子组 > 子记录）。

我想提取所有 childRecord.name 的列表作为单独的数据。我希望我可以在记事本++中快速做一些事情，然后将结果粘贴到excel中。

在这种情况下，我不确定如何编写宏可能会为我做这件事。

```
<group>

  <subgroup>

    <childrecord name="abc">zzz</childrecord>

  </subgroup>

</group> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-08T20:42:00.487

直接用 MS Excel 打开 XML 文件。

# 更新

来自[support.office.com](https://support.office.com/en-us/article/Import-XML-data-6eca3906-d6c9-4f0d-b911-c736da817fa4#bmimport_an_xml_file_as_an_xml_list_wit)：

> **将 XML 数据文件作为 XML 表导入**
> 
> 1.  单击开发人员 > 导入。
>     
>     
>     
>     如果您没有看到开发人员选项卡，请参阅[显示开发人员选项卡](https://support.office.com/en-us/article/Import-XML-data-6eca3906-d6c9-4f0d-b911-c736da817fa4#_ShowDeveloperTab)。
>     
>     
> 2.  在“导入 XML”对话框中，找到并选择要导入的 XML 数据文件 (.xml)，然后单击“导入”。
>     
>     
>     
>     如果 XML 数据文件不引用架构，Excel 会从 XML 数据文件推断架构。
>     
>     
> 3.  在“导入数据”对话框中，执行以下操作之一：
>     
>     
>     
>     一个。选择现有工作表中的 XML 表，将 XML 数据文件的内容导入到工作表中指定单元格位置的 XML 表中。
>     
>     
>     
>     湾。选择新工作表中的 XML 表以将文件的内容导入新工作表中从单元格 A1 开始的 XML 表。XML 数据文件的架构显示在 XML 源任务窗格中。
>     
>     
> 4.  如果 XML 数据文件不引用架构，则 Excel 从 XML 数据文件推断架构。
>     
>     
> 5.  要控制 XML 数据的行为（例如数据绑定、格式和布局），请单击属性，这将显示 XML 映射属性对话框。例如，默认情况下，当您导入数据时，映射范围中的现有数据将被覆盖，但您可以更改此设置。

**在 LibreOffice Calc 中导入 XML 文件：**

1.  从菜单栏中，转到`Data`>`XML Source...`
2.  单击浏览按钮（文件夹图标）并从对话框中选择文件
3.  选择所需的节点
4.  `Mapped cell`例如填写字段`A1`
5.  点击`Import`按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:18:49.870

Simply follow these steps:

1.  Open your XML file with Notepad++
2.  Select all text
3.  Use this menu: [TextFX](https://sourceforge.net/projects/npp-plugins/files/TextFX/) -> TextFX Convert -> Strip HTLM tags table tabs/nontabs

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-23T21:41:56.543

也许玩[PowerShell](https://techgenix.com/reading-extracting-xml-files-with-powershell/)的“ [Get-Content](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/get-content?view=powershell-7.2) ”而不是 NotePad++

# jquery - jQuery 鼠标移动在第二次 mousedown 时变得无效

> ID：10955443
> 
> 赞同：0
> 
> 时间：2012-06-08T20:07:20.087
> 
> 标签：jquery, jquery-ui

我有一个非常简单的 div，我想让用户单击并拖动然后收集 2 个坐标集。似乎它应该很容易。我绑定了 mousedown 并收集了我将使用 mousemove 来跟踪 mouseup 发生的位置的偏移量。我试图在 mouseup 上获取鼠标的坐标，但这似乎不起作用，所以我试图使用移动。

但是，单击和拖动一次有效，但在第二次尝试时，我得到了无效的指针。要测试使用此小提琴并单击/拖动，然后重试。

[要测试使用此小提琴并单击/拖动，然后重试。](http://jsfiddle.net/a4BqB/56/)

# c# - 没有泛型参数的 C# 泛型工厂返回

> ID：10955451
> 
> 赞同：0
> 
> 时间：2012-06-08T20:08:01.640
> 
> 标签：c#, generics, factory

我有以下课程和工厂（省略了不必要的代码）。我有 3 个独立的 IManageableEntryDao 实现，以及在 createDao 方法中访问的字符串/类型映射。

我收到以下编译错误：“ManageableEntry.IManageableEntryDao' 需要 '1' 类型参数”。解决这个问题的最佳实践是什么？我想以某种方式确定是什么吗？还是有替代解决方案？

```
public interface IManageableEntryDao<T> where T : IManageableEntry {
    T findById(long id);
    T findByName(string name);

    int findUnapprovedCount();
    List<T> findUnapproved(ManageableEntryCriteria criteria);

    long insert(T manageableEntry);
    bool update(T manageableEntry);
    bool delete(T manageableEntry);
}

public class ManageableEntryDaoFactory {
    public IManageableEntryDao createDao(string manageableEntryType) {
            manageableEntryType = manageableEntryType.ToLower();
            Type type = daoTypes[manageableEntryType];
            if (type != null) {
                object dao = Activator.CreateInstance(type);                    
                return dao as IManageableEntryDao;
            }
            throw new NotImplementedException("Failed to find DAO for type: " + manageableEntryType);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:16:00.183

您需要在方法调用中指定类型。这确实意味着您可以避免对字符串的需要：

```
public IManageableEntryDao<T> CreateDao<T>() where T : IManageableEntry
{
        Type manageableEntryType = typeof(T);

        // You'll need to modify daoTypes to be a HashSet<Type> (or List<Type>) of allowable types, or something similar, instead of using a dictionary lookup
        if (daoTypes.Contains(manageableEntryType) {
            object dao = Activator.CreateInstance(type);                    
            return dao as IManageableEntryDao<T>;
        }
        throw new NotImplementedException("Failed to find DAO for type: " + manageableEntryType);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:36:09.517

你可以：

*   `IManageableEntryDao<T>`通过使`CreateDao`方法（或`ManagableEntryDaoFactory`本身）泛型来为 提供类型参数。或者，
*   `IManagableEntry`从方法返回接口`CreateDao`，而不是返回泛型`IManagableEntryDao<T>`。

编辑：基于评论

不幸的是，您不能从`CreateDao`基于输入字符串的方法返回特定类型。您可以做的最好的事情是返回一个基类型或一个对`daoTypes`列表中所有类型通用的接口。

另一个想法是返回一个非泛型接口，并将接口转换为实现方法中的特定类型。这是一个小程序来说明这一点：

```
class Program
{
    static void Main(string[] args)
    {
        var customerEntry = ManageableEntryDaoFactory.CreateDao("customer");
        var orderEntry = ManageableEntryDaoFactory.CreateDao("order");
        customerEntry.Update(new Customer() { Name = "John Doe" });
        orderEntry.Update(new Order() { OrderId = 123 });
        Console.ReadKey();
    }
}

public class Customer
{
    public string Name { get; set; }
}

public class Order
{
    public int OrderId { get; set; }
}

public class CustomerEntry : IManageableEntryDao
{
    public void Update(object objCustomer)
    {
        var customer = objCustomer as Customer;  // now you have a Customer type...
        Console.WriteLine("Updated customer: " + customer.Name);
    }
}

public class OrderEntry : IManageableEntryDao
{
    public void Update(object objOrder)
    {
        var order = objOrder as Order; // now you have an Order type... 
        Console.WriteLine("Updated order: " + order.OrderId);
    }
}

public interface IManageableEntryDao
{
    void Update(object entry);
    // ...other methods, properties, events...
}

public static class ManageableEntryDaoFactory
{
    private static readonly Dictionary<string, Type> daoTypes = new Dictionary<string, Type>() 
    {
        {"customer", typeof(CustomerEntry) }, 
        {"order", typeof(OrderEntry) }
    };

    public static IManageableEntryDao CreateDao(string manageableEntryType)
    {
        manageableEntryType = manageableEntryType.ToLower();
        Type type = daoTypes[manageableEntryType];
        if (type == null)
            throw new NotImplementedException("Failed to find DAO for type: " + manageableEntryType);

        return Activator.CreateInstance(type) as IManageableEntryDao;
    }
} 
```

# django - django-nose 单元测试芹菜任务...缺少数据库数据

> ID：10955452
> 
> 赞同：3
> 
> 时间：2012-06-08T20:08:03.030
> 
> 标签：django, unit-testing, django-celery, django-nose

我正在使用 django-nose 为 celery 任务编写单元测试。这是相当典型的；一个空白测试数据库（REUSE_DB=0），在测试时通过夹具预填充。

我遇到的问题是，即使 TestCase 正在加载夹具并且我可以从测试方法访问对象，但在异步 celery 任务中执行相同的查询时会失败。

我检查了 settings.DATABASES["default"]["name"] 在测试方法和被测任务中是否相同。我还验证了被测任务在作为常规方法调用调用时行为正确。

这就是我没有想法的地方。

这是一个示例：

```
class MyTest(TestCase):
    fixtures = ['test_data.json']

    def setUp(self):
        settings.CELERY_ALWAYS_EAGER = True # seems to be required; if not I get socket errors for Rabbit
        settings.CELERY_EAGER_PROPAGATES_EXCEPTIONS = True # exposes errors in the code under test.

    def test_city(self):
        self.assertIsNotNone(City.objects.get(name='brisbane'))
        myTask.delay(city_name='brisbane').get()
        # The following works fine: myTask('brisbane')

from celery.task import task

@task()
def myTask(city_name):
    c = City.objects.count() # gives 0
    my_city = City.objects.get(name=city_name) # raises DoesNotExist exception
    return 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:20:48.960

这听起来很像 2.5.2 中修复的 django-celery 2.5 中的错误：[https ://github.com/celery/django-celery/pull/116](https://github.com/celery/django-celery/pull/116)

该错误的简要描述是 django-celery 加载程序在执行任务甚至急切任务之前关闭了数据库连接。由于测试在事务中运行，任务执行的新连接无法看到在`setUp`.

# jquery - 当我更改浏览器选项卡时，Jquery Animate 停止

> ID：10955455
> 
> 赞同：2
> 
> 时间：2012-06-08T20:08:23.190
> 
> 标签：jquery, animation, jquery-animate, sprite

我的投资组合中有一个疯狂的问题：http: [//hericdk.com](http://hericdk.com)

我用jquery做了一个简单的动画，一个宇宙飞船飞行的动画，然后就出现了我的作品，这个想法很好，每个人都喜欢，但问题是由于一些奇怪的原因，当我点击查看我的项目和船开始飞行，如果我更改浏览器选项卡然后返回，所有背景动画都正常工作..但是船的动画仍然在等待动画的下一个动作，直到我返回到我的投资组合的选项卡。

我把宇宙飞船的动画代码放在这里，让大家理解。

```
$('#spaceship a').click(function(){
    $('#spaceship').spState(2).sprite({fps: 9, no_of_frames: 12});
    $('#space').stop().delay(3000).animate({'top':'0px'},9000,'easeInOutQuad');

$('#spaceship').animate({'top':'150px','left':'55%'},3000,'easeInOutExpo').delay(200)
    .animate({'top':'350px','left':'65%'},2000,'easeInOutExpo').delay(100)
    .animate({'top':'-400px','left':'65%'},1300,'easeInBack').delay(100)
    .animate({'top':'-400px','left':'88%'},300,'easeInBack').delay(3000)
    .animate({'top':$(window).height()-305+'px','left':'88%'},4000,'easeOutQuad',function(){
    $('#spaceship').spState(1).spStop(true);

    });// spaceship launch

    return false;       
}); //spaceship animation 
```

# javascript - 如何过滤 Backbone.js 集合并重新渲染应用程序视图？

> ID：10955462
> 
> 赞同：4
> 
> 时间：2012-06-08T20:08:55.657
> 
> 标签：javascript, mongodb, backbone.js, mongoose, singlepage

是一个完整的 Backbone.js 菜鸟问题。我正在处理 ToDo Backbone.js 示例，试图构建一个相当简单的单一应用程序界面。虽然 todo 项目更多的是关于用户输入，但这个应用程序更多的是基于用户选项（点击事件）过滤数据。

我对 Backbone.js 和 Mongoose 完全陌生，无法找到一个很好的例子来说明我正在尝试做的事情。我已经能够让我的 api 从 MongoDB 集合中提取数据并将其放入 Backbone.js 集合中，该集合在应用程序中呈现它。我一生都无法弄清楚如何过滤该数据并重新渲染应用程序视图。我正在尝试按文档中的“类型”字段进行过滤。

这是我的脚本：

（我完全知道需要进行一些重大的重构，我只是在快速制作一个概念的原型。）

```
$(function() {

    window.Job = Backbone.Model.extend({
        idAttribute: "_id",

        defaults: function() {
            return {
                attachments: false
            }
        }
    });

    window.JobsList = Backbone.Collection.extend({
        model: Job,
        url: '/api/jobs',
        leads: function() {
            return this.filter(function(job){ return job.get('type') == "Lead"; });
        }
    });

    window.Jobs = new JobsList;

    window.JobView = Backbone.View.extend({
        tagName: "div",
        className: "item",
        template: _.template($('#item-template').html()),
        initialize: function() {
            this.model.bind('change', this.render, this);
            this.model.bind('destroy', this.remove, this);
        },
        render: function() {
            $(this.el).html(this.template(this.model.toJSON()));
            this.setText();
            return this;
        },
        setText: function() {
            var month=new Array();
            month[0]="Jan";
            month[1]="Feb";
            month[2]="Mar";
            month[3]="Apr";
            month[4]="May";
            month[5]="Jun";
            month[6]="Jul";
            month[7]="Aug";
            month[8]="Sep";
            month[9]="Oct";
            month[10]="Nov";
            month[11]="Dec";

            var title = this.model.get('title');
            var description = this.model.get('description');
            var datemonth = this.model.get('datem');
            var dateday = this.model.get('dated');
            var jobtype = this.model.get('type');
            var jobstatus = this.model.get('status');
            var amount = this.model.get('amount');
            var paymentstatus = this.model.get('paymentstatus')

            var type = this.$('.status .jobtype');
            var status = this.$('.status .jobstatus');

            this.$('.title a').text(title);
            this.$('.description').text(description);
            this.$('.date .month').text(month[datemonth]);
            this.$('.date .day').text(dateday);
            type.text(jobtype);
            status.text(jobstatus);

            if(amount > 0)
                this.$('.paymentamount').text(amount)

            if(paymentstatus)
                this.$('.paymentstatus').text(paymentstatus)

            if(jobstatus === 'New') {
                status.addClass('new');
            } else if (jobstatus === 'Past Due') {
                status.addClass('pastdue')
            };

            if(jobtype === 'Lead') {
                type.addClass('lead');
            } else if (jobtype === '') {
                type.addClass('');
            };
        },
        remove: function() {
            $(this.el).remove();
        },
        clear: function() {
            this.model.destroy();
        }
    });

    window.AppView = Backbone.View.extend({
        el: $("#main"),
        events: {
            "click #leads .highlight" : "filterLeads"
        },
        initialize: function() {
            Jobs.bind('add', this.addOne, this);
            Jobs.bind('reset', this.addAll, this);
            Jobs.bind('all', this.render, this);

            Jobs.fetch();
        },
        addOne: function(job) {
            var view = new JobView({model: job});
            this.$("#activitystream").append(view.render().el);
        },
        addAll: function() {
            Jobs.each(this.addOne);
        },
        filterLeads: function() {
            // left here, this event fires but i need to figure out how to filter the activity list.
        }
    });

    window.App = new AppView;

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T22:06:35.327

您是否尝试使用“潜在客户”过滤器的结果[重置集合？](http://backbonejs.org/#Collection-reset)

就像是

```
window.AppView = Backbone.View.extend({
    el: $("#main"),
    events: {
        "click #leads .highlight" : "filterLeads"
    },
    initialize: function() {
        Jobs.bind('add', this.addOne, this);
        Jobs.bind('reset', this.render, this); //render on reset

        Jobs.fetch(); //this triggers reset
    },
    addOne: function(job) {
        var view = new JobView({model: job});
        this.$("#activitystream").append(view.render().el);
    },
    //add a render function
    render: function() {
        this.$("#activitystream").empty(); //empty out anything thats in there

        Jobs.each(this.addOne);
    },
    filterLeads: function() {
        Jobs.reset(Jobs.leads()); //reset Jobs with only the leads
    }
}); 
```

您的 AppView 也没有“渲染”方法，但您在此处引用它：

```
Jobs.bind('all', this.render, this); 
```

# php - 防止表单空提交

> ID：10955464
> 
> 赞同：-1
> 
> 时间：2012-06-08T20:09:08.493
> 
> 标签：php

> **可能重复：**
> [检查多个字符串是否为空](https://stackoverflow.com/questions/10950470/check-if-multiple-strings-are-empty)

今天我在stackoverflow上得到[了这个答案：](https://stackoverflow.com/questions/10950470/chek-if-multiple-strings-are-empty/10950581#10950581)

```
<input type="text" name="required[first_name]" />
<input type="text" name="required[last_name]" />
...

$required = $_POST['required'];
foreach ($required as $req) {
     $req = trim($req);
     if (empty($req))
     echo 'gotcha!';
 } 
```

这没关系，但如果有人改变了怎么办

```
 name="required[first_name]" 
```

到

```
 name="" 
```

然后我将在进一步的代码中丢失一些数据（我使用表单将提交的数据发送到电子邮件）。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:17:08.293

是的，有人可以更改提交给您的代码的 html。因此，您必须检查处理表单的代码中是否存在您想要的所有内容。许多初学者希望通过循环 $_POST 或 $_GET 来自动完成。而且他们几乎总是会遗漏一些东西，或者最终得到的代码与检查你想要的每个输入一样复杂，但更难阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:15:43.513

遍历 $_GET 数组并检查是否有任何变量为“”或以非必需的内容开头，然后就出错了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T20:20:11.750

您应该始终在服务器端验证数据（即在 PHP 中）。

您应该在 PHP 中列出必填字段并在 PHP 中检查它们。

永远不要相信用户数据。

# c# - ActionLink 在 URL 中包含当前 {id}

> ID：10955466
> 
> 赞同：4
> 
> 时间：2012-06-08T20:09:16.483
> 
> 标签：c#, asp.net-mvc, routing

我的浏览器中当前显示的页面是：`http://localhost:19255/Object/Browse/1`.

此页面上的链接是通过以下方式创建的：`@Html.ActionLink("...", "Browse", "Object")`

但生成的链接实际上是：`/Object/Browse/1`

我对正在发生的事情的理解是 MVC 看到我的路线有一个 {id} 部分，我没有提供。所以它继续并包含了当前页面中的 {id} 部分。

很公平，但是没有它我如何创建链接呢？我试过了`null`，`new { id = null }`但都没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T21:44:47.860

虽然以下都不起作用：

```
@Html.ActionLink("...", "Browse", "Object", null)              // Has no effect
@Html.ActionLink("...", "Browse", "Object", new { id = null }) // Error 
```

下面解决了这个问题：

```
@Html.ActionLink("...", "Browse", "Object", new { id = "" })   // No ID is passed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:29:45.753

我相信 MVC 会直接从模型中提取此 ID，因为您没有指定它。我以前见过这个，但我现在没有时间验证它。

在呈现该链接之前尝试覆盖`@Model.Id`以查看它是否来自该链接。然后，我认为，您可以将 Id 值存储在一个新变量中，以备不时之需，并设置 @Model.Id = null。有点黑客......当然:)

# php - 如何通过在 url 中输入 user_id（无密码）来允许访问用户定义的变量？

> ID：10955468
> 
> 赞同：0
> 
> 时间：2012-06-08T20:09:19.937
> 
> 标签：php, mysql, variables

我有一个需要登录的会员网站，会员创建具有特定用户定义变量的网页以输入数据，这些数据将显示以供公众访问这些网页，每个网页都显示有关特定产品的信息。

有 7 个常见的网页模板可供所有成员选择，以显示与他们、他们的公司和特定产品（七种之一）相关的自定义变量。他们将自定义信息输入到表单中，然后将这些值放置在网页模板上的适当位置，以供潜在客户稍后查看

```
<input name='first_name' value='first_name'>
<input name='last_name' value='last_name'>
<input name='company_name' value='company_name'>
<input name='phone_number' value='phone_number'>
<input name='product_id' value='product_id'>
<input name='product_size' value='product_size'>
<input name='product_color' value='product_color'>
<input name='product_price' value='product_price'> 
```

当使用 URL 中的 user_id 访问网页时，我需要能够访问这些变量的值，这些变量与用户提供的特定用户和特定产品有关，例如[http://domain.com/page_template_1/user_id/产品标识](http://domain.com/page_template_1/user_id/product_id)。

现在，只有用户在登录时才能访问这些值。我需要这些值可供访问特定 url 的任何人访问，其中用户的自定义值是他的显示产品信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:58:05.013

查询可能如下所示：

```
<?php
$db_connection = new mysqli('localhost', 'root', 'root', 'test');
if ($db_connection->connect_errno) {
   echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}

$user_id = $_GET['user_id']; // from url
$product_id = $_GET['product_id']; // from url
// Make sure $db_connection matched your database connect script! Other wise it will come up with "Fatal error: Call to a member function prepare() on a non-object" error.
if($stmt = $db_connection->prepare("SELECT first_name, last_name, company_name, phone_number, product_id, product_size, product_color, product_price FROM table_name WHERE user_id = ? AND product_id = ?")) {
        $stmt->bind_param("ii", $user_id, $product_id);
        $stmt->execute();
        $stmt->bind_result($first_name, $last_name, $company_name, $phone_number, $product_id, $product_size, $product_color, $product_price);
        $stmt->fetch();
        echo $first_name;
        $stmt->close();
}
?> 
```

您可能还想使用 .htaccess 文件重写您的 url。如果你想让你的网址漂亮。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:07:04.297

For some reason, I couldn't get anything to work for me except the following. It could have been the way the rest of the code on my page is constructed. I don't know. But here is what I did which works. Kind of a pain to have to use $row->variable_name instead of $variable_name. But it works.

```
$db_connection = new mysqli("", "", "");
if ($db_connection->connect_errno) {
   echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " .       $mysqli->connect_error;
}

$id = $_GET['user_id'];
$query = mysql_query("SELECT * FROM table_name WHERE id = '$id' LIMIT 1") or die(mysql_error()); 
$row = mysql_fetch_object($query);

echo " // HTML GOES HERE

  $row->first_name
  $row->last_name
  $row->company_name

 "; 
```

# php - 附加到 PHP 中的多维数组

> ID：10955469
> 
> 赞同：0
> 
> 时间：2012-06-08T20:09:27.397
> 
> 标签：php

我正在尝试在电子商务网站中使用会话变量。这个想法是如果一个会话还没有开始，就开始一个会话。如果已经有一个会话，那么我想检查添加的新项目是否已经存在于会话数组中。如果是这样，那么我只会增加数量，如果没有，则附加到当前会话数组。

问题是附加不起作用。我得到了第一个和第二个数组，但不是添加第三个数组，而是在单击添加到购物车按钮时不断被覆盖。这是我的代码

```
<?php 

                if(isset($_SESSION['cart'])){
                    $newItems = '';
                    $cart = $_SESSION['cart'];
                    foreach($cart as $item => $value){
//$size, $colour, $quantity and $price are the current $_GET values
                        if($prodId == $value['prodId'] && $value['colour'] == $colour && $value['size'] == $size && $value['price'] == $price){
                            $value['qty']+= $quantity;
                            }else{
                                $newItems = array('prodId'=>$prodId,'price'=>$price,'qty'=>$quantity,'colour'=>$colour,'size'=>$size);
                                $cart []= $newItems;
                                }
                        }
                    }else{
                        $_SESSION['cart'] []= array('prodId'=>$prodId,'price'=>$price,'qty'=>$quantity,'colour'=>$colour,'size'=>$size);
                        }

?> 
```

真的不知道哪里出错了，我对多维数组的运气太差了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:13:56.127

您分配`$_SESSION['cart']`给一个变量，然后使用它。这只是一个副本，而不是对原始变量的引用。如果您想`$_SESSION`再次访问并操作它，您可以通过以下方式实现：

```
$cart = $_SESSION['cart'];
foreach($cart as $item => $value){
    if($prodId == $value['prodId'] && $value['colour'] == $colour && $value['size'] == $size && $value['price'] == $price){
        $_SESSION['cart'][$item]['qty']+= $quantity;
    }else{
        // ... 
```

- - 或者 - -

您只需在操作后再次分配`$cart`给.`$_SESSION['cart']``$cart`

# iphone - 带有页面控制重置的滚动视图

> ID：10955471
> 
> 赞同：0
> 
> 时间：2012-06-08T20:09:45.460
> 
> 标签：iphone, xcode, xcode4

好的，我有一个带有页面控件的滚动视图，可以在 2 个部分（2 页）之间正常工作。
所以我可以左右滚动一次。是否可以始终向右滚动？
就像您进入第 2 页时一样，它会向右扩展，但不允许向左滚动。
我不需要它来简单地添加另一个页面并有 3 页然后 4。在任何时候都应该只有 2 个。

我需要这个功能的原因是因为我将使用滚动来重置数据。当您向右滚动时，带有已清除字段的界面副本将出现在屏幕上，因为带有旧数据的界面将关闭。它是一种巧妙的重置方式，而不仅仅是一个无聊的旧按钮。

有人可以指出我如何做到这一点的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:51:44.623

这方面的例子很多。这里有一对。

[无限水平滚动](https://github.com/jordim/InfiniteHorizontalScroll-iOS)

[街道滚动器](http://developer.apple.com/library/ios/#samplecode/StreetScroller/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011102-Intro-DontLinkElementID_2)

希望这可以帮助。

# ruby-on-rails - Rails 中的条件文本颜色格式

> ID：10955472
> 
> 赞同：1
> 
> 时间：2012-06-08T20:09:48.440
> 
> 标签：ruby-on-rails, colors, string-formatting

我希望在我的观点中做一些条件格式。

因此，例如，如果我显示从字段返回的某个字符串，则文本将显示为红色。有谁知道这样做的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:18:09.917

您可以在文本到达视图之前对其进行预处理，以在文本中搜索要突出显示的字符串。如果您找到该字符串，您可以使用包含在 span 标记和类中的字符串对其进行 gsub。然后只需使用 css 应用颜色。

```
def method
  keywords = ["dog"]
  @string = "My dog has fleas"
  keywords.each do |kw|
    @string.gsub!(kw, "<span class='highlight'>#{kw}</span>")
  end
end

# css
span.highlight {color: red} 
```

# c# - appender 映射可以映射多个级别吗？

> ID：10955473
> 
> 赞同：2
> 
> 时间：2012-06-08T20:09:48.653
> 
> 标签：c#, log4net

我是 log4net 的新手，我尝试寻找答案，但找不到。为 a 创建映射时`appender`，可以指定多个级别吗？

例如目前我有

```
<appender name="EventLogAppender" type="log4net.Appender.EventLogAppender" >
  <applicationName value ="(snip)" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="(snip)" />
  </layout>
  <mapping>
    <level value="FATAL"/>
    <eventLogEntryType value="Error"/>
  </mapping>
  <mapping>
    <level value="ERROR"/>
    <eventLogEntryType value="Error"/>
  </mapping>
  <mapping>
    <level value="WARN"/>
    <eventLogEntryType value="Warning"/>
  </mapping>
  <mapping>
    <level value="INFO"/>
    <eventLogEntryType value="Information"/>
  </mapping>
  <mapping>
    <level value="DEBUG"/>
    <eventLogEntryType value="Information"/>
  </mapping>
</appender> 
```

我能以某种方式把它变成

```
<appender name="EventLogAppender" type="log4net.Appender.EventLogAppender" >
  <applicationName value ="(snip)" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="(snip)" />
  </layout>
  <mapping>
    <level value="FATAL"/>
    <level value="ERROR"/>
    <eventLogEntryType value="Error"/>
  </mapping>
  <mapping>
    <level value="WARN"/>
    <eventLogEntryType value="Warning"/>
  </mapping>
  <mapping>
    <level value="INFO"/>
    <level value="DEBUG"/>
    <eventLogEntryType value="Information"/>
  </mapping>
</appender> 
```

当我尝试它时它没有抛出任何错误，但我没有通过测试做足够的事情来查看它是否像我预期的那样表现。可以做到这一点，如果可以的话，我这样做的方式是正确的吗？

# ruby-on-rails - 如何使用 Rspec 和 Capybara 测试重定向

> ID：10955474
> 
> 赞同：27
> 
> 时间：2012-06-08T20:09:52.443
> 
> 标签：ruby-on-rails, ruby, rspec, capybara

我不知道我做错了什么，但每次我尝试测试重定向时，我都会收到此错误：“@request must be an ActionDispatch::Request”

```
context "as non-signed in user" do
  it "should redirect to the login page" do
    expect { visit admin_account_url(account, host: get_host(account)) }.to redirect_to(signin_path)
  end
end
1) AdminAccountPages Admin::Accounts#show as non-signed in user should redirect to the login page
     Failure/Error: expect { visit admin_account_url(account, host: get_host(account)) }.to redirect_to(signin_path)
     ArgumentError:
       @request must be an ActionDispatch::Request
     # ./spec/requests/admin_account_pages_spec.rb:16:in `block (4 levels) in <top (required)>' 
```

我将 RSpec-rails (2.9.0) 与 Capybara (1.1.2) 和 Rails 3.2 一起使用。如果有人也能解释为什么会发生这种情况，我将不胜感激；为什么我不能以这种方式使用期望？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-08T20:42:14.487

Capybara 不是特定于 rails 的解决方案，因此它对 rails 的渲染逻辑一无所知。

Capybara 专门用于集成测试，它本质上是从最终用户与浏览器交互的角度运行测试。在这些测试中，您不应该断言模板，因为最终用户无法深入了解您的应用程序。相反，你应该测试的是一个动作会让你走上正确的道路。

```
current_path.should == new_user_path
page.should have_selector('div#erro_div') 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-03-11T12:35:37.220

你可以这样做：

```
expect(current_path).to eql(new_app_user_registration_path) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-06-11T08:10:17.587

规格 3：

测试当前路径的最简单方法是：

`expect(page).to have_current_path('/login?status=invalid_token')`

与这种`have_current_path`方法相比，它有一个优势：

`expect(current_path).to eq('/login')`

因为您可以包含查询参数。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-06-09T18:55:53.373

错误消息`@request must be an ActionDispatch::Request`告诉您 rspec-rails 匹配器`redirect_to`（它委托给 Rails `assert_redirected_to`）期望它用于 Rails 功能测试（应该混合`ActionController::TestCase`）。您发布的代码看起来像 rspec-rails 请求规范。所以`redirect_to`不可用。

rspec-rails 请求规范不支持检查重定向，但在 Rails 集成测试中支持。

您是否应该明确检查重定向是如何进行的（它是 301 响应而不是 307 响应而不是某些 javascript）完全取决于您。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-08-05T11:35:28.960

这是我发现的骇人听闻的解决方案

```
# spec/features/user_confirmation_feature.rb

feature 'User confirmation' do
  scenario 'provide confirmation and redirect' do
    visit "/users/123/confirm"

    expect(page).to have_content('Please enter the confirmation code')
    find("input[id$='confirmation_code']").set '1234'

    do_not_follow_redirect do
      click_button('Verify')
      expect(page.driver.status_code).to eq(302)
      expect(page.driver.browser.last_response['Location']).to match(/\/en\//[^\/]+\/edit$/)
    end
  end

  protected

  # Capybara won't follow redirects
  def do_not_follow_redirect &block
    begin
      options = page.driver.instance_variable_get(:@options)
      prev_value = options[:follow_redirects]
      options[:follow_redirects] = false

      yield
    ensure
      options[:follow_redirects] = prev_value
    end
  end
end 
```

# javascript - Firefox 不喜欢 jquery 中的 .val？

> ID：10955477
> 
> 赞同：2
> 
> 时间：2012-06-08T20:09:58.173
> 
> 标签：javascript, jquery, internet-explorer, firefox

在 IE 中工作，在 Firefox 中，这两个字段是空白的，并且**名称**在 EditUserRoles 分配后未定义：

从gridview调用GetRows，调用editUserRoles

```
<asp:TemplateField HeaderText="Action">
                    <ItemTemplate>                       
                        <input type="button" id="btnEditUserRoles" style="width:60px;"  onclick="GetRows(this.parentNode.parentNode.rowIndex)" value="Edit" />
                    </ItemTemplate>
                </asp:TemplateField>

<input type="text" disabled="disabled" id="txtAkoUserName" />
<input type="text" id="txtUserName" />

function GetRows(index) {
        var userGrid = document.getElementById('<%=gridUserRoles.ClientID%>');
        EditUserRoles(index, userGrid);
    }
function EditUserRoles(rowIndex, userGrid) {
    if (null != userGrid) {
        var userName = userGrid.rows[rowIndex].cells[0].innerText;
        var name = userGrid.rows[rowIndex].cells[1].innerText;
        LoadEditForm(userName, name);
}

function LoadEditForm(userName, name) {
    $("#txtAkoUserName").val(userName);
    $("#txtUserName").val(name);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T20:17:34.660

[火狐不支持`innerText`](https://developer.mozilla.org/en/DOM/Node.textContent)。只需使用 jQuery 来避免这些跨浏览器问题（这就是它的用途）：

```
var userName = $(userGrid.rows[rowIndex].cells[0]).text();
var name = $(userGrid.rows[rowIndex].cells[1]).text(); 
```

# linux - 在 bash 中传递给函数的变量名称

> ID：10955479
> 
> 赞同：2
> 
> 时间：2012-06-08T20:10:15.543
> 
> 标签：linux, bash

bash 中有没有办法理解传递给它的变量的名称？

例子：

```
var1=file1.txt
err_var=errorfile.txt

function func1 {
   echo "func1: name of the variable is: " $1
   echo "func1: value of variable is: " $1 
   echo
   if [ ! -e $var1 ]
   then
      $1 = $err_val  #is this even possible?
   fi
   func2 $1
}

function func2 {
   echo "func2: name of the variable is: " $1
   echo "func2: value of variable is: " $1 
   echo
}

func1 $var1
func1 $err_var 
```

如果 file1.txt 存在，我希望得到以下输出：

```
func1: name of the variable is: var1
func1: value of variable is: file1.txt

func2: name of the variable is: var1
func2: value of variable is: file1.txt 
```

当 file1.txt 不存在时：

```
func1: name of the variable is: var1
func1: value of variable is: file1.txt

func2: name of the variable is: err_var
func2: value of variable is: errorfile.txt 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T20:19:24.550

No, the variable is expanded before the function sees it. The function only sees the value, not the variable name.

If you pass the variable name unexpanded and without the dollar sign, you can use indirection.

```
get_it () {
    echo "${!1}"
} 
```

Demo:

```
$ foo=bar
$ baz=qux
$ get_it foo
bar
$ get_it baz
qux 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-18T09:04:59.007

就像丹尼斯所说，一旦你使用美元符号扩展了变量，你的函数就不再有办法获取变量名。但是我认为您还询问了一种设置变量值的方法，而那部分还没有得到回答。有一些非便携式的方法可以做到这一点，比如`declare -n`（如果你感兴趣的话，谷歌），但我的回答是坚持一个通用的解决方案。

我是一名`C++`程序员，所以我喜欢模仿“ [getter and setter](https://en.wikipedia.org/wiki/Mutator_method) ”哲学，在这种哲学中，您可以使用微小的函数来获取和设置变量的值。使用 getter 和 setter 的缺点是您需要为要管理的每个值创建一个函数（或两个函数）。所以......我做了一个“工厂函数”来为你处理创建getter/setter：

```
makeGetSet() {
. /dev/fd/0 <<END_FUNC
${1}Val()  { [ "\${1}" ] && ${1}="\${1}" || echo "\${${1}}"; }
END_FUNC
} 
```

它不需要任何具有特殊功能的特定外壳，例如间接或`namerefs`实用`declare`程序。不`eval`，不`alias`，只有 100% POSIX。您只需将变量名称传递给，您的 getter/setter 函数具有相同的名称，并在末尾`makeGetSet`带有“ ”（例如）。用和测试。您可以结合我的函数继续使用“普通”shell 方式来读取/写入变量。`Val``myVariableVal``bash``dash`

用法：

```
Setup: makeGetSet myVariable
Set: myVariableVal newValue
Get: anotherVariable="`myVariableVal`"
Print: myVariableVal 
```

我不确定你剧本的几个部分，所以我做了一些有根据的猜测。你在哪里`if [ ! -e $var1 ]`，我想你的意思是`if [ ! -e $1 ]`。最后，在你调用函数的地方，你有`func1 $var1`and `func1 $err_var`，但我认为你的意思是只使用`func1 $var1`或有第三个变量。它看起来像是`$err_var`“错误的默认值”，而不是您作为输入提供的东西，但也许我没有遵循您的想法。

所以我对你的问题的回答如下：

```
var1=file1.txt; makeGetSet var1
err_var=errorfile.txt; makeGetSet err_var

function func1 {
   echo "func1: name of the variable is: " ${1%Val}
   echo "func1: value of variable is: " `${1}`
   echo
   # Shorter than if..fi
   [ ! -e `${1}` ] && ${1} ${err_val}
   func2 ${1}
}

function func2 {
   echo "func2: name of the variable is: " ${1%Val}
   echo "func2: value of variable is: " `${1}` 
   echo
}

func1 ${var1} 
```

# watir - Watir 安装错误

> ID：10955483
> 
> 赞同：1
> 
> 时间：2012-06-08T20:10:45.307
> 
> 标签：watir

我上周工作的电脑刚刚死机，所以现在我不得不再次安装 ruby​​ ruby​​ gem 和 Watir。但是这一次 Watir 不会安装。我收到此消息：我不明白错误的含义。请帮忙

```
C:\Users\kai.knutson\Desktop\Install\Dev Kti>ruby dk.rb init
[INFO] found RubyInstaller v1.9.3 at C:/Ruby193
[INFO] found RubyInstaller v1.9.3 at C:/Ruby193

Initialization complete! Please review and modify the auto-generated
'config.yml' file to ensure it contains the root directories to all
of the installed Rubies you want enhanced by the DevKit.

C:\Users\kai.knutson\Desktop\Install\Dev Kti>gem install watir
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing watir:
        ERROR: Failed to build gem native extension.

        C:/Ruby193/bin/ruby.exe extconf.rb
checking for ffi.h... no
checking for ffi.h in /usr/local/include... no
checking for rb_thread_blocking_region()... yes
checking for ruby_native_thread_p()... yes
checking for rb_thread_call_with_gvl()... yes
creating extconf.h
creating Makefile

make
generating ffi_c-i386-mingw32.def
Configuring libffi
make -C "/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/ffi_c/libffi"
make[1]: Entering directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/
ffi_c/libffi'
make "AR_FLAGS=" "CC_FOR_BUILD=" "CFLAGS=" "CXXFLAGS=" "CFLAGS_FOR_BUILD=" "CFLA
GS_FOR_TARGET=" "INSTALL=/usr/bin/install -c" "INSTALL_DATA=/usr/bin/install -c
-m 644" "INSTALL_PROGRAM=/usr/bin/install -c" "INSTALL_SCRIPT=/usr/bin/install -
c" "JC1FLAGS=" "LDFLAGS=" "LIBCFLAGS=" "LIBCFLAGS_FOR_TARGET=" "MAKE=make" "MAKE
INFO=/bin/sh /c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/ffi_c/libffi/mis
sing --run makeinfo " "PICFLAG=" "PICFLAG_FOR_TARGET=" "RUNTESTFLAGS=" "SHELL=/b
in/sh" "exec_prefix=/usr/local" "infodir=/usr/local/share/info" "libdir=/usr/loc
al/lib" "prefix=/usr/local" "AR=ar" "AS=as" "CC=gcc" "CXX=g++" "LD=c:/users/kai.
knutson/desktop/install/dev kti/mingw/mingw32/bin/ld.exe" "NM=/usr/mingw/bin/nm"
 "RANLIB=ranlib" "DESTDIR=" all-recursive
make[2]: Entering directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/
ffi_c/libffi'
Making all in include
make[3]: Entering directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/
ffi_c/libffi/include'
make[3]: Nothing to be done for `all'.
make[3]: Leaving directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/f
fi_c/libffi/include'
Making all in testsuite
make[3]: Entering directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/
ffi_c/libffi/testsuite'
make[3]: Nothing to be done for `all'.
make[3]: Leaving directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/f
fi_c/libffi/testsuite'
Making all in man
make[3]: Entering directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/
ffi_c/libffi/man'
make[3]: Nothing to be done for `all'.
make[3]: Leaving directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/f
fi_c/libffi/man'
make[3]: Entering directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/
ffi_c/libffi'
/bin/sh ./libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -I. -I./inc
lude -Iinclude -I./src  -Wall -g -fexceptions  -c -o src/debug.lo src/debug.c
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -Wa
ll -g -fexceptions -c src/debug.c  -DDLL_EXPORT -DPIC -o src/.libs/debug.o
/bin/sh ./libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -I. -I./inc
lude -Iinclude -I./src  -Wall -g -fexceptions  -c -o src/prep_cif.lo src/prep_ci
f.c
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -Wa
ll -g -fexceptions -c src/prep_cif.c  -DDLL_EXPORT -DPIC -o src/.libs/prep_cif.o

/bin/sh ./libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -I. -I./inc
lude -Iinclude -I./src  -Wall -g -fexceptions  -c -o src/types.lo src/types.c
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -Wa
ll -g -fexceptions -c src/types.c  -DDLL_EXPORT -DPIC -o src/.libs/types.o
/bin/sh ./libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -I. -I./inc
lude -Iinclude -I./src  -Wall -g -fexceptions  -c -o src/raw_api.lo src/raw_api.
c
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -Wa
ll -g -fexceptions -c src/raw_api.c  -DDLL_EXPORT -DPIC -o src/.libs/raw_api.o
/bin/sh ./libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -I. -I./inc
lude -Iinclude -I./src  -Wall -g -fexceptions  -c -o src/java_raw_api.lo src/jav
a_raw_api.c
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -Wa
ll -g -fexceptions -c src/java_raw_api.c  -DDLL_EXPORT -DPIC -o src/.libs/java_r
aw_api.o
/bin/sh ./libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -I. -I./inc
lude -Iinclude -I./src  -Wall -g -fexceptions  -c -o src/closures.lo src/closure
s.c
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -Wa
ll -g -fexceptions -c src/closures.c  -DDLL_EXPORT -DPIC -o src/.libs/closures.o

/bin/sh ./libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -I. -I./inc
lude -Iinclude -I./src  -Wall -g -fexceptions  -c -o src/x86/ffi.lo src/x86/ffi.
c
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -Wa
ll -g -fexceptions -c src/x86/ffi.c  -DDLL_EXPORT -DPIC -o src/x86/.libs/ffi.o
/bin/sh ./libtool   --mode=compile gcc -DHAVE_CONFIG_H -I.  -I. -I./include -Iin
clude -I./src  -I. -I./include -Iinclude -I./src  -c -o src/x86/win32.lo src/x86
/win32.S
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -I.
 -I./include -Iinclude -I./src -c src/x86/win32.S  -DDLL_EXPORT -DPIC -o src/x86
/.libs/win32.o
/bin/sh ./libtool --tag=CC   --mode=link gcc -Wall -g -fexceptions  -version-inf
o `grep -v '^#' ./libtool-version` -no-undefined  -o libffi.la -rpath /usr/local
/lib src/debug.lo src/prep_cif.lo src/types.lo src/raw_api.lo src/java_raw_api.l
o src/closures.lo    src/x86/ffi.lo src/x86/win32.lo
libtool: link: gcc -o .libs/libffi.dll.a  src/.libs/debug.o src/.libs/prep_cif.o
 src/.libs/types.o src/.libs/raw_api.o src/.libs/java_raw_api.o src/.libs/closur
es.o src/x86/.libs/ffi.o src/x86/.libs/win32.o     `echo "X" | /usr/bin/sed -e 1
s/^X// -e 's/ -lc$//'` -link -dll
c:/users/kai.knutson/desktop/install/dev kti/mingw/bin/../lib/gcc/mingw32/4.5.2/
../../../../mingw32/bin/ld.exe: cannot find -link
collect2: ld returned 1 exit status
make[3]: *** [libffi.la] Error 1
make[3]: Leaving directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/f
fi_c/libffi'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/f
fi_c/libffi'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/f
fi_c/libffi'
make: *** ["/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/ffi_c/libffi"/.li
bs/libffi_convenience.a] Error 2

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.1
1 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/ffi_c/gem_m
ake.out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:18:02.883

你完成安装devkit了吗？

根据您提供的内容，您只初始化了 devkit。您仍然需要安装它（https://github.com/oneclick/rubyinstaller/wiki/Development-Kit）。跑：

```
ruby dk.rb install 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:18:50.173

请按照[Windows 安装说明](https://github.com/zeljkofilipin/watirbook/blob/master/installation/windows.md)进行操作。

请注意：

> 文档说路径中的空格可能会导致麻烦，这通常是这种情况。安装到 C:\devkit

（您已将 devkit 安装到`C:\Users\kai.knutson\Desktop\Install\Dev Kti`.）

此外，在`ruby dk.rb init`您忘记执行`ruby dk.rb install`.

# android - 在 Android 中更改通知意图

> ID：10955484
> 
> 赞同：3
> 
> 时间：2012-06-08T20:10:45.797
> 
> 标签：android, android-intent, android-service, android-notifications

我有一个服务，它显示一个通知，我希望每次用户按下它时都能转到我的应用程序的特定活动。通常它会是用户显示的最后一个，但并非总是如此。

如果活动之前启动过，它应该返回到它，如果没有，它应该在应用程序的任务中打开它，将它添加到活动任务中。

此外，在某些情况下，根据服务的逻辑，我希望更改通知的意图，以便它针对不同的活动。

我怎么做？是否可以不创建新通知并取消之前的通知？是否也可以不创建新任务或活动实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:19:32.250

不，一旦您发送通知，就不可能更改活动。

您可以在没有问题的任务堆栈上启动一个 Activity，请在此处查看教程中的通知服务：

[http://blog.blundell-apps.com/notification-for-a-user-chosen-time/](http://blog.blundell-apps.com/notification-for-a-user-chosen-time/)

您必须在通知上设置待处理的意图：

```
 // The PendingIntent to launch our activity if the user selects this notification
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, new Intent(this, SecondActivity.class), 0);

        // Set the info for the view that shows in the notification panel.
        notification.setLatestEventInfo(this, title, text, contentIntent); 
```

您可以看到待处理的意图采用正常的意图“ `new Intent(this, SecondActivity.class`”，因此如果您想要特定的行为（例如将其带到顶部而不是开始新的活动。像往常一样将标志添加到此意图。即[FLAG_ACTIVITY_REORDER_TO_FRONT](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT)（[类似的东西](http://developer.android.com/reference/android/content/Intent.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T00:13:35.740

从平台版本 11 开始，您可以使用 Notification.Builder 构建通知。v4 支持库有一个等效类 NotificationCompat.Builder。

发送通知后，您无法更改 Activity，但可以使用新 Intent 更新通知。创建 PendingIntent 时，使用标志 FLAG_CANCEL_CURRENT。当您发送新通知时，请在调用 NotificationManager.notify() 时使用现有通知的 ID。

此外，您应该小心如何启动您的应用程序。状态栏通知指南告诉您如何设置后台堆栈。

# haskell - c2hs - 匿名枚举？

> ID：10955490
> 
> 赞同：3
> 
> 时间：2012-06-08T20:11:12.500
> 
> 标签：haskell, ghc, c2hs

c2hs 参考（又名“教程”）提到了 C 枚举的名称作为非可选参数。有没有办法让它与匿名枚举一起工作？仅给定一个枚举成员就可以确定要生成的枚举，或者即使不可能，至少应该可以通过显式命名枚举成员来生成枚举。

澄清：

给定一个枚举

```
enum {
A,
B,
C,
D
}; 
```

我想要一些类似的东西

```
{#enum {A,B,C,D} as MyEnum #} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:23:18.957

枚举定义工作（与文档相反）

```
{# enum define MyEnum { A as A, B as B, C as C, D as D } #} 
```

# r - 如何在R中从csv中绘制多条线

> ID：10955493
> 
> 赞同：2
> 
> 时间：2012-06-08T20:11:21.113
> 
> 标签：r

我刚开始使用 R 并且想知道如何绘制一条线。使用我的一个工具，我正在做生成 csv 文件的回归。格式如下：

```
X ,Y, Y1,Y2 
```

从这个 csv 文件中，我喜欢画三行作为`(x,y)`,`(x,y1)`和`(x,y2)`. 如何从 csv 文件中执行此操作？抱歉它的基本问题，但如果有人帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T20:29:04.897

`matplot`如果您想使用基本 R，我可能会使用：

```
#Fake data
x <- data.frame(x = 1:100, y1 = rnorm(100), y2 = runif(100))
#Plot
matplot(x[,1], x[, -1], type="l", lty = 1)
#Everyone needs a little legend love
legend("topright", legend = colnames(x)[-1], fill=seq_along(colnames(x)[-1])) 
```

![在此处输入图像描述](../Images/86277590bbc9da4115266dbfa0f1c60b.png)

或者，我会使用 ggplot2

```
library(ggplot2)
library(reshape2)
#Melt into long format with first column as the id variable
x.m <- melt(x, id.vars = 1)
#Plot it
ggplot(x.m, aes(x, value, colour = variable)) +
  geom_line() +
  theme_bw() 
```

![在此处输入图像描述](../Images/bab8bfb8b5bb73f5455aa487a8e827ac.png)

当您查看该问题时，该答案与右侧弹出的相关答案和其他几个[答案](https://stackoverflow.com/questions/5479822/plotting-4-curves-in-a-single-plot-with-3-y-axes-in-r/5481187#5481187)非常相似。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T20:19:25.083

```
yourData <- read.csv("yourCSV.csv")
with(yourData, plot(X, Y, type = "l"))
with(yourData, lines(X, Y1))
with(yourData, lines(X, Y2)) 
```

另请参阅`?abline`。

# c# - Powerpoint 2010 多个实例

> ID：10955496
> 
> 赞同：2
> 
> 时间：2012-06-08T20:11:49.450
> 
> 标签：c#, vsto, powerpoint, office-interop

我在这里看到了很多关于这个主题的帖子，但似乎没有一个直接回答这个问题。我想控制在第二台显示器上运行的两个 Powerpoint 实例。

理想的解决方案如下所示：

```
PowerPoint.Application PPTViewer1 = new PowerPoint.Application();
PowerPoint.Application PPTViewer2 = new PowerPoint.Application(); 
```

我可以手动执行此操作，只需启动两个 PowerPoint 实例、加载演示文稿并从每个实例启动幻灯片放映。我可以手动在两个幻灯片放映之间来回切换，每个幻灯片都按预期被带到前面。

那么...如何使用 VSTO 和 C# 以编程方式执行此操作？像我之前的其他人一样，我看到 Interop.PowerPoint 界面将只创建单个实例。如果不是这样，那么我可以很容易地达到我正在寻找的结果。

此外，我不是在为这项任务寻找第三方组件。

任何帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:56:38.033

看起来您正在运行多个 Powerpoint 实例，但实际上并非如此。它只允许它自己的一个实例。如果您在任务列表中看到两个 Powerpnt.exe 实例（有时会发生这种情况），这意味着出现问题并在内存中留下了一个僵尸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:29:22.197

可能并不完全理想，但[这里有一个参考](http://pleasemakeanote.blogspot.com/2008/06/multiple-instances-of-powerpoint.html?m=1)建议以不同的用户身份启动实例（请注意，此站点适用于 PowerPoint 2007）。

```
runas /user:username "C:\Program Files\Microsoft Office\Office12\POWER PNT.EXE" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:31:18.143

Powerpoint COM 对象的每个实例共享同一个全屏显示窗口。我知道没有办法切换哪个演示文稿有那个窗口

解决方案是在您自己的窗口中托管 Powerpoint 显示

因此，这允许您缩放窗口并在一台显示器上显示多个演示文稿，或者将其从一台显示器移动到另一台显示器？

例如

```
var display1 = new FullScreenDisplay(); // A form with BorderStyle = None
display1.Show();
application1 = new PowerPoint.Application();
presentation1 = application1.Presentations.Open2007(....);
var slideShowSettings1 = presentation1.SlideShowSettings;
slideShowSettings1.ShowType = PowerPoint.PpSlideShowType.ppShowTypeSpeaker;
var slideShowWindow1 = slideShowSettings1.Run();
IntPtr hwnd1 = (IntPtr)slideShowWindow1.HWND;
SetParent(hwnd1, display1.Handle);

var display2 = new FullScreenDisplay();
display2.Show();
application2 = new PowerPoint.Application();
presentation2 = application2.Presentations.Open2007(....);
var slideShowSettings2 = presentation2.SlideShowSettings;
slideShowSettings2.ShowType = PowerPoint.PpSlideShowType.ppShowTypeSpeaker;
var slideShowWindow2 = slideShowSettings2.Run();
IntPtr hwnd2 = (IntPtr)slideShowWindow2.HWND;
SetParent(hwnd2, display2.Handle);

display1.BringToFront(); // to show slideshow 1
// or
display2.BringToFront(); // to show slideshow 2

// To advance a slide
presentation1.SlideShowWindow.View.Next();
// or
presentation2.SlideShowWindow.View.Next();

// To exit, note order!
presentation2.SlideShowWindow.View.Exit();
presentation1.SlideShowWindow.View.Exit();
Application.Exit(); 
```

这是一个 hack，可能无法在未来的 Powerpoint 版本中使用？

您还需要此导入

```
[DllImport("user32.dll", SetLastError = true)]
static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent); 
```

# iphone - 分析时 Instruments.app 崩溃

> ID：10955500
> 
> 赞同：3
> 
> 时间：2012-06-08T20:12:36.937
> 
> 标签：iphone, objective-c, ios, xcode, instruments

当我尝试在设备上进行分析时 Instruments.app 崩溃。它在模拟器中运行良好。

这发生在所有仪器上——时间分析仪、泄漏等。我可以使用能量诊断仪器。

我试过：

*   确保应用程序设置为调试模式（也尝试使用发布模式）
*   重新安装 xcode
*   重新启动设备/计算机
*   应用程序运行后附加到进程

我的主要设备是运行 5.1 的 iPhone 4，已越狱，但这也发生在运行 4.3.x 的未越狱 iPhone 上

如果您对为什么会发生这种情况有任何想法，请告诉我。

下面的部分崩溃日志

```
Process:         Instruments [12983]
Path:            /Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/MacOS/Instruments
Identifier:      com.apple.dt.Instruments
Version:         4.3 (4321)
Build Info:      Instruments-4321000000000000~2
Code Type:       X86-64 (Native)
Parent Process:  launchd [253]

Date/Time:       2012-06-08 16:27:06.214 -0400
OS Version:      Mac OS X 10.7.4 (11E53)
Report Version:  9
Sleep/Wake UUID: 1556D9E2-2B8A-4A76-A591-F8ACEF479C31

Interval Since Last Report:          24319 sec
Crashes Since Last Report:           8
Per-App Interval Since Last Report:  13147 sec
Per-App Crashes Since Last Report:   7
Anonymous UUID:                      A73B414D-9FB6-4055-94D3-A887EB7ADFFD

Crashed Thread:  7

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000004

VM Regions Near 0x4:
--> 
    __TEXT                 0000000101a71000-0000000101a76000 [   20K] r-x/rwx SM=COW  /Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/MacOS/Instruments

Application Specific Information:
objc[12983]: garbage collection is OFF

Thread 0:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x00007fff849ab67a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff849aad71 mach_msg + 73
2   com.apple.framework.IOKit       0x00007fff826899bf io_service_get_matching_services + 210
3   com.apple.framework.IOKit       0x00007fff82641604 IOServiceGetMatchingServices + 137
4   com.apple.framework.IOKit       0x00007fff82641741 IOServiceGetMatchingService + 25
5   com.apple.Foundation            0x00007fff85f7710b +[NSFileWrapper _canSafelyMapFilesAtPath:] + 241
6   com.apple.Foundation            0x00007fff85f1c510 -[NSData(NSData) initWithContentsOfFile:options:error:] + 139
7   com.apple.Foundation            0x00007fff85f83b48 -[NSData(NSData) initWithContentsOfURL:options:error:] + 238
8   com.apple.AppKit                0x00007fff89e6e387 NSImageRepNewDataFromFileURL + 247
9   com.apple.AppKit                0x00007fff89aa00fc +[NSImageRep _imageRepsWithContentsOfURL:expandImageContentNow:giveUpOnNetworkURLsWithoutGoodExtensions:] + 548
10  com.apple.AppKit                0x00007fff89a9fe9a __-[NSImageURLReferencingRepProvider representations]_block_invoke_1 + 48
11  com.apple.Foundation            0x00007fff85f34347 _NSFaultInObject + 35
12  com.apple.AppKit                0x00007fff89a70ae7 -[NSImageURLReferencingRepProvider representations] + 80
13  com.apple.AppKit                0x00007fff89a9fd7e __-[NSImage size]_block_invoke_1 + 353
14  com.apple.AppKit                0x00007fff89a2b825 -[NSImage _usingRepProviderPerformBlock:] + 37
15  com.apple.AppKit                0x00007fff89a596c2 -[NSImage size] + 129
16  com.apple.AppKit                0x00007fff89a9f9a6 -[NSImage alignmentRect] + 51
17  com.apple.AppKit                0x00007fff89b08de5 -[NSImageCell _imageRectForDrawing:inFrame:inView:] + 43
18  com.apple.AppKit                0x00007fff89b08c6b -[NSImageCell drawInteriorWithFrame:inView:] + 541
19  com.apple.AppKit                0x00007fff89b08a28 -[NSImageCell drawWithFrame:inView:] + 1705
20  com.apple.AppKit                0x00007fff89a9ddb7 -[NSControl drawRect:] + 398
21  com.apple.AppKit                0x00007fff89a6997a -[NSView _drawRect:clip:] + 3758
22  com.apple.AppKit                0x00007fff89a96b4f -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 1583
23  com.apple.AppKit                0x00007fff89a96f7b -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 2651
24  com.apple.AppKit                0x00007fff89a96f7b -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 2651
25  com.apple.AppKit                0x00007fff89a96f7b -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 2651
26  com.apple.AppKit                0x00007fff89a96f7b -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 2651
27  com.apple.AppKit                0x00007fff89a96f7b -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 2651
28  com.apple.AppKit                0x00007fff89a96f7b -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 2651
29  com.apple.AppKit                0x00007fff89a96f7b -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 2651
30  com.apple.AppKit                0x00007fff89a66f55 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 1032
31  com.apple.AppKit                0x00007fff89a6644f -[NSThemeFrame _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 270
32  com.apple.AppKit                0x00007fff89a6186f -[NSView _displayRectIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:] + 4755
33  com.apple.AppKit                0x00007fff89a5a2ed -[NSView displayIfNeeded] + 1676
34  com.apple.dt.instruments.InstrumentsKit 0x0000000101a8e155 -[XRSplitViewAnimation setCurrentProgress:] + 81
35  com.apple.AppKit                0x00007fff89bec62d -[NSAnimation(NSInternal) _advanceTimeWithTimer:] + 156
36  com.apple.Foundation            0x00007fff85f4ef40 __NSFireTimer + 102
37  com.apple.CoreFoundation        0x00007fff8689b934 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 20
38  com.apple.CoreFoundation        0x00007fff8689b486 __CFRunLoopDoTimer + 534
39  com.apple.CoreFoundation        0x00007fff8687be11 __CFRunLoopRun + 1617
40  com.apple.CoreFoundation        0x00007fff8687b486 CFRunLoopRunSpecific + 230
41  com.apple.Foundation            0x00007fff85f02f7b -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 267
42  com.apple.AppKit                0x00007fff89cc956c -[NSAnimation(NSInternal) _runBlocking] + 365
43  com.apple.dt.instruments.InstrumentsKit 0x0000000101a8e058 -[XRHorizontalFillSplitView animateSplitFromPosition:toPosition:] + 377
44  com.apple.dt.instruments.InstrumentsKit 0x0000000101a8dc86 -[PFTTraceDocument animateLowerVisibility:] + 215
45  com.apple.dt.instruments.InstrumentsKit 0x0000000101aaa3e5 -[PFTTraceDocument toggleDetail:] + 71
46  com.apple.dt.instruments.InstrumentsKit 0x0000000101aaa320 -[PFTTraceDocument _didStartCommand:] + 238
47  com.apple.Foundation            0x00007fff85f0dd0e __-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_1 + 47
48  com.apple.CoreFoundation        0x00007fff8688f7ba _CFXNotificationPost + 2634
49  com.apple.Foundation            0x00007fff85ef9fc3 -[NSNotificationCenter postNotificationName:object:userInfo:] + 65
50  com.apple.dt.instruments.InstrumentsPlugIn  0x0000000101c5f8c7 -[XRTrace startCommandWithPurpose:] + 1546
51  com.apple.dt.instruments.InstrumentsKit 0x0000000101aa8d4d -[PFTTraceDocument startRun] + 164
52  com.apple.dt.instruments.InstrumentsKit 0x0000000101aa8b55 -[PFTTraceDocument recordTrace:] + 599
53  com.apple.dt.instruments.InstrumentsKit 0x0000000101ae370d -[PFTDocumentController openDocumentWithContentsOfURL:display:error:] + 2769
54  com.apple.dt.instruments.InstrumentsKit 0x0000000101ae3f3a -[PFTDocumentController _templateChooserActionEnded:returnCode:contextInfo:] + 494
55  com.apple.AppKit                0x00007fff89cd13df -[NSApplication endSheet:returnCode:] + 275
56  com.apple.imageKit              0x00007fff896992fb -[IKImageBrowserView(ImageBrowserEvents) mouseUp:] + 649
57  com.apple.AppKit                0x00007fff89aea40e -[NSWindow sendEvent:] + 6504
58  com.apple.AppKit                0x00007fff89a83a55 -[NSApplication sendEvent:] + 5593
59  com.apple.dt.Instruments        0x0000000101a7339f 0x101a71000 + 9119
60  com.apple.AppKit                0x00007fff89a1a0c6 -[NSApplication run] + 555
61  com.apple.AppKit                0x00007fff89c96244 NSApplicationMain + 867
62  com.apple.dt.Instruments        0x0000000101a73724 0x101a71000 + 10020 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:03:49.247

似乎已使用 Instruments 4.4 修复

# ruby-on-rails-3 - Rails 3 与 Carrierwave 和 Simple Form 的多态关联

> ID：10955501
> 
> 赞同：1
> 
> 时间：2012-06-08T20:12:38.443
> 
> 标签：ruby-on-rails-3, activerecord, carrierwave, polymorphic-associations, simple-form

我正在尝试为使用 Carrierwave 处理的照片上传设置多态关联。我正在使用简单表单来构建我的表单。我觉得关联是正确的，所以我想知道我的问题是否只是表单或控制器的问题。

以下是我的联想：

属性.rb：

```
class Property < ActiveRecord::Base
  attr_accessible :image
  ...
  has_many :image, :as => :attachable
  ...
end 
```

单位.rb

```
class Unit < ActiveRecord::Base
  attr_accessible :image
  ...
  has_many :image, :as => :attachable
end 
```

图片.rb

```
class Image < ActiveRecord::Base
  belongs_to :attachable, :polymorphic => true
  mount_uploader :image, PhotoUploader
end 
```

properties_controller.rb：

```
def edit
    @property = Property.find params[:id]
    @property.image.build if @property.image.empty?
end

def update
    @property = Property.find params[:id]
    if @property.update_attributes params[:property]
        redirect_to admin_properties_path, :notice => 'The property has been successfully updated.'
    else
        render "edit"
    end
end 
```

来自属性/_form.html.erb 的片段

```
<%= f.input :image, :label => 'Image:', :as => :file %> 
```

这是我在提交附加图像时遇到的错误：

```
undefined method `each' for #<ActionDispatch::Http::UploadedFile:0x00000102291bb8> 
```

这是参数：

```
{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"lvB7EMdc7juip3gBZD3XhCLyiv1Vwq/hIFdb6f1MtIA=",
 "property"=>{"name"=>"Delaware Woods",
 "address"=>"",
 "city"=>"",
 "state"=>"",
 "postal_code"=>"",
 "description"=>"2 bedroom with large kitchen.  Garage available",
 "incentives"=>"",
 "active"=>"1",
 "feature_ids"=>[""],
 "user_ids"=>[""],
 "image"=>#<ActionDispatch::Http::UploadedFile:0x00000102291bb8 @original_filename="wallpaper-4331.jpg",
 @content_type="image/jpeg",
 @headers="Content-Disposition: form-data; name=\"property[image]\"; filename=\"wallpaper-4331.jpg\"\r\nContent-Type: image/jpeg\r\n",
 @tempfile=#<File:/tmp/RackMultipart20120608-3102-13f3pyv>>},
 "commit"=>"Update Property",
 "id"=>"18"} 
```

我到处寻找有关多态关联的帮助，但一无所获。我见过看起来很简单的简单例子。我注意到的一件事是，在我的案例中，has_many 关联似乎在很多示例中应该是`images`而不是`image`。但是，当我这样做时，我得到一个错误：

```
Can't mass-assign protected attributes: image 
```

正如我在其他博客中看到的那样，我已经尝试更新我的表单以使用 fields_for ：

```
<%= f.input :image, :label => "Photo", :as => :file %>

<% f.simple_fields_for :images do |images_form| %>
        <%= images_form.input :id, :as => :hidden %>
        <%= images_form.input :attachable_id, :as => :hidden %>
        <%= images_form.input :attachable_type, :as => :hidden %>
        <%= images_form.input :image, :as => :file %>
<% end %> 
```

我所知道的是我有一段时间让它工作。我对 Rails 很陌生，所以即使调试它也很困难。调试器在 3.2 中不能真正工作并没有帮助 :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:29:49.487

由于您的模型有 :images （应该是 :images，而不是 :image），因此您需要在视图中使用nested_forms。您应该在单元和属性模型上设置accepts_nested_attributes_for :images，并将attr_accessible 从:image 更改为:image_attributes。

查看[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)了解如何使用它的好指南。

# c# - 当程序集包含引用另一个程序集的类型时使用反射

> ID：10955505
> 
> 赞同：1
> 
> 时间：2012-06-08T20:12:58.100
> 
> 标签：c#

我从以下代码中得到一个 ReflectionTypeLoadException ：

```
var myAssembly = Assembly.LoadFrom(myDLL);    
var types = myAssembly.GetTypes()) 
```

myDLL 引用了另一个程序集中的另一个文件（“myDependency.dll”）中的一个类，
我确保该文件位于应用程序目录中，并且与“myDLL”文件位于同一文件夹中。

在这种情况下如何能够正确加载 myDLL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:31:03.903

我会尝试打电话：

```
AssemblyName[] referenced = myAssembly.GetReferencedAssemblies(); 
```

然后在调用之前遍历 AssemblyName 对象并尝试加载这些对象`myAssembly.GetTypes()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:37:38.247

1.  确保您的所有程序集（dll 和 exe 包括引用的程序集）都是最新的（平台、配置和版本/构建日期）并且在您的 exe 目录中。

    尝试在构建之前删除所有项目的 OBJ 和 BIN 目录以帮助验证这一点。

2.  确保 GAC 中没有其他版本或 %PATH% 中的目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T22:04:53.460

好吧，我很自豪地宣布，我已经在 Visual Studio 2010 （我猜）引起的一些愚蠢的“眼睛持久性”现象上宠坏了我的星期五晚上。我只是将我的 DependencyDLL 项目复制粘贴到一个全新的程序集/项目中，删除旧的，更新旧的引用以指向新的 DependencyDLLNew，然后瞧：成功了。问题解决了。感谢那些帮助过的人。

# wpf - 展开多个 WPF 扩展器部分

> ID：10955506
> 
> 赞同：1
> 
> 时间：2012-06-08T20:13:00.353
> 
> 标签：wpf, xaml

我在 WPF 中有一个扩展器，我想知道你是如何制作它的，这样你就可以一次扩展多个区域。每次我点击一个部分，之前打开的部分就会关闭。我希望它保持开放。有没有办法做到这一点？此扩展器位于 ListBox 中，这就是它们有多个的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:16:40.447

我想到了。只要您不设置 IsExpanded 属性，就可以了。

# c# - 如何自动扩大/缩小工人？

> ID：10955514
> 
> 赞同：0
> 
> 时间：2012-06-08T20:14:35.503
> 
> 标签：c#, multithreading, scalability, worker

如何自动扩展工作任务？

我有一个应用程序，我想自动扩展工作任务的数量以适应要处理的项目的吞吐量（显然对工作人员的数量有最大限制）。

所有要处理的项目都通过一个点进行路由，从那里它们被分配到工作任务中（现在我找到具有最短队列的工作人员，并将项目排入队列）。

什么是一个好的模式或技术可以用来做出一些明智的决定，比如我应该让多少工人来处理这些物品？如果项目能够由较少的工人及时处理，则此逻辑需要包括关闭工人。

我意识到添加更多的工人不会无限扩展，因为最终其他资源会成为瓶颈，并且在某些时候增加更多的工人会比帮助更多。如果我能解释这一点，并决定减少工人的数量以自动找到“最佳位置”，那就太好了，但是在这一点上，如果我的系统可以增加工人的数量，我会很高兴的添加更多项目，然后在需要较少项目时减少数量。

我玩弄过的一个想法是测量一个项目在队列中的平均时间。如果这个平均时间大于几秒钟，我应该启动更多的工人（直到达到设定的最大限制）。如果平均时间少于 1 秒，我应该减少更多的工人（当然，直到只剩下一个）。

有人对解决此问题的最佳方法有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T18:28:15.997

You could also compute a global running average of number of queued task per seconds, and divide by maximum task per seconds one worker can process. This will give you the number of worker you need to not fall behind.

You also want to introduce a delay, (if for x seconds there is less worker then needed increase) (if for x seconds there is more worker then needed decrease).

This assume all task take the same amount of time to process and that all your worker have the same throughput.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:28:18.740

除非您可以将工作分解为可以在工作人员之间分配的块，否则您将无法扩展。你如何分配这项工作实际上取决于你如何分解工作。如果您将工作分解为较小的块，其结果在完成后合并，那么 map/reduce 模式可能符合要求......

不管你做什么，要记住的一件事是，一旦你运行的线程多于 CPU，你的性能就会急剧下降。这是因为您增加/引入了非常昂贵的上下文切换。使用 TPL 和 PLINQ 之类的东西可以让您安排任务并避免这个问题。

# c# - 通过描述获取枚举值

> ID：10955517
> 
> 赞同：2
> 
> 时间：2012-06-08T20:14:55.220
> 
> 标签：c#, .net, enums

> **可能重复：**
> [从描述属性中获取枚举](https://stackoverflow.com/questions/4367723/get-enum-from-description-attribute)

我有一个使用 descriptions 属性的枚举。我希望能够根据传入的字符串设置对象-> 属性值。如果字符串与枚举值描述之一匹配，则应该选择该值。我是否可以在不使用冗长的 for 循环的情况下做到这一点？

```
public enum Rule
{
     ....
     [Description("New Seed")]
     Rule2 = 2,
     ....
} 
```

我希望是这样的

```
var object = new oject{ rule = Rule.Where(r=> r.description == rulestring)} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:26:45.607

```
 Rule f;
        var type = typeof(Rule);
        foreach (var field in type.GetFields())
        {
            var attribute = Attribute.GetCustomAttribute(field,
                typeof(DescriptionAttribute)) as DescriptionAttribute;
            if (attribute != null)
            {
                if (attribute.Description == "description"){
                    f = (Rule)field.GetValue(null);
                break;}
            }
            else
            {
                if (field.Name == "description"){
                    f = (Rule)field.GetValue(null);
                break;}
            }
        } 
```

ref：[从描述属性中获取枚举](https://stackoverflow.com/questions/4367723/get-enum-from-description-attribute)

# c# - 单场比赛中有多个正则表达式选项？

> ID：10955518
> 
> 赞同：2
> 
> 时间：2012-06-08T20:14:59.990
> 
> 标签：c#, .net, regex

**是否有任何选项可以在单个Regex.Match**方法中使用多个REgexOptions ？

假设我想在 Regex.Match 方法中使用**RegexOptions.IgnoreCase**和**RegexOptions.Singleline**。

我就想要这样......

```
Match m=Regex.Match(input,pattern, more than one regexoptions); 
```

可能吗 ？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T20:15:58.770

与所有表示位标志的枚举类型一样，您可以使用按位 OR 运算符`|`, 来组合多个标志：

```
Match m = Regex.Match(
    input, pattern, RegexOptions.IgnoreCase | RegexOptions.Singleline ); 
```

有关详细信息，请参阅 MSDN 上的[枚举类型](http://msdn.microsoft.com/en-us/library/cc138362.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:16:18.247

```
Regex.Match(subjectString, @"regex", RegexOptions.Singleline | RegexOptions.IgnoreCase); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T20:16:22.373

`FlagsAttribute`这正是`enum`.

# jquery-plugins - jquery插件创建问题

> ID：10955519
> 
> 赞同：0
> 
> 时间：2012-06-08T20:15:01.383
> 
> 标签：jquery-plugins, jquery

我创建了一个包含以下代码的插件：

```
var myplugin = {
    init: function(options) {
         $.myplugin.settings = $.extend({}, $.myplugin.defaults, options);
    },
    method1: function(par1) {
        .....
    },
    method2: function(par1) {
        .....
    }
};
$.myplugin = function(method){
     if ( myplugin[method] ) {
    return myplugin[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
     } else if (typeof method === 'object' || !method) {
        return myplugin.init.apply(this, arguments);
     } else {
    $.error( 'Method "' +  method + '" does not exist in myplugin!');
     }
};
$.myplugin.defaults = {
     option1: 'test',
     option2: '',
     option3: ''
};
$.myplugin.settings = {};
$.myplugin(); 
```

这很好用，但问题是当我尝试设置超过 1 个选项并尝试在之后返回其值时，它会给出空值；设置一个选项效果很好。例如。如果在更改第一个组合框值时，我称之为： $.myplugin({option1: 'first test'}); 它可以工作，但是当我尝试在第二个组合框中调用另一个时，它不会保存该选项，而是重置为空。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:54:15.593

我将重新组织插件以使用此结构：

```
var methods = {
    settings: {
        foo: "foo",
        bar: "bar"
    },
    init: function(options) {
        this.settings = $.extend({}, this.settings, options);
    },
    method1: function(par1) {
        alert(this.settings.foo);
    },
    method2: function(par1) {
        alert(this.settings.bar);
    }
};

function MyPlugin(options) {
    this.init(options);
    return this;
}
$.extend(MyPlugin.prototype, methods);
$.myPlugin = function(options) {
    return new MyPlugin(options);
}

/* usage */

// without parameters
var obj1 = $.myPlugin();
// with parameters
var obj2 = $.myPlugin({foo: "foobar"});
// each has it's own settings
obj1.method1();
obj2.method1(); 
```

演示：http: [//jsfiddle.net/ypXdS/](http://jsfiddle.net/ypXdS/)

本质上`$.myPlugin`只是创建并返回 MyPlugin 类的一个新实例。你可以完全摆脱它并`new myPlugin(options)`在它的地方使用。

# r - RTextTools 中的德语词干

> ID：10955521
> 
> 赞同：4
> 
> 时间：2012-06-08T20:15:09.410
> 
> 标签：r, unicode, nlp, non-english

我正在尝试使用 RTextTools 附带的德语词干分析器，但我得到的结果非常不符合标准。

说，我有以下向量：

```
v <- c("groß", "größer", "am", "größten", "ähnlicher") 
```

使用

```
library(RTextTools)
wordStem(v, "german") 
```

我明白了

```
[1] "groß"    "größer"  "am"      "größten" "ähnlich" 
```

我错过了什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:13:48.377

Snowball 中的算法

```
/*
    Extra rule for -nisse ending added 11 Dec 2009
*/

routines (
           prelude postlude
           mark_regions
           R1 R2
           standard_suffix
)

externals ( stem )

integers ( p1 p2 x )

groupings ( v s_ending st_ending )

stringescapes {}

/* special characters (in ISO Latin I) */

stringdef a"   hex 'E4'
stringdef o"   hex 'F6'
stringdef u"   hex 'FC'
stringdef ss   hex 'DF'
...... 
```

看起来它被翻译回'DF'“ß”

用 e 表示变音符号 德语字母 ä、ö 和 ü，有时分别用 ae、oe 和 ue 表示。这里的词干分析器是主要德语词干分析器的变体，以考虑到这一点。

主要的德语词干分析器以规则开头，

```
First, replace ß by ss, and put u and y between vowels into upper case. 
```

这被规则取代，

```
Put u and y between vowels into upper case, and then do the following mappings,

    (a) replace ß with ss, **"MAYBE WRONG ORDER"**
    (a) replace ae with ä,
    (a) replace oe with ö,
    (a) replace ue with ü unless preceded by q. 

So in quelle, ue is not mapped to ü because it follows q, and in feuer it is not mapped because the first part of the rule changes it to feUer, so the u is not found. 
```

# php - 需要迭代器建议来遍历树

> ID：10955523
> 
> 赞同：1
> 
> 时间：2012-06-08T20:15:31.947
> 
> 标签：php, iterator, spl

嗨，我需要一些迭代器建议。

我有一个 Category 对象，它可以包含一组项目，也可以有子类别。

从学说 ORM 我确实得到了一个类别对象的集合。现在我想遍历这个集合并展平类别树结构。因此，子类别与其父类别处于同一级别。我也想过滤孩子。

也许有人可以指出我正确的方向，目前在迭代器云中有点迷失。

```
<?php

class Category
{
    private $name;

    private $children;

    private $type;

    private $parent;

    private $items;

    //parent category
    public function getParent()
    {
        return $this->parent;
    }

    public function setItems($items)
    {
        $this->items = $items;
    }

    public function getItems()
    {
        return $this->items;
    }

    //colelction of categories
    public function getChildren()
    {
        return $this->children;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T21:32:26.177

您只需要实现[RecursiveIterator](http://www.php.net/manual/en/class.recursiveiterator.php)接口。[然后，您可以使用具体的RecursiveIteratorIterator](http://www.php.net/manual/en/class.recursiveiteratoriterator.php)对其进行迭代。

为了帮助你理解...

A`RecursiveIterator`本身并不是很“递归”。它只是提供了某些可用于获取孩子的方法（递归中的子问题可以被认为是“孩子”）。请注意，`RecursiveIterator.getChildren`() 必须以 another 的形式返回其子级`RecursiveIterator`。

您可以手动迭代一个 plain `RecursiveIterator`，但是，跟踪递归调用返回的所有子迭代器`getChildren`并保持适当的深度等会非常痛苦......这就是`RecursiveIteratorIterator`进来的地方......

A`RecursiveIteratorIterator`是做实际工作以系统地遍历结构的东西，模仿递归。它遍历 a`RecursiveIterator`就好像它是一个平面列表，但在列表中的每个元素处，它会测试当前元素是否存在子元素。如果是`hasChildren`，它调用`getChildren`这个新的子迭代器的引用并将其存储在一个堆栈中。它以提供您期望的递归行为的方式管理堆栈（与手动将递归函数转换为迭代版本的方式非常相似）。

需要明确的是，您无需编写自己的代码`RecursiveIteratorIterator`，只需实例化 php 的具体实现即可。此类的存在纯粹是为了隐藏复杂性并管理`RecursiveIterator`在您的遍历过程中实例化的所有许多对象，并将遍历的结果以看起来像一个平面列表的形式呈现给您。`RecursiveIteratorIterator`内部是一个非常复杂的类。

至于过滤——

有几种方法。为了便于使用，如果您有 php 5.4 ，我建议使用[CallbackFilterIterator 。](http://www.php.net/manual/en/class.callbackfilteriterator.php)否则，您必须扩展[FilterIterator](http://www.php.net/manual/en/class.filteriterator.php)。

然而，在递归结构的，嗯，视图被扁平化为类似列表的结构之后，这两个过滤器都将元素过滤掉。因此，您的过滤器不能例如说“跳过整个子树”，它只能说“跳过这个单个元素”。如果您需要说“跳过整个子树”，则需要使用[RecursiveCallbackFilterIterator](http://www.php.net/manual/en/class.recursivecallbackfilteriterator.php)或扩展[RecursiveFilterIterator](http://www.php.net/manual/en/class.recursivefilteriterator.php)如果您没有 php 5.4

你可能想从

```
class RecursiveCategoryIterator implements RecursiveIterator {... 
```

这应该包含一个 Category 对象列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:21:49.347

您必须从根节点开始并[递归遍历](http://en.wikipedia.org/wiki/Recursion)每个`$this->getChildren()`（节点和子节点（及其子节点（及其子节点（及其子节点））））（递归），直到它是`null`. 这将导致如下结果：

```
(Start)
Root node
-> 1st Child node
--> Grandchild node
-> 2nd Child node
-> 3rd Child node
-> 4th Child node
--> Grandhild node
(No more children so exit) 
```

# c++ - 无法通过“...”传递“const DictionaryKey”类型的对象

> ID：10955529
> 
> 赞同：0
> 
> 时间：2012-06-08T20:16:15.893
> 
> 标签：c++, linux, gcc, g++, hp-ux

我从 HP-UX 移植到 LINUX 的这个 C++ 程序中的一个函数有这个问题。基本上，问题似乎在于函数

```
const char * Dictionary::lookup(const DictionaryKey &, ...) 
```

gcc 编译器似乎在抱怨我无法通过...传递 const Dictionary 类型的对象

该程序的源代码相当陈旧，看起来使用了很多 C 风格的结构。此特定函数接受通过 stdarg.h 标头允许的变量参数列表。此外，该警告仅在 HP-UX 的 gcc（2.95.2 版）中报告，而不在 LINUX 的 gcc（4.3.2 版）中报告。

```
$ gcc -lstdc++ foo1.cc foo2.cc
foo1.cc: In method `const char * Dictionary::lookup(const DictionaryKey &, ...)':
foo1.cc:178: warning: cannot pass objects of type `const DictionaryKey' through `...' 
```

该函数的源代码如下：

```
const char *Dictionary::lookup (const DictionaryKey& key, ...)
{
  static char res[MAX_LINE];
  char *param[9];
  va_list ap;
  WordDictionary::iterator entry = dictionary.find (key);
  if (entry != dictionary.end())
  {
    int idx = 1;
    va_start (ap, key);
    while ((param[idx] = va_arg (ap, char *)) != NULL) idx++;
    va_end (ap);
    char *ts = (*entry).second.textdata;
    char *ts2 = res;
    while (*ts)
    {
      if (*ts == '$')
      {
        ts++;
        idx = *ts - '0';
        strcpy (ts2, param[idx]);
        ts2 += strlen(param[idx]);
        ts++;
      } else
      {
        *ts2++ = *ts++;
      }
    }  
    *ts2++ = 0;
    return res;
  }
  else
  {
    return key.keydata;     // Not found in dictionary
  }
} 
```

我想知道是否有办法解决这个问题。我不明白是什么导致出现此警告。从我在其他网站上发现的情况来看，这个警告似乎可能导致编译后的程序出现意外行为。有人说这应该是一个错误而不是一个警告。我没有太多运气确定这个问题的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:23:19.350

警告是正确的。您只能将 POD 类型作为变量参数传递——尝试传递非 POD 类型会给出未定义的行为 [如果有人关心（§5.2.2/7）：“如果参数具有非 POD 类类型（第 9 条） )，行为未定义。"]

由于您将所有其他被传递的项目视为`char *`，因此传递 a`vector<char *>`或（甚至更好） a 可能会更好`vector<string>`。如果您可以更新到 4.7，则可以相当轻松地切换到后者，例如：

```
somedict.lookup(mykey, "a", "b", "c", NULL); 
```

会变成：

```
somedict.lookup(mykey, {"a", "b", "c"}); 
```

# sharepoint - 由于表“UserInfo”，Sharepoint 2007 访问中的“在访问服务中发布”无法正常工作

> ID：10955540
> 
> 赞同：0
> 
> 时间：2012-06-08T20:16:45.610
> 
> 标签：sharepoint, ms-access, sharepoint-2007

我正在尝试将“在访问服务中发布”与 Sharepoint 2007 服务器一起使用。问题是，我有一个问题，它告诉我由于“UserInfo”表恰好是保留名称，我不能这样做。我能做些什么来纠正这个问题？有没有办法改变表名还是有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:22:19.970

我不知道您可以发布到 SharePoint 2007。但是术语有所改变。当您使用术语“发布”时，SharePoint 2007 和 2010 之间存在显着差异。

但是，忽略以上所有内容，一件事就是简单地删除表（或制作副本）。然后，您可以发布您的数据库。此时，您然后链接到可用于所有已发布数据库的 UserInfo 表（无论 Access 2010 是否具有允许您创建在 Web 浏览器中运行的 Access 表单的新发布）。

# ruby-on-rails - 接受用户输入的 Heroku 迁移

> ID：10955541
> 
> 赞同：0
> 
> 时间：2012-06-08T20:16:51.853
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, migration, rails-migrations

我有一个看起来像这样的 Rails 迁移：

```
puts "*** What would you like to do? ***"
puts "(a)dd columns AND copy data"
puts "(c)olumns only (no data copying)"
puts "(d)ata only (no column adding)"
puts "(q)uit"
reply = $stdin.gets.chomp
...
(subsequent code depends on the reply variable) 
```

这适用于我的开发系统。

Heroku 在我输入字母后不接受我的回复，因为它给了我上述文本作为提示。

我怎样才能让它在 Heroku 上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:26:15.547

而不是运行

```
heroku rake db:migrate 
```

跑：

```
heroku run bash 
```

然后您可以运行交互式迁移。

# c# - How can I validate a bound object who's validation requires knowledge of other objects?

> ID：10955542
> 
> 赞同：0
> 
> 时间：2012-06-08T20:16:56.733
> 
> 标签：c#, wpf, validation

I have a small gui with a listbox. The listbox is bound to a collection. The user can edit an item in the collection using an "Edit" window.

The Edit window is bound to the selected object in the listbox. One of the validations I need to perform is to make sure the user does not enter a name for an item which has already been used (meaning it can't be used by any of the other objects in the listbox).

Is there a good way to do this with WPF validation?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:32:46.740

您正在验证的项目必须提供对父对象（集合）的引用。当你有父集合时，剩下的很简单，我认为，与 WPF 无关。

看看[C# 和 .Net 中的 Enforcing parent-child 关系](https://stackoverflow.com/questions/982796/enforcing-parent-child-relationship-in-c-sharp-and-net)

# sql - 在 SQL 数据库中的 WHERE 条件下使用的每一列都建立索引是一种好习惯吗？

> ID：10955547
> 
> 赞同：2
> 
> 时间：2012-06-08T20:17:09.833
> 
> 标签：sql, database

这个问题说明了一切。我曾经为我在 WHERE 语句中使用的列放置索引以进行优化并帮助站点很好地扩展。我正在与我的同事交谈，他说最好不要放置这些索引并在需要时留出优化空间。您认为这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T20:21:43.093

一如既往，答案是“视情况而定”。

如果 WHERE 子句以破坏索引的方式使用列，那何必呢？如果可能的话，你会想要重写那些。

插入时必须计算索引，因此需要权衡查询的成本。如果您主要阅读，那么索引可能是有意义的。如果您的数据库具有大量事务性，则索引会减慢 INSERT。尤其是批量上传。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T20:20:19.520

我认为这里的最佳实践是最初放入一些索引，作为对需要哪些索引的最佳猜测。但在那之后，您想要实际衡量哪些查询速度较慢并为这些查询编制索引。也许你的 where 子句，甚至你的整个查询会随着需求的变化而变化。

这就像使用在一天中聚合查询时间的东西一样简单，比如[pgfouine](https://github.com/overplumbum/pgfouine)。

![在此处输入图像描述](../Images/a5e44ef7b4e8bdee0238651fd68de4d8.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T21:15:32.180

我不得不说不：简单地索引每一列并不是一个好习惯，因为它恰好出现在一个`WHERE`子句中。

首先，如果您在特定`WHERE`子句中有两列，您可能会决定是否在同一索引中同时索引以及将哪一列作为第一列。仅使用单个列，索引的选择`ASCENDING`或`DESCENDING`索引可能很重要。当同一张表参与许多查询，并且`WHERE`子句中有很多列时，您是否希望仅仅因为列出现在子句中而拥有所有这些列以各种组合和顺序的大量索引`WHERE`？不。

我想说的是设计索引时**考虑到**子句中使用了哪些列**是**一个好习惯，但最终，可能不会出现在子句中但出现在 a中的列可能对大多数索引更重要。您当然可以设计一些带有检查的索引，但一般来说，您会想要实际分析您的流程并查看哪些索引实际上对大部分工作负载有用。**`WHERE``WHERE``JOIN`**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T22:02:35.257

**不**，这取决于色谱柱的选择性。例如，索引列 EMPLOYEE.GENDER 是没有用的。可能也不适用于 COLLEGE_STUDENT.YEAR_IN_SCHOOL_STATUS （4 个可能的值）。

如果有一些稀有值散布着一两个常见值，则可能有部分索引。

我肯定会索引查询中使用的任何字段，其中没有超过 10% 的行中的值。**

# ruby-on-rails - Integrating Bootswatch Theme with Twitter-Bootstrap-Rails Gem

> ID：10955548
> 
> 赞同：9
> 
> 时间：2012-06-08T20:17:16.687
> 
> 标签：ruby-on-rails, less, twitter-bootstrap-rails, bootswatch

I've got a Ruby on Rails app running with Bootstrap, which I installed using the gem twitter-bootstrap-rails.

I'd now like to integrate a new Bootswatch theme, but I'm having trouble figuring out what to do.

There are four possible downloads for each theme - a `bootstrap.css` file, a `bootstrap.min.css` file, a variables.less file, and a bootswatch.less. My question is: do I need to download and add them ALL to my `~/app/assets/stylesheets` folder? or do I just need a subset of those? Currently inside `~/app/assets/stylesheets` are just two files: `application.css` and `boostrap_and_overrides.css.less`. **LESS** really throws me off here so I'm totally confused with how it works and what I need to do to add new css files with this setup. Any help is appreciated.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T20:41:58.753

您只需要下载 bootstrap.css 文件，然后重命名即可。bootstrap.min.css 与 css 文件相同，只是它的缩小版本。Less 只是另一种编写 css 并以不同方式访问每个属性的方式。[少](http://lesscss.org/)签出。添加 css 文件并开始集成到 html 中，同时将 html 指向新的样式表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T17:18:43.253

这是一个 twitter bootstrap gem，用于轻松地为 Rails 集成/自定义 Bootswatch 主题：

[https://github.com/scottvrosenthal/twitter-bootswatch-rails](https://github.com/scottvrosenthal/twitter-bootswatch-rails)

# ruby-on-rails - 将“ActiveRecord::Relation”对象作为方法参数传递是正确/不危险/常见的方法吗？

> ID：10955549
> 
> 赞同：1
> 
> 时间：2012-06-08T20:17:28.433
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, methods

我正在使用 Ruby on Rails 3.2.2，我想知道将`ActiveRecord::Relation`对象作为方法参数传递是否是正确/不危险/常见的方法。

目前，我计划以这种方式在我的模型的范围方法中使用这种方法：

```
class Article < ActiveRecord::Base
  def self.with_active_associations(associations, active = nil)
    # associations.class
    # => ActiveRecord::Relation

    case active
    when nil
      scoped
    when 'active'
      with_ids(associations.pluck(:associated_id))
    when 'not_active'
      ...
    else
      ...
    end
  end
end 
```

*注意 I*：出于性能原因，我想使用这种方法，因为它`ActiveRecord::Relation`是延迟加载的（在我的情况下，如果`active`参数值不是`active`数据库，则根本不会命中）。

*注二*：如果我作为参数值传递 an而不是 an ，则该`pluck`方法的使用可能会产生错误。`association``Array``ActiveRecord::Relation`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:08:07.343

1）在我看来，这是一个合理的权衡，你失去了发送数组作为参数的能力，但你获得了一些性能。这并不奇怪。例如，每次定义范围时，您都在这样做，过滤器仅适用于关系而不适用于数组。

2）您可以随时添加`Enumerable#pluck`，以便该方法对数组透明地工作。当然，如果您使用更多的关系功能，它将无法正常工作。

```
module Enumerable 
  def pluck(method, *args) 
    map { |x| x.send(method, *args) } 
  end 
end 
```

# c# - InvalidOperationException with service_timer

> ID：10955554
> 
> 赞同：1
> 
> 时间：2012-06-08T20:17:41.290
> 
> 标签：c#, sql, service, timer, invalidoperationexception

I'm developing a windows service in C# and it accesses the database several times when files are dropped into a specific directory. Furthermore, I have a service_timer that runs every 5 minutes that also accesses the database. The issue then, is that when my service is processing a file and my service_timer is called, I end up getting an InvalidOperationError (There is already an open Data Reader).

Is there a way to create a new connection for to the database (on Microsoft SQL Server Express) so I can avoid this problem, or is there another common solution?

Thanks.

Here is the code of the function where the exception is being thrown:

```
 DateTime start = DateTime.Now;

            string SqlQuery = "SELECT COUNT (*) AS recCount FROM " + tableName + " " + whereclause;

            Debug.WriteLine(thisMethod + " SqlQuery: " + SqlQuery);
            myCommand = new SqlCommand(SqlQuery, this.SDB); //Execute Sql Statement

            myCommand.ExecuteNonQuery();

            // Create New Adapter

            adapter = new SqlDataAdapter(myCommand);

            adapter.SelectCommand = myCommand;

            DataSet ds = new DataSet();

            // Populate Adapter

            adapter.Fill(ds);

            foreach (DataTable dt in ds.Tables)
                foreach (DataRow dr in dt.Rows)
                {
                    recCount = Convert.ToInt32(dr["recCount"]);
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:48:01.883

问题出在这里

```
myCommand = new SqlCommand(SqlQuery, this.SDB); 
```

您应该在方法中创建一个新的 SQLConnection 而不是使用全局的。

```
SqlConnection newConn = new SqlConnection(connectionString);
newConn.Open();
myCommand = new SqlCommand(SqlQuery, newConn);
//Rest of logic
newConn.Close(); 
```

# android - How to open TTS settings with intent

> ID：10955559
> 
> 赞同：2
> 
> 时间：2012-06-08T20:18:32.507
> 
> 标签：android, android-intent

I want to open the systems TextToSpeech settings page from within my app from within my preference activity. I am able to open sound setting page but cannot figure out how to open the TTS settings. I also tried these two answers

[how to show up the settings for text to speech in my app?](https://stackoverflow.com/questions/3160447/how-to-show-up-the-settings-for-text-to-speech-in-my-app)

[How do I show the TTS Preference Activity Settings Screen, which intent Do I need to call](https://stackoverflow.com/questions/9749495/how-do-i-show-the-tts-preference-activity-settings-screen-which-intent-do-i-nee)

```
 <PreferenceCategory android:title="Sound Settings"
    android:summary="Adjust sound settings">
   <Preference
    android:key="sound"
    android:title="Sound settings"
    android:summary="Change systems sound settings">
    <intent

         android:action="android.settings.SOUND_SETTINGS"
/>
    </Preference>
</PreferenceCategory> 
```

This is on the samsung galaxy 10.1.

# datetime - 仅在 UTC 中存储 Doctrine2 DateTime

> ID：10955563
> 
> 赞同：11
> 
> 时间：2012-06-08T20:19:06.560
> 
> 标签：datetime, timezone, doctrine-orm

有类似的问题，但我找不到任何与 Doctrine2 配置有关的问题，所以这里......

我已经阅读了描述 Doctrine2 时区的页面，我只是想澄清一下，因为不清楚如何实际使用它：[http ://doctrine-orm.readthedocs.org/en/latest/cookbook/working-与-datetime.html](http://doctrine-orm.readthedocs.org/en/latest/cookbook/working-with-datetime.html)

我想以 UTC 存储日期时间，以便每个用户都可以根据他们的位置拥有一个关联的时区，但数据是通用存储的。

基本上，数据是商店的营业时间（例如，上午 9 点开门，下午 6 点关门）。商店将跟踪其时区，因此当商店中的人设置“开放”时间时，他们正在处理商店的时区，时间将转换为 UTC 并存储在数据库中。接下来，当其他用户查看商店营业时间时，他们将看到他们自己的时区或商店时区的营业时间。没关系，因为我有 UTC 时间，所以我可以将它们转换为任何时区。

所以 Doctrine 文档显示了这个例子：

```
class UTCDateTimeType extends DateTimeType
{
// ...
} 
```

但它没有说明如何使用它。我是否必须将列声明为“UTCDateTime”而不是“DateTime”？这个类需要放在哪里，以便 Doctrine 知道该类型的存在？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-09T15:27:14.090

我刚刚发现关于 Timestampable 行为的帖子的这一部分似乎是一个更简单的解决方案：

配置.yml

```
doctrine:
    dbal:
        types: 
            datetime: Acme\DoctrineExtensions\DBAL\Types\UTCDateTimeType 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:31:41.553

您需要在 Doctrine bootstrap 中注册类型并在映射中使用 UTCDateTime。这是一篇解释如何做的博客文章：[http ://symfony2.ylly.fr/add-new-data-type-in​​-doctrine-2-in-symfony-2-jordscream/](http://symfony2.ylly.fr/add-new-data-type-in-doctrine-2-in-symfony-2-jordscream/)

# android - Using Service for long network connection

> ID：10955564
> 
> 赞同：0
> 
> 时间：2012-06-08T20:19:09.840
> 
> 标签：android, android-service, android-networking

Right now I have a server running on a desktop. I want to be able to start up my app, hit a button to start collecting data from this server, and only stop once I hit to button again. The user should always be grabbing data from this server after hitting the button, even if the app isn't active. So far I've considered setting up a Service or using Threads by themself.

A Service sounds exactly like what I need, but I've been told it isn't meant to sustain a long network connection. I poked through the BluetoothChat sample application and it didn't use a Service. Would a Service be the right thing to use then, or should I implement it with threads like the sample application does? The only reason I need a long connection is to listen for any error reports from the server. The other network stuff only happens when the user is directly using the app. I will have to use threads anyways because a Service runs in the same thread as the activity that calls it, but I guess my main question is whether I should scrap the Service part. Right now I have a basic Service set up that can handle messages sent to it and it seems really easy to use. The documentation on it is just all over the place, there needs to be a section saying "If you want to do X, then this is suggested!"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T00:06:50.463

Service 在 UI 线程上运行，而 IntentService 在自己的线程中运行。

说“应用程序”不活动是模棱两可的。如果您正在运行服务，它始终处于活动状态。只要 IntentService 完成其 onHandleIntent() 方法中的工作，它就处于活动状态。应用程序的所有活动都可能不处于活动状态，这意味着应用程序处于后台。

除此之外，我需要更多地了解你想要做什么。一般来说，最好是循环收集数据，而不是试图保持连接不断打开。例如，当设备失去与 Internet 的连接时，您会怎么做？

# asp.net-mvc-3 - ASP.NET MVC Web publishing does not copy excel file

> ID：10955565
> 
> 赞同：1
> 
> 时间：2012-06-08T20:19:13.547
> 
> 标签：asp.net-mvc-3, web-deployment, web-deployment-project

My project has Help folder which is located within web project AND in which we kept some template excel files.

When we do "Web Publishing", these files does not get copied on the server. If we change the extension to xml from xslx then they get copied.

Can you please suggest something to change the publishing scheme/method?

Have a nice weekend!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:45:08.167

在解决方案资源管理器中选择文件，然后在属性窗口中将构建操作更改为内容。有关如何选择文件进行发布的更多背景信息，请参阅

[http://msdn.microsoft.com/en-us/library/ee942158.aspx#why_dont_all_files_get_deployed](http://msdn.microsoft.com/en-us/library/ee942158.aspx#why_dont_all_files_get_deployed)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T22:14:16.410

在文件属性中设置“复制到输出目录”标志

# linq - How to extend this LINQ List<>.Contains to work with any Property using Reflection?

> ID：10955567
> 
> 赞同：2
> 
> 时间：2012-06-08T20:19:20.353
> 
> 标签：linq, nhibernate, reflection, dynamic-linq

I have the following snippet that I currently use to run a .Contains() with a list of Ids passed as a comma separated list from users. This code works perfectly and the data is filtered exactly as I want it to be:

```
// Handle id in() statements explicitly, dynamic expression can't parse them
var idIn = new Regex("id in ?(.*)", RegexOptions.IgnoreCase);
if (idIn.IsMatch(predicate))
{
    Match list = new Regex(@"in ?\((.*)\)", RegexOptions.IgnoreCase).Match(predicate);
    string ins = list.Groups[1].ToString();

    // Split ins and store as List<>
    List<int> splitValues = ins.Split(new[] {','}, StringSplitOptions.RemoveEmptyEntries).Select(i => Convert.ToInt32(i)).ToList();

    return source.Where(u => splitValues.Contains(u.Id));
} 
```

I want to be able to use this same idea, except with ANY property of the u object using reflection. I had a version of this working at some point, but cannot for the life of me figure out what has changed or why it stopped working. Here is the version I have that I cannot get working again:

```
Match splitIn = new Regex(@"([a-zA-Z0-9\.]*) IN ?\((.*)\)", RegexOptions.IgnoreCase).Match(predicate);
string property = splitIn.Groups[1].ToString();
string ins = splitIn.Groups[2].ToString().Trim(new[] {'\'', '"'}); // Trim off separator quotes

List<string> splitValues = ins.Split(new[] {','}, StringSplitOptions.RemoveEmptyEntries).ToList();
for (int i = 0; i < splitValues.Count; i++)
{
    splitValues[i] = splitValues[i].Trim(new[] {'\'', '"'});
}

Expression<Func<U, bool>> contains = u => ListContainsProperty(u, splitValues, property);
return source.Where(contains); 
```

* * *

```
private static bool ListContainsProperty<U>(U u, ICollection<string> list, string property)
{
    string[] split = property.Split(new[] {"."}, StringSplitOptions.RemoveEmptyEntries);
    object value = split.Aggregate<string, object>(u, (current, prop) => current.GetType().GetProperty(prop).GetValue(current, null));

    return list.Contains(value.ToString());
} 
```

As I said I once had SOME version of this working, but cannot figure out what has changed. Is there something blatantly obvious that I am missing that would help me get this functional again?

Edit: As far as I can tell the ListContainsProperty method is never actually running. Adding a "throw new Exception()" does nothing. I just get the full unfiltered list back.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:32:38.377

我认为潜在的问题是使用“表达式”你需要编译一个表达式。

例如在您的代码中

```
Expression<Func<U, bool>> contains = u => ListContainsProperty(u, splitValues, property); 
```

是数据而不是函数。为了使用它，您需要编译它。

```
Func<U, bool> compiled = contains.Compile(); 
```

“编译”变量将调用“ListContainsProperty”方法。

# php - 死链接：链接在新窗口中打开，但不在页面上

> ID：10955568
> 
> 赞同：0
> 
> 时间：2012-06-08T20:19:20.477
> 
> 标签：php, javascript, fancybox

**问题：** 我在页面上有一个链接，当我单击它时，什么也没有发生，但是当我右键单击并在新窗口中打开时，我得到了链接上的图像。我用过火狐和Chrome。在部署到我们的开发环境之前，我正在我的本地主机上进行 Web 开发。它适用于 DEV，但不适用于本地；它以前在本地工作过。这对我来说没有意义。

**解决方案：** 我从我们的 svn 存储库中检查了我一直在处理的页面。那没有用。

如果链接在新窗口中打开，那么我的想法是否正确，那么问题是别的什么？

**这个链接：**

```
<a type="hidden" class="highlight" id="hidden_link" href="../images/developer_notice.png"></a> 
```

**被此表单点击：**

```
<form action="" id="search-form" name="search-form" method="get" onsubmit="return validateSearchForm();"> 
```

**通过这些javascript：**

```
function validateSearchForm(){
 if(!validateAccountStanding()){
    return false;
 }

 return true;
}

function validateAccountStanding(){
var accountStanding = $("#account_standing").val();

//check account standing, if it's "Not Good," alert user
//otherwise, keep going, business as usual.
if(accountStanding == "Not Good"){
    document.getElementById('hidden_link').click();
alert("!");
    return false;
}

return true;
} 
```

我正在使用 fancybox 向用户显示“通知”。

```
<!-- Enable fancy box -->
<link rel="stylesheet" href="../fancybox/jquery.fancybox-1.3.4.css" type="text/css" media="screen" />
<link href="../js/fancybox/jquery.fancybox-1.3.1.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../js/fancybox/jquery.fancybox-1.3.1.pack.js"></script>
<script type="text/javascript">
 $(document).ready(function(){
    //$.noConflict();
    $("a.highlight").fancybox(); 
});
</script>
<!-- Enable fancy box /end --> 
```

提交该表单时，我会收到警报。这以前在我的本地工作。

来自 Firefox 的错误消息：u is undefined /ccdev2/js/fancybox/jquery.fancybox-1.3.1.pack.js 第 17 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:54:57.527

我在 Google 搜索“U 未定义”后发现了这个问题。

[Jquery 错误“你未定义”](https://stackoverflow.com/questions/2820090/jquery-error-u-is-undefined)

这解决了我。我已经在此页面中包含的另一个 php 文件中声明了 fancybox。那是我*忘记*重置的一个文件。

# jquery - How to check if DIV element is disabled using jquery

> ID：10955571
> 
> 赞同：3
> 
> 时间：2012-06-08T20:19:31.617
> 
> 标签：jquery, asp.net, html

htmlcode:

```
div id="divUndo" runat="server" 
```

I am disabling divUndo in the code-behind under certain conditions using the below statement. VB.NET:

```
divUndo.disabled=true 
```

How can I check if the "`divUndo`" is disabled or not using jquery?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T21:24:21.797

ASP.NET 允许您`Disabled`在任何 HtmlControl 对象上设置属性。在您的示例中，它呈现为

`<div id="divUndo" disabled="disabled"><div>`

并且在 javascript 中可以像这样检查

```
$('#divUndo').attr('disabled') !== undefined 
```

但根据 W3C

> 以下元素支持禁用属性：BUTTON、INPUT、OPTGROUP、OPTION、SELECT 和 TEXTAREA。

因此，它可能无法在不同的浏览器中工作或工作方式不同。你不应该依赖在你的 javascript 或 css 中使用`disabled`属性。`div`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T20:36:00.140

在标准 ASP.Net Webforms 中，当您将[disabled](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlcontrol.disabled.aspx)属性设置为 true 时，它​​呈现如下：

```
<div id="MainContent_divundo" disabled="disabled">This is Undo!</div> 
```

您可能可以使用标准的 jQuery [attr()](http://api.jquery.com/attr/)方法来读取值。很可能[prop()](http://api.jquery.com/prop/)不起作用（[jsFiddle](http://jsfiddle.net/ZSHW7/)）。

```
if ($("#MainContent_divundo").attr("disabled") == "disabled")
{
} 
```

我不知道您为什么要这样做，所以这很可能是[XY Problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T20:27:49.257

您不能以 JavaScript（或 HTML，就此而言）可以识别的任何方式禁用 div。它可能是某种奇怪的 .net 属性，但客户端无法识别。

如果您能解释您的最终目标是什么，我们或许可以为您提供一些替代方案。

# php - 区分具有相同 url 的页面

> ID：10955573
> 
> 赞同：2
> 
> 时间：2012-06-08T20:19:41.817
> 
> 标签：php, javascript, html, magento

我有一个在两个不同页面上运行的脚本，一个用于订单，一个用于报价。这些页面有一个相同的 url，后跟一个动态字符串。我该怎么做才能让这个脚本在一页上做一件事，在另一页上做一件事？

编辑：我对这个回顾不是很清楚，当前选择的答案确实适用于我的要求，但它不应该与 Magento 一起使用。Magento 内置了用于确定此信息的方法，您可能希望覆盖它而不是将脚本注入到 adminhtml 代码中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:23:34.867

通过 PHP 中的 $_REQUEST 查看来自 URL 的参数。见这里： http: [//php.net/manual/en/reserved.variables.request.php](http://php.net/manual/en/reserved.variables.request.php)

**编辑**：我从您的评论中看到您的 URL 是这样的`http://www.example.com/index.php/admin/sales_order/view/order_id/273151/`。

如果总是这样，没有任何查询参数，那么您可能需要`$_SERVER['PATH_INFO']`在 PHP 中解析变量。

（见这里： http: [//php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)）。

您可以通过执行以下操作获取这些路径部分的数组：

```
$myPathArray = explode($_SERVER['PATH_INFO'],'/'); 
```

然后，您可以像这样获得路径的最后一个差异化部分：

```
if (count($myPathArray)) {
    $orderId = $myPathArray[count($myPathArray)-1];
} else {
    $orderId = ''; // or whatever you please
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T20:22:41.280

您可以检查 URL 中的内容，例如：

```
function getUrlParameter = function(name, defaultValue) {
name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
var regexS = "[\\?&]"+name+"=([^&#]*)";
var regex = new RegExp( regexS );
var results = regex.exec( document.location.href );
if( results == null ) return defaultValue;
else return results[1];
}; 
```

如果您的 URL 是，`test.php?a=toto`那么您必须在 pageA 中使用 toto ：

```
var pageA = getUrlParameter("toto"); 
```

编辑：如果您只想要路径部分的结尾，请查看`document.location.pathname`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T20:27:08.000

如果您的 url 变量名称在每个页面上都不同，您可以使用 if 语句

```
if (isset($_GET['vara'])) {
    // Do thing A
}
elseif (isset($_GET['varb'])) {
    // Do thing b
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T20:27:28.377

使用[$_GET](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGEQFjAA&url=http://php.net/manual/en/reserved.variables.get.php&ei=zF_ST-6QE8ej2QW8k4GJDw&usg=AFQjCNHF-g0UEkXh5Zf9CGnieUs-jU2HHQ&sig2=p2Th21vWBlTC8Ta86NjEZg)检索 URL 中传递的变量。如果您在这个 Tizag 的新手有一些[易于阅读的教程](http://www.tizag.com/phpT/postget.php)。通过传递变量的值，您可以确定您来自哪个页面。

# linux - 使用 RT linux 调度的多个 TCP 套接字

> ID：10955575
> 
> 赞同：1
> 
> 时间：2012-06-08T20:19:48.233
> 
> 标签：linux, multithreading, tcp

如果我使用`SCHED_FIFO`并将进程优先级设置为 1，我如何有效地检查进程正在管理的多个 tcp 连接之一何时具有可用于处理的数据？

理想情况下，如果多个 tcp 套接字已准备好处理数据，我想多线程。

我认为它看起来像是一个检查每个套接字的无限循环，但似乎 linux 调度程序可能有一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:52:14.420

不确定 SCHED_FIFO 如何影响您的传统服务器设计。我的意思是监听套接字和接受返回的套接字的使用。这个想法是，主线程应该在侦听套接字上阻塞，并且当接收到新连接时，它应该将 accept 返回的 fd 传递给新线程。可以为所有新连接创建新线程，或者您可以使用线程池来限制它并进行更好的控制。

其他想法可能是使用在 fd 上调用 select 的线程，主线程可以侦听并接受连接，主线程可以将新 fd 排队并向等待选择的线程发送通知（可能使用信号或管道） . 一旦接收到数据，它就可以使用线程池中的工作线程来分配任务。

# c# - 在 C# 中仅将类型作为参数传递

> ID：10955579
> 
> 赞同：154
> 
> 时间：2012-06-08T20:20:26.220
> 
> 标签：c#, types, methods, parameters

假设我这样做会很方便：

```
foo.GetColumnValues(dm.mainColumn, int)
foo.GetColumnValues(dm.mainColumn, string) 
```

其中 GetColumns 方法将根据传递的类型在内部调用不同的方法。

是的，我可以将它作为一个布尔标志或类似的，我只是想知道是否有办法通过这个，然后问：

typeof(arg[1]) 或类似...

**我也可以覆盖该方法，使用泛型等 - 我知道有不同的方法可以做到这一点，我只是好奇这是否可能。**

* * *

## 回答 #1

> 赞同：249
> 
> 时间：2012-06-08T20:22:43.360

有两种常见的方法。首先，你可以通过`System.Type`

```
object GetColumnValue(string columnName, Type type)
{
    // Here, you can check specific types, as needed:

    if (type == typeof(int)) { // ... 
```

这将被称为：`int val = (int)GetColumnValue(columnName, typeof(int));`

另一种选择是使用泛型：

```
T GetColumnValue<T>(string columnName)
{
    // If you need the type, you can use typeof(T)... 
```

这具有避免装箱并提供某种类型安全性的优点，并且将被称为： `int val = GetColumnValue<int>(columnName);`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-08T20:22:21.833

`foo.GetColumnValues(dm.mainColumn, typeof(string))`

或者，您可以使用通用方法：

```
public void GetColumnValues<T>(object mainColumn)
{
    GetColumnValues(mainColumn, typeof(T));
} 
```

然后你可以像这样使用它：

```
foo.GetColumnValues<string>(dm.mainColumn); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-06-08T20:22:22.383

您可以将类型作为参数传递，但要这样做，您必须使用`typeof`：

```
foo.GetColumnValues(dm.mainColumn, typeof(int)) 
```

该方法需要接受 type 的参数`Type`。

* * *

> 其中 GetColumns 方法将根据传递的类型在内部调用不同的方法。

如果你想要这种行为，那么你不应该将类型作为参数传递，而是使用类型参数。

```
foo.GetColumnValues<int>(dm.mainColumn) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-08T20:23:10.607

```
foo.GetColumnValues(dm.mainColumn, typeof(int));
foo.GetColumnValues(dm.mainColumn, typeof(string)); 
```

或使用泛型：

```
foo.GetColumnValues<int>(dm.mainColumn);
foo.GetColumnValues<string>(dm.mainColumn); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T20:22:31.297

您可以这样做，只需将其包裹在`typeof()`

```
foo.GetColumnValues(typeof(int))

public void GetColumnValues(Type type)
{
    //logic
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T20:22:38.320

您可以使用类型类型的参数 - iow，传递 typeof(int)。您还可以将泛型用于（可能更有效）的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-31T11:25:57.360

使用泛型类型！

```
 class DataExtraction<T>
{
    DateRangeReport dateRange;
    List<Predicate> predicates;
    List<string> cids;

    public DataExtraction( DateRangeReport dateRange,
                           List<Predicate> predicates,
                           List<string> cids)            

    {
        this.dateRange = dateRange;
        this.predicates = predicates;
        this.cids = cids;
    }
} 
```

并这样称呼它：

```
 DataExtraction<AdPerformanceRow> extractor = new DataExtraction<AdPerformanceRow>(dates, predicates , cids); 
```

# r - Displaying UTF-8 encoded Chinese characters in R

> ID：10955582
> 
> 赞同：8
> 
> 时间：2012-06-08T20:20:34.713
> 
> 标签：r, utf-8, locale

I try to open a UTF-8 encoded .csv file that contains (traditional) Chinese characters in R. For some reason, R displays the information sometimes as Chinese characters, sometimes as unicode characters.

For instance:

```
data <-read.csv("mydata.csv", encoding="UTF-8")

data 
```

will produce unicode characters, while:

```
data <-read.csv("mydata.csv", encoding="UTF-8")

data[,1] 
```

will actually display Chinese characters.

If I turn it into a matrix, it will also display Chinese characters, but if I try to look at the data (command View(data) or fix(data)) it is in unicode again.

I've asked for advice from people who use a Mac (I'm using a PC, Windows 7), and some of them got Chinese characters throughout, others didn't. I tried to save the original data as a table instead and read it into R this way - same result. I tried running the script in RStudio, Revolution R, and RGui. I tried to adjust the locale (e.g. to chinese), but either R didn't let me change it or else the result was gibberish instead of unicode characters.

My current locale is:

> "LC_COLLATE=French_Switzerland.1252;LC_CTYPE=French_Switzerland.1252;LC_MONETARY=French_Switzerland.1252;LC_NUMERIC=C;LC_TIME=French_Switzerland.1252"

Any help to get R to consistently display Chinese characters would be greatly appreciated...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:25:15.523

不是错误，更多的是`character`在`factor`构建`data.frame`.

您可以先从`data <-read.csv("mydata.csv", encoding="UTF-8", stringsAsFactors=FALSE)`使您的汉字成为该`character`类型的开始，因此通过将它们打印出来，您应该会看到您所期望的。

@nograpes：同样`x=c('中華民族');x; y <- data.frame(x, stringsAsFactors=FALSE)`，一切都应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-26T23:51:00.583

就我而言，utf-8 编码在我的 r 中不起作用。但是 Gb* 编码有效。utf8 在 ubuntu 中工作。首先，您需要找出操作系统中的默认编码。并按原样对其进行编码。Excel 无法将其正确编码为 utf8，即使它声称将其保存为 utf8。

> (1) 下载“Open Sheet”软件。
> 
> (2) 正确打开。您可以滚动编码方法，直到在预览窗口中看到显示的中文字符。
> 
> (3) 将其保存为 utf-8（如果你想要 utf-8）。（UTF-8 并不能解决所有问题，您必须**先**知道系统中的默认编码）

# java - Global Exception Handling in Jersey

> ID：10955584
> 
> 赞同：41
> 
> 时间：2012-06-08T20:20:49.017
> 
> 标签：java, rest, jersey

Is there a way to have global exception handling in Jersey? Instead of individual resources having try/catch blocks and then calling some method that then sanitizes all of the exceptions to be sent back to the client, I was hoping there was a way to put this where the resources are actually called. Is this even possible? If so, how?

Instead of, where `sanitize(e)` would throw some sort of Jersey-configured exception to the Jersey servlet:

```
@GET
public Object getStuff() {
    try {
        doStuff();
    } catch (Exception e) {
        ExceptionHandler.sanitize(e);
    }
} 
```

Having:

```
@GET
public Object getStuff() throws Exception {
    doStuff();
} 
```

where the exception would get thrown to something that I can intercept and call `sanitize(e)` from there.

This is really just to simplify all the Jersey resources and to guarantee that the exceptions going back to the client are always in some sort of understandable form.

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-08T21:46:16.783

是的。JAX-RS 有一个 ExceptionMappers 的概念。您可以创建自己的 ExceptionMapper 接口来将任何异常映射到响应。有关更多信息，请参阅：[https ://jersey.github.io/documentation/latest/representations.html#d0e6352](https://jersey.github.io/documentation/latest/representations.html#d0e6352)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-21T15:58:18.837

[javax.ws.rs.ext.ExceptionMapper](https://docs.oracle.com/javaee/7/api/javax/ws/rs/ext/ExceptionMapper.html)是你的朋友。

来源：[https ://jersey.java.net/documentation/latest/representations.html#d0e6665](https://jersey.java.net/documentation/latest/representations.html#d0e6665)

例子：

```
@Provider
public class EntityNotFoundMapper implements ExceptionMapper<javax.persistence.EntityNotFoundException> {
  public Response toResponse(javax.persistence.EntityNotFoundException ex) {
    return Response.status(404).
      entity(ex.getMessage()).
      type("text/plain").
      build();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-21T01:49:36.797

以上所有答案仍然有效。但是对于最新版本的 Spring Boot，请考虑以下方法之一。

方法 1：@ExceptionHandler- 使用此注解在控制器中注解一个方法。

这种方法的缺点是我们需要在每个控制器中编写一个带有此注解的方法。

我们可以通过使用基本控制器扩展所有控制器来解决此解决方案（该基本控制器可以有一个使用@ExceptionHandler 注释的方法。但这可能并非总是可行。

方法2：

*   使用 @ControllerAdvice 注释类并使用 @ExceptionHandler 定义方法

*   这类似于基于控制器的异常（参见方法 1），但在控制器类不处理异常时使用。这种方法有利于在 Rest Api 中全局处理异常

# jquery - Making the inner zoom image on the Cloud Zoom plugin clickable (jQuery)

> ID：10955587
> 
> 赞同：0
> 
> 时间：2012-06-08T20:21:02.357
> 
> 标签：jquery, html, cloud, zooming, clickable

I am using the Cloud Zoom jQuery plugin for the 'inner zoom' function [(link to plugin page)](http://www.professorcloud.com/mainsite/cloud-zoom.htm). I want it so that when someone is hovering over an image, they can click on the zoomed-in image to go to a link. Does anyone know how this is accomplished?

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:51:08.703

Cloud-Zoom 在使用 cloud-zoom 的每个图像上生成一个名为“wrap”的 div。我们可以使用 jQuery 向#wrap div 添加“点击”功能。在此示例中，我们将创建一个名为“myurl”的自定义属性，您将在其中指定图像链接到的位置。

在您的`<head>`标签中：

```
<script>
jQuery(window).load( function() {
    jQuery('div#wrap').click(function(){ window.location=$(this).find("a").attr("myurl");
     return false; });
});
</script> 
```

然后，您将添加`myurl="http://www.website.com"`到`<a>`每个云缩放图像中。您的 html 应如下所示：

```
<a href='main.jpg' myurl="http://www.bungy.com/" class='cloud-zoom'
    rel="position: 'inside', adjustX: 0, adjustY: 0, showTitle: false">
    <img src="thumb.jpg" style="opacity: 1;"/>
</a> 
```

让我知道这对你有什么影响。

# java - How to correctly communicate between two different MVC Controllers in Java Swing?

> ID：10955589
> 
> 赞同：3
> 
> 时间：2012-06-08T20:21:07.320
> 
> 标签：java, swing, model-view-controller

Can you explain me how a Controller can call another Controller method in a simple but still correct way?

Please provide some code!

background: I Have 2 different Controllers-View-Model and 2 libraries and they need to communicate between each other:

1.  SettingsWindow/SettingsController/SettingsModel: Responsible for the app settings. The model is a singleton because I need the settings data all over the app;

2.  A Library for Monitoring a directory which creates an event every time a file is created in a specific directory. The monitored dir path is defined in the SettingsModel; I'm using the Java 7 WatchService API for that;

3.  A Library for Monitoring a webserver and download new files. The webserver address and the save directory are both defined in the SettingsModel; I'm using HttpsUrlConnection and a timer for that;

4.  MainWindow/MainController/MainModel: Responsible for the main app window, which has a table that must be updated every time a new file is created in the monitored directory, and also everytime a file is downloaded by the above libraries.

So how do I correctly Instantiate and communicate those 4 different features?
How do their Controllers commnuicate between them, since they are all related? How should I organize this project in terms of MVC?

PLEASE provide the basic MVC scaffold (skeleton) and show where I create the instances, where and how I call each others method. I'm new to Java, specially swing and mvc. I've read a lot, but I got stuck in this situation.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T00:57:44.303

正如[这里](https://stackoverflow.com/a/3072979/230513)所建议的那样，*模型-视图-控制器*和*观察者*等模式代表了重复出现的设计元素。一个简单的[大纲](https://stackoverflow.com/a/2687871/230513)可以说明类的交互，但通用的解决方案超出了 StackOverflow 的范围。

不过，看看如何应用这些原则可能会很有用。假设您正在遵循本[教程](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)并已在 a 中实现了`WatchService`a ，如此[处](https://stackoverflow.com/q/7784909/230513)`SwingWorker`所示。现在，假设您希望主视图 a更新自身以响应到达的。您将安排相应的将自己注册为工人，如此[处](https://stackoverflow.com/a/4637725/230513)和[此处](https://stackoverflow.com/q/7784909/230513)所示。当到达时，您更新并触发适当的事件来更新. 已知的实现已经包括所需的方法。`JTable``WatchEvent``TableModel``PropertyChangeListener``PropertyChangeEvent``TableModel``JTable``TableModel`

将使用类似的方法来更新表格以响应来自网络的数据。

对于设置，请考虑[此处](https://stackoverflow.com/a/9481515/230513)`java.util.Preferences`提到的，或[此处](https://stackoverflow.com/a/6886694/230513)讨论的。`javax.jnlp.BasicService`

# javascript - 在同一个站点中多次使用 jQuery Masonry

> ID：10955592
> 
> 赞同：2
> 
> 时间：2012-06-08T20:21:28.473
> 
> 标签：javascript, jquery

我试图在同一个站点上使用 jQuery masonry 3 次。每个代码块独立工作，但是当尝试同时使用所有 3 个代码块时，只有最后一个代码块有效。我怎样才能将这些结合起来工作，同时保持不同的值和选择器每个都有？

```
/** First Instance **/
    var $container = $('.smallcolwrap');
        $container.imagesLoaded(function(){
          $container.masonry({
            itemSelector : '.smallcol',
            columnWidth: function( containerWidth ) {
                return containerWidth / 3; },
            isAnimated: true
          });
        });

    /** Second Instance **/
    var $container = $('.slickr-flickr-gallery');
        $container.imagesLoaded(function(){
          $container.masonry({
            itemSelector : 'li',
            columnWidth: 160,
            isAnimated: true
          });
        });

    /** Third Instance **/  
    var $container = $('.navigationHome');
        $container.imagesLoaded(function(){
          $container.masonry({
            itemSelector : 'li',
            columnWidth: function( containerWidth ) {
                return containerWidth / 2; },
            isAnimated: true,
                animationOptions: {
                duration: 250,
                easing: 'linear',
                queue: false
                }
          });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T02:15:49.733

哇，谢谢凯文。我不是 JS 专家，但这很容易。这就是盯着这个看太久后会发生的事情。

```
/** First Instance **/
var $container = $('.smallcolwrap');
    $container.imagesLoaded(function(){
      $container.masonry({
        itemSelector : '.smallcol',
        columnWidth: function( containerWidth ) {
            return containerWidth / 3; },
        isAnimated: true
      });
    });

/** Second Instance **/
var $container1 = $('.slickr-flickr-gallery');
    $container1.imagesLoaded(function(){
      $container1.masonry({
        itemSelector : 'li',
        columnWidth: 160,
        isAnimated: true
      });
    });

/** Third Instance **/  
var $container2 = $('.navigationHome');
    $container2.imagesLoaded(function(){
      $container2.masonry({
        itemSelector : 'li',
        columnWidth: function( containerWidth ) {
            return containerWidth / 2; },
        isAnimated: true,
            animationOptions: {
            duration: 250,
            easing: 'linear',
            queue: false
            }
      });
    }); 
```

# c# - 实体框架 1:1 关系标识列

> ID：10955594
> 
> 赞同：1
> 
> 时间：2012-06-08T20:21:41.373
> 
> 标签：c#, entity-framework

我无法使用关系和两个标识列来保存两个单独的表。我不断收到错误，例如 ReferentialConstraint 中的依赖属性被映射到存储生成的列。列：“OlsTerminalId”。我无法想象这个设置是不正常的。

```
[DataContract]
    public class OlsData {
        private static readonly DateTime theUnixEpoch = new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);

    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int OlsDataId { get; set; }

    [DataMember(Name = "id")]
    public int Id { get; set; }

    public DateTime Timestamp { get; set; }

    [DataMember(Name = "created")]
    [NotMapped]
    public double Created {
        get { return (Timestamp - theUnixEpoch).TotalMilliseconds; }
        set { Timestamp = theUnixEpoch.AddMilliseconds(value); }
    }

    [InverseProperty("OlsData")]
    [DataMember(Name = "terminal")]
    public virtual OlsTerminal OlsTerminal { get; set; }
}

[DataContract]
public class OlsTerminal {
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int OlsTerminalId { get; set; }

    public int OlsDataId { get; set; }

    [DataMember(Name = "account")]
    [NotMapped]
    public virtual OlsAccount OlsAccount { get; set; }

    [DataMember(Name = "terminalId")]
    public string TerminalId { get; set; }

    [DataMember(Name = "merchantId")]
    public string MerchantId { get; set; }

    public virtual OlsData OlsData { get; set; }
}

 public class OlsDataContext : DbContext {
        protected override void OnModelCreating(DbModelBuilder aModelBuilder) {
            aModelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }

        public OlsDataContext(string aConnectionString) : base(aConnectionString) {}
        public DbSet<OlsData> OlsData { get; set; }
        public DbSet<OlsTerminal> OlsTerminal { get; set; }
        public DbSet<OlsAccount> OlsAccount { get; set; }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:38:40.993

这是因为 EF 中的 1:1 关系始终建立在主键之上。所以`OlsTerminal`表中的 FK 必须 by`OlsTerminalId`并且 FK 不能自动生成 - 它必须是 PK from 的值`OlsData`。

之所以必须这样做，是因为需要依赖实体中 FK 值的唯一性来构建真正的 1:1 而不是 1:N。EF 尚不支持唯一约束/候选键，因此如何强制唯一性的唯一方法是将 FK 放在依赖实体的 PK 上。

# asp.net - 如何让 ASP.NET 自动将未登录的 Forms 用户重定向到登录页面？

> ID：10955596
> 
> 赞同：17
> 
> 时间：2012-06-08T20:21:43.927
> 
> 标签：asp.net

我有一个[ASP.NET](http://en.wikipedia.org/wiki/ASP.NET)网站。

我希望未登录的用户自动（重新）定向到登录页面，例如，

```
~/Account/Login.aspx 
```

与现在一样，用户`default.aspx`无需登录即可访问页面（例如 ）。

* * *

**注意**：我的操作是基于（可能不正确）假设 ASP.NET 有自己的身份验证周期，该周期在每个（和任何）页面加载之前发生在我背后。

* * *

**更新**@asawyer 提供了一个链接，虽然没有帮助回答问题，但确实提供了一个漂亮的图形：

![在此处输入图像描述](../Images/ff482a40b44e4645f52b33d446934fd4.png)

## 嗯，你试过什么？

我有一个`web.config`启用**表单**身份验证的文件：

```
<?xml version="1.0"?>
...
<configuration>
   ...
   <system.web>
      <authentication mode="Forms">
         <forms loginUrl="~/Account/Login.aspx" name=".ASPXFORMSAUTH" slidingExpiration="true"/>
      </authentication>
      ...
   </system.web>
   ...
</configuration> 
```

当我浏览到“默认”页面时，我可以查看它，例如，

```
GET http://localhost:53149/WebSite/ HTTP/1.1
Host: localhost:53149 
```

我得到了页面内容：

```
HTTP/1.1 200 OK
Server: ASP.NET Development Server/10.0.0.0 
```

换句话说，我***不是****被迫*登录网站，而是被迫登录网站。

 *这可能与我的浏览器在网络服务器本地运行的事实有关；但我正在使用`Forms`, not `Windows`（而不是`Passport`和 not `None`）身份验证。

## 奖金阅读

*   [表单身份验证概述 (C#)](http://www.asp.net/web-forms/tutorials/security/introduction/an-overview-of-forms-authentication-cs)
*   [MSDN：表单身份验证提供程序](http://msdn.microsoft.com/en-us/library/9wff0kyh.aspx)
*   [MSDN：ASP.NET Web 应用程序安全](http://msdn.microsoft.com/en-us/library/330a99hc.aspx)
*   [ASP.NET 表单身份验证](https://wiki.jasig.org/display/CASC/ASP.NET+Forms+Authentication)
*   [要求用户登录才能使用 ASP.NET 查看文档](https://stackoverflow.com/questions/1574735)
*   [保护某些页面不被 ASP.NET 直接访问](https://stackoverflow.com/questions/2900931)
*   [FormsAuthentication 类](http://msdn.microsoft.com/en-us/library/k3fc21xw)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-08T21:11:32.617

我找到了答案。

**问题：**如何自动将未登录的用户重定向到登录页面？
**答：**拒绝匿名用户访问

* * *

## 更长的解释

为了自动将未登录的用户重定向到登录页面，您需要拒绝**匿名**访问“所有”页面。这是在网站的`web.config`文件中完成的：

**网络配置**

```
<?xml version="1.0"?>
<configuration>
   <system.web>
      ...
      <authorization>
         <deny users="?"/>
      </authorization>
   </system.web>
</configuration> 
```

[特殊**`?`**令牌](http://msdn.microsoft.com/en-us/library/wce3kxhd.aspx)用于表示匿名用户。

这与告诉**Forms**身份验证“登录”页面的位置相结合时：

```
<?xml version="1.0"?>
<configuration>
   <system.web>
      ...
      <authentication mode="Forms">
         <forms loginUrl="~/Account/Login.aspx" timeout="2880"/>
      </authentication>
      <authorization>
         <deny users="?"/>
      </authorization>
   </system.web>
</configuration> 
```

意味着任何匿名用户都将被自动重定向到*登录*页面。

* * *

一个似乎从未被问过的问题得到了回答，每个人都活着。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T21:01:19.113

如果您希望强制所有用于第一次登录的页面，您可以捕获身份验证请求`global.asax`并以编程方式进行此操作：

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    // This is the page
    string cTheFile = HttpContext.Current.Request.Path;

    // Check if I am all ready on login page to avoid crash
    if (!cTheFile.EndsWith("login.aspx"))
    {
        // Extract the form's authentication cookie
        string cookieName = FormsAuthentication.FormsCookieName;
        HttpCookie authCookie = Context.Request.Cookies[cookieName];

        // If not logged in
        if (null == authCookie)
        // Alternative way of checking:
        //     if (HttpContext.Current.User == null || HttpContext.Current.User.Identity == null || !HttpContext.Current.User.Identity.IsAuthenticated)
        {
            Response.Redirect("/login.aspx", true);
            Response.End();
            return;
        }
    }
} 
```

在每个页面上调用此代码并检查您网站上的所有页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-05T13:09:12.070

我知道那是多年以后的事了，但是如果有人发现自己在这里，您可能会在 webconfig 中丢失这一点。在标签中，您需要添加以下内容：

```
<location path="SecurePage.aspx">
<system.web>
  <authorization>
    <deny users="?"/>
  </authorization>
</system.web> 
```

这告诉网站 SecurePage.aspx 要求用户登录。这就是我几年来一直这样做的方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T20:29:31.780

将此添加到您的 web.config

```
<system.web>
    // ...
    <authentication mode="Forms">
        <forms loginUrl="~/Account/Login.aspx" 
               name=".ASPXFORMSAUTH" 
               slidingExpiration="true" />
    </authentication>
</system.web> 
```*

# java - sql-maven-plugin 没有在正确的 mysql 数据库中创建表

> ID：10955600
> 
> 赞同：2
> 
> 时间：2012-06-08T20:21:54.557
> 
> 标签：java, mysql, maven, unit-testing, sql-maven-plugin

我尝试了以下代码的许多不同变体（包括将数据库连接详细信息提取到标记中），但无论我做什么，表仍然是在错误的数据库中创建的。

我也尝试执行“使用 autofi”数据库，但这也不起作用，并且表仍然在不同的数据库中创建。

```
<plugin>
    <!-- Used to automatically drop (if any) and create a database prior to running integration test cases. -->
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>sql-maven-plugin</artifactId>
    <version>1.5</version>

    <dependencies>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.0.5</version>
        </dependency>             
    </dependencies>

    <configuration> <!-- I'VE TRIED TAKING THIS OUT AS WELL -->
      <!-- common configuration shared by all executions -->
      <url>jdbc:mysql://localhost:3306/test</url>
      <driver>com.mysql.jdbc.Driver</driver>
      <username>root</username>
      <password>root</password>
    </configuration>

    <executions>
      <execution>
        <!-- and finally run the schema creation script we just made with the hibernate3-maven-plugin -->
        <id>create-schema</id>
        <phase>process-test-resources</phase>
        <goals>
          <goal>execute</goal>
        </goals>
        <configuration>
          <url>jdbc:mysql://localhost:3306/AUTOFI</url>
          <driver>com.mysql.jdbc.Driver</driver>
          <username>root</username>
          <password>root</password>     
          <srcFiles>
            <srcFile>src/test/resources/sql/schema.sql</srcFile>
          </srcFiles>
          <onError>continue</onError>
        </configuration>
      </execution>

      <!-- drop db after test -->
      <execution>
        <id>drop-db-after-test</id>
        <phase>test</phase>
        <goals>
          <goal>execute</goal>
        </goals>
        <configuration>
          <url>jdbc:mysql://localhost:3306/test</url>
          <driver>com.mysql.jdbc.Driver</driver>
          <username>root</username>
          <password>root</password>     
          <autocommit>true</autocommit>
          <sqlCommand>drop database AUTOFI;</sqlCommand>
        </configuration>
      </execution>

    </executions>
  </plugin> 
```

我使用了 maven-sql-plugin 示例作为模板，但这也不起作用。

我究竟做错了什么？

谢谢，肖恩

# linux - 初始化脚本挂起整个系统

> ID：10955609
> 
> 赞同：1
> 
> 时间：2012-06-08T20:22:43.890
> 
> 标签：linux, init, init.d

我写了一个最后执行的初始化脚本，它将启动一些 pythjon 脚本。Python 脚本只会运行并且永远不会终止，这使我的小 linux 盒子（tty 上的 getty 终端）只输出脚本，但永远不会出现登录提示。我犯了一个错误，没有分配修复IP，所以我基本上不得不重新开始（将初始构建重新下载到闪存上）。但是现在我想知道我有什么不同的可能性，在我的初始化脚本中以 & 结尾是否足以启动脚本，或者我需要一个 nohup/ 解决这个问题的最佳方法是什么？

谢谢！罗恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:30:06.980

我通过将脚本的输出定向到 /dev/null 并在末尾添加一个 & 符号来解决这个问题

myscript.sh > /dev/null &

这会将控制权返回给 shell 并继续在后面执行脚本而不将结果报告给标准输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:42:36.940

是的，您需要确保您的 init 启动脚本返回。最好遵循[LSB 文档](http://refspecs.linuxbase.org/LSB_3.1.0/LSB-Core-generic/LSB-Core-generic/iniscrptact.html)并拥有一个脚本，该脚本不包括启动、停止、状态等标准操作，并使其返回正确的返回码。

在命令末尾使用 & 在后台启动 python 脚本就足够了。您可能还想查看`start-stop-daemon`启动进程的命令。

# javascript - JSRender 条件语句

> ID：10955611
> 
> 赞同：3
> 
> 时间：2012-06-08T20:22:52.063
> 
> 标签：javascript, jsrender

下面的条件 (if) 语句返回此浏览器错误：“Uncaught TypeError: Object 46 has no method 'replace'” in the jsrender.js file on line 463（在 Chrome 和 IE8 中）

**2012-06-10 更新---对不起，在我原来的帖子中，我过于简化了我的场景，并且错误不存在。我已经更新了代码（如下）以更准确地表示我看到的错误。如果您从该代码中删除 {{if 1==1}} 行，它将完美运行。这条线完好无损，我得到了上述错误。

```
<script id="tmpl_report_entry_table_data_rows" type="text/x-jsrender">
    {{if 1==1}}
    <tr class="attribute_data_row">
        <td class="entry_id attribute_data"><span>{{:ENTRY_ID}}</span></td>
        <td class="attribute_1 attribute_data hidden"><span>{{:ATTRIBUTE__1}}</span></td>
        <td class="attribute_2 attribute_data"><span>{{:ATTRIBUTE__2}}</span></td>
        <td class="attribute_14 attribute_data"><span>{{:ATTRIBUTE__14}}</span></td>
        <td class="attribute_13 attribute_data"><span>{{:ATTRIBUTE__13}}</span></td>
        <td class="attribute_11 attribute_date attribute_data"><span>{{:ATTRIBUTE__11}}</span></td>
        <td class="attribute_11 attribute_date_hidden"><span>{{:ATTRIBUTE__11}}</span></td>
        <td class="attribute_3 attribute_data"><span>{{:ATTRIBUTE__3}}</span></td>
        <td class="attribute_4 attribute_data"><span>{{:ATTRIBUTE__4}}</span></td>
        <td class="attribute_5 attribute_data">
            <a href="?"><span>{{:ATTRIBUTE__5}}</span></a>
        </td>
        <td class="cmd"></td>
    </tr>    
    {{/if }}
</script>

<script>
    var obj_my_data = [
        {"ENTRY_ID":79,
            "test":true,
            "ATTRIBUTE__1":"Aleutian Islands",
            "ATTRIBUTE__2":"Arrowtooth Flounder",
            "ATTRIBUTE__13":"BSAI trawl limited access",
            "ATTRIBUTE__3":"Open",
        "ATTRIBUTE__4":"TAC",
        "ATTRIBUTE__5":"",
        "ATTRIBUTE__11":",",
        "ATTRIBUTE__14":"Entire GOA"},
        {"ENTRY_ID":80,
        "test":true,
        "ATTRIBUTE__1":"Aleutian Islands",
        "ATTRIBUTE__2":"Atka Macherel",
        "ATTRIBUTE__13":"BSAI trawl limited access",
        "ATTRIBUTE__3":"Open",
        "ATTRIBUTE__4":"TAC",
        "ATTRIBUTE__5":"",
        "ATTRIBUTE__11":",",
        "ATTRIBUTE__14":"Entire GOA"}
    ];

    $(document).ready(function(){  
        $("table tbody").append($("#my_template").render(obj_my_data)); 
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T04:58:50.523

抱歉没有看到你的更新。结束 if 标记有额外的空白。应该是`{{/if}}`，不是`{{/if }}`。

# excel - 当列中的值更改时更新特定单元格

> ID：10955619
> 
> 赞同：1
> 
> 时间：2012-06-08T20:23:24.687
> 
> 标签：excel, vba

我的任务是为一列数据创建一种方法来更新底部单元格的最新条目。更具体地说，输入今年每个月的贷款组合金额，并且最近的条目也需要出现在列的底部。这是我最初想出的，但这不适用于底部之前的最后一个条目。

```
Private Sub Worksheet_Change(ByVal Target As Range)

xC = 0

yC = 7

If (Target.Column = 3) Then

Do

prevInt = currentInt

currentInt = Sheet1.Cells(yC, 3).Value

If (currentInt = 0) Then

Sheet1.Cells(19, 3).Value = prevInt

xC = 1

End If

yC = yC + 1

    Loop Until xC = 1

    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:59:54.233

我假设当前月份总数下方的单元格将始终为空白，除非它是 12 月。否则我不知道你怎么知道哪个是最新的：

```
Public Sub SetTotalCellValue()
Const portfolioColumn As Integer = 3
Const endRow As Integer = 14 'row of "total" cell

Dim sheet As Worksheet
Dim rowCount As Integer
Dim val As Object

rowCount = 2 'start at January, skip header row

'Set sheet = some sheet

'find last empty cell
For a = 1 To endRow
If sheet.Cells(a, portfolioColumn).Value = Empty Then
   sheet.Cells(endRow, portfolioColumn).Value = sheet.Cells(a - 1, portfolioColumn).Value
Exit For
ElseIf a = endRow - 1 Then
  sheet.Cells(endRow, portfolioColumn).Value = sheet.Cells(a, portfolioColumn).Value
Exit For
End If

Next a

End Sub 
```

# actionscript-3 - 有没有办法将关键帧数据从 After Effects 导出到 Flash

> ID：10955621
> 
> 赞同：1
> 
> 时间：2012-06-08T20:23:32.340
> 
> 标签：actionscript-3, flash, keyframe, after-effects

我在 After Effects 中使用了运动跟踪器来跟踪对象的路径。我想获取 X 和 Y 数据并将其导出到闪存中的对象。我曾希望有一种快速简便的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:29:41.940

所以我发现这篇关于这样做的帖子

[http://oliverwolfson.com/extracting-raw-key-frame-data/](http://oliverwolfson.com/extracting-raw-key-frame-data/)

他使用 shell 脚本，我将尝试使用 PHP 复制它。如果我有任何运气，我会把它发布在网上供人们使用。

# wix - TextStyle 并且没有为文本着色的效果

> ID：10955623
> 
> 赞同：1
> 
> 时间：2012-06-08T20:23:46.490
> 
> 标签：wix, wix3.5

我已将 TextStyle 定义为

```
<TextStyle Id="subHeadingFont" FaceName="Tahoma" Size="9" Bold="yes" Blue="255" Italic="yes" Green="0" Red="0" /> 
```

后来像这样在控制中使用它

```
<Control Id="Password" Type="Edit" X="20" Y="195" Width="150" Height="18" Property="WIXUI_SA.PASSWORD" Indirect="yes" Text="{\subHeadingFont}" ToolTip="Password Dude"/> 
```

在 UI 上我没有得到蓝色的文本，任何指针我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:49:24.410

似乎无法更改“编辑”控件的颜色参考：http: [//msdn.microsoft.com/en-us/library/aa372074 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa372074(v=vs.85).aspx)

> 此列指定文本控件显示的文本颜色。所有其他类型的控件始终使用默认文本颜色。

# javascript - 在 expressjs 中渲染玉文件

> ID：10955624
> 
> 赞同：1
> 
> 时间：2012-06-08T20:23:47.533
> 
> 标签：javascript, node.js

我有一个基本的 expressjs 应用程序（使用翡翠），但我无法渲染基本的翡翠文件。当我收到请求时，我会解析路径名的 url 并使用句柄对象来路由请求，如下所示：

index.js

```
var requestHandlers = require('./requestHandlers');

var handle = {};
handle['/'] = requestHandlers.start;
handle['/download'] = requestHandlers.download 
```

requestHandlers.js

```
 function start(res) {
        console.log("request handler for start called");
        res.render('home', {title: 'express'});
    }

    function download(res) {
        res.render('download', {title: 'download'})
        res.end();
    }

    exports.start = start;
    exports.download = download; 
```

家玉

```
h1= title
p Welcome to #{title} 
```

我使用 Jade 作为我的模板引擎，并在单独的 server.js 文件中配置了服务器。当我请求任何一个页面时，标题在我的浏览器选项卡上正确显示，但页面不显示，它只是继续加载。奇怪的是，当我取消请求时，页面会显示。就好像一切正​​常，但没有任何东西告诉这个过程结束？

我对节点比较陌生，所以请原谅我对上述任何内容的天真。如果有任何问题我可以澄清，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:30:05.930

我不是 100% 肯定为什么您的代码没有根据需要终止 TCP 连接以防止您的浏览器超时，但我可以提供一个对 Express 约定友好的解决方案，它应该可以解决您的问题并保持代码的可读性、可维护性, 和分离。

**./app.js（你的主服务器脚本）**

```
var express = require('express'),
    app = express.createServer(),
    routes = require('./routes');

app.configure(function () {

    // Render .jade files found in the ./views folder
    // I believe you are already doing this
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');

    // Use the built-in Express router
    // This kills the "handle" method you had implemented
    app.use(app.router);

    // Client-side assets will be served from a separate ./public folder
    //     i.e. http://yourhost.com/js/main.js will link to ./public/js/main.js
    app.use(express.static(__dirname + '/public'));

});

// Initialize routes
routes.init(app); 
```

**./routes/index.js**

```
exports.init = function (app) {

    app.get('/', function (req, res) {
        console.log("request handler for start called");

        // Render __dirname/views/home.jade
        res.render('home', {title: 'express'});
    });

    app.get('/download', function (req, res) {
        // Render __dirname/views/download.jade
        res.render('download', {title: 'download'})
    });

}); 
```

以上避免了您需要自己解析 URL 参数。您还可以定义更易读和更强大的请求处理程序（例如，用于 POST 方法的 app.post）。如果您决定构建 REST API，您现在可以更轻松地绑定 Express-Resource 模块等内容。

如果您需要更强大的映射，您可以在 app.[get/post/put/del] 的第一个参数中使用正则表达式来过滤特定路径。

# javascript - Mootools 代码说明

> ID：10955626
> 
> 赞同：3
> 
> 时间：2012-06-08T20:23:54.043
> 
> 标签：javascript, mootools

我正在尝试通过阅读源代码来学习 Mootools，但我不明白为什么它会制作 Function 的本地副本：

```
var Function = this.Function; 
```

但是为什么它不制作 Array、Number 和 String 的本地副本来做同样的事情，例如它们首先出现被直接分配给，那么为什么要区别对待 Function 呢？

```
Function.from = function(item){
    return (typeOf(item) == 'function') ? item : function(){
        return item;
    };
};

Array.from = function(item){
    if (item == null) return [];
    return (Type.isEnumerable(item) && typeof item != 'string') ? (typeOf(item) == 'array') ? item : slice.call(item) : [item];
};

Number.from = function(item){
    var number = parseFloat(item);
    return isFinite(number) ? number : null;
};

String.from = function(item){
    return item + '';
}; 
```

另外我不明白第 149 行函数如何调用存储在其本地原型属性中的实现函数？

```
Function.implement({

hide: function(){
    this.$hidden = true;
    return this;
},

protect: function(){
    this.$protected = true;
    return this;
}

}); 
```

是因为 Function 是一个函数，所以它的内部 [[prototype]] 是 Function.prototype 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:02:18.757

*   您会注意到它`Function`比其他构造函数被更多地引用，因此它们可能添加了局部引用以实现微小的性能提升，以及压缩，因为局部变量可以被混淆。... *（再看一遍，我确实看到对其他构造函数的引用比我最初看到的要多。）*

*   您还会注意到，被`.overloadSetter()`链接到`Function.prototype.extend`函数上的函数用一堆额外的代码、鸭子类型等包装了该函数。所以他们没有使用它的原因可能是这个额外的代码显然是他们内部使用不需要/不需要的。

*   因为`implement`扩展了原型，所以它并不总是可取的。有时您只是不希望在所有实例上都有额外的方法，但您确实希望将它们存储在逻辑命名空间中，就像存储在`Object`构造函数中的本地方法一样。

# ruby-on-rails-3 - ActiveRecord - 寻找父母

> ID：10955627
> 
> 赞同：2
> 
> 时间：2012-06-08T20:23:57.473
> 
> 标签：ruby-on-rails-3, activerecord

我想找到有孩子的东西。所以给出：

```
class Foo < ActiveRecord::Base
   has_many :bars
   has_many :bazes

   scope :is_a_parent ...what goes here?... 
```

我想得到有任何酒吧*或*任何 bazes 的 Foos。当然，使用原始 SQL，所有事情都是可能的`exists (select 1 from bars ...) or exists (select 1 from bazes ...)`，但是 yuk。

当然有一些方法可以`any?`与 arel`or`方法结合使用吗？不使用 SQL 的其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:38:15.080

[这](https://stackoverflow.com/q/5332093/1286639)对你有帮助吗？先前的答案是寻找与您相反的答案（没有条形图或 bazes 的 Foos），但您应该能够反转逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:53:23.560

```
class Foo < ActiveRecord::Base
  has_many :bars
  has_many :bazes    

  scope :is_a_parent, (joins(:bars) or joins(:bazes)).uniq 
```

would give you all foos having a bar or a baze

Btw, usually functions starting with "is_", should end with "?", and should return only true/false.

# asp.net-mvc - MVC4 RC WebApi 参数绑定

> ID：10955629
> 
> 赞同：10
> 
> 时间：2012-06-08T20:24:23.060
> 
> 标签：asp.net-mvc, autofac, asp.net-web-api

我从 MVC4 beta 升级到 RC 和最新的 autofac。以下操作已正确绑定，但现在两个参数均为空。我看到他们改变了关于格式化程序等的事情，但我不确定是什么导致了我的问题

```
[HttpPost]    
RedirectModel MyAction(string value1, string value1) 
```

要求

```
Method: POST
Accept: application/json
URL: api/controller/myaction
BODY: {"value1":"1000", "value2":"foo"} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T13:23:00.467

如果您想避免使用 DTO 对象，请尝试以下操作：

```
[HttpPost]    
RedirectModel MyAction(dynamic value1, dynamic value2) {
    string sValue1 = value1;
    string sValue2 = value2; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-08T21:05:02.717

不太确定为什么要从 Beta 更改，但我能够通过将操作签名更改为：

```
[HttpPost]    
RedirectModel MyAction(MyActionDTO dto) 
```

并将 MyActionDTO 定义为

```
 public class MyActionDTO 
 {
        public string value1 { get; set; }
        public string value2 { get; set; }
 } 
```

它抛出了一个关于无法使用两个字符串参数绑定到多个主体参数的异常。我猜想使用 DTO 对象更接近地代表您在 AJAX 调用中发送的内容（一个 JSON 对象）。

# java - 从 Android 设备安全擦除数据：Gutmann 还是其他人？

> ID：10955631
> 
> 赞同：3
> 
> 时间：2012-06-08T20:24:32.743
> 
> 标签：java, android

我一直在阅读一些关于 Gutmann 安全擦除数据方法的文章。我知道该方法是为**硬盘**设计的。我想编写我的微型应用程序，从手机内存或 SD 卡中安全擦除数据（我知道 Google Play 上有一些数据）。

我的问题是

### 问题1：古特曼还是其他人？

至于上面的观察，Gutmann算法是不是既有效又高效呢？我相信它确实有效，因为它多次重写数据，以至于像闪存这样的技术无法记住 35-writes-older 的数据。我不知道它是否有效：我的意思是，我只需要更少的随机写入来获得结果吗？

### 问题2：我真的会覆盖扇区吗？

我想到的一个问题是：如果我[用 Java 覆盖一个文件](http://www.java-forums.org/advanced-java/13328-file-overwrite-method.html)，Linux 内核是在旧扇区上写入新数据还是在释放旧扇区的同时在物理介质上分配新扇区？你知道，这有区别...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T01:02:14.937

关于＃2，您引用的链接不相关。new FileOutputStream() 根本不会覆盖文件，就您的意思而言。它创建一个新的，或*附加*到现有的。因此，最不可能重复使用相同的磁盘块。然而，“rw”模式下的 new RandomAccessFile() 确实会覆盖文件，并且您可以合理地期望它重用相同的磁盘块，尽管可以想象一个没有的文件系统。

# mysql - 从 MySql 中提取数据并将其放入 SQL

> ID：10955634
> 
> 赞同：0
> 
> 时间：2012-06-08T20:25:00.083
> 
> 标签：mysql, sql-server

我想知道是否有人有任何建议或参考资料来解释如何从 MySQL 中提取数据并将其放入 SQLSever！任何投入将不胜感激！！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:26:11.310

您可以将 MySQL 添加为**“链接服务器”**

[http://forums.mysql.com/read.php?60,123221,123221](http://forums.mysql.com/read.php?60,123221,123221)

完成此操作后，您可以在常规 SQL Server 查询中使用其完全限定名称引用 MySQL 表、视图等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:11:49.860

我不知道您是否想访问 MySQL 数据库，因为您正在迁移到 SQL Server，或者您是否想持续访问 MySQL 数据库。我的回答就像您要迁移一样，因为您已经有了从 SQL Server 访问 MySQL 的出色答案。

如果要迁移，mysqldump 是一种方法。它的格式很容易解析。

您还可以将任何 MySQL 表的结果 - 以及 SQL Server 的结果 - 写入 .csv 格式。.csv 格式几乎是一种通用的数据传输格式。

# android - null 标头 httpclient android

> ID：10955635
> 
> 赞同：2
> 
> 时间：2012-06-08T20:25:02.113
> 
> 标签：android, eclipse, header, null

```
//more code
public void run()
          {
            DefaultHttpClient localDefaultHttpClient = new DefaultHttpClient();
            try
            {
                Object localObject = localDefaultHttpClient.execute(new HttpGet("http://ev5.playevo.com/_/Special:Register"));
              ((Header[]) null);
//more code 
```

最后一部分给了我这个。

语法错误，插入“AssignmentOperator Expression”完成Expression

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:25:59.653

您需要实现一个[ResponseHandler](http://developer.android.com/reference/org/apache/http/impl/client/AbstractHttpClient.html#execute%28org.apache.http.client.methods.HttpUriRequest,%20org.apache.http.client.ResponseHandler%3C?%20extends%20T%3E%29)来做到这一点。

# objective-c - 如何在不完全加载到 Cocoa 的情况下访问二进制文件数据？

> ID：10955644
> 
> 赞同：0
> 
> 时间：2012-06-08T20:25:59.437
> 
> 标签：objective-c, cocoa, file, hash, loading

我正在可可中编写一个小实用程序来计算文件的 MD5、SHA-1 和其他哈希函数。如果理解正确，至少 MD5 算法可以这样实现，我只需要同时加载文件的一小部分——这似乎是个好主意，因为我不想占用所有用户的 RAM，然后一些只是为了计算 10-Gb 存档的哈希值。

如何使用 Cocoa 实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:53:02.067

`NSData`可以对文件进行内存映射，以便底层操作系统（Mac OS 或 iOS）的虚拟内存系统根据需要自动在文件的各个部分中分页。使用`NSData`带有`options:`参数和[`NSDataReadingMappedIfSafe`or`NSDataReadingMappedAlways`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDataReadingOptions)选项的构造函数之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T08:39:10.433

要做到这一点而无需内存映射文件，这可能会令人担忧，您将使用`NSFileHandle`并读取任何大小的块中的数据，使用`-readDataOfLength:`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T04:06:53.840

您在可可中有三种选择：

*   内存映射的 NSData
*   NSStream
*   NS文件句柄

我有开源代码显示 ow 在这里使用流：[https ://github.com/karelia/KSCrypto/blob/master/KSSHA1Stream.h](https://github.com/karelia/KSCrypto/blob/master/KSSHA1Stream.h)

# drupal - 从 Drupal 6 数据库中导出用户及其配置文件

> ID：10955651
> 
> 赞同：0
> 
> 时间：2012-06-08T20:26:52.640
> 
> 标签：drupal, drupal-6, drupal-modules

正如标题所说：我是一个新手drupal用户，我需要自动从表用户中导出“用户名”以及“content_type_profile”表中的一些相关字段。我想我不应该使用任何类型的模块来尝试获取这些数据，因为我需要运行脚本并从 html 页面生成单独的数据并根据需要生成 pdf。所以我尝试使用以下方法将两个表加入到一起：

```
select name, field_username_value, field_surname_value from users as u inner join content_type_profile as p on u.uid = p.vid; 
```

但是我发现内容表中的 uid 和 vid 不匹配，并且我找不到使这种关系正常工作所需的第三个表在哪里。我也找不到任何简单解释 Drupal 如何管理这些 content_type 表的文档。- 如何从 Drupal 数据库中实现这种导出？- 谁能指出我需要阅读哪些文件才能实现我的目标？

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:13:56.747

这是`node`您需要加入的表：

```
SELECT u.name, ctp.field_username_value, ctp.field_surname_value
FROM users u
INNER JOIN node n ON n.uid = u.uid
INNER JOIN content_type_profile ctp ON ctp.vid = n.vid 
```

内容类型表由[CCK 模块](http://drupal.org/project/cck)提供，它们不是 Drupal 核心的一部分；这可能就是您努力寻找文档的原因（尽管那里有很多）。

# asp.net - 在 ASP.net 中，如何从返回 XML 但选择特定节点的 API 调用创建数据集

> ID：10955658
> 
> 赞同：0
> 
> 时间：2012-06-08T20:27:34.163
> 
> 标签：asp.net, xml, dataset, google-places-api, xmldatasource

我正在尝试对谷歌地点进行 API 调用，谷歌返回一个包含多个字段和多行数据的 XML 文档。获取该数据、从中选择特定节点并将其放入数据集中的最佳方法是什么？

这是我的 API 调用示例，其中控制参数传递到 API 调用：

("https://maps.googleapis.com/maps/api/place/search/xml?location=" _ & lat & "," & lng & "&radius=5000&keyword=" & Replace(searchvenuenametextbox, " ", " +") _ & "&sensor=false&key=" & googleapikey)

最好的方法是这样做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:57:32.550

这是描述如何将 Xml 读入数据集的演练：[演练：将 XML 数据读入数据集](http://msdn.microsoft.com/en-us/library/ekw4dh3f.aspx)

该演练没有描述如何在添加到数据集之前从 Xml 中省略字段，但是您可以使用（或不使用）数据集中想要/不想要的任何字段。

至于最好的方法——我想这是有待商榷的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:11:35.377

LINQ 是最简单的方法。查询 XML ，只需取出您想要的元素，然后将它们轻松插入 DataTable

# php - 用 Zend_Pdf 合并两个数字签名的 PDF

> ID：10955659
> 
> 赞同：1
> 
> 时间：2012-06-08T20:27:38.053
> 
> 标签：php, zend-framework, pdf, digital-signature, tcpdf

场景：我有一个签署 PDF 的 Web 服务，我正在使用 PHP、Zend 框架和 TCPDF。将 PDF 提交给 Web 服务，在该服务中创建签名页面，然后与传入的 PDF 合并，然后对合并的文档进行签名。我有 TCPDF 来创建和签署第二个文档，但我无法在保留签名的同时合并这两个文档。

我的问题：TCPDF 可以在现有 PDF 中添加页面，然后签名吗？Zend_Pdf 可以合并两个已经签名的 PDF 吗？甚至可以合并签名的 PDF 文件吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T06:15:21.907

Afaik no, signed pdfs can't be merged, cause the signature is applied to the document, not to its range. Changing the document invalidates the signature.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T22:10:06.633

如果您不担心签名无效，您可以随时再次打印到 Adob​​e PDF，然后与其他 PDF 合并。

# php - WordPress 侧边栏文本小部件

> ID：10955660
> 
> 赞同：0
> 
> 时间：2012-06-08T20:27:45.227
> 
> 标签：php, wordpress

我正在使用带有文本小部件的展示侧边栏。我插入了一些 HTML 和文本，并希望显示该文本小部件。我应该在 sidebar.php 模板中插入什么 PHP 代码来显示 Text 小部件和我添加的任何其他小部件？理想我只想从展示侧边栏加载第一个文本小部件

代码看起来像这样吗？

```
<?php if ( !function_exists('dynamic_sidebar')
|| !dynamic_sidebar('sidebar2') ) : ?>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T00:49:18.200

是的，它看起来像您发布的代码：

```
<?php if ( !function_exists('dynamic_sidebar')
|| !dynamic_sidebar('sidebar2') ) : ?>
<?php endif; ?> 
```

， 但 -

您发布的代码只有在您定义并注册了这样一个侧边栏（名为：**sidebar2**）时才有效

在您的主题 php 中，您应该有一个 register_sidebar() 函数调用。

```
if (function_exists('register_sidebar')) {
    register_sidebar(array(
        'name'=> 'Sidebar 2',
        'id' => 'sidebar2',
    ));
} 
```

您甚至可以使用其他参数（例如 .

```
 'before_widget' => '<li id="%1$s" class="widget %2$s">', 
    'after_widget' => '</li>',
    'before_title' => '<h2 class="offscreen">',
    'after_title' => '</h2>', 
```

如果您的主题已经定义并注册了这样的侧边栏，那么您发布的代码将起作用，并且前端将显示您放入该侧边栏的所有小部件（在管理端）。如果您的主题未定义它，您将需要定义它或将其添加到其他侧边栏的定义中。

在[此处](http://codex.wordpress.org/Widgetizing_Themes) 和[此处](http://wordpress.org/support/topic/how-to-create-new-widget-area?replies=5)阅读有关定义侧边栏的更多信息。

# python - 寻找一种方法来识别和替换脚本中的 Python 变量

> ID：10955665
> 
> 赞同：0
> 
> 时间：2012-06-08T20:28:27.663
> 
> 标签：python, regex, string, dictionary, replace

我有一个变量名字典，我希望它们成为另一个脚本中的变量名。因此，我可能需要识别 Python 脚本中的所有变量，然后以某种方式将这些变量替换为字典中所需的变量。然而，我无法弄清楚什么是最优雅的方式来做到这一点。我是否必须将一个脚本作为字符串粘贴到进行替换的另一个脚本中？有小费吗？谢谢 编辑：实际问题不是要求一个完整的解决方案，而是询问是否有可能识别脚本中的哪个单词实际上是一个变量。是否有可能找到这些，例如将它们与 PythonBuiltIn 变量进行比较？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:38:23.970

Python可以读取python。因此，使用该字典编写一个脚本，查看您的第一个脚本并使用正则表达式替换正确的符号。将要修改的文件制作成 in 文件并读取、编辑并逐行写回 .py 文件。

这里是关于 python 中文件 I/O 的文档，以防万一你需要它：

[http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:02:56.630

使用来自另一个模块的字典分配全局变量：

```
from other_module import desired_dictionary

if __name__=="__main__":
   import this_module

   for name, value in desired_dictionary.items():
       setattr(this_module, name, value) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T21:05:04.870

我现在选择简单地将变量标识为脚本中“=”字符之前的最后一个单词。（这有意义吗？）我用

```
line.split("=")[0].split(" ")[-1] 
```

按照 NKamrath 的建议打开脚本后识别这些词

```
f = open('replaceme.py')
f.readlines() 
```

非常感谢到目前为止的帮助！

# c# - 带有多个左外连接的内连接

> ID：10955666
> 
> 赞同：0
> 
> 时间：2012-06-08T20:28:43.540
> 
> 标签：c#, .net, linq, linq-to-sql, join

我尝试将以下语句转换为 LINQ to SQL：

```
FROM mc.WORKORDER AS wo WITH (NOLOCK)
INNER JOIN mc.WORKTASK AS wt WITH (NOLOCK)
ON wo.wordoi = wt.wrkord_oi
AND wo.tmplt = 0
AND wo.ci_cnc_date IS NULL
AND wt.ci_cnc_date IS NULL
AND wt.clsdt_date >= CAST('1/1/' + CAST(year - 1 AS varchar) AS DateTime)
AND wt.clsdt_date < DATEADD("mm", 1, CAST(CAST(quarter * 3 AS varchar) + '/1/' + CAST(year AS varchar) AS DateTime))
LEFT OUTER JOIN mc.WOLABOR AS wol WITH (NOLOCK)
ON wt.wtskoi = wol.wt_oi
LEFT OUTER JOIN mc.CREW AS c WITH (NOLOCK)
ON wt.crew_oi = c.crewoi
LEFT OUTER JOIN mc.WORKORDERTYPE AS wot WITH (NOLOCK)
ON wt.wot_oi = wot.wotyoi
LEFT OUTER JOIN mc.SEGMENTEDACCOUNT AS sa WITH (NOLOCK)
ON wt.segacctref_oi = sa.sgaccoi
LEFT OUTER JOIN mc.SEGVALUE AS sv WITH (NOLOCK)
ON sa.segval4ref_oi = sv.sgvaloi
LEFT OUTER JOIN mc.PRIORITY AS p WITH (NOLOCK)
ON wo.prio_oi = p.priooi
LEFT OUTER JOIN mc.SITE AS s WITH (NOLOCK)
ON wo.BEparn_oi = s.siteoi 
```

所以我开始我的翻译是这样的：

```
int year = 2012, quarter = 1;
string monthYear = "1/1";
DateTime closeDate = new DateTime(monthYear, (year-1));
DateTime timeframe = new DateTime(year, (quarter * 3), 01).AddMonths(1); 

var allWorkorders = 

(from wo in WORKORDERs
    join wt in WORKTASKs on wo.Wordoi equals wt.Wrkord_oi && wo.Tmplt equals 0 && wo.Ci_cnc_date == null && wt.ci_cnc_date == null &&
        wt.clsdt_date >= (string)closeDate && wt.clsdt_date < timeframe 
```

现在从这里我尝试直接进入第一个左外连接。但是，编译器告诉我我需要在时间范围结束时使用分号。

我仍然可以完成 var allWorkOrders 中的其他联接还是必须创建一个新联接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:06:14.320

您遇到的第一个问题是如何加入表格。您需要几个`where`子句和一个不同的`join`. 此外，对于查询的其余部分，它应该遵循类似于以下的模式：

```
var allWorkorders =  from wo in WORKORDERs
    where wo.Tmplt == 0 && wo.Ci_cnc_date == null
    join wt in WORKTASKs
        on wo.Wordoi equals wt.Wrkord_oi
    where wt.ci_cnc_date == null
        && wt.clsdt_date >= (string)closeDate
        && wt.clsdt_date < timeframe
    join wol in WOLABOR
        on wt.wtskoi equals wol.wt_oi into WOLABORGroup
    join c in CREW
        on wt.crew_oi equals c.crewoi into CREWGroup
    // more outer joins here
    //....
    from WOLABORItem in WOLABORGroup.DefaultIfEmpty()
    from CREWItem in CREWGroup.DefaultIfEmtpy()
    // more from clauses here
    //...
    select new
    {
        Something = WOLABORItem != null ? WOLBORItem.something : "none",
        // more items
        //.....
    }; 
```

# facebook-login - 使用 Facebook 登录/注册 - 如何仍然从我的数据库中获取本地用户详细信息？

> ID：10955669
> 
> 赞同：-4
> 
> 时间：2012-06-08T20:29:05.693
> 
> 标签：facebook-login, user-registration

我希望我的网站用户能够使用 facebook 创建帐户并登录

一旦用户登录（id、名称、链接等），我将从用户那里收集更多详细信息，并为用户创建一个本地应用程序数据库条目。

对于未来的登录，我将如何处理他们的本地数据库记录现在将存在的事实？

如何使用 facebook 登录返回并能够获取本地 db 用户详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:36:35.280

是的，通过其他提供者进行身份验证（openAuth 也很大，而且更通用）正在迅速普及。

以下是有关如何使用它们的 facebook 信息：

[http://developers.facebook.com/docs/authentication/signed_request/](http://developers.facebook.com/docs/authentication/signed_request/)

# asp.net-mvc-3 - @Html.Action 在布局页面中

> ID：10955670
> 
> 赞同：1
> 
> 时间：2012-06-08T20:29:12.407
> 
> 标签：asp.net-mvc-3

感谢您阅读本文。

在 _Layout.cshtml 页面中，我使用 @RenderPage 调用标题：

```
@RenderPage("/Shared/_header.cshtml") 
```

它有这个：

```
<div id="Header"> Home </div> 
```

想要使其可点击到默认操作（“索引”）

当我尝试这个时：

```
<div id="Header"> @Html.Action("Index", MyController") </div> 
```

我得到错误：

开头的“（”缺少相应的结尾“）”

```
@RenderPage("/Shared/_header.cshtml") 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:31:01.540

您缺少 MyController 上的开头双引号。

它应该是：

```
<div id="Header"> @Html.Action("Index", "MyController") </div> 
```

# java - iText + GAE：如何创建随机 URL？

> ID：10955672
> 
> 赞同：0
> 
> 时间：2012-06-08T20:29:20.323
> 
> 标签：java, google-app-engine, itext

对不起，我的英语不好。我在 GAE + GWT 中使用 iText .. 我制作了一个示例应用程序，它在谷歌中运行！但我对 URL 的令牌有疑问。

我有这个 RPC 服务，它在字节数组中创建文档并将其写入 HttpSession，然后在客户端 onSuccess 块中我调用一个 Servlet，它将 PDF 发送给客户端。这`String token = "258958395ai53"`是客户端找到 PDF 的令牌，但在此示例中，y 将令牌设为静态，因此我需要随机创建令牌并确保令牌不会重复。这是解码代码。

RPC 服务：

```
public String getPdf() {
    Document document = new Document();
    String token = "258958395ai53";
    // generate test PDF
    try {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        PdfWriter.getInstance(document, baos);
        document.open();
        document.add(new Paragraph("¡HOLA PUTO MUNDO!"));
        document.close();
        byte[] pdf = baos.toByteArray();
        HttpServletRequest request = this.getThreadLocalRequest();
        HttpSession session = request.getSession();
        session.setAttribute(token, pdf);

    } catch (Exception e) {

        System.out.println("ReportServlet::generatePDF::Exception "
                + e.getMessage());
    }

    return token;
} 
```

小服务程序：

```
public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {

        // create output stream from byte array in session
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        String token = request.getParameter("token");
        byte[] pdf = (byte[]) request.getSession().getAttribute(token);
        baos.write(pdf);

        // setting some response headers
        response.setHeader("Expires", "0");
        response.setHeader("Cache-Control", "must-revalidate, post-check=0,pre-check=0");
        response.setHeader("Pragma", "public");

        response.setContentType("application/pdf");

        // content length is needed for MSIE
        response.setContentLength(baos.size());

        // write ByteArrayOutputStream to ServletOutputStream
        ServletOutputStream out = response.getOutputStream();
        baos.writeTo(out);
        out.flush();
        out.close();
} 
```

成功：

```
 public void onSuccess(String lista) {
                    String token =  lista;
                    //Window.open("hello?token="+ token, "_blank","menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes");
                    Dialog d = new Dialog();
                    d.setWidth(500);
                    d.setHeight(700);
                    d.setUrl(GWT.getModuleBaseURL()+"hello?token="+token);
                    d.show();
                }
            }); 
```

任何想法？.. 可以查看我的示例[http://pdfprueba2.appspot.com/](http://pdfprueba2.appspot.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:34:46.493

您可以使用随机生成器。有更高级的随机生成器可用，例如 SecureRandom（请参阅[此处](http://www.javamex.com/tutorials/random_numbers/securerandom.shtml)它是如何工作的）。最重要的是，您可以组合多个唯一元素来创建一个超级唯一键。[本文](http://www.jguru.com/faq/view.jsp?EID=1030397)概述了创建此类事物时使用的一些方法。

考虑到您添加的复杂性越多，所需的资源/时间就越多。

# php - x天后强制更改密码陷入循环

> ID：10955677
> 
> 赞同：1
> 
> 时间：2012-06-08T20:29:31.403
> 
> 标签：php

我正在为 Web 应用程序实施 90 天后强制更改密码 - 在每个页面上调用的应用程序头文件的顶部，我检查密码的使用期限，如果超过 90 天，则强制用户更改密码页。这一切都很好。

问题是密码更改页面还调用了进行检查的标题页，因此它的外观和感觉与站点的其余部分相同，但是，当然，它会陷入一个永无止境的检查和重定向循环 - 什么是防止这种情况的最佳方法是什么？我不想让密码更改页面没有格式化，也不想弹出，理想情况下我不想在没有密码检查的情况下使用不同的模板标题，因为我会忘记更新第二个做出改变。

我还能如何解决这个问题？我想确保用户在通过 90 天标记后除了更改密码之外不能做任何事情。

谢谢杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:33:08.077

只需修改检查，使其在密码更改页面已加载时不会重定向。

一种干净的方法是（假设您不执行 OOP 并且不使用其中一个 PHP 框架）`define('ALLOW_EXPIRED_PASSWORD', 1);`在包含文件和执行重定向检查的函数之前，`defined('ALLOW_EXPIRED_PASSWORD')`并且仅在该检查返回 false 时才重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:49:22.497

在您的情况下我会做的事情（听起来像是普通的 ole php）在您的情况下听起来更容易的是一个简单的 if 语句，它检查用户正在访问的文件名。

这样，您就不必显式设置 ThiefMaster 提到的常量。

# php - 使用数组 PHP 从另一个数组中提取数组

> ID：10955679
> 
> 赞同：4
> 
> 时间：2012-06-08T20:29:50.060
> 
> 标签：php, arrays

我有两个这样的数组

```
 $arr1 = Array('fn', 'ln', 'em');
 $arr2 = Array('fn'=>'xyz',  'ano' => 'abc', 'ln'=>'122', 'em' => 'a@b.com', 'db'=>'xy'); 
```

我想从 arr2 创建一个数组，其中包含 $arr1 中的所有元素。所以结果应该是这样的。

```
 $result = Array( 'fn'=>'xyz', 'ln'=>'122', 'em'='a@b.com'); 
```

不想循环。

任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T20:35:39.010

参数的顺序在这里很重要

```
 print_r(array_intersect_key($arr2, array_flip($arr1))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T20:32:31.663

你可以用`array_map`这个。

```
// PHP 5.3+ only
$result = array_combine($arr1, array_map(function($a) use($arr2){
    return $arr2[$a];
}, $arr1)); 
```

演示：[http ://codepad.viper-7.com/Y1aYcf](http://codepad.viper-7.com/Y1aYcf)

如果你的 PHP < 5.3，你可以用`array_intersect_key`and做一些诡计`array_flip`。

```
$result = array_intersect_key($arr2, array_flip($arr1)); 
```

演示：[http ://codepad.org/MuydURQT](http://codepad.org/MuydURQT)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T20:39:00.683

你只需要循环，就像创建一个新数组或者检查数学函数中的一些数组集。我认为，也许，insection 可能会起作用。

# .htaccess - 从 home.php 重写到 home

> ID：10955684
> 
> 赞同：1
> 
> 时间：2012-06-08T20:30:34.083
> 
> 标签：.htaccess, mod-rewrite

我需要重写这个网址：

```
www.example.com/home.php to www.example.com/home 
```

我在 .htaccess 中编写此代码但不起作用：

```
RewriteEngine on
RewriteRule ^home$ $home.php [nc] 
```

为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:33:04.723

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^(.*)\$ home.php [nc] 
```

应该管用。没有测试。

# gtk - 如何从 Gdl.Dock 中删除 Gdl.DockItem？

> ID：10955686
> 
> 赞同：0
> 
> 时间：2012-06-08T20:30:45.553
> 
> 标签：gtk, pygobject

我使用 GObject 自省在 Python 中使用 libgdl。有人知道如何从 Gdl.Dock 中删除 Gdl.DockItem 吗？我试过了：

```
dock.remove(dockitem) 
```

和

```
dock.master.remove(dockitem) 
```

而且我还尝试过销毁停靠项和它的子小部件。似乎找不到这样做的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T21:32:54.083

弄清楚了。我正在寻找 unbind() 方法。所以，如果有人偶然发现这个，它看起来有点像这样：

```
dockitem.unbind()
widget.destroy() # where widget was originally added to dock item 
```

# class - 如何使用页面中的超链接来切换使用 Dreamweaver 的更多信息？

> ID：10955692
> 
> 赞同：0
> 
> 时间：2012-06-08T20:31:28.893
> 
> 标签：class, html, toggle, muse

我正在尝试使用切换功能来打开更多信息。您如何使用网页中的超链接来打开位于页面其他位置的切换功能以获取更多信息？超链接不应转到其他页面，而且该页面是使用 Adob​​e Muse 创建的，它创建了 div 类和 div，那么我可以在哪里将代码粘贴到 HTML 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:40:29.943

您可以使用超链接来执行 javascript 函数，而无需转到其他页面。

```
<a href="#" onclick="alert('test'); return false">Test</a> 
```

用执行切换功能的 javascript 函数替换警报。

# ios - 来自谷歌解析json的iOS地理编码数据

> ID：10955693
> 
> 赞同：4
> 
> 时间：2012-06-08T20:31:31.063
> 
> 标签：ios, json, geocoding

我正在从谷歌地图中提取一些数据，但我似乎无能为力。这是我的代码：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)theConnection  {

//do something with the data!
NSError *e = nil;
//parse the json data
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData: receivedData options: NSJSONReadingMutableContainers error: &e];

//get the lat and long and put it into an array
locationData = [[NSMutableArray alloc] init];

NSLog(@"%@", [jsonArray objectAtIndex:0]);

} 
```

如果我记录 jsonArray.count 我得到 2，这似乎是正确的，因为谷歌将在顶层返回结果和状态。但是，如果我尝试获取对象 0，它会崩溃。如果我尝试做这样的事情，它也会崩溃：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)theConnection  {

//do something with the data!
NSError *e = nil;
//parse the json data
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData: receivedData options: NSJSONReadingMutableContainers error: &e];

//get the lat and long and put it into an array
locationData = [[NSMutableArray alloc] init];

for(NSDictionary* thisLocationDict in jsonArray) { 

    NSString* location = [thisLocationDict objectForKey:@"results"];
    [locationData addObject:location];
}
} 
```

我使用此代码从 Twitter 毫无问题地获取数据。我在控制台中遇到的错误是我试图获取一个字符串对象：

```
-[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x798a270 
```

这是谷歌发送给我的json：

类型=（地方，政治）；}, { "long_name" = "Upper Merion"; "short_name" = "Upper Merion"; 类型=（“administrative_area_level_3”，政治）；}, { "long_name" = 蒙哥马利; "short_name" = 蒙哥马利；类型=（“administrative_area_level_2”，政治）；}, { "long_name" = 宾夕法尼亚州；“短名称” = PA；类型=（“administrative_area_level_1”，政治）；}, { "long_name" = "美国"; "short_name" = 美国；类型=（国家，政治）；}, { "long_name" = 19406; “短名称” = 19406；类型=（“邮政编码”）；}); "formatted_address" = "2900 Horizo​​n Dr, King of Prussia, PA 19406, USA"; 几何={位置={纬度=“40.0896985”；lng = "-75.341717"; }; “location_type”=屋顶；视口 = { 东北 = { 纬度 = "40.09104748029149"; lng = "-75.34036801970849"; }; 西南={纬度=“40。

和我传递的网址：

```
http://maps.googleapis.com/maps/api/geocode/json?address=2900+Horizon+Drive+King+of+Prussia+,+PA&sensor=false 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T23:36:01.780

与您从 google 获得的数据不同的是，它由键分开，例如`results, geometry, formatted_address`...

你应该这样做：

```
NSError *error;

NSString *lookUpString = [NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/geocode/json?address=%@&components=country:AU&sensor=false", self.searchBar.text];

lookUpString = [lookUpString stringByReplacingOccurrencesOfString:@" " withString:@"+"];

NSData *jsonResponse = [NSData dataWithContentsOfURL:[NSURL URLWithString:lookUpString]];

NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData:jsonResponse options:kNilOptions error:&error];

self.locationArray = [[jsonDict valueForKey:@"results"] valueForKey:@"formatted_address"];

int total = self.locationArray.count;
NSLog(@"locationArray count: %d", self.locationArray.count);

for (int i = 0; i < total; i++)
{
    NSString *statusString = [jsonDict valueForKey:@"status"];
    NSLog(@"JSON Response Status:%@", statusString);

    NSLog(@"Address: %@", [self.locationArray objectAtIndex:i]);

} 
```

# glassfish - 无法在 Glassfish 中将 JAX-WS 部署为 OSGi 包

> ID：10955694
> 
> 赞同：2
> 
> 时间：2012-06-08T20:31:33.607
> 
> 标签：glassfish, jax-ws, osgi

当我通过 Glassfish 将 JAX-WS 部署为标准 Web 应用程序服务时，一切正常。

同一个 JAR 文件也是一个 OSGi 包（所以是一个 WAB）。如果我尝试作为 OSGi 包安装，我会收到关于返回属性不存在用于响应的错误。这是网络服务类：

```
package org.example;

import javax.jws.WebService;
import javax.jws.WebMethod;
import javax.xml.ws.ResponseWrapper;

@WebService
public class ExampleComponent {
   private String message = new String("Hello, ");

   public ExampleComponent() {
   }

   public String sayHello(String name) {
       return message + name + ".";

   }
} 
```

这是我得到的错误：

```
javax.xml.ws.WebServiceException: class org.example.Wrapper do not have a property of the name return
at com.sun.xml.ws.server.sei.EndpointResponseMessageBuilder$DocLit.<init>(EndpointResponseMessageBuilder.java:217)
at com.sun.xml.ws.server.sei.TieHandler.createResponseMessageBuilder(TieHandler.java:210)
at com.sun.xml.ws.server.sei.TieHandler.<init>(TieHandler.java:116)
at com.sun.xml.ws.db.DatabindingImpl.<init>(DatabindingImpl.java:108)
at com.sun.xml.ws.db.DatabindingProviderImpl.create(DatabindingProviderImpl.java:74)
at com.sun.xml.ws.db.DatabindingProviderImpl.create(DatabindingProviderImpl.java:58)
at com.sun.xml.ws.db.DatabindingFactoryImpl.createRuntime(DatabindingFactoryImpl.java:130)
at com.sun.xml.ws.server.EndpointFactory.createSEIModel(EndpointFactory.java:433)
at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:268)
at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:145)
at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:569)
at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:552)
at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:623)
at org.glassfish.webservices.WSServletContextListener.registerEndpoint(WSServletContextListener.java:282)
at org.glassfish.webservices.WSServletContextListener.contextInitialized(WSServletContextListener.java:102)
at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.osgijavaeebase.OSGiDeploymentRequest.deploy(OSGiDeploymentRequest.java:183)
at org.glassfish.osgijavaeebase.OSGiDeploymentRequest.execute(OSGiDeploymentRequest.java:118)
at org.glassfish.osgijavaeebase.AbstractOSGiDeployer.deploy(AbstractOSGiDeployer.java:121)
at org.glassfish.osgijavaeebase.OSGiContainer.deploy(OSGiContainer.java:154)
at org.glassfish.osgijavaeebase.JavaEEExtender.deploy(JavaEEExtender.java:107)
at org.glassfish.osgijavaeebase.JavaEEExtender.access$200(JavaEEExtender.java:61)
at org.glassfish.osgijavaeebase.JavaEEExtender$HybridBundleTrackerCustomizer$1.call(JavaEEExtender.java:151)
at org.glassfish.osgijavaeebase.JavaEEExtender$HybridBundleTrackerCustomizer$1.call(JavaEEExtender.java:148)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
Caused by: javax.xml.bind.JAXBException: return is not a valid property on class org.example.Wrapper
at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getElementPropertyAccessor(JAXBContextImpl.java:981)
at com.sun.xml.ws.db.glassfish.JAXBRIContextWrapper.getElementPropertyAccessor(JAXBRIContextWrapper.java:121)
at com.sun.xml.ws.server.sei.EndpointResponseMessageBuilder$DocLit.<init>(EndpointResponseMessageBuilder.java:214)
... 42 more 
```

如果我将以下注释添加到该方法并创建一个包装类，它有点工作：

```
@WebMethod
@ResponseWrapper(className="org.example.Wrapper") 
```

使用这些注释，安装时没有错误，我能够检索 WSDL。但是，测试仪不起作用，我从浏览器中收到此消息：

```
Exceptions details : java.lang.RuntimeException: Cannot find the correct port class.
javax.servlet.ServletException: java.lang.RuntimeException: Cannot find the correct port class. at
org.glassfish.webservices.monitoring.WebServiceTesterServlet.initializePort(WebServiceTesterServlet.java:572) at 
org.glassfish.webservices.monitoring.WebServiceTesterServlet.doGet(WebServiceTesterServlet.java:169) at 
org.glassfish.webservices.monitoring.WebServiceTesterServlet.invoke(WebServiceTesterServlet.java:104) at 
org.glassfish.webservices.JAXWSServlet.doGet(JAXWSServlet.java:186) at javax.servlet.http.HttpServlet.service(HttpServlet.java:668) at 
javax.servlet.http.HttpServlet.service(HttpServlet.java:770) at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542) at 
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281) at 
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) at 
org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595) at 
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161) at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331) at 
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231) at 
com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317) at 
com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195) at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849) 
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746) at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045) at 
com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228) at 
com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) at 
com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) at 
com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) at 
com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) at com.sun.grizzly.ContextTask.run(ContextTask.java:71) at 
com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) at 
com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:680) Caused by: java.lang.RuntimeException: 
Cannot find the correct port class. at org.glassfish.webservices.monitoring.WebServiceTesterServlet.initializePort(WebServiceTesterServlet.java:559) ... 29 more 
```

我宁愿不必为每个方法和包装类添加这些注释，只是为了让事情正常工作，即使这样做，仍然不是最佳的。

**更新：**这是 WSDL 文件：

```
 <!-- Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.2-b13 (branches/2.2-6964; 2012-01-09T18:04:18+0000) JAXWS-RI/2.2.6-promoted-b20 JAXWS/2.2 svn-revision#unknown. -->
 <!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.2-b13 (branches/2.2-6964; 2012-01-09T18:04:18+0000) JAXWS-RI/2.2.6-promoted-b20 JAXWS/2.2 svn-revision#unknown. -->
 <definitions targetNamespace="http://example.org/" name="ExampleComponentService">
   <types>
     <xsd:schema>
       <xsd:import namespace="http://example.org/" schemaLocation="http://localhost:8080/test-jaxws/ExampleComponentService?xsd=1"/>
     </xsd:schema>
   </types>
   <message name="sayHello">
     <part name="parameters" element="tns:sayHello"/>
   </message>
   <message name="sayHelloResponse">
     <part name="parameters" element="tns:sayHelloResponse"/>
   </message>
   <portType name="ExampleComponent">
     <operation name="sayHello">
       <input wsam:Action="http://example.org/ExampleComponent/sayHelloRequest" message="tns:sayHello"/>
       <output wsam:Action="http://example.org/ExampleComponent/sayHelloResponse" message="tns:sayHelloResponse"/>
     </operation>
   </portType>
   <binding name="ExampleComponentPortBinding" type="tns:ExampleComponent">
     <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/> 
     <operation name="sayHello"><soap:operation soapAction=""/>
       <input>
         <soap:body use="literal"/>
       </input>
       <output>
         <soap:body use="literal"/>
       </output>
     </operation>
   </binding>
   <service name="ExampleComponentService">
     <port name="ExampleComponentPort" binding="tns:ExampleComponentPortBinding">
       <soap:address location="http://localhost:8080/test-jaxws/ExampleComponentService"/>
     </port>
   </service>
 </definitions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:44:15.813

我不确定这是否是您的确切问题，但是在尝试部署简单的测试 WebService 时遇到了类似的异常。它在堆栈底部有以下异常：

```
javax.xml.ws.WebServiceException: class com.test.AddResponse do not have a property of the name return
javax.xml.bind.JAXBException: return is not a valid property on class com.test.AddResponse 
```

查看 Sahoo 的示例代码后，我在 osgi.properties 中看到了他们的 webservices 测试包：

```
# See http://java.net/jira/browse/GLASSFISH-16551 as to why the WAB needs to import JAXB classes
DynamicImport-Package=javax.xml.bind, javax.xml.bind.* 
```

该链接解释了问题发生的原因以及要解决它，您可以将这些包包含为动态导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:17:26.937

我知道这不能解决你的问题，但也许你可以看看[http://cxf.apache.org/](http://cxf.apache.org/)。CXF 是一个专门用于 SOAP/REST Web 服务的服务框架，并且与 OSGi 配合得很好。也许这可以解决你的问题。

# javascript - 保持我的 UI 更新而不用请求杀死服务器

> ID：10955696
> 
> 赞同：1
> 
> 时间：2012-06-08T20:32:02.493
> 
> 标签：javascript, .net, httplistener

## 问题

我正在使用以下代码来不断保持我的 UI 准确。我不喜欢轻微的一秒钟延迟。它目前只返回一个小的 JSON 文件，其中只有几个关于 UI 更新和页面其他重要信息的键。

**到目前为止我的脚本：**

```
function parseDynamicData(ard) {
    if (ard['details']['enabled'] == 'true' && ard['song']['art'] != 'undefined');
    {
        if (document.location.toString().indexOf('#offline') != -1)
            document.location = '/#tracks';
        $('#track-title').html(htmlDecode(ard['song']['title']));
        $('#track-artist').html(htmlDecode(ard['song']['artist']));
        $('#track-album').html(htmlDecode(ard['song']['album']));
        $('#track-art').attr('src', htmlDecode(ard['song']['art']));
        if (htmlDecode(ard['details']['playing']) == 'true') {
            $('#control-pauseplay').html('Pause');
            $('#control-pauseplay').attr('href', '/track?proc=2');
        } else {
            $('#control-pauseplay').html('Play');
            $('#control-pauseplay').attr('href', '/track?proc=3');
        }
    }
}

function updateLoop() {
    $.ajax({
        url: '/jtrack',
        dataType: 'json',
        cache: false,
        async: false,
        success: parseDynamicData,
        error: function (xhr) {
            document.location = '#offline';
        },
        complete: function (x, y) {
            setTimeout(updateLoop, 3000);
        }
    });
}

$(document).ready(function () {
    setTimeout(updateLoop, 1500);
}); 
```

## 我的问题

我可以多快安全地提出这些请求？我在移动设备（例如 iPhone 或 Android）上运行它，所以我认为我不需要经常这样做。他们是更好的方法吗？如果是这样，我如何使用 .net HttpListener 服务器来实现这一点？

## 主要警告：

这是我正在做的一个项目的一部分。问题是这个连接的服务器是*我用*VB.net 编写的 HttpServer。我不是这方面最精通的人，但这个服务器是专门为我的项目设计的（在这个领域没有其他解决方案真的足够，因为 Http 服务器是应用程序/项目本身的主要方面之一）。

***所以请记住：***

这是由您自己的计算机托管的本地服务器。一次只能真正连接一两个设备（通过 WiFi 连接到主机的 LAN）。

## 哦，还有...

对于所有担心让他们的数据使用量最大化的“*悲伤熊猫*”（@Dave Newton：P）……别担心。这仅在您的移动设备通过 WiFi 连接时使用。否则它甚至不会工作，因为它必须连接到运行应用程序的人的 LAN（除非有人端口转发它，但我认为没有人愿意这样做）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:06:34.143

根据评论，最好选择 websockets、comet 或您自己的手动长轮询解决方案。

快速请求是一件坏事（tm）

您的目标是尽可能长时间地保持单个连接打开，等待来自服务器的数据。如果连接断开，您将开始下一个请求并再次等待。

鉴于您使用的是 .NET，我强烈建议您使用[SignalR](https://github.com/SignalR/SignalR)来管理您的通信渠道。它支持许多不同的托管选项（ASP.NET、在您自己的应用程序域中自托管等），因此应该非常适合。

但是，您说自己编写服务器是这个项目的关键。我认为这是一个学术练习——如果不是，你很可能是在重新发明轮子。去看看 SignalR 如何实现维护与客户端的开放通信通道。这里的重点是你不想频繁地向服务器发出请求。

# php - Magento 文件更改未生效并刷新缓存

> ID：10955697
> 
> 赞同：3
> 
> 时间：2012-06-08T20:32:06.507
> 
> 标签：php, caching, magento

我正在将名为 Preview.php 的 Magento Enterprise 1.11.2.0 核心文件复制到具有相同目录结构的本地文件夹中，以覆盖此特定文件，因为它无法正常运行。更具体地说，它不允许预览交易电子邮件。我在本地文件夹中的 .php 文件中进行了修复更改，但 Magento 似乎认为没有任何更改。我什至尝试将核心文件本身修改为附加到返回变量的附加垃圾字符串，但这也没有注册。

现在，据我了解，我需要刷新缓存，但我认为我没有正确执行此操作以使这些更改生效。在缓存管理部分，我尝试过“刷新 Magento 缓存”，但我没有尝试过“刷新缓存存储”，因为设置我们安装的人告诉我不要碰它。有什么区别？刷新缓存存储可以使压倒一切的 preview.php 启动吗？

ADD：目录结构正确。正如我所提到的，由于某种原因，Magento 安装无法识别某些文件（而其他文件生效）更改。我们的一个人认为也许它是我们正在使用的扩展之一，它覆盖了某些部分，但我真的在皮肤文件夹中看不到任何覆盖核心应用程序文件或图像的内容。

例如，如果我在我们正在使用的主题文件夹中删除“logo_email.gif”，它应该回退到默认的 Magento 徽标图像。相反，Magento 实例认为该文件仍然存在，甚至加载它！我不得不创建我们自己的名为 logo_email.png 的徽标文件并将此文件加载到电子邮件模板中，因为删除或覆盖此文件不起作用。

我已经向 Magento 提交了支持票。如果我取得任何进展，我会更新。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T00:54:00.160

我相信罪魁祸首是系统 - > 工具下的 Magento 编译功能。禁用此功能可使代码更改生效！

# python - 访问 python int 文字方法

> ID：10955703
> 
> 赞同：22
> 
> 时间：2012-06-08T20:32:36.353
> 
> 标签：python, object, syntax, integer, literals

由于在 python 中一切都是对象，甚至是文字，我们通常可以直接在文字上调用方法。

前任：

```
'hello'.upper() 
```

从理论上讲，int 字面量似乎应该允许同样的事情

前任：

```
4.bit_length() 
```

但是，这不起作用，我不知道为什么。有任何想法吗？谢谢！

# c++ - 重复使用相同的规则来构建不同的目标

> ID：10955704
> 
> 赞同：3
> 
> 时间：2012-06-08T20:32:46.350
> 
> 标签：c++, makefile

我正在开发一个包含多个静态库的项目。我构建它们的方式总是相同的。我想知道如何为所有库重用这些规则，并避免为每个库进行复制和粘贴。这是构建“foo”库的示例。

```
# inputs
#
FOO_LIB_NAME  := libfoo.a
FOO_SRC_DIR   := $(SRC_DIR)/foo
FOO_SRC_FILES := \
        foo_file1.cc                              \
        subdir/foo_file2.cc                       \
        subdir/foo_file3.cc                       \
        ...
FOO_CFLAGS    :=

# rules
#
FOO_SRC_FILES := $(addprefix $(FOO_SRC_DIR)/,$(FOO_SRC_FILES))
FOO_OBJ_FILES := $(subst .cc,.o,$(FOO_SRC_FILES))

$(FOO_LIB_NAME): $(FOO_OBJ_FILES)
        $(AR) rc $@ $^

$(FOO_OBJ_FILES): %.o: %.cc
        $(CXX) $(COMMON_CFLAGS) $(FOO_CFLAGS) $< -o $@ 
```

此外，如果您对前面的代码摘录有任何评论，我很高兴知道。我对编写 Makefile 很陌生。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:40:51.943

您可以使用模板和`eval`Make 中的功能来完成此操作。[GNU Make](http://www.gnu.org/software/make/manual/make.html)手册在[关于`eval`](http://www.gnu.org/software/make/manual/make.html#Eval-Function)

这是手册中的示例：

```
PROGRAMS    = server client

server_OBJS = server.o server_priv.o server_access.o
server_LIBS = priv protocol

client_OBJS = client.o client_api.o client_mem.o
client_LIBS = protocol

# Everything after this is generic

.PHONY: all
all: $(PROGRAMS)

define PROGRAM_template =
 $(1): $$($(1)_OBJS) $$($(1)_LIBS:%=-l%)
 ALL_OBJS   += $$($(1)_OBJS)
endef

$(foreach prog,$(PROGRAMS),$(eval $(call PROGRAM_template,$(prog))))

$(PROGRAMS):
        $(LINK.o) $^ $(LDLIBS) -o $@

clean:
        rm -f $(ALL_OBJS) $(PROGRAMS) 
```

# grails - 条件搜索

> ID：10955716
> 
> 赞同：2
> 
> 时间：2012-06-08T20:34:25.130
> 
> 标签：grails, grails-orm, hibernate-criteria

我在尝试计算项目时遇到了一些问题。

想象以下领域类

```
class Book {
  String name
}
class Author {
  String name
  static hasMany = [books:Book]
} 
```

**如何获得按书籍数量排序的作者列表？**

这是我的尝试：

```
def c = Author.createCriteris()
c.list {
  projections {
    count 'books', 'numBooks'
    groupProperty 'id'
  }
  order 'numBooks', 'desc'
} 
```

但不知何故，我只得到不可用的结果......而且我不知道如何将 Author 对象加入 rsult 列表...... :-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T23:13:42.163

没有尝试过，但你不能做类似的事情：

```
class Author {

    String name
    static hasMany = [books:Book]

    static namedQueries = {
        sortByMostBooks {
            books {
                order('size', 'desc')
            }
        }
    }
} 
```

然后通过更清洁的命名查询访问

```
Author.sortByMostBooks.list(); 
```

此外，您可能希望在 Book 域类中包含一个 belongsTo：

```
static belongsTo = Author; 
```

或者：

```
static belongsTo = [authors:Author]; 
```

如果一本书可能有多个作者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:13:17.493

有东西！

我仍然不知道如何使用标准来做到这一点，但是通过切换到 HQL，我成功了。

因此，如果有人提出标准解决方案，他仍然会获得正确答案的奖金:-)

这是我的查询：

```
Author.executeQuery("""
    select 
        a, size(a.books) as numBooks 
    from 
        Author a 
    group by 
        id 
    order by 
        numBooks DESC
""",[max:20]) 
```

这个查询效率不高，因为它在一个循环中获取所有作者，但现在没关系。

# reporting-services - SSRS 中组标头的总计表达式

> ID：10955718
> 
> 赞同：0
> 
> 时间：2012-06-08T20:34:32.037
> 
> 标签：reporting-services, ssrs-2008

我正在尝试使用 SSRS 2008 R2 检查我们是否符合记录患者信息的标准。例如，在 PatientID 的组标题中，我有`=Not IsNothing(Fields!DATEOFBIRTH.Value)`. 现在，我想计算返回 True 的患者人数。显而易见的方法是

```
=Sum(Iif(Not IsNothing(Fields!DATEOFBIRTH.Value)
        , 1
        , 0
        )
    ) 
```

（这实际上是行不通的，因为我每个病人都有多行，但暂时不要介意。）问题是，如果我发现我的逻辑是错误的，我必须在两个地方进行更正，它赢了如果我忘记了，那就不明显了。在 Crystal 中，我要么使用运行计数，评估组的变化，要么使用手动计数`WhilePrintingRecords;`，在两个位置都有一个返回 T/F 结果的公式。普遍接受的 SSRS 方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T03:48:32.133

如果要集中逻辑，可以在报表中使用自定义代码或创建自定义程序集。使用自定义代码，如果您发现需要进行更改，则必须更新使用相同逻辑的每个报告，但添加到报告中很简单。使用自定义程序集，您必须创建一个类库，对其进行编译并将代码添加到您的机器，以便 BIDS 可以使用它（如果适用，还可以使用到每个开发人员的机器）和报表服务器。自定义程序集的优点是有一个存储逻辑的地方（不计算 DLL 的分布），因此当您更新逻辑时，每个报告都会自动更新。此链接是您的起点，并提供有关这两个选项的更多详细信息的链接：http: [//msdn.microsoft.com/en-us/library/ms155798](http://msdn.microsoft.com/en-us/library/ms155798(v=sql.100).aspx) (v=sql.100).aspx 。

# javascript - 更改变量的参数

> ID：10955719
> 
> 赞同：0
> 
> 时间：2012-06-08T20:34:36.263
> 
> 标签：javascript, jquery, html, shopping-cart

我正在尝试向 jQuery 购物车插件添加功能。我正在寻找一种方法来完成这项工作：

我有 ：

```
var item = {
group: product.parent().attr('id'),
id: product.attr('id'),
option: option || 'NA',
quantity: parseInt(product.attr('minimum'+option),10) || 1,
minimum: parseInt(product.attr('minimum'+option),10) || 1,
skip: parseInt(product.attr('skip'+option),10) || 1,
price: parseFloat(product.attr('price'+option)),
name: product.attr('name'+option),
}; 
```

这些设置链接到每个“li”元素的自定义属性，其中包含购物车中的所有项目信息。

我希望 item.price 成为一个变量。因此价格会根据某些条件而有所不同。

所以我尝试的是：

```
var priceVar;
if (item.quantity == 4 && item.name == "RD-101"){
priceVar == 15;
}
if (item.quantity == 8 && item.name == "RD-101"){
priceVar == 10;
}

var item = {
    group: product.parent().attr('id'),
    id: product.attr('id'),
    option: option || 'NA',
    quantity: parseInt(product.attr('minimum'+option),10) || 1,
    minimum: parseInt(product.attr('minimum'+option),10) || 1,
    skip: parseInt(product.attr('skip'+option),10) || 1,
    price: priceVar,
    name: product.attr('name'+option),
    }; 
```

所以基本上如果 item.quantity = X AND item.name = X...than item.price 将是 X。我需要根据数量和项目名称设置每单位的特定价格。

但它并没有像我出现在那里那样工作......我做错了什么？

谢谢！

# jpa - 执行 JPQL 查询时出错

> ID：10955720
> 
> 赞同：0
> 
> 时间：2012-06-08T20:34:50.593
> 
> 标签：jpa, jpql

我在 jpql 中很新我正在尝试执行这个查询：

```
 String queryString="" +
            "SELECT u,sr " +
            "FROM spot_review sr, user u, spot s " +
            "WHERE " +
                "sr.user_iduser IN (SELECT ALL fu.user_iduserto FROM favorite_user fu WHERE fu.user_iduserfrom=:"+User.STRING_ID_USER+") and " +
                "sr.user_iduser = u.id_user and " +
                "sr.spot_idspot = s.id_spot and " +
                "sr.datereview IN (SELECT MAX(sr2.datereview) FROM spot_review sr2 GROUP BY sr2.user_iduser) " +
            "GROUP BY u.id_user " +
            "ORDER BY sr.user_iduser " +
            "LIMIT :"+ServiceConstants.STRING_PAGE_NUMBER+",:"+ServiceConstants.STRING_ROWS_PER_PAGE;

    Query query = entityManager.createQuery(queryString); 
```

但我收到此错误：

```
org.hibernate.hql.ast.QuerySyntaxException: unexpected token: . near line 1, column 87 [SELECT u,sr FROM spot_review sr, user u, spot s WHERE sr.user_iduser IN (SELECT ALL fu.user_iduserto FROM favorite_user fu WHERE fu.user_iduserfrom=:idUser) and sr.user_iduser = u.id_user and sr.spot_idspot = s.id_spot and sr.datereview IN (SELECT MAX(sr2.datereview) FROM spot_review sr2 GROUP BY sr2.user_iduser) GROUP BY u.id_user ORDER BY sr.user_iduser LIMIT :pageNumber,:rowsPerPage]
    org.hibernate.hql.ast.QuerySyntaxException.convert(QuerySyntaxException.java:54)
    org.hibernate.hql.ast.QuerySyntaxException.convert(QuerySyntaxException.java:47)
    org.hibernate.hql.ast.ErrorCounter.throwQueryException(ErrorCounter.java:82)
    org.hibernate.hql.ast.QueryTranslatorImpl.parse(QueryTranslatorImpl.java:284)
    org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:182)
    org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
    org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:101)
    org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
    org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:124)
    org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:156)
    org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:135)
    org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1770)
    org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:272)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)
    $Proxy26.createQuery(Unknown Source)
    com.windy.server.dao.jpa.JpaDaoUser.getBestFavoriteUsersOBuser(JpaDaoUser.java:35)
    com.windy.server.service.impl.WindersMainServiceImpl.getBestFavoriteUsersOBuser(WindersMainServiceImpl.java:23)
    com.windy.server.controllers.WindersMainController.bestFavoriteUsersOBuserMobile(WindersMainController.java:93)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source) 
```

sql 查询正在运行，但我不明白我在此查询中做错了什么......

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:46:10.000

这不是一个有效的 JPQL 查询，原因如下：

*   `limit`JPQL 不支持。在 Query 对象上使用`setFirstResult()`and`setMaxResults()`
*   给定查询中使用的名称（`spot_review`, `user_iduser`, ...），您似乎正在查询表和列而不是实体和字段。JPQL 不使用表名和列名。绝不。始终映射实体和字段/属性。
*   `select all`，AFAIK，在 JPQL 中不存在
*   `group by`在 select 子句（sum、count、avg 等）中没有任何聚合函数的子句没有意义

JPQL（或 HQL）和 SQL 具有相似的结构，但它们不是同一种语言。

[在参考文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql)中了解 HQL 。

# c# - C# 使用点阵打印机打印发票

> ID：10955724
> 
> 赞同：0
> 
> 时间：2012-06-08T20:35:24.167
> 
> 标签：c#, printing

我有一台点阵打印机和一张已经设计好的发票。

如何在[发票模板](https://i.stack.imgur.com/BIA4V.gif)的指定部分打印 datagridview 项目？ ![在此处输入图像描述](../Images/33e53b6ba98ae970bc8cd1a6e47788b4.png)

为此，我搜索了很多关于如何在 printdocument 类中设置边界，但没有找到答案。请帮忙...

我的应用程序看起来像这样 [![在此处输入图像描述](../Images/1fcfe662a7c6533316dc7f207738a450.png)](https://i.stack.imgur.com/5X6e6.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:25:22.210

生成格式整齐的输出的最快方法是使用报告工具来布局您的报告并将数据传递给它，让它担心呈现给打印机。

有[Crystal Reports](http://www.crystalreports.com/)、[Sql Server Reporting Services](http://msdn.microsoft.com/en-us/library/ms159106.aspx)、[ActiveReports.Net](http://www.datadynamics.com/products/ActiveReports/Overview.aspx)等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T10:36:51.937

我设法通过[这种方法做到了](http://www.codeproject.com/Articles/196579/How-to-Print-Invoice-using-C)

# windows - 在 Windows 上使用 Git 更新文件

> ID：10955727
> 
> 赞同：1
> 
> 时间：2012-06-08T20:35:40.983
> 
> 标签：windows, git

我最近安装了 Git，我正在尝试使用以下命令更新文件：（在 Windows 7 上）

```
git add Probe.txt 
```

但它说“*致命：pathspec'probe'不匹配任何文件*”我在文件所在的目录中。事实上，如果我尝试，`git status`我会得到“ *modified: Probe.txt* ”。

我应该如何更新我的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:39:18.127

尝试`git add .`将添加所有内容。不知道为什么特定的文件名不起作用，但这绝对应该。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T20:42:21.290

由于某种原因，您似乎实际上是在“探测”之后进入了一个空格，请注意：

```
~% cd /tmp
/tmp% mkdir foo
/tmp% cd foo
foo% git init
Initialized empty Git repository in /tmp/foo/.git/
foo% git add probe .txt
fatal: pathspec 'probe' did not match any files
foo% 
```

我目前不在 Windows 上，但我认为您可以理解。

如果您确定不是这种情况，请在设置后重试您的命令

```
set GIT_TRACE=1 
```

并通过输出更新您的问题，`git add Probe.txt`以便我们进一步猜测。

# objective-c - 将空白部分添加到 NSFetchedResultsController

> ID：10955728
> 
> 赞同：1
> 
> 时间：2012-06-08T20:35:41.887
> 
> 标签：objective-c, nsfetchedresultscontroller

我正在制作一个类似于 iPhone 日历 ListView 的视图。我正在使用核心数据并获得约会并按日期对它们进行分组。

但是，就像在 iPhone 列表视图中一样，即使没有约会，我也需要为今天添加一个空白部分。我无法弄清楚如何为没有约会的部分执行此操作，因为我在创建分组之前进行了排序。

我如何将一个空白部分添加到`NSFetchedResultsController`并使用它，以便今天的日期在正确的位置而不是在列表的末尾？

```
- (NSFetchedResultsController *)fetchedResultsController {

    /*
     Set up the fetched results controller.
     */
    // Create the fetch request for the entity.
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Appointments" inManagedObjectContext:[[CoreDataHelper sharedInstance] managedObjectContext]];
    [fetchRequest setEntity:entity];
    //[fetchRequest setIncludesPendingChanges:YES];

    // Set the batch size to a suitable number.
    //[fetchRequest setFetchBatchSize:20];

    // Sort using the date / then time property.
    NSSortDescriptor *sortDescriptorDate = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES];
    NSSortDescriptor *sortDescriptorTime = [[NSSortDescriptor alloc] initWithKey:@"start_time" ascending:YES selector:@selector(localizedStandardCompare:)];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptorDate, sortDescriptorTime, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Use the sectionIdentifier property to group into sections.
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[[CoreDataHelper sharedInstance] managedObjectContext] sectionNameKeyPath:@"date" cacheName:nil];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;
    return fetchedResultsController;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T06:06:28.703

你不能有空的部分`NSFetchedResultsController`- 这就是它目前的设计方式，我称之为限制:)

Timothy Armes 已经遇到并解决了这个问题，他创建了一个`TAFetchedResultsController`允许空部分的类。它是`NSFetchedResultsController`. 它还允许您在不是部分名称的字段上对部分进行排序（非常方便）

但是，您将需要对您的核心数据模型进行更改 - 这并不是完全替代。

[https://github.com/timothyarmes/TAFetchedResultsController](https://github.com/timothyarmes/TAFetchedResultsController)

但它确实工作得很好，如果你愿意重新做你的数据模型，它将解决你的问题。

希望这可以帮助 ：）

# php - php类别递归层次结构

> ID：10955733
> 
> 赞同：1
> 
> 时间：2012-06-08T20:36:14.517
> 
> 标签：php, recursion, categories

我有这样的类别层次结构。

*   721 父母是 235
*   235 父母是 201
*   201 父母是 1
*   1 个父母是 0

0 是根类别 id，我正在尝试构建一个输入叶 id 721 的函数，获取 721、235、201、1 的完整路径 id

```
public function getPath($inputId = 0, $idList=array())
{       
    $sql ="SELECT * FROM hierarchy where id='{$inputId}'";
    $result = $this->db->fetchAll($sql);

    if($result){
        $currentId = $result[0]["id"];
        $parentId = $result[0]["parent_id"];

        $idList[] = $currentId;

        if ($parentId !=0){
           $this->getPath($parentId, $idList);
        }else{
            //var_dump($idList);
            return $idList;
        }
    }

} 
```

我可以在上面的 var_dump 部分看到正确的结果，但是当我从另一个类中使用这个函数时，它返回 null，就像这样 $data = $whateveHelper->getPath('721');

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:51:01.040

你只需要改变这个：

```
if ($parentId !=0){
    $this->getPath($parentId, $idList);
} 
```

对此：

```
if ($parentId !=0){
    return $this->getPath($parentId, $idList);
} 
```

然后您需要删除 else 子句并移动“return $idList;” 行到你的函数的底部，所以它总是被返回。上面的代码只会在 $parentId 为 0 的情况下返回 $idList。但是，如果您以递归方式调用它，则需要该函数始终返回某些内容。

我为您的整个功能推荐了一些类似的东西：

```
public function getPath($inputId = 0, $idList=array())
{       
    $sql ="SELECT * FROM hierarchy where id='{$inputId}'";
    $result = $this->db->fetchAll($sql);

    if($result){
        $currentId = $result[0]["id"];
        $parentId = $result[0]["parent_id"];

        $idList[] = $currentId;

        if ($parentId !=0){
           return $this->getPath($parentId, $idList);
        }
    }
    return $idList;
} 
```

让我知道这是否适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:45:32.407

该行：

```
$this->getPath($parentId, $idList); 
```

需要是

```
return $this->getPath($parentId, $idList); 
```

# visual-studio-2010 - VS 2010：编译类项目，调试发布，在其他开发人员的计算机上寻找我的 PC 的路径？

> ID：10955734
> 
> 赞同：1
> 
> 时间：2012-06-08T20:36:21.250
> 
> 标签：visual-studio-2010, compilation, visual-studio-debugging

我们有一个通用的编译代码库，只有我们公司内的一些高级开发人员才能访问。我们定期为它构建版本，为我们的开发、测试环境发布一个“发布”版本，并为开发人员使用一个调试版本。

奇怪的是，当我构建 Debug 版本时，当另一个开发人员尝试在他们的 PC 上使用 DLL 的 Debug 版本时，会出现对我 PC 上项目路径的引用。我没有广泛地编译这些 DLL，但我应该能够构建一个 Debug 版本并将其提供给其他开发人员在他们的项目中使用，对吗？或者这不是它的工作原理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:39:14.010

> 当另一个开发人员尝试在他们的 PC 上使用 DLL 的调试版本时，会出现对我 PC 上项目路径的引用。我没有广泛地编译这些 DLL，但我应该能够构建一个 Debug 版本并将其提供给其他开发人员在他们的项目中使用，对吗？或者这不是它的工作原理？

在构建调试版本时，您也在构建 .pdb，其中包含调试所需的符号。这将包括文件路径、行号等，并基于构建此库的系统。这就是他们看到这些路径的原因。

话虽如此，这不会有任何伤害——他们可以使用程序集进行调试，但在发生某些事情时将无法看到代码本身，因为他们没有项目。

# jquery - jQuery 在 MouseOver 上显示一个框，如果 MouseOver 则不要隐藏该框

> ID：10955736
> 
> 赞同：2
> 
> 时间：2012-06-08T20:36:34.743
> 
> 标签：jquery, mouseover

我查看了 stackoverflow 档案，但找不到解决方案。

问题是当鼠标悬停时我有一个按钮，它在它下面显示一个框。现在如果鼠标移出按钮框应该隐藏，但棘手的部分来了。如果鼠标离开按钮但仍留在框上，则框不应隐藏。

我正在使用 mouseover 和 mouseout 功能，但是一旦鼠标移出按钮，即使我尝试将鼠标放在框上，框也会隐藏。

```
(function($) { 
      $(function() {
            var dropDown = $('.box'),
            timer,
            cartButton = $('.button');

            cartButton.hover(function(){
                 dropDown.slideToggle();
            });

       });
     })(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:44:59.407

最好的方法是将你的盒子和按钮都包装在一个包含元素中，并将悬停事件绑定到该元素。[这](http://jsfiddle.net/pPfnE/)是一个简单的演示，代码在这里：

**HTML：**

```
<div class="container">
    <input type="button" value="Hover here">

    <div class="box">
        Box content
    </div>
</div>​ 
```

**jQuery：**

```
$(document).ready(function() {
    $('.container').hover(function() {
        $(this).children('.box').show();        
    }, function() {
        $(this).children('.box').hide();
    });        
});​ 
```

因为事件绑定在包含元素上，所以鼠标从按钮移动到框时不会离开它。

请注意，容器是块元素，因此占用 100% 的宽度，因此您需要使用 或 给它一个固定`display: inline`值`display: inline-block`。

# sql - 访问联合求和查询

> ID：10955738
> 
> 赞同：0
> 
> 时间：2012-06-08T20:36:42.787
> 
> 标签：sql

我正在尝试从可定义的日期范围内的 5 个不同字段中搜索问题代码，然后获取返回的每个问题代码的总和。下面的“我的查询”将每个查询返回的每个问题代码相加，但不会将一个查询的总数添加到另一个查询。

```
SELECT CUSTRAC.PROBLEM_CO, Count(CUSTRAC.PROBLEM_CO) AS CountOfPROBLEM_CO1
FROM CUSTRAC
WHERE (((CUSTRAC.DATE_SHIPP) Between [Begin Date] And [End Date]))
GROUP BY CUSTRAC.PROBLEM_CO, ([custrac].[problem_co])
HAVING (((CUSTRAC.PROBLEM_CO)<>""));

Union SELECT CUSTRAC.PROB_2, Count(CUSTRAC.PROB_2) AS CountOfPROB_2
FROM CUSTRAC
WHERE (((CUSTRAC.DATE_SHIPP) Between [Begin Date] And [End Date]))
GROUP BY CUSTRAC.PROB_2, ([custrac].[prob_2])
HAVING (((CUSTRAC.PROB_2)<>""));

Union SELECT CUSTRAC.PROB_3, Count(CUSTRAC.PROB_3) AS CountofPROB_3
FROM CUSTRAC
WHERE (((CUSTRAC.DATE_SHIPP) Between [Begin Date] And [End Date]))
GROUP BY CUSTRAC.PROB_3, ([custrac].[prob_3])
HAVING (((CUSTRAC.PROB_3)<>""));

Union SELECT CUSTRAC.PROB_4, Count(CUSTRAC.PROB_4) AS CountofPROB_4
FROM CUSTRAC
WHERE (((CUSTRAC.DATE_SHIPP) Between [Begin Date] And [End Date]))
GROUP BY CUSTRAC.PROB_4, ([custrac].[prob_4])
HAVING (((CUSTRAC.PROB_4)<>""));

UNION SELECT CUSTRAC.PROB_5, Count(CUSTRAC.PROB_5) AS CountofPROB_5
FROM CUSTRAC
WHERE (((CUSTRAC.DATE_SHIPP) Between [Begin Date] And [End Date]))
GROUP BY CUSTRAC.PROB_5, ([custrac].[prob_5])
HAVING (((CUSTRAC.PROB_5)<>"")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:42:38.033

如果我了解您的要求，这应该可以满足您的需求：

```
SELECT DISTINCT A.ProbCode, SUM(A.ProbCount) AS ProbSum FROM
(
SELECT CUSTRAC.PROBLEM_CO AS ProbCode, Count(CUSTRAC.PROBLEM_CO) AS ProbCount
FROM CUSTRAC
WHERE CUSTRAC.DATE_SHIPP Between [Begin Date] AND [End Date] AND CUSTRAC.PROBLEM_CO <> ''
GROUP BY CUSTRAC.PROBLEM_CO 

UNION ALL

SELECT CUSTRAC.PROB_2 AS ProbCode, Count(CUSTRAC.PROB_2) AS ProbCount
FROM CUSTRAC
WHERE CUSTRAC.DATE_SHIPP Between [Begin Date] AND [End Date] AND CUSTRAC.PROB_2 <> ''
GROUP BY CUSTRAC.PROB_2

UNION ALL 

SELECT CUSTRAC.PROB_3 AS ProbCode, Count(CUSTRAC.PROB_3) AS ProbCount
FROM CUSTRAC
WHERE CUSTRAC.DATE_SHIPP Between [Begin Date] AND [End Date] AND CUSTRAC.PROB_3 <> ''
GROUP BY CUSTRAC.PROB_3

UNION ALL 

SELECT CUSTRAC.PROB_4 AS ProbCode, Count(CUSTRAC.PROB_4) AS ProbCount
FROM CUSTRAC
WHERE CUSTRAC.DATE_SHIPP Between [Begin Date] AND [End Date] AND CUSTRAC.PROB_4 <> ''
GROUP BY CUSTRAC.PROB_4 

UNION ALL 

SELECT CUSTRAC.PROB_5 AS ProbCode, Count(CUSTRAC.PROB_5) AS ProbCount
FROM CUSTRAC
WHERE CUSTRAC.DATE_SHIPP Between [Begin Date] AND [End Date] AND CUSTRAC.PROB_5 <> ''
GROUP BY CUSTRAC.PROB_5

) AS A

GROUP BY ProbCode 
```

# boto - 如何使用 Boto 获取绑定到 LoadBalancer 的所有 EC2 实例的地址？

> ID：10955741
> 
> 赞同：4
> 
> 时间：2012-06-08T20:37:05.800
> 
> 标签：boto

我想用 boto 获取 LoadBalancer 上的所有实例，我该如何实现？

这是我到目前为止所得到的：

```
import boto
from boto.regioninfo import RegionInfo
from boto import ec2

ACCESS_KEY_ID = '*****'
SECRET_ACCESS_KEY = '********'

reg = RegionInfo(
    name='ap-southeast-1', 
    endpoint='elasticloadbalancing.ap-southeast-1.amazonaws.com')

conn = boto.connect_elb(
    aws_access_key_id=ACCESS_KEY_ID, 
    aws_secret_access_key=SECRET_ACCESS_KEY, 
    region=reg)

ec2_connection = boto.ec2.connection.EC2Connection(
    aws_access_key_id=ACCESS_KEY, 
    aws_secret_access_key=SECRET_ACCESS_KEY,
    region=reg)

instances = [ instance.id for instance in conn.get_all_load_balancers()[3].instances ] 
# instances is now [u'i-62448d36'], so far so good.
ec2_connection.get_all_instances(instances) 
```

以：

> ```
> <ErrorResponse xmlns="http://webservices.amazon.com/AWSFault/2005-15-09">
>   <Error>
>     <Type>Sender</Type>
>     <Code>InvalidAction</Code>
>     <Message>Could not find operation DescribeInstances for version 2012-03-01</Message>
>   </Error>
>   <RequestId>c6aab70d-b22b-11e1-a990-a747bbde9f63</RequestId>
> </ErrorResponse> 
> ```

我正在使用 boto 2.4.1。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T14:21:04.667

这就是我最终的结果：

```
import boto
from boto import regioninfo
from boto import ec2

ACCESS_KEY_ID = '***********'
SECRET_ACCESS_KEY = '***********'

elb_region = boto.regioninfo.RegionInfo(
    name='ap-southeast-1', 
    endpoint='elasticloadbalancing.ap-southeast-1.amazonaws.com')

elb_connection = boto.connect_elb(
    aws_access_key_id=ACCESS_KEY_ID, 
    aws_secret_access_key=SECRET_ACCESS_KEY, 
    region=elb_region)

ec2_region = ec2.get_region(
    aws_access_key_id=ACCESS_KEY_ID,
    aws_secret_access_key=SECRET_ACCESS_KEY, 
    region_name='ap-southeast-1')

ec2_connection = boto.ec2.connection.EC2Connection(
    aws_access_key_id=ACCESS_KEY_ID, 
    aws_secret_access_key=SECRET_ACCESS_KEY,
    region=ec2_region)

load_balancer = elb_connection.get_all_load_balancers(load_balancer_names=['MediaPopClients'])[0]
instance_ids = [ instance.id for instance in load_balancer.instances ]
reservations = ec2_connection.get_all_instances(instance_ids)
instance_addresses = [ i.public_dns_name for r in reservations for i in r.instances ] 
```

给出：

> [u'ec2-46-137-194-58.ap-southeast-1.compute.amazonaws.com']

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T21:18:46.130

我认为这样的事情应该有效：

```
>>> import boto
>>> elb = boto.connect_elb()
>>> load_balancer = elb.get_all_load_balancers(['my_lb_name'])[0]
>>> for instance_info in load_balancer.instances:
...    print instance_info.id 
```

LoadBalancer 对象的实例属性是 InstanceInfo 对象的列表。这些不是实际的 Instance 对象，但它确实具有 instance-id，因此您可以查找与之关联的 Instance 对象。

# android - Android布局忽略重力属性

> ID：10955743
> 
> 赞同：1
> 
> 时间：2012-06-08T20:37:33.937
> 
> 标签：android, android-layout, android-xml

我有几个清单项目。一个有效，另一个无效，而且它们看起来都非常相似。这确实应该是在 XML 文件中“找出差异”的游戏，但我终其一生都无法找出问题所在。一个列表项是完美的，另一个拒绝证明布局右侧的某些视图是合理的，如 xml 中所示。这是它们各自包含代码的样子。

![](../Images/ea0a5a801045afb5c550e4c3b6d98a86.png)

^ list_view_item_2.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:padding="5dp">
    <TextView
        android:id="@+id/item_text_product"
        android:textSize="20sp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:layout_width="0dp"/>
    <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
        <TableRow>
            <TextView
                android:id="@+id/item_text_total"
                android:gravity="right"
                android:textStyle="bold"
                android:layout_span="2"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
        <TableRow>
            <TextView
                android:id="@+id/item_text_units"
                android:gravity="right"
                android:textStyle="bold"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
            <TextView
                android:id="@+id/item_text_uom"
                android:gravity="right"
                android:textStyle="bold"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
        <TableRow>
            <TextView
                android:id="@+id/text_acog"
                android:text="COG:"
                android:gravity="right"
                android:textStyle="bold"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
            <TextView
                android:id="@+id/item_text_acog"
                android:paddingLeft="1sp"
                android:gravity="right"
                android:textStyle="bold"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
    </TableLayout>
</LinearLayout> 
```

下一个布局是有效的。

![](../Images/244719bc68a0d3dde6bf0bbb6b355c23.png)

^inventory_child_item.xml：代码看起来相同，大部分...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:padding="5dp">
    <TextView
        android:id="@+id/ici_site"
        android:textSize="20sp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:layout_width="0dp"/>
    <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
        <TableRow>
            <TextView
                android:id="@+id/ici_units"
                android:gravity="right"
                android:textStyle="bold"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
            <TextView
                android:id="@+id/ici_uom"
                android:paddingLeft="1sp"
                android:gravity="right"
                android:textStyle="bold"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
        <TableRow>
            <TextView
                android:id="@+id/ici_total"
                android:gravity="right"
                android:textStyle="bold"
                android:layout_span="2"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
        <TableRow>
            <TextView
                android:id="@+id/ici_price"
                android:gravity="right"
                android:textStyle="bold"
                android:layout_span="2"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
    </TableLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:23:39.543

您需要将[match_parent](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#MATCH_PARENT)设置为`ListView`

*喜欢：*

`android:layout_width="match_parent"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:15:40.373

月光奶酪，

我可以在您的代码中找到的唯一区别是：在有效的布局中，您命名的 TextView`@+id/ici_uom`的填充为`1sp`. 出于逻辑上的原因，我无法弄清楚为什么这一行会导致任何不应该的差异。您可能会更改此值，甚至将其添加到另一个列表中，但不会发现行为有任何差异。因此，我倾向于相信`ListView`他们自己或他们与父母的关系有一些不同。

**我这样说是因为你的列表项是**正确的，这是一个绝对的事实。似乎每个元素的宽度都关闭了。`fill_parent`中的应该`LinearLayout`是指标。我会重新分析列表本身以及您如何填充视图。

没有您的父标记，很难准确地说出发生了什么以及为什么。这是因为我们不知道你是如何使用`ListView`s 的，如果有多个，如果一个是 a`ListActivity`而另一个不是，甚至它们是如何嵌套的。

基于外观上的差异，我***假设***您有两个`ListView`s，为了进一步帮助您，我们需要他们及其父母的标记。没有标记，这就是我要告诉你看的地方。

希望这可以帮助，

模糊逻辑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T21:18:01.490

我认为 textviews 上的重力在您的情况下没有任何意义，因为 layout_width 是 wrap_content，这意味着 textview 将与您的文本一样大。如果您尝试将 android:layout_gravity="right" 添加到您的 TableLayout。

# javascript - 从提交的表单中获取值

> ID：10955745
> 
> 赞同：12
> 
> 时间：2012-06-08T20:37:50.500
> 
> 标签：javascript, jquery, html, forms

我有一个非常简单的表格：

```
<form id="toBeTranslatedForm" action="actionpage.php" method="POST" >
        <textarea name="userInput" id="toBeTranslatedTextArea"></textarea>
        <select id="translationOptions">//dynamically filled</select>
        <input type="submit" value="Translate" />
</form> 
```

使用 Jquery 我正在检测表单是否已提交：

```
function outputTranslated()
{
    $('#toBeTranslatedForm').submit(function() {
        //do stuff
    });
} 
```

如何从上面的表单中获取在文本区域中键入的文本以及在选择框中选择的选项？理想情况下，我想将它们放入一个数组中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-03-09T00:47:54.887

使用 Vanilla JS [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData)：

```
form.addEventListener("submit", function(e) {
  e.preventDefault();
  var data = new FormData(form);
  for (const [name,value] of data) {
    console.log(name,value)
  }
})
```

```
 <form id="form">
     <select id="sl1" name="sl">
       <option value="0" defaultSelected="true">-- Select --</option>
       <option value="trek">-- Trek --</option>
       <option value="rim">-- RIM --</option>
     </select>
     <label for="lg">remember</label>
     <input type="checkbox" name="remember" id="lg" />
     <button type="submit">submit</button>
</form>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T20:40:09.567

```
var theArray = $('#toBeTranslatedForm').serializeArray(); 
```

请参阅[`.serializeArray`文档](http://api.jquery.com/serializeArray/)。

在迂腐的笔记中，这不是“来自提交的表单”，因为您在实际提交任何内容之前就要求它们。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-16T20:53:33.927

您可以从提交事件中获取数据

```
function outputTranslated() {
    $('#toBeTranslatedForm').submit(function(evt) {
       const form = evt.target;
       // get the field that you want
       const userInputField = form.elements['userInput'];
       alert(userInputField.value);
    });
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T20:42:19.893

我想你正在寻找这样的东西。

```
$('#toBeTranslatedForm').submit(function() {
  alert($(this).serialize());
  return false;
}); 
```

希望能帮助到你

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-08T20:44:50.763

以下是获得价值的方法：

```
function outputTranslated() {
    $('#toBeTranslatedForm').submit(function() {
       var textareaval = $('#userInput').val();
       alert(textareaval);
    });
} 
```

`textareaval`您可以通过在上面代码中的变量定义之后添加此行来对选择框执行相同的操作：

```
var selectval = $('#translationOptions').val(); 
```

然后，您可以使用序列化，也可以手动将其放入数组中：

```
var a = [textareaval,selectval]; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-08T20:45:29.373

提交后，您可以通过执行以下操作来获取值：

```
function outputTranslated()
{
$('#toBeTranslatedForm').submit(function() {
    var textarea = $('#toBeTranslatedTextArea').val();
    var allVals = [];
    $('#translationOptions :checked').each(function() {
   allVals.push($(this).val());
 });
});} 
```

# c++ - 根据出现次数最多的标签快速标记一些元素

> ID：10955748
> 
> 赞同：0
> 
> 时间：2012-06-08T20:37:53.497
> 
> 标签：c++, map, vector

假设我有分量向量（每个分量都是一个浮点向量）

```
vector<vector<float> > components 
```

我有一个数据向量（每个数据都是一个与组件大小相同的浮点向量）

```
vector< vector<float> > data 
```

以及与此数据相关的标签

```
vector<string> labels 
```

（这里我的意思`label[i]`是 的标签`data[i]`）。我还有一个距离函数，它返回两个向量之间的距离

```
float distance(vector<float> v1, vector<float> v2); 
```

我想根据与该组件关联的数据中出现最多的标签给每个组件一个标签；即如下：

```
for each data d from data
{
   let c the nearest component from d according to distance.
   associate the label of d to c.
}

for each component c
{
   definitely give to c the label that occur the most among labels associated to it
   // example if labels {l1,l2,l1,l2,l1,l1,l1,l8,l1} were associated to c, then its label should be l1
} 
```

应该返回的最终结果是一个标记组件的向量（对`<component,label>`），描述为：

```
vector< pair< vector<float>, string > > labeledComponents. 
```

在 C++ 中简单快捷的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:23:19.107

这个任务很复杂，所以在 C++ 中没有*超级*简单快捷的方法，但这是我得到的：

```
typedef vector<float> componenttype;
typedef vector<float> datatype;
typedef map<string, int> possiblenames;
typedef vector<pair<componenttype, string>> resulttype;

float vecdistance(datatype v1, componenttype v2) {return 1.0;}

resulttype user995434(vector<datatype> data, vector<string> labels, vector<componenttype> components) {
    map<componenttype, possiblenames> maybenames;
    resulttype resultnames;

    //for each data d from data
    for(auto d=data.begin(); d!=data.end(); ++d) {
       //let c the nearest component from d according to distance.
       auto closest=components.begin();
       float closedistance = FLT_MAX;
       for(auto it=components.begin(); it!=components.end(); ++it) {
           float dist = vecdistance(*d, *it);
           if (dist < closedistance) {
               closedistance = dist; 
               closest = it;
           }
        }
        //associate the label of d to c.
        int offset = std::distance(data.begin(), d);
        maybenames[*closest][labels[offset]]++;
    }
    //for each component c
    for(auto c=components.begin(); c!=components.end(); ++c) {
        //let mostname be the name with the most matches.
        auto posnames = maybenames[*c];
        posnames[""]=0; //guarantee each component has _something_
        auto mostname = posnames.begin();
        for(auto it=posnames.begin(); it!=posnames.end(); ++it) {
            if (it->second > mostname->second)
                mostname = it;
        }
        //associate mostname with c
        resultnames.push_back(make_pair(*c, mostname->first));
    }
    return resultnames;
} 
```

[这里的编译和执行证明](http://ideone.com/8hlwI)，尽管我没有以任何方式验证它的准确性。

我应该注意，由于您从未提到任何以任何方式排序的数据，也没有提到任何其他可用作快捷方式的东西，因此该算法在任何语言中都不是“快速”的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:52:07.417

您几乎拥有根据数据元素查找 C 的标签的算法。您将必须遍历 的每个元素`components`并查看距离是否小于当前最小值：如果是，请记住当前组件并将最小距离设置为当前距离。

*注意*：不要忘记多个组件可以达到相同的最小距离，因此请保留最小距离组件的集合，而不仅仅是一个

您可以构建一个`std::map<>`组件映射（参见 ）到（标签映射到出现编号），然后从此映射中为每个组件选择最高出现编号

# xslt - 如何编写一个排除某些元素但包含其他元素的 XSLT 模板？

> ID：10955751
> 
> 赞同：-1
> 
> 时间：2012-06-08T20:38:08.543
> 
> 标签：xslt

如何编写一个 XSLT 模板，它将所有非“元”和“答案”元素放入“my_question”模板中？因此，例如，给定以下 XML ...

```
<question>
    <meta>
        ...
    </meta>
    <para />
    <para>Why?</para>
    <answer weight="1" correctness="0">
        ...
    </answer>
    <answer weight="1" correctness="0">
        ...
    </answer>
    <answer weight="1" correctness="100">
        ...
    </answer>
    <answer weight="1" correctness="0">
        ...
    </answer>
</question> 
```

我希望结果是

```
<my_question>
    <para />
    <para>Why?</para>        
</my_question> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:46:29.673

你从一个身份模板开始：

```
<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template> 
```

运行它，你会看到，一切都会改变。

然后，您有选择地删除节点，例如：

```
<xsl:template match="answer" /> 
```

阅读此链接以获取更多信息：[http](http://www.xmlplease.com/xsltidentity) ://www.xmlplease.com/xsltidentity 它非常详细。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:46:39.573

身份模板是你的朋友

```
<xsl:stylesheet
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 version="2.0">

 <xsl:output method="xml" encoding="utf-8" indent="yes"/>

 <xsl:template match="/">
     <my_question>
        <xsl:apply-templates select="question"/>
     </my_question>
 </xsl:template>

 <!-- ignores the specified elements. Adjust for nesting if necessary. -->
 <xsl:template match="meta | answer"/>

 <!-- Pass everything else -->
 <xsl:template match="@*|node()">
 <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

# sql - 是什么阻止了“使用（nolock）从 TableName 中选择前 1 个 *”返回结果？

> ID：10955752
> 
> 赞同：10
> 
> 时间：2012-06-08T20:38:13.083
> 
> 标签：sql, sql-server-2008, locking

我目前正在运行以下语句

```
select * into adhoc..san_savedi from dps_san..savedi_record 
```

这需要很长时间，我想看看它走了多远，所以我运行了这个：

```
select count(*) from adhoc..san_savedi with (nolock) 
```

这并没有及时返回任何东西，所以我这样做了：

```
select top 1 * from adhoc..san_savedi with (nolock) 
```

即使这似乎无限期地运行。如果有数百万条记录计数（*）可能需要很长时间，我可以理解，但我不明白为什么考虑到我指定了 nolock，选择前 1 条记录不会立即返回。

以完全公开的名义，dps_san 是一个通过链接服务器从 odbc 连接中提取的视图。我不认为这会影响为什么我不能返回第一行，而只是把它扔在那里以防我错了。

所以我想知道是什么阻止了该语句的运行？

编辑：

正如我上面提到的，是的 dps_san..savedi_record 是一个视图。这是它的作用：

```
select * from DPS_SAN..root.SAVEDI_RECORD 
```

它只不过是一个别名，没有分组/排序/等，所以我认为问题不在于这里，但如果我错了，请赐教。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T20:58:29.570

`SELECT`查询`NOLOCK`实际上并不需要锁，它们仍然需要`SCH-S`在表上加一个（模式稳定性）锁（[因为它是一个堆，所以它也需要一个`hobt`锁](http://tenbulls.co.uk/2011/10/14/nolock-hits-mythbusters/)）。

此外，在`SELECT`开始之前，SQL Server 必须为语句编译一个计划，这也要求它对`SCH-S`表进行锁定。

由于您长时间运行的事务通过它创建表，因此在语句完成之前`SELECT ... INTO`对其持有不兼容的锁。`SCH-M`

~~您可以在~~封锁期间`sys.dm_os_waiting_tasks` ~~通过~~ 查看来验证这一点。

 ~~当我在一个连接中尝试以下操作时

```
BEGIN TRAN

SELECT *
INTO NewT
FROM master..spt_values

/*Remember to rollback/commit this later*/ 
```

然后执行（或者只是尝试查看估计的执行计划）

```
SELECT *
FROM NewT
WITH (NOLOCK) 
```

在一秒钟内，阅读查询被阻止了。

```
SELECT wait_type,
       resource_description
FROM sys.dm_os_waiting_tasks
WHERE session_id = <spid_of_waiting_task> 
```

显示等待类型确实`SCH_S`是阻塞资源`SCH-M`

```
wait_type        resource_description
---------------- -------------------------------------------------------------------------------------------------------------------------------
LCK_M_SCH_S      objectlock lockPartition=0 objid=461960722 subresource=FULL dbid=1 id=lock4a8a540 mode=Sch-M associatedObjectId=461960722 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T20:42:56.023

很可能没有锁...如果 dps_san..savedi_record 是一个视图，那么它可能需要很长时间才能执行，因为它可能在不使用索引的情况下访问表，或者它可能正在排序数百万记录，或任何原因。然后，您的查询，即使是简单的顶部或计数，也只会与执行该视图一样快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T20:45:03.620

这里有几个问题需要考虑。dps_san..savedi_record 是视图吗？如果是这样，获取数据可能需要很长时间。我能想到的另一件事是，您正在尝试使用`select into`语法创建临时表，这是一个坏主意。`select * into ...`语法将在选择期间锁定 tempdb。

如果您使用该语法创建表，则有一种解决方法。首先，通过`where 1=0`在初始语句的末尾抛出来创建表：

```
select * into ... from ... where 1=0 
```

这将首先创建表（这很快），这允许您创建表，`insert into`因为该表现在存在（不会在查询期间锁定 tempdb）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T21:00:42.977

找到`session_id`正在执行的`select into`：

```
SELECT r.session_id, r.blocking_session_id, r.wait_type, r.wait_time
  FROM sys.dm_exec_requests AS r
  CROSS APPLY sys.dm_exec_sql_text(r.plan_handle) AS t
  WHERE t.[text] LIKE '%select%into%adhoc..san_savedi%'; 
```

这应该让您知道另一个会话是否正在阻止选择进入，或者它是否具有导致问题的等待类型。

您可以在另一个窗口中为尝试进行选择的会话重复该过程。我怀疑 Martin 是对的，并且我之前关于模式锁的评论是相关的。~~

# php - 在 zen 购物车中执行 jquery ajax 发布时出现 500 个内部服务器错误

> ID：10955756
> 
> 赞同：0
> 
> 时间：2012-06-08T20:38:33.383
> 
> 标签：php, jquery, ajax, zen-cart

嗨，我正在使用 zen cart 并拥有此代码，我不断收到 500 内部服务器错误，我不确定它是代码还是我的 php 脚本中的某些内容：

```
<?php
global $db

$partNum = trim(strtolower($_POST['partNum']));
$partNum = mysql_escape_string($partNum);

$query = "SELECT products_model FROM " . TABLE_PRODUCTS . " WHERE products_model = '$partNum' LIMIT 1";
$result = $db->Execute($query);
$num = mysql_num_rows($result);

echo $num;
mysql_close(); 
```

和jQuery

```
jQuery.ajax({
   type: "POST",
   url: "/includes/templates/theme376/phpScripts/check.php",
   data: 'partNum='+ partNum,
   cache: false,
   success: function(response){
if(response == 1){
$('#partNum').css('border', '3px #C33 solid');  
$('#tick').hide();
$('#cross').fadeIn();
}else{
$('#partNum').css('border', '3px #090 solid');
$('#cross').hide();
$('#tick').fadeIn();
     }

}
}); 
```

这是错误

```
POST http://mysite.com/includes/templates/theme376/phpScripts/check.php?partNum=wwww 500 (Internal Server Error) /min/?f=/includes/templates/theme376/jscript/jscript_fileuploader.js,/includes/templates/theme376/jscript/jscript_jquery-1.7.1.min.js,/includes/templates/theme376/jscript/jscript_jquery-ui-1.8.20.custom.min.js,/includes/templates/theme376/jscript/jscript_jquery.nivo.slider.pack.js&1332216833:38
f.support.ajax.f.ajaxTransport.send /min/?f=/includes/templates/theme376/jscript/jscript_fileuploader.js,/includes/templates/theme376/jscript/jscript_jquery-1.7.1.min.js,/includes/templates/theme376/jscript/jscript_jquery-ui-1.8.20.custom.min.js,/includes/templates/theme376/jscript/jscript_jquery.nivo.slider.pack.js&1332216833:38
f.extend.ajax /min/?f=/includes/templates/theme376/jscript/jscript_fileuploader.js,/includes/templates/theme376/jscript/jscript_jquery-1.7.1.min.js,/includes/templates/theme376/jscript/jscript_jquery-ui-1.8.20.custom.min.js,/includes/templates/theme376/jscript/jscript_jquery.nivo.slider.pack.js&1332216833:38
partNum_check index.php:307
f.event.dispatch /min/?f=/includes/templates/theme376/jscript/jscript_fileuploader.js,/includes/templates/theme376/jscript/jscript_jquery-1.7.1.min.js,/includes/templates/theme376/jscript/jscript_jquery-ui-1.8.20.custom.min.js,/includes/templates/theme376/jscript/jscript_jquery.nivo.slider.pack.js&1332216833:37
f.event.add.h.handle.i 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:52:48.313

从数据中取出partnum 并将其用作查询字符串。

你只是得到一个通用的 500 错误？没有细节？

如果将 ?partnum=blah 放入请求 URL 会发生什么？

我不确定您是否希望像这样在“数据”中使用查询参数。这适用于数据，而不是查询字符串。

# silverlight - 通过使用应用程序库缓存设置减小 XAP 大小会导致在 ClientBin 中丢失文件时发出警告

> ID：10955757
> 
> 赞同：2
> 
> 时间：2012-06-08T20:38:38.797
> 
> 标签：silverlight, caching, xap

当我在 Silverlight 中的项目上启用“通过使用应用程序库缓存来减少 XAP 大小”设置时，我发现我的 ClientBin 文件夹中缺少某些文件，现在在 Visual Studio 的解决方案资源管理器中显示了警告图标，例如作为 System.Xml.Linq.zip 和 System.ServiceModel.DomainServices.Client.Web.zip。然而，绝大多数文件复制并且没有警告。我想知道是否有人知道如何解决这个问题？如果我启用此设置，丢失的文件复制到 ClientBin 就好了。我假设他们在禁用设置的情况下丢失它们的原因是它们包含在 XAP 文件中，但是为什么它仍然期望它们在 ClientBin 中并给我警告指示器图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:28:57.237

在带有警告图标的文件的“属性”部分中，选中该`Copy to Output Directory`字段。将其更改为`Copy Always`. 这些是您从外部添加到项目中的那些引用，因此必须包含在 ClientBin 中。还要检查目录中文件的物理存在。

# python - 如何使用 QPainterPath 创建带有曲线的文本

> ID：10955758
> 
> 赞同：6
> 
> 时间：2012-06-08T20:38:46.120
> 
> 标签：python, pyqt, qpainter

我正在尝试用一些文本构建一个弧线。我能够创建弧线，并且可以将文本与曲线一起放置。但到目前为止，我找不到垂直于曲线旋转文本的方法。

这是我正在尝试的代码

```
from __future__ import division
import os
import sys
from PyQt4 import QtGui,QtCore
import math

class PathPaintTest(QtGui.QFrame):

    def __init__(self, *args):
        super (PathPaintTest, self).__init__(*args)
        self.setMaximumSize(250, 110)
        self.setMinimumSize(250, 110)
        self.setFrameShape(QtGui.QFrame.WinPanel)
        self.setFrameShadow(QtGui.QFrame.Sunken)

    def paintEvent(self, event):
        hw = QtCore.QString("Hello World")
        drawWidth = self.width() / 100
        painter = QtGui.QPainter(self)
        pen = painter.pen()
        pen.setWidth(drawWidth)
        pen.setColor(QtGui.QColor(QtCore.Qt.red))
        painter.setPen(pen)
        painter.translate(5,0)
        cc1 = QtCore.QPointF(5, -15)
        cc2 = QtCore.QPointF(220, -15)
        path1 = QtGui.QPainterPath(QtCore.QPointF(5, 140))
        path1.cubicTo(cc1, cc2, QtCore.QPointF(240, 140))
        painter.drawPath(path1)

        pen.setColor(QtGui.QColor(QtCore.Qt.yellow))
        painter.setPen(pen)
        font = painter.font()
        font.setPixelSize(drawWidth * 5)
        painter.setFont(font)
        percentIncrease = 1 / (hw.size() + 1)
        perecent = 0
        for i in range(hw.size()):
            perecent+=percentIncrease
            point = QtCore.QPointF(path1.pointAtPercent(perecent))
            painter.drawText(point,QtCore.QString(hw[i]))

        QtGui.QFrame.paintEvent(self,event)

class TextTest(QtGui.QWidget):
    def __init__(self):
        super(TextTest, self).__init__()
        self.initUI()

    def keyPressEvent(self, event):
        if event.key() == QtCore.Qt.Key_Escape:
            self.close()

    def initUI(self):
        self.mypb = PathPaintTest()
        hbox = QtGui.QHBoxLayout()
        hbox.addWidget(self.mypb)

        vbox = QtGui.QVBoxLayout()
        vbox.addLayout(hbox)

        self.setLayout(vbox)
        self.setGeometry(1900, 500, 450, 180)
        self.setWindowTitle('Text Test')

def run():

    app = QtGui.QApplication(sys.argv)
    ex = TextTest()
    ex.show()
    sys.exit(app.exec_())

if __name__ == "__main__":
    run() 
```

但我正在尝试实现接近这篇文章[http://zrusin.blogspot.com/2006/11/text-on-path.html](http://zrusin.blogspot.com/2006/11/text-on-path.html)的东西。喜欢文本要根据角度旋转。知道如何使用 QPainterPath 和 QPainter 或任何其他方法吗？

我正在寻找这样的输出

[![在此处输入图像描述](../Images/96366e86ebc3e35b63fa012805ac0058.png)](https://i.stack.imgur.com/zG9uE.jpg)

很抱歉，由于声誉较低，我无法将图片添加到我的帖子中。

编辑 ：

这是一些更新版本..它的python版本的qt-project.org/faq/answer/how_do_i_make_text_follow_the_line_curve_and_angle_of_the_qpainterpath

```
from __future__ import division
import os
import sys
from PyQt4 import QtGui,QtCore
import math

class PathPaintTest(QtGui.QFrame):

    def __init__(self, *args):
        super (PathPaintTest, self).__init__(*args)
        self.setMaximumSize(250, 110)
        self.setMinimumSize(250, 110)
        self.setFrameShape(QtGui.QFrame.WinPanel)
        self.setFrameShadow(QtGui.QFrame.Sunken)

    def paintEvent(self, event):
        hw = QtCore.QString("Hello World")
        drawWidth = self.width() / 100
        painter = QtGui.QPainter(self)
        pen = painter.pen()
        pen.setWidth(drawWidth)
        pen.setColor(QtGui.QColor(QtCore.Qt.red))
        painter.setPen(pen)
        painter.translate(5,0)

        c1 = QtCore.QPointF(5, -15)
        c2 = QtCore.QPointF(220, -15)
        path = QtGui.QPainterPath(QtCore.QPointF(5, 140))
        path.cubicTo(c1, c2, QtCore.QPointF(240, 140))
        painter.drawPath(path)

        pen.setColor(QtGui.QColor(QtCore.Qt.green))
        painter.setPen(pen)
        font = painter.font()
        font.setPixelSize(drawWidth * 10)
        painter.setFont(font)
        perecentIncrease = 1 / (hw.size() + 1)
        perecent = 0

        for i in range(hw.size()):
            perecent+=perecentIncrease
            point = QtCore.QPointF(path.pointAtPercent(perecent))
            angle = path.angleAtPercent(perecent)
            rad = math.radians(angle)
            sina = math.sin(rad)
            cosa = math.cos(rad)
            deltaPenX = cosa * pen.width()
            deltaPenY = sina * pen.width()
            newX = (cosa * point.x()) - (sina * point.y())
            newY = (cosa * point.y()) + (sina * point.x())
            deltaX = newX - point.x()
            deltaY = newY - point.y()
            tran =  QtGui.QTransform(cosa,sina,-sina,cosa,-deltaX + deltaPenX,-deltaY - deltaPenY)
            painter.setWorldTransform(tran)
            painter.drawText(point,QtCore.QString(hw[i]))

        QtGui.QFrame.paintEvent(self,event)

class TextTest(QtGui.QWidget):
    def __init__(self):
        super(TextTest, self).__init__()
        self.initUI()

    def keyPressEvent(self, event):
        if event.key() == QtCore.Qt.Key_Escape:
            self.close()

    def initUI(self):
        self.mypb = PathPaintTest()
        hbox = QtGui.QHBoxLayout()
        hbox.addWidget(self.mypb)

        vbox = QtGui.QVBoxLayout()
        vbox.addLayout(hbox)

        self.setLayout(vbox)
        self.setGeometry(300, 200, 500, 250)
        self.setWindowTitle('Text Test')

def run():

    app = QtGui.QApplication(sys.argv)
    ex = TextTest()
    ex.show()
    sys.exit(app.exec_())

if __name__ == "__main__":
    run() 
```

但我仍然无法获得轮换。

更新 ：

我现在开始工作了，这是更新的部分，也许它也会帮助其他人。

```
 painter.save()
    painter.translate(point)
    painter.rotate(-angle)
    painter.drawText(QtCore.QPoint(0, -pen.width()),QtCore.QString(hw[i]))
    painter.restore(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-11T21:04:19.767

```
painter.save()
painter.translate(point)
painter.rotate(-angle)
painter.drawText(QtCore.QPoint(0, -pen.width()),QtCore.QString(hw[i]))
painter.restore(); 
```

由于评论而回答我自己的问题并对迟到的回复感到抱歉:)

# mysql - 为 Rails 应用程序上的访问者提供 SQL 查询访问权限

> ID：10955759
> 
> 赞同：1
> 
> 时间：2012-06-08T20:38:51.007
> 
> 标签：mysql, sql, ruby-on-rails, gem

我想向 Web 上的访问者提供在 Rails 驱动的站点上查询底层 mysql 数据库的能力。最透明的方式似乎能够获取文本框中的文本并将其传递给 sql 连接。

但是，我想隐藏用户/密码详细信息，只使某些内容表可用。另外，我只想提供读取权限。有没有方便的方法来做到这一点？如果也有方便的视图助手会更好。有这样的宝石吗？也许类似于 PHP 的 MyAdmin？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:43:09.287

对此的解决方案更多的是配置数据库而不是查找特殊代码。

您需要在 MySQL 数据库中创建一个用户，并授予您选择的表子集的[只读权限。](http://dev.mysql.com/doc/refman/5.1/en/grant.html)在您的连接字符串中使用此用户来查询来自您的“原始”SQL 页面。这是您必须更改代码的唯一地方，它所涉及的只是使用与其他代码不同的连接字符串。

这是授予用户只读权限[的特定于对象的示例。](https://stackoverflow.com/questions/3108656/grant-a-user-permission-to-only-view-a-mysql-view)

为了帮助管理服务器上的这个问题，您可以使用[模式](https://dev.mysql.com/doc/workbench/en/wb-model-overview-privileges.html)。

# google-maps - KML 网络链接中的 onStop 事件能否与 Google Maps v3 一起使用？

> ID：10955766
> 
> 赞同：0
> 
> 时间：2012-06-08T20:39:30.693
> 
> 标签：google-maps

我一直在尝试获得一个简单的示例，其中谷歌地图中的 kml 图层将自动更新每个缩放/平移的内容。我一直在使用一个简单的服务器 php 文件进行测试，该文件在指定的 bbox 中间返回一个地标；我们的目标是使用这个模型来执行服务器端集群。我已经使用通过网络 kml 链接的 php 文件在 google earth 中工作了示例。

网络 KML 文件： [http ://crv.vividsolutions.com/test/kml/layer2.kml](http://crv.vividsolutions.com/test/kml/layer2.kml)

当我在谷歌地图中添加与图层相同的网络 kml 时，服务器上的 php 文件仅在第一次访问时才被访问。图层按预期出现并显示在屏幕中间的点，但是在平移地图后数据没有刷新（点没有移动到地图的中心）。根据访问日志，第一个请求将 bbox 传递到 kml 服务器，但是没有任何后续请求。我的测试地图可以在这里找到： [http ://crv.vividsolutions.com/test/kml/index.php](http://crv.vividsolutions.com/test/kml/index.php)

我发现了一个看起来相关的问题（id=2697）。[我只能在这篇文章中包含 2 个链接，否则会链接它]。

在尝试了几件事之后，我确实设法获得了所需的行为，但是解决方案涉及删除现有的 JS 图层对象并在每个平底锅上添加一个新对象。这似乎有点沉重。我希望有人可能有替代解决方案来获得相同的行为，而不会产生与在每个平移/缩放上创建新图层对象相关的开销。

图层交换示例（有效但笨拙）：与 index.php 相同的服务器 ...只需重命名为 index2.php [遇到 smap bot 链接限制]。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-08T22:17:22.160

KML 参考资料说谷歌地图支持 onStop。

*   [原始链接](https://developers.google.com/kml/documentation/kmlelementsinmaps)（不再有效）
*   [更新链接](https://developers.google.com/maps/documentation/javascript/kmllayer#supported-elements)

    部分支持“onStop”

# php - 获取从日期到今天的月数

> ID：10955767
> 
> 赞同：1
> 
> 时间：2012-06-08T20:39:35.003
> 
> 标签：php

我正在寻找一种方法来计算从特定日期到今天已经过去的月份。例如，从一月到今天（六月）将是“5”

请记住，如果一年后它应该可以工作，所以必须包括这一年。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T20:43:08.370

使用 date_diff()

```
$df = date_diff(date_create('01/08/2012'),date_create('05/08/2012')); 

echo $df->format("Month: %M"); 
```

# jquery - 如何使用jquery显示以简单文本显示的url中的图像

> ID：10955768
> 
> 赞同：0
> 
> 时间：2012-06-08T20:39:37.773
> 
> 标签：jquery, image-processing

嗨朋友我有这个问题。

我有这个

```
<div  id="text">
Hello world this just a demo.
http://upload.wikimedia.org/wikipedia/it/e/e1/Nba1.png
</div> 
```

现在我需要用 jquery 把它转换成这个。

```
<div id="text">
Hello world this just a demo.
<img src="http://upload.wikimedia.org/wikipedia/it/e/e1/Nba1.png" width="150" height="150" alt="Nba">
</div> 
```

一些想法或已经插件。1 步骤是检测图像 url 表单 div id 文本 2 用 html 内容替换检测到的图像 url 3 如果检测到 url 如果不是图像，则用 html 内容替换它们 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:10:53.100

这就是你在 PHP 中的做法，我看不出没有在 PHP 中这样做的理由

```
<?php

function get_string_between($string, $start, $end){
    $string = " ".$string;
    $ini = strpos($string,$start);
    if ($ini == 0) return "";
    $ini += strlen($start);
    $len = strpos($string,$end,$ini) - $ini;
    return substr($string,$ini,$len);
}

$fullstring = '
 <div  id="text">
 Hello world this just a demo.
 http://upload.wikimedia.org/wikipedia/it/e/e1/Nba1.png
 </div>';

$start = "http:";
$end = "</div>";

$parsed = get_string_between($fullstring, $start, $end);

echo $start.$parsed; // (result = dog)

?> 
```

而且我认为扩展检查非常简单，只需检查谷歌“PHP 检查有效图像扩展”或类似查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:22:35.507

首先在您的网址中添加一个 id

```
 <div  id="text">
  Hello world this just a demo.
  <div id="img">http://upload.wikimedia.org/wikipedia/it/e/e1/Nba1.png</div>
  </div> 
```

然后像这样获取jquery的url

```
var url=$('#img').text(); 
```

然后将图像标签添加到它并附加：

```
var real_img='<img src="'+url+'" width="150" height="150" alt="Nba">';

$('#img').html(real_img); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T15:50:10.450

在@Engineer 的帮助下，这里是与我有同样问题的人的解决方案

HTML

```
<div id="content-url">
    Hello World<br>
 http://www.goalterest.com/  
    http://www.jquery.com/  
    http://www.google.com/  
 http://www.esotech.org/wp-content/uploads/2011/12/jquery_logo.png
    http://www.linuxtrent.it/sites/default/files/images/drupal-logo.jpg
    <div id="urls"></div>
    <div id="photos"></div>
</div> 
```

查询

```
var urlRegex = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
var photoRegex = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]).(?:jpg|gif|png)/ig;

  var url_url= $('#content-url').html().match(urlRegex);
var url_photo= $('#content-url').html().match(photoRegex);

//Added
$('#content-url').html( $('#content-url').html().replace(urlRegex,''));
//----------

$.each( url_url, function(i,value){
   var convert_url='<a href="'+url_url[i]+'">'+url_url[i]+'</a><br>';

   $('#urls').append(convert_url)
       });
    $.each( url_photo, function(i,value){

   var convert_photo='<img src="'+url_photo[i]+'" width="150" height="150" alt="Nba"><br>';
   $('#photos').append(convert_photo)
}); 
```

谢谢大家

# ruby-on-rails - 为什么我的 js+css 在 Rails + Heroku 的生产环境中没有被压缩？

> ID：10955771
> 
> 赞同：2
> 
> 时间：2012-06-08T20:40:10.220
> 
> 标签：ruby-on-rails, heroku, gzip

我正在使用以下设置运行我的生产环境，它似乎正在缩小但没有压缩/压缩响应。

```
 # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = false

  # Generate digests for assets URLs
  config.assets.digest = true 
```

这是我的js文件，标题不包含gzip或deflate？？？

```
$ curl -I http://sctest-perf.herokuapp.com/assets/application-1d21d488644b11e5610fa26bacdbc868.js
HTTP/1.1 200 OK
Age: 0
Cache-Control: public, max-age=31536000
Content-length: 213394
Content-Type: application/javascript
Date: Fri, 08 Jun 2012 20:34:58 GMT
Etag: "1d21d488644b11e5610fa26bacdbc868"
Last-Modified: Wed, 30 May 2012 16:38:32 GMT
Status: 200 OK
X-Content-Digest: 914bc6f80b0619be63c1302821ccc24a082ace53
X-Rack-Cache: miss, store
X-Request-Id: 76cb22ef23b73c440878569eec42ed4d
X-Runtime: 0.001314
X-Ua-Compatible: IE=Edge,chrome=1
Connection: keep-alive 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T20:56:37.770

您需要编辑`config.ru`位于项目根目录中的文件：

```
require ::File.expand_path('../config/environment',  __FILE__)

# Add beautifully gzipped responses
use Rack::Deflater

run YourApp::Application 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-20T15:12:29.593

您也可以尝试使用其中一种可以帮助进一步优化资产服务流程的 gem。

[https://github.com/romanbsd/heroku-deflater](https://github.com/romanbsd/heroku-deflater)

[https://github.com/mattolson/heroku_rails_deflate](https://github.com/mattolson/heroku_rails_deflate)

如果我没记错的话，使用`use Rack::Deflater`也会压缩图像，这会浪费资源并且没有用处。

# c# - 如何在本地化字符串中包含变量？

> ID：10955772
> 
> 赞同：15
> 
> 时间：2012-06-08T20:40:13.420
> 
> 标签：c#, string, localization, internationalization, globalization

我正在尝试按照以下方式向用户显示一条消息：

“无法添加用户 5”

但是如何将变量添加到放置在 .resx 文件中的字符串中？我一直在尝试搜索诸如“本地化中的变量”“带变量的全球化”等内容，但结果很枯燥。

如果我不进行本地化，我会写：

```
Console.Write("User " + userNum + " could not be added"); 
```

资源如何实现？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-08T20:41:41.160

你不能直接这样做。

您*可以*做的是放置一个标记 - 一个可以用变量值*替换的特定字符串。*`string.Replace`

一个很好的候选者是内置的字符串格式：

```
Console.Write(string.Format("User {0} could not be added", userNum)); 
```

假设`userNum`有 value `5`，结果将是：

```
User 5 could not be added 
```

您可以使用复合格式说明符本地化此字符串。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-08T20:42:54.760

在我完成国际化的团队中，我们通常还为格式字符串创建一个资源，例如 USER_COULD_NOT_BE_ADDED_FORMAT，并通过将该资源的值作为格式模式传递来调用 String.Format（或您的环境的等效项）。

然后你会做`Console.Write(String.Format(resourceManager.GetString("USER_COULD_NOT_BE_ADDED_FORMAT"), userNum));`

大多数本地化人员要么接受过他们正在本地化的系统使用的格式字符串的培训，要么在您提供给他们的本地化工具包中获得指导。因此，例如，这并不像让他们直接修改代码那样高的障碍。

一般需要在资源 ID 后面加上 loc 注释来说明位置参数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-08T20:42:24.790

像这样使用[复合格式](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)：

```
Console.Write("User {0} could not be added", userNum); 
```

这样你就可以本地化`"User {0} could not be added"`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-21T17:41:41.677

你可以做到这很简单 [![在此处输入图像描述](../Images/fd76f12e8b47dfc1f6536eab6035edbe.png)](https://i.stack.imgur.com/TJtuP.png)

新的让我们看看如何

```
String.Format(Resource_en.PhoneNumberForEmployeeAlreadyExist,letterForm.EmployeeName[i]) 
```

这每次都会给我动态信息

顺便说一句，我正在使用[ResXManager](https://visualstudiogallery.msdn.microsoft.com/3b64e04c-e8de-4b97-8358-06c73a97cc68)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-08T20:43:44.433

我会使用 string.Format

[http://msdn.microsoft.com/en-us/library/system.string.format.aspx](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)

```
Console.Write(string.Format("User {0} could not be added", userNum)); 
```

# android - 字母组合的Android KeyCodes

> ID：10955774
> 
> 赞同：0
> 
> 时间：2012-06-08T20:40:37.303
> 
> 标签：android, ime

我正在为android实现一个自定义输入法（软键盘）......它是一个手势检测键盘，所以我将捕捉用户滑动的方向和代码。这样做，我有一些字母组​​合，如“Th”和我需要int值的“Ch”。char值可以很容易地转换，但是如何获取字符组合的int值......请建议。

我需要 getCharacter(code) 来返回一个 int。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:11:13.727

只有通过连续调用`getCharacter()`.. 后退一步，看看这个方法不是实现你想要做的事情的最佳点。返回多个字符（字符串）的处理程序应`getCharacter()`在字符串中的每个字符上连续实现。如果我正确理解问题。

# sharepoint-2010 - 如何在 Visual Studio 2010 中调试自定义工作流活动

> ID：10955775
> 
> 赞同：2
> 
> 时间：2012-06-08T20:40:46.880
> 
> 标签：sharepoint-2010, sharepoint-workflow, workflow-activity

我一直在网上搜索我的问题的答案，但到目前为止我并不幸运。我创建了一个自定义工作流活动，我想在 Visual Studio 2010 中对其进行调试，但我不知道该怎么做。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:49:45.043

您必须将 Visual Studio 附加到服务器上运行的进程。

[这是关于它的MSDN文章](http://msdn.microsoft.com/en-us/library/ms455354.aspx)

有关远程调试的更多资源：

[使用适用于 Windows SharePoint Services 的 Visual Studio 扩展进行调试](http://msdn.microsoft.com/en-us/library/ff650703.aspx)

[调试 SharePoint 应用程序](http://lemonharpy.wordpress.com/2011/03/17/remote-debugging-sharepoint-2010-solutions/)

# playframework - 在 Playframework 2.0 生产中将日志记录级别设置为调试？

> ID：10955776
> 
> 赞同：14
> 
> 时间：2012-06-08T20:40:46.840
> 
> 标签：playframework, playframework-2.0

在我的`conf/application.conf`我将我的应用程序的日志记录级别设置为`DEBUG`.

```
logger.application=DEBUG 
```

这在我`sbt run`的应用程序中运行良好。但是，当我在生产模式下运行它时`sbt start`，日志级别会被覆盖为`INFO`.

在生产中运行时，有没有办法强制播放`DEBUG`用作我的日志级别？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-09T15:07:49.907

您有[两个不同的记录器](http://www.playframework.org/documentation/2.0.1/SettingsLogger)：`play`记录器和`application`记录器。以下是开发模式的 logger.xml 示例：

```
<configuration>
    <conversionRule conversionWord="coloredLevel" converterClass="play.api.Logger$ColoredLevel" />

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%coloredLevel %logger{15} - %message%n%xException{5}</pattern>
        </encoder>
    </appender>

    <logger name="play" level="INFO" />
    <logger name="application" level="DEBUG" />

    <root level="ERROR">
        <appender-ref ref="STDOUT" />
    </root>

</configuration> 
```

此处播放记录器设置为日志级别 > INFO，您的应用程序记录器（您在执行时使用的记录器`Logger.debug/warn/error`）设置为日志级别 > 调试。根级别是所有记录器的默认级别，但由于每个记录器都定义了自己的级别，因此不需要它。

您可以创建一个 prod-logger.xml 文件并使用 : 以 prod 模式启动您的应用程序`start -Dlogger.resource=conf/prod-logger.xml`。

这是我用于具有两个附加程序的生产服务器的配置，用于将 level > DEBUG 存储在一个文件中，将 level > WARN 存储在另一个文件中。还有一个 TimeBasedRollingPolicy 可以每天滚动文件。

```
<configuration>
    <appender name="FILE_DEBUG" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${application.home}/logs/debug_log.log</file>
        <encoder>
            <pattern>%date - [%level] - from %logger in %thread %n%message%n%xException%n</pattern>
        </encoder>
        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
            <level>DEBUG</level>
        </filter>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${application.home}/logs/debug_log.%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
    </appender>

    <appender name="FILE_WARN" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${application.home}/logs/warn_log.log</file>
        <encoder>
            <pattern>%date - [%level] - from %logger in %thread %n%message%n%xException%n</pattern>
        </encoder>
        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
            <level>WARN</level>
        </filter>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${application.home}/logs/warn_log.%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>60</maxHistory>
        </rollingPolicy>
    </appender>

    <logger name="play" level="INFO"/>
    <logger name="application" level="INFO" />

    <root level="WARN">
        <appender-ref ref="FILE_DEBUG"/>
        <appender-ref ref="FILE_WARN"/>
    </root>
</configuration> 
```

有关日志记录配置的更多详细信息，请查看[Logback](http://logback.qos.ch/documentation.html)

# app-store - 我可以从供应门户中删除供应配置文件吗？

> ID：10955779
> 
> 赞同：6
> 
> 时间：2012-06-08T20:41:02.943
> 
> 标签：app-store, provisioning, ios-provisioning

我能否在不影响应用商店中的应用的情况下安全地从 Apple 配置门户中删除分发配置文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T21:05:47.783

是的。您的分发证书和配置文件仅用于向 Apple 提交应用程序。一旦应用程序获得批准并进入应用程序商店，您就可以下载并解压缩它，并注意 Apple 已经（重新）使用 Apple 自己的证书重新设计了该应用程序。但是，如果您让您的 iOS 开发者注册过期，这可能会影响您的应用在 App Store 中的使用。

# c# - 朋友喜欢查询得到 500 错误

> ID：10955781
> 
> 赞同：0
> 
> 时间：2012-06-08T20:41:30.893
> 
> 标签：c#, facebook, facebook-fql

我有以下查询得到 500 错误。我认为这是因为权限，但我设置了 user_likes 和 friends_likes 权限。

```
SELECT user_id, url FROM url_like WHERE strpos(url,'myurl') AND user_id IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

这个工作正常。

```
SELECT user_id, url FROM url_like WHERE strpos(url,'myurl') AND user_id = me() 
```

任何想法为什么我不能让我的朋友喜欢某个网址？我知道这是可以做到的。我见过很多其他显示数据的网站。

我在 c# 中这样做。我的第二个查询目前已被注释掉，直到我得到第一个查询。

```
dynamic resultLikes = fb.Get("fql",
                 new
                 {
                     q = new
                     {
                         urlLikes = "SELECT user_id, url FROM url_like WHERE strpos(url,'myUrl') AND user_id IN (SELECT uid2 FROM friend WHERE uid1 = me())",
                         //resultLike = "SELECT uid, name, pic_small FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me() AND (uid2 IN (SELECT user_id FROM #urlLikes)))",
                     }
                 }); 
```

我将发布代码，希望有人知道出了什么问题。我已经尝试了两种不同的方式。

首先使用Httpwebrequest：

```
 private void GetMyLikes()
    {
        //string URL = "https://graph.facebook.com/" + userID + "/picture";

        string url = String.Format("https://api.facebook.com/method/fql.query?query=SELECT user_id, url FROM url_like WHERE user_id IN (SELECT uid2 FROM friend WHERE uid1 = me())&access_token={0}&format=json", accessToken);

        HttpWebRequest req = (System.Net.HttpWebRequest)HttpWebRequest.Create(url);
        req.AllowWriteStreamBuffering = true;
        req.Timeout = 200000;

        HttpWebResponse  resp = req.GetResponse() as HttpWebResponse;
        StreamReader reader = new StreamReader(resp.GetResponseStream());
        string likes = reader.ReadToEnd();

        resp.Close(); 

    } 
```

使用 C# SDK

```
private void getFriendsProductLikes() 
```

{

```
if (!string.IsNullOrWhiteSpace(accessToken))
    {
    FacebookClient fb = new FacebookClient(accessToken);                    

    dynamic resultLikes = fb.Get("fql", new { q = "SELECT user_id, url FROM url_like WHERE user_id IN (SELECT uid2 FROM friend WHERE uid1 = me())" });

        } 
```

}

我目前可能设置的权限比我需要的要多。

```
public const string SCOPE = "user_likes,friends_likes,user_status,friends_status,publish_actions,user_location,friends_location,user_checkins,friends_checkins,read_stream,user_activities,friends_activities,user_birthday,friends_birthday,user_about_me"; 
```

谢谢，

朗达

# ipad - 有没有办法在 iPad 中关闭水平滚动？

> ID：10955786
> 
> 赞同：0
> 
> 时间：2012-06-08T20:42:02.967
> 
> 标签：ipad, horizontal-scrolling

使用电子阅读器应用程序时，我喜欢用引导手指扫过页面阅读......每次滑动之间的水平滚动有点困难:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:48:01.867

没有。您可以尝试戴上手套阅读。当然，它不可能是让您使用您的 ipad/iphone/触摸屏设备的花哨的设备。

# solr - 努力学习 solr

> ID：10955788
> 
> 赞同：0
> 
> 时间：2012-06-08T20:42:10.630
> 
> 标签：solr

我正在重新设计我们公司的一个网站。我的老板想尝试用搜索框替换我们所有的导航。搜索框应该能够查询我们的任何不相关数据表。

所以现在我正在尝试使用 5 张桌子。

产品 制造商 类别 成分 用途

所以应该能够查找产品名称、制造商名称、类别名称、成分名称或使用名称

当我检索结果时。如果用户点击了制造商搜索结果。它会将他们带到一个制造商页面，该页面查找该制造商的所有产品。当点击产品页面时..链接会将他们带到实际的产品信息。成分会将他们带到一个页面，该页面将显示包含该成分的所有产品。

无论如何，这是我的数据配置

```
<dataConfig>
    <dataSource driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost:3306/xxx" user="xxx" password="xxx" />
    <document>
        <entity name="manufacturer" transformer="TemplateTransformer" pk="manNum"
            query="SELECT manNum, manName FROM manufacturer
                WHERE active = 1">
            <field column="id" name="id" template="MAN-${manNum}" />
            <field column="type" template="manufacturer" name="type"/>
            <field column="manName" name="text"/>       
            <field column="manNum" name="manNum"/>
        </entity>

        <entity name="product" transformer="TemplateTransformer"
            query="SELECT products.prodNum, products.prodName as text, m.manName FROM products  JOIN man m USING (manNum) 
                WHERE products.active = 1
                AND (hideWeb = 0 or hideWeb IS NULL)">
            <field column="id" template="PROD-${products.prodNum}" name="id"/>
            <field column="type" template="product" name="type"/>
            <field column="text" name="text"/>
            <field column="manName" name="manName"/>
        </entity>

        <entity name="ingredients" transformer="TemplateTransformer" pk="id"
            query="SELECT id, text FROM inglist WHERE sort != ''">
            <field column="id" name="id" template="ING-${inglist.id}"/>
            <field column="type" template="ingredient" name="type"/>
            <field column="text" name="text" />
        </entity>

        <entity name="uses" transformer="TemplateTransformer" pk="id"
            query="SELECT id, text FROM useslist">
            <field column="id" name="id" template="USE-${id}"/>
            <field column="type" template="use" name="type"/>
            <field column="text" name="text"/>
        </entity>

        <entity name="categories" transformer="TemplateTransformer" pk="id"
            query="SELECT id, textShow as text FROM categorylist">
            <field column="id" name="id" template="CATEGORY-${id}"/>
            <field column="type" template="category" name="type"/>
            <field column="text" name="text"/>
        </entity>

    </document>
</dataConfig> 
```

而我的架构..

```
<fields>
    <field name="id" type="string" indexed="true" stored="true"/>
    <field name="text"          indexed="true"  stored="true" type="text"/>
    <field name="type" type="string" indexed="false" stored="true"/>
    <field name="manName" type="text" indexed="false" stored="true"/>
    <field name="manNum" type="string" indexed="false" stored="false"/>
</fields> 
```

现在也许我没有以正确的方式做到这一点......并且可能有更好的方法来处理这个问题。

无论如何，我现在遇到的问题是我收到了缺少必填字段“id”的错误。现在产品查询和制造商查询在选择中没有 id 列。但我认为转换查询应该处理它？如果我选择 prodNum as id .. 那么所有的 id 都会互相覆盖。

现在我可能可以在实际查询中连接它..并将作为最后的手段这样做，但想知道我在这个解决方案中做错了什么。

**编辑** 没关系，这只是一个菜鸟问题，出于某种原因，我认为模板变量是指 SQL 中的表名而不是实体名，所以我替换了所有的 With

它奏效了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:48:30.407

使用不同的字符或字符串作为表特定 ID 的前缀是一个好主意。我在 SQL 中执行此操作，这允许我检查 Solr 之外的行为。

```
select 
concat('b',cast(b.id as char)) as id,
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:31:11.737

这是一个菜鸟问题，

出于某种原因，我认为模板变量是指 SQL 中的表名而不是实体名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:56:20.300

我这样做：

```
<entity name="GG-Boryslaw-1939-Phonebook" 
         transformer="TemplateTransformer,DateFormatTransformer"
         pk="id"
         query="SELECT * FROM boryslaw_1939_phonebook">
     <field column="record_id" template="GG-Boryslaw-1939-Phonebook-${GG-Boryslaw-1939-Phonebook.id}" />
     <field column="record_type" template="phonebook" />
     <field column="record_source" template="Boryslaw Phonebook (1939)" />
     <field column="record_date" template="${GG-Boryslaw-1939-Phonebook.Year}" dateTimeFormat="yyyy" />
     ...etc...
</entity> 
```

# c# - 替换的 InnerHtml 显示为字符串

> ID：10955794
> 
> 赞同：0
> 
> 时间：2012-06-08T20:42:33.377
> 
> 标签：c#, html, innerhtml, visual-web-developer

我必须在这里错过明显的东西。我在表格单元格中有一个下拉菜单，可以选择要在该单元格中显示的图像，然后下拉菜单消失。我可以通过替换包含下拉列表的内部 html 来使用下拉列表中的文本值来执行此操作。但是当我尝试用图像文件的位置替换内部 html 时，它只显示为文本。以下是相关代码：

```
string image = "&ltimg src=&quot;" + DropList1.SelectedItem.Value + "&quot; /&gt";
s1.InnerHtml = image; 
```

输出是：

```
<img src="D:\Documents and Settings\farmek2\Desktop\Trends\GreenUp.jpeg" /> 
```

我需要它不显示为文本，而是显示为图像 GreenUp.jpg。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:45:10.800

发送实际标记，而不是编码字符串。

```
string image = "<img src=\"" + DropList1.SelectedItem.Value + "\" />"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:48:46.043

这很可能是因为您将 HTML 特殊字符注入到 HTML 页面中。浏览器不会将其呈现为 HTML，而是将其转换为相应的符号。使用实际字符而不是它们的特殊字符等价物。

# ruby-on-rails - 推送 Heroku 时出现 Git 错误

> ID：10955801
> 
> 赞同：15
> 
> 时间：2012-06-08T20:43:11.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3, git, heroku

我正在使用 Heroku 并且有一个稳定的 Rails 应用程序（生产环境），所以我想创建一些新的东西，在那里我可以有质量保证环境，我可以看到更改将如何在 Heroku 上工作（以及聚合增强发布）而不总是推送到我的生产应用程序。

所以我所做的是创建一个新的 Heroku 应用程序，并在本地（开发）创建一个新分支。我打算在我的新 Heroku QA 应用程序上测试更改后，将 dev 合并到本地的 master 中，然后从我的 master 分支推送到 Heroku 生产。

我的方法可能不适合我的风景，我是新手，所以这只是我对如何做到这一点的最佳猜测。

但是当我将我的开发分支推送到我的新 QA 应用程序时，它可以推送到 QA 应用程序的开发分支，但不能推送到主应用程序。所以我无法在新的 QA 应用程序上看到（和测试）我的更改。似乎在告诉我，我只能将主分支推送到我的 QA 应用程序的主分支，因为我已经拉取并且一切都已经是最新的，但是我收到了这个错误：

```
Pushing to git@github.com:foobar/QA.git
To git@github.com:foobar/QA.git
! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@github.com:foobar/QA.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

有人可以帮我找出我做错了什么 - 无论是我的环境还是Git？谢谢你。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-08T20:48:21.823

尝试使用`-ff`（快进）选项推送：（`git push heroku master -ff`替换`heroku`为 heroku 遥控器的实际名称）。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-08T21:26:17.917

Heroku 应用程序仅在应用程序存储库的主分支（Heroku 本地）之外运行。如果你想将一个分支部署到 Heroku，它不是你本地 repo 的主分支，那么你需要指定它。在您的情况下，它类似于`git push qa-remote dev:master`（将 qa-remote 替换为您的 QA 应用程序的远程实际名称），这表示将我的本地 dev 分支推送到 qa-remote 上的主分支。

当您第一次这样推送时，您可能需要添加`-f`标志以强制推送（非快进）。`-f`随后，只要您的本地分支是最新的，您就应该能够在没有标志的情况下推送。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-15T20:00:06.743

使用以下命令强制推送更新`git push -f heroku master`

# c# - 如何在自定义控件中使用 Control.Update 方法

> ID：10955803
> 
> 赞同：0
> 
> 时间：2012-06-08T20:43:20.893
> 
> 标签：c#, custom-controls, flicker, onpaint

我将首先发布我的代码，因为它简短易懂，然后我会问我的问题。

```
public class BatteryLabel : Control
{
    private Color _captionColor = SystemColors.Control;
    private Color _textColor = SystemColors.Info;
    private Color _failColor = Color.Red;
    private Color _passColor = Color.Green;
    private string _caption;
    string text2;
    string text3;
    bool battery1Fail = false;
    bool battery2Fail = false;
    bool battery3Fail = false;

    public BatteryLabel()
    {

    }

    public Color BackgroundTextColor
    {
        get{ return _textColor;}
        set{_textColor = value; Invalidate();}
    }

    public string Caption
    {
        get
        {
            return _caption;
        }
        set
        {
            _caption = value;
            Invalidate();
        }
    }

    public override string Text
    {
        get
        {
            return base.Text;
        }
        set
        {
            base.Text = value;
            Invalidate();
        }
    }

    public string Text2
    {
        get { return text2; }
        set { text2 = value; Invalidate(); }
    }

    public string Text3
    {
        get { return text3; }
        set { text3 = value; Invalidate(); }
    }

    public bool Battery1Fail
    {
        get { return battery1Fail; }
        set { battery1Fail = value; Invalidate(); }
    }

    public bool Battery2Fail
    {
        get { return battery2Fail; }
        set { battery2Fail = value; Invalidate(); }
    }

    public bool Battery3Fail
    {
        get { return battery3Fail; }
        set { battery3Fail = value; Invalidate(); }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);

        e.Graphics.DrawRectangle(Pens.Black, 0,0, Width-1, Height-1);

        var x1 = 50;
        var x2 = 98;
        var x3 = 146;
        var color1 = battery1Fail?_failColor:BackgroundTextColor;
        var color2 = battery2Fail?_failColor:BackgroundTextColor;
        var color3 = battery3Fail?_failColor:BackgroundTextColor;

        e.Graphics.FillRectangle(new SolidBrush(color1),x1+1, 1, 47, Height-2);
        e.Graphics.FillRectangle(new SolidBrush(color2),x2+1, 1, 47, Height-2);
        e.Graphics.FillRectangle(new SolidBrush(color3),x3+1, 1, 47, Height-2);

        e.Graphics.DrawLine(Pens.Black, x1,0, x1, Height-1);
        e.Graphics.DrawLine(Pens.Black, x2,0, x2, Height-1);
        e.Graphics.DrawLine(Pens.Black, x3,0, x3, Height-1);

        var BoldFont = new Font(this.Font, FontStyle.Bold);

        e.Graphics.DrawString(Caption, BoldFont, new SolidBrush(ForeColor), 0,0);
        e.Graphics.DrawString(Text, this.Font, new SolidBrush(ForeColor), x1,0);
        e.Graphics.DrawString(Text2, this.Font, new SolidBrush(ForeColor), x2,0);
        e.Graphics.DrawString(Text3, this.Font, new SolidBrush(ForeColor), x3,0);

    }   
} 
```

控件大小应为 195,14，以防您决定尝试使用它。我在一个 200,200 的面板中有 8 个，在 1.6Ghz 原子处理器上运行。它用于在计算机上显示最多 3 节电池的值。标签每 500 毫秒刷新一次。正如您可能已经收集到的那样，有一点闪烁，但这是可以忍受的。如果可能的话，我希望更少。所以我开始研究使用更新，并移动我的一些代码，比如我想也许我应该把它移动到 OnPaintBackground() 的背景位，但是在我组成的测试框架中，更新方法并没有改变任何东西，并且当我使用 Invalidate 方法时，它同时运行 OnPaintBackground 和 OnPaint。这是我在这种情况下尝试过的。

```
public class InformationLabel : Control
{
    Random r = new Random();
    protected override void OnPaintBackground(PaintEventArgs e)
    {
        base.OnPaintBackground(e);
        Color randomCOlor = Color.FromArgb(r.Next());
        e.Graphics.FillRectangle(new SolidBrush(randomCOlor),0,0, Width-1, Height-1);
    }
    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        Color randomCOlor = Color.FromArgb(r.Next());
        e.Graphics.FillPie(new SolidBrush(randomCOlor),15,15,15,15, 0.0f, 120.0f);
    }
}

public partial class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();
    }

    void Button1Click(object sender, EventArgs e)
    {
        informationLabel1.Update();
    }

    void Button2Click(object sender, EventArgs e)
    {
        informationLabel1.Invalidate();
    }
} 
```

我将一个用户控件设置为大约 300,300，因此我可以确定我所看到的。我忘了提到在我的 500 毫秒计时器的电池控制中，我只是更新文本、文本 2 和文本 3。我在想，如果该文本的值超出规范，我将设置电池故障标志，然后无效.. 但我不确定。那么我应该如何只更新文本？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T21:04:16.503

您可以通过在构造函数中添加以下行来消除闪烁：

```
SetStyle(ControlStyles.OptimizedDoubleBuffer | ControlStyles.UserPaint | ControlStyles.Opaque | ControlStyles.AllPaintingInWmPaint, true); 
```

现在在您的绘图处理程序中绘制背景和其他所有内容。

可以通过将 Rectangle 传递给 Invalidate 来仅针对需要重新绘制的区域进行优化。然后在您的 OnPaint 覆盖中，您使用 e.ClipRectangle 来确定要绘制的内容。对于如此简单的绘图，这可能不是必需的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T21:03:50.547

我相信你在寻找错误的地方来消除闪烁。我可以使用您`BatteryLabel`的基本单行来获得无闪烁的文本更新。将您的构造函数更改为如下所示：

```
public BatteryLabel()
{
    this.SetStyle(ControlStyles.OptimizedDoubleBuffer,true);
} 
```

这告诉控件双缓冲其图形，从而使闪烁消失。

以 100 毫秒的刷新间隔进行测试：

```
Timer t;
public Form1()
{
    InitializeComponent();

    t = new Timer();
    t.Interval = 100;
    t.Tick += new EventHandler(t_Tick);
    t.Start();
}

void t_Tick(object sender, EventArgs e)
{
    string ticks = DateTime.Now.Ticks.ToString();
    string ticks1 = ticks.Substring(ticks.Length-4),
        ticks2 = ticks.Substring(ticks.Length - 5,4),
        ticks3 = ticks.Substring(ticks.Length - 6,4);

    batteryLabel1.Text = ticks1;
    batteryLabel1.Text2 = ticks2;
    batteryLabel1.Text3 = ticks3;
    batteryLabel1.Battery1Fail = ticks1.StartsWith("1");
    batteryLabel1.Battery2Fail = ticks2.StartsWith("1");
    batteryLabel1.Battery3Fail = ticks3.StartsWith("1");
} 
```

这有帮助，还是我误解了你？

# facebook - 从 Authenticated Referrals 获取访问令牌

> ID：10955807
> 
> 赞同：0
> 
> 时间：2012-06-08T20:43:35.897
> 
> 标签：facebook, facebook-access-token

从 facebook.com/connect/uiserver.php 交换访问令牌的代码与从 facebook.com/dialog/oauth 交换代码相同吗？

我的意思是，这在我的网站上工作得很好： [https ://developers.facebook.com/docs/authentication/server-side/](https://developers.facebook.com/docs/authentication/server-side/)

但是，当我尝试处理 Facebook 本身生成的身份验证对话框中的代码（来自操作的链接）时，它每次都会失败，并出现“100”错误代码。

使用“client_cred”作为“类型”我能够获得应用程序令牌，这是无用的。

“redirect_uri”完全相同。

最好的部分是简单的刷新工作！也许一些同步问题？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T03:50:15.467

很伤心，但我找到了一种方法......有点：

在尝试获取令牌（并且失败）之后，我再次点击 Facebook oauth，这次人们不会看到对话框（因为它已经被授权）并且我得到了一个很好的代码来交换一个好的令牌，因此它不会循环，因为现在我有一个 $token。

```
 if(empty($token)) {      
     $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
       . $app_id . "&redirect_uri=" . urlencode($my_url);

     echo("<script> top.location.href='" . $dialog_url . "'</script>");

        } 
```

# php - 从 Facebook 页面检索图片？

> ID：10955810
> 
> 赞同：3
> 
> 时间：2012-06-08T20:43:56.003
> 
> 标签：php, facebook-graph-api, graph, facebook-fql, fbml

我想获取 Facebook 页面成员发布的图像。我怎样才能找回它们？

**我不是在谈论用户个人资料，而是在谈论 Facebook 社区页面。**

我可以通过以下方式访问社区页面的相册：

```
https://graph.facebook.com/{PAGEID}/photos 
```

但是如何访问人们在特定页面的墙上发布的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:11:27.033

`https://graph.facebook.com/{PAGEID}/feed/`包含页面时间轴上的所有内容，包括照片

# ruby - 作者到底想让我理解什么？

> ID：10955811
> 
> 赞同：0
> 
> 时间：2012-06-08T20:44:05.727
> 
> 标签：ruby, object

> ```
> "Inches/yard: #{12*3}"
> "#{"Tora! "*3}" 
> ```
> 
> 第二个例子令人困惑，除非你记得在 Ruby 中一切都是对象（是的，甚至是字符串字面量！它们属于 String 类。）。由于字符串字面量创建了一个 String 对象，因此您可以像处理任何其他对象一样对其进行操作。在这种情况下，将一个字符串乘以 3 就如您所想：复制三个字符串。

我在一本红宝石书中阅读了上述段落。第一行说*第二个例子令人困惑，除非你记得在 Ruby 中一切都是对象*。我应该记住的第二个示例中有什么，一切都是 ruby​​ 中的对象？乘以 3 会打印3 次*tora不只是一个特性吗？*

我不完全明白作者希望我从上面的段落中理解什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:01:48.067

```
"#{"Tora! "*3}" 
```

“这不只是乘以 3 会打印 3 次 tora 的功能吗？”。

那是不准确的。Ruby 中没有乘法运算符。在String 和 Numeric 对象*上*定义了一个方法`".*"`（并且解析器以相同的方式处理“*”）（但两者都不打印任何内容）。他们做的事情非常不同，但结果是你所期望的。

好吧，也许这不是作者想让你理解的，无论如何这很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:27:06.167

好吧，是的，您可能可以将其视为一个功能，但作者可能试图解释的是（尽管至少在这一段中不是很清楚），实际发生的事情是这样的：

1.  `"Tora !"`是类的对象`String`（*“一切都是对象”*）
2.  “*你可以像任何其他对象一样对它进行操作*”，意思是：
    “你可以像任何其他对象一样调用它的任何**方法**”。
    在这种情况下，您正在调用方法`*`（乘法）。

所以实际上正在发生的事情是以这样的`"Tora !"` `String`方式调用的：

```
"Tora ! ".*(3)
=> "Tora ! Tora ! Tora ! " 
```

你看？运算符`*`只是`String`对象上的一个方法。

在许多更简单的语言中，运算符实际上是“融入”语言本身的，而不是作为方法调用对目标进行操作。

如果您不习惯其他语言，您可能不会觉得它有什么了不起的，因为在 Ruby 中，这只是普通的日常事物。您永远不需要输入`1.+(2)`，Ruby 会在您输入时自动为您完成`1 + 2`。

所以这就是作者希望你记住的——所有的操作符和操作本质上只是对其他对象的方法调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T20:48:09.870

“Tora!a”是 String 类的一个实例。您可以在其上调用方法。这在许多语言中是不可能的，例如 PHP。

（'*' 只是方法名）

# java - Visual Studio - 不中断 J# 中的 Java 异常

> ID：10955813
> 
> 赞同：2
> 
> 时间：2012-06-08T20:44:20.157
> 
> 标签：java, visual-studio-2005, j#

我正在使用 J# 开发一个从文本文件中解析大量数据的项目。Java 没有检查字符串是否为整数的好方法，所以我在 try-catch 块中使用 parseInt。

我还有其他用于文件 IO 操作等的 try-catch 块。有时我会在我希望 Visual Studio 中断的其他地方遇到 CLR 异常，即使错误已得到处理。为此，我进入“例外”菜单并选中“抛出”。但是，Java 异常显然属于 CLR，但并未在该菜单中专门列出 (ASAICT)。因此，如果我检查 Thrown for CLR，每次整数不解析时都会出错。这意味着我可能必须点击 continue 20-30 次才能通过解析到我想要查看的错误。

有什么方法可以在仍然中断 CLR 异常的同时禁用对 Java 异常的中断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:49:42.450

我没有使用过 Visual Studio，可能有一些方法可以做到这一点（-我知道你可以设置断点只发生在 Eclipse 中的特定类型的异常上）。

但是您可以完全避免检查异常，方法是使用正则表达式检查它是否为 int，然后仅使用 Integer.valueOf() 将其解析为整数（如果是）。

# jquery - jQuery Validate - 添加与 CSS 类无关的自定义规则

> ID：10955816
> 
> 赞同：0
> 
> 时间：2012-06-08T20:44:26.030
> 
> 标签：jquery, validation

使用[jQuery Validation 插件](http://docs.jquery.com/Plugins/Validation/Validator)，是否可以在不关联规则或向所有元素添加 css 类的情况下对多个元素进行自定义验证？

就我而言，我需要验证在某个 html 元素中至少有一个输入不是空白的。

我有这个方法：

```
function omniSearchValidate() {
    var isValid = false;

    //make sure at least one textbox is filled in
    $('#OmniSearchIndex input[type = "text"]').each(function () {
        if ($.trim($(this).val()) !== '') {
            isValid = true;
        }
    });

    return isValid;
) 
```

如何告诉 jQuery Validation 在验证中使用此方法？它不是这样工作的吗？我是否必须将验证与特定元素相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:22:17.350

从文档

```
 $("#myform").validate({
 submitHandler: function(form) {
   form.submit();
 }
}); 
```

所以

```
$("#myform").validate({
     submitHandler: function(form) {
       omniSearchValidate(); //declared function
       form.submit(); //can be in function success condition
     }
    }); 
```

# jquery - jquery popup submit 应该使用 struts2 操作调用刷新父窗口

> ID：10955817
> 
> 赞同：0
> 
> 时间：2012-06-08T20:44:32.177
> 
> 标签：jquery, ajax, struts2, load

我有一个带有模式窗口的 struts2 页面，该页面包含在页面中。单击按钮弹出窗口将打开，输入值并单击提交后，弹出窗口将关闭并刷新父页面。

我的 Jsp：弹出窗口和父级都在同一个 jsp 中。

```
Main page
<form id="Parent">
<div id=container>
<table>
</table>
</div>
<input type="button" onclick="openPopup()">
</form>

<form id=popup>
   <input type="text" id="comments">
   <input type="button" id="popupBtn">
</form> 
```

js文件

```
$.post("updateDB",{comments:comments}, function(){
    $('#popup').dialog('close');
    $('#container').load("refreshParent #container");
}); 
```

更新数据库和弹出关闭正在工作，但 .load 无法正常工作，有人可以帮助我我在哪里做错了。

两件事一是未调用 refreshParent 操作，如果调用了它，我还需要刷新父表单，如何引用另一个表单的 DIV id。

**更新：**我忘了提到有几行复选框需要点击弹出提交时的提交值。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:15:06.260

下面的代码适用于您在新窗口中打开弹出窗口的情况。

```
$.post("updateDB",{comments:comments}, function(){
window.opener.location.reload();
window.close();
}); 
```

所以你可以在你的情况下尝试类似的东西

```
$.post("updateDB",{comments:comments}, function(){
$('#popup').dialog('close');
window.location.reload();
}); 
```

# python - product() 在 python 中做了什么？

> ID：10955824
> 
> 赞同：-7
> 
> 时间：2012-06-08T20:44:58.940
> 
> 标签：python

产品在 python 中做了什么？怎么能被替换？它的能力是什么。标志有什么作用`*`？如何在不收到生成器警告消息的情况下对其进行测试

```
<itertools.product object at 0x0159BD00> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T20:46:23.430

它计算任意数量的可迭代对象的[笛卡尔积。](http://en.wikipedia.org/wiki/Cartesian_product)[来源](http://docs.python.org/library/itertools.html#itertools.product)

因此，如果您有两个类似`[1,2]`and的列表`[3,4]`，则笛卡尔积是`(1,3),(1,4),(2,3),(2,4)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T20:47:07.403

尝试迭代它：

```
for p in itertools.product((1,2,3), (4,5,6)):
    print p 
```

产生：

```
(1, 4)
(1, 5)
(1, 6)
(2, 4)
(2, 5)
(2, 6)
(3, 4)
(3, 5)
(3, 6) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T20:46:53.267

你检查过 Python [itertools.product 文档](http://docs.python.org/library/itertools.html#itertools.product)吗？它计算笛卡尔积：

> itertools.product(*iterables[, repeat]) 输入迭代的笛卡尔积。
> 
> 等效于生成器表达式中的嵌套 for 循环。例如，product(A, B) 返回与 ((x,y) for x in A for y in B) 相同的结果。

您对此有什么具体问题吗？

# android - RingtoneManager 光标未返回选定的铃声详细信息

> ID：10955833
> 
> 赞同：1
> 
> 时间：2012-06-08T20:45:37.483
> 
> 标签：android

我有一个`DialogFragment`弹出自定义铃声选择器。`Ringtone`但是，在选择一个并单击“确定”后，它不会正确。知道下面有什么问题吗？

对话框由此创建

```
 @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        rm = new RingtoneManager(getActivity());
        ringtones = rm.getCursor();

        int selected = -1;

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(R.string.ringtone);
        builder.setSingleChoiceItems(ringtones,
                selected,
                ringtones.getColumnName(RingtoneManager.TITLE_COLUMN_INDEX),
                mChoiceListener);
        builder.setPositiveButton("OK", this);
        builder.setNegativeButton("Cancel", this);
        return builder.create();

    }

    private DialogInterface.OnClickListener mChoiceListener =
        new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int position) {
                ringtones.moveToPosition(position);
            }

    }; 
```

当 OK 按钮被选中时，它被捕获

```
public void onClick(DialogInterface dialog, int which) {
        Log.d("DayPickerFragment", "onClick");
        switch(which) {
            case Dialog.BUTTON_NEGATIVE:
                dialog.cancel();
                break;

            case Dialog.BUTTON_POSITIVE:
                Uri uri = rm.getRingtoneUri(ringtones.getPosition());
                Ringtone r = RingtoneManager.getRingtone(getActivity(), uri);

                /*** etc ***/

                /*** returned ringtone doesn't match what was selected ***/
                dialog.dismiss();
                break;
        }
    } 
```

是不是*铃声*光标`rm.getRingtoneUri(position)`对应的方法不对？如果是这样，您如何获得所选项目的真实性？*`Uri`*

 *任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T02:10:03.777

不知道为什么它不起作用。我猜我不了解该`Cursor`对象的某些内容。

然而，这就是最终的结果，使用私有变量来移动它

```
 @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        rm = new RingtoneManager(getActivity());
        ringtones = rm.getCursor();

        int selected = -1;

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(R.string.ringtone);
        builder.setSingleChoiceItems(ringtones,
                selected,
                ringtones.getColumnName(RingtoneManager.TITLE_COLUMN_INDEX),
                this);
        builder.setPositiveButton("OK", this);
        builder.setNegativeButton("Cancel", this);
        return builder.create();
    }

public void onClick(DialogInterface dialog, int position) {
        switch(position) {
            case Dialog.BUTTON_NEGATIVE:
                mp.reset();
                mp.release();
                dialog.cancel();
                break;

            case Dialog.BUTTON_POSITIVE:
                mp.reset();
                mp.release();

                Uri uri2 = rm.getRingtoneUri(mPosition);
                Ringtone r = RingtoneManager.getRingtone(getActivity(), uri2);
                /*** Use ringtone as needed ***/
                dialog.dismiss();
                break;

            default: // dialog click
                ringtones.moveToPosition(position);
                mPosition = position;

                Uri uri = rm.getRingtoneUri(mPosition);
                mp.reset();
                try {
                    mp.setDataSource(getActivity(), uri);
                    mp.prepare();
                    mp.start();
                } catch (Exception e) {
                    e.printStackTrace();
                }
                break;
        }
    } 
```

我正在做一些额外的事情，比如传入一个铃声并将其设置为已选择（如果找到），但这是基本思想。*

# android - 将数据从配置活动发送到 AppWidget

> ID：10955834
> 
> 赞同：2
> 
> 时间：2012-06-08T20:45:44.980
> 
> 标签：android, android-appwidget

我有这个小部件的小部件和配置活动。问题是如何将数据从配置活动发送到小部件？我已经尝试使用带有 putExtra() 的意图，但是如何在小部件中捕获意图？有没有图案？

这就是我现在所拥有的：

```
@Override
public void onClick(View v){
bd = new DateTime(  
datePick.getYear(), 
datePick.getMonth()+1, 
datePick.getDayOfMonth(),  
timePick.getCurrentHour(),  
timePick.getCurrentMinute());

//this is first variant             
Intent sendDateIntent = new Intent(context, WidgetActivity.class);
sendDateIntent.putExtra("birthDate", bd.getMillis());

//this is second variant
Intent resultValue = new Intent();
resultValue.putExtra("birthDate", bd.getMillis());
setResult(RESULT_OK, resultValue);
finish();
}
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-08T20:59:48.177

这是[开发人员文档](http://developer.android.com/guide/topics/appwidgets/index.html)的链接。

`另外，你可以实现一个App Widget配置Activity。这是一个可选的 Activity，当用户添加您的 App Widget 时启动，并允许他或她在创建时修改 App Widget 设置。

以下部分描述了如何设置这些组件中的每一个。`

您需要的一切都在这里详细[说明](http://developer.android.com/guide/topics/appwidgets/index.html#UpdatingFromTheConfiguration)。（请注意单击此链接以逐步完成您想要的操作。我是否需要将文档复制到该网站才能被接受？

# java - 使用小程序中的打印对话框使浏览器窗口无响应

> ID：10955835
> 
> 赞同：1
> 
> 时间：2012-06-08T20:45:56.247
> 
> 标签：java, internet-explorer, printing, applet

我有一个使用了 10 年的小程序，它把自己包裹在 Crystal Reports Viewer 小程序周围，以便处理一些自定义功能。它运行良好，按设计显示和打印报告。Web 应用程序提供数据选择，然后生成 HTML 以通过 AJAX 调用以正确的参数调用小程序。

我有*一位*用户（到目前为止）遇到以下问题：在生成小程序并查看报告后，她打印了报告。一旦打印对话框出现，即使它被取消，以下事情也不再起作用：

*   应该清除生成的小程序 HTML的*关闭*链接不再起作用；
*   指向其他页面的导航链接不再起作用：当鼠标悬停在它们上方时它们会适当变暗，但浏览器不会响应点击它们；
*   窗户不能关闭，是否
    *   通过单击右上角的**X**，
    *   通过单击系统菜单并选择*Close*，
    *   通过右键单击任务栏中的条目并选择*Close*，或
    *   通过尝试调用文件/退出菜单项（我相信文件菜单被禁用）；
*   单击窗口标题栏不再使其显示为活动状态。

为了关闭窗口，必须启动*任务管理器*并结束 iexplore 进程。

这可能是小程序保持焦点的另一个场合，它不应该：类似的错误，例如

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4838000](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4838000)

被报告为被折叠成一个我在 Java 错误库中找不到的错误：

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4918282](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4918282)

也有关于隐形小程序保持焦点的报告：可能是自定义小程序以某种方式调用原始 Crystal Reports 小程序，但我自己没有开发此代码，只是驱动它的包装器。

我不相信我会出现某种对话框出现在 IE 窗口后面的情况。我应该认为这会发生在不止一个系统上，这似乎是该用户独有的，但该系统看起来像我们的库存图像之一。

也有打印锁定 IE 窗口直到打印完成的报告，解决方法是将打印放到另一个线程中。在我的情况下，没有必要实际打印：调用*打印*对话框然后取消它就足以导致错误行为。

我想了解这里发生了什么，如果可能的话，让这个用户运行起来。我会很感激任何关于类似经历的报告，或者我迄今为止错过的看方向。

一些版本说明：

*   **赢 XP 专业版：** 5.1.2700 SP 2 构建 2600
*   **即：** 7.0.5730.13
*   **Java JRE：** 1.6.0_31-b05
*   **打印机：** Imagistics 2500 USB 打印机（有机会）

# php - 如何更改 phpmyAdmin 的配置设置？

> ID：10955837
> 
> 赞同：0
> 
> 时间：2012-06-08T20:46:01.003
> 
> 标签：php, mysql

.....我想更改密码和其他参数。我正在使用lampp堆栈。在 mysql 终端中，我知道我可以这样做：

```
 update user set password=PASSWORD("......."), file_priv='Y' where user='root';
    INSERT INTO user (host, user, password, select_priv, max_connections, max_user_connections) 
VALUES ('localhost','webuser',PASSWORD('ohhai'),'Y',1000,1000); 
```

如何使用 phpMyAdmin 执行此操作。

还假设我的数据在文本文件中，并且我有一个 .sql 文件来恢复表，我将如何使用 phpMyAdmin 执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:50:37.330

好吧，您可以在 phpmyadmin 中编辑帐户。但您也可以导入 sql 文件或只在 phpmyadmin 控制面板中运行 sql。

登录后，用 root 说。要么上传文件，要么直接在`sql`选项卡中运行 sql。编辑用户也很容易，点击`privileges`

# c++ - 生成随机但不重复的数字 (C++)

> ID：10955840
> 
> 赞同：2
> 
> 时间：2012-06-08T20:46:19.817
> 
> 标签：c++, random

我想从`0...n`.

> 例如：[9,2,5,7,4,6​​,1,3,8,0]

我当前的方法是在 while 循环中生成随机数，直到`std::set`计数为`n`. 显然，这需要相当长的时间才能完成大型集。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:49:54.347

您可以将顺序值放在 STL 集合中，然后使用[random_shuffle](http://www.cplusplus.com/reference/algorithm/random_shuffle/)对它们进行适当的洗牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:03:15.537

随机播放并迭代您的数字列表。

```
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

int main() {
    vector<int> v;

    for(int i=0;i<10;i++)
        v.push_back(i);

    random_shuffle(v.begin(), v.end());

    for(vector<int>::iterator itr=v.begin(); itr != v.end(); ++itr)
        cout << *itr << endl;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T21:27:53.247

生成序列和改组可能是您想要的，但它不一定与生成随机数和丢弃之前发生的随机数相同。例如，如果您想要 10 个介于 1 到 200 万之间的唯一随机数，您显然不会通过仅生成

```
1,000,000
1,000,001
1,000,002
1,000,003
1,000,004
1,000,005
1,000,006
1,000,007
1,000,008
1,000,009 
```

并洗牌。

您可以改为从所需范围生成随机数，直到获得所需的数字，然后对结果进行排序和唯一化，然后生成足够的额外随机数来弥补唯一性消除的任何内容（确保新数字在您使用时是唯一的）。如果生成的数字的范围没有比您想要的值的数量大得多，那么您可能只是生成一些额外的值开始。在任何情况下，一旦您拥有所需数量的唯一值，最后一步就是将它们打乱，使它们不按排序顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-20T11:38:08.943

试试。

```
#include <iostream>
#include <algorithm>
using namespace std;
void main()
{

    int *tab;
    int nr;
    srand(time(0));

    cout << "How many numbers do you want to generate?:  ";
    cin >> nr;

    tab = new int[nr]; //Dynamic memory allocation

    for (int i = 0;i < nr;i++)
        tab[i] = i+1;
    random_shuffle(&tab[0], &tab[nr]); //Shuffle the numbers from tab;

    cout << "\t\tMixed numbers are: " << endl;
    for (int i = 0;i < nr;i++)
        cout << "Number [" << i + 1 << "]: " << tab[i]<<endl;

    delete [] tab;
    cin.get(); 
```

# c# - 正则表达式用于行首 - 或 - 句子中的最后一个数字

> ID：10955845
> 
> 赞同：1
> 
> 时间：2012-06-08T20:46:49.240
> 
> 标签：c#, regex, string-search

```
new Regex(@"^[a-zA-Z]+\b +\b[a-zA-Z]?\b +\b[a-zA-Z]+$") 
```

这匹配

`John Smith` `John B Goode`

我正在尝试针对以下情况修改此正则表达式：

之前的一些文字`12359 (John B? Goode) 10249?`

有时，名称出现在字符串末尾的数字之后，并且可选地位于末尾的最终数字之前。

我试过了

```
new Regex(@"^|[0-9]+([a-zA-Z]+\b +\b[a-zA-Z]?\b +\b[a-zA-Z]+) *[0-9]*?$") 
```

但这不起作用，因为

1.  唯一`^|[0-9]+`匹配数字不再是行首
2.  该组始终是一个空字符串，匹配类似的内容`sometext 12354`（第一个数字不需要位于行尾。

**更新**

这都是桥下的水，因为我在数据行的末尾发现了更多的名字，所以这不起作用。

但是，我的问题的解决方案不是将 OR 放在一个组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:48:12.907

您需要在交替周围加上括号：

```
(^|[0-9]+) 
```

你的表达相当于这样：

```
new Regex(@"^|()") 
```

它始终与字符串的开头匹配，仅此而已。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T21:52:50.710

*编辑（重新艾伦摩尔的信息）*

再试一次。问题陈述不清楚您是要进行*完整*验证还是只是尝试提取名称，仅验证周围的提取。

如果尝试 %100 验证提取，那么您*应该*关注 BOL。
否则，您只需要担心 EOL。

对于 %100 验证：

```
(?:^|[0-9]+\ +)([a-zA-Z]+\ +(?:[a-zA-Z]\ +)?[a-zA-Z]+)(?:\ +[0-9]+)?$ 
```

扩展：

```
(?:  ^              # BOL
   | [0-9]+ \ +     # or, leading numbers + space
)
(                      # Capt 1
   [a-zA-Z]+               # first name
   \ +                     # space
   (?: [a-zA-Z] \ + )?     # optional middle initial + space
   [a-zA-Z]+               # last name
)                      # End Capt 1
(?: \ + [0-9]+ )?      # optional space + trailing numbers
$                   # EOL 
```

或者，如果你只是想提取文本，只需要 EOL 锚点，可以放松一些限制：

```
\b([a-zA-Z](?:\s+[a-zA-Z.]+)*)[\s\d]*$ 
```

# ruby - 使用 Sinatra 创建高效的对象？

> ID：10955846
> 
> 赞同：1
> 
> 时间：2012-06-08T20:46:51.970
> 
> 标签：ruby, sinatra, jruby

首先，我是 Ruby 和 Sinatra 菜鸟，所以要温柔。

我正在开发一个使用 JRuby 和 Sinatra 部署在 Tomcat 上的应用程序。到目前为止，它似乎进展顺利。但是，我正在为最终部署的应用程序中的资源和潜在时间浪费而苦苦挣扎。对于特定路由的每个请求，我都会创建一个连接到 sqlite3 数据库的对象，查询数据库然后关闭连接。我觉得创建单个对象并在路由之间共享它会更有效。我想共享的对象是 AppData 对象，这样当用户深入查看日志或错误的初始列表时，我可以使用相同的对象来查询详细视图。

```
post "/log" do
@date = "#{params[:date].slice!(6..9)}#{params[:date].slice!(0..1)}#{params[:date].slice!(1..2)}"
app_data = AppData.new
if params[:log_type] == 'E'
  @log_type = 'errors'
  @data = app_data.get_errors :date => @date 
  app_data.close
  erb :log
else
  @log_type = 'warnings'
  @data = app_data.get_warnings :date => @date
  app_data.close
  erb :log
end
end

#detail view
get "/log/:log_type/:date/:item" do
app_data = AppData.new
if params[:log_type] == 'errors'
  @log_type = 'errors'
  @data = app_data.get_error_orders_for_item :date => params[:date], :item => params[:item]
else
  @log_type = 'warnings'
  @data = app_data.get_warning_orders_for_item :date => params[:date], :item => params[:item]
end
  app_data.close
  erb :log_details
end 
```

# jquery - Micropost 字符倒计时（Rails 教程，第 2 版，第 10 章，练习 7）

> ID：10955850
> 
> 赞同：3
> 
> 时间：2012-06-08T20:47:21.923
> 
> 标签：jquery, ruby-on-rails-3, internationalization, coffeescript, railstutorial.org

我在 Rails 教程（第 10 章，练习 7）中尝试了 micropost 字符倒计时，使用[此处](http://jsbin.com/ugami/edit)的信息作为基础，并在[此处](https://stackoverflow.com/a/2136709/567863)和[此处](https://stackoverflow.com/a/9587008/567863)的 StackOverflow 答案的帮助下。

屏幕上是[这样](http://grab.by/e3S4)的，随着接近字数限制，文字逐渐变红，一旦微博超限，发帖按钮失效，就[这样](http://grab.by/e58G)结束了。

当前的实现如下所示：

**意见/共享/_micropost_form.html.haml**

```
= form_for @micropost do |f|
  = render 'shared/error_messages', object: f.object
  .field= f.text_area :content, placeholder: t('.compose_micropost')
  %span
    .remaining= t('.characters_remaining').html_safe
    .countdown
  = f.submit t('.post'), class: "btn btn-large btn-primary" 
```

**资产/javascripts/microposts.js.coffee**

```
updateCountdownAttributes = (toRemove, toAdd = null) ->
  for attr in toRemove
    $(".remaining, .countdown").removeClass attr
  if toAdd
    $(".remaining, .countdown").addClass toAdd
    if toAdd is "overlimit"
      $("input.btn.btn-large.btn-primary").attr("disabled", "true")
    else
      $("input.btn.btn-large.btn-primary").removeAttr("disabled")

updateCountdown = ->
  remaining = 140 - $("#micropost_content").val().length
  toRemove = ["nearlimit", "almostlimit", "overlimit"]
  if remaining > 19
    updateCountdownAttributes(toRemove)
  if remaining < 20
    toAdd = (toRemove.filter (attr) -> attr is "nearlimit").toString()
    updateCountdownAttributes(toRemove, toAdd)
  if remaining < 11
    toAdd = (toRemove.filter (attr) -> attr is "almostlimit").toString()
    updateCountdownAttributes(toRemove, toAdd)
  if remaining < 0
    toAdd = (toRemove.filter (attr) -> attr is "overlimit").toString()
    updateCountdownAttributes(toRemove, toAdd)
  $(".countdown").text remaining

$(document).ready ->
  $(".countdown").text 140
  $("#micropost_content").change updateCountdown
  $("#micropost_content").keyup updateCountdown
  $("#micropost_content").keydown updateCountdown
  $("#micropost_content").keypress updateCountdown 
```

**资产/样式表/custom.css.scss**

```
...
/* Micropost character countdown */

.remaining, .countdown {
  display: inline;
  color: $grayLight;
  float: right;
}

.overlimit {
  color: $red;
}

.almostlimit {
  color: hsl(360, 57%, 21%);
}

.nearlimit {
  color: $gray;
} 
```

**配置/语言环境/en.yml**

```
en:
  ...
  shared:
    ...
    micropost_form:
      compose_micropost: "Compose new micropost..."
      post: "Post"
      characters_remaining: "&nbsp;characters remaining." 
```

* * *

从这里，我有两个问题/问题：

第一个是，如果可能的话，我希望能够对“剩余字符”字符串进行适当的复数。也许是这样的：

**意见/共享/_micropost_form.html.haml**

```
...
%span
  .remaining= t('.characters_remaining', count: [[.countdown value]]).html_safe
  .countdown
... 
```

**配置/语言环境/en.yml**

```
...
micropost_form:
  ...
  characters_remaining: 
    one: "&nbsp;character remaining."
    other: "&nbsp;characters remaining." 
```

但是，我不知道如何以`.countdown`可以将其传递给`count`参数的方式检索 div 中的值。我怎样才能做到这一点？

假设第一个问题可以解决，我也想去掉负数字符，而是将“-2 个字符剩余”更改为“2 个字符以上”。也许在视图中使用某种分支逻辑和一些 javascript 将负数更改为正数......？我不太确定这里，所以任何帮助将不胜感激。

**意见/共享/_micropost_form.html.haml**

```
...
%span
  - [[ if .countdown value < 0 ]]
    .remaining= t('.characters_over', 
                  count: [[positive .countdown value]]).html_safe
  - [[ else ]]
    .remaining= t('.characters_remaining', count: [[.countdown value]]).html_safe
  .countdown
... 
```

**配置/语言环境/en.yml**

```
...
micropost_form:
  ...
  characters_remaining: 
    one: "&nbsp;character remaining."
    other: "&nbsp;characters remaining."
  characters_over: 
    one: "&nbsp;character over."
    other: "&nbsp;characters over." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:17:18.030

我也在阅读本教程并找到了这篇文章，虽然我喜欢你添加的 CSS 以使其看起来统一（我已将其用作我自己的 :)）我认为你的解决方案过于复杂。对我来说，这只是两个变化：js 脚本和将脚本添加到我的视图中。

我的 JS 文件：character_countdown.js

```
function updateCountdown() {
  // 140 characters max
  var left = 140 - jQuery('.micropost_text_area').val().length;
  if(left == 1) {
    var charactersLeft = ' character left.'
  }
  else if(left < 0){
    var charactersLeft = ' characters too many.'
  }
  else{
    var charactersLeft = ' characters left.'
  }
  jQuery('.countdown').text(Math.abs(left) + charactersLeft);
}

jQuery(document).ready(function($) {
  updateCountdown();
  $('.micropost_text_area').change(updateCountdown);
  $('.micropost_text_area').keyup(updateCountdown);
}); 
```

这是我将它添加到视图中的地方

```
<script src="app/assets/javascripts/character_countdown.js"></script>
<%= form_for(@micropost) do |f| %>
  <%= render 'shared/error_messages', object: f.object %> 
```

请让我知道你在想什么 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:25:36.023

我已经找到了我认为非常好的两个问题（复数化和消除所有语言环境中的负数）的解决方案，所以我将在这里详细解释它，希望有人会发现它有用。

如果您想在深入研究细节之前先看看它是什么样子，您可以[在 Heroku 的示例应用程序部署中](https://pf-sampleapp.herokuapp.com/)亲自尝试一下。

### 配置

该解决方案使用[i18n-js](https://github.com/fnando/i18n-js/) gem，它是“一个在 Javascript 上提供 Rails I18n 翻译的小型库”。这颗宝石很棒，但不幸的是，它并没有像我希望的那样与 Heroku 配合得很好，而且[在可预见的未来似乎也不会](https://github.com/fnando/i18n-js/issues/81)。因此，需要更改以下配置：

**配置/应用程序.rb**

```
# ...
config.assets.initialize_on_precompile = true 
```

这意味着在每次部署到 Heroku 之前，`rake assets:precompile`都需要运行，一旦您确认部署成功，运行`rake assets:clean`以再次开始开发资产。如果这太烦人了，您将需要另一种解决方案。

> **更新**：
> 
> 如果您`user-env-compile`在 Heroku 环境中启用，您可以让 Heroku 预编译您的资产并仍然使用 i18n-js gem。有关如何执行此操作的说明在[这里](https://devcenter.heroku.com/articles/labs-user-env-compile)，我认为只要 Heroku 支持该功能就值得这样做。

### 解决方案

**宝石文件**

```
# ...
gem 'i18n-js', '2.1.2' 
```

**应用程序/资产/javascripts/application.js**

```
// ...
//= require i18n
//= require i18n/translations 
```

由于上面的 Heroku 设置，此时我需要运行

```
$ rake i18n:js:setup 
```

将 i18n-js.yml 复制到**配置**文件夹。

**应用程序/视图/布局/application.html.haml**

```
%html
  %head
    # ...
    = render 'layouts/i18n_js' 
```

**应用程序/视图/布局/_i18n_js.html.haml**

```
:javascript
  I18n.defaultLocale = "#{I18n.default_locale}";
  I18n.locale = "#{I18n.locale}"; 
```

**app/views/shared/_micropost_form.html.haml**

```
# ...
.field= f.text_area :content, placeholder: t('.compose_micropost')
%span.countdown
= f.submit t('.post'), class: "btn btn-large btn-primary" 
```

**应用程序/资产/样式表/custom.css.scss**

```
/* Micropost character countdown */

.countdown {
  display: inline;
  color: $grayLight;
  float: right;
}
// ... 
```

**app/assets/javascripts/microposts.js.coffee**
（我对 javascript/coffeescript 不太擅长，所以这里可能有改进/重构的空间）

```
updateCountdownString = (remaining) ->
  if remaining > 1 or remaining is 0
  $(".countdown").text I18n.t('shared.micropost_form.characters_remaining.other',
                              count: remaining)
  else if remaining is 1
    $(".countdown").text I18n.t('shared.micropost_form.characters_remaining.one',
                                count: remaining)
  else if remaining is -1
    $(".countdown").text I18n.t('shared.micropost_form.characters_over.one',
                                count: -remaining)
  else
    $(".countdown").text I18n.t('shared.micropost_form.characters_over.other',
                                count: -remaining)

takeFromCollection = (collection, className) ->
  (collection.filter (attr) -> attr is className).toString()

updateCountdownAttributes = (remaining) ->
  toRemove = ["nearlimit", "almostlimit", "overlimit"]
  if remaining < 20
    toAdd = takeFromCollection(toRemove, "nearlimit")
  if remaining < 11
    toAdd = takeFromCollection(toRemove, "almostlimit")
  if remaining < 0
    toAdd = takeFromCollection(toRemove, "overlimit")

  if toAdd isnt null
    for attr in toRemove
      $(".countdown").removeClass attr
    $(".countdown").addClass toAdd
  if toAdd is "overlimit"
    $("input.btn.btn-large.btn-primary").attr("disabled", "true")
  else
    $("input.btn.btn-large.btn-primary").removeAttr("disabled")

updateCountdown = ->
  remaining = 140 - $("#micropost_content").val().length
  updateCountdownString(remaining)
  updateCountdownAttributes(remaining)

$(document).ready ->
  $(".countdown").text I18n.t('shared.micropost_form.characters_remaining.other',
                              count: 140)
  $("#micropost_content").on("change keyup keydown keypress paste drop",
                             updateCountdown) 
```

**config/locales/en.yml**（其他语言环境具有相同样式的相同键）

```
shared:
  # ...
  micropost_form:
    characters_remaining:
      one: "%{count} character remaining."
      other: "%{count} characters remaining."
    characters_over:
      one: "%{count} character over limit."
      other: "%{count} characters over limit." 
```

# sharepoint - CAML 查询肥皂 SharePoint

> ID：10955862
> 
> 赞同：0
> 
> 时间：2012-06-08T20:48:31.453
> 
> 标签：sharepoint, soap

我正在尝试访问 SharePoint 列表并返回我制作的自定义 Web 部件的日历日期。它工作正常，然后我决定只检索选定的日期而不是整个日历，所以我想添加一个 where 子句。

我已尝试将 'yyyy-MM-dd'、'yyyy-MM-ddThh:mm:ssZ' 和 'yyyy-MM-dd hh:mm:ssZ' 作为字符串格式 我也尝试过 MM/dd/yyyy作为日期格式。

我正在使用 jQuery，并且日历中确实有列表项。我假设我的日期格式不正确。

```
 var date = $(this).attr('date');            

        var sharepointDate = Date.parse(date).toString('yyyy-mm-ddT00:00:01Z');
        var soapEnv =
            "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'> \
            <soapenv:Body> \
            <GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'> \
            <listName>CorporateCalendar</listName> \
            <viewFields> \
            <ViewFields> \
            <FieldRef Name='Title' /> \
            </ViewFields> \
            </viewFields> \
            <query><Query><Where><Geq><FieldRef Name='EventDate' /><Value Type='DateTime'>" + sharepointDate + "</Value></Geq></Where></Query></query> \
            <rowLimit>500</rowLimit> \
            </GetListItems> \
            </soapenv:Body> \
            </soapenv:Envelope>"; 
```

如果我去掉 where 子句，我会收到日历中的所有项目。如果查询在那里，我不会收到任何结果。

提前致谢

工作代码：

```
 var sharepointDate = Date.parse(date).toString('yyyy-MM-dd');
        var soapEnv =
            "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'> \
            <soapenv:Body> \
            <GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'> \
            <listName>CorporateCalendar</listName> \
            <viewFields> \
            <ViewFields> \
            <FieldRef Name='Title' /> \
            </ViewFields> \
            </viewFields> \
            <query><Query><Where><Eq><FieldRef Name='EventDate' /><Value Type='DateTime' IncludeTimeValue='False'>" + sharepointDate + "</Value></Eq></Where></Query></query>\
            <rowLimit>1500</rowLimit> \
            </GetListItems> \
            </soapenv:Body> \
            </soapenv:Envelope>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:11:33.383

```
 var sharepointDate = Date.parse(date).toString('yyyy-MM-dd');
        var soapEnv =
            "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'> \
            <soapenv:Body> \
            <GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'> \
            <listName>CorporateCalendar</listName> \
            <viewFields> \
            <ViewFields> \
            <FieldRef Name='Title' /> \
            </ViewFields> \
            </viewFields> \
            <query><Query><Where><Eq><FieldRef Name='EventDate' /><Value Type='DateTime' IncludeTimeValue='False'>" + sharepointDate + "</Value></Eq></Where></Query></query>\
            <rowLimit>1500</rowLimit> \
            </GetListItems> \
            </soapenv:Body> \
            </soapenv:Envelope>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T10:12:40.153

问题不在于您的 CAML 查询，而在于解析日期。不幸的是，JavaScript 中的 Date.toString 方法不像 C# 那样支持格式化。toString 方法不接受任何参数，因此您必须自己将其解析为有效的 ISO 格式。

我从问题[How do I output an ISO-8601 formatted string in Javascript? 中获取了 ISODateString 方法？](https://stackoverflow.com/a/2579363/53104). 我们可以使用此方法获取 sharepointDate 的有效值，代码应如下所示：

```
function ISODateString(d){
 function pad(n){return n<10 ? '0'+n : n}
 return d.getUTCFullYear()+'-'
      + pad(d.getUTCMonth()+1)+'-'
      + pad(d.getUTCDate())+'T'
      + pad(d.getUTCHours())+':'
      + pad(d.getUTCMinutes())+':'
      + pad(d.getUTCSeconds())+'Z'}
var sharepointDate = ISODateString(new Date(Date.parse(date))); 
```

现在 sharepointDate 将采用 'yyyy-mm-ddT00:00:01Z' 格式。由于这是 CAML 查询中预期的格式，您现在可以获取按日期过滤的项目。

# ruby-on-rails - 下一个是 Grape 和 Mongo、Rails 和 MySQL？

> ID：10955864
> 
> 赞同：1
> 
> 时间：2012-06-08T20:48:51.763
> 
> 标签：ruby-on-rails, mongodb, architecture

目前，我每天都会进行一次网络抓取，它使用[node.io](http://node.io/)并将结果放入 Mongo 数据库。我在一些集合上运行 map/reduce，Mongo 似乎很好地完成了我需要的事情。

我有一个使用[Grape](https://github.com/intridea/grape)的 REST API 的开始，它似乎工作得很好。

下一步是推动应用程序面向客户端的一面......

我已经开始设置 Rails 并且打算使用 MySQL 来处理关系数据。然而，这是最好的主意吗？或者，在应用程序的其余部分继续使用 Mongo 并依靠客户端 JS（[Backbone](http://backbonejs.org/) / [Ember](http://emberjs.com/)）来处理视图更新等会更好吗？我想使用最好的工具来完成这项工作，但也希望尽可能保持清洁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T00:21:51.043

这在很大程度上取决于您的应用程序的细节，我认为我们不可能以目前的形式客观地回答。

但是，我个人的主观意见将坚持使用 Mongo：

1.  只需维护一个 DBMS，您的烦恼就会少得多
2.  Mongo 本质上不如 RDBMS 令人头疼（在我看来）
3.  Mongo 和 Rails 与 Mongoid/MongoMapper 的集成非常好

不确定“依靠客户端 JS 来处理视图更新等”是什么意思？- 你能详细说明吗？

# windows-8 - 在 WinRT XAML 中，如何在外部/单独的程序集/项目中引用图像？

> ID：10955865
> 
> 赞同：9
> 
> 时间：2012-06-08T20:48:52.903
> 
> 标签：windows-8, winrt-xaml

在 WinRT (Windows 8) 中似乎有所不同。有人弄清楚了吗？

**我的实验。**

当然：

文件构建操作 == 内容 && 复制到输出目录 == 始终复制

这些似乎不起作用：

```
<Image Source="Folder/file.jpg" />
<Image Source="/Folder/file.jpg" />
<Image Source="Namespace;Folder/file.jpg" />
<Image Source="Namespace;/Folder/file.jpg" />
<Image Source="pack://Namespace;Folder/file.jpg" />
<Image Source="pack://Namespace;/Folder/file.jpg" /> 
```

出于绝望，我尝试了：

文件构建操作 == 嵌入式资源 && 复制到输出目录 == 始终复制

**还是失败。**啊!

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-08T21:01:29.550

```
<Image Source = "ms-appx:///<projectName>/<folderName>/<contentName>" /> 
```

例如 ...

```
<Image Source = "ms-appx:///ClassLibrary1/Content/myimage.png" /> 
```

有关更多信息，请参阅[如何引用内容。](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh965322%28v=win.10%29.aspx)

# java - Spring 不解析具有相同 URL 前缀的 JSP 和 JSON

> ID：10955866
> 
> 赞同：1
> 
> 时间：2012-06-08T20:49:09.450
> 
> 标签：java, jsp, rest, spring-mvc

**我的目标：**

1.  `http://host:port/myApp/about`返回一个名为的jsp页面`about.jsp`
2.  `http://host:port/myApp/about/log`是返回 JSON 的服务调用

**我的 web.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4" ...>
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>classpath:log4j.xml</param-value>
</context-param>
<context-param>
    <param-name>log4jExposeWebAppRoot</param-name>
    <param-value>false</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener>
<servlet>
    <servlet-name>myApp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            ...
        </param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>myApp</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>
</web-app> 
```

**我的 servlet.xml（使用 Spring 3.0.3.RELEASE）：**

```
<beans ...>

<mvc:annotation-driven />
<context:component-scan ... />

<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <property name="maxUploadSize" value="15728640" /> <!-- 15 MB -->
    <property name="MaxInMemorySize" value="15728640" /> <!-- 15 MB -->
</bean>

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="order" value="1" />
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".jsp" />
</bean>

<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="order" value="2" />
    <property name="mediaTypes">
        <map>
            <entry key="json" value="application/json" />
            <entry key="xml" value="application/xml" />
        </map>
    </property>
    <property name="defaultContentType" value="application/json" />
    <property name="defaultViews">
        <list>
            <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
            <bean class="org.springframework.web.servlet.view.xml.MarshallingView">
                <constructor-arg>
                    <bean class="org.springframework.oxm.xstream.XStreamMarshaller" />
                </constructor-arg>
            </bean>
        </list>
    </property>
    <property name="ignoreAcceptHeader" value="true" />
</bean>
</beans> 
```

**我的控制器：**

```
@Controller
@RequestMapping("about")
public class AboutController {

    @RequestMapping(method=GET)
    public String getStats() {
        return "about";
    }

    @RequestMapping(value="log", method=GET)
    public @ResponseBody List<String> getLog() {
        ...
    }
} 
```

**在服务器（jetty 6，servlet-api 2.5）启动时，我看到：**

```
INFO org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/about/log] onto handler [AboutController@63843ca4]
INFO org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/about/log.*] onto handler [AboutController@63843ca4]
INFO org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/about/log/] onto handler [AboutController@63843ca4]
INFO org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/about] onto handler [AboutController@63843ca4]
INFO org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/about.*] onto handler [AboutController@63843ca4]
INFO org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/about/] onto handler [AboutController@63843ca4] 
```

**上述目标的设置结果：**

1.  产生错误：

    ```
    WARN org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/myApp/WEB-INF/views/about.jsp] in DispatcherServlet with name 'myApp' 
    ```

2.  按预期工作

**我检查过/尝试过的事情：**

*   `WEB-INF/views/about.jsp`确实存在
*   我已经在我的控制器中为这两种方法设置了断点，并且它们都被适当地调用了；退出我的控制器类后的某个时间发生故障
*   的顺序`InternalResourceViewResolver`被故意设置为第一个。我知道[Spring 文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-viewresolver-chaining)建议不要这样做，但是当我尝试把它放在最后时，我得到一个空`{ }`返回，我认为这是因为`ContentNegotiatingViewResolver`拿起“about”字符串并以某种方式解释它。我对订单没有要求，但`ContentNegotiatingViewResolver`需要保持原样的设置（除非绝对有必要更改它们）。
*   将 web.xml 中的 url-pattern 设置为`<url-pattern>/</url-pattern>`，但这会破坏对静态资源的引用（这不是一个选项，因为这些资源当前正在被生产中的许多第 3 方使用）
*   将 web.xml 中的 url-pattern 设置为`<url-pattern>/about/*</url-pattern>`，但随后我得到与上面列出的相反的结果：

    1.  按预期工作
    2.  产生错误：

        ```
        WARN org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/myApp/about/log.json] in DispatcherServlet with name 'myApp' 
        ```

    有趣的是，该 url`http://host:port/myApp/about/about/log` *确实*适用于这个 url-pattern

所以，我有点坚持要解决什么才能实现既定目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:14:26.067

您是否需要使用 InternalResourceViewResolver？

要配置杰克逊插件，我们只需要

```
 <mvc:annotation-driven /> 
```

试试这个 XML

```
<beans ...>
 <context:annotation-config />
<mvc:annotation-driven />
<context:component-scan ... />

<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <property name="maxUploadSize" value="15728640" /> <!-- 15 MB -->
    <property name="MaxInMemorySize" value="15728640" /> <!-- 15 MB -->
</bean>

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="prefix" value="/WEB-INF/views/"/>
    <property name="suffix" value=".jsp"/>
</bean>
</beans> 
```

# javascript - 意外的 jquery .last() 行为

> ID：10955867
> 
> 赞同：1
> 
> 时间：2012-06-08T20:49:13.130
> 
> 标签：javascript, jquery, jquery-selectors

我正在尝试为我的网站构建一个自定义关键字字段，

问题是我有一个输入 div 持有人，我通过单击按钮附加输入，但我检查

```
$('div inputs').last().val().length < 3 
```

如果它小于 3，我会摇动输入，否则：

```
$('div inputs').last().after('<input type="text" />') 
```

* * *

**问题是**：

`$('div inputs').last().val()`

总是返回第**一个**输入值，我做错了什么？

[演示](http://jsfiddle.net/CLy6B/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:52:26.913

您已将输入缓存在顶部，因此您始终使用同一组输入控件 - 一个。

在回调中定义您的输入变量，它将起作用：

```
$('body').on('click','#addkey',function(e){
    var inputs = $('#keysInput input');

    if(inputs.last().val().length < 3){
        $('#keysInput input').last().effect("shake", { times:1, distance: -5 }, 300);
    }else{
        console.log(inputs.last().val());
        $('#keysInput input').last().after('<input type="text" placeholder="type another keyword" />');            
    }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:55:24.617

像这样的东西：**演示** [http://jsfiddle.net/pVJXM/5/](http://jsfiddle.net/pVJXM/5/)

行为：每次输入`3`字符和更多内容并`+`单击时，最后都会附加一个输入输出。

我使用`var inputs = $('#keysInput input:last');`而不是使用`.last()`多次:) 这将为您解决问题。

希望能帮助到你，

**代码**

```
var cont = $('#keysInput');

var addBtn = $('#addKey');

$('body').on('keydown','#keysInput',function(e){

});

$('body').on('click','#addkey',function(e){

    var inputs = $('#keysInput input:last');

    if(inputs.val().length < 3){
        inputs.effect("shake", { times:1, distance: -5 }, 300);
    }else{
        console.log(inputs.last().val());
        inputs.after('<input type="text" placeholder="type another keyword" />');            
    }
})

​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T20:55:39.550

在脚本的开头，您选择`inputs`：

```
var inputs = $('#keysInput input'); 
```

之后，您在脚本首次运行时使用该特定值集，其中不包含新创建的字段。换句话说：**您`inputs`只包含一个字段（初始字段）**。

解决方案是简单地将值（所选输入列表）重新分配给该变量。

# ruby-on-rails - 为什么rails缓存检查每个页面请求的URL？

> ID：10955868
> 
> 赞同：1
> 
> 时间：2012-06-08T20:49:15.240
> 
> 标签：ruby-on-rails, caching, redis

我目前正在使用 redis-store，但我很确定这是 Rails 做的，而不是 redis-store 做的。

在*每次请求*时，我都会在缓存日志中看到这样的项目：

```
1339188014.237987 (db 1) "get" "cache:http://www.domain.com/?"
1339188107.318145 (db 1) "get" "cache:https://www.domain.com/login?" 
```

（两个单独的请求）

我只使用片段缓存（ <% cache 'some_key' do %>...<% end %> ）

我*没有*使用页面缓存或动作缓存。

那么，为什么 Rails 会查看这些键呢？我找不到设置这些键的痕迹，而且我已经验证它们是零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:59:14.123

在看：

```
gems/activesupport-3.2.5/lib/active_support/cache.rb 
```

在您的 ruby​​ 目录中（如果您不知道它在哪里并且在 UNIX/Mac 上，您可以`which ruby`在命令行上键入以找到 bin 目录，然后从那里开始。）

在那里抛出一个断点并调试它以查看调用堆栈。该日志来自第 526 行`ActiveSupport::Cache::Store#log`

当我调试它时，我发现它与 Metal 相关，并且它正在寻找页面的完全缓存版本。它看起来非常无害，如果您实际上没有进行页面缓存，那么它可能不会发生任何不好的事情。

# javascript - 使用 jQuery 隐藏/显示元素

> ID：10955876
> 
> 赞同：0
> 
> 时间：2012-06-08T20:49:59.747
> 
> 标签：javascript, jquery

我有以下网站结构

```
<div id="movies">

     <a href="">
         <div>content</div>
     </a> 
     <a href="">
         <div>content</div>
     </a>
     ...    

</div> 
```

`a tags`里面最多可以有50个`#movies`。如果用户要求，我只想显示 10 个并显示另外 10 个。

所以我想出了以下jquery代码。

```
 var count = $("#movies a").length;

   if(count > 10){
       for(i = 11; i <= count; i++){
          $('#movies a:nth-child('+i+')').hide();   
       }
       $('#more').append('<a>show more</a>');
   }

   $('#more a').click(function(){
       var hidden = $("#movies a").filter(":hidden");

       var count = 0;
       for(element in hidden){
           if(count <= 10){
               element.show();
           }
       }
   }); 
```

但这给了我`Uncaught TypeError: Object 0 has no method 'show'`。任何想法为什么？我需要更改/添加什么才能使这个想法生效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T20:53:46.617

您正在使用一些有点奇怪的做法：

*   不要使用带有`nth-child`;的循环。只需使用`$("#movies a").slice(10).hide()`.
*   使用`hidden.each(function() { ... })`而不是`for in`循环。在这里，您也可以`.slice`发挥自己的优势。
*   你不增加`count`; 一直如此`0`，因此该`if`子句始终为真。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T20:53:55.947

您不能循环使用`for(.. in ..)`，因为它会循环属性。使用 jQuerys 每种方法：

```
hidden.each(function() {
     var element = $(this);
     if(count <= 10)
        element.show();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T20:57:10.403

Try a simpler solution like below,

```
$(function () {
   $("#movies a:gt(9)").hide(); 

   var $moviesA = $('#movies a');
   $('#more a').click(function(){
        var $visibleA = $("#movies a :visible"); //Edit: added a space
        $moviesA.slice($visibleA.length, $visibleA.length + 10).show();
   });
}); 
```

**DEMO:** [http://jsfiddle.net/fKuGT/1](http://jsfiddle.net/fKuGT/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T20:54:28.993

`hidden` is a jQuery object. Don't loop over it using `for..in`. Use `.each`.

```
hidden.each(function(){
    if(count <= 10){
        $(this).show();
    }
}); 
```

# .net - .NET 选择哪个 neo4j 库？

> ID：10955878
> 
> 赞同：0
> 
> 时间：2012-06-08T20:50:24.710
> 
> 标签：.net, neo4j

我正在寻找 neo4j .NET 库。我已经尝试了很多，但仍然没有找到任何好的文档和示例。

最重要的是，我想使用 Cypher 查询语言。

任何人都可以推荐一个包含文档或至少清晰的密码示例的好的库吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:26:35.183

好吧，[http:](http://docs.neo4j.org/chunked/snapshot/tutorials-rest.html) //docs.neo4j.org/chunked/snapshot/tutorials-rest.html 上的两个客户端都有实验性的 Cypher 支持，也许您可​​以 ping 作者并做出贡献？将不胜感激！

# django - django test db 创建不能很好地与 south 和 add_to_class

> ID：10955879
> 
> 赞同：0
> 
> 时间：2012-06-08T20:50:27.463
> 
> 标签：django, django-models, django-south, django-testing

我在应用程序“线程评论”中有一个模型 ThreadedComments。

然后我有另一个应用程序“cbcomments”，models.py 仅包含：

```
ThreadedComment.add_to_class('post_as', models.CharField(max_length=250))
ThreadedComment.add_to_class('is_deleted_by_user', models.BooleanField(default=False))
ThreadedComment.add_to_class('is_edited_by_user', models.BooleanField(default=False))
ThreadedComment.add_to_class('date_edited', models.DateTimeField(null=True))

def post_as_obj(self):
    if not self.post_as:
        return None

    try:
        return json.loads(self.post_as)
    except:
        return None

def _get_source_user(self):
    return self.user

ThreadedComment.post_as_obj = post_as_obj
ThreadedComment.get_source_user = _get_source_user 
```

以及 ThreadedComments 的 4 次南迁。

当我尝试构建测试数据库时，它在第二次迁移时崩溃，出现“无法添加重复列'post_as'”错误。

我唯一能想到的是，由于某种原因，South 在加载 cbcomments 之后，在运行 cbcomments（但实际上是 ThreadedComments）迁移之前，在 ThreadedComments 上执行了一个同步数据库。

如何？为什么？我该怎么办？

# django - 当为 django 1.4 配置 mod_wsgi 时，将 WSGIPythonPath 添加到虚拟主机配置后，apache 无法在 mac osx 上启动

> ID：10955880
> 
> 赞同：9
> 
> 时间：2012-06-08T20:50:30.427
> 
> 标签：django, mod-wsgi

我遵循了 django 文档，了解如何在 mac osx lion 上使用 mod_wsgi [https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/)将 django 1.4 部署到 apache 以及当我添加 WSGIPythonPath 指令时 apache cant重新启动。但没有它，我的应用程序在路径中不存在。在日志中，我收到一条错误消息

> WSGIPythonPath 不能出现在 VirtualHost 部分中

这是我的虚拟主机配置的样子

```
<VirtualHost *:80>
ServerAdmin jmured@gmail.com
DocumentRoot "/Users/jamo/code/work/projects/bfpd/fapp"
ServerName bfpd.dev
ServerAlias bfpd.dev
ErrorLog "/private/var/log/apache2/bfpd.dev-error_log"
CustomLog "/private/var/log/apache2/bfpd.dev-access_log" common
Alias /static/ /Users/jamo/code/work/projects/bfpd/fapp/fapp/static/
<Directory /Users/jamo/code/work/projects/bfpd/fapp/fapp/static>
  Options Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    AllowOverride All
    Order allow,deny
    Allow from all
IndexOptions FancyIndexing
</Directory>
WSGIScriptAlias / /Users/jamo/code/work/projects/bfpd/fapp/fapp/wsgi.py
WSGIPythonPath /Users/jamo/code/work/projects/bfpd/fapp/  
    <Directory /Users/jamo/code/work/projects/bfpd/fapp/fapp>
    Options Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    AllowOverride All
    Order allow,deny
    Allow from all
    </Directory>

   </VirtualHost> 
```

我究竟做错了什么 ？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T21:43:50.260

我修好了它。 `WSGIPythonPath /Users/jamo/code/work/projects/bfpd/fapp/` 应该在`http.conf`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-14T11:07:48.420

正如 nemesisfixx 的评论中所述，并由原始问题中的错误指定：

> WSGIPythonPath 不能出现在 VirtualHost 部分中

将 WSGIPythonPath 移到 VirtualHost 之外解决了 Apache 在 OS X 服务器上崩溃的问题。

```
$ cat sites/0000_any_80_mysite.com.conf
WSGIPythonPath /Library/Server/Web/Data/Sites/mysite/django-app:/Users/owen/.virtualenvs/mysite:/Users/owen/.virtualenvs/mysite/lib/python2.7/site-packages

<VirtualHost *:80>
    ServerName mysite.com
    ServerAdmin admin@example.com
    DocumentRoot "/Library/Server/Web/Data/Sites/mysite/site"
    ...
    WSGIScriptAlias /api /Library/Server/Web/Data/Sites/mysite/django-app/mysite/wsgi.wsgi
    ...
<VirtualHost> 
```

我花了很多时间才得到正确的路径（包括到 site-env 的完整路径，我最初认为在添加 virtualenv 顶层后会自动包含它）。

# centos - VMware Fusion和CentOS黑屏

> ID：10955882
> 
> 赞同：1
> 
> 时间：2012-06-08T20:50:37.187
> 
> 标签：centos, vmware, virtual-machine

刚刚在我的 MB Mac OS X 10.7.4 上使用 VMware Fusion 3.1.4 的 VM 上安装了 CentOS 5.8，并遇到以下问题。CentOS 完成安装并重新启动。结果，一个漂亮的黑屏。我重新启动了 CentOS（在虚拟机上）没有成功。我重新启动了 VMware Fusion，但没有成功。我重启了整台机器（物理机）没有成功。

是否有任何 VMware Fusion 日志引导错误我可以调查为什么我有这个烦人的黑屏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:04:32.447

VMware Fusion 在虚拟机的捆绑包中记录错误。因此，例如，如果您的虚拟机在桌面上的硬盘上显示为：myvm，您将在终端中找到它：

```
cd ~/Desktop
ls -1 myvm* 
```

... myvm.vmwarevm

然后：

```
cd myvm.vmwarevm 
```

您将看到： **vmware.log** （可能还有 vmware-0.log 等，它们将是较旧的日志；vmware-0 是第二个最新的，vmware-1 是第三个最新的。）

一个很晚的答案，但希望这是一些帮助。

# node.js - 托管在 heroku 上的节点服务器不提供 socket.io 文件

> ID：10955883
> 
> 赞同：0
> 
> 时间：2012-06-08T20:50:46.323
> 
> 标签：node.js, heroku, socket.io, kineticjs

所以我使用 node.js、socket.io 和 kineticJS 制作了一个多人太空射击游戏。我的 Node.js 服务器实际上并不为客户端页面提供服务。我的客户端文件当前托管在我计算机上的本地 Apache 服务器中。

节点服务器现在在 Heroku 上启动并运行，我似乎无法在客户端加载 socket.io。我不断收到“io is not defined”错误。这就是我导入脚本的方式：

```
 <script src="http://xxx-xxx-xxxx.herokuapp.com:5000/socket.io/socket.io.js"></script> 
```

我已按照此处显示的说明进行操作：[https](https://devcenter.heroku.com/articles/nodejs) : //devcenter.heroku.com/articles/nodejs 我的 package.json 文件如下所示：

```
 {
    "name": "Grid-Frontier",
    "version": "0.0.1",
    "dependencies": {
      "socket.io": "0.9.x"
    },
    "engines": {
       "node": "0.6.x"
    }
    } 
```

在本地主机上一切都很好，我可以执行以下操作：

```
 // Importing on client side
    <script src="http://localhost:8080/socket.io/socket.io.js"></script>

    // Server-side
    server.listen(8080);
    socket = io.listen(server); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:08:06.190

因为 Heroku 只允许你在 80 端口通信，所以你不能使用其他端口，因此地址应该是：`http://xxx-xxx-xxxx.herokuapp.com/socket.io/socket.io.js` **不是端口 5000。**实际上端口 5000 上没有任何东西，它是机器内部的。

# c++ - 单步执行 std::function 调用时，如何跳过 std 命名空间中的方法调用？（使用 GDB。）

> ID：10955884
> 
> 赞同：5
> 
> 时间：2012-06-08T20:50:46.383
> 
> 标签：c++, c++11, gdb

如果我需要通过 std::function 调用，使用调试器单步执行函数对象可能会非常混乱。

是否有可能跳过这些帧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T22:27:41.127

gdb 7.4 为此添加了 skip 系列命令。

```
(gdb) apropos skip
info skip -- Display the status of skips
set step-mode -- Set mode of the step operation
show step-mode -- Show mode of the step operation
skip -- Ignore a function while stepping
skip delete -- Delete skip entries
skip disable -- Disable skip entries
skip enable -- Enable skip entries
skip file -- Ignore a file while stepping
skip function -- Ignore a function while stepping 
```

# django - 在同一个 apache 服务器上运行 django 和 wordpress

> ID：10955885
> 
> 赞同：0
> 
> 时间：2012-06-08T20:50:56.893
> 
> 标签：django, wordpress, apache

我想运行 www.example.com 以供 django 访问和管理。和，

www.example.com/about 或 www.example.com/about/...

和

www.example.com/wordpress 或 www.example.com/wordpress/...

由wordpress管理。

因此，wordpress 管理员将位于 www.example.com/wordpress，它生成的页面将位于 www.example.com/about/...

我不知道该怎么做。如何将这两个东西托管在同一个 apache 服务器上？

这是我当前的 wsgi 文件，django 应用程序在 www.example.com 上运行。但是当我访问 www.example.com/about/ 时，它会尝试通过 urls.py 并没有找到任何东西。我怎么把我的wordpress页面放在这里？

```
LoadModule wsgi_module modules/mod_wsgi.so

WSGIScriptAlias / "C:\Users\Nikunj\Documents\Aptana Studio 3 Workspace\myapp\myapp\wsgi.py"

Alias / "C:\Users\Nikunj\Documents\Aptana Studio 3 Workspace\myapp\myapp\"

<Directory />
Order allow,deny
Allow from all
</Directory> 
```

谢谢你的帮助！！:)

**编辑**这是我使用 jdi 的答案的新文件，但它仍然不起作用：

```
LoadModule wsgi_module modules/mod_wsgi.so
WSGIScriptAlias / "C:\Users\Nikunj\Documents\Aptana Studio 3 Workspace\myapp\myapp\wsgi.py"

Alias /wordpress/ "C:\wamp\www\wordpress\wp-admin\"
Alias / "C:\Users\Nikunj\Documents\Aptana Studio 3 Workspace\myapp\myapp\"

<Directory "C:/wamp/www/wordpress/wp-admin/">
  AllowOverride All
  Order Deny,Allow
  Allow from all
</Directory>

<Directory />
  Order allow,deny
  Allow from all
</Directory> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:29:12.817

在您的 apache conf 中创建多个目录条目：[http ://httpd.apache.org/docs/2.0/mod/core.html#directory](http://httpd.apache.org/docs/2.0/mod/core.html#directory)

一个是为wordpress设置的，一个是为django设置的。现在，每一点流量总是流向你的 django 应用程序。

它可能看起来像这样（只是猜测）：

```
Alias /about/ "C:/path/to/wordpress/"
Alias /wordpress/ "C:/path/to/wordpress/wp-admin/"

Alias / "C:/Users/Nikunj/Documents/Aptana Studio 3 Workspace/myapp/myapp/"

<Directory "C:/path/to/wordpress/">
  AllowOverride All
  Order Deny,Allow
  Allow from all
</Directory>

<Directory />
  Order allow,deny
  Allow from all
</Directory> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T00:54:48.947

最终答案：

```
LoadModule wsgi_module modules/mod_wsgi.so
WSGIScriptAlias / "C:/wamp/www/myapp/myapp/wsgi.py"

Alias /about/ "C:/wamp/www/wordpress/"
<Directory "C:/wamp/www/wordpress/">
  AllowOverride All
  Order Deny,Allow
  Allow from all
</Directory>

<Directory "C:/wamp/www/myapp">
  Order deny,allow
  Allow from all
</Directory> 
```

www.example.com <- django

www.example.com/about <- wp

谢谢！

# excel - Powerpivot：从单个数据透视表中的计算链接表连接数据库和预测的历史数据

> ID：10955886
> 
> 赞同：1
> 
> 时间：2012-06-08T20:50:57.190
> 
> 标签：excel, ssas, mdx, powerpivot

我注意到一些人试图做我在下面问的类似的事情。我的回答中可能有关于如何解决它的建议，所以我会先问这个问题。

我有从数据仓库连接获取并加载到 Powerpivot 的历史数据：

```
Date         Store    Sales    NumTransactions   Tag
2010-01-01   A        20000    50                Historical
2010-01-01   B        15000    10                Historical
2010-01-01   C        5000     3                 Historical
2010-01-01   D        300000   500               Historical 
```

与 Powerpivot 的连接是与数据库服务器的直接连接。

从这些数据中，我计算了一个预测，在 excel 中吐出一个表格，然后使用链接表格将其带入 PowerPivot。

```
Date         Store    Sales    NumTransactions   Tag
2010-01-02   A        20010    51                Forecast
2010-01-02   B        16000    12                Forecast
2010-01-02   C        6000     5                 Forecast
2010-01-02   D        400000   650               Forecast 
```

从这里我希望能够驱动一些数据透视表和图表，它们一起显示两组数据：

```
Date         Store    Sales    NumTransactions   Tag
2010-01-01   A        20000    50                Historical
2010-01-01   B        15000    10                Historical
2010-01-01   C        5000     3                 Historical
2010-01-01   D        300000   500               Historical
2010-01-02   A        20010    51                Forecast
2010-01-02   B        16000    12                Forecast
2010-01-02   C        6000     5                 Forecast
2010-01-02   D        400000   650               Forecast 
```

我如何做到这一点？我似乎无法建立关系，因为有多个日期和多个商店记录。

我试图在 Powerpivot 中的 Table Properties -> Query Editor 中将两者结合在一起：

```
SELECT [daily].* FROM [daily]
UNION ALL
SELECT [fcst].* from [fcst]

(Where [daily] is the historical data from the datawarehouse and [fcst] is the linked table within the excel workbook that has been linked into powerpivot) 
```

但问题是 Powerpivot 正在从 Connection 中寻找 [fcst]，该 Connection 可以追溯到我的历史数据来自的数据仓库。

我可以解决从两个数据源中驱动两个数据透视表的工作，然后通过直接引用数据透视表的单元格将它们链接到 Excel 中的一个表中（然后驱动图表）。但它很乱，我相信这是可以做到的。我只是想不通怎么做。

答案是否存在于 MDX 定义的集合中？

任何想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T03:36:20.687

当 PowerPivot 创建关系时，它需要一个表有一个具有不同值的列，您可以将其用作另一个表的查阅列。我建议您创建一个日期表。您可以从[https://datamarket.azure.com/dataset/1542c52d-d466-4094-a801-9ef8fd7c6485获得一个](https://datamarket.azure.com/dataset/1542c52d-d466-4094-a801-9ef8fd7c6485)如果你没有一种简单的方法来创建一个。然后，您可以创建从每天到日期和从 fcst 到日期的关系。我还将仅使用字符串“Historical”将计算列添加到 Daily 中，并将计算列添加到 fcst 以获取字符串“Forecast”。添加另一个包含两行的链接表：Historical、Forecast。然后创建从 daily 到此链接表的关系。如果您创建一个平面数据透视表，所有这些都已到位 - 您可以接近您正在寻找的内容，但您可能会有一个销售列用于历史销售，另一列用于预测销售。您可以在其中一个表中创建一个度量（不管是哪一个），以使用条件逻辑来使用基于当前标签的适用值，而只需在您的数据透视表中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T02:20:10.477

您还可以添加一个未链接到任何其他表的月末日期表，并将该日期用作日期等于或小于切片器的切片器，选择实际值和大于切片器的日期，使用预测。在这样做时，您可以避免在不完整的月份中获取部分月份的实际值。然后添加一个度量，例如...

```
calculate(sum(historical[sales], filter(historical[date]<=max(monthend[Dates]))) + calculate(sum(forecast[sales], filter(forecast[sales]> max(monthend[Dates]))) 
```

# iphone - iOS 键盘位置和方向

> ID：10955888
> 
> 赞同：3
> 
> 时间：2012-06-08T20:50:59.770
> 
> 标签：iphone, ios, ipad, uikeyboard, iphone-softkeyboard

我对 iOS SDK 比较陌生，我遇到了一个关于我正在开发的应用程序的设备键盘位置和方向的非常奇怪的问题。问题是如果键盘在用户多任务或应用程序进入后台时打开，用户返回应用程序后，键盘将移位（`UIKeyboardWillChangeFrameNotification`抬起），但方向和位置不正确.

有时键盘也会完全显示在屏幕之外，这是完全不受欢迎的行为。

我的问题是：

1.  键盘的位置和方向取决于什么？它是如何被 iOS 控制的？

2.  无论设备类型和屏幕尺寸如何，有没有办法检测键盘何时显示在屏幕外？我认为通过跟踪`UIKeyboardWillChangeFrameNotification`或`UIKeyboardWillShowNotification`.

3.  在显示键盘之前如何重置/设置键盘的位置和方向？这甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T07:47:28.057

从文档中：

> 使用“键盘通知用户信息键”中描述的键从 userInfo 字典中获取键盘的位置和大小。

用于从键盘通知的用户信息字典中获取值的键：

```
NSString * const UIKeyboardFrameBeginUserInfoKey;
NSString * const UIKeyboardFrameEndUserInfoKey;
NSString * const UIKeyboardAnimationDurationUserInfoKey;
NSString * const UIKeyboardAnimationCurveUserInfoKey; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T02:09:19.127

1.) 键盘是一个 UIWindow，位置取决于应用程序的主窗口。

2.）您可以做的是，在通知`UIKeyboardWillShowNotification` 或`UIKeyboardWillChangeFrameNotification`方法之一触发时，循环浏览窗口子视图以定位键盘。在我的一个应用程序中，我需要向键盘添加一个子视图。对于您的情况，您可以通过以下方式获取框架：

```
//The UIWindow that contains the keyboard view - It some situations it will be better to actually
//iterate through each window to figure out where the keyboard is, but In my applications case
//I know that the second window has the keyboard so I just reference it directly
UIWindow* tempWindow = [[[UIApplication sharedApplication] windows] objectAtIndex:1];

//Because we cant get access to the UIPeripheral throught the SDK we will just use UIView.
//UIPeripheral is a subclass of UIView anyways
UIView* keyboard;

    //Iterate though each view inside of the selected Window
for(int i = 0; i < [tempWindow.subviews count]; i++)
{
    //Get a reference of the current view
    keyboard = [tempWindow.subviews objectAtIndex:i];

           //Assuming this is for 4.0+, In 3.0 you would use "<UIKeyboard"
           if([[keyboard description] hasPrefix:@"<UIPeripheral"] == YES) {

                  //Keyboard is now a UIView reference to the UIPeripheral we want
                  NSLog(@"Keyboard Frame: %@",NSStringFromCGRect(keyboard.frame));

           }
} 
```

3.）不完全确定这是可能的，但我给你提供的代码。`keyboard`现在被转换为“UIView”，您可以对其应用自己的转换。

这可能不是`most`优雅的解决方案，但它适用于我的情况。

希望这可以帮助 ！

# haskell - 重复调用 Haskell monad

> ID：10955889
> 
> 赞同：5
> 
> 时间：2012-06-08T20:51:00.177
> 
> 标签：haskell, loops, monad-transformers

我有一个返回 monad 的 Haskell 函数，声明如下：

```
data Options = Options {
    optGames :: Int,
    optSuits :: Int,
    optVerbose :: Bool
  } deriving Show

playGame :: Options -> StateT StdGen (WriterT [String] IO)) Bool 
```

此函数玩单人纸牌游戏，然后返回一个指示输赢的布尔值，以及`WriterT`monad 中的日志。

我想调用这个函数一定次数，每次都使用随机生成器（`StdGen`）的“下一个”值，并将`Bool`返回值连接到一个列表中。

我尝试创建一个递归函数来执行调用，但无法弄清楚如何将 monad 传递到下一次迭代中。

我想效仿

```
initial state >>= playGame >>= playGame ... -- repeat N times 
```

并收集所有结果`Bool`值，以及来自`WriterT`monad 的日志条目。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T21:08:26.077

我想你正在寻找`replicateM`. 这会将给定的操作重复指定次数，并将结果作为列表返回。所以`replicateM n playGame`对应于玩游戏`n`时间并返回结果列表。

# joomla - Joomla！子页面菜单项缩进

> ID：10955892
> 
> 赞同：0
> 
> 时间：2012-06-08T20:51:13.000
> 
> 标签：joomla, menu, joomla1.5

我正在尝试在 Joomla 的子页面上缩进 3 级菜单项！1.5 安装。任何人都可以给我任何使这成为可能的提示吗？

如果您查看此页面，您会看到您所在的页面在左侧菜单中与菜单中的所有其他页面链接垂直内联。由于这是 Hanson History 的子页面，我希望 Hanson Team 缩进几个像素，以便用户看到它是该菜单项的子页面。

[http://hanson.betabing.com/about-us/hanson-history/hanson-team](http://hanson.betabing.com/about-us/hanson-history/hanson-team)

谢谢你看，比尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:04:38.263

使用 CSS 定位二级无序列表

```
#content-left-interior ul.menu li ul li a span { padding-left:10px; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:04:50.510

在 templates/hanson/css 下的 template.css 中添加这个

```
#content-left-interior li li {
   padding-left: 46px;
} 
```

# ftp - wget 从 cleo vltrader 获取 0 字节“列表”文件

> ID：10955893
> 
> 赞同：1
> 
> 时间：2012-06-08T20:51:16.157
> 
> 标签：ftp, cygwin, wget

我在使用 wget 和特定的 ftp 服务器时遇到问题。问题是当 wget 请求一个文件列表时，它返回为 0 字节。我可以使用 Filezilla v3.5.3 和 FireFTP v2.0.4 获得列表。

我的 wget 是在 Cygwin v1.7.15 / Windows XP 上运行的 v1.13.4。ftp 服务器将自己标识为“Linux 版本：Cleo VLTrader/4.2.79 FTP 服务器”。

如果我无法获得文件列表，我将无法自动化我的下载过程。我怎样才能解决这个问题？

成绩单如下。

```
531 $ wget --user=**** --password=**** ftp://b2b.parkcitygroup.com/outbound/sales/
--2012-06-08 16:40:09--  ftp://b2b.parkcitygroup.com/outbound/sales/
           => `.listing'
Resolving b2b.parkcitygroup.com (b2b.parkcitygroup.com)... 205.132.39.56
Connecting to b2b.parkcitygroup.com (b2b.parkcitygroup.com)|205.132.39.56|:21... connected.
Logging in as ***** ... Logged in!
==> SYST ... done.    ==> PWD ... done.
==> TYPE I ... done.  ==> CWD (1) /outbound/sales ... done.
==> PASV ... done.    ==> LIST ... done.

    [ <=>                                                      ] 0           --.-K/s   in 0s

2012-06-08 16:40:11 (0.00 B/s) - `.listing' saved [0]

Unsupported listing type, trying Unix listing parser.
Removed `.listing'.
Wrote HTML-ized index to `index.html' [244]. 
```

# asp.net-mvc-3 - “System.Web.WebPages.Html.HtmlHelper”不包含“Action”的定义

> ID：10955895
> 
> 赞同：1
> 
> 时间：2012-06-08T20:51:38.463
> 
> 标签：asp.net-mvc-3

感谢您阅读本文。

在 _Layout.cshtml 页面中，我使用 @RenderPage 调用标题：

```
@RenderPage("/Shared/_header.cshtml") 
```

它有这个：

```
<div id="Header"> Home </div> 
```

想要使其可点击到默认操作（“索引”）

当我尝试这个时：

```
<div id="Header"> @Html.Action("Index", "MyController") </div> 
```

带有此错误的“操作”用红色下划线：

```
'System.Web.WebPages.Html.HtmlHelper' does not contain a defintion for 'Action' and no extension ...... 
```

项目以及配置文件中都引用了“System.Web.Mvc”：

```
<add namespace="System.Web.Mvc" /> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T20:52:30.117

您需要复制`Views/Web.config`到`/Shared`.

[这将告诉 Razor 使用 MVC 基本类型和解析器](http://blog.slaks.net/2011/02/dissecting-razor-part-3-razor-and-mvc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-03T08:53:39.310

我已经从 mvc4 移动到 mvc5
我需要做的就是将 web.config 中的这个键值从 2 更改为

```
 <add key="webpages:Version" value="3.0.0.0" /> 
```

# grails - 如何更改 grails 本地主机端口？

> ID：10955899
> 
> 赞同：94
> 
> 时间：2012-06-08T20:51:55.343
> 
> 标签：grails

我正在使用 grails 2.0.4。我想使用端口：8090 而不是 8080 作为本地主机。因此需要帮助将端口永久更改为 8090。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-05-03T12:27:34.270

该解决方案增加了答案[http://stackoverflow.com/a/10956283/122457](http://stackoverflow.com/a/10956283/122457)。在 Grails 2.x 中，将以下内容添加到`BuildConfig.groovy`：

```
grails.server.port.http = 8090 
```

有关详细信息，请参阅[http://forum.springsource.org/archive/index.php/t-97024.html](http://forum.springsource.org/archive/index.php/t-97024.html)。

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2012-06-08T21:33:16.923

有两种选择：

1.  从变为`grails.serverURL`。_ _ `Config.groovy``"http://localhost:8080/${appName}"``"http://localhost:8090/${appName}"`
2.  `-Dgrails.server.port.http=8090`在命令行上启动 grails 。将`GRAILS_OPTS`环境变量设置`-Dgrails.server.port.http=8090`为自动应用它。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2014-08-05T07:22:58.027

如果您使用的是 Netbeans IDE，请设置以下内容 -：

配置：-> BuildConfig.groovy：-> grails.server.port.http = 8090 并重新启动服务器。

如果没有 IDE，请在命令提示符下键入 -：

```
grails -Dserver.port 8090 run-app 
```

或者

```
grails -Dserver.port=8090 run-app 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2016-06-30T22:41:15.143

对于 grails 3，您可以将其放入您的***application.yml***

```
server:
    port: 9999 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-05-18T01:14:05.830

命令行：`grails run-app -port 8090`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-12-21T05:35:24.330

运行命令（Ctrl+Alt+g）

1.  直到 grails 2.x 版：`run-app -Dserver.port=8090`
2.  对于 grails 3.x 版：`run-app --port=8090`

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-01-07T21:20:54.753

如果您使用的是 IntelliJ IDE，那么

从应用程序菜单中单击运行 >> 编辑配置... >> VM 选项：-Dgrails.server.port.http=8180

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-11-20T02:43:32.327

grails 运行应用程序-Dserver.port=8090

***或者使用另一个端口号***

在 Intellij 中：Ctrl+Alt+G（键盘通用）；Cmd+Alt+G（键盘 Mac）并仅使用：

运行应用程序-Dserver.port=8090

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-18T01:55:31.870

从您的 application.yml (grails-app/conf/application.yml) 添加/更新端口的值

```
environments:
   development:
        server:
            port: "8090" 
```

或者

```
server:
    port: "8090" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-11T20:57:04.490

你没有说你使用的是什么IDE。如果您使用的是 Netbeans，您只需右键单击项目名称并选择 Properties。在常规设置类别中，您可以轻松地将服务器端口更改为您喜欢的任何内容。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-27T04:47:32.267

您可以在终端上使用以下命令运行 grails app。默认运行端口为 8080。

grails 运行应用程序-Dserver.port=9090

这将在端口 9090 上运行应用程序。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-08-04T05:18:44.243

在命令行中键入以下内容：

```
grails -Dserver.port=8090 run-app 
```

# c - 使用 wwsapi 更改肥皂消息中的命名空间前缀

> ID：10955902
> 
> 赞同：2
> 
> 时间：2012-06-08T20:52:05.780
> 
> 标签：c, soap, native, ws-security, wwsapi

我在 C 项目中使用 WWSAPI 通过发送和接收 SOAP 消息与 Web 服务进行通信。

我遇到的错误是服务器期望看到一个`<wsse:Security>`标签，而我的程序生成的消息没有标签。相反，它有一个`<o:Security>`标签。有没有办法在 C/C++ 的 WWSAPI 中指定命名空间前缀？

这是我的要求：

```
 <s:Envelope xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
      <s:Header>
        <a:Action s:mustUnderstand="1">http://ge.evse.com/getAllGeneratedPasswords</a:Action>
        <a:MessageID>urn:uuid:1fc3d3dc-a1c1-4fcf-bfca-96e712afba1b</a:MessageID>
        <a:To s:mustUnderstand="1">https://services.stg.gewattstation.com/EVSEManufacturingServices/services/EVSEManufacturingServices</a:To>
        <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
          <Timestamp xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <Created>2012-06-08T19:00:59.476Z</Created>
            <Expires>2012-06-08T19:05:59.476Z</Expires>
          </Timestamp>
          <o:UsernameToken>
            <o:Username>joe</o:Username>
            <o:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText"><!--censored sensitive information--></o:Password>
          </o:UsernameToken>
        </o:Security>
      </s:Header>
      <s:Body>
        <getAllGeneratedPasswords xmlns="http://service.services.manufacturing.evse.inds.ge.com/">
          <userType xmlns="">user</userType>
        </getAllGeneratedPasswords>
      </s:Body>
    </s:Envelope> 
```

这是来自网络服务的响应：

```
 <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
      <soap:Body>
        <soap:Fault>
          <faultcode xmlns:ns1="http://docs.oas is-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd ">ns1:InvalidSecurity</faultcode>
          <faultstring>An error was discovered processing the &lt;wsse:Security> header</faultstring>
        </soap:Fault>
      </soap:Body>
    </soap:Envelope> 
```

正如你所看到的，它正在寻找`<wsse:Security>`但它没有看到它……任何对此一无所知的人？

# ms-access-2007 - 如何使文本框不默认为数据库中的第一个值？

> ID：10955904
> 
> 赞同：0
> 
> 时间：2012-06-08T20:52:24.067
> 
> 标签：ms-access-2007

这可能是一些简单的愚蠢的事情，但它对我不起作用。我在 Access 2007 中制作了一个费率表。我使用 create、split form 为该表制作了一个表格，然后按照向导进行操作。我在表单中添加了“添加记录”、“删除记录”和“退出”按钮。对于自动创建的文本框，在属性、数据、默认值中，我将其设置为“速率”当我第一次打开表单时，文本框总是显示数据库中的第一个值，如果我输入，它将编辑数据库中的第一个值它。单击“添加记录”按钮后，它会显示“速率”并将记录添加到数据库的末尾。

所以问题是，当我第一次打开它时，如何让文本框读取“Rate”并让它默认到数据库的末尾我可以添加记录？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:49:46.570

这在使用交换机时比较简单。新的总机项目；在添加模式下打开表单 > 输入表单名称。这将在新记录处打开表单。Prgammically 您可以使用 docmd.openform 例如：docmd.OpenForm(form_Name,acNormal,,,acFormAdd)。

**请参阅 Remou 评论中的链接**

高温高压

罗杰

# c++ - boost::mutex 不能帮助避免 C++ 程序中的竞争条件？

> ID：10955910
> 
> 赞同：0
> 
> 时间：2012-06-08T20:52:52.067
> 
> 标签：c++, linux, multithreading, boost, mutex

我正在 Linux 上进行多线程 C++ 提升。

即使我尝试使用锁，以下程序仍然存在竞争条件。

结果是 8 或 9 或 5 。它不应该发生。

```
 #include <iostream>
 #include <boost/bind.hpp>
 #include <boost/threadpool.hpp>
 #include <boost/thread/mutex.hpp>
 #include <boost/thread.hpp>

 boost::mutex myMutex ;
 int g = 0 ;

 void f()
 {

    //myMutex.lock();
    {
            boost::mutex::scoped_lock lock(myMutex);
            ++g;
    }
    //myMutex.unlock();
    return ;
 }
 const int threadnum = 10;
 int main()
 {
    boost::threadpool::fifo_pool tp(threadnum);
    for (int i = 0 ; i < threadnum ; ++i)
            tp.schedule(boost::bind(f));
    std::cout << g << std::endl ;
    return 0 ;
 } 
```

任何帮助将不胜感激。

谢谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T21:08:23.880

来自[http://threadpool.sourceforge.net/tutorial/intro.html](http://threadpool.sourceforge.net/tutorial/intro.html)：

> 了解任务仅计划执行是非常重要的。立即安排返回，并且无法保证何时执行任务以及处理需要多长时间。

您安排了 10 个任务，然后在您到达线路时立即打印执行的结果

> std::cout << g << std::endl ;

因此，虽然您的互斥锁确保线程一次增加一个 g，但您无需等待它们完成后再打印结果。修改代码的一种方法是等待池中的所有任务完成：

```
boost::threadpool::fifo_pool tp(threadnum);
for (int i = 0 ; i < threadnum ; ++i)
        tp.schedule(boost::bind(f));
tp.wait(); //WAIT FOR TASKS TO EXECUTE
std::cout << g << std::endl ;
return 0 ; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T20:57:30.570

我不确定我的阅读是否正确，但看起来你正在安排一堆会增加 g 的事情，然后在 g 的内容上调用 cout。您的互斥锁可防止预定的 procs 相互践踏，但没有什么能迫使 cout 最后等到它们全部完成。为此，您需要某种读/写互斥锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T21:03:12.373

似乎主线程在孩子之前完成 - 这就是为什么你会得到看似随机的 g 值。有很多方法可以让主线程等到子线程完成，即

[等待线程池中的任务完成](https://stackoverflow.com/questions/4571225/wait-for-tasks-to-get-completed-in-threadpool)

# objective-c - 如何在 NSWindow 上显示像素数组？

> ID：10955913
> 
> 赞同：1
> 
> 时间：2012-06-08T20:53:22.313
> 
> 标签：objective-c, cocoa, xcode4, pixel, cgimage

非常简单的问题...我有一个像素数组，如何在屏幕上显示它们？

```
#define WIDTH 10
#define HEIGHT 10
#define SIZE WIDTH*HEIGHT

unsigned short pixels[SIZE];

for (int i = 0; i < WIDTH; i++) {
    for (int j = 0; j < HEIGHT; j++) {
        pixels[j*HEIGHT + i] = 0xFFFF;
    }
} 
```

就是这样......现在我怎样才能在屏幕上显示它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T02:09:41.967

1.  创建一个新的“Cocoa 应用程序”（如果你不知道如何创建一个可可应用程序去[Cocoa 开发中心](http://cocoadevcentral.com/d/learn_cocoa/ "可可开发中心")）
2.  子类 NSView（如果您不知道如何子类化视图，[请阅读“创建 NSView 子类”部分](http://developer.apple.com/library/ios/documentation/IDEs/Conceptual/xcode_quick_start/Xcode_Quick_Start_Guide.pdf)）
3.  在界面生成器上将您的 NSWindow 设置为 400x400
4.  在您的 NSView 中使用此代码

    ```
    #import "MyView.h"

    @implementation MyView

    #define WIDTH 400
    #define HEIGHT 400
    #define SIZE (WIDTH*HEIGHT)
    #define BYTES_PER_PIXEL 2
    #define BITS_PER_COMPONENT 5
    #define BITS_PER_PIXEL 16

    - (id)initWithFrame:(NSRect)frame
    {
        self = [super initWithFrame:frame];
        if (self) {
            // Initialization code here.
        }
        return self;
    }

    - (void)drawRect:(NSRect)dirtyRect
    {
        // Get current context
        CGContextRef context = (CGContextRef)[[NSGraphicsContext currentContext] graphicsPort];

        // Colorspace RGB
        CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

        // Pixel Matrix allocation
        unsigned short *pixels = calloc(SIZE, sizeof(unsigned short));

        // Random pixels will give you a non-organized RAINBOW 
        for (int i = 0; i < WIDTH; i++) {
            for (int j = 0; j < HEIGHT; j++) {
                pixels[i+ j*HEIGHT] = arc4random() % USHRT_MAX;
            }
        }

        // Provider
        CGDataProviderRef provider = CGDataProviderCreateWithData(nil, pixels, SIZE, nil);

        // CGImage
        CGImageRef image = CGImageCreate(WIDTH,
                                         HEIGHT,
                                         BITS_PER_COMPONENT,
                                         BITS_PER_PIXEL,
                                         BYTES_PER_PIXEL*WIDTH,
                                         colorSpace,
                                         kCGImageAlphaNoneSkipFirst,
                                         // xRRRRRGGGGGBBBBB - 16-bits, first bit is ignored!
                                         provider,
                                         nil, //No decode
                                         NO,  //No interpolation
                                         kCGRenderingIntentDefault); // Default rendering

    // Draw
    CGContextDrawImage(context, self.bounds, image);

    // Once everything is written on screen we can release everything
    CGImageRelease(image);
    CGColorSpaceRelease(colorSpace);
    CGDataProviderRelease(provider);

    }
    @end 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:45:03.760

有很多方法可以做到这一点。更直接的方法之一是使用`CGContextDrawImage`. 在drawRect中：

```
CGContextRef ctx = [[NSGraphicsContext currentContext] graphicsPort];
CGDataProviderRef provider = CGDataProviderCreateWithData(nil, bitmap, bitmap_bytes, nil);
CGImageRef img = CGImageCreate(..., provider, ...);
CGDataProviderRelease(provider);    
CGContextDrawImage(ctx, dstRect, img);
CGImageRelease(img); 
```

CGImageCreate 有一堆我在这里遗漏的参数，因为正确的值将取决于您的位图格式。[有关详细信息，请参阅 CGImage 参考。](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGImage/Reference/reference.html)

`CGImageRef`请注意，如果您的位图是静态的，则保留而不是立即处理它可能是有意义的。您最了解您的应用程序是如何工作的，因此您决定这是否有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T02:18:52.150

我通过使用带有 NSBitmapImageRep 的 NSImageView 从像素值创建图像来解决了这个问题。如何创建像素值有很多选择。在我的例子中，我使用了 32 位像素 (RGBA)。在这段代码中，`pixels`是像素值的巨型数组。 `display`是 NSImageView 的出口。

```
 NSBitmapImageRep *myBitmap;
    NSImage *myImage;
    unsigned char *buff[4];
    unsigned char *pixels;
    int width, height, rectSize;
    NSRect myBounds;

    myBounds = [display bounds];
    width = myBounds.size.width;
    height = myBounds.size.height;

    rectSize = width * height;

    memset(buff, 0, sizeof(buff));
    pixels = malloc(rectSize * 4);

    (fill in pixels array)

    buff[0] = pixels;

    myBitmap = [[NSBitmapImageRep alloc] initWithBitmapDataPlanes:buff
            pixelsWide:width
            pixelsHigh:height 
            bitsPerSample:8
            samplesPerPixel:4 
            hasAlpha:YES
            isPlanar:NO
            colorSpaceName:NSCalibratedRGBColorSpace
            bitmapFormat:0
            bytesPerRow:(4 * width)
            bitsPerPixel:32];

    myImage = [[NSImage alloc] init];
    [myImage addRepresentation:myBitmap];
    [display setImage: myImage];
    [myImage release];
    [myBitmap release];

    free(pixels); 
```

# javascript - 第一次尝试时未发生 JQuery FadeOut 功能

> ID：10955919
> 
> 赞同：1
> 
> 时间：2012-06-08T20:53:48.130
> 
> 标签：javascript, jquery

我有一个页面，它的一侧有一个无序列表，可以在列表右侧带有图像的不同容器之间切换。

有问题的页面位于以下 URL，head 标记中包含 JQuery 代码：

[http://dev.bathroomwarehouse.com/bathrooms.html](http://dev.bathroomwarehouse.com/bathrooms.html)

在页面加载后单击左侧的项目（例如“Burgundy”）后，右侧的图像（由 div 容器封装）在没有动画的情况下消失，尽管使用了 JQuery 中的“fadeOut”功能。

第一次更改后，fadeOut 函数按预期发挥作用，右边的 div 淡出，新的 div 淡入。

谁能帮助弄清楚为什么会这样？

有问题的代码如下：

jQuery

```
$(document).ready(function () {
        $(".catList li").click(function() {

            $(".catList li").removeClass('selectedRange');
            $(this).addClass("selectedRange");
            var clickedItem = $(this).index(".catList li");

            $(".images div").stop().fadeOut('slow', function () {
                $(".images div").removeClass("selectedImageGroup");
            });

            $(".images div:eq(" + clickedItem + ")").delay(750).fadeIn(function () {
                $(".images div:eq(" + clickedItem + ")").addClass("selectedImageGroup");
            });

        });
    }); 
```

HTML：

```
<div class="imageSelector">
        <ul class="catList">
            <li class="selectedRange"><h2>Ivory</h2>Modernist suite featuring with a touch of nostalgia…&lt;/li>
            <li><h2>Burgundy</h2>Contemporary classic...</li>
            <li><h2>Evergreen</h2>Minimalist with a unique shower feature...</li>
        </ul>
        <div class="vertLine">&nbsp;</div>
        <div class="images">
            <div class="imageGroup selectedImageGroup">
                <table class="imageGroupTable">
                    <tr>
                        <td colspan="3" class="imageGroupMainImage">
                            <img src="img/ImageBrowser/B1/Main.jpg" alt="" />
                        </td>
                    </tr>
                    <tr class="imageGroupSmallImages">
                        <td><img src="img/ImageBrowser/B1/Img1.jpg" alt="" /></td>
                        <td><img src="img/ImageBrowser/B1/Img2.jpg" alt="" /></td>
                        <td><img src="img/ImageBrowser/B1/Img3.jpg" alt="" /></td>
                    </tr>
                </table>
            </div>
            <div class="imageGroup">
                <table class="imageGroupTable">
                    <tr>
                        <td colspan="3" class="imageGroupMainImage">
                            <img src="img/ImageBrowser/B2/Main.jpg" alt="" />
                        </td>
                    </tr>
                    <tr class="imageGroupSmallImages">
                        <td><img src="img/ImageBrowser/B2/Img1.jpg" alt="" /></td>
                        <td><img src="img/ImageBrowser/B2/Img2.jpg" alt="" /></td>
                        <td><img src="img/ImageBrowser/B2/Img3.jpg" alt="" /></td>
                    </tr>
                </table>
            </div>
            <div class="imageGroup">
                <table class="imageGroupTable">
                    <tr>
                        <td colspan="3" class="imageGroupMainImage">
                            <img src="img/ImageBrowser/B1/Main.jpg" alt="" />
                        </td>
                    </tr>
                    <tr class="imageGroupSmallImages">
                        <td><img src="img/ImageBrowser/B1/Img1.jpg" alt="" /></td>
                        <td><img src="img/ImageBrowser/B1/Img2.jpg" alt="" /></td>
                        <td><img src="img/ImageBrowser/B1/Img3.jpg" alt="" /></td>
                    </tr>
                </table>
            </div>

        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:09:50.933

这是因为你已经`display: block!important;`覆盖`display: none;`了你的容器 div。（我无法解释为什么它不起作用，但这就是问题的原因。）单击一次后它会起作用，因为它将内联样式设置为`display:block;`. 如果删除`display:none`元素的 CSS 行，淡入淡出也适用于第一行。

示例破损：[不工作](http://jsfiddle.net/FhCBY/1/)，[工作](http://jsfiddle.net/FhCBY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:38:13.350

添加这一行：

```
$('.images div:first').show(); 
```

紧接着

```
$(document).ready(function () { 
```

# nservicebus - NServiceBus 3.2 - NServiceBus.Timeout.Core.TimeoutRunner.CacheExistingTimeouts() 的 NullReferenceException

> ID：10955925
> 
> 赞同：2
> 
> 时间：2012-06-08T20:54:40.347
> 
> 标签：nservicebus, nservicebus3

非常感谢 Andreas 帮助我之前的 NSB 3.2 问题 (http://stackoverflow.com/questions/10904857/nservicebus-endpoints-looking-for-ravenb-for-timeouts-after-upgrading-3-0-3 ）。实施该更改后，我现在在每个服务启动期间都有一个致命异常。

每个服务（在实现 IWantCustomInitialisation 的类中）配置如下；

```
 Configure.With()
            .DBSubcriptionStorage()
            .Sagas()
            .NHibernateSagaPersister()
            .NHibernateUnitOfWork()
            .DisableSecondLevelRetries()                      
            .DisableTimeoutManager(); 
```

这是在启动期间的日志中：

```
2012-06-08 21:49:46,946 [4] INFO  NServiceBus.Host - Going to activate profile: NServiceBus.PerformanceCounters, NServiceBus.Host, Version=3.2.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c
2012-06-08 21:49:46,947 [4] INFO  NServiceBus.Host - Going to activate profile: NServiceBus.Production, NServiceBus.Host, Version=3.2.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c
2012-06-08 21:49:46,947 [4] INFO  NServiceBus.Host - Going to activate profile: NServiceBus.PerformanceCounters, NServiceBus.Host, Version=3.2.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c
2012-06-08 21:49:46,962 [4] DEBUG NServiceBus.Host - Activating profile handler: NServiceBus.Hosting.Windows.Profiles.Handlers.PerformanceCountersProfileHandler, NServiceBus.Host, Version=3.2.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c
2012-06-08 21:49:46,963 [4] DEBUG NServiceBus.Host - Activating profile handler: NServiceBus.Hosting.Windows.Profiles.Handlers.ProductionProfileHandler, NServiceBus.Host, Version=3.2.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c
2012-06-08 21:49:52,063 [4] FATAL NServiceBus.Hosting.GenericHost - System.NullReferenceException: Object reference not set to an instance of an object.
 at NServiceBus.Timeout.Core.TimeoutRunner.CacheExistingTimeouts()
 at NServiceBus.Timeout.Core.TimeoutRunner.Run()
 at NServiceBus.Unicast.Config.StartupRunners.<Run>b__5(IWantToRunWhenTheBusStarts r)
 at System.Collections.Generic.List`1.ForEach(Action`1 action)
 at NServiceBus.Unicast.Config.StartupRunners.<Run>b__4(Object obj, EventArgs ev)
 at NServiceBus.Unicast.UnicastBus.NServiceBus.IStartableBus.Start(Action startupAction)
 at NServiceBus.Unicast.UnicastBus.NServiceBus.IStartableBus.Start()
 at NServiceBus.Hosting.GenericHost.Start() in d:\BuildAgent-03\work\nsb.master22\src\hosting\NServiceBus.Hosting\GenericHost.cs:line 32 
```

# jquery - 有没有更好的 Android 网页视图

> ID：10955927
> 
> 赞同：15
> 
> 时间：2012-06-08T20:54:49.720
> 
> 标签：jquery, android, webview, sencha-touch

有没有更好的安卓网页视图？谷歌自己的文件提到不要依赖 webview 对象。

但是对于使用 webkit 来说，与在具有可比硬件的移动设备上使用的其他 webkit 浏览器相比，它如此有限似乎很奇怪。

这在 jquery 移动实现或类似的 web 应用程序的 sencha touch 实现中很明显。Android 版本会出现速度下降、渲染问题和糟糕的用户体验，而其他移动设备（如 iphone）可以正常运行。他们都使用 webkit。在应用程序之外，实际的 android 浏览器运行良好。

有没有办法在较低的层次上真正解决android的问题？有没有人为Android制作了一个更全面的网络对象？

感谢您的任何见解

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-08T22:16:58.403

质量管理，

了解我同意 Commonswares 以及所提供答案中所述的几乎所有内容。但是，这个问题似乎暗示您遇到了一个问题（无论是在理解上还是在概念上），并且想要找到/开发更适合您需求的解决方案。

**解决您可能会收到的问题和回复：**

我相信 Commonswares的**有效**批评是由于您没有说明提供的平台对象***为何***或***如何不令人满意，也没有说明您******为什么***或***何时***相信 Google 说过该对象不可靠。如果您想要更好的反馈，请适当地编辑您的问题以进行交流，这样您就会遇到更少的问题。

此外，正如下面进一步解释的那样，您暗示这是 Android 平台的问题（实际上，几乎直接说明了它）而事实并非如此。在 Web 浏览的广泛范围内有太多考虑因素，无法通过简单的控件（例如 WebView）来完全解决。早在 90 年代，微软的嵌入式 IE COM 对象就面临同样的问题。这是一个不属于任何一个群体的大问题。

**解决隐含的问题：**

该`WebView`对象基本上是一个迷你浏览器，它使用基于与专用浏览器完全不同的参数的高度灵活的渲染代码。这包括从简单的渲染到可交互的 (sp?) 对象（例如此类页面将使用的链接）的所有内容。这个过程很难（因为没有更好的词）以这样一种方式小型化，即能够统一嵌入到各种应用程序中，这些应用程序每次可能具有不同的布局结构和参数。哎呀，这样的引擎即使使用专用的浏览引擎也很难统一编程，导致当前主要浏览器整体之间存在很多差异。

因此，这`WebView`并不意味着提供专用浏览器的全部功能，而是在通常执行其他操作的应用程序中显示 Web 交付内容的最有用的方面。当您考虑添加 Javascript 功能或从所述内容交付的基于客户端的处理的安全隐患时，尤其如此。除此之外，每个设备都有可能拥有不同的渲染引擎或相同渲染引擎的不同版本，这与不同设备利用 SQLite 具有不同功能（即外键支持）的方式非常相似。

因此，WebView 是作为一种解决方案提供的，用于显示 Web 交付的内容，但不保证其可扩展性或可用性*，除非*您*纯粹*使用它来查看（并可能做出反应）受信任且符合标准的 HTML 代码。一旦您进入现实世界网站的实际实践，您就会意识到 HTML 之所以如此灵活，是因为不同的开发人员在不同的级别上遵守了每个标准。由于 HTML 的主要信条是它可以工作（显示内容），尽管存在潜在的歧义，开发一个完全全面的应用程序嵌入式面向对象解决方案的问题变得更加难以开发。

> ... 其他移动设备（如 iphone）可以正常运行

这取决于内容。此外，Apple 设备的开发理念与 Android 设备完全不同。Apple 只有少数设备，因此他们可以保证其设备之间的一致性，并选择添加哪些以及何时添加其他功能。例如，第一部 iPhone 没有对 Flash 的原生支持。根据您问题的含义，我认为这未通过“全面”测试。

相比之下，Android 拥有更广泛的设备库。Android 的代码由这些设备的制造商调整和更改，以使他们能够针对其特定设备需求制定更充分的可支持解决方案。Google 不能保证任何给定设备会以任何方式保持其任何或所有代码相同。这造成了进一步的限制，但也创造了其他非常棒的自由。

> ...他们都使用 webkit。

Chrome 和 Safari 也都使用 webkit。许多开发人员都被他们使用它的方式上的微小差异所困扰。

> ...在应用程序之外，实际的 android 浏览器运行得很好。

上面已经解决了这个问题。

> 有没有办法在较低的层次上真正解决android的问题？

同样，这不是***android 的***问题。如果您对当前实现有特定问题，您可以自由编写单独的解决方案。此外，使网页内容在浏览器中被查看并被提供。最佳实践是定义您需要它具体做什么。您需要`WebView`查看*任何*网页吗？还是只是你的？您当前的渲染有什么问题？您需要客户端脚本吗？

每个工具的制造都考虑到了特定的需求。这甚至对于所谓的“更好”的列表视图也是如此。这些观点旨在解决多个开发人员可能需要的特定需求。在编程（尤其是 OOP）的世界里，几乎没有什么是全面的。如果有的话，我们一开始就不必扩展我们的对象。在查看这样的工具时，请考虑它具体试图解决的需求。

> 有没有人为Android制作了一个更全面的网络对象？

是的。它们通常显示在您可以下载到设备的其他专用浏览器中。至于它们是否可以访问：就我个人而言，我不知道也不想看。

**最后声明**

您提出的问题确实不够具体，无法提供真正的解决方案。由于措辞不当，它似乎也采取了敌对立场。如果 CommonsWare 的回答或我自己的回答都没有解决您的问题，请考虑编辑您的问题以添加我们更具体的需求。也就是说，我希望我们的两个答案都能够为您提供一些见解。

希望这可以帮助，

模糊逻辑

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-23T09:30:14.670

恐怕这两个答案（Commonsware 和 Fuzzical Logic）都在回避现实。

根据我们为 iOS、Android 和 Windows Phone 开发 HTML5 网络应用程序和后来的 PhoneGap 应用程序（使用网络视图的混合）的两年经验，现实情况是：

在 iOS（Safari 和 WebView）上运行良好，在 Android 上的 Chrome、Windows 8 上的 IE 和 IE WebView（都有问题，但可以解决）中运行合理，但**在 Android WebView 中仍然是一场噩梦**。

Android 中的WebView 已损坏，并且在将 KitKat 更新为 Chromium 后**仍然损坏。**它只是在普通的 HTML5 上崩溃（甚至没有遇到 Javascript 问题）。你会发现网上**很多**人都在观察类似的事情。

诸如“Flash 支持”之类的东西与此无关 - Flash 这不是 HTML5。制造商是否要支持某个插件（或者，在这种情况下，是整个中间件）取决于他。我一直理解 Apple 的决定，而在 WebView 中它确实更没有意义。

所以，这个问题是安卓/谷歌的问题，尽管这个平台的支持者想要否认它。对于一家一直喊着“开放”的公司来说，这当然尤其令人尴尬，但经过这么多年，却无法提供一个可以工作的 HTML5 浏览器组件。

但是您的问题是，如果其他人有任何其他 WebView：

好吧，我们很想听听一个。很抱歉，我们到现在也没有找到，原因可能正是上面提到的：实现起来非常困难，并且会依赖于硬件（硬件加速等）。然而，由于 Chrome 现在至少可以正常工作（经过这么多年......）我想知道 Chromium WebView 中缺乏类似质量是否是谷歌故意的，试图让人们远离制作出色的网络应用程序或混合应用程序。（与微软正在做的完全相反。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-14T16:46:49.417

我很惊讶没有人提到[CocoonJS](https://www.ludei.com/cocoonjs/)。

它重新实现了标准的 WebView (Webview+)；打包的 Webview，因此您的应用程序将在设备上始终如一地运行（尽管仅限于 Android 4+ 和 iOS 8+）。

WebGL 还有一个名为 Canvas+ 的环境，但它与 WebView+ 完全分离。这意味着您需要在 Canvas+ 之上覆盖 WebView+ 以同时显示 DOM 和画布。它们不共享同一个 JS 环境，但有一个消息系统用于在两者之间发送消息。

由于对操作系统的支持有限，CocoonJS 似乎不是一个好的生产级解决方案，但也许它会在未来出现。

还有[人行横道](https://crosswalk-project.org)。它适用于 Android 4+ 和 Tizen。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T21:11:47.500

这非常接近题外话，请在其他地方发送您的咆哮-请某种“问题”。

> 有没有更好的安卓网页视图？

如果“webview”是指可嵌入的 Web 渲染引擎，可能不是，因为编写这样的引擎*很难*。您可以查看是否可以作为 Firefox Mobile 的分支使用。或者，欢迎您将自己的 WebKit 移植到 Android，使用 AOSP 版本作为起点。请注意，两者都可能会大大增加您的应用程序的大小。

> 谷歌自己的文件提到不要依赖 webview 对象。

请引用。

> 有没有人为Android制作了一个更全面的网络对象？

这将取决于一个人对“更全面的网络对象”的定义。值得注意的是，您忽略了为该短语提供任何类型的定义。

# ruby-on-rails-3.2 - Ruby On Rails 3.2.3 - 在同一视图中显示来自两个模型的信息

> ID：10955931
> 
> 赞同：0
> 
> 时间：2012-06-08T20:55:08.563
> 
> 标签：ruby-on-rails-3.2

我正在尝试在视图上显示国家/地区名称。我有一个带有 country_id 的 User 模型，它属于_to :countries。我有一个带有 id、iso 和 name 的 Country 模型，它有很多：users。

这就是我在控制器中用于显示视图的内容：@user = User.find(params[:id])

我认为通过这种关系设置，我可以执行 user.country.name 或 user.countries.name 并获取国家名称。但是，无论是在视图中还是在用户控制器中，我都会收到以下错误。我是否将用户、国家或国家/地区大写都没有关系。

失败/错误：click_button“保存更改”ActionView::Template::Error: #<#:0x007fb9548a7ae0> 的未定义局部变量或方法“用户”

我想我会在视图中尝试这个：Country.find(@user.country_id).name

这在 Rails 控制台中按预期工作。它显示了我想要名称的正确国家/地区 ID 值。正如我在 Rails 控制台中执行此命令时所说，我得到了正确的值。在控制台中，我首先像在控制器中一样分配了@user。之后我执行 Country.find 命令。但是在视图中，我在 Country.find 命令中收到以下错误：

失败/错误：click_button“保存更改”ActionView::Template::Error: 找不到 id=1 的国家/地区

当我显示值时，它看起来像这样：

```
#<Country:0x007ffd6bf9ac20> 
```

当我创建一个设置为 Country.find 命令的实例变量 @country_name 时，我得到了同样的错误。我迷路了，因为美国记录在 Country 中的 id = 1 并且我可以在 Rails 控制台中找到它。

我检查了网络，包括 Stack Overflow。关于显示来自两个模型的信息的类似问题在这里被问了很多次。除了我尝试过但无法开始工作的两个选项外，他们还没有得到答复。一旦我能得到这个工作，我可能会为此创建一个用户助手。

# php - 如何获得今天的当前时间百分比？

> ID：10955934
> 
> 赞同：1
> 
> 时间：2012-06-08T20:55:36.473
> 
> 标签：php, javascript, jquery

我试图获取今天时间的当前时间百分比。它可以是 javascript 或 php。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T20:58:54.867

使用一个`Date`对象和一些算术。将当天的组成部分转换为等效单位（例如秒），找到它们的总和，然后除以该单位每天的数量。

例如，以下是 JavaScript 中的解决方案。

```
var d = new Date();
var pctDayElapsed = (d.getHours() * 3600 + d.getMinutes() * 60 + d.getSeconds() + d.getMilliseconds()/1000)/86400; 
```

请注意，这种方法依赖于浏览器的本地化。您的结果将取决于浏览器的时区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T20:58:17.337

我会使用当前时间来计算今天已经过去的秒数，然后将其除以 86400（一天中的秒数），当然再乘以 100 即可将其从小数转换为百分比。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T20:59:10.820

这是PHP中的答案：

```
$now=time();
$today=strtotime(date("m/d/Y"));
$seconds=$now-$today;
$day=24*60*60;//seconds in a day;
$percent=$seconds/$day*100; 
```

或者

```
$hours=date('G')*60*60;
$minutes=date('i')*60;
$seconds=date('s');
$day=24*60*60;//seconds in a day;
$percent=($hours+$minutes+$seconds)/$day*100 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-08T21:05:25.110

```
<?php
$timestamp = time();
$hours = intval(date("G", $timestamp));
$minutes = intval(date("i", $timestamp));
$seconds = intval(date("s", $timestamp));
$proportion_elapsed = ($hours * 60 * 60 + $minutes * 60 + $seconds) /
    (24 * 60 * 60);
printf("%0.4F of the day has elapsed.", $proportion_elapsed);
?> 
```

只要一天有 86,400 秒，这就会起作用，由于夏令时或闰秒，这可能不是真的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T20:57:55.380

通过将当前时间除以 86400 向下舍入到一天的开始，然后将该整数值乘以 86400。然后取当前时间的差值（当然以秒为单位），然后除以 86400。最后，乘以 100。

编辑：mod 更有效地工作

伪代码：

```
MidnightDays = (TimeInSeconds % 86400) * 86400;
Percentage = (TimeInSeconds - MidnightDays) / 86400 * 100; 
```

# rdf - Xpointer 是无效的 IRI？

> ID：10955936
> 
> 赞同：1
> 
> 时间：2012-06-08T20:55:44.560
> 
> 标签：rdf, jena, xpointer, iri

我正在尝试使用 Jena 框架处理 RDF的工具 ( [Elda )。](http://elda.googlecode.com)

我收到了这个错误：

> 错误 [qtp1415899750-24] (RouterRestlet.java:332) - 异常：第 7 行，第 72 列：com.hp.hpl.jena.iri.impl.IRIImplException：代码：片段中的 0/ILLEGAL_CHARACTER：字符违反语法规则对于 URI/IRI。

它说以下 URL 不是有效的 IRI。

> http://burckhardt.netseven.it/show_annotable_transcription?id=12#xpointer(start-point(string-range(//DIV[@about='http://burckhardt.netseven.it/show_annotable_transcription?id=12' ]/DIV[1]/BLOCKQUOTE[1]/P[1]/text()[1],'',13))/range-to(string-range(//DIV[@about='http:// /burckhardt.netseven.it/show_annotable_transcription?id=12']/DIV[1]/BLOCKQUOTE[1]/P[1]/text()[1],'',27)))

我知道它很丑，但据我所知，它符合 XPointer 规范......而且我在其他环境中成功使用它（例如 Sesame Triplestore）。

有人知道其中有什么问题吗？

谢谢你

基督教

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T21:12:36.127

根据[rfc2732](http://www.ietf.org/rfc/rfc2732.txt)和应该`[`只`]`用于编码 IPv6 地址

> 1.  对 RFC 2396 的更改
>     
>     
>     
>     本文档更新了 RFC 2396 [URL] 中定义的统一资源标识符的通用语法。它定义了 IPv6 地址的语法，并允许在 URI 中明确使用“[”和“]”用于此保留目的。

由于您的 url 没有在`[]`s 中编码 IPv6 地址，因此这被视为非法 URL

# javascript - 推送到多维对象

> ID：10955937
> 
> 赞同：2
> 
> 时间：2012-06-08T20:55:46.353
> 
> 标签：javascript, jquery

我想得到一个像这样的对象：

```
{"Red 1":53,"Blue 2":26,"Green 3":25} 
```

从以下示例：

试图将 .each 内部的数据推送到对象，但它是多维的，我不知道如何实现这一点：

```
//html
<div class="test">
    <div class="color">Red 1</div>
    <div class="value">53</div>
</div>
<div class="test">
    <div class="color">Blue 2</div>
    <div class="value">26</div>
</div>
<div class="test">
    <div class="color">Green 3</div>
    <div class="value">25</div>
</div>

//js
var dataPoints = {}; 
var colorTitle = '';
var colorValue = '';

$('.test').each(function(index) {
    colorTitle = $(this).find('.color').html();
    colorValue = $(this).find('.value').html();
    dataPoints.push({colorTitle:colorValue});
}); 
```

上面的代码显然不起作用，但我想基本上展示我正在尝试做的事情。

也尝试过这种方法：

```
dataPoints[index][colorTitle] = colorValue; 
```

这也不起作用。可能一起遗漏了一些东西，但任何帮助表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T20:59:21.233

这将做到：

```
var data = {};
$(".test").each(function() {
   var key = $(this).find(".color").text();
   var value = $(this).find(".value").text();

   data[key] = value;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T20:58:57.010

处理对象时使用正确的键/值分配。对象没有`push`方法。

```
$('.test').each(function(index) {
    dataPoints[$(this).find(".color").text()] = $(this).find(".value").text();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T21:09:28.403

实际上，您离正确并没有那么远，但是将其视为对象而不是数组-

```
var dataPoints = new Object(); 
var colorTitle = '';
var colorValue = '';

$('.test').each(function(index) {
    colorTitle = $(this).find('.color').html();
    colorValue = $(this).find('.value').html();
    dataPoints[colorTitle] = colorValue;
});

//test it!
alert(JSON.stringify(dataPoints)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T21:29:00.917

它不是多维的。它甚至不是一个数组。

`push`用于数组。

在 an中，`object`您可以添加一个键/值，例如`obj["key"]= value`or `obj.key = value`。

所以，试试这个

```
var dataPoints = {};  
$('.test').each(function(index) {
    var $this = $(this);
    dataPoints[$this.find('.color').html()]= $this.find('.value').html();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T20:59:20.113

您缺少该`each()`函数的右括号。对象`{}`也没有 push 方法。

如果要维护元素列表，请使用数组`[]`。

# asp.net - 使用 MVC 的疯狂 IIS 错误和 元素

> ID：10955941
> 
> 赞同：0
> 
> 时间：2012-06-08T20:56:03.393
> 
> 标签：asp.net, asp.net-mvc, iis, web-config

我试图深入了解导致我看到的一个特别奇怪的错误的原因。我已将问题隔离如下：

使用两个基本控制器创建一个 ASP.Net MVC 应用程序。

```
public class HasLocationController : Controller
{
   public ActionResult Index()
   {
      return View();
   }
}

public class NoLocationController : Controller
{
   public ActionResult Index()
   {
      return View();
   }
} 
```

将位置元素添加到路径“HasLocation”的 web.config

```
<location path="HasLocation">
   <system.web>
      <authorization>
         <allow users="*"/>
      </authorization>
   </system.web>
</location> 
```

将站点发布到 IIS6 或 IIS7 **（IISExpress 和 WebDevServer 不起作用）**，并尝试使用以下链接进行浏览：

```
http://[yourdomain]/NoLocation/%20~C:/blah.txt

http://[yourdomain]/HasLocation/%20~C:/blah.txt 
```

对于没有配置相应位置元素的控制器，您会收到您期望的异常消息。

* * *

![来自没有位置元素的控制器的异常](../Images/6541321c4ec5e7dc5f633496b1a2036d.png)

* * *

但是，如果你在控制器上尝试使用 location 元素做同样的事情，那么你会得到这个奇怪的错误：

**注意：**这只发生在前导波浪号 (~) 字符上。没有它，你会得到你所期望的正常错误。

* * *

![使用位置元素时出错](../Images/cb74bd19c5e0ea608c58e236f28f6e20.png)

* * *

我无法真正找到有关此错误的文档，但我很想了解为什么会发生这种情况以及如何防止它。

您可以就该问题提出的任何意见都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T21:14:11.387

互联网上几乎有数百个关于此*错误*的答案。很可能它与您的控制器完全无关，但与：

> ~C:/blah.txt

特别是`:`它可能认为具有潜在危险的那个。看看[HttpRuntimeSection.RequestPathInvalidCharacters](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.requestpathinvalidcharacters.aspx)。

至于第二个错误。`HasLocation`没错，您的项目中不存在该目录。创建它时，您将收到第一个错误。当您删除`:`它时，它将尝试在`HasLocation`目录中加载您请求的任何文件。

**注意：您不得使用 web.config 中的 location 元素来保护 MVC 应用程序控制器，您需要使用[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.authorizationattribute(v=vs.91).aspx)或其他类似的自定义属性。**

[这是一个参考](http://blogs.msdn.com/b/rickandy/archive/2010/08/24/securing-your-mvc-application.aspx)，任何搜索 SO 或 Google 都会说同样的话：

> 您不能使用路由或 web.config 文件来保护您的 MVC 应用程序。保护 MVC 应用程序的唯一受支持的方法是使用具有 [Authorize] 属性的基类，然后让每个控制器类型子类化该基类型。

重述正在发生的事情：

**第一个错误**：由于[HttpRuntimeSection.RequestPathInvalidCharacters](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.requestpathinvalidcharacters.aspx) ，您的 URL 引发错误。

**第二个错误**：是否有控制器都没有关系。默认的 ASP.Net Webforms 引擎正在尝试检测您在 url 中指定的目录是否存在（在您的情况下是名为*HasDirectory*的目录），因为它需要按照您在 web.config 中指定的方式授权 Webforms 引擎的目录访问位置元素。它甚至不担心文件。由于此目录不存在，因此您会得到与图像状态完全相同的错误（我以绿色突出显示）：

![突出显示的错误](../Images/e188390a5698a01f27cfcdb4b1d81278.png)

如果创建目录，则会收到错误 #1。

整个 ASP.Net 运行时执行如下操作：

1.  解析请求所需的路径。
2.  如果目录存在于 web.config 位置元素中，则验证对目录的任何授权。
3.  如果它具有访问权限，则获取文件并对其进行解析（aspx 等）
4.  如果它没有访问权限**并且**文件存在，则抛出异常或按照配置重定向。
5.  如果该**文件不存在**，则忽略 web.config 中的 location 元素并运行[IIS catch all](http://haacked.com/archive/2010/12/21/asp-net-mvc-3-extensionless-urls-on-iis-6.aspx)以确定是否有[另一个请求路由](http://blogs.charteris.com/blogs/gopalk/archive/2009/01/20/how-does-asp-net-mvc-work.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T01:34:56.803

我相信 url 中的波浪号会诱使虚拟路径提供程序在物理磁盘上查找该控制器。

# ios - 如何在 iOS 模拟器中模拟 iPhone 进入睡眠状态？

> ID：10955942
> 
> 赞同：28
> 
> 时间：2012-06-08T20:56:04.173
> 
> 标签：ios, ios-simulator

当手机在操作过程中进入睡眠状态时，我正在开发的 iPhone 应用程序似乎出现了错误。有什么方法可以模拟手机在 iOS 模拟器中进入睡眠状态？

具体来说，我指的是用户按下耳机旁边手机顶部的按钮，这会立即使屏幕空白。

**注意：** OP 询问“**关闭**”手机，当您按下顶部的按钮时不会发生这种情况。离开这里，因为解决问题的一部分是弄清楚要问什么问题。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-08T21:02:30.297

是的。打开 iOS 模拟器后，在菜单栏中，单击硬件 -> 锁定。

请注意，这看起来与实际使手机处于睡眠状态略有不同（它使“滑动解锁”屏幕保持运行），但实现了相同的效果。

您还可以做其他漂亮的事情，例如旋转设备并点击主页按钮。

需要明确的是，点击手机顶部的主页按钮不会将其关闭。它只是让它进入睡眠状态。

如果可能，您应该始终在实际设备上测试您的应用程序。模拟器不会模拟后台应用程序和 WatchDog 进程等在幕后发生的所有复杂的操作系统级别的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-03T03:59:00.950

截至 2021 年锁定模拟器的屏幕：

```
Device -> Lock 
```

或者

```
Cmd + L 
```

# php - 从 mysql 数据库中获取 jplayer 的 URL

> ID：10955943
> 
> 赞同：1
> 
> 时间：2012-06-08T20:56:13.050
> 
> 标签：php, javascript, mysql, jplayer

我需要从 mysql 数据库中获取艺术家曲目的 url，以便通过 jplayer 播放。我使用普通的 html 音频控件实现了它，但无法使用 jplayer 实现它，因为音频源是在 javascript 中输入的。

这是我使用 html 播放器实现它的方法；

```
<?php 
include ("../database.php");

$result = mysql_query("SELECT * FROM tracks WHERE artistname='$artistname'");

while($row = mysql_fetch_array($result)){

?> 
<br><br>
<audio controls="controls" height="50px" width="100px">
  <source src=<?php echo  $row['trackurl'] ?> type="audio/mp3" />
<embed height="50px" width="100px" src="song.mp3" />
</audio>

<?php } <? 
```

这是 jplayer 的 javascript：

```
<script type="text/javascript">
$(document).ready(function(){
  $("#jquery_jplayer_1").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        mp3: "http://localhost/uploads/dde85d7907e516545ba0860ef1ac23f2.mp3"
      });
    },
    swfPath: "../jplayer",
    supplied: "mp3"
  });
}); 
```

来自 mysql 数据库的 url 需要放在它说的地方： mp3: "http://localhost/uploads/dde85d7907e516545ba0860ef1ac23f2.mp3"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:03:27.840

您可以使用 AJAX 获取值并将其传递给 jPlayer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:04:29.030

在您的 javascript 中创建一个跟踪变量，例如

```
var mp3file='<?php echo $row['trackurl']; ?>'; 
```

进而

```
$(this).jPlayer("setMedia", {
    mp3: "mp2file"
  }); 
```

如果您获取一首歌曲，这将起作用。如果您在数组中获取数据，那么您需要 AJAX

# objective-c - 是否可以在特定 UIView 中显示 UIAlertView？

> ID：10955945
> 
> 赞同：0
> 
> 时间：2012-06-08T20:56:35.083
> 
> 标签：objective-c, ios, uialertview

我怀疑这是可能的，但是，是否可以在 UIView 中显示 UIAlertView？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T20:59:25.717

不，`UIAlertView`实际上是另一个`UIWindow`在您的应用程序主窗口上方。这同样适用于键盘。

# java - 使用 JSTL，Key 和 Value 在 Map 中有 ArrayList

> ID：10955949
> 
> 赞同：0
> 
> 时间：2012-06-08T20:56:49.430
> 
> 标签：java, jstl

我有一个

```
Map<ArrayList<String>, ArrayList<String> myMap = new HashMap<ArrayList<String>,ArrayList<String>>();

List<String> list1 = new ArrayList<String>();
list1.add("Administrator");
list1.add("Lookup Configuration");

List<String> list2 = new ArrayList<String>();
list2.add("User Creation");
list2.add("Branch Creation");
list2.add("Country");
list2.add("Language"): 
```

以上是虚拟数据，我正在创建这样的菜单管理

管理员 (MenuName) -- 用户创建 (item1) -- 分支创建 (item2) 查找创建 (MenuName) -- 国家 (item1) -- 货币 (item2)

我正在写这样的jstl

Map,ArrayList> myMap = new LinkedHashMap,ArrayList>();

我正在这样做

```
<c:forEach items="${mainMenu}" var="myMenu">
  <c:forEach items="${myMenu.key}" var="menuName" varStatus="loop">
    <li id="lookup" class="mail"><a href="#lookup">${menuName}<span>26</span></a>   
    <ul class="sub-menu">
      <c:forEach items="${myMenu.value}" var="items" varStatus="loop">
         <li><a href="#"><em>02</em>${items.itemName}<span>14</span></a></li>
      </c:forEach>                                            
    </ul>                   
    </li>
  </c:forEach>                                                                         
</c:forEach> 
```

我正在变得完美，但我对价值感到震惊

并且这些值没有迭代 realted 键，任何帮助都会受到重视

问候普拉迪普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:08:11.480

您是否使用了正确的数据结构？

你的意思是：

```
 Administrator
      --User Creation
      --Branch Creation
    Lookup Configuration
      --Country
      --Currency 
```

这不是列表地图吗？: 地图<字符串,列表<字符串>>

然后你可以有一个嵌套循环，在其中迭代每个键，然后遍历该键的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:42:34.087

我不确定，但也许你想要这样的东西：

```
<%
Map<String, List<String>> myMap = new LinkedHashMap<String,List<String>>();
request.setAttribute("mainMenu", myMap);
List<String> adminItemsList = new ArrayList<String>();
adminItemsList.add("User Creation");
adminItemsList.add("Branch Creation");

List<String> lookupItemsList = new ArrayList<String>();
lookupItemsList.add("Country");
lookupItemsList.add("Language");

myMap.put("Administrator", adminItemsList);
myMap.put("Lookup Configuration", lookupItemsList);
%>

<c:forEach items="${mainMenu}" var="myMenu">
    <li id="lookup" class="mail"><a href="#lookup">${myMenu.key}<span>26</span></a>   
    <ul class="sub-menu">
    <c:forEach items="${myMenu.value}" var="item" varStatus="loop">
         <li><a href="#"><em>02</em>_${item}_<span>14</span></a></li>
    </c:forEach>                                            
    </ul>                   
    </li>
</c:forEach> 
```

出去：

管理员26

*   02_用户创建_14
*   02_分支创建_14

查找配置26

*   02_国家_14
*   02_语言_14

我使用 LinkedHashMap 来记住我在 Map 中输入的键的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T19:42:01.930

这对您的两个帖子都非常有帮助，非常感谢您的两个答案我都得到了解决方案

这里是

我的地图是`Map<String,List<String> myMenu = new HashMap<String, List<String>>();`

```
<c:forEach items="${myMenu}" var="menuName" varStatus="loop">
   <li id="lookup" class="mail"><a href="#lookup">${menuName.key}</a>   
     <ul class="sub-menu">                                      
       <c:forEach items="${menuName.value}" var="item" varStatus="loop">
          <li><a href="${item.pageURL}">${item.itemName}</a></li>
       </c:forEach>
     </ul>                  
   </li>
</c:forEach> 
```

# sql-server - “7 个字段中有 3 个不为空的行”条件的选项

> ID：10955954
> 
> 赞同：2
> 
> 时间：2012-06-08T20:57:51.240
> 
> 标签：sql-server, sql-server-2008, tsql

当 7 个可用列中的任何 3 个包含该行的数据时，我需要包含行。有没有做类似事情的最佳实践？我想出的解决方案似乎很好，只是想知道是否有更可接受的模式？有关详细信息，请参见[此处。](http://sqlfiddle.com/#!3/4da21/6)以下是我要完成的工作的要点。

```
CREATE TABLE Customer(
    FirstName varchar(50) NULL,
    LastName varchar(50) NULL,
    AddressLine1 varchar(100) NULL,
    AddressLine2 varchar(100) NULL,
    City varchar(50) NULL,
    State char(3) NULL,
    Country char(2) NULL)

Insert Into Customer Values('Bob', null, '', 'addr2', 'city', '', null)
Insert Into Customer Values('', '', '', '', '', '', '')
Insert Into Customer Values(null, null, null, null, null, null, null)

SELECT *
    FROM Customer
    WHERE (CASE WHEN IsNull(FirstName, '') = '' THEN 0 ELSE 1 END
           + CASE WHEN IsNull(LastName, '') = '' THEN 0 ELSE 1 END
           + CASE WHEN IsNull(AddressLine1, '') = '' THEN 0 ELSE 1 END
           + CASE WHEN IsNull(AddressLine2, '') = '' THEN 0 ELSE 1 END
           + CASE WHEN IsNull(City, '') = '' THEN 0 ELSE 1 END
           + CASE WHEN IsNull(State, '') = '' THEN 0 ELSE 1 END
           + CASE WHEN IsNull(Country, '') = '' THEN 0 ELSE 1 END) 
            >= 3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T21:45:33.720

替代。

```
SELECT *
FROM   Customer
WHERE  3 <= ((SELECT Count(NULLIF(C, ''))
              FROM   (VALUES (FirstName),
                             (LastName),
                             (AddressLine1),
                             (AddressLine2),
                             (City),
                             (State),
                             (Country)) V(C))) 
```

# java - Java：匹配嵌套列表中的列表

> ID：10955955
> 
> 赞同：2
> 
> 时间：2012-06-08T20:57:52.090
> 
> 标签：java, list, linked-list

我有一个有趣的困境：

我有一个类，假设它叫做 FileCabinet。

FileCabinet 存储文件的 LinkedList，称为“filesInCabinet”。

在每个文件中，还有另一个文件链接列表，称为“relatedFiles”。

所以它看起来像这样，例如：

文件柜1

*   文件 1
    *   文件 3
*   文件2
    *   文件 3
    *   文件4
*   文件 3
    *   文件 1
    *   文件2
*   文件4
    *   文件2

我遇到的问题是嵌套列表（“relatedFiles”）包含文件的**单独实例**，所以实际上它更像是：

文件柜1

*   文件 1
    *   File3_duplicate
*   文件2
    *   File3_duplicate2
    *   File4_duplicate
*   文件 3
    *   File1_duplicate
    *   File2_duplicate
*   文件4
    *   File2_duplicate2

有了这个，当我去更改嵌套列表之一中的文件属性时，我希望它也更改真实文件的属性，但它只会更改副本的属性。

有没有一种有效的方法可以将嵌套列表中的文件“匹配”到非嵌套文件列表？每个文件还包含唯一的字符串、整数等，因此很容易确定副本是哪个文件的克隆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:13:55.313

有一种非常快速的方法可以做到这一点，将所有文件放在一个集合中并再次构建相关文件。像这样：

```
Map<File, File> existingFiles = new Map<File, File>();
for (File f : filesInCabinet) {
   existingFiles.put(f, f);
}

for (File f : filesInCabinet) {
   List<File> relatedFiles = f.getRelatedFiles();
   for (int i = 0; i < relatedFiles.size(); i++) {
      File relatedFile = existingFiles.get(relatedFiles.get(i));
      relatedFiles.set(i, relatedFile);
   }
} 
```

它的工作原理是将文件放入映射中，并将相关列表中的文件替换为由于 equals / hashcode 实现而从 Map 获得的文件，因此当您提供相关对象时，您会从主列表 (filesInCabinet) 中获取实例。

这意味着 hashCode 和 equals 需要在 File 上实现。

# xamarin.ios - MonoTouch Objective C 绑定，正确的轨道？

> ID：10955958
> 
> 赞同：0
> 
> 时间：2012-06-08T20:57:59.557
> 
> 标签：xamarin.ios

我正在尝试使用 kiip 库来做到这一点：

[http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types)

我收到一条错误消息，说找不到我的绑定项目，但是，我确实在项目中添加了对它的引用。

我是否使用这样的代码：

```
public override void ViewDidLoad ()
    {
        var kp = new KiipMonoTouchBinding.IKPManager();

            kp.InitWithKey("abc", "123");

    } 
```

我这样做正确吗？

```
 namespace KiipMonoTouchBinding
{
interface IKPManager
{
    //kiip code

    //KPManager* manager = [[KPManager alloc] initWithKey:@"0b56b49f621ad7f42fd85de7e461f9dd" secret:@"ac3abfdf5cb86ce0febba0c8afd2744e" testFrequency:100];
    [Export("initWithKey:")]
    void InitWithKey(string key, string secret);

//[[KPManager sharedManager] unlockAchievement:@"_achievement_id_"];
    [Export ("unlockAchievement:")]
    void UnlockAchievement(string achivementId);

//
//- (IBAction)saveLeaderboard {
//    NSLog(@"save leaderboard");
//    [[KPManager sharedManager] updateScore:100 onLeaderboard:leaderboard_id.text];
//}

//[[KPManager sharedManager] updateScore:_score_ onLeaderboard:@"_leaderboard_id_"];

    [Export("updateScore:")]
    void UpdateScore(int score, string leaderboardId);

    //- manager:(KPManager*)manager didStartSession:(NSDictionary*)response {
    [Export("didStartSession:response")]
    void DidStartSession(NSDictionary response);

    //updateLatitude:(double)37.7753 longitude:(double)-122.4189];
    [Export("updateLatitude:_latitude, longitude")]
    void UpdateLatitude(double latitude, double longitude);

    [Export("updateUserInfo:info")]
    void UpdateUserInfo(NSDictionary info);

    // [[KPManager sharedManager] getActivePromos];
    [Export("getActivePromos")]
    void GetActivePromos();

// Update the user's location
// [manager updateLatitude:_latitude_ longitude:_longitude_];

// Update the User's information
// NSDictionary* info = [[[NSDictionary alloc] initWithObjectsAndKeys:
                    //    _email_, @"email",
                   //     _alias_, @"alias",
                  //      nil]
                 //     autorelease];
//  [manager updateUserInfo:info];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T17:38:58.430

您的绑定有几个问题。

构造函数必须声明为“IntPtr Constructor”，因此将“void InitWithKey”更改为：

```
 [Export ("initWithKey:")]
 IntPtr Constructor (string key); 
```

第二个问题是您使用的导出“initWithKey：”采用单个参数（我们知道这一点是因为有一个冒号实例），因此您可能需要找出构造函数的实际名称，或者使用单个参数（键），就像我在示例中所做的那样。

您对“DidStartSession”的绑定是错误的。查看“manager:didStartSession:”的签名，它应该是：

```
 [Export ("manager:didStartSession:")]
 void DidStartSession (KPManager manager, NSDictionary sessionREsponse); 
```

您的 UpdateLatitude 也是错误的，再次，您添加的选择器不正确，不看代码我无法猜测它是什么，但如果这真的得到两个参数（经度和纬度），它看起来像这样（我正在制作选择器名称向上）：

```
 [Export ("updateLatitude:andLongitude:")]
 void UpdateLocation (double latitude, double longitude) 
```

UpdateUserInfo 也是错误的，很可能它需要一个参数（再次猜测）：

```
 [Export ("updateUserInfo:")]
 void UpdateUserInfo (NSDictionary info) 
```

请注意，“信息”一词，参数的名称绝不是选择器名称的一部分。

getActivePromos 的绑定看起来也有问题，我怀疑它应该返回一个值，但您将它声明为返回 void。

可能还有其他问题。

# javascript - ECMAScript 5.1 移动兼容性

> ID：10955960
> 
> 赞同：4
> 
> 时间：2012-06-08T20:58:16.513
> 
> 标签：javascript, jquery, android, ios, mobile

我在哪里可以找到有关 ECMAScript 5.1 与移动设备浏览器兼容性的有用信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:28:36.790

我正在搜索相同的问答并遇到了这个网站

[http://kangax.github.com/es5-compat-table/](http://kangax.github.com/es5-compat-table/ "ECMAScript 兼容性矩阵")

它包括“webkit”作为一个列，我相信所有（大多数）移动网络浏览器都基于该列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-22T18:57:17.103

较旧的移动设备浏览器不广泛支持 ECMA5。例如，Android 2.3 和 iOS Safari 4.3 不支持 ECMA5 脚本模式：[http](http://caniuse.com/#feat=use-strict) ://caniuse.com/#feat=use-strict 。

# html - twitter bootstrap项目的重叠边界

> ID：10955966
> 
> 赞同：0
> 
> 时间：2012-06-08T20:58:47.243
> 
> 标签：html, css, twitter-bootstrap

使用 twitter-bootstrap-2.0.4

```
...some topbar code here....
div.container-fluid
  div.content
    div.row-fluid
      div.span2
        div.menuLeft
          a(class='menuLeftItem', href="http://localhost:3000") Explore
          br/
          a(class='menuLeftItem', href="http://localhost:3000") My Playlists
          br/
          a(class='menuLeftItem', href="http://localhost:3000") Challenge
          br/
          a(class='menuLeftItem', href="http://localhost:3000") Socialize
          br/ 
```

我的 CSS：

```
* { margin: 0; padding:0; }

html, body {
background-color: red;
height: 100%;
width: 100%;
overflow: hidden;
}
body {
  padding-top: 58px; /* 40px to make the container go all the way to the bottom of the topbar */
  padding-left: 0px;
  padding-right: 0px;
}
.container-fluid {
  background-color: black;
}
.content {
  background-color: blue;
}
.span2 {
  background-color: green;
}

.menuLeftItem {
  color:white;
  /*font*/
  font-size:13px;
  font-weight:bold;
  line-height:1;
  border: 1px solid white;
} 
```

我的 menuLeftItems 没有正确对齐。具体来说，这些元素的边界是重叠的。请告诉我如何正确对齐元素。此外，我希望每个 menuLeftItem 都采用与其包含元素 span2 相同的宽度。我为 .menuLeftItem 尝试了宽度 = 100%。但它没有生效。

我的目标是为不同的屏幕尺寸创建一个固定的页面布局。因此，我正在尝试使用流体布局。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:58:32.343

好的 修复它。我需要将 display: inline-block 添加到类 menuLeftItem 中。我发现这是在另一个堆栈线程 [HTML/CSS 上的参考 - 将元素宽度扩展到可见区域（超出包含元素的宽度）](https://stackoverflow.com/questions/10936973/html-css-extend-element-width-to-visible-area-beyond-width-of-containing-elem)

# api - Google PHP API - (403) 未配置访问

> ID：10955971
> 
> 赞同：1
> 
> 时间：2012-06-08T20:59:10.920
> 
> 标签：api, google-analytics

我使用 Google PHP API 客户端[http://code.google.com/p/google-api-php-client/](http://code.google.com/p/google-api-php-client/)从 google API 检索数据。

通过 OAuth2 登录并获取用户信息就像一个魅力，但是当我尝试访问 goole 分析 api 时，我每次都会收到这个 403 代码错误。数百名遇到相同问题的用户忘记在服务设置中激活 Google Analytics API，或者只是提供了不正确的凭据（client_id 和 client_secret）。我尝试多次启用/禁用 Google Analytics，并从我的谷歌帐户登录/注销，但没有结果。

有人对我有任何指示吗？（请记住，OAuth 过程有效，因为我同时获得了 access_token 和 refresh_token）

我正在使用类示例文件夹中的 simple.php 示例...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-18T19:36:06.060

我正在自己开发 Drive 并理解这个问题。我在理解 Google 和他们的 PHP api 时遇到了一些麻烦。我终于让它与在互联网上找到的一些例子一起澄清。

您的问题听起来像是您没有将范围设置为 Google 分析，但是请在您已采取的步骤以及您尝试使用的代码中明确说明。

错误可能很简单，就像在 oAuth 回调文件中忘记了这一行：

```
$client->addScope(Google_Service_Analytics::ANALYTICS); 
```

了解您是否需要一个完整的付费帐户才能从 Google 访问有关您的 Analytics 的信息（不像 Google+ 和 Google 云端硬盘那样免费提供）。

# algorithm - AVL 树：如何进行索引访问？

> ID：10955972
> 
> 赞同：6
> 
> 时间：2012-06-08T20:59:16.760
> 
> 标签：algorithm, data-structures, tree, indexing, avl-tree

[我在AVL 树维基百科页面](http://en.wikipedia.org/wiki/AVL_tree)上注意到以下评论：

“如果每个节点还记录了其子树的大小（包括它自己及其后代），那么这些节点也可以在 O(log n) 时间内通过索引检索。”

我用谷歌搜索并找到了一些提到[按索引访问的](http://www.gap-system.org/Manuals/pkg/orb/doc/chap8.html)地方，但似乎找不到人们会写的算法的解释。

非常感谢

[更新] 谢谢大家。如果找到@templatetypedef 答案与@user448810[链接](http://programmingpraxis.com/2011/11/29/avl-trees-extended/2/)之一相结合，特别有帮助。特别是这个snipit：

“这两个函数的关键是节点的索引是它的左孩子的大小。只要我们通过它的左孩子下降一棵树，我们只需要节点的索引。但是当我们必须移动时通过它的右子树向下，我们必须调整大小以包括我们排除的树的一半。”

因为我的实现是不可变的，所以在重新平衡时我不需要做任何额外的工作，因为每个节点都会计算它的构造大小（与方案 impl 链接相同）

我的最终实现最终是：

```
class Node<K,V> implements AVLTree<K,V> { ...
    public V index(int i) {
        if (left.size() == i) return value;
        if (i < left.size()) return left.index(i);
        return right.index(i - left.size() - 1);
    }
}

class Empty<K,V> implements AVLTree<K,V> { ...
    public V index(int i) { throw new IndexOutOfBoundsException();}
} 
```

这与其他实现略有不同，如果您认为我有错误，请告诉我！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T21:04:35.427

这种构造背后的一般思想是采用现有的 BST 并通过将节点数存储在左子树中来扩充每个节点。完成此操作后，您可以使用以下递归算法查找树中的第 n 个节点：

*   要查找根节点在其左子树中有 k 个元素的 BST 中的第 n 个元素：
    *   如果 k = n，则返回根节点（因为这是树中的第 0 个节点）
    *   如果 n ≤ k，递归查找左子树中的第 n 个元素。
    *   否则，在右子树中查找第 (n - k - 1) 个元素。

这需要时间 O(h)，其中 h 是树的高度。在 AVL 树中，这个 O(log n)。在 CLRS 中，这种构造被探索为应用于红/黑树，他们称这种树为“顺序统计树”。

您必须在树旋转期间添加一些额外的逻辑来调整左子树中缓存的元素数量，但这并不是特别困难。

希望这可以帮助！

# box-api - 如何为用户检索现有的身份验证令牌？

> ID：10955983
> 
> 赞同：0
> 
> 时间：2012-06-08T21:00:40.607
> 
> 标签：box-api

在 v2.0 中使用新的令牌认证方法，有没有办法为用户检索现有令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T17:53:22.607

在我正在处理的脚本中，我保存了在获得`auth_token`. 这样我以后可以重复使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:30:53.443

目前还没有，但我们正在努力开发一种方法。

# c# - 如何从异常（随机发生 C# WPF）中获取更多信息？

> ID：10955985
> 
> 赞同：1
> 
> 时间：2012-06-08T21:00:47.520
> 
> 标签：c#, wpf, entity-framework, exception

我们有一个运行在 WPF 和实体框架之上的大型业务应用程序。问题是我们在过去 2 周内遇到了问题，无法确定问题的根源。

异常被 DispatcherUnhandledException 捕获，我们从异常中获得的信息（通过电子邮件）是这样的：

```
mscorlib: Value cannot be null.
   at System.Threading.Monitor.ReliableEnter(Object obj, Boolean& lockTaken)
   at System.Threading.Monitor.Enter(Object obj, Boolean& lockTaken)
   at System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString)
   at System.Data.EntityClient.EntityConnection.Dispose(Boolean disposing)
   at System.ComponentModel.Component.Finalize() 
```

该异常每天“随机”抛出 4 或 5 次，并且仅来自我们拥有的 20 多个用户中的一个。我们无法弄清楚问题！堆栈跟踪没有提供太多信息，我们无法重现该问题。

我假设这发生在一个线程上，但我无法识别导致异常的线程，因为我们有很多 BackgroundWorkers 和异步的东西！

那么，我怎样才能获得有关异常的更多信息？

* * *

**编辑：**

没有任何内部异常。

此外，异常以分钟和小时为间隔抛出，例如：11:41、11:46、11:51 然后它运行良好，直到 18:03、18:07、18:11 然后没有异常抛出. 该分钟间隔发生的时刻也是随机的，与服务器或网络上的任何负载无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T22:34:34.490

看起来这可能是作为垃圾收集线程的一部分发生的。堆栈底部的 Finalize 调用是提示，然后可能调用 EntityConnection.Dispose(false);

问题的性质是不确定的。您的环境中可能已经发生了一些变化，它现在正在发生。

在终结器中，访问其他托管对象确实不安全。看起来 ChangeConnectionString 可能正在尝试使用托管对象作为锁，有时当它在 GC 线程中时，对象已经被清理了。它这样做可能是 EntityConnection 中的一个错误。

您应该能够通过在组件上调用 Dispose 来避免这种情况，而不是让 Finalizer 运行（将它们包含在 using 块中是确保这一点的好方法）。但是，使用您拥有的调用堆栈，很难说导致问题的组件的性质。

如果您想获得本地重现，请尝试使用覆盖 Finalize 的类（例如 ~MyComponent()）对访问 EntityConnections 的 Component 对象进行子类化并在其中抛出异常。这样，如果 GC 清理了这些对象，您就会崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-07T05:17:46.060

“ReliableEnter 值不能为空”错误意味着您正在尝试锁定设置为空的对象。

查找对象被设置为 null 的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-18T09:17:17.143

我刚刚发生了这种情况；就我而言，我处理`SemaphoreSlim`得太早了。

我的代码类似于

```
using (var semaphore = new SemaphoreSlim(0, 1))
{
    //... start task that will call semaphore.Release()
    return func(); // this in turn calls semaphore.WaitAsync(timeout);
} 
```

因为我没有`await`返回`Task`by `func`，所以信号量`Dispose`太早了，我得到了“ReliableEnter value cannot be null”错误。

# c# - C# 的设计模式和基于字符串参数调用不同的方法

> ID：10955986
> 
> 赞同：1
> 
> 时间：2012-06-08T21:00:53.560
> 
> 标签：c#, .net, windows, design-patterns, watin

因此，我目前正准备开发一个相当酷的库，我将从 Excel 工作表或 Sharepoint 列表中提取数据，然后使用带有 C# 的 WatiN 和 .NET 来执行各种浏览器命令以进行自动化 UI 测试。但是，在尝试封装未来可能需要生成的命令或测试的不断变化的需求时，我遇到了一个很大的设计问题。目前，我有大约 5 个需要基于命令参数执行的独特操作（以字符串形式存储在 Excel 或 Sharepoint 列表中），但我想轻松地使命令数量可扩展并执行验证以确保没有错误的命令。任何人都可以为我指出正确的设计模式方向，它可以帮助我有效且稳健地实现这一点，而不仅仅是在 HandleCommand() 函数中编写一个巨大的 switch 语句？感谢您帮助新程序员！=D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T21:05:26.820

查看[命令模式](http://en.wikipedia.org/wiki/Command_pattern)以封装命令并使用[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)根据其名称创建命令对象的实例。工厂可以使用反射来根据文本确定创建哪个命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:08:17.247

我同意 Builder 和 Factory Method 在这里有意义。您可能不想使用 Gamma 和 co 在“设计模式”一书中描述的基于继承的工厂方法版本。只需使用以 Command 类的名称进行实例化的静态工厂方法。

# c# - USPS 地址验证失败

> ID：10955988
> 
> 赞同：0
> 
> 时间：2012-06-08T21:00:58.870
> 
> 标签：c#, xml, usps

验证地址时，我收到此错误：

```
ex = {"Error Loading XML:  The following tags were not closed: AddressValidateRequest, Address, Address1.\r\n"} 
```

或者我收到另一个错误，说找不到地址。有没有更好的方法来验证这个地址？

这是我的网址：

```
http://production.shippingapis.com/ShippingAPI.dll?API=Verify&XML=<AddressValidateRequest USERID="402JMAWE3481"><Address ID="1"><Address1>123 Main St</Address1><Address2></Address2><City>Watertown</City><State>MA</State><Zip5>02472</Zip5><Zip4></Zip4></Address></AddressValidateRequest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T21:12:17.970

~~根据我在错误描述中看到的内容，问题可能是您需要`\r\n`先从 xml 中删除，然后再将其添加到 url~~。不要忘记对它进行 url 编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:53:19.153

你实际上需要 HtmlEncode 它然后 UrlEncode 它。这是因为您实际上是在发送 XML（需要`&amp;`而不是），但它是一个 URL，因此它需要编码以`&`使每个`&``%26`

这是一个完整的工作 URL - 您只需输入您的 USERID。

```
http://production.shippingapis.com/ShippingAPI.dll?API=Verify&XML=<AddressValidateRequest USERID="123USERID567"><Address ID="1"><Address1></Address1><Address2>10051+Orr+%26amp%3b+Day+Rd</Address2><City>santa+fe+springs</City><State>ca</State><Zip5>90670</Zip5><Zip4></Zip4></Address></AddressValidateRequest> 
```

你会看到它包含这个看起来很时髦的字符串：

```
 10051+Orr+%26amp%3b+Day+Rd 
```

我通过这样做得到：

```
 HttpUtility.UrlEncode(HttpUtility.HtmlEncode("10061 Orr & Day Rd")) 
```

[This specific error I got back when I didn't encode properly was `Error Loading XML: Whitespace is not allowed at this location`]

# com - 通过预定义的 COM 接口传递自定义数据

> ID：10955995
> 
> 赞同：1
> 
> 时间：2012-06-08T21:01:54.657
> 
> 标签：com, interface, reinterpret-cast

我正在使用 3-rd 方 COM 服务。它从 .NET 程序集中暴露出来。这个服务提供了几个接口，实际上我可以在我的 C++ 应用程序中使用（使用早期绑定）。实际上我想知道是否可以通过使用这些接口传递自定义数据，即对我来说，这些接口提供的内容还不够，我想在那里添加一些额外的数据/方法（虽然接口不是我的，所以我不能更改）。如果可能，请提供建议，如果不是，可能有一些解决方法（示例将非常有帮助）？

我试图了解是否可以通过 3-rd 方 COM 服务将自定义数据从我的生产者传递给我的消费者。可能我需要创建自己的接口，其中包含我的方法并继承 3-rd 方 ISomething 并使用它？

下面是说明问题的代码。非常感谢您的帮助...

1）我用来将数据从生产者传递给消费者的类（通过第 3 方 COM 服务）：

```
//ISomething is 3-rd party interface with some limited # of data and methods

//Something is my class that will be used to pass data where ISomething is asked 
//and it contains some methods that I need and they are not defined in ISomething
class Something: public CComObjectRootEx<CComSingleThreadModel>,  public IDispatch
{
private:
    bstr_t Name;
    bstr_t MyData;

public: 

    //COM map omitted

    //Method defined in ISomething
    STDMETHOD(get_Name)(BSTR * pRetVal)     
    { 
        *pRetVal = ::SysAllocString(Name);
        return S_OK;
    }
    //Method defined in ISomething
    STDMETHOD(put_Name)(BSTR pRetVal)           
    { 
        Name = pRetVal; 
        return S_OK;
    }

    **//Method that is NOT defined in ISomething**
    STDMETHOD(get_MyData)(BSTR * pRetVal)           
    { 
        MyData= pRetVal; 
        return S_OK;
    }

    **//Method that is NOT defined in ISomething**
    STDMETHOD(put_MyData)(BSTR pRetVal)         
    { 
        MyData = pRetVal; 
        return S_OK;
    }
} 
```

2）我的数据生产者填充数据并将其传递给第 3 方 COM 服务

```
CComObject<Something> *Obj = NULL;
CComObject<Something>::CreateInstance(&Obj);

//Calling method defined in ISomething
Obj->put_Name(_bstr_t("Some data"));

**//Calling method that is NOT defined in ISomething**
Obj->put_MyData(_bstr_t("My data"));

//Passing data to COM service
CComPtr<ISomething> iObj;
Obj->QueryInterface(__uuidof(ISomething),(void **) &iObj);

CComPtr<ICommand> command = //init omitted, it's another 3-rd party object;
//Setting data
command->do(iObj); 
```

3）我的数据消费者尝试获取已定义和未定义的数据，但仅成功获取已定义的数据，未定义包含垃圾

```
class SomethingEventSink : public CComObjectRootEx<CComSingleThreadModel>, 
                     public IDispatch
{

    //COM map omitted

    STDMETHOD(SomethingEventHandler)(VARIANT sender, struct _SomethingEventArgs *args)  
    {

        ISomething* obj;
        Something* extObj;

        args->get_Something(&obj);

        BSTR Name, Name1, MyData;

        //Works fine
        obj->get_Name(&Name);

        //Casting to my object pointer
        extObj = reinterpret_cast<Something*>(obj)

        //Works fine
        extObj->get_Name(&Name1);

        **//Works, but NO DATA I've set at producer step**
        **//HOW TO MAKE IT WORK?**
        extObj->get_MyData(&MyData);

        return S_OK;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T02:11:43.620

您尝试做的事情不可能按照您的方式进行。但是，如果您可以声明自己的新界面，您是否可以让它工作？

在这种情况下，您的对象可以实现 ISomething 和 IMyInterface，并且您可以定义 IMyInterface 以拥有任何您想要的新方法。

# css - 网格排列中的CSS滑出div

> ID：10955996
> 
> 赞同：3
> 
> 时间：2012-06-08T21:01:56.410
> 
> 标签：css, html, grid, hover

我正在尝试创建一个“块”的“网格”，将鼠标悬停在其下方的 div 中会显示一些文本。在这个例子中，我已经得到了我想要的一切，但是 - 有没有办法让它在我拥有的安排中工作？

我想要的是只有底部 div 向下推（如示例中的左下角），当它上面的一个“扩展”时。但显然我没有做对，因为它造成了巨大的差距并且它也没有显示动画。

不过，底部 div 在第二列中的反应方式并不是我想要的。

有任何想法吗？

谢谢，不胜感激！

[http://jsfiddle.net/nbFkZ/](http://jsfiddle.net/nbFkZ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:37:53.593

通过您的评论，我想我终于理解了您的问题：

我做了什么：

1.  我已将第二个和第三个 li 移动到一个新的 UL 元素中。
2.  让两个 UL 元素都向左浮动。

HTML 在这里发布有点多，所以我只发布 CSS：

```
ul.things {
    list-style: none;
    float: left;
    width: 240px;
}

ul.things li {
    display: inline-block;
    /*float:left;*/
    margin:15px;
} 
```

**HTML、CSS 和现场演示**：http: [//jsfiddle.net/nbFkZ/4/](http://jsfiddle.net/nbFkZ/4/)

希望能帮助到你 ：）

# jquery - 暂停时jQuery循环不恢复

> ID：10955997
> 
> 赞同：0
> 
> 时间：2012-06-08T21:02:02.917
> 
> 标签：jquery, hover, cycle, jquery-cycle

我的服务器上出现了非常奇怪的行为。那是我的代码：

```
<script type="text/javascript">
jQuery(function($){
    $(".slides").cycle({
        fx:     'none',
        speed:   1,
        timeout: 1000,
        width: 160,
        height: 120
    }).cycle("pause");

    // Pause & play on hover
    $(".slideshow-block").hover(function(){
        $(this).find(".slides").addClass("active").cycle("resume");
    }, function(){
        $(this).find(".slides").removeClass("active").cycle("pause");
    });

});
</script> 
```

HTML 如下所示：

```
<div class="slideshow-block">
  <ul class="slides">
    <li><img src="img1.jpg" /></li>
    <li><img src="img2.jpg" /></li>
    <li><img src="img3.jpg" /></li>
  </ul>
</div></div> 
```

现在，如果我`.cycle("pause")`一开始使用，悬停功能不会被执行。如果我在开始时跳过暂停，加载网站时幻灯片正在运行，当我将鼠标移到图像上时它会继续运行，当鼠标离开图像区域时它会停止，一切都应该是. 当我开始播放暂停的幻灯片时，为什么这不起作用？

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T00:06:32.740

您的代码在 jsfiddle 中运行良好。

[http://jsfiddle.net/lucuma/pssgN/1/](http://jsfiddle.net/lucuma/pssgN/1/)

上面的 HTML 有一个悬空的关闭 div..